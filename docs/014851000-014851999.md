# StackOverflow 问答 14851000-14851999

# c# - 在窗口关闭时运行 Windows 窗体线程

> ID：14851000
> 
> 赞同：2
> 
> 时间：2013-02-13T10:08:59.877
> 
> 标签：c#, winforms

我有一个运行线程的 Windows 窗体，该线程读取一个字符串并将其显示在文本框中。

它具有开始-停止按钮以开始在窗口内的文本框中显示单词`Main_Form`。

现在，我需要创建一个处理启动停止的打开表单。当您按下开始时，应该会发生同样的事情，但`Main_Form`可以关闭

你有一个按钮可以打开`Main_Form`并查看文本框的变化

它仅在我键入时有效：

```
m_mf = new Main_Form();
m_mf.Show();
m_mf.start(); 
```

如果我输入

```
m_mf.Visible = false; 
```

或关闭程序杀死自己的主窗体窗口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:14:14.583

您是否尝试过使用 Hide() 而不是 visible = false：

```
m_mf.Hide(); 
```

如果您使用`m_mf.Close();`它将完全关闭程序。

[这篇文章](http://www.techotopia.com/index.php/Hiding_and_Showing_Forms_in_C_Sharp)可能会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:28:03.200

你的意思是在 m_mf 关闭后运行一个新表单，在你的 main 函数中你可以修改它如下：

```
 Application.Run(new m_mf());
 Application.Run(new Form1()); 
```

# blackberry - BlackBerry - 从持久对象向量中写入和读取

> ID：14851006
> 
> 赞同：0
> 
> 时间：2013-02-13T10:09:06.207
> 
> 标签：blackberry, vector, read-write, persistent-storage

我有一个 BlackBerry 应用程序，它以固定的时间间隔向服务器发送消息。使用任何可用的连接方法通过网络服务发送消息；Wifi、BIS、TCP/IP 等

由于消息是连续发送的，我需要一种机制来排队消息以防互联网不可用，并在互联网可用时发送消息。出于这个原因，我希望首先将任何传出消息保存在 Persistent Store 中，然后读取 Persistent Store 并循环通过它来发送所有待处理的消息。任何新消息都应保存在持久存储中的最后一个位置。

单击“发送”时，我正在调用以下两种方法：

```
 public static void saveMessage(String msg){
        Hashtable hashtable=new Hashtable();
        persistentObject = PersistentStore.getPersistentObject(KEY);
        hashtable.put("MessageToSend", msg);
        persistentObject.commit();
    }

    public static void sendMessage(String msg){
        Hashtable hashtable=new Hashtable();
        persistentObject = PersistentStore.getPersistentObject(KEY);
        Vector msgVector = (Vector)persistentObject.getContents();
        Enumeration eMsgs=msgVector.elements();;
            /*synchronized(poObject )*/{
                persistentObject.setContents(msgVector);
                persistentObject.commit();
            }
            int i=0;
            while(eMsgs.hasMoreElements()){
                hashtable=(Hashtable)eMsgs.nextElement();
                String encryptedMessage=(String)hashtable.get("MessageToSend");
                if(!encryptedMessage.equals("")){
                    //check internet connection
                    String C0NNECTION_EXTENSION = checkInternetConnection();
                    if(C0NNECTION_EXTENSION==null)
                    {
                        Dialog.alert("Check internet connection and try again");
                        return;
                    }
                    else
                    {
                        MyScreen.PostMsgToServer(encryptedMessage);
                        hashtable.remove(encryptedMessage);
                    }
                }
                i++;
            }
    } 
```

这只是我遇到的教程/示例的尝试。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:03:31.347

您显示的保存方法实际上并未将哈希表放入`PersistentObject`. 尝试这样的事情：

```
public static void saveMessage(String msg){
    Hashtable hashtable = new Hashtable();
    persistentObject = PersistentStore.getPersistentObject(KEY);
    hashtable.put("MessageToSend", msg);
    persistentObject.setContents(hashtable);   // <- you were missing this
    persistentObject.commit();
} 
```

这可能仍然不是一个*很好的*实现，因为我假设您可能想要`saveMessage()`多次调用，并向持久存储添加多个消息（？）。是这样吗，还是您只能保存一条消息？（如果这是真的，你可以忽略下一个建议`saveMessage()`）

```
public static void saveMessage(String msg){
    persistentObject = PersistentStore.getPersistentObject(KEY);
    Hashtable hashtable = (Hashtable) persistentObject.getContents();
    if (hashtable == null) {
        // lazily initialize the store contents
        hashtable = new Hashtable();
        hashtable.put("MessagesToSend", new Vector());
    }
    Vector queuedMessages = (Vector) hashtable.get("MessagesToSend");
    queuedMessages.addElement(msg);
    // write the store contents to device storage
    persistentObject.setContents(hashtable);
    persistentObject.commit();
}

/** 
 * @param msg TODO: I'm not sure why msg needs to be passed, if 
 *                  saveMessage(msg) was called first? 
 */
public static void sendMessage(String msg){
    // TODO: you could choose to save the message here, so that the caller
    //   need not remember to call both sendMessage() and saveMessage()
    // saveMessage(msg);
    persistentObject = PersistentStore.getPersistentObject(KEY);
    Hashtable hashtable = (Hashtable) persistentObject.getContents();
    if (hashtable != null) {
         // check for saved messages first, and send them
         Vector msgVector = (Vector) hashtable.get("MessagesToSend");
         Enumeration eMsgs = msgVector.elements();
         Vector toDelete = new Vector();
         while (eMsgs.hasMoreElements()) {
              String encryptedMessage = (String)eMsgs.nextElement();

              // if the send was successful, you should delete message from the store
              toDelete.addElement(encryptedMessage);
         }

         eMsgs = toDelete.elements();
         while (eMsgs.hasMoreElements()) {
              // we can delete this sent message now
              msgVector.removeElement((String)eMsgs.nextElement());
         }
         // re-write the persistent store to the device
         persistentObject.setContents(hashtable);
         persistentObject.commit();
    }
} 
```

我通常还希望引导您远离一切`static`……也就是说，这确实是一个更大的、不相关的问题，而且您的持久存储对象很可能是您应用程序中的一个独特的*全局*对象（然而，更好的实现可能会避免所有这些`static`声明）。

**更新：**我有点不清楚您希望如何调用这两种方法。根据您的描述，您似乎同时调用*了两者* `saveMessage(msg)`，然后`sendMessage(msg)`在用户单击**发送**时调用。如果您首先使用我的实现保存消息，则无需传入`msg`to `sendMessage()`，因为`sendMessage()`将发送队列（向量）中**所有已保存的、未发送的消息。**因此，API for`sendMessage()`有一个不必要的参数。或者，我想你可以`sendMessage(String)`作为唯一的公共方法离开，并`sendMessage(String)`首先调用`saveMessage(String)`.

无论如何，这取决于您，以及您希望方法调用语义如何工作。存储和检索持久对象的基本问题应该由上面的代码解决。

# opengl-es - 试图理解 Open GL

> ID：14851007
> 
> 赞同：1
> 
> 时间：2013-02-13T10:09:08.630
> 
> 标签：opengl-es

我正在阅读 Apple 提供的 Open GL ES 指南，但我不完全了解它并且有一个问题。如果您能帮助我理解，我将不胜感激。在第 28 页，关于绘图的章节中，它说：

> 要正确创建帧缓冲区：
> 
> 1.  创建一个帧缓冲对象。
> 2.  创建一个或多个目标（渲染缓冲区或纹理），为它们分配存储空间，并将每个目标附加到帧缓冲区对象上的连接点。
> 3.  测试帧缓冲区的完整性。

我的问题是：在第 2 点中，它不应该说“创建一个或多个*来源*......”吗？据我目前的理解，帧缓冲区是在我的绘制方法中渲染到屏幕的内容。因此，如果我们通过将它们附加到帧缓冲区来指定我们想要渲染的图像，这对我来说是有意义的。显然，我误解了一些基本的东西，因为在我描述的内容中，目标是屏幕，其他一切都是源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:58:39.447

> 显然，我误解了一些基本的东西，因为在我描述的内容中，目标是屏幕，其他一切都是源。

是的，你从根本上误解了一些东西。当您不想将事物渲染到屏幕上而是渲染到某些屏幕外图像时，将使用 Framebuffer*对象*。例如纹理，或稍后被后处理的某些图像。如果您只想渲染到屏幕上，则不需要 FBO。

> 因此，如果我们通过将它们附加到帧缓冲区来指定我们想要渲染的图像，这对我来说是有意义的。

不*。帧缓冲对象**不是**图像内容*的来源，而是“画布”，一个接收器，你可以在上面画画。或者更准确地说是实际画布的“框架”，其中*目标*是要绘制的画布。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T10:15:08.687

您的程序通过执行导致 OpenGL 将片段光栅化到帧缓冲区中的操作来渲染到帧缓冲区中。

但是，帧缓冲区不会*显示*在任何地方，除非您按照文档中的说明进行操作并将其发送到目标。

有点像这样（非常非常粗糙，而且我无法想象）：

```
+----------+   +--------+   +---------------------+   +----------------------+
|draw calls|---|pipeline|---|pixels in framebuffer|---|pixels in renderbuffer|
+----------+   +--------+   +---------------------+   +----------------------+ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T10:17:30.243

目标正确。帧缓冲区渲染到内存区域，稍后将用于合成到屏幕（渲染缓冲区）或用作辅助渲染通道中的纹理。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-13T10:20:45.013

帧缓冲区附件首先是写入的*目标*，然后是读取的*源*。请注意，当规范说“目标”时，通常是正在处理或更改的活动对象，而不管实际操作如何。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-13T10:15:03.167

帧缓冲区源与您渲染的内容无关。您可以将多个渲染目标附加到每个帧缓冲区并在它们之间切换。但是，这实际上是您不需要的，它与渲染步骤本身无关，直到您使用多个通道或需要其他一些渲染纹理的东西。

我会跳过这部分 OpenGL 学习并直接从 VBO 和着色器开始，此时只需为帧缓冲区使用一些模板。稍后您可能需要它们，但现在不需要。

# jquery - Jscrollpane mousedrag 在歌剧 12.12 的弹出窗口中不起作用

> ID：14851009
> 
> 赞同：1
> 
> 时间：2013-02-13T10:09:09.827
> 
> 标签：jquery, jquery-plugins

这是我的代码片段。此代码在每个浏览器中都能正常工作，即使在 IE 中，除了 Opera 12.12 及更高版本之外的所有版本

$(function() { jQuery(".footer_right li a").click(function(event){ var pop=jQuery(this).attr('href'); pop=pop.substr(pop.lastIndexOf('# '),pop.length); $('.popup').hide(); jQuery(pop+',.popup_section').fadeIn('slow',function() { scrollpane = $(pop).jScrollPane({ showArrows: true, scrollbarWidth : '20'}).data().jsp; }); if(event.preventDefault()) event.preventDefault(); else event.returnValue = false; return false; }); }) ;

请使用以下 URL 进行实时示例： [http ://wordpress.markupbox.com/vidit_new1/](http://wordpress.markupbox.com/vidit_new1/)

您需要向下滚动到页面底部并单击隐私以打开弹出窗口

请帮忙。提前致谢

# linux-kernel - Linux 内核中的 SDIO MODE 控制寄存器功能

> ID：14851010
> 
> 赞同：0
> 
> 时间：2013-02-13T10:09:10.623
> 
> 标签：linux-kernel, linux-device-driver, sd-card

我想知道 Linux 内核中哪个函数/文件实现了 SDIO 模式控制功能（RWREQ、IOMOD、C52PUB、IOABT）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T07:03:33.697

在位置的 linux 源代码中：

> LinuxKernelSrcCode/drivers/mmc/core/

包含所有与 sdio 功能相关的文件，如 io、ioreq、ops...

例如：

> mmc_io_rw_direct()

被定义为函数在：linux/drivers/mmc/core/sdio_ops.c，第70行

您在寻找特定的东西吗？？？

# sql - Grails 事务（不是基于 GORM，而是使用 Groovy Sql）

> ID：14851017
> 
> 赞同：4
> 
> 时间：2013-02-13T10:09:25.977
> 
> 标签：sql, grails, groovy, transactions

我的 Grails 应用程序没有使用 GORM，而是使用我自己的 SQL 和 DML 代码来读取和写入数据库（数据库是一个巨大的标准化遗留数据库，这是唯一可行的选择）。

所以，我使用[Groovy Sql 类](http://docs.groovy-lang.org/latest/html/api/groovy/sql/Sql.html)来完成这项工作。数据库调用在我的控制器中调用的服务中完成。

此外，我的数据源是通过 Tomcat 中的 DBCP 声明的 - 所以它没有在 Datasource.groovy 中声明。

我的问题是我需要编写一些事务代码，这意味着在一系列成功的 DML 调用之后打开事务并提交，或者在发生错误时回滚整个事情。

我认为分别使用[groovy.sql.Sql#commit()](http://docs.groovy-lang.org/latest/html/api/groovy/sql/Sql.html#commit())和[groovy.sql.Sql#rollback()](http://docs.groovy-lang.org/latest/html/api/groovy/sql/Sql.html#rollback())就足够了。

但是在这些方法 Javadocs 中，Groovy Sql 文档清楚地说明了

> 如果此 SQL 对象是从 DataSource 创建的，则此方法不执行任何操作。

所以，我想知道：在我的上下文中执行事务的建议方法是什么？即使在数据源声明中禁用自动提交似乎也无关紧要，因为这两种方法“......什么都不做”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:48:04.277

Groovy Sql 类有`withTransaction`

[http://docs.groovy-lang.org/latest/html/api/groovy/sql/Sql.html#withTransaction(groovy.lang.Closure)](http://docs.groovy-lang.org/latest/html/api/groovy/sql/Sql.html#withTransaction(groovy.lang.Closure))

```
public void withTransaction(Closure closure)
                     throws java.sql.SQLException 
```

使用缓存连接在事务中执行关闭。如果闭包接受单个参数，它将与连接一起调用，否则将不带参数调用。

试试看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:46:04.483

谢谢詹姆斯。我还找到了以下解决方案，阅读[http://grails.org/doc/latest/guide/services.html](http://grails.org/doc/latest/guide/services.html)：

*   我宣布我的服务是事务性的

    > 静态事务 = true

这样，如果发生错误，之前执行的 DML 将被回滚。

*   对于每个 DML 语句，我都会抛出一个描述消息的错误。例如：

    ```
    try{
        sql.executeInsert("""
           insert into mytable1 (col1, col2) values (${val1}, ${val2})
        """)
    catch(e){
        throw new Error("you cant enter empty val1 or val2")
    }

    try{
        sql.executeInsert("""
           insert into mytable2 (col1, col2) values (${val1}, ${val2})
        """)
    catch(e){
        throw new Error("you cant enter empty val1 or val2\. The previous insert is rolledback!")
    } 
    ```

最后的问题！从控制器调用服务时，必须在 try catch 中，如下所示：

```
try{
    myService.myMethod(params)
}catch(e){
    //http://jts-blog.com/?p=9491
    Throwable t = e instanceof UndeclaredThrowableException ? e.undeclaredThrowable : e
    // use t.toString() to send info to user (use in view)
    // redirect / forward / render etc
} 
```

# magento - 错误：“有一个 p‌r‌o‌b‌l‌e‌m 保存包数据” - Magento

> ID：14851022
> 
> 赞同：2
> 
> 时间：2013-02-13T10:09:35.823
> 
> 标签：magento, installation, magento-1.7, magento-1.6

我按照本[教程](http://www.magentocommerce.com/wiki/7_-_magento_connect/packaging_a_magento_extension)打包了我开发的模块。模块工作正常。当我尝试保存时，我也收到此错误`"There was a problem saving package data"`，如屏幕截图所示。

![在此处输入图像描述](../Images/7f46dfad5380b6f167df201d3b091dec.png)

文档说*如果模块名称中有空格，则在保存扩展时会出现“保存包数据时出现问题”。*但是正如您所看到的，模块名称中没有空格。

可能是什么问题？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-07T13:12:01.707

在linux中将连接文件夹权限更改为

**chmod -R 777 /var/www/magento/var/connect/**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T10:30:01.727

注意：扩展名区分大小写。确保包名称在所有文件夹和 xml 文件中得到相应反映。例如，MyExtension 与 Myextension 不同。

注意：包名里面不能有空格。例如，使用 Foo_Bar，不要使用“Foo Bar”。如果模块名称中有空格，则在保存扩展时会出现“保存包数据时出现问题”。

*大写字母和空格很重要。*

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-10-23T15:03:38.250

这是添加组，然后删除组的另一个示例。

```
// Adding attribute options 
$setup = new Mage_Eav_Model_Entity_Setup('core_setup');
$attribute  = Mage::getSingleton("eav/config")->getAttribute("customer", "position");

$aClasses = array('Administrator','Dean','Counselor');

$updates = array();
$updates['attribute_id'] = $attribute->getId();

for($cnt = 0; $cnt < sizeof($aClasses); $cnt++) {
        $updates['values'][] = $aClasses[$cnt];
}
$setup->addAttributeOption($updates);

die();

// Deleting attribute options

$setup = new Mage_Eav_Model_Entity_Setup('core_setup');
$attribute  = Mage::getSingleton("eav/config")->getAttribute("customer", "position");

//Values have to be deleted one at a time
// Eav Setup.php
$updates = array();
foreach ($attribute->getSource()->getAllOptions() as $option) {
        $update['value'] = array();
        $update['delete'][$option['value']] = true;
        $update['attribute_id'] = $attribute->getId();
        $update['value'][$option['value']] = true;
        $updates[] = $update;
}

$setup->addAttributeOption($updates);
die(); 
```

# sql - 如何在 SQL 中的单行内连接多行？

> ID：14851025
> 
> 赞同：6
> 
> 时间：2013-02-13T10:09:39.637
> 
> 标签：sql, db2

如何使用 SQL 将多行连接成单行？我的数据库是 DB2

```
TableFoo
 -------
 Id      Name
 1       Apples
 1       Tomatoes
 1       Potatoes
 2       Banana
 2       Peach 
```

我想要类似的东西

```
ID       FruitsAvailable
-------------------------
 1       Apples, Tomatoes, Potatoes 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T10:12:46.750

试试这个

```
 SELECT id ,FruitsAvailable 
  FROM
      (SELECT id , group_concat(Name) as FruitsAvailable 
       FROM  TableFoo
       WHERE id = 1) t 
```

[**这里演示 SQLFIDDLE**](http://sqlfiddle.com/#!2/8b104/3)

编辑：在 db2 中你需要创建函数然后调用它

```
 CREATE FUNCTION MySchema/MyUDF (
PARCol2 CHAR(5) )
RETURNS VARCHAR(1024)   
LANGUAGE SQL 
NOT DETERMINISTIC 
READS SQL DATA 
CALLED ON NULL INPUT 
DISALLOW PARALLEL 

 BEGIN 
  DECLARE ReturnVal VARCHAR(1024) NOT NULL DEFAULT '';

  FOR CsrC1 AS C1 CURSOR 
      FOR SELECT MyCol1 
             FROM MyTable 
             WHERE MyCol2 = ParCol2 
      DO SET ReturnVal = ReturnVal Concat CsrC1.MyCol1; 
  END FOR; 

  RETURN LTRIM(ReturnVal); 
 END  ; 
```

然后在这里调用

```
 Select  id, MyUDF(Name) as FruitsAvailable
     From TableFoo 
     where id = 1 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-13T10:17:45.133

使用此查询：

```
SELECT Id, GROUP_CONCAT(Name SEPARATOR ', ') FROM TableFoo GROUP BY Id; 
```

# hibernate - 休眠多对一标签属性“插入/更新”

> ID：14851027
> 
> 赞同：1
> 
> 时间：2013-02-13T10:09:49.250
> 
> 标签：hibernate

我正在使用休眠 3.0 和 spring 3.x。
在配置两个表之间的关系时，我遇到了两个属性。
“插入/更新”多对一标签的属性。
谁能解释一下这些标签的含义。
除此之外，如果还可以提供一个小例子，我将不胜感激。

问候，
加内什。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T10:19:04.420

[文档](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html_single/#d0e7761)说：

> update, insert（可选 - 默认为 true）：指定映射列应包含在 SQL UPDATE 和/或 INSERT 语句中。将两者都设置为 false 允许纯“派生”关联，其值从映射到相同列的另一个属性初始化，或者由触发器或其他应用程序初始化。

# android - 从 BaseAdapter 更新活动中的 textView

> ID：14851028
> 
> 赞同：0
> 
> 时间：2013-02-13T10:09:54.603
> 
> 标签：android

我有一个适配器可以在扩展 BaseAdapter 的 ListView 中呈现值。这个适配器在一个活动中被调用。Activity 有一个 TextView，当在 Adapter 中调用 onClickListener 时需要更新它。如果在适配器中单击按钮，有人可以让我知道如何更新 TextView。任何例子都会有所帮助。谢谢。

代码

```
private class ViewItem extends Activity{
ImageButton addToCart;
ViewItem(View convertView,final int position)
    {
addToCart.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
itemPosition=Integer.parseInt(positionView.getText().toString());
                    int qty = Integer.parseInt(quantity.getText().toString());
                    ShoppingCartHelper.setQuantity(itemPosition, qty);
                    ShoppingCartHelper.itemsInTheCart = ShoppingCartHelper.cartMap.size();
                    Toast.makeText(v.getContext(), "Successfully, Item added to the Cart...", Toast.LENGTH_SHORT).show();
//I need to update a TextView here                      

                    // Close the activity
                    finish();
                }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:20:51.327

尝试这个，

```
 public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub

        EvenViewHolder holdereven;
        if (convertView == null) {
            convertView = mInfaltor.inflate(R.layout.schedule_adapter_view,
                    null);
            holdereven = new EvenViewHolder();
            holdereven.time = (TextView) convertView
                    .findViewById(R.id.time);
            holdereven.title = (TextView) convertView
                    .findViewById(R.id.title);
            holdereven.des = (TextView) convertView.findViewById(R.id.des);
 holdereven.time.setOnClickListener(new View.OnClickListener(
                    ) {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    //Do your stuff
                }
            });
            convertView.setTag(holdereven);

        } else {
            holdereven = (EvenViewHolder) convertView.getTag();
        }
  static class EvenViewHolder {
    TextView time, title, des;

  }
  } 
```

# c# - 等号是否传递引用或对象副本？

> ID：14851031
> 
> 赞同：2
> 
> 时间：2013-02-13T10:10:04.210
> 
> 标签：c#, string, object, reference

当我有这个代码时：

```
class A 
{
    public int X = 0;
 ...
}

public void Function()
{
    // here I create a new instance of class
    A a = new A();
    a.X = 10;
    // here I create a pointer to null
    A b = null;
    // here I assign a to b
    b = a;
    b.X = 20;
} 
```

我现在是否传递了对 A 类实例的引用？或者我将 A 的实例克隆到新实例并在 b 中创建了对它的引用？

改变 b 中的 X 是否也改变 a 中的 X？为什么？如果不是，那么创建 a 的副本并将其插入 b 的正确方法是什么？

为什么相同的字符串总是会创建一个副本？字符串中的相等运算符是否被覆盖？

```
string a = "hello";
string b = a;
b = "world";
// "hello world"
Console.WriteLine( a + " " + b ); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T10:16:17.407

C# 使用引用而不是指针。类是[*`reference types`*](http://msdn.microsoft.com/en-us/library/490f96s2.aspx).

在您的示例中， `b`与 具有相同的引用`a`。它们引用内存中的相同位置。

> 改变 b 中的 X 也改变 a 中的 X？为什么？

是的，因为它们引用相同的对象并且更改一个引用会影响另一个引用。

```
string a = "hello";
string b = a;
b = "world";
// "hello world"
Console.WriteLine( a + " " + b ); 
```

字符串也是*引用类型*。但他们也是[`immutable type`](http://en.wikipedia.org/wiki/Immutable_object)。这意味着您无法更改它们。即使你认为你改变了它们，你实际上也创建了新的字符串对象。

1.  您创建一个对象的行包含`"hello"`一个名为`a`.
2.  行创建一个新的引用，称为`b`引用同一个对象。( `"hello"`)
3.  线你分配你的`b`参考新对象称为`"world"`. 您的 b 引用`"hello"`不再引用对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T10:11:12.837

> 我现在是否将指针传递给 A 类的实例？或者我将A的实例克隆到新实例并在b中创建了一个指向它的指针？

**`b`持有与 相同的引用`a`**，它们都指向相同的位置。

> 改变 b 中的 X 也改变 a 中的 X？为什么？

因为它们都指向同一个引用。

> 创建a的副本并将其插入b的正确方法是什么？

实现[IClonable 接口](http://msdn.microsoft.com/en-us/library/system.icloneable.aspx)

> 支持克隆，它创建一个与现有实例具有相同值的类的新实例

**编辑**

由于您使用字符串编辑了问题，虽然字符串是引用类型，但它们也是[**不可变**](http://en.wikipedia.org/wiki/Immutable_object)的

[字符串（C# 参考）](http://msdn.microsoft.com/en-us/library/vstudio/362314fe.aspx)

> 字符串是不可变的——字符串对象的内容在创建对象后不能更改，尽管语法使它看起来好像您可以这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T10:47:49.373

分配时，您传递分配的表达式的返回值的副本。

*   对于**值类型**，这是您在使用它们时通常会看到的值（如整数的数值）。
*   对于**引用类型**，实际值类似于指向被引用对象的地址（但*实际上*是实现细节）。因此，即使您传递了该地址的副本，该副本也指向同一个对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T10:13:15.177

对象 b 指向对象 a，您必须进行深度克隆才能使用`IClonable` 接口进行复制。

# html - 如何使用html修复dojo中选择框的宽度

> ID：14851032
> 
> 赞同：0
> 
> 时间：2013-02-13T10:10:04.663
> 
> 标签：html, dojo

嗨我有一个选择框，我保留了一些宽度，选择框的选项来自一个休息服务，它有一个名称列表，现在问题是，取决于名称的宽度，选择框宽度正在改变，这是我不想要的。我想保持选择框宽度不变，如果列表名称超过选择框的宽度，则列表已中断，有人可以帮我解决这个问题吗？

```
<select class="myClass" data-dojo-type="dijit.form.Select"
data-dojo-attach-point="dapContentId"
data-dojo-props="id:'dapContentId',name:'dapContentId'">
</select>
.myClass   {
  overflow : scroll;
  width:200px !important;
  border: 1px solid #ccc;
  background-color: black;
  white-space: no-wrap !important;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:43:52.803

[正如这里](https://stackoverflow.com/a/10190419/285288)已经回答的那样，您可以为此使用 CSS：

```
.tundra .dijitSelect .dijitButtonText {
    text-align: left;
}

.tundra .dijitSelectLabel {
    width: 120px;
    overflow: hidden;
} 
```

# css - 移动浏览器上的 CSS 固定位置

> ID：14851036
> 
> 赞同：2
> 
> 时间：2013-02-13T10:10:17.940
> 
> 标签：css, browser, mobile-safari

我不确定我能清楚地解释问题是什么，所以请理解。

我有这个 HTML 代码：

```
<div id="container">
    <div id="navbar">
        ...
    </div>
    <div id="content">
        ...
    </div>
</div> 
```

这是CSS代码：

```
#container {
    display: block;
    width: 640px;
    height: 480px;
}
#navbar {
    display: block;
    position: fixed;
    width: 640px;
    height: 70px;
}
#content {
    display: block;
    marign: 70px 0 0 0;
    width: 640px;
    height: 410px;
    overflow-y: auto;
} 
```

它在桌面和任何基于 Android 的浏览器上运行良好，但在 iPhone 的 Safari 中......当我放大此页面时，内容运行良好，但固定元素保持在相对于屏幕的位置上。其他所有元素都运行良好。

问题是什么？我不知道...

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-13T10:54:57.093

试试这个代码[http://jsfiddle.net/nandhakumarsri9/bkwLG/](http://jsfiddle.net/nandhakumarsri9/bkwLG/)

```
#container {
    display: block;
    width: 640px;
    height: 480px;
    border: 1px solid #000;
    box-sizing: border-box;
    position: relative;
}
#navbar {
    display: block;
    position: absolute;
    width: 640px;
    height: 70px;
    border: 1px solid #F00;
    box-sizing: border-box;
}
#content {
    display: block;
    width: 640px;
    height: 410px;
    overflow-y: auto;
    border: 1px solid #00F;
    box-sizing: border-box;
    position: absolute;
    top: 70px;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-25T10:35:37.843

大多数移动浏览器都存在固定定位问题。尝试使用带有 data-position="fixed" 属性的 jQuery 移动框架。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-13T10:14:30.287

[具有固定位置的元素相对于浏览器窗口定位。](http://www.w3schools.com/css/css_positioning.asp)

你应该给`top: 0;`和/或`left:0`等

# android - 滚动到结束时如何去除白色模糊边缘？

> ID：14851038
> 
> 赞同：1
> 
> 时间：2013-02-13T10:10:24.840
> 
> 标签：android, android-view

我会尽力解释这一点。在 Android 中，当您将某些内容滚动到末尾时，它会显示如下所示的白色模糊内容，表示无法再进行滚动。这种行为可以在 ListViews、ScrollViews 等中看到。

![http://i.stack.imgur.com/eFusM.png](../Images/03e591a1a06c5fe44663049fd2039123.png)

如何禁用它？它看起来很丑。随意编辑这个问题，我真的找不到合适的词来形容这件事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T10:16:16.533

`android:fadingEdge="none"`在您的 xml 文件中使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:52:35.277

您可以使用

```
<ScrollView
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:overScrollMode="never"> 
```

# python - 有没有更优雅的pythonic方式来表达以下条件表达式？

> ID：14851041
> 
> 赞同：6
> 
> 时间：2013-02-13T10:10:35.727
> 
> 标签：python

如果有的话，我想要一个更 Pythonic 的方式用于以下分支：

```
if a<b:
   a.append('value')
elif a==b:
   b.append('value')
else:
   do nothing 
```

有没有三元运算符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T10:24:45.767

显然你可以不考虑 else 情况

```
if a<b:
   a.append('value')
elif a==b:
   b.append('value') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T10:11:52.153

使用嵌套的三元运算符。

```
func1() if a<b else func2() if a==b else func3() 
```

对于您的具体示例：

```
a.append('value') if a<b else b.append('value') if a==b else None 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T10:13:35.350

你可以这样做：

```
result = a<b and first_action or a==b and second_action or third_action 
```

*_action 适合您问题中的“做某事”代码

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T10:17:48.103

您的

```
if a<b:
   a.append('value')
elif a==b:
   b.append('value')
else:
   do nothing 
```

不能重写太多，就这样就可以了。也许只是删除最后两行（否则/什么都不做）。

我在这里看到的唯一参数化是：

```
if a <= b:
    (a,b)[a==b].append('value') 
```

但这很丑陋。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T10:20:17.480

对于您的*确切*情况，其中之一将起作用：

```
[b, a, []][cmp(x, y)].append('value')
[b, a, []][cmp(x, y)] += ['value'] 
```

请不要这样做。您当前的代码很容易阅读。

# salesforce - 获取 Salesforce 中的开放事件列表

> ID：14851048
> 
> 赞同：0
> 
> 时间：2013-02-13T10:11:05.630
> 
> 标签：salesforce, apex-code, visualforce, soql

我必须在 Salesforce 中检索开放事件列表我使用以下方法获取开放事件列表

```
public List<OpenActivity> getActivity1(){

Meeting_Master__c mmm= [SELECT (SELECT Subject,Location__c,EndDateTime,StartDateTime
                           FROM OpenActivities Where IsTask = false )
                   FROM Meeting_Master__c where Id =:ApexPages.currentPage().getParameters().get('id')];
return mmm.openActivities;
} 
```

好的，我得到了列表，但我需要事件的 StartDateTime 字段，但它是 OpenActivity 的无效字段，请指定如何获取还包含 StartDateTime 的 OpenEvents 列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:51:03.893

在这种情况下，您应该使用对事件对象的查询

```
 [SELECT Subject, 
         Location__c,
         EndDateTime,
         StartDateTime
 FROM Event 
 WHERE  WhatId =:ApexPages.currentPage().getParameters().get('id')]; 
```

希望这可以帮助你

# java - 如何将彩色图像转换为纯黑白图像（0-255格式）

> ID：14851049
> 
> 赞同：8
> 
> 时间：2013-02-13T10:11:10.733
> 
> 标签：java, image, swing, image-processing, bufferedimage

```
public class BlackWhite {

    public static void main(String[] args) 
    {
        try 
        {
         BufferedImage original = ImageIO.read(new File("colorimage"));
         BufferedImage binarized = new BufferedImage(original.getWidth(), original.getHeight(),BufferedImage.TYPE_BYTE_BINARY);

         int red;
         int newPixel;
         int threshold =230;

            for(int i=0; i<original.getWidth(); i++) 
            {
                for(int j=0; j<original.getHeight(); j++)
                {

                    // Get pixels
                  red = new Color(original.getRGB(i, j)).getRed();

                  int alpha = new Color(original.getRGB(i, j)).getAlpha();

                  if(red > threshold)
                    {
                        newPixel = 0;
                    }
                    else
                    {
                        newPixel = 255;
                    }
                    newPixel = colorToRGB(alpha, newPixel, newPixel, newPixel);
                    binarized.setRGB(i, j, newPixel);

                }
            } 
            ImageIO.write(binarized, "jpg",new File("blackwhiteimage") );
         }
        catch (IOException e) 
        {
                e.printStackTrace();
        }    
    }

     private static int colorToRGB(int alpha, int red, int green, int blue) {
            int newPixel = 0;
            newPixel += alpha;
            newPixel = newPixel << 8;
            newPixel += red; newPixel = newPixel << 8;
            newPixel += green; newPixel = newPixel << 8;
            newPixel += blue;

            return newPixel;
        }
} 
```

我得到了一张黑白输出图像，但是当我放大图像时，我发现了一些灰色区域。我希望输出图像只包含黑色或白色。

请让我知道我目前的方法是正确还是不正确？如果我是，请建议另一种方式。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-13T10:12:55.490

您正在正确地将图像从彩色转换为黑白；但是，当您保存输出时，由于[*有损*](http://en.wikipedia.org/wiki/Lossy_compression)[压缩](http://en.wikipedia.org/wiki/Lossy_compression)`JPEG`会创建一些颜色。[](http://en.wikipedia.org/wiki/Lossy_compression)

 *只需将输出保存到`PNG`（或除 之外的任何内容`JPEG`），输出将只有黑白，如您所料。

```
ImageIO.write(binarized, "png",new File("blackwhiteimage") ); 
```

例如，如果您有一个保存为`PNG`直方图的二进制图像，则可能类似于（仅限于黑白像素）：

![PNG直方图](../Images/1a3d34913d29bc260cd240df323f8685.png)

对于相同的图像，如果您另存为`JPEG`，您可以看到在直方图中，白色和黑色附近的一些像素开始出现

![JPEG直方图](../Images/1cae2c7ce71979d4838376b5aac2b3b8.png)*

# excel - 当值也出现在其他列中时为单元格着色

> ID：14851058
> 
> 赞同：0
> 
> 时间：2013-02-13T10:11:23.520
> 
> 标签：excel

我有两列：

```
C1   C2
1   2
2   5
3   6
4   8
5   10
6   15 
```

我希望 C1 中具有也出现在 C2 中的值的所有单元格都被突出显示。相反，我还希望 C2 中具有也出现在 C1 中的值的单元格突出显示。

我尝试使用带有 VLOOKUP 公式的条件格式，但可能我做错了什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T10:28:15.940

您需要应用以下公式作为条件格式规则：

1.  A 列：选择整列并应用以下条件：`=ISERROR(MATCH(A1,B:B,0))`
2.  B列：选择整列并应用以下条件：`=ISERROR(MATCH(B1,A:A,0))`

选择所需的亮点，你就完成了。

包含您的数据的示例文件：[https ://www.dropbox.com/s/z8yod11xd4qyr0i/Highlight2Columns.xlsx](https://www.dropbox.com/s/z8yod11xd4qyr0i/Highlight2Columns.xlsx)

# php - SOAP 和 XML 编码

> ID：14851063
> 
> 赞同：0
> 
> 时间：2013-02-13T10:11:37.190
> 
> 标签：php, xml, soap, nusoap

我想知道是否有人以前遇到过这种问题。

我们最近安装了本地 PHP SOAP 扩展来替换 nuSOAP。我们现在遇到一个问题，即某些 XML 似乎包含无效字符，这是编码不佳的症状。

这可能完全是巧合，并且生成此 XML 的供应商系统存在独立故障，这只是一个巧合！

他们可能有关系吗？XML设置会发生全局变化吗？！

非常感谢提前丰富

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:23:27.123

检查你的 php 版本。也许 NuSOAP 中使用的某些函数已被弃用。

# php - 为什么 Magento 在保存类别后只保留类别中的前 1000 个产品？

> ID：14851064
> 
> 赞同：18
> 
> 时间：2013-02-13T10:11:41.340
> 
> 标签：php, magento, magento-1.7

使用 Magento 的后台，在保存链接到许多产品的类别后，仅保留前 1000 个产品（或 2000 个或 x000，取决于主机配置）。

`catalog_category_product`从数据库中的表中删除所有其他类别/产品链接。
即使在产品网格（类别产品选项卡）中没有取消选中任何复选框，也会发生这种情况。

不显示或记录错误消息。
跟踪从浏览器发布到服务器的数据不会显示任何丢失的产品 ID，但即使您在后台网格上检查更多产品，当最终保存类别时，服务器只保留第一个 x000 并删除其他 ID。 ..

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-13T10:11:41.340

虽然可以在其他网站上找到一些答案，但我认为值得在 StackOverflow 上分享这个......

问题的根源可以在 中找到`Mage_Adminhtml_Catalog_CategoryController`，该`saveAction()`方法检索一个大的 POST 字符串（`category_products`编码为查询字符串），该字符串由 PHP 函数处理`parse_str()`：

```
if (isset($data['category_products']) && !$category->getProductsReadonly()) {
    $products = array();
    parse_str($data['category_products'], $products);
    $category->setPostedProducts($products);
} 
```

唉! 从 PHP 5.3.9 版本开始，有一个名为 的新配置设置`max_input_vars`，它限制了可以接受的输入变量的数量。
这个限制主要应用于`$_GET`,`$_POST`和`$_COOKIE`超全局变量，但也被`parse_str()`函数内部使用！
（见[PHP 手册](http://www.php.net/manual/en/info.configuration.php#ini.max-input-var)）

根据`php.ini`您主机的配置，链接到一个类别的产品数量因此受到此设置的限制...

**一种解决方案**是增加`max_input_vars`、 in`php.ini`或 in的值`.htaccess`：

```
<IfModule mod_php5.c>
    php_value max_input_vars 10000
</IfModule> 
```

这甚至可以通过仅为管理页面更改此设置来更安全地完成（使 LocationMatch 模式适应您自己的后台 URL 样式）：

```
<LocationMatch "mymagentostore/(index\.php/)?admin/">
    <IfModule mod_php5.c>
        php_value max_input_vars 10000
    </IfModule>
</LocationMatch> 
```

（[来源](http://www.magentocommerce.com/boards/viewreply/405627/)）

这只能解决问题，直到您的一个类别达到新的最大产品数量......

**另一种解决方案**是修复 Magento 的代码，以便此时*不*使用 parse_str() 函数。
例如，在`Mage_Adminhtml_Catalog_CategoryController`,`saveAction()`方法中，替换：

```
parse_str($data['category_products'], $products); 
```

和：

```
$cat_products_split = explode('&', $data['category_products']);
foreach($cat_products_split as $row) {
    $arr = array();
    parse_str($row, $arr); //This will always work
    list($k, $v) = each($arr);
    if (!empty($k) && !empty($v)) {
        $products[$k] = $v;
    }
} 
```

（[来源](https://gist.github.com/mshmsh5000/3440260)）

很难确定哪种解决方案是最好的，因为第一个解决方案使您的服务器更容易受到攻击（因为`max_input_vars`它旨在减轻使用哈希冲突的拒绝服务攻击的可能性），而第二个解决方案使您修改 Magento核心类，这可能会在未来的 Magento 升级中导致进一步的问题......

无论如何，希望这很有用，我挣扎了一段时间才找出为什么某些类别不断失去一些产品！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-26T11:39:33.233

最好的解决方案是使用观察者事件“catalog_category_prepare_save”。因此，您需要更改模块的 config.xml：

```
<config>
    <global>
        <events>
            ...
            <catalog_category_prepare_save>
                <observers>
                    <your_module>
                         <class>your_module/observer</class>
                         <method>onCatalogCategoryPrepareSave</method>
                    </your_module>
                </observers>
            </catalog_category_prepare_save> 
```

然后将函数添加到 app/code/local/Your/Module/Model/Observer.php

```
<?php
class Your_Module_Model_Observer
{
    /**
     * Fix bug with saving only first 1000 products in a category
     * It's related to default php config 'max_input_vars' = 1000
     *
     * @param Varien_Event_Observer $observer
     */
     public function onCatalogCategoryPrepareSave(Varien_Event_Observer $observer)
     {
         $phpDefaultMaxInputVars = (int)ini_get('max_input_vars');
        /** @var Mage_Core_Controller_Request_Http $request */
        $request = $observer->getRequest();
        $dataProducts = $request->getPost('category_products');
        $dataProducts = preg_split('/&/', $dataProducts, -1, PREG_SPLIT_NO_EMPTY);
        /** @var Mage_Catalog_Model_Category $category */
        $category = $observer->getCategory();

        if ($dataProducts && !$category->getProductsReadonly() && count($dataProducts) > $phpDefaultMaxInputVars) {
            $products = array();
            foreach ($dataProducts as $_product) {
                $_product = trim($_product);
                if (preg_match('/([0-9]*)=([\-]?[0-9]*)/', $_product, $matches)) {
                    $products[$matches[1]] = $matches[2];
                }
            }
            $category->setPostedProducts($products);
        }
    }
} 
```

（[来源](https://gist.github.com/mshmsh5000/3440260#comment-1180382)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-26T12:54:00.807

我找到了一个可行的解决方案，所以我在这里分享它！

`php5.ini`在您的文件夹中创建一个文件名，`magento root`并在第一行中放置此代码

```
[PHP]
max_input_vars = 5000 
```

现在，如果它不起作用，您需要在 SERVER PHP,ini (/usr/local/lib/php.ini) 中添加这一行

```
max_input_vars = 5000 
```

希望它的帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-10T08:19:12.527

`<IfModule mod_php5.c> php_value max_input_vars 10000 </IfModule>`

为我做了诀窍，我遇到了与上述相同的问题，Magento 1.4.1.1 仅在类别中保存了 1001 个产品，但将上面的代码放入我的 .htaccess 后，错误就消失了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-12T22:57:13.847

**.htaccess 中不允许 LocationMatch，它只能放在 Apache httpd.conf 中**

首选方法是创建一个 Apache 包含而不是直接修改 httpd.conf，因为它会在下一次更新/重建时中断。

就我而言，我创建了一个包含文件**pre_virtualhost_global.conf**并将此代码放入其中：

```
<LocationMatch "mymagentostore/(index\.php/)?admin/">
<IfModule mod_php5.c>
    php_value max_input_vars 10000
</IfModule> 
```

之后当然需要重启apache。我使用了我的 WebHostManager，所以这是一个简单的过程。

更多信息可以在以下位置找到：

[http://docs.cpanel.net/twiki/bin/view/EasyApache3/WebHome#Custom Directives to http.conf][1]

我认为这是最优雅的解决方案，不涉及 Magento Core，适用于您服务器上的所有站点，还可以保护前端。

[1]：[https](https://web.archive.org/web/20140804033608/http://docs.cpanel.net:80/twiki/bin/view/EasyApache3/WebHome?#Custom) ://web.archive.org/web/20140804033608/http://docs.cpanel.net:80/twiki/bin/view/EasyApache3/WebHome? #Custom Directives to http.conf

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-24T20:38:43.780

在 Magento 1.8.0.0 上，programurweb 的解决方案 2 有问题！

```
if (!empty($k) && !empty($v)) {
    $products[$k] = $v;
} 
```

它应该是：

```
if (!empty($k)) {
    $products[$k] = $v;
} 
```

$v 用于“位置”，而不是复选框值 = 1（将产品关联到当前类别复选框）。

我已经对此进行了测试。我错了吗 ？

这提醒了永远不要从网络复制和粘贴代码。

PS：我现在不能评论答案。

# ios - iOS：仅将仿射变换应用于子视图

> ID：14851068
> 
> 赞同：1
> 
> 时间：2013-02-13T10:11:48.877
> 
> 标签：ios, objective-c, cgaffinetransform

我有一个带有一个背景图像的视图父级，它缩放到整个父级视图。同样在 view-parent 我需要显示一些其他视图。所以当我对图像应用旋转时：

```
[self.backgroundView setTransform:CGAffineTransformMakeRotation((CGFloat) M_PI)]; 
```

它旋转整个父视图 - 所以其他子视图也旋转了 180 度

那么，我怎样才能将旋转仅应用于背景视图而不影响其他视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:47:05.067

好吧，听起来您的 backgroundView 具有显然会与父级进行转换的子视图，这是设计使然。您需要的是使您的其他视图与您的背景视图*同级*。确保将子视图添加到 backgroundView 的超级视图而不是 backgroundView 本身。

# haskell - Ambiguous type variable when programming an AI Solver in Haskell

> ID：14851075
> 
> 赞同：3
> 
> 时间：2013-02-13T10:12:15.473
> 
> 标签：haskell, typeclass, ghci

I'm programming an AI General Problem Solver in Haskell for the AI Planning course at Coursera and ghci complains about an ambiguous type variable. Here is the Haskell code and the error I get:

```
-- Solver.hs
{-# LANGUAGE GADTs,FlexibleInstances,UndecidableInstances,ScopedTypeVariables,TypeFamilies,MultiParamTypeClasses #-}

module Solver
(Solver,State,Transition)
where

class (Show t,Eq t) => Transition t where
 transition :: State s => s -> t -> s

class (Show s,Eq s) => State s where
 getPossibleTransitions :: Transition t => s -> [t]
 isStateValid :: s -> Bool
 isGoalState :: s -> Bool

class Solver s t where
 getPossibleNextStates :: s -> [s]
 isStateVisited :: [s] -> s -> Bool
 getNextFringeStates :: [s] -> [[s]]
 --getNextGeneration :: [s] -> [s] -> [s]

flatten :: [[a]] -> [a]
flatten [] = []
flatten listOfLists = (head listOfLists) ++ (flatten (tail listOfLists))

instance (State s,Transition t) => Solver s t where

 getPossibleNextStates (state::s) =
  filter isStateValid (map transitionFunction possibleTransitions)
  where
   transitionFunction = (transition state)::(t -> s)
   possibleTransitions = (getPossibleTransitions state)::([t])

 isStateVisited visitedStates state =
  any (== state) visitedStates

 getNextFringeStates (states::[s]) =
  map (getPossibleNextStates :: (s -> [s])) (states::[s])

-- COMPILATION:
{-
Prelude> :l Solver.hs
[1 of 1] Compiling Solver           ( Solver.hs, interpreted )

Solver.hs:38:8:
    Ambiguous type variable `t0' in the constraint:
      (Transition t0) arising from a use of `getPossibleNextStates'
    Probable fix: add a type signature that fixes these type variable(s)
    In the first argument of `map', namely
      `(getPossibleNextStates :: s -> [s])'
    In the expression:
      map (getPossibleNextStates :: s -> [s]) (states :: [s])
    In an equation for `getNextFringeStates':
        getNextFringeStates (states :: [s])
          = map (getPossibleNextStates :: s -> [s]) (states :: [s])
Failed, modules loaded: none.
-} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-13T11:17:04.967

I think you have an instance of type-class-itis. That is, too many type classes that don't really accomplish anything, leading to complicated code that's hard to reason about.

A symtpom of type-class-itis that helps to diagnose it is the need to keep introducing new language features to make stuff work. If you keep going down this route, then later on you'll find yourself needing to write lots of 'dummy types' that don't actually hold any data, and exist solely so that you can make them into instances of your various typeclasses.

You can read more about type-class-itis in these blog posts by Luke Palmer and Gabriel Gonzalez (the LP one is more moderate, the GG one more... extreme)

*   [Haskell Antipattern: Existential Typeclass](http://lukepalmer.wordpress.com/2010/01/24/haskell-antipattern-existential-typeclass/)
*   [Scrap Your Type Classes](http://www.haskellforall.com/2012/05/scrap-your-type-classes.html)

A better solution is to remember that *functions are data too*. You can wrap up the functions you need into a record, and pass the record around instead. For example, in your case I'd probably structure it like this:

```
module Solver where

data State s t = State { state :: s
                       , getPossibleTransitions :: [t]
                       , isValid :: Bool
                       , isGoal :: Bool
                       , transition :: t -> State s t }

getPossibleNextStates :: State s t -> [State s t]
getPossibleNextStates s = filter isValid (map transitionFunction possibleTransitions)
    where
        transitionFunction  = transition s
        possibleTransitions = getPossibleTransitions s

isStateVisited :: Eq s => [s] -> State s t -> Bool
isStateVisited visitedStates s = any (== state s) visitedStates

getNextFringeStates :: [State s t] -> [[State s t]]
getNextFringeStates states = map getPossibleNextStates states 
```

Notice how I don't need to introduce any special language features, and the code is a lot shorter as well - 19 lines as opposed to 38 lines, even though I included all the type signatures.

Good luck!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:24:00.680

Eric Kow fixed my problem by using functional dependencies. He continues to use type-classes as I required. Here is his solution that compiles like a charm:

[http://pastebin.com/tnqW2QGn](http://pastebin.com/tnqW2QGn)

Here is our Haskell facebook group where we found the solution:

[https://www.facebook.com/groups/programming.haskell/](https://www.facebook.com/groups/programming.haskell/)

```
-- Solver.hs
{-# LANGUAGE FunctionalDependencies #-}
{-# LANGUAGE MultiParamTypeClasses  #-}
{-# LANGUAGE ScopedTypeVariables    #-}

module Solver
    (Solver,State,Transition)
  where

class (Show t,Eq t) => Transition t where
    transition :: State s => s -> t -> s

class (Show s,Eq s) => State s where
    getPossibleTransitions :: Transition t => s -> [t]
    isStateValid :: s -> Bool
    isGoalState  :: s -> Bool

class (State s, Transition t) => Solver s t | s -> t where

    getPossibleNextStates :: s -> [s]
    getPossibleNextStates state =
       filter isStateValid (map transitionFunction possibleTransitions)
      where
       transitionFunction  = transition state :: t -> s
       possibleTransitions = getPossibleTransitions state

    isStateVisited        :: [s] -> s -> Bool
    isStateVisited visitedStates state =
       any (== state) visitedStates

    getNextFringeStates :: [s] -> [[s]]
    getNextFringeStates = map getPossibleNextStates 
```

# c# - 字符串未被识别为有效的 DateTime

> ID：14851081
> 
> 赞同：1
> 
> 时间：2013-02-13T10:12:38.267
> 
> 标签：c#, asp.net

```
DateTime dtEndTime = DateTime.ParseExact(
    appToDate, 
    timeFormats, 
    null, 
    System.Globalization.DateTimeStyles.None);

appToDate = 21-02-2013 12:30 AM

string[] timeFormats = { 
    "dd-MM-yyyy H:m tt", 
    "dd-MM-yyyy H:mm tt", 
    "dd-MM-yyyy HH:m tt", 
    "dd-MM-yyyy HH:mm tt" 
}; 
```

字符串未被识别为有效的日期时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T10:15:48.707

我怀疑问题是您使用`H`组合 with `tt`。`H`并`HH`在 0-23 范围内表示一个小时，其中 12 是中午，因此是下午。

我怀疑你想要`h`and`hh`而不是`H`... 虽然你不应该需要`h`/ `H`/ `m`/的每个组合`mm`。（你*真的*希望看到“下午 1:5”吗？）我怀疑`"dd-MM-yyyy H:mm tt"`应该覆盖你。

# php - 如果满足条件，则插入时间戳

> ID：14851082
> 
> 赞同：-1
> 
> 时间：2013-02-13T10:12:39.477
> 
> 标签：php, mysql, datetime

一旦满足 if 条件，我想将日期时间戳插入变量中。但我收到以下错误：

> 注意：未定义索引：第 55 行 C:\wamp\www\business\edit_log_widget.php 中的状态

以下是php代码：

```
<?php
    include 'scripts/init.php';
    include 'html/header.php';
    $page = 'servers';

    $id =$_SESSION['logid'];
    $query = "SELECT *FROM log WHERE logid = $id";
    $query_submit = mysql_query($query) or die(mysql_error);
    $row = mysql_fetch_assoc($query_submit);
?>

<div class="article">
    <h2><span>Edit Logs</span></h2>
    <div class="clr"></div>
    <form action="" method="POST" >
    <p>
        <table border="0">
            <tr>
                <td><label for="Task Name">Task Name:*</label></td>
                <td><input type="text" name="task_name" size="45" value="<?php echo $row['task_name'] ?>"/></td>
            </tr>
            <tr>
                <td><label for="description">Problem Description:*</label></td>
                <td><textarea name="description" cols="33" rows="10" ><?php echo $row['description'] ?></textarea></td>
           </tr>
           <tr>
                <td><label for="solution">Solution Description:*</label></td>
                <td><textarea name="solution" cols="33" rows="10" ><?php echo $row['solution'] ?></textarea></td>
           </tr>
           <tr>
                <td><label for="status">Status:*</label></td>
                <td>
                    <select id="Select2" name="status">
                        <option>-Select-</option>
                        <option>Resolved</option>
                        <option>Un-resolved</option>
                        <option>In-Progress</option>
                    </select>
                </td>
           </tr>
        </table>
    </p>
    <p>
        <td><input id="Submit" type="submit" value="Submit" /></td>
        <td><input id ="Clear and Restart" type ="reset" value= "Clear and Restart" /></td>
    </p>
    <?php 
        if($_POST['status']== 'Resolved')
        {
            $today = DateTime::createFromFormat('!Y-m-d',date('Y-m-d')); // This is Line 55
        }

        if(isset($_GET['success']) && empty($_GET['sucess']))
        {
            echo 'the log has been captured';
        }
        else
        {
            if(empty($_POST) === false && empty($errors)=== true)
            {
                //Update Log details
                $update_log = array(
                                'task_name'=>$_POST['task_name'],
                                'description' => $_POST['description'],
                                'solution' =>$_POST['solution'],
                                'status'=>$_POST['status'],
                                'closed_date'=>$today,
                                'userid' =>$_SESSION['userid']);
                update_log($update_log);
                //redirect
                header('Location: edit_log_widget.php?success');
                exit();
            }
            else if(empty($errors) === false)
            {
                //output errors if the errors array is not empty
                echo output($errors);
            }
        }
    ?>
    </form>  
    <?php
        include 'html/side_menu.php';
        include 'html/footer.php';
    ?> 
```

更新：edit_log.php。

```
<?php
    include 'scripts/init.php';
    include 'html/header.php';
    $page = 'servers';

    $id = $_GET['logid'];
    $_SESSION['logid'] = $id;
    $query = "SELECT *FROM log WHERE logid = $id";
    $query_submit = mysql_query($query) or die(mysql_error);
    $row = mysql_fetch_assoc($query_submit);
?>

<div class="article">
    <h2><span>Edit Logs</span></h2>
    <div class="clr"></div>
    <form action="edit_log_widget.php" method="POST" >
    <p>
        <table border="0">
            <tr>
                <td><label for="Task Name">Task Name:*</label></td>
                <td><input type="text" name="task_name" size="45" value="<?php echo $row['task_name'] ?>"/></td>
            </tr>
            <tr>
                <td><label for="description">Problem Description:*</label></td>
                <td><textarea name="description" cols="33" rows="10" ><?php echo $row['description'] ?></textarea></td>
            </tr>
            <tr>
                <td><label for="solution">Solution Description:*</label></td>
                <td><textarea name="solution" cols="33" rows="10" ><?php echo $row['solution'] ?></textarea></td>
            </tr>
            <tr>
                <td><label for="status">Status:*</label></td>
                <td>
                    <select id="Select2" name="status">
                        <option>-Select-</option>
                        <option value="Resolved">Resolved</option>
                        <option value="Un-resolved">Un-resolved</option>
                        <option value="In-Progress">In-Progress</option>
                    </select>
                </td>
            </tr>
        </table>
    </p>
    <p>
        <td><input id="Submit" type="submit" value="Submit" /></td>
        <td><input id ="Clear and Restart" type ="reset" value= "Clear and Restart" /></td>
    </p>
</form>  
<?php
    include 'html/side_menu.php';
    include 'html/footer.php';
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:23:22.267

您没有为您的选项指定任何价值；）

```
<option value="Resolved">Resolved</option> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:24:04.780

```
$_POST['status'] 
```

数组 $_POST 的入口状态未定义

您正在尝试访问尚未设置的变量。

为避免这种情况，您可以先检查表单是否在之前提交，例如

```
<?php 
        if(!empty($_POST['Submit'])){

                    if($_POST['status']== 'Resolved')
                        {
                            $today = DateTime::createFromFormat('!Y-m-d',date('Y-m-d')); // This is Line 55

                        }

                    if(isset($_GET['success']) && empty($_GET['sucess']))
                        {
                            echo 'the log has been captured';
                        }
                    else
                        {
                            if(empty($_POST) === false && empty($errors)=== true)
                                {
                                                                            //Update Log details
                                    $update_log = array(
                                    'task_name'=>$_POST['task_name'],
                                    'description' => $_POST['description'],
                                    'solution' =>$_POST['solution'],
                                    'status'=>$_POST['status'],
                                    'closed_date'=>$today,
                                    'userid' =>$_SESSION['userid']);

                                    update_log($update_log);
                                    //redirect
                                    header('Location: edit_log_widget.php?success');
                                    exit();

                                }
                            else if(empty($errors) === false)
                                {
                                    //output errors if the errors array is not empty
                                    echo output($errors);
                                }
                        }
                    }
            ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T10:24:55.960

PHP 代码在表单提交之前执行，因此 $_POST['status'] 尚未定义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T11:27:00.730

你缺少一些 html 道具，你`<option>`必须有这样的`value`道具：

```
<td>
   <select id="Select2" name="status">
      <option value="0">-Select-</option>
      <option value="1">Resolved</option>
      <option value="2">Un-resolved</option>
      <option value="3">In-Progress</option>
    </select>
</td> 
```

你得到这个错误是因为你在你的第一个 html 片段中丢失了它，而你在第二个片段中有它，所以 PHP 没有什么可以得到的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T11:52:30.953

我将所有的 php 移到了 html 表单的顶部，现在它可以正常工作了。谢谢你们试图帮助我

# c# - 无法发送电子邮件

> ID：14851084
> 
> 赞同：2
> 
> 时间：2013-02-13T10:12:42.680
> 
> 标签：c#, asp.net, smtpclient

```
string from = "myemail@gmail.com";
string to = "other.mail.123@gmail.com";

System.Net.Mail.MailMessage mail = new System.Net.Mail.MailMessage();
mail.To.Add(to);
mail.From = new System.Net.Mail.MailAddress(from, "One Ghost", System.Text.Encoding.UTF8);
mail.Subject = "This is a test mail";
mail.SubjectEncoding = System.Text.Encoding.UTF8;
mail.Body = "This is Email Body Text";
mail.BodyEncoding = System.Text.Encoding.UTF8;
mail.IsBodyHtml = true;
mail.Priority = System.Net.Mail.MailPriority.High;
System.Net.Mail.SmtpClient client = new System.Net.Mail.SmtpClient();

client.Credentials = new System.Net.NetworkCredential(from, "XXXXX");
client.Port = 587; 
client.Host = "smtp.gmail.com";
client.EnableSsl = true; 
try
{
    client.Send(mail);
}
catch (Exception ex)
{
    Exception ex2 = ex;
    string errorMessage = string.Empty;

    HttpContext.Current.Response.Write("errroorr " + ex.Message.ToString());
} 
```

它在 client.send() 方法中抛出异常。它说消息发送失败。内部异常可能是什么问题

内部异常说 `System.Net.WebException: Unable to connect to the remote server ---> System.Net.Sockets.SocketException: No connection could be made because the target machine actively refused it 74.125.141.109:587 at System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress) at System.Net.Sockets.Socket.InternalConnect(EndPoint remoteEP) at System.Net.ServicePoint.ConnectSocketInternal(Boolean connectFailure, Socket s4, Socket s6, Socket& socket, IPAddress& address, ConnectSocketState state, IAsyncResult asyncResult, Int32 timeout, Exception& exception) --- End of inner exception stack trace --- at System.Net.ServicePoint.GetConnection(PooledStream PooledStream, Object owner, Boolean async, IPAddress& address, Socket& abortSocket, Socket& abortSocket6, Int32 timeout) at System.Net.PooledStream.Activate(Object owningObject, Boolean async, Int32 timeout, GeneralAsyncDelegate asyncCallback) at System.Net.PooledStream.Activate(Object owningObject, GeneralAsyncDelegate asyncCallback) at System.Net.ConnectionPool.GetConnection(Object owningObject, GeneralAsyncDelegate asyncCallback, Int32 creationTimeout) at System.Net.Mail.SmtpConnection.GetConnection(String host, Int32 port) at System.Net.Mail.SmtpTransport.GetConnection(String host, Int32 port) at System.Net.Mail.SmtpClient.GetConnection() at System.Net.Mail.SmtpClient.Send(MailMessage message)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:24:57.833

尝试添加这两个设置

```
client.DeliveryMethod = SmtpDeliveryMethod.Network;
client.UseDefaultCredentials = false; 
```

还要检查您的服务器上是否有阻止发送电子邮件请求的防病毒软件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:46:22.420

你可以像这样使用它在下面

```
public static void SendMail(string Message, string Subject)
    {
        bool retVal;
        SmtpClient smtpClient = new SmtpClient();
        MailMessage message = new MailMessage();

        MailAddress fromAddres = new MailAddress(FromMail, "Test");
        message.From = fromAddres;
        // To address collection of MailAddress
        message.To.Add(ToMail);
        message.Subject = Subject;
        smtpClient.Host = HotName;
        smtpClient.UseDefaultCredentials = true;
        smtpClient.Credentials = new System.Net.NetworkCredential(SmtpUser, SmtpPassword);
        message.IsBodyHtml = true;
        // Message body content
        message.Body = Message;    

        smtpClient.Send(message);

        retVal = true;
        message.Dispose();
    } 
```

我想这会对你有所帮助........

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T10:46:56.177

很抱歉将其发布为答案，我打算将其用于回复原始帖子。

SMTP 将需要凭据，我没有找到提供的凭据。尝试 `telnet`连接到服务器。如果端口可访问并且您拥有 SMTP 凭据，您将能够从命令行本身发送电子邮件。

试试这个，让我知道这是否适合你。

# php - PHP：使用 DOMPDF 自动将动态 PDF 保存到远程服务器

> ID：14851090
> 
> 赞同：6
> 
> 时间：2013-02-13T10:12:59.857
> 
> 标签：php, pdf-generation, dompdf

我正在使用 dompdf 库创建基于表格的 PDF，我可以在线查看它，也可以将其下载到用户选择的文件夹中。

但是我想做的是让它保存到远程服务器（我不需要将它保存到用户PC），就像一个自动上传脚本，它会创建文件然后将它上传到远程服务器，所以我然后可以稍后在我的应用程序中使用它。

是否可以指向 $_FILES["file"] 脚本，这样可以获取创建 pdf 的 php 页面，然后从那里上传。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-13T10:18:34.827

你可以做一件我正在为我的应用程序做的事情。例如，首先在您的服务器的根目录下创建一个文件夹。然后使用 chmod 命令更改对该文件夹的读写权限。

然后获取`$html`字符串中的所有代码。

```
$dompdf->load_html($html);    
$dompdf->render();
$pdf = $dompdf->output();
$file_location = $_SERVER['DOCUMENT_ROOT']."app_folder_name/pdfReports/".$pdf_name.".pdf";
file_put_contents($file_location,$pdf); 
```

`pdfReports`我为保存所有 pdf 而创建的文件夹在哪里。您可以更改为您的文件夹名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:16:00.527

引用自 PHP 手册：

> [如果fopen 包装器](http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)已启用，则 URL 可用作此函数的文件名。有关如何指定文件名的更多详细信息，请参见[fopen() 。](http://www.php.net/manual/en/function.fopen.php)请参阅[支持的协议和包装](http://www.php.net/manual/en/wrappers.php)器以获取有关各种包装器具有哪些功能的信息的链接、有关其使用的说明以及有关它们可能提供的任何预定义变量的信息。

来源： http: [//php.net/manual/en/function.file-put-contents.php](http://php.net/manual/en/function.file-put-contents.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T10:16:03.690

是否可以直接在服务器上创建PDF，并让客户在需要时下载它？如果是这样，您可以使用 wkhtmltppdf 在服务器上将任何 HTML 页面转换为 PDF 并将其保存和/或流式传输到客户端。

[http://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T10:19:51.117

不能使用[PHP 的 FTP 功能](http://php.net/manual/fr/book.ftp.php)吗？

# model-view-controller - Extjs mvc 将记录添加到网格面板

> ID：14851092
> 
> 赞同：0
> 
> 时间：2013-02-13T10:13:06.717
> 
> 标签：model-view-controller, extjs, row, add, gridpanel

首先，我认为这是一个简单的问题，但无论如何我都无法解决。

我有一个 extjs 网格面板，它的商店和模型。从控制器中，我可以插入新记录来存储，当我使用 firebug 和调试时，我可以列出存储中的所有新记录（panel.store.data.items）但是在 gridview 中我无法使其可见。

你能告诉我我在哪里以及我缺少什么吗？为什么记录没有在网格中列出？

这是我的模型

```
Ext.define('BOM.model.PaketModel', {
    extend: 'Ext.data.Model',
    fields: [
        { name: 'seriNo', type: 'string' },
        { name: 'tutar', type: 'string' },
    ]
}); 
```

这是商店

```
Ext.define('BOM.store.PaketStore', {
    extend: 'Ext.data.Store',
    model: 'BOM.model.PaketModel',
    proxy: {
        type: 'memory',
        reader: {
            type: 'json',
            root: 'data',
        },
        writer: {
            type: 'json',
            root: 'data',
        },
    },

}); 
```

这是我添加新行的方法

```
addNew: function () {
        this.getPaketWindow().returnRowEdit().cancelEdit();
        this.getPaketWindow().getStore().insert(0, new BOM.model.PaketModel());
        this.getPaketWindow().returnRowEdit().startEdit(0, 0);
    } 
```

**更新视图**

```
Ext.define('BOM.view.PaketCreate', {
    extend: 'Ext.grid.Panel',
    alias: 'widget.paketcreate',
    bodyPadding: 5,
    layout: 'fit',

    header:false,

    initComponent: function () {

        this.columns = [
            {   text: 'Seri No',        flex: 2,    sortable: true,     dataIndex: 'seriNo',        field: {xtype: 'textfield'} }, 
            {   text: 'Tutar',          flex: 2,    sortable: true,     dataIndex: 'tutar',         field: {xtype: 'textfield'} }
        ];
        this.dockedItems = [{
            xtype: 'toolbar',
            items: [{
                text: 'Ekle',
                id:'addNewCheck',
                iconCls: 'icon-add',

            },'-',{
                id: 'deleteCheck',
                text: 'Sil',
                iconCls: 'icon-delete',
                disabled: true,
           }]
        }];
        this.store = 'BOM.store.PaketStore';
        rowEditing = Ext.create('Ext.grid.plugin.RowEditing', {
            clicksToMoveEditor: 1,
            autoCancel: false
        });
        this.plugins = rowEditing,
        this.callParent(arguments);
    },
    returnRowEdit: function () {
        console.log("row editing...");
        return rowEditing;
    }
});
var rowEditing; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:37:31.327

尝试：

```
this.store =  Ext.create('BOM.store.PaketStore'); 
```

代替：

```
this.store = 'BOM.store.PaketStore'; 
```

[http://jsfiddle.net/qzMb7/1/](http://jsfiddle.net/qzMb7/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T07:22:43.127

当我添加“.getView（）”时它可以工作

> this.getPaketWindow().getView().getStore().insert(0, new BOM.model.PaketModel())

However, I still do not understand. Both reaches the same store when I add records manually I can see them in the store.data but it is visible only if I include .getView() part

# asp.net-mvc-4 - 运行时 MVC4 实体框架上的重复项

> ID：14851093
> 
> 赞同：0
> 
> 时间：2013-02-13T10:13:11.283
> 
> 标签：asp.net-mvc-4, many-to-many, entity-framework-5, updates

我得到这个奇怪的“错误”。当我运行我的应用程序（编辑操作，即更新）时，我得到了存储在我的 dB 中的重复值。如果我一步一步地使用调试器，它的工作（没有重复）......

*这是一个多对多的关系，所以不要打扰图像中的 Courses NULL 值，只是想弄清楚......*

感谢所有帮助！

> ```
>  [HttpPost]
>     public ActionResult Edit(CourseStudentViewModel model)
>     {
>         var course = db.Courses
>             .Where(c => c.Id == model.CourseId)
>             .Single();
> 
>         if (ModelState.IsValid)
>         {
>             course.Name = model.CourseName;
>             course.Description = model.CourseDescription;
>             course.Students = model.Students;
> 
>             if(course.Id != 0) {
>                 db.Entry(course).State = System.Data.EntityState.Modified;
>             }
>             else {
>                 db.Courses.Add(course);
>             }
>             db.SaveChanges();
>             return RedirectToAction("Index");
>         }
>         //modelstate not valid, display form
>         return View(model);
>     } 
> ```
> 
> 我拿回了我的 viewModel。都好。 ![我回来的视图模型](../Images/3d350e196cbe1f14aa810719479dbd3f.png)

我的旧值来自 dB。我想更新这些数据。所以一切都还好...

![在此处输入图像描述](../Images/18c2818b17b02e8f30afaf42ba64a0da.png)

我的旧价值观更新为我的新价值观。伟大的！

![在此处输入图像描述](../Images/2c2d427399cde6c932c162b6311d3a5e.png)

* * *

**好的，如果我像这样使用调试器，一切都会很好。但是，如果我运行该应用程序，我会得到重复的......有人吗？**

**新内容：**

我的编辑视图

> @model ValueInjecter.Web.Models.CourseStudentViewModel
> 
> @{ ViewBag.Title = "编辑"; }
> 
> 编辑课程
> 
> @using (Html.BeginForm()) { @Html.HiddenFor(c => Model.CourseId) @Html.LabelFor(c => Model.CourseName) @Html.EditorFor(c => Model.CourseName)
> 
> ```
>  @Html.LabelFor(c => Model.CourseDescription)
>     @Html.EditorFor(c => Model.CourseDescription)
> </div>
> 
> <hr />
> <h2>Students</h2>
> 
> <div class="editor-field">
>     @for (int i = 0; i < Model.Students.Count(); i++)
>     {
>         <div style="border: dotted 1px; padding: 5px; margin: 10px;">
>             @Html.HiddenFor(s => s.Students[i].Id)
> 
>             @Html.LabelFor(s => s.Students[i].Name[i + 1])
>             @Html.EditorFor(s => s.Students[i].Name)
>         </div>
>     }
> </div>
> <p>
>     Number of Students: 
> <b>@Html.DisplayFor(s => Model.StudentCount)</b>
> </p>
> <hr />
> <p>
>     <input type="submit" value="Save" />
> </p> } 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T21:10:39.247

它可能在调试器中工作，因为通过在属性监视窗口中检查集合，由于集合的*延迟加载*，`course.Students`您实际上触发了第二个数据库查询（在加载 的查询之后`course`）。（您的集合很可能被声明为。）如果您在没有调试器的情况下运行，则不会发生延迟加载并保持为空。*`Students``Course.Students``virtual``course.Students`*

 **您可以通过使用急切加载*而不是延迟加载来强制`course.Students`始终加载集合（这也节省了第二次数据库往返）：

 *```
var course = db.Courses
    .Include(c => c.Students)
    .Where(c => c.Id == model.CourseId)
    .Single(); 
```

老实说，我不知道为什么您的代码可以与加载的集合（在调试器中）一起正常工作，以及为什么它完全可以工作。像这样分配一个完整的分离集合：`course.Students = model.Students`，然后仅将父集合的状态设置`Modified`为通常不足以更新子集合。

但我`"ValueInjecter"`在你的截图中看到了。也许有一些自动映射魔法正在发生（意外地？）正确的事情来获得工作更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:12:54.953

好的，我终于找到了解决问题的方法。当然比最初想象的要容易得多。

> [HttpPost]
> 
> ```
>  public ActionResult Edit(CourseStudentViewModel model)
>     {
> 
>         if (ModelState.IsValid)
>         {
>             var course = db.Courses.Find(model.CourseId);
>             course.Name = model.CourseName;
>             course.Description = model.CourseDescription;
> 
>             if(model.Students != null)
>             {
>                 foreach (var item in model.Students)
>                 {
>                     db.Entry(item).State = System.Data.EntityState.Modified;
>                 }
>             }
> 
>             if(course.Id != 0) {
>                 db.Entry(course).State = System.Data.EntityState.Modified;
>             }
>             else {
>                 db.Courses.Add(course);
>             }
>             db.SaveChanges();
>             return RedirectToAction("Index");
>         }
>         //modelstate not valid, display form
>         return View(model);
>     } 
> ```

**仍然使用上面**粘贴的视图。**

# php - SonataAdmin $formMapper->add('propertyA.propertyB');

> ID：14851095
> 
> 赞同：0
> 
> 时间：2013-02-13T10:13:18.420
> 
> 标签：php, symfony, sonata-admin

这该怎么做：

```
$formMapper->add('propertyA.propertyB'); 
```

什么时候

```
$this->propertyA->propertyB;

/**
* @ORM\ManyToOne(targetEntity="propertyB")
*/
protected $propertyA; 
```

$propertyA 依赖于实体 A

$propertyB 依赖于实体 B

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:10:54.150

就这样做

```
->add('name', 'text', array('property_path' => 'propertyA.propertyB', 'required' => false)) 
```

# android - 我无法在 android 口语文本的 web 视图中突出显示文本

> ID：14851099
> 
> 赞同：4
> 
> 时间：2013-02-13T10:13:24.413
> 
> 标签：android, android-webview

我正在使用 webview 来呈现 epub，并且能够实现文本到语音的功能，但我无法突出显示文本！

我试过了：

```
public class Epub extends Activity implements OnInitListener, OnUtteranceCompletedListener {
    ProgressDialog pDialog;
    WebView webview;
    String line, line1 = "", finalstr = "";
    int i = 0;
    Book book;
    String linez;
    String abspath="file://android_asset/Images/";
    private TextToSpeech mTts;
    String htmlTextStr;
    private int MY_DATA_CHECK_CODE = 0;
    private HashMap<String, String> params = new HashMap<String, String>();
    private int uttCount = 0;
    StringTokenizer st;
    private int lastUtterance = -1;
    ArrayList <String> words = new ArrayList<String> ();   
    ArrayList <String> Swords = new ArrayList<String> ();  
    String utteranceId;
    HashMap<String, String> lastSpokenWord = new HashMap<String, String>();
    String s;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    new Load().execute();
    mTts = new TextToSpeech(this, this);
    Button mBtnSpeak = (Button) findViewById(R.id.btn);
    webview = (WebView) findViewById(R.id.tv);
    mBtnSpeak.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

              doSpeak(htmlTextStr);
           }
       });
    }
class Load extends AsyncTask<String, String, String> 
{

    @Override
   protected void onPreExecute() 
    {
           super.onPreExecute();
           pDialog = new ProgressDialog(Epub.this);
           pDialog.setMessage("Loading Epub...");
           pDialog.setIndeterminate(false);
           pDialog.setCancelable(false);
           pDialog.show();
    }
    @Override
    protected String doInBackground(String... arg0) {
        // TODO Auto-generated method stub

            AssetManager assetManager = getAssets();
            try {
                Intent j = getIntent();
                final String pos= j.getExtras().getString("product");
                InputStream epubInputStream = assetManager.open(pos+".epub");
                book = (new EpubReader()).readEpub(epubInputStream);
                //coverImage =BitmapFactory.decodeStream(book.getCoverImage().getInputStream());
               // Log.i("epublib", "Coverimage is " + coverImage.getWidth() +  " by " + coverImage.getHeight() + " pixels");

               // DownloadResource("file:///android_asset/");
            } catch (IOException e) {
                Log.e("epublib", e.getMessage());
            }

        Spine spine = book.getSpine(); 
        List<SpineReference> spineList = spine.getSpineReferences() ;
        int count = spineList.size();

        //tv.setText(Integer.toString(count));
        StringBuilder string = new StringBuilder();
        for (int i = 0; count > i; i++) {
            Resource res = spine.getResource(i);

            try {
                InputStream is = res.getInputStream();
                BufferedReader reader = new BufferedReader(new InputStreamReader(is));
                try {
                    while ((line = reader.readLine()) != null) {
                        linez =   string.append(line + "\n").toString();
                        System.err.println("res media"+res.getMediaType());
                        htmlTextStr = Html.fromHtml(linez).toString();
                        Log.e("Html content.",htmlTextStr);

                    }

                } catch (IOException e) {e.printStackTrace();}

                //do something with stream
            } catch (IOException e) {
                e.printStackTrace();
            }

        }

                webview.getSettings().setAllowFileAccess(true);

                //System.err.println("qaz"+hr);
                webview.getSettings().setBuiltInZoomControls(true);
                webview.getSettings().setJavaScriptEnabled(true);
                webview.loadDataWithBaseURL("file:///android_asset/", linez, "application/xhtml+xml", "UTF-8", null);

        return null; 
    }
      protected void onPostExecute(String file_url) 
      {
              pDialog.dismiss();

      }

}

public void doSpeak(String htmlTextStr) {
    st = new StringTokenizer(htmlTextStr,".");
    while (st.hasMoreTokens()) {
        params.put(TextToSpeech.Engine.KEY_PARAM_UTTERANCE_ID,String.valueOf(uttCount++));
        mTts.speak(st.nextToken(), TextToSpeech.QUEUE_ADD, params);
        words.add(htmlTextStr);

    }
 String arr[] = htmlTextStr.split(",");
 for(int i = 0; i < arr.length; i++){
     System.out.println("arr["+i+"] = " + arr[i].trim());
     s=arr[i].trim();
     Swords.add(s);
     runOnUiThread(new Runnable() {
     public void run() {
            webview.findAll(s);
             System.err.println(" b  - - >"+s);
             webview.setSelected(true);
             webview.findNext(true);   
    }
});
 }
  }

@Override
public void onInit(int status) {
    // TODO Auto-generated method stub

    // status can be either TextToSpeech.SUCCESS or TextToSpeech.ERROR
    if (status == TextToSpeech.SUCCESS) {
           mTts.setOnUtteranceCompletedListener(this);

        int result = mTts.setLanguage(Locale.UK);
        if (result == TextToSpeech.LANG_MISSING_DATA ||
            result == TextToSpeech.LANG_NOT_SUPPORTED) {
           // Lanuage data is missing or the language is not supported.
            Log.e("404","Language is not available.");
        }
    } else {
        // Initialization failed.
        Log.e("404", "Could not initialize TextToSpeech.");
        // May be its not installed so we prompt it to be installed
        Intent installIntent = new Intent();
        installIntent.setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
        installIntent.setAction(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
        startActivity(installIntent); 
    }
}
@Override
  public void onPause()
  {
    super.onPause();
    if( mTts != null)
      mTts.stop();
  }
@Override
public void onDestroy() {
    if (mTts != null) {
        mTts.stop();
        mTts.shutdown();
    }
    mTts.stop();
    super.onDestroy();
}    
@Override
public void onUtteranceCompleted(String utteranceId) {
    // TODO Auto-generated method stub

     Log.i("xsw",utteranceId); 
     lastUtterance = Integer.parseInt(utteranceId);

       // createThread(s); 
}
} 
```

有人可以帮帮我吗？以下代码不起作用：

```
 webview.findall("string");
  webview.setSelected(true);
  webview.findNext(true); 
```

# mysql - 简单删除的 MySQL 死锁

> ID：14851101
> 
> 赞同：4
> 
> 时间：2013-02-13T10:13:40.930
> 
> 标签：mysql, deadlock, database-deadlocks

如此简单的删除查询如何导致 MySQL 中的死锁，具体而言，我该怎么办？

```
DELETE FROM view_offers WHERE view_id = 55 
```

对于表

```
CREATE TABLE `view_offers` (
  `view_id` int(11) NOT NULL DEFAULT '0',
  `user_id` int(11) DEFAULT NULL,
  `offer_id` bigint(20) unsigned NOT NULL DEFAULT '0',
  `offer_source` int(11) NOT NULL,
  `offer_source_id` bigint(20) unsigned NOT NULL,
  `product_id` bigint(20) unsigned DEFAULT NULL,
  `shop_id` bigint(20) unsigned DEFAULT NULL,
  `category_id` mediumint(8) unsigned DEFAULT NULL,
  `name` varchar(255) DEFAULT NULL,
  `relevance` float NOT NULL DEFAULT '0',
  PRIMARY KEY (`view_id`,`offer_id`),
  KEY `index_view_offers_on_view_id_and_product_id` (`view_id`,`product_id`),
  KEY `index_view_offers_on_view_id_and_shop_id` (`view_id`,`shop_id`),
  KEY `index_view_offers_on_view_id_and_category_id` (`view_id`,`category_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

我知道在编程上下文中死锁本身的概念。如果我以不同的顺序同时锁定多个表，我会理解数据库中的死锁，但此查询中只有一个表......

这发生在键级别而不是表级别吗？我的 Rails 应用程序中必须有几十个（如果不是一百个）不同的查询。

如何找出死锁中涉及的其他查询/查询？

## 编辑：这是来自的死锁信息`SHOW InnoDB STATUS`

据我了解： - 线程 1 没有锁并等待锁定 PRIMARY - 线程 2 有锁 PRIMARY 并等待锁定 PRIMARY 这对我来说没有意义，因为它听起来不像死锁。

```
------------------------
LATEST DETECTED DEADLOCK
------------------------
130214 18:06:52
*** (1) TRANSACTION:
TRANSACTION 0 6720854, ACTIVE 2 sec, process no 10951, OS thread id 140317946369792 starting index read
mysql tables in use 1, locked 1
LOCK WAIT 3 lock struct(s), heap size 1216, 1 row lock(s)
MySQL thread id 419387, query id 2333457 10.0.3.3 foo updating
DELETE FROM view_offers WHERE view_id = 55
*** (1) WAITING FOR THIS LOCK TO BE GRANTED:
RECORD LOCKS space id 0 page no 6987532 n bits 168 index `PRIMARY` of table `foo`.`view_offers` trx id 0 6720854 lock_mode X waiting
Record lock, heap no 41 PHYSICAL RECORD: n_fields 12; compact format; info bits 0
 0: len 4; hex 80000037; asc    7;; 1: len 8; hex 00005f9c7d5f9261; asc   _ }_ a;; 2: len 6; hex 000000668d4c; asc    f L;; 3: len 7; hex 80001ec007080d; asc        ;; 4: len 4; hex 80000039; asc    9;; 5: len 4; hex 80000002; asc     ;; 6: len 8; hex 000000000c001798; asc         ;; 7: len 8; hex 022c4f4dc34a1e6e; asc  ,OM J n;; 8: len 8; hex 02796b4da8fe914c; asc  ykM   L;; 9: len 3; hex 019342; asc   B;; 10: len 30; hex 4e722e2035382050686f746f202831376d6c29202d2054696e74656e6661; asc Nr. 58 Photo (17ml) - Tintenfa;...(truncated); 11: len 4; hex 00000000; asc     ;;

*** (2) TRANSACTION:
TRANSACTION 0 6720844, ACTIVE 3 sec, process no 10951, OS thread id 140336508557056 inserting, thread declared inside InnoDB 500
mysql tables in use 2, locked 2
7762 lock struct(s), heap size 817136, 82058 row lock(s), undo log entries 28808
MySQL thread id 419384, query id 2333448 10.0.3.2 foo Sending data
INSERT INTO view_offers SELECT 55, 57, uiid, source, source_id, 100, 200, category_id, name, relevance FROM `offers`  WHERE `offers`.`source` IN (2) AND (((product_source = 2 AND product_source_id IN (1,2,3,..
*** (2) HOLDS THE LOCK(S):
RECORD LOCKS space id 0 page no 6987532 n bits 152 index `PRIMARY` of table `foo`.`view_offers` trx id 0 6720844 lock_mode X locks rec but not gap
Record lock, heap no 41 PHYSICAL RECORD: n_fields 12; compact format; info bits 0
 0: len 4; hex 80000037; asc    7;; 1: len 8; hex 00005f9c7d5f9261; asc   _ }_ a;; 2: len 6; hex 000000668d4c; asc    f L;; 3: len 7; hex 80001ec007080d; asc        ;; 4: len 4; hex 80000039; asc    9;; 5: len 4; hex 80000002; asc     ;; 6: len 8; hex 000000000c001798; asc         ;; 7: len 8; hex 022c4f4dc34a1e6e; asc  ,OM J n;; 8: len 8; hex 02796b4da8fe914c; asc  ykM   L;; 9: len 3; hex 019342; asc   B;; 10: len 30; hex 4e722e2035382050686f746f202831376d6c29202d2054696e74656e6661; asc Nr. 58 Photo (17ml) - Tintenfa;...(truncated); 11: len 4; hex 00000000; asc     ;;

*** (2) WAITING FOR THIS LOCK TO BE GRANTED:
RECORD LOCKS space id 0 page no 6987532 n bits 184 index `PRIMARY` of table `foo`.`view_offers` trx id 0 6720844 lock_mode X locks gap before rec insert intention waiting
Record lock, heap no 41 PHYSICAL RECORD: n_fields 12; compact format; info bits 0
 0: len 4; hex 80000037; asc    7;; 1: len 8; hex 00005f9c7d5f9261; asc   _ }_ a;; 2: len 6; hex 000000668d4c; asc    f L;; 3: len 7; hex 80001ec007080d; asc        ;; 4: len 4; hex 80000039; asc    9;; 5: len 4; hex 80000002; asc     ;; 6: len 8; hex 000000000c001798; asc         ;; 7: len 8; hex 022c4f4dc34a1e6e; asc  ,OM J n;; 8: len 8; hex 02796b4da8fe914c; asc  ykM   L;; 9: len 3; hex 019342; asc   B;; 10: len 30; hex 4e722e2035382050686f746f202831376d6c29202d2054696e74656e6661; asc Nr. 58 Photo (17ml) - Tintenfa;...(truncated); 11: len 4; hex 00000000; asc     ;;

*** WE ROLL BACK TRANSACTION (1) 
```

# xml - ACS Rest API 类似于 Windows Azure 服务管理 REST API 参考

> ID：14851105
> 
> 赞同：0
> 
> 时间：2013-02-13T10:13:54.877
> 
> 标签：xml, azure, httpwebrequest, acs

[我在http://msdn.microsoft.com/en-us/library/windowsazure/hh278947.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh278947.aspx)找到了 ACS 管理服务 API 参考。

我觉得这与 Windows Azure 服务管理 REST API 参考不太相似。除了元数据，我无法提取其余信息。

任何更好的样本来解释这一点。

否则，是否可以根据订阅 ID 直接列出 ACS 命名空间。

深陷困境，请帮助...

这就是我试图提取数据的方式

字符串 hitUri = "https://{0}.accesscontrol.windows.net/v2/mgmt/service/importFederationMetadata/importIdentityProvider";

```
 hittingUri=String.Format(hittingUri, acsnamespace);

        XmlDocument responsebody =await HelperMethods.GetXmlACSDocument(hittingUri); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:26:29.783

因此，您似乎正在尝试通过导入联合元数据来创建新的身份提供者。code.msdn.com 上有一个托管库，您可以使用它与 ACS 服务管理 API 进行交互：[ACS.Management](http://code.msdn.microsoft.com/windowsazure/Windows-Azure-AD-Access-0dcde385/sourcecode?fileId=71587&pathId=1385676881)。下面是这个库的一个示例，它从文件中导入联合元数据：

```
 ManagementService svc = ManagementServiceHelper.CreateManagementServiceClient(); 
        using (Stream metadataFileStream = new FileStream(fedMetadataFile, FileMode.Open, FileAccess.Read)) 
        { 
            svc.ImportIdentityProviderFromStream(metadataFileStream); 
        } 
```

我建议你先看看这个库。

# cakephp - CakePHP 使用 Auth 允许、拒绝访问

> ID：14851107
> 
> 赞同：0
> 
> 时间：2013-02-13T10:13:58.620
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

我有一个模型“事件”，它拥有自己的数据 + 用户 ID。如何仅向事件所属的用户授予访问权限？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T10:22:32.380

您可以在视图方法的开头添加一个检查，以查看 Authenticated 用户 id 是否与事件的匹配。如果没有，请使用“拒绝访问”闪存消息将它们重定向回来。例如，在您的 EventsController 中添加：

```
public function view($event_id) {
    // Make sure the event exists at all
    if (!$this->Event->exists($event_id)) {
        throw new NotFoundException(__('No such event.'));
    }

    // Get the event data
    $event = $this->Event->findById($event_id);

    // Match the authenticated user with the user_id of the event.
    if ($this->Auth->User('id') != $event['Event']['user_id']) {
        // No match, redirect the user back to the index action.
        $this->Session->setFlash(__('This is not your event!'));
        $this->redirect(array('action' => 'index'));
    }

    /**
     * If this point is reached, the user is the owner of the event.
     * The rest of your logic goes below this point.
     */
} 
```

# sharepoint - 包含 6500 个项目的 SharePoint 2003 问题列表 用于迁移到 SharePoint 2010

> ID：14851108
> 
> 赞同：0
> 
> 时间：2013-02-13T10:13:58.597
> 
> 标签：sharepoint, sharepoint-2010, migration, sharepoint-2003

我有一个位于子站点中的 SharePoint 2003 问题列表，它被设置为迁移到 SharePoint 2010。我们尝试使用 DocAve 迁移此问题列表，但它没有接管整个列表，项目被遗漏并且列表中的项目的历史正在被复制、删除或不在迁移中进行。

2003 年的问题列表设计得很糟糕，有 100 个复选框，并且有超过 6500 个项目，因此在成功迁移它的一次我们遇到了 SharePoint 2010 限制问题，因此临时解决方案是恢复到 2003。但是，在过去几周，2003 服务器在月底关闭。所以我所属的 SharePoint 团队的日程安排很紧。

我们已经尝试过。

*   所有的 DocAve 都迁移了，但它们似乎都无法完成列表中的所有项目。
*   曾尝试使用首页，但错过了子网站。
*   无法导出到 Excel，因为它不会保留对问题列表中项目的评论。

您可能知道有什么方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:15:26.550

*2003 年的问题列表设计得很糟糕，有 100 个复选框，并且有超过 6500 个项目，因此在成功迁移它的一次我们遇到了 SharePoint 2010 限制问题，因此临时解决方案是恢复到 2003 年。*

是否可以选择在 Central Admin 中增加查询限制？您可以这样做来迁移列表。之后，您应该索引您查询的列，最后将查询限制限制恢复为 5k。

# python - CheckListBox 小部件大小（高度）适合 wxPython 中的项目

> ID：14851109
> 
> 赞同：0
> 
> 时间：2013-02-13T10:14:03.610
> 
> 标签：python, python-2.7, wxpython, checklistbox

我的应用程序中有 CheckListBox 小部件。
在它的生命周期中，我正在删除或添加新项目。
我想以“自动”的方式改变它的大小（尤其是高度）。
我想更改它的高度以显示所有项目而不显示滚动条。
可能吗？

另一个问题是，当我用 2 个项目创建这样的小部件时，我得到了很高的高度（高度大约是 4 个项目，所以 2 行是空的）。
我不想看到这样“丑陋”的布局。
我的小部件大小不适合其中的项目。

我在我的应用程序中使用sizer，我正在尝试使用 Layout() 方法，但它没有帮助。
如何在不使用“size=()”参数手动更改大小的情况下解决此问题？

这是我的应用程序的示例。
![图片](../Images/ba40a2729533a07212b8707021e9c670.png)

我在我的应用程序中列出了 Com 端口。
我在列出 2 个 com 端口之前的示例，但在断开其中一个并按下 [刷新] 按钮后，我的应用程序只发现了 1 个 com 端口。没关系。
但我想将复选框的高度仅适合这个 com。
怎么做？

我希望“自动化”如下所示：
![图2](../Images/46002baaa59fff6893826a0b20cd60b6.png)

提前致谢。

# scala - 如何在 Tomcat 上部署 Scala/akka 应用程序？

> ID：14851110
> 
> 赞同：3
> 
> 时间：2013-02-13T10:14:13.710
> 
> 标签：scala, tomcat, akka

我尝试在 Tomcat 7 上使用 akka 在 Scala 中部署一个简单的应用程序。

在第一个版本中，演员系统和主要演员是直接从 Scala 对象启动的。

在第二个版本中，我创建了一个初始化器（扩展 ServletContextListener），以便在部署战争时启动参与者系统和参与者。

在这两种情况下，我都会得到一个 java.lang.LinkageError ，如下所示：

```
java.lang.LinkageError: loader constraint violation: when resolving method "akka.actor.Props$.apply(Lscala/reflect/ClassManifest;)Lakka/actor/Props;" the class loader (instance of org/apache/catalina/loader/WebappClassLoader) of the current class, com/my-app/Transfert$, and the class loader (instance of org/apache/catalina/loader/StandardClassLoader) for resolved class, akka/actor/Props$, have different Class objects for the type scala/reflect/ClassManifest used in the signature
  com.my-app.Transfert$.<init>(Transfert.scala:14)
  com.my-app.Transfert$.<clinit>(Transfert.scala)
  com.my-app.Transfert.getState(Transfert.scala)
  org.apache.jsp.transfert_jsp._jspService(transfert_jsp.java:85)
  org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
  javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
  org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:433)
  org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
  org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
  javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

我在谷歌和任何地方搜索，但我没有找到一个简单的例子来说明如何在 Tomcat 7 上部署 Scala/akka 应用程序？

我知道 akka 1.3 中有一个 akka.http 包，但我想使用 akka 2.0（至少）。似乎 akka.http 已经消失，取而代之的是使用 play-mini。但我宁愿不使用 play-mini 或 play。

有什么建议吗？有什么阅读建议吗？或者 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:08:58.367

我们在 Jetty 8 中运行了 Akka actor 2.1 - 它应该不会有太大的不同。

您似乎遇到了`ClassLoader`问题（我假设您使用的是 java 6 并且没有二进制兼容性问题）。

我可以建议你尝试从你的战争中删除`scala-library.2.10.0.jar`并`akka-actor_2.10-2.1.0.jar`把它们放在 tomcat 7`lib`文件夹中吗？

# jquery - 使用多个下拉框更改图像

> ID：14851117
> 
> 赞同：1
> 
> 时间：2013-02-13T10:14:34.583
> 
> 标签：jquery

我正在尝试使用两个下拉框更改图像，当涉及到 jquery/javascript 时，我是一个完全的菜鸟，所以想知道是否可以得到一些帮助，即使它只是朝着正确的方向轻推。

所以这就是问题所在。我想要一个室内装潢颜色选择和一个油漆颜色选择，它们都出现在同一个产品上，所以最好有 2 个下拉框。

我到目前为止的代码是：

```
window.onload=function()
{
    var caption=['Default Image Caption',
                'Caption1',
                'Caption2',
                'Caption3',
                'Caption4',
                'Caption5',
                'Caption6',
                'Caption7',
                'Caption8',
                'Caption9'], // This will be your images caption
    bp='images/', //base url of your images
    imgnum=8, //Number of your images. This should match on your comboboxes options.
    thumb=document.getElementById('thumb'), //id of your image that will be changing
    description=document.getElementById('caption'), //id of your caption
    combobox=document.getElementById('paint'); // id of your combobox.
    combobox=document.getElementById('vinyl');

    combobox.onchange=function()
    {
    thumb.src=bp+'Picture'+this.value+name+'.jpg';
    description.innerHTML=caption[this.value];
    }
} 
```

HTML是

```
<label>Change the Paint: </label>
<select id="paint">
<option>Change Picture</option>
<option value="1">Image 1</option>
<option value="2">Image 2</option>
<option value="3">Image 3</option>
<option value="4">Image 4</option>
<option value="5">Image 5</option>
<option value="6">Image 6</option>
<option value="7">Image 7</option>
<option value="8">Image 8</option>
<option value="9">Image 9</option>
</select><br />
<label>Change the Vinyl: </label>
<select id="vinyl">
<option>Change Picture</option>
<option Name="1">Image 1</option>
<option Name="2">Image 2</option>
<option Name="3">Image 3</option>
<option Name="4">Image 4</option>
<option Name="5">Image 5</option>
<option Name="6">Image 6</option>
<option Name="7">Image 7</option>
<option Name="8">Image 8</option>
<option Name="9">Image 9</option>
</select> 
```

好的，在下面好心人的帮助下，我解决了这个问题：

```
<script type="text/javascript">

    function callAFunction(SelectBox)
    {
        var caption=[
            'Default Image Caption',
            'Caption1',
            'Caption2',
            'Caption3',
            'Caption4',
            'Caption5',
            'Caption6',
            'Caption7',
            'Caption8',
            'Caption9'],
        bp='images/',
        imgnum=8,
        thumb=document.getElementById('thumb'),
        description=document.getElementById('caption');
        thumb.src=bp+'Picture'+paint.value+vinyl.value+'.jpg';
        description.innerHTML=caption[SelectBox.value];
    }

</script>

<img src="/images/picture1.jpg" alt="" id="thumb" />

<label>Change the Paint: </label>
<select id="paint" onChange="callAFunction(this); return false;">
    <option value="1">Image 1</option>
    <option value="2">Image 2</option>
    <option value="3">Image 3</option>
    <option value="4">Image 4</option>
    <option value="5">Image 5</option>
    <option value="6">Image 6</option>
    <option value="7">Image 7</option>
    <option value="8">Image 8</option>
    <option value="9">Image 9</option>
</select><br />

<label>Change the Vinyl: </label>
<select id="vinyl" onChange="callAFunction(this); return false;">
    <option value="1">Image 1</option>
    <option value="2">Image 2</option>
    <option value="3">Image 3</option>
    <option value="4">Image 4</option>
    <option value="5">Image 5</option>
    <option value="6">Image 6</option>
    <option value="7">Image 7</option>
    <option value="8">Image 8</option>
    <option value="9">Image 9</option>
</select> 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:04:27.637

好的，现在在上面的帮助下解决了：

```
<script type="text/javascript">

    function callAFunction(SelectBox)
    {
        var caption=[
            'Default Image Caption',
            'Caption1',
            'Caption2',
            'Caption3',
            'Caption4',
            'Caption5',
            'Caption6',
            'Caption7',
            'Caption8',
            'Caption9'],
        bp='images/',
        imgnum=8,
        thumb=document.getElementById('thumb'),
        description=document.getElementById('caption');
        thumb.src=bp+'Picture'+paint.value+vinyl.value+'.jpg';
        description.innerHTML=caption[SelectBox.value];
    }

</script>

<img src="/images/picture1.jpg" alt="" id="thumb" />

<label>Change the Paint: </label>
<select id="paint" onChange="callAFunction(this); return false;">
    <option value="1">Image 1</option>
    <option value="2">Image 2</option>
    <option value="3">Image 3</option>
    <option value="4">Image 4</option>
    <option value="5">Image 5</option>
    <option value="6">Image 6</option>
    <option value="7">Image 7</option>
    <option value="8">Image 8</option>
    <option value="9">Image 9</option>
</select><br />

<label>Change the Vinyl: </label>
<select id="vinyl" onChange="callAFunction(this); return false;">
    <option value="1">Image 1</option>
    <option value="2">Image 2</option>
    <option value="3">Image 3</option>
    <option value="4">Image 4</option>
    <option value="5">Image 5</option>
    <option value="6">Image 6</option>
    <option value="7">Image 7</option>
    <option value="8">Image 8</option>
    <option value="9">Image 9</option>
</select> 
```

再一次感谢你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:47:03.947

你的意思

```
window.onload=function() {
    var caption=['Default Image Caption',
                'Caption11',
                'Caption12',
                'Caption13',
                'Caption14',
                'Caption15',
                'Caption16',
                'Caption17',
                'Caption18',
                'Caption19',
                'Caption21',
                'Caption22',
                'Caption23',
                'Caption24',
                'Caption25',
                'Caption26',
                'Caption27',
                'Caption28',
                'Caption29',
                .
                .
                .
                'Caption99'
      ], // This will be your images caption - no comma on the last
    bp='images/', //base url of your images
    imgnum=8, //Number of your images. This should match on your comboboxes options.
    thumb=document.getElementById('thumb'), //id of your image that will be changing
    description=document.getElementById('caption'), //id of your caption

    var paint=document.getElementById('paint'); // id of your combobox1.
    var vinyl=document.getElementById('vinyl'); // id of your combobox2.

    paint.onchange=vinyl.onchange=function() {
      var val = paint.value+vinyl.value; // "1"+"1"
      thumb.src=bp+'Picture'+val+'.jpg'; // loads images/Picture11.jpg
      description.innerHTML=caption[val]; // loads the 12th text
    }
} 
```

或有

```
var vinylCaption["....","....."];
var paintCaption["....","....."]; 
```

并且有

```
description.innerHTML=vinylCaption[vinyl.value] + "/"+paintCaption[paint.value]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T10:20:26.993

进行以下更改并尝试。

你有`ID`两个`DOM`不正确的相同。

**在 html 中**

```
<label>Change the Paint: </label>
<select class="selection">
    <option>Change Picture</option>
    <option value="1">Image 1</option>
</select><br />

<label>Change the Vinyl: </label>
<select class="selection">
    <option>Change Picture</option>
    <option name="1">Image 1</option>
</select>
```

**在 JS 中**

```
combobox=document.getElementById('selection');

to

combobox=document.getElementsByClassName('selection');
```

检查`getElementByClassName` [**点击这里的工作能力**](http://caniuse.com/getelementsbyclassname)

**对 OP 评论的回应。**

```
<script type="text/javascript">

    function callAFunction(SelectBox)
    {
        var caption=[
            'Default Image Caption',
            'Caption1',
            'Caption2',
            'Caption3',
            'Caption4',
            'Caption5',
            'Caption6',
            'Caption7',
            'Caption8',
            'Caption9'],
        bp='img/',
        imgnum=8,
        thumb=document.getElementById('thumb'),
        description=document.getElementById('caption');

        thumb.src=bp+'Picture'+SelectBox.value+name+'.jpg';
        description.innerHTML=caption[SelectBox.value];
    }

</script>

<img src="" alt="" id="thumb" />

<label>Change the Paint: </label>
<select id="paint" onChange="callAFunction(this); return false;">
    <option>Change Picture</option>
    <option value="1">Image 1</option>
    <option value="2">Image 2</option>
    <option value="3">Image 3</option>
    <option value="4">Image 4</option>
    <option value="5">Image 5</option>
    <option value="6">Image 6</option>
    <option value="7">Image 7</option>
    <option value="8">Image 8</option>
    <option value="9">Image 9</option>
</select><br />

<label>Change the Vinyl: </label>
<select id="vinyl" onChange="callAFunction(this); return false;">
    <option>Change Picture</option>
    <option Name="1">Image 1</option>
    <option Name="2">Image 2</option>
    <option Name="3">Image 3</option>
    <option Name="4">Image 4</option>
    <option Name="5">Image 5</option>
    <option Name="6">Image 6</option>
    <option Name="7">Image 7</option>
    <option Name="8">Image 8</option>
    <option Name="9">Image 9</option>
</select>
```

# drupal - 如何在 drupal7 中以表格格式 Webform 字段

> ID：14851122
> 
> 赞同：0
> 
> 时间：2013-02-13T10:14:44.213
> 
> 标签：drupal

我想以表格格式显示 webform 字段我如何在 drupal 7 中执行此操作。在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:03:55.033

您需要使用[hook_theme_registry_alter](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_theme_registry_alter/7)覆盖主题。

虽然我实际上建议只用 css 做这个。默认情况下，Webform 将输出所有必需的类。您可以在每个表单项上设置宽度和浮动标签左和字段右并清除。

# android - 从哪个 Android 版本开始支持“drawable-nodpi”？

> ID：14851125
> 
> 赞同：9
> 
> 时间：2013-02-13T10:15:04.253
> 
> 标签：android, android-version, android-drawable

从**哪个 Android 版本**开始支持**“drawable-nodpi”**？将图像放在**“res/drawable-nodpi”中**并期望它们至少从**2.0(Eclair)**及更高版本开始在所有 android 版本中工作是否安全？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-13T10:36:45.687

根据[本文档](http://developer.android.com/guide/topics/resources/providing-resources.html)，nodpi 下方没有“在 API 级别 X 中添加”。所以它必须得到所有平台的支持。

# sql - SQL查询选择下单最多的客户端

> ID：14851128
> 
> 赞同：2
> 
> 时间：2013-02-13T10:15:10.367
> 
> 标签：sql

我想选择下订单最多的客户：

我有 2 张桌子：

```
CREATE TABLE customers(
customerid INT(11) NOT NULL AUTO_INCREMENT PRIMARY KEY,
NAME CHAR(50) NOT NULL,
address CHAR(100) NOT NULL,
city CHAR(30)NOT NULL
);

CREATE TABLE orders(
orderid INT UNSIGNED NOT NULL,
customerid INT UNSIGNED NOT NULL,
); 
```

这就是我想要做的：

```
SELECT customers.customerid, customers.name,orders.orderid, COUNT(customerid) 
AS CostumerCount 
FROM customers 
INNER JOIN orders 
ON customers.customerid=orders.orderid; 
```

我怎么能做这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T10:18:45.360

由于您使用的 RDBMS***不一定***适合您，因此让我假设您使用的是 MySQL，并且您正在寻找具有最高订单数的客户：

```
SELECT 
  customers.customerid, 
  customers.name,
  COUNT(orders.orderid) AS Orderscount
FROM customers 
INNER JOIN orders ON customers.customerid = orders.customerid 
GROUP BY customers.customerid, 
         customers.name
ORDER BY Orderscount DESC
LIMIT 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T10:23:21.967

您的创建表包含错误的语法

尝试这个

```
 CREATE TABLE customers(
   customerid INT(11) NOT NULL AUTO_INCREMENT PRIMARY KEY,
   NAME CHAR(50) NOT NULL,
   address CHAR(100) NOT NULL,
   city CHAR(30)NOT NULL
   );

  CREATE TABLE orders(
  orderid INT UNSIGNED NOT NULL,
  customerid INT UNSIGNED NOT NULL 
  );                               ^----remove comma ',' from here 
```

并且您的查询效果很好，只需替换`COUNT(customerid)`为`COUNT(customers.customerid)`

在这里试试

```
 SELECT customers.customerid, customers.name,orders.orderid, COUNT(customers.customerid) 
   AS CostumerCount 
   FROM customers 
   INNER JOIN orders 
  ON customers.customerid=orders.orderid; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T10:28:17.800

```
SELECT customers.customerid, customers.name, 
       orders.orderid, COUNT( orders.customerid ) AS CostumerCount
FROM customers
INNER JOIN orders ON customers.customerid = orders.customerid 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T10:19:09.277

对于`SQL SERVER`;

```
SELECT TOP (1) * FROM (
    SELECT customers.customerid, customers.name, COUNT(*) AS CostumerCount 
    FROM customers INNER JOIN orders 
               ON customers.customerid=orders.customerid
    GROUP BY customers.customerid, customers.name 
) A
ORDER BY CostumerCount DESC 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-23T10:36:09.930

```
SELECT * FROM Customers WHERE cno = (
    SELECT cno FROM (
        SELECT count(*) as ordCount, cno 
        FROM ORDERS
        GROUP BY cno HAVING ordCount >= (
            SELECT max(ordCount) 
            FROM ( 
                SELECT count(*) as ordCount, cno 
                FROM ORDERS 
                GROUP BY cno
                )
            )
        )
    ) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-15T10:32:22.560

我已经编辑了第一个答案，因为如果您有更多具有相同订单数量的客户，**您只会得到第一个！**

```
SELECT 
    customers.customerid, 
    customers.name,
    COUNT(orders.orderid) AS Orderscount
FROM customers 
INNER JOIN orders ON customers.customerid = orders.customerid 
GROUP BY customers.customerid, 
         customers.name
HAVING Orderscount =  (       
    SELECT COUNT(id) AS Orderscount
    FROM orders
    GROUP BY customerid
    ORDER BY Orderscount DESC
    LIMIT 1
) 
```

# android - 将 min SDK 从 4.1 更改为 2.2 - style.xml (resource)

> ID：14851129
> 
> 赞同：1
> 
> 时间：2013-02-13T10:15:12.523
> 
> 标签：android, styles, android-manifest, android-2.2-froyo

我想将 min SDK 从 4.1 更改为 2.2 android。所以我已经将属性“项目构建目标”更改为 2.2 版本，修复了一些问题（例如 adView.setY();-makes 错误），我现在遇到了 style.xml 的问题。在更改 sdk 之前和之后，我没有更改 style.xml 中的任何内容，但现在我有这样的错误：

```
error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo.Light.DarkActionBar'.    styles.xml  /SquaresUpdate/res/values-v14   line 3  Android AAPT Problem 
```

在两个文件 styles.xml（values-v11 和 values-v14）中。样式.xml：

```
<resources>
<style name="AppTheme" parent="android:Theme.Holo.Light" />
</resources> 
```

显现：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="mypackage"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".gui.MainActivity"
            android:label="@string/title_activity_main"
            android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.google.ads.AdActivity"
            android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" />
        <activity
            android:name=".GameActivity"
            android:label="@string/title_activity_game"
            android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" >
        </activity>
        <activity
            android:name=".gui.SettingsActivity"
            android:label="@string/title_activity_settings"
            android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" >
        </activity>        
        <activity
            android:name=".gui.TheBestScoreActivity"
            android:label="@string/title_activity_the_best_score"
            android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" >
        </activity>
        <activity
            android:name=".gui.AboutActivity"
            android:label="@string/title_activity_about"
            android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" >
        </activity>
    </application>

</manifest> 
```

在更改为 2.2 sdk 版本应用程序之前是好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:30:51.727

Android 3.0 之前根本没有 holo 主题

当低于 3.0 或向后移植这些样式时，您将不得不使用另一个标准主题。[HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)是一个很好的库。但是，如果您真的想使用它，请好好考虑一下 - 使用属于 Android 版本和使用该应用程序的设备的样式没有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T07:19:50.117

你没有接受答案。只是认为它可能对其他人有帮助：

您可以为两个文件夹（values-v11 和 values-v14）更改 style.xml，如下所示。

```
<resources>
<style name="AppTheme" parent="android:Theme.Light" />
</resources> 
```

在 menu.xml 中删除该属性`android:showAsAction="never"` ，它也应该适用于较低的 android 版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T10:22:53.207

大约 Android 2.2 不支持您的应用程序要求。我认为，您可能会使用一些新的控件和组件。例如，我在我的应用程序中使用 Web 服务，它适用于 2.2，但它不适用于 4.0 或更高版本。因为 android 4.0 或更高版本需要为此进程使用 asynctask。类似的东西。您应该从 android 开发者网站检查您可以在哪个版本上使用哪些功能。

否则，清理您的项目并重新启动 IDE。我希望这能解决你的问题。

# c# - 如何从 MS-Word doc 文件中提取文本数据

> ID：14851133
> 
> 赞同：2
> 
> 时间：2013-02-13T10:15:27.390
> 
> 标签：c#, ms-word

我正在开发一个简历存档，人们可以在其中上传他们的简历，并且该简历将保存在特定位置。最重要的是人们可以使用任何版本的 MS-word 来准备他们的简历，并且简历文件的扩展名可以是 doc 或 docx。所以我只想知道是否有任何可用的免费库可用于从 doc 或 docx 文件中提取文本数据，该库在所有 ms-word 版本的情况下都可以使用，如果 ms-word 未安装在 pc 中也可以使用。我搜索谷歌，发现一些文章从 doc 文件中提取文本数据，但我不确定它们是否适用于所有 ms-word 版本。所以请指导我应该使用哪个库来从 ms-word 中提取数据，而不管 ms-word 版本如何，也请给我一些关于这个问题的好文章链接。

还指导我是否有任何可用的查看器可用于显示我的 c# 应用程序中的 doc 文件内容，而与 ms-word 版本无关。谢谢

## 我得到了答案

```
**Need to add this reference Microsoft.Office.Interop.Word**

using System.Runtime.InteropServices.ComTypes;
using System.IO;

       public static string GetText(string strfilename)
    {
        string strRetval = "";
        System.Text.StringBuilder strBuilder = new System.Text.StringBuilder();
        if (File.Exists(strfilename))
        {
            try
            {
                using (StreamReader sr = File.OpenText(strfilename))
                {
                    string s = "";
                    while ((s = sr.ReadLine()) != null)
                    {
                        strBuilder.AppendLine(s);
                    }
                }
            }
            catch (Exception ex)
            {
                SendErrorMail(ex);
            }
            finally
            {
                if (System.IO.File.Exists(strfilename))
                    System.IO.File.Delete(strfilename);
            }
        }

        if (strBuilder.ToString().Trim() != "")
            strRetval = strBuilder.ToString();
        else
            strRetval = "";

        return strRetval;
    }

    public static string SaveAsText(string strfilename)
    {
        string fileName = "";
        object miss = System.Reflection.Missing.Value;
        Microsoft.Office.Interop.Word.Document doc = null;
        try
        {
            Microsoft.Office.Interop.Word.Application wordApp = new Microsoft.Office.Interop.Word.Application();
            fileName = Path.GetDirectoryName(strfilename) + @"\" + Path.GetFileNameWithoutExtension(strfilename) + ".txt";
            doc = wordApp.Documents.Open(strfilename, false);
            doc.SaveAs(fileName, Microsoft.Office.Interop.Word.WdSaveFormat.wdFormatDOSText);

        }
        catch (Exception ex)
        {

            SendErrorMail(ex);
        }
        finally
        {
            if (doc != null)
            {
                doc.Close(ref miss, ref miss, ref miss);
                System.Runtime.InteropServices.Marshal.ReleaseComObject(doc);
                doc = null;
            }
            GC.Collect();
            GC.WaitForPendingFinalizers();
        }
        return fileName;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:19:31.707

请参阅以下内容：

[http://msdn.microsoft.com/en-us/library/cc974107%28office.12%29.aspx](http://msdn.microsoft.com/en-us/library/cc974107%28office.12%29.aspx)

[我如何阅读 .docx 文件？](https://stackoverflow.com/questions/3633615/how-can-i-read-docx-file)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-19T03:17:56.730

Microsoft 互操作 Word Nuget

```
 string docPath = @"C:\whereEverTheFileIs.doc";
            Application app = new Application();
            Document doc = app.Documents.Open(docPath);

            string words = doc.Content.Text;
            doc.Close();
            app.Quit(); 
```

# winforms - winforms：从串口读取并绘制实时数据。许多错误/错误

> ID：14851135
> 
> 赞同：0
> 
> 时间：2013-02-13T10:15:33.043
> 
> 标签：winforms, visual-c++, charts, serial-port, ftdi

我正在尝试从 MCU 获取数据，将它们保存到文件中并绘制它们。代码正常运行一段时间，然后随机挂起（有时在 1 秒后，有时在 1 分钟后......！）。此外，串行端口超时也不受尊重，即我没有收到任何超时异常。我正在使用 FTDI232RL 芯片。我唯一一次遇到超时异常是在程序运行时拔掉它。

代码：

```
private: System::Void START_Click(System::Object^  sender, System::EventArgs^  e) {
                 seconds=0;
                 minutes=0;
                 hours=0;
                 days=0;
                 t=0;

                 if((this->comboBox4->Text == String::Empty)||(this->textBox2->Text == String::Empty)||(this->textBox3->Text == String::Empty)){
                     this->textBox1->Text="please select port, save file directory and logging interval";
                     timer1->Enabled=false;

                 }

                 else{ // start assigning

                     w=Convert::ToDouble(this->textBox3->Text);
                     double q=fmod(w*1000,10);
                     if(q!=0){
                         MessageBox::Show("The logging interval must be a multiple of 0.01s");
                     }
                     else{
                         period=static_cast<int>(w*1000);
                         this->interval->Interval = period;
                         try{ // first make sure port isn't busy/open
                             if(!this->serialPort1->IsOpen){
                                 // select the port whose name is in comboBox4 (select port)
                                 this->serialPort1->PortName=this->comboBox4->Text;

                                 //open the port
                                 this->serialPort1->Open();

                                 this->serialPort1->ReadTimeout = period+1;
                                 this->serialPort1->WriteTimeout = period+1;

                                 String^ name_ = this->serialPort1->PortName;
                                 START=gcnew String("S");

                                 this->textBox1->Text="Logging started";
                                 timer1->Enabled=true;
                                 interval->Enabled=true;

                                 myStream=new ofstream(directory,ios::out);
                                 *myStream<<"time(ms);ADC1;ADC2;ADC3;ADC4;ADC5;ADC6;ADC7;ADC8;";
                                 *myStream<<endl;
                                 chart1->Series["ADC1"]->Points->Clear();
                                 chart1->Series["ADC2"]->Points->Clear();
                                 chart1->Series["ADC3"]->Points->Clear();
                                 chart1->Series["ADC4"]->Points->Clear();
                                 chart1->Series["ADC5"]->Points->Clear();
                                 chart1->Series["ADC6"]->Points->Clear();
                                 chart1->Series["ADC7"]->Points->Clear();
                                 chart1->Series["ADC8"]->Points->Clear();

                                 backgroundWorker1->RunWorkerAsync();

                             }
                             else
                             {
                                 this->textBox1->Text="Warning: port is busy or isn't open";
                                 timer1->Enabled=false;
                                 interval->Enabled=false;
                             }
                         }
                         catch(UnauthorizedAccessException^)
                         {
                             this->textBox1->Text="Unauthorized access";
                             timer1->Enabled=false;
                             interval->Enabled=false;
                         }
                     }

                 }
             }

private: System::Void backgroundWorker1_DoWork(System::Object^  sender, System::ComponentModel::DoWorkEventArgs^  e) {

                 while(!backgroundWorker1->CancellationPending){
                     if(backgroundWorker1->CancellationPending){
                         e->Cancel=true;
                         return;
                     }
                     t+=period;
                     if(t<10*period){
                         this->chart1->ChartAreas["ChartArea1"]->AxisX->Minimum=0;
                         this->chart1->ChartAreas["ChartArea1"]->AxisX->Maximum=t+10*period;
                     }
                     else {
                         this->chart1->ChartAreas["ChartArea1"]->AxisX->Minimum=t-10*period;
                         this->chart1->ChartAreas["ChartArea1"]->AxisX->Maximum=t+10*period;
                     }
                     *myStream<<t<<";";

                     for (int n=0;n<8;n++){
                         adc_array[n]= this->serialPort1->ReadByte();

                     }

                     Array::Copy(adc_array,ADC,8);

                     for(int f=0; f<8; f++){
                         *myStream<<ADC[f]<<";";
                     }

                     *myStream<<endl;

                     backgroundWorker1->ReportProgress(t);

                 }
             }

private: System::Void backgroundWorker1_ProgressChanged(System::Object^  sender, System::ComponentModel::ProgressChangedEventArgs^  e) {
                 chart1->Series["ADC1"]->Points->AddXY(t,ADC[0]);
                 chart1->Series["ADC2"]->Points->AddXY(t,ADC[1]);
                 chart1->Series["ADC3"]->Points->AddXY(t,ADC[2]);
                 chart1->Series["ADC4"]->Points->AddXY(t,ADC[3]);
                 chart1->Series["ADC5"]->Points->AddXY(t,ADC[4]);
                 chart1->Series["ADC6"]->Points->AddXY(t,ADC[5]);
                 chart1->Series["ADC7"]->Points->AddXY(t,ADC[6]);
                 chart1->Series["ADC8"]->Points->AddXY(t,ADC[7]);
         } 
```

允许用户以秒为单位定义数据采集的间隔（在代码中，此间隔是转换为双精度后的 w）。在这种情况下，程序会向 MCU 发送一个脉冲，请求新的数据传输。到目前为止，我已经测试了 1 秒的时间间隔（注意，在每个时间间隔内，MCU 发送 8 帧，每个帧代表一个 ADC）。但是，我需要让它在某个时候运行 10 毫秒的间隔。这可能吗？关于如何解决我一开始提到的几个问题的任何想法？

提前致谢

**更新**

只是为了让您了解正在发生的事情：我评论了图表部分并运行了大约 5 分钟的程序，阅读间隔为 1 秒。所以我希望在输出文件中得到大约 5x60=300 个值，但我只得到了 39 个（即从 1 秒到 39 秒）。该程序仍在运行，但数据不再存储。测试是在发布模式而不是调试模式下完成的。在调试模式下，在 serialport->readbyte() 下设置断点不会重现问题。我的猜测是程序和MCU之间的时间问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:28:12.127

你犯了几个标准错误。首先，请勿**在**端口打开时拔下电缆。许多 USB 仿真器不知道如何处理，FTDI 驱动程序对此尤其臭名昭著。他们只是让端口在使用时消失，这总是会给使用该端口的代码带来严重的心脏病发作。无法捕获的异常很常见。

其次，您正在访问工作线程中非线程安全的类的属性。Chart 控件只能在 UI 线程中使用，在工作人员中访问 ChartAreas 属性会给您带来很多痛苦。当您违反线程要求时，获得 InvalidOperationException 是非常典型的，但它并没有始终如一地实现。肮脏包括随机 AccessViolationExceptions、损坏的数据和死锁。

第三，你正在设定完全不切实际的目标。每 10 毫秒更新一次是没有意义的，人眼无法察觉。任何超过 50 毫秒的时间都会变得模糊。当你在电影院看电影时，它会以每秒 24 帧的速度显示。这种故障模式也令人不快，您最终会使用比它可以处理的更多更新来打击 UI 线程（或 Chart 控件）。副作用是 UI 停止绘制自己，它太忙于跟上大量的调用请求。并且您的程序消耗的内存量不断增加，更新队列无限增长。这最终会以 OOM 异常结束，但是消耗 2 吉字节需要一段时间。您需要防止这种情况发生，您需要限制调用的速率。一个简单的线程安全计数器可以解决这个问题。

第四，您在不考虑线程安全的情况下访问多个线程中收集的数据。当 UI 线程正在读取 ADC 数组内容时，worker 正在更改它。各种各样的痛苦，至少是坏数据。一个简单的解决方法是将数据的副本传递给 ReportProgress 方法。通常，通过使用 pull 而不是 push 来解决这类线程问题。通过让 UI 线程调整请求而不是试图让 UI 线程跟上来摆脱消防水管问题。

# c# - Awesomium javascript 相关的崩溃/冻结

> ID：14851140
> 
> 赞同：0
> 
> 时间：2013-02-13T10:16:02.150
> 
> 标签：c#, javascript, winforms, awesomium

我想知道如果加载的脚本中的 JS 有问题，是否有人遇到过与 WebView 相关的 Awesomium 问题，该问题会以浅蓝色屏幕无响应。

我正在使用 C# 和 Awesomium 1.7 RC3 进行开发。例如，如果由于语法错误而无法执行底层 javascript，则整个页面将呈现空白。在 awesomium 之外，它呈现 HTML 并显示页面。我正在处理 Crashed 事件，它没有被调用。该应用程序和 WebView 实际上都在崩溃。我尝试过同时使用窗口化 WebView 实例和 WebControl 实例，但问题仍然存在。

我已经彻底搜索过遇到类似问题的人，但似乎只有我一个。任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:25:20.080

对我来说同样的问题！我不明白

编辑：似乎 LoadHTML 函数的大小有限，所以分页！

我在 loadhtml 上加载最小值，然后使用 executejavascript 函数在 documntready 事件中执行更多脚本。

即使有更大的数据，它似乎也对我有用。

前任 ：

```
Helper.ProjectTimeLine.webControl.DocumentReady += (object s, UrlEventArgs ee) =>
{
    Helper.ProjectTimeLine.webControl.ExecuteJavascript("window.source = " + DynamicJson.Serialize(source));
    Helper.ProjectTimeLine.webControl.ExecuteJavascript("start();");
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T01:20:53.080

我遇到了类似的问题，它执行了蓝屏：

```
string result = webControl1.ExecuteJavascriptWithResult("Game.server_time"); 
```

我通过在最后添加一个空字符解决了这个问题：

```
string result = webControl1.ExecuteJavascriptWithResult("Game.server_time+''"); 
```

# json - 如何获取调用自定义反序列化（ReadJson）的属性名称？

> ID：14851141
> 
> 赞同：2
> 
> 时间：2013-02-13T10:16:03.583
> 
> 标签：json

我有一套西装。我想对某些属性进行自定义反序列化。但我想在单个转换器类中处理它。不想为每个班级单独写。那么有没有办法找到调用 ReadJson 的属性名称？

```
// My Class
public class SomeClass
{
    // Private members
    private double m_nValue;
    private string m_strValue;

    // Properties
    [JsonConverter(typeof(AlfhaConverter))]
    public double Value
    {
        get { return m_nValue; }
        set { m_nValue = value; }
    }

    [JsonConverter(typeof(AlfhaConverter))]
    public string StrValue
    {
        get { return m_strValue; }
        set { m_strValue = value; }
    }
}

// JsonConverter
public class PropertyConverter : JsonConverter
{
    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        //Here i want to find the property name so that i can perform certain steps based on the property
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        serializer.Serialize(writer, value);
    }
} 
```

# android - 如何在 android 应用程序中使用 Droidtext 从评估中打开 pdf 文件

> ID：14851144
> 
> 赞同：2
> 
> 时间：2013-02-13T10:16:04.967
> 
> 标签：android, pdf

我有一些 PDF 文件，我想在不使用 3rd 方应用程序的情况下打开 pdf 文件，

我使用过 PDFViewer，有时无法正确渲染，并且在某些设备上也无法正常工作。

所以我在这个链接中找到了 [https://stackoverflow.com/questions/11027719/is-there-any-library-for-viewing-pdf-in-android-app-other-than-apv](https://stackoverflow.com/questions/11027719/is-there-any-library-for-viewing-pdf-in-android-app-other-than-apv)

他说：“如果你想拥有读写 pdf 文件的能力。你可以考虑使用 DroidText Droidtext 它是 Android 的 iText java 库的一个端口。

我个人用过，感觉不错！”

那么如何使用 jar 文件并在我的应用程序中实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:21:43.783

你检查过“示例”包吗？

[http://code.google.com/p/droidtext/source/browse/trunk/droidTextTest/src/examples/com/lowagie/examples/](http://code.google.com/p/droidtext/source/browse/trunk/droidTextTest/src/examples/com/lowagie/examples/)

为了将该库集成到您的项目中，您可以像其他人一样这样做：

*   从项目主页下载 Jar。
*   创建一个 lib 文件夹并将 jar 放在那里。
*   右键单击您的项目，然后在构建路径中添加您的 jar。

编辑1：嗯，你必须创建一个流：

```
PdfWriter.getInstance(document, new FileOutputStream("Path/to/your/document.pdf"));
document.open(); 
```

编辑2：

我误解了您的问题：我以为您想以编程方式阅读 PDF。DroidText 不是 PDF 查看器。

# ios - coreplot 多轴

> ID：14851149
> 
> 赞同：1
> 
> 时间：2013-02-13T10:16:12.997
> 
> 标签：ios, ipad, core-plot

我使用 coreplot 来绘制图表。该图应该有一个共同的 x 轴和多个 y 轴。我通过创建多个绘图空间获得了多个 y 轴

```
CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;
CPTXYPlotSpace *plotSpace2 = [[[CPTXYPlotSpace alloc] init] autorelease];
CPTXYPlotSpace *plotSpace3 = [[[CPTXYPlotSpace alloc] init] autorelease]; 
```

现在如何在每个绘图空间中绘制点？

绘图仅在默认绘图空间中进行。

如何动态改变绘图空间？因此，绘图是相对于其他绘图空间 x 和 y 范围完成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T00:51:15.590

每个地块被分配到一个地块空间。使用该方法将绘图添加到图形中，`-addPlot:toPlotSpace:`或者在绘图空间已经在图形中之后使用该`plotSpace`属性更改绘图空间。

# javascript - 当新元素附加到的旧元素被隐藏时，为什么新元素被隐藏？

> ID：14851153
> 
> 赞同：0
> 
> 时间：2013-02-13T10:16:26.687
> 
> 标签：javascript, jquery

我的目的是动态加载图像，我使用的是 jQuery。假设在一个网页中，它们是一个`<fieldset>`包含 5 个图像的元素，并且在`<fieldset>`. 当鼠标悬停在链接 A 上时，我喜欢加载从服务器 A 加载的 5 张图像并显示在`<fieldset>`; 将鼠标悬停在链接 B 上时，来自服务器 B 的 5 张图像显示在`<fieldset>`.

我的实现是`<fieldset>A`当鼠标第一次悬停在链接A上时创建图像集A；当鼠标移动到链接B，隐藏`<fieldset>A`，然后创建`<fieldset>B`并加载图像集B。当鼠标回到链接A，隐藏`<fieldset>B`和显示`<fieldset>A`。

这是我的问题，当页面加载并且我将鼠标移到链接 A 上时，该页面充当预期的离子，但是当鼠标移动到链接 B 时，我附加`<fieldset>B`到`<fieldset>A`并隐藏`<fieldset>A`，`<fieldset>B`也不显示。

下面是代码： fieldA 已创建

```
$.ajax({url:dUrl, success:function(result){
    var fieldB = $("<fieldset></fieldset>");
    fieldB.attr("id", cPath);
    fieldB.html(result);
    fieldA.append(fieldB);
    fieldA.hide();
}}); 
```

我是网络编程新手，这是使用 jQuery 的错误方式吗？这是实现动态加载图片的错误方法吗？有人可以帮我吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:22:09.353

而不是使用`.append`（在其他元素中添加元素），您应该尝试使用`.after`（在给定元素之后附加元素）。

# java - 如何动态更改 JLabel 的内容

> ID：14851157
> 
> 赞同：0
> 
> 时间：2013-02-13T10:16:58.010
> 
> 标签：java, swing, jframe, jpanel, jlabel

下面的程序，基本上调用了 JFrame 的 frame.repaint() 来动态地填充框架内部。在同一行中，我想要框架的 2 个标签（西部和东部）并让标签动态变化。我试过很多东西，比如 Jlabel label.repaint()、label.removeAll() 等，但它不起作用。我把代码留下了，干净，以便您可以填写...

```
JFrame frame=new JFrame();
frame.setSize(512, 512);
frame.add(image1);
frame.setVisible(true); 
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

start_sum=0;

while(true)
{
    frame.repaint();
    try {
        Thread.sleep(sleep_for_each_rotation);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    start_sum+=radian/divide_size;             //Some calculation stuff
    if(start_sum>=360)
        start_sum=0;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T10:29:46.597

从代码的外观来看，您正在阻塞事件调度线程 (EDT)。

EDT 负责（除其他外）处理重绘事件。这意味着如果您阻止 EDT，则无法重新绘制任何内容。

您遇到的另一个问题是，您不应该从除 EDT 之外的任何线程创建或修改任何 UI 组件。

查看[Swing 中的并发以](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)获取更多详细信息。

下面的例子简单地使用了 a `javax.swing.Timer`，但是从事物的声音来看，你可能会发现[Swing Worker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)更有用

```
public class TestLabelAnimation {

    public static void main(String[] args) {
        new TestLabelAnimation();
    }

    public TestLabelAnimation() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private JLabel left;
        private JLabel right;

        public TestPane() {
            setLayout(new BorderLayout());

            left = new JLabel("0");
            right = new JLabel("0");

            add(left, BorderLayout.WEST);
            add(right, BorderLayout.EAST);

            Timer timer = new Timer(250, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    left.setText(Integer.toString((int)Math.round(Math.random() * 100)));
                    right.setText(Integer.toString((int)Math.round(Math.random() * 100)));
                }
            });

            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();

        }

    }

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-13T10:19:08.857

只需使用`JLabel.setText (String)`以下示例中的方法：

```
public static void main (String[] args) throws Exception {
    final JLabel label = new JLabel (String.valueOf (System.currentTimeMillis()));

    JFrame frame = new JFrame ();
    frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
    frame.getContentPane().setLayout (new BorderLayout ());
    frame.getContentPane().add (label, BorderLayout.CENTER);
    frame.pack ();
    frame.setVisible(true);

    while (true)
    {
        final String newText = String.valueOf (System.currentTimeMillis ());

        SwingUtilities.invokeLater (new Runnable ()
        {
            @Override
            public void run() {
                label.setText (newText);
            }
        });

        Thread.sleep (100L);
    }
} 
```

# android - 在android中获取保存在sdcard中的文件的正确路径

> ID：14851158
> 
> 赞同：2
> 
> 时间：2013-02-13T10:16:58.970
> 
> 标签：android, android-sdcard

我在一个活动中录制声音并保存在 sdcard 中。现在我必须在另一个下一个活动中播放录音。我正在从`Uri`和获取文件路径`getabsolutepath()`。

但是有了 Uri 我得到了这样的路径

```
file:///mnt/sdcard/myfolder/filename.mp3 
```

和`getabsolutepath()`我一样得到路径。

```
/mnt/sdcard/myfolder/filename.mp3 
```

我在 emulator.so 中运行应用程序时得到的这个东西有什么可以让我将文件路径作为 /myfolder/filename.mp3 获取的。

/myfolder/filename.mp3 想要保存在一些字符串中，以便传递给我上面提到的其他活动。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T10:23:33.590

尝试这个，

```
 File sdCardRoot = Environment.getExternalStorageDirectory();
 File myDir = new File(sdCardRoot, "Your file name"); 
```

您将在此处获得目录路径`myDir`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:53:02.523

如果您正在使用外部存储，请始终使用 Environment.getExternalStorageDirectory() 否则请提供内部位置的路径

# wordpress - 如何使用 wp-cli 调用从 wp-config.php 获取数据库名称？

> ID：14851160
> 
> 赞同：3
> 
> 时间：2013-02-13T10:17:00.607
> 
> 标签：wordpress

我正在编写一个用于将 Wordpress 安装从一个地方迁移到另一个地方的 perl 脚本。在这项工作中，我需要使用 wp-cli 调用从 wp-config 文件中获取 wordpress 数据库名称。所以请让我知道如何从 perl 脚本调用 wp-cli 函数以从 wp-config.php 获取数据库名称。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-15T01:41:00.250

假设您已经知道如何从 Perl 调用外部进程，这就是您需要的 wp-cli 命令：

```
wp eval 'echo DB_NAME;' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-03-05T18:53:04.790

另一种不使用 eval 的方法是运行

```
wp config get DB_NAME 
```

# c++ - 为什么 std::async 复制它的 const & 参数？

> ID：14851163
> 
> 赞同：17
> 
> 时间：2013-02-13T10:17:14.373
> 
> 标签：c++, gcc, asynchronous, c++11, std

我正在尝试通过使用 std::async 来加速程序。假设我有一个功能

```
T* f (const T& t1, const T& t2, const T& t3) 
```

其中 T 是一种复制成本很高的类型。我有几个具有不同参数的 f 独立调用，我尝试将它们与 std::async 并行化，大致如下：（其中 m_futures 是正确类型的期货的 std::vector）。

```
for (...) {
   m_futures.push_back (
       std::async(
           std::launch::async,
           f,
           a,b,c));
} 
```

我观察到上面的代码减慢了我的程序的执行速度。我用 gdb 逐步完成了它，当创建未来时，T 的复制构造函数被调用了 3 次。这是为什么？参数 a,b,c 是堆分配的，但编译器可能不知道吗？我可以以某种方式使其明确吗？

std::async 创建参数的副本是否总是如此，即使它们应该通过 const 引用传递？我能以某种方式避免这种情况吗？在我天真的想法中，应该只传递一个指向函数的不同调用的指针（无论如何它只能从内存中读取。）如果这很重要，我在 Linux 上使用 gcc-4.6.3。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-13T10:19:52.827

只存储引用是不安全的，因为没有什么可以保证不存在数据竞争（更深刻的是，对象的*存在*，正如@utapistim 在她可悲地删除的帖子中所说）。

如果你真的想要一个参考而不是一个副本，并且*你*愿意赌上你的生命是正确的，那么你可以简单地使用一个参考包装器：

```
std::async(std::launch::async, f, std::cref(a), std::cref(b), std::cref(c)) 
```

# iphone - 在项目中添加静态库，显示红色标记

> ID：14851165
> 
> 赞同：0
> 
> 时间：2013-02-13T10:17:25.227
> 
> 标签：iphone, static-libraries

我正在尝试在项目中添加一个自定义静态库，它正在添加但显示红色，这意味着我认为文件丢失。为什么会这样。下面是图片。为什么会这样，请指导。

![在此处输入图像描述](../Images/0299dd41dc82882513b1f197660bbb4e.png)

请指导以上。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:32:37.357

您必须`libadSdkProject.a`在项目中手动添加，但您必须`adSdkProject.xcodeProject`单独构建，它将制作产品 `libadSdkProject.a`，然后您可以将该产品添加到`(libadSdkProject.a)`项目的链接二进制文件中。

# ios - 是否可以在 iOS 智能横幅中使用 LinkShare 签名？

> ID：14851169
> 
> 赞同：1
> 
> 时间：2013-02-13T10:17:40.110
> 
> 标签：ios, affiliate

我们正在使用[Smart App Banners](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html)来推广我们的 iOS 应用程序，并且我们正在通过 Apple`affiliate-data`我们来跟踪有多少人通过横幅安装了我们的应用程序。

但是在正常的 iTunes LinkShare 附属链接中，我可以将“签名”参数`u1`传递给我的链接，这样我就可以运行两个广告，一个带有签名`u1=red`，另一个`u1=blue`，让我可以看到有多少销售来自我的红色广告有多少来自我的蓝色广告。

是否可以使用智能应用横幅传递签名参数？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T22:03:00.327

iTunes 智能应用横幅中的链接是指向 iTunes 商店的直接链接。

如果您监控网络流量，您会看到点击 Smart App Banner 后进入商店的链接如下所示：

[https://itunes.apple.com/us/app/yelp/id284910350?mt=8&siteID=30&parnterId=12345](https://itunes.apple.com/us/app/yelp/id284910350?mt=8&siteID=30&parnterId=12345)

为了使用“u1”值，您的链接必须在联属网络上运行 - 该链接看起来像这样：

[http://click.linksynergy.com/fs-bin/stat?id=12345&offerid=146261&type=3&subid=0&tmpid=1826&RD_PARM1=https%253A%252F%252Fitunes.apple.com%252Fus%252Fapp%252Fyelp%252Fid284910350%253Fmt% 253D8%2526partnerId%253D30&u1=红色](http://click.linksynergy.com/fs-bin/stat?id=12345&offerid=146261&type=3&subid=0&tmpid=1826&RD_PARM1=https%253A%252F%252Fitunes.apple.com%252Fus%252Fapp%252Fyelp%252Fid284910350%253Fmt%253D8%2526partnerId%253D30&u1=red)

链接不会通过附属网络进行跟踪 - 因此您无法附加签名跟踪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-05T23:31:40.790

我知道这是一个旧线程，但如果有人遇到同样的问题，Itunes 确实通过 Performance Horizo​​ns Group (PHG) 提供了一个附属计划。

[https://itunes.phgconsole.performancehorizo​​n.com/login/itunes/](https://itunes.phgconsole.performancehorizon.com/login/itunes/)

他们提供带有 subid 的跟踪，因此使用他们的链接可以赚取通过您的应用程序推荐的 Itunes 销售佣金，并使用 subid 跟踪单个横幅/活动。

# dll - 使用 ikvm.net 警告将 .jar 转换为 .dll？

> ID：14851170
> 
> 赞同：1
> 
> 时间：2013-02-13T10:17:40.337
> 
> 标签：dll, jar, android-activity, ikvm

我做了一个android项目库，在这个项目中只有一个类。该类用于从图库中获取所选图像的路径或从相机中获取保存的图像。

这是课程。

```
public class ImageBrowse extends Activity  {
private static final int GALLERY_REQUEST = 1;
private static final int CAMERA_REQUEST = 1888;
private Uri selectedImageUri;
private static String imageRealPath = null;
private String imageName = null;
public String BrowseImageFromGallery(){
    Intent galleryIntent = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
    startActivityForResult(galleryIntent, GALLERY_REQUEST);
    if(imageRealPath != null)
    {
        return imageRealPath;
    }
    return null;
}

public String TakeImageFromCamera(){

    TakeImage();
    return imageRealPath;
}

@Override 
protected void onActivityResult(int requestCode, int resultCode, Intent intent ){

    switch (resultCode){

    case GALLERY_REQUEST : {
        selectedImageUri = intent.getData();
        imageRealPath = GetRealPathFromUri(selectedImageUri);
    }
    break;

    case CAMERA_REQUEST : {
        imageRealPath = GetRealPathFromUri(selectedImageUri);
    }
    break;
    }

}

private String GetRealPathFromUri(Uri imageUri) {

    try
    {
        String[] proj = {MediaStore.Images.Media.DATA};
        @SuppressWarnings("deprecation")
        Cursor cursor = managedQuery(imageUri, proj, null, null, null);
        int column_Index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_Index);
    }
    catch(Exception e)
    {
        return imageUri.getPath();
    }
}

private void TakeImage() {
    ContentValues values = new ContentValues();
     imageName = String.valueOf(System.currentTimeMillis());
    values.put(MediaStore.Images.Media.TITLE, imageName);
    selectedImageUri = getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
            values);

    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    intent.putExtra(MediaStore.EXTRA_OUTPUT, selectedImageUri);
    startActivityForResult(intent, CAMERA_REQUEST);

} 
```

}

> 我想从.net 中使用这个类，因此我使用了 IKVM.NET。但我收到警告无法编译类 ImageBrowse。下面是警告的图像。

![警告](../Images/5fb24648ca044851131f1f065bc61ac6.png)

> 如何删除此警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T15:14:28.787

您不能使用 IKVM 转换 Android 项目。IKVM 仅适用于 Java SE 和 Java EE 文件。IKVM 不包含 Android 运行时。

您还需要将 IKVM 运行时添加到您的项目中。这是 40 MB。这对于一个类来说是一个很大的开销。将此类的源代码转换为 C# 更简单。

# php - 在 PHP 中查找具有相同键的多个日期之间的特定差异

> ID：14851184
> 
> 赞同：0
> 
> 时间：2013-02-13T10:18:25.437
> 
> 标签：php, arrays, date

我正在从 SQL 语句中获取一些元素，并将它们放入一个数组中。

我想要做的是找到数组中这些元素的日期之间的具体差异，并将它们添加到另一个数组中。

数据库的结果如下所示（key=>value）：

```
array(
    "10"=>"13-02-2013 09:47:16", 
    "10"=>"13-02-2013 09:47:00", 
    "10"=>"13-02-2013 09:46:50",  
    "10"=>"13-02-2013 09:42:50", 
    "20"=>"13-02-2013 09:30:50", 
    "20"=>"13-02-2013 09:20:50", 
    "30"=>"13-02-2013 09:10:15"
); 
```

我需要找到那些具有相同 ID（键）的元素，其中日期之间的差异小于 60 秒。例如，我想要一个这样的输出：

```
array(
    "10"=>"13-02-2013 09:47:16", 
    "10"=>"13-02-2013 09:47:00", 
    "10"=>"13-02-2013 09:46:50"
); 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:30:46.550

一个数组不能多次使用同一个键。每个元素都有唯一的键。
每当您尝试读取此数组时，它将显示：

```
Array
(
[10] => 13-02-2013 09:42:50
[20] => 13-02-2013 09:20:50
[30] => 13-02-2013 09:10:15
) 
```

如果要检索键为“10”的所有元素，则必须在从数据库中检索数据时使用多维数组。

```
$new_arr = array();
// Put database data object in place of $arr
foreach($arr as $k => $v){
    if(array_key_exists($k,$new_arr)){
        $new_arr[$k][] = $v;
    }
    else{
        $new_arr[$k] = $v;
    }
} 
```

这里 $new_arr 将采用以下形式：

```
$new_arr = array("10"=> array([0] => '13-02-2013 09:47:16'),
                        array([1] => '13-02-2013 09:47:00'),
                        array([2] => '13-02-2013 09:46:50'),
                 "20" => '',
                  ........
               ) 
```

然后你可以选择任何你想要的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:32:19.537

嗯，我引用 abc667 和 Jon，但是如果你想比较日期，你可以用一个简单的 for 扫描所有数组，并比较数组中的当前日期和下一个.. 如果你使用 for 和一个名为 $cont 的变量，如果 $ cont = 1 第一个日期是 $array[1] ($array[$cont])，第二个日期是 $array[2] ($array[$cont+1])。我已经做了一个简单的例子（如果它运行了，我希望看到它，但我希望;P）看起来你的数组在我的例子中被称为**$array_dates**并且 ivent 创建了新的数组，但它很简单，你在 for 循环中添加它。

```
<?php

// example >>> $array_dates[1] = '2013-2-13 12:30:00'; 

// scan all the array with the date
for ($cont=0; $cont<count($array_dates); $cont++)
    {
    $date_1 = $array_dates[$cont];
    $date_2 = $array_dates[$cont+1];

list($data1,$His1) = explode(' ',$date_1); 
list($year1,$month1,$day1) = explode('-',$data1); 
list($hour1,$min1,$sec1) = explode(':',$His1); 

list($data2,$His2) = explode(' ',$date_2); 
list($year2,$month2,$day2) = explode('-',$data2); 
list($hour2,$min2,$sec2) = explode(':',$His2); 

$diff=mktime($hour2,$min2,$sec2,$month2,$day2,$year2)-mktime($hour1,$min1,$sec1,$month1,$day1,$year1); 

$diff = mktime($hour2, $min2,$sec2, $month2,$day2,$year2) - mktime($hour1,$min1,$sec1, $month1,$day1,$year1); 

$diff1  = floor($diff % (60*60*24)); 
$diff2  = floor($diff1 % (60*60)) ; 
$sec    = $diff2 % 60; 

echo "<br>Seconds difference from <u>$date_1</u> and <u>$date_2</u>: <em>$sec</em><br>";

} //end of the for cycle
?> 
```

我希望你会欣赏它，最好的问候。

编辑：

## 你必须把月份放在我放的格式中，因为 mktime 在数字之前会出现零（它认为是八进制！）......但是你可以在 php.net 中读取日期格式

# scala - 在 Play Framework 2 中自定义验证消息

> ID：14851188
> 
> 赞同：1
> 
> 时间：2013-02-13T10:18:42.583
> 
> 标签：scala, internationalization, validation, playframework-2.0

我正在尝试自定义 Play 中的验证消息。

我在文件中找到了以下条目[`$PLAY_HOME/src/main/resources/messages`](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/resources/messages)：

```
error.max=Must be less or equal to {0} 
```

我在文件 conf/messages 中重新定义了验证消息：

```
error.max=TEST, Maximal: {0} 
```

但我仍然收到默认消息。我重新启动了播放应用程序，但它仍然无法正常工作。

我究竟做错了什么？

编辑：

解决方案是在特定的（依赖于语言的）消息文件中定义消息。当我将此行添加到我的文件 conf/messages.de 中时：

```
error.max=TEST GERMAN, Maximal: {0} 
```

奇迹般有效！否则 conf/messages 中的条目将被忽略（如上所述）。非常违反直觉，我会说...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T20:02:51.943

我有一个类似的问题（虽然我使用的是不同的语言），也许它也适用于你。

我必须将以下内容放在我的控制器中（否则它将取决于浏览器请求的语言）。

```
implicit val defaultLang = Lang.availables.headOption.getOrElse(Lang.defaultLang) 
```

在我看来，我必须为该语言添加一个额外的隐含参数：

```
@(title:String)(implicit lang:play.api.i18n.Lang) 
```

我不确定您的浏览器要求什么语言，但这可能会导致它恢复为默认消息。上述构造确保它使用配置中定义的可用语言。我不确定，但它可能需要您将消息文件重命名为`messages.en-US`（取决于您的配置）。

# php - 日期函数显示两个日期之间的所有日期

> ID：14851190
> 
> 赞同：10
> 
> 时间：2013-02-13T10:18:46.497
> 
> 标签：php, date

是否有任何 PHP 函数可以显示两个日期之间的所有日期？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-13T10:21:24.883

有[**`DatePeriod`**](http://php.net/dateperiod)课。

**例子：**

```
$begin = new DateTime('2013-02-01');
$end = new DateTime('2013-02-13');

$daterange = new DatePeriod($begin, new DateInterval('P1D'), $end);

foreach($daterange as $date){
    echo $date->format("Y-m-d") . "<br>";
} 
```

（P1D 代表一天的期限，请参阅[**`DateInterval`**](http://www.php.net/manual/en/dateinterval.construct.php)更多文档）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T10:23:35.413

您也可以查看此功能

```
 $day = 86400; // Day in seconds  
        $format = 'Y-m-d'; // Output format (see PHP date funciton)  
        $sTime = strtotime($start_date); // Start as time  
        $eTime = strtotime($end_date); // End as time  
        $numDays = round(($eTime - $sTime) / $day) + 1;  
        $days = array();  

        for ($d = 0; $d < $numDays; $d++) {  
            $days[] = date($format, ($sTime + ($d * $day)));  
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-10T09:33:26.977

```
 $start_date  = '2020/09/01';
    $end_date    = '2020-09-03';

    $new_date = new DateTime($end_date);
    $new_date->add(new DateInterval('P1D'));
    $end_date = $new_date->format('Y-m-d');

    $period = new DatePeriod(
    new DateTime($start_date),
    new DateInterval('P1D'),
    new DateTime($end_date)
   );

   print_r($period);
   foreach ($period as $key => $value) {
     echo $value->format('Y-m-d')  .'<br>';      
   } 
```

打印：
2020-09-01
2020-09-02
2020-09-03

# ibm-mq - CCSID 1208 是否支持字符 §

> ID：14851193
> 
> 赞同：2
> 
> 时间：2013-02-13T10:18:51.537
> 
> 标签：ibm-mq, messagebroker, ibm-integration-bus, extended-sql

我需要知道 CCSID 1208 是否支持字符 §。一般来说，我们如何找到特定 CCSID 支持的字符列表。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T13:55:58.787

正如 nitgeek 所说，是的，它受支持，并且 1208 是 UTF-8（3 级）。

这是[IBM 的 CCSID 的列表](http://www-01.ibm.com/software/globalization/ccsid/ccsid_registered.html)。您可以深入查看代码页 - 例如，这里是[37 (US/Canada)](http://www-01.ibm.com/software/globalization/cp/cp00037.html)的代码页。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T13:34:02.603

是的，它受支持。

仅供参考，CCSID 1208 相当于 UTF-8。

以下是 UTF-8 支持的[字符 UTF-8 支持的字符](http://www.utf8-chartable.de/)

# android - 从另一个片段调用一个片段中的函数的正确方法是什么？

> ID：14851206
> 
> 赞同：1
> 
> 时间：2013-02-13T10:19:39.553
> 
> 标签：android, android-fragments

有人能告诉我从另一个片段调用一个片段中的函数的正确方法是什么吗？我将一个片段的对象作为可序列化传递给另一个片段。但我认为那不是正确的方法。

我看到了[这个问题](https://stackoverflow.com/questions/7850583/how-do-i-call-functions-in-fragment-from-another)，但接受的答案只是说活动应该调解片段之间的所有通信。有人可以告诉我通过使用活动作为中介来访问同一活动中的其他片段的代码是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:29:45.100

请尝试阅读[使用片段的指南](http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity)。

如果您希望**Fragment_A**与**Fragment_B**通信，则应在 **Fragment_A**（父活动必须实现）内定义一个接口，以将数据从**Fragment_A**发送到父活动，然后从父活动将该数据发送到**Fragment_B**。

我希望我有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:31:21.277

为活动中的共享数据创建 getter/setter 方法，在一个片段中

```
((Appropriate Cast)getActivity).setSharedData(type Data)  // saves data to be shared 
```

在其他片段

```
((Appropriate Cast )getActivity).getSharedData()   // returns shared data 
```

# c++ - 我怎样才能释放 ostringstream？

> ID：14851214
> 
> 赞同：0
> 
> 时间：2013-02-13T10:19:58.397
> 
> 标签：c++

我有以下代码：

```
int n=2;
ostringstream convert;   // stream used for the conversion
convert << n; 
string query= convert.str(); 
```

我怎样才能释放 ostringstream？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T10:21:24.110

终身管理：

```
std::string query;
int n = 2;

{
    std::ostringstream oss;
    oss << n;
    query = oss.str();
} 
```

更短，但更难阅读：

```
int n = 2;
std::string query
          = static_cast<std::ostringstream &>(std::ostringstream() << n).str(); 
```

可能更好，具体取决于您的情况：

```
auto query = std::to_string(2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:22:28.837

让它超出范围：

```
int n=2;
string query;
{
    ostringstream convert;
    convert << n;
    query = convert.str();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T10:23:07.867

你不需要释放流。流在堆栈上，所以它会自动销毁。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T10:38:00.027

> 我怎样才能释放 ostringstream？

如果“免费”是指实例的“释放资源”，那么让它超出范围。

```
int n=2;
string query;
{
    ostringstream convert;   // stream used for the conversion
    convert << n; 
    qyuery = convert.str();
} 
```

如果您的意思是“清除内容”，那么您可以使用：

```
int n=2;
ostringstream convert;   // stream used for the conversion
convert << n; 
string query1 = convert.str();
// clear the contents & reset error bits (thanks @PeterWood)
convert.str("");
convert.clear();
convert << n + 1;
string query2 = convert.str(); 
```

# xml - XSLT 将元素从源复制到 CDATA 部分

> ID：14851215
> 
> 赞同：5
> 
> 时间：2013-02-13T10:19:57.763
> 
> 标签：xml, xslt, soap, namespaces, cdata

我正在将一个简单的 SOAP XML 消息转换为一个更扩展的 SOAP XML 消息。我几乎可以正常工作，但我无法解决最后两个问题。我的问题是：

1.  元素之后的所有元素都应位于 CDATA 部分中。我尝试使用“cdata-section-elements”，但无法正常工作。
2.  元素应该是这样的

我的源 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
  <SOAP-ENV:Header/>
  <SOAP-ENV:Body>
    <test>
      <element1>123</element1>
      <element2>123</element2>
    </test>
  </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我的 XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" exclude-result-prefixes="fn xs SOAP-ENV">
<xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes" />

<!-- Special rule to match the document root only -->
<xsl:template match="/*">
    <s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope">
        <xsl:namespace name="a" select="'http://www.w3.org/2005/08/addressing'"/>
        <xsl:apply-templates select="@*|node()"/>
    </s:Envelope>
</xsl:template>

<!-- Expand soap header -->
<xsl:template match="SOAP-ENV:Header">
    <xsl:element name="s:{local-name()}" namespace="http://www.w3.org/2003/05/soap-envelope">
        <xsl:element name="a:Action" namespace="http://www.w3.org/2005/08/addressing">
            <xsl:attribute name="s:mustUnderstand" namespace="http://www.w3.org/2003/05/soap-envelope">1</xsl:attribute>
            <xsl:text>http://www.ortec.com/CAIS/IApplicationIntegrationService/SendMessage</xsl:text>
        </xsl:element>
    </xsl:element>
</xsl:template>

<!-- Change soap body -->
<xsl:template match="SOAP-ENV:Body">
    <xsl:element name="s:{local-name()}" namespace="http://www.w3.org/2003/05/soap-envelope">
        <xsl:element name="cais:SendMessage" namespace="http://www.ortec.com/CAIS">
            <xsl:element name="cais:message" namespace="http://www.ortec.com/CAIS">
                <!-- copy the rest -->
                <xsl:apply-templates select="child::node()"/>
            </xsl:element>
            <xsl:element name="cais:commandName" namespace="http://www.ortec.com/CAIS">Import</xsl:element>
        </xsl:element>
    </xsl:element>
</xsl:template>

<!-- template for the copy of the rest -->
<xsl:template match="@*|node()">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
</xsl:template>
</xsl:stylesheet> 
```

我现在使用这个 XSLT 收到的错误输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<s:Envelope xmlns:a="http://www.w3.org/2005/08/addressing" xmlns:s="http://www.w3.org/2003/05/soap-envelope">
  <s:Header>
    <a:Action s:mustUnderstand="1">http://www.ortec.com/CAIS/IApplicationIntegrationService/SendMessage</a:Action>
  </s:Header>
  <s:Body>
    <cais:SendMessage xmlns:cais="http://www.ortec.com/CAIS">
      <cais:message>
        <test xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
          <element1>123</element1>
          <element2>123</element2>
        </test>
      </cais:message>
      <cais:commandName>Import</cais:commandName>
    </cais:SendMessage>
  </s:Body>
</s:Envelope> 
```

我想要的输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<s:Envelope xmlns:a="http://www.w3.org/2005/08/addressing" xmlns:s="http://www.w3.org/2003/05/soap-envelope">
  <s:Header>
    <a:Action s:mustUnderstand="1">http://www.ortec.com/CAIS/IApplicationIntegrationService/SendMessage</a:Action>
  </s:Header>
  <s:Body>
    <cais:SendMessage xmlns:cais="http://www.ortec.com/CAIS">
      <cais:message>
        <![CDATA[
        <test>
          <element1>123</element1>
          <element2>123</element2>
        </test>
        ]]>
      </cais:message>
      <cais:commandName>Import</cais:commandName>
    </cais:SendMessage>
  </s:Body>
</s:Envelope> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T10:57:06.817

以下工作可能吗？：

```
<xsl:template match="SOAP-ENV:Body">
    <xsl:element name="s:{local-name()}" namespace="http://www.w3.org/2003/05/soap-envelope">
        <xsl:element name="cais:SendMessage" namespace="http://www.ortec.com/CAIS">
            <xsl:element name="cais:message" namespace="http://www.ortec.com/CAIS">
                <!-- copy the rest -->
                <xsl:text disable-output-escaping="yes">&lt;![CDATA[</xsl:text>
                <xsl:apply-templates select="child::node()"/>
                <xsl:text disable-output-escaping="yes">]]&gt;</xsl:text>
            </xsl:element>
            <xsl:element name="cais:commandName" namespace="http://www.ortec.com/CAIS">Import</xsl:element>
        </xsl:element>
    </xsl:element>
</xsl:template> 
```

当我以这种方式修改 XSLT 并在您的示例输入上运行它时，我得到：

```
<s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope">
  <s:Header><a:Action s:mustUnderstand="1" xmlns:a="http://www.w3.org/2005/08/addressing">http://www.ortec.com/CAIS/IApplicationIntegrationService/SendMessage</a:Action></s:Header>
  <s:Body><cais:SendMessage xmlns:cais="http://www.ortec.com/CAIS"><cais:message>
  <![CDATA[
    <test xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
      <element1>123</element1>
      <element2>123</element2>
    </test>
  ]]>
  </cais:message>
  <cais:commandName>Import</cais:commandName></cais:SendMessage></s:Body>
</s:Envelope> 
```

命名空间声明仍然存在，但这并不重要。

如果你真的想摆脱 上的命名空间声明`<test>`，你可以用这个替换你的身份模板：

```
 <xsl:template match="@* | node()" priority="-2">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="*">
    <xsl:element name="{name()}">
      <xsl:apply-templates select="@* | node()" />
    </xsl:element>
  </xsl:template> 
```

我已经验证这似乎有效。

顺便说一句，如果您提前知道元素的前缀和名称，则不需要使用`xsl:element`或`namespace`属性。如果您在`xsl:spreadsheet`元素中声明命名空间：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
                   xmlns:xs="http://www.w3.org/2001/XMLSchema" 
                   xmlns:fn="http://www.w3.org/2005/xpath-functions" 
                   xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" 
                   xmlns:s="http://www.w3.org/2003/05/soap-envelope"
                   xmlns:cais="http://www.ortec.com/CAIS"
                   exclude-result-prefixes="fn xs SOAP-ENV cais"> 
```

然后你可以这样做：

```
<xsl:template match="SOAP-ENV:Body">
    <xsl:element name="s:{local-name()}">
        <cais:SendMessage>
            <cais:message>
                <!-- copy the rest -->
                <xsl:text disable-output-escaping="yes">&lt;![CDATA[</xsl:text>
                <xsl:apply-templates select="child::node()"/>
                <xsl:text disable-output-escaping="yes">]]&gt;</xsl:text>
            </cais:message>
            <cais:commandName>Import</cais:commandName>
        </cais:SendMessage>
    </xsl:element>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-13T10:20:32.947

`copy-namespace="no"`与元素一起使用`xsl:copy-of`以避免元素中命名空间的边界`test`：

```
<xsl:template match="SOAP-ENV:Body">
 <xsl:element name="s:{local-name()}">
   <xsl:element name="cais:SendMessage">
   <xsl:element name="cais:message">
   <xsl:text disable-output-escaping="yes">&lt;![CDATA[</xsl:text>
   <xsl:copy-of select="test" copy-namespaces="no"/>
   <xsl:text disable-output-escaping="yes">]]&gt;</xsl:text>
  </xsl:element>
  <xsl:element name="cais:commandName"><xsl:text>Import</xsl:text>
</xsl:element>
  </xsl:element>
 </xsl:element>
</xsl:template>
</xsl:stylesheet> 
```

# c# - 阿拉伯语在 Window 7 中有效，但在 Windows XP 中再次反转 - WinForms

> ID：14851218
> 
> 赞同：0
> 
> 时间：2013-02-13T10:20:03.237
> 
> 标签：c#, winforms, internationalization, right-to-left

我有一个多语言的 c# 应用程序。

现在第二语言是阿拉伯语。

问题：

在资源文件中，我添加了如下字符串：

你好。

它在 XP 中显示为 Hello 而在 Windows 7 中显示为 olleH

任何帮助表示赞赏

编辑：

我们反转字符串，即 Hello 到 oellH，因为在复制阿拉伯字符串时，它们被反转

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:18:32.023

问题出在XP而不是Windows 7。

对于 XP，我需要转到控制面板中的**区域和设置**。

单击第二个选项卡“语言”

单击泰语.. 支持复选框

然后点击确定

它会要求 XP 光盘

就是这样......

# objective-c - 如何在 ACAccountStore 中重置用户的决定？

> ID：14851220
> 
> 赞同：1
> 
> 时间：2013-02-13T10:20:03.440
> 
> 标签：objective-c, cocoa, social-framework

如果在 OS X 中配置，我正在使用 ACAccountStore 来访问用户的 Facebook 帐户。调用 后`requestAccessToAccountsWithType:options:completion:`，会向用户显示一个对话框，询问访问 Facebook 帐户的权限。两个可用选项是“是”和“否”。如果用户在此对话框中选择“否”，则不会授予访问权限，这非常有意义。不幸的是，我还没有找到在稍后阶段再次向用户提出相同问题的方法。每次进一步调用都会`requestAccessToAccountsWithType:options:completion:`立即响应被拒绝的请求。不再弹出对话框。

我现在的问题是是否可以以某种方式重置用户的初始决定以再次显示请求对话框？

# html - 在课程之后定位图像

> ID：14851224
> 
> 赞同：0
> 
> 时间：2013-02-13T10:20:19.760
> 
> 标签：html, css

我正在使用一个类来设置一些文本的样式，以及我想在类之后（文本右侧）放置图像的内容，显然！，我正在努力。这是我到目前为止所得到的。

```
<a href="#" class="tickbutton">Check your eligibility and apply now!</a>

.tickbutton {
  color: #fff;
  font-size: 15px;
  background: #5460ac url(../../images/tick.png) no-repeat right;
background-position:150% 50%;
  border: none;
  border-radius: 6px;
  -webkit-border-radius: 6px;
  -moz-border-radius: 6px;
  padding: 10px 16px;
  margin-bottom: 18px;
  display: inline-block;
width:auto;
} 
```

这会将图像（透明刻度）放置在容器内，我想将其定位在右侧。我试过使用 tickbutton:after 但它仍然继承了背景颜色，所以它“看起来”仍然在容器内。

这是可行的吗？

谢谢，克雷格

# mysql - 如何在 MySQL 中使用 REGEXP 使用 SUBSTRING

> ID：14851231
> 
> 赞同：0
> 
> 时间：2013-02-13T10:20:40.100
> 
> 标签：mysql, regex, substring

我有一种情况，我必须使用 MySQL 从描述中提取正则表达式。

描述：

> Lorem ipsum dolor sit amet, consectetur adipiscing elit。Sed ac magna enim，欧盟 adipiscing sapien。Cras lacinia vulputate elit, sed adipiscing felis interdum a. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus。Phasellus 坐在 amet ante orci。**D9801** Quisque dignissim posuere quam，id suscipit nisl scelerisque nec。

其中**D9801**是正则表达式。每个描述都有不同的内容，但我的 reg exp 应该如下所示：`REGEXP 'D[[:digit:]]{4}'`

我知道 REGEXP 只返回真/假值，但我怎样才能使查询只返回**D9801**值？

我试过这样的事情：

```
SELECT 
SUBSTRING (description, LOCATE(REGEXP 'D[[:digit:]]{4}', description), 5)
FROM (
   SELECT "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed ac magna enim, eu adipiscing sapien. Cras lacinia vulputate elit, sed adipiscing felis interdum a. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Phasellus sit amet ante orci. **D9801** Quisque dignissim posuere quam, id suscipit nisl scelerisque nec." AS description
) temp 
```

但现在我知道这是完全错误的......任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:27:05.703

MySQL 不提供此功能。但是您可以查看[udf](https://launchpad.net/mysql-udf-regexp)。

仔细看看这个函数：`REGEXP_SUBSTR(text, pattern [,position [,occurence [,mode]]])`

# c++ - 使用 ostringstream 将 double 格式化为字符串

> ID：14851232
> 
> 赞同：3
> 
> 时间：2013-02-13T10:20:41.487
> 
> 标签：c++, stringstream, number-formatting

我想将双精度转换为字符串，在点后四舍五入到 2 位小数。我希望 1.009 显示为“1.01”，而 1.0 显示为“1”。这是我尝试过的：

```
std::ostringstream oss;
oss << std::fixed << std::setprecision(2) << std::noshowpoint  << 1.0; 
```

它输出“1.00”，即使我从未设置宽度甚至指定`std::noshowpoint`. 如何实现所需的表示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T10:24:05.650

最佳解决方案：

```
inline double twodec(double n) { return floor(n * 100 + 0.5) / 100; }

oss << twodec(1.0) << ' ' << twodec(1.009); 
```

讨论

来自[http://www.cplusplus.com/reference/ios/fixed/](http://www.cplusplus.com/reference/ios/fixed/)（斜体字）

> 当 floatfield 设置为 fixed 时，浮点值使用定点表示法写入，这意味着该值*在小数部分中的位数与精度字段指定的位数完全相同，*并且没有指数部分。

所以，“固定”是行不通的。

也就是说，我能想到的唯一方法是：

*   首先将数字四舍五入到所需的精度（即`floor(n * 100 + 0.5) / 100`），然后使用默认表示（即不指定固定或科学或精度 - 如果`fixed`或`scientific`有效，首先用 清除它们`std::cout.unsetf(std::ios::floatfield)`）。
*   根据您希望在点之前和之后看到的最大数字位数动态设置精度（这是精度指定的）；为此，您可以计算出小数点前的部分有多少位（可能使用 log base 10）并添加 2
*   将结果流式传输到 a `ostringstream`，然后删除尾随 0 和任何 '.' （相当可怕）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-11T07:57:55.510

这是我基于托尼回答的最终解决方案：

```
template <typename T>
std::string stringForNumber( T f, int precision /* = 0 */, bool fixedWidth /*= false*/ )
{
    std::ostringstream ss;
    ss.setf(std::ios_base::fixed);
    if (precision > 0)
        ss << std::setprecision(precision);

    ss << f;
    std::string str(ss.str());
    if (!fixedWidth) // Removing trailing 0
    {
        const auto pointLocation = str.find_first_of(".,");
        if (pointLocation != std::string::npos)
        {
            const auto lastZeroPos = str.find_last_of('0');
            const auto lastNotZeroPos = str.find_last_not_of('0');
            if (lastNotZeroPos == pointLocation) // Integer number
                str.erase(pointLocation);
            else if (lastZeroPos != std::string::npos && lastNotZeroPos != std::string::npos && pointLocation < lastZeroPos && lastNotZeroPos < lastZeroPos)
            {
                str.erase(lastNotZeroPos+1);
            }
        }
    }

    return str;
} 
```

# java - 处理模板中的重复值

> ID：14851234
> 
> 赞同：2
> 
> 时间：2013-02-13T10:20:43.207
> 
> 标签：java, forms, scala, playframework-2.1

文档说我可以将@repeat 用于表单中定义的列表。

[http://www.playframework.com/documentation/2.1.0/JavaFormHelpers](http://www.playframework.com/documentation/2.1.0/JavaFormHelpers)页面底部。

这可能是一个完全愚蠢的问题......我可以在地图上使用类似的东西吗？

现在我有一个助手类，它由字符串键和字符串值组成。它有效，但我在模板中有一些逻辑。在我看来，这不好...

**编辑：**更多信息

假设我有

```
class Article {
  ...
  Map<String, String> resources;
  ...getters, setters...
} 
```

我调用视图来处理表单

```
return ok(form.render(Form.form(Article.class))); 
```

在 form.scala.html 中

```
@for((key, value) <-formArt("resources")) { 
    @key, @value
} 
```

给我错误：

```
value map is not a member of play.data.Form.Field 
```

这很有意义，因为它不再是 map，而是 formField。scala中有处理List的助手，但我不知道如何制作助手来处理Map。（如果我尝试任何类似的方法，例如使用 @repeat 助手，也会给我同样的错误）

对于那些询问 Field.value 中的内容的人

```
{value1=key1, value2=key2 ...} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:51:20.530

如果你只想迭代 Map 你可以用`@defining()`and来做到这一点`@for()`：

```
public static Map<String, Object> myMap() {
    Map<String, Object> myMap = new HashMap<>();
    myMap.put("name", "John");
    myMap.put("secondName", "Doe");
    myMap.put("age", 23);
    return myMap;
} 
```

看法：

```
@defining(Application.myMap()) { myMap =>

    Hello @myMap.get("name") @myMap.get("secondName")!
    <br><br>

    All entries of the map: <br>
    @for(entry <- myMap.entrySet()){
       Field <b>@entry.getKey()</b> has value: @entry.getValue() <br>
    }

} 
```

# java - 使用 ECollections 进行 Xtend 排序

> ID：14851248
> 
> 赞同：0
> 
> 时间：2013-02-13T10:21:10.410
> 
> 标签：java, eclipse, sorting, xtend

我正在尝试使用 Java 的 Comparator 对函数的 EList 进行排序，但在调用 sort() 后列表未排序。

我实现它的方式是这样的：

```
//Func.xtend <-- Start -->

public class NameComparator implements Comparator<Function_Name> {  
    override int compare (Function_Name function1, Function_Name function2)
    {
        return function1.func.compareToIgnoreCase(function2.func)
    }
}

public class CheckNames {   
    def void checkDuplicateNames(Main_func para_func) {
        var EList<Function_Name> functions = para_func.getContains()        
        var NameComparator pc = new NameComparator()

        functions.sort(pc) //<-- sorting here

        var Iterator<Function_Name> oIt = functions.iterator ()
        while (oIt.hasNext)
        {           
            var Function_Name func = oIt.next   ()
            System::out.println(func.func.toString)
        }
    }
}

// <-- End --> 
```

难道我做错了什么？理论上，在调用functions.sort(pc)之后，变量“functions”中的内容应该已经排序了，对吧？还是我还需要做一些处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T12:44:07.047

据我所知，`List::sort`在 Xtend 中不会就地排序，而是返回一个新的排序列表。所以你必须打电话`List::sortInPlace`。

除此之外，当您尝试对*唯一的*EList（例如，容器）进行就地排序时，您可能会遇到问题。在排序操作期间（Xtend 实际上要求`java.util.Collections.sort`这样做），某些元素可能会暂时在列表中包含两次。但是，唯一列表会检查重复项并`IllegalArgumentException`在您尝试第二次添加元素时抛出 an（请参阅 参考资料`AbstractEList.set(in, E)`）。为避免这种情况，您应该像这样对唯一的 EList 进行排序：

```
var sortedFunctions = functions.sort(pc)
functions.clear()
functions.addAll(sortedFunctions) 
```

# c++ - C++ unordered_map 的 rehash() 和 reserve() 方法有什么区别？

> ID：14851249
> 
> 赞同：10
> 
> 时间：2013-02-13T10:21:16.293
> 
> 标签：c++, data-structures, c++11, std, unordered-map

C++的`rehash()`和方法有什么区别？为什么需要两种不同的方法？`reserve()``unordered_map`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-13T10:26:21.033

区别在于*目的*，尽管两者都在做类似的事情。

*   `rehash`获取现有地图并重建*新*大小的桶，在此过程中重新散列并将元素重新分配到新桶中。

*   `reserve`向您保证，如果您不插入超过保留数量的元素，则不会进行重新散列（即您的迭代器将保持有效）。

这是两个有些不同的东西，尽管是相关的。`rehash`不给你任何保证，`reserve`也不表达重新散列的目的。如果`rehash`您认为您的地图效率低下，并且`reserve`您正在准备大量插入，请使用此选项。

正如@Xeo 指出的那样，考虑到地图的允许负载因子，`reserve`它只是一个包装器。`rehash`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T10:34:48.163

来自[cplusplus.com](http://www.cplusplus.com/reference/unordered_map/unordered_map/)：

> rehash：rehash 是对哈希表的重构：> 容器中的所有元素都根据它们的哈希值重新排列到新的一组桶中。这 > 可能会改变容器内元素的顺序。
> 
> 保留：将容器中的桶数（bucket_count）设置为最合适的>以包含至少n个元素。

我从这里了解到，rehash 尝试根据给定的 n 大小更改哈希表中的桶数。保留将哈希表中的桶数更改为最合适的数量，以便存储至少 n 个（由用户提供）元素。我希望我的陈述清楚。

# c# - asp.net，C#中的日期范围循环

> ID：14851252
> 
> 赞同：1
> 
> 时间：2013-02-13T10:21:23.313
> 
> 标签：c#, asp.net

如何在 C# 中的两个日期范围之间循环？

例如-

我正在创建一个信用卡 EMI 模块，假设一个用户想要 6 EMI 我有一个日期范围：`"08/02/2009-08/08/2009"`我需要每个月循环

输入 ：

```
Start Date- 08/02/2008
End Date - 08/07/2009

Charge Cycle - 6 
```

输出将像 -

```
08/02/2008
08/03/2008
08/04/2008
08/05/2008
08/06/2008
08/07/2008 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T10:24:33.713

您可以在 while 循环中使用[DateTime.AddMonths](http://msdn.microsoft.com/en-us/library/system.datetime.addmonths.aspx)

```
DateTime dtStart = new DateTime(2009,2,8);
DateTime dtEnd = new DateTime(2009,8,8);
while (dtStart < dtEnd)
{

    Console.WriteLine(dtStart.ToString("dd/MM/yyyy"));
    dtStart = dtStart.AddMonths(1);
} 
```

输出将是：

```
08/02/2009
08/03/2009
08/04/2009
08/05/2009
08/06/2009
08/07/2009 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T10:24:24.543

```
DateTime start = DateTime.Now;
for(int i = 0; i < 6; i++)
{
    start = start.AddMonth(i);
    Console.WriteLine("{0:dd/MM/yy}", start);

} 
```

或者，如果您愿意：

```
public static IEnumerable<DateTime> GetMonths(DateTime start, int numberOfMonths);
{
    for(int i = 0; i < numberOfMonths; i++)
    {
        start = start.AddMonth(i); 
        yield return start;
    }
}

foreach(var date in GetMonths(DateTime.Now, 6)
{
    Console.WriteLine("{0:dd/MM/yy}", date);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T10:25:01.597

您可以使用 Datetime 的 AddMonths() 方法。看看[文档](http://msdn.microsoft.com/en-us/library/system.datetime.addmonths.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T10:33:11.763

使用[`DateTime.AddMonths()`](http://msdn.microsoft.com/en-us/library/system.datetime.addmonths.aspx)方法。

> 返回一个新的 DateTime，它将指定的月数添加到此实例的值中。

像;

```
DateTime a = new DateTime(2009, 2, 8);
DateTime b = new DateTime(2009, 8, 8);

while ( a < b )
{
     Console.WriteLine(a.ToShortDateString());
     a = a.AddMonths(1);
} 
```

结果将是；

```
08.02.2009
08.03.2009
08.04.2009
08.05.2009
08.06.2009
08.07.2009 
```

这是一个[`DEMO`](http://ideone.com/O4bD4E).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T10:40:01.943

下面将返回指定日期之间的日期列表

```
 var startDate = DateTime.Parse("08/02/2009");
        var endDate = DateTime.Parse("08/08/2009");
        var resutl = Enumerable.Range(0, 1 + ((endDate.Year - startDate.Year) * 12) +  endDate.Month -1 - startDate.Month  )
            .Select(startDate.AddMonths)
            .ToList(); 
```

# java - Spring Framework 中的 Beans 基于 Java 的配置，不起作用

> ID：14851259
> 
> 赞同：2
> 
> 时间：2013-02-13T10:21:37.693
> 
> 标签：java, spring, spring-mvc, spring-annotations

我正在阅读[这篇](http://www.tutorialspoint.com/spring/spring_java_based_configuration.htm)关于 Spring Java Based Configuration 的文章。我正在创建一个类似于本教程中的示例，但我使用 Maven 进行构建过程。

我在我的项目中添加了以下依赖项：`spring-core`、`spring-bean`、`spring-context`和.`spring-context-support``spring-asm`

问题是当我尝试执行我的应用程序时，我收到以下错误消息：

```
feb 13, 2013 10:26:49 AM org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing org.springframework.context.annotation.AnnotationConfigApplicationContext@4ba4536d: startup date [Wed Feb 13 10:26:49 CET 2013]; root of context hierarchy
Exception in thread "main" java.lang.IllegalStateException: CGLIB is required to process @Configuration classes. Either add CGLIB to the classpath or remove the following @Configuration bean definitions: [helloWorldConfig]
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:327)
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanFactory(ConfigurationClassPostProcessor.java:222)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:681)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:620)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:446)
    at org.springframework.context.annotation.AnnotationConfigApplicationContext.<init>(AnnotationConfigApplicationContext.java:73)
    at org.andrea.myexample.myJavaConfiguration.MainApp.main(MainApp.java:13) 
```

在线阅读我了解到要使用这些注释（`@Configuration`和`@Bean`），我必须将`spring-asm`依赖项添加到我的项目中。我试过了，但没有用。

这是我的整个`pom.xml`文件：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>org.andrea.myexample</groupId>
<artifactId>myJavaConfiguration</artifactId>
<version>0.0.1-SNAPSHOT</version>
<packaging>jar</packaging>

<name>myJavaConfiguration</name>
<url>http://maven.apache.org</url>

<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>3.8.1</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context-support</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-asm</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
</dependencies> 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T10:29:04.987

在同一个教程页面中，它声明您需要在类路径中包含 CGLib jar（添加了重点）：

> 让我们准备好工作的 Eclipse IDE，然后按照以下步骤创建一个 Spring 应用程序：
> 
> > ...
> > 3 - 因为您使用的是基于 Java 的注解，**所以您还需要添加**Java 安装目录中的 CGLIB.jar 和可以从 asm.ow2.org 下载的 ASM.jar 库。
> > ...

使用 Maven，您需要将以下依赖项添加到您的`pom.xml`:

```
<dependency>
    <groupId>cglib</groupId>
    <artifactId>cglib</artifactId>
    <version>2.2.2</version>
</dependency> 
```

[来源](http://www.mkyong.com/spring3/spring-3-javaconfig-example/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T10:28:09.610

在您的 pom 中添加以下依赖项，它应该可以工作。

```
<dependency>
    <groupId>cglib</groupId>
    <artifactId>cglib</artifactId>
    <version>2.2.2</version>
</dependency> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-11T08:37:38.247

对于 [**`Article Which u have Read`**](http://www.tutorialspoint.com/spring/spring_java_based_configuration.htm) .

要使其工作，您只需将[**`CGLIB Jar`**](http://cglib.sourceforge.net/) 文件添加到您的项目中。

***`CGLIB Jar`***从链接下载 Jar并将***`Add`***其下载到您的项目中

如果您使用 MAVEN，您需要手动包含 CGLIB 库，只需在 Maven**`pom.xml`**文件中声明它即可。

```
 <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib</artifactId>
        <version>2.2.2</version>
    </dependency> 
```

# java - JFormattedTextfield 创建具有可变长度的掩码

> ID：14851264
> 
> 赞同：1
> 
> 时间：2013-02-13T10:21:50.023
> 
> 标签：java, swing, formatter

您好，我想用`JFormattedTextField`这种方式戴口罩：

```
MaskFormatter mask = new MaskFormatter("AA AAAA AAAA");
myField = new JFormattedTextField(mask); 
```

但我希望能够输入可变数量的字符，例如：

```
aa 11
4a 1125 4 
```

等等

有什么简单的方法可以做到这一点，而不是扩展`maskformatter`或编写我自己的类？

感谢你

# iphone - 如何锁定设备上的更改方向？

> ID：14851266
> 
> 赞同：0
> 
> 时间：2013-02-13T10:21:53.203
> 
> 标签：iphone, ios, objective-c

如何锁定设备上的更改方向？

我试着用

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
  return UIInterfaceOrientationLandscapeRight;
} 
```

还有这个

```
- (void)viewDidAppear:(BOOL)animated
{
    [self shouldAutorotateToInterfaceOrientation: UIInterfaceOrientationLandscapeRight];
    [super viewDidAppear:animated];
} 
```

但是当我使用设备时没有任何效果。当应用程序在模拟器上运行时，它工作得很好。

模拟器有 iOS 6 和设备 5.1.1。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T10:24:55.373

试试这个：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
  return (interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

该方法返回“是”或“否”，回答“我应该旋转到这个方向：interfaceOrientation”的问题。所以你应该返回 YES 或 NO -`UIInterfaceOrientationLandscapeRight`不是 BOOL。但是您可以使用比较来返回如上所述的 BOOL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:26:41.330

打开您的项目，选择项目文件，转到摘要部分，然后在“支持的界面方向”小节上设置所需的界面方向。祝你好运！（适用于 iOS 6.x）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T10:27:24.777

在您的项目 .plist 文件中添加支持的界面方向

并将项目设置为横向（右主页按钮）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T10:29:06.600

如果您只想为 1 个视图控制器执行此操作，您可以通过以下方式执行此操作

```
- (NSUInteger)supportedInterfaceOrientations{
return UIInterfaceOrientationMaskPortrait;
} 
```

或通过

```
//deprecated
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

和

```
- (BOOL)shouldAutorotate {
return self.interfaceOrientation == UIInterfaceOrientationPortrait;
} 
```

如果要为整个应用程序设置它，请确保更改 Info.plist 文件并添加`Supported Interface Orientations`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T10:30:34.077

您只需在`.m`文件中添加以下行

```
#define IOS_OLDER_THAN_6 ( [ [ [ UIDevice currentDevice ] systemVersion ] floatValue ] < 6.0 )
#define IOS_NEWER_OR_EQUAL_TO_6 ( [ [ [ UIDevice currentDevice ] systemVersion ] floatValue ] >= 6.0 ) 
```

然后你必须在`.m`文件中添加以下方法

```
#ifdef IOS_OLDER_THAN_6

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
   return (toInterfaceOrientation == UIInterfaceOrientationLandscapeRight);
}
#endif

#ifdef IOS_NEWER_OR_EQUAL_TO_6

- (NSUInteger)supportedInterfaceOrientations
{
   return UIInterfaceOrientationMaskLandscapeRight;
}
#endif 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-13T11:14:00.177

对于 iOS 6 支持包括这两种方法

```
- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

另请注意，这将适用于 xCode 4.5 +

# php - cakePHP - 表单 - 如果选中复选框，则显示并验证另一个字段

> ID：14851267
> 
> 赞同：1
> 
> 时间：2013-02-13T10:21:53.720
> 
> 标签：php, forms, cakephp, checkbox, dependencies

是否可以让 cakePHP 处理输入字段的依赖关系？

```
echo $this->Form->checkbox('foo');
echo $this->Form->input('bar'); //is hidden initially 
```

并且仅在检查 foo 时才显示和验证 bar ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T12:46:10.617

必要的 jQuery（您需要更新代码的类，因为您实际上并没有输入真实姓名）。最初你会想用 CSS 隐藏栏。

```
(function(){

    $('#foo').on('change', function() {
        if($(this).is(':checked')) {
            $('#bar').fadeIn();
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:57:48.757

最好的方法是使用 javascript，记住 CakePHP 只是为端服务器生成 PHP 代码

```
<script >
$(document).ready(function(){
$('#MyModelFoo').change(function(){
 if($(this).is(':checked')) {
        $('#MyModelBar').fadeIn();
    }
});
</script>
<?php
echo $this->Form->create('MyModel');
echo $this->Form->checkbox('foo');
echo $this->Form->input('bar'); //is hidden initially
echo $this->Form->end();
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T15:08:47.797

其他人已经发布了显示/隐藏字段所需的 jQuery，这是在 CakePHP 中验证它的方法：

在 AppModel 中：

```
public function requiredIfChecked($check, $associatedField) {

    $value = array_pop($check);

    if ($this->data[$this->alias][$associatedField] && empty($value)) {

        return false;

    }
    else {

        return true;

    }

} 
```

在您的验证数组中：

```
public $validate = array( 
    'bar'=>array(
        'required_if_checked'=>array(
            'rule'=>array('requiredIfChecked', 'foo'),
            'message'=>'cannot be blank if foo is checked'
        )
    )
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T13:01:29.003

使用 JavaScript。您不能使用用于编写 CakePHP 的服务器端编程语言来动态隐藏/显示输入字段。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T10:27:36.363

是的，但是为此你需要使用客户端编程，因为 php 不能这样做 show hide..j 查询是最好的...在 cakephp 中已经有一个功能可以检查这种依赖关系，如果我没记错的话默认情况下，名为 observField as cakephp 使用原型 js。

[**更多**](http://book.cakephp.org/1.3/en/The-Manual/Core-Helpers/AJAX.html#observefield)

# python - python 的 Pool 什么时候分叉？

> ID：14851269
> 
> 赞同：0
> 
> 时间：2013-02-13T10:21:55.573
> 
> 标签：python

有人知道python的Pool在哪个阶段分叉了主进程吗？在创建池时，还是在第一次运行作业时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:32:06.973

创建`multiprocessing.Pool`对象时，它会产生一些线程，但不会分叉。分叉是在调用其他`Pool`方法时完成的，并且仅在 UNIX 系统上（在 Windows 上没有分叉）。

您可以在阅读该`Pool.__init__`方法的源代码时看到这一点：

```
class Pool(object):
    '''
    Class which supports an async version of applying functions to arguments.
    '''
    Process = Process

    def __init__(self, processes=None, initializer=None, initargs=(),
                 maxtasksperchild=None):
        self._setup_queues()
        self._taskqueue = queue.Queue()
        self._cache = {}
        self._state = RUN
        self._maxtasksperchild = maxtasksperchild
        self._initializer = initializer
        self._initargs = initargs

        if processes is None:
            try:
                processes = cpu_count()
            except NotImplementedError:
                processes = 1
        if processes < 1:
            raise ValueError("Number of processes must be at least 1")

        if initializer is not None and not callable(initializer):
            raise TypeError('initializer must be a callable')

        self._processes = processes
        self._pool = []
        self._repopulate_pool()

        self._worker_handler = threading.Thread(
            target=Pool._handle_workers,
            args=(self, )
            )
        self._worker_handler.daemon = True
        self._worker_handler._state = RUN
        self._worker_handler.start()

        self._task_handler = threading.Thread(
            target=Pool._handle_tasks,
            args=(self._taskqueue, self._quick_put, self._outqueue, self._pool)
            )
        self._task_handler.daemon = True
        self._task_handler._state = RUN
        self._task_handler.start()

        self._result_handler = threading.Thread(
            target=Pool._handle_results,
            args=(self._outqueue, self._quick_get, self._cache)
            )
        self._result_handler.daemon = True
        self._result_handler._state = RUN
        self._result_handler.start()

        self._terminate = Finalize(
            self, self._terminate_pool,
            args=(self._taskqueue, self._inqueue, self._outqueue, self._pool,
                  self._worker_handler, self._task_handler,
                  self._result_handler, self._cache),
            exitpriority=15
            ) 
```

# asp.net-mvc - 未为成员 Microsoft.IdentityModel.Claims.ClaimsPrincipal 解析类型

> ID：14851270
> 
> 赞同：0
> 
> 时间：2013-02-13T10:21:59.227
> 
> 标签：asp.net-mvc, azure, wif

我有一个 MVC 4 应用程序部署到已经工作了几个月的 Azure 云服务。突然，该应用程序停止工作，我在允许匿名访问的页面上看到 401 错误。深入事件日志揭示了这一点：

```
<EventData>
 <Data>System.AppDomain/50824127</Data>
 <Data>System.Runtime.Serialization.SerializationException: Type is not resolved for member 'Microsoft.IdentityModel.Claims.ClaimsPrincipal,Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'. at System.Web.Hosting.ApplicationManager.GetUpdatedTotalCacheSize(Int64 sizeUpdate) at System.Web.Hosting.ObjectCacheHost.System.Runtime.Caching.Hosting.IMemoryCacheManager.UpdateCacheSize(Int64 size, MemoryCache memoryCache) at System.Runtime.Caching.CacheMemoryMonitor.GetCurrentPressure() at System.Runtime.Caching.MemoryMonitor.Update() at System.Runtime.Caching.MemoryCacheStatistics.CacheManagerThread(Int32 minPercent) at System.Threading.ExecutionContext.runTryCode(Object userData) at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData) at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx) at System.Threading._TimerCallback.PerformTimerCallback(Object state)</Data>
 <Data>w3wp</Data>
 <Data>2548</Data>
 </EventData> 
```

经过数小时的故障排除和检查配置，我无法弄清楚为什么会发生这种情况。程序集 Microsoft.IdentityModel, 3.5.0.0 位于部署包的 bin 文件夹中，并且项目具有对 WIF nuget 包的正确引用。

更糟糕的是，我的项目在一个天蓝色的云服务中工作，但在另一个（如上所述失败）中却没有。似乎存在有限数量的相关问题，例如[Type is notsolved for member "Microsoft.IdentityModel.Claims.ClaimsPrincipal,Microsoft.IdentityModel"](https://stackoverflow.com/questions/13936103/type-is-not-resolved-for-member-microsoft-identitymodel-claims-claimsprincipal)，但这与在开发人员工作站上运行 sitefinity 和我的问题有关在云端。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:58:37.093

我们在 Azure 项目中遇到了类似的问题，但并不完全相同。我们的错误是

```
Unable to Find Assembly 'Microsoft.IdentityModel' 
```

**原因是 Azure 虚拟机默认没有 WIF。即使我们`Microsoft.IdentityModel`的 bin 文件夹中有，当应用程序尝试解析对 的引用时`Microsoft.IdentityModel`，即使它不相关，它也会失败并抛出缺少引用的错误。**

*这个问题可以通过在启动任务中安装 WIF 来解决。此链接包含有关如何执行此操作的详细信息。*

[http://blogs.msdn.com/b/sriharsha/archive/2012/04/07/windows-azure-unable-to-find-assembly-microsoft-identitymodel.aspx](http://blogs.msdn.com/b/sriharsha/archive/2012/04/07/windows-azure-unable-to-find-assembly-microsoft-identitymodel.aspx)

# c# - 在字节类型字段中插入 null 时字符串或缓冲区长度无效

> ID：14851271
> 
> 赞同：1
> 
> 时间：2013-02-13T10:22:01.880
> 
> 标签：c#, asp.net, null, byte, informix

插入时出现以下异常：

```
ERROR [HY090] [Informix .NET provider]Invalid string or buffer length. 
```

什么时候

```
obj.Request_file = null;//of byte[] type 
```

* * *

```
 using (IfxConnection con = new IfxConnection(ConfigurationSettings.AppSettings["con1"].ToString()))
            {
                con.Open();
                StringBuilder cmdTxt = new StringBuilder();

                cmdTxt.Append(" INSERT INTO request_data(req_ser, req_year, req_date, req_emp_type, req_emp_num, req_emp_name, person_type,person_num,person_name,about_person,other_description,main_code , year,req_desc, login_num , req_title,request_file) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?,?) ");

                int MaxFollowSerial = Get_Max_FollowSerial(int.Parse(obj.RequestYear.ToString())) + 1;
                IfxCommand myIfxCmd = new IfxCommand(cmdTxt.ToString(), con);

                myIfxCmd.CommandType = CommandType.Text;
                myIfxCmd.Parameters.Clear();

                myIfxCmd.Parameters.Add("req_ser", MaxFollowSerial.ToString());
                myIfxCmd.Parameters.Add("req_year", obj.RequestYear.ToString());
                myIfxCmd.Parameters.Add("req_date", obj.RequestDate.ToString().Split(' ')[0]);
                myIfxCmd.Parameters.Add("req_emp_type", obj.RequestEmpType.ToString().Trim());
                myIfxCmd.Parameters.Add("req_emp_num", obj.RequestEmpNum.ToString().Trim());
                myIfxCmd.Parameters.Add("req_emp_name", obj.RequestEmpName.ToString().Trim());
                myIfxCmd.Parameters.Add("person_type", obj.PersonType.ToString().Trim());
                myIfxCmd.Parameters.Add("person_num", obj.PersonNum.ToString().Trim());
                myIfxCmd.Parameters.Add("person_name", obj.PersonName.ToString().Trim());
                myIfxCmd.Parameters.Add("about_person", obj.AboutPerson.ToString().Trim());
                myIfxCmd.Parameters.Add("other_description", obj.OtherDescription.ToString().Trim());
                myIfxCmd.Parameters.Add("main_code", obj.MainCode.ToString());
                myIfxCmd.Parameters.Add("year", obj.Year.ToString());
                myIfxCmd.Parameters.Add("req_desc", obj.RequestDescription.ToString().Trim());
                myIfxCmd.Parameters.Add("login_num", obj.LoginNum.ToString());
                myIfxCmd.Parameters.Add("req_title", obj.Title.ToString());
                myIfxCmd.Parameters.Add("request_file", obj.Request_file);
                int affectedRow = myIfxCmd.ExecuteNonQuery();
                con.Close();
                con.Dispose();
                if (affectedRow > 0)
                    return MaxFollowSerial;
                else
                    return affectedRow;
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T14:05:30.830

试试这个：

```
if(obj.Request_file != null)
    myIfxCmd.Parameters.Add("request_file", obj.Request_file);
else
    myIfxCmd.Parameters.Add("request_file", DBNull.Value); 
```

# android - Android NDK 不创建文件夹

> ID：14851272
> 
> 赞同：1
> 
> 时间：2013-02-13T10:22:06.740
> 
> 标签：android, android-ndk, makefile

我正在尝试构建一个共享库以在 android 中使用，但是构建失败并出现以下错误

> C:\workspace\AppVoice>C:\android-ndk-r8d\ndk-build.cmd all 系统找不到指定的文件。“编译拇指：gsm <= add.c jni/add.c:235:1：致命错误：打开依赖文件./obj/local/armeabi/objs/gsm/add.od：没有此类文件或目录编译终止。制作：*** [obj/local/armeabi/objs/gsm/add.o] 错误 1

obj 文件夹存在，但它是空的。如果我创建 local/armeabi/objs/gsm 文件夹，它会继续编译，但是将准备好的 .so 文件复制到 libs 文件夹时失败（即使我在那里手动创建了正确的架构文件夹）

什么可能导致android进程不创建文件夹？我正在使用 windows xp、cygwin 和 android ndk r8。

当我在 eclipse 和命令行中编译时，问题都出现了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:48:55.850

问题似乎是 Windows FLP（旧式电脑的基础），它没有安装 NUL 设备驱动程序，当找不到设备时，cygwin 使用它将所有输出重定向到 /dev/null mkdir 和其他重定向它们的调用输出为 null 无法执行。这是我所做的修复： http: [//siebn.de/other/nulldevice/](http://siebn.de/other/nulldevice/)

# jquery - jQuery Resizable 的“也调整大小”不再起作用 - 什么可以关闭它？

> ID：14851277
> 
> 赞同：0
> 
> 时间：2013-02-13T10:22:16.670
> 
> 标签：jquery, image, resize, dimensions

我有一个`.box`包含图像的类的 div，我使用了：

```
$thebox = $('.box');
$thebox.resizable({ handles: 'all', alsoResize: img_id}); 
```

调整 div 大小时调整包含图像的大小。图片有自己的来源和 ID，所以 HTML 是这样的：

```
<div class='box'><img src='path/filename' id='img1' /></div> 
```

然后在某一时刻（在用户编辑时），我替换了图像的源，用新的图像替换了图像。但是在替换图像之后，`box`容器继续能够按预期调整大小，但是，所包含`img1`的现在不再同步调整大小，它保持不变。我不知道为什么会这样！

## 编辑

好的，所以我在 Firebug 上遇到了一个错误`TypeError: a.size is undefined`，相关的 jQuery 是这样的：

```
function(a){e(a)});else e(g.alsoResize)},resize:function(g,e){var a=b(this).data("resizable");g=a.options;var d=a.originalSize,h=a.originalPosition,i={height:a.size.height-d.height||0,width:a.size.width-d.width||0,top:a.position.top-h.top||0,l..... // blah blah 
```

这有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:28:13.360

您应该重新初始化调整大小，该图像似乎是一个不同的节点。参考已损坏。

更改时`src`再次执行此操作

```
$thebox.resizable({ handles: 'all', alsoResize: img_id}); 
```

# mysql - 除了 mysqldump 之外，是否还需要从 InnoDB 保存任何二进制文件？

> ID：14851279
> 
> 赞同：0
> 
> 时间：2013-02-13T10:22:22.100
> 
> 标签：mysql, innodb, mysqldump

我刚刚将数据库从`MyISAM`引擎迁移到`InnoDB`. 我`mysqldump`用来备份我的`MyISAM`数据库，但是当我查看`MySQL` [文档](http://dev.mysql.com/doc/refman/5.0/en/innodb-backup.html)时，对于 InnoDB 表，我还需要保存二进制文件（连同`mysqldump`）。

我的问题是，为什么这些二进制文件很重要，它们的作用是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T01:05:24.790

不，如果您使用`mysqldump`，它会生成数据库的逻辑副本。没有必要保存任何（二进制）数据文件。但是，可以进行二进制备份*而不是*备份`mysqldump`。

# filesystems - NTFS 是否故意在文件之间留下间隙？

> ID：14851280
> 
> 赞同：1
> 
> 时间：2013-02-13T10:22:23.593
> 
> 标签：filesystems, ntfs

在 NTFS 格式的 USB 闪存驱动器上使用 FSCTL_GET_VOLUME_BITMAP 读取已分配集群的分布时，我注意到散布着大面积的空闲集群。即便如此，当闪存驱动器在文件复制到其上之前已被重新格式化时也是如此。相比之下，在 FAT32 驱动器上，在格式化和复制之后，分配的簇具有传染性。

这是正常的 NTFS 行为，也许是防止碎片的策略？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:21:26.237

我在想它可能是磨损均衡（[http://en.wikipedia.org/wiki/Wear_leveling](http://en.wikipedia.org/wiki/Wear_leveling)），但我认为 NTFS 不支持这一点。

你确定它是用 NTFS 格式而不是 exFAT 格式的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T17:11:38.930

FAT** 文件系统将文件保存成 16 字节或 32 字节的簇，解释了 FAT16 和 FAT32 的标签，基本上浪费了磁盘空间。

然而，NTFS 比文件可以保存为自己的大小更具动态性，但 RAM 再次导致文件随机保存到磁盘上，因此清理这些空白空间最好在所有文件上运行 DISK DEFRAG 一个默认程序窗户的版本

不幸的是，任何早于 windows 2000/ME 的系统都不支持将 FAT 转换为 NTFS。

这是我所知道的

# ruby-on-rails - Rails 类命名冲突

> ID：14851281
> 
> 赞同：2
> 
> 时间：2013-02-13T10:22:24.440
> 
> 标签：ruby-on-rails, rspec, module, namespaces

在我的 Rails 应用程序中，我有以下内容：

1.  `Post`模型

    ```
    class Post < ActiveRecord::Base
      # ...
    end 
    ```

2.  `Post`在这样的模块中建模

    ```
    # lib/my_module/models.rb
    module MyModule
      module Models
        class AbstractTable < ActiveRecord::Base
          self.abstract_class = true
        end

        class Comment < AbstractTable
          belogs_to :post
        end

        class Post < AbstractTable
          has_many :comments
        end
      end
    end 
    ```

两种`Post`模型都有不同的字段集并连接到不同的数据库：

1.  `Post`-> Postgresql 适配器
2.  `MyModule::Models::Post`-> SQLite 适配器

**有时**（取决于种子值），在运行测试套件时，我得到一个超级奇怪的常量（？）冲突：在`Post`提到原始常量的地方（在创建/更新操作中）我得到错误，它缺少来自的字段`MyModule::Models::Post`，而在`MyModule::Models::Post`提到的地方——我得到一个错误，模型缺少来自 origin 的属性`Post`。

补充线索：

1.  我只在范围内使用`MyModule::Models::Post`，`MyModule`调用`Models::Post`，
2.  我从不`MyModule::Models::Post`在库之外使用。
3.  所有“不同”的模型都保存在一个文件中，`lib/my_module/models.rb`
4.  如果我登录到一个`pry`失败的规范的会话，在 ruby​​ 吹嘘`MyModule::Models::Post`它没有应该有的字段（而是来自`Post`而不是字段）的行之前：调用`MyModule::Models::Post`返回给我确切的原始`Post`模型类！

**我错过了什么？这是一个 rspec 问题吗？我是在搞砸约定还是什么？**

**更新 1**。我试图拆分`Models`模块，将每个附加模型放入一个单独的文件中。不走运——同样的错误

**更新 2**。另一个想法是：由于`Comment`模型是之前定义的`Post`，Ruby 尝试首先加载原始模型`Post`。尽管如此，将`Post`模型向上移动并没有帮助。

**更新 3**。RSpec 有[这个](https://github.com/rspec/rspec-mocks/commit/1e3f431e522d61b9b8df06e01c6bbcfff0e0981a)提交。尽管如此，从 github 更新 Gemfile`rspec-mock`并没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:19:53.483

你应该明确告诉 Rails 你的期望：

```
 belongs_to :post, class_name: 'MyModule::Models::Post' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T19:46:56.390

如果您有**数据库 A**和**数据库 B**，它们共享一些模型名称（尽管设置了完全不同的列），您必须确保在建立与**数据库 B**的连接后重置列名：

```
DatabaseBBaseTable.establish_connection(adapter: 'sqlite3', database: ':memory:')
@connection = DatabaseBBaseTable.connection
DatabaseBSchema.define(@connection)

DatabaseBBaseTable.descendants.each(&:reset_column_information) 
```

# data-mining - 寻找最大的频繁项集

> ID：14851284
> 
> 赞同：-1
> 
> 时间：2013-02-13T10:22:32.640
> 
> 标签：data-mining

给定一组项集`C`和一个支持阈值`m`，是否有一种有效的方法来生成（或一个）最大频繁模式？

我所说的频繁模式是指一个项目集，其中的项目集的`p`数量，例如的一个子集，至少是。通过最大模式，我的意思是项目的数量应该尽可能大。`s``C``p``s``m``p`

具体来说，我想避免生成所有“最大”或“封闭”模式的（组合大）集——任何最大尺寸的单一模式都可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:23:07.777

我发现了一系列有趣的工作，基于 FP-Tree 数据结构。该方法在[2008 年的一篇不错的论文](http://dx.doi.org/10.1016/j.ins.2007.08.006)中进行了描述，并[在 2011 年](http://dx.doi.org/10.1109/KSE.2011.18)通过添加新的修剪技术进行了扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-06T03:38:16.537

构建一个 FPTree，并在构建树的同时，记录最长的树路径，使得 support >= minsup。

这会给你最大的项目集。

如果 minsup =0，那么最大的项目集是最大的交易。

# android - 如何以日期格式获取日期选择器值？

> ID：14851285
> 
> 赞同：11
> 
> 时间：2013-02-13T10:22:37.163
> 
> 标签：android, date, datepicker, date-conversion

我的数据选择器有问题

我使用代码获取如下所示的日期、月份和年份

```
 DatePicker datePicker;
           datePicker = (DatePicker) findViewById(R.id.dateselect);

           int   day  = datePicker.getDayOfMonth();
           int   month= datePicker.getMonth() + 1;
           int   year = datePicker.getYear(); 
```

但是当我打印日期时，它显示的值是 7 而不是 07，而对于月份，它显示的值是 2 而不是 02

我希望这些整数数据采用日期格式，即；例如：02-02-2013, 24-12-2013
有没有可能的方法？？？？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-13T10:30:25.620

您可以像这样格式化日期：

```
int   day  = datePicker.getDayOfMonth();
int   month= datePicker.getMonth();
int   year = datePicker.getYear();
Calendar calendar = Calendar.getInstance();
calendar.set(year, month, day);

SimpleDateFormat sdf = new SimpleDateFormat("dd-MM-yyyy");
String formatedDate = sdf.format(calendar.getTime()); 
```

您可以通过调用将 String 解析回 Date 对象

```
Date date = sdf.parse(formatedDate); 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-02-13T10:29:36.313

```
 public String checkDigit(int number)
    {
        return number<=9?"0"+number:String.valueOf(number);
    } 
```

基本用途：

```
month=checkDigit(month);
input 7
output 07
   String date=checkDigit(monthOfYear+1)+"/"+checkDigit(dayOfMonth)+"/"+year; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-13T10:25:01.953

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<Button
    android:id="@+id/btnChangeDate"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Change Date" />

<TextView
    android:id="@+id/lblDate"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Current Date (M-D-YYYY): "
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/tvDate"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text=""
    android:textAppearance="?android:attr/textAppearanceLarge" />

<DatePicker
    android:id="@+id/dpResult"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> 
```

```
package com.mkyong.android;

   import java.util.Calendar;
 import android.app.Activity;
 import android.app.DatePickerDialog;
 import android.app.Dialog;
 import android.os.Bundle;
 import android.view.View;
 import android.view.View.OnClickListener;
 import android.widget.Button;
 import android.widget.DatePicker;
 impot android.widget.TextView;

 public class MyAndroidAppActivity extends Activity {

private TextView tvDisplayDate;
private DatePicker dpResult;
private Button btnChangeDate;

private int year;
private int month;
private int day;

static final int DATE_DIALOG_ID = 999;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    setCurrentDateOnView();
    addListenerOnButton();

}

// display current date
public void setCurrentDateOnView() {

    tvDisplayDate = (TextView) findViewById(R.id.tvDate);
    dpResult = (DatePicker) findViewById(R.id.dpResult);

    final Calendar c = Calendar.getInstance();
    year = c.get(Calendar.YEAR);
    month = c.get(Calendar.MONTH);
    day = c.get(Calendar.DAY_OF_MONTH);

    // set current date into textview
    tvDisplayDate.setText(new StringBuilder()
        // Month is 0 based, just add 1
        .append(month + 1).append("-").append(day).append("-")
        .append(year).append(" "));

    // set current date into datepicker
    dpResult.init(year, month, day, null);

}

public void addListenerOnButton() {

    btnChangeDate = (Button) findViewById(R.id.btnChangeDate);

    btnChangeDate.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            showDialog(DATE_DIALOG_ID);

        }

    });

}

@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case DATE_DIALOG_ID:
       // set date picker as current date
       return new DatePickerDialog(this, datePickerListener, 
                     year, month,day);
    }
    return null;
}

private DatePickerDialog.OnDateSetListener datePickerListener 
            = new DatePickerDialog.OnDateSetListener() {

    // when dialog box is closed, below method will be called.
    public void onDateSet(DatePicker view, int selectedYear,
            int selectedMonth, int selectedDay) {
        year = selectedYear;
        month = selectedMonth;
        day = selectedDay;

        // set selected date into textview
        tvDisplayDate.setText(new StringBuilder().append(month + 1)
           .append("-").append(day).append("-").append(year)
           .append(" "));

        // set selected date into datepicker also
        dpResult.init(year, month, day, null);

    }
}; 
```

}

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-09T07:49:22.370

从[API 级别 12](http://developer.android.com/reference/android/widget/DatePicker.html#getCalendarView())开始，`DatePicker`has `public CalendarView getCalendarView ()`，使用此视图可以获取日期：

```
long dateTime = datePicker.getCalendarView().getDate();
Date date = new Date(dateTime); 
```

然后根据需要格式化：

```
DateFormat dateFormat = new SimpleDateFormat("dd-MM-yyyy");
String formattedDate = dateFormat.format(date); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-13T10:31:01.257

您可以使用自定义方法以所需格式设置日期和月份

```
 private static String  pad(int c)
    {
        return c>=10 ? ""+c : "0"+c;      
    } 
```

而不是使用**日期**和**月份**的值使用`pad(date)`和`pad(month)`

希望这可以帮助。

# php - 如何解决 Class xxx is not a valid entity or mapped super class 错误

> ID：14851286
> 
> 赞同：3
> 
> 时间：2013-02-13T10:22:48.213
> 
> 标签：php, orm, doctrine-orm, entity

我已经定义了一个这样的类设置：

```
<?php

use Doctrine\ORM\Mapping as ORM;

/** @ORM\Entity */
class Setting {
    /** @ORM\Column(type="integer")
     *  @ORM\GeneratedValue
     *  @ORM\id
     */
    private $id;

    /** @ORM\Column(length=255, nullable=true) */
    private $displayname;

    /** @ORM\Column(length=255) */
    private $name;

    /** @ORM\Column(type="text") */
    private $value;

    public function __get($name) {
        return $this->$name;
    }

    public function __set($key, $value){
        $this->$key = $value;
    }

    public function getFullName() {
        return $this->name . ' suffix';
    }

    public static function getValue($settingName) {
        $result = '';
        try {
            $setting = em()->createQuery('SELECT s FROM Setting s WHERE s.name = :name')
                ->setParameter('name', $settingName)
                ->getSingleResult();

            $result = $setting->value;
        }
        catch (\Doctrine\ORM\NoResultException $exception) {

        }

        return $result;
    }
} 
```

不幸的是，这给出了一个错误致命错误：`Uncaught exception 'Doctrine\ORM\Mapping\MappingException' with message 'Class "Setting" is not a valid entity or mapped super class.' in xxxxx/vendor/doctrine/orm/lib/Doctrine/ORM/Mapping/MappingException.php on line 216`

如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:00:35.570

为了解决这个问题，我不得不在最后一个参数中使用 false 调用[Setup::createAnnotationMetadataConfiguration](http://www.doctrine-project.org/api/orm/2.2/class-Doctrine.ORM.Tools.Setup.html)以避免使用 SimpleAnnotationReader，因为您需要 AnnotationReader 才能使用 ORM\ 命名空间前缀。

```
use Doctrine\ORM\Tools\Setup;
use Doctrine\ORM\EntityManager;

$dbParams = array(
    'driver' => 'pdo_mysql',
    'host' => '127.0.0.1',
    'user' => 'root',
    'password' => '', 
    'dbname' => 'db',
);

$path = __DIR__ . '/Entity';

$config = Setup::createAnnotationMetadataConfiguration(array($path), true, null, null, false);

$entityManager = EntityManager::create($dbParams, $config); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T10:35:55.663

找到了解决方案：似乎问题在于使用 SimpleAnnotationReader。

当像这样配置 annotationDriver 时（第二个参数应该是 false），它可以工作。

```
$driver = $config->newDefaultAnnotationDriver(
    APPLICATION_PATH . '/models', false
); 
```

# ruby - Ruby 1.9.3 正则表达式 utf8 \w 重音字符

> ID：14851288
> 
> 赞同：1
> 
> 时间：2013-02-13T10:22:51.723
> 
> 标签：ruby, regex, encoding, utf-8

如何确保 Regexp 中的 \w 将国家字母与普通字母相同？

```
'ein grüner Hund'.scan(/\S+/u) 
```

> [“ein”，“grüner”，“Hund”]

它将“ü”正确扫描为非空白字符。

```
'ein grüner Hund'.scan(/\w+/u) 
```

> [“ein”、“gr”、“ner”、“Hund”]

如何获得“ü”？

我需要一个解决方案，不仅适用于德语、法语和波兰语字符也应该有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:01:22.683

`\w`适用于字母、数字或下划线。您的正则表达式引擎可能会将**单个 Unicode 代码点**视为**单个字符**。在这种情况下，**ü**不会被匹配为单个字符，因为它是**多个代码点**字符（编码为两个代码点）。对于匹配多个代码点字符，使用`\X`which 匹配单个 unicode 字素，无论它是单个代码点还是多个代码点。

检查[此](http://www.regular-expressions.info/unicode.html)以获取更多信息。

我不确定 Ruby 是否支持`\X`. 否则`\p{L}\p{M}*`可以使用，它匹配一个字母和重音。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T11:01:36.767

尝试

`'ein grüner Hund'.scan(/[[:word:]]+/u)`

[文档](http://www.ruby-doc.org/core-1.9.3/Regexp.html)

# c# - 将 AltChunks 转换为段落并运行

> ID：14851289
> 
> 赞同：1
> 
> 时间：2013-02-13T10:22:52.427
> 
> 标签：c#, .net, ms-word, openxml, openxml-sdk

我已经实现了一种机制，在该机制中，我使用`AltChunk`. 此实现允许用户频繁更改数据。当这些更改被触发时，我会创建另一个`AltChunk`来替换以前的内容。但是，较旧的块仍然会影响文件大小，并且它会增加，直到文件被手动打开并保存在`WinWord.Exe`

场景：我尝试插入 10 张图像，使用`AltChunk`这些图像将文件大小从 18K 增加到 2187K。接下来，我尝试用一​​个普通的小字符串替换这 10 个图像。该文档已更新为新内容，但大小仍为 2187K。然后当我手动打开文件`WinWord.Exe`并保存时，大小又回到了 19K。在研究中，我发现 Word 应用程序将转换`AltChunk`为段落和运行。

我的问题：我可以模仿这个 Word Application 的行为`Open Xml`吗？

请查找此相关帖子以更好地了解我在做什么 [AltChunk 破坏富文本内容控制](https://stackoverflow.com/questions/14831570/altchunk-corrupts-rich-text-content-control/14831662#comment20780962_14831662)

# lisp - 可以像在 C# 中一样在 LISP 中重载函数吗？

> ID：14851296
> 
> 赞同：6
> 
> 时间：2013-02-13T10:23:16.890
> 
> 标签：lisp, overloading

我发现重载在我的 C# 代码中非常有用。我知道它也可以用许多其他语言来完成（当然是 C++）。

LISP 是否允许重载或类似的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-28T12:46:16.690

Common Lisp 没有。

Common Lisp 不支持“重载”。

Common Lisp 通过 CLOS 提供多态性，但不提供重载。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T10:27:44.573

是的，它确实有“类似的东西”，但更强大：[通用函数](http://clhs.lisp.se/Body/m_defgen.htm)。

**编辑：**我不知道重载的定义意味着编译时解析。谢谢雷纳·乔斯维格。

# emacs - 如何让 Emacs Dired 使用不区分大小写的字母顺序

> ID：14851302
> 
> 赞同：2
> 
> 时间：2013-02-13T10:23:30.347
> 
> 标签：emacs, dired

如何让 Emacs Dired 以不区分大小写的字母顺序列出我的文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-09T09:41:52.193

我在我的中使用以下内容`.emacs`：

```
(require 'ls-lisp)
(setq ls-lisp-use-insert-directory-program nil)
(setq ls-lisp-ignore-case 't) 
```

# silverlight-4.0 - 在 TreeViewItem 上未触发 MouseLeftButtonDown

> ID：14851305
> 
> 赞同：2
> 
> 时间：2013-02-13T10:23:39.663
> 
> 标签：silverlight-4.0, silverlight-toolkit

```
<Grid x:Name="LayoutRoot" Background="White">
    <sdk:TreeView MouseLeftButtonDown="TreeView_MouseLeftButtonDown">
        <sdk:TreeViewItem Header="this is first item"/>
    </sdk:TreeView>
</Grid> 
```

* * *

调用不会出现在 TreeView_MouseLeftButtonDown 事件处理程序中。有什么想法或解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T05:08:53.960

您是否注意到单击 Silverlight 按钮时不会触发 MouseLeftButtonDown 和 MouseLeftButtonUp 事件？这样做的原因是按钮通过覆盖 OnMouseLeftButtonDown 和 OnMouseLeftButtonUp 处理程序来处理这两个事件本身。在 OnMouseLeftButtonDown 覆盖中，引发 Click 事件，并且 MouseLeftButtonDown 事件被标记为已处理，因此它不会在可视树中冒泡。OnMouseLeftButtonUp 覆盖还将 MouseLeftButtonUp 标记为已处理。

可以使用 Button 控件的 ClickMode 属性更改此内容。它具有以下值 - 悬停、按下、释放。默认是 Pressed，我们已经解释过了。当我们将 ClickMode 设置为 Release 时，将在 OnMouseLeftButtonUp 覆盖中引发 Click 事件，并且 MouseLeftButtonDown 和 MouseLeftButtonUp 事件将再次在按钮内处理。如果我们将 ClickMode 设置为 Hover，则 Click 事件将与 MouseEnter 事件一起引发，我们也将能够使用鼠标按钮事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-30T17:08:36.960

这背后的原因是因为也`TreeView`处理此类事件。要覆盖此类处理，您必须使用以下代码在代码中处理它：

```
treeItem.AddHandler(UIElement.MouseLeftButtonDownEvent, new MouseButtonEventHandler(treeItem_MouseLeftButtonDown), true); 
```

# sql-server - 删除两条相似的记录

> ID：14851308
> 
> 赞同：1
> 
> 时间：2013-02-13T10:23:45.380
> 
> 标签：sql-server

我对 SQL 很陌生，所以想帮助我解决我遇到的问题。

我使用软件来监控放置在某些电脑上的文件，当一个文件被写入时，一条记录被写入数据库，当它被删除时再次写入。我想删除具有这两条记录的任何记录。该表与下表类似。

操作列在创建文件时显示 0，在删除时显示 1

```
datetime       File hash value                       action
130213 14:33 | FDFGDFGDFGDFDFGVBVNVBNVBNVBNVNVBNVB | 0
130213 14:34 | FDFGDFGDFGDFDFGVBVNVBNVBNVBNVNVBNVB | 1 
```

任何帮助，将不胜感激。小号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:28:34.477

您可以使用连接来要求有另一个操作的记录：

```
delete  t1
from    Table1 t1
join    Table1 t2
on      t1.[File hash value] = t2.[File hash value]
        and t1.Action <> t2.Action; 
```

要预览将被删除的行，请替换`delete`为`select`：

```
select  t1.*
from    Table1 t1
join    Table1 t2
on      t1.[File hash value] = t2.[File hash value]
        and t1.Action <> t2.Action; 
```

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!6/ea2f1/1/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:40:20.880

如果您使用的是 SQL Server 2005 或更高版本，您可以尝试以下操作：

```
WITH marked AS (
  SELECT
    CanDelete =
      CASE MIN(Action) OVER (PARTITION BY FileHashValue)
      WHEN MAX(Action) OVER (PARTITION BY FileHashValue)
      THEN 0
      ELSE 1
      END
  FROM atable
)
DELETE FROM marked
WHERE CanDelete = 1
; 
```

`marked`CTE 检查每一行对应的`FileHashValue`最小动作是否与最大动作相同。如果不是，则将该行标记为删除。

基于该属性，在主查询中删除行，其中 CTE 用作 DELETE 语句的目标。

查询假定`Action`是`int`并且只能是`0`或`1`。如果是`bit`，请将上面的两个`Action`条目替换为`CAST(Action AS int)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T10:31:18.627

```
create table test (
    dt datetime,
    hv varchar(255),
    action int
)

insert into test values (getDate(), '123456', 0);
insert into test values (getDate(), '123456', 1);

delete a1 from test a1
join test a2 on a1.hv = a2.hv
where a1.action <> a2.action 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T10:42:56.543

您可以在子选择中选择要删除的文件

```
delete from files
where file_hashes in (select file_hashes
                      from files
                      group by file_hashes
                      having count(file_hashes) = 2) 
```

[SQLFiddle](http://www.sqlfiddle.com/#!6/d7e5a/1/1)

要查看哪些行将被删除，您可以使用子选择

```
select file_hashes
from files
group by file_hashes
having count(file_hashes) = 2 
```

# c - 通过取消引用数组的指针来计算数组的大小

> ID：14851310
> 
> 赞同：0
> 
> 时间：2013-02-13T10:23:50.770
> 
> 标签：c, arrays, pointers

我的一个同事问了这个问题：[Array size in multidimensional array with pointers](https://stackoverflow.com/questions/14850475/array-size-in-multidimensional-array-with-pointers)

答案都非常明确，因为您无法计算出指针引用的数组的大小。

我最初的想法是首先取消引用指针，然后计算数组本身的大小。为什么这行不通？取消引用指针不会给你完整的数组吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T10:26:27.370

C中*没有*“完整数组”，至少不像您所期望的那样。

数组总是可以表示为指向第一个元素的指针，以及有关数组布局的信息。

此信息在运行时不可用，它是实际数组（如`int foo[6][2][12]`）类型的一部分，因此编译器可以在生成代码以访问元素时直接使用该知识。正如 Lundin 所指出的，可变长度数组（在 C99 中引入）是个例外。对于那些，编译器必须添加运行时代码才能`sizeof`工作。

如果您传递`foo`给函数taking `int *`，则无法神奇地从中重新创建维度数据。所有看起来都一样的指针`int`，你可以传递`&foo[0][0][0]`或者只是一个普通的地址`int`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:27:25.433

不幸的是，C 中没有办法确定数组的大小。数组只是指向内存位置的指针。您必须知道该位置有多少内存是数组的一部分。

这就是为什么标准库中使用数组的大多数方法要么需要以 nul 结尾的数组，要么需要一个额外的参数来告诉它们它们的长度。

# wpf - WPF 自定义 ScrollViewer - 虚拟化时的 ItemHeight

> ID：14851311
> 
> 赞同：3
> 
> 时间：2013-02-13T10:23:53.990
> 
> 标签：wpf, scrollviewer

我有一个使用自定义 ScrollViewer 的 ListBox（在 windows xp 嵌入式触摸屏上提供虚假的“触摸”滚动体验）

```
<ControlTemplate TargetType="{x:Type auc:DragSortableListView}">
    <auc:DragScrollViewer ...>
        <ItemsPresenter .../>
    </auc:DragScrollViewer>
</ControlTemplate> 
```

在那个“DragScrollViewer”中，我使用 IScrollInfo-Interface 来执行效果很好的滚动。

另外，我使用 UI 虚拟化是因为我们有大量数据绑定到列表视图，并且滚动（当虚拟化打开时）发生的不是基于像素，而是基于索引，正如我发现的那样。这意味着如果我通过 IScrollInfo 滚动到垂直偏移 5，它会滚动到第 5 项。

我的问题是，我不知道如何将基于像素的鼠标偏移量（当用户将“鼠标”移动 50 像素时）转换为 IScrollInfo.SetVerticalOffset() 期望的基于项目计数的偏移量（偏移量有是 3，一个项目是 10 像素 => 将偏移设置为 8）。如果我知道 Item-Height 会很容易，但我在 ScrollViewer 中。ScrollViewer 怎么可能知道在可视化树下是否有 ItemsPresenter，对吧？如果物品有不同的高度（不是这种情况，而是假设）怎么办？

有关如何解决该问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:52:34.310

你看过[这篇文章](http://tech.pro/tutorial/907/wpf-tutorial-implementing-iscrollinfo)吗？

在我看来，他将鼠标偏移量存储在 _Offset 中，然后调用 InvalidateArrange()，这可能（只是在这里猜测）依次查询 VerticalOffset 属性并处理适当的滚动。

```
private Vector _Offset;
public double VerticalOffset  { get { return _Offset.Y; } }

public void SetVerticalOffset(double offset)
{
  offset = Math.Max(0, Math.Min(offset, ExtentHeight - ViewportHeight));
  if (offset != _Offset.Y)
  {
    _Offset.Y = offset;
    InvalidateArrange();
  }
} 
```

我想这将永远不需要您将像素偏移量实际转换为项目计数偏移量。如果这不正确，请提供您的 IScrollInfo 实现。

# c# - 使用 c# 在 postgresql 中返回最后插入的 ID

> ID：14851313
> 
> 赞同：1
> 
> 时间：2013-02-13T10:23:57.430
> 
> 标签：c#, .net, postgresql

我是一个在表中插入记录的函数，我想获取插入的 ID。我能怎么做？我必须进行新的查询？

```
 using (NpgsqlConnection conn = new NpgsqlConnection(ConfigurationManager.ConnectionStrings["AxWaveConnection"].ToString()))
        {

            conn.Open();
            NpgsqlTransaction transaction = conn.BeginTransaction();

            String query =
            "INSERT INTO Video (youtubeidvideo, title, rating, viewcount, duration, dataadded, errorflag, schedulingflag, schedulingdate, convertdate) " +
            "VALUES ('" + youtubeIdVideo + "','" + title + "'," + rating.ToString().Replace(',', '.') + "," + viewCount.ToString() +  "," +
            duration.ToString() + ", now(), false, false, null, null); ";

            NpgsqlCommand cmd = new NpgsqlCommand(query, conn, transaction);

            try
            {
                cmd.ExecuteNonQuery();

            }
            catch (Exception e)
            {
                scopeID = -1;        //Duplicate Record
            }

            transaction.Commit();
            conn.Close();
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T10:46:46.070

你可以试试这个：

```
SELECT CURRVAL(pg_get_serial_sequence('my_tbl_name','id_col_name')) 
```

您当然需要提供表名和列名。

这将用于当前会话/连接

[http://www.postgresql.org/docs/8.3/static/functions-sequence.html](http://www.postgresql.org/docs/8.3/static/functions-sequence.html)

你也可以检查这个

[请参阅INSERT](http://www.postgresql.org/docs/8.4/interactive/sql-insert.html)语句的 RETURNING 子句。基本上，INSERT 兼作查询，并返回插入的值。

# python - 如何使 if-elif 条件句更短以进行解析

> ID：14851315
> 
> 赞同：0
> 
> 时间：2013-02-13T10:24:00.773
> 
> 标签：python, string, parsing, if-statement

我正在尝试制作一个程序，该程序在某些用户输入上执行某些任务，例如递增或递减整数，将字符添加到字符串等
。用户可以在同一行中给出多个命令。

当我使用 时`raw_input`，我不能（也不想）采用多线输入。

是否可以使`if-elif-else`条件句更短，但仍保持可读形式？

```
for i in test_str:
    if i == '[':
        a += 1
    elif i == '(':
        b += 1
    elif i == ']' and c > 0:
        c -= 1
    elif i == ')'and d > 0:
        d -= 1
    elif c == 0 and d == 0:
        ret += i
    ... # more elifs 
```

也有`elif`类似的可能性：

```
elif i == 'o':
    if test_str[test_str.index(i)+1] == i: # next char is same
         # handle
    else:
         # handle 
```

我正在使用它进行解析。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:37:58.797

如果您想减少代码使用的行数，您可以`if - elif - else`在一行上简单地执行语句。

```
if i == '[':
    a += 1
elif i == '(':
    b += 1
elif i == ']' and c > 0:
    c -= 1
elif i == ')'and d > 0:
    d -= 1
elif c == 0 and d == 0:
    ret += i 
```

变成：

```
if i == '[': a += 1   
elif i == '(': b += 1   
elif i == ']' and c > 0: c -= 1   
elif i == ')'and d > 0: d -= 1    
elif c == 0 and d == 0: ret += i 
```

* * *

但是，您应该更改正在使用的逻辑，而不是这样做。

首先，您应该使用一个函数，我还建议使用某种映射。

例子：

```
d = {
'[' : ('add', a, 1),
'(' : ('add', b, 1),
']' : ('method', my_method, ['sample_arg1', 'sample_arg2'], {'sample_kwarg' : 'sample value'})} 

def check_char(char, mapping):
    mapper = d.get(char, None)
    if mapper:
        if mapper[0] == 'add':
            mapper[1] += mapper[2]
        if mapper[0] == 'subtract':
            mapper[1] -= mapper[2]
        if mapper[0] == 'method':
            mapper[1](char, mapper[2], mapper[3])
    # you get the idea....

def my_method(char, *args, **kwargs):
    # deal with char.... 
```

# css - 如何避免CSS中“：之前”之后的换行符

> ID：14851320
> 
> 赞同：14
> 
> 时间：2013-02-13T10:24:25.413
> 
> 标签：css, css-content

在我的网站上，我对某些链接类型使用字体图标。这些图标是通过`:before`CSS 语法添加的。

```
a.some-link:before {
  font-family: icons;
  display: inline-block;
  padding-right: 0.3em;
  content: 'x';
} 
```

但是，当此链接位于行首时，它有时会与其图标分开：

![与链接分离的图标](../Images/443a721af59249076d4ab87f40f3fc1f.png)

我尝试添加`white-space: nowrap`到上面的 CSS 规则，但这没有帮助。

**如何将图标和文本保持在一起？**（CSS 3 没问题）

注意：我不想*用*`white-space: nowrap`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-13T10:42:07.727

只需删除`display:inline-block;`似乎可以解决此问题：

```
a.some-link:before {
    font-family: icons;
    padding-right: 0.3em;
    content: 'x';
} 
```

[JSF](http://jsfiddle.net/MMbKK/)中。

不幸的是，您需要“显示：内联块”来显示 SVG。简单的解决方案是将“display：inline-block”放在“a”上。这将导致您的 SVG 正确渲染，并将 a:before 和 a 保持在同一行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-16T15:25:08.500

向css添加`nowrap`规则要好得多：`:before`

```
white-space: nowrap; 
```

UPD：http: [//jsfiddle.net/MMbKK/5/](http://jsfiddle.net/MMbKK/5/)

规则的原因`nowrap`是在`:before`. 文本内容不需要这条规则来靠近主要元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-02T13:14:11.017

避免在锚点和 :before 之间缠绕的最佳解决方案是：

```
a.some-link {
    display: inline-block;
}
a.some-link::before {
    content: 'x';
} 
```

奖金！为了避免在悬停时为 :before 加下划线：

```
a.some-link::before {
    display: inline-block;
} 
```

# json - 创建标准（）

> ID：14851324
> 
> 赞同：0
> 
> 时间：2013-02-13T10:24:30.157
> 
> 标签：json, hibernate, grails, criteria

我正在尝试创建一个以 JSON 格式返回结果的 REST 服务。

我创建了一个返回搜索结果的方法。它接受搜索参数的 EnumMap，并根据这些参数进行检查以建立 createCriteria。

**我遇到的问题是，无论当前日期/时间是否在“有效期”期间`validFor`，适用于 a 有效期间的都会返回。`tradingName`**

在返回 JSON 的示例中，它应该只带回 中的第一个`names`，因为其他两个`validFor`超出`start`了`end`范围

**查找中心方法**

```
def findCentre(EnumMap searchParams) {

    def c = Centre.createCriteria()
    def results = c.listDistinct {
        if(searchParams.containsKey(CENTRE_SEARCH_PARAMETERS.START_CENTRE_CODE_RANGE) && searchParams.containsKey(CENTRE_SEARCH_PARAMETERS.END_CENTRE_CODE_RANGE)) {
            between("code", searchParams.get(CENTRE_SEARCH_PARAMETERS.START_CENTRE_CODE_RANGE), searchParams.get(CENTRE_SEARCH_PARAMETERS.END_CENTRE_CODE_RANGE))
        }

        if(searchParams.containsKey(CENTRE_SEARCH_PARAMETERS.CENTRE_CODE_PARTIAL)) {
            like("code", "%" + searchParams.get(CENTRE_SEARCH_PARAMETERS.CENTRE_CODE_PARTIAL) + "%")
        }

        if(searchParams.containsKey(CENTRE_SEARCH_PARAMETERS.INDIVIDUAL_CENTRE_CODE)) {
            eq("code", searchParams.get(CENTRE_SEARCH_PARAMETERS.INDIVIDUAL_CENTRE_CODE))
        }

        if(searchParams.containsKey(CENTRE_SEARCH_PARAMETERS.CENTRE_NAME_PARTIAL)) {
            names {
                ilike("tradingName", "%" + searchParams.get(CENTRE_SEARCH_PARAMETERS.CENTRE_NAME_PARTIAL) + "%")
                validFor {
                    and {
                        le("start", new Date())
                        ge("end", new Date())
                    }
                }
            }
        }
    }
    results
} 
```

我得到的 JSON 响应看起来像这样

```
[
{
    "code": "1",
    "names": [
        {
            "trading_name": "ABC",
            "valid_time": {
                "start": "2013-02-13T08:54:31Z",
                "end": "2018-02-12T08:54:31Z"
            }
        },
        {
            "trading_name": "ABCDEF",
            "valid_time": {
                "start": "2013-03-31T23:00:00Z",
                "end": "2013-12-31T00:00:00Z"
            }
        },
        {
            "trading_name": "DEF",
            "valid_time": {
                "start": "2013-03-31T23:00:00Z",
                "end": "2013-12-31T00:00:00Z"
            }
        }
    ],
    "email": "blah@blah.com"
}
] 
```

我认为问题出在`findCentre`方法上，但我目前缺乏 Grails 经验导致我遇到挫折。您能给我的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:47:02.173

返回的结果是完整的`Centre`对象 - 您将搜索限制为*当前*名称与模式匹配的对象，然后返回匹配对象已知的所有名称，无论日期如何。

最简单的方法可能是对标准结果进行后过滤，而不是直接返回它们

```
Date now = new Date()
return results.collect { res ->
  [code: res.code,
   names: res.names.findAll { it.start <= now && it.end >= now }*.tradingName,
   email: res.email ]
} 
```

这应该给你 JSON 之类的

```
[
  {"code":"1",
   "names":["ABC"],
   "email": "blah@blah.com"
  }
] 
```

# python - 如何在python中导入命名网站

> ID：14851326
> 
> 赞同：0
> 
> 时间：2013-02-13T10:24:32.473
> 
> 标签：python, web.py, importerror

我尝试在 Windows -64bit- 上安装 web.py

我没有安装。

错误：“ ImportError：没有名为'utils'的模块”

```
from __future__ import generators
import utils, db, net, wsgi, http, webapi, httpserver, debugerror
import template, form

import session

from utils import *
from db import *
from net import *
from wsgi import *
from http import *
from webapi import *
from httpserver import *
from debugerror import *
from application import *
from browser import *
try:
    import webopenid as openid
except ImportError:
    pass # requires openid module 
```

我用python3.3

错误的原因是我使用python3.3吗？

我尝试使用 easy_install 进行安装。

但是又报错了。

Easy_install 需要 python2.3。

所有的问题都是python 3.3？

如何在python中导入命名网络？

谢谢..！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:36:01.503

据我所知，web.py 不支持 Python 3+

[https://groups.google.com/forum/?fromgroups=#!topic/webpy/Qa-U1kABk4w](https://groups.google.com/forum/?fromgroups=#!topic/webpy/Qa-U1kABk4w)

> 不用说，在我看来还有工作要做，但这并非不可能。对于维护者，你们有任何转向 Python 3 的计划吗？我很乐意帮助使这成为可能。

问题跟踪器：[https ://bugs.launchpad.net/webpy/+bug/277266](https://bugs.launchpad.net/webpy/+bug/277266)

> 让 web.py 为 Python 3.0
> 受让人做好准备：anandology
> 重要性：中等
> 里程碑：0.35
> 状态：已确认

# sql - “Between”运算符在使用参数时生成错误的查询计划

> ID：14851328
> 
> 赞同：4
> 
> 时间：2013-02-13T10:24:44.097
> 
> 标签：sql, sql-server, sql-server-2008-r2

我有一个简单的日期表 (Date, DateID)，其中包含 1900 年 1 月 1 日至 2100 年 12 月 31 日之间的日期列表。

当使用`between`运算符和硬编码参数值从表中进行选择时，我得到了一个正确的查询计划，其中包含 3 个估计行与 2 个实际行：

```
select v.Date from Dates v
where v.Date between '20130128' and '20130129'; 
```

然而，当用参数替换硬编码的值时，查询计划变成了一个非常糟糕的计划，估计有超过 6000 行，而实际只有 2 行：

```
select v.Date from Dates v
where v.Date between @startdate and @enddate; 
```

查询计划本身是相同的，只是估计行的差异导致参数化查询的运行速度比硬编码查询慢约 4 倍。关于为什么参数化版本运行速度如此之慢以及我可以为 SQL Server 提供哪些索引/提示来帮助它使用正确的查询计划，我有什么遗漏吗？

一些附加信息：

*   使用简单的相等标准时不会出现问题`=`，它似乎特定于`between`操作员。
*   如果我添加`option(recompile)`到参数化查询的末尾，我会得到一个完美的查询计划，与硬编码查询相同。
*   日期表只有两列，即 Date 和 DateID，主键 DateID 列上有一个聚集索引，而 Date 列上有一个唯一的非聚集索引。都有更新的统计数据。
*   查询计划对硬编码查询执行自动参数化，用@1 和@2 替换硬编码值，并将查询显示为大写。它似乎没有对参数化查询执行任何转换。
*   使用 SQL Server 2008 R2。

我知道足以~~意识到~~ 这是某种参数嗅探问题*。*为什么不添加`option(recompile)`到查询中？这被用作更大的复杂查询的一部分，我理解好的做法是让 SQL Server 做它的事情并在可能的情况下重用缓存中的查询计划。

编辑和更新：感谢迄今为止的周到回复。为了进一步细化问题，查询计划对上述两个查询都使用了一个非常好的索引，但是为什么它不能识别参数化查询的日期范围只有两天宽，为什么它认为范围是 6000行宽？尤其是当查看查询计划时，SQL Server 无论如何都在为硬编码查询执行自动参数化？在底层查询计划中，两个计划看起来相同，因为它们都是参数化的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T10:41:32.250

查询计划基于您首次运行查询时的参数值。这称为[参数嗅探](http://www.sommarskog.se/query-plan-mysteries.html)。添加时`option (recompile)`，每次执行都会生成一个新计划。

查询计划基于 SQL 查询的哈希值进行缓存。因此，两个版本的查询都有不同的缓存槽。

添加`option (recompile)`是一个很好的解决方案。您还可以使用：

```
option (optimize for (@startdate = '20130128', @enddate = '20130129')); 
```

生成查询计划，就好像这些值已被传入一样。

为了进行测试，您可以使用以下命令从缓存中删除所有计划：

```
DBCC FREEPROCCACHE 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T10:53:01.447

问题可能是由于[参数嗅探](http://blogs.technet.com/b/mdegre/archive/2012/03/19/what-is-parameter-sniffing.aspx)，一种旨在根据您第一次传递的参数优化查询计划的技术。

过去，我在使用日期参数嗅探参数方面有过不好的经历 - 参数嗅探显然有可能最初为查询输入的值不代表查询的典型使用（导致查询计划针对非-典型值），但是特别是对于日期参数，我经常发现生成的查询计划实际上对于提供的**所有**值都非常低效。我不知道为什么这会禁用参数嗅探通常会修复它。

您可以通过使用[`OPTIMIZE FOR UNKNOWN`](http://blogs.msdn.com/b/sqlprogrammability/archive/2008/11/26/optimize-for-unknown-a-little-known-sql-server-2008-feature.aspx)（我从未使用过，因此无法保证它有效）来防止 SQL Server 参数嗅探，或者将参数复制到局部变量中似乎可以防止 SQL Server 能够执行参数嗅探

```
-- Perform the query using @StartDateLocal and @EndDateLocal
DECLARE @StartDateLocal DATETIME;
SET @StartDateLocal = @StartDate; 
```

以这种方式禁用参数嗅探比每次都强制重新编译查询计划要好，因为与执行查询的成本相比，编译查询计划通常相对昂贵，除非查询相当慢。

# sql - oracle中如何单独列出用户表

> ID：14851335
> 
> 赞同：1
> 
> 时间：2013-02-13T10:25:01.943
> 
> 标签：sql, oracle

对于以下四个获取用户定义对象名称的查询，系统相关的对象名称我只需要用户定义的对象名称。为此我做什么？

```
select trigger_name from user_triggers;
select TABLE_NAME from user_tables
select view_NAME from user_views
select table_name constraint_NAME from user_constraints; 
```

第一次查询结果会是这样。

```
DEF$_PROPAGATOR_TRIG
REPCATLOGTRIG
TRG   (user defined)
TRIG1 (user defined)
TRIG3 (user defined) 
```

我只需要最后三个触发器名称。有什么办法吗？

谢谢甘尼什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-15T14:13:01.700

这应该给你一些用户创建的表

```
select owner
     , object_name
     , object_type
  from ALL_OBJECTS
 where owner = 'someuser' and object_type = 'TABLE'; 
```

# mysql - 如果 ID 列是主键，我是否需要在 mySQL 表上添加索引？

> ID：14851339
> 
> 赞同：8
> 
> 时间：2013-02-13T10:25:26.583
> 
> 标签：mysql, join, indexing, outer-join

我在 mySQL 中有一个表，其中“id”列是主键：

```
CREATE TABLE `USERS` (
  `ID` mediumint(9) NOT NULL auto_increment,
  .....
  PRIMARY KEY  (`ID`),
  KEY `id_index` (`ID`)
) ENGINE=MyISAM AUTO_INCREMENT=267 DEFAULT CHARSET=latin1; 
```

我还添加了一个索引，如下所示：

```
CREATE INDEX id_index ON USERS (id); 
```

我需要这样做吗？还是主键自动索引？

这里的最终目标是加快连接表 USERS 的 id 列的查询。

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-13T10:36:43.707

不，你不需要这样做。

主键被自动索引。您需要的是索引其他表中的外键列。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T10:28:33.593

您不需要向 PK 添加额外的索引。

**[使用主键](http://dev.mysql.com/doc/refman/5.5/en/optimizing-primary-keys.html)**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-13T13:19:38.347

默认情况下，主键像 INDEX KEY 一样工作。您不需要创建它来索引键。

# android - 如何在 Spinner 中选择项目？

> ID：14851342
> 
> 赞同：0
> 
> 时间：2013-02-13T10:25:28.897
> 
> 标签：android, dialog, spinner

我的 DIALOG 中有一个微调器，我想在单击“确定”按钮时选择该项目。每次我在对话框中按“确定”。NullPointerException 总是出现。

注意：我的微调器位于对话框中。

```
 builder.setView(inflater.inflate(R.layout.dialog_sendtransfer_layout, null))
               .setPositiveButton("OK", new DialogInterface.OnClickListener() {
                   @Override
                   public void onClick(DialogInterface dialog, int id) {                         
                       fromSpin.setOnItemSelectedListener(new OnItemSelectedListener() {                          
                        @Override
                        public void onItemSelected(AdapterView<?> arg0,
                                View arg1, int arg2, long arg3) {
                            fromSite = arg0.getItemAtPosition(arg2).toString();

                        }

                        @Override
                        public void onNothingSelected(AdapterView<?> arg0) {
                            // TODO Auto-generated method stub

                        }  });
                       //fromSite = fromSpin.getItemAtPosition(fromSpin.getSelectedItemPosition()).toString();
                     //toSite = toSpin.getItemAtPosition(toSpin.getSelectedItemPosition()).toString();
                     Toast.makeText(getBaseContext(),"From: " + fromSite, Toast.LENGTH_LONG).show();

                   } 
```

LOGCAT

```
 02-13 10:57:08.513: E/AndroidRuntime(2430): FATAL EXCEPTION: main
02-13 10:57:08.513: E/AndroidRuntime(2430): java.lang.NullPointerException
02-13 10:57:08.513: E/AndroidRuntime(2430):     at com.aws.ojt.activities.TransferCore$1.onClick(TransferCore.java:132)
02-13 10:57:08.513: E/AndroidRuntime(2430):     at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:166)
02-13 10:57:08.513: E/AndroidRuntime(2430):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-13 10:57:08.513: E/AndroidRuntime(2430):     at android.os.Looper.loop(Looper.java:137)
02-13 10:57:08.513: E/AndroidRuntime(2430):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-13 10:57:08.513: E/AndroidRuntime(2430):     at java.lang.reflect.Method.invokeNative(Native Method)
02-13 10:57:08.513: E/AndroidRuntime(2430):     at java.lang.reflect.Method.invoke(Method.java:511)
02-13 10:57:08.513: E/AndroidRuntime(2430):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-13 10:57:08.513: E/AndroidRuntime(2430):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-13 10:57:08.513: E/AndroidRuntime(2430):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:31:07.057

```
Spinner mySpinner = (Spinner)findViewById(R.id.spinner);
String Text = mySpinner.getSelectedItem().toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:41:29.090

您的侦听器代码不应位于对话的 OnClick 内。将范围分开。

```
String str="";
fromSpin.setOnItemSelectedListener(new OnItemSelectedListener() {                          
                    @Override
                    public void onItemSelected(AdapterView<?> arg0,
                            View arg1, int arg2, long arg3) {
                        str= arg0.getItemAtPosition(arg2).toString();

                    }

                    @Override
                    public void onNothingSelected(AdapterView<?> arg0) {
                        // TODO Auto-generated method stub

                    }  });
                   //fromSite = fromSpin.getItemAtPosition(fromSpin.getSelectedItemPosition()).toString();
                 //toSite = toSpin.getItemAtPosition(toSpin.getSelectedItemPosition()).toString();
                 Toast.makeText(getBaseContext(),"From: " + fromSite, Toast.LENGTH_LONG).show();

               }

// somewhere down below the OnClick goes like..
builder.setView(inflater.inflate(R.layout.dialog_sendtransfer_layout, null))
           .setPositiveButton("OK", new DialogInterface.OnClickListener() {
               @Override
               public void onClick(DialogInterface dialog, int id) {  
//whatever you want to do with "str" here..
Toast.makeText(getBaseContext(),"From: " + str, Toast.LENGTH_LONG).show();

               }}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T10:29:39.380

尝试这个，

```
public class SpinnerActivity extends Activity implements OnItemSelectedListener{
Spinner spinner;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    spinner = (Spinner) findViewById(R.id.spinner);

    //Register a callback to be invoked when an item in this AdapterView has been selected.
    //The argument is the callback that will return
    spinner.setOnItemSelectedListener(SpinnerActivity.this);

    // Adapter for spinner
    ArrayAdapter<?> adapter = ArrayAdapter.createFromResource(getApplicationContext(),  R.array.spinnerItems, android.R.layout.simple_spinner_dropdown_item);
    // Sets the layout resource to create the drop down views
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    //The Adapter is used to provide the data which backs this Spinner.
    spinner.setAdapter(adapter);
}

@Override
public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {

    // On selecting a spinner item
    String item = parent.getItemAtPosition(position).toString();

    // showing a toast on selecting an item 
    Toast.makeText(parent.getContext(), item, Toast.LENGTH_LONG).show();

}

public void onNothingSelected(AdapterView<?> arg0) {

}

} 
```

# c# - 如何找到asp中继器控件并将数据绑定到它

> ID：14851343
> 
> 赞同：0
> 
> 时间：2013-02-13T10:25:31.763
> 
> 标签：c#, asp.net

我有一些像 'rpA'、'rpB' 等 id 直到 'rpZ' 的 asp 中继器控制。我想做的是我想在后面的代码中找到asp中继器并相应地绑定一个数据源。到目前为止我写的代码如下，其中'i'是一个int，范围从65到90。并且'tb' 是一个数据表。

```
 string lblName = "lbl" + Convert.ToChar(i);
                   string repName = "rp" + Convert.ToChar(i);
                   FindControl(lblName).Visible = true;
                   FindControl(repName).Visible = true;
                   IDataBoundControl repID = FindControl(repName) as IDataBoundControl;
                   ITextControl lblID = FindControl(lblName) as ITextControl;
                   lblID.Text = (Convert.ToChar(i)).ToString();
                   repID.DataSource = tb;
                   repID.DataBind(); 
```

但我无法 DataBind()。最后一行给出错误“System.Web.UI.WebControls.IDataBoundControl 不包含 DataBind 的定义”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T10:29:30.447

如果您知道类型，请执行以下操作：

```
var repID = FindControl(repName) as Repeater;
repID.DataSource = tb;
repID.DataBind(); 
```

没有必要将其转换为，`IDataBoundControl`因为这个接口没有方法`DataBind()`（更多信息[在这里](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.idataboundcontrol.aspx)）

# extjs4 - 从非 NodeInterface 格式的数据创建 ExtJS 树

> ID：14851344
> 
> 赞同：1
> 
> 时间：2013-02-13T10:25:30.833
> 
> 标签：extjs4, treepanel

我正在寻找一种从本地数据存储加载 ExtJS 4.0 树面板的方法。存储中的数据不包含任何 NodeInterface 元素（例如子元素、叶子等）。这样做是为了使单个数据存储可以用于多个视图（例如树、网格、GoogleMap 等）。但是，Tree 面板使用 TreeStore，它要求数据具有特定于 NodeInterface 的元素。有没有办法做到这一点？我可以考虑使用从根节点开始的 NodeInterface 方法动态构建树，但不确定它是否正确。

# ios - iOS 导航到 didSelectRowAtIndexPath 上的其他视图

> ID：14851347
> 
> 赞同：1
> 
> 时间：2013-02-13T10:25:43.690
> 
> 标签：ios, objective-c

我有一个带有表格视图的视图，并且触摸我想导航到其他视图的行。一切正常，但按钮、标签和其他内容没有呈现在视图中。

![故事板](../Images/7dfa6c5b7d4722affc4200c3c3b66c39.png)

为了导航到其他视图，我使用以下代码：

```
GenderViewController *myController = [[GenderViewController alloc] initWithNibName:nil bundle:nil];

[self.navigationController pushViewController:myController animated:YES];
[myController release]; 
```

请问哪里有问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:34:57.443

您使用故事板，因此请为您的 viewController 使用 segue 或标识符。

```
GenderViewController *myController = [[GenderViewController alloc] initWithNibName: nil bundle:nil]; 
```

不会有太大帮助，因为您没有提供笔尖名称（我认为您不能将它与情节提要一起使用，因为您没有笔尖名称，但不是 100% 确定）。

在 Interface Builder 中设置 viewController 的标识符并像这样实例化它：

```
GenderViewController *myController = [self.storyboard instantiateViewControllerWithIdentifier: @"yourIdentifier"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:35:29.587

实际上你有`GenderViewController`nib 文件。但是，当您分配类`GenderViewController`时，您正在通过传递创建它`nil`。

# git - Git 只检出分支目录中的新文件

> ID：14851349
> 
> 赞同：1
> 
> 时间：2013-02-13T10:25:51.663
> 
> 标签：git, git-checkout

我有这样的情况。一位开发人员正在 ./model 目录中工作，他正在向其中添加新文件，然后提交新的 model_files 并推送到 origin/master

现在第二个开发人员也在同一目录 ./model （在他自己的工作目录中）中编写模型。

假设开发者 A 创建了这样的模型：

```
./model/m1.php
./model/m2.php 
```

现在开发者 B 创建了这样的模型：

```
./model/m3.php
./model/m4.php 
```

假设开发人员 A 提交更改并推送到 origin/master，因为开发人员 B 需要 m1.php 和 m2.php 模型来完成他的工作。

开发人员 B 还在项目中创建了许多其他更改/文件夹/文件，不仅在 ./models 目录中，而且他的工作还没有完成。如果他合并或拉动，那么他的工作就会丢失。

开发人员 B 如何仅检索开发人员 A 创建的文件夹 ./model 中的新模型文件。我在开发人员 B 机器上尝试过这样的事情。我假设开发人员 B 没有提交 m3.php 和 m4.php 因为还没有以这些文件结束。他只需要在 ./models 目录中有来自开发人员 A 的新文件（m1.php 和 m2.php）。在开发人员 B 机器上，我尝试了：

```
git fetch origin
git checkout origin/master ./model/* 
```

但不幸的是，错误给了我

```
error: pathspec 'model/m3.php' did not match any file(s) known to git.
error: pathspec 'model/m4.php' did not match any file(s) known to git. 
```

但如果我执行：

```
git checkout origin/master ./model/m1.php ./model/m2.php 
```

然后它可以工作，但这假设我必须知道我需要从这个分支签出的确切文件名。

有人可以帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T10:31:18.633

开发人员 B 应该运行

> 1.  混帐藏匿
> 2.  git pull 起源大师
> 3.  git 存储应用

第 1 行隐藏了开发人员的工作，因此他们的分支在执行拉取之前没有更改

第 2 行从远程的主目录执行获取和合并。这将获得开发人员 A 的更改。

第 3 行重新应用了开发人员 B 在 m3.php 和 m4.php 文件上的工作。

显然，在 git 中执行命令时不要包含数字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T11:28:37.660

我想到了。除了最后的“*”之外，几乎一切都很好。

将文件从远程分支下载到某个项目文件夹的正确方法仅将新文件添加到该文件夹​​：

```
git fetch origin
git checkout origin/master model/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T10:30:22.480

您需要将传入的更改合并到您的工作副本中。为此，只需：

```
git fetch origin
git merge origin/master 
```

为此，您必须首先在计算机 B 中提交或暂存本地更改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-17T14:46:01.010

你的外壳膨胀了

git checkout origin/master ./model/*

在 git 看到它之前。它可能正在扩展到

```
git checkout origin/master ./model/m1.php ./model/m2.php ./model/m3.php ./model/m4.php 
```

然后你从 git 中得到错误，`master`它缺少`model/m3.php`和`model/m3.php`. 告诉外壳不要扩展你的`*`，比如

```
git checkout origin/master './model/*' 
```

似乎可以工作，或者只是按照其他解决方案使用显式路径，例如

```
git checkout origin/master model/ 
```

# jquery - Jquery 在 Safari 中提交表单

> ID：14851351
> 
> 赞同：1
> 
> 时间：2013-02-13T10:26:12.597
> 
> 标签：jquery, html, forms, safari, submit

在 HTML 中：

```
<form id="deleteMessages" name="deleteMessages" action="/deleteInboxMessage" method="post">
    <!--some input elements here-->

    <input type="submit" id="delete" value="delete"/>
</form> 
```

我使用 jquery 提交表单：

```
$('#delete').bind('click', function(e){
    e.preventDefault();
    //some logic here
    $('#deleteMessages').submit();
}); 
```

它适用于 Firefox、IE、Chrome、Opera，但不适用于 Safari（在 Windows 中）。在 Safari 中发生的事情是它会打开一个与页面内容相同的新选项卡。有什么问题？为什么 Safari 会打开一个新标签页？

我也尝试了按钮而不是提交，但同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:34:34.003

不要在提交按钮单击或表单提交事件中提交表单

利用

```
$('#deleteMessages').on('submit', function(e){
  e.preventDefault();
  //some logic here
  some AJAX here!
}); 
```

或者

```
$('#deleteMessages').on('submit', function(e){
  //some logic here
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-20T10:08:42.637

我也遇到了这个问题，找不到合适的解决方法。

相反，我这样做了：

首先，将您的提交更改为按钮。

```
<input type="button" value="Submit" class="btn loading"> 
```

导入 Jquery Validate，这将确保在提交之前验证任何“必填”字段：

`<script src="//ajax.aspnetcdn.com/ajax/jquery.validate/1.13.0/jquery.validate.min.js"></script>`

然后添加此代码。它适用于您设置的任何按钮`class="btn loading"`

```
$(function(){
        $(".btn.loading").click(function(e)
        {
            var btn = $(this);

            if (btn.closest('form').valid()) {
                btn.html('<i class="fa fa-refresh fa-spin"></i> Uploading...Please wait').prop("disabled",true);
                setTimeout(function() {
                    btn.closest('form').submit();
                },100);
            }
        });
    }); 
```

超时是必要的，否则当您在 Safari 上调用 .submit() 时，其他所有内容都会在队列中延迟。

适用于 Mac 上的 Safari、Chrome 和 Firefox（可能也适用于 Windows）。

编辑：也在 Windows 7 上的 IE9 中测试和工作。

另外，不要忘记这样做会`$_POST['SubmitButtonName']`从您发布的变量列表中删除。因此，如果您正在检查，请`$_POST['buttonName']`务必更改逻辑或添加隐藏字段。

# linux - Windows 上 ubuntu 服务器和 ubuntu 客户端的不同行为

> ID：14851353
> 
> 赞同：0
> 
> 时间：2013-02-13T10:26:18.133
> 
> 标签：linux, shell, unix, ubuntu

```
#!/bin/bash

# Reading

cat /home/radiare/Desktop/first.txt | while read LINE

do
if [ "$LINE" == "false" ]; then
echo "Inside first loop"
break
fi
done

cat /home/radiare/Desktop/second.txt | while read LINE

do
if [ "$LINE" == "false" ]; then
echo "Inside second loop"
break
fi
done 
```

在 ubuntu 客户端中，如果语句正常工作，我可以执行此脚本并在内部回显。我在 ubuntu 服务器上做了同样的事情，它没有进入 if 语句。唯一的区别是我在服务器上使用 sudo 运行。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T02:45:29.250

奇怪，我不能评论，只能“回答”。

我认为该文件是MS DOS格式，当您在windows上的ubuntu客户端下运行脚本时，它会理解MS DOS格式，并相应地对待它。

但是，在服务器端，当你使用 read LINE 读入 MS DOS 格式的行时，你也会读入结尾的 \r 字符。

我敢打赌这就是原因。尝试

```
tr -d '\015' /home/radiare/Desktop/first.txt 
```

首先并再次运行您的脚本。

# python - Mac OS X Lion上的python“ImportError：无法导入名称urandom”

> ID：14851357
> 
> 赞同：1
> 
> 时间：2013-02-13T10:26:29.360
> 
> 标签：python, macos

自从我上次使用 macport 更新 python (nonw 2.7.3) 以来，我遇到了以下问题：

```
Traceback (most recent call last): File "", line 4, in File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/smtplib.py", line 46, 
in import email.utils File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/email/utils.py", line 27, 
in import random File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/random.py", line 47, 
in from os import urandom as _urandom 
ImportError: cannot import name urandom 
```

我正在运行：

*   OS X 版本 10.7.5
*   蟒蛇版本2.7.3
*   $PATH:/opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin

你能帮帮我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:21:23.263

尝试更新您的 Xcode 命令行工具。

# css - Firefox 的 CSS3 3D Transform Cube 渲染问题

> ID：14851360
> 
> 赞同：2
> 
> 时间：2013-02-13T10:26:36.257
> 
> 标签：css, transform

我想创建一个 3d 立方体滑块。
它几乎准备就绪： http: [//grtest.hu/cube/](http://grtest.hu/cube/)
在 Chrome 中，旋转动画很好，但在 Firefox 中，旋转时幻灯片之间有一个空间：

![轮换问题](../Images/5b8c29ac90289cebb2b64f84b61d0e5f.png)

有没有办法修复 Firefox 中的动画？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:44:59.370

Mozilla Firefox 和 Google Chrome 都使用不同的工具包来呈现 CSS3。使用 -moz- 并尝试一下。Chrome 和 Safari 使用 -webkit- 而 Opera 使用 -o-

我不知道我是否有意义！让我知道你是否还有别的意思:)

# xpages - 如何在 CSJS 运行时确定字段 ID？

> ID：14851361
> 
> 赞同：2
> 
> 时间：2013-02-13T10:26:39.830
> 
> 标签：xpages

这是场景：

我们在 Xpage 上有两个字段需要通过 Ajax 调用来填充。Ajax 调用的返回是一个 json 结构。在旧式 Web 开发中，我们使用prototype.js 进行此操作：

```
$H( json ).each(function(pair){
    try {
        $( pair.key ).value = pair.value  
    }
    catch(err) { }
}); 
```

这里的假设是我们的 fieldIDs 等于 json 键。

```
{
    "fieldID1":"value1",
    "fieldID2":"value2"
} 
```

Xpages CSJS 需要在脚本中存在字段 ID 占位符，以便能够转换为字段在 Xpage 上的实际 ID：

```
$("#{id:fieldID1}").value = json.fieldID1;
$("#{id:fieldID2}").value = json.fieldID2; 
```

如何使用如下方式确定 CSJS 运行时中的实际字段 ID：

```
$H( json ).each(function(pair){
    try {
        $("#{id:"+pair.key+"}").value = pair.value  
    }
    catch(err) { }
}); 
```

*我们的实际表单有 +10 个要填充的字段，并且根据情况动态“加载”这些字段，因此我们在表单上有 2…n 个字段要由 ajax/json 填充。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T11:25:42.110

好的，问题是 XPage 在提供给浏览器时不知道 id。它是使用 pair.key 计算的。Marky Roden 在这方面写了几篇非常好的文章，我认为您可能会在其中找到适合您的解决方案。看：

[http://xomino.com/2012/01/26/using-jquery-selectors-in-xpages/](http://xomino.com/2012/01/26/using-jquery-selectors-in-xpages/)

和

[http://xomino.com/2012/02/02/jquery-selector-function-for-xpages-xidinputtext1/](http://xomino.com/2012/02/02/jquery-selector-function-for-xpages-xidinputtext1/)

HTH ;-)

/约翰

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T13:06:42.217

这是来自 SSJS 的*getComponent()*方法的 CSJS 实现：

```
/**
 * getComponent
 *
 * CSJS implementation of SSJS's getComponent method
 *
 * @param serverId  ComponentId to search for
 * @param fromObj   DOM object to start with
 * @author Sven Hasselbach
 * @version 0.3
 */
function getComponent( serverId, fromObj ){

    var found = false;
    var obj = fromObj;
    var id = "";

    while( obj ){
        try{
            id = obj.id.split(":").pop();
        }catch(e){}

        if( id == serverId )
            return obj;

        ret = findComponent( serverId, obj );
        if( ret )
            return ret;

        obj = obj.parentNode;
    }

}

/**
 * findComponent
 * 
 * searches the component tree for a specific
 * server id
 */
function findComponent( searchId, parentNode ){
    var obj;
    var id = "";

    if( parentNode == null )
        return;

    if( parentNode.hasChildNodes() == false )
        return;

    for( p in parentNode.childNodes ){
        obj = parentNode.childNodes[p];
        try{
            id = obj.id.split(":").pop();

            if( id == searchId )
                return obj;

            ret = findComponent( searchId, obj );
            if( ret )
                return ret;

        }catch(e){}
    }
} 
```

这允许您在组件树中搜索特定的服务器 ID。要使用它，您必须首先定义一个起始组件，因为树是从节点到顶部搜索的。

要获取您的起始节点：

```
var obj = XSP.getElementById( "view:_id1:layoutMain:callbackMiddle:dataViewAllReportsByStatus:1_sumLink" ); 
```

然后搜索另一个组件*layoutLeft* fe：

```
var ret = getComponent("layoutLeft", obj );
alert( ret.id ) 
```

# java - Java LinkedList - 检索操作之间的差异

> ID：14851367
> 
> 赞同：19
> 
> 时间：2013-02-13T10:26:59.670
> 
> 标签：java, linked-list, duplicates, javadoc

在以下每组元素检索操作中的不同方法之间是否有任何区别`LinkedList`？

**返回 null + 删除操作：** `poll()` , `pollFirst()`.

**返回 null + 不删除操作：** `peek()` , `peekFirst()`.

**抛出异常 + 删除操作：** `pop()` , `remove()`, `removeFirst()`.

**抛出异常 + 不删除操作：** `element()` , `getFirst()`.

插入方法中也存在类似的重复。

如果没有这样的区别，我希望在方法的 javadoc 中提到它（类似于古老的“这就像调用......”）。它只是一个草率的文档，还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-13T10:38:15.790

它们之间没有区别，它也在文档中列出，但是您必须进行一些递归搜索才能到达那里。

[`LinkedList`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html)实现两个接口 -[`Queue`](http://docs.oracle.com/javase/7/docs/api/java/util/Queue.html)和[`Deque`](http://docs.oracle.com/javase/7/docs/api/java/util/Deque.html). 并`Deque`从 延伸`Queue`。

现在，`Deque`已经定义了方法——[`Deque#pollFirst()`](http://docs.oracle.com/javase/7/docs/api/java/util/Deque.html#pollFirst%28%29)并继承了方法—— [`Queue#poll()`](http://docs.oracle.com/javase/7/docs/api/java/util/Queue.html#poll%28%29)。

因此，`LinkedList`基本上已经为它实现的两个接口定义了这两种方法。

关于这两种方法之间的相似性，它在文档中列出[`Deque`](http://docs.oracle.com/javase/7/docs/api/java/util/Deque.html)为：

> 该接口扩展了 Queue 接口。当双端队列用作队列时，会产生 FIFO（先进先出）行为。元素在双端队列的末尾添加并从开头删除。从 Queue 接口继承的方法与 Deque 方法完全等价，如下表所示：

并且有一个表格列出了`Queue`类的方法和等效`Deque`方法。参见[`Deque#poll()`](http://docs.oracle.com/javase/7/docs/api/java/util/Deque.html#poll%28%29)，[`Deque#peek()`](http://docs.oracle.com/javase/7/docs/api/java/util/Deque.html#peek%28%29)例如他们清楚地列出了等效方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T10:33:51.283

它们之间的区别在于它们发布的版本和 LinkedList 实现的接口。

**基于`poll()`and的示例`pollFirst()`：**

`LinkedList`**与Java 1.2**一起发布。

**从 1.5** LinkedList 开始实现了 Queue 接口，它有

```
public E poll() 
```

**从 1.6** LinkedList 开始实现了 Deque 接口，它有

```
public E pollFirst() 
```

编辑： ~~由于向后兼容性，保留旧的实现很重要。~~

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-23T01:18:18.723

你的权利是糟糕的文档或其他东西。

peek() 检索但不删除此列表的头部（第一个元素）。

peekFirst() 检索但不删除此列表的第一个元素，如果此列表为空，则返回 null。

这就是它所说的，我在我的 Java 书中读到，头部是列表中的第一项。

# asp.net-mvc-4 - 在 Scaffold 选项下的 Add New Controller 对话框中添加新的 Custom T4 模板

> ID：14851371
> 
> 赞同：4
> 
> 时间：2013-02-13T10:27:06.440
> 
> 标签：asp.net-mvc-4, controller, t4scaffolding

我想实现新的 T4 模板，它应该出现在 Add New Controller 对话框的 Scaffold 选项下。

我已经尝试添加一个新的 View tt 模板。我能够添加它。我需要一份参考资料，从中可以获得有关如何创建新控制器模板而不是修改现有控制器模板的基本信息。

谢谢帕蒂尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:37:43.057

你看过 MVCScaffolding 吗？ [http://nuget.org/packages/MVCScaffolding/](http://nuget.org/packages/MVCScaffolding/)

您可以使用 MVCScaffolding 轻松覆盖控制器 t4 模板：http: [//blog.stevensanderson.com/2011/04/06/mvcscaffolding-overriding-the-t4-templates/](http://blog.stevensanderson.com/2011/04/06/mvcscaffolding-overriding-the-t4-templates/)

# linux - Gnome Shell 上的 Emacs 中的透明背景

> ID：14851372
> 
> 赞同：8
> 
> 时间：2013-02-13T10:27:06.293
> 
> 标签：linux, ubuntu, emacs, transparency, gnome-shell

这个问题是这里之前一个问题的连续性：[How make emacs console mode inherit shell colors](https://stackoverflow.com/questions/14753094/how-make-emacs-console-mode-inherit-shell-colors)

在 Ubuntu 12.10 和 Gnome Shell 3.6.2 上，我正在运行 Emacs。在[http://www.emacswiki.org/emacs/TransparentEmacs](http://www.emacswiki.org/emacs/TransparentEmacs)之后，我可以使用以下方法在我的 Emacs X 窗口上设置 alpha 透明度：

```
(set-frame-parameter (selected-frame) 'alpha '(85 50))
(add-to-list 'default-frame-alist '(alpha 85 50)) 
```

不幸的是，这为我的 emacs 窗口中的所有“项目”设置了透明度，包括包含文本的前景。因此，阅读 Emacs 内容变得困难。我正在寻找的是一种只在背景上设置 alpha 值的方法。通过这种方式，我将能够清楚地看到我的 Emacs 窗口的内容并从 emacs 后面的窗口中读取信息（我使用非常好的 gnome 终端成功地做到了这一点）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-04-14T13:07:34.323

看起来这是不久前提出的问题，但我看不出曼努埃尔在哪里得到了完整的解决方案。我有同样的问题，这就是我想出的。

如果你设置了 shell 的透明度然后运行`emacs -nw -q`，Emacs 的默认行为似乎是遵循你的 shell 设置。如果您没有这样做，那么您可能在某处设置了一些冲突的设置。也许您正在使用将默认背景设置为颜色的主题？如果是这样，您需要更改该设置。

如果您使用的是内置主题之一（例如 adwaita、tango、wombat 等），则这些主题已设置默认背景颜色，这将覆盖 alpha 帧参数。一种解决方案是找到该主题文件并注释掉设置此默认值的行。我的主题位于 /usr/share/emacs/25.3/etc/themes。如果不存在，则切换到暂存缓冲区并评估数据目录变量的值。该目录应该有一个主题子目录。要修改主题文件，您可能需要管理员权限。

杰夫之前给出的代码应该可以工作。请参阅 ELisp 手册的第*28.4 节：框架参数*。另外，请查看*51.1.7：* Emacs 手册的自定义主题。Jeff 的代码将为 Emacs 设置框架的透明度。如果您希望它与您的 shell 应用程序的透明度不同，这很好。如果你只是想让它遵循你的 shell 的行为，就像我说的那样，那是默认的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T05:22:09.790

我的工作正常 - 前景以我在 .Xresources 中设置的颜色可见。也许您可以尝试一下，例如：

```
emacs*foreground: gold
emacs*background: black 
```

可以进去`~/.Xresources`，然后使用命令

```
$ xrdb ~/.Xresources 
```

在用你给出的那两行调用 emacs 之前（在 ~/.emacs 中）：

```
(set-frame-parameter (selected-frame) 'alpha '(85 50))
(add-to-list 'default-frame-alist '(alpha 85 50)) 
```

我更新了上面的内容，将这两行包含在 ~/.emacs 中，因为这些是设置透明度的原因。此外，我确实注意到当我的 emacs 窗口失去焦点时，前景也变得透明。也许这就是你的意思？

# wpf - 如何在 MVVM 中调出其他视图

> ID：14851376
> 
> 赞同：1
> 
> 时间：2013-02-13T10:27:19.367
> 
> 标签：wpf, mvvm

好的。因此，在观看了 Jason Dolinger[对 MVVM 的最佳介绍](http://blog.lab49.com/archives/2650)视频（我向所有开始 WPF 的人推荐。超过一个小时的有趣内容，我保证这一个小时将在未来为您带来很多好的回报）之后，我现在很兴奋在我自己的项目中实现它。

好的。这是我的 MainWindow 类，一个 XAML 窗口，充当我项目的主 MDI 窗口。我为我的窗口添加了一个 ViewModel，要求我的菜单项绑定到 ViewModel 成员，而不是添加事件处理程序等。

到目前为止，一切都很好。现在我需要在将处理用户单击菜单项的命令中编写实际代码。进入相关命令后，我意识到我的命令和 ViewModel 都没有对实际 View 类或其他视图/视图模型的任何引用。

所以我的问题是，如何加载另一个视图以响应命令的执行？它应该全部通过 ViewModel，还是应该命令对象直接访问视图？这里的标准做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:40:08.363

通常，您最终需要将视图（正确连接到其视图模型）添加到某种类型的[`Panel`](http://msdn.microsoft.com/en-us/library/system.windows.controls.panel.aspx). 你如何做到这一点取决于你。

肮脏的解决方案是简单地从某处获取对面板的引用，创建视图和视图模型并将视图添加到面板。这会起作用，但它会将您的命令与许多非常不可取的实现细节结合起来。

为了改善这种情况，您需要开始添加合适的抽象层。看看不同的 MVVM 框架是如何做到这一点的，以了解什么可能运作良好，这将是有用的。例如，Prism 使用[区域](http://msdn.microsoft.com/en-us/library/ff921098%28v=pandp.40%29.aspx#sec10)的概念来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:36:23.527

如果此命令所做的唯一事情与视图相关（没有其他逻辑），则命令可以拥有视图，否则将命令拆分为 2 个命令并组合它们。可以有 ui 命令，只要它们不包含与您的域相关的业务逻辑。

# php - 资产的 Symfony 2 文件结构

> ID：14851381
> 
> 赞同：0
> 
> 时间：2013-02-13T10:27:31.683
> 
> 标签：php, symfony

我正在 Symfony 2 中创建我的第一个项目，我对在每种情况下存储我的资产（CSS、JS、图像等）的位置有点困惑。

我开始了解模板系统是如何工作的，您应该在其中创建独立的捆绑包，然后使用应用程序/资源中的站点特定内容覆盖它们。

但是，当涉及到资产时，我是否在 app/Resources 中为站点特定内容创建了一个“公共”文件夹？

为什么捆绑包的一些资产保存在 web/bundles 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:47:18.720

您必须将 css、图像、js 等放入它们应该属于的包内的文件夹中。该文件夹被调用`public`并包含在`Resources`文件夹中（显然，在其中，您可以为 css、js、...划分创建其他文件夹）。

**完成此操作后**，您可以使用（从命令行**界面**又名CLI **）**以下命令**：**

 ****```
php app/console assets:install web 
```

这样，您就告诉 symfony2（这是默认行为）将包含在文件夹中的所有文件夹**复制**到文件夹中。 Symfony 将创建（或扩展，如果存在）一个名为的文件夹，其中包含您应用程序的所有资产（包括来自供应商的一些资产）。`public``Resources``web`
`bundles`

### 请注意

如果您运行上述命令，则您正在制作资源的副本，因此每次更改它们时，您都必须再次启动命令本身。更好的方法是使用符号链接更改上述命令，如下所示

```
php app/console assets:install web --symlink 
```

文件夹作为目标文件夹的原因`web`是，您的 Web 服务器（apache 或其他相同）应该只访问其中包含的资源，并让 symfony2 重新获取所有资源的任务。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:30:36.090

试试 Symblog 教程... [Symblog](http://tutorial.symblog.co.uk/)

[这](http://tutorial.symblog.co.uk/docs/customising-the-view-more-with-twig.html)部分特别是关于资产****

# linux - Web 浏览器创建与本地机器的套接字连接。

> ID：14851383
> 
> 赞同：0
> 
> 时间：2013-02-13T10:27:38.867
> 
> 标签：linux, html, web-services, web

我对 Web 技术非常陌生。抱歉，如果问题非常基本。

1）有一个网站叫xyz.com。

2）假设我的系统有一个可以与套接字交互的守护进程。

3) 当我点击 xyz.com 时，我需要与守护进程提供的本地机器套接字进行交互。

即：网络浏览器和本地机器之间的通信，无需服务器交互。

**问题：**

可能吗 ？如果是这样，请建议我可以使用哪些工具？

HTML5？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:47:45.300

[你应该先看看这篇文章。](https://developer.mozilla.org/en-US/docs/WebSockets)HTML5 规范包含一个 websocket API，允许您这样做。但在使用任何客户端之前，您首先需要一个服务器实现。NodeJS 已经有一个 SocketIO，并且已经提供了一个 PEAR 包。请在任何实施之前检查您的服务器端可用性。

安吉拉

# android - 创建一个白色背景和顶部带有透明颜色的 PNG 的启动画面

> ID：14851387
> 
> 赞同：0
> 
> 时间：2013-02-13T10:27:48.687
> 
> 标签：android

我们有一个用于 android 应用程序的单声道，它目前正在显示一个漂亮的初始屏幕，屏幕中心有一个徽标 PNG。

但是，屏幕背景是黑色的，这意味着具有透明背景的徽标显示效果不佳。

我的主题目前设置如下：

```
<resources>
    <style name="Theme.Splash" parent="android:Theme">
        <item name="android:windowBackground">@drawable/splash</item>
        <item name="android:windowNoTitle">true</item>
    </style>
</resources> 
```

'splash.png' 是我的启动标志图像。

使用设置背景

```
<item name="android:background">@color/white</item> 
```

覆盖初始图像背景。

是否可以将主题定义为具有白色背景，并在其顶部添加 splash.png？

另一种方法是我们将 slpash.png 修改为具有白色背景，而不是透明，但如果可能的话，我想避免这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:32:25.420

仅使用 ImageView 并将徽标设置为允许您将容器布局的背景颜色设置为任何您喜欢的颜色不是更容易吗？

...也许您可以制作一个带有由背景和徽标组成的分层/级别列表可绘制的xml文件作为两个单独的级别/层，并将该xml文件作为可绘制应用到您的样式背景/窗口背景？

请查看：[可绘制资源| 安卓开发者](http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-14T14:53:21.710

在您的可绘制初始 xml 中，使用图层列表来包含每个项目，然后将您的背景设置为一个项目，并将您的徽标设置为另一个。这就是我一直在做的至少:)

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
<item>
    <shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
        <solid android:color="@color/backgroundb" />
    </shape>
</item>
<item>
    <bitmap xmlns:android="http://schemas.android.com/apk/res/android" android:gravity="center" android:src="@mipmap/launchicon" />
</item> 
```

提醒你可能有点晚了，我刚刚意识到这个问题有多老了哈哈

# android - Facebook 3.0 sdk 的 ExecuteBatchAndWait 方法返回空响应

> ID：14851388
> 
> 赞同：0
> 
> 时间：2013-02-13T10:27:48.983
> 
> 标签：android, facebook, android-facebook

我正在尝试以“executeBatchAndWait”方法执行多个请求。我希望该函数仅在所有请求都已执行并收到所有响应后才返回。但是，该函数会立即返回。当我这样做时，

```
response.getGraphObject().getInnerJSONObject(); 
```

它抛出一个空指针异常。

**代码：**

```
Log.v(TAG, "executing album requests");
List<Response> mResponsesList = Request.executeBatchAndWait(mAlbumPhotosRequests);
Log.v(TAG, "received album responses"); 
```

**输出**

02-13 15:48:45.900: 执行相册请求

02-13 15:48:45.904：收到专辑回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T19:23:09.103

在访问 JSON 对象之前检查您的响应中是否有任何错误。

response.getError()

可能是没有创建 GraphObject 的原因

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T14:40:40.430

你得到一个空洞的回应。这种情况通常与在您自己的线程上同时运行 FB 请求有关。我学会了使用任何一种的艰难方法

```
Request.executeAsync() 
```

或者

```
RequestAsyncTask 
```

# c# - 无法访问 Disposed 对象 MVC4 视图

> ID：14851389
> 
> 赞同：2
> 
> 时间：2013-02-13T10:27:57.070
> 
> 标签：c#, asp.net-mvc-3, asp.net-mvc-4

我正在开发一个系统，它将使用大量的下拉列表和重复列表。因此，为了避免重复代码，我创建了一个`DropDownManagerClass()`，这将允许我从系统中的任何位置调用 Customers 下拉列表：

```
public class DropDownManager:BaseManagerClass
{
    public DropDownManager(String connectionString)
        : base(connectionString)
    {
    }

    public IEnumerable<SelectListItem> GetCustomerDD()
    {

        this.OpenConnection();

        IEnumerable<SelectListItem> dropDown = this._context.Customers.Select(m => new SelectListItem { Text = m.Description, Value = m.CustomerID.ToString() });

        this.CloseConnection();

        return dropDown;

    }

} 
```

然后我通过调用这个**一次性**管理器类来填充我的模型，你会看到我正在处理对象以清理与数据库的连接。

```
 DropDownManager dropdown = new DropDownManager(Global.ConnectionString);

  IEnumerable<SelectListItem> customers = dropdown.GetCustomerDD();
  IEnumerable<SelectListItem> suppliers= dropdown.GetSuppliersDD();

  model.CustomersDD= customers;
  model.SuppliersDD= suppliers;

  dropdown.Dispose(); 
```

当我调试时，我注意到客户和供应商都有一条 SQL 语句。因此，当谈到我的观点时，我认为这是它试图执行 SQL 以获取数据的地方，但是我已经处理`dropdown`它会引发错误。如果我删除`dropdown.Dispose()`，则代码有效。

我的观点

```
@Html.DropDownListFor(m => m.Customer.CustomerID, Model.CustomersDD, new { @class = "large" }) 
```

无论如何我可以用数据填充我的模型并有效地处理这个管理器吗？

**编辑**当我`.ToList()`从客户那里选择之后打电话时，我可以看到模型现在有结果集，但在视图中它仍然给出错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:37:35.267

我不知道这是否可行，buuut ....您是否尝试过使用“using”语句而不是手动调用 .Dispose() ？

[http://msdn.microsoft.com/en-us/library/yh598w02.aspx](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:11:18.103

你能试试下面的代码吗？这是此处提出的建议以及我将如何编写代码的组合：

首先替换你的`GetCustomerDD()`：

```
public List<SelectListItem> GetCustomerDD()
{
    List<SelectListItem> dropDown;
    try
    {
        OpenConnection();

        // .ToList() here makes sure you get the result immidiately
        dropDown = _context.Customers.Select(m => new SelectListItem { Text = m.Description, Value = m.CustomerID.ToString() })
            .ToList();              
    }
    finally
    {   
        // try-finally makes sure you always close your connection
        CloseConnection();
    }
    return dropDown;
} 
```

然后这样称呼它：

```
using (var dropDownManager = new DropDownManager(Global.ConnectionString))
{  
    // using makes sure the DropDownManager is always disposed
    CustomersDD = dropDownManager.GetCustomerDD();
} 
```

这行得通吗？

**顺便说一句**；在您的帖子中，您声明您`DropDownManager`准备关闭连接，但在您的代码中，您似乎关闭了与`this.CloseConnection()`inside的连接`GetCustomerDD()`。我们错过了什么吗？也许您不需要处理它来关闭连接？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T01:04:29.137

问题是查询仅在您开始枚举结果后执行（稍后），但是，当您在枚举结果之前处理下拉列表时，当您稍后尝试枚举它们时，查询将针对已经处理的上下文运行并且失败。

您应该稍后在请求中处理上下文或在处理请求之前枚举查询（调用列表）以避免此问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T22:29:52.923

您可能已经尝试过，但您是否尝试将 INumerable 更改为 List：

```
List<SelectListItem> customers = dropdown.GetCustomerDD().ToList();
List<SelectListItem> suppliers = dropdown.GetSuppliersDD().ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T16:49:21.067

您是否考虑过可能遍历它们并将它们添加到列表中，希望在将它们传递给视图之前查询数据库？

```
var list = new List<SelectListItem>();

this._context.Customers
    .Select(m => new SelectListItem { Text = m.Description, Value = m.CustomerID.ToString() })
    .ForEach(x => list.Add(x)); 
```

真的只是一般的想法。祝你好运！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T10:59:52.800

如果您在 using 语句中使用 Linq2Entity 或 Linq2Sql（通常是最好的方法），则在您真正访问数据（绑定、使用 First、Count、ToList 或任何其他获取数据）。

您只需要调用 Utils 类中的 ToList() 方法来“实现”结果。重要的是在 DropdownManagerClass 内部而不是外部进行。

# mysql - MySQL 性能：在大表中排序很慢，即使过滤的子集很小

> ID：14851399
> 
> 赞同：4
> 
> 时间：2013-02-13T10:28:19.717
> 
> 标签：mysql, database-performance

我正在尝试调整我的 MySQL 查询的性能，但遇到了一个我不理解的问题（因此无法修复）。本质上，如果它们在自己的表中，它可以更快地对 165,000 行进行排序，而不是它们是更大表的子集。

表 fl6 有 200 万行。它在 (departure_out) 上有一个索引 x1。离开_out 是一个日期类型。

以下选择查找 165,916 行。它需要 0.1 秒。

```
select count(*) 
from fl6 
where departure_out > "2013-04-01" 
and departure_out < "2013-04-05"; 
```

以下 select 具有相同的 where 子句，但按价格排序。它需要 0.5 秒。0.4 秒对 165,000 行进行排序。

```
select id 
from fl6 
where departure_out > "2013-04-01" 
and departure_out < "2013-04-05"
order by price_total limit 1; 
```

我想看看它是否可以更快，所以我创建了一个只包含 165,916 行的小表。然后我做了那种。耗时 0.16 秒。

```
select id 
from fl6_small
order by price_total limit 1; 
```

因此，它可以相当快地对 165,000 行进行排序，但如果它是更大表的子集，则需要两倍以上的时间？我如何让它做到这一点？为什么有区别？

几件事：我已经尝试在 (price) 和 (departure_out, price) 上放置一个索引。这没什么区别。无论如何，如果在 fl6_small 中的搜索显示即使没有它也能以多快的速度排序，则不需要索引。

编辑：

（编辑了上面的一些行数和时间以匹配用于解释计划的表格）

解释计划：

```
+----+-------------+-------+-------+---------------+------+---------+------+--------+-----------------------------+
| id | select_type | table | type  | possible_keys | key  | key_len | ref  | rows   | Extra                       |
+----+-------------+-------+-------+---------------+------+---------+------+--------+-----------------------------+
|  1 | SIMPLE      | fl6   | range | x1            | x1   | 3       | NULL | 160493 | Using where; Using filesort |
+----+-------------+-------+-------+---------------+------+---------+------+--------+-----------------------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:18:23.247

不同之处在于，在第一种情况下，MySQL 将创建一个包含 165000 行的临时表，并在没有索引的情况下对它们进行排序。即使价格列上有索引，也不能用于排序。

您的小表可能能够使用索引进行排序，因此速度要快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:44:04.737

您可以使用 EXPLAIN 语句来检查查询的瓶颈[http://dev.mysql.com/doc/refman/5.0/en/explain.html](http://dev.mysql.com/doc/refman/5.0/en/explain.html) 和[http://dev.mysql.com/doc/refman/5.0/ zh/优化.html](http://dev.mysql.com/doc/refman/5.0/en/optimization.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T13:51:20.643

这可能是由于几个问题。

挑剔点 - 在大表中，您所做的不仅仅是简单的排序，而是首先查找记录，然后进行排序。在您没有按 depature_time 搜索的小桌子上。但这有点作弊，因为表较大，为了知道使用哪个n，它首先必须构建表。如果它被编入索引，那么它不太可能像您的测试显示的那样重要。它仍然花费了 0.5 秒中的 0.1 秒。也可以在小桌子上尝试 where 子句，应该会花费更多时间。如果没有，那么它指向：

**第二，**缓存未命中****：* *

在您使用的机器上，2,000K 记录可能远远超过 150K 记录，除非您有一个专门用于 mysql 的盒子，从而增加了缓存未命中的可能性。即使您将 ^2 排序或更差的记录加载到内存中并且内存对齐，这些未命中可能会造成更大的损失。如果你在一个有很多内存的盒子上运行这些测试，假设所有其他条件都相同，那么差异应该会更小。

# php - ISPConfig SOAP Remote API 添加启用 php 的 Web 域

> ID：14851404
> 
> 赞同：2
> 
> 时间：2013-02-13T10:28:36.660
> 
> 标签：php, apache, web, webserver, web-hosting

我正在使用 ispconfig 的远程 API 创建一个 ispconfig 用户、一个网站和一个 ftp 用户，一切正常，它创建了 ispconfig 用户、网站和 ftp 用户，我可以通过 ISPConfig 和 FTP 和网站也能正常工作，但即使我在参数上激活了 PHP，它也不会启用 PHP。

这是必要的代码：

```
$domain = 'domain.example.com';
$params = array(
        'domain' => $domain,
        'ip_address' => '',
        'type' => 'vhost',
        'parent_domain_id' => 0,
        'vhost_type' => '',
        'hd_quota' => 100,
        'traffic_quota' => 4000,
        'cgi' => 'n',
        'ssi' => 'n',
        'suexec' => 'n',
        'errordocs' => 1,
        'is_subdomainwww' => 1,
        'subdomain' => '',
        'php' => 'y', /* This is activated but it does nothing*/
        'ruby' => 'y', /*This is also activated and works*/
        'redirect_type' => '',
        'redirect_path' => '',
        'ssl' => 'n',
        'ssl_state' => '',
        'ssl_locality' => '',
        'ssl_organisation' => '',
        'ssl_organisation_unit' => '',
        'ssl_country' => '',
        'ssl_domain' => '',
        'ssl_request' => '',
        'ssl_cert' => '',
        'ssl_bundle' => '',
        'ssl_action' => '',
        'stats_password' => '',
        'stats_type' => 'webalizer',
        'allow_override' => 'All',
        'apache_directives' => '',
        'php_open_basedir' => '/', 
        'custom_php_ini' => '', 
        'backup_interval' => '',
        'backup_copies' => 1,
        'active' => 'y',
        'traffic_quota_lock' => 'n'
); 
```

我认为我不需要在 'custom_php_ini' 中写任何东西，对吗？

我有一个类使用ispconfig，创建网站的方法是：

```
public function addWebSite($clientid, $params) {
    $params['server_id'] = $this->server_id;
    utf8_encode_array($params,'utf8_decode_array');
    try {
        return $this->soapClient->sites_web_domain_add($this->session_id, $clientid, $params, $readonly = false);
    }  catch (SoapFault $e) {
        throw new IspcfgException($e->getMessage(), 500);
    }
} 
```

在创建 ispconfig 用户时，我还放置了一个参数 ''web_php_options' => 'mod' 但它不起作用......

有谁能够帮助我？非常感谢您提前提供的帮助！

我认为有一个我不知道的参数来指示 PHP 引擎，但我没有找到正确的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:41:20.377

我解决了。

[当您从网站](http://www.ispconfig.org/ispconfig-3/download/)下载 zip 时，我正在查看提供的文档，您也可以[在此处](https://github.com/zekus/ispconfig3/tree/master/remoting_client)获取它。

如果您查看文档，它说参数“php”是一个具有值“n”和“y”的枚举，但这适用于 ipconfig 版本 2。在 ispconfig3 中，您可以编辑 php 引擎（mod-php、cgi. ..) 不只是启用它。

所以它可以用 $params 编写：

```
 'php' => 'mod', 
```

# git - Git push - 内存不足，calloc 失败，pack-objects 因奇怪的错误而死

> ID：14851406
> 
> 赞同：3
> 
> 时间：2013-02-13T10:28:44.890
> 
> 标签：git, bitbucket

我在第一次尝试将我的 repo 推送到 bitbucket 时遇到了这个问题：

```
[~/public_html]# git push -u origin --all
Counting objects: 2170, done.
Delta compression using up to 12 threads.
fatal: Out of memory, calloc failed  
error: pack-objects died with strange error 
```

我在 StackOverflow 上发现了类似的问题，建议将 repack 与 --window-memory 和 --max-pack-size 一起使用，但我得到了几乎相同的错误：

```
[~/public_html]# git repack -a -d --window-memory 10m --max-pack-size 10m
Counting objects: 2170, done.
Delta compression using up to 12 threads.
fatal: Out of memory, calloc failed 
```

我的服务器有 4 GB 内存，所以我看不到它是如何用完的。我没有任何特别大的文件，我的整个仓库只有 12 MB

我已经进行了一些搜索，但我找不到任何与我的案例有关的东西。

这里会发生什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T11:50:36.430

看起来您的网络主机不允许执行某些内存分配指令。您可能想尝试在关闭 mmap 的情况下编译您自己的 git 版本。

供参考：[http ://wiki.dreamhost.com/Git#Setup_Two:_More_Thoughtful](http://wiki.dreamhost.com/Git#Setup_Two%3a_More_Thoughtful)

# html - 中心标志，主菜单出现在每一侧

> ID：14851409
> 
> 赞同：1
> 
> 时间：2013-02-13T10:28:53.553
> 
> 标签：html, css, menu, graphical-logo

我想将我的徽标居中并让我的主菜单出现在徽标的每一侧，我不知道如何做到这一点，我是否必须创建两个单独的菜单才能实现该布局？

非常感谢任何建议。

谢谢！

```
 <header class="remove-padding">
    <div class="container">
        <div id="header" class="row">
            <div class="four columns">
                <div id="logo">
                        <img src=img/inf-logo1.png" alt="test site" />
                    </a>
                    <p class="slogan">Ink addiction</p>
                </div>
            </div>

            <div class="eight columns">
                <div id="headerWidgets">                
                                    </div>

                                <nav id="nav-main" class="nav-main-right" role="navigation">
                    <ul id="menu-main-menu" class="sf-menu"><li id="menu-item-50" class="first-menu-item menu-item menu-item-type-custom menu-item-object-custom menu-item-50"><a href="http://s.se">Home</a></li>
<li id="menu-item-51" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-51"><a href="http://a.se">about</a></li>
<li id="menu-item-52" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-52"><a href="http://s.se">tattoos</a></li>
<li id="menu-item-53" class="last-menu-item menu-item menu-item-type-custom menu-item-object-custom menu-item-53"><a href="http://.se">contact</a></li>
</ul>               
                </nav>    

#logo {padding:20px 0; float:left; overflow: hidden;  }
#logo a {display:block; text-align: left; background:none; border:none; padding:0; margin:0;}

.nav-main-right {float:right; position:absolute; bottom:0; right:4%;}
.nav-main-full .sf-menu{float: left; width:100%; }

.sf-menu, .sf-menu * {list-style:none; margin:0; padding:0}
.sf-menu {line-height:1.0; float:left; font-size:14px; font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; text-transform: uppercase; letter-spacing:2px;  }
.sf-menu ul {position:absolute; top:-999em; width:14em; text-transform: none; letter-spacing:normal; }
.nav-main-full .sf-menu{float: left; width:100%; }
.sf-menu ul ul {left:1em; margin-top:0;}
.sf-menu ul li {width:100%; }
.sf-menu li:hover {visibility:inherit}
.sf-menu li {float:left; position:relative; padding-bottom:20px; line-height: 1em;}
.nav-main-full .sf-menu li {padding-bottom:10px; padding-top:10px; }
.sf-menu a {display:block; position:relative; text-decoration:none; padding: 0 1em; font-size:1em; border:none; background:none;}
.nav-main-full .sf-menu a {padding: 0 1em;}
.sf-menu .first-menu-item a {padding-left:0;}
.sf-menu .last-menu-item a {padding-right:0;}

.sf-menu a:hover, .sf-menu a:focus {background:none;}
.sf-menu ul a {padding:.5em 1em !important;}
.sf-menu li:hover ul,.sf-menu li.sfHover ul {top:100%; z-index:99}
.nav-main-full .sf-menu li:hover ul ul, .nav-main-full .sf-menu li.sfHover ul ul { top:0;}
.sf-menu a,.sf-menu a:visited {}
.sf-menu li li { border:none; padding:5px 0px !important; }
.sf-menu li li li { }
.sf-menu li:hover,.sf-menu li.sfHover,.sf-menu a:focus,.sf-menu a:hover,.sf-menu a:active { outline:0}

.sf-shadow ul{ }
.sf-shadow ul.sf-shadow-off { background:transparent}
ul.sf-menu li:hover li ul,ul.sf-menu li.sfHover li ul,ul.sf-menu li li:hover li ul,ul.sf-menu li li.sfHover li ul { top:-999em}
ul.sf-menu li li:hover ul,ul.sf-menu li li.sfHover ul,ul.sf-menu li li li:hover ul,ul.sf-menu li li li.sfHover ul { left:14em; margin-left:2px; top:0}
.sf-menu a.sf-with-ul {padding-right:   2.2em; min-width: 1px;}
.sf-sub-indicator { position: absolute; display:block;right:1em;width:14px;height:14px;text-indent:-999em;overflow:hidden;background:url('../images/submenu.png') no-repeat;}
a > .sf-sub-indicator { top:0;}
.sf-menu ul .sf-sub-indicator,.sf-menu ul a:focus > .sf-sub-indicator,.sf-menu ul a:hover > .sf-sub-indicator,.sf-menu ul a:active > .sf-sub-indicator,.sf-menu ul li:hover > a > .sf-sub-indicator,.sf-menu ul li.sfHover > a > .sf-sub-indicator { top:0.5em;}
.sf-shadow ul {-webkit-box-shadow: 0px 0px 3px 3px rgba(0, 0, 0, 0.2); -moz-box-shadow: 0px 0px 3px 3px rgba(0, 0, 0, 0.2); box-shadow: 0px 0px 3px 3px rgba(0, 0, 0, 0.2); }
.sf-shadow ul.sf-shadow-off { box-shadow:none; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:47:29.623

利用`ul list`

**HTML**

```
<ul>
    <li>Menu 1</li>
    <li>Menu 2</li>
    <li>Menu 3</li>
    <li><img src="https://developer.cdn.mozilla.net/media/img/mdn-logo-sm.png" /></li>
    <li>Menu 4</li>
    <li>Menu 5</li>
    <li>Menu 6</li>
</ul> 
```

**CSS**

```
ul{margin:0; padding:0}
ul li{
    display:table-cell; 
    vertical-align:middle; 
    padding:0 6px;
    border-right:#8fa011 1px solid
} 
```

**[演示](http://jsfiddle.net/A8NV5/1/)**

# perl - 使用 perl 解析邮件日志

> ID：14851410
> 
> 赞同：1
> 
> 时间：2013-02-13T10:28:55.207
> 
> 标签：perl, dovecot

我在 /var/log/maillog 中有一个 maillog 文件。内容结构如下图：

```
Feb 13 10:13:24 mailer dove: imap-login: Login: user=<test@test.com>, method=PLAIN, rip=::ffff:14.012.251.125, lip=::ffff:33.01.121.12.80
Feb 13 10:13:25 mailer dove: imap-login: Disconnected: rip=::ffff:10.100.2.10, lip=::ffff:33.01.121.12.81
Feb 13 10:13:25 mailer dove: pop3-login: Disconnected: rip=::ffff:10.100.2.10, lip=::ffff:33.01.121.12.81
Feb 13 10:13:25 mailer dove: pop3-login: Disconnected: rip=::ffff:10.100.2.10, lip=::ffff:33.01.121.12.80
Feb 13 10:13:25 mailer dove: imap-login: Disconnected: rip=::ffff:10.100.2.10, lip=::ffff:33.01.121.12.80
Feb 13 10:13:26 mailer dove: POP3(info@nbb.com): Disconnected: Logged out top=0/0, retr=0/0, del=0/24, size=187461
Feb 13 10:13:26 mailer dove: pop3-login: Login: user=<info@bb.com>, method=PLAIN, rip=::ffff:14.012.251.125, lip=::ffff:33.01.121.12.80
Feb 13 10:13:26 mailer dove: POP3(sup@bb.com): Disconnected for inactivity top=0/0, retr=0/0, del=0/32, size=473758028
Feb 13 10:13:26 mailer dove: POP3(docs@bb.com): Disconnected for inactivity top=0/0, retr=0/0, del=0/9, size=140778365
Feb 13 10:13:26 mailer dove: pop3-login: Login: user=<jos@bb.net>, method=PLAIN, rip=::ffff:14.012.251.125, lip=::ffff:33.01.121.12.80
Feb 13 10:13:28 mailer dove: POP3(jos@bb.net): Disconnected: Logged out top=0/0, retr=1/8336, del=1/1, size=8319
Feb 13 10:13:28 mailer dove: pop3-login: Login: user=<hello@abb.com>, method=PLAIN, rip=::ffff:21.254.145.12, lip=::ffff:33.01.121.12. 
```

我希望能够使用 perl 对其进行解析，以提取和分组用户出现在日志中的出现次数，并在顶部以最大大小对其进行排序。

我在下面尝试过，但这只会打印每个用户；

```
perl -ne 
 '$l{$2}=$1 if /^(.{15}) .* imap-login: 
  Login: user=<([^>]+)>/; END 
  { 
    print "$_ last imap-login: $l{$_}\n" 
    for keys %l 
  }' /var/log/maillog 
```

你能帮我调整这个脚本吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T10:38:31.537

尝试这样做：

```
perl -lne '
    $h{$1}++ if /imap-login:\s+Login:\s+user=<([^>]+)>/;
    END{
        foreach my $key (sort { $h{$a} <=> $h{$b} } keys(%h)) {
            print $key, " ", $h{$key}
        }
    }
' /var/log/mail.log 
```

**编辑**

如果您想增加访问时间，请解决此问题：

```
perl -wlne '
    do{
        $h{$2}{inc}++;
        $h{$2}{time}="$2";
    } if /^(\w+\s+\d+\s+\d+:\d+:\d+).*?Login:\s+user=<([^>]+)>/;
    END{
        use Data::Dumper;
        print Dumper \%h;
    }
' 
```

您只需要解析 HASH。

# javascript - 我的 JavaScript 程序不工作

> ID：14851416
> 
> 赞同：-4
> 
> 时间：2013-02-13T10:29:10.710
> 
> 标签：javascript, html

我的代码有问题。问题如下：

> **创建一个可用于计算每加仑英里数的网页。**
> 
> 1.  向 Web 页面添加一个包含四个文本元素的表单：起始里程、结束里程、使用的加仑数和每加仑英里数。为每个元素的 value 属性分配初始值 0。
>     
>     
> 2.  将 onchange 事件处理程序添加到调用名为 calcMPG() 的 JavaScript 函数的起始里程、结束里程和使用加仑数的文本框中。
>     
>     
> 3.  在文档头的脚本部分中创建 calcMPG() 函数。在 calcMPG() 函数中，声明三个变量 startMiles、endMiles 和加仑，并用分配给起始里程、结束里程和加仑的值来初始化每个变量。
>     
>     
> 4.  创建一个 if 。. . else 语句在复合条件表达式中使用 isNaN() 函数来确定 startMiles、endMiles 和galons 变量是否包含数值。
>     
>     
> 5.  如果变量不包含数值变量，则显示一个警告对话框，通知用户他或她必须输入数值。如果变量确实包含数值，则 else 子句应执行英里每加仑计算并将结果分配给表单中的每加仑英里数文本框。
>     
>     
> 6.  每加仑英里数的计算公式为 (ending_mileage - starting_ mileage) / 加仑*

这是我所拥有的，但它不起作用：

```
<script type="text/javascript">
function calcMPG(){
   var startMiles = document.economy.startMilage.value;
   var endMiles = document.economy.endMilage.value;
   var gallons = document.economy.galonsUsed.value;

   if (isNaN(startMiles) = false)   
   {
      window.alert("You can only enter numbers") 
   }        }
   else 
   {
      document.mpg = document.write((endMiles - startMiles) / gallons) 
   }

}
</script>

<form name="economy">
<p>Starting Milages
<input type="text" name="starMilage" class="input" onchange="calcMPG()" /></p>
<p>Ending Milages
<input type="text" name="endMilage" class="input" onchange="calcMPG()" /></p>
<p>Galons Used
<input type="text" name="galonsUsed" class="input" onchange="calcMPG()" /></p>
<p>Miles Per Galon
<input type="text" name="mpg" class="input" /></p>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:34:23.357

替换`if (isNaN(startMiles) = false)`为`if (isNaN(startMiles))`

删除`}`后`else`

```
<script type="text/javascript">
function calcMPG(){
   var startMiles = document.economy.startMilage.value;
   var endMiles = document.economy.endMilage.value;
   var gallons = document.economy.galonsUsed.value;

   if (isNaN(startMiles))   
   {
      window.alert("You can only enter numbers") 
   }      
   else 
   {
      document.mpg = document.write((endMiles - startMiles) / gallons) 
   }
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:35:03.330

你不需要这样做：

```
if (isNaN(startMiles) = false) 
```

isNaN 根据条件返回真或假。

```
if(isNaN(startMiles))   is enough. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T10:37:58.150

应该 ：

删除`}`之前`else`和`;`之后 `alert` _`document.write`

```
<script type="text/javascript">
function calcMPG(){
   var startMiles = document.economy.startMilage.value;
   var endMiles = document.economy.endMilage.value;
   var gallons = document.economy.galonsUsed.value;

   if (isNaN(startMiles))   
   {
       window.alert("You can only enter numbers");
   }       
   else 
   {
       document.mpg = document.write((endMiles - startMiles) / gallons);
   }
}
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T10:39:26.043

1.  如果您使用的是 firefox，请安装**FireBug**：[https](https://addons.mozilla.org/es/firefox/addon/firebug/)
    ://addons.mozilla.org/es/firefox/addon/firebug/如果您更喜欢 chrome，则无需安装任何东西。
2.  按`F12` *（感谢@Christoph）*
3.  看看控制台：你会看到很多错误。请先解决它们，因为我们不是在这里为您编译代码。

# android - baseAdapter 的 getView 方法没有被调用

> ID：14851417
> 
> 赞同：2
> 
> 时间：2013-02-13T10:29:14.500
> 
> 标签：android, android-spinner, baseadapter

我有一个微调视图。我将其适配器设置为扩展基本适配器的 customAdapter。但是适配器的 get view 方法没有被调用。`

```
 public class CustomSpinnerAdapter extends BaseAdapter {
    private Context mContext;
    private LayoutInflater mInflater;

    private TextView mLine1, mLine2;

    private String mEmptyString = "--";

    public CustomSpinnerAdapter(Context context) {
        super();

        mContext = context;
        mInflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        // TODO Auto-generated constructor stub
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

            return view;

    }} 
```

然后我通过 setAdapter() 设置适配器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:35:56.500

对于微调器，您需要实现 getDropDownView()，它是一种称为 DropDowns 的特殊方法...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:35:28.757

您应该正确实现 getView() 函数：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.your_single_spinner_row, null);
    }

    ... do whatever with the convertView (convertView.findViewById(...))...

    return convertView;

} 
```

# javascript - HighCharts：如何将自定义颜色与渐变相结合

> ID：14851418
> 
> 赞同：2
> 
> 时间：2013-02-13T10:29:17.170
> 
> 标签：javascript, colors, highcharts, radial-gradients

一段时间以来，我正在玩我的饼图的着色...要么我得到了没有渐变的自定义颜色，要么得到了带有渐变的默认颜色......我的颜色存储在我想加载的 php 字段中`colors: <?echo $myColors;?>`。我的代码的实际状态是这样的（它显示带有渐变的默认颜色）：

```
colors: Highcharts.map(Highcharts.getOptions().colors, function(color) {
    return {
        radialGradient: { cx: 0.5, cy: 0.3, r: 0.7 },
        stops: [
                [0, color],
                [1, Highcharts.Color(color).brighten(-0.3).get('rgb')] // darken
        ]
    };
}) 
```

我应该如何编辑它，以便它以简单的方式显示我自己的颜色？我也没有找到什么是“停止”选项...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T11:44:32.443

使用你的颜色`map`而不是 Highcharts 内置的颜色：

```
colors: Highcharts.map(<?echo $myColors;?>, function(color) {
    return {
        radialGradient: { cx: 0.5, cy: 0.3, r: 0.7 },
        stops: [
                [0, color],
                [1, Highcharts.Color(color).brighten(-0.3).get('rgb')] // darken
        ]
    };
}) 
```

# php - JW Player 在 Wordpress 中的带宽计算

> ID：14851423
> 
> 赞同：2
> 
> 时间：2013-02-13T10:29:24.053
> 
> 标签：php, wordpress, jwplayer

我在我的网站上使用[这个 JW Player wordpress 插件](http://wordpress.org/extend/plugins/jw-player-plugin-for-wordpress/other_notes/)来播放视频。

我想计算我网站上每个用户消耗的总带宽。有的用户会观看完整的视频，有的用户不会观看完整的视频，在这两种情况下，每个用户使用的带宽都会有所不同。

*   可以计算这两种情况下的带宽吗？
*   是否有任何可用的 PHP/Wordpress 插件或任何可以计算此带宽的脚本？

如果没有，请稍微解释一下，以便我自己编写。

谢谢你 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T07:38:08.460

从 JwPlayer [API](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/12534/video-delivery-http-pseudo-streaming)获得帮助 ，这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:27:51.573

好吧，正如评论者所说，这可能更像是服务器问题而不是 wordpress 问题。话虽如此，您可以通过将用户名添加到页面的分析部分来部分了解您的用户行为。我知道 Piwik 可以做到这一点，还有 Google Analytics。

然后，至少您知道哪些用户观看您的视频最多，但不幸的是，如果他们观看了整个视频，则不知道。

您还可以在用户观看完视频后使用 JWplayer API 调用分析包。然后你得到了部分/全部观看电影的比例，从那里你可以做一些近似。

# testing - 测试环境设置、对客户端机器的依赖的可能解决方案

> ID：14851435
> 
> 赞同：2
> 
> 时间：2013-02-13T10:29:44.910
> 
> 标签：testing, configuration, environment-variables

我一直在尝试找到一种方法或软件，可以快速自动测试客户端机器上用户环境的正确配置和设置。

测试包括用户对特定共享的预期 AD 访问权限、共享正确映射、ODBC DSN 已设置且数据源可见、特定应用程序已安装且本地配置正确、已安装正确打印机等...

到目前为止，我一直在用 NUnit 编写一个测试列表，打破了所有关于在流程中不测试外部依赖项的规则，但这正是这些测试需要做的，这并不是一个真正的程序。

这个想法是用户可以运行它来确定他们的问题可能是什么（配置文件丢失、服务器关闭、不正确的 AD 成员资格）并减少确定问题根本原因所需的时间。

有没有人遇到过更好的方法来运行这些测试？

我期待着您的回复。

# html - 如何提高 doxygen 在 html 输出中使用的 png 文件的分辨率？

> ID：14851439
> 
> 赞同：3
> 
> 时间：2013-02-13T10:30:12.910
> 
> 标签：html, latex, png, doxygen

doxygen 可以使用 LaTeX 创建数学公式。从 LaTeX 输出中，它生成（我不知道如何）.png 文件并将它们包含到 html 文档中。不幸的是，这些 .png 文件的分辨率相当差。我想改进它，但在 .dox 文件中找不到与此相关的任何条目。帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:42:02.327

请查看 doxygen 中的 MathJax 可能性（将 USE_MATHJAX 设置为 YES）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-12T17:59:28.677

似乎没有直接的方法可以做到这一点。我尝试通过将公式中的字体大小增加到 20（默认为 10）来解决这个问题。然后使用 CSS 将公式强制为源图像大小的 50%。您可以设置`HTML_EXTRA_STYLESHEET`为例如`doxygen_modify.css`（不要使用`doxygen.css`，因为这会覆盖主 CSS 文件）。

在里面，你可以放：

```
.formulaInl {
    -ms-transform: scale(.5, .5); /* IE 9 */
    -webkit-transform: scale(.5, .5); /* Chrome, Safari, Opera */
    transform: scale(.5, .5);
} 
```

这会将图像缩小到原始大小，从而增加 DPI。**它是不完美**的，因为现在图像周围有空白空间，但它可能不是障碍，这取决于您如何使用文档中的公式（如果您使用居中公式则无关紧要）。

或者，您可以抓取生成的 HTML 文件，查找`img`带有类的标签，`formulaInl`并根据文件的大小手动指定修改后的宽度和高度（以像素为单位）。在 Linux 中，这只需几分钟的 bash 脚本编写。它有一个明显的缺点，任何使用你的 Doxygen 文件自己生成文档的人最终都会得到巨大的公式。

# ajaxcontroltoolkit - 动态关闭 Ajax Control Toolkit Autocomplete Extender

> ID：14851440
> 
> 赞同：1
> 
> 时间：2013-02-13T10:30:14.333
> 
> 标签：ajaxcontroltoolkit, autocompleteextender

我正在尝试根据用户在下拉列表中所做的选择从 Ajax 控件工具包中动态启用/禁用自动完成扩展器控件。

我的 ASP.NET 4.0 Webforms 应用程序有一个下拉列表，根据从中选择的国家/地区，应该启用或禁用邮政编码自动扩展器。

我的标记：

```
<asp:DropDownList runat="server" ID="ddlCountries">
    <Items>
            <asp:ListItem Text="Switzerland" Value="CH" />
            <asp:ListItem Text="Germany" Value="D" />
            <asp:ListItem Text="Italy" Value="I" />
            <asp:ListItem Text="France" Value="F" />
    </Items>
</asp:DropDownList>
<br />

<asp:TextBox runat="server" ID="tbxZipcode" />

<asp:AutoCompleteExtender 
     runat="server" ID="acZipcode" BehaviorID="ZipcodeBehavior" 
     ServiceMethod="GetZipCode"
     TargetControlID="tbxZipCode" MinimumPrefixLength="1" CompletionInterval="15" 
     OnClientItemSelected="PopulateTextboxes" CompletionSetCount="25" /> 
```

使用此设置，自动完成扩展程序启动并显示有效的瑞士邮政编码 - 生活是美好的 :-)

**但是**：如果用户选择另一个国家，我想**停止**这个自动完成扩展器 - 我的数据库中没有其他邮政编码要显示，并且显示法国的瑞士邮政编码没有意义。

所以我尝试了这样的方法来获取`change`下拉列表中的事件

```
$(document).ready(function () {
   $('#<%= ddlCountries.ClientID %>').change(function () {
      var chosenCountry = $(this).val();

      var behavior = $('#ZipcodeBehavior');

      if (chosenCountry == "CH") {
         behavior.disabled = '';
      } else {
         behavior.disabled = 'disabled';
      }
   });
}); 
```

我可以得到`ZipcodeBehavior`很好的-但是一旦我拥有它-似乎什么都不起作用了……

如何动态禁用 Ajax Control Toolkit 的 AutocompleteExtender？

在标记中，静态地，我使用

```
<asp:AutoCompleteExtender Enabled="False" .... /> 
```

然后什么都没有呈现到我的页面中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:34:05.697

首先，您无法通过 jQuery 选择器获取 MicrosoftAjax 客户端对象。所以这个语法`var behavior = $('#ZipcodeBehavior');`没有意义。改为使用`$find("BehaviorID")`。

要向 AutoCompleteExtender 添加禁用功能，请在此脚本上添加引用以`ScriptManager`控制：

```
Sys.Extended.UI.AutoCompleteBehavior.prototype.set_enabled = function (value) {
    try {
        $removeHandler(this.get_element(), "keydown", this._keyDownHandler);
    } catch (error) {} //just escape error if handler already removed
    this._timer.set_enabled( !! value);
    if (value) {
        this._keyDownHandler = Function.createDelegate(this, this._onKeyDown);
    } else {
        this._keyDownHandler = Function.createDelegate(this, function () {});
    }
    $addHandler(this.get_element(), "keydown", this._keyDownHandler);
}; 
```

之后，您可以使用以下代码禁用/启用扩展器：

```
$('#<%= ddlCountries.ClientID %>').change(function () {
    var chosenCountry = $(this).val();
    $find("ZipcodeBehavior").set_enabled(chosenCountry == "CH");
}); 
```

顺便说一句，`Enabled="false"`在标记中指定了属性，恐怕您不应该在客户端上启用扩展程序。

# coldfusion - 用于 JWPlayer 和 CloudFront 的 Unicode RTMP URL

> ID：14851457
> 
> 赞同：2
> 
> 时间：2013-02-13T10:30:42.317
> 
> 标签：coldfusion, amazon-s3, jwplayer, amazon-cloudfront

我试图找出在这里编码字符串的正确方法。在我的云端安装中（即在我的 S3 存储桶上），我有一个带有特殊字符的文件夹：

> 播放列表/Medúlla/file.m4a

尝试使用此功能时：

`playlist: [{file: "rtmp://MYCLOUDFRONTDISTRO/cfx/st/mp4:playlists/Medúlla/myfile.m4a"}],`

在 jwplayer 播放列表中，如何正确编码 jWPlayer 中的播放列表条目？（最好在输出之前在 ColdFusion 中使用）。如果我使用`urlEncodedFormat()`，一切都会被编码。就好像我*只*需要对特殊字符做点什么，但我不*知道是什么*（以及如何）。

作为旁注，一切正常，*除非*我在这个 javascript 配置中有一个 UTF8 字符。

## 更新：

缩小范围：如果我硬编码 HTML，它工作正常。如果我将播放列表保存到 ColdFusion 变量中并在 JS 配置中输出该变量，它将不起作用。

这是 JWPlayer 工作时的控制台调试：

> JWPLAYERREADY ([PlayerEvent type="jwplayerReady" id="gwsPlayer" client="FLASH WIN 11,5,502,149" version="6.2.3115" message="null"])
> 
> JWPLAYERPLAYLISTLOADED ([PlaylistEvent type="jwplayerPlaylistLoaded" index="0" id="gwsPlayer" client="FLASH WIN 11,5,502,149" version="6.2.3115" message="null"])
> 
> JWPLAYERPLAYLISTITEM ([PlaylistEvent type="jwplayerPlaylistItem" index="0" id="gwsPlayer" client="FLASH WIN 11,5,502,149" version="6.2.3115" message="null"])
> 
> LOG（调度类型的字幕事件：jwplayerCaptionsList）
> 
> JWPLAYERCAPTIONSLIST ([CaptionsEvent type="jwplayerCaptionsList" track="[object Object]" currentTrack="0" id="gwsPlayer" client="FLASH WIN 11,5,502,149" version="6.2.3115"])
> 
> LOAD（加载 PlaylistItem：[PlaylistItem file=rtmp://MYCLOUDFRONTURL/cfx/st/mp4:playlists/Róisín Murphy/Overpowered/10 Tell Everyone.m4a provider=rtmp level=0]）
> 
> JWPLAYERMEDIABEFOREPLAY ([MediaEvent type="jwplayerMediaBeforePlay" id="gwsPlayer" client="FLASH WIN 11,5,502,149" version="6.2.3115"])
> 
> JWPLAYERMEDIALEVELS ([MediaEvent type="jwplayerMediaLevels" levels="[object Object]" currentQuality="0" id="gwsPlayer" client="FLASH WIN 11,5,502,149" version="6.2.3115"])
> 
> JWPLAYERMEDIALOADED ([MediaEvent type="jwplayerMediaLoaded" id="gwsPlayer" client="FLASH WIN 11,5,502,149" version="6.2.3115"])
> 
> JWPLAYERPLAYERSTATE ([PlayerStateEvent type="jwplayerPlayerState" oldstate="IDLE" newstate="BUFFERING" id="gwsPlayer" client="FLASH WIN 11,5,502,149" version="6.2.3115" message="null"])
> 
> JWPLAYERMEDIABUFFERFULL ([MediaEvent type="jwplayerMediaBufferFull" id="gwsPlayer" client="FLASH WIN 11,5,502,149" version="6.2.3115"])
> 
> JWPLAYERMEDIAMETA ([MediaEvent type="jwplayerMediaMeta" screenwidth="0" transitioning="false" bufferfill="0" bandwidth="0" qualitylevel="0" id="gwsPlayer" client="FLASH WIN 11,5,502,149" version= “6.2.3115”]）
> 
> JWPLAYERMEDIAMETA ([MediaEvent type="jwplayerMediaMeta" audiochannels="2" audiosamplerate="44100" tags="" audiocodecid="mp4a" type="metadata" trackinfo="[object Object]" duration="231.48" aacaot="2 " moovPosition="40" id="gwsPlayer" 客户端="FLASH WIN 11,5,502,149" 版本="6.2.3115"])
> 
> LOG（调度类型的字幕事件：jwplayerCaptionsList）
> 
> JWPLAYERCAPTIONSLIST ([CaptionsEvent type="jwplayerCaptionsList" track="[object Object]" currentTrack="0" id="gwsPlayer" client="FLASH WIN 11,5,502,149" version="6.2.3115"])
> 
> JWPLAYERPLAYERSTATE ([PlayerStateEvent type="jwplayerPlayerState" oldstate="BUFFERING" newstate="PLAYING" id="gwsPlayer" client="FLASH WIN 11,5,502,149" version="6.2.3115" message="null"])
> 
> JWPLAYERMEDIATIME ([MediaEvent type="jwplayerMediaTime" duration="231.48" position="0" id="gwsPlayer" client="FLASH WIN 11,5,502,149" version="6.2.3115"])
> 
> JWPLAYERMEDIAMETA ([MediaEvent type="jwplayerMediaMeta" screenwidth="0" transitioning="false" bufferfill="1.5" bandwidth="2037" qualitylevel="0" id="gwsPlayer" client="FLASH WIN 11,5,502,149" version= “6.2.3115”]）
> 
> JWPLAYERMEDIATIME ([MediaEvent type="jwplayerMediaTime" duration="231.48" position="0.1" id="gwsPlayer" client="FLASH WIN 11,5,502,149" version="6.2.3115"])
> 
> JWPLAYERMEDIAMETA ([MediaEvent type="jwplayerMediaMeta" screenwidth="0" transitioning="false" bufferfill="2" bandwidth="2037" qualitylevel="0" id="gwsPlayer" client="FLASH WIN 11,5,502,149" version= “6.2.3115”]）
> 
> JWPLAYERMEDIATIME ([MediaEvent type="jwplayerMediaTime" duration="231.48" position="0.3" id="gwsPlayer" client="FLASH WIN 11,5,502,149" version="6.2.3115"])
> --snip--

并具有*相同*的HTML，但通过 CF 输出

JWPLAYERREADY

> ([PlayerEvent type="jwplayerReady" id="gwsPlayer" client="FLASH WIN 11,5,502,149" version="6.2.3115" message="null"])
> 
> JWPLAYERPLAYLISTLOADED ([PlaylistEvent type="jwplayerPlaylistLoaded" index="0" id="gwsPlayer" client="FLASH WIN 11,5,502,149" version="6.2.3115" message="null"])
> 
> JWPLAYERPLAYLISTITEM ([PlaylistEvent type="jwplayerPlaylistItem" index="0" id="gwsPlayer" client="FLASH WIN 11,5,502,149" version="6.2.3115" message="null"])
> 
> LOG（调度类型的字幕事件：jwplayerCaptionsList）
> 
> JWPLAYERCAPTIONSLIST ([CaptionsEvent type="jwplayerCaptionsList" track="[object Object]" currentTrack="0" id="gwsPlayer" client="FLASH WIN 11,5,502,149" version="6.2.3115"])
> 
> LOAD（加载 PlaylistItem：[PlaylistItem file=rtmp://MYCLOUDFRONTURL/cfx/st/mp4:playlists/Róisín Murphy/Overpowered/10 Tell Everyone.m4a provider=rtmp level=0]）
> 
> JWPLAYERMEDIABEFOREPLAY ([MediaEvent type="jwplayerMediaBeforePlay" id="gwsPlayer" client="FLASH WIN 11,5,502,149" version="6.2.3115"])
> 
> JWPLAYERMEDIALEVELS ([MediaEvent type="jwplayerMediaLevels" levels="[object Object]" currentQuality="0" id="gwsPlayer" client="FLASH WIN 11,5,502,149" version="6.2.3115"])
> 
> JWPLAYERMEDIALOADED ([MediaEvent type="jwplayerMediaLoaded" id="gwsPlayer" client="FLASH WIN 11,5,502,149" version="6.2.3115"])
> 
> JWPLAYERPLAYERSTATE ([PlayerStateEvent type="jwplayerPlayerState" oldstate="IDLE" newstate="BUFFERING" id="gwsPlayer" client="FLASH WIN 11,5,502,149" version="6.2.3115" message="null"])
> 
> JWPLAYERMEDIABUFFERFULL ([MediaEvent type="jwplayerMediaBufferFull" id="gwsPlayer" client="FLASH WIN 11,5,502,149" version="6.2.3115"])
> 
> JWPLAYERMEDIAMETA ([MediaEvent type="jwplayerMediaMeta" transitioning="false" qualitylevel="0" screenwidth="0" bandwidth="0" bufferfill="0" id="gwsPlayer" client="FLASH WIN 11,5,502,149" 版本= “6.2.3115”]）
> 
> JWPLAYERMEDIAMETA ([MediaEvent type="jwplayerMediaMeta" transitioning="false" qualitylevel="0" screenwidth="0" bandwidth="0" bufferfill="0" id="gwsPlayer" client="FLASH WIN 11,5,502,149" 版本= “6.2.3115”]）

--剪辑--

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T07:55:38.337

终于找到了我自己的答案：当我应该更仔细地查看数据是如何导入的时，我过于专注于输出：结果使用 CFFILE 上传然后读取可能会导致各种编码问题。通过简单地使用文本字段而不是文件上传来解决问题，等等，存储在数据库中的编码很好。我正在使用受污染的数据进行所有测试。*叹息*。

吸取教训，继续前进...... :)

# iphone - 精灵在触摸后消失而不是在拖动后消失

> ID：14851470
> 
> 赞同：0
> 
> 时间：2013-02-13T10:31:40.043
> 
> 标签：iphone, objective-c, cocos2d-iphone

在我目前正在尝试开发的游戏中，我正在尝试拖放精灵。这是我当前的代码：

```
-(void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
//gameStat is a boolean I use for pause and play function
if(gameStat == TRUE)
{
    NSSet *allTouch = [event allTouches];
    UITouch *touch = [[allTouch allObjects]objectAtIndex:0];
    CGPoint location = [touch locationInView:[touch view]];
    location = [[CCDirector sharedDirector]convertToGL:location];

    //Swipe Detection - Beginning point
    beginTouch = location;
    touchflag = 0;

    for(int i = 0; i < [sprArray count]; i++)
    {
        CCSprite *sprite = (CCSprite *)[sprArray objectAtIndex:i];
        if(CGRectContainsPoint([sprite boundingBox], location))
        {
            selectedSprite = sprite;
            //touchflag is an int, if its 1, it will move the sprite
            //spriteTouch is a boolean for checking if the sprite's been moved
            touchflag = 1;
            _spriteTouch = TRUE;
            break;
        }
    }
}}

-(void)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
if(gameStat == TRUE)
{
    NSSet *allTouch = [event allTouches];
    UITouch *touch = [[allTouch allObjects]objectAtIndex:0];
    CGPoint location = [touch locationInView:[touch view]];
    location = [[CCDirector sharedDirector]convertToGL:location];

    if(_spriteTouch == TRUE)
    {
        if(touchflag == 1)
        {
            //Should move the sprite from start location x and y to end location x and y
            selectedSprite.position = ccp(location.x, location.y);
        }
        else
        {
            for(int i = 0; i < [sprArray count]; i++)
            {
                CCSprite *sprite = (CCSprite *)[sprArray objectAtIndex:i];
                if(CGRectContainsPoint([sprite boundingBox], location))
                {
                    selectedSprite = sprite;
                    touchflag = 1;
                    break;
                }
            }
        }
    }
}}

-(void) ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
if(gameStat == TRUE)
{
    //End point of sprite after dragged
    NSSet *allTouch = [event allTouches];
    UITouch *touch = [[allTouch allObjects]objectAtIndex:0];
    CGPoint location = [touch locationInView:[touch view]];
    location = [[CCDirector sharedDirector]convertToGL:location];

    endTouch = location;
    posX = endTouch.x;

    //Minimum swipe length
    posY = ccpDistance(beginTouch, endTouch);

    if(_spriteTouch == TRUE)
    {
        if(selectedSprite != nil)
        {
            if(selectedSprite.tag == 1)
            {
                [self gameOver];
            }
            else if(selectedSprite.tag == 2)
            {
                if(countDown > 0)
                {
                    [self ClearGame];
                }
                else if(countDown == 0)
                {
                    [self gameOver];
                }
            }
        }
        selectedSprite = nil;
    }
    _spriteTouch = FALSE;
}} 
```

精灵的拖放工作正常。我的问题是，即使您只是触摸精灵，游戏也会进入 gameOver 或 ClearGame 方法。我需要告诉我的代码不要做任何事情，除非精灵被拖动，但我不知道该怎么做。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T03:10:57.823

所以，在稍微弄乱了我的代码之后，我有点解决了我的问题。确实是因为我的代码混乱了。这就是它现在的样子：

```
//I declared a boolean called _spriteTouch at the top of my class
-(id)init
{
//Added this to my init method
_spriteTouch = FALSE;}

-(void)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
if(gameStat == TRUE)
{
NSSet *allTouch = [event allTouches];
UITouch *touch = [[allTouch allObjects]objectAtIndex:0];
CGPoint location = [touch locationInView:[touch view]];
location = [[CCDirector sharedDirector]convertToGL:location];

if(touchflag == 1)
{
//set _spriteTouch to true then set the position of the sprite
_spriteTouch = TRUE;
[selectedSprite setPosition:location];
}}}

-(void) ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
if(gameStatus == TRUE)
{
    //I removed the NSSet *touch, CGPoint location etc since I no longer need it here. Keep it if you're gonna use it somewhere in this method
    //Check if _spriteTouch is true, if it is then the sprite would do what it should accordingly
    if(_spriteTouch == TRUE)
    {
        if(selectedSprite != nil)
        {
            //do something
        }
        selectedSprite = nil;
    }
    _spriteTouch = FALSE;
} 
```

}

差不多就是这样。我还删除了 endTouch、beginTouch、dragSprite 等，因为我不再需要它们了。我希望这对其他人有帮助。

# windows-phone-8 - windows phone 8 中的同步 Http 请求和响应

> ID：14851471
> 
> 赞同：-1
> 
> 时间：2013-02-13T10:31:43.800
> 
> 标签：windows-phone-8

有没有办法在 windows phone 8 中向 web 服务器发出同步请求。

我正在从一个周期性任务中请求一个特定的 URL，但这个请求是异步的，但我想发出一个同步请求，这是要求。任何人都可以告诉我如何实现这一目标。请输入一些代码我对 windows phone 8 开发完全陌生

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T10:54:50.617

您不能在 WP 中发出同步请求，但可以从后台代理发出异步调用。只要确保您`NotifyComplete`在处理完所有内容后才打电话。

（老实说，如果您正在为 WP8 开发而不使用，`async/await`那么您自己就会变得困难）

# hadoop - 如何自己将复制不足的块恢复到复制因子？

> ID：14851475
> 
> 赞同：1
> 
> 时间：2013-02-13T10:32:10.457
> 
> 标签：hadoop, hdfs

如何自己将复制不足的块恢复到复制因子？

我有两个数据节点，上面有三个文件。因为文件很小，所以一个块一个文件。复制因子为 2，现在集群中只有 3 个复制不足的块。如何将块恢复到 6？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:49:59.557

如果定义的复制因子有足够的数据节点 - NameNode 将注意恢复复制因子
如果你希望它现在发生 - 我认为复制文件将完成这项工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T10:56:38.163

使用 hadoop dfs -setrep [-R] [-w] 路径/文件

# javascript - 文件阅读器不加载

> ID：14851477
> 
> 赞同：1
> 
> 时间：2013-02-13T10:32:13.780
> 
> 标签：javascript, filereader

我在浏览器（chrome）中删除了一个外部文件，但该`onload`功能没有触发。

```
drop: function(e) {    
    console.log("drop");
    var file = e.dataTransfer.files
    var reader = new FileReader();
    reader.onload = function(file) {
        console.log(file.target.result);
    }
    reader.readAsDataURL(file);        
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:34:33.937

好的，我知道了，我必须写

```
var file = e.dataTransfer.files[0] 
```

代替

```
var file = e.dataTransfer.files 
```

这就是我生活的那种错别字:)

# ckan - ckan 定制收割机 '__junk' 验证

> ID：14851481
> 
> 赞同：0
> 
> 时间：2013-02-13T10:32:26.487
> 
> 标签：ckan

我在我的 localhost CKAN 安装（1.8）中成功实现了一个自定义 Harvester，但是当我在另一台（应该是相同的配置）机器上移动时，我收到了这个错误：

```
2013-02-13 11:18:21,670 DEBUG [ckanext.patstatweb.harvesters] In PatStatWebHarvester fetch_stage
2013-02-13 11:18:21,981 DEBUG [ckanext.patstatweb.harvesters] In PatStatWebHarvester import_stage
2013-02-13 11:18:22,357 INFO  [ckanext.harvest.harvesters.base] Package with GUID 9d15e19d1b17ac432dd704542a384304f7a37992 does not exist, let's create it
2013-02-13 11:18:22,384 ERROR [ckanext.harvest.harvesters.base] {'  junk': 'The input field __junk was not expected.'}
Traceback (most recent call last):
  File "/home/ckan/pyenv/src/ckanext-harvest/ckanext/harvest/harvesters/base.py", line 165, in _create_or_update_package
    new_package = get_action('package_create_rest')(context, package_dict)
  File "/home/ckan/pyenv/src/ckan/ckan/logic/action/create.py", line 723, in     package_create_rest
    dictized_after = _get_action('package_create')(context, dictized_package)
  File "/home/ckan/pyenv/src/ckan/ckan/logic/action/create.py", line 137, in package_create
    raise ValidationError(errors)
ValidationError: {'  junk': 'The input field __junk was not expected.'}
2013-02-13 11:18:22,392 ERROR [ckanext.harvest.harvesters.base] Invalid package with GUID 9d15e19d1b17ac432dd704542a384304f7a37992: {'__junk': ['The input field __junk was not expected.']} 
```

对此有何见解？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:08:40.343

问题是由 CKAN 的组织设置和收割机插件的错误引起的

这解决了问题[https://github.com/okfn/ckan/pull/391](https://github.com/okfn/ckan/pull/391)

# node.js - Grunt：如何更改文件模式位（chmod）？

> ID：14851483
> 
> 赞同：0
> 
> 时间：2013-02-13T10:32:29.257
> 
> 标签：node.js, gruntjs

我喜欢在 grunt 构建文件中生成一个 shell 脚本并设置执行位。

在我的任务中，我执行以下操作：

```
grunt.registerTask('createScript', 'Creates the script', function() {
    var ejs = require('ejs');
    //...
    grunt.file.write(
        './build/myScript.sh',
        ejs.render( grunt.file.read('myScript.sh.ejs'), { locals:myParams } )
    );
}); 
```

似乎既`grunt.file.write`没有也`grunt.file`没有选项来指定文件模式位。（参见[API grunt.file](https://github.com/gruntjs/grunt/wiki/grunt.file)）

如何设置位？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:32:29.257

因为 grunt 在 node 中运行，我们可以简单地使用`fs`node 的文件系统模块。`fs`有一个方法`chmod()`/ `chmodSync()`。

代码示例可能看起来像这样：

```
grunt.registerTask('createScript', 'Creates the script', function() {
    var ejs = require('ejs');
    var fs = require('fs');
    //...
    grunt.file.write(
        './build/myScript.sh',
        ejs.render( grunt.file.read('myScript.sh.ejs'), { locals:myParams } )
    );
    fs.chmodSync('./build/myScript.sh', '777');
}); 
```

# javascript - 使用 REST 客户端 mozzilla 使用 Rest Web 服务

> ID：14851484
> 
> 赞同：-1
> 
> 时间：2013-02-13T10:32:30.790
> 
> 标签：javascript, web-services, rest, rest-client

我能够成功执行对服务的 GET 请求，现在我想知道如何执行 POST、PUT、DELETE 命令

通过 Rest 客户端我执行了 OPTION 命令，我得到了这个结果

```
<application>
<doc jersey:generatedBy="Jersey: 1.17 01/17/2013 04:27 PM"/>
<grammars>
<include href= "http://localhost:8081/de.vogella.jersey.todo/rest/application.wadl/xsd0.xsd" >
<doc title="Generated" xml:lang="en"/>
</include>
</grammars>
<resources base="http://localhost:8081/de.vogella.jersey.todo/rest/">
<resource path="todos">
<method id="getTodosBrowser" name="GET">
<response>
<ns2:representation element="todo" mediaType="text/xml"/>
</response>
</method>
<method id="getTodos" name="GET">
<response>
<ns2:representation element="todo" mediaType="application/xml"/>
<ns2:representation element="todo" mediaType="application/json"/>
</response>
</method>
<method id="newTodo" name="POST">
<request>
<representation mediaType="application/x-www-form-urlencoded">
<param name="id" style="query" type="xs:string"/>
<param name="summary" style="query" type="xs:string"/>
<param name="description" style="query" type="xs:string"/>
</representation>
</request>
</method>
<resource path="count">
<method id="getCount" name="GET">
<response>
<representation mediaType="text/plain"/>
</response>
</method>
</resource>
<resource path="{todo}">
<param name="todo" style="template" type="xs:string"/>
<method id="getTodo" name="GET">
<response>
<ns2:representation element="todo" mediaType="application/xml"/>
<ns2:representation element="todo" mediaType="application/json"/>
</response>
</method>
<method id="getTodoHTML" name="GET">
<response>
<ns2:representation element="todo" mediaType="text/xml"/>
</response>
</method>
<method id="putTodo" name="PUT">
<request>
<representation mediaType="application/xml"/>
</request>
<response>
<representation mediaType="*/*"/>
</response>
</method>
<method id="deleteTodo" name="DELETE"/>
</resource>
</resource>
</resources>
</application> 
```

现在你能告诉我如何执行 PUT、POST、DELETE commant 吗？我应该在正文和网址中写什么？

**多谢**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T01:59:52.063

不确定您当前是如何提出请求的，尽管您可以试试我的插件[https://github.com/jpillora/jquery.rest 。](https://github.com/jpillora/jquery.rest)如果您有任何问题，请在“问题”选项卡上发布问题。

# spring - AspectJ IntelliJ - 找不到匹配的工厂方法：工厂方法'aspectOf（）'

> ID：14851491
> 
> 赞同：0
> 
> 时间：2013-02-13T10:32:46.917
> 
> 标签：spring, maven, intellij-idea, aspectj

所以我有一个spring / maven项目，我最近从eclipse转移到了intellij。这主要是因为朱诺给了我表演上的悲伤。无论如何，当我在intellij中制作时，似乎这些方面没有编织，但我不知道为什么。它可以从命令行完美运行，所以我怀疑它与我在 intellij 中的设置有关。

此外，我已经开始使用 Scala，但我不确定这会干扰吗？

我已经详尽地尝试了 aspectJ weaver 插件和 Ajc 的各种组合，但没有成功。

我想确切地知道如何正确设置它？

干杯迈克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:15:26.840

您使用哪个 IDEA 版本？通常，您不需要 AJ Weaver 插件，并且 AJ Support 插件（捆绑）应该能够导入 Maven 项目并正确设置所有依赖项（如果不是，它应该显示一些警告）。

开始：关闭 AJ Weaver，然后执行 Maven | 重新导入项目的 pom.xml，然后确保 Settings | 编译器 | Java Compiler 设置为 Ajc，然后确保 Project Structure | 构面具有 AJ 构面，其中包含要编织的所有模块的正确切面路径，然后重新构建项目。

如果这没有帮助，请在[跟踪器](http://youtrack.jetbrains.com/)中提出问题。

# android - phonegap 程序中的警报功能在 android 模拟器中不起作用

> ID：14851499
> 
> 赞同：1
> 
> 时间：2013-02-13T10:33:05.733
> 
> 标签：android, android-emulator, cordova, alert, phonegap-plugins

```
now,the problem i am facing when i run the project in the LogCat 
```

> 1 TAG-Trace TEXT-error opening trace file:no such file or directory found (2)

当我单击定义了 onclick 函数的文本时，我没有得到任何错误状态

> 2 TAG-web 控制台 TEXT-uncaught Typeerror:cannot call the method 'alert' of undefined at file:///android_assets/www.index.html:27
> 
> navigator.notification.alert(

我的编码是

```
 <html>
  <head>

    <script type="text/javascript" charset="utf-8" src="cordova-2.4.0.js"></script>
    <script type="text/javascript" charset="utf-8">

    // Wait for Cordova to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // Cordova is ready
    //
    function onDeviceReady() {
        // Empty
    }

    // alert dialog dismissed
    function alertDismissed() {
        // do something
    }

    // Show a custom alertDismissed
    //
    function showAlert() {
        navigator.notification.alert(
            'You are the winner!',  // message
            alertDismissed,         // callback
            'Game Over',            // title
            'Done'                  // buttonName
        );
    }

    </script>
  </head>
  <body>
    <p><a href="#" onclick="showAlert(); return false;">Show Alert</a></p>
  </body>
</html>

in the case of the Accelerometer project nothing comes except whatever is given in the paragraph tag...where would i have committed mistake...i have no idea about it.

**i have tried with almost all the examples but the alert function does not function**

**i have tried both ways trying out with the example and then by copying all the files like the jar,cordova.js,xml and cordova folder**

now what should i do??? please help!!! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:51:43.147

```
if (networkState == Connection.NONE)
{
  alert('No internet connection ');
 }; 
```

# double - C#魔术双值解析

> ID：14851502
> 
> 赞同：3
> 
> 时间：2013-02-13T10:33:23.590
> 
> 标签：double, xmlserializer

目前，我正在处理复杂计算中的高精度数字。一些结果和源数据应该以序列化的形式存储。一切都很好，直到我得到**神奇**的双倍值：**0.00000060912702792848**。

将该值写入字符串（XmlWriter 所做的）：

```
s = d.ToString("R", NumberFormatInfo.InvariantInfo); 
```

给出预期结果**6.0912702792848E-07**。

但是，当我尝试取回双倍值时，魔法就开始了（XmlReader 的工作方式）：

```
d=double.Parse(s, NumberStyles.Float,  NumberFormatInfo.InvariantInfo); 
```

转换后的值为 0.00000060912702792848005，末尾有**005 个额外数字。**

它看起来像是给出这种结果的特殊数字组合。我想念什么？

环境：Windows 7 Professional，64 位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-14T07:41:16.173

往返 (R) 格式说明符的 MSDN 文档包含以下注释：

> 在某些情况下，如果使用 /platform:x64 或 /platform:anycpu 开关编译并在 64 位系统上运行，使用“R”标准数字格式字符串格式化的 Double 值不会成功往返。要变通解决此问题，您可以通过使用“G17”标准数字格式字符串来格式化 Double 值。下面的示例使用带有 Double 值的“R”格式字符串无法成功往返，并且还使用“G17”格式字符串成功往返原始值。（[标准数字格式字符串](https://msdn.microsoft.com/en-us/library/dwhawy9k(v=vs.110).aspx)）

将平台设置为 AnyCpu`prefer 32 bit`并在项目设置中禁用标志时，我可以重现您的问题。启用`prefer 32 bit`标志时，解析的双精度匹配原始的序列化值。正如文档所述，您可以使用 G17 格式字符串来接收预期值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:14:36.397

虽然不完全是您问题的答案，但如果您想在最后去掉多余的小数，您可以使用：

```
s = d.ToString("G20", NumberFormatInfo.InvariantInfo); 
```

# c# - 在 WP7 浏览器控件中显示嵌入的视频 - 更新

> ID：14851505
> 
> 赞同：1
> 
> 时间：2013-02-13T10:33:32.233
> 
> 标签：c#, .net, windows-phone-7, webbrowser-control, embedded-video

我有一个嵌入在 html 页面上的 iframe 中的 youtube 视频。我正在尝试使用 WP7 应用程序中的 Web 浏览器控件显示此视频（即带有按钮的视频表示，您可以单击该按钮以启动默认的 wp7 视频播放器）。浏览器拒绝显示带有按钮的视频。注意：我用不同的嵌入式视频更新了下面的示例代码。测试代码如下所示：

```
 private void PageTitle_DoubleTap(object sender, GestureEventArgs e)
{
  string _htmlView = "<html><head><style type=\"text/css\">";
  _htmlView += " body { margin: 0; }";
  _htmlView += "</style></head><body>";
  _htmlView += "<iframe height=\"315\" src=\"http://www.youtube.com/embed/0KA4xPUJKtw?rel=0\" frameborder=\"0\" width=\"420\"></iframe>";

  _htmlView += "</body></html>";

  webBrowser.NavigateToString(_htmlView);

  // Navigating directly to the embedded video below does work though
  //webBrowser.Navigate(new Uri("http://www.youtube.com/embed/0KA4xPUJKtw?rel=0\"));

} 
```

XAML 是

```
<phone:PhoneApplicationPage 
x:Class="WebTest.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="768"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
SupportedOrientations="Portrait" Orientation="Portrait"
shell:SystemTray.IsVisible="True">

<!--LayoutRoot is the root grid where all page content is placed-->
<Grid x:Name="LayoutRoot" Background="Transparent">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!--TitlePanel contains the name of the application and page title-->
    <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
        <TextBlock x:Name="ApplicationTitle" Text="MY APPLICATION" Style="{StaticResource PhoneTextNormalStyle}"/>
        <TextBlock x:Name="PageTitle" Text="page name" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}" DoubleTap="PageTitle_DoubleTap"/>
    </StackPanel>

    <!--ContentPanel - place additional content here-->
    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
  <phone:WebBrowser x:Name="webBrowser" Margin="0,0,0,0" Width="Auto" IsScriptEnabled="True"/>

</Grid>
</Grid> 
```

我收到“视频播放需要 Adob​​e Flash Player 或支持 HTML5 的浏览器”

有人遇到这个问题并对解决它有一些想法吗？

**注意：**我无法控制来自第三方的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:39:55.150

不幸的是，嵌入式浏览器控件的行为与 Windows Phone 7 上的本机浏览器不同。

要为 youtube 视频创建一个占位符图像，用户可以单击它来开始播放视频，您需要自己创建（或获取）图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:30:40.373

今天查了很多，发现html必须以.开头。添加后，视频将按预期工作。我猜浏览器对它的显示内容感到困惑。

# sublimetext2 - 在 Sublime Text 2 上自定义 Git 插件的快捷方式

> ID：14851506
> 
> 赞同：2
> 
> 时间：2013-02-13T10:33:39.063
> 
> 标签：sublimetext2, git-diff

我想有一个快捷方式：

```
Tools -> Git -> This file -> DiffTool 
```

如果有任何区别，我已将它安装在装有 Ubuntu 12.04 的机器上。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T11:08:46.813

该命令应该是`GitDiffTool`，所以你应该添加一个快捷方式到你的`Key Bindings - User`：

```
 { "keys": ["YOUR_SHORTCUT"], "command": "git_diff_tool" } 
```

# ios - tiny_malloc_from_free_list 错误

> ID：14851508
> 
> 赞同：0
> 
> 时间：2013-02-13T10:33:41.003
> 
> 标签：ios, adwhirl

我在 iPad 上使用我的应用程序，然后出现错误 tiny_malloc_from_free_list 并导致应用程序崩溃。据我所知，这是我在我的应用程序中使用的 adWhirl 引起的，方法是

> (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error

```
{
    banner.delegate=self;

    [adWhirlView adapter:self didFailAd:error];

} 
```

我不知道问题的原因是什么。有什么建议么？

# c# - 合并两个字典 >

> ID：14851510
> 
> 赞同：3
> 
> 时间：2013-02-13T10:33:47.887
> 
> 标签：c#, dictionary, merge

这有点与这个问题有关，关于如何在 C# 中合并两个字典。提出了一个优雅的 Linq 解决方案，很酷。

但是，该问题与 相关`Dictionary<Object1, Object2>`，而我有一本字典，其中的值为 a `Dictionary<string, Object>`。

我正在寻找合并的解决方案 tow `Dictionary<string, Dictionary<string, Object>>`，具有以下要求：

*   在两个字典的字典结果中不重复键，
*   对于每个字典，我认为按 KEY 分组可以成为解决方案的一部分，但在...

    ```
    internal static Dictionary<string, Dictionary<string, object>> OperationDic(Dictionary<string, Dictionary<string, object>> a, Dictionary<string, Dictionary<string, object>> b, string operation)`
        { 
            switch (operation) 
            {
                case "+":
                    var result =  a.Concat(b).GroupBy(d => d.Key).ToDictionary (d => d.Key, d => d.First().Value); 
                    return result;               
                default: 

                    throw new Exception("Fail ...");
            }             
        } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:44:41.663

我不太清楚你想要什么。这试图合并两个字典：

```
 // first copy everything from a
    var result = new Dictionary<string, Dictionary<string, object>>(a);

    // now check to see if we can add stuff from b
    foreach (var entryOuter in b)
    {
      Dictionary<string, object> existingValue;
      if (result.TryGetValue(entryOuter.Key, out existingValue))
      {
        // there's already an entry, see if we can add to it
        foreach (var entryInner in entryOuter.Value)
        {
          if (existingValue.ContainsKey(entryInner.Key))
            throw new Exception("How can I merge two objects? Giving up.");
          existingValue.Add(entryInner.Key, entryInner.Value);
        }
      }
      else
      {
        // new entry
        result.Add(entryOuter.Key, entryOuter.Value);
      }
    }

    return result; 
```

您可能想要为`null`. `a`, `b`, 和`existingValue`(当它存在时) 可能是`null`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:58:36.723

你应该问自己的第一个问题：合并两个字典的结果有什么类型？如果它们共享相同的键，如何将值合并在一起？

它可能是这样的：

```
public static Dictionary<TKey, IEnumerable<TValue>> Merge<TKey, TValue>(this IDictionary<TKey, TValue> this_, IDictionary<TKey, TValue> other)
{
    return this_.Concat(other).     // IEnumerable<KeyValuePair<TKey, TValue>>
        GroupBy(kvp => kvp.Key).    // grouped by the keys
        ToDictionary(grp => grp.Key, grp => grp.Select(kvp => kvp.Value).Distinct());
} 
```

因此，您的两个类型字典`Dictionary<string, Dictionary<string, object>>`将转到`Dictionary<string, IEnumerable<Dictionary<string, object>>>`.

但是，您的值是字典，因此您可能希望合并它们：

```
public static Dictionary<TKey, IEnumerable<TValue>> Flatten<TKey, TValue>(IEnumerable<Dictionary<TKey, TValue>> dictionaries)
{
    return dictionaries.SelectMany(d => d.Keys).Distinct().         // IEnumerable<TKey> containing all the keys
        ToDictionary(key => key,
            key => dictionaries.Where(d => d.ContainsKey(key)).     // find Dictionaries that contain the key
                Select(d => d.First(kvp => kvp.Key.Equals(key))).   // select that key (KeyValuePair<TKey, TValue>)
                Select(kvp => kvp.Value));                          // and the value
} 
```

这需要 a`IEnumerable<Dictionary<string, object>>`并将其转换为`Dictionary<string, IEnumerable<object>>`. 您现在可以为`Merge`生成的字典的每个值调用此方法。

电话将是：

```
Dictionary<string, IEnumerable<Dictionary<string, object>>> result1 = dic1.Merge(dic2);
Dictionary<string, Dictionary<string, IEnumerable<object>>> result2 = dic1.Merge(dic2).ToDictionary(kvp => kvp.Key, kvp => Flatten(kvp.Value)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T13:19:10.380

```
 internal static Dictionary<string, Dictionary<string, object>> OperationDic(Dictionary<string, Dictionary<string, object>> a, Dictionary<string, Dictionary<string, object>> b, string operation)
    {
        var result = new Dictionary<string, Dictionary<string, object>>(a);
        switch (operation)
        {
            case "+":                  
            // now check to see if we can add stuff from b
            foreach (var entryOuter in b)
            {
              Dictionary<string, object> existingValue;
              if (result.TryGetValue(entryOuter.Key, out existingValue))
              {
                  Dictionary<string, object> Value = entryOuter.Value;
                  result[entryOuter.Key] = existingValue.Concat(Value).GroupBy(d => d.Key).ToDictionary(d => d.Key, d => d.First().Value);
              }
              else
              {
                // new entry
                result.Add(entryOuter.Key, entryOuter.Value);
              }
            }
            return result;
            default:                    
                throw new Exception("FAIL ...");
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T11:17:24.713

尝试这个

var 结果 = a.Concat(b).GroupBy(c => c.Key).ToDictionary>(

# visual-c++ - 无法使用 DirectX 捕获屏幕

> ID：14851511
> 
> 赞同：0
> 
> 时间：2013-02-13T10:33:50.023
> 
> 标签：visual-c++, directx

我试图在 VS 2008 中使用 DirectX 截屏。但我总是得到黑色图像。有人可以指出我，我的代码出了什么问题……我的代码片段如下所示：

```
void CaptureScreen()
{
IDirect3DDevice9* pDirect3DDevice;

IDirect3DSurface9* pRenderTarget=NULL;
IDirect3DSurface9* pDestTarget=NULL;

D3DDISPLAYMODE d3ddisplaymode;

D3DPRESENT_PARAMETERS PresentParams;
memset(&PresentParams, 0, sizeof(D3DPRESENT_PARAMETERS));

PresentParams.Windowed = TRUE;
PresentParams.SwapEffect = D3DSWAPEFFECT_DISCARD;

HWND h = ::FindWindow(0,"EIML");
IDirect3D9* direct=Direct3DCreate9(D3D9b_SDK_VERSION);
direct->CreateDevice(D3DADAPTER_DEFAULT,
            D3DDEVTYPE_HAL,
            h,
            D3DCREATE_SOFTWARE_VERTEXPROCESSING,
            &PresentParams,&pDirect3DDevice);

if (pDirect3DDevice == NULL)
return;

HRESULT hr = pDirect3DDevice->GetRenderTarget(0, &pRenderTarget);

hr = direct->GetAdapterDisplayMode(D3DADAPTER_DEFAULT,&d3ddisplaymode);

hr = pDirect3DDevice->CreateOffscreenPlainSurface(d3ddisplaymode.Width,d3ddisplaymode.Height,D3DFMT_A8R8G8B8,
D3DPOOL_SYSTEMMEM,
&pDestTarget,
NULL);

pDirect3DDevice->GetBackBuffer(0, 0, D3DBACKBUFFER_TYPE_MONO, &pDestTarget ) ;

hr = pDirect3DDevice->GetRenderTargetData(pRenderTarget,pDestTarget);

hr = D3DXSaveSurfaceToFile("C:\\Image1.bmp",
D3DXIFF_BMP,
pDestTarget,
NULL,
NULL);

pRenderTarget->Release();
pDestTarget->Release();

 } 
```

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T19:21:51.247

这是我截取屏幕截图的方式：

```
IDirect3DSurface9 *offscreenSurface;
d3dDevice->GetBackBuffer(0, 0, D3DBACKBUFFER_TYPE_MONO, &offscreenSurface);
D3DXSaveSurfaceToFile( filename, D3DXIFF_BMP, offscreenSurface, 0, 0 ) 
```

# actionscript-3 - 在 Flex 中创建 Captch 组件

> ID：14851519
> 
> 赞同：1
> 
> 时间：2013-02-13T10:34:29.007
> 
> 标签：actionscript-3, apache-flex, flex4, flex3

请任何人告诉我如何在 Flex 中进行 Captch？

这种类型的 Captch Creation 需要任何 Java 服务吗？

你能举一些例子如何在 Flex 中进行 Captch 吗？（只需要 4 字文本）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T06:56:00.863

我猜垃圾邮件程序不会那么聪明地干扰 flex 应用程序，因此如果您想在客户端检查代码，您可以使用随机文本创建文本组件（如果您对捕获图像并识别其上的文本的机器人感到偏执）应用一些标准过滤器，如模糊、阴影等。

或者，您可以创建类似 mx:HTML 的内容，然后使用一些验证码服务，例如您可以在以下页面上看到的服务：http: [//bash.im/add](http://bash.im/add)。

# c++ - C++ 指针 GUI QT

> ID：14851523
> 
> 赞同：2
> 
> 时间：2013-02-13T10:34:39.523
> 
> 标签：c++, qt, user-interface, pointers

我可能会用这个完全错误的树，但它确实编译了，它只是崩溃了。我最近两周才在做 C++，主要来自 Java 背景，这不是很广泛！

任何人，我有一个房间类。我想设置4个出口，北，南，东，西。我想创建一个带有 4 个 Room 指针的 setExits() 方法。每个 Room 对象都有一个调用该指针的 goNorth() 等方法。

```
Room::Room(QString name, QString shortD, QString longD, QImage roomImage)
{
    this->name = name;
    this->shortD = shortD;
    this->longD = longD;
    this->roomImage = roomImage;
}

QString Room::shortDescription()
{
    return shortD;
}

QString Room::longDescription()
{
    return longD;
}

QImage Room::showImage()
{
    return roomImage;
}

void Room::setExits(Room *north, Room *south, Room *east, Room *west)
{
    this->north = north;
    this->south = south;
    this->east = east;
    this->west = west;
}

Room* Room::goNorth()
{
    return north;
} 
```

我正在打电话并像这样进行设置。

```
void TheIslandMain::createRooms()
{
    //Room *forest, *lake; - declare as global in theislandmain.h?
    forest = new Room(readRooms("../Island/Rooms/forest.name"), readRooms("../Island/Rooms/forest.short"), readRooms("../Island/Rooms/forest.long"), getImage("../Island/Rooms/forest.jpg"));
    //forest->setExits(lake, currentRoom, currentRoom, currentRoom);

    lake = new Room(readRooms("../Island/Rooms/lake.name"), readRooms("../Island/Rooms/lake.short"), readRooms("../Island/Rooms/lake.long"), getImage("../Island/Rooms/lake.jpg"));
    currentRoom = forest;
} 
```

单击 gui 中的按钮时，我正在使用以下代码。

```
void TheIslandMain::on_northButton_clicked()
{
    ui->roomDesc->clear();
    currentRoom = lake;
    //currentRoom = currentRoom->goNorth();
    ui->actionLabel->setText(currentRoom->shortDescription());
    ui->imageArea->setPixmap(QPixmap::fromImage(currentRoom->showImage()));
} 
```

我已经注释掉了我想使用的代码，这就是错误。现在的代码可以正常工作。当我再次取消注释代码时，它会编译文件，但是一旦单击 North 按钮就会出现 255 错误并崩溃。

我什至不确定这是否合法，这只是我正在考虑的事情。我是不是完全找错树了？就像我说的，我只是在学习 C++，实际上我们还没有在课堂上对指针做过任何事情。

我对注释代码的理解是，我将 currentRoom 变量的内存引用更改为 Room 对象中的引用 north，它本身取自主类中定义的引用。

对不起，如果我是愚蠢的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:45:42.340

如果您取消注释该行`//forest->setExits(lake, currentRoom, currentRoom, currentRoom);`显然会导致问题，因为`lake`没有初始化。

# c# - 比较哈希编码的密码

> ID：14851525
> 
> 赞同：2
> 
> 时间：2013-02-13T10:34:45.813
> 
> 标签：c#, asp.net, sql-server, sql-server-2008-r2

我将我的数据类型存储`password`在数据库表列中`string`。在将它存储到数据库之前，我`Hash encoded`使用下面的 c# 方法来制作它：

```
public static string Md5Encrypted(string password)
        {
            byte[] pass = Encoding.UTF8.GetBytes(password);
            MD5 md5 = new MD5CryptoServiceProvider();
            string strPassword = Encoding.UTF8.GetString(md5.ComputeHash(pass));
            return strPassword;
        } 
```

现在我想`compare`在插入新密码时使用它。

为此，我从数据库中获取特定用户的记录，并以字符串形式获取他现有的编码密码。如果我使用相同的密码，那么它也不匹配。例如，如果我`adgjl135`作为密码传递，它被编码为`Pb�ZsÈU��}��`但从数据库中我得到的是`Pb?ZsÈU??}??`但很明显它们不会匹配。那我该如何比较它们呢？任何的想法？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T10:36:48.363

不要这样做：

```
Encoding.UTF8.GetString(md5.ComputeHash(pass)) 
```

计算哈希的结果*不是*UTF-8 编码的文本。是二进制数据。当您尝试将其解释为 UTF-8 编码的字符串时，您会丢失数据 - 因此会出现问题。

因此，要么将其存储为二进制数据，要么将其转换为 hex 或 base64，这两者都可以用来表示任意二进制数据而不会丢失。

（作为重要的一点，你不应该*只*使用 MD5 来散列密码 - 尤其是不加盐。但这是一个单独的讨论，你*绝对*应该关注一个，而我没有能力发表权威性的发言。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:22:21.857

# functional-programming - 在 OCaml 中，何时使用接口 (mli) 以及何时使用模块？

> ID：14851532
> 
> 赞同：2
> 
> 时间：2013-02-13T10:35:15.933
> 
> 标签：functional-programming, ocaml

OCaml 提供`mli`了接口和模块系统。

我的问题很简单，如何从中选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:53:11.077

好吧，一方面，[模块更强大](http://ocaml.org/tutorials/modules.html)。例如，OCaml 有 Functor（类似于模块级函数）。在解释器中输入：

```
module String_set = Set.Make (String) 
```

它创建一个对字符串集（例如并集和交集）进行操作的模块。

如果您只使用模块的命名空间功能，则创建显式模块可以方便地使用更深的命名空间。也就是说，模块中的模块，例如：Module1.Module2，可以通过定义名为 Module2 的模块的文件 module1.ml 来实现。

当然，每个文件都定义了一个模块 - 文件 m.ml 定义了模块 M - 我发现它们在语法上很方便（因为你没有额外的缩进......）

此外，.mli 有不同的用途：接口文件用于记录顶级定义的类型，这包括模块本身。如果您在文件 m.ml 中定义模块 X，您也可以将 X 的签名放入 m.mli 中。但是 .mli 文件是可选的，因此即使您更喜欢将模块定义为文件，也不*需要*创建接口文件。

PS：OCaml 中的模块非常强大，以至于一个常见的话题是[“我应该使用模块还是对象？”](http://caml.inria.fr/pub/docs/oreilly-book/html/book-ora153.html) . 还要检查[一流的模块](https://stackoverflow.com/questions/2483747/first-class-modules-in-ocaml-3-12-what-kinds-of-things-will-they-make-easier-o)是否增加了魔力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T11:08:43.740

这只是访问同一事物的两种方式

当您在文件 Bar.ml 中创建模块 Foo 时，您必须通过 Bar.Foo.function 访问它。如果您创建 bar.mli，则此文件中定义的所有函数都可以通过 Bar.function 在语法上访问。其他职能只是实习生。

# android - 连续扫描蓝牙设备

> ID：14851535
> 
> 赞同：1
> 
> 时间：2013-02-13T10:35:25.920
> 
> 标签：android, bluetooth

我已经编写了以下代码，以根据[*链接*](https://stackoverflow.com/questions/3285580/how-to-periodically-scan-for-bluetooth-devices-on-android)中提供的解决方案连续扫描蓝牙设备。根据该解决方案，我的设备应连续扫描/搜索范围内的蓝牙设备，但在我的情况下，扫描仅发生约 64 秒。

我已经在两台设备上测试了这段代码，一台使用 Android V2.2，另一台使用 V2.3，这两款设备仅扫描约 64 秒。

如何让我的设备连续扫描？

```
 public void onReceive(Context context, Intent intent) {

        String action = intent.getAction();
        if(BluetoothDevice.ACTION_FOUND.equals(action)){

          //Do Something

        }else if(BluetoothAdapter.ACTION_DISCOVERY_FINISHED.equals(action)){
            btAdapter.startDiscovery();
        }
    } 
```

# c++ - 多线程和 pthread_join

> ID：14851536
> 
> 赞同：1
> 
> 时间：2013-02-13T10:35:26.340
> 
> 标签：c++, multithreading, pthread-join

我的程序从文本文件中读取迷宫，然后主程序创建 3 个不同的线程来钻研这个迷宫并搜索出口。当一个线程发现出口时，它会在主线程中发布它的解决方案路径。

在这个迷宫中，存在陷阱，当一个线程遇到时，它们会“死亡”，将该陷阱的位置保存到已发现的陷阱点的全局数组中，以便其他线程知道在哪里避免。在该线程死亡后，主程序将重新生成另一个线程来代替它并继续遍历迷宫。

一个线程可能会遇到也可能不会遇到陷阱，并且使用 pthread_join 只会等待特定的线程。如何让主线程同时等待每个线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:34:05.443

使用 pthreads 中的条件变量是`pthread_cond_t`. 让主线程等待条件变量，并在线程死亡之前让它发出条件变量的信号。在伪代码中是这样的：

**主线程**

```
//spawn first set of threads
while(!done) {
   pthread_cond_wait(&cond, &mutex);
   //spawn another thread
} 
```

**工作线程**

```
//traverse maze
pthread_cond_broadcast(&cond);
//thread exit 
```

请注意，使用条件变量时，您需要获取和释放关联的互斥锁。有关更多详细信息，请查看手册页`pthread_cond_wait`。

# java - 关闭与 MySQL 的连接时出现 JDBC 套接字异常

> ID：14851537
> 
> 赞同：0
> 
> 时间：2013-02-13T10:35:27.880
> 
> 标签：java, mysql, database, jdbc

我正在使用 JDBC 中的以下连接字符串连接到 MySQL。

```
jdbc:mysql://127.0.0.1/db?enable-named-pipe&socket=MySQL&socketFactory=com.mysql.jdbc.NamedPipeSocketFactory&zeroDateTimeBehavior=convertToNull 
```

如果我使用 tcp/ip 连接，我可以很好地关闭连接，但如果我使用本地套接字/管道连接到 MySQL，它似乎会引发以下异常。

```
java.netSocketException: Socket is not connected 
```

似乎连接被丢弃而我不需要关闭连接，所以当使用本地套接字/管道时，我不必关闭连接它是自动完成的，我这样想是否正确？我插入的数据似乎很好。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:00:42.310

这似乎是由于尚未修复的 JVM 错误[http://bugs.mysql.com/bug.php?id=62518](http://bugs.mysql.com/bug.php?id=62518)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:42:05.047

你知道你没有关闭连接，你应该这样做。

为了安心，您可以尝试关闭连接并捕获抛出的异常。这可能比依赖在下一个小版本中可能会消失的某种错误类型的功能要好。

# requirejs - 使用 requirejs 是否可以在不尝试加载的情况下检查模块是否已定义？

> ID：14851541
> 
> 赞同：36
> 
> 时间：2013-02-13T10:35:29.507
> 
> 标签：requirejs

我希望能够有选择地定义一个模块，然后在我的代码中使用或不使用它。我正在考虑的特殊情况是在调试/测试环境中加载模拟/存根模块，但不是在我上线时加载。这是示例：

在 html 文件中，可以选择加载 js 文件（伪代码）：

```
//index.cshtml
...
<script src="/Scripts/lib/require.js"></script>
<script src="/Scripts/app/service_user.js"></script>
<script src="/Scripts/app/real_service.js"></script>
#if DEBUG
<script src="/Scripts/app/mock_service.js"></script>
#endif 
```

在上面，real_service 和 mock_service 都必须在调试版本中加载。

每个模块都将使用 requirejs 定义，例如：

```
//mock_service.js
define('mock_service', [], 
    function () {
        ...
    });

//real_service.js
define('real_service', [], 
    function () {
        ...
    }); 
```

然后在使用该服务时，我想检查 mock_service 是否已定义：

```
//service_user.js
define(['require', 'real_service'], 
    function (require, real_service) {
        if (require.isDefined('mock_service')) { // 'isDefined' is what I wish was available
             var mock = require('mock_service');
             mock.init(real_service);
        }

        ...
    }); 
```

所以我名义上的“isDefined”函数只会检查具有给定名称（或名称？）的模块是否已定义。然后在我的代码中，如果它被定义，我可以要求它并使用它。如果没有，那也很好。

对我来说重要的是没有尝试加载可选模块。我可以尝试/捕获 require 语句，但这会导致尝试从服务器加载它，我不希望这样。

另一种选择是定义我总是加载的存根，因此总是需要一个模拟，然后我可以询问它是否是真实的，但这似乎也很浪费。

有没有人深入到 require.js 发现他们需要这个功能并制定了实施策略？

提前谢谢你，罗布

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-02-13T22:27:20.070

我自己只是在寻找这个，require global 上有一个“已定义”方法，它采用模块名称并返回 true 或 false。

```
// returns true
require.defined("my/awesome/defined/module");

// returns false
require.defined("not/yet/loaded"); 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-02-22T16:41:43.877

尽管 David Wolf 的回答接近标准，但它并没有完全满足我的需求。

问题是 require 异步解决需求，所以在我给出的示例中，使用 David 的建议`require.defined('mock_service')`将返回`false`，因为虽然它已被指定但尚未解决。

在对此进行调查时，我确实找到了另一个功能`specified`。在示例`require.specified('mock_service')`中将返回`true`，但随后尝试使用`require('mock_service')`失败获取引用，因为它尚未解决。

幸运的是，使用 require 的回调版本很容易解决这个问题。综上所述，我们有：

```
if (require.specified('mock_service')) {
    require( [ 'mock_service' ], function (mock) {
         mock.init(real_service);
    });
} 
```

@David Wolf - 谢谢，没有你的帮助就不会到达那里。

# php - Android：无法使用 php 脚本将图像上传到远程 MySql DB

> ID：14851543
> 
> 赞同：4
> 
> 时间：2013-02-13T10:35:29.887
> 
> 标签：php, android, mysql, image, upload

我在这个问题上花了 2 周时间。我写了下面的代码（Android和php）。看起来还可以，但不能正常工作或不能正常工作。客户端 Android 似乎发送了一些东西 服务器端收到了一些东西，但我不知道它是什么。

在客户端 Android 和服务器上的代码下方。

谢谢。

```
…
Uri uriTarget = getContentResolver().insert(Media.EXTERNAL_CONTENT_URI, new    ContentValues());
uri_Target=uriTarget.toString();
OutputStream imageFileOS;
try 
{
imageFileOS = getContentResolver().openOutputStream(uriTarget);
imageFileOS.write(arg0);
imageFileOS.flush();
imageFileOS.close();

Toast.makeText(ActSismicoCamera_New.this, "Image saved: " + uriTarget.toString(),Toast.LENGTH_LONG).show(); 
SharedPreferences preferences = getPreferences(MODE_PRIVATE);
SharedPreferences.Editor editor = preferences.edit();
editor.putString("percorso",uri_Target);            
editor.commit(); 
inviaPosizione(uri_Target); 
} 
catch (FileNotFoundException e) 
{           
e.printStackTrace();
} 
catch (IOException e) 
{           
e.printStackTrace();
}
camera.startPreview();
}
…
--------------------------------------------------------------------------------------
private void inviaPosizione(String percorso)
{
InputStream is=null;
try
{
String uri_Target;
SharedPreferences preferences = getPreferences(MODE_PRIVATE);
uri_Target = preferences.getString("percorso", null);          
Uri imageUri = Uri.parse(uri_Target);          
String filenamelastPhoto;
filenamelastPhoto = getLastImage(imageUri);        
File sdCard = Environment.getExternalStorageDirectory();
File directory = new File (sdCard.getAbsolutePath()+ "/DCIM/Camera/");
File immagine = new File(directory, filenamelastPhoto); //or any other format supported
if(immagine.exists()) 
{
 Toast.makeText(ActSismicoCamera_New.this, "ESISTE = "+immagine, Toast.LENGTH_LONG).show();        
}
Bitmap bitmapOrg = BitmapFactory.decodeFile(immagine.toString()); 
    ByteArrayOutputStream bao = new ByteArrayOutputStream();
try
{                  
  bitmapOrg.compress(Bitmap.CompressFormat.JPEG, 60, bao);             
  byte [] ba = bao.toByteArray();
  Toast.makeText(ActSismicoCamera_New.this, "inviaPosizione Valore ba= " + ba, Toast.LENGTH_LONG).show();
  int flag = 1;
  String ba1 = Base64.encodeBytes(ba,flag);
  ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
  nameValuePairs.add(new BasicNameValuePair("tag","registra"));
  nameValuePairs.add(new BasicNameValuePair("media",ba1));
  StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
  StrictMode.setThreadPolicy(policy);
  HttpClient httpclient = new DefaultHttpClient();
  httpclient.getParams().setParameter(CoreProtocolPNames.USER_AGENT, "Custom user agent");
  HttpPost httppost = new
  HttpPost("http://xxxxx.org/AndActSismicoUploadFile.php");
               httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
               HttpResponse response = httpclient.execute(httppost);
               HttpEntity entity = response.getEntity();
               is = entity.getContent();
           }
           catch(Exception e)
           {
               Toast.makeText(ActSismicoCamera_New.this, "inviaPosizione Exception su HttpClient: " + e.toString(), Toast.LENGTH_LONG).show();
           }
           try 
           {
       BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
       StringBuilder sb = new StringBuilder();
       String line = null;
       while ((line = reader.readLine()) != null) 
       {
        sb.append(line + "\n");
       }
       is.close();
       json = sb.toString();                         
    } 
            catch (Exception e) 
    {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

     }
     catch (Exception e) 
{           
       e.printStackTrace();
}               
} 
```

PHP 脚本

```
<?php     
require_once 'DB_Funzioni.php';
if (isset($_POST['tag']) && $_POST['tag'] != '') 
{  
$tag = $_POST['tag'];
$oggetto = $_POST['media'];

if (isset($_POST['media'])) 
    {   
    header('Content-Type: bitmap;charset-utf-8');                       
if(move_uploaded_file($_FILES["media"]["tmp_name"],"immagini/" . $_FILES["media"]["name"])) 
    {
        echo "The file ". $_FILES['media']['name']." has been uploaded";
        $info="The file ". basename( $_FILES['media']['name'])." has been uploaded";
        mail ($destinatario, $ogg, $info);
    }
    else
    {
        $info="Problema!";
        mail ($destinatario, $ogg, $info);
        switch ($_FILES['media']['error'])
        {  
                    case 1:
        echo "The uploaded file exceeds the upload_max_filesize directive in php.ini";
        $info="The uploaded file exceeds the upload_max_filesize directive in php.ini!";
        mail ($destinatario, $ogg, $info);
        break;
        case 2:
        echo "The uploaded file exceeds the MAX_FILE_SIZE directive that was specified in the HTML form";
        $info="The uploaded file exceeds the MAX_FILE_SIZE directive that was specified in the HTML form!";
        mail ($destinatario, $ogg, $info);
        break;
        case 3:
        echo "Only part of the file was uploaded";                     
        $info="Only part of the file was uploaded!";
        mail ($destinatario, $ogg, $info);
        break;
        case 4:
        echo "No file was uploaded";
        $info="No file was uploaded!";
        mail ($destinatario, $ogg, $info);
        break;             
        case 6:
        echo "Missing a temporary folder. Introduced in PHP 4.3.10 and PHP 5.0.3";
        $info="Missing a temporary folder. Introduced in PHP 4.3.10 and PHP 5.0.3!";
        mail ($destinatario, $ogg, $info);
        break; 
        case 7:
        echo "Failed to write file to disk. Introduced in PHP 5.1.0";
        $info="Failed to write file to disk. Introduced in PHP 5.1.0!";
        mail ($destinatario, $ogg, $info);
        break;
        case 8:
        echo "A PHP extension stopped the file upload";
        $info="A PHP extension stopped the file upload!";
        mail ($destinatario, $ogg, $info);
        break;                       
        }
    }

    $response = array("tag" => $tag, "success" => 0, "error" => 0);
        $db = new DB_Functions();       
    $fileName = $_FILES['media']['name'];
    $tmpName = $_FILES['media']['tmp_name'];
    $fileSize = $_FILES['media']['size'];
    $fileType = $_FILES['media']['type'];       
    $fp      = fopen($tmpName, 'r');
    $content = fread($fp, filesize($tmpName));
    $content = addslashes($content);
    move_uploaded_file($_FILES["media"]["tmp_name"],"immagini/" . $_FILES["media"]["name"]);
    fclose($fp);

    if(!get_magic_quotes_gpc())
    {
        $fileName = addslashes($fileName);
    }       
    $file = $db->storeFile($fileName);  
    if ($file)
    {
        $response["success"] = 1;
        //$response["filename"]["id"] = $file["filename"];
        $response["filename"]= $tmpName ;
        echo json_encode($response);
            } 
    Else
    {
                 // user failed to store
                $response["error"] = 1;
                //$response["error_msg"] = "Error occured in Insert";
                $response["error_msg"] = mysql_error();
                echo json_encode($response);
        }
  }
  Else
    {
               $response = array("tag" => $tag, "success" => 0, "error" => 0);                  
                $response["error"] = 1;
                $response["error_msg"] = "Media vuoto";                 
                echo json_encode($response);
        }            
}
//mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:14:01.597

这不是一个完整的答案......我会在我们去的时候完成这个答案......

首先，我建议您检查是否获得了您应该获得的帖子数据。请在以下之后将其插入顶部：

```
if (isset($_POST['tag']) && $_POST['tag'] != '') 
{ 
```

...

```
file_put_contents ("mydebugdata.txt",json_encode($_POST)); 
```

这应该将脚本接收到的数据转储到文件“mydebugdata.txt”中...... json_encode() 为 $_POST 提供了一些结构......所以你可以读取数据......

然后尝试保存图片并在此处发布 mydebugdata.txt 的内容...

# python - 谷歌云打印服务的访问令牌

> ID：14851544
> 
> 赞同：2
> 
> 时间：2013-02-13T10:35:41.780
> 
> 标签：python, oauth-2.0, access-token, google-cloud-print

我想为我的应用程序使用谷歌云打印服务，概念是：买家可以从我的网站购买产品，他应该将订单列表发送到供应商的打印机。

为此，供应商应在其谷歌帐户中注册打印机，买家将打印请求发送到选定供应商的打印机，订单文件应在供应商的打印机上打印。

问题是：云打印应用程序正在使用 OAuth2 授权，它需要 google 帐户登录和 client_id 来获取访问令牌。因此，为了获取打印机列表并提交打印作业，买家需要使用来自后端的供应商的谷歌凭据从谷歌账户登录。（有或没有浏览器）这是不可接受的，因为它还允许买方使用供应商帐户的其他谷歌服务（例如邮件、文档）。

所以我的问题是，还有其他方法可以获取访问令牌吗？也欢迎任何其他解决方案。

注意：我参考了[google-pythonCode](https://developers.google.com/cloud-print/docs/pythonCode) 和[cloudprinting](https://github.com/bradleyayers/cloudprinting)模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T18:07:13.847

您要做的是让供应商使用 OAuth2 授权并存储他们的 access_token，更重要的是 refresh_token。买家根本不需要向 Google 授权，您只需使用适当的供应商访问令牌将他们的打印作业发送到供应商打印机。这也使得处理对不同打印机的访问变得更加容易，因为每个供应商的 Google 帐户已经可以访问他们自己的打印机。

刷新令牌是一个长期存在的令牌（在供应商撤销之前有效），即使在短期（1 小时）访问令牌到期后，您也可以获取新的访问令牌。

# ruby - 来自哈希的 Ruby .erb 模板，但捕获未设置的变量

> ID：14851549
> 
> 赞同：2
> 
> 时间：2013-02-13T10:35:49.150
> 
> 标签：ruby, erb

我是一个 Ruby 新手，但我正在尝试使用脚本和大量合成数据（我将放入 Yaml 文件或其他内容）来呈现 Puppet .erb 模板。我们的 puppet 模板大多是这样的：

```
# Some config file
<%= @some_ordinary_variable %>
<%= some_other_variable %>
<%= @something_undefined %>
<%= scope.function_hiera("some_hiera_variable") %> 
```

我已经模拟了 hiera 查找，并发现[使用带有 ERB 的 OpenStruct](https://stackoverflow.com/questions/3242470/problem-using-openstruct-with-erb/8293786)作为替代“some_other_variable”的方法存在问题（我有点坚持让“@some_ordinary_variable”工作，但我想我可以弄清楚那个。

我要问的是如何使用绑定，让我在每个变量查找时运行一些代码？我想我想运行类似的东西：

```
def variable_lookup(key)
  if @variables.has_key?(key)
    return @variables[key]
  else
    warn "The variable " + key + " is required by the template but not set"
  end
end 
```

然后我可以将它与我的 Hiera 模型合并以查找 Hiera 数据。我到目前为止的代码是：

```
require 'rubygems'
require 'yaml'
require 'erb'
require 'ostruct'

class ErbBinding < OpenStruct
  include Enumerable
  attr_accessor :yamlfile, :hiera_config, :erbfile, :yaml

  def scope
    self
  end

  def function_hiera(key)
    val = @yaml['values'][key]
    if val.is_a?(YAML::Syck::Scalar)
      return val.value
    else
      warn "erby: " + key + " required in template but not set in yaml"
      return nil
    end
  end

  def get_binding
    return binding()
  end
end

variables = {'some_other_variable' => 'hello world'}

hs = ErbBinding.new(variables)
template = File.read('./template.erb')
hs.yaml = YAML.parse( File.read('./data.yaml') )

erb = ERB.new(template)

vars_binding = hs.send(:get_binding)
puts erb.result(vars_binding) 
```

我不知道如何设置运行代码的绑定，而不仅仅是使用“变量”哈希。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:48:45.280

事实证明这非常简单！我发现您可以使用特殊方法“method_missing”来收集所有未定义的方法调用。也就是说，我们使用绑定将散列变成对象（每个散列键成为对象中的方法）。如果缺少方法（即哈希中没有设置键），那么 Ruby 会调用“method_missing”——我所做的只是说明缺少的方法名称是什么。如果在这里找到重要的信息：[http ://ruby-metaprogramming.rubylearning.com/html/ruby_metaprogramming_2.html](http://ruby-metaprogramming.rubylearning.com/html/ruby_metaprogramming_2.html)

如果你想知道，这是我到目前为止的总代码......

```
require 'rubygems'
require 'yaml'
require 'erb'
require 'ostruct'

class ErbBinding < OpenStruct
  include Enumerable
  attr_accessor :yamlfile, :hiera_config, :erbfile, :yaml

  def method_missing(m, *args, &block)
    warn "erby: Variable #{m} required but not set in yaml"
  end

  def scope
    self
  end

  def function_hiera(key)
    val = @yaml['values'][key]
    if val.is_a?(YAML::Syck::Scalar)
      return val.value
    else
      warn "erby: " + key + " required in template but not set in yaml"
      return nil
    end
  end

  def get_binding
    return binding()
  end
end

variables = {'some_other_variable' => 'hello world'}

hs = ErbBinding.new(variables)
template = File.read('./template.erb')
hs.yaml = YAML.parse( File.read('./data.yaml') )

erb = ERB.new(template)

vars_binding = hs.send(:get_binding)
puts erb.result(vars_binding) 
```

这段代码仍然不能处理像 <%= @variable %> 这样的模板，但它会处理我原来问题中的其他两种情况。

# javascript - Backbone.js 中的自定义 REST api 响应

> ID：14851557
> 
> 赞同：5
> 
> 时间：2013-02-13T10:36:23.890
> 
> 标签：javascript, backbone.js

```
My REST api returns data in json in following format for `/api/users`:

{
    "objects":[
        {"User":{"id":"1","created":"2013-02-13 09:22:42","modified":"2013-02-13 09:22:42","username":"some.email@gmail.com","role":"admin"}},
        {"User":{"id":"2","created":"2013-02-13 09:22:55","modified":"2013-02-13 09:22:55","username":"some.email2@gmail.com","role":"analyst"}},
        {"User":{"id":"3","created":"2013-02-13 09:23:02","modified":"2013-02-13 09:23:02","username":"some.email3@gmail.com","role":"moderator"}},
        {"User":{"id":"4","created":"2013-02-13 09:23:10","modified":"2013-02-13 09:23:10","username":"some.email4@gmail.com","role":"representative"}}
        ],
    "meta":
        {"page":1,"pageCount":1,"prevPage":false,"nextPage":false,"limit":20,"count":4,"sort":null,"direction":null}
} 
```

因为`/api/users/{id}`它以以下格式返回数据：

```
{"User":{"id":"1","created":"2013-02-13 09:22:42","modified":"2013-02-13 09:22:42","username":"some.email@gmail.com","role":"admin"} 
```

我如何将它与 Backbone.js 集合和模型集成？我知道 Backbone.js 期望 api 返回对象字典或纯对象字典的数组 - 有没有办法改变它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-13T10:40:38.800

就在这里。您可以覆盖[model.parse](http://backbonejs.org/#Model-parse)或[collection.parse](http://backbonejs.org/#Collection-parse)。例如：

```
var UserCollection = Backbone.Collection.extend({
                model: User, 
                url: '/api/users',
                parse: function(response) {
                        // process response.meta when necessary...
                        return response.objects;
                    });
                }
            });

var UserModel = Backbone.Model.extend({
                 //...
                 parse: function(response) {
                        return response.User;
                    });
                }
            }); 
```

# sql - 带有关联字段的 Doctrine Native Sql 查询失败

> ID：14851561
> 
> 赞同：-1
> 
> 时间：2013-02-13T10:36:44.483
> 
> 标签：sql, zend-framework, doctrine-orm

似乎无法弄清楚这里出了什么问题，因为我的实体似乎有正确的注释等。将 SQL 转换为直接在 Navicat 中运行它可以工作。

具体错误是

```
[Semantical Error] line 0, col 120 near 'city_id = 2)': Error: Class Simpleweb\Entity\Product has no field or association named city_id 
```

与 city_id 相关的产品实体部分（City 是 OneToMany 相关实体）

```
/**
 * @ManyToOne(targetEntity="City", inversedBy="products")
 * @JoinColumn(name="city_id", referencedColumnName="id")
 **/
private $city; 
```

控制器中的代码正在尝试基于用户选择的多个过滤器构建动态查询。与此相关的一个尝试将城市 ID 号添加到 where 子句：

```
public function findByPhrases($phrase, $sortBy = null, $cityFilter = null){
    $searchWords = $this->phraseToWords($phrase);
    $result = null;

    if(!is_null($searchWords)){
        /*
         * Build query, e.g. below:
         *
         * SELECT * FROM products
         * WHERE description_short
         * (LIKE '%sander%' OR name LIKE '%sander%') AND
         * (city_id = 1 OR city_id = 3)
         */
        try{
            $sql = "SELECT p FROM Simpleweb\Entity\Product p WHERE ";

            // Append an OR where clause onto the end for each word
            $sql .= "(";
            foreach($searchWords as $word){
                $sql .= "(p.description_short LIKE '%$word%') OR (p.name LIKE '%$word%') OR ";
            }

            $sql = substr($sql, 0, -4); // Remove the last 'OR' from the end of the SQL statement
            $sql .= ")";

            if($cityFilter != null){
                $sql .= " AND (";
                 foreach($cityFilter as $city){
                     $sql .= "p.city_id = $city OR ";
                 }
                $sql = substr($sql, 0, -4);
                $sql .= ")";
            }

            // Add sorting statement
            if(strlen($sortBy) >= 1){
                switch($sortBy){
                    case 'dateadded':
                        $sql .= " ORDER BY p.created ASC";
                        break;
                    case 'priceasc':
                        $sql .= " ORDER BY p.totalprice ASC";
                        break;
                    default:
                        break;
                }
            }

            echo($sql);

            $em = $this->getEntityManager();
            $qb = $em->createQuery($sql);

            $result = $qb->getResult();
        }catch(Exception $ex){
            echo($ex->getMessage());
        }
        return $result;
    }else{
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:52:46.590

好的，整理一下：

```
$sql = "SELECT p FROM Simpleweb\Entity\Product p WHERE "; 
```

变成

```
$sql = "SELECT p FROM Simpleweb\Entity\Product p JOIN p.city c WHERE "; 
```

和

```
$sql .= "p.city_id = $city OR "; 
```

变成

```
$sql .= "c.id = $city OR "; 
```

# android - 无法在活动中使用 viewpager 创建片段。

> ID：14851562
> 
> 赞同：1
> 
> 时间：2013-02-13T10:36:45.717
> 
> 标签：android, android-fragments, android-viewpager

我需要在扩展的主要活动的一部分中添加`ViewPager`使用。为此，我创建了一个扩展类，从这里它添加了创建包含我要创建的视图的调用。但我面临的问题是我无法让我的主类在我的主要活动上创建查看器。`Fragment``TabActivity``ViewPagerActivity``FragmentActivity``FragmentAdapter``Fragment`

我认为问题是当我`ViewPagerActivity`在我的主类上调用该类时，它无法创建`fragment`创建`viewpager`.

请帮助我已经被困了将近一个月了，我尝试的每个解决方案都失败了。这些代码在单独的项目中单独实现时运行完美，但在我的项目中实现时似乎没有执行。

ViewPagerActivity 类

```
class ViewPagerClass extends FragmentActivity implements OnClickListener
    {
            TestFragmentAdapter mAdapter;
            ViewPager mviewpager;
            CirclePageIndicator mIndicator;
            @Override
            protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
                mAdapter = new TestFragmentAdapter(getSupportFragmentManager());
                mviewpager = new ViewPager(getApplicationContext());
                mviewpager.setId(R.id.viewPager);
                mviewpager.setAdapter(mAdapter);
                mIndicator = (CirclePageIndicator)findViewById(R.id.indicator);
                mIndicator.setViewPager(mviewpager);
            }
            @Override
            public void onClick(DialogInterface arg0, int arg1) {
                // TODO Auto-generated method stub
            }
        } 
```

TestFragmentAdapter.java

```
class TestFragmentAdapter extends FragmentPagerAdapter implements IconPagerAdapter {
    protected static final String[] CONTENT = new String[] { "This", "Is", "A", "Test"};
    protected static final int[] ICONS = new int[] {};
    private int mCount = CONTENT.length;

    public TestFragmentAdapter(FragmentManager fm) {
         super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        return TestFragment.newInstance(CONTENT[position % CONTENT.length]);
    }

    @Override
    public int getCount() {
        return mCount;
    }

    @Override
    public CharSequence getPageTitle(int position) {
      return TestFragmentAdapter.CONTENT[position % CONTENT.length];
    }

    @Override
    public int getIconResId(int index) {
      return ICONS[index % ICONS.length];
    }

    public void setCount(int count) {
        if (count > 0 && count <= 10) {
            mCount = count;
            notifyDataSetChanged();
        }
    } 
```

测试片段.java

```
public final class TestFragment extends Fragment {
    private static final String KEY_CONTENT = "TestFragment:Content";
    static TestFragment fragment = new TestFragment();
    public static TestFragment newInstance(String content) {
        StringBuilder builder = new StringBuilder();
        builder.append(content).append("\n");
        fragment.mContent = builder.toString();
        return fragment;
    }
    private String mContent = "???";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if ((savedInstanceState != null) && savedInstanceState.containsKey(KEY_CONTENT)) {

            mContent = savedInstanceState.getString(KEY_CONTENT);
        }
    }
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.pagerframe, container);
        LayoutParams textparam = new LayoutParams(130,40);
        TestView text = new TextView(getActivity());
        text.setText(mContent);
        text.setTextColor(Color.WHITE);
        LinearLayout layout = (LinearLayout) view.findViewById(R.id.pager_ll);
        layout.setBackgroundColor(Color.BLUE);
        layout.setVisibility(View.VISIBLE);
        layout.setGravity(Gravity.CENTER);
        layout.setOrientation(LinearLayout.VERTICAL);

        layout.addView(text,textparam);
        return layout;
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putString(KEY_CONTENT, mContent);
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T04:48:42.923

您忘记设置内容视图，因此在初始化 ViewPager 后设置您的 View Pager 是您的内容视图

```
setContentView(mviewpager); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:52:15.520

代码最终在这里和那里进行了一些更改。我想在这里添加它们以帮助其他与我有同样问题的开发人员。

> 我需要使用 Fragment 将 ViewPager 添加到扩展 TabActivity 的主要活动的一部分。为此，我创建了一个扩展 FragmentActivity 的 ViewPagerActivity 类，从这里它添加了对 FragmentAdapter 的调用，该调用创建了包含我要创建的视图的 Fragment。但我面临的问题是我无法让我的主类在我的主要活动上创建查看器。

*   首先我无法扩展多个类，因为我需要两者`Fragment`和`TabActivity`
*   我发现在某个地方我们也可以将`Tab`' 的功能扩展为 Listener。我是这样做的：

    ```
    public class Main extends FragmentActivity implements OnClickListener,TabContentFactory{ } 
    ```

*   然后我把我班上的代码`ViewPagerActivity`写进`Main`

*   我想这是主要问题。无论如何，我改变了代码来创建这样`Bundle`的`TestFragment`类

    ```
    public static TestFragment newInstance(String content) {
      TestFragment fragment = new TestFragment();
      Bundle args = new Bundle();
      args.putString("content", content);
      fragment.setArguments(args);
      return fragment;
     }

    @Override
    public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      // the if clause wasnot working for me 
      mContent = getArguments().getString("content");
    } 
    ```

    *   更改为`onCreate`返回视图而不是我之前缺少的布局

        ```
        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
         View view = inflater.inflate(R.layout.pagerframe, container,false);
         LayoutParams textparam = new LayoutParams(LayoutParams.FILL_PARENT,30);
         TestView text = new TextView(getActivity());
         text.setText(mContent);
         text.setTextColor(Color.WHITE);
         LinearLayout layout = (LinearLayout) view.findViewById(R.id.pager_ll);
         layout.setVisibility(View.VISIBLE);
         layout.setGravity(Gravity.CENTER);
         layout.setOrientation(LinearLayout.VERTICAL);
         layout.addView(edtext,textparam);
         return view;
        } 
        ```

    *   在此之后，一切都运行良好。

# android - 使用 SoundPool 在 Android 中播放声音的问题

> ID：14851569
> 
> 赞同：2
> 
> 时间：2013-02-13T10:36:55.343
> 
> 标签：android, audio, soundpool, android-audiomanager

在我的 Android 游戏中，我使用 AudioManager 和 SoundPool 播放短音效。

虽然这在三星 Galaxy Tab 10.1 上运行良好，但当我将游戏移植到三星 Galaxy SIII 时，当我尝试玩来自 SoundPool 的声音。

它的行为非常不稳定，并且发生了 4 件事之一（无特定顺序）：

(1) 应用程序正常启动，所有声音正常播放。

(2) 应用程序完全崩溃，手机重启。

(3) 应用程序在尝试播放声音时很快（3-5 秒）冻结，然后正常继续，但声音不起作用。

(4) 应用程序正常启动，但没有声音播放。*

*   第四种情况有一个奇怪的转折。没有声音播放，但是当我激活游戏背景音乐（通过 MediaPlayer 播放，而不是通过 AudioManager/SoundPool 播放）时，这会以某种方式“冲掉”应该在游戏开始时播放的卡住音效，现在它们都捕捉到了-向上并立即播放。这种“冲洗”以某种方式使一切恢复正常，从这一点开始，SoundPool 中的所有声音效果都正常播放，正如它们应该的那样。

我得到的错误是：

AudioTrack：obtainBuffer 超时（CPU 挂钩了吗？）“ *CPU 挂钩*”这到底是什么意思？？？

请注意，当我尝试通过 SoundPool.play***播放***声音池中的声音时，问题发生在游戏中，***而不是当我***通过 SoundPool.load 加载它们时。

我几乎尝试了一切，现在我已经无能为力了。有没有人有同样的问题？非常感谢任何帮助。

# openjpa - Varchar 列不区分大小写 OpenJpa

> ID：14851575
> 
> 赞同：1
> 
> 时间：2013-02-13T10:37:32.463
> 
> 标签：openjpa

我有一个实体（**Entity1**），其 id 和一个字符串作为唯一字段：

```
@Id
    @GeneratedValue
    @Column(name = "entity1_id")
    private long entity1_id;

    @Column(name = "address", nullable = false, unique = true)
    private String address; 
```

以这种方式与另一个实体（**Entity2**）有关系：

```
@ManyToMany(cascade = CascadeType.ALL)
    @JoinTable(name = "middle_table", joinColumns = @JoinColumn(name = entity2_id), inverseJoinColumns = @JoinColumn(name = "entity1_id"))
    private List<Entity> entity1List= new ArrayList<Entity>(); 
```

FetchType 是急切的，所以当我从数据库中获取一个 Object2 时，它带有 Entity1 的完整列表。问题是该`address`字段应该是小写的，但是由于迁移问题，我们在某些情况下地址包含一些大写字母。在这些情况下`Entity2.entity1List`，数组包含 1 个对象，该对象为空，因为在数据库中找不到它。当中间表被更新时，我得到了这个异常：

> 错误：“entity1_id”列中的空值违反非空约束 {prepstmnt 892492234 INSERT INTO public.middle_table(entity2_id, entity1_id) VALUES (?, ?) [params=?, ?]} [code=0, state=23502]

为了更清楚，假设我在数据库中有：`Test@test.com`，但它应该和`test@test.com`.

**编辑**

我刚刚意识到整个解释是不必要的。我可以用更简单的方式解释我的问题：
在我的表中，我有一个条目：`Test@test.com`. 我想要这个查询：

```
select * from my_table where address = 'test@test.com' 
```

检索结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T00:48:15.480

> 在我的表中，我有一个条目：Test@test.com。我想要这个查询：
> 
> ```
> select * from my_table where address = 'test@test.com' 
> ```

好吧，如果您这样说，您不妨将查询重组为：

```
select * from my_table where LOWER(address) = LOWER(:email) 
```

为了使这个查询高效，您需要在数据库上建立一个[基于函数的索引](https://stackoverflow.com/q/277447/838434)——否则它是 O(n) 复杂的。

# ios - 分组 UITableView 上的自定义 UITableViewCell 看起来不正确

> ID：14851579
> 
> 赞同：0
> 
> 时间：2013-02-13T10:37:51.053
> 
> 标签：ios, uitableview

我正在开发一个 iOS 应用程序，我有一个`UITableView`自定义单元格。

这是自定义的`UITableViewCell` **XIB**。

![在此处输入图像描述](../Images/5b12cfc5886b807ba824ccc8452ae8ed.png)

注意：勾选图标将在编辑模式下显示。

被`UITableView`分组。我不明白为什么表格是这样显示的：

![在此处输入图像描述](../Images/7a52dd4744b48dad0d0a864ca69b5fd2.png)

我必须使`UITableViewCell` **xib**更小吗？或者，我该如何解决这个问题。

我想在名称和`UITableView`左边框之间添加更多空间（稍后将在编辑模式下显示图标）。

我找到了这个[教程](http://blog.arunstephens.com/2010/03/07/width-of-grouped-uitableviewcell/)，但它对我不起作用。

# magento - 创建包数据后如何安装 - Magento

> ID：14851580
> 
> 赞同：1
> 
> 时间：2013-02-13T10:37:53.197
> 
> 标签：magento, installation, magento-1.7, magento-1.6

我按照本教程进行操作，并能够成功创建包数据，如屏幕截图所示。

![在此处输入图像描述](../Images/0f6037840040b43515be4dbffd474690.png)

现在我在文件夹中有以下三个文件`var/connect`。Myname_Mygateway-1.0.0.tgz、Myname_Mygateway.xml、package.xml如下图。

![在此处输入图像描述](../Images/b3e1e7f5b9f7b4acd65bf864f8ce5f95.png)

我尝试压缩所有文件并制作安装程序，但是当我尝试在另一个 magento 站点中安装时它不起作用。

创建包数据后如何安装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:43:05.280

你不需要压缩任何东西。带有扩展名的文件`.tgz`只负责安装扩展名。

只需转到`Admin > System > Magento Connect > Connect Manager > Direct Package file upload`并上传您的`.tgz`文件，它就会被安装。

如果您想创建扩展密钥，您需要访问 MagentoCommerce 网站，在您的帐户下，您将拥有选项卡`Developers > Add new extension`。您可以在那里提交您的扩展程序，它需要由 Magento 团队验证。我猜通常需要3-5天。一旦它是`Live`，您就可以在 Magento Connect 官方网站上看到您的扩展程序。

# java - if条件的JSP不平衡括号

> ID：14851589
> 
> 赞同：0
> 
> 时间：2013-02-13T10:38:11.043
> 
> 标签：java, jsp, servlets

我已将下面添加到我的 jsp 中，但它说在第 x 行不平衡，这会破坏范围 'tag:html:form' 此行号指的是 <%}else{ %> 我没有发现任何问题？我在这里缺少什么？

```
<%if(request.getAttribute("fileUploadFlag").toString() != null){ %>      
  <html:form action="goAction" method="POST" enctype="multipart/form-data">      
<%}else{ %>       
  <html:form action="goAction" method="POST">      
<%} %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T10:48:56.410

我认为这很不高兴，因为`<html:form>`标签没有被关闭。您最好将 if/else 放在`enctype="multipart/form-data"`属性周围。或者使用 if/else 将 encType 定义为变量，并在下面有表格

```
<%String encType = "application/x-www-form-urlencoded"; // 我假设...%>
<%if(request.getAttribute("fileUploadFlag").toString() != null){ %>      
    encType = "多部分/表单数据";
<%} %>
<html:form action="goAction" method="POST" enctype="<%encType%>"

```

# flash - 父动画完成后，从父动画停止子影片剪辑中的动画

> ID：14851592
> 
> 赞同：0
> 
> 时间：2013-02-13T10:38:18.187
> 
> 标签：flash, actionscript, actionscript-2, flash-cs5, tween

我有一个羊的电影剪辑符号（符号名称：“羊”）。这会在屏幕上显示动画。在绵羊影片剪辑中，它的腿上下移动。当绵羊停止移动时，我希望腿也停止动画。

我试图从移动功能内部访问腿：

```
function sheepMove6() {
    var sheepMoveX6:Tween = new Tween (inst_sheep, "_x", Strong.easeOut, 900, 850, 10, false);

    sheepMoveX6.onMotionFinished = function() {
        sheep.leg1MoveY.stop();
    }
} 
```

我还尝试从绵羊电影剪辑中检测动画完成：

```
_root.sheepMoveX6.onMotionFinished = function() {
    leg1MoveY.stop();
} 
```

一旦羊到达目的地，这些似乎都不能阻止腿移动。我正在使用 AS2。

- 编辑 -

不知道如何定位子影片剪辑，我尝试了几种不同的方法来访问它，在下面，没有一个有效。注意：leg1MoveY 是补间变量的名称

```
_root.inst_sheep.inst_leg1.leg1MoveY.stop();
_root.inst_sheep.inst_leg1.stop();
_root.inst_sheep.stop();
_root.inst_sheep.inst_leg1.stop();
_root.inst_leg1.stop();
this.inst_sheep.inst_leg1.leg1MoveY.stop();
this.inst_sheep.inst_leg1.stop();
this.inst_sheep.stop();
this.inst_sheep.inst_leg1.stop();
this.inst_leg1.stop(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:57:23.473

我不能完全说出你电影的结构，但我怀疑你只是`leg1MoveY`在`inst_leg1`. 如果是这样，`leg1MoveY`则*只能从该函数内部访问*（其“范围”仅限于该函数）。在函数之外声明它（我猜 leg1 做了什么）：

```
var leg1MoveY:Tween;

function legMove() {
    leg1MoveY = new Tween(... // Tween settings
} 
```

然后您尝试的第一行应该可以工作：

```
inst_sheep.inst_leg1.leg1MoveY.stop(); 
```

这里有一篇关于[ActionScript 2](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=07_classes_38.html)中作用域的文章可能会有所帮助。

# php - Symfony2 包创建错误

> ID：14851597
> 
> 赞同：0
> 
> 时间：2013-02-13T10:38:40.327
> 
> 标签：php, symfony, symfony-2.1

我使用的是windows系统。我刚刚将 symfony 安装到我的本地主机上，因为它在安装时没有出现错误。波纹管网址在浏览器上运行良好。

```
http://localhost/symfony/web/app_dev.php 
```

现在我尝试使用以下语法从命令提示符创建包。

```
php app/console generate:bundle --namespace=Acme/HelloBundle --format=yml 
```

它显示一个错误。“**无法打开输入文件**。” 但是已经为命令提示符设置了环境变量。所以任何人都可以帮我创建包或提供另一种在 symfony 中创建包的方法。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:13:50.303

设置了什么环境变量？最好的办法是在您位于主项目文件夹（在您的情况下为 symfony 文件夹）中时运行此命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T11:25:35.897

***无法打开输入文件。***

表示该应用程序/控制台不存在。确保运行

```
cd path/to/your/symfony/folder 
```

在尝试生成捆绑包之前。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T11:17:17.253

从 symfony 根文件夹运行命令。也尝试这样做：

```
php app/console generate:bundle 
```

它会要求您指定文件夹和格式。另外它需要生成结构。还要检查您的 php-cli.ini 是否具有执行代码所需的所有配置。

# dotnetnuke - 在 DotNetNuke 中将主页更改为自定义页面

> ID：14851601
> 
> 赞同：0
> 
> 时间：2013-02-13T10:38:57.080
> 
> 标签：dotnetnuke

在 DotnetNuke 中，站点的主页可以设置为仅通过管理员门户创建的页面。无论如何将自定义页面设置为主页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T22:01:15.040

作为一种解决方法，我认为您可以将主页重定向到您的自定义页面。例如，转到主页 > 页面设置 > 高级设置 > 其他设置，然后将链接 URL 设置为 URL（指向外部资源的链接）。然后你可以在里面放任何东西。您也可以将其设为永久重定向。

# php - 区分表中的位置

> ID：14851602
> 
> 赞同：2
> 
> 时间：2013-02-13T10:39:03.463
> 
> 标签：php, doctrine, doctrine-orm, dql

如何选择一位特定作者的所有项目？这种方式可能吗？或者，如果我想要许多项目类型和项目包（项目有很多项目），我该如何编辑实体？

物品

```
/**
 * @ORM\Table()
 * @ORM\Entity
 * @ORM\InheritanceType("JOINED")
 * @ORM\DiscriminatorColumn(name="discr", type="string")
 * @ORM\DiscriminatorMap({
 * "cd"   = "ItemCD",
 * "dvd"   = "ItemDVD",
 * "pack" = "ItemPack",
 * })
 */
class Item
{

    /**
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

    /**
     * @ORM\Column(name="name", type="string", length=250, nullable=false)
     */
    private $name;

} 
```

物品CD

```
/**
 * @ORM\Table()
 * @ORM\Entity
 */
class ItemCD extends Item
{

    /**
     * @ORM\ManyToOne(targetEntity="Author", inversedBy="item")
     * @ORM\JoinColumn(name="author_id", referencedColumnName="id")
     */
    private $author;

} 
```

物品DVD

```
/**
 * @ORM\Table()
 * @ORM\Entity
 */
class ItemDVD extends Item
{

    /**
     * @ORM\ManyToOne(targetEntity="Author", inversedBy="item")
     * @ORM\JoinColumn(name="author_id", referencedColumnName="id")
     */
    private $author;

} 
```

物品包

```
/**
 * @ORM\Table()
 * @ORM\Entity
 */
class ItemPack extends Item
{

    /**
     * @ORM\ManyToMany(targetEntity="Item", inversedBy="item")
     * @ORM\JoinTable()
     */
    private $items;

} 
```

作者

```
/**
 * @ORM\Table()
 * @ORM\Entity
 */
class Author
{

    /**
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     *
     */
    private $id;

    /**
     * @ORM\Column(name="name", type="string", length=250, nullable=false)
     */
    private $name;

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T12:53:40.837

您将不得不查询特定元素。这是一个已知的（和想要的）限制，因为 DQL 是一种静态类型语言：请参阅[http://www.doctrine-project.org/jira/browse/DDC-16](http://www.doctrine-project.org/jira/browse/DDC-16)

相关：[如何在学说2/dql查询中访问继承表中的字段](https://stackoverflow.com/questions/5459294/how-to-access-fields-in-inherited-table-in-doctrine2-dql-query)

一种解决方法是在 DQL 中使用 2 个子查询：

```
SELECT
    i
FROM
    Item i
WHERE
    i.id IN(
        SELECT 
            i2.id
        FROM
            ItemDvd i2
        WHERE
            i2.author = :author
    )
    OR
    i.id IN(
        SELECT
            i3.id
        FROM
            ItemCd i3
        WHERE
            i3.author = :author
    ) 
```

如您所见，您必须手动提取每个可能的子类型的标识符。

编辑：要从给定作者那里获取所有包（以及单个 DVD 或 CD），查询变得更糟：

```
SELECT
    i
FROM
    Item i
WHERE
    i.id IN(
        SELECT 
            i2.id
        FROM
            ItemDvd i2
        WHERE
            i2.author = :author
    )
    OR
    i.id IN(
        SELECT
            i3.id
        FROM
            ItemCd i3
        WHERE
            i3.author = :author
    )
    OR
    i.id IN(
        SELECT
            i4.id
        FROM
            ItemPack i4
        JOIN
            i4.items i5
        WHERE
            i5.id IN (
                SELECT
                    i6.id
                FROM
                    Item i6
                WHERE
                    i6.id IN(
                        SELECT 
                            i7.id
                        FROM
                            ItemDvd i7
                        WHERE
                            i7.author = :author
                    )
                    OR
                    i6.id IN(
                        SELECT
                            i8.id
                        FROM
                            ItemCd i8
                        WHERE
                            i8.author = :author
                    )
            )
    ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:48:57.197

在 Item 中制作`$author`并让 ItemPacks`$author`值始终为空。然后你可以这样做：

```
$em->findBy("Item", array("author" => $author)); 
```

而且你总是得到`ItemDVD`or的实例`ItemCD`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T11:41:39.543

答案既棘手又冗长。我认为实体方法是可以的，通过查询项目实体你会得到你想要的。现在对于表单，您可能需要每个子项目一个 FormType，然后使用表单集合的方法（[http://symfony.com/doc/2.1/cookbook/form/form_collections.html](http://symfony.com/doc/2.1/cookbook/form/form_collections.html)），我确定您将需要挂钩到预绑定事件以准备数据。

这是一个快速的想法，也许它可以帮助你。

# php - 将特定的字符串模式替换为 html

> ID：14851604
> 
> 赞同：0
> 
> 时间：2013-02-13T10:39:15.587
> 
> 标签：php, html, string, replace, preg-replace

对于我的股市聊天，我想将每个特定的字符串模式替换为 html 代码。例如，如果我输入“b $goog 780”，我希望将此字符串替换为：

```
Buy <a href="/stocks/goog">$goog</a> at 780 
```

如何使用 preg_replace 完成这项特定任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T10:54:32.273

```
$cmd='b $goog 780';

if(preg_match('/^([bs])\s+?\$(\w+?)\s+?(.+)$/i',$cmd,$res))
{
   switch($res[1])
   {
     case 'b': $cmd='buy';break;
     case 's': $cmd='sell';break;
   }
   $link=$cmd.' <a href="/stocks/'.$res[2].'">'.$res[2].'</a> at '.$res[3];
   echo $link;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:57:35.207

```
$stocks = array('$goog' => '<a href="/stocks/goog">$goog</a>',
                '$apple' => '<a href="/stocks/apple">$apple</a>');

// get the keys.
$keys = array_keys($stocks);

// get the values.
$values = array_values($stocks);

// replace
foreach($keys as &$key) {
        $key = '/\b'.preg_quote($key).'\b/';
}

// input string.    
$str = 'b $goog 780';

// do the replacement using preg_replace                
$str = preg_replace($keys,$values,$str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T11:06:58.487

它必须是 preg_replace 吗？使用 preg_match 您可以提取字符串的组件并重新组合它们以形成您的链接：

```
<?php
$string = 'b $goog 780';
$pattern = '/(b \$([^\s]+) (\d+))/';
$matches = array();
preg_match($pattern, $string, $matches);
echo 'Buy <a href="/stocks/' . $matches[2] . '">$' . $matches[2] . '</a> at ' . $matches[3] ; // Buy <a href="/stocks/goog">$goog</a> at 780 
```

模式正在寻找的是字母“b”，后跟一个美元符号（`\$`- 我们将美元转义，因为这是正则表达式中的一个特殊字符），然后是任何一个字符，直到它到达一个空格（`[^\s]+`），然后一个空格，最后是任意数量的数字 ( `\d+`)。

# iphone - 将两个不同的故事板视图控制器连接到同一个类

> ID：14851606
> 
> 赞同：3
> 
> 时间：2013-02-13T10:39:15.920
> 
> 标签：iphone, xcode, uiviewcontroller, uistoryboard, iboutletcollection

我是 iPhone 开发的新手。我的应用程序包含两个故事板，一个用于 Ipad，另一个用于 Iphone。现在，我的问题是我有一个`IBOutletCollection`of `UILabel`s 作为属性与我的 Iphone 故事板中的一个视图控制器连接起来。我想如何连接相同的 Ipad 故事板视图控制器与同一类`IBOutletCollection`的s..？`UILabel`提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:23:53.403

就像你连接任何其他人一样`IBOutlet`，`IBOutletCollection`或`IBAction`。

您的`UIViewController`子类包含可让您将情节提要中的某些内容与它挂钩的位。

```
@property (strong, nonatomic) IBOutletCollection(UIButton) NSArray *tabButtons; 
```

在您的故事板中，您可以将视图控制器分配给某个类，在这种情况下，它将是您的`UIViewController`子类。现在您所要做的就是将故事板工件拖到现有的`IBOutlet`存根中。有用。

您可以使用同一类（或同一故事板中的多个视图控制器）对多个故事板执行此操作。当您将它加载到内存中时，您在情节提要中指定项目，然后情节提要创建视图控制器的实例并连接所有引用，所以一切都很好。

```
MyViewController *myVC = [storyboard instantiateViewControllerWithIdentifier:@"foo"]; 
```

# jquery - Mvc Jquery 页面大小更改调用操作并重新绑定视图列表

> ID：14851608
> 
> 赞同：0
> 
> 时间：2013-02-13T10:39:19.270
> 
> 标签：jquery, ajax, model-view-controller

真的坚持这一点..我在页面上有一个页面大小下拉菜单，我需要编写一些 jquery 来调用该操作并在我的视图中重新绑定网格。我有以下

```
 if (selectNode.selectedIndex == 0) {
            $.get("user/index", { pageSize: "10" })
        }
        if (selectNode.selectedIndex == 1) {
            $.get("user/index", { pageSize: "20" })
            .done(function (data) {
                alert("Data Loaded: " + data);
            });
        } 
```

这会使用正确的页面大小值调用操作，使用正确的值调用我的休息服务，但不会重新绑定页面。我错过了什么？

提前致谢

# angularjs - 我正在 AngularJS 中实现即时仪表板

> ID：14851610
> 
> 赞同：1
> 
> 时间：2013-02-13T10:39:23.923
> 
> 标签：angularjs, requirejs

我可以实现类似的东西：

```
 $scope.showDashboard = function () {
        $scope.dashboardPath = "/Widgets/Weather/View.htm";
        $scope.widgetController = 30;

        require(['/Widgets/Weather/Controller.js'], function (w) {               
            whatShouldIputHere = w;
        });

    };

 <div ng-include src="dashboardPath" ng-controller="whatShouldIputHere?"></div> 
```

是否可以动态地将控制器分配给 ng-include？

仪表板上可能有很多小部件

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-15T07:46:59.203

有一个使用 AngularJS 实现仪表板功能的开发项目。

特征：

*   添加/删除小部件
*   小部件拖放
*   任何指令都可以是一个小部件

运行演示[http://nickholub.github.io/angular-dashboard-app](http://nickholub.github.io/angular-dashboard-app)

演示源代码[https://github.com/nickholub/angular-dashboard-app](https://github.com/nickholub/angular-dashboard-app)

仪表板指令本身[https://github.com/nickholub/angular-ui-dashboard](https://github.com/nickholub/angular-ui-dashboard)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T11:49:31.690

我们在开源[hawtio](http://hawt.io/)项目中创建了一个基于 angularjs 的仪表板。如果你愿意，你可以在这里修改代码：

[https://github.com/hawtio/hawtio/tree/master/hawtio-web/src/main/webapp/app/dashboard](https://github.com/hawtio/hawtio/tree/master/hawtio-web/src/main/webapp/app/dashboard)

对于仪表板上的每个小部件，我们直接使用子范围 [https://github.com/hawtio/hawtio/blob/master/hawtio-web/src/main/webapp/app/dashboard/js/dashboard.ts编译部分#L142](https://github.com/hawtio/hawtio/blob/master/hawtio-web/src/main/webapp/app/dashboard/js/dashboard.ts#L142)

尽管我们必须修补 angularjs 以允许我们在子作用域上使用自定义注入。例如，这样我们就可以为每个子小部件使用不同的 $location 实现（因此它认为它在自己的真实 URL 上等）。希望当支持自定义注入器时，我们可以转向那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T10:52:49.730

与其使用动态控制器，为什么不使用单个控制器（具有 showDashboard 方法的控制器）。**添加动态控制器`ng-include`将导致嵌套控制器**，我猜这是非法的。而不是使用 ng-include 作为属性，而是将其用作元素。

```
<ng-include src="dashboardPath"></ng-include> 
```

# wordpress - wordpress 3.5 自定义帖子类型，自定义元框，有条件地加载脚本

> ID：14851615
> 
> 赞同：3
> 
> 时间：2013-02-13T10:39:26.197
> 
> 标签：wordpress, wordpress-theming

我有这个奇怪的小问题；）。我只想在加载管理员的自定义帖子类型编辑器（添加新的自定义帖子类型、编辑自定义 mpost 类型）时加载自定义脚本（css、js）。

自定义帖子类型以这种方式注册：

```
add_action( 'init', 'cs_product_register_post_types' );
function cs_product_register_post_types() {
    $product_args = array(
        'public' => true,
        'rewrite' => array(
            'slug' => 'products',
            'with_front' => false,
            'pages' => false
        ),
        'supports' => array(
            'title',
            'editor',
            'page-attributes'
        ),
        'labels' => array(
            'name' => 'Produkty',
            'singular_name' => 'Produkt',
            'add_new' => 'Dodaj nowy produkt',
            'add_new_item' => 'Dodaj nowy produkt',
            'edit_item' => 'Edytuj produkt',
            'new_item' => 'Nowy produkt',
            'view_item' => 'Wyswietl produkt',
            'search_items' => 'Wyszukaj produkt',
            'not_found' => 'Produktu nie znaleziono',
            'not_found_in_trash' => 'Brak usuniętych produktów'
        ),
        'menu_position' => 3,
    );
    register_post_type( 'products', $product_args );
} 
```

对于那些有注册自定义元框的功能：

```
add_action( 'add_meta_boxes', 'cs_products_mb_create' );
function cs_products_mb_create() {
    //create a custom meta box
    add_meta_box( 'products-info', 'Ustawienia Produktu', 'cs_products_mb_function', 'products', 'normal', 'high' );
} 
```

这仅适用于注册的自定义帖子类型（产品）。

现在唯一要做的就是加载自定义js。可以这样做：

```
add_action('admin_print_styles-post.php', 'cs_products_admin_styles');
add_action('admin_print_styles-post-new.php', 'cs_products_admin_styles');

function cs_products_admin_styles() {
    wp_enqueue_style( 'thickbox' );
    wp_enqueue_style ('theme', get_bloginfo('template_url') . '/css/admin.css', '', '1.0');
} 
```

但它适用于所有帖子，它不是最好的方法;)。

感谢您的任何想法。

* * *

编辑

在挖掘，挖掘和挖掘之后......最简单的方法之一：

```
//load scripts only when on products custom post type edit page
if ( ( isset($_GET['post_type']) && $_GET['post_type'] == 'products' ) || ( isset($post_type) && $post_type == 'products' ) ) {
    add_action('admin_enqueue_scripts', 'cs_admin_customposttype_scripts');
}

function cs_admin_customposttype_scripts(){ 
    wp_enqueue_style ('theme', get_bloginfo('template_url') . '/css/admin.css', '');    
    wp_enqueue_script( 'cs-image-upload', get_bloginfo('template_url').'/js/admin.js', array( 'jquery') );
} 
```

但是这个解决方案的问题是，它仅在创建新的自定义帖子时才有效。编辑时，$_GET['post_type'] 或 $post_type 不可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:10:53.330

在搜索了一点之后......

```
//load scripts only when on products custom post type edit page
if ( ( isset($_GET['post_type']) && $_GET['post_type'] == 'products' ) || ( isset($post_type) && $post_type == 'products' ) || ( isset($_GET['post']) && get_post_type($_GET['post']) == 'products' ) ) {
    add_action('admin_enqueue_scripts', 'cs_admin_customposttype_scripts');
}

function cs_admin_customposttype_scripts(){ 
    wp_enqueue_style ('theme', get_bloginfo('template_url') . '/css/admin.css', '');    
    wp_enqueue_script( 'cs-image-upload', get_bloginfo('template_url').'/js/admin.js', array( 'jquery') );
} 
```

附加或仅使用一个已知变量 - 使用 $_GET 发送并使用 get_post_type 函数的 postID 完成了这项工作。

# c# - 控制列表框不会阻止滚动

> ID：14851617
> 
> 赞同：1
> 
> 时间：2013-02-13T10:39:44.773
> 
> 标签：c#, listbox, windows-phone-8, overlap

我使用 TranslateTransform 在我的应用程序中创建了一个隐藏栏。当显示栏与列表框重叠时。我没想到的是，在控件上滚动并不会阻止滚动重叠的列表框。当我在控件上工作时，我需要列表框不要滚动。

为了更好地解释这个问题，我制作了一个视频。

[http://www.youtube.com/watch?v=9UM2lzPz8p0](http://www.youtube.com/watch?v=9UM2lzPz8p0)

[更新]

使用 UseOptimizedManipulationRouting="False" 解决

# mysql - MySQL 按客户分区

> ID：14851618
> 
> 赞同：0
> 
> 时间：2013-02-13T10:39:48.767
> 
> 标签：mysql, partitioning, sharding

我们有一个产品为不同的客户使用不同的 MySQL shemas，还有一个 Java 应用程序为每个客户使用不同的持久性单元。这使得在不重新部署应用程序的情况下添加客户变得很困难。

我们计划使用单个 MySQL 数据库模式来保存所有客户，每个表都有一个字段，该字段是一个 KEY sibolizing 一个客户，因此添加一个新客户只需很少的 sql 更新/插入。

在 MySQL 中处理此类数据的最佳方法是什么……MySQL 是否通过键或类似的方式提供任何分区表。这种方法的性能问题可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:39:46.107

这里有几个问题：

架构设计问题

分区问题

mySQL 可以处理 HASH MAP 查询 O(1)

**架构设计问题：** 是的，这比为每个客户启动一个新应用程序要好得多。

**mySQL 是否可以处理 HASH MAP 查询 O(1)** 是的，如果数据保留在内存中并且有足够的 CPU 周期，mySQL 可以轻松地每秒执行 300K 次选择。否则，如果数据是 I/O 受限且磁盘子系统未饱和，则 mySQL 每秒可以轻松执行 20-30K 次选择，具体取决于流量模式、并发性以及数据库磁盘子系统可以执行的 IOPS 多少。

**分区** 在谈论 mySQL 的上下文中，分区意味着不同的东西。分区是一种存储引擎，它位于 mySQL 中的另一个存储引擎之上，用于将数据分配给某个表，但将一组分区表作为单个表公开给调用应用程序。分区也可能意味着让某些数据库执行所有表的子集。在您的上下文中，我认为您是在询问您是否按客户联合对性能有什么影响。即，如果需要，您可以使用相同的模式为每个客户分配一个数据库。这个概念更符合分片的理想，将数据作为一个整体，并为每个数据单元（例如客户）分配资源。

**我对您的建议** 使每个客户的架构相同。对客户将执行的所有查询进行基准测试。查询模式就是这样。验证使用 EXPLAIN 的每个查询都不会生成文件排序或临时表，也不会一次扫描 100K 行，并且您应该能够毫无问题地进行扩展。一旦您遇到一个或一组盒子接近您的 IOP 上限的问题，请考虑拆分数据。

# apache - 301 将所有图像请求从文件夹 1 重定向到文件夹 2

> ID：14851620
> 
> 赞同：1
> 
> 时间：2013-02-13T10:39:49.567
> 
> 标签：apache, .htaccess, mod-rewrite

目前我有以下设置：

3 个图像文件夹用于`big`| `resized`|`thumb`

domain.com/big/image1.jpg

domain.com/resized/image1.jpg

domain.com/thumb/image1.jpg

由于我想删除拇指和调整大小的文件夹，或者至少是其中的图像，我想将两个请求重定向到`resized`和`thumb``big`

其中许多图像可能会被谷歌索引。所以也许 301 重定向是最好的？

此外，更改大小和拇指的 .htaccess 也是首选，因为根 htaccess 已经足够复杂了:)

目标是节省大量空间，同时将 3 张图片的 SEO 合并为 1 张图片

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:32:56.357

尝试在您可能已经拥有*的任何路由规则之上添加这些规则：*

```
RewriteEngine On
RewriteRule ^(resized|thumb)/(.*)$ /big/$2 [L,R=301] 
```

但是，如果您喜欢编辑`resized`和`thumb`目录中的 htaccess 文件，您可以将这些添加到这两个目录中的 htaccess 文件中：

```
RewriteEngine On
RewriteRule ^(.*)$ /big/$1 [L,R=301] 
```

请注意，通过这样做，您在根 htaccess 文件中的任何规则都不会被应用。

# unit-testing - Visual Studio 2012 自动创建单元测试 - WP8 应用程序

> ID：14851621
> 
> 赞同：1
> 
> 时间：2013-02-13T10:39:51.623
> 
> 标签：unit-testing, visual-studio-2012, windows-phone-8

因此，与 Visual Studio 2010 相比，右键单击方法时，上下文菜单中没有“创建单元测试”，这让我感到惊讶。

建议的解决方法是在 VS2010 中创建单元测试，然后将其导入回 VS2012。

然后我发现这篇文章[http://dl.my/2013/enable-create-unit-tests-on-visual-studio-2012/](http://dl.my/2013/enable-create-unit-tests-on-visual-studio-2012/) 确实有效！

但是现在，当我在方法上单击“创建单元测试”后，生成的类只包含一个 TestContext 属性，没有之前在向导中选择的测试方法。

这是生成的类：

```
/// <summary>
///This is a test class for XXXTest and is intended
///to contain all XXXTest Unit Tests
///</summary>
[TestClass()]
public class XXXTest
{

    private TestContext testContextInstance;

    /// <summary>
    ///Gets or sets the test context which provides
    ///information about and functionality for the current test run.
    ///</summary>
    public TestContext TestContext
    {
        get
        {
            return testContextInstance;
        }
        set
        {
            testContextInstance = value;
        }
    }

    #region Additional test attributes
    // 
    //You can use the following additional attributes as you write your tests:
    //
    //Use ClassInitialize to run code before running the first test in the class
    //[ClassInitialize()]
    //public static void MyClassInitialize(TestContext testContext)
    //{
    //}
    //
    //Use ClassCleanup to run code after all tests in a class have run
    //[ClassCleanup()]
    //public static void MyClassCleanup()
    //{
    //}
    //
    //Use TestInitialize to run code before running each test
    //[TestInitialize()]
    //public void MyTestInitialize()
    //{
    //}
    //
    //Use TestCleanup to run code after each test has run
    //[TestCleanup()]
    //public void MyTestCleanup()
    //{
    //}
    //
    #endregion

} 
```

我在网上搜索了没有结果..

有人知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:39:55.940

显然，Windows Phone 项目无法使用“生成单元测试...”向导。

当您尝试使用该向导时，将提示以下错误：

```
While trying to generate your tests, the following errors occurred:
You can only add WinMD references to a project targeting Windows 8.0 or higher. To learn how to retarget your project to a different version of Windows, please see the 'Core subgroup' section underneath the 'Windows tab' section in the 'How to: add or remove references by using the Reference Manager' help page: http://msdn.microsoft.com/library/hh708954(v=vs.110).aspx. 
```

您现在可以做的最好的事情是手动创建它。

# java - 使用 ConcurrentHashMap，什么时候需要同步？

> ID：14851624
> 
> 赞同：14
> 
> 时间：2013-02-13T10:40:04.587
> 
> 标签：java, concurrency, concurrenthashmap

我有一个 ConcurrentHashMap ，我在其中执行以下操作：

```
sequences = new ConcurrentHashMap<Class<?>, AtomicLong>();

if(!sequences.containsKey(table)) {
    synchronized (sequences) {
        if(!sequences.containsKey(table))
            initializeHashMapKeyValue(table);
    }
} 
```

我的问题是 - 是否有必要做额外的

```
if(!sequences.containsKey(table)) 
```

检查同步块内部，以便其他线程不会初始化相同的哈希图值？

也许检查是必要的，我做错了？我在做什么似乎有点傻，但我认为这是必要的。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-13T10:48:26.703

**ConcurrentHashMap 上的所有**操作都是线程安全的，但线程安全的操作是不可组合的。您试图使一对原子操作：检查地图中的某些东西，如果它不存在，则将某些东西放在那里（我假设）。所以你的问题的答案是**肯定**的，你需要再次检查，你的代码看起来没问题。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-13T10:51:16.440

您应该使用[putIfAbsent](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentMap.html#putIfAbsent%28K,%20V%29)的方法`ConcurrentMap`。

```
ConcurrentMap<String, AtomicLong> map = new ConcurrentHashMap<String, AtomicLong> ();

public long addTo(String key, long value) {
  // The final value it became.
  long result = value;
  // Make a new one to put in the map.
  AtomicLong newValue = new AtomicLong(value);
  // Insert my new one or get me the old one.
  AtomicLong oldValue = map.putIfAbsent(key, newValue);
  // Was it already there? Note the deliberate use of '!='.
  if ( oldValue != newValue ) {
    // Update it.
    result = oldValue.addAndGet(value);
  }
  return result;
} 
```

对于我们中间的功能纯粹主义者来说，上述内容可以简化（或可能复杂化）为：

```
public long addTo(String key, long value) {
    return map.putIfAbsent(key, new AtomicLong()).addAndGet(value);
} 
```

在 Java 8 中，我们可以避免不必要的创建`AtomicLong`：

```
public long addTo8(String key, long value) {
    return map.computeIfAbsent(key, k -> new AtomicLong()).addAndGet(value);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-13T10:42:29.917

您无法使用**ConcurrentHashMap**获得排他锁。在这种情况下，您最好使用 Synchronized HashMap。

如果对象不存在，则已经有一个**原子**方法可以放在 ConcurrentHashMap 中；`putIfAbsent`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T10:51:08.110

我看到你在那里做了什么;-) 问题是你自己看到了吗？

首先，您使用了一种称为“双重检查锁定模式”的东西。如果您有快速路径（第一个包含），如果满足它则不需要同步，而慢速路径必须同步，因为您执行复杂的操作。您的操作包括检查地图内是否有东西，然后放在那里/初始化它。因此，ConcurrentHashMap 对于单个操作来说是线程安全的并不重要，因为您执行了两个必须被视为单元的简单操作，所以是的，这个同步块是正确的，实际上它可以被其他任何东西同步，例如`this`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-23T06:19:46.483

在 Java 8 中，您应该能够将双重检查锁替换为`.computeIfAbsent`：

```
sequences.computeIfAbsent(table, k -> initializeHashMapKeyValue(k)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-17T09:50:16.693

创建一个名为 dictionary.txt 的文件，其内容如下：

```
a
as
an
b
bat
ball 
```

这里我们有：以“a”开头的单词数：3

以“b”开头的单词数：3

总字数：6

现在执行以下程序：java WordCount test_dictionary.txt 10

```
public class WordCount {
String fileName;

public WordCount(String fileName) {
    this.fileName = fileName;
}

public void process() throws Exception {
    long start = Instant.now().toEpochMilli();

    LongAdder totalWords = new LongAdder();
    //Map<Character, LongAdder> wordCounts = Collections.synchronizedMap(new HashMap<Character, LongAdder>());
    ConcurrentHashMap<Character, LongAdder> wordCounts = new ConcurrentHashMap<Character, LongAdder>();

    Files.readAllLines(Paths.get(fileName))
        .parallelStream()
        .map(line -> line.split("\\s+"))
        .flatMap(Arrays::stream)
        .parallel()
        .map(String::toLowerCase)
        .forEach(word -> {
            totalWords.increment();
            char c = word.charAt(0);
            if (!wordCounts.containsKey(c)) {
                wordCounts.put(c, new LongAdder());
            }
            wordCounts.get(c).increment();
        });
    System.out.println(wordCounts);
    System.out.println("Total word count: " + totalWords);

    long end = Instant.now().toEpochMilli();
    System.out.println(String.format("Completed in %d milliseconds", (end - start)));
}

public static void main(String[] args) throws Exception {
    for (int r = 0; r < Integer.parseInt(args[1]); r++) {
        new WordCount(args[0]).process();
    }
} 
```

}

您会看到计数不同，如下所示：

{a=2, b=3}

总字数：6

在 77 毫秒内完成

{a=3, b=3}

总字数：6

现在在第 13 行注释掉 ConcurrentHashMap，取消注释上面的行并再次运行程序。

您会看到确定性计数。

# java - 如何在 websphere 7.0 中为 ejb 查找设置超时

> ID：14851632
> 
> 赞同：2
> 
> 时间：2013-02-13T10:40:57.833
> 
> 标签：java, websphere, ejb-3.0, jndi, websphere-7

我开发了一个独立的 Javase 客户端，它对远程服务器执行 EJB 查找并执行其方法。服务器应用程序在 EJB 3.0 中

在一些奇怪的神奇但罕见的情况下，我的程序无限期地挂起，在查看问题内部时，似乎在服务器上查找 ejb 时，我从未得到服务器的响应，它也从未超时。

我想知道是否有一个属性或任何其他方式可以通过它在客户端或服务器端设置查找时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T00:37:22.880

有一篇非常好的文章在[此处讨论了 DeveloperWorks](http://www.ibm.com/developerworks/websphere/techjournal/1109_col_vanrun/1109_col_vanrun.html)中的 ORB 配置最佳实践。我引用了可以在客户端配置的三种不同设置（您在远程服务器上进行查找和执行方法时）；

> *   **连接超时**：在客户端 ORB 甚至可以向服务器发送请求之前，它需要建立 IIOP 连接（或重新使用现有的连接）。在正常情况下，IIOP 和底层 TCP 连接操作应该会很快完成。但是，网络上的争用或其他不可预见的因素可能会减慢这一速度。默认连接超时是不确定的，但 ORB 自定义属性 `com.ibm.CORBA.ConnectTimeout`（以秒为单位）可用于更改超时。
>     
>     
> *   **定位请求超时**：一旦建立连接并且客户端向服务器发送 RMI 请求，则 LocateRequestTimeout 可用于限制对象的 CORBA LocateRequest（CORBA“ping”）时间。因此，LocateRequestTimeout 应该小于或等于 RequestTimeout，因为就来回发送的数据而言，它是一个更短的操作。与 RequestTimeout 一样，LocateRequestTimeout 默认为 180 秒。
>     
>     
> *   **Request timeout**: Once the client ORB has an established TCP connection to the server, it will send the request across. However, it will not wait indefinitely for a response, by default it will wait for 180 seconds. This is the ORB request timeout interval. This can typically be lowered, but it should be in line with the expected application response times from the server.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:12:58.390

您可以尝试以下代码，它执行任务然后最多等待指定的时间。

```
Future<Object> future = executorService.submit(new Callable<Object>() {
public Object call() { 
return lookup(JNDI_URL); 
             }
         });

     try {
            Object result = future.get(20L, TimeUnit.SECONDS); //- Waiting for at most 20 sec
     } catch (ExecutionException ex) { 
       logger.log(LogLevel.ERROR,ex.getMessage());  
       return; 
    } 
```

此外，该任务可以通过 取消`future.cancel(true)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T15:01:57.560

远程 JNDI 使用 ORB，因此唯一可用的选项是`com.ibm.CORBA.RequestTimeout`，但这将对所有远程调用产生影响。如[7.0 InfoCenter](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.nd.multiplatform.doc/info/ae/ae/uorb_rsetg.html)中所述，默认值为 180（3 分钟）。

# ios - UITextfield becomeFirstResponder 返回 NO

> ID：14851633
> 
> 赞同：1
> 
> 时间：2013-02-13T10:40:58.910
> 
> 标签：ios, objective-c, uitextfield, becomefirstresponder

我已经在我的应用程序中的 UITextFields 上实现了标准的“下一个”功能（按下一个会将您移动到下一个适当的文本字段）。大多数情况下，这很有效，并且会移动到适当的文本字段没有问题。但是在某些情况下，由于某种原因，当我要求它成为第一响应者时，textField 会返回 NO，我不知道为什么。

有关文本字段/视图的一些信息：

该视图有多个 UITableViews，其中一些 UITableViewCells 具有我想成为其中的第一响应者的 UITextfields，其他人则没有。创建表后，我会遍历主视图子视图以查找所有第一响应者并将它们添加到第一响应者数组中（_firstResponders - 变量名）。当需要下一个响应者时，每个单元格都通过委托回调到主视图。

下面是我用来获取下一个响应者的代码：

```
//get the current first responders index
NSInteger currentIndex = [_firstResponders indexOfObject:currentResponder];

// if the current index plus 1 is less than the overall count of first responders on this view then continue, else resign the responder as no more are avilable
if((currentIndex+1) < [_firstResponders count])
{
    // get the potential next responder
    UIResponder *nextResponder = [_firstResponders objectAtIndex:currentIndex+1];  
    // if it can become the first responder assign it, 
    // else callback into this function with the unavilable first responder
   if([nextResponder canBecomeFirstResponder])
   {
     [currentResponder resignFirstResponder];
        BOOL becomeFirstResponder = [nextResponder becomeFirstResponder];

        if(becomeFirstResponder == NO)
        {
            DLog(@"TextField at index: %d has returned no to becoming first responder", (currentIndex+1));
        }
    }
    else
        [self getNextResponder:nextResponder];
}
else
    [currentResponder resignFirstResponder];
} 
```

如您所见，我检查了它是否可以成为代码中的第一响应者，并且我还检查了是否手动启用了文本字段（我还在将响应者添加到响应者数组时检查了这一点）。还值得一提的是，我已经检查了数组大小和发生这种情况时要设置的响应者，它们是正确/有效的。

对我来说最奇怪的部分是，如果我在设置新的响应者之前没有在当前的响应者上调用 resignFirstResponder ，我之前只看到过这个。

有谁知道它返回 NO/我如何解决这个问题的原因？

提前致谢！

# wpf - WPF 从 UserControl 打开一个模态窗口

> ID：14851635
> 
> 赞同：3
> 
> 时间：2013-02-13T10:41:10.013
> 
> 标签：wpf, mvvm, modal-dialog

我的 WPF 应用程序中有一个 MainWindow。

This MainWindow has a menu on the left and when a menu option is selected a UserControl is loaded on the right. 这类似于 asp.net 中的母版页

我现在想要做的是从 UserControl 显示一个模态窗口，它只允许用户与模态窗口交互。

我已经看到了显示模式窗口（[http://www.codeproject.com/Articles/36516/WPF-Modal-Dialog](http://www.codeproject.com/Articles/36516/WPF-Modal-Dialog)）的主窗口示例，但不确定如何从 UserControl 加载它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:46:10.810

有这个：[对话框和 mvvm](http://www.codeproject.com/Articles/36745/Showing-Dialogs-When-Using-the-MVVM-Pattern)，但这是我见过的处理它的最好例子：[mvvm 和关闭表单](http://www.codeproject.com/Articles/413517/Closing-Windows-and-Applications-with-WPF-and-MVVM)

第一个链接我没有使用过，在寻找第二个链接时偶然发现。第二个链接有两个下载，_service下载可以忽略，基本一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-29T15:08:18.190

WPF 中的一种方法是这种方法

1.  在项目中添加一个新`Window`的。
2.  根据需要将其他控件添加到窗口中。
3.  在 XAML 名称中的窗口，如`x:Name="MyWindow"`
4.  将 Dependency 属性放在窗口上，并让每个控件绑定到窗口的数据上下文，例如`{Binding MyText, ElementName=MyWindow}`. （请注意，即使对于 WPF，我仍然使用这些 Visual Studio 代码片段来添加不同的依赖项属性，这些为添加它们的非常冗余的操作节省了时间：[Silverlight Snippets](https://www.jeff.wilcox.name/2010/02/silverlight-snippets/)。
5.  在您要启动模型对话框的位置使用此示例：

例子：

```
 var about = new About(); // Create the new window

 // I've added a CompanyName dependency property.
 about.CompanyName = "OmegaMan Industries";

 about.ShowDialog(); 
```

# sql - 查询不返回预测结果 - 我错过了什么？

> ID：14851636
> 
> 赞同：2
> 
> 时间：2013-02-13T10:41:11.177
> 
> 标签：sql, sql-server

我运行以下查询：

```
SELECT [LISTING_ID] ,[COMPANY_NM]
FROM [InterAction_Test].[dbo].[INT_AUX_LISTING]
WHERE COMPANY_NM = 'IB Sample 12' 
```

回报：

```
LISTING_ID   COMPANY_NM
----------   ----------
335698       IB Sample 12 
```

然后：

```
SELECT [LIST1_ID],[LIST2_ID],[CORRELATION_TYP_ID]
FROM [InterAction_Test].[dbo].[INT_AUX_LIST_LIST]
WHERE LIST1_ID = 335698 
```

回报：

```
LIST1_ID   LIST2_ID   CORRELATION_TYP_ID
--------   --------   ------------------
335698     139685     90
335698     139685     10003
335698     139685     10009 
```

然后：

```
SELECT [LISTING_ID],[DISPLAY_NM]
FROM [InterAction_Test].[dbo].[INT_AUX_LISTING]
WHERE LISTING_ID = 139685 
```

回报：

```
LISTING_ID   DISPLAY_NM
----------   ----------
139685       Swisk, Bob 
```

然后我运行：

```
SELECT dbo.INT_AUX_LISTING.COMPANY_NM, INT_AUX_LISTING_1.DISPLAY_NM AS [Relationship Partner], 
INT_AUX_LISTING_2.DISPLAY_NM AS [Introducing Partner], INT_AUX_LISTING_3.DISPLAY_NM AS [Introduced By]
FROM dbo.INT_AUX_LISTING 
INNER JOIN dbo.INT_AUX_LIST_LIST ON dbo.INT_AUX_LISTING.COMPANY_LIST_ID = dbo.INT_AUX_LIST_LIST.LIST1_ID 
INNER JOIN dbo.INT_AUX_LISTING AS INT_AUX_LISTING_1 ON dbo.INT_AUX_LIST_LIST.LIST2_ID = INT_AUX_LISTING_1.LISTING_ID 
INNER JOIN dbo.INT_AUX_LIST_LIST AS INT_AUX_LIST_LIST_1 ON dbo.INT_AUX_LISTING.COMPANY_LIST_ID = INT_AUX_LIST_LIST_1.LIST1_ID 
INNER JOIN dbo.INT_AUX_LISTING AS INT_AUX_LISTING_2 ON INT_AUX_LIST_LIST_1.LIST2_ID = INT_AUX_LISTING_2.LISTING_ID 
INNER JOIN dbo.INT_AUX_LIST_LIST AS INT_AUX_LIST_LIST_2 ON dbo.INT_AUX_LISTING.COMPANY_LIST_ID = INT_AUX_LIST_LIST_2.LIST1_ID 
INNER JOIN dbo.INT_AUX_LISTING AS INT_AUX_LISTING_3 ON INT_AUX_LIST_LIST_2.LIST2_ID = INT_AUX_LISTING_3.LISTING_ID
GROUP BY dbo.INT_AUX_LISTING.COMPANY_LIST_ID, dbo.INT_AUX_LISTING.COMPANY_NM, INT_AUX_LISTING_1.DISPLAY_NM, INT_AUX_LISTING_2.DISPLAY_NM, INT_AUX_LISTING_3.DISPLAY_NM, dbo.INT_AUX_LIST_LIST.CORRELATION_TYP_ID, INT_AUX_LIST_LIST_1.CORRELATION_TYP_ID, INT_AUX_LIST_LIST_2.CORRELATION_TYP_ID
HAVING (dbo.INT_AUX_LIST_LIST.CORRELATION_TYP_ID = 90) AND (INT_AUX_LIST_LIST_1.CORRELATION_TYP_ID = 10003) AND (INT_AUX_LIST_LIST_2.CORRELATION_TYP_ID = 10009) 
```

**当我希望它返回时，**这不会返回任何行：****

 **```
COMPANY_NM     Relationship Partner   Introducing Partner   Introduced By
----------     --------------------   -------------------   -------------
IB Sample 12   Swisk, Bob             Swisk, Bob            Swisk, Bob 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:54:51.740

我认为在最后一行，where`HAVING`子句是，你需要 OR 而不是 AND 运算符。

像这样：

...

```
GROUP BY dbo.INT_AUX_LISTING.COMPANY_LIST_ID, dbo.INT_AUX_LISTING.COMPANY_NM, INT_AUX_LISTING_1.DISPLAY_NM, INT_AUX_LISTING_2.DISPLAY_NM, INT_AUX_LISTING_3.DISPLAY_NM, dbo.INT_AUX_LIST_LIST.CORRELATION_TYP_ID, INT_AUX_LIST_LIST_1.CORRELATION_TYP_ID, INT_AUX_LIST_LIST_2.CORRELATION_TYP_ID
HAVING (dbo.INT_AUX_LIST_LIST.CORRELATION_TYP_ID = 90) OR (INT_AUX_LIST_LIST_1.CORRELATION_TYP_ID = 10003) OR (INT_AUX_LIST_LIST_2.CORRELATION_TYP_ID = 10009) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:05:34.393

在您使用的连接条件中，`[INT_AUX_LISTING].[Company_List_ID]`但在您提供的示例查询和数据中，该值包含在`[INT_AUX_LISTING].[Listing_ID]`列中。

我创建了示例数据并将查询更改为加入`[INT_AUX_LISTING].[Listing_ID]`并且它可以工作。见[SqlFiddle](http://www.sqlfiddle.com/#!3/e2edd/1)**

# crystal-reports - 用于 Visual Studio 2012 的水晶报表

> ID：14851639
> 
> 赞同：0
> 
> 时间：2013-02-13T10:41:21.023
> 
> 标签：crystal-reports, visual-studio-2012

我目前正在将一些 VS 2005 项目迁移到 VS 2012。

它们都编译得很好，但是当我尝试运行它时，我得到了一个水晶报告错误：

> 错误 1 ​​无法加载文件或程序集“CrystalDecisions.CrystalReports.Engine，版本=10.2.3600.0，文化=中性，PublicKeyToken=692fbea5521e1304”或其依赖项之一。该系统找不到指定的文件。

VS 2005 内置了对水晶报表的支持，但 VS 2012 似乎没有。我搜索了一下，发现 Crystal 报告中有一个新的更新可用于 VS 2012，但链接似乎已死（[http://scn.sap.com/docs/DOC-35074](http://scn.sap.com/docs/DOC-35074)）

任何人都可以给我指路吗？

提前致谢。

# azure - Azure DiagnosticsMonitorTraceListener 不工作

> ID：14851640
> 
> 赞同：1
> 
> 时间：2013-02-13T10:41:24.577
> 
> 标签：azure, azure-storage, azure-table-storage, azure-diagnostics

Azure 开始疯狂了，我正在尝试让诊断跟踪工作并遵循各种指南（几乎都说同样的话）。我现在无法在本地调试（我收到错误）并且 RDP 似乎不想连接。我在网络配置中有以下内容：

```
 <system.diagnostics>
<trace>
  <listeners>
    <add type="Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener, Microsoft.WindowsAzure.Diagnostics, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" name="AzureDiagnostics">
      <filter type="" />
    </add>
  </listeners>
</trace> 
```

然后在 webrole.cs 中：

```
public override bool OnStart()
    {
        var diagnostics = DiagnosticMonitor.GetDefaultInitialConfiguration();

        diagnostics.Logs.ScheduledTransferLogLevelFilter = LogLevel.Undefined;
        diagnostics.Logs.ScheduledTransferPeriod = TimeSpan.FromMinutes(1);
        diagnostics.Logs.BufferQuotaInMB = 10;

        CloudStorageAccount account = CloudStorageAccount.Parse(
            RoleEnvironment.GetConfigurationSettingValue("Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString"));

        DiagnosticMonitor.Start(account, diagnostics);

        return base.OnStart();
    } 
```

这在服务定义文件中：

```
<Imports>
  <Import moduleName="Diagnostics" />
  <Import moduleName="RemoteAccess" />
</Imports> 
```

这在服务配置文件中：

```
<ConfigurationSettings>
  <Setting name="Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString" value="DefaultEndpointsProtocol=https;AccountName=<snip>;AccountKey=<snip>" /> 
```

部署站点时我没有收到任何错误，我在本地尝试了一个文本侦听器，它运行良好，但我在 Azure 上的表存储中一无所获。这以前有效，但我已将部署移动到另一个订阅和存储帐户。由于我的 RDP 问题，我什至看不到是否在实例上本地创建了各种文件，而且我也不知道要检查哪些文件！

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T12:03:11.510

我终于设法通过遵循本指南使其工作：[这里](http://blog.elastacloud.com/2011/01/31/migrating-to-azure-diagnostics-with-sdk-v1-3/)

基本上唯一的区别是我的网络角色的 OnStart 方法，而不是上面几乎所有在线示例中的代码，我不得不使用以下代码，也许是因为我使用了多个实例？

```
public override bool OnStart()
    {
        string wadConnectionString = "Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString";
        CloudStorageAccount storageAccount = CloudStorageAccount.Parse(RoleEnvironment.GetConfigurationSettingValue(wadConnectionString));

        RoleInstanceDiagnosticManager roleInstanceDiagnosticManager = storageAccount.CreateRoleInstanceDiagnosticManager(RoleEnvironment.DeploymentId, RoleEnvironment.CurrentRoleInstance.Role.Name, RoleEnvironment.CurrentRoleInstance.Id);
        DiagnosticMonitorConfiguration config = DiagnosticMonitor.GetDefaultInitialConfiguration();

        config.Logs.ScheduledTransferPeriod = TimeSpan.FromMinutes(1D);
        config.Logs.ScheduledTransferLogLevelFilter = LogLevel.Undefined;

        roleInstanceDiagnosticManager.SetCurrentConfiguration(config);
        return base.OnStart();
    } 
```

谢谢弹性云！

# android - 在 Google Maps API v2 中更改标记大小

> ID：14851641
> 
> 赞同：33
> 
> 时间：2013-02-13T10:41:23.533
> 
> 标签：android, android-maps-v2

我正在尝试将我的应用程序移植到全新的 Google Maps API v2，但找不到如何更改标记的大小（我的一些标记小于默认值）。

在 v1 中，我在将其添加到地图之前使用了`Drawable`我缩放的a。`setBounds()`

但是现在，在 v2 中，我不能使用`Drawable`. 我必须使用`MarkerOptions().icon()`，它只需要 a `BitmapDescriptor`（用 a 生成`BitmapDescriptorFactory`）。

查看参考资料，似乎没有任何支持设置或更改`BitmapDescriptor`大小。

那么，我是否遗漏了什么，或者在这个 API 版本中设置自定义标记的大小是完全不可能的？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2015-08-24T17:10:56.913

您可以先将其转换为位图并更改其大小，然后将该位图用作自定义标记。例如，我首先创建了一个方法，它接受可绘制文件夹中图像文件的名称，以及要设置的标记的宽度和高度。

```
public Bitmap resizeMapIcons(String iconName,int width, int height){
    Bitmap imageBitmap = BitmapFactory.decodeResource(getResources(),getResources().getIdentifier(iconName, "drawable", getPackageName()));
    Bitmap resizedBitmap = Bitmap.createScaledBitmap(imageBitmap, width, height, false);
    return resizedBitmap;
} 
```

然后在 setUpMap() 方法中像这样调用以创建所需大小的新标记。

```
googleMap.addMarker(new MarkerOptions()
            .title("New Marker")
            .snippet("Check out this place.")
            .position(chelsea).icon(BitmapDescriptorFactory.fromBitmap(resizeMapIcons("image_name",100,100)))); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-14T11:07:36.213

我发现的最佳解决方案是`Bitmap`在将其添加为`Marker`. 例如，在我的代码中，我使用了一个`LevelListDrawable`引用了多个 multiple-resolution`Drawable`的 a。由于我想要半尺寸标记，我这样做：

```
LevelListDrawable d=(LevelListDrawable) getResources().getDrawable(R.drawable.estado_variable);
d.setLevel(1234);
BitmapDrawable bd=(BitmapDrawable) d.getCurrent();
Bitmap b=bd.getBitmap();
Bitmap bhalfsize=Bitmap.createScaledBitmap(b, b.getWidth()/2,b.getHeight()/2, false);
mapa.addMarker(new MarkerOptions()
        .position(POSITION)
        .title("Title")
        .icon(BitmapDescriptorFactory.fromBitmap(bhalfsize))
        ); 
```

这样，我可以继续使用`Drawables`，同时能够获得不同大小的标记，只需将它们转换为`Bitmap`并根据需要调整大小。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-13T10:50:29.933

似乎唯一的方法是设置自定义标记图像。

来自[API Reference](https://developers.google.com/maps/documentation/android/marker)：如果您想更改的不仅仅是标记的颜色，您可以设置自定义标记图像，通常称为图标。自定义图标始终设置为`BitmapDescriptor`，并使用类中的四种方法之一进行定义`BitmapDescriptorFactory`。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-07-15T12:48:20.440

```
public Bitmap bitmapSizeByScall( Bitmap bitmapIn, float scall_zero_to_one_f) {

    Bitmap bitmapOut = Bitmap.createScaledBitmap(bitmapIn,
            Math.round(bitmapIn.getWidth() * scall_zero_to_one_f),
            Math.round(bitmapIn.getHeight() * scall_zero_to_one_f), false);

    return bitmapOut;
} 
```

位图大小恢复为原始大小的 80%。

```
Bitmap resizeBitmap = bitmapSizeByScall(originBitmap, 0.8f); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-28T13:59:12.480

只是一个对我有用的快速片段：

```
private Bitmap scaleImage(Resources res, int id, int lessSideSize) {
    Bitmap b = null;
    BitmapFactory.Options o = new BitmapFactory.Options();
    o.inJustDecodeBounds = true;

    BitmapFactory.decodeResource(res, id, o);

    float sc = 0.0f;
    int scale = 1;
    // if image height is greater than width
    if (o.outHeight > o.outWidth) {
        sc = o.outHeight / lessSideSize;
        scale = Math.round(sc);
    }
    // if image width is greater than height
    else {
        sc = o.outWidth / lessSideSize;
        scale = Math.round(sc);
    }

    // Decode with inSampleSize
    BitmapFactory.Options o2 = new BitmapFactory.Options();
    o2.inSampleSize = scale;
    b = BitmapFactory.decodeResource(res, id, o2);
    return b;
} 
```

# svg - 如何在 HTML 中以不同大小呈现 SVG？

> ID：14851646
> 
> 赞同：1
> 
> 时间：2013-02-13T10:41:39.957
> 
> 标签：svg

鉴于这个svg：

```
<svg width="640" height="480" xmlns="http://www.w3.org/2000/svg">
 <!-- Created with SVG-edit - http://svg-edit.googlecode.com/ -->
 <g>
  <title>Layer 1</title>
  <ellipse stroke="#000000" ry="210.999999" rx="259.000004" id="svg_1" cy="237.727263" cx="324.999989" stroke-width="5" fill="#FF0000"/>
 </g>
</svg> 
```

如何将其缩放到用户 320x240 而无需重新计算里面的数字？这甚至可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T10:52:19.090

添加`viewBox="0 0 640 480"`并设置元素`width="320" height="240"`以`<svg>`缩放 SVG。你可以疯狂地使用`width`和控制属性`height`的纵横比。[`preserveApsectRatio`](http://www.w3.org/TR/SVG/coords.html#PreserveAspectRatioAttribute)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T10:46:45.747

使用[viewBox](http://www.w3.org/TR/SVG/coords.html#ViewBoxAttribute)属性来控制您可以在页面中看到的内容。交替地将内容包装在一个`<g>`元素中，并在其上设置 0.5 的比例变换。

# sql - 通过对新列上的值求和来计算不同的条目

> ID：14851647
> 
> 赞同：0
> 
> 时间：2013-02-13T10:41:45.260
> 
> 标签：sql, sql-server-2008

你会怎么做：

```
Tim   ...
Tim   ...
Henry  ...
Henry  ...
Henry ... 
```

我有一个表在第一列包含这些名称，我有兴趣添加一个新列 X，它应该有：

```
0.5
0.5
0.333
0.333
0.333 
```

如果要计算新列的总和，则计算第一列中不同条目的数量。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T10:45:19.257

您可以使用以下内容：

```
select name,
  1.0 / count(name) over(partition by name) as X
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/f8e68/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T10:44:33.360

请试试：

```
select 
 [Name], 1.00/count(*) 
from YourTable 
group by [Name] 
```

样本：

```
declare @testTable table (Name varchar(10))

insert into @testTable
select 'A' UNION ALL
select 'A' UNION ALL
select 'A' UNION ALL
select 'B' UNION ALL
select 'B'

SELECT 
    [Name], 1.00/count(*) 
FROM @testTable 
GROUP BY [Name] 
```

# jquery - JQuery 将新 div 附加到其父级

> ID：14851648
> 
> 赞同：1
> 
> 时间：2013-02-13T10:41:48.207
> 
> 标签：jquery, html, append, appendchild

我有以下带有子标签的 div 标签。

```
<div class="span6">
    <div class="control-group">
        <label class="control-label" for="inputEmail">Item Name</label>
        <div class="controls">
            <input type="text" id="inputEmail" class="input-xlarge" placeholder="Enter item name here...">
        </div>
    </div>
</div> 
```

我想根据数组将孩子附加`<div class="control-group"></div>`到父母身上。`<div class="span6"></div>`所以我写的javascript如下。

```
$.each(categories, function (k, elem) {
    var options = '';
    var options = '
    <div class="control-group">
        <label for="StockCategory">Category</label>
        <div class="controls">
            <select class="input-xlarge get-category">
    ';
    options +='<option value="">Select Category</option>';
    $.each(data, function(key, value) {
        options += '<option value="' + key + '">' + value + '</option>';
    });
    options +='
            </select>
        </div>
    </div>';
    $("div.span6").append(options);
} 
```

所以我想根据数组附加这些子 div，但它没有发生。所以我需要以下结果。

```
<div class="span6">
    <div class="control-group">
        <label class="control-label" for="inputEmail">Item Name</label>
        <div class="controls">
            <input type="text" id="inputEmail" class="input-xlarge" placeholder="Enter item name here...">
        </div>
    </div>
    <div class="control-group">
        <label class="control-label" for="inputEmail">Item Name</label>
        <div class="controls">
            <input type="text" id="inputEmail" class="input-xlarge" placeholder="Enter item name here...">
        </div>
    </div>
    <div class="control-group">
        <label class="control-label" for="inputEmail">Item Name</label>
        <div class="controls">
            <input type="text" id="inputEmail" class="input-xlarge" placeholder="Enter item name here...">
        </div>
    </div>
    <div class="control-group">
        <label class="control-label" for="inputEmail">Item Name</label>
        <div class="controls">
            <input type="text" id="inputEmail" class="input-xlarge" placeholder="Enter item name here...">
        </div>
    </div>
    <div class="control-group">
        <label class="control-label" for="inputEmail">Item Name</label>
        <div class="controls">
            <input type="text" id="inputEmail" class="input-xlarge" placeholder="Enter item name here...">
        </div>
    </div>
</div> 
```

请帮我得到它。作品更受赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:44:43.290

我要看的第一件事是 span6 缺少关闭`</div>`- 这可以解决问题吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T10:48:16.130

尝试将附加代码放在 $.each 之外

```
var options = '';        
$.each(categories, function (k, elem) {
var options = '
<div class="control-group">
    <label for="StockCategory">Category</label>
    <div class="controls">
        <select class="input-xlarge get-category">
            ';
            options +='<option value="">Select Category</option>';
            $.each(data, function(key, value) {
            options += '<option value="' + key + '">' + value + '</option>';
            });
            options +='
        </select>
    </div>
</div>';

}
$("div.span6").append(options); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T10:54:10.817

尝试将您的脚本更改为

```
var options = '';

$.each(categories, function (k, elem) {
    options += '
    <div class="control-group">
        <label for="StockCategory">Category</label>
        <div class="controls">
            <select class="input-xlarge get-category">
                <option value="">Select Category</option>
    ';
    $.each(data, function(key, value) {
        options += '<option value="' + key + '">' + value + '</option>';
    });
    options +='
            </select>
        </div>
    </div>';
}

$("div.span6").append(options); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T11:02:34.693

下面的 jquery 将做必要的。

```
<script type="text/javascript">
$(document).ready(function(){

    var data = { val1 : 'text1', val2 : 'text2', val3 : 'text3' };
    var options = '';
    $.each(data, function(key, value) {

/*  options = '<div class="control-group"><label for="StockCategory">Category</label><div class="controls"><select class="input-xlarge get-category">';
    options += '<option value="">Select Category</option>';
    options += '<option value="' + key + '">' + value + '</option>';
    options +='</select></div></div>';
*/  

    options = '<div class="control-group"><label class="control-label" for="' + key + '">' + key + '</label><div class="controls">';
    options +='<input type="text" id="' + key + '" class="input-xlarge" placeholder="' + value + '">';
    options +='</div></div>';

    $("div.span6").append(options);

    });
});
</script> 
```

# c# - 如何检测平板电脑（任何）请求？

> ID：14851649
> 
> 赞同：11
> 
> 时间：2013-02-13T10:41:47.533
> 
> 标签：c#, asp.net

```
 if (Request.Browser.IsMobileDevice)
 {
     Response.Redirect("/mobile/Login.htm");`
 } 
```

要检测手机但同时检测平板电脑之类的手机，我需要检查是否有平板电脑的功能或检查设备屏幕尺寸的功能。

谢谢我使用 ScreenPixelsWidth 和 ScreenPixelsHeight 的工作，如果需要，这是代码

```
 int wight = Request.Browser.ScreenPixelsWidth;
                int height = Request.Browser.ScreenPixelsHeight;

                if (Request.Browser.IsMobileDevice && wight < 720 && height<1280)
            {
               Response.Redirect("/mobile/Login.htm");
            } 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-05-02T20:03:01.120

我有一个类似的问题并尝试使用：HttpContext.Request.Browser.ScreenPixelsWidth

但是，无论设备（iphone 或 ipad）如何，这始终返回 640 像素的值。我通过创建一个静态方法来检查用户代理字符串解决了这个问题。

```
public class DeviceHelper
{
    public static bool IsTablet(string userAgent, bool isMobile)
    {
        Regex r = new Regex("ipad|android|android 3.0|xoom|sch-i800|playbook|tablet|kindle|nexus");
        bool isTablet = r.IsMatch(userAgent) && isMobile;
        return isTablet;
    }
} 
```

然后在我的控制器中：

```
if(DeviceHelper.IsTablet(Request.UserAgent, Request.Browser.IsMobileDevice))
     return Redirect("..."); // redirect to tablet url 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-13T10:49:53.087

您可以使用 ScreenPixelsWidth 和 ScreenPixelsHeight ( [http://msdn.microsoft.com/en-us/library/system.web.httpbrowsercapabilities.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpbrowsercapabilities.aspx) )，并且您可以定义一个阈值，在该阈值中您应该考虑常规版本还是移动版本呈现。

有很多方法可以解决这个问题，但由于您已经在使用 HttpBrowserCapabilities 类，您不妨使用这两个属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-27T16:32:47.023

ScreenPixelsWidth 始终返回 640，因此在检测手机时没有用。我发现这有效：

```
public static bool IsPhoneDevice(this HttpBrowserCapabilitiesBase Browser)
{
      return (Browser.IsMobileDevice && Browser.CanInitiateVoiceCall);
} 
```

# php - wordpress 图像没有显示在它应该显示的位置

> ID：14851650
> 
> 赞同：0
> 
> 时间：2013-02-13T10:41:51.217
> 
> 标签：php, html, wordpress, plugins

我正在尝试为我的博客创建一个小型 wp 插件，但我遇到了以下问题。

帖子图像未显示在正确的位置。

这是正确的 HTML

```
<li>

    <div class="projects">

        <ul class="projects sticker">
        <li><h2><?php the_title(); ?></h2></li>
        <li><p><a href="">details</a></p></li>
        </ul>
        <img src="" />

    </div>

    </li> 
```

这就是它现在的显示方式

```
 <li>

    <div class="projects">

        <ul class="projects sticker">
        <li><h2><?php the_title(); ?></h2></li>
        <li><p><a href="">details</a></p></li>
        </ul>

    </div>

    </li> 
    <img src="" /> 
```

基本上我必须将 img 标签放在列表和 div 中

到目前为止，这是我的代码

```
 $args = array( 'numberposts' => '3','category' => $cat_id );
        $recent_posts = wp_get_recent_posts( $args );
        foreach( $recent_posts as $recent ){
         echo '<li>'
     . '<div class="projects">'
     . '<ul class="projects sticker">'
     . '<li>'
     . '<h2>'
     . '<a href="' . get_permalink($recent["ID"]) . '" title="Look   '.esc_attr($recent["post_title"]).'" >'
     . $recent["post_title"]
     . '</a>'
     . '</h2>'
     . '</li>'
     . '<li><p><a href="">details</a></p></li>'
     . '</ul>'
     . '<img src="'.the_post_thumbnail('thumbnail').'" />'
     . '</div>'
     . '</a>'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T10:46:25.850

使用此代码，您使用了额外的`<li></li>`

```
$args = array( 'numberposts' => '3','category' => $cat_id );
$recent_posts = wp_get_recent_posts( $args );
foreach( $recent_posts as $recent ){
     echo '<a href="' . get_permalink($recent["ID"]) . 
          '" title="Look   '.esc_attr($recent["post_title"]).'" >'  
          .'<div class="projects">' .'<ul class="projects sticker">'       
          .'<li>' .'<h2>' .   $recent["post_title"] .'</h2>' .'</li>' 
          .'<li><p><a href="">details</a></p></li></ul>' 
          .'<img src="'.the_post_thumbnail('thumbnail').'" />'  
          .'</div>' .'</a>'; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T10:50:22.250

最后有一个额外`<li>`的结束，第一个结束标记的位置`<li>`嵌套不正确，并且`<a href>`开始和结束标记也放错了位置。此外，如果您格式化代码以便人类更容易阅读，您可能更容易解决这个问题 - 可能是您自己。像这样在一行上堆积一堆指令只会引起混乱：

```
 $args = array( 'numberposts' => '3','category' => $cat_id );
        $recent_posts = wp_get_recent_posts( $args );
        foreach( $recent_posts as $recent ){
         echo '<li>'
         . '<div class="projects">'
         . '<ul class="projects sticker">'
         . '<li>'
         . '<h2>'
         . '<a href="' . get_permalink($recent["ID"]) . '" title="Look   '.esc_attr($recent["post_title"]).'" >'
         . $recent["post_title"]
         . '</a>'
         . '</h2>'
         . '</li>'
         . '<li><p><a href="">details</a></p></li>'
         . '</ul>'
         . '<img src="'.the_post_thumbnail('thumbnail').'" />'
         . '</div>'
         . '</a>'
         ; 
```

# gwt - GWT CellTable 保持对选定行的关注

> ID：14851651
> 
> 赞同：3
> 
> 时间：2013-02-13T10:42:01.937
> 
> 标签：gwt, focus, celltable

当我在包含多列的 CellTable 中选择一行时，整行将显示为黄色。它不取决于我单击的行的哪个区域（行的哪一列）。

只要没有选择此表的其他行，我尝试做的就是将所选行保持为黄色。目前，只要我单击浏览器中的其他位置，该行就会恢复其原始颜色。

我尝试使用选择模型，但这没有改变。您有什么建议吗，或者这根本不可能，因为焦点是由浏览器管理的？CellTable 的 Google 展示中的行为是相同的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:05:59.573

选择模型实际上做了您想做的事情：它将一行绘制为蓝色，并且如果您单击页面中的其他位置，该行不会改变颜色。（只有选择另一行）

有 2 种选择模型：一种只允许您选择一行，另一种允许您选择多行。

```
MultiSelectionModel<Row> selectionModel = new MultiSelectionModel<Row>();
table.setSelectionModel(selectionModel);

SingleSelectionModel<Row> selectionModel = new SingleSelectionModel<Row>();
table.setSelectionModel(selectionModel); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:03:20.990

user905374 的解决方案确实有效。我在第一篇文章中提到我已经尝试过使用 a 的解决方案`selectionModel`，但它不起作用。这是部分正确的。它确实有效，但前提是表不包含`CheckboxCell`.

遵循一个工作和不工作的例子。我认为这可能是一个错误，但我不确定我是否错过了什么。

```
 final CellTable<LicenceDto> licenseTable = new CellTable<LicenceDto>();
    final SingleSelectionModel<LicenceDto> selectionModel = new SingleSelectionModel<LicenceDto>();
    licenseTable.setSelectionModel(selectionModel);

    //--- If I add this column, the selection does work.
    Column<LicenceDto, String> workingColumn = new Column<LicenceDto, String>(new TextCell()) {

        @Override
        public String getValue(LicenceDto object) {
            return "Works";
        }
    };
    workingColumn.setFieldUpdater(new FieldUpdater<LicenceDto, String>() {

        @Override
        public void update(int index, LicenceDto object, String value) {
            ;
        }
    });
    licenseTable.addColumn(workingColumn);

    //--- If I add this column, the selection does NOT work anymore.
    Column<LicenceDto, Boolean> notWorkingColumn = new Column<LicenceDto, Boolean>(new CheckboxCell(true, true)) {

        @Override
        public Boolean getValue(LicenceDto object) {
            return object.getEnabled();
        }
    };
    notWorkingColumn.setFieldUpdater(new FieldUpdater<LicenceDto, Boolean>() {

        @Override
        public void update(int index, LicenceDto object, Boolean value) {
            presenter.enableLicense(object, value);
        }
    });
    licenseTable.addColumn(notWorkingColumn); 
```

您甚至可以组合多个单元格并将它们添加到表格中（例如`LinkActionCell`等）。只要没有`CheckboxCell`，带有 的蓝色选择`SingleSelectionModel`确实像一个魅力。有没有人看到我做错了什么`CheckboxCell`或者有错误？

* * *

**更新**

这只是我的一个使用错误。问题是我设置`handlesSelection`为`true`（`CheckboxCell`构造函数的第二个参数），甚至认为我什么都不处理。设置它来`false`解决问题。

底线：如果您不自己处理选择，请使用选择模型（例如`SingleSelectionModel`）并且不要将构造函数的`handlesSelection`参数设置为 true。`true``CheckboxCell`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T18:30:04.350

您应该再次观察 Showcase 演示。这次使用最左边一列即第一列的复选框。`On selection the row turns blue`表示进行了行选择。这是您设置 SelectionModel 的时候。单击 CellTable/DataGrid 之外的页面任意位置**`selection is not changed`**。

现在，不是通过第一列中的复选框选择行，而是单击任何其他列中的一行。该行变为黄色。单击 CellTable/DataGrid 之外的页面任意位置`focus/yellow is lost`。

“**黄色**”表示行处于焦点下并且正在编辑且未被选中。

**注意 -**您可以通过使用每个单元格的单击事件来强制选择行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T09:31:49.160

尝试这样的事情：

```
CellTable table;
YourDataObject object = new YourDataObject(...);
SingleSelectionModel<YourDataObject> selectionModel = 
                                     new SingleSelectionModel<YourDataObject>();
table.setSelectionModel(selectionModel);
...
table.setSelected(object, true); 
```

如果`MultiSelectionModel`您希望突出显示多行，请使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T11:36:25.613

存储选定行的索引。当用户选择行时，将行的样式更改为适合您的案例的“选定样式”（在您的 css 文件中定义）并从先前选择的行中删除选定的样式。也不要忘记更新选定行的索引。

如果您提供原始版本的一些代码，我很乐意为您提供一些代码。

# sql - 将小数据写入文件并从中读取或查询数据库

> ID：14851653
> 
> 赞同：2
> 
> 时间：2013-02-13T10:42:06.343
> 
> 标签：sql, database, performance, file-io

我有一种情况，我必须查询数据库中的一些数据，这些数据对于所有用户都是相同的并且每天都在变化，所以我想我可以制作一个文件来保存这些数据（每天一次）然后加载它每次用户访问我的网站时从该文件中获取。

现在，我知道当来自数据库的请求很大但我要写入文件的数据是一个简单的 3 位数字时，这是一种常见的做法（缓存），所以我的问题是这应该更快还是它只是一个矫枉过正，我应该坚持数据库查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:00:12.513

如果处理得当，缓存总是更快。

这取决于从文件中存储和检索数据需要多长时间以及对数据库的请求需要多长时间。

如果获取数字的数据库查询需要很长时间，那么缓存可能是一个好主意，因为数据很小。

如果您要在包含大量缓存数据的文件中进行搜索（例如顺序）（似乎并非如此），则需要很长时间。

磁盘 I/O 可能比数据库 I/O 慢（这不太可能，除非它是本地数据库）。

底线 - 基准。

对于您的场景，缓存可能是一个好主意，但如果它对于所有用户来说只有一个 3 位数字，那么我会尝试将其粘贴在 RAM 中而不是文件中。

# facebook - Facebook (FQL) - 如何按最新和/或热门故事对墙贴进行排序

> ID：14851655
> 
> 赞同：0
> 
> 时间：2013-02-13T10:42:13.657
> 
> 标签：facebook, facebook-fql

我正在使用 FQL，现在我有以下 fql 查询：

第一个：查询获取我朋友分享的所有墙贴（它工作正常）：

```
SELECT 类型、source_id、share_count、永久链接、描述、post_id、actor_id、target_id、消息  
从流
WHERE source_id in (SELECT uid1 FROM friend WHERE uid2=me())

```

第二个：查询获取我喜欢的页面共享的所有墙贴（它工作正常）：

```
SELECT 类型、source_id、share_count、永久链接、描述、post_id、actor_id、target_id、消息
从流
WHERE filter_key = '其他'

```

现在一切都很好

所以我的问题是

“有没有办法通过 FQL 或 Graph API 按 [最新或热门故事] 对帖子进行排序？”

非常感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:53:11.597

这些是我最近的做法

```
SELECT 
    type, source_id, share_count, permalink, description, 
    post_id, actor_id, target_id, message, created_time
FROM 
    stream 
WHERE 
    source_id in (SELECT uid1 FROM friend WHERE uid2=me())
ORDER BY
    created_time desc

SELECT 
    type, source_id, share_count, permalink, description, 
    post_id, actor_id, target_id, message, created_time
FROM 
    stream
WHERE 
    filter_key = 'others'
ORDER BY
    created_time desc 
```

但是关于头条新闻，我认为没有办法做到这一点，但是您很可能必须为要查看的帖子制定自己的标准并在此基础上进行查询，您可能会发现[此](https://developers.facebook.com/docs/reference/fql/stream/)页面很有用在你的追求中

# c# - ASP.net Web API：序列化时更改类名

> ID：14851656
> 
> 赞同：15
> 
> 时间：2013-02-13T10:42:15.030
> 
> 标签：c#, asp.net, asp.net-mvc, serialization

我有一个产品的数据传输对象类

```
public class ProductDTO
{
    public Guid Id { get; set; }
    public string Name { get; set; }
    // Other properties
} 
```

当 Asp.net 以 JSON（使用`JSON.NET`）或 in序列化对象时`XML`，它会生成`ProductDTO`对象。

但是，我想在序列化过程中使用某种属性从`ProductDTO`to更改名称：`Product`

```
[Name("Product")]
public class ProductDTO
{
    [Name("ProductId")]
    public Guid Id { get; set; }
    public string Name { get; set; }
    // Other properties
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-13T11:15:01.390

我不明白为什么类名应该进入 JSON 序列化数据，但关于 XML，您应该能够通过[DataContractAttribute](http://msdn.microsoft.com/en-us/library/ms585243.aspx)控制类型名称，特别是通过[Name](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractattribute.name.aspx)属性：

```
using System.Runtime.Serialization;

[DataContract(Name = "Product")]
public class ProductDTO
{
    [DataMember(Name="ProductId")]
    public Guid Id { get; set; }
    [DataMember]
    public string Name { get; set; }
    // Other properties
} 
```

DataContractAttribute 是相关的，因为带有 ASP.NET Web API 的默认 XML 序列化程序是[DataContractSerializer](http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization#xml_media_type_formatter)。DataContractSerializer 通过应用于序列化类的 DataContractAttribute 和应用于序列化类成员的[DataMemberAttribute进行配置。](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datamemberattribute.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T11:12:46.677

一个选项是为此使用默认的[.Net 序列化属性](http://james.newtonking.com/projects/json/help/index.html?topic=html/DataContractAndDataMember.htm)：

```
[DataContract(Name = "Product")]
public class ProductDTO
{
    [DataMember(Name = "ProductId")]
    public Guid Id { get; set; }
    [DataMember]
    public string Name { get; set; }
    // Other properties
} 
```

# c++ - 基类构造函数

> ID：14851658
> 
> 赞同：2
> 
> 时间：2013-02-13T10:42:15.537
> 
> 标签：c++, constructor

我有以下情况（以下仅用于说明）：

```
class Base() 
{
public:
    Base(int);
};

class Derived : public Base 
{
public:
    Derived(int, int, bool);
}; 
```

我想根据派生构造函数中的布尔标志初始化基类。什么（如果有的话）是这样做的正确方法..

我可以做（但评估是在初始化 Base 之前完成的吗？）：

```
Derived::Derived(int _x, int _y, bool _z) : Base(_z?_x:_y) {} 
```

或（但这可能无法正常工作）

```
Derived::Derived(int _x, int _y, bool _z) 
{
    if(_z)
      ::Base(_x);
    else
      ::Base(_y);
} 
```

如果没有正确的方法这样做，那么我可能会在`Derived`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T10:44:24.120

```
 Derived::Derived(int _x, int _y, bool _z) : Base(_z?_x:_y) {} 
```

是正确的方法。您只能调用带有参数的基本构造函数`member initializers list`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T10:44:09.820

您的第一个选择是正确的：使用初始化列表。

第二种选择不起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T10:47:30.980

第一个替代方案是您唯一可行的替代方案。派生类的构造函数将在基类的构造函数之后调用，因此您的第二个选项无效。

现在，当然，问题是这是否是“正确”的事情。因为您可能应该有两个派生类，而不是一个。我并不是说您所做的事情本身就是错误的，这只是要记住的事情。

# android - android中将代码添加到适配器的过滤器类时，方法get(String)未定义String类型错误

> ID：14851659
> 
> 赞同：5
> 
> 时间：2013-02-13T10:42:16.530
> 
> 标签：android, listview, search, widget

为了从列表视图中查找关键项目，我没有在适配器中使用过滤器，但现在通过点击此[链接](https://stackoverflow.com/questions/8678163/list-filter-custom-adapter-dont-give-result/8678198#8678198)添加了过滤器，但在这一行中`String playerName=songsList.get(i).get("title").toString();`我收到了错误

```
 The method get(String) is undefined for the type String 
```

并且也`searchResults.add(songsList.get(i));`作为

```
The method add(HashMap<String,String>) in the type ArrayList<HashMap<String,String>> is not applicable for the arguments (String) 
```

这是我的整个代码

```
 public class Home extends ListActivity {

//how many to load on reaching the bottom
    int itemsPerPage = 15;
    boolean loadingMore = false;                        

    //For test data :-)
    Calendar d = Calendar.getInstance();

ArrayList<String> songsList;
ListView list;
    LazyAdapter adapter;
JSONArray posts;

 //ArrayList thats going to hold the search results
  ArrayList<HashMap<String, String>> searchResults;
  LayoutInflater inflater;
// All static variables
 static final String URL = "http://india.abc.net/ads/?json=get_recent_posts";

 static final String KEY_POSTS = "posts";
 static final String KEY_ID = "id";
static final String KEY_TITLE = "title";
static final String KEY_DATE = "date";
static final String KEY_CONTENT = "content";
static final String KEY_AUTHOR = "author";
static final String KEY_NAME = "name";
static final String KEY_ATTACHMENTS = "attachments";
static final String KEY_SLUG = "slug";
static final String KEY_THUMB_URL = "thumbnail";
static final String KEY_IMAGES = "images";
static final String KEY_URL = "url";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final EditText searchBox=(EditText) findViewById(R.id.search);
    final ListView  list=(ListView)findViewById(android.R.id.list);

    //get the LayoutInflater for inflating the customomView
     //this will be used in the custom adapter
     inflater=(LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    final  ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

        // Creating JSON Parser instance
                final JSONParser jParser = new JSONParser();

                // getting JSON string from URL
                JSONObject json = jParser.getJSONFromUrl(URL);
                try {
                     posts = json.getJSONArray(KEY_POSTS);

        // looping through all song nodes <song>
                for(int i = 0; i < posts.length(); i++){
                    JSONObject c = posts.getJSONObject(i);
                    // Storing each json item in variable
                    String id = c.getString(KEY_ID);
                    String title = c.getString(KEY_TITLE);
                    String date = c.getString(KEY_DATE);
                    String content = c.getString(KEY_CONTENT);
                    // to remove all <P> </p> and <br /> and replace with ""
                     content = content.replace("<br />", "");
                     content = content.replace("<p>", "");
                     content = content.replace("</p>", "");

                    //authornumber is agin  JSON Object
                    JSONObject author = c.getJSONObject(KEY_AUTHOR);
                    String name = author.getString(KEY_NAME);

                    String url = null;
                    String slug = null;
                    try {
                    JSONArray atta = c.getJSONArray("attachments");
                    for(int j = 0; j < atta.length(); j++){
                        JSONObject d = atta.getJSONObject(j);

                        slug = d.getString(KEY_SLUG);

                        JSONObject images = d.getJSONObject(KEY_IMAGES);

                        JSONObject thumbnail =    images.getJSONObject(KEY_THUMB_URL);
                        url = thumbnail.getString(KEY_URL);

                    }
                    } catch (Exception e) {
                        e.printStackTrace();

                    }

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(KEY_ID, id);
            map.put(KEY_TITLE, title);
            map.put(KEY_DATE, date);
            map.put(KEY_NAME, name);
            map.put(KEY_CONTENT, content);
            map.put(KEY_SLUG, slug);
            map.put(KEY_URL, url);

            // adding HashList to ArrayList
            songsList.add(map);
                }   
                }catch (JSONException e) {
                    e.printStackTrace();

                    }

              //searchResults=OriginalValues initially
                searchResults=new ArrayList<HashMap<String, String>>(songsList);

         // Getting adapter by passing json data ArrayList
            adapter=new LazyAdapter(this, songsList);    
             list.setAdapter(adapter);

             searchBox.addTextChangedListener(new TextWatcher() {

                 public void onTextChanged(CharSequence s, int start, int before, int count) {
                     adapter.getFilter().filter(s.toString());
                 }

                 public void beforeTextChanged(CharSequence s, int start, int count,
                     int after) {

                   }

                   public void afterTextChanged(Editable s) {

                   }
                  });

    // Launching new screen on Selecting Single ListItem
    list.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            HashMap<String, String> map = songsList.get(position);

            Intent in = new Intent(Home.this, Singlemenuitem.class);
            in.putExtra(KEY_TITLE, map.get(KEY_TITLE));
            in.putExtra(KEY_DATE, map.get(KEY_DATE));                         
            in.putExtra(KEY_NAME, map.get(KEY_NAME));
            in.putExtra(KEY_CONTENT, map.get(KEY_CONTENT));
            in.putExtra(KEY_URL, map.get(KEY_URL));

            startActivity(in);
        }                
    }); 
```

适配器类是

```
 public class LazyAdapter extends BaseAdapter implements Filterable{
      TextView title;
      private Activity activity;
         // private TextWatcher textWatcher;
        private ArrayList<HashMap<String, String>> data;
        private static LayoutInflater inflater=null;
       public ImageLoader imageLoader; 
       final EditText searchBox=(EditText) findViewById(R.id.search);
       ArrayList<HashMap<String, String>> searchResults;
       ArrayList<String> songsList;

   public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());
}

private EditText findViewById(int search) {
    // TODO Auto-generated method stub
    return null;
}

public int getCount() {
    return data.size();
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.activity_home, null);

    TextView title = (TextView)vi.findViewById(R.id.title); // title
    TextView date = (TextView)vi.findViewById(R.id.date); // artist name
    TextView content = (TextView)vi.findViewById(R.id.content);  // duration
    TextView name = (TextView)vi.findViewById(R.id.name); 
    // duration
    ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image

    HashMap<String, String> song = new HashMap<String, String>();
    song = data.get(position);

    // Setting all values in listview
   title.setText(song.get(Home.KEY_TITLE));
    date.setText(song.get(Home.KEY_DATE));
    content.setText(song.get(Home.KEY_CONTENT));
    name.setText(song.get(Home.KEY_NAME));

   imageLoader.DisplayImage(song.get(Home.KEY_URL), thumb_image);
    return vi;
}

public void add(String string) {
    // TODO Auto-generated method stub

}

@Override

public Filter getFilter() {
    Filter filter = new Filter() {
        @SuppressWarnings("unchecked")
        @Override
        protected void publishResults(CharSequence data,FilterResults searchResults) {

            songsList = (ArrayList<String>) searchResults.values; // has the filtered values
            notifyDataSetChanged();  // notifies the data with new filtered values
        }

        @Override
        protected FilterResults performFiltering(CharSequence playerName) {
            // TODO Auto-generated method stub
            return null;
        }
    };
    String searchString=searchBox.getText().toString();
    int textLength=searchString.length();

           //clear the initial data set
    searchResults.clear();

    for(int i=0;i<songsList.size();i++)
    {
   String playerName=songsList.get(i).get("title").toString();

   if(textLength<=playerName.length()){

   //compare the String in EditText with Names in the ArrayList
     if(searchString.equalsIgnoreCase(playerName.substring(0,textLength)))

     searchResults.add(songsList.get(i));
   }
    }
    return filter;

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:48:30.190

```
ArrayList<String> songsList; 
```

所以songsList 是一个字符串的ArrayList...如果你做songsList.get(i) 你会有一个字符串。String 对象没有“get”方法，所以你不能更进一步

`songsList.get(i).get("title").toString().`

同样的事情发生在这里：

```
searchResults=new ArrayList<HashMap<String, String>> 
```

所以如果你调用 searchResults.add 你必须传递一个哈希图，而不是一个字符串。

请再次检查您的类型定义，它将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:58:09.200

songList 是一个字符串列表，因此您不能对其项目执行 get()

# jquery - 选择 jquery，空字符串作为选项

> ID：14851660
> 
> 赞同：12
> 
> 时间：2013-02-13T10:42:24.513
> 
> 标签：jquery, grails, drop-down-menu, jquery-chosen

我在 grails 环境中的表单中使用 selected.js 进行下拉菜单。我希望用户能够选择一个空选项，但不知何故它被忽略了。一定有可能做到这一点？因为在 data-bindig 中设置“select-none”之类的选项以及稍后在 data-bindig 中设置 if 条件的解决方法如果 select-none value="" 将是不漂亮的。

显示我的问题：

例如这个选择：

```
<g:select id="foo" data-placeholder="bar"  class="foo chzn-select" style="width: 245px;" tabindex="4" 
                    from="${['M', ' ', 'F']}" value="foo" name="titel"/> 
```

会返回：

![在此处输入图像描述](../Images/c721eae4e4dd3e6b2c164486f82c1ac8.png)

当然这是选择的一个很好的功能，但我想我的情况是一个常见的情况，也许你们中的某些人已经有一个解决方案来覆盖这种行为

提前致谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-06-11T18:26:47.303

您还可以将 *allow_single_deselect* 设置为 true。这将有一个“x”，允许用户取消选择该选项。

```
$(".chzn-select").chosen({ allow_single_deselect:true }); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-13T11:51:14.283

经过一些研究，我发现了这个线程

[https://github.com/harvesthq/chosen/issues/93](https://github.com/harvesthq/chosen/issues/93)

我的解决方案是在初始化选择之前通过 JS 预先设置一个选项

```
$("#id").prepend("<option value='' >&nbsp;</option>"); 
```

所以这个问题已经解决了，感谢`&nbsp;`所有看过这个的人

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-13T19:38:44.490

```
<g:select name="foo" from="${foos}" noSelection="[' ':' ']"  /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-21T05:18:05.707

如果您的选择已经有一个空白选项，您可以跳过第一步。

1 - 您可以尝试使用：

```
$(".chzn-select").prepend("<option value='' >&nbsp;</option>"); 
```

2 - 将您的选择转换为已选择：

```
$(".chzn-select").chosen({
    allow_single_deselect: true
}); 
```

3 - 选项“allow_single_deselect”将在您的选项中创建一个红色 X，它允许您取消选择并将该字段保留为空白值： [![在此处输入图像描述](../Images/6b64c5b1c46f563a4019f506f55fa707.png)](https://i.stack.imgur.com/jvdCy.png)

参考： [https ://harvesthq.github.io/chosen/options.html](https://harvesthq.github.io/chosen/options.html)

# memory-management - 在 64 位地址空间中更容易获得连续内存吗？如果是，为什么？

> ID：14851664
> 
> 赞同：3
> 
> 时间：2013-02-13T10:42:35.157
> 
> 标签：memory-management, jvm, 64-bit

[此博客](https://blogs.oracle.com/moazam/entry/why_can_t_i_allocate)中的一条[评论](https://blogs.oracle.com/moazam/entry/why_can_t_i_allocate#comment-1090515226000)指出：

> 我们知道如何制作分块堆，但使用它们会有一些开销。与 32 位 JVM 中更大的堆相比，我们对更快的存储管理的要求更多。如果您真的想要大堆，请切换到 64 位 JVM。我们仍然需要连续的内存， **但是进入 64 位地址空间要容易得多**。

上述说法的这个含义是，在 64 位地址空间中更容易获得连续的内存。这是真的？如果是，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T13:52:21.723

这是非常真实的。进程必须从虚拟内存地址空间分配内存。它存储代码和数据，其大小受架构寻址能力的限制。在 32 位进程中，您永远不能处理超过 2^32 个字节，这还不包括银行切换技巧。那是 4 GB。操作系统通常也会从中取出一大块，例如在 32 位 Windows 上，它将可寻址 VM 大小减少到 2 GB。

理想情况下，进行分配以使它们紧密结合在一起。这在实践中很少奏效。共享库或 DLL 尤其需要选择一个首选的加载地址，并且必须在构建库时预先猜测。

因此，在实践中，分配是从现有分配之间的孔中进行的，并且您可以获得的最大可能*连续分配受到最大孔的大小的限制。*通常远小于可寻址的 VM 大小，在 Windows 上通常约为 650 兆字节。随着可用地址空间被分配*碎片化*，这往往会从那里走下坡路。特别是本机代码无法承受由压缩垃圾收集器移动的分配。如果您使用 Windows，那么您可以使用 SysInternals 的 VMMap 实用程序深入了解 VM 分配。

此问题在 64 位进程中完全消失。理论上可寻址的虚拟内存大小是 2^64，一个巨大的数字。如此之大，以至于当前的处理器无法实现它，它们可以达到 2^48。进一步受到您拥有的操作系​​统版本及其为那么多 VM 保留页面映射表的意愿的限制。8 TB 是典型的限制。暗示，分配之间的漏洞是*巨大的*。您的程序将在因 OOM 死亡之前因页面文件抖动而崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:21:28.773

我不能说 JVM 是如何实现的，但是从纯理论的角度来看，如果你有一个更大的虚拟地址空间（例如 64 位与 32 位相比），那么找到一个大的地址空间应该会容易得多可用于分配的连续内存块（走极端 - 您没有机会在 32 位地址空间中找到连续的 4GB 空闲内存，但很有可能在完整的 64 位地址空间中找到该空间地址空间）。

应该注意的是，无论虚拟地址空间大小如何，这仍然将通过分配（可能）不连续的物理内存页面来实现，特别是如果请求的分配很大 - 更大的虚拟地址空间只是意味着有一个可能有更多连续的虚拟地址可供使用。

# emacs - 我可以在 Emacs 加载文件时在要执行的文本文件中包含 lisp 代码吗？

> ID：14851665
> 
> 赞同：2
> 
> 时间：2013-02-13T10:42:44.263
> 
> 标签：emacs, elisp

有没有办法添加 lisp 代码，最好是在注释中，以便在 Emacs 加载该文件时执行？

具体来说，我想为特定的 LaTeX 文件关闭自动填充模式。我知道这样的事情可以通过模式挂钩来完成，但我不想对所有 LaTeX 文件都这样做。

Emacs 的 AUCTeX 将特定于文件的设置存储在已编辑文件末尾的注释中的方式使我怀疑可以使用一般的 lisp 片段来完成类似的操作，例如`(auto-fill-mode 0)`在 LaTeX 开头或结尾的注释中文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T11:22:45.570

`M-x` `add-file-local-variable` `RET` `eval` `RET` `(auto-fill-mode -1)` `RET`

这将使用适当的注释语法在文件末尾添加注释。`eval`可以包含任何 lisp 形式，但会要求确认一些。

# android - 在viewpager中用另一个替换一个片段

> ID：14851670
> 
> 赞同：1
> 
> 时间：2013-02-13T10:42:59.830
> 
> 标签：android

我正在使用 a`ViewPager`和 a`FragmentPagerAdapter`来托管四个不同的片段。

我想要实现的是通过单击一个按钮成功地替换`Fragment1`为一个全新的片段。`newFragment`

当我使用..

```
FragmentManager fragmentManager = getSupportFragmentManager();
FragmentTransaction transaction = fragmentManager.beginTransaction();
transaction.replace(R.id.fragment1_layout_id, newfragment);
transaction.remove(fragment1);
transaction.commit(); 
```

片段被替换并`Fragment`显示而不是`Fragment1`。虽然我一直滑动到`Fragment4`然后回到`newFragment`，但`Fragment1`已经卷土重来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:48:22.243

您的片段由`FragmentPagerAdapter`.

您需要调整`FragmentPagerAdapter`为 Fragment1 创建的片段，然后调用`notifyDataSetChanged()`适配器。

使用您的方法，应该再次显示 Fragment1 的时间，它`ViewPager`只会要求您`FragmentPagerAdapter`重新创建特定的实例——这将使您返回您试图替换的实例。

`ViewPager`只要没有在适配器上调用，就不能在内部缓存片段`notifyDataSetChanged()`。因此，如果没有那个电话，它可能不会抓住你创造的机会。

# tsql - SQL Server，错误 102，使用 CURSOR 时，创建动态表

> ID：14851682
> 
> 赞同：1
> 
> 时间：2013-02-13T10:43:56.460
> 
> 标签：tsql, dynamic, cursor, temp

使用 CURSOR 创建临时表时出现以下错误：

```
(1 row(s) affected)
Msg 102, Level 15, State 1, Line 1
Incorrect syntax near '?'.
Msg 208, Level 16, State 0, Line 33
Invalid object name '##TEMP_Branch'. 
```

没有 CURSOR 一切正常。这是整个代码：

```
declare  @TableSchema table
(
    Id  Int Identity(1,1),
    Name    nVarchar(50),
    DataType    nVarchar(50)
)

declare @reportid uniqueidentifier
set @reportid = '597d37c0-563b-42f0-99be-a15000dc7a65'
declare @ttl nvarchar(100)
declare cur CURSOR LOCAL for
    SELECT    title
    FROM            ReportItems
    where reportid = @reportid
    and del = 0 
    ORder by so
open cur
    fetch next from cur into @ttl
    while @@FETCH_STATUS = 0 BEGIN
        INsert @TableSchema Values(@ttl,'nVarchar(max) NULL')
    fetch next from cur into @ttl
    end
close cur
deallocate cur

Declare @Statement  Varchar(1000)
Select @Statement  = 'Create Table [##TEMP_Branch](FieldID Varchar(50)'
Select @Statement = COALESCE(@Statement +',','') + Name + ' ' + DataType from @TableSchema
Select @Statement = @Statement + ')'
EXEC(@Statement)

Select * from ##TEMP_Branch
drop table ##TEMP_Branch 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T20:54:59.420

使用表变量

```
 Declare @TEMP_Branch TABLE
    (
       FieldID varchar(50)
    ) 
```

它作为常规表工作，没有关系，并且不必删除，对于较大的数据处理，制作一个永久表来临时存储数据并在删除或截断它之后

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T21:11:26.823

您可能在 ReportItems 表中有一个标题，其中包含空格或其他错误字符（问号）。

第一个错误看起来像是来自 ，`EXEC(@Statement)`因为表定义无效。

```
Msg 102, Level 15, State 1, Line 1
Incorrect syntax near '?'. 
```

第二个错误可能`Select * from ##TEMP_Branch`是针对不存在的临时表执行的：

```
Msg 208, Level 16, State 0, Line 33
Invalid object name '##TEMP_Branch'. 
```

# javascript - 用 Ajax 响应替换 div 的内部 HTML

> ID：14851684
> 
> 赞同：6
> 
> 时间：2013-02-13T10:44:06.907
> 
> 标签：javascript, jquery, html, ajax

我正在尝试在一段时间后更改 div 的内部 HTML。我得到了我想要的 Ajax 的正确响应。但无法用 Ajax 响应替换选定的内部 HTML。我的代码有什么问题..

**html**

```
 <p class="time ui-li-desc" data-time="2013-02-13 11:30:08" >
    51 seconds ago<img alt="image" src="images/read.png"></p>

      <p class="time ui-li-desc" data-time="2013-02-13 11:30:16" >
    58 seconds ago<img alt="image" src="images/read.png"></p>
.
.
.
.
.
      <p class="time ui-li-desc" data-time="2013-02-13 11:40:08" >
    10 minute ago<img alt="image" src="images/read.png"></p> 
```

**j 查询**

```
setInterval(function() { 
            $( ".time" ).each(function( index ) {
                var sendTime=  $(this).attr("data-time");
                dataString = "sendtime="+sendTime+"&q=convertTime";
                $.ajax({
                    type: "POST",
                    url: "data_handler.php",
                    data: dataString,                   
                    cache: true,
                    success: function(response) {
                        alert(response);
                        $(this).html(response);
                        //alert(response);
                    }
                });
            });
        }, 5000); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T10:46:38.920

`this`是回调中的窗口。使用赋予`callback`each 的值：

```
 $( ".time" ).each(function(index , elem) {
            var sendTime=  $(this).attr("data-time");
            dataString = "sendtime="+sendTime+"&q=convertTime";
            $.ajax({
                type: "POST",
                url: "data_handler.php",
                data: dataString,                   
                cache: true,
                success: function(response) {
                    alert(response);
                    $(elem).html(response);
                }
            });
        }); 
```

你*不需要*定义一个新的变量来保护`this`，因为 jQuery 已经为你做了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-13T10:46:48.857

当您使用带有回调的异步函数时，`this`您的回调不是来自相同的上下文。您需要保存`this`在回调中使用的变量中。

试试这样：

```
setInterval(function() { 
            $( ".time" ).each(function( index ) {
                var sendTime=  $(this).attr("data-time");
                dataString = "sendtime="+sendTime+"&q=convertTime";
                var self = this;
                $.ajax({
                    type: "POST",
                    url: "data_handler.php",
                    data: dataString,                   
                    cache: true,
                    success: function(response) {
                        alert(response);
                        $(self).html(response);
                        //alert(response);
                    }
                });
            });
        }, 5000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T10:47:17.093

我认为 $(this) 是断章取义的。尝试：

```
setInterval(function() { 
            $( ".time" ).each(function( index ) {
                var $this = $(this);
                var sendTime=  $(this).attr("data-time");
                dataString = "sendtime="+sendTime+"&q=convertTime";
                $.ajax({
                    type: "POST",
                    url: "data_handler.php",
                    data: dataString,                   
                    cache: true,
                    success: function(response) {
                        alert(response);
                        $this.html(response);
                        //alert(response);
                    }
                });
            });
}, 5000); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T10:47:48.840

```
setInterval(function() { 
        $( ".time" ).each(function( index ) {
            var sendTime=  $(this).attr("data-time");
            var _thisvariable = $(this);
            dataString = "sendtime="+sendTime+"&q=convertTime";
            $.ajax({
                type: "POST",
                url: "data_handler.php",
                data: dataString,                   
                cache: true,
                success: function(response) {
                    alert(response);
                    _thisvariable.html(response);
                    //alert(response);
                }
            });
        });
    }, 5000); 
```

# cakephp - 在 html 上打开谷歌地图->通过 javascript 链接点击 cakephp

> ID：14851687
> 
> 赞同：1
> 
> 时间：2013-02-13T10:44:17.857
> 
> 标签：cakephp, google-maps-api-3

我正在尝试用 cakephp 实现谷歌地图。我希望`html->link`在我的视图中点击打开谷歌地图。以下是我的代码：

```
<?php echo $this->Html->link($this->Html->image("../images/route.png", array("alt" => "altText")),
                     array('controller' => 'ctrllerName', 'action' => 'actionName'),
                    array('escape' => false)); ?> 
```

我需要在链接点击时调用的功能：

```
 <script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAAgrj58PbXr2YriiRDqbnL1RSqrCjdkglBijPNIIYrqkVvD1R4QxRl47Yh2D_0C1l5KXQJGrbkSDvXFA"
      type="text/javascript"></script>
    <script type="text/javascript">

 function load() {
      if (GBrowserIsCompatible()) {
        var map = new GMap2(document.getElementById("map"));
        map.addControl(new GSmallMapControl());
        map.addControl(new GMapTypeControl());
        var center = new GLatLng(21.19500,  72.81944);
        map.setCenter(center, 15);
        geocoder = new GClientGeocoder();
        var marker = new GMarker(center, {draggable: true});  
        map.addOverlay(marker);
        document.getElementById("lat").innerHTML = center.lat().toFixed(5);
        document.getElementById("lng").innerHTML = center.lng().toFixed(5);

      GEvent.addListener(marker, "dragend", function() {
       var point = marker.getPoint();
          map.panTo(point);
       document.getElementById("lat").innerHTML = point.lat().toFixed(5);
       document.getElementById("lng").innerHTML = point.lng().toFixed(5);

        });

     GEvent.addListener(map, "moveend", function() {
          map.clearOverlays();
    var center = map.getCenter();
          var marker = new GMarker(center, {draggable: true});
          map.addOverlay(marker);
          document.getElementById("lat").innerHTML = center.lat().toFixed(5);
       document.getElementById("lng").innerHTML = center.lng().toFixed(5);

     GEvent.addListener(marker, "dragend", function() {
      var point =marker.getPoint();
         map.panTo(point);
      document.getElementById("lat").innerHTML = point.lat().toFixed(5);
         document.getElementById("lng").innerHTML = point.lng().toFixed(5);

        });

        });

      }
    }
</script> 
```

如何在 cakephp 中单击链接时调用此函数以显示谷歌地图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:07:10.107

假设您的目标是在用户单击链接时调用 load() 方法，代码如下：

```
<?php echo $this->Html->link(
     $this->Html->image(../images/route.php),
     array('controller' =>'ctrllerName', 'action' => 'actionName'),
     array('escape' => false, 'onclick' => 'load()')
); ?> 
```

但是，我假设如果您想在页面上调用一段 JavaScript，您可能不想转到其他页面，在这种情况下，您可以将代码更改为以下内容：

```
<?php echo $this->Html->link(
     $this->Html->image(../images/route.php),
     '#',
     array('escape' => false, 'onclick' => 'load()')
); ?> 
```

# php - jQuery表单插件没有将字符串传递给PHP

> ID：14851691
> 
> 赞同：0
> 
> 时间：2013-02-13T10:44:34.850
> 
> 标签：php, ajax, jquery, jquery-plugins

我正在尝试使用 jQuery 表单插件 ( [http://jquery.malsup.com/form](http://jquery.malsup.com/form) ) 来上传和预览照片。由于某种原因，应该使用 ajaxForm 函数传递给 PHP 的字符串返回空。

代码写在下面。每次我运行该函数时，它都会为两者返回“无数据” `$name`，`$size`因此我只能假设表单值（应该是上传的文件）没有通过 ajaxForm 函数传递给 PHP。

任何人都可以帮忙吗？我已经搞砸了几个小时！曾尝试查看 ajaxForm 插件本身的代码，但这些东西超出了我的能力和理解范围！我在网上也找不到任何类似的例子！

谢谢！！

*HTML*

```
<form id="imageform" method="post" enctype="multipart/form-data" action="uploadphoto.php">
 <span id="pimg">
  <input type="file" id="photoimg" />
 </span>
</form>

<div id="preview"></div> 
```

*jQuery*

```
$(document).ready(function (){

$('#photoimg').live('change', function(){ 
 $("#preview").html('');
 $("#preview").html('<img src="../../images/loader.gif" alt="Uploading...."/>');
 $("#imageform").ajaxForm({
  target: '#preview'
  }).submit();
 });

}); 
```

*PHP*

```
<?php
include('../../dbconnect.php');
session_start();
$session_id=$_SESSION['email']; // User session id
$path = "../../photos/";

$valid_formats = array("jpg", "png", "gif", "bmp","jpeg");
if(isset($_POST) and $_SERVER['REQUEST_METHOD'] == "POST"){
 $name = $_FILES['photoimg']['name'];
 $size = $_FILES['photoimg']['size'];
 if(strlen($name)){
  echo ($name);
  }
 else {
  echo ("No Data");
  }
 if(strlen($size)){
  echo ($size);
  }
 else {
  echo ("No Data");
  }
exit;
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T10:46:35.673

使用名称作为输入类型，例如更改：

```
<input type="file" id="photoimg" /> 
```

到

```
<input type="file" name="photoimg" id="photoimg" /> 
```

# javascript - chrome 焦点选择键

> ID：14851696
> 
> 赞同：0
> 
> 时间：2013-02-13T10:44:57.957
> 
> 标签：javascript, events

html:

```
<select><option>1</option><option>2</option></select> 
```

jQuery：

```
$('select').on('keyup', function(){
   alert('hello'); 
}); 
```

[http://jsfiddle.net/PsVU7/](http://jsfiddle.net/PsVU7/)

Chrome：然后列表关闭，keyup 事件不起作用（仅打开选项）。如何捕捉这个事件？

我需要 onkeyup 事件：如果用户按下回车键，则应用程序保存选择值，但如果未打开列表，我无法捕获 keyup。在 FireFox 中工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:55:12.150

尝试：

```
 $('select').change(function () {
    alert('hello');
}); 
```

# jquery - jQuery 从 DOM 中删除不止一次出现的元素

> ID：14851699
> 
> 赞同：0
> 
> 时间：2013-02-13T10:45:03.277
> 
> 标签：jquery

在这段 Jquery 中，我在显示早期 reg_user_table 的同一位置显示 active_user_table。所以首先我让 reg_user_table 不显示，然后我将 active_user_display 设置为块。之后我发出 getJSON 工作正常。问题是当附加表时以及当我想在所有表上附加类 active_table 以便我可以计算所有表并只允许看到其中一个表并从 DOM 中删除或分离其他表时。我不能这样做，所以 active_table 类适用于除最后一个之外的所有类。最近添加的未显示类 active_table。

```
 $('#reg_user_table').hide();
 if($('#active_user_table').is(':hidden')){   
     $('#active_user_table').css("display","block");
     $.getJSON("/siteadmin/active_user_count", function(response_data)
     { 
         var data = [response_data.today,response_data.Sevendays,response_data.Month];
         var caption = ['Active Today','Active Past 7 Days','Active This Month'];
         var $table = $('<table/>'); 

         for(var i = 0; i<3; i++) { 
             $table.append('<tr><td><h3>'+caption[i]+':'+'</h3></td><td><h3>'+ data[i] + '</h3></td></tr>');
         } 
         $('#active_user_table').append($table);
     });

     $('#active_user_table').children().addClass("active_table");
     console.log("Hello World!" + $('.active_table').length); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:51:43.657

欢迎来到异步世界。你`$.getJSON`在最后两行之后执行。将它们放在 succsess 回调中

```
$.getJSON("/siteadmin/active_user_count", function (response_data) {
    //...
    $('#active_user_table').append($table);

    // put it here....  
    $('#active_user_table').children().addClass("active_table");
    console.log("Hello World!" + $('.active_table').length);
}); 
```

# css - 在另一种样式中包含样式

> ID：14851705
> 
> 赞同：4
> 
> 时间：2013-02-13T10:45:25.803
> 
> 标签：css

所以我一直在思考这个问题，我认为这不存在。我也明白我的逻辑与样式表试图适应的内容相反，但让我们试一试：

举个例子：

```
 // Example "template style"
 .blue_bold {
      color: blue;
      font-weight: bold;
      /* other styles can go here */
 } 
```

所以假设我想将它添加到我的页脚中，我会在我的 HTML 中：

```
 <div class="blue_bold" id="footer">
      // Content goes here
 </div> 
```

这是完美的，但是如果我想将该元素添加到我的许多元素中怎么办。假设我也想将它添加到我的导航中，然后我必须将该类添加到每个元素：

```
 <div class="blue_bold" id="navigation">
      // Content
 </div>
 ....
 <div class="blue_bold" id="footer">
      // Content
 </div> 
```

我的问题是，与通过类或样式声明它一样，有没有办法将样式“附加”到样式表中的另一种样式？（例如：）

```
 #navigation, #footer  {
      attach_style(".blue_bold");
 } 
```

这样我可以通过创建“基本样式”来最小化我的代码，然后将这些样式附加到我的样式表中的各个样式？这又只是一个问题，不是我想暗示的问题，但我认为，鉴于上述情况，对于使用品牌指南文件并希望将特定样式附加到个别样式而不去的人来说，这将是一个“很好的选择” html 来做到这一点。

有任何想法吗？这存在吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T11:00:02.297

你不能用纯 CSS 做到这一点。您需要使用[LESS](http://lesscss.org/)或[SASS/SCSS](http://sass-lang.com/)来生成 CSS。

这里的语法示例：

**较少的**

```
.blue_bold {
    color: blue;
    font-weight: bold;
}
#navigation, 
#footer {
    .blue_bold;
} 
```

**SCSS**

```
.blue_bold {
    color: blue;
    font-weight: bold;
}
#navigation, 
#footer {
    @extend .blue_bold;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:00:04.607

你需要看看 sass 或更少，它们是你最好的选择。

[在这里](http://sass-lang.com/)粗鲁

[这里](http://lesscss.org/)少

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T11:02:02.717

您可以使用 sass 或更少，但更基本的轻微解决方法是列出 css 中的元素，如下所示：

```
#navigation,
#footer,
.some-other-element,
.another-element
{
      // css styles go here that you want to apply to each element listed above
} 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-02-13T11:02:16.083

看不到任何好处。您要求的不是标准的 CSS。您可以为所有具有类的元素定义它`blue_bold`

```
.blue_bold {
     color: blue;
     font-weight: bold;
     /* other styles can go here */
} 
```

对于这个块

```
<div class="blue_bold" id="navigation"></div> 
```

您可以像这样简单地添加另一个声明：

```
#navigation, #footer {
     background: black;
     color: red;
} 
```

除非被覆盖，否则将使用 .blue_bold 中的所有内容。它有什么问题？

# jquery - 读取每个 div 内元素的值

> ID：14851707
> 
> 赞同：2
> 
> 时间：2013-02-13T10:45:32.600
> 
> 标签：jquery, html, css

我有这段代码

```
$('.order_box').each(function(index) {
    box=$(this);
    if(box.find('.order_status').val()=="Payment received") { 
        box.css('color', 'red');
    }
}); 
```

它应该读取包含在一堆 div 中的选择的值，并相应地将 css 样式应用于每个 div。div html是：

```
<div class="order_box">
<h1>Order nr.: 2329268704685016576</h1>
<div class="delivery_info">
    --
    <span class="titles">Status:
        <select class="order_status">
            <option class="payment_received" value="Payment received">Payment received</option>
            <option class="need_refund" value="Need to refund money">Need to refund money</option>
            <option class="waiting_stock" value="Waiting for product/s stock">Waiting for product/s stock</option>
            <option class="packing" value="Packing">Packing</option>
            <option class="delivered" value="Delivered/Done" selected="selected">Delivered/Done</option>
        </select>
    </span>
    --
</div> 
```

我假设我可能以错误的方式应用每个函数，但我当然不明白为什么。我希望了解我的用法有什么问题，因为这不是我第一次发现自己处于这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:51:13.803

```
 $('.order_box').each(function(index) {
        var box = $(this);
        if($('.order_status :selected', this).val() == "Payment received") {
           box.css('color', 'red');
        }
    }) 
```

编辑：[JSFiddle](http://jsfiddle.net/vHA7e/)示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T10:55:11.377

现在，您正在使用 .order_box 类遍历所有元素。我假设您想检查 .order_status 的值？

```
if($('.order_status').val() == 'Payment received') {
    $('.order_box').css('color', 'red');
} 
```

如果您需要针对每个结果使用不同的规则，则可以将其包装在 switch 中。

```
switch($('order_status').val()) {
    case 'Payment received':
         $('.order_box').css('color', 'red');
         break;

    case 'Need to refund money':
         $('.order_box').css('color', 'green');
         break;

    // etc etc
} 
```

我不明白你为什么要在这里使用 $.each 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T10:58:33.013

您可以稍微简化一下：

```
$('.order_box').addClass(function(){
    return $(this).find('.order_status').val().trim().toLowerCase() == 'payment received' ? 'classNameIfMatch' : '';
}); 
```

用于从值中删除任何前导/尾随`trim()`空格，并`toLowerCase()`防止大写错误（在 HTML 或 jQuery 中）导致问题。

[JS 小提琴演示](http://jsfiddle.net/davidThomas/6cB4u/1/)。

有趣的是，这种方法比公认的答案更快/更有效：[JS Perf comparison of methods](http://jsperf.com/alternate-jquery-styling-approaches)，但请注意，我选择修改已接受答案的代码，以便在两种情况下都设置相同的 CSS 属性。

参考：

*   [`addClass()`](http://api.jquery.com/addClass/).
*   [`toLowerCase()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/toLowerCase).
*   [`trim()`](http://api.jquery.com/trim/).
*   [`val()`](http://api.jquery.com/val/).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T11:08:01.493

由于您的代码仅依赖于 order_status 类，因此不需要 each 函数。

正确使用 jQuery Api [http://api.jquery.com/selected-selector/](http://api.jquery.com/selected-selector/)。

```
$(".order_status").change(function(){
if($(".order_status option:selected").val()=="Payment received") { 
$(this).attr('style','color:red;');
}else{
$(this).attr('style','color:black;');
}
}); 
```

检查这里解决的问题：

[http://jsfiddle.net/hunkyhari/Q9Zfc/](http://jsfiddle.net/hunkyhari/Q9Zfc/)

# javascript - 如何从 youtube 视频 id 获取 youtube 播放列表 id？

> ID：14851709
> 
> 赞同：1
> 
> 时间：2013-02-13T10:45:35.873
> 
> 标签：javascript, api, video, youtube, playlist

有什么方法可以检索你的管播放列表 ID。

我需要从您的管视频 ID 中检索播放列表 ID。

请帮助我，我已经尝试了所有方法，但没有找到解决方案，如果有人知道，请分享。

坦斯克

# javascript - 当用户开始第四行时，Jquery 更改 textarea 样式

> ID：14851714
> 
> 赞同：0
> 
> 时间：2013-02-13T10:46:01.560
> 
> 标签：javascript, jquery, html

我有一个带有背景的文本区域，由 css 设置。当用户开始第 4 行时，我想删除它。

HTML

```
<textarea rows='7' cols='60' style='background(image.png)'></textarea> 
```

Javascript：

```
 $(textarea).css("background","#fff"); 
```

我只需要一个触发器

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T10:51:18.713

为 textarea 提供 id 和

```
 var text = $("#myTextArea").val();   
        var lines = text.split(/\r|\r\n|\n/);
        var count = lines.length;

        if(count>3){
        //your code to change background
        $(textarea).css("background","#fff");
        } 
```

它可能会帮助你。

# yodlee - Yodlee ASP.NET C# 集成

> ID：14851722
> 
> 赞同：1
> 
> 时间：2013-02-13T10:46:19.507
> 
> 标签：yodlee

我读过一篇关于 Yodlee 实现的帖子，其中一个用户说“将您的应用程序与 Yodlee API 集成很容易” 实现 Yodlee 并将其与现有的 C# Web 应用程序集成到底有多容易？我不介意弄脏，但我想知道它有多难，那里有论坛和足够的开发人员支持吗？请紧急协助，因为我们需要在月底之前测试和实施 Yodlee 还要注意我是 Yodlee 和 API 集成的新手。

提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T02:05:17.303

你可能根本不需要弄脏。用任何 .net 语言实现 Yodlee 都非常简单。Yodlee 也为 .net 提供了一个客户端库，您需要做的就是将您的业务逻辑包装在该库周围。另一方面，如果您还希望更好地控制 api 调用，您将获得 Web 服务的 wsdl 代理，以您感觉良好的方式编写代码。

# algorithm - Mips 汇编器中的快速排序

> ID：14851727
> 
> 赞同：0
> 
> 时间：2013-02-13T10:46:33.113
> 
> 标签：algorithm, assembly, mips

我正在尝试学习一些汇编程序，现在我正在尝试让快速排序算法起作用。但有些不对劲。

假设我使用这个数组

1,2,3,4,5,6,7,8,9,4

结果是这样

1,2,3,4,4,6,6,8,8,9

有人知道问题可能出在哪里吗？
这是我的快速排序代码。

```
QuickSort:
    bgt     a1, a2, QuickSortEnd    
    nop

    subu    sp, sp, 16
    sw      ra, 16(sp)
    sw      a0, 12(sp)
    sw      a1, 8(sp)
    sw      a2, 4(sp)   #save a0, a1, a2, ra
    jal Partition       #partition(v, a, b)
    nop 

    subu    sp, sp, 4
    sw      v0, 4(sp)   
    lw      a0, 16(sp)      #a0 = v
    lw      a1, 12(sp)      #a1 = a
    addi    a2, v0, -1      #a2 = k - 1 
    jal QuickSort
    nop

    lw      a0, 16(sp)  #a0 = v
    lw      t0, 4(sp)
    addi    a1, t0, 1   #a1 = k + 1
    lw      a2, 8(sp)   #a2 = b
    jal QuickSort
    nop

    addu sp, sp, 20
    lw ra, 0(sp)    
    nop

QuickSortEnd: jr ra 
```

这是分区部分

```
Partition:
    add t1, a1, a1
    add t1, t1, t1
    add t1, t1, a0      #t2 = pivot
    lw  t2, 0(t1)       #v[a]
    nop
    addi t3, a1, 1      #t3 = lower = a + 1
    addi t4, a2, 0      #t4 = upper = b

Do:
blt t4, t3, PartitionEnd

    W1:
    add     t8, t3, t3
    add     t8, t8, t8
    add     t8, t8, a0      
    lw      t5, 0(t8)       #t5 = v[lower]
    nop
    ble     t5, t2, W12
    nop
    b       W2
    W12:
    ble     t3, t4, W1_Op
    nop
    b       W2
    W1_Op:
    addi    t3, t3, 1
    b       W1

    W2:
    add     t8, t4, t4
    add     t8, t8, t8
    add     t8, t8, a0      
    lw      t5, 0(t8)       #t5 = v[upper]
    nop
    bgt     t5, t2, W22
    nop
    b       f
    W22:
    ble     t3, t4, W2_Op
    nop
    b       f
    W2_Op:
    addi    t4, t4, -1
    b       W2

f:
    bgt     t3, t4, Do
    nop
    add     t8, t3, t3
    add     t8, t8, t8
    add     t8, t8, a0      
    lw      t6, 0(t8)       #temp = v[lower]
    nop

    add     t9, t4, t4
    add     t9, t9, t9
    add     t9, t9, a0      
    lw      t7, 0(t1)       #v[upper]
    nop

    sw      t7, 0(t8)       #v[lower] = v[upper]
    sw      t6, 0(t9)       #v[upper] = temp

    addi    t3, t3, 1
    addi    t4, t4, -1

j Do

PartitionEnd:
    add     t8, t4, t4
    add     t8, t8, t8
    add     t8, t8, a0      
    lw      t2, 0(t8)       #temp = v[upper]
    nop

    add     t9, a1, a1
    add     t9, t9, t9
    add     t9, t9, a0      
    lw      t3, 0(t9)       #v[a]
    nop

    sw      t3, 0(t8)       # v[upper] = v[a]
    sw      t2, 0(t9)       # v[a] = temp

    addi    v0, t4, 0       #return upper(k)
    jr      ra
    nop 
```

我用参数调用快速排序函数

```
a0 = address of array to be sortet
a1 = 0
a2 = (number of elements) - 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-07T11:09:27.183

在您的“f”子例程中，当您打算调用 $t9 寄存器时，您调用了 $t1 寄存器。简单的修复，但下次评论您的代码并学习更有效地利用您的寄存器可能会有所帮助。更少的寄存器使跟踪更容易。

# c# - Linq 通过多个对象类

> ID：14851730
> 
> 赞同：1
> 
> 时间：2013-02-13T10:46:35.363
> 
> 标签：c#, linq

我是 Linq 的新手，找不到类似的主题。我试图仅显示当前经过身份验证的用户所在的组织。

我有以下 Linq，但返回的组织不正确：

```
OrganizationList.DataSource = from i in Database<Organization>.Linq()
where (i.Users.Select(y => y.User.Id).Contains(user_id))
select i; 
```

以下是课程：

```
public class Organization
{
    int Id
    string Name
    IList<OrganizationUser> Users
    [...]
}

OrganizationUser
{
    int Id
    User User
    Organization Organization
    [...]
}

User
{
    int Id
    string FirstName
    string LastName
    [...]
} 
```

假设 ：

```
Database<TEntity> where TEntity : class 
```

user_id 是当前经过身份验证的用户 id

我正在使用 NHibernate

我不能修改类，所以必须使用 OrganizationUser。

请你帮助我好吗 ？

* * *

编辑：非常感谢您的帮助！

这两种解决方案都有效：

```
OrganizationList.DataSource = Database<Organization>.Linq()
                             .Where(o => o.Users.Any(u => u.User.Id == user_id));

OrganizationList.DataSource = from i in Database<Organization>.Linq()
                              where (i.Users.Any(y => y.User.Id == user_id)
                              select i; 
```

再次感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:52:56.547

我没有机会对其进行测试，但以下方法可能有效；

```
OrganizationList.DataSource = from i in Database<Organization>.Linq()
where (i.Users.Any(y => y.User.Id == user_id)
select i; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:58:09.507

怎么样，

```
var organizationsWithUser = Database<Organization>.Linq()
                           .Where(o => o.Users.Any(u => u.User.Id == user_id)); 
```

# matlab - 将结构非常复杂的数据导入matlab

> ID：14851731
> 
> 赞同：1
> 
> 时间：2013-02-13T10:46:35.117
> 
> 标签：matlab, import

我有一些数据文件想加载到 matlab 中。不幸的是，它们的结构相当复杂——至少与我习惯的相比。你应该可以在这里下载一个旧的例子，[https](https://www.dropbox.com/s/vbh6kl334c5zg1s/fn1_2.out) ://www.dropbox.com/s/vbh6kl334c5zg1s/fn1_2.out（它可以在记事本或写字板中正常打开）

它是基于同步加速器数据的数据文件，其中列出了原始数据、正则化“原始”数据和（间接）傅立叶变换数据+拟合数据。此外还有一些来自傅立叶变换的统计数据。

我只需要在我的论文中引用统计数据的结果，所以虽然绘制一些结果会很好，但这并不是绝对必要的。但是，我需要原始数据和正则化数据以及拟合数据以及傅立叶变换数据。

**我的问题**

在数据文件中，统计分析的结果显示在我需要的数据之前。但是统计分析的列大小因数据文件而异。这意味着我不能只在标题中包含统计信息，除非我手动更改我导入的每个文件的标题行数。我需要一起分析 5 个数据文件的组，这次我至少需要分析大约 30 个文件，所以如果可能的话我想避免它。将来我会再次需要加载这种数据文件 - 所以即使改变标题行的数量 30 次听起来不错，能够自动完成它会很好

**可能的解决方案**

原始数据和正则化数据以及拟合数据和傅立叶变换数据前面都有一个特定行，告诉我*在此之后和一个空白/空行，数据开始*

所以我认为也许我可以使用正则表达式告诉 matlab*忽略所有内容，直到您看到这一特定行，忽略这一行和另一行，然后导入数据*

我用谷歌搜索并找到了使用正则表达式的主题：[尝试解析一个相当复杂的文本文件](https://stackoverflow.com/questions/11988379/trying-to-parse-a-fairly-complex-text-file)

但我是正则表达式的新手，建议的代码对我来说有点复杂。我可以推测他使用了*命名捕获*，但我不太确定我是否了解他如何使用它，以及我是否可以根据需要采用它。我检查了官方的 matlab 文档，但他们的例子有点简单:) ( [http://www.mathworks.se/help/matlab/matlab_prog/regular-expressions.html#bqm94nz-1](http://www.mathworks.se/help/matlab/matlab_prog/regular-expressions.html#bqm94nz-1) )

抱歉写了这么长的帖子。任何有关如何解决此问题的建议将不胜感激

/马丁

**编辑**

我根据评论中的链接使用的代码：

```
fileName = 'data.dat';
inputfile = fopen(fileName);

% Ignore all until we see one that just consists of this:
startString = '       R          P(R)      ERROR';

mydata = [];

while 1
 tline = fgetl(inputfile);

 % Break if we hit end of file, or the start marker
 if ~ischar(tline)  ||  strcmp(tline, startString)
    break
 end

 data = sscanf(tline, '%f', 3 );
 mydata(end+1,:) = data;

end
fclose(inputfile); 
```

当我运行代码时，我收到错误：

```
 Subscripted assignment dimension mismatch.

 mydata(end+1,:) = data; 
```

任何建议都会受到极大的欢迎，我对奇怪的布局/在评论中留下链接表示歉意。我不允许在帖子中包含两个以上的链接，而且我还不能添加新的答案——这都是因为我的代表人数太少了 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:08:46.937

由于块由至少两个新行分隔，您可以使用它将文本分成块并单独分析它们。试试这个代码

```
fileH = fopen('fn1_2.out');
content = fscanf(fileH, '%c', inf);
fclose(fileH);

splitstring = regexp(content, '\r\n\r\n', 'split');

blocks = regexp(splitstring, '\d\.\d{4}.*\r\n.*\d\.\d{4}','match');
numericBlocksIdx = find(cellfun(@(x) ~isempty(x), blocks));
numericBlocks = splitstring(numericBlocksIdx); 
```

现在`numericBlocks{1}`, `numericBlocks{2}`, ... 包含您感兴趣的表格。请注意，对于某些表格，标题也包括在内，因为它们没有被两个新行分隔。从这里您可以使用诸如[textscan](http://www.mathworks.se/help/matlab/ref/textscan.html)之类的函数将数据读入矩阵。

# java - 带有西里尔字符的 Android 请求

> ID：14851732
> 
> 赞同：2
> 
> 时间：2013-02-13T10:46:35.897
> 
> 标签：java, android, http

需要发送带有西里尔字符的 http 请求。在字符串“文本”中，我有一个俄语单词。它编码了最终地址，但 connection.getInputStream() 抛出异常。用英文单词它可以正常工作。编码的 URL（地址）通常在浏览器中打开。这里有一个代码：

```
 String text = params[0] ;
    try {
        text = URLEncoder.encode(text, HTTP.UTF_8) ;
    } catch (UnsupportedEncodingException e1) {
        e1.printStackTrace() ;
    }
    String address = "http://"+text+".jpg.to" ;
    String result = "" ;
    BufferedReader reader = null ;
    try {
        URL url = new URL(address) ;
        URLConnection connection = url.openConnection() ;
        InputStream stream = connection.getInputStream() ;
        InputStreamReader inReader = new InputStreamReader(stream, "UTF-8") ;
        reader = new BufferedReader(inReader) ;

        String inputLine = null ;
        while ((inputLine = reader.readLine()) != null) {
            result = result+inputLine ;
        }
    } catch (Exception e) {
        e.printStackTrace() ;
    } finally {        
        try {
            reader.close() ;
        } catch (Exception e) {
            e.printStackTrace() ;
        } 
    } 
```

# hadoop - MRUnit - 没有按预期工作

> ID：14851733
> 
> 赞同：3
> 
> 时间：2013-02-13T10:46:38.440
> 
> 标签：hadoop, hbase, mrunit

我只有创建用于批量加载到 HBase 的文件的映射器类，并且我已经编写了一个用于单元测试的 MRUnit。

尽管预期结果和重新生成的结果相同，但 MRUnit 失败并显示消息 **"Missing expected output"**。

预期输出：`(4b 65 79 31, {"totalColumns":1,"families":{"default":[{"timestamp":9223372036854775807,"qualifier":"default","vlen":6}]},"row":"Key1"})`

实际输出：`(4b 65 79 31, {"totalColumns":1,"families":{"default":[{"timestamp":9223372036854775807,"qualifier":"default","vlen":6}]},"row":"Key1"})`

我哪里错了？ImmutableBytesWritable 或 Put 有问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T12:48:37.687

因此，您的失败在于 MRUnit 使用对象的`equals`and`hashCode`方法来比较预期和实际输出对象（ `org.apache.hadoop.mrunit.TestDriver.buildPositionMap(List<Pair<K2, V2>>)`方法中使用了 HashMap）：

*   [ImmutableBytesWritable](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/io/ImmutableBytesWritable.html) - 是否实现`equals`and`hashCode`方法
*   [Put](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/client/Put.html) - 不实现`equals`or`hashCode`方法

所以看跌期权是导致问题的原因。解决此问题的唯一方法是手动检查驱动程序输出（使用驱动程序`run`方法而不是`runTest`），并将结果 List 与使用 objects`compareTo`方法（这两个类都存在）的预期结果进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-07T06:36:17.240

我遇到了这个问题并通过为键和值设置一个比较器来解决它。下面的代码用于 BytesWritable 值。

```
 ReduceDriver reduceDrive = ReduceDriver.newReduceDriver(<<ReducerInstance>>);

    reduceDriver.setValueComparator(new Comparator<BytesWritable>(){
        @Override
        public int compare(BytesWritable o1, BytesWritable o2) {
            return o1.compareTo(o2);
        }
    }); 
```

# msbuild - 如何将 MSBuild 参数从构建定义传递到 MSBuild 工作流活动

> ID：14851735
> 
> 赞同：1
> 
> 时间：2013-02-13T10:46:42.633
> 
> 标签：msbuild, tfsbuild

我在 TFS 工作流模板中定义了一个 MSBuild 活动，但目前我必须将“属性”命令行参数直接硬编码到模板中。

我希望能够通过高级设置“MSBuild Arguments”在构建定义中指定参数

我可以看到我可能必须使用字符串替换/连接来构建命令行，如此[处](https://stackoverflow.com/questions/9030328/how-to-pass-tfs-variable-to-a-msbuild-task-of-the-project)所述，但我看不到我需要输入的内容，可能是这样的：

![](../Images/50ab8c6b7db176d767ed50102a1b41ec.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T11:18:54.900

这是默认 MsBuild 任务使用的内容：

> String.Format("/p:SkipInvalidConfigurations=true {0}", MSBuildArguments)

您可以通过`MSBuildArguments`多个步骤更改构建过程模板中的变量。例如，我在流程模板中添加了一个 Run Architecture Validation 属性，然后编辑工作流以简单地附加`/ValidateArchitecture=true`到`MSBuildArguments`它们被传递到 MsBuild 活动之前。

```
 <If Condition="[PerformArchitectureValidation]" DisplayName="Configure Architecture Validation MSBuild Arguments">
  <If.Then>
   <Assign>
    <Assign.To>
     <OutArgument x:TypeArguments="x:String">[MSBuildArguments]</OutArgument>
    </Assign.To>
    <Assign.Value>
      <InArgument x:TypeArguments="x:String">[MSBuildArguments + " /p:ValidateArchitecture=true"]</InArgument>
    </Assign.Value>
   </Assign>
  </If.Then>
 </If> 
```

该`PerformArchitectureValidation`变量被定义为类型为 Build Process Template 级别的 Property `Boolean`。

* * *

更新：[写了一篇博文，用步骤和截图解释了这一点](http://blog.jessehouwing.nl/2013/07/properly-incorporate-msbuild-arguments.html)

# php - 如何连接sql查询

> ID：14851743
> 
> 赞同：1
> 
> 时间：2013-02-13T10:47:01.260
> 
> 标签：php, mysql, for-loop

我正在尝试连接 sql 查询并在循环后稍后运行。这怎么可能？这是我的愿景：

```
for($i=1;$i<=10;$i++){
   $item_.$i = "value_".$i;
   sql = sql . " insert into table (`item`) values ('$item_'.$i.'')";
   // this should be but an array
} 
```

并保存到数据库中：

```
for($j=0;$j<sqlarray.length;$j++){
   $sql_done = mysql_query($sqlarray[$j]);
} 
```

我还没有尝试任何东西，因为数据库很大，我害怕用我的代码破坏一些重要的东西..

多谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T11:13:09.977

使用 mysqli 和绑定

见[http://www.php.net/manual/en/mysqli.prepare.php](http://www.php.net/manual/en/mysqli.prepare.php)

```
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");
// define your query
$query = "INSERT INTO tablename (column1,column2) VALUES (:col1,:col2)";
if ($stmt = $mysqli->prepare($query)) {
  // loop of insert
  for($i=0;$i<10;$i++){
    $stmt->bind_param("col1", $i);
    $stmt->bind_param("col2", 'test'.$i);
    $stmt->execute();
  }
  $stmt->close();
}else{
  throw new Exception("unable to prepare query");
}
$mysqli->close(); 
```

绑定将避免很多安全问题，任何人都不应该使用其他东西然后绑定。

最好把所有东西都放在一个事务中，万一出现错误，你的数据库保持不变。

请参阅：[http](http://www.php.net/manual/en/mysqli.commit.php) ://www.php.net/manual/en/mysqli.commit.php了解更多信息

这是一个带有提交或回滚的提案

```
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");
if (mysqli_connect_errno()) {
  throw new Exception("Unable to connect");
}else{
  try{
    $mysqli->autocommit(FALSE);
    // define your query
    $query = "INSERT INTO tablename (column1,column2) VALUES (:col1,:col2)";
    if ($stmt = $mysqli->prepare($query)) {
      // loop of insert
      for($i=0;$i<10;$i++){
        $stmt->bind_param("col1", $i);
        $stmt->bind_param("col2", 'test'.$i);
        $stmt->execute();
      }
      $stmt->close();
    }else{
      throw new Exception("unable to prepare query");
    }
    $mysqli->commit();
  }catch(Exception $e){
    $mysqli->rollback();
  }
  $mysqli->close();
} 
```

我没有尝试过，但我们应该接近一个好的（最佳实践？）解决方案。

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T10:55:54.407

对于插入查询，您可以编写如下代码：

```
$sql .= " insert into table (`item`) values ";
for($i=1;$i<=10;$i++){
   $item_.$i = "value_".$i;
   $sql = $sql . " ('$item_'.$i.''),";

}
mysqli_query( substr($sql ,0,-1) ); 
```

上面将所有插入数据连接到一个字符串中并立即执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T10:57:47.900

我希望你在找这个

```
$query = "insert into table_name values";
for($i=0;$i<4;$i++) {
    $data1 = "test_".$i;
    $data2 = "new_".$i;
    $query .= "('','$data1','$data2'),";
}
$query = substr($query,0,-1);

echo $query; 
```

让我知道

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-13T10:50:08.983

试试下面的代码

```
 $sql="":
 for($i=1;$i<=10;$i++)
{
 $item_.$i = "value_".$i;
 $sql.=" insert into table (`item`) values ('$item_'.$i.'')";

  // this should be but an array
 }

 mysql_query($sql); 
```

# javascript - 如何在使用jQuery单击之前检查单选按钮的值

> ID：14851744
> 
> 赞同：0
> 
> 时间：2013-02-13T10:47:03.100
> 
> 标签：javascript, jquery, html, events

我在一个页面上有两个复选框，默认情况下选中一个。我想在单击任一复选框时使用 jQuery 触发自定义事件。但是，问题是我想在单击事件*之前*`checked`获取选中的值，但我一直在获取as `true`。

我的 HTML 如下所示：

```
<div class="clearfix controls">
    <label class="radio inline" for="yes">
        <input type="radio" name="recycle" value="1" id="yes" data-price-increase="29">
        Yes
    </label>
    <label class="radio inline" for="no">
        <input type="radio" name="recycle" value="0" id="no" checked="checked" data-price-decrease="29">
        No
    </label>
</div> 
```

我的 JavaScript 看起来像这样：

```
$('[data-price-increase]').on('click', function(e) {
    $('body').trigger('price.increase', [ $(this).data('price-increase') ]);
});
$('[data-price-decrease]').on('click', function(e) {
    $('body').trigger('price.decrease', [ $(this).data('price-decrease') ]);
}); 
```

但是，如果我连续单击一个单选按钮，即使它已经被选中，单击处理程序也会被多次触发。

单选按钮分别添加或删除额外费用，因此不断单击“是”单选按钮会不断将费用添加到价格中，这是不希望的。如果已经选中“是”，那么我不希望再次添加该值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T10:59:19.263

我认为您正在寻找更改事件：

```
$('[data-price-increase]').on('change', function(e) {
    console.log('changed');
    $('body').trigger('price.increase', [ $(this).data('price-increase') ]);
});
$('[data-price-decrease]').on('change', function(e) {
    console.log('changed');
    $('body').trigger('price.decrease', [ $(this).data('price-decrease') ]);
}); 
```

因此，仅在检查更改时才会触发操作，而不是在每次单击时触发。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-13T11:01:25.913

询问目标是否已检查

```
$('[data-price-increase]').on('click', function(e) {
   if(!jQuery(event.target).is(":checked"))
       $('body').trigger('price.increase', [ $(this).data('price-increase') ]);
}); 
```

# javascript - Javascript将变量设置为结果或什么都没有

> ID：14851749
> 
> 赞同：1
> 
> 时间：2013-02-13T10:47:13.180
> 
> 标签：javascript, if-statement, bit-manipulation

查看 javascript 评论

```
var SearchResult = {
    googleApiKey: "",
    googleUrl: "https://www.googleapis.com/shopping/search/v1/public/products?key={key}&country={country}&q={query}&alt=atom",
    country: "UK"
    Query: function( args )
    {     
        // Is there a way to do this in a less messy way?
        args.googleApiKey ? : this.googleApiKey = args.googleApiKey : null;
        args.country? : this.country = args.country: null;
    }
} 
```

基本上，如果有人为我的对象属性提供了一个新值，我希望它设置它，否则只需继续使用提供的默认值。

我知道按位运算符有利于选项选择，但我不知道如何将其移植到 javascript 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T10:49:08.607

```
args.googleApiKey = args.googleApiKey || this.googleApiKey;
args.country = args.country || this.country; 
```

不确定我是否理解您的问题；

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T10:49:23.410

在 JavaScript 中，您可以使用以下内容：

```
// thingYouWantToSet = possiblyUndefinedValue || defaultValue;
this.googleApiKey = args.googleApiKey || ''; 
```

使用它的警告是，如果第一个值是零或空字符串，您最终将使用默认值，这可能不是您想要的。例如

```
var example = '';
var result = example || 'default'; 
```

尽管设置了示例，但您最终会得到“默认”字符串。如果这给您带来问题，请切换到：

```
(typeof args.googleApiKey === 'undefined') 
    ? this.googleApiKey = 'default'
    : this.googleApiKey = args.googleApiKey; 
```

如果您经常重复自己，则可以使用辅助函数使这个更清洁。

```
var mergedSetting = function (setting, default) {
    return (typeof setting === 'undefined') ? default : setting;
}

this.googleApiKey = mergedSetting(args.googleApiKey, 'default value'); 
```

# ant - Groovy-TestNG-Ant 运行错误

> ID：14851753
> 
> 赞同：1
> 
> 时间：2013-02-13T10:47:25.617
> 
> 标签：ant, groovy, testng

我面临下一个问题。

尝试使用 Groovy、TestNG、ant 创建试点测试项目。

如果我从我的 IDE (Eclipse) 运行测试 - 一切都很好。

但是当我尝试使用 ant 运行测试时 - 这对我来说并不容易。你可以帮帮我吗？

build.xml 位于下方。

编译目标 - 可以通过，但是在 runTest 目标上我看到了问题：

**“线程“主”java.lang.NoClassDefFoundError 中的异常：groovy/lang/GroovyObject”**

```
<project basedir="." default="runTest" name="Ant file for TestNG">
<property name="src" location="src" />
<property name="build" location="build" />
<property name="libs" location="lib" />

<path id="class.path">
    <pathelement location="${libs}/testng.jar" />
    <pathelement location="lib/testng.jar"/>
    <pathelement location="${build}" />
</path>

<taskdef name="testng" classname="org.testng.TestNGAntTask">
  <classpath>
    <pathelement location="lib/groovy-all.jar"/>
    <pathelement location="lib/testng.jar"/>
  </classpath>
</taskdef>

 <target name="runTest" depends="compile">

  <mkdir dir="testng_output"/><!-- Create the output directory. -->

  <testng outputdir="testng_output" classpathref="class.path"> 
    <xmlfileset dir="." includes="testng.xml"/> 
  </testng>

</target>

<target name="compile">  
    <delete dir="build"/>    
    <mkdir dir="build"/>

    <taskdef name="groovyc" classname="org.codehaus.groovy.ant.Groovyc" classpath="lib/groovy-all.jar"/>

    <groovyc srcdir="src" destdir="./build">
        <classpath>
            <pathelement path="lib/groovy-all.jar"/>
            <pathelement path="lib/testng.jar"/>
        </classpath>
        <javac source="1.7" target="1.7" debug="off" />
    </groovyc>   
</target>

</project> 
```

这是 testng.xml

```
<suite name="My Test Suite" parallel="methods" thread-count="5">
    <test name="My Test">
        <classes>
            <class name="test1" />
        </classes>
    </test>
</suite> 
```

# java - 从自定义对象动态转换为 sqlite 行

> ID：14851754
> 
> 赞同：1
> 
> 时间：2013-02-13T10:47:29.410
> 
> 标签：java, android, reflection, android-sqlite

我有一个包含许多列的电影表和一个表示具有相同列/字段类型的表的类以相同的顺序（一个 int 用于 id，所有其他都是字符串）我有这段代码试图插入一条记录电影从一个对象`movie`到数据库。我遇到一个问题，说该方法`put`不能采用该组或参数`(String, capture#2-of ?)`，有什么比这更好或更差的方法来解决我的问题？
`EDIT:`你能解释一下我为什么错了吗？

```
ContentValues contentValues = new ContentValues();
Field[] fields = movie.getClass().getFields();
for(int i = 0; i < fields.length; i++)
{
    contentValues.put(allColumns[i], fields[i].getType().cast(fields[i].get(movie)));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:23:27.533

`fields[i].getType().cast(fields[i].get(movie))`返回类型 Object 并且 put(...) 没有重载，它将 Object 作为其第二个参数。

使用内容值 add(...) 方法时，应首先将值转换为原始类型，例如 int、String、boolean、long 或 byte[]

您可以将数据序列化为 blob（作为字节数组）或其他一些表示形式，例如 String。

编辑：请参阅评论，似乎 Field.getType() 返回一个通用类，您需要在调用 cast() 之前对其进行转换，即：-

```
Class<String> fieldType = (Class<String>) fields[i].getType(); 
```

但这不会帮助您进一步了解，因为您需要预先知道类型，您可以做的是这样的事情：

```
ContentValues contentValues = new ContentValues();
Field[] fields = movie.getClass().getFields();
for(int i = 0; i < fields.length; i++)
{
        Class<?> fieldType = fields[i].getType();

        if(String.class.isAssignableFrom(fieldType)) {
            contentValues.put(allColumns[i], (String) fields[i].get(movie));
        } else if(Integer.class.isAssignableFrom(fieldType)) {
            contentValues.put(allColumns[i], (Integer) fields[i].get(movie));
        }
        ...and so on for all types
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:07:55.553

您可以使用[ORMLite 之](http://ormlite.com/sqlite_java_android_orm.shtml)类的东西来管理您的数据库查询。这是一些与Android一起使用的[文档](http://ormlite.com/javadoc/ormlite-core/doc-files/ormlite_4.html)

# php - XML Xpath with PHP, node, subnodes 如何正确选择

> ID：14851764
> 
> 赞同：0
> 
> 时间：2013-02-13T10:47:49.450
> 
> 标签：php, xml, xpath, domxpath

嗨，我有这种类型的 XML 类型。我需要使用 PHP xpath 获取信息。XML 看起来像：

```
<row>
<id>1</id>
<product>
    <prodRow>
        <PID>Aa</PID>
    </prodRow>
    <prodRow>
        <PID>Ab</PID>
    </prodRow>
</product>
</row>
<row>
<id>2</id>
<product>
    <prodRow>
        <PID>Ba</PID>
    </prodRow>
    <prodRow>
        <PID>Bb</PID>
    </prodRow>
</product>
</row>
<row>
<id>3</id>
<product>
    <prodRow>
        <PID>Ca</PID>
    </prodRow>
    <prodRow>
        <PID>Cb</PID>
    </prodRow>
</product>
</row> 
```

PHP 脚本：

```
 if(file_exists("band.xml"))
    {
   $DOM = new DOMDocument();
       $DOM->load("band.xml");
   $xpath = new DOMXPath($DOM);
   $row = $xpath->query("//row/id");
   $prodRowID = $xpath->query("//row/product/prodRow");

    foreach($row as $vID)
    {
    echo "<b>".$vID->nodeValue."</b><br /><br />";  

    foreach($prodRowID as $pID)
    {
                            $prodID = $pID->getElementsByTagName("PID");
            echo "<b>".$prodID->item(0)->nodeValue."</b><br /><br />";  
    }       

    }

      } 
```

我得到但不知道该怎么做的答案，每次到达行时，PID 都会从所有行打印：

```
1
Aa, Ab, Ba, Bb, Ca, Cb
2
Aa, Ab, Ba, Bb, Ca, Cb
3
Aa, Ab, Ba, Bb, Ca, Cb 
```

我需要得到的答案：

```
1
Aa, Ab
2
Ba, Bb
3
Ca, Cb 
```

感谢您的回答，这是我的头疼，不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:50:50.820

您需要选择`prodRow`first 中的 s `foreach`，指示上下文节点，而不是使用绝对 XPath：

```
foreach($row as $vID)
{
   echo "<b>".$vID->nodeValue."</b><br /><br />";  

   $prodRowID = $xpath->query("../product/prodRow", $vID);
   foreach($prodRowID as $pID)
   {
        echo "LIGA <b>".$pID->nodeValue."</b><br /><br />"; 
   }       
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:51:46.017

你的内在`foreach`总是一样的，因为它不以任何方式指向你的外在`foreach`。您要做的是遍历所有*节点*`//row`，`id`然后使用.`product/prodRow` *[`DOMXpath::query()`](http://php.net/domxpath.query)*

# phpmyadmin - phpmyadmin 将文本添加到空字段？

> ID：14851766
> 
> 赞同：1
> 
> 时间：2013-02-13T10:47:57.273
> 
> 标签：phpmyadmin

在 phpmyadmin 中，如何将一些文本添加到一个空字段，但忽略所有其他已经有一些文本的字段。

我可以使用以下命令添加文本，但它会清除所有其他文本。

更新 products_description SET products_description = "新文本"

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:51:04.810

```
UPDATE products_description SET products_description = "new text" WHERE columnid = x 
```

替换`columnid`为主键列名，并`x`替换为要更新的条目的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:00:38.320

你必须尝试这个查询它会正常工作......

更新 products_description SET products_description = "新文本" WHERE products_description = ""

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T10:51:37.373

在您的插入查询中不要输入其他字段，但这些字段将获得默认值或空值

惰性进入你的表（required_column）值（'yourval'）

或使用主键更新查询

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T10:52:55.487

您可以使用 where 命令 -

```
Update products SET products_description="new text" where id=1; 
```

围绕这个逻辑的东西

# c# - Winform 显示屏幕分辨率

> ID：14851771
> 
> 赞同：2
> 
> 时间：2013-02-13T10:48:15.553
> 
> 标签：c#, winforms

我想知道 winform 显示器是否可以找到并显示它当前显示的当前屏幕分辨率？

例如，如果我的屏幕是 1920 x 1080，它将在标签或打印行中显示。尽管后一部分是我已经知道该怎么做的事情。

如果winform可以找到这些数据，有人可以告诉我吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T10:52:13.803

使用[屏幕类](http://msdn.microsoft.com/en-us/library/e8xzhd15.aspx)

```
 label1.Text = string.Format("Primary screen size = {0}x{1}", 
               Screen.PrimaryScreen.Bounds.Width, 
               Screen.PrimaryScreen.Bounds.Height); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T10:50:53.533

是的，当然，c#和WinForms可以获取你当前的屏幕分辨率，试试这段代码

```
Rectangle resolution = Screen.PrimaryScreen.Bounds;
int w = resolution.Width;
int h = resolution.Height; 
```

或者您可以尝试将其显示为标签或消息框

```
label1.Text = Screen.PrimaryScreen.Bounds.Width.ToString() + "x" + Screen.PrimaryScreen.Bounds.Height.ToString(); 
```

# java - 解决从 Lucene 4.0 升级到 4.1 后的糟糕性能

> ID：14851780
> 
> 赞同：4
> 
> 时间：2013-02-13T10:48:28.733
> 
> 标签：java, lucene

从 Lucene 4.0 升级到 4.1 后，我的解决方案的性能下降了一个数量级以上。直接原因是存储字段的无条件压缩。现在我要恢复到 4.0，但这显然不是前进的方向；我希望找到一种不同的方法来解决我的问题。

我使用 Lucene 作为数据库索引，这意味着我存储的字段很短：最多只有几个词。

我使用`CustomScoreQuery`where`CustomScoreProvider#customScore`最终加载所有候选文档并对查询执行详细的单词相似度评分。我采用了两个启发式方法来缩小候选文档集（基于[Dice 的系数](http://en.wikipedia.org/wiki/Dice%27s_coefficient)），但在最后一步中，我需要将每个查询词与每个文档词进行匹配（它们的顺序可能不同）并计算总分基于最佳单词匹配的总和。

我如何以不同的方式处理这个问题并以一种避免在查询评估期间加载压缩字段的陷阱的方式进行计算？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:34:08.870

在 中[`IndexWriterConfig`](http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/index/IndexWriterConfig.html)，您可以传入一个[`Codec`](https://builds.apache.org/job/Lucene-Artifacts-trunk/javadoc/core/org/apache/lucene/index/IndexWriterConfig.html#setCodec%28org.apache.lucene.codecs.Codec%29)，它定义了索引要使用的存储方法。这只会在构造时生效`IndexWriter`（即构造后更改配置将不起作用）。你会想要使用[`Lucene40Codec`](http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/codecs/lucene40/package-summary.html).

就像是：

```
//You could also simply pass in Version.LUCENE_40 here, and not worry about the Codec
//(though that will likely affect other things as well)
IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_41, analyzer);
config.setCodec(new Lucene40Codec());
IndexWriter writer = new IndexWriter(directory, config); 
```

您还可以[`Lucene40StoredFieldsFormat`](http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/codecs/lucene40/Lucene40StoredFieldsFormat.html)直接使用来获取旧的、未压缩的存储字段格式，并将其从自定义 Codec 实现传回。您可能可以从 中获取大部分代码[`Lucene41Codec`](http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/codecs/lucene41/Lucene41Codec.html)，然后替换该`storedFieldFormat()`方法。可能是更有针对性的方法，但有点复杂，我不确定您是否会遇到其他问题。

关于创建自定义编解码器的进一步说明，API 指示您应该完成此操作的方式是扩展 FilterCodec，并稍微修改它们的示例以适应：

公共最终类 CustomCodec 扩展 FilterCodec {

```
 public CustomCodec() {
   super("CustomCodec", new Lucene41Codec());
 }

 public StoredFieldsFormat storedFieldsFormat() {
   return new Lucene40StoredFieldsFormat();
 } 
```

}

* * *

当然，我想到的另一个实现：

我认为您也很清楚，问题就在于“我最终加载了所有候选文档”。我不会对我没有完整细节或理解的评分实现进行过多评论，但这听起来像是你在与 Lucene 的架构作斗争以使其做你想做的事。一般来说，存储字段不应该用于评分，您可以预期性能会因使用 4.0 存储字段格式而受到非常明显的影响，尽管程度要小一些。是否有更好的实现，无论是在评分算法方面，还是在文档结构方面，这将消除基于存储字段对文档进行评分的要求？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T15:03:29.700

使用 Lucene 3.x 我有这个：

```
new CustomScoreQuery(bigramQuery, new FieldScoreQuery("bigram-count", Type.BYTE)) {
  protected CustomScoreProvider getCustomScoreProvider(IndexReader ir) {
    return new CustomScoreProvider(ir) {
      public double customScore(int docnum, float bigramFreq, float docBigramCount) {
         ... calculate Dice's coefficient using bigramFreq and docBigramCount...
         if (diceCoeff >= threshold) {
           String[] stems = ir.document(docnum).getValues("stems");
           ... calculate document similarity score using stems ...
         }
      }
    };
  }
} 
```

这种方法可以有效地从存储字段中检索缓存`float`值，我用它来获取文档的二元计数；它不允许检索字符串，因此我需要加载文档以获取计算文档相似度分数所需的内容。在 Lucene 4.1 更改为压缩存储字段之前，它工作正常。

利用 Lucene 4 中的增强功能的正确方法是这样参与`DocValues`：

```
new CustomScoreQuery(bigramQuery) {
  protected CustomScoreProvider getCustomScoreProvider(ReaderContext rc) {
    final AtomicReader ir = ((AtomicReaderContext)rc).reader();
    final ValueSource 
       bgCountSrc = ir.docValues("bigram-count").getSource(),
       stemSrc = ir.docValues("stems").getSource();
    return new CustomScoreProvider(rc) {
      public float customScore(int docnum, float bgFreq, float... fScores) {
        final long bgCount = bgCountSrc.getInt(docnum);
        ... calculate Dice's coefficient using bgFreq and bgCount ...
        if (diceCoeff >= threshold) {
          final String stems = 
             stemSrc.getBytes(docnum, new BytesRef())).utf8ToString();
          ... calculate document similarity score using stems ...
        }
      }
    };
  }
} 
```

这导致性能从 16 毫秒（Lucene 3.x）提高到 10 毫秒（Lucene 4.x）。

# extjs3 - ExtJS Grid Panel如何有条件地更改单元格背景颜色

> ID：14851783
> 
> 赞同：1
> 
> 时间：2013-02-13T10:48:39.950
> 
> 标签：extjs3

我正在使用 EXTJS 网格面板，其中我有一个编辑器网格面板，其中有 5 列，我在其中填充来自其他地方的值，但现在我必须验证，如果它是空的，我必须显示单元格背景颜色如何做到这一点尽快回复谢谢

# c - 如何使用 libcurl 开发 http 服务器

> ID：14851795
> 
> 赞同：12
> 
> 时间：2013-02-13T10:49:29.603
> 
> 标签：c, curl, libcurl

我正在使用 libcurl。它非常好（作为客户端），我曾经打开一个到服务器的套接字，然后发送我的 http 数据包。

我想知道是否可以使用 libcurl 开发 http 服务器。http 服务器将在给定端口上侦听，然后当它接收到 http 数据包时，http 服务器返回对摘要身份验证的需要。

我在 stackoverflow 和 curl 网站上做了一些研究，但没有结果。

可以用 libcurl 做到这一点吗？怎么做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-13T21:20:29.740

重复其他人所说的话：不，libcurl 不适用于服务器。[curl 常见问题解答](http://curl.haxx.se/docs/faq.html#Can_I_write_a_server_with_libcur)中甚至说：

> 5.17 我可以用 libcurl 写一个服务器吗？
> 
> 不，libcurl 不提供任何功能或构建块来构建任何类型的互联网协议服务器。libcurl 只是一个客户端库。对于服务器库，您需要在其他地方继续搜索，但是对于您可能需要服务器的大多数协议，存在许多优秀的开源库。并且确实有很多经过多年测试和证明的优秀独立产品。您无需重新发明它们！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-14T07:28:51.073

你需要一些 HTTP*服务器*库（因为 libcurl 只是一个 HTTP*客户端*库）我建议使用[libonion](http://www.coralbits.com/libonion/)但还有其他几个 HTTP 服务器框架（ C++ 中的[libmicrohttpd](http://www.gnu.org/software/libmicrohttpd/)、[POCO](http://pocoproject.org/)和[Wt](http://www.webtoolkit.eu/wt) ......）。

[HTTP](https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)是一个复杂的协议，即使为它的一个很小的子集（如普通`GET`请求，没有所有有用的功能，如条件请求、编码和压缩等）编写服务器也是合理可行的。因此，我建议使用成熟的 HTTP 服务器库，而这不能是一个*小*库。

# jquery - 删除多选默认背景

> ID：14851801
> 
> 赞同：3
> 
> 时间：2013-02-13T10:49:58.437
> 
> 标签：jquery, html, css, select

我有这个多项选择，我想更改个人的默认背景`<option>`

```
<select size="8" name="lstSelectedPackages" style="width:100%">
  <option value="" selected="selected">Select</option>
</select> 
```

小提琴：http: [//jsfiddle.net/ux4DD/180/](http://jsfiddle.net/ux4DD/180/)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:04:01.980

如果`jQuery`最适合您，那么我相信这会有所帮助。

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">

    $(function()
    {

        $("select option:selected").each(function ()
        {
            $(this).css('background-color','red');
        });

    });

</script>
<select name="garden">
    <option>Flowers</option>
    <option selected="selected">Shrubs</option>
    <option>Trees</option>
    <option>Bushes</option>
    <option>Grass</option>
    <option>Dirt</option>
</select>
<div></div>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T10:53:33.537

只需更改样式的背景，如下所示

```
<select size="8" name="lstSelectedPackages" style="width:100%; background:#fff999">
    <option value="" selected="selected">Select</option>
</select> 
```

如果您想为所有选择标签执行此操作，则可以在 css 上添加以下代码

```
select{
   background: #fff999;
} 
```

您可以为此使用 jquery，如下所示：

```
$("option:selected").css{"background", "#fff999"} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T11:10:32.793

我想你想要这样的答案

jQuery

```
$('.mySelect').change(function () {
$(this).find('option').css('background-color', 'transparent');
$(this).find('option:selected').css('background-color', 'red');
}).trigger('change'); 
```

html

```
<select class="mySelect">
<option value="1" selected="selected">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
</select> 
```

[请参阅演示参考](http://jsfiddle.net/zNTqm/) [链接](https://stackoverflow.com/questions/7741722/change-color-of-selected-option-only)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T10:54:38.667

更新的小提琴展示了如何做到这一点：http: [//jsfiddle.net/ux4DD/181/](http://jsfiddle.net/ux4DD/181/)

应该注意的是，当涉及到跨浏览器样式时，选择是出了名的不可靠，因此您的样式可能不会在所有浏览器/版本中一致地出现。

```
select {
    height:50px;
    background-color: #dcdcdc;
} 
```

如果您只希望一个选择具有特定的背景颜色/样式，请使用一个类来定义它，例如

```
<select class="my-select-class">
 <option>2</option>
</select>

.my-select-class {
    background-color: #dcdcdc;
} 
```

不建议在您的网页上使用内联样式，因为这会使它们成为维护线下的噩梦。

坚持使用外部样式表。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-13T10:55:36.190

利用`background-color`

```
select{
  height:50px;
  background-color:green;

} 
```

**更新**

使用jQuery。

```
$('option').css('background', 'none');
$('option:selected').css('backgroundColor', 'red'); 
```

[在这里摆弄](http://jsfiddle.net/bipen/ux4DD/182/)

# php - Prestashop 模块调试

> ID：14851803
> 
> 赞同：3
> 
> 时间：2013-02-13T10:50:00.650
> 
> 标签：php, prestashop

我是 Prestashop 模块开发的新手，如果这是一个愚蠢的问题，我很抱歉......我一直在阅读文档，但我还没有找到我要找的东西，所以我走了，

我想在 actionCartSave 时使用不同的上下文变量等在屏幕上显示一条消息（仅用于调试目的）。类似于 js 中的“console.log()”或“alert()”。

无法将产品添加到购物车。

*文本状态：'解析器错误'*

*errorThrown: 'SyntaxError: JSON Parse error: Unrecognized token '<''*

*响应文本：*

< xmp style="文本对齐：左；" > 消息：</xmp>

*{

*“产品”*：[...] *

我已经测试过这段代码：

```
public function hookActionCartSave( $params )
{
     ppp('message: ');
     return true;
} 
```

...在模块类定义中，但是当我将产品添加到购物车时出现此错误：

我在不同的浏览器窗口中获取此文本。

那么请问，最好的方法是什么？

希望一切都清楚。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:04:37.273

您所做的是正确的，此错误消息是在您的浏览器中运行的 javascript 引发的，因为您打印出来的附加信息`ppp`不是有效的 JSON。

如果您使用 Chrome，请使用开发人员工具并选择“网络”选项卡。您将在此处看到 ajax 调用。您可以通过单击它来更详细地检查此调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-22T10:40:07.623

不确定这是不是最好的选择，但我发现使用简单的调试很有用

```
throw new Exception('Custom message ' . $someVariable); 
```

# php - 带有两个选择的 PHP/MySQL 联合

> ID：14851805
> 
> 赞同：0
> 
> 时间：2013-02-13T10:50:05.023
> 
> 标签：php, mysql

**我的陈述有什么问题？我已经尝试了我能想到的一切。**

```
$stmt = $mysqli->prepare("SELECT host_name, review_title FROM lhr_reviews
              UNION
              SELECT host_url FROM lhr_hostinfo WHERE host_name = ?
              ORDER BY host_name");

$stmt->bind_param("s", $id);
$stmt->execute(); 
$res = $stmt->get_result();

while($row = $res->fetch_assoc()) {
  $list .=  "<li><a href='".$row['host_url']."'>".substr($row['review_title'],0,20)."</a></li>";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:52:46.050

从两个查询中选择的列必须在列数和相应的数据类型中相互匹配：

> 第一个 SELECT 语句中的列名用作返回结果的列名。在每个 SELECT 语句的相应位置列出的选定列应具有相同的数据类型。（例如，第一个语句选择的第一列应该与其他语句选择的第一列具有相同的类型。）

在您的查询中，第一个选择选择两列，而第二个选择仅选择一列。这不是真的，您可以在第二次选择中选择空字符串作为解决方法。另一个问题是`ORDER BY host_name`您可以通过这种方式添加它，您必须将这些查询放在子查询中并在外部查询中排序，如下所示：

```
SELECT *
FROM
(
    SELECT host_name, review_title FROM lhr_reviews
    UNION
    SELECT host_url, ''            FROM lhr_hostinfo WHERE host_name = ?
) AS sub
ORDER BY host_name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T10:54:05.640

你应该试试这个查询..

```
SELECT host_name, review_title,host_url FROM lhr_reviews
LEFT JOIIN lhr_hostinfo
    on(host_name = ?)
ORDER BY host_name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T10:54:28.733

中的问题`UNION`。 `Selected columns listed in corresponding positions of each SELECT statement should have the same data type.`

试试这个：

```
$stmt = $mysqli->prepare(
             "SELECT * FROM
              (SELECT host_name, review_title FROM lhr_reviews
              UNION
              SELECT host_url, NULL FROM lhr_hostinfo WHERE host_name = ?) A
              ORDER BY host_name"); 
```

**[UNION 语法](http://dev.mysql.com/doc/refman/5.0/en/union.html)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T10:56:30.287

实际问题在查询内部，因为在第一个查询中你得到两个字段，在第二个查询中你得到一个字段，并且联合说列必须匹配，包括列类型和列数。

**规则是。**

以下是一些管理查询中使用 UNION 运算符的方式的规则。

1.  在一个 UNION 查询中，至少有两个 SELECT 语句。

2.  两个 SELECT 语句必须具有相同数量的列，并且这些列必须具有兼容的数据类型。

3.  每个 SELECT 语句中的列标题不必具有相同的名称。UNION 查询结果中的列标题始终取自第一个 SELECT 语句。

4.  如果要对 UNION 操作的结果集进行排序，只能在最后一个 SELECT 语句后加上 ORDER BY 子句。不能在 UNION 查询的任何其他 SELECT 语句中指定 ORDER BY 子句。

5.  ORDER BY 子句中使用的列只能取自第一个 SELECT 语句。

6.  如果未在 UNION 查询中指定 ORDER BY 子句，则结果集始终按第一列排序。

7.  如果使用 UNION ALL，则来自第二个 SELECT 语句的整个结果集将附加到第一个 SELECT 语句。在这种情况下，联合结果集中可能存在重复记录。

8.  如果只使用 UNION，MySQL 会从最终结果集中删除重复的行。

# python - Fabric 获取任务属性

> ID：14851814
> 
> 赞同：0
> 
> 时间：2013-02-13T10:50:34.457
> 
> 标签：python, fabric

我使用如下装饰器定义了一个织物定义：

```
@task(alias=dp)
def deploy:
    # the code 
```

但是我想访问我的 def 中的别名？

我不能使用自我。获得访问权:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:53:30.697

我不确定您是否可以直接执行此操作，但如果您将通过“任务 api”（一种包装器）调用任务，您将可以访问参数，至少在“itnernaltask”内部。

```
from fabric.api import execute, task
@task
def internaltask():
    execute("deploy", alias=dp) 
```

# wordpress - 限制子站点中的主站点用户访问

> ID：14851818
> 
> 赞同：1
> 
> 时间：2013-02-13T10:50:51.197
> 
> 标签：wordpress

我有一个名为 www.example.com 的 WordPress 网站；它有自己的用户帐户。现在我创建了一个名为 www.yy.example.com 的子站点。我已经安装了多站点用户管理，以便 example.com 站点用户可以登录 yy.example.com 站点。在 yy.example.com 我在前端限制了用户注册；因为用户是由后端管理面板注册的。在前端，我有使用前端会员插件的登录表单。现在我想限制 yy.example.com 中 example.com 用户的访问。

这个怎么做？

# android - 条形图在 AchartEngine 中不起作用

> ID：14851820
> 
> 赞同：4
> 
> 时间：2013-02-13T10:50:54.187
> 
> 标签：android, bar-chart, achartengine

我正在尝试`Bar Chart`使用`AchartEngine`但各种东西对我不起作用..

1) 无法显示网格。

2) 无法删除类别系列标题，即“条形图”。

3) 它没有显示应显示的条形图。

4) 默认情况下，白色背景是可见的。

是否可以在每个条之间提供空间？

**条形图代码**

```
 CategorySeries series = new CategorySeries("Bar Graph");

    for (int i = 0; i < availCatList.size(); i++)
       series.add(availCatList.get(i), mTotal.get(i));

        XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
        dataset.addSeries(series.toXYSeries());

        XYSeriesRenderer seriesRenderer = new XYSeriesRenderer();
        seriesRenderer.setChartValuesSpacing(0.5f);
        seriesRenderer.setDisplayChartValues(true);
        seriesRenderer.setColor(Color.GREEN);

        XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer();
        mRenderer.setChartTitle("Bar Chart");
        mRenderer.setShowGrid(true);
        mRenderer.setAxisTitleTextSize(15);
        mRenderer.setXLabelsAlign(Align.CENTER);
        mRenderer.setXTitle("Categories");
        mRenderer.setYTitle("Amount");
        mRenderer.setScale(1.0f);

        for (int i = 0; i < availCatList.size(); i++) {

            mRenderer.addXTextLabel(i + 1, availCatList.get(i));
        }

        mRenderer.setXLabels(0);

        mRenderer.addSeriesRenderer(seriesRenderer);

        view = ChartFactory.getBarChartView(this, dataset, mRenderer,
                Type.DEFAULT);

        // layout.removeAllViews();

        layout.addView(view); 
```

任何帮助将不胜感激..

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:49:37.800

1.  `mRenderer.setShowGrid(true)`在演示代码中的所有示例中都可以正常工作。尝试使用设置另一种颜色`mRenderer.setGridColor(color);`
2.  你的意思是传说：`mRenderer.setShowLegend(false);`
3.  `series.add(mTotal.get(i));`是条形图的正确用法。
4.  这可能来自个人资料。只需设置自己的背景颜色。

条之间的空间：阅读 API`mRenderer.setBarSpacing();`

# wcf - WCF 中继未收到消息

> ID：14851822
> 
> 赞同：1
> 
> 时间：2013-02-13T10:50:59.727
> 
> 标签：wcf, azure, servicebus

我在 Azure 服务总线上有几个队列，现在正在设置 WCF 中继服务（内部）来处理消息。我编写了一个托管此服务的控制台应用程序，如下所示：

```
 var sh = new ServiceHost(typeof(MyWcfService));

            try
            {
                sh.Open();

                foreach (var endpoint in sh.Description.Endpoints)
                    Console.WriteLine(String.Format("Listening at: {0}", endpoint.Address));    

                Console.Write("Press ENTER to close");
                Console.ReadLine();

            }
            catch (Exception e)
            {
                ...
            }
            finally
            {
                sh.Close();
            } 
```

MyWcfService 正在使用该方法实现一个接口

```
 [WebInvoke]
    [OperationContract]
    void ProcessMessage(IntegrationMessage message); 
```

执行时，我收到消息，告诉我应用程序正在侦听三个不同的服务总线端点（这是我配置的端点），所以这似乎是正确的。

通过 Fiddler 查看流量时，我只得到 4 行：

```
200 HTTP    Tunnel to   xxx-sb.accesscontrol.windows.net:443
200 HTTPS   xxx-sb.accesscontrol.windows.net    /WRAPv0.9/  
200 HTTPS   xxx-sb.accesscontrol.windows.net    /WRAPv0.9/
200 HTTPS   xxx-sb.accesscontrol.windows.net    /WRAPv0.9/ 
```

在我看来这似乎是正确的，因为它返回 200 并且我在提琴手中看到它也返回一个 wrap_access_token ..？

问题是为什么没有任何额外的请求来获取实际消息？我期待额外的调用来打开与服务总线的连接，但没有进行任何..

我知道三个队列中至少有两个有消息。

任何帮助将不胜感激，如果需要，我将提供更多信息。

# ruby-on-rails - 我如何猜测在 Rails 中使用 match 创建的路由助手？

> ID：14851830
> 
> 赞同：-2
> 
> 时间：2013-02-13T10:51:22.397
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

我在`routes.rb`文件中创建了这样的路由：

```
match ':controller/:action/:id' 
```

我尝试调用`add_posts_path()`，`add_post_path()`从我的角度来看，在这两种情况下我都收到了类似的错误消息：

```
undefined method `add_post_path' for ... 
```

我尝试在声明之前和之后声明我的匹配路线`resources :posts`。

是否为此类路线创建了任何路线助手？我不确定在这样的匹配规则中可以使用哪些辅助方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:13:28.303

您可以使用 :as 参数命名路由

```
match '/foo/bar', to: 'foo#bar', as: 'foo_bar' 
```

然后在您的视图中使用 foo_bar_path

[http://guides.rubyonrails.org/routing.html#naming-routes](http://guides.rubyonrails.org/routing.html#naming-routes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:24:55.097

如果你有`resources :posts`，你有一个助手`new_post_path`来*添加*新帖子。运行`rake routes`以查看您的应用程序路由。

`add_post_path`不遵循 Rails 资源的路由约定，如果需要，必须添加自定义方法：

```
resources :posts do
  get :add, :on => :collection
end 
```

您可以在此[Rails 指南](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)中了解更多相关信息。

当您定义 时`match ':controller/:action/:id'`，您设置应用程序的 url 及其参数的格式，但这不会神奇地定义路由助手。

# ios - 通过 MKAnnotation CalloutAccessoryControlTapped 传递自定义属性

> ID：14851831
> 
> 赞同：4
> 
> 时间：2013-02-13T10:51:27.170
> 
> 标签：ios, objective-c, mkmapview, mapkit, mkannotation

我正在尝试执行通过 MKAnnotation 传递自定义属性（placeId）的简单功能。我已经使用名为“MapViewAnnotation”的自定义类设置了所有内容。

当用户激活 CalloutAccessoryControlTapped 时，我想简单地将 MapViewController 中的附加值传递给 DetailViewController。我可以让标题/副标题工作，但我需要修改我的代码以允许自定义变量。

我已经尝试了一段时间，但无法使其正常工作。任何帮助都会很棒！谢谢！

**MapViewAnnotation.h**

```
@interface MapViewAnnotation : NSObject <MKAnnotation> {
    NSString *title;
    CLLocationCoordinate2D coordinate;
}

@property (nonatomic, copy) NSString *title;
@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;
@property (nonatomic, copy) NSString *subtitle;

- (id)initWithTitle:(NSString *)ttl andCoordinate:(CLLocationCoordinate2D)c2d;

@end 
```

**MapViewAnnotation.m**

```
@implementation MapViewAnnotation

@synthesize title, coordinate, subtitle;

- (id)initWithTitle:(NSString *)ttl andCoordinate:(CLLocationCoordinate2D)c2d {
    title = ttl;
    coordinate = c2d;
    subtitle = @"Test Subtitle";
    return self;
}

@end 
```

**MapViewController.m 中的注释创建**- 在这里您可以看到我正在使用字幕传递 placeId（底线）

```
location.latitude = [dictionary[@"placeLatitude"] doubleValue];
location.longitude = [dictionary[@"placeLongitude"] doubleValue];    

newAnnotation = [[MapViewAnnotation alloc] initWithTitle:dictionary[@"placeName"]
                                               andCoordinate:location];

newAnnotation.subtitle = dictionary[@"placeId"]; 
```

**MapViewController.m 中的 CalloutAccessoryControlTapped** - 在这里您可以看到我将 placeId 保存到 NSUserDefaults

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view 
calloutAccessoryControlTapped:(UIControl *)control
{
    NSString *passedId = view.annotation.subtitle;
    [[NSUserDefaults standardUserDefaults]
    setObject:passedId forKey:@"passedId"];
    [[NSUserDefaults standardUserDefaults] synchronize];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T11:41:25.173

为什么不在自定义地图视图注释中添加新属性？在**MapViewAnnotation.h**添加

```
@property (nonatomic, strong) NSString *passedID; 
```

然后，在视图控制器中创建注释时，设置该属性而不是设置字幕：

```
newAnnotation = [[MapViewAnnotation alloc] initWithTitle:dictionary[@"placeName"]
                                               andCoordinate:location];

newAnnotation.passedID = dictionary[@"placeId"]; 
```

最后，在**CalloutAccessoryControlTapped**中，将 MapViewAnnotation 转换为自定义类，然后访问 passID 属性，而不是 subtitle 属性：

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view 
calloutAccessoryControlTapped:(UIControl *)control
{
    NSString *passedId = ((MapViewAnnotation*)view.annotation).passedID;
    [[NSUserDefaults standardUserDefaults]
    setObject:passedId forKey:@"passedId"];
    [[NSUserDefaults standardUserDefaults] synchronize];
} 
```

# file - 根据部分文件名查找文件并将文件移动到 vbs 中的其他位置

> ID：14851852
> 
> 赞同：0
> 
> 时间：2013-02-13T10:52:31.823
> 
> 标签：file, parsing, scripting, vbscript

我正在寻找编写一个 vbs 脚本来执行以下操作。- 有一个映射文件，其中包含一个标识符，后跟一个目录名称（例如 123456-Documents）。- 对于映射文件中的每一行，都会有一个以我需要移动到别处的标识符开头的文档（例如 123456_otherStuff_Dec 12.xls）。- 然后我需要解析完整的文件名并取中间字符串（otherStuff）来确定它进入哪个子目录。

所以在上面的例子中，文件“123456_otherStuff_Dec 12.xls”应该在目录 C:.../current/Documents/otherStuff/123456_otherStuff_Dec 12.xls 中结束。

我是 vbs 的新手，但我对 Java 有一点了解，所以能够开始做这件事。这是我到目前为止所拥有的：

```
Set objFSO = CreateObject("Scripting.FileSystemObject") 
Set objFile = objFSO.OpenTextFile("C:\Documents and Settings\w133960\Desktop\test1\Text1.txt", ForReading) 

Const ForReading = 1 

Dim arrFileLines() 
i = 0 
Do Until objFile.AtEndOfStream 
Redim Preserve arrFileLines(i) 
arrFileLines(i) = objFile.ReadLine 
i = i + 1 
Loop 
objFile.Close 

For Each strLine in arrFileLines 
WScript.Echo strLine 
MyArray = Split(strLine, "-", -1, 1)
WScript.Echo MyArray(0)
WScript.Echo MyArray(1)

Next 
```

这将通过映射文件并将为我解析标识符。下一部分将搜索以标识符开头的文件，然后解析它的文件名并将其移动到相关目录中。我可以在当前循环中添加另一个 For 循环，然后解析文件名并在该循环中移​​动文件 - 但我担心这样做的效率，因为有几百个文件要移动。任何人都可以建议最干净，最有效的方法吗？任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:51:07.297

一个计划：

1.  第一个循环将 Ids（和文件夹名称）从映射文件中提取到`dictionary`(key = id, value = folder name (possibly)) [永远不要将文件中的行集合复制到内存中的数组中，如果你不这样做'不需要访问项目 i 来处理项目 j (i <>j)]
2.  对（一个且唯一？）源目录中的文件进行第二次循环。`Split`o文件。`Name`就对了！分隔符“_”，而不是“-”。如果在字典中找到 Id，请使用这些部件来构建 ( `FileSystemObject.BuildPath()`) 新/目标文件规范。检查 ( `FileSystemObject.FileExists()`) 目标文本是否存在，如果不存在，oFile。`Move`

# php - php 导出到 cvs，但发生的事情使 csv 完全无法使用

> ID：14851857
> 
> 赞同：0
> 
> 时间：2013-02-13T10:52:49.090
> 
> 标签：php, excel, zend-framework, csv, magento-1.4

我每天都通过自定义 phpscript 导出昨天（Magento）的销售额。

由于我们有直接银行业务，我不得不稍微更改代码。我们的想法是在 CC_Type(Visa,JBC,...) 中设置“直接”值，以便我们有漂亮的数据用于我们的分析。

csv 看起来实际上很干净，当我使用 excel 或 mssql 进行手动导入（在其中自定义导入）时，它可以按预期工作。但是当我让它自己打开时（就像我们的系统会在晚上导入数据一样）奇怪的事情发生了。

![带有打开文档的 excel 屏幕截图](../Images/f62dfc5081f2c1a2f26eb311e8201410.png)

*   在 data-/functionbar (fx) 中，您可以看到光标位于 D 上，如果我插入更多字母，它们会在 onlineshop 的 p 之后附加。
*   *标题（第一行）*和后面的每个数据行都会在没有**""**的情况下导入，我知道 excel 有时会这样做，但在此文档之前从未这样做过。好吧，那是一个谎言，无论是否如此，我都没有付过钱，因为它确实有效。

//

```
class Mage_Shell_Compiler extends Mage_Shell_Abstract {
const OUTPUT = false;
const DEL = "\t";
const BR = "\r\n";
const FILEPATH = '../var/export/';
const FILENAME = 'tdtaCash';

protected $_orders = array();
protected $_csv_output = '';
protected $_headers = array(
    "dtTag" => false, // Bestelldatum
    "fiCBox" => 94,
    "fiCashier" => "onlineshop",
    "fiCurrency" => array('Visa', 'MC', 'Amex', 'DC', 'JCB', 'Direct'), // Zahlungsart
    "dtRev" => false  // Bruttoumsatz an diesem Tag mit dieser Zahlungsart
);

/// @see $_headers for details
protected function addOrderToRows($order, $rows) {
    $order_data = $order->getOrigData();
    $type = $order->getPayment()->getAdditionalInformation('CC_BRAND');

    switch ($type) {
        case 'VISA':
            $type = 'Visa';
            break;
        case 'MasterCard':
            $type = 'MC';
            break;
        case 'American Express':
            $type = 'Amex';
            break;
        case 'Diners Club':
            $type = 'DC';
            break;
        case 'JCB':
            $type = 'JCB';
            break;
        default:
            $brand = $order->getPayment()->getAdditionalInformation('BRAND');
            if ($brand == 'DirectEbankingAT') {
                $type = 'Direct';
            }
            break;
    }

    if (empty($rows[$type])) {
        $row = $this->_headers;
        $row["dtRev"] = 0;
    } else
        $row = $rows[$type];

    //$row['dtTag']       = date('Y-m-d', strtotime($order_data['created_at']));
    $row['dtTag'] = $this->formatDate($order_data['created_at'], 'exportdate', true);
    $row["fiCurrency"] = $type;
    $row["dtRev"] += $order_data['grand_total'];

    $rows[$type] = $row;

    return $rows;
}

protected function __($msg) {
    if (self::OUTPUT)
        print $msg . "\n";
}

/**
 * Get Orders instance
 *
 * @return Mage_Sales_Model_Order
 */
protected function _getOrders($day = 1) {
    $timeZoneOffset = Mage::getModel('core/date')->getGmtOffset();
    $yesterday = date('Y-m-d', strtotime("-$day day")) . ' 00:00:00';
    $yesterday = date('Y-m-d H:i:s', strtotime($yesterday) - $timeZoneOffset);
    $day--;
    $today = date('Y-m-d', strtotime("-$day day")) . ' 00:00:00';
    $today = date('Y-m-d H:i:s', strtotime($today) - $timeZoneOffset);
    if (!$this->_orders)
        $this->_orders = Mage::getResourceModel('sales/order_collection')
                ->addAttributeToSelect('*')
                /// @note uncommented to remove daily filter
                ->addAttributeToFilter('created_at', array("from" => $yesterday, "to" => $today))
                ->addAttributeToFilter('status', array('nin' => array('holded', 'canceled', 'pending_payment', 'pending')));
    return $this->_orders;
}

protected function addRowToOutput($row) {
    if (isset($row["dtRev"]))
        $row["dtRev"] = number_format($row["dtRev"], 2);
    $this->_csv_output .= '"' . implode('"' . self::DEL . '"', $row) . '"' . self::BR;
}

protected function addCsvHeader() {
    $this->addRowToOutput(array_keys($this->_headers));
}

/**
 * Run script
 *
 */
public function run() {
    if ($this->getArg('export')) {
        $day = is_numeric($this->getArg('day')) ? $this->getArg('day') : 1;
        $file = self::FILEPATH . self::FILENAME . '.csv';
        $this->__('orders to export ' . count($this->_getOrders($day)));
        // add header if file is empty
        if (!strlen(trim(file_get_contents(dirname(__FILE__) . '/' . $file))))
            $this->addCsvHeader();
        $rows = array();
        foreach ($this->_getOrders($day) as $order)
            $rows = $this->addOrderToRows($order, $rows);
        while ($row = array_shift($rows))
            $this->addRowToOutput($row);
        file_put_contents(dirname(__FILE__) . '/' . $file, $this->_csv_output, FILE_APPEND);
        $this->__($this->_csv_output);
    } else {
        echo $this->usageHelp();
    }
}

/**
 * Retrieve Usage Help Message
 *
 */
public function usageHelp() {
    return <<<USAGE
    Usage:  php -f export_tdtaCash.php -- [options]
    export  ...  Appends data to file tdtaCash.csv in Directory var/export/
    day     ...  days to count back
    help    ...  This help
USAGE;
    }

}

$shell = new Mage_Shell_Compiler();
$shell->run(); 
```

所以我的问题是，有人可以解释一下什么样的来源对这种效果负责，我能做些什么来预防不再得到这样的结果？！

**编辑：** 这是在 Notepad++ 中打开的 CSV 的屏幕截图 ![Notepad++ 中打开的 CSV 截图](../Images/c1d3f90e7ddd22afad3cc57d27e2e418.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:10:58.963

将文件分辨率从`CSV`to`TXT`和 use `Import file`，指定`TAB`字符作为分隔符 - 你会没事的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T11:06:41.917

那不是***C*** SV，它是***T*** SV，一个*制表符*分隔值文件。
Excel 不会知道这一点，除非您告诉它并曲解数据。

# vba - 从子窗体上的组合框中显示/隐藏标签页

> ID：14851858
> 
> 赞同：1
> 
> 时间：2013-02-13T10:52:48.483
> 
> 标签：vba, ms-access, properties, controls

多年来，我一直在互联网上寻找这个解决方案来解决我一直遇到的问题。

我有一个表单 (Form1)，它由选项卡和一个子表单 (subForm1) 组成。在 subForm1 中，我有一个组合框，我想为其分配一个 AfterUpdate 事件。如果组合框（在子窗体中）为是，则显示 tab1，否则如果组合框为否，则隐藏 tab1。我正在寻找的代码是这样的：

```
Private Sub Combo52_AfterUpdate()
If Me.Combo52.Value = "Yes" Then
Forms!FrmAssessment.TabCtl50.Pages(5).Visible = True
ElseIf Me.Combo52.Value = "No" Then
Forms!FrmAssessment.TabCtl50.Pages(5).Visible = False
End If 
```

有什么想法吗？

# javascript - 从子窗口访问父窗口 id

> ID：14851873
> 
> 赞同：4
> 
> 时间：2013-02-13T10:53:39.980
> 
> 标签：javascript, dojo

*   我有一个名为 eventLog.jsp 的父窗口
*   还有一个名为 processManager.jsp 的子窗口
*   父窗口有一个按钮，单击该按钮时，它会调用函数getEventLogProcess()。
*   getEventLogProcess() 将打开弹出窗口（processManager.jsp/子窗口）
*   我的需要是，我必须在子窗口的加载功能中获取父窗口按钮 ID。

eventLog.jsp：

```
<div class="claro" id="menuDiv141" onclick="setWidgetproperty(this.id,'x','navMenu141');" onmousedown="setMenuBarProperty('navMenu141');" onmouseup="setDocStyle(this.id)" style="border:1px dotted white; left: auto; position: absolute; top: 620px;">
     <div dojotype="dijit.MenuBar" id="navMenu141" style="font-size:11pt;" title="MenuBar">
          <div dojotype="dijit.MenuBarItem" id="SearchMenu141" onclick="getEventLogProcess();setMenuId(this.id);" style="font-size:11pt;" title="menuBarItem">
               <img class="images" id="SearchMenu141" name="search5.png" onclick="setImgProperty(this.id)" src="images/uploads/search.png" style="height:20px; width:20px;">
               Search
          </div>
</div>
</div> 
```

获取事件日志进程（）：

```
function getEventLogProcess(){
    if(dijit.byId('dynamiceventgridCWPROCESSEVENTLOG')){
        var selctedItem = dijit.byId('dynamiceventgridCWPROCESSEVENTLOG').selection.getSelected();
        if(selctedItem.length){
            //alert("grid row selected");
            dojo.forEach(selctedItem, function(selectedItem){
            if(selectedItem !== null){
                dojo.forEach(dijit.byId('dynamiceventgridCWPROCESSEVENTLOG').store.getAttributes(selectedItem), function(attribute){
                    var value = dijit.byId('dynamiceventgridCWPROCESSEVENTLOG').store.getValues(selectedItem, attribute);
                });
            }
            var objectId = document.getElementById("CWPROCESSEVENTLOG.OBJECT_ID").value;
            if(objectId != ""){
                //alert(objectId);
                popupWindowWithPost("processManager.jsp",'height=600px,width=960px,top=50px,left=150px,scrollbars=no,sizable=yes,toolbar=no,statusbar=no','processManagerpopup',objectId);  
            }else{
                alert("Please have some value in Process ID field");
            }
            });
        }else{
            alert("grid loaded and row nt selected");
        }
    }
    if(gbshowgridFlag==false){
        alert("grid not loaded");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:49:19.740

你的代码对我来说似乎太复杂了，所以我写了一个测试脚本：

## 父窗口

```
<script type="text/javascript">
function foo(){
     window.buttonid=document.getElementById('button1');
     window.open("childwindow.html","child window");
}
</script>
<body>
<!-- some stuff here -->
<button id="button1" name="NiceButton" onclick="foo()">click here</button>
</body> 
```

## 子窗口

```
<script type="text/javascript">
function loading(){
    alert(window.opener.buttonid.name);
}
</script>
<body onload="loading();"></body> 
```

# c# - SQL 查询在 sql developer 中返回行，但在 asp.net 中没有

> ID：14851875
> 
> 赞同：0
> 
> 时间：2013-02-13T10:53:43.153
> 
> 标签：c#, asp.net, oracle11g, asp.net-membership

**背景** 我已经使用 oracle 11g 配置了 asp.net 成员资格。IIS 和 Oracle 11g express 配置在同一台机器上。一切正常，直到我在 IIS6 上部署应用程序。我的应用程序停止识别数据库中已经存在的用户。寻找解决方案让我想到了[这个](http://weblogs.asp.net/scottgu/archive/2006/04/22/Always-set-the-_2200_applicationName_2200_-property-when-configuring-ASP.NET-2.0-Membership-and-other-Providers.aspx)解决方案。我在我的客户端计算机上更新了 Visual Studio 2010 中的 web.config，并将 applicationName 设置为与 IIS 上的匹配，并从数据库中删除了所有现有角色和用户记录。然后，我使用 WSAT 添加了一个管理员角色和用户，因为我还在另一个表“UserDetails”中为用户保留了一些附加信息，所以我在 oracle sql developer 中运行以下查询以添加管理员详细信息

```
insert into UserDetails (userid, usertypeid) VALUES('BC3008FFFAD24BB995C21E80A4870ABA', 1); 
```

其中成功添加了记录。我为应用程序构建了部署包并将其部署到 IIS。浏览了 Web 应用程序，输入了用户凭据，但应用程序再次拒绝让我进入。

我在客户端上从 VS 运行应用程序（不做任何更改）。这是我的登录页面逻辑

登录.aspx：

```
Username: <br />
<asp:TextBox runat="server" ID="txtUserName"></asp:TextBox>
<br />
Password: <br />
<asp:TextBox runat="server" ID="txtPassword" TextMode="Password"></asp:TextBox>
<br />
<asp:Button runat="server" ID="btnLogin" Text="Login" onclick="btnLogin_Click" 
    style="height: 26px" /> 
```

登录.aspx.cs：

```
protected void btnLogin_Click(object sender, EventArgs e)
    {
        if (Membership.ValidateUser(username, password))
            {
                MembershipUser user = Membership.GetUser(username);
                FormsAuthentication.SetAuthCookie(username, false);
                Guid guserid = new Guid(user.ProviderUserKey.ToString());
                string userid = Helpers.TranslateOraceEndianUserID(guserid);
                int usertype = UserDetailsBAL.GetUserType(userid);
                if (usertype == 1)
                {
                    Response.Redirect("~/Dashboard.aspx");
                }                    
                else
                {
                    Response.Redirect("Login.aspx?error");
                }
            }
            else
            {
                Response.Redirect("Login.aspx?error");
            }            
    } 
```

在里面放断点`if(Membership.ValidateUser ...`显示用户正在验证，实际问题是`UserDetailsBAL.GetUserType(userid);`

**问题**

步入 GetUserType

```
public static int GetUserType(string userid)
    {
        DataTable dt = new DataTable();
        string q = string.Format("SELECT usertypeid from userdetails where userid='{0}'", userid);
        dt = OraDAL.Select(q);
        int usertype = -1;
        if (dt.Rows.Count != 0)
        {
            DataRow dr = dt.Rows[0];
            usertype = int.Parse(dr[0].ToString());
        }

        return usertype;
    } 
```

然后是 OraDAL.Select(q)

```
public static DataTable Select(string query)
{
    DataTable dt = new DataTable();
    OracleDataAdapter da = new OracleDataAdapter(query, OpenConn());
    da.Fill(dt);
    return dt;
}

private static string connString = "Data Source=(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=192.168.1.2)(PORT=1521))(CONNECT_DATA=(SERVICE_NAME=xe)));User Id=...;Password=...";
private static OracleConnection conn;

    public static OracleConnection OpenConn()
    {
        if (conn==null)
        {
            conn = new OracleConnection(connString);
        }
        if (conn.State != ConnectionState.Open)
        {
            conn.Open();
        }

        return conn;
    } 
```

我注意到查询没有填充 dt。对我来说一切都很好，我在 sql developer 中执行了相同的查询，它确实返回了一行

![在此处输入图像描述](../Images/928640f356423a78050e1cf72bd9fdec.png)

为了跟踪问题，可能需要检查哪些区域？

**编辑**

我跳过了`GetUserType`for`usertype= 1`以允许管理员登录该站点并创建 usertype=2 的其他用户。现在 usertype=2 的用户可以登录网站，`GetUserType`代码运行顺利返回用户类型。我对 login.aspx.cs 中的代码进行了更改：

```
 Guid guserid = new Guid(user.ProviderUserKey.ToString());
       string userid = Helpers.TranslateOraceEndianUserID(guserid);
       int usertype = UserDetailsBAL.GetUserType(userid);
       if (usertype == 2)
       {
          Response.Redirect("~/Dashboard.aspx");
       } 
```

**编辑2**

现在我在数据库中有用户类型为 2 的用户，我再次更改了上面的代码以查看它是否再次为 usertype=1 提供错误

```
 string userid = Helpers.TranslateOraceEndianUserID(guserid);
 int usertype = UserProfilesBAL.GetUserType(userid);
 if (usertype == 1)
 {
     Response.Redirect("~/Admin/Dashboard.aspx");
 }
 else if (usertype == 2)
 {
      Response.Redirect("~/Dashboard.aspx");
 } 
```

现在，当我为类型 1 的用户输入凭据时，让我更加沮丧的是，GetUserType 什么也不返回，当我使用用户类型 2 的凭据登录时，GetUserType 确实返回用户类型。

这两者之间的唯一区别是，对于 usertype=1，我使用 oracle sql developer 在 userdetails 表中手动输入了记录，对于 usertype=2，当我在后面使用 create user form 创建 usertype 2 的用户时，我的代码会添加记录结尾。

以下是我如何创建用户并进入 userdetails

```
MembershipCreateStatus createStatus;
MembershipUser newUser = Membership.CreateUser(txtUserName.Text, txtUserPass.Text, null, null, null, true, out createStatus);

if (newUser != null)
{
  string userid = Helpers.TranslateOraceEndianUserID(new Guid(newUser.ProviderUserKey.ToString()));

  UserDetailsBAL.AddUserDetails(userid, 2)
} 
```

在 AddUserDetails 中，我只是在用户详细信息表中插入记录。

最糟糕的部分是`OraDAL.Select`我之前在帖子中提到的方法中生成的查询。在 asp.net 中运行时的相同查询为 usertype 1 返回 null，当我将其从`query`变量（如上面的屏幕截图所示）复制粘贴到 sql developer 时返回一行。

# sql - 对每一行进行多次插入

> ID：14851879
> 
> 赞同：0
> 
> 时间：2013-02-13T10:53:50.880
> 
> 标签：sql, tsql, insert

简而言之，我的问题是如何在没有游标（伪代码）的 t-sql 2012 中执行以下操作：

```
for each r in input_list:

    insert into t1(...) ...

    if (r.field1 is not null)
        insert into tA(...) (...@@identity ...   r.field1) ... 

    else if (r.field2 is not null)
        insert into tB(...) (...@@identity...    r.field2)  ... 
```

长问题：

假设我有以下 3 个表，模拟对象可以是文件或目录的事实。

```
obj(id int, creation_date datetime)  -- all objects have a creation date.
file(id int, id_obj int, path nvarchar(max))  -- id_obj is a foreign key to obj
dir(id int, id_obj int, path nvarchar(max), shared bit) -- id_obj is a foreign key to obj 
```

我需要编写一个存储过程，它采用“逻辑对象”列表（可以表示文件或目录）并且必须将它们添加到数据库中，即它必须为每个逻辑对象创建 1）obj 中的一行， 2）文件或目录中的一行（取决于逻辑对象是代表文件还是目录）。

为了编写这个存储过程，我创建了一个表示逻辑对象的表参数。这必须能够表示文件和目录，因此它必须包含文件和目录的（逻辑）字段的合并，如下所示：

```
create type logicalObj as table(
                                dirPath nvarchar(max) null, 
                                dirShared bit null,  
                                filePath nvarchar(max) null
                               ) 
```

我的存储过程是使用表值参数定义的，如下所示：

```
create procedure foo 
       -- this way the user can pass a list of logical objects to the stored proc
   @lo logicalObj readonly  .

as
begin
...
end 
```

现在在程序主体中，我认为我需要执行类似（伪代码）的操作：

```
for each lo in @lo:

    insert into obj(creation_date)
        values (curdate())

    if lo.dirPath is not null
        insert into dir(id_obj, path, shared)
        values (@@identity, lo.dirPath, 1 )
    else if lo.filePath is not null
        insert into file(id_obj, path)
        values (@@identity, lo.dirPath ) 
```

我的问题：如何在没有游标的情况下做到这一点？如果需要，可以使用 t-sql 2012 独有的功能（例如序列）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:12:27.327

您可以使用[`output`子句](http://msdn.microsoft.com/en-gb/library/ms177564.aspx)从第一个基于集合的插入中捕获具有标识值的多行。然后，您可以使用[`ROW_NUMBER()`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)子句将这些捕获的输出值与原始`@lo`变量中的行关联起来。

它会是这样的：

```
declare @IDs table (ID int not null)
insert into obj(creation_date)
output inserted.id into @IDs
select curdate() from @lo --Just makes sure there's one row per row in @lo

;with NumberedIDs as (
     select ID,ROW_NUMBER() OVER (ORDER BY ID) as rn from @IDs
), NumberedObjects as (
     select *,ROW_NUMBER() OVER (ORDER BY dirPath,filePath) as rn from @lo
)
insert into dir (id_obj, path, shared)
select nid.ID,no.dirPath,no.dirShared
from NumberedObjects no
       inner join
     NumberedIDs nid
       on
         no.rn = nid.rn
where
   no.dirPath is not null

;with NumberedIDs as (
     select ID,ROW_NUMBER() OVER (ORDER BY ID) as rn from @IDs
), NumberedObjects as (
     select *,ROW_NUMBER() OVER (ORDER BY dirPath,filePath) as rn from @lo
)
insert into file (id_obj, path)
select nid.ID,no.filePath
from NumberedObjects no
       inner join
     NumberedIDs nid
       on
         no.rn = nid.rn
where
   no.filePath is not null 
```

重要的是在底部的两个插入中完全查询`@lo`并且`NumberedObjects`不要过早过滤，以便行号保持匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:12:06.950

为什么不只做三个插入呢？

像这样的东西：

```
INSERT into obj(creation_date)
SELECT curdate() FROM @lo WHERE (lo.dirPath is not null) OR (lo.dirPath is null AND lo.filePath is not null)

insert into dir(id_obj, path, shared)
SELECT @@identity, lo.dirPath, 1 FROM @lo WHERE lo.dirPath is not null

insert into file(id_obj, path)
SELECT @@identity, lo.dirPath, 1 FROM @lo lo WHERE lo.dirPath is null AND lo.filePath is not null 
```

# excel - Excel 2010 中 Application.ScreenUpdating 值的生命周期是多少？

> ID：14851881
> 
> 赞同：3
> 
> 时间：2013-02-13T10:53:59.727
> 
> 标签：excel, vba

据我所知，Application.ScreenUpdating = true 值会一直保持到 Application.ScreenUpdating = false 设置为止。但是这个值的“寿命”是多少？是在打开工作表的过程中开始和结束的过程，还是？

做了一个类来保持 ScreenUpdating 值与我的需求一致：

*   初始化类
*   设置 ScreenUpdating = False
*   在程序结束或出现错误的情况下，将值恢复为 True。

该类可以处理这种情况。

有时需要相反：

*   初始化类

*   设置 ScreenUpdating = True

*   在程序结束或出现错误的情况下，将值恢复为 False。

    我在这里遇到了麻烦；该类正确设置值 ScreenUpdating = false，但是当该类获得 ScreenUpdating 的“实际”值时，它始终为 true。没有其他过程或插件可以更改该值。

准备了一张[测试表](https://www.dropbox.com/s/fch92jtaeactc6d/ApplicationScreenUpdate.xlsm)来显示以上几点。从“suCaller”按钮上方的下拉列表中选择 ScreenUpdating 的值。

*   选择 False 并按下按钮。
*   正如预期的那样，设置 False 之前的值是 True。
*   测试数据是从另一个显示 ScreenUpdating 新值 (False) 的过程填充的。
*   数据填充后，该值重置为 True。
*   再次按下按钮，**“实际”值为 True，如预期的那样**。
*   做很多次，价值观应该没问题。

现在选择 True 并按下按钮。

*   设置 True 之前的值如预期的那样为 True（这是上面的值）
*   再次填充测试数据，显示 ScreenUpdating 新值 (True)
*   数据填充后，该值重置为 False。
*   再次按下按钮，**“实际”值为 True 而不是 False**。

该类只是否定新值来定义恢复值，所以结果让我对生命周期或如何设置 ScreenUpdating 值感到困惑。

我在课堂上做错了什么还是错过了一些基本理论？

类模块：ApplicationScreenUpdate

测试模块：测试

[测试表](https://www.dropbox.com/s/fch92jtaeactc6d/ApplicationScreenUpdate.xlsm) TIA，奥斯卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:19:10.613

据我所知，这是设计使然的行为（但我没有可引用的来源）。

虽然有经验的开发人员会期望该设置保持不变，但没有经验的开发人员可能不会意识到他们做了什么，并且如果他们在宏完成后尝试手动将数据放入工作表中，他们会认为 excel 已损坏。

您可以尝试禁用应用程序事件，因为有时它们可​​以重置该值，您也可能想在将更新设置为 false 后尝试写入一个值，但我怀疑该值会在宏完成后出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T21:42:42.637

已发现 ScreenUpdating 或 DisplayAlerts 值的生命周期是修改该值的顶级过程。在程序结束时；即使该值设置为 false，此属性的值也始终恢复为 TRUE。

另一方面，EnableEvents 或 Calculation 在值被修改的过程结束时保留其值，为 TRUE 或 FALSE。

打开此[工作簿](https://www.dropbox.com/s/6239m72d5epiiyo/ApplicationProperties_00.xlsm)并按以下顺序运行方法：

*   测试假
*   测试电流值
*   测试值
*   测试电流值
*   恢复值
*   测试电流值

运行每种方法后，请查看工作表中的值。

无法确认应用程序属性会修改其他属性的值。但正如詹姆斯所写，有些人“通过设计”改变了自己的价值

# postgresql - 在 Heroku Postgres 上管理独立数据库的可编程方式

> ID：14851882
> 
> 赞同：10
> 
> 时间：2013-02-13T10:54:01.540
> 
> 标签：postgresql, heroku

是否有任何可编程的方式来管理 Heroku Postgres 上的独立数据库？尽管它为它提供了一个不错的 Web UI，但它不是可编程的（至少没有任何 hack）。Heroku 似乎可能为它提供 HTTP API 或类似的东西，但我找不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:37:01.610

Heroku Postgres 具有可通过[命令行工具](https://devcenter.heroku.com/articles/heroku-postgresql#using-the-cli)访问的 API以及基于 Web 的简单 UI。

如果您愿意，您也可以破解[Ruby 客户端代码。](https://github.com/heroku/heroku)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:56:26.217

简短的回答是“不”。更长的答案是“希望在不久的将来，但我们没有预计到达时间”。

# java - 来自进程 id pid 的 LInux java 类

> ID：14851884
> 
> 赞同：1
> 
> 时间：2013-02-13T10:54:05.940
> 
> 标签：java, linux, centos

我是linux的新手。我试图找到一个显示 pid 和 java 类的命令。

我试过：

```
ps -C java -o pid 
```

但它只向我展示了 pid，而不是 java 类。

所以我使用了不同的命令：

```
ps -ef | grep java" 
```

它向我展示了一个完整的 JAR 文件库和相关的 java 类。但是，我不需要所有这些信息，我只需要显示 pid 和 java 类。

我面临的问题是有时java进程占用100M内存，我只能通过使用linux命令知道带有命令java的pid：

```
top 
```

但它找不到哪个 java 程序对此负责。它将帮助我调试该 java 文件的内存泄漏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:11:41.087

使用`jps`Sun Java 提供的 java 命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T11:13:56.817

```
ps aux | grep java 
```

试试这个命令，你可以列出java进程。[或者]

JPS 会有所帮助

[JPS,JSTAT,JMAP,JSTACK,JHAT](http://www.ibm.com/developerworks/java/library/j-5things8/index.html)

您可以运行 jps 命令，它将显示 pid 值，并根据这些 pid 值执行其他命令。

# cordova - 背景图像 phonegap jquery mobile

> ID：14851890
> 
> 赞同：1
> 
> 时间：2013-02-13T10:54:20.063
> 
> 标签：cordova, jquery-mobile, background

我的 phonegap 应用程序中有背景，我更新了图像，但现在我在我的应用程序中看不到图像。

如果我用浏览器打开但不在应用程序中打开，它工作正常。

背景颜色在应用程序中工作正常

我试试

```
.ui-page{
    background-image:url('../img/bg.jpg');
} 
```

和

```
.ui-content{
    background-image:url('../img/bg.jpg');
} 
```

这可能是路径问题

我有：

```
assets/www/index.html
assets/www/css/style.css
assets/www/img/bg.jpg 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:14:57.210

尝试 `background-image:url('img/bg.jpg');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:50:54.507

@ant试试这样，它可能对你有帮助，

背景：url(../images/home-icon.png) 不重复；

# jquery - jQuery UI 选项卡 - 链接到同一个 DIV 集的多个实例

> ID：14851894
> 
> 赞同：1
> 
> 时间：2013-02-13T10:54:37.960
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

```
Note: I want to use .tabs() and avoid NOT using .tabs(), and writing everything 
separately to handle the fades and tab selections like others have found. 
```

正如标题所示，我希望在页面上的*两个单独位置*有一个选项卡列表，但我希望它们*与相同的数据一起工作*。

问题是使用类设置两个 ul`nav`会导致冲突，因此可以一次选择两个选项卡：一个在左侧，一个在右侧。

![标签问题](../Images/a24de5942722002e9c74eecdb2e5aa8d.png) *看看每个选项卡集如何不能一起工作并且可以单独选择？*

**一组工作标签的代码**

**HTML**

```
<div id="content">
    <!-- Tab data gets inserted here -->
    <div id="overlay"><div class="overlay"></div></div>

    <!-- First Tab Set -->
    <!-- NOTE: This will appear on the left -->
    <div class="navigation nav-left">
        <ul class="nav">
            <li>Link1</li>
            <li>Link2</li>
        </ul>
   </div>

   <!-- Data for the tabs - this works! -->
   <div id="container">
       <!-- Link 1 Tab -->
       <div>This is data for Link 1</div>
       <div>This is data for Link 2</div>
   </div>
</div> 
```

**jQuery**

```
$(function() {
    $("ul.nav").tabs("div#container > div", {
    effect: 'fade',
    fadeOutSpeed: "500"});
}); 
```

如您所见，上面的 jQuery 设置选项卡`ul.nav`以分别链接到其中的每个 div `#container`。我页面左侧的这组选项卡有效！

**困难的部分**

如何更改此设置以允许我的页面上有两组选项卡**？**

我想要第二个`<div class="navigation nav-right">`——*注意 nav-right*将这些选项卡放在页面的右侧。

第二组选项卡必须*与*第一组选项卡一起使用，因此一次只能激活一个选项卡，并取消其他选项卡选择。

**我的代码导致两个选项卡集并发问题**

**HTML**

```
 <!-- First Tab Set -->
    <!-- NOTE: This will appear on the left -->
    <div class="navigation nav-left">
        <ul class="nav">
            <li>Link1</li>
            <li>Link2</li>
        </ul>
   </div>

   <!-- Second Tab Set (Attempt) -->
   <!-- NOTE: I want nav-right here -->
   <div class="navigation nav-right">
        <ul class="nav">
            <li>Link1</li>
            <li>Link2</li>
        </ul>
   </div>

   <!-- Data for the tabs -->
   <div id="container">
       <!-- Link 1 Tab -->
       <div>This is data for Link 1</div>
       <div>This is data for Link 2</div>
       . . .
       <div>This is data for Link 5</div>
   </div> 
```

**最后的想法**

我宁愿希望不必编写自己的 jQuery Tabs 函数，`fadeIn()`并且`fadeOut()`- 我能做些什么来完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:30:32.110

根据供应商的说法`.tabs()`- 他“不会被打扰”更新链接到同一 DIV 集的多个选项卡实例。

我唯一的选择是滚动我自己的代码，完全取消`.tabs()`并执行我自己的`.fadeOut()`，`.fadeIn()`以及`.load()`在一个大型函数调用中组合的函数。

这样做的好处是我确切地知道它是如何工作的，并且可以在将来轻松添加，我建议花一点时间（不会花费太长时间）自己做。

如果所有者确实决定包含此功能，我将更新我的帖子，但截至 2013 年初，目前还没有以`.tabs()`这种方式使用插件的方法。

# android - Android App 使离线和在线工作？我应该以哪种方式同步数据？

> ID：14851895
> 
> 赞同：2
> 
> 时间：2013-02-13T10:54:38.217
> 
> 标签：android, database, sqlite, synchronization, offline

我正在创建可以离线和在线工作的应用程序......但是我应该以哪种方式将我的数据从 sqlite 数据库同步到服务器。我正在使用 Web 服务来接受应用程序请求，但问题是我在 sqlite 数据库中有多个表，这些表依赖于父子关系，并且每个记录都有 id 列，但在服务器端，相同的表结构与 Id 列存在，它是由服务器自动生成但在应用程序中的本地数据库上的标识列我不能将 Id 用作 AUTOINCREMENT.... bcz 它会配置 id....

另一种情况 - 我必须在服务器上插入第一个主表，然后是它的子表。并获取在服务器上生成的 id ...获取本地数据库并更新它。

我应该如何保持数据一致性......请帮助我

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-13T14:09:04.403

使用谷歌 Firebase 或 CouchDBLite

# c# - 在实例类中包装静态非托管库

> ID：14851897
> 
> 赞同：2
> 
> 时间：2013-02-13T10:54:41.603
> 
> 标签：c#, c++, static, pinvoke

我在我的代码（C#）中使用了一个非托管库（用 C++ 编写）。库提供的所有方法都是静态的。我使用 P/Invoke 与库进行通信。这是图书馆的工作方式：

1.  在调用所有其他方法之前，您需要调用一个**初始化**方法（这需要一个参数，并且该参数只能在初始化期间设置）。
2.  有一种**设置**方法可以更改库的不同设置，如果您需要更改库的工作方式（更像是微调库），则需要运行此方法。可以随时更改设置。
3.  有一种方法接受一个数字数组，然后返回另一个数组。我们称之为**中间操作**。这个操作需要一段时间，所以我想缓存它并防止每次都计算它。
4.  *前一个方法（中间操作*）返回的数组是创建结果的最后一个方法的输入。让我们称之为**主要操作**

我通常希望有不同的库实例，一个具有**设置 A**，另一个具有**设置 B**。由于图书馆是静态的，我不能。

如何将此库包装在实例类中？可能，我的类的每个实例都需要在内存中加载库的新实例（因为库本身的每个实例都是静态的，并且您不能在库的一个实例中具有两种不同的设置）。

除了重写库（因为我无法控制它的编写方式）之外，是否有解决方法？

而且我真的很希望能够处理对操作方法的并行调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:07:15.727

这是问题评论中所说内容的示例实现：

```
public class Library
{
    private static class Native
    {
        [DllImport("foobar.dll")]
        public static extern void Initialize();

        [DllImport("foobar.dll")]
        public static extern void Settings(int param1, string param2);

        [DllImport("foobar.dll")]
        public static extern float[] Intermediate(float[] input);

        [DllImport("foobar.dll")]
        public static extern void MainMethod(float[] main);
    }

    private static readonly object sync = new object();

    private int param1;
    private string param2;

    static Library()
    {
        Native.Initialize();
    }

    public void Settings(int param1, string param2)
    {
        this.param1 = param1;
        this.param2 = param2;
    }

    public float[] Intermediate(float[] input)
    {
        lock (sync)
        {
            Native.Settings(param1, param2);
            return Native.Intermediate(input);
        }
    }

    public void MainMethod(float[] input)
    {
        lock (sync)
        {
            Native.Settings(param1, param2);
            Native.MainMethod(input);
        }
    }
} 
```

最重要的事情

*   Settings 不会立即调用“真实”设置，而是存储值
*   当调用 Intermediate 和 MainMethod 时，它们会应用之前的设置存储
*   Both calls are synchronized on a static object to avoid that calls to different instances of Library running on different threads interfere.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:48:02.333

As I suggested in my comment, if palatalization is required, the only workaround I can think of is to go with a multi-process approach: wrapping each "settings" in an independent process. Of course that will make communication and data-traffic between processes the new candidate for a bottle-neck (whether you will be using WCF named pipes, Remoting, WM_COPYDATA or sockets).

# wpf - 如何将 DataGridTemplateColumn.ClipboardContentBinding 绑定到放置在其中的 Combobox 的 SelectedItem？

> ID：14851900
> 
> 赞同：2
> 
> 时间：2013-02-13T10:54:44.970
> 
> 标签：wpf, binding, wpfdatagrid, datagridtemplatecolumn

我需要绑定`DataGridTemplateColumn.ClipboardContentBinding`到`SelectedItem`其中的一个`Combobox`。事实上我需要绑定`Combobox.SelectedItem`到当前行。`DataGrid`我尝试了下面的代码，但它不起作用。

```
 <DataGrid ItemsSource="{Binding CommentCollection}">
    <DataGrid.Columns>
       <DataGridTemplateColumn Header="Description" Width="*">
           <DataGridTemplateColumn.CellTemplate>
              <DataTemplate>
                 <ComboBox DisplayMemberPath="Name" 
                   ItemsSource="{Binding DataContext.CommentCollection,Source={x:Reference GrdSpecDataContext}}"
                   SelectedItem="{Binding .,Mode=TwoWay}"/>
               </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
          </DataGridTemplateColumn>
      </DataGrid.Columns>
  </DataGrid> 
```

请不要告诉我我不需要放在`ComboBox`这里或类似的东西。这是一个简单的示例，但我需要知道它。

# javascript - 自动完成之间的 JQuery 共享功能

> ID：14851901
> 
> 赞同：0
> 
> 时间：2013-02-13T10:54:47.390
> 
> 标签：javascript, jquery, jquery-ui

示例 JQuery 自动完成代码。我想要一个可以由两个单独的自动完成实例调用的函数，它允许我共享相同的功能而无需重写代码。

```
$("tags1").autocomplete(
{
               source: availableTags
}); 
```

以确保这一点很清楚。我不想重复代码。因此，当我在其他地方使用另一个自动完成时，我想引用自动完成中包含的代码而不是重复代码（我只是重复了自己）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:08:13.813

您可以发出手动 ajax get 请求来获取数据，将其存储在一个变量中，然后只为两个自动完成功能存储该变量。

```
var cache = {},
    requestData = function(request, response) {
        var term = request.term;
        if(term in cache) {
            response(cache[term]);
            return;
        }

        $.getJSON("search.php", request, function(data, status, xhr) {
            cache[term] = data;
            response(data);
        });
    };

$("#birds").autocomplete({
    minLength: 2,
    source: requestData
});

$("#moreBirds").autocomplete({
    minLength: 2,
    source: requestData
}); 
```

来源：http: [//jqueryui.com/resources/demos/autocomplete/remote-with-cache.html](http://jqueryui.com/resources/demos/autocomplete/remote-with-cache.html)

但是你真的应该从服务器发送缓存头告诉客户端缓存请求的结果。然后，当第二个自动完成发出相同的请求时，浏览器将不必再次访问服务器。

这是一篇关于该主题的精彩文章：[https ://devcenter.heroku.com/articles/increasing-application-performance-with-http-cache-headers](https://devcenter.heroku.com/articles/increasing-application-performance-with-http-cache-headers)

# json - 什么是 JSONC？JSONC 和 JSON-C 有区别吗？

> ID：14851903
> 
> 赞同：49
> 
> 时间：2013-02-13T10:54:51.283
> 
> 标签：json

`JSONC`最近在 YouTube API 中遇到了这个术语。我浏览了网络，但没有发现太多关于它的信息。有人可以解释这两个是相同还是不同？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2019-04-16T12:49:05.983

还有由 Microsoft 创建并由 Visual Studio Code 使用的[`jsonc`又名“带注释的 JSON ”。](https://code.visualstudio.com/docs/languages/json#_json-with-comments)它的逻辑可以在[这里](https://github.com/Microsoft/node-jsonc-parser)找到，唉，没有详尽的规范（尽管我想在这方面被证明是错误的）。

最重要的是，[这个项目有一个实际的规范，也称为`jsonc`，但它所做的远不止添加注释](https://komkom.github.io/)。

虽然这些技术肯定有用途，但建议进行一些批判性思维。包含评论的 JSON 不是 JSON。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-25T05:37:34.600

JSON-C 似乎只是主要针对 C 开发的 JSON 的一种变体。即，来自开源文档，“JSON-C**实现了一个引用计数对象模型**，它允许您轻松地在 C 中构造 JSON 对象，将它们输出为 JSON 格式的字符串，并将 JSON 格式的字符串解析回 JSON 对象的 C 表示形式。” [参考^1](https://github.com/json-c/json-c/wiki)

从 YouTube API 的角度来看（特别是版本 2，而不是新版本 3），JSON-C 响应只是 JSON 响应的压缩版本（删除“重复、不相关或容易计算的值”）。[参考^2](https://developers.google.com/youtube/2.0/developers_guide_jsonc#Exclude_Elements)

为什么 JSON 响应会有“重复、不相关或容易计算的值”值？因为它是在无损转换中将原始 ATOM XML 格式直接转换为 JSON。[您可以在此处](https://developers.google.com/youtube/2.0/developers_guide_jsonc#Comparing_JSON_and_JSONC)找到更多详细信息。

不过，我建议使用YouTube 数据 API 的[第 3 版。](https://developers.google.com/youtube/v3/)它更容易使用。=)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-08-31T13:28:14.057

JSONC 是由 Tomás Corral Casas 创建的开源 Javascript API，用于减少在客户端和服务器之间传输的 JSON 数据量的大小。它使用两种不同的方法来实现这一点，`JSONC.compress`并且`JSONC.pack`. 更多信息可以在 JSONC Github 页面上找到：

[https://github.com/tcorral/JSONC](https://github.com/tcorral/JSONC)

# android - 如何在 Android 中将 PDF 转换为 HTML 页面？

> ID：14851909
> 
> 赞同：2
> 
> 时间：2013-02-13T10:55:07.600
> 
> 标签：android, pdf, apache-poi, docx4j

我需要在 android 中将 PDF 转换为 HTML 页面。在 StackOverFlow 上已经讨论了很多相反的情况。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:13:23.403

您可以在 stackoverflow 上参考这个问题，该问题已经讨论过 [Convert doc file to html using Apache Poi](https://stackoverflow.com/questions/12542498/convert-doc-file-to-html-using-apache-poi) 或 [http://www.technophileshub.com/906/how-to-embed-pdf-document-in-html-page](http://www.technophileshub.com/906/how-to-embed-pdf-document-in-html-page)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:57:11.817

您可以尝试使用 PDFBox 库：

[http://pdfbox.apache.org/](http://pdfbox.apache.org/)

# java - 用于自动测试不同组合的测试工具？

> ID：14851913
> 
> 赞同：0
> 
> 时间：2013-02-13T10:55:16.290
> 
> 标签：java, testing

我已经为 Java 编写了代码，我需要用各种不同的组合来测试这段代码。我尝试过使用[PICT](http://www.amibugshare.com/pict/help.html)工具，但是它只能在 Windows 中使用，我也想在 Linux 机器上进行测试。

Linux 中是否有任何类似于 PICT 的工具可以自动创建不同的组合来测试代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:13:09.130

有一个来自 Google 的 JUnit 扩展，链接[在这里](http://code.google.com/p/jcombinatorial/)
我没有专门使用它，但是通过适当的设计和算法可以进行组合测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:14:50.670

*   TestNG 测试可以使用[DataProviders](http://testng.org/doc/documentation-main.html#parameters-dataproviders)来测试各种输入组合。
*   [FitNesse](http://fitnesse.org/FitNesse.UserGuide.TwoMinuteExample)是一个验收测试库，它也可以帮助您进行多项测试。

# jquery - 在 jQuery 中对其执行动画时如何使用元素的属性？

> ID：14851920
> 
> 赞同：2
> 
> 时间：2013-02-13T10:55:50.490
> 
> 标签：jquery, animation

如果我有很多元素，可能看起来像：

```
<p class="test" data-left="250" data-bottom="55">Good morning.</p>
<p class="test" data-left="350" data-bottom="123">Good afternoon.</p>
<p class="test" data-left="290" data-bottom="300">Good night.</p> 
```

...等等，我怎样才能为它们设置动画？我最初尝试过：

```
$('.test').animate({
  left: $(this).attr('data-left'),
  bottom: $(this).attr('data-bottom')
}); 
```

但似乎`$(this)`这里没有上下文。有没有办法做到这一点？还是只是编写一个`.each()`循环来实现它？

**注意：**我们使用的是旧版本的 jQuery，因此使用`.attr()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:02:35.167

您必须遍历这些元素：

```
$('.test').each(function() {
    var $this = $(this);

    $this.animate({
        left: +$this.attr('data-left'),
        bottom: +$this.attr('data-bottom')
    });
}); 
```

我认为您可能还必须将无单位字符串解析为数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:01:14.253

你需要使用`.each()`

```
$('.test').each(function(){
   $(this).animate({
            left:$(this).attr('data-left'),
            bottom:$(this).attr('data-bottom')
   })
}); 
```

# c - C - 如何从标准输入读取字符串行或文件内存保存

> ID：14851925
> 
> 赞同：-1
> 
> 时间：2013-02-13T10:56:06.907
> 
> 标签：c, string, malloc, free, readline

我需要一个可以节省内存的读取线版本。我有这个“工作”的解决方案。但我不确定它在内存中的表现如何。当我启用`free(text)`它时，它适用于几行，然后出现错误。因此，尽管我 malloc 文本，但现在文本和结果都不会被释放。那是对的吗 ？为什么会这样？

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char* readFromIn()
{
    char* text = malloc(1024);
    char* result = fgets(text, 1024, stdin);
    if (result[strlen(result) - 1] == 10)
        result[strlen(result) - 1] = 0;
    //free(text);
    return result;
} 
```

我有**很多**短线可以阅读，我还需要标准输入可以用`FILE*`句柄替换。我不需要重新分配文本，因为我只有短行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T10:59:57.823

`fgets`返回一个指向字符串的指针，因此在该`fgets`行之后，`result`将是与 . 相同的内存地址`text`。然后，当您打电话时，`free (text);`您将返回无效的内存。

完成后，您应该释放调用函数中的内存`result`

你也可以通过构造你的代码来传递一个像这样的缓冲区来避免 malloc/free 的东西：

```
void parent_function ()
{
    char *buffer[1024];

    while (readFromIn(buffer)) {
        // Process the contents of buffer
    }
}

char *readFromIn(char *buffer)
{
    char *result = fgets(buffer, 1024, stdin);
    int len;

    // fgets returns NULL on error of end of input,
    // in which case buffer contents will be undefined
    if (result == NULL) {
        return NULL;
    }

    len = strlen (buffer);
    if (len == 0) {
        return NULL;
    }

    if (buffer[len - 1] == '\n') {
        buffer[len - 1] = 0;

    return buffer;
} 
```

如果您正在处理许多小的、短暂的项目，那么尝试避免 malloc/free 可能是明智的，这样内存就不会碎片化，而且它也应该更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T11:15:58.877

[`char *fgets(char *s, int size, FILE *stream)`](http://linux.die.net/man/3/fgets) *从流中最多读入一个小于 size 的字符并将它们存储到 . 指向的缓冲区中`s`。在 EOF 或换行符后停止读取。如果读取了换行符，则将其存储到缓冲区中。终止的空字节 ( `'\0'`) 存储在缓冲区中的最后一个字符之后。*

***返回***值**：*在成功、**错误或文件结束时返回，而没有读取任何字符。**`s``NULL`***

 **因此，您的代码存在 2 个关键问题：

1.  你不检查返回值`fgets`
2.  您想释放存储此字符串的内存并返回指向此内存的指针。访问这样一个指针（悬空指针）指向的内存会导致**未定义的行为**。

您的函数可能如下所示：

```
public char* readFromIn() {
    char* text = malloc(1024);
    if (fgets(text, 1024, stdin) != NULL) {
        int textLen = strlen(text);
        if (textLen > 0 && text[textLen - 1] == '\n')
            text[textLen - 1] == '\0';     // getting rid of newline character
        return text;
    }
    else {
        free(text);
        return NULL;
    }
} 
```

然后这个函数的调用者应该负责释放这个函数的返回值指向的内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T12:56:22.950

我知道你提到过这些行很短，但所提供的解决方案都不适用于长度超过 1024 的行。正是出于这个原因，我提供了一个解决方案，它将尝试读取整行，并在没有足够空间时调整缓冲区的大小。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#define MINIMUM_CAPACITY 16

size_t read_line(char **buffer, size_t *capacity) {
    char *buf = *buffer;
    size_t cap = *capacity, pos = 0;

    if (cap < MINIMUM_CAPACITY) { cap = MINIMUM_CAPACITY; }

    for (;;) {
        buf = realloc(buf, cap);
        if (buf == NULL) { return pos; }
        *buffer = buf;
        *capacity = cap;

        if (fgets(buf + pos, cap - pos, stdin) == NULL) {
            break;
        }

        pos += strcspn(buf + pos, "\n");
        if (buf[pos] == '\n') {
            break;
        }

        cap *= 2;
    }

    return pos;
}

int main(void) {
    char *line = NULL;
    size_t size = 0;

    for (size_t end = read_line(&line, &size); line[end] == '\n'; end = read_line(&line, &size)) {
        line[end] = '\0'; // trim '\n' off the end
        // process contents of buffer here
    }

    free(line);
    return 0;
} 
```

理想的解决方案应该能够使用 1 字节的固定缓冲区进行操作。然而，这需要对问题有更全面的了解。一旦实现，采用这样的解决方案将获得最佳解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T11:17:23.883

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char *readFromIn(FILE *fp)
{
    char text[1024];
    size_t len;

    if (!fgets(text, sizeof text, fp)) return NULL;
    len = strlen(text);

    while (len && text[len-1] == '\n') text[--len] = 0;

    return strdup(text);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T12:58:28.190

为什么没有人提议将缓冲区从堆移动到堆栈？这是我现在的解决方案：

```
char input[1024]; // held ready as buffer for fgets

char* readFromIn()
{
    char* result = fgets(input, 1024, stdin);
    if (result == null)
        return "";
    if (result[strlen(result) - 1] == '\n')
        result[strlen(result) - 1] = 0;
    return result;
} 
```**

# android - 异步任务返回按钮

> ID：14851926
> 
> 赞同：0
> 
> 时间：2013-02-13T10:56:16.870
> 
> 标签：android, android-asynctask

能够成功地从服务器获取数据。如果数据成功，则导航 NextScreen.1。如果在获取数据时按下后退按钮，则 AsyncTask 对话框消失，但一段时间后它会导航到 Nextscreen 活动。所以如果我按 backbuttob 异步任务必须取消，它不应该导航到下一个活动。

```
 public class Screenone extends Activity {
    EditText user,pass;
    Button login;           
    InputStream is;
    String productResponse;
    EditText edit;   
    int responseCode;               

   @Override
   protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_NO_TITLE);  
    setContentView(R.layout.mainlog);       

    user = (EditText) findViewById(R.id.user);
    pass =  (EditText) findViewById(R.id.password);     
    login = (Button) findViewById(R.id.login);

   }    

    login.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub      

            if ((user.getText().length() > 0)
                    && (pass.getText().length() > 0) ) {                
                new Load().execute(Status);
            }
                    }
    });

   }

   private class Load extends AsyncTask<String, String, String> {

    private ProgressDialog Dialog = new ProgressDialog(LoginScreen.this);
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
        Dialog.setMessage("Please wait...");
        Dialog.show();
    }

    protected String doInBackground(String... status) { 
                try {
            HttpClient httpclient = new DefaultHttpClient();                     

     HttpPost post = new HttpPost("---url---");                     
            responseCode =httpResponse.getStatusLine().getStatusCode();

        }           

        catch (Exception e) {           
                            }                     
        return null;
    }

    protected void onPostExecute(String Result) {
        // TODO Auto-generated method stub
        super.onPostExecute(Result);      

            if (responseCode==200) {            
            Dialog.dismiss();           

            Intent intent =new Intent(Screenone.this, NextScreen.class);
            startActivity(intent);                          
                        }           

                            }               
            }

   public void onBackPressed() {
    // TODO Auto-generated method stub
    super.onBackPressed();

     moveTaskToBack(true);

   }

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:00:23.023

在从当前 Activity 移回之前，您需要取消 AsyncTask、关闭 ProgressDialog 并中止 HttpPost。试试看：

```
@Override
public void onBackPressed() {
     if(Load!=null){
        if(!Load.getStatus() == AsyncTask.Status.FINISHED){
           // first abort Httppost request 
           // post.abort();   
           httpclient.getConnectionManager().shutdown();

           // now dismiss ProgressDialog
            if (Dialog!=null&&Dialog.isShowing()) {
                 Dialog.dismiss();
             }
           // now cancel AsyncTask if running
            if(Load.getStatus() == AsyncTask.Status.RUNNING){
              Load.cancel(true);
             }
         }
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:36:16.350

好的，问题是您没有参考您的异步任务。尝试在 Activity 中为 asynctask 创建一个属性：

```
private Load myAsyncTask; 
```

现在在您的 onClick 方法中：

```
myAsyncTask=new Load();

myAsyncTask.execute(Status); 
```

最后在你的 onBackPressed 中：

```
 public void onBackPressed() {
    super...
    if(myAsyncTask!=null)
         myAsyncTask.cancel(true);
 } 
```

# php - 外部 JavaScript 在本地主机上工作但不在远程主机上？

> ID：14851929
> 
> 赞同：0
> 
> 时间：2013-02-13T10:56:32.037
> 
> 标签：php, javascript, webserver

这是网站：[http ://www.hfwebdesign.com/](http://www.hfwebdesign.com/)

我收到此错误：`Uncaught TypeError: Object [object Object] has no method 'flexslider'`

但在我的本地主机中，它运行良好。

这是`<head>`（调用脚本的地方）：

```
<head>
<meta charset="<?php bloginfo( 'charset' ); ?>" />
<meta name="viewport" content="width=device-width" />
<title><?php wp_title( '|', true, 'right' ); ?></title>
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="pingback" href="<?php bloginfo( 'pingback_url' ); ?>" />
<link rel="stylesheet" type="text/css" media="all" href="<?php bloginfo( 'template_url' ); ?>/js/flexslider/flexslider.css" />
<link rel="icon" type="image/png" href="<?php bloginfo( 'template_url' ); ?>/favicon.ico" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="<?php bloginfo( 'template_url' ); ?>/js/flexslider/jquery.flexslider-min.js"></script>
<?php // Loads HTML5 JavaScript file to add support for HTML5 elements in older IE versions. ?>
<!--[if lt IE 9]>
<script src="<?php echo get_template_directory_uri(); ?>/js/html5.js" type="text/javascript"></script>
<![endif]-->
<?php wp_head(); ?>
</head> 
```

**页脚：**

```
<script type="text/javascript">
  var $j = jQuery.noConflict();
  $j(document).ready(function() {
    $j('.flexslider').flexslider({
      animation: "slide"
    });
  });
</script>

</body> 
```

可能是代码在远程主机中的 Web 服务器中中断，而不是在我的本地主机中（例如，它们是 LAMP/APACHE 的不同版本？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:07:11.220

尝试从以下位置更改呼叫地点：

```
<script src="http://www.hfwebdesign.com/wp-content/themes/twentytwelve/js/flexslider/jquery.flexslider-min.js.pagespeed.jm.noGKd8vLzs.js"></script>
<script type='text/javascript' src='http://www.hfwebdesign.com/wp-includes/js/jquery/jquery.js,qver=1.8.3.pagespeed.jm.1SksPi3j41.js'></script> 
```

至：

```
<script type='text/javascript' src='http://www.hfwebdesign.com/wp-includes/js/jquery/jquery.js,qver=1.8.3.pagespeed.jm.1SksPi3j41.js'></script>
<script src="http://www.hfwebdesign.com/wp-content/themes/twentytwelve/js/flexslider/jquery.flexslider-min.js.pagespeed.jm.noGKd8vLzs.js"></script> 
```

不确定，但尝试也不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-19T17:25:59.093

检查脚本路径中的大小写。如果脚本文件夹名称是“flexSlider”，并且脚本中的 src 路径是“flexslider”，它将在 windows（大多数本地主机）上工作，但在 linux（大多数服务器）上不工作。它取决于操作系统，而不是服务器软件，因此在 windows 上运行例如 XAMPP 将起作用，因为 windows 以不区分大小写的方式与路径一起工作。

# ruby-on-rails - “错误：无法生成 PDF！” 与 WickedPDF

> ID：14851932
> 
> 赞同：3
> 
> 时间：2013-02-13T10:56:48.553
> 
> 标签：ruby-on-rails, wicked-pdf

**错误：**

```
RuntimeError in BillsController#printing

Failed to execute:
"/usr/local/bin/wkhtmltopdf" -q        "file:////var/folders/j5/2wx0qdjj7kl7vbvq3m2z4rj00000gn/T/wicked_pdf20130213-41259-x9dcb5.html" "/var/folders/j5/2wx0qdjj7kl7vbvq3m2z4rj00000gn/T/wicked_pdf_generated_file20130213-41259-mg4iqp.pdf" 
Error: PDF could not be generated! 
```

**账单控制器：**

```
 # GET /bills
  # GET /bills.json
  def print
    respond_to do |format|
      format.html 
      format.pdf do
        render :pdf => "rechnung_id",
               :layout => "printing.pdf",
               :show_as_html => params[:debug]
      end
    end
  end 
```

作为视图，我创建了一个 printing.html.erb 和一个 printing.pdf.erb - 并尝试了两者。

我已经将 wkhtmltopdf 安装为二进制和 gem。当我尝试使用 gem 时（注释掉该行：

```
WickedPdf.config = { :exe_path => '/usr/local/bin/wkhtmltopdf'} 
```

有些东西似乎崩溃了，什么也没发生。当我使用二进制文件时，我得到错误显示在顶部。我的 gem 的版本是：wicked_pdf (0.9.4) 和 wkhtmltopdf-binary (0.9.9.1)。

我正在寻求帮助 - 这就是我已经尝试过的：

1.  “捆绑更新”和“捆绑安装”
2.  在 9.9 版中安装了 wkhtmltopdf
3.  添加了 "Mime::Type.register "application/pdf", :pdf"

编辑：如果我使用终端并输入“wkhtmltopdf www.myHomepage.info myhomepage.pdf”它工作正常。“which wkhtmltopdf”给了我路径“/usr/bin/wkhtmltopdf”，但如果我想使用一个，它正在打开“wkhtmltopdf_darwin_386”并且网站冻结..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:50:55.807

现在我解决了这个问题。

我将控制器方法更改为：

```
 def printing
    @bills = Bill.find(params[:id])

    respond_to do |format|
      format.html
      format.pdf do
        render :pdf => "bill_#{@bills.id}",
               :wkhtmltopdf => '/usr/bin/wkhtmltopdf',
               :template => '/bills/printing.pdf.erb',
               :disposition => "inline"
               #:save_to_file => Rails.root.join('pdf', "rechnung_#{@bills.id}.pdf")
      end
    end
  end 
```

我不得不在 application.rb 中删除 WickedPDF 作为中间件：

```
require 'wicked_pdf'
config.middleware.use WickedPdf::Middleware, {} 
```

现在它按预期工作。

# php - php soap客户端如何发送多维数组复杂类型？

> ID：14851933
> 
> 赞同：0
> 
> 时间：2013-02-13T10:56:48.710
> 
> 标签：php, soap, soap-client

这是我想要生成的 xml，目前我希望每个标签和 taginfo 都被每个标签的 xml 标签包围，麻烦的是我从数据库中获取了一个列表，并且需要将此列表传递到
肥皂客户端？请问有人能帮帮我吗，谢谢

这就是我下面需要的

```
 <ns1:sendListRequest><ns1:updateType>FULL</ns1:updateType>   
<ns1:listVersion>1</ns1:listVersion><ns1:AuthorisationList> 

<ns1:Tag>tag1</ns1:Tag><ns1:Taginfo>web example</ns1:Taginfo>   
<ns1:Tag>tag2</ns1:Tag><ns1:Taginfo>web  example2</ns1:Taginfo> 
  </ns1:AuthorisationList></ns1:sendListRequest></env:Body></env:Envelope> 

 this what I get <ns1:Tag>tag1tag2</ns1:Tag> which is probably expected from array  I'm using
  soap request 
   while ($row = $db->getResult()) {

   $tags[] = $row['tags'];
 }

 $tags=implode($list);
 $response = $client->SendList(array('updateType' => 
 $updatetype,'listVersion'  =>     $listversion,'AuthorisationList' =>  
 array('Tag' => $tags, 'Taginfo' => $taginfo)); 
```

WSDL 文件

```
 <s:complexType name="SendListRequest">
    <s:annotation>
      <s:documentation>Defines the SendList.req PDU</s:documentation>
    </s:annotation>
    <s:sequence>
      <s:element name="updateType" type="tns:UpdateType" minOccurs="1" maxOccurs="1" />
      <s:element name="listVersion" type="s:int" minOccurs="1" maxOccurs="1" />
     <s:element name="AuthorisationList" type="tns:AuthorisationData" minOccurs="0" maxoccurs="unbounded">
            </s:sequence>
   </s:complexType>

   <s:element name="sendListRequest" type="tns:SendListRequest" />
  <s:element name="sendListResponse" type="tns:SendListResponse" />
  </s:schema>
 </wsdl:types>

    <wsdl:message name="SendListInput">
<wsdl:part name="parameters" element="tns:sendListRequest" />
   </wsdl:message>

   <wsdl:message name="SendListOutput">
<wsdl:part name="parameters" element="tns:sendListResponse" />
 </wsdl:message>

  <wsdl:portType name="Service">
   <wsdl:operation name="SendList">
  <wsdl:input message="tns:SendListInput" wsaw:Action="/SendList" />
  <wsdl:output message="tns:SendListOutput" wsaw:Action="/SendListResponse" />
  </wsdl:operation>

  </wsdl:portType>

    <s:complexType name="AuthorisationData">
    <s:sequence>
      <s:element name="Tag" type="tns:IdToken" minOccurs="1" maxOccurs="1"/>
      <s:element name="TagInfo" type="tns:TagInfo" minOccurs="0" maxOccurs="1"/>
    </s:sequence>
  </s:complexType>

  <s:simpleType name="UpdateType">
    <s:restriction base="s:string">
      <s:enumeration value="Different"/>
      <s:enumeration value="Full"/>
    </s:restriction>
  </s:simpleType>

  <wsdl:service name="Service">
  <wsdl:documentation></wsdl:documentation>
  <wsdl:port name="ServiceSoap12" binding="tns:ServiceSoap">
  <soap12:address location="http://Service/" />
  </wsdl:port>
  </wsdl:service>
  </wsdl:definitions> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:23:05.867

据我从 WSDL 中看到的 AuthorisationList 是 AuthorisationData 的序列，它本身是一个包含 Tag 和 TagInfo 的数组，所以我认为您的数组结构必须如下所示：

```
$toSend = array(
    'updateType' => $updatetype,
    'listVersion'  => $listversion,
    'AuthorisationList' => array(
        'AuthorisationData'=> array()
    )
);

// and this could be a way to add your db results:
while ($row = $db->getResult()) {
    // I can't see where you get the TagInfo from.
    $toSend['AuthorisationData'][] = array(
        'Tag'=>$row['tags'],
        'TagInfo'=> ? 
    ); 
} 
```

# pdfbox - 如何在 PDFbox 中使用 PDDestination 类？

> ID：14851935
> 
> 赞同：0
> 
> 时间：2013-02-13T10:56:52.440
> 
> 标签：pdfbox

如何`PDDestination`在 PDFbox 中使用类？方法是否 `getPagenumber()`会返回当前页码

谁能分享一下你的观点谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-18T16:03:47.423

or的用法与*iText*`PDDestination`的or`PDAction`非常相似。`PdfDestination``PdfAction`

 *因此，您可能需要先搜索*iText*示例。

特别是在*PDFBox*上，例如以下将第一个打开页面设为第 5 页。

```
PDDestination dest = new PDPageDestination();
// When you open this PDF, you will see page 5.
dest.setPageNumber(4)
PDActionGoTo action = new PDActionGoTo();
action.setDestination(dest);
document.getDocumentCatalog().setOpenAction(action); 
```*

# c# - 在 ac# .exe 的快捷方式中传递信息

> ID：14851937
> 
> 赞同：0
> 
> 时间：2013-02-13T10:56:56.553
> 
> 标签：c#, .net, wpf

我有一个 wpf c# 项目，我想通过其他编码人员看到的方式传递一些启动信息信息，只需查看他们的快捷方式

所以我看到的捷径是：

> X:\Test.exe /host=[服务器位置]/ **instance=0 /coid=%coid /userid=%oper**

我了解正在传递的内容，但我想了解 c# 项目如何以粗体形式获取信息，我猜想将其分配为字符串等。

我试图用谷歌搜索信息，但我不知道该主题的名称是什么

任何帮助 - 即使没有，这不能做也会有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:01:34.453

请参阅MSDN 上的[命令行参数教程](http://msdn.microsoft.com/en-us/library/aa288457%28v=vs.71%29.aspx)。

应用程序有一个入口点，`public static void Main(string[] args)`在这种情况下就是这样。参数包含命令行`args`参数，以空格分隔。

编辑：我的错，不知道 WPF 令人讨厌。看看这里：[WPF：支持命令行参数和文件扩展名](http://blogs.msdn.com/b/avip/archive/2008/10/27/wpf-supporting-command-line-arguments-and-file-extensions.aspx)：

```
protected override void OnStartup(StartupEventArgs e)
{
    if (e.Args != null && e.Args.Count() > 0)
    {
        this.Properties["ArbitraryArgName"] = e.Args[0];
    }

    base.OnStartup(e);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:06:54.673

在此示例中，程序在运行时采用一个参数，将参数转换为整数，并计算该数字的阶乘。如果未提供任何参数，则程序会发出一条消息，说明程序的正确用法。

```
public class Functions
    {
        public static long Factorial(int n)
        {
            if (n < 0) { return -1; }    //error result - undefined
            if (n > 256) { return -2; }  //error result - input is too big

            if (n == 0) { return 1; }

            // Calculate the factorial iteratively rather than recursively:

            long tempResult = 1;
            for (int i = 1; i <= n; i++)
            {
                tempResult *= i;
            }
            return tempResult;
        }
}

class MainClass
{
    static int Main(string[] args)
    {
        // Test if input arguments were supplied:
        if (args.Length == 0)
        {
            System.Console.WriteLine("Please enter a numeric argument.");
            System.Console.WriteLine("Usage: Factorial <num>");
            return 1;
        }

        try
        {
            // Convert the input arguments to numbers:
            int num = int.Parse(args[0]);

            System.Console.WriteLine("The Factorial of {0} is {1}.", num, Functions.Factorial(num));
            return 0;
        }
        catch (System.FormatException)
        {
            System.Console.WriteLine("Please enter a numeric argument.");
            System.Console.WriteLine("Usage: Factorial <num>");
            return 1;
        }
    }
} 
```

输出会`The Factorial of 3 is 6.`和这个应用程序的用法是一样的`Factorial.exe <num>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T11:05:47.030

您可以将命令行参数检索到`string[]`with

```
string[] paramz = Environment.GetCommandLineArgs(); 
```

# android - Android Jelly Bean 通知的奇怪行为

> ID：14851939
> 
> 赞同：1
> 
> 时间：2013-02-13T10:57:04.763
> 
> 标签：android, notifications, android-4.2-jelly-bean

我在我的应用程序中集成了通知，我处理了 2 种情况：使用 NotificationCompat.Builder 的 Pre Jelly bean 通知，以及使用 builder 的 Post Jelly bean 通知。这使我能够在后果冻豆版本中管理大文本和动作，并且可以工作 2 或 3 次，但奇怪的是，今天我在 JB 及以下版本中得到了相同的结果。

Pre JB 代码：

```
notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
    PendingIntent pint = PendingIntent.getActivity(context, 0, notificationIntent, 0);

    NotificationCompat.Builder notif = new NotificationCompat.Builder(context)
    .setContentTitle(nMessage.getTitle())
    .setContentText(nMessage.getMessage())
    .setTicker(nMessage.getTitle())
    .setWhen(when)
    .setPriority(NotificationCompat.PRIORITY_HIGH)
    .setSmallIcon(R.drawable.ic_ttd_petales)
    .setDefaults(Notification.DEFAULT_LIGHTS| Notification.DEFAULT_SOUND | Notification.DEFAULT_VIBRATE)
    .setAutoCancel(true)
    .setContentIntent(pint);
    notification= notif.build();
    notificationManager.notify(0, notification); 
```

JB及以上代码：

```
Builder bigTextNotification = new Notification.Builder(context)
        .setContentTitle(nMessage.getTitle())
        .setTicker(nMessage.getTitle())
        .setContentText(nMessage.getMessage())
        .setWhen(when)
        .setPriority(Notification.PRIORITY_HIGH)
        .setSmallIcon(R.drawable.ic_ttd_petales)
        .setDefaults(Notification.DEFAULT_LIGHTS| Notification.DEFAULT_SOUND)
        .setAutoCancel(true)
        .setContentIntent(pint);
        if(nMessage.getHasPhone()){
        Intent iCall = new Intent(Intent.ACTION_CALL,Uri.parse(nMessage.getPhone()));
        PendingIntent pintCall = PendingIntent.getActivity(context, 0, iCall, Intent.FLAG_ACTIVITY_NEW_TASK);
        bigTextNotification.addAction(R.drawable.ic_menu_call, context.getResources().getString(R.string.call_ttd), pintCall);
    }

    String[] recipients = new String[]{context.getResources().getString(R.string.default_email)};
    String subject = context.getResources().getString(R.string.about_offer);

    Intent iEmail = new Intent(android.content.Intent.ACTION_SEND);
    iEmail.setType("text/html"); 
    iEmail.putExtra(android.content.Intent.EXTRA_EMAIL, recipients);
    iEmail.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);
    PendingIntent pintEmail = PendingIntent.getActivity(context, 1, iEmail, Intent.FLAG_ACTIVITY_NEW_TASK);
    bigTextNotification.addAction(R.drawable.ic_menu_compose, context.getResources().getString(R.string.call_ttd), pintEmail);

    Notification notif = new Notification.BigTextStyle(bigTextNotification)
    .bigText(nMessage.getMessage())
    .build();
    notificationManager.notify(1000, notif); 
```

你有没有遇到过这样的行为或者我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-19T15:50:55.613

我有类似的经历：我会发送通知，它会显示内容文本而不是大文本。然后当我拔下 USB 时，它会显示展开的大文本。

现在请注意，当您插入 USB 时，您会收到一个持续的通知：“已作为媒体设备连接”。看看你是否在其他一些持续通知中得到相同的行为，例如“使用 GPS 搜索”。我愿意。（我的测试设备是三星 Galaxy Rush，它的垂直空间非常有限。）

因此，虽然 Android[通知文档](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#BigNotify)说只有顶部通知显示为展开状态，但看起来还有另一条规则：

**如果通知列表空间不足，它甚至会折叠最顶部的通知。**

您可以通过双指或单指拖动来展开折叠的通知，具体取决于操作系统版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:44:36.873

对于这个愚蠢的问题，我很抱歉，我不是使用模拟器来测试这个应用程序，而是真正的手机，奇怪的是，当插入 USB 调试电缆时，通知 (JB) 中没有任何动作，拔掉插头时，我们让我们的按钮工作:) 这解决了我的问题，但我不知道这种行为。

# java - SWT 表看不到其他列的项目

> ID：14851944
> 
> 赞同：1
> 
> 时间：2013-02-13T10:57:11.523
> 
> 标签：java, cursor, swt

我在代码上添加了列：

```
String[] titles = {"Nazwa", "Uzytkownik", "Haslo"};

for(int i=0; i<titles.length; i++){
    TableColumn column = new TableColumn(table, SWT.NULL);
    column.setText(titles[i]);
} 
```

接下来，我在所述列中添加了项目：

```
String[][] a = new String[passwords.length][3];
for(int i=0; i<passwords.length; i++){
    a[i] = passwords[i].split(":");
}
for(int i=0; i<passwords.length; i++){
    TableItem item = new TableItem(table, SWT.NULL);
    //item.setText(Integer.toString(i));            
    for(int j=0; j<a[i].length; j++){
        item.setText(j, a[i][j]);
    }
} 
```

现在，我想从第二列中获取选定的项目。我添加了 TableCursor 和 KeyListener：

```
tableCursor.addKeyListener(new KeyAdapter() {
    @Override
    public void keyPressed(KeyEvent e) {
        if(e.character == 'c') {
            Point p = tableCursor.getLocation();
            //for(int i=0; i<selection.length; i++){
                TableItem item = table.getItem(p);
                if(item != null){
                MessageBox message = new MessageBox(shell, SWT.ICON_ERROR);
                message.setMessage(item.toString());
                message.open();
            }

        }
    }
}); 
```

现在，例如，当我从第二列中选择*项目时，它看不到第二列中的任何内容，只看到第一列中的**项目*。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:23:32.327

问题是您尝试在表中查找所选项目/列的方式。

这是一个完全符合您要求的示例：

```
public static void main(String[] args)
{
    Display display = Display.getDefault();
    final Shell shell = new Shell(display);
    shell.setLayout(new FillLayout());

    final Table table = new Table(shell, SWT.NONE);
    table.setHeaderVisible(true);

    /* Create columns */
    for (int i = 0; i < 3; i++)
    {
        TableColumn col = new TableColumn(table, SWT.NONE);
        col.setText("Col " + i);
    }

    /* Create items */
    for (int i = 0; i < 10; i++)
    {
        TableItem item = new TableItem(table, SWT.NONE);
        item.setText(new String[] { "Row" + i + "Col1", "Row" + i + "Col2", "Row" + i + "Col3" });
    }

    /* Pack columns */
    for (int i = 0; i < 3; i++)
    {
        table.getColumn(i).pack();
    }

    table.addListener(SWT.MouseUp, new Listener()
    {
        @Override
        public void handleEvent(Event event)
        {
            Point pt = new Point(event.x, event.y);
            TableItem item = table.getItem(pt);
            if (item != null)
            {
                /* Iterate over all columns and check if event is contained */
                for (int col = 0; col < table.getColumnCount(); col++)
                {
                    Rectangle rect = item.getBounds(col);
                    if (rect.contains(pt))
                    {
                        System.out.println(item.getText(col));
                    }
                }
            }
        }
    });

    shell.pack();
    shell.open();
    while (!shell.isDisposed())
    {
        if (!display.readAndDispatch())
            display.sleep();
    }
    display.dispose();
} 
```

# eclipse - 在本地服务器或在线运行 Birt Eclipse BI Report

> ID：14851946
> 
> 赞同：0
> 
> 时间：2013-02-13T10:57:18.033
> 
> 标签：eclipse, localhost, reporting, birt

我已经使用 Birt Eclipse BI 工具创建了一个报告。但我试图在本地服务器或在线显示此报告。所以每个人都可以通过浏览器看到这个。是否可以在本地每台机器的浏览器中运行。？请报告专家看看。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T08:26:42.780

如果您需要提供对报告的基于 Web 的访问，您可以查看 Enterprise Reporting Server。该项目位于[https://www.github.com/stephanfeb/ers的 GitHub 上，您可以从](https://www.github.com/stephanfeb/ers)[http://www.computonium.com](http://www.computonium.com)下载预构建的 .war

斯蒂芬

# matlab - Matlab - 检查结构中的元素是否为空

> ID：14851949
> 
> 赞同：1
> 
> 时间：2013-02-13T10:57:29.880
> 
> 标签：matlab, if-statement

我有以下代码`matlab`

```
function test
C = struct;
    C.(sprintf('C%d',1)) = 1;
    C.(sprintf('C%d',2)) = [];
    if C.(sprintf('C%d',2)) == []
        disp('C2 is empty...')
    end
end 
```

我只想检查是否`C.(sprintf('C%d',2))`为空矩阵。但是，当我按如下方式运行程序时：

```
>> test 
```

我没有得到任何结果。

这是为什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:05:17.780

代替

```
if C.(sprintf('C%d',2)) == [] 
```

你应该使用

```
if isempty(C.(sprintf('C%d',2))) 
```

# perl - Perl WWW::Mechanize 将 url 存储在哈希中，除非它已经被找到

> ID：14851951
> 
> 赞同：0
> 
> 时间：2013-02-13T10:57:34.573
> 
> 标签：perl, hash, duplicates, www-mechanize

**我有一个问题希望你能帮忙？**

```
foreach my $url ( keys %{$newURLs} ) {
  # first get the base URL and save its content length
  $mech->get($url);
  my $content_length = $mech->response->header('Content-Length');

  # now iterate all the 'child' URLs
  foreach my $child_url ( @{ $newURLs->{$url} } ) {
    # get the content
    $mech->get($child_url);

    # compare
    if ( $mech->response->header('Content-Length') != $content_length ) {
         print "$child_url: different content length: $content_length vs "
         . $mech->response->header('Content-Length') . "!\n";
         #HERE I want to store the urls that are found to have different content 
         #lengths to the base url
         #only if the same url has not already been stored
    } elsif ( $mech->response->header('Content-Length') == $content_length ) {
         print "Content lengths are the same\n";
         #HERE I want to store the urls that are found to have the same content 
         #length as the base url
         #only if the same url has not already been stored
    }
  }
} 
```

**我遇到的问题：**

正如您在上面的代码中看到的那样，我想根据内容长度是相同还是不同来存储 url，**所以我最终会得到一组与其基本 url 内容长度不同的 url，我会结束加上另一组与其基本网址具有相同内容长度的网址。**

我知道如何使用数组轻松做到这一点

```
push (@differentContentLength, $url);
push (@sameContentLength, $url); 
```

**但是我将如何使用哈希（或其他首选方法）来解决这个问题？**

我仍然在处理哈希，所以你的帮助将不胜感激，

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:11:24.690

请检查此解决方案：

```
my %content_length;

foreach my $url ( keys %{$newURLs} ) {
  # first get the base URL and save its content length
  $mech->get($url);
  my $content_length = $mech->response->header('Content-Length');

  # now iterate all the 'child' URLs
  foreach my $child_url ( @{ $newURLs->{$url} } ) {
    # get the content
    $mech->get($child_url); 
    my $new_content_length =  $mech->response->header('Content-Length');
    # store in hash
    print "New URL! url: $child_url\n" if ! defined $content_length{$child_url};
    print "Different content_length! url: $child_url, old_content_length: $content_length, new_content_length: $new_content_length\n" if $new_content_length != $content_length{$child_url};
    $content_length{$child_url} = $new_content_length;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:25:34.177

您可以创建一个 hashref 来在循环之外为您存储所有 url。让我们称之为`$content_lengths`。它是一个标量，因为它是对哈希的引用。在您的`$child_url`循环中，将内容长度添加到该数据结构中。我们将首先使用基本 url，在里面给我们另一个 hashref `$content_lengths->{$url}`。在那里我们决定我们是否想要`equal`或`different`。在这两个键里面会有另一个 hashref 持有`$child_url`s。它们又将其内容长度作为值。当然`++`，如果您不想存储长度，我们可以在这里说。

```
my $content_lengths; # this is at the top
foreach my $url ( # ... more stuff

# compare
if ( $mech->response->header('Content-Length') != $content_length ) {
  print "$child_url: different content length: $content_length vs "
    . $mech->response->header('Content-Length') . "!\n";

  # store the urls that are found to have different content
  # lengths to the base url only if the same url has not already been stored
  $content_lengths->{$url}->{'different'}->{$child_url} = $mech->response->header('Content-Length');

} elsif ( $mech->response->header('Content-Length') == $content_length ) {
  print "Content lengths are the same\n";

  # store the urls that are found to have the same content length as the base
  # url only if the same url has not already been stored
  $content_lengths->{$url}->{'equal'}->{$child_url} = $mech->response->header('Content-Length');
} 
```

# ruby - 在 sinatra 和 ruby 中测试机架超时

> ID：14851952
> 
> 赞同：2
> 
> 时间：2013-02-13T10:57:33.780
> 
> 标签：ruby, sinatra, rack, ruby-mocha, rack-test

这是我认为很简单的事情，但我在测试 rack-timeout gem 时遇到了问题。我有一个带有端点的 sinatra 基类，它执行一些逻辑。

```
module MyModule
  class MySinatra < Sinatra::Base
    use Rack::Timeout
    Rack::Timeout.timeout = 10

    get '/dosomething' do
       #do the normal logic.
    end
  end
end 
```

有关 rack-timeout gem 的更多信息在[这里](https://github.com/kch/rack-timeout)。我正在尝试设置一个测试，我可以发送一个我知道需要几秒钟才能失败的请求。

这是到目前为止的测试

```
require "test/unit"
require "mocha/setup"
require 'rack/timeout'

def test_rack_timeout_should_throw_timed_out_exception_test
  Rack::Timeout.stubs(:timeout).returns(0.0001)
  assert_raises TimeoutError do
      get "/dosomething"
  end
  Rack::Timeout.unstub
end 
```

有很多方法可以做到这一点，但我不确定它们将如何实施

1.  将“/dosomething”方法作为测试的一部分覆盖到 {sleep 3}
2.  执行与上述相同的操作，但使用 stubbing 或 mocking 库
3.  不要在测试中使用 get "/dosomething"，而是创建一个 net::http 响应来保持请求打开。

对此的任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T22:40:48.307

首先，您的测试实际上不会通过，因为错误没有传递给测试。它只在服务器端提出。幸运的是， rack-test 提供了`last_response.errors`检查是否有错误的方法。因此，我将按如下方式编写上述测试：

```
def test_rack_timeout_should_throw_timed_out_exception
  Rack::Timeout.stubs(:timeout).returns(0.0001)

  get '/dosomething'

  assert last_response.server_error?, 'There was no server error'
  assert last_response.errors.include?('Timeout::Error'), 'No Timeout::Error raised'

  Rack::Timeout.unstub
end 
```

现在唯一要做的就是通过覆盖路由来模拟缓慢的响应。起初看起来很简单，但当我拿到它时，我意识到这根本不是那么简单。我摆弄了很多，并在这里想出了这个：

```
class Sinatra::Base
  def self.with_fake_route method, route, body
    old_routes = routes.dup
    routes.clear
    self.send(method.to_sym, route.to_s, &body.to_proc)
    yield
    routes.merge! old_routes
  end
end 
```

它将允许您在传递给该方法的块内临时仅使用一条路线。例如，现在您可以通过以下方式模拟慢速响应：

```
MyModule::MySinatra.with_fake_route(:get, '/dosomething', ->{ sleep 0.0002 }) do
  get '/dosomething'
end 
```

请注意，`get '/dosomething'`块内部*不是*临时路由的定义，而是机架测试触发模拟请求的方法。实际的覆盖路由以 的参数形式指定`with_route`。

这是我能想到的最好的解决方案，但我希望看到一种更优雅的方式来解决这个问题。

完整的工作示例（在 Ruby 1.9.3.p385 上运行）：

```
require 'sinatra/base'
require 'rack/timeout'

module MyModule
  class MySinatra < Sinatra::Base
    use Rack::Timeout
    Rack::Timeout.timeout = 10

    get '/dosomething' do
      'foo'
    end
  end
end

require 'test/unit'
require 'rack/test'
require 'mocha/setup'

class Sinatra::Base
  def self.with_fake_route method, route, body
    old_routes = routes.dup
    routes.clear
    self.send(method.to_sym, route, &body)
    yield
    routes.merge! old_routes
  end
end

class Tests < Test::Unit::TestCase
  include Rack::Test::Methods

  def app
    MyModule::MySinatra
  end

  def test_rack_timeout_should_throw_timed_out_exception
    Rack::Timeout.stubs(:timeout).returns(0.0001)

    MyModule::MySinatra.with_fake_route(:get, '/dosomething', ->{ sleep 0.0002 }) do
      get '/dosomething'
    end

    assert last_response.server_error?, 'There was no server error'
    assert last_response.errors.include?('Timeout::Error'), 'No Timeout::Error raised'

    Rack::Timeout.unstub
  end
end 
```

产生：

```
1 tests, 2 assertions, 0 failures, 0 errors, 0 skips 
```

# selenium - 如何告诉 Webdriver 在运行测试时不要切换窗口焦点？

> ID：14851956
> 
> 赞同：0
> 
> 时间：2013-02-13T10:57:48.103
> 
> 标签：selenium, webdriver, capybara

当我运行 Webdriver 测试时，它会在执行文件上传等操作时自动将窗口焦点更改为浏览器窗口。

我不想要这样的行为，因为我目前可能在其他窗口中工作。

我可以禁止吗？如何？

# vba - 如何删除垂直合并一个或多个单元格的表格中的空白行或带空格的行？

> ID：14851957
> 
> 赞同：1
> 
> 时间：2013-02-13T10:57:55.523
> 
> 标签：vba, ms-word

**当表格包含垂直和水平合并的单元格**时，我需要一个 vba 脚本或帮助我编写的内容，以免退出迭代。

表格示例：

```
---------
|   |   | <-- I don't want these rows deleted, they can be skipped
|---|   |
|   |   | <-- I don't want these rows deleted, they can be skipped
|---|---|
|   |   | <-- this must be checked for emptiness in order to decide to delete or not
|---|---|
|   |   | <-- this must be checked for emptiness in order to decide to delete or not
|---|---| 
```

到目前为止我在 VBA 中的脚本：

```
Public Sub DeleteEmptyRows()
    Dim c As String
    c = ""
    Dim oTable As Table, oRow As Integer
    ' Specify which table you want to work on.
    For Each oTable In ActiveDocument.Tables

        For oRow = oTable.Rows.Count To 1 Step -1
            'On Error GoTo NextIteration
            MsgBox oTable.Rows(oRow).Range.Text
            'If Len(oTable.Rows(oRow).Range.Text) = oTable.Rows(oRow).Cells.Count * 2 + 2 Then
            If Len(Replace(oTable.Rows(oRow).Range.Text, Chr(13) & Chr(7), vbNullString)) = 0 Then
                oTable.Rows(oRow).Delete
            End If
        Next oRow
    Next oTable
    MsgBox c
End Sub 
```

如何重现错误：创建一个 5x5 表。选择 cell(0,0) 和 cell(1, 0) 并合并它们。选择 cell(0, 1) 和 cell(0, 2) 并合并。运行脚本并得到 5991 错误..

问题是我得到一个运行时错误 5991: Can't access to individual lines in this collection 因为有垂直合并的单元格。

我真的不知道该怎么办，因为如果发生此错误，将不会处理任何行。通常我的表格有一个垂直合并单元格的标题，而正文行没有，所以我不能做任何事情......

对于字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T05:46:19.690

这就是我想出的删除表格中不包含任何合并单元格且不包含任何文本的所有行的方法。

包含合并单元格的表格的问题不是删除行，而是确定哪些单元格实际合并，然后删除剩下的内容。

我解决这个问题的方法是遍历表中的所有单元格，并且对于每一行锻炼计算多少列（水平合并的单元格和从上方垂直合并的单元格被忽略）并且感谢这个页面（[http://word.mvps .org/FAQs/MacrosVBA/GetRowColSpan.htm](http://word.mvps.org/FAQs/MacrosVBA/GetRowColSpan.htm)）如果行中的任何单元格是我们可以判断的垂直合并单元格的顶部。

最后我们还要检查行中是否有任何文本。

这是我想出的代码，希望注释应该是直截了当的。不幸的是，由于 Word 处理这些东西的方式，单元格必须选择而不是仅仅使用范围 - 这并不理想，因为它显着减慢了速度。它在我所有的测试中都有效。

```
Option Explicit

Public Sub DeleteEmptyRows()
    Dim oTable As Table, oCol As Integer, oRows As Integer
    Dim iMergeCount() As Integer, dCellData() As Double
    Dim MyCell As Cell
    Dim iCurrentRow As Integer, iRowCounter As Integer

    'Watching this happen will slow things down considerably
    Application.ScreenUpdating = False

    ' Specify which table you want to work on.
    For Each oTable In ActiveDocument.Tables
        'We need to store the number of columns to determine if there are any merges
        oCol = oTable.Columns.Count

        ReDim dCellData(1 To oTable.Rows.Count, 1 To 3)
        'The first column will count the number of columns in the row if this doesn't match the table columns then we have merged cells
        'The second column will count the vertical spans which tells us if a vertically merged cell begins in this row
        'The third column will count the characters of all the text entries in the row.  If it equals zero it's empty.

        iCurrentRow = 0: iRowCounter = 0
        For Each MyCell In oTable.Range.Cells
            'The Information property only works if you select the cell. Bummer.
            MyCell.Select

            'Increment the counter if necessary and set the current row
            If MyCell.RowIndex <> iCurrentRow Then
                iRowCounter = iRowCounter + 1
                iCurrentRow = MyCell.RowIndex
            End If

            'Check column index count
            If MyCell.ColumnIndex > VBA.Val(dCellData(iRowCounter, 1)) Then dCellData(iRowCounter, 1) = MyCell.ColumnIndex

            'Check the start of vertically merged cells here
            dCellData(iRowCounter, 2) = dCellData(iRowCounter, 2) + (Selection.Information(wdEndOfRangeRowNumber) - Selection.Information(wdStartOfRangeRowNumber)) + 1

            'Add up the length of any text in the cell
            dCellData(iRowCounter, 3) = dCellData(iRowCounter, 3) + VBA.Len(Selection.Text) - 2 '(subtract one for the table and one for cursor(?))

            'Just put this in so you can see in the immediate window how Word handles all these variables
            Debug.Print "Row: " & MyCell.RowIndex & ", Column: " & MyCell.ColumnIndex & ", Rowspan = " & _
                (Selection.Information(wdEndOfRangeRowNumber) - _
                Selection.Information(wdStartOfRangeRowNumber)) + 1
        Next MyCell

        'Now we have all the information we need about the table and can start deleting some rows
        For oRows = oTable.Rows.Count To 1 Step -1
            'Check if there is no text, no merges at all and no start of a vertical merge
            If dCellData(oRows, 3) = 0 And dCellData(oRows, 1) = oCol And dCellData(oRows, 2) = oCol Then
                'Delete the row (we know it's totally unmerged so we can select the first column without issue
                oTable.Cell(oRows, 1).Select
                Selection.Rows.Delete
            End If
        Next oRows
    Next oTable

    Application.ScreenUpdating = True
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T11:17:22.453

您应该检查您的条件`Range.MergeCells`属性，如果范围内的单元格被合并，它将返回`TRUE`。

# multidrop-bus - 我需要为使用 MDB 协议的自动售货机开发什么？

> ID：14851961
> 
> 赞同：5
> 
> 时间：2013-02-13T10:58:05.860
> 
> 标签：multidrop-bus

我有一个带有自动售货机的项目。文档说该机器使用 MDB 协议（[自动售货机](http://en.wikipedia.org/wiki/Multidrop_bus)的标准协议）。

如何开发与机器交互的应用程序，例如更改产品价格？

我需要什么工具和 API？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-15T07:35:50.107

您需要一个接口连接器，例如[http://www.waferstar.com/en/MDB-PC.html](http://www.waferstar.com/en/MDB-PC.html)上的那个，因为 MDB 接口不是原生 RS-232。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-30T02:46:10.653

MDB 是一个简单的 9 位串行接口，具有一个控制器和多个从机。您只需要一个 9600bps 的 9 位 UART。票据兑换商、抄送阅读器等都是奴隶。您可以在网上找到规格：

www.vending.org/technical/MDB_3.0.pdf

请注意，自动售货机本身包含控制器，并且所有控制器都有自己的特点。

# android - Android SearchView onclick

> ID：14851964
> 
> 赞同：16
> 
> 时间：2013-02-13T10:58:12.657
> 
> 标签：android, onclick, searchview

我有一个看起来像这样的 searchView：

```
private void setupSearchView() {
    mSearchView = (SearchView) getActivity().findViewById(
            R.id.search_view_neue);
    setSearchViewBackground();
    mSearchView.setOnClickListener(this);
    mSearchView.setOnQueryTextListener(this);
}

    public boolean onQueryTextSubmit(String query) {
    searchcounter = searchcounter + 1;

    setSearchViewBackground();
    ArrayList<WissensdokumenteRecord> documents = settingListContent(new ArrayList<WissensdokumenteRecord>());

    setListAdapter(new NeueWissensdokumentItemAdapter(
            inflater.getContext(), R.layout.row_example, documents));
    InputMethodManager im = (InputMethodManager) getActivity()
            .getSystemService(Context.INPUT_METHOD_SERVICE);
    im.hideSoftInputFromWindow(getActivity().getCurrentFocus()
            .getWindowToken(), 0);

    return false;
}

<SearchView
    android:id="@+id/search_view_neue"
    android:layout_width="match_parent"
    android:layout_height="60dp"
    android:layout_marginLeft="40dp"
    android:layout_marginRight="40dp"
    android:background="@drawable/border_searchview"
    android:maxWidth="540dp"
    android:queryHint="Neue Dokumente suchen" >
</SearchView> 
```

因此，搜索视图的行为是，通过单击搜索按钮打开键盘。现在我可以搜索一些东西了。是否可以通过单击搜索视图中的任意位置进行搜索？有没有人有我的例子？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-07-24T09:54:33.013

我设法通过以下方式做到这一点：

在点击监听器上设置搜索视图

```
mSearchView.setOnClickListener(this); 
```

捕捉 onClick 事件：

```
@Override
public void onClick(View v) {
    switch (v.getId()) {
        case R.id.searchView:
            mSearchView.onActionViewExpanded();
            break;
    }
} 
```

这样，如果您单击搜索栏上的 antwhere，就会激活键盘和搜索。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-02-05T23:01:14.677

这将完全符合您的目标。 `setIconified(false)`将在 SearchView 的这一端保留十字图标，以便用户仍然可以像单击放大镜一样取消。

```
searchView.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        searchView.setIconified(false);
    }
}); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-02-17T12:09:29.053

我必须建议使用`setOnSearchClickListener`listner来检测`SearchView`点击根据Android [docs](https://developer.android.com/reference/android/widget/SearchView.html#setOnSearchClickListener(android.view.View.OnClickListener))：

> setOnSearchClickListener
> 
> void setOnSearchClickListener（View.OnClickListener 监听器）
> 
> 设置侦听器以在按下搜索按钮时进行通知。

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater menuInflater = getMenuInflater();
    menuInflater.inflate(R.menu.orders_menu, menu);
    MenuItem searchItem = menu.findItem(R.id.action_search);
    SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);

    if (searchView != null) {
        searchView = (SearchView) searchItem.getActionView();
        searchView.setOnSearchClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
              //perform your click operation here 
            }
        });
  return true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T11:07:59.747

我不明白为什么需要在其上设置 OnClickListener。通过单击 SearchView，您将更新文本光标。要执行搜索，您需要使用键盘 IME 操作。如果单击它将执行搜索，则无法更改光标等。在文本字段中进行除焦点/更新光标之外的其他操作通常是错误的行为。

据我记得 - 你不需要在 OnQueryTextListener 中隐藏键盘。它应该自动击中。在 OnQueryTextSubmit 中处理您的搜索

[使用 Sherlock ActionBar SearchView setOnKeyListener 进行搜索](https://stackoverflow.com/questions/14772464/search-with-sherlock-actionbar-searchview-setonkeylistener/14772811#14772811)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-12T16:10:30.727

一个搜索小部件，它拦截对其子项的所有触摸并在触摸时执行回调：

```
class InterceptTouchSearchView(context: Context, attrs: AttributeSet) : SearchView(context, attrs) {

  var onActionDownIntercepted: (() -> (Unit))? = null

  override fun onInterceptTouchEvent(ev: MotionEvent?): Boolean {
    return true
  }

  @SuppressLint("ClickableViewAccessibility")
  override fun onTouchEvent(ev: MotionEvent?): Boolean {
    if (ev?.action == MotionEvent.ACTION_DOWN) {
      onActionDownIntercepted?.invoke()
    }
    return false
  }
} 
```

用法：`search_view.onActionDownIntercepted = { onSearchFieldClicked() }`

# android - Robolectric：将按钮添加到 layout.xml 时出现错误膨胀布局

> ID：14851966
> 
> 赞同：0
> 
> 时间：2013-02-13T10:58:23.570
> 
> 标签：android, robolectric

我正在使用 Robolectric 1.1 版，如果活动中有按钮，它无法运行我的测试。

**add_emoticon_activity.xml**

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    >
    <Button
        android:id="@+id/addEmoticonButton"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/add_emoticon_button_text"
        />
</LinearLayout> 
```

**AddEmoticonActivity.java**

```
import android.app.Activity;
import android.os.Bundle;

public class AddEmoticonActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.add_emoticon_activity);
    }
} 
```

**AddEmoticonActivityTest.java**

```
import static org.hamcrest.CoreMatchers.equalTo;
import static org.junit.Assert.assertThat;

import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;

import android.widget.Button;

import com.xtremelabs.robolectric.RobolectricTestRunner;
import com.xtremelabs.robolectric.shadows.ShadowHandler;
import com.xtremelabs.robolectric.shadows.ShadowToast;

@RunWith(RobolectricTestRunner.class)
public class AddEmoticonActivityTest {
    private AddEmoticonActivity addEmoticonActivity;
    private Button addButton;

    @Before
    public void setup() {
        addEmoticonActivity = new AddEmoticonActivity();
        addEmoticonActivity.onCreate(null);
        addButton = (Button) addEmoticonActivity.findViewById(R.id.addEmoticonButton);
    }

    @Test
    public void shouldDisplayErrorMessageWhenEmptyContentAdded() {
        addButton.performClick();

        ShadowHandler.idleMainLooper();
        assertThat(ShadowToast.getTextOfLatestToast(), equalTo(addEmoticonActivity.getResources().getString(R.string.no_content_error_message)));
    }
} 
```

下面是我运行测试时得到的堆栈跟踪

```
java.lang.RuntimeException: error inflating layout/add_emoticon_activity
    at com.xtremelabs.robolectric.res.ViewLoader.inflateView(ViewLoader.java:106)
    at com.xtremelabs.robolectric.res.ViewLoader.inflateView(ViewLoader.java:82)
    at com.xtremelabs.robolectric.res.ViewLoader.inflateView(ViewLoader.java:86)
    at com.xtremelabs.robolectric.res.ResourceLoader.inflateView(ResourceLoader.java:377)
    at com.xtremelabs.robolectric.shadows.ShadowLayoutInflater.inflate(ShadowLayoutInflater.java:43)
    at com.xtremelabs.robolectric.shadows.ShadowLayoutInflater.inflate(ShadowLayoutInflater.java:48)
    at android.view.LayoutInflater.inflate(LayoutInflater.java)
    at com.xtremelabs.robolectric.shadows.ShadowActivity.setContentView(ShadowActivity.java:101)
    at android.app.Activity.setContentView(Activity.java)
    at com.erlanggatjhie.emotextcon.activities.AddEmoticonActivity.onCreate(AddEmoticonActivity.java:10)
    at com.erlanggatjhie.emotextcon.activities.AddEmoticonActivityTest.setup(AddEmoticonActivityTest.java:24)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
    at com.xtremelabs.robolectric.RobolectricTestRunner$1.evaluate(RobolectricTestRunner.java:292)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.xtremelabs.robolectric.res.ViewLoader$ViewNode.constructView(ViewLoader.java:228)
    at com.xtremelabs.robolectric.res.ViewLoader$ViewNode.create(ViewLoader.java:179)
    at com.xtremelabs.robolectric.res.ViewLoader$ViewNode.inflate(ViewLoader.java:150)
    at com.xtremelabs.robolectric.res.ViewLoader$ViewNode.inflate(ViewLoader.java:153)
    at com.xtremelabs.robolectric.res.ViewLoader.inflateView(ViewLoader.java:102)
    at com.xtremelabs.robolectric.res.ViewLoader.inflateView(ViewLoader.java:82)
    at com.xtremelabs.robolectric.res.ViewLoader.inflateView(ViewLoader.java:86)
    at com.xtremelabs.robolectric.res.ResourceLoader.inflateView(ResourceLoader.java:377)
    at com.xtremelabs.robolectric.shadows.ShadowLayoutInflater.inflate(ShadowLayoutInflater.java:43)
    at com.xtremelabs.robolectric.shadows.ShadowLayoutInflater.inflate(ShadowLayoutInflater.java:48)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.xtremelabs.robolectric.bytecode.ShadowWrangler.methodInvoked(ShadowWrangler.java:99)
    at com.xtremelabs.robolectric.bytecode.RobolectricInternals.methodInvoked(RobolectricInternals.java:111)
    at android.view.LayoutInflater.inflate(LayoutInflater.java)
    at com.xtremelabs.robolectric.shadows.ShadowActivity.setContentView(ShadowActivity.java:101)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.xtremelabs.robolectric.bytecode.ShadowWrangler.methodInvoked(ShadowWrangler.java:99)
    at com.xtremelabs.robolectric.bytecode.RobolectricInternals.methodInvoked(RobolectricInternals.java:111)
    at android.app.Activity.setContentView(Activity.java)
    at com.erlanggatjhie.emotextcon.activities.AddEmoticonActivity.onCreate(AddEmoticonActivity.java:10)
    at com.erlanggatjhie.emotextcon.activities.AddEmoticonActivityTest.setup(AddEmoticonActivityTest.java:24)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    ... 20 more
Caused by: java.lang.NullPointerException
    at com.xtremelabs.robolectric.res.ColorResourceLoader.getValue(ColorResourceLoader.java:33)
    at com.xtremelabs.robolectric.res.ResourceLoader.getColorValue(ResourceLoader.java:382)
    at com.xtremelabs.robolectric.shadows.ShadowResources.getColor(ShadowResources.java:65)
    at android.content.res.Resources.getColor(Resources.java)
    at com.xtremelabs.robolectric.shadows.ShadowView.setBackgroundColor(ShadowView.java:243)
    at com.xtremelabs.robolectric.shadows.ShadowButton.applyAttributes(ShadowButton.java:14)
    at com.xtremelabs.robolectric.shadows.ShadowView.__constructor__(ShadowView.java:90)
    at com.xtremelabs.robolectric.shadows.ShadowView.__constructor__(ShadowView.java:82)
    at android.widget.Button.<init>(Button.java)
    at com.xtremelabs.robolectric.res.ViewLoader$ViewNode.constructView(ViewLoader.java:228)
    at com.xtremelabs.robolectric.res.ViewLoader$ViewNode.create(ViewLoader.java:179)
    at com.xtremelabs.robolectric.res.ViewLoader$ViewNode.inflate(ViewLoader.java:150)
    at com.xtremelabs.robolectric.res.ViewLoader$ViewNode.inflate(ViewLoader.java:153)
    at com.xtremelabs.robolectric.res.ViewLoader.inflateView(ViewLoader.java:102)
    at com.xtremelabs.robolectric.res.ViewLoader.inflateView(ViewLoader.java:82)
    at com.xtremelabs.robolectric.res.ViewLoader.inflateView(ViewLoader.java:86)
    at com.xtremelabs.robolectric.res.ResourceLoader.inflateView(ResourceLoader.java:377)
    at com.xtremelabs.robolectric.shadows.ShadowLayoutInflater.inflate(ShadowLayoutInflater.java:43)
    at com.xtremelabs.robolectric.shadows.ShadowLayoutInflater.inflate(ShadowLayoutInflater.java:48)
    at android.view.LayoutInflater.inflate(LayoutInflater.java)
    at com.xtremelabs.robolectric.shadows.ShadowActivity.setContentView(ShadowActivity.java:101)
    at android.app.Activity.setContentView(Activity.java)
    at com.erlanggatjhie.emotextcon.activities.AddEmoticonActivity.onCreate(AddEmoticonActivity.java:10)
    at com.erlanggatjhie.emotextcon.activities.AddEmoticonActivityTest.setup(AddEmoticonActivityTest.java:24)
    ... 20 more 
```

如果我从 layout.xml 中删除按钮，它将很好地工作。

有谁知道发生了什么？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T03:34:13.753

看起来这一切都归结为导致原始问题的 NullPointerException。

此提交发生在 1.1 发布之后，它更改了 ColorResourceLoader.java 的第 33 行，这是您收到错误的行。

[https://github.com/pivotal/robolectric/commit/f647512bd80162f9cb6b2fac8c7b0db984266967](https://github.com/pivotal/robolectric/commit/f647512bd80162f9cb6b2fac8c7b0db984266967)

看起来如果您升级到较新版本的 Robolectric，它可能会解决问题。我知道 1.1 是最新的发布版本，但是已经发布了[2.0 alpha 1](http://robolectric.blogspot.com/2013/01/robolectric-20-alpha-1.html)版本。

# curl - cURL：此 URL 不支持 HTTP 方法 GET，错误 405

> ID：14851968
> 
> 赞同：1
> 
> 时间：2013-02-13T10:58:30.753
> 
> 标签：curl, get

我正在尝试直接从命令行（在 Windows 7 上）对谷歌服务器进行 cURL 查询。服务器属于google的speech api，做语音识别。因此需要上传音频文件，并返回识别结果。所以我连接了两个 cURL 查询，一个上传，一个下载。像那样：

> 卷曲`"https://...`“&卷曲`"https://...`”

我得到以下错误：

```
<HTML>
<HEAD>
<TITLE>HTTP method GET is not supported by this URL</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1>HTTP method GET is not supported by this URL</H1>
<H2>Error 405</H2>
</BODY>
</HTML>
{"result":[]} 
```

由于我不直接使用 GET 方法，我无法更改任何内容。请帮忙。

谢谢！

* * *

编辑：

URLs（用 x、y 和 z 表示键等）：

```
curl "https://www.google.com/speech-api/full-duplex/v1/down?pair=xxxxxx" & curl "https://www.google.com/speech-api/full-duplex/v1/up?lang=de-DE&lm=dictation&client=yyyy&pair=xxxxxx&key=zzzzzzz" --header "Content-Type: audio/amr; rate=16000" --data-binary @test.amr 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-17T01:04:52.973

采样率为 8000 的 AMR-NB 应该可以工作。我尝试了amr-wb，但失败了。

更长的[样本卷曲](https://gist.github.com/rowntreerob/849d6a40aec758505686)，log=V

```
rob@ beacon$ curl "https://www.google.com/speech-api/full-duplex/v1/down?pair=12345678901234567" & curl -X POST "https://www.google.com/speech-api/full-duplex/v1/up?lang=en-US&lm=dictation&client=chromium&pair=12345678901234567&key=.....PMU" --header "Transfer-Encoding: chunked" --header "Content-Type: audio/x-flac; rate=22050"  --data-binary @11.rec
[1] 16320

{"result":[]}
rob@ beacon$ {"result":[{"alternative":[{"transcript":"hi how are you we have to go down to the store and see if we can get the groceries for this week so we can bring them back in the car","confidence":0.971865}],"final":true}],"result_index":0} 
```

在几秒钟内用 & 连接两个 curl 表达式，你会看到结果。注意一个 GET，一个 POST 并注意 POST 上的标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:09:25.760

curl 默认使用 GET 方法。您需要使用它，`-X POST`因此它使用 POST。其次，您要上传文件，因此您也需要将其添加为参数：`-d @filename`.

[在手册页](http://curl.haxx.se/docs/manpage.html)上阅读有关 curl 的更多信息。

# android - 使用 Android 的搜索对话框即时显示自动完成结果

> ID：14851974
> 
> 赞同：1
> 
> 时间：2013-02-13T10:59:00.707
> 
> 标签：android, search

我正在重新设计我的 Android 应用程序的搜索界面。我有红色的 Google 的 API 指南（[http://developer.android.com/guide/topics/search/search-dialog.html](http://developer.android.com/guide/topics/search/search-dialog.html)）。

当前版本的应用程序使用经典的系统搜索对话框。它缺少我想在新版本中提供的自动完成功能。

我对自动完成的要求：如果查询字符串少于 3 个字符，应用程序应根据存储在本地的收藏夹集自动建议搜索结果。如果查询包含至少 3 个字符，则应通过搜索 API 远程进行搜索。

由于从历史上看，应用程序的最低 API 将是 7 级，我不能使用 Honeycomb 的 SearchView (API 11+) 或 ActionBarSherlock SearchView (API 8+)。我决定坚持使用 SearchManager 提供的搜索对话框。

我已经成功实现了上述所有要求。

但是，有一件事降低了可用性。

当用户开始搜索时，搜索对话框获得焦点。期望的行为是立即建议所有收藏夹。不过，这仅适用于我的 HTC Legend 运行 Froyo (2.2)。在我的 Galaxy Nexus 上，该应用程序大多数时候不会立即显示所有建议。在用户输入至少一个字符之前，我不会收到对我的 SearchProvider 的回调。

我的问题：有没有办法在从 API 7+ 开始的所有 Android 版本中立即显示建议/获取对 SearchProvider 的回调？

我尝试了对 SearchManager (startSearch()) 的不同调用，但没有运气。

# matlab - 互补数组 Matlab

> ID：14851975
> 
> 赞同：0
> 
> 时间：2013-02-13T10:59:00.443
> 
> 标签：matlab

我们有一个值数组，我们想创建另一个数组，其值不在第一个数组中。

例子：

```
load('internet.mat') 
```

第一列包含以 MB 为单位的值，我们曾想过这样的事情：

```
MB_no = setdiff(v, internet(:,1)) 
```

其中 v 是一个 0 向量，其长度等于 internet.mat 中的行数。但它只是行不通。

那么，我们该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:26:23.677

您需要指定可能值的范围以定义哪些值不在`internet`. 说范围`v = 1:10`然后`setdiff(v,internet(:,1))`会给你`1:10`不在第一列中的值`internet`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:14:07.287

假设`internet(:,1)`只有正整数，并且您希望找到哪些整数`[1,...,max( internet(:,1) )]`没有**出现**在该范围内，您可以简单地做

```
app = [];
app( internet(:,1) ) = 1;
MB_no = find( app == 0 ); 
```

这有点像*桶排序*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T11:17:00.830

好像您不想要第一列。你可以简单地做：

```
MB_no=internet(:,2:end); 
```

# javascript - jquery 选择器在与# for id 一起使用时不起作用，但与 div[id="theid"] 一起使用

> ID：14851977
> 
> 赞同：0
> 
> 时间：2013-02-13T10:59:15.387
> 
> 标签：javascript, jquery, jquery-selectors

这是html的情况

```
<div id="editUser-0" style="display: none;">
    <form action="/admin/uactions.php" method="post" enctype="multipart/form-data" class="form-horizontal" id="userEditorForm-0">
    <input type="hidden" name="id" id="id" value="0" />
    <input type="hidden" name="action" id="action" value="edituser" />
    <div class="control-group">
        <label class="control-label" for="name">Име</label>
        <div class="controls">
            <input type="text"  id="name-0" name="name" class="validate[required]" placeholder="Име" value="">
        </div>
    </div>
    <div class="control-group" >
        <label class="control-label" for="email-0">Имейл</label>
        <div class="controls">
            <input type="text" id="email-0" class="validate[required,custom[email]]" name="email" placeholder="Имейл" value="">
        </div>
    </div>
    <div class="control-group">
        <label class="control-label" for="type-0" >Тип</label>
        <div class="controls">
            <select name="type" id="type-0">
                <option value="1" >Администратор</option>
                <option value="100" >Потребител</option>
            </select>
        </div>
    </div>
    <div class="control-group hidden" id="avatarWarper-0">
        <label class="control-label" for="avatar-0">Снимка</label>
        <div class="controls">
            <input type="file" name="avatar" id="avatar-0" />
        </div>
    </div>
    <div class="control-group">
        <label class="control-label" for="typeinvestor-0">Тип инвеститор</label>
        <div class="controls">
            <select name="typeinvestor" id="typeinvestor-0" >
                <option value="0">-</option>
                <option value="1">Investor type 1</option>
                <option value="2">Investor type 2</option>
                <option value="3">Investor type 3</option>
            </select>
        </div>
    </div>
    <div class="control-group">
        <label class="control-label" for="phone-0" >Телефон</label>
        <div class="controls">
            <input type="text" id="phone-0" name="phone" placeholder="Телефон" class="validate[required]" value="">
        </div>
    </div>
    <div class="control-group">
        <label class="control-label" for="country-0">Държава</label>
        <div class="controls">
            <select name="country" id="country-0" class="validate[required]">
                <option value="ZW">Zimbabwe</option>
            </select>
        </div>
    </div>
    </form>
</div> 
```

这是javascript

```
function editUser(id) {
  title = "Change user";
  if (id === 0)
    title = 'New user';

  $('<div>' + $('#editUser-' + id).html() + '</div>').dialog({
    modal: true,
    width: 450,
    title: title,
    buttons: {
      'Save': function() {

        $('#userEditorForm-'+id).validationEngine('attach',{promptPosition : "inline", scroll: true});

        if($('#userEditorForm-'+id).validationEngine('validate')){
          $('#userEditorForm-'+id).submit();
        }

      },
      'Cancel': function() {
        $(this).dialog('close');
        return false;
      }
    },
    open: function(event, ui) {
       $('.ui-dialog :button').blur();
      $("select[id='type-"+id+"']").click(function(){
        if($(this).val()==1){
          $("div[id='avatarWarper-"+id+"']").removeClass('hidden');
        }else{
           $("div[id='avatarWarper-"+id+"']").addClass('hidden');
        }
      });
     $('#type-'+id).click();
    },
    close: function(event, ui) {

      $(this).dialog('destroy');
      $(this).remove();

    }
  });
} 
```

问题是，当我使用`$("div[id='avatarWarper-"+id+"']").click(function(){})`它时它可以工作，但是当我尝试使用 `$("#avatarWarper-"+id).click(function(){});`时，这只是在对话框的打开事件中，但例如提交和验证是双向的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T11:17:42.577

```
$("div[id='avatarWarper-"+id+"']") 
```

和

```
$("#avatarWarper-"+id) 
```

两者都是绝对有效的，看起来*几乎*相等，但在一点上有显着差异：

第一个返回一组具有 ID 的元素，`'avatarWarper-"+id`而后者为您提供 DOM 中具有给定 ID 的*第一个*元素。

因此，我能想到的唯一错误是您将此 ID 分配给了 dom 中的多个元素（这在有效 HTML 方面是不允许的，但不会引发任何明显的错误）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T11:22:01.003

`#editUser-*`您正在创建以无效标记结尾的内容的副本。

```
$('<div>' + $('#editUser-' + id).html() + '</div>').dialog({
  ...
}); 
```

当您应该直接使用它时，除非您有充分的理由不这样做。

```
$('#editUser-' + id).dialog({
  ...
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T11:22:12.003

jQuery Dialog**总是会创建 HTML 内容的副本**，因此会创建具有相同 Id 的重复元素。

使用此选择器`$("#avatarWarper-"+id)`将仅获取页面加载时存在的元素，而不是对话框动态创建的元素。

我对 Fancybox 也有同样的问题。我唯一的解决方案是使用类选择器，或者`div[id="theid"]`

# optimization - 找到最小距离

> ID：14851978
> 
> 赞同：2
> 
> 时间：2013-02-13T10:59:17.897
> 
> 标签：optimization, distance, geometry, curves

我需要在给定的圆（或曲线）上找到一个或多个点，以最小化 d0+d1？曲线的半径和中心分别为 (0,0) 和 'r'，并且点 A 和 B 的坐标是已知的。假设 A=(x1,y1) 和 B=(x1,-y1) 和 r> sqrt(x1^2+y1^2) 。C 是圆的未知点，应该最小化长度 d0+d1 d0 - 圆上 A 到 C 之间的距离 d1 - 圆上 B 到 C 之间的距离

C点沿圆周运动。我需要在给定的圆（或曲线）上找到一个或多个点，以最小化 d0+d1？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:12:42.403

如果线 AB 与圆相交，则 C 是该交点（请注意，可以有两个交点并且都给出相等的距离`d0+d1`！）。

![线穿过圆圈](../Images/3468da8069a46b73cf4103ad5e9a481c.png)

如果 AB 不与圆相交，则 C 是圆上的点，与离圆心最近的直线 AB 上的点相交的假想线。

![线不跨圈](../Images/4fd6631f94f6c80e9d701cb0c3499105.png)

网上有很多关于如何在一条直线上找到离另一个点最近的点，以及如何找到两条直线的交点的文章，这将解决第二种情况。对于第一种情况，您可以谷歌“线圆交叉点”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T00:15:44.847

一般情况很复杂，但特殊情况

> `A=(x1,y1)`并且`B=(x1,-y1)`和`r > sqrt(x1^2+y1^2)`

以圆心为原点的圆具有足够的对称性，至少在某些情况下可以使解决方案变得可访问。我假设`A ≠ B`, （等效地`y1 ≠ 0`），否则这个问题对于一个圈子来说是微不足道的。

让是点和`dist(P,Q)`之间的欧几里得距离。连接和的（闭合）线段是点的轨迹`P``Q``A``B``P`

```
dist(P,A) + dist(P,B) = dist(A,B) 
```

对于`D > dist(A,B)`, 点的轨迹

```
f(P) = dist(P,A) + dist(P,B) = D 
```

是一个椭圆`E(D)`，其焦点是`A`和`B`。设`P`是圆上的一个点 和`D = f(P)`。

*   如果圆的切线和椭圆的切线`E(D)`在该点`P`不重合，`P`则既不是局部最小值也不是局部最大值`f`限于圆。
*   如果切线重合，并且圆的曲率大于`E(D)`in的曲率`P`，则`P`是`f`限制在圆内的孤立局部最大值。
*   如果切线重合，并且圆的曲率小于`E(D)`in的曲率`P`，则`P`是`f`限制在圆内的孤立局部最小值。
*   如果切线重合并且圆的曲率等于`E(D)`in的曲率`P`，则
    *   `P`是一个孤立的局部最小值，`f`如果`dist(P,A) = dist(P,B)`，
    *   `P`既不是局部最大值也不是局部最小值，`f`否则限制在圆内。

首先，如果`x1 = 0`，很容易看出（在几何上不明显的情况下）最小化圆`f`上的点是具有 x 坐标的点`0`，即`P1 = (0,r)`和`P2 = (0,-r)`。[如果是这样，那甚至是真的`r² ≤ x1² + y1²`。]

现在，假设`x1 ≠ 0`不失一般性`x1 > 0`。那么很明显，`P = (x,y)`最小化圆上的一个点`f`必须有`x > x1`。通过情况的对称性，该点`R = (r,0)`必须是局部最小值或`f`限制在圆内的局部最大值。

计算`f`near的行为`R`，发现这`R`是一个局部最小值当且仅当

```
r ≥ (x1² + y1²) / x1 
```

由于`R`是曲率最小的点`E(f(R))`（并且切线`R`与`E(f(R))`圆重合），`R`因此也是全局最小值。

如果`r < (x1² + y1²) / x1`，则`R`是`f`限制在圆内的局部最大值。然后`f`在圆上有两个全局最小值，具有相同的 x 坐标。不幸的是，我没有一个很好的公式来计算它们，所以我不能提供比迭代搜索更好的方法。

# php - 如何从字符串中获取关联数组

> ID：14851980
> 
> 赞同：3
> 
> 时间：2013-02-13T10:59:19.723
> 
> 标签：php

我有一个字符串，例如：-

```
$attributes = "id=1 username=puneet mobile=0987778987 u_id=232"; 
```

现在，我想以以下关联数组格式获取它：-

```
$attributes{'id' => 1, 'username' => puneet, 'mobile' => 0987778987, 'u_id' => 232} 
```

注意：- 这些所有值仅由空格分隔。任何帮助都将是可观的。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T11:02:33.623

```
$final_array = array();

$kvps = explode(' ', $attributes);
foreach( $kvps as $kvp ) {
    list($k, $v) = explode('=', $kvp);
    $final_array[$k] = $v;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T11:02:02.407

```
$temp1 = explode(" ", $attributes);
foreach($temp1 as $v){
 $temp2 = explode("=", $v);
 $attributes[$temp2[0]] = $temp2[1];
} 
```

[爆炸](http://php.net/manual/en/function.explode.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T11:06:52.337

我可以建议你用正则表达式来做：

```
$str = "id=1 username=puneet mobile=0987778987 u_id=232";
$matches = array();
preg_match_all( '/(?P<key>\w+)\=(?P<val>[^\s]+)/', $str, $matches );
$res = array_combine( $matches['key'], $matches['val'] ); 
```

[phpfiddle](http://phpfiddle.org/lite/code/y4e-m0c)中的工作示例

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T11:15:14.060

此代码将解决您的问题。

```
<?php
$attributes = "id=1 username=puneet mobile=0987778987 u_id=232";
$a = explode ( ' ', $attributes) ;
$new_array = array();
foreach($a as $value)
{
    //echo $value;
    $pos = strrpos($value, "=");
    $key = substr($value, 0, $pos);
    $value = substr($value, $pos+1);

    $new_array[$key] = $value;
}
print_r($new_array);
?> 
```

这段代码的输出是

```
Array ( [id] => 1 [username] => puneet [mobile] => 0987778987 [u_id] => 232 ) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-13T11:01:59.220

我认为您必须将此字符串拆分两次

1.  用空间划分
2.  与`'='`

# asp.net - 在 ASP.NET 网页表单页面内联代码中使用 await

> ID：14851982
> 
> 赞同：0
> 
> 时间：2013-02-13T10:59:24.463
> 
> 标签：asp.net, asp.net-4.5

如果我的 ASP.NET 网络表单页面中有一些内联代码（在 .NET 4.5 中），例如

```
<li>
   <% =ListItemWithPrice("Widget")%> 
</li> 
```

我想做`ListItemWithPrice`异步，是否可以在页面上等待它？我知道我可以使用

```
<li>
   <% =ListItemWithPrice("Widget").Result%> 
</li> 
```

但这只会在等待任务完成时阻塞，这实际上没有任何帮助（甚至可能更糟）。理想情况下，我想使用

```
<li>
   <% =await ListItemWithPrice("Widget")%> 
</li> 
```

但这似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:31:42.530

您不能在 Page 中包含内联 await 语句，但您可以使用 Page.RegisterAsyncTask 从代码隐藏中执行此操作。有关示例，请参见[http://www.asp.net/web-forms/tutorials/aspnet-45/using-asynchronous-methods-in-aspnet-45 。](http://www.asp.net/web-forms/tutorials/aspnet-45/using-asynchronous-methods-in-aspnet-45)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:08:23.303

简短的回答是否定的， await 不能以这种方式使用。如果 await 关键字会生成一个 ajax 请求和相应的回调函数以在请求完成时调用，这将起作用。

# mysql - MySql - 加载本地数据 Infile - 如何避免插入包含无效数据的行

> ID：14851984
> 
> 赞同：1
> 
> 时间：2013-02-13T10:59:28.670
> 
> 标签：mysql

我正在使用“LOAD DATA LOCAL INFILE”查询将数据从 .csv 文件导入 Mysql db。.csv 包含以下内容：

```
ID | Name | Date | Price

 1\. 01 | abc  | 13-02-2013 | 1500
 2\. 02 | nbd  | blahblahbl | 1000
 3\. 03 | kgj  | 11-02-2012 | jghj 
```

我的 Mysql 表包含以下列：

```
Id INTEGER 
NAME Varchat(100)
InsertionTimeStamp Date
Price INTEGER 
```

MySQL 查询将 .csv 数据加载到上表：

```
LOAD DATA LOCAL INFILE 'UserDetails.csv' INTO TABLE userdetails
FIELDS TERMINATED BY ','
IGNORE 1 LINES
 (Id,Name,InsertionTimeStamp,Price)
 set InsertionTimeStamp = str_to_date(@d,'%d-%m-%Y'); 
```

当我执行查询时，3 条记录被插入到表中，并带有 2 条警告

```
a) Incorrect datetime value : 'blahblahbl' for function str_to_date
b) Data truncate at row 3 (because of invalid INTEGER for Price column) 
```

## 问题

```
1\. Is there any way to avoid data being inserted in table which shows warnings/errors or the row which has invalid data 

I dont want Row 2 & Row 3 to be inserted as it contains invalid data

2\. For WARNING of Incorrect datetime value above, can I get the row no also?
Basically I want to get exact warning/error with the row number. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T01:39:31.193

我知道您正在尝试跳过有问题的行，但您不认为您的 LOAD DATA 命令有错误吗？应该是：

```
LOAD DATA LOCAL INFILE 'UserDetails.csv' INTO TABLE userdetails
FIELDS TERMINATED BY ','
IGNORE 1 LINES
(Id,Name,@d,Price)
set InsertionTimeStamp = str_to_date(@d,'%d-%m-%Y'); 
```

您不应该在列列表中使用变量名称 (d) 而不是列的实际名称 (InsertionTimeStamp)？这可能是您收到有关日期时间的错误消息的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:38:42.630

[您可以在dbForge Studio for MySQL](http://www.devart.com/dbforge/mysql/studio/)中尝试[数据导入](http://www.devart.com/dbforge/mysql/studio/data-export-import.html)工具（CSV 或 TXT 导入格式）。在页面向导中取消选中选项，页面检查选项，它将帮助您跳过导入错误。`Data Import``Modes``Use bulk insert``Errors handling``Ignore all errors`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T11:24:20.657

我认为如果您使用其他语言（例如 php）验证输入会更容易。您只需要遍历 csv 的行并调用类似[this](http://php.net/manual/en/function.is-numeric.php)、[this](https://stackoverflow.com/questions/141315/php-check-for-a-valid-date-weird-date-conversions) 和[this](https://stackoverflow.com/questions/2690205/mysql-how-to-check-if-a-string-is-a-valid-date-time-or-datetime)的内容！

如果您只需要摆弄 SQL，[这](http://www.xaprb.com/blog/2006/04/14/bad-character-data-in-mysql/)可能会有所帮助！

# android - Android 应用程序仅适用于 10 英寸平板电脑而非最新款手机

> ID：14851986
> 
> 赞同：0
> 
> 时间：2013-02-13T10:59:46.013
> 
> 标签：android, android-screen-support

如何将我的应用程序限制为仅适用于平板电脑？例如，如何支持 Galaxy Tab 但不支持 Galaxy SIII？两者具有相同的分辨率和密度。

这段代码是否足够：

```
<supports-screens
    android:largeScreens="false"
    android:normalScreens="false"
    android:requiresSmallestWidthDp="720"
    android:smallScreens="false"
    android:xlargeScreens="true" /> 
```

再次阅读文档后，有以下部分：

```
<compatible-screens>
    <screen android:screenSize="xlarge" android:screenDensity="mdpi" />
    <screen android:screenSize="xlarge" android:screenDensity="hdpi" />
    <screen android:screenSize="xlarge" android:screenDensity="xhdpi" />        
</compatible-screens> 
```

使整个设置正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:16:35.213

首先在清单中作出上述规定

转到控制台（开发人员的控制台）

```
https://play.google.com/apps/publish/ 
```

*   从应用列表中选择您的应用。
*   转到 APK 选项卡（页面左侧）

您将能够看到“查看支持的设备”超链接打开它，

您可以在那里查看支持的设备列表。手动排除您不想要的设备。

# asp.net-mvc-3 - 将整数月份转换为其名称

> ID：14851987
> 
> 赞同：1
> 
> 时间：2013-02-13T10:59:47.483
> 
> 标签：asp.net-mvc-3, razor, archive

大家好，我目前正在为我的博客做一个博客存档。我能够按年和月调用博客列表，但我的问题是我的月以整数显示。这张图会显示
![在此处输入图像描述](../Images/f0db18645c1a13085bed10cc4ecf568d.png)

我创建了一个**ArchiveRepository**

```
public IQueryable<ArchiveListModel> AchiveList()
        {
            var ac = from Post in db.Posts
                     group Post by new { Post.DateTime.Year, Post.DateTime.Month }
                         into dategroup
                         select new ArchiveListModel()
                         {
                             AchiveYear = dategroup.Key.Year,
                             AchiveMonth = dategroup.Key.Month,
                             PostCount = dategroup.Count()
                         };

            return ac;
        } 
```

我在我的**控制器中调用它**

```
public ActionResult Archive()
        {
            var archivelst = repository.AchiveList().ToList();
            return View(archivelst);
        } 
```

然后在我的**视图中显示**

```
<h2>Archives</h2>

<table>
    <tr>
        <th>
            AchiveYear
        </th>
        <th>
            AchiveMonth
        </th>
        <th>
            PostCount
        </th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @item.AchiveYear
        </td>
        <td>
            @item.AchiveMonth
        </td>
        <td>
            @item.PostCount
        </td>      
    </tr>
}

</table> 
```

我将如何将其转换为整数？T_T

**编辑：**
我尝试谷歌搜索并找到了这个答案

```
CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(1); 
```

但我不知道把它放在哪里.. :(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T11:32:01.640

`CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(1);`在查看页面中试一试（ ）

```
@foreach (var item in Model) {
<tr>
    <td>
        @item.AchiveYear
    </td>
    <td>
        @System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(item.AchiveMonth)
    </td>
    <td>
        @item.PostCount
    </td>      
</tr>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:45:38.637

尝试这个...

```
AchiveMonth = CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(dateGroup.Key.Month), 
```

# c++ - 为什么不能从信号处理程序调用 dlclose()？

> ID：14851995
> 
> 赞同：1
> 
> 时间：2013-02-13T11:00:38.377
> 
> 标签：c++, c, linux, shared-libraries, signals

我编写了一个用户空间应用程序，`C`其中使用插件库与低级 Linux 内核驱动程序交互`plugin.so`。我使用`dlopen()`. 我有一个信号处理程序，它在收到`dlclose()`时调用。`SIGINT`在代码审查之后，我得到了*`dlclose()`不能从信号处理程序调用的*反馈意见。如果是，为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T11:03:37.597

首先，因为`dlclose()`没有列在 POSIX 函数列表中，可以安全地在信号处理程序中调用。

这样做的原因主要是许多未在此处列出的函数可能会执行诸如分配内存等需要执行可能与信号处理程序存在竞争条件的事情。一个例子是持有一个锁，所以当信号到达当前持有属于 malloc/dlclose 或其他任何锁的线程中时，并且您调用该函数，那么锁已经被锁定，但永远不会被解锁，因为线程当前在信号处理程序中，并且没有“正常”执行。