# StackOverflow 问答 14624000-14624999

# javascript - jquery编程计算与计算

> ID：14624002
> 
> 赞同：0
> 
> 时间：2013-01-31T10:52:43.517
> 
> 标签：javascript, jquery

检查这个小提琴

[http://jsfiddle.net/8FXFE/6/](http://jsfiddle.net/8FXFE/6/)

当单选按钮`name="txtNumber"`更改时，此代码会显示消息。

现在我试图实现的是根据`name="txtSpace"`&`name="txtNumber"`单选按钮的值制作一个公式..

我的目标是，假设有人单击 txtNumber 字段中的单选按钮，而 txtSpace 字段中的另一个选项将在“输出”窗口中进行一些计算。计算可以在 txtNumber 字段 txtSpace 字段中添加所选电台的值。

但我卡在代码中，不知道如何更改它？

垃圾代码

```
<div class="textForm">
<input type="radio" name="txtNumber" value="100" checked="checked" />100
<input type="radio" name="txtNumber" value="200" />200
<input type="radio" name="txtNumber" value="500" />500
<input type="radio" name="txtNumber" value="1000" />1000
<input type="radio" name="txtNumber" value="10000" />10000
<input type="radio" name="txtNumber" value="other" />other
<input type="text" name="other_field" id="other_field" onblur="checktext(this);"
/>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:03:32.030

如果我的问题正确，您希望显示由两个检查的无线电输入确定的输出。

```
$(document).ready(function () {
    console.log("parsed");
    $("input[name='txtNumber'],input[name='txtSpace']").change(function () {
        $("#output").text("Changed to "+$("input[name='txtNumber']:checked").val() + " " +$("input[name='txtSpace']:checked").val()); 
    });
}); 
```

[http://jsfiddle.net/8FXFE/8/](http://jsfiddle.net/8FXFE/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:57:19.930

我认为你只需要建立你的字符串？

[http://jsfiddle.net/8FXFE/7/](http://jsfiddle.net/8FXFE/7/)

```
$("#output").text("Changed to " + $("input[name='txtNumber']:checked").val()); 
```

或者，如果您想结合两个输出，您可以尝试类似...

[http://jsfiddle.net/8FXFE/10/](http://jsfiddle.net/8FXFE/10/)

```
$("#output")[0].innerHTML ="Changed to " + $(this).val() + "<br/>" + 
  $('input[name="txtSpace"]:checked').val() + ' ' +
    $('input[name="txtNumber"]:checked').val(); 
```

..虽然你没有说应该进行什么计算，因为“空间 1 * 1000”没有意义，“RJ * 200”等也没有意义……所以我只是结合了两个无线电选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T11:07:44.943

使用`change()`函数并 `:checked.val()`获取选中单选按钮的值..并将值添加到`txtNumber`和`txtSpace`

试试这个

```
$(document).ready(function () {
  $("input[name='txtNumber'],input[name='txtSpace']").change(function () {
    var totalsum=parseInt($("input[name='txtNumber']:checked").val()) + parseInt($("input[name='txtSpace']:checked").val());
    $("#output").text("Changed to " + totalsum);

  });
}); 
```

[在这里摆弄](http://jsfiddle.net/bipen/8FXFE/9/)

# php - 使用ajax保存数据

> ID：14624003
> 
> 赞同：0
> 
> 时间：2013-01-31T10:52:45.483
> 
> 标签：php, jquery, mysql, ajax

我想在点击时保存四个字段一个是文本框两个复选框和一个使用 ajax 的 wysihtml5Editor 这些如下：

```
<input type="text" id="title" name="title" required title="required" placeholder="title" data-bind="value:title" />
<input type="checkbox" id="active" name="active" class="check" data-bind="checked: active=='true'"  />Active
<input type="checkbox" id="logon" name="logon" class="check" data-bind="checked: use_logo=='true'"  />Logo
<textarea id="iiii" name="iiii" class="htmleditor" rows="9" cols="50" style="width: 600px; height: 190px;"></textarea>
<button type="button" name="save" id="save" class="btn btn-primary">Save</button> 
```

我的表名`contracts`和字段名如下：

```
title(textbox),def_next(wysihtml5Editor),active(checkbox),use_logo(checkbox) 
```

我这样做的条件如下：

```
if ($_POST['what']=="save"){} 
```

我试过ajax作为

```
$.ajax({
        type: 'POST',
        url: root + 'data/comapanydata_contractorslist?json',
        data: {
            what: "save",
            text: $('#iiii').val(),
            def_text: def_text
        },
        success: function (data) {},
        dataType: 'json'
    }); 
```

但不工作所以请建议我这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:33:34.803

这对我有用：

索引.html

```
 <script>
            $(function() {                  
                $("#form").submit(function() {
                    data = $("#form").serialize();
                    $.ajax({
                        type : "GET",
                        url : "save-data.php",
                        data : data,
                        success : function() {
                            $("#form").find("input[type=text], textarea").val("")
                            $("#form").find("input[type=checkbox]").prop('checked', false); 
                        }
                    });
                    return false;
                });
            });
            </script>

            <form action="save-data.php" method="get" id="form">
                <input type="text" id="title" name="title" required title="required" placeholder="title" data-bind="value:title" />
                <input type="hidden" name="active" value="off" />
                <input type="checkbox" id="active" name="active" class="check" data-bind="checked: active=='true'" />Active                 
                <input type="hidden" name="logon" value="off" />
                <input type="checkbox" id="logon" name="logon" class="check" data-bind="checked: use_logo=='true'" />Logo
                <textarea id="iiii" name="iiii" class="htmleditor" rows="9" cols="50" style="width: 600px; height: 190px;"></textarea>
                <input type="submit" name="save" id="save" value="Save" class="btn btn-primary"/>
            </form> 
```

将输入保存到变量：

保存数据.php

```
 <?php 
            $required = array('title', 'iiii', 'active', 'logon');
            $error = false;
            foreach ($required as $field) {
                if (empty($_GET[$field])) {
                    $error = true;
                }
            }

            if (isset($_GET["title"])) {
                if ($error) {
                    echo "All fields are required.";
                } else {
                    $title = $_GET["title"];
                    $active = $_GET["active"];
                    $logon = $_GET["logon"];
                    $iiii = $_GET["iiii"];

                       //mysql query ...
                }
            }
        ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:50:58.023

如果要保存所有 4 个字段，则需要将数据从所有字段传输到服务器端脚本。也许是这样的：

```
$.ajax({
    type: 'POST',
    url: root + 'data/comapanydata_contractorslist?json',
    data: {
        what: "save",
        def_text: $('#iiii').val(),
        title: $('#title').val(),
        active: $('#active').val(),
        use_logo: $('#logon').val()
    },
    success: function (data) {},
    dataType: 'json'
}); 
```

# html - MYSQL 输出到现有的 HTML 模板

> ID：14624008
> 
> 赞同：1
> 
> 时间：2013-01-31T10:52:57.780
> 
> 标签：html, mysql, bash, redeclare

如何使用 MySQL 和 Bash 将结果输出到现有的 html 模板中。

如果我写：

```
mysql --host="${VARS[6]}" --database="${VARS[9]}" --user="${VARS[7]}" \
      --password="${VARS[8]}" --execute="SELECT 1 FROM table_name" \
      --html --skip-column-names > $FILE 
```

我得到结果

```
<TABLE BORDER=1><TR><TR><TD>1</TD></TR></TABLE> 
```

我想得到

```
<TABLE><TR><TR><TD>1</TD></TR></TABLE> 
```

我怎样才能重新声明一个模板，以便 MySQL 是输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:05:45.750

您可以对 MySQL 使用“--xml”选项，然后使用 XSLT 将生成的 XML 输出转换为 HTML 或某种其他形式的 XML。

否则，如果您不需要从 MySQL 检索包含空格的数据，您可以解析“mysql -ss”输出并在 Bash 中生成 HTML。

像这样：

```
mysql -ss your_mysql_option... |
    while read col1 col2 col3; do
        echo "
            <TR>
                <TD>$col1</TD>
                <TD>$col2</TD>
                <TD>$col3</TD>
            </TR>
        "
    done 
```

# java - 无法添加子类 - 必需的论点

> ID：14624017
> 
> 赞同：0
> 
> 时间：2013-01-31T10:53:16.140
> 
> 标签：java, subclass

我正在尝试扩展我的策略类，它需要一个 double 值。我尝试通过

```
public class DepreciablePolicy extends Policy {    

} 
```

但我收到一个错误，“类策略中的策略不能应用于给定类型；必需：双精度，没有发现争论”。我想知道如何解决这个问题？当我使我的 Policy 无效时，extend 语句是有效的，但是如果它是无效的，那么 Policy 方法将不起作用。

```
public class Policy {
   double amount;
   int policyNumber;
   public static int policyCount = 1;

   public Policy(double a){
    amount = a;
    policyNumber = policyCount;
    policyCount ++;
  }

    public boolean isExpired(){
        return false;
    }

    public void print(){
        System.out.print("Policy #" + this.policyNumber + " with amount $" + this.amount);
        }        
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:54:45.220

你的`Policy`类*只有*一个构造函数，它需要一个`double`.

这意味着每个构造函数都`DepreciablePolicy`需要（可能间接地）链接到该构造函数，例如

```
public DepreciablePolicy(double amount) {
    super(amount);
} 
```

当然，你不必让你的`DepreciablePolicy`构造函数只接受一个数量作为参数——你可以添加额外的参数，甚至从其他数据派生超类构造函数参数。例如：

```
public DepreciablePolicy(double amount, double charge) {
    super(amount + charge);
    // Now maybe use the parameters separately
} 
```

甚至：

```
public DepreciablePolicy() {
    super(0); // Or some other value...
} 
```

目前您还没有指定任何构造函数，这意味着编译器正在尝试为您创建一个*默认*构造函数，这相当于：

```
public DepreciablePolicy(double amount, double charge) {
    super(amount + charge);
    // Now use them separately
} 
```

那是失败的，因为`Policy`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:55:32.340

由于您的`Policy`类没有定义无参数默认构造函数，因此您必须从构造函数显式调用超类的构造`DepreciablePolicy` 函数。

```
public class DepreciablePolicy extends Policy {    
public DepreciablePolicy(double d){
super(d)
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:56:28.157

当您扩展一个没有默认或无参数构造函数的类时，您必须显式调用超类构造函数。不然怎么可能`Policy.amount`设置字段值？

在这里你可以做

```
public class DepreciablePolicy extends Policy {    
  public DepreciablePolicy(double d) {super(d);}
} 
```

或者

```
public class DepreciablePolicy extends Policy {    
  public DepreciablePolicy() {super(MY_DOUBLE_CONSTANT);}
} 
```

# java - 从扫描仪读取一个字符

> ID：14624020
> 
> 赞同：0
> 
> 时间：2013-01-31T10:53:32.863
> 
> 标签：java

对不起菜鸟问题。这是我尝试 Java 编程的第一天。我需要帮助检索用户想要与整数一起使用的运算符的用户输入。

```
import java.util.Scanner;

public class calculator {

    public static void main (String args[]) {

        Scanner number = new Scanner(System.in);
        double num1,num2,answer;
        char operator;

        System.out.println("Enter first number: ");
        num1 = number.nextDouble();

        operator = number.nextChar(); /* the "nextChar" is not correct */

        System.out.println("Enter second number: ");
        num2 = number.nextDouble();

        if (operator = '+'){
            answer = num1 + num2; /* If statements do not work like this */
        }                             /* I would use "else if", unsure if it allows */
        if (operator = '-'){
            answer = num1 - num2;
        }
        if (operator = '*'){
            answer = num1 - num2;
        }
        if (operator = '/'){
                answer = num1 / num2;
        }

        System.out.println(num1 + num2 + operator + answer);

    }
} 
```

编辑版本：

```
import java.util.Scanner;

public class calculator{

    public static void main (String args[]) {

        Scanner userInput = new Scanner(System.in);

        String operator;
        double num1,num2,answer = 0;

        System.out.println("Enter first number: ");
        num1 = userInput.nextDouble();

        System.out.println("Enter operator: ");
        operator = userInput.next();

        System.out.println("Enter second number: ");
        num2 = userInput.nextDouble();

        if (operator.equals ("+")){
            answer = num1 + num2;
        }
        else if (operator.equals ("-")){
            answer = num1 - num2;
        }
        else if (operator.equals ("*")){
            answer = num1 * num2;
        }
        else if (operator.equals ("/")){
                answer = num1 / num2;
        }

        System.out.println("First number:" + num1);
        System.out.println("Operator:" + operator);
        System.out.println("Second number:" + num2);

        System.out.println("Answer: " + answer);
    }
} 
```

> 第一个数字：10.0
> 
> 操作员：*
> 
> 第二个数字：3.14
> 
> 答案：31.400000000000002

非常感谢你们！帮助很大！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:55:53.417

在比较中使用 ==，而不是 =（这意味着分配）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:58:44.287

正如其他人已经指出的那样，使用`==`运算符来检查是否相等。操作员将`=`改为分配值。

为了从 中读取单个字符`Scanner`，请查看以下问题：[Scanner method to get a char](https://stackoverflow.com/q/2597841/851811)。在那里你会找到使用[`Scanner.findInLine()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#findInLine(java.lang.String))方法的建议，它接收一个正则表达式作为参数。提供`.`通配符作为模式，您将能够获得一个带有下一个字符的字符串，并[`charAt(0)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#charAt(int))在其上使用，您将获得一个`char`.

```
Scanner sc = new Scanner("abc");
char ch = sc.findInLine(".").charAt(0);
System.out.println(ch); // prints "a" 
```

当然，您也可以只使用`Scanner.next()`将下一个单词作为字符串获取，然后仅获取其第一个字符。但要考虑到这样做会从输入缓冲区中丢弃单词的其余部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T11:11:18.257

好的。这很有效，可以帮助您在通往 Java 的道路上

```
public class Tester4 {

    public static void main(String args[]) {

        Scanner input = new Scanner(System.in);
        double num1, num2, answer = 0;
        String operator;

        System.out.println("Enter first number: ");
        num1 = input.nextDouble();

        System.out.println("Enter operator: ");
        operator = input.next();

        System.out.println("Enter second number: ");
        num2 = input.nextDouble();

        if(operator.equals("+")) {
            answer = num1 + num2;
        } else if(operator.equals("-")) {
            answer = num1 - num2;
        } else if(operator.equals("*")) {
            answer = num1 - num2;
        } else if(operator.equals("/")) {
            answer = num1 / num2;
        }

        System.out.println("First number:" + num1);
        System.out.println("Operator:" + operator);
        System.out.println("Second number:" + num2);

        System.out.println("Answer: " + answer);
    }

} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-31T10:56:52.213

你需要使用

```
if (operator == '+') 
```

注意'双等于'。

# .net - Continuously Windows Service - 重复相同任务的最佳实践

> ID：14624027
> 
> 赞同：0
> 
> 时间：2013-01-31T10:53:59.277
> 
> 标签：.net, windows, .net-4.0, windows-services, garbage-collection

我需要编写一个 Windows 服务，它每 X 分钟执行一次相同的操作。就内存管理而言，实现这一目标的最佳方法是什么（例如，允许 GC 清理）

1）while（true）循环，用我自己的逻辑来确保操作每X分钟发生一次。然而，我担心这会阻止 GC 清理。

2）定时器，有一些逻辑来确保操作是否比定时器间隔更长，它确实开始同时执行两次（比1更复杂）

3) 其他建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:01:18.293

在 (1) 和 (2) 中，没有理由担心 GC。

(1) 如果*我自己的逻辑*不归结为忙循环（这将无缘无故地使用 CPU），则可以。实现该逻辑的最简单方法是`Sleep`X 分钟。

(2) 如果任务定期*开始*很重要：例如，给定 15 分钟的间隔和从 0:00 开始，下一个任务应该在 0:15 开始，下一个任务应该在 0:30 开始，依此类推，而不是“打折”执行任务时经过的时间。

# java - 从手的图像中获取信息

> ID：14624036
> 
> 赞同：2
> 
> 时间：2013-01-31T10:54:21.090
> 
> 标签：java, image-processing

我正在尝试制作一个小软件，它将人手的扫描图像作为输入，并根据手相原理预测未来。想请教一下手头各条线的坐标如何才能准确得到。该方法应该保持通用，因为我没有特定的图像集，它应该适用于所有图像。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:22:59.507

我建议使用`java.lang.Palmistry`包，也可能与`java.lang.FuturePrediction`包结合使用。

除了所有的笑话，这里有一个可能有用的建议：

1.  要求提交者用低且偏向一侧的光源拍摄他们的手，这将在手部的浅脊上投射阴影，从而为您提供更好的手部线条*输入信号*。
2.  其次，对图像的位图数据使用某种边缘检测或边缘增强。这可以通过一个非常标准的[卷积矩阵内核滤波器](http://docs.gimp.org/en/plug-in-convmatrix.html)来实现，也称为[Sobel 算子](http://en.wikipedia.org/wiki/Sobel_operator)。
3.  您可能需要将图像裁剪到手掌上大部分只是一个方形窗口的区域，除非未来也写在手指的线条上。
4.  最后，要获得线条和坐标，您可能需要研究图像矢量化：[霍夫变换](http://en.wikipedia.org/wiki/Hough_transform)特别有效，但是[来自 Microsoft Research 的矢量化算法](http://research.microsoft.com/en-us/um/people/kopf/pixelart/index.html)（2000年[的调查论文](http://link.springer.com/chapter/10.1007%2F3-540-40953-X_2?LI=true#page-1)）和[“Outliner”，一个开源的边缘查找器和矢量化](http://outliner.codeplex.com/)器也可能有用。
    使用您的**边缘增强**图像数据，然后使用这些参考文献中描述的一种方法将其转换为一组矢量，将为您提供至少一些数学公式和存在的线条的坐标。然后，您可以将手分成感兴趣的部分，并检索这些部分中存在的线条的公式。
5.  可以通过某种有监督的机器学习来将公式与其一般形状相匹配，您感兴趣的形状示例就是这些形状的训练数据。您可能还需要考虑使用[Ramer-Douglas-Peucker 算法](http://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm)降低公式的复杂性，作为其中的附加步骤。

希望这可以帮助。顺便说一句，如果您对未来有任何有用的提示，请务必告诉我们！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:29:49.277

你能举个例子吗？

它可能会涉及[模糊](http://en.wikipedia.org/wiki/Gaussian_blur)或[带](http://en.wikipedia.org/wiki/Band-pass_filter)通图像，以便仅保留相关的对比度比例（即，模糊会去除太小的线条和皱纹，带通也会消除尺寸过大的特征）。

之后，您可以使用[霍夫变换](http://en.wikipedia.org/wiki/Hough_transform)来查找图像中线条的长度和方向。

或者，它可能是一种可行的方法来检测线条/皱纹/较暗区域，然后对图像进行[骨架](http://homepages.inf.ed.ac.uk/rbf/HIPR2/skeleton.htm)化。这将为您提供线的分支和端点。

# iphone - 状态栏下方的空白区域

> ID：14624045
> 
> 赞同：0
> 
> 时间：2013-01-31T10:54:58.497
> 
> 标签：iphone, ios, statusbar, uiwindow, cgrect

在应用程序委托中，我使用`[[UIScreen mainScreen] bounds]`（默认情况下）为窗口设置框架。

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]; 
```

但是当我尝试启动应用程序时，我看到我的视图和状态栏之间有空白区域。 ![在此处输入图像描述](../Images/9fff2cb5cf63c8d5e7a26726b331ab9c.png)

如果我这样设置框架

```
CGRect bounds = [[UIScreen mainScreen] bounds];
self.window = [[UIWindow alloc] initWithFrame:CGRectMake(0.0, -20.0, bounds.size.width, bounds.size.height)]; 
```

没问题，但它不会检测到屏幕底部 20 个点的点击。

这里有什么问题？请帮忙。

PS我不使用IB，不要为除窗口之外的任何视图设置框架（因为它没有帮助）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:36:22.853

`wantsFullScreenLayout`通过将根视图控制器的属性设置为`YES`.

PS这不是我`application:didFinishLaunchingWithOptions:`从头开始编写的第一个应用程序，但我从来没有遇到过这个问题......

# android - 适用于 Android 的 Mono：使用微调器和编辑文本的 Listview 滚动问题

> ID：14624047
> 
> 赞同：0
> 
> 时间：2013-01-31T10:55:02.877
> 
> 标签：android, listview, android-edittext, xamarin.android, spinner

我的问题在两个方面。

**第一期**：滚动健忘症

我有一个带有微调器和编辑文本的 ListView。它从网络服务获取数据。问题是当我在 EditText 上写一个值或为微调器选择一些东西并将它们滚动到视野之外时。当我回来时，这些字段是空的，并且微调器再次处于默认选择中。

*尝试* 的解决方案我尝试通过将 ScrollingCacheEnabled 编程和在 AXML 文件中设置为 true 和 false 来解决问题，以查看这是否是一个问题。它似乎没有任何效果。

**第二期**：焦点损失

当我在同一个 ListView 中触摸 EditText 时，我会出现键盘，但我失去了对字段的关注，需要再次触摸它才能获得焦点，它允许我被写入。

*尝试的解决方案* 我摆弄了将字段设置为可聚焦，Focusavle 处于触摸模式，可触摸等等，但空手而归。

老实说，我对 android 和这个级别的编程也很陌生，但我在这方面尽了最大努力。我可能只是因为缺乏知识而错过了一些东西，或者这只是有更多经验的人可以解决和解决的问题。第二个问题目前还不错（在填写了相当多的字段之后，设置两次确实很累......）但是滚动问题是必须的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:08:39.187

我认为您的问题与您在`Adapter`更改`View`包含它们的 s 时忘记更新 s 中的项目有关。因此，您需要连接来自`View`s 的事件以更新项目。

为什么？如果您仔细查看您的值，`Adapter`您会使用 的值`ListView`填充。因此，如果该项目不反映您对 所做的更改，您一定会获得该项目的初始值。`convertView``GetItem(position)``View`

因此，您需要做的是连接`SpinnerValue.ItemSelected`所有其他`View`可以更改的事件，以便`Adapter`更新其中的项目的值。请记住，仅在首次创建`View`. 所以那是什么时候`convertView`为空。

还可以考虑更改行：

```
if (SpinnerValue.Adapter.Count.Equals(2))
{
    SpinnerValue.SetSelection(1);
} 
```

要基于 Adapter 中的项目，而不是每次都设置为 1。

您的焦点问题是基于它`ListView`并不是真正为`View`在其中想要焦点而设计的。尝试将`ListView` `DecendantFocusability`实例化时设置为`DescendantFocusability.AfterDescendants`：

`lstPrevzem.DescendantFocusability = DescendantFocusability.AfterDescendants;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:08:37.233

我通过用 LinearLayout 替换列表视图并将适配器固定到它来解决了这个问题。“固定”代码可在 pastebin 上找到。

**固定代码：**

[http://pastebin.com/vn3SPrFz](http://pastebin.com/vn3SPrFz)

# javascript - javascript空字段表单验证不起作用

> ID：14624050
> 
> 赞同：1
> 
> 时间：2013-01-31T10:55:19.907
> 
> 标签：javascript, validation

嗨，我是 javascript 新手。

我正在尝试实现一些 javascript 表单验证我正在尝试使用此处使用的技术： [http ://www.w3schools.com/js/tryit.asp?filename=tryjs_form_validation](http://www.w3schools.com/js/tryit.asp?filename=tryjs_form_validation) ://www.w3schools.com/js/tryit.asp?filename=tryjs_form_validation 来测试表单中的空字段并使用警报警告用户但这对我不起作用当我提交一个空表单时继续到 jsp 文件并且 javascript 没有捕获错误

这是表单所在的 index.html 文件

```
<html>
  <body>
    <head>
    <script>
        function validateForm()
        {
            var stoneField=document.forms["bmiForm"]["stone"].value;
            var poundsField=document.forms["bmiForm"]["pounds"].value;
            var kgsField=document.forms["bmiForm"]["kgs"].value;
            var feetField=document.forms["bmiForm"]["feet"].value;
            var inchesField=document.forms["bmiForm"]["inches"].value;

            if ( stoneField = null || stoneField = "" && poundsField = null || poundsField = "" && kgsField = null || kgsField = "" && feetField = null || feetField = "" && inchesField = null || inchesField = "" )
            {
              alert("Please enter a weight and height");
              return false;
            }
            else
            {

             return true;
            } 
        }
    </script>
</head>
<form name ="bmiForm" action="PrintBMI.jsp" onsubmit="return validateForm()" method=post  style="width:250px;">
    <fieldset>
    <legend>BMI Calculator</legend>
    <h3>Enter your weight</h3>
    Stone <input type = text name = "stone" size = 1 maxlength = 2>
    Pounds <input type = text name = "pounds" size = 1 maxlength = 2>
    <br>
    <strong>OR</strong>
    <br>
    KGs <input type = text name = "kgs" size = 1 maxlength = 3>

    <h3>Enter your height</h3>
    Feet <input type = text name = "feet" size = 1 maxlength = 1>
    Inches <input type = text name = "inches" size = 1 maxlength = 2>
    <br>
    <strong>OR</strong>
    <br>
    Metres <input type = text name = "metres" size = 1 maxlength = 4>
    <p><input type=submit value = "Get BMI">
    </fieldset>
</form>
</body>
</html>' 
```

有没有人看到我做错了什么。谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:57:26.637

在此代码中替换`=`为：`===`

```
if ( stoneField = null || stoneField = "" && poundsField = null || poundsField = "" && kgsField = null || kgsField = "" && feetField = null || feetField = "" && inchesField = null || inchesField = "" ) 
```

阅读[比较运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:00:31.307

USE == 用于比较值。

在您的代码中替换下面的代码块。

```
if ( stoneField == null || stoneField == "" && poundsField == null || poundsField == "" && kgsField == null || kgsField == "" && feetField == null || feetField == "" && inchesField == null || inchesField == "" ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:58:12.347

```
if ( stoneField = null || stoneField = "" && poundsField = null || poundsField = "" && kgsField = null || kgsField = "" && feetField = null || feetField = "" && inchesField = null || inchesField = "" )
        {
          alert("Please enter a weight and height");
          return false;
        } 
```

在 if 中使用 ===，而不是 =

# android - 创建自定义视图并以编程方式调用它

> ID：14624056
> 
> 赞同：2
> 
> 时间：2013-01-31T10:55:30.123
> 
> 标签：android, view

这是我的自定义视图：

```
public class BuzzView extends View {

    /**
     * Constructor.  This version is only needed if you will be instantiating
     * the object manually (not from a layout XML file).
     * @param context
     */
    public BuzzView(Context context) {
        super(context);
        View.inflate(context, R.layout.buzz_view, null);
    }
} 
```

我的buzz_view.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/vignette_image_jauge"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentRight="true"
        android:src="@drawable/buzzomettre_sample" >
    </ImageView>

</RelativeLayout> 
```

比我想在我的活动中从我的 FrameLayout 添加我的自定义视图：

```
 BuzzView buzzView = new BuzzView(MosaiqueListActivity.this);
    FrameLayout frameLayout = (FrameLayout) 
v.findViewById(R.id.vignette_layout_jauge);
                frameLayout.addView(buzzView); 
```

我没有在我的 RelativeLayout 中获得我的自定义视图。你知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:08:41.077

尝试像这样创建您的 BuzzView

```
public class CustomView {

private Context mContext;
private View mCustomView;
private LayoutInflater mInflater;
public CustomView(Context context) {
    // TODO Auto-generated constructor stub
    mContext = context;
    mInflater = (LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

public View getView() {
    if(mCustomView==null) {
        mCustomView = mInflater.inflate(R.layout.customView, null);
        //initialize all the child here
    }
    return mCustomView;
}
} 
```

在添加视图时，只需在您的活动中调用 getView() 方法

```
CustomView mCustomView = new CustomView(MyActivity.this);
layout.addView(mCustomView.getView(), new LayoutParams(LayoutParams.WRAP_CONTENT,    LayoutParams.WRAP_CONTENT)); 
```

# heroku - AWS VPC 中的 Heroku 应用程序

> ID：14624064
> 
> 赞同：3
> 
> 时间：2013-01-31T10:56:16.207
> 
> 标签：heroku, amazon-web-services, vpc

我有一个小型 Rails 应用程序，我很想通过 Heroku 部署它（就像我对其他客户所做的那样），但这并不是一个公开可用的应用程序，他们需要将它部署在他们的 AWS VPC 中，就好像它可以在其中访问一样他们的内部网络。

这是可能的吗？我知道 Heroku 是建立在 EC2 之上的，但不确定它有多灵活，也找不到任何文档。

如果不可能的话，任何人都能够提供我可以使用的预构建 Rails AMI 的体验，以便复制一些以简化 Heroku 部署，而不必过多担心为应用程序配置和管理我自己的基础架构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:29:33.977

听起来[git-deploy](https://github.com/mislav/git-deploy)可能是 git 风格部署所需要的。

我还发现[了 Giles Bowkett 的一篇非常有趣的博文](http://gilesbowkett.blogspot.co.uk/2012/06/heroku-style-deployment-on-ec2.html)，你可能会很感兴趣。

# c# - 将对象转换为数字类型并检查值

> ID：14624067
> 
> 赞同：0
> 
> 时间：2013-01-31T10:56:28.517
> 
> 标签：c#, .net, windows-8, windows-store-apps

我正在使用 .NET 为 Windows Store 应用程序编写一个[多元化框架。](http://unicode.org/cldr/charts/supplemental/language_plural_rules.html)对于自定义格式化程序`string Format(string format, params object[] args)`，我有以下代码：

```
public static bool IsExactlyOne(object n)
{
    if (n is Int16)
    {
        return (Int16)n == 1;
    }
    if (n is int) // Int32
    {
        return (int)n == 1;
    }
    if (n is long) // Int64
    {
        return (long)n == 1L;
    }
    if (n is UInt16)
    {
        return (UInt16)n == 1U;
    }
    if (n is uint) // UInt32
    {
        return (uint)n == 1U;
    }
    if (n is ulong) // UInt64
    {
        return (ulong)n == 1UL;
    }
    if (n is byte)
    {
        return (byte)n == 1;
    }
    if (n is sbyte)
    {
        return (sbyte)n == 1;
    }
    if (n is float)
    {
        return (float)n == 1.0F;
    }
    if (n is double)
    {
        return (double)n == 1.0D;
    }
    if (n is decimal)
    {
        return (decimal)n == 1.0M;
    }

    throw new ArgumentException("Unsupported type");
} 
```

如您所见，它非常冗长。有什么方法可以简化这个吗？请注意：`IConvertible`不适**用于**Windows 应用商店应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:05:08.867

如何使用字典来避免`if`：

```
var dic = new Dictionary<Type, Func<object, bool>>()
                    {
                        {typeof(Int16), a => (Int16)a == 1},
                        {typeof(int), a => (int)a == 1},
                         ....
                    };

return dic[n.GetType()](n); 
```

或使用`dynamic`：

```
public static bool IsExactlyOne(dynamic n)
{
    return n == 1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:16:58.370

这应该可以正常工作：

```
 bool IsExactlyOne(object n)
    {
        int i;
        int.TryParse(n.ToString(), out i);
        return i == 1;
    } 
```

除非在处理像 1.000000000000001 这样的高精度数字时，这是 OP 版本中已经存在的问题。

**处理高精度的唯一方法是显式使用小数。**

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-31T11:08:35.357

你去：

```
public static bool IsExactlyOne(object n)
{
bool result = false;
try
{
result = Convert.ToDouble(n) == 1.0;
}
catch
{
}
return result;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-31T11:09:12.097

[请在此处](https://stackoverflow.com/questions/1130698/checking-if-an-object-is-a-number-in-c-sharp)查看接受的答案。

```
string value = "123.3";
double num;
if (!double.TryParse(value, out num))
  throw new InvalidOperationException("Value is not a number."); 
```

# java - 将内容动态添加到菜单

> ID：14624070
> 
> 赞同：0
> 
> 时间：2013-01-31T10:56:33.453
> 
> 标签：java, javafx-2, javafx

在我的 JavaFX 应用程序中，我正在将我的代码从纯 Java 移植到 FXML，并且遇到了一个问题。

我的数据库中有一个项目列表。当我进入`Open Project`菜单时，我想扫描数据库，然后将内容显示`MenuItem`为`Menu`. 在 FXML 中最好的方法是什么？还是其他什么手续？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T21:59:31.473

一种可能的解决方案是为菜单的“onShowing”事件定义一个事件处理程序，并在该事件处理程序中添加/删除菜单项。 [http://docs.oracle.com/javafx/2/api/javafx/scene/control/Menu.html#setOnShowing(javafx.event.EventHandler)](http://docs.oracle.com/javafx/2/api/javafx/scene/control/Menu.html#setOnShowing(javafx.event.EventHandler))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:04:51.650

单程：

*   在 FXML 中指定菜单的 id
*   在控制器中声明一个与 id 同名的 Menu 变量，并用 FXML 进行注解
*   使用 Java 代码向此菜单添加动态菜单项

# android - 如何在 Android 中将 .amr 文件附加到邮件

> ID：14624072
> 
> 赞同：0
> 
> 时间：2013-01-31T10:56:36.103
> 
> 标签：android, email-attachments

我想在附件中附加 amr 文件，但我无法附加。我的代码如下：

```
Intent emailIntent = new Intent(
                Intent.ACTION_SEND);
        Uri U = Uri.parse(path of amr file);
        //System.out.println("uri is:" + U);
        emailIntent.putExtra(Intent.EXTRA_EMAIL,
                new String[] { "" });
        emailIntent.putExtra(
                android.content.Intent.EXTRA_SUBJECT,
        " from ..");
        emailIntent.putExtra(
                android.content.Intent.EXTRA_TEXT, ""
                + "\n" + "\n" + "Through application name");

        emailIntent.setType("audio/rfc822");

        //emailIntent.setType("audio/*");
        // emailIntent.putExtra(android.content.Intent.EXTRA_STREAM,U);
        emailIntent.putExtra(Intent.EXTRA_STREAM, U);
        startActivity(Intent.createChooser(emailIntent,
        "")); 
```

我用过**emailIntent.setType("audio/rfc822") ， emailIntent.setType("audio/*"); 和 emailIntent.setType("audio/amr")**；但没有运气

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:00:34.873

你试过用吗，

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND_MULTIPLE); 
```

**活动行动：**将多个数据传递给其他人。

# php - 使用php以ms-access格式备份mysql数据库

> ID：14624076
> 
> 赞同：0
> 
> 时间：2013-01-31T10:56:40.370
> 
> 标签：php, mysql, backup

我正在使用**mysqldump**使用**PHP将****MySQL**中可用的数据库备份到创建 .SQL 文件的 sql 转储格式。如果我想查看/检查备份文件，那么我必须先导入它才能检查/验证/查看需要大量时间的数据。

 **问题/问题是是否有某种方法可以以**其他格式**（如 MS-ACCESS 等**而不是 sql 转储 .sql 文件）创建 MySQL 数据库的备份副本？**

它将使打开和检查数据库备份文件变得容易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:53:33.463

基本上你不能这样做，mysqldump实际上是一个sql文件，它有插入数据的插入语句，而Ms-access有一个accdb，它是实际存储数据的地方。

您正在运行的导入实际上需要 sql 文件并将其插入到您的访问数据库中。**

# asp.net-mvc - .NET MVC 显示 ViewData()

> ID：14624080
> 
> 赞同：1
> 
> 时间：2013-01-31T10:56:45.847
> 
> 标签：asp.net-mvc

没错。我在 Visual Studio 中创建了一个 Internet 应用程序类型的新项目。

在 HomeController.vb 文件中，我有：

```
Function Index() as ActionResult
    ViewData("Message") = "Page Title"
    Return View()
End Function 
```

在视图“Index.aspx”中，我需要在我拥有的“< h1 >”标签之间显示该视图数据。

我环顾四周，发现有人说要打字：

```
 <%= ViewData["Message"] %>
or
 <% @ViewData["Message"] %> 
```

但这些都不起作用:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T11:00:15.027

您可能使用了错误的支架？不应该吗？

`<%= ViewData("Message") %>`

编辑：这是一个 VB.Net 教程：[http ://www.asp.net/mvc/tutorials/older-versions/views/asp-net-mvc-views-overview-vb](http://www.asp.net/mvc/tutorials/older-versions/views/asp-net-mvc-views-overview-vb)

见标题`Using View Data to Pass Data to a View`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T11:02:03.793

就像您在控制器的操作中所做的那样，您应该使用

```
<%= ViewData("Message") %>   <---- VB 
```

目前您正在使用 C# 语法

```
<%= ViewData["Message"] %>   <---- C# 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T11:02:45.210

像这样使用

```
<%=Html.Encode(ViewData("message"))%> 
```

Html.Encode() HTML Helper 将特殊字符（如 < 和 >）编码为可安全显示在网页中的字符。每当您呈现用户提交到网站的内容时，您都应该对内容进行编码以防止 JavaScript 注入攻击。

# .net - Linq 存储过程插入没有结果

> ID：14624081
> 
> 赞同：0
> 
> 时间：2013-01-31T10:56:46.470
> 
> 标签：.net, vb.net, linq, linq-to-sql, stored-procedures

我试图用 Linq To SQL 的存储过程插入数据。我没有收到错误消息，并且我的数据没有被插入。代码在 vb 中，因为我也在这个项目中使用 xml。

代码

```
 Using db As New booksDataContext()

        db.testprocedure("kkk")
        db.SubmitChanges()

        End Using 
```

存储过程

```
ALTER PROCEDURE testprocedure

(
@test varchar(50)
)

AS
BEGIN
INSERT INTO test (testcolum)
VALUES (@test)
END 
```

我可以在调试时将它放入这个函数并且它返回 0

```
<Global.System.Data.Linq.Mapping.FunctionAttribute(Name:="dbo.testprocedure")>  _
Public Function testprocedure(<Global.System.Data.Linq.Mapping.ParameterAttribute(DbType:="VarChar(50)")> ByVal test As String) As Integer
    Dim result As IExecuteResult = Me.ExecuteMethodCall(Me, CType(MethodInfo.GetCurrentMethod,MethodInfo), test)
    Return CType(result.ReturnValue,Integer)
End Function 
```

我已经完成了一个可以完美运行的 Select，因此它的数据上下文没有错

```
 Sub SelectAllBooks()

    Dim db As New booksDataContext()

    For Each book In db.SelectBooks("Madde")

        Dim title = book.title
        Dim author = book.author
        Dim genre = book.genre
        Dim price = book.price
        Dim publish_date = book.publish_date
        Dim description = book.description
        Dim bookid = book.bookid

        Console.WriteLine(title & " " & author & " " & genre & " " & price & " " & publish_date & " " & description & " " & bookid)

    Next
    Console.ReadLine()
End Sub 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:15:07.637

检查这是一个非常好的教程：

[LINQ to SQL（使用存储过程更新我们的数据库）](http://weblogs.asp.net/scottgu/archive/2007/08/23/linq-to-sql-part-7-updating-our-database-using-stored-procedures.aspx)

此外，检查`test`表中的值是否正确插入。

除非另有说明，否则所有系统存储过程都返回值 0。这表示成功，非零值表示失败。

[返回（事务处理 SQL）](http://msdn.microsoft.com/en-us/library/ms174998%28v=sql.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-30T01:54:37.133

你的桌子上有主键吗？这是我能够让 INSERT/UPDATE/DELETE 方法通过 LINQ 工作的唯一方法。

# objective-c - 需要在 iOS 中解析文本

> ID：14624086
> 
> 赞同：-1
> 
> 时间：2013-01-31T10:57:30.890
> 
> 标签：objective-c

我有一些包含“ `#`”标志内的图像链接的文本，我需要用真实图像替换图像链接的出现。
例如：

> **`#http://mysite.com/images/fox.jpg#`**懒狗跳的敏捷棕狐**`#http://mysite.com/images/dog.jpg`#**

所以这需要解析成两个文本块：

```
The big brown fox

jumped of the lazy dog 
```

和两个单独的链接：

```
http://mysite.com/images/fox.jpg

http://mysite.com/images/dog.jpg 
```

我可以用什么来在 Xcode 中实现这个目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T11:17:12.320

`<img>`您可以使用正则表达式轻松地将 URL 替换为标签：

```
NSString *string = @"The quick brown fox #http://mysite.com/images/fox.jpg# jumped of the lazy dog #http://mysite.com/images/dog.jpg#";
NSMutableString *mutableString = [NSMutableString stringWithString:string];
NSString *pattern = @"#(http.*?)#";
NSString *replacement = @"<img src=\"$1\"/>";
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:pattern options:0 error:NULL];
[regex replaceMatchesInString:mutableString
                      options:0
                        range:NSMakeRange(0, mutableString.length)
                 withTemplate:replacement]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:04:41.637

这是一个快速的方法：

```
NSString *sentence = @"The quick brown fox #http://mysite.com/images/fox.jpg# jumped of the lazy dog #http://mysite.com/images/dog.jpg#";
NSArray *stringBits = [sentence componentsSeparatedByString: @"#"]; 
```

每次有哈希字符时，这都会拆分句子。之后，您可以编写一个方法来检测 NSString 是否为链接。也请查看[文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsstring_Class/Reference/NSString.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T11:12:14.507

如果可能，在服务器端编辑字符串，例如使用 , 作为分隔符。然后你的字符串看起来像这样

**敏捷的棕狐，# [http](http://mysite.com/images/fox.jpg#) ://mysite.com/images/fox.jpg#，从懒狗身上跳了下来，# http: [//mysite.com/images/dog.jpg#](http://mysite.com/images/dog.jpg#)**。在此之后在您的代码中使用这些行。

NSArray *arr = [str componentSeparatedBy:@","];
一个接一个地取出字符串并检查每个字符串是否有 http 。基于http使用链接

# javascript - JavaScript：如何从字符串中删除任何包含（或直接位于其前面）大写字母、数字或逗号的单词？

> ID：14624087
> 
> 赞同：0
> 
> 时间：2013-01-31T10:57:34.987
> 
> 标签：javascript, jquery, regex, string, replace

我正在尝试编写代码，以便从字符串（文本）中删除“坏”字。

如果单词后面有逗号或任何特殊符号，则该单词是“坏的”。`a to z`如果仅包含（小写字母），则该词不是“坏” 。

所以，我想要达到的结果是：

```
<script>
String.prototype.azwords = function() {
   return this.replace(/[^a-z]+/g, "0");
}

var res = "good Remove remove1 remove, ### rem0ve? RemoVE gooood remove.".azwords();//should be "good gooood"
//Remove has a capital letter
//remove1 has 1
//remove, has comma
//###  has three #
//rem0ve? has 0 and ?
//RemoVE has R and V and E
//remove. has .
alert(res);//should alert "good gooood"
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:03:36.590

好的，首先你可能想`\b`在你的正则表达式中使用边界转义这个词。此外，如果匹配坏词有点棘手，因为坏词可能包含小写字符，因此您当前的正则表达式将排除任何包含小写字母的内容。

我很想挑出好词并将它们放入一个新字符串中。这是一个更容易的正则表达式。

```
/\b[a-z]+\b/g 
```

注意：我不完全确定它是否适用于字符串中的第一个和最后一个单词，因此您可能还需要考虑这一点。[http://www.regextester.com/](http://www.regextester.com/)非常有用。

编辑：由于您希望单词后的标点符号为“坏”，这实际上会按照我的建议进行

```
(^|\s)[a-z]+(\s|$) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:05:17.520

尝试这个：

```
return this.replace(/(^|\s+)[a-z]*[^a-z\s]\S*(?!\S)/g, ""); 
```

它尝试匹配一个单词（由空格/字符串结尾包围）并包含任何（非空格）字符，但至少包含一个不是`a-z`. 然而，这是相当复杂且不可维护的。也许您应该尝试一种更实用的方法：

```
return this.split(/\s+/).filter(function(word) {
    return word && !/[^a-z]/.test(word);
}).join(" "); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T11:12:37.930

试试这个：

```
 var res = "good Remove remove1 remove, ### rem0ve? RemoVE gooood remove.";     
 var new_one = res.replace(/\s*\w*[#A-Z0-9,.?\\xA1-\\xFF]\w*/g,'');

//Output `good gooood` 
```

*说明*：

```
 \s*           # zero-or-more spaces
             \w*           # zero-or-more alphanumeric characters 
             [#A-Z0-9,.?\\xA1-\\xFF]  # matches any list of characters
             \w*           # zero-or-more alphanumeric characters

             /g  - global (run over all string) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T11:23:21.893

首先，如果可以避免的话，我不建议更改 String（或任何本机对象）的原型，因为您可能会与可能以不同方式定义相同属性的其他代码发生冲突。将这样的自定义方法放在命名空间对象上要好得多，尽管我相信有些人会不同意。

第二，有没有必要完全使用RegEx？（真正的问题；不要开玩笑。）

[这](http://jsfiddle.net/guypursey/BxGND/2/)是一个简单的旧 JS 函数的示例，在这里和那里使用了一点点正则表达式。更易于评论、调试和重用。

这是代码：

```
var azwords = function(str) {
   var arr = str.split(/\s+/),
       len = arr.length,
       i = 0,
       res = "";
   for (i; i < len; i += 1) {
       if (!(arr[i].match(/[^a-z]/))) {
           res += (!res) ? arr[i] : " " + arr[i];
       }
   }
   return res;
}

var res = "good Remove remove1 remove, ### rem0ve? RemoVE gooood remove."; //should be "good gooood"

//Remove has a capital letter
//remove1 has 1
//remove, has comma
//###  has three #
//rem0ve? has 0 and ?
//RemoVE has R and V and E
//remove. has .

alert(azwords(res));//should alert "good gooood"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T11:58:22.153

这将找到您想要的所有单词 /^[az]+\s|\s[az]+$|\s[az]+\s/g 以便您可以使用匹配。

`this.match(/^[a-z]+\s|\s[a-z]+$|\s[a-z]+\s/g).join(" ");`应该返回有效单词的列表。

请注意，这需要一些时间作为 JSFiddle，因此拆分和迭代您的列表可能更有效。

# php - 将文件名添加到数据库而不上传

> ID：14624088
> 
> 赞同：0
> 
> 时间：2013-01-31T10:57:36.360
> 
> 标签：php, mysql, file, upload

我正在制作一个用于将文件添加到数据库的系统。我使用一个表格：

```
<form action="insert.php" method="post" enctype="multipart/form-data">
Fil: <input type="file" name="file" id="file">
Titel: <input type="text" name="titel" /><br />
Längd (min): <input type="text" name="langd" /><br />
Medverkande: <input type="text" name="medverkande" /><br />
Reporter: <input type="text" name="reporter" /><br />
Fotograf: <input type="text" name="fotograf" /><br />
Sökord: <input type="text" name="sokord" /><br />
<input type="submit" />
</form> 
```

insert.php 中的代码：

```
<?php
$con = mysql_connect("database","user","password");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("165666-kltvplay", $con);

$filnamn = $_FILES["file"]["name"] ;
$sql="INSERT INTO Blad1 (ProgramID, Titel, Langd, Medverkande, Reporter, Fotograf, Sokord)
VALUES
('$filnamn','$_POST[titel]','$_POST[langd]','$_POST[medverkande]','$_POST[reporter]','$_POST[fotograf]','$_POST[sokord]')";

if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
echo "En ny film inlagd: <br> ";
echo $filnamn;

mysql_close($con);
?> 
```

但是当我添加文件时，它似乎正在上传整个文件，因为我的浏览器中有一个 % 计数器，并且需要很长时间才能完成（文件很大）。我只想要插入到数据库中的文件的名称（这是有效的），而不是上传整个文件。

是否可以只添加名称而不添加文件扩展名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:05:14.283

你必须做一些 JavaScript 魔术。用户选择文件后，您可以读取文件名：

```
var fileName = document.getElementById('file').value; 
```

然后将该值放入隐藏的输入字段（即在您的表单内）：

```
document.getElementById('hidden-filename').value = fileName; 
```

然后挂钩到表单的提交事件并删除文件输入，这样它就不会被提交。

在服务器上，您读取`hidden-filename`（或任何名称）的值并将其插入数据库。

请注意，并非所有浏览器都会返回实际的文件路径。文件名是正确的，但路径可能不正确。

另请注意，您将无法对此文件执行任何操作（在服务器或客户端上）。

至于你有的最后一个问题（没有扩展名），看看这个：[PHP，获取没有文件扩展名的文件名](https://stackoverflow.com/questions/2183486/php-get-file-name-without-file-extension)

# java - 更改 swt 下拉列表元素顺序

> ID：14624101
> 
> 赞同：1
> 
> 时间：2013-01-31T10:58:36.953
> 
> 标签：java, swt, jface

我是 SWT 新手，有一个项目要求我更改下拉列表中元素的顺序，该列表包含数据库中按顺序字母排序的数据存储，而我想更改顺序下拉列表中的元素，有人可以告诉我下拉列表如何从数据库中获取数据列表以及如何更改顺序？非常感谢。

下面是创建对象的代码，我想知道如何改变列表的顺序。谢谢你。

```
public final Object[] getElements(final Object inputElement) {
    if (inputElement != null) {
        if (inputElement instanceof Test) {
            return getTest((EngdynoRequest) engDynoRequest).toArray();
        }
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T04:16:25.907

`ComboViewer`您可能想查看几种方法

```
StructuredViewer.java

public void setComparer(IElementComparer comparer) 

public void setComparator(ViewerComparator comparator)

public void setSorter(ViewerSorter sorter) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:12:57.323

制作您自己的对象列表，然后您可以按照您需要的任何方式对其进行排序，之后您可以使用有序元素制作下拉列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T18:33:38.910

如果您正确定位了用于填充组合框的方法，则可以在此处对对象列表进行排序。

```
return getTest((EngdynoRequest) engDynoRequest).toArray(); 
```

可以替换为

```
Object[] unsorted = getTest((EngdynoRequest) engDynoRequest).toArray();
return Arrays.sort(unsorted); 
```

如果您想要自定义排序顺序，您可以通过 [Arrays.sort传递您自己的比较器](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28T%5B%5D,%20java.util.Comparator%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-28T08:17:54.633

这可能更容易理解：

```
 // Re-sort
      String[] items = combo.getItems();
      Arrays.sort(items);
      combo.setItems(items); 
```

# python - 亚马逊 s3 的 boto 加密密钥

> ID：14624104
> 
> 赞同：4
> 
> 时间：2013-01-31T10:58:48.980
> 
> 标签：python, amazon-s3, boto

正如我在函数调用中看到的那样`set_contents_with_filename`，`set_contents_with_file`我可以将加密设置为 true，而在 s3 中，它保持加密状态

我有一些疑问

1.  如果可能的话，我想知道哪个是用于加密文件的密钥。

2.  如果加密设置为 true，则加密发生在服务器端，对吗？

3.  如果加密，在下载时，对象在s3中解密然后开始下载？还是在下载时发生解密？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T11:19:57.833

您可能指的两个函数是[set_contents_from_filename](http://boto.cloudhackers.com/en/latest/ref/s3.html#boto.s3.key.Key.set_contents_from_filename)和[set_contents_from_file](http://boto.cloudhackers.com/en/latest/ref/s3.html#boto.s3.key.Key.set_contents_from_file)

> 如果可能的话，我想知道哪个是用于加密文件的密钥。

当前的服务器端加密方法是[AES256](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard) ( [Source](http://aws.typepad.com/aws/2011/10/new-amazon-s3-server-side-encryption.html) )，密钥是在服务器端生成的。

> 如果加密设置为真，加密发生在服务器端，对吗？

是的，数据被上传，然后在服务器端加密。如果您愿意，您还可以在上传之前在客户端上加密数据，但这意味着，为了阅读，您还必须在客户端上对其进行解密。如果您不想在 s3 服务器之间传输纯数据，则可以使用 SSL 端点

> 加密，下载时，对象在s3中解密，然后开始下载？还是在下载时发生解密？

上传设置了加密标头的文件后，s3 将加密您的文件以进行存储并在请求时对其进行解密。该文件以加密版本保存在物理存储中

**[AWS 博客](http://aws.typepad.com/aws/2011/10/new-amazon-s3-server-side-encryption.html)中的工作流程插图**

![加密工作流程，来自亚马逊博客](../Images/49ff82085f9e666757eaffd9584815ed.png)

# c# - C# 结构和指针

> ID：14624108
> 
> 赞同：0
> 
> 时间：2013-01-31T10:59:02.783
> 
> 标签：c#, .net, pointers, blockingcollection

我需要使用阻塞集合，以便可以异步调用委托。不幸的是，委托有两个参数，由一个结构和一个附加字符串组成。使用该结构是因为它是通过 Interop 调用外部 c 函数的结果。
现在我正在寻找一种在使用阻塞集合时避免复制结构的方法。
目前我的代码如下所示：

```
ConsumerQueue.Enqueue(new StructTransfer(structValue, stringValue)); 
```

消费者然后解包 StructTransfer。

StructTransfer 目前看起来像这样

```
public struct Transfer{
    public StructValue structValue;
    public string stringValue;
    public Transfer(StructValue structValue, string stringValue){
      this.structValue=structValue;
      this.stringValue = stringValue;
    }
} 
```

有没有一种简单的方法可以使用指针来避免构造函数中的复制语句，以便我可以轻松地使用阻塞集合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:42:29.253

最好的方法是先创建传输类。
使用该结构作为传输类的一个字段，并在调用互操作时使用该字段作为参数。我想在这种情况下没有办法避免公共领域。
因此，应尽量减少内存使用量，减少一份副本的发生。

# ios - iOS 上 Objective-C 中位图的 2D 动画 - 如何获得最佳性能？

> ID：14624115
> 
> 赞同：1
> 
> 时间：2013-01-31T10:59:27.370
> 
> 标签：ios, objective-c, animation, 2d

屏幕上有一些移动位图，动画不流畅。我正在使用 UIImageViews 和 animateWithDuration。我可以做些什么来提高性能？有什么我应该遵循的指导方针吗？我是否需要不同的方法，例如使用 CGLayer 或 openGL？如果是这样，你能指点我一些开始的文章/教程吗？

谢谢，尼姆罗德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:29:46.420

您应该考虑`CALayer`为此使用： [https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004514](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004514)

如果这还不够，您可能需要使用 cocos2d。它可能看起来有点矫枉过正，但用它做 2D 动画相当容易：http: [//www.cocos2d-iphone.org](http://www.cocos2d-iphone.org)

# sql-server - 经典 ASP 在 URL 中返回结果的 ID

> ID：14624120
> 
> 赞同：-1
> 
> 时间：2013-01-31T11:00:10.397
> 
> 标签：sql-server, asp-classic

在经典 ASP 网站和 MSSQL 数据库中：完成数据搜索后，URL 会显示结果的**ID**。例如 sitename/Display_Results.asp?cboService= **253** &cboRegion= **588**。确定返回ID的脚本或代码在哪里，是页面代码还是数据库存储过程？我想在 URL 中显示 Id 的描述。

```
 <%@ language="vbscript" codepage="1252"%>
   <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"    "http://www.w3.org/TR/html4/loose.dtd">

   <%
   sRoot = ""`

   Function alert(msg,where)
   %> 
   alert('<%="Message = "&msg&"\nWhere = "&where%>') <% end function

   fFunction Ceiling(byval n) Dim iTmp, bErr

   on error resume next
    n = cdbl(n)
    if err then bErr = true
    on error goto 0

    if bErr then Err.Raise 5000, "Ceiling Function", _
    "Input must be convertible to a sub-type of double"

    f = Floor(n)
     if f = n then
    Ceiling = n
    Exit Function
     End If

     Ceiling = cInt(f + 1)
        End Function
        %>

        <html>

        <head>

         <!--#include file="includes/scripts/Includes.asp"-->

        <%
    Call WriteServiceMetaData(objConn, strConn)
        %>

        <script type="text/javascript" src="includes/scripts/javascript.js"></script>
        <script type="text/javascript" src="includes/scripts/pngfix.mod.js"></script>
        <script type="text/javascript" src="includes/scripts/swfobject.js"></script>
        <script type="text/javascript" src="swfobject/swfobject.js"></script>
        <script type="text/javascript">

        function showborder(idnew,argsnew){

    var idnew = idnew;
        var argsnew = argsnew;
    if(argsnew == "on"){
    document.getElementById(idnew).style.border='2px solid #759fb9';
     }
    else{
    document.getElementById(idnew).style.border='';
    }

        }
        </script>
        <script type="text/javascript">
        function showpng(idnew,argsnew){
    var idnew = idnew;
    var argsnew = argsnew;
    if(argsnew == "on"){
    document.getElementById(idnew).style.visibility='';
    }
    else{
    document.getElementById(idnew).style.visibility='hidden';
     }

        }
        </script>

         <link rel="stylesheet" type="text/css" href="<%=sRoot%>css/universal.css">
         </head>
         <%
     Dim maxResults
     Dim DRCountry_ID, Country_Variable
     Dim DRCounty_ID, County_Variable
     Dim DRLocation, Location_Variable
     Dim DRType_ID, DRType_ID_Array, Type_Variable, cType_Variable
     Dim End_request, LUXSQL
     Dim Query, Query_Result
     Dim Page_Num, HOTSQL, HOTOFFER, Text, DRTube_ID, DRPrice_Min, DRPrice_Max,    Tube_Variable, DRPrice, Price_Variable
      Dim lCityID, lCountyID, lCountryID

     set objRS = objConn.execute ("General_Admin_List")
     maxResults = objRS("Num_Results")
     objRS.Close
     set objRS = nothing
     'on error resume next
     'Page_Num= clng(Request.QueryString("Page_Num"))
     'if err.number <> 0 then
    'Page_Num = 0
      'end if
      'on error goto 0
          if strcomp(Request.ServerVariables("REQUEST_METHOD"), "POST", 1) = 0 then

      on error resume next
      if len(trim(Request.Form("HotOffer"))) > 0 then
    iHotOffer = 1
      else
    iHotOffer = 0
       end if

        on error resume next
       'Turn off error handling
        company = trim(request.Form("company"))
        if company = "Enter Name" then
    company = ""
       end if
      if err.number <> 0 then
      'If there is an error then the requested input is not a number
    company = "null"
       end if
       err.clear
      'Turn error handling back on
       on error goto 0

       lCountyID = clng(trim(Request.Form("cboRegion")))
       if err.number <> 0 then
    lCountyID = 0
       end if
       err.clear

       lCountryID = clng(trim(Request.Form("cboCountry")))
       if err.number <> 0 then
    lCountryID = 0
        end if
        err.clear

        lFeatureID = clng(trim(Request.Form("cboFeature")))
        if err.number <> 0 then
    lFeatureID = 0
        end if
        err.clear

        lServiceID = clng(Request.Form("cboService"))
        if err.number <> 0 or lServiceID < 1 then
    lServiceID = 0
        else        
    session("SearchServiceID") = lServiceID

        end if
         err.clear

        lCityID = clng(Request.Form("cboCity"))
        if err.number <> 0 or lCityID < 1 then
    lCityID = 0
        end if

        sTypes = trim(Request.Form("asfTypes"))
        session("searchTypes") = sTypes
        on error goto 0
            else

        on error resume next
       'Turn off error handling
        company = trim(request.QueryString("company"))
        if company = "Enter Name" then
    company = ""
        end if
        if err.number <> 0 then
        'If there is an error then the requested input is not a number
    company = "null"
        end if
        err.clear
      'Turn error handling back on
       on error goto 0

        on error resume next
        if len(trim(Request.QueryString("HotOffer"))) > 0 then
    iHotOffer = 1
        else
    iHotOffer = 0
        end if

        lCountyID = clng(trim(Request.QueryString("cboRegion")))
        if err.number <> 0 then
    lCountyID = 0
        end if
         err.clear
        lCountryID = clng(trim(Request.QueryString("cboCountry")))
        if err.number <> 0 then
    lCountryID = 0
        end if
        err.clear

        lFeatureID = clng(trim(Request.QueryString("cboFeature")))
        if err.number <> 0 then
    lFeatureID = 0
        end if
         err.clear

         lServiceID = clng(Request.QueryString("cboService"))

        if err.number <> 0 or lServiceID < 1 then
    lServiceID = 0
         else
    session("SearchServiceID") = lServiceID

        end if
        err.clear

        if request.QueryString("asfFeatures") <> "" then
    lFeatureID = clng(Request.QueryString("asfFeatures"))
    if err.number <> 0 or lFeatureID < 1 then
        lFeatureID = 0
    end if
    err.clear
        end if

         lCityID = clng(Request.QueryString("CityID"))
         if err.number <> 0 or lCityID < 1 then
    lCityID = 0
        end if

        sTypes = trim(Request.QueryString("asfTypes"))
        'Response.Write(sTypes)
        session("searchTypes") = sTypes
         on error goto 0

             end if

            if lCityID = 0 then
         sCity = trim(Request.QueryString("City"))
         if len(sCity) = 0 then
    lCityID = 0
        else
    set objRS = objConn.execute ("City_Lookup '" & Replace(sCity, "'", "''") & "'")
     if objRS.EOF then
        lCityID = 999999
     else
        lCityID = objRS("City_ID")
        lCountyID = objRS("County_ID")
        lCountryID = objRS("Country_ID")
     end if
     objRS.Close
     set objRS = nothing
         end if
             end if
            'This below was commented out, seems to do nothing
        ' Not using location finder just yet
         dim sURL
          sURL = "Select_Location.asp?location=" &   Server.URLEncode(trim(Request.QueryString("SLocation"))) & "&Search=" & Request.QueryString("Search")
          sURL = sURL & "&Service=" & lServiceID
          sURL = sURL & "&Types=" & sTypes
         DRLocation = replace(trim(Request.QueryString("SLocation")), "'", "''")
        if len(DRLocation) > 0 then ' and lCountryID = 0 then
    set objRS = Server.CreateObject("ADODB.Recordset")
    objRS.CursorLocation = 3
    objRS.Open "City_Lookup '" & DRLocation & "'," & lCountyID & ", " & lCountryID, objConn
      if objRS.RecordCount > 1 then
        objRS.Close
        objConn.close
        response.Redirect(sURL)
      end if
      if not objRS.eof then
        lCityID = clng(objRS("City_ID"))
        lCountyID = clng(objRS("County_ID"))
        else
        objRS.Close
        objRS.Open "County_Lookup '" & DRLocation & "', " & lCountryID, objConn
          if objRS.RecordCount > 1 then
            objRS.Close
            objConn.close
            response.Redirect(sURL)
         end if
         if not objRS.eof then
            lCountyID = clng(objRS("County_ID"))
         else
            objRS.Close
            objConn.close
            response.Redirect(sURL)
         end if
              end if

        objRS.Close
         set objRS = nothing
         end if
    'This above was commented out, seems to do nothing
      dim lSearchID
      lSearchID = 0

       if len(sTypes) > 0 then
        Application.Lock()
        if Application("LSG_SearchID") = "" then
            lSearchID = 1
        else
            lSearchID = clng(Application("LSG_SearchID")) + 1
        end if
        Application("LSG_SearchID") = lSearchID
        Application.UnLock()
        objConn.execute "Value_Splitter '" & sTypes & "', ',', " & lSearchID
    end if

    objConn.CursorLocation = adUseClient
    set objComm = Server.CreateObject("ADODB.Command")
    set objComm.ActiveConnection = objConn
    objComm.CommandText = "Search"
    objComm.CommandType = adCmdStoredProc
    objComm.Parameters.Append objComm.CreateParameter ("@City_ID", adInteger, adParamInput)
    objComm.Parameters.Append objComm.CreateParameter ("@County_ID", adInteger, adParamInput)
    objComm.Parameters.Append objComm.CreateParameter ("@Country_ID", adInteger, adParamInput)
    objComm.Parameters.Append objComm.CreateParameter ("@Service_ID", adInteger, adParamInput)
    objComm.Parameters.Append objComm.CreateParameter ("@Search_ID", adInteger, adParamInput)
    objComm.Parameters.Append objComm.CreateParameter ("@Feature_ID", adInteger, adParamInput)
    objComm.Parameters.Append objComm.CreateParameter ("@Specialist_Area", adBoolean, adParamInput, , iHotOffer)
    objComm.Parameters.Append objComm.CreateParameter ("@ResultCount", adInteger, adParamOutput)
    objComm.Parameters.Append objComm.CreateParameter ("@Company", adVarchar, adParamInput, 255)

    if lCountryID > 0 then
        objComm.Parameters("@Country_ID") = lCountryID
    end if
    if lCountyID > 0 then
        objComm.Parameters("@County_ID") = lCountyID
    end if
    if lCityID > 0 then
        objComm.Parameters("@City_ID") = lCityID
    end if
    if lServiceID > 0 then
        objComm.Parameters("@Service_ID") = lServiceID
    end if
    if lFeatureID > 0 then
        objComm.Parameters("@Feature_ID") = lFeatureID
    end if
    if lSearchID > 0 then
        objComm.Parameters("@Search_ID") = lSearchID
    end if

    if company = "null" then
        objComm.Parameters("@Company") = null
    else
        objComm.Parameters("@Company") = company
    end if

    'Query = "Search " & paramCity & ", " & paramCounty & ", " & paramCountry
'end if

        'response.End()
        'Set Query_Result = Server.CreateObject("ADODB.Recordset")
        'Response.Write("Query"&Query)
         set Query_Result = objComm.Execute()
        lResultCount = objComm.Parameters("@ResultCount").value
         lSearchCity = lCityID

        if lServiceID > 0 then

        SELECT_SQL = "Service_Get "& lServiceID
    Set SELECT_SQL_RESULT = Server.CreateObject("ADODB.Recordset")
        SELECT_SQL_RESULT.Open SELECT_SQL, ObjConn
    do while not SELECT_SQL_RESULT.eof
    service = SELECT_SQL_RESULT("service")
    service_description = SELECT_SQL_RESULT("Service_Description")
        SELECT_SQL_RESULT.MoveNext
    Loop
        SELECT_SQL_RESULT.Close
        end if              

            'Get city (set email location) from search and put into cookie
         if Request.QueryString("CityID") > 0 Then
    GetCity = "getCity "&Request.QueryString("CityID")
    Set GetCity_Result = Server.CreateObject("ADODB.Recordset")
    GetCity_Result.Open GetCity, ObjConn
    if not GetCity_Result.eof then
        emailCity = GetCity_Result("City")
    end if  
    Response.Cookies("LSG")("Location") = emailCity
    Response.Cookies("LSG").Expires= DateAdd("d", Date(), 365)
       end if
            %>
            <%
            Dim SELECT_SQL, SELECT_SQL_RESULT
            Dim Top_PAGECONTENT_Title, Top_PAGECONTENT_Content
            Dim Bottom_PAGECONTENT_Title, Bottom_PAGECONTENT_Content

            Dim page_name, url,sPath
            sPath=""
            url = request.ServerVariables("URL")
            page_name = right(url, len(url) - instrrev(url, "/"))

            SELECT_SQL = "Page_Content_Get '"& page_name &"'"
            Set SELECT_SQL_RESULT = Server.CreateObject("ADODB.Recordset")
            SELECT_SQL_RESULT.Open SELECT_SQL, ObjConn

            do while not SELECT_SQL_RESULT.eof
        If SELECT_SQL_RESULT("Position") = "Page Top" then
    Top_PAGECONTENT_Title = SELECT_SQL_RESULT("Title")
    Top_PAGECONTENT_Content = SELECT_SQL_RESULT("Content")
    Top_PAGECONTENT_Content = Replace(Top_PAGECONTENT_Content, vbcrlf, "<br>")
        end if
        SELECT_SQL_RESULT.MoveNext
            Loop
            SELECT_SQL_RESULT.Close
             %>

               <body>
           <div class="SiteContainer">
           <!--#include file="includes/content/banner_rotator.asp"-->
       <div class="LeftSiteContainer">  
        <!--#include file="includes/content/hdg_left.asp"-->
        <!--#include file="includes/content/hdg_Header2.asp"-->
        <div class="indexMainContainer">
            <div id="mainLeftContent">

                <div class="MainContent">                   

                    <%                          
                        if service = "" then
                            service = "Boat and Yacht products and services"
                        end if
                        if emailcity = "" then
                            emailcity = "Boat Chandlers Guide"
                        end if
                    %>
            <%If not Query_Result.EOF Then%>
                        <span style="color:#1A59CD;"><h1><%=service%></h1></span>   
                        <span style="color:#1A59CD;"><h2><%=Service_Description%></h2></span>
                        <div style="color:#666666; float:left; padding-top:8px;">Your search returned <span style="color:#1A59CD; font-weight:bold;"><%=lResultCount%></span> result<%if lResultCount > 1 then response.write "s" end if%> for <!--<%=emailcity%> to--> <%=service%> </div>     
                        <div style="clear:both;">   </div>&nbsp;                                                
                        <!--<h2><%=emailcity%> search results for <%=service%></h2>-->
                    <% else %>
                        <div style="clear:both;"></div>&nbsp;
                        <span style="color:#1A59CD;"><h1><%=emailcity%> <%=service%></h1></span>
                            <div class="search_no_results">                          
                          <strong>Sorry, there are currently no <%=service%> featured on <%=emailcity%> at this time.</strong>
                        </div>
                    <% End If %>
                <%If not Query_Result.EOF Then
                    numResults = maxResults 'The Number of Results to Display on each page                      
                    count = lResultCount                        
                    dim Number_array, Total_Pages
                    Number_Array = split(((count-1) / numResults),".")                      
                    Total_Pages = count \ numResults                            
                    if count mod numResults > 0 then
                        Total_Pages = Total_Pages + 1
                    end if
                    %>                      
                <%end if

                If Query_Result.EOF Then%>
                    <div class="search_no_results">
                      <strong>Sorry, no results were found that match your search criteria.</strong>
                    </div>
                <% End If

                Dim count, strt, endd, numResults, tr_count
                tr_count = 0
                '-----------------------------------------------'
                ' Set the Number of the first record to display '
                '-----------------------------------------------'
                if not Query_Result.eof then
                    strt = cint(Request.queryString("results"))
                    if (strt = null) OR (strt <= 0) then
                        strt = 1
                    end if
                    endd = strt + numResults-1
                    if numresults = 1 then
                        Page_Num = strt
                    else

                        Page_Num = strt \ numresults
                        Page_Num = Page_Num + 1
                    end if
                end if
                count = 1

                PageEnd = Page_Num * numResults
                PageStart = PageEnd - 20    
                if PageEnd > lResultCount then
                    pageEnd = lResultCount                                  
                end if  

                if request.QueryString("st") = "" then
                    CurrentPageNumber = 1
                else
                    CurrentPageNumber = request.QueryString("st") 
                end if

                'How many on first number
                FirstNum = numResults * (CurrentPagenumber - 1) - (numResults -1)                               
                if clng(CurrentPageNumber) < clng(Total_Pages) then                                             
                    if clng(Total_Pages - 1) = clng(CurrentPageNumber) then
                        high = CurrentPageNumber + 1
                    else
                        high = CurrentPageNumber + 2
                    end if                  
                end if

                'How many on last number
                LastNum = numResults * (CurrentPagenumber + 1) - (numResults-1)                                             
                LastCount =  ((Total_Pages - 1) * numResults) + 1   

                if lResultCount > 0 then%>
                    <DIV class="displayResultsPageNumberContainer">                                         
                        <div class="displayResultsPrevious">                                
                            <% if Page_Num > 1 then %>
                                <A id="Page<%=PageNumber%>" style="color:#6b98b4;" href="Display_Results.asp?cboCountry=<%=lCountryID%>&cboFeature=<%=request.QueryString("cboFeature")%>&cboRegion=<%=lCountyID%>&cboService=<%=lServiceID%>&asfTypes=<%=sTypes%>&CityID=<%=lSearchCity%>&asfFeatures=<%=lFeatureID%><%if iHotOffer > 0 then response.Write("&HotOffer=Y") end if%>&results=<%=FirstNum%>&st=<%=CurrentPagenumber-1%>"><<Previous</A>          
                            <% else %>
                                &nbsp;                              
                            <% end if %>
                        </div>

                        <% if cint(Page_Num) < cint(Total_Pages) then 
                            %>                                  
                            <div style="float:right; margin-right:10px;"><A style="color:#6b98b4;" id="Page<%=PageNumber%>" href="Display_Results.asp?cboCountry=<%=lCountryID%>&cboFeature=<%=request.QueryString("cboFeature")%>&cboRegion=<%=lCountyID%>&cboService=<%=lServiceID%>&asfTypes=<%=sTypes%>&CityID=<%=lSearchCity%>&asfFeatures=<%=lFeatureID%><%if iHotOffer > 0 then response.Write("&HotOffer=Y") end if%>&st=<%=CurrentPagenumber+1%>&results=<%=LastNum%>">Next >></a></div>
                        <% end if %>            
                    </DIV>
                <%end if

                Do Until Query_Result.EOF or count > endd
                    if (count >= strt) AND (count <= endd) then
                        Image_Query = "Advert_Images_Get "&Query_Result("Advert_ID")
                        Set Image_Query_Result = Server.CreateObject("ADODB.Recordset")
                        Image_Query_Result.Open Image_Query, ObjConn
                        if not Image_Query_Result.eof then
                            ImgThumb = replace(Image_Query_Result("Image_Name"),".jpg","_db_mid.jpg")

                        else
                            ImgThumb = "1pxSpacer.gif"
                        end if

                        %>
                        <div class="search_result_advert">
                            <% newCity = replace(Query_Result("City"),",","_") %>
                            <div class="search_result_advert_img">
                                <div><a title="View Advert - <%=Query_Result("Title")%>" href="<%=getFilename(newCity, Query_Result("Title"), Query_Result("Advert_ID"))%>"><img  src="adverts_pics/<%=ImgThumb%>" alt="<%=Query_Result("Title")%>" border="0" /></a></div>                             
                            </div>
                            <div class="search_result_advert_details">
                                <div style="float:right;"><a style="color:#6b98b4;" title="View Advert - <%=Query_Result("Title")%>" href="<%=getFilename(newCity, Query_Result("Title"), Query_Result("Advert_ID"))%>">More Info</a></div>
                                <h3><a id="Result<%=Query_Result("Advert_ID")%>" title="View Advert - <%=Query_Result("Title")%>" href="<%=getFilename(newCity, Query_Result("Title"), Query_Result("Advert_ID"))%>"><%=ucase(TruncateString(Query_Result("Title"),30))%></a></h3>                                                      
                                <div style="margin-top:5px;"><%=TruncateString(Query_Result("Description"), 320)%></div>
                            </div>                          
                        </div>
                        <div style="margin-top:10px; height:5px;"></div>
                        <%
                    end if
                    count = count + 1
                    Query_Result.MoveNext
                Loop

                %>

                <%if lResultCount > 0 then%>
                    <DIV class="displayResultsPageNumberContainer">                                         
                        <div class="displayResultsPrevious">                                
                            <% if Page_Num > 1 then %>
                                <A style="color:#6b98b4;" id="Page<%=PageNumber%>" href="Display_Results.asp?cboCountry=<%=lCountryID%>&cboFeature=<%=request.QueryString("cboFeature")%>&cboRegion=<%=lCountyID%>&cboService=<%=lServiceID%>&asfTypes=<%=sTypes%>&CityID=<%=lSearchCity%>&asfFeatures=<%=lFeatureID%><%if iHotOffer > 0 then response.Write("&HotOffer=Y") end if%>&results=<%=FirstNum%>&st=<%=CurrentPagenumber-1%>"><< Previous</A>             
                            <% else %>
                                &nbsp;                          
                            <% end if %>
                        </div>
                        <!--<div class="displayResultsPageNumber">Displaying <b><%=PageStart%> - <%=PageEnd%> of <%=lResultCount%> Search Results for </b></div>-->
                        <% if cint(Page_Num) < cint(Total_Pages) then 
                            %>                                  
                            <div style="float:right; margin-right:10px;"><A style="color:#6b98b4;" id="Page<%=PageNumber%>" href="Display_Results.asp?cboCountry=<%=lCountryID%>&cboFeature=<%=request.QueryString("cboFeature")%>&cboRegion=<%=lCountyID%>&cboService=<%=lServiceID%>&asfTypes=<%=sTypes%>&CityID=<%=lSearchCity%>&asfFeatures=<%=lFeatureID%><%if iHotOffer > 0 then response.Write("&HotOffer=Y") end if%>&st=<%=CurrentPagenumber+1%>&results=<%=LastNum%>">Next >></a></div>
                        <% end if %>            
                    </DIV>
                <%end if%>  

                <br/>
                <br/>
                <div class="advanced_bg">
                    <div style="float:left;"><img src="images/img_advanced.jpg" alt="Advanced Search"/></div>
                    <div id="advanced_title">  <%=Top_PAGECONTENT_Title%></div>
                    <%=Top_PAGECONTENT_Content%>
                </div>      

            </div>
            <%
            '<!--#include file="includes/content/hdg_right.asp"-->  
            %>
        </div>
    </div>      
    <div id="footer"><!--#include file="includes/content/hdg_Footer.asp"-->    </div>
</div>  
                   </body>
                       </html>
                       <!--#include file="includes/scripts/DatabaseConnectClose.asp"--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:13:13.863

如果没有您显示代码，将很难确定到底发生了什么，但我最好的猜测是您的表单方法设置为“get”而不是“post”。

正是由于这个原因，所有这些值对都显示在 URL 中。另外，你也想在那里的ID，这可能是目前在隐藏的领域？？

# python - Python / PySide / Qt：找出插槽内的信号名称

> ID：14624124
> 
> 赞同：0
> 
> 时间：2013-01-31T11:00:18.947
> 
> 标签：python, signals, pyside, introspection

在一个小型 python 2.7 项目中使用 pyside qt 绑定模块，我想找出信号的来源。所以在一个槽内，我想有一些方法来询问这个槽实际上是用什么信号触发的。

我发现这为我提供了实际发件人对象的干净调试符号：

```
sigItem = "<anonymous>" if not self.sender() else \
          re.search('<(.+) object at .+>', repr(self.sender()), 0).group(1) 
```

但到目前为止，我发现的所有识别导致该插槽被调用的实际信号显然是调用者对象内的信号索引：

```
sigIndex = self.senderSignalIndex() 
```

那么我怎样才能找到实际的信号*名称*呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T12:20:59.263

您可以使用索引来获取 QMetaMethod，但仅此而已。显然，Qt 不想让你知道更多。

```
from PyQt4 import QtCore

senderSignalId = None

class Sender(QtCore.QObject):

    signal1 = QtCore.pyqtSignal()
    signal2 = QtCore.pyqtSignal()

class Receiver(QtCore.QObject):

    @QtCore.pyqtSlot()
    def slot(self):
        global senderSignalId
        senderSignalId = self.senderSignalIndex()

sender = Sender()
receiver = Receiver()
sender.signal1.connect(receiver.slot)
sender.signal2.connect(receiver.slot)

sender.signal1.emit()
print sender.metaObject().method(senderSignalId).signature() // signal1()

sender.signal2.emit()
print sender.metaObject().method(senderSignalId).signature() // signal2() 
```

# jquery - Jquery Accordion 没有在 ajax 调用上触发

> ID：14624125
> 
> 赞同：0
> 
> 时间：2013-01-31T11:00:23.623
> 
> 标签：jquery, ajax, accordion

我将输出页面中的源代码复制到下面的文件中，这样您就可以看到我在说什么：

[http://playerspace.com/mysource.html](http://playerspace.com/mysource.html)

我们正在查看的是最近的活动 ajax（由于某种原因，它不适用于此输出版本）。我希望只看代码就足以诊断它。

无论如何，问题是“评论”链接，它是一个显示扩展文本区域的手风琴。在时间线中接下来的 5 个项目的 ajax 加载后，评论链接（部分或全部）完全停止响应。

我尝试将手风琴代码直接添加到 ajax 调用中，但它仍然无法始终如一地执行。

```
 $(document).on("click",'.siteusemore',function()
    {
    var ID = $(this).attr("id");
    var myscript = window.siteusemore_script || null;       
    if(ID)
    {
    $("#siteusemore"+ID).html('<img src="/images/processing.gif" />');                  
    $.ajax({
    type: "POST",
    url: myscript,
    data: "lastmsg="+ ID, 
    cache: false,
    success: function(html){                                    
        $("ol#siteuseupdates").append(html);                                            
        $("#siteusemore"+ID).remove();
        $('.accordionContent,.accordionContent-settings').hide();   
        $('.accordionContent,.accordionContent-manuallyadd').hide();                                
        $('.accordion-comments').live("click",function(event){
        var target=$(this).attr('href');
        if($(target).css('display')=='none')
        {
            $(target).show();
            $(this).text('Hide Comments');
        }
        else
        {
            $(target).hide();
            $(this).text('Comments');
        }
        return false;
        });                         
    }
    });
    }
    else
    {
        $(".siteusemorebox").html('The End');
        $('.accordionContent,.accordionContent-settings').hide();   
        $('.accordionContent,.accordionContent-manuallyadd').hide();                                
        $('.accordion-comments').live("click",function(event){
        var target=$(this).attr('href');
        if($(target).css('display')=='none')
        {
            $(target).show();
            $(this).text('Hide Comments');
        }
        else
        {
            $(target).hide();
            $(this).text('Comments');
        }
        return false;
        });                         
    }               
    return false;
}); 
```

我刚开始使用 ajax，我可以在这里使用帮助。我想我的问题是让在我的 site.js 文件（位于页面底部）中执行的代码与每个 ajax 加载一致地触发？

**另外我不知道这是否有帮助，但问题似乎发生在所有其他 ajax 调用上，这很奇怪。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:05:36.173

我认为您需要重新启动手风琴。将此代码添加到您的成功 ajax 调用回调中：

```
$("#accordion").accordion("destroy");
$("#accordion").accordion({collapsible: true,header: "h3",active: false}); 
```

这应该将手风琴应用于正确的 div，请用“h3”替换您的标题 div。

# sql - 如何基于 Date 旋转 Datetime 类型实施检查

> ID：14624127
> 
> 赞同：1
> 
> 时间：2013-01-31T11:00:26.687
> 
> 标签：sql, sql-server-2005, pivot, unpivot

我想透视“Person_Log”表数据。它的列如下：

```
EmployeeID-> Foreign key
Log-> DateTime type 
```

“日志”的格式是`"1/22/2013 2:02:34 PM"`

我想根据日志列中的日期检查创建数据透视，然后显示每个日期时间的最小值和最大值......它是一种出勤报告......所需的列就像......

```
EmployeeID, 01-Jan IN, 01-Jan OUT, 02-Jan IN, 02-Jan OUT, 03-Jan IN, 03-Jan OUT.....and so on.. 
```

EmployeeID 以外的列应该只包含从“Log”列中提取的时间。对于提取，我使用 convert(char(10), Log, 101) 作为 Date 和 convert(char(5), Log, 108)时间提取目的..

我一天达到的最好成绩是这样的：

```
SELECT   dbo.DoorLog.EmployeeID, 
         CONVERT(char(10), 
         MIN(dbo.DoorLog.DateTime), 101) AS Date, 
         CONVERT(char(8), MIN(dbo.DoorLog.DateTime), 108) AS INTime, 
         CONVERT(char(8), MAX(dbo.DoorLog.DateTime), 108) AS OUTTime, 
         dbo.Person.Name, dbo.Person.Department, dbo.Person.Sex, 
         dbo.Person.WorkUnit, 
         dbo.Person.Position
FROM dbo.DoorLog 
INNER JOIN dbo.Person ON dbo.DoorLog.EmployeeID = dbo.Person.EmployeeID
GROUP BY CONVERT(char(10), dbo.DoorLog.DateTime, 101), 
         dbo.DoorLog.EmployeeID, dbo.Person.Name, dbo.Person.Department, 
         dbo.Person.Sex, dbo.Person.WorkUnit, dbo.Person.Position; 
```

请回复，因为我在两天的最后期限内运行..提前谢谢

正如你所问...样本数据..

```
Log                           EmployeeID 
2013/01/31 12:31              11
2013/01/25 10:31              10
2013/01/23 13:29              8
2013/01/20 11:49              4 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T17:02:28.240

此数据转换是一个[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx). 在 SQL Server 2005+ 中有一个函数可以为您旋转数据。有几种方法可以获得您想要的结果。两个版本都将实现 the`UNPIVOT`和 then`PIVOT`函数。

**样本数据：**

```
CREATE TABLE Person ([EmployeeId] int, [Name] varchar(4));

INSERT INTO Person  ([EmployeeId], [Name])
VALUES
    (11, 'Jim'),
    (10, 'John'),
    (8, 'Mary'),
    (4, 'Tim');

CREATE TABLE DoorLog([EmployeeId] int, [DoorDate] datetime);

INSERT INTO DoorLog ([EmployeeId], [DoorDate])
VALUES
    (11, '2013-01-31 12:31:00'),
    (11, '2013-01-31 16:50:00'),
    (11, '2013-01-31 17:50:00'),
    (10, '2013-01-25 10:31:00'),
    (10, '2013-01-25 16:45:00'),
    (8, '2013-01-23 13:29:00'),
    (8, '2013-01-23 18:25:00'),
    (4, '2013-01-20 11:49:00'),
    (4, '2013-01-20 19:10:00'),
    (11, '2013-01-15 11:15:00'),
    (11, '2013-01-15 16:25:00'),
    (10, '2013-01-10 09:21:00'),
    (10, '2013-01-10 15:45:00'),
    (8, '2013-01-08 01:29:00'),
    (8, '2013-01-08 02:25:00'),
    (4, '2013-01-06 10:17:00'),
    (4, '2013-01-06 19:10:00'); 
```

您的查询从获取每个日期的最小值/最大值的员工列表开始：

```
select p.employeeid,
  p.name,
  convert(char(10),d.doordate, 101) date,
  min(d.doordate) [In],
  max(d.doordate) [Out]
from person p
left join doorlog d
  on p.employeeid = d.employeeid
group by p.employeeid, p.name, 
  convert(char(10),d.doordate, 101) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/bb56a/37)

下一步是`UNPIVOT`将输入/输出时间的单独列放入多行中：

```
select employeeid, name, 
      convert(char(8), doortime, 108) DoorTime,
      date + '_'+ col as col_names
from
(
  select p.employeeid,
      p.name,
      convert(char(10),d.doordate, 101) date,
      min(d.doordate) [In],
      max(d.doordate) [Out]
  from person p
  left join doorlog d
      on p.employeeid = d.employeeid
  group by p.employeeid, p.name, 
      convert(char(10),d.doordate, 101)
) src
unpivot
(
  doortime
  for col in ([In], [Out])
) unpiv 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/91442/2)。结果将如下所示：

```
| EMPLOYEEID | NAME | DOORTIME |      COL_NAMES |
-------------------------------------------------
|          4 |  Tim | 10:17:00 |  01/06/2013_In |
|          4 |  Tim | 19:10:00 | 01/06/2013_Out |
|          4 |  Tim | 11:49:00 |  01/20/2013_In |
|          4 |  Tim | 19:10:00 | 01/20/2013_Out | 
```

一旦你得到这个结果，你就可以应用枢轴。如果您提前知道日期值，则可以对这些值进行硬编码，如下所示：

```
select *
from
(
  select employeeid, name, 
    convert(char(8), doortime, 108) DoorTime,
    date + '_'+ col as col_names
  from
  (
    select p.employeeid,
      p.name,
      convert(char(10),d.doordate, 101) date,
      min(d.doordate) [In],
      max(d.doordate) [Out]
    from person p
    left join doorlog d
      on p.employeeid = d.employeeid
    group by p.employeeid, p.name, 
      convert(char(10),d.doordate, 101)
  ) src
  unpivot
  (
    doortime
    for col in ([In], [Out])
  ) unpiv
) p
pivot
(
  max(doortime)
  for col_names in ([01/06/2013_In], [01/06/2013_Out],
                    [01/08/2013_In], [01/08/2013_Out],
                    [01/10/2013_In], [01/10/2013_Out],
                    [01/15/2013_In], [01/15/2013_Out],
                    [01/20/2013_In], [01/20/2013_Out],
                    [01/23/2013_In], [01/23/2013_Out],
                    [01/31/2013_In], [01/31/2013_Out])
) piv 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/91442/1)。

但是对于您的情况，您可能需要使用动态 SQL 来生成结果，因为您很可能希望任何一个月的动态结果。它的动态 SQL 版本是：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT ',' + QUOTENAME(date +'_'+Logname) 
                    from
                    (
                      select doordate,
                        convert(char(10),doordate, 101) date, 
                        LogName
                      from DoorLog
                      cross apply
                      (
                        select 'In' LogName
                        union all
                        select 'Out' 
                      ) l
                    ) s   
                    group by convert(char(10), doordate, 112), date, Logname
                    order by convert(char(10), doordate, 112)
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
    = 'select employeeid, name, '+@cols+'
       from
       (
         select employeeid, name, 
          convert(char(8), doortime, 108) DoorTime,
          date + ''_''+ col col_names
         from
         (
            select p.employeeid,
              p.name,
              convert(char(10),d.doordate, 101) date,
              min(d.doordate) [In],
              max(d.doordate) [Out]
            from person p
            left join doorlog d
              on p.employeeid = d.employeeid
            group by p.employeeid, p.name, 
              convert(char(10),d.doordate, 101)
         )src
         unpivot
         (
           doortime
           for col in ([In], [Out])
         ) unpiv
       ) p
       pivot
       (
          max(doortime)
          for col_names in('+@cols+')
       ) piv'

execute(@query) 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/bb56a/36)。

两个查询的结果是：

```
| EMPLOYEEID | NAME | 01/06/2013_IN | 01/06/2013_OUT | 01/08/2013_IN | 01/08/2013_OUT | 01/10/2013_IN | 01/10/2013_OUT | 01/15/2013_IN | 01/15/2013_OUT | 01/20/2013_IN | 01/20/2013_OUT | 01/23/2013_IN | 01/23/2013_OUT | 01/25/2013_IN | 01/25/2013_OUT | 01/31/2013_IN | 01/31/2013_OUT |
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|         11 |  Jim |        (null) |         (null) |        (null) |         (null) |        (null) |         (null) |      11:15:00 |       16:25:00 |        (null) |         (null) |        (null) |         (null) |        (null) |         (null) |      12:31:00 |       17:50:00 |
|         10 | John |        (null) |         (null) |        (null) |         (null) |      09:21:00 |       15:45:00 |        (null) |         (null) |        (null) |         (null) |        (null) |         (null) |      10:31:00 |       16:45:00 |        (null) |         (null) |
|          8 | Mary |        (null) |         (null) |      01:29:00 |       02:25:00 |        (null) |         (null) |        (null) |         (null) |        (null) |         (null) |      13:29:00 |       18:25:00 |        (null) |         (null) |        (null) |         (null) |
|          4 |  Tim |      10:17:00 |       19:10:00 |        (null) |         (null) |        (null) |         (null) |        (null) |         (null) |      11:49:00 |       19:10:00 |        (null) |         (null) |        (null) |         (null) |        (null) |         (null) | 
```

# c# - 设置 ComboBox.DroppedDown = false 重置所选项目

> ID：14624129
> 
> 赞同：1
> 
> 时间：2013-01-31T11:00:29.543
> 
> 标签：c#, winforms

我有一个继承表单 Forms.ComboBox 类的自定义 ComboBox。它的 DataSource 是绑定的。其属性初始化如下：

```
this.AutoCompleteMode = System.Windows.Forms.AutoCompleteMode.Suggest;
this.AutoCompleteSource = System.Windows.Forms.AutoCompleteSource.ListItems;
this.DropDownStyle = ComboBoxStyle.DropDown; 
```

OnDropDown 将其 AutoCompleteMode 设置为 None，然后在 OnDropDownClosed 中再次设置为 Suggest（避免出现此处描述的问题[WinForms ComboBox DropDown 和 Autocomplete 窗口都出现](https://stackoverflow.com/questions/3064780/winforms-combobox-dropdown-and-autocomplete-window-both-appear)）

我实现了一个逻辑，它验证 ComboBox 并在键入某些文本时选择第一个匹配项。

当显示 DropDown 并且用户键入内容并按 Enter 时，将选择第一个匹配项。然后我想关闭 DropDown。我通过将 ComboBox.DroppedDown 属性设置为 false 来做到这一点。问题是当 DropDown 以这种方式关闭时，选定的项目会重置为先前选定的项目。不调用 OnSelectedIndexChanged、OnSelectionChangeCommitted 和 OnSelectedValueChanged。

我通过记住在 OnSelectedIndexChanged 中选择的索引并在 OnDropDownClosed 中再次设置它来处理它（在手动关闭 DropDown 的条件下）。

**问题：** 为什么当 ComboBox 的 DroppedDown 属性设置为 false 时，所选项目、索引、文本和值会重置？还有另一种没有这种副作用的手动关闭组合框的方法吗？

**编辑**：说明问题的代码：

```
List<string> list = new List<string>();
            list.Add("item0");
            list.Add("item1");
            list.Add("item2");
            list.Add("item3");
            list.Add("item4");

            customComboBox1.DataSource = list; 
```

...

```
public class CustomComboBox : ComboBox
    {

        public CustomComboBox(){ }

        #region OnKeyDown
        protected override void OnKeyDown(KeyEventArgs e)
        {
            if (!this.Enabled) e.Handled = true;
            else
            {
                base.OnKeyDown(e);
                if (e.KeyCode == Keys.Enter)
                {
                    this.SelectedIndex = 2; // index changes here

                    Console.WriteLine("ENTER - before DroppedDown=false " +
                        this.SelectedIndex + " " + this.Text);

                    if (this.DroppedDown)
                    { 
                        // here index = 2, text = Item2
                        this.DroppedDown = false; 
                        // here index = previous index, text is still Item2
                        // different thing is displayed than is actually chosen
                        // OnSelectedIndexChanged wasn't raised
                    }

                    Console.WriteLine("ENTER - after DroppedDown=false " +
                        this.SelectedIndex + " " + this.Text);

                    e.Handled = true;
                }
            }
        }
        #endregion

        #region OnSelectedIndexChanged
        protected override void OnSelectedIndexChanged(EventArgs e)
        {
             Console.WriteLine("OnSelectedIndexChanged " +
                 this.SelectedIndex + " " + this.Text);

                base.OnSelectedIndexChanged(e);
        }
        #endregion

        #region OnDropDownClosed

        protected override void OnDropDownClosed(EventArgs e)
        {
            Console.WriteLine("OnDropDownClosed " +
                 this.SelectedIndex + " " + this.Text);

            base.OnDropDownClosed(e);

        }

        #endregion

    } 
```

控制台输出是这样的（选择项：0，按回车的时候尝试改成2，关闭DropDown后索引还是0）：

> OnSelectedIndexChanged 0 项目0
> 
> OnSelectedIndexChanged 2 item2
> 
> ENTER - 在 DroppedDown=false 2 item2 之前
> 
> OnDropDownClosed 0 item2
> 
> ENTER - 在 DroppedDown=false 0 item2 之后

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T04:27:13.967

```
 protected override void OnDropDownClosed(EventArgs e)
    {
        Console.WriteLine("OnDropDownClosed " +
             this.SelectedIndex + " " + this.Text);

        int idx = this.SelectedIndex;

        base.OnDropDownClosed(e);

        this.SelectedIndex = idx;

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-13T13:50:26.873

我发现设置 SelectedItem 比设置 SelectedIndex 更可靠。

//这也会改变 SelectedIndex 并触发 SelectedItemChanged 事件。

this.SelectedItem = this.Items[idx];

# linux - 脚本和空格

> ID：14624132
> 
> 赞同：0
> 
> 时间：2013-01-31T11:00:33.157
> 
> 标签：linux, macos, bash, replace

我有一个简单的 bash 查找和替换脚本 'script.sh' ：

```
#!/bin/bash 
find . -type f -name '.' -exec sed -i '' "s/$1/$2/" {} + 
```

当我运行命令 ./script.sh foo bar 时，它可以工作。假设现在我的两个输入字符串 $1 和 $2 是句子（带有空格），我怎样才能使脚本将它们中的每一个都识别为整个字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:05:52.200

在引号中添加每个句子`"`

```
#!/bin/bash
echo $1
echo $2 
```

输出

```
$ ./tmp.sh "first sentence" "second sentence"
first sentence
second sentence 
```

编辑：

试试这个：

```
#!/bin/bash
find . -type f -exec sed -i "s/$1/$2/" {} + 
```

输出：

```
$ cat test1.txt 
ola sdfd
$ ./tmp.sh "ola sdfd" "hello world"
$ cat test1.txt 
hello world
$ ./tmp.sh "hello world" "ols asdf"
$ cat test1.txt 
ols asdf 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:06:43.423

你试过用\屏蔽空格吗？例如：this\ is\ sample\ string\ with\ 空格

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T11:14:43.390

您只需将脚本称为：

```
./myscript  "sentence 1 with spaces" "sentence 2" 
```

但是您可能必须“转义”特殊字符（或使用 sed 以外的其他字符）

您可能想要添加`g`到 sed`s/.../.../`构造，以便它替换同一行上的多个出现。

而且你不能有一个带有 a 的字符串`/`，因为你`/`用作 sed 的分隔符。（您可以将该分隔符更改为任何内容，例如不太可能的`%`：） `s%$1%$2%g`

# sql-server - 从 RDS SQL 导出数据

> ID：14624134
> 
> 赞同：1
> 
> 时间：2013-01-31T11:00:43.893
> 
> 标签：sql-server, amazon-rds

我正在尝试从 SQL Server RDS 实例中获取我的数据，但我遇到了很多困难，主要是由于用户和登录。

我尝试使用任务 > 生成脚本，但这在尝试在另一端创建数据库时给了我错误。

我尝试过使用 SQLAzureMW - 这对于将数据输入 RDS 实例来说非常棒，但是在尝试连接到远程 RDS 实例时，命令行应用程序给了我错误

我已经尝试过任务 > 复制数据库，但我收到错误消息说对象“xp_regread”的执行权限被拒绝

我已经尝试过任务 > 导出数据向导，但它只是复制数据并删除了我所有的触发器和键

我整个下午都在搜索，我根本找不到任何关于这个问题的参考资料。我在这里错过了一些非常明显的东西吗？谁能建议一种方法来做到这一点？

# soap - 如何请求 gzipped/压缩的 SOAP 响应？

> ID：14624136
> 
> 赞同：3
> 
> 时间：2013-01-31T11:00:52.083
> 
> 标签：soap, compression, gzip

我使用 wsimport 工具创建了一个运行良好的肥皂客户端。现在我喜欢从服务器请求压缩响应，因为响应可能非常大。

我不知道服务器是否能够发送压缩内容。据我所知，我必须在请求中添加类似*“Accept-Encoding: gzip”*的内容。

我如何以及在哪里这样做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T05:51:34.513

如果您使用 ksoap jar 进行肥皂请求，那么您需要在标头请求中设置压缩方法名称。要设置标题，您可以使用 HeaderProperty 类。这是一个发送soap请求的简单示例。

```
 //Create Soap Object & their envelop
SoapObject soapObject=new SoapObject(NameSpace, methodName);
SoapSerializationEnvelope envelope=new  SoapSerializationEnvelope(SoapSerializationEnvelope.VER11);
//Add request params into object
soapObject.addProperty("paramsName", "paramsValue");
//set object into envelop
envelope.setOutputSoapObject(soapObject);
//Set header property which we like, here I dont want to set any compression method so I set "none". For ksoap default compression method is "gzip".
List<HeaderProperty> headers=new ArrayList<HeaderProperty>();
HeaderProperty headerProperty=new HeaderProperty("Accept-Encoding", "none");
headers.add(headerProperty);

//Create transport object.
HttpTransportSE httpTransportSE=new HttpTransportSE(url);
//call service
httpTransportSE.call(SOAP_ACTION, envelope,headers);
//recive response
JSONResponse=(String)envelope.getResponse(); 
```

# c# - Datagridview 多选不起作用

> ID：14624137
> 
> 赞同：1
> 
> 时间：2013-01-31T11:00:53.473
> 
> 标签：c#, .net, winforms, datagridview

我们有一个数据网格视图。它的 multiselect 属性设置为 true。这个 datagridview 将在一个特定的时间间隔内更新它的行，比如一两秒。

因此，假设我将选择一行，然后按住 shift 键并选择另一行，然后选择这两行之间的整行，没有任何问题。

假设如果我选择一行，然后更新 gridview，然后如果我试图通过按住 shift 键来选择另一行，那么它不会选择整行，而是选择最后点击的行。

所以我不确定它为什么会发生，所以就像我选择网格的第二行并且更新可能是这一行被向下移动比如第五行，然后我试图选择另一行按住 shift 键，然后这个错误正在发生。

任何人请就这个问题提出您的建议。

## 更新后选择代码

```
for (int nRow = 0; nRow < Grid.Rows.Count; nRow++)
{
  foreach (string cookieIdval in SelectedCookies)
  {
     if (Grid.Rows[nRow].Cells[ColCookieID].Value.ToString() == cookieIdval.ToString())
     {
       Grid.Rows[nRow].Cells[ColCookieID].Selected = true;
       break;
     }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:07:19.780

您不能将更新推迟到这样的用户交互结束吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:15:34.737

修改您的更新方法，使其重新定位更新之前选择的内容。用途[`DataGridViewRow.Selected`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewrow.selected.aspx)和[`DataGridView.CurrentRow`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.currentrow.aspx)性质。

执行此操作的方式取决于填充 DataGridView 的方式。

**编辑：**

似乎区分行的关键在`ColCookieID`列中。我们可以使用它来存储和恢复选定的行：

```
public void UpdateGridView()
{
    HashSet<string> selectedRows = new HashSet<string>();
    foreach (DataGridViewRow row in grid.Rows)
    {
        if (row.Selected)
            selectedRows.Add(row.Cells[ColCookieID].Value.ToString());
    }
    var currentRow = grid.CurrentRow.Cells[ColCookieID].Value.ToString()

    // ... update the grid

    foreach (DataGridViewRow row in grid.Rows)
    {
        var id = row.Cells[ColCookieID].Value.ToString();
        if (selectedRows.Contains(id))
            row.Selected = true;
        if (currentRow == id)
            grid.CurrentCell = row.Cells[0];
    }
} 
```

让我知道它是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-13T04:31:42.540

为了解决实际问题（刷新后shift键对多选不起作用）-通过设置修复

```
dataGridView.CurrentCell = ... 
```

（设置 CurrentCell 包含在接受的答案中，但未提及此具体问题）

# javascript - 打开浏览器时如何使用java脚本在firefox 14+上启用dom.allow_script_to_close_windows

> ID：14624145
> 
> 赞同：0
> 
> 时间：2013-01-31T11:01:21.930
> 
> 标签：javascript, html, css, firefox, window

我正在尝试获得解决方案以自动关闭设置超时的firefox窗口，现在我已经有了解决方案，但不适用于firefox 14+，我不知道如何解决：| 我读了很多，我发现一个论坛有人说“dom.allow_script_to_close_windows”设置为true，即使在firefox中也可以自动关闭窗口。我的问题是如何将此选项设置为 true？使用本机 java 脚本。谢谢 ：）

# c# - Telerik Reporting，仅在最后一页显示页脚

> ID：14624148
> 
> 赞同：1
> 
> 时间：2013-01-31T11:01:29.417
> 
> 标签：c#, telerik, telerik-reporting

我有一张包含多页的发票，我只想在最后一页的底部（或最后一页的页脚）显示发票摘要。

我尝试在正文中设置摘要，但有时它会根据可用数据显示在页面中间。

我在 Telerik Reporting 2012 中使用 C# 语言

我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-17T15:06:53.100

而不是使用*Page Footer*使用*Report Footer*。

# r - 直方图因子排序

> ID：14624151
> 
> 赞同：1
> 
> 时间：2013-01-31T11:01:32.317
> 
> 标签：r

我在订购直方图的因子时遇到问题。我的数据是这样的：

```
ID  onderlaag
1  strooisel
2  geen
3  strooisel
4  kniklaag
5  gras
6  geen
.
. 
```

我使用 barplot() 函数制作了直方图：

> 条形图（表（onderlaag），ylim=c（0,250））

这里的直方图条的顺序是按字母顺序排列的，但我想让它们按以下顺序排列：strooisel - geen - gras - kniklaag。

我已经使用了因子函数，但是在我完成此操作后我的条形图不再有条形了

> onderlaag2=因子(onderlaag,levels=c("Strooisel","Geen","Gras","Kniklaag"))

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:45:34.460

我认为您所要求的只是对输入进行排序的一种方式，我们可以很容易地将其作为您的“条形图”功能的一部分，如下所示：

```
barplot(table(onderlaag)[,c(4,1,2,3)], ylim=c(0,250)) 
```

“表格”功能会自动为您排序列，但您可以在之后手动指定顺序。它的语法是这样的：

```
table(your_data)[rows_to_select, columns_to_select] 
```

在哪里`your_data`将数据制成表格，`rows_to_select`是要应用于行`columns_to_select`的过滤器列表，是要应用于列的过滤器列表。通过不指定`rows_to_select`，我们选择所有行，通过指定`columns_to_select`as `c(4,1,2,3)`，我们选择所有四列，但按特定顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T12:24:18.687

下次请提供示例数据`dput`

```
# construct an example data frame similar in structure to the question
x <- data.frame( ID = 1:4 , ord = c( 'b' , 'a' , 'b' , 'c' ) )

# look at the table of x, notice it's alphabetical
table( x )

# re-order the `ord` factor levels
levels( x$ord ) <- c( 'b' , 'a' , 'c' )

# look at x
x

# look at the table of x, notice `b` now comes first
table( x )

# print the results, even though it's not a histogram  ;)
barplot( table(x) , ylim = c( 0 , 5 ) ) 
```

# solr - 语法之间的 Solr

> ID：14624155
> 
> 赞同：2
> 
> 时间：2013-01-31T11:01:53.153
> 
> 标签：solr, lucene, urlencode

我已经安装了 solr 很棒，但是在选择价格范围内时我被卡住了。我想选择成本在 20 到 50 之间的所有产品，但它似乎不起作用。solr 语法是什么：cost > 20 AND cost < 50 或 cost BETWEEN 20 AND 50 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T11:54:41.487

简短的回答：看看[Lucene Query Parser Syntax](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_0/queryparsersyntax.html)。

更长的答案：使用此语法进行独占搜索（您的成本 > 20 AND 成本 <50 的示例）：

```
cost:{20 TO 50} 
```

以及包含搜索的此语法（成本> = 20 AND成本<= 50）：

```
cost:[20 TO 50] 
```

# css - CSS 选择器链性能

> ID：14624164
> 
> 赞同：1
> 
> 时间：2013-01-31T11:02:11.033
> 
> 标签：css, performance, css-selectors, sass, less

我将尝试用一点 CSS 来解释我的问题

## 选项1

我不会到处重复`float:left;`，而是将所有要向左浮动的类名链接在一起。

```
.一件小事，
 .两件小事，
 .三件小事，
 .四件小事，
 .五件小事{
    向左飘浮;
}
.一件小事{
    颜色：蓝色；
}
.两件小事{
    红色;
}
.三件小事{
    颜色：黄色；
}
.四件小事{
    颜色：蓝色；
}
.五件小事{
    颜色：绿色；
}

```

字符总数：331（包括空格，但即使您修剪空格，该示例也是有效的）

## 选项 2

*   我在哪里重复浮动：左；到处都是，但我得到的字符略少。

```
.一件小事{
    颜色：蓝色；
    向左飘浮;
}
.两件小事{
    红色;
    向左飘浮;
}
.三件小事{
    颜色：黄色；
    向左飘浮;
}
.四件小事{
    颜色：蓝色；
    向左飘浮;
}
.五件小事{
    颜色：绿色；
    向左飘浮;
}

```

字符总数：284

我在这里对两段代码做了完全相同的事情，第二种方式的字符更少，这意味着更少的字节。

**所以我的问题是：这**
是否意味着第二种方式对性能更好？如果我有多达九十九个小东西怎么办？

**为什么它让我担心**
在`@extend`Sass 中允许例如 to `@extend .clearfix;`，如果在“选项 1”中使用它会导致一个非常非常长的选择器。

那么哪个是最好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:47:31.790

由于字符差异如此之小，性能结果在这里显然不会很明显。但是，按照您在第一个代码段中所做的方式编写 CSS 的好处是，您可以只在一个地方添加许多其他共享属性，并将它们应用于每个类。随着您添加越来越多的共享属性，您将看到字符差异提示支持第一种方法。

另外，假设您决定翻译您的网站以支持希伯来语或其他 RTL 语言。您所要做的就是将 float: left 更改为 float: right 在那个位置，而不是每个单独的班级。话虽如此，我认为从可用性和长期可扩展性的角度来看 CSS 很重要，而不是在特定实例中纯粹的服务器性能。

# reporting-services - 哪个基于 Web 的分析和报告系统？

> ID：14624167
> 
> 赞同：1
> 
> 时间：2013-01-31T11:02:18.717
> 
> 标签：reporting-services, olap, data-analysis

我需要选择一个给我的解决方案（如果开源更好）：

*   最终用户的报表设计器 web gui，条形图/折线图/散点图/饼图的宽度支持，
*   面向最终用户的基于 Web 的交互式分析 gui（带有向下钻取导航图表），
*   具有电子邮件定时报告交付的报告生成引擎。

我计划通过每晚批处理将我的数据传输到分析和报告系统。

那么如何选择和整合呢？我是否被迫设置 OLAP 引擎？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:40:38.603

我发现了有趣[的商业智能平台魔力象限](http://www.gartner.com/technology/reprints.do?id=1-196WFCB&ct=120207&st=sb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:46:42.703

1.  Visual Studio / BIDS 中的报表设计器
2.  发布到报表管理器或 SharePoint 门户的 Reporting Services 报表，和/或发布到 SharePoint 中 Excel Web Services 的 Excel 数据透视表
3.  发布到报表管理器或 SharePoint 门户的 Reporting Services 报表

传输数据将是集成服务

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T12:01:10.077

您可以使用 Microsoft SQL Server 商业智能工具。

对于报告，您可以使用 Sql Server Reporting Service。对于数据操作、分析、转储，您可以使用 Sql Server 集成服务。

# 优点：

1.  Sql Server Reporting Service (SSRS) 是非常易于使用的报告服务。
2.  与 ASP.NET、SSIS、SSAS 应用程序无缝集成。
3.  繁重的数据处理。
4.  数量有限 的工具。因此复杂性较低。制作报告的直截了当的方法
5.  SSIS 包可以处理非常繁重的数据转储或处理，例如从 ftp 文件读取，几乎数百万行。后门处理。
6.  Web 服务、API 可以集成。
7.  Sql Server 分析服务 (SSAS) 允许制作多维数据集来预测模式和繁重的数据操作。
8.  设置报表服务器非常容易。

# 缺点：

1.  SSRS 中的表达式不是那么健壮。
2.  导出功能（即导出为 pdf、excel、csv）是有限的。

最好的部分是非常容易与 sql server、asp.net 应用程序集成。

我也使用过 Telerik 的报告服务。它们也易于使用，但功能丰富，可以通过多种方式完成很多事情，因此有点复杂。

这取决于您的应用程序的依赖程度。我已经使用 MS 的 BIDS 成功交付了项目。

当然它们是有限的，但很容易使用。

# postgresql - 插入带有明确“标签”的表中

> ID：14624173
> 
> 赞同：0
> 
> 时间：2013-01-31T11:02:35.997
> 
> 标签：postgresql, select, insert

我已经创建了一个表并充满了数据，我想添加更多行。如果我执行以下操作，这些行确实会完美显示：

```
select  elem_1, elem_2, 'myTag' as source, count(*) as tally 
from origin_table group by elem_1, elem_2; 
```

我基本上在做的是从 origin_table 获取数据，并通过 elem_1 和 elem_2 进行选择，我将标签“myTag”附加到每对夫妇。由于我可能有重复项，因此我也将 count(*) 视为计数，以知道我在 origin_table 中有多个相等的条目。这是一个细节，可以避免。

现在，如果我继续做广告，请执行以下操作：

```
insert in to destination_table 
select  elem_1, elem_2, 'myTag' as source, count(*) as tally 
from origin_table group by elem_1, elem_2; 
```

postgres树皮：

```
ERROR:  invalid input syntax for integer: "myTag"
LINE 1: insert into destination_table select elem_1, elem_2, 'myTag' as sou... 
```

我确实理解，但我不喜欢，因为我不知道如何克服它。

那么，我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:17:29.490

按照 a_horse_with_no_name 的建议，我将插入转换为：

```
insert into destination_table (elem_1,elem_2,source,tally) select elem_1, elem_2, 'myTag' as source, count(*) as tally from origin_table group by elem_1, elem_2; 
```

它工作得很好。我真的应该养成告诉 postgres 我要插入什么以及在哪里插入的习惯。

谢谢！

# javascript - JavaScript - 如何停止另一个函数的函数工作

> ID：14624175
> 
> 赞同：1
> 
> 时间：2013-01-31T11:02:44.930
> 
> 标签：javascript, function

我在一个页面中有两个 jfunctions，

```
function function1(){
//codes
setTimeout("function1()",5000);
} 
```

和

```
function function2(){
//codes
setTimeout("function2()",5000);
} 
```

函数在什么时候被调用

```
<div class="navPanel">
   <div onclick="function1();">Link1</div>
   <div onclick="function2();">Link2</div>
</div> 
```

当调用函数 2 时，我需要停止函数 1 的工作，反之亦然......怎么办......？？？帮助...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T11:06:21.957

将超时设置为一个变量，然后您可以使用[clearTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.clearTimeout)函数。

```
var timeout1 = {};
var timeout2 = {};

function function1(){
//codes
   if(timeout2){
      clearTimeout(timeout2);
   }
   timeout1 = setTimeout("function1()",5000);
}    

function function2(){
//codes
   if(timeout1){
       clearTimeout(timeout1);
   }
   timeout2 = setTimeout("function2()",5000);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T11:05:37.893

你可以这样做，但不推荐......

```
function function1(){
    //codes
    setTimeout(function1,5000);

    function2 = function() {}
} 
```

如果您只想停止调用的下一次执行`setTimeout`，那么只需从`setTimeout`和调用中获取句柄`clearTimeout()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T11:06:55.077

存储调用的返回值，`setTimeout()`以便您可以使用以下命令停止它们[`clearTimeout()`](https://developer.mozilla.org/en-US/docs/DOM/window.clearTimeout)：

```
var function1Timeout,
    function2Timeout;

function function1(){
    //codes
    if(function2Timeout) clearTimeout(function2Timeout);
    function1Timeout = setTimeout(function1,5000);
}

function function2(){
    //codes
    if(function1Timeout) clearTimeout(function1Timeout);
    function2Timeout = setTimeout(function2,5000);
} 
```

请注意，我已将您的`setTimeout()`调用更改为传递*函数引用*，而不是字符串。

# .net - 从服务器 SMTP 发送 Emil 被多个电子邮件客户端阻止，但从 Gmail 发送它可以工作，为什么？

> ID：14624178
> 
> 赞同：0
> 
> 时间：2013-01-31T11:02:54.643
> 
> 标签：.net, email, webserver

当我们从我们的服务器发送电子邮件时，它不会到达多个电子邮件客户端（甚至是垃圾邮件文件夹）

但是，当尝试从 Gmail API 发送相同的电子邮件时，效果很好。

（我们每天只发送几百封电子邮件，每封都发给一个单独的用户，

发送html或纯文本时重现问题，且服务器IP未列入黑名单）

电子邮件被阻止的原因可能是什么？

确保电子邮件不会被阻止的最佳方法是什么？

（下面添加了简单的发送电子邮件代码）

谢谢

拉斐尔

```
 //(1) Create the MailMessage instance
    MailMessage mm = new MailMessage(EmailFromAddress, ToEmail);

    //(2) Assign the MailMessage's properties
    mm.From = new MailAddress(EmailFromAddress, EmailFromName);
    mm.Subject = Subject;

    mm.Body = GetHtmlMessage(Body);

    mm.SubjectEncoding = System.Text.Encoding.UTF8;
    mm.BodyEncoding = System.Text.Encoding.UTF8;

    //(3) Create the SmtpClient object - Config in the Web.Config
    SmtpClient smtp = new SmtpClient();
    smtp.EnableSsl = false;

    smtp.Send(mm); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:17:01.773

你还没有在`SmtpClient`类上设置端口。默认值为 25。试试看。

# c# - 用于 C# 的 AES 加密的等效 PHP 代码

> ID：14624179
> 
> 赞同：0
> 
> 时间：2013-01-31T11:02:57.607
> 
> 标签：c#, php, encryption, aes

任何人都可以为以下 C# Aes 加密提供等效的 PHP 代码，我尝试了不同的 php AES 加密，但没有用，输出不匹配，在此先感谢。

这里使用的 key 和 iv 值是十六进制的，预期的输出是十六进制的。

C＃：

```
public class AESAlgorithm
    {

    public static string GeneratePrivateKey()
    {
        string str;

        RijndaelManaged rijndaelManaged = null;
        try
        {
            rijndaelManaged = new RijndaelManaged();
            rijndaelManaged.KeySize = 128;
            rijndaelManaged.GenerateKey();
            str = ConvertByteArrayToHexString(rijndaelManaged.Key);
        }
        finally
        {
            if (rijndaelManaged == null)
            {
                rijndaelManaged.Clear();
            }
        }
        return str;
    }

    public static string GenerateAuthKey(string timestamp, string appCode, string attUid, string privateKey)
    {
        return Encrypt(String.Format("{0}|{1}|{2}", timestamp, appCode, attUid), privateKey);
    }

    public static string Encrypt(string textToEncrypt, string hexStringKey)
    {
        string str1;

        RijndaelManaged rijndaelManaged = null;
        try
        {
            rijndaelManaged = new RijndaelManaged();
            rijndaelManaged.Mode = CipherMode.CBC;
            rijndaelManaged.Padding = PaddingMode.PKCS7;
            rijndaelManaged.KeySize = 128;
            rijndaelManaged.BlockSize = 128;
            byte[] bs1 = ConvertHexStringToByteArray(hexStringKey);
            rijndaelManaged.Key = bs1;
            rijndaelManaged.IV = bs1;
            ICryptoTransform iCryptoTransform = rijndaelManaged.CreateEncryptor();
            byte[] bs2 = Encoding.UTF8.GetBytes(textToEncrypt);
            str1 = ConvertByteArrayToHexString(iCryptoTransform.TransformFinalBlock(bs2, 0, (int)bs2.Length));
        }
        finally
        {
            if (rijndaelManaged == null)
            {
                rijndaelManaged.Clear();
            }
        }
        return str1;
    }

    public static string Decrypt(string hexStringToDecrypt, string hexStringKey)
    {
        string str1;

        RijndaelManaged rijndaelManaged = null;
        try
        {
            rijndaelManaged = new RijndaelManaged();
            rijndaelManaged.Mode = CipherMode.CBC;
            rijndaelManaged.Padding = PaddingMode.PKCS7;
            rijndaelManaged.KeySize = 128;
            rijndaelManaged.BlockSize = 128;
            byte[] bs1 = ConvertHexStringToByteArray(hexStringToDecrypt);
            byte[] bs2 = ConvertHexStringToByteArray(hexStringKey);
            rijndaelManaged.Key = bs2;
            rijndaelManaged.IV = bs2;
            byte[] bs3 = rijndaelManaged.CreateDecryptor().TransformFinalBlock(bs1, 0, (int)bs1.Length);
            str1 = Encoding.UTF8.GetString(bs3);
        }
        finally
        {
            if (rijndaelManaged == null)
            {
                rijndaelManaged.Clear();
            }
        }
        return str1;
    }

    private static string ConvertByteArrayToHexString(byte[] input)
    {
        bool flag;

        StringBuilder stringBuilder = new StringBuilder();
        byte[] bs = input;
        int i = 0;
        do
        {
            byte b = bs[i];
            stringBuilder.AppendFormat("{0:x2}", b);
            i++;

            flag = i < (int)bs.Length;
        }
        while (flag);
        return stringBuilder.ToString();
    }

    private static byte[] ConvertHexStringToByteArray(string hexString)
    {
        bool flag = (hexString.Length & 1) == 0;
        if (!flag)
        {
            throw new ArgumentOutOfRangeException("hexString", hexString, "hexString must contain an even number of characters.");
        }
        byte[] bs1 = new byte[hexString.Length / 2];
        int i = 0;
        do
        {
            bs1[i / 2] = Byte.Parse(hexString.Substring(i, 2), NumberStyles.HexNumber);
            i += 2;

            flag = i < hexString.Length;
        }
        while (flag);
        return bs1;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:04:53.733

您的示例代码**非常糟糕**，您使用密钥字节作为 IV，对手肯定可以使用选择的密文攻击轻松找出密钥字节。那会很糟糕你的身份验证密钥。

对于 AES-CBC，IV 需要是唯一且不可预测的。

我对您的建议，因为这似乎是某种凭据，您应该使用[Authenticated Encryption](http://en.wikipedia.org/wiki/Authenticated_encryption)。

我有一些剪切和粘贴代码，我试图保持审查，[字符串 C# 的对称身份验证加密的现代示例](https://stackoverflow.com/questions/202011/encrypt-decrypt-string-in-net/10366194#10366194)

我的示例的**.NET 内置加密 (AES)-Then-MAC(HMAC)**[版本](https://github.com/rnapier/RNCryptor)在使用`nonSecretPayload = new byte[]{2,X};`（`X`没有`0`密码，`1`使用密码）加密和使用`nonSecretPayloadLength = 2`.

尽管[RNCryptor](https://github.com/rnapier/RNCryptor)是 Objective-c，但我相信[RNCryptor](https://github.com/rnapier/RNCryptor)有 PHP 示例。

# delphi - xe2 中的备忘录无法正确显示存储在 ansi 字符集中的变音符号

> ID：14624184
> 
> 赞同：1
> 
> 时间：2013-01-31T11:03:12.027
> 
> 标签：delphi, character-encoding, fonts, delphi-xe2, tmemo

我们在 delphi 2007 中有一个应用程序，它将备忘录的内容写入文本文件并将其加载回来。TMemo 字符集设置为 AnisCharSet 并在项目选项中启用运行时主题 --> 应用程序已关闭。加载的内容类似于“möglich”，其中包含变音符号。此应用程序在 delphi 2007 中运行良好，它写入文本文件并将其读回并正确显示内容。在写入文件备忘录时，会将元音变音字符串转换为像这样的“mцchten”，当备忘录将其加载回来时，它会正确显示它。

现在我们将相同的应用程序升级到delphi xe2，在这里，当备忘录从文件中加载文本时，它没有正确显示它，即不是将变音符号字符串显示为“möglich”，而是显示“mцchten”，转换是在 delphi xe2 中显示变音符号时似乎不会发生在 delphi 2007 中发生的情况。

有人可以建议如何在delphi xe2应用程序中正确显示变音符号。它只是 memo 的 savetofile 和 loadfromfile 选项，没有任何编码。在 Xe2 中启用运行时主题已关闭，并且 memo 的字体字符集仍然是 Ansi。

这里的问题是从使用 delphi 2007 应用程序保存的 delphi xe2 应用程序中的文本文件中加载和显示字符

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T18:23:58.427

元音变音在 Ansi 环境（如 D2007）中对代码页敏感，因此需要在 Unicode 环境（如 XE2）中进行额外处理。因此，最好使用与代码页无关的格式来读取/写入数据，例如 UTF-8。特别是如果数据必须从一台 PC 移动到另一台 PC，操作系统默认的 Ansi 代码页可能会有所不同。

在这种特殊情况下，您可能必须找出 D2007 代码保存数据时操作系统正在使用的特定代码页（因为它会使用操作系统默认的 Ansi 代码页），然后明确告诉 XE2 代码使用该代码页读取数据时相同的代码页。在 XE2 中，`TStrings.LoadFrom...()`方法有一个可选`TEncoding`参数。您可以使用该`TEncoding.GetEncoding()`方法获取`TEncoding`特定代码页的对象。

# iphone - 我在地址簿中获取联系人 iphone 4s 无法正常工作

> ID：14624186
> 
> 赞同：0
> 
> 时间：2013-01-31T11:03:21.450
> 
> 标签：iphone, addressbook

```
+(NSMutableArray *)getLastName
{

   ABAddressBookRef addressBook = ABAddressBookCreate();
    NSMutableArray *lastNameArray = [[NSMutableArray alloc]init];
    ABRecordRef source = ABAddressBookCopyDefaultSource(addressBook);
    CFIndex numberOfContacts  = ABAddressBookGetPersonCount(addressBook);
    NSLog(@"%ld",numberOfContacts);
    CFArrayRef people = (__bridge CFArrayRef)((__bridge NSArray*)ABAddressBookCopyArrayOfAllPeopleInSourceWithSortOrdering(addressBook, source, kABPersonSortByLastName));
    NSArray * tempArray = [[NSArray alloc]init];
    tempArray = (__bridge  NSArray *)(people);
    if ([tempArray count]>0) {
    for (int personIndex = 0; personIndex < [tempArray count]-1; personIndex++) {
        ABRecordRef person = (__bridge ABRecordRef)([tempArray objectAtIndex:personIndex]);
        ABMultiValueRef lastName = ABRecordCopyValue(person, kABPersonLastNameProperty);
        NSString *lastNameString = (__bridge NSString *)lastName;
        if (lastName!=nil)
            [lastNameArray addObject:lastNameString];
          }
    }
    return lastNameArray;
} 
```

我正在使用 xcode 6.0。iphone 3s 工作正常，但 iphone 4s 和 iphone 5 在该代码中不工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:11:00.740

```
-(void)_addContactToAddressBook
{
char *lastNameString, *firstNameString,*emailString;
NSMutableArray *arrname =[[NSMutableArray alloc] init];
NSMutableArray *arrTemp = [[NSMutableArray alloc] init];
NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];
// AddressBook

ABAddressBookRef ab = ABAddressBookCreate();
CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople(ab);
CFIndex nPeople = ABAddressBookGetPersonCount(ab);

for(int i = 0; i < nPeople; i++)
{   
    [dict removeAllObjects];
    ABRecordRef ref = CFArrayGetValueAtIndex(allPeople, i);

    CFStringRef firstName = ABRecordCopyValue(ref, kABPersonFirstNameProperty);
    CFStringRef lastName = ABRecordCopyValue(ref, kABPersonLastNameProperty);
    ABMutableMultiValueRef multi = ABRecordCopyValue(ref, kABPersonEmailProperty);
    CFStringRef email;
    if (ABMultiValueGetCount(multi) > 0) {
        // collect all emails in array
        for (CFIndex i = 0; i < ABMultiValueGetCount(multi); i++) 
        {
            CFStringRef emailRef = ABMultiValueCopyValueAtIndex(multi, i);
            //[personDealingWithEmails addObject:(NSString *)emailRef];
            email=emailRef;
            CFRelease(emailRef);
        }
    }
    else
    {
        email=nil;
    }

    CFDataRef imgData;
    if(ABPersonHasImageData(ref))
    {
        imgData = ABPersonCopyImageData(ref);
    }else {
        imgData=nil;
    }

    static char* fallback = "";
    int fbLength = strlen(fallback);

    int firstNameLength = fbLength;
    bool firstNameFallback = true;

    int lastNameLength = fbLength;
    bool lastNameFallback = true;

    int emailLength = fbLength;
    bool emailFallback = true;

    if (firstName != NULL)
    {
        firstNameLength = (int) CFStringGetLength(firstName);
        firstNameFallback = false;
    }
    if (lastName != NULL)
    {
        lastNameLength = (int) CFStringGetLength(lastName);
        lastNameFallback = false;
    }
    if (email !=  NULL)
    {
        emailLength = (int) CFStringGetLength(email);
        emailFallback = false;
    }

    if (firstNameLength == 0)
    {
        firstNameLength = fbLength;
        firstNameFallback = true;
    }
    if (lastNameLength == 0)
    {
        lastNameLength = fbLength;
        lastNameFallback = true;
    }
    if (emailLength == 0)
    {
        emailLength = fbLength;
        emailFallback = true;
    }

    firstNameString = malloc(sizeof(char)*(firstNameLength+1));
    lastNameString = malloc(sizeof(char)*(lastNameLength+1));
    emailString = malloc(sizeof(char)*(emailLength+1));

    if (firstNameFallback == true)
    {
        strcpy(firstNameString, fallback);
    }
    else
    {
        CFStringGetCString(firstName, firstNameString, 10*CFStringGetLength(firstName), kCFStringEncodingASCII);
    }

    if (lastNameFallback == true)
    {
        strcpy(lastNameString, fallback);
    }
    else
    {
        CFStringGetCString(lastName, lastNameString, 10*CFStringGetLength(lastName), kCFStringEncodingASCII);
    }

    if (emailFallback == true)
    {
        strcpy(emailString, fallback);
    }
    else
    {
        CFStringGetCString(email, emailString, 10*CFStringGetLength(email), kCFStringEncodingASCII);
    }

    printf("%d.\t%s %s\n", i, firstNameString, lastNameString);
    NSString *fname= [NSString stringWithFormat:@"%s",firstNameString];
    NSString *lname= [NSString stringWithFormat:@"%s",lastNameString];
    NSString *fullName=[NSString stringWithFormat:@"%@%@%@",fname,([fname length]!=0)?@" ":@"",lname];
    NSString *eMail= [NSString stringWithFormat:@"%s",emailString];
    NSData *myData;
    if (imgData) {
        myData=(__bridge NSData *)imgData;
    }else {
        myData=nil;
    }

    //fetch Phone num
    ABMultiValueRef phoneNumberProperty = ABRecordCopyValue(ref, kABPersonPhoneProperty);
    NSArray* phoneNumbers = (__bridge NSArray*)ABMultiValueCopyArrayOfAllValues(phoneNumberProperty);
    CFRelease(phoneNumberProperty);

    // Do whatever you want with the phone numbers
    //NSLog(@"Phone numbers = %@", phoneNumbers);
    NSString *PhoneNum = [phoneNumbers objectAtIndex:0];

    //--------------remove special char form string(Phone number)-----------------      
    NSString *originalString = PhoneNum;

    //NSLog(@"%@", originalString);
    NSMutableString *strippedString = [NSMutableString 
                                       stringWithCapacity:originalString.length];

    NSScanner *scanner = [NSScanner scannerWithString:originalString];
    NSCharacterSet *numbers = [NSCharacterSet 
                               characterSetWithCharactersInString:@"0123456789"];

    while ([scanner isAtEnd] == NO) {
        NSString *buffer;
        if ([scanner scanCharactersFromSet:numbers intoString:&buffer]) {
            [strippedString appendString:buffer];

        } else {
            [scanner setScanLocation:([scanner scanLocation] + 1)];
        }
    }

    if([fname isEqualToString:@""] && [lname isEqualToString:@""]){

    }else{

        if (myData) {
            UIImage *img = [UIImage imageWithData:myData];

            [dict setObject:img forKey:@"imgData"];         
        }

        [dict setValue:fname forKey:@"fname"];
        [dict setValue:lname forKey:@"lname"];
        [dict setValue:fullName forKey:@"fullName"];
        [dict setValue:eMail forKey:@"email"];
        [dict setValue:strippedString forKey:@"phoneNumber"];
        [dict setValue:@"addressbook" forKey:@"type"];
        [arrname addObject:[dict copy]];
    }

    if (firstName != NULL)
    {
        CFRelease(firstName);
    }
    if (imgData != NULL)
    {
        CFRelease(imgData);
    }
    if (lastName != NULL)
    {
        CFRelease(lastName);
    }
    if (email != NULL)
    {
        CFRelease(email);
    }
    free(firstNameString);
    free(lastNameString);
    free(emailString);
}

for (int i=0; i<[arrname count]; i++) 
{
    NSMutableDictionary *dict = [[NSMutableDictionary alloc]init];
    [dict setValue:@"0" forKey:@"sel"];
    [arrTemp addObject:dict];
}

[arrallcontacts addObjectsFromArray:arrname];

[arraddedcontactsfulllist addObjectsFromArray:arrallcontacts];
NSSortDescriptor *sortByfullName = [[NSSortDescriptor alloc] initWithKey:@"fullName" ascending:YES];
NSArray *descriptors = [NSArray arrayWithObject:sortByfullName];
NSArray *sorted = [arraddedcontactsfulllist sortedArrayUsingDescriptors:descriptors];
[arraddedcontactsfulllist removeAllObjects];
[arraddedcontactsfulllist addObjectsFromArray:sorted];
[arraddedcontacts removeAllObjects];
[arraddedcontacts addObjectsFromArray:sorted];

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:1];
tblview.alpha=1;
[UIView commitAnimations];
[tblview reloadData];

if (![[[[NSUserDefaults standardUserDefaults] objectForKey:@"USER_DETAIL"] objectForKey:@"facebook"] isEqualToString:@"Unauthenticate"]) {

    [UIApplication sharedApplication].networkActivityIndicatorVisible=YES;
    [self performSelector:@selector(getfacebookfriends) withObject:nil afterDelay:0.0001];
}
}
-(void)fetchIphoneContact
{
if ([[UIDevice currentDevice].systemVersion floatValue]>=6.0)
{
    ABAddressBookRef addressBookRef = ABAddressBookCreateWithOptions(NULL, NULL);

    if (ABAddressBookGetAuthorizationStatus() == kABAuthorizationStatusNotDetermined) {
        ABAddressBookRequestAccessWithCompletion(addressBookRef, ^(bool granted, CFErrorRef error) {
            // First time access has been granted, add the contact
            [self _addContactToAddressBook];
            [tblview reloadData];
        });
    }
    else if (ABAddressBookGetAuthorizationStatus() == kABAuthorizationStatusAuthorized) {
        // The user has previously given access, add the contact
        [self _addContactToAddressBook];
        [tblview reloadData];
    }
    else {
        // The user has previously denied access
        // Send an alert telling user to change privacy setting in settings app
        DisplayAlertWithTitle(APP_Name, @"You can change your privacy setting in settings app");
    }

}
else
{
    [self _addContactToAddressBook];
}
} 
```

这将适用于 iOS6 及更低版本..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:09:16.003

我认为问题出在你的 iOS 版本上`ABAddressBookCreate()`......

```
ABAddressBookRef addressBook;

if ([self isABAddressBookCreateWithOptionsAvailable])
{
    // iOS 6
    CFErrorRef error = nil;
    addressBook = ABAddressBookCreateWithOptions(NULL,&error);

    ABAddressBookRequestAccessWithCompletion(addressBook, ^(bool granted, CFErrorRef error)
                                             {
                                             });
    ABAddressBookRevert(addressBook);
}
else
{
    // iOS 4/5
    addressBook = ABAddressBookCreate();
}

-(BOOL)isABAddressBookCreateWithOptionsAvailable
{
    return &ABAddressBookCreateWithOptions != NULL;
} 
```

通过这个你可以得到所有的联系人...... :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T11:10:55.957

在 IOS 中检索地址簿可能有不同的方法，但我用来检索地址簿的一种方法如下，请确保您正在使用`ABPeoplePickerNavigationControllerDelegate`您可以像这样单击按钮打开地址簿控制器

```
-(IBAction)getContact:(id)sender {
    // creating the picker
    ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController alloc] init];
    // place the delegate of the picker to the controll
    picker.peoplePickerDelegate = self;

    [self presentModalViewController:picker animated:YES];
} 
```

呈现地址簿后，您可以使用委托方法接收联系信息，如下所示

```
- (BOOL)peoplePickerNavigationController: (ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person {

// setting the first name
firstNameTxt.text = (__bridge NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty);

// setting the last name
lastNameTxt.text = (__bridge NSString *)ABRecordCopyValue(person, kABPersonLastNameProperty);

// setting the number
/*
 this function will set the first number it finds

 if you do not set a number for a contact it will probably
 crash
 */
ABMultiValueRef multi = ABRecordCopyValue(person, kABPersonPhoneProperty);
telefonTxt.text = (__bridge NSString*)ABMultiValueCopyValueAtIndex(multi, 0);

ABMultiValueRef multi1 = ABRecordCopyValue(person, kABPersonEmailProperty);
emailTxt.text = (__bridge NSString*)ABMultiValueCopyValueAtIndex(multi1, 0);

// remove the controller
[self dismissModalViewControllerAnimated:YES];

return NO; 
```

}

# javascript - 从 AngularJS 访问 LinkedIn API

> ID：14624194
> 
> 赞同：1
> 
> 时间：2013-01-31T11:03:46.153
> 
> 标签：javascript, angularjs, linkedin

我正在使用 Angular.js 构建一个应用程序来访问 LinkedIn API。发生的情况是，当我调用 API 时，模型不会立即刷新，而是在我在屏幕上进行另一次更改之后。例如，我已将 API 调用绑定到一个按钮，但我必须按两次才能使屏幕刷新数据。这是我的控制器：

```
 angbootApp.controller('AppCtrl', function AppCtrl($scope, $http) {
        $scope.getCommitData = function() {
            IN.API.Profile("me").fields(
                    [ "id", "firstName", "lastName", "pictureUrl",
                            "publicProfileUrl" ]).result(function(result) {
                //set the model
                $scope.jsondata = result.values[0];
            }).error(function(err) {
                $scope.error = err;
            });
        };
    }); 
```

这是我的按钮和内容链接：

```
<div>
  <a href="{{jsondata.publicProfileUrl}}">{{jsondata.firstName}}</a>
  <form ng-submit="getCommitData()">
    <input type="submit" value="Get Data">
  </form>
</div> 
```

**编辑**：解释我是如何在[这里做的](http://codepioneer.wordpress.com/2013/09/28/angularjs-log-in-with-linkedin/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T12:12:41.270

您需要在检索结果/错误时调用**$scope.$apply**

```
angbootApp.controller('AppCtrl', function AppCtrl($scope, $http) {
    $scope.getCommitData = function() {
        IN.API.Profile("me").fields(
                [ "id", "firstName", "lastName", "pictureUrl",
                        "publicProfileUrl" ]).result(function(result) {
            //set the model
            $scope.$apply(function() {
                $scope.jsondata = result.values[0];
            });
        }).error(function(err) {
            $scope.$apply(function() {
                $scope.error = err;
            });
        });
    };
}); 
```

角度世界之外的任何东西都不会触发视图的自动刷新。见[$apply](http://docs.angularjs.org/api/ng.$rootScope.Scope#$apply)

# vba - 在 VBA Excel 的图表中命名系列集合时出错

> ID：14624196
> 
> 赞同：1
> 
> 时间：2013-01-31T11:03:51.840
> 
> 标签：vba, excel, excel-2007

我在 Excel VBA 中遇到了一些问题。当我尝试运行以下代码时；它说：

```
Error 1004:Unable to get the name property of the series class! 
```

此错误发生在这行代码：（产品之前定义为字符串 Zyvox 等）

```
If namec.Name = product Then 
```

我应该怎么办？我也尝试过其他的东西

```
 ActiveChart.SeriesCollection(p).name = product 
```

但无济于事！请帮忙！

```
Public Sub chartBlue()

Dim i As Integer, j As Integer, p As Integer, namec As Series

For i = 4 To Sheets.Count
    Sheets(i).Activate
    For j = 1 To Sheets(i).ChartObjects.Count
        Sheets(i).ChartObjects(j).Activate
        ActiveChart.ChartArea.Select

        For p = 1 To ActiveChart.SeriesCollection.Count
        Set namec = ActiveChart.SeriesCollection(p)

            If namec.Name = product Then
               namec.Border.ColorIndex = 5

            End If

        Next p
    Next j
  '  Windows(Reportname).Activate
    Sheets(i).Range("A1").Activate
Next i

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:17:52.297

Amit，我在示例工作表上运行了您的代码，它运行良好！唯一缺少的是变量的声明和设置`product`，但你提到你做到了。所以，首先确保它`product`被声明为字符串并且有内容。然后，在该行中设置一个断点

```
如果 namec.Name = 产品 那么
```

并运行代码。检查两者的内容，`namec.Name`并`product`查看其不同之处

# javascript - 即使我添加了布局和弹性属性，列表在 Ext.Container 中也不可见

> ID：14624201
> 
> 赞同：0
> 
> 时间：2013-01-31T11:04:02.060
> 
> 标签：javascript, extjs, sencha-touch, sencha-touch-2

使用 Sencha Touch 2.0 并偶然发现了一个问题。我想在我的 Ext.Container 中显示一个列表，但什么也没发生。

**我的课（LoggedInView.js）**

```
Ext.define("GS.view.LoggedInView", {
extend: "Ext.Container",
config: {
    layout: 'vbox',
    items: [{
        xtype: "toolbar",
        docked: "top",
        title: "Pågående anbud"
    },{ 
        xtype: 'list',
        itemTpl: '{name}',
        flex: 1,
        store : 'Auction'
    }]
} 
```

});

**我的商店（Auction.js）**

```
Ext.define('GS.store.Auction', {
extend: 'Ext.data.Store',

config: {
    autoLoad: true,
    fields: ['name'],
    data: [
        {name: 'test1'},
        {name: 'test2'},
        {name: 'test3'},
        {name: 'test4'},
    ]
}, 
```

});

**我的应用程序（app.js）**

```
Ext.application({
name: 'GS',

requires: [
    'Ext.MessageBox'
],

views: ['Main', 'LoggedInView'],

stores: ['Auction'],
....etc... 
```

我在这里做错了什么？我得到正确呈现的工具栏，但列表没有显示。

**编辑**

阿洛斯附上了我的（main.js）

```
// The login button
var button = Ext.create('Ext.Button', {
    text: 'Logga in',
    minHeight: '45px',
    handler: function (b, e) {
        var form = Ext.getCmp('register');
        form.submit({
            url: 'URL HERE',
            method: 'POST', 
            success: function (frm, res)  {
                 var paneltab = Ext.create('GS.view.LoggedInView');
                 Ext.getCmp('register').destroy();
                 Ext.Viewport.add(paneltab);
            },
            failure: function (frm, res) {
                alert('Form no submit!');
            }
        });
    }
});

var loginForm = Ext.create('Ext.form.Panel', {
    fullscreen: true,
    id: 'register',
    frame:true, 
    items: [
        {
            xtype: 'fieldset',
            items: [
                {
                    xtype: 'textfield',
                    name : 'userName',
                    placeHolder : 'Användarnamn'
                },
                {   
                    xtype: 'passwordfield',
                    name : 'password',
                    placeHolder : 'Lösenord'
                }
            ]
        },
        {   
            xtype: 'container',      
            items: [button]
        },
    ]
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:31:31.847

添加`fullscreen: true`到您的视图配置

**我的课（LoggedInView.js）**

```
Ext.define("GS.view.LoggedInView", {
extend: "Ext.Container",
config: {
    layout: 'vbox',
    fullscreen: true,
    items: [{
        xtype: "toolbar",
        docked: "top",
        title: "Pågående anbud"
    },{ 
        xtype: 'list',
        itemTpl: '{name}',
        flex: 1,
        store : 'Auction'
    }]
}
}); 
```

您在 senchafiddle 中的代码：[http ://www.senchafiddle.com/#HcaOD](http://www.senchafiddle.com/#HcaOD)

编辑：

在您的 Main.js 中，您没有定义主视图，因此无法在 app.js 中创建它

**重做 Main.js**

```
Ext.define('GS.view.Main', {
    extend : 'Ext.form.Panel',
    config : {
        fullscreen : true,
        id : 'register',
        frame : true,
        items : [{
            xtype : 'fieldset',
            items : [{
                xtype : 'textfield',
                name : 'userName',
                placeHolder : 'Användarnamn'
            }, {
                xtype : 'passwordfield',
                name : 'password',
                placeHolder : 'Lösenord'
            }]
        }, {

            xtype : 'button',
            text : 'Logga in',
            minHeight : '45px',
            handler : function(b, e) {
                var form = Ext.getCmp('register');
                form.submit({
                    url : 'http://testurl.com',
                    method : 'POST',
                    success : function(frm, res) {
                        var paneltab = Ext
                                .create('GS.view.LoggedInView');
                        Ext.getCmp('register').destroy();
                        Ext.Viewport.add(paneltab);
                    },
                    failure : function(frm, res) {
                        alert('Form no submit!');
                    }
                });
            }

        }]
    }
}); 
```

另一个问题是，post 方法不起作用，因为它没有提交，所以它会提示“Form no submit!”。但是，当您将成功代码放入失败函数时，会显示列表。

但是我建议您将按钮处理程序放在控制器中。

按钮代码如下所示：

```
{
    xtype : 'button',
    text : 'Logga in',
    minHeight : '45px',
    action: 'submitFormAction'
} 
```

**控制器.js**

```
Ext.define('GS.controller.Controller', {
    extend : 'Ext.app.Controller',    
    config : {   
        control : {
            'button[action="submitFormAction"]' : {
                tap : 'submitForm'
            },
        }
    },
    submitForm : function() {
        var form = Ext.getCmp('register');
        form.submit({
            url : 'http://testurl.com',
            method : 'POST',
            success : function(frm, res) {
                 var paneltab = Ext.create('GS.view.LoggedInView');
                Ext.getCmp('register').destroy();
                Ext.Viewport.add(paneltab);                
            },
            failure : function(frm, res) {
                alert('Form no submit!'); 
            }
        });
    }

}); 
```

然后你必须在你的**app.js**中 添加控制器`controllers:['Controller'],`。

工作 senchafiddle：[http ://www.senchafiddle.com/#HcaOD#pArtn](http://www.senchafiddle.com/#HcaOD#pArtn)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T12:29:47.347

好的，找到了解决这个问题的方法。这是我的未定义的 Main.js 类。重构了一些代码，瞧！

```
Ext.define('GS.view.Main', {
    extend: 'Ext.form.Panel',
    config: {
        fullscreen: true,
        id: 'register',
        frame:true,
        items: [{
            xtype: 'fieldset',
            items: [
                {
                    xtype: 'textfield',
                    name : 'userName',
                    placeHolder : 'Användarnamn'
                },
                {   
                    xtype: 'passwordfield',
                    name : 'password',
                    placeHolder : 'Lösenord'
                }
            ]
        }, {
            xtype: 'button',
            text: 'Logga in',
            minHeight: '45px',
            handler: function (b, e) {
                var form = Ext.getCmp('register');
                form.submit({
                    url: 'MY URL HERE',
                    method: 'POST', 
                    success: function (frm, res)  {
                         var paneltab = Ext.create('GS.view.LoggedInView');
                         Ext.getCmp('register').destroy();
                         Ext.Viewport.add(paneltab);
                    },
                    failure: function (frm, res) {
                        alert('Form no submit!');
                    }
                });
            }
        }]
    }
}); 
```

# java - 将java方法转换为jQuery函数

> ID：14624206
> 
> 赞同：0
> 
> 时间：2013-01-31T11:04:26.960
> 
> 标签：java, javascript, jquery

我必须使 java 函数与 jQuery 兼容。jQuery [Real Person captcha](http://keith-wood.name/realPersonRef.html) validate 函数是由 java 编写的。我想在 jQuery 中验证验证码。所以，我尝试用 jQuery 编写 java 函数。但是该函数无法返回正确的值。

**爪哇：**

```
private String rpHash(String value) { 
   int hash = 5381; 
   value = value.toUpperCase(); 
   for(int i = 0; i < value.length(); i++) { 
     hash = ((hash << 5) + hash) + value.charAt(i); 
   } 
   return String.valueOf(hash); 
} 
```

**jQuery：**

```
function rpHash(value) { 
  hash = 5381; 
  value = value.toUpperCase(); 
  for($i = 0; $i < value.length; $i++) { 
    hash = ((hash << 5) + hash) + value.charAt($i); 
  } 
  return hash; 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T11:23:47.677

如果您发布预期结果（来自 Java）和实际结果（来自 JavaScript），将会有所帮助。我用字符串测试了它，`"abc"`Java 函数返回`193450027`，而 JavaScript 版本返回`"00177573ABC"`. 从这些结果来看，问题更容易被发现。

问题是您没有正确翻译循环体。`hash`是一个`int`，因此`((hash << 5) + hash)`也是一个`int`。然而，`value.charAt(i)`是一个**`char`**。当 Java 需要将 an 添加`int`到 a时会发生什么`char`？简单：a`char`是由两个字节表示的 Unicode 字符。`char`扩展为具有相同 Unicode 值的`int`，然后添加到`int`.

但是，JavaScript 的工作方式非常不同。`hash` is a`number`和`value.charAt(i)`is a`string`一个字符。将 a 添加`number`到 a`string`时， the`+`被解释为两个s 的**串联**`string`，因此结果也是 a `string`。由于 JavaScript 不是静态类型的，因此将 的值`hash`从 更改`number`为是完全合法的`string`。

在进一步的迭代中，`hash`将（很可能）是`string`同时持有数字和非数字字符。因此，在评估 时，移位操作所需的从 a到 a`hash << 5`的隐式转换会默默地失败并返回。由于与上述相同的原因，以及成为连接。`string``number``0``+ hash``+ value.charAt($i)`

因此，正确的翻译是检索**字符代码**而不是*字符*：

```
hash = ((hash << 5) + hash) + value.charCodeAt($i); 
```

这将正确地导致预期添加两个`number`s。

在不相关的注释中，您应该编写`var $i = 0`而不是`$i = 0`在您的 for 初始化中，以防止泄漏`$i`到全局范围。这同样适用于`hash`，应声明为`var hash = 5381`。此外，约定是带有前缀的变量`$`代表一个 jQuery 对象，但`$i`事实并非如此。你最好把它命名为`i`Java。

# xcode - xcode git 无法从远程存储库中提取更改

> ID：14624209
> 
> 赞同：9
> 
> 时间：2013-01-31T11:04:41.103
> 
> 标签：xcode, git

我正在与另一位开发人员一起开发 iPhone 应用程序。我们的 git 存储库位于远程服务器上。

所以我们正在处理我们的工作副本，然后我们一个一个地提交、拉取、推送，我们让我们的本地工作副本与服务器和彼此同步。

直到今天一切都很好。其他开发人员成功地将他的更改推送到远程存储库，现在轮到我了：提交，从远程存储库中提取更改，也许以某种方式合并它们，然后将我的工作副本推送到服务器。

但是，当我尝试拉取更改（使用 xcode 的内置 git）时，我收到一个错误： **"The operation could not be executed because "%reponame%" has one or more tree conflict"**。

请指导我完成解决此问题的过程。并且，请提供有用的提示以避免将来出现此问题。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-31T12:12:46.863

我猜 xcode 在从存储库中提取时使用选项来强制快进合并。这不是一个坏主意，因为它可以防止您进行不希望的合并。

尝试使用`git pull --rebase`（分别在 xcode 中检查一些适当的复选框），它应该删除您的更改，下载新版本，然后应用您删除的更改。冲突将在最后一步发生，因此您将解决它并再次提交更改。然后你可以将它们推送到服务器上。

# xcode - 界面生成器文件内容缺失

> ID：14624211
> 
> 赞同：0
> 
> 时间：2013-01-31T11:04:49.583
> 
> 标签：xcode, macos, ios6

我是 IOS 开发的新手。在使用一些示例应用程序时，我的 mac 重新启动，打开 xcode 后，我发现一个界面构建器文件 .xib 标记为红色。双击它根本不显示任何内容。我尝试从 xcode 中删除并添加回来，但它不起作用。我也没有在项目目录中看到该文件，但是当我用旧文件替换它时，它说

> 存在同名项目

但它在取景器中不可见。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:14:01.350

我不确定什么是干净的解决方案，但对我有用的快速修复/解决方法是：

除了错误消息“存在同名的项目”之外，您还必须获得一个重复的 ID/编号。在任何文本编辑器（TextWrangler 等）中打开 xib 文件。它只是一个xml文件。在 xib 中搜索该号码。您会发现该 ID 多次出现。用另一个号码替换其中一个，并确保您添加的新号码不重复。保存此文件并在 xcode 中打开。错误应该得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:15:18.930

右键单击项目中的一个文件，它会显示**showinfinder**。然后它在查找器中打开项目文件夹。检查您的文件是否存在。

# sql - 将数据类型 nvarchar 转换为浮点数时出错（ORacle 到 SQL Server 2008）

> ID：14624213
> 
> 赞同：0
> 
> 时间：2013-01-31T11:04:54.577
> 
> 标签：sql, sql-server, oracle, sql-server-2008, sql-server-2008-r2

首先，我有一个 MS SQL server 2008 Std。我的服务器上的版本，并且我在 Oracle 和 SQL Server 2008 之间有一个链接服务器。我尝试将数据从 Oracle 服务器传输到 SQL 服务器，但我遇到了这样的问题：

当我尝试将一列转换`nvarchar`为`Float`它时，会出现如下错误：

> 将数据类型 nvarchar 转换为浮点数时出错。

但是，当我尝试使用 SQL Server 2008 R2 进行相同的工作时，它不会出现任何错误并且工作正常。

我知道它是由十进制符号 (`.`和`,`) 引起的，但是有什么办法可以解决这种情况并使其在 SQL Server 2008 std 上也能正常工作。版？

# ember.js - 在生产环境中使用 Ember.View.views 访问视图实例是否安全，或者仅用于调试目的？

> ID：14624214
> 
> 赞同：0
> 
> 时间：2013-01-31T11:04:56.220
> 
> 标签：ember.js

我需要动态更新视图模板并且我的视图实例不是全局的，所以我正在考虑`Ember.View.views`用于访​​问视图实例和更新模板。所以，我需要一些建议是否使用这种方法，因为它也会在现场使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:14:08.103

您不需要使用`Ember.View.views`hash 和 do `rerender`，您可以使用更好的方式重新创建您在问题评论中提到的小提琴`Ember.ContainerView`，我已经为您创建了一个[小提琴](http://jsfiddle.net/Unspecified/QEfCG/)，看看

# c++ - 堆上数组解除分配的具体查询

> ID：14624215
> 
> 赞同：0
> 
> 时间：2013-01-31T11:04:59.670
> 
> 标签：c++, memory-management, compiler-construction, heap-memory

在某些时候传递堆分配的数组时，我们调用：

```
delete [] ptrName 
```

编译器如何记住需要释放多少内存？

语境：

我们有几个程序在堆上抛出指向字节数组的指针，出于各种原因，在 int32、int8 和其他适当的情况下进行转换。当内存需要通过 delete 调用取消分配时，究竟会发生什么以确保释放正确的数量？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:21:26.110

编译器分配具有分配内存信息的开销字节，它知道在调用`x`时要删除多少。`delete []`

**§ 5.3.4 新**

*   new T[5] 导致调用 operator new，并且
*   new(2,f) T[5] 导致调用 operator new。

> 这里，x 和 y 是表示数组分配开销的非负未指定值；new-expression 的结果将从 operator new[] 返回的值偏移这个量。此开销可应用于所有数组 new 表达式，包括引用库函数 operator new[](std::size_t, void*) 和其他布局分配的那些

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:07:48.763

它没有任何标准。编译器的开发人员通过在某个位置写入将由 new 分配的内存量来决定在哪里存储需要释放的内存量。

# google-oauth - 使用 Google Service Account 获得的 access-token 可以访问哪些 Google API

> ID：14624222
> 
> 赞同：1
> 
> 时间：2013-01-31T11:05:11.477
> 
> 标签：google-oauth, service-accounts

参考文档[https://developers.google.com/accounts/docs/OAuth2ServiceAccount](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)，能够获得访问令牌。上述文档没有提供有关可以使用服务帐户访问的 API 的任何详细信息。任何人都可以列出可以使用从 Google 服务帐户获得的访问令牌访问的 API 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:43:14.757

不幸的是，我们没有该领域支持的详尽清单。一般来说，如果该 API 不要求用户在进行 API 访问之前在 Web 界面中执行某些操作来配置他们的帐户，那么您应该能够访问该 API。服务帐户无法登录。因此，如果服务需要用户在 Google 网站上进行一些交互式输入，他们的 API 通常无法与服务帐户一起使用。希望这可以帮助。

# css - CSS3：在某类 tr 之后重置备用表行着色

> ID：14624229
> 
> 赞同：0
> 
> 时间：2013-01-31T11:05:25.220
> 
> 标签：css

这是我的小提琴。

[http://jsfiddle.net/cnLDF/](http://jsfiddle.net/cnLDF/)

我希望每一`.content`行之后的每一`.heading`行都以灰色开头，在本例中为“内容 5”。

如何仅通过修改 CSS 来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:16:58.480

使用`adjacent sibling selector`（我使用红色进行演示）：

```
table tr.heading + tr.content {
    background: #f00;
} 
```

但请注意，`nth-child(even)`将获胜，那么您将只为第一个着色，前面`.content`是一个`.header`，即`odd`（而不是`even`）。

演示：http: [//jsfiddle.net/cnLDF/1/](http://jsfiddle.net/cnLDF/1/)

* * *

编辑：

我尝试了一点，我认为纯 CSS 不可能（但我很高兴被证明是错误的）：伪元素将始终引用`tr`表中的所有元素（使用`odd`and `even`），并且最后一个声明将覆盖前一个......恕我直言，唯一使用 CSS 的唯一方法是在每个标题之后为每个案例创建一个静态声明`adjacent selector`，这只有在每个标题都有少量、已知、固定数量的内容时才可行（假设是 5 或 10 ...)，如下所示：

```
table tr.heading + tr.content > td {/* stuff */ }  
table tr.heading + tr.content + tr.content > td {/* stuff */ }  
table tr.heading + tr.content + tr.content + tr.content > td {/* stuff */ }  
/* and so on... */ 
```

相反，如果您可以处理输入，则可以轻松地计算输出服务器端，将`"odd"`和`"even"` `classes`应用于`tr`s，并相应地为它们着色。

# performance - Elasticsearch - 基于 id 列表的过滤/提升

> ID：14624230
> 
> 赞同：2
> 
> 时间：2013-01-31T11:05:31.900
> 
> 标签：performance, elasticsearch

我在 ES 索引中使用各种字段索引用户对象。我还有另一个服务（不是 ES）告诉我我的哪些用户当前在线。这是一个简单的用户 ID 列表。我无法索引这个“is_online”字段，因为它经常变化。

但我希望能够使用此在线状态执行各种查询。例如，我希望能够过滤我的结果以仅获取当前在线的用户。但我也希望能够根据这个 id 列表执行 boost 查询。例如，我希望能够获得用户列表，最好是那些在线的用户。我不知道最好的方法是什么（性能 POV）。

欢迎任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T11:48:31.250

我认为[条款查询](https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-terms-query.html)可能会有所帮助：

```
GET /_search
{
    "query" : {
        "terms" : {
            "user" : ["id1", "id2", "idn"]
        }
    }
} 
```

# c - 如何验证c中的数值？

> ID：14624234
> 
> 赞同：0
> 
> 时间：2013-01-31T11:05:43.457
> 
> 标签：c

当我在数组中插入字符值时，我的程序退出了。如果我插入字符值，我想在没有退出程序的情况下继续我的循环并取下一个整数值。我的代码有什么问题。

我的代码：

```
#include<stdio.h>
#include<ctype.h>

int main()
{
    int row1, col1, row2, col2, i, j, k, sum = 0;
    int first[10][10], second[10][10], multiply[10][10];
    clrscr();
    printf("Enter the no of rows and columns of first matrix\n");
    scanf("%d%d",&row1,&col1);
    printf("Enter the Element of first matrix");
    for(i=0;i<row1;i++){
        for(j=0;j<col1;j++){
            printf("\nEnter %d element %d row",j+1,i+1);
            scanf("%d",&first[i][j]);
            check = first[i][j];
            printf("%d",check);
            if(check>0 || check<0)
            {
                printf("this is digit \n");
            }
            else
            {
                printf("this is not digit\n");
                printf("\nEnter %d element %d row",j+1,i+1);
                scanf("%d",&first[i][j]);
            }
        }
    }
    printf("Enter the no of rows and columns of second matrix\n");
    scanf("%d%d",&row2,&col2);

    if(col1 == row2){
        printf("Enter the Element of second matrix");
        for(i=0;i<row2;i++){
            for(j=0;j<col2;j++){
                printf("\nEnter %d element %d row",j+1,i+1);
                scanf("%d",&second[i][j]);
            }
        }

        for(i=0;i<row1;i++){
            for(j=0;j<col2;j++){
                for(k=0;k<row2;k++){
                    multiply[i][j]=sum;
                    sum=0;
                }
            }
        }
        printf("Multiplication of matrices=\n");
        for(i=0;i<row1;i++){
            for(j=0;j<col2;j++){
                multiply[i][j]=0;
                for(k=0;k<row1;k++){
                    multiply[i][j] += first[i][k] * second[k][j];
                }
                printf("%d\t",multiply[i][j]);
            }
            printf("\n");
        }
    }
    else{
        printf("You are incorrect. According to the requirement of matrix multiplication, the number of column of first matrix should equal to the number of rows of second matrix.");
    }
    getch();
    return 0;
} 
```

感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:13:36.457

`scanf`返回成功读取的条目数。当您尝试读取一个数字，但提供了非数字值时，`scanf`返回零。您需要反复提示用户输入，直到`scanf`返回`1`。这是修改代码的一种方法：

```
for(;;) {
    printf("\nEnter %d element %d row",j+1,i+1);
    if (scanf("%d",&first[i][j]) == 1) break;
    // Read and ignore the invalid input. 's' means "string", '*' means "ignore".
    scanf("%*s");
    printf("\nThe data you entered was incorrect.");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T11:15:57.107

当你执行

```
scanf("%d",&first[i][j]) 
```

这意味着您`scanf`只接受整数。如果您输入字母字符，则 scanf 将不读取任何内容，然后返回 0 作为值`first[i][j]`

下一个 `scanf("%d");`将无法获取您的输入（即使它们是数字），因为尚未从字母字符中清除标准输入。

替换这个

```
for(i=0;i<row1;i++){
        for(j=0;j<col1;j++){
            printf("\nEnter %d element %d row",j+1,i+1);
            scanf("%d",&first[i][j]); 
```

经过

```
for(i=0;i<row1;i++){
        for(j=0;j<col1;j++){
            printf("\nEnter %d element %d row",j+1,i+1);
            while (scanf("%d",&first[i][j]))<=0) {
                printf("this is not digit\n");
                printf("\nEnter %d element %d row",j+1,i+1);
                scanf("%*[^\n]"); // this clean your input buffer in case yhe input is not integer
            } 
```

并删除此块：

```
 check = first[i][j];
            printf("%d",check);
            if(check>0 || check<0)
            {
                printf("this is digit \n");
            }
            else
            {
                printf("this is not digit\n");
                printf("\nEnter %d element %d row",j+1,i+1);
                scanf("%d",&first[i][j]);
            } 
```

# xslt - 将负数设为正数 - XSLT

> ID：14624236
> 
> 赞同：1
> 
> 时间：2013-01-31T11:05:49.557
> 
> 标签：xslt

我想知道是否有办法使负值变为正值？这是我的 xslt 文档的片段：

```
<NumberOfLinesAtRate>
    <xsl:value-of select="number(/xsales:Qty)" />
</NumberOfLinesAtRate> 
```

问题是，在我的原始 XML 文档中，有时这个`Qty`值可能是负数、-1、-2 等。有没有办法让我在转换后的文档中始终保持积极状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T11:41:51.047

如果您使用的是 XSLT1.0，则可以使用此公式（为简洁起见，我省略了命名空间）

```
<xsl:value-of select="Qty * (Qty >= 0) - Qty * not(Qty >= 0)" /> 
```

在 XSLT2.0 中，您可以使用专用的**abs运算符**

```
<xsl:value-of select="abs(Qty)" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T11:45:03.940

这将是一种相当简洁的方法：

```
<xsl:value-of select="Qty * (1 - 2 * (Qty < 0))" /> 
```

# c# - 全局覆盖映射

> ID：14624239
> 
> 赞同：1
> 
> 时间：2013-01-31T11:06:07.390
> 
> 标签：c#, nhibernate, fluent-nhibernate

`IAutoMappingOverride<T>`我有一个通过约定和类映射到旧版 Oracle 数据库的域模型。

因此，对于要写入数据库的每个实体，都存在一个`IAutoMappingOverride<T>`指定用于 PK 的序列的类：

```
mapping.Id(x => x.Id).GeneratedBy.Sequence("SQ_BATCHES_ID"); 
```

现在，我目前正在尝试追踪一个错误，并希望使用不同的数据库测试该架构，特别是使用内存中的 SQLite 数据库。

问题是 SQLite 不支持序列。

是否可以全局覆盖配置？
类似于：“当 ID 由序列生成时，请改用身份”。

我不想做的是使用一组不同的`IAutoMappingOverride<T>`实现，因为大多数时候，ID 的映射并不是唯一发生的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:43:23.590

在`ExposeConfiguration`你可以用生成的配置做几乎所有事情。甚至更换发电机：

```
private void OverrideGenerators(Configuration config)
{
    var identifiers =
        config.ClassMappings.Select(x => x.Identifier)
                .OfType<SimpleValue>()
                .Where(x => x.IdentifierGeneratorStrategy
                             .StartsWith("sequence"));
    foreach (var identifier in identifiers)
    {
        identifier.IdentifierGeneratorProperties.Remove("sequence");
        identifier.IdentifierGeneratorStrategy = "identity";
    } 
} 
```

# c# - 用户可排序列表控件

> ID：14624242
> 
> 赞同：2
> 
> 时间：2013-01-31T11:06:26.013
> 
> 标签：c#, winforms

我需要为 Windows 窗体用户（C# 4.0 应用程序）提供一种对显示包含多个项目的列表的控件进行操作的方法。所需要的是给用户一种方法来选择一个项目，然后因为改变顺序而向上或向下移动它。下图显示了一个可能的解决方案，它显示了一个可能的实现，它使用几个按钮（标记为 + 和 -）来更改每个元素的排序键值，然后将重新排序责任赋予对 ListBox 控件提供的字母排序的覆盖. 更改必须持续到表单处理

![一个可能的可排序列表](../Images/8711128c16b7093ff894ada8e4875e0c.png)

我想知道是否有更好或更简单的方法来获得相同的结果；也许有一些我不知道的控制功能。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:13:19.417

对此没有内置控件。您建议的解决方案可以使用集合的`Remove`和`Insert`方法轻松实现。`ListBox.Items`

另一种解决方案可能是允许用户拖放项目。在您的问题的评论中查看 CodeCaster 的链接。

# jsf-2 - 使用 a4j:jsFunction 渲染多个表单

> ID：14624243
> 
> 赞同：0
> 
> 时间：2013-01-31T11:06:30.547
> 
> 标签：jsf-2, ajax4jsf

我正在尝试以其他形式呈现不同的`<h:form>`使用。`<a4j:jsFunction>`但是它不起作用。我实现的代码如下：

```
<t:div style="display:table-row; ">
    <a4j:region>
        <t:div style="display:table-cell; border:1px solid #608AA9;">
            <h:form id="accordForm">
                <rich:accordion id="accordId" switchType="client" activeItem="#{projectCreation.activeTab}">
                    <c:forEach var="proj" items="#{projectCreation.projects}">
                        <rich:accordionItem name="#{proj.description}">
                        <f:facet name="header">#{proj.description}</f:facet>
                            <h:form id="moduleAccord" rendered="#{proj.childCount>0}">
                                <rich:accordion id="moduleAccordId" switchType="client" activeItem="#{projectCreation.activeModuleTab}" onitemchange="moduleAccordionChange();">
                                    <a4j:jsFunction name="moduleAccordionChange" execute="@all" render="@all" action="#{projectCreation.accordionItemChange}" />
                                    <c:forEach var="mdle" items="#{proj.modules}">
                                        <rich:accordionItem id="module#{mdle.id}" name="#{mdle.description}">
                                            <f:facet name="header">#{mdle.description}</f:facet>
                                            <h:form id="formodule#{mdle.id}" rendered="#{mdle.childCount>0}">
                                                <t:dataList id="subModuleList" var="subMdle" value="#{mdle.subModules}" layout="unorderedList">
                                                    <a4j:commandButton id="subModuleCmd" value="#{subMdle.description}" action="#{projectCreation.fetchSubModuleDetails}">
                                                        <f:param name="subModuleId" value="#{subMdle.id}" />
                                                    </a4j:commandButton>
                                                </t:dataList>
                                            </h:form>
                                        </rich:accordionItem>
                                    </c:forEach>
                                </rich:accordion>
                            </h:form>
                        </rich:accordionItem>
                    </c:forEach>
                </rich:accordion>
            </h:form>
        </t:div>
    </a4j:region>
    <h:form id="rightContent">
        <t:div id="rightContentDiv">
        <h:outputText id="selectedPage" value="#{projectCreation.creationModel.selectedPage}" />
            <t:div id="projectDiv" style="display:table-cell;" rendered="#{projectCreation.creationModel.selectedPage=='Project'}">
                <a4j:outputPanel ajaxRendered="true">
                    <ui:include src="/WEB-INF/facelets/project/editProject.xhtml"/>
                </a4j:outputPanel>
            </t:div>
            <t:div id="moduleDiv" style="display:table-cell;" rendered="#{projectCreation.creationModel.selectedPage=='Module'}">
                <a4j:outputPanel ajaxRendered="true">
                    <ui:include src="/WEB-INF/facelets/project/addModule.xhtml"/>
                </a4j:outputPanel>
            </t:div>
        </t:div>
    </h:form>
</t:div> 
```

我正在尝试在选择嵌套手风琴模块时更改呈现的页面。我在日志中检查了它在控制器中工作正常，但在 facelet 上没有按预期工作。它在我使用时工作，`switchType="server"`但是它会完全重新加载页面，我只想`render`将`rightContent` `form`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:50:06.890

看看这个展示示例：

*   [http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=accordion&sample=dynamic&skin=blueSky](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=accordion&sample=dynamic&skin=blueSky)

不要嵌套表单，HTML 不支持这个！

*   [如何在 JSF 页面中使用 <h:form>？单一形式？多种形式？嵌套表格？](https://stackoverflow.com/questions/7371903/multiple-hform-in-a-jsf-page)

# c# - nhibernate 使用以前的状态创建

> ID：14624244
> 
> 赞同：2
> 
> 时间：2013-01-31T11:06:32.393
> 
> 标签：c#, .net, nhibernate, clone, interceptor

我有类似的东西

```
var productList = order.Products.TolIst(); 
```

我遍历 productList 并使用更新每个产品

```
session.SaveOrUpdate(product); 
```

但问题是，产品在**OnFlushDirty**函数中的先前状态为 null（这是有道理的）。

无论如何管理/复制/注入以前的状态？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:33:25.363

这可能与分离对象更新有关。尝试阅读这个非常相似的故事：http: [//jamesfitzsimons.com/ ?p=152](http://jamesfitzsimons.com/?p=152)

问题总结：

> ...经过调查，我们意识到传递给我们拦截器的 onFlushDirty 方法的 previousState 参数为空。...

解决方案：

> 解决方案是使用 merge() 方法（NHibernate 2.0 中的新方法）。Merge() 检查一级缓存以查看具有给定标识符的对象是否先前已加载。如果是这样，它将从一级缓存中加载该对象并使用分离的对象更新它的属性。这意味着会话现在能够跟踪对对象所做的更改，因此当刷新发生时，previousState 不再为空。

# python - “版本文件”是什么样的？

> ID：14624245
> 
> 赞同：44
> 
> 时间：2013-01-31T11:06:35.777
> 
> 标签：python, windows, pyinstaller

我已经在谷歌上搜索了很久没有结果。PyInstaller[手册](http://www.pyinstaller.org)说：

```
--版本文件=文件
    将版本资源从 FILE 添加到 exe

```

听起来不错。我想将版本信息放在我的可执行文件中。问题是我不知道“版本文件”是什么样的，也找不到一个可以使用的示例。我会考虑一个版本文件的例子作为这个问题的可接受答案。

* * *

### 我试过的

手册还说：

> **版本**
> 仅 Windows NT 系列。版本='myversion.txt'。使用 GrabVersion.py 从可执行文件中窃取版本资源，然后编辑输出以创建您自己的输出。（版本资源的语法太神秘了，我不会尝试从头开始编写。）

我现在已经尝试使用我系统中的无数可执行文件进行此操作。我只是不断收到这些错误：

```
回溯（最近一次通话最后）：
  文件“C:\pyinstaller-2.0\utils\GrabVersion.py”，第 42 行，在
    vs = versioninfo.decode(sys.argv[1])
  解码中的文件“C:\pyinstaller-2.0\PyInstaller\utils\versioninfo.py”，第 33 行
    nm = win32api.EnumResourceNames(h, RT_VERSION)[0]
IndexError：列表索引超出范围
```

在没有版本信息的可执行文件上，并且：

```
回溯（最近一次通话最后）：
  文件“C:\pyinstaller-2.0\utils\GrabVersion.py”，第 43 行，在
    打印与
  文件“C:\pyinstaller-2.0\PyInstaller\utils\versioninfo.py”，第 147 行，在 __repr__
    %（缩进，self.ffi.__repr__（缩进），缩进，
  文件“C:\pyinstaller-2.0\PyInstaller\utils\versioninfo.py”，第 251 行，在 __repr__
    "filevers=%s," % fv,
TypeError：字符串格式化期间并非所有参数都转换了
```

其余的。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-31T12:47:28.407

只是快速浏览了一下来源。看来，版本文件应该是 Python 源代码本身，因为提供的版本文件会被读取然后`eval`'ed。

`GrabVersion.py`正如您已经发现的那样，该脚本似乎会生成错误，因此我修改了手动将元组参数转换为字符串的`__repr__`函数。`FixedFileInfo`

Windows`cmd.exe`嵌入了 Windows 版本资源，`GrabVersion.py`这是您可以保存到文件并提供给 PyInstaller 的输出。

```
VSVersionInfo(
  ffi=FixedFileInfo(
    filevers=(6, 1, 7601, 17514),
    prodvers=(6, 1, 7601, 17514),
    mask=0x3f,
    flags=0x0,
    OS=0x40004,
    fileType=0x1,
    subtype=0x0,
    date=(0, 0)
    ),
  kids=[
    StringFileInfo(
      [
      StringTable(
        u'040904B0',
        [StringStruct(u'CompanyName', u'Microsoft Corporation'),
        StringStruct(u'FileDescription', u'Windows Command Processor'),
        StringStruct(u'FileVersion', u'6.1.7601.17514 (win7sp1_rtm.101119-1850)'),
        StringStruct(u'InternalName', u'cmd'),
        StringStruct(u'LegalCopyright', u'\xa9 Microsoft Corporation. All rights reserved.'),
        StringStruct(u'OriginalFilename', u'Cmd.Exe'),
        StringStruct(u'ProductName', u'Microsoft\xae Windows\xae Operating System'),
        StringStruct(u'ProductVersion', u'6.1.7601.17514')])
      ]), 
    VarFileInfo([VarStruct(u'Translation', [1033, 1200])])
  ]
) 
```

我没有尝试使用 PyInstaller 设置版本资源，所以我不确定这是否可行，我会对您的反馈感兴趣。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2018-03-28T20:00:02.083

我可能在以前的答案中遗漏了这个，或者 PyInstaller 可能在最初提供这些答案后已经更新，但是 PyInstaller 的当前文档使用 PyInstaller提供的命令行工具教授了一个[相当简单的方法](https://pyinstaller.readthedocs.io/en/stable/usage.html?highlight=windows%20version#capturing-windows-version-data)（虽然我错过了这个前几次我查看文档的部分）。

将此工具指向您系统上具有“好看”版本信息的 .exe 文件，它将创建一个人类可读、注释、可编辑的版本资源文件，您可以将其用作起点。

```
pyi-grab_version executable_with_version_resource 
```

默认情况下将文件写入`file_version_info.txt`工作目录。

在我的本地 svn.exe 副本上运行上述内容会产生：

```
# UTF-8
#
# For more details about fixed file info 'ffi' see:
# http://msdn.microsoft.com/en-us/library/ms646997.aspx
VSVersionInfo(
  ffi=FixedFileInfo(
# filevers and prodvers should be always a tuple with four items: (1, 2, 3, 4)
# Set not needed items to zero 0.
filevers=(1, 9, 7, 30920),
prodvers=(1, 9, 7, 30920),
# Contains a bitmask that specifies the valid bits 'flags'r
mask=0x3f,
# Contains a bitmask that specifies the Boolean attributes of the file.
flags=0x0,
# The operating system for which this file was designed.
# 0x4 - NT and there is no need to change it.
OS=0x4,
# The general type of file.
# 0x1 - the file is an application.
fileType=0x1,
# The function of the file.
# 0x0 - the function is not defined for this fileType
subtype=0x0,
# Creation date and time stamp.
date=(0, 0)
),
  kids=[
StringFileInfo(
  [
  StringTable(
    u'040904B0',
    [StringStruct(u'CompanyName', u'Apache Software Foundation'),
    StringStruct(u'FileDescription', u'svn'),
    StringStruct(u'FileVersion', u'1.9.7'),
    StringStruct(u'InternalName', u'SVN'),
    StringStruct(u'LegalCopyright', u'Copyright (c) The Apache Software Foundation'),
    StringStruct(u'OriginalFilename', u'svn.exe'),
    StringStruct(u'ProductName', u'Subversion'),
    StringStruct(u'ProductVersion', u'1.9.7 (r1800392)')])
  ]), 
VarFileInfo([VarStruct(u'Translation', [1033, 1200])])
  ]
) 
```

根据您的目的编辑它，并将其作为 反馈给 PyInstaller `--version-file`，例如

```
pyinstaller [options] myscript.py --version-file file_version_info.txt 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-08-24T20:58:42.263

使用较早的答案创建您的版本文件，将其另存为`version.rc`

找到`filename.spec`文件打开它。接下来在该脚本中，找到：

```
exe = EXE(pyz,...) 
```

在整个部分的末尾添加这段代码以自动将版本信息嵌入到您的 exe 文件中

```
version='version.rc' 
```

保存它，然后再次启动 pyinstaller，这次使用以下代码运行安装程序：

```
pyinstaller filename.spec 
```

这不仅会创建 exe 文件本身，还会包括您的所有版本信息。

**如果您可能没有考虑过，请将 替换为`filename`您的程序的文件名**

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-04-09T15:16:48.693

我在 Python 3中遇到了 Pyinstaller *--version-file选项的问题，我使用*[Simple Version Resource Tool](http://www.codeproject.com/Articles/37133/Simple-Version-Resource-Tool-for-Windows)解决了它。

使用此工具，您可以显示任何*版本资源*的内容，只需将 /vo 选项与任何可执行文件一起使用：`verpatch.exe /vo c:\Windows\System32\cmd.exe`

要将**新** *版本资源*添加到可执行文件，只需遵循以下示例：

```
verpatch.exe script.exe 1.0.0.0 /va /pv 1.0.0.0 /s description "Your product description" /s product "Your product name" /s copyright "Your company name, 2016" /s company "Your company name" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-05T15:45:40.210

请注意，版本文件使用 Python 代码，因此您可以为其指定`.py`扩展名而不是`.rc`.

这将允许您在 IDE 中查看它的格式，检查错误（当然，忽略“未解析的引用”），并执行 Python 允许您执行的任何其他操作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2022-01-28T15:56:47.353

我在网上找到了一个用于创建版本文件的简单包：[https](https://pypi.org/project/pyinstaller-versionfile/#description) ://pypi.org/project/pyinstaller-versionfile/#description 。根据链接中的信息安装后，应用一个简单易读的代码就足够了：

```
import pyinstaller_versionfile

pyinstaller_versionfile.create_versionfile(
    output_file="versionfile.txt",
    version="1.2.3.4",
    company_name="My Imaginary Company",
    file_description="Simple App",
    internal_name="Simple App",
    legal_copyright="© My Imaginary Company. All rights reserved.",
    original_filename="SimpleApp.exe",
    product_name="Simple App"
) 
```

作为其操作的结果，我们获得了一个文件，例如在@mac 的答案中。该文件已准备好在 pyinstaller 中使用。

# html - 键入时自动关闭正确的 XML/HTML 标记 有谁知道 Notepad++ 插件会在输入时自动关闭正确的平衡标签*   item 1*   item 2*   item 1*   item 2插件的功能和插件的功能Tag auto-close似乎都只支持在输入打开标签时自动生成紧跟在打开标签之后的关闭标签。这不是我要找的。我正在寻找一个在键入事件时触发的函数。即当您尝试关闭标签时。XML-toolsAuto-close XHTML/XML <tag>TextFx

> ID：14624246
> 
> 赞同：5
> 
> 时间：
> 
> 标签：html, xml, notepad++

有谁知道 Notepad++ 插件会在输入时自动关闭正确的平衡标签`</`？

例如，如果我输入了

```
<ul>
  <li>item 1</li>
  <li>item 2</li>
</ 
```

我想让插件自动生成/自动完成结束标记`</ul>`

插件的功能和插件的功能`Tag auto-close`似乎都只支持在输入打开标签时自动生成紧跟在打开标签之后的关闭标签。这**不是**我要找的。我正在寻找一个在键入事件时触发的函数。即当您尝试关闭标签时。`XML-tools``Auto-close XHTML/XML <Tag>``TextFx`**`</`**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:17:52.007

试试`TextFX characters`。确保将语言设置为 HTML/XML。**</tag>

# php - 递归函数和多维数组

> ID：14624248
> 
> 赞同：1
> 
> 时间：2013-01-31T11:06:46.370
> 
> 标签：php, arrays, multidimensional-array

如果我传递一个 id，我如何从所有子元素中获取 ['id'] 。

这是我的数组...

```
$array = Array
(
    '0' => Array
    (
        'id' => 1,
        'parent_id' => 0,
        'order_pos' => 0,
        'title' => 'Shirts',
        'childs' => Array
        (
            '0' => Array
            (
                'id' => 2,
                'parent_id' => 1,
                'order_pos' => 0,
                'title' => 'Small Shirts',
            )
        )
    ),
    '1' => Array
    (
        'id' => 3,
        'parent_id' => 0,
        'order_pos' => 0,
        'title' => 'Cameras'
    )
); 
```

如果我编写 i 函数并传递一个说 id 1 的变量，有人可以告诉我如何返回一个仅包含所有子元素的 id 的一维数组。例如。

从前面的数组中，如果我传递 1 的 id，我希望函数返回 1、2，因为 2 是子元素的 id 元素。所以如果我通过它 2，它应该只返回 2，因为它没有任何孩子。

希望你能理解我，如果你能帮助我，谢谢你...

请注意，这可以是无限的，这意味着每个父类别可以有无限的子类别或子类别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:58:12.277

基本上有两个问题需要解决：

1.  从给定 ID 搜索整个数组。
2.  找到 ID 后，从孩子那里提取所有 ID。

这会起作用：

```
function findIds(array $array, $id)
{
    $ids = array();
    $iterator = new RecursiveIteratorIterator(
        new RecursiveArrayIterator($array),
        RecursiveIteratorIterator::SELF_FIRST
    );

    foreach ($iterator as $val) {
        if (is_array($val) && isset($val['id']) && $val['id'] === $id) {
            $ids[] = $val['id'];
            if (isset($val['childs'])) {
                array_walk_recursive(
                    $val['childs'],
                    function($val, $key) use (&$ids) {
                        if ($key === 'id') {
                            $ids[] = $val;
                        }
                    }
                );
            }
        }
    }

    return $ids;
}

print_r( findIds($array, 1) ); // [1, 2]
print_r( findIds($array, 2) ); // [2]
print_r( findIds($array, 3) ); // [3] 
```

迭代器将使您的数组完全可遍历。这意味着，您可以`foreach`将整个阵列视为平面阵列。通常，它只会返回叶子 (1, 0, 0, Shirts, ...)，但由于我们给了它`SELF_FIRST`选项，它也会返回包含叶子的数组。试着`var_dump`在 foreach 里面放一个看看。

换句话说，这

```
foreach ($iterator as $val) { 
```

将遍历数组中的每个值。

```
if (is_array($val) && isset($val['id']) && $val['id'] === $id) { 
```

此行将仅考虑数组并检查您传递给`findById`函数的 ID。如果存在，则将 ID 添加到函数将返回的数组中。所以这将解决问题1：找到从哪里开始。

```
if (isset($val['childs'])) { 
```

如果数组有一个项目“孩子”（它应该是孩子顺便说一句），它将递归地从该项目中获取所有 ID 并将它们添加到返回的数组中：

```
array_walk_recursive(
    $val['childs'],
    function($val, $key) use (&$ids) {
        if ($key === 'id') {
            $ids[] = $val;
        }
    }
); 
```

接受一个数组（第`array_walk_recursive`一个参数）并将叶子的值和键传递给回调函数（第二个参数）。回调函数仅检查叶子是否为 ID 值，然后将其添加到返回数组中。如您所见，我们使用的是对返回数组的引用。这是因为 using`use ($ids)`会在闭包范围内创建数组的副本，而我们需要真正的数组以便向其中添加项目。这将解决问题 2：添加所有子 ID。

# javascript - javascript setInterval 看不到 .css jquery

> ID：14624250
> 
> 赞同：0
> 
> 时间：2013-01-31T11:06:52.677
> 
> 标签：javascript, jquery

`js`我有这么小的代码和平：

```
var config = $('.fullscreen_src');
var i=0;
function display_images(){
    i++;
    var image = config[i % config.length];
    image.css('display', 'block');
}
setInterval(display_images, 3000); 
```

它每 3 秒抛出一次错误，因为`delay`. 错误是这个`TypeError: image.css is not a function`，我不知道是什么原因。当我改变`function display_image`这个：

```
function display_images(){
    i++;
    alert('tralal ' + i);
} 
```

它工作正常，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:10:41.177

您需要创建一个包含该`css`函数的 Jquery 对象

```
function display_images(){
    i++;
    var image = $(config[i % config.length]);
    image.css('display', 'block');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:12:01.823

css 是 Jquery 对象的函数。将对象包裹在 $(image) 中，像这样尝试

```
function display_images(){
    i++;
    var image = $(config[i % config.length]); // now image is Jquery object, so you can access CSS methods 
    image.css('display', 'block');
} 
```

或者你可以用 jquery 包装图像对象

```
 $(image).css('display', 'block'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T11:13:08.680

```
function display_images(){
    i++;
    var image = config[i % config.length];
    $(image).css('display', 'block');  // Use jQuery object..
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T11:12:21.283

尝试像这样修改您的代码。

```
var image = config[i % config.length];
image = $(image);
image.css('display', 'block'); 
```

# android - 如何避免 TextView.getLayout() 返回 null？

> ID：14624257
> 
> 赞同：4
> 
> 时间：2013-01-31T11:07:06.267
> 
> 标签：android, textview

我有一个 getLayout 返回 null 的 TextView。根据文档，这是“正常的”，因为就在之前，我将它添加到布局中，然后它改变了它的宽度。

如何避免这种情况？

（我尝试使用 OnGlobalLayoutListener，然后等待它的全宽，但它并不总是有效）

编辑：我在 getView() 中从列表适配器调用：

```
drawArticle(article, true); 
```

这是 drawArticle() 方法：

```
TextView txt;
Spanned text;
private void drawArticle(final Article article, boolean first) {
    if(first){
        text = Html.fromHtml(article.content);
    } else {
        text = Html.fromHtml(getInvisibleText(txt));
    }
    txt = createTextView();

    txt.setText(text);
    layout.addView(txt);
    vto = txt.getViewTreeObserver();
    vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
        @Override
        public void onGlobalLayout() {
            txt.getViewTreeObserver().removeGlobalOnLayoutListener(this);
            String inVisibleText = getInvisibleText(txt);
            if (inVisibleText != null && !inVisibleText.isEmpty()) {
                drawArticle(article, false);
            }
        }
    });
} 
```

和

```
private String getInvisibleText(final TextView textView) {
    Layout staticLayout = null;
    String toDislay = "";
    int height    = textView.getHeight();
    int scrollY   = textView.getScrollY();
    staticLayout = textView.getLayout();
    int lastVisibleLineNumber  = staticLayout.getLineForVertical(scrollY+height);
    int start = staticLayout.getLineEnd(lastVisibleLineNumber);
    int end = staticLayout.getLineEnd(textView.getLineCount()-1);
    toDislay = textView.getText().toString().substring(start, end);
    return toDislay;
} 
```

这是假设将很长的文本设置到文本视图中，然后将不显示的内容递归地放入其他文本视图中

# c# - 在 sql 和 web 应用程序之间安全发送密码的最佳实践？

> ID：14624258
> 
> 赞同：1
> 
> 时间：2013-01-31T11:07:13.487
> 
> 标签：c#, web-applications, passwords, security

我有一个关于在 C# 和 SQL 之间使用盐进行 SHA512 散列的问题。存储哈希的最佳方法是什么，我可以在从网络应用程序将它们保存到数据库后正常吗？当用户登录以验证用户时，以后获取它们是否安全？我可以在 SQL 中创建用户和密码，散列密码并添加盐，然后使用相同的算法在 c# 散列中验证用户，按其大小删除盐并比较两个散列吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T12:47:53.360

这是一个非常复杂的话题，你真的应该确保你做对了——大多数人都没有。

我见过的最全面的指南是 Les Hazlewood 的[How to Secure Passwords - Developer Best Practices](http://www.youtube.com/watch?v=6bR110r-RfY)演讲，这是我推荐的一个好的开始。

如果不写一本小书，这里没有人能够回答你所有的问题，所以我只能建议观看这个演讲，记下解释的问题、解决方案、工具和技术，然后找到更多关于它们的信息。

或者，您也可以将您的用户处理外包给一些正确执行此操作的公司，例如 Stormpath。您也可以使用[OpenID](http://openid.net/developers/)或[BrowserID](https://developer.mozilla.org/docs/persona)并且根本不关心密码。（虽然我现在不建议使用 BrowserID，至少在可以可靠地验证您自己的服务器上的断言之前不要使用。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T13:10:37.087

> 存储哈希的最佳方法是什么，我可以在从网络应用程序将它们保存到数据库后正常吗？当用户登录以验证用户时，以后获取它们是否安全？

如果您使用的是正确的方法，那么如果您碰巧将所有哈希值转储到 pastebin 上，则不会发生任何事情；由于盐（最好是胡椒），没有人可以对您的哈希做任何事情（因为他们没有无限的时间和计算能力）。

所以是的，您应该简单地将散列存储在适当类型的数据库列中。然后在登录时，您重新散列输入的明文密码并将其与存储在数据库中的密码进行比较。

# iphone - 解析器 RSS 和表格视图中的正确可视化

> ID：14624270
> 
> 赞同：0
> 
> 时间：2013-01-31T11:08:09.103
> 
> 标签：iphone, uitableview, text, rss, styles

在我的应用程序中，我使用解析器从 rss 加载数据。当我使用文本对齐中心将它们插入表格时，我没有获得正确的可视化效果。我想获得像 Reeder 应用程序这样的结果。

我的代码：

```
// Summary cell.textLabel.text = summaryString; 
cell.textLabel.numberOfLines = 0; 
// Multiline cell.textLabel.textAlignment = UITextAlignmentCenter; 
cell.backgroundColor = [UIColor clearColor]; 
cell.textLabel.font = [UIFont italicSystemFontOfSize:15]; 
```

这是我的桌子

![http://i.stack.imgur.com/quYOM.png](../Images/8aa776e9ce09cf5966b2f825ccdfeac1.png)

这是里德风格

![http://i.stack.imgur.com/WKNAK.png](../Images/f53dd12181bec9453d7b97d1bffa7022.png)

# c# - 在 WPF 中，如何从 gridview 中找到控件？

> ID：14624273
> 
> 赞同：0
> 
> 时间：2013-01-31T11:08:15.667
> 
> 标签：c#, asp.net, wpf, listview, gridview

我正在使用 listview 包含 gridview 来绑定数据。我想在按钮单击事件上找到复选框控件（即 chkUser）。（即btnUserId点击事件）

我怎样才能实现它？如果这里有任何其他替代解决方案，请告诉我。

我的代码：

```
<ListView Name="listUsers" SelectionMode="Single" Height="200" SelectionChanged="listUsers_SelectionChanged">
    <ListView.View>
        <GridView AllowsColumnReorder="true">
            <GridViewColumn Header="User Id" >
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <Button Name="btnUserId" Cursor="Hand"  Tag="{Binding Path=UserId }" Click="btnUserId_Click" Content="{Binding Path=UserId }" Style="{StaticResource LinkButton}"></Button>
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
            <GridViewColumn Header="Name" DisplayMemberBinding="{ Binding Path=UserName }"></GridViewColumn>
            <GridViewColumn Header="Email Id" DisplayMemberBinding="{ Binding Path=Email }"></GridViewColumn>
            <GridViewColumn Header="Mobile" DisplayMemberBinding="{ Binding Path=Mobile }"></GridViewColumn>
            <GridViewColumn Header="User Type" >
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <Label Name="lblUserType">User Type</Label>
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
            <GridViewColumn Header="Active" >
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <CheckBox Name="chkUser" Width="120" Content="{Binding Path=deleted }"></CheckBox>
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
            <GridViewColumn Header="Update" >
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <Button Height="23" Name="button1" Tag="{Binding Path=UserId }" CommandParameter="{ Binding Path=UserId }" Click="button1_Click" Width="75">Button</Button>
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
        </GridView>
    </ListView.View>
</ListView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:58:20.390

您应该能够使用 FindName 通过其名称来定位 ctrl。在上述情况下，它将是

```
listUsers.FindName("chkUser"); 
```

干杯

# iphone - 如何根据 iOS 中位置服务的状态重定向到视图控制器

> ID：14624274
> 
> 赞同：0
> 
> 时间：2013-01-31T11:08:21.423
> 
> 标签：iphone, ios, objective-c, cllocationmanager

我正在使用以下代码检查用户的应用位置服务是否已更改。如果他们改变，他们应该查看不同的视图控制器。它实际上只需要在每次应用启动时运行，然后根据`[CLLocationManager authorizationStatus]`状态重定向

我的代码的问题是每次位置更新时都会运行segue。

谢谢你的帮助

```
- (void)locationUpdate:(CLLocation *)location {
//locLabel.text = [location description];

NSLog(@"auth status is %u", [CLLocationManager authorizationStatus]);

if ([CLLocationManager authorizationStatus] == kCLAuthorizationStatusAuthorized) {
    [self performSegueWithIdentifier: @"SegueOffersGPS" sender: self];

} else {

    [self performSegueWithIdentifier: @"SegueOffersNoGPS" sender: self];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:15:08.877

如果您想停止更新位置，请编写以下代码

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation 
{
     [self.locationManger stopUpdatingLocation];
} 
```

# javascript - 从 url 中删除所有空值

> ID：14624275
> 
> 赞同：9
> 
> 时间：2013-01-31T11:08:22.050
> 
> 标签：javascript, regex, preg-replace

我想从 url 中删除所有空值：

```
var s="value1=a&value2=&value3=b&value4=c&value5=";
s = s.replace(...???...);
alert(s); 
```

预期输出：

```
value1=a&value3=b&value4=c 
```

我只需要考虑 URL 的查询部分。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-31T11:18:16.493

像这样的东西：

```
s = s.replace(/[^=&]+=(&|$)/g,"").replace(/&$/,""); 
```

也就是说，删除一个或多个非等号/非 & 字符的组，这些字符后跟等号和 & 号或字符串结尾。然后删除任何剩余的尾随 &。

演示：http: [//jsfiddle.net/pKHzr/](http://jsfiddle.net/pKHzr/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-01-14T02:10:05.930

```
s = s.replace(/[^?=&]+=(&|$)/g,"").replace(/&$/,""); 
```

添加了一个“？” 到 nnnnnn 的回答来解决第一个参数在完整 URL 中为空的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T11:15:52.093

这应该可以解决问题：

```
var s="value1=a&value2=&value3=b&value4=c&value5=";
var tmp = s.split('&')
var newS = '';
for(var i in a) {
    var t = a[i];
    if(t[t.length - 1] !== '=') {
        newS += t + '&';
    }
}

if(newS[newS.length - 1] === '&') {
    newS = newS.substr(0, newS.length - 1);
}
console.log(newS); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T11:18:48.003

我没有找到任何解决方案来用一种`Regex`表达方式做到这一点。

但是你可以遍历你的字符串并构造一个新的结果字符串：http: [//jsfiddle.net/UQTY2/3/](http://jsfiddle.net/UQTY2/3/)

```
var s="value1=a&value2=&value3=b&value4=c&value5=";
var tmpArray = s.split('&');
var final = '';

for(var i=0 ; i<tmpArray.length ; i++)
        if(tmpArray[i].split('=')[1] != '')
             final += tmpArray[i] + '&';

final = final.substr(0,final.length-1)

alert(final) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-31T11:19:03.940

你把所有的价值观放在哪里？我建议使用数组：

```
function getValues(str){
var values = [];
var s = str.split('&');

for(var val in s){//source is a
    var split = val.split('=');
    if(split [1] != '' && split [1] != null){
        values.push(val);
    }
}

return values.join('&');
} 
```

# sql - 从许多具有相同 id 的行中选择一行

> ID：14624277
> 
> 赞同：0
> 
> 时间：2013-01-31T11:08:38.470
> 
> 标签：sql, sql-server, select

我不知道该怎么做。我只需要为唯一名称选择一行，其中 mod_date 是最新值

```
mod_date      smtn           name     smtn2

2013-01-31  LV002002310453   Rax      zse
2013-01-29  LV002002310453   Rax      zse         
2013-01-31  LV002002310463   Rendo    xxc           
2013-01-01  LV002002310463   Rendo    xxc          
2013-01-28  LV002002310465   Mag      xsa        
2013-01-30  LV002002310465   Mag      xsa     
2013-01-25  LV002002310465   Mag      xsa 
```

我的选择结果应如下所示：

```
 mod_date      smtn          name     smtn2

2013-01-31  LV002002310453   Rax       zse
2013-01-31  LV002002310463   Rendo     xxc       
2013-01-30  LV002002310465   Mag       xsa 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T11:10:26.310

您可以`ROW_NUMBER`在 CTE 中使用（假设 >= SQL-SERVER 2005）

```
WITH x AS (SELECT mod_date,smtn,name,smtn2, 
                RN = Row_number() 
                       OVER( 
                         partition BY name 
                         ORDER BY mod_date DESC) 
         FROM   dbo.tablename) 
SELECT mod_date,smtn,name,smtn2 
FROM   x 
WHERE  rn = 1 
```

`DENSE_RANK`当名称的最后日期不唯一时，如果您想要所有行，请改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:13:04.623

请试试：

```
select * From
(
    select 
        Row_number() over (partition by name order by mod_date desc) RNUM, 
        mod_date, 
        name
    From 
        YourTable
)x where RNUM=1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T11:11:15.343

```
Select distinct smtn from Databasename order by mod_date desc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T11:22:25.160

使用 distinct 可能会忽略重复数据，但也可能会发生冲突，因为它也可能会忽略有用的数据。

您可以按您的结果排序（基于日期），以便您可以根据日期对其进行排序。

**select * from (tablename) order by [Date] desc**

# scala - 如何使枚举器不是来自文件？

> ID：14624278
> 
> 赞同：3
> 
> 时间：2013-01-31T11:08:45.203
> 
> 标签：scala, playframework-2.0

我正在使用 scala + play 2.0.4 开发 Web 应用程序。当程序运行时，它会从 mongoDB 获取大量数据并尝试制作 csv 文件并将其发送到客户端浏览器，以便下载 csv 文件。但是数据太大了，浏览器等不了半天没有任何反应。我尝试使用 Ok.stream() 和 Enumerator 但我不知道如何使用它来处理这个问题。你能告诉我如何使用 Ok.stream 和 Enumerator 来解决这个问题吗？

# ruby - Ruby：获取 Fiber 父级

> ID：14624280
> 
> 赞同：2
> 
> 时间：2013-01-31T11:08:48.000
> 
> 标签：ruby, fibers

是否可以检索创建当前光纤的光纤？如果我能在创建新的 Fiber 时获得这些信息就足够了。

Monkey-patching`Fiber#new`不起作用，因为调用`Fiber#current`会导致“未初始化的光纤”错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T09:32:57.290

我终于找到了让它工作的方法。如果我们重新定义`initialize`它将失败，因为内部不会初始化光纤。然而，可以给它起别名，创建一个新的，然后运行旧的：

```
 class Fiber
    alias_method :old_init, :initialize

    def initialize
      old_init
      @parent = Fiber.current
    end

    def parent
      @parent
    end
  end 
```

因为直到我们在纤程上`Fiber.current`执行才会改变，我们可以安全地在初始化器中复制一个引用。`resume`

现在我们可以问系统“你爷爷是谁？” `Fiber.current.parent.parent`.

# android - 尝试使用蓝牙时出现空指针异常

> ID：14624281
> 
> 赞同：1
> 
> 时间：2013-01-31T11:08:48.397
> 
> 标签：android, bluetooth, emulation

我正在尝试创建一个使用设备蓝牙的 Android 应用程序。但是，当我尝试模拟应用程序时，它给了我这个错误：不幸的是，应用程序已停止。

我已经搜索了解决方案，但问题是，我已经完成了以下操作：

1.  使用实际设备而不是模拟器，因为无法模拟蓝牙功能
2.  根据我在网上找到的一些建议修改代码
3.  在支持蓝牙的计算机上使用虚拟机而不是普通模拟器。

以上所有的尝试都被证明是徒劳的，没有任何效果。

我的java文件：

```
package com.example.application;

import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener; 
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity{
/** Called when the activity is first created. */
private BluetoothAdapter btAdapter;

public TextView statusUpdate;
public Button connect;
public Button disconnect;
public ImageView logo;

BroadcastReceiver bluetoothState = new BroadcastReceiver(){
    @Override
    public void onReceive(Context context, Intent intent){
        String prevStateExtra=BluetoothAdapter.EXTRA_PREVIOUS_STATE;
        String stateExtra=BluetoothAdapter.EXTRA_STATE;
        int state = intent.getIntExtra(prevStateExtra,  -1);
        int previousState = intent.getIntExtra(prevStateExtra, -1);
        String toastText="";
        switch(state){
        case(BluetoothAdapter.STATE_TURNING_ON) :
        {
            toastText="Bluetooth turning on";
            Toast.makeText(MainActivity.this, toastText,          Toast.LENGTH_SHORT).show();
            break;
        }   
        case(BluetoothAdapter.STATE_ON) :
        {
            toastText="Bluetooth on";
            Toast.makeText(MainActivity.this, toastText, Toast.LENGTH_SHORT).show();
            setupUI();
            break;
        }   
        case(BluetoothAdapter.STATE_TURNING_OFF) :
        {
            toastText="Bluetooth turning off";
            Toast.makeText(MainActivity.this, toastText, Toast.LENGTH_SHORT).show();
            break;
        }       
        case(BluetoothAdapter.STATE_OFF) :
        {
            toastText="Bluetooth off";
            Toast.makeText(MainActivity.this, toastText, Toast.LENGTH_SHORT).show();
            setupUI();
            break;
        }

        }

    }

};
@Override
public void onCreate(Bundle savedInstanceState){
super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
setupUI();  
}//end onCreate

private void setupUI(){
//get references
//final TextView statusUpdate = (TextView) findViewById(R.id.result);
final Button connect = (Button)findViewById(R.id.connect);
final Button disconnect = (Button)findViewById(R.id.disconnect);
//final ImageView logo = (ImageView)findviewById(R.id.logo);
//set display view

disconnect.setVisibility(View.GONE);
logo.setVisibility(View.GONE);
btAdapter = BluetoothAdapter.getDefaultAdapter();
if(btAdapter.isEnabled()){
    String address = btAdapter.getAddress();
    String name = btAdapter.getName();
    String statusText = name + " : " + address;
    statusUpdate.setText(statusText);
}
else{
    connect.setVisibility(View.VISIBLE);
    statusUpdate.setText("Bluetooth is not on");
}

connect.setOnClickListener(new OnClickListener(){
    @Override
    public void onClick(View v){
        String actionStateChanged =     BluetoothAdapter.ACTION_CONNECTION_STATE_CHANGED;
        String actionRequestEnable = BluetoothAdapter.ACTION_REQUEST_ENABLE;
        IntentFilter filter = new IntentFilter(actionStateChanged);
        registerReceiver(bluetoothState, filter);
        startActivityForResult(new Intent(actionRequestEnable), 0);

    }

}); //end connect onClickListener

disconnect.setOnClickListener(new OnClickListener(){
    @Override
    public void onClick(View v){

    }

}); //end disconnect onClickListener

}
} //end setupUI 
```

主要.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:padding="1dp" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:gravity="center"
    android:text="Sherline Android App"
    android:textColor="#0000ff"
    android:textSize="20dp"
    android:textStyle="bold" />

    <requestFocus />

    <Button
        android:id="@+id/connect"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView1"
        android:layout_below="@+id/textView1"
        android:layout_marginTop="36dp"
        android:text="Connect Bluetooth"
        android:textSize="12sp"
        android:textStyle="bold" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="200dp"
        android:layout_height="300dp"
        android:layout_alignTop="@+id/connect"
        android:layout_toRightOf="@+id/disconnect"
        android:background="#808080"
        android:ems="10"
        android:hint="G-code goes here..."
        android:inputType="textMultiLine"
        android:textColorHint="#FFFFFFFF"
        android:width="150dp" >                     

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/Button01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/disconnect"
        android:layout_alignRight="@+id/disconnect"
        android:layout_below="@+id/disconnect"
        android:radius="3dp"
        android:text="Stop"
        android:textSize="12dp"
        android:textStyle="bold" />

    <Button
        android:id="@+id/Button02"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/Button01"
        android:layout_alignRight="@+id/Button01"
        android:layout_centerVertical="true"
        android:radius="3dp"
        android:text="Pause"
        android:textSize="12dp"
        android:textStyle="bold" />

    <Button
        android:id="@+id/Button03"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/Button02"
        android:layout_alignRight="@+id/Button02"
        android:layout_below="@+id/Button02"
        android:radius="3dp"
        android:text="Resume"
        android:textSize="12dp"
        android:textStyle="bold" />

    <Button
        android:id="@+id/disconnect"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignRight="@+id/connect"
        android:layout_below="@+id/connect"
        android:radius="3dp"
        android:text="Disconnect Bluetooth"
        android:textSize="12sp"
        android:textStyle="bold" />

</RelativeLayout> 
```

logcat 显示以下错误：

```
01-31 10:34:41.511: E/AndroidRuntime(978): FATAL EXCEPTION: main
01-31 10:34:41.511: E/AndroidRuntime(978): java.lang.RuntimeException: Unable to start          activity ComponentInfo{com.example.application/com.example.application.MainActivity}:     java.lang.NullPointerException
01-31 10:34:41.511: E/AndroidRuntime(978):  at         android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-31 10:34:41.511: E/AndroidRuntime(978):  at     android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-31 10:34:41.511: E/AndroidRuntime(978):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-31 10:34:41.511: E/AndroidRuntime(978):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-31 10:34:41.511: E/AndroidRuntime(978):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-31 10:34:41.511: E/AndroidRuntime(978):  at android.os.Looper.loop(Looper.java:137)
01-31 10:34:41.511: E/AndroidRuntime(978):  at android.app.ActivityThread.main(ActivityThread.java:5039)
01-31 10:34:41.511: E/AndroidRuntime(978):  at java.lang.reflect.Method.invokeNative(Native Method)
01-31 10:34:41.511: E/AndroidRuntime(978):  at java.lang.reflect.Method.invoke(Method.java:511)
01-31 10:34:41.511: E/AndroidRuntime(978):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-31 10:34:41.511: E/AndroidRuntime(978):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-31 10:34:41.511: E/AndroidRuntime(978):  at dalvik.system.NativeStart.main(Native     Method)
01-31 10:34:41.511: E/AndroidRuntime(978): Caused by: java.lang.NullPointerException
01-31 10:34:41.511: E/AndroidRuntime(978):  at     com.example.application.MainActivity.setupUI(MainActivity.java:87)
01-31 10:34:41.511: E/AndroidRuntime(978):  at com.example.application.MainActivity.onCreate(MainActivity.java:73)
01-31 10:34:41.511: E/AndroidRuntime(978):  at android.app.Activity.performCreate(Activity.java:5104)
01-31 10:34:41.511: E/AndroidRuntime(978):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-31 10:34:41.511: E/AndroidRuntime(978):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-31 10:34:41.511: E/AndroidRuntime(978):  ... 11 more
01-31 10:54:41.175: E/AndroidRuntime(1149): FATAL EXCEPTION: main
01-31 10:54:41.175: E/AndroidRuntime(1149): java.lang.RuntimeException: Unable to start     activity ComponentInfo{com.example.application/com.example.application.MainActivity}:     java.lang.NullPointerException
01-31 10:54:41.175: E/AndroidRuntime(1149):     at     android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-31 10:54:41.175: E/AndroidRuntime(1149):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-31 10:54:41.175: E/AndroidRuntime(1149):     at     android.app.ActivityThread.access$600(ActivityThread.java:141)
01-31 10:54:41.175: E/AndroidRuntime(1149):     at     android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-31 10:54:41.175: E/AndroidRuntime(1149):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-31 10:54:41.175: E/AndroidRuntime(1149):     at android.os.Looper.loop(Looper.java:137)
01-31 10:54:41.175: E/AndroidRuntime(1149):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-31 10:54:41.175: E/AndroidRuntime(1149):     at java.lang.reflect.Method.invokeNative(Native Method)
01-31 10:54:41.175: E/AndroidRuntime(1149):     at java.lang.reflect.Method.invoke(Method.java:511)
01-31 10:54:41.175: E/AndroidRuntime(1149):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-31 10:54:41.175: E/AndroidRuntime(1149):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-31 10:54:41.175: E/AndroidRuntime(1149):     at dalvik.system.NativeStart.main(Native Method)
01-31 10:54:41.175: E/AndroidRuntime(1149): Caused by: java.lang.NullPointerException
01-31 10:54:41.175: E/AndroidRuntime(1149):     at com.example.application.MainActivity.setupUI(MainActivity.java:87)
01-31 10:54:41.175: E/AndroidRuntime(1149):     at com.example.application.MainActivity.onCreate(MainActivity.java:73)
01-31 10:54:41.175: E/AndroidRuntime(1149):     at android.app.Activity.performCreate(Activity.java:5104)
01-31 10:54:41.175: E/AndroidRuntime(1149):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-31 10:54:41.175: E/AndroidRuntime(1149):     at     android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-31 10:54:41.175: E/AndroidRuntime(1149):     ... 11 more 
```

请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T11:20:30.667

好吧，你得到了`NullPointerException`，可能有 2 个感兴趣的案例。

1.  `statusUpdate`, 和`logo`变量是`NULL`, 但其他答案已经解释了这一点。

2.  `BluetoothAdapter.getDefaultAdapter()``NULL`如果硬件不支持蓝牙，可能会返回。所以你也需要处理这种情况..

    ```
    btAdapter = BluetoothAdapter.getDefaultAdapter();
    if(btAdapter != null && btAdapter.isEnabled()){  // see changes in this line.. 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T11:14:07.857

问题是这一行有空指针：

```
 logo.setVisibility(View.GONE); 
```

取消注释这一行：

```
 //final ImageView logo = (ImageView)findviewById(R.id.logo); 
```

编辑：statusUpdate 有同样的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T11:13:09.560

一个问题...该组件未连接到您的布局：

```
statusUpdate.setText(statusText); 
```

我认为你需要这样的东西：

```
statusUpdate = (TextView)findViewById(R.id.textView1); 
```

# function - ocaml 中的“和”函数

> ID：14624284
> 
> 赞同：0
> 
> 时间：2013-01-31T11:09:04.163
> 
> 标签：function, ocaml

我正在做一个 ocaml 项目，我正在学习语法。我看到了一个格式如下的程序：

```
 let foo1 = function
    |(x, y) -> foo2 (x,y) z
 and foo2 a s=
    (*stuff in here*) 
```

我很关心那里在`and`做什么。我试着在网上寻找这可能意味着什么，但我似乎找不到任何东西。它也可能只是一个错字......任何建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T11:14:09.507

`and`用于定义相互递归的函数/数据类型。

没有`and`，你不能同时调用`foo2`from`foo1`和`foo1`from `foo2`，你只能拥有其中之一。

您还需要`rec`在您的示例中使其正常工作。没有`rec`，`and`就跟平常一样`let`。

这是两个相互递归的函数定义：

```
let rec some_fun1 _ =
    print_endline "fun1";
    some_fun2 ()

and some_fun2 _ =
    print_endline "fun2";
    some_fun1 () 
```

（就像我上面说的，没有`rec`这个是行不通的）

# mysql - 有没有办法使用 mysql 命令行实用程序列出 mysql 中的所有保留字

> ID：14624292
> 
> 赞同：3
> 
> 时间：2013-01-31T11:09:28.150
> 
> 标签：mysql

有没有办法使用命令行实用程序**(mysql)**列出**MySQL(5.x)**中的所有保留字？

 *** * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-31T11:18:56.243

MySQL(5.x)中有一个mysql模式

您可以查询：

```
SELECT * FROM mysql.help_keyword; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T11:23:51.650

这是截至 5.6 的完整列表...

```
DROP TABLE IF EXISTS reserved_words;

CREATE TABLE reserved_words (keyword VARCHAR(30) NOT NULL PRIMARY KEY);

INSERT INTO reserved_words VALUES
("ACCESSIBLE"),
("ADD"),
("ALL"),
("ALTER"),
("ANALYZE"),
("AND"),
("AS"),
("ASC"),
("ASENSITIVE"),
("BEFORE"),
("BETWEEN"),
("BIGINT"),
("BINARY"),
("BLOB"),
("BOTH"),
("BY"),
("CALL"),
("CASCADE"),
("CASE"),
("CHANGE"),
("CHAR"),
("CHARACTER"),
("CHECK"),
("COLLATE"),
("COLUMN"),
("CONDITION"),
("CONSTRAINT"),
("CONTINUE"),
("CONVERT"),
("CREATE"),
("CROSS"),
("CURRENT_DATE"),
("CURRENT_TIME"),
("CURRENT_TIMESTAMP"),
("CURRENT_USER"),
("CURSOR"),
("DATABASE"),
("DATABASES"),
("DAY_HOUR"),
("DAY_MICROSECOND"),
("DAY_MINUTE"),
("DAY_SECOND"),
("DEC"),
("DECIMAL"),
("DECLARE"),
("DEFAULT"),
("DELAYED"),
("DELETE"),
("DESC"),
("DESCRIBE"),
("DETERMINISTIC"),
("DISTINCT"),
("DISTINCTROW"),
("DIV"),
("DOUBLE"),
("DROP"),
("DUAL"),
("EACH"),
("ELSE"),
("ELSEIF"),
("ENCLOSED"),
("ESCAPED"),
("EXISTS"),
("EXIT"),
("EXPLAIN"),
("FALSE"),
("FETCH"),
("FLOAT"),
("FLOAT4"),
("FLOAT8"),
("FOR"),
("FORCE"),
("FOREIGN"),
("FROM"),
("FULLTEXT"),
("GET"),
("GRANT"),
("GROUP"),
("HAVING"),
("HIGH_PRIORITY"),
("HOUR_MICROSECOND"),
("HOUR_MINUTE"),
("HOUR_SECOND"),
("IF"),
("IGNORE"),
("IN"),
("INDEX"),
("INFILE"),
("INNER"),
("INOUT"),
("INSENSITIVE"),
("INSERT"),
("INT"),
("INT1"),
("INT2"),
("INT3"),
("INT4"),
("INT8"),
("INTEGER"),
("INTERVAL"),
("INTO"),
("IO_AFTER_GTIDS"),
("IO_BEFORE_GTIDS"),
("IS"),
("ITERATE"),
("JOIN"),
("KEY"),
("KEYS"),
("KILL"),
("LEADING"),
("LEAVE"),
("LEFT"),
("LIKE"),
("LIMIT"),
("LINEAR"),
("LINES"),
("LOAD"),
("LOCALTIME"),
("LOCALTIMESTAMP"),
("LOCK"),
("LONG"),
("LONGBLOB"),
("LONGTEXT"),
("LOOP"),
("LOW_PRIORITY"),
("MASTER_BIND"),
("MASTER_SSL_VERIFY_SERVER_CERT"),
("MATCH"),
("MAXVALUE"),
("MEDIUMBLOB"),
("MEDIUMINT"),
("MEDIUMTEXT"),
("MIDDLEINT"),
("MINUTE_MICROSECOND"),
("MINUTE_SECOND"),
("MOD"),
("MODIFIES"),
("NATURAL"),
("NOT"),
("NO_WRITE_TO_BINLOG"),
("NULL"),
("NUMERIC"),
("ON"),
("OPTIMIZE"),
("OPTION"),
("OPTIONALLY"),
("OR"),
("ORDER"),
("OUT"),
("OUTER"),
("OUTFILE"),
("PARTITION"),
("PRECISION"),
("PRIMARY"),
("PROCEDURE"),
("PURGE"),
("RANGE"),
("READ"),
("READS"),
("READ_WRITE"),
("REAL"),
("REFERENCES"),
("REGEXP"),
("RELEASE"),
("RENAME"),
("REPEAT"),
("REPLACE"),
("REQUIRE"),
("RESIGNAL"),
("RESTRICT"),
("RETURN"),
("REVOKE"),
("RIGHT"),
("RLIKE"),
("SCHEMA"),
("SCHEMAS"),
("SECOND_MICROSECOND"),
("SELECT"),
("SENSITIVE"),
("SEPARATOR"),
("SET"),
("SHOW"),
("SIGNAL"),
("SMALLINT"),
("SPATIAL"),
("SPECIFIC"),
("SQL"),
("SQLEXCEPTION"),
("SQLSTATE"),
("SQLWARNING"),
("SQL_BIG_RESULT"),
("SQL_CALC_FOUND_ROWS"),
("SQL_SMALL_RESULT"),
("SSL"),
("STARTING"),
("STRAIGHT_JOIN"),
("TABLE"),
("TERMINATED"),
("THEN"),
("TINYBLOB"),
("TINYINT"),
("TINYTEXT"),
("TO"),
("TRAILING"),
("TRIGGER"),
("TRUE"),
("UNDO"),
("UNION"),
("UNIQUE"),
("UNLOCK"),
("UNSIGNED"),
("UPDATE"),
("USAGE"),
("USE"),
("USING"),
("UTC_DATE"),
("UTC_TIME"),
("UTC_TIMESTAMP"),
("VALUES"),
("VARBINARY"),
("VARCHAR"),
("VARCHARACTER"),
("VARYING"),
("WHEN"),
("WHERE"),
("WHILE"),
("WITH"),
("WRITE"),
("XOR"),
("YEAR_MONTH"),
("ZEROFILL"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T11:18:26.677

我不这么认为。[文档](http://dev.mysql.com/doc/refman/5.6/en/reserved-words.html)上有一条评论建议创建一个包含以下单词的表格：

```
create table reserved_words (reserved_word varchar(50));
insert into reserved_words (reserved_word) values
('ACCESSIBLE'),
('ALTER'),
('AS'),
('BEFORE'),
('BINARY'),
('BY'),
('CASE'),
('CHARACTER'),
('COLUMN'),
('CONTINUE'),
('CROSS'),
('CURRENT_TIMESTAMP'),
('DATABASE'),
('DAY_MICROSECOND'),
('DEC'),
('DEFAULT'),
('DESC'),
('DISTINCT'),
('DOUBLE'),
('EACH'),
('ENCLOSED'),
('EXIT'),
('FETCH'),
('FLOAT8'),
('FOREIGN'),
('GRANT'),
('HIGH_PRIORITY'),
('HOUR_SECOND'),
('IN'),
('INNER'),
('INSERT'),
('INT2'),
('INT8'),
('INTO'),
('JOIN'),
('KILL'),
('LEFT'),
('LINEAR'),
('LOCALTIME'),
('LONG'),
('LOOP'),
('MATCH'),
('MEDIUMTEXT'),
('MINUTE_SECOND'),
('NATURAL'),
('NULL'),
('OPTIMIZE'),
('OR'),
('OUTER'),
('PRIMARY'),
('RANGE'),
('READ_WRITE'),
('REGEXP'),
('REPEAT'),
('RESTRICT'),
('RIGHT'),
('SCHEMAS'),
('SENSITIVE'),
('SHOW'),
('SPECIFIC'),
('SQLSTATE'),
('SQL_CALC_FOUND_ROWS'),
('STARTING'),
('TERMINATED'),
('TINYINT'),
('TRAILING'),
('UNDO'),
('UNLOCK'),
('USAGE'),
('UTC_DATE'),
('VALUES'),
('VARCHARACTER'),
('WHERE'),
('WRITE'),
('ZEROFILL'),
('ALL'),
('AND'),
('ASENSITIVE'),
('BIGINT'),
('BOTH'),
('CASCADE'),
('CHAR'),
('COLLATE'),
('CONSTRAINT'),
('CREATE'),
('CURRENT_TIME'),
('CURSOR'),
('DAY_HOUR'),
('DAY_SECOND'),
('DECLARE'),
('DELETE'),
('DETERMINISTIC'),
('DIV'),
('DUAL'),
('ELSEIF'),
('EXISTS'),
('FALSE'),
('FLOAT4'),
('FORCE'),
('FULLTEXT'),
('HAVING'),
('HOUR_MINUTE'),
('IGNORE'),
('INFILE'),
('INSENSITIVE'),
('INT1'),
('INT4'),
('INTERVAL'),
('ITERATE'),
('KEYS'),
('LEAVE'),
('LIMIT'),
('LOAD'),
('LOCK'),
('LONGTEXT'),
('MASTER_SSL_VERIFY_SERVER_CERT'),
('MEDIUMINT'),
('MINUTE_MICROSECOND'),
('MODIFIES'),
('NO_WRITE_TO_BINLOG'),
('ON'),
('OPTIONALLY'),
('OUT'),
('PRECISION'),
('PURGE'),
('READS'),
('REFERENCES'),
('RENAME'),
('REQUIRE'),
('REVOKE'),
('SCHEMA'),
('SELECT'),
('SET'),
('SPATIAL'),
('SQLEXCEPTION'),
('SQL_BIG_RESULT'),
('SSL'),
('TABLE'),
('TINYBLOB'),
('TO'),
('TRUE'),
('UNIQUE'),
('UPDATE'),
('USING'),
('UTC_TIMESTAMP'),
('VARCHAR'),
('WHEN'),
('WITH'),
('YEAR_MONTH'),
('ADD'),
('ANALYZE'),
('ASC'),
('BETWEEN'),
('BLOB'),
('CALL'),
('CHANGE'),
('CHECK'),
('CONDITION'),
('CONVERT'),
('CURRENT_DATE'),
('CURRENT_USER'),
('DATABASES'),
('DAY_MINUTE'),
('DECIMAL'),
('DELAYED'),
('DESCRIBE'),
('DISTINCTROW'),
('DROP'),
('ELSE'),
('ESCAPED'),
('EXPLAIN'),
('FLOAT'),
('FOR'),
('FROM'),
('GROUP'),
('HOUR_MICROSECOND'),
('IF'),
('INDEX'),
('INOUT'),
('INT'),
('INT3'),
('INTEGER'),
('IS'),
('KEY'),
('LEADING'),
('LIKE'),
('LINES'),
('LOCALTIMESTAMP'),
('LONGBLOB'),
('LOW_PRIORITY'),
('MEDIUMBLOB'),
('MIDDLEINT'),
('MOD'),
('NOT'),
('NUMERIC'),
('OPTION'),
('ORDER'),
('OUTFILE'),
('PROCEDURE'),
('READ'),
('REAL'),
('RELEASE'),
('REPLACE'),
('RETURN'),
('RLIKE'),
('SECOND_MICROSECOND'),
('SEPARATOR'),
('SMALLINT'),
('SQL'),
('SQLWARNING'),
('SQL_SMALL_RESULT'),
('STRAIGHT_JOIN'),
('THEN'),
('TINYTEXT'),
('TRIGGER'),
('UNION'),
('UNSIGNED'),
('USE'),
('UTC_TIME'),
('VARBINARY'),
('VARYING'),
('WHILE'),
('XOR')
; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-27T11:44:18.130

MySQL8.0的所有保留字都是从[这里](https://dev.mysql.com/doc/refman/8.0/en/keywords.html#keywords-in-current-series)提取的：

```
ACCESSIBLE,
ACCOUNT,
ACTION,
ACTIVE,
ADD,
ADMIN,
AFTER,
AGAINST,
AGGREGATE,
ALGORITHM,
ALL,
ALTER,
ALWAYS,
ANALYSE,
ANALYZE,
AND,
ANY,
ARRAY,
AS,
ASC,
ASCII,
ASENSITIVE,
AT,
AUTOEXTEND_SIZE,
AUTO_INCREMENT,
AVG,
AVG_ROW_LENGTH,
BACKUP,
BEFORE,
BEGIN,
BETWEEN,
BIGINT,
BINARY,
BINLOG,
BIT,
BLOB,
BLOCK,
BOOL,
BOOLEAN,
BOTH,
BTREE,
BUCKETS,
BY,
BYTE,
CACHE,
CALL,
CASCADE,
CASCADED,
CASE,
CATALOG_NAME,
CHAIN,
CHANGE,
CHANGED,
CHANNEL,
CHAR,
CHARACTER,
CHARSET,
CHECK,
CHECKSUM,
CIPHER,
CLASS_ORIGIN,
CLIENT,
CLONE,
CLOSE,
COALESCE,
CODE,
COLLATE,
COLLATION,
COLUMN,
COLUMNS,
COLUMN_FORMAT,
COLUMN_NAME,
COMMENT,
COMMIT,
COMMITTED,
COMPACT,
COMPLETION,
COMPONENT,
COMPRESSED,
COMPRESSION,
CONCURRENT,
CONDITION,
CONNECTION,
CONSISTENT,
CONSTRAINT,
CONSTRAINT_CATALOG,
CONSTRAINT_NAME,
CONSTRAINT_SCHEMA,
CONTAINS,
CONTEXT,
CONTINUE,
CONVERT,
CPU,
CREATE,
CROSS,
CUBE,
CUME_DIST,
CURRENT,
CURRENT_DATE,
CURRENT_TIME,
CURRENT_TIMESTAMP,
CURRENT_USER,
CURSOR,
CURSOR_NAME,
DATA,
DATABASE,
DATABASES,
DATAFILE,
DATE,
DATETIME,
DAY,
DAY_HOUR,
DAY_MICROSECOND,
DAY_MINUTE,
DAY_SECOND,
DEALLOCATE,
DEC,
DECIMAL,
DECLARE,
DEFAULT,
DEFAULT_AUTH,
DEFINER,
DEFINITION,
DELAYED,
DELAY_KEY_WRITE,
DELETE,
DENSE_RANK,
DESC,
DESCRIBE,
DESCRIPTION,
DES_KEY_FILE,
DETERMINISTIC,
DIAGNOSTICS,
DIRECTORY,
DISABLE,
DISCARD,
DISK,
DISTINCT,
DISTINCTROW,
DIV,
DO,
DOUBLE,
DROP,
DUAL,
DUMPFILE,
DUPLICATE,
DYNAMIC,
EACH,
ELSE,
ELSEIF,
EMPTY,
ENABLE,
ENCLOSED,
ENCRYPTION,
END,
ENDS,
ENFORCED,
ENGINE,
ENGINES,
ENUM,
ERROR,
ERRORS,
ESCAPE,
ESCAPED,
EVENT,
EVENTS,
EVERY,
EXCEPT,
EXCHANGE,
EXCLUDE,
EXECUTE,
EXISTS,
EXIT,
EXPANSION,
EXPIRE,
EXPLAIN,
EXPORT,
EXTENDED,
EXTENT_SIZE,
FAILED_LOGIN_ATTEMPTS,
FALSE,
FAST,
FAULTS,
FETCH,
FIELDS,
FILE,
FILE_BLOCK_SIZE,
FILTER,
FIRST,
FIRST_VALUE,
FIXED,
FLOAT,
FLOAT4,
FLOAT8,
FLUSH,
FOLLOWING,
FOLLOWS,
FOR,
FORCE,
FOREIGN,
FORMAT,
FOUND,
FROM,
FULL,
FULLTEXT,
FUNCTION,
GENERAL,
GENERATED,
GEOMCOLLECTION,
GEOMETRY,
GEOMETRYCOLLECTION,
GET,
GET_FORMAT,
GET_MASTER_PUBLIC_KEY,
GLOBAL,
GRANT,
GRANTS,
GROUP,
GROUPING,
GROUPS,
GROUP_REPLICATION,
HANDLER,
HASH,
HAVING,
HELP,
HIGH_PRIORITY,
HISTOGRAM,
HISTORY,
HOST,
HOSTS,
HOUR,
HOUR_MICROSECOND,
HOUR_MINUTE,
HOUR_SECOND,
IDENTIFIED,
IF,
IGNORE,
IGNORE_SERVER_IDS,
IMPORT,
IN,
INACTIVE,
INDEX,
INDEXES,
INFILE,
INITIAL_SIZE,
INNER,
INOUT,
INSENSITIVE,
INSERT,
INSERT_METHOD,
INSTALL,
INSTANCE,
INT,
INT1,
INT2,
INT3,
INT4,
INT8,
INTEGER,
INTERVAL,
INTO,
INVISIBLE,
INVOKER,
IO,
IO_AFTER_GTIDS,
IO_BEFORE_GTIDS,
IO_THREAD,
IPC,
IS,
ISOLATION,
ISSUER,
ITERATE,
JOIN,
JSON,
JSON_TABLE,
JSON_VALUE,
KEY,
KEYS,
KEY_BLOCK_SIZE,
KILL,
LAG,
LANGUAGE,
LAST,
LAST_VALUE,
LATERAL,
LEAD,
LEADING,
LEAVE,
LEAVES,
LEFT,
LESS,
LEVEL,
LIKE,
LIMIT,
LINEAR,
LINES,
LINESTRING,
LIST,
LOAD,
LOCAL,
LOCALTIME,
LOCALTIMESTAMP,
LOCK,
LOCKED,
LOCKS,
LOGFILE,
LOGS,
LONG,
LONGBLOB,
LONGTEXT,
LOOP,
LOW_PRIORITY,
MASTER,
MASTER_AUTO_POSITION,
MASTER_BIND,
MASTER_COMPRESSION_ALGORITHMS,
MASTER_CONNECT_RETRY,
MASTER_DELAY,
MASTER_HEARTBEAT_PERIOD,
MASTER_HOST,
MASTER_LOG_FILE,
MASTER_LOG_POS,
MASTER_PASSWORD,
MASTER_PORT,
MASTER_PUBLIC_KEY_PATH,
MASTER_RETRY_COUNT,
MASTER_SERVER_ID,
MASTER_SSL,
MASTER_SSL_CA,
MASTER_SSL_CAPATH,
MASTER_SSL_CERT,
MASTER_SSL_CIPHER,
MASTER_SSL_CRL,
MASTER_SSL_CRLPATH,
MASTER_SSL_KEY,
MASTER_SSL_VERIFY_SERVER_CERT,
MASTER_TLS_CIPHERSUITES,
MASTER_TLS_VERSION,
MASTER_USER,
MASTER_ZSTD_COMPRESSION_LEVEL,
MATCH,
MAXVALUE,
MAX_CONNECTIONS_PER_HOUR,
MAX_QUERIES_PER_HOUR,
MAX_ROWS,
MAX_SIZE,
MAX_UPDATES_PER_HOUR,
MAX_USER_CONNECTIONS,
MEDIUM,
MEDIUMBLOB,
MEDIUMINT,
MEDIUMTEXT,
MEMBER,
MEMORY,
MERGE,
MESSAGE_TEXT,
MICROSECOND,
MIDDLEINT,
MIGRATE,
MINUTE,
MINUTE_MICROSECOND,
MINUTE_SECOND,
MIN_ROWS,
MOD,
MODE,
MODIFIES,
MODIFY,
MONTH,
MULTILINESTRING,
MULTIPOINT,
MULTIPOLYGON,
MUTEX,
MYSQL_ERRNO,
NAME,
NAMES,
NATIONAL,
NATURAL,
NCHAR,
NDB,
NDBCLUSTER,
NESTED,
NETWORK_NAMESPACE,
NEVER,
NEW,
NEXT,
NO,
NODEGROUP,
NONE,
NOT,
NOWAIT,
NO_WAIT,
NO_WRITE_TO_BINLOG,
NTH_VALUE,
NTILE,
NULL,
NULLS,
NUMBER,
NUMERIC,
NVARCHAR,
OF,
OFF,
OFFSET,
OJ,
OLD,
ON,
ONE,
ONLY,
OPEN,
OPTIMIZE,
OPTIMIZER_COSTS,
OPTION,
OPTIONAL,
OPTIONALLY,
OPTIONS,
OR,
ORDER,
ORDINALITY,
ORGANIZATION,
OTHERS,
OUT,
OUTER,
OUTFILE,
OVER,
OWNER,
PACK_KEYS,
PAGE,
PARSER,
PARTIAL,
PARTITION,
PARTITIONING,
PARTITIONS,
PASSWORD,
PASSWORD_LOCK_TIME,
PATH,
PERCENT_RANK,
PERSIST,
PERSIST_ONLY,
PHASE,
PLUGIN,
PLUGINS,
PLUGIN_DIR,
POINT,
POLYGON,
PORT,
PRECEDES,
PRECEDING,
PRECISION,
PREPARE,
PRESERVE,
PREV,
PRIMARY,
PRIVILEGES,
PRIVILEGE_CHECKS_USER,
PROCEDURE,
PROCESS,
PROCESSLIST,
PROFILE,
PROFILES,
PROXY,
PURGE,
QUARTER,
QUERY,
QUICK,
RANDOM,
RANGE,
RANK,
READ,
READS,
READ_ONLY,
READ_WRITE,
REAL,
REBUILD,
RECOVER,
RECURSIVE,
REDOFILE,
REDO_BUFFER_SIZE,
REDUNDANT,
REFERENCE,
REFERENCES,
REGEXP,
RELAY,
RELAYLOG,
RELAY_LOG_FILE,
RELAY_LOG_POS,
RELAY_THREAD,
RELEASE,
RELOAD,
REMOTE,
REMOVE,
RENAME,
REORGANIZE,
REPAIR,
REPEAT,
REPEATABLE,
REPLACE,
REPLICATE_DO_DB,
REPLICATE_DO_TABLE,
REPLICATE_IGNORE_DB,
REPLICATE_IGNORE_TABLE,
REPLICATE_REWRITE_DB,
REPLICATE_WILD_DO_TABLE,
REPLICATE_WILD_IGNORE_TABLE,
REPLICATION,
REQUIRE,
REQUIRE_ROW_FORMAT,
RESET,
RESIGNAL,
RESOURCE,
RESPECT,
RESTART,
RESTORE,
RESTRICT,
RESUME,
RETAIN,
RETURN,
RETURNED_SQLSTATE,
RETURNING,
RETURNS,
REUSE,
REVERSE,
REVOKE,
RIGHT,
RLIKE,
ROLE,
ROLLBACK,
ROLLUP,
ROTATE,
ROUTINE,
ROW,
ROWS,
ROW_COUNT,
ROW_FORMAT,
ROW_NUMBER,
RTREE,
SAVEPOINT,
SCHEDULE,
SCHEMA,
SCHEMAS,
SCHEMA_NAME,
SECOND,
SECONDARY,
SECONDARY_ENGINE,
SECONDARY_LOAD,
SECONDARY_UNLOAD,
SECOND_MICROSECOND,
SECURITY,
SELECT,
SENSITIVE,
SEPARATOR,
SERIAL,
SERIALIZABLE,
SERVER,
SESSION,
SET,
SHARE,
SHOW,
SHUTDOWN,
SIGNAL,
SIGNED,
SIMPLE,
SKIP,
SLAVE,
SLOW,
SMALLINT,
SNAPSHOT,
SOCKET,
SOME,
SONAME,
SOUNDS,
SOURCE,
SPATIAL,
SPECIFIC,
SQL,
SQLEXCEPTION,
SQLSTATE,
SQLWARNING,
SQL_AFTER_GTIDS,
SQL_AFTER_MTS_GAPS,
SQL_BEFORE_GTIDS,
SQL_BIG_RESULT,
SQL_BUFFER_RESULT,
SQL_CACHE,
SQL_CALC_FOUND_ROWS,
SQL_NO_CACHE,
SQL_SMALL_RESULT,
SQL_THREAD,
SQL_TSI_DAY,
SQL_TSI_HOUR,
SQL_TSI_MINUTE,
SQL_TSI_MONTH,
SQL_TSI_QUARTER,
SQL_TSI_SECOND,
SQL_TSI_WEEK,
SQL_TSI_YEAR,
SRID,
SSL,
STACKED,
START,
STARTING,
STARTS,
STATS_AUTO_RECALC,
STATS_PERSISTENT,
STATS_SAMPLE_PAGES,
STATUS,
STOP,
STORAGE,
STORED,
STRAIGHT_JOIN,
STREAM,
STRING,
SUBCLASS_ORIGIN,
SUBJECT,
SUBPARTITION,
SUBPARTITIONS,
SUPER,
SUSPEND,
SWAPS,
SWITCHES,
SYSTEM,
TABLE,
TABLES,
TABLESPACE,
TABLE_CHECKSUM,
TABLE_NAME,
TEMPORARY,
TEMPTABLE,
TERMINATED,
TEXT,
THAN,
THEN,
THREAD_PRIORITY,
TIES,
TIME,
TIMESTAMP,
TIMESTAMPADD,
TIMESTAMPDIFF,
TINYBLOB,
TINYINT,
TINYTEXT,
TLS,
TO,
TRAILING,
TRANSACTION,
TRIGGER,
TRIGGERS,
TRUE,
TRUNCATE,
TYPE,
TYPES,
UNBOUNDED,
UNCOMMITTED,
UNDEFINED,
UNDO,
UNDOFILE,
UNDO_BUFFER_SIZE,
UNICODE,
UNINSTALL,
UNION,
UNIQUE,
UNKNOWN,
UNLOCK,
UNSIGNED,
UNTIL,
UPDATE,
UPGRADE,
USAGE,
USE,
USER,
USER_RESOURCES,
USE_FRM,
USING,
UTC_DATE,
UTC_TIME,
UTC_TIMESTAMP,
VALIDATION,
VALUE,
VALUES,
VARBINARY,
VARCHAR,
VARCHARACTER,
VARIABLES,
VARYING,
VCPU,
VIEW,
VIRTUAL,
VISIBLE,
WAIT,
WARNINGS,
WEEK,
WEIGHT_STRING,
WHEN,
WHERE,
WHILE,
WINDOW,
WITH,
WITHOUT,
WORK,
WRAPPER,
WRITE,
X509,
XA,
XID,
XML,
XOR,
YEAR,
YEAR_MONTH,
ZEROFILL 
```

我在为 vim 制作 mysql 关键字完成时发现了它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-13T15:16:16.473

我编写了这个脚本来测试每个保留字，因为我发现它比理解文档中的所有特性更容易：

```
#!/usr/bin/env bash

if ! $MYSQL_CMD -e 'select 1' > /dev/null; then
    echo 'Failed to run query.'
    exit 1;
fi

$MYSQL_CMD --skip-column-names -e 'select name from mysql.help_keyword' | grep -v '[^A-Z_0-9]' | while read -r k; do
    $MYSQL_CMD -e "select 1 as $k" > /dev/null 2>&1 || echo "$k"
done 
```

使用示例：

```
MYSQL_CMD='mysql -uroot -proot -h127.0.0.1' ./mysql_keywords.sh 
```

以下是 MySQL 5.7.34 上的保留字列表：

```
ADD
ALL
ALTER
ANALYZE
AND
AS
ASC
BEFORE
BETWEEN
BINARY
BOTH
BY
CALL
CASCADE
CASE
CHANGE
CHAR
CHARACTER
CHECK
COLLATE
COLUMN
CONDITION
CONSTRAINT
CONTINUE
CONVERT
CREATE
CROSS
CURRENT_DATE
CURRENT_TIME
CURRENT_TIMESTAMP
CURRENT_USER
CURSOR
DATABASE
DATABASES
DAY_HOUR
DAY_MINUTE
DAY_SECOND
DEC
DECIMAL
DECLARE
DEFAULT
DELAYED
DELETE
DESC
DESCRIBE
DISTINCT
DISTINCTROW
DIV
DROP
DUAL
ELSE
ELSEIF
ENCLOSED
ESCAPED
EXISTS
EXIT
EXPLAIN
FALSE
FETCH
FLOAT4
FLOAT8
FOR
FORCE
FOREIGN
FROM
FULLTEXT
GET
GRANT
GROUP
HAVING
HIGH_PRIORITY
HOUR_MINUTE
HOUR_SECOND
IF
IGNORE
IN
INDEX
INFILE
INNER
INSERT
INT1
INT2
INT3
INT4
INT8
INTEGER
INTERVAL
INTO
IS
ITERATE
JOIN
KEY
KEYS
KILL
LEADING
LEAVE
LEFT
LIKE
LIMIT
LINES
LOAD
LOCALTIME
LOCALTIMESTAMP
LOCK
LONG
LOOP
LOW_PRIORITY
MASTER_BIND
MASTER_SSL_VERIFY_SERVER_CERT
MATCH
MIDDLEINT
MINUTE_SECOND
MOD
NATURAL
NOT
NO_WRITE_TO_BINLOG
NULL
NUMERIC
ON
OPTIMIZE
OPTIMIZER_COSTS
OPTION
OPTIONALLY
OR
ORDER
OUTER
OUTFILE
PARTITION
PRECISION
PRIMARY
PROCEDURE
PURGE
READ
REAL
REFERENCES
REGEXP
RELEASE
RENAME
REPEAT
REPLACE
REQUIRE
RESIGNAL
RESTRICT
RETURN
REVOKE
RIGHT
RLIKE
SCHEMA
SCHEMAS
SELECT
SEPARATOR
SET
SHOW
SIGNAL
SPATIAL
SQLSTATE
SQL_BIG_RESULT
SQL_CALC_FOUND_ROWS
SQL_SMALL_RESULT
SSL
STARTING
STORED
STRAIGHT_JOIN
TABLE
TERMINATED
THEN
TO
TRAILING
TRIGGER
TRUE
UNDO
UNION
UNIQUE
UNLOCK
UNSIGNED
UPDATE
USAGE
USE
USING
UTC_DATE
UTC_TIME
UTC_TIMESTAMP
VALUES
VARCHARACTER
VARYING
VIRTUAL
WHEN
WHERE
WHILE
WITH
WRITE
XOR
YEAR_MONTH
ZEROFILL 
```

对于 MySQL 8.0.24：

```
ADD
ALL
ALTER
ANALYZE
AND
AS
ASC
BEFORE
BETWEEN
BINARY
BOTH
BY
CALL
CASCADE
CASE
CHANGE
CHAR
CHARACTER
CHECK
COLLATE
COLUMN
CONDITION
CONSTRAINT
CONTINUE
CONVERT
CREATE
CROSS
CUME_DIST
CURRENT_DATE
CURRENT_TIME
CURRENT_TIMESTAMP
CURRENT_USER
CURSOR
DATABASE
DATABASES
DAY_HOUR
DAY_MINUTE
DAY_SECOND
DEC
DECIMAL
DECLARE
DEFAULT
DELAYED
DELETE
DENSE_RANK
DESC
DESCRIBE
DISTINCT
DISTINCTROW
DIV
DROP
DUAL
ELSE
ELSEIF
ENCLOSED
ESCAPED
EXCEPT
EXISTS
EXIT
EXPLAIN
FALSE
FETCH
FIRST_VALUE
FLOAT4
FLOAT8
FOR
FORCE
FOREIGN
FROM
FULLTEXT
FUNCTION
GET
GRANT
GROUP
GROUPING
HAVING
HIGH_PRIORITY
HOUR_MINUTE
HOUR_SECOND
IF
IGNORE
IN
INDEX
INFILE
INNER
INSERT
INT1
INT2
INT3
INT4
INT8
INTEGER
INTERVAL
INTO
IS
ITERATE
JOIN
JSON_TABLE
KEY
KEYS
KILL
LAG
LAST_VALUE
LEAD
LEADING
LEAVE
LEFT
LIKE
LIMIT
LINES
LOAD
LOCALTIME
LOCALTIMESTAMP
LOCK
LONG
LOOP
LOW_PRIORITY
MASTER_BIND
MASTER_SSL_VERIFY_SERVER_CERT
MATCH
MIDDLEINT
MINUTE_SECOND
MOD
NATURAL
NOT
NO_WRITE_TO_BINLOG
NTH_VALUE
NTILE
NULL
NUMERIC
OF
ON
OPTIMIZE
OPTIMIZER_COSTS
OPTION
OPTIONALLY
OR
ORDER
OUTER
OUTFILE
PARTITION
PERCENT_RANK
PRECISION
PRIMARY
PROCEDURE
PURGE
RANK
READ
REAL
REFERENCES
REGEXP
RELEASE
RENAME
REPEAT
REPLACE
REQUIRE
RESIGNAL
RESTRICT
RETURN
REVOKE
RIGHT
RLIKE
ROW
ROWS
ROW_NUMBER
SCHEMA
SCHEMAS
SELECT
SEPARATOR
SET
SHOW
SIGNAL
SPATIAL
SQLSTATE
SQL_BIG_RESULT
SQL_CALC_FOUND_ROWS
SQL_SMALL_RESULT
SSL
STARTING
STORED
STRAIGHT_JOIN
SYSTEM
TABLE
TERMINATED
THEN
TO
TRAILING
TRIGGER
TRUE
UNDO
UNION
UNIQUE
UNLOCK
UNSIGNED
UPDATE
USAGE
USE
USING
UTC_DATE
UTC_TIME
UTC_TIMESTAMP
VALUES
VARCHARACTER
VARYING
VIRTUAL
WHEN
WHERE
WHILE
WITH
WRITE
XOR
YEAR_MONTH
ZEROFILL 
```

并且仅在 5.7.34 和 8.0.24 之间添加了保留字：

```
CUME_DIST
DENSE_RANK
EXCEPT
FIRST_VALUE
FUNCTION
GROUPING
JSON_TABLE
LAG
LAST_VALUE
LEAD
NTH_VALUE
NTILE
OF
PERCENT_RANK
RANK
ROW
ROW_NUMBER
ROWS
SYSTEM 
```**

# json - 创建公共 JSON 源

> ID：14624294
> 
> 赞同：0
> 
> 时间：2013-01-31T11:09:35.557
> 
> 标签：json, web-services

我想向我的 ASP.net (4) Forms 网站添加一个公共（外部可调用）JSON 数据馈送。为此，我创建了以下 Web 服务：

```
[WebService(Namespace = "http://localtest.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
[System.Web.Script.Services.ScriptService]
public class BlogWebService : System.Web.Service.WebService
{
   [WebMethod]
   [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
   public List<Blog> GetLatestBlogs(int noBlogs)
   {
      return GetLatestBlogs(noBlogs)
         .Select(b => b.ToWebServiceModel())
         .ToList();
   }
} 
```

我已经通过打开在本地服务器上对此进行了测试

```
http://localhost:55671/WebServices/BlogWebService.asmx?op=GetLatestBlogs 
```

它工作正常。

当我尝试远程访问此服务并收到内部服务器错误时。例如，我使用 LinqPad 运行了以下代码（基于来自[http://geekswithblogs.net/JuanDoNeblo/archive/2007/10/24/json_in_aspnetajax_part2.aspx](http://geekswithblogs.net/JuanDoNeblo/archive/2007/10/24/json_in_aspnetajax_part2.aspx)的一些脚本）：

```
void Main()
{
   GetLatestBlogs().Dump();
}

private readonly static string BlogServiceUrl =
   "http://localhost:55671/BlogWebService.asmx/GetLatestBlogs?noBlogs={0}";

public static string GetLatestBlogs(int noBlogs = 5)
{
   string formattedUri = String.Format(CultureInfo.InvariantCulture,
      BlogServiceUrl, noBlogs);

   HttpWebRequest webRequest = GetWebRequest(formattedUri);
   HttpWebResponse response = (HttpWebResponse)webRequest.GetResponse();
   string jsonResponse = string.Empty;
   using (StreamReader sr = new StreamReader(response.GetResponseStream()))
   {
      jsonResponse = sr.ReadToEnd();
   }
   return jsonResponse;
}

private static HttpWebRequest GetWebRequest(string formattedUri)
{
   Uri serviceUri = new Uri(formattedUri, UriKind.Absolute);
   return (HttpWebRequest)System.Net.WebRequest.Create(serviceUri);
} 
```

我有很多问题/疑问：

1.  应该如何格式化对 Web 服务的调用？我不确定 LinqPad 测试代码中 BlogServiceUrl 的构造是否正确。
2.  我的 BlogWebService 类和 GetBlogs() 方法的定义和属性是否正确？
3.  我是否需要在我的网站配置中添加任何内容才能使其正常工作？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:30:24.777

我无法找到让 HttpHandler (.ashx) 机制适用于远程 JavaScript 调用的方法 - 我总是在远程 jQuery 调用中收到“无效的引用者”错误。我并不是说这是不可能的，但我找不到任何关于如何做到这一点的文档 - 无论如何都没有用。

[最后，我在Ben Dewey的](http://www.bendewey.com/blog/)[这篇](http://bendewey.wordpress.com/2009/11/24/using-jsonp-with-wcf-and-jquery/)文章的指导下将代码转换为 WCF 服务- 这非常有帮助 - 确保您仔细应用类和方法属性 - 我没有，并且花了大约一个快乐的时间试图弄清楚出了什么问题！

这是代码：

**博客服务.cs**

```
[ServiceContract]
public interface IBlogService
{
   [OperationContract]
   List<WebServiceModels.Blog> GetLatestBlogs(int noItems);
} 
```

**博客服务.svc**

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class BlogService 
   : Ninject.Web.WebServiceBase, IBlogService
{

   private readonly IScoRepository ScoDb;       // Data repository

   public BlogService(IScoRepository scoDb)
   {
      this.ScoDb = scoDb;
   }

   [WebGet(ResponseFormat = WebMessageFormat.Json)]
   public List<WebServiceModels.Blog> GetLatestBlogs(int noItems)
   {
      return ScoDb
         .GetLatestBlogs(noItems)
         .Select(b => b.ToWebServiceModel(hostAddress))
         .ToList();
   }
} 
```

**网页配置**

```
<system.serviceModel>
   <serviceHostingEnvironment multipleSiteBindingsEnabled="true"  aspNetCompatibilityEnabled="true" />
   <behaviors>
      <endpointBehaviors>
         <behavior name="webHttpBehavior">
            <webHttp />
         </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
         <behavior name="">
            <serviceMetadata httpGetEnabled="true" />
            <serviceDebug includeExceptionDetailInFaults="false" />
         </behavior>
      </serviceBehaviors>
   </behaviors>
   <bindings>
      <webHttpBinding>
         <binding name="webHttpBindingWithJsonP" crossDomainScriptAccessEnabled="true" />
      </webHttpBinding>
   </bindings>
   <services>
      <service name="WebServices.JSON.BlogService">
         <endpoint name="WebServices.JSON.IBlogService" address="" binding="webHttpBinding" bindingConfiguration="webHttpBindingWithJsonP" contract="WebServices.JSON.IBlogService" behaviorConfiguration="webHttpBehavior" />
      </service>
   </services>
</system.serviceModel> 
```

**测试 JavaScript**

```
$.ajax({
   type: "GET",
   url: "http://localhost:55671/WebServices/JSON/BlogService.svc/GetLatestBlogs",
   data: {
      noItems: 3
   },
   dataType: "jsonp",
   cache: false,
   success: function(result) {
      alert(result[0].Title + " (" + result.length + " Blogs returned)");
   },
   error: function(jqXHR, textStatus, errorThrown) {
     alert(errorThrown);
   }
}); 
```

如您所见，我还使用了 Ninject DI。这一直是个问题，直到我遇到了 Ninject.Extension.Wcf 模块，它让生活变得非常轻松。几个gotchyas虽然。

*   我找不到太多文档

*   将“工厂”属性添加到 WCF 页面：

    Factory="Ninject.Extensions.Wcf.NinjectWebServiceHostFactory"

    *   调整 Web.config 以引用服务*接口*，否则绑定魔法不会发生。

我希望它有所帮助。

# javascript - Javascript：用双反斜杠替换反斜杠

> ID：14624295
> 
> 赞同：2
> 
> 时间：2013-01-31T11:09:38.540
> 
> 标签：javascript, escaping, backslash

我目前遇到了标题中提到的问题，并且不知何故找不到用双反斜杠正确替换反斜杠的方法，以便我可以正确地将字符串作为参数提供给 Web 服务。让我告诉你我尝试了什么。其中一些确实适用于其他人，但不适用于我......我目前正在使用 FF18.0.1 进行测试

```
WSParameters.replace(/\\/g, "\\\\\\\\");
WSParameters.replace("\\", "\\\\\\\\");
WSParameters.replace(/\\/g, "\\\\");
WSParameters.replace(/\\/g, "&#92;&#92;");
WSParameters.replace(/\\/g, "&#92;");
WSParameters.replace("\\", "\\\\"); 
```

非常感谢提前

编辑：我应该提到它以某种方式解析为 JSON 并且使用 firebug 我在源字符串中看到反斜杠，但在 JSON 视图中看不到。也许还有另一种方式？但不知何故，它在替换反斜杠时已经失败了。

编辑2：

```
if (noAction == false) {
    $.ajax({
        type: "POST",
        url: "WebService.asmx/" + webMethod,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        async: pAsync,
        data: WSParameters,
        success: function callFunction(result) { processPOSTResults(result, pType, pNot);},
        error: function (xhr, ajaxOptions, thrownError) {
            alert('Error while communicating with WebAdmin web service. - ' + xhr.status + " " + thrownError);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T12:05:09.347

`WSParameters.replace(/\\/g, "\\\\");`应该这样做，在FF18中也是如此。请注意，如果您使用`JSON.stringify`，这是自动完成的。还要注意许多控制台输出（Firebug 等）确实用引号包围字符串内容，但不要转义它们。

# java - 从实现类中获取接口名称

> ID：14624298
> 
> 赞同：9
> 
> 时间：2013-01-31T11:09:53.860
> 
> 标签：java, class, interface

例子 ：

```
List<String> list = new ArrayList<String>();
//This would give me the class name for the list reference variable.
list.getClass().getSimpleName(); 
```

我想从`list`引用变量中获取接口名称。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-31T11:11:26.660

使用反射，您可以调用[`Class.getInterfaces()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getInterfaces%28%29)返回`Array of Interfaces`类实现的方法。

```
list.getClass().getInterfaces()[0]; 
```

只得到名字

```
list.getClass().getInterfaces()[0].getSimpleName(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T11:12:35.350

```
Class  aClass = ... //obtain Class object. 
Class[] interfaces = aClass.getInterfaces(); 
```

# iphone - 如何将数组的值发送到前一个（后退一步）ViewController

> ID：14624301
> 
> 赞同：1
> 
> 时间：2013-01-31T11:09:55.167
> 
> 标签：iphone, objective-c, uinavigationcontroller

> **可能重复：**
> [iOS：与父视图控制器通信](https://stackoverflow.com/questions/10600330/ios-communicating-to-parent-view-controller)

假设我有 2 个名为 FirstViewController 和 SecondViewController 的 viewController

现在使用导航，我从 FirstViewController 转到 SecondViewController。

现在我在 SecondViewController 上有一个名为 resultArray 的数组

我想在 FirstViewController 上获取 resultArray 的值

那么如何获得 FirstView Controller 上的值呢？

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:26:33.560

@Nishant B 的答案形式（以及其他后续答案）将起作用。

由于您使用的是 UINavigationController，并且您希望后退一步访问控制器，因此您也可以在 SecondViewController 中执行此操作：

```
NSUInteger count = [[self navigationController].childViewControllers count];
FirstViewController* firstVC = [[self.navigationController childViewControllers] 
    objectAtIndex:count -2];
[firstVC setSomeValue:someValue]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:14:53.907

您可以在这里做的是在您的第一堂课中创建一个构造函数，例如

```
-(void)initWithArrayOfSecondClass:(NSMutableArray *)arr_OfSecondClass;
{
    arr_FirstClassArray = [[NSMutableArray alloc]initWithArray:arr_OfSecondClass];

} 
```

从你的第二堂课发送这个数组：

```
[objOfFirstClass initWithArrayOfSecondClass:resultArray]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T11:19:27.957

您可以通过以下方式实现它：

在“FirstViewController”文件中：

1) 创建数组对象例如：arrTest；

2）创建一种方法，例如：

```
-(void)getArrayValue:(NSMutableArray *)pArr
{
     arrTest = pArr;
} 
```

3）在推送之前调用“SecondViewController”的方法：

```
[objSecondViewController setParent:self];\ 
```

现在，在“SecondViewController”文件中：

.h 文件：

```
@class FirstViewController; 
```

在 .m 文件中：

```
#import "FirstViewController.h" 
```

和

1）在.h文件中声明一个变量：

```
id parent; 
```

2）声明并创建一个方法“.h”和“.m”文件：

```
-(void)setParent:(id)pID
{
    parent=pID;
} 
```

3）当您提出数组时，请调用如下方法：

```
[parent getArrayValue: <your_new_array>]; 
```

希望，你知道你想要什么。

快乐编码！

干杯!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T11:26:38.173

还有一种使用本地通知的方法。

假设您要将数据从 B 发送到 A。

当您按下一个按钮左右时，在 B 中执行以下操作：

```
- (NSString *) saveAndExit
{
    [[NSNotificationCenter defaultCenter] postNotificationName: @"AnswerValue" object: answerView.text];
    [self.navigationController popViewControllerAnimated:YES];
    return @"abc";
} 
```

在 A's`viewDidLoad`中，添加以下内容：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(incomingNotification:) name:@"AnswerValue" object:nil]; 
```

还要添加以下方法：

```
- (void) incomingNotification:(NSNotification *)notification{
NSString *result = [notification object]; 
```

}

两者的通知名称必须相同。在这种情况下，名称是 AnswerValue。这会将值“abc”从 B 发送到 A 并存储在`result`.

# python - 如何使用 Distutils 使 Python 脚本作为简单的 linux 命令运行？

> ID：14624302
> 
> 赞同：0
> 
> 时间：2013-01-31T11:09:57.383
> 
> 标签：python, linux, terminal, command

我需要将 python 模块作为简单的 Linux 命令运行，而不用担心文件的位置。我可以用 Distutils 做吗？

具体到我需要什么。用户应该进行简单的安装并能够使用它：

```
python setup.py install
mymodule --arg value 
```

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:26:52.390

如果您在 中指定脚本列表`setup()`，distutils 将自动将它们安装到适当的目录中：

```
from distutils.core import setup

setup(
    name='somemodule',
    scripts=['mymodule']
) 
```

请注意，`mymodule`对于您的示例，此处需要是具有该名称的可运行 python 脚本；它可能不应该是您的实际模块，而是在必要时导入您的模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:17:51.833

如果您希望能够通过仅指定其名称来运行命令，则需要将其安装在`PATH`环境变量中列出的目录中。对于用户程序，通常的位置是`/bin`, `/usr/bin`（`/usr/local/bin`也很常见）。

因此，设置您的软件包以将您的脚本安装在这些位置之一。但是，这将需要`root`特权。

如果您希望能够在没有`root`特权的情况下进行安装，另一种方法是确保脚本的目录在`PATH`变量中列出。

# c# - LuaInterface：如何转储 LuaFunction 进行序列化

> ID：14624304
> 
> 赞同：0
> 
> 时间：2013-01-31T11:10:14.083
> 
> 标签：c#, serialization, luainterface

我尝试保存/序列化 Lua 状态。我知道，我必须保存/序列化我在 _G 中找到的所有全局变量，但不知道如何保存/序列化我找到的 LuaFunction。我尝试使用`string.dump`，但它只提供带有 Lua 签名的字符串（使用 LuaQ 的 5 个字节）。

该功能`string.dump`有效，因为如果我打电话

```
lua.DoString("print(string.len(string.dump(CountItems)))"); 
```

我得到 409 而不是 5 作为字符串的长度。所以转储工作正常。这可能是 LuaInterface 的问题。

有人在那里，如何通过 LuaInterface 实现 Lua 状态的序列化？

最好的问候，德克

PS：我在 VS 2010 C# Express 上使用 KopiLua 5.1.4 和 LuaInterface 2.0.4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T07:33:43.683

解决了。

问题是，`string.dump`返回的二进制块是作为字符串处理的。所以它在字符串中的第一个空字节处被剪切，也就是 5 个字节之后。更改了 的调用`DoString`，使其正确处理字节数组。

# .net - 子目录中带有 WebForms 应用程序的 MVC 应用程序

> ID：14624305
> 
> 赞同：1
> 
> 时间：2013-01-31T11:10:19.087
> 
> 标签：.net, asp.net-mvc, webforms

以前有人问过这个问题，我知道这是可能的。但是，我需要澄清几点，我认为这是我的特殊情况所独有的，因此需要提出另一个问题。

我们正在开发一个 ASP.NET MVC 4 应用程序。作为此应用程序的一部分，我们希望在子目录中放置一个 ASP.NET WebForms 应用程序。这个 WebForms 应用程序不是在内部创建的，所以我们没有应用程序的源代码，只有编译的二进制文件。

我遇到的问题是 MVC 应用程序使用 Active Directory 身份验证，而 WebForms 应用程序使用基于表单的身份验证。即使包含 WebForms 应用程序的子目录有自己的 web 配置，指定了自己的身份验证设置，我也无法让这两个应用程序无缝地协同工作。

我还遇到了一个问题，WebForms 应用程序有自己的 Bin 文件夹，理想情况下，我不想将 WebForms 应用程序的引用放在我的 MVC 应用程序的 Bin 文件夹中。但是，当我在子目录中创建 Bin 文件夹时，WebForms 应用程序抱怨它无法找到对 WebForms 应用程序中未引用的项目的引用（但它是对 MVC 应用程序的引用）。

有没有人遇到过这样的场景？你是如何缓解这些问题的？

# asp.net - Web Api 参数始终为空

> ID：14624306
> 
> 赞同：35
> 
> 时间：2013-01-31T11:10:19.240
> 
> 标签：asp.net, ajax, asp.net-web-api

为什么当我使用下面的 ajax 调用下面的 Post 方法时参数总是为空？

```
public IEnumerable<string> Post([FromBody]string value)
{
    return new string[] { "value1", "value2", value };
} 
```

下面是通过 ajax 对 Web API 方法的调用：

```
 function SearchText() {
        $("#txtSearch").autocomplete({
            source: function (request, response) {
                $.ajax({
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    url: "api/search/",
                    data: "test",
                    dataType: "text",
                    success: function (data) {
                        response(data.d);
                    },
                    error: function (result) {
                        alert("Error");
                    }
                });
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-01-31T11:25:12.563

```
$.ajax({
    url: '/api/search',
    type: 'POST',
    contentType: 'application/x-www-form-urlencoded; charset=utf-8',
    data: '=' + encodeURIComponent(request.term),
    success: function (data) {
        response(data.d);
    },
    error: function (result) {
        alert('Error');
    }
}); 
```

基本上，您只能拥有一个标量类型的参数，该参数用`[FromBody]`属性修饰，您的请求需要使用`application/x-www-form-urlencoded`，POST 有效负载应如下所示：

```
=somevalue 
```

请注意，与标准协议相反，缺少参数名称。您只发送价值。

您可以阅读有关 Web Api 中的模型绑定如何工作的更多信息[`this article`](http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-1)。

但当然，这种黑客行为是一件病态的事情。您应该使用视图模型：

```
public class MyViewModel
{
    public string Value { get; set; }
} 
```

然后摆脱`[FromBody]`属性：

```
public IEnumerable<string> Post(MyViewModel model)
{
    return new string[] { "value1", "value2", model.Value };
} 
```

然后使用 JSON 请求：

```
$.ajax({
    url: '/api/search',
    type: 'POST',
    contentType: 'application/json; charset=utf-8',
    data: JSON.stringify({ value: request.term }),
    success: function (data) {
        response(data.d);
    },
    error: function (result) {
        alert('Error');
    }
}); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-31T11:17:35.493

您不能对`[FromBody]`具有 JSON 内容类型的属性使用简单类型。尽管 Visual Studio 中的默认值有一个来自正文的字符串，但这是针对 application/x-www-form-urlencoded 内容类型的。

将字符串值作为属性放在基本模型类上，反序列化器就会工作。

```
public class SimpleModel()
{
    public string Value {get;set;}
}

public IEnumerable<string> Post([FromBody]SimpleModel model)
{
    return new string[] { "value1", "value2", model.Value };
} 
```

更改您要发送到的 JSON：

```
{"Value":"test"} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-04T19:00:29.973

每当我们调用 web api 操作并使用 [frombody] 参数时，然后输入带有 = 的参数前缀

```
public string GetActiveEvents([FromBody] string XMLRequestString) {
} 
```

调用上面的 web api 操作

1.  URI

> 用户代理：提琴手
> 
> 内容类型：application/x-www-form-urlencoded
> 
> 主机：本地主机：54702
> 
> 内容长度：936

3.  请求正文是 =data

我希望这会给你一个清晰的想法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-26T17:23:24.413

我刚刚用这个和 .NET Core Web API 玩得很开心。所以希望为某人节省时间：对我来说，实际问题很简单——我没有转换为正确的类型（注意@Darins 的答案使用的是虚拟机而不是字符串）。

模板中的默认类型是`string`. 我想因为我们发送的是字符串化的 JSON，我们会看到一个 JSON 字符串，但事实并非如此。我必须使它成为正确的类型。

例如，这失败了

```
[EnableCors("AllowAll")]
[HttpPost]
public HttpResponseMessage Post([FromBody]string value)
{
    // Do something with the blog here....

    var msg = new HttpResponseMessage(System.Net.HttpStatusCode.OK);
    return msg;

} 
```

但这有效。

```
[EnableCors("AllowAll")]
[HttpPost]
public HttpResponseMessage Post([FromBody]Blog value)
{
    // Do something with the blog here....

   var msg = new HttpResponseMessage(System.Net.HttpStatusCode.OK);
  return msg;

} 
```

阿贾克斯调用

```
function HandleClick() {

    // Warning - ID's should be hidden in a real application 
    //         - or have covering GUIDs.
    var entityData = {
        "blogId": 2,
        "url": "http://myblog.com/blog1",
        "posts": [
        {
            "postId": 3,
            "title": "Post 1-1",
            "content": "This is post 1 for blog 1",
            "blogId": 2
        },
        {
            "postId": 4,
            "title": "Post 1-2",
            "content": "This is post 2 for blog 1",
            "blogId": 2
        }
        ]
    };

    $.ajax({
        type: "POST",
        url: "http://localhost:64633/api/blogs",
        async: true,
        cache: false,
        crossDomain: true,
        data: JSON.stringify(entityData),
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (responseData, textStatus, jqXHR) {
            var value = responseData;
        },
        error: function (responseData, textStatus, errorThrown) {
            alert('POST failed.');
        }
    });

} 
```

# ruby - 小胡子反向

> ID：14624308
> 
> 赞同：1
> 
> 时间：2013-01-31T11:10:24.827
> 
> 标签：ruby, xml, mustache

我正在使用 mustache（在 ruby​​ 中）从哈希生成 XML 文档。

有没有办法从 XML 文档和 mustache 模板生成哈希？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:37:54.810

想了一会儿，我意识到这是不可能的。有多个使用 Mustache 创建同一个文档的原始哈希实例，因此这永远不会合理可行。

其中包括：

```
doc = {
  "words": [
    "an",
    "aconda"
  ]
}

template = "here's some words: {{#words}}{{.}}{{/words}}"

out = Mustache.render(template,doc)
# => "here's some words: anaconda"

Mustache.reverse(template,out)
# {'words' => ['anaconda']} 
```

# python - 如何在 Python 中添加循环内的所有元素？

> ID：14624311
> 
> 赞同：0
> 
> 时间：2013-01-31T11:10:30.440
> 
> 标签：python

出于某种原因，我想要这个：

```
a = ['ok.py', 'hello.py'] 
```

我想计算每个元素的大小并添加所有这些大小并存储在一个变量中：

```
for i in a:
        dest = '/home/zurelsoft/my_files'
        fullname = os.path.join(dest, i) #Get the file_full_size to calculate size
        st = int(os.path.getsize(fullname))
        f_size = size(st) 
```

它对每个元素都这样做。我怎样才能将它们全部添加？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:13:03.910

一种方法是将它们添加到列表中，然后使用`sum`

```
sizes = []
for i in a:
        dest = '/home/zurelsoft/my_files'
        fullname = os.path.join(dest, i) #Get the file_full_size to calculate size
        st = int(os.path.getsize(fullname))
        f_size = size(st)
        sizes.append(f_size)
print sum(sizes) 
```

或者你可以有一个变量。

```
sum_size = 0
for i in a:
        dest = '/home/zurelsoft/my_files'
        fullname = os.path.join(dest, i) #Get the file_full_size to calculate size
        st = int(os.path.getsize(fullname))
        sum_size += size(st)
print sum_size 
```

或者你可以把它放在字典里......

```
d = {}
for i in a:
        dest = '/home/zurelsoft/my_files'
        fullname = os.path.join(dest, i) #Get the file_full_size to calculate size
        st = int(os.path.getsize(fullname))
        d[i] = size(st) 
```

获得每个尺寸：

```
print '\n'.join(['%s: %d' % (k, v) for k, v in d.items()]) 
```

得到总和：

```
print sum(d.values()) 
```

将其全部包装到一个函数中，并使用类似于[Ivo van der Wijk](https://stackoverflow.com/a/14624538/1561176)使用的方法：

```
def get_file_sizes(parent_dir, files):
    import os
    return sum([os.path.getsize(os.path.join(parent_dir, f)) for f in files]) 
```

调用函数：

```
a = ['ok.py', 'hello.py']
all_sizes = get_file_sizes('/home/zurelsoft/my_files', a) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:21:30.353

您可以使用生成器将其减少为单个总和，如下所示：

```
sum(os.path.getsize(os.path.join("/etc", f)) for f in ["passwd", "hosts"]) 
```

基本上将您正在采取的各个步骤组合成一个可以传递给 sum() 的表达式

我不确定 size() 的作用，但您当然可以将其插入表达式中。当然，请确保它返回整数而不是字符串。

# sql - FOSUser - 创建用户转储 SQL

> ID：14624316
> 
> 赞同：1
> 
> 时间：2013-01-31T11:10:49.250
> 
> 标签：sql, symfony, doctrine, fosuserbundle

我想转储执行此 FOS 指令时将触发的 SQL

```
$ php app/console fos:user:create my_user my@mail.net my_pass 
```

我怎样才能做到这一点 ？

* * *

`--dump-sql`FOSUser是否有等效的学说？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:17:16.453

```
php app/console fos:user:create --help 
```

输出以下内容

> 用法：fos:user:create [--super-admin] [--inactive] 用户名邮箱密码
> 
> 参数： username 用户名 email 邮箱密码 密码
> 
> 选项： --super-admin 设置用户为超级管理员 --inactive
> 设置用户为非活动
> 
> 帮助： fos:user:create 命令创建一个用户：
> 
> php 应用程序/控制台 fos:user:create matthieu
> 
> 这个交互式外壳会要求您输入电子邮件，然后输入密码。
> 
> 您也可以将电子邮件和密码指定为第二个和第三个参数：
> 
> php 应用程序/控制台 fos:user:create matthieu matthieu@example.com mypassword
> 
> 您可以通过 super-admin 标志创建超级管理员：
> 
> php 应用程序/控制台 fos:user:create admin --super-admin
> 
> 您可以创建一个非活动用户（将无法登录）：
> 
> php 应用程序/控制台 fos:user:create thibault --inactive

我想这不存在您要求的命令。

`/vendor/friendsofsymfony/user-bundle/FOS/UserBundle/Resources/doc/command_line_tools.md`而且，即使在文件中也似乎没有它的踪迹

# javascript - 打破一系列超时命令？

> ID：14624325
> 
> 赞同：0
> 
> 时间：2013-01-31T11:11:27.740
> 
> 标签：javascript, settimeout

如果我有这样的功能：

```
function x()
{
    animate(a, 2000);
    animate(b, 3000);
    animate(c, 4000);
} 
```

其中 - a、b 和 c - 是表示页面上元素的变量，数字是传递给 animate() 函数的参数，该函数将其用作超时的持续时间值，如下所示：

```
function animate(src, dur)
{
    setTimeout(function() {
        src.style.opacity = 1;
    }, dur);
} 
```

到目前为止一切都很好，但是如果我想要打破动画循环的能力，我该怎么做呢？clearTimeout() 会是我要找的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:19:41.967

已分配超时的变量可以传递给`clearTimeout`函数，这将停止函数。您可以将这些变量存储在一个数组中，并通过迭代此数组并将超时传递给`clearTimeout`函数来轻松清除所有超时。

```
var timeouts = [];

/* Save timeouts into a variable and push to an array */
function animate(src, dur)
{
    var timeout = setTimeout(function() {
        src.style.opacity = 1;
    }, dur);
    timeouts.push(timeout);
}

/** Clear all timeouts**/
function clearTimeouts(){
   for(var i = 0; i < timeouts.length; i++){
     clearTimeout(timeouts[i]);
   }
}

//Create timeouts
x();
//Invoke clearTimeouts
clearTimeouts(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:18:57.330

是`clearTimeout()`的，正确的方法是：

```
function animate(src, dur)
{
    return setTimeout(function() {
        src.style.opacity = 1;
    }, dur);
} 
```

并保存返回的标识符：

```
function x()
{
    var aId = animate(a, 2000);
    var bId = animate(b, 3000);
    var cId = animate(c, 4000);
} 
```

稍后您只需调用`clearTimeout(aId)`或任何您想要的。顺便说一句，您的代码中没有循环，`setTimeout()`只执行一次，与`setInterval()`.

# python - 无法识别在网页上存储数据的 html 部分

> ID：14624327
> 
> 赞同：0
> 
> 时间：2013-01-31T11:11:47.480
> 
> 标签：python, html

我正在尝试`http://www.verizonwireless.com/wcms/consumer/shop/share-everything.html`使用下面提到的代码从该网页上抓取数据：

```
# -*- coding: cp1252 -*-
import csv
import urllib2
import sys
import urllib
import time
from bs4 import BeautifulSoup
from itertools import islice

url = 'http://www.verizonwireless.com/wcms/consumer/shop/share-everything.html'
user_agent = 'Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1;Trident/5.0)'
req = urllib2.Request(url,headers={ 'User-Agent' : user_agent })
response = urllib2.urlopen(req)
page = response.read()
soup = BeautifulSoup(page)

tabcontent = soup.find('div', {"id": "uttsdPlanOptions", "class": "priceCol2"})
content = tabcontent.findAll('tr')
print content 
```

打印内容后，我意识到我没有获得网站上提到的 GB 中的数据值，当我尝试检查“GB”部分的元素时，我发现了这个 html 结构`<p class="ptData">Shareable Data</p>`在这部分中没有提到 GB，也没有链接图像这可以解释 GB 的缺失值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:32:23.293

您正在查找的值不作为文本存在。它是从 URL 获取`/content/dam/vzw/lobs/consumer/shop/share-everything/data-sprite.png`并使用 CSS 代码裁剪为大小的图像：

```
.ptData{min-width:74px;background:transparent url(/content/dam/vzw/lobs/consumer/shop/share-everything/data-sprite.png) no-repeat;padding-top:52px;display:block;}
.data300mb .ptData{background-position:center top;}
.data1 .ptData{background-position:center -72px;}
.data2 .ptData{background-position:center -144px;}
.data4 .ptData{background-position:center -216px;}
.data6 .ptData{background-position:center -288px;}
.data8 .ptData{background-position:center -360px;}
.data10 .ptData{background-position:center -432px;}
.data12 .ptData{background-position:center -504px;}
.data14 .ptData{background-position:center -576px;}
.data16 .ptData{background-position:center -648px;}
.data18 .ptData{background-position:center -720px;}
.data20 .ptData{background-position:center -792px;}
.data30 .ptData{background-position:center -864px;}
.data40 .ptData{background-position:center -936px;}
.data50 .ptData{background-position:center -1008px;} 
```

您尝试从中获取值的表具有如下记录：

```
<td class="data2">
    <p>Unlimited Talk &amp; Text with</p>
    <p class="ptData">Shareable Data</p>
</td> 
```

标签的属性`class`根据前面（继承）的属性获取图像。所以可以从标签中的属性值中导出你想要的值。`<p>``class``<td>``class``<td>`

# c - C 匹配算法（使用递归 + 排列）

> ID：14624328
> 
> 赞同：1
> 
> 时间：2013-01-31T11:11:49.447
> 
> 标签：c, algorithm, recursion, matching

我发现很多关于我的作业主题的研究与我想要的很接近，但不完全是。似乎许多作业都被迫找到字符串的排列，这具有类似的方法。我是递归的新手，因此很难跟踪代码。我在另一篇文章中找到了这个片段：

```
void swap(char* str, int i, int j)
{
    char temp = str[i];
    str[i] = str[j];
    str[j] = temp;
}

void permute(char *string, int start, int end)
{
    if(start == end)
   {
        printf("%s\n", string);
        return;
    }

    permute(string, start + 1, end);
    int i;
    for(i = start + 1; i < end; i++)
    {
        if(string[start] == string[i])
            continue;
        swap(string, start, i);
        permute(string, start + 1, end);
        swap(string, start, i);
    }
} 
```

从那里我可以看到基本情况是字符串的长度与 i 的索引相同。然而，对于我的任务，我们要做一些稍微不同的事情。我们被要求在可能的情侣之间扮演“媒人”的角色。我们有相同数量的男性和女性，每个人都有一个“匹配度”度量。我们的目标是最大化这个匹配度数。因此，如果是 3 男 * 3 女（总是完美的情侣数），我会：

```
 {[M1, W1], {[M1, W1], {[M1, W2],
  [M2, W2],  [M2, W3],  [M2, W1],
  [M3, W3]}  [M3, W2]}  [M3, W3]}
  ....
  // Match #(n)! or in this case 6 (3*2*1)

; 
```

等等。我知道得到的排列数将是 (n)！其中n是对的数量。因此，10 个男人和 10 个女人将是（10）！解决方案。考虑到这一切，我发现的这段代码是否与我应该寻找的相似，还是需要修改？我相信必须修改，因为这是置换一个线性数组，我的情况可以是置换两个单独的数组。

你们有什么感想？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:17:25.213

您不需要置换 2 个单独的数组 -**您只需置换其中一个，并在匹配时让另一个保持不变**。这足以保证您检查所有可能的解决方案来匹配男性和女性。证明很简单，这`Men`只是女性的指数，女性数组的所有排列只是找到了排序它们的所有方法 - 即为女性分配指数的所有可能性。

让我们看一个简单的 3 男 3 女示例：

```
data = [M1,M2,M3] [W1,W2,W3]
opt1: M1+W1, M2+W2, M3+W3
opt2: M1+W1, M2+W3, M3+W2
opt3: M1+W2, M2+W1, M3+W3
opt4: M1+W2, M2+W3, M3+W1
opt5: M1+W3, M2+W1, M3+W2
opt6: M1+W3, M2+W2, M3+W1 
```

很容易看出这些都是可能的，我们只置换了 women 数组 ( `[W1,W2,W3]`) 而 men 数组保持原样。

* * *

**编辑：**
根据您已经拥有的代码，可以执行以下操作：

```
int permute(int men[], int women[], int start, int end)
{
    if(start == end)
   {
        int i =0, sum = 0;
        for (i = 0; i < end; i++) sum += score(men[i],women[i]);
        return sum;
    }
    best = -INFINITY;
    best = max(permute(men, women, start + 1, end), best);
    int i;
    for(i = start + 1; i < end; i++)
    {
        if(women[start] == women[i])
            continue;
        swap(string, start, i);
        best = max(permute(men, women, start + 1, end), best);
        swap(women, start, i);
    }
    return best;
} 
```

以上仅置换`women`, 并在 stop 子句中检查分数（假设为 int）并返回在迭代中找到的“最佳”分数（假设最佳是此处的最高分数）。
我还假设你有一些函数`int score(int,int)`可以找到每场比赛的得分

**注意：**这是一个 c 风格的*伪代码*，未经测试，可能存在一些语法问题。

# php - PHP如何使用regEXP获取由“空格”分隔的数字和字符串

> ID：14624332
> 
> 赞同：0
> 
> 时间：2013-01-31T11:12:08.680
> 
> 标签：php, regex

请我有流动的字符串：

```
$str = 'blabla-blabla - 12345, blobl-ooo - 54123, hihihi - 98745'; 
```

我想进入一个数组**blabla-blabla - 12345**和**blobl-ooo - 54123**和**hihihi - 98745**

为此，我正在考虑使用 REGEXP，所以我尝试过：

```
preg_match_all("/\b[\p{L}'-]+|[a-z]+\b/u", $str, $all); 
```

但这只会得到字符串部分而不是数字。

请各位高手指教？

PS：我不能使用 list 和 explode 因为我不知道我的字符串中的元素数量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T11:16:50.303

对于您的正则表达式，请尝试：

```
preg_match_all('/([\w\-]+ \- \d+),?/u', $str, $all); 
```

*\w*处理所有字母或数字，而*\d*处理所有数字。

否则，即使您不知道字符串的大小，也可以使用explode：

```
$parts = explode(', ', $str);
foreach($parts as $part) {
    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:17:26.197

我不知道为什么你不能用`explode`逗号分隔。您不需要知道要执行此操作的元素数量。但是，像这样的正则表达式应该可以工作：

```
"/[\w\-]+ \- \d+/" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T11:32:27.197

您可以使用[preg_split](http://php.net/manual/en/function.preg-split.php)函数。

```
str = 'blabla-blabla - 12345, blobl-ooo - 54123, hihihi - 98745'; 
$result=preg_split('/,/',$str);
echo "<pre>";
print_r($result); 
```

输出数组（[0] => blabla-blabla - 12345 [1](http://php.net/manual/en/function.preg-split.php) => blobl-ooo - 54123 [2](http://codepad.viper-7.com/Lt64re) => hihihi - 98745）

[演示](http://codepad.viper-7.com/Lt64re)

# javascript - 调整元素高度以避免双滚动

> ID：14624338
> 
> 赞同：1
> 
> 时间：2013-01-31T11:12:32.767
> 
> 标签：javascript, html, css, ajax

我为客户设计了一个页面，该页面通过 iframe 标签合并了 PDF。因此，如果 pdf 很大，则有两个滚动条：一个是页面，另一个是嵌入到 iframe 中的 pdf（PDF 由浏览器中集成的 Adob​​e 插件加载）。如何调整 iframe 高度的大小以仅维护页面滚动条？

谢谢，弗朗西斯科。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:57:05.693

您可以使用[`overflow`](http://www.w3.org/TR/CSS21/visufx.html#overflow)来防止滚动条

HTML：

```
<iframe src="..." class="pdf-frame"></iframe> 
```

CSS：

```
.pdf-frame {
    overflow: visible;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:31:21.353

好吧，如果你说过`<iframe id="myiframe" ...`

您可以使用 jQuery 通过动态设置高度来调整它的大小：

`$("#myiframe").height('someHeight');`

或在 javascript 中：

`document.getElementById("myiframe").style.height = "someHeight";`

或者，如果您正在寻找其他内容，这里有一篇有趣的文章[（Dynamically resize divs with jQuery）](http://blog.softlayer.com/2012/no-iframes-dynamically-resize-divs-with-jquery/)。

# c# - WPF 属性网格，使用“ref”参数添加的事件处理程序。

> ID：14624341
> 
> 赞同：0
> 
> 时间：2013-01-31T11:12:37.977
> 
> 标签：c#, .net, wpf, event-handling, propertygrid

我遇到了 Visual Studio 2010 的 WPF 属性网格的一个非常奇怪的行为。我正在开发一个包含大量属性和事件处理程序的组件工具集。**ref**参数导致问题。

在我的一个对象中，我有`PositionChanged`事件处理程序，其**ref**参数定义如下：

```
public delegate void PositionChangedHandler(LineSeriesCursor sender, double newValue, **ref** bool cancelRendering); 

public event PositionChangedHandler PositionChanged = null; 
```

当我创建一个实例`LineSeriesCursor`并定义事件处理程序时

```
LineSeriesCursor cursor = new LineSeriesCursor(); 
cursor.PositionChanged += [TAB][TAB] 
```

它正确创建处理程序方法存根：

```
cursor.PositionChanged += new LineSeriesCursor.PositionChangedHandler(cursor_PositionChanged);
void cursor_PositionChanged(LineSeriesCursor sender, double newValue, **ref** bool cancelRendering)
{
           //this works and compiles then OK. 
} 
```

但是，如果我`LineSeriesCursor`在 WPF 属性网格中添加，然后导航到`LineSeriesCursor`XAML 中的标记，`PositionChanged`从属性网格添加事件处理程序，则在没有**ref**的情况下创建方法存根，如下所示：

```
private void LineSeriesCursor_PositionChanged(LineSeriesCursor sender, double newValue, bool cancelRendering)
{
    //Does not compile, because of invalid method parameter list. **ref** is missing.
} 
```

对我来说，这听起来像是 Visual Studio 2010 的错误。有没有类似的经验或建议？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:43:39.923

为什么不遵循 microsoft 的方式并从[EventArgs派生](http://msdn.microsoft.com/en-gb/library/system.eventargs.aspx)

例如

```
public class PositionChangedEventArgs : EventArgs
{
   public bool Cancel {get;set;}
   public int NewValue {get;set;}

} 

public event EventHandler<PositionChangedEventArgs> PositionChanged {get;set;}

protected virtual void OnPositionChanged(int newValue)
{
    if (this.PositionChanged !=null)
    {
        var args = new PositionChangedEventArgs(){NewValue = newValue};
        this.PositionChanged(this,args);
        if (args.Cancel)
        {
            //Do something to cancel..
        }
    }
} 
```

然后

```
cursor.PositionChanged += (sender,e) =>
{
    e.Cancel = true;
    var x = e.NewValue;
}; 
```

# javascript - 选择元素未触发的 on() 方法

> ID：14624346
> 
> 赞同：2
> 
> 时间：2013-01-31T11:12:56.580
> 
> 标签：javascript, jquery

我正在使用`jQuery 1.9.0`并且我试图在`on()`选择内更改选项时触发该方法。它可以工作，`live()`但我认为它可能很简单，我没有看到。

这是我的 HTML：

```
<select class="select_exercise">
    <option class="option_exercise">Example 1</option>
    <option class="option_exercise">Example 2</option>
</select> 
```

和我的脚本：

```
$("option.option_exercise").on("change","option.option_exercise",function()
{
    alert("i am changing");
}); 
```

这是[**小提琴**](http://jsfiddle.net/fNjL3/1/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T11:16:27.103

该`.on()`方法允许您将事件处理程序委托给 DOM 树的更高层*。*这个想法是您将事件处理程序绑定到祖先元素，但仅当到达它的事件源自与选择器匹配的后代元素时才执行该处理程序。

在您的情况下，将是这样的：

```
$(".select_exercise").on("change", ".option_exercise", function () {
// ^---- Probably no need to qualify the selectors with a tag name
    alert("i am changing");
}); 
```

但是，鉴于您的示例代码，这将不起作用，因为`option`元素永远不会触发`change`事件（`select`尽管元素会触发）。假设`select`元素从加载时就在 DOM 中，您可以直接绑定到它：

```
$(".select_exercise").on("change", function () {
    alert("i am changing");
}); 
```

如果它最初*不在*DOM 中，您将不得不委托更高（我在`body`这里使用作为示例。您应该尝试委托给加载时将在 DOM 中最接近的祖先）：

```
$("body").on("change", ".select_exercise", function () {
    alert("i am changing");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:15:14.593

`$("option.option_exercise").on("change","option.option_exercise"`应该`$("select.select_exercise").on("change",function()`

演示：[小提琴](http://jsfiddle.net/arunpjohny/fNjL3/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T11:16:39.957

您可以尝试执行以下操作。

```
$(".select_exercise").change(function()
{
    alert("i am changing");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T11:17:29.340

您可以使用

```
$('.select_exercise').change(function() {
alert('Handler for .change() called.');
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T11:17:45.790

行

您需要检查选择元素是否已更改，而不是选项之一。

在此示例中，我正在检查具有名为“select_exercise”的类的选择元素是否已更改。

我猜你想得到选定的选项，所以看看这段代码

```
$(".select_exercise").on("change",function()
{
    alert($(this).find(":selected").text()); --Get the selected option text
    alert("i am changing");
}); 
```

[小提琴示例](http://jsfiddle.net/fNjL3/4/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T11:18:03.473

这工作正常：

```
$("select.select_exercise").on("change", function () {
    alert("i am changing");
}); 
```

改变的是选择，而不是选项，因为改变的是选择的值，而不是选项。

# windows - 以编程方式获取 GPU 处理器使用情况

> ID：14624355
> 
> 赞同：3
> 
> 时间：2013-01-31T11:13:12.350
> 
> 标签：windows, cuda, gpu, gpgpu

有没有办法使用**CUDA**来获得**GPU 处理器的使用率**。我想获取集群中连接的每个 GPU 的处理器使用率，并将作业分配给处理器使用率最低的 GPU。

 **我使用的操作系统是**Windows 7 64bit**。所有连接的 GPU 都具有 fermi 架构

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:16:39.130

NVIDIA 管理库是一个基于 C 语言的 API，用于监控和管理 NVIDIA GPU 设备的各种状态。它提供了对通过 cmdline 工具公开的查询和命令的直接访问`nvidia-smi`。

[https://developer.nvidia.com/nvidia-management-library-nvml](https://developer.nvidia.com/nvidia-management-library-nvml)**

# windows - 当 async_write() 操作永远不会结束并且涉及到一个链时会发生什么？

> ID：14624357
> 
> 赞同：2
> 
> 时间：2013-01-31T11:13:16.580
> 
> 标签：windows, asynchronous, timeout, boost-asio

我知道下一个**async_write()**应该在前一个完成时执行（有或没有错误，但是当它完成时）。

我想知道在进行 async_write() 调用时会发生什么，如果其中一个由于某种原因需要很长时间甚至永远不会结束（我假设这里没有像同步操作那样的超时）。**这个操作什么时候**会被认为失败？**当**操作系统最终在内部删除那个永无止境的操作时？也许，是否涉及超时并且我的假设是错误的？

我的意思是，写操作被发送到操作系统并且可能无限期地阻塞？所以处理程序永远不会被调用，并且下一个 async_write() 永远不会被调用。

注意：我假设我们在**多个线程**中调用 run()但写操作应该按**顺序发送，**所以我还假设写处理程序用**strand**包装。

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:34:42.557

异步操作没有明确的超时，但可以通过 IO 对象的`cancel()`成员函数取消。只有当底层操作系统调用本身以无法合理发生重试的方式失败时，这些操作才会被视为失败。例如，如果写入失败：

*   `EINTR`，那么写入将立即被重新尝试。
*   `EWOULDBLOCK`, `EAGAIN`, 或`ERROR_RETRY`, 然后 Boost.Asio 会将操作推回作业队列。如果写入缓冲区已满，则可能会发生这种情况，因此将操作推回队列会延迟其重新尝试，从而允许尝试其他操作。
*   其他错误将导致操作失败。

系统调用中不应存在无限期阻塞。Boost.Asio 将底层 IO 对象设置为非阻塞，并通过在写入失败时等待相关文件描述符来提供同步阻塞写入行为`EWOULDBLOCK`,`EAGAIN`或`ERROR_RETRY`。

一个链不受长期异步操作的影响。链用于提供处理程序的严格顺序调用，而不是操作本身。在组合操作的情况下，例如[`boost::asio::async_write`](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/async_write.html)，中间处理程序也将通过与最终处理程序相同的链调用。总的来说，这种行为有助于提供线程安全，因为：

*   从中间处理程序启动的所有`async_write_some`操作都在链内。
*   操作本身不在链内。这允许其他处理程序在实际写入发生时运行。
*   用户处理程序将在 strand 中调用。

这个[答案](https://stackoverflow.com/questions/12794107/#12801042)可能会提供对组合操作和链的更多见解。

# javascript - 从谷歌地图中删除图钉

> ID：14624361
> 
> 赞同：0
> 
> 时间：2013-01-31T11:13:25.153
> 
> 标签：javascript, jquery, google-maps-api-3

我有下面的代码。我想要做的是，当我到达一个特定的缩放点（> 8）然后在地图上显示一些图钉时。这工作正常。但是，正如您在下面看到的，我有一个 else 语句。在这个 else 声明中，我想在缩放小于 8 的任何情况下移除引脚。不幸的是，我找不到解决方案。谁能帮我？

```
var map = $('#map_canvas').gmap('get', 'map');
var zoomLevel = 1;
//var marker;
$(map).addEventListener('zoom_changed', function() {
    var i, prevZoomLevel;

    prevZoomLevel = zoomLevel;

    map.getZoom() < 15 ? zoomLevel = 1 : zoomLevel = 2;

    if (prevZoomLevel === zoomLevel) {
         if (map.getZoom() > 8) {      
             for (var i = 0; i < <?= $store_records ?>; i++) { 
                $('#map_canvas').gmap('addMarker', { 
                        'position': new google.maps.LatLng(store_data.records[i].lat, store_data.records[i].lng), 
                        'icon': imageStores,
                        'visible': true
                }).click(function() {
                     $('#map_canvas').gmap('openInfoWindow', { 'content': store_data.records[i].name  }, this);
                });

                //marker = new google.maps.Marker({
                        //'position': new google.maps.LatLng(store_data.records[i].lat, store_data.records[i].lng)
              //  });
            }
         }
         else {

             for (var i = 0; i < <?= $store_records ?>; i++) { 
                //marker.setVisible(false);
             }
        }
   }
}); 
```

更新：

问题是我有这些别针和其他别针。所以，我想明确删除上述引脚。此外，当我达到 zoom>8 时，当我去 zoom<8 时，引脚仍然显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:33:21.907

我会尝试其中之一：

```
if (map.getZoom() > 8) {      
         for (var i = 0; i < <?= $store_records ?>; i++) { 
            $('#map_canvas').gmap('addMarker', { 
                    'position': new google.maps.LatLng(store_data.records[i].lat, store_data.records[i].lng), 
                    'icon': imageStores,
                    'visible': true
            }).click(function() {
                 $('#map_canvas').gmap('openInfoWindow', { 'content': store_data.records[i].name  }, this);
            });

            marker = new google.maps.Marker({
                    'position': new google.maps.LatLng(store_data.records[i].lat, store_data.records[i].lng)
            });
            marker.conditionalVisibility = true; //first option
            conditionalMarkers.push(marker);     //second option, conditionalMarkers is an array declared globally
        }
     }
     else {
         //first option
         for (var i = 0; i < <?= $store_records ?>; i++) { 
            if (marker.conditionalVisibility)
                marker.setMap(null);
         }
         //second option
         for (var i = 0; i < conditionalMarkers.length; i++) { 
            marker.setMap(null);
         }
         conditionalMarkers.length = 0; 
```

或类似的东西。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:20:52.527

以这种方式在 else 块中尝试此操作：

```
} else {
  for (var i = 0; i < <?= $store_records ?>; i++) { 
      $('#map_canvas').gmap('clear', 'overlays');
      $('#map_canvas').gmap('clear', 'markers');
  }
} 
```

# java - 不变性和重新排序

> ID：14624365
> 
> 赞同：42
> 
> 时间：2013-01-31T11:13:30.743
> 
> 标签：java, multithreading, concurrency, java-memory-model

下面的代码（Java Concurrency in Practice 清单 16.3）不是线程安全的，原因很明显：

```
public class UnsafeLazyInitialization {
    private static Resource resource;

    public static Resource getInstance() {
        if (resource == null)
            resource = new Resource();  // unsafe publication
        return resource;
    }
} 
```

然而，几页之后，在第 16.3 节中，他们指出：

> `UnsafeLazyInitialization`*如果* 是不可变的，实际上是安全`Resource`的。

我不明白这种说法：

*   如果`Resource`它是不可变的，那么观察该变量的任何线程`resource`都将看到它为 null 或完全构造（感谢 Java 内存模型提供的对 final 字段的强大保证）
*   但是，没有什么可以阻止指令重新排序：特别是可以对 的两次读取`resource`进行重新排序（在 the 中读取`if`一次，在 中读取一次`return`）。`resource`因此，线程可以在条件中看到非空值，`if`但返回空引用 (*)。

**我认为`UnsafeLazyInitialization.getInstance()`即使`Resource`是不可变的也可以返回 null 。是这样吗？为什么（或为什么不是）？**

* * *

(*) 为了更好地理解我关于重新排序的观点，Jeremy Manson 的[这篇博](http://jeremymanson.blogspot.co.uk/2008/12/benign-data-races-in-java.html)文解释了如何通过良性数据竞争安全地发布 String 的哈希码，以及如何删除由于可能的重新排序与我上面描述的非常相似，使用局部变量可能会导致哈希码错误地返回 0：

> 我在这里所做的是添加一个额外的读取：在返回之前第二次读取哈希。听起来很奇怪，也不太可能发生，第一次读取可以返回正确计算的哈希值，第二次读取可以返回 0！这在内存模型下是允许的，因为该模型允许对操作进行广泛的重新排序。第二次读取实际上可以在您的代码中移动，以便您的处理器在第一次之前执行它！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:36:53.963

**2月10日更新**

我确信我们应该将两个阶段分开：**编译**和**执行**。

我认为是否允许返回*null的决定因素是***字节码是**什么。我做了3个例子：

**示例 1：**

原始源代码，直译为字节码：

```
if (resource == null)
    resource = new Resource();  // unsafe publication
return resource; 
```

字节码：

```
public static Resource getInstance();
Code:
0:   getstatic       #20; //Field resource:LResource;
3:   ifnonnull       16
6:   new             #22; //class Resource
9:   dup
10:  invokespecial   #24; //Method Resource."<init>":()V
13:  putstatic       #20; //Field resource:LResource;
16:  getstatic       #20; //Field resource:LResource;
19:  areturn 
```

这是最有趣的情况，因为有 2 个`read`（Line#0 和 Line#16），中间有 1 个`write`（Line#13）。我声称**无法重新排序**，但让我们在下面检查一下。

**示例 2**：

“编译器优化”代码，可以从字面上重新转换为 java，如下所示：

```
Resource read = resource;
if (resource==null)
    read = resource = new Resource();
return read; 
```

它的字节码（实际上我是通过编译上面的代码片段产生的）：

```
public static Resource getInstance();
Code:
0:   getstatic       #20; //Field resource:LResource;
3:   astore_0
4:   getstatic       #20; //Field resource:LResource;
7:   ifnonnull       22
10:  new     #22; //class Resource
13:  dup
14:  invokespecial   #24; //Method Resource."<init>":()V
17:  dup
18:  putstatic       #20; //Field resource:LResource;
21:  astore_0
22:  aload_0
23:  areturn 
```

很明显，*如果编译器“优化”*，产生了上面这样的字节码，就会发生空读（例如，我参考[Jeremy Manson 的博客](http://jeremymanson.blogspot.co.uk/2008/12/benign-data-races-in-java.html)）

有趣的是，它是如何`a = b = c`工作的：对新实例的引用（第 14 行）被*复制*（第 17 行），然后存储相同的引用，首先到`b`(resource, (Line#18)) 然后到`a`（阅读，（第 21 行））。

**示例 3**：

让我们做一个更轻微的修改：只读`resource`一次！如果编译器开始优化（并使用寄存器，正如其他人提到的），*这比上面的优化更好*，因为这里的第 4 行是“寄存器访问”而不是示例 2 中更昂贵的“静态访问”。

```
Resource read = resource;
if (read == null)   // reading the local variable, not the static field
    read = resource = new Resource();
return read; 
```

*示例 3*的字节码（也是通过逐字编译上述内容创建的）：

```
public static Resource getInstance();
Code:
0:   getstatic       #20; //Field resource:LResource;
3:   astore_0
4:   aload_0
5:   ifnonnull       20
8:   new     #22; //class Resource
11:  dup
12:  invokespecial   #24; //Method Resource."<init>":()V
15:  dup
16:  putstatic       #20; //Field resource:LResource;
19:  astore_0
20:  aload_0
21:  areturn 
```

也很容易看出，**不可能**从此字节码中获取 null，因为它的构造方式与 相同`String.hashcode()`，仅读取 1 的静态变量`resource`。

现在让我们检查**示例 1**：

```
0:   getstatic       #20; //Field resource:LResource;
3:   ifnonnull       16
6:   new             #22; //class Resource
9:   dup
10:  invokespecial   #24; //Method Resource."<init>":()V
13:  putstatic       #20; //Field resource:LResource;
16:  getstatic       #20; //Field resource:LResource;
19:  areturn 
```

您可以看到 Line#16（`variable#20`for return 的读取）最能观察到 Line#13 的写入（`variable#20`来自构造函数的分配），因此将其**放在 Line#13 执行的任何执行顺序中**都是非法的。因此，**无法重新排序**。

对于 JVM，可以构建（并利用）一个分支（使用某些额外条件）绕过 Line#13 写入：条件是读取`variable#20` **不能为 null**。

因此，在任何情况下，*示例 1*都不可能返回 null。

**结论：**

看到上面的例子，**例子 1 中看到的字节码将不会产生`null`**。*示例 2* 中的优化字节码**会产生，但`null`***示例 3*中有更好的优化，它**不会`null`**产生。

因为我们无法为所有编译器的所有可能优化做好准备，我们可以说*在某些情况下*是可能的，*在另*一些情况下是不可能的，`return null`这完全取决于字节码。此外，我们已经证明了**这两种情况都至少有一个示例**。

* * *

**较早的推理**：参考 Assylias 的示例：主要问题是：VM 重新排序 11 和 14 读取是否有效（关于所有规范、JMM、JLS），所以 14 会在 11 之前发生？

如果它可能发生，那么独立`Thread2`可以用 23 写入资源，因此 14 可以读取`null`. 我声明这**是不可能的**。

实际上，因为*可能*写入 13，所以它**不是有效的执行顺序**。VM 可以优化执行顺序，排除未执行的分支（仅剩下 2 次读取，没有写入），但要做出此决定，**它必须执行第一次读取 (11)，并且必须读取 not-null**，所以**14 read 不能在 11 read 之前**。所以，不可能退货`null`。

* * *

**不变性**

关于不变性，我认为这种说法是*不*正确的：

> 如果 Resource 是不可变的，则 UnsafeLazyInitialization 实际上是安全的。

但是，如果构造函数不可预测，则可能会出现有趣的结果。想象一下这样的构造函数：

```
public class Resource {
    public final double foo;

    public Resource() {
        this.foo = Math.random();
    }
} 
```

如果我们有 tho `Thread`s，则可能导致 2 个线程将收到一个行为不同的对象。所以，完整的声明应该是这样的：

> 如果 Resource 是不可变的并且其初始化是一致的，则 UnsafeLazyInitialization 实际上是安全的。

*一致*我的意思是调用两次的构造函数，我们`Resource`将收到两个行为完全相同的对象（在两者上以相同的顺序调用相同的方法将产生相同的结果）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T16:25:10.750

我认为你在这里的困惑是作者所说的安全出版的意思。他指的是非空资源的安全发布，但您似乎明白这一点。

您的问题很有趣 - 是否可以返回资源的空缓存值？

是的。

允许编译器像这样重新排序操作

```
public static Resource getInstance(){
   Resource reordered = resource;
   if(resource != null){
       return reordered;
   }
   return (resource = new Resource());
} 
```

这不违反顺序一致性规则，但可以返回空值。

这是否是最好的实现还有待商榷，但没有规则可以防止这种类型的重新排序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-01T18:25:17.863

在将 JLS 规则应用到这个例子之后，我得出了`getInstance`肯定可以返回的结论`null`。特别是[JLS 17.4](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4-120)：

> 内存模型决定了程序中每个点可以读取哪些值。每个单独的线程的操作必须按照该线程的语义进行操作，**但每次读取看到的值由内存模型确定**。

很明显，**在没有同步的情况下，这`null`是该方法的合法结果，**因为两个读取中的每一个都可以观察到任何东西。

* * *

## 证明

**读写分解**

程序可以分解如下（为了清楚地看到读写）：

```
 Some Thread
---------------------------------------------------------------------
 10: resource = null; //default value                                  //write
=====================================================================
           Thread 1               |          Thread 2                
----------------------------------+----------------------------------
 11: a = resource;                | 21: x = resource;                  //read
 12: if (a == null)               | 22: if (x == null)               
 13:   resource = new Resource(); | 23:   resource = new Resource();   //write
 14: b = resource;                | 24: y = resource;                  //read
 15: return b;                    | 25: return y; 
```

**JLS 说什么**

[JLS 17.4.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5-500)给出了允许读取观察写入的规则：

> 我们说变量 v 的读取 r 被允许观察 w 到 v 的写入，如果，在执行跟踪的发生之前的部分顺序中：
> 
> *   r 不在 w 之前排序（即，hb(r, w) 不是这种情况），并且
> *   没有介入写入 w' 到 v（即没有写入 w' 到 v 使得 hb(w, w') 和 hb(w', r)）。

**规则的应用**

在我们的示例中，假设线程 1 看到 null 并正确初始化`resource`。在线程 2 中，无效执行将是 21 观察 23（由于程序顺序） - 但任何其他写入（10 和 13）都可以通过读取观察到：

*   10 发生在所有操作之前，因此在 10 之前没有读取命令
*   21和24和13没有hb关系
*   13 不会发生——23 之前（两者之间没有 hb 关系）

因此，21 和 24（我们的 2 次读取）都可以观察 10（空）或 13（非空）。

**返回 null 的执行路径**

特别是，假设线程 1 在第 11 行看到 null 并`resource`在第 13 行初始化，线程 2 可以合法地执行如下：

*   `24: y = null`（读写10）
*   `21: x = non null`（读写13）
*   `22: false`
*   `25: return y`

注意：澄清一下，**这并不意味着 T2 看到非 null 并且随后看到 null**（这将违反因果关系要求） - 这意味着从执行的角度来看，两次读取已被重新排序，并且第二次在第一次之前提交一个 - 但是，根据初始程序顺序，它看起来好像在前面的写入之前已经看到了后面的写入。

**2月10日更新**

回到代码，[有效的重新排序](http://cs.oswego.edu/pipermail/concurrency-interest/2013-February/010690.html)将是：

```
Resource tmp = resource; // null here
if (resource != null) { // resource not null here
    resource = tmp = new Resource();
}
return tmp; // returns null 
```

并且由于该代码是顺序一致的（如果由单个线程执行，它将始终具有与原始代码相同的行为）它表明满足了因果关系要求（存在产生结果的有效执行）。

* * *

在并发兴趣列表上发布后，我收到了一些关于重新排序合法性的消息，这证实了这`null`是一个合法的结果：

> *   转换绝对是合法的，因为单线程执行不会区分。[请注意] 转换似乎不明智 - 编译器没有充分的理由这样做。但是，考虑到大量的周围代码或编译器优化“错误”，它可能会发生。
> *   关于线程内顺序和程序顺序的声明让我质疑事物的有效性，但最终 JMM 与被执行的字节码相关。转换可以由 javac 编译器完成，在这种情况下 null 将完全有效。并且没有关于 javac 如何将 Java 源代码转换为 Java 字节码的规则，所以......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-10T04:30:54.633

您要问的主要有两个问题：

**1.`getInstance()`方法`null`会因为重排而返回吗？**

（我认为这是您真正追求的，所以我会先尝试回答）

尽管我认为设计 Java 来实现这一点是完全疯狂的，但实际上可以返回 null似乎**是正确的。**`getInstance()`

您的示例代码：

```
if (resource == null)
    resource = new Resource();  // unsafe publication
return resource; 
```

在逻辑上与您链接到的博客文章中的示例 100% 相同：

```
if (hash == 0) {
    // calculate local variable h to be non-zero
    hash = h;
}
return hash; 
```

Jeremy Manson 然后描述了他的代码可以由于重新排序而返回 0。起初，我不相信，因为我认为以下“发生在之前”的逻辑必须成立：

```
 "if (resource == null)" happens before "resource = new Resource();"
                                   and
     "resource = new Resource();" happens before "return resource;"
                                therefore
"if (resource == null)" happens before "return resource;", preventing null 
```

但是 Jeremy 在他的博客文章的评论中给出了以下示例，说明编译器如何有效地重写此代码：

```
read = resource;
if (resource==null)
    read = resource = new Resource();
return read; 
```

这在单线程环境中的行为与原始代码完全相同，但在多线程环境中可能会导致以下执行顺序：

```
Thread 1                        Thread 2
------------------------------- -------------------------------------------------
read = resource;    // null
                                read = resource;                      // null
                                if (resource==null)                   // true
                                    read = resource = new Resource(); // non-null
                                return read;                          // non-null
if (resource==null) // FALSE!!!
return read;        // NULL!!! 
```

现在，从优化的角度来看，这样做对我来说没有任何意义，因为这些事情的全部意义在于减少对同一位置的多次读取，在这种情况下，编译器不会这样做是没有意义的而是生成`if (read==null)`，防止出现问题。因此，正如 Jeremy 在他的博客中指出的那样，这很可能不太可能发生。但似乎，纯粹从语言规则的角度来看，它实际上是允许的。

这个例子实际上在 JLS 中有介绍：

[http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4)

`r2`在、`r4`和`r5`in的值之间观察到的效果等同于上面示例中的、 和 the`Table 17.4\. Surprising results caused by forward substitution`可能发生的情况。`read = resource``if (resource==null)``return resource`

旁白：为什么我将博客文章作为答案的最终来源？因为写它的人，也是写了 JLS 第 17 章关于并发的人！所以，他最好是对的！:)

**2\. 使方法`Resource`不可变会使`getInstance()`方法线程安全吗？**

考虑到潜在的`null`结果，它可以独立于是否`Resource`可变而发生，这个问题的直接简单答案是：**不**（不严格）

但是，如果我们忽略这种极不可能但可能的情况，答案是：**取决于**。

代码的明显线程问题是它可能导致以下执行顺序（无需任何重新排序）：

```
Thread 1                                 Thread 2
---------------------------------------- ----------------------------------------
if (resource==null) // true;  
                                         if (resource==null)          // true
                                             resource=new Resource(); // object 1
                                         return resource;             // object 1
    resource=new Resource(); // object 2
return resource;             // object 2 
```

因此，非线程安全性来自这样一个事实，即您可能会从函数中返回两个不同的对象（即使不重新排序它们都不会是`null`）。

现在，这本书可能想说的是：

Java 不可变对象（如字符串和整数）试图避免为相同的内容创建多个对象。因此，如果您`"hello"`在一个地方和`"hello"`另一个地方都有，Java 将为您提供相同的确切对象引用。同样，如果您`new Integer(5)`在一个地方和`new Integer(5)`另一个地方都有。如果也是这种情况`new Resource()`，您将获得相同的引用，`object 1`并且`object 2`在上面的示例中将是完全相同的对象。这确实会导致有效的线程安全功能（忽略重新排序问题）。

但是，如果您`Resource`自己实现，我认为甚至没有办法让构造函数返回对先前创建的对象的引用，而不是创建一个新对象。所以，你不可能制造`object 1`和`object 2`成为完全相同的对象。但是，鉴于您正在使用相同的参数调用构造函数（两种情况下都没有），即使您创建的对象不是同一个确切的对象，它们也可能出于所有意图和目的，表现为如果它们是，也有效地使代码线程安全。

不过，情况不一定如此。例如，想象一个不可变的版本`Date`。默认构造函数`Date()`使用当前系统时间作为日期值。因此，即使对象是不可变的并且使用相同的参数调用构造函数，调用它两次也可能不会产生等效对象。因此该`getInstance()`方法不是线程安全的。

所以，作为一般性声明，我相信你从书中引用的那句话是完全错误的（至少在这里断章取义）。

**补充回复：重新排序**

我发现这个`resource==new Resource()`例子有点过于简单，无法帮助我理解为什么允许通过 Java 重新排序是有意义的。所以让我看看我是否能想出一些真正有助于优化的东西：

```
System.out.println("Found contact:");
System.out.println(firstname + " " + lastname);
if (firstname==null) firstname = "";
if (lastname ==null) lastname  = "";
return firstname + " " + lastname; 
```

`ifs`在这里，在两者都yield的最可能情况下，`false`执行两次昂贵的字符串连接是非最佳的`firstname + " " + lastname`，一次用于调试消息，一次用于返回。因此，在这里重新排序代码以执行以下操作确实是有意义的：

```
System.out.println("Found contact:");
String contact = firstname + " " + lastname;
System.out.println(contact);
if ((firstname==null) || (lastname==null)) {
    if (firstname==null) firstname = "";
    if (lastname ==null) lastname  = "";
    contact = firstname + " " + lastname;
}
return contact; 
```

随着示例变得越来越复杂，并且当您开始考虑编译器跟踪它使用的处理器寄存器中已经加载/计算的内容并智能地跳过重新计算已经存在的结果时，这种效果实际上可能变得越来越可能发生。所以，即使我从没想过我昨晚睡觉时会这么说，但我现在确实相信这可能是真正允许代码优化发挥最大作用的必要/好的决定令人印象深刻的魔术。但它仍然让我觉得很危险，因为我认为很多人都没有意识到这一点，即使他们知道，它

***我猜如果你不允许这种重新排序，任何对一系列处理步骤的中间结果的缓存和重用都会变得非法，从而取消可能的最强大的编译器优化之一。***

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T11:19:43.037

`null`一旦它是非的，什么都没有设置引用`null`。`null`在另一个线程将其设置为 non- 之后，一个线程可能会看到它，`null`但我不知道如何可能相反。

我不确定指令*重新*排序是一个因素，但两个线程的指令交错是一个因素。在`if`评估其条件之前，无法以某种方式重新排序分支以执行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T11:47:20.877

如果我错了，我很抱歉（因为我不是以英语为母语的人），但在我看来，提到的声明：

> 如果 Resource 是不可变的，则 UnsafeLazyInitialization 实际上是安全的。

被脱离上下文。该声明确实与使用*初始化安全*有关：

> 初始化安全的保证允许正确构造的不可变对象在线程间安全共享而无需同步

...

> 初始化安全保证对于正确构造的对象，所有线程都将看到构造函数设置的最终字段的正确值

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-31T15:51:27.037

在仔细阅读您链接的帖子后，您是正确的，您发布的示例*可以想象*（在当前内存模型下）返回 null。相关示例在帖子的评论中非常低，但实际上，运行时可以这样做：

```
public class UnsafeLazyInitialization {
    private static Resource resource;

    public static Resource getInstance() {
        Resource tmp = resource;
        if (resource == null)
            tmp = resource = new Resource();  // unsafe publication
        return tmp;
    }
} 
```

这遵守单线程的约束，但如果多个线程正在调用该方法，则可能导致返回 null 值（第一个赋值`tmp`获取 null 值，if 块看到非 null 值，`tmp`返回为 null） .

为了使这个“安全”不安全（假设 Resource 是不可变的），您必须`resource`只显式读取一次（类似于您应该如何处理共享的 volatile 变量：

```
public class UnsafeLazyInitialization {
    private static Resource resource;

    public static Resource getInstance() {
        Resource cur = resource;
        if (cur == null) {
            cur = new Resource();
            resource = cur;
        }
        return cur;
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-09-01T13:18:19.917

现在这是一个很长的回帖，仍然考虑到这个问题讨论了许多有趣的重新排序和并发的工作原理，尽管最近我在这里涉及。

暂时，如果我们**不涉及并发，多线程情况下的动作和有效的重新排序。**
“JVM 能否在单线程上下文中使用缓存值写后操作”。我想不是。鉴于如果条件可以缓存完全发挥作用，则存在写入操作。
回到这个问题，不变性确保对象在其引用可访问或发布之前已完全或正确创建，因此不变性肯定有帮助。但是这里有一个对象创建后的写操作。因此，第二次读取可以在同一个线程或另一个线程中缓存预写的值。不。一个线程可能不知道其他线程中的写入（假设线程之间不需要立即可见）。 **因此，返回 false null 的可能性（即在对象创建之后）不会是无效的。** （有问题的代码打破了单例，但我们不关心这里）

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-01-31T11:25:53.040

确实是安全的，它`UnsafeLazyInitialization.resource`是不可变的，即该字段被声明为 final：

```
private static final Resource resource = new Resource(); 
```

`Resource`如果类本身是不可变的并且与您使用的实例无关，它也可能被认为是线程安全的。在这种情况下，两个调用可以返回不同的实例而`Resource`没有问题，除了根据`getInstance()`同时调用的线程数增加内存消耗）。

这似乎牵强，我相信有一个错字，真正的句子应该是

> *如果 * r* *esource 是不可变的，则 UnsafeLazyInitialization 实际上是安全的。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-02-05T17:05:36.077

`UnsafeLazyInitialization.getInstance()` **永远不能返回 null**。

我将使用@assylias 的桌子。

```
 Some Thread
---------------------------------------------------------------------
 10: resource = null; //default value                                  //write
=====================================================================
           Thread 1               |          Thread 2                
----------------------------------+----------------------------------
 11: a = resource;                | 21: x = resource;                  //read
 12: if (a == null)               | 22: if (x == null)               
 13:   resource = new Resource(); | 23:   resource = new Resource();   //write
 14: b = resource;                | 24: y = resource;                  //read
 15: return b;                    | 25: return y; 
```

我将使用线程 1 的行号。线程 1 在 11 读取之前看到 10 的写入，在 14 读取之前看到第 11 行的读取。这些是**线程内发生之前的**关系，不要说关于线程 2 的任何信息。第 14 行的读取返回由 JMM 定义的值。根据时间的不同，它可能是在第 13 行创建的资源，也可能是线程 2 写入的**任何**值。但是该写入必须发生在第 11 行的读取之后。只有一个这样的写入，即不安全发布在第 23 行。第 10 行对 null 的写入不在范围内，因为由于线程**内**排序，它发生在第 11 行之前。

是否`Resource`不可变并不重要。到目前为止，大多数讨论都集中在与不变性相关的线程间操作上，但是线程**内**规则禁止允许此方法返回 null 的重新排序。规范的相关部分是[JLS 17.4.7](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.7)。

> 对于每个线程 t，t 在 A 中执行的操作与该线程以程序顺序隔离生成的操作相同，每次写入 w 写入值 V(w)，假设每个读取 r 看到值 V (W(r))。每次读取看到的值由内存模型确定。给定的程序顺序必须反映根据 P 的线程内语义执行动作的程序顺序。

这基本上意味着虽然读取和写入可以重新排序，但对*同一*变量的读取和写入必须看起来像它们发生的那样，以便执行读取和写入的线程。

只有一次写入 null （在第 10 行）。任何一个线程都可以看到它自己的资源副本或其他线程的副本，但它在读取任一资源**后**看不到先前对 null 的写入。

附带说明一下，null 的初始化发生在单独的线程中。JCIP 中关于安全出版的部分指出：

> 静态初始化器在类初始化时由 JVM 执行；由于 JVM 中的内部同步，这种机制可以保证安全地发布以这种方式初始化的任何对象 [[JLS 12.4.2]](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4.2)。

可能值得尝试编写一个`UnsafeLazyInitialization.getInstance()`返回 null 的测试，并获得一些建议的等效重写以返回 null。你会发现它们并不是真正等价的。

**编辑**

为了清楚起见，这是一个将读取和写入分开的示例。假设有一个公共静态变量对象。

```
public static Object object = new Integer(0); 
```

线程 1 写入该对象：

```
object = new Integer(1);
object = new Integer(2);
object = new Integer(3); 
```

线程 2 读取该对象：

```
System.out.println(object);
System.out.println(object);
System.out.println(object); 
```

如果没有任何形式的同步提供线程间发生之前的关系，线程 2 可以打印出许多不同的东西。

```
1, 2, 3
0, 0, 0
3, 3, 3
1, 1, 3
etc. 
```

但它不能打印出像 3、2、1 这样的递减序列。17.4.7 中指定的线程内语义严重限制了此处的重新排序。如果不是使用`object`三次，而是将示例更改为使用三个单独的静态变量，则可能会产生更多输出，因为对重新排序没有限制。

# c# - 我想在 C# ASP .NET 中获取 Gridview 页脚行的文本框的值

> ID：14624366
> 
> 赞同：0
> 
> 时间：2013-01-31T11:13:34.053
> 
> 标签：c#, asp.net, .net

> **可能重复：**
> [如何在 C# ASP.NET 中从 gridview 的页脚行中查找文本框的值](https://stackoverflow.com/questions/14618757/how-to-find-the-value-of-textbox-from-the-footer-row-of-gridview-in-c-sharp-asp)

我想在 C# ASP .NET 中获取 Gridview 页脚行的文本框的值，但文本框的返回值为 null 或空。

```
<asp:GridView ID="GridView1" runat="server" Width="1214px"       
        AutoGenerateColumns="False" ShowFooter="true" 
        OnRowDataBound="GridView1_RowDataBound" OnRowCommand="GridView1_RowCommand">
        <Columns>
        <asp:TemplateField HeaderText="Update">
            <ItemTemplate>
                <asp:LinkButton ID="lbtn_Update" runat="server" Text="Update"/>
                <asp:LinkButton ID="lbtn_Delete" runat="server" Text="Delete"/>
            </ItemTemplate>
            <FooterTemplate>
               <asp:LinkButton ID="lbtn_Delete" runat="server"CommandArgument="AddNew" Text="Insert"/>
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Student ID">
            <EditItemTemplate>
                <asp:Label ID="lblEditSID" runat="server" Text='<%#Eval("sid")%>' />
            </EditItemTemplate>
            <ItemTemplate>
                <asp:Label ID="lblSID" runat="server" Text='<%#Eval("sid")%>' />
            </ItemTemplate>
            <FooterTemplate>
                <asp:TextBox ID="txtSID" runat="server" MaxLength="50"/>
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Student Name">
            <EditItemTemplate>
               <asp:Label ID="lblEditSName" runat="server" Text='<%#Eval("sname")%>'/>
            </EditItemTemplate>
            <ItemTemplate>
                <asp:Label ID="lblSName" runat="server" Text='<%#Eval("sname")%>' />
            </ItemTemplate>
            <FooterTemplate>
                <asp:TextBox ID="txtSName" runat="server"/>
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Student Mobile No">
            <EditItemTemplate>
               <asp:TextBox ID="txtEditMobile" runat="server" Text='<%#Eval("smno")%>'/>                 
            </EditItemTemplate>
            <ItemTemplate>
                <asp:Label ID="lblMobile" runat="server" Text='<%#Eval("smno")%>' />
            </ItemTemplate>
            <FooterTemplate>
                <asp:TextBox ID="txtMobile" runat="server" />
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Student Email-ID">
            <EditItemTemplate>
          <asp:TextBox ID="txtEditEmail" runat="server" Text='<%#Eval("mailid")%>'/> 
            </EditItemTemplate>
            <ItemTemplate>
                <asp:Label ID="lblEmail" runat="server" Text='<%#Eval("mailid")%>' />
            </ItemTemplate>
            <FooterTemplate>
                <asp:TextBox ID="txtEmail" runat="server" />
            </FooterTemplate>
            </asp:TemplateField>       
        </Columns>
    </asp:GridView> 
```

这是后面的代码代码，我想在 C# ASP .NET 中获取 Gridview 页脚行的 Textbox 的值，但 textboxs 的 reurn 值为 null 或空

```
protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e) {
    if (e.CommandArgument.Equals("AddNew")) {
        GridView test=(GridView)sender;
        TextBox txtSid = (TextBox)(test.FooterRow.FindControl("txtSID"));
        TextBox txtName = (TextBox)(GridView1.FooterRow.FindControl("txtSName"));
        TextBox txtMobile = (TextBox)(GridView1.FooterRow.FindControl("txtMobile"));
        TextBox txtEmail = ((TextBox)GridView1.FooterRow.FindControl("txtEmail"));            
        string strSid =txtSid.Text;
        string strName = txtName.Text;
        string strMobile = txtMobile.Text;
        string strEmail = txtEmail.Text;
     }
} 
```

Textxtbox 值是`null`或空字符串，`strName`当我将值输入文本框时，其他字符串为空。

# c# - WPF TextBlock 文本绑定

> ID：14624373
> 
> 赞同：6
> 
> 时间：2013-01-31T11:13:46.440
> 
> 标签：c#, wpf, data-binding, user-controls

TextBlock 绑定不起作用，我不知道为什么......

（此代码有效，但 TextBlock 未更新）

**XAML**

```
<TextBlock x:Name="filterAllText"
 Text="{Binding UpdateSourceTrigger=PropertyChanged}" /> 
```

**代码隐藏**

```
filterAllText.DataContext = LogSession.test.MyCoynt; 
```

**C＃**

```
public class Test : INotifyPropertyChanged {
 public int myCoynt;

     public int MyCoynt {
        get { return myCoynt; }
        set {
            myCoynt = value;
            NotifyPropertyChanged();
        }
    }

     public event PropertyChangedEventHandler PropertyChanged;

     protected virtual void NotifyPropertyChanged(
        [CallerMemberName] String propertyName = "") {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null) {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T11:20:28.220

试试这个：

```
<TextBlock x:Name="filterAllText" 
    Text="{Binding UpdateSourceTrigger=PropertyChanged, Path=MyCoynt}" /> 
```

并设置你的`DataContext`喜欢：

```
filterAllText.DataContext = LogSession.test; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:20:51.157

```
<TextBlock x:Name="filterAllText" Text="{Binding Path=., UpdateSourceTrigger=PropertyChanged}" /> 
```

这应该可以，但不是通常的方式

编辑：更好的方法是来自 Goanne

# css - 如何使 div 使用 100% 可用高度（减去顶部徽标高度）

> ID：14624374
> 
> 赞同：4
> 
> 时间：2013-01-31T11:13:46.987
> 
> 标签：css, html, height

我有这个 HTML：

```
<body>
<div id="logo">
    <table id="width100" cellpadding="0" cellspacing="0"  >
        <tr>
            <td width="33.33%" align="left">&nbsp;</td>
            <td width="33.34%" align="center"><a href="http://www.rawgameshop.com/"><img src="images/logo_new.png" /></a></td>
            <td width="33.33%" align="right"><img src="images/logo_right.png" /></td>
        </tr>
        <tr bgcolor="#731000" id="width100">
            <td height="15" colspan="3" ></td>
        </tr>
    </table>
</div>

<center>
<div id="container">
    <div id="main_body">
        asd
    </div>
</div>
</center> 
```

这个CSS：

```
body {
    width:100%;
    height:100%;
    margin:0px;
    background-color:#ECECEC;
}

#logo {
    width:100%;
    height:165px;
    background-color:#FFFFFF;   
}

#width100 {
    width:100%;
}

#container {
    background-color:#FFFFFF;
    height:100%;
    width:900px;
}

#main_body {
    width:800px;
    background-color:#FFFFFF;
    height:100%;
} 
```

我的问题是：为什么我的`main_body`div 没有延伸到页面中间？它只有字母那么高。

如果我删除`<center>`HTML 标签，它会向下拉伸，但屏幕尺寸为 100%，这意味着我必须向下滚动到最后。我希望它位于屏幕边缘，而不是更远。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:24:16.950

`height:100%`获取第一个设置了高度的父元素的高度。由于您所有的父对象都有一个百分比高度，因此它会一直上升到身体并占据该高度的 100%。

您将需要设置`#logo`为百分比高度，然后设置为百分比`main_body`的其余部分，否则您将需要 javascript / jquery 来调整您的大小`main_body`，因为 css 尚未启用计算方法（尽管我认为它可能即将推出)

看看这篇文章，因为他们试图实现同样的目标：

[使用 CSS3 计算值](https://stackoverflow.com/questions/7309170/calculate-value-with-css3)

如果您要使用 jQuery 路由，则需要将 jquery 库添加到页面（我通常将其放在页面底部），然后在此之后的任何地方都需要包含要运行的脚本，如下所示：

```
<script type="text/javascript">
  $(document).ready(function () { 
    var newHeight = $(window).height() - $('#logo').height();
    var oldHeight = $('#container').height();

    if (newHeight > oldHeight) {
      $('#container').height(newHeight);
    }
  });
</script> 
```

这`$(document).ready(function(){})`意味着一旦文档（网页）完成加载，函数内的任何内容都将被触发

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:16:59.713

添加`height:100%`到`html,body`和删除`<center>`标签，而不是`margin:0 auto`使用`#container`

```
 html,body{height:100%}
  #container {
    background-color:red;
    height:100%;
    width:900px; margin:0 auto
  }
  #main_body {
    width:800px;
    background-color:#FFFFFF;
    height:100%; margin:0 auto
  } 
```

**[演示](http://jsfiddle.net/LmxvV/1/)**

* * *

对于那个问题，像这样改变html，

*   将外部 div 添加到整个标记，制作`position:relative`并提供`position:absolute`给容器 div
*   用于`z-index`将容器 div 推送到徽标 div 下方。
*   最后在里面添加一个空的div`#main_body`来给出高度（与logo div高度相同）

**HTML**

```
<div id="wrapper">
<div id="logo">
   logo html
</div>
<div id="container">    
    <div id="main_body">
        <div class="space"></div>
        asd
    </div>
</div>
    </div> 
```

**CSS**

```
#wrapper{
    height:100%; 
    background:grey; 
    position:relative; 
}
#container {
   background-color:red;  
   height:100%;
   width:900px; 
   margin:0 auto; 
   position: absolute;
   top: 0; bottom: 0; left: 0; right: 0; 
   z-index:1;
}
#main_body {
   width:800px;  
   background-color:#FFFFFF;
   height:100%; 
   margin:0 auto; 
}
.space{height:165px} 
```

**[演示 2](http://jsfiddle.net/LmxvV/3/)**

# ios - 我可以使用 apn_on_rails 推送报亭通知吗？

> ID：14624375
> 
> 赞同：0
> 
> 时间：2013-01-31T11:13:51.213
> 
> 标签：ios, ruby-on-rails-3, push-notification, apple-push-notifications, newsstand-kit

有没有办法使用[apn_on_rails](https://github.com/timsu/apn_on_rails)推送报亭通知？即推送这种有效载荷：

```
{"aps": {"badge": 1,"content-available":"1"} } 
```

目前[我可以看到](http://yekmer.posterous.com/how-to-send-iphone-push-notifications-in-rail)我可以推送带有徽章、声音和警报的通知。

我敢肯定，如果事实证明它还没有这样做，那么修改 apn_on_rails 本身并不难。apn_on_rails 的分支太多了，我目前正在使用[这个](https://github.com/timsu/apn_on_rails)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T20:45:16.483

该类`APN::Notification`有一个[`custom_properties`](https://github.com/timsu/apn_on_rails/blob/master/lib/apn_on_rails/app/models/apn/notification.rb#L20)属性，您可以使用该属性在推送通知中包含任何通用数据。以您的有效负载为例，您将执行以下操作：

```
apn = APN::Notification.new
apn.badge = 1
apn.custom_properties = {"content-available" => 1} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:37:05.893

Grocer 还支持报亭通知。[https://github.com/grocer/grocer#newsstand-notifications](https://github.com/grocer/grocer#newsstand-notifications)

```
notification = Grocer::NewsstandNotification.new(device_token: "...")
# Generates a JSON payload like:
# {"aps": {"content-available": 1}} 
```

# haskell - 高效的并行策略

> ID：14624376
> 
> 赞同：15
> 
> 时间：2013-01-31T11:13:51.773
> 
> 标签：haskell, parallel-processing

我正在尝试围绕并行策略进行思考。我想我理解每个组合器的作用，但是每次我尝试将它们与超过 1 个内核一起使用时，程序都会大大减慢。

例如，不久前，我尝试从大约 700 个文档中计算直方图（并从中计算出唯一的单词）。我认为使用文件级粒度就可以了。我得到`-N4`1.70 的工作平衡。但是，使用`-N1`它的运行时间比使用`-N4`. 我不确定问题到底是什么，但我想知道如何决定在何处/何时/如何进行并行化并对此有所了解。这将如何并行化，以使速度随着内核的增加而不是降低？

```
import Data.Map (Map)
import qualified Data.Map as M
import System.Directory
import Control.Applicative
import Data.Vector (Vector)
import qualified Data.Vector as V
import qualified Data.Text as T
import qualified Data.Text.IO as TI
import Data.Text (Text)
import System.FilePath ((</>))
import Control.Parallel.Strategies
import qualified Data.Set as S
import Data.Set (Set)
import GHC.Conc (pseq, numCapabilities)
import Data.List (foldl')

mapReduce stratm m stratr r xs = let
  mapped = parMap stratm m xs
  reduced = r mapped `using` stratr
  in mapped `pseq` reduced

type Histogram = Map Text Int

rootDir = "/home/masse/Documents/text_conversion/"

finnishStop = ["minä", "sinä", "hän", "kuitenkin", "jälkeen", "mukaanlukien", "koska", "mutta", "jos", "kuitenkin", "kun", "kunnes", "sanoo", "sanoi", "sanoa", "miksi", "vielä", "sinun"]
englishStop = ["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"]
isStopWord :: Text -> Bool
isStopWord x = x `elem` (finnishStop ++ englishStop)

textFiles :: IO [FilePath]
textFiles = map (rootDir </>) . filter (not . meta) <$> getDirectoryContents rootDir
  where meta "." = True
        meta ".." = True
        meta _ = False

histogram :: Text -> Histogram
histogram = foldr (\k -> M.insertWith' (+) k 1) M.empty . filter (not . isStopWord) . T.words

wordList = do
  files <- mapM TI.readFile =<< textFiles
  return $ mapReduce rseq histogram rseq reduce files
  where
    reduce = M.unions

main = do
  list <- wordList
  print $ M.size list 
```

至于文本文件，我正在使用转换为文本文件的 pdf，因此我无法提供它们，但出于此目的，几乎所有来自古腾堡项目的书籍/书籍都应该这样做。

**编辑**：向脚本添加了导入

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:02:31.630

我认为 Daniel 说得对—— Data.Map 和列表是一种惰性数据结构；您应该同时使用 foldl'*和*insertWith' 来确保每个块的工作都急切完成 --- 否则所有工作都会延迟到顺序部分（减少）。

同样，为每个文件制作火花是否是正确的粒度并不明显，特别是在文件大小差异很大的情况下。如果是这种情况，最好将单词列表连接起来并分成偶数大小的块（参见 parListChunk 组合器）。

当您使用它时，我还将查看使用惰性 IO (readFile) 打开许多文件的一些陷阱（运行时系统可能会用完文件句柄，因为它持有它们的时间过长）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T16:34:10.453

在实践中，让并行组合器很好地扩展可能很困难。其他人提到让你的代码更加严格，以确保你实际上是在并行工作，这绝对是重要的。

真正会影响性能的两件事是大量的内存遍历和垃圾收集。即使你没有产生很多垃圾，大量的内存遍历也会给 CPU 缓存带来更大的压力，最终你的内存总线会成为瓶颈。您的`isStopWord`函数执行大量字符串比较，并且必须遍历一个相当长的链表才能这样做。`Set`您可以使用内置类型或更好 `HashSet`的包中的类型来节省大量工作`unordered-containers`（因为重复的字符串比较可能会很昂贵，特别是如果它们共享公共前缀）。

```
import           Data.HashSet                (HashSet)
import qualified Data.HashSet                as S

...

finnishStop :: [Text]
finnishStop = ["minä", "sinä", "hän", "kuitenkin", "jälkeen", "mukaanlukien", "koska", "mutta", "jos", "kuitenkin", "kun", "kunnes", "sanoo", "sanoi", "sanoa", "miksi", "vielä", "sinun"]
englishStop :: [Text]
englishStop = ["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"]

stopWord :: HashSet Text
stopWord = S.fromList (finnishStop ++ englishStop)

isStopWord :: Text -> Bool
isStopWord x = x `S.member` stopWord 
```

用这个版本替换你的`isStopWord`函数性能更好，扩展性更好（尽管绝对不是 1-1）。您也可以考虑使用`HashMap`（来自同一个包）而不是`Map`出于相同的原因，但这样做并没有明显改变。

另一种选择是增加默认堆大小以减轻 GC 的压力并为其提供更多移动空间。为编译后的代码提供 1GB 的默认堆大小（`-H1G`标志），我在 4 个内核上获得了大约 50% 的 GC 平衡，而没有我只有 ~25%（它的运行速度也快了 ~30%）。

通过这两个更改，四个核心（在我的机器上）的平均运行时间从 ~10.5s 下降到 ~3.5s。可以说，基于 GC 统计数据还有改进的空间（仍然只有 58% 的时间用于生产性工作），但要做得更好可能需要对算法进行更大幅度的更改。

# c++ - 将韩语单词分割成单独的音节 - C++/Python

> ID：14624377
> 
> 赞同：3
> 
> 时间：2013-01-31T11:13:55.827
> 
> 标签：c++, python, string, encoding, tokenize

我正在尝试将韩语字符串分割成单个音节。所以输入将是一个类似“서울특별시”的字符串，结果是“서”、“울”、“특”、“별”、“시”。我曾尝试使用 C++ 和 Python 来分割字符串，但结果是一系列？或空格（但字符串本身可以在屏幕上正确打印）。在 c++ 中，我首先将输入字符串初始化为`string korean="서울특별시"`，然后使用 a`string::iterator`遍历字符串并打印每个单独的组件。在 Python 中，我刚刚使用了一个简单的`for`循环。

我想知道是否有解决此问题的方法。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:25:37.407

我根本不懂韩语，也无法评论音节的划分，但在 Python 2 中，以下工作：

```
# -*- coding: utf-8 -*- 
print(repr(u"서울특별시"))
print(repr(u"서울특별시"[0])) 
```

输出：

```
u'\uc11c\uc6b8\ud2b9\ubcc4\uc2dc'
u'\uc11c' 
```

在 Python 3 中，您不需要`u`for Unicode 字符串。

输出是字符串中字符的 unicode 值，这意味着在这种情况下字符串已被正确切割。我打印它们的原因`repr`是我使用的终端中的字体不能代表它们，所以没有`repr`我只能看到方形框。但这纯粹是一个渲染问题，`repr`证明数据是正确的。

因此，如果您在逻辑上知道如何识别音节，那么您可以使用它`repr`来查看您的代码实际做了什么。Unicode NFC 听起来像是实际识别它们的好选择（感谢 R. Martinho Fernandes），并且`unicodedata.normalize()`是获得它的方法。

# c# - 如何在for循环中为数组赋值

> ID：14624380
> 
> 赞同：1
> 
> 时间：2013-01-31T11:14:03.893
> 
> 标签：c#, multidimensional-array

第一次执行循环：一个值被分配给`PlaatSnoepArray[0,0] and PlaatSnoepArray[0,1]`.

第二次执行循环：将一个值分配给`PlaatSnoepArray[1,0] and PlaatSnoepArray[1,1]` AND 和 的值`PlaatSnoepArray[0,0]`设置`PlaatSnoepArray[0,1]`为 0。

`PlaatSnoepArray[2,0]`第三次执行循环： 为和赋值`PlaatSnoepArray[2,1]`。`PlaatSnoepArray[1,0]`和的值`PlaatSnoepArray[1,1]`设置为`0`。

我怎样才能防止这些值被设置回 0 ？

```
 static Random Rangen = new Random();
    static void PlaatsSnoep(int aantal)
    {

        for (int i = 0; i < aantal; i++)
        {

            int SnoepX = Rangen.Next(25, 94);
            int SnoepY = Rangen.Next(3, 23);
            Console.SetCursorPosition(SnoepX, SnoepY);
            Console.WriteLine("0");

            int[,] PlaatssnoepArray = new int[aantal,2];

            PlaatssnoepArray[i, 0] = SnoepX;
            PlaatssnoepArray[i, 1] = SnoepY;

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:16:14.713

创建`array`外部`for`循环：

```
 int[,] PlaatssnoepArray = new int[aantal,2];

    for (int i = 0; i < aantal; i++)
    {

        int SnoepX = Rangen.Next(25, 94);
        int SnoepY = Rangen.Next(3, 23);
        Console.SetCursorPosition(SnoepX, SnoepY);
        Console.WriteLine("0");

        PlaatssnoepArray[i, 0] = SnoepX;
        PlaatssnoepArray[i, 1] = SnoepY;

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:16:26.467

> 我怎样才能防止这些值被设置回 0 ？

您需要移动`PlaatssnoepArray`外部循环的创建。目前，每个迭代都分配给自己的实例 of `int[aantal,2]`，一旦循环迭代结束，它就会超出范围并被丢弃。

```
int[,] PlaatssnoepArray = new int[aantal,2];
for (int i = 0; i < aantal; i++)
{
    // The rest of your code
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T11:16:29.917

您的数组声明在循环内，将其移到外面。

```
int[,] PlaatssnoepArray = new int[aantal,2];
for (int i = 0; i < aantal; i++)
    {
        int SnoepX = Rangen.Next(25, 94);
        int SnoepY = Rangen.Next(3, 23);
        Console.SetCursorPosition(SnoepX, SnoepY);
        Console.WriteLine("0");
        PlaatssnoepArray[i, 0] = SnoepX;
        PlaatssnoepArray[i, 1] = SnoepY;

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T11:16:24.263

将您的数组从循环中取出..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T11:17:24.293

您正在循环内初始化数组，将其移出

```
static Random Rangen = new Random();
static void PlaatsSnoep(int aantal)
{

    int[,] PlaatssnoepArray = new int[aantal,2];
    for (int i = 0; i < aantal; i++)
    {

        int SnoepX = Rangen.Next(25, 94);
        int SnoepY = Rangen.Next(3, 23);
        Console.SetCursorPosition(SnoepX, SnoepY);
        Console.WriteLine("0");

        PlaatssnoepArray[i, 0] = SnoepX;
        PlaatssnoepArray[i, 1] = SnoepY;

    }
} 
```

那么使用 a`List<Point>()`而不是数组呢？

```
 List<Point> PlaatssnoepList = new List<Point>(); 
    for (int i = 0; i < aantal; i++)
    {
        Point p = new Point(Rangen.Next(25, 94), Rangen.Next(3, 23));
        Console.SetCursorPosition(p.X, p.Y);
        Console.WriteLine("0");
        PlaatssnoepList.Add(p)
    } 
```

# ios - 在 iOS 上使用修改后的元数据（无重新编码）保存原始图像数据

> ID：14624384
> 
> 赞同：12
> 
> 时间：2013-01-31T11:14:22.773
> 
> 标签：ios, objective-c, image, metadata

我想在临时文件夹中保存带有一些元数据更改的图像，而不重新编码实际的图像数据。

我发现能够做到这一点的唯一方法是[ALAssetsLibrary/writeImageDataToSavedPhotosAlbum:metadata:completionBlock:](http://developer.apple.com/library/ios/documentation/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html#//apple_ref/occ/instm/ALAssetsLibrary/writeImageDataToSavedPhotosAlbum:metadata:completionBlock:)，但是，这个方法将图像保存到照片库中。相反，我想将图像保存到临时文件夹（例如通过电子邮件共享，而不填充照片库）。

我试过使用`CGImageDestinationRef`（[CGImageDestinationAddImageFromSource](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CGImageDestination/Reference/reference.html#//apple_ref/c/func/CGImageDestinationAddImageFromSource)），但它只能使用解码的图像创建，这意味着它在保存时重新编码（测试，像素字节看起来不同）。

除了使用之外，还有其他可用于 iOS 的方法/类可以将图像数据与元数据一起保存`CGImageDestinationRef`吗？也欢迎提出变通办法的建议。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-05T02:17:27.877

这是 iOS SDK 的一个令人沮丧的问题。首先，我建议提交[增强请求](http://bugreport.apple.com/)。

现在，这是一个潜在的解决方法：如果 ALAsset 是由您创建的（即，它的`editable`属性是`YES`），那么您基本上可以读取数据，使用元数据写入，再次读取，保存到磁盘，然后使用原始元数据写入。

这种方法将避免创建重复的图像。

请阅读 // 评论，因为我为了简洁而跳过了一些内容（例如构建元数据字典）：

```
ALAsset* asset; //get your asset, don't use this empty one
if (asset.editable) {

    // get the source data
    ALAssetRepresentation *rep = [asset defaultRepresentation];
    Byte *buffer = (Byte*)malloc(rep.size);
    // add error checking here
    NSUInteger buffered = [rep getBytes:buffer fromOffset:0.0 length:rep.size error:nil];
    NSData *sourceData = [NSData dataWithBytesNoCopy:buffer length:buffered freeWhenDone:YES];

    // make your metadata whatever you want
    // you should use actual metadata, not a blank dictionary
    NSDictionary *metadataDictionary = [NSDictionary dictionary];

    // these are __weak to avoid creating an ARC retain cycle
    NSData __weak *originalData = sourceData;
    NSDictionary __weak *originalMetadata = [rep metadata];

    [asset setImageData:sourceData
               metadata:metadataDictionary
        completionBlock:^(NSURL *assetURL, NSError *error) {
            //now get your data and write it to file
            if (!error) {
                //get your data...
                NSString *assetPath = [assetURL path];
                NSData *targetData = [[NSFileManager defaultManager] contentsAtPath:assetPath];

                //...write to file...
                NSArray *searchPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
                NSString *documentPath = [searchPaths lastObject];
                NSURL *fileURL = [NSURL fileURLWithPath:documentPath];
                [targetData writeToURL:fileURL atomically:YES];

                //...and put it back the way it was
                [asset setImageData:originalData metadata:originalMetadata completionBlock:nil];
            } else {
                // handle error on setting data
                NSLog(@"ERROR: %@", [error localizedDescription]);
            }
        }];
} else {
    // you'll need to make a new ALAsset which you have permission to edit and then try again

} 
```

如您所见，如果 ALAsset 不属于您，您将需要创建一个，这会将照片添加到用户的库中，这正是您想要避免的。但是，您可能已经猜到了，即使您的应用程序创建了 ALAsset，您也无法从用户的照片库中删除它。（请随时为此提出另一个增强请求。）

因此，如果照片/图像是在您的应用程序中创建的，那么这对您有用。

但如果没有，它将创建一个用户必须删除的附加副本。

唯一的选择是自己解析 NSData，这会很痛苦。我知道没有开源库可以填补 iOS SDK 中的这一空白。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T08:20:23.080

试试这个 ：

```
- (void)saveImage: (UIImage*)image
{
    if (image != nil)
    {
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                             NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString* path = [documentsDirectory stringByAppendingPathComponent:
                          @"test.png" ];
        NSData* data = UIImagePNGRepresentation(image);
        [data writeToFile:path atomically:YES];
    }
}

- (UIImage*)loadImage
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                         NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString* path = [documentsDirectory stringByAppendingPathComponent:
                      @"test.png" ];
    UIImage* image = [UIImage imageWithContentsOfFile:path];
    [self sendAction:path];
    return image;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T04:34:09.653

除了 iphone-exif 和 A​​aron 的回答，您可能还想查看[libexif c library](http://libexif.sourceforge.net/)。

另请参阅 HCO23 对
[如何在文件系统上为现有图像写入或修改 EXIF 数据而不加载图像的回答？](https://stackoverflow.com/questions/11715631/how-to-write-or-modify-exif-data-for-an-existing-image-on-the-filesystem-withou)

（@HCO23 在 iOS 项目中使用了 libexif）。

还值得注意的是，应用商店中的许多“专业”元数据编辑应用似乎通过创建 sidecar/xmp 文件来绕过这个问题。

# css - 响应式设计最佳实践：媒体查询和 SEO 影响的重复 html 元素？

> ID：14624386
> 
> 赞同：3
> 
> 时间：2013-01-31T11:14:33.020
> 
> 标签：css, html, seo, responsive-design, media-queries

编辑：问题已关闭，请参阅 webmasters.stackexchange：

[https://webmasters.stackexchange.com/questions/43038/responsive-design-best-practice-duplicate-html-elements-for-media-querying-and/43100#43100](https://webmasters.stackexchange.com/questions/43038/responsive-design-best-practice-duplicate-html-elements-for-media-querying-and/43100#43100)

我有一个页面，按照 html 外观的顺序，有一个`figure`标签、一个标签`headgroup`和一个`article`标签。

为了使用媒体查询使页面设计响应，我需要不同的元素顺序，因此图像出现在标题之后。

我能想到的最简单的解决方案是`headgroup`在源代码中克隆标签并将副本放在`figure`标签之前，从而可以根据视口大小显示/隐藏适当的标签。

但我觉得这在 SEO 方面并不理想。

我的问题很简单：

这种简单的技术真的对SEO有影响吗？

是否有一个 html 属性来声明页面中的重复元素？

还有其他推荐的解决方案吗？最佳实践？

提前感谢任何建议的输入！

# java - 除非用户先通过 drive.google.com 打开文件，否则无法打开通过 java google-drive-sdk 共享的文件

> ID：14624388
> 
> 赞同：2
> 
> 时间：2013-01-31T11:14:42.427
> 
> 标签：java, google-drive-api

用例是一个使用 Google Drive 作为驱动器的嵌入式编辑器。我想在用户无需与 drive.google.com 交互的情况下执行此操作。嵌入器调用我的 API 来创建文件、添加权限等。一切都很好，除了：

```
Drive.Builder(transport, jsonFactory, credential)
                                .build().files().get(fileId).execute(); 
```

`null`除非文件已通过 drive.google.com 至少打开一次，否则返回。无论是通过 drive.google.com 还是通过我的 API 使用我的应用程序打开文件，执行的代码都是完全相同的。凭证也是一样的。

这是设计使然还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:42:57.590

您正在使用`drive.file`范围，可能两个应用程序都无权访问该文件。有关范围，请参阅 Google[文档](https://developers.google.com/drive/scopes)。

# silverlight - Silverlight 绑定到带有参数的方法

> ID：14624393
> 
> 赞同：0
> 
> 时间：2013-01-31T11:15:08.153
> 
> 标签：silverlight, binding, parameters

如何将矩形绑定到带参数的方法？

这是我的 XAML：

```
 <i:EventTrigger EventName="MouseEnter">
                <ie:CallMethodAction TargetObject="{Binding}" MethodName="SettingMouseEnter"  />
            </i:EventTrigger> 
```

还有我的方法：

```
 public void SettingMouseEnter()
    {
        MouseState(true, "setting");
    } 
```

但我希望能够将参数从我的 XAML 代码传递给该方法，以便我可以在 XAML 代码中输入 true 和“设置”作为参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:56:46.840

根据我阅读的内容，除了您正在尝试的内容之外，您无法通过任何其他内容。在堆栈溢出中还有另一个类似的问题[有没有办法将参数（或多个参数）传递给 CallMethodAction 行为？](https://stackoverflow.com/questions/5073065/is-there-a-way-to-pass-a-parameter-or-multiple-params-to-the-callmethodaction)看看那个。

# jquery - 使用 Knockout JS 选项填充下拉列表，使用 ajax 调用返回的 json 对象

> ID：14624395
> 
> 赞同：3
> 
> 时间：2013-01-31T11:15:11.973
> 
> 标签：jquery, ajax, knockout.js, getjson

我在我的单页 Web 应用程序中使用淘汰赛 js 进行数据绑定，我需要使用一个 json 对象填充下拉列表，该对象作为对服务器的 ajax 调用的响应返回。我在这里添加我的模型和 ajax 调用。请提出解决方案。

```
var permissionRequestModel = {
fromDate: ko.observable(''),
toDate: ko.observable(''),
fulldayPermission: ko.observable(false),

fromTimeHH: ko.observable(''),
fromTimeMM: ko.observable(''),
toTimeHH: ko.observable(''),
toTimeMM: ko.observable(''),

permissionTypeOne: ko.observable(''),
permissionTypeTwo: ko.observable(''),

approverList: ko.observableArray([]),

reasonLeave: ko.observable('')

};

//ajax call

$(function () {

$.ajax({
    url: "{generic uri}",
    type: "GET",
    contentType: "application/json",
    dataType: "json",
    error: function () {
        alert("failed");
    },
    success: function (data) {
             alert("Success");
    }
});
}); 
```

我需要用 json 响应填充 ApproverList (ko.observablearray)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T11:20:16.393

使用[Knockout Mapping 插件](http://knockoutjs.com/documentation/plugins-mapping.html)：

```
approverList = ko.mapping.fromJS(data); 
```

或者，如果您想更新已填充的视图模型：

```
success: function (data)
{
    ko.mapping.fromJS(data, approverList);
} 
```

# jsf-2 - Primefaces 升级异常： 父级不是 EditableValueHolder 的实例

> ID：14624407
> 
> 赞同：1
> 
> 时间：2013-01-31T11:15:40.673
> 
> 标签：jsf-2, primefaces

我正在尝试将我在 primefaces-3.3.1 上的应用程序更新为 primefaces-3.4.2。在更新依赖项（jar 文件）时，我收到以下错误。

```
javax.faces.view.facelets.TagException: /test.xhtml @6,5 <f:validateRegex> Parent not an instance of EditableValueHolder: javax.faces.component.html.HtmlPanelGrid@6190d6d0 
```

此行的 Xhtml 代码：

```
 <p:inputText value="#{someBean.lastName}" required="true" id="lastName" validatorMessage="#{messages.lastNameMessage}">
        <f:validateRegex pattern="#{someOtherBean.lastNameRegexPattern}" />
 </p:inputText> 
```

我猜 Exception 清楚地表明现在 f:validateRegex 不能嵌套到 HtmlPanelGrid 类型组件中。

以下是命名空间声明

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://java.sun.com/jsf/core"> 
```

那么现在如何解决它......？

# ios - 检查对象是否在循环内创建

> ID：14624411
> 
> 赞同：-1
> 
> 时间：2013-01-31T11:16:07.637
> 
> 标签：ios, objective-c, loops

Objective-C 中有什么方法可以检查是否在循环中创建了一个对象（while，for）？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:23:13.310

我认为您无法知道它是否是在循环中创建的，但是由于您正在编写将在循环中创建对象的代码，因此您可以调用特殊的 init 方法...

```
SpecialClass * obj = [[SpecialClass alloc] init];

while (isTrue)
{
     SpecialClass * loopObj = [[SpecialClass alloc] initCreatedByLoop];
     // Do whats needed
} 
```

并在您的 SpecialClass 中创建一个特定的初始化程序...

```
@implementation SpecialClass

-(id)initCreatedByLoop {
    self = [super init];

    if (self) {
        // What ever you want to do
    }

    return self;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:27:31.440

是的，但要获得准确的答案，您能否告诉我们该对象是什么以及何时声明？你可以发布你的代码吗？

```
int x=0;
while (x<3) {
    NSString *i = @"hello world";
    x++;
}

NSLog(@"i is %@", i) // i is only declared inside the while loop so not available here 
```

或者，

```
int x=0;
NSString *i;
while (x<3) {
    i = @"hello world";
    x++;
}
NSLog(@"i is %@", i); // i is declared beforehand outside the while loop so is available here 
```

如果您需要对它是否已创建采取行动，请使用 Anil 的答案，但这里重要的是范围

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T11:22:36.673

```
NSString *obj = nil;

while()
 {
 //Create object
   obj = [[NSString alloc] init];

}

//check obj is nil or not

if(nil == obj)
{
// obj not created
} 
```

# teamcity - 如何在 TeamCity 的电子邮件模板中使用构建参数

> ID：14624418
> 
> 赞同：2
> 
> 时间：2013-01-31T11:16:28.193
> 
> 标签：teamcity

如何在位于的电子邮件模板中使用由于构建过程而设置的构建参数`ProgramData\JetBrains\TeamCity\config\_notifications\email`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-01T05:18:29.937

我找到了这个解决方案。它以漂亮整洁的格式为您提供所有构建参数。

```
 <#list build.parametersProvider.all?keys as param>
    ${param} - ${build.parametersProvider.all[param]}
    <br>
 </#list> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-14T10:09:42.287

您可以通过这种方式使用 teamcity 构建参数：

环境变量（env.）： `${build.parametersProvider.all['env.NOTES']}`
配置参数： `${build.parametersProvider.all['TAG']}`

参数`TAG`和`env.NOTES`在`Build Configuration Settings`页面上配置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T11:16:28.193

我在 TeamCity 论坛中找到了答案。您可以通过以下方式使用构建参数：

```
${build.parametersProvider.all['test']} 
```

# android - Android 可扩展列表选择器行为

> ID：14624419
> 
> 赞同：3
> 
> 时间：2013-01-31T11:16:28.537
> 
> 标签：android, expandablelistview, expandablelistadapter

我在 Android Expandable 列表视图中的选择器面临一个主要问题。

这是我的代码可扩展列表视图。

```
public class UserMenuAdapter extends BaseExpandableListAdapter {

    private ArrayList<String> groups;
    private ArrayList<ArrayList<ChildItems>> childs;
    private Context context;
    public LayoutInflater inflater;

    ImageView img_availabiliy;

    private static final int[] EMPTY_STATE_SET = {};
    private static final int[] GROUP_EXPANDED_STATE_SET =
            {android.R.attr.state_expanded};
    private static final int[][] GROUP_STATE_SETS = {
         EMPTY_STATE_SET, // 0
         GROUP_EXPANDED_STATE_SET // 1
    };

    public UserMenuAdapter(Context context, ArrayList<String> groups,
            ArrayList<ArrayList<ChildItems>> childs) {
        this.context = context;
        this.groups = groups;
        this.childs = childs;
        inflater = LayoutInflater.from(context);
    }

    @Override
    public Object getChild(int groupPosition, int childPosition) {
        return childs.get(groupPosition).get(childPosition);
    }

    @Override
    public long getChildId(int groupPosition, int childPosition) {
        return (long) (groupPosition * 1024 + childPosition);
    }

    @Override
    public View getChildView(int groupPosition, int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {
        View v = null;
        if (convertView != null)
            v = convertView;
        else
            v = inflater.inflate(R.layout.child_layout, parent, false);
        ChildItems ci = (ChildItems) getChild(groupPosition, childPosition);
        TextView tv = (TextView) v.findViewById(R.id.tvChild);
        tv.setText(ci.getName());
        TextView tv2 = (TextView) v.findViewById(R.id.tvChild2);
        tv2.setText(ci.getDailyStatus());
        img_availabiliy = (ImageView)v.findViewById(R.id.img_childlayout_AVAILABILITY);
        ImageView friendPics = (ImageView)v.findViewById(R.id.ivFriendPics);

        /**For Group child*/
        if(groupPosition == 3 && childPosition!= 0){
            if(ci.getPicture()!= null){
                Bitmap bitmap = BitmapFactory.decodeByteArray(ci.getPicture(), 0, ci.getPicture().length);
                bitmap = Bitmap.createScaledBitmap(bitmap, 48, 48, true);
                friendPics.setImageBitmap(bitmap);
            }else{
                friendPics.setImageResource(R.drawable.ic_launcher);
            }
            img_availabiliy.setVisibility(View.INVISIBLE);
        }else{
            if(ci.getStatusState() == 1){
                img_availabiliy.setImageResource(R.drawable.online);
            }
            else if(ci.getStatusState()==0){
                img_availabiliy.setImageResource(R.drawable.offline);           
            }           
            else if (ci.getStatusState()==2) {
                img_availabiliy.setImageResource(R.drawable.away);
            }       
            else if(ci.getStatusState()==3){
                img_availabiliy.setImageResource(R.drawable.busy);
            }
            else{
                img_availabiliy.setImageDrawable(null);
            }       
            if((groupPosition == 2 && childPosition == 0)){
                friendPics.setImageResource(R.drawable.inviteto_ccm);
                img_availabiliy.setVisibility(View.INVISIBLE);
            }
            else if(groupPosition == 3 && childPosition == 0){
                friendPics.setImageResource(R.drawable.new_ccmgroup);
                img_availabiliy.setVisibility(View.INVISIBLE);          
            }else{
                if(ci.getPicture()!= null){
                    Bitmap bitmap = BitmapFactory.decodeByteArray(ci.getPicture(), 0, ci.getPicture().length);
                    bitmap = Bitmap.createScaledBitmap(bitmap, 48, 48, true);
                    friendPics.setImageBitmap(bitmap);
                }else{
                    friendPics.setImageResource(R.drawable.ic_launcher);
                }

                img_availabiliy.setVisibility(View.VISIBLE);
            }
        }       
        return v;
    }

    @Override
    public int getChildrenCount(int groupPosition) {
        return childs.get(groupPosition).size();
    }

    @Override
    public Object getGroup(int groupPosition) {
        return groups.get(groupPosition);
    }

    @Override
    public int getGroupCount() {
        return groups.size();
    }

    @Override
    public long getGroupId(int groupPosition) {
        return (long) (groupPosition * 1024); 
    }

    @Override
    public View getGroupView(int groupPosition, boolean isExpanded,
            View convertView, ViewGroup parent) {
        View v = null;
        if (convertView != null)
            v = convertView;
        else
            v = inflater.inflate(R.layout.group_layout, parent, false);
        String gt = (String) getGroup(groupPosition);
        TextView tv2 = (TextView) v.findViewById(R.id.tvGroup);
        if (gt != null)
            tv2.setText(gt);
        /**Set Image on group layout, Max/min*/
        View ind = v.findViewById( R.id.explist_indicator);
        View groupInd = v.findViewById( R.id.llgroup);

        if( ind != null ) {
            ImageView indicator = (ImageView)ind;           
            if( getChildrenCount( groupPosition ) == 0 ) {
                indicator.setVisibility( View.INVISIBLE );
            } else {
                indicator.setVisibility( View.VISIBLE );
                int stateSetIndex = ( isExpanded ? 1 : 0) ;
                Drawable drawable = indicator.getDrawable();
                drawable.setState(GROUP_STATE_SETS[stateSetIndex]);
            }
        }
        if( groupInd != null ) {
            RelativeLayout indicator2 = (RelativeLayout)groupInd;
            if( getChildrenCount( groupPosition ) == 0 ) {
                indicator2.setVisibility( View.INVISIBLE );             
            } else {
                indicator2.setVisibility( View.VISIBLE );
                int stateSetIndex = ( isExpanded ? 1 : 0) ;
                Drawable drawable2 = indicator2.getBackground();                
                drawable2.setState(GROUP_STATE_SETS[stateSetIndex]);
            }
        }
        return v;
    }

    @Override
    public boolean hasStableIds() {
        return true;
    }

    @Override
    public boolean isChildSelectable(int groupPosition, int childPosition) {
        return true;
    }

    public void onGroupCollapsed(int groupPosition) {
    }

    public void onGroupExpanded(int groupPosition) {
    }
    public void updateUserMenu(ArrayList<ArrayList<ChildItems>> childBack){

        this.childs = childBack;

    }

} 
```

当我展开组时，我会更改选择器栏的颜色，反之亦然。

我面临的问题是，当我从任何活动返回或严格向上和向下滚动我的可扩展列表视图时，即使选择/取消选择该组，选择器颜色也会自动更改

如果有人按下（设备的）屏幕顶部，那么选择器也会更改

我对它向我展示的行为感到完全困惑，并且无法找出正在发生的事情。如果有人明白请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:43:27.780

您使用了一组错误的数组值，只需使用它 -

```
if( getChildrenCount( groupPosition ) == 0 ) {
        indicator.setVisibility( View.INVISIBLE );
    } else {                        
        indicator.setVisibility( View.VISIBLE );
        if(isExpanded){
            indicator.setImageResource(R.drawable.expander_min);
            indicator2.setBackgroundResource(R.drawable.list_selected);
            mbtnMenu.setVisibility(View.VISIBLE);
        }else{
            indicator.setImageResource(R.drawable.expander_max);
            indicator2.setBackgroundResource(R.drawable.list_unselected);
            mbtnMenu.setVisibility(View.INVISIBLE);
        }
    } 
```

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:06:45.163

问题出在您的 getGroupView() 方法中，您试图在其中设置指标和指标 2 的背景。Drawable 的 setState() 方法没有显式地设置背景——它只设置在响应状态改变事件时在 UI 上使用的资源数组。您还必须在 setState() 之后调用 invalidateSelf() 以强制 Drawable 使用新资源重绘，这可能会也可能不会解决此问题。我建议只在视图本身上使用 setBackground() 或 setBackgroundResource()。像这样的东西：

```
 @Override
    public View getGroupView(int groupPosition, boolean isExpanded,
            View convertView, ViewGroup parent) {
        View v = null;
        if (convertView != null)
            v = convertView;
        else
            v = inflater.inflate(R.layout.group_layout, parent, false);

        String gt = (String) getGroup(groupPosition);
        TextView tv2 = (TextView) v.findViewById(R.id.tvGroup);
        if (gt != null)
            tv2.setText(gt);
        /**Set Image on group layout, Max/min*/
        View ind = v.findViewById( R.id.explist_indicator);
        View groupInd = v.findViewById( R.id.llgroup);

        if( ind != null ) {
            ImageView indicator = (ImageView)ind;           
            if( getChildrenCount( groupPosition ) == 0 ) {
                indicator.setVisibility( View.INVISIBLE );
            } else {
                indicator.setVisibility( View.VISIBLE );
                indicator.setBackgroundResource(isExpanded ? android.R.attr.state_expanded : 0);
            }
        }
        if( groupInd != null ) {
            RelativeLayout indicator2 = (RelativeLayout)groupInd;
            if( getChildrenCount( groupPosition ) == 0 ) {
                indicator2.setVisibility( View.INVISIBLE );             
            } else {
                indicator2.setVisibility( View.VISIBLE );
                indicator2.setBackgroundResource(isExpanded ? android.R.attr.state_expanded : 0);
            }
        }
        return v;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T05:55:59.157

亲爱的，我在可扩展列表视图中遇到了类似的问题。我的问题是我单击任何父项总是滚动整个列表视图。可能是我的解决方案帮助。

当您使用可扩展列表视图时，只需检查您的 xml 文件。

```
<ExpandableListView
        android:id="@+id/expandableListView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:transcriptMode="alwaysScroll" 
        android:layout_toRightOf="@+id/buttonBuyAmazon" >
    </ExpandableListView> 
```

**android:transcriptMode="alwaysScroll"** 用普通改变这个 else 禁用 ok

好运

# python - 获取每次推送的 bitbucket 提交消息

> ID：14624421
> 
> 赞同：0
> 
> 时间：2013-01-31T11:16:29.690
> 
> 标签：python, post, push-notification, bitbucket, githooks

每次用户执行任何推送操作时，我都想将提交消息提取到我的 bitbucket 存储库。

我怎样才能做到这一点？

我在开发版本。那么有什么方法可以将我的存储库中的每个提交发布到 localhost/someurl 。

其他人建议我可以通过其他方式实现这一目标。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:18:01.623

选择存储库的管理菜单（齿轮符号），然后选择服务。在那里，您可以设置与外部服务的集成，例如电子邮件或 Twitter。

# ruby-on-rails - Flash[:warning] 不适用于重定向

> ID：14624423
> 
> 赞同：0
> 
> 时间：2013-01-31T11:16:33.970
> 
> 标签：ruby-on-rails, flash-message

我使用 flash[:notice] 显示成功消息，使用 flash[:warning] 显示警告和错误消息。

即使在重定向到另一个页面时，Flash[:notice] 也可以正常工作，但 flash[:warning] 不适用于重定向。

当我签入我的视图文件时，flash[:warning] 作为 nil 传递。

如何将 flash[:warning] 与 redirect_to 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:25:59.020

您可以使用

```
redirect_to 'page/to/redirect/to', :flash => { :error => 'Some error' } 
```

# c++ - 使用 getsockname 函数时出现 WSAEFAULT 错误

> ID：14624427
> 
> 赞同：4
> 
> 时间：2013-01-31T11:16:40.940
> 
> 标签：c++, winapi, winsock2

我在使用`getsockname`函数时遇到问题。我有这个代码：

```
struct sockaddr sa;
int sa_len;
sa_len = sizeof(sa);
if (getsockname(socketfd, &sa, &sa_len) != SOCKET_ERROR)
{
   ///
}
else
{
   int error = WSAGetLastError();
   //error here WSAEFAULT always
} 
```

如您所见，我在使用getsockname 函数时总是出错。错误 - `WSAEFAULT`。但为什么？结构和结构大小是对的，为什么会这样？

WSAEFAULT 描述：

> name 或 namelen 参数不是用户地址空间的有效部分，或者 namelen 参数太小。

ps 应用程序是 64 位的

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T11:26:52.027

您`struct sockaddr`太小而无法接受套接字地址。要么使用适当大小的结构，例如`struct sockaddr_in`，或者更好的是，使用 a `struct sockaddr_storage`，它保证足够大以包含地址。使用 a`sockaddr_storage`还可以让您轻松支持 IPv4 和 IPv6，只需进行最小的调整。

编辑代码：

```
struct sockaddr_storage sa;
int sa_len;
sa_len = sizeof(sa);
if (getsockname(socketfd, (struct sockaddr *)&sa, &sa_len) != SOCKET_ERROR) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:27:18.337

而不是一般的*struct sockaddr*使用为您的协议指定的一个，即 *struct sockaddr_in* 用于 IPv4 地址。有关完整示例，请参见[此处](http://www.ccplusplus.com/2011/09/getsockname-example-c.html)。

# solr - 有和没有 q=*:* 之间的 Solr 查询性能

> ID：14624432
> 
> 赞同：0
> 
> 时间：2013-01-31T11:16:51.583
> 
> 标签：solr

如果这两个查询之间的性能存在差异，谁能解释我？

```
q=field1:xxx 
```

和

```
q=*:*&fq=field1:xxx 
```

另外，如果您知道有关 Solr 性能转换的文档并将其发布在此处，那将是很好的。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T12:25:59.693

[fq](http://wiki.apache.org/solr/CommonQueryParameters#fq)利用[过滤器缓存](http://wiki.apache.org/solr/SolrCaching#filterCache)，它允许从缓存而不是实际索引中获取所有后续查询。

一些有用的链接：-
[http://lucene.472066.n3.nabble.com/fq-vs-q-td495570.html](http://lucene.472066.n3.nabble.com/fq-vs-q-td495570.html)
[http://searchhub.org/2012/02/10/advanced-filter-caching-in- solr/](http://searchhub.org/2012/02/10/advanced-filter-caching-in-solr/)
[http://www.michaelhamrah.com/blog/2011/11/solr-improving-performance-and-other-considerations/](http://www.michaelhamrah.com/blog/2011/11/solr-improving-performance-and-other-considerations/)

# magento - 如何在magento中显示所有类别和所有子类别？

> ID：14624436
> 
> 赞同：1
> 
> 时间：2013-01-31T11:17:00.097
> 
> 标签：magento

在我的商店中，我想在侧边栏中显示所有类别和子类别。

我得到了类别，但它没有显示子类别产品。

这是我的代码：

```
<?php $_helper = Mage::helper('catalog/category') ?>
<?php $_categories = $_helper->getStoreCategories() ?>
<?php $currentCategory = Mage::registry('current_category') ?>
<?php if (count($_categories) > 0): ?></p>
<ul>
<?php foreach($_categories as $_category): ?></p>
<li>
<a href="<?php echo $_helper->getCategoryUrl($_category) ?>"><br />
<?php echo $_category->getName() ?><br />
</a>
<?php $_category = Mage::getModel('catalog/category')->load($_category->getId()) ?><br />
<?php $_subcategories = $_category->getChildrenCategories() ?><br />
<?php if (count($_subcategories) > 0): ?>
<ul>
<?php foreach($_subcategories as $_subcategory): ?>
<li>
<a href="<?php echo $_helper->getCategoryUrl($_subcategory) ?>"><br />
<?php echo $_subcategory->getName() ?><br />
</a>
</li>
<?php endforeach; ?>

</ul>
<?php endif; ?>
</li>
<?php endforeach; ?>
/ul>
<?php endif; ?> 
```

任何人都可以提出解决这个问题的建议....

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:02:12.210

确保您的子类别已将“是锚”设置设置为“是”。因为 magento 默认有这个过滤器。第二件事将一些产品分配给类别和子类别，然后再次检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:25:32.770

看看[Mage_Catalog/Mage_Catalog_Block_Navigation::renderCategoriesMenuHtml](http://docs.magentocommerce.com/Mage_Catalog/Mage_Catalog_Block_Navigation.html#renderCategoriesMenuHtml)方法。像这样的东西应该显示所有类别：

```
<?php echo $this->getLayout()->createBlock('catalog/navigation')->renderCategoriesMenuHtml(); ?> 
```

如果您没有看到子类别，请确保它们没有被 CSS 隐藏。

# css - IE 8 圆角问题

> ID：14624440
> 
> 赞同：0
> 
> 时间：2013-01-31T11:17:17.697
> 
> 标签：css, internet-explorer-8, css3pie

我一直在努力解决 IE8 问题，遇到了圆角这个问题，除了 IE8，所有浏览器都会接受边框半径。

```
font-size: 12px;
margin-left: 7px;
margin-top: -13px;
    border-radius: 10px 10px 10px 10px / 5px 10px 5px 10px; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:21:42.790

经过长时间的努力，我解决了这个问题，

下载：[http ://css3pie.com/](http://css3pie.com/)

在 CSS 中使用它如下：

字体大小：12px；

```
enter code here
     -webkit-border-radius: 5px; /* Chrome */
     position: relative;
     z-index: 1;
     border-radius: 5px; /* CSS3 */
    -moz-border-radius: 5px; /* Mozilla */
     behavior: url(http://dev.intervalorders.com/pie/PIE.php); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:19:40.827

`border-radius`IE8 不支持： http: [//caniuse.com/#feat=border-radius](http://caniuse.com/#feat=border-radius)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T07:44:30.867

为什么每个人都写“IE或IE8不支持边框半径”等......？IE9 支持border-radius，低版本的IE 支持带有PIE 的border-radius，这个主题是关于PIE 而不是IE8 或更早版本默认支持border-radius。

* * *

并回答问题：

```
-webkit-border-radius: 6px 6px 6px 6px; // simply "6px" is ok too as in another CSS function
-moz-border-radius: 6px 6px 6px 6px; // simply "6px" is ok too as in another CSS function
border-radius: 6px 6px 6px 6px; // simply "6px" is ok too as in another CSS function
behavior: url(funkce/PIE.php); //change link on your local folder where you have PIE.php (in this file is include PIE.htc that alow you use PIE without change .htacces file. For that you must have PIE.php file and PIE.htc file too.) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T11:23:53.923

**Internet Explorer 不支持边界半径**。但是您可以通过实施一些技巧来实现它。检查此[链接](http://jonraasch.com/blog/css-rounded-corners-in-all-browsers)以获取帮助。

# ruby - 使用ruby中的archive-zip解压缩时nil的未定义方法“new”：NilClass错误

> ID：14624443
> 
> 赞同：2
> 
> 时间：2013-01-31T11:17:24.030
> 
> 标签：ruby, ruby-on-rails-2

我正在使用 archive-zip gem 来解压缩 ruby​​ 代码中的 zip 文件，以便在调度程序任务中使用。有时它工作正常，但有几次我在 Archive:zip 行中解压缩时收到“nil:NilClass 的未定义方法‘新’”错误。

代码片段是

```
require 'archive/zip'

Dir.foreach("#{Rails.public_path}/#{zip_folder}/") do |item|

Archive::Zip.extract("#{Rails.public_path}/#{zip_folder}/"+ item, "#{Rails.public_path}/#{zip_folder}/inspected/", :password => 'password')

end 
```

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T07:19:39.480

问题是使用另一个 Java 库进行压缩的 zip 文件与 Ruby Unzip 库不兼容。因此创建了另一个 API 以使用相同的 Java 库进行解压缩。

# javascript - 从网页访问 Firefox about:config 属性

> ID：14624446
> 
> 赞同：0
> 
> 时间：2013-01-31T11:17:27.593
> 
> 标签：javascript, firefox, browser-plugin

是否可以从“unprivilegied”（如：从 http:// ... /something.html 加载）脚本访问（以只读模式）存储在“about:config”属性中的值？

更具体地说，我看到下一个 ff（19？）将默认启用“功能”点击播放（有关说明，请参见[此处](https://blog.mozilla.org/security/2013/01/29/putting-users-in-control-of-plugins)）。

有没有办法以编程方式提前知道浏览器上的标志是否为真？我们使用自定义插件，需要处理自定义“弹出窗口”来指导用户有关该功能以及如何加入白名单。不，我的用户不够聪明，无法识别地址栏右上角的默认 ff “已阻止插件”徽标）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:07:14.897

这不能从非 chrome 代码访问。即使它是（例如来自扩展），您也不应该依赖它，因为这可能不是触发计划更改的设置。

您可以通过以下方式区分未安装的插件（请参阅 参考资料`navigator.plugins`）和其他情况

*   定期测试它的可脚本性或
*   加载时将插件调用到页面脚本中

...并据此假设*“加载失败或被阻止”*。

# javascript - 具有数字类型而不是对象的 jqGrid userData

> ID：14624450
> 
> 赞同：1
> 
> 时间：2013-01-31T11:17:29.533
> 
> 标签：javascript, jquery, jqgrid

只是想在这里确认一下。是否可以直接将 jqGrid 的 userData 与 javascript 类型一起使用（而不是使用带有字段的对象）？

如果我修改 jqGrid 文档中的[示例](https://www.google.com/url?url=http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aretrieving_data#user_data&rct=j&q=jqgrid%20userdata&usg=AFQjCNHLbZDDPmOk8Kn0IZHJVCy9cqk-Zg&sa=X&ei=RVEKUeSRIIjB0QXy7oGIDw&ved=0CGEQygQwAw&cad=rja)，我想将此 json 返回给 jqGrid：

```
{ 
  total: "xxx", 
  page: "yyy", 
  records: "zzz", 
  userdata: 0, 
  rows : [ 
    {id:"1", cell:["cell11", "cell12", "cell13"]}, 
    {id:"2", cell:["cell21", "cell22", "cell23"]}, 
    ... 
  ] 
} 
```

并有`jQuery("grid_id").jqGrid('getGridParam', 'userData')`回报`0`。

目前它似乎返回一个空对象`{ }`。

我使用 jqGrid 4.4.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:42:37.803

`userdata`jqGrid 的 JSON 输入的一部分应该是**object**。如果您需要在内部返回标量，`userdata`则应使用类似

```
"userdata": { mycounter: 0 } 
```

然后使用

```
var userdata = $("#grid_id").jqGrid("getGridParam", "userData");
if (userdata) {
    alert(userdata.mycounter);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:43:20.027

好的，经过一番探索，问题似乎出在值 0 上。其他值（我尝试 1）恢复正常，但是当它为 0 时，我得到 {}。

我还尝试将阅读器更改为使用函数而不是字段名称：

```
jsonReader: {
  ...
  userdata: function(json) { return json.response.userdata; },
  ...
} 
```

但是行为是完全一样的： {} 当值是 0 时， 1 当它是 1 时。

我也更新到 4.4.4 但它并没有改变它。

我不知道这是否属于错误或未记录的限制，但我将返回一个带有数字字段而不是数值本身的对象，它将解决问题。

# java - 在 Java EE 应用程序中显示错误消息时出现意外结果（字段为空时没有错误）

> ID：14624455
> 
> 赞同：2
> 
> 时间：2013-01-31T11:17:36.983
> 
> 标签：java, jsp, jakarta-ee, jstl

我正在用 Java-EE 编写一个 Web 应用程序，当我尝试在用户输入上显示错误时，我发现自己得到了一个非常意外的结果。

该应用程序基于 JSP/Servlet/Form/Bean 模型构建。基本上，JSP 将数据存储在请求中，并将其传输到 servlet。然后 servlet 将请求原始传输到表单，然后读取数据，执行必要的检查并将 bean 返回给 servlet。

大多数字段必须具有特定值，其他一些字段必须简单地为非空。

我已经编写了错误检测代码来保护输入，但是我发现自己得到了一个非常奇怪的结果：

*   当字段为非空但值不正确时（例如，位于 00:00-23:59 范围之外的一小时），它会返回正确的错误以及错误消息，存储在 HashMap 中，并且我可以在我的 JSP 中访问它。
*   但是，当该字段为空时，它返回消息，可能也将其存储在 HashMap 中（我知道这一点是因为`${!empty errors.dataErrors}`测试返回 true 并且错误字段显示在我的 JSP 中）但是无法访问错误

我已经搜索了我的代码，但仍然找不到错误的来源。如果有人知道问题出在哪里，这里是它的片段

servlet 中的 doPost 方法：

```
public void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
{
    NewBookingForm form = new NewBookingForm();
    Booking booking = form.registerBooking(request);
    String VUE;

    request.setAttribute("booking", booking);
    request.setAttribute("errors", form);

    this.getServletContext().getRequestDispatcher(VIEW).forward(request, response);
} 
```

地图是 NewBookingForm 类中的一个字段，在这样的`registerBooking`方法之外声明和初始化`private Map<String,String> dataErrors = new HashMap<String,String>();`，它有一个私有 setter（用于在类内访问）和一个公共 getter（用于在 Servlet 和 JSP 中访问）

在表单类中，我使用这个函数来获取字段值：

```
private static String getFieldValue(HttpServletRequest request, String fieldName)
{
    String value = request.getParameter(fieldName);
    if (value == null || value.trim().length() == 0){return null;}
    else{return value;}
} 
```

在我的方法开始时通过一系列调用获取值后`String fieldDepartureStation = getFieldValue(request, FIELD_DEPARTURE_STATION);`，然后我使用这样的 try/catch 块检查它们

```
try
{validation.departureStation(fieldDepartureStation);}
catch(Exception e)
{setDataErrors(FIELD_DEPARTURE_STATION, e.getMessage());} 
```

如果数据必须具有特定的值范围或必须简单地为非空，则验证类中的验证方法会有所不同。

在前一种情况下，它们是这样的：

```
public void departureTime(String time) throws Exception
{
    if (!validationRETime(time)) { throw new Exception("Please input a time with the hh:mm pattern"); }
}
....
private boolean validationRETime(String strTime)
{
    String regExp = "^([01][0-9]|2[0-3])[:][0-5][0-9]$"; // hh:mm
    if (strTime.matches(regExp))
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

而在后一种情况下，它们只是

```
public void departureStation(String station) throws Exception
{
    if (station.equals(null)) { throw new Exception("Please input a departure station"); }
} 
```

最后，在我的 JSP 中，我使用以下代码来显示错误：

```
<c:if test="${!empty errors.dataErrors}">
     <p>Errors</p>
     <c:forEach items="${errors.dataErrors}" var="message">
           <p><c:out value="${message.value}" /></p>
     </c:forEach>
</c:if> 
```

当我故意输入不正确的值时，它确实会显示错误段落，但是`<c:forEach>`当错误字段为非空但值不正确时，它只会循环并显示错误消息。因此，对于一个只需要为非空的字段，我永远不会收到消息（但我确实收到了错误）

这些都是我能想到的可能出错的事情，但我还没有发现他们在哪里做的，如果有人可以帮助我，我会很高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:35:23.890

问题出在您的`departureStation`方法中：-

```
public void departureStation(String station) throws Exception
{
    if (station.equals(null)) { 
        throw new Exception("Please input a departure station"); 
    }
} 
```

您的`null`价值测试本身会触发`NPE`. 因此，一旦`station.equals(null)`执行 for `station = null`，`NPE`就会引发异常，然后将其传播给调用者。因此，您的`if`块甚至不会被执行。因此，您并没有`Exception`像您想的那样抛出。

现在，还要注意，`NPE`抛出的 不包含任何`message`. 所以，`e.getMessage()`会回来`null`的。

现在，让我们回到调用者：-

```
try
{validation.departureStation(fieldDepartureStation);}
catch(Exception e)
{setDataErrors(FIELD_DEPARTURE_STATION, e.getMessage());} 
```

在这里，您正在`Exception Handling`通过使用 catch 块进行世界上最大的犯罪`Exception`。由于`Exception`是所有异常的超类，它将以相同的方式处理所有异常。因此，它消耗`NPE`，并将其传递给`setDataErrors()`。

所以，你当然会得到错误，但是，值`e.getMessage()`将是`null`. 这就是为什么您没有看到任何消息的原因。你甚至可以通过上面`logging`的值来`e.getMessage()`测试它`catch block`。

* * *

**解决方案 ？？**

`null`只需用这个更改您的支票：-

```
if (station == null) { 
    throw new Exception("Please input a departure station"); 
} 
```

一切都会好起来的。我认为，您必须在所有方法中进行此更改。始终执行`null check`using`==`运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:28:30.427

```
public class Test {

    public static void main(String[] args) {
        Test  c = new Test ();
        try {
            c.departureTime("30:30");
        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
        try {
            c.departureTime(null);
        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
    }

    public void departureTime(String time) throws Exception {
        if (!validationRETime(time)) {
            throw new Exception("Please input a time with the hh:mm pattern");
        }
    }

    private boolean validationRETime(String strTime) {
        String regExp = "^([01][0-9]|2[0-3])[:][0-5][0-9]$"; // hh:mm
        if (strTime.matches(regExp)) {
            return true;
        } else {
            return false;
        }
    }
} 
```

您将通过运行上面的代码找出您的问题。简而言之，您需要确保 exp.getMessage() 始终具有价值。要解决此问题，您可能需要调整您的离开时间（）方法以提供更细粒度的异常处理。

# android - 使用 EWS 从 Exchange 服务器发送邮件

> ID：14624456
> 
> 赞同：2
> 
> 时间：2013-01-31T11:17:39.447
> 
> 标签：android, jar, exchangewebservices, ewsjavaapi

我按照[此链接](https://android.stackexchange.com/questions/28952/android-mail-client-using-exchange-web-services)生成 jar 文件。我将此添加到我的项目中。然后有一个简单的代码来发送邮件：

```
public void mailSend() {
        ExchangeService service = new ExchangeService();
        ExchangeCredentials credentials = new WebCredentials(
                "email", "$*pass!");
        service.setCredentials(credentials);

        String host = "host";
        try {
            service.setUrl(new java.net.URI("https://" + host
                    + "/EWS/Exchange.asmx"));

            service.setTraceEnabled(true);

            EmailMessage msg = new EmailMessage(service);
            msg.setSubject("Hello world!");
            msg.setBody(MessageBody
                    .getMessageBodyFromText("Sent using the EWS Managed API."));
            msg.getToRecipients().add("email");
            msg.send();
            Log.i("Msg","SEND   ");
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
} 
```

问题是它显示 jar 文件没有源附件。因此我得到了错误`no definition found for class ExchangeService`。这应该是生成的 jar 文件的一部分。在导出为 jar 文件时，我确保单击了 src 文件夹。

# c# - System.Data.SQLite 参数

> ID：14624462
> 
> 赞同：0
> 
> 时间：2013-01-31T11:17:53.370
> 
> 标签：c#, sqlite

我有以下代码创建一个`SQLiteCommand`

```
_deleteMergeWithBoth = new SQLiteCommand("delete from block where offset = ?1; delete from chunk where offset = ?1; delete from chunk where offset = ?2; update chunk set length = ?3 where offset = ?4", _db);
for (var i = 1; i <= 4; i++) _deleteMergeWithBoth.Parameters.Add(new SQLiteParameter(i.ToString(CultureInfo.InvariantCulture), DbType.Int64));
_deleteMergeWithBoth.Prepare(); 
```

命令中的占位符（有 4 个语句）采用 ?x 格式，其中 x 是某个数字。

该命令按原样运行良好。但是，如果我加入中间的两个语句，使它们成为

```
delete from chunk where offset in (?1,?2) 
```

我突然得到命令中提供的参数不足。在单个命令中使用多个语句时，我遇到了参数问题。在那种情况下，我只是在使用 ? 作为占位符。这是通过使用编号参数解决的。然而，在这种情况下，我不知道我做错了什么。占位符清楚地引用了 ?2 并且我确实有一个与命令关联的名为“2”的参数

编辑：我还尝试使用不同格式的占位符，例如`@parametername`因为我认为可能是因为数字。我仍然遇到同样的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:26:12.060

我通过使用格式的命名参数来解决它，`@X`其中 X 是一个字母。我以为我以前试过这个，但似乎我第一次犯了一些错误（我不知道是什么让它第一次失败）。这次完美运行

# ruby-on-rails - 如何在邮件中指定标题[To]？

> ID：14624464
> 
> 赞同：3
> 
> 时间：2013-01-31T11:17:55.947
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, actionmailer, mailnotifier

我正在发送电子邮件

```
mail from: from_email, to: members_email_id, subject: mail_subject, :reply_to => to_email 
```

邮件正在发送，但我想自定义“收件人”，而不是用户电子邮件，我想在“收件人”中显示“xyz@abc.com”。

我们可以使用 headers['To'] 来改变它吗？，例如“ headers['Delivered-To'] = to_email” 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:01:58.053

这里的问题是什么？您想通过 members_email_id 向某人发送电子邮件，但想在收件人字段中显示“xyz@abc.com”？

to: 是电子邮件将被发送到的地方，因此除非您希望将其发送到 xyz@abc.com，否则它将无法正常工作。

所有标题都可以设置为 headers[field] = value 或哈希 headers({'field'=>'value','field'=>'value'})

# x11 - 访问窗口内小部件层次结构

> ID：14624467
> 
> 赞同：0
> 
> 时间：2013-01-31T11:18:03.167
> 
> 标签：x11

[Editres](http://www.rahul.net/kenton/editres.html)是一个非常强大的程序，用于在应用程序窗口中显示甚至修改小部件的属性。我相信它与 X 资源交互。然而，很少有程序真正理解它的协议（例如，Firefox 不理解）。是否有类似的程序或命令行工具用于在任何给定窗口中显示小部件层次结构？类似的程序`xprop`可以在 X Window System 中的任何窗口上运行，但它（据我所知）只检索有关整个窗口的信息，而不是其中的小部件树。

就上下文而言，我正在使用 Red Hat Enterprise Linux 上的 GNOME 桌面环境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:56:07.650

许多现代小部件工具包并不为每个小部件使用 X 窗口，而是将小部件作为库的一部分手动管理。因此，没有像使用传统 X 程序那样拦截的协议。不过，这些工具包确实以其他方式公开了小部件树信息。GTK 2 有[https://live.gnome.org/Accerciser](https://live.gnome.org/Accerciser)，它似乎适用于 GTK 3。

# css - Google 字体 API 使用限制

> ID：14624469
> 
> 赞同：2
> 
> 时间：2013-01-31T11:18:03.950
> 
> 标签：css, webfonts, google-webfonts, google-font-api

我正在研究在高流量网站上使用非标准网络字体的最佳方式。

实际上，这取决于我们是使用 Typekit / Google 之类的服务还是自己提供字体。

Typekit 的使用条款很明确，但在谷歌上我找不到任何信息：

*   正常运行时间
*   我每天/每月可以请求多少次字体

有没有人有这方面的任何信息，或者在流量很大的网站上使用的经验？服务条款只是将您指向 Google 的通用 API 服务条款。

在这些方面，它指出：

> API 限制
> 
> Google 可能会自行决定限制您可以发出的 API 请求的数量。您同意此类限制，并且不会试图规避此类限制。

但这非常广泛-似乎没有任何迹象表明限制是什么，除了它*可能*是有限的。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-01T09:13:07.463

对于“***业务关键站点***”，您始终可以使用adobe的[typekit](http://typekit.com/)
来 选择自己托管字体...再次阅读您在上面引用的段落：

> 您同意此类限制，并且不会试图规避此类限制。

# c# - 如何创建 LiveConnectClient 的实例？

> ID：14624471
> 
> 赞同：3
> 
> 时间：2013-01-31T11:18:10.993
> 
> 标签：c#, .net, windows-8, windows-store-apps

```
LiveConnectClient liveClient = new LiveConnectClient();   // ERROR 
```

`LiveConnectClient`构造函数需要一个`LiveConnectSession`变量，但`LiveConnectSession`没有公共构造函数，并且在没有初始化的情况下甚至无法分配引用。

如何解决上述错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:20:41.850

抱歉之前的错误答案；我假设太多了。因此，该错误仅意味着您不打算以这种方式创建 LiveConnectClient 。

有关一些示例代码，请参阅[此 Microsoft 帖子](http://msdn.microsoft.com/en-us/library/live/hh243649.aspx)，以及包含一些类似代码[的此帖子。](https://stackoverflow.com/questions/13726042/store-liveconnectsession-in-wp7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:37:28.157

如您所见，需要使用有效的 LiveConnectSession 创建 LiveConnectClient。这旨在与 Live SDK 中的 SignInButton 一起使用。安装 Live SDK 后，将 SignInButton 添加到 XAML 并在后面的代码中处理 SessionChanged 事件。

SessionChanged 事件中包含的 LiveConnectSessionChangedEventArgs 参数包含可用于创建 LiveConnectClient 的 LiveConnectSession。只需在应用程序的整个生命周期内保留该会话即可。

干杯劳伦特

# android - phonegap - sqlite 或索引数据库？

> ID：14624482
> 
> 赞同：19
> 
> 时间：2013-01-31T11:18:36.193
> 
> 标签：android, iphone, cordova, windows-phone-8, web-sql

我是从 phonegap 开始的网络开发人员。我需要为 iPhone、android 和 Windows Phone 8 创建一个应用程序。
我需要在本地存储一些数据（对于 localStorage 来说太大）。
我不知道女巫的解决方案是最好的：

1.  Phonegap 提供存储（基于 WebSQL - 已弃用），但 windows phone 不支持。有什么插件可以填补这个空白吗？
2.  我读过Indexed DB，但我以前没有使用过它，它对我来说不是很直观。我不确定它是否在所有平台上都得到完全支持？我基于（[http://blog.nparashuram.com/2012/10/indexeddb-example-on-cordova-phonegap_12.html](http://blog.nparashuram.com/2012/10/indexeddb-example-on-cordova-phonegap_12.html)）
3.  或者，也许我可以在 windows phone上使用 phonegap 插件[https://github.com/marcucio/Cordova-WP-SqlitePlugin ，](https://github.com/marcucio/Cordova-WP-SqlitePlugin)[在 android 和 iphone 上使用 https://github.com/marcucio/Cordova-SQLitePlugin。](https://github.com/marcucio/Cordova-SQLitePlugin%20for%20android%20and%20iphone.). 然后我的代码在所有平台上都是一样的。

以前有人创建过这样的应用程序吗？我会很感激任何解决方案或想法。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-31T11:57:55.380

Cordova WP8 仅支持 IndexedDB。仅限 iOS 和 Android WebSql。由于 WebSql 已被弃用（我知道有多少人喜欢/使用它，并且同意在许多情况下 WebSql 非常酷），我建议继续使用 IndexedDb 并为 Android/iOS 使用以下 polyfill。

[用于 IndexedDB 的 PhoneGap polyfill，使 IndexedDB API 可以与 WebSQL 一起使用](http://nparashuram.com/IndexedDBShim/)

[例子](http://blog.nparashuram.com/2012/10/indexeddb-example-on-cordova-phonegap_12.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-14T01:53:41.430

索引数据库 -

*   它与许多类型的流行移动操作系统和版本不兼容
*   它仅与非常特定版本的移动操作系统兼容
*   开发人员不能将 SQL 与 IndexedDB 一起使用。SQL 语句可用于 SQLite 和 WebSQL
*   大多数开发人员都尽可能地避免使用 IndexedDB

WebSQL -

*   它已被 W3C 弃用，这意味着它不再被维护或开发
*   它需要另一个插件才能使移动应用程序能够与流行的移动操作系统（例如 Google Android 和 Apple iOS）一起使用

SQLite -

*   它获得了谷歌的奖项
*   SQLite 有它的官方网站。IndexedDB 和 WebSQL 没有
*   在 Google 上，SQLite 返回 180 万条结果。WebSQL 返回的结果略少于 700K，IndexedDB 返回的结果为 282K。
*   开发者可以在 SQLite 中使用常用的 SQL 语句
*   它与所有流行的移动操作系统的大多数版本兼容，例如 iOS 和 Android

如果你想要一个关于 SQLite 的快速教程

[使用 Android 和 Phonegap 存储 SQLite 数据库](https://stackoverflow.com/questions/19570868/storage-of-sqlite-database-using-android-and-phonegap/25518453#25518453)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-18T13:26:57.637

最新更新（2014 年 5 月 5 日）： [MS Open Tech 的新跨平台 Cordova WebSQL 插件](http://channel9.msdn.com/Blogs/Interoperability/New-Cross-Platform-Cordova-plugin-by-MS-Open-Tech-WebSQL)

`Microsoft Open Technologies is publishing the new open source` [WebSQL 插件](https://github.com/MSOpenTech/cordova-plugin-websql) `for Apache Cordova and PhoneGap. This plugin allows developers to integrate a persistent SQL-based local storage solution in their Cordova apps using the exact same JavaScript code across Android, iOS, Windows Phone and Windows Store.`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-08T22:27:24.707

**LocalForage**似乎是最好和最新的解决方案： [https](https://github.com/localForage/localForage) ://github.com/localForage/localForage （1000 次提交，83 位贡献者）

对于不支持的导航器，它具有后备功能。我还没有尝试过（通过phonegap），但我会尽快给你反馈；）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-14T10:30:42.730

使用我的开源库 ydn-db 怎么样？它在这些之上有非常好的抽象层。

## 编辑：

*   Android 待办事项应用程序：[https ://bitbucket.org/ytkyaw/android-todo/wiki/Home](https://bitbucket.org/ytkyaw/android-todo/wiki/Home)
*   YDN-DB 项目回购：[https ://bitbucket.org/ytkyaw/ydn-db/wiki/Home](https://bitbucket.org/ytkyaw/ydn-db/wiki/Home)
*   API 文档：[http ://dev.yathit.com/api-reference/ydn-db/storage.html](http://dev.yathit.com/api-reference/ydn-db/storage.html)

# php - codeigniter 视图中的变量值

> ID：14624484
> 
> 赞同：3
> 
> 时间：2013-01-31T11:18:38.413
> 
> 标签：php, codeigniter

我正在尝试将变量从控制器传递到视图。我有一些代码，但为了理解问题是什么，我把它简单化了。这是我的控制器：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

    class Welcome extends CI_Controller {

        $p=2;

        public function index()
        {
            $this->load->view('welcome_message',$p);
        }
    }

?> 
```

变量 p 在视图中声明。

```
<div id="container">
    <h1>Welcome to CodeIgniter!</h1>
    <?php echo $p?>
</div> 
```

当我尝试显示 $p 值时，我得到了错误：

**错误**

```
Parse error: syntax error, unexpected '$p' (T_VARIABLE), expecting function (T_FUNCTION) in C:\wamp\www\..\application\controllers\welcome.php on line 20 
```

怎么了？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T11:25:17.600

首先需要将变量作为数组传递（[查看文档](http://ellislab.com/codeigniter/user-guide/general/views.html)）。

```
$data = array(
               'title' => 'My Title',
               'heading' => 'My Heading',
               'message' => 'My Message'
          );

$this->load->view('welcome_message', $data); 
```

$p 已被声明超出函数的范围，所以要么；

```
public function index() {
   $p = 2;
   $this->load->view('welcome_message',array('p' => $p));
} 
```

或者

```
class Welcome extends CI_Controller {

public $p=2;

public function index()
{
    $this->load->view('welcome_message',array('p' => $this->p));
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:24:53.560

您应该`$p`在控制器的构造函数中声明：

```
class Welcome extends CI_Controller {

    function __construct() {
    parent::__construct();
        $this->p = 2;
    }

    public function index()
    {
        $data['p'] = $this->p;
        $this->load->view('welcome_message',$data);
    }
} 
```

?>

# php - 如何使用 PHP [MWS] 从 CSV 文件将产品导出到亚马逊商店？

> ID：14624487
> 
> 赞同：2
> 
> 时间：2013-01-31T11:18:45.323
> 
> 标签：php, amazon-mws

我想使用 PHP 中的 MWS 将出口产品从 csv 文件上传到亚马逊商店。我已经在亚马逊卖家中心的“添加产品”部分使用 CSV 文件上传了产品。因为该产品已成功添加。但我想使用任何 MWS PHP API 从我的站点执行此操作。执行系统的确切 API 是什么？有谁知道如何在 PHP 中使用 MWS 来执行此功能。我附上了包含一种产品的示例 CSV 文件。[示例文件](https://www.dropbox.com/home?select=test.csv)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:30:31.703

您将需要使用 MWS API 的 SubmitFeed() 调用，它允许 XML 上传以及“平面文件”上传。您将需要使用 MWS 开发人员站点上提供的 PHP 示例代码，或者准备好对请求详细信息进行大量修改，以便获得正确的签名。

但请注意，仅调用 SubmitFeed() 并不能解决问题。一旦您调用 SubmitFeed，您将立即收到文件是否被接受的响应。如果它被接受，它将被放入一个队列中，您必须通过反复调用 GetFeedSubmissionList() 来等待它被处理，直到它的状态发生变化。

只有在它被处理之后，你才能调用 GetFeedSubmissionResult() 来查看它是否有任何错误，如果有，是哪个。

亚马逊卖家支持博客（现已不复存在）有一个很好的图表显示了这个过程：

[![在此处输入图像描述](../Images/06fad15e9558e2b1567365ad926a8ee9.png)](https://i.stack.imgur.com/FkgW1.png)

根据您要提交的数据的确切性质，您可能需要多次执行上述过程：XML 格式（以及在某种程度上是平面文件提交）需要不同的产品数据、价格、库存信息提要和图像。

有关这些提要的确切性质的更多详细信息，请参阅[MWS 提要 API 参考](http://docs.developer.amazonservices.com/en_US/feeds/index.html)。除了许多其他更详细的信息外，它还告诉您哪些类型的提要可用（请参阅“提要类型枚举”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-31T10:42:17.773

```
$dom = new DOMDocument();
   $dom->loadXML($response->toXML());
   $dom->preserveWhiteSpace = false;
   $dom->formatOutput = true;
   echo $dom->saveXML(); 
```

使用此代码将结果保存到 XML 文件中......

# gwt - 使用 GWT 插件 Eclipse 的传递依赖

> ID：14624488
> 
> 赞同：0
> 
> 时间：2013-01-31T11:18:46.693
> 
> 标签：gwt, classpath, web-inf

我有项目 A，它是一个带有 RPC 内容的 GWT 项目。服务器部分依赖于项目 B 并且该项目 (B) 依赖于一些第三方 ABC.jar

当我使用 Run/Debug 运行 GWT 项目时，ClassPath 不包含 ABC'jars - 只有来自项目 A 和 B 的已编译类位于 WEB-INF/lib 文件夹和 GwtServlet.jar 中。

任何帮助都会非常受欢迎..

ps：我们没有使用 Maven，也不会在不久的将来使用它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:24:52.300

将 ABC.jar 放入 war/WEB-INF/lib 文件夹

[https://developers.google.com/web-toolkit/doc/latest/DevGuideOrganizingProjects](https://developers.google.com/web-toolkit/doc/latest/DevGuideOrganizingProjects)

我不能在项目中使用 Maven 来解决依赖关系，也不想手动管理它们 Apache Ivy (+Ant) 可能是另一种选择。

# android - 性能：如何防止 requestLayout() 布局整个层次结构

> ID：14624493
> 
> 赞同：10
> 
> 时间：2013-01-31T11:19:00.703
> 
> 标签：android, performance, layout

我有一个非常复杂的 android 应用程序。已经尽可能扁平化视图层次结构，但我仍然在应用程序中存在滞后。例如，有一个菜单，其中的条目通过设置高度来折叠/展开`ValueAnimator`。通常，动画第一次运行时会有一点延迟，而在第一次运行后则平滑。

我注意到，当我在 Menu-Item 上调用“requestLayout()”时，Android 似乎在整个层次结构中进行了布局传递和多个测量传递。

*   因为我知道虽然 Menu-Item(View) 改变了高度，但 Menu(View) 本身没有，有没有办法告诉应用程序？
*   我能否以某种方式执行似乎滞后于自己的第一次通过，以便它发生在应用程序启动之后而不是在第一次触摸输入时？

这是我正在做的动画的草图：

![在此处输入图像描述](../Images/00420112b671eff2e7a756fa2ef2b794.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-18T23:09:43.270

我不确定为什么在您的动画中触发布局，但我将抽象地回答您的问题。

如果您在动画中调用 requestLayout（直接或间接），那么您做错了。

requestLayout，为了正确性和安全性，在视图层次结构上进行完整的视图遍历 b/c 从概念上改变视图层次结构中节点的边界框可能会导致任何其他节点的边界发生变化。并非总是如此，但通常它可以，这就是为什么 requestLayout 是一个完整的遍历。

所有这一切只是另一种说法 requestLayout 会从你的 16.6 毫秒帧时间槽中消耗掉时间并使你的动画变得不稳定。这对于具有许多RelativeLayouts的深层和复杂层次结构尤其不利，这些结构在每个级别内部进行两次传递（因此可能导致子树上的指数传递）

现在，如果您想在尺寸变化中设置动画，请在硬件层中使用 setScale。并在动画结束时愉快地调用 requestlayout 并销毁图层（以释放内存）。

因为它是一个层，所以在动画中重复调用 setScale 会导致 GPU 上的纹理发生变化，从而完全绕过视图层次结构的遍历机制。这应该使它像黄油一样光滑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:31:40.380

你的问题看起来像我的：[只重新布置孩子而不是所有的树](https://stackoverflow.com/questions/10121742/only-relayout-children-and-not-all-the-tree)

首先，您可以尝试避免视图的复杂视图层次结构。如果可能，请分解不依赖于另一个视图的视图。

执行动画时，请避免任何布局请求。如果布局请求未决，请延迟开始动画。

如果可能的话，使用硬件层来制作动画（也许 Android 默认使用它`ValueAnimator`）

# rad - 在 HTML5 builder 中追加数据库记录致命错误

> ID：14624498
> 
> 赞同：0
> 
> 时间：2013-01-31T11:19:38.743
> 
> 标签：rad, html5builder

我的应用程序中有一些代码：

```
 $dmMain->tblOrgList->append(); 
```

这段代码是用自动完成编写的，所以一切都是正确的。但是，当我尝试执行此代码时，出现错误：

> 致命错误：在第 18 行的 C:\Users\ASAP\Documents\HTML5 Builder\Projects\VitoOrgList\index.php 中的非对象上调用成员函数 append()

有人可以建议，我在哪里可以找到麻烦？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:07:35.833

我找到了解决方案。真的，我没有丰富的 PHP 经验 :-]

我刚刚在函数体中调用 $dmMain 方法之前添加了：

```
 global $dmMain; 
```

# c++ - C ++在访问持有此成员的对象时无法访问对象成员

> ID：14624504
> 
> 赞同：0
> 
> 时间：2013-01-31T11:19:54.670
> 
> 标签：c++, pointers, members

我有以下代码片段：

```
A.h

include B.h

class A
{
public:
    void createB();
    B* getB();
private:
    B *b;
};

A.cpp

void A::createB()
{
    b = new B();
}

B* A::getB()
{
    return b;
}

Main.cpp

int main()
{
    int n = 3;

    A *a_array = new A[n];

    for ( int i = 0; i < n; i++ ) {

        A *a = new A();

        a_array[i] = *a;
    }

    for ( int i = 0; i < n; i++ ) {

        A a = a_array[i];

        a.createB();
    }

    a_array[0].doStuff();   // OK

    a_array[0].getB();  // returns NULL
}

Output:

    A created
    A created
    A created
    B created
    A destroyed
    B created
    A destroyed
    B created
    A destroyed 
```

似乎 A 对象在循环中被破坏，但我可以在没有循环的情况下访问它们，但无法访问 A 的对象成员。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:22:18.607

问题在于，在第二个循环中，您在数组中相应元素的副本上调用 createB `a_array`。尝试将循环更改为：

```
for ( int i = 0; i < n; i++ ) {

    A& a = a_array[i];

    a.createB();
} 
```

另请注意，您的程序中有很多内存泄漏 - 您分配了很多您从未释放过的东西。

在第一个循环中，无需在将 a 分配给数组中的元素之前动态分配它。只需这样做（正如皮特贝克尔指出的那样）：

```
for ( int i = 0; i < n; i++ ) {
    a_array[i] = A();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:28:53.100

```
int main()
{

int n = 3;

A *a_array = new A[n];

for ( int i = 0; i < n; i++ ) {

    A *a = new A();

    a_array[i] = *a;   // here you are copying a and then causing a memleak
} 
```

你可能的意思是

```
A **a_array = new A*[n];

for ( int i = 0; i < n; i++ ) {
    A *a = new A();
    a_array[i] = a;   // now array points to instance of a
} 
```

现在当你引用指针时：

```
for ( int i = 0; i < n; i++ ) {
  A* a = a_array[i];
  a->createB();
}

a_array[0]->doStuff();   // OK
a_array[0]->getB();  // returns NULL
... 
```

不要忘记删除 a 的数组和实例。

但是，您应该看看`vector<>`and `array<>`，使用 STL 容器更好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T11:31:04.927

第二个 for 循环中的 a a = a_array[i] 在堆栈上创建一个副本，该副本在循环范围之后再次被删除。循环之后的 a_array[0] 访问则指向另一个对象。

# sql-server - 授予对 Reporting Services 的访问权限以创建自定义角色

> ID：14624507
> 
> 赞同：1
> 
> 时间：2013-01-31T11:19:58.777
> 
> 标签：sql-server, sql-server-2008, reporting-services

见图片。

dba 如何授予对所示屏幕的访问权限。

这适用于使用其 AD 凭据访问特定服务器上的“报告服务”的普通用户。这样一般用户就可以为 SSRS 创建新的“角色”。目前只有管理员有权访问。

![在此处输入图像描述](../Images/e290429a5f02048089e4fc5ee12091d6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:35:10.250

看起来默认分配给*系统管理员* **系统角色**：

[连接到 Management Studio 中的报表服务器](http://msdn.microsoft.com/en-us/library/ms159797%28v=sql.100%29.aspx)。

![在此处输入图像描述](../Images/77cfcd93a580092b9f8eb9499a196e76.png)

因此，将用户/组添加到该角色应该允许他们连接并创建新角色。他们将是报表服务器本身的管理员，但至少不是底层服务器的管理员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T12:37:43.443

您显示的图像属于与管理 sql 数据库的 SQL Server 的连接。

在大多数情况下，报表服务安装在 SQL SERVER 上，但不是强制性的。Reporting Services 服务器可以是 SQL Server 之外的专用服务器。

您显示的图像是 SQL SERVER 的连接窗口，有两个执行登录的选项：

1.  Windows 身份验证 - （使用已登录的用户到计算机）DBA 需要允许该用户或该用户所属的组连接 SQL 服务器。此外，他需要配置对他可用的数据库。
2.  第二个选项是设置一个 SQL 用户并授予他管理数据库的权限。

[在 SQL SERVER 上设置登录](http://msdn.microsoft.com/en-us/library/aa337562.aspx)

报告服务具有报告管理器 URL，允许管理现有报告或添加新报告等。

为了允许用户访问 URL，您需要允许特定用户或组访问报表服务器管理器

[向报告经理授予权限](http://msdn.microsoft.com/en-us/library/ms156014.aspx)

**如何授予您访问数据库的权限**

1.  打开 SQL 管理工作室
2.  您的 DBA 应使用他的权限登录（sa/admin 权限）
3.  展开`"Security"`选项卡
4.  右键单击“登录”文件夹并选择`"New Login"`
5.  单击字段`"Search"`旁边的按钮`"login name:"`
6.  在文本区域中搜索您的 AD 用户名
7.  点击“确定”
8.  选择愿望主数据库
9.  在左侧面板上选择`"User Mapping"`选项
10.  选择上半部分的愿望数据库
11.  例如，在底部选择适当的权限`"db_owner"`

在此之后，您可以使用您的用户名创建数据源

它是你寻找的吗？

# android - 更改 android:minSdkVersion 无效

> ID：14624508
> 
> 赞同：2
> 
> 时间：2013-01-31T11:20:05.083
> 
> 标签：android, xml, eclipse

我正在使用 eclipse 开发一个 Android 应用程序。当我尝试运行我的项目时，我得到了 `Call requires API level 13 (current min is 8): android.view.Display#getSize`指向该行的错误`display.getSize(size);`。

所以在 AndroidManifest.xml 我做了以下更改：

```
<uses-sdk
android:minSdkVersion="13"
android:targetSdkVersion="17" /> 
```

但是，当我再次尝试运行该项目时，我仍然遇到同样的错误。目标 SDK 是`Android 4.0`. 有谁知道是什么导致了这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:32:33.870

尝试清理您的项目。如果清理后仍然显示错误，则右键单击项目转到属性> Android 选项卡并选择`Android Build target Android 3.2`. 并在执行此构建您的项目之后。我认为它应该在此之后工作。

# php - 使用 mysqli 来自数据库的单个结果

> ID：14624509
> 
> 赞同：39
> 
> 时间：2013-01-31T11:20:08.930
> 
> 标签：php, loops, mysqli

我第一次尝试使用 mySQLi。在循环的情况下我已经做到了。循环结果正在显示，但是当我尝试显示单个记录时我被卡住了。这是正在工作的循环代码。

```
<?php
// Connect To DB
$hostname="localhost";
$database="mydbname";
$username="root";
$password="";

$conn = mysqli_connect($hostname, $username, $password, $database);
?>

<?php
$query = "SELECT ssfullname, ssemail FROM userss ORDER BY ssid";
$result = mysqli_query($conn, $query);
$num_results = mysqli_num_rows($result);
?>

<?php
/*Loop through each row and display records */
for($i=0; $i<$num_results; $i++) {
$row = mysqli_fetch_assoc($result);
?>

Name: <?php print $row['ssfullname']; ?>
<br />
Email: <?php print $row['ssemail']; ?>
<br /><br />

<?php 
// end loop
} 
?> 
```

如何从第一行或其他任何内容中显示一条记录，任何记录，姓名或电子邮件，仅显示一条记录，我该怎么做？在单个记录的情况下，考虑删除所有上述循环部分，让我们显示没有循环的任何单个记录。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-01-31T11:53:52.330

如果只需要一个结果，则不应使用循环。立即获取该行。

*   如果您需要将整行提取到关联数组中：

    ```
     $row = $result->fetch_assoc(); 
    ```

*   如果您只需要一个值

    ```
     $row = $result->fetch_row();
      $value = $row[0] ?? false; 
    ```

最后一个示例将返回第一个返回行的第一列，或者`false`如果没有返回行。它也可以缩短为单行，

```
$value = $result->fetch_row()[0] ?? false; 
```

以下是不同用例的完整示例

## 查询中使用的变量

当要在查询中使用变量时，必须使用**准备好的语句**。例如，假设我们有一个变量`$id`：

```
$query = "SELECT ssfullname, ssemail FROM userss WHERE id=?";
$stmt = $conn->prepare($query);
$stmt->bind_param("s", $id);
$stmt->execute();
$result = $stmt->get_result();
$row = $result->fetch_assoc();

// in case you need just a single value
$query = "SELECT count(*) FROM userss WHERE id=?";
$stmt = $conn->prepare($query);
$stmt->bind_param("s", $id);
$stmt->execute();
$result = $stmt->get_result();
$value = $result->fetch_row()[0] ?? false; 
```

上述过程的详细解释可以在我的[文章](https://phpdelusions.net/mysqli_examples/prepared_select)中找到。至于为什么必须遵循它，在这个著名的[问题中进行了解释](https://stackoverflow.com/questions/60174/how-can-i-prevent-sql-injection-in-php)

## 查询中没有变量

在您的情况下，查询中没有使用变量，您可以使用以下`query()`方法：

```
$query = "SELECT ssfullname, ssemail FROM userss ORDER BY ssid";
$result = $conn->query($query);
// in case you need an array
$row = $result->fetch_assoc();
// OR in case you need just a single value
$value = $result->fetch_row()[0] ?? false; 
```

顺便说一句，虽然在学习的时候使用原始 API 是可以的，但考虑在未来使用一些数据库抽象库或至少一个辅助函数：

```
// using a helper function
$sql = "SELECT email FROM users WHERE id=?";
$value = prepared_select($conn, $sql, [$id])->fetch_row[0] ?? false;

// using a database helper class
$email = $db->getCol("SELECT email FROM users WHERE id=?", [$id]); 
```

如您所见，虽然辅助函数可以减少代码量，但类的方法可以将所有重复代码封装在里面，使您只编写有意义的部分——查询、输入参数和所需的结果格式（在方法名称的形式）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-31T11:32:00.070

使用 `mysqli_fetch_row()`. 试试这个，

```
$query = "SELECT ssfullname, ssemail FROM userss WHERE user_id = ".$user_id;
$result = mysqli_query($conn, $query);
$row   = mysqli_fetch_row($result);

$ssfullname = $row['ssfullname'];
$ssemail    = $row['ssemail']; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-04-29T16:01:45.657

如果您只假设一个结果，您可以按照 Edwin 的建议通过使用特定用户 ID 来执行此操作。

```
$someUserId = 'abc123';

$stmt = $mysqli->prepare("SELECT ssfullname, ssemail FROM userss WHERE user_id = ?");
$stmt->bind_param('s', $someUserId);

$stmt->execute();

$stmt->bind_result($ssfullname, $ssemail);
$stmt->store_result();
$stmt->fetch();

ChromePhp::log($ssfullname, $ssemail); //log result in chrome if ChromePhp is used. 
```

或者作为“你的常识”，它只选择一个用户。

```
$stmt = $mysqli->prepare("SELECT ssfullname, ssemail FROM userss ORDER BY ssid LIMIT 1");

$stmt->execute();
$stmt->bind_result($ssfullname, $ssemail);
$stmt->store_result();
$stmt->fetch(); 
```

***除了PHP v.5***和上面没有什么不同

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-27T16:02:46.527

而不是使用**`$row = $query->fetch();`**尝试使用：

```
$result = $query->get_result();
$row=$result->fetch_assoc(); 
```

每次您可以通过使用以下方式显示它们来检查是否从 mysql 表中获取数据：

`var_export( $row['put your column name here'] );`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-22T21:30:50.880

第一个答案将完成这项工作，但在这种情况下，您不需要循环结果。

```
$row = $result->fetch_row(); 
```

只需回显该列

```
 echo   $row['column']; 
```

这应该可以解决问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-25T12:26:06.553

## 自 PHP 8.1 起，`mysqli_result::fetch_column()`可用

您可以使用`mysqli_result::fetch_column()`从结果集中获取单个标量值。

新方法接受您要读取的列的从 0 开始的位置。默认值为 0。

```
$query = "SELECT ssfullname, ssemail FROM userss WHERE ud=?";
$stmt = $conn->prepare($query);
$stmt->execute([$id])
$result = $stmt->get_result();
$ssemail = $result->fetch_column(1); 
```

请注意，此方法会将内部指针移动到下一行，就像其他`fetch_*`方法一样。当它到达终点时，它会返回`false`。因此，在上面的示例中，您最好使用`fetch_assoc()`将整行获取到数组中。

它也可以用于`mysqli::query()`不带参数的 SQL 语句。

```
$query = "SELECT count(*) FROM userss";
$count = $conn->query($query)->fetch_column(); 
```*

# python - 防止 Sympy 重新排列方程

> ID：14624511
> 
> 赞同：12
> 
> 时间：2013-01-31T11:20:15.317
> 
> 标签：python, sympy

也许我忽略了显而易见的事情，但你如何防止 sympy 重新排列方程？

我在 iPython 笔记本中使用 Sympy，因此我可以轻松地将 Latex 代码复制粘贴到 Lyx，但我希望方程的顺序与我定义它们的顺序相同。

例如，灰体辐射随温度变化的公式：

![在此处输入图像描述](../Images/9943eb7a70b2662f1015560dc35118a4.png)

Sympy 自动将温度组件放在前面，这给出了一个非常不寻常的公式表示。有没有办法防止这种情况发生？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-02T23:59:11.690

目前，在 SymPy 中无法完全按照输入的内容打印内容，因为该信息甚至没有保存在任何地方。

我相信在乘法中，符号是按字母顺序排列的，大写字母在小写字母之前（基本上是从 开始的顺序`ord`）。我能想出的最佳技巧是使用 to`symbol_names`选项`latex`，它可以让您更改用于在 LaTeX 表示中的符号的名称。排序仍将基于原始符号的名称，因此您可以欺骗它：

```
>>> from sympy.abc import epsilon, omega, t
>>> latex(epsilon*sigma*t**4, symbol_names={t:"T"})
\epsilon \sigma T^{4} 
```

如果你想让它在笔记本中很好地打印出来，你必须编写一个自定义版本的打印扩展，将你的`symbol_names`dict 传递给`latex`. 请参阅[https://github.com/sympy/sympy/blob/master/sympy/interactive/printing.py](https://github.com/sympy/sympy/blob/master/sympy/interactive/printing.py)（理想情况下，可以将`latex`选项传递给`init_printing`，我将在 SymPy 错误跟踪器中为此打开一个问题）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-10-24T12:45:02.693

如果您希望产品的参数以给定的顺序出现，您可以从这些参数创建一个 Mul，然后告诉打印机您不希望它们重新排序，如此处所示[的](https://stackoverflow.com/questions/58533081/how-to-determine-the-arrangement-of-the-polynomial-when-displaying-it-with-latex/58541371#58541371)添加。所以对于你的例子，你可以做

```
>>> var('epsilon, sigma, T')
(epsilon, sigma, T)
>>> this = Mul(epsilon, sigma, T**4, evaluate=False)
>>> StrPrinter({'order':'none'})._print_Mul(this)
epsilon*sigma*T**4 
```

# android - 我们如何在 phonegap 应用程序中捕获照片并上传到服务器

> ID：14624515
> 
> 赞同：0
> 
> 时间：2013-01-31T11:20:26.460
> 
> 标签：android, cordova, asp.net-mvc-4, phonegap-plugins

我们如何在 phonegap 应用程序中捕获照片并上传到服务器上。

服务器端代码是 mvc4 C# 动作。

我们必须在带有图像的服务器上再发送两个值（名称和 ID）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:27:19.263

我试图问一个类似的问题，但没有回应。不确定是否可以完成。虽然有很多 PHP 示例。

[AJAX 文件上传到 WCF 服务的工作示例](https://stackoverflow.com/questions/13661105/working-example-of-ajax-file-upload-to-wcf-service)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:11:16.997

我无法谈论 android 或 phonegap 部分，但对于您的 MVC 操作，请查看`HttpPostedFileBase`- Haacked.com 上有一篇很棒的文章：[http ://haacked.com/archive/2010/07/16/uploading-带有 aspnetmvc.aspx 的文件](http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx)

# database - 带有存储在数据库中的标记内容的 JSF 2 应用程序

> ID：14624524
> 
> 赞同：2
> 
> 时间：2013-01-31T11:20:55.273
> 
> 标签：database, templates, jsf-2, markup

我正在开发一个 JSF 2 应用程序，它需要将标记内容存储在数据库中并即时修改。我需要一些关于如何实现这一目标的建议。

我想将一些页面模板（不是全部）存储在数据库中，并从数据库而不是分解的战争文件中加载它们。

我已经根据[这篇文章](https://stackoverflow.com/questions/13292272/can-you-get-the-jsf2-uidecorate-template-xxx-outside-of-app/14622112)编写了自己的自定义解析器，并且可以从本地文件系统上的特定位置成功加载模板，但我需要扩展它以从数据库中读取。

BalusC 提到使用自定义 URLStreamHandlerFactory 和 URLStreamHandler 实现来执行从数据库流式传输的实际工作，这很可能是正确的方法，但我不知道该怎么做？

如果有人有一个例子，或者可以指出我正确的方向，那将不胜感激。

提前致谢。

# css - 全屏网站显示水平滚动条并在右侧被剪切

> ID：14624525
> 
> 赞同：1
> 
> 时间：2013-01-31T11:21:01.200
> 
> 标签：css, fullscreen

我在这个网站上工作，我不知道如何解决这个问题。如果您使用全屏浏览器窗口，您将完美地看到它（任何主要浏览器），但如果窗口较小，它会显示水平滚动条并在右侧将网站削减约 50 像素。我无法更改设计以使其更容易做到。

这是链接，你可以看到html和css

[http://www.ircm.comunicazioneimmagine.eu/](http://www.ircm.comunicazioneimmagine.eu/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:28:48.467

使用固定尺寸布局会导致不同屏幕分辨率出现问题。您应该使用流体布局来解决问题。

*   [流体布局指南](http://css-tricks.com/the-perfect-fluid-width-layout/)
*   [响应式设计](http://en.wikipedia.org/wiki/Responsive_web_design)

如果您不想使用流畅的布局。

将所有内容放入一个 div`margin: 0 auto`并添加`text-align: center`到正文（与 IE 浏览器兼容）。选择一个与页面看起来不错的背景，您就完成了。

但是如果屏幕分辨率小于实际页面大小，除了手动调整页面大小之外，没有任何解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:30:54.670

水平滚动条在那里导致您的页面超过浏览器的内部高度......我当前的分辨率是 1920x1080，我看不到页面的底部。也许尝试减小底部大 IRCM 的大小。

# internet-explorer-8 - position().left 为 null 或不是对象（仅限 IE）

> ID：14624534
> 
> 赞同：2
> 
> 时间：2013-01-31T11:21:21.897
> 
> 标签：internet-explorer-8, jquery-1.6

如果大写锁定处于活动状态，我想弹出一个图像。它在 FF 和 Chrome 上运行良好。但几乎总是不在 IE (8) 上。它指出

> 'position().left' 为空或不是对象

我还尝试了 offset().left 的等效结果

我在这里做了一个垃圾箱：http: [//jsbin.com/oyeyix/1](http://jsbin.com/oyeyix/1)（请忽略丢失的图像）

# voice-recognition - ALIZE平台安装

> ID：14624535
> 
> 赞同：1
> 
> 时间：2013-01-31T11:21:21.733
> 
> 标签：voice-recognition, speaker

请你帮我解决这个错误。我正在尝试从该站点[http://mistral.univ-avignon.fr/download_en.html](http://mistral.univ-avignon.fr/download_en.html)在 Ubuntu 上安装 alize-1.4 。但我最后得到这样的错误

```
make[1]: Leaving directory `/home/admin-pc/alize/src' 
make: *** [all-recursive] Error 1 cp: cannot stat `src/libalize.a': No
such file or directory 
```

也许你们中的某个人使用了 ALIZE 代码？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:34:42.727

所以，根据日志，真正的错误是

```
g++ -DPACKAGE_NAME=\"\" -DPACKAGE_TARNAME=\"\" -DPACKAGE_VERSION=\"\" -DPACKAGE_STRING=\"\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"libalize\" -DVERSION=\"0.0\" -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_DLFCN_H=1 -DLT_OBJDIR=\".libs/\" -I.     -O3 -ffast-math -Wall -march=pentium4 -MT SegServerFileWriter.o -MD -MP -MF .deps/SegServerFileWriter.Tpo -c -o SegServerFileWriter.o SegServerFileWriter.cpp
SegServerFileWriter.cpp: In member function void alize::SegServerFileWriter::writeSegServerTrs(const alize::SegServer&):
SegServerFileWriter.cpp:299: error: 'qsort' was not declared in this scope
make[1]: *** [SegServerFileWriter.o] Error 1 
```

由于新编译器的限制，当您使用较新的 gcc 编译旧式 C++ 项目时，这种类型的错误很常见

最简单的方法就是使用颠覆检查最新的代码，它已经修复了所有这些问题：

```
 svn checkout http://alize.univ-avignon.fr/svn/ALIZE/trunk/ 
```

或者添加`#include <cstdlib>`到文件头中以导入 qsort 声明。

# jquery - 当用户在输入中键入所有信息并选中复选框时，如何从按钮中删除禁用属性？

> ID：14624537
> 
> 赞同：0
> 
> 时间：2013-01-31T11:21:27.230
> 
> 标签：jquery

当用户在输入中键入所有信息并选中复选框时，如何从按钮中删除禁用属性？

我的尝试：

完整代码：http: [//jsfiddle.net/7zMRM/1/](http://jsfiddle.net/7zMRM/1/)

```
$('#id_accept').click(function(){
    if($('#id_accept:checked').length == 1 && $('#id_blz').length == 8 && $('#id_account_owner').length > 3 && $('#id_account_number').length == 22 && $('#id_bank_name').length > 3){

        $('#open').removeAttr('disabled');
        $('#open').attr('onclick','javascript:yourFunctionName();');
    }
    else{
        $('#open').removeAttr('onclick');
        $('#open').attr('disabled','disabled');

}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:23:52.040

首先，你不应该这样做：

```
$('#id_accept').click(function(){ 
```

所以，你需要在`input`'s`change`事件上做。

```
$("form input").change(function(){ 
```

此外，您还没有将作业包装在里面`$(document).ready()`，而且您有两种表格。

而且，您必须以这种方式检查复选框值：

```
$('#id_accept').prop("checked"); 
```

另一个错误是你不应该这样使用`.length`，而应该是：

```
$('#id_blz').val().length 
```

### 最终代码：

```
$(document).ready(function(){
$('form input').blur(function(){
    if($('#id_accept').prop("checked") && $('#id_blz').val().length == 8 && $('#id_account_owner').val().length > 3 && $('#id_account_number').val().length == 22 && $('#id_bank_name').val().length > 3){
        console.log("passed");
        alert($('#id_blz').length);
        $('#open').removeAttr('disabled');
        $('#open').attr('onclick','javascript:yourFunctionName();');
    }
    else{
        console.log("failed");
        $('#open').removeAttr('onclick');
        $('#open').attr('disabled','disabled');

}
});
}); 
```

### 小提琴：http: [//jsfiddle.net/7zMRM/2/](http://jsfiddle.net/7zMRM/2/)

# php - 允许带有现有 PreCommit 挂钩警告的 SVN 提交

> ID：14624539
> 
> 赞同：5
> 
> 时间：2013-01-31T11:21:35.570
> 
> 标签：php, svn, coding-style, phpunit, pre-commit-hook

在能够提交之前，我正在使用 SVN 预提交挂钩来验证我的代码标准 (PSR2)。这很完美，只有一个例外。我的单元测试 (PHPUnit) 文件存在于我的引导类中，存在于所有静态单元测试函数中，但也启用了引导类定义上方的错误消息。

PSR2 标准会在尝试提交此操作时发出警告，因为您不能在包含类定义的文件中拥有不在类或函数中的代码。

有没有人有办法在我的代码嗅探器中排除这个错误，或者让我的代码有效（没有在引导类的每个静态函数中放置代码来启用我的错误消息）？

这是文件：

```
<?php
namespace AlbumTest;

use Zend\Loader\AutoloaderFactory;
use Zend\Mvc\Service\ServiceManagerConfig;
use Zend\ServiceManager\ServiceManager;
use Zend\Stdlib\ArrayUtils;
use RuntimeException;

error_reporting(E_ALL | E_STRICT);
chdir(__DIR__);

class Bootstrap
{
    protected static $serviceManager;
    protected static $config;
    protected static $bootstrap;

    public static function init()
    {
        // Load the user-defined test configuration file, if it exists; otherwise, load
        if (is_readable(__DIR__ . '/TestConfig.php')) {
            $testConfig = include __DIR__ . '/TestConfig.php';
        } else {
            $testConfig = include __DIR__ . '/TestConfig.php.dist';
        }

        $zf2ModulePaths = array();

        if (isset($testConfig['module_listener_options']['module_paths'])) {
            $modulePaths = $testConfig['module_listener_options']['module_paths'];
            foreach ($modulePaths as $modulePath) {
                if (($path = static::findParentPath($modulePath)) ) {
                    $zf2ModulePaths[] = $path;
                }
            }
        }

        $zf2ModulePaths  = implode(PATH_SEPARATOR, $zf2ModulePaths) . PATH_SEPARATOR;
        $zf2ModulePaths .= getenv('ZF2_MODULES_TEST_PATHS') ?: (defined('ZF2_MODULES_TEST_PATHS')
                                                            ? ZF2_MODULES_TEST_PATHS : '');

        static::initAutoloader();

        // use ModuleManager to load this module and it's dependencies
        $baseConfig = array(
            'module_listener_options' => array(
                'module_paths' => explode(PATH_SEPARATOR, $zf2ModulePaths),
            ),
        );

        $config = ArrayUtils::merge($baseConfig, $testConfig);

        $serviceManager = new ServiceManager(new ServiceManagerConfig());
        $serviceManager->setService('ApplicationConfig', $config);
        $serviceManager->get('ModuleManager')->loadModules();

        static::$serviceManager = $serviceManager;
        static::$config = $config;
    }

    public static function getServiceManager()
    {
        return static::$serviceManager;
    }

    public static function getConfig()
    {
        return static::$config;
    }

    protected static function initAutoloader()
    {
        $vendorPath = static::findParentPath('vendor');

        if (is_readable($vendorPath . '/autoload.php')) {
            $loader = include $vendorPath . '/autoload.php';
        } else {
            $zf2Path = getenv('ZF2_PATH') ?: (defined('ZF2_PATH')
                                          ? ZF2_PATH : (is_dir($vendorPath . '/ZF2/library')
                                          ? $vendorPath . '/ZF2/library' : false));

            if (!$zf2Path) {
                throw new RuntimeException(
                    'Unable to load ZF2\. Run `php composer.phar install` or define a ZF2_PATH environment variable.'
                );
            }

            include $zf2Path . '/Zend/Loader/AutoloaderFactory.php';

        }

        AutoloaderFactory::factory(
            array(
                'Zend\Loader\StandardAutoloader' => array(
                    'autoregister_zf' => true,
                    'namespaces' => array(
                        __NAMESPACE__ => __DIR__ . '/' . __NAMESPACE__,
                    ),
                ),
            )
        );
    }

    protected static function findParentPath($path)
    {
        $dir = __DIR__;
        $previousDir = '.';
        while (!is_dir($dir . '/' . $path)) {
            $dir = dirname($dir);
            if ($previousDir === $dir) {
                return false;
            }
            $previousDir = $dir;
        }
        return $dir . '/' . $path;
    }
}

Bootstrap::init(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T10:40:30.883

你的 precommit-hook 是什么样子的？您可以在发送到 Codesniffer 之前动态删除前几行吗？另一种解决方案是在引导程序的 init 中设置 error_reporting

# c# - 无法在 C# 中使用外发邮件服务器（如使用端口 465 的 Gmail/Yahoo）发送邮件

> ID：14624540
> 
> 赞同：5
> 
> 时间：2013-01-31T11:21:38.370
> 
> 标签：c#, email

使用 System.Net.Mail 命名空间，使用的代码如下。

```
MailMessage MyMailMessage = new MailMessage("example@gmail.com", "example@gmail.com",

"write your subject Here ", "Hi,This is the test message ");

MyMailMessage.IsBodyHtml = false;

NetworkCredential mailAuthentication = new NetworkCredential("example@gmail.com","xxxxxxxx");

    SmtpClient mailClient = new SmtpClient("smtp.gmail.com", 465);

    mailClient.EnableSsl = true;

    mailClient.DeliveryMethod = SmtpDeliveryMethod.Network;

    mailClient.UseDefaultCredentials = false;

    mailClient.Credentials = mailAuthentication;

    mailClient.Send(MyMailMessage); 
```

如果使用 465 端口，则使用上述代码会发生超时异常。25端口工作正常。对于 yahoo 帐户，465 和 25 都无法发送邮件。

无论如何都可以支持使用 gmail 或 yahoo 帐户发送邮件的 465 端口。

参考以下链接 [http://blogs.msdn.com/b/webdav_101/archive/2008/06/02/system-net-mail-with-ssl-to-authenticate-against-port-465.aspx](http://blogs.msdn.com/b/webdav_101/archive/2008/06/02/system-net-mail-with-ssl-to-authenticate-against-port-465.aspx)

是说 Windows Mail 使用 System.Net.Mail 来发送消息 - 不会与隐式 SSL 一起使用。

有没有办法解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:44:39.620

这不是问题的答案，但 .NET 内置邮件类不支持所需的隐式 SSL 方法。为此，您必须使用能够显式和隐式 SSL 的第三方 SMTP 客户端组件。

# ios - 当应用程序进入后台时，MPMoviePlayerController 会暂停

> ID：14624541
> 
> 赞同：1
> 
> 时间：2013-01-31T11:21:40.287
> 
> 标签：ios, mpmovieplayercontroller

> **可能重复：**
> [如何恢复正在使用 presentMoviePlayerViewControllerAnimated 播放的电影](https://stackoverflow.com/questions/10566666/how-to-resume-a-movie-thats-being-played-with-presentmovieplayerviewcontrollera)

当我的应用程序启动时我正在播放视频，但同时当我按下主页按钮时，它会暂停视频或挂起视频当我​​的应用程序进入前台时如何恢复它可以恢复 MPMoviePlayerController。任何建议都会有利于我

谢谢

# android - HTTPS 请求上的 SSL 错误

> ID：14624544
> 
> 赞同：2
> 
> 时间：2013-01-31T11:21:44.800
> 
> 标签：android

使用 Https 请求并使用 DefaultHttpClient，我总是收到错误消息： NativeCrypto(20889): 从 sslSelect() 返回，结果为 1，错误代码 2 这意味着什么以及如何修复它。谢谢。

# java - 从外部站点添加产品并从 Java 与 Magento 建立连接

> ID：14624555
> 
> 赞同：1
> 
> 时间：2013-01-31T11:22:39.840
> 
> 标签：java, soap, magento-1.7

我想从我的外部站点将多个产品添加到购物车。我可以使用这个 url 添加单个产品：

```
http://localhost/magento/index.php/checkout/cart/add?product=2&qty=2 
```

但对于多个我不能这样使用：`http://localhost/magento/index.php/checkout/cart/add?product=2&qty=2&product=3&qty=4`。

有没有其他方法可以做到这一点？我的外部源站点在 JSP 中。

我想使用 Java 连接到 magento 数据库。那么，有没有使用 Java 进行连接的教程或示例？我知道可以使用SOAP & RPC，但我不知道如何使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:35:49.547

实际上，我已经将这段代码写入“CartController.php”文件。

```
public function newAction() {
    $cart = $this->_getCart();
    try {
        //getting list of products
        $filter = new Zend_Filter_LocalizedToNormalized(array('locale' => Mage::app()->getLocale()->getLocaleCode()));
        for ($i = 1; $i <= 4; $i++) {
            echo '<br>';
            $param = $_GET['product' . $i];
            if (isset($param)) {
                $param = explode("/", $param);
                print_r($param);
                $productId = $param[0];
                $product = $this->addNewProduct($productId);
                $quantity = $filter->filter($param[1]);
                $params['product'] = $product;
                $params['qty'] = $quantity;

                $cart->addProduct($product);
            }// if over
        }//for over
        $cart->save();
        $message = $this->__('Added to Your Cart Successfully', Mage::helper('core')->escapeHtml());
        $this->_getSession()->addSuccess($message);
        Mage::getSingleton('checkout/session')->setCartWasUpdated(true);
        $this->_redirect("checkout/cart/");
    } catch (Mage_Core_Exception $e) {} 
```

现在，我们可以添加产品，如下所示：`http://localhost/magento/index.php/checkout/cart/new?product1=2/3&product2=3/3&product3=4/1`

其中，在“product1=2/3”中，2=>productId & 3=> 是数量。

此代码工作正常。但是，我想在不修改客户端代码的情况下做到这一点。

# javascript - 如何将 CSS 添加到 jQuery 中特定 tr 的所有 tds？

> ID：14624556
> 
> 赞同：0
> 
> 时间：2013-01-31T11:22:41.093
> 
> 标签：javascript, jquery, css

我想为`{padding : 0px 8px 0px 2px}`特定 tr 的所有 td 添加一个 css。tr 是这样的： `$('#' + rowid)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T11:23:24.510

```
$('#' + rowid).find("td").css("padding", "0px 8px 0px 2px"); 
```

* * *

*   `$('#' + rowid)`获取`tr`元素。
*   `.find("td")`获取`td`嵌套在您的元素中的所有元素`tr`。
*   `.css("padding", "0px 8px 0px 2px")`将相关样式应用于您的`td`元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:23:19.117

试试这个：

```
$('td', '#' + rowid).css('padding', '0px 8px 0px 2px'); 
```

或者更好的是，将 放在`padding`样式表中的一个类中并使用它，`addClass`因为它可以更好地分离关注点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T11:32:42.877

试试这个...

```
$('.' + rowclass).find("td").css("padding", "0px 8px 0px 2px"); 
```

你不能`id`对多个标签使用相同的标签，所以你必须使用`class`它，因为标签可以有相同的类但不同的 Id

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T11:37:41.277

尝试如下...它会工作

```
var ele = '#' + rowid;
$(ele + " td").css('padding', '10px 8px 0px 2px'); 
```

# linq - 使类库中的 .dbml 文件使用配置文件中的连接字符串而不对其进行子类化

> ID：14624558
> 
> 赞同：1
> 
> 时间：2013-01-31T11:22:41.880
> 
> 标签：linq, linq-to-sql

我有一个从 Web 应用程序引用的类库。类库默认使用 TestProject.Properties.Settings.Default.NFU_Custom_Website_DataConnectionString1。我希望它从 ConfigurationManager.ConnectionStrings 中获取连接字符串。

我无法更改 .designer.cs 文件，因为它会被覆盖。如果可能的话，我想避免创建一个继承自 .dbml 文件的类并在其中设置连接字符串。我的老板建议创建一个 Web 应用程序项目并从中删除所有 default.aspx 等文件并使用它而不是类库，这是一个可行的解决方案吗？

谢谢

乔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-16T00:59:31.320

你可以这样做。我们无意中这样做了，当我切换到类库时遇到了这个问题。而不是切换回来，我在这里找到了答案：[Point connectionstring in dbml to app.config](https://stackoverflow.com/questions/5139043/point-connectionstring-in-dbml-to-app-config)

总之：

1.  在设计器中将 DBML 的连接属性设置为（无）。这将从 DB Context 类中删除默认构造函数。
2.  使用默认构造函数为您的 DB 上下文创建部分类：

```
 using System.Configuration;

    namespace TestProject
    {
        public partial class MyDBContext
        {
            public MyDBContext() : base(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString)
            {
                OnCreated();
            }
        }
    } 
```

# github - 我想在我的 GIT 存储库上使用 HTTPS 连接，并且凭据在数据包中

> ID：14624560
> 
> 赞同：6
> 
> 时间：2013-01-31T11:22:44.817
> 
> 标签：github, chef-infra

我正在尝试创建一个配方，该配方将使用我的用户名和密码下载我的 git repo，这些用户名和密码位于数据包内。这是我的代码，下面是一个错误，表示它无法在我的 git 块中获取我的凭据。有任何想法吗？

```
accounts = data_bag_item('databag_name', 'databag_item')

git "my_repo" do
  user accounts
  puts user.inspect
  repository "https://github.com/my_repo/myrepo.git"
  reference "branch"
  destination "/var/www/myrepo"
  action :sync
end 
```

我的错误是：

```
Expected process to exit with [0], but received '1'
---- Begin output of git ls-remote https://github.com/my_repo/myrepo.git branch ----
STDOUT: 
STDERR: /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/mixlib-shellout-1.1.0/lib/mixlib/shellout.rb:172:in `getpwnam': can't find user for accounts (ArgumentError)
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/mixlib-shellout-1.1.0/lib/mixlib/shellout.rb:172:in `uid'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/mixlib-shellout-1.1.0/lib/mixlib/shellout/unix.rb:92:in `set_user'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/mixlib-shellout-1.1.0/lib/mixlib/shellout/unix.rb:226:in `block in fork_subprocess'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/mixlib-shellout-1.1.0/lib/mixlib/shellout/unix.rb:222:in `fork'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/mixlib-shellout-1.1.0/lib/mixlib/shellout/unix.rb:222:in `fork_subprocess'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/mixlib-shellout-1.1.0/lib/mixlib/shellout/unix.rb:35:in `run_command'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/mixlib-shellout-1.1.0/lib/mixlib/shellout.rb:222:in `run_command'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/mixin/shell_out.rb:30:in `shell_out'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/mixin/shell_out.rb:35:in `shell_out!'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/provider/git.rb:222:in `remote_resolve_reference'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/provider/git.rb:212:in `target_revision'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/provider/git.rb:68:in `block (2 levels) in define_resource_requirements'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/mixin/why_run.rb:232:in `call'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/mixin/why_run.rb:232:in `run'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/mixin/why_run.rb:322:in `block in run'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/mixin/why_run.rb:321:in `each'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/mixin/why_run.rb:321:in `run'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/provider.rb:128:in `process_resource_requirements'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/provider.rb:105:in `run_action'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/resource.rb:597:in `run_action'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/runner.rb:49:in `run_action'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/runner.rb:81:in `block (2 levels) in converge'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/runner.rb:81:in `each'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/runner.rb:81:in `block in converge'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/resource_collection.rb:94:in `block in execute_each_resource'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/resource_collection/stepable_iterator.rb:116:in `call'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/resource_collection/stepable_iterator.rb:116:in `call_iterator_block'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/resource_collection/stepable_iterator.rb:85:in `step'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/resource_collection/stepable_iterator.rb:104:in `iterate'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/resource_collection/stepable_iterator.rb:55:in `each_with_index'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/resource_collection.rb:92:in `execute_each_resource'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/runner.rb:80:in `converge'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/client.rb:378:in `converge'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/client.rb:420:in `do_run'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/client.rb:176:in `run'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/application.rb:140:in `run_chef_client'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/application/client.rb:274:in `block in run_application'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/application/client.rb:267:in `loop'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/application/client.rb:267:in `run_application'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/application.rb:72:in `run'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/bin/chef-client:26:in `<top (required)>'
    from /usr/bin/chef-client:23:in `load'
    from /usr/bin/chef-client:23:in `<main>'
---- End output of git ls-remote https://github.com/my_repo/myrepo.git branch ----
Ran git ls-remote https://github.com/my_repo/myrepo.git branch returned 1

Resource Declaration:
---------------------
# In /var/chef/cache/cookbooks/themes/recipes/default.rb

 34: git "my_repo" do
 35:   user "accounts"
 36:   puts user.inspect
 37:   repository "https://github.com/my_repo/myrepo.git"
 38:   reference "branch"
 39:   destination "/var/www/my_repo"
 41:   action :sync
 42: end
 43: 

Compiled Resource:
------------------
# Declared in /var/chef/cache/cookbooks/themes/recipes/default.rb:34:in `from_file'

git("my_repo") do
  provider Chef::Provider::Git
  action [:sync]
  retries 0
  retry_delay 2
  destination "/var/www/my_repo"
  revision "branch"
  remote "origin"
  cookbook_name "themes"
  recipe_name "default"
  user "accounts"
  repository "https://github.com/my_repo/myrepo.git"
end

[2013-01-31T10:12:21+00:00] ERROR: Running exception handlers
[2013-01-31T10:12:21+00:00] FATAL: Saving node information to /var/chef/cache/failed-run-data.json
[2013-01-31T10:12:21+00:00] ERROR: Exception handlers complete
[2013-01-31T10:12:21+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2013-01-31T10:12:21+00:00] FATAL: Mixlib::ShellOut::ShellCommandFailed: git[my_repo] (themes::default line 34) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '1'
---- Begin output of git ls-remote https://github.com/my_repo/myrepo.git branch ----
STDOUT: 
STDERR: /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/mixlib-shellout-1.1.0/lib/mixlib/shellout.rb:172:in `getpwnam': can't find user for accounts (ArgumentError)
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/mixlib-shellout-1.1.0/lib/mixlib/shellout.rb:172:in `uid'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/mixlib-shellout-1.1.0/lib/mixlib/shellout/unix.rb:92:in `set_user'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/mixlib-shellout-1.1.0/lib/mixlib/shellout/unix.rb:226:in `block in fork_subprocess'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/mixlib-shellout-1.1.0/lib/mixlib/shellout/unix.rb:222:in `fork'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/mixlib-shellout-1.1.0/lib/mixlib/shellout/unix.rb:222:in `fork_subprocess'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/mixlib-shellout-1.1.0/lib/mixlib/shellout/unix.rb:35:in `run_command'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/mixlib-shellout-1.1.0/lib/mixlib/shellout.rb:222:in `run_command'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/mixin/shell_out.rb:30:in `shell_out'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/mixin/shell_out.rb:35:in `shell_out!'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/provider/git.rb:222:in `remote_resolve_reference'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/provider/git.rb:212:in `target_revision'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/provider/git.rb:68:in `block (2 levels) in define_resource_requirements'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/mixin/why_run.rb:232:in `call'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/mixin/why_run.rb:232:in `run'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/mixin/why_run.rb:322:in `block in run'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/mixin/why_run.rb:321:in `each'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/mixin/why_run.rb:321:in `run'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/provider.rb:128:in `process_resource_requirements'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/provider.rb:105:in `run_action'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/resource.rb:597:in `run_action'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/runner.rb:49:in `run_action'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/runner.rb:81:in `block (2 levels) in converge'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/runner.rb:81:in `each'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/runner.rb:81:in `block in converge'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/resource_collection.rb:94:in `block in execute_each_resource'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/resource_collection/stepable_iterator.rb:116:in `call'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/resource_collection/stepable_iterator.rb:116:in `call_iterator_block'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/resource_collection/stepable_iterator.rb:85:in `step'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/resource_collection/stepable_iterator.rb:104:in `iterate'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/resource_collection/stepable_iterator.rb:55:in `each_with_index'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/resource_collection.rb:92:in `execute_each_resource'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/runner.rb:80:in `converge'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/client.rb:378:in `converge'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/client.rb:420:in `do_run'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/client.rb:176:in `run'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/application.rb:140:in `run_chef_client'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/application/client.rb:274:in `block in run_application'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/application/client.rb:267:in `loop'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/application/client.rb:267:in `run_application'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/application.rb:72:in `run'
    from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.18.2/bin/chef-client:26:in `<top (required)>'
    from /usr/bin/chef-client:23:in `load'
    from /usr/bin/chef-client:23:in `<main>'
---- End output of git ls-remote https://github.com/my_repo/myrepo.git branch ----
Ran git ls-remote https://github.com/my_repo/myrepo.git branch returned 1

--- 
```

是否有示例代码显示如何从 github 下载我的代码并通过数据包进行身份验证。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T13:02:40.367

**git**资源中的`user`属性不是 GitHub 上的用户名，而是系统用户，它将是您克隆存储库的目录的所有者。显然您没有创建系统用户*帐户*，这就是您收到错误的原因。

 ***您的 git 资源应如下所示：

```
git "/var/www/myrepo" do
  repository "git@github.com:username/myrepo.git" #or "https://github.com/my_repo/myrepo.git"
  revision "HEAD"
  action :sync
end 
```

但是你需要一些机制来在 GitHub 上进行身份验证。我建议使用 ssh-keys，因为我不知道有什么方法可以永久存储您的密码以进行身份​​验证 - 只能在少量时间内进行一些[缓存。](https://help.github.com/articles/set-up-git)[您可以根据GitHub 上的本指南](https://help.github.com/articles/generating-ssh-keys)生成密钥对。然后，您可以将您的私钥保存在**加密的数据包**中。

```
{
  "id": "mykeys",
  "private": "[The private key with newlines replaced with \n]",
  "public": "[The public key with newlines replaced with \n]"
} 
```

然后您可以使用配方中的数据包在 ~/.ssh/id_rsa 中重新创建私钥文件

```
keys = Chef::EncryptedDataBagItem.load('databag_name', 'mykeys')

directory ::File.join( ENV['HOME'], '.ssh' ) do
  mode 0755
end

file ::File.join( ENV['HOME'], '.ssh', 'id_rsa' ) do
  content keys['private']
  mode 0600
end 
```

要跳过检查主机“github.com”的真实性，请在您的说明书*文件/默认/配置*中创建一个文件，其中包含以下内容。

```
Host github.com
StrictHostKeyChecking no
UserKnownHostsFile /dev/null 
```

并将以下内容添加到配方中：

```
cookbook_file ::File.join( ENV['HOME'], '.ssh', 'config' ) do
  mode 0644
end 
```

如果您不想以*root*身份克隆存储库，而是以其他用户身份克隆存储库，那么您必须在该用户的主目录中创建所有*.ssh*配置文件。***

# wordpress - 如何向 Wordpress 主题添加搜索功能？

> ID：14624563
> 
> 赞同：0
> 
> 时间：2013-01-31T11:22:47.713
> 
> 标签：wordpress, themes

我被要求将搜索功能添加到既没有 search.php 页面的 Wordpress 主题中，这可能吗？是否可以使用插件？

主题是这样的： [http ://themeforest.net/item/heal-responsive-medical-wordpress-theme/3127829?sso?WT.ac=search_item&WT.seg_1=search_item&WT.z_author=raybreaker](http://themeforest.net/item/heal-responsive-medical-wordpress-theme/3127829?sso?WT.ac=search_item&WT.seg_1=search_item&WT.z_author=raybreaker)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:23:58.467

就像 david.binda 说的，Wordpress 已经有了这个功能。

但是这个模板有可能使用了 WP_Query。在这种情况下，您可以在此 WP_Query 中添加“s”参数：

```
$query = new WP_Query( 's=keyword' ); 
```

[WP_Query 参考](http://codex.wordpress.org/Class_Reference/WP_Query)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:31:04.677

搜索功能不在主题中。它在您的 WordPress 安装中并且已经可以使用。尝试使用 ?s=some+text 参数输入您的主页网址。

要使主题以与普通存档页面不同的方式显示搜索结果，复制archive.php 并将其重命名为**search.php**很容易，而且您可能不会稍微修改它（可能会使用[the_search_query](https://codex.wordpress.org/Function_Reference/the_search_query)函数添加h1）。接下来，您必须在主题中创建**searchform.php**。您可以将 codex 中的此代码用于您的文件

```
<form role="search" method="get" id="searchform" action="<?php echo home_url( '/' ); ?>">
    <div><label class="screen-reader-text" for="s">Search for:</label>
        <input type="text" value="" name="s" id="s" />
        <input type="submit" id="searchsubmit" value="Search" />
    </div>
</form> 
```

另外，您必须将搜索插件插入小部件侧边栏或将搜索表单添加到主题的其他位置（可能是 header.php）。您可以从此[get_search_form 功能中受益](http://codex.wordpress.org/Function_Reference/get_search_form)

# drupal-7 - Drupal：另一种获取分类 tid 的方法（除了 URL）

> ID：14624566
> 
> 赞同：1
> 
> 时间：2013-01-31T11:22:55.887
> 
> 标签：drupal-7

我正在使用将主题分类术语保存为隐藏字段的网络表单。

不幸的是，在使用上传按钮附加文件后，此术语丢失（“无类别”），因为 ajax 正在将表单 #action URL 从 /tid 更改为 /file/ajax/submitted/file4/form-gTwVpNbQRszArGEUS1OfuwA8WgSLJOlcWGOuS6r9D5A

从哪里读取 $tid？

因此我的 $tid 无法从 URL 加载

```
function MYMODULE_form_alter(&$form, &$form_state, $form_id) {
$tid = arg(1);
          $term = taxonomy_term_load($tid);
            if (!empty($term)) {
                $category = i18n_taxonomy_term_name($term, $language->language);
            } else {
                $category = 'No category';
            }
            $form['submitted'][$category_fieldkey] = array(
                '#type' => 'hidden',
                '#value' => $category,
            );

} 
```

# android - 将 somefile.html 文件从内部存储加载到应用程序的 web 视图

> ID：14624567
> 
> 赞同：16
> 
> 时间：2013-01-31T11:22:58.707
> 
> 标签：android, webview

我的平板电脑的内部存储器中有一个文件。/myfolder/子文件夹/index.html。我如何将其加载到应用程序的 web 视图中。

我试过了

```
 webview.loadURL("file:///myfolder/subfolder/index.html"); 
```

但它没有给出预期的结果。它说网页不可用。

我知道如何从资产文件夹或网络/互联网加载。但我需要将本地文件加载到 webview 中。是否可以。？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-31T11:33:07.713

```
File file = new File("/data/data/packagename/foldername/");
webView.loadUrl("file:///" + file); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-31T12:09:42.130

我能够通过使用以下路径来解决我的问题：

```
webview.loadURL("file:///mnt/sdcard/myfolder/subfolder/index.html"); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-31T11:35:29.637

一个应用程序无法访问另一个应用程序存储的内部存储中的数据。权限应用于内部存储，使应用程序写入的数据无法在该应用程序之外访问（您的应用程序无法读取其他应用程序写入的任何内容）。

因此，如果您正在访问不是由您的应用程序 AFAIK 创建的文件，您将无法访问它。

顺便说一句，您可以从内部存储访问该文件，如下所示，

```
webview.loadURL("file:///data/data/com.yourproject.example/files/index.html"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T11:28:06.480

将您的 html 文件放在资产文件夹中，访问如下所示的页面。

```
 webview.loadURL("file:///"+mContext.getFilesDir()+"/myfolder/subfolder/index.html"); 
```

在访问 android 资产中的 html 页面时，您必须提及 android 资产。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-10T18:13:10.033

```
 File gameDir = new File("/data/data/" + getActivity().getPackageName() + "/games");
    gameDir.mkdirs();

    // Create and execute the background task.
    mTask = new DownloadTask();
    mTask.execute("https://github.com/gabrielecirulli/2048/archive/master.zip", "/data/data/" + getActivity().getPackageName() + "/games/2048.zip");

    mWebView.getSettings().setJavaScriptEnabled(true);
                Toast.makeText(MainActivity.this, path+"/index.html", Toast.LENGTH_SHORT).show();
                mWebView.loadUrl("file:///data/data/com.example.zipfiledownload/games/2048-master/index.html"); 
```

# javascript - 从多个锚点单击 JQuery 以进行 ajax 调用

> ID：14624569
> 
> 赞同：1
> 
> 时间：2013-01-31T11:23:00.780
> 
> 标签：javascript, jquery, ajax

我有多个由 php 从数据库生成的锚标记，如下所示

```
<a href="#" id="reply_doc" data-doc_value="1"></a>
<a href="#" id="reply_doc" data-doc_value="2"></a>
<a href="#" id="reply_doc" data-doc_value="3"></a> 
```

现在我得到了 JQuery 脚本

```
$(document).ready(function(){
  $("#reply_doc").click(function () {
    var a = $(this).data("doc_value");
    if (a != "") {
        $.ajax({
            type: "POST",
            url: "ajax_check/",
            data: "doc_reply=" + a,
            success: function (b) {
                alert(a+' ok. '+b)
            }
        });
    }
 });
}); 
```

这仅适用于第一个锚标签。当单击特定锚点时，我如何为每个锚点标记执行此操作，只有该锚点会受到影响，并且该特定值将使用 ajax 发送。

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T11:24:31.357

该`id`属性是一个**标识符**。顾名思义，这意味着它必须是**唯一的**，以便它可以识别单个元素。为了识别多个元素，您需要使用一个类来代替：

```
<a href="#" class="reply_doc" data-doc_value="1"></a>
<a href="#" class="reply_doc" data-doc_value="2"></a>
<a href="#" class="reply_doc" data-doc_value="3"></a>

$(".reply_doc").click(...); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:23:58.907

将 更改`id`为`class`，并将您的选择器更改为`".reply_doc"`。

您的 html 当前无效，因为该`id`属性应该是唯一的。尽管当您违反此规则时浏览器不会上下跳动抱怨，但当您尝试通过它选择一个元素时，`id`它只会找到第一个（或者，在某些浏览器中，最后一个）。

如果假设您无法控制 html 结构，则可以选择所有具有该`data-doc_value`属性的锚元素：

```
$("a[data-doc_value]")... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T11:26:51.497

元素不能有相同的 id 所以在同一个类上绑定事件。

```
a href="#" class="option" id="reply_doc" data-doc_value="1"></a>
<a href="#" class="option" id="reply_doc" data-doc_value="2"></a>
<a href="#" id="reply_doc" class="option" data-doc_value="3"></a> 
```

jQuery 脚本

```
$(document).ready(function(){
  $(".option").click(function () {
    var a = $(this).data("doc_value");
    if (a != "") {
    $.ajax({
        type: "POST",
        url: "ajax_check/",
        data: "doc_reply=" + a,
        success: function (b) {
            alert(a+' ok. '+b)
        }
    });
}
});
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T11:29:34.817

**再次编辑** **[DEMO](http://jsfiddle.net/ipsjolly/SupzC/11/)**

```
<a href="#" class="reply_doc" data-doc_value="1">111</a><br>
<a href="#" class="reply_doc" data-doc_value="2">222</a><br>
<a href="#" class="reply_doc" data-doc_value="3">333</a><br>

$(document).ready(function(){
  $(".reply_doc").click(function () {
    var a = $("a.reply_doc").attr("data-doc_value"); //<-- Add this
    if (a != "") {
    $.ajax({
        type: "POST",
        url: "ajax_check/",
        data: "doc_reply=" + a,
        success: function (b) {
            alert(a+' ok. '+b)
        }
    });
  }
 });
}); 
```

这样每次“ **a** ”都会在点击时具有包含在**data-doc_value**中的唯一值

# javascript - 如何在 jQuery Mobile 中将动态列表中的值从一个页面传递到另一个页面？

> ID：14624571
> 
> 赞同：2
> 
> 时间：2013-01-31T11:23:02.117
> 
> 标签：javascript, jquery, cordova

我正在使用 PhoneGap 我创建了一个 SQLite 数据库，该数据库存储名称和唯一编号以及一个自动递增的 p_id 字段。我正在使用 jQuery Mobile 来获取结果并将其显示在列表视图中，这是代码

```
function Patientquery(tx)
{
tx.executeSql('SELECT P_ID, P_UNIQUE_NO, P_FIRST_NAME, P_LAST_NAME FROM Triage where P_ID > 6',[],query,errorCB);  
}

function query(tx,result)
{
 $('#Patientlist').empty();
 $.each(result.rows,function(index){
 var row = result.rows.item(index);
 $('#Patientlist').append('<li><a href="#"  data-role="button" id='+row['P_ID']+'><img src="male.gif" /> <h3 class="ui-li-heading">'+row['P_FIRST_NAME']+'</h3><p class="ui-li-desc">'+row['P_LAST_NAME']+' '+row['P_ID']+'  </p></a></li>');
   });
        $('#Patientlist').listview();

        $('#Patientlist li').on("vclick",function(){
       alert("Selected"); // sample alert
       localStorage.currentId = $('a',this).attr("id");
       $.mobile.changePage($("#Page1"));
    }); 
```

我的问题是我无法使用`$('#Patientlist li').on("vclick",function()`。我的要求是选择一个列出的值并将 p_id 作为参数发送到下一页。

# c# - 我可以将其他参数传递给映射到实体的插入/更新/删除 SP 吗？

> ID：14624572
> 
> 赞同：1
> 
> 时间：2013-01-31T11:23:09.387
> 
> 标签：c#, .net, entity-framework, stored-procedures

我在 Entity Framework 5 中有一个实体模型，我想将现有的存储过程用于插入/更新/删除操作。我知道如何将这些 SP 映射到我的实体，但 SP 需要额外的状态参数（主要用于记录目的）。这些状态参数不是任何实体的属性，所以我无法在映射设计器中映射这些参数。

有没有办法“插入”一些自定义代码，以便我可以将这些存储过程用于我的实体上的插入/更新/删除操作，并且仍然使用这些额外参数调用存储过程？

# ms-access - Microsoft Access - 将具有相同键的内容合并到新表中

> ID：14624579
> 
> 赞同：1
> 
> 时间：2013-01-31T11:23:28.883
> 
> 标签：ms-access, ms-office

在 Microsoft Access 中，我想将具有相同键（=重复）的表中的特定列合并到一个新表中。

源表看起来像这样

```
Key Content
Apple   X
Banana  B
Banana  D
Banana  E
Banana  G
Lemon   A
Lemon   X
Orange  A 
```

我想创建一个新表，其中每个键只有一个条目，每个键都有一个字段，该字段由累积到一个字段中的所有相应“内容”字段组成。每个“内容”值都应该用一些东西来分隔，例如：

```
Apple   X
Banana  B<x>D<x>E<x>G
Lemon   A<x>X
Orange  A 
```

我更喜欢像上面那样，但如果它们位于不同的字段/列中，它也可以工作，如下所示：

```
Apple   X
Banana  B   D   E   G
Lemon   A   X
Orange  A 
```

我真的很感激这方面的帮助。在谷歌上搜索时，我发现了一些第三方插件（比如这个[http://www.tucows.com/preview/1586663/MS-Access-Join-Two-Tables-Software](http://www.tucows.com/preview/1586663/MS-Access-Join-Two-Tables-Software)）似乎正在解决这个问题，但这肯定可以通过 MS Access 本身来完成……或者……？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:28:52.257

另一种方法是使用两列（键、内容）创建表，然后运行下面的函数将数据复制到新表中。您必须将“ExistingTableName”和“NewTableName”替换为您的表名。

```
Sub CreateNewTable()
    Dim rs As Recordset
    Dim rsContent As Recordset
    Dim strContent As String
    'Select and loop through all keys
    Set rs = CurrentDb.OpenRecordset("SELECT DISTINCT Key FROM [ExistingTableName]")
    Do Until rs.EOF
      'Select all content records for this key and combine into a string
      Set rsContent = CurrentDb.OpenRecordset("SELECT Content FROM [ExistingTableName] WHERE Key = " & Chr(34) & Nz(rs!Key) & Chr(34))
      strContent = ""
      Do Until rsContent.EOF
        strContent = strContent & rsContent!Content & ","
        rsContent.MoveNext
      Loop
      If Len(strContent) > 0 Then
      strContent = Mid(strContent, 1, Len(strContent) - 1)
      End If
      CurrentDb.Execute "INSERT INTO [NewTableName] (Key, Content) VALUES (" & Chr(34) & Nz(rs!Key) & Chr(34) & ", " & Chr(34) & Nz(strContent) & Chr(34) & ")"
      rs.MoveNext
    Loop

    Set rs = Nothing
    Set rsContent = Nothing
End Sub 
```

我认为没有 VBA 就没有办法做到这一点。

看到您正在使用关系数据库，您应该考虑使用一个表来存储键和另一个表来存储内容（每行/记录一个内容），然后通过使用第三个表或通过添加“键”将它们链接起来内容表中的外键。我也将始终使用自动编号作为所有 MS Access 表中的主键，如果不是出于其他原因，这是一个好主意，只是为了避免损坏并使您能够将诸如“aple”之类的拼写错误更改为“apple”而无需打破你的关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T12:10:54.913

一个版本是使用 UDF 和这个查询：

```
SELECT Distinct Fruit.Key, 
    ConcatADO("SELECT Content FROM Fruit WHERE Key='" & [Key] & "'","<x>","<x>") 
       AS AllRows 
INTO NewFruit
FROM Fruit 
```

用户定义函数 (UDF)

```
Function ConcatADO(strSQL As String, strColDelim, strRowDelim)
   Dim rs As New ADODB.Recordset
   Dim strList As String

   On Error GoTo Proc_Err

       If strSQL <> "" Then
           rs.Open strSQL, CurrentProject.Connection
           strList = rs.GetString(, , strColDelim, strRowDelim)
           strList = Mid(strList, 1, Len(strList) - Len(strRowDelim))
       End If

       ConcatADO = strList

   Exit Function

Proc_Err:
       ConcatADO = "***" & UCase(Err.Description)
End Function 
```

在查询设计窗口中工作，您可以创建交叉表

```
TRANSFORM Min(Fruit.Content) AS MinOfContent
SELECT Fruit.Key
FROM Fruit
GROUP BY Fruit.Key
PIVOT Fruit.Content; 
```

哪个会返回

```
Key     A   B   D   E   G   X
Apple                       X
Banana      B   D   E   G   
Lemon   A                   X
Orange  A 
```

然后，您可以保存交叉表并基于交叉表创建新查询。此查询可能是获取新表的 Make Table 查询，但如您所见，您有多个列。

如果每个键都有预定数量的可能行​​，还有其他方法。

最后，你必须问自己，[去规范化](http://r937.com/relational.html)真的是要走的路吗？

# java - 使用 java 从 Base64 编码图像中解码颜色信息

> ID：14624581
> 
> 赞同：-2
> 
> 时间：2013-01-31T11:23:34.987
> 
> 标签：java, image, base64

我有一个图像的 Base64 编码字符串。我需要从中获取颜色信息。图像是单色的红色、绿色、橙色。

请在这方面帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:26:42.157

使用以下代码对其进行解码

```
BASE64Decoder decoder = new BASE64Decoder();
byte[] decodedBytes = decoder.decodeBuffer(encodedBytes); 
```

用于`decodeBytes`分析像素数据

# ibm-mq - HTTP MessageFlow 无法在具有 MQ 7.1 和 Broker 8.0.0.1 的 Linux 上运行

> ID：14624584
> 
> 赞同：0
> 
> 时间：2013-01-31T11:23:51.400
> 
> 标签：ibm-mq, messagebroker, ibm-integration-bus

我在 Linux 上工作，我在机器上安装了 MQ 版本 7.1 和 Broker 8.0.0.1。我有一个无法测试/运行的 Http 流。如果我在 AIX 上部署相同的流程。我能够成功运行，但是当我尝试在 Linux 的情况下执行此操作时，我得到一个超时，因为在 HTTPReply 节点没有收到任何内容。

流程是这样的：

HTTPInput --> 计算 --> MQOutput --> 计算 --> MQOutput(队列 1)

MQInput --> MQGet(队列 1) --> 计算 -->HTTPReply

在 syslog 中，我在 Linux 上得到了这个：

```
WebSphere Broker v8001[21605]: (NSPZPAI1.BIBTEST1)[121]BIP2628E: Exception condition detected on input node 'com.dcx.bib.test.http.HTTPBIBGateway.MQInput'. : NSPZPAI1.8f1bda8b-3c01-0000-0080-89b5509992f7: /build/slot1/S800_P/src/DataFlowEngine/ImbCommonInputNode.cpp: 1982: ImbCommonInputNode::run: ComIbmMQInputNode: com/dcx/bib/test/http/HTTPBIBGateway#FCMComposite_1_9
WebSphere Broker v8001[21605]: (NSPZPAI1.BIBTEST1)[121]BIP2628E: Exception condition detected on input node 'com.dcx.bib.test.http.HTTPBIBGateway.MQInput'. : NSPZPAI1.8f1bda8b-3c01-0000-0080-89b5509992f7: /build/slot1/S800_P/src/DataFlowEngine/ImbCommonInputNode.cpp: 1982: ImbCommonInputNode::run: ComIbmMQInputNode: com/dcx/bib/test/http/HTTPBIBGateway#FCMComposite_1_9
WebSphere Broker v8001[21605]: (NSPZPAI1.BIBTEST1)[121]BIP2230E: Error detected whilst processing a message in node 'com.dcx.bib.test.http.HTTPBIBGateway.HTTP Reply1'. : NSPZPAI1.8f1bda8b-3c01-0000-0080-89b5509992f7: /build/slot1/S800_P/src/WebServices/WSLibrary/ImbWSReplyNode.cpp: 932: ImbWSReplyNode::evaluate: ComIbmWSReplyNode: com/dcx/bib/test/http/HTTPBIBGateway#FCMComposite_1_11
WebSphere Broker v8001[21605]: (NSPZPAI1.BIBTEST1)[121]BIP2230E: Error detected whilst processing a message in node 'com.dcx.bib.test.http.HTTPBIBGateway.HTTP Reply1'. : NSPZPAI1.8f1bda8b-3c01-0000-0080-89b5509992f7: /build/slot1/S800_P/src/WebServices/WSLibrary/ImbWSReplyNode.cpp: 932: ImbWSReplyNode::evaluate: ComIbmWSReplyNode: com/dcx/bib/test/http/HTTPBIBGateway#FCMComposite_1_11
WebSphere Broker v8001[21605]: (NSPZPAI1.BIBTEST1)[121]BIP3143S: Message does not contain valid HTTP context information : NSPZPAI1.8f1bda8b-3c01-0000-0080-89b5509992f7: /build/slot1/S800_P/src/WebServices/WSLibrary/ImbWSReplyNode.cpp: 507: ImbWSReplyNode::evaluate: ComIbmWSReplyNode: com/dcx/bib/test/http/HTTPBIBGateway#FCMComposite_1_11
WebSphere Broker v8001[21605]: (NSPZPAI1.BIBTEST1)[121]BIP3143S: Message does not contain valid HTTP context information : NSPZPAI1.8f1bda8b-3c01-0000-0080-89b5509992f7: /build/slot1/S800_P/src/WebServices/WSLibrary/ImbWSReplyNode.cpp: 507: ImbWSReplyNode::evaluate: ComIbmWSReplyNode: com/dcx/bib/test/http/HTTPBIBGateway#FCMComposite_1_11 
```

我非常确定在相同环境的 AIX 上完全相同的工作原理，那么为什么我在 Linux 上会收到此错误？如果消息流在 AIX 上端到端工作，那么消息流不会有问题，那么在 Linux 上会出现什么问题呢？如果问题是基于操作系统的，那么我应该检查什么？请提出建议。

* * *

@nitgeek ..我在 HTTP 回复之前放置了一个跟踪节点，但由于消息通过 MQGet 节点的无消息终端发出，所以什么也没得到。当我在 MQGet 节点之前和之后放置跟踪节点时。我得到了以下两者：

```
( ['MQROOT' : 0x76fa1f0]
  (0x01000000:Name):Properties = ( ['MQPROPERTYPARSER' : 0x75ccfa0]
    (0x03000000:NameValue):MessageSet             = '' (CHARACTER)
    (0x03000000:NameValue):MessageType            = '' (CHARACTER)
    (0x03000000:NameValue):MessageFormat          = '' (CHARACTER)
    (0x03000000:NameValue):Encoding               = 273 (INTEGER)
    (0x03000000:NameValue):CodedCharSetId         = 1208 (INTEGER)
    (0x03000000:NameValue):Transactional          = FALSE (BOOLEAN)
    (0x03000000:NameValue):Persistence            = TRUE (BOOLEAN)
    (0x03000000:NameValue):CreationTime           = GMTTIMESTAMP '2013-02-04 10:43:55.720' (GMTTIMESTAMP)
    (0x03000000:NameValue):ExpirationTime         = -1 (INTEGER)
    (0x03000000:NameValue):Priority               = 0 (INTEGER)
    (0x03000000:NameValue):ReplyIdentifier        = X'414d51204e53505a504149312020202016efbfbd0a511607' (BLOB)
    (0x03000000:NameValue):ReplyProtocol          = 'MQ' (CHARACTER)
    (0x03000000:NameValue):Topic                  = NULL
    (0x03000000:NameValue):ContentType            = '' (CHARACTER)
    (0x03000000:NameValue):IdentitySourceType     = '' (CHARACTER)
    (0x03000000:NameValue):IdentitySourceToken    = '' (CHARACTER)
    (0x03000000:NameValue):IdentitySourcePassword = '' (CHARACTER)
    (0x03000000:NameValue):IdentitySourceIssuedBy = '' (CHARACTER)
    (0x03000000:NameValue):IdentityMappedType     = '' (CHARACTER)
    (0x03000000:NameValue):IdentityMappedToken    = '' (CHARACTER)
    (0x03000000:NameValue):IdentityMappedPassword = '' (CHARACTER)
    (0x03000000:NameValue):IdentityMappedIssuedBy = '' (CHARACTER)
  )
  (0x01000000:Name):MQMD       = ( ['MQHMD' : 0x73cf7c0]
    (0x03000000:NameValue):SourceQueue      = 'PAI.JUNIT.REPLY' (CHARACTER)
    (0x03000000:NameValue):Transactional    = FALSE (BOOLEAN)
    (0x03000000:NameValue):Encoding         = 273 (INTEGER)
    (0x03000000:NameValue):CodedCharSetId   = 1208 (INTEGER)
    (0x03000000:NameValue):Format           = '        ' (CHARACTER)
    (0x03000000:NameValue):Version          = 2 (INTEGER)
    (0x03000000:NameValue):Report           = 64 (INTEGER)
    (0x03000000:NameValue):MsgType          = 8 (INTEGER)
    (0x03000000:NameValue):Expiry           = -1 (INTEGER)
    (0x03000000:NameValue):Feedback         = 0 (INTEGER)
    (0x03000000:NameValue):Priority         = 0 (INTEGER)
    (0x03000000:NameValue):Persistence      = 1 (INTEGER)
    (0x03000000:NameValue):MsgId            = X'414d51204e53505a5041493120202020168f0a510a880620' (BLOB)
    (0x03000000:NameValue):CorrelId         = X'414d51204e53505a504149312020202016efbfbd0a511607' (BLOB)
    (0x03000000:NameValue):BackoutCount     = 0 (INTEGER)
    (0x03000000:NameValue):ReplyToQ         = '                                                ' (CHARACTER)
    (0x03000000:NameValue):ReplyToQMgr      = 'NSPZPAI1                                        ' (CHARACTER)
    (0x03000000:NameValue):UserIdentifier   = 'mqbrkrs     ' (CHARACTER)
    (0x03000000:NameValue):AccountingToken  = X'0539393736360000000000000000000000000000000000000000000000000006' (BLOB)
    (0x03000000:NameValue):ApplIdentityData = '                                ' (CHARACTER)
    (0x03000000:NameValue):PutApplType      = 6 (INTEGER)
    (0x03000000:NameValue):PutApplName      = 'java                        ' (CHARACTER)
    (0x03000000:NameValue):PutDate          = DATE '2013-02-04' (DATE)
    (0x03000000:NameValue):PutTime          = GMTTIME '10:43:55.720' (GMTTIME)
    (0x03000000:NameValue):ApplOriginData   = '    ' (CHARACTER)
    (0x03000000:NameValue):GroupId          = X'000000000000000000000000000000000000000000000000' (BLOB)
    (0x03000000:NameValue):MsgSeqNumber     = 1 (INTEGER)
    (0x03000000:NameValue):Offset           = 0 (INTEGER)
    (0x03000000:NameValue):MsgFlags         = 0 (INTEGER)
    (0x03000000:NameValue):OriginalLength   = -1 (INTEGER)
  )
  (0x01000000:Name):BLOB       = ( ['none' : 0x76c5da0]
    (0x03000000:NameValue):UnknownParserName = '' (CHARACTER)
    (0x03000000:NameValue):BLOB              = X'3c3f786d6c2076657273696f6e3d22312e30223f3e3c746573745f7265706f72742074657374636173653d22424942334e4f444530315343312220737461727454696d653d224d6f6e204665622030342030353a34333a35352045535420323031332220656e6454696d653d224d6f6e204665622030342030353a34333a353520455354203230313322207375636365737366756c3d2274727565223e3c636173652069643d22424942334e4f4445303173633122207374617475733d2273756363657373223e3c2f636173653e3c2f746573745f7265706f72743e' (BLOB)
  )
) 
```

请建议我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:41:51.453

要在命令提示符下运行跟踪，请运行以下命令。

```
 mqsichangetrace broker_name -u -e execution_grp_name -l none -f  com.mns.ms.sap.IP1_PFT_1_VNDR_MNG_P104(Flow name with schema) -c 5000
    mqsichangetrace broker_name -u -e execution_grp_name -l debug -f com.mns.ms.sap.IP1_PFT_1_VNDR_MNG_P104(Flow name with schema) -c 5000
    mqsireadlog broker_name -u -e execution_grp_name -f -o trace.xml
    mqsiformatlog -i trace.xml -o formattrace.txt 
```

阅读 formattrace.txt 文件并仅在此处发布最后一部分，因为该文件可能很大。

如果可能，在 HTTP 回复节点之前放置一个跟踪节点，并在跟踪节点的“模式”中提供：

```
${Root}
${Environment} 
```

这应该为我们提供有关您的流程中正在发生的事情的足够信息。完成后，从跟踪文件中发布 Root 的值和环境值。

我认为您的标题详细信息有问题。

# c# - C# LINQ 选择项棘手的过滤

> ID：14624587
> 
> 赞同：4
> 
> 时间：2013-01-31T11:23:51.813
> 
> 标签：c#, linq, self-join

我正在使用 C# 3.5 我有一个`IList<MyItemLinkProperty>`, 其中`MyItemLinkProperty`表示项目与其属性（一个或多个）之间的链接。它有`ItemId`, `PropertyId`, `PropertyValue`. 在这个列表`ItemId`中可能会出现很多次，因为一个项目可以有许多属性、颜色、大小等（这是一个与性能相关的问题，我有这种列表并且没有映射到项目实体）。

```
 ItemID  PropId  PropValue
itemProperty1 = { 1001,   1,      'Red' }
itemProperty2 = { 1001,   2,      'Small' }
itemProperty3 = { 1002,   1,      'Red' }
itemProperty4 = { 1002,   3,      'Medium' }
itemProperty5 = { 1003,   4,      'Green' }
itemProperty6 = { 1003,   2,      'Small' } 
```

现在我需要找到所有具有属性 A 和属性 B 的项目。例如“红色”和“小”。这应该给我`ItemID`1001 具有这两个属性。

在伪代码中，我想我在“给我属性 id 为 1 或 2 且项目 id 相同的项目”。然后我知道一个拥有这两个属性的项目。

我在想一个 linq 查询会做到这一点。但是没有得到这个工作并被卡住了。也许我在这里阻塞了我的思想，过度思考并让它变得过于复杂......

对此有最佳解决方案的任何提示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T11:28:11.903

您需要分组`ItemID`，然后检查每个组是否包含所有值，如下所示：

```
var smallRedIds = allItems
    .GroupBy(i => i.ItemID)
    .Where(g => g.Any(x => x.PropId == 1 && x.PropValue == "Red")
             && g.Any(x => x.PropId == 2 && x.PropValue == "Small"))
    .Select(g => g.Key); 
```

这将生成具有“小”和“红色”属性的所有项目 ID 的枚举。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T13:23:16.853

我遇到过类似的问题并使用 JOIN 解决了​​它。然后可以很容易地使用它来生成动态查询：

```
int[] propertyIds = new []{1,2,3,4};
var query = dc.ItemProperties.Where(i=> i.PropId == propertyIds[0]);

for (int i = 1; i < catsGroups.Length;i++)
{
    query = query.Join(dc.ItemProperties.Where(i=> i.PropId == propertyIds[i]), x => x.IDItem, x => x.IDItem,(x, y) => x);
}
return input; 
```

*这样做的好处是可以让您投影所有想要的列（与 GROUP BY 不同），这在某些情况下可能会有所帮助。`Any`生成的 SQL 的性能也非常好（使用or时没有子查询`All`）*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T11:29:43.960

您可以定义所需的属性列表，例如：

```
var desiredProperties = new[]{ "Red", "Small" }; 
```

然后你可以使用`Enumerable.All`and `Contains`：

```
var allMatchingItemProperties = allItemProperties
    .Where(ip => desiredProperties.All(dp => ip.Properties.Contains(dp))); 
```

# java - 用Java打印用户输入？

> ID：14624592
> 
> 赞同：1
> 
> 时间：2013-01-31T11:24:16.207
> 
> 标签：java, println

假设我有 Scanner 方法，然后我想打印用户输入。

以这段代码为例：

```
 String randomWords;
    Scanner kb = new Scanner(System.in);

    System.out.print("Please enter two words separated: ");

    randomWords = kb.next();    
    System.out.println(randomWords); 
```

如果输入的两个分开的词是

```
hello world 
```

仅有的

```
hello 
```

被打印

为什么是这样？以及如何打印包含空格的两个单词？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T11:26:07.100

请改用[**Scanner#nextLine(**](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#nextLine%28%29) )，

> 此方法返回当前行的其余部分，不包括末尾的任何行分隔符。

```
randomWords = kb.nextLine(); 
```

[**Scanner#next()**](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#next%28%29)根据分隔符读取下一个完整的标记。

> 从此扫描器中查找并返回下一个完整的令牌。一个完整的标记前后是匹配分隔符模式的输入

由于扫描仪的默认分隔符是**空白**，您应该使用[**Scanner#useDelimiter(str)**](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#useDelimiter%28java.util.regex.Pattern%29)显式定义扫描仪的分隔符。如果您使用`\n`下一行作为分隔符，您的当前代码将起作用。

```
 Scanner kb = new Scanner(System.in).useDelimiter("\n");
    System.out.print("Please enter two words separated: "); 
    randomWords = kb.next();    
    System.out.println(randomWords); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:26:05.727

使用[Scanner.nextLine()](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextLine%28%29)方法读取换行符（不包含）。

```
randomWords = kb.nextLine(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T11:26:50.653

```
public static void main(String[] args) {
        String randomWords;
        Scanner kb = new Scanner(System.in);

        System.out.print("Please enter two words separated: ");

        randomWords = kb.nextLine(); 
        System.out.println(randomWords);
    } 
```

# android - HTML5 navigator.online 在 WebView 中不起作用

> ID：14624594
> 
> 赞同：9
> 
> 时间：2013-01-31T11:24:18.257
> 
> 标签：android, html

我正在通过在 android 资产中使用 android 和离线 html5 页面来创建一个混合应用程序。navigator.online 在 Android Webview 中不起作用。

请帮忙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-11T16:13:19.800

如果有人还在寻找这个。我的解决方案是在我的活动中注册一个广播接收器以检测连接更改。

```
 @Override
protected void onPause() {
    super.onPause();

    if (connectivityChangeReceiver!=null) unregisterReceiver(connectivityChangeReceiver);
}

@Override
protected void onResume()
{
    super.onResume();

    IntentFilter intentFilter = new IntentFilter("android.net.conn.CONNECTIVITY_CHANGE");
    registerReceiver(connectivityChangeReceiver,intentFilter);
}

private BroadcastReceiver connectivityChangeReceiver = new BroadcastReceiver() {

    public void onReceive(Context context, Intent intent) 
    {
        mWebView.setNetworkAvailable(isNetworkAvailable(context));
    }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-16T15:47:30.903

确保您在`AndroidMenifest.xml`文件中提供以下权限：

```
<uses-permission android:name="android.permission.INTERNET />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T11:27:40.083

您可能想为您的活动添加以下代码行

```
document.addEventListener("online", onOnline, false);
document.addEventListener("offline", onOffline, false); 
```

确保检查函数中的值`function onOnline(){}`&`function onOffline(){}`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-21T12:43:29.890

你确定你没有弄错拼写吗？

它应该是 navigator.onLine (camelCase)

# css - 基于父 div 居中子 div

> ID：14624597
> 
> 赞同：0
> 
> 时间：2013-01-31T11:24:19.067
> 
> 标签：css

我有一个父 div 和一个子 div。例如，我想知道是否可以将子的宽度和高度表示为父 div 的百分比

```
<!doctype html>
<head>
<meta charset='utf-8' />
<title>Horizontal center a  div</title>
<style type='text/css'>
.one{
width:800px;
height:100px;
background-color:grey;
}
.two{
margin-top:30px;
margin-bottom:30px;
min-height:40px;
margin-left:30px;
width:90px;
background-color:pink;
display:inline-block;
}
</style>
</head>
<body>
<div class="one">
<div class="two">lorem ipsum</p>
</div>
</body>
</html> 
```

看到它在行动[http://jsfiddle.net/thiswolf/3qRgH/](http://jsfiddle.net/thiswolf/3qRgH/)

外部 div(parent) 有一个`height of 100px`，我的子 div 有一个`height of 40px`。我想将我的孩子放在父主题内，所以，`100px - 40px = 60px`我将 60px 划分两次并分配子 div`margin-top:30px`和`margin-bottom:30px;`。但是我想表达边距以百分比形式。我如何以百分比表示边距。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:58:43.460

[http://jsfiddle.net/thiswolf/5AZJD/](http://jsfiddle.net/thiswolf/5AZJD/)

这似乎有效，但我还没有证明

```
<!doctype html>
<head>
<meta charset='utf-8' />
<title>Horizontal center a  div</title>
<style type='text/css'>
.one{
position:relative;
width:800px;
height:100px;
background-color:grey;
}
.two{
position:absolute;
top:30%;
bottom:30%;
min-height:40px;
margin-left:30px;
width:90px;
background-color:pink;
display:inline-block;
}
</style>
</head>
<body>
<div class="one">
<div class="two">lorem ipsum</p>
</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:39:50.850

您可以以这种方式将 div 居中（已编辑）：

```
<!doctype html>
<head>
<meta charset='utf-8' />
<title>Horizontal center a  div</title>
<style type='text/css'>
.one{
width: 800px;
background-color: grey;
}
.two{
min-height: 40px;
margin: 30% 355px;
width: 90px;
background-color: pink;
display: inline-block;
}
</style>
</head>
<body>
<div class="one">
<div class="two">lorem ipsum</div>
</div>
</body>
</html> 
```

见[http://jsfiddle.net/3qRgH/2/](http://jsfiddle.net/3qRgH/2/)

这是你要问的吗？

# android - 如何在 ScrollView 中滑动到 imageView

> ID：14624601
> 
> 赞同：2
> 
> 时间：2013-01-31T11:24:45.640
> 
> 标签：android, android-imageview, android-scrollview

我有一个布局，其中有两个按钮：

1）返回
2）帮助

我在其中`ScollView`放置了两个图像视图：

1) firstImageVeiw
1) SecondImageVeiw

第一个图像视图将显示在前面，第二个放置在第一个图像下方。现在我想要如果我点击帮助按钮，滚动视图会自动滑动到第二个图像视图。

任何帮助或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:28:46.687

您可以使用滚动视图的[`scrollTo()`](http://developer.android.com/reference/android/widget/ScrollView.html#scrollTo%28int,%20int%29)方法

```
helpbutton.setOnClickListener(new OnClickListener() {
   @Override
   public void onClick(View v) {
     yourscrollview.scrollTo(0, yourImageView.getTop());
   }
  }); 
```

在运行时，您可以获取每个视图对象的位置

*   [getleft()](http://developer.android.com/reference/android/view/View.html#getLeft%28%29)
*   [顶部（）](http://developer.android.com/reference/android/view/View.html#getTop%28%29)
*   [获得权利（）](http://developer.android.com/reference/android/view/View.html#getRight%28%29)
*   [getBottom()](http://developer.android.com/reference/android/view/View.html#getBottom%28%29)

# css - 如何使用 CSS 为子 div 设置相等的高度

> ID：14624609
> 
> 赞同：0
> 
> 时间：2013-01-31T11:25:21.230
> 
> 标签：css, html, overflow

有小提琴[http://jsfiddle.net/only_dimon/6fgyy/](http://jsfiddle.net/only_dimon/6fgyy/) 有css：

```
.row {
width: 600px;
border: 1px solid #ccc;
overflow: hidden;
margin: 0 auto;
position: relative;
}
.news {
width: 190px;
margin-left: 15px;
border: solid 1px #ccc;
background: #ddd;
float: left;
box-sizing: border-box;
padding: 10px;
height: 100%;
}
.news:first-child {
 margin-left: 0;   
} 
```

JQuery 毫无问题地定义了 div 的高度。为什么孩子 div 不能得到父母 100% 的高度？红色表示具有自动高度的 div 的高度是非设定值。为什么呢？例如，overflow:hidden 使 div “行”以获得孩子的最大高度。它在视觉上改变了自身的宽度。

请给我解释一下。

提前Tnx。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:33:14.340

阅读[**CSS 高度属性**](http://www.w3.org/TR/CSS2/visudet.html#the-height-property)的规范。

> 该**百分比**是相对于生成框的包含块的高度计算的。如果包含块的高度没有明确指定（即，它取决于内容高度），并且该元素不是绝对定位的，则该值计算为'auto'。根元素上的百分比高度是相对于初始包含块的。
> 
> *注意：对于包含块基于块级元素的绝对定位元素，百分比是相对于该元素的填充框高度计算的。这是从 CSS1 的一个变化，其中百分比总是相对于父元素的内容框计算。*

因此，您应该将孩子的设置`position`为`absolute`（这将忽略该`float`设置并且需要为每个孩子明确的水平定位）或明确指定`height`容器的，例如：

```
.row {
    position: relative;
    height: 400px;
    width: 600px;
    border: 1px solid #ccc;
    overflow: hidden;
    margin: 0 auto;
} 
```

这是您[更新的小提琴](http://jsfiddle.net/onury/6fgyy/5/)。
另外，请查看有关“**等高列”的**[这种方法](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T17:24:56.780

高度继承需要一直向上。

尝试：

```
body, html { height:100% }

.row {
    width: 600px;
    border: 1px solid #ccc;
    overflow: hidden;
    margin: 0 auto;
    height:100%;
    position: relative;
} 
```**

# iphone - 如何在 iphone sdk 的单个视图控制器中从一个视图导航到另一个视图？

> ID：14624611
> 
> 赞同：0
> 
> 时间：2013-01-31T11:25:35.467
> 
> 标签：iphone, ios, uinavigationcontroller

有人可以告诉我：如何在 iphone sdk 的单个视图控制器中从一个视图导航到另一个视图？我有一个应用程序，我想在单个视图控制器中推送到下一个视图并弹出到上一个视图。如何实现此功能？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:33:33.200

您可以添加和删除您的第二视图。像这样导航

```
-(IBAction)navigate:(id)sender
{
  [self.view addSubView:secondView];
} 
```

这个是第一个视图

```
-(IBAction)popToFirstView:(id)sender
{
  [secondView removeFromSuperView];
} 
```

注意：- 如果要提供动画效果，可以使用动画来添加和删除视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:34:05.180

如果您需要一个视图控制器，您可以尝试使用包含 2 个视图的 UIScrollView，以及一个从一个视图滚动到另一个视图的按钮......但如果我可以给出提示，最好使用 2 个视图控制器和一个导航视图控制器

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T12:11:08.037

您需要使用 UINavigation Controller 来获取推送和弹出。

这样做

在**AppDelegate.h**文件中

```
#import <UIKit/UIKit.h>

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;
//this will be your first screen
@property (strong, nonatomic) FavViewController *favViewController;

@end 
```

在 A* *ppDelegate.m* * 文件中

```
#import "AppDelegate.h"
#import "FavViewController.h"

@implementation AppDelegate

@synthesize window = _window;
@synthesize favViewController;

    - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {
        self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]; 

        //initialize view controller
        favViewController = [[FavViewController alloc] initWithNibName:@"FavViewController" bundle:nil];

       //add navigation controller
        UINavigationController *favouriteView = [[UINavigationController alloc] initWithRootViewController:favViewController];  

       //add controller to witndow
        self.window.rootViewController = favouriteView;   
        [self.window makeKeyAndVisible];    

        return YES;
    }

@end 
```

现在来到**UIViewController**，您想在其中加载/推送到新控制器

**加载/推送到新控制器**使用此代码

```
//this will be next screen
DetailsViewController *detailsViewController = [[DetailsViewController alloc ]init];
[self.navigationController pushViewController:detailsViewController animated:YES]; 
```

返回**或弹出控制器使用此**

```
//now it will send back to parent screen
[self.navigationController popViewControllerAnimated:YES]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T11:58:40.693

我已经找到了解决这个问题的方法，下面是解决方案：-

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController
{
    IBOutlet UIButton *backbtn;
    IBOutlet UIButton *nxtBtn;
    IBOutlet UILabel *label;
}
-(IBAction)nxt:(id)sender;
-(IBAction)ba:(id)sender;

@end

#import "ViewController.h"

@interface ViewController ()
@end

int count=0;

@implementation ViewController

- (void)viewDidLoad
{
    label.text=[[NSUserDefaults standardUserDefaults] objectForKey:@"NavigtionNumber"];
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}
-(IBAction)nxt:(id)sender
{
    count++;
    label.text=[NSString stringWithFormat:@" navigation time %d",count];

    [[NSUserDefaults standardUserDefaults] setObject:label.text forKey:@"NavigtionNumber"];
    [[NSUserDefaults standardUserDefaults] synchronize];

    ViewController *vc=[[ViewController alloc] init];

    [self.navigationController pushViewController:vc animated:YES];

}

-(IBAction)ba:(id)sender
{
    count--;
    label.text=[NSString stringWithFormat:@" navigation time %d",count];

    [[NSUserDefaults standardUserDefaults] setObject:label.text forKey:@"NavigtionNumber"];
    [[NSUserDefaults standardUserDefaults] synchronize];

    [self.navigationController popViewControllerAnimated:YES];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

希望这将在未来对其他人有所帮助。

谢谢。

# jquery - jqueryMobile 点击和冒泡/传播

> ID：14624621
> 
> 赞同：3
> 
> 时间：2013-01-31T11:26:17.230
> 
> 标签：jquery, jquery-mobile, event-handling, tap, jquery-events

在 android 2.x 浏览器中查看此示例。它是在我的应用程序中复制场景的示例。

[http://johnchacko.net/samples/tap.html](http://johnchacko.net/samples/tap.html)

它是关于收听'tap'并从监听器调用changePage ...

第二页有一些输入字段，“点击”事件冒泡/传播到第二页，焦点随机设置到输入字段...

我读过类似的问题，想知道是否有人遇到过同样的问题并找到解决方法....

或者我必须只使用“点击”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:47:13.467

它可以通过以下几种方式修复：

1.  在点击/单击事件之前，请在调用 changePage 之前使用此方法：

    ```
    e.stopPropagation();
    e.stopImmediatePropagation(); 
    ```

    或者：

    ```
    $(document).on('tap', '#button', function(){       
        e.stopPropagation();
        e.stopImmediatePropagation();
        // Rest of the code
    }); 
    ```

2.  最初禁用第二页上的所有输入框，在 pageshow 事件上使用 settimeout 功能并在 cca 10 ms 后启用它们

# titanium - 我如何在 Appcelerator Allow 中根据 Size wise 设置 TextField 高度属性？

> ID：14624624
> 
> 赞同：0
> 
> 时间：2013-01-31T11:26:25.887
> 
> 标签：titanium, appcelerator-mobile

我是 Appcelerator Alloy 的新开发人员。请帮助我，我如何根据设备显示大小设置文本字段高度属性。

在钛。

```
 var name_Txt = Titanium.UI.createTextField({
        height : (Ti.Platform.displayCaps.platformHeight< 481) ? 32 : Ti.Platform.displayCaps.platformHeight * 6 / 100,
        width : "94%",
        backgroundImage : "../images/textfield_dropdown.png",
        top : "10",
        paddingLeft : "10",
        hintText : "Input Activity - optional scroll",
        font : {
            16,
            fontWeight : "bold",
        },
    }); 
```

在合金

```
<TextField height="?" id="name_Txt" left ="2%" paddingLeft = "5" backgroundImage = "/appimage/textfield.png" width ="60%"></TextField> 
```

或在 .tss 文件中

```
"#name_Txt":{
height : ?,
} 
```

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T23:14:37.797

只需在此视图的控制器文件中以编程方式执行此操作。例如，

假设您有一个名为 main.xml 的视图

```
<Alloy>
    <TextField id="name_Txt"></TextField>
</Alloy> 
```

一个名为 main.tss 的样式文件：

```
"#name_Txt":{
    left : "2%"
    paddingLeft: 5,
    backgroundImage: "/appimage/textfield.png",
    width:"60%"  
} 
```

还有一个名为 main.js 的控制器：

```
$.name_Txt.height = (Ti.Platform.displayCaps.platformHeight< 481) ? 32 : Ti.Platform.displayCaps.platformHeight * 6 / 100; 
```

# iphone - ios中UIimage视图中的图像裁剪

> ID：14624640
> 
> 赞同：-2
> 
> 时间：2013-01-31T11:27:35.020
> 
> 标签：iphone, ios, uiimageview, uiimage

> **可能重复：**
> [裁剪 UIImage](https://stackoverflow.com/questions/158914/cropping-a-uiimage)

我有一个 UIImage 视图，因为我需要在该 UIImage 视图中裁剪一些空间并需要存储为 Uiimage。然后传递到保存图像的另一个视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:59:56.953

这可能会有所帮助。它主要是从我的代码中复制粘贴。

我有一个带有原始图像的大 UIImageView - *mImageViewCropper*，然后我有一个半透明视图，然后是一个较小的 UIImageView 覆盖 - *mImageViewCropperSmallWindow*。（它看起来像 Instragram 中的裁剪器）

在 pinchGesture 和 panGesture 上，我调整了小 imageView 的大小，然后我调用了以下函数，它将大图片中对应的裁剪图像加载到小 imageView 中。

```
-(void)refreshImageInMImageViewCropperSmallWindow
{
    double imageBeginX = 0; //we need to set these because of possible ratio mismatch (black stripes)
    double imageEndX = 0;
    double imageBeginY = 0;
    double imageEndY = 0;
    CGSize imageSize = mImageViewCropper.image.size;
    imageBeginX = mImageViewCropper.frame.size.width /2 - imageSize.width/2;
    imageEndX = mImageViewCropper.frame.size.width /2 + imageSize.width/2;
    imageBeginY = mImageViewCropper.frame.size.height /2 - imageSize.height/2;
    imageEndY = mImageViewCropper.frame.size.height /2 + imageSize.height/2;

    CGRect smallFrame = mImageViewCropperSmallWindow.frame;

    UIImage *croppedImage = [mImageViewCropper.image crop: CGRectMake(smallFrame.origin.x - imageBeginX, smallFrame.origin.y - imageBeginY, 
    smallFrame.size.width, smallFrame.size.height)];
    mImageViewCropperSmallWindow.image = croppedImage;        
} 
```

-方法远非完美，但它是一个起点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:48:28.223

有很多方法可以使用 Core Graphics 函数裁剪图像，最基本的一种是：

```
CGRect cropRect = CGRectMake(0, 0, 100, 100);
CGImageRef cropped_img = CGImageCreateWithImageInRect(yourUIImage.CGImage, cropRect) 
```

也请检查下面的教程

[如何在 iOS 上裁剪图像 (UIImage)](http://mobiledevelopertips.com/graphics/how-to-crop-an-image.html)

# visual-studio-2010 - 如何从 Visual Studio 2010 更新我的项目模板以支持 Visual Studio 2012？

> ID：14624643
> 
> 赞同：1
> 
> 时间：2013-01-31T11:27:53.610
> 
> 标签：visual-studio-2010, visual-studio-2012

我和我的团队使用 Visual Studio 2010 作为 C#/.NET IDE，但我们决定将其升级到 2012，这就是我们所做的。

我们之前在 Visual Studio 2010 上创建了一堆项目模板。

我们如何为 2012 版 IDE 创建/转换它们？

我已经[从 msdn 尝试了这个链接，](http://msdn.microsoft.com/en-us/library/dd885241.aspx)但没有运气，因为我的 Visual Studio 在此步骤中没有显示 VSIX Project 选项：

```
On the File menu, click New and then click Project. Select either Visual Basic or Visual C#, select Extensibility, and then select VSIX Project. 
```

任何提示/如何？

提前致谢

# excel - Excel 使用的字符编码

> ID：14624647
> 
> 赞同：1
> 
> 时间：2013-01-31T11:28:11.610
> 
> 标签：excel, csv, encoding

我正在生成要在 Adwords 编辑器中导入的 csv 文件。我的问题是我必须在 Excel 中打开 csv 并再次保存，因为编辑器没有正确编码字符。

保存 csv 时如何找到 Excel 使用的字符编码？

# sql-server - “将数据类型 varchar 转换为日期时间时出错”

> ID：14624649
> 
> 赞同：16
> 
> 时间：2013-01-31T11:28:23.263
> 
> 标签：sql-server

如何解决以下过程中的错误？

```
CREATE PROCEDURE cards
    @salesman VARCHAR(10),
    @RCV10 INT,
    @RCV09 INT,
    @RCV15 INT,
    @GPRS15 INT,
    @RCV20 INT,
    @RCV25FTT INT,
    @RCV25 INT,
    @RCV31 INT,
    @RCV30 INT,
    @RCV35 INT,
    @RCV50 INT,
    @RCV55 INT,
    @SIM INT,
    @VTOPSIM INT,
    @VTOPBAL INT,
    @THREEGSIM INT,
    @entrydate DATETIME
AS
BEGIN
    IF EXISTS(
           SELECT *
           FROM   CardsIssued
           WHERE  salesman = @salesman
                  AND RCV10 > @RCV10
                  AND RCV09 > @RCV09
                  AND RCV15 > @RCV15
                  AND GPRS15 > @GPRS15
                  AND RCV20 > @RCV20
                  AND RCV25FTT > @RCV25FTT
                  AND RCV25 > @RCV25
                  AND RCV31 > @RCV31
                  AND RCV30 > @RCV30
                  AND RCV35 > @RCV35
                  AND RCV50 > @RCV50
                  AND RCV55 > @RCV55
                  AND SIM > @SIM
                  AND VtopSim > @VTOPSIM
                  AND VtopBal > @VTOPBAL
                  AND ThreeGSim > @THREEGSIM
                  AND EntryDate = @entrydate
       )
    BEGIN
        INSERT Cards_Returned
        VALUES
          (
            @salesman,
            @RCV10,
            @RCV09,
            @RCV15,
            @GPRS15,
            @RCV20,
            @RCV25FTT,
            @RCV25,
            @RCV31,
            @RCV30,
            @RCV35,
            @RCV50,
            @RCV55,
            @SIM,
            @VTOPSIM,
            @VTOPBAL,
            @THREEGSIM,
            @EntryDate
          )
    END
    ELSE
        PRINT'CARDS RETURNED CANNOT BE GREATER THAN CARDS ISSUED'
END 
```

运行为：

```
execute cards 'S001',50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,'28/1/2013' 
```

给出以下错误：

```
Msg 8114, Level 16, State 5, Procedure cards, Line 0
Error converting data type varchar to datetime 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-31T11:31:57.070

`'28/1/2013'`是一种模棱两可的格式 - SQL Server 可能将其解释为`dd/mm/yyyy`或`mm/dd/yyyy`. 在这种情况下，它做了后者，并且不知道一年中的第 28 个月是什么。

改为使用`'20130128'`。这*总是*被解释为`yyyymmdd`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-27T15:57:11.310

有同样的错误。在我的情况下，它将 datetime2 值传递给 datetime 列：

必须将字符串更改为日期时间（3 位）而不是 7 位毫秒：

```
exec [dbo].[UpdateProc] @LastViewDate='2016-07-27 11:03:04.1378957' 
```

至：

```
exec [dbo].[UpdateProc] @LastViewDate='2016-07-27 11:03:04.137' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T11:33:27.833

也许尝试将@EntryDate 的输入变量更改为varchar。然后，当进一步使用它时，对其执行 CONVERT(datetime,@EntryDate) 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T11:32:00.663

根据您的错误消息，`problem is with the date format`. *将您的日期*格式化为`ISO format (yyyymmdd)`执行前，如下所示。

```
execute cards 'S001',50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,'20130128' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-16T15:43:47.027

那将是日期时间转换 103 (dd/mm/yyyy)：

```
--receive parameter as varchar <br/>
declare @dateEntry as varchar(10) <br/>
set @dateEntry= '28/1/2013' 

--do the conversion <br/>
declare @dateResult as datetime <br/>
set @dateResult = convert(datetime, @dateEntry, 103) <br/>
select @dateResult <br/> 
```

参考：[http ://www.sqlusa.com/bestpractices/datetimeconversion/](http://www.sqlusa.com/bestpractices/datetimeconversion/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-24T02:21:43.423

更多评论..和不同的解决方案..

SQL Server Profiler 按照示例给我日期：

```
exec P707005CreateMemo '4142541','QRate',NULL,NULL,'2021-06-24 00:00:00' 
```

相关问题在这里：

[SQL Trace/Profiler - 显示不明确的日期格式 (.NET Core/EF)](https://stackoverflow.com/questions/54198137/sql-trace-profiler-ambiguous-date-format-being-displayed-net-core-ef)

SQL Server 探查器似乎对 exec 执行这种不同的日期格式，但不是 INSERT（例如）..

**似乎 exec 语句中 SQL Server Profiler 日期值的解决方案是在日期中添加 T （手动）。**

IE

```
exec P707005CreateMemo '4142541','QRate',NULL,NULL,'2021-06-24T00:00:00' 
```

# oracle - exec 从过程中收集表统计信息

> ID：14624650
> 
> 赞同：6
> 
> 时间：2013-01-31T11:28:25.647
> 
> 标签：oracle

如果我创建一个过程：

```
CREATE OR REPLACE PROCEDURE SchameB.PRC_GATHER_STATS IS
BEGIN
    SYS.DBMS_STATS.GATHER_TABLE_STATS( 'SchName', 'TableName', CASCADE => TRUE);
END; 
```

并执行它；

```
EXEC SchameB.PRC_GATHER_STATS; 
```

这给了我错误`ORA-20000: Unable to analyze TABLE "SchameA"."TableName", insufficient privileges or does not exist`。但这有效：

```
EXEC SYS.DBMS_STATS.GATHER_TABLE_STATS( 'SchameA', 'TableName', CASCADE => TRUE); 
```

过程和表的用户`EXEC`在不同的模式中。

为什么通过程序执行此操作时会出现错误？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T12:03:09.873

要在另一个模式中收集对象的统计信息，您需要`ANALYZE ANY`系统权限。我似乎运行您的过程的用户具有该特权，但通过角色授予。正如[文档所说](http://docs.oracle.com/cd/E25054_01/network.1111/e16543/authorization.htm#autoId16)：

> 在使用定义者权限执行的任何命名的 PL/SQL 块（存储过程、函数或触发器）中，所有角色都被禁用。

您可以`GRANT ANALYZE ANY`直接对您的用户，也可以创建[具有调用者权限](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/subprograms.htm#LNPLS00809)的过程，如下所示：

```
CREATE OR REPLACE PROCEDURE SchameB.PRC_GATHER_STATS
AUTHID CURRENT_USER IS
BEGIN
    SYS.DBMS_STATS.GATHER_TABLE_STATS('SchName', 'TableName', CASCADE => TRUE);
END;
/ 
```

当您直接执行`EXEC`该`DBMS_STATS`过程时，它作为匿名块运行，并且始终以调用者的权限运行 - 尊重角色。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-18T23:04:46.043

如果您希望该过程能够由没有`ANALYSE ANY`角色的用户运行，那么您可以`AUTHID`将`DEFINER`

```
CREATE OR REPLACE PROCEDURE SchameB.PRC_GATHER_STATS
AUTHID DEFINER IS
BEGIN
    SYS.DBMS_STATS.GATHER_TABLE_STATS('SchName', 'TableName', CASCADE => TRUE);
END; 
```

# c++ - GCC 错误：带有 MSVC C++ 代码的 ')' 标记之前的预期主表达式

> ID：14624651
> 
> 赞同：2
> 
> 时间：2013-01-31T11:28:27.087
> 
> 标签：c++, visual-c++, gcc, compiler-errors

这是 GCC 产生的奇怪错误的代码，而不是 MSVC 产生的错误（5 个错误，在错误行的注释形式中引用）：

```
/* Match STRING against the filename pattern PATTERN, returning zero if
   it matches, nonzero if not.  */
int GNU_fnmatch (const char* pattern,const char* string,int flags)
{
    register const char *p = pattern, *n = string;
    register unsigned char c;

    #define FNM_CASEFOLD 16
    #define FNM_LEADING_DIR 8

    #define FOLD(c) ((flags & FNM_CASEFOLD) ? tolower (c) : (c))

    while ((c = *p++) != '\0')
    {
        c = FOLD (c);

        switch (c)
        {
        case '?':
            if (*n == '\0')
                return 1;
            else if ((flags & FNM_PATHNAME) && *n == '/')
                return 1;
            else if ((flags & FNM_PERIOD) && *n == '.' &&
                (n == string || ((flags & FNM_PATHNAME) && n[-1] == '/')))
                return 1;
            break;

        case '\\':
            if (!(flags & FNM_NOESCAPE))
            {
                c = *p++;
                c = FOLD (c);
            }
            if (FOLD ((unsigned char)*n) != c)
                return 1;
            break;

        case '*':
            if ((flags & FNM_PERIOD) && *n == '.' &&
                (n == string || ((flags & FNM_PATHNAME) && n[-1] == '/')))
                return 1;

            for (c = *p++; c == '?' || c == '*'; c = *p++, ++n)
            if (((flags & FNM_PATHNAME) && *n == '/') ||
            (c == '?' && *n == '\0'))
                return 1;

            if (c == '\0')
                return 0;

            {
            unsigned char c1 = (!(flags & FNM_NOESCAPE) && c == '\\') ? *p : c;
            c1 = FOLD (c1);
            for (--p; *n != '\0'; ++n)
                if ((c == '[' || FOLD ((unsigned char)*n) == c1) &&
                GNU_fnmatch (p, n, flags & ~FNM_PERIOD) == 0)
                return 0;
            return 1;
            }

        case '[':
            {
            /* Nonzero if the sense of the character class is inverted.  */
            register int not; // Error  1   error : expected unqualified-id before '!' token

            if (*n == '\0')
                return 1;

            if ((flags & FNM_PERIOD) && *n == '.' &&
            (n == string || ((flags & FNM_PATHNAME) && n[-1] == '/')))
                return 1;

            not = (*p == '!' || *p == '^'); // Error    2   error : expected primary-expression before '=' token
            if (not) // Error   3   error : expected primary-expression before ')' token
                ++p;

            c = *p++;
            for (;;)
                {
            register unsigned char cstart = c, cend = c;

            if (!(flags & FNM_NOESCAPE) && c == '\\')
                cstart = cend = *p++;

            cstart = cend = FOLD (cstart);

            if (c == '\0')
                /* [ (unterminated) loses.  */
                return 1;

            c = *p++;
            c = FOLD (c);

            if ((flags & FNM_PATHNAME) && c == '/')
                /* [/] can never match.  */
                return 1;

            if (c == '-' && *p != ']')
                {
                cend = *p++;
                if (!(flags & FNM_NOESCAPE) && cend == '\\')
                    cend = *p++;
                if (cend == '\0')
                    return 1;
                cend = FOLD (cend);

                c = *p++;
                }

            if (FOLD ((unsigned char)*n) >= cstart
                && FOLD ((unsigned char)*n) <= cend)
                goto matched;

            if (c == ']')
                break;
                }
            if (!not) // Error  4   error : expected primary-expression before ')' token
                return 1;
            break;

            matched:;
            /* Skip the rest of the [...] that already matched.  */
            while (c != ']')
                {
            if (c == '\0')
                /* [... (unterminated) loses.  */
                return 1;

            c = *p++;
            if (!(flags & FNM_NOESCAPE) && c == '\\')
                /* XXX 1003.2d11 is unclear if this is right.  */
                ++p;
                }
            if (not) // Error   5   error : expected primary-expression before ')' token
                return 1;
            }
            break;

        default:
            if (c != FOLD ((unsigned char)*n))
            return 1;
        }

        ++n;
    }

    if (*n == '\0')
        return 0;

    if ((flags & FNM_LEADING_DIR) && *n == '/')
    /* The FNM_LEADING_DIR flag says that "foo*" matches "foobar/frobozz".  */
        return 0;

    return 1;
} 
```

我的意思是，它甚至没有意义，纠缠于一个**不存在的'！' 令牌（错误 1）！！！**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T11:31:35.760

**[`not`](http://cs.smu.ca/~porter/csc/ref/cpp_keywords.html)**是 C++ 下的保留字，但在 C 下不是。

该错误是不言自明的：

```
if (!not) // Error  4   error : expected primary-expression before ')' token
        ^ //expecting operand for 'not' to act on, got ')' instead. 
```

使用 GCC中的任何`C` [选项](http://tigcc.ticalc.org/doc/comopts.html)进行编译，或更改名称。

# java - 如何自动取消转义字符串中的转义字符

> ID：14624657
> 
> 赞同：2
> 
> 时间：2013-01-31T11:28:58.390
> 
> 标签：java, escaping

我正在使用转义序列字符从服务接收数据...我已设法通过此代码对它们进行元素化

```
results=results.replace("\\\"", "\"");
if(results.startsWith("\"")) {
    results=results.substring(1,results.length());
}
if(results.endsWith("\"")) {
    results=results.substring(0,results.length()-1); 
} 
```

它工作正常，但是对于某些字符串，它在创建 json 对象时会引发异常...如何自动取消转义结果中的转义字符，我已经搜索了答案，但其中许多人说要使用第三方库...什么是我能做到的最好的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T11:33:08.367

我认为[Apache Commons](http://commons.apache.org/lang/)工作得很好。它有`StringEscapeUtils`一堆不同的静态方法来转义和取消转义字符串，所以我认为你应该检查一下。

祝你好运！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-31T11:40:37.793

将这部分代码放在解析数组下面

```
 // to remove all <P> </p> and <br /> and replace with ""
                     content = content.replace("<br />", "");
                     content = content.replace("<p>", "");
                     content = content.replace("</p>", ""); 
```

对我来说，内容是对象，根据您的需要替换“内容”。

# jquery - ajax 成功不适用于 1.7.1

> ID：14624660
> 
> 赞同：0
> 
> 时间：2013-01-31T11:29:04.690
> 
> 标签：jquery

最近我将 jquery 版本从 1.2.6 升级到 1.7.1 并且 ajax 调用不起作用。

它不会进入成功块。

如果我恢复 jquery 版本，即 1.2.6 代码绝对可以正常工作。

```
function getCompanyDetails(){

            var email = arguments[0].value;
            alert(email);
            validateForm(email);
            if(email)
                {  var args = arguments;
                    $.ajax({
                            type: "POST",
                            url: "/servlet/genericate?email=vis.gu%40mphasis.com",
                            dataType:'json',
                            success: function(data) {

                            alert(data);
                                if(data.companyName=='null')
                                {
                                    $("#"+""+args[2]+"").val("");
                                }
                                else
                                {
                                    $("#"+""+args[2]+"").val(data.companyName);                     
                                }

                                if(data.address=='null')
                                {
                                    $("#"+""+args[3]+"").val("");
                                }
                                else
                                {
                                    $("#"+""+args[3]+"").val(data.address);
                                }

                    },
                            error: function() {
                            alert("Error");
                    }
                    });
                 }  
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:48:14.083

尝试更换

```
success: function(data) {
              alert(data); 
```

和

```
statusCode: {
    200: function(data) {
              alert(data); 
```

我知道这不是一个完美和最好的答案，但至少你可以试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:53:47.193

如果你要更新你的 jQuery，你应该更新到最新版本。所有关于更新的说明都在[**这里**](http://jquery.com/upgrade-guide/1.9/#toggle-function-function-removed)

**一旦你更新，这就是 jQuery 必须说的让它向后兼容：**

我们意识到现有的站点和插件可能会受到这些更改的影响，并且正在为过渡升级路径提供 jQuery Migrate 插件。下面的个别描述表明是否可以使用 jQuery Migrate 插件恢复 1.9 中更改的行为。请注意，jQuery 1.9 中的所有更改也将适用于 jQuery 2.0，并且 jQuery Migrate 插件也将在那里可用。

jQuery Migrate 插件的未压缩开发版本包括控制台日志输出，用于在使用特定已弃用和/或删除的功能时发出警告。这使得它作为一种迁移调试工具很有价值，用于查找和修复现有 jQuery 代码和插件中的问题。它可以用于 jQuery 核心版本的诊断，一直到 1.6.4。

该插件的压缩版本不会生成任何日志输出，并且可以在需要 jQuery 1.9 或更高版本但还必须使用较旧的不兼容 jQuery 代码或插件时在生产站点上使用。理想情况下，这只会用作短期解决方案，但这是由您做出的决定。

这是[**MIGRATE PLUGIN的链接**](https://github.com/jquery/jquery-migrate/)

# visual-studio-2010 - 在应用程序配置中找不到连接名称“ApplicationServices”或连接字符串为空

> ID：14624662
> 
> 赞同：0
> 
> 时间：2013-01-31T11:29:14.257
> 
> 标签：visual-studio-2010, webgrid, nuget-package

我刚刚在我的 Visual Studio 2010（MVC3，C#）中添加了来自 NuGet 的名为“ASP.NET Web Helpers Library 2.0.20710.1”（Install-Package microsoft-web-helpers）的包。我安装它以在我的应用程序中使用 WebGrid。运行项目时出现错误：***在应用程序配置中找不到连接名称“ApplicationServices”或连接字符串为空。***

***在声明 <%@ Control %> 和 <%@ Page %> 时，我再次在所有 aspx 和 ascx 页面中出现蓝色波浪线***

**Web.config 文件内容：**

```
<?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=152368
  -->

<configuration>
  <connectionStrings>

    <add name="connect_str" connectionString="Data Source=APRICA-SERVER\SQLEXPRESS;Initial Catalog=CRM;User ID=sa"/>

  </connectionStrings>

  <appSettings>
    <add key="webpages:Version" value="1.0.0.0"/>
    <add key="ClientValidationEnabled" value="true"/>
    <add key="UnobtrusiveJavaScriptEnabled" value="true"/>
  </appSettings>

  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </assemblies>
    </compilation>

    <authentication mode="Forms">
      <forms loginUrl="~/Account/LogOn" timeout="2880" />
    </authentication>

    <membership>
      <providers>
        <clear/>
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices"
             enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
             maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
             applicationName="/" />
      </providers>
    </membership>

    <profile>
      <providers>
        <clear/>
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/" />
      </providers>
    </profile>

    <roleManager enabled="false">
      <providers>
        <clear/>
        <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />
        <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
      </providers>
    </roleManager>

    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages"/>
      </namespaces>
    </pages>
  </system.web>

  <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="WebServiceFetchFromOldDbSoap" closeTimeout="00:01:00"
          openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
          allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
          messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
          useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
              realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://localhost:3880/WebServiceFetchFromOldDb.asmx"
        binding="basicHttpBinding" bindingConfiguration="WebServiceFetchFromOldDbSoap"
        contract="ServiceReferenceOLDDB.WebServiceFetchFromOldDbSoap"
        name="WebServiceFetchFromOldDbSoap" />
    </client>
  </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T11:47:25.527

您的问题是 web.config 中的**成员资格部分**。ASP.NET 配置工具默认使用“ApplicationServices”。如果您将其更改为使用“connect_str”连接字符串，它应该可以正常工作。将**connectionStringName="ApplicationServices"**替换为**connectionStringName="connect_str"**，如下所示。**Profile**和**RoleManager 也是**如此。

```
 <membership>
      <providers>
        <clear/>
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="connect_str"
             enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
             maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
             applicationName="/" />
      </providers>
    </membership> 
```

至于其他问题，在AppSettings下修改key：

```
<add key="webpages:Version" value="1.0.0.0"/> 
```

到

```
<add key="webpages:Version" value="2.0.0.0"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:41:03.637

我认为您要么忘记在“应用程序配置”中编写连接字符串。或者您的连接字符串具有不同的名称。

看，您提到了您的连接字符串名称 =“connect_str” 将其更改为 ApplicationServices，反之亦然..

# nhibernate - 在NHibernate中按函数结果排序？

> ID：14624663
> 
> 赞同：1
> 
> 时间：2013-01-31T11:29:16.773
> 
> 标签：nhibernate

我的数据库中有一个包含地理位置的表。我想编写一个函数来查找最接近某个点的位置。我在 NHibernate 中试过这个：

```
public Location GetClosestLocation(double latitude, double longitude)
{
    var closest = Session.QueryOver<Location>()
        .OrderBy(location => 
            (location.Latitude - latitude) + 
            (location.Longitude - longitude))
        .Asc.SingleOrDefault();

    return closest;
} 
```

但它不起作用 - 我收到运行时错误。

我该怎么做才能返回最近的位置？是否可以通过 NHibernate 的简单函数的结果进行排序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T12:50:11.737

我不认为 QueryOver 可以理解这样的表达式——它对 lambda 表达式的使用仅限于识别属性。有一个采用 IProjection 的 OrderBy() 重载，它提供了更大的灵活性。

使用 LINQ，您应该能够使用几乎与您尝试过的代码相同的代码：

```
var closest = Session.Query<Location>()
                     .OrderBy(location => 
                                 (location.Latitude - latitude) + 
                                 (location.Longitude - longitude))
                     .SingleOrDefault(); 
```

# c# - EqualityComparer 如何 .Default 在内部工作？

> ID：14624667
> 
> 赞同：9
> 
> 时间：2013-01-31T11:29:22.330
> 
> 标签：c#

考虑 T = 字符串。

我很好奇它是否使用类似的东西：`typeof(EqualityComparer<T>).GetInterface("IEqualityComparer<T>");`

有什么建议么..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T11:31:00.383

由反射器提供：

```
public static EqualityComparer<T> Default
{
    get
    {
        EqualityComparer<T> defaultComparer = EqualityComparer<T>.defaultComparer;
        if (defaultComparer == null)
        {
            defaultComparer = EqualityComparer<T>.CreateComparer();
            EqualityComparer<T>.defaultComparer = defaultComparer;
        }
        return defaultComparer;
    }
}

private static EqualityComparer<T> CreateComparer()
{
    RuntimeType c = (RuntimeType) typeof(T);
    if (c == typeof(byte))
    {
        return (EqualityComparer<T>) new ByteEqualityComparer();
    }
    if (typeof(IEquatable<T>).IsAssignableFrom(c))
    {
        return (EqualityComparer<T>) RuntimeTypeHandle.CreateInstanceForAnotherGenericParameter((RuntimeType) typeof(GenericEqualityComparer<int>), c);
    }
    if (c.IsGenericType && (c.GetGenericTypeDefinition() == typeof(Nullable<>)))
    {
        RuntimeType type2 = (RuntimeType) c.GetGenericArguments()[0];
        if (typeof(IEquatable<>).MakeGenericType(new Type[] { type2 }).IsAssignableFrom(type2))
        {
            return (EqualityComparer<T>) RuntimeTypeHandle.CreateInstanceForAnotherGenericParameter((RuntimeType) typeof(NullableEqualityComparer<int>), type2);
        }
    }
    if (c.IsEnum && (Enum.GetUnderlyingType(c) == typeof(int)))
    {
        return (EqualityComparer<T>) RuntimeTypeHandle.CreateInstanceForAnotherGenericParameter((RuntimeType) typeof(EnumEqualityComparer<int>), c);
    }
    return new ObjectEqualityComparer<T>();
} 
```

所以你可以看到如果 T = string 它将返回`GenericEqualityComparer<string>`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T11:36:54.053

`EqualityComparer<T>.Default`通过调用`virtual`方法工作`Equals(object)`，这些方法`GetHashCode()`由.`System.Object``T`

请注意，由于方法是，因此可以使用比可能使用`virtual`的更多派生类的实现。`T`例如：

```
EqualityComparer<object>.Default
  .Equals(new Uri("http://example.com/"), new Uri("http://example.com/")) 
```

会回来`true`的，即使

```
Object.ReferenceEquals(new Uri("http://example.com/"), new Uri("http://example.com/")) 
```

和

```
(object)new Uri("http://example.com/") == (object)new Uri("http://example.com/") 
```

两者都返回`false`。

在 where `T`is的情况下`string`，该类`System.String`重载有问题的两个方法并使用序数比较。因此在这种情况下，它应该等价于`System.StringComparer.Ordinal`。当然`string`是一个`sealed`类，所以没有其他类可以以某种奇怪的方式派生和`string`覆盖。`Equals``GetHashCode`

# ruby-on-rails - Ruby Geocoder 如何设置最小 .near 距离

> ID：14624669
> 
> 赞同：2
> 
> 时间：2013-01-31T11:29:23.847
> 
> 标签：ruby-on-rails, ruby, geocoding

使用 Alex Reisner 的[Ruby Geocoder](http://www.rubygeocoder.com/)并发现 .near 方法非常有用。我们遇到的一个问题是我们如何设置它，以便我们可以搜索距离原点的距离 x 和距离 y 之间的对象（目前 .near 方法只设置它看起来的最大距离）： [documentation here](https://github.com/alexreisner/geocoder)

我们正在寻找类似的东西：

```
places = Place.near("Washington", min_distance, max_distance).reorder("score") 
```

或修改查询的某种方式，以便我们在不使用 .reorder 的情况下获得相同的效果（我们使用它来对另一个“score”字段进行排序）

我们想要的最终结果是能够按分数排序的位置在距离原点 x 到 y 英里之间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:34:36.893

AFAIK 它不是本机实现的。

如果使用 ActiveRecord，您可以尝试使用 Geocoder 的[私有类方法](https://github.com/alexreisner/geocoder/blob/d35b9d7b5e5797550496b5ec27229212cc0bf019/lib/geocoder/stores/active_record.rb)（参见第 105 到 147 行）来滚动您自己的“反向”方法，算法应该或多或少：

*   计算最小距离查询的边界框`Geocoder::Calculations#bounding_box`
*   构建 SQL 以查找边界框中的所有记录 AND 与`#distance_sql(lat,lon,options)`>= min_distance

将此逻辑填充到`where`范围内，将其链接到`near`，然后瞧！如果您觉得懒惰，您甚至可以复制/粘贴整个方法并更改`<=`谓词。

附带说明一下，在地理编码器的 github 上提交功能请求会很棒，因为我认为它会很快为他们实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:53:16.487

Geocoder 生成的查询包含一`distance`列，因此您需要做的就是添加最小距离的条件，例如：

```
Venue.near("Washington", max_distance).having("distance >= ?", min_distance) 
```

请注意，您需要使用`HAVING`，而不是`WHERE`.

# ruby - 引发异常时输出 nil:NilClass

> ID：14624672
> 
> 赞同：0
> 
> 时间：2013-01-31T11:29:30.883
> 
> 标签：ruby

当您调用对象上不存在的方法时，将引发 NoMethodError，即

```
Object.new.foo 
```

将输出：

> NoMethodError: 未定义的方法 `foo' for #

尽管

```
nil.foo 
```

将输出：

> NoMethodError: nil:NilClass 的未定义方法“foo”

我想在引发我自己的异常时复制这种行为，即

```
foo = Object.new
raise StandardError, "#{foo} triggered an error" 
```

这将输出：

> StandardError: #`<Object:0xbf37748>`触发错误

这正是我想要的。

很遗憾

```
foo = nil
raise StandardError, "#{foo} triggered an error" 
```

将输出

> StandardError：触发错误

这可能是因为`nil.to_s`is `""`。我如何获得`nil:NillClass`输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:23:58.697

```
raise StandardError, "#{foo.inspect}:#{foo.class} triggered an error" 
```

编辑。你似乎想`nil`表现得与众不同。因此，准备一个不同的方法只在你的`raise`语句中使用。

```
class Object; def my_inspect; inspect end end
class NilClass; def my_inspect; "#{inspect}:#{self.class}" end end

raise StandardError, "#{foo.my_inspect} triggered an error" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:32:34.640

我相信你可以打电话`foo.class`。就像是：

```
raise StandardError, "#{foo.class} triggered an error" 
```

这只会输出 NilClass 但这应该是足够的信息。

# ruby-on-rails - 如何在 Rails 中显示最初发给谁的电子邮件？

> ID：14624674
> 
> 赞同：4
> 
> 时间：2013-01-31T11:29:34.080
> 
> 标签：ruby-on-rails, email, actionmailer

我有一个系统可以接收和发送邮件给组中的各个成员。

假设我有一个`support@xyz.com`有成员的小组

1.  `member_1@xyz.com`
2.  `member_2@xyz.com`

等等..

同样的方式有另一个组`help@xyz.com`有成员

1.  `member_1@xyz.com`
2.  `member_3@xyz.com`

等等..

当我收到任何邮件时，`support@xyz.com`它会转发给它的成员，并且以相同的方式转发给`help@xyz.com`.

```
mail :from => the_person_who_sent_mail,
     :to => members_email_id,
     :subject => mail_subject,
     :reply_to => the_group_name@xyz.com 
```

似乎邮件已发送给我。

## 但我想对此进行更改，如下所示：

当它降落在我的收件箱中时，它应该类似于

```
From     :  the_person_who_sent_mail@something.com
Reply To :  the_group_name@xyz.com
To       :   the_group_name@xyz.com 
```

但根据我的设置，它就像

```
From     :  the_person_who_sent_mail@something.com
Reply To :  the_group_name@xyz.com
To       :   members_email_id@xyz.com 
```

就我而言，它表明邮件是发给我的。但在第一种情况下，它显示了邮件最初的目的地。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T21:20:39.200

邮件列表服务器使用密件抄送完成此操作，如下所示：

```
mail :from => the_person_who_sent_mail,
     :to => the_group_name@xyz.com,
     :subject => mail_subject,
     :reply_to => the_group_name@xyz.com,
     :bcc => [members_email_id] 
```

这样做的缺点是您的邮件服务器实际上会尝试将电子邮件发送到 the_group_name@xyz.com，因此它必须知道忽略此消息。但是，当邮件到达用户的收件箱时，收件人：将是 the_group_name@xyz.com。

# php - 如何从大量 URL 列表中删除重复域

> ID：14624681
> 
> 赞同：0
> 
> 时间：2013-01-31T11:29:56.747
> 
> 标签：php, regex

我想删除 URL 列表中的重复域，例如下面是文本文件

```
http://www.exampleurl.com/something.php
http://www.domain.com/something.php
http://www.exampleurl.com/something111.php 
http://www.exampleurl.com/something111.php 
http://www.exampleurl.com/something222.php 
```

我需要删除重复的域，我需要下面的列表

```
http://www.exampleurl.com/something.php
http://www.domain.com/something.php 
```

下面是仅删除文本文件中重复项的代码。

```
$text = array_unique(file($filename));

$f = @fopen("promo1.txt",'w+');
if ($f) {
  fputs($f, join('',$text));
  fclose($f);
}

?> 
```

谁能帮我 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:48:14.317

```
$urls = file('domains.txt');
$uniqueDomains = array_reduce (
    $urls,
    function (array $list, $url) {
        $domain = parse_url($domain, PHP_URL_HOST);
        if (!isset($list[$domain])) $list[$domain] = $url;
        return $list;
    },
    array()
); 
```

`$uniqueDomains`以主机名作为键。如果您不需要（和/或想要）它，请使用`array_values($uniqueDomains);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:51:22.310

```
<?php
/*
$lines = file('textfile.txt');
*/
$lines = array(
'http://www.exampleurl.com/something.php',
'http://www.domain.com/something.php',
'http://www.exampleurl.com/something111.php',
'http://www.exampleurl.com/something111.php',
'http://www.exampleurl.com/something222.php'
);
foreach($lines as $line){
 $url_parsed = parse_url($line);
 if(is_array($url_parsed)){
  $host = $url_parsed['host'];
  if(!@$uniques[$host]){
   $uniques[$host] = $line;
  }
 }
}
echo join('',$uniques);
$f = @fopen("promo1.txt",'w+');
if ($f) {
  fputs($f, join("\n",$uniques));
  fclose($f);
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T11:44:38.420

要比较域，您可以使用[parse_url](http://www.php.net/parse_url)：

```
<?php
$text = file_get_contents("input.txt");
$lines = explode("\n",$text);
$filtered_domains = array();
foreach($lines as $line)
{
    $parsed_url = parse_url($line);
    if(array_search($parsed_url['host'], $filtered_domains) === false)
    {
        $filtered_domains[$line] = $parsed_url['host'];
    }
}
$output = implode("\n", array_keys($filtered_domains));
file_put_contents("output.txt", $output);
?> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-31T11:41:52.250

要从数组中删除重复项，您可以使用[array_unique()](http://php.net/manual/en/function.array-unique.php)。要使您的列表成为一个数组，您可以使用[explode()](http://php.net/manual/en/function.explode.php)。然后再次使其成为字符串，您可以使用 implode()。

要将所有这些放在一起，您可以使用以下代码：

```
$list = "http://www.exampleurl.com/something.php
        http://www.domain.com/something.php
        http://www.exampleurl.com/something111.php 
        http://www.exampleurl.com/something111.php 
        http://www.exampleurl.com/something222.php";

$newList = implode("\n", array_unique(explode("\n", $list))); 
```

# sql - 具有不同结果的 SQL 查询

> ID：14624685
> 
> 赞同：1
> 
> 时间：2013-01-31T11:30:10.310
> 
> 标签：sql, sql-server

我有两个表，我尝试在一个字段上加入，它在两个应该给出相同结果的查询中给出了不同的结果。查询是：

```
SELECT * FROM tblCustomer tca
WHERE tca.PhoneNumber IN(
    SELECT ts.SubscriptionNumber FROM sub.tblSubscription ts
    WHERE ts.ServiceTypeID=4
    AND ts.SourceID=-1
) 
```

和

```
SELECT tca.*
FROM   sub.tblSubscription ts
       inner JOIN tblCustomer tca
            ON  ts.SubscriptionNumber = tca.PhoneNumber
WHERE  ts.ServiceTypeID = 4
       AND ts.SourceID = -1 
```

这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T11:36:42.880

我假设一个客户可以有多个订阅，对吧？假设您有 5 个客户，每个客户有 2 个订阅...

当执行 SELECT ... FROM Customer WHERE IN (Subscription) 时，您将收到 5 个客户记录，因为这 5 个客户中的每一个实际上都在订阅表中，即使订阅表将有 10 条记录。您本质上是从一个表中向数据库询问数据，其中一个字段的值存在于另一个表中。所以它只会返回 FROM 表中的不同记录，而与 WHERE IN 表中的数据量无关。

另一方面，将 Customer 表与订阅表进行 INNER JOIN 将返回 5 个客户 x 2 个订阅，每个 = 10 条记录。通过加入表格，您向数据库询问每个表格中的所有数据，其中数据与特定字段匹配。

所以是的，这两个查询肯定会给你不同的结果。

# iphone - iPad 和 iPhone html 占位符停止使用 iOS 6.1 更新

> ID：14624686
> 
> 赞同：7
> 
> 时间：2013-01-31T11:30:22.407
> 
> 标签：iphone, html, ipad, ios6

ios 6.1 更新似乎停止了 html 占位符在 iPad 和 iPhone 上的工作。

有没有其他人注意到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:57:58.460

作为一种解决方法，我检测到用户代理然后显示标签而不是依赖占位符文本。

# javascript - Javascript将一个数组中的实例与另一个数组进行比较？

> ID：14624694
> 
> 赞同：-1
> 
> 时间：2013-01-31T11:31:09.730
> 
> 标签：javascript, arrays, loops

总之，我正在尝试构建一个发誓过滤器，其中我有一个名为“badWords”的静态数组，其中包含许多亵渎的词。

然后，我的脚本将表单中的所有文本值提升到另一个名为“fieldValues”的数组中。

然后它遍历 fieldValues 并将字符串值与整个“badWords”数组进行比较，如果找到，现在触发一个简单的响应。

该代码没有产生任何错误，但也没有产生预期的输出，我希望你能让我深入了解我哪里出错了。

**代码**

```
// get all the inputs from "editor_form"
var $inputs = $('#editor_form :input');

var fieldValues = new Array();
var i = 0;

//for each field place it in array
$inputs.each(function() 
{
    fieldValues[i] = $(this).val();
    i++;
});

var swearWord;
for (i = 0; i < fieldValues.length; i++)
{
    if (fieldValues[i] == function()
    {
        //this bit i think is wrong, i think it only does one loop in this level then jumps back up
        for (x = 0; x < badWords.length; x++)
        {
            return badWords[x];
        }
    })

    //warning message   
    {
        window.alert("Bad word found");
    }       
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:36:45.960

首先，您可以像这样修复现有代码：

```
function isBad(word) {
     for (x = 0; x < badWords.length; x++) {
         if (badWords[x]==word) return true;
     }
     return false;
}
for (i = 0; i < fieldValues.length; i++) {
   if (isBad(fieldValues[i])) {
       window.alert("Bad word found : " + fieldValues[i]);
   }
} 
```

但是从逻辑上讲，你的坏话形成了一个集合，而不是一个数组。您应该使用对象作为地图以快速找到它们。

```
// build a set of the bad words
var badWordsSet = {};
for (x = 0; x < badWords.length; x++) badWordsSet[badWords[x]]=true;
// then use it
for (i = 0; i < fieldValues.length; i++) {
   if (badWordsSet[fieldValues[i]]) {
       window.alert("Bad word found : " + fieldValues[i]);
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:37:25.410

您认为是错误的那一点确实是。您不应该`fieldValues[i]`与您创建的函数进行比较，而是应该将此值与每个值进行比较`badWords`。那里不需要另一个功能，只是一个内部循环。

# jsp - 在 Facelets 和 JSP 页面之间导航

> ID：14624697
> 
> 赞同：0
> 
> 时间：2013-01-31T11:31:22.847
> 
> 标签：jsp, jsf, navigation, facelets

是否可以在 Facelets 和 JSP 页面之间导航？

例如：

```
<h:commandLink ... action="goToJsp" /> 
```

之后

```
<h:commandButton .. action="returnToFacelets" /> 
```

是不是有些不便？

我喜欢这种情况，因为 JSTL XML taglib 仅在 JSP 中可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:09:43.253

只要这些 JSP 页面也由 Faces Servlet 提供服务，就应该没有问题。

# jboss7.x - 移植到 JBoss 7.1.1 和 Seam 2.3，seam.properties

> ID：14624698
> 
> 赞同：1
> 
> 时间：2013-01-31T11:31:25.390
> 
> 标签：jboss7.x, seam2

我正在将应用程序从 JBoss 4.2.2 上的 Seam 2.2 移植到 JBoss 7.1.1 上的 Seam 2.3

我有一个从 seam.properties 文件中获取其属性的类，它在 JBoss 4.2.2 上运行良好。但是它不再在 JBoss 7.1.1 中设置属性

有谁知道如何解决这个问题，或者设置属性的替代方法。

# ffmpeg - 如何在mac os上通过brew安装ffmpeg？

> ID：14624699
> 
> 赞同：5
> 
> 时间：2013-01-31T11:31:27.320
> 
> 标签：ffmpeg, homebrew

是否可以通过 brew 安装 ffmpeg？

冲泡安装ffmpeg

```
Warning: A newer Command Line Tools for Xcode release is available
You should install the latest version from: http://connect.apple.com
==> Installing ffmpeg dependency: texi2html
==> Downloading http://download.savannah.gnu.org/releases/texi2html/texi2html-1.82.tar.gz 
######################################################################## 100.0%
curl: (6) Could not resolve host: mirror.yongbok.net; nodename nor servname provided, or not known 
Error: Download failed: http://download.savannah.gnu.org/releases/texi2html/texi2html-1.82.tar.gz 
```

酿造安装texi2html

```
Warning: A newer Command Line Tools for Xcode release is available
You should install the latest version from: http://connect.apple.com
 ==> Downloading http://download.savannah.gnu.org/releases/texi2html/texi2html-1.82.tar.gz 
######################################################################## 100.0%
curl: (6) Could not resolve host: mirror.yongbok.net; nodename nor servname provided, or not known
Error: Download failed: http://download.savannah.gnu.org/releases/texi2html/texi2html-1.82.tar.gz 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-09T11:00:56.150

1) 搜索工作镜像[http://www.filewatcher.com/m/texi2html-1.82.tar.gz.7350232-0.html](http://www.filewatcher.com/m/texi2html-1.82.tar.gz.7350232-0.html) => 例如[ftp://ftp.mirrorservice.org/sites/distfiles.macports。 org/texi2html/texi2html-1.82.tar.gz](ftp://ftp.mirrorservice.org/sites/distfiles.macports.org/texi2html/texi2html-1.82.tar.gz)

2) 将此路径放在 /usr/local/Library/Formula/texi2html.rb 中的 url 标签

3) 计算 texi2html-1.82.tar.gz (其 e7bbe1197147566250abd5c456b94c8e37e0a81f) 的 shasum 并将其放在 /usr/local/Library/Formula/texi2html.rb 的 sha1 标记中

现在 brew install ffmpeg 工作正常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-19T05:49:57.393

## 是的，很有帮助，很棒

### vi /usr/local/Library/Formula/texi2html.rb

`class Texi2html < Formula desc "Convert TeXinfo files to HTML" homepage "http://www.nongnu.org/texi2html/" url "ftp://ftp.gnome.org/mirror/gnu.org/savannah/texi2html/texi2html-1.82.tar.gz" sha256 "6c7c94a2d88ffe218a33e91118c2b039336cbe3f2f8b4e3a78e4fd1502072936"`

# c# - 使用从模型传递的信息填充复选框

> ID：14624702
> 
> 赞同：0
> 
> 时间：2013-01-31T11:31:32.883
> 
> 标签：c#, jquery, asp.net, asp.net-mvc-3

在我的项目中，我们允许用户注册不同的订阅费率，从而实现不同的功能。一些用户是免费订阅的，因此只有有限的功能，而付费用户可以使用他们的帐户执行额外的操作。此功能仍有待实现，但我正在创建关税详细信息的视图。

我有一个“SubscriptionTariffs”表和一个“SubscriptionServices”表，后者对每个服务的前者的 ID 字段都有一个外键。在我看来，我想显示所有可能的服务，无论关税是否支持它们。如果它们可用于该关税，我希望选中一个复选框，反之亦然。

因此，对于免费关税，我希望显示如下内容，其中前七个选项显示为勾选，其他选项未标记但仍显示：

```
 <tr><td style="padding:5px;"><input type="checkbox" DISABLED checked />&nbsp; @Language.ViewTransactions</td></tr>
            <tr><td style="padding:5px;"><input type="checkbox" DISABLED checked />&nbsp; @Language.CreateTransactions</td></tr>
            <tr><td style="padding:5px;"><input type="checkbox" DISABLED checked />&nbsp; @Language.Announcements</td></tr>
            <tr><td style="padding:5px;"><input type="checkbox" DISABLED checked />&nbsp; @Language.Alerts</td></tr>
            <tr><td style="padding:5px;"><input type="checkbox" DISABLED checked />&nbsp; @Language.Foldering</td></tr>
            <tr><td style="padding:5px;"><input type="checkbox" DISABLED checked />&nbsp; @Language.TransactionDownload</td></tr>
            <tr><td style="padding:5px;"><input type="checkbox" DISABLED checked />&nbsp; @Language.TransactionUpload</td></tr>
            <tr><td style="padding:5px;"><input type="checkbox" DISABLED checked />&nbsp; @Language.EZApproval</td></tr>
            <tr><td style="padding:5px;"><input type="checkbox" DISABLED />&nbsp; @Language.SupplyChainFinance</td></tr>
            <tr><td style="padding:5px;"><input type="checkbox" DISABLED />&nbsp; @Language.HierarchicalOrgs</td></tr>
            <tr><td style="padding:5px;"><input type="checkbox" DISABLED />&nbsp; @Language.WhiteLabeling</td></tr>
            <tr><td style="padding:5px;"><input type="checkbox" DISABLED />&nbsp; @Language.MultiFormatDownload</td></tr>
            <tr><td style="padding:5px;"><input type="checkbox" DISABLED />&nbsp; @Language.MultiFormatUpload</td></tr>
            <tr><td style="padding:5px;"><input type="checkbox" DISABLED />&nbsp; @Language.VANInteroperability</td></tr> 
```

我写了以下内容来显示关税的所有相关服务：

```
 @{
            foreach (var SubscriptionService in this.Model.SubscriptionServices)
            {
                <tr><td style="padding:5px;"><input type="checkbox" DISABLED checked />&nbsp; @(SubscriptionService.ServiceName != null ? SubscriptionService.ServiceName : "")</td></tr>
            }
        } 
```

这工作正常，但我需要显示所有服务并根据需要选中或取消选中它们。

如果有人能指出我正确的方向，我将不胜感激，我认为我应该能够写一个 if-else 语句或其他东西来检查，但我不完全确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:14:36.783

大概在这个例子`this.Model.SubscriptionServices`中是在所选关税下持有的服务，所以您只需要添加未选中的复选框。

最简单的方法是在您的模型中，您应该为**所有**订阅服务添加另一个集合，然后在您的视图中您可以编写：

```
@{
    foreach (var SubscriptionService in this.Model.SubscriptionServices)
    {
        <tr><td style="padding:5px;"><input type="checkbox" DISABLED checked />&nbsp; @(SubscriptionService.ServiceName != null ? SubscriptionService.ServiceName : "")</td></tr>
    }
    foreach (var SubscriptionService in this.Model.AllSubscriptionServices.Where( s => !this.Model.SubscriptionServices.Contains( s ) ) )
    {
        <tr><td style="padding:5px;"><input type="checkbox" DISABLED />&nbsp; @(SubscriptionService.ServiceName != null ? SubscriptionService.ServiceName : "")</td></tr>
    }
} 
```

或者，如果您使用 LINQ to SQL 或其他一些 ORM 访问您的数据模型（并直接传递这些模型到视图）然后您可以向生成的部分类添加一个布尔值：`public bool IsInSelectedTarriff { get; set; }`然后编写一个更复杂的查询来填充您的 Model.SubscriptionServices 集合：

```
this.SubscriptionServices = (
    from sub in DataContext.SubscriptionServices
    select new SubscriptionServices()
    {
        ID = ID,
        ServiceName = ServiceName,
        // copy all data directly into it's field
        // ...
        IsInSelectedTarriff = sub.SubscriptionTarriffID == this.SubscriptionTarriff
    } ); 
```

您应该注意，如果在另一个视图中使用此模型，最佳实践是为特定于该屏幕的 SubscriptionTarriff 创建一个新 ViewModel，它是原始属性的直接副本，并带有添加的`IsInSelectedTarriff`选项。[Tuple](http://msdn.microsoft.com/en-us/library/system.tuple.aspx)类还有助于将其他数据附加到集合中。

# c++ - 几个不同签名的虚成员函数

> ID：14624714
> 
> 赞同：1
> 
> 时间：2013-01-31T11:32:16.760
> 
> 标签：c++, python, boost, boost-python

我正在使用 Boost Python 为 C++ 中的某些类提供 python 接口。我发现这种情况我不确定如何解决：

我有一个具有此成员函数的类：

```
virtual void visit(const ReportClass r) = 0;
virtual void visit(const unsigned int category) = 0;
virtual void visit(const char* type) = 0;
virtual void visit(const char* name, const unsigned int id, const char &value ) = 0;
virtual void visit(const char* name, const unsigned int id, const unsigned short &value ) = 0;
virtual void visit(const char* name, const unsigned int id, const unsigned int &value ) = 0;
virtual void visit(const char* name, const unsigned int id, const MaskedAddr &value ) = 0;
virtual void visit(const char* name, const unsigned int id, const unsigned long long &value ) = 0; 
```

我对如何实现 python-boost 部分有点迷茫，我已经看到如何处理虚函数和重载函数，但我不知道如何将两者结合起来。

顺便说一句，我在示例中看到返回 int 的虚函数（例如）应该以这种方式实现：

```
int f()
{
    return this->get_override("f")();
} 
```

就我而言，他们没有返回任何东西，我想我应该以这种方式实现它们：

```
void f()
{
     this->get_override("f")();
} 
```

它是否正确？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:41:24.793

让我们先回答一个简单的问题：即使返回类型为 void，您也始终可以“返回 this->get_override("f")();”。实际上，在这样的包装代码中，我发现这是更好的选择，因为如果包装的函数突然返回一些东西，你会得到一个编译错误！

现在是一个难题：如何在这里混合虚拟函数和重载函数。我会使用模板方法模式来规避这个问题。这个想法是简单地提供一个公共的、非虚拟的函数来调用一个私有的虚拟函数。或者，您可以使虚拟的受保护，以允许扩展而不是覆盖。此外，在非虚拟类中，您可以验证派生类必须满足或验证参数的前置/后置条件（例如 assert(name);）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T07:59:39.087

如果我正确理解您的问题，您希望将**纯虚拟（重载）**方法绑定到 Python，以便可以*从 python 重载*它们。[您已经找到](http://www.boost.org/doc/libs/release/libs/python/doc/tutorial/doc/html/python/exposing.html#python.class_virtual_functions)的教程部分解释了这一点。在您的特定情况下，C++ 和 Python 不能很好地与重载相互作用。虽然 C++ 允许，但 Python 禁止。`f`在 Python中不能有两个同名的方法。我们要做的就是*分散*python 调用，以便用户可以从 Python 实现覆盖。

我会写一个更小的例子，但你可以从中抽象出来。

让我们从 C++ 管道开始。您的 C++ 绑定应如下所示：

```
struct BaseWrap : Base, boost::python::wrapper<Base> {
    int f() {
        return this->get_override("__f1__")();
    }

    int f(int i) {
        return this->get_override("__f2__")()
    }

    int f(const char* s) {
        return this->get_override("__f3__")()
    }

    int f(const char* s, double d) {
        return this->get_override("__f4__")()
    }
};

//your module code will look like this
BOOST_PYTHON_MODULE(example) {
  using namespace boost::python;
  class_<BaseWrap, boost::noncopyable>("Base")
    .def("f", pure_virtual(((int)(Base::*)())&Base::f))
    .def("f", pure_virtual(((int)(Base::*)(int))&Base::f))
    .def("f", pure_virtual(((int)(Base::*)(const char*))&Base::f))
    .def("f", pure_virtual(((int)(Base::*)(const char*, double))&Base::f))
  ;
} 
```

我们做了什么？当 Python 端的代码调用`f(<parameters>)`时，我们会解析到正确的重载方法。然后，此方法将从 Python 调用 Python 的`__f1__`、`__f2__`等，其中方法的实质是真正编码的。

要完成绑定，在 Python 中，您必须继承并`example.Base`实现`__f1__`、`__f2__`和：`__f3__``__f4__`

```
class Base(example.Base):
  """Throw here the documentation of Base - don't bother about the C++ stuff"""

  def __init__(self,...):
    pass

  def __f1__(self):
    """Implementation of Base::f()"""
    pass

  def __f2__(self):
    """Implementation of Base::f(int)"""
    pass

  def __f3__(self):
    """Implementation of Base::f(const char*)"""
    pass

  def __f4__(self):
    """Implementation of Base::f(const char*, double)"""
    pass 
```

# javascript - 如何知道窗口顶部何时到达容器的特定顶部？

> ID：14624718
> 
> 赞同：1
> 
> 时间：2013-01-31T11:32:24.217
> 
> 标签：javascript, html, css, scroll

我正在尝试实现类似于[此](http://jsbin.com/ijexe)页面显示的效果：当窗口顶部到达特定容器的顶部时，我希望它粘在窗口顶部。

我在处理这种行为的 SO 中发现[了这个问题。](https://stackoverflow.com/questions/1216114/how-can-i-make-a-div-stick-to-the-top-of-the-screen-once-its-been-scrolled-to)但是当用户到达特定的 px 时，我并不是要让容器粘住，而是当用户到达容器的开头时。我想要这样，因为页面顶部和容器顶部之间的大小可能会有所不同。

我的问题是：

-> 我怎么知道我何时到达了特定容器的顶部。
-> 如果那个容器有position:relative，因为它里面有几个元素是相对定位的，所以我不能使用fixed，我该怎么办？
-> 向上滚动并到达容器所在位置的同一点后，如何重置容器？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:36:45.500

用这个：

```
 $(window).scroll(function(e){
 $el = $('.class_of_fixedElement or #id_of_fixedelement');
 if ($(this).scrollTop() > 200 && $el.css('position') != 'fixed'){
 $('.fixedElement').css({'position': 'fixed', 'top': '0px'});
 }
 }); 
```

用你想要的任何像素替换 200。只要滚动顶部到达那里，你的元素就会固定到顶部。

# php - 是否有任何 html 模板引擎可以与 ruby 和 php 一起使用？

> ID：14624733
> 
> 赞同：3
> 
> 时间：2013-01-31T11:32:54.853
> 
> 标签：php, html, ruby, templates

我的部门有两个团队，一个使用 PHP，另一个使用 Ruby。

我们想在两个团队之间共享 html 模板。

有没有针对这个要求的解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:35:54.663

当然，你可以试试[mustache](http://mustache.github.com/)无逻辑模板

# regex - 这个 perl 正则表达式是如何工作的？

> ID：14624734
> 
> 赞同：1
> 
> 时间：2013-01-31T11:33:01.157
> 
> 标签：regex, perl

我有一个小的正则表达式可以将整数值拆分为 1000，我只是想知道它是如何工作的。

这是一个perl代码。

```
$intval = 10000;
$intval =~ s/([+-]?\d)(?=(\d{3})+(?!\d))/$1,/go;
print $intval; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T11:42:54.880

`(...)`任何正常的括号集都是一个捕获组，可以在正则表达式匹配后引用，使用特殊变量`$1`,`$2`等。

`[+-]?`括号创建一个字符组，意思是“匹配这些字符中的任何一个”。 `?`意思是“匹配零次或一次”。因此，这允许在比赛开始时出现单个 + 或 - 的可能性。

`\d`匹配单个数字。

`(?=...)`这是一个前瞻。它将要求模式中包含的所有内容都匹配，但不包括在输出“匹配”中。它也不会将字符串中的位置向前移动（这意味着在使用前瞻时匹配可以重叠）。

`(\d{3})+`匹配一组或多组三位数。

`(?!\d)`匹配的东西后面不能跟另一个数字。

`/$1,/`用第一个捕获组替换匹配的内容（请记住，这不包括前瞻部分，因为这不算作匹配的一部分），后跟逗号。

`go`这些标志是设置正则表达式行为的选项：

*   `g`意味着它会重复，直到 if 找到并替换所有匹配项。
*   `o`是一种优化，告诉解释器只编译一次模式，但它在很大程度上已经过时并且在这种情况下完全没有区别，因为没有任何内容被插入到模式中。

所以这个正则表达式将替换一个数字，后跟一些是三的倍数的数字，该数字后跟一个逗号。它反复运行，找到所有匹配项。这样做的效果是插入逗号作为千位分隔符。

一个小问题：这`[+-]?`部分完全没有必要。因为正则表达式对数字前面的内容没有要求，所以即使删除了这部分，带有 + 或 - 的数字也可以正常工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T12:32:33.720

任何时候你有这样的疑问，简单的出路，使用[Yape::Regex::Explain](https://metacpan.org/module/YAPE%3a%3aRegex%3a%3aExplain)

```
#!perl -w
use strict;
use YAPE::Regex::Explain;

print YAPE::Regex::Explain->new(qr/([+-]?\d)(?=(\d{3})+(?!\d))/)->explain(); 
```

产生这个

```
The regular expression:

(?-imsx:([+-]?\d)(?=(\d{3})+(?!\d)))

matches as follows:

NODE                     EXPLANATION
----------------------------------------------------------------------
(?-imsx:                 group, but do not capture (case-sensitive)
                         (with ^ and $ matching normally) (with . not
                         matching \n) (matching whitespace and #
                         normally):
----------------------------------------------------------------------
  (                        group and capture to \1:
----------------------------------------------------------------------
    [+-]?                    any character of: '+', '-' (optional
                             (matching the most amount possible))
----------------------------------------------------------------------
    \d                       digits (0-9)
----------------------------------------------------------------------
  )                        end of \1
----------------------------------------------------------------------
  (?=                      look ahead to see if there is:
----------------------------------------------------------------------
    (                        group and capture to \2 (1 or more times
                             (matching the most amount possible)):
----------------------------------------------------------------------
      \d{3}                    digits (0-9) (3 times)
----------------------------------------------------------------------
    )+                       end of \2 (NOTE: because you are using a
                             quantifier on this capture, only the
                             LAST repetition of the captured pattern
                             will be stored in \2)
----------------------------------------------------------------------
    (?!                      look ahead to see if there is not:
----------------------------------------------------------------------
      \d                       digits (0-9)
----------------------------------------------------------------------
    )                        end of look-ahead
----------------------------------------------------------------------
  )                        end of look-ahead
----------------------------------------------------------------------
)                        end of grouping
---------------------------------------------------------------------- 
```

1.  修饰符表示这个`g`模式匹配需要全局完成
2.  修饰符指定此`o`模式必须编译一次

查看 perlre[修饰符](http://perldoc.perl.org/perlre.html#Modifiers)以获取有关正则表达式修饰符的更多信息

# file-upload - struts 2 multipart maxSize 动作返回

> ID：14624735
> 
> 赞同：-1
> 
> 时间：2013-01-31T11:33:03.573
> 
> 标签：file-upload, struts2, limit, multipartform-data, actionresult

我在 struts2 中设置了该属性`"struts.multipart.maxSize=524288000"`，因此我可以将整体上传大小限制为该大小。当我上传超过该限制的 2 个文件时，FileUpload 拦截器发生异常

```
org.apache.commons.fileupload.FileUploadBase$SizeLimitExceededException: the request was rejected because its size (718551153) exceeds the configured maximum (524288000) 
```

但是代码没有到达带有错误的操作，因此我可以从操作返回 ERROR 并转到我的自定义错误页面并显示适当的消息。相反，它直接进入应用程序错误而不进入操作的方法。

关于如何返回“错误”的任何建议，以便我可以获得正确的重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:42:01.590

您需要`input`为您的操作配置结果。

您还可以为您的操作配置带有参数的`fileUpload`拦截器：`maximumSize`

```
<action name="..." class="...">
  <interceptor-ref name="defaultStack">
    <param name="fileUpload.maximumSize">524288000</param>
  </interceptor-ref>

  <result name="input">error_page</result>
  <result>success_page</result>
</action> 
```

然后您可以使用此键覆盖错误消息的文本：

```
struts.messages.error.file.too.large 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T05:58:25.903

要使“输入”结果正常工作，您必须将 Validation (org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor) 和 DefaultWorkflowInterceptors (com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor) 作为拦截器堆栈的一部分。

您还可以定义一个自定义结果名称来代替“输入”，如下所示

```
@InputConfig(resultName = "customInputResultNameWhenValidationFails")
public final String execute() throws Exception {
} 
```

# r - R更改包含加号或括号的列名

> ID：14624736
> 
> 赞同：0
> 
> 时间：2013-01-31T11:33:04.257
> 
> 标签：r, dataframe

我将 a 的列名保存`data.frame`到`R`. 我的一些列名称包含一个加号`+`。将其保存为变量时将其`R`更改`+`为a。`.`我想保留`+`这些列，以便在需要时可以再次自动选择这些列。

这是我用来将列名保存到变量中的命令：

```
for (u in 1:50) {
    k <- colnames[u]
    f <- append(f,k)
}
## f is defined previously in my program 
```

这是我用来再次获取所需名称的命令：

```
file2 <- file1[,f] 
```

**示例：** 在变量`column1+`中命名`column1.``f`

**注意：**这发生在括号`()`和斜杠上`/`

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:42:46.160

就这样，问题仍然得到了回答。在阅读using as 时将选项设置`check.names`为：`FALSE``data.frame``read.table`

```
read.table(file, check.names = FALSE) 
```

**注意：**正如@Roland 在评论下所说，最好保持列名干净而不是使用此参数。您还可能会遇到某些函数会自动将名称转换回来的情况。例如，

```
df <- data.frame('x+y' = 1:4, 'a+b' = 5:8, check.names = FALSE)
> df
#   x+y a+b
# 1   1   5
# 2   2   6
# 3   3   7
# 4   4   8

# Now adding a 3rd column, using `transform`
transform(df, c=9:12)
#   x.y a.b  c  # note that it reverts back
# 1   1   5  9
# 2   2   6 10
# 3   3   7 11
# 4   4   8 12

transform(df, c=9:12, check.names = FALSE)
#   x+y a+b
# 1   1   5
# 2   2   6
# 3   3   7
# 4   4   8 
```

您必须了解所有具有`check.names=FALSE`并记住正确使用它们的功能。这至少是我能想到的一个问题。最好让列没有冲突。

在列名中包含运算符`+`也会干扰公式模型接口：

```
dat <- data.frame('a+x'=c(1,2,3,4),b=c(2,4,6,8),check.names=FALSE)
lm(dat$b~dat$a+x)
Error in eval(expr, envir, enclos) : object 'x' not found 
```

您将需要使用`lm(dat$b~dat[,'a+x'])`.

# excel - 改进算法以根据图表数据适当缩放图表轴限制

> ID：14624741
> 
> 赞同：0
> 
> 时间：2013-01-31T11:33:13.607
> 
> 标签：excel, vba, charts

不久前我做了这个子程序，因为我对 Excel 的图表自动缩放不满意。内置的 Excel 方法在一定程度上有效，但是当图表数据的范围变得更宽时，它只会将最小比例设置为 0，这可能会导致线条非常压扁，下方有大量空白空间。就像下面...

![比例不当的图表](../Images/9aba8c4168c059204f655bd59a7f979f.png)

我编写的代码试图通过根据图表中的数据为 y 轴选择合适的最大和最小限制来改进 excel 的方法。它工作正常，但有时会选择不是最佳值。这是我的代码应用于同一图表的结果：

![比例不当的图表](../Images/f1d4ae2cbb46f8ff23c52ae14b7c4c43.png)

在这里，它已经适合绘图区域中的所有数据，因此可以很清楚地看到，但它选择的值并不是最好的。人类可以查看这些数据并快速评估 90 和 140 可能是在此示例中使用的最佳限制，但我在编写脚本来执行相同操作时遇到了麻烦。

这是整个子。时间不会太长。我很感激任何改进限制计算的建议......

```
Sub ScaleCharts()
'
' ScaleCharts Macro
'
Dim objCht As ChartObject
Dim maxi As Double, mini As Double, Range As Double, Adj As Double, xMax As Double, xMin As Double
Dim Round As Integer, Order As Integer, x As Integer, i As Integer

Application.ScreenUpdating = False
For x = 1 To ActiveWorkbook.Sheets.Count
Application.StatusBar = "Crunching sheet " & x & " of " & ActiveWorkbook.Sheets.Count

For Each objCht In Sheets(x).ChartObjects
  If objCht.Chart.ChartType = xlLine Or objCht.Chart.ChartType = xlXYScatter Then
  With objCht.Chart
  For i = 0 To .SeriesCollection.Count - 1 'Loop through all the series in the chart

            'Get the Max and Min values of the data in the chart
            maxi = Application.max(.SeriesCollection(i + 1).Values)
            mini = Application.min(.SeriesCollection(i + 1).Values)
            Range = maxi - mini

            If Range > 1 Then
                Order = Len(Int(Range))
                Adj = 10 ^ (Order - 2)
                Round = -1 * (Order - 1)
            ElseIf Range <> 0 Then
                Order = Len(Int(1 / Range))
                Adj = 10 ^ (-1 * Order)
                Round = Order - 1
            End If

            'Get the Max and Min values for the axis based on the data
            If i = 0 Or WorksheetFunction.Round(maxi, Round + 1) + Adj > xMax Then
            xMax = WorksheetFunction.Round(maxi, Round + 1) + Adj
            End If

            If i = 0 Or WorksheetFunction.Round(mini, Round + 1) - Adj < xMin Then
            xMin = WorksheetFunction.Round(mini, Round + 1) - Adj
            End If

       Next i

     With .Axes(xlValue)
        .MaximumScale = xMax
        .MinimumScale = xMin
     End With
  End With
  End If
Next objCht
Next x
Application.ScreenUpdating = True
Application.StatusBar = False
End Sub 
```

编辑：这是 qPCR4vir 变化的结果......

[**前**](https://i.stack.imgur.com/lpTDG.jpg)

[**后**](https://i.stack.imgur.com/jwiZT.jpg)

最后 2 个图表被截断，因为它们不超过 -100

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:54:17.867

可以测试吗：

```
Adj = 10 ^ (Order - 1) 
```

和

```
xMax = WorksheetFunction.ROUNDDOWN(maxi + Adj, Round )
xMin = WorksheetFunction.ROUNDDOWN(mini , Round ) 
```

代替：

```
Adj = 10 ^ (Order - 2) 
```

和

```
xMax = WorksheetFunction.Round(maxi, Round + 1) + Adj 
```

和

```
xMin = WorksheetFunction.Round(mini, Round + 1) - Adj 
```

编辑：对于负数，ROUNDDOWN 不正确？我们可以用 ROUND 建模

```
xMax = WorksheetFunction.Round(maxi + Adj/2, Round )
xMin = WorksheetFunction.Round(mini - Adj/2, Round ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T16:11:41.147

好的，我自己又使用了`MajorUnit`Vicky 建议的属性

```
Sub ScaleCharts3()
'
' ScaleCharts Macro
'
   Call revertCharts 'A macro that resets the charts to excel auto beforehand - this is so we get the correct "MajorUnit" value

   Dim objCht As ChartObject
   Dim maxi As Double, mini As Double, tryxMax As Double, tryxMin As Double, xMax As Double, xMin As Double, maju As Double
   Dim x As Integer, i As Integer

   Application.ScreenUpdating = False
   For x = 1 To ActiveWorkbook.Sheets.Count
   Application.StatusBar = "Crunching sheet " & x & " of " & ActiveWorkbook.Sheets.Count

   For Each objCht In Sheets(x).ChartObjects
      If objCht.Chart.ChartType = xlLine Or objCht.Chart.ChartType = xlXYScatter Then
      With objCht.Chart
      maju = .Axes(xlValue).MajorUnit
      For i = 0 To .SeriesCollection.Count - 1 'Loop through all the series in the chart

                'Get the Max and Min values of the data in the chart
                maxi = Application.max(.SeriesCollection(i + 1).Values)
                mini = Application.min(.SeriesCollection(i + 1).Values)

                'Get the Max and Min values for the axis based on the data
                tryxMax = roundToMult(maxi, maju)
                tryxMin = roundToMult(mini, maju, False)

                If i = 0 Or tryxMax > xMax Then
                xMax = tryxMax
                End If
                If i = 0 Or tryxMin < xMin Then
                xMin = tryxMin
                End If

           Next i

         With .Axes(xlValue)
            .MaximumScale = xMax
            .MinimumScale = xMin
         End With
      End With
      End If
   Next objCht
   Next x
Application.ScreenUpdating = True
Application.StatusBar = False
End Sub 
```

我们还需要一个函数，该函数将相应地向上和向下舍入到最接近的倍数，如上所述。

```
Function roundToMult(numToRound As Double, multiple As Double, Optional up As Boolean = True)
numToRound = Int(numToRound)
multiple = Int(multiple)

If multiple = 0 Then
roundToMult = 0
Exit Function
End If

remainder = numToRound Mod multiple
If remainder = 0 Then
roundToMult = numToRound
Else
    If up = True Then
        roundToMult = (numToRound + multiple - remainder)
    Else
        If numToRound < 0 Then
            remainder = multiple + remainder
        End If
        roundToMult = (numToRound - remainder)
    End If
End If
End Function 
```

与小数字 (<1) 一起使用时不会有任何影响，但 Excel 通常在此处自动更适当地缩放。这也在负面和混合的 neg/pos 图表数据上进行了测试，并且似乎有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T13:35:04.540

使用 Excel 计算的想法：MajorUnit 很好（假设总是正确的！！需要证明）。现在您正在寻找的圆形功能是：

```
tryxMax = Sgn(maxi) * WorksheetFunction.MRound(Abs(maxi + maju / 2.001), maju)
tryxMin = Sgn(mini) * WorksheetFunction.MRound(Abs(mini - maju / 2.001), maju) 
```

它适用于所有数字，包括小数或负数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T13:49:22.117

当您说 90 和 140 是最佳值时，您作为人类使用的算法是什么？

就我个人而言，我会查看 Excel 默认选择的轴分区，然后选择位于数据本身之外的最接近的分区。在您的示例中，这将为您提供 80 和 140。

Excel 将此称为 Axis 对象的“MajorUnit”属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-30T01:46:42.827

这是我使用的方法： [Calculate Nice Axis Scales in Excel VBA](http://peltiertech.com/WordPress/calculate-nice-axis-scales-in-excel-vba/)

# c# - 文件正在被另一个进程使用

> ID：14624743
> 
> 赞同：2
> 
> 时间：2013-01-31T11:33:17.323
> 
> 标签：c#, file-io, io

我是 C# 编程的新手。我在使用时遇到问题`FileStream`。我想通过在数据库中搜索人的 ID 从数据库中检索图片。它的工作原理！但是当我尝试两次检索此人的图片时（两次插入相同的 ID）。它会给 IOException

```
"The process cannot access the file 'C:\Users\dor\Documents\Visual Studio 2010\Projects\studbase\studbase\bin\Debug\foto.jpg' because it is being used by another process." 
```

我有 1 个按钮 --> `buttonLoad`| 1个图片框-->`pictureBoxPictADUStudent`

这是 buttonLoad 上的代码

```
 string sql = "SELECT Size,File,Name FROM studgeninfo WHERE NIM = '"+textBoxNIM.Text+"'";
        MySqlConnection conn = new MySqlConnection(connectionSQL);
        MySqlCommand comm = new MySqlCommand(sql, conn);

        if (textBoxNIM.Text != "")
        {
            conn.Open();
            MySqlDataReader data = comm.ExecuteReader();

            while (data.Read())
            {

                int fileSize = data.GetInt32(data.GetOrdinal("size"));
                string name = data.GetString(data.GetOrdinal("name"));

                using (FileStream fs = new FileStream(name, FileMode.Create, FileAccess.Write))
                {
                        byte[] rawData = new byte[fileSize];
                        data.GetBytes(data.GetOrdinal("file"), 0, rawData, 0, fileSize);
                        fs.Write(rawData, 0, fileSize);
                        fs.Dispose();
                        pictureBoxPictADUStudent.BackgroundImage = new Bitmap(name);
                }
            }

            conn.Close();
        }

        else
        {
            MessageBox.Show("Please Input Student NIM ", "Warning!", MessageBoxButtons.OK, MessageBoxIcon.Warning);
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T11:34:37.670

您在此处打开文件：

```
using (FileStream fs = new FileStream(name, FileMode.Create, FileAccess.Write))
                                   // ^^^^ This is your filename.. 
```

..`Bitmap`并且还试图打开文件来阅读它..这里：

```
pictureBoxPictADUStudent.BackgroundImage = new Bitmap(name);
                                                   // ^^^^ You are using it again here 
```

在`Bitmap`您写入文件时将无法从文件中读取..

编辑：

正如评论中指出的那样，即使`fs.Dispose()`正在调用，也可能发生这种情况。请参见此处：[FileStream.Dispose 是否立即关闭文件？](https://stackoverflow.com/questions/6350224/does-filestream-dispose-close-the-file-immediately)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:43:27.623

这里的问题是文件被`new Bitmap()`. 所以你必须确保一旦加载了位图，它对文件的锁定就被释放了：

```
 using (FileStream fs = new FileStream(name, FileMode.Create, FileAccess.Write))
        {
                byte[] rawData = new byte[fileSize];
                data.GetBytes(data.GetOrdinal("file"), 0, rawData, 0, fileSize);
                fs.Write(rawData, 0, fileSize);
        }

        using (var bmpTemp = new Bitmap(name))
        {
            pictureBoxPictADUStudent.BackgroundImage= new Bitmap(bmpTemp);
        } 
```

更新：我更新了我的答案以反映您的最新答案。有关更多详细信息，请转到[此帖子](https://stackoverflow.com/questions/4803935/free-file-locked-by-new-bitmapfilepath)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-31T11:44:44.013

像这样使用 (FileStream fs = new FileStream(name, FileMode.Create, FileAccess.Write)) 编写

## {

* * *

} pictureBoxPictADUStudent.BackgroundImage = new Bitmap(name);

# jquery - 无限滚动事件后的jquery函数

> ID：14624749
> 
> 赞同：1
> 
> 时间：2013-01-31T11:33:39.823
> 
> 标签：jquery, wordpress, scroll, infinite

我正在尝试将评论表单动态加载到相应的帖子中。到目前为止，我所拥有的内容适用于初始加载时加载的前 6 个帖子。在初始加载之后，我遇到了问题。我需要能够让此代码处理剩余的分页并显示无限滚动事件的帖子。任何帮助将不胜感激。干杯，迈克

注释commenform div 在comment.php

```
<div id="commentform-<?php the_ID(); ?>" rel="<?php the_ID(); ?>" style="display: none"></div> 
```

在 shortcodes.php 中需要评论表单

```
$output.='<div id="swap_comments-'.get_the_ID().'"rel="'.get_the_ID().'">'.comments_template('/comment.php').'</div>'; 
```

plugins.js 中处理的评论表单

```
jQuery(window).ready(function() {
var commentscon = jQuery("div[id^='commentform']");
jQuery("div[id^='swap_comments']").append(commentscon);
jQuery.each(jQuery("div[id^='swap_comments']"),function(){
var CurrectDiv=jQuery(this);
CurrectDiv.find('div').filter(function(){
    if(jQuery(this).attr('rel')==CurrectDiv.attr('rel'))
    {
       jQuery(this).show(); 
    }
        });
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:02:00.653

使用已替换 .live() 的 jquery .on()

[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:37:06.297

您必须使用[实时](http://api.jquery.com/live/)功能将功能分配给动态添加的元素。

# php - 将图像上传到 facebook 然后显示

> ID：14624753
> 
> 赞同：0
> 
> 时间：2013-01-31T11:34:02.140
> 
> 标签：php, html, facebook

我有一个在 Facebook 应用程序中工作的图片上传器

```
$image=clean($_FILES['image']['name']);
echo '<h1>Got it</h1>'.$image;
    //if it is not empty
    if (isset($_FILES))
    {
    //get the original name of the file from the clients machine
        $filename = stripslashes($_FILES['image']['name']);
            echo '<h1>Got it 2</h1>'.$filename;

    //get the extension of the file in a lower case format
        $extension = getExtension($filename);

        $extension = strtolower($extension);
    //if it is not a known extension, we will suppose it is an error and 
        // will not  upload the file,  
    //otherwise we will do more tests

     if (($extension != "jpg") && ($extension != "jpeg") && ($extension !=
     "png") && ($extension != "gif")) 
            {
            //print error message
                echo '<h1>Unknown extension!</h1>'.$filename.'hi';
                $errors=1;
            }
            else
            {
    //get the size of the image in bytes
     //$_FILES['image']['tmp_name'] is the temporary filename of the file
     //in which the uploaded file was stored on the server
     $size=filesize($_REQUEST['image']['tmp_name']);

    //compare the size with the maxim size we defined and print error if bigger
    if ($size > MAX_SIZE*1024)
    {
        echo '<h1>You have exceeded the size limit!</h1>';
        $errors=1;
    }

    //we will give an unique name, for example the time in unix time format
    $image_name=time().'.'.$extension;
    //the new name will be containing the full path where will be stored (images 
    //folder)
    $newname="images/".$image_name;
    //we verify if the image has been uploaded, and print error instead
    $copied = copy($_REQUEST['image']['tmp_name'], $newname);
    if (!$copied) 
    {
    echo '<h1>Copy unsuccessfull!</h1>';
    $errors=1;
    $newname="copy";
}}} 
```

现在我想在上传者旁边的 div 中显示这些图片 我如何发布用户上传的图片

# ipad - ipad 视频上的 webkitEnterFullscreen() 不存在？

> ID：14624755
> 
> 赞同：1
> 
> 时间：2013-01-31T11:34:06.663
> 
> 标签：ipad, video

我正在尝试在用户点击时全屏在 iPad 上启动视频。

```
$('.selector').click(function(e) {
  var elem = document.getElementById("myId");
  alert(elem.getAttribute("id"));
  alert(typeof elem.webkitEnterFullscreen());
  elem.webkitEnterFullscreen();
}); 
```

第一个警报确认元素存在。

第二个警报说未定义！

任何原因？

**更新：**意识到`webkitEnterFullscreen()`要工作，`video`必须加载元素的元数据。所以把它放在一个回调中，表明`video`已加载

# python - 未找到 Pip 包 - Brewed Python

> ID：14624757
> 
> 赞同：19
> 
> 时间：2013-01-31T11:34:14.320
> 
> 标签：python, macos, virtualenv, pip, homebrew

在 Mac 上运行 Python 2.7.3，随 HomeBrew 一起安装。

使用 PIP 安装了几个包，包括 virtualenv。（以 virtualenv 为例，但没有一个包起作用。）

当我尝试在终端中运行它们时，它失败如下：

```
$ virtualenv venv --distribute
-bash: virtualenv: command not found 
```

或者：

```
$ python virtualenv.py venv
/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python: can't open file 'virtualenv.py': [Errno 2] No such file or directory 
```

其他几点可能会有所帮助：

```
$ which python
/usr/local/bin/python
$ pip freeze
MySQL-python==1.2.4
...
virtualenv==1.8.4
$ echo $PATH
/usr/local/bin:/usr/local/sbin:/usr/local/mysql/bin:/opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/X11/bin
$ echo $PYTHONPATH
/usr/local/lib/python2.7/site-packages: 
```

默认情况下， $PYTHONPATH 是空白的，我在 .bash_profile 中更改了它（没有帮助）。VirtualEnv 确实存在于该路径中。我也尝试将此路径添加到 .profile $path 中，但这也无济于事，因此我将其删除。

在[HomeBrew Python 页面上](https://github.com/mxcl/homebrew/wiki/Homebrew-and-Python)，它似乎与此有关，但我是 Python 新手，无法弄清楚。花了几个小时 DuckDuckGo'ing 一无所获。

任何帮助将不胜感激。

编辑：更新以反映实际使用情况。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-06T21:37:27.623

问题是我没有将 Python 添加到系统 $PATH 中。

在 brew install 结束时，它说（可通过键入查看`brew info python`）：

```
Executable python scripts will be put in:  
   /usr/local/share/python
so you may want to put "/usr/local/share/python" in your PATH, too. 
```

因此，只需打开 .profile 并将其粘贴进去，所有包都可以工作。

非常感谢 Brew IRC 频道上的 MistyM 指出这一点！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:10:05.237

`virtualenv.py`如果您的系统不提供`virtualenv`命令，请下载：

```
curl -L -o virtualenv.py https://raw.github.com/pypa/virtualenv/master/virtualenv.py 
```

首先创建您的 virtualenv 文件夹：

```
 python virtualenv.py venv # venv <-- name of the folder 
```

您需要在 shell 中运行 virtualenv 的激活：

```
 . venv/bin/activate 
```

或者

```
 source venv/bin/activate 
```

这修复了 PYTHONPATH 和 PATH。您在每个 shell 会话中执行一次。然后*python*命令将神奇地工作:)

现在运行 pip，包将安装在 venv 中。

更多信息（免责声明，我是作者）[http://opensourcehacker.com/2012/09/16/recommended-way-for-sudo-free-installation-of-python-software-with-virtualenv/](http://opensourcehacker.com/2012/09/16/recommended-way-for-sudo-free-installation-of-python-software-with-virtualenv/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-31T14:21:08.067

创建虚拟环境的快速工作流程

```
$ mkdir awesomeapp 
$cd awesomeapp
$virtualenv venv --distribute
New python executable in venv/bin/python
Installing distribute.........done.
Installing pip................done.
$source venv/bin/activate
(venv)$python 
```

当您创建虚拟 venv 文件夹以存储路径时，您将 CD 放入您的目录。

现在，当您看到 (venv) 时，它就处于活动状态

# java - 从 DAO 层检索 IP 地址

> ID：14624760
> 
> 赞同：0
> 
> 时间：2013-01-31T11:34:21.213
> 
> 标签：java, spring, spring-security, dao

我使用 spring-acegi，我想从 DAO 层检索 IP 地址。当我使用类似的东西时：

```
Authentication auth = SecurityContextHolder.getContext().getAuthentication();
if (auth != null) {
    WebAuthenticationDetails details1 = ((WebAuthenticationDetails)auth.getDetails());
    if (details1 != null) {
        userIp = details1.getRemoteAddress();
    }
} 
```

在身份验证的那一刻，身份验证为空，我无法检索 IP 地址。

我也试图通过

```
String remoteAddress = ((ServletRequestAttributes)RequestContextHolder.currentRequestAttributes())
       .getRequest().getRemoteAddr(); 
```

但得到一个编译错误（我们使用 GWT）。

有人可以帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:14:26.297

移动你的

```
String remoteAddress = ((ServletRequestAttributes)RequestContextHolder.currentRequestAttributes()).getRequest().getRemoteAddr(); 
```

代码到**客户端**和**共享**包**之外**的 某个类中。查看您的应用程序 *.gwt.xml 描述符。例如，如果您将 com/domain/App.gwt.xml 作为 GWT 描述符，并且您的源包被声明为

 ****```
<source path="client" />
<source path="shared" /> 
```

那么您必须在**com.domain.client**和**com.domain.shared**包之外编写代码。

考虑对您的代码进行一些重构。如果您的 DAO 层绝对需要了解 IP，那么最好将其作为参数发送给某个方法调用。****

# java - 如何在程序中运行 java 源代码。

> ID：14624761
> 
> 赞同：-1
> 
> 时间：2013-01-31T11:34:22.313
> 
> 标签：java

> **可能重复：**
> [如何在 Java 程序中运行 Java 源代码](https://stackoverflow.com/questions/4965224/how-to-run-java-source-code-within-a-java-program)

我们小组希望在 java 程序/应用程序中运行 java 源代码，因为其中的语法没有错误。怎么会这样？我们还需要编译错误吗？还是编译不可避免？谢谢 ...

就像 netbeans 可以在下面运行它的代码一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:45:07.993

以下是如何使用该`Runtime` `exec`方法从 java 代码运行 java（或其他外部）程序，以及如何读取命令的输出和执行期间可能出现的错误：

```
import java.io.*;

public class JavaRunCommand {

    public static void main(String args[]) {

        String s = null;

        try {        
            // run the Unix "ps -ef" command
            // using the Runtime exec method:
            Process p = Runtime.getRuntime().exec("ps -ef");

            BufferedReader stdInput = new BufferedReader(new InputStreamReader(p.getInputStream()));

            BufferedReader stdError = new BufferedReader(new InputStreamReader(p.getErrorStream()));

            // read the output from the command
            System.out.println("Here is the standard output of the command:\n");
            while ((s = stdInput.readLine()) != null) {
                System.out.println(s);
            }

            // read any errors from the attempted command
            System.out.println("Here is the standard error of the command (if any):\n");
            while ((s = stdError.readLine()) != null) {
                System.out.println(s);
            }

            System.exit(0);
        }
        catch (IOException e) {
            System.out.println("exception happened - here's what I know: ");
            e.printStackTrace();
            System.exit(-1);
        }
    }
} 
```

更多详情：[http ://alvinalexander.com/java/edu/pj/pj010016](http://alvinalexander.com/java/edu/pj/pj010016)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:39:53.790

你可以使用这个函数 java.lang.Runtime.exec(), [link](http://publib.boulder.ibm.com/infocenter/iseries/v5r3/index.jsp?topic=%2Frzaha%2Fjvlngex1.htm)，[这里](http://www.avajava.com/tutorials/lessons/how-do-i-run-another-application-from-java.html?page=2)是另一个关于如何做的

# javascript - Javascript发送href而不点击？

> ID：14624762
> 
> 赞同：2
> 
> 时间：2013-01-31T11:34:25.787
> 
> 标签：javascript, jquery, json

我不确定这是否可能。我有这样的链接

```
<a id="addCart" href="http://mydomain.foxycart.com/cart?name=test-product&price=10.00">Add to Cart</a> 
```

单击此链接时，会将值发送到另一台服务器上的 json 购物车。

但是，我有一种情况，我需要使用这个 href 链接发送类似的值，但不被点击。例如：

```
$('.name').each(function() {
    while (y < data.products.length-1) {
        if($(this).text() === data.products[x].name) {
            $('.price').eq(x).text(data.products[x].price);
            //href here!
        }
        x++;
        y++;
    }
    x=0;
    y=0;
}); 
```

我需要通过这个href：

```
href="http://mydomain.foxycart.com/cart?value=true" 
```

在 //href 这里！上面的部分，没有被点击。我希望我的请求是有意义的。有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:15:21.370

对您的问题的简短回答**是**，您可以做到。但是，它要求您在另一端具有访问权限，以便以接受跨站点请求的方式修改脚本。但是，您应该非常小心，因为这意味着许多安全风险。

可以这样做：

**链接：**

```
<a href="http://mydomain.foxycart.com/cart?value=true" id="send_without_click">There is a link</a> 
```

**Javascript/JQuery 代码：**

```
$(document).ready(function () {
    var a_handler = "#send_without_click";
    var $a = $(a_handler);
    var a_url = $a.attr('href');
    $.ajax({
        type: 'POST',
        url: a_url,
        crossDomain: true,
        data: {
            href: a_url
        },
        beforeSend: function () {
            //Do something before send. If not just remove the "beforeSend" part...
        },
        success: function (responseData, textStatus, jqXHR) {
            //the responseData is what you will get as response from the server
            var value = responseData.someKey;
        },
        error: function (responseData, textStatus, errorThrown) {
            alert('POST failed.');
        }
    });
}); 
```

在服务器端，接收发布请求的页面必须定义一些标头才能接收 AJAX 调用。这将允许您的脚本进行跨域 POST、GET 和 OPTIONS。这是 PHP 中的一个示例：

示例文件**cart.php**

```
switch ($_SERVER['HTTP_ORIGIN']) {
    case 'http://from.com': case 'https://from.com':
    header('Access-Control-Allow-Origin: '.$_SERVER['HTTP_ORIGIN']);
    header('Access-Control-Allow-Methods: POST, GET, OPTIONS');
    header('Access-Control-Max-Age: 1000');
    header('Access-Control-Allow-Headers: Content-Type');
    break;
} 
```

以上所有内容都将遵循以下顺序：

1.  浏览器向服务器发送一个**OPTIONS**方法。这是浏览器的“安全”措施，用于查看服务器是否允许跨站点（无论服务器允许）发布/请求
2.  [然后服务器以“Access-Control-Allow-Origin”响应，告诉浏览器如果请求来自“ http://from.com ”或“](http://from.com) [https](https://from.com) ”的安全形式，则允许您发布|GET|ORIGIN ： [//来自.com](https://from.com) “。
3.  由于服务器没问题，浏览器会发出您要求的 POST 请求。

***备注**

*   让您的客户端设置它发送的内容类型是一种很好的做法——因此您也需要允许这样做。
*   服务器每次操作会发出 2 个请求
*   安全隐患正在增加。'Access-Control-Allow-Origin: *' 有点危险。
*   这不适用于非常旧的浏览器，也可能不适用于移动浏览器。
*   始终返回上面的标头，而不仅仅是**OPTION**请求。

### 编辑：

如果您知道网站（外部）正在使用*JSONP* Ajax，我还找到了一种检索数据的方法。

```
//JSON format:
{"name":"stackoverflow","id":5}
//JSONP format:
func({"name":"stackoverflow","id":5}); 
```

如果您知道*example.com*正在提供看起来像 JSONP 的 JSON 文件，那么即使您不在*example.com*域中，您也可以使用这样的代码来检索它：

```
function func(json){
    alert(json.name);
}
var elm = document.createElement("script");
elm.setAttribute("type", "text/javascript");
elm.src = "http://example.com/jsonp";
document.body.appendChild(elm); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:49:55.523

我是不是弄错了，但你不只是想这样做吗

```
$.ajax({
    url: "http://mydomain.foxycart.com/cart/",
    type: "get",
    data: { value : true }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T11:45:05.713

```
var href = "...";

if($(this).text() === data.products[x].name) {
   $('.price').eq(x).text(data.products[x].price);

   //put this code
   $.ajax(href, function(resp) {
        //do something
   });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T11:43:09.710

这将在不离开您所在的网站的情况下调用 url。

```
jQuery.ajax({
    url: 'http://mydomain.foxycart.com/cart?value=true',
    success: function(data) {}
}); 
```

我不能 100% 确定您是否可以调用另一个域，以防 javascript 在另一个域上运行。所以也许你需要做：

```
jQuery.ajax({
    url: '/cart?value=true',
    success: function(data) {}
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T11:59:31.887

您可以使用 JSON.parse 解析 Url 的 Href 值，并使用循环等进行处理。防止点击链接......

在这里查看[http://jsfiddle.net/RKc6f/](http://jsfiddle.net/RKc6f/)

```
$(function() {
    $("#addCart").on('click', function(e) { 
        var url = $(this).attr("href");
        var urlParams = url.substring(url.indexOf("?")+1);

        var myProduct = (JSON.parse('{"' + decodeURI(urlParams.replace(/&/g, "\",\"").replace(/=/g,"\":\"")) + '"}'));
        console.log(myProduct.name);
        console.log(myProduct.price);
        //do the processing    
        e.preventDefault();//preven going to other page   
    });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T11:40:44.897

尝试这个

```
 window.location="http://mydomain.foxycart.com/cart?value=true"; 
```

**或者**

```
window.location.href="http://mydomain.foxycart.com/cart?value=true"; 
```

但是，如果这是您想要的，这会将浏览器带到该位置

或者不离开页面..你可以使用ajax。

```
jQuery.ajax({
    type: 'post', 
    url: 'http://mydomain.foxycart.com/cart?value=true',
    success: function(data) {
        // do your stuff
    }
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-21T12:04:39.183

可能有点晚了，但由于没有接受任何答案，而且还没有人提及：您还可以使用虚拟图像元素并将您的 url 传递给它的 src ，从而导致没有 CORS 限制的 get 请求。沿着这些思路：

```
var getter = document.createElement('img');
getter.src = href; //url got from the $('#addCart') element or whatever you need 
```

# codeigniter - 如何将 htpasswd 应用于 codeigniter 管理员？

> ID：14624763
> 
> 赞同：0
> 
> 时间：2013-01-31T11:34:31.097
> 
> 标签：codeigniter, admin

我需要将 .htpasswd 应用到我的 CI 管理面板。但是我没有单独的管理员文件夹，我如何在没有文件夹的情况下申请。我在视图中只有 admin 文件夹，控制器和模型没有单独编写。请帮助我如何通过基本身份验证使我的管理面板安全。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:58:14.500

我建议您尝试在这篇文章中找到的解决方案

[.htpasswd 在 codeigniter](https://stackoverflow.com/questions/3816031/htpasswd-in-codeigniter)

或这个

[http://ellislab.com/forums/viewthread/141775/](http://ellislab.com/forums/viewthread/141775/)

# java - 尽管清单，但在 jar 文件中找不到主类

> ID：14624764
> 
> 赞同：2
> 
> 时间：2013-01-31T11:34:32.490
> 
> 标签：java, maven, netbeans, maven-assembly-plugin

我在 netbeans 中有 Maven 项目。我的 POM 看起来像这样：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" 
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>myproject</groupId>
  <artifactId>Myproject</artifactId>
  <version>1.0-SNAPSHOT</version>
  <packaging>jar</packaging>

  <name>Slave</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <build>
    <plugins>
      <plugin>
        <artifactId>maven-assembly-plugin</artifactId>
        <configuration>
          <archive>
            <manifest>
              <addClasspath>true</addClasspath>
              <mainClass>myproject.slave.App</mainClass>
            </manifest>
          </archive>
          <descriptorRefs>
            <descriptorRef>jar-with-dependencies</descriptorRef>
          </descriptorRefs>
        </configuration>
        <executions>
          <execution>
            <id>make-my-jar-with-dependencies</id>
            <phase>package</phase>
            <goals>
              <goal>single</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>

  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>mysql</groupId>
      <artifactId>mysql-connector-java</artifactId>
      <version>5.1.6</version>
    </dependency> 
    <dependency>
      <groupId>org.jsoup</groupId>
      <artifactId>jsoup</artifactId>
      <version>1.7.1</version>
    </dependency>
    <dependency>
      <groupId>org.apache.pdfbox</groupId>
      <artifactId>pdfbox</artifactId>
      <version>1.7.1</version>
    </dependency>
    <dependency>
      <groupId>com.googlecode.json-simple</groupId>
      <artifactId>json-simple</artifactId>
      <version>1.1</version>
    </dependency>
  </dependencies>
</project> 
```

它工作得很好，我可以执行`Myproject-1.0-SNAPSHOT-jar-with-dependencies.jar`并且 Java 找到了主类并且它正确执行 - 直到某个时刻。突然，当我想执行 jar 文件时，我得到了异常：

```
java -jar Myproject-1.0-SNAPSHOT-jar-with-dependencies.jar

Exception in thread "main" java.lang.NullPointerException
        at sun.launcher.LauncherHelper.getMainClassFromJar(Unknown Source
        at sun.launcher.LauncherHelper.checkAndLoadMain(Unknown Source)

java -cp Myproject-1.0-SNAPSHOT-jar-with-dependencies.jar myproject.slave.App

Exception in thread "main" java.lang.NoClassDefFoundError: org/jsoup/nodes/Eleme
nt
        at myproject.slave.Worker.<init>(Worker.java:29)
        at myproject.slave.App.main(App.java:26)
Caused by: java.lang.ClassNotFoundException: org.jsoup.nodes.Element
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source) 
```

当我在 Netbeans 中单击“运行”时，它会正确执行。

所以问题是具有依赖关系的 jar 构建不正确，我只是想知道为什么？我就像2小时前一样，现在它不工作了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:44:57.453

好的，所以问题不在于 JVM 找不到主类。它找不到的类是“org.jsoup.nodes.Element”。（堆栈跟踪是这样说的......）

但为什么？毕竟你已经在 POM 文件中包含了 jsoup 作为依赖项......

原因是 JVM 的类加载器无法在嵌套的 JAR 中找到类。如果你想创建一个自包含的可执行 JAR（即包含它需要的所有依赖类），你需要使用[maven-shade-plugin](http://maven.apache.org/plugins/maven-shade-plugin/)创建一个所谓的“uber-jar”。

* * *

当您从 Netbeans 运行时，命令启动器正在设置类路径......而不是使用`-jar`启动 JVM 的选项。

# python - 如何在 Python 3.3 中将某些字符转换为五位 unicode 1？

> ID：14624765
> 
> 赞同：7
> 
> 时间：2013-01-31T11:34:33.527
> 
> 标签：python, regex, unicode, python-3.3

我想在 Python 3.3 中将一些字符转换为五位 unicode。例如，

```
import re
print(re.sub('a', u'\u1D15D', 'abc' )) 
```

但结果与我的预期不同。我是否必须放置角色本身，而不是代码点？有没有更好的方法来处理五位 unicode 字符？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-31T11:51:27.663

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T11:54:50.553

By the way, you do not need the `re` module for this. You could use [str.translate](http://docs.python.org/3.3/library/stdtypes.html#str.translate):

```
>>> 'abc'.translate({ord('a'):'\U0001D15D'})
'bc' 
```

# c++ - 布尔读/写操作可以在 x86 上不是原子的吗？

> ID：14624776
> 
> 赞同：32
> 
> 时间：2013-01-31T11:35:06.130
> 
> 标签：c++, x86, boolean, atomic

假设我们有两个线程，一个在循环中读取布尔值，另一个可以在特定时间切换它。就我个人而言，我认为这应该是原子的，因为`sizeof(bool)`在 C++ 中是 1 个字节，你不会部分读/写字节，但我想 100% 确定。

所以是还是不是？

**编辑**：

也供将来参考，是否同样适用于`int`？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-01-31T11:53:10.210

C++11 中的“原子”类型解决了三个不同的问题：

1.  撕裂：一次读或写涉及多个总线周期，操作中间发生线程切换；这可能会产生不正确的值。

2.  缓存一致性：来自一个线程的写入会更新其处理器的缓存，但不会更新全局内存；来自不同线程的读取读取全局内存，并且在其他处理器的缓存中看不到更新的值。

3.  编译器优化：编译器在不从其他线程访问值的假设下打乱读写顺序，导致混乱。

使用`std::atomic<bool>`可确保正确管理所有这三个问题。不使用`std::atomic<bool>`会让你猜测，充其量是不可移植的代码。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-31T11:46:07.837

这完全取决于您所说的“原子”一词的实际含义。

您的意思是“最终值将一次性更新”（是的，在 x86 上绝对保证字节值 - 以及任何正确对齐的值至少高达 64 位），或者“如果我将其设置为 true（或false），在我设置它之后没有其他线程会读取不同的值”（这不是很确定 - 你需要一个“锁定”前缀来保证这一点）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-31T11:46:07.183

x86 仅保证字大小的字对齐读取和写入。它不保证任何其他操作，除非显式原子操作。另外，当然，您必须首先说服您的编译器实际发出相关的读取和写入。

# php - 如何使用codeigniter显示分页信息

> ID：14624777
> 
> 赞同：4
> 
> 时间：2013-01-31T11:35:09.847
> 
> 标签：php, codeigniter

我想在我的页面中显示分页信息。像这样 ***下表显示了 17 本书中的 0-8 本书***

正如下面评论和回答中所解释的，我试图解决我的问题。但我仍然有问题。

1.  无法获取`cur_page`值。我试过 `$CI =& get_instance(); $curpage=$CI->pagination->cur_page;` 但这给了我一个
    零值。

2.  如果我为`cur_page`. 说 $cur_page=3，我的总记录是 17。然后在最后一页（即 3）显示错误信息 `showing 24-17 of 17 books`

请帮我解决这个问题？

在我的视图页面中

```
 <?php    echo "displaying $result_start to $result_end of $total";?> 
```

在控制器中

```
 $config = array();  
    $config['base_url'] = base_url().'viewallbooks/books/pgn/';
    $config["total_rows"] = $this->Booksmodel->record_count_for_secondtopBooks('3');
    $config['uri_segment'] = 4;
    $config['per_page'] = 8;
    $config['full_tag_open'] = '<div id="pagination">';
    $config['full_tag_close'] = '</div>'; 

       $this->pagination->initialize($config);
       $page = ($this->uri->segment(4)) ? $this->uri->segment(4) : 0;

    $data["query"] = $this->Subjectmodel->get_subjects();
    $data["query1"]=  $this->Editionmodel->get_edition();

    /*
     * For showing the "showing 8-16 of 23 data
     */
    $data["flimit"]=$config["per_page"];
    $data["slimit"]=$page;
    $data["trows"]= $config["total_rows"] ; 
     /*
     * Ends here--For showing the "showing 8-16 of 23 data
     */

    $data["query2"]=$this->Booksmodel->get_all_book_list_atHomeTop('3',$config["per_page"], $page);
     $data["links"] = $this->pagination->create_links();
    $this->load->view('commonfiles/booksview',$data); 
```

在用于计算总行数的模型中

```
 //-- -Counting the rows of bookdetails of table where display_id is as  argument----- 
 public function record_count_for_secondtopBooks($id) {
    $this->load->database(); 
     $this->db->where('display_id', $id);
     $this->db->from('bookdetails');
    return $this->db->count_all_results();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-11-08T08:28:32.603

我使用此代码生成分页信息

```
if($config["total_rows"]>10){
    if($this->pagination->cur_page==1)
        $start = $this->pagination->cur_page;
    else
        $start = (($this->pagination->cur_page-1) * $this->pagination->per_page)+1;

    if($this->pagination->cur_page * $this->pagination->per_page > $config["total_rows"])
        $end = $config["total_rows"];
    else
        $end = $this->pagination->cur_page * $this->pagination->per_page;

    $data['pagination_des'] = "Showing ".($start)." to ".($end)." from ". $config["total_rows"]." results";
}else
{
    $data['pagination_des'] = "Showing ".($this->pagination->cur_page+1)." to ".($config["total_rows"])." from ". $config["total_rows"]." results";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T19:16:42.157

`var_dump($this->pagination);`返回这样的东西：

```
object(CI_Pagination)
21 (31) { 
    ["base_url"]=> string(31) "http://localhost/site/users" 
    ["prefix"]=> string(0) "" 
    ["suffix"]=> string(0) "" 
    ["total_rows"]=> int(3) 
    ["per_page"]=> int(20) 
    ["num_links"]=> int(15) 
    ["cur_page"]=> int(0) 
    ["first_link"]=> string(5) "First" 
    ["next_link"]=> bool(false) 
    ["prev_link"]=> bool(false) 
    ["last_link"]=> string(4) "Last" 
    ["uri_segment"]=> int(2) 
    ["full_tag_open"]=> string(25) "" 
    ["full_tag_close"]=> string(4) "" 
    ["first_tag_open"]=> string(31) "" 
    ["first_tag_close"]=> string(13) " " 
    ["last_tag_open"]=> string(36) " " 
    ["last_tag_close"]=> string(7) "" 
    ["first_url"]=> string(31) "http://localhost/site/users" 
    ["cur_tag_open"]=> string(87) " " 
    ["cur_tag_close"]=> string(11) "" 
    ["next_tag_open"]=> string(36) " " 
    ["next_tag_close"]=> string(13) " " 
    ["prev_tag_open"]=> string(36) " " 
    ["prev_tag_close"]=> string(7) "" 
    ["num_tag_open"]=> string(35) " " 
    ["num_tag_close"]=> string(7) "" 
    ["page_query_string"]=> bool(false) 
    ["query_string_segment"]=> string(8) "per_page" 
    ["display_pages"]=> bool(true) 
    ["anchor_class"]=> string(26) "class="button bradiusMax" " } 
```

我应该做：

```
echo "Showing ".( $this->pagination->cur_page * $this->pagination->per_page)." of ". $this->pagination->total_rows." total results"; 
```

如果你愿意，你也可以使用不同的格式，就像 itachi 在评论中向你展示的那样。

# jquery - Microsoft JScript 运行时错误：对象不支持属性或方法“切片”IE8 MVC

> ID：14624780
> 
> 赞同：2
> 
> 时间：2013-01-31T11:35:16.007
> 
> 标签：jquery, internet-explorer-8, jquery-jtable

我正在使用`JTable`我的一个`MVC`项目并在编辑功能方面遇到问题。每当我单击“编辑”窗口上的“保存”按钮时，我都会收到`Js`错误消息——Microsoft JScript 运行时错误：对象不支持属性或方法`slice`并且模式窗口未关闭。谁能帮我摆脱这个问题。

顺便说一句，这个问题在 IE8 中出现，它在 IE9 中表现得非常出色。

jQuery 版本 - 1.7.2

jQuery UI 版本 - 1.8.20

jTable 版本 - 2.1（最新版本）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:54:47.833

我得到了答案，请参考[jTable 的 Issue #166: Microsoft JScript runtime error: Object doesn't support property or method 'slice' + IE8](https://github.com/hikalkan/jtable/issues/166)。

# android - 从广播接收器打开和更新活动

> ID：14624782
> 
> 赞同：1
> 
> 时间：2013-01-31T11:35:27.240
> 
> 标签：android

我在名为 SmsRceiver 的 BroadCastReceiver 中接收来自模拟器的短信。现在我想在 Activity 内的文本视图上显示此消息。打开一个活动，我正在从我的 SmsReciever 发送另一个广播。但我收到以下错误

```
getOrCreateThreadId cursor cnt: 1
01-31 03:28:04.562: W/NotificationService(68): STOP command without a player
01-31 03:28:04.652: D/MediaPlayer(68): Couldn't open file on client side, trying server side
01-31 03:28:04.652: E/MediaPlayerService(33): Couldn't open fd for content://settings/system/notification_sound
01-31 03:28:04.662: E/MediaPlayer(68): Unable to to create media player
01-31 03:28:04.662: W/NotificationService(68): error loading sound for content://settings/system/notification_sound
01-31 03:28:04.662: W/NotificationService(68): java.io.IOException: setDataSource failed.: status=0x80000000
01-31 03:28:04.662: W/NotificationService(68):  at android.media.MediaPlayer.setDataSource(Native Method)
01-31 03:28:04.662: W/NotificationService(68):  at android.media.MediaPlayer.setDataSource(MediaPlayer.java:737)
01-31 03:28:04.662: W/NotificationService(68):  at android.media.MediaPlayer.setDataSource(MediaPlayer.java:692)
01-31 03:28:04.662: W/NotificationService(68):  at com.android.server.NotificationPlayer$CreationAndCompletionThread.run(NotificationPlayer.java:88) 
```

短信接收器.Java

```
package com.blogspot.uappmarket.smschat;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsManager;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class SmsReceiver extends BroadcastReceiver {
    String from,message = "";
    @Override
    public void onReceive(Context context, Intent intent) {
        Bundle bundle = intent.getExtras();
        Object[] pdus = (Object[]) bundle.get("pdus");
        SmsMessage[] sms = new SmsMessage[pdus.length];
        from += SmsMessage.createFromPdu((byte[]) pdus[0]).getOriginatingAddress();
        for (int i=0; i<sms.length; i++){
            sms[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
            message+=sms[i].getMessageBody();
        }
        Intent broadcastIntent = new Intent();
        intent.setAction("SMS_RECEIVED_ACTION");
        intent.putExtra("from", from);
        intent.putExtra("message", message);
        context.sendBroadcast(broadcastIntent);
    }
} 
```

接收短信.Java

```
package com.blogspot.uappmarket.smschat;

import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.widget.TextView;

public class ReceiveSms extends Activity{

    TextView tvFrom,tvMessage;
    BroadcastReceiver MessageReceiver = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            //tvFrom.setText("One Message Received");
        }
    };
    IntentFilter filter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.receive_sms);
        tvFrom = (TextView) findViewById(R.id.tvFrom);
        tvMessage = (TextView) findViewById(R.id.textView2);
        filter= new IntentFilter("SMS_RECEIVED_ACTION");
    }

    @Override
    protected void onResume() {
        super.onResume();
        registerReceiver(MessageReceiver, filter);
    }

    @Override
    protected void onPause() {
        super.onPause();
        unregisterReceiver(MessageReceiver);
    }
} 
```

# php - 避免在 jquery easyui 组合框中附加逗号

> ID：14624786
> 
> 赞同：1
> 
> 时间：2013-01-31T11:35:47.487
> 
> 标签：php, jquery-easyui

我在 jquery easyui 的组合框中有问题。我必须避免在easyui的jquery easyui组合框中附加逗号。请给我任何解决方案以停止在属性 multiple:true 的组合框中附加逗号，

谢谢！

我的代码是：

```
 <input class="easyui-combobox"
                    name="Output"
                    id = 'cc'
                   data-options="
                    url:'data/urine_output.json',
                    valueField:'text',
                    textField:'text',
                    multiple:true,
                    selected:true,
                    panelHeight:'auto'
                    "> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-08T16:45:15.940

我知道这对你来说有点晚了，但我还是回答了，因为官方的 easyui 文档中没有记录这一点。您只需添加“**分隔符**”属性：

```
data-options="      url:'data/urine_output.json',
                    valueField:'text',
                    textField:'text',
                    multiple:true,
                    selected:true,
                    panelHeight:'auto',
                    separator:'|'     
                    " 
```

# powershell - Quest ActiveRoles Managementshell：FOREACH-OBJECT Set-QADUSER 服务器不甘

> ID：14624792
> 
> 赞同：0
> 
> 时间：2013-01-31T11:36:06.763
> 
> 标签：powershell, foreach

我必须在我们的 AD 环境（1000 多个用户）中更新每个用户的不同值。

我有一个包含所有值的 CSV 文件，文件的格式就像

```
SamAccountName,Name,telephoneNumber,ipPhone.... 
```

我尝试使用以下 PS 语法导入数据：

```
import-csv -path "PathToCSVFiles" | ForEach-Object {
    get-qaduser -SamAccountName $_.SamAccountName -SearchScope "Subtree" -SearchRoot "ou=SomeOu,DC=subdomain,DC=domain,DC=local"| Set-QADUser -objectAttributes @{ipPhone=$_.ipPhone}
} 
```

但我总是收到“Set-QADUser：服务器不愿意处理请求”。每个用户对象的错误。

当我用单个值运行整个“get-qaduser ....set-qaduser”行而不是在 foreach-object 块中运行它时，它工作得非常好，我不明白为什么 foreach 部分没有'不工作。

目前我有一个 Excel VBA 宏，它为每个需要更新的用户编写一个带有一行的 PS1 文件，但这很混乱，而且没有真正的帮助。

谁能告诉我我做错了什么，将不胜感激。

谢谢和最好的，马库斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:08:42.460

如果删除 get 命令会怎样？

```
Import-Csv -path "PathToCSVFiles" | ForEach-Object {
    Set-QADUser $_.SamAccountName -ObjectAttributes @{ipPhone=$_.ipPhone}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:06:00.703

在您的第二个 foreach 循环中 $_ 指的是 get-qaduser 发送的结果，它没有 ipPhone 属性。
试试这个：

```
import-csv -path "PathToCSVFiles" | ForEach-Object {
    $ipPhone=$_.ipPhone
    get-qaduser -SamAccountName $_.SamAccountName -SearchScope "Subtree" -SearchRoot "ou=SomeOu,DC=subdomain,DC=domain,DC=local"| Set-QADUser -objectAttributes @{ipPhone=$ipPhone}
} 
```

# objective-c - 单元测试时，空格出现在字符串的末尾

> ID：14624797
> 
> 赞同：0
> 
> 时间：2013-01-31T11:36:26.570
> 
> 标签：objective-c, unit-testing

所以我在这里遇到了这个奇怪的问题。我们构建了一个解析器`NSXMLParser`，首先实例化一个对象，然后根据刚刚结束的 XML 元素设置它的值。基本上，它将 XML 文件转换为可重用的`NSObject`.

现在我在解析器中设置一个断点来确定这些值是否设置正确。

![截图调试器](../Images/5e2f734628cd4bb5071ca1f585a6bc3d.png)

嗯，看起来不错。正确解析。让我为此编写一个单元测试。

```
assertThat([parsedPerson dateOfBirth], is(equalTo(@"22.06.1949"))); 
```

现在发生了这种情况。我得到以下控制台输出：

```
Expected "22.06.1949", but was "22.06.1949        " 
```

什么？空格从何而来？让我在单元测试中调试对象。

![截图调试器 2](../Images/617923f574ac4cefa3a2282d28379cdd.png)

相同的内存地址？同一个对象？空格从何而来？有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T22:33:48.657

我发现它与解析器本身有关，空格实际上是 XML 文件中的真实空格。

我们有（有）以下设置：

```
- (void)parser: (NSXMLParser *) parser didStartElement: (NSString *) elementName namespaceURI: (NSString *) namespaceURI qualifiedName: (NSString *) qName attributes: (NSDictionary *) attributeDict {
    [self setCurrentString: [NSMutableString string]];
}

- (void)parser: (NSXMLParser *) parser foundCharacters: (NSString *) string {
    string = [string stringByReplacingOccurrencesOfString: @"\n" withString: @""];
    string = [string stringByReplacingOccurrencesOfString: @"\t" withString: @""];
    [currentString appendString: string];
}

- (void)parser: (NSXMLParser *) parser didEndElement: (NSString *) elementName namespaceURI: (NSString *) namespaceURI qualifiedName: (NSString *) qName {

    if ([elementName isEqualToString: @"dateOfBirth"]) {
        [theObject setDateOfBirth: currentString];
    }

        // ...
} 
```

现在的问题是，将 分配`NSMutableString currentString`给这个对象在这个地方是危险的，因为它会被`foundCharacters`方法修改，因为它会在元素结束后继续查找字符。

这里的误解是，可变字符串在分配给对象后不会被修改。

解决方案：当你真的希望它不被修改时，从一个字符串中创建一个不可变的字符串，即使你认为它不会。

```
- (void)parser: (NSXMLParser *) parser didEndElement: (NSString *) elementName namespaceURI: (NSString *) namespaceURI qualifiedName: (NSString *) qName {

    NSString *parsedString = [NSString stringWithString:currentString]; // non-mutable copy made here

    if ([elementName isEqualToString: @"dateOfBirth"]) {
        [theObject setDateOfBirth: parsedString];
    }

        // ...
} 
```

# cakephp - CakePHP 树行为：重新排序不同类型的帖子

> ID：14624799
> 
> 赞同：0
> 
> 时间：2013-01-31T11:36:33.383
> 
> 标签：cakephp, tree

我有简化后的模型和帖子表，如下所示：

```
id | parent_id | lft| rght| title | body | type 
```

类型可以是“页面”、“新”、“服务”等。

我根据帖子类型渲染不同的视图模板，fe：

```
public function admin_view($id, $type){
    $posts = $this->paginate(array('Post.type' => $type));
    $this->set('posts', $posts);
} 
```

为了使帖子可重新排序，我使用树行为函数 moveUp() 和 moveDown()。主要问题是，当我渲染仅包含确切类型帖子的视图时，函数 moveUp() 或 moveDow() 可能会切换类型不同的帖子位置。并且在当前视图中不会看到任何更改。

树行为是否有任何额外的范围条件可以通过？我查看了它的所有代码，但找不到任何可以帮助我的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:48:40.127

树行为确实具有范围功能。附加这样的行为： `$this->Post->Behaviors->attach('Tree', array('scope' => array('Post.group' => $type)));`. 这样，您可以为每种类型管理单独的子树。确保在对 Post 模型进行所有操作之前设置适当的范围。

# android - 完成下一个按钮操作时如何实现从arraylist获取和显示字符串

> ID：14624800
> 
> 赞同：2
> 
> 时间：2013-01-31T11:36:34.100
> 
> 标签：android, button, text, view, arraylist

我是安卓新手。。

在显示下一个问题时，我在 Nextbutton 中遇到问题...

在我第一次设置文本时，我得到了正确的问题并匹配了四个选项答案。我需要的是..

我有一个用于显示下一个问题和答案的下一个按钮。当单击下一个按钮时，我可以获得下一个问题的下四个选项。但是在我点击下一个四次后我无法得到下一个问题，它显示下一个问题。 ..但答案是正确的。

我做错了什么？我错过了什么？

任何帮助将不胜感激......提前非常感谢......

> ```
>  protected String doInBackground(String... args) {
>     List<NameValuePair> params = new ArrayList<NameValuePair>();
>         System.out.println("cool");
>     params.add(new BasicNameValuePair("tid", tid));
>     json = jsonParser.makeHttpRequest(url_get_quesurl, "GET", params);
>     System.out.println("ques value got");
>     Log.d("All Groups: ", json.toString());
>         System.out.println("question");
>     try {
>     int success = json.getInt(TAG_SUCCESS);
>     System.out.println("Success");
>     if (success == 1) {
>     System.out.println("Success");
>     groups = json.getJSONArray(TAG_GROUP);
>     System.out.println("Result Success+++"+groups);
>     for (int i = 0; i < groups.length();i++) {
>     JSONObject c = groups.getJSONObject(i);
>           String question = c.getString(TAG_QUES);
>       System.out.println("Checking ::"+question);
>     ques1.add(question);
>     String answer = c.getString(TAG_ANSW);
>     System.out.println("Checking ::"+answer);
>     answ1.add(answer);
>            }
>         } else {
>             showAlert();
>         }
>     } catch (JSONException e) {
>         System.out.println("Error "+e.toString());
>     }
>     return null;
> }  
>    protected void onPostExecute(String file_url) {
>     pDialog.dismiss();
>       ques1=new ArrayList<String>(new ArrayList<String>(ques1));
>             //  j=0;
>             TextView txtque = (TextView) findViewById(R.id.que_txt); 
>             txtque.setText(ques1.get(j));
>     answ1=new ArrayList<String>(new ArrayList<String>(answ1));
>             btn_practice1.setText(answ1.get(0));
>             btn_practice2.setText(answ1.get(1));
>             btn_practice3.setText(answ1.get(2));
>             btn_practice4.setText(answ1.get(3));
>          btn_practicerg.setOnCheckedChangeListener(new OnCheckedChangeListener() {
>                 @Override
>                 public void onCheckedChanged(RadioGroup group, int checkedId) { 
>                     RadioButton radioButton = (RadioButton) findViewById(checkedId);
>                    // Toast.makeText(Question.this, "" + radioButton.getText(), 2000).show(); 
>                     TextView txtRadio = (TextView) findViewById(R.id.rdtxt); 
>                     txtRadio.setText("" + radioButton.getText());
>                 }
>     });
>         Button nextBtn = (Button) findViewById(R.id.nxt_btn);
>         nextBtn.setOnClickListener(new Button.OnClickListener(){
>           public void onClick(View v){  
>           j++;
>         TextView txtque = (TextView) findViewById(R.id.que_txt); 
>         txtque.setText(ques1.get(j)); 
>         k++;
>         btn_practice1.setText(answ1.get((k*4)+0));
>         btn_practice2.setText(answ1.get((k*4)+1));
>         btn_practice3.setText(answ1.get((k*4)+2));
>         btn_practice4.setText(answ1.get((k*4)+3));
>          }
>        });
> } 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:58:38.853

**制作你的数组：**

*   `ArrayList<String> Question = new ArrayList<String>();`
*   `ArrayList<String> Answer = new ArrayList<String>();`

**添加您的价值：**

*   `Question.add(json_data.getString("QUESTION_TAG").toString());`
*   `Answer.add(json_data.getString("ANSWER_TAG").toString());`

检查列表长度，您必须在按钮单击中更新索引。

**按钮点击事件：**

*   `Question.get(index).toString();`
*   `Answer.get(index).toString();`

在这里，您可以在每次点击后使用您的数据并更新索引，如果您的答案 id 为真。

**注意：** 你的索引应该被维护，否则它会抛出`indexoutofrangeexception`异常。

希望你能按照这个来管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T06:15:14.130

问题是您当时将答案存储在 answ1 数组中，四个空字符串添加到 ques1 数组中，因此您在按下按钮四次后得到下一个问题....

为此，维护两个索引，一个用于问题，另一个用于答案。

# wpf - 文本框上的多重绑定不起作用

> ID：14624803
> 
> 赞同：1
> 
> 时间：2013-01-31T11:36:44.313
> 
> 标签：wpf, binding

**两种情况都已解决，请查看第一个答案评论以获取信息。**

这段代码编译虽然在运行时出错。异常说：

`A first chance exception of type 'System.Windows.Markup.XamlParseException' occurred in PresentationFramework.dll`.

当我尝试为 MultiBinding 中的第二个绑定设置源时，会发生解析异常。我已经尝试了很多方法并浏览了大约 20 篇文章，但我无法找出这里有什么问题。

我最好的猜测是它以某种方式连接到了错误的转换器返回类型。

而且，顺便说一句，当您将 TextBox 更改为 TextBlock 时，第一种情况有效。第二种情况仍然无效。

**情况1**

XAML：

```
<UserControl x:Class="Draft.MainControl"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
        xmlns:draft="clr-namespace:Draft" 
        xmlns:s="clr-namespace:System;assembly=mscorlib" 
        Height="350" Width="352">

    <UserControl.Resources>

        <s:String x:Key="str1">HELLO</s:String>
        <s:String x:Key="str2">WORLD</s:String>

        <draft:StringConverter x:Key="myStringConverter"/>

     </UserControl.Resources>

    <Grid>

        <TextBox Name="tb1">
            <TextBox.Text>
                <MultiBinding Converter="{StaticResource myStringConverter}">
                    <Binding Source="{StaticResource str1}" />
                    <Binding Source="{StaticResource str2}" />
                </MultiBinding>
            </TextBox.Text>
        </TextBox>

    </Grid>
</UserControl> 
```

代码背后：

```
public class StringConverter : IMultiValueConverter
{
    public object Convert( object[] values, Type targetType, object parameter, CultureInfo culture )
    {
        return ( values[0].ToString() + values[1].ToString() );
    }

    public object[] ConvertBack( object values, Type[] targetType, object parameter, CultureInfo culture )
    {
        throw new NotImplementedException();
    }
} 
```

提前致谢！

**案例2**

同样问题的另一种情况：

> ```
>  <Grid>
>             <TextBlock TextWrapping="WrapWithOverflow">
> 
>                 <TextBlock.Resources>
>                     <s:Int32 x:Key="defaultHeight">2</s:Int32>
>                     <s:Int32 x:Key="defaultNum">10</s:Int32>
>                     <draft:MultiplierConverter x:Key="myConverter"/>
>                 </TextBlock.Resources>
> 
>                 <TextBlock.Text>
>                     aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&#10;
>                     aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&#10;
>                     aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&#10;
>                     aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&#10;
>                     aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&#10;
>                     aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&#10;
>                     aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&#10;
>                     aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&#10;
>                     aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&#10;
>                 </TextBlock.Text>
> 
>                 <TextBlock.Height>
>                     <MultiBinding Converter="{StaticResource myConverter}">
>                         <Binding Source="{StaticResource defaultNum}" Mode="OneWay" />
>                         <Binding Source="{StaticResource defaultHeight}" Mode="OneWay" />
>                     </MultiBinding>
>                 </TextBlock.Height>
>             </TextBlock>
>         </Grid>
>     </UserControl> 
> ```

```
Code behind: 
```

> ```
>  public class MultiplierConverter : IMultiValueConverter
>   {
>       public object Convert( object[] values, Type targetType, object parameter, CultureInfo culture )
>       {
>           if ( values.Count() == 2 && values[0] != DependencyProperty.UnsetValue && values[1] != DependencyProperty.UnsetValue )
>           {
>               var num = (Int32)values[0];
>               var height = (Int32)values[1];
> 
>               return ( num * height );
>           }
> 
>           return 0;
>       }
> 
>       public object[] ConvertBack( object values, Type[] targetType, object parameter, CultureInfo culture )
>       {
>           throw new NotImplementedException();
>       }
>   }
> 
> } 
> ```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T11:53:16.470

您必须设置`Mode="OneWay"`内部绑定：

```
<MultiBinding Converter="{StaticResource myStringConverter}">
    <Binding Source="{StaticResource str1}" Mode="OneWay" />
    <Binding Source="{StaticResource str2}" Mode="OneWay" />
</MultiBinding> 
```

* * *

如果您`XamlParseException`在调试器中调查过 ，您会意识到此消息存在[InnerException](http://msdn.microsoft.com/en-us/library/system.exception.innerexception.aspx)：

> 双向绑定需要 Path 或 XPath。

* * *

现在解决第二个问题：当您查看 Visual Studio 中的输出窗口时，您可能会看到以下消息：

> System.Windows.Data 错误：5：BindingExpression 生成的值对目标属性无效。；Value='20' MultiBindingExpression:目标元素是'TextBlock' (Name=''); 目标属性是“高度”（类型“双”）

我想这说明了一切。

您或许应该注意`targetType`传递给`Convert`方法的参数。在您的情况下，它是`System.Double`.

# c# - 使用 c#5 异步进行非阻塞

> ID：14624806
> 
> 赞同：0
> 
> 时间：2013-01-31T11:36:46.873
> 
> 标签：c#, async-await, c#-5.0

如果我有一个 Web 应用程序将对网络和数据库的调用包装在 a 中`Task<T>`并等待它们，这应该可以防止线程阻塞，以便可以重用它。

但是，在进行 IO 工作时，是否还有一些线程被阻塞，所以等待并没有真正的好处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:15:42.523

如果您只是将阻塞调用包装在 a 中`Task.Run`，那么您是对的：没有任何好处。

但是，如果您使用的是自然异步方法（例如，异步`HttpClient`//方法`WebClient`和`HttpWebRequest`异步数据库方法），那么这些请求不会使用任何线程，并且您会获得可伸缩性优势。

在 Windows 的设备驱动程序级别，所有 I/O 都是异步的。同步 API 只是方便的包装器。自然异步方法不会阻塞同步 API 上的线程；它们建立在异步 API 之上。

# android - HTTPS 与 Ksoap2 Android 问题

> ID：14624809
> 
> 赞同：2
> 
> 时间：2013-01-31T11:36:59.983
> 
> 标签：android, web-services, https, android-ksoap2

下面是我遇到很多问题的代码。请解决这个问题。HTTPS ssl 证书问题。

MainActivity.java：

```
public class LoginActivity extends Activity {

    Context context;
    int flagForKeepLoggedIn = 1;
    private String TAG = "Vik";
    private String username;
    private String password;
    private static final String SOAP_ACTION = "http://xyz.org/gettemp";
    private static final String OPERATION_NAME = "gettemp";
    private static final String WSDL_TARGET_NAMESPACE = "http://xyz.org/";
    private static final String SOAP_ADDRESS = "https://12.12.12.11:3636/anonymous/gettemp/uyh.asmx";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login);
        context = this;
        final DataBaseHandler db = new DataBaseHandler(this);

        final EditText usernameValueEditText = (EditText) findViewById(R.id.username_value);
        final EditText passwordValueEditText = (EditText) findViewById(R.id.password_value);
        final CheckBox keepMeLoggedInCheckBox = (CheckBox) findViewById(R.id.checkbox_keep_me_logged_in);

        keepMeLoggedInCheckBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                if (db.ifTableExists()) {
                    if (isChecked) {
                        // db.updateKeepLoggedInFlag("1");
                        flagForKeepLoggedIn = 1;
                    } else {
                        // db.updateKeepLoggedInFlag("0");
                        flagForKeepLoggedIn = 0;
                    }
                }
            }
        });

        if (db.ifTableExists()) {
            if ((db.getKeepLoggedInFlagValue()).equals("1")) {
                List<User> userList = db.getStudentDetails();
                for (User cn1 : userList) {
                    usernameValueEditText.setText(cn1.getUserName());
                    passwordValueEditText.setText(cn1.getPassword());
                }
            }
        }

        TextView textViewForgotPassword = (TextView) findViewById(R.id.textview_forgot_password);
        final Button loginButton = (Button) findViewById(R.id.button_login);

        // Login Button Clicked
        loginButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                username = usernameValueEditText.getText().toString();
                password = passwordValueEditText.getText().toString();

                if(validate()) {
                    db.createTables();
                    db.addInfoDetails(flagForKeepLoggedIn);

                    AsyncCallWS task = new AsyncCallWS();
                    task.execute();
                } else {
                    InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                    imm.hideSoftInputFromWindow(loginButton.getWindowToken(), 0);
                    Toast.makeText(context, "Username or Password is empty",
                    Toast.LENGTH_LONG).show();
                }
            }
        });
    }

    public boolean validate() {
        return !"".equals(username.trim()) && !"".equals(password.trim());
    }

    private class AsyncCallWS extends AsyncTask<Void, Void, Void> {

        @Override
        protected Void doInBackground(Void... params) {
            // Log.i(TAG, "doInBackground");
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            Log.i(TAG, "onPostExecute");
            CallWebServiceForAuthentication();
        }

        @Override
        protected void onPreExecute() {
            // Log.i(TAG, "onPreExecute");
        }

        @Override
        protected void onProgressUpdate(Void... values) {
            // Log.i(TAG, "onProgressUpdate");
        }

        public void CallWebServiceForAuthentication() {
            SoapObject request = new SoapObject(WSDL_TARGET_NAMESPACE, OPERATION_NAME);

            request.addProperty("userName", username);
            request.addProperty("pwd", password);

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.dotNet = true;
            envelope.setOutputSoapObject(request);
            allowAllSSL();

            HttpsTransportSE aht = new KeepAliveHttpsTransportSE("12.12.12.11:3636", 443, "anonymous/gettemp/uyh.asmx", 1000);

            //HttpsTransportSE aht = new KeepAliveHttpsTransportSE("12.12.12.11:3636", 443, "anonymous/gettemp/uyh.asmx", 1000);
            //HttpTransportSE aht = new HttpTransportSE(SOAP_ADDRESS);

            try {
                aht.call(SOAP_ACTION, envelope);
                SoapObject response = (SoapObject) envelope.bodyIn;
                SOAPResponseManager soapManager = new SOAPResponseManager(this);
            } catch (Exception e) {
                aht.reset();
                e.printStackTrace();    
            }
        }

    private static TrustManager[] trustManagers;

    public static class _FakeX509TrustManager implements javax.net.ssl.X509TrustManager {
        private static final X509Certificate[] _AcceptedIssuers = new X509Certificate[] {};

        public void checkClientTrusted(X509Certificate[] arg0, String arg1) throws CertificateException {}

        public void checkServerTrusted(X509Certificate[] arg0, String arg1) throws CertificateException {}

        public boolean isClientTrusted(X509Certificate[] chain) {
            return (true);
        }

        public boolean isServerTrusted(X509Certificate[] chain) {
            return (true);
        }

        public X509Certificate[] getAcceptedIssuers() {
            return (_AcceptedIssuers);
        }
    }

    public static void allowAllSSL() {
        javax.net.ssl.HttpsURLConnection.setDefaultHostnameVerifier(new HostnameVerifier() {
        public boolean verify(String hostname, SSLSession session) {
            return true;
        }
    });

    javax.net.ssl.SSLContext context = null;

    if (trustManagers == null) {
        trustManagers = new javax.net.ssl.TrustManager[] { new _FakeX509TrustManager() };
    }

    try {
        context = javax.net.ssl.SSLContext.getInstance("TLS");
        context.init(null, trustManagers, new SecureRandom());
    } catch (NoSuchAlgorithmException e) {
        Log.e("allowAllSSL", e.toString());
    } catch (KeyManagementException e) {
        Log.e("allowAllSSL", e.toString());
    }
    javax.net.ssl.HttpsURLConnection.setDefaultSSLSocketFactory(context.getSocketFactory());
} 
```

我得到的例外是：`xmlpullparser`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T10:07:35.163

终于得到了灵魂……你只需要拥有 trustManagermanipulator.java 并调用 TrustManagerManipulator.allowAllSSL(); 在建立连接之前。它工作

# node.js - 为什么 socket-io 的 get 无法从持久会话中获取数据？

> ID：14624810
> 
> 赞同：2
> 
> 时间：2013-01-31T11:37:01.073
> 
> 标签：node.js, express, socket.io

在这里，我使用 get of socket-io 并且在每次重新加载页面时它都会给我新的值（理想情况下它应该来自会话并且应该相同）。你能指出原因吗？

```
var express = require('express');
var app = express();
var server = require('http').createServer(app);
var io = require('socket.io').listen(server);
var _ = require('lodash');
var q = require('q');

server.listen(3000);

var userCounter = 0;
    app.use(express.cookieParser());
    app.use(express.cookieSession({secret: 'secret', key: 'express.sid', cookie:{ path: '/', httpOnly: true, maxAge: (1000*3600*24)} }));
    app.use(express.static('public'))
   .use(function (req, res) {
        res.end('File not available\n');
    });

function getUserName(socket) {
    var deferred = q.defer();
    socket.get('userName', function (err, Name) {
        if (err || !Name) { // PROBLEM: It always goes in to this IF
            var userName = "Userno: " + (userCounter + 1);
            userCounter++;
            socket.set('userName', userName, function () {
                deferred.resolve(userName);
            });
        } else {
            deferred.resolve(Name);
        }
    });
    return deferred.promise;
}

io.sockets.on('connection', function (socket) {
    getUserName(socket).
        then(function (userName) {
            socket.emit("welcome", userName);
            _(io.sockets.sockets).forEach(function (eSocket) {
                if (socket !== eSocket)
                    eSocket.emit("userAdded", userName);
            });
            socket.on('disconnect', function () {
                socket.get('userName', function (err, userName) {
                    io.sockets.emit('userRem', userName);
                });
            });
        });

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T12:46:55.237

您尚未为您的`socket.io`. 默认情况下，与您的每个连接`socket.io`都是一个新连接，尽管它具有相同的 cookie（您的 cookie 中的 session_id ）。有一个[特殊的选项](https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO)可以`socket.io`通过身份验证功能传递每个请求，例如：

```
var sAuthorization = function(req, cb) {
    if ( req.headers.cookie ) { 
        cb(null, true); return; // We have cookie
    } else {
        cb(null, false); return; // We don't have cookie drop the connection
    };

var socket = require('socket.io').listen(app, { authorization: sAuthorization }); 
```

你应该做的事情使它工作（我不会把它写成代码，因为需要做很多修改）：

1.  在 express中的初始连接中实现给用户一个名称`http`（每个用户都应该为他们的唯一会话指定一个用户名）；
2.  实现可以通过 express 和 socket.io 访问的 sessionStore（有关如何操作的一些想法，请参阅[此要点](https://gist.github.com/2266544)`nowjs`（它使用但它是您必须查看的 sessionStore 代码）。实际上，如果您将 sessionStore 放在某个数据库中会更好，而不是在您的 MemoryStore 中。
3.  使您的`socket.io`授权子到达此 sessionStore 并获取用户名，然后像往常一样将其作为此套接字的参数：`socket.set('name', ....`

差不多就是这样。这并不像听起来那么难，但这是正确的做法。

进一步阅读：

1.  [https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO](https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO)
2.  [https://github.com/LearnBoost/socket.io/wiki/Authorizing](https://github.com/LearnBoost/socket.io/wiki/Authorizing)

### 更新 ：

看看这个答案，这对你 [Securing Socket.io会很有帮助](https://stackoverflow.com/questions/14600472/securing-socket-io)

### 更新二：

我在这里用该代码创建了一个 Gist 文件[https://gist.github.com/1b17fd2a7b324cb3411a](https://gist.github.com/1b17fd2a7b324cb3411a)

```
var express = require('express'),
    app = express(),
    http = require('http'),
    server = http.createServer(app),
    users = 0,
    MemoryStore = express.session.MemoryStore,
    sessionStore = new MemoryStore(),
    parseCookie = require('cookie').parse,
    utils = require('connect').utils,
    io = require('socket.io').listen(server);

app.use( express.bodyParser() );
app.use( express.cookieParser('secret') );
app.use( express.session({secret: 'secret', store:sessionStore}) );

app.get('/', function(req, res) {
    var user = req.session.username ? req.session.username : null;
    if ( !user ) {
        user = 'user_' + users++;
        req.session.username = user;
        req.session.save();
    }
    res.send('<!doctype html> \
        <html> \
        <head><meta charset="utf-8"></head> \
        <body> \
            <center>Welcome ' + user + '</center> \
            <script src="/socket.io/socket.io.js"></script> \
            <script> \
                var socket = io.connect(); \
                socket.emit("message", "Howdy"); \
            </script> \
        </body> \
        </html>');
});

io.configure(function () {
    io.set('authorization', function (request, callback) {
        var cookie = parseCookie(request.headers.cookie);
        if( !cookie && !cookie['connect.sid'] ) {
            return callback(null, false);
        } else {
            sessionStore.get(utils.parseSignedCookie(cookie['connect.sid'], 'secret'), function (err, session) {
                if ( err ) {
                    callback(err.message, false);
                } else {
                    if ( session && session.username ) {
                        request.user = session.username;
                        callback(null, true);
                    } else {
                        callback(null, false);
                    }
                }
            });
        }
    });
});

io.sockets.on('connection', function (socket) {
    socket.on('message', function(msg) {
        console.log(msg + 'from '+ socket.handshake.user);
    });
});

server.listen(8000); 
```

# c++ - 比较整数 C++

> ID：14624814
> 
> 赞同：2
> 
> 时间：2013-01-31T11:37:31.367
> 
> 标签：c++

嘿，所以我正在学习基本的 c++，这周刚开始，我有一个问题说：

编写一个程序来比较 3 个整数并打印最大的，程序应该只使用 2 个 IF 语句。

我不知道如何做到这一点，所以任何帮助将不胜感激

到目前为止，我有这个：

```
#include <iostream>

using namespace std;

void main()
{
int a, b, c;

cout << "Please enter three integers: ";
cin >> a >> b >> c;

if ( a > b && a > c) 
    cout << a;
else if ( b > c && b > a)
    cout << b;
else if (c > a && c > b)
    cout << b;

system("PAUSE");

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T11:40:34.143

```
int main()
{
  int a, b, c;
  cout << "Please enter three integers: ";
  cin >> a >> b >> c;
  int big_int = a;

  if (a < b)
  {
      big_int = b;
  }

  if (big_int < c)
  {
    big_int = c;
  }
  return 0;
} 
```

另请注意，您应该写`int main()`而不是`void main()`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-31T11:40:48.427

```
#include <iostream>

int main()
{
    int a, b, c;
    std::cout << "Please enter three integers: ";
    std::cin >> a >> b >> c;

    int max = a;
    if (max < b)
        max = b;
    if (max < c)
        max = c;

    std::cout << max;    
} 
```

虽然上面的代码满足了练习题，但我想我会添加一些其他的方法来展示没有任何`if`s 的方法。

不鼓励以一种更神秘、更不可读的方式来做这件事

```
int max = (a < b) ? ((b < c)? c : b) : ((a < c)? c : a); 
```

`#include <algorithm>`一种优雅的方式是

```
int max = std::max(std::max(a, b), c); 
```

使用 C++11，你甚至可以做到

```
const int max = std::max({a, b, c}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-31T11:40:14.793

您不需要最后一个“else if”语句。在这部分代码中，可以确定“c”是最大的——没有更大的数字。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T11:41:13.830

提示：您的一个`if`语句是无用的（实际上，它引入了一个错误，因为如果 a、b 和 c 都相等，则不会打印任何内容）。

# java - 日期和时间解析

> ID：14624818
> 
> 赞同：0
> 
> 时间：2013-01-31T11:37:50.087
> 
> 标签：java, plsql

我正在处理一个平面文件，我得到的日期是->20121210，时间是->124040，我怎么解析这个并作为时间戳插入数据库，我使用的是java和pl/sql？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T11:44:01.263

```
SimpleDateFormat format = new SimpleDateFormat("yyyyMMdd'T'HHmmSS");
String fromFileDateTime = "20121210"+"T"+"124040";
Date date = format.parse(fromFileDateTime ); 
```

`fromFileDateTime`通过组合从平面文件中获得的日期、时间字符串来填充变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T11:46:26.450

```
public static void main(String[] args) throws ParseException, java.text.ParseException {

    String date = "20121210 124040";
    DateFormat dateFormat = new SimpleDateFormat(
            "yyyyMMd HHmmss");

    Date formattedDate = dateFormat.parse(date);
    System.out.println(formattedDate);

} 
```

输出：

```
Mon Dec 10 12:40:40 IST 2012 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T11:47:55.747

假设您将日期和时间作为字符串获取。所以，你需要[SimpleDateFormatter](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)`parse`的方法。探索 API 中的更多模式。

从 API 引用：

> SimpleDateFormat 是一个具体的类，用于以区域设置敏感的方式格式化和解析日期。它允许格式化（日期 -> 文本）、解析（文本 -> 日期）和规范化。

```
 public static void main(String[] args) {
        SimpleDateFormat sdf = new SimpleDateFormat("yyyyMMdd HHmmSS");
        try{
            String dateString = "20121210"+" " + "124040";
            Date date = sdf.parse(dateString);
            System.out.println("Formatted Date: " + date);
        }catch(Exception e) {
            e.printStackTrace();
        }

    } 
```

输出：

```
run:
Formatted Date: Mon Dec 10 12:40:00 IST 2012 
```

# sql - 存储过程不更新字段

> ID：14624819
> 
> 赞同：0
> 
> 时间：2013-01-31T11:37:52.003
> 
> 标签：sql, sql-server-2008

我有一个像这样的存储过程，如果它不存在，它基本上会在字段中附加一个前缀：

```
ALTER PROCEDURE [dbo].[AgSp_UpdateAgTbl_Licensing ](@newPrefix nvarchar, @systemName nvarchar)

AS
BEGIN
       -- SET NOCOUNT ON added to prevent extra result sets from
       -- interfering with SELECT statements.
       SET NOCOUNT ON;

update AgTbl_Licensing
set   UrlPrefixes =
           case
               when UrlPrefixes is null or UrlPrefixes = ''
               then @newPrefix
               else convert ( nvarchar( max ), UrlPrefixes) + ', '+@newPrefix
            end
where SystemName = @systemName and (UrlPrefixes not like ('%'+@newPrefix+'%') or UrlPrefixes is null)

END 
```

我试着这样称呼它：

```
Execute AgSp_UpdateAgTbl_Licensing 'eb_', 'EB1'; 
```

但是没有对数据库进行更新 - 怎么会？我无法调试，因为我没有系统管理员

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:45:34.817

我认为你应该声明长度为的过程参数；

```
@newPrefix nvarchar(50), @systemName nvarchar(50) 
```

否则，它只需要`FIRST character`您的字符串，因此您`WHERE clause fails`可以找到要更新的记录。而且您的参数也不是您期望的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:46:20.723

（忽略将多个值存储在单个列中几乎总是比将它们正确存储为表中的行更糟糕）

您已经为您的过程声明了两个参数，长度均为 1。尝试：

```
ALTER PROCEDURE [dbo].[AgTbl_Licensing](@newPrefix nvarchar(100), @systemName nvarchar(100)) 
```

从[nchar 和 nvarchar](http://msdn.microsoft.com/en-gb/library/ms186939.aspx)：

> 当在数据定义或变量声明语句中未指定 n 时，默认长度为 1。当未使用 CAST 函数指定 n 时，默认长度为 30。

# c# - C#获取子字符串第一次出现的索引

> ID：14624821
> 
> 赞同：1
> 
> 时间：2013-01-31T11:37:58.120
> 
> 标签：c#, c#-4.0

嗨，我有一个字符串“abc %d ef %g hi %j”。我想得到“%”的索引。它应该给出第一次出现的索引，即 3。有人可以给我一个 C# 片段吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T11:39:25.133

片段是：

```
int firstOccurence = "abc %d ef %g hi %j".IndexOf("%");
//  firstOccurence will be 4 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T11:39:54.433

返回的索引将为 4。C# 具有从零开始的索引。

```
string foo = "abc %d ef %g hi %j";
int i = foo.IndexOf("%"); // Returns 4 
```

**资源：**

[`String.IndexOf()`在 MSDN 上](http://msdn.microsoft.com/en-us/library/system.string.indexof.aspx)查看。

**笔记：**

帮自己一个忙，[看看 whathaveyouried.com](http://whathaveyoutried.com)和 StackOverflow 的[常见问题解答](https://stackoverflow.com/faq)。这将使您在这里的体验更加有趣！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T11:40:16.613

尝试这个：

```
string str = "abc %d ef %g hi %j";
int index = str.IndexOf('%'); 
```

**[String.IndexOf 方法](http://msdn.microsoft.com/en-us/library/system.string.indexof.aspx)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T11:54:59.867

LINQ版本

```
string str = "abc %d ef %g hi %j";
var ind = str.Select((item, index) => new  { Found = item,  Index = index }).Where(it => it.Found=='%').Select( it => it.Index).First(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T11:40:47.553

```
string x = "bc %d ef %g hi %j";
int y = x.IndexOf('%'); 
```

# java - 在java中，如何从文件中读取数据并创建数组集合？

> ID：14624822
> 
> 赞同：0
> 
> 时间：2013-01-31T11:37:58.627
> 
> 标签：java, arrays, junit

我正在尝试运行 Junit 参数化测试。以下是 Junit 建议将数据添加到数组集合的方式。

```
Object[][] data = new Object[][] { { 1 }, { 2 }, { 3 }, { 4 } };  
return Arrays.asList(data); 
```

然而，这需要用户在代码中添加数据。我想从文件中读取数据（大约 300 行）并将其转换为数组集合。我怎样才能做到这一点 ？

这是代码：

```
import static org.junit.Assert.*;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collection;
import java.util.Iterator;
import java.util.List;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.Parameterized;
import org.junit.runners.Parameterized.Parameters;

@RunWith(value=Parameterized.class)
public class UrlParameterizedTest {

    private String url;
    public static ArrayList<String>dataArray=new ArrayList<String>();
    static File directory = new File(".");
    public static String fileToRead;

    public UrlParameterizedTest(String url){
        this.url=url;
    }
    @Parameters
    public static Collection<Object[]> data() throws Exception {

        try {
            fileToRead=directory.getCanonicalPath()+"\\Data\\LinkChecker.csv";
            loadDataFile(fileToRead);
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

    Object[][]data=new Object[dataArray.size()][];
      *******   //convert dataArray to data here.************
        return Arrays.asList(data);

    }

    @Test
    public void testURLs() {
        System.out.println("Parameterized Number is "+url);
    }

    public static void loadDataFile(String dataFile) throws Exception {
        dataArray.clear();
        //if data_file is absolute, use this
        try
        {
            // Open an input stream
            // Read a line of text
            String line="";
            BufferedReader br=new BufferedReader(new FileReader(dataFile));
            while((line=br.readLine())!=null) {
                dataArray.add(line);
            }
            br.close();
            System.out.println("The data file length is "+ dataArray.size());
        }

        catch (IOException e)
        {
            e.printStackTrace();
            System.out.println ("Unable to read from file");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:44:04.503

使用 Apache Commons`FileUtils.readFileToString`将文件读取为字符串。然后，您需要将文件解析为数组集合。我们无法帮助您解析文件，我们不知道内容。

[FileUtils.readFileToString](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#readFileToString%28java.io.File%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:51:06.767

将您的数据放在一个文件中，一个在另一个之下。使用扫描仪将它们读取为字符串，然后将它们转换为数字（我假设它们应该是浮点数）。像这样的东西：

```
ArrayList<Float> numbers = new ArrayList<Float>();
Scanner scanner = new Scanner(file);
while(scanner.hasNextLine()) {
    String nextLine = scanner.nextLine();
    float value = Float.parseFloat(nextLine);
    numbers.add(value);
}
scanner.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T11:52:30.027

为了从文件中检索字符串，您可以使用以下代码；然后您可以从 ArrayList 中检索数据并将它们放入您的数组中（使用 Class ArrayList 提供的“toArray()”方法）。

```
ArrayList<String> strings=new ArrayList<String >();
String filePath = path + "/" + fileName;

FileInputStream fin = null;
            try {
                fin = new FileInputStream(filePath);
            } catch (IOException e) {
                System.out.println (e.toString()); 
                System.out.println("File " + fileName + " not found.");
            }

            DataInputStream in = new DataInputStream(fin);
            BufferedReader br = new BufferedReader(new InputStreamReader(in));
            String strLine = null;

            while ((strLine = br.readLine()) != null)   {

                strings.add(strLine);
            }

            in.close(); 
```

# c++ - 在类方法中执行 std::system() 会在 C++ 中引发堆错误

> ID：14624826
> 
> 赞同：0
> 
> 时间：2013-01-31T11:38:08.770
> 
> 标签：c++, windows

我试图执行

> std::system(char* 字符串)

从我的类方法中，但我收到有关堆损坏的错误。我的源代码如下所示（Codec.cpp）：

```
bool Codec::encode(char* fileIn, char* fileOut, int packetSize) {

    // some irrelevant code here

    std:system("pause");  // <-- error: corruption of the heap!
    return true;
} 
```

我也尝试执行

> 标准：：系统（“暂停”）

直接从我的主文件（main.cpp），但这里调试器通过该行没有任何错误，它应该可以正常工作。我在 WIN32 平台上工作，VS 2010。

为什么我会收到此 HEAP CORRUPTION 错误？

# mongodb - 将现有数据库加载到 mongodb

> ID：14624827
> 
> 赞同：0
> 
> 时间：2013-01-31T11:38:15.517
> 
> 标签：mongodb

我有一个 mongodb 数据库文件，它是一些生产数据的转储。我需要用这些数据填充我的本地数据库。我怎么能那样做？对于这种情况，也许存在一些 monogoimport 功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:44:40.197

我认为您正在寻找[mongorestore 实用程序](http://docs.mongodb.org/manual/reference/mongorestore/#usage)：

```
mongorestore --host localhost
             --port 27017 
             --username user 
             --password pass /backup/dump 
```

还有一个工具[mongoexport](http://docs.mongodb.org/manual/reference/mongoexport/)，但它会生成 json 或 csv。

# mysql - 如何使用密码在 R 中连接数据库 MySQL？

> ID：14624828
> 
> 赞同：0
> 
> 时间：2013-01-31T11:38:22.273
> 
> 标签：mysql, r, rmysql

我的问题是我可以在不使用密码的情况下连接数据库，也可以执行查询，但是当我尝试使用密码连接数据库时，它会出错。我在下面提到的详细信息我在做什么以及错误是什么：

```
>library(DBI)
>library(RMySQL)
>drv<-dbDriver("MySQL")
>con<-dbConnect(drv,user="sam",password="sam123",dbname="test") 
```

那么错误是这样的：

> ```
> Error in mysqlNewConnection(drv, ...) : 
>   RS-DBI driver: (Failed to connect to database: 
>   Error: Access denied for user 'sam'@'localhost' (using password: YES) 
> ```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:41:34.510

您的数据库中的 usr "sam" 似乎存在权限问题。

您应该检查 mysql.users 表并提供必要的权限，如果您尝试从远程服务器访问，您应该在用户表中添加远程服务器的 IP 地址，用户名 =“sam”

# jenkins - 标记时是否可以将自定义参数传递给詹金斯？

> ID：14624830
> 
> 赞同：0
> 
> 时间：2013-01-31T11:38:40.163
> 
> 标签：jenkins, jenkins-plugins

我尝试在成功构建时为詹金斯创建自动标记。有用于创建标签的内置参数。像 JOB_NAME ， BUILD_ID 等，

是否可以在参数中传递自定义值？我的要求是，每次对构建进行标记时，都应将其标记为 Build-1、Build-2 等。有没有办法做到这一点？

# android - Android中的远程电话应用程序？

> ID：14624833
> 
> 赞同：1
> 
> 时间：2013-01-31T11:38:46.807
> 
> 标签：android, remote-desktop, phone-call

我需要创建一个基于 rdp 的应用程序，以便从计算机远程调用 Android。当您在计算机中选择一个号码并单击 CALL 时，Android 手机应该会自动拨打该号码。有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:49:39.737

**可能是完全错误的，因为我从来没有做过这样的功能。**

我的第一个想法是，您将不得不从您的 PC 向您的应用程序发送一些自定义/秘密消息，以便命令它开始调用。

一种方法是发送 GCM（以前是 C2DM）推送消息，其中包含一些额外的内容，例如您的密钥和应该调用的号码。

在应用程序中收到消息后，您可以阅读其内容并使用给定的电话号码启动呼叫意图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-11T04:57:25.203

有一个应用程序 - 称为“远程电话”。该网站是[http://www.justremotephone.com/，Windows](http://www.justremotephone.com/)客户端称为 CallCenter。

它在 XP 和 Win7 中运行良好，但我只在一台 Win8 PC 上尝试过，在那里，它不起作用。

# jenkins - 自动化 Trigger.IO 部署可能吗？

> ID：14624838
> 
> 赞同：1
> 
> 时间：2013-01-31T11:38:57.120
> 
> 标签：jenkins, jenkins-plugins, trigger.io, ipa

有没有办法在 trigger.io 工具包中编写打包脚本？

我的目标是创建一个 jenkins 任务，以便为每个版本创建新鲜的例如 ipa。是否可以调用特定的 URL 来运行此打包过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:51:03.007

您可以通过 Toolkit 中包含的命令行工具执行某些任务，以实现此目的。

查看我们文档中的[http://docs.trigger.io/en/v1.4/tools/commands.html](http://docs.trigger.io/en/v1.4/tools/commands.html)了解更多详情。

# windows - xp中的Windows命令“where arg”？

> ID：14624839
> 
> 赞同：2
> 
> 时间：2013-01-31T11:39:05.283
> 
> 标签：windows, command-line, windows-xp, command-prompt

“where”命令适用于 windows 2003 server 及更高版本。如何执行它在 Windows XP 中提供的相同功能。

有没有类似的命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:46:04.310

您可以在 XP 上使用

```
dir /b /s C:\yourfile.txt 
```

显然更改`C:\`为您要搜索的驱动器。

如果您想搜索超过 1 个驱动器，则可以遍历它们

```
for %%a in (C: D: E:) do (
dir /b /s %%a\yourfile.txt
) 
```

这可能不适用于网络驱动器，但这种轻微的修改应该

```
for %%a in (X: Y: Z:) do (
pushd %%a
dir /b /s yourfile.txt
popd
) 
```

# android - Webview 在 4.0+ 中无法正确显示表格

> ID：14624841
> 
> 赞同：3
> 
> 时间：2013-01-31T11:39:09.380
> 
> 标签：android, webview

我正在使用以下代码在 webview 中显示内容。

```
 mMessageContentView.setText(emailText, contentType);
    mMessageContentView.scrollTo(0, 0);
    mMessageContentView.getSettings().setUseWideViewPort(true);
    mMessageContentView.getSettings().setJavaScriptEnabled(true); 
```

它在 nexus one、三星播放器等中正常显示，但在三星 s2(4.0.1)、三星 Nexus(4.2.1) 中不显示

在这里，我附上了两者的屏幕截图（Nexus one，Google nexus）![谷歌 Nexus](../Images/eb800466ec966241b4f013c099d2c70d.png)）。![在此处输入图像描述](../Images/503c7e40902dd201e36064f013db8a8d.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T11:48:54.447

我观察到，在三星 Galaxy S2、S3 等某些设备中，Webview 将表格显示在单列中。因此，我应用以下代码将 Webview Table 设置更改为 Normal。

```
 mMessageContentView.getSettings().setLayoutAlgorithm(LayoutAlgorithm.NORMAL); 
```

然后它在所有设备中以正确的格式显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T01:35:13.497

你有表格中的原始 HTML 吗？没有它，就不可能知道什么是对什么是错。

您还可以检查它在最新版本的 Chrome 或 Safari 中的呈现方式。

# c# - c#设置xmlserialized类的值

> ID：14624842
> 
> 赞同：0
> 
> 时间：2013-01-31T11:39:13.563
> 
> 标签：c#, xmlserializer, complextype

我想编写以下 XML：

```
<Fields>
    <Field name="john">lorem</Field>
    <Field name="john">lorem</Field>
    <Field name="john">lorem</Field>
</Fields> 
```

基于这个例子，我创建了这个 XSD：

```
<xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified" version="1.0" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:element name="Fields" type="FieldsType" />
  <xsd:complexType name="FieldsType">
    <xsd:sequence>
      <xsd:element maxOccurs="unbounded" name="Field" type="FieldType" />
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="FieldType">
    <xsd:attribute name="name" type="xsd:string" />
  </xsd:complexType> 
</xsd:schema> 
```

我使用 xsd.exe（VS 命令提示符）来生成类：

```
/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlRootAttribute("Fields", Namespace="", IsNullable=false)]
public partial class FieldsType {

    private FieldType[] fieldField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("Field")]
    public FieldType[] Field {
        get {
            return this.fieldField;
        }
        set {
            this.fieldField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
public partial class FieldType {

    private string nameField;

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string name {
        get {
            return this.nameField;
        }
        set {
            this.nameField = value;
        }
    }
} 
```

现在我可以设置属性“名称”。但是如何设置字段元素之间的主要文本值，例如 [SET THIS TEXT]

```
var example = new FieldType();
example.name = "attribute value";
//how to set the element value? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:50:57.550

报废`xsd.exe`并生成您的模型：

```
[XmlRoot("Fields")]
public class MyViewModel
{
    [XmlElement("Field")]
    public Field[] Fields { get; set; }
}

public class Field
{
    [XmlAttribute("name")]
    public string Name { get; set; }

    [XmlText]
    public string Value { get; set; }
} 
```

然后序列化它：

```
var model = new MyViewModel
{
    Fields = new[]
    {
        new Field { Name = "john", Value = "lorem" },
        new Field { Name = "smith", Value = "ipsum" },
    }
};
var serializer = new XmlSerializer(typeof(MyViewModel));
serializer.Serialize(Console.Out, model); 
```

# javascript - 不要询问用户是否提交表单

> ID：14624843
> 
> 赞同：8
> 
> 时间：2013-01-31T11:39:14.500
> 
> 标签：javascript, jquery, confirm

如果用户尝试在不提交表单的情况下重定向到另一个页面，我正在使用以下 JavaScript 代码警告用户。

```
window.onbeforeunload = function() {
   return 'Are you sure that you want to leave this page?';
}; 
```

这工作正常。但我的问题是当用户尝试使用提交按钮提交表单时，会出现确认框。如果用户提交表单，我不想询问确认，否则我想询问确认。这怎么可能？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T11:41:36.987

维护一个状态变量。当用户单击提交按钮时，将状态设置为`userSubmitted=True`；
状态变量可能包括全局变量或隐藏控件。

```
var userSubmitted=false;

$('form').submit(function() {
userSubmitted = true;
}); 
```

然后像这样检查

```
window.onbeforeunload = function() {
    if(!userSubmitted)
        return 'Are you sure that you want to leave this page?';
}; 
```

PS：交叉检查跨浏览器的 onbeforunload 兼容性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T11:43:19.793

简单的。

只要有一个全局变量

```
var can_leave = false; 
```

在您的表格上：

```
$('form').submit(function() {
...
...
can_leave = true;
}); 
```

在你的`onbeforeunload()`处理程序里面有这个：

```
window.onbeforeunload = function() {
if (!can_leave)   return 'Are you sure that you want to leave this page?';
}; 
```

# linux - 如何以文本方式按第一列排序，然后使用“排序”按第二列数字排序？

> ID：14624850
> 
> 赞同：16
> 
> 时间：2013-01-31T11:39:32.907
> 
> 标签：linux, shell, unix, sorting

我正在尝试对以下文件进行排序：

```
a 2
b 1
a 10 
```

我需要得到：

```
a 2
a 10
b 1 
```

我知道 -kPOS[opts] 选项，并尝试使用它：

```
sort -k1 -k2n file 
```

但这个命令只给了我：

```
a 10
a 2
b 1 
```

所以它按第一列排序，但不是按第二列。运行仅`sort -k2n file`按第二列排序。

```
b 1
a 2
a 10 
```

我怎么能按两列排序呢？

## 编辑：

排序（GNU coreutils）5.93

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-31T11:44:57.907

您必须终止主键，否则， sort 使用从给定字段开始的所有字段：

```
sort -k1,1 -k2n 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-31T11:49:12.637

这几乎是正确的。试试这个：

```
sort -k1,1 -k2,2n 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-31T11:43:47.703

如果你有`GNU sort`排序，那么你可以做一个版本排序：

```
$ sort -V file
a 2
a 10
b 1 
```

选项：

```
-V, --version-sort          natural sort of (version) numbers within text 
```

版本排序的好处是无论列如何，它都可以工作：

```
$ cat file
a2
b1
a10

$ sort -V file
a2
a10
b1 
```

# java - 通过图形 api 异步 Facebook 请求的堆栈溢出错误

> ID：14624854
> 
> 赞同：1
> 
> 时间：2013-01-31T11:39:39.990
> 
> 标签：java, android, facebook-graph-api

我收到一个错误，不知道为什么会这样。

错误是：

```
01-31 16:55:43.000: D/AndroidRuntime(1067): Shutting down VM
01-31 16:55:43.190: E/AndroidRuntime(1067): java.lang.StackOverflowError
01-31 16:55:43.190: E/AndroidRuntime(1067):     at facebook.android.AsyncFacebookRunner.request(AsyncFacebookRunner.java:206)
01-31 16:55:43.190: E/AndroidRuntime(1067):     at facebook.android.AsyncFacebookRunner.request(AsyncFacebookRunner.java:206)
01-31 16:55:43.190: E/AndroidRuntime(1067):     at facebook.android.AsyncFacebookRunner.request(AsyncFacebookRunner.java:206) 
```

这是代码：

```
package com.example.facebookintregation;

import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;

import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.content.Context;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Toast;
import facebook.android.AsyncFacebookRunner;
import facebook.android.DialogError;
import facebook.android.Facebook;
import facebook.android.Facebook.DialogListener;
import facebook.android.FacebookError;

public class ShareOnFacebook extends Activity {

    private static final String APP_ID = "360848087324012";
    private static final String[] PERMISSIONS = new String[] { "publish_stream" };

    private static final String TOKEN = "access_token";
    private static final String EXPIRES = "expires_in";
    private static final String KEY = "facebook-credentials";
    private Facebook facebook;
    private String messageToPost;
    AsyncFacebookRunner asyncRunner;
    static Bitmap User_pic;

    public boolean saveCredentials(Facebook facebook) {
        Editor editor = getApplicationContext().getSharedPreferences(KEY,
                Context.MODE_PRIVATE).edit();
        editor.putString(TOKEN, facebook.getAccessToken());
        editor.putLong(EXPIRES, facebook.getAccessExpires());
        return editor.commit();
    }

    public boolean restoreCredentials(Facebook facebook) {
        SharedPreferences sharedPreferences = getApplicationContext()
                .getSharedPreferences(KEY, Context.MODE_PRIVATE);
        facebook.setAccessToken(sharedPreferences.getString(TOKEN, null));
        facebook.setAccessExpires(sharedPreferences.getLong(EXPIRES, 0));
        return facebook.isSessionValid();
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        facebook = new Facebook(APP_ID);
        asyncRunner = new AsyncFacebookRunner(facebook);
        restoreCredentials(facebook);

        String facebookMessage = getIntent().getStringExtra("facebookMessage");
        if (facebookMessage == null) {
            facebookMessage = "Testing App!";
        }
        messageToPost = facebookMessage;
        if (!facebook.isSessionValid()) {
            loginAndPostToWall();
        } else {
            postOnWall("test");
        }
        try {
            String userid = facebook.request("me/friends");

        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public void doNotShare(View button) {
        finish();
    }

    public void share(View button) {
        if (!facebook.isSessionValid()) {
            loginAndPostToWall();
        } else {
            postOnWall("test");
        }
    }

    public void loginAndPostToWall() {
        facebook.authorize(this, PERMISSIONS, new LoginDialogListener());
    }

    protected void postToWall(String userId) {
        String response = null;
        byte[] byteArray = null;
        String id = null;
        try {

            response = facebook.request("me");
            JSONObject me;
            try {
                me = new JSONObject(facebook.request("me"));
                id = me.getString("id");
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            Log.v("response", "response" + id);
            User_pic = getUserPic(id);
            // Bitmap bmp = intent.getExtras().get("data");
            ByteArrayOutputStream stream = new ByteArrayOutputStream();
            User_pic.compress(Bitmap.CompressFormat.PNG, 100, stream);
            byteArray = stream.toByteArray();
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Bundle params = new Bundle();
        params.putByteArray("message", userId.getBytes());
        params.putByteArray("caption",
                "{*actor*} just posted a secret message.".getBytes());
        params.putByteArray("description",
                "A secret message is waiting for you.  Click the link to decode it."
                        .getBytes());
        params.putByteArray("name", "A Secret Message For You".getBytes());
        params.putByteArray("picture", byteArray);
        facebook.dialog(this, "stream.publish", params,
                new WallPostDialogListener());
        // asyncRunner.request(((id == null) ? "me" : id) + "/feed", params,
        // "POST", new WallPostDialogListener());
    }

    private Bitmap getUserPic(String id) {
        /**
         * Function loads the users facebook profile pic
         * 
         * @param userID
         */

        String imageURL;
        Bitmap bitmap = null;
        // Log.d(TAG, "Loading Picture");
        imageURL = "http://graph.facebook.com/" + id + "/picture?type=small";
        try {
            bitmap = BitmapFactory.decodeStream((InputStream) new URL(imageURL)
                    .getContent());
            Log.v("get user pic", "get user pic");
        } catch (Exception e) {
            Log.d("TAG", "Loading Picture FAILED");
            e.printStackTrace();
        }
        return bitmap;

    }

    public void postOnWall(String msg) {
        Log.d("Tests", "Testing graph API wall post");
        try {
            String response = facebook.request("me");
            String response1 = facebook.request("me/friends");
            Bundle parameters = new Bundle();
            parameters.putString("message", msg);
            parameters.putString("description", "test test test");
            asyncRunner.request("me/feed", parameters, "POST",
                    new WallPostDialogListener());

            Log.v("respone", "respone" + response1);
            if (response == null || response.equals("")
                    || response.equals("false")) {
                Log.v("Error", "Blank response");
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    class LoginDialogListener implements DialogListener {
        public void onComplete(Bundle values) {
            saveCredentials(facebook);
            if (messageToPost != null) {
                postOnWall(messageToPost);
            }
        }

        public void onFacebookError(FacebookError error) {
            showToast("Authentication with Facebook failed!");
            finish();
        }

        public void onError(DialogError error) {
            showToast("Authentication with Facebook failed!");
            finish();
        }

        public void onCancel() {
            showToast("Authentication with Facebook cancelled!");
            finish();
        }
    }

    class WallPostDialogListener implements DialogListener {
        public void onComplete(Bundle values) {
            final String postId = values.getString("post_id");
            if (postId != null) {
                showToast("Message posted to your facebook wall!");
            } else {
                showToast("Wall post cancelled!");
            }
            finish();
        }

        public void onFacebookError(FacebookError e) {
            showToast("Failed to post to wall!");
            e.printStackTrace();
            finish();
        }

        public void onError(DialogError e) {
            showToast("Failed to post to wall!");
            e.printStackTrace();
            finish();
        }

        public void onCancel() {
            showToast("Wall post cancelled!");
            finish();
        }
    }

    private void showToast(String message) {
        Toast.makeText(getApplicationContext(), message, Toast.LENGTH_SHORT)
                .show();
    }

} 
```

# find - cmake find_path/find_library 检查失败

> ID：14624865
> 
> 赞同：3
> 
> 时间：2013-01-31T11:40:27.273
> 
> 标签：find, cmake

我正在使用[CMake 2.8.2](http://www.cmake.org/Wiki/CMake_2.8.2_Docs)版本。该项目正在使用大量外部文件和自定义库（通过 find_package 不可用），并且有很长的级联元素，如下所示：

```
find_path(XXX_INCLUDE_DIR XXX.h /XXX/include)
if (XXX_INCLUDE_DIR)
  message(STATUS "Includes (XXX) found in ${XXX_INCLUDE_DIR}")
else()
  message(FATAL_ERROR "Includes (XXX) not found")
endif() 
```

剧本中有 20 多处这样的东西——看起来不太好。根据文档，不幸的是， find_path 和 find_library 都没有 REQUIRED 选项可以在这里完成工作（就像 find_package 一样 - 如果找不到，脚本将停止）。您知道如何缩短 CMake 脚本代码吗？就像是

```
find_path(XXX_INCLUDE_DIR XXX.h /XXX/include REQUIED) 
```

或类似的东西会很棒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T12:55:07.043

将它们放在您的自定义 FindXXX.cmake 模块中。阅读[文档](http://cmake.org/gitweb?p=cmake.git;a=blob;f=Modules/readme.txt)并查看[`FindPNG.cmake`](http://cmake.org/gitweb?p=cmake.git;a=blob;f=Modules/FindPNG.cmake)示例。将它们放入`<project>/cmake/FindXXX.cmake`（或类似的），然后将包含这些文件的目录添加到`CMAKE_MODULE_PATH`并使用`find_package()`，例如

```
list(APPEND CMAKE_MODULE_PATH "${PROJECT_SOURCE_DIR}/cmake")

find_package(XXX REQUIRED) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T12:45:31.153

您可能想要使用[宏](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3amacro)或[函数](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3afunction)。

# c# - 在 C# 对象初始化器语法中，为什么我们不能将一个属性分配给其中的另一个属性

> ID：14624866
> 
> 赞同：3
> 
> 时间：2013-01-31T11:40:34.063
> 
> 标签：c#, c#-4.0

嗨，我正在使用 C# Object Initializer 之类的

```
public class Invoice
    {
        public decimal GrossSum { get; set; }
        public decimal GrossSumComp { get; set; }
    }
    public class ABC()
    {
        public Invoice Invoice {get;set;}

        public ABC(decimal grossSum)
        {
            Invoice=new Invoice()
            {
                GrossSum=grossSum,
                GrossSumComp=**GrossSum**
            };
        }
    } 
```

而且我看到我们不能将一个属性的值分配给其中的另一个，就像上面一样，我试图将 GrossSum 分配给 GrossSumComp，但我得到了编译错误。只是想知道为什么它不允许这样做。任何帮助都将受到高度重视。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:46:21.477

因为它是这样指定的。`GrossSum`第二行是对一个变量的引用，`GrossSum`而不是被初始化对象的属性。

套用埃里克·利珀特的话说。对于要实现的功能，它确实是

*   建议的
*   已分析
*   设计的
*   实施的
*   经过测试

这些都会产生成本，因此它们应该增加价值以匹配成本，最好超过成本。

如果对该功能有一个简单的解决方法，那么成本很可能（很多）高于潜在价值。

在您的情况下，您可以简单地分配`grossSum`而不是`GrossSum`. 这是一个简单的解决方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:45:44.887

在这种情况下，错误消息是您的答案：

```
The name 'GrossSum' does not exist in the current context 
```

`GrossSum`没有给定上下文，编译器如何知道什么是什么？无法指定`this`或类似的方式表明`GrossSum`您所指的属性是在您正在初始化的对象上定义的属性。

# ssis - SSIS 2008 模糊分组以识别重复联系人但忽略标点符号

> ID：14624870
> 
> 赞同：1
> 
> 时间：2013-01-31T11:40:38.353
> 
> 标签：ssis, grouping, duplicate-data, fuzzy-search

我在 Visual Studio 2008 中使用 SSIS 在客户表上执行一些模糊分组。

列 ID 名称 电子邮件等

我在表中有一些重复的客户，他们使用相同的电子邮件地址，我目前能够使用模糊分组来识别重复项以进行手动检查。

我也有一些几乎重复的记录，但有一些额外的标点符号。

例如

```
 ID   Name  Email
    1    bob   bob.bob@bob.com 
    2    bob   bob.bob@bob.com 
    3    bob   bob..bob@bob.com
    7    tom   tom@tom.com 
    9    frog  tom@tom..com 
```

目前我可以让 id 1 和 2 匹配，但我希望 1、2 和 3 匹配并分组在同一个键上

并且 7 和 9 也匹配，因为我想忽略双句点并将其视为只有一个句点。名称也无关紧要，目前只有电子邮件地址列很重要。

请有任何建议和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:57:13.847

在模糊分组转换之前使用派生列转换来删除不需要的字符：

```
REPLACE([Email], "..", ".") 
```

# ios - 使用 GPUImageMovieWriter 录制 OpenGL 视图

> ID：14624877
> 
> 赞同：2
> 
> 时间：2013-01-31T11:41:07.490
> 
> 标签：ios, opengl-es, gpuimage

我正在尝试创建一个将与我的应用程序一起记录的 OpenGL 视图。

我正在尝试使用 GPUImageMovieWriter 和 GPUImageUIElement 记录视图

像这样：

```
 self.imageUIElement = [[GPUImageUIElement alloc]initWithView:self.myView];

NSString *pathToMovie = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/Movie.m4v"];
unlink([pathToMovie UTF8String]); // If a file already exists, AVAssetWriter won't let you record new frames, so delete the old movie
NSURL *movieURL = [NSURL fileURLWithPath:pathToMovie];
movieWriter = [[GPUImageMovieWriter alloc] initWithMovieURL:movieURL size:CGSizeMake(480.0, 640.0)];

__weak UIViewController * controller = self;

movieWriter.completionBlock = ^{

    MPMoviePlayerViewController * _controller = [[MPMoviePlayerViewController alloc]initWithContentURL:movieURL];

    [controller presentMoviePlayerViewControllerAnimated:_controller];

};

[self.imageUIElement addTarget:movieWriter]; 
```

我有两个按钮用于停止开始录制，当我停止录制时出现以下错误：

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '*** -[AVAssetWriterInput markAsFinished] Cannot call method when status is 0' 
```

?

我的观点是 OpenGL 1.x

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T22:44:09.503

您无法使用带有 GPUImageUIElement 的 OpenGL ES 内容来捕获视图。此类使用`-renderInContext:`CALayer 的方法来捕获层（或 UIView）的内容，但该方法不适用于用于 OpenGL ES 的 CAEAGLLayers。

相反，您需要先将 OpenGL ES 视图渲染为纹理，然后将该纹理传递给 GPUImageTextureInput。您将需要确保您的 OpenGL ES 上下文和 GPUImage 上下文在同一个共享组中。我在 CubeExample 示例应用程序中展示了如何执行此操作的示例。GPUImage 使用 OpenGL ES 2.0 上下文，但我相信您可以通过共享组使用来自 1.1 上下文的纹理。

然后，您可以将此 GPUImageTextureInput 输入到您的 GPUImageMovieWriter 中。确保为 OpenGL ES 场景的每个渲染帧提供适当的时间戳，否则电影录制将无法正常工作。

# php - Wordpress 正在添加到页面顶部

> ID：14624878
> 
> 赞同：0
> 
> 时间：2013-01-31T11:41:08.277
> 
> 标签：php, wordpress, comments

Wordpress 正在我网站上的所有 HTML 上方添加此评论，这导致 IE 出现问题，该网站根本无法正确呈现。

如何停止 WP 添加这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:23:29.190

我建议您按内容搜索文件并在 WordPress 的 wp-content 文件夹中搜索此字符串：“page-who-we-are.php” - 您将找到该字符串并可以将其删除。

要在 Windows 上按内容搜索文件，请参阅[在不使用索引服务的情况下在 Windows 中自信地搜索文件和内容的最佳方式](https://superuser.com/questions/26593/best-way-to-confidently-search-files-and-contents-in-windows-without-using-an)？

# c++ - 从 unflush 二进制文件中读取

> ID：14624879
> 
> 赞同：1
> 
> 时间：2013-01-31T11:41:08.180
> 
> 标签：c++, buffer, pipe

> **可能重复：**
> [bash：强制执行的进程具有无缓冲的标准输出](https://stackoverflow.com/questions/3332045/bash-force-execd-process-to-have-unbuffered-stdout)

我需要读取二进制的（fceux，nes 模拟器）标准输出来获取一些信息，并在我收到我正在尝试的遗传算法的特殊输入时将其杀死。所以基本上，问题是程序没有刷新他的输出，所以我只在进程结束时收到输出，但它永远不会结束，因为我想杀死它。

那么有没有办法从未刷新的缓冲区子级读取？即使它不在 C++ 中，所以我可以添加一些刷新，然后最终在 C++ 中读取它（但这变得有点脏）。我也尝试过使用python，但也没有找到方法。

这是我的一段代码：

```
int fd[2];
pid_t pid;
pipe (fd);
if ((pid = fork ()) == 0)
{
    close (fd[0]);
    dup2 (fd[1], STDOUT_FILENO);
    execl ("/usr/bin/fceux", "fceux", "Super Mario Bros.zip", NULL)
    perror ("fork");
}
else
{
    close (fd[1]);
    char buf[1];
    std::string res;
    while (read (fd[0], buf, 1) > 0)
    {
        std::cout << "Read" << std::endl;
        res += buf;
        if (res.find ("score") != std::string::npos)
        {
            std::cout << "KILL" << std::endl;
            kill (pid, SIGKILL);
        }
    }
    close (fd[0]);
}
return 0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:15:04.417

`setbuf(stdout, NULL)`之前打电话`execl()`。它使标准输出无缓冲。

# vbscript - HTA - VBScript - 安装程序但等待安装完成

> ID：14624883
> 
> 赞同：0
> 
> 时间：2013-01-31T11:41:12.637
> 
> 标签：vbscript, hta

如果你能帮我一把就好了？

我有一个 HTA 文件没什么好看的，可以一一安装几个程序

我在几个地方一直在阅读如何等待安装完成然后安装下一个程序，但对我想要的东西没有任何意义，而且他们说使用 wscript.sleep 会很棒，但它不起作用一个 HTA 对吗？

我有 firefox、utorrent、symantec antivirus、adobe reader、office 2003（已与 KEY 打包）和其他一些。

我想找到要静默安装的开关，但如果有人愿意向我展示此代码有效，那并不重要...

我希望我有意义吗？

如果你能帮助我，那就太好了？

干杯帕维尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:12:23.913

您可能会在我对这个问题的回答（ [https://stackoverflow.com/a/3742182/128427](https://stackoverflow.com/a/3742182/128427) ）中找到一些有用的东西：[如何让 HTA 自行重启？](https://stackoverflow.com/questions/3599384/how-to-get-an-hta-to-restart-itself)

它使用 VBScript 帮助程序等待进程结束（HTA 本身），然后重新启动 HTA。您可以修改 vbscript 以等待特定进程结束（您的安装程序之一），然后将控制权返回给 HTA，HTA 将启动下一个安装程序并再次调用等待脚本。

我不认为 HTA 可以调用 WScript.Sleep 例程，但是 HTA 中有 setTimeout 和 setInterval 方法在 X 秒后调用例程，或者在每 X 秒后重复调用例程直到被取消。您可以使用它们定期检查进程是否仍在运行（使用 WMI Win32_Process，如我在其他答案中所示）。

要处理这样的项目列表，而不是使用循环遍历列表并在每个项目之后暂停，您有一个中央状态机例程，它不时调用自身以推进系统。

```
'!! extremely "pseudo" pseudo-code follows

sub StartSystem()
    state = "next program"
    list = list of programs to install
    AdvanceSystem() 
end sub

sub AdvanceSystem()

    if state = "next program"

        if more items in list
            start next installer
            remove from list (or increment an index)

            set state to "check program"
        else
            set state to "done"

    if state = "check program"

        use WMI to see if process is still running
        if no
            state = "next program"

    if state <> "done"
        setInterval(AdvanceSystem, 5000) ' call again in 5 seconds

end sub

' then somewhere in your HTA interface have a button to start things off
buttonClick = StartSystem() 
```

使用这样的安排，您甚至可能不需要运行单独的 VBScript 来检查进程和睡眠。此外，通过这种增量过程，您可以将输出发送到某个地方的 DIV，以便用户可以看到进度，而在循环处理事物时，直到整个过程完成后才会显示输出。每次通过 AdvanceSystem 后，控制返回到 HTA 级别，系统可以自行更新。

如果您需要更具体的示例，请告诉我，我会尝试写一些东西。

# php - Explode 错误地拆分字符串

> ID：14624886
> 
> 赞同：1
> 
> 时间：2013-01-31T11:41:24.577
> 
> 标签：php, explode

再会！

我使用 file_get_contents 从远程地址给出答案，并为创建数组给出数据而爆炸。

为此，我使用下一个代码：

```
function test(){
$project_key='fg54gth5k7';
$postdata = http_build_query(
    array(
        'code' => $project_key
    )
);
$opts = array('http' =>
    array(
        'method'  => 'POST',
        'header'  => 'Content-type: application/x-www-form-urlencoded',
        'content' => $postdata
    )
);
$context  = stream_context_create($opts);
$result = file_get_contents('http://test.com/', false, $context);
return $result;
}

$res = test();
echo $res;

$part=explode(' ',$res);
var_dump($part); 
```

**echo $res 返回行：**

```
3434343 http://test.com/index.php?r=site/stepone
&temptoken=c68c0ae1cece433fe5d6f6578cc0a9b6 OK68 OK Redirect 
http://test.com/index.php?r=site/stepone&temptoken=c68c0ae1cece433fe5d6f6578cc0a9b6 0 
```

**var_dump() 返回数组**

```
array(5) { 
[0]=> string(8) "3434343" 
[1]=> string(0) "" 
[2]=> string(0) "" 
[3]=> string(110) "http://test.com/index.php?r=site/stepone
    &temptoken=c68c0ae1cece433fe5d6f6578cc0a9b6 OK68 OK Redirect"

[4]=> string(100) "http://test.com/index.php?
    r=site/stepone&temptoken=c68c0ae1cece433fe5d6f6578cc0a9b6 0 " 
```

}

***请告诉我为什么我得到错误的数组？***

***数组应该是下一个：***

```
array(10) { 
    [0]=> string(8) "3434343" 
    [1]=> string(0) "" 
    [2]=> string(0) "" 
    [3]=> string(110) "http://test.com/index.php?r=site/stepone
        &temptoken=c68c0ae1cece433fe5d6f6578cc0a9b6"
    [4]=> string(4) "OK68 OK Redirect"
    [5]=> string(2) "OK Redirect"
    [6]=> string(8) "Redirect"
    [7]=> string(100) "http://test.com/index.php?
        r=site/stepone&temptoken=c68c0ae1cece433fe5d6f6578cc0a9b6"
    [8]=> string(1) "0"
    [9]=> string(0) "" 
```

**请告诉我哪里出错了？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T11:43:36.050

它们可能不是空格字符，而是制表符等。

[`preg_split`](http://www.php.net/manual/en/function.preg-split.php)与分隔符一起使用`[\s]+`。

> \s 代表“空白字符”。它通常包括 [ \t\r\n]。

（[参考](http://www.regular-expressions.info/charclass.html#shorthand)）

# android - 关闭应用程序后保存对象并在应用程序再次运行时检索它

> ID：14624887
> 
> 赞同：3
> 
> 时间：2013-01-31T11:41:31.207
> 
> 标签：android

我有这个对象，我想在关闭应用程序后保存它，并在应用程序再次运行时检索它。

```
final LatLng CENTRAL_VIEW = new LatLng(24.205835,-20.753174);

        CameraPosition cameraPosition = new CameraPosition.Builder()
        .target(CENTRAL_VIEW)      // Sets the center of the map to Central View
        .zoom(6)                   // Sets the zoom
        .build();                   // Creates a CameraPosition from the builder
        googlemap.animateCamera(CameraUpdateFactory.newCameraPosition(cameraPosition)); 
```

有什么简单的例子吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:50:00.953

正如 Paresh 所说，我们不能将对象存储在其中，`SharedPreference`但我们可以使用一些外部库来修改我们的首选项，以像我一样存储对象。[CustomSharedPreference](https://stackoverflow.com/questions/14501146/how-to-store-class-object-in-android-sharedpreference)

尝试使用它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-31T11:49:26.180

看到这个，它可能会帮助你：

[http://androidcodemonkey.blogspot.in/2011/07/store-and-get-object-in-android-shared.html](http://androidcodemonkey.blogspot.in/2011/07/store-and-get-object-in-android-shared.html)

[http://www.thetekblog.com/2012/09/android-store-objects-in-sharedperferences/](http://www.thetekblog.com/2012/09/android-store-objects-in-sharedperferences/)

[http://www.mediafire.com/?a9x1ebyw1bf8t62](http://www.mediafire.com/?a9x1ebyw1bf8t62)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-31T11:43:32.357

将您的对象保存到共享首选项中，并在重新启动应用程序后获取.. 简单..

# plugins - 在插件安装时摆脱浏览器重启

> ID：14624892
> 
> 赞同：0
> 
> 时间：2013-01-31T11:41:46.570
> 
> 标签：plugins, browser, restart, firebreath

我一直在为 Windows 开发一个浏览器插件，其中涉及在浏览器中显示相机输出。目前我正在使用 Windows 7。插件安装后，我想立即启动插件而不重新启动浏览器。我注意到，一旦注册了插件，它就开始在 Google Chrome 版本 24.0.1312 以及 Internet Explorer 9 中工作。但在 Mozilla Firefox 18.0.1 中却没有这样做。谁能帮我解决插件安装后重新启动浏览器的问题。MacOS也会出现这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T16:46:36.723

你需要做一个 navigator.plugins.refresh(false); 在javascript中告诉浏览器重新扫描插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T17:56:05.080

探索 FireBreath 源中的 /Installer/js 文件夹

# ruby-on-rails - Ruby 方法返回多个变量

> ID：14624895
> 
> 赞同：0
> 
> 时间：2013-01-31T11:41:56.373
> 
> 标签：ruby-on-rails, ruby

我需要从方法返回到我的 Rails 视图中的多个变量...但是我该怎么做呢？

例如现在我有

```
def my1
 @price = 1
 @price
end 
```

但我怎么还能返回其他值，例如：

```
def my1
 @qnt = 2
 @price = 1
 @price, @qnt
end 
```

?

另外我的想法是将它们拆分为字符串

```
@price + "/-/" + @qnt 
```

然后通过/-/ in view 拆分它们……但这是一种不好的做法……那么我怎么能从一种方法中得到两个或更多变量呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:43:26.907

返回一个数组：

```
def my1
 qnt = 2
 price = 1
 [price, qnt]
end 
```

那么你可以这样做：

```
p, q = my1() # parentheses to emphasize a method call
# do something with p and q 
```

## 选项 2

或者您可以返回一个自定义对象，如下所示：

```
require 'ostruct'

def my1
 qnt = 2
 price = 1

 OpenStruct.new(price: price, quantity: qnt)
end

res = my1() # parentheses to emphasize a method call

res.quantity # => 2
res.price # => 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:44:23.640

## 大批

最简单的方法是返回一个[Array](http://www.ruby-doc.org/core-1.9.3/Array.html)：

```
def my1
  @qnt = 2
  @price = 1
  [ @price, @qnt ]
end

price, quantity = my1 
```

## 哈希

但你也可以返回一个[Hash](http://www.ruby-doc.org/core-1.9.3/Hash.html)：

```
def my1
  @qnt = 2
  @price = 1
  { :quantity => @qnt, :price = @price
end

return_value = my1

price = return_value[:price]
quantity = return_value[:quantity]
# or
price, quantity = [ return_value[:price], return_value[:quantity] ] 
```

## 自定义类

或自定义类：

```
class ValueHolder
  attr_reader :quantity, :price

  def initialize(quantity, price)
    @quantity = quantity
    @price = price
  end
end

def my1
  @qnt = 2
  @price = 1
  ValueHolder.new(@qnt, @price)
end

value_holder = my1

price = value_holder.price
quantity = value_holder.quantity
# or
price, quantity = [ value_holder.price, value_holder.quantity ] 
```

## 开放结构

您可以像[Sergio 提到的那样使用](https://stackoverflow.com/a/14624936/221213)[OpenStruct](http://ruby-doc.org/stdlib-1.9.3/libdoc/ostruct/rdoc/OpenStruct.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T11:44:13.833

使用另一个对象来保存变量并返回它。然后，您可以从该对象访问变量；

# database - 从数据库读取时出现无效的序数错误

> ID：14624897
> 
> 赞同：0
> 
> 时间：2013-01-31T11:41:58.443
> 
> 标签：database, vb.net

```
 Dim sqlCountQuery As String = "SELECT COUNT(*) FROM codes"
    Dim SQLConnection As MySqlConnection = New MySqlConnection
    Dim CountCommand As New MySqlCommand(sqlCountQuery, SQLConnection)
    SQLConnection.ConnectionString = strServerString
    SQLConnection.Open()
    reader = CountCommand.ExecuteReader
    reader.Read()
    CodeCounter = reader.GetInt32(0)
    SQLConnection.Close()

    Dim sqlQuery As String = "SELECT * FROM codes"
    Dim Command As New MySqlCommand(sqlQuery, SQLConnection)
    SQLConnection.Open()
    reader = Command.ExecuteReader()
    reader.Read()

    For b = 0 To CodeCounter - 1
        test = reader.GetInt32(b)
    Next 
```

代码的顶部检索当前存储在数据库中的代码数量，但是当我使用 for 循环进入第二部分时，它正确地从数据库中检索了第一个代码，但之后我收到一条错误消息“你有指定了无效的列序号。”。我一直在逐行运行它，这就是我知道它正确检索第一个代码的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:47:30.683

您将列数与行数混为一谈。`CodeCounter`是行数，但在代码的第二部分中，您尝试从列中获取数据。`reader.GetInt32(int)`从给定列获取数据。

所有的代码都写得很糟糕。使用示例检查[本文](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.read.aspx)以了解如何使用`DataReader`. SQL Server 数据提供程序的文章，但它可能对您有所帮助。

# django - Django send_mail 函数出错？

> ID：14624898
> 
> 赞同：0
> 
> 时间：2013-01-31T11:41:59.753
> 
> 标签：django, django-email

我正在尝试使用 Django 文档中的 send_mail：

```
send_mail('Subject here', 'Here is the message.', 'from@gmail.com',
['to@gmail.com'], fail_silently=False) 
```

我使用的是真实的电子邮件地址。但是我收到此错误：

```
send_mail() takes exactly 1 non-keyword argument (4 given) 
```

我究竟做错了什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:52:48.880

根据 Django 的文档，您的函数调用具有正确的参数。`send_mail(subject, message, from_email, recipient_list, fail_silently=False, auth_user=None, auth_password=None, connection=None)`
您确定您的文件中没有其他函数`send_mail`吗？

# encryption - libevent：为什么它依赖于openssl？

> ID：14624900
> 
> 赞同：3
> 
> 时间：2013-01-31T11:42:00.283
> 
> 标签：encryption, openssl, dependencies, libevent

即将从源代码编译 libevent，我只是注意到它似乎*依赖于 OpenSSL 来**加密***o_O。

这听起来像臃肿。

1.  提供独立于操作系统的异步 IO 抽象的库需要加密什么？
2.  它如何证明对 OpenSSL 的依赖是合理的，我认为它也是大而复杂的？

* * *

libevent-2.0.21-stable/README

```
38 The configure script also supports the following flags:
39 
40    --enable-gcc-warnings     Enable extra compiler checking with GCC.
41    --disable-malloc-replacement
42                              Don't let applications replace our memory
43                              management functions
44    --disable-openssl         Disable support for OpenSSL encryption.
45    --disable-thread-support  Don't support multithreaded environments. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T12:32:05.190

来自`whatsnew-2.0.txt`：

```
5.4\. SSL support for bufferevents with OpenSSL

   There is now a bufferevent type that supports SSL/TLS using the
   OpenSSL library.  The code for this is build in a separate
   library, libevent_openssl, so that your programs don't need to
   link against OpenSSL unless they actually want SSL support.

   There are two ways to construct one of these bufferevents, both
   declared in <event2/bufferevent_ssl.h>.  If you want to wrap an
   SSL layer around an existing bufferevent, you would call the
   bufferevent_openssl_filter_new() function.  If you want to do SSL
   on a socket directly, call bufferevent_openssl_socket_new(). 
```

如果您需要 SSL 套接字，这是为了您的方便。如果您不需要它，为什么不使用您问题的自述文件片段中的选项简单地禁用它呢？

# ios - 国家没有收到apns？

> ID：14624903
> 
> 赞同：-1
> 
> 时间：2013-01-31T11:42:01.787
> 
> 标签：ios, apple-push-notifications

国家没有收到apns？Apple 向中国服务器推送推送请求 通常在韩国为我推送。但是在中国，我对那些不推动的人来说是个问题..

不知道以任何方式测试什么......知道，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:02:50.273

我猜任何可以到达的国家都`apple.com`可以收到apns，所以你的答案可能是朝鲜。

# celery - 我可以将 Celery 工作人员绑定到给定共享数据库的特定实例吗？

> ID：14624906
> 
> 赞同：3
> 
> 时间：2013-01-31T11:42:23.877
> 
> 标签：celery

我有许多机器，每台机器都有一个 Django 实例，共享一个 Postgres 数据库。

我想运行 Celery，为了简单起见，最好使用 Django 代理和 Postgres 数据库。我没有大量任务要运行，因此没有必要使用不同的代理。

我想运行在本地文件存储上运行的 celery 任务。这意味着我希望 celery 工作者只运行触发事件的同一台机器上的任务。

目前的设置可以做到这一点吗？如果没有，怎么办？每台机器的本地 Redis 实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T19:13:17.040

我想出了如何使这项工作。不需要花哨的路由或经纪人。

`celeryd`我使用以主机命名的特殊队列运行每个实例。这可以自动完成，例如：

```
./manage.py celeryd -Q celery,`hostname` 
```

`settings.py`然后我在存储主机名的地方设置了一个主机名：

```
import socket
CELERY_HOSTNAME = socket.gethostname() 
```

在每个 Django 实例中，这将具有不同的值。

然后我可以在异步调用我的任务时指定这个队列：

```
my_task.apply_async(args=[one, two], queue=settings.CELERY_HOSTNAME) 
```

# c# - ASP.NET global.asax end_session（会话永不结束）

> ID：14624912
> 
> 赞同：2
> 
> 时间：2013-01-31T11:42:37.800
> 
> 标签：c#, asp.net

我遇到了结束会话的问题。当我单击“WebForms.asax”中的按钮时，会话计数时间从零到一分钟（如果我单击此按钮会话将永远不会结束）。我给了 1 分钟的时间来结束所有会话，当我不点击网站时它就可以工作。你知道问题出在哪里吗？

我在这里开始会议：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace Session_Test
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            Session["UserAuthentication"] = "dddd";
            TypSession.InnerHtml = "<a href='WebForm1.aspx'>sdsds</a>";
        }
    }
} 
```

另一个网站（WebForm1.aspx）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace Session_Test
{
    public partial class WebForm1 : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            example.InnerHtml = Session["UserAuthentication"].ToString()+"         "+ Session.Timeout.ToString();;
        }

        protected void Unnamed1_Click(object sender, EventArgs e)
        {
            Response.Redirect(Request.RawUrl);
            Session.Abandon();

        }
    }
} 
```

全球.asax

```
 void Session_Start(object sender, EventArgs e)
        {
            Session.Timeout = 1; 
        }

        void Session_End(object sender, EventArgs e)
        {
            Response.Redirect("http://localhost:51888/Default.aspx");
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:06:29.263

```
Response.Redirect(Request.RawUrl); 
```

将结束您的响应，这与调用相同：

```
Response.Redirect(Request.RawUrl, true); 
```

bool 代表停止响应，因此您的 Session.Abandon() 永远不会被调用。如果您想在重定向后执行 Session.Abandon()，则应使用 false 调用重定向：

```
Response.Redirect(Request.RawUrl, false); 
```

[重定向 MSDN](http://msdn.microsoft.com/en-us/library/08za4s98.aspx)

# r - facet_wrap 来自 GGally 的 ggparcoord()

> ID：14624914
> 
> 赞同：1
> 
> 时间：2013-01-31T11:42:45.700
> 
> 标签：r, ggplot2, facet-wrap

我想从一个数据集中绘制多个平行坐标图。目前我有一个工作解决方案，`split`它`l_ply`产生 4 个`ggplot2`对象。我想用更紧凑的布局和一个图例来解决这个`facet_wrap`问题`facet_grid`。这可能吗？

使用普通`ggplot2`对象（箱线图） facet_wrap 可以完美地工作。使用该`GGally`功能`ggparcoord()`，我得到了错误`Error in layout_base(data, vars, drop = drop) : At least one layer must contain all variables used for facetting`

我究竟做错了什么？

```
require(GGally)
require(ggplot2)
# Example Data
x <- data.frame(var1=rnorm(40,0,1),
                var2=rnorm(40,0,1),
                var3=rnorm(40,0,1),
                type=factor(rep(c("x", "y"), length.out=40)),
                set=factor(rep(c("A","B","C","D"), each=10))
                )
# this works
p1 <- ggplot(x, aes(x=type, y=var1, group=type)) + geom_boxplot()
p1 <- p1 + facet_wrap(~ set)
p1 
# this does not work
p2 <- ggparcoord(x, columns=1:3, groupColumn=4) 
p2 <- p2 + facet_wrap(~ set)
p2 
```

任何建议表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T12:02:05.420

您不能直接`facet_wrap()`与函数一起使用，`ggparcoord()`因为此函数仅将在调用此函数时指定的那些列用作数据。通过查看 的数据元素可以看出`p2`。没有名为 的列`set`。

```
 p2 <- ggparcoord(x, columns=1:3, groupColumn=4)
 head(p2$data)
  type .ID anyMissing variable       value
1    x   1      FALSE     var1  0.95473093
2    y   2      FALSE     var1 -0.05566205
3    x   3      FALSE     var1  2.57548872
4    y   4      FALSE     var1  0.14508261
5    x   5      FALSE     var1 -0.92022584
6    y   6      FALSE     var1 -0.05594902 
```

要获得具有分面的相同类型的图，首先，您需要向现有数据框添加新列（仅包含与案例数相对应的数字），然后重塑此数据框。

```
x$ID<-1:40
df.x<-melt(x,id.vars=c("set","ID","type")) 
```

然后使用函数`ggplot()`和`geom_line()`绘制数据。

```
ggplot(df.x,aes(x=variable,y=value,colour=type,group=ID))+
   geom_line()+facet_wrap(~set) 
```

![在此处输入图像描述](../Images/ebd3cf2da7a13476c2acf637cf49c935.png)

# c# - 除了Visual Studio 2008的核心编辑器，如何显示注释？

> ID：14624917
> 
> 赞同：2
> 
> 时间：2013-01-31T11:42:49.423
> 
> 标签：c#, visual-studio-2008, sdk, annotations, editor

我需要以编程方式创建一个注释栏，除了文本/源代码文件之外，它还逐行显示信息。该解决方案需要同时适用于 Visual Studio 2008 和 2010。我不想失去核心编辑器的任何功能，例如语法突出显示等。我需要实现自定义编辑器还是有更简单的方法？

我目前的方法是创建一个自定义编辑器组件，其中包含一个 Windows.Forms.SplitContainer，左侧有一个自定义组件，右侧有一个 RichTextBox 作为编辑器。但是此解决方案仅显示未突出显示的文本。

我想象将核心编辑器的一个实例放入 SplitContainer 的第二个窗格中，但不知道这是否可能或如何到达那里。

顺便说一句，我的目标是 C# 解决方案。

# java - 非法转发参考java问题

> ID：14624919
> 
> 赞同：13
> 
> 时间：2013-01-31T11:42:50.507
> 
> 标签：java

谁能解释这段代码有什么问题：

```
 public class Base {

    static {
        i = 1;
        System.out.println("[Base]after static init block i=" + i);// LINE 1
        System.out.println("*************************************");
        System.out.println();
    }
    static int i;

    public static void main(String[] args) {
        System.out.println(Base.i);
    }
} 
```

如果我评论 LINE 1 - 一切正常并且 Base.main 方法打印“1”。如果第 1 行 - 未注释，则会出现编译时错误：“非法前向引用”。所以，正如我在静态初始化块中理解的那样，我可以为 i 设置值，但不能读取。谁能解释为什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-31T11:46:35.263

这是因为[Initialization 期间对 Fields 使用的限制](https://docs.oracle.com/javase/specs/jls/se14/html/jls-8.html#jls-8.3.3)。特别是，在声明它们的行之前的静态初始化块内使用静态字段只能在表达式的左侧（即赋值），除非它们是完全限定的（在您的情况下`Base.i`）。

例如：如果你在你`int j = i;`之后插入，`i = 1;`你会得到同样的错误。

解决这个问题的明显方法是在静态初始化块`static int i;` *之前声明。*

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-31T11:46:17.943

“非法前向引用”意味着您试图在定义变量之前使用它。

*您观察到的行为是 javac 错误的症状（请参阅此错误报告）。该问题似乎在较新版本的编译器中得到修复，例如 OpenJDK 7。*

看一下

[静态最终字段的非法前向引用错误](https://stackoverflow.com/questions/8234645/illegal-forward-reference-error-for-static-final-fields)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-31T11:52:25.750

您可以将 Base 添加到静态块中的 i 变量中，或者您必须在块之前声明 static int i 。其他解决方案是创建静态方法而不是静态块。

```
static {
    Base.i = 1;
    System.out.println("[Base]after static init block i=" + Base.i);// LINE 1
    System.out.println("*************************************");
    System.out.println();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-31T11:47:26.013

将您的代码更改为：

```
int i;
static {
    i = 1;
    System.out.println("[Base]after static init block i=" + i);// LINE 1
    System.out.println("*************************************");
    System.out.println();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-05T03:46:53.000

```
A variable should always be textually declared before used else Illegal forward Reference comes into picture. Only Exception to this Statement is : If prior to declaration it is used on LHS of expression. Ex :
Snippet 1: 
 static{
   x = 10;
}
static int x;  
Above snippet will work.

Snippet 2:
static{
  System.out.println("Value of x: " + x)  
}
static int x;
  This will give CTE, because x isnt LHS of expression.

Keeping those conditions in mind we can avoid Illegal Forward ref issue in our code.

Thanks 
```

# c# - C#通过引用将数组的一部分作为函数的参数传递

> ID：14624922
> 
> 赞同：0
> 
> 时间：2013-01-31T11:42:56.613
> 
> 标签：c#, c++

下面的 C# 代码是否与尝试实现与 C++ 代码相同的等效方式？有没有办法避免复制（而不是将整个数组发送到函数）？

C++

```
static void somefunction(double* v, int nb)
{
//something that will update v[0],v[1], ... v[nb-1]
}

double * myarray=new double[100];
somefunction(&myarray[10],5);
//...
delete [] myarray; 
```

C＃

```
static void somefunction(double[] v, int nb)
{
//something that will update v[0],v[1], ... v[nb-1]
}

double[]  myarray=new double[100];
double[] temp_array=new double[5];
somefunction(temp_array,5);
temp_array.CopyTo(myarray,10); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T11:47:49.163

数组是引用类型。您没有将整个数组发送到函数：您正在发送对数组的引用。

如果您希望您的函数仅更新该数组的一部分，请将开始和结束索引作为参数传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:57:02.903

您可以使用[ArraySegment](http://msdn.microsoft.com/en-us/library/1hsbd92d.aspx)来指定数组的范围。不过，您仍然需要询问 ArraySegment 的 Array、Count 和 Offset 属性。尽管如此，它还是提供了一个方便的包装器。

另一种方法是为数组（或 ICollection 或其他一些集合类型）编写一个成熟的 IList 包装器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T11:47:02.983

在 C++ 中，使用`std::vector`, 和迭代器对。

在 C# 中，您可以传递整个数组（这是一个*引用类型*）以及一对表示开始和结束的索引。

* * *

C++ 代码应如下所示：

```
void f(double *begin, double *end)
{
    for ( ; begin < end; ++begin )
    {
         auto & value = *begin; 
         //etc
    }
}

std::vector<double> v(100);
f(&v[10], &v[10] + 5); 
```

这是惯用的，并且遵循标准库的理念！

* * *

C# 代码应如下所示：

```
void f(double[] v, int begin, int end)
{
    for (  ; begin < end ; ++end )
    {
          //access v[begin]
          //etc
    }
}

double[] v =new double[100];
f(v, 10, 10 + 5); 
```

这试图模仿 C++ 风格。没有错。但是，在 C# 中，习惯上传递起始索引和计数，因此您可以改为执行以下操作：

```
void f(double[] v, int startIndex, int count)
{
    for (int i = 0 ; i < count ;  ++i, ++startIndex)
    {
          //access v[startIndex]
          //etc
    }
}

double[] v =new double[100];
f(v, 10, 5); //note the difference here! 
```

第二种方法遵循 .NET 库理念。我会用这个。

希望有帮助。

# c# - 子项的 TreeView ItemContainerStyle，FullRowSelect

> ID：14624929
> 
> 赞同：2
> 
> 时间：2013-01-31T11:43:13.590
> 
> 标签：c#, wpf, xaml

在这里使用了为 TreeViewItems 设置全行选择的方法： Lee Campbell Horizo​​ntal [stretch for treeviewitems](http://leecampbell.blogspot.de/2009/01/horizontal-stretch-on-treeviewitems.html)

这适用于顶级项目。

但是`TreeViewItem.Items` 集合好像有问题，好像没有取到正确的模板。（我看到它不在`TreeView.Items`集合中，如模板所示）

有没有一种简单的方法可以从父项样式派生子项样式？

我怎样才能描述一次样式（对于所有 TreeviewItems）并让样式用于所有 TreeViewItems，无论它们是在集合中`TreeView.Items`还是在`TreeViewItem.Items`集合中？

这是我的 XAML，一些代码来自 LeeCampbell 示例。

```
<Window x:Class="TreeViewFullRow.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:TreeViewFullRow"
        Title="MainWindow"
        Width="525"
        Height="350">

    <Window.Resources />

    <Grid>

        <TreeView Name="TreeData"
                  Width="236"
                  Height="311"
                  HorizontalAlignment="Left"
                  VerticalAlignment="Top">

            <TreeView.ItemContainerStyle>

                <Style BasedOn="{StaticResource {x:Type TreeViewItem}}" TargetType="TreeViewItem">
                    <Setter Property="HorizontalContentAlignment" Value="Center" />
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="TreeViewItem">
                                <StackPanel>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" MinWidth="19" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <!--
                                            Note that the following do not work, but I believe the top 2 should?!
                                            <ToggleButton IsChecked="{TemplateBinding IsExpanded}" ClickMode="Press" Name="Expander">
                                            <ToggleButton IsChecked="{TemplateBinding Property=IsExpanded}" ClickMode="Press" Name="Expander">
                                            <ToggleButton IsChecked="{TemplateBinding Path=IsExpanded}" ClickMode="Press" Name="Expander">
                                        -->
                                        <ToggleButton Name="Expander"
                                                      ClickMode="Press"
                                                      IsChecked="{Binding Path=IsExpanded,
                                                                          RelativeSource={RelativeSource TemplatedParent}}">
                                            <ToggleButton.Style>
                                                <Style TargetType="ToggleButton">
                                                    <Setter Property="UIElement.Focusable" Value="false" />
                                                    <Setter Property="FrameworkElement.Width" Value="16" />
                                                    <Setter Property="FrameworkElement.Height" Value="16" />
                                                    <Setter Property="Control.Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="ToggleButton">
                                                                <Border Width="16"
                                                                        Height="16"
                                                                        Background="#00FFFFFF"
                                                                        Padding="5,5,5,5">
                                                                    <Path Name="ExpandPath"
                                                                          Fill="#00FFFFFF"
                                                                          Stroke="#FF989898">
                                                                        <Path.Data>
                                                                            <PathGeometry Figures="M0,0L0,6L6,0z" />
                                                                        </Path.Data>
                                                                        <Path.RenderTransform>
                                                                            <RotateTransform Angle="135" CenterX="3" CenterY="3" />
                                                                        </Path.RenderTransform>
                                                                    </Path>
                                                                </Border>
                                                                <ControlTemplate.Triggers>
                                                                    <Trigger Property="UIElement.IsMouseOver" Value="True">
                                                                        <Setter TargetName="ExpandPath" Property="Shape.Stroke" Value="#FF1BBBFA" />
                                                                        <Setter TargetName="ExpandPath" Property="Shape.Fill" Value="#00FFFFFF" />
                                                                    </Trigger>
                                                                    <Trigger Property="ToggleButton.IsChecked" Value="True">
                                                                        <Setter TargetName="ExpandPath" Property="UIElement.RenderTransform">
                                                                            <Setter.Value>
                                                                                <RotateTransform Angle="180" CenterX="3" CenterY="3" />
                                                                            </Setter.Value>
                                                                        </Setter>
                                                                        <Setter TargetName="ExpandPath" Property="Shape.Fill" Value="#FF595959" />
                                                                        <Setter TargetName="ExpandPath" Property="Shape.Stroke" Value="#FF262626" />
                                                                    </Trigger>
                                                                </ControlTemplate.Triggers>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                </Style>
                                            </ToggleButton.Style>
                                        </ToggleButton>
                                        <Border x:Name="Bd"
                                                Grid.Column="1"
                                                HorizontalAlignment="Stretch"
                                                Background="{TemplateBinding Panel.Background}"
                                                BorderBrush="{TemplateBinding Border.BorderBrush}"
                                                BorderThickness="{TemplateBinding Border.BorderThickness}"
                                                Padding="{TemplateBinding Control.Padding}"
                                                SnapsToDevicePixels="True">
                                            <ContentPresenter x:Name="PART_Header"
                                                              HorizontalAlignment="{TemplateBinding Control.HorizontalContentAlignment}"
                                                              Content="{TemplateBinding HeaderedContentControl.Header}"
                                                              ContentSource="Header"
                                                              ContentStringFormat="{TemplateBinding HeaderedItemsControl.HeaderStringFormat}"
                                                              ContentTemplate="{TemplateBinding HeaderedContentControl.HeaderTemplate}"
                                                              ContentTemplateSelector="{TemplateBinding HeaderedItemsControl.HeaderTemplateSelector}"
                                                              SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" />
                                        </Border>
                                        <ItemsPresenter x:Name="ItemsHost"
                                                        Grid.Row="1"
                                                        Grid.Column="1" />
                                    </Grid>
                                </StackPanel>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="TreeViewItem.IsExpanded" Value="False">
                                        <Setter TargetName="ItemsHost" Property="UIElement.Visibility" Value="Collapsed" />
                                    </Trigger>
                                    <Trigger Property="ItemsControl.HasItems" Value="False">
                                        <Setter TargetName="Expander" Property="UIElement.Visibility" Value="Hidden" />
                                    </Trigger>
                                    <Trigger Property="TreeViewItem.IsSelected" Value="True">
                                        <Setter TargetName="Bd" Property="Panel.Background" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}" />
                                        <Setter Property="TextElement.Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}" />
                                    </Trigger>
                                    <MultiTrigger>
                                        <MultiTrigger.Conditions>
                                            <Condition Property="TreeViewItem.IsSelected" Value="True" />
                                            <Condition Property="Selector.IsSelectionActive" Value="False" />
                                        </MultiTrigger.Conditions>
                                        <Setter TargetName="Bd" Property="Panel.Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" />
                                        <Setter Property="TextElement.Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" />
                                    </MultiTrigger>
                                    <Trigger Property="UIElement.IsEnabled" Value="False">
                                        <Setter Property="TextElement.Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}" />
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>

            </TreeView.ItemContainerStyle>

        </TreeView>

        <Button Name="BtnLoad"
                Width="75"
                Height="23"
                Margin="277,12,0,0"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Click="OnBtnLoad"
                Content="Load data" />
    </Grid>
</Window> 
```

这很容易。在按钮单击处理程序中，我将新项目添加到 TreeView。这是代码：

```
private void OnBtnLoad(object sender, RoutedEventArgs e)
{
    var count = this.TreeData.Items.Count.ToString();
    var parent = new TreeViewItem() { Name = "Name_" + count, Header = "Header_" + count };

    this.TreeData.Items.Add(parent);

    var child0 = new TreeViewItem() { Name = "Name_" + count + "_0", Header = "Header_" + count + "_0" };
    var child1 = new TreeViewItem() { Name = "Name_" + count + "_1", Header = "Header_" + count + "_1" };
    var child2 = new TreeViewItem() { Name = "Name_" + count + "_2", Header = "Header_" + count + "_2" };

    parent.Items.Add(child0);
    parent.Items.Add(child1);
    parent.Items.Add(child2);

    parent.Items.Refresh();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T12:04:15.337

如果您将样式放在视觉树的更上方，它将影响树视图中的项目和子项目。例如，您可以将样式放入`Grid.Resources`或放入，`Window.Resources`而不是`TreeView.ItemContainerStyle`像现在那样将其放入。

# php - 构建测试链接

> ID：14624930
> 
> 赞同：2
> 
> 时间：2013-01-31T11:43:16.163
> 
> 标签：php, xml, eclipse, dtd, testlink

我昨天下载了TestLink源代码，并尝试在eclipse中构建它。我解决了我遇到的大多数错误，但我仍然有一个，这真的很紧张：

```
A '(' character or an element type is required in the declaration of element type "f". 
```

此错误显示在两个 dtd 文件中。以下是其中之一的代码：

```
 <?xml version="1.0" encoding="UTF-8"?>
<!ELEMENT schema (table*, sql*)>
<!ATTLIST schema version CDATA #REQUIRED>
<!ELEMENT table ((field+|DROP), CONSTRAINT*, descr?, index*, data*)>
<!ELEMENT field ((NOTNULL|KEY|PRIMARY)?, (AUTO|AUTOINCREMENT)?, (DEFAULT|DEFDATE|DEFTIMESTAMP)?, 
NOQUOTE?, CONSTRAINT*, descr?)>
<!ELEMENT data (row+)>
<!ELEMENT row (f+)>
<!ELEMENT f (#CDATA)>
<!ELEMENT descr (#CDATA)>
<!ELEMENT NOTNULL EMPTY>
<!ELEMENT KEY EMPTY>
<!ELEMENT PRIMARY EMPTY>
<!ELEMENT AUTO EMPTY>
<!ELEMENT AUTOINCREMENT EMPTY>
<!ELEMENT DEFAULT EMPTY>
<!ELEMENT DEFDATE EMPTY>
<!ELEMENT DEFTIMESTAMP EMPTY>
<!ELEMENT NOQUOTE EMPTY>
<!ELEMENT DROP EMPTY>
<!ELEMENT CONSTRAINT (#CDATA)>
<!ATTLIST table name CDATA #REQUIRED platform CDATA #IMPLIED version CDATA #IMPLIED>
<!ATTLIST field name CDATA #REQUIRED type (C|C2|X|X2|B|D|T|L|I|F|N) #REQUIRED size CDATA #IMPLIED>
<!ATTLIST data platform CDATA #IMPLIED>
<!ATTLIST f name CDATA #IMPLIED>
<!ATTLIST DEFAULT VALUE CDATA #REQUIRED>
<!ELEMENT index ((col+|DROP), CLUSTERED?, BITMAP?, UNIQUE?, FULLTEXT?, HASH?, descr?)>
<!ELEMENT col (#CDATA)>
<!ELEMENT CLUSTERED EMPTY>
<!ELEMENT BITMAP EMPTY>
<!ELEMENT UNIQUE EMPTY>
<!ELEMENT FULLTEXT EMPTY>
<!ELEMENT HASH EMPTY>
<!ATTLIST index name CDATA #REQUIRED platform CDATA #IMPLIED>
<!ELEMENT sql (query+, descr?)>
<!ELEMENT query (#CDATA)>
<!ATTLIST sql name CDATA #IMPLIED platform CDATA #IMPLIED, key CDATA, prefixmethod (AUTO|MANUAL|NONE) > 
```

问题在于这一行：

```
<!ELEMENT f (#CDATA)> 
```

并且在谷歌上找不到类似的东西。提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:25:04.863

在元素声明中使用的任何地方`#CDATA`，都需要将其更改为`#PCDATA`

就这样`<!ELEMENT f (#CDATA)>`变成了`<!ELEMENT f (#PCDATA)>`。

此外，您的 ATTLIST`sql`不正确。您需要删除逗号并将其中一个`#IMPLIED`或添加`#REQUIRED`到`key`. 您还需要为它执行此操作`prefixmethod`或为其提供默认值。

例子：

```
<!ATTLIST sql 
          name         CDATA               #IMPLIED 
          platform     CDATA               #IMPLIED
          key          CDATA               #IMPLIED
          prefixmethod (AUTO|MANUAL|NONE)  "NONE"   > 
```

# timer - Wowza 服务器模块 - 视频聊天的定时器/倒计时

> ID：14624939
> 
> 赞同：4
> 
> 时间：2013-01-31T11:43:30.850
> 
> 标签：timer, video-streaming, wowza, videochat

对于我们当前的项目，我们需要一个视频聊天应用程序来跟踪这些视频对话的持续时间。

每个对话也有一个有限的时间，之后聊天终止。

我已经构建了基本模块，但是在实现该计时器时遇到了问题。在 WOWZA 1 对 1 视频聊天应用程序中始终有 2 个流：

User1 发布流，User2 播放（订阅）
User2 发布流，User1 播放（订阅）

有限的时间量（在聊天之前）保存在数据库中。

现在减少这个数量的最佳方法是什么？

我不能在 StreamListener 中这样做，因为总是有两个流并且它会减少两次。

也许某种单例？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:25:53.690

如果您的视频聊天时间在聊天开始后没有改变，而不是单例，您可以实现一个模块并附加一个`TimerTask`on`play`或`publish`事件。下面是一个帮助您入门的示例。

```
import java.util.Timer;
import java.util.TimerTask;

import com.wowza.wms.amf.AMFDataList;
import com.wowza.wms.client.IClient;
import com.wowza.wms.logging.WMSLogger;
import com.wowza.wms.module.*;
import com.wowza.wms.request.RequestFunction;
import com.wowza.wms.stream.IMediaStream;
import com.wowza.wms.stream.IMediaStreamActionNotify;

public class KillAfterNSeconds extends ModuleBase implements IMediaStreamActionNotify {

    private class StreamKiller extends TimerTask{       
        private IMediaStream stream;        
        public StreamKiller(IMediaStream s){
            this.stream = s;
        }       
        @Override
        public void run() {
            try{
                // Complete all your clean up, such as :
                if(stream != null){
                    WMSLogger.getLogger("").info("Killing stream: " + stream.getName());
                    stream.getClient().shutdownClient();
                    stream.shutdown();
                    stream.close();
                }               
            }catch(Exception e){}
        }
    }

    public void publish(IClient paramIClient,
            RequestFunction paramRequestFunction, AMFDataList paramAMFDataList) {
        WMSLogger.getLogger("").info("Start running publish..");
        IMediaStream stream = getStream(paramIClient, paramRequestFunction);
        stream.addClientListener(this);
        Timer timer = new Timer();
        TimerTask task = new StreamKiller(stream);
        // replace here with the actual time to kill stream
        timer.schedule(task, 10000); 
        invokePrevious(paramIClient, paramRequestFunction, paramAMFDataList);
        WMSLogger.getLogger("").info("Finish running publish..");
        return;
    }

    @Override
    public void onUnPublish(IMediaStream stream, String streamName,
            boolean isRecord, boolean isAppend) {
        WMSLogger.getLogger("").info("Start onUnPublish..");
        double elapSeconds = stream.getElapsedTime().getTimeSeconds();
        WMSLogger.getLogger("").info("Elapsed time " + elapSeconds);
        WMSLogger.getLogger("").info("Finish running onUnPublish..");
    }

    @Override
    public void onPause(IMediaStream arg0, boolean arg1, double arg2) {     
    }
    @Override
    public void onPlay(IMediaStream arg0, String arg1, double arg2,
            double arg3, int arg4) {
    }
    @Override
    public void onPublish(IMediaStream arg0, String arg1, boolean arg2,
            boolean arg3) {
    }
    @Override
    public void onSeek(IMediaStream arg0, double arg1) {
    }
    @Override
    public void onStop(IMediaStream arg0) {     
    }

} 
```

# ios - 按属性排序自定义对象的 NSArray - DBMetadata - Dropbox

> ID：14624952
> 
> 赞同：0
> 
> 时间：2013-01-31T11:44:20.840
> 
> 标签：ios, objective-c, dropbox-api

我不知道为什么排序不起作用`NSArray`。`DBMetadata (NSObject)`这是我的代码。怎么了？我什至尝试添加要添加的类别，`compare:`但它不起作用。

```
- (void)restClient:(DBRestClient *)client loadedMetadata:(DBMetadata *)metadata {
    if (metadata.isDirectory) {
        NSLog(@"Folder '%@' contains:", metadata.path);
        for (DBMetadata *file in metadata.contents) {
            NSLog(@"\t%@  is directory? %d", file.filename, file.isDirectory);
            if (file.isDirectory) {
                [self.availableBackups addObject:file];
                DLog(@"llastModifiedDate %@", file.lastModifiedDate);
            }
        }
    }
//    NSLog(@"before sorting: %@", self.availableBackups); //lastModifiedDate //filename

    NSSortDescriptor *descriptor = [[NSSortDescriptor alloc] initWithKey:@"lastModifiedDate"  ascending:YES selector:@selector(compare:)];
    [self.availableBackups sortedArrayUsingDescriptors:[NSArray arrayWithObjects:descriptor,nil]];

//    NSLog(@"after sorting: %@", self.availableBackups);
} 
```

`self.availableBackups`是`NSMutableArray`

```
@property (nonatomic, retain) NSMutableArray *availableBackups; 
```

Dropbox - [DBMetadata.h](https://github.com/pho0/dropbox-ios-sdk/blob/master/DropboxSDK.framework/Headers/DBMetadata.h)

注释`NSLog`刚刚打印了obj的地址，可以看到无论`YES`or `NO`for ，排序后输出的address都是一样的`ascending:`

输出

```
2013-01-31 17:20:12.423 Dropbox[7366:c07] before sorting: (
    "<DBMetadata: 0x6bbf010>",
    "<DBMetadata: 0x6bbfb50>",
    "<DBMetadata: 0x6bc1660>",
    "<DBMetadata: 0x6bc17b0>",
    "<DBMetadata: 0x6bc14f0>",
    "<DBMetadata: 0x6bc0dd0>",
    "<DBMetadata: 0x6bc1de0>"
)
2013-01-31 17:20:12.424 Dropbox[7366:c07] after sorting: (
    "<DBMetadata: 0x6bbf010>",
    "<DBMetadata: 0x6bbfb50>",
    "<DBMetadata: 0x6bc1660>",
    "<DBMetadata: 0x6bc17b0>",
    "<DBMetadata: 0x6bc14f0>",
    "<DBMetadata: 0x6bc0dd0>",
    "<DBMetadata: 0x6bc1de0>"
) 
```

随着上升`NO`

```
Last Modified file at 0: 2013-01-30 08:00:22 +0000
Last Modified file at 1: 2013-01-30 08:02:54 +0000
Last Modified file at 2: 2013-01-31 09:08:26 +0000
Last Modified file at 3: 2013-01-31 09:14:55 +0000
Last Modified file at 4: 2013-01-31 09:14:08 +0000
Last Modified file at 5: 2013-01-31 09:16:43 +0000
Last Modified file at 6: 2013-01-31 10:36:13 +0000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:52:40.363

`sortedArrayUsingDescriptors:`返回一个数组，它不会修改您正在应用它的数组。如果您需要使用`NSArray`，请尝试：

```
self.availableBackups = [self.availableBackups sortedArrayUsingDescriptors:[NSArray arrayWithObjects:descriptor,nil]]; 
```

如果你可以使用`NSMutableArray`，你可以使用：

```
[self.availableBackups sortUsingDescriptors:[NSArray arrayWithObjects:descriptor,nil]]; 
```

# mysql - 数据迁移脚本 INSERT INTO

> ID：14624954
> 
> 赞同：0
> 
> 时间：2013-01-31T11:44:26.317
> 
> 标签：mysql, sql, insert-into

我创建了以下 SQL 代码来迁移我们的数据库。UP 查询工作正常，但我不知道如何修复 DOWN 查询。我只想插入 payment_gateway 表中的所有数据，但也必须匹配正确的 reseller_shop.id。

```
// UP
INSERT INTO payment_gateway (`type`, account, keyIn, keyOut, resellerShopId)
SELECT 'paymentGatewayOgone', rs.ogoneAccount, rs.ogoneSignatureIn, rs.ogoneSignatureOut, rs.id
FROM reseller_shop AS rs
WHERE rs.ogoneAccount <> '';

// DOWN
INSERT INTO reseller_shop (ogoneAccount, ogoneSignatureIn, ogoneSignatureOut)
SELECT pg.account, pg.keyIn, pg.keyOut
FROM payment_gateway AS pg
WHERE pg.type = 'paymentGatewayOgone'
AND reseller_shop.id = pg.resellerShopId 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:49:20.093

```
INSERT INTO reseller_shop (ogoneAccount, ogoneSignatureIn, ogoneSignatureOut)
SELECT pg.account, pg.keyIn, pg.keyOut FROM payment_gateway AS pg 
WHERE pg.type = 'paymentGatewayOgone' AND  pg.resellerShopId in 
(select reseller_shop.id from reseller_shop_id) 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T12:01:06.050

似乎我不得不使用 UPDATE 而不是 INSERT INTO。

```
UPDATE reseller_shop AS rs, payment_gateway AS pg
SET rs.ogoneAccount = pg.account, rs.ogoneSignatureIn = pg.keyIn, rs.ogoneSignatureOut = pg.keyOut
WHERE pg.type = 'paymentGatewayOgone'
AND rs.id = pg.resellerShopId 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T11:51:30.137

像这样的一些事情：

```
INSERT INTO reseller_shop (ogoneAccount, ogoneSignatureIn, ogoneSignatureOut)
SELECT pg.account, pg.keyIn, pg.keyOut
FROM payment_gateway AS pg 
    INNER JOIN reseller_shop AS rs ON  rs.id = pg.resellerShopId
WHERE pg.type = 'paymentGatewayOgone' 
```

或者：

```
INSERT INTO reseller_shop (ogoneAccount, ogoneSignatureIn, ogoneSignatureOut)
SELECT pg.account, pg.keyIn, pg.keyOut
FROM payment_gateway AS pg 
WHERE pg.type = 'paymentGatewayOgone' 
    AND EXISTS (SELECT * 
                FROM reseller_shop AS rs 
                WHERE rs.id = pg.resellerShopId) 
```

# c#-4.0 - 如何在 c# 中使用本地数据表在 datagridview 中获取月份数据

> ID：14624964
> 
> 赞同：2
> 
> 时间：2013-01-31T11:44:50.147
> 
> 标签：c#-4.0

```
public partial class logRead : Form
{
    DataSet ds = new DataSet();
    DataTable tab = new DataTable();

    public logRead()
    {
        InitializeComponent();
    }
    string line;
    private void BtnUser_Click(object sender, EventArgs e)
    {           
        DataRow[] filteredRows = tab.Select("Username = '"+cmbUsername.Text+"'");
        DataTable dt = filteredRows.CopyToDataTable();
        dgv1.DataSource = dt;
        txtcount.Text = dgv1.Rows.Count.ToString();         
    }

    private void btnsearch_Click(object sender, EventArgs e)
    {
        dtmDate.CustomFormat = "dd MMM yyyy hh mm ss";
        DataRow[] filteredRows = tab.Select("Datetime = '" +dtmDate.Text + "'");
         DataTable dt = filteredRows.CopyToDataTable();
        dgv1.DataSource = dt;                   
    }

    private void logRead_Load(object sender, EventArgs e)
    {
        StreamReader strRead = new StreamReader("D:\\login.hml");
        string line;
        line = strRead.ReadToEnd();
        DataRow row = null;
        tab.Columns.Add("Ipaddress");
        tab.Columns.Add("Sysname");
        tab.Columns.Add("Username");
        tab.Columns.Add("Text");
        tab.Columns.Add("Datetime");
        string[] rows = line.Split(new char[] { '\n' }, StringSplitOptions.RemoveEmptyEntries);
        foreach (string r in rows)
        {
            string[] columns = r.Split(new char[] { '|' }, StringSplitOptions.RemoveEmptyEntries);
            if (columns.Length <= tab.Columns.Count)
            {
                row = tab.NewRow();

                for (int i = 0; i < columns.Length; i++)

                    row[i] = columns[i];
                tab.Rows.Add(row);
            }
        }
        ds.Tables.Add(tab);
        dgv1.DataSource = ds.Tables[0];
        txtcount.Text = dgv1.Rows.Count.ToString();
    }
}} 
```

我有一个日志文件，当表单加载本身时，我编写代码来填充 datagridview，我使用临时数据表和数据集并填写到 datagridview，我使用组合框临时填充所有用户名，如果我单击组合框中的任何名称，那么所有名称是什么信息填写 datagridview 我在 btn userclik 中编写该代码现在我想要按月或日期记录表我采取了两个组合框和一个组合框填充日期时间选择器和一个多月我填写，现在我想点击和月份我想显示月份在datagridview中明智的数据，我写了代码搜索点击我没有得到。（dis在Windows窗体中）还有一个我没有使用数据库，请检查代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:01:24.873

而不是使用 for`DataTable.Select`我会`DateTime` 在 Linq-To-DataSet 查询中使用。您可以使用`DateTime.TryParseExact`将字符串解析为`DateTime`.

```
var formatPattern = "dd MMM yyyy hh mm ss";
DateTime parsedDate;
var culture = System.Globalization.CultureInfo.InvariantCulture; // use CurentCulture if you want to use the current culture instead which might change
bool success = DateTime.TryParseExact(dtmDate.Text, formatPattern, culture, DateTimeStyles.None, out parsedDate);
if (success)
{ 
    // assuming you want all rows of the same day not the same second:
    var filteredRows = tab.AsEnumerable()
        .Where(r => r.Field<DateTime>("Datetime").Date == parsedDate.Date);
    dgv1.DataSource = filteredRows.CopyToDataTable();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T12:11:48.457

```
var formatPattern = "dd MMM yyyy hh mm ss";
DateTime parsedDate;
var culture = System.Globalization.CultureInfo.InvariantCulture; // use CurentCulture if you want to use the current culture instead which might change
bool success = DateTime.TryParseExact(dtmDate.Text, formatPattern, culture, DateTimeStyles.None, out parsedDate);
if (success) 
```

# java - java.io.Console - 类似于与标准输入重定向兼容的实用程序？

> ID：14624965
> 
> 赞同：5
> 
> 时间：2013-01-31T11:44:53.977
> 
> 标签：java

某些 Java 库中是否有实用程序类提供类似[java.io.Console](http://docs.oracle.com/javase/6/docs/api/java/io/Console.html)的便利但与 Bash 管道输入重定向兼容？

以下代码：

```
import java.io.Console;
public class Foo {
  public static void main(String args[]) {
    Console cons = System.console();
    String foo = cons.readLine(); // line-5
  }
} 
```

执行以下操作时将在第 5 行抛出 NPE：

```
echo "test" | java Foo 
```

[这个 SO 讨论](https://stackoverflow.com/questions/972813/why-use-java-io-console)中也提到了这一点，除了使用**System.in**之外，没有提供任何替代方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T13:40:47.617

尝试以下操作：

```
import java.io.BufferedReader;
import java.io.InputStreamReader;

public class Foo {
    public static void main(String args[]) throws Exception {
        BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
        String foo = in.readLine(); // line-5
        System.out.println(foo);
    }
} 
```

密码相关功能应手动完成。

# sql - 删除时同步两个数据库表中的数据

> ID：14624976
> 
> 赞同：3
> 
> 时间：2013-01-31T11:45:39.947
> 
> 标签：sql, ms-access

这是我的学校项目。我负责电子论坛部分。我试图删除一个用户，被删除用户的所有主题和回复也将被删除。

```
 public boolean deleteUser() {
    boolean success = false;
    DBController db = new DBController();
    db.setUp("IT Innovation Project");
    String sql = "DELETE FROM forumUsers where users_id = " + userID + "";
    if (db.updateRequest(sql) == 1)
        success = true;
    db.terminate();
    return success;
} 
```

此方法检索表的第一列的值并将其存储为 userID。然后，它会执行 delete sql 语句来删除某个用户。

```
 public boolean deleteThread() {
    boolean success = false;
    DBController db = new DBController();
    db.setUp("IT Innovation Project");
    String sql = "DELETE FROM forumTopics where topic_id = " + threadID
            + "";
    if (db.updateRequest(sql) == 1)
        success = true;
    db.terminate();
    return success;
} 
```

对于这种方法，它将获取另一个表的第一列的值，该表显示所有线程并执行删除 sql 语句。

但是，在我删除了一些用户之后，被删除用户的线程和回复仍然存储在数据库中。我目前在数据库中使用一张用户表和一张线程表。有没有办法喜欢所谓的“同步”两个表？是内连接吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:54:01.900

这似乎是使用 Cascade Delete 建立关系的完美案例 ( [http://support.microsoft.com/kb/304466](http://support.microsoft.com/kb/304466) )

> 级联更新和删除
> 
> 对于强制执行参照完整性的关系，您可以指定是否希望 Microsoft Access 自动级联更新或级联删除相关记录。如果您设置这些选项，则允许引用完整性规则通常阻止的删除和更新操作。当您删除记录或更改主表中的主键值时，Microsoft Access 会对相关表进行必要的更改以保持参照完整性。

但是请注意，应非常小心地使用级联删除。这些帖子指的是 SQL Server，但这些想法适用于任何数据库：

*   [何时/为什么在 SQL Server 中使用级联？](https://stackoverflow.com/questions/59297/when-why-to-use-cascading-in-sql-server)
*   [我应该使用 CASCADE DELETE 规则吗？](https://stackoverflow.com/questions/278392/should-i-use-the-cascade-delete-rule)

在大多数情况下，我不会先删除记录，我会为它们添加时间戳以供日后删除，人们改变主意的频率非常惊人。

![级联删除](../Images/606ea5a82abb4670470a3a1398a3acd8.png)

# android - 自定义向上箭头 ActionBarSherlock

> ID：14624980
> 
> 赞同：2
> 
> 时间：2013-01-31T11:45:50.003
> 
> 标签：android, customization, actionbarsherlock

我使用 ActionBarSherlock。在我的一项活动中，我有 SearchView。当它展开时，我将 ABS 的背景从绿色变为白色。所以我也需要改变向上箭头。好吧，问题是：我怎样才能改变它的颜色或从代码中设置 ImageResource ？

# java - spring-data-mongodb 在为对象补水时究竟是如何处理构造函数的？

> ID：14624982
> 
> 赞同：9
> 
> 时间：2013-01-31T11:45:51.957
> 
> 标签：java, spring, mongodb, spring-data, spring-data-mongodb

我已阅读[http://static.springsource.org/spring-data/data-mongo/docs/1.1.0.RELEASE/reference/html/#mapping-chapter](http://static.springsource.org/spring-data/data-mongo/docs/1.1.0.RELEASE/reference/html/#mapping-chapter)但找不到以下基本 spring-data- 的答案mongodb对象映射问题：

如果我从 MongoDB 加载以下类的实例：

```
public class Test {
    private String str1;
    private String str2;
    private Date date3;

    public Test(String str1) {
        this.str1 = str1;
        this.date3=new Date();
    }
} 
```

我知道将使用 MongoDB 文档`Test(String str1)`顶级字段中的值调用构造函数。`str1`我假设这个构造函数等同于`@PersistenceConstructor`显式声明。

但是`str2, date3`在这种情况下，这些字段会发生什么？不属于构造函数的所有字段是否仍会被初始化，还是会`str2, date3`因为找到仅使用的 PeristenceConstructor 而丢失`str1`？

最后，这将以什么顺序发生？将由`date3`构造函数设置，然后被先前持久化的字段覆盖，反之亦然？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-31T12:00:46.430

人口过程是双重的，并且在某种程度上是正交的。大多数情况下，您已经说明了正确的行为。调用构造函数来创建对象实例。参数值是从`DBObject`读取中检索的，并且可能会导致对象的递归创建，以防您将复杂的对象交给需要从嵌套的`DBObject`.

下一步是填充您的持久字段。您的情况与使用默认构造函数的情况的唯一区别是我们记住您传递给构造函数的字段值并且不会重新填充这些值。

如果`date`物化对象*的*源文档包含`date`.

# ios - SymmetricDS可以用于iOS吗

> ID：14624983
> 
> 赞同：4
> 
> 时间：2013-01-31T11:46:01.803
> 
> 标签：ios, synchronization, database-replication, symmetricds

SymmetricDS 有一个很棒的 android sqlite 实现。

我想知道我**是否可以对 iOS 做同样的事情**。

我在他们的网站或谷歌上找不到任何东西（基本搜索花了大约一个小时）。

另外，我希望有人能告诉我是否可以**从 SymmetricDS 的远程实例同步 iOS sqlite，**以及*这是否是个好主意*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-27T22:10:16.997

还没有。SymmetricDS 使用 Java，iOS 不支持。

但是，如果您查看 2013 年 4 月的这张幻灯片，上面写着“iOS（即将推出）”：

[https://www.percona.com/live/mysql-conference-2013/sites/default/files/slides/JumpMind%20SymmetricDS%20Percona%20Live.pdf](https://www.percona.com/live/mysql-conference-2013/sites/default/files/slides/JumpMind%20SymmetricDS%20Percona%20Live.pdf)

Ios 功能已在他们的路线图上分配：

[http://www.symmetricds.org/issues/roadmap_page.php](http://www.symmetricds.org/issues/roadmap_page.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-14T05:15:48.667

As of some time well after this question was asked, they did provide an embedded C solution.

See the docs [here](http://www.symmetricds.org/doc/3.9/html/user-guide.html#_embedding_in_c_c)

*A minimal implementation of the SymmetricDS client is written in C, which includes a shared library named "libsymclient" and a command line executable named "sym" for synchronizing a database. It currently only supports the SQLite database.*

As SymmetricDS is released under GPL you would need a commercial license.

# c# - 在 Lua 中获取动态数据

> ID：14624984
> 
> 赞同：1
> 
> 时间：2013-01-31T11:46:02.587
> 
> 标签：c#, lua, connect, nvidia

我已经使用 NVIDIA UI Composer Studio 构建了一个 Instrumentation Cluster。为了控制动画，它使用 Lua 脚本语言。现在我对 Lua 真的很陌生，我的问题如下：

我在 Lua 中有以下代码序列来控制我的速度计：

`self.vehicleSpeedData = {}` -- 这里有很多Values

```
function self.speedSim( inFrame, theController )

local timeInSec, dummy
timeInSec, dummy = getElapsedTime()
-- data based on 60fps
actualFrameNumber = math.floor(timeInSec * 60)
local theSample = ((actualFrameNumber-1) % #self.vehicleSpeedData) + 1
theController.value = self.vehicleSpeedData[theSample] *0.06 
```

结尾

此示例中的数组为空。如您所见，该函数读出数组的值。

但我需要的是，我可以从外部源（例如 RS232 或 CAN 模拟）获取这些数据......我想尝试的是，如果我可以将来自 C# 的数据例如放到那个 Lua 脚本中。

很难解释我到底想要什么。我的想法是，上面的这个 Lua 脚本监听并读取我在 C# 中从我的数据源动态读取的数据。

非常感谢你的帮助。这项工作是为我的学士学位而做的，我在这一点上被困了很长时间，我几乎没有想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:57:08.367

这一切都取决于 Nvidia 向用户公开的内容（就 API 和 Lua 基础库而言）。

假设它可用，您可以使用`io.read`从另一个源读取数据文件（例如 csv），然后自己将其解析到您的表中。如果您可以对文件进行预处理以具有有效的 Lua 语法（例如，前置 a `return {`，值以 分隔`,`，并以 a 结尾`}`，您可以直接使用 loadstring 加载字符串）。

如果他们允许，您可以使用外部库与 RS232、Excel、套接字等进行交互。

PS：这是 Lua 而不是 LUA（不是首字母缩写词，而是 Moon 的葡萄牙语名词；））

**编辑：示例 mkfifo**

所以在 Linux 中它是这样的：创建一个 fifo`mkfifo fff`并为其提供一些 echo ' '> fff 以防止 Lua 阻塞。

在 Lua 中：

```
fh=io.open('fff','rb')
while true do
    res = fh:read()
    if res then
        print(res)
    end
end 
```

无论 cat 进入 fff （例如`cat 10 > fff`）都会在 Lua 中出现。通过这种方式，您可以读出任何可用值并在每次运行函数时使用它们。

另一种选择是使用标准输入，但我不确定这个作曲家是否让你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-31T02:06:19.870

[我希望你的学士学位结果没问题，这个反应迟到了 1.5 年。：） 尽管如此：]

作为 UI Composer 团队的成员和 Lua 脚本编写者，我经常使用的一种技术，用于将外部数据和事件异步流式传输到运行时中，即使用[Lua Socket](http://w3.impa.br/~diego/software/luasocket/)库。我在它上面写了一个抽象层作为 UIC 行为。

```
-- Expected message structure:
-- "<numbytes>,<optionaltag>\n<bytesofmessage>"
-- e.g. "11,simple\nHello World"
-- e.g. "40,\nThis has no tag,\nbut does have a newline"

local ok,socket = pcall(require,'socket')
if not ok then
    output("Error loading socket: "..socket)
else
    local output = output or print
    local sscallbacks = {} -- indexed by simplesocket instance, then tag
    SimpleSocket = {}
    local SSMeta = {}
    SSMeta.__index=SSMeta

    function SimpleSocket:server(port,ip,timeout)
        return self:create('server',port,ip,timeout)
    end

    function SimpleSocket:client(port,ip,timeout)
        return self:create('client',port,ip,timeout)
    end

    function SimpleSocket:create(kind,port,ip,timeout)
        if not port    then port    = 51423 end
        if not ip      then ip      = '*'   end
        if not timeout then timeout = 10    end
        local ss = setmetatable({
            kind    = kind,
            ip      = ip,
            port    = port,
            timeout = timeout/1000,
            queue   = {}
        },SSMeta)
        sscallbacks[ss] = {}
        return ss
    end

    function SSMeta:destroy()
        if self.socket then self.socket:close() end
        callbacks[self] = nil
    end

    function SSMeta:onData(callback,tag)
        self:setCallback('handler',callback,tag)
    end

    function SSMeta:toEncode(callback,tag)
        self:setCallback('encoder',callback,tag)
    end

    function SSMeta:toDecode(callback,tag)
        self:setCallback('decoder',callback,tag)
    end

    function SSMeta:setCallback(type,callback,tag)
        if not tag then tag = "" end
        if not sscallbacks[self][tag] then sscallbacks[self][tag] = {} end
        sscallbacks[self][tag][type] = callback
    end

    function self:onUpdate()
        self:sendQueuedMessages()
        self:receiveMessages()
    end

    function SSMeta:createSocket()
        output("Creating new "..self.kind.." socket to "..self.ip..":"..self.port)
        if self.kind=='server' then
            self.socket = assert(socket.bind(self.ip,self.port))
            self.socket:settimeout(self.timeout)
        else
            self.socket = assert(socket.connect(self.ip,self.port))
        end
    end

    -- Attempts to send all messages from the queue
    function self:sendQueuedMessages()
        for ss,_ in pairs(sscallbacks) do
            while ss.queue[1] do
                if ss:sendMessage(message[1]) then
                    table.remove(ss.queue,1)
                else
                    -- don't attempt any later messages, since ordering may be important
                    return 
                end
            end
        end
    end

    function self:receiveMessages()
        for ss,callbacks in pairs(sscallbacks) do
            if ss.kind=='client' then
                if not ss.socket then ss:createSocket() end
                ss.socket:settimeout(0) -- non-blocking for first byte
                local char1, err = ss.socket:receive(1)
                ss.socket:settimeout(ss.timeout) -- go back to blocking
                if not char1 then
                    -- probably just timed out
                else
                    local header, err = ss.socket:receive('*l')
                    if not header then
                        output(err)
                    else
                        header = char1..header
                        local comma = header:find(',')
                        local bytes = tonumber(header:sub(1,comma-1))
                        local tag   = header:sub(comma+1)
                        local data,err = ss.socket:receive(bytes)
                        if not data then
                            output(err)
                        else
                            if callbacks[tag] and callbacks[tag].decoder then
                                data = callbacks[tag].decoder(data)
                            elseif callbacks[true] and callbacks[true].decoder then
                                data = callbacks[true].decoder(data)
                            end
                            if callbacks[tag] and callbacks[tag].handler then
                                callbacks[tag].handler(data)
                            elseif callbacks[true] and callbacks[true].handler then
                                callbacks[true].handler(data)
                            end
                        end
                    end
                end
            end
        end
    end

    function SSMeta:send(data,tag)
        return self:sendMessage(self:encodeMessage(data,tag))
    end

    function SSMeta:ensureSend(data,tag)
        local message = self:encodeMessage(data,tag)
        if not self:sendMessage(message) then
            table.insert(self.queue,message)
        end
    end

    -- Internal only; use send() or ensureSend()
    function SSMeta:sendMessage(formattedMessage)
        if not self.socket then self:createSocket() end
        if not self.client then self.client = self.socket:accept() end
        if self.client then
            local lastbyte,err = self.client:send(formattedMessage)
            if lastbyte then
                -- TODO: verify that all bytes were sent
                return true
            else
                output(err)
                self.client:close()
                self.client = nil
            end
        else
            -- No client connected before the timeout
        end
    end

    function SSMeta:encodeMessage(data,tag)
        data = tostring(data)
        local callbacks = sscallbacks[self]
        if callbacks[tag] and callbacks[tag].encoder then
            data = callbacks[tag].encoder(data)
        elseif callbacks[true] and callbacks[true].encoder then
            data = callbacks[true].encoder(data)
        end
        return tostring(#data)..","..(tag or "").."\n"..data
    end

end 
```

这允许多个不同的系统在同一个套接字上进行通信，使用不同的标记通信，并且可能使用不同的编码器/解码器来序列化/反序列化数据。

在接收端，例如这样使用：

```
local ss = require 'SimpleSocket'

local client = ss:client()
client:onData(function(d) print("Client got *: "..d) end,true) 
```