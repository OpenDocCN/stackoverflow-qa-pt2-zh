# StackOverflow 问答 15582000-15582999

# java - 格式化 FFPojoHelper 写入文件的日期文本

> ID：15582003
> 
> 赞同：0
> 
> 时间：2013-03-23T00:37:44.350
> 
> 标签：java, file-io

当我使用一个`Date`对象并将其写入文件时，`FFPojoHelper`它会被打印为`2112013`which mean `21 Jan 2013`。我想将文件写入为`01/21/2013`

```
FFPojoHelper ffpojo = FFPojoHelper.getInstance();
        for(MyClass DataLine != null) {
            String dataLine= ffpojo.parseToText(DataLine[i]);
            textFileWriter.write(dataLine);
            textFileWriter.newLine();
        } 
```

文档[https://github.com/ffpojo/ffpojo](https://github.com/ffpojo/ffpojo)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T01:56:16.533

您是否尝试过使用 DateDecorator？看看这个样本是否有帮助：

[http://grepcode.com/file/repo1.maven.org/maven2/com.github.ffpojo/ffpojo-samples/1.0/com/github/ffpojo/samples/PositionalRecordParsingWithDecoratorExample.java#PositionalRecordParsingWithDecoratorExample.DateDecorator](http://grepcode.com/file/repo1.maven.org/maven2/com.github.ffpojo/ffpojo-samples/1.0/com/github/ffpojo/samples/PositionalRecordParsingWithDecoratorExample.java#PositionalRecordParsingWithDecoratorExample.DateDecorator)

# perl - 使用 EV 为以后安排事件

> ID：15582012
> 
> 赞同：0
> 
> 时间：2013-03-23T00:39:16.103
> 
> 标签：perl, events, event-handling

我正在使用 EV 定期（每 5 分钟）查询我的“事件队列”表，并触发任何超过其“触发”时间的事件。这很好用。

但通常，触发时间将是未来几天或几周。因为我提前知道了触发时间，所以我应该能够减少我的 EV 循环的频率，但仍然会在请求的确切时间触发事件，而不必等到我的循环的下一次迭代。

有没有办法在 EV 中做到这一点？我想即时创建一个观察者会是解决方案吗？这是怎么做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T00:56:22.053

像下面这样的东西应该可以解决问题：

```
use constant DB_CHECK_PERIOD => 5*60;

sub handle_db_events {
   my ($w) = @_;

   while (1) {
      my $secs = ...get seconds to earliest unprocessed event from the db...;

      $secs //= DB_CHECK_PERIOD;
      if ($secs > 0) {
         $w->set($secs > DB_CHECK_PERIOD ? DB_CHECK_PERIOD : $secs, 0);
         return;
      }

      ... process events that have expired and delete them from the db ...;
   }
}

my $w = EV::timer(DB_CHECK_PERIOD, 0, \&handle_db_events);
handle_db_events($w); 
```

如果您无法从数据库中删除记录，您可以在记录中设置一个标志，说明它已被处理，或者您可以使用由记录 id 索引的哈希。

我假设`$w`作为第一个参数传递给回调。不行就调整。

# emacs - 如何使用 url-retrieve 在 Emacs 中下载 tar.gz 文件？

> ID：15582015
> 
> 赞同：1
> 
> 时间：2013-03-23T00:39:45.663
> 
> 标签：emacs, elisp

我正在使用 el-get 并未能 el-get-install color-theme。经过一番研究，我发现`color-theme-6.6.0.tar.gz`el-get 下载的文件不完整。使用 el-get下载的文件`124853`大小为 ，`124858`如果文件是由 wget 下载的，则大小为 。

然后我发现 el-get 正在使用 url-retrieve 来下载包。所以我在`*scratch*`缓冲区中评估了这段代码。

```
(url-retrieve
 "http://download.savannah.gnu.org/releases/color-theme/color-theme-6.6.0.tar.gz"
 (lambda (s)
   (write-file "/home/jxq/data/tmp"))) 
```

该文件`/home/jxq/data/tmp`现在包含 http 标头和正文。http header 的长度为`279`，整体大小为`125132`. 所以它检索到的 tar.gz 的文件大小是`124853`. 丢失的 5 个字节在哪里？

这是 url-retrieve 中的错误还是我使用不正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T10:41:32.217

在编写之前，您需要跳过 HTTP 标头（文档称它们为“MIME 标头”）：

```
(url-retrieve
 "http://download.savannah.gnu.org/releases/color-theme/color-theme-6.6.0.tar.gz"
 (lambda (s)
   (re-search-forward "\r?\n\r?\n")
   (write-region (point) (point-max) "/tmp/bla"))) 
```

此版本保存的内容与 Wget 相同。

# java - 当我点击android中的任何按钮时没有任何反应

> ID：15582016
> 
> 赞同：1
> 
> 时间：2013-03-23T00:40:01.420
> 
> 标签：java, android, eclipse

当我按下应用程序上的任何按钮时，该值不会出现在 edittext 上并且没有操作操作。我使用了另一个类似的[项目]：[http](http://android.okhelp.cz/dw/Calculator.apk) ://android.okhelp.cz/dw/Calculator.apk我改变了一些东西。原始项目可以正常工作 [http://android.okhelp.cz/calculator-open-source/](http://android.okhelp.cz/calculator-open-source/)

```
<?xml version="1.0" encoding="utf-8"?>
LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/LinearLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#000000"
android:orientation="vertical"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<LinearLayout
    android:id="@+id/linearLayout2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="fill_parent"
        android:layout_height="130dp"
        android:clickable="false"
        android:cursorVisible="false"
        android:gravity="right"
       />
</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="5dp"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button_sin"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="onClickListener_sin"
        android:clickable="true"
        android:text="sin" />

    <Button
        android:id="@+id/button_cos"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="onClickListener_cos"
        android:clickable="true"
        android:text="cos" />

    <Button
        android:id="@+id/button_del"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.40"
        android:onClick="onClickListenerReset"
        android:text="Delete" />

</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button_tan"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:onClick="onClickListener_tan"
        android:text="tan" />

    <Button
        android:id="@+id/button7"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:onClick="onClickListener7"
        android:text="7" />

    <Button
        android:id="@+id/button8"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:onClick="onClickListener8"
        android:text="8" />

    <Button
        android:id="@+id/button9"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1.00"
        android:onClick="onClickListener9"
        android:text="9" />

    <Button
        android:id="@+id/buttonDivide"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1.00"
        android:onClick="onClickListenerDivide"
        android:text="/" />
</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button_log"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:onClick="onClickListener_log"
        android:text="log" />

    <Button
        android:id="@+id/button4"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:onClick="onClickListener4"
        android:text="4" />

    <Button
        android:id="@+id/button5"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:onClick="onClickListener5"
        android:text="5" />

    <Button
        android:id="@+id/button6"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1.00"
        android:onClick="onClickListener6"
        android:text="6" />

    <Button
        android:id="@+id/buttonMultiply"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1.00"
        android:onClick="onClickListenerMultiply"
        android:text="*" />
</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button_bra1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:onClick="onClickListener_bra1"
        android:text="(" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:onClick="onClickListener1"
        android:text="1" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:onClick="onClickListener2"
        android:text="2" />

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1.00"
        android:onClick="onClickListener3"
        android:text="3" />

    <Button
        android:id="@+id/buttonMinus"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1.00"
        android:onClick="onClickListenerMinus"
        android:text="-" />
</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout3"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button_bra2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:onClick="onClickListener_bra2"
        android:text=")" />

    <Button
        android:id="@+id/buttonPoint"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:onClick="onClickListenerPoint"
        android:text="." />

    <Button
        android:id="@+id/button0"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:onClick="onClickListener0"
        android:text="0" />

    <Button
        android:id="@+id/buttonEqual"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:onClick="onClickListenerEqual"
        android:text="="
        android:textSize="15sp" />

    <Button
        android:id="@+id/buttonPlus"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:onClick="onClickListenerPlus"
        android:text="+"
        android:textSize="15dp" />
</LinearLayout> 
```

jave 文件

```
package calc.pack;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.os.Vibrator;
import android.util.Log;

import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class MainActivity extends Activity {
EditText editText;

Button button0,button1,button2,button3,
       button4,button5,button6,button7,button8,button9,buttonPlus,buttonMinus,buttonMultiply,
            buttonDivide,buttonEqual,buttonPoint,buttonDel,buttonReset,
            button_sin,button_cos,button_tan,button_del,button_bra1,button_bra2,button_reset;

String sum="",one,two,three,four,five,
                        six,seven,eight,nine,
                        zero,plus,minus,multiply,divide,equal,point,del,reset,bra1,bra2;

Integer countOne=0;

Float result=0f,result_mul=1f,result_div=1f;

int pressCount=1,sumZero,c,i;

char press;

String EditTextMsg;

Float floatEditTextMsg;

Double after_log,doubleEditTextMsg,afterSin,after_cos,after_tan,toRadian_doubleEditTextMsg;

Vibrator vibrator;
Bundle savedInstanceState;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    editText=(EditText)findViewById(R.id.editText1);

    button0=(Button)findViewById(R.id.button0);
    button1=(Button)findViewById(R.id.button1);
    button2=(Button)findViewById(R.id.button2);
    button3=(Button)findViewById(R.id.button3);
    button4=(Button)findViewById(R.id.button4);

    button5=(Button)findViewById(R.id.button5);
    button6=(Button)findViewById(R.id.button6);
    button7=(Button)findViewById(R.id.button7);
    button8=(Button)findViewById(R.id.button8);
    button9=(Button)findViewById(R.id.button9);

    buttonPlus=(Button)findViewById(R.id.buttonPlus);
    buttonMinus=(Button)findViewById(R.id.buttonMinus);
    buttonMultiply=(Button)findViewById(R.id.buttonMultiply);
    buttonDivide=(Button)findViewById(R.id.buttonDivide);
    buttonPoint=(Button)findViewById(R.id.buttonPoint);

    buttonEqual=(Button)findViewById(R.id.buttonEqual);

    button_sin=(Button)findViewById(R.id.button_sin);
    button_cos=(Button)findViewById(R.id.button_cos);
    button_tan=(Button)findViewById(R.id.button_tan);

    button_del=(Button)findViewById(R.id.button_del);

    vibrator = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE); 

    editText.setText(result.toString());

}
public void onClickListener0(View v)
{
    vibrator.vibrate(30);
    if(press=='=')
    {
        onClickListenerReset(buttonReset);
    }

    if(sum !="")
    {
        zero=(String)button0.getText();

        sum=sum+zero;
        editText.setText(sum);
    }
    else
    {
        sum="0";
        editText.setText("0");
    }
}

public void onClickListener1(View v)
{
    vibrator.vibrate(30);

    if(press=='=')
    {
        onClickListenerReset(buttonReset);
    }

    one=(String)button1.getText();
    sum=sum+one;

    editText.setText(sum);
}

public void onClickListener2(View v)
{
    vibrator.vibrate(30);

    if(press=='=')
    {
        onClickListenerReset(buttonReset);
    }

    if(press=='=')
    {
        onClickListenerEqual(buttonEqual);
    }

    two=(String)button2.getText();
    sum=sum+two;

    editText.setText(sum);
}

public void onClickListener3(View v)
{
    vibrator.vibrate(30);
    if(press=='=')
    {
        onClickListenerReset(buttonReset);
    }
    three=(String)button3.getText();
    sum=sum+three;

    editText.setText(sum);
}

public void onClickListener4(View v)
{
    vibrator.vibrate(30);

    if(press=='=')
    {
        onClickListenerReset(buttonReset);
    }

    four=(String)button4.getText();
    sum=sum+four;

    editText.setText(sum);
}

public void onClickListener5(View v)
{
    vibrator.vibrate(30);
    if(press=='=')
    {
        onClickListenerReset(buttonReset);
    }

    five=(String)button5.getText();
    sum=sum+five;

    editText.setText(sum);
}

public void onClickListener6(View v)
{
    vibrator.vibrate(30);
    if(press=='=')
    {
        onClickListenerReset(buttonReset);
    }

    six=(String)button6.getText();
    sum=sum+six;

    editText.setText(sum);
}

public void onClickListener7(View v)
{
    vibrator.vibrate(30);
    if(press=='=')
    {
        onClickListenerReset(buttonReset);
    }

    seven=(String)button7.getText();
    sum=sum+seven;

    editText.setText(sum);
}

public void onClickListener8(View v)
{
    vibrator.vibrate(30);
    if(press=='=')
    {
        onClickListenerReset(buttonReset);
    }

    eight=(String)button8.getText();
    sum=sum+eight;

    editText.setText(sum);
}

public void onClickListener9(View v)
{
    vibrator.vibrate(30);
    if(press=='=')
    {
        onClickListenerReset(buttonReset);
    }

    nine=(String)button9.getText();
    sum=sum+nine;

    editText.setText(sum);
}

public void onClickListenerPlus(View v)
{
    vibrator.vibrate(30);

    if(press=='-')
    {
        onClickListenerEqual(buttonMinus);
    }
    else if(press=='*')
    {
        onClickListenerEqual(buttonMultiply);
    }

    else if(press=='/')
    {
        onClickListenerEqual(buttonDivide);
    }

    press='+';

    if(sum != "")
    {
        result=result+Float.parseFloat(editText.getText().toString());

        editText.setText(result.toString());

        result_mul=result;

        result_div=result;

        sum="";            
    }
    else
    {
        editText.setText(result.toString());

        result_mul=result;

        result_div=result;

        sum="";
    }

}

public void onClickListenerMinus(View v)
{
    vibrator.vibrate(30);
    if(press=='+')
    {
        onClickListenerEqual(buttonPlus);
    }
    else if(press=='*')
    {
        onClickListenerEqual(buttonMultiply);
    }
    else if(press=='/')
    {
        onClickListenerEqual(buttonDivide);
    }

    press='-';

    EditTextMsg= editText.getText().toString(); 
    floatEditTextMsg=Float.parseFloat(EditTextMsg);

    if(sum==""  && result==0)
    {
        sum=sum+'-';
        //Log.d("sum=","minus press");
    }
    else if(sum != "")
    {
        if(result==0)
        {
            result=Float.parseFloat(sum)-result;

            editText.setText(result.toString());

            result_mul=result;

            result_div=result;

            sum="";
        }

        else
        {
            result=result-Float.parseFloat(sum);

            editText.setText(result.toString());

            result_mul=result;

            result_div=result;

            sum="";
        }
    }

}

public void onClickListenerMultiply(View v)
{
    vibrator.vibrate(30);
    if(press=='/')
    {
        onClickListenerEqual(buttonDivide);
    }
    else if(press=='+')
    {
        onClickListenerEqual(buttonPlus);
    }

    else if(press=='-')
    {
        onClickListenerEqual(buttonMinus);
    }

    press='*';

    EditTextMsg= editText.getText().toString(); 
    floatEditTextMsg=Float.parseFloat(EditTextMsg);

    if(sum !="")
    {
        result_mul=result_mul * floatEditTextMsg; 

        result=result_mul;

        result_div=result_mul;

        editText.setText(result_mul.toString());

        sum="";
    }
    else
    {
        editText.setText(EditTextMsg);

        //result_mul=result_mul * Float.parseFloat(sum);

        //result=result_mul;

        sum="";
    }

}

public void onClickListenerDivide(View v)
{
    vibrator.vibrate(30);
    if(press=='+')
    {
        onClickListenerEqual(buttonPlus);
    }

    else if(press=='-')
    {
        onClickListenerEqual(buttonMinus);
    }

    else if(press=='*')
    {
        onClickListenerEqual(buttonMultiply);
    }

    press='/';

    EditTextMsg= editText.getText().toString(); 
    floatEditTextMsg=Float.parseFloat(EditTextMsg);

    if(sum !="" && result_div==1)
    {
        //int c=0;

        if(c==0)
        {
            result_div=floatEditTextMsg/result_div;  
            Log.d("if if result_div=", result_div.toString());
            c++;
        }
        else
        {
            result_div=result_div/floatEditTextMsg; 
            Log.d("if else result_div=", result_div.toString());
        }

        result=result_div;
        result_mul=result_div;

        editText.setText(result_div.toString());

        sum="";
    }
    else if(sum !="" && result_div !=1)
    {
        result_div=result_div/floatEditTextMsg; 

        Log.d("else if result_div=", result_div.toString());

        result=result_div;

        result_mul=result_div;

        editText.setText(result_div.toString());

        sum="";
    }
    else
    {
        editText.setText(EditTextMsg);

        sum="";
    }
}

public void onClickListenerPoint(View v)
{
    vibrator.vibrate(30);

   int error=0;

    if(sum !=null)
    {
        for(int i=0;i<sum.length();i++)
        {
            if(sum.charAt(i)=='.')
            {
                error=1;
                break;
            }
        }

    }

    if(error==0)
    {
        if(sum==null)
        {
            sum=sum+"0.";
        }
        else
        {
            sum=sum+".";
        }
    }

    editText.setText(sum);
}

public void onClickListenerEqual(View v)
{
    vibrator.vibrate(30);

    if(press=='+') 
    {
        onClickListenerPlus(buttonPlus);
        //msg1= editText.getText().toString(); 
        //floatMsg=Float.parseFloat(msg1);
    }
    else if(press=='-') 
    {
        onClickListenerMinus(buttonMinus);
    }
    else if(press=='*') 
    {
        onClickListenerMultiply(buttonMultiply);
    }
    else if(press=='/')
    {
        onClickListenerDivide(buttonDivide);
    }

    press='=';

}

public void onClickListenerReset(View v)
{
    vibrator.vibrate(30);

    sum="";
    countOne=0;//result=0;

    result=0f;
    result_mul=1f;
    result_div=1f;
    press=' ';
    c=0;

    editText.setText(result.toString());
}

public void onClickListener_sin(View v)
{
    vibrator.vibrate(30);

    EditTextMsg= editText.getText().toString(); 
    doubleEditTextMsg=Double.parseDouble(EditTextMsg);//degree

    toRadian_doubleEditTextMsg=Math.toRadians(doubleEditTextMsg);

    afterSin =Math.sin(toRadian_doubleEditTextMsg);

    editText.setText(afterSin.toString());

    EditTextMsg=editText.getText().toString();
    result=Float.parseFloat(EditTextMsg);

    result_mul=Float.parseFloat(EditTextMsg);

    result_div=Float.parseFloat(EditTextMsg);

    sum="";

}

public void onClickListener_cos(View v)
{
    vibrator.vibrate(30);
    EditTextMsg= editText.getText().toString(); 
    doubleEditTextMsg=Double.parseDouble(EditTextMsg);//degree

    toRadian_doubleEditTextMsg=Math.toRadians(doubleEditTextMsg);

    after_cos =Math.cos(toRadian_doubleEditTextMsg);

    editText.setText(after_cos.toString());

    EditTextMsg=editText.getText().toString();
    result=Float.parseFloat(EditTextMsg);

    result_mul=Float.parseFloat(EditTextMsg);

    result_div=Float.parseFloat(EditTextMsg);

    sum="";

}

public void onClickListener_tan(View v)
{
    vibrator.vibrate(30);

    EditTextMsg= editText.getText().toString(); 
    doubleEditTextMsg=Double.parseDouble(EditTextMsg);//degree

    toRadian_doubleEditTextMsg=Math.toRadians(doubleEditTextMsg);

    after_tan =Math.tan(toRadian_doubleEditTextMsg);

    editText.setText(after_tan.toString());

    EditTextMsg=editText.getText().toString();
    result=Float.parseFloat(EditTextMsg);

    result_mul=Float.parseFloat(EditTextMsg);

    result_div=Float.parseFloat(EditTextMsg);

    sum="";
}
public void onClickListener_log(View v)
{

    vibrator.vibrate(30);

   EditTextMsg= editText.getText().toString(); 
   doubleEditTextMsg=Double.parseDouble(EditTextMsg);//degree

   after_log =Math.log10(doubleEditTextMsg);

   editText.setText(after_log.toString());

   EditTextMsg=editText.getText().toString();
   result=Float.parseFloat(EditTextMsg);

   result_mul=Float.parseFloat(EditTextMsg);

   result_div=Float.parseFloat(EditTextMsg);

   sum="";

}

public void onClickListener_bra1(View v)
{

   vibrator.vibrate(30);

    bra1=(String)button_bra1.getText();

    sum=sum+"(";
    editText.setText(sum);

}

public void onClickListener_bra2(View v)
{

    bra2=(String)button_bra2.getText();

    sum=sum+")";
    editText.setText(sum);
} 

 public void onClickListener_del(View v)
 {
     vibrator.vibrate(30);
     if(sum !="")
     {
         StringBuilder stringBuilder=new StringBuilder(80);

         stringBuilder.append(sum);

         sum=stringBuilder.deleteCharAt(stringBuilder.length()-1).toString();

         editText.setText(sum);
     }

 }

} 
```

没有 LogCat 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T05:28:20.377

您可以为您拥有的类实现 onClickListener，以便处理单击事件的常用方法，然后您必须将按钮注册到 button1.setOnClickListener(this)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T06:01:28.700

您必须将 setonclickListner() 方法放入 button.eg 的对象

```
 button0.setOnClickListner(); 
```

# c# - 使用 HtmlAgilityPack 在 C# 中读取表格

> ID：15582017
> 
> 赞同：1
> 
> 时间：2013-03-23T00:40:04.973
> 
> 标签：c#, html, html-agility-pack

我已经尝试了很长时间，但这是我的情况；

我朋友的 Web 应用程序使用非常简单的 HTML 运行一个网站来生成图表数据。我想从该页面上的表中获取某些值，因为他需要将此信息存储到数据库中。

所以这是 HTML 表格的一部分；

```
...
<tr>
    <td width=30 align=center bgcolor=#006699 class=W><font color=white>1</font></td>
    <td width=50 bgcolor=#FFFFFF align=center>7387</td>

    <td width=30 height=25 align=center bgcolor=#006699 class=W><font color=white>2</font></td>
    <td width=50 bgcolor=#FFFFFF align=center>2881</td>

    <td width=30 height=25 align=center bgcolor=#006699 class=W><font color=white>3</font></td>
    <td width=50 bgcolor=#FFFFFF align=center>8782</td>

    <td width=30 height=25 align=center bgcolor=#006699 class=W><font color=white>4</font></td>
    <td width=50 bgcolor=#FFFFFF align=center>5297</td>

    <td width=30 height=25 align=center bgcolor=#006699 class=W><font color=white>5</font></td>
    <td width=50 bgcolor=#FFFFFF align=center>749</td>
</tr>
<tr>
    <td align=center bgcolor=#006699 class=W><font color=white>6</font></td>
    <td width=50 bgcolor=#FFFFFF align=center>3136</td>

    <td height=25 align=center bgcolor=#006699 class=W><font color=white>7</font></td>
    <td width=50 bgcolor=#FFFFFF align=center>8768</td>

    <td height=25 align=center bgcolor=#006699 class=W><font color=white>8</font></td>
    <td width=50 bgcolor=#FFFFFF align=center>9548</td>

    <td height=25 align=center bgcolor=#006699 class=W><font color=white>9</font></td>
    <td width=50 bgcolor=#FFFFFF align=center>6565</td>

    <td height=25 align=center bgcolor=#006699 class=W><font color=white>10</font></td>
    <td width=50 bgcolor=#FFFFFF align=center>142</td>
</tr>
... 
```

我想要实现的是；

*   我得到两个数字 - 例如 1 和 8。
*   我的应用程序检查页面的 HTML 并选择`td`包含数字的两个（如上所示）。
*   然后，我必须得到 NEXT 的值`td`。

这个的输出是`1=7387`and `8=9548`。`td`在尝试找到包含给定数字的两个后，我很快就卡住了。

到目前为止我的 C# 代码；

```
using (WebClient webClient = new WebClient())
{
    string completeHTMLCode = webClient.DownloadString("someUrl.php?getChartData=" + chartId);

    HtmlDocument doc = new HtmlDocument();
    doc.LoadHtml(completeHTMLCode);

    foreach (HtmlNode link in doc.DocumentNode.SelectNodes("//td[@...]"))
    {

    }
 } 
```

我在这里尝试一些不可能的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T01:16:33.537

我制作了一个快速的 CsQuery 示例如何完成此操作。

```
string file = File.ReadAllText("a.html"); // gets the html

CQ dom = file; // initializes csquery
CQ td = dom["td"]; // get all td files

td.Each((i,e) => { // go through each
    if (e.FirstChild != null) // if element has child (font)
    {
        if (e.FirstChild.NodeType != NodeType.TEXT_NODE) // ignore text node
        {
            if (e.FirstChild.InnerText == "1") // if number is 1
            {
                Console.WriteLine(e.NextElementSibling.InnerText); // output the text
            }
            if (e.FirstChild.InnerText == "8") // etc etc
            {
                Console.WriteLine(e.NextElementSibling.InnerText);
            }
        }
    }

});

Console.ReadKey(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T01:15:16.903

您可以将其解析为字典并以这种方式查找。我可以想出一些更好的方法来解析它，但这就是你想要的。

```
 void Main()
{
    string html = @"<tr>
    <td width=30 align=center bgcolor=#006699 class=W><font color=white>1</font></td>
    <td width=50 bgcolor=#FFFFFF align=center>7387</td>

    <td width=30 height=25 align=center bgcolor=#006699 class=W><font color=white>2</font></td>
    <td width=50 bgcolor=#FFFFFF align=center>2881</td>

    <td width=30 height=25 align=center bgcolor=#006699 class=W><font color=white>3</font></td>
    <td width=50 bgcolor=#FFFFFF align=center>8782</td>

    <td width=30 height=25 align=center bgcolor=#006699 class=W><font color=white>4</font></td>
    <td width=50 bgcolor=#FFFFFF align=center>5297</td>

    <td width=30 height=25 align=center bgcolor=#006699 class=W><font color=white>5</font></td>
    <td width=50 bgcolor=#FFFFFF align=center>749</td>
</tr>
<tr>
    <td align=center bgcolor=#006699 class=W><font color=white>6</font></td>
    <td width=50 bgcolor=#FFFFFF align=center>3136</td>

    <td height=25 align=center bgcolor=#006699 class=W><font color=white>7</font></td>
    <td width=50 bgcolor=#FFFFFF align=center>8768</td>

    <td height=25 align=center bgcolor=#006699 class=W><font color=white>8</font></td>
    <td width=50 bgcolor=#FFFFFF align=center>9548</td>

    <td height=25 align=center bgcolor=#006699 class=W><font color=white>9</font></td>
    <td width=50 bgcolor=#FFFFFF align=center>6565</td>

    <td height=25 align=center bgcolor=#006699 class=W><font color=white>10</font></td>
    <td width=50 bgcolor=#FFFFFF align=center>142</td>
</tr>";

    HtmlDocument doc = new HtmlDocument();
    doc.LoadHtml(html);

    int[] nodes = doc.DocumentNode.SelectNodes("//td").Select ( dn =>
        int.Parse(dn.InnerHtml.Contains("font") ? dn.FirstChild.InnerHtml : dn.InnerHtml)
        ).ToArray();

    Dictionary<int,int> d = new Dictionary<int,int>();
    for (int i = 0; i < nodes.Length; i+=2)
        d.Add(nodes[i],nodes[i+1]);

    d.Dump();
    d[1].Dump();
    d[8].Dump();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T01:29:21.973

好吧，如果你只有这个表数据可以使用它可以使用 HTMLAgilityPack 解析。

我要做的第一件事是取消 foreach 来遍历 tds，我会使用计数器，然后使用计数器 id 作为索引器。代码可能看起来像这样

```
for(int i = 1;i <= selectednodes.Count();i++)
{
  if(selectednodes[i-1].InnerHtml.Contains("font")
  {
   if(selectednodes[i-1].FirstChild.Value == "1" || selectednodes[i-1].FirstChild.Value == "8")
   {
      myNodecollection.Add(selectednodes[i])
   }
  }
} 
```

# javascript - 如何在javascript中的一行输出

> ID：15582022
> 
> 赞同：0
> 
> 时间：2013-03-23T00:40:38.030
> 
> 标签：javascript

我知道这可能很简单，但我试图`/s`在我的单词之间留出空格。`document.write('You have been alive' + */s userMsDays /s* + 'days');`

我试过 +''+ 将代码输出到一行`document.write('<li><font color="red">emotional:</font></li>' + *''+ bioEmot +''*);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T00:41:27.677

您只需在字符串中输入空格：

```
document.write('You have been alive ' + userMsDays + ' days'); 
```

# sql - 多对多关系中的外键约束

> ID：15582023
> 
> 赞同：9
> 
> 时间：2013-03-23T00:40:38.907
> 
> 标签：sql, sqlite, postgresql, database-design, many-to-many

## 语境

我们正在建立一个介绍博客。到数据库课程项目。

在我们的博客中，我们希望能够设置`Labels`. 不能单独存在，它们只有在与 a 相关时才会`Posts`存在。这样，不被任何人使用的不应该留在数据库中。`Labels``Posts``Labels``Posts`

多单`Label`可以属于一个单`Post`，多单`Post`可以使用一个`Label`。

我们同时使用 SQLite3（本地/测试）和 PostgreSQL（部署）。

## 执行

这是我们用来创建这两个表的 SQL（SQLite3 风格）以及关系表：

### 帖子

```
CREATE TABLE IF NOT EXISTS Posts(
   id INTEGER PRIMARY KEY AUTOINCREMENT,
   authorId INTEGER,
   title VARCHAR(255),
   content TEXT,
   imageURL VARCHAR(255),
   date DATETIME,
   FOREIGN KEY (authorId) REFERENCES Authors(id) ON DELETE SET NULL
) 
```

### 标签

```
CREATE TABLE IF NOT EXISTS Labels(
   id INTEGER PRIMARY KEY AUTOINCREMENT,
   name VARCHAR(255) UNIQUE,
   -- This is not working:
   FOREIGN KEY (id) REFERENCES LabelPosts(labelId) ON DELETE CASCADE 
) 
```

**LabelPosts**`Post` （ [1..*] -- *之间的关系`Label`）

```
CREATE TABLE IF NOT EXISTS LabelPosts(
    postId INTEGER,
    labelId INTEGER,
    PRIMARY KEY (postId, labelId),
    FOREIGN KEY (postId) REFERENCES Posts(id) ON DELETE CASCADE
) 
```

## 问题

*   使用 SQLite3，`Labels`当我从表中删除对它的所有引用时，不会从数据库中删除`LabelPosts`。我认为由于 Postgres 给出的原因，尽管 SQLite 在没有警告的情况下接受了该表。

*   PostgreSQL 抱怨这`labelId`不是唯一的`LabelPosts`，这是正确的，也是必需的，因为它是多对多的：

> pq: S:"ERROR" R:"transformFkeyCheckAttrs" L:"6511" C:"42830" F:"tablecmds.c"
> M:"没有唯一约束匹配给定键的引用表\"labelposts\""

所以我明白我做错了约束。但是我不知道如何正确地做到这一点。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-23T01:46:09.183

> 我们同时使用 SQLite3（本地/测试）和 PostgreSQL（部署）。

这是在自找麻烦。您将继续遇到轻微的不兼容问题。或者直到很久以后，当损坏完成时才注意到它们。**不要这样做。**也可以在本地使用 PostgreSQL。大多数操作系统都可以免费使用它。对于参与“数据库课程项目”的人来说，这是一个令人惊讶的愚蠢行为。有关的：

*   [SQLite3“LIKE”或PostgreSQL“ILIKE”的通用Ruby解决方案？](https://stackoverflow.com/questions/11249059/generic-ruby-solution-for-sqlite3-like-or-postgresql-ilike)

其他建议：

*   正如[@Priidu 在评论中提到的那样](https://stackoverflow.com/questions/15582023/foreign-key-contraints-in-many-to-many-relationships#comment22091625_15582023)，您的外键约束是向后的。这没有争议，他们**完全错了**。

*   在 PostgreSQL 中使用`serial`or`IDENTITY`列（Postgres 10+）而不是 SQLite `AUTOINCREMENT`。看：

    *   [自动递增表列](https://stackoverflow.com/questions/9875223/auto-increment-sql-function/9875517#9875517)
*   使用[`timestamp`（或`timestamptz`）](https://www.postgresql.org/docs/current/datatype-datetime.html)代替`datetime`。

*   不要使用大小写混合的标识符。

    *   [PostgreSQL 触发异常](https://stackoverflow.com/questions/9831377/postgresql-trigger-exception/10001394#10001394)

    *   [PostgreSQL 列名是否区分大小写？](https://stackoverflow.com/questions/20878932/are-postgresql-column-names-case-sensitive/20880247#20880247)

*   不要使用非描述性的列名，例如`id`. 曾经。这是半智者中间件和 ORM 引入的反模式。当您加入几个表时，您最终会得到 name 的多个列`id`。这是积极的伤害。

*   有许多命名风格，但大多数人都同意最好将单数术语用作表名。它更短，至少是直观/合乎逻辑的。`label`，不是`labels`。

所有东西放在一起，它可能看起来像这样：

```
CREATE TABLE IF NOT EXISTS post (
   post_id   serial PRIMARY KEY
 , author_id integer
 , title     text
 , content   text
 , image_url text
 , date      timestamp
);

CREATE TABLE IF NOT EXISTS label (
   label_id  serial PRIMARY KEY
 , name      text UNIQUE
);

CREATE TABLE IF NOT EXISTS label_post(
    post_id  integer REFERENCES post(post_id) ON UPDATE CASCADE ON DELETE CASCADE
  , label_id integer REFERENCES label(label_id) ON UPDATE CASCADE ON DELETE CASCADE
  , PRIMARY KEY (post_id, label_id)
); 
```

### 扳机

要删除未使用的标签，请实现**触发器**。我提供了另一个版本，因为我[对@Priidu 提供的版本不满意](https://stackoverflow.com/a/15582391/939860)：

```
CREATE OR REPLACE FUNCTION f_trg_kill_orphaned_label() 
  RETURNS trigger
  LANGUAGE plpgsql AS
$func$
BEGIN
   DELETE FROM label l
   WHERE  l.label_id = OLD.label_id
   AND    NOT EXISTS (
      SELECT 1 FROM label_post lp
      WHERE  lp.label_id = OLD.label_id
      );
END
$func$; 
```

*   触发器*函数*必须在触发器*之前**创建*。

**   一个简单的`DELETE`命令就可以完成这项工作。不需要第二次查询 - 特别是 no `count(*)`。`EXISTS`更便宜。

    *   语言名称周围的单引号是可以接受的，但它确实是一个标识符，所以省略废话：`LANGUAGE plpgsql`* 

 *```
CREATE TRIGGER label_post_delaft_kill_orphaned_label
AFTER DELETE ON label_post
FOR EACH ROW EXECUTE PROCEDURE f_trg_kill_orphaned_label(); 
```

PostgreSQL 中还没有`CREATE OR REPLACE TRIGGER`。[只是`CREATE TRIGGER`](https://www.postgresql.org/docs/current/sql-createtrigger.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T01:32:39.433

实现您寻求的行为（从数据库中删除未使用的标签）的一种方法是使用触发器。

您可以尝试编写如下内容：

```
CREATE OR REPLACE TRIGGER tr_LabelPosts_chk_no_more_associated_posts 
AFTER DELETE ON LabelPosts 
FOR EACH ROW 
EXECUTE PROCEDURE f_LabelPosts_chk_no_more_associated_posts();

CREATE OR REPLACE FUNCTION f_LabelPosts_chk_no_more_associated_posts() 
RETURNS TRIGGER AS $$
DECLARE
    var_associated_post_count INTEGER;
BEGIN
    SELECT Count(*) AS associated_post_count INTO var_associated_post_count FROM LabelPosts WHERE labelId = OLD.labelId;
    IF(var_associated_post_count = 0) THEN
        DELETE FROM Labels WHERE labelId = OLD.labelId;
    END IF;
END
$$ LANGUAGE 'plpgsql'; 
```

基本上，这里发生的是：

1.  从表中删除一行`Posts`。
2.  删除将级联到所有关联的行`LabelPosts`（由于您的外键约束）。
3.  在触发器中的每一行删除后被`LabelPosts`激活，这反过来又调用 PostgreSQL 函数。
4.  该功能检查是否有任何其他与相关帖子相关的帖子`labelId`。如果是这样，那么它会在没有任何进一步修改的情况下完成。但是，如果关系表中没有任何其他行，则标签不会在其他地方使用，因此可以删除。
5.  该函数对表执行删除 DML `Labels`，有效地删除（现在）未使用的标签。

显然命名不是最好的，而且其中肯定有大量的语法错误，所以请参阅[此处](http://www.postgresql.org/docs/9.1/static/sql-createtrigger.html)和[此处](http://www.postgresql.org/docs/9.1/static/sql-createfunction.html)了解更多信息。可能有更好的方法来解决这个问题，但是目前我想不出一种不会破坏漂亮的通用表结构的快速方法。

尽管记住了——用触发器使数据库负担过重通常不是一个好习惯。它使每个关联的查询/语句运行速度变慢，也使管理变得更加困难。（有时您需要禁用触发器才能执行某些 DML 操作等，具体取决于触发器的性质）。*

# magento - 从 Magento 自定义模块中的 2 个表访问数据

> ID：15582024
> 
> 赞同：5
> 
> 时间：2013-03-23T00:40:40.373
> 
> 标签：magento, model

我需要一些帮助。我在 magento 中创建了一个需要与多个表交互的自定义​​模块。

我已经使用以下内容来获取表名

```
 <entities>
     <support1>
       <table>table1</table>
     </support1>
     <support2>
       <table>table2</table>
     </support2>   
     <support3>
       <table>table3</table>
     </support3>      
  </entities> 
```

然后我将以下内容添加到我的模型中

```
 public function _construct()
 {
     parent::_construct();
     $this->_init('support/support1');
     $this->_init('support/support2');
     $this->_init('support/support3');
 } 
```

在 mysql4 文件夹中，我有...

```
 public function _construct()
 {
     $this->_init('support/support1', 'ticket_id');
     $this->_init('support/support2', 'dept_id');
     $this->_init('support/support3', 'priority_id');
 } 
```

在 Collection.php 我有...

```
public function _construct()
 {
     parent::_construct();
     $this->_init('support/support1');
     $this->_init('support/support2');
     $this->_init('support/support3');
 } 
```

所以使用

```
$collection = Mage::getModel('support/support')->getCollection(); 
```

我如何定义对 support1 或 support2 等的访问权限。我尝试过使用...

```
$collection = Mage::getModel('support/support1')->getCollection(); 
```

和

```
$collection = Mage::getModel('support/support')->getCollection('support1'); 
```

但都失败了，这应该如何工作？

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-23T04:30:04.517

Magento 没有“一个模块，一个数据类”结构。相反，单个模块可能包含**许多**不同的模型。每个模型类访问一个表。

因此，您的代码生成工具为您提供了三个类，例如

```
Package_Support_Model_Support                             //model
Package_Support_Model_Resource_Mysql4_Support             //model resource
Package_Support_Model_Resource_Mysql4_Support_Collection  //collection 
```

这三个类构成了 Magento 中的一个模型。

所以如果你想要 support1，你还需要三个类

```
Package_Support_Model_Support1                             //model
Package_Support_Model_Resource_Mysql4_Support1             //model resource
Package_Support_Model_Resource_Mysql4_Support_Collection1  //collection 
```

这将使

```
Mage::getModel('support/support1'); 
```

上面的代码示例从名为**support1**的**支持模块中****获取****模型**。

 ****对于单个 StackOverflow 答案来说，细节太多了，但是如果您需要更多帮助，这是[我的一篇较早的文章，](http://alanstorm.com/magento_models_orm)其中涵盖了在没有代码创建工具的情况下从头开始创建模型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T01:27:59.163

尝试创建以下文件夹结构并根据需要更新每个文件的类定义

```
|-/Model
|---Support1.php
|---Support2.php
|---Support3.php
|------Mysql4
|--------Support1.php
|--------Support1
|----------Collection.php
|--------Support2.php
|--------Support2
|----------Collection.php
|--------Support3.php
|--------Support3
|----------Collection.php

class <CompanyName>_<ModuelName>_Model_Support[x] extends Mage_Core_Model_Abstract

class <CompanyName>_<ModuelName>_Model_Mysql4_Support[x] extends Mage_Core_Model_Mysql4_Abstract

class <CompanyName>_<ModuelName>_Model_Mysql4_Support[x]_Collection extends Mage_Core_Model_Mysql4_Collection_Abstract 
```****

# cdi - 当 bean 类实现还扩展了某些参数化接口的参数化接口时，CDI bean 类型解析问题

> ID：15582027
> 
> 赞同：2
> 
> 时间：2013-03-23T00:41:02.627
> 
> 标签：cdi, weld, parameterized-types

鉴于我缺乏解释问题的词汇，我通过一个重现失败并帮助查找原因的示例来展示它：

```
public interface BaseType<P> {}
public interface DerivedType<T> extends BaseType<T> {}

public interface SomeType1 {}
public interface SomeType2 {}

@Dependent
public static class BeanClass1 implements DerivedType<SomeType1> {}

@Dependent
public static class BeanClass2 implements DerivedType<SomeType2> {}

@ApplicationScoped
public static class Test implements Serializable {

    @Inject
    private BaseType<SomeType1> field; // if not commented throws following exception during deployment: org.jboss.weld.exceptions.DeploymentException: WELD-001409 Ambiguous dependencies for type [BaseType<SomeType1>] with qualifiers [@Default] at injection point [[field] @Inject private Test.field]. Possible dependencies [[Managed Bean [class BeanClass2] with qualifiers [@Any @Default], Managed Bean [class BeanClass1] with qualifiers [@Any @Default]]]

    @Inject
    private Instance<BaseType<SomeType1>> instance;

    @Inject
    private BeanManager bm;

    @PostConstruct
    private void postConstruct() {
        // This block outputs two bean classes and it should be only one:
        // beanClass: BeanClass1@11be5bab
        // beanClass: BeanClass2@764a72e9
        {
            Iterator<BaseType<SomeType1>> iterator = instance.iterator();
            while (iterator.hasNext()) {
                System.out.println("beanClass: " + iterator.next().toString());
        }
    }

        // And this block outputs:
        //
        // bean: Managed Bean [class BeanClass1] with qualifiers [@Any @Default]
        // beanTypes:
        //  - class BeanClass1
        //  - DerivedType<SomeType1>
        //  - class java.lang.Object
        //  - BaseType<T>
        //
        // bean: Managed Bean [class BeanClass2] with qualifiers [@Any @Default]
        // beanTypes:
        //  - DerivedType<SomeType2>
        //  - class java.lang.Object
        //  - class BeanClass2
        //  - BaseType<T>
        {
            Set<Bean<?>> beans = bm.getBeans(new ParameterizedTypeImpl(BaseType.class, new Type[] { SomeType1.class }, null));
            for (Bean<?> bean : beans) {
                System.out.println("\nbean: " + bean+"\nbeanTypes: ");
                for (Type beanType : bean.getTypes()) {
                    System.out.println(" - " + beanType);
                }
            }

            bm.resolve(beans); // if not commeted throws an AmbiguousResolutionException
        }
    }
} 
```

第二个块显示了 bean 类的 bean 类型集`BeanClass1`，`BeanClass2`根据`Weld`. 在那里我们发现 bean types set 包含 type`BaseType<T>`而不是`BaseType<SomeType1>`or `BaseType<SomeType2>`。

所以，记住`BeanClass2`的间接接口对应的bean类型有类型变量而不是实际的类型参数。因此，根据[本规范](http://docs.jboss.org/cdi/spec/1.0/html/injectionelresolution.html#assignableparameters)的最后一点， a被错误地认为可分配给。`BaseType<P>``Weld``T``SomeType2``BeanClass2``BaseType<SomeType1>`

这是期望的行为还是错误？有解决方法吗？是否在新`Weld`版本中修复。

测试在使用 maven 工件 org.jboss.as:jboss-as-weld:7.1.1 的 JBoss AS 7.1.1 上执行

编辑：我认为这个问题的原因不是第一个答案建议的类型擦除（它已被删除），而是`Weld`. 生成 bean 类型所需的所有信息在运行时都可用。我猜这个错误是当`Weld`通过反射生成bean类的bean类型时。类型变量解析应该是递归的，显然不是。

我确信生成间接接口的 bean 类型所需的信息在运行时可用，因为我制作并测试了一个使用库完成此任务的方法 - 几年前我为内存高效的 java 序列化程序制作了 - 幸运的是它有一个函数这正是我们需要的：`Type`为 java 类的每个祖先生成/获取实例，递归解析类型变量。我试图将涉及的方法放在这里，但粘贴代码时出现格式问题；图书馆很长而且记录不充分的事实让我有理由放弃。

至少，为了说明如何解析间接接口的类型变量的本质，我编写了以下代码。它仅适用于特定类，但可以通过一些努力进行概括：

```
public static Set<Type> getActualInterfacesOfBeanClass1() {
    Set<Type> actualInterfaces = new HashSet<>();

    ParameterizedType directInterface = (ParameterizedType) BeanClass1.class.getGenericInterfaces()[0]; // = DerivedType<SomeType1>  ; assumes only one interface is extended
    actualInterfaces.add(directInterface);

    // because ParameterizedType doesn't have a method like Class.getGenericInterfaces(), we have to do it by hand
    Type indirectInterface; // = BaseType<SomeType1>
    {
        Class<?> directInterfaceRaw = (Class<?>) directInterface.getRawType(); // = DerivedType<T>
        Map<String,Type> resolutionMap = new HashMap<>(); // = { T -> SomeType1 }
        for( int i=0; i<directInterfaceRaw.getTypeParameters().length;++i) {
            resolutionMap.put(directInterfaceRaw.getTypeParameters()[i].getName(),directInterface.getActualTypeArguments()[i]);
        }

        ParameterizedType indirectInterfaceUnresolved = (ParameterizedType) directInterfaceRaw.getGenericInterfaces()[0]; // = BaseType<T> ;  assumes only one interface is extended
        ArrayList<Type> resolvedParameters = new ArrayList<>(); // = { SomeType1 }
        for(Type param : indirectInterfaceUnresolved.getActualTypeArguments()) {
            Type resolvedParam;
            if( param instanceof TypeVariable) {
                resolvedParam = resolutionMap.get(((TypeVariable<?>)param).getName());
            } else {
                resolvedParam = param;
            }
            resolvedParameters.add(resolvedParam);
        }
        indirectInterface = new ParameterizedTypeImpl(indirectInterfaceUnresolved.getRawType(), resolvedParameters.toArray(new Type[resolvedParameters.size()]),indirectInterfaceUnresolved.getOwnerType());
    }
    actualInterfaces.add(indirectInterface);

    return actualInterfaces;
} 
```

我希望这避免相信类型擦除是导致此问题的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T07:40:16.673

我认为这是一个限制。

如果我做对了，您的目标是通过注入和/或生成您的泛型类型来使 CDI 与泛型一起使用。

我前段时间做过同样的事情，发现这是Java的限制。由于 Java 使用[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)来实现泛型，因此 CDI 无法正确处理泛型注入。

最后，你发现你有`BaseType<T>`，但由于这个限制，CDI 只能注入具体类型，比如`BaseType<SomeType1>`.

检查我的情况，我认为这有点简单但原理相同：

**界面**

```
public interface Persistable implements Serializable {
    ... 
} 
```

**不工作**

```
@Named
@RequestScoped
public class MyBean<T extends Persistable> {

    @Inject
    private T model;
} 
```

**作品**

```
@Named
@RequestScoped
public class MyBean<T extends Persistable> {

    @Inject
    private Persistable model;

} 
```

另请查看 WELD/CDI 规范负责人的这篇[文章](https://stackoverflow.com/a/9002354/281815)。

所以，参数化 bean 没有问题，问题在于最终有一个像你的`BaseType<T>`.

如果你能给他们一个具体的类型，这应该按照我提到的帖子中的建议工作。不理想，但...

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T17:44:46.080

我发现解决此错误的侵入性最小的方法是，对于`C`应该具有表单`T<A>`但使用类型变量`Weld`错误地更改实际类型参数的 bean 类的每个参数化 bean 类型`A`，创建一个新的空接口，扩展`T<A>`并添加这个Pilot 接口到实现的接口列表`C`和间接扩展的任何其他 bean 类`T<A>`。

特别是，对于上面的代码，bean 类`BaseType<SomeType1>`的 bean 类型`BeanClass1`被错误地更改为`Weld`to `BaseType<T>`。因此，解决该问题所需的试点界面将是：

```
public interface PilotInterface1 extends BaseType<SomeType1> {} 
```

应用了解决方法的 bean 类将是：

```
@Dependent
public static class BeanClass1 implements DerivedType<SomeType1>, PilotInterface1 {} 
```

我建议将所有试点接口放在一个单独的包或文件中，以便在修复错误时轻松删除它们。

# mysql - SQL 表设计 - 存储多条行程

> ID：15582032
> 
> 赞同：3
> 
> 时间：2013-03-23T00:41:37.520
> 
> 标签：mysql, sql, database-design

我想创建一个数据库来存储行程的行程，其中每条行程在另一个表中都有一个 FK，行程标识符将是键/唯一。

例如*“'东海岸公路旅行'：波士顿 -> 纽约市，纽约市 -> 费城，费城 -> 巴尔的摩，巴尔的摩 -> DC，DC -> 罗利”*

稍后，我想要运行查询，例如，

```
"Which trips contain the NYC -> Philly and Philly -> Baltimore legs?" 
```

对于如何有效地存储此类旅行信息，我感到有些困惑。行程标识符键并将行程段存储为纯文本列可能不是最有效的解决方案。

将不胜感激有关如何解决此问题的任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T00:52:52.030

听起来很简单。

您想要一个带有trip_id 的行程表，可能是诸如“东海岸公路旅行”之类的标签，也可能是日期、旅行的人、出发日期/时间或其他任何内容。

您可能需要一个节点表来存储城市（“波士顿”、“费城”等）或任何地方作为您每条腿的起点和终点。所以这将包含一个 node_id 及其名称或标签。

行程的每一段连接两个节点。您需要一个trip_leg 表，其中包含trip_id、from_node_id 和to_node_id。您可能需要其他信息，例如到达目的地的日期/时间。

```
 SELECT t.label
    FROM trips as t
    INNER JOIN trip_legs as x1  ON (t.trip_id = x1.trip_id)
    INNER JOIN trip_legs as x2  ON (t.trip_id = x2.trip_id 
                                AND x1.to_node_id = x2.from_node_id)
    WHERE x1.from_node_id IN (SELECT node_id FROM nodes WHERE name = "NYC")
      AND x1.to_node_id   IN (SELECT node_id FROM nodes WHERE name = "Philly")
      AND x2.to_node_id   IN (SELECT node_id FROM nodes WHERE name = "Baltimore") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T01:04:03.560

我将创建以下内容：

一个位置表，其中包含每个可能的位置和一个 ID 值

```
CREATE TABLE Location(
    LocationID int NOT NULL AUTO_INCREMENT,
    Location nchar(10) NOT NULL,
    PRIMARY KEY 
(LocationID) 
); 
```

行程表，包括行程的每一段。它有一个腿的 ID，以及作为位置表的外键的起点和终点的位置 ID

```
CREATE TABLE Leg(
    LegID int NOT NULL AUTO_INCREMENT,
    Origin int NOT NULL,
    Destination int NOT NULL,
PRIMARY KEY(LegID) 
);

FOREIGN KEY(Origin) REFERENCES Location(LocationID)

FOREIGN KEY(Destination) REFERENCES Location(LocationID) 
```

包含行程的每条线路的行程表，是行程 ID 和基本详细信息：

```
CREATE TABLE Trip(
    TripID int NOT NULL AUTO_INCREMENT,
PRIMARY KEY (TripID)
); 
```

将 Trip 和 Leg 详细信息与 TripID 和 LegID 连接起来的 TripLeg 表

```
CREATE TABLE TripLeg(
    LegID int NOT NULL,
    TripID int NOT NULL,
PRIMARY KEY (LegID ,TripID)
);

FOREIGN KEY(LegID) REFERENCES Leg(LegID)
FOREIGN KEY(TripID) REFERENCES Trip(TripID) 
```

这将允许您根据城市、单程或总行程进行查询。希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-23T12:51:08.293

假设您的旅行不是“一次性”，而是在预定线路上进行（并且一条线路可以产生多次旅行），那么您将需要这样的东西：

![在此处输入图像描述](../Images/9a9028fbab5907cb86a0d37ed0be4a9f.png)

*（如果它们**是**一次性的，想象一下 LINE 就是一次旅行。）*

注意LEG的结构：

*   它的 PK 包含 LEG_NO，但不包含 STOP_ID：LEG_NO 确定给定线路中支线的顺序，如果需要（例如在往返行程中），还允许多条支线穿过同一个停靠点。
*   此外，在腿中只有“开始”（而不是“结束”）停止 - 无论“上一个”（由 LEG_NO 定义）腿是什么，都决定了下一个腿的开始停止。这样，您永远不会有断开的腿（即，前腿的结束停止点与下腿的开始停止点不匹配）。

TRIP 的 PK 包含 TRIP_NO 而不是（例如）START_DATE_TIME，以允许在同一时间在同一条线路上开始多个行程，如果您需要的话。

您的示例“东海岸公路旅行”线上的第 23 次旅行可以表示如下：

```
TRIP: LINE_ID  TRIP_NO
      -------  -------
          100       23

LINE: LINE_ID  LINE_NAME
      -------  ---------
          100  'East coast roadtrip'

LEG:  LINE_ID  LEG_NO  STOP_ID
      -------  ------  -------
          100       1       55
          100       2       11
          100       3       66
          100       4       22
          100       5       44
          100       6       33

STOP: STOP_ID  STOP_NAME
      -------  ---------
           22  'Baltimore'
           11  'NYC'
           33  'Raleigh'
           66  'Philly'
           55  'Boston'
           44  'DC' 
```

*（注意：我故意使用非连续数字来更清楚地充实连接。）*

* * *

使用此数据库结构，您可以轻松获取经过所有给定站点的行程，例如：

```
SELECT *
FROM TRIP
WHERE
    LINE_ID IN (
        SELECT LINE_ID
        FROM LEG JOIN STOP ON LEG.STOP_ID = STOP.STOP_ID
        WHERE STOP_NAME IN ('NYC', 'Philly', 'Baltimore')
        GROUP BY LINE_ID
        HAVING COUNT(DISTINCT STOP_ID) = 3
    ) 
```

*（注意：在旧版本的 MySQL 上，由于查询优化器对 IN 的问题，您希望将此查询重写为 JOIN。）*

但是，如果您想按**顺序**通过这些站点并且中间没有“间隙”，那么大腿会很快长毛。可能你最好的选择是获取上面子查询的结果并在客户端分析它们，而不是尝试建立顺序并检测 SQL 中的间隙（这基本上是基于集合的）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-23T00:52:31.027

有一个`trip`表，它与 1:many 关系`leg`。腿将包含`to`和`from`外键`location`。

然后，您可以通过执行任意数量的 s 来进行查询`SELECT`，`leg`每个都被别名为不同的名称，并确保它们都具有相同的`trip_id`.

也许是这样的：

```
SELECT
    trip.name
FROM
    trip
    INNER JOIN leg leg1 ON (trip.id = leg1.trip_id)
    INNER JOIN leg leg2 ON (trip.id = leg2.trip_id)
    INNER JOIN location location_from1 ON (
        location_from1.id = leg1.location_from_id
    )
    INNER JOIN location location_to1 ON (
        location_to1.id = leg1.location_to_id)
    )
    INNER JOIN location location_from2 ON (
        location_from2.id = leg2.location_from_id
    )
    INNER JOIN location location_to2 ON (
        location_to2.id = leg2.location_to_id
    )
WHERE
    location_from1.name = 'NYC'
    AND location_to1.name = 'Philly'
    AND location_from2.name = 'Philly'
    AND location_to2.name = 'Baltimore' 
```

然而，所有这些额外的位置连接都很昂贵，因此您可能希望在此查询之前查找各个位置的主键，然后您只需将`WHERE`子句添加到腿表中即可。

# c++ - 在编译时是否包含入口点函数在内的文件中的指令优先？(C++)

> ID：15582044
> 
> 赞同：2
> 
> 时间：2013-03-23T00:43:02.340
> 
> 标签：c++

比如你有main.cpp和mustcomefirst.cpp，main.cpp有入口函数`int main()`

我认为编译器（通常）像这样工作是否正确：首先它搜索带有入口点函数的文件，然后用要包含的文件中的代码替换所有包含函数行，就好像`#include mustcomefirst.cpp`不是' t写在文件中，但文件mustcomefirst.cpp中的代码写在那里，然后它进入入口点函数并从那里按顺序连续执行？

如果具有入口点函数的文件不包含该文件（直接或间接），那么在项目中包含文件是否意味着什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T00:54:42.833

不，*编译器*通常不关心`int main()`您的任何源文件中是否有 或它在哪个源文件中（它*确实*关心您是否有一个无效的`main`，例如`void main()`）。它肯定不会*在*所有源文件中搜索`main`.

当您使用三个源文件编译项目时：

`g++ file1.cpp file2.cpp file3.cpp`

它们中的每一个都被单独翻译成目标代码，就像你做的一样

`g++ -c file1.cpp; g++ -c file1.cpp; g++ -c file1.cpp`

然后*通过*链接器链接在一起 - 您可以手动执行此操作

`g++ file1.o file2.o file3.o -o myprogram`.

在这里，链接器的工作是确保`main`您的程序中有一个。如果没有，你会得到一个`undefined reference`错误，但同样，这一切都是在编译完成后很久才发生的。

（当您谈论“在项目中包含文件”时，您的问题变得模棱两可。如果您在谈论`#include`，则仅包含一个翻译单元中的代码。除此之外，“项目”在 C++ 中不是一个明确定义的概念但是您的 IDE 或构建系统使用的抽象 - 它主要意味着您放置在“项目”中的所有源文件都将被编译然后链接在一起，如我上面的示例所示。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T01:01:51.670

首先，从高层次上了解 C++ 程序是如何编译的。如果您的项目中有三个文件 - `main.cpp`、`foo.cpp`和`foo.h`- 您可以像这样编译项目：

```
g++ main.cpp foo.cpp 
```

这两个文件是分开编译的。预处理器和编译器根本不关心这些文件之间的关系。预处理和编译`main.cpp`产生一个目标文件，预处理和编译`foo.cpp`产生另一个目标文件。

只有在最后一步，即链接步骤中，才会考虑关系。*链接器*将看到它的`main`定义`main.cpp`并将其作为程序的起点。*链接器*将看到里面有一个对定义`main.cpp`的函数的调用，并将它们链接在一起。`foo``foo.cpp`

因此，对于您传递给编译器的每个文件，有两个主要步骤：

1.  预处理 - 以非常原始的方式处理文件，从而产生预处理令牌。其中一些标记是以 开头的预处理指令`#`，例如`#include`或`#define`。这些指令被执行。执行`#include`指令几乎只是将命名文件的内容复制到当前文件中。

    预处理阶段产生所谓的*翻译单元*。

2.  编译——然后对文件进行句法和语义分析并翻译成目标文件。这就是它开始关心您的代码究竟要做什么以及它是否正确的地方。如果您尝试使用尚未声明的名称，编译器会告诉您。但是，您通常可以使用尚未定义的名称，因为它们可能在另一个翻译单元中定义。

    此编译阶段生成目标文件。

在此之后，通过解析它们之间的引用来组合生成的目标文件。如果对应的目标文件`main.cpp`使用了`foo`定义的函数，`foo.cpp`那么它们将链接在一起，依此类推。

* * *

为了更清楚，让我们看一个例子。假设我们有以下源文件：

*   **主文件**

    ```
    #include "foo.h"

    int main() {
      foo();
    } 
    ```

*   **foo.h**

    ```
    void foo(); 
    ```

*   **foo.cpp**

    ```
    #include <iostream>
    #include "foo.h"

    void foo() {
      std::cout << "Foo!" << std::endl;
    } 
    ```

所以我们在命令行上将`main.cpp`and传递给编译器。`foo.cpp`请注意，我们不会将头文件传递给编译器。它们仅包含在`.cpp`文件中。另请注意，`.cpp`文件通常不包含其他`.cpp`文件。每个`.cpp`文件都单独编译并稍后链接。

所以在预处理阶段之后，我们有两个翻译单元：

*   **main.cpp**翻译单元

    ```
    void foo();

    int main() {
      foo();
    } 
    ```

*   **foo.cpp**翻译单元

    ```
    // contents of <iostream> here
    void foo();

    void foo() {
      std::cout << "Foo!" << std::endl;
    } 
    ```

请注意， 的内容`foo.h`已被复制到每个文件中。我们现在有两个完全有效的翻译单元。第一个只是定义`main`函数并调用仅声明的`foo`函数。第二个首先声明`foo`然后在之后定义它。

然后编译翻译单元以生成目标文件，通常称为`main.o`和`foo.o`. 然后，链接器将查看文件中某些未解析的引用。例如，它会找到对`foo`in的调用`main.o`并查看它尚未定义。所以它会查看其他目标文件，看看是否能找到它，果然，它在`foo.o`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T01:04:43.997

编译器不关心入口点函数。加载程序确实（[http://dbp-consulting.com/tutorials/debugging/linuxProgramStartup.html](http://dbp-consulting.com/tutorials/debugging/linuxProgramStartup.html)）。

非常广泛地，（对于每个源文件，例如 .cpp/.c）编译器的任务是：

1.  预处理文件（包括标题（例如，.h、.hpp），并替换宏）。在这个阶段，源文件中包含的所有头文件都包含（复制粘贴的一种）到源文件中。所有源文件都是独立编译的，与其他源文件包含/定义的内容无关。
2.  Parses，将程序转换为抽象语法树
3.  检查语法和类型错误。
4.  将程序转换为中间表示（IR）。
5.  编译器的后端采用 IR 并优化程序。
6.  之后，后端将优化的 IT 转换为特定于目标的机器代码（目标文件）。

----- 在此之后编译器的工作就完成了。除了其他任务，链接器（[http://en.wikipedia.org/wiki/Linker_(computing)](http://en.wikipedia.org/wiki/Linker_(computing))）只查找程序中是否有`main`函数。如果您在任何目标文件中都没有 main() 函数，则会出现链接器错误。通常，要链接的一组目标文件中的每个函数都应该有一个且只有一个定义，以生成可执行文件。

----- 可执行文件由可以运行/执行的链接器生成。

----- 启动执行加载器将程序加载到主内存并调用**main()**函数。

要了解更多信息，只需对可执行文件执行 objdump，您会发现很多函数在 main 之前被调用。

在linux上你可以做

`objdump -d your_main_program > dump_file`

# c# - 匿名委托变量引用

> ID：15582046
> 
> 赞同：1
> 
> 时间：2013-03-23T00:43:14.700
> 
> 标签：c#, lambda

在委托声明中引用 i 是否有效？

```
targets[i].PingReply = e.Reply; 
```

它会引用定义在

```
pingSender.SendAsync( targets[i].IPAddress, targets[i].Timeout); 
```

还是当委托触发时 i 的值会有所不同？我问是因为我在 PingCompleted 中获得了 i=3 的索引超出范围，我不知道为什么。

```
public void Ping(PingTest[] targets)
{
    var finished = new CountdownEvent(targets.Count());
    for (int i = 0; i < targets.Count(); i++)
    {
        finished.AddCount();
        var pingSender = new Ping();
        pingSender.PingCompleted += (sender, e) =>
                                        {
                                            targets[i].PingReply = e.Reply;
                                            finished.Signal();
                                        };
        pingSender.SendAsync(targets[i].IPAddress, targets[i].Timeout);
    }
    finished.Signal();
    finished.Wait();
} 
```

这是电话...

```
var pingTests = new PingTest[]
                    {
                        new PingTest("Router", new IPAddress(new byte[] {192, 168, 1, 8}), 2),
                        new PingTest("Exchange", new IPAddress(new byte[] {192, 168, 1, 78}), 3),
                        new PingTest("SQL", new IPAddress(new byte[] {192, 168, 1, 99}), 3)
                    };
netwrkService.Ping(pingTests); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T02:45:50.030

你希望这个程序片段做什么？

```
int i = 0;
Func<int> f = ()=>i;
i = 3;
Console.WriteLine(f()); 
```

尝试一下。它做了你认为它应该做的事吗？

* * *

匿名函数对*变量*是封闭的，而不是变量过去的值。当您调用 lambda 时，循环变量不再具有创建委托时的值。

有关详细信息，请参阅[http://ericlippert.com/2009/11/12/closure-over-the-loop-variable-considered-harmful-part-one/](http://ericlippert.com/2009/11/12/closing-over-the-loop-variable-considered-harmful-part-one/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T02:46:21.150

在 C# 中，[闭包关闭变量，而不是值](http://ericlippert.com/2009/11/12/closing-over-the-loop-variable-considered-harmful-part-one/)。在您的`for`循环中，只有一个 variable `i`，并且当每个`PingCompleted`处理程序读取 的值时`i`，它会获取该单个变量的*当前*值，而不是`i`处理程序连接时的 back 值。因此，如果处理程序在`for`循环结束后执行，那么`i`将等于 3 — 这不是您想要的！

要解决此问题，请将 的值复制`i`到循环内声明的另一个变量中，然后更改处理程序以使用该新变量：

```
for (int i = 0; i < targets.Count(); i++)
{
    ...
    int j = i;
    pingSender.PingCompleted += (sender, e) =>
                                    {
                                        targets[j].PingReply = e.Reply; // <== j, not i
                                        finished.Signal();
                                    }; 
```

当您在循环中声明一个变量时，每次迭代都会在逻辑上创建该变量的一个新实例。因此，`PingCompleted`处理程序现在引用 的不同实例`j`，每个实例都包含该处理程序的正确索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T01:55:22.123

由于循环在 PingCompleted 被调用之前完成，因此当 PingCompleted 第一次被调用时，i 将递增到 3。然后再调用两次（因为那是你的 for 循环初始化 i 仍然是 3，因为 for 循环已经完成并且不再增加 i 。

你明白为什么我总是越界吗？您的索引 i 在第一次迭代时从 0 到 1，在第二次迭代时从 1 到 2，在最后一次迭代时从 2 到 3（最后设置 3）。一旦所有迭代都完成，您对 PingCompleted 的第一次调用就会调用索引已经为 3 的索引。

# java - GNU-GhostScript-9.06 的商业用途，已获得 Gnu-general public license V3 许可

> ID：15582047
> 
> 赞同：0
> 
> 时间：2013-03-23T00:43:16.997
> 
> 标签：java, c

我想在商业上使用 GNU-GhostScript-9.06，它是根据 GNU-GPL_V3 许可证分发的。

1.  该许可证表明 --> GNU 通用公共许可证旨在保证您可以自由共享和更改程序的所有版本，以确保它对所有用户都是免费软件。我们的通用公共许可证旨在确保您可以自由分发免费软件的副本（如果您愿意，还可以收取费用），您可以接收源代码或可以根据需要获得它，您可以更改软件或者在新的免费程序中使用它的一部分，并且你知道你可以做这些事情。

2.  在代码文件中有“Copyright (C) 2001-2012 Artifex Software, Inc.” 本软件是根据许可分发的，除非根据本分发文件 LICENSE 中包含的许可条款明确授权，否则不得复制、修改或分发。

3.  我正在使用 Java 来开发我的软件，因为在 Java 中我们违反了本机函数，并在运行时调用 System.loadLibrary 来加载库。因此在构建时没有将 Java 代码与 Gnu-GPL_v3 代码链接。在这种情况下，我还需要打开 Java 代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T01:12:12.743

[GPL FAQ](http://www.gnu.org/licenses/gpl-faq.html)对这些问题非常清楚：

> 如果一个库是在 GPL（而不是 LGPL）下发布的，这是否意味着任何使用它的软件都必须在 GPL 或 GPL 兼容许可证下？
> 
> 是的，因为实际运行的软件包含该库。

它还明确指出，Java 的链接方法也不例外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T00:54:58.930

我无法提供法律建议。但是 GPL 是经过设计的，因此您可以将程序用于任何您想要的目的。但是，如果您向某人提供程序本身的修改版本，您必须将完整的源代码（包括所有更改）提供给获得该程序的人。只要您使用原件或对自己进行任何更改，您就清楚了。但是，检查[ghostscript 网站](http://www.ghostscript.com)，许可证不再只是普通的 GPL。

“与图书馆的链接”是一个灰色区域，没有法院定义这是否会创建衍生作品 AFAIK。您应该询问代码的所有者，甚至可能要求获得特别许可，或者*确保*您只是按照设计的方式使用未更改的程序。

请注意，Ghostscript 是 Postscript 解释器，我不知道它的输出是否包含其他内容（例如字体），需要检查一下。

# php - 最佳实践，如何在 Symfony2 中创建延迟加载用户实体？

> ID：15582051
> 
> 赞同：0
> 
> 时间：2013-03-23T00:43:46.903
> 
> 标签：php, symfony

我正在从基于 Web 的 API 中获取用户数据，并且我想避免获取数据，因此如果我从不需要该数据就发出 HTTP 请求。我正在考虑创建一个在其构造函数`User`中接受 a并简单地存储它的类。*如果*在某个时间点调用任何 getter 方法，它会进行调用并从 API 获取数据。`$userID`*`getUserName()`*

 *现在，我创建了一个应该完成所有 API 工作的服务。我将如何将此`APIWrapper`服务连接到我的`User`实体类？我读到依赖实体类中的服务容器被认为是不好的风格。如果这是一个普遍首选的解决方案，我只会让`User`类依赖于服务容器并调用`APIWrapper`服务，通过`User`引用传递对象并让服务填写从 API 获取的所有内容。`User`但是如果类不依赖于服务容器，我怎么能做到这一点呢？

我希望能够像这样使用它：

```
$user1 = new User(1234);
$user2 = new User(2345);
echo $user2->getName(); 
```

它只会从 API 中获取 user2 的名称，而不会对 user1 执行任何操作。这样，我也可以轻松实现缓存，因此我什至根本不需要查询 API。

所以。什么被认为是做到这一点的最佳方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T03:08:36.330

If the user is authenticating *and initially registering* with a third-party service, you should probably just get that info right when they sign up. How many users do you expect to have who will never need to provide their basic account info?

It is indeed bad practice to inject services into an Entity, as an Entity's purpose is nothing more than to contain an object and its data. You should use a `UserProvider` for fetching the user data for an existing user, as described in various sets of guidelines for integrating the FOSUserBundle and the FOSFacebookBundle.

Now, when you do a Google search for integrating those two bundles, or when you ask around, you're going to be pointed to a paid screencast that costs $15\. If you're really committed to Symfony as a framework for your projects, it may be worth your money to see how the people that build Symfony things think. If you are willing to deal with some pulling out of your own hair, you can dig deeper into the search results, and look at resources like this gist: [https://gist.github.com/iBet7o/5215066](https://gist.github.com/iBet7o/5215066).

Your exact implementation will depend on the bundles you're using, but in general, what your code should end up looking like is this:

```
function getName() {
    if($this->name == '') {
        return $this->getSignupProvider()->getUserinfo(); // or maybe just getProvider()
    }
    return $this->name;
} 
```*

# mysql - MysqlDataSource 和 MysqlConnectionPoolDataSource 有什么区别？

> ID：15582052
> 
> 赞同：3
> 
> 时间：2013-03-23T00:44:11.000
> 
> 标签：mysql, glassfish, datasource

我正在应用程序服务器中配置 mysql 连接（特别是 glassfish，但我也对其他应用程序服务器感到好奇），并且资源类型和驱动程序似乎有 2 个非常相似的选项。即，`MysqlDataSource`和`MysqlConnectionPoolDataSource`。

我很好奇两者之间的区别是什么。似乎 glassfish 以任何一种方式都在维护一个连接池，因此很难说出有什么区别。

感谢您提供的任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T01:56:27.297

MysqlDataSource 是一个 Java 原生数据库接口，它返回到连接参数中定义的数据库的连接。MysqlConnectionPoolDataSource 是 MysqlDataSource 的子类，它返回一个池连接资源。区别在于您的连接资源是池化的还是连接的目标是池化的。这通常由硬资源和预期连接数决定。如果您有许多用户同时连接，您可能希望将尽可能多的这些用户集中到一个连接中，因为您的硬资源（如内存）允许。因此，您将限制在内存中运行的驱动程序的实例数量，并允许驱动程序管理尽可能多的线程，因为它可以在内部管理。

想想网络集线器与网络交换机。交换机总是更快，但直到流量大到足以影响时才会实现。您的问题也是如此，如果用户数量达到内存和 CPU 所包含的潜力，池连接将提高性能。

# javascript - 点击时显示 HTML 元素的源代码

> ID：15582053
> 
> 赞同：3
> 
> 时间：2013-03-23T00:44:15.610
> 
> 标签：javascript, html

我想在单击元素时在文本框内的网页上显示元素的源代码。是否可以在单击元素时（使用`onClick`属性）获取元素的源代码，然后在文本框中显示该元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T00:44:15.610

是的，这当然是可能的。[此处演示](http://jsfiddle.net/W8YQP/1/)以下代码，并在单击文本时显示源代码。

[这是一个页面上有更多元素的示例](http://jsfiddle.net/W8YQP/2/)（单击时它们都显示在文本框中。）

```
<script type = "text/javascript">
function showSourceCode(toShow){
    sourceCode.value = toShow.innerHTML;
}
</script>

<p onclick = "showSourceCode(this);">
    <b>Show source code on click!</b>
</p>

<input type="text" id = sourceCode></input>

</body>
</html> 
```

# php - 如何使用 ckeditor 通过 ajax 提交 textarea 数据？

> ID：15582063
> 
> 赞同：0
> 
> 时间：2013-03-23T00:45:31.957
> 
> 标签：php, javascript, ajax, ckeditor

好的，这就是我正在使用的。这是受影响的文本区域的代码：

```
<div class="chat">
    <div class="messages"></div>
    <textarea class="entry" name="entry" placeholder="Welcome to the Chat. Enter your message here!"></textarea>
    <script type="text/javascript">
        editor = CKEDITOR.replace('entry');
    </script>
</div> 
```

这是我的 chat.js 文件的代码，它调用了聊天的所有函数：

```
var chat = {}

chat.fetchMessages = function () {
    $.ajax({
        url: 'ajaxchat.php',
        type: 'post',
        data: {
            method: 'fetch'
        },
        success: function (data) {
            $('.chat .messages').html(data);
        }
    });
}

chat.throwMessage = function (message) {
    if ($.trim(message).length != 0) {
        $.ajax({
            url: 'ajaxchat.php',
            type: 'post',
            data: {
                method: 'throw',
                message: message
            },
            success: function (data) {
                chat.fetchMessages();
                chat.entry.val('');
            }
        });
    }
}

chat.entry = $('.chat .entry');
chat.entry.bind('keydown', function (e) {
    if (e.keyCode === 13 && e.shiftKey === false) {
        chat.throwMessage($(this).val());
        e.preventDefault();
    }
});

chat.interval = setInterval(chat.fetchMessages, 5000)
chat.fetchMessages(); 
```

现在所有这些代码都在工作，但是没有捕获返回键来提交消息。不知道我还需要做什么。CKeditor 将输入/返回键解释为一个新段落，我需要它来提交消息数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T01:58:22.340

如果我正确理解了问题，那么您的问题与事件有关。对于 CKEditor，您不会绑定到类似的事件。它不直接使用 textarea 元素，它做了一些魔术并创建了一个 iframe 并拥有自己的事件处理系统。要附加到 13 键事件，请执行以下操作

```
CKEDITOR.on('instanceReady', function(ev) {
    var editor = ev.editor;

    editor.on('key', function(evt) {
        if (evt.data.keyCode === 13) {
            // do your enter handling here
        }
    }
} 
```

* * *

在相关的说明中，获得这样的值也有点奇怪。它真的有效吗？我会改变它以获得更像CKEditor的

```
CKEDITOR.instances.entry.getData(); 
```

# highcharts - Highcharts API 改变了吗？分散不像以前那样工作

> ID：15582064
> 
> 赞同：0
> 
> 时间：2013-03-23T00:45:35.237
> 
> 标签：highcharts

突然，我们的图表停止正常工作。散点从红色变为黑色。其中一些失踪了。见这里： http: [//jsfiddle.net/dbX4F/2/](http://jsfiddle.net/dbX4F/2/) - 这工作正常，直到下午 22 日星期五（格林威治标准时间）。我们需要重新编码吗？

初始代码取自演示站点...

```
var data = [
    [-1.0370901525, -0.2242744267],
    [-0.9570242763, 0.1297600865],
    [-0.8440818191, 0.0616363287],
    [-1.0407160521, 0.3065044880],
    [-1.0265066624, 0.3317940235],
    [-0.9633093774, 0.3405199349],
    [-0.9326101542, 0.3265898228],
    [-0.9424129128, 0.3695831895],
    [-0.9341677129, 0.3855949938],
    [-0.9256171882, 0.4086754620],
    [-0.9600118995, 0.4446559548],
    [-0.7863433361, 0.3159923553]
];

var scatter = [-0.6306822896, -0.4136320949, -0.3912227452, -0.3671057820, -0.3473563194, -0.3113947213, -0.3030101657, -0.2864148617, -0.2742863595, -0.2584708631, -0.2576779723, ];

.........

                events: {

                    // listen to the selection event on the master chart to update the
                    // extremes of the detail chart
                    selection: function (event) {
                        var extremesObject = event.xAxis[0],
                            min = extremesObject.min,
                            max = extremesObject.max,
                            detailData = [],
                            detailScatter = [],
                            xAxis = this.xAxis[0];

                        // reverse engineer the last part of the data
                        jQuery.each(data, function (i, interval) {
                            if (i > min && i < max) {
                                detailData.push([i, interval[0], interval[1]]);
                                detailScatter.push([i, scatter[i]]);
                            }
                        });

                        // move the plot bands to reflect the new detail span
                        xAxis.removePlotBand('selection');
                        xAxis.addPlotBand({
                            id: 'selection',
                            from: min,
                            to: max,
                            color: 'rgba(0, 0, 0, 0.2)'
                        });

                        detailChart.series[0].setData(detailData);
                        detailChart.series[1].setData(detailScatter);

                        return false;
                    }
                }
            }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:43:53.387

您可以通过设置颜色选项[http://api.highcharts.com/highcharts#colors](http://api.highcharts.com/highcharts#colors)或设置散点系列颜色[http://api.highcharts.com/highcharts#plotOptions.scatter.color来控制颜色](http://api.highcharts.com/highcharts#plotOptions.scatter.color)

# bash - 良好的 Bash 引用风格

> ID：15582065
> 
> 赞同：2
> 
> 时间：2013-03-23T00:45:52.670
> 
> 标签：bash

你会引用这个从一些预先计算的组件构建日志消息的变量赋值吗？

```
formatted_message=$(printf '%s [PID %s] %s (%s) %s:%s | %s\n' \
                           "${TIMESTAMP}" \
                           "${PROCESS}" \
                           "${SEVERITY}" \
                           "${SOURCE}" \
                           "${FUNCTION}" \
                           "${LINE}" \
                           "${MESSAGE}") 
```

这真的是好的 Bash 编程风格吗？

我很喜欢*尝试*学习一些 Bash，但是我发现有些东西“效率低下”：

*   当有很多关于引号在不同上下文中的含义的规则时，我必须不断*解析*（使用“思维编译器”）我阅读的代码，重新阅读，重新阅读，应用一些隐含的规则，这些规则是上下文-具体的（例如，表达式的左侧、右侧、应用于数组的扩展与标量值等），这在心理上很麻烦，至少对我来说是这样。在我对世界的简单看法中，拥有固定的约定和简单的异常将使我能够更快地阅读代码，有时编写代码时会使用一两个额外的字符，但对于一般情况来说，非常“自动”，尤其是能够更多地*识别异常*容易。

让我们举一个例子，让我对“最佳编码实践”感到困惑：

```
[[ $x == "$x" ]] 
```

我可以省略左侧的引号而不会真正改变行为。将它们添加到评估的右侧会产生重要影响。突然之间，我想知道进程替换和“评估/替换”的所有其他上下文，并希望有一种简单的方法可以做到这一点，几乎没有例外。

如果有这方面的指导文章/博客文章，我真的会详细研究它，了解（希望）*真正的*Bash 程序员在将引号放在省略它们的特定位置时想要传达的内容。

注意：我的学习发生在晚上的收费站。除了你们之外，我没有其他程序员可以将我的观点与我的观点进行比较，并且一些开源代码“就在那里”，没有随附的评论来证明像“编码风格”这样微妙的选择是合理的。

另一点：我发现总是输入更容易：

```
printf "${my_string_var}" 
```

但当然这也很好：

```
printf "$my_string_var" 
```

（我只是碰巧用 更好地“看到”了变量扩展`{}`）

但这可能不等同于分词变量内容（？！）

```
printf $my_string_var # with $my_string_var := 'foo bar' 
```

* * *

### 概括

如果您只想回答一个简单、直接的问题并远离“辩论”：

*   你会引用上面的第一个作业吗？为什么？

注意：我的一个问题是最终`\n` *消失了*，即使我尝试在这里和那里加上双引号..但现在我明白它会`$()`剥离它..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:31:55.250

我不会引用右侧，因为通常的原因（防止意外分词）不适用于变量赋值的 RHS。

如果您使用`bash`4 或更高版本，则可以完全免除分配。除此之外，如果您不需要大括号来应用参数扩展运算符或将参数名称与相邻字符隔离开来，我发现大括号是不必要的并且会分散注意力。当然，引用仍然很重要。

```
printf -v formatted_message '%s [PID %s] %s (%s) %s:%s | %s\n' \
                       "$TIMESTAMP" \
                       "$PROCESS" \
                       "$SEVERITY" \
                       "$SOURCE" \
                       "$FUNCTION" \
                       "$LINE" \
                       "$MESSAGE" 
```

# iphone - 将图像从数组加载到 iPhone 的屏幕上

> ID：15582070
> 
> 赞同：1
> 
> 时间：2013-03-23T00:46:43.543
> 
> 标签：iphone, xcode, arrays, debugging

我是 Xcode 的新手，我试图从数组中提取一堆图片并将它们放在屏幕上，但是通过调试器我看到我的 for 循环没有运行。

```
for (int i = 0; i <[imagePaths count]; i++)
{
    NSLog(@"I'm loading a card");

    UIImageView *imgView = [[UIImageView alloc] initWithFrame:CGRectMake(10, 10, 250, 350)];
    NSString *imgFilepath = [[NSBundle mainBundle] pathForResource:[imagePaths objectAtIndex:i] ofType:@"jpg"];
    UIImage *img = [[UIImage alloc] initWithContentsOfFile:imgFilepath];
    [imgView setImage:img];
    [self.view addSubview:imgView];

} 
```

有谁看到我缺少什么来完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T01:14:57.607

> 我看到我的 for 循环没有运行。

在循环之前检查您`[imagePaths count]`使用以下代码。

它将为零。这意味着您的`imagePaths`阵列将是`null`

```
NSlog(@"imagePaths count is: %d",[imagePaths count]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T08:14:16.847

```
// Check what your imagePaths array contains, if it contains full path of image including filename and extension then use following code
for (int i = 0; i <[imagePaths count]; i++)
{
    NSLog(@"I'm loading a card");

    UIImageView *imgView = [[UIImageView alloc] initWithFrame:CGRectMake(10, 10, 250, 350)];
    UIImage *img = [[UIImage alloc] initWithContentsOfFile:[imagePaths objectAtIndex:i]];
    [imgView setImage:img];
    [self.view addSubview:imgView];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T19:49:18.560

如果它没有运行，那么 imagePaths 必须为零。在它之前添加一个断点并检查它是否有任何东西。

可能的新手错误：您是否正确分配和初始化 imagePaths？

# jsp - 如何在不改变当前页面的情况下设置应用程序的本地化？

> ID：15582074
> 
> 赞同：1
> 
> 时间：2013-03-23T00:47:25.247
> 
> 标签：jsp, localization, struts2

我在我的应用程序上使用语言环境，它完美地工作，但问题是，当我在主页 (index.jsp) 中单击应用程序不同页面中的特定语言时，它会转到 index.jsp页面，如何更改映射，以便当我在页面中选择特定语言时，它会保留在该页面中并更改应用程序的语言？如果您需要我上传代码的任何其他部分，请告诉我。

Struts.xml

```
<action name="locale" class="com.myapp.struts.LocaleAction">
  <result name="SUCCESS" type="tiles">baseLayout</result>
</action> 
```

行动

```
public class LocaleAction extends ActionSupport{

    @Override
    public String execute(){
        return "SUCCESS";
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T09:44:13.507

`default`拦截器堆栈包括一个`i18n`拦截器，它监视参数并根据该参数`request_locale`更改语言环境。所以没有必要采取*特别*行动。

为了留在同一页面中，请使用带有和空属性的`<s:url>`标签。`includeParams="all"``value`

```
<s:url var="urlen" includeParams="all" value="">
  <s:param name="request_locale">en</s:param>
</s:url> 
```

# jsf-2 - 扩展数据表动态结果富人脸

> ID：15582078
> 
> 赞同：0
> 
> 时间：2013-03-23T00:47:51.920
> 
> 标签：jsf-2, richfaces

```
<h:form>

<h:panelGrid columns="2" columnClasses="top , top">
    <rich:extendedDataTable
        value="#{contentBean.questions}" var="cap" id="table"
        selectionMode="single"
        tableState="#{contentBean.qtablestate}"
        selection="#{contentBean.s}">
        <rich:column  id="col_1">
            <f:facet name="header">
                <h:outputText value="Quistioneer" id="flag"/>
            </f:facet>
            <h:outputText value="#{cap.QUserid.fname}" id="cap_state_flag"/>
        </rich:column>
        <rich:column id="col_2" width="170px">
            <f:facet name="header">
                <h:outputText value="Question" id="state_name"/>
            </f:facet>
            <h:outputText value="#{cap.questionValue}" id="cap_state"/>
        </rich:column>
        <rich:column id="col_3" width="170px">
            <f:facet name="header">
                <h:outputText value="Date asked" id="state_capital"/>
            </f:facet>
            <h:outputText value="#{cap.QDate}" id="cap_name"/>
        </rich:column>

        <a4j:ajax execute="@form" event="selectionchange" listener="#{contentBean.onclick(cap.qid)}" 
                  render="selectiontable"/>
    </rich:extendedDataTable>
    <h:panelGroup layout="block" style="width:400px">
         <rich:panel>
            <f:facet name="header">
                <h:outputText value="Currently selected rows:" />
            </f:facet>
            <rich:dataTable value="#{contentBean.ansList}"
                var="sel" id="selectiontable">
                <rich:column>
                    <h:outputText value="#{sel.AUserid.fname}" />
                </rich:column>
                <rich:column>
                    <h:outputText value="#{sel.ansValue}" />
                </rich:column>
                <rich:column>
                    <h:outputText value="#{sel.ansDate}" />
                </rich:column>
            </rich:dataTable>
        </rich:panel>
    </h:panelGroup>
</h:panelGrid>

  </h:form> 
```

我想通过将 cap.userid （列表的数据变量）从扩展数据表中选择的列发送到支持 bean 来在数据表中的选定面板上显示结果（我需要调用方法 onclick 来获取表从支持会话到显示在第二个面板上的行）我的问题是listner在select上调用函数但我无法发送该行数据请帮助我该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:26:32.760

您可以从表格选择中获得选择：

```
 <rich:extendedDataTable
    ...
    selection="#{contentBean.selection}"> 
```

并将其放在后端。

```
for(Object objId:getSelection()){ 
```

objId 将是您的数据的 id。

# amazon-web-services - 迁移 Drupal 站点 - URL 别名 = 404 Not Found

> ID：15582079
> 
> 赞同：1
> 
> 时间：2013-03-23T00:47:54.997
> 
> 标签：amazon-web-services, drupal, migration, drupal-path-aliases

我正在将 Drupal 站点从 Host X 迁移到 Amazon Web Services...这不是我的第一次站点迁移，也不是 AWS 的新手（这不是我的安全设置，也不是 apache）。不久前我在另一个站点上遇到了这个问题，但由于我的问题具有时间敏感性，我只是获取了源代码，在我的 PC 上创建了一个本地测试站点，更改了 URL 别名设置，然后重新部署了代码. Bam，没问题，一切正常。

我进行了搜索并找到了一些有关如何解决此问题的建议，但找不到我认为可以彻底了解我正在使用的方法的方法。因此，我不想安装模块，也不想更改原始站点并永久删除 URL 别名。

我需要能够在不太理想的情况下解决这个问题。

我需要知道如何手动删除 URL 别名（例如在 phpmyadmin 或 MySQL 服务器本身中），以及如何配置所述别名以便我可以保留它们的使用，但仍然显示我的 +20 页面。现在所有显示的是 index.php，如果我使用 ?q=user，我可以登录，但一旦我这样做，它就会抛出 404。如果我返回 index.php，它会在页面上方显示管理控制台，但同样，每隔一个页面都会抛出 404。

有人能指出我正确的方向吗（不涉及更多模块或一起删除 URL 别名）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T21:15:15.130

漠视。我找到了答案。

在 .htaccess 中启用 RewriteBase /example/of/your/site

在 /etc/apache2/sites-available 下的 Apache2 默认文件中，将 AllowOverride None 更改为 AllowOverride All（在 /var/www 下）

# ruby - 哈希的未定义方法“to_i”

> ID：15582080
> 
> 赞同：2
> 
> 时间：2013-03-23T00:48:08.427
> 
> 标签：ruby, rubygems, sinatra, rack

我正在尝试为我的 Rack 应用程序制作子域路由器，但遇到了问题。这是我的 config.ru 代码：

```
require './controllers/subdomain'
require './controllers/www'

set :root, './'

run Example::Subdomain.new({
                                :www => Sinatra::Application
                            }) 
```

这是我的 subdomain.rb 代码：

```
module Example
  class Subdomain
    def initialize(map = {})
      @map = map
    end

    def call(env)
      @map.each do |subdomain, app|
        if env['HTTP_HOST'].split('.').first.eql?(subdomain)
          app.call(env)
        end
      end
    end
  end
end 
```

当我运行它时，我收到以下错误：

```
NoMethodError: undefined method `to_i' for {:www=>Sinatra::Application}:Hash
  /Library/Ruby/Gems/1.8/gems/rack-1.5.2/lib/rack/lint.rb:555:in `check_status'
  /Library/Ruby/Gems/1.8/gems/rack-1.5.2/lib/rack/lint.rb:19:in `call'
  /Library/Ruby/Gems/1.8/gems/rack-1.5.2/lib/rack/lint.rb:19:in `assert'
  /Library/Ruby/Gems/1.8/gems/rack-1.5.2/lib/rack/lint.rb:555:in `check_status'
  /Library/Ruby/Gems/1.8/gems/rack-1.5.2/lib/rack/lint.rb:51:in `_call'
  /Library/Ruby/Gems/1.8/gems/rack-1.5.2/lib/rack/lint.rb:37:in `call'
  /Library/Ruby/Gems/1.8/gems/rack-1.5.2/lib/rack/showexceptions.rb:24:in `call'
  /Library/Ruby/Gems/1.8/gems/rack-1.5.2/lib/rack/commonlogger.rb:33:in `call_without_check'
  /Library/Ruby/Gems/1.8/gems/sinatra-1.3.6/lib/sinatra/base.rb:161:in `call'
  /Library/Ruby/Gems/1.8/gems/rack-1.5.2/lib/rack/chunked.rb:43:in `call'
  /Library/Ruby/Gems/1.8/gems/rack-1.5.2/lib/rack/content_length.rb:14:in `call'
  /Library/Ruby/Gems/1.8/gems/thin-1.5.0/lib/thin/connection.rb:81:in `pre_process'
  /Library/Ruby/Gems/1.8/gems/thin-1.5.0/lib/thin/connection.rb:79:in `catch'
  /Library/Ruby/Gems/1.8/gems/thin-1.5.0/lib/thin/connection.rb:79:in `pre_process'
  /Library/Ruby/Gems/1.8/gems/thin-1.5.0/lib/thin/connection.rb:54:in `process'
  /Library/Ruby/Gems/1.8/gems/thin-1.5.0/lib/thin/connection.rb:39:in `receive_data'
  /Library/Ruby/Gems/1.8/gems/eventmachine-1.0.3/lib/eventmachine.rb:187:in `run_machine'
  /Library/Ruby/Gems/1.8/gems/eventmachine-1.0.3/lib/eventmachine.rb:187:in `run'
  /Library/Ruby/Gems/1.8/gems/thin-1.5.0/lib/thin/backends/base.rb:63:in `start'
  /Library/Ruby/Gems/1.8/gems/thin-1.5.0/lib/thin/server.rb:159:in `start'
  /Library/Ruby/Gems/1.8/gems/rack-1.5.2/lib/rack/handler/thin.rb:16:in `run'
  /Library/Ruby/Gems/1.8/gems/rack-1.5.2/lib/rack/server.rb:264:in `start'
  /Library/Ruby/Gems/1.8/gems/rack-1.5.2/lib/rack/server.rb:141:in `start'
  /Library/Ruby/Gems/1.8/gems/rack-1.5.2/bin/rackup:4
  /usr/bin/rackup:19:in `load'
  /usr/bin/rackup:19
  -e:1:in `load'
  -e:1 
```

有谁知道为什么会发生这种情况而不是运行`app.call(env)`？

这是错误的截图：http: [//i46.tinypic.com/3538is6.jpg](http://i46.tinypic.com/3538is6.jpg)

此代码也有效，但它不遵守子域规则：

```
module Example
  class Subdomain
    def initialize(map = {})
      @map = map
    end

    def call(env)
      @map.each do |subdomain, app|
        return app.call(env)
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T21:48:11.923

Rack 认为您正在返回`@map`响应的三元组中的状态代码`[status, headers, body]`（如此处所示[）](http://en.wikipedia.org/wiki/Rack_%28web_server_interface%29)。这是因为`each`在迭代结束时返回集合，这被用作您的`call`.

也许这对你有用，或者至少让你开始：

```
def call(env)
  subdomain = env['HTTP_HOST'].split('.').first
  app = @map[subdomain]
  app.call(env)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:53:31.317

我最终用以下代码解决了这个问题：

```
module Example
  class Subdomain
    def initialize(map = {})
      @map = map
    end

    def call(env)
      @map.each { |subdomain, app| return app.call(env) if env['HTTP_HOST'].split('.').first.eql?(subdomain) }
    end
  end
end

run Example::Subdomain.new({
        'www' => Sinatra::Application,
        'api' => Example::API
    }) 
```

我将哈希值更改为包含在 '' 中的字符串，并`return`在`app.call(env)`

# android - Open GL ES - 带有 alpha 的纹理清除背景

> ID：15582084
> 
> 赞同：0
> 
> 时间：2013-03-23T00:48:29.483
> 
> 标签：android, opengl-es

我正在使用取自“开始 android 游戏”的框架编写一个带有 open gl es 1.0 的 android 游戏。

我正在尝试使用线条绘制一些线条，然后是纹理多边形。

但是发生的事情是，当我绘制纹理时，它会将最先绘制的线条遮盖掉，即使它们离纹理块还很远。

在我的头撞了很长时间之后，我发现如果我切换到没有 Alpha 通道的图像，它可以工作并且不会清除背景。但是，如果我回到具有透明背景的图像，就会出现问题。

这是一张带有一些屏幕截图的图片：http: [//imgbox.com/abxDKzSd](http://imgbox.com/abxDKzSd) 顶部是使用不带 alpha 的图像的屏幕，下面是完全一样的，但图像具有透明度。

*   当活动开始时，我看到线条非常短暂地闪烁，但在那之后就再也没有
*   我正在启用混合
*   我的纹理尺寸是 2 的幂（128 x 32）
*   每次通话后我都会检查 gl 错误，但看不到任何错误
*   我直接在我的kindle fire HD上运行它，模拟器似乎根本无法使用它。

这是我渲染基元的代码片段，后面是我的纹理块：

```
GL10 gl = glGraphics.getGL();
gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
gl.glEnable(GL10.GL_TEXTURE_2D);

m_guiCam.setViewportAndMatrices();

// draw the lines
gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
gl.glLineWidth(15.0f);

m_vertices.position(0);
gl.glVertexPointer(2, GL10.GL_FLOAT, VERTEX_SIZE, m_vertices);
gl.glDrawArrays(GL10.GL_LINE_STRIP, 0, m_numVerts);

// draw textures
m_guiCam.setViewportAndMatrices();
gl.glEnable(GL10.GL_BLEND);
gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);

m_batcher.beginBatch(Assets.mfTex);
TextureRegion keyFrame = Assets.mfAnim.getKeyFrame(0.0f, Animation.ANIMATION_LOOPING);
m_batcher.drawSprite(250, 250, 32, 32, keyFrame);
m_batcher.endBatch();

gl.glDisable(GL10.GL_BLEND); 
```

我做了一个我能管理的最小的例子，它仍然存在问题，它可以在这里找到：[https ://docs.google.com/folder/d/0Bz7e5tdnz97Id21XZkJoQ005NlU/edit?usp=sharing](https://docs.google.com/folder/d/0Bz7e5tdnz97Id21XZkJoQ005NlU/edit?usp=sharing)

谁能帮我弄清楚为什么会这样？我就是无法让它工作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:13:27.340

好的！终于想通了

原来我不得不移动

```
gl.glEnable(GL10.GL_TEXTURE_2D); 
```

在我渲染我的线条*之后*调用。我是在启用混合后才放的。在绘制纹理精灵后，我还必须禁用纹理。因为否则当它回来时仍然会启用纹理以在下一帧再次渲染我的线条。

所以关于启用纹理的东西足以破坏线条绘制。钝！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T12:42:34.993

你需要禁用，`GL_DEPTH_TEST`否则如果你在比已经存在的东西更高/相等的深度上绘制一些东西，它就不会出现。

因此，在您的情况下，添加`gl.glDisable(GL10.GL_DEPTH_TEST)`启用混合的位置（并在不混合时再次启用它）。
您可能还想在绘图开始时清除深度缓冲区：`gl.glClear(GL10.GL_COLOR_BUFFER_BIT|GL10.GL_DEPTH_BUFFER_BIT)`

# ios - 您如何在 iOS 上配置 HTML5 游戏？

> ID：15582086
> 
> 赞同：1
> 
> 时间：2013-03-23T00:48:37.720
> 
> 标签：ios, html, profiling, memory-profiling

我的背景是 Windows 上的原生游戏开发。但我目前正在开发一款使用 HTML5 构建的 iOS 游戏。我如何描述这样的游戏？典型的 iOS 分析工具只会告诉你内存被本地层使用的情况。我不知道 WebView、OpenGL 或本机插件使用了哪一部分内存。我一直在网上搜索，我能找到的最好的方法是如何使用 Google Chrome 分析 HTML5，这对我没有多大帮助。

我会很感激任何帮助。

# ruby - 如何从 Ruby Web 服务（不是 Rails）访问客户端 X.509 证书？

> ID：15582097
> 
> 赞同：1
> 
> 时间：2013-03-23T00:50:06.893
> 
> 标签：ruby, web-services, certificate, sinatra, rack

如何从 Ruby Web 服务访问客户端 X.509 证书？客户端正在传递客户端证书，浏览器正在为我进行身份验证很好，但我也想查看我的 Ruby 代码中的证书。

这不是 Rails。例如，我正在寻找使用 Sinatra 的答案。并且，来自 nginx 或 lighttpd 等 Web 服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T00:11:36.657

使用配置了 SSL 的 Apache Web 服务器在端口 443 上侦听，作为运行 Sinatra 应用程序的瘦服务器的反向代理，例如，我可以将这些添加到我的 Apache VirtualHost 配置中：

```
RequestHeader set SSL-Client-M-Serial %{SSL_CLIENT_M_SERIAL}s
RequestHeader set SSL-Client-S-DN %{SSL_CLIENT_S_DN}s 
RequestHeader set SSL-Client-I-DN %{SSL_CLIENT_I_DN}s 
```

然后从我的 Sinatra 代码中，我可以在 Rack 环境中找到这些值，例如：

```
puts "#{request.env['HTTP_SSL_CLIENT_S_DN']}" 
```

我没有完整的客户端证书，这没关系，因为我让 Apache 验证证书。

# c# - 为什么 var 推断类型 X509Certificate2 而不是 X509Certificate2Collection 循环中的对象？

> ID：15582098
> 
> 赞同：0
> 
> 时间：2013-03-23T00:50:26.203
> 
> 标签：c#, generics

关于为什么在循环中选择类型有很多问题（[1](https://stackoverflow.com/questions/9127142/why-does-var-infer-type-object-and-not-xmlnode-in-xmlnodelist-loop) [2](https://stackoverflow.com/questions/4933711/var-type-inference-in-c-sharp) [3](https://stackoverflow.com/questions/2786727/why-does-var-evaluate-to-system-object-in-foreach-var-row-in-table-rows) ） ，但这次不同。当我使用此代码片段循环 a时，令我惊讶的是，实际上选择了类型，而不是，尽管只实现了非泛型而不是!`var``object``foreach``X509Certificate2Collection``var``X509Certificate2``object``X509Certificate2Collection``IEnumerable``IEnumerable<T>`

```
X509Certificate2Collection collection = new X509Certificate2Collection();
foreach (var cert in collection)
{
    Console.WriteLine(cert.Subject);
} 
```

[您可以在msdn 文章](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate2collection.aspx)中看到继承层次结构，但它似乎没有实现`IEnumerable<X509Certificate2>`。如果我在集合上使用 LINQ，我不会得到`X509Certificate2`类型：

```
collection.Select(cert => cert.Subject); // Won't compile 
```

那么编译器如何知道`var`案例中的实际类型呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T00:56:25.073

`X509Certificate2Collection.getEnumerator()`返回一个`X509Certificate2Enumerator`，它有一个`Current`类型的属性`X509Certificate2`。

换句话说，c# 不仅仅依赖于 IEnumerable 或 IEnumerable<T>。它直接查看该`Current`属性。

[http://msdn.microsoft.com/en-us/library/aa288257%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa288257%28v=vs.71%29.aspx)

# c# - 如何使用 AutoMapper “膨胀”实体

> ID：15582100
> 
> 赞同：1
> 
> 时间：2013-03-23T00:50:53.077
> 
> 标签：c#, entity-framework, asp.net-web-api, automapper

我在我的 web api 项目中收到了一个 DTO，我想使用 AutoMapper 自动将我的 DTO 转换为我要插入数据库的实体。

这是 DTO 和实体的简化：

```
class RegistrationDTO
{
    string name;
    ICollection<int> Departments;
}

class Registration
{
    int id;
    DateTime CreatedAt;
    string name;
    virtual ICollection<Department> Departments;
}

class Department
{
    int id;
    string name;
    virtual ICollection<Registration> Registrations;
} 
```

问题是 RegistrationDTO 只有部门的 ID，我找不到让 AutoMapper 从数据库中获取部门的方法（使用 Entity Framework 5）。

使用自定义 ValueResolver 我可以将整数列表转换为部门列表，但我想从数据库中获取部门，而不是创建新部门。

这是我想出的解决方案，但我很确定有更好的方法来做到这一点：

```
var reg= Mapper.Map<Registration>(dto);

reg.Departments = new List<int>(dto.Departments).ConvertAll(input => Context.Departments.Find(input));

if(reg.Departments.Contains(null)) //a department provided does not exist in the database
    return Request.CreateResponse(HttpStatusCode.BadRequest, "invalid department");

... 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T06:57:58.187

使用 Automapper 从 DTO 数据中膨胀实体通常是一个坏主意。它非常适合朝着相反的方向前进——将数据从实体传递到视图模型、webapimodel 或一般的 DTO。但特别是对于 EntityFramework，在客户端到域的方向上使用它会变得混乱。

例如，您的实体上有 2 个属性不在您的视图模型上：`id`和`CreatedAt`（为什么不一致的大小写顺便说一句？）。为了`AutoMapper.Mapper.AssertConfigurationIsValid()`不引发异常，这意味着`CreateMap`除了属性的忽略或自定义解析器之外，您还需要在调用中忽略或使用自定义解析器来处理这两个`Departments`属性。最后，唯一被自动映射的是`name`，这首先违背了使用 automapper 的目的。

您将 DTO 转换为实体的代码实际上非常简洁。老实说，我要改变的主要事情是删除自动映射器——在这种情况下，它真的没有必要。

```
var reg = new Registration { name = dto.name }; // less code than with automapper

reg.Departments = new List<int>(dto.Departments)
    .ConvertAll(input => Context.Departments.Find(input));

if(reg.Departments.Contains(null)) //a department provided does not exist in the database
    return Request.CreateResponse(HttpStatusCode.BadRequest, "invalid department"); 
```

你可能很想尝试这样的事情：

```
Mapper.CreateMap<RegistrationDTO, Registration>()
   .ForMember(d => d.id, o => o.Ignore())
   .ForMember(d => d.CreatedAt, o => o.UseValue(DateTime.Now))
   .ForMember(d => d.Departments, o => o.MapFrom(s => 
   {
       var dbContext = new MyDbContext();
       var departments = new List<int>(s.Departments)
           .ConvertAll(input => dbContext.Departments.Find(input));
       return departments;
   }))
; 
```

这不起作用，因为`DbContext`委托块中的 与`DbContext`您将用于将`Registration`实体添加到 ( `dbContext.Registrations.Add(reg)`) 并调用`SaveChanges`的不同。当您有附加到不同上下文的实体时，您最终会`Department`在数据库中出现重复的实体（或者由于重复的主键可能导致 SQL 异常）。

**更新**

> 我选择 AutoMapper 是因为我的实体和 DTO 都有 15 个以上的字段，两者之间的唯一区别是我的实体拥有的数据库特定的东西，比如 id、创建日期、最后修改日期等。你会保持你不使用的建议吗AutoMapper 在这种情况下考虑到我的实体比我在这里发布的简化要大得多？

那要看。对于您的 15 多个其他属性，它们都是标量吗？它们中的任何一个是外键属性（用于管理非集合导航属性）吗？他们中有多少人会要求自定义解析器？

我绝对不会使用自动映射器来 DTO 集合导航属性 ( `public virtual ICollection<SomeOtherEntity> OtherEntities { get; set; }`)。我也不会尝试将自动映射器用于不公开外键 ( `public virtual SomeOtherEntity OtherEntity { get; set; }`) 的 DTO 非集合导航属性。

这里的代码味道是，对于每个 DTO 到实体的`CreateMap`调用，您将至少有几个`Ignore`s（忽略创建日期、最后修改日期等）。此外，如果您的非集合导航属性确实公开了外键属性，您可以自动映射 fk 属性并且它会起作用，但您最终会忽略实际的 ( `virtual`) 导航属性。

此外，当涉及到域代码时，即您的记录系统，它有助于在阅读时公开所有内容，而不是在 AutoMapper 后面隐藏一些细节。考虑以下内容——它更加明确，虽然有些冗长，但我认为这不一定是一件坏事，因为它在单个源文件中显示了所有域传输代码：

```
var reg = new Registration
{
    name = dto.name,
    prop1 = dto.prop1,
    prop2 = dto.prop2,
    ...
    propN = dto.propN
}; 
```

将您在此处的额外行数与您在引导程序中需要的所有额外行（忽略、自定义解析器等）进行比较`CreateMap`。最后是你的电话，希望这会有所帮助。

# html - 在 VB 中无法通过 TagName 获取 HTML 元素

> ID：15582102
> 
> 赞同：0
> 
> 时间：2013-03-23T00:51:01.533
> 
> 标签：html, vb.net

我试图在我的 VB 代码中通过标签名称获取元素，就像我以前在 VBA 中一样，但无法弄清楚如何。我打开一个新的浏览器窗口，但从那时起代码就卡住了。

```
Public ie As New SHDocVw.InternetExplorer
Private Sub TEST(sender As Object, e As EventArgs) Handles MyBase.Load
    Dim Keyword As Long
    ie = New SHDocVw.InternetExplorer
    ie.Visible = True
    ie.Navigate("http://google.com/")
    Do Until ie.ReadyState = SHDocVw.tagREADYSTATE.READYSTATE_COMPLETE
        Application.DoEvents()
    Loop
    Dim Doc As HtmlDocument
    Doc = ie.Document
    Keyword = Doc.GetElementsByTagName("td")(8).InnerText
    MsgBox(Keyword)
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T02:39:56.850

问题已通过添加解决

```
Imports mshtml 
```

在代码的顶部。

# asp.net - 分配给gridview时找不到外键表数据字段？

> ID：15582103
> 
> 赞同：0
> 
> 时间：2013-03-23T00:51:02.220
> 
> 标签：asp.net, vb.net, gridview

我正在尝试将外键表数据字段分配给 gridview。它抛出错误。

> 在所选数据源中找不到名为“Dim_Hierarchy.Business_Unit_Name”的字段或属性。

## 代码背后

```
 Public Function GetInitiativeDataList(ByVal client_Idx As Integer) As List(Of Fact_Initiative)
    Dim fact_Initiative As IList(Of Fact_Initiative)
    Dim SGAEntities As New SGATLEntities()

    fact_Initiative = (From factInitiative In SGAEntities.Fact_Initiative Where factInitiative.Client_Idx = client_Idx).ToList()

    Return fact_Initiative
End Function 
```

## ASPX 页面

```
<asp:GridView ID="gvInitiavtives" runat="server" Width="100%" CssClass="Grid" 
      RowStyle-Width="30px" AutoGenerateColumns="false" HeaderStyle-CssClass="GridHeader"   RowStyle-CssClass="GridItem" AlternatingRowStyle-CssClass="GridAltItem">
      <Columns>
         <asp:BoundField DataField="Dim_Hierarchy.Business_Unit_Name" HeaderText="" HeaderStyle-Wrap="false" HeaderStyle-HorizontalAlign="NotSet" />
         <asp:BoundField DataField="Dim_Hierarchy.Business_Unit_Function" HeaderText="" HeaderStyle-Wrap="false" HeaderStyle-HorizontalAlign="NotSet" />
                ......
                ...... 
```

![在此处输入图像描述](../Images/c6c5aa652a061035d99f7362ea46ed4e.png)

我是否以正确的方式做事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T04:47:20.850

既然你喜欢使用`Entity Framework`. `Aspx`有一个`EntityDatasource`and 用于连接相关表`Include`，模型构建的每个导航属性都有该属性。[实体教程](http://www.asp.net/web-forms/tutorials/getting-started-with-ef)。然后你的绑定看起来像：

```
 asp:TemplateField...
  asp:Label Text='<%# Eval("tablename.fieldname") %>... 
```

# python - Python plot - 堆叠的图像切片

> ID：15582105
> 
> 赞同：6
> 
> 时间：2013-03-23T00:51:17.757
> 
> 标签：python, image, matplotlib, slice, stacked

我有一系列基本的 2D 图像（现在为简单起见 3 个），它们彼此相关，类似于电影中的帧：

在 python 中，我如何将这些切片堆叠在一起，如 image1->image2->image-3？我正在使用 pylab 来显示这些图像。理想情况下，堆叠框架的等距视图会很好，或者是允许我在代码/渲染图像中旋转视图的工具。

任何帮助表示赞赏。显示的代码和图像：

```
from PIL import Image
import pylab

fileName = "image1.png"
im = Image.open(fileName)
pylab.axis('off')
pylab.imshow(im)
pylab.show() 
```

![Image1.png 这里](../Images/43cedc92b1be1adaba1470f0b703a85a.png) ![Image2.png 在这里](../Images/9eb8017bb06579e63445c8d7d6a53ca5.png) ![Image3.png 在这里](../Images/14ab36d5fab850f970582e39f673dcdb.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-23T04:40:53.103

你不能用 imshow 做到这一点，但你可以用**contourf**，如果这对你有用。不过，这有点杂乱无章：

![在此处输入图像描述](../Images/f2aeb87e8ad308b998b6c054e8267373.png)

```
from mpl_toolkits.mplot3d import Axes3D
import numpy as np
import matplotlib.pyplot as plt

fig = plt.figure()
ax = fig.gca(projection='3d')

x = np.linspace(0, 1, 100)
X, Y = np.meshgrid(x, x)
Z = np.sin(X)*np.sin(Y)

levels = np.linspace(-1, 1, 40)

ax.contourf(X, Y, .1*np.sin(3*X)*np.sin(5*Y), zdir='z', levels=.1*levels)
ax.contourf(X, Y, 3+.1*np.sin(5*X)*np.sin(8*Y), zdir='z', levels=3+.1*levels)
ax.contourf(X, Y, 7+.1*np.sin(7*X)*np.sin(3*Y), zdir='z', levels=7+.1*levels)

ax.legend()
ax.set_xlim3d(0, 1)
ax.set_ylim3d(0, 1)
ax.set_zlim3d(0, 10)

plt.show() 
```

在 3D 中实现的文档在[这里](http://matplotlib.org/mpl_toolkits/mplot3d/api.html)。

正如 ali_m 建议的那样，如果这对您不起作用，如果您能想象到，您可以使用 VTk/MayaVi 来实现。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-23T01:42:42.823

据我所知，matplotlib 没有 3D 等效项`imshow`可以让您将 2D 数组绘制为 3D 轴内的平面。但是，[mayavi](http://docs.enthought.com/mayavi/mayavi/index.html)似乎具有[您正在寻找的功能](http://docs.enthought.com/mayavi/mayavi/auto/mlab_helper_functions.html#mayavi.mlab.imshow)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-02-19T17:11:33.063

这是使用 matplotlib 和剪切变换完成的一种完全愚蠢的方法（您可能需要更多地调整变换矩阵，以便堆叠的图像看起来正确）：

```
import numpy as np
import matplotlib.pyplot as plt

from scipy.ndimage.interpolation import affine_transform

nimages = 4
img_height, img_width = 512, 512
bg_val = -1 # Some flag value indicating the background.

# Random test images.
rs = np.random.RandomState(123)
img = rs.randn(img_height, img_width)*0.1
images = [img+(i+1) for i in range(nimages)]

stacked_height = 2*img_height
stacked_width  = img_width + (nimages-1)*img_width/2
stacked = np.full((stacked_height, stacked_width), bg_val)

# Affine transform matrix.
T = np.array([[1,-1],
              [0, 1]])

for i in range(nimages):
    # The first image will be right most and on the "bottom" of the stack.
    o = (nimages-i-1) * img_width/2
    out = affine_transform(images[i], T, offset=[o,-o],
                           output_shape=stacked.shape, cval=bg_val)
    stacked[out != bg_val] = out[out != bg_val]

plt.imshow(stacked, cmap=plt.cm.viridis)
plt.show() 
```

[![剪切变换堆栈](../Images/c1e9b0ec01856009a8c02311415963f6.png)](https://i.stack.imgur.com/fs7hu.png)

# ember.js - EmberJS：为什么将销毁的记录提交回服务器？

> ID：15582107
> 
> 赞同：2
> 
> 时间：2013-03-23T00:51:43.823
> 
> 标签：ember.js, ember-data

有时在我的 Ember 应用程序中，我使用 createRecord 创建了一些记录，但我不想将它们全部存储在服务器上。所以我`destroy`在调用之前调用我不需要的对象`store.commit()`。然而，它们仍然被发送到服务器。你如何防止这种情况发生？

我曾尝试`commit`在“下一个”Ember 运行中运行，但它也不起作用：

```
... do some clean up ...
Ember.run.next(self, function() {
    self.store.commit(); // The destroyed objects are committed nonetheless
}); 
```

谢谢！

PJ

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T01:16:03.247

`deleteRecord`是调用`DS.Model`实例的适当方法。复杂状态由 管理`DS.Store`，因此它与低级`destroy`方法分开协调删除。

# java - java 文件从 Fibonacci.java 更改为 MyFirstApp.class

> ID：15582108
> 
> 赞同：-1
> 
> 时间：2013-03-23T00:51:58.260
> 
> 标签：java, eclipse, class

我刚刚安装了 java 并试图编译示例代码。我将一个斐波那契序列程序复制到记事本中，将其保存为“Fibonacci.java”并在 Windows 命令提示符下编译它，如下所示：

javac斐波那契.java

输出：MyFirstApp.class

MyFirstApp 是我在 Eclipse 中工作的另一件事的名称。这是怎么回事？

感谢帮助。

代码：

```
public class Fibonacci {

   public static void main(String[] args) { 
      int N = Integer.parseInt(args[0]);
      int f = 0, g = 1;

      for (int i = 1; i <= N; i++) {
      f = f + g;
      g = f - g;
       System.out.println(f); 
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T01:00:19.370

请把源代码发给我们。

可能就像您忘记更改源代码一样简单

```
class MyFirstApp { .... 
```

至

```
class Fibonacci { ... 
```

？？？

你的类文件是早期编译的旧输出文件？

# android - 使用 SimpleDateFomat 与 JodaTime 的优缺点是什么？

> ID：15582110
> 
> 赞同：2
> 
> 时间：2013-03-23T00:52:29.777
> 
> 标签：android, android-datepicker

我正在 Android 中创建一个按钮 minSdkVersion="8" 和 targetSdkVersion="17"，供用户选择日期和时间。使用 onClick (selectDate) 方法如下：

```
public void selectDate(View view) {
    DialogFragment newFragment = new DatePickerFragment();
    newFragment.show(getSupportFragmentManager(), "DatePicker");
}

public static void populateSetDate(int year, int month, int day) {
    m_selectDateBtn.setText(month + "/" + day + "/" + year);
}

public static class DatePickerFragment extends DialogFragment implements
        DatePickerDialog.OnDateSetListener {

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {

        return new DatePickerDialog(getActivity(), this, m_year, m_month,
                m_day);
    }

    public void onDateSet(DatePicker view, int year, int month, int day) {
        populateSetDate(year, month, day);
    }
} 
```

在查看了有关如何解析将存储在按钮中的日期文本的其他一些关于 stackoverflow 的问题之后：

[Android中的字符串到日期/时间对象](https://stackoverflow.com/questions/3941357/string-to-date-time-object-in-android)

[如何识别 Java DateUtils.parseDate 中的祖鲁时区？](https://stackoverflow.com/questions/424522/how-can-i-recognize-the-zulu-time-zone-in-java-dateutils-parsedate)

**问题：我想知道使用 SimpleDateFormat 与**[Joda Time](http://joda-time.sourceforge.net/)的优缺点是什么？或者你会推荐什么其他日期类来做我想做的事？

[Joda Time](http://joda-time.sourceforge.net/)确实有一些使用 Joda Time 的理由，但我对 Date 类了解不多，无法知道这些陈述的真实性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T03:09:03.290

## 简单日期格式

**优点**：

*   便于使用。我用它所有的时间。
*   无需额外安装。
*   Android SDK 更新将自动更新。

**示例**：

```
final Date curDateTime = new Date();
SimpleDateFormat formatter = new SimpleDateFormat("hh:mma, MMM. dd");
String text = formatter.format(curDateTime); 
```

**缺点**：

*   [日期、日历、DateFormat、SQL、时间戳、Millis 问题](http://mestachs.wordpress.com/tag/jodatime/)

* * *

## 乔达时间

**优点**：

*   跨多个 Java 平台的类似用法。
*   支持其他日历，例如佛教和埃塞俄比亚日历。
*   自我报告更好的表现。

**缺点**：

*   需要安装包，可能需要来自 Joda.org 的更新。

* * *

## 结论

对于我需要的所有日期/时间格式，我很满意`SimpleDateFormat`并将继续使用它。对于我的需要，我知道没有正当理由切换到另一个库。

**另请参阅**：[用于日期解析的 SimpleDateFormat 的替代方案](https://stackoverflow.com/questions/9412205/alternatives-to-simpledateformat-for-date-parsing)

# ios - 我继承了 UIView。它的一些子视图是动画的。重新启动这些的正确方法是什么？

> ID：15582112
> 
> 赞同：0
> 
> 时间：2013-03-23T00:52:40.340
> 
> 标签：ios, animation, uiview, subclass, restart

好的，所以我将 UIView 子类化并且视图有一堆子视图。这些子视图是动画的。当我将另一个视图控制器推到顶部时，或者应用程序进入后台时，动画停止。

在我的子视图中重新启动这些动画的正确方法是什么。我不想让 View Controller 告诉 View 重新启动它们，因为我觉得 View 应该知道什么时候需要重新启动，而不会被另一个对象明确告知。

但是我不能在子类 UIView 上使用 layoutSubviews，因为正在发生的动画正在添加新的 UIImageViews。发生这种情况时，会在 UIView 子类上调用 layoutSubviews。所以 layoutSubviews 被调用了很多，我不能用它来重新启动动画。

想法？

更新 - 动画代码看起来像这样......但我认为这并不重要。

```
[UIView animateWithDuration:ANIMATION_DURATION delay:0 options:UIViewAnimationOptionCurveLinear     animations:^{
    [subview setFrame:finalFrame];
} completion:^(BOOL finished) {
    [subview removeFromSuperview];
}]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T02:56:35.840

使用 NSNotificationCenter 通知视图视图控制器再次出现，如下所示：

在您的 UIView 中，将其添加到 init 方法中：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(methodToExecuteWhenUIViewControllerComesBackUp:) name:@"Came Back" object:nil]; 
```

然后在您的“其他 viewController”中，在您再次展示原始控制器的方法中，添加：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"Came Back" object:nil]; 
```

然后，当您返回原始 viewController 时，您的 UIView 将收到通知。为每个要重新激活的子视图重复第一段代码。

当任何子视图被删除（释放）内存时，请确保执行：

```
[[NSNotificationCenter defaultCenter] removeObserver:self]; 
```

如果上面的代码没有执行，通知中心会尝试通知一个不再存在的对象，导致你的应用崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T02:57:54.783

不要使用`UIView Animation`，你最好使用`Core Animation`

在`CAAnimation`它有一个名为`removedOnCompletion`default 的属性将它`YES`设置为`NO`( `yourCAAnimation.removedOnCompletion = NO;`) 它将使您的应用程序从`background`到`foreground`，动画也`animated`

苹果说：

**完成时移除**

```
Determines if the animation is removed from the target layer’s animations upon completion.

@property(getter=isRemovedOnCompletion) BOOL removedOnCompletion
Discussion
When YES, the animation is removed from the target layer’s animations once its active duration has passed. Defaults to YES.

Availability
Available in iOS 2.0 and later.
Related Sample Code
MoveMe
Declared In
CAAnimation.h 
```

# php - 解析简单 JSON 数组时的问题

> ID：15582116
> 
> 赞同：0
> 
> 时间：2013-03-23T00:53:02.583
> 
> 标签：php, javascript, jquery, html

我一直在试图弄清楚这似乎是永远的事情。我的 PHP 工作正常。例如，如果我从选择下拉列表中选择“Grove Bow”，它将返回以下内容：

```
[{"wtype":"Grove Bow","was":"1.55","wcc":"5","wbdmin":"12","wbdmax":"37"}] 
```

问题在于在我编写的 .js 文件中解析成功回调函数中的数据：

```
$.post("get.php",
    {w:wname},
    function(data) {
        was = data[1].was;
        wcc = data[2].wcc;
        wbdmin = data[3].wbdmin;
        wbdmax = data[4].wbdmax;
        console.log($.parseJSON(data));
    }
); 
```

控制台返回我认为是一个空数组：

```
[Object]
0: Object
length: 1
__proto__: Array[0] 
```

如果我删除*$.parseJSON()*控制台返回的结果与我的 get.php 文件发布的结果相同：

```
[{"wtype":"Grove Bow","was":"1.55","wcc":"5","wbdmin":"12","wbdmax":"37"}] 
```

我需要访问数组的这些元素，正如我尝试将它们存储为变量所看到的那样（别担心，我之前在 .js 文件的顶部声明了它们）。

请停下来！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T01:31:26.973

[Jquery.post()](http://api.jquery.com/jQuery.post/)：

> **数据**
> 
> > 类型：PlainObject 或 String 与请求一起发送到服务器的普通对象或字符串。

PlainObject：对于一个方法的正常操作，你必须传递一个像这样的对象：

```
{ 'someKey' : 'someVal' , 'sK2' : 'sV2' } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T01:00:38.960

控制台返回你的对象数组

`console.log($.parseJSON(data[0]));`会给你你的对象

另外，您应该像这样访问您的数据：

```
var data=$.parseJSON(data);
var myObj=data[0];  
var was=myObj.was;  
var wcc=myObj.wcc;  
//and etc
//or just data[0].was, data[0].wcc 
```

当然更好的方法，如评论中所述，使用“json”数据类型，而不是手动调用 parseJSON

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T01:00:59.417

您正在尝试访问字符串，就像它是一个对象一样。

试试这个

```
$.post("get.php",
    {w:wname},
    function(data) {
        var json = $.parseJSON(data)[0];
        was = json.was;
        wcc = json.wcc;
        wbdmin = json.wbdmin;
        wbdmax = json.wbdmax;
    }
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T07:44:32.280

jQuery ajax 部分看起来不错，在回调函数中尝试纯 Javascript：

```
function(data) {
   var json = JSON.parse(data);
   console.log(json.wtype); //Grove Bow
   console.log(json.was); //1.55
   //and so on...
} 
```

# c# - 无法将引用枚举转换为引用动态？

> ID：15582121
> 
> 赞同：3
> 
> 时间：2013-03-23T00:54:18.840
> 
> 标签：c#, c#-4.0, dynamic, enums

给定一个函数声明

```
dynamic DoSomething(dynamic inputObject) 
```

我可以用枚举调用它`inputObject`：

```
MyEnum myEnum;
myEnum = DoSomething(myEnum); 
```

但是由于某种原因，如果函数要声明`inputObject`为 type`ref dynamic`而不是`dynamic`：

```
dynamic DoSomething(ref dynamic inputObject) 
```

由于无效转换，以下内容不起作用：

```
MyEnum myEnum;
DoSomething(ref myEnum); 
```

Enums 有什么特别的地方阻止我使用它们`ref dynamic`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T13:19:24.050

作为引用传递的唯一方法是将 myEnum 转换为动态类型，然后通过引用传递它。我认为我们应该仔细研究生成的 IL，以了解幕后发生的事情。让我们找出原因并分析这个程序：

```
 enum MyEnum{
     A,B
}

void Main()
{
    MyEnum  myEnum = MyEnum.B; //Assign a variable

    DoSomethingByEnum(myEnum); //Pass myEnum
    DoSomethingDynamicByValue(myEnum); //pass myEnum to a dynamic parameter

    dynamic dyn = myEnum;      //assign myenum to a dynamic variable
    DoSomethingDynamicByRef(ref dyn);    //pass it as a reference
}

MyEnum DoSomethingByEnum(MyEnum a)
{
   return a;
}

dynamic DoSomethingDynamicByValue(dynamic inputObject)
{
   return inputObject;

}

dynamic DoSomethingDynamicByRef(ref  dynamic inputObject)
{
  return inputObject;

} 
```

首先，我们调用 DoSomethingByEnum 按值传递变量 myEnum，然后调用 DoSomethingDynamicByValue 再次传递 myEnum 但隐式装箱为动态类型。这是在 MSIL 级别发生的情况：

```
Main:
  IL_0001:  ldc.i4.1    // MyEnum myEnum = MyEnum.B;
  IL_0002:  stloc.0     // myEnum popped from evaluation stack and stored in a local variable 
  IL_0003:  ldarg.0     
  IL_0004:  ldloc.0     // myEnum loaded from local variable at index 0 and passed to the function
  IL_0005:  call        DoSomethingByEnum
  IL_000A:  pop         
  IL_000B:  ldarg.0     
  IL_000C:  ldloc.0     // myEnum
  IL_000D:  box         MyEnum // dynamic dyn = myEnum;  
                       // myEnum Converted from value type to a true object reference of type dynamic
  IL_0012:  call        DoSomethingDynamicByValue 
```

DoSomethingByEnum(MyEnum) 和 DoSomethingDynamicByValue(dynamic) 之间的唯一区别是对变量 myEnum 进行装箱（通过创建新对象并将值类型中的数据复制到新分配的动态对象中来完成）。检查此[框操作码](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.box.aspx)

让我们看一下 DoSomethingByEnum(MyEnum) 和 DoSomethingDynamicByValue(dynamic) IL：

```
 DoSomethingDynamicByValue:
    IL_0000:  nop         
    IL_0001:  ldarg.1     
    IL_0002:  stloc.0      
    IL_0003:  br.s        IL_0005
    IL_0005:  ldloc.0      
    IL_0006:  ret         

DoSomethingByEnum:
    IL_0000:  nop         
    IL_0001:  ldarg.1     
    IL_0002:  stloc.0      
    IL_0003:  br.s        IL_0005
    IL_0005:  ldloc.0     
    IL_0006:  ret 
```

无论变量的类型如何，这两个函数的 IL 代码都是完全相同的。我们甚至可以拥有任何对象类型，但变量在调用之间传递和共享的方式不会改变。

让我们看看 DoSomethingDynamicByRef(ref dynamic) 中发生了什么。

继续主方法

```
Main:
    IL_0018:  ldloc.0     // myEnum
    IL_0019:  box         UserQuery.MyEnum
    IL_001E:  stloc.1     // dyn
    IL_001F:  ldarg.0     
    IL_0020:  ldloca.s    01 // loads the address of dyn onto the stack
    IL_0022:  call        UserQuery.DoSomethingDynamicByRef

DoSomethingDynamicByRef:
   IL_0000:  nop         
   IL_0001:  ldarg.1     
   IL_0002:  ldind.ref   //
   IL_0003:  stloc.0     
   IL_0004:  br.s        IL_0006
   IL_0006:  ldloc.0      
   IL_0007:  ret 
```

这个 IL 和前面两个例子的区别在于这两条指令来加载和获取地址：

```
 ldloca.s    01  // loads the address of dyn onto the stack

   ldind.ref       // Loads the object reference at address addr onto the stack as a type O 
```

我认为不可能传递不同对象类型的地址的原因在[ldloca.s](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.ldloca_s.aspx)和[ldind.ref上面的两条 IL 指令的 MSDN 页面中进行了解释](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.ldind_ref.aspx)

> 格式正确的 Microsoft 中间语言 (MSIL) 可确保以与指针类型一致的方式使用 ldind 指令。最初压入堆栈的地址必须与机器上对象的自然大小对齐

希望这可以澄清一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T13:22:36.520

`dynamic`实际上是`object`在编译之后，所以你实际上是在问为什么你不能：

```
void DoSomething(ref object input);

MyEnum myEnum;
DoSomething(ref myEnum); 
```

原因是，`ref`不能这样使用，请考虑以下情况如何违反类型安全：

```
void DoSomething(ref object input) {
    input = new object();
} 
```

因此，正如 Eric 在评论中提到的，`Enum`这里没什么特别的。

# c - C中的strtok和传递参数

> ID：15582122
> 
> 赞同：0
> 
> 时间：2013-03-23T00:54:19.233
> 
> 标签：c, arrays, pointers, strtok

我有一个函数，其目的是接收一个由空格分隔的数字数组，一次一个数字，将它们分配给这样的结构变量：

```
typedef struct coo {
    int x;
    int y;
} Coord;

typedef struct exer {
    Coord coords[1000];
} exercise;

int coordinates(char *sent){
    char * pal;
    int k=0;
    pal = strtok (sent," ");
    while (pal != NULL)
    {
        exercise.coords[k].x=*pal;
        pal = strtok (NULL," ");
        exercise.coords[k].y=*pal;
        pal = strtok (NULL," ");
        k++;
    }
    return 1;
} 
```

问题是稍后打印的坐标与发送的坐标不同。

如果我输入坐标 1 2 3 4 5 6，它会给我坐标 49 50 51 52 53。

先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T00:58:09.687

这是因为你得到了第一个*字符*的值。您得到的值`49`是字符的 ASCII 值`'1'`。

您必须将字符串转换为数字，例如[`strtol`](http://en.cppreference.com/w/c/string/byte/strtol)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T02:14:09.733

详细说明 Joachim Pileborg 的答案`pal`是一个指向角色的指针。`*pal`是 a `char`，它是一个整数值，表示 pal 指向的字符。*char*，是最小的可寻址整数类型。

如果您要使用 strtol，最好将您更改`coords`为`long`，以便类型匹配。好处是 strtok 在这种解析方面非常糟糕，你可以完全放弃它。

```
typedef struct {
    long x;
    long y;
} Coord;

/* returns the number of coordinates read. */
size_t read_coordinates(char *str, Coord destination[], size_t capacity);

int main(void) {
    #define EXERCISE_CAPACITY 1000
    Coord exercise[EXERCISE_CAPACITY];
    size_t count = read_coordinates("1 2 3 4 5 6", exercise, EXERCISE_CAPACITY);
}

size_t read_coordinates(char *str, Coord destination[], size_t capacity) {
    size_t x;
    for (x = 0; x < capacity; x++) {
        char *endptr = NULL;
        destination[x].x=strtol(str, &endptr, 10);
        if (endptr - str == 0) {
            // Stop when strtol says it can't process any more...
            break;
        }
        str = endptr + 1;

        destination[x].y=strtol(str, &endptr, 10);
        if (endptr - str == 0) { break; }
        str = endptr + 1;
    }
    return x;
} 
```

如果你必须使用`int`作为你的坐标类型，使用 sscanf 是明智的，有点像这样：

```
typedef struct {
    int x;
    int y;
} Coord;

/* returns the number of coordinates read. */
size_t read_coordinates(char *str, Coord destination[], size_t capacity);

int main(void) {
    #define EXERCISE_CAPACITY 1000
    Coord exercise[EXERCISE_CAPACITY];
    size_t count = read_coordinates("1 2 3 4 5 6", exercise, EXERCISE_CAPACITY);
}

size_t read_coordinates(char *str, Coord destination[], size_t capacity) {
    size_t x;
    for (x = 0; x < capacity; x++) {
        int n;
        if (sscanf(str, "%d %d%n", &destination[x].x, &destination[x].y, &n) != 2) {
            // Stop when sscanf says it can't process any more...
            break;
        }
        str += n;
    }
    return x;
} 
```

# c# - 子元素在 FlipView 内重复

> ID：15582127
> 
> 赞同：0
> 
> 时间：2013-03-23T00:54:53.743
> 
> 标签：c#, windows-8, windows-runtime, windows-store-apps, winrt-xaml

我有一个具有包含 NotebookPageCanvas 的 DataTemplate 的 FlipView。NotebookPageCanvas 派生自 Canvas 并包含一个 InkManager。我正在向此画布动态添加子元素，并且我发现子元素在 FlipView 的其他页面上重复出现。

例如，如果我从 FlipView 中的 10 个项目开始，当我在索引 0 处向画布动态添加一个 Rectangle 时，该矩形也将被添加到索引 3 处的画布中。我的 FlipView 中的三个项目一切正常，但是之后，我找不到子控件的行为模式。这是我的 FlipView XAML。

```
<FlipView
        x:Name="flipView"
        AutomationProperties.AutomationId="ItemsFlipView"
        AutomationProperties.Name="Item Details"
        TabIndex="1"
        Grid.RowSpan="2"

        ItemsSource="{Binding Source={StaticResource itemsViewSource}}" SelectionChanged="flipView_SelectionChanged" >

        <FlipView.ItemContainerStyle>
            <Style TargetType="FlipViewItem">
                <Setter Property="Margin" Value="0,137,0,0"/>
            </Style>
        </FlipView.ItemContainerStyle>

        <FlipView.ItemTemplate>
            <DataTemplate>

                <local:NotebookPageCanvas  x:Name="InkCanvas" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                    <Canvas.Background>
                        <SolidColorBrush Color="{Binding BackgroundColor}" />
                    </Canvas.Background>

                    <TextBlock Foreground="BlueViolet" Canvas.Left="0" Canvas.Top="100" Text="{Binding Title}" />

                </local:NotebookPageCanvas>

            </DataTemplate>
        </FlipView.ItemTemplate>
    </FlipView> 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T05:05:36.247

显然`FlipView`，当需要加载更多数据时，虚拟化正在回收现有项目。您只需要在画布与新的`DataContext`. 一种方法可能是使用绑定来填充画布的子项，并始终在添加新内容之前擦除现有内容。

# javascript - 检查其他数组上是否存在数组值

> ID：15582133
> 
> 赞同：0
> 
> 时间：2013-03-23T00:55:40.820
> 
> 标签：javascript, arrays

如何检查第一个数组中的至少一个值是否存在于第二个数组中？例如，如何检查 car_1 数组和 car_2 数组上是否有 BMW？

```
var cars_1 = new Array("Saab","Volvo","BMW");
var cars_2 = new Array("Honda","Mazda","BMW", "suzuki"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T01:01:28.590

[使用一些](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/some)完整的解决方案：

```
// will return true if at least one element of cars_1 is in cars_2
cars_1.some(function (e) {
    return cars_2.indexOf(e) >= 0;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T01:02:05.173

一种快速简便的方法：

```
function overlap(arr1,arr2) {
  for(var i = 0; i < arr1.length; ++i)
    if(arr2.indexOf(arr1[i]) != -1)
      return true;
  return false;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T01:02:07.763

一个快速简单的答案：

```
for (var i =0; i<cars_1.length; i++){
    for (var j=0; j<cars_2.length; j++){
        if(cars_2[j] == cars_1[i]) return true;
    }
}
return false; 
```

编辑：好的，更有效地回应评论:) Edit2：好的，更高效:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T01:04:20.650

一个简单的 O(m+n) 解决方案：

```
var cars_1 = ["Saab","Volvo","BMW"];
var cars_2 = ["Honda","Mazda","BMW", "suzuki"];

// build up a hash table of the cars in the 1st sequence:
var set_1 = {};
for (var i = 0; i < cars_1.length; ++i) {
    set_1[cars_1[i]] = true;
}

// look if there is a car in sequence 2 that is in set_1:
var has_intersection = false;
for (var i = 0; i < cars_2.length; ++i) {
    if (set_1[cars_2[i]] === true) {
        has_intersection = true;
        break;
    }
} 
```

也适用于任何浏览器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T01:04:53.163

如果您的浏览器支持它，您可以使用该[`.some`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/some)方法。

```
var cars1 = [...],
    cars2 = [...];

var res = cars1.some(function(a) {
    return cars2.indexOf(a) > -1;
}); 
```

如果没有，那么您可以创建自己的 shim：

```
function some(list, callback) {
    var len = list.length;

    for (var i = len; i--;) {
        if (callback(list[i], i)) {
            return true;
        }
    }
    return false;
}

var res = some(cars1, function(a) {
    return cars2.indexOf(a) > -1;
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-25T09:14:28.690

您还可以使用“过滤器”方法：

```
 var cars_1 = new Array("Saab","Volvo","BMW");
    var cars_2 = new Array("Honda","Mazda","BMW", "suzuki");
    var cars_3 = new Array("Audi");

    /* with underscore.js */
    var _hasIntersection = function (arr1, arr2) {
        var intArr = _.filter(arr1, function (elem) { return arr2.indexOf(elem) > -1 });
        return intArr.length;
    }

    /* or using Array.prototype.filter */
    var hasIntersection = function (arr1, arr2) {
        var intArr = arr1.filter(function (elem) { return arr2.indexOf(elem) > -1 });
        return intArr.length;
    }

    console.log(_hasIntersection(cars_1, cars_2)); // 1
    console.log(hasIntersection(cars_1, cars_2)); // 1
    console.log(hasIntersection(cars_1, cars_3)); // 0
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.7.0/underscore-min.js"></script>
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2013-03-23T00:58:32.220

有几种方法可以做到这一点：

[**指数（）**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)

```
var cars_1 = ["Saab","Volvo","BMW"];
var cars_2 = ["Honda","Mazda","BMW", "suzuki"];

cars_1.indexOf("BMW") != -1
// true 
```

# python-3.x - tkinter 入门辅助 Python3

> ID：15582134
> 
> 赞同：0
> 
> 时间：2013-03-23T00:56:03.160
> 
> 标签：python-3.x, tkinter, tkinter-entry

我是一个使用输入字段的 GUI，我希望删除按钮删除输入字段内索引中保存的结束字符。通过执行以下操作，我设法让我的清除按钮工作

```
entry.delete(0, END) #Deletes all values in the entry field 
```

我以为我可以执行以下操作来删除最终项目，但它不起作用。有任何想法吗

```
entry.delete(END) 
```

我将上面的“END”替换为一个数字，它将删除该数字，但我确信一定有更快的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T03:25:44.660

您可以计算文本的长度并将其用作范围的开始：

```
start = len(entry.get()) - 1
entry.delete(start, END) 
```

# javascript - 使用 javascript 创建通知，并在服务器要求时执行此操作

> ID：15582136
> 
> 赞同：-5
> 
> 时间：2013-03-23T00:56:13.377
> 
> 标签：javascript, web, client-side-scripting, server-side-scripting

我想在页面中心创建一个气泡通知（不刷新），并使该气泡无法关闭。我希望网络服务器能够以某种方式启用气泡。我对客户端和服务器的连接方式具有灵活性。气泡不需要（但可以）删除任何内容，但它确实需要覆盖内容。如果用户在触发器被激活后加载页面，我还需要出现气泡。

概括：

*   在服务器事件之后，向客户端发送消息（不知何故......）
*   用客户端语言制作气泡以覆盖页面内容（必须随屏幕滚动）
*   保持这个气泡直到另一个服务器事件发生

我相信这会有所帮助：服务器规格：- Apache/2.2.22 (Unix)

我将使用什么服务器和客户端代码来实现这样的连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T01:28:13.910

您可以使用许多不同的东西。您可能应该看看 Node.js 和 websockets。或者，您可以查看一些最近的解决方案，例如 Angular.js（由 Google 提供）和 Meteor。祝你好运！

# xcode - NSDate的LLDB显示不一致？

> ID：15582142
> 
> 赞同：1
> 
> 时间：2013-03-23T00:57:08.777
> 
> 标签：xcode, nsdate, lldb

我对下面红色下划线的差异感到困惑：

![在此处输入图像描述](../Images/5f41a5cb1380f5d5a9f1289a9aadd0c2.png)

为什么这个相同的 NSDate 对象在调试窗格中的 BST 中显示，但在 LLDB 终端中的 GMT 中，当被要求“打印“日期”的描述”时？

这是 Xcode 4.6.1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T01:40:21.880

An`NSDate`代表一个特定的时刻，没有考虑人类如何称呼那个时刻。如果您查看`NSDate`，您会注意到甚至没有`hour`、`minute`或`second`属性，更不用说`timeZone`属性了。时区是`NSCalendar`用于解释`NSDate`显示的一个特征。（您可能更熟悉`NSDateFormatter`；它在内部使用 an`NSCalendar`来解释日期。）

在这种情况下，Xcode 碰巧为变量面板配置日历与 LLDB 为调试控制台配置日历的方式略有不同。我不得不猜测调试控制台正在调用`-description`，它始终使用 UTC，而变量面板使用的是尊重当前时区的日期格式化程序。（您的 Mac 配置为使用 BST，对吗？如果不是，那是一个奇怪的选择......）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T04:06:45.273

布伦特的回答很好——但我想具体谈谈一个细节。lldb 为许多常见类型（包括`NSDate`. 如果您`p date`在调试器控制台中执行此操作，您将获得与在 Locals 窗口中看到的相同的输出。当您右键单击/控制单击变量并执行“打印描述”时，它相当于`po date`在控制台中编写——正如布伦特所说，它调用了该`-description`方法。

这不是控制台 vrs。本地窗口差异，或 Xcode vrs。lldb 的区别。一种访问方法是使用 lldb 的内置数据格式化程序，一种是调用`-description`.

# javascript - Select2 initSelection PreLoaded 数据不显示

> ID：15582146
> 
> 赞同：2
> 
> 时间：2013-03-23T00:57:54.683
> 
> 标签：javascript, jquery-select2

我正在使用 select2 将远程数据加载到选择中，输入标记具有预加载的值属性，该属性指向预选选项，当我加载页面时，它在右侧显示带有清除选项 (x) 的选择，但数据不显示。

这是我的代码：

```
 function FormatResult(Consig) {
    return Consig.NomCon;
}

function FormatSelection(Consig) {
    $('#strConNom').val(Consig.NomCon);
    return Consig.NomCon;
}

$("#strCon").select2({
placeholder: "Search",
minimumInputLength: 5,
allowClear: true,
ajax: {
    url: "LoadData.asp",
    dataType: 'jsonp',
    data: function (term, page) {
        return {
            q: term,
            CodCas: $('#strCas').val(),
        };
    },
    results: function (data, page) {
        return {results: data.ConsigNom};
    }
},
initSelection: function(element, callback) {
    var id=$(element).val();
    if (id!=="") {
        $.ajax("LoadData.asp", {
        dataType: 'jsonp',
            data: {
                CodCon: id,
                CodCas: $('#strCas').val(),
            },

        }).done(function(data) { 
        callback(data);
        });
    }
},
formatResult: FormatResult,
formatSelection: FormatSelection,
dropdownCssClass: "bigdrop",
escapeMarkup: function (m) { return m; }
}); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-03T22:11:30.257

确保在您的 initSelection 函数中，您的 LoadData.asp 传递单个对象而不是包含单个对象的数组。

错误的：

```
[{"id": 5, "text":"myValue"}] 
```

正确的：

```
{"id": 5, "text":"myValue"} 
```

这是您修改的功能。

```
initSelection: function(element, callback) {
    var id=$(element).val();
    if (id!=="") {
        $.ajax("LoadData.asp", {
        dataType: 'jsonp',
            data: {
                CodCon: id,
                CodCas: $('#strCas').val(),
            },

        }).done(function(data) { 
            callback(data[0]);
        });
    }
}, 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-28T13:58:27.160

我有一个类似的问题，我通过在输入元素的 html 中包含一个 value 属性来解决它，当然还有适当的 formatSelection 和 initSelection。

传入 select2 的 json 有两个字段 id 和 text。

这是我的js代码：

```
$( "#contributorNameSearchId" ).select2({
        placeholder: "Select a contributor",
        containerCssClass: "dropDown",
        minimumInputLength: 3,
        ajax: { 
            url: "getList?t=contributor",
            dataType: 'json',
            data: function (term, page) {
                return {
                    term: term, // search term
                    page_limit: 10,
                };
            },
            results: function (data, page) { 
                return {results: data};
            }
        },
        allowClear: true,
         formatSelection: function(data) { 
            return data.text; 
        },
        initSelection : function (element, callback) {
            var obj= {id:1,text:'whatever value'};
            callback(obj);
        } 
    }); 
```

和输入元素本身：

```
<input value="0000" name="contributorNameSearch" id="contributorNameSearchId"/> 
```

注意 value 属性的虚拟值。

* * *

你也有机会

```
callback(data); 
```

需要一个 data.something 代替（尽管您的 FormatSelection 似乎没问题）。检查从您的 LoadData.asp 返回的数据。

我希望这个对你有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-17T09:42:08.657

当 select2 完成加载时，编写以下代码

```
$(".ajax_select").select2("data", {"id": 5, "text": "Test"}); 
```

它将设置select2的默认选择。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-06T10:36:37.510

对我来说，我必须从初始设置中删除占位符选项 - 可能对其他人有用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-28T12:49:02.933

苦苦挣扎后，解决方法如下

**请注意，数据对象应与您的 repoFormatSelection 具有相同的键 var data = {id: 1, cardname: "Abolish"};**

**您将在所有答案中看到“文本”，但它应该与您的 json 变量相同**

**还有一件更重要的事情，确保将 value="0" 或一些虚拟值放在 select2 隐藏输入中**

```
$("#myselect").select2({
    allowClear: true,
    placeholder: "Search for a card",
    minimumInputLength: 3,
    ajax: {
            url: "search.php",
            dataType: 'json',
            quietMillis: 250,
            data: function (term, page) {
              return {
                 q: term, // search term
            };
        },
        results: function (data, page) { 
            return {results: data.items};
        },
        cache: true
    },
    initSelection: function (element, callback) {              
        var data = {id: 1, cardname: "Abolish"};
        callback(data);
    },
    formatResult: repoFormatResult,  
    formatSelection: repoFormatSelection, 
    escapeMarkup: function (m) {
        return m;
    } // we do not want to escape markup since we are displaying html in results
});

    function repoFormatResult(card) {
        var markup = '<div class="row-fluid">';

        if (card.cardimage != '')
        {
           markup += '<div class="span2" style="float:left; margin-right:10px"><a class="qtooltip" href="#" rel="' + card.cardimage + '" ><img src="' + card.cardimage + '" width="50px" /></a></div>';
        }

        markup += '<strong>' + card.cardname + '</strong> <small>' + card.editionname + '</small>'
        markup += '<div style="clear:both;"></div></div>';

        return markup;
    }

    function repoFormatSelection(card) {
        return card.cardname;
    } 
```

# mobile - 为响应式电子邮件设计重新定位表格元素

> ID：15582149
> 
> 赞同：-1
> 
> 时间：2013-03-23T00:58:15.317
> 
> 标签：mobile, responsive-design, media-queries

我正在尝试调整我在此处为响应式电子邮件创建的表格位置：

表 1 | 表 2

我将表 1 对齐放置在左侧，以便在桌面上这两个表可以很好地放在同一行。

我想在移动设备上做的是桌子 2 会向左移动，而桌子 1 会向右移动，仍然坐在同一条线上。

表 2 | 表格1

我尝试在媒体查询上使用 float 但没有运气，非常感谢任何帮助

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:20:10.977

我认为您实际上对简单地将两张桌子堆叠在一起感兴趣。如果是这种情况，您正在寻找类似的东西：

[在响应式电子邮件中对齐表格元素](https://stackoverflow.com/questions/15422920/im-designing-a-responsive-email-as-i-have-two-table-in-one-td-second-table)

如果我走在正确的轨道上，请告诉我，我可以提供更多信息。

# javascript - 如何将内容保存为文本文件

> ID：15582152
> 
> 赞同：2
> 
> 时间：2013-03-23T00:58:46.860
> 
> 标签：javascript, file, url, save, bookmarklet

[我从https://coderwall.com/p/lhsrcq](https://coderwall.com/p/lhsrcq)看到了内容可编辑的 url 技巧

```
 data:text/html, <html contenteditable> 
```

它允许您将浏览器用作 txt 文件，但在保存 html 页面时内容会丢失。

我制作了一个可以用作书签的字符串，它可以让您通过创建一个带有 src 的 iframe 来保存您输入的内容

```
 data: Content-type: application/octet-stream 
```

加上浏览器 url 中 contenteditable 元素的内容

[您可以在http://pastebin.com/4z8tttuA](http://pastebin.com/4z8tttuA)看到我的代码，然后将其复制到您的浏览器 url

我的问题是

1.  所有的空格都变成了 ' ' 并且回车消失了。这是我的内容可编辑元素是 div 的时候。我用textarea试过它也不起作用

2.  将文件命名为“下载”以外的名称（后来变为下载（1），下载（2）......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T14:54:52.997

我清理并修复了你所拥有的东西，在这里： http: [//pastebin.com/sJXVvRUB](http://pastebin.com/sJXVvRUB)

我*认为*它可以满足您的需求。如果需要，您仍然需要重新设置链接的样式，使其看起来像一个按钮。我也只在 Chrome 中测试过，所以它可能需要其他小的修改。

至于您的问题以及我如何解决它们：

1.  我不确定我是否完全理解问题的“空格”部分，除非您的意思是所有连续的空格都（错误地）保存为单个空格。实际上，这就是 HTML 呈现它的方式。我通过用替换你的来解决这个`note = note.replace("&nbsp;", "");`问题`note = note.replace('&nbsp;', ' ');`。您正在用任何内容替换不间断的空格。对于换行符，我只是在保存之前转义了注释：`escape(note)`。我还调整了调用，`replace()`使其更简单、更有针对性（至少在 Chrome 上）。
2.  为了控制文件名，我用链接替换了表单+按钮，这样我就可以使用此处记录的“下载”属性：[https ://developer.mozilla.org/en-US/docs/HTML/Element/a#attr -download](https://developer.mozilla.org/en-US/docs/HTML/Element/a#attr-download)（目前也大多仅受 Chrome 支持）。

希望这可以帮助！

# php - foreach 内部的 foreach

> ID：15582156
> 
> 赞同：0
> 
> 时间：2013-03-23T00:59:31.797
> 
> 标签：php, wordpress, foreach

我需要 foreach 中的 foreach 帮助。我正在使用 Wordpress 插件 Advanced Custom Fields 在转发器字段中创建转发器字段。然后，我使用以下代码在主循环外的前端显示（或尝试显示）它们：

```
 <?php
            //Loop Through Days and Sights
              $days = get_field('day_and_highlights');
              $n = 0;

              if($days){
                echo '<div>';
                  foreach($days as $day){ 
                    $n++;
                    echo '<h2> Day ' . $n . ': ' . $day['destination_dropdown'] . '</h2><br/>';
                    //Loop through Attractions
                    <?php
                    $attractions = get_field('attraction_list');
                    if($attractions){
                        echo '<ul class=\"list_attractions\">';
                        foreach($attractions as $attraction){
                            echo '<li class=\"single_attraction\"><p>' . $attraction['add_attraction'] . '</p></li>';
                        }; //end foreach
                        echo '</ul>';
                    }; //endif 
                  };
                echo '</div>';
              };
            ?> 
```

第一个 foreach 回声的一切都在现场。内部 foreach 不做千斤顶。我不能让它做任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T01:03:40.410

你有一个额外的 php 标签：

```
 //Loop through Attractions
             <?php
                $attractions = get_field('attraction_list');
                if($attractions){ 
```

尝试删除它。

此外，您的 IF 和 FOREACH 语句不应以分号结尾：

```
 }; //endif 
```

[http://www.php.net/manual/en/control-structures.foreach.php](http://www.php.net/manual/en/control-structures.foreach.php)

# svg - SVG：模式内的非缩放笔画不起作用？

> ID：15582157
> 
> 赞同：7
> 
> 时间：2013-03-23T00:59:35.853
> 
> 标签：svg

在模式中使用*vector-effect="non-scaling-stroke"*时，我在 Firefox 或 Chrome 中没有得到预期的结果，尽管 Opera 按预期工作......

例子：

```
<svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" height="100px" width="1000px">
<defs>
    <pattern id="ticks" viewBox="0 0 12 4" preserveAspectRatio="none" height="100%" width="10%">
        <path stroke="#000" vector-effect="non-scaling-stroke" d="M 0 0 L 0 4 M 1 0 L 1 1 M 2 0 L 2 1 M 3 0 L 3 2 M 4 0 L 4 1 M 5 0 L 5 1 M 6 0 L 6 3 M 7 0 L 7 1 M 8 0 L 8 1 M 9 0 L 9 2 M 10 0 L 10 1 M 11 0 L 11 1" />
    </pattern>
</defs>
<rect width="100%" height="100%" fill="url(#ticks)" /> 
```

[Firefox、Chrome 和 Opera 中的结果截图](http://i.stack.imgur.com/p9IZ9.png)

我做错了什么，或者这是 WebKit 和 Gecko 中的错误？如果是错误，是否有人知道解决方法？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T19:26:29.710

我没有 Opera 来测试这个解决方案，但它似乎在 Chrome 和 Firefox 上得到了预期的结果。

@galdre 是对的。您需要定义（下面分配`stroke-width`了一个值）。`0.1`此外，您还缺少结束语`</svg>`：

```
<svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" height="100px" width="1000px">
    <defs>
    <pattern id="ticks" viewBox="0 0 12 4" preserveAspectRatio="none" height="100%" width="10%">
        <path stroke-width="0.1" stroke="#000" vector-effect="non-scaling-stroke" d="M 0 0 L 0 4 M 1 0 L 1 1 M 2 0 L 2 1 M 3 0 L 3 2 M 4 0 L 4 1 M 5 0 L 5 1 M 6 0 L 6 3 M 7 0 L 7 1 M 8 0 L 8 1 M 9 0 L 9 2 M 10 0 L 10 1 M 11 0 L 11 1" />
    </pattern>
    </defs>
    <rect width="100%" height="100%" fill="url(#ticks)" />
</svg> 
```

# java - 我需要在 Java 中将基于像素的常规坐标更改为基于图表的坐标。如何？

> ID：15582158
> 
> 赞同：0
> 
> 时间：2013-03-23T00:59:37.087
> 
> 标签：java, graphics, charts, coordinates, pixel

我正在创建一个小游戏，您可以在其中围绕 27*27 网格移动块。

网格的每个正方形为 16*16 像素。

我使用 awt Graphics 中的“drawLine”函数创建了网格。我创建了许多行来创建跨越 JFrame 窗口/画布的网格。我需要将网格中的每个正方形分配给某种坐标。

例如，如果您曾经研究过 Minecraft 纹理和/或制作过纹理包，您就会注意到 icons.png 或 texture.png。它是一个 256*256 的 16*16 方格，每个方格上都有一个图像。当 Notch（或现在的 Jens）需要将图片中的图像引用到代码中时。他基本上认为：

“哦，我需要从icons.png中的坐标（1, 3）找到图像。”

1 代表 16*16 的正方形，即第一个水平块右侧的 1 个正方形。而 3 代表 16*16 的正方形，即垂直向下 3 个正方形。

这张图表中的点代表我在说什么。右一格，下三格。

## |1|2|3|4|5|6|

## |2|3|4|5|6|7|

## |3|•|5|6|7|8|

看，如何不尝试计算有多少 16 像素，而是让每个“1”坐标具有与 16 像素相同的值。

(1, 3) 16*16 的正方形必须是 (16, 48) 以像素为单位。

哦，天哪，我不善于解释事情。

* * *

这基本上是我为创建图表所做的一切。

```
 for (int i = 16; i <= 432; i += 16){

        /* Vertical Chart Lines: */ g.drawLine(i, 0, i, HEIGHT*2);
        /* Horizontal Chart Lines: */ g.drawLine(0, i, WIDTH*2, i);

    } 
```

我正在使用 Java Canvas，并将首选尺寸设置为 HEIGHT*2/WIDTH*2。

HEIGHT*2 或 WIDTH*2 仅表示窗口/或画布末端的基于像素的坐标。

我需要做什么来分配这些新坐标？我必须制作一个新图表吗？

哦，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T22:30:13.847

首先围绕 27*27 尺寸和 16 倍缩放因子组织所有内容。

因此，将您的代码更改为：

```
const int scale = 16;
for (int i = 0; i < 27; i++){

    /* Vertical Chart Lines: */ g.drawLine(scale*i, 0, scale*i, HEIGHT*2);
    /* Horizontal Chart Lines: */ g.drawLine(0, scale*i, WIDTH*2, scale*i);

} 
```

而且，要将“图表”坐标转换为“像素”坐标，只需执行以下操作：

```
int row = getRow(...); /* your code here */
int col = getCol(...); /* your code here */
int x = col * 16;
int y = row * 16; 
```

希望有帮助。

# java - Hibernate + PostgreSQL：使用排他锁进行延迟加载

> ID：15582159
> 
> 赞同：6
> 
> 时间：2013-03-23T00:59:38.050
> 
> 标签：java, spring, hibernate, postgresql

为了这个，我已经把头发扯了几天了。一段时间以来，我们一直在遇到一些排他性数据库锁问题，从而导致我们的生产系统出现性能问题。我能够仔细查看它，并注意到持有排他锁的查询是由 Hibernate 的延迟加载生成的选择。

我们使用 Spring 的事务管理，`@Transactional( readOnly= "true")`是在服务入口点定义的。我们使用每请求会话模型和映射到传输对象的实体。数据库默认隔离级别是读提交。JDBC 驱动程序配置为已提交读。我使用以下方法检查了实际事务的隔离级别：

```
select current_setting('transaction_isolation') 
```

哪个返回已提交的读取。我们使用 JPA 来配置 Hibernate 映射。我们没有在任何地方显式升级事务。在这个特定的事务中，我们只运行选择语句。打开 Hibernate SQL 日志记录我没有看到任何这些：

```
select ... for update 
```

仅记录简单的选择语句。

似乎这里正在发生两件事之一。我对已提交读的理解完全不正确，并且已提交读隔离级别应该导致在执行选择的事务期间持有独占行级锁。或者发生了其他事情并且错误地升级了事务持有的锁。

任何帮助，将不胜感激。

**编辑 1**：

好的，在这方面走了很长一段曲折的道路。事实证明，这与锁定完全无关。我用来检测锁的查询已过时，并且显示锁类型为“virtualxid”。一些挖掘告诉我们，virtualxid 是每个事务对自身使用的锁，因为 PostgreSQL 内部的原因与本次讨论无关。我们对真正的独占锁进行了另一个监控查询测试，但还没有看到。

这是我们用来监视“virtualxid”锁的查询，此时它更像是一个长时间运行的查询监视器：

```
SELECT pg_stat_activity.datname, pg_locks.mode, pg_locks.locktype, pg_locks.granted, pg_stat_activity.usename,pg_stat_activity.query,age(now(),pg_stat_activity.query_start) AS "age", pg_stat_activity.pid
FROM pg_stat_activity,pg_locks
LEFT OUTER JOIN pg_class ON (pg_locks.relation = pg_class.oid)
WHERE
  age(now(),pg_stat_activity.query_start) > interval '1 minute' AND
  pg_stat_activity.datname <> 'postgres' AND
  pg_locks.pid=pg_stat_activity.pid AND
  pg_stat_activity.query not like '%autovacuum%' AND
  pg_stat_activity.query not like '%COPY%stdout%'
  order by query_start; 
```

这是我们得到的一些输出：

```
<redacted> | ExclusiveLock | virtualxid | t       | <redacted> | SELECT current_timestamp | 01:03:51.809594 | 22578 
```

一个简单的 select current_timestamp 运行了一个多小时！！！

无论如何，对于那些感兴趣的人来说，看起来这些神秘的长时间运行的查询偶尔会耗尽我们的数据库连接池。因此，我们提高了连接池限制，并且实时站点恢复了嗡嗡声。我们在关键进程上设置了应用程序端超时和重试逻辑，以处理偶尔出现的问题。这些天来，我们通常至少有一个数据库线程卡在为这些奇怪执行的查询之一提供服务。绝对不理想:(

我们将尝试打开基于成本的自动吸尘器，看看这是否有助于解决问题。

**编辑 2**：

事实证明，这是一段很长的旅程，可能即将结束。为了应对这种行为，除了我们在上面实施的数据库查询监控之外，我们还加强了批处理错误报告。连同一些智能超时，这使我们能够将特定的应用程序用例与长时间运行的数据库查询相关联。这使我们能够对生产中出现的错误做出反应，以防止特定用途挂起 JVM 节点。

我们还能够解决为什么一个进程中长时间运行的只读 TX 会挂起连接到同一数据库的其他进程的问题。这就是事情变得有点奇怪的地方。我们使用 hibernate-memcached 将 hibernate 的二级缓存移动到一个共享的 memcached 服务器中，用于连接到同一数据库的所有 Java 进程。每当我们遇到奇怪的挂起行为时，JVM 进程中就会有大量的 memcached 客户端线程。

移除 hibernate-memcached 模块后，回到 ehcache 进行二级缓存，我们注意到奇怪的多 JVM 衰弱挂起消失了。我们仍然偶尔会收到电子邮件，告诉我们 TX 内部发生的事情超出了应有的程度。我们仍然偶尔会遇到单个 JVM 进程挂起，因为它有太多的这些长 TX 正在大规模进行。但是我们不再看到一个 JVM 中的进程以某种方式影响其他 JVM。而以前我们会看到其他节点无响应，直到我们杀死显示不良 TX 行为的初始节点。

这没有任何意义。但后来这个问题从来没有:)

——蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T01:48:02.553

首先，您需要Jim mlodgenski 和 Bruce Momjian 在 JBoss World 2009 上发表的**使用 Postgres 扩展 Hibernate 应用程序**的精彩演讲，以解决 Hibernate 和 PostgreSQL 最常见的问题（缓存、复制、连接池等）。哟可以在[这里](http://www.redhat.com/f/pdf/jbw/jmlodgenski_940_scaling_hibernate.pdf)找到它：

然后，如果您在延迟加载方面遇到问题，可以使用纯 SQL 发送直接查询：

```
String SQL_QUERY = "SELECT insurance_name, id, invested_amount, avg(i...
                 + "invested_amount - avg(invested_amount) OVER(PARTI...
                 + "FROM insurance ";
Query query = session.createSQLQuery(SQL_QUERY)
                    .addScalar("insurance_name", Hibernate.STRING)
                    .addScalar("id", Hibernate.LONG)
                    .addScalar("invested_amount", Hibernate.LONG)
                    .addScalar("a", Hibernate.DOUBLE)
                    .addScalar("diff", Hibernate.DOUBLE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T23:20:24.410

不知何故，hibernate-memcached 似乎是这个问题的根本原因。从我们的系统中删除 hibernate-memcached 使我们所有的问题，即使没有消失，至少开始表现得像普通的数据库问题，您希望发现增强和扩展应用程序。

我并不想对 hibernate-memcached 说任何坏话。我们在生产中成功使用了这个项目一年多，没有发生任何事故。更有可能与我们系统特有的其他东西发生冲突，而 hibernate-memcached 对我们来说是最容易改变的东西。

# objective-c - 复制期间应传输哪些文件头数据？

> ID：15582160
> 
> 赞同：0
> 
> 时间：2013-03-23T00:59:45.367
> 
> 标签：objective-c, cocoa

我在 MacOS 上对文件进行逐字节复制，因此我丢失了有关该文件的所有文件头数据（即 LastModified、CreateDate 等）。

我不想使用 copyItemAtURL，因为它没有给我我需要的细粒度控制，特别是允许取消复制、进度更新、暂停等功能。但我确实想模仿 copyItemAtURL 对文件的作用标头数据 - 我只是不知道那是什么。

我知道如何掌握基础知识，从源文件中获取 NSURLContentModificationDateKey、NSURLCreationDateKey，并将其应用于目标文件。

我的问题是：我还应该确保从原始文件传输到新文件吗？标签？安全信息？

任何建议都非常感谢！

编辑

[我确实在这里](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/TechniquesforReadingandWritingCustomFiles/TechniquesforReadingandWritingCustomFiles.html#//apple_ref/doc/uid/TP40010672-CH5-SW1%20Here)的苹果文档中找到了一些关于元数据的一般指导，但它并没有真正指出在什么条件下应该填充哪些元数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T03:03:59.810

这曾经由旧的基于 Carbon 的文件管理器中的[FSCopyObjectAsync](https://developer.apple.com/library/mac/#documentation/Carbon/Reference/File_Manager/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/c/func/FSCopyObjectAsync) API 支持，不幸的是，从 OS X 10.8（又名 Mountain Lion）开始，它已被弃用。

FSCopyObjectAsync 的文档将读者引导至[copyItemAtURL:toURL:error](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileManager/copyItemAtURL%3atoURL%3aerror%3a)或 POSIX [copyfile](https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man3/fcopyfile.3.html#//apple_ref/c/func/copyfile)函数。后者似乎提供了您正在寻找的控制。

*注意：我个人对 copyfile(); 没有任何了解。YMMV。*

一般来说，采用专门为复制文件而提供的高级 API 比使用低级原语滚动您自己的 API 更好。它们不仅会大大减少您必须编写的代码量；它们还将使您的应用程序面向未来，因为在将来的某些操作系统版本中添加到文件系统的任何内容很可能会自动得到支持。

为了完整起见，这里有一篇文章（书面预弃用）解释了如何使用 FSCopyObjectAsync执行[文件复制和进度指示器。](http://www.cimgf.com/2008/05/03/cocoa-tutorial-file-copy-with-progress-indicator/)

# sql-server - sql server 除以零错误

> ID：15582161
> 
> 赞同：2
> 
> 时间：2013-03-23T00:59:46.960
> 
> 标签：sql-server

任何方式我都有以下形式的查询

```
select 
(select count(*) from sometable where somecritiea) / ((select count(*) from sometable where somecritiea) + 0.000001) 
from sometable 
```

我将计数结果除以计数结果，因此空值不是问题。

当我运行它时，我得到一个“遇到除以零错误。”。注意除数中的 +0.000001。

如果我将枚举数（？）和除数插入一个新表中，然后执行相同的计算，它会按预期工作。

```
select 
(select count(*) from sometable where somecritiea) a/ ((select count(*) from sometable where somecritiea) + 0.000001) b
into testtable
from sometable 
```

从测试表中选择 a/b

这将返回没有错误的预期结果。

如果我跑

```
select * from testtable where b = 0
i get 0 records as expected. 
```

我真的失去了它，这是一个 5 分钟的工作，已经变成了一个 5 小时的混乱。

我也试过

```
select *
((select count(*) from sometable where somecritiea) + 0.000001) divisor
from sometable
where divisor = 0 
```

这不返回任何记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T01:32:38.040

老实说，我也无法重现您的问题，但这无论如何都应该有效。

```
WITH Divisor AS (select count(*)*1.0 BotCnt from sys.procedures),
    Dividend AS (select count(*)*1.0 TopCnt from sys.tables )
SELECT 
    CASE WHEN BotCnt = 0 THEN 0 ELSE TopCnt/BotCnt END,
    *
FROM sys.objects
CROSS JOIN Divisor
CROSS JOIN Dividend 
```

注意`*1.0`. 也就是将计数转换为小数。您可以轻松地使用显式转换。CROSS JOIN 仅起作用，因为两个 CTE 是单行的。否则使用带有 ON 子句的 INNER JOIN。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T01:35:15.750

这是我可以快速复制您的场景的最接近的方法，并且效果很好；返回 0.0000000：

```
with sometable as (
  select * from ( values 
    (0)
  ) sometable(value)
)
select 
  (select count(*) from sometable where value <> 0 )
/ 
( (select count(*) from sometable where value <> 0 ) + 0.000001 ) 
from sometable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T09:34:13.417

试试`NULLIF`你的除数

```
select 
(select count(*) from sometable where somecritiea) / NULLIF((select count(*) from sometable     where somecritiea) + 0.000001), 0) from sometable 
```

每当分母为 0 时，这将返回`NULL`而不是除以 0。如果您不想要`NULL`其他默认答案（例如 9），`ISNULL`请在整个查询中使用将其转换回 0。

# java - 在异步 servlet 中用新请求替换旧请求

> ID：15582162
> 
> 赞同：0
> 
> 时间：2013-03-23T01:00:05.347
> 
> 标签：java, servlets, asynchronous, httprequest, servlet-3.0

我编写了一个异步 servlet，将缓存对象中的更改提供给所有向 servlet 发送请求的客户端。

对于请求，客户端可以通过包含不同的参数来获取缓存的一部分。

我只是将请求存储在 ArrayList 中，并在发生更改时迭代它们以将响应发送回客户端。

一切都运行良好，除了现在我需要处理客户端将发送带有可能不同参数的第二个请求的情况。

发生这种情况时，我想用这个新请求替换我存储的旧请求。但要做到这一点，我需要知道请求是否来自同一个用户。有没有办法用 Servlets 3.0 测试请求是否来自同一个用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T01:11:22.470

必须满足旧的请求。您可以使用 Connection:closed 标头发送错误响应。

要关联来自同一客户端的请求，唯一的方法是通过 cookie。您可以比较两个请求中的会话 ID（这是一个 cookie）。如果任何传入请求没有会话，您应该建立一个会话（通过 request.getSession()），然后进行重定向，以便客户端使用 jsessionid cookie 重试请求。

```
if request.getSession(false)==null
    request.getSession(true);
    response.sendRedirect( request.uri +"?"+ request.query ) 
```

在您的情况下，重定向是必要的，因为通常需要一段时间才能返回响应，但我们希望尽快设置 cookie。

# wpf - 使用 C# 为 DataGrid 创建 ItemTemplate

> ID：15582166
> 
> 赞同：1
> 
> 时间：2013-03-23T01:00:36.980
> 
> 标签：wpf, wpf-controls, wpfdatagrid

这是 XAML。我想用 C# 做同样的事情。

```
<DataGrid x:Name="myDataGrid">
    <DataGrid.Columns>
        <DataGridTemplateColumn Header="Address">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBox Text="{Binding Path=Address}"/>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T08:21:17.263

如果您想`DataTemplate`在代码中创建，您应该使用`FrameworkElementFactory`( [msdn](http://msdn.microsoft.com/en-US/library/system.windows.frameworkelementfactory.aspx) )。

XAML：

```
<DataGrid x:Name="myDataGrid" AutoGenerateColumns="False" Loaded="myDataGrid_Loaded">
    <DataGrid.Columns>
        <DataGridTemplateColumn x:Name="templateColumnAddress" Header="Address" />
    </DataGrid.Columns>
</DataGrid> 
```

代码隐藏：

```
public void myDataGrid_Loaded(object sender, EventArgs e)
{
    FrameworkElementFactory tbHolder = new FrameworkElementFactory(typeof(TextBox));
    tbHolder.SetBinding(TextBox.TextProperty, new Binding("Address"));          
    var dataTemplate = new DataTemplate();
    dataTemplate.VisualTree = tbHolder;
    dataTemplate.DataType = typeof(DataGridTemplateColumn);
    templateColumnAddress.CellTemplate = dataTemplate;
} 
```

# c++ - ZMQ_DONTWAIT 标志不起作用？

> ID：15582169
> 
> 赞同：7
> 
> 时间：2013-03-23T01:01:00.323
> 
> 标签：c++, block, zeromq

我在我的应用程序中使用 ZeroMQ 进行网络连接，手册指出，通过将`ZMQ_DONTWAIT`标志提供给`flags`参数 in`send`或`recv`导致函数不阻塞线程。然而它在我的情况下不起作用：

```
 std::cout << "a";
            if(ToSend.try_pop(send))
            {
                std::cout << "b";
                local.send(send.data(),send.size(),ZMQ_DONTWAIT);
            }
            std::cout << "c";
            if(local.recv(recv.data(),Networking::max_packet,ZMQ_DONTWAIT))
                std::cout << "Received: " << (char*)recv.data() << std::endl;
            std::cout << "d" << std::endl; 
```

这打印：

```
abcdab 
```

我做了一个小课来让事情变得更容易：

客户端类（为简化起见，从所有“未使用”的东西中删除）

```
class client
{
public:
    client()
    {

    }
    inline bool init(unsigned short threads = 1)
    {
        Running = true;
        context = zmq_init (threads);
        if(context == NULL)
            return false;
        socket = zmq_socket (context, ZMQ_REQ);
        if(socket == NULL)
            return false;
        return true;
    }
    inline int connect(const char * address, unsigned short port)
    {
        return zmq_connect(socket,string_format("tcp://%s:%d",address,port).c_str());
    }
    inline bool send (void *data, size_t len_, int flags_ = 0)
    {
        message_t request (len_);
        memcpy ((void *) request.data (), data, len_);
        int rc = zmq_send (socket, request.data(), request.size(), flags_);
        if (rc >= 0)
            return true;
        if (rc == -1 && zmq_errno () == EAGAIN)
            return false;
        throw error_t ();
    }
    inline bool recv (void * data, size_t len_, int flags_)
    {
        message_t reply(len_);
        int rc = zmq_recv (socket, reply.data(), len_, flags_);
        if (rc >= 0)
        {
            memcpy (data,(void *)reply.data(), reply.size());
            return true;
        }
        if (rc == -1 && zmq_errno () == EAGAIN)return false;
        throw error_t ();
    }
    inline bool IsRunning()
    {
        return Running;
    }
private:
    void * context;
    void * socket;
    std::atomic<bool> Running;
}; 
```

这是工作线程：

```
namespace Data
{
    Concurrency::concurrent_queue <message_t> ToSend;
    void Processor(char * address, unsigned short port, unsigned short threads)
    {
        client local;
        if(!local.init(threads))return;
        if(local.connect(address,port) != 0)return;
        message_t recv(Networking::max_packet);
        message_t send(Networking::max_packet);
        while(local.IsRunning())
        {
            std::cout << "a";
            if(ToSend.try_pop(send))
            {
                std::cout << "b";
                local.send(send.data(),send.size(),ZMQ_DONTWAIT);
            }
            std::cout << "c";
            if(local.recv(recv.data(),Networking::max_packet,ZMQ_DONTWAIT))
                std::cout << "Received: " << (char*)recv.data() << std::endl;
            std::cout << "d" << std::endl;
        }
    }
}; 
```

问题以某种方式存在于此。我只是不知道为什么它不起作用。

这就是我启动工作线程的方式：

```
int Thread(char * address, unsigned short port, unsigned short threads)
{
    std::thread data(Data::Processor,address,port,threads);
    data.detach();
    while(!Data::status){}
    return Data::status;
}
int main(int argc, char* argv[])
{

    std::thread s(Server::RUN);

    Client::message_t tosend(14);
    memcpy((void*)tosend.data(),"Hello World !\0",14);

    Client::Data::ToSend.push(tosend);

    std::cout << Client::Thread("127.0.0.1",5555,1) << std::endl;

    s.join();
    return 0;
} 
```

这一切似乎都是正确的，那么为什么 recv/send 阻塞了我的线程？为什么国旗不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T04:19:06.597

它打印“abcd”，然后打印“ab”。这意味着代码

```
std::cout << "a";
if(ToSend.try_pop(send))
{
    std::cout << "b"; 
```

尽管您在问题末尾显示的代码暗示您只执行了一次 ToSend.push() ，但执行了两次。

您是否附加了调试器以查看挂起的线程以及它的调用堆栈是什么？

*   将 std::cout 放在 mutex/critsect 后面，这样您就知道一次只有一个线程在写入，并报告您是哪个线程。
*   将每个输出放在它自己的行上，这样你就不会因为缓冲而错过一个字母。
*   如果您不阻止数据，您希望如何接收它？你在某处有一个 select/poll/WaitForSingleObject 调用吗？

# mysql - 在 MySQL 中使用子查询进行更新

> ID：15582172
> 
> 赞同：0
> 
> 时间：2013-03-23T01:01:10.870
> 
> 标签：mysql, sql-update, subquery

我有一个需要在 MySQL 中运行的更新查询，但遇到了一些问题。我花了最后一个小时研究 SO 的解决方案，但找不到真正有效的解决方案。我需要执行以下操作：

```
UPDATE TABLE1 SET ID = (SELECT TABLE2.ID FROM TABLE2, TABLE1 
WHERE TABLE1.NAME=TABLE2.NAME) WHERE TABLE1.ID IS NULL 
```

我一直在收到`Error Code: 1242\. Subquery returns more than 1 row`错误。如何修改我的查询以使其成功运行？

基本上，我需要根据条件从另一个表中填写一列的所有值的空白。请在这个问题上指导我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T04:48:15.187

好吧，听起来您的姓名字段不是唯一的。您的子查询匹配多行，因此您需要找到一个唯一的 id 来匹配名称以外的其他内容，或者，如果您只想从子查询中获取第一个结果，请执行以下操作：

`UPDATE TABLE1 SET ID = (SELECT TABLE2.ID FROM TABLE2, TABLE1 WHERE TABLE1.NAME=TABLE2.NAME LIMIT 1) WHERE TABLE1.ID IS NULL`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T04:37:33.683

```
UPDATE TABLE1, TABLE2 
  SET TABLE1.ID = TABLE2.ID
  WHERE TABLE1.ID IS NULL
  AND TABLE1.NAME = TABLE2.NAME 
```

`NAME`假设所有名称在 TABLE1 和 TABLE2 中都是唯一的，可能应该做你想做的事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T01:05:44.003

从 TABLE2、TABLE1 中选择 TABLE2.ID，其中 TABLE1.NAME=TABLE2.NAME

此查询返回多于一行

```
Your Query:UPDATE TABLE1 SET ID = ( // here setting one value

TABLE1.NAME=TABLE2.NAME //  more than one matched records are available 
```

这里是设置id，但是子查询返回多行时不能设置一个值

# java - 在谷歌地图 api v2 中创建一个用于绘制标记的类

> ID：15582175
> 
> 赞同：0
> 
> 时间：2013-03-23T01:01:21.153
> 
> 标签：java, android, google-maps-android-api-2, markers

我正在尝试做一个用于在地图中绘制几个标记的类。我有一个问题，但这个问题是 Java 问题而不是 Android 问题。

我有一个主类，它实例化一个帮助类，该类定义了绘制标记的方法：

```
private GoogleMap mapa = null;
private MostrarBares pintaBares; //helper class

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_tapas);

    mapa = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.mapaTapas)).getMap();
    mapa.setOnMarkerClickListener(this);
    mapa.setOnInfoWindowClickListener(this);

    if(todos == true)
        pintaBares.addTodosMap(mapa);
    ..... 
```

现在，我编写了辅助类：

```
public class MostrarBares {
    public void addNo11OnMap(GoogleMap map)
    {
        map.addMarker(new MarkerOptions()
          .position(new LatLng(40.656106,-4.691306))
          .title("El No.11 La Taberna")
         .icon(BitmapDescriptorFactory.fromResource(R.drawable.no11)));
    }

    public void addTodosMap(GoogleMap map)
    {
      addNo11OnMap(map);
    }
} 
```

当调用 pintaBares.addTodosMap(mapa) 方法时，它会抛出空指针异常......有什么问题？

如果我想实现这些方法

```
@Override
public boolean onMarkerClick(Marker marker) 
{
    Toast.makeText(this, marker.getTitle(), Toast.LENGTH_LONG).show();

    return(false);
}

@Override
public void onInfoWindowClick(Marker marker)
{
    Toast.makeText(this, marker.getTitle(), Toast.LENGTH_LONG).show();
} 
```

我应该在哪里实施这些？在主班还是助手班？

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T12:56:13.787

改变

```
private MostrarBares pintaBares; //helper class 
```

至

```
private MostrarBares pintaBares = new MostrarBares(); //helper class 
```

您需要有一个可以调用方法的对象。

# php - PHP 中缺少 Session_start 函数

> ID：15582178
> 
> 赞同：6
> 
> 时间：2013-03-23T01:01:49.763
> 
> 标签：php, session

此代码简要说明了我的问题。php.ini 中不存在 session_start 函数。它应该！

```
<?php
if (!function_exists('session_start'))
            $error = 'error_session_missing';
echo "<h1>$error</h1>"; 
```

HTML 输出：

```
<h1>error_session_missing</h1><!DOCTYPE html PUBLIC "-//W3C//DTD ...cut... 
```

我已经在网上搜索了解决方案——所有相关的似乎都是为了不正确使用 session_start，而 php 文档并没有帮助解决这个问题。我梳理了 php.ini，尝试了 php5 的各种重新编译选项 - 但无论如何，这个错误仍然存​​在。

什么可能导致此功能不存在？

解决方法： cd /usr/ports/www/php5-session/ && make install clean

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T22:21:47.520

只需安装 php5_session 模块。

```
cd /usr/ports/www/php5-session
make install clean 
```

并重新启动 apache / php 进程

在[http://www.freebsdmadeeasy.com/tutorials/web-server/install-php-5-for-web-hosting.php了解更多信息](http://www.freebsdmadeeasy.com/tutorials/web-server/install-php-5-for-web-hosting.php)

# django - django 视图和上下文外键数据

> ID：15582183
> 
> 赞同：0
> 
> 时间：2013-03-23T01:02:13.060
> 
> 标签：django, django-templates, django-views

我有一个名为 Game 的模型，它对 User 有一个 ManyToManyField

```
class Game(models.Model):

    name = models.CharField(max_length=64, blank=False)
    image = models.URLField(blank=True)
    user = models.ManyToManyField(User, related_name='game', blank=True)
    port = models.IntegerField()

    def __unicode__(self):
        return self.name 
```

和一个视图

```
class Dashboard(TemplateView):
    template_name = 'dashboard.html'

    def get(self, request, *args, **kwargs):
        kwargs['games'] = Game.objects.filter(user=request.user)
        return super(Dashboard, self).get(request, *args, **kwargs)

    def get_context_data(self, **kwargs):

        context = super(Dashboard, self).get_context_data(**kwargs)

        return context 
```

这一切都有效，我脑海中的问题是，访问游戏数据的最佳方式是什么。在我的模板中，我可以执行以下任一操作来访问游戏数据。

1\. 像这样使用 User 对象

```
{% for g in user.game.all %} 
```

2.或者使用从View中专门传入的games对象

```
{% for g in games %} 
```

尽管两者都有效，但是否有推荐的方法来做这种事情，或者它们都有效吗？

如果不是都有效，想知道每种方法的支持和反对是什么

干杯

富有的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T04:52:20.530

我会说最好使用 RelatedManager 访问它们。这是您的第一个示例，`{% for g in user.game.all %}`它是为此目的内置和设计的，可以轻松访问相关模型。我不是专家，但既然你问了，我想我会就它的价值分享我的意见......

# javascript - Node.js：自定义命令行界面

> ID：15582184
> 
> 赞同：1
> 
> 时间：2013-03-23T01:02:20.547
> 
> 标签：javascript, node.js, service, command, command-line-interface

我是这件事的新手。我想为我的应用程序创建一个命令行界面，我可以在其中指定如下自定义命令：

```
myapp new /root/myapp
myapp start /server.js
myapp stop /server.js 
```

所以我可以与我的应用程序进行交互，就像我使用 mysql 之类的真实服务一样。是否可以在 node.js 中编写类似这样的服务？

在与他们合作方面，我正在寻找类似于[永远](https://github.com/nodejitsu/forever)或[流星](http://meteor.com/)的东西。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T02:33:37.673

您需要在 package.json 中指定 myapp ，如下所示：

```
{ "name": "myapp"
, "version": "0.0.1"
, "engines": [ "node >=0.4.0" ]
, "description": "myapp command line util."
, "author": "..."
, "contributors": []
, "keywords" : [ "myapp", "command", "shell" ]
, "repository":
  { "type" : "git"
  , "url" : "https://...."
  }
, "bin" : { "myapp" : "./bin/myapp.js" }
} 
```

[http://howtonode.org/how-to-module](http://howtonode.org/how-to-module)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-05T12:33:28.070

您可以使用 npm 中的命令模块来构建您自己的 CLI。只需输入：

```
npm install commander 
```

这将安装指挥官模块。

有关示例和文档，您可以浏览：[https ://www.npmjs.com/package/commander](https://www.npmjs.com/package/commander)

# arrays - perl - 数组和哈希的混合

> ID：15582194
> 
> 赞同：0
> 
> 时间：2013-03-23T01:04:04.427
> 
> 标签：arrays, perl, hash

我有以下代码：

```
 my @tmpRowArr = ();
    while (my $row1 = $sth->fetchrow_hashref()) {
      push (@tmpRowArr, $row1); 
    }
    $cached_query_hash{$uniqKey} = \@tmpRowArr; 
```

用于将数据库查询的结果存储到哈希引用中。已正确显示。然后我想读取这些值，但这不起作用：

```
 my @tmpRowArr2 = $cached_query_hash{$$value{'id'}} ; 
  foreach (@tmpRowArr2){
       print $_->{id} ; 
  } 
```

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T01:22:37.470

如果你结合你的两条线

```
$cached_query_hash{$uniqKey} = \@tmpRowArr; 
...
my @tmpRowArr2 = $cached_query_hash{$$value{'id'}} ; 
```

您可以将它们减少到

```
my @tmpRowArr2 = \@tmpRowArr; 
```

这应该说明为什么它不起作用：您正在将数组 ref 分配给数组。您需要另一个级别的取消引用：

```
my $aref = $cached_query_hash{$$value{'id'}};
for (@$aref) {
    print $_->{id};
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:37:23.033

似乎这可以解决问题：

第一行：

```
 $cached_panelists_hash{$$value{'id'}} = \@tmpRowArr; 
```

最后一行：

```
 my @tmpRowArr2 = @{ $cached_panelists_hash{$$value{'id'}} }; 
```

# php - 不同环境下的 PHP 会话问题

> ID：15582195
> 
> 赞同：0
> 
> 时间：2013-03-23T01:04:15.850
> 
> 标签：php, mysql, session, web, localhost

我通过会话传递用户变量。它在 localhost 上运行良好，但一旦在 Web 服务器上它会做一些奇怪的事情。

登录后，会话变量正常工作......直到您单击大约三个页面，它突然变得POOF！

注意“ `Welcome, jordan.`”而不是“ `Welcome, .`”也是左上角。

会话功能：http: [//imageshack.us/photo/my-images/32/loggedins.png/](http://imageshack.us/photo/my-images/32/loggedins.png/)

会议 POOF！ [http://imageshack.us/photo/my-images/515/loggedinno.png/](http://imageshack.us/photo/my-images/515/loggedinno.png/)

登录/创建会话变量代码：

```
<?php
        include_once 'gtheader.php';
        if (!isset($_SESSION['user']))
        {
        if (isset($_POST['user']))
        {
        $user = sanitizeString($_POST['user']);
        $pass = sanitizeString($_POST['pass']);
        if (preg_match($txtMatch,$user))
        {
        if ($user == "" || $pass == "")
        {
        $error = "Please enter all required fields";
        }
        else
        {
        $query = "SELECT * FROM gtmembers WHERE user='$user'";
        $result = queryMysql($query);
        $rank = mysql_result($result, 0, 'rank');
        if (!mysql_num_rows($result))
        {
        $error = "Username does not exist.";
        }
        else
        {
        $getPass = mysql_result($result, 0, 'pass');
        $salt = substr($getPass, 0, 64);
        $hash = $salt . $pass;
        for ($i = 0; $i < 100000; $i++) 
        {
        $hash = hash('sha256', $hash);
        }
        $hash = $salt . $hash;
        if ($hash == $getPass)
        {
        if ($rank != "Banned")
        {
        $userLow = strtolower($user);
        $_SESSION['user'] = $userLow;
        $_SESSION['rank'] = $rank;
        echo <<<_END
        <script type="text/javascript">
        window.location.href='index.php';
        </script>
        _END;
        echo "Successfully logged in. Click <a href='index.php'>here</a> to continue.";
        } 
```

标头代码：

```
 <?php //gtheader.php
        session_start();
        include_once 'gtfunctions.php';
        $loggedIn = FALSE;

        if (isset($_SESSION['user']))
        {
        $user = $_SESSION['user'];
        if ($user) echo "Current User: $user<br />";
        else echo "Current User: None<br />";
        $rank = $_SESSION['rank'];
        $loggedIn = TRUE;
        echo "is set SESSION['user']? Yes";
        }
        else echo "is set SESSION['user']? No";

        echo "<div id='header'><a class='header' href='index.php'> <h1 id='headerTitle'>$appname</h1></a>";
        if ($loggedIn == TRUE)
        {
        $query = "SELECT * FROM gtmessages WHERE recip='$user' AND status='0'";
        $result = queryMysql($query);
        if (mysql_num_rows($result) == 0) $num = "";
        else $num = "[".mysql_num_rows($result)."]";
        if ($rank == 'Owner' || $rank == 'Admin')
        {
        echo "Welcome, <a class='header' href='gtmembers.php?view=$user'>$user</a><a     class='header' href='gtmessage.php'>$num</a>. [<a class='header'     href='gtlogout.php'>Logout</a>] | <a class='header' href='gtadmin.php'>Admin</a><br />";
        }
        else
        {
        echo "Welcome, <a class='header' href='gtmembers.php?view=$user'>$user</a><a     class='header' href='gtmessage.php'>$num</a>. [<a class='header'     href='gtlogout.php'>Logout</a>]<br />";
        }
        }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T01:09:04.737

*即使数组为空，*isset()也会为数组返回 true。**

 *您应该改用*!empty()*。

**更新** 还要确保将服务器配置为以相同的方式存储变量。

**更新 2**

```
 <?php
            error_reporting(E_ALL);
            ini_set("display_errors", 1); 
    include_once 'gtheader.php';
    if (empty($_SESSION['user'])){
        if (!empty($_POST['user'])){
            $user = sanitizeString($_POST['user']);
            $pass = sanitizeString($_POST['pass']);
            if (preg_match($txtMatch,$user)){
                if (empty($user) || empty($pass)){
                    $error = "Please enter all required fields";
                }else{
                    $query = "SELECT * FROM gtmembers WHERE user='".mysql_real_escape_string($user)."'";
                    $result = queryMysql($query);
                    $rank = mysql_result($result, 0, 'rank');
                }
            }
            if (!mysql_num_rows($result)){
                $error = "Username does not exist.";
            }else{
                $getPass = mysql_result($result, 0, 'pass');
                $salt = substr($getPass, 0, 64);
                $hash = $salt . $pass;
                for ($i = 0; $i < 100000; $i++){
                    $hash = hash('sha256', $hash);
                }
                $hash = $salt . $hash;
                if ($hash == $getPass){
                    if ($rank !== "Banned"){
                        $userLow = strtolower($user);
                        $_SESSION['user'] = $userLow;
                        $_SESSION['rank'] = $rank;
                        echo "<script type=\"text/javascript\">window.location.href='index.php';</script>";
                        echo "Successfully logged in. Click <a href='index.php'>here</a> to continue.";
                    }
                }
            }
        }
    }
    ?> 
```

gtheader.php

```
 <?php //gtheader.php
    session_start();
            error_reporting(E_ALL);
            ini_set("display_errors", 1); 

            include_once 'gtfunctions.php';
            $loggedIn = FALSE;

            if(session_id() == "")
            {   session_start(); } 

            if(empty($_REQUEST['PHPSESSID'])){
                $session_id = session_id();
            } else {
                $session_id = $_REQUEST['PHPSESSID'];   
            }

            if (!empty($_SESSION['user'])){

                //This is not safe at all. Someone could change the user to %
                $user = $_SESSION['user'];

                    echo "Current User: $user<br />";
                //This is not safe either. Someone could change their rank to Admin.
                $rank = $_SESSION['rank'];

                $loggedIn = TRUE;
                echo "is set SESSION['user']? Yes";
            } else {
             $user = '';
             $rank = '';
             echo "is set SESSION['user']? No";
            }

            echo "<div id='header'><a class='header' href='index.php'> <h1 id='headerTitle'>$appname</h1></a>";
            if ($loggedIn == TRUE){
            //without filtering, someone could set the user to % which would return everyone from the DB.       
            $query = "SELECT * FROM gtmessages WHERE recip='".mysql_real_escape_string($user)."' AND status='0'";
            //This is not a standard function so we're assuming it's set in gtfunctions.php
            $result = queryMysql($query);
            //Here you're only checking if this is set, not how many
            if (empty(mysql_num_rows($result))){
                 $num = "";} else {
                     //If they trick your SQL statement into returning more than one...
                     $num = "[".mysql_num_rows($result)."]";
                 }
            if ($rank == 'Owner' || $rank == 'Admin')
            {
            echo "Welcome, <a class='header' href='gtmembers.php?view=$user'>$user</a><a class='header' href='gtmessage.php'>$num</a>. [<a class='header' href='gtlogout.php'>Logout</a>] | <a class='header' href='gtadmin.php'>Admin</a><br />";
            } else {
            echo "Welcome, <a class='header' href='gtmembers.php?view=$user'>$user</a><a     class='header' href='gtmessage.php'>$num</a>. [<a class='header'     href='gtlogout.php'>Logout</a>]<br />";
            }
       }
    ?> 
```

您需要在 Firefox 中使用 Firebug 之类的东西来检查标头并查看它是否将 cookie 传递给您进行会话，或者会话是否仅存储在服务器端。此外，如果会话是通过 GET 变量传递的。

对用户提供的信息（如会话）存在很多盲目信任。有人可能会劫持会话或欺骗更高的用户名或等级。代码中没有检查用户等级是否设置正确。

我清理了 gtheader 下的一些 SQL 内容。再次对直接传递给 SQL 的东西盲目信任。如果执行查询的 SQL 用户对表具有写入权限，那么您可能会受到注入攻击。*

# database - 我如何将 ER 的这一部分映射到关系模式，什么是适当的属性？

> ID：15582199
> 
> 赞同：2
> 
> 时间：2013-03-23T01:04:34.577
> 
> 标签：database, relational-database, subclass, entity-relationship, superclass

[这里](http://sdrv.ms/100X2bj "这是 ER 图的一部分，我有一个查询")是 ER 图的一部分。

这里，Customer 是超类，Private 和 Business 是子类，强制参与不相交，Business 客户又是 Silver、Gold 和 Diamond 子类的超类，强制参与不相交

快速解释：客户分为商业和私人。商业客户有三种会员选择：银牌：10% 折扣，金牌：25% 折扣，钻石：40% 折扣。将上述内容映射到关系模式的最佳方法是什么？什么是区分属性和通用属性？目前，我想出了以下几点：

4 张表 - PrivateCustomer（来自 Customer Superclass）和 SilverMember、GoldMember 和 DiamondMember（来自 Business Superclass）

`PrivateCustomer (CuID, CuFirstName, CuLastName, CuDOB, CompanyName, CuAddressLine1, CuAddressLine2, PhoneNumber, CuEmail, CuNotes, CuLocID)`

`SilverMember (CuID, ????? DiscPerc, DiscAccrued, CuLocID)`

`GoldMember (CuID, ???? DiscPerc, DiscAccrued, CuLocID)`

`DiamondMember (CuID, ???? DiscPerc, DiscAccrued, CuLocID)`

**CuLocID**是一个外键，用于删除与邮政编码、城市、国家/地区相关的传递依赖项（存储在不同表中的位置详细信息 - **tblCuLoc**）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T01:16:51.303

首先，我认为您的 ERM 设计不佳，因为您应该更好地使用角色模式，而不是将它们放入实体中。换句话说，membership options和`Silver`没有实体。`Gold``Diamond`

要回答您的问题，您可以通过三个选项来映射您的课程：

1.  类层次结构的所有属性都进入一个表（*单表继承*）。
2.  每个类的所有属性都进入一个单独的表（*类表继承*）。
3.  所有非抽象类的所有属性都进入一个单独的表（*具体表继承*）。

但老实说，您应该在之前修改您的 ERM。至少您应该为折扣会员（例如`Discount Group`）创建一个具有属性的实体`Percentage`，以及您的实体和您的实体`Name`之间的一对多关系。您还可以对客户实体本身使用角色模式，而不是为它们使用子类。这是我作为 UML 中的 ERM 以提高折扣成员资格的建议：`Business Customer``Discount Group`

![改进原始 ERM 的建议](../Images/457dc3a068c79c487c6cd24f10778734.png)

*通过使用例如 2\. 方法（类表继承*）将其映射到关系模式，您将具有以下关系：

*   `customer(id, ...)`
*   `business_customer(id, ...)`
*   `private_customer(id, ...)`
*   `discount_membership(customer_id, group_id, discount_accrued)`
*   `discount_group(id, name, discount_percantage)`

要强制多重性，`discount_membership`您应该在列上使用唯一的约束`customer_id`，当然还有正确的外键约束。

# java - 将文件解密为列表时拆分的行

> ID：15582202
> 
> 赞同：0
> 
> 时间：2013-03-23T01:04:54.757
> 
> 标签：java, inputstream, encryption, crypt

我试图读取我的加密文件并将其解密的内容放入一个列表中，但是最后的一些行随机拆分或一半到一个新行。有什么想法为什么要这样做？（在解密方法中）。顺便说一句，如果有帮助，缓冲区是 1024。

```
public Crypto() {
    try {
        PBEKeySpec keySpec = new PBEKeySpec(password.toCharArray());
        SecretKeyFactory keyFactory = SecretKeyFactory.getInstance("PBEWithMD5AndDES");
        SecretKey key = keyFactory.generateSecret(keySpec);
        ecipher = Cipher.getInstance("PBEWithMD5AndDES");
        dcipher = Cipher.getInstance("PBEWithMD5AndDES");
        byte[] salt = new byte[8];
        PBEParameterSpec paramSpec = new PBEParameterSpec(salt, 100);
        ecipher.init(Cipher.ENCRYPT_MODE, key, paramSpec);
        dcipher.init(Cipher.DECRYPT_MODE, key, paramSpec);
        } catch (Exception e) {
    }
}

@SuppressWarnings("resource")
public static List<String> decrypt(String file) {
    List<String> list = new LinkedList<String>();
    try {
        InputStream in = new CipherInputStream(new FileInputStream(file), dcipher);
        int numRead = 0;
        while ((numRead = in.read(buffer)) >= 0) {
            list.add(new String(buffer, 0, numRead);
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
    return list;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:53:52.373

a 上的`read`方法`Stream`只是将多个`Byte`s 读入缓冲区。因此，您的代码以 1024 大小的块读取文件，并将读取的每个块保存到`List`.

有几种方法可以`Stream`逐行阅读，我会推荐`BufferedReader`

```
final List<String> list = new LinkedList<String>();
try {
    final BufferedReader reader = new BufferedReader(new InputStreamReader(new CipherInputStream(new FileInputStream(file), dcipher)));
    String line;
    while ((line = reader.readLine()) != null) {
        list.add(line);
    }
} catch (IOException e) {
    e.printStackTrace();
} 
```

需要注意的一件事在很多场合都让我感到困惑，那就是它`InputStreamReader`会进行隐式转换`Byte`-`String`这需要编码。默认情况下，将使用平台编码，这意味着您的代码是平台相关的。您的原始代码`new String(byte[])`也是如此，默认情况下也使用平台编码。

我建议**始终**明确指定编码：

```
final BufferedReader reader = new BufferedReader(new InputStreamReader(new CipherInputStream(new FileInputStream(file), dcipher), "UTF-8")); 
```

或者对于`String`构造函数

```
new String(bytes, "UTF-8") 
```

`String`任何将 a 写入a 的代码也是如此`File`：

```
try {
    try (final BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(new CipherOutputStream(new FileOutputStream(file), dcipher), "UTF-8"))) {
        writer.append(data);
    }
} catch (IOException ex) {
    e.printStackTrace();
} 
```

这样，您可以避免在不同操作系统上运行应用程序时出现令人讨厌的意外，因为每个系列都使用不同的默认编码（`UTF-8`在 Linux、`ISO-8859-1`Windows 和`MacRoman`Mac 上）。

另一个注意事项是您不要关闭您的`Stream`（或`Reader`现在） - 这是必要的，它可以`finally`在 java 6 中的 a 或使用 java 7 的新`try-with-resources`构造中完成。

```
try (final BufferedReader reader = new BufferedReader(new InputStreamReader(new CipherInputStream(new FileInputStream(file), dcipher), "UTF-8"))) {
    String line;
    while ((line = reader.readLine()) != null) {
        list.add(line);
    }
} 
```

# java - Java Swing BasicStroke“上限”不适用于零度角

> ID：15582205
> 
> 赞同：3
> 
> 时间：2013-03-23T01:06:08.027
> 
> 标签：java, swing, graphics2d, stroke

这个问题是我前段时间问的一个问题的后续问题： [在 Java 中绘制带有尖角的边界路径](https://stackoverflow.com/questions/15039074/drawing-a-bordered-path-with-sharp-corners-in-java)

经过实验，我发现了一些可能是有意或可能是错误的行为，但我不希望任何一种方式。SSCCE：

```
import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.geom.GeneralPath;

import javax.swing.JFrame;
import javax.swing.JPanel;

public class CornerTest {
    private JFrame frame;

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    CornerTest window = new CornerTest();
                    window.frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    public CornerTest() {
        initialize();
    }

    private void initialize() {
        frame = new JFrame();
        frame.setBounds(100, 100, 450, 300);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel panel = new JPanel() {
            protected void paintComponent(Graphics g) {
                GeneralPath path;
                Graphics2D g2d = (Graphics2D) g;
                g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                        RenderingHints.VALUE_ANTIALIAS_ON);
                g2d.setStroke(new BasicStroke(15.5f, BasicStroke.CAP_ROUND, BasicStroke.JOIN_ROUND));
                g2d.setColor(Color.BLACK);
                path = new GeneralPath();
                path.moveTo(100, 100);
                path.lineTo(200, 100);
                path.lineTo(100, 50);
                g2d.draw(path);
            }
        };
        frame.setBackground(Color.CYAN);
        frame.add(panel);
    }
} 
```

通过取线`path.lineTo(100, 50);`并使用第二个参数，我们可以改变绘制路径的角度。有关各种示例，请参见下图。

![在此处输入图像描述](../Images/310771e95e216f91ba6deff8551012fa.png)

基本上，我`GeneralPath`在每个图像中绘制角度略微减小的 a。最终（在底部图像中）角度达到零。在这种情况下，圆形的“连接”不再被绘制。这种说法是有道理的，但又不是。我不确定这是否是有意的。有趣的是，如果将角度更改为**略大于**0（即通过将上面引用的线更改为`path.lineTo(100, 99.999);`圆角，则会再次绘制。

在我的应用程序中，路径可能会在自身上加倍（即创建零度角），在这种情况下，在这种情况下绘制连接圆在美学上更具吸引力。有什么办法可以破解 Java 源代码来完成这项工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T04:47:17.750

> 我正在绘制带有 500 多个点的非常长的路径，它会为我的绘制方法增加很多开销来检查每个“子路径”

不要在 paint 方法中构建 GeneralPath。您可以使用一个包装器类，它会在添加每个点时对其进行过滤。此处的代码将在每次要添加一个点时比较直线的斜率。当斜率相同时，为添加`moveTo`之前的最后一个点生成a `lineTo`。这将导致生成圆形笔划：

```
import java.awt.*;
import java.awt.Color;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.geom.*;
import java.util.List;
import java.util.ArrayList;

import javax.swing.JFrame;
import javax.swing.JPanel;

public class CornerTest {
    private JFrame frame;

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    CornerTest window = new CornerTest();
                    window.frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    public CornerTest() {
        initialize();
    }

    private void initialize() {
        frame = new JFrame();
        frame.setBounds(100, 100, 450, 450);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        final GeneralPath gp = new GeneralPath();
        MyGeneralPath path = new MyGeneralPath(gp);
        path.moveTo(100, 100);
        path.lineTo(200, 100);
        path.lineTo(100, 50);
//        path.lineTo(50, 100);
        path.flush();

        JPanel panel = new JPanel() {
            protected void paintComponent(Graphics g) {
                Graphics2D g2d = (Graphics2D) g;
                g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                        RenderingHints.VALUE_ANTIALIAS_ON);
                g2d.setStroke(new BasicStroke(15.5f, BasicStroke.CAP_ROUND, BasicStroke.JOIN_ROUND));
                g2d.setColor(Color.BLACK);
                g2d.draw(gp);
            }
        };
        frame.setBackground(Color.CYAN);
        frame.add(panel);
    }

    static class MyGeneralPath
    {
        private GeneralPath path;
        private List<Point2D.Double> points = new ArrayList<Point2D.Double>();

        public MyGeneralPath(GeneralPath path)
        {
            this.path = path;
        }

        public void moveTo(double x, double y)
        {
            flush();
            points.add( new Point2D.Double(x, y) );
        }

        public void lineTo(double x, double y)
        {
            Point2D.Double point = new Point2D.Double(x, y);

            checkSlope(point);

            points.add( point );
        }

        private void checkSlope(Point2D.Double p3)
        {
            int size = points.size();

            if (size < 2 )
                return;

            Point2D.Double p2 = points.get(size - 1);
            Point2D.Double p1 = points.get(size - 2);

            double slope1 = (p2.getY() - p1.getY()) / (p2.getX() - p1.getX());
            double slope2 = (p3.getY() - p2.getY()) / (p3.getX() - p2.getX());

            if (slope1 == slope2)
                moveTo(p2.getX(), p2.getY());
        }

        public void flush()
        {
            int size = points.size();

            if (size == 0)
                return;

            Point2D.Double point = points.get(0);
            path.moveTo(point.getX(), point.getY());

            for (int i = 1; i < size; i++)
            {
                point = points.get(i);
                path.lineTo(point.getX(), point.getY());
            }

            points.clear();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T01:29:44.250

不知道如何破解源代码，但您可以通过仅绘制一条线来自定义代码以解决此行为：

```
path = new GeneralPath();
path.moveTo(100, 100);
path.lineTo(200, 100);
path.lineTo(50, 100);

Rectangle bounds = path.getBounds();

if (bounds.height == 0)
{
    path = new GeneralPath();
    path.moveTo(bounds.x, bounds.y);
    path.lineTo(bounds.x + bounds.width, bounds.y);
}

if (bounds.width == 0)
{
    path = new GeneralPath();
    path.moveTo(bounds.x, bounds.y);
    path.lineTo(bounds.x, bounds.y + bounds.height);
}

g2d.draw(path); 
```

# javascript - CSS - 使用悬停效果时无法使我的图像居中。

> ID：15582209
> 
> 赞同：0
> 
> 时间：2013-03-23T01:06:23.647
> 
> 标签：javascript, html, css, web

根据标题，当我输入鼠标悬停时图像倾斜的指令时，我无法将图像居中。如果我删除我的 'tilt pic' div，我可以将图像居中。任何人都可以帮助指出我的错误。谢谢你。

```
<style>

img.downloadButton4{
display: block;
margin-left: auto;
margin-right: auto;
}

.download_Button4{
width: 80%;
max-width: 1240px;
min-width: 760px;
min-height: 100px;
margin: 0 auto;
}

.pic {
float: left;
height: 97px;
width: 242px;
margin: 0px;
overflow: hidden;

-webkit-box-shadow: 0px 0px 0px #111;
box-shadow: 0px 0px 0px #111; 
}

.tilt {
-webkit-transition: all 0.5s ease;
-moz-transition: all 0.5s ease;
-o-transition: all 0.5s ease;
-ms-transition: all 0.5s ease;
transition: all 0.5s ease;
}

.tilt:hover {
-webkit-transform: rotate(-10deg);
-moz-transform: rotate(-10deg);
-o-transform: rotate(-10deg);
-ms-transform: rotate(-10deg);
transform: rotate(-10deg);
}

</style>

<body>
....<div class="download_Button4">
....<div class="tilt pic">
....<a href="#" target="_blank">
....<img class="downloadButton4" src="image.png"></a>
....</div>
....</div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T01:18:04.710

让我换个说法，图像总是在中间，问题是“pic”类的宽度为 242px 并且向左浮动使 div 变小并向左移动

```
#container {
    width: 100%;
    border: 1px red solid;
    float: left;
}

.pic {
height: 97px;
width: 242px;
margin: 0 auto;
overflow: hidden;

-webkit-box-shadow: 0px 0px 0px #111;
box-shadow: 0px 0px 0px #111; 
} 
```

[http://jsfiddle.net/hLMTW/2/](http://jsfiddle.net/hLMTW/2/)

您可以将 .pic 扩展到 100% 宽度，或者像我一样，给它一个容器

希望这有帮助

# keyboard-shortcuts - Sublime Text：如何制作插入文本的快捷方式？

> ID：15582210
> 
> 赞同：37
> 
> 时间：2013-03-23T01:06:32.193
> 
> 标签：keyboard-shortcuts, sublimetext2, shortcut, sublimetext

我需要创建一个快捷方式，在光标处添加某些文本，例如 {sometext}，如何做到这一点？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-03-23T01:50:43.603

选择Sublime 的**Preferences下的****Key Bindings - User**项，然后添加以下示例行：

 **```
{"keys": ["ctrl+shift+c"], "command": "insert_snippet", "args": {"contents": "hello!"}} 
```

这将添加一个`CTRL`++`SHIFT`快捷`C`方式来插入*hello！*片段。

顺便说一句，不要忘记在前一个键绑定哈希中添加一个逗号，以便除最后一行之外的所有内容都以逗号结尾。IE：

```
[
    {"keys": ["..."], "command": "..." },
    {"keys": ["..."], "command": "..." },
    {"keys": ["..."], "command": "..." },
    {"keys": ["ctrl+shift+c"], "command": "insert_snippet", "args": {"contents": "hi!"}}
] 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-04-27T00:12:13.607

如果您已经[编写了一个片段文件](http://sublimetext.info/docs/en/extensibility/snippets.html)，例如 at `Packages/User/myFunction.sublime-snippet`，您可以使用

**将此添加到 Preferences > Key Bindings - User**

```
{ "keys": ["ctrl+1"], "command": "insert_snippet", "args": {"name": "Packages/User/myFunction.sublime-snippet"} } 
```

此示例将代码段绑定到`CTRL + 1`.

我在[Christopher Millward 的博客](http://www.millwardesque.com/speed-development-using-keyboard-triggered-snippets-sublime-text-2/)上找到了信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-27T14:34:52.373

@skyisred 我认为这个问题已经很好地回答了这一点。但是 Web 开发人员通常需要生成虚拟内容来填充元素。说“Lorem ipsum”。

## Sublime 的虚拟文本生成器

键入`lorem`并点击`Tab`

Sublime 将为您生成完整的 Lorem ipsum 虚拟文本。

## 创建快捷键来做到这一点

如果你真的想用捷径来做

**转到**
[在 Windows 上] 首选项 > 键绑定 - 用户
[在 OS X 上] Sublime Text > 首选项 > 键绑定 - 用户

```
[
     {"keys": ["ctrl+alt+i","ctrl+alt+s"], "command": "insert_snippet","args": {"contents": "A small snippet"}},
     {"keys": ["ctrl+alt+i","ctrl+alt+m"], "command": "insert_snippet","args": {"contents": "A medium-sized snippet, just good enough to fill in a normal span element."}},
     {"keys": ["ctrl+alt+i","ctrl+alt+l"], "command": "insert_snippet","args": {"contents": "A large snippet, a little more than the medium snippet and just good enough to fill in a paragraph element.This will make your work so much more easier."}}
     ] 
```

我写了一篇关于[在 Sublime Text 中创建自定义键盘快捷键](http://codezag.com/sublime-text-create-shortcuts-key-bindings/)的文章，这可能有助于您为 Sublime Text 中的其他常见操作创建快捷键。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-28T18:54:49.417

我也做了一些更复杂和完整的事情。就像按 ctrl+l 时的 \emph{}，ctrl+e ... 我的工作是在按 ctrl+shift+i 时编写 \textit{}。

转到首选项 > 浏览包。例如，您应该在其中保存一个名为“Text ital.sublime-snippet”的文件。在这个文件里面放这个代码：

```
<snippet>
    <description>Italic text</description>
    <content><![CDATA[
\\textit{${1:$SELECTION}}
]]></content>
    <!-- Optional: Set a tabTrigger to define how to trigger the snippet -->
    <!-- <tabTrigger>hello</tabTrigger> -->
    <scope>text.tex.latex</scope>
</snippet> 
```

然后转到首选项 > 键绑定。在里面你会写这个：

```
[
{ "keys": ["ctrl+shift+i"],  
    "context":  [
        {"key": "selector", "operator": "equal", "operand": "text.tex.latex"}],
    "command": "insert_snippet", "args": {"name":"Packages/LaTeXTools/Text ital.sublime-snippet"}}
] 
```

提醒 Packages/LaTeXTools/ 是 Preferences > Browse Packages 的位置。还要提醒您，您应该在您创建的两个不同的快捷方式之间插入一个逗号。

希望它有效！**

# javascript - Javascript跨域通信到iframe的父窗口

> ID：15582211
> 
> 赞同：1
> 
> 时间：2013-03-23T01:06:33.243
> 
> 标签：javascript, iframe, cross-domain

我写了一个记笔记的工具，从网页上抓取图像。它使用 javascript 书签将自身加载为当前窗口中的 iFrame：

```
javascript:(function(){   _my_script=document.createElement('SCRIPT');   _my_script.type='text/javascript';   _my_script.src='http://basereality.test/js/bookmarklet.js?rand='+(Math.random());   document.getElementsByTagName('head')[0].appendChild(_my_script); })(); 
```

当用户单击关闭按钮时，我希望能够通过从父窗口中删除 iFrame 来关闭该工具。

这样做的最简单方法是什么 - 是否可以在其内部关闭 iFrame？

我尝试过使用跨域消息发布。我有从父窗口到子 iFrame 的跨域发布，但不能从 iFrame 到父窗口。

我到目前为止的代码（可能包含问题）如下。

在父窗口中通过动态加载的Javascript：

```
function    addiFrame(domain){
    var iframe_url = "http://" + domain + "/bookmarklet";

    var div = document.createElement("div");
    div.id = bookmarkletID;

    var str = "";

    iframe_url += "?description=" + encodeURIComponent(document.title);
    iframe_url += "&amp;URL=" + encodeURIComponent(document.URL);

    str += "<div>";
    str += "<iframe frameborder='0' class='toolPanelPopup dragTarget' style='z-index: 1000'  name='bookmarklet_iframe' id='bookmarklet_iframe' src='" + iframe_url + "' width='550px' height='255px' style='textalign:right; backgroundColor: white;' />";

    str += "</div>";

    div.innerHTML = str;

    document.body.insertBefore(div, document.body.firstChild);
}

function jQueryLoadedCallback(){

    jQueryAlias = jQuery.noConflict();
    jQueryAlias('#' + bookmarkletID).bind('basereality.removeFrame', removeFrame);
}

function removeFrame(){
    alert("Calling remove frame");
    $("#" + bookmarkletID).remove();
} 
```

在 iFrame 中，关闭 iFrame 的按钮调用：

```
function removeFrame(){
    var params = {};
    params.message = 'basereality.removeFrame';
    parent.postMessage(params, "*");
} 
```

iFrame 中的 removeFrame 调用不会导致在父窗口中调用 removeFrame。

那么我应该如何实际删除 iFrame。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T01:30:46.330

postMessage 可能是您正在寻找的。Mozilla 已经记录了这一点，并且它具有相当不错的跨浏览器支持：

[https://developer.mozilla.org/en-US/docs/DOM/window.postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)

我还围绕这个概念编写了一个库，它可能需要一些调试，但它可以在 github 上找到：[https://github.com/tsharp/OF.Core.js/blob/master/js/of/window.messaging。 js](https://github.com/tsharp/OF.Core.js/blob/master/js/of/window.messaging.js)

从这里开始，您需要父窗口上的事件侦听器来处理所有传入请求......这将从父上下文中删除 iframe。这是注册消息接收事件的示例。

```
function registerWindowHandler() {
    if (typeof window.addEventListener !== 'undefined') {
    window.addEventListener('message', receiveMessage, false);
    } else {
    // Support for ie8
    window.attachEvent('onmessage', receiveMessage);
    }
} 
```

# c# - AutoCompleteBox 绑定到 Web 服务

> ID：15582214
> 
> 赞同：0
> 
> 时间：2013-03-23T01:06:43.920
> 
> 标签：c#, .net, silverlight

第一次在silverlight上工作，想将AutoCompleteBox（通过网络服务）与图像拇指和图像标题绑定，将通过图像标题搜索，我可以绑定图像标题

工作流程

1.  网络服务

    ```
    [WebMethod]
    public List<imagedata> Searchimage(string s)
    {
        var db = new PetaPoco.Database("sales");
        var list = from search in db.Query<imagedata>("select * from   imagedata").ToList() where search.imgname.Contains(s) select search;

        return list.ToList<imagedata>() ;
    } 
    ```

2.  xml

    ```
     <sdk:AutoCompleteBox x:Name="searchText"
                  Populating="searchText_Populating" />
                </StackPanel> 
    ```

3.  。CS

    ```
     private void searchText_Populating(object sender, PopulatingEventArgs e)
    {
        mySoapClient proxy = new mySoapClient();

        proxy.SearchimageCompleted +=
                             new EventHandler<SearchimageCompletedEventArgs>(proxy_ImageGetCompleted);
        proxy.SearchimageAsync(searchText.Text);
    }
    void proxy_ImageGetCompleted(object sender, SearchimageCompletedEventArgs e)
    {

        var  searchResults = new List<imagedata>(e.Result);
        var data = new List<string>();

        foreach (var x in searchResults)
        {
            data.Add(x.imgname);
        }
        searchText.ItemsSource = data;

        searchText.PopulateComplete(); 

    } 
    ```

想要为图像拇指和图像标题绑定图像 url，我应用以下过程

```
<sdk:AutoCompleteBox x:Name="searchText"  Populating="searchText_Populating">
                <sdk:AutoCompleteBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                 <Image x:Name="image1" Height="100" Width="100" Canvas.Left="0" Canvas.Top="0"></Image>
                    <TextBlock  VerticalAlignment="Center" Margin="10 0 0 0" />
                        </StackPanel>
                    </DataTemplate>
                </sdk:AutoCompleteBox.ItemTemplate> 
```

如何将集合绑定到自动完成框的数据模板，我可以为此使用字典吗？如果是，那么我如何将其绑定到数据模板

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T09:18:09.920

[ItemsControl 文档](http://msdn.microsoft.com/en-gb/library/system.windows.controls.itemscontrol%28v=vs.95%29.aspx)应该为您提供入门所需的几乎所有内容。

在您的情况下，您最终将使用 Binding 语法在 ItemTemplate 中设置 Image 的 ImageSource。为此，您需要使用值转换器将字符串转换为 Image 可以使用的内容。

```
<sdk:AutoCompleteBox x:Name="searchText"  Populating="searchText_Populating">
     <sdk:AutoCompleteBox.Resources>
         <local:ImageSourceConverter x:Key="ImageSourceConverter" />
     </sdk:AutoCompleteBox.Resources>
...
<Image x:Name="image1" 
       Height="100" 
       Width="100" 
       Canvas.Left="0" 
       Canvas.Top="0"
       ImageSource="{Binding Converter={StaticResource ImageSourceConverter}}">
</Image>
... 
```

和转换器：

```
public class ImageSourceConverter : System.Windows.Data.IValueConverter
{

    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        string source = value as string;
        if (source != null)
        {
            return new System.Windows.Media.Imaging.BitmapImage 
            { 
                UriSource = new Uri(source, UriKind.Absolute) 
            };
        }

        return source;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

# sql - 在 SSMS 中为常量 CHAR(1) 创建非 NULL 计算列

> ID：15582216
> 
> 赞同：4
> 
> 时间：2013-03-23T01:06:54.820
> 
> 标签：sql, sql-server, char, nullable, calculated-columns

在我的数据库中，我有一些计算列来帮助确保引用完整性约束。我使用计算列而不是默认值列，因为我使用的 LINQ2SQL 不理解数据库中的默认值。

我的尝试是使用

```
CAST('C' as CHAR(1)) 
```

它会自动转换为

```
(CONVERT([char](1),'C',0)) 
```

通过 SSMS。但是，这会导致 NULL-able CHAR(1) 列类型。

如果我只使用`'C'`或`ISNULL(NULL,'C')`（这会导致非 NULL 类型），则该列将被选为 VARCHAR(?)。而且，如果我将两者结合起来使用`ISNULL(NULL,CONVERT([char](1),'C',0))`，我又回到了一个 NULL-able CHAR(1)。

我想要这个有两个原因：

1.  计算列将参与与外部 CHAR(1) 列的关系。

2.  非 NULL CHAR(1) 直接映射到 LINQ2SQL 中的 .NET 字符类型。

* * *

**更新：**

它适用于我`ISNULL(CONVERT([char](1),'C',0),0)`，但我不确定“为什么”。如果有的话，似乎`ISNULL(..,0)`会进一步统一类型。

我会很高兴得到一个很好的解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T09:22:26.267

1) 在 SQL Server 中，没有前缀的字符串文字`N`总是被视为是从字符串`varchar(x)`的`x`长度派生而来的。

```
 +---------------+--------------+
| String Length |  Data Type   |
+---------------+--------------+
| 0             | varchar(1)   |
| 1-8000        | varchar(x)   |
| > 8000        | varchar(max) |
+---------------+--------------+ 
```

2) 如[计算列中所述](http://msdn.microsoft.com/en-us/library/ms191250%28v=sql.105%29.aspx)

> 数据库引擎根据使用的表达式自动确定计算列的可空性。即使只有不可为空的列存在，大多数表达式的结果也被认为是可空的，...可以通过指定 将可空的表达式转换为不可空的`ISNULL(check_expression, constant)`，其中常量是替换任何空结果的非空值。

3) 文件[`ISNULL ( check_expression , replacement_value )`](http://msdn.microsoft.com/en-us/library/ms184325.aspx)

> **返回类型**返回与 check_expression 相同的类型。如果提供文字 NULL 作为 check_expression，则返回 replacement_value 的数据类型。

这三条信息解释了您问题中的所有行为。

# php - 动态定义数组中的元素

> ID：15582217
> 
> 赞同：0
> 
> 时间：2013-03-23T01:07:04.610
> 
> 标签：php, youtube-api

我事先为标题道歉，但我什至不知道如何问这个问题。

我正在使用来自 youtube 提要的 json 数组。播放列表和用户上传的提要格式略有不同。为了减少代码量，我想根据提要的类型（播放列表/用户上传）定义元素并将其插入到我的 foreach 语句中。

用户上传的 foreach 语句如下所示：

```
foreach ($json_output->data->items as $data)    {} 
```

对于播放列表，它需要如下所示：

```
foreach ($json_output->data->items->video as $data)   {} 
```

我曾尝试事先在变量中定义语句，并在没有运气的情况下执行以下操作：

```
foreach ($json_output.$feedtype as $data)   {} 
```

或者

```
foreach ($json_output + $feedtype as $data)   {} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T01:17:47.777

我能想到的最简单的事情是在 feedtype 上创建一个 if 条件：

```
$feedtype = 'uploads'; // or playlist

if ($feedtype == 'uploads') {
    $array = $json_output->data->items;
}
else if ($feedtype == 'playlist') {
    $array = $json_output->data->items->video;
}

foreach ($array as $data) {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T01:41:58.463

$feed 已经定义好了，所以这就是我所做的。

```
foreach ( $json_output->data->items as $feed_data ){
if ($feed == 1) {$data = $feed_data;}
else {$data = $feed_data->video;} 
```

# css - MVC4 移动应用背景图片

> ID：15582220
> 
> 赞同：1
> 
> 时间：2013-03-23T01:07:36.370
> 
> 标签：css, asp.net-mvc, html, asp.net-mvc-4, background-image

这应该很简单，但我无法让它工作。它的 MVC 4 移动应用程序。此时没有对布局或 CSS 应用任何更改。所需要的只是添加背景图像（每一页都相同）。我在哪里以及如何做到这一点？我想我需要在`_Layout.cshtml`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T03:42:13.997

在 MVC 中，如果您想为页面添加背景，请转到

```
\yourappname\Content\Site.css 
```

在正文标签下，您可以添加每个页面都相同的背景图片。

# javascript - 在多个浏览器上测试 OpenTok flash，一个浏览器可以正常发布视频，但另一个浏览器显示黑屏

> ID：15582224
> 
> 赞同：1
> 
> 时间：2013-03-23T01:08:33.427
> 
> 标签：javascript, tokbox, opentok

连接到现有会话并尝试在其上发布时出现空白屏幕。出现 Flash 的“允许”/“拒绝”屏幕，但在按下允许后，发布者 div 中只有一个带有设置图标的黑屏。可能是什么问题？另一个浏览器实例也已打开，并且可以正常发布。

如果需要，这里是日志详细信息：

```
Connected [DEBUG] opentok: OpenTok JavaScript library v1.1.4  
[DEBUG] opentok: Release notes: http://www.tokbox.com/opentok/api/tools/js/documentation/overview/releaseNotes.html  
[DEBUG] opentok: Known issues: http://www.tokbox.com/opentok/api/tools/js/documentation/overview/releaseNotes.html#knownIssues  
[DEBUG] opentok: TB.setLogLevel(4)  
[DEBUG] opentok: TB.checkSystemRequirements()  
[DEBUG] opentok: TB.initSession(...sessionId...)  
[DEBUG] opentok: TB.addEventListener(sessionConnected)  
[DEBUG] opentok: TB.addEventListener(sessionDisconnected)  
[DEBUG] opentok: TB.addEventListener(connectionCreated)  
[DEBUG] opentok: TB.addEventListener(connectionDestroyed)  
[DEBUG] opentok: TB.addEventListener(streamCreated)  
[DEBUG] opentok: TB.addEventListener(streamDestroyed)  
[DEBUG] opentok: Session.connect(22055202)  
[DEBUG] opentok: TB.checkSystemRequirements()  
[DEBUG] opentok: TB.sessionConnected: ...sessionId... - 7626c1323c18263598e3f7661151a79a97a43bda  
[DEBUG] opentok: TB.dispatchEvent(sessionConnected)  
[DEBUG] opentok: TB.streamCreated  
[DEBUG] opentok: TB.dispatchEvent(streamCreated)  
[DEBUG] opentok: Session.subscribe(1695484121)  
[DEBUG] opentok: TB.dispatchEvent(loaded)  
[DEBUG] opentok: TB.streamPropertyChangedHandler  
[DEBUG] opentok: TB.dispatchEvent(streamPropertyChanged)  
[DEBUG] opentok: TB.initPublisher(opentok_publisher)  
[DEBUG] opentok: Session.publish([object Object]):undefined  
[DEBUG] opentok: Pending: publishToSession(...sessionId...,7626c1323c18263598e3f7661151a79a97a43bda,T1==cGFydG5lcl9pZD0yMjA1NTIwMiZzaWc9ZmEyNjkxYzA0OGY1MTA3ZDFjZDVmYWQ2Yjc5MzVkNjdiMDUyMDNjMzpzZX) on component publisher_1  
[DEBUG] opentok: TB.resize  
[DEBUG] opentok: Component loaded: publisher_1  
[DEBUG] opentok: callFlash: publishToSession(...sessionId... ,7626c1323c18263598e3f7661151a79a97a43bda,T1==lPS0xMzc1OTg2NzE5JnJvbGU9cHVibGlzaGVyJmNvbm5lY3Rpb25fZGF0YT11c2VybmFtZSUzRG9uZSUyQ3VzZXJMZXZlbCUzRDE=,22055202) on component publisher_1  
[DEBUG] opentok: TB.dispatchEvent(loaded)  
[DEBUG] opentok: TB.deviceAccessHandler: accessDialogOpened  
[DEBUG] opentok: TB.dispatchEvent(accessDialogOpened)  
[DEBUG] opentok: TB.resize  
[DEBUG] opentok: TB.deviceAccessHandler: accessDialogClosed  
[DEBUG] opentok: TB.dispatchEvent(accessDialogClosed)  
[DEBUG] opentok: TB.deviceAccessHandler: accessAllowed  
[DEBUG] opentok: TB.dispatchEvent(accessAllowed)  
[DEBUG] opentok: TB.micGainChangedHandler:50  
[DEBUG] opentok: TB.dispatchEvent(microphoneGainChanged)  
[DEBUG] opentok: TB.echoCancellationModeChangedHandler  
[DEBUG] opentok: TB.dispatchEvent(echoCancellationModeChanged)  
[DEBUG] opentok: TB.streamCreated  
[DEBUG] opentok: TB.dispatchEvent(streamCreated)  
[DEBUG] opentok: TB.deviceInactiveHandler  
[DEBUG] opentok: TB.dispatchEvent(deviceInactive)  
[DEBUG] opentok: TB.streamPropertyChangedHandler  
[DEBUG] opentok: TB.dispatchEvent(streamPropertyChanged)  
[DEBUG] opentok: TB.streamPropertyChangedHandler  
[DEBUG] opentok: TB.dispatchEvent(streamPropertyChanged)  
[DEBUG] opentok: Session.disconnect()  
[DEBUG] opentok: TB.sessionDisconnected(clientDisconnected)  
[DEBUG] opentok: Session.disconnectComponents() - disconnecting publishers and subscribers  
[DEBUG] opentok: Pending: unpublishFromSession(...sessionId...) on component publisher_1  
[DEBUG] opentok: callFlash: unpublishFromSession(...sessionId...) on component publisher_1  
[DEBUG] opentok: Session.cleanupConnection() - removing controller  
[DEBUG] opentok: TB.dispatchEvent(sessionDisconnected)  
[DEBUG] opentok: Session.cleanup()  
[DEBUG] opentok: Pending: cleanupView() on component publisher_1  
[DEBUG] opentok: callFlash: cleanupView() on component publisher_1  
[DEBUG] opentok: Session.unsubscribe(subscriber_1695484121_1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:59:21.970

想通了，希望它可以帮助某人。在较旧版本的 Flash 中，如果一个浏览器可以访问网络摄像头，则其他浏览器无法访问，因此一个浏览器上会出现黑屏，而另一个浏览器上会出现视频。

将闪存更新到最新版本似乎解决了我的问题。

# objective-c - 获取某个点周围的位置半径

> ID：15582225
> 
> 赞同：0
> 
> 时间：2013-03-23T01:08:35.267
> 
> 标签：objective-c, cocos2d-iphone

我需要获取某个点周围的点的位置。艾：

[x] [x] [ **2** ] [x] [x]

[x] [ **2** ] [ **1** ] [ **2** ] [x]

[ **2** ] [ **1** ] [ **c** ] [ **1** ] [ **2** ]

[x] [ **2** ] [ **1** ] [ **2** ] [x]

[x] [x] [ **2** ] [x] [x] *（1 = 半径 1，2 = 半径 2，c = 中心点）*

现在我用*`(CCSprite = [array objectAtIndex:i] CGPoint pos = sprite.position`)* `(pos.x+1,pos.y)` , `(pos.x-1,pos.y)`,获取坐标`(pos.x,pos.y+1)`，`(pos.x,pos.y-1)`然后将它们添加到 中`array`，然后在`for`循环中运行等于半径的次数。但是我无法添加已经在数组中的位置并使其在半径大于 1 的情况下正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T22:22:30.557

我自己弄清楚了，但感谢那些帮助过的人。这假设在您的最终数组中，您在索引 0 处添加了中心坐标。最终结果将是一个数组（在本例中为attackableTiles），其中包含 CCSprites（您可以从中获取坐标），其位置围绕一个中心点指向某个半径。如我原来的问题所述。

```
int timesThrough = 0;
int pRange = (the desired radius)
//(attackableTiles and goingToAddTiles are both NSMutableArrays)
if (timesThrough < pRange) {
        for (int i = 0; i < attackableTiles.count; i++) {
            if (attackableTiles.count < ((pRange*pRange) +((pRange+1)*(pRange+1)))) {
                CCSprite * tile = [attackableTiles objectAtIndex:i];
                CGPoint pos = [self tileCoordForPosition:tile.position];
                CGPoint posXUp1 = ccp(pos.x+1, pos.y);
                CGPoint posXDown1 = ccp(pos.x-1, pos.y);
                CGPoint posYUp1 = ccp(pos.x, pos.y+1);
                CGPoint posYDown1 = ccp(pos.x, pos.y-1);
                CCSprite * addingTileXUp1 = [CCSprite spriteWithFile:@"Icon-72.png"];
                addingTileXUp1.position = [self positionForTileCoord:posXUp1];
                CCSprite * addingTileXDown1 = [CCSprite spriteWithFile:@"Icon-72.png"];
                addingTileXDown1.position = [self positionForTileCoord:posXDown1];
                CCSprite * addingTileYUp1 = [CCSprite spriteWithFile:@"Icon-72.png"];
                addingTileYUp1.position = [self positionForTileCoord:posYUp1];
                CCSprite * addingTileYDown1 = [CCSprite spriteWithFile:@"Icon-72.png"];
                addingTileYDown1.position = [self positionForTileCoord:posYDown1];

                addedXUp1 = FALSE;
                addedYUp1 = FALSE;
                addedXDown1 = FALSE;
                addedYDown1 = FALSE;

                for (int i = 0; i < attackableTiles.count; i++) {
                        CCSprite * tile = [attackableTiles objectAtIndex:i];
                        if (CGPointEqualToPoint(tile.position, addingTileXUp1.position)) {
                            addedXUp1 = TRUE;
                        }    
                }
                if (!addedXUp1) {
                    [goingToAddTiles addObject:addingTileXUp1];
                }

                for (int i = 0; i < attackableTiles.count; i++) {
                    CCSprite * tile = [attackableTiles objectAtIndex:i];
                    if (CGPointEqualToPoint(tile.position, addingTileYUp1.position)) {
                        addedYUp1 = TRUE;
                    }
                }
                if (!addedYUp1) {
                    [goingToAddTiles addObject:addingTileYUp1];
                }

                for (int i = 0; i < attackableTiles.count; i++) {
                    CCSprite * tile = [attackableTiles objectAtIndex:i];
                    if (CGPointEqualToPoint(tile.position, addingTileXDown1.position)) {
                        addedXDown1 = TRUE;
                    }
                }
                if (!addedXDown1) {
                    [goingToAddTiles addObject:addingTileXDown1];
                }

                for (int i = 0; i < attackableTiles.count; i++) {
                    CCSprite * tile = [attackableTiles objectAtIndex:i];
                    if (CGPointEqualToPoint(tile.position, addingTileYDown1.position)) {
                        addedYDown1 = TRUE;
                    }
                }
                if (!addedYDown1) {
                    [goingToAddTiles addObject:addingTileYDown1];
                }

                [attackableTiles addObjectsFromArray:goingToAddTiles];
                [goingToAddTiles removeAllObjects];
                timesThrough++;

            }

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T03:12:32.430

看这个图，它显示了半径 3 的偏移量：

![半径 3 图](../Images/ac24853e352c461256f2237a17a77029.png)

我将单元格分为四组，分别标记为“象限 1”到“象限 4”。请注意，在每个组中，所有 x 偏移量都具有相同的符号，并且所有 y 偏移量具有相同的符号。在所有 12 个单元格中，`abs(x) + abs(y) = radius`. 因此，考虑到所有这些，我们可以编写一个循环来访问半径为 3 的所有单元格：

```
int radius = 3;
for (int i = 1; i < radius; ++i) {
    int j = radius - i;
    [self visitCellAtXOffset:+j yOffset:+i]; // quadrant 1
    [self visitCellAtXOffset:-i yOffset:+j]; // quadrant 2
    [self visitCellAtXOffset:-j yOffset:-i]; // quadrant 3
    [self visitCellAtXOffset:+i yOffset:-j]; // quadrant 4
} 
```

当然，您可以将半径从 1 循环到您需要的任何值。如果您还想访问中心单元格（偏移量 0,0），请在循环外单独调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T03:20:46.577

我认为您实际上在这里寻找的是网格上每个点的*曼哈顿距离：*

[http://en.wikipedia.org/wiki/Taxicab_geometry](http://en.wikipedia.org/wiki/Taxicab_geometry)

您可以简单地计算任意两个点`abs( x1 - x2 ) + abs( y1 - y2 )`，因此无需对每个半径重复计算。只需保持 x1,y1 固定并遍历所有 x2,y2 点。

如果您正在寻找实际上是圆形的东西，则*欧几里得距离*由下式给出`sqrt( (x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2) )`

# javascript - 显示但禁用所见即所得按钮

> ID：15582226
> 
> 赞同：0
> 
> 时间：2013-03-23T01:08:47.267
> 
> 标签：javascript, ckeditor

我在权限决定您拥有的内容编辑级别的环境中运行 CKEditor。一项要求是为所有人显示按钮，但禁用某些按钮的点击事件。

我尝试了许多 jQuery 解决方案（attr、off、preventDefault、prop 等），但它们都不起作用，至少我是如何尝试的。

CKFinder 生成的示例 HTML，“添加图像”按钮：

```
<a id="cke_22" 
    class="cke_button cke_button__image cke_button_off " "="" 
    href="javascript:void('Image')" title="Image" tabindex="-1" hidefocus="true" role="button" aria-labelledby="cke_22_label" aria-haspopup="false" 
    onkeydown="return CKEDITOR.tools.callFunction(56,event);" 
    onfocus="return CKEDITOR.tools.callFunction(57,event);" 
    onmousedown="return CKEDITOR.tools.callFunction(58,event);" 
    onclick="CKEDITOR.tools.callFunction(59,this);return false;">

    <span class="cke_button_icon cke_button__image_icon">&nbsp;</span>
    <span id="cke_22_label" class="cke_button_label cke_button__image_label">Image</span>
</a> 
```

我在他们的文档中找不到 CKEditor 解决方案，但我可能错过了一些东西。如果一些额外的 Javascript 可以破坏链接，我愿意接受 CKEditor 之外的修复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:42:31.847

您需要使用 CKEditor API 来正确执行此操作。用 jQuery 禁用按钮是个坏主意，因为这样您不会阻止键盘快捷键、上下文菜单位置，并且还会破坏 a11y 功能（例如，使用键盘导航工具栏将被破坏）。

要禁用例如**链接**和**图像**功能，请使用以下代码：

```
CKEDITOR.replace( 'editor1', {
    on: {
        loaded: function( evt ) {
            var editor = evt.editor;

            editor.getCommand( 'image' ).on( 'state', function() {
                this.disable();
            } );
            editor.getCommand( 'link' ).on( 'state', function() {
                this.disable();
            } );
        }
    }
} ); 
```

它确保在每个状态更改命令上都被禁用。

提示：如果您不确定要禁用的命令的名称是什么，请检查`editor.commands`可能会给您一些想法的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T01:46:01.423

如果对您来说足够了，以图像为例，您可以简单地对所有处理程序进行核对。我不知道 CKE 是否真的会定期恢复它们，但如果不是，你可以做这样的事情

```
jQuery('.cke_button__image')
    .attr('onkeydown','')
    .attr('onmousedown','')
    .attr('onclick',''); 
```

它在 CKEditor 演示中工作。如果属性再次出现，只需重复该过程。请注意，这不是真正的安全答案。任何半体面的黑客都可以轻松绕过这些限制，但它会满足你的需求。

# c# - 在 WPF 中共享应用程序资源

> ID：15582230
> 
> 赞同：4
> 
> 时间：2013-03-23T01:09:30.007
> 
> 标签：c#, wpf, nested-resources

从[这个页面](http://msdn.microsoft.com/en-us/library/bb613559.aspx)，我读到：

> 如果您的应用程序使用自定义控件并在 ResourceDictionary（或 XAML 资源节点）中定义资源，建议您在 Application 或 Window 对象级别定义资源，或者在自定义控件的默认主题中定义它们。在自定义控件的 ResourceDictionary 中定义资源会对该控件的每个实例产生性能影响。

好的......现在，我有一个定义以下资源的 UserControl：

```
<UserControl ...>
    <UserControl.Resources>
        <Namespace:ImagesConverter x:Key="ImagesConverter" ...
        <Storyboard x:Key="AnimationHide" ...
    </UserControl.Resources> 
```

因此，正如 MSDN 教程所说，由于我在运行时创建了不少于 100 个实例，因此最好将这些资源移动到 MainWindow 或 App 级别。把他们搬到哪里最好？MainWindow 级别、App 级别还是资源文件？为什么？

然后......我怎样才能从他们的新位置使用它们？假设我的 UserControl 中有这段代码：

```
m_AnimationHide = (Storyboard)Resources["AnimationHide"]; 
```

我应该如何修改它以反映这些变化？我应该如何修改以下 UserControl XAML 片段？

```
Source="{Binding Source={x:Static Properties:Resources.MyImage}, Converter={StaticResource ImagesConverter}}" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T01:30:51.777

就个人而言，我更喜欢使用`App.xaml`或单独`ResourceDictionary`将它们全部添加到.`Window.Resources``Window`

这也使您可以轻松地`Themes`为您的应用程序创建它们，因为您将它们全部放在一个地方，因此您可以复制现有的`ResourceDictionary`更改画笔颜色等，您可以选择`ResourceDictionary`要加载的内容并轻松更改应用程序的整个外观。

至于`Resouces`在您`Usercontrol`的 xaml 端访问没有区别，您将继续使用`{StaticResource resourceKey}`as 当您调用`StaticResource`它时，它会通过`Resource`层次结构搜索以找到`Resource`.

因此，如果您将资源从`UserControl.Resources`移至 ，`Window.Resources`或者`Application.Resources`您不需要更改正在访问的 xaml 代码中的任何内容`{StaticResource resourceKey}`。

至于后面代码中的访问，您将使用`FindResource("resourceKey")`而不是`Resources["resourceKey"]` as`FindResource`将在层次结构中搜索 xaml 中的`Resource`类似`StaticResource`行为。

例子：

```
m_AnimationHide = (Storyboard)FindResource("AnimationHide"); 
```

如果您想在特定控件中修改这些资源中的任何一个并且它们被冻结，您可以为该实例创建一个副本

例子

```
var animation = FindResource("AnimationHide") as Storyboard;

m_AnimationHide = animation.Clone();
m_AnimationHide.Completed += m_AnimationHide_Completed; 
```

您还可以设置`x:Shared="false"`这将每次从资源返回一个新的动画实例，如果您有一个需要更改值的复杂资源，这将在您的应用程序中保存复制/粘贴相同的动画。

```
<Storyboard x:Key="AnimationHide" x:Shared="false" /> 
```

然后您将能够在本地修改资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T03:10:29.527

我想稍微扩展一下将资源移出控制 xaml 的原因。

就像您在 MSDN 库中看到的那样，将任何东西移到更高级别的唯一技术原因是节省资源（即内存）。ResourceDictionary 中的每个条目都是在运行时创建为对象（=实例！）并占用内存并且初始化需要几个 CPU 周期。

现在有了 StoryBoard 之类的东西：必须为它应该驱动的每个控件实例创建一个对象，该对象存储与控件的特定实例相关或什至连接到该控件的特定实例（例如执行动画的实例） . 除非您希望所有控件都以相同且并行的方式进行动画处理。

对我来说，在代码中使用它并没有多大意义，`Clone`而不是首先将它放入 xaml 中。xaml 方法需要一些复制/粘贴，因此意味着在多个地方修改动画（如果您甚至*可以*跨控件重复使用类似的东西），但它会删除代码要求并且仍然执行相同操作：`Storyboard`为控件的每个实例创建一个实例。

# php - Windows 的替代 FTP 客户端

> ID：15582232
> 
> 赞同：4
> 
> 时间：2013-03-23T01:09:33.270
> 
> 标签：php, windows, ftp, webserver

我正在寻找 Windows 机器的替代 FTP 客户端。我目前正在使用 fileZila。我正在寻找的东西：

*   有更好的文件界面
*   可以更轻松地编辑和更改文件

我基本上是在寻找可以让我在 Windows 上的一个文件夹中编辑我的 ftp 文件的东西，这个概念与 SVN 非常相似（但不需要提交文件并经过这么多的工作来更新你的副本）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T01:12:45.890

通常，像 Eclipse、Aptana、PHP Storm 等 IDE 应该已经包含一个集成的 FTP 客户端。你试过了吗？大多数情况下，它们支持*文件保存时上传到服务器等*功能。这应该适合您的需求

如果您正在寻找 IDE 之外的解决方案，您可以尝试[WinSCP](https://winscp.net/)。我已经用了很多年了。它还支持 SFTP、SCP 和普通 FTP。内置编辑器是不够的，但您可以为每种文件类型配置自己的编辑器。让我们说 php 文件的 notepad++ 和 jpegs 的 photoshop。

* * *

更新：您还可以将 FTP 文件夹映射到 Windows 驱动器。[如果您使用 Windows， Expandrive](http://www.expandrive.com/)应该是您正在寻找的东西。

# android - Android App - 使用 WebView 在网站上播放 YouTube 视频

> ID：15582233
> 
> 赞同：0
> 
> 时间：2013-03-23T01:10:02.213
> 
> 标签：android, android-webview

首先，我的问题：

我正在尝试将移动网站“移植”到应用程序。这个网站嵌入了YouTube视频，这些视频当然应该可以在实际应用中播放。我的问题是，他们不会。我可以启动应用程序，视频可以正常播放，但如果我尝试将其设为全屏，视频会暂停，如果我再次恢复，则只会播放声音。如果我只是暂停视频并继续播放，也会发生这种情况。只有声音。

在过去的几个晚上，我像疯子一样在谷歌上搜索，但我还没有找到解决问题的有效方法。

针对 android API 级别 14。

这是我的代码：

```
public class MainActivity extends Activity {

private WebView mWebview;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    //setContentView(R.layout.activity_main);

    mWebview  = new WebView(this);
    mWebview.getSettings().setJavaScriptEnabled(true); // enable javascript
    mWebview.getSettings().setPluginState(WebSettings.PluginState.ON);
    mWebview.setWebChromeClient(new WebChromeClient() {

    });

    mWebview .loadUrl("http://mobile.mmm.dk");
    setContentView(mWebview );
    this.mWebview.setWebViewClient(new WebViewClient(){

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url){
          view.loadUrl(url);
          return true;
        }
    });
} 
```

如果有人有任何想法，请随意拍摄。我愿意尝试任何事情，甚至从头开始并实现 youtube API。

# android - GCM 演示服务器 - 指定消息

> ID：15582234
> 
> 赞同：1
> 
> 时间：2013-03-23T01:10:17.167
> 
> 标签：android, tomcat, google-cloud-messaging

我正在运行 GCM 演示服务器，它运行良好，但我还有最后一个问题：我必须做什么才能发送带有内容的消息，演示服务器中没有相应的字段。或者有没有人可以在 Apache Tomcat 服务器上运行另一台服务器？

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T08:26:09.503

在 GCMUtils 项目中，我创建了一个测试服务器，您可以在其中轻松发送消息。这是一个简单的 Maven 插件，这里有更多信息：[https ://code.google.com/p/gcmutils/wiki/MavenPlugin#Test_server](https://code.google.com/p/gcmutils/wiki/MavenPlugin#Test_server)

它不在 tomcat 上运行（它使用码头），但如果你想测试你的 gcm 客户端实现，它可能有用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T01:20:46.667

在 GCM 演示服务器示例中，如果您打开 SendAllMessageServlet.java，您可以通过修改第 81 行来添加您的内容。

`Message message = new Message.Builder().build();`

至

`Message message = new Message.Builder().addData("subject", "Hello World").build();`

然后，客户端可以使用 intent.getStringExtra("subject"); 在 onMessage() 方法中获取您的内容；

# javascript - 检查页面中是否存在具有特定 Class 的 Div

> ID：15582236
> 
> 赞同：0
> 
> 时间：2013-03-23T01:10:27.590
> 
> 标签：javascript, html, css, background-image

我正在尝试通过在其中插入我自己的 Javascript 文件来修改现有网页。我通过我的 Javascript 插入一个新的 Div 并将该 div 的背景设置为图像 url 来为此网页设置背景图像。为了使这张图片在背景上居中并使其占据整个网页，我正在使用

```
'background-size': 'cover' 
```

财产。这当然不适用于较旧的 IE 版本。

我想修复它，我正在考虑按使用页面高度/宽度和图像高度/宽度计算的特定比例放大图像。

所以我想检测浏览器是否是IE。我检查了网页，它有这段代码可以检测浏览器并添加一个带有 IE 类的 div。

```
<!--[if lte IE 5]>
  <div class="ie">
<![endif]-->
<!--[if IE 6]>
  <div class="ie ie6">
<![endif]-->
<!--[if IE 7]>
  <div class="ie ie7">
<![endif]--> 
```

**我的问题是**如何检测这个页面是否有一个带有 ie 类的 div。此外，如果有人可以建议一种替代方法，在网页上设置背景图像，完全不考虑图像/页面的尺寸和图像中心是否聚焦，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T01:21:20.110

您必须遍历`<div>`页面上的所有元素，直到其中一个与`className`您要查找的元素匹配。就像是：

```
var div = document.getElementsByTagName('div');
for(i=0; i<div.length; i++) {
    if(div[i].className.match(/(^|\s)ie(\s|$)/)) {

        // Code to Do your IE Stuff Here

        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T01:21:05.163

```
document.addEventListener("DOMContentLoaded", function() {
  var ie = document.getElementsByClassName("ie");
  if(ie.length > 0) {
    alert("It's IE!");
  }
} 
```

这应该回答您的第一个问题，尽管我同意您的总体目标有更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T01:17:46.787

如果您在页面中加载 jQuery 库，您可以从 Google CDN 链接该库，这是一件非常简单的事情。

CDN：[https ://developers.google.com/speed/libraries/devguide#jquery](https://developers.google.com/speed/libraries/devguide#jquery)

用法：$("div.className").first()

否则这将需要更多的努力......处理这个问题的最佳方法是向 div 元素添加一个 id 属性，如下所示：

```
<div id="myElement"></div> 
```

然后使用 document.getElementById 函数检索您的 div 标签。

```
document.getElementById('myElement'); 
```

要查看添加后它是否具有特定类，请参阅另一篇文章： [测试元素是否包含类？](https://stackoverflow.com/questions/5898656/test-if-an-element-contains-a-class)

# ruby - 我怎样才能到达这组 TR 标签？

> ID：15582237
> 
> 赞同：0
> 
> 时间：2013-03-23T01:10:35.837
> 
> 标签：ruby, nokogiri

这是指向实际 HTML 的链接：

```
doc = Nokogiri::HTML(open('https://www.google.com/finance?q=NYSE%3AAA&fstype=iii')) 
```

以及一个近似的 HTML 片段：

```
<div id="incannualdiv">
  <table id="fs-table">
    <tbody>
      <tr>..</tr>
      ...
      <tr>
        <td>Net Income</td>
        <td>100</td>
      </tr>
      <tr>..</tr>
    </tbody>
  </table>
</div> 
```

这些是我正在使用的细节：

```
doc = Nokogiri::HTML(open('https://www.google.com/finance?q=NYSE%3AAA&fstype=iii'))
div = doc.at "div[@id='incannualdiv']" #div containing the table i want
table = div.at 'table' #table containing tbody i want
tbody = table.at 'tbody' #tbody containing tr's I want
trs = tbody.at 'tr' #SHOULD be all tr's of that table/tbody - but it's only the first TR? 
```

我希望最后一点能给我所有的`<TR>`标签，其中包括`<TD>`我正在寻找的标签，但实际上它只给了我第一个`<TR>`.

这是下一块：

```
irb(main):023:0> a = nil
=> nil
irb(main):024:0> doc.css('#incannualdiv > #fs-table tr').each { |e| if e.text.include? "Net Income\n"; a = e.text; end}
=> 0
irb(main):025:0> a
=> "Net Income\n\n191.00\n611.00\n254.00\n-1,151.00\n"
irb(main):026:0> a.split"\n"
=> ["Net Income", "", "191.00", "611.00", "254.00", "-1,151.00"] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T01:22:05.877

这应该这样做。

```
doc.css('#incannualdiv > #fs-table tr') 
```

`at_css`（我猜`at`）返回一个`css`返回所有匹配项的元素。

**编辑**：回答OP的评论

您可以使用该方法获取其中的文本`tr`，它实际上是其子项中的文本`td``text`

```
trs = doc.css('#incannualdiv > #fs-table tr')
# Get column labels from table headers
labels = trs.first.css('th')[1..-1].map(&:text)
net_income_tr = trs.detect { |tr|
  tr.css('td').any? { |td| td.text.strip =~ /^Net Income$/ }
}
# drop first tr that just has Net Income text
# I gave up on error checking. Exercise left to reader ;)
# this will give you an array of floats for your Net Income columns
net_income_columns = net_income_tr.css('td')[1..-1].map { |td| td.text.gsub(',','_').to_f }

labeled_values = net_income_columns.each_with_index.map { |value, i| { label: labels[i].strip, value: value } } 
```

# jquery - 完整日历未显示来自 JSON 源的事件

> ID：15582238
> 
> 赞同：2
> 
> 时间：2013-03-23T01:10:53.183
> 
> 标签：jquery, json, ruby-on-rails-3, fullcalendar

我已阅读完整日历上的整个文档，但仍然无法从 JSON 源呈现任何内容。我正在运行 Rails 3.2，当我使用 Google 的开发人员工具预览我的 JSON 源代码时，我看到了格式正确的 JSON 对象和一个状态码为 200 的标头和一个 Accept: application/json。我这样称呼完整日历：

```
$('#calendar').fullCalendar({events: '/events'}); 
```

如果我声明一个 JSON 对象，然后自己渲染它，它会像这样渲染：

```
var event = {
  "title": "Event 1",
  "start": "1363794900",
  "end": "1363794900",
  "url": "/events/4"
}

$('#calendar').fullCalendar( 'renderEvent', event); 
```

**编辑 1** 在事件控制器中，index.json.erb 如下所示：

```
<% @events.each do |event| %>
  {
    "title": "<%= event.name %>",
    "start": "<%= event.from.strftime("%s") %>",
    "end": "<%= event.to.strftime("%s") %>",
    "url": "<%= event_path(event) %>"
  }
<% end %> 
```

它返回以下内容：

```
{
"title": "Matts Party",
"start": "1363794900",
    "end": "1363794900",
    "url": "/events/4"
}
{
    "title": "Mateuszs Party",
    "start": "1363795440",
    "end": "1363795440",
    "url": "/events/5"
}
{
    "title": "Johns Party",
    "start": "1363799400",
    "end": "1363799400",
    "url": "/events/6"
}
{
    "title": "Mikes Party",
    "start": "1364054040",
    "end": "1364054040",
    "url": "/events/3"
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-11T08:16:40.403

您的脚本生成的 JSON 代码不正确。您可以尝试在此处验证它：http: [//jsonlint.com/](http://jsonlint.com/) 粘贴您生成的 JSON 代码以查看问题。

你的结构是这样的： {...}{...}{...}

应修改为：[{...},{...},{...}]

# c# - 检测 Windows Server 2012 上安装了哪些服务器角色

> ID：15582254
> 
> 赞同：8
> 
> 时间：2013-03-23T01:14:18.667
> 
> 标签：c#, .net, windows-server-2012

在 Windows Server 2008 中，您可以使用 WMI 和 Win32_ServerFeature 类以编程方式检测服务器功能和角色。

在 Windows Server 2012 中，Win32_ServerFeature 类已被弃用，不包括 2012 年新增的功能和角色。

据我所知，[Win32_ServerFeature](http://msdn.microsoft.com/en-us/library/windows/desktop/cc280268%28v=vs.85%29.aspx)类已被[服务器管理器部署](http://msdn.microsoft.com/en-us/library/windows/desktop/hh872518%28v=vs.85%29.aspx)取代，并且没有关于如何使用它的示例。

我在网上搜索，除了没有帮助的文档之外找不到任何关于它的信息。

任何帮助将不胜感激，我正在用 c# 在 4.5 Dot Net Framework 应用程序中进行开发。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-04T18:48:06.253

我会考虑这样做的方式是使用一段 PowerShell 脚本，然后在 C# 中“播放”输出。

如果您添加对以下项目的引用，您将能够与 C# 中的 PowerShell 脚本进行交互：

> 系统管理自动化

然后使用以下*using*语句深入研究 this 的特性并与之交互：

```
using System.Collections.ObjectModel;
using System.Management.Automation;
using System.Management.Automation.Runspaces 
```

下面的脚本将创建一个不错的 sub，它将接受一个 PowerShell 命令并返回一个可读的字符串，每个项目（在本例中为一个角色）添加为一个新行：

```
private string RunScript(string scriptText)
{
// create a Powershell runspace then open it

Runspace runspace = RunspaceFactory.CreateRunspace();
runspace.Open();

// create a pipeline and add it to the text of the script

Pipeline pipeline = runspace.CreatePipeline();
pipeline.Commands.AddScript(scriptText);

// format the output into a readable string, rather than using Get-Process
// and returning the system.diagnostic.process

pipeline.Commands.Add("Out-String");

// execute the script and close the runspace

Collection<psobject /> results = pipeline.Invoke();
runspace.Close();

// convert the script result into a single string

StringBuilder stringBuilder = new StringBuilder();
foreach (PSObject obj in results)
{
stringBuilder.AppendLine(obj.ToString());
}

return stringBuilder.ToString();
} 
```

然后，您可以将以下 PowerShell 命令传递给脚本并接收输出，如下所示：

```
RunScript("Import-module servermanager | get-windowsfeature"); 
```

或者，您可以从 C# 脚本运行此 PowerShell 命令，然后在脚本完成处理后从 C# 读取输出文本文件：

```
import-module servermanager | get-windowsfeature > C:\output.txt 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-29T11:54:31.303

我宁愿建议您检查 Windows 注册表。例如对于 IIS 的组件，您可以检查`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\InetStp\Components`文件夹

# javascript - for循环迭代和replaceText

> ID：15582256
> 
> 赞同：0
> 
> 时间：2013-03-23T01:14:32.653
> 
> 标签：javascript, arrays, text, replace, google-apps-script

我已将脚本更改为以下内容：

```
 function readRows(){
   var nums = ["Zero", "One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine", "Ten"];

   function toText(num) {
   var s;
   if (num >= 100)
    throw "Too big";
   if (num > 10) {
    if (num < 20) {
        switch (num) {
            case 11:
                return "Eleven";
            case 12:
                return "Twelve";
            case 13:
                return "Thirteen";
            case 14:
                return "fourteen";
            case 15:
                return "Fifteen";
            case 16:
                return "sixteen";
            case 17:
                return "seventeen";
            case 18:
                return "eighteen";
            case 19:
                return "nineteen";
            default:
                return toText(num-10)+"teen";
        }
    }

    switch (Math.floor(num / 10)) {
        case 2:
            s = "Twenty";
            break;
        case 3:
            s = "Thirty";
            break;
        case 4:
            s = "Fourty";
           break;
        case 5:
            s = "Fifty";
            break;
        case 6:
            s= "SiXty";
            break;
        case 7:
            s = "Seventy";
            break;
        default:
            s = toText(Math.floor(num/10))+"ty";
            break;
    }
    if(num > 20 && num < 30)
       {
        return "twenty"+toText(num-20);
       }
    if(num > 30 && num < 40)
       {
        return "thirty"+toText(num-30);
       }
    if(num > 40 && num < 50)
       {
        return "fourty"+toText(num-40);
       }
    if(num > 50 && num < 60)
       {
        return "fifty"+toText(num-50);
       }
    if(num > 60 && num < 70)
       {
        return "sixTy"+toText(num-60);
       }
    if(num == 70)
       {
        return "sEvEnty";
       }
    if (num % 10 > 0)
        return s + toText(num % 10);
    return s;
    }

    return nums[num];
    }

    var sheet = SpreadsheetApp.getActiveSheet();
    var lastCol = sheet.getLastColumn();
    var length = sheet.getMaxColumns();
    var rows = sheet.getMaxRows();

    var Name = sheet.getRange(2, 2).getValue(); 
    var data = sheet.getRange(2, 1, 2, lastCol);  
    var template = "spreadsheet key";
    var fileName = "Application document template.docx";
    var newFile = DocsList.getFileById(template).makeCopy(Name + " Application for Phase1 NF3").getId();
    var doc = DocumentApp.openById(newFile);
    var body = doc.getActiveSection();

    for(var j=1; j<length; j++)
    {
    body.replaceText("Answer"+toText(j), data[0][j]);   // line 105
    }
    } 
```

在某个阶段，除了更换 70 之外，我几乎让它工作，做了一些事情，然后没有任何工作。重做它，现在我收到此错误，TypeError：无法从未定义中读取属性“1.0”。（第 105 行，文件“ConvertToDocs”）。谁能告诉我属性“1.0”可能指的是什么？为什么第一行代码没有显示在代码窗口中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T16:59:54.283

目前尚不清楚您的问题是什么 - 您在标题中有提示，但在文本中提出了不同的问题。让我们看看我们能做些什么。

**首先**- 为什么会出错？这很简单：`data`被定义为 a `Range`，但您试图将其作为二维数组访问。您可能想要`var data = sheet.getRange(...).getValues()`，这将为您提供范围内单元格的*内容*。

你在那里做一些其他奇怪的事情。`.getRange(2, 1, 2, lastCol)', which is`您使用A2:x3`定义数据范围；2 行，x=maxColumns。稍后，您尝试仅迭代一行和“maxColumns”——有些东西不在那里，但只有您知道您想要做什么。

**第二**- 你提到循环。你有一个数组迭代错误：你像这样循环 - `for(var j=1; j<length; j++)`。问题是数组从 0 开始，因此在访问`data[][j]`.

**第三**——你提到`Document.replaceText()`。你没有说你遇到了什么问题，但可能是你没有得到替换，因为你没有在文档中找到文本。根据您的代码，以下是一些可能的解释：

1.  错别字/不一致的情况。“SiXty”、“十三”、“十四” - 除非您的模板有完全相同的错误，否则您的匹配将失败。
2.  空间 - 你正在寻找`"Answer"+toText(j)`，你可能想要`"Answer "+toText(j)`。
3.  连字符和更多的大写问题 - 数字通常是连字符的，例如二十一。此外，这种情况下的“一”不是大写的。但是您的模板可能不同意 - 请确保您匹配它。

**最后**，您没有问什么，但您发布的代码主要是关于什么 - 将数字转换为英文字符串表示。您可以而且应该简化您的`toText()`功能。此类问题包含可用于简化解决方案的模式。你是那里的一部分 - 基本上，你有一组子数字只能用它们自己来表示（零，一，二......十九），另一组是复合的（二十[-blah ]，三十[-blah] ...）。所以解决方案是将这两个组分开，并使用简单的数组来查找适当的文本。

```
function toText(num) {
  if (num >= 100) throw new Error("Too big");
  if (num < 0) throw new Error("Negative");
  if (num - Math.floor(num) > 0) throw new Error("Not Integer");

  var smallnums = ["Zero", "One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine", "Ten",
                 "Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"];
  var tens = ["","","Twenty","Thirty","Fourty","Fifty","Sixty","Seventy","Eighty","Ninety"];
  var s = "";

  // Is this number in the smallnums set?
  if (num < smallnums.length)
    s = smallnums[num];
  else {
    // No, so express the 'tens', then (maybe) the 'ones'.
    s += tens[Math.floor(num/10)];
    var remnant = num % 10;
    if (remnant > 0) s += "-" + smallnums[remnant].toLowerCase();
  }
  return s;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T01:38:38.813

我不知道任何简单的方法，但这是一个蛮力的努力：

```
var nums = ["Zero", "One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine", "Ten"];

function toText(num) {
    var s;
    if (num >= 100)
        throw "Too big";
    if (num > 10) {
        if (num < 20) {
            switch (num) {
                case 11:
                    return "Eleven";
                case 12:
                    return "Twelve";
                case 13:
                    return "Thirteen";
                case 15:
                    return "Fifteen";
                case 18:
                    return "Eighteen";
                default:
                    return toText(num-10)+"teen";
            }
        }

        switch (Math.floor(num / 10)) {
            case 2:
                s = "Twenty";
                break;
            case 3:
                s = "Thirty";
                break;
            case 5:
                s = "Fifty";
                break;
            case 8:
                s = "Eighty";
                break;
            default:
                s = toText(Math.floor(num/10))+"ty";
                break;
        }
        if (num % 10 > 0)
            return s + toText(num % 10);
        return s;
    }

    return nums[num];
}

function readRows() {
    var sheet = SpreadsheetApp.getActiveSheet();
    var lastCol = sheet.getLastColumn();
    var length = sheet.getMaxColumns();
    var rows = sheet.getMaxRows();
    for(var i=2; i<rows; i++) // starting from row 2 in sheet
    {
        var Name = sheet.getRange(i, 2).getValue(); 
        var data = sheet.getRange(i, 1, i, lastCol);  
        var template = <spreadsheet key goes here>;
        var fileName = "Application document template.docx";
        var newFile = DocsList.getFileById(template).makeCopy(Name + " Application for   Phase1 NF3").getId();
        var doc = DocumentApp.openById(newFile);
        var body = doc.getActiveSection();

        for(var j=1; j<length; j++)
        {
            body.replaceText("Answer"+toText(j), data[0][j]);
        }
    }
} 
```

由于您的答案少于 100，因此我最多只实现了 99。我修改了您的代码，因为其中一些没有意义。

FWIW，`i`内部 for 循环中的 the 修改了`i`外部循环中的，因为变量是函数范围的，而不是块范围的。你似乎不需要它，所以我删除了它。

# tcl - 读取换行

> ID：15582257
> 
> 赞同：2
> 
> 时间：2013-03-23T01:14:39.067
> 
> 标签：tcl

我有一个带有换行的文件。它恰好是包含多行的 TCL 代码。（但它可以是任何作为换行规则的东西。）

喜欢 ：

```
set long [ some cmd { some long stuff \
  more stuff \
  even more stuff \
  end of cmd} but going on \
  end of set ] 
```

我想将其解析为一行，以便可以对其进行一些模式匹配。

我查看了“读取”命令的文档，但似乎没有这样做。

非常感谢您的帮助。

谢谢，格特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T19:53:26.237

我不是那么有经验的 Tcl 程序员，所以我的提议非常直截了当。

从您的问题我猜，您逐行读取文件（我猜使用“gets”），然后对该行执行某些操作（模式匹配）。因此，最直接的实现将是这样的（顺便说一句，问题之一是您喜欢如何处理“前”行的尾随空格和“下”行的前导空格）：

```
;# Note: The code bellow was not tested, and may not run cleanly,
;# but I hope it shows the idea.

;# Like "gets", but concatenates lines, which finish with "\" character with
;# the next one.
proc concatenatingGets {chan} {
    set wholeLine ""
    set finishedReadingCurentLine no

    while {! $finishedReadingCurrentLine } {

        set currentLine [gets $chan]

        ;# more complicated rule can be used here for concatenation
        ;# of lines

        if {[string index $currentLine end] == "\\"} {

            ;# Decide here what to do with leading and trailing spaces.
            ;# We just leave them as is (only remove trailing backslash).
            ;# Note, that Tcl interpreter behaves differently.

            append wholeLine " " [string range $currentLine 0 end-1]

        } else {

            set finishedReadingCurrentLine yes

        } ;# if-else strig is to be concatenated

    } ;# while ! finishedReadingcurrentLine

} ;# concatenatingGets

;# Now use our tweaked gets:
set f [open "myFileToParse.txt" r]
while {![eof $f]} {
    set currentLine [concatenatingGets $f]

    ;# ... Do pattern matching ot current line, and whatever else needed.

}
close $f 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T23:29:33.510

由于您正在阅读 Tcl 代码，因此您可以使用 Tcl 提供的工具来提供帮助。特别是，`info complete`将说明字符串是否包含“完整”命令，这对于检测续行和多行文字（例如过程体）非常有用。唯一的诀窍是，只有在您输入换行符时，一切才能正常工作。因此：

```
set buffer {}
set fd [open $thefilename]
# Next line is idiomatic "read by lines" pattern
while {[gets $fd line] >= 0} {
    append buffer \n $line
    # IMPORTANT: need extra newline at end for this to work with
    # backslash-newline sequences.
    if {![info complete $buffer\n]} {
        # Get next line
        continue
    }
    processACompleteCommand $buffer
    set buffer {}
}
close $fd
# Deal with the last command if necessary (EOF is always a command terminator)
if {$buffer ne ""} {
    processACompleteCommand $buffer
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T04:55:52.190

如果整个文件有足够的内存：

```
foreach line [split [regsub -- "\n\$" [regsub -all -- "\\\\\n\[\[:blank:\]\]*" [read stdin] " "] ""] "\n"] {
    # ...
} 
```

这与 Tcl 所做的 \newline 替换相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T04:06:32.147

You can see how Tcl handles the arguments very simply:

```
proc some {args} {
    foreach arg $args {
        puts $arg
    }
}
set long [ some cmd { some long stuff \
  more stuff \
  even more stuff \
  end of cmd} but going on \
  end of set ] 
```

results in

```
cmd
 some long stuff  more stuff  even more stuff  end of cmd
but
going
on
end
of
set 
```

If you want all this as a single string, then "some cmd" is pretty simple

```
proc some args {join $args}
set long [some cmd ...]
puts $long 
```

outputs

```
cmd  some long stuff  more stuff  even more stuff  end of cmd but going on end of set 
```

# ruby-on-rails - Rails：ActiveAdmin 不适用于 Friendly_id

> ID：15582258
> 
> 赞同：0
> 
> 时间：2013-03-23T01:14:40.910
> 
> 标签：ruby-on-rails, activeadmin, friendly-id

我设置了 ActiveAdmin 来管理站点上的用户，并设置了 Friendly_id 用于可读的 url。当我转到 /admin/users 时，它会抛出此错误：

```
Undefined method `per' for #<User::FriendlyIdActiveRecordRelation:0x007fdb61a38d30> 
```

如何在用户模型中设置friendly_id：

```
class User < ActiveRecord::Base
  #...
  extend FriendlyId
  friendly_id :name, use: :slugged
end 
```

对于这两个 gem 之间的冲突，我能找到的唯一资源是这个问题[ActiveRecord::ReadOnlyRecord when using ActiveAdmin and Friendly_id](https://stackoverflow.com/questions/7684644/activerecordreadonlyrecord-when-using-activeadmin-and-friendly-id)这似乎是一个不同的问题，并且该解决方案在我的情况下不起作用。关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-25T13:15:33.730

我能够以[这种方式](http://norman.github.io/friendly_id/file.Guide.html#Active_Admin)修复它：

> 除非您使用 :finders 插件，否则您应该为使用 FriendlyId 的模型修改管理控制器，类似于以下内容：

```
controller do
  def find_resource
    scoped_collection.friendly.find(params[:id])
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:01:46.207

我发现这实际上不是问题，`friendly_id`而是`will_paginate`这里提到的[https://github.com/gregbell/active_admin/issues/670](https://github.com/gregbell/active_admin/issues/670)。切换到`kaminari`分页为我解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-23T09:21:40.983

我也遇到了这个问题，发现`friendly_id`覆盖了`to_param`方法，所以重新覆盖就好了。这个对我有用。

```
ActiveAdmin.register User do
  before_filter do
    User.class_eval do
      def to_param
        id.to_s
      end
    end
  end
end 
```

# ant - “java.lang.IllegalStateException: no last call on a mock available”仅来自 ant，在 eclipse 中工作正常

> ID：15582259
> 
> 赞同：3
> 
> 时间：2013-03-23T01:14:51.403
> 
> 标签：ant, testng, easymock, powermock

我正在使用 EasyMock3.1/testNg-5.7/Powermock-easymock-1.5-full。代码很简单，只是mock了一个公共的静态方法。

```
import static org.powermock.api.easymock.PowerMock.createMock;

import static org.powermock.api.easymock.PowerMock.mockStatic;

import static org.powermock.api.easymock.PowerMock.replay;

import static org.powermock.api.easymock.PowerMock.verify;

import static org.easymock.EasyMock.expect;

@PrepareForTest( {MyStatic.class})

public class StaticTest extends PowerMockTestCase{

  @Test

  public void testStaticMethod()

  {

   mockStatic( MyStatic.class );

    expect( MyStatic.getString() ).andReturn( "good" );

    replay( MyStatic.class );

    MyStatic.getString();

    verify(MyStatic.class);

  }

} 
```

我正在使用 testng-eclipse 插件，它在 eclipse 中运行良好。但是当我尝试通过 ant 运行它时，我得到：

```
java.lang.IllegalStateException: no last call on a mock available
    at org.easymock.EasyMock.getControlForLastCall(EasyMock.java:520)
    at org.easymock.EasyMock.expect(EasyMock.java:498) 
```

它在代码“expect(MyStatic.getString()).andReturn(“good”);”处抱怨

我的蚂蚁脚本是：

```
 <testng classpathref="test.runtime.classpath" outputDir="${report.absolute.path}/testngreport" workingDir="${test.module.basedir}">

          <!--<jvmarg line="-Xdebug -Xrunjdwp:transport=dt_socket,address=1044,server=y,suspend=y"/>-->

          <classfileset dir="${test.module.testoutput.dir}" includes="**/*.class"/>

        </testng> 
```

我感谢任何反馈，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T18:28:53.467

作为比较，在 ant 中运行时（通过 junit）尝试使用 @RunWith(PowerMockRunner.class) 注释运行。[@RunWith 注释看起来像是您的静态方法测试示例与powermock 文档中的](http://code.google.com/p/powermock/source/browse/trunk/modules/module-test/easymock/junit4-test/src/test/java/samples/junit4/singleton/MockStaticTest.java)示例之间的唯一区别。

这可能是一个测试错误。我尝试在蚂蚁中重现您的失败，但一切对我来说都很好。以下是我使用的 jar 文件：

```
$ ls -1 lib/
cglib-nodep-2.2.3.jar
easymock-3.1.jar
javassist.jar
objenesis-1.4.jar
powermock-easymock-1.5.1-full.jar
testng-6.8.jar 
```

# ios - “必须为具有 Retina 显示屏的 iOS 设备构建应用程序”是什么意思

> ID：15582263
> 
> 赞同：6
> 
> 时间：2013-03-23T01:15:47.470
> 
> 标签：ios, app-store, appstore-approval

苹果公司最近宣布：“从 5 月 1 日开始，提交到 App Store 的新应用程序和应用程序更新必须针对配备 Retina 显示屏的 iOS 设备构建，并且 iPhone 应用程序还必须支持 iPhone 5 上的 4 英寸显示屏”。

我想知道“必须为具有 Retina 显示屏的 iOS 设备构建应用程序”是什么意思？

是否有一些应用程序无法在 Retina 设备上运行？或者这意味着图形必须是为视网膜设备设计的？

如果有人提交了一个仅适用于 320*480 设备（3GS）的 OpenGL 应用程序，并在视网膜设备上对其进行缩放，它会被拒绝吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T01:27:04.580

这意味着您的应用必须在 Retina 设备（分辨率更高）和 iPhone 5（屏幕更大）上看起来不错。

他们希望保证每位用户都能获得他们下载/购买的应用程序的最佳体验。

如果缩放导致看起来很糟糕，它可能会被拒绝。如果它看起来不那么糟糕……嗯，它是 App Store，所以你永远不知道……它可能仍然会因为不遵守规则而被拒绝。除非你出名，否则就是这样。

> **普利策奖获奖漫画**
> 
> 2009 年 12 月，Apple 禁止漫画家 Mark Fiore 的一款名为 NewsToons 的卡通应用程序，理由是它“嘲笑公众人物。”[29][30] 2010 年 4 月，Fiore 因其政治讽刺漫画获得普利策奖，创造了历史作为第一位获得著名新闻奖的仅互联网漫画家。[29][30][31] 在获奖后故事爆发后公众强烈抗议后，Apple 要求 Fiore 重新提交他的应用程序，该应用程序随后被接受。Fiore 说：“当然，我的可能会获得批准，但是如果有人没有赢得普利策奖，并且可能正在制作比我更好的政治应用程序呢？你是否需要一些媒体狂热来获得批准具有政治材料的应用程序？ “[30]

*资料来源：维基百科*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-23T01:34:46.623

如果您阅读[iOS 人机界面指南](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/TranslateApp/TranslateApp.html#//apple_ref/doc/uid/TP40006556-CH10-SW8)，它会指出 iPhone 5 的设备具有一种兼容模式，该模式将 UI 居中用于从未更新为完全支持 4 英寸屏幕的应用程序。从它的声音（以及四处流传的谣言）来看，这**纯属猜测**，兼容模式最终将被丢弃。这意味着，您必须完全[支持两种屏幕尺寸（3.5 英寸和 4 英寸）](https://stackoverflow.com/a/12397309/620197)。

至于 Retina，这可能意味着未来所有的 iOS 设备都会有 Retina 显示器，所以是时候停止放大图形了。简而言之，Apple 喜欢他们平台上的东西看起来不错。在 WWDC 主题演讲之后，我们可能会在 6 月了解更多信息。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-23T01:35:12.800

这意味着**应用程序必须与[分辨率](https://developer.apple.com/technologies/ios/graphics-and-animation.html)**无关（向下滚动一点），这意味着无论以何种分辨率呈现它都必须看起来不错，尤其是在 Retina 显示器的较高 DPI（每英寸点数）下。

对于矢量图形和我想的 3D 应用程序，您应该没问题，但您必须确保最终显示分辨率不受编程限制。所以是的，缩放 OpenGL 应用程序应该可以工作，因为它在高 DPI 设备上看起来不像是垃圾。

至于非矢量图像，Apple 开发者网站在[**“自定义图标和图像创建指南”**](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW1)中进行了说明。

# unicode - CFString：字符串中的字符数不是代码点

> ID：15582267
> 
> 赞同：0
> 
> 时间：2013-03-23T01:16:22.403
> 
> 标签：unicode, core-foundation, cfstring

我想知道，有没有办法获取存储在 CoreFoundation 框架的 CFString 对象中的字符数（由底层 Unicode*代码点表示）。*

有可用的功能：`CFStringGetLength`，但它并没有做它看起来做的事情。

示例：我正在尝试获取包含位于第二个（SMP）Unicode 平面中的一个字符（ [Shavian Alphabet的字母“peep”）的字符串长度。](http://en.wikipedia.org/wiki/Shavian_alphabet)

```
UInt8 arr[] = {0xf0, 0x90, 0x91, 0x90}; //UTF8
CFStringRef r = CFStringCreateWithBytes(0, arr, sizeof(arr),
                                        kCFStringEncodingUTF8, false);
CFIndex length = CFStringGetLength(r); 
```

文档指出它返回：

> 存储在字符串中的字符数（根据 UTF-16 代码对）。

正如你所看到的，这句话是矛盾的——字符数并不总是等于 UTF-16 代码点的数量。但是，大括号中的部分更准确 - 函数的实际结果是 UTF-16 序列的数量。在我的示例中，函数的结果为**2**（以 UTF-16 编码字符所需的序列长度），而函数名称表明结果为**1**（*在我看来*）。

我想找到一种方法来获取*Unicode 代码点方面的字符数*。有什么办法可以在 CoreFoundation 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T01:16:22.403

我找到了解决方法。这并不完美，因为它可能需要额外转换为 UTF-32。

```
UInt8 arr[] = {0xf0, 0x90, 0x91, 0x90}; //UTF8, 
CFStringRef r = CFStringCreateWithBytes(0,
                                        arr,
                                        sizeof(arr),
                                        kCFStringEncodingUTF8,
                                        false);
CFIndex length = CFStringGetLength(r);
CFRange range = CFRangeMake(0, length);
CFIndex bytes;
CFStringGetBytes(r, range, kCFStringEncodingUTF32, 0, false, nullptr,
                 0, &bytes);
CFIndex characterCount = bytes/4; 
```

变通方法利用了这样一个事实，即与 UTF-16 相比，UTF-32*根据定义*在单个实体中包含单个*代码点。*并且，由于实体被定义为四个字节大小，并且`CFStringGetBytes`能够获得转换后存储字符串所需的字节数，因此可以通过将字节数除以 4 来获得代码点数。

无论如何，`CFStringGetBytes`主要目的是执行实际转换，因此即使`nullptr`作为`buffer`参数传递，也有可能至少转换的主要部分实际发生。出于这个原因，很高兴听到该问题的另一种解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-15T11:52:14.827

如果您想知道用户看到的“字符”的数量，无论规范化如何，请使用返回的范围遍历组合的字符序列`CFStringGetRangeOfComposedCharactersAtIndex`并计算迭代次数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-11T11:38:12.393

（这是我的**猜测**......）

我可以找到关于`CFStringGetLength`返回的“没有定义”。所有 Apple 手册都只是说**UTF-16 代码对（？）**，老实说，我不明白它是什么意思。Unicode 很复杂，有许多微妙的不同概念。如果没有精确的术语，我们无法找出它是什么。

无论如何，在我的猜测中，它应该与`[NSString length]`as相同`CFString`并且`NSString`是免费桥接的，并且它们应该存储相同的数据以提供最佳性能。并`[NSString length]`返回**UTF-16 Code Unit 的**数量。这在 Apple 手册中有严格定义。请注意条款的不同。“代码单元”是定义明确的 Unicode 术语，但“代码对”是未知的。（有人知道吗？）“代码单元”也与“代码点”不同。

所以我认为它会返回“UTF-16 代码单元”，但我不会赌我的猜测。我会将其转换为`NSString`并调用`[NSString length]`以获取严格定义的数字。

* * *

要获得“Unicode Grapheme Clusters”，最好使用 Swift `String`s。Swift`String`具有访问 Grapheme Clusters 的本地接口。将它们转换为 Swift`String`并对其进行迭代。

# asp.net-mvc - 通过 Ajax.BeginForm 构造发布到 HTTPS 表单

> ID：15582271
> 
> 赞同：1
> 
> 时间：2013-03-23T01:16:49.390
> 
> 标签：asp.net-mvc, post, asp.net-ajax

是否可以从 http 页面发布到 https 表单？这是代码示例，我不确定如何将其发布到页面的 HTTPS 版本。使用 MVC4

```
@using (Ajax.BeginForm("Register", "Home", null, new AjaxOptions { UpdateTargetId = "dlgPopup" }, new { @class = "form_main", id = "form_register"})) 
```

简单地将 [RequireHttps] 属性放在控制器操作上似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T02:49:45.173

正如您已经怀疑的那样，这种请求违反了[Same origin policy](http://en.wikipedia.org/wiki/Same_origin_policy)。IIS 对 XSS、伪造和大量攻击采取了预防措施。

在子域的情况下，这可以作为 IIS 中的设置进行调整。但是在协议更改的情况下，您将无法简单地从尚未受到类似“保护”的页面向安全套接字层发出请求。

使您的挑战更加艰巨，您会将未加密的数据发送到**需要**受保护数据格式的页面。由于您的操作方法已被指示不信任非加密数据，因此它应该拒绝该请求。我想知道该方法是否甚至会被视为匹配，但这应该在 JS 调试器中确认（`404`错误将表明不匹配）。

# c# - 如何从我的视图将参数传递给我的控制器

> ID：15582274
> 
> 赞同：1
> 
> 时间：2013-03-23T01:17:30.110
> 
> 标签：c#, asp.net-mvc, razor

我对 MVC 样式的页面很陌生，但学习缓慢。我希望能够单击一个动作链接，然后将一个参数传递给我的控制器，该控制器将使用它从数据库中获取一些东西，但是我尝试了许多不同的东西，并且控制器只被赋予 null 作为参数.

在我看来，我已经构建了我的操作链接，如下所示：

```
@Html.ActionLink(Model.Name, "GetMeeting", "ChooseMeeting", null, new {meetingid = Model.MeetingId}) 
```

在我处理此请求的控制器中如下：

```
public ActionResult GetMeeting(string meetingid)
    {
        var races = RaceRepository.GetRacesInMeeting(new Meeting() {MeetingId = new Guid(meetingid)});
        return View(races);
    } 
```

meetingID 始终为空，有人可以帮我解决这个问题，让我知道如何给它我想要的参数。此外，我已经检查并在视图中，Model.MeetingID 填充了它应该是的 ID。

任何帮助将不胜感激，谢谢瑞恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T01:29:59.647

刚出局，我认为您的 null 可能在错误的位置。假设 Model.name 只是文本，“GetMeeting”是一个动作名称，“ChooseMeeting”是一个控制器名称试试这样

```
@Html.ActionLink(Model.Name, "GetMeeting", "ChooseMeeting", new {meetingid = Model.MeetingId}, null) 
```

你的行为会是这样的

```
public class ChooseMeeting : Controller
{
    public ActionResult GetMeeting(int meetingid)
    {
        // ...
        return View();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T01:32:01.297

您很可能尚未定义将 meetingId 作为可识别参数传递的路由。

您打算将 ActionLink 解析为以下内容（3 是 meetingId 的值）。

```
/ChooseMeeting/GetMeeting/3 
```

实际路由的可能是这样的：

```
/ChooseMeeting/GetMeeting 
```

这是由于单个默认 MVC 路由的定义与此非常相似：

```
 routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Request", action = "Index", id = UrlParameter.Optional } 
  ); 
```

这里的问题是参数名称默认为“id”，您已将参数命名为 meetingId。

至少有3种方法可以解决这个问题：

1.  将参数的名称更改为，`id`以便现有路由将根据需要映射参数。
2.  添加一个路由，允许 MVC 路由将传递的值映射到名为`meetingId`.
3.  将参数作为查询字符串样式参数传递，例如`/ChooseMeeting/GetMeeting/?meetingId=3`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T01:32:28.157

哦！我解决了，问题是，我为 ActionLink 调用了错误的重载。它应该是：

```
@Html.ActionLink(Model.Name, "GetMeeting", "ChooseMeeting",new {meetingid = Model.MeetingId},null) 
```

很抱歉浪费了时间。

干杯，瑞恩

# delphi - Delphi-Mocks：在构造函数中模拟带有参数的类

> ID：15582277
> 
> 赞同：10
> 
> 时间：2013-03-23T01:17:48.810
> 
> 标签：delphi, mocking, delphi-mocks

我开始使用[Delphi-Mocks](https://github.com/VSoftTechnologies/Delphi-Mocks)框架，并且在模拟一个在构造函数中具有参数的类时遇到了麻烦。TMock 的类函数“Create”不允许参数。如果尝试创建 TFoo.Create( Bar: someType ); 的模拟实例 当 TObjectProxy.Create 时，我得到一个参数计数不匹配；尝试调用 T 的“创建”方法。

显然这是因为以下代码没有将任何参数传递给“Invoke”方法：

```
instance := ctor.Invoke(rType.AsInstance.MetaclassType, []); 
```

我创建了一个确实传递参数的重载类函数：

```
class function Create( Args: array of TValue ): TMock<T>; overload;static; 
```

并且正在使用我所做的有限测试。

我的问题是：

这是一个错误还是我做错了？

谢谢

PS：我知道 Delphi-Mocks 是以接口为中心的，但它确实支持类，而且我正在处理的代码库是 99% 的类。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T15:55:36.903

在我看来，根本问题是`TMock<T>.Create`导致被测类 (CUT) 被实例化。我怀疑该框架是在您将模拟抽象基类的假设下设计的。在这种情况下，实例化它是良性的。我怀疑您正在处理没有方便的 CUT 抽象基类的遗留代码。但是在您的情况下，实例化 CUT 的唯一方法是将参数传递给构造函数，因此破坏了模拟的整个目的。而且我更愿意想象，重新设计遗留代码库将需要做很多工作，直到你为所有需要模拟的类都有一个抽象基类。

你在写`TMock<TFoo>.Create`哪里`TFoo`是一门课。这会导致创建一个代理对象。这发生在`TObjectProxy<T>.Create`. 其中的代码如下所示：

```
constructor TObjectProxy<T>.Create;
var
  ctx   : TRttiContext;
  rType : TRttiType;
  ctor : TRttiMethod;
  instance : TValue;
begin
  inherited;
  ctx := TRttiContext.Create;
  rType := ctx.GetType(TypeInfo(T));
  if rType = nil then
    raise EMockNoRTTIException.Create('No TypeInfo found for T');

  ctor := rType.GetMethod('Create');
  if ctor = nil then
    raise EMockException.Create('Could not find constructor Create on type ' + rType.Name);
  instance := ctor.Invoke(rType.AsInstance.MetaclassType, []);
  FInstance := instance.AsType<T>();
  FVMInterceptor := TVirtualMethodInterceptor.Create(rType.AsInstance.MetaclassType);
  FVMInterceptor.Proxify(instance.AsObject);
  FVMInterceptor.OnBefore := DoBefore;
end; 
```

如您所见，代码假设您的类具有无参数构造函数。当你在你的类上调用 this 时，它的构造函数确实有参数，这会导致运行时 RTTI 异常。

据我了解代码，该类的实例化仅用于拦截其虚拟方法。我们不想对这个类做任何其他事情，因为那样会破坏嘲笑它的目的。你真正需要的只是一个对象的实例，它有一个合适的 vtable，可以被`TVirtualMethodInterceptor`. 您不需要或不希望您的构造函数运行。您只是希望能够模拟一个恰好具有带参数的构造函数的类。

因此，我建议您修改它以使其调用构造函数，而不是此代码调用构造函数`NewInstance`。这是您需要做的最低限度的工作，才能拥有一个可以操作的 vtable。您还需要修改代码，使其不会尝试破坏模拟实例，而是调用`FreeInstance`. 只要您所做的只是在模拟上调用虚拟方法，所有这些都可以正常工作。

修改如下所示：

```
constructor TObjectProxy<T>.Create;
var
  ctx   : TRttiContext;
  rType : TRttiType;
  NewInstance : TRttiMethod;
  instance : TValue;
begin
  inherited;
  ctx := TRttiContext.Create;
  rType := ctx.GetType(TypeInfo(T));
  if rType = nil then
    raise EMockNoRTTIException.Create('No TypeInfo found for T');

  NewInstance := rType.GetMethod('NewInstance');
  if NewInstance = nil then
    raise EMockException.Create('Could not find NewInstance method on type ' + rType.Name);
  instance := NewInstance.Invoke(rType.AsInstance.MetaclassType, []);
  FInstance := instance.AsType<T>();
  FVMInterceptor := TVirtualMethodInterceptor.Create(rType.AsInstance.MetaclassType);
  FVMInterceptor.Proxify(instance.AsObject);
  FVMInterceptor.OnBefore := DoBefore;
end;

destructor TObjectProxy<T>.Destroy;
begin
  TObject(Pointer(@FInstance)^).FreeInstance;//always dispose of the instance before the interceptor.
  FVMInterceptor.Free;
  inherited;
end; 
```

坦率地说，这对我来说看起来更明智。调用构造函数和析构函数肯定没有意义。

请让我知道我是否在这里偏离了主题并且错过了重点。这是完全可能的！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T15:58:44.123

我不确定我是否正确地满足了您的需求，但也许这种 hacky 方法可能会有所帮助。假设您有一个类在其构造函数中需要一个参数

```
type
  TMyClass = class
  public
    constructor Create(AValue: Integer);
  end; 
```

您可以使用无参数构造函数和包含参数的类属性来继承此类

```
type
  TMyClassMockable = class(TMyClass)
  private
  class var
    FACreateParam: Integer;
  public
    constructor Create;
    class property ACreateParam: Integer read FACreateParam write FACreateParam;
  end;

constructor TMyClassMockable.Create;
begin
  inherited Create(ACreateParam);
end; 
```

现在您可以使用类属性将参数传递给构造函数。当然，您必须将继承的类提供给模拟框架，但由于没有其他任何更改，派生类也应该这样做。

如果您确切知道何时实例化类，这也将起作用，以便您可以为类属性提供正确的参数。

不用说，这种方法不是线程安全的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T09:29:43.817

免责声明：我不了解 Delphi-Mocks。

我想这是设计使然。从您的示例代码看来，Delphi-Mocks 正在使用泛型。如果要实例化泛型参数的实例，如下所示：

```
function TSomeClass<T>.CreateType: T;
begin
  Result := T.Create;
end; 
```

那么你需要对泛型类的构造函数约束：

```
TSomeClass<T: class, constructor> = class 
```

具有构造函数约束意味着传入的类型必须具有无参数构造函数。

你可能会做类似的事情

```
TSomeClass<T: TSomeBaseMockableClass, constructor> = class 
```

并给出`TSomeBaseMockableClass`一个特定的构造函数，然后可以使用，**但是**：

要求框架的所有用户从特定的基类派生他们的所有类只是……嗯……过于严格（说得委婉些），尤其是考虑到 Delphi 的单一继承。

# php - Symfony2 - 带有闪存消息的数组到字符串转换异常

> ID：15582278
> 
> 赞同：9
> 
> 时间：2013-03-23T01:17:59.257
> 
> 标签：php, symfony, flash-message

我使用以下代码在控制器中设置了一条闪存消息：

```
$this->get('session')->getFlashBag()->add('success', 'Message sent successfully'); 
```

在我的模板中，我使用以下内容（尝试）显示它：

```
{% if app.session.flashbag.has('success') %}
    <div id="flash">
        {{ app.session.flashbag.get('success') }}
    </div>
{% endif %} 
```

问题是，尽管 API 文档说明`get`返回一个字符串，但我得到了一个数组到字符串的转换异常。如果我将模板中的代码更改为：

```
{% for flashMessage in app.session.flashbag.get('success') %}
    <div id="flash">
        {{ flashMessage }}
    </div>
{% endfor %} 
```

它完美地工作。我宁愿不在这里使用循环，因为我要么只会收到一条消息，要么不会。

有没有一种解决方案，我可以检查是否存在单个闪存消息并在存在时显示它？还是我陷入了无用的循环？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-23T01:43:17.763

通过在 0 处索引来解决它：

```
{{ app.session.flashbag.get('success')[0] }} 
```

我的怀疑是正确的——`get`返回一个数组而不是一个字符串。这是flashbag的`add`方法：

```
public function add($type, $message)
{
    $this->flashes[$type][] = $message;
} 
```

并且`get`：

```
public function get($type, array $default = array())
{
    if (!$this->has($type)) {
        return $default;
    }

    $return = $this->flashes[$type];

    unset($this->flashes[$type]);

    return $return;
} 
```

他们需要修复 API 文档，使其反映现实。它们还应该提供一种优雅的方式来处理单个 Flash 消息。

编辑：向后兼容（PHP 5.3 及以下）版本 -

```
{% if app.session.flashbag.has('success') %}
    {% set flashbag = app.session.flashbag.get('success') %}
    {% set message = flashbag[0] %}
    <div id="flash">
        {{ message }}
    </div>
{% endif %} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-23T12:59:26.197

对于一条闪光信息：

```
{{ app.session.flashbag.get('success')[0] }} 
```

对所有人：

```
{% for type, messages in app.session.flashbag.all() %}
    {% for message in messages %}
        <div class="alert alert-{{ type }}">
            {{ message }}
        </div>
    {% endfor %}
{% endfor %} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-08T11:35:50.653

我自己刚打过这个。这是因为我使用的是`add()`方法而不是`set()`.

添加和设置的区别：

```
public function add($type, $message)
{
    $this->flashes[$type][] = $message;
} 
```

以上将添加一个在这种情况下不需要的额外数组。

然而：

```
public function set($type, $messages)
{
    $this->flashes[$type] = (array) $messages;
} 
```

所以`set()`结果`$array[$key] = $value`，而不是 add 做什么，这`$array[$key][] = $value`就是导致你的 Array 到字符串转换的原因，因为你传递的是一个数组，而不是一个字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T07:35:36.420

OK, I see that you have resolved this issue by yourself but this might be an easier way:

```
{% if app.session.hasFlash('success') %}
    {{ app.session.flash('success') }}
{% endif %} 
```

... since you can't guarantee that there will always be at least flash message ;)

# c# - 基于多个下拉列表的选择控制Gridview

> ID：15582280
> 
> 赞同：0
> 
> 时间：2013-03-23T01:18:05.887
> 
> 标签：c#, .net, database

我创建了一个名为 Ztv.mdf 的数据库，表为 tabl1，带有 [Name], [fullname], [Id],[dept]& 还为 dept 创建了一个下拉列表 1。当用户从下拉列表 1 中选择了 dept 值时gridview 显示输出。它工作正常。但我想要 1 个名称的下拉列表。我的目标是，当用户从下拉列表 1 和下拉列表 2 中选择值时，它控制网格视图。我该怎么做？

我的 1 个下拉列表和网格视图的代码是：

```
<form id="form1" runat="server">
<div>
    <asp:DropDownList ID="ddlSearchCriteria" runat="server" 
        DataSourceID="SqlDataSource1" DataTextField="depat" DataValueField="Id" 
        AutoPostBack="True">
    </asp:DropDownList>
    &nbsp;&nbsp;
       <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:ztvConnectionString %>" 
        SelectCommand="SELECT [Id], [depat] FROM [Table1]"></asp:SqlDataSource>
    <br />

    <asp:GridView ID="gvSearchResults" runat="server" AutoGenerateColumns="False" 
        DataKeyNames="Id" DataSourceID="SqlDataSource2" CellPadding="4" 
        ForeColor="#333333" GridLines="None" style="margin-left: 155px">
        <AlternatingRowStyle BackColor="White" />
        <Columns>
            <asp:BoundField DataField="Name" HeaderText="Name" SortExpression="Name" />
            <asp:BoundField DataField="Id" HeaderText="Id" InsertVisible="False" 
                ReadOnly="True" SortExpression="Id" />
            <asp:BoundField DataField="fullname" HeaderText="fullname" 
                SortExpression="fullname" />
        </Columns>
        <EditRowStyle BackColor="#2461BF" />
        <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
        <RowStyle BackColor="#EFF3FB" />
        <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
        <SortedAscendingCellStyle BackColor="#F5F7FB" />
        <SortedAscendingHeaderStyle BackColor="#6D95E1" />
        <SortedDescendingCellStyle BackColor="#E9EBEF" />
        <SortedDescendingHeaderStyle BackColor="#4870BE" />
    </asp:GridView>
    <asp:SqlDataSource ID="SqlDataSource2" runat="server" 
        ConnectionString="<%$ ConnectionStrings:ztvConnectionString %>" 

        SelectCommand="SELECT [Name], [fullname], [Id] FROM [Table1] WHERE ([Id] = @Id)">
        <SelectParameters>
            <asp:ControlParameter ControlID="ddlSearchCriteria" Name="Id" 
                PropertyName="SelectedValue" Type="Int32" />
        </SelectParameters>
    </asp:SqlDataSource>
    <br />
    <br />
    <br />

</div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T07:29:16.037

您可以使用存储过程使用多个下拉列表选择将数据绑定到网格视图。将下拉选择的值作为参数传递给存储过程并获取结果。我已经实现了这个。

```
 public void BindGridList(object sender, EventArgs e)
    {
        try
        {
            using (CompMSEntities1 CompObj = new CompMSEntities1())
            {
                DateTime Start = Convert.ToDateTime(txtStart.Text);
                DateTime End = Convert.ToDateTime(txtEnd.Text);
                Int32 Department = Convert.ToInt32(ddlDept.SelectedValue);
                Int32 Category = Convert.ToInt32(ddlCategory.SelectedValue);
                Int32 Priority = Convert.ToInt32(ddlPriority.SelectedValue);
                Int32 Status = Convert.ToInt32(ddlStatus.SelectedValue);
                GridViewComplaintReport.DataSource = CompObj.SP_ManageComplaint_Summary(Start, End, Department, Category, Priority, Status);
                SP_ManageComplaint_Summary_Result obj = new SP_ManageComplaint_Summary_Result();
                GridViewComplaintReport.DataBind();
                GridViewComplaintReport.Visible = true;
                ExportTable.Visible = true;
                TableGrid.Visible = true;
            }
        }
        catch (Exception ex)
        {
            lblException.Text = "Problem in data retrive from database .";
            lblException.Visible = true;
            ErrorHandler.WriteError(ex.ToString());
        } 
```

> 存储过程的代码 -

```
CREATE PROCEDURE  dbo.SP_ManageComplaint_Summary

  @StartDate datetime,
  @EndDate datetime,
  @DepartmentID INT,
  @CategoryID INT,
  @PriorityID INT ,    

  @StatusID INT

AS
BEGIN

  SELECT d1.DepartmentName,c1.CategoryName,s1.StatusType,
  p1.PriorityType,c.Title, c.[Description], c.Created,c.DueDate,
  u1.Email, u1.UserID, c.QMRClosedDate

  FROM  Complaint   c   
  Inner  JOIN Department  d1 ON c.DepartmentID = d1.DepartmentID
  Inner JOIN Category  c1  ON c.CategoryID = c1.CategoryID
  Inner JOIN Priority  p1  on c.PriorityID = p1.PriorityID
  Inner JOIN UserInfo   u1 on c.UserID = u1.UserID   
  Inner JOIN [Status]  s1 on c.StatusID = s1.StatusID   

  WHERE 
 c.Created  BETWEEN @StartDate AND @EndDate+1   AND

     d1.DepartmentID = Case when @DepartmentID = -1 then d1.DepartmentID else @DepartmentID end AND        
     c1.CategoryID = Case when @CategoryID = -1 then  c1.CategoryID else @CategoryID end AND
     p1.PriorityID = Case when @PriorityID = -1 then p1.PriorityID  else @PriorityID end AND
     s1.StatusID =Case When @StatusID = -1 then s1.StatusID else @StatusID end 
```

# jquery - json回调错误未调用wcf jquery

> ID：15582284
> 
> 赞同：1
> 
> 时间：2013-03-23T01:19:11.680
> 
> 标签：jquery, .net, json, wcf, cordova

我有一个 WCF 服务：

```
[ServiceContract]

public interface IMunicipiosService
{
    [OperationContract]
    [WebInvoke(Method = "GET",
        ResponseFormat = WebMessageFormat.Json,
        BodyStyle = WebMessageBodyStyle.Wrapped,
        UriTemplate = "ListaMunicipios")]

    List<ClsListaMunicipios> GetListaMunicipios();
} 
```

它在 chrome 中返回 json（它是 JSON 还是 JSONP？）：

```
{"GetListaMunicipiosResult":[{"MunicipioID":"1","MunicipioNome":"Florianopolis","MunicipioUf":"SC"},{"MunicipioID":"2","MunicipioNome":"Joinville","MunicipioUf":"SC"}]} 
```

我的 JS：

```
$.ajax("http://localhost:56976/MunicipiosService.svc/ListaMunicipios", {

    beforeSend: function (xhr) {
        // $.mobile.showPageLoadingMsg();
        alert('beforeSend');
    },

    complete: function () {
        // $.mobile.hidePageLoadingMsg();
        alert('complete');
    },
    contentType: 'application/json; charset=utf-8',
    dataType: 'jsonp',
    type: 'GET',
    data: {},

    error: function (xhr, ajaxOptions, thrownError) {
        alert('not ok 1 ' + xhr.status);
        alert('not ok 2 ' + xhr.responseText);
        alert('not ok 3 ' + thrownError);
    },
    success: function (data) {
        alert('success');

    }
}); 
```

但我得到错误：

> 不好 1 200
> 
> 不好 2 未定义
> 
> 不行 3 错误 jQueryXXXXXXXXX 没有被调用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:23:55.020

由于您能够通过 Chrome 发出的 GET 请求获得 JSON 响应，因此我假设您已正确设置 WCF 服务。

您唯一的问题是您的成功回调没有触发。如果您正在执行跨域请求但只是从 WCF 方法返回 JSON，则会发生这种情况。您需要一些东西来构造和流回响应。

考虑在您的服务方法中执行此操作，而不是简单地返回`List<ClsListaMunicipios>`：

```
 HttpContext.Current.Response.ClearContent();

    HttpContext.Current.Response.ContentType = "application/json";
    string callback = HttpContext.Current.Request.QueryString["callback"];

    HttpContext.Current.Response.Write(callback + "( " + new JavaScriptSerializer().Serialize(YourListObjectGoesHere)  + " )");
    HttpContext.Current.Response.Flush();
    HttpContext.Current.Response.End(); 
```

我使用了您的 AJAX 调用，随后触发了成功回调。

# c - 从 txt 文件中获取姓名和数字所需的建议

> ID：15582285
> 
> 赞同：1
> 
> 时间：2013-03-23T01:19:20.893
> 
> 标签：c

我正在编写一个程序，它从 txt 中获取名称和数字，并将它们添加到数组中，具体取决于它是字符串还是数字。

我目前的程序是这样的：

```
#include <stdio.h>

int main() {
    FILE * ifp = fopen("input.txt","r");
    FILE * ofp = fopen ("output.txt", "w");
    int participants = 0, i , j;
    char name [10];
    int grade [26];

    fscanf(ifp, "%d", &participants);

    for (i = 1; i < participants; i++) {
        fscanf(ifp, "%s", name);          
        for (j = 0; j < 8; j++) {
            fscanf(ifp, "%d", &grade[j]);  
        }
    }

    printf( "%d\n", participants);
    printf( "%s\n", name);
    printf( "%d\n", grade);

    fclose(ifp);
    fclose(ofp);

    return 0;
} 
```

我的输出是这样的：

```
2
Optimus
2686616 
```

我的txt文件是这样的：

```
2 
Optimus 
45 90 
30 60 
25 30 
50 70 
Megatron 
5 6 
7 9 
3 4 
8 10 
```

关于我如何制作它的任何想法，所以它显示如下：

```
2 
Optimus 
Megatron 
45 
90 
30 
60 
25 
30 
50 
70 
5 
6 
7 
9 
3 
4 
8 
10 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T01:22:32.017

用于`strtok`从文件生成标记，在换行符和空格处拆分，然后检查每个字符串是否为数字，通过尝试解析它，使用`itoa`或类似的东西，如果可解析添加到数字，否则添加到名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T01:43:03.260

要以请求的格式存储数据，您需要一个二维数组来存储您的值。由于参与者的数量是先验未知的，因此您必须动态分配所需的空间并在以后释放它。请找到您的代码的修改版本，如下所示

```
#include <stdio.h>
#include <stdlib.h>

int main() 
{
    FILE * ifp = fopen("input.txt","r");
    FILE * ofp = fopen ("output.txt", "w");
    int participants = 0, i , j;
    char **name; // Changed the name to a 2D array
    int **grade; // Changed the grade to a 2D array
    char *curname; // Temp pointer to current name
    int  *curgrade; // Temp pointer to current array of grades

    fscanf(ifp, "%d", &participants);

    // Allocate memory
    name = malloc((sizeof(char *) * participants)); // Allocate pointers to hold strings for the number of participants
    grade = malloc((sizeof(int *) * participants)); // Allocate pointers to hold grades for the number of participants

    for(i = 0; i < participants; i++) {
        name[i] = malloc((sizeof(char) * 10)); //Assumption: Name doesn't exceed 10 characters
        grade[i] = malloc((sizeof(int) * 8)); // Assumption: Only 8 grades
   }

    for (i = 0; i < participants; i++) { /* Fixed: index i should start from 0 */
        curname = name[i]; // Get pointer to current name
        curgrade = &grade[i][0]; // Get pointer to array of current grades
        fscanf(ifp, "%s", curname); // Read name into current name pointer
        for (j = 0; j < 8; j++) {
            fscanf(ifp, "%d", &curgrade[j]); // Read grades into current array
        }
    }

    printf("%d\n", participants);
    for(i = 0; i < participants; i++) {
        printf("%s\n", name[i]);
    }
    for(i = 0; i < participants; i++) {
        curgrade = &grade[i][0];
        for (j = 0; j < 8; j++) {
            printf("%d\n", curgrade[j]);
        }
    }

    fclose(ifp);
    fclose(ofp);

    for(i = 0; i < participants; i++) {
        free(name[i]); // Free the array of individual names
        free(grade[i]); // Free the array of grades for every participant
    }

    free(grade); // Free the grades pointer
    free(name); // Free the names pointer

return 0; 
```

}

# javascript - 三.js Raycaster intersectObjects

> ID：15582286
> 
> 赞同：3
> 
> 时间：2013-03-23T01:19:58.520
> 
> 标签：javascript, three.js, webgl

我正在尝试从 three.js 修改[此示例](https://github.com/timoxley/threejs/blob/master/examples/webgl_morphtargets_md2_control.html)，以通过鼠标单击来控制字符。首先，当我单击画布时，我需要鼠标坐标并使用 THREE.Raycaster.intersectObjects 将其转换为 3D 空间坐标。在修改后的代码中，鼠标左键向上，我有以下内容：

```
var vector = new THREE.Vector3((event.clientX / window.innerWidth) * 2 - 1, -(event.clientY / window.innerHeight) * 2 + 1, 0.5);
var projector = new THREE.Projector();
projector.unprojectVector(vector, camera);

var raycaster = new THREE.Raycaster(camera.position, vector.sub(camera.position).normalize());

var intersects = raycaster.intersectObjects(objects);

if (intersects.length > 0) {
    console.log('intersect: ' + intersects[0].point.x.toFixed(2) + ', ' + intersects[0].point.y.toFixed(2) + ', ' + intersects[0].point.z.toFixed(2) + ')');
}
else {
    console.log('no intersect');
} 
```

我已将地面网格添加到`objects`阵列中，但`raycaster.intersectObjects`单击地面网格时仍返回空数组。我也尝试过传入`scene.children`而不是`objects`，但没有运气。

这是[完整的修改源](https://gist.github.com/anonymous/5225890)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T02:28:08.290

显然，陀螺仪是问题所在。取出这些线，我得到相交工作。不确定这是错误还是功能。

```
var gyro = new THREE.Gyroscope();
gyro.add( camera );
characters[ Math.floor( nSkins/2 ) ].root.add( gyro ); 
```

# mysql - 如何在 MySQL 中查找/替换

> ID：15582288
> 
> 赞同：0
> 
> 时间：2013-03-23T01:20:09.280
> 
> 标签：mysql

如何查找/替换一个 table1.field3 中与另一个 table2.field2 匹配的所有值，使用 table2.field2 的循环，就像 table1.field1 中的通配符字符串匹配

像这样的东西。

```
 UPDATE productsTable.color
SET x = (
    SET productsTable.Color = colorstable.`name`

WHERE productsTable.ShortDescription LIKE colorstable.%`nameOfColor`%';
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T01:45:01.997

您应该能够在不使用循环的情况下实现这一目标：

```
UPDATE productsTable, colorstable
  SET productsTable.color = colorstable.name
WHERE productsTable.shortdescription LIKE CONCAT('%',colorstable.name,'%'); 
```

# ios - ios - 未找到包含任何钥匙串签名证书的未过期配置文件

> ID：15582289
> 
> 赞同：0
> 
> 时间：2013-03-23T01:20:11.240
> 
> 标签：ios, xcode, ios5, ios6

我收到此错误：

```
No unexpired provisioning profiles found that contain any of the keychain's signing certificates 
```

部分问题是我的捆绑包 ID 不正确。但是当我尝试在 xCode 中编辑它时，它是灰色的（不可编辑）。

因此，我尝试在 Project -> info 屏幕中对其进行编辑，但就我而言，那里没有任何内容。

我还在 .plist 文件中对其进行了编辑，但这并没有产生任何影响。

![在此处输入图像描述](../Images/9c3f1e0c5c98bd31c597a17b5f7538c1.png)

任何人都可以帮我解决这个问题。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T01:25:04.563

点击**Targets->Summary->BundleIdentifier**而不是**Project->Info**

Bundle Identifier（指您的应用程序名称）的最后一部分可能不可编辑。

但是您可以编辑 Bundle Identifier 的前两个部分（例如 com.domainname 将是可编辑的）

将光标位置指向**Bundle Identifier**的末尾（在 . 的末尾，`com.domainname`即 'e'），然后使用**delete**键**清除**和**修改**它。

我的屏幕截图，你可以看到`com-Dev.test`是**可编辑**和**启用的**。

![在此处输入图像描述](../Images/ce7f271aadc956258775dbcb1b0f33fb.png)

# plsql - 将多个列值合并到单行中

> ID：15582291
> 
> 赞同：-2
> 
> 时间：2013-03-23T01:20:25.087
> 
> 标签：plsql

我在一个表中有这种格式的数据：

键 Col1 Col2 Col3Type
Part1 abc1 cde1 X
Part1 fgh1 Y

我希望我的选择查询的结果合并 Part1 的所有列值，如下所示：

键 Col1 Col2 Col3
Part1 abc1 cde1 fgh1

我尝试使用 GROUP BY/HAVING 并使用 Type 列的值进行自联接。这些没有用。

```
 select 
    a.Key ,a.Col1, a.Col2, b.Col3
    from table a 
    join table b on 
    a.Key = b.Key and 
    b.Type ='Y' and 
    a.Type= 'X' 
```

基本上我注意到的约束是，如果我有 group by / having，我只会得到所有三个列值都存在的行。另外我不知道如何获取出口 sql 中的列值。选择 a.* 将从第一行给我。我如何获得 b.？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T04:33:24.753

```
select 
  Key,
  max(Col1) as Col1,
  max(Col2) as Col2,
  max(Col3) as Col3
from table
group by Key 
```

# javascript - 你知道如何在阿根廷获得谷歌地图的十字路口吗？

> ID：15582292
> 
> 赞同：0
> 
> 时间：2013-03-23T01:20:35.533
> 
> 标签：javascript, google-maps

是否可以从阿根廷、智利或巴西的 Google Maps API 获取交叉路口和街道之间的街道？

[http://maps.googleapis.com/maps/api/geocode/json?sensor=true&address=Peatones%2033,%20Santiago,%20Chile](http://maps.googleapis.com/maps/api/geocode/json?sensor=true&address=Peatones%2033,%20Santiago,%20Chile)

[http://maps.googleapis.com/maps/api/geocode/json?sensor=true&address=Baez%20800%20Autonomous%20City%20of%20Buenos%20Aires,%20Argentina](http://maps.googleapis.com/maps/api/geocode/json?sensor=true&address=Baez%20800%20Autonomous%20City%20of%20Buenos%20Aires,%20Argentina)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-21T04:14:50.440

[https://support.google.com/maps/answer/144337#roads](https://support.google.com/maps/answer/144337#roads)

“注意：交叉口搜索并非在所有国家或语言中都可用”

# highcharts - 固定 Highcharts 中的 y 轴标签宽度

> ID：15582294
> 
> 赞同：19
> 
> 时间：2013-03-23T01:21:06.493
> 
> 标签：highcharts

我正在构建一个数据演示文稿，其中两个 Highcharts 图表垂直堆叠，旨在共享相同的 x 轴单位和对齐方式。像这样：

![堆叠的Highcharts](../Images/f35e524e3a0840cf52be7c37e66caf22.png)

请注意，由于两个图表的 y 轴范围不同，因此 y 轴标签的宽度不同，因此图表本身的宽度略有不同，破坏了良好的 x 轴对齐。

如果能够固定图表的宽度（或相反的 y 轴标签）以确保两个图表对齐，那就太好了。我探索了 api 并在各种生成的元素上直接设置样式，但没有运气。使用自定义标签格式化程序似乎可以实现这个目标，但是库存格式化程序（就像我没有定义任何自定义一样）对于缩写大数字等非常有效。

关于如何固定图表或 y 轴标签宽度的想法？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-05-31T08:05:51.687

如果您设置[chart.marginLeft](http://api.highcharts.com#chart.marginLeft)选项，它将覆盖自动尺寸标签，以便 Y 轴对齐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T12:17:19.717

有点hacky的方式，但应该工作：

*   为两个 xAxis 设置`width`，例如 400px
*   为所有轴（xAxis 和 yAxis）设置`right`，例如 20px

现在 yAxis 应该具有相同的宽度和相同的极值等。

另一个（甚至可能更好）的解决方案是为 Highcharts 使用两个窗格。它的工作方式与 Highstock 中的完全相同，请参见示例：[http ://www.highcharts.com/stock/demo/candlestick-and-volume](http://www.highcharts.com/stock/demo/candlestick-and-volume)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-24T19:55:30.770

这是一个较晚的答案，但您现在可以在同一个 Highcharts 对象内制作多个图表。使用此方法时，您不必手动尝试强制 Y 轴对齐，因为 Highcharts 会为您完成所有工作。

[http://www.highcharts.com/demo/combo](http://www.highcharts.com/demo/combo)

# php - PHP / Symfony2 中每个用户两个会话

> ID：15582297
> 
> 赞同：2
> 
> 时间：2013-03-23T01:21:35.663
> 
> 标签：php, symfony

我正在使用 Symfony2，但这可能只是一个 PHP 问题。

1.  根据我的理解（如果我错了，请更正）如果我将会话 cookie 设置为安全，那么 cookie 只会在安全连接上发送。因此，在非安全连接上，服务器实际上无法记住基于用户访问的任何内容。我只是想确认我对此的理解。

2.  是否可以有两个会话 cookie？一个用于所有协议来存储不安全的会话数据（例如，不是用户身份验证/登录），第二个会话将是仅安全的并处理登录授权。

    我知道我可以为奇怪的不安全的东西设置一个本地 cookie，但我真的希望能够使用 $_SESSION 两次（一次用于所有人，一次用于 https-only）。

    我觉得使用安全 cookie 对于用户身份验证/登录至关重要，但我也希望能够在非安全页面上进行某种形式的会话。

3.  Symfony2 对此有什么特别的处理吗？我知道它通过其内置类很好地处理会话，但它在使用安全 cookie 方面有什么特别的作用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T11:47:56.013

对于 (1) - 是的，你是对的

对于 (2) - 您可以通过在查询字符串中传递 SessionID 来让 2 个单独的 $_SESSION （安全和不安全的）相互通信（可能带有一些哈希保护以避免顽皮的用户）。更多信息[Session lost whenswitching from HTTP to HTTPS in PHP](https://stackoverflow.com/questions/441496/session-lost-when-switching-from-http-to-https-in-php) and [Switching between HTTP and HTTPS pages with secure session-cookie](https://stackoverflow.com/questions/5843305/switching-between-http-and-https-pages-with-secure-session-cookie)

正如线程中所建议的那样，如果可能的话，您还可以考虑将您的页面设置为 HTTPS，从而让您的生活更轻松

对于 (3) - 我不是 Symfony2 方面的专家，但可以快速浏览文档，在这种情况下它没有任何特定工具可供您使用，除了支持设置是否要保护 cookie

# javascript - 从另一个正则表达式中排除一个正则表达式

> ID：15582298
> 
> 赞同：3
> 
> 时间：2013-03-23T01:21:46.743
> 
> 标签：javascript, regex

在 JavaScript 中，是否可以排除一个正则表达式的匹配项（通过编写另一个正则表达式）？例如，我想排除正则表达式的所有匹配项

`/(cl|g|cr|d)(own)/`（匹配“小丑”、“礼服”、“皇冠”和“羽绒”）

从正则表达式

`/(c|g|cl|cr|d)(o(w|u))(n|d)/`（匹配“crown”、“clown”、“gown”、“clod”等）。

组合的正则表达式应该匹配所有匹配第一个正则表达式的字符串，而不是匹配第二个正则表达式的字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T01:25:37.813

好吧，你可以这样写：

```
/(?:cl|g|cr|d)o(?:un|wd)|co[wu][nd]/ 
```

但更一般地说，您可以使用负前瞻：

```
/(?!(?:cl|g|cr|d)own)(?:c|g|cl|cr|d)o[wu][nd]/ 
```

# php - 表单验证后如何在codeigniter中设置要查看的段？

> ID：15582299
> 
> 赞同：1
> 
> 时间：2013-03-23T01:21:49.133
> 
> 标签：php, codeigniter, validation, codeigniter-url, codeigniter-routing

我正在验证由第三个 URL 段生成的许多视图上的表单。

网址：[http](http://example.com/listings/item/12) ://example.com/listings/item/12 （*12会根据item而变化*）

我的两个函数都在下面，**我的问题是，当验证失败时，如何用第三段刷新页面并显示验证错误？**

PS：我已经尝试过 redirect() 但验证错误不会保留。

谢谢你。

* * *

这是“项目”功能

```
 public function item()
{

    if ($this->session->userdata('is_logged_in'))
    {
        $id = $this->uri->segment(3);
        $this->load->model('listings_model');

        if ($data['things']= $this->listings_model->get_item($id))
        {
            $this->load->view('list/item_view',$data);
        }
    }
    else
    {
         $this->unauth();
    }
} 
```

* * *

这是我的验证

```
 public function get_email()
{

    $this->load->library('form_validation');

        $this->form_validation->set_rules('captcha', 'Captcha', 'required|trim|callback_check_captcha' );

        if ($this->form_validation->run() == FALSE)
        {
           $this->item();
        }
        else
        {
            $this->load->model('listings_model');

            if ($this->listings_model->update_listing())
            {
                echo "Good";
            }

        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:26:31.033

发生错误时，您可以使用以下代码重定向到您的页面。发生错误时，您可以将其放入控制器中。

```
redirect('listings/item/12/error_message_goes_here', 'location');
exit; 
```

在您看来，检查天气第四个参数是否存在。如果第四个存在则显示错误

```
if(!empty($this->uri->segment(4))){

   $this->output->set_output($this->uri->segment(4));

} 
```

所以你的重点是：你重定向并在你的重定向中传递错误消息，然后在查看是否存在错误消息时显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-23T02:40:34.670

您可以通过设置表单操作属性来设置 uri 段。

```
form_open("controller/method/segments/to/retain", array('method' => 'post')); 
```

# vb.net - ListView 中的详细信息属性未显示

> ID：15582300
> 
> 赞同：2
> 
> 时间：2013-03-23T01:21:51.260
> 
> 标签：vb.net, listview

我将列表视图设置为详细信息以尝试创建列，但列不会显示。是什么阻止了列的显示？

```
Imports System.IO
Imports System.Windows.Forms.VisualStyles.VisualStyleElement.Menu

Public Class Jonathan_Roda_P4
    Dim TitlesData(21)
    Dim BOData(21)

    'Clear Button Function
    Private Sub ResetClearToolStripMenuItem_Click(sender As Object, e As EventArgs) Handles ResetClearToolStripMenuItem.Click
        'Clear Title LV
        DispResView.Clear()
        'Clear Box Office List
        BOList.Items.Clear()
        'Resets User Message to default
        UsrMsg.Text = "Data Not Loaded"
    End Sub

    'Help/Instructions Properties

    Private Sub InstructionsToolStripMenuItem_Click(sender As Object, e As EventArgs) Handles InstructionsToolStripMenuItem.Click
        MessageBox.Show("1\. Click the 'Load Files' Button" & vbNewLine _
                        & vbNewLine _
                        & "2\. Select two respective files." & vbNewLine _
                        & "      (Note: Each file must have the same number of lines)" & vbNewLine _
                        & "      (Note: You may only select two files)" & vbNewLine _
                        & vbNewLine _
                        & "3\. Select the 'Open' button to load your selected files" & vbNewLine _
                        & vbNewLine _
                        & "4\. The Box Office Lister will now display each file's contents as it appears in the file" & vbNewLine _
                        & vbNewLine _
                        & "5\. Clicking any of the sort buttons will reorder the displayed content as follows:" & vbNewLine _
                        & "       a) Sort by A-Z: Sorts the displayed content alphabetically by title" & vbNewLine _
                        & "       b) Sort by Z-A: Sorts the displayed content in reverse alphabetical order by title" & vbNewLine _
                        & "       c) Sort by 0-9: Sorts the displayed content in ascending numerical order by Box Office Amount" & vbNewLine _
                        & "       d) Sort by 9-0: Sorts the displayed content in descending numerical order by Box Office Amount" & vbNewLine _
                        & vbNewLine _
                        & "6\. Clicking the 'Clear' button will reset the program and require you to select two new files" & vbNewLine _
                        & vbNewLine _
                        & "7\. Clicking the 'Exit' button will close the program" & vbNewLine _
                        & vbNewLine _
                        & "8\. TOP THIRD" & vbNewLine _
                        & "      Top Third lists the top 1/3 missions in order of Box Office Amount", "007 Box Office Lister Instructions")
    End Sub

    'File/Exit Properties
    Private Sub ExitToolStripMenuItem_Click(sender As Object, e As EventArgs) Handles ExitToolStripMenuItem.Click
        Application.Exit()
    End Sub

    'Exit Button Properties
    Private Sub ExitBtn_Click(sender As Object, e As EventArgs) Handles ExitBtn.Click
        Application.Exit()
    End Sub

    Private Sub ClearBtn_Click(sender As Object, e As EventArgs) Handles ClearBtn.Click
        DispResView.Clear()
        UsrMsg.Text = "Data Not Loaded"
    End Sub

    Private Sub LoadButton_Click(sender As Object, e As EventArgs) Handles LoadButton.Click

        With OpenFileDialog1
            .CheckPathExists = True
            .DefaultExt = "txt"
            .Filter = _
             "Text files (*.txt)|*.txt"
            .Multiselect = True
            .RestoreDirectory = True
            .Title = "Open"
            .ValidateNames = True
            DispResView.Clear()
        End With
        'Resets User Message to default if another message is displayed
        UsrMsg.Text = "Data Not Loaded"

        'Sets Default folder to Desktop
        OpenFileDialog1.InitialDirectory = Environment.GetFolderPath(Environment.SpecialFolder.Desktop)

        'OpenFileDialog Properties
        If OpenFileDialog1.ShowDialog = Windows.Forms.DialogResult.OK Then
            Dim count As Integer = 0
            For Each s As String In OpenFileDialog1.FileNames
                Dim sAllData() As String = System.IO.File.ReadAllLines(s)
                count = count + 1
            Next
            For Each openFile As String In OpenFileDialog1.FileNames
                Dim getAllData() As String = File.ReadAllLines(openFile)
                For i As Integer = 0 To getAllData.Length - 1
                    DispResView.Items.Add(getAllData(i))
                Next
            Next
        End If

    End Sub

    Private Sub OpenFileDialog1_FileOk(sender As Object, e As System.ComponentModel.CancelEventArgs) Handles OpenFileDialog1.FileOk

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T01:31:24.700

您是否已将所有列标题添加到 ListView.Columns？ListView 不会显示比它的标题更多的列。

```
DispResView.Columns.Add "Name"
DispResView.Columns.Add "Size"
'etc. 
```

请注意，如果您希望不删除列标题，您应该调用`DispResview.Items.Clear`而不是`DispResView.Clear`.

# javascript - 遍历 arguments.callee.caller 会导致无限循环

> ID：15582309
> 
> 赞同：0
> 
> 时间：2013-03-23T01:22:49.430
> 
> 标签：javascript, node.js

假设我想获取某种堆栈跟踪，获取在当前函数之前调用的所有函数的名称。

我做这样的事情：

```
 var callee;
        var caller;
        var _args = arguments;
        var check = 0;
        do {
                    check++;

                    callee = _args.callee;
                    caller = callee.caller;

                    var msg = 'Check ' + check + ' - ' + callee.name 
                            + ' has been called by: ' + caller.name;
                    console.log(msg);

                    if (caller) {
                        // Get this caller's arguments
                        _args = caller.arguments;
                    } else {
                        reached_end = true;
                    }

        } while (!reached_end); 
```

这在大多数情况下都可以正常工作。但有时它会陷入无限循环，我想知道：这怎么可能？我能做些什么呢？

这是我的无限循环的输出：

```
 Check 1 - __parent__ has been called by: add
    Check 2 - add has been called by: afterComponentStartup
    Check 3 - afterComponentStartup has been called by: _launchComponents [arg0:"startup"]
    Check 4 - _launchComponents has been called by: beforeActionNext
    Check 5 - beforeActionNext has been called by: beforeAction
    Check 6 - beforeAction has been called by: afterComponentInitialize
    Check 7 - afterComponentInitialize has been called by: _launchComponents [arg0:"startup"]
    Check 8 - _launchComponents has been called by: beforeActionNext
    Check 9 - beforeActionNext has been called by: beforeAction
    Check 10 - beforeAction has been called by: afterComponentInitialize
    Check 11 - afterComponentInitialize has been called by: _launchComponents [arg0:"startup"]
    Check 12 - _launchComponents has been called by: beforeActionNext
    Check 13 - beforeActionNext has been called by: beforeAction
    Check 14 - beforeAction has been called by: afterComponentInitialize
    Check 15 - afterComponentInitialize has been called by: _launchComponents [arg0:"startup"]
    Check 16 - _launchComponents has been called by: beforeActionNext
    Check 17 - beforeActionNext has been called by: beforeAction
    Check 18 - beforeAction has been called by: afterComponentInitialize
    Check 19 - afterComponentInitialize has been called by: _launchComponents [arg0:"startup"]
    Check 20 - _launchComponents has been called by: beforeActionNext
    Check 21 - beforeActionNext has been called by: beforeAction
    Check 22 - beforeAction has been called by: afterComponentInitialize
    Check 23 - afterComponentInitialize has been called by: _launchComponents [arg0:"startup"]
    Check 24 - _launchComponents has been called by: beforeActionNext
    Check 25 - beforeActionNext has been called by: beforeAction
    Check 26 - beforeAction has been called by: afterComponentInitialize 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T02:02:28.690

`arguments.callee.caller`指向函数引用，其中每个调用堆栈中的每个函数只存在一个。

每次调用函数时，`caller`都会设置属性，这意味着如果在调用堆栈中多次调用同一个函数，就像递归函数一样，先前的值将被重置，`caller`现在将指向自身。这就是导致您无限循环的原因。

`callee === callee.caller`因此，在您的算法中，如果您达到需要中断的地步以防止这种情况发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T01:39:35.040

您需要将调用者添加到数组中，并检查下一个调用者是否在数组中。如果是这样，那么您有一个循环或递归调用结构。试试这个：

```
var args = arguments;
var callee = args.callee;
var caller = callee.caller;

var stack = [callee];

while (caller) {
    if (stack.indexOf(caller) < 0) {
        stack.push(caller);
        args = caller.arguments;
        callee = args.callee;
        caller = callee.caller;
    } else break;
}

console.log(stack); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T12:45:11.033

我找到了一种将状态信息（在这种情况下为 var .ua (Object)）传递到递归函数的调用堆栈的方法；

代替

```
var fwa.animatedJavascriptControlCenter = {
    ...
    ,
    scanElements : function (el, scanResult) { 
    // a function that walks the DOM tree to find elements that require molding by my js framework
    if (!scanResult) scanResult={};
    if (el.tagName.toLowerCase()!='svg') {
        if (conditions_for_this_element_met(el)) {
            scanResults[el.id] = el;
        };
        if (el.children.length>0) {
            for (var i=0; i < el.children.length; i++) {
                if (el.children[i].tagName.toUpperCase()!=='IFRAME') {
                    scanResult = fwa.animatedJavascriptControlCenter.scanElements(el.children[i], scanResult);
                }
            }
        }
    }
    return scanResult;
    },
    ...
} 
```

做：

```
var fwa.animatedJavascriptControlCenter = {
    ...
    ,
    scanElements : function (el, scanResult) { 
        if (!scanResult) scanResult={};
        if (el.tagName.toLowerCase()!='svg') {
            if (conditions_for_this_element_met(el)) {
                scanResults[el.id] = el;
            }
            if (el.children.length>0) {
                for (var i=0; i < el.children.length; i++) {
                    if (el.children[i].tagName.toUpperCase()!=='IFRAME') {
                        var args = [el.children[i], scanResult];
                        args.ua= tracer.findUA(arguments);
                        var passUAfunc = function(scanResult) {
                            return fwa.animatedJavascriptControlCenter.scanElements(el.children[i], scanResult);
                        }
                        passUAfunc.ua = args.ua;
                        scanResult = passUAfunc(scanResult);
                    }
                }
            }
        }
        return scanResult;
    },
    ...
} 
```

要完成这项工作，您还需要：

```
// Bonus : ;-)
// Enable the passage of the 'this' object through the JavaScript timers
// thanks to https://developer.mozilla.org/en/docs/DOM/window.setTimeout#Callback_arguments
var __nativeST__ = window.setTimeout, __nativeSI__ = window.setInterval;
window.setTimeout = function (vCallback, nDelay /*, argumentToPass1, argumentToPass2, etc. */) {
    var 
    oThis = this, 
    ua = tracer.findUA(arguments),
    aArgs = Array.prototype.slice.call(arguments, 2);
    if (ua) aArgs.ua = ua;
    //if (!ua) debugger;
    return __nativeST__(vCallback instanceof Function ? function () {
        vCallback.apply(oThis, aArgs);
    } : vCallback, nDelay);
};
window.setInterval = function (vCallback, nDelay /*, argumentToPass1, argumentToPass2, etc. */) {
    var 
    oThis = this, 
    aArgs = Array.prototype.slice.call(arguments, 2),
    ua = tracer.findUA(arguments);
    if (ua) aArgs.ua = ua;
    return __nativeSI__(vCallback instanceof Function ? function () {
        vCallback.apply(oThis, aArgs);
    } : vCallback, nDelay);
};

var tracer = {
/*  object last modified : 14 May 2013, 04:46 CEST

    original code by http://javascriptweblog.wordpress.com/2010/06/01/a-tracer-utility-in-2kb/

    modified by rene7705@gmail.com with:
    (1) http://stackoverflow.com/a/15582432/2379929

    augmented by rene7705@gmail with (among other things):
    http://stacktracejs.com/

    this code is now used in and offered as part of the web-framework at http://fancywebapps.com
    (component name : hipLog, to be released later)
*/  

    nativeCodeEx: /\[native code\]/,
    tracing: [],
    traced : [],
    userActions : [],

    findUA : function (arg) {
        var p = arg;
        if (p.ua) return p.ua;

        var callee = arg.callee;
        var caller = callee.caller;

        var stack = [callee];

        while (caller) {
            if (stack.indexOf(caller) < 0) {
                stack.push(caller);
                args = caller.arguments;
                callee = args.callee;
                caller = callee.caller;
            } else break;
        }

        while (p = stack.shift()) {
            if (p.ua) return p.ua;
            if (p.arguments && p.arguments.ua) return p.arguments.ua;

        };
        return false;
    },

    traceMe: function(func, methodName, path) {
        var traceOn = function() {
            var 
            ua = tracer.findUA(arguments),
            startTime = +new Date;

            if (!ua){
                //debugger;
                //ua = tracer.findUA(arguments);
            };
            //if (path=='fwa.animatedJavascriptControlCenter.scanElements') debugger;

            if (!ua) {
                //debugger;
                var
                uaIdx = tracer.userActions.length,
                ua = tracer.userActions[uaIdx] = {
                    uaIdx : uaIdx,
                    startTime : startTime,
                    path : path,
                    stackLevel : 0
                };
                tracer.traced[uaIdx] = [];
            } else {
                var uaIdx = ua.uaIdx;
                ua.stackLevel++;
            }

            arguments.ua = ua;

            var idx = tracer.traced[uaIdx].length;
            tracer.traced[uaIdx][idx] = {
                path : path,
                arguments : arguments
            }; 

            var result = func.apply(this, arguments);

            tracer.traced[uaIdx][idx].stacktrace = printStackTrace() // see http://stacktracejs.com, free, quite useful
            tracer.traced[uaIdx][idx].result = result;
            tracer.traced[uaIdx][idx].timed = new Date - startTime;  
            tracer.traced[uaIdx][idx].stackLevel = ua.stackLevel;
            ua.stackLevel--;
            return result;
        };
        traceOn.traceOff = func;
        for (var prop in func) {
            traceOn[prop] = func[prop];
        }
        console.log("tracing " + path);
        return traceOn;
    },

    traceAll: function(root, path, recurse) {
        if ((root == window) || !((typeof root == 'object') || (typeof root == 'function'))) {return;}
        for (var key in root) {
            if ((root.hasOwnProperty(key)) && (root[key] != root)) {
                var thisObj = root[key];
                if (typeof thisObj == 'function') {
                    if ((this != root) && !thisObj.traceOff && !this.nativeCodeEx.test(thisObj)) {
                        root[key] = this.traceMe(root[key], key, path+'.'+key);
                        this.tracing.push({obj:root,methodName:key, path:path+'.'+key});
                    }
                }
                recurse && this.traceAll(thisObj, path+'.'+key, true);
             }
        }
    },

    untraceAll: function() {
        for (var i=0; i<this.tracing.length; ++i) {
            var thisTracing = this.tracing[i];
            thisTracing.obj[thisTracing.methodName] =
                thisTracing.obj[thisTracing.methodName].traceOff;
        }
        //console.log("tracing disabled");
        tracer.tracing = [];
    }
} 
```

像这样使用：

```
// call this just after _completely_ defining yourFrameworkRootObject and yourSiteCodeRootObject
tracer.traceAll (yourFrameworkRootObject, true);
tracer.traceAll (yourSiteCodeRootObject, true); 
```

仅供参考：此代码取自我的 js 框架[http://fancywebapps.com](http://fancywebapps.com)，将成为它的 hipLog 组件的一部分，旨在向您展示完整的执行路径（有或没有往返服务器和/或 setTimeout( )s) 的任何 userAction，如点击、悬停或页面加载。

# wordpress - 在 Wordpress 中为第 3 方资源设置到期日期

> ID：15582311
> 
> 赞同：1
> 
> 时间：2013-03-23T01:22:58.437
> 
> 标签：wordpress, .htaccess

在 WordPress 域上运行 Yslow 测试时，我收到这样的消息，它定义为一个非常重要的问题：

```
There are 3 static components without a far-future expiration date.

http://fonts.googleapis.com 
/css?family=Anonymous+Pro%3Aregular%2Citalic%2Cbold%2Cbolditalic%7C&ver=3.5.1
http://content.zemanta.com/static/zem-css/modern.css?version=1.3
http://ajax.cloudflare.com/cdn-cgi/nexp/abv=4114775854/cloudflare.min.js 
```

是否有可能做一些事情——也许用我的 .htaccess 设置一个规则——来解决这个问题，并设置一个一年左右的到期日期？或者这完全不在我的掌控之中？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-15T08:30:50.183

因此，当用户访问您的网站时，每次都会下载这些文件，因此会减慢您的页面加载速度。HTTP 标头包含一个过期日期，允许用户浏览器自动缓存这些文件，直到这些日期过期 - 用户将自动重新下载这些资源。

这可能会有所帮助：[https ://developers.google.com/speed/docs/best-practices/caching?csw=1#LeverageBrowserCaching](https://developers.google.com/speed/docs/best-practices/caching?csw=1#LeverageBrowserCaching)

此外，如果您可以使用 PHP 打开这些文件，您可以自己设置标题：

```
<?php
// seconds, minutes, hours, days
$expires = 60*60*24*14;
header("Pragma: public");
header("Cache-Control: maxage=".$expires);
header('Expires: ' . gmdate('D, d M Y H:i:s', time()+$expires) . ' GMT');
?> 
```

有关设置 PHP 标头的更多信息，请参阅[http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)。

# python - 修改代码更具体？

> ID：15582313
> 
> 赞同：0
> 
> 时间：2013-03-23T01:23:08.580
> 
> 标签：python

我的代码删除了字符串中的连续重复项。我现在要做的只是让它删除特定的重复项。例子..

```
my_func("killkiss","l")
'kilkiss'
my_func("killkiss","s")
'killkis' 
```

我的代码

```
def my_func(input,sub):
newString = ""
for char in input:
    if newString == "" or char != newString[len(newString)-1]: #I've tried adding 'and is sub'
        newString += char    
return newString 
```

有没有办法修改我的代码？我需要这种做法，所以没有来自字符串库或导入的内置插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T01:26:38.173

对于连续重复，您可以使用[`replace`](http://docs.python.org/2/library/stdtypes.html#str.replace)字符串方法：

```
def my_func(input, sub):
    result = input.replace(sub*2, sub)
    if result == input:
        return result
    return my_func(result, sub) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T01:28:44.670

我想你正在寻找：

```
if newString == "" or char != newString[len(newString)-1] or char != sub: 
```

# mongoid - 如何在 mongoid 中访问/选择特定的嵌入文档？

> ID：15582314
> 
> 赞同：0
> 
> 时间：2013-03-23T01:23:52.820
> 
> 标签：mongoid, mongoid3

有一个更好的方法吗？

```
class User
    embeds_many :groups

    def group(group_id)
        gid = Moped::BSON::ObjectId(group_id)
        self.groups.each.detect{|group| group.id == gid}
    end
end

class Group
    embedded_in :user
end 
```

我以这种方式访问​​该组：

```
User.new.group(group_id) 
```

如果用户有 1000 个嵌入组（假设），那么这是否意味着我必须遍历其中的 1000 个？有没有更好的方法来访问特定组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:08:40.657

您可以像普通模型一样查询`groups`属性。`User`例如，如果你想`Group`通过它的 id 找到一个特定的：

```
my_user.groups.find(group_id) 
```

`where`也可以查询：

```
my_user.groups.where(id: group_id).first 
```

# c# - 为什么 OrdinalIgnoreCase 和 InvariantCultureIgnoreCase 返回不同的结果？

> ID：15582315
> 
> 赞同：10
> 
> 时间：2013-03-23T01:24:19.803
> 
> 标签：c#, string-comparison

当涉及到纯英语字符串时，我想`StringComparison.OrdinalIgnoreCase`并做了同样的工作。`StringComparison.InvariantCultureIgnoreCase`但是，我正在处理的以下代码并非如此：

```
// Returns 0
string.Compare("877495169FA05B9D8639A0EBC42022338F7D2324","‎877495169fa05b9d8639a0ebc42022338f7d2324", StringComparison.InvariantCultureIgnoreCase)

// Returns -1
string.Compare("877495169FA05B9D8639A0EBC42022338F7D2324","‎877495169fa05b9d8639a0ebc42022338f7d2324", StringComparison.OrdinalIgnoreCase) 
```

有什么特别的原因吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-23T01:49:24.377

```
"‎877495169fa05b9d8639a0ebc42022338f7d2324" 
```

听起来像个技巧问题。此字符串的开头有一个额外的字符，在第一个数字 8 之前。它在浏览器中不可见。它是 U+200E，“从左到右标记”。序数比较看到那个字符，不变比较忽略它。您可以通过在字符串上使用 ToCharArray() 自己查看它。

删除该字符串并粘贴此字符串，我从中删除了 U+200E：

```
"877495169fa05b9d8639a0ebc42022338f7d2324" 
```

并且 Compare() 方法现在返回 0 就像它应该的那样。请注意您现在正在使用的文本编辑器或 IME。Unicode 不是很有趣吗？

# windows-phone-7 - 我可以在 windows phone 中使用推送通知服务向其他用户发送消息吗？

> ID：15582318
> 
> 赞同：0
> 
> 时间：2013-03-23T01:24:36.743
> 
> 标签：windows-phone-7

我可以在 windows phone 中使用推送通知服务向其他用户发送消息吗？我正在考虑使用 MPNS。原因是用户应该能够一次一对一地交换小信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T04:48:37.857

据我所知，Windows Phone 注册推送通知并接收特殊 url。如果电话 A 收到 url 并以某种方式（通过云服务或其他方式）将其传递给电话 B，则电话 B 可以使用此 url 向电话 A 发送推送通知。

# mysql - Mysql内连接多词搜索

> ID：15582319
> 
> 赞同：0
> 
> 时间：2013-03-23T01:24:48.527
> 
> 标签：mysql, inner-join

我有表结构：

*   lnks(l_id,txt,url,name) - l_id 是唯一的链接 ID
*   kws(wrd, kw_id) - 作为字典，wrd 是单词，id 是唯一的
*   kwds0..kwds21 - 单词，关系 kws.kw_id->lnks.l_id (keyword(many))->link_ids
*   我正在对“word word2”进行多词搜索。单词表预键是在代码中计算的，我将它们作为 kwds12 和 kwds13。
*   我尝试获取所有包含查询中所有单词的链接。“word1”在表 kwds12 中 “word2”在表 kwds13 中

* * *

```
SELECT
    url,
    name
FROM
    lnks  
    INNER JOIN kwds12, kwds13
        ON   
            lnks.l_id=kwds12.l_id
                AND
            lnks.l_id=kwds13.l_id
    INNER JOIN kws
        ON   
            kws.kw_id=kwds12.kw_id
                OR
            kws.kw_id=kwds13.kw_id
WHERE   
    kws.wrd='word1'
        OR
    kws.wrd='word2' 
```

* * *

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的“ON lnks.l_id=kwds12.l_id AND lnks.l_id=kwds13.l_id INNER JOIN kws ON kws.kw_id=”附近使用正确的语法

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T01:30:41.313

您的语法错误在第一个`INNER JOIN`：

```
INNER JOIN kwds12, kwds13 ... 
```

那个逗号一定不存在。如果您使用`INNER JOIN`，则需要单独连接表（不能用逗号分隔表）。

如果需要，您可以使用`where`条件替换所有联接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T01:31:30.000

这应该会更好。您需要自己加入每个表。

```
SELECT
    url,
    name
FROM
    lnks  
    INNER JOIN kwds12
        ON   
            lnks.l_id=kwds12.l_id
    INNER JOIN kwds13
        ON   
            lnks.l_id=kwds13.l_id
    INNER JOIN kws
        ON   
            kws.kw_id=kwds12.kw_id
                OR
            kws.kw_id=kwds13.kw_id
WHERE   
    kws.wrd='word1'
        OR
    kws.wrd='word2' 
```

# r - 使用 lattice 和 quantreg 绘制多个分位数回归线

> ID：15582321
> 
> 赞同：2
> 
> 时间：2013-03-23T01:25:01.107
> 
> 标签：r, plot, lattice, quantreg

我想像这样绘制几条分位数回归线（`quantreg`包）：

```
 library(quantreg)
 data(engel)
 attach(engel)
 plot(income, foodexp, cex = 0.25, type = "n",
      xlab = "Household Income", ylab = "Food Expenditure")
 points(income, foodexp, cex = 0.5, col = "blue")
 abline(rq(foodexp ~ income, tau = 0.5), col = "blue")
 abline(lm(foodexp ~ income), lty = 2, col = "red")
 taus <- c(0.05, 0.1, 0.25, 0.75, 0.9, 0.95)
 for (i in 1:length(taus)) {
   abline(rq(foodexp ~ income, tau = taus[i]),
          col = "gray")
 }
 detach(engel) 
```

但是使用`lattice`，我只尝试了一次回归但不起作用：

```
require(lattice)
xyplot(foodexp~income , data =engel, 
   type = c("g"),
   auto.key=list(x=.8,y=.35,cex=.8,cex.title=.8, title="", points=TRUE), 
   scales=list(tck=-1),ylab=list("Food Expenditure",font=3),
   xlab=list("Household Income",font=3),
   panel=function(x,y){
     panel.xyplot(x,y)
     panel.grid()
     panel.abline(rq(foodexp ~ income, tau = 0.5))}
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T09:18:10.420

使用`lattice`您应该只在面板功能中使用`y`和。`x`

![在此处输入图像描述](../Images/59031fc023f5db798e64d82b36bb65c5.png)

```
xyplot(foodexp~income , data =engel, 
       type = c("g"),
       auto.key=list(x=.8,y=.35,cex=.8,cex.title=.8, title="", points=TRUE), 
       scales=list(tck=-1),ylab=list("Food Expenditure",font=3),
       xlab=list("Household Income",font=3),
       panel=function(x,y,...){
         panel.xyplot(x,y)
         panel.grid()
         panel.abline(rq(y ~ x, tau = 0.5))
         panel.points(x, y, cex = 0.5, col = "blue")
         panel.abline(rq(y ~ x, tau = 0.5), col = "blue")
         panel.abline(lm(y ~ x), lty = 2, col = "red")
         taus <- c(0.05, 0.1, 0.25, 0.75, 0.9, 0.95)
         for (i in 1:length(taus)) {
           panel.abline(rq(y ~ x, tau = taus[i]),
                  col = "gray")
         }

       }
) 
```

# ruby-on-rails - Rails：执行在 time_zone_select 过期

> ID：15582322
> 
> 赞同：6
> 
> 时间：2013-03-23T01:25:04.217
> 
> 标签：ruby-on-rails, actionview, activesupport

间歇性出现以下异常：

```
An ActionView::Template::Error occurred

execution expired
vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require' 
```

这是完整的跟踪：

```
vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `block in require'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:236:in `load_dependency'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require'
vendor/bundle/ruby/1.9.1/gems/tzinfo-0.3.37/lib/tzinfo/timezone.rb:103:in `get'
vendor/bundle/ruby/1.9.1/gems/tzinfo-0.3.37/lib/tzinfo/timezone_proxy.rb:80:in `real_timezone'
vendor/bundle/ruby/1.9.1/gems/tzinfo-0.3.37/lib/tzinfo/timezone_proxy.rb:52:in `period_for_utc'
vendor/bundle/ruby/1.9.1/gems/tzinfo-0.3.37/lib/tzinfo/timezone.rb:458:in `current_period'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/core_ext/object/try.rb:36:in `try'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/values/time_zone.rb:212:in `utc_offset'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/values/time_zone.rb:226:in `<=>'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/values/time_zone.rb:334:in `sort'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/values/time_zone.rb:334:in `all'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_view/helpers/form_options_helper.rb:507:in `time_zone_options_for_select'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_view/helpers/form_options_helper.rb:612:in `to_time_zone_select_tag'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_view/helpers/form_options_helper.rb:277:in `time_zone_select'
vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_view/helpers/form_options_helper.rb:654:in `time_zone_select' 
```

当我导航到有问题的页面时，它加载得很好。对于大多数人来说，它似乎加载得很好，而且只是间歇性地（很少）像这样崩溃。我注意到，无论何时发生，用户代理都是机器人。最近的是`Mozilla/5.0 (compatible; Baiduspider/2.0; +http://www.baidu.com/search/spider.html)`。但我担心有一天它可能会发生在人类身上，所以我想知道是否有人知道我能对此做些什么？

## 更新

这是今天出现的，有一个用户登录（幸运的是，那个用户是我......虽然无法复制它）。

```
execution expired
vendor/bundle/ruby/1.9.1/gems/psych-1.3.4/lib/psych/visitors/visitor.rb:15:in `visit' 
```

痕迹：

```
vendor/bundle/ruby/1.9.1/gems/psych-1.3.4/lib/psych/visitors/visitor.rb:15:in `visit'
vendor/bundle/ruby/1.9.1/gems/psych-1.3.4/lib/psych/visitors/visitor.rb:5:in `accept'
vendor/bundle/ruby/1.9.1/gems/psych-1.3.4/lib/psych/visitors/emitter.rb:36:in `block in visit_Psych_Nodes_Sequence'
vendor/bundle/ruby/1.9.1/gems/psych-1.3.4/lib/psych/visitors/emitter.rb:36:in `each'
vendor/bundle/ruby/1.9.1/gems/psych-1.3.4/lib/psych/visitors/emitter.rb:36:in `visit_Psych_Nodes_Sequence'
vendor/bundle/ruby/1.9.1/gems/psych-1.3.4/lib/psych/visitors/visitor.rb:15:in `visit'
vendor/bundle/ruby/1.9.1/gems/psych-1.3.4/lib/psych/visitors/visitor.rb:5:in `accept'
vendor/bundle/ruby/1.9.1/gems/psych-1.3.4/lib/psych/visitors/emitter.rb:26:in `block in visit_Psych_Nodes_Document'
vendor/bundle/ruby/1.9.1/gems/psych-1.3.4/lib/psych/visitors/emitter.rb:26:in `each'
vendor/bundle/ruby/1.9.1/gems/psych-1.3.4/lib/psych/visitors/emitter.rb:26:in `visit_Psych_Nodes_Document'
vendor/bundle/ruby/1.9.1/gems/psych-1.3.4/lib/psych/visitors/visitor.rb:15:in `visit'
vendor/bundle/ruby/1.9.1/gems/psych-1.3.4/lib/psych/visitors/visitor.rb:5:in `accept'
vendor/bundle/ruby/1.9.1/gems/psych-1.3.4/lib/psych/visitors/emitter.rb:20:in `block in visit_Psych_Nodes_Stream'
vendor/bundle/ruby/1.9.1/gems/psych-1.3.4/lib/psych/visitors/emitter.rb:20:in `each'
vendor/bundle/ruby/1.9.1/gems/psych-1.3.4/lib/psych/visitors/emitter.rb:20:in `visit_Psych_Nodes_Stream'
vendor/bundle/ruby/1.9.1/gems/psych-1.3.4/lib/psych/visitors/visitor.rb:15:in `visit'
vendor/bundle/ruby/1.9.1/gems/psych-1.3.4/lib/psych/visitors/visitor.rb:5:in `accept'
vendor/bundle/ruby/1.9.1/gems/psych-1.3.4/lib/psych/nodes/node.rb:46:in `yaml'
vendor/bundle/ruby/1.9.1/gems/psych-1.3.4/lib/psych.rb:243:in `dump'
vendor/bundle/ruby/1.9.1/gems/psych-1.3.4/lib/psych/core_ext.rb:14:in `psych_to_yaml'
/usr/local/lib/ruby/1.9.1/syck/rubytypes.rb:110:in `to_yaml'
vendor/bundle/ruby/1.9.1/gems/dalli-delete-matched-1.1.0/lib/dalli-delete-matched.rb:13:in `write_entry'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/cache/strategy/local_cache.rb:140:in `write_entry'
vendor/bundle/ruby/1.9.1/gems/dalli-2.6.2/lib/active_support/cache/dalli_store.rb:102:in `block in write'
vendor/bundle/ruby/1.9.1/gems/dalli-2.6.2/lib/active_support/cache/dalli_store.rb:279:in `block in instrument'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/notifications.rb:125:in `instrument'
vendor/bundle/ruby/1.9.1/gems/dalli-2.6.2/lib/active_support/cache/dalli_store.rb:279:in `instrument'
vendor/bundle/ruby/1.9.1/gems/dalli-2.6.2/lib/active_support/cache/dalli_store.rb:101:in `write'
vendor/bundle/ruby/1.9.1/gems/dalli-2.6.2/lib/active_support/cache/dalli_store.rb:78:in `fetch'
app/models/concerns/roleable.rb:11:in `roles' 
```

同样，任何见解都将受到欢迎！

我在 Heroku 上托管它，并按照[https://blog.heroku.com/archives/2013/2/27/unicorn_rails上的说明使用 Unicorn](https://blog.heroku.com/archives/2013/2/27/unicorn_rails)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T13:19:30.703

由于两个堆栈跟踪完全不同，我敢冒险页面渲染通常需要很多时间，并且与特定堆栈跟踪中显示的内容无关：ActionView 将在超时发生时停止。

您应该尝试加快渲染过程，例如使用缓存：让机器人只命中从缓存提供的非动态内容以减少服务器负载。甚至将大页面拆分为部分并缓存它们可能会有所帮助。

如果您仍然遇到这种情况 - 特别是因为它非常罕见 - 您总是可以在发生此异常时自动重新呈现页面。有关一些示例代码，请参阅[此博客条目](http://geoff.evason.name/2011/01/16/rescue-from-execution-expired-in-ruby)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T02:03:54.217

回答这个问题：

> 我真的很想解决这个问题，但我真的不知道从哪里开始：/

你可以开始挽救这个错误，记录它，给你发送一封电子邮件，因为它只发生几次，所以重试（使用“重试”命令）。在此之后，您可能需要检查此 IP 执行的最后操作并查看它是否相关。日志还记录会话变量。

也许您在服务器使用率高时遇到超时 - 尝试使用一个工具lime newrelic，甚至自己记录内存使用情况、cpu 使用情况和磁盘使用情况以及其他信息。

编辑：

因为它不仅仅是一个动作，你可以像这样在 ApplicationController 上得到每个错误：

```
class ApplicationController < ActionController::Base
  rescue_from MyException, :with => :handle_my_exception

  def handle_my_exception
     grab_data
     send_mail
     retry
  end
 end 
```

我认为这是一个特定的动作，所以我不确定重试是否在这里有效。但即使您无法重试，您仍然可以通过这种方式获取更多信息并通过电子邮件发送给自己。当然你会想要添加一个重试计数器逻辑，否则你会遇到麻烦。

再次编辑：

想得更好，您可以根据请求参数使用 redirect_to 从那里模拟重试。在这个答案中，他解释了如何获得它。不要忘记也发送参数。

[如何在 Ruby on Rails 中获取当前绝对 URL？](https://stackoverflow.com/questions/2165665/how-do-i-get-the-current-url-in-ruby-on-rails)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-19T10:20:17.033

这个问题（无论如何在 Heroku 上）归结为以下代码：

```
ActiveSupport::TimeZone::MAPPING.each do |key,val|
  TZInfo::Timezone.get(val)
end 
```

所有时区信息都是从一组相当大的文件（每个时区一个）中加载的，然后进行解析。由于某种原因，此操作非常繁重。也许 Ruby 在基于文件的 IO（？）方面效率不高，而 Heroku dynos 在文件系统中遇到随机问题。

我目前的解决方法是在所有 Unicorn 工作人员 (after_fork) 中预加载时区信息（基本上运行上述代码）。现在至少问题是确定性的，而不是随机发生的......

# magento - 如何从 Magento 恢复评论 sql

> ID：15582324
> 
> 赞同：1
> 
> 时间：2013-03-23T01:25:06.403
> 
> 标签：magento

因此，我错误地从我们的 Magento 商店中删除了所有评论。有趣的是，当我登录 PhpMyAdmin 时，我仍然可以看到我所有评论所在的 review_detail 表，所以我猜它没有从数据库中删除？

现在的问题是，我如何从数据库中获取这些评论以显示在网站上？我要删除 review_detail 数据库并再次导入吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T03:33:19.943

Magento 评论是跨三个不同数据库表的存储。

该`review`表是跟踪每个评论对象并将其链接到其评论的对象（即产品）的主表。如果那里没有条目，则没有评论。

该`review_detail`表是实际包含评论信息的表。

最后，该`review_store`表跟踪哪些评论属于每个 Magento 商店实例。（存储意味着 Magento 在同一系统中“存储”对象）

我的猜测是您的删除操作通过了`review`表，而不是其他操作。如果是这种情况，您的数据（没有备份）就消失了。如果那里还有数据，那么你就会遇到一个不同的、更微妙的问题，而且我不确定这种数据恢复是不是专家可以让非专家完成的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-20T15:24:41.983

基于 Alan 和 Giri06 的答案的小脚本可恢复您消失的评论。

```
<?php
$xml = simplexml_load_file('./app/etc/local.xml', NULL, LIBXML_NOCDATA);

$db['host'] = $xml->global->resources->default_setup->connection->host;
$db['name'] = $xml->global->resources->default_setup->connection->dbname;
$db['user'] = $xml->global->resources->default_setup->connection->username;
$db['pass'] = $xml->global->resources->default_setup->connection->password;
$pref = $xml->global->resources->db->table_prefix;
mysql_connect($db['host'], $db['user'], $db['pass']) or die(mysql_error());
mysql_select_db($db['name']) or die(mysql_error());

$result = mysql_query("select `entity_pk_value`,`review_id` from `{$pref}rating_option_vote`") or die(mysql_error());
for ($i=0;$i<mysql_num_rows($result);$i++) {
    $row = mysql_fetch_array($result);
    $exists = mysql_query("select `entity_pk_value`,`review_id` from `{$pref}review` where `review_id`=".$row['review_id']) or die(mysql_error());
    if (!mysql_num_rows($exists)) {
        $query = "insert into `{$pref}review`(`entity_pk_value`,`review_id`,`entity_id`,`status_id`,`created_at`) values({$row['entity_pk_value']},{$row['review_id']},1,1,from_unixtime(unix_timestamp('2013-01-01 01:00:00')+floor(rand()*31536000)))";
        echo "Inserting {$row['review_id']}<br>";
        mysql_query($query) or die(mysql_error());
    }
} 
```

日期或评论是在 2013 年的某个地方随机生成的。

# php - 如何优化 Wordpress wp_usermeta 表？

> ID：15582325
> 
> 赞同：1
> 
> 时间：2013-03-23T01:25:07.450
> 
> 标签：php, mysql, wordpress, optimization

我正在尝试优化一个拥有大约 13,000 名用户的 Wordpress 网站。目前每个新用户向 wp_usermeta 表添加大约 20 行，因此涉及该表的查询开始变慢。我们不使用为每个用户添加的许多 meta_key，所以我想删除它们。

例子：

```
jabber
googleplus
twitter
yim 
```

我想知道这些是由 WP 核心添加的，还是来自我的插件之一。如果它们来自核心，去除它们有什么害处吗？有没有一种优雅的方法来防止生成新的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T16:28:07.730

您可以轻松删除用户字段。但请确保主题没有使用这些字段。

```
function my_user_fields( $contactmethods ) {
    //Remove user fields
    unset($contactmethods['yim']);
    unset($contactmethods['aim']);
    unset($contactmethods['jabber']);

    //Add user fields
    $contactmethods['user_gtalk'] = 'GTalk';
    $contactmethods['user_facebook'] = 'Facebook';
    $contactmethods['user_twitter'] = 'Twitter';
    $contactmethods['user_google'] = 'Google+';
    $contactmethods['user_linkedin'] = 'LinkedIn';

    return $contactmethods;
}

add_filter('user_contactmethods','my_user_fields',10,1); 
```

# macos - 使用 bash 从 URL 获取 youtube 视频时长

> ID：15582327
> 
> 赞同：0
> 
> 时间：2013-03-23T01:25:30.167
> 
> 标签：macos, curl, youtube

如何使用*bash*从其 URL 获取 youtube 视频持续时间？最好使用*curl*，而不必弄乱身份验证和 API 密钥。

如果可能的话，我想知道细节（即我认为结果是在 json 中给出的，所以也许是一种只从中获取持续时间的方法），但获取持续时间是主要问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T01:32:35.600

好吧，如果您不想使用 API 并且想使用 curl，那么这里有一个超级丑陋的答案来匹配 :)

```
Marks-MacBook-Air:~ mstanislav$ curl -s http://www.youtube.com/watch?v=dQw4w9WgXcQ |grep '<meta itemprop="duration"'
<meta itemprop="duration" content="PT3M33S"> 
```

PT3M33S 表示 3 分 33 秒，也就是持续时间。只需从那里处理数据（通过 shell 脚本或您正在使用 curl 的其他方式）。做个善良的选民，按要求回答问题；）

为了一切顺利，这里将 curl 与 API 一起使用，除非您正在上传或写入数据，否则不需要开发人员密钥。

```
curl -s 'http://gdata.youtube.com/feeds/api/videos/dQw4w9WgXcQ?v=2&alt=jsonc' 
```

# java - IllegalArgumentException：没有枚举常量类 Functions.size

> ID：15582331
> 
> 赞同：2
> 
> 时间：2013-03-23T01:25:40.547
> 
> 标签：java, enums, processing, illegalargumentexception

给定以下代码：

```
enum Functions
{
  background,clear,colorMode,fill,noFill,noStroke,stroke,applyMatrix,popMatrix,
  printMatrix,pushMatrix,resetMatrix,rotate,rotateX,rotateY,rotateZ,scale,shearX,shearY,
  translate,ellipseMode,smooth,noSmooth,rectMode,strokeCap,strokeJoin,strokeWeight,arc,ellipse,
  line,point,quad,rect,triangle,size,frameRate;
}

switch(Functions.valueOf(f))
{  
   case background:
     //background()
     background(random(255),random(255),random(255));
     break;
   case clear:
     //clear()
     break;
   case colorMode:
     //colorMode()
     break;
   case fill:
     //fill()
     fill(random(255),random(255),random(255));
     break;
   case size:
     //size()
     break;
   .....
} 
```

这在大多数情况下运行良好，并且没有其他 Enum const 抛出此错误：

```
IllegalArgumentException: No enum const class Functions.size 
```

但是由于某种原因，Functions.size 有时会导致抛出这个错误。有谁知道为什么这可能会间歇性发生？

# objective-c - CoreLocation 无法编译 - 与另一个工作项目相同的设置

> ID：15582333
> 
> 赞同：0
> 
> 时间：2013-03-23T01:26:16.343
> 
> 标签：objective-c, mapkit, core-location

由于这一行，CoreLocation 无法编译

```
LocationAnnotation *annotation = [[LocationAnnotation alloc] initWithTitle:@"Point to home?" andCoordinate:newLocation.coordinate andSubtitle:nil]; 
```

我已经尝试了所有方法，现在对重新链接 coreLoction 感到厌烦

如果我注释掉那一行 CoreLocation 编译得很好。

我在构建阶段包含了 corelocation 和 mapkit，我没有框架搜索路径

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_LocationAnnotation", referenced from:
      objc-class-ref in JobMapVC.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我在另一个项目中使用了这段代码，它编译得很好，我错过了什么？

主控制器

JobMapVC.h

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>
#import <CoreLocation/CoreLocation.h>

#import "LocationAnnotation.h"

@interface JobMapVC : UIViewController <MKMapViewDelegate, CLLocationManagerDelegate>
{
    NSString *address;

@private
    CLLocationManager *locationManager;
}

@property (nonatomic, strong) NSString *address;
@property (nonatomic, retain) CLLocationManager *locationManager;
@property (nonatomic, assign, readwrite) double homeLatitude;
@property (nonatomic, assign, readwrite) double homeLongitude;

@property (weak, nonatomic) IBOutlet MKMapView *mapView;

- (IBAction)dismissMap:(id)sender;

@end 
```

JobMapVC.m

```
#import "JobMapVC.h"
#import "LocationAnnotation.h"

@interface JobMapVC ()

@end

@implementation JobMapVC
{
}

@synthesize address = _address;
@synthesize locationManager = _locationManager;

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self searchCoordinatesForAddress:_address];
}

- (void) searchCoordinatesForAddress:(NSString *)inAddress{

    NSString *cleanAddress = [[inAddress componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]] componentsJoinedByString:@" "];

    NSMutableString *urlString = [NSMutableString stringWithFormat:@"http://maps.googleapis.com/maps/api/geocode/json?sensor=true&address=%@",cleanAddress];

    [urlString setString:[urlString stringByReplacingOccurrencesOfString:@" " withString:@"+"]];

    NSURL *url = [NSURL URLWithString:urlString];
    NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url];
    NSError* error;
    NSURLResponse *response;
    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

    NSDictionary* georesults = [NSJSONSerialization
                                JSONObjectWithData:returnData
                                options:NSJSONReadingMutableContainers | NSJSONReadingAllowFragments
                                error:&error];

    if ( [[georesults objectForKey:@"status"] isEqualToString:@"OK"] )
    {

        double latitude  = [[[[[[georesults objectForKey:@"results"]objectAtIndex:0] objectForKey:@"geometry"]objectForKey:@"location"]objectForKey:@"lat"] doubleValue];
        double longitude = [[[[[[georesults objectForKey:@"results"]objectAtIndex:0] objectForKey:@"geometry"]objectForKey:@"location"]objectForKey:@"lng"] doubleValue];
        NSLog(@"lat:%f", latitude );

        [self zoomMapAndCenterAtLatitude:latitude andLongitude:longitude];

    }
}

- (void) zoomMapAndCenterAtLatitude:(double)latitude andLongitude:(double)longitude
{
    MKCoordinateRegion region;
    region.center.latitude  = latitude;
    region.center.longitude = longitude;

    //Set Zoom level using Span
    MKCoordinateSpan span;
    span.latitudeDelta  = .005;
    span.longitudeDelta = .005;
    region.span = span;

    //Move the map and zoom
    [_mapView setRegion:region animated:YES];

    // Map pin

    CLLocation *newLocation = [[CLLocation alloc] initWithLatitude:latitude longitude:longitude];

    // THIS LINE STOP coreLocation from compiling !!!
    LocationAnnotation *annotation = [[LocationAnnotation alloc] initWithTitle:@"Point to home?" andCoordinate:newLocation.coordinate andSubtitle:nil];

    [self.mapView addAnnotation:annotation];
    [self.mapView selectAnnotation:annotation animated:YES];

}

- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error {
    NSLog(@"locationManager:%@ didFailWithError:%@", manager, error);

    if (error.code == kCLErrorDenied)
    {
        UIAlertView *alert = [[UIAlertView alloc]
                              initWithTitle:@"Error!"
                              message:@"This can not work without location services enabled"
                              delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
    }
}

- (IBAction)dismissMap:(id)sender
{
    [self dismissModalViewControllerAnimated:YES];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

@end 
```

我在另一个项目中完全使用的 LocationAnnotation 文件没有任何问题

LocationAnnotation.h

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface LocationAnnotation : NSObject <MKAnnotation> {
}
@property (strong) NSString *title;
@property (strong) NSString *subtitle;

- (id)initWithTitle:(NSString *)ttl andCoordinate:(CLLocationCoordinate2D)c2d andSubtitle:(NSString *)sbttl;

@end 
```

LocationAnnotation.m

```
#import "LocationAnnotation.h"

@implementation LocationAnnotation

@synthesize title, subtitle, coordinate;

- (id)initWithTitle:(NSString *)ttl andCoordinate:(CLLocationCoordinate2D)c2d andSubtitle:(NSString *)sbttl {
    if ((self = [super init])) {
        title = ttl;
        subtitle = sbttl;
        coordinate = c2d;
    }
    return self;
}

@end 
```

奇怪的是 - (id)initWithTitle 行不会正确地为语法着色。此代码适用于一个项目，但不适用于另一个项目......？？！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T05:21:56.463

您的代码编译，它是报告问题的链接器。链接器找不到您的`LocationAnnotation`类，因为它可能没有被编译。`LocationAnnotation.m`在 Xcode 和*File Inspector*中选择（在右侧托盘中）并确保该文件是您的目标的成员：

![选择目标成员](../Images/297c44ee557d84658df37feafd9bd58a.png)

# c++ - 无法返回头文件中声明的结构向量

> ID：15582335
> 
> 赞同：2
> 
> 时间：2013-03-23T01:26:18.983
> 
> 标签：c++, struct, header-files

我希望我的 getFeatures 函数返回一个结构向量。我在头文件中声明的结构，但是当在我的 .cpp 文件中我尝试编写我的函数名时，我得到一个使用未声明的标识符错误。标识符已声明，我可以在其他函数中使用它。此外，当我编写返回语句时，我得到向量类型到 int 错误的不可行转换。在我的头文件中，我有函数原型，它指出我的函数应该返回我的结构类型的向量，而不是 int 类型的向量。到底是怎么回事？

```
#include "Feature_Builder.h"

Feature_Builder::Feature_Builder()
{
    int input;
    vector<int> intImageVals, temp;

    fstream file;

    file.open("Integral_Images.txt", ios::in);

    if (file.fail())
    {
        cerr << "File not open!\n";
        exit(EXIT_FAILURE);
    }

    for (int i=0; i<12876; i++)
    {
        file >> input;
        while (input != -1)
        {
            intImageVals.push_back(input);

            file >> input;
        }

        buildFeatureOne(intImageVals);
        buildFeatureTwo(intImageVals);
        buildFeatureThree(intImageVals);
        buildFeatureFour(intImageVals);

        featureIndex = 0;
        intImageVals.clear();
    }
}

/*****************************************************************************
 This is the function with errors! XCode says featureValues is an undeclared
 identifier and that features should be of type int!
 *****************************************************************************/
vector<featureValues> Feature_Builder::getFeatures()
{
    return features;
} 
```

还有我的头文件

```
#ifndef Facial_Learner_Feature_Builder_h
#define Facial_Learner_Feature_Builder_h

#include <iostream>
#include <fstream>
#include <vector>

using namespace std;

class Feature_Builder
{
private:
    void buildFeatureOne(vector<int>);
    void buildFeatureTwo(vector<int>);
    void buildFeatureThree(vector<int>);
    void buildFeatureFour(vector<int>);

    struct featureValues
    {
    private:
        vector<int> vals;

    public:
        inline void pushValue(int value)
        {vals.push_back(value);}

        inline int getValue(int i)
        {return vals[i];}
    };

    int featureIndex;
    vector<featureValues> features;

public:
    Feature_Builder();
    vector<featureValues> getFeatures();
};

#endif 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T01:28:12.477

您需要正确的内部结构范围：

```
vector<Feature_Builder::featureValues> Feature_Builder::getFeatures() { ... } 
```

# android - 为什么在我的 Android 应用程序中重复输入按键（一到两次额外的时间）？

> ID：15582339
> 
> 赞同：0
> 
> 时间：2013-03-23T01:26:36.553
> 
> 标签：android, iobluetooth

当我输入我正在开发的应用程序时，偶尔会有重复的输入字符（我没有输入），包括“输入”键会重复（因此我的命令会额外发送一到两次）。输入总是只重复一次或两次，很少重复三次。有时可能需要 500-750 毫秒才能重复，但有时速度要快得多。

我正在为我的平板电脑制作一个 Android 应用程序。我现在几乎重写了应用程序的每个部分，试图找出导致错误的原因。我有一个我输入的 EditText 子类。最初我是在 EditText 的子类中实现 OnKeyListener 接口。我目前正在覆盖 Activity 本身中的“dispatchKeyEvent”来处理关键事件。我这样做是为了当用户按下 Enter 键时，例如，它会发送命令，然后调用输入的“selectAll()”以准备用户键入另一个命令。无论是在自定义的 EditText 小部件中实现 OnKeyListener 接口，还是在 Activity 中覆盖“dispatchKeyEvent”，我都遇到了同样的错误。

我正在使用应用程序中的位图，每次垃圾收集后堆大约 90% 已满，这种情况经常发生。我不知道问题是否与内存有关 - 似乎不太可能，因为如果需要更多空间，堆只会增长。

当我使用该应用程序时，我会输入蓝牙键盘。也许蓝牙驱动程序可能会引入一些问题，但这个错误很少发生在其他应用程序中（我想我发现它只在 Chrome 中发生过几次）。它发生在大约 1% 的进入我的应用程序的击键上（这很常见，因为使用这个应用程序就是打字）。

每次我在应用程序中使用 alt-tab 键检查 LogCat 时，都会收到一些 IInputConnectionWrapper 警告。它显示“beginBatchEdit on inactive InputConnection”以及其他 2 条类似消息。我认为这些警告与问题无关，但我不确定。

任何人都有预感可能导致此错误的原因是什么？或者任何人都知道如何隔离错误并找出它的来源？我尝试下载一些蓝牙键盘“助手”应用程序，但没有任何改变。我尝试在清单中为我的应用程序标签设置'android:largeHeap="true"'，这不会导致堆变大（使用 minSdk 8 和 targetSdk 11）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T16:30:46.373

问题出在蓝牙键盘本身。它适用于 Mac，而不是 Android。我有一个新键盘，问题解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T02:45:57.233

您不必覆盖`dispatchKeyEvent`或任何处理在`EditText`. 相反，正确设置[android:imeOptions](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3aimeOptions)操作（例如`actionSend`键盘上的“发送”按钮），然后将您注册`Activity`为[OnEditorActionListener](http://developer.android.com/reference/android/widget/TextView.html#setOnEditorActionListener%28android.widget.TextView.OnEditorActionListener%29)，只要用户单击操作按钮或在`EditText`.

# ruby - Rspec 错误：没有路由匹配 {:controller=>"user"}

> ID：15582342
> 
> 赞同：1
> 
> 时间：2013-03-23T01:26:49.067
> 
> 标签：ruby, testing, rspec

为什么我会得到那个/我怎样才能绕过它？

代码是：

```
class UserController < ApplicationController
  def index
    @users=User.all
  end
end 
```

规格是：

```
require 'spec_helper'

describe UserController do

  describe "GET index" do
    it "assigns @users" do
      user = User.create(:email => 'bob@test.com', :password=>'12', :password_confirmation=> '12')
      get :index
      assigns(:users).should eq([user])
    end 

    it "renders the index template" do
      get :index
      response.should render_template("index")
    end 
  end 

end

Failures:

  1) UserController GET index assigns @users
     Failure/Error: get :index
     ActionController::RoutingError:
       No route matches {:controller=>"user"}
     # ./spec/controllers/user_controller_spec.rb:8:in `block (3 levels) in <top (required)>'

  2) UserController GET index renders the index template
     Failure/Error: get :index
     ActionController::RoutingError:
       No route matches {:controller=>"user"}
     # ./spec/controllers/user_controller_spec.rb:13:in `block (3 levels) in <top (required)>'

Finished in 0.13146 seconds
2 examples, 2 failures 
```

路线是：

```
TimeTracker::Application.routes.draw do
  devise_for :users

  resources :users

  root :to => 'users#index'

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T01:30:39.330

您的控制器类名称是单数（`UserController`），它应该是`UsersController`

# php - 为什么我的 MySQL 数据没有显示在我的 PHP 代码中？

> ID：15582348
> 
> 赞同：1
> 
> 时间：2013-03-23T01:27:52.450
> 
> 标签：php, mysql

我一直在进行 mySQL 搜索，然后在我的 PHP 代码中相应地显示信息以将其显示到我的网站中，但是我尝试这样做，所以我没有显示任何结果。在代码工作之前，当我只使用一个表时，但在执行连接时它不起作用。我觉得我不再正确地这样做了，并且已经寻找答案但没有沮丧。这是工作中的整个 MySQL 和 PHP 代码，以及我同时使用 ini_set('display_errors','On') 和 ini_set('error_reporting',E_ALL); 时遇到的错误。

```
$result = mysqli_query($connection, "SELECT 
    projects.ProjectName, 
    projects.ProjectLogo, 
    projects.ProjectLink, 
    projects.ProjectDescription, 
    entries.EntryNum, 
    entries.Votes, 
    entries.Views, 
    entries.Update 
FROM    projects 
        INNER JOIN entries 
            ON  projects.ProjectID = entries.ProjectID 
        INNER JOIN  
        (
            SELECT  a.ProjectID, MAX(a.Update) max_val
            FROM    entries a
            GROUP   BY a.ProjectID
        ) b ON  b.ProjectID = entries.ProjectID AND
                b.max_val = entries.Update
WHERE   projects.Media = 'image' AND 
        projects.Type = 'fan-art' 
ORDER   BY entries.Update DESC");

while($row = mysqli_fetch_array($result)) {
    echo "
        <a href=\"" . $row['projects.ProjectLink'] . "\" >
         <div onMouseOver=\"description('" . $row['projects.ProjectName'] .  "', '" . $row['projects.ProjectDescription'] .  "', '" . (int)$row['entries.EntryNum'] .  "', '" . (int)$row['entries.Votes'] .  "', '" . $row['entries.Update'] .  "', '" . "')\" style=\"width: 140px; height: 130px; float: left; margin: 0px 5px 5px 0px;\">
          <img src=\"../" . $row['projects.ProjectLogo'] . "\" style=\"margin: 0px 5px 0px 5px;\" />
         </div>
        </a>
    ";
} 
```

错误之一是

注意：未定义索引：第 43 行 /home/a3027546/public_html/images/fanart.php 中的 projects.ProjectLink

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T01:42:24.580

我不相信数组名称中可以有`.`（点）（或者可能只是被获取的数组不包含`table.`前缀）并导致代码错误：

```
while($row = mysqli_fetch_array($result)) {
    echo $row['projects.ProjectLink'] ...
    $row['projects.ProjectName'] ...
    $row['projects.ProjectDescription'] ...
    (int)$row['entries.EntryNum'] ...
    (int)$row['entries.Votes'] ...
     $row['entries.Update'] ...
    $row['projects.ProjectLogo']
} 
```

应该：

```
while($row = mysqli_fetch_array($result)) {
    echo $row['ProjectLink'] ...
    $row['ProjectName'] ...
    $row['ProjectDescription'] ...
    (int)$row['EntryNum'] ...
    (int)$row['Votes'] ...
     $row['Update'] ...
    $row['ProjectLogo']
} 
```

如果这不起作用`projects.ProjectLink AS 'ProjectLink'`，请为您选择的每个项目添加类似的内容并使用上述解决方案。

# jquery - 修改此函数以按数据属性而不是按类显示/隐藏

> ID：15582349
> 
> 赞同：2
> 
> 时间：2013-03-23T01:27:58.763
> 
> 标签：jquery, show-hide, custom-data-attribute

我想通过数据属性而不是类来使用这个显示/隐藏函数，但是我很难正确地使用语法。

我知道它是这样的，`$("li[data-color=" + this.value + "]").show();`但我无法让它工作和/或修改函数以使其工作。

我正在使用该功能按各种属性（即颜色、产品类别、场合等）过滤服装，我在这里发布了一个简单的例子：http: [//jsfiddle.net/chayacooper/WZpMh /4/](http://jsfiddle.net/chayacooper/WZpMh/4/)

```
$('#filterOptions li a').click(function () {
    var ourClass = $(this).attr('class');
    $('#filterOptions li').removeClass('active');
    $(this).parent().addClass('active');
    if (ourClass == 'all') {
        $('#content').find('.item').show();
    } else {
        $('#content').find('.item:not(.' + ourClass + ')').hide();
        $('#content').find('.item.' + ourClass).show();
    }
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T01:38:23.360

请参阅此小提琴以获取工作示例：http: [//jsfiddle.net/Cr2cY/](http://jsfiddle.net/Cr2cY/)

```
$(document).ready(function () {
    $('#filterOptions li a').click(function () {
        // fetch the class of the clicked item
        var ourDataAttr = $(this).data('color');
        // reset the active class on all the buttons
        $('#filterOptions li').removeClass('active');
        // update the active state on our clicked button
        $(this).parent().addClass('active');
        if (ourDataAttr == 'All') {
            // show all our items
            $('#content').find('.item').show();
        } else {
            // hide all elements that don't share ourClass
            $('#content').find('.item:not([data-color="' + ourDataAttr + '"])').hide();
            // show all elements that do share ourClass
            $('#content').find('.item[data-color="' + ourDataAttr + '"]').show();
        }
        return false;
    });
}); 
```

请注意，您在小提琴中将 'all' 与 'All' 进行比较，这将不匹配。

# ios - 使用 CABasicAnimation 动画帧属性

> ID：15582354
> 
> 赞同：9
> 
> 时间：2013-03-23T01:28:27.157
> 
> 标签：ios, objective-c, core-animation

我正在尝试对这个基于*UIView*块的动画代码进行精确的“翻译”：

```
[UIView animateWithDuration:0.5
                      delay:0.0
                    options:UIViewAnimationOptionCurveEaseInOut
                 animations:^{
                               someView.frame = CGRect(0, 100, 200, 200);
                             }
                 completion:nil]; 
```

改用*CABasicAnimation*。

我完全知道 frame 属性实际上是底层的*position*、*bounds*和*anchorPoint的组合，如下所述：http:* [//developer.apple.com/library/mac/#qa/qa1620/_index .html](http://developer.apple.com/library/mac/#qa/qa1620/_index.html)
...我已经做了一个这样的解决方案，使用两个*CABasicAnimations*一个设置*位置*，一个设置*边界*，它适用于那个视图。

然而，问题是我的视图中有子视图。someView 有一个*UIScrollView*类型的子视图，我在其中放置了另一个*UIImageView*类型的子视图。*UIScrollView*子视图将*autoresizingMask*设置为*UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight*。*如果我使用基于块的UIView*版本，这一切都可以完美运行，但是当我尝试使用*CABasicAnimations*时，子视图开始出现意外行为（即调整为不正确的宽度）。因此，使用*CABasicAnimations时似乎**autoresizingMask*无法正常工作。我还注意到子视图没有接到电话**setFrame:*，尽管在更改层位置和边界后，父视图的 frame 属性确实发生了变化。*

 *这就是为什么我想知道使用*CABasicAnimation*复制的正确代码是什么，即使用 UIView 的*animateWithDuration*方法时会发生什么。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-23T01:44:03.960

> 我完全知道框架属性实际上是底层的位置、边界和锚点的组合

很好，但同样重要的是要知道这`frame`不是图层的动画属性。如果您想使用 CABasicAnimation 进行动画处理，您必须使用可对图层进行动画处理的属性。CALayer 文档将每个此类属性都标记为明确的“动画”。使用`bounds`and的想法`position`是正确的。

因此，这段代码基本上完成了您之前所做的事情：

```
[CATransaction setDisableActions:YES];
// set final bounds and position
v.layer.bounds = CGRectMake(0,0,200,200);
v.layer.position = CGPointMake(100,200);

// cause those changes to be animated
CABasicAnimation* a1 = [CABasicAnimation animationWithKeyPath:@"bounds"];
a1.duration = 0.5;
CABasicAnimation* a2 = [CABasicAnimation animationWithKeyPath:@"position"];
a2.duration = 0.5;
[v.layer addAnimation:a1 forKey:nil];
[v.layer addAnimation:a2 forKey:nil]; 
```

但是，该代码对`v.layer`. （ 的子视图`v`由 的子层绘制`v.layer`。）不幸的是，这就是您要解决的问题。我相信通过下降到图层级别并直接显式核心动画，您已经放弃了自动调整大小，这发生在视图级别。因此，您还需要为子图层设置动画。这就是视图动画为您所做的。

这是 iOS 的一个不幸的功能。Mac OS X 具有层约束 (CAConstraint)，它在层级别执行自动调整大小在视图级别（以及更多）所做的工作。但 iOS 缺少该功能。*

# sublimetext2 - 如何批量删除 floatval(*)

> ID：15582372
> 
> 赞同：0
> 
> 时间：2013-03-23T01:30:48.870
> 
> 标签：sublimetext2, text-editor, sublimetext

我有一个很重的 php 文件，其中包含大量变量，如下所示：

```
floatval($string) 
```

`$string`总是一个不同的字符串，但我想删除所有这些浮点数。有什么简单的去除方法`floatval($anything)`？

如果重要，我会使用 Sublime。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T01:57:49.557

使用搜索和替换 ( `ctrl + H`)。此外，选择“正则表达式”选项。然后搜索`floatval\(\$[a-zA-Z]*\)`并替换为空。

![升华](../Images/a80cf1539134224c21468976cab33560.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T02:00:15.973

您想使用正则表达式来搜索该模式并进行替换，如该[问题](https://stackoverflow.com/questions/10841060/how-to-use-regex-to-replace-stuff-in-sublime)的答案中所述。匹配的表达式类似于：

```
floatval\(\$([a-zA-Z_][a-zA-Z0-9_]+)\) 
```

和替换一个：

```
 \$\1 
```

# web-applications - 从单页应用程序调用 WebAPI 端点的最佳实践

> ID：15582374
> 
> 赞同：1
> 
> 时间：2013-03-23T01:30:55.120
> 
> 标签：web-applications, asp.net-mvc-4, knockout.js, single-page-application

我已经构建了我的 webApi，现在我正在将前端与淘汰赛放在一起。这可能是一个愚蠢的问题，但我有点新手，想确保我的想法是正确的。

假设您有一个 todoList，其中包含列表中的项目。您让用户将一个项目添加到列表中 - 模型将其更新为 javascript viewModel 中的“itemToAdd”数组。当用户单击“保存”时，项目数组会立即在客户端更新。这是否适合调用 PUT /api/item ？如果是这样，如果 PUT 失败，“行为标准”是什么？将该项目从 todolist viewModel 中取出并显示错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T02:10:13.810

取决于您希望用户体验如何。

当他们单击保存按钮时，您可以不将新项目添加到客户端的列表中。但是显示一个微调器并让用户知道您正在尝试保存。服务器返回的任何错误消息都可以显示给用户。如果保存成功，则将它们添加到列表中。

或者您可以在单击保存按钮后立即将它们添加到列表中，并让用户知道显示的内容尚未保存，他们需要将更改同步回服务器。然后在他们选择时将所有更改发送到服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T02:07:13.807

这取决于。

您可以使用任何一种方式，先保存然后显示，或者反过来（如果失败则撤消）。

但我认为先保存更简单，因为如果失败了你不必考虑撤消它。

看看大本营，看看他们是如何做到的。如果这对您有用，请以相同的方式进行。

# jquery - 点击链接后如何防止重新加载？

> ID：15582382
> 
> 赞同：0
> 
> 时间：2013-03-23T01:32:10.160
> 
> 标签：jquery, ajax, random, blogger, reloading

我正在使用脚本在我的博客 ( [https://github.com/swook/jquery-ajaxify-plugin](https://github.com/swook/jquery-ajaxify-plugin) ) 上使用 AJAX，因此用户可以在浏览不同页面时通过音乐播放器收听音乐而不会中断。

除随机按钮外，一切正常。我想对随机按钮进行 AJAX 化。

问题是当我点击链接时，页面会重新加载。

你可以在这里检查问题：[http ://www.julienlussiez.com/p/test_20.html](http://www.julienlussiez.com/p/test_20.html)

这是脚本：

```
<script>
<!--
/*
Random link button- By JavaScript Kit (http://javascriptkit.com)
Over 300+ free scripts!
This credit MUST stay intact for use
*/

//specify random links below. You can have as many as you want

var randomlinks=new Array()

randomlinks[0]="http://www.julienlussiez.com/2013/01/le-repos-du-fou_21.html"
randomlinks[1]="http://www.julienlussiez.com/2012/11/dissonance-3.html"
randomlinks[2]="http://www.julienlussiez.com/2012/10/renaitre.html"
randomlinks[3]="http://www.julienlussiez.com/2013/01/defaillance.html"
randomlinks[4]="http://www.julienlussiez.com/2012/08/fragile-2012.html"

function randomlink(){
window.location=randomlinks[Math.floor(Math.random()*randomlinks.length)]
}

//-->
</script>
<form>
<p><input type="button" name="B1" value="Aléatoire" onclick="randomlink(); return false;" /></p> </form> 
```

谢谢！如果你有一些线索，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T01:48:40.537

例如，当您使用`window.location="http://www.google.com/"`时，它会将当前正在查看的网页更改为 Google 的主页。您需要将内容加载到 iFrame 或通过 AJAX 以阻止页面重新加载。您还可以考虑为您的音乐提供弹出式播放器，并且每当您的用户切换页面时，音乐将继续播放。

根据 Ajaxify 的文档，要通过 AJAX 加载页面，您需要调用此函数：

```
$.Ajaxify.loadURL('/path/to/page.html'); 
```

尝试用示例代码中的代码替换`window.location`代码`$.Ajaxify.loadURL('/path/to/page.html');`，看看是否有所不同。

像这样的东西：

```
function randomlink(){
$.Ajaxify.loadURL(randomlinks[Math.floor(Math.random()*randomlinks.length)]);
} 
```

# css - 为什么不鼓励使用 `!important`？

> ID：15582385
> 
> 赞同：3
> 
> 时间：2013-03-23T01:32:23.650
> 
> 标签：标记为css, css, css-specificity

[标记为css](/questions/tagged/css "显示标记为“css”的问题")的几个答案不鼓励使用，`!important`以支持特异性。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T01:32:23.650

您可以使用实际数学来预测、控制和逆向工程 CSS 规则的影响。通过使用`!important`你打破了这一点。例如，看看[这个 JS fiddle](http://jsfiddle.net/hXPk7/)，它不使用`!important`：http: [//jsfiddle.net/hXPk7/](http://jsfiddle.net/hXPk7/)

如果您使用 Firebug 或 Chrome 开发工具检查显示“Richard”的标题元素，您应该会看到这些规则，顺序如下：

```
/**************************/
/* /hXPk7/show/ (line 20) */
/**************************/
#myExample #title .name {
    color: yellow;
}

/********************************************************/
/* /hXPk7/show/ (line 14) - Inherited fromdiv#myExample */
/********************************************************/
#myExample {
    color: blue;
} 
```

请注意，这不是它们在 CSS 样式表中出现的顺序 - 相反，它们是按其特性的降序排列的。首先列出优先的那些，而其他的（其规则被更具体的规则覆盖）可能有一个属性被划掉。这表明特异性使得跟踪（调试？）元素从何处获取其 CSS 属性变得容易。

现在，与[这个 JS fiddle](http://jsfiddle.net/hXPk7/1/)进行比较- 实际上是相同的，但有一个现在使用的新规则：http `!important`: [//jsfiddle.net/hXPk7/1/](http://jsfiddle.net/hXPk7/1/)

使用 Firebug 或 Chrome 开发工具检查相同的元素，您会看到如下内容：

```
/**************************/
/* /hXPk7/1/show/ (line 20) */
/**************************/
#myExample #title .name {
    color: yellow;
}

/**************************/
/* /hXPk7/1/show/ (line 26) */
/**************************/
span {
    color: black !important;
}

/********************************************************/
/* /hXPk7/1/show/ (line 14) - Inherited fromdiv#myExample */
/********************************************************/
#myExample {
    color: blue;
} 
```

同样，规则是根据它们的特殊性排序的——但请注意，这一次，虽然首先列出的最具体的规则指定了 a `color`of `yellow`，但浏览器将文本呈现为黑色！这是因为该`!important`声明打破了特异性的正常行为，以一种难以追踪的方式优先。想象一个更现实的网站，可能有数百条规则，而控制规则的规则`color`并不明显要查找或更改。

现在，也许这是开发人员工具的一个问题，但我认为它反映了一个事实，即`!important`采用通常易于预测的优先系统并使其更具挑战性。也许有时会使用它，但它不应该是您编写 CSS 时使用的第一个工具。

# android-activity - 如何通过图形 api 获取应用程序中的朋友创建的所有打开图形操作的列表

> ID：15582390
> 
> 赞同：1
> 
> 时间：2013-03-23T01:32:38.020
> 
> 标签：android-activity, facebook-opengraph

我正在构建一个创建开放图形操作的画布应用程序。在左侧边栏中，我想显示以下内容：

**我的行动**

*   行动 ME.3
*   行动 ME.2
*   行动 ME.1

**朋友的行动**

*   动作 F1.2
*   行动 F2.1
*   动作 F1.2
*   行动 F3.1

第一部分很简单（了解我的行动）

```
FB.api(
   /me/ACTION?limit=10,
   get,
   ... 
```

获取第二部分（朋友的动作）并不是那么简单

第一，获取应用用户的好友（FQL查询是唯一有效的方式），第二，遍历好友并获取动作

```
FB.api(
    {    
     method:'fql.query',
     query: 'SELECT uid,username, is_app_user FROM user WHERE uid IN(SELECT uid2 FROM friend WHERE uid1 = me()) AND is_app_user=1'
    },
    function(friends) {
        if (friends && friends.length) {
           for (var i = 0; i < friends.length; i++) {
               FB.api(
                    '/'+ friends[i].uid + '/ACTION?limit=10',
                    'get',
                     ... 
```

而且由于您分别从每个朋友查询中获取数据

```
Add each action to an array, sort by date (newest first) and return the first 10 
```

真的没有别的办法了吗？什么都不像

```
/me/friends/ACTION?limit=10 
```

或者可能是针对未记录的 app_actions 表的 FQL 查询？

# web-services - 当我在 Godaddy.com（或任何其他...如 hostgator...）上购买域名时，谁会得到钱？

> ID：15582393
> 
> 赞同：0
> 
> 时间：2013-03-23T01:32:47.363
> 
> 标签：web-services, hosting

当我在 Godaddy.com 购买域名时，谁会得到钱？有没有可以注册域名的.gov网站？我知道 Godaddy 是一家私人公司，为什么他们拥有所有的域名？如果我使用家用计算机托管自己的网站，那么我必须能够在某些美国政府网站上注册域。

**什么套路？？？**

我拥有 IT 硕士学位，这是困扰我一段时间的问题。我的教授无法给我一个有意义的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T01:36:16.847

所有网页都在 icann 注册，价格各不相同，您的私人企业为您处理文书工作。

# java - 如何强制 Mockito 在 JUnit 测试中抛出 RemoteException

> ID：15582395
> 
> 赞同：2
> 
> 时间：2013-03-23T01:33:49.890
> 
> 标签：java, junit, mockito, remoteexception

这是我想强制抛出远程异常的代码：

```
transient Bicycle b=null;

public Bicycle getBicycle() {
    if(b==null) {
        try {
            b=new Bicycle(this);
        } catch (RemoteException ex) {
            Logger.getLogger(Bicycle()).log(Level.SEVERE, null, ex);
        }
    }
    return b;
} 
```

这是我使用 Mockito 运行的 JUnit 测试：

```
boolean exceptionThrown=false;
Bicycle mockB = mock(Bicycle);
mockB.setBicycle(null);
stub(mockB.getBicycle()).toThrow(new RemoteException(){boolean exceptionThrown = true;});

assertTrue(exceptionThrown); 
```

我不断收到以下错误：

```
Checked exception is invalid for this method! 
```

任何帮助将不胜感激。

编辑：

代替

```
stub(mockB.getBicycle()).toThrow(new RemoteException(){boolean exceptionThrown = true;}); 
```

我也试过

```
doThrow(new RemoteException(){boolean exceptionThrown = true;}).when(mockB).getBicycle(); 
```

和

```
Mockito.when(mockB.getBicycle()).thenThrow(new RemoteException(){boolean exceptionThrown=true;}); 
```

仍然没有运气。

Edit2 - 在完全理解 API 并正确使用之后更进一步：

```
when(mockB.getBicycle()).thenThrow(new RuntimeException()); 
```

我现在不知道如何断言。一旦调用异常，我尝试放置一个布尔值，但断言看不到布尔值。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T04:43:16.637

getBicycle() 方法永远不会返回 RuntimeException。代码本身正在捕获 RuntimeException，并在捕获时写入记录器。该方法本身将返回 Bicycle 或 null。

您将需要重新考虑您希望 getBicycle 方法如何运行。如果您希望 RuntimeException 冒泡，它可以重新抛出 RuntimeException atfer logging。但是，根据它的编写方式，RuntmeException 永远不会出现在 JUnit 测试中

# php - 如何从`registerPHPFunctions`生成的XSL的输出中删除xmlns：php？

> ID：15582396
> 
> 赞同：0
> 
> 时间：2013-03-23T01:33:52.297
> 
> 标签：php, xml, xslt-1.0

使用更新的 PHP5 和 libXML。请参阅 [registerphpfunctions](http://php.net/manual/en/xsltprocessor.registerphpfunctions.php)。

我尝试了很多事情......包括`saveXML(null,LIBXML_NSCLEAN)`。

可能与[从输出中省略不需要的名称空间有关](https://stackoverflow.com/q/15582825/287948)

* * *

XML 示例：

```
<root><p>Hello</p><p>world</p></root> 
```

XSL 示例：

```
<xsl:transform version="1.0" 
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
   xmlns:php="http://php.net/xsl">
<xsl:output encoding="UTF-8" method="xml" version="1.0" indent="no"/>

<xsl:template match="root"><foo>
   <xsl:for-each select="p">
    <p><xsl:value-of select="php:function('regFunction', . )" /></p>
   </xsl:for-each></foo>
</xsl:template> 
```

XML 输出示例：

```
<foo>
   <p xmlns:php="http://php.net/xsl">Hello</p>
   <p xmlns:php="http://php.net/xsl">world</p>
</foo> 
```

这`xmlns:php`是一个开销，它不用于输出！

# c# - 带有换行符的程序化文本块条目

> ID：15582398
> 
> 赞同：13
> 
> 时间：2013-03-23T01:34:08.170
> 
> 标签：c#, windows-store-apps, winrt-xaml

如何以编程方式将带有换行符的文本添加到文本块？

如果我插入这样的文本：

```
helpBlock.Text = "Here is some text. <LineBreak/> Here is <LineBreak/> some <LineBreak/> more."; 
```

然后换行符被解释为字符串文字的一部分。我希望它更像是如果我在 XAML 中拥有它会发生什么。

我似乎也无法以 WPF 方式做到这一点：

```
helpBlock.Inlines.Add("Here is some content."); 
```

由于 Add() 方法想要接受“内联”类型的对象。

我无法创建内联对象并将其作为参数传递，因为它“由于其保护级别而无法访问：

```
helpBlock.Inlines.Add(new Windows.UI.Xaml.Documents.Inline("More text")); 
```

我没有看到以编程方式添加运行的方法。

我可以找到很多这样的 WPF 示例，但对于 WinRT 却没有。

我还发现了很多 XAML 示例，但没有来自 C#。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-23T02:36:35.370

你可以只传入换行符`\n`而不是`<LineBreak/>`

```
helpBlock.Text = "Here is some text. \n Here is \n some \n more."; 
```

或者在 Xaml 中，您将使用`Hex`换行符的值

```
 <TextBlock Text="Here is some text. &#x0a; Here is &#x0a; some &#x0a; more."/> 
```

两个结果：

![在此处输入图像描述](../Images/da8a477444537ca2c0d222b1dcda8ddd.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-23T01:43:26.653

使用 Enviroment.NewLine

```
testText.Text = "Testing 123" + Environment.NewLine + "Testing ABC";

StringBuilder builder = new StringBuilder();
builder.Append(Environment.NewLine);
builder.Append("Test Text");
builder.Append(Environment.NewLine);
builder.Append("Test 2 Text");
testText.Text += builder.ToString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-03T13:40:57.697

`\n`您可以以`<LineBreak/>`编程方式转换为。

```
 string text = "This is a line.\nThis is another line.";
    IList<string> lines = text.Split(new string[] { @"\n" }, StringSplitOptions.None);

    TextBlock tb = new TextBlock();
    foreach (string line in lines)
    {
        tb.Inlines.Add(line);
        tb.Inlines.Add(new LineBreak());
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-03T13:52:53.760

**解决方案：**

我会使用“\n”而不是换行符。最好的方法是以这种方式使用它：

*Resources.resx 文件：*

```
myTextline: "Here is some text. \n Here is \n some \n more." 
```

在你的课堂上：

```
helpBlock.Text = Resources.myTextline; 
```

这看起来像：

[![在此处输入图像描述](../Images/ff192aaceabd7a7013898001a4e33581.png)](https://i.stack.imgur.com/2JQ8L.png)

其他解决方案是使用 Environment.NewLine 在此处构建您的字符串。

```
StringBuilder builder = new StringBuilder();
builder.Append(Environment.NewLine);
builder.Append(Resources.line1);
builder.Append(Environment.NewLine);
builder.Append(Resources.line2);
helpBlock.Text += builder.ToString(); 
```

或者在这里使用“\n”

```
StringBuilder builder = new StringBuilder();
builder.Append("\n");
builder.Append(Resources.line1);
builder.Append("\n");
builder.Append(Resources.line2);
helpBlock.Text += builder.ToString(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-19T23:45:31.677

我有一个组件 XAML

```
<TextBlock x:Name="textLog" TextWrapping="Wrap" Background="#FFDEDEDE"/> 
```

然后我通过字符串 + Environment.NewLine;

例子：

```
textLog.Inlines.Add("Inicio do processamento " + DateTime.Now.ToString("dd/MM/yyyy HH:mm:ss") + Environment.NewLine);
textLog.Inlines.Add("-----------------------------------" + Environment.NewLine); 
```

结果是

Inicio do processamento 19/08/2019 20:31:13
------------------------------------------------

# jquery - 使用 dataTable 的显示/隐藏功能时更改链接文本

> ID：15582400
> 
> 赞同：0
> 
> 时间：2013-03-23T01:34:44.513
> 
> 标签：jquery

我正在使用 dataTable 脚本轻松地对从我的数据库中提取的数据进行排序，并使用它们的内置函数来显示/隐藏某些列：

```
 function fnShowHide(iCol) {
        var oTable = $('#inventory').dataTable();
        var bVis = oTable.fnSettings().aoColumns[iCol].bVisible;
        oTable.fnSetColumnVis( iCol, bVis ? false : true );
    }
<a href="javascript:void(0);" class="cost" onclick="fnShowHide(10);">Cost</a> 
```

问题是，我如何做到这一点，如果该列被隐藏，则链接文本显示“显示成本”，如果该列可见，则显示“隐藏成本”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T03:25:48.710

也许这会奏效。看来您正在将列索引分配给 onclick 属性，也许将 id 添加到锚点以用作访问器；就像是：

```
function fnShowHide(iCol) {
        var oTable = $('#inventory').dataTable();
        var bVis = oTable.fnSettings().aoColumns[iCol].bVisible;
        oTable.fnSetColumnVis( iCol, bVis ? false : true );

        //--anchor text modifier
        var $anchor = $('#anchor_' + iCol);
        var albl = $anchor.text();
        if(albl.indexOf('Show')!=-1 || albl.indexOf('Hide')!=-1 ){
          albl = (bVis)? albl.replace('Show', 'Hide') : albl.replace('Hide', 'Show');
        }else{
          albl = (bVis)? 'Hide ' + albl : 'Show ' + albl; 
        }
        $anchor.text(albl)
    }
<a href="javascript:void(0);" class="cost" 
id="anchor_10" onclick="fnShowHide(10);">Cost</a> 
```

我的语法有错误：应用于以下行的更改应该会产生您正在寻找的结果：

```
 if(albl.indexOf('Show')!=-1 || albl.indexOf('Hide')!=-1 ){
 /*this is affected line*/ albl = (bVis)? albl.replace('Show', 'Hide') : albl.replace('Hide', 'Show');
    }else{ 
```

# php - 从指定的刚刚注册的用户中获取数据

> ID：15582402
> 
> 赞同：1
> 
> 时间：2013-03-23T01:34:47.497
> 
> 标签：php, mysql, pdo

我刚刚完成了一个小迷你注册表单，您在其中输入用户名、密码、消息，它将使用以下列将其插入到 mysql 中：

```
username    password    id  message date    time    country recover_id 
```

这些意味着：

```
ID = a random generated ID, for later use.

Time = Time of creation
Date = date of creation
Country = empty, later use..

Recover_id = the ID of the registration. 
```

注册后，我这样做：

```
 // Let's store these into a session now.
        $username = $_SESSION['user'];
        $password = $_SESSION['pass'];

        //Now let's refresh the page, to a different header.
        header('Location: recover.php?recovery=success');
    } 
```

存储用户名并传递给会话，然后创建一个新标头。

接着

```
} 
else if (isset($_GET['recovery']) && $_GET['recovery'] == 'success') 
{
    $fetch = $connect->query("SELECT * FROM users WHERE username = ':username' LIMIT 1");
    $fetch->bindValue(':username', $_SESSION['user']);
    $fetch->execute();

    while($row = mysql_fetch_array($fetch)) {
    echo $row['recover_id'];
    }
} 
```

我想尝试转到指定的用户名列，并从中获取信息，例如 recovery_id 或 ID 本身。

但这并

```
Warning: mysql_fetch_array() expects parameter 1 to be resource, object given in C:\xampp\htdocs\recover\recover.php on line 103 
```

我知道我做错了什么，但是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T01:42:35.093

由于您使用的是[pdo](/questions/tagged/pdo "显示标记为“pdo”的问题")（那里的工作非常好=）），因此您无法调用`mysql_*`函数。

请改用 PDO 的[`fetch()`](http://php.net/manual/en/pdostatement.fetch.php)方法。

```
while($row = $fetch->fetch( PDO::FETCH_ASSOC ) ) {
    echo $row['recover_id'];
} 
```

* * *

您需要`PDO::FETCH_ASSOC`作为参数传递才能使用命名索引检索数据。

# php - 属性值的空白值

> ID：15582407
> 
> 赞同：0
> 
> 时间：2013-03-23T01:35:40.303
> 
> 标签：php, mysql, sql

假设我有

```
 SELECT A,B FROM T1 WHERE A=X and B=Y; 
```

我与 php 一起设置的方式，我知道 X 和 Y 可能为空，因为我可以选择使用 A 和/或 B 进行搜索。所以假设只给出了 A，Y 会是什么必须返回所有 A=X 的元组？SQL 是否有某种“空白”函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T01:45:08.090

给定两个搜索参数 X 和/或 Y，您可以使用`OR`with`IS NULL`通过任一参数进行搜索：

```
SELECT A,B 
FROM T1 
WHERE (X IS NULL OR A=X) AND
    (Y IS NULL OR B=Y) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T01:45:35.830

如果您知道 A 或 B 中的数据永远不会是 NULL 值，或者您可以在 if 函数中修改 NULL 值，如果您知道这些列中的任何一个都不会是值，您可以使用某种类型的东西

MySQL：

```
 SELECT A,B FROM table where A=IF('X' <> '', X, NULL) OR B=IF('Y' <> '', Y, NULL) 
```

SQL 服务器：

```
 SELECT A,B FROM table where A=IIF('x' <> '', X, NULL) OR B=IIF('Y' <> '', Y, NULL) 
```

如果您通过 PHP 传递查询，您的另一种选择是不包括 B 的 AND/OR 子句（如果 A 存在），即：

$querystr = "SELECT A,B FROM table WHERE ".($a != "" ? "A = $a" : "").($b != "" ? "B = $b")

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T01:46:49.920

以下将返回 or A 或 B 为 NULL （从未填充）或 A 和 B 都等于您定义的值的所有行：

```
SELECT A, B FROM T1 WHERE (A IS NULL or A=X) and (B IS NULL or B=Y); 
```

如果您正在寻找其他内容，请澄清您的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-23T01:48:51.430

我想你会寻找检查是否`A IS NULL`.

所以整个 SQL 查询看起来像：

```
SELECT A, B FROM T1 WHERE (A=X OR A IS NULL) AND (B=Y OR B IS NULL); 
```

如果`A`表中的列是可选的，您可以插入新记录或更新现有记录，而无需向该列添加值。这意味着该字段将使用 NULL 值保存。NULL 用作未知或不适用值的占位符。

更多信息：[MySQL NULL 值](http://dev.mysql.com/doc/refman/5.0/en/null-values.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-23T01:50:43.507

你的意思是，

```
 SELECT A,B 
   FROM T1 
   WHERE (A=X or X is null)
     and (B=Y or Y is null)
     and not(A is null and B is null); 
```

# ruby-on-rails - 确保我的 SQL 未注入接收值数组

> ID：15582410
> 
> 赞同：1
> 
> 时间：2013-03-23T01:35:58.007
> 
> 标签：ruby-on-rails, postgresql, sql-injection

我需要接收一个类似的值数组：

```
['restaurant']
['restaurant', 'pharmacy'] 
```

我想采用哪种方法来确保当我使用它时：

```
SELECT * FROM places WHERE type IN (array_joined_with_commas_and_quotes) 
```

我没有受到注射攻击。

我正在编写没有任何库的句子，并且我在 Rails 中工作。

我没有 Active Record，我正在对外部服务器进行 postgis 查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T04:10:45.190

您有两种基本方法（在这些示例中使用 ? 进行参数化）。

如果这是一个数组，那么你`['restaurant', 'pharmacy']`就变成了`'{"restaurant","pharmacy"}'`，然后你可以：

```
SELECT * FROM places WHERE type = ANY (?); 
```

你也可以

```
SELECT * FROM places WHERE type IN (? ....); 
```

随时动态生成参数数量。正如烤饼所提到的，ActiveRecord 可能能够为您自动执行此操作。关键是这些方法与查询分开发送数据，这意味着 SQL 不能注入到查询中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T02:01:12.750

使用 ActiveRecord 函数进行查询构建怎么样？如果您使用导轨，宝石应该仍然存在。

```
Place.where(:type => ['foo', 'bar']).to_sql 
```

# javascript - 输出格式不正确？

> ID：15582413
> 
> 赞同：0
> 
> 时间：2013-03-23T01:36:59.813
> 
> 标签：javascript, css

**我的代码：**

```
document.write('<ul>');
document.write('<li><font color="green">intellectual:</font></li>' + bioEnergy);
document.write('<li><font color="red">emotional:</font></li>' + bioEmot);
document.write('<li><font color="blue">physical: </font></li>' + bioPhy);
document.write('</ul>'); 
```

**输出：**

```
intellectual:

0.8

emotional:

0.0

physical:

0.0 
```

我需要的是它的格式如下：`intellectual: 0.8` 等。我不确定如何设置 HTML 样式以使其工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T01:40:34.303

你的意思是：

```
document.write('<li><font color="green">intellectual:</font> ' +  bioEnergy + '</li>');
document.write('<li><font color="red">emotional: </font> ' + bioEmot + '</li>');
document.write('<li><font color="blue">physical: </font> ' + bioPhy + '</li>'); 
```

请注意每个 document.write 中元素的更改顺序。

**输出：**

```
intellectual: 0.8

emotional: 0.0

physical: 0.0 
```

# mysql - MySql 选择表选项

> ID：15582418
> 
> 赞同：0
> 
> 时间：2013-03-23T01:38:11.173
> 
> 标签：mysql, insert, where

我想制作一个php表单，可以选择从数据库中选择在哪个表中插入数据。诸如下拉列表之类的东西，或其他任何东西..你能帮我吗？

感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T01:47:33.063

在您的 PHP 表单中，为什么没有一个简单的选择下拉菜单，就像您建议的那样，每个下拉选项都包含您要插入的表名。

```
<select name='table-name'>
<option value='table1'>Table One</option>
<option value='table2'>Table Two</option>
</select> 
```

然后，在您的表单发布后，只需使用 PHP 获取值

`$_POST['table-name']`或者`$_GET['table-name']`当然取决于您的表单方法。

但请记住，您确切地知道自己在这里做什么，因为泄露有关您的表结构的重要信息可以帮助黑客进行他们的肮脏伎俩。

您始终可以将选项值放入标识符值而不是实际的表名，然后使用您的 PHP 表单处理程序将这些映射到正确的表名。例如，将您的选项值简单地设置为 1 和 2，然后让您的表单处理程序将它们转换为正确的表名，只接受指定的值。

一些笔记。

在使用用户输入的信息连接数据库之前，始终正确验证用户输入。

我希望您使用准备好的语句进行数据库调用并将用户输入的值绑定到这些语句，例如使用 PDO 或类似的

# apache - 从文件夹重定向到根目录

> ID：15582419
> 
> 赞同：0
> 
> 时间：2013-03-23T01:38:14.143
> 
> 标签：apache, .htaccess

我想将所有内容从`/downloads/assets/`一个文件夹移动到另一个文件`/downloads/`夹。

如何为`/downloads/assets/{anystring}`to 添加重定向`/downloads/{anystring}`？

现在我像这样手动添加每个重定向：

```
RewriteRule ^downloads/assets/views?$ /downloads/views [L] 
```

但这是一份梦想的工作。我们可以改用变量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T01:47:57.667

花一些时间阅读[文档，因为](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)[这`RewriteRule`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)是一个非常基本的用法。您需要在`assets/`in之后捕获所有内容`(.*)`并将其重写为`$1`.

```
RewriteEngine On
RewriteRule ^downloads/assets/(.*) downloads/$1 [L] 
```

以上将执行静默内部重写。如果您需要重定向浏览器而不是静默重写，请使用`[L,R=301]`而不是`[L]`.

# python - 在 Python 中扩展与添加与附加是否存在效率差异？

> ID：15582421
> 
> 赞同：2
> 
> 时间：2013-03-23T01:38:32.920
> 
> 标签：python, algorithm

我指的是列表操作：

```
L = myList + otherList
L = myList.append([5])
L = myList.extend(otherList) 
```

我很好奇这些操作之间是否存在效率差异。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T01:46:54.497

这些是完全不同的操作。

他们有不同的目的，所以效率并不重要。`append`用于将单个值附加到列表中，`extend`用于多个值，并且添加用于当您不想修改原始列表，而是要在另一个列表上添加额外的值时。

```
>>> lst = [1, 2, 3]
>>> lst2 = [5, 6]
>>> lst.append(4)  # appending
>>> lst
[1, 2, 3, 4]
>>> lst.extend(lst2)  # extending
>>> lst
[1, 2, 3, 4, 5, 6]
>>> lst + lst2  # addition
[1, 2, 3, 4, 5, 6, 5, 6] 
```

还要注意`list.append`and*就地*`list.extend`操作，因此将结果分配给变量将使该变量保持 value 。*`None`*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T01:46:41.643

您的示例在`append`.

```
>>> l1 = [1,2,3,4]
>>> l1.append([5])
>>> l1
[1, 2, 3, 4, [5]] 
```

Append 接受单个项目并将其附加到现有列表的末尾。通过传入一个可迭代的追加，您将在列表中添加另一个列表（在本例中）。

`extend`接受一个可迭代对象，本质上调用可迭代`append`对象中的每个项目，将这些项目添加到现有列表的末尾。

这`mylist + otherlist`是这里唯一有趣的情况，因为使用`+`运算符会创建一个新列表，使用更多内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T01:51:07.700

为它们计时可以回答您关于速度方面的效率的问题：

```
import timeit

def first():
    mylist + otherlist

def second():
    mylist.append(otherlist)

def third():
    mylist.extend(otherlist)

for test in (first, second, third):
    mylist = [1, 2, 3, 4]
    otherlist = [5]

    print "%s: %f" % (test, timeit.timeit(test, number=1000000)) 
```

在我的机器上，结果是：

```
<function first at 0x10ff3ba28>: 0.320835
<function second at 0x10ff3baa0>: 0.275077
<function third at 0x10ff3bb18>: 0.284508 
```

表明第一个示例显然是最慢的。*

# php - 接受什么 http 状态码

> ID：15582425
> 
> 赞同：0
> 
> 时间：2013-03-23T01:38:56.947
> 
> 标签：php, curl, http-status-code-404

我正在使用 Curl 来查找网站的状态代码。这是对用户在表单中输入 url 的响应，基本上我只是想检查 url 是否有效，所以我认为最好的方法是只允许某些可能没问题的代码。但这并不像预期的那样工作。对于 EG tesco 返回 503，Marks&Sparks 返回 405。所以看起来可能有更多的状态代码实际上是好的，但对我来说似乎不应该是好的。

所以...我的问题是，我应该信任哪些 http 状态代码。还是我应该反过来做，并传递除某些特定状态代码之外的所有内容？

为了完整起见，万一它对任何人有帮助，以下是我获取状态码的方式：

```
$curl = curl_init($url);
curl_setopt($curl, CURLOPT_NOBODY, true);
$result = curl_exec($curl);
$statusCode = curl_getinfo($curl, CURLINFO_HTTP_CODE); 
if ($statusCode == 200 || $statusCode == 300 || $statusCode == 301 || $statusCode == 302 || $statusCode == 303 || $statusCode == 307 || $statusCode ==) {
    $ret = true;   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T01:47:20.523

**通过 CURL 检查是否存在 url** *参考：[http ://www.php.net/manual/en/function.file-exists.php#74469](http://www.php.net/manual/en/function.file-exists.php#74469)*

```
<?php
function url_exists($url) {
    if (!$fp = curl_init($url)) return false;
    return true;
}
?> 
```

**根据您的疑问，一些状态代码和参考**

```
200 OK 
```

**请求已成功。响应返回的信息取决于请求中使用的方法**，例如：

GET 在响应中发送与请求的资源对应的实体；

HEAD 请求资源对应的实体头字段在响应中发送，不带任何消息体；

POST 描述或包含操作结果的实体；

TRACE 包含终端服务器收到的请求消息的实体。

```
201 Created 
```

**请求已完成并导致创建新资源**。新创建的资源可以被响应实体中返回的 URI 引用，资源的最具体的 URI 由 Location 头字段给出。

```
202 Accepted 
```

**请求已被接受处理，但处理尚未完成。**该请求最终可能会或可能不会被执行，因为在实际进行处理时它可能会被禁止。无法从诸如此类的异步操作中重新发送状态代码。

```
203 Non-Authoritative Information 
```

**实体标头中返回的元信息不是原始服务器可用的最终集，而是从本地或第三方副本收集的。**呈现的集合可能是原始版本的子集或超集。例如，包含有关资源的本地注释信息可能会导致源服务器已知的元信息的超集。不需要使用此响应代码，仅当响应为 200（OK）时才适用。

```
204 No Content 
```

**服务器已完成请求，但不需要返回实体主体，并且可能希望返回更新的元信息。**响应可能包括实体头形式的新的或更新的元信息，如果存在，应该与请求的变体相关联。

```
205 Reset Content 
```

**服务器已经完成了请求并且用户代理应该重置导致请求被发送的文档视图。**此响应主要是为了允许通过用户输入进行操作的输入，然后清除给出输入的表单，以便用户可以轻松地启动另一个输入操作。响应不得包含实体。

读这个

[http://www.seocentro.com/articles/apache/http-status-codes.html](http://www.seocentro.com/articles/apache/http-status-codes.html)
[http://en.wikipedia.org/wiki/List_of_HTTP_status_codes](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)
[http://www.w3.org/Protocols/rfc2616/rfc2616- sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

# ios - 如何获取 Facebook 用户的验证状态

> ID：15582426
> 
> 赞同：1
> 
> 时间：2013-03-23T01:38:58.490
> 
> 标签：ios, xcode, facebook-graph-api, ios6, xcode4.6

我使用适用于 iOS 的 Facebook SDK 与 HelloFacebookSample 合作，从用户帐户**中**检索**已验证的状态。**

我试图在下面的方法中从**用户**实例中检索。但它似乎没有
在那里定义。

如何检索**已验证**状态？

```
- (void)loginViewFetchedUserInfo:(FBLoginView *)loginView
                            user:(id<FBGraphUser>)user {
    // here we use helper properties of FBGraphUser to dot-through to first_name and
    // id properties of the json response from the server; alternatively we could use
    // NSDictionary methods such as objectForKey to get values from the my json object
    self.labelFirstName.text = [NSString stringWithFormat:@"Hello %@!", user.first_name];
    // setting the profileID property of the FBProfilePictureView instance
    // causes the control to fetch and display the profile picture for the user
    self.profilePic.profileID = user.id;
    self.loggedInUser = user;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:46:52.777

我得到了答案：

```
- (void)loginViewFetchedUserInfo:(FBLoginView *)loginView
                            user:(id<FBGraphUser>)user {
    // here we use helper properties of FBGraphUser to dot-through to first_name and
    // id properties of the json response from the server; alternatively we could use
    // NSDictionary methods such as objectForKey to get values from the my json object
    self.labelFirstName.text = [NSString stringWithFormat:@"Hello %@!", user.first_name];
    // setting the profileID property of the FBProfilePictureView instance
    // causes the control to fetch and display the profile picture for the user
    self.profilePic.profileID = user.id;
    self.loggedInUser = user;

    NSLog(@"userInfo %@",[user objectForKey:@"verified"]);

} 
```

# hibernate - Hibernate Criteria API 和 Hibernate Query Language 之间的结果冲突

> ID：15582427
> 
> 赞同：0
> 
> 时间：2013-03-23T01:39:01.490
> 
> 标签：hibernate, hql, hibernate-criteria, restrictions

我是 Hibernate 标准的新手，`Tutor`和之间的关系`Student`是`OneToMany`（即一个`Tutor`有很多`Student`），我尝试按照 hibernate 查询来检索导师姓名为 Peter Smith 的所有学生：

```
from Student student where student.tutor.name is 'Peter Smith' 
```

并得到以下结果：

```
Shin Don
Robert Cage 
```

然后我尝试了 Hibernate Criteria API 的相同查询，如下所示：

```
Criteria criteria = session.createCriteria(Student.class);  
criteria.createCriteria("tutor").add(Restrictions.eq("name", "Peter Smith"));
criteria.list(); 
```

这次我得到以下结果：

```
Shin Don
Shin Don
Robert Cage 
Robert Cage 
```

以下是我拥有的学生和导师实体：

**学生.java**

```
@Entity
public class Student {

    private Integer id;
    private String studentId;
    private String name;
    private Tutor tutor;
    //remaining fields

    public Student() {}
    public Student(String studentId, String name) {
        super();
        this.studentId = studentId;
        this.name = name;
    }

    @Id
    @GeneratedValue
    public Integer getId() {
        return id;
    }

    @Column(unique=true, nullable=false)
    public String getStudentId() {
        return studentId;
    }

    @ManyToOne
    @JoinColumn(name="tutor_id")
    public Tutor getTutor() {
        return tutor;
    }

    @Override
    public int hashCode() {
        //returns hashcode based on studentId
    }
    @Override
    public boolean equals(Object obj) {
        //returns true or false based on studentId
    }
    @Override
    public String toString() {
        return this.name;
    }

    //remaining getter and setter methods

} 
```

**导师.java**

```
@Entity
public class Tutor{

    private Integer id;
    private String tutorId;
    private String name;
    private Set<Student> students = new HashSet<Student>();
    //remaining fields

    public Tutor() {}   
    public Tutor(String tutorId, String name) {
        super();
        this.tutorId = tutorId;
        this.name = name;
    }

    @Id
    @GeneratedValue
    public Integer getId() {
        return id;
    }

    @Column(unique=true, nullable=false)
    public String getTutorId() {
        return tutorId;
    }

    @OneToMany(mappedBy="tutor", targetEntity=Student.class, cascade=CascadeType.ALL, fetch=FetchType.EAGER)
    public Set<Student> getStudents() {
        return students;
    }

    @Override
    public int hashCode() {
        //returns hashcode based on tutorId
    }
    @Override
    public boolean equals(Object obj) {
        //returns true or false based on tutorId
    }

    public void addStudent(Student student) {
        this.students.add(student);
        student.setTutor(this);
    }

    //remaining setter and getter methods

} 
```

对于 HQL，我得到以下 SQL：

```
select
...
...
from
    Tutor tutor0_ 
left outer join
    Student students1_ 
        on tutor0_.id=students1_.tutor_id 
where
    tutor0_.id=? 
```

对于标准，我得到以下 SQL：

```
select
...
...
from
    Student this_ 
inner join
    Tutor tutor1_ 
        on this_.tutor_id=tutor1_.id 
left outer join
    Student students4_ 
        on tutor1_.id=students4_.tutor_id 
where
    tutor1_.name=? 
```

有人可以帮我理解为什么给定的 HQL 和标准我没有得到相同的结果吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:50:31.987

改变你的`Tutor.java`

```
 @OneToMany(mappedBy="tutor", targetEntity=Student.class,
cascade=CascadeType.ALL, fetch=FetchType.EAGER) 
```

至

```
 @OneToMany(mappedBy="tutor", targetEntity=Student.class,
cascade=CascadeType.ALL, fetch=FetchType.LAZY) 
```

# android - 使用 ValueAnimator 使 TextView 闪烁不同的颜色

> ID：15582434
> 
> 赞同：24
> 
> 时间：2013-03-23T01:39:43.393
> 
> 标签：android, animation, xamarin.android

我想使用 a`ValueAnimator`使 a`TextView`的文本颜色在两种不同颜色之间闪烁两次，但我想在 XML 中创建动画。我找不到任何例子。任何帮助将不胜感激。

**更新**

下面的代码完美运行。颜色从黑色变为蓝色、蓝色变为黑色、黑色变为蓝色、蓝色变为黑色，每次反向重复之间的间隔为 500 毫秒。然而，我试图让这个从动画 xml 文件中工作。

```
ValueAnimator colorAnim = ObjectAnimator.OfInt(objectToFlash, "textColor", (int)fromColor, (int)toColor);
colorAnim.SetDuration(500);
colorAnim.SetEvaluator(new ArgbEvaluator());
colorAnim.RepeatCount = 3;
colorAnim.RepeatMode = ValueAnimatorRepeatMode.Reverse; 
```

**xml**

```
<objectAnimator xmlns:android="http://schemas.android.com/apk/res/android"
        android:propertyName="textColor"        
        android:duration="500"
        android:valueFrom="@color/black"
        android:valueTo="@color/ei_blue"
        android:repeatCount="3"
        android:repeatMode="reverse" /> 
```

**代码**

```
ValueAnimator anim = (ObjectAnimator)AnimatorInflater.LoadAnimator(Activity, Resource.Animator.blinking_text);
anim.SetTarget(objectToFlash); 
```

使用 xml 会导致 的`TextView`文本颜色在 500 毫秒内改变尽可能多的次数。

**更新** 我认为我需要的是在 xml 中模仿 OfInt 调用以编程方式执行的关键帧。现在尝试这个，但到目前为止没有运气。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-23T01:51:16.123

尝试这个：

```
private static final int RED = 0xffFF8080;
private static final int BLUE = 0xff8080FF;

ValueAnimator colorAnim = ObjectAnimator.ofInt(myTextView, "backgroundColor", RED, BLUE);
        colorAnim.setDuration(3000);
        colorAnim.setEvaluator(new ArgbEvaluator());
        colorAnim.setRepeatCount(ValueAnimator.INFINITE);
        colorAnim.setRepeatMode(ValueAnimator.REVERSE);
        colorAnim.start(); 
```

**或者**通过 xml 尝试这种未经测试的方法：*res/animator/property_animator.xml*

```
<set >

<objectAnimator
    android:propertyName="backgroundColor"
    android:duration="3000"
    android:valueFrom="#FFFF8080"
    android:valueTo="#FF8080FF"
    android:repeatCount="-1"
    android:repeatMode="reverse" />
</set> 
```

现在在Java代码中：

```
AnimatorSet set = (AnimatorSet) AnimatorInflater.loadAnimator(myContext,
R.anim.property_animator);
set.setTarget(myTextView);
set.start(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-11-13T17:46:00.060

从 API LEVEL > 21 开始，使用静态方法可以产生相同的效果，`ObjectAnimator.ofArgb`如下所示：

```
@RequiresApi(api = Build.VERSION_CODES.LOLLIPOP)
    private void animateText(TextView text) {
        ObjectAnimator animator = ObjectAnimator.ofArgb(text, "textColor", Color.WHITE, Color.RED);
        animator.setDuration(500);
        animator.setRepeatCount(3);
        animator.setRepeatMode(ValueAnimator.REVERSE);
        animator.start();
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-16T19:11:27.357

您描述的问题是 XML 中指定的对象动画师未正确分配 ArgbEvaluator 进行颜色插值。

要解决此问题，请创建对象动画器 XML 以根据需要在颜色之间进行补间。然后，在源代码中，执行以下操作以确保动画师使用的评估器是 ArgbEvaluator：

```
ObjectAnimator colorAnimator = (ObjectAnimator)AnimatorInflater.loadAnimator(this, R.animator.color_rotation);
colorAnimator.setTarget(objectToFlash);
colorAnimator.setEvaluator(new ArgbEvaluator());
colorAnimator.start(); 
```

# c# - 如何在字符串中获取单词的索引

> ID：15582441
> 
> 赞同：7
> 
> 时间：2013-03-23T01:40:57.927
> 
> 标签：c#, string

我试图在字符串中获取单词的索引，如果可能的话，还删除字符串中该单词之前的所有字符，这将使我的生活更轻松。

有人可以帮我吗？我在 c# 上这样做

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-23T01:48:48.593

您需要对字符串使用 IndexOf 函数。这将告诉您要查找的单词、字符等的起始字符位置。

这是一个示例控制台应用程序：

```
 static void Main(string[] args)
    {
        String testing = "text that i am looking for";
        Console.Write(testing.IndexOf("looking") + Environment.NewLine);
        Console.WriteLine(testing.Substring(testing.IndexOf("looking")));

        Console.ReadKey();

    } 
```

这将输出：
15
寻找

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-04-24T06:38:28.810

是的，您可以使用 Substring 删除之前的所有字符

```
string str = "I'm stuck here please help, something else....yyyy";
string output = str.Substring(str.IndexOf("help"));
WriteLine($"Output string value  :{output}");//help,something else....yyyy 
```

# javascript - Windows上的nodejs mobwrite

> ID：15582443
> 
> 赞同：0
> 
> 时间：2013-03-23T01:41:22.577
> 
> 标签：javascript, python, node.js

我正在尝试设置 nodejs mobwrite。我已经安装了节点工作和 python，并且我遵循了简单的设置步骤，但我一直在浏览器中收到此控制台错误。

```
Failed to load resource: the server responded with a status of 500 (Internal Server Error) 
http://localhost:8000/mobwrite/sync 
```

[https://github.com/mjpizz/node-mobwrite](https://github.com/mjpizz/node-mobwrite)

谈到nodejs，我有点新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T02:40:38.650

解决它。从 复制 mobwrite_daemon.py `node_modules/mobwrite/ext/google-mobwrite/daemon`，并将其放在它上面的目录中。Dbl 单击它以在 python 中启动它。

然后在nodejs中启动mobwrite。哇！

# c# - 在活动目录控制器上捕获密码更改

> ID：15582444
> 
> 赞同：2
> 
> 时间：2013-03-23T01:41:34.923
> 
> 标签：c#, .net

我已经看到几个软件包作为服务在活动目录控制器上运行，它捕获用户发起的密码更改。我的应用程序需要知道新更改的密码是什么，以便用户在其他系统中传播。有谁知道这是怎么做到的？谢谢。

顺便说一句，我用 C# 编写，但欢迎使用其他 .net 语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T08:24:10.497

您需要在 Active Directory 服务器上创建[密码过滤器，特别是](http://ldapwiki.willeke.com/wiki/Active%20Directory%20and%20Passwords)[PasswordChangeNotify 回调](http://msdn.microsoft.com/en-us/library/ms721876%28v=vs.85%29.aspx)。不幸的是，要[使用它](http://msdn.microsoft.com/en-us/library/ms722496%28v=VS.85%29.aspx)，您必须制作一个真正不应该用.NET † 编写的 COM 服务器 DLL ^(†</sup>。)

但是，还有第二个选项。我过去使用过一个开源密码过滤器，它运行良好，称为[Password Hook](http://sourceforge.net/projects/passwdhk/)。该密码过滤器将启动第二个程序（如注册表中定义的那样）并将密码信息作为命令行参数传递（如您的 .NET 程序以更新密码更改的其他服务）。

* * *

^(†：我在 SO 上看到了一篇很好的帖子，内容是一年前我在查看密码内容时为什么不应该在 Windows 组件中使用 .NET，但我再也找不到它了。如果其他人可以找到它，请随时在链接中编辑)

# netbeans-platform - 未在 MultiViewEditorElement 的子类上触发 componentOpened

> ID：15582445
> 
> 赞同：0
> 
> 时间：2013-03-23T01:41:48.777
> 
> 标签：netbeans-platform

我有一个`MultiViewEditorElement`. 我知道该类正在被实例化，但是由于某种原因，当我打开文件时没有触发 componentOpened 和 componentActivated。我在这里做错了吗？我只包含了我认为相关的代码，如果您需要整个课程，请告诉我。

**类声明**

```
@MultiViewElement.Registration(
    displayName = "#LBL_puml_EDITOR",
iconBase = "org/netbeans/modules/plantumlnb/icon.png",
mimeType = "text/plain",
persistenceType = TopComponent.PERSISTENCE_ONLY_OPENED,
preferredID = "puml",
position = 1000)
@Messages("LBL_puml_EDITOR=Source")
public final class pumlVisualElement extends MultiViewEditorElement {

public pumlVisualElement(Lookup lkp) {
    super(lkp);
    obj = lkp.lookup(pumlDataObject.class);
    System.out.println("================ Inside Constructor.");
    assert obj != null;
}

@Override
public void componentOpened() {
    super.componentOpened();
    System.out.println(" ========================= Here");
}

@Override
public void componentActivated() {
    super.componentActivated();
    System.out.println(" ========================= Here");        
}

} 
```

**实例化上述类的方法**

```
@MultiViewElement.Registration(
    displayName = "#LBL_puml_EDITOR",
iconBase = "org/netbeans/modules/plantumlnb/icon.png",
mimeType = "text/x-puml",
persistenceType = TopComponent.PERSISTENCE_ONLY_OPENED,
preferredID = "puml",
position = 1200)
@Messages("LBL_puml_EDITOR=Source")
public static MultiViewEditorElement createEditor(Lookup lkp) {
    return ((MultiViewEditorElement) new pumlVisualElement(lkp));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:50:41.040

发生这种情况是因为我没有自定义 mime 类型。所以基本上使用上面的代码，我在一个选项卡中看到了三个不同的视图，两个源选项卡和一个历史选项卡。

```
@MultiViewElement.Registration(
    displayName = "#LBL_puml_EDITOR",
iconBase = "org/netbeans/modules/plantumlnb/icon.png",
mimeType = "text/x-puml",
persistenceType = TopComponent.PERSISTENCE_ONLY_OPENED,
preferredID = "puml",
position = 1000)
@Messages("LBL_puml_EDITOR=Source")
public final class pumlVisualElement extends MultiViewEditorElement {

public pumlVisualElement(Lookup lkp) {
    super(lkp);
    obj = lkp.lookup(pumlDataObject.class);
    System.out.println("================ Inside Constructor.");
    assert obj != null;
}

@Override
public void componentOpened() {
    super.componentOpened();
    System.out.println(" ========================= Here");
}

@Override
public void componentActivated() {
    super.componentActivated();
    System.out.println(" ========================= Here");        
}

} 
```

从方法中删除注释。

```
public static MultiViewEditorElement createEditor(Lookup lkp) {
    return ((MultiViewEditorElement) new pumlVisualElement(lkp));
} 
```

# java - JavaFX 2.2：如何将字符串绑定到整数？

> ID：15582446
> 
> 赞同：6
> 
> 时间：2013-03-23T01:41:53.153
> 
> 标签：java, javafx, binding, javafx-2

我正在尝试以下代码，但无法编译：

```
SimpleIntegerProperty startPageProperty = new SimpleIntegerProperty();

TextField startPageField = new TextField();

Bindings.bindBidirectional(
    startPageField.textProperty(), startPageProperty, new IntegerStringConverter()
); 
```

最后一个静态方法调用不接受这些参数。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-23T17:00:26.433

`Bindings#bindBidirectional`期望 a `StringConverter[Number]`，您正在提供`StringConverter[Integer]`. 虽然它可能不直观，但您必须使用 a[`NumberStringConverter`](http://docs.oracle.com/javafx/2/api/javafx/util/converter/NumberStringConverter.html)代替。

```
Bindings.bindBidirectional(startPageField.textProperty(), 
                           startPageProperty, 
                           new NumberStringConverter()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-28T10:00:24.220

虽然前面的答案是正确的，但还有另一种方法可以解决这个问题，如果您想以特定方式格式化数字（例如使用千位分隔符），这种方法会更好：

```
var formatter = new TextFormatter<>(new NumberStringConverter("#,###"));
formatter.valueProperty().bindBidirectional(startPageProperty);
startPageField.setTextFormatter(formatter); 
```

使用 a 的好处`TextFormatter`是它会在文本字段失去焦点时重新格式化用户输入的任何数字。

# c# - 对于 FromAsync，BeginXXX 中的参数太多？

> ID：15582450
> 
> 赞同：15
> 
> 时间：2013-03-23T01:42:13.650
> 
> 标签：c#, asynchronous, iasyncresult

我有一个具有以下签名的异步方法：

```
IAsyncResult BeginGetMyNumber(string foo, string bar, string bat, int bam, AsyncCallback callback, object state) 
```

我想像这样使用 Factory.FromAsync 执行它：

```
var result  = Task<int>.Factory.FromAsync(
                instance.BeginGetMyNumber, 
                instance.EndGetMyNumber, 
                "foo",
                "bar",
                "bat",
                100, /*bam*/
                null); 
```

但我收到以下错误：

> 参数 1：无法从“方法组”转换为“System.Func”

似乎没有合适的重载 FromAsync 方法[http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskfactory.fromasync.aspx](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskfactory.fromasync.aspx)，它最多只支持5个参数（包括回调和状态）在 BeginXXX 方法上。

除了重构 BeginXXX 方法以获取一个对象而不是六个参数之外，还有没有办法使用 FromAsync 来执行它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-07-02T15:49:48.370

```
result = Task<string>.Factory.FromAsync(
  (callback, state) => instance.BeginGetMyNumber("foo", "bar", "bat", 1, callback, state),
   instance.EndGetMyNumber, state: null); 
```

这种技术（部分函数应用）适用于具有任意数量输入参数的开始方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-24T22:48:10.183

实际上，我似乎可以使用 Factory.FromAsync( 的重载方法，它将 IAsyncResult 对象作为第一个参数，将回调方法作为第二个参数：

```
result = Task<string>.Factory.FromAsync(
                instance.BeginGetMyNumber("foo", "bar", "bat", 1, null, null),
                instance.EndGetMyNumber); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-23T02:08:47.803

是的，基本上，你已经没有论据了。:(

该`FromAsync`方法最多只需要三个传递给异步调用的参数，完整拼写如下：

```
var result  = Task<int>
    .Factory
    .FromAsync<string,string,string>(
        BeginGetMyNumber,
        EndGetMyNumber,
        "foo",
        "bar",
        "bat",
        null); 
```

如果您有以下情况，这将起作用：

```
IAsyncResult BeginGetMyNumber(
   string foo, 
   string bar, 
   string bat, 
   AsyncCallback callback, 
   object state)
{
} 
```

但是你们有太多了。

哦，得到了一些可能有帮助的东西——**你会想把它清理干净，这是非常拼凑的！！！**

```
public static class Ext
{
    public static Task<TResult> FromAsync<TArg1, TArg2, TArg3, TArg4, TResult>(
        this TaskFactory<TResult> factory,
        Func<TArg1,TArg2,TArg3,TArg4,AsyncCallback, object, IAsyncResult> beginMethod, 
        Func<IAsyncResult, TResult> endMethod, 
        TArg1 arg1,
        TArg2 arg2,
        TArg3 arg3,
        TArg4 arg4,
        object state,
        TaskCreationOptions creationOptions = TaskCreationOptions.None, 
        TaskScheduler scheduler = null)
    {
        scheduler = scheduler ?? TaskScheduler.Current;
        AsyncCallback callback = null;
        if (beginMethod == null)
        {
            throw new ArgumentNullException("beginMethod");
        }
        if (endMethod == null)
        {
            throw new ArgumentNullException("endMethod");
        }
        TaskCompletionSource<TResult> tcs = 
             new TaskCompletionSource<TResult>(state, creationOptions);
        try
        {
            if (callback == null)
            {
                callback = delegate (IAsyncResult iar) 
                {
                    tcs.TrySetResult(endMethod(iar));
                };
            }
            beginMethod(arg1, arg2, arg3, arg4, callback, state);
        }
        catch
        {
            tcs.TrySetResult(default(TResult));
            throw;
        }
        return tcs.Task;
    } 
} 
```

# ckeditor - 如何在 CKEditor 中自定义单个按钮（不是整个工具栏）

> ID：15582462
> 
> 赞同：0
> 
> 时间：2013-03-23T01:43:33.420
> 
> 标签：ckeditor

我在我的 Rails 应用程序中使用 CKEditor（通过“ckeditor”gem）。我已经自定义了工具栏，如下所示。如您所见，我只想要最少数量的功能。

```
 [
    { name: 'basicstyles', items : [ 'Bold','Underline' ] },
    { name: 'paragraph', items : [ 'NumberedList','BulletedList' ] },
    { name: 'links', items : [ 'Link' ] },
    { name: 'insert', items : [ 'Smiley','SpecialChar' ] },
    { name: 'colors', items : [ 'TextColor' ] },
 ]; 
```

这很好用，但按钮提供的功能比我需要的要多得多。

例如，该`Link`按钮触发一个弹出窗口，允许用户选择链接类型和目标等详细信息。我想将我的用户限制在一种链接上。（即，当他们点击`link`按钮时，他们需要做的就是输入链接，他们看不到任何选项，也没有做出任何决定。）

对于文本颜色，我只需要两种或三种颜色，而不是提供的 50 多种颜色。

如何进行这些更改？

如果您能提供意见或向我指出一些资源，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T08:51:07.767

要进行这些更改，您需要重写所需的插件以自定义它们的功能。

您可以在此处找到有关它的更多信息：http: //docs.ckeditor.com/#!/guide/ [plugin_sdk_intro](http://docs.ckeditor.com/#!/guide/plugin_sdk_intro)

为了不破坏与较新版本的兼容性，我建议您根据要修改的插件创建新插件，而不是直接在其源代码中进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T15:59:32.687

您可以尝试我们在 CKEditor 4.1 中引入的高级内容过滤器。根据您可以定义的内容规则，编辑器数据被过滤，同样的情况也发生在 UI 上——只显示对话框中的“允许”按钮和字段。这一切都是自动发生的，因此结果可能并不完美，但我们对此功能的反馈非常积极。

检查[ACF 示例](http://nightly.ckeditor.com/standard/samples/datafiltering.html)和[发行说明](http://ckeditor.com/blog/CKEditor-4.1-Released)。

# php - 将 codeigniter 和 Rackspace Cloud Files 与 ORD 数据中心结合使用

> ID：15582465
> 
> 赞同：0
> 
> 时间：2013-03-23T01:43:42.747
> 
> 标签：php, codeigniter, rackspace, cloudfiles

我正在使用在这里找到的库： [https ://bitbucket.org/modomg/codeigniter-rackspace-cloudfiles/](https://bitbucket.org/modomg/codeigniter-rackspace-cloudfiles/)

将一些东西从我的网站上传到云文件。我在 DFW 中心有容器，但我的云站点托管在 ORD 中。我希望他们在同一个数据中心。当我在 DFW 数据中心使用容器时一切正常，但是当我制作一个新容器并将其放入 ORD 数据中心并尝试使用它时，它不起作用。有人遇到过这个问题吗？需要改变什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:07:47.273

不幸的是，v1 auth api 只返回一个存储 url。v2 auth api 会返回所有端点，但不是从现有的基于标头的 v1 auth 的简单转换。可以做的一个技巧是将存储 url 数据中心从 dfw1 更改为 ord1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:30:48.057

最近引起了我的注意。我今天研究了一段时间，看起来旧版本的 rackspace 与 ORD 数据中心或其最新版本的 API 不兼容。我仍在研究这个，但我可能不得不用他们最近发布的新代码重写这个库。目前它仅适用于 DFW。

密切关注 repo 和问题日志，以了解更多变化。我知道很多人使用这个库，所以我想确保它继续为每个人工作。抱歉，我目前无法提供更多帮助。如果您在此期间需要其他任何东西，请与我联系。

# org-mode - 如何在组织模式下标记表？

> ID：15582469
> 
> 赞同：1
> 
> 时间：2013-03-23T01:44:23.030
> 
> 标签：org-mode

我有一张不应该导出的 R 大表。所以我`#TAGS: noexport`在表格上方添加了一个，但这似乎没有任何效果。那么如何标记一个表呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T03:02:00.003

您不能将标签添加到表中，只能添加到标题中。

此外，该`#+TAGS`指令用于声明一组特定于整个文档的标签，而不是用于标记表格。

如果您在注释块中包围表格，它将不会被导出。例如：

```
#+begin_comment

#+tblname: very_long_table
| col1 | col2 |
|------+------|
| 1    | 22   |
| 2    | 23   |
| 3    | 24   |
| 4    | 25   |
| 5    | 26   |

#+end_comment

#+begin_src sh :var tbl=very_long_table :exports both
echo $tbl
#+end_src

#+RESULTS:
: 1 22 2 23 3 24 4 25 5 26 
```

# angularjs - html 5 sse 无法将数据传递给角度数据

> ID：15582471
> 
> 赞同：2
> 
> 时间：2013-03-23T01:44:47.203
> 
> 标签：angularjs, server-sent-events

我一直试图在角度数据中传递我的 sse 数据，但它不会显示。这是我尝试的方法：

（我的观点）

```
<body ng-app>
  <div ng:controller="Main">
    <ul>
      <li ng:repeat="item in items">
        name:{{item.name}},age:{{item.age}}
      </li>
    </ul>
  </div>
</body> 
```

（角脚本）

```
var source = new EventSource('/feedcontain/test');

function Main($scope) {

  $scope.items = [];

  source.addEventListener('right', function(e) {
     $scope.$apply(function() {
      $scope.items.push(e.data);
     });
    },
  false);

 } 
```

(/feedcontain/测试)

```
header('Content-Type: text/event-stream');
header('Cache-Control: no-cache');

echo "data: [{name:'john', age:23}, {name:'Mary', age:28}, {name:'Sean', age:28}] \n\n"; 
```

我想显示`name:john, age:23`，但它返回空。我试图在更改数据或添加之后创建一些东西，然后它将推送到 angularjs。任何想法？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:27:31.193

如果事件一直在发生，你会以一个`name:,age:`结果结束。那么你应该做的就是`concat`而不是`push`ing，因为你正在接收一个数组。

```
$scope.items = $scope.items.concat(e.data); 
```

请记住，`$scope.items`引用会改变，不会破坏 Angular，但可能会破坏对它的任何其他引用。如果您需要它不更改，`for`请对`push`每个元素使用 a。

# android - 无法将游标列表传递给另一个方法

> ID：15582473
> 
> 赞同：0
> 
> 时间：2013-03-23T01:44:56.913
> 
> 标签：android, arrays, cursor

我不能在方法中使用`myid[]`整数列表。`onclick`

我是说 ：

我想从的光标列表中获取`myid[0]`, `myid[1]`, `myid[2]`...... 列表值`populatelist()`

然后我就可以`onClick`像这样的方法使用它们`myid[index]`

```
 @Override
    protected void populateList() {

       Cursor cursorKayit = db.rawQuery(query, null);

       int[] myid = new int[cursorKayit.getCount()];         
       int i = 0;
        while(cursorKayit.moveToNext()){

        myid[i]=cursorKayit.getInt(0);
        String mytitle=cursorKayit.getString(1);
        String mydescription=cursorKayit.getString(2);
        getUITableView().addBasicItem(mytitle, mydescription);
        i++;

        }
        cursorKayit.close();

        } 
```

..

```
private class CustomClickListener implements ClickListener {

    @Override
    public void onClick(int index) {

        Toast.makeText(CategoryMenu.this, "item clicked: " + myid[index], Toast.LENGTH_SHORT).show();
        }

} 
```

# java - 如何在java中使用反射调用类的main（）方法

> ID：15582476
> 
> 赞同：5
> 
> 时间：2013-03-23T01:45:07.637
> 
> 标签：java, reflection

当使用反射从另一个主方法调用 Java 类的主方法时，

```
Class thisClass = loader.loadClass(packClassName);
Method thisMethod = thisClass.getDeclaredMethod("main",String[].class);

thisMethod.invoke(null, new String[0]); 
```

我应该创建 newInstance() 还是简单地调用 main()，因为它是静态的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T01:58:40.200

对于您声明的要求（动态调用随机类的主要方法，通过反射，您有很多不必要的代码。

*   您不需要为该类调用构造函数
*   您不需要自省类字段
*   由于您正在调用静态方法，因此您甚至不需要一个真实的对象来调用该方法

您可以调整以下代码以满足您的需求：

```
try {
    final Class<?> clazz = Class.forName("blue.RandomClass");
    final Method method = clazz.getMethod("main", String[].class);

    final Object[] args = new Object[1];
    args[0] = new String[] { "1", "2"};
    method.invoke(null, args);
} catch (final Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T02:13:00.173

Perceptions 的答案看起来是正确的；如果您需要从不在类路径中的 Jar 加载，您可以使用 URL 类加载器

```
 try {
        URL[] urls;
        URLClassLoader urlLoader;

        urls = ...;

        urlLoader = new URLClassLoader(urls);

        @SuppressWarnings("rawtypes")
        Class runClass = urlLoader.loadClass(classToRun);

        Object[] arguments = new Object[]{args};
        Method mainMethod = runClass.getMethod("main", String[].class);
        mainMethod.invoke(null, arguments);
      } catch (Exception e) {
        e.printStackTrace();
      } 
```

# ios - 如何使用 Facebook 图形 API 检索好友总数

> ID：15582479
> 
> 赞同：1
> 
> 时间：2013-03-23T01:45:20.353
> 
> 标签：ios, xcode, facebook-graph-api, ios6, xcode4.6

我只需要使用适用于 iOS 的 Facebook 图形 API 图形 API 为用户获取好友总数。

我看到了显示如何检索用户列表（例如名称）的示例。但是，就我而言，我不需要获取好友列表，我只需要获取好友总数即可。因此，我认为获取整个列表只是为了计算总数是低效的。

任何提示我如何使用适用于 iOS 的 acebook graph API graph API 来获取朋友总数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T10:45:31.223

我找到了答案，只需使用 FBL 查询：`SELECT friend_count FROM user WHERE uid = me()`

所以完整的代码将是：

```
- (void)queryButtonAction {

    NSString *query =@"SELECT friend_count FROM user WHERE uid = me()";

    // Set up the query parameter
    NSDictionary *queryParam =
    [NSDictionary dictionaryWithObjectsAndKeys:query, @"q", nil];
    // Make the API request that uses FQL
    [FBRequestConnection startWithGraphPath:@"/fql"
                                 parameters:queryParam
                                 HTTPMethod:@"GET"
                          completionHandler:^(FBRequestConnection *connection,
                                              id result,
                                              NSError *error) {
                              if (error) {
                                  NSLog(@"Error: %@", [error localizedDescription]);
                              } else {
                                  NSLog(@"Result: %@", result);
                                  // show result
                                  NSArray *friendInfo = (NSArray *) [result objectForKey:@"data"];
                                  NSLog(@"result=%@",[friendInfo objectAtIndex:0]);
                                  NSDictionary *friend_count =[friendInfo objectAtIndex:0];
                                  NSString *numberoff= [friend_count objectForKey:@"friend_count"];
                                   NSLog(@"Result2: %@", numberoff);
                              }
                          }];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T10:59:33.937

重要的是要理解，结果可能会有所不同。

虽然 user_count 的 FQL 查询将为您提供朋友的实际数量（在您的个人资料中可见），但在图形 API 中计算朋友只会显示未完全禁用应用平台（在隐私设置/应用中）的朋友，例如我的朋友列表: 303 个“真正的朋友”，如果我算上图形 api 结果，只有 294 个！

# meteor - Meteor：Meteor.isServer 块中的代码是否可以从客户端读取？

> ID：15582481
> 
> 赞同：6
> 
> 时间：2013-03-23T01:45:46.160
> 
> 标签：meteor

我很困惑你什么时候会使用 isServer 块来放东西。显然，数据库调用等等。这会出现在客户端浏览器中吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T05:45:24.603

我建议不要使用它，而是按照[非官方流星常见问题解答中的建议将您的东西放在文件夹中](https://github.com/oortcloud/unofficial-meteor-faq)

即使您使用`if (Meteor.isServer) {...}`此块，如果您不使用上面的文件夹结构（即放入`/server`. 但它会忽略其中的所有代码。

在服务器端代码上，您将放置您只想在服务器上运行的代码，即发布功能，以及更敏感且用户不应该访问的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-17T14:53:21.277

我认为它确实会发送到客户端，除非它在服务器文件夹中。为了回应关于共享全局变量的评论之一，我一直在使用这种模式。分别在客户端和服务器文件夹中创建相同的全局变量，并在这些文件夹之外创建任何共享代码。通过测试来初始化每个地方的全局变量，看它是否已经存在。

```
MyVar = typeof MyVar === 'undefined' ? {} : MyVar;
```

然后，只需将方法放在需要它们的地方。例如，我将有一个 User 对象，该对象带有一个测试用户是否被授权的方法。我将在服务器全局用户上声明一次方法，在客户端全局用户上声明一次。这些方法不同，因为服务器版本会检查客户端上不可用的用户对象上的自定义属性。然后，在客户端和服务器上运行的 Meteor.methods 方法中，您可以调用授权方法，它会根据它是在客户端还是服务器上运行而调用不同的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-27T09:31:50.463

我今天问自己同样的问题，偶然发现了这个包裹：

[https://github.com/mquandalle/meteor-minifiers](https://github.com/mquandalle/meteor-minifiers)

似乎 Meteor`Meteor.isServer`默认情况下不会删除块。请参阅此讨论：

[https://groups.google.com/forum/#!topic/meteor-talk/iHat47f6iGE](https://groups.google.com/forum/#!topic/meteor-talk/iHat47f6iGE)

到目前为止我还没有使用它，但它看起来很有希望。

如果您不想使用额外的包，我建议使用`client`and`server`文件夹。只有文件`client`夹中的文件被发送到客户端。

# c++ - QTableView 大小问题

> ID：15582483
> 
> 赞同：1
> 
> 时间：2013-03-23T01:46:07.483
> 
> 标签：c++

我正在使用 Qt 4.2。我有一个使用 QTableView 和 QAbstractTableModel 的带有两个单独表格的窗口。表格似乎在行结尾下方和列结尾右侧有额外的空间。到目前为止，我对其他窗口的解决方案是计算表格的大小（基于单元格大小，加上一点额外的边框）并设置固定的宽度和高度。这种解决方案对于具有不同大小列的表来说是一种痛苦。我正在寻找一种解决方案，其中我的 QTableView 类不必设置自己的固定大小，而是表格只在最后一行和最后一列结束。我不想使用 setStretchLastColumn()。任何让这些表正常运行而无需计算和设置固定大小的建议都会非常有帮助。谢谢。

# javascript - Javascript：基于多个变量名编译字符串

> ID：15582485
> 
> 赞同：0
> 
> 时间：2013-03-23T01:46:20.680
> 
> 标签：javascript

这应该很简单，而且像往常一样，由于我自学代码的方式不够彻底，我可能会忽略一些东西。希望这是有道理的......

在一个 php 循环中，我有这个：

```
var key = <?php echo json_encode($key); ?>;
var id<?php echo $key;?> = <?php echo json_encode($value['Claim']['id']); ?>;
var point<?php echo $key;?> = <?php echo json_encode($value['Claim']['point']); ?>; 
```

就像我想要的那样评估。所以 id2 等于 id2 应该是什么，等等。

然后稍后我需要调用这些变量，如下所示：

```
var takeurl = '/api/response.json?point='+ point + '&id=' + id; 
```

除了我希望“point”和“id”成为“point2”或“point4”的值，或者简而言之，point+key。

如果我把它写成

```
var takeurl = '/api/response.json?point='+ point + key + '&id=' + id; 
```

它返回“point”的值加上“key”的值，而不是 point2 或 point3 的值。

然后我意识到，一开始，在声明这些值时，我不应该一直点击 php。我应该能够做类似的事情：

```
var key = <?php echo json_encode($key); ?>;
var id[key] = <?php echo json_encode($value['Claim']['id']); ?>;
var point{"key"} = <?php echo json_encode($value['Claim']['point']); ?>; 
```

然后使用相同的约定创建新变量。我读过类似的问题，其中答案涉及使用数组，但同样，这一切都在一个更大的 php 循环中，所以我认为这不适合这里的情况。

对不起，我希望这很清楚。我在这个上赢得了我的用户名。想法？

编辑添加：问题与我上面解释的有点不同。我的代码显然是在提取循环中出现的最终变量的值（好像我根本没有通过“关键”区别来定义它们，而只是定义了“点”五次）。我担心我根本没有意义。这是一些代码，因此您可以看到发生了什么：codepad.org/ETX5dI6C

例如，当单击页面上的第四个链接时，我需要的是拉取 id4 和 point4 的值。相反，无论我单击哪个链接，它都会传递最后定义的 id5 和 point5 的变量。我不明白？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T01:53:21.537

这有点讨厌，但您可以像这样访问它们：

```
window['point' + key] 
```

由于这些是全局变量，它们实际上是窗口对象的属性，因此可以使用括号语法来引用它们。

虽然这等同于`window.point5`when `key == 5`，但请注意这`window.point+key`不起作用。

所以完整的解决方案将变为：

```
var takeurl = '/api/response.json?point='+ window['point' + key] + '&id=' + window['id' + key]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T01:57:10.080

您的问题是您正在创建一个字符串`point + key`，其值`point`等于 的值加上 的值`key`。放你想要的就是值`"point" plus key`。

所以你要做的是动态命名你分配给窗口对象的变量：

```
window[ "point" + key ] 
```

这将（假设关键是`3`）评估`window.point3`您需要的。

# iphone - 防止子视图在其 Superview 转换时进行转换

> ID：15582495
> 
> 赞同：1
> 
> 时间：2013-03-23T01:48:25.000
> 
> 标签：iphone, ios, cocoa-touch, uiview, cgaffinetransform

我有以下设置。我有一个call ，其中包含一个被调用`UIView`的。可以使用一些需要在. 在其 drawRect 方法中有一些绘图代码需要在转换时更新。`parentView``UIView``childView``parentView``parentView``childView``parentView`

我注意到当我变换`parentView`（缩放或旋转）时，`childView`也会自动变换。问题是，虽然我确实希望在 上启动旋转变换，但`childView`我不希望它是缩放的，我宁愿执行它的绘图代码。

所以我的问题是，处理这种情况的好方法是什么？我注意到当我在转换后调用“ `setNeedsDisplay`”时，它不会被执行。`childView``parentView`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T02:20:45.897

不要转换父视图；转换子视图的同级。

换句话说，您当前的设置如下所示：

```
transformedView
    childView 
```

相反，请执行以下操作：

```
parentView
    transformedView
    childView 
```

这样转化不会影响到孩子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T23:28:42.463

我必须将旋转应用于`parentView`，然后设置 和 的 bounds 属性`parentView`来`childView`调整它的大小。然后我能够成功地重新绘制`childView`。`drawRect`底线是，尽管我认为如果您在子视图上设置转换，我认为您将不得不在其子视图中使用它。我尝试单独设置变换，所有变换的时间都搞砸了。布伦特原油的上述情况在某些情况下也可能派上用场。

# java - 如何在一个类中，使用不同类的属性来找出另一个属性。（爪哇）

> ID：15582502
> 
> 赞同：0
> 
> 时间：2013-03-23T01:49:09.570
> 
> 标签：java

对不起，如果我在这里含糊不清，我也会为你们发布我的代码。我是初学者，所以对我轻松一点。

我有一个名为 student 的类，它有一个 int id 和另一个 String 名称。我为 GUI 创建了另一个类。它有一个弹出窗口并有一个 id 字段。我想输入 ID 并从该 ID 中获取名称。我不知道该怎么做，我已经被困了好几个小时。我有点慢赶上，所以有人可以帮助我吗？我不太擅长继承。（另外，我还有另外两门课，但我认为它们在这里不会有任何帮助。

学生班

```
public class Student {
    private int id;
    private String name;
    private ArrayList<Course> regCourses;

    public int getId() {
        return id;
    }

    public String getName() {
        return name;
    }

    public ArrayList<Course> getRegCourses() {
        return regCourses;
    }

    public Student(int i, String n) {
        id = i;
        name = n;
        regCourses = new ArrayList<Course>();
    }

    public String toString() {
        String answer = id + " " + name + " - Registered Courses: ";
        if (regCourses.size() == 0)
            answer += "NONE";
        else {
            for (int i = 0; i < regCourses.size(); i++) {
                answer += regCourses.get(i).getDepartment().getId()
                        + regCourses.get(i).getCode();
                if (i != regCourses.size() - 1)
                    answer += ", ";
            }
        }
        return answer;
    }

    public void registerFor(Course c) {
        if (!isRegisteredInCourse(c)) {
            // Register
            regCourses.add(c);
            if (!c.getClassList().contains(this)) {
                c.getClassList().add(this);
                if (!c.getDepartment().getStudentList().contains(this))
                    c.getDepartment().getStudentList().add(this);
            }
        }
    }

    public boolean isRegisteredInCourse(Course c) {
        return regCourses.contains(c);
    }
} 
```

这是另一个类中的搜索代码。

```
public class MainGUIWindow extends JFrame implements ActionListener {
    JLabel studentID, studentName, currentRegCourses;
    JButton search, regForCourse, withdraw;
    JTextField idField, nameField;
    JScrollPane courseScrollList;

    public MainGUIWindow(String title) {
        super(title);

        //GUI STUFF
    }

    public void actionPerformed(ActionEvent e) {
        if (e.getSource() == search) {
            if (idField.getText() != null) {
                int id = Integer.parseInt(idField.getText());
                Student temp = null;
                                //CODE GOES HERE

            }
        }
    }

    public static void main(String[] args) {
        new MainGUIWindow("Student Administration System").setVisible(true); 
```

此外，如果需要，这些都是我的 java 文件。 [http://www.filehosting.org/file/details/426633/JavaCode-SO.zip](http://www.filehosting.org/file/details/426633/JavaCode-SO.zip)

编辑：还有 2 个类是我的测试程序，其中包含数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T02:02:24.210

您可以将学生存储在哈希图或树图中，然后查找它们

IE

```
HashMap<Integer,Student> studentMap = new HashMap<>();

studentMap.put(matt.getId(), matt);

.....

Student s = studentMap.get(lookupId);  /* Retrieve based on Student id*/ 
```

# c++ - STL 中是否有排序容器？

> ID：15582504
> 
> 赞同：43
> 
> 时间：2013-03-23T01:49:32.687
> 
> 标签：c++, sorting, vector, stl, container-data-type

STL 中是否有排序容器？

我的意思是：我有一个`std::vector<Foo>`，`Foo`定制的课程在哪里。我还有某种比较器，可以比较类的字段`Foo`。

现在，在我的代码中某处我正在做：

```
std::sort( myvec.begin(), myvec.end(), comparator ); 
```

这将根据我在比较器中定义的规则对向量进行排序。

现在我想在`Foo`该向量中插入一个类元素。如果可以的话，我只想写：

```
 mysortedvector.push_back( Foo() ); 
```

并且会发生的是向量将根据比较器将这个新元素放在它的位置。

相反，现在我必须写：

```
myvec.push_back( Foo() );
std::sort( myvec.begin(), myvec.end(), comparator ); 
```

这只是浪费时间，因为向量已经排序，我所需要的只是适当地放置新元素。

现在，由于我的程序的性质，我不能使用`std::map<>`，因为我没有键/值对，只有一个简单的向量。

如果我使用`stl::list`，我需要在每次插入后再次调用 sort 。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-03-23T01:51:57.130

是的，[`std::set`](http://en.cppreference.com/w/cpp/container/set)，[`std::multiset`](http://en.cppreference.com/w/cpp/container/multiset)，[`std::map`](http://www.cplusplus.com/reference/map/map/)和[`std::multimap`](http://www.cplusplus.com/reference/map/multimap/)都使用[`std::less`](http://en.cppreference.com/w/cpp/utility/functional/less)默认比较操作进行排序。使用的底层数据结构通常是平衡的二叉搜索树，例如红黑树。因此，如果您向这些数据结构添加一个元素，然后遍历包含的元素，则输出将按排序顺序排列。将 N 个元素添加到数据结构的复杂度将为 O(N log N)，或者与使用任何常见的 O(log N) 复杂度排序对 N 个元素的向量进行排序相同。

在您的特定情况下，因为您没有键/值对，`std::set`或者`std::multiset`可能是您最好的选择。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2018-12-12T10:02:55.100

我想扩展杰森的[回答](https://stackoverflow.com/a/15582519/2675154)。我同意 Jason 的观点，对于您的具体情况，要么 要么[`std::set`](http://en.cppreference.com/w/cpp/container/set)是[`std::multiset`](http://en.cppreference.com/w/cpp/container/multiset)最佳选择。我想提供一个示例，以帮助您进一步缩小选择范围。

假设您有以下课程`Foo`：

```
class Foo {
public:
    Foo(int v1, int v2) : val1(v1), val2(v2) {};
    bool operator<(const Foo &foo) const { return val2 < foo.val2; }
    int val1;
    int val2;
}; 
```

在这里，`Foo`重载`<`运算符。这样，您无需指定显式比较器函数。因此，您可以通过以下方式简单地使用 a`std::multiset`而不是 a `std::vector`。您只需替换`push_back()`为`insert()`：

```
int main()
{
    std::multiset<Foo> ms;
    ms.insert(Foo(1, 6));
    ms.insert(Foo(1, 5));
    ms.insert(Foo(3, 4));
    ms.insert(Foo(2, 4));

    for (auto const &foo : ms)
        std::cout << foo.val1 << " " << foo.val2 << std::endl;

    return 0;
} 
```

输出：

> 3 4
> 2 4
> 1 5
> 1 6

正如你所看到的，容器是`val2`根据类的成员排序的`Foo`，基于`<`操作符。但是，如果您使用`std::set`而不是 a `std::multiset`，那么您将获得不同的输出：

```
int main()
{
    std::set<Foo> s;
    s.insert(Foo(1, 6));
    s.insert(Foo(1, 5));
    s.insert(Foo(3, 4));
    s.insert(Foo(2, 4));

    for (auto const &foo : s)
        std::cout << foo.val1 << " " << foo.val2 << std::endl;

    return 0;
} 
```

输出：

> 3 4
> 1 5
> 1 6

在这里，缺少 4 的第二个`Foo`对象`val2`，因为 a`std::set`只允许唯一的条目。条目是否唯一取决于提供的`<`运算符。在此示例中，`<`操作员将`val2`成员相互比较。因此，如果两个`Foo`对象的`val2`成员具有相同的值，则它们是相等的。

因此，您的选择取决于您是否要存储`Foo`基于运算符可能相等的对象`<`。

[Ideone 上的代码](https://ideone.com/qYpalf)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-01-30T17:17:45.367

C++ 确实有排序容器，例如 std::set 和 std::map

```
int main() 
{ 
    //ordered set
    set<int> s; 
    s.insert(5); 
    s.insert(1); 
    s.insert(6); 
    s.insert(3); 
    s.insert(7); 
    s.insert(2); 

    cout << "Elements of set in sorted order: "; 
    for (auto it : s) 
        cout << it << " "; 

    return 0; 
} 
```

输出：按排序顺序排列的集合元素：1 2 3 5 6 7

```
int main() 
{ 
    // Ordered map 
    std::map<int, int> order; 

    // Mapping values to keys 
    order[5] = 10; 
    order[3] = 5; 
    order[20] = 100; 
    order[1] = 1; 

   // Iterating the map and printing ordered values 
   for (auto i = order.begin(); i != order.end(); i++) { 
       std::cout << i->first << " : " << i->second << '\n'; 
} 
```

输出：
1：1

3 : 5

5 : 10

20 : 100

# javascript - 使用 javascript 更改图像源

> ID：15582507
> 
> 赞同：0
> 
> 时间：2013-03-23T01:49:56.447
> 
> 标签：javascript, image, src

所以我是javascript新手，发现这个可以解决我的问题：

[使用 javascript 更改图像源](https://stackoverflow.com/questions/7312553/change-image-source-with-javascript)

但是这个例子对我不起作用。

```
<script type="text/javascript">
  function changeImage(a) {
    document.getElementById("img1").src=a;
  }
</script> 
```

和

```
<table align=left width="896px" class="tableCategories">
  <tr class="trCategories">
    <td class="tdCategories">
      <img id="img1" src="./icon/menu/Essen3.png" onclick='changeImage(Shopping3.png);'/>
    </td>
  </tr>
</table> 
```

因此，如果我单击图像，它不会自行改变。图片的路径是正确的。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T01:51:56.090

改变

```
<img id="img1" src="./icon/menu/Essen3.png" onclick='changeImage(Shopping3.png);'/> 
```

到

```
<img id="img1" src="./icon/menu/Essen3.png" onclick='changeImage("./icon/menu/Shopping3.png");'/> 
```

一个更好的 javascript 函数将是可重用的。试试这个：

```
function changeImage(obj,img) {
  obj.src = img;
} 
```

和以下 HTML 代码：

```
<img id="img1" src="./icon/menu/Essen3.png" onclick='changeImage(this,"./icon/menu/Shopping3.png");'/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T01:52:42.647

您需要将 Shopping3.png 作为字符串传递。

```
<img id="img1" src="./icon/menu/Essen3.png" onclick="changeImage('Shopping3.png');"/> 
```

# c++ - 包含指针的对象的 C++ 预分配向量

> ID：15582508
> 
> 赞同：0
> 
> 时间：2013-03-23T01:50:13.463
> 
> 标签：c++, vector

我有以下结构：

```
struct CacheNode {
  set<int> *value;
  int timestamp;
  CacheNode() : value(new set<int>()), timestamp(0) {}
}; 
```

我预先分配了一个向量，如下所示：

```
vector<CacheNode> V(10); 
```

当我这样做时，`CacheNode`向量中的每个元素都指向`set<int>`其`value`字段中的相同元素。尤其是，

```
 V[0].value->insert(0);
  cout << V[1].value->size() << endl; 
```

打印出来`1`而不是`0`我想要的。

预分配向量（或声明结构）以使每个向量`CacheNode`都有自己的`set<int>`实例的正确方法是什么？

（注意：我确实需要`value`成为指向集合的指针，因为在我的应用程序中，某些 CacheNode 可以共享集合。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T01:54:25.587

`vector<CacheNode> V(10);`创建一个初始`CacheNode`对象，然后将其复制 10 次。所以你有 10 个相同的对象。

您可以使用[generate_n](http://en.cppreference.com/w/cpp/algorithm/generate_n)：

```
std::vector<CacheNode> v;
std::generate_n(std::back_inserter(v), 10u, [](){ return CacheNode{}; }); 
```

这是一个[示例程序](http://coliru.stacked-crooked.com/view?id=3d5d954e44d1bbf4570eea32c487285f-61c3814520a8d4318f681038dc4b4da7)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-23T01:55:48.360

您违反了 3 的规则。您使用非平凡构造函数创建了一个对象，但未能创建析构函数或复制构造函数或`operator=`.

`std::vector<blah> foo(10)`创建一个默认构造的`blah`，并在 中制作 10 个副本`foo`。因为你违反了 3 的规则，所以这 10 个副本都是相同的。

最简单的方法是取消`new`：

```
struct CacheNode {
  std::set<int> value;
  int timestamp;
  CacheNode() : value(), timestamp(0) {}
}; 
```

另一种方法是使用 a`unique_ptr`进行生命周期管理，并明确复制：

```
struct CacheNode {
  std::unique_ptr<std::set<int>> value;
  int timestamp;
  CacheNode() : value(new std::set<int>()), timestamp(0) {}
  CacheNode(CacheNode&&) = default; // C++11 feature
  CacheNode(CacheNode const& other):value(new std::set<int>( *other.value ) ), timestampe(other.timestamp) {}

  CacheNode& operator=(CacheNode const& other) {
    value.reset(new std::set<int>(*other.value));
    timestampe = other.timestamp;
    return *this;
  }
  CacheNode& operator=(CacheNode&& other) = default;
  // no need for ~CacheNode, unique_ptr handles it
}; 
```

当你想`std::set<int>`取出你的`CacheNode`，调用`CacheNode().value.release()`并存储结果`std::set<int>*`。

`std::shared_ptr<std::set<int>>`将允许共享所有权`std::set`。

还有其他方法，包括使您的`vector`商店指针指向`CacheNode`，创建`value_ptr<T>`执行值语义的模板等。

在 C++11 中，这些相对容易和安全，因为`std::vector`会移动事物，并且在 a 上移动语义`value_ptr<T>`不会创建新的`T`.

`std::set<int>`我对您在不同人之间共享的计划持怀疑态度`CacheNode`，因为总的来说这是难闻的气味-事物的所有权/生命周期应该很清楚，在这种情况下，您有一些`CacheNode`拥有，`std::set<int>`而另一些则不拥有（因为他们共享所有权）。A`shared_ptr`可以解决这个问题，但通常有更好的解决方案。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-23T01:57:59.430

您将希望使用`vector.assign(10, CacheNode())`您所做的主要是保留空间的一种方式。

另外，您应该按照其他人所说的去做，提供虚拟析构函数等。

# mysql - 我怎样才能一次左加入A和B，同时右加入B和C？

> ID：15582521
> 
> 赞同：-1
> 
> 时间：2013-03-23T01:52:05.167
> 
> 标签：mysql, database

我有三个 A、B、C 表。

我怎样才能一次左加入A和B，同时右加入B和C？

例如，如果我有这些表：订单、产品、用户，我想要这样的查询：

```
SELECT Product.title, User.username, Order.id
FROM Order
/* relations: */
Order LEFT JOIN Product
Product RIGHT JOIN User
/* with this condition: */
ON Order.ProductID = Product.ID
ON Product.UserID = User.ID 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T02:04:42.227

我不确定你在问什么，但是为了让你的上述语法正常工作，试试这个：

```
SELECT Product.title, User.username, Order.id
FROM Order
    LEFT JOIN Product
         ON Order.ProductID = Product.ID
    RIGHT JOIN User
         ON Product.UserID = User.ID 
```

根据您想要的结果，我更喜欢使用`LEFT JOINs`可读性 - 所以如果您想要所有用户，无论他们是在产品表还是订单表中，那么这将起作用：

```
SELECT U.username, P.title, O.id
FROM User U
    LEFT JOIN Product P
         ON P.UserId = U.Id
    LEFT JOIN Order O
         ON O.ProductID = P.ID 
```

# wxpython - 添加一个新按钮 - 重叠 WXpython

> ID：15582525
> 
> 赞同：0
> 
> 时间：2013-03-23T01:52:38.537
> 
> 标签：wxpython

我试图创建一个面板并尝试在面板内添加几个按钮，但由于某种原因，只显示“添加”按钮，

```
import wx

class MyPanel(wx.Panel):
    def __init__(self,parent, id, pos,size, style):
        wx.Panel.__init__(self,parent,id,pos,size,style)
        self.BackgroundColour = 'RED'
        hbox1 = wx.BoxSizer(wx.HORIZONTAL)

        hbox1.Add(wx.Button(self,label="Add"),flag=wx.LEFT)      
        #hbox1.Add((-1,10))
        hbox1.Add(wx.Button(self,label="Update"),flag=wx.RIGHT)
        #hbox1.Add(wx.Button(self,label="Delete"),flag=wx.LEFT, border=20)
        #hbox1.Add(wx.Button(self,label="Add"),flag=wx.LEFT, border=20)
        #hbox1.Add(wx.Button(self,label="Update"),flag=wx.LEFT, border=20)
        #hbox1.Add(wx.Button(self,label="Delete"),flag=wx.LEFT, border=20)

class MyTreeCtrl(wx.TreeCtrl):
    def __init__(self, parent, id, pos, size, style):
        wx.TreeCtrl.__init__(self, parent, id, pos, size, style)

class Example(wx.Frame):

    def __init__(self, parent, title):
        super(Example, self).__init__(parent, title=title, size=(700, 700))

        panel = wx.Panel(self)
        panel.SetBackgroundColour('#4f5049')

        vbox = wx.BoxSizer(wx.HORIZONTAL)

        tID = wx.NewId()
        self.tree = MyTreeCtrl(panel,tID,wx.DefaultPosition,wx.DefaultSize,wx.TR_HAS_BUTTONS)
        tID = wx.NewId()
        self.lefthandpanel = MyPanel(panel,tID,wx.DefaultPosition,wx.DefaultSize,wx.TR_HAS_BUTTONS)
        vbox.Add(self.tree, 1, wx.EXPAND | wx.ALL, 20)
        vbox.Add(self.lefthandpanel, 1, wx.EXPAND | wx.ALL, 20)
        panel.SetSizer(vbox)

        isz = (16,16)
        il = wx.ImageList(isz[0], isz[1])
        fldridx     = il.Add(wx.ArtProvider_GetBitmap(wx.ART_FOLDER,      wx.ART_OTHER, isz))
        fldropenidx = il.Add(wx.ArtProvider_GetBitmap(wx.ART_FILE_OPEN,   wx.ART_OTHER, isz))
        fileidx     = il.Add(wx.ArtProvider_GetBitmap(wx.ART_NORMAL_FILE, wx.ART_OTHER, isz))

        self.tree.SetImageList(il)
        self.il = il

        # NOTE:  For some reason tree items have to have a data object in
        #        order to be sorted.  Since our compare just uses the labels
        #        we don't need any real data, so we'll just use None below for
        #        the item data.

        self.root = self.tree.AddRoot("The Root Item")
        self.tree.SetPyData(self.root, None)
        self.tree.SetItemImage(self.root, fldridx, wx.TreeItemIcon_Normal)
        self.tree.SetItemImage(self.root, fldropenidx, wx.TreeItemIcon_Expanded)

        for x in range(15):
            child = self.tree.AppendItem(self.root, "Item %d" % x)
            self.tree.SetPyData(child, None)
            self.tree.SetItemImage(child, fldridx, wx.TreeItemIcon_Normal)
            self.tree.SetItemImage(child, fldropenidx, wx.TreeItemIcon_Expanded)

            for y in range(5):
                last = self.tree.AppendItem(child, "item %d-%s" % (x, chr(ord("a")+y)))
                self.tree.SetPyData(last, None)
                self.tree.SetItemImage(last, fldridx, wx.TreeItemIcon_Normal)
                self.tree.SetItemImage(last, fldropenidx, wx.TreeItemIcon_Expanded)

                for z in range(5):
                    item = self.tree.AppendItem(last,  "item %d-%s-%d" % (x, chr(ord("a")+y), z))
                    self.tree.SetPyData(item, None)
                    self.tree.SetItemImage(item, fileidx, wx.TreeItemIcon_Normal)
                    #self.tree.SetItemImage(item, smileidx, wx.TreeItemIcon_Selected)

        print self.tree
        self.Centre()
        self.Show() 

if __name__ == '__main__':
        app = wx.App()
        Example(None,title="Border")
        app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T10:10:55.080

在构造函数中添加`self.SetSizer(hbox1)`按钮后添加。`MyPanel`这样你就可以告诉面板使用布局。

# php - 根据其他表的结果从 MySQL 中提取记录

> ID：15582528
> 
> 赞同：1
> 
> 时间：2013-03-23T01:52:44.393
> 
> 标签：php, mysql

这是表格布局：

表 1：Id - U1 - U2 - 状态

表 2 Id - U1 - U2 - 类型 - 状态

我需要选择表 2 中的所有记录，其中 U1 或 U2 与表 1 中 U1 或 U2 中找到的数字相匹配，状态设置为已确认。

这就是我所拥有的，但它远非高效，并且不会根据创建时间对记录进行排序，而是将与每个 ID 关联的所有记录集中在一起。

```
 $q = "SELECT `U1`, `U2` FROM `Table1` WHERE `U1='{VALUE}' OR `U2`='{VALUE}' AND `Status`='Confirmed'; 
```

{Value} = 我们拥有的预存值。在执行该查询（同时循环）并确定表 1 中的哪个值**不**等于我们的预定义值（使其成为 $ur ）之后：

```
 $q2 = "SELECT * FROM `Table2` WHERE `U1`='".mysql_real_escape_string($ur)."' OR `U2`='".mysql_real_escape_string($ur)."'"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T02:41:04.893

在单个查询中（未经测试）：

```
SELECT T2.* FROM (
    SELECT U2 AS VALUE FROM Table1 
    WHERE U1 = :value AND STATUS = "Confirmed"
    UNION
    SELECT U1 AS VALUE FROM Table1 
    WHERE U2 = :value AND STATUS = "Confirmed"
) AS T1, Table2 AS T2
WHERE T2.U1 = T1.VALUE  OR T2.U2 = T1.VALUE
ORDER BY T2.ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T02:02:35.667

根据你的说法：

*我需要选择表 2 中的所有记录，其中 U1 或 U2 与表 1 中 U1 或 U2 中找到的数字相匹配，状态设置为已确认。*

```
SELECT T2.*
FROM Table2 T2
   JOIN Table1 T1 ON 
      (T2.U1 = T1.U1 OR T2.U1 = T1.U2 OR T2.U2 = T1.U1 OR T2.U2 = T1.U2)
WHERE T2.Status = 'confirmed' 
```

# f# - F# - 类型增强 VS 类型扩展

> ID：15582534
> 
> 赞同：13
> 
> 时间：2013-03-23T01:53:58.087
> 
> 标签：f#, type-extension

F# 的类型增强和类型扩展之间到底有什么区别，我们真的需要两者吗？

是否存在一种比另一种更好的情况，反之亦然？

我之所以问，是因为我最近在 F# 中进行了一次讲座，讲师谈到了两者，然后评论说他看不出两者都包含在 F# 语言中的原因。

**更新：**

好的，所以***Vladislav Zorov***链接到一个页面，其中包含在定义自己的类型和扩展（或扩展？）外部类型时使用**类型增强的示例。**

***pad***链接到一个 MSDN 页面，他们称之为内部和可选**类型扩展**。

两者似乎都说明了同一件事。有人可以提供一个类型扩展的具体示例和另一个**类型****扩展**的具体示例，以便明确阐明这两件事到底是什么吗？

 *** * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-23T07:20:06.710

[MSDN 的类型扩展页面](http://msdn.microsoft.com/en-us/library/dd233211.aspx)中的以下位是相关的（强调我的）：

> 有两种形式的类型扩展，它们的语法和行为略有不同。*内在扩展*是与被扩展类型出现在同一命名空间或模块、同一源文件和同一程序集（DLL 或可执行文件）中的扩展。可选*扩展*是出现在被扩展类型的原始模块、命名空间或程序集之外的扩展。*当通过反射检查类型时，类型上会出现内在扩展，但可选扩展不会。可选扩展必须在模块中，并且仅当包含扩展的模块打开时它们才在范围内。*

可选扩展的目的很明确。它可以帮助您向不属于您的程序集的类型注入新功能。例如，FSharpx 使用它来创建[各种帮助](https://github.com/fsharp/fsharpx/blob/master/src/FSharpx.Core/Prelude.fs#L30)器来解析原始类型：

```
open System

type Boolean with
    static member parse x =
        match bool.TryParse(x) with
        | true,v -> Some v
        | _ -> None 
```

那你为什么需要内在扩展呢？答案是它的便利性。我发现将类型定义分解为具有明确目的的多个部分很有用。

在许多 F# 库中，我看到了以下模式的使用：*类型定义 -> 实用函数 -> 内部扩展*。通过这种方式，您可以在您的类型上定义复杂的实用函数，使它们在模块中可用，并且仍然可以直接在您的成员定义中使用它们。您可以查看 F# PowerPack 中的[Complex 类型](https://github.com/fsharp/powerpack/blob/master/src/FSharp.PowerPack/math/complex.fs#L13)以查看模式。

**编辑：**

老实说，我经常交替使用*类型扩展*和*类型扩充。*重要的是它们是内在的还是可选的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-23T02:05:30.067

它们是不同的东西。类型扩充，当在相同的命名空间、模块和源文件中定义时，在编译时实际上成为类型的一部分。类型扩展（也就是模块和源文件之外的类型的类型扩充）是使用 .NET 扩展方法实现的。

它们都使用相同的语法，唯一的区别是您提到的类型是否在相同的命名空间和程序集中，即您正在扩充自己的代码，并且可以在编译之前将其他方法添加到您的类型中。

来源：[http ://tomasp.net/blog/fsharp-iii-oop.aspx](http://tomasp.net/blog/fsharp-iii-oop.aspx)

**编辑：**

这是一个术语混淆，它们都指的是同一件事——*内在扩展*是第一类的*类型扩充*（即相同的命名空间和程序集），*可选扩展*是第二类的*类型扩充*（即第 3 方程序集，在博客文章这是`List<T>`扩充示例）。

我假设当您的讲师谈论*类型扩充*时，他指的是内在扩展，即第一类扩充，而当他谈论*类型扩充*时，他指的是可选扩充或第二类扩充。**

# php - date 函数中的第二个参数是什么意思？

> ID：15582537
> 
> 赞同：0
> 
> 时间：2013-03-23T01:54:03.040
> 
> 标签：php, date

谁能解释一下[*日期*](http://php.net/manual/en/function.date.php)函数的第二个参数？

```
string date ( string $format [, int $timestamp = time() ] ) 
```

它是做什么的，我的意思是它有什么用？除了今天我必须执行以下操作时，我从未使用过它：

```
echo date('Y-m-d',strtotime('+1 day')); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T01:58:03.340

> 返回根据给定格式字符串格式化的字符串，使用给定的整数**时间戳**或当前时间（如果没有给出时间戳）。换句话说，**timestamp**是可选的，默认为 time() 的值。

因此，如果您将其留空，您将以所选格式回显当前日期。

如果您按照示例中的操作并指定时间戳，它将格式化指定的时间戳。您的**strtotime**函数将 +1day 转换为整数或时间戳格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T01:56:51.383

默认情况下`date()`，假设您指的是“现在”。如果要将日期与“否”以外的任何其他日期时间一起使用，则需要使用时间戳指定它。

```
var_dump(date("Y-m-d") === date("Y-m-d", time())); // bool(true) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T01:58:09.683

这意味着您可以将 unix 时间表示为任何格式的字符串。您可以从数据库或使用 strtotime 获取 Unix 时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T02:04:00.677

第二个参数默认为当前日期/时间。

因此，如果要打印当前日期，请不要传递第二个参数：

```
echo date('Y-m-d'); 
```

如果要打印当前日期/时间以外的内容，例如从今天开始一周的日期：

```
echo date('Y-m-d', strtotime('+7 days')); 
```

# slider - Three.JS，有什么想法为 Three.js 创建滑动吗？

> ID：15582538
> 
> 赞同：1
> 
> 时间：2013-03-23T01:54:07.460
> 
> 标签：slider, three.js, webgl

我正在考虑为我的原型系统开发一些工具。我在以下链接中看到了一个功能，似乎对我也很有用。但我不知道如何实现它？任何想法？

[http://www.arcgis.com/home/item.html?id=9c0e319bfaff4d33a0fe2da97c2c3fd7](http://www.arcgis.com/home/item.html?id=9c0e319bfaff4d33a0fe2da97c2c3fd7)

谢谢！！！

![滑动工具](../Images/25678a64316e047479febb49e8cdf742.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:33:06.710

这可能不是最有效的解决方案，但您可以创建两个视口，都从同一个相机渲染场景，但在渲染右半部分的视口之前，设置`visible`墙壁的标志（以及其他必要的网格对象) 到`false`，并在渲染右侧场景后将这些标志重置为`true`。但是，这不会实现滑块。

# android - Android Google Map V2：自动打开信息窗口

> ID：15582540
> 
> 赞同：1
> 
> 时间：2013-03-23T01:54:33.380
> 
> 标签：android, google-maps, android-maps, google-maps-android-api-2

我正在开发一个使用谷歌地图的 Android 应用程序，到目前为止我已经创建了地图和标记。我一直在寻找一种在地图活动开始时默认打开我的信息窗口的方法，但我似乎找不到任何适用于 Android Google Map v2 的内容。

有没有这样做的功能？我发现的大多数示例都是针对 javascripts 的。

谢谢。

# c# - 如何使用滚动条跟踪插入到文本框中的文本

> ID：15582547
> 
> 赞同：0
> 
> 时间：2013-03-23T01:56:24.440
> 
> 标签：c#, scrollbar

我有一个带有滚动条的文本框（垂直启用）。当我写到 texbox 并且我的文本无法在文本框可用显示中显示时，它会启动滚动条功能。（这是滚动条的目的）但它不会跟随我。Ibeam 退出显示，我应该手动滚动给它。这是一件不合时宜的事情。我能做些什么来解决这个问题？是否有内置功能来解决这个问题？
这是

```
 resources.ApplyResources(this.textBox1, "textBox1");
        this.tableLayoutPanel1.SetColumnSpan(this.textBox1, 5);
        this.textBox1.Cursor = System.Windows.Forms.Cursors.IBeam;
        this.textBox1.HideSelection = false;
        this.textBox1.Name = "textBox1";
        this.textBox1.ReadOnly = true; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T02:02:52.670

您可以使用[ScrollToCaret](http://msdn.microsoft.com/en-GB/library/system.windows.forms.textboxbase.scrolltocaret.aspx)方法。将`TextChanged`事件处理程序附加到文本框，以便每次文本更改并滚动到插入符号所在的位置时都会调用它。

```
//attach handler
textBox1.TextChanged += new EventHandler(textBox1_TextChanged); 

private void textBox1_TextChanged(object sender, EventArgs e)
{
    //move the caret to the end to ensure it scrolls right to the bottom
    textBox1.SelectionStart = textBox1.Text.Length;

    //scroll to the caret
    textBox1.ScrollToCaret();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T02:00:31.983

关于 keydown 事件使用

```
this.textBox1.Select(this.textBox1.Text.Length-1, 0) 
```

# package - 包含 base64.h 的 Debian 软件包

> ID：15582551
> 
> 赞同：0
> 
> 时间：2013-03-23T01:56:42.877
> 
> 标签：package, base64, debian

我正在 Debian 上构建一个项目，但我收到一个错误 base64.h not found。

我需要为此安装一个软件包吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T02:03:13.960

您可以在[http://packages.debian.org](http://packages.debian.org)上搜索，例如[这个搜索所示](http://packages.debian.org/search?searchon=contents&keywords=base64.h&mode=exactfilename&suite=stable&arch=any)。

# ruby-on-rails - 外国人宝石是如何工作的？

> ID：15582557
> 
> 赞同：1
> 
> 时间：2013-03-23T01:57:37.513
> 
> 标签：ruby-on-rails, foreign-keys, foreigner

我正在查看外国人宝石并尝试创建一些外键。但是，gems[文档](https://github.com/matthuhiggins/foreigner)说您应该像这样创建外键 `add_foreign_key(from_table, to_table, options) 但是当我这样做时，它似乎向后工作。例如，我有 3 个模型，Entry、Ingredient 和一个名为 EntryIngredient 的关联。Entry通过EntryIngredient有很多的Ingredient，通过EntryIngredients有很多Entry，EntryIngredient属于这两者。然而，这是有效的代码：

```
class EntryIngredient < ActiveRecord::Base
  belongs_to :entry
  belongs_to :ingredient  
end

class CreateEntryIngredients < ActiveRecord::Migration
  def self.up
    create_table :entry_ingredients do |t|
      t.references :entry
      t.references :ingredient
      t.integer :quantity
      t.string :unit

      t.timestamps
    end
    add_index :entry_ingredients, [:entry_id, :ingredient_id]

    add_foreign_key :entry_ingredients, :entries, :dependent => :delete
    add_foreign_key :entry_ingredients, :ingredients, :dependent => :delete
  end

  def self.down
    drop_table :entry_ingredients
  end
end 
```

通过文档，我认为实际上应该像这样添加外键：

```
add_foreign_key :entries, :entry_ingredients, :dependent => :delete
add_foreign_key :ingredients, :entry_ingredients, :dependent => :delete 
```

但是当我运行迁移时，这会给我一个

```
Mysql2::Error: Key column 'entry_ingredient_id' doesn't exist in table: ALTER TABLE `entries` ADD CONSTRAINT `entries_entry_ingredient_id_fk` FOREIGN KEY (`entry_ingredient_id`) REFERENCES `entry_ingredient`(id) ON DELETE CASCADE 
```

有人可以向我解释这里发生了什么吗？为什么我有阅读障碍？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T23:24:58.653

我已经验证了这一点，如果有人认为我仍然没有得到它，请向我解释。但是，除非我的英语不好，否则我认为 gem 的文档记录不正确。正确的语法实际上是：

```
add_foreign_key(to_table, from_table, options) 
```

所以我会这样做`add_foreign_key :entry_ingredients, :entries, :dependent => :delete` 这个逻辑对我说，将外键添加到表entry_ingredients，从表条目作为entry_id，并带有选项......

虽然按照文档逻辑，我会使用`add_foreign_key :entries, :entry_ingredients, :dependent => :delete`对我说的这段代码，将外键从条目（作为 entry_id）添加到 entry_ingredients，带有选项......但是，实际上发生的是我们正在向条目添加外键，来自 entry_ingredients（作为 entry_ingredients_id）。这是错误的，而不是预期的结果。这是我在遵循文档方法来证明它时收到的错误：

```
Mysql2::Error: Key column 'entry_ingredient_id' doesn't exist in table: ALTER TABLE `entries` ADD CONSTRAINT `entries_entry_ingredient_id_fk` FOREIGN KEY (`entry_ingredient_id`) REFERENCES `entry_ingredients`(id) ON DELETE CASCADE 
```

我已在 github 上将此问题报告为问题，因此希望他修复文档。

# twitter-bootstrap - twitter bootstrap 表单水平排列字段 - 播放框架

> ID：15582560
> 
> 赞同：1
> 
> 时间：2013-03-23T01:58:01.747
> 
> 标签：twitter-bootstrap, playframework, playframework-2.0

我正在尝试使用 twitter 引导框架在游戏框架中构建一个表单。

我想在多行中排列控件。而且我还想拥有引导程序提供的验证消息。有没有办法做到这一点？

```
<form class="form">

    @****
    * This works
    *****@

    <div class="controls controls-row">
        <input type="text" id="inputWarning" placeholder="placeholder">
        <input type="text" id="inputWarning" placeholder="placeholder">
    </div>

    @****
    * Why doesn't this work?
    *****@
    <div class="controls controls-row">
        <div class="control-group warning">
            <label class="control-label" for="inputWarning">Input with warning</label>
            <div class="controls">
                <input type="text" id="inputWarning">
                <span class="help-inline">Something may have gone wrong</span>
            </div>
        </div>
        <div class="control-group warning">
            <label class="control-label" for="inputWarning">Input with warning</label>
            <div class="controls">
                <input type="text" id="inputWarning">
                <span class="help-inline">Something may have gone wrong</span>
            </div>
        </div>
    </div>

</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T06:46:50.230

您可以使用[Twitter 引导文档](http://twitter.github.com/bootstrap/base-css.html#forms)`form-horizontal`中描述的类来构建水平表单。

Play 提供了[表单模板助手](http://www.playframework.com/documentation/2.1.0/ScalaFormHelpers)，可以更轻松地呈现表单。不幸的是，Play 附带的 Twitter Bootstrap 模板助手不适用于横向表单，并且将[在下一个 play 版本中被弃用](https://github.com/playframework/Play20/issues/834)。

我认为最好的解决方案是编写自己的 Bootstrap 模板助手，例如 f.ex。`app/views/twitterBootstrapInput.scala.html`

```
@(elements: helper.FieldElements)  

<div class="control-group @if(elements.hasErrors) {error}">
  @if(elements.label.toString.nonEmpty) { <label class="control-label" for="@elements.id">@elements.label</label> }
  <div class="controls">
  @elements.input

    <p class="help-inline">@elements.infos.mkString(", ")</p>  
}  
    @if(elements.hasErrors) { <p class="help-block">@elements.errors.mkString(", ")</p> }  
  </div>
</div> 
```

然后，您可以像这样构建一个水平表单：

```
@(args...)

@import helper._
@implicitFieldConstructor = @{ FieldConstructor(twitterBootstrapInput.f) } 

@helper.form(routes.myRoute(args), 'class -> "form-horizontal") {
   @select(
     editOptions("highlightStyle"),
     Seq("abc" -> "def", "ghi" -> "jkl"),
     '_label -> "Source style:"
   )
} 
```

# css - 自定义 twitter-bootstrap 表。标题向左浮动

> ID：15582563
> 
> 赞同：4
> 
> 时间：2013-03-23T01:58:14.167
> 
> 标签：css, ruby-on-rails, ruby-on-rails-3, twitter-bootstrap

目前我正在为我的项目进行表格定制。我正在使用 Twitter Bootstrap rails gem (2.2.6)。但是，我认为这在 CSS 自定义方面应该不是问题。

所以基本上我想实现以下模型： ![在此处输入图像描述](../Images/44c6ed050c491d639884d96ff304c4e1.png)

但是，当我将半径边框放在任何东西上时，除非我`float`将它`left`或在块中显示它，否则我看不到圆形边框。请查看以下 jsfiddle：http: [//jsfiddle.net/zaEFz/2/](http://jsfiddle.net/zaEFz/2/)

但问题是：当向左浮动内容时，我松散了表格的结构。这意味着标题不再匹配内容。这么几个问题：

1.  如何将内容与标题对齐？如果使用浮动：左

2.  如何为每一行圆角？如果不使用 float:left 和 display:block

如果您回答应该没问题的问题之一:)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-23T03:15:07.300

可悲的是，`border-radius`不适用于`<tr>`标签 - 仅适用于`<th>`和`<td>`标签。但是你需要的风格在这些限制下是可以实现的。

### CSS

```
table {
  border-collapse: separate;
  border-spacing: 0 5px;
}

thead th {
  background-color: #006DCC;
  color: white;
}

tbody td {
  background-color: #EEEEEE;
}

tr td:first-child,
tr th:first-child {
  border-top-left-radius: 6px;
  border-bottom-left-radius: 6px;
}

tr td:last-child,
tr th:last-child {
  border-top-right-radius: 6px;
  border-bottom-right-radius: 6px;
} 
```

[jsFiddle](http://jsfiddle.net/zaEFz/4/)

![在此处输入图像描述](../Images/1bbce810edcd51c1076cd81cacb926d1.png)

**更新：**在 Firefox 上修复，简化的选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T02:15:43.893

如果你选择浮动/块解决方案，为了让事情排成一行，我认为你必须为`<td>`and指定一个固定的宽度`<th>`：

```
th, td {
    width: 40px;
    padding-left: 5px;
    padding-right: 5px;
} 
```

如果您想要不同的侧边距`<th>`并且`<td>`您必须相应地调整宽度以使总数匹配。

如果您不理会表格布局，解决方案似乎是将边界半径应用于 thead 的第一个和最后一个单元格而不是 tr。可能还需要其他技巧才能使事情正常进行。请参阅[如何仅在表头上创建圆角](https://stackoverflow.com/questions/9873936/how-to-create-rounded-corners-on-table-head-only)以及[如何在我的桌子上设置圆角边框和边框折叠：折叠？](https://stackoverflow.com/questions/8889567/how-can-i-have-a-rounded-border-on-my-table-and-border-collapse-collapse)以供参考。

# java - 按下后退按钮后立即进行方法调用（Android）

> ID：15582566
> 
> 赞同：0
> 
> 时间：2013-03-23T01:58:28.053
> 
> 标签：java, android, android-alertdialog, back

在给定的活动中，AlertDialog 将用户带入 WiFI 设置。然后，用户按下返回按钮以返回到所述活动。

但是，一旦按下后退按钮，我就需要进行方法调用。请注意，我不能简单地在活动中的以下代码之后添加该方法，因为这会影响用户必须与 AlertDialog 实例交互的时间。

**方法调用需要在 WIFI 设置菜单中按下后退按钮后立即进行**。请告诉我如何实现这一点。

这是代码：

```
alertDialog.setPositiveButton("Settings", new dialogInterface.OnClickListener() {
         @Override
         public void onClick(DialogInterface dialog, int which) {
          Intent intent = new Intent(Settings.ACTION_WIFI_SETTINGS);
          startActivity(intent);
         }
     }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T02:07:07.313

class member

```
private static final int WIFI_REQUEST = 1234; 
```

Use `startActivityForResult`

```
alertDialog.setPositiveButton("Settings", new dialogInterface.OnClickListener() {
     @Override
     public void onClick(DialogInterface dialog, int which) {
      Intent intent = new Intent(Settings.ACTION_WIFI_SETTINGS);
      startActivityForResult(intent, WIFI_REQUEST);
     }
 }); 
```

In the activity class

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent intent)
{
    super.onActivityResult(requestCode, resultCode, intent);

    switch (requestCode)
    {
         case WIFI_REQUEST:
              // Call your method here
              break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T02:10:08.110

You can `Override` the `onResume()` method of the calling `Activity`. As soon soon as the user presses the "back" `button` the `onResume()` method is sure to get called so you should be able to put your method call here

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T02:01:16.403

```
private boolean inwifisettings;

public void onClick(DialogInterface dialog, int which) {
    Intent intent = new Intent(Settings.ACTION_WIFI_SETTINGS);
    inwifisettings = true;
    startActivity(intent);
}

@Override public void onWindowFocusChanged(boolean hasFocus)
{
    if(inwifisettings & hasFocus)
    {
         doSomething();
         inwifisettings = false;
    }
} 
```

您不应为此目的使用 onResume() 或 startActivityForResult()/onActivityResult()。引用 Android 文档：http: [//developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

> *public void startActivityForResult (Intent intent, int requestCode, Bundle options)*
> 请注意，此方法只能与定义为返回结果的 Intent 协议一起使用。在其他协议中（例如 ACTION_MAIN 或 ACTION_VIEW），您可能无法得到预期的结果。例如，如果您正在启动的活动使用 singleTask 启动模式，它将不会在您的任务中运行，因此您将立即收到取消结果。
> 
> *public void onWindowFocusChanged (boolean hasFocus)*
> This is the best indicator of whether this activity is visible to the user.
> the system may display system-level windows (such as the status bar notification panel or a system alert) which will temporarily take window input focus without pausing the foreground activity.

# javascript - 在angularjs中使用没有哈希的ngView指令

> ID：15582568
> 
> 赞同：1
> 
> 时间：2013-03-23T01:58:40.523
> 
> 标签：javascript, angularjs

AngularJS 部分：

```
myApp.config(['$routeProvider','$locationProvider',function($routeProvider,$locationProvider) {
    $routeProvider.
    when('/main', {templateUrl: 'sub/main.tpl', controller: MainCtrl}).
    when('/users', {templateUrl: 'sub/users.tpl', controller: UserCtrl}).
    otherwise({redirectTo: '/main'});
}]); 
```

和我的 index.html

```
<a href="#/main">Main</a> | <a href="#/users">Display Users</a>
<div ng-view></div> 
```

它工作得很好，但我遇到了哈希问题。

当我尝试使用锚时，即：

```
<a href="#test">test</a> 
```

当我单击此锚点时，它正在调用主页。

当我们使用 ng-view 时是否有可能摆脱散列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T02:07:51.597

啊，因为 AngularJS 会重新路由你的 url。尝试使用 ng-href，

```
<a ng-href="#test">test</a> 
```

编辑：您可以尝试将锚的 id 更改为 angular url ..

# c# - C# 从列表中删除列表

> ID：15582569
> 
> 赞同：9
> 
> 时间：2013-03-23T01:58:54.870
> 
> 标签：c#, linq

如果满足某些要求，是否有一种方便的方法可以从另一个列表中删除嵌套列表？例如，假设我们有一组停靠点，我们决定将每个停靠点集合称为一条路线。每条路线都在列表中。然后我们决定将每条路线也放入一个列表中。

所以现在我们有了一个路由列表，有人决定某些类型的路由真的不应该包含在路由列表中。如何删除这些路线？这是一些示例代码：

示例类

```
public class Stops
{
    public Stops(int _param1, string _param2)
    {
        param1 = _param1;
        param2 = _param2;
    }

    public int param1 { get; set; }
    public string param2 { get; set; }
} 
```

创建列表

```
List<List<Stops>> lstRoutes = new List<List<Stops>>();
List<Stops> lstStops = new List<Stops>();
List<Stops> lstMoreStops = new List<Stops>();

// Create some stops
for (int i = 0; i < 5; i++)
{
    lstStops.Add(new Stops(i, "some text"));
}

lstRoutes.Add(lstStops);

// Create some more stops
for (int i = 5; i < 10; i++)
{
    lstMoreStops.Add(new Stops(i, "some more text"));
}

lstRoutes.Add(lstMoreStops); 
```

如何从 lstRoutes 中删除任何 param1 值大于 6 的路由？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T02:01:38.907

最简单的方法（可以适用于所有可枚举，而不仅仅是列表）：

```
lstRoutes = lstRoutes.Where(r => !r.Any(s => s.param1 > 6)).ToList(); 
```

这将创建一个新列表，因此将进行复制。最有效的方法是首先将这些项目“不添加”到列表中。第二个最有效的方法是从列表本身中删除项目，而不是构建一个新项目：

```
lstRoutes.RemoveAll(r => r.Any(s => s.param1 > 6)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T02:04:24.187

```
List<Stops> stop = lstRoutes.Find(delegate(List<Stops> stp) { return stp.param1 > 6; }); 
```

# ios - 为什么 AUNetSend 在 iOS 上不可用？（或任何替代建议）

> ID：15582571
> 
> 赞同：4
> 
> 时间：2013-03-23T01:59:35.757
> 
> 标签：ios, audiounit

我刚刚在两台 Mac 上使用garageband 尝试**了 AUNetSend**和**AUNetReceive 。**延迟非常低！然而，我很失望地发现 AUNetSend 在 iOS 上不可用。我正在尝试将音频从 iOS 设备流式传输到 Mac 上的接收器应用程序。有没有人有任何替代建议来做这件事？这就是我想要做的。它必须具有非常低的延迟，因此 GKVoiceChat 将无法工作。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-04T19:34:22.327

得益于 iConnectMIDI+ 设备，audio+midi 可以通过 USB 路由到 iPad，也可以路由到 PC/MAC

# ruby - 包含带有变量的 Rspec 示例

> ID：15582572
> 
> 赞同：4
> 
> 时间：2013-03-23T02:00:09.507
> 
> 标签：ruby, rspec

我有几组 rspecs，它们都包含一些共享示例。如果原始规范有一些变量集，我希望这些共享示例包含其他共享示例。基本上这就是我想要做的。

例子：

文件：`spec/test_spec.rb`

```
describe 'some thing' do
  let(:some_feature) { true }

  describe 'some tests' do
    include_examples "shared_tests" 
  end
end 
```

文件`spec/shared/shared_tests.rb`

```
shared_examples_for "shared_tests" do
  include_examples "feature_specific_tests" if some_feature
end 
```

正如预期的那样，这会引发如下错误：

```
undefined local variable or method `some_feature` 
```

有没有办法做到这一点？我想也许我可以`@some_feature`在一个`before(:all)`块中定义，然后`if @some_feature`在 中使用`shared_examples`，但总是这样`nil`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T02:09:15.943

重写答案以使其更清晰：

你有这个：

文件：spec/test_spec.rb

```
describe 'some thing' do
  let(:some_feature) { true }

  describe 'some tests' do
    include_examples "shared_tests" 
  end
end 
```

文件规范/shared/shared_tests.rb

```
shared_examples_for "shared_tests" do
  include_examples "feature_specific_tests" if some_feature
end 
```

将其更改为：

文件：spec/test_spec.rb

```
describe 'some thing' do

  describe 'some tests' do
    include_examples "shared_tests" do
      let(:some_feature) { true }
    end
  end
end 
```

文件规范/shared/shared_tests.rb

```
shared_examples "shared_tests" do
  if some_feature
    it_should_behave_like "feature_specific_tests"
  end

  # rest of your tests for shared example group
  # 'a logged in registered user goes here
end 
```

这一切都会很好地工作:-)

# gdb - 是否可以在 GDB 中命名断点？

> ID：15582577
> 
> 赞同：8
> 
> 时间：2013-03-23T02:00:43.307
> 
> 标签：gdb

有没有办法在 GDB 中标记/命名断点，以便更容易地识别它们，例如，`info b`？如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T02:12:00.090

不，没有办法做到这一点。

[http://users.ece.utexas.edu/~adnan/gdb-refcard.pdf](http://users.ece.utexas.edu/~adnan/gdb-refcard.pdf)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-03-04T06:02:15.630

虽然这对 的输出没有帮助，但`info b`对于稍后需要在命令中引用断点的其他目的，您可以将最后一个断点的断点编号存储`$bpnum`在另一个便利变量中，例如：

```
b foo.c:123
set $im_a_breakpoint = $bpnum
# ... set some more breakpoints and do some other stuff ...
disable $im_a_breakpoint 
```

再举一个例子，我现在将这种模式用于一项任务：我在 JIT 发出的代码中使用普通的 gdb 断点，这需要在代码实际发出后在地址上设置断点，因为 gdb 修改了代码。为此，我实际上从它自己的`commands`块中禁用了初始设置断点：

```
set $cur_stop_point = 0x41aaa
b basic_jit_cache::copy_block if ((uint32_t)this->code_ptr()) > ($gencode + $cur_stop_point)
set $cur_stop_point_setup_bp = $bpnum
commands
  b *($gencode + $cur_stop_point)
  disable $cur_stop_point_setup_bp
  cont
end 
```

# javascript - 在鼠标单击时触发 Hammer.js 拖动/滑动行为

> ID：15582578
> 
> 赞同：1
> 
> 时间：2013-03-23T02:00:56.967
> 
> 标签：javascript, horizontal-scrolling, hammer.js

我正在使用 Hammer.js 允许在窗格之间拖动。我还想允许一个替代操作，其中还有一个“下一步”按钮，您可以单击（用鼠标）或触摸（在触摸屏上），它会自动将幻灯片动画化到下一个屏幕。

想象一下[Hammer.js Carousel 演示](http://rawgit.com/EightMedia/hammer.js/1.1.3/tests/manual/carousel.html)，页面中间有一个“下一步”按钮。当您单击时，它就像您进行了向左滑动一样将您带到下一个窗格。

我想我应该能够通过以下方式触发：

```
var hammertime = Hammer('button.next-button').on("tap", function(event) {
    self.next();        
}); 
```

这似乎只是让我的鼠标进入拖动模式，而不是执行整个动画。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T07:09:12.867

我遇到了同样的问题。self.next() 显然不起作用，因为下一个函数未在 self 元素中定义。

您需要初始化一个新的轮播实例，然后调用 showPane(index) 方法：

> ```
>  var hammertime = Hammer(doubletapRegion).on("tap", function (event) {
>           console.log(event);
>           var carousel = new Carousel("#carousel");
>           carousel.init();
>           carousel.showPane(1);
>       }); 
> ```

此代码将移动第二个窗格（索引 = 1）。你当然可以在那里放一个变量。

# java - 了解我的程序中的变量范围

> ID：15582582
> 
> 赞同：0
> 
> 时间：2013-03-23T02:01:18.203
> 
> 标签：java, variables, scope

我是一个编程新手，并且已经成功地使用这个网站来学习和克服障碍。在我提出我的新问题之前，让我首先感谢所有给予如此巨大帮助的人。

我正在做我的第一个项目，并解决了阻止程序运行的小问题。但是，问题的解决方案是通过猜测找到的，我非常想知道为什么。这应该是一个可变范围问题。这是程序的一个片段？

```
public class AlladinLamp {    

JMenuBar jmBar;
JComboBox runners, raceDiv, days, months;       
JButton horseList, ok, clear;
JTextField[] jtxt;
JTextField raceName;
JTextArea message;
String status; 
JDialog dialog;
JPanel table, data, jp, middle;
JFrame jfr;     
String[] hNam ;                                    // string array holding horse names
int[] hNum, hVal;
int reducedFNH, id, vp, day, month, fnh, dv;       // fnh is the number of horses in the
                                                      race                  

Processes processes;
GridBagLayout gbLayout;  
GridBagConstraints gbc;  

...

public AlladinLamp()
{
 ...

public ActionListener horseListActionListener = new ActionListener()
{
  @Override
  public void actionPerformed( ActionEvent e )
  {
       Toolkit myKit = dialog.getToolkit();
       Dimension dialSize = myKit.getScreenSize();
       dialog.setLocation( dialSize.width/2, dialSize.height/4 );
       dialog.setSize( 260, 380 );
       dialog.setDefaultCloseOperation( JFrame.DISPOSE_ON_CLOSE );       

       jp.setLayout( gbLayout );  
       jtxt = new JTextField[ fnh ];            <--- array of textfields for the horse                                                                                                                 names

       JLabel label;
       String str;
       for( int i = 0; i < fnh; i++ )
       {                   
          gbc.gridx = 0;
          gbc.gridy = i;           
          str = new Integer( i+1 ) + ".";                  
          label = new JLabel( str ); 
          jp.add( label, gbc );         

          gbc.gridx = 1;
          gbc.gridy = i;
          gbc.ipady = 4;
          gbc.insets = new Insets(4,0,0,0);
          jtxt[i] = new JTextField(15);  
          jp.add( jtxt[i], gbc );               
       }
       JPanel buttonPanel = new JPanel();        
       ok = new JButton( "OK" );       
       ok.addActionListener( okActionListener );           
       buttonPanel.add( ok ); 
       clear = new JButton ( "CLEAR" );        
       clear.addActionListener( clearActionListener );   

       buttonPanel.add( clear );       
       JScrollPane jscr = new JScrollPane( jp );  
       dialog.add( jscr, BorderLayout.CENTER ); 
       dialog.add( buttonPanel, BorderLayout.SOUTH ); 
       dialog.setVisible( true );
   }
}; 
```

...

```
public ActionListener okActionListener = new ActionListener()
{
  @Override
  public void actionPerformed( ActionEvent e )
  {       
    hNam = new String[ fnh ];
    hNum = new int[ fnh ];
    hVal = new int[ fnh ];  
    for( int i = 0; i < fnh; i++ )
    {               
      hNam[i] = jtxt[i].getText();             
      hNum[i] = reduce( i + 1 );       
      hVal[i] = nameValue( hNam[i] );   
    }
    System.out.println( Arrays.toString(hNam) );
    System.out.println( Arrays.toString(hVal) );
    setID( hNam );                              
   dialog.setVisible( false );       
  }
}; 
```

...

该程序基本上是一个接受多种输入的 GUI。horselist 按钮的侦听器构建了一个 jDialog，它接受比赛中马名的输入。

OK 按钮的侦听器从文本字段中检索这些名称并将它们存储在 hNam 数组中。现在，当我将初始化 hNam、hVal 和 hNum 的前三行移动到构造函数中时，我得到一个源自下一条语句的 ArrayIndexOutOfBounds 异常`hNam[i] = jtxt[i].getText();`

为什么呢？？？

# ruby-on-rails - 调整大小错误 - Paperclip::Errors::NotIdentifiedByImageMagickError

> ID：15582583
> 
> 赞同：1
> 
> 时间：2013-03-23T02:01:32.447
> 
> 标签：ruby-on-rails, image, styles, paperclip

我刚刚在我的应用程序中安装了回形针来上传图像，在我尝试添加样式以调整图像大小之前，一切都运行良好。（在添加此代码之前，我可以很好地上传图片）

在pins.rb上：

```
has_attached_file :image, styles: { medium: "300x300>" } 
```

然后我将类添加到 _pin.html.rb 上：

```
<td><%= image_tag pin.image(:medium) %></td> 
```

但是现在，当我尝试上传图片时，出现错误：

```
Paperclip::Errors::NotIdentifiedByImageMagickError 
```

当我删除样式时，它工作正常（alebit 未调整大小），但调整大小中的某些东西把它搞砸了。我尝试了不同的文件类型和文件名。我在谷歌上搜索过这个错误，所有的解决方案都不适合我。最受欢迎的是降级可卡因，但当我尝试这样做时，我得到了以下信息：

```
Bundler could not find compatible versions for gem "cocaine":
In Gemfile:
paperclip (~> 3.4.1) ruby depends on
cocaine (~> 0.5.0) ruby

cocaine (0.3.2) 
```

我的 Rails 服务器正在返回消息：

```
Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-03-22 21:50:05 -0400
Served asset /application.js - 304 Not Modified (1ms)
[2013-03-22 21:50:05] WARN Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true 
```

有什么帮助吗？如果有帮助，我在[https://github.com/jeremybelcher/omrails](https://github.com/jeremybelcher/omrails)的 github 上有它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-11T01:59:30.453

要回答 Rich Peck 的问题，您不必直接将其添加到模型中 - 您可以将其添加到 /config/environments/development.rb 中。这样它只会影响您的开发版本，而不是您的生产版本。

所以就我而言，我只是添加了

`Paperclip.options[:command_path] = 'C:\Program Files\ImageMagick-6.8.7-Q16'`

到我的 config/environments/development.rb 文件的末尾，它就像一个魅力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T19:32:11.360

使用相同的 omrails 分配有完全相同的问题 - 重新启动我的机器解决了我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T02:19:47.937

您可能还没有安装 imagemagick，也没有在您的应用程序中指出它。

如[文档](https://github.com/thoughtbot/paperclip)中所述：

> 必须安装 ImageMagick 并且 Paperclip 必须可以访问它。要确保它确实如此，请在您的命令行上运行`which convert`（ImageMagick 实用程序之一）。这将为您提供安装该实用程序的路径。例如，它可能返回 /usr/local/bin/convert。
> 
> 在开发模式下，您可以将此行添加到 config/environments/development.rb)：

```
Paperclip.options[:command_path] = "/usr/local/bin/" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-16T11:39:20.057

[1-当我配置动态链接器运行时绑定以创建必要的链接并使用ldconfig 命令](http://linux.die.net/man/8/ldconfig)缓存到最新的共享库时，我遇到了同样的问题，并且我解决了它。

所以你需要使用以下命令：

```
sudo ldconfig /usr/local/lib 
```

[实际上，我建议使用how-to-install-image-magick-and-setup-paperclip](http://robmclarty.com/blog/how-to-install-image-magick-and-setup-paperclip)中的步骤重新安装 imagemagick 。

2-您需要在`development.rb`文件中添加以下代码：

```
Paperclip.options[:command_path] = "/usr/local/bin/" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-24T17:40:08.357

我遇到了这个问题，并通过包含**`Paperclip.options[:command_path] = "YOUR_PATH_TO_IMAGE_MAGICK"`在上传模型中来修复它（在我的情况下为 image.rb）：**

（Windows 7、Rails 4 和 Ruby 2.0）：

```
#Image Upload 
has_attached_file :image,
    :command_path => 'C:\RailsInstaller\ImageMagick',
    :styles => { :medium => "x300", :thumb => "x100" },
    :default_url => "xxxxx",
    :storage => :s3,
    :bucket => 'xxxxxx',
    :s3_credentials => S3_CREDENTIALS 
```

仍在努力使其成为开发和生产的条件

# php - 不在css中的单词切换

> ID：15582587
> 
> 赞同：1
> 
> 时间：2013-03-23T02:01:49.950
> 
> 标签：php, css, twitter-bootstrap, slidetoggle

我有一个用于 twitter bootstrap 的切换，其中一个词弹出并且没有留在切换中，我在下面的红色框中突出显示了混乱的词：

![在此处输入图像描述](../Images/4d53d912967259f8d3aad5ec5a2821c2.png)

我的代码是：

```
<div class=\"span9 space\">
                        <h3 class=\"title pull-left\">$name</h3> 

                        <link rel=\"stylesheet\" href=\"lib/prism/prism-light.css\">
                        <script src=\"lib/prism/prism.js\"></script>

                        <link rel=\"stylesheet\" href=\"toggle-switch.css\">

                        <form class=\"form-horizontal pull-right\">
                            <div class=\"control-group\">
                                <label class=\"control-label\"></label>
                                <div class=\"controls btn disabled switch switch-two\">
                                    <input id=\"week9\" name=\"view\" type=\"radio\" checked>
                                    <label for=\"week9\" onclick=\"\">Not Visited</label>

                                    <input id=\"month10\" name=\"view\" type=\"radio\"> 
                                    <label for=\"month10\" onclick=\"\">Visited</label>

                                    <span class=\"slide-button btn btn-warning\"></span>
                                </div>
                            </div>
                        </form>

                    </div> 
```

我正在使用的切换来自这里：

[http://ghinda.net/css-toggle-switch/bootstrap.html](http://ghinda.net/css-toggle-switch/bootstrap.html)

这也是我的实时代码：

[http://www.beerportfolio.com/breweryPage2.php?id=BSsTGw](http://www.beerportfolio.com/breweryPage2.php?id=BSsTGw)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T02:28:27.057

问题是 Switch 类不适合你的话，

您可以通过硬编码样式表中 switch 类中的宽度或将其添加到要拉伸的 div 中来解决它，这应该可以解决您的问题

```
<div class=\"controls btn disabled switch switch-two\" style=\"width: xxxpx !important;\"> 
```

而 xxx 代表你需要的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T02:14:40.963

我对您提供的演示进行了实时编辑，并使用了您的项目值，并添加了比所需宽度更小的宽度，并且“未访问”的已访问部分进入了新行。您可能希望切换项具有更大的宽度。

**编辑：** 看起来您确实修改了一些 css 或继承了一些 css，您可以随意修改它，但请尝试：toggle-switch line 210

```
.toggle label,
.toggle p,
.switch label {
    line-height: 13px;/*30px*/
} 
```

并删除：bootstrap.min.css 第 333 行

```
.form-horizontal .controls {
    margin-left: 0;/*180px*/
} 
```

# javascript - 浏览器循环使用setTimeout实现ghost writer效果

> ID：15582593
> 
> 赞同：2
> 
> 时间：2013-03-23T02:02:29.933
> 
> 标签：javascript

我试图实现一个向用户“输入”消息的功能。像“T” - 等待 - “Th” - 等待 - “Tha” ...我想出了这个功能，但它会等待然后立即更新所有字母（而不是单独更新）：

```
var tu = 'Thank you'
var timing = 1000
for (var i=0; i<=tu.length; i++) {
    setTimeout(function (){input.text(tu.slice(0, i))}, timing)
    timing = timing + 1000
} 
```

但是当我这样做时（不要笑），它起作用了..

```
setTimeout(function (){input.text('t')}, 400)
setTimeout(function (){input.text('th')}, 800)
setTimeout(function (){input.text('tha')}, 3000)
setTimeout(function (){input.text('than')}, 4000)
setTimeout(function (){input.text('thank')}, 5000)
setTimeout(function (){input.text('thank ')}, 6000)
setTimeout(function (){input.text('thank y')}, 7000)
setTimeout(function (){input.text('thank yo')}, 8000)
setTimeout(function (){input.text('thank you')}, 9000) 
```

任何人都可以阐明为什么循环的行为与我的剪切粘贴工作不同吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T02:11:05.420

这是 JavaScript 中一个奇怪的作用域的例子。是获取对的`setTimeout`引用`i`，*而不是 的值* `i`。`for`循环在任何执行之前完成，`setTimeouts`因此所有`setTimeout`s 将使用相同的值`i`，即`tu.length`。

您需要使用闭包来解决此问题：

```
var tu = 'Thank you'
var timing = 1000
for (var i = 1; i <= tu.length; i++) {
    (function (i) {
        setTimeout(function () {
            input.text(tu.slice(0, i))
        }, timing * i);
    })(i);
} 
```

（另外，正如其他人所指出的，你有一个边界问题。我改为`i < tu.length`。`i <= tu.length`）

您可以[在 jsFiddle 上看到这一点](http://jsfiddle.net/xeZts/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T02:13:42.957

这是因为`i`它的范围比你的函数更大，所以它从循环中达到 10 并在每次超时时被使用（作为 10）。

有办法解决这个问题，但最好`setInterval`用于这种行为；

```
var tu = 'Thank you'
var timing = 1000
var i=0;
var tm=setInterval(function(){
    ++i;
    input.text(tu.slice(0, i));
    if(i>=tu.length){
        clearInterval(tm);
    }
},timing) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T02:06:58.863

你失去`i`了循环的范围。您必须创建一个可以`i`在超出范围时访问的函数。这是我的做法：

```
var tu = 'Thank you',
    timing = 1000;

function doPart(i) {
    setTimeout(function () {
        input.text(tu.slice(0, i));
    }, i*timing);
}

function printString() {
    var i;
    for (i=1; i<tu.length; i++) {
        doPart(i);
    }
}

printString(); 
```

另外，我认为你的意思是`tu.slice(0, i+1)`. Slice 从开始索引到结束索引，但不包括结束索引。

# c++ - 为数组中的 unsigned char 分配一个 short 的结果是什么？

> ID：15582595
> 
> 赞同：1
> 
> 时间：2013-03-23T02:02:46.453
> 
> 标签：c++, c, arrays, char, short

我得到了一个短值（只能限制为 a `UINT8`）并想将其分配给`UINT8`(/ `unsigned char`)。
但我没有想到更好的选择，而是这样做：

```
unlatch.FaultBits.Value[0] = ui->lineEditFaultBits->text().toShort(); 
```

但这能在我使用时实现我想要的`unlatch.FaultBits.Value[0]`吗？（Vaule[] 是结构体中的一个数组`UINT8 Value[64];`：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T03:15:12.853

这能达到你想要的吗？好吧，我可以假设四种途径之一，因为您还没有确切地告诉我们您想要什么（抱怨）。

1.  您想将`short`值分配给 a `uint8_t`，而不进行有符号到无符号的转换。在这种情况下，您必须确保旧值在 a `uint8_t`:的范围内`assert(old_value >= 0 && old_value <= 255);`。如果这一点描述了您想要的行为并且断言失败，那么不，您的代码没有做您想要的。
2.  您想为 a 分配一个可能为负数或超出范围的`short`值，`uint8_t`并且您看不到他的评论中描述的缩减过程 R 存在问题。如果这一点描述了你想要的行为，那么是的，你的代码做你想要的。
3.  您想为 a 分配一个可能为负数或超出范围的`short`值，`uint8_t`而他的评论中描述的归约过程 R 对您不起作用，但您准备在代码中表达自己的归约算法。如果这一点描述了您想要的行为，那么不，您还没有表达您的自定义缩减算法。
4.  您想为 a 分配一个可能为负数或超出范围的`short`值，`uint8_t`并且您不希望减小该值。在这种情况下，`uint8_t`是不合适的。选择不同的类型。

# wpf - ViewModel 的对象绑定 - 如何在其属性之一更改时通知 UI

> ID：15582598
> 
> 赞同：0
> 
> 时间：2013-03-23T02:03:03.997
> 
> 标签：wpf, data-binding, mvvm, triggers, prism

我有一个这样定义的数据触发器：

```
 <DataTrigger Binding="{Binding Path=DataContext.MyObject.MyProperty, Mode=OneWay, RelativeSource={RelativeSource AncestorType=UserControl}}" Value="False">
    <Setter Property="IsEnabled" Value="False" />
 </DataTrigger> 
```

MyObject 在视图模型中。现在，当 MyObject 的 MyProperty 更改时，它不会通知 UI，即使 MyProperty 确实通知 OnPropertyChange。当我们使用 Microsoft Prism 作为框架时，对象 MyObject 已在 Container 中注册。

我应该如何让它工作？

**编辑**： MyObject 是这样定义的：

```
public class MyObject : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    [NotifyPropertyChangedInvocator]
    protected virtual void OnPropertyChanged(string propertyName)
    {
        var handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
    }

    private bool _myProperty;
    public bool MyProperty
    {
        get { return _myProperty; }
        set
        {
            if (value == _myProperty)
                return;

            _myProperty = value;
            OnPropertyChanged("MyProperty");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:56:49.047

如果`DataContext`设置为的实例`MyObject`- 那么你只是想要`DataContext.MyProperty`- 除非你的数据上下文确实有一个名为的属性`MyObject`，它也是一个实例`MyObject`

`DataContext.MyProperty`（DataContext 已经是 MyObject 的实例）

对比

`DataContext.MyObject.MyProperty`（您的数据上下文对象（视图模型）是否真的有一个名为 MyObject 的 MyObject 类型的属性？）

例子 ：

```
<DataTrigger Binding="{Binding Path=DataContext.MyProperty, Mode=OneWay, RelativeSource={RelativeSource AncestorType=UserControl}}" Value="False">
    <Setter Property="IsEnabled" Value="False" />
 </DataTrigger> 
```

如果我错了，您能否发布代码`ViewModel`- 即设置为 DataContext的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T06:04:12.263

你确定`RelativeSource`没有明确的作品`FindAncestor`吗？尝试改变

`RelativeSource={RelativeSource AncestorType=UserControl}}"`

至：

`RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl}}"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T04:03:29.927

我没有看到您发布的代码有任何“错误” - 您绝对确定您正在更改属性值，并执行任何所需的调用回到正确的`Dispatcher`？

你可以试试这个结构吗？（疯狂猜测，不确定它是否适合您的上下文）

[编辑：我从这里记忆，所以语法需要调整]

```
<Trigger Property="{Binding Path=DataContext.MyObject.MyProperty, Mode=OneWay, RelativeSource={RelativeSource AncestorType=UserControl}}" Value="False">
    <Setter Property="IsEnabled" Value="False" />
</Trigger> 
```

# css - 边框不见了

> ID：15582599
> 
> 赞同：1
> 
> 时间：2013-03-23T02:03:06.950
> 
> 标签：css, border

我不知道为什么边框没有出现。我有一个封装所有元素的主包装器；我只是将每个元素的背景设置为透明的白色，然后在包装器中添加一个透明的白色边框。

[http://violetoeuvre.com/](http://violetoeuvre.com/)

```
/* Wrapper - Main *********/    
.main_wrapper{ 
        display:block;
        background: rgba(255,0,0,.5);
        width:1000px;
        height: 2000px;
        margin-left:18%;
        margin-top:7%;
        border:10px;
        border-color: rgba(255,255,255,.5);
} 
```

## html

```
<div class="main_wrapper">

<!-- Logo _____________________________________________________-->

<div class="logo">
    <a href="index.html"><img alt="emma carmichael" height="150px"
            src="images/Home/emma-logo.png"></a>
</div>

<!---Navigation Menu ______________________________________________-->

    <div id="main_menu" class="wrapper_nav_box">
        <div class="nav_box">
            <a href="writing.html">WRITING</a> 
        </div>
        <div class="nav_box">
            <a href="http://tumblr.com">BLOG</a>
        </div>
        <div class="nav_box">
            <a href="contact.html">CONTACT</a>
        </div>
    </div> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T02:48:44.760

正如[@Lotus](https://stackoverflow.com/users/2183708/lotus) [所说](https://stackoverflow.com/a/15582617/402022)：

> 您忘记包含边框样式

作为 Lotus 建议的使用速记的替代方法，您可以这样做：

```
.main_wrapper
{ 
    /*other stuff*/
    border-width: 10px;
    border-style: solid;
    border-color: rgba(255,255,255,.5);
} 
```

* * *

*注意*：我添加这个以扩展 Lotus 的答案，并帮助回答[@Claire](https://stackoverflow.com/users/2133363/claire)的[评论](https://stackoverflow.com/questions/15582599/border-is-missing#comment-22092256)“我知道我应该使用速记，但为什么其他方式不起作用？”

# ruby - rspec - 失败/错误：@users.should eq([user]) - 得到：[] 代替

> ID：15582602
> 
> 赞同：0
> 
> 时间：2013-03-23T02:03:49.543
> 
> 标签：ruby, testing, rspec

规格：

```
require 'spec_helper'

describe UsersController do

  describe "GET index" do
    it "assigns @users" do
      user = User.create(:email => 'bob@test.com', :password=>'12', :password_confirmation=> '12')
      get :index
      assigns(:users).should eq([user])
    end

    it "renders the index template" do
      get :index
      response.should render_template("index")
    end
  end

end 
```

代码：

```
class UsersController < ApplicationController
  def index
    @users=User.all
  end
end 
```

错误：

```
Failures:

  1) UsersController GET index assigns @users
     Failure/Error: @users.should eq([user])

       expected: [#<User id: nil, email: "bob@test.com", encrypted_password: "$2a$04$JRFUhZxmw1jVCVRFx1bkIO9dpiJbVpbBhlXkGq.zbVyj...", reset_password_token: nil, reset_password_sent_at: nil, remember_created_at: nil, sign_in_count: 0, current_sign_in_at: nil, last_sign_in_at: nil, current_sign_in_ip: nil, last_sign_in_ip: nil, created_at: nil, updated_at: nil, admin: nil>]
            got: []

       (compared using ==) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T02:15:54.687

问题是“12”的密码太短了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T02:23:02.513

将来避免该问题的一种方法是使用工厂并包括工厂规范，这样您就可以放心您使用的是有效对象。

Thoughtbot 在[这篇博](http://robots.thoughtbot.com/post/30994874643/testing-your-factories-first)文中描述了一种使用他们自己的 FactoryGirl 的好方法。我不是 rake 任务的忠实拥护者，但他们推荐的工厂规格非常有用。

# ios - 在 IB 中，无法将 IBOutlet 委托连接到另一个视图控制器？

> ID：15582613
> 
> 赞同：1
> 
> 时间：2013-03-23T02:06:44.560
> 
> 标签：ios, xcode, delegates, interface-builder, storyboard

我有一个视图控制器，它作为它的视图之一是一个容器视图（在 IB 故事板中），它嵌入了一个表视图控制器，它又具有一个嵌入另一个视图控制器的容器视图。在最后一个视图控制器中，我设置了一个带有弱合成委托属性的委托协议作为 IBOutlet。第一个视图控制器是我想从最后一个接收委托方法的，我添加了协议 <...> 到它。

问题是我在情节提要（或其他方式）中没有找到将最后一个视图控制器的 IBOutlet 委托链接到遵循协议的第一个视图控制器的方法，以便最后一个可以发送第一条消息。我以为我可以拖放（使用控制键），但我发现的只是目的地上的 segue 选项。即使委托出现在出口连接窗口中，它似乎也不会连接到我项目中的任何视图控制器。

任何视图控制器都不能成为另一个协议的代表吗？并且可以在IB中链接？如果我不能用 IB 做到这一点，我不知道如何让另一个 VC 成为上游的代表。

任何意见，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T03:08:07.807

您不能在视图控制器之间连接 IBOutlets。您需要在代码中执行此操作。你必须通过 childViewController 链从第一个控制器到最后一个 - 如果我正确理解你的结构，从第一个视图控制器：

```
 LastController *last =  ((UIViewController *)self.childViewControllers[0]).childViewControllers[0];
    last.delegate = self; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T03:07:42.043

我问了一个类似的问题[Interface Builder 将不允许连接到自定义 UIView 类？](https://stackoverflow.com/questions/14918781/interface-builder-wont-allow-connections-to-custom-uiview-class/15032869#15032869)我最终打开了苹果的一个错误。在 Apple 进行了几次后续查询后，我还没有听到任何解决方案。

# c# - “Core”作为成员名称后缀的含义

> ID：15582614
> 
> 赞同：6
> 
> 时间：2013-03-23T02:06:52.127
> 
> 标签：c#, naming-conventions

*注意：我只想在前面说这是一个非常小的问题 - 纯粹是出于好奇。*

成员以“Core”后缀命名是什么意思？

其他使用“核心”后缀的成员示例：

*   搜索核心
*   排序核心

[我刚刚在WAF 框架](http://waf.codeplex.com/wikipage?title=Model-View-ViewModel%20Pattern&referringTitle=Home)中遇到它并且有一个理论 - 它是否可能来自视觉提示，即 <> 之间的类型名称（这是 member 的类型`ViewCore`）使其看起来像某种“核心”？

![在此处输入图像描述](../Images/db07bea01722dc1f5a9f51d7bc4154c3.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-18T21:58:43.967

在 Krzysztif Cwalina 和 Brad Abrams 的“框架设计指南”的第 9.9 节模板方法 (p.355) 中指出：

*考虑通过在非虚拟成员名称后缀“Core”来命名为非虚拟成员提供扩展点的受保护虚拟成员。*

```
public void SetBounds(...) {
    ...
    SetBoundsCore(...); // [Extension Point]
}
protected virtual void SetBoundsCore(...){...} 
```

模板方法模式允许您在派生类执行扩展方法后保留执行逻辑并控制某些前后行为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-23T02:10:07.623

`Core`当您查看类的基础知识时，通常将其用作关键字。一般来说，这些类包含应用程序的基础知识，它们依赖于最低限度的依赖关系，以便在整个应用程序或其他应用程序中轻松使用代码。

# ruby-on-rails - capistrano 错误消息：请安装 pg 适配器：`gem install activerecord-pg-adapter`（无法加载此类文件 --

> ID：15582618
> 
> 赞同：2
> 
> 时间：2013-03-23T02:07:49.673
> 
> 标签：ruby-on-rails, rvm, capistrano, bundler

我正在使用 capistrano 并收到此错误消息：

```
Please install the pg adapter: `gem install activerecord-pg-adapter` (cannot load such file -- active_record/connection_adapters/pg_adapter) 
```

我已经从我的 Gemfile 和`bundle install`d 中删除了 gem 'pg'。我在 Gemfile.lock 中没有看到 pg gem。我还将生产数据库更改为 sqlite3 适配器。为什么 Rails 3.2 / Capistrano / Bundler 要求这个？我没有使用它，也没有在 Gemfile.lock 中，我该如何解决它？我在发生这种情况的服务器上使用 ubuntu 12.04。

提前谢谢

此外，当我运行它告诉我运行的内容时，我得到：

```
deploy@oahu:~$ gem install activerecord-pg-adapter
ERROR:  Could not find a valid gem 'activerecord-pg-adapter' (>= 0) in any repository
^CERROR:  Interrupted
deploy@oahu:~$ \ 
```

** 编辑 1 **

从应用程序的根目录

```
Fri Mar 22$ grep -ri 'pg-adapter' *
Fri Mar 22$ 
```

数据库.yml

```
development:
  adapter: sqlite3
  database: db/development.sqlite3
  pool: 5
  timeout: 5000

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
  adapter: sqlite3
  database: db/test.sqlite3
  pool: 5
  timeout: 5000

production:
  adapter: sqlite3
  database: db/production.sqlite3
  pool: 5
  timeout: 5000 
```

这是github上database.yml文件的截图：

![在此处输入图像描述](../Images/52e86bfb34df73d30961cd7eb9a374ac.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-23T02:15:31.983

检查您的`database.yml`. 当 Postgres的`pg-adapter`正确适配器是`postgresql`. 如果您删除或替换它，这应该可以工作。

# ruby-on-rails - 使用 MongoDB 设计可同步的嵌入式集合

> ID：15582621
> 
> 赞同：0
> 
> 时间：2013-03-23T02:08:16.930
> 
> 标签：ruby-on-rails, mongodb, mongoid, nosql

我想举一个我正在努力解决的设计决策的例子：

假设我有一个“To Do List”应用程序，每个列表都定义为一个 MongoDB 文档，其项目定义为一个嵌入式集合。

这很简单，但是现在我想添加一种“fork”功能，这样我的朋友就可以复制我的文档，并且每当我在*原始文档*上对它们进行更改时，它们都会自动同步。

也就是说，当我在我的列表中添加、重命名、删除或重新排序项目时*，*我将能够更新他们的列表，同时仍然保持*他们的项目*处于选中/未选中状态。

这里有一些想法，但我是 MongoDB 的新手，无法说出每个想法的实现难度，这是可取的，并且看不到所有可能出现的问题：

*   **RDBMS 方式：**将项目保存为单独的集合，每个项目都由嵌入在列表中的“选中/未选中”项目引用（本质上是多对多关系）。
*   **参考原始项目：**每个嵌入的复制项目都会引用原始文档中的对应项，这样我就可以知道原始项目是否被重命名、删除或新添加。

任何人都可以提供任何可以帮助决定解决方案的见解吗？

**更新：**

作为用户体验的一部分，我想让复制文档的所有者决定是否更新他的列表，所以我认为第一个实现不太适用。

但是，如何使用第二种方法来跟踪变化呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:41:49.817

我强烈建议您采用第一种方法。例如，如果这是一个项目：

```
{
   "_id" : 123,
   "Name" : "Feed the cat"
} 
```

您将制作一个像这样的待办事项列表文档：

```
{
   "_id" : 1,
   "items" : [ 123, ... ]
} 
```

我推荐这样做的原因是因为保持经常更改的嵌入式文档同步......非常困难。如果嵌入的文档要全部出现，那么拥有该文档的一个权威版本然后只链接到该文档的 ID 要容易得多。

这应该允许复制的待办事项列表也与原始项目列表不同。它们只是对另一个集合的引用。您可以添加/删除/编辑所有您想要的。

# drupal - 为自定义内容类型动态生成字段

> ID：15582623
> 
> 赞同：0
> 
> 时间：2013-03-23T02:08:22.620
> 
> 标签：drupal, drupal-6, drupal-modules, drupal-views, cck

我正在使用 CCK 和新模块开发自定义内容类型，如 [http://drupal.org/node/1044248中所述](http://drupal.org/node/1044248)

除了标准字段，它还可以有 1 - N 个附加字段。N 是动态的。

我不想创建 5 个预定义字段，而是支持 N 个字段，用户可以添加任意数量的字段。

这可以在 Drupal 6.X 中使用 CCK 吗？或者，可以通过任何其他方式完成吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T17:59:23.033

没有意识到有一个属性可以选择具有无限选项的字段数 - 认为它可能会帮助可能忽略该字段的人。

# rest - AndroidAnnotations：导出后@Rest错误转换Json

> ID：15582627
> 
> 赞同：0
> 
> 时间：2013-03-23T02:08:49.593
> 
> 标签：rest, proguard, android-annotations

我有这些课程：

```
public class OfferList {
   public List<Offer> offers;
}

public class Offer {
    public String offer_id;
    public String group_id;
    public String n_hours;
    public boolean is_new;
} 
```

并定义了这个服务：

```
@Rest(rootUrl = "http://MYURL/json", converters = { GsonHttpMessageConverter.class })
//if defined, the url will be added as a prefix to every request
public interface EscolasPertoDeMimRESTService {

    @Get("/offers/{user_id}/{date}")
    @Accept(MediaType.APPLICATION_JSON)
    OfferList getOffers(String user_id, long date);
} 
```

这里称为：

```
(...)
@RestService
    OfferRestService offersService;

(...)
@Background
void loadListItems() {
    mLoadingOffers = true;
    showProgressDialog();

    OfferList ol = null;
    try {
        ol = offersService.getOffers(myPrefs.userID().get(), myPrefs.lastCheckedForOffers().get());

        showDebug("ol.offers.size(): " + ol.offers.size()); //OK shows ol.offers.size(): 24

        Offer o = ol.offers.get(0); //After exporting: Crash
    showDebug("ol.offers[0].group_id" + o.group_id);

    } catch (Exception e) {
        showDebug(e.getMessage()); //After exporting shows: "com.google.gson.internal.StringMap cannot be cast to com.humihara.escolaspertodemim.Offer"
    }

    setupAdapter(ol);
    mLoadingOffers = false;
}
(...) 
```

在调试中一切正常，但是当我导出和签名时，应用程序崩溃了。

发送 GET 并且来自服务器的响应是有效的 JSON 报价列表。显然我得到的结果是一个带有 StringMap(s) 而不是 Offer(s) 的 OfferList。

这是我的 proguard-project.txt（我使用的是 android sdk 默认值加上这些）：

```
-keep public class com.humihara.escolaspertodemim.** { *; }
-keep public class org.springframework.** { *; }
-keep public class com.google.gson.** { *; }
-keep public class com.google.ads.** { *; }
-keep public class com.androidannotations.** { *; }
-keep public class org.acra.** { *; }

-keep public class * extends android.support.v4.app.FragmentActivity

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet); }
-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet, int); }

-dontwarn org.simpleframework.**
-dontnote org.simpleframework.**

-dontwarn org.codehaus.jackson.**
-dontnote org.codehaus.jackson.**

-dontwarn com.fasterxml.jackson.**
-dontnote com.fasterxml.jackson.**

-dontwarn com.google.code.rome.**
-dontnote com.google.code.rome.**

-dontwarn org.apache.commons.httpclient.**
-dontnote org.apache.commons.httpclient.** 
```

我已经搜索了邮件列表和 stackoverflow，在那里我找到了 proguard 的额外定义，但现在我不知道还能做什么。有人可以告诉我我必须在我的代码或 proguard-project.txt 中更改什么才能使其正常工作吗？

**更新：**

在使用 Proguard 优化后检查[Jackson Json 解析器在 Android 上的所有对象成员上返回空值](https://stackoverflow.com/questions/8027302/jackson-json-parser-returns-nulls-on-all-object-members-on-android-after-optimiz?rq=1)

我想我错过了：

```
-dontskipnonpubliclibraryclassmembers 
```

默认的 android proguard 定义：

```
-dontskipnonpubliclibraryclasses 
```

我没有注意到他们不是同一个表情。

我最终得到了这个 proguard-project.txt：

```
-keepattributes Signature,RuntimeVisibleAnnotations,AnnotationDefault

-dontskipnonpubliclibraryclassmembers

-keep class com.humihara.escolaspertodemim.** { *; }

-keep public class * extends android.support.v4.app.FragmentActivity

-dontwarn org.simpleframework.**
-dontnote org.simpleframework.**

-dontwarn org.codehaus.jackson.**
-dontnote org.codehaus.jackson.**

-dontwarn com.fasterxml.jackson.**
-dontnote com.fasterxml.jackson.**

-dontwarn com.google.code.rome.**
-dontnote com.google.code.rome.**

-dontwarn org.apache.commons.httpclient.**
-dontnote org.apache.commons.httpclient.** 
```

现在一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:01:26.127

对于使用反射访问注解的代码，您应该保留注解：

```
-keepattributes *Annotation* 
```

# c++ - 在VS2010中加载dll文件期间的第一次机会异常

> ID：15582628
> 
> 赞同：0
> 
> 时间：2013-03-23T02:09:06.177
> 
> 标签：c++, dll, mfc

我在 Visual Studio 2010 中使用 MFC。我正在修改其他人完成的代码。VS2010 加载一些文件，但是在加载最后一个 dll 文件时，我得到了

第一次机会异常：Microsoft C++ 异常：在内存位置 0x0014faa0..

我想知道，有没有办法在加载 dll 文件时设置断点？VS 加载第 3 方 dll 文件时发生异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T02:13:55.510

无需担心第三方代码中的第一次机会异常，因为这可能是它们执行的正常部分。如果第三方代码不处理异常，就会变成第二次机会异常，然后你就知道有问题了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T02:29:05.887

如果您根据此博客看到第一次机会预期，那可能没问题：

[http://blogs.msdn.com/b/davidklinems/archive/2005/07/12/438061.aspx](http://blogs.msdn.com/b/davidklinems/archive/2005/07/12/438061.aspx)

引用如下：

**第一次机会异常是否意味着我的代码存在问题？**

`First chance exception messages most often do not mean there is a problem in the code. For applications / components which handle exceptions gracefully, first chance exception messages let the developer know that an exceptional situation was encountered and was handled.`

这篇文章提供了相关信息 [如何在 Visual Studio 中的引用代码中设置断点？](https://stackoverflow.com/questions/2617659/how-can-i-set-a-breakpoint-in-referenced-code-in-visual-studio)

# html - 从导航栏中删除黑色背景

> ID：15582631
> 
> 赞同：3
> 
> 时间：2013-03-23T02:09:30.090
> 
> 标签：html, css

如何从导航栏中删除黑色背景颜色....我使用 firebug 发表评论，但我无法实现它....在下面提供我的代码....

[http://jsfiddle.net/qvEnQ/1/embedded/result/](http://jsfiddle.net/qvEnQ/1/embedded/result/)

```
<div class="navbar navbar-inverse navbar-fixed-top" style="margin-top: 15px;">
        <div class="navbar-inner">
            <div class="container" id="expandingNavbar">
                <a class="btn btn-navbar collapsed" data-toggle="collapse" data-target=".nav-collapse" target="_self">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                </a>
                <a class="brand" href="/" style="padding-top: 0px; margin-left: 0px;" target="_self">
                    <img alt="change" class="defieLogo" src="/images/defie_logo_only.png">
                </a>

                <div id="welcomeName">Welcome soojin!</div>
                <div id="emailAccount">test10@defie.co<span style="color: #0074bd; position: relative;left: 67px;bottom: 33px;">[Log out]</span></div>

                <div class="nav-collapse collapse" style="height: 0px;">
                    <ul class="nav">
                        <li style="padding-left: 107px;">
                            <a style="font-weight: bold;" href="/product.html" <?="$strClass_1" ?="" target="_self">&gt;
                            MENU
                            </a>
                        </li>

                        <li>
                            <a style="color: #9b365a;" href="/solution.html" <?="$strClass_2" ?="" target="_self">&gt;
                                <img alt="squareList" style="margin-right: 10px;" src="http://intra.defie.co/images/cube_vendor.png">Vendors</a>
                        </li>
                        <li>
                            <a id="smallLinks" style="font-weight: bold; font-size: 12px; padding-left: 0px; padding-right: 5px;" href="/solution.html" <?="$strClass_2" ?="" target="_self">&gt;Add New Vendor</a>
                        </li>
                        <li>
                            <a id="smallLinks" style="font-weight: bold; font-size: 12px; padding-left: 0px; padding-right: 5px;" href="/solution.html" <?="$strClass_2" ?="" target="_self">&gt;Vendor List </a>
                        </li>
                        <li>
                            <a id="smallLinks" style="font-weight: bold; font-size: 12px; padding-left: 0px; padding-right: 0px;" href="/solution.html" <?="$strClass_2" ?="" target="_self">&gt;Reports</a>
                        </li>

                        <li><a style="color: #9b365a;" href="/service.html" <?="$strClass_3" ?="" target="_self">&gt;
                            <img alt="squareList" style="margin-right: 10px;" src="http://intra.defie.co/images/cube_vendor.png">Purchase Transactions</a></li>
                        <li class="iphonePartnerLink"><a style="color: #9b365a;" href="/partner.html" <?="$strClass_4" ?="" target="_self">&gt;
                            <img alt="squareList" style="margin-right: 10px;" src="http://intra.defie.co/images/cube_vendor.png">Product Life cycle</a></li>
                        <li><a style="color: #9b365a;" href="/contact.html" <?="$strClass_5" ?="" target="_self">&gt;
                            <img alt="squareList" style="margin-right: 10px;" src="http://intra.defie.co/images/cube_vendor.png">RMA Transactions</a></li>  
                    </ul>
                    <a href="#myModal" role="button" data-toggle="modal" target="_self">
                        <span style="color: black; font-weight: bold; font-size: 20px; position: relative; margin-left: 488px; ">Soojin</span> <span style="color: #0074bd;">[Log out]</span>

                    </a>
                </div><!--/.nav-collapse -->
            </div>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T02:16:38.660

通过添加“背景：透明；”删除背景 （或任何其他颜色）到类 .navbar-inner。

jsfiddle中你的css的第7972行

像这样：

```
.navbar-inverse .navbar-inner {
    background: transparent;
} 
```

（摆脱背景图像，背景重复和过滤器）

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T03:31:36.810

从导航栏 div 中删除 .navbar-inverse 类。

# php - 狮身人面像搜索 Cron 问题

> ID：15582638
> 
> 赞同：2
> 
> 时间：2013-03-23T02:10:17.150
> 
> 标签：php, mysql, apache, cron, sphinx

我正在尝试将 Sphinx main + delta 系统与 Sphinx 一起使用。除了 Cron 工作不断`WARNING: no such index 'listings_delta_index', skipping`从日志中说出来，我一切都正常了。当我手动运行命令时，它工作得很好。我正在运行的命令和我正在使用的 sphinx.conf 如下。我还尝试将索引名称更改为 listings_index ，但这也不起作用。

**狮身人面像.conf**

```
source listings_source
{
    type            = mysql
    sql_host        = localhost
    sql_user        = user2
    sql_pass        = password
    sql_db          = MyVirtuals
    sql_port        = 3306  # optional, default is 3306
    sql_query_pre   = SET NAMES utf8
    sql_query_pre   = REPLACE INTO sph_counter SELECT 1, MAX(listing_id) FROM     listings
    sql_query_pre   = REPLACE INTO sph_last_index SELECT 1, NOW()
    sql_query       = \
    SELECT listing_id, title,CRC32(mainCategoryID) as mainCategoryID,CAST(price AS DECIMAL(12,2)) as price, UNIX_TIMESTAMP(date_created) AS date_created, description \
    FROM listings WHERE listing_id<=(SELECT max_doc_id FROM sph_counter WHERE counter_id=1) AND status = 1
    sql_query_killlist  = SELECT listing_id FROM listings WHERE modified_on >= (SELECT last_reindex_on FROM sph_last_index WHERE counter_id=1)

    sql_attr_timestamp  = date_created
    sql_attr_uint   = mainCategoryID
    sql_attr_float  = price

    #sql_query_info = SELECT * FROM documents WHERE id=$id
}
index listings_index
{
    source      = listings_source
    path        = /usr/local/sphinx/var/data/listings_index
    docinfo     = extern
    charset_type    = sbcs
    min_word_len    = 1
    html_strip      = 1
}
source listings_delta_source : listings_source{
    sql_query_pre       = SET NAMES utf8
    #Pull listings that are new and changed
    sql_query       = SELECT listing_id, title, CRC32(mainCategoryID) as mainCategoryID, CAST(price AS DECIMAL(12,2)) as price, UNIX_TIMESTAMP(date_created) AS date_created, description \
    FROM listings WHERE listing_id>(SELECT max_doc_id FROM sph_counter WHERE counter_id=1) OR modified_on >= (SELECT last_reindex_on FROM sph_last_index WHERE counter_id=1)
}
index listings_delta_index : listings_index{

        source      = listings_delta_source
        path        = /usr/local/sphinx/var/data/listings_delta_index
        docinfo     = extern
        charset_type    = sbcs
        min_word_len    = 1
        html_strip      = 1
}
indexer
{
    mem_limit       = 32M
}
searchd
{
    listen      = 9312
    listen      = 9306:mysql41
    log         = /var/log/sphinxsearch/searchd.log
    query_log       = /var/log/sphinxsearch/query.log
    read_timeout    = 5
    max_children    = 30
    pid_file        = /var/log/sphinxsearch/searchd.pid
    max_matches     = 1000
    seamless_rotate = 1
    preopen_indexes = 1
    unlink_old      = 1
    workers     = threads # for RT to work
    binlog_path     = /usr/local/sphinx/var/data
} 
```

**sphinx_update_delta.sh**

```
indexer -c /var/www/scripts-conf/sphinx.conf --rotate listings_delta_index 
```

**crontab**

```
# /etc/crontab: system-wide crontab
# Unlike any other crontab you don't have to run the `crontab'
# command to install the new version when you edit this file
# and files in /etc/cron.d. These files also have username fields,
# that none of the other crontabs do.

SHELL=/bin/sh
PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
# m h dom mon dow user  command
17 *    * * *   root    cd / && run-parts --report /etc/cron.hourly
25 6    * * *   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report     /etc/cron.daily )
47 6    * * 7   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.weekly )
52 6    1 * *   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.monthly )
*/1 *    * * *   root    sh /var/www/scripts-conf/sphinx_update_delta.sh > /var/log/cronlog.log
*  0    * * *   root    sh /var/www/scripts-conf/sphinx_update_main.sh 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T17:46:32.203

indexer -c /var/www/scripts-conf/sphinx.conf --rotate Listings_delta_index

sphinx.conf 是小写的

在您的第一个块中，您写为标题 Sphinx.conf（不是 sphinx.conf）

* * *

尖端

```
sh /var/www/scripts-conf/sphinx_update_delta.sh > /var/log/cronlog.log 
```

将 *>*替换为*| 球座*

```
sh /var/www/scripts-conf/sphinx_update_delta.sh | tee /var/log/cronlog.log 
```

查看手动运行的结果

# flash - 无法在 Flash IDE 中导入 fl.controls

> ID：15582639
> 
> 赞同：7
> 
> 时间：2013-03-23T02:10:36.847
> 
> 标签：flash, import, ide, controls

我在 Adob​​e Flash CS5 IDE 中编码。我发誓 fl.controls 曾经是可导入的，但现在它不存在了。当我试图在 Flash Builder 中使用它时，我*可能*已经从它所在的任何地方删除了它。有谁知道我怎样才能把它找回来？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T04:59:57.457

为 Flash 联动添加控件。

![闪存组件](../Images/f9c538ceb2d41529c01524a2551d6154.png)

`fl.controls`包将可用。

![闪光控制](../Images/8b44861ae86d0285036fd4638f55b773.png)

Flash 控件包是 Flash Pro 的一部分，可以通过 SWC 或通过代码添加：

**通过 SWC 添加：**

*Windows：*
C:\Program Files (x86)\Adobe\Adobe Flash CS5.5\Common\Configuration\ActionScript 3.0\libs\flash.swc

*Mac OS X：*
/Applications/Adobe Flash CS5.5/Common/Configuration/ActionScript 3.0/libs/flash.swc

**按源文件夹添加：**

*Windows：*
C:\Program Files (x86)\Adobe\Adobe Flash CS5.5\Common\Configuration\Component Source\ActionScript 3.0\User Interface

*Mac OS X：*
/Applications/Adobe Flash CS5.5/Common/Configuration/Component Source/ActionScript 3.0/User Interface

# actionscript-3 - 如何使用 AS3 将 HTTP POST 发送到 GCM（适用于 android 的谷歌云消息传递）

> ID：15582645
> 
> 赞同：0
> 
> 时间：2013-03-23T02:12:27.947
> 
> 标签：actionscript-3, http, air, google-cloud-messaging

我正在尝试从我的 AIR ANDROID 应用程序中的操作脚本向 GCM 发出 HTTP 请求。我究竟做错了什么？我在[这里遵循请求格式](http://developer.android.com/google/gcm/gcm.html#server)。

我不断收到错误 400

```
var url:String = "https://android.googleapis.com/gcm/send";

var request:URLRequest = new URLRequest(url);

var rhArray:Array = new Array(new URLRequestHeader("Content-Type", "application/json"),new URLRequestHeader("Authorization", "key=MYAPIKEY"));
            request.requestHeaders = rhArray;

var msgData:String = JSON.stringify({"message":"holy crap message worked","title":"the message title here"});
var postData:String = JSON.stringify({"registration_ids":["THELONGREGISTRATIONIDOFTHEDEVICEIWANTTOMESSAGE"],"data":msgData});

request.data = postData;
request.method = URLRequestMethod.POST;

var urlLoader:URLLoader = new URLLoader();
urlLoader = new URLLoader();

urlLoader.addEventListener(HTTPStatusEvent.HTTP_STATUS, httpStatusHandler, false, 0, true);
urlLoader.addEventListener(SecurityErrorEvent.SECURITY_ERROR, securityErrorHandler, false, 0, true);

urlLoader.load(request); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T14:41:33.513

我也无法通过 400 HTTP 状态码。我尝试使用 brybam 的代码实现该功能，如答案中所述，400 代码意味着 http 请求的 JSON 部分无效。

替换 brybam 第一篇文章中的这两行：

`var msgData:String = JSON.stringify({"message":"holy crap message worked","title":"the message title here"});`

`var postData:String = JSON.stringify({"registration_ids":["THELONGREGISTRATIONIDOFTHEDEVICEIWANTTOMESSAGE"],"data":msgData});`

用这些：

`var msgData:String = JSON.stringify({data:{message:"holy crap message worked",title:"the message title here"}});`

`var postData:String = JSON.stringify({registration_ids:["THELONGREGISTRATIONIDOFTHEDEVICEIWANTTOMESSAGE"]});`

`// remove the first curly bracket of msgData since we will concatenate the two strings in a moment.`

`msgData = msgData.slice(1,msgData.length);`

`// remove the last curly bracket of postData too.`

`postData = postData.slice(0, postData.length-1);`

`// concatenate the two, separated by a comma.`

`postData = postData.concat(",",msgData);`

这对我有用，如果您追踪 postData 变量，您将看到 JSON 现在已正确格式化。干杯，克劳斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T02:58:38.320

如果您收到 401 HTTP 状态代码，则您的 API 密钥无效。因此，假设您有一个有效的 API 密钥，您首先要修复的是更改

```
"Authorization", "MYAPIKEY" 
```

至

```
"Authorization", "key=MYAPIKEY" 
```

如果您收到 400 HTTP 状态代码，则您的 JSON 无效。确保它看起来像这样：

```
{ "collapse_key": "score_update",
  "time_to_live": 108,
  "delay_while_idle": true,
  "data": {
    "score": "4x8",
    "time": "15:16.2342"
  },
  "registration_ids":["4", "8", "15", "16", "23", "42"]
} 
```

您可能缺少一些引号（看起来您的键没有引号）。

# mysql - 按类别自定义网站搜索

> ID：15582648
> 
> 赞同：0
> 
> 时间：2013-03-23T02:13:15.693
> 
> 标签：mysql

我想为我正在处理的网站创建一个简单的搜索。我的数据库中有所有项目都包含特定的类别 ID，并且可以选择链接到多个标签。

我想获取任何搜索词并查询 category.name 和 tag.name 字段以找到与这些词匹配的项目。

我正在寻找有关如何创建执行此操作的高效/快速查询的建议，并按最接近的匹配项（大多数匹配项）对结果进行排序

这是我的相关表格的快速版本：

**物品**

编号 | 类别 | 标题 | 描述

**类别**

编号 | 姓名 | 父母身份

**标签**

编号 | 姓名 | 用途

**item_tag**

项目 ID | 标记ID

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T06:05:34.443

我还是没完全明白你想要什么。
好吧，这是我们讨论的第一个版本。
我建议您创建如下视图：

```
CREATE OR REPLACE VIEW `search_view` AS
SELECT
  i.id    AS `item_id`,
  i.title AS `item_title`,
  c.id    AS `cat_id`,
  c.name  AS `cat_name`,
  t.id    AS `tag_id`,
  t.name  AS `tag_name`
FROM item AS i
LEFT OUTER JOIN item_tag AS it
  ON (i.id = it.itemId)
LEFT OUTER JOIN tag AS t
  ON (it.tagId = t.id)
LEFT OUTER JOIN category AS c
  ON (i.category = c.id)
WHERE ((t.id IS NOT NULL) OR (c.id IS NOT NULL)); 
```

然后你使用附近的东西从视图中查询

```
SELECT
  *,
  (
    IF(tag_name like ?, 2, 0)
    + IF(cat_name like ?, 4, 0)
    + IF(item_title like ?, 1, 0)
  ) AS `priority`
  FROM search_view
GROUP BY item_id
ORDER BY SUM(priority); 
```

*上面的代码中没有测试。报告您遇到的任何问题*

**[第一版]**你用的是PHP，不是吗？[好吧，您可以使用PHP 字符串函数](http://php.net/manual/en/ref.strings.php)规范化您的查询；一种方法是将每次出现的 ',' 替换为 '|'，删除多余的空格并执行以下查询：*[我将举一个使用 @VAR 的示例（实际上您将用输入字符串替换它）]*

```
SET @VAR = 'notebook|samsung';
SELECT
  *,
  (
    IF (tag_name REGEXP CONCAT('.*(', @VAR, ').*'), 2, 0)
    + IF (cat_name REGEXP CONCAT('.*(', @VAR, ').*'), 4, 0)
    + IF (item_title REGEXP CONCAT('.*(', @VAR, ').*'), 1, 0)
  ) AS `priority`
  FROM search_view
ORDER BY priority DESC; 
```

这次我测试了。是的，你可以使用 MySQL 函数，关于`REPLACE(REPLACE(@VAR,' ',''), ',', '|')`. 但我建议你用 PHP（或 java、python 等）来做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T02:56:25.627

```
SELECT item.*
FROM items
LEFT JOIN categories
       ON categories.name = '< input name >'
      AND categories.id = items.category
LEFT JOIN item_tags
      AND item_tags.itemId = items.id
LEFT JOIN tags
       ON tags.name = '< input name >'
      AND tags.id = item_tags.tagId
WHERE categories.id IS NOT NULL
   OR tags.id IS NOT NULL
ORDER BY COUNT(items.id) DESC; 
```

这可能不是最快的方法。基本上，您将在确保类别和标签具有正确名称的同时将连接类别和标签留给项目。过滤掉与 where 子句中的类别或 item_tag 不匹配的所有项目。

另一种选择是创建临时表。为具有正确名称的所有类别创建一个，并为具有正确名称的所有标签创建一个。然后你可以选择项目 WHERE items.id IN categories_table OR items.id IN tags_table

# meteor - Meteor：发布和订阅是在客户端和服务器端之间传递价值的唯一方法吗？

> ID：15582654
> 
> 赞同：1
> 
> 时间：2013-03-23T02:14:25.837
> 
> 标签：meteor

基本上，当用户登录时，我需要启动一个后台进程。后台进程返回一些敏感数据，服务器端应该进一步处理它，然后使其可供客户端使用。

这是 Meteor.Publish 和 Subscribe 方法发挥作用的地方吗？还是我需要使用[Meteor.methods](https://stackoverflow.com/questions/10155909/where-should-meteor-methods-be-defined)？还有其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T07:39:04.777

对于这种事情，您可能希望使用调用而不是发布。这是因为发布功能的用例更多的是决定用户应该看到什么而不是真正处理数据（即进行网络抓取或其他事情并收集这些数据）并且该过程可能会阻塞，因此所有客户端都可能等待这个任务要完成。

我建议你迁移到陨石：[https](https://github.com/oortcloud/meteorite) ://github.com/oortcloud/meteorite via

```
npm install -g meteorite 
```

您现在可以访问[http://atmosphere.meteor.com](http://atmosphere.meteor.com)上精彩的社区包集合。

Ted Blackman 的[event-horizo​​n](https://github.com/belisarius222/meteor-event-horizon)包允许您在用户登录客户端时创建事件。

然后，您可以为此创建一个事件：

**客户端JS**

```
EventHorizon.fireWhenTrue('loggedIn',function(){
  return Meteor.userId() !== null;
});

EventHorizon.on('loggedIn',function(){
  Meteor.call("userloggedin", function(err,result) {
      console.log("Ready")
      if(result) {
          //do stuff that you wanted after the task is complete
      }
  }
}); 
```

**服务器js**

```
Meteor.methods({
    'userloggedin' : function() { 
        this.unblock(); //unblocks the thread for long tasks
        //Do your stuff to Meteor.user();
        return true; //Tell the client the task is done.
    }
}); 
```

# node.js - 玉内玉变量

> ID：15582655
> 
> 赞同：0
> 
> 时间：2013-03-23T02:14:28.290
> 
> 标签：node.js, pug

我在慢慢学习nodejs、express、jade。这是我想要完成的基本任务：

```
 ul.nav

- var obj = { 'home':'i.icon-home.icon-white Home', 'about':'About' }
  - each val, key in obj
    - if (id == key)
      li.active
        a(href='#{key}') #{val}
    - else
      li
        a(href='#{key}') #{val} 
```

基本上，我正在尝试打印导航列表，但对于“主页”li，我希望能够在它之前显示一个小图标。但是不是将变量中的翡翠编译为HTML，而是将其打印为纯文本（以及如果我用我尝试使用的html包装它。这些条件对我的程序来说是必不可少的，所以任何帮助都会非常有益，谢谢非常！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-02-28T20:35:57.097

如果您的行以`-`您编写 JavaScript 开头。否则就是玉。
Jade 有自己的条件和流控制结构和关键字（`each`,`if`和`else`），所以不要在它们前面加上`-`

```
ul.nav
each val, key in obj
  if id == key
    li.active
      a(href='#{key}') #{val}
  else
    li
      a(href='#{key}') #{val} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T02:35:44.483

我会把你的玉换一下。

像这样在 obj 上使用 for：

```
-  for(var key in obj){
    a(href='#'+key)= obj[key]
-  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-17T08:51:03.030

在'href'里面输入'#'+key

```
ul.nav
- var obj = { 'home':'i.icon-home.icon-white Home', 'about':'About'}     
each val, key in obj
  if id == key
    li.active
      a(href='#'+key) #{val}
  else
    li
      a(href='#'+key) #{val} 
```

# web - Microsoft Web 安装程序错误“根级别的数据”

> ID：15582656
> 
> 赞同：1
> 
> 时间：2013-03-23T02:14:31.897
> 
> 标签：web, installation, azure-hdinsight

我正在尝试使用 hdinsight-preview.exe 在我的 Windows 7 64 位操作系统上安装 hdinsight。它是来自 Microsoft 的 Web 平台安装程序。一旦我将自定义提要作为 MSSingleNodeInstaller.msi 提供。我想我应该提供一个 xml 文件。在此之后，它会抛出错误“根级别的数据无效。第 1 行，位置 1”。我尝试卸载并重新安装，但没有成功。每次我启动它，它都会抛出同样的错误。它试图读取哪个 xml 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T02:21:25.907

可能您可以重置 exe 并提供不同的 XML C:\Program Files\Microsoft\Web Platform Installer 并启动：WebPlatformInstaller.exe /reset

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T00:34:52.273

您的自定义提要 *XML) 已损坏，因为该错误与 webPI 应用程序的 XML 处理有关。首先检查您的 XML 的完整性并将其传递给安装程序。

您可以做的是启动离线 webpi 安装程序，它将下载所有 xml 文件，然后您可以在传递之前了解正确的 XML 配置。

```
.\webpicmd /offline /products:HDINSIGHT-PREVIEW /Path:c:\a_writable_folder 
```

[您可以在此处](http://social.msdn.microsoft.com/Forums/en-US/hdinsight/thread/649f03cc-6d2e-407e-af06-c73faa22a074)了解有关运行离线安装程序的更多信息。

# php - FancyBox PHP 表单提交问题

> ID：15582659
> 
> 赞同：1
> 
> 时间：2013-03-23T02:15:04.650
> 
> 标签：php, javascript, jquery, fancybox

好的，所以过去四天我一直遇到问题，几个小时前，我想我可能已经解决了部分问题（fancybox example #5，在他们的网站上，似乎是我想要的东西），但是，我无法让它的任何部分工作。

```
 <?  if($_GET['page'] != "startTime"){ ?>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.4.2.min.js"></script>
    <script type="text/javascript" src="/./fancybox/jquery.mousewheel-3.0.2.pack.js"></script>
    <script type="text/javascript" src="/./fancybox/jquery.fancybox-1.3.1.js"></script>
    <link rel="stylesheet" type="text/css" href="/./fancybox/jquery.fancybox-1.3.1.css" media="screen" />
    <script type="text/javascript">
        $(document).ready(function() {
            $("#startTime").fancybox({
            'padding'       : 0,
            'scrolling'     : 'no',
            'titleShow'     : false,
            'onClosed'      : function() {
            $("#login_error").hide();}
            })
        });
        $("#startTimeForm").bind("submit", function() {
        if ($("#year").val().length < 4) {
            $("#login_error").show();
            $.fancybox.resize();
            return false;
        }
        $.fancybox.showActivity();
        $.ajax({
            type    : "POST",
            cache   : false,
            url     : "downTime.php?page=ajax",
            data    : $(this).serializeArray(),
            success : function(data) {
                $.fancybox(data);
            }
        });
        return false;
        });
    </script>
<? } ?>
<? if($_GET['page'] == "ajax"){
var_dump($_POST); } ?>
<? if($_GET['page'] == "startTime"){?>
<div style="width:250px" class="new">
  <table cellpadding="0" cellspacing="0" border="0" width="100%" class="new">
   <tr>
   <form id="startTimeForm" method=post>
    <p id="login_error">Please, enter data</p>
   <tr>
    <td>Enter Year</td>
    <td><input class="czas" id="sec" name="year" type="text" size="5" maxlength="5" value="00" /></td></tr>
   <tr>
    <td colspan="2" align="center"><br /><input class="czas" type="submit" name="newTime" value="Set Start Time" /></td></tr>
   </form> 
```

我还在下面使用了一个 javascript 函数，我最终希望它能够在上面的代码中工作，但我无法让上面的代码正常工作。它什么也不做。Firebug 也没有报告任何错误。

```
<script>
    function closeFB() {
    <? $unix = mktime(0, 0, 0, 1, 1, $_POST['year']); ?>
    $("#startTimeDiv").html("<div id='message'></div>");
    $("#message").html("<p>Contact Form Submitted!</p>")
    .append("<p>We will be in touch soon.<br><? echo $unix; ?></p>");
    $.fancybox.close(); 
    }
    </script> 
```

因此，任何帮助将不胜感激。请告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:19:00.160

[这里](http://www.picssel.com/playground/jquery/loginFormV2_02jul12.html)的演示解决了这个问题。它产生了另一个问题，但那是另一个问题。我相信那是你的演示，JFK，所以谢谢你。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-23T02:28:53.600

```
$.ajax({
        type    : "POST",
        cache   : false,
        url     : "downTime.php?page=ajax",
        data    : $(this).serializeArray(),
        success : function(data) { 
```

**代替：**

```
 $.fancybox(data); 
```

**尝试**

```
 $("#fancyboxdiv").fancybox(data);

        }
    }); 
```

其中fancyboxdiv 是承载fancybox 的元素的名称。

您将其他功能更改为

```
$("#fancyboxdiv").fancybox().close() 
```

等等。大多数 JQuery UI 组件需要一个元素作为其父元素工作，它通常会修改该元素添加/删除元素并更改 CSS 以提供所需的外观

# search - 使用自定义索引的 Sitecore 搜索

> ID：15582666
> 
> 赞同：1
> 
> 时间：2013-03-23T02:16:03.327
> 
> 标签：search, indexing, sitecore, sitecore6

我正在尝试使用带有自定义索引的 Sitecore Search 来过滤和搜索项目。

这些项目是产品评论，并且都存储在带有`ProductReview`模板的单个文件夹中。

```
+ Reviews
    - Sample Review 1
    - Sample Review 2
    - Sample Review 3 
```

用户将能够按类别、子类别过滤项目并按产品名称搜索。所以表单看起来类似于这样：

```
Category:     [ Drop Down ]
Sub Category: [ Drop Down ]
Product name: [ Single line of Text ]

[ Search Button ] 
```

我发现定义索引的文档非常薄。我正在尝试使用以下属性设置索引。

*   索引网络数据库
*   它应该只包括这三个字段，因为它们是我所需要的
*   只有基于评论模板的项目才会被索引
*   这两个类别字段不需要标记化
*   您可以过滤类别字段

我不确定我是否需要自定义分析器或 DatabaseCrawler，而且我根本没有考虑制作一个。

这是我到目前为止所拥有的，但是我还没有产生一个工作索引：

```
<index id="reviews" type="Sitecore.Search.Index, Sitecore.Kernel">

    <param desc="name">$(id)</param>
    <param desc="folder">reviews</param>
    <Analyzer ref="search/analyzer" />

    <include hint="list:IncludeField">
        <!-- Category -->
        <fieldId>Category</fieldId>

        <!-- Sub Category -->
        <fieldId>Sub Category</fieldId>

        <!-- Product Name -->
        <fieldId>Product Name</fieldId>

    </include>

    <locations hint="list:AddCrawler">
        <web type="Sitecore.Search.Crawlers.DatabaseCrawler, Sitecore.Kernel">
            <Database>web</Database>

            <!-- {GUID} -->
            <Root>{GUID}</Root>

            <Tags>web reviews</Tags>
            <IndexAllFields>false</IndexAllFields>

            <templates hint="list:AddTemplate">

                < !-- Product Review -- >
                <reviews>Product Review</reviews>

            </templates>
        </web>
    </locations>

</index> 
```

任何指针将不胜感激。

*编辑*

我正在寻找的两个主要内容是：

*   如何在不对其进行标记的情况下对类别字段进行索引。
*   如何使用 Lucine.net API 进行过滤。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T15:55:46.040

使用[SitecoreSearchContrib](https://github.com/sitecorian/SitecoreSearchContrib)（又名高级数据库爬虫）库将使您在索引和搜索方面更容易。该库包含示例配置，这将使您更清楚应该如何设置。

一些初始指针，即使您不使用 SitecoreSearchContrib：

*   您还需要索引母版，以便此功能在预览模式下工作。上述库将根据代码运行的上下文自动搜索正确的数据库。
*   您在索引中包含的模板应该是模板 GUID。
*   您的字段包含也应该是 GUID。

# jquery - UL 内的链接不起作用

> ID：15582667
> 
> 赞同：3
> 
> 时间：2013-03-23T02:16:24.670
> 
> 标签：jquery, asp.net

我有一个带有一个列表项的 UL，我用 JQuery 切换。列表项包含一个链接，当我单击该链接时，它什么也不做，列表项只会折叠。

```
 <script>
    $(function () {
        function toggleAccount(e) {
            if ($('#top-login-wrapper').hasClass('down')) {
                $('#top-login-wrapper').removeClass('down');
            } else {
                $('#top-login-wrapper').addClass('down');
            }
        }

        function hideAccount(e) {
            if ($('#top-login-wrapper').hasClass('down')) {
                $('#top-login-wrapper').removeClass('down');
            }
        }

        $("#top-login-wrapper").click(toggleAccount);
        $("#top-login-wrapper").focusout(hideAccount);
        $("#top-login-wrapper").blur(hideAccount);
    });
</script> 
```

标记：

```
<html xmlns="http://www.w3.org/1999/xhtml">
 <head runat="server">
<title></title>
<link href="css.css" rel="stylesheet" />
<script src="jquery-1.9.0.js"></script>
<script src="jquery-1.9.0.min.js"></script> 

    </head>
 <body>
<form id="form1" runat="server">
<div>
    <div class="header-wrap">
        <div id="accountHeader" runat="server">   
                    <ul class="nav">
                        <li>
                            <div id="top-login-wrapper">
                                <a href="#" id="login-hover-link">
                     <asp:Label runat="server" ID="AccountName" Text="John Doe"/>
                                </a>
                         div id="login-hover-cont" class="offscreen profile-widget">
                                    <div class="inner-content">
                                        <h3>
                                            <span><%= AccountName.Text %></span>
                                        </h3>
                                        <span class="account-avatar">
                                            <img src="../img/avater.gif"" alt="" />
                                        </span>
                                        <ul class="profile-links">
                                            <li>
                                                <a href="#">My Account</a>
                                            </li>
                                            <li>
                      <a href="../logout.aspx" runat="server" id="logout">Sign Out</a>
                                            </li>
                                        </ul>

                                    </div>
                                    <div class="profile-widget-arrow-border"></div>
                                    <div class="profile-widget-arrow"></div>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
         </div>
     </div>
   </form>
 </body> 
```

我不知道我在做什么错，有人可以帮助我。

[JsFiddle 链接](http://jsfiddle.net/pWGKM/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T07:47:38.900

使固定：

```
 $(function () {

     function toggleAccount(event) {
    if ($('#top-login-wrapper').hasClass('down')) {
        $('#top-login-wrapper').removeClass('down');
        $('top-login-wrapper').fadeOut(1000);
    } else {
        $('#top-login-wrapper').addClass('down');
        $('top-login-wrapper').fadeIn(1000);
    }
    event.stopPropagation();
}

  function hideAccount(event) {
    if ($('#top-login-wrapper').hasClass('down')) {
        $('#top-login-wrapper').removeClass('down');
    }
  }

  $("#top-login-wrapper").click(toggleAccount);
  $('body').click(hideAccount);
  $('html').click(hideAccount);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T02:50:12.163

我不是asp专家，但是如果您在链接中放置锚标记，则需要在css中对其进行样式设置以拉伸到li标记的尺寸。

```
a {
display: block;
height: 30px; // depends on your setting
width:100%;
} 
```

希望对一些人有所帮助。

# python - 如何加快sklearn SVR？

> ID：15582669
> 
> 赞同：5
> 
> 时间：2013-03-23T02:16:26.487
> 
> 标签：python, svm, sparse-matrix, scikit-learn

我在 python 中使用[sklearn](http://scikit-learn.org/stable/) svr 包实现[SVR 。](http://en.wikipedia.org/wiki/Support_vector_machine#Regression)我的稀疏矩阵大小为 146860 x 10202。我已将其划分为大小为 2500 x 10202 的各种子矩阵。对于每个子矩阵，SVR 拟合大约需要 10 分钟。有什么方法可以加快这个过程？请为此建议任何不同的方法或不同的python包。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T06:23:44.583

您可以平均 SVR 子模型预测。

或者，您可以尝试在使用[Nystroem 方法](http://scikit-learn.org/dev/modules/kernel_approximation.html)计算的内核扩展的输出上拟合线性回归模型。

或者您可以尝试其他非线性回归模型，例如随机树集合或梯度提升回归树。

**编辑**：我忘了说：内核 SVR 模型本身不可扩展，因为它的复杂性超过二次方，因此没有办法“加快速度”。

**编辑 2**：实际上，通常使用将输入变量缩放到`[0, 1]`或`[-1, 1]`单位方差`StandardScaler`可以大大加快收敛速度​​。

此外，默认参数不太可能产生良好的结果：在拟合大型模型之前，您必须网格搜索最佳值，`gamma`并且可能还`epsilon`需要对不断增加的子样本（以检查最佳参数的稳定性）进行网格搜索。

# java - 在枚举中查找最大值

> ID：15582672
> 
> 赞同：1
> 
> 时间：2013-03-23T02:16:39.830
> 
> 标签：java, arrays, enums, java-7, enumeration

我正在为我正在制作的游戏制作课程，但无法弄清楚如何将最高“奖励”返还给用户：

我试图让它做的是根据玩家的杀戮返回奖励。如果他有 38 次击杀，它应该只返回 300。而不是 150。

```
 class EnumTest {

private static int playerKills = 38;

private enum KillReward {

    BEGINNER(10, 150),
    JUNIOR(25, 300),
    EXPERT(50, 500),
    CHAMPION(100, 1000);

    private KillReward(int kills, int reward) {
        this.kills = kills;
        this.reward = reward;
    }

    private int kills, reward;

    private int getKillsNeeded() {
        return kills;
    }

    private int getKillReward() {
        return reward;
    }
}

public static void main (String[] args) {
    for (KillReward k : KillReward.values()) {
        if (playerKills > k.getKillsNeeded()) {
            System.out.println("Kills: " + playerKills + "; Reward: " + k.getKillReward());
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T02:48:17.417

有几种方法可以做到这一点。

一种简单的方法是将奖励分配给变量。在该循环结束时，`reward`以下变量将是适用的最高击杀奖励

```
public static void main (String[] args) {
    KillReward reward = null;
    for (KillReward k : KillReward.values()) {
        if (playerKills > k.getKillsNeeded()) {
            reward = k;
        }
    }
    System.out.println("Kills: " + playerKills + "; Reward: " + k.getKillReward());
} 
```

请注意，这依赖于按顺序列出的枚举，有时可能很脆弱。例如，如果在 CHAMPION 之后添加了一个新的 KillReward 枚举，但它的 killsNeeded 值较低，则它不会返回正确的值。

更好的解决方案是创建一个 Comparator 并使用它首先按 killsNeeded 对枚举值进行排序，从而确保它们始终有序。如果您还按降序对其进行排序，那么您也可以在您点击第一个适用的循环后中断循环。

```
class EnumTest {

    private enum KillReward {

        BEGINNER(10, 150), JUNIOR(25, 300), EXPERT(50, 500), CHAMPION(100, 1000);

        // Sort KillRewards once at initialization
        private static final List<KillReward> sortedKillRewards = new ArrayList<KillReward>();
        static {
            for (KillReward k : values())
                sortedKillRewards.add(k);
            Collections.sort(sortedKillRewards, new Comparator<KillReward>() {
                @Override
                public int compare(KillReward o1, KillReward o2) {
                    return (o1.kills - o2.kills) * -1; // multiplying by -1 makes it
                    // descending
                }
            });
        }

        private KillReward(int kills, int reward) {
            this.kills = kills;
            this.reward = reward;
        }

        private int kills, reward;

        private int getKillsNeeded() {
            return kills;
        }

        private int getKillReward() {
            return reward;
        }

        public static KillReward forKills(int killCount) {
            for (KillReward k : sortedKillRewards)
                if (killCount >= k.kills)
                    return k;

            // must not have enough kills for any reward
            return null;
        }
    }

    public static void main(String[] args) {
        int kills = 9;
        System.out.println("Kills: " + kills + "; Reward: "
                + KillReward.forKills(kills));

        kills = 10;
        System.out.println("Kills: " + kills + "; Reward: "
                + KillReward.forKills(kills));

        kills = 38;
        System.out.println("Kills: " + kills + "; Reward: "
                + KillReward.forKills(kills));
    }

} 
```

# informatica - Informatica 目标文件

> ID：15582673
> 
> 赞同：1
> 
> 时间：2013-03-23T02:16:52.227
> 
> 标签：informatica

我有一个将表中的数据写入平面文件的工作流程。它工作得很好，但我想在每条记录之间插入一个空行。如何实现？任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T09:09:08.673

在这里，您可以创建 2 个目标实例。一个具有正确的数据，在其他情况下传递空行。在会话属性中将合并类型设置为“**并发合并”。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:04:47.180

多种可能性——

1.  您可以将适当的数据集准备到关系表中，然后将其中的数据转储到平面文件中。为了准备该数据集，您可以将空白行插入到该关系目标中。

2.  将空行发送到单独的目标文件（基于使用路由器或类似工具的某些业务条件），之后您可以使用合并文件选项（在会话配置中）将该数据放入单个文件中。

# ruby-on-rails - 由于缺少 Gem，无法使用 railsinstaller 在浏览器中查看站点

> ID：15582677
> 
> 赞同：0
> 
> 时间：2013-03-23T02:17:59.270
> 
> 标签：ruby-on-rails, rubygems

我是超级超级新手，我一直在尝试在我的电脑上设置好所有东西。我已经安装了 RailsInstaller，转到 >railsinstaller_demo，然后输入 rails s。我得到以下错误虽然找不到 gem 'uglifier <>= 1.0.3> x86-mingw32'

我浏览了论坛并找到了如何制作宝石列表，但我注意到它不存在。然后我去了 gembundler 并运行了 $ gem install bundler。我又试了一次，但没有奏效。

我确信答案在这个网站上，但我太新了，以至于我看到所有这些代码行我实际上不知道在哪里输入它。我正在运行 Windows 7。

感谢您花时间帮助真正的初学者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T03:58:11.857

您是否已进入`$ railsinstaller_demo`目录并运行`bundle install`命令？这将为应用程序安装 gem 依赖项；在捆绑 gem 之前，您将无法运行服务器。此外，如果您仍然遇到`uglifier`gem 问题，请继续删除 Gemfile 中的行，然后运行`bundle install`

[如果您需要有关命令提示符的进一步帮助，请访问http://bit.ly/ZajVeW](http://bit.ly/ZajVeW)了解更多信息。

谢谢，
埃文

# button - TinyMCE 3.5.8：创建从用户获取值并将其插入到一对标签之间的按钮的详细步骤

> ID：15582679
> 
> 赞同：0
> 
> 时间：2013-03-23T02:18:43.337
> 
> 标签：button, tinymce

TinyMCE 3.5.8

我只需要创建一个按钮（和模块），它从弹出窗口中获取用户输入的值并将其放在两个标签之间，例如 [bib][/bib]

我很难找到执行此操作的“逐步”，包括哪些文件，代码在哪里等。这一定很简单吗？

我已经用我在“示例”模块中的模块名称替换了所有出现的“示例”，但这就是我的信息结束的地方。

如果有人会这么好！

PS：如果表单字段将javascript验证为“整数”会更好，但也许我要求太多了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:24:20.977

1.  下载tinymce开发版
2.  使用 tiny_mce_dev.js 而不是 tinymce.js 进行开发，以获得更有用的错误消息
3.  创建一个[自己的 tinymce 插件](http://www.tinymce.com/wiki.php/creating_a_plugin)（这并不难），它会打开一个[弹出窗口](http://www.tinymce.com/wiki.php/API3%3aclass.tinyMCEPopup)
4.  获取弹出字段的内容
5.  将其插入编辑器中的正确位置

您应该查看其他 tinymce 插件（在 tiny_mce 目录下的 plugins 目录中）以了解某些事情是如何工作的。有很多插件，其中一些使用弹出窗口。IE搜索替换弹出窗口

# opengl - 任何人都知道这个 GLSL 函数会产生什么坐标？

> ID：15582680
> 
> 赞同：1
> 
> 时间：2013-03-23T02:18:52.183
> 
> 标签：opengl, graphics, glsl

我正在尝试在 WPF 中使用像素着色器，我想尝试以下代码：

```
-1.0 + 2.0 * gl_FragCoord.xy / resolution.xy 
```

但我不确定会产生什么范围的值。我将我的图像作为过滤器应用到图像中，并且可以访问 u 和 v 值 [0-1]。当我这样做时：

```
-1.0 + 2.0 * {U,V}; 
```

我没有得到相同的结果。我知道上面也必须是一个标准化的值范围，但不确定是 -1 到 1，还是 0 到 1，等等。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T02:29:02.287

*   `gl_FragCoord.xy / resolution.xy`为您提供范围 [0,1]。
*   乘以 2 得到范围 [0,2]。
*   减 1 得到范围 [-1,1]

示例： http: [//glsl.heroku.com/e#7712.0](http://glsl.heroku.com/e#7712.0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T02:32:49.400

像编译器一样阅读它。`-1.0 + 2.0`得到减少到`1.0`。然后语句变为`1.0 * glFragCoord.xy / resolution.xy`。`1 * x = x`，鉴于此，等式变为`glFragCoord.xy / resolution.xy`。

实际上，您最终会得到 [0, 1/resolution] 的范围。

如果您的意思是等式，`-1.0 + (2.0 * glFragCoord.xy / resolution.xy)`那么您有 [0, 2/resolution]，减法 1 变为 [-1, (2/resolution)-1]。

# php - 在两个 PHP 页面之间创建加载页面

> ID：15582681
> 
> 赞同：2
> 
> 时间：2013-03-23T02:18:59.040
> 
> 标签：php, javascript, css

我有两个 PHP 页面...页面 A 和页面 B。页面 A 基本上是一个表单，它从用户那里获取输入值并将它们发布到页面 B，该页面运行 python 脚本以对提交的值进行一些计算并显示计算出的页面B上的值。我想在A和B之间包含一个页面C，它显示一个加载栏或图标，同时准备显示页面B的内容，然后将用户引导到页面B。是否有纯PHP或PHP+JS+CSS 这样做的方式？

这个想法是捕获页面 B 的状态，并且只有当页面 B 的内容准备好显示时，用户才会从页面 C 定向到页面 B。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T02:24:17.753

有两种可能的方法来做这样的事情。

两者都以 AJAX 开头；当您提交 A.php 时，它应该发送 AJAX 请求，而不是直接加载 B.php。然后，A 有机会在响应发生时对其采取行动。

为了交流进度，您可以选择以下选项：

1.  B.php 定期打印到输出。这很容易，并且曾经在一些地方用于报告文件压缩进度等。它不是很可靠。缓冲意味着它会跳来跳去并且通常表现不佳。这*不需要*AJAX，但没有它会看起来很丑。
2.  B.php 定期写入文件，D.php 读取该文件并返回结果。现在，您让 A.php 每隔几秒钟（或任何您需要以获得良好结果的任何内容）向 D.php 发送一个请求，并带有一个查询参数，说明要检查哪个请求的进度。这更可靠，但更难设置。

# java - 在请求的时间内无法获得锁

> ID：15582682
> 
> 赞同：2
> 
> 时间：2013-03-23T02:19:01.327
> 
> 标签：java, database, netbeans, derby

标题是我得到的错误，当我单击加载时，我的程序冻结了。我认为这是因为我在声明中做声明，但据我所知，这是解决我的问题的唯一方法。通过加载，我只想重新填充患者列表，但为此我还需要了解他们的情况。代码有效，底部方法是我要修复的。我认为问题是我有 2 条陈述打开，但我不确定。加载：

```
public void DatabaseLoad()
{
    try
    {
        String Name = "Wayne";
        String Pass= "Wayne";
        String Host = "jdbc:derby://localhost:1527/Patients";
        Connection con = DriverManager.getConnection( Host,Name, Pass);
        PatientList.clear();

        Statement stmt8 = con.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE,        
             ResultSet.CONCUR_UPDATABLE);
        String SQL8 = "SELECT * FROM PATIENTS";
        ResultSet rs8 = stmt8.executeQuery( SQL8 );
        ArrayList<PatientCondition> PatientConditions1 = new ArrayList();

        while(rs8.next())
        {
            PatientConditions1 = LoadPatientConditions();
        }

        Statement stmt = con.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE,    
            ResultSet.CONCUR_UPDATABLE);
        String SQL = "SELECT * FROM PATIENTS";
        ResultSet rs = stmt.executeQuery( SQL );

        while(rs.next())
        {
            int id = (rs.getInt("ID"));
            String name = (rs.getString("NAME"));
            int age = (rs.getInt("AGE"));
            String address = (rs.getString("ADDRESS"));
            String sex = (rs.getString("SEX"));
            String phone = (rs.getString("PHONE"));

            Patient p = new Patient(id, name, age, address, sex, phone,
                PatientConditions1);
            PatientList.add(p);
       }

        UpdateTable();
        UpdateAllViews();

        DefaultListModel PatientListModel = new DefaultListModel();

        for (Patient s : PatientList) {
            PatientListModel.addElement(s.getAccountNumber() + "-" + s.getName());
        }

        PatientJList.setModel(PatientListModel);

       }

    catch(SQLException err)
    {
        System.out.println(err.getMessage());
    }

} 
```

这是返回`ArrayList`患者状况的方法

```
public ArrayList LoadPatientConditions()     
{ 
    ArrayList<PatientCondition> PatientConditionsTemp = new ArrayList();
    try
    {
        String Name = "Wayne";
        String Pass= "Wayne";
        String Host = "jdbc:derby://localhost:1527/Patients";
        Connection con = DriverManager.getConnection( Host,Name, Pass);
        Statement stmt = con.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE,   
            ResultSet.CONCUR_UPDATABLE);
        String SQL = "SELECT * FROM PATIENTCONDITIONS";
        ResultSet rs5 = stmt.executeQuery( SQL );

        int e = 0;
        while(rs5.next())
        {
            e++;
            String ConName = (rs5.getString("CONDITION"));
            PatientCondition k = new PatientCondition(e,ConName);
            PatientConditionsTemp.add(k);
        }   
     }
     catch(SQLException err)
     {
         System.out.println(err.getMessage());
     }

     return PatientConditionsTemp;
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-10-26T13:10:42.743

我有一个类似的问题。我正在连接到托管在本地服务器上的 derby db。我创建了 2 个同时连接：

*   带**松鼠**
*   使用**ij**工具

当连接对表进行修改时，它首先获得特定表的锁定。**只有在提交**事务后，连接才会释放此锁。因此，如果第二个连接尝试读/写同一个表，则消息提示说：
*错误 40XL1：在请求的时间内无法获得锁*

要解决此问题，修改表的连接必须提交其事务。

希望这可以帮助 ！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T14:27:48.433

这是一个很好的起点：[http ://wiki.apache.org/db-derby/LockDebugging](http://wiki.apache.org/db-derby/LockDebugging)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-28T09:25:51.337

您还需要关闭语句和结果集，以便在重新启动程序时它们不会打开。在 try 和 catch 语句中的代码行末尾添加`stmt.close();`和。`rs.close();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T04:05:48.393

Why could you not use the same connection object to do both the queries? Like pass that connection object to the `LoadPatientConditions()` as a parameter and use it there.

# cuda - 尝试创建自定义结构类型时 cudaMalloc 不起作用

> ID：15582684
> 
> 赞同：0
> 
> 时间：2013-03-23T02:19:17.903
> 
> 标签：cuda

我正在尝试构建一个 cuda 程序来进行光线跟踪，我有一些代码如下：

```
void build_world(World *w, RGBAColor* buffer){  
w->vp = (ViewPlane*) malloc(sizeof(ViewPlane));

w->vp->hres = 512;
w->vp->vres = 512;
w->vp->buffer = buffer;
w->vp->s = 1;

ViewPlane *viewplane;
cudaMalloc(&viewplane,sizeof(ViewPlane)); //return cudaSuccess but pointer still NULL
cudaMemcpy(viewplane,w->vp,sizeof(ViewPlane),cudaMemcpyHostToDevice);
free(w->vp);
w->vp = viewplane;

cudaMalloc(&(w->background_color),sizeof(RGBAColor)); //return cudaSuccess but pointer still NULL
*(w->background_color) = black;  //Memory access error

cudaMalloc(&(w->sphere),sizeof(Sphere));  //return cudaSuccess but pointer still NULL
w->sphere->center = Point3D(0.0,0.0,0.0);
w->sphere->radius = 300;
} 
```

World *w 是一个静态全局指针，它在全局内存中。我的问题是我无法在设备内存中分配内存，所有“cudaMalloc”调用在大多数情况下都不起作用。

* * *

我做了@RobertCrovella 在评论中建议的事情，如下所示：

```
void build_world(World *w, RGBAColor* buffer){

    checkCudaErrors( cudaMalloc(&(w->vp),sizeof(ViewPlane)));
    getLastCudaError("viewplane allocate failed");

    w->vp->hres = 512;  //memory access errors occurs here
    w->vp->vres = 512;
    w->vp->buffer = buffer;
    w->vp->s = 1;       

    checkCudaErrors( cudaMalloc(&(w->background_color),sizeof(RGBAColor)));
    getLastCudaError("background allocate failed");
    *(w->background_color) = black;

    checkCudaErrors( cudaMalloc(&(w->sphere),sizeof(Sphere)));
    getLastCudaError("sphere allocate failed");

    w->sphere->center = Point3D(0.0,0.0,0.0);
    w->sphere->radius = 300;
} 
```

它工作一次...... cudaMalloc API 仍然返回“cudaSuccess”，而不是。

这是结构的定义：

```
typedef float3 Point3D;
typedef uchar4 RGBAColor;
struct Sphere{
    Point3D center;
    float radius;
};
struct ViewPlane{
public:
    int hres;
    int vres;
    float s;
    //float gamma;
    //float inv_gamma;

    RGBAColor *buffer;

};
struct World{
public:

    ViewPlane *vp;
    RGBAColor *background_color;
    Sphere *sphere;

}; 
```

* * *

在考虑了@RobertCrovella 在下面的答案中提到的问题之后，这里是 build_world 的第三个版本：

```
struct World{
public:

    ViewPlane *vp;
    RGBAColor background_color;
    Sphere *sphere;

};
void build_world(World *w, RGBAColor* buffer){  
    World *h_world;
    h_world = (World*)malloc(sizeof(World));

    ViewPlane *h_vp = (ViewPlane*)malloc(sizeof(ViewPlane));
    h_vp->hres = 512;
    h_vp->vres = 512;
    h_vp->buffer = buffer;
    h_vp->s = 1;        
    checkCudaErrors( cudaMalloc(&(h_world->vp),sizeof(ViewPlane)));
    getLastCudaError("viewplane allocate failed");
    checkCudaErrors( cudaMemcpy(h_world->vp,h_vp,sizeof(ViewPlane),cudaMemcpyHostToDevice));
    getLastCudaError("viewplane memory copy failed");

    h_world->background_color = black;

    Sphere *h_sphere = (Sphere*)malloc(sizeof(Sphere));
    h_sphere->center = Point3D(0.0,0.0,0.0);
    h_sphere->radius = 300;
    checkCudaErrors( cudaMalloc(&(h_world->sphere),sizeof(Sphere)));
    getLastCudaError("sphere allocate failed");
    checkCudaErrors( cudaMemcpy(h_world->sphere,h_sphere,sizeof(Sphere),cudaMemcpyHostToDevice));
    getLastCudaError("sphere memory copy failed");

    checkCudaErrors( cudaMalloc( &w , sizeof(World)));
    getLastCudaError( "world allocate failed" );
    checkCudaErrors( cudaMemcpy(w,h_world,sizeof(World),cudaMemcpyHostToDevice));
    getLastCudaError("world memory copy failed");

    free(h_world);free(h_vp);free(h_sphere);    
} 
```

这一次，所有`cudaMemcpy`的调用都不起作用：运行到这个函数结束时，`h_vp`and的值`h_sphere`是好的；`h_world->vp`并且`h_world->sphere`确实指向设备内存区域但包含错误值；`w`没有正确的值，它包含的所有指针都是 0x00000000 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T15:31:41.040

这个问题已正式成为“一团糟”，因为您发布了两个截然不同的版本`build_world`，除了我要求您添加的错误检查之外，它们在重要方面有所不同。我会尝试解决我看到的一些问题，但是我的理解因您发布的混乱而蒙上阴影。

*   如果`*w`您传递给`build_world`的指针已经是一个设备指针（即分配给`cudaMalloc`），这似乎是您所说的，那么这些都不起作用。在设备上创建数据结构，其中还包含指向也在设备上的其他数据结构的指针，这是一个有点不直观的过程。您*不能*将指针传递给已经存在于设备上的指针`cudaMalloc`（即已经是使用`cudaMalloc`.`cudaMalloc`在设备数据结构中，使用 cudaMemcpy。要查看我所指的另一个示例，请查看[此处](https://stackoverflow.com/questions/15431365/cudamemcpy-segmentation-fault/15435592#15435592)。
*   您不能取消引用主机代码中的设备指针。例如：

    ```
    w->vp->hres = 512; 
    ```

    如果`w`or`w->vp`是用 设置的指针`cudaMalloc`，则上述操作无效。相反，有必要在主机上创建一个并行数据结构，在那里设置值，然后`cudaMemcpy`从主机到设备：

    ```
    h_vp->hres = 512;
    cudaMemcpy(d_vp, h_vp, sizeof(vp_struct), cudaMemcpyHostToDevice); 
    ```

    请注意，在这个简化的描述中，我忽略了我在上面第一点中提到的问题。

*   如果您`build_world`一遍又一遍地调用，则需要确保`cudaFree`在传递相同`*w`指针的情况下正确使用。

**编辑：**作为对第三版的附加发布的回应，`build_world`我选择创建一个示例代码，该代码应该修复剩余的问题：

```
#include <stdio.h>
#include <vector_functions.h>

#define black make_uchar4(4,3,2,1)
#define white make_uchar4(0,1,2,3)

#define cudaCheckErrors(msg) \
    do { \
        cudaError_t __err = cudaGetLastError(); \
        if (__err != cudaSuccess) { \
            fprintf(stderr, "Fatal error: %s (%s at %s:%d)\n", \
                msg, cudaGetErrorString(__err), \
                __FILE__, __LINE__); \
            fprintf(stderr, "*** FAILED - ABORTING\n"); \
            exit(1); \
        } \
    } while (0)

typedef float3 Point3D;
typedef uchar4 RGBAColor;
struct Sphere{
    Point3D center;
    float radius;
};
struct ViewPlane{
public:
    int hres;
    int vres;
    float s;
    //float gamma;
    //float inv_gamma;

    RGBAColor *buffer;

};

struct World{
public:

    ViewPlane *vp;
    RGBAColor background_color;
    Sphere *sphere;

};

__global__ void my_kernel(World *w){

  printf("w->vp->hres = %d\n", w->vp->hres);
  printf("w->background_color.y = %d\n", w->background_color.y);
  printf("w->sphere->radius = %f\n", w->sphere->radius);
  printf("w->vp->buffer->y = %d\n", w->vp->buffer->y);

}

void build_world(World **w, RGBAColor* buffer){
    World *h_world;
    h_world = (World*)malloc(sizeof(World));

    ViewPlane *h_vp = (ViewPlane*)malloc(sizeof(ViewPlane));
    h_vp->hres = 512;
    h_vp->vres = 512;
    h_vp->s = 1;
    cudaMalloc((void **)&(h_vp->buffer), sizeof(RGBAColor));
    cudaCheckErrors("viewplane RGBAColor allocate failed");
    cudaMemcpy(h_vp->buffer, buffer, sizeof(RGBAColor), cudaMemcpyHostToDevice);
    cudaCheckErrors("viewplane RGBAColor copy failed");

    cudaMalloc((void **)&(h_world->vp),sizeof(ViewPlane));
    cudaCheckErrors("viewplane allocate failed");
    cudaMemcpy(h_world->vp,h_vp,sizeof(ViewPlane),cudaMemcpyHostToDevice);
    cudaCheckErrors("viewplane memory copy failed");

    h_world->background_color = black;

    Sphere *h_sphere = (Sphere*)malloc(sizeof(Sphere));
    h_sphere->center = (Point3D) make_float3(0.0,0.0,0.0);
    h_sphere->radius = 300;
    cudaMalloc((void **)&(h_world->sphere),sizeof(Sphere));
    cudaCheckErrors("sphere allocate failed");
    cudaMemcpy(h_world->sphere,h_sphere,sizeof(Sphere),cudaMemcpyHostToDevice);
    cudaCheckErrors("sphere memory copy failed");

    cudaMalloc((void **)w , sizeof(World));
    cudaCheckErrors( "world allocate failed" );
    cudaMemcpy(*w,h_world,sizeof(World),cudaMemcpyHostToDevice);
    cudaCheckErrors("world memory copy failed");

    free(h_world);free(h_vp);free(h_sphere);
}

int main(){

   World *d_w;
   RGBAColor my_buffer = white;

   build_world(&d_w, &my_buffer);
   my_kernel<<<1,1>>>(d_w);
   cudaDeviceSynchronize();
   cudaCheckErrors("kernel fail");
   return 0;
} 
```

您可以使用以下代码编译此代码`nvcc -arch=sm_20 -o t98 t98.cu`

当我编译并运行这段代码时，我没有得到任何错误和以下输出：

```
$ ./t98
w->vp->hres = 512
w->background_color.y = 3
w->sphere->radius = 300.000000
w->vp->buffer->y = 1
$ 
```

# javascript - 刷新嵌入式 Ruby 提供的 HTML 内容而不重新加载页面

> ID：15582686
> 
> 赞同：0
> 
> 时间：2013-03-23T02:19:38.143
> 
> 标签：javascript, html, ruby-on-rails, renderpartial

我在找到解决方案时遇到了一些麻烦。基本上，我有一个嵌入的 ruby​​ 每个循环，其主体是为模型的某个子组渲染的部分。例如：

```
<li id="thing">
  <% items.each do |i| %>
    <%= render :partial => 'item', :locals => {:i => i} %>
  <% end %>
</li> 
```

我想知道是否有一种方法可以使用 jQuery、AJAX 甚至只是 rails（我确信每个人都有一个可实施的解决方案，而且我对所有这些都感兴趣）来刷新该项目列表。我希望能够做到这一点的原因是，目前，我已经实现了允许创建现在的“项目”或更新现有的“项目”的功能，而无需重新加载页面（表单在这两种情况下单击按钮都会出现在某个容器中），我希望在提交列表时自动更新新信息或新“项目”。尝试刷新整个列表会是更好的方法吗？或者有没有办法将新创建/更新的对象附加到部分列表（作为部分）客户端？

我尝试了以下语句，但似乎无法避免在渲染时出现“未定义方法”错误。

`$("#activeTab").append("<%= escape_javascript(render :partial => 'item', :locals => {:i => Item.order(:created_at).last}) %>");`

我认为这将是一个很好的解决方案，因为一旦页面被导航并返回，列表将再次加载。这只是在您仍在页面上时附加到静态列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:37:59.343

抓住你用来提交这个新项目的任何东西（我称之为submit_button）并使用jquery重新加载页面。

$('#submit_button').click(function() {

```
 location.reload();

}); 
```

添加到 form_for :remote => true

# vb.net - 在屏幕上绘制图形

> ID：15582689
> 
> 赞同：0
> 
> 时间：2013-03-23T02:20:09.987
> 
> 标签：vb.net, graphics

我正在使用 Visual Basic.Net 并在屏幕上绘制图形。

这是我的代码：

```
Private Sub Button1_Click(ByVal sender As System.Object, 
                          ByVal e As System.EventArgs) Handles Button1.Click
Dim gr As Graphics = Graphics.FromHwnd(New IntPtr(0))
gr.DrawString("text on screen", 
               New Font(Me.Font.FontFamily, 25, 
               FontStyle.Regular), Brushes.Red, 50, 50)
End Sub 
```

在上面的代码中，文本被绘制在屏幕上。我的问题是：如何删除绘制到屏幕上的文本？我看到有一个 .Clear 方法，但是，它'清除整个绘图表面并用指定的背景颜色填充它'，而不仅仅是删除绘制的文本。

提前致谢。

**编辑**

我想开发一个潜意识消息应用程序，当用户使用其他应用程序时，它将在屏幕上显示消息。透明的表格会是最好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T03:55:25.730

我发现以下代码有效：

```
 Private WithEvents TextForm As New Form
Private Zipper As New FontFamily("Zipper")

Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    With TextForm
        .BackColor = Color.DimGray
        .TransparencyKey = Color.DimGray
        .FormBorderStyle = Windows.Forms.FormBorderStyle.None
        .ShowInTaskbar = False
        .WindowState = FormWindowState.Maximized
        .Opacity = 0
        .Show(Me)
    End With
End Sub

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Static showText As Boolean
    showText = Not showText
    If showText Then TextForm.Opacity = 0.99 Else TextForm.Opacity = 0
End Sub

Private Sub TextForm_Paint(sender As Object, e As System.Windows.Forms.PaintEventArgs) Handles TextForm.Paint
    e.Graphics.DrawString("text on screen 12345", New Font(Zipper, 30, FontStyle.Bold), Brushes.Red, 50, 50)
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T14:58:05.493

采用不同的位图并在单独的位图中绘制每个新事物，然后将新位图与旧位图合并。当您要删除文本时，请重新加载没有文本的旧位图。在新位图中搜索绘图并保存绘图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-16T10:01:40.323

你可以试试这个：

```
Dim Graphics0 as Graphics = Graphics.fromHwnd(0) 'This is the desktop's graphics
Graphics0.DrawText("Test 1..2..3..",New Font(Arial,10),Brushes.Black,New Point(0,0)) 
```

# unix - Makefile 命令以文件存在为条件

> ID：15582699
> 
> 赞同：3
> 
> 时间：2013-03-23T02:22:44.950
> 
> 标签：unix, makefile, latex

我有许多乳胶文件，我希望能够方便地编译它们。我的makefile目前如下。

```
targets := $(patsubst %.tex, %.pdf, $(wildcard *.tex))
.PHONY: all

all: $(targets)

.SECONDEXPANSION:
%.pdf: %.tex $$(wildcard $$*_inc/*.*)
    pdflatex $< 
```

这样，如果存在包含文件夹，则该文件夹中的所有内容都将被视为依赖项。

但是，我还想自动运行相关的 python 脚本。这些可能是绘图的创建或要包含的值的计算。我试图进行以下修改。

```
targets := $(patsubst %.tex, %.pdf, $(wildcard *.tex))

all: $(targets)
.PHONY: all run_%

.SECONDEXPANSION:
%.pdf: %.tex $$(wildcard $$*_inc/*.*) $$(patsubst %, run_%, $$(wildcard $$*_inc/*.py))
    pdflatex $<

run_%: %
    $< 
```

但是，这并不像我期望的那样工作。我有以下文件夹结构。

```
|
|-Makefile
|-paper.tex
|-paper_inc/
|---a.txt
|---b.py 
```

我希望它能够运行`b.py`，然后运行`pdflatex paper.tex`。但是，`b.py`是不运行的。如果我查看创建的依赖项，我会看到`paper_inc/a.txt`并且`paper_inc/b.py`是 的依赖项`paper.pdf`，但`run_paper_inc/b.py`不是。

我不完全确定这是什么问题，因为它觉得它应该起作用。此外，我还为`%.pdf`规则尝试了以下几行。

```
%.pdf: %.tex $$(wildcard $$*_inc/*.*) $$(addprefix run_,$$(wildcard $$*_inc/*.py))
%.pdf: %.tex $$(wildcard $$*_inc/*.*) $$(shell ls $$*_inc/*.py | sed 's/^/run/')
%.pdf: %.tex $$(wildcard $$*_inc/*.*) $$(shell ls $$*_inc/*.py | awk '{print "prefix "$0}') 
```

但是，对于这些规则中的每一个，我都会收到错误消息`make: *** No rule to make target 'paper.pdf'. Stop.`

应该做些什么来解决这个错误，或者，我应该用什么来代替`make`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T16:59:09.287

你有两个问题。

**第一的：**

```
run_%: %
    $< 
```

从[手册](http://www.gnu.org/software/make/manual/make.html#Pattern-Match)：

> 当目标模式不包含斜杠（通常不包含）时，文件名中的目录名会在与目标前缀和后缀进行比较之前从文件名中删除。在将文件名与目标模式进行比较之后，目录名以及结束它们的斜线被添加到从模式规则的先决条件模式和文件名生成的先决条件文件名中。

这有点难以理解，但基本上当 Make 尝试构建时`run_paper_inc/b.py`，它会寻找匹配的模式规则`b.py`。上面的规则不符合。但这确实：

```
%.py:
    $(subst run_,,$@) 
```

**第二：**

```
.SECONDEXPANSION:
%.pdf: ... $$(patsubst %, run_%, $$(wildcard $$*_inc/*.py))
    ... 
```

Make 的一大缺点是它对通配符的处理很弱。在这种情况下`%`，不能同时用于模式规则和 patsubst。但是有一个办法：

```
.SECONDEXPANSION:
%.pdf: ... $$(addprefix run_,$$(wildcard %_inc/*.py))
    ... 
```

# wordpress - 获取 Google Webmasters 时 301 永久移动

> ID：15582704
> 
> 赞同：1
> 
> 时间：2013-03-23T02:23:44.773
> 
> 标签：wordpress

当我获取 Google Webmasters 时，我使用的是 Wordpress 3.5.1

```
Fetch as Google
This is how Googlebot fetched the page.
URL: http://www.drieanto.net/
Date: Friday, March 22, 2013 at 7:14:20 PM PDT
Googlebot Type: Web
Download Time (in milliseconds): 392
HTTP/1.1 301 Moved Permanently
Server: hosting
Date: Sat, 23 Mar 2013 02:14:22 GMT
Content-Type: text/html; charset=UTF-8
Content-Length: 0
Connection: keep-alive
X-Powered-By: PHP/5.2.17
X-Pingback: http://drieanto.net/xmlrpc.php
Location: http://drieanto.net/ 
```

我怎么解决这个问题。

# php - 在 Preg Match 中使用通配符

> ID：15582711
> 
> 赞同：-1
> 
> 时间：2013-03-23T02:25:20.590
> 
> 标签：php, regex

我正在制作一个 PHP 刮板，并有以下代码通过查看 span 来从页面中获取标题`uiButtonText`。但是我现在想扫描一个超链接并让它 pregmatch `<a href="*" class="thelink" onclick="*">(.*)</a>`。

我想成为通配符的星星，这样即使href和onclick每个都发生变化，我也可以从页面中获取超链接。

`if (preg_match("/<span class=\"uiButtonText\">(.*)<\/span>/i", $cache, $matches)){print($matches[1] . "\n");}else {}`

我的完整代码：

```
<?php
$userAgent = 'Googlebot/2.1 (http://www.googlebot.com/bot.html)';
$url = "http://www.facebook.com/MauiNuiBotanicalGardens/info";
$ch = curl_init();
curl_setopt($ch, CURLOPT_USERAGENT, $userAgent);
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_FAILONERROR, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_AUTOREFERER, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,true);
curl_setopt($ch, CURLOPT_TIMEOUT, 10);
$html = curl_exec($ch);
$cache = $html;

if (preg_match("/<span class=\"uiButtonText\">(.*)<\/span>/i", $cache, $matches))    {print($matches[1] . "\n");}else {}
?>` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T02:34:35.927

如果你想坚持你的正则表达式，试试这个：

```
$html = '<span class="uiButtonText"><a href="http://google.com" class="thelink" onclick="#">Google!</a></span>';

preg_match("/<span class=\"uiButtonText\"><a href=\".*\" class=\"thelink\" onclick=\".*\">(.*)<\/a><\/span>/i", $html, $matches);

print_r($matches[1]); 
```

> 输出：
> 谷歌！

更好的方法是使用[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)并执行以下操作：

```
$html = file_get_html("http://www.facebook.com/MauiNuiBotanicalGardens/info");
foreach($html->find("a.thelink") as $link){
    echo $link->innertext . "<BR>";
} 
```

以上未经测试，但应该可以工作

# file - 为什么开源项目经常有没有文件扩展名的文档文件？

> ID：15582713
> 
> 赞同：-1
> 
> 时间：2013-03-23T02:26:34.403
> 
> 标签：file, open-source, file-extension

开源项目通常带有一个自述文件、一个包含许可证文本的文件，可能还有其他各种东西。通常，人们会发现这些杂乱无章的文档文件在命名时没有文件扩展名。[这](https://github.com/antirez/redis)是一个来自 Github 的例子。名称通常大写，如“README”而不是“readme.txt”。

这有点麻烦，因为如果您下载项目的副本，为了打开这些文件，您必须添加文件扩展名，或者每次都指示操作系统应该在哪个程序中打开它。为什么要有人不想添加文件扩展名吗？这种令人讨厌的约定从何而来？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-23T03:19:17.150

如果您经常使用 Linux 系统（或其他传统的类 UNIX 系统，例如 BSD），您可能会注意到许多类型的文件缺少扩展名，包括可执行文件。

Linux 和其他 *nix 系统倾向于依赖文件扩展名以外的方法来确定文件的类型（例如开头的魔术代码，许多文件格式都有）。如果您的系统带有“文件”实用程序（预装在 Windows 以外的大多数操作系统上），您可以对此进行测试。

将文件命名为 README 等的做法，不带扩展名，可以追溯到很久以前。在控制台上工作时，您倾向于通过执行类似的操作来打开文件`program ./path/to/file`，其中 'program' 是您要打开的程序的名称，而 './path/to/file' 是您要打开的文件的路径想要打开（在这种情况下是相对的，或绝对的）。由于您正在指示特定程序打开文件，因此无需进行实际检测来确定要打开的程序（尽管现代文本程序通常会尝试检测非文本文件并发出警告）。

另一方面，Windows 将文件扩展名与特定程序关联以打开它；它不会查看文件内容来确定要打开哪个程序。要在 Windows 中打开没有扩展名的文件，只需右键单击该文件，然后您可以选择要打开的任何程序。

在 Linux（和其他 *nix 操作系统）的图形环境中，文件扩展名不是必需的，因为它们并不完全依赖扩展名来确定文件的类型或与之关联的程序。相反，关联由 MIME 类型确定，而 MIME 类型又可以由上述“魔术代码”确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T02:33:26.137

我假设它来自旧的 Linux 或 UNIX 系统，你所拥有的只是一个控制台和一些文本编辑器。没有什么可以根据文件名的一部分自动选择程序。许多 Linux 用户在处理文件和目录时继续以这种方式工作。我以前是这样，直到我看到人们在使用 Windows Explorer 和鼠标时操作速度要快得多。

取而代之的是，这些文件以大写字母命名，因为`ls`它们会按 ASCII 整理顺序列出，而作者希望这些文件首先出现。（我不确定它是否仍然有效。）那时，他们很有帮助！

# drupal-webform - 使用网络表单向特定用户发送电子邮件

> ID：15582716
> 
> 赞同：0
> 
> 时间：2013-03-23T02:27:05.917
> 
> 标签：drupal-webform

在视图中，每次用户点击链接“点击连接”字段时，都必须根据其 id 向特定用户名发送一封电子邮件。我正在使用网络表单发送邮件。但是，它限制我将所有邮件发送到同一个电子邮件地址。为了隐藏必须向其发送邮件的电子邮件，我在网络表单的隐藏字段中获取用户的 ID（必须向其发送邮件）。但是，我想不出一种动态获取目标电子邮件的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T08:37:08.950

I think this should do the trick

[http://drupal.org/project/webform_bonus](http://drupal.org/project/webform_bonus)

# php - 无法让 PHP 将信息发布到数据库

> ID：15582718
> 
> 赞同：0
> 
> 时间：2013-03-23T02:27:25.287
> 
> 标签：php, mysql

我已经编写了一个脚本来将信息发布到我的数据库中，因为我无法发布它并且需要帮助指出我所缺少的内容。

我的 php 帖子看起来像这样：

```
$query = "SELECT * from departments";
$res = mysql_query($query);
echo '<div id="department" >';
echo '<form action="depedit.php" method="post">';
echo '<input type="text" placeholder="Search departments">';
echo '<br>';
echo '</form>';
echo '</div>';
echo '<div id="depadd">'; 
echo '<form>';
echo '<table width="0" border="0">';
echo '<tr>';
echo '<td>Name:</td>';
echo '</tr>';
echo '<tr>';
echo '<td>';
echo "<select name='depid'>";
while ($row = mysql_fetch_array($res)) {
    echo "<option value='".$row['id']."'>".$row['depname']."</option>";
}
echo "</select>";
echo '</td>';
echo '  </tr>';
echo '<tr>';
echo '<td>&nbsp;</td>';
echo '</tr>';
echo '  <tr>';
echo '<td><label class="limit">Select Limit for active courses in Learning Locker:</label></td>';
echo '  </tr>';
echo '  <tr>';
echo '<td>';
echo "<select name='courselimit'>";
echo "<option value='1'>1</option>";
echo "<option value='2'>2</option>";
echo "<option value='3'>3</option>";
echo "<option value='4'>4</option>";
echo "<option value='5'>5</option>";
echo "<option value='0'>Unlimited</option>";
echo "</select>";
echo '</td>';
echo '</tr>';
echo '<tr>';
echo '<td>&nbsp;</td>';
echo '</tr>';
echo '<tr>';
echo '<td><input type="radio" id="1" name="senabled" value="1"/><label for="c1" class="required">Required<br>(Study Shredder Feature Enabled)</br></label></td>';
echo '<td><input type="radio" id="0" name="senabled" value="0"/><label for="c1" class="optional">Optional</label></td>';
echo '</tr>';
echo '<tr>';
echo '<td><input type="hidden" name="orgid" value="'.$adminorgid.'"></td>';
echo '</tr>';
echo '<tr>';
echo '<td><input type="hidden" name="createdby" value="'.$userid.'"></td>';
echo '</tr>';  
echo '<tr>';
echo '<td><input type="hidden" name="timecreated" value="'.time(now).'"></td>';
echo '</tr>';
echo '<tr>';
echo '<td>&nbsp;</td>';
echo '</tr>';
echo '  <tr>';
echo '    <td><button type="submit" class="btn">Submit</button></td>';
echo '  </tr>';
echo '</table>';
echo "</form>";
echo '</div>'; 
```

depedit.php 看起来像这样：

```
 $adddep = "INSERT INTO organization_dep (orgid,depid,courselimit,senabled,createdby,timecreated) VALUES ('".$_POST["orgid"].",".$_POST["depid"].",".$_POST["courselimit"].",".$_POST["senabled"].",".$_POST["createdby"].",".$_POST["timecreated"]."')";
    $res = mysql_query($adddep);

    if ($res === TRUE) {
        echo "Department added successfully";
    } else{
        printf("Could not create department");
    } 
```

正确的信息似乎已通过，因为 url 在其中显示以下信息：

/index.php?depid=6&courselimit=3&senabled=1&orgid=9&createdby=1129&timecreated=1364005206

对此的任何帮助将不胜感激，因为我确信它只是我正在寻找的一些简单的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T02:35:54.630

您想从 $_POST 获取值

```
('".$_POST["orgid"].",".$_POST["depid"].",".$_POST["courselimit"].",".$_POST["senabled"].",".$_POST["createdby"].",".$_POST["timecreated"]."')"; 
```

但是你说它是通过 URL 传递的，这看起来你需要使用 $_GET 来获取值

--- 还有一个小技巧，您可以使用 echo 打印多行。只要你关闭它，最后

例如

```
echo " <html>
<body>
</body>
</html>
"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T02:36:27.810

我认为在这之前你有很多事情要做：

1.  只有第一种形式，似乎是用于搜索部门，具有方法和动作属性
2.  由于第二个表单没有 action 属性，所以它不是提交到 depedit.php 而是提交到具有该表单的同一页面。
3.  由于第二种形式没有方法属性，它默认为 GET，并且您正在尝试读取 PHP 中的 POST 变量。如果它不使用 GET，您将不会在生成的 URL 中看到这些参数。
4.  **在 SQL 插入语句中，每个文本**值必须有单引号，但int 值**不能。**现在你在第一个值之前有一个单引号，在最后一个值之前有一个单引号，这是没有意义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T02:36:39.393

第一：这部分不会被发布“depedit.php”，因为没有提交

`echo '<form action="depedit.php" method="post">'; echo '<input type="text" placeholder="Search departments">'; echo '<br>'; echo '</form>';`

第二：这永远不会发布到 depedit.php，因为您`<form>`没有指定“depedit.php”的操作

```
echo '<form>';
echo '<table width="0" border="0">';
echo '<tr>';
//other codes
echo "</form>"; 
```

也许你的意思是删除第一个`echo '</form>'(line 7)`和第二个`<form>(line 10)`

# c# - '由于内部错误，服务器无法处理请求'。WCF 服务，当部署在 IIS 上时

> ID：15582721
> 
> 赞同：1
> 
> 时间：2013-03-23T02:28:12.770
> 
> 标签：c#, .net, wcf, iis, deployment

我正在尝试使用我创建的服务，该服务在部署在本地主机上时可以完美使用。但是当我在服务器（IIS）上部署后尝试使用相同的服务时。我收到以下错误

> 由于内部错误，服务器无法处理请求。有关错误的更多信息，请在服务器上打开 IncludeExceptionDetailInFaults（来自 ServiceBehaviorAttribute 或来自配置行为），以便将异常信息发送回客户端，或根据 Microsoft .NET Framework 3.0 SDK 文档打开跟踪并检查服务器跟踪日志。

关于我的服务的详细信息：我调用第 3 方服务： [http](http://www.webservicex.net/sunsetriseservice.asmx?op=GetSunSetRiseTime) ://www.webservicex.net/sunsetriseservice.asmx?op=GetSunSetRiseTime 来创建我的服务。

编辑：全栈跟踪：

```
Stack Trace: 

[FaultException: The server was unable to process the request due to an internal error.  For more information about the error, either turn on IncludeExceptionDetailInFaults (either from ServiceBehaviorAttribute or from the <serviceDebug> configuration behavior) on the server in order to send the exception information back to the client, or turn on tracing as per the Microsoft .NET Framework 3.0 SDK documentation and inspect the server trace logs.]
   System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) +10614671
   System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) +336
   ServiceReference1.IService.sunsetSunRiseTime(String strlatitude, String strlongitude) +0
   _Default.btSubmit_click(Object sender, EventArgs e) +85
   System.Web.UI.WebControls.Button.OnClick(EventArgs e) +9553178
   System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +103
   System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +35
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +1724 
```

**编辑 2：**服务描述： [http](http://www.webservicex.net/WS/WSDetails.aspx?WSID=65&CATID=12) ://www.webservicex.net/WS/WSDetails.aspx?WSID=65&CATID=12 这是因为我使用的是**asmx**服务而不是**.svc**。对不起，如果我听起来很困惑！
**编辑 3**服务器端 web.config：[https ://gist.github.com/KodeSeeker/5226269](https://gist.github.com/KodeSeeker/5226269)

**编辑 4：** ** 将 IncludeExceptionDetailInFaults 设置为 true（PS 我在一个不断断开连接的远程服务器上工作，所以我不确定这个错误是否也是因为这个）：

```
Stack Trace: 

[FaultException`1: The HTTP request was forbidden with client authentication scheme 'Anonymous'.]
   System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) +10614671
   System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) +336
   ServiceReference1.IService.sunsetSunRiseTime(String strlatitude, String strlongitude) +0
   _Default.btSubmit_click(Object sender, EventArgs e) +85
   System.Web.UI.WebControls.Button.OnClick(EventArgs e) +9553178
   System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +103
   System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +35
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +1724 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T05:17:22.877

我将从查看此消息开始：

> 客户端身份验证方案“匿名”禁止 HTTP 请求

您是否在 IIS 中启用了匿名身份验证？您可以在 IIS 管理器中进行检查。

![在此处输入图像描述](../Images/ce4223ed0ab7fe358f3b731419768533.png)

# html - 水平线的 HR 标签不起作用

> ID：15582729
> 
> 赞同：1
> 
> 时间：2013-03-23T02:29:10.757
> 
> 标签：html, css, colors, line

我不知道为什么我的`<hr>`样式不起作用。基本上我只想要一条水平黑线分隔我的元素。

[这](http://violetoeuvre.com/)是我的[网站](http://violetoeuvre.com/)

# CSS

```
/* Horizontal Line */
.line_break {
    width:1000px;
    height: 5px;
    float: left;
    color: black;
    padding-top: 3px;
    background-color: rgba(255,255,255,.5);
} 
```

# HTML

```
<!---Navigation Menu ______________________________________________-->

    <div id="main_menu" class="wrapper_nav_box">
            <div class="nav_box">
                <a href="writing.html">WRITING</a> 
            </div>
            <div class="nav_box">
                <a href="http://tumblr.com">BLOG</a>
            </div>
            <div class="nav_box">
                <a href="contact.html">CONTACT</a>
            </div>
    </div>

    <hr class="line_break"> 
```

如果放大，您会看到左侧有一个奇怪的边框。我试过弄乱高度，但它永远不会改变。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T02:33:52.673

您可以通过对当前 CSS 进行一些编辑来做到这一点。

CSS：

```
.line_break {
    //width:1000px;
    //height: 5px;
    //float: left;
    //color: black;
    //padding-top: 3px;
    //background-color: rgba(255,255,255,.5);
    border: none;  // remove default style
    border-bottom: 3px solid black;  //apply style
} 
```

示例：http: [//jsfiddle.net/PPYqx/](http://jsfiddle.net/PPYqx/)

# .net - 如何从包中设置“中断所有异常”

> ID：15582736
> 
> 赞同：19
> 
> 时间：2013-03-23T02:31:29.377
> 
> 标签：.net, visual-studio-2010, visual-studio, visual-studio-debugging, visual-studio-extensions

我想进行扩展以在调试器中快速切换 CLR 异常的中断。
我已经尝试了几种方法，但都不是令人满意的。

这是我已经尝试过的：

1.  `ExceptionSettings.SetBreakWhenThrown`（[MSDN](http://msdn.microsoft.com/en-us/library/envdte90.exceptionsettings.setbreakwhenthrown.aspx)）
    这非常慢（请参阅[此连接问题](http://connect.microsoft.com/VisualStudio/feedback/details/530408/abysmal-performance-when-changing-debugger-break-on-throw-settings)）。我已经尝试了来自问题“ [Toggle “Break when an exception is throwed.”中的方法。使用宏或键盘快捷键](https://stackoverflow.com/questions/958011/toggle-break-when-an-exception-is-thrown-using-macro-or-keyboard-shortcut)“并且似乎都不能可靠地工作：在大多数情况下，只有顶级复选框被设置，并且在调试时它实际上不会因异常而中断。

2.  调用`DTE.ExecuteCommand("Debug.Exceptions")`以显示窗口，并在此之前调用`SetWindowsHookEx`( [MSDN](http://msdn.microsoft.com/en-nz/library/windows/desktop/ms644990%28v=vs.85%29.aspx) ) 以在它出现之前拦截它（这样用户就不会闪现）。这似乎是可能的，因为我能够拦截消息并获取`HWND`. 但它似乎很hacky，并且窗口并不容易正确操作（它`SysListView32`与自定义复选框和有一些奇怪的组合`SysTreeView32`）。所以我把它作为最后的机会解决方案。

3.  在调试会话开始时以某种方式获取`IDebugEngine2`( [MSDN](http://msdn.microsoft.com/en-nz/library/bb145310.aspx) ) 托管代码和调用`IDebugEngine2.SetException`( [MSDN )。](http://msdn.microsoft.com/en-us/library/bb162170.aspx)这似乎是可能的，但我在获取调试引擎时遇到了问题。我已经尝试过[在 MSDN 论坛上](http://social.msdn.microsoft.com/Forums/en-US/vsx/thread/3b75164e-31c4-49c8-923f-2b91be49080a)`IVsLoader`描述的方法，但我很确定它给了我一个与调试会话无关的新实例。

    我也在这里问过这个问题：“ [Visual Studio: How to get IDebugEngine2 from VS Package (except IVsLoader)](https://stackoverflow.com/questions/15524038/visual-studio-how-to-get-idebugengine2-from-vs-package-except-ivsloader) ”，但没有得到解决方案。

    我尝试过使用`IVsDebugger.AdviseDebugEventCallback`（[MSDN](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.shell.interop.ivsdebugger.advisedebugeventcallback%28v=vs.80%29.aspx)）并传入`IDebugEventCallback2`（[MSDN](http://msdn.microsoft.com/en-us/library/bb145585(v=vs.80).aspx)）的实现，但我总是得到`null`（`pEngine`也没有`IDebugEngineCreateEvent2`）。

    我确实得到了`IDebugSessionCreateEvent2`（未记录的？）并且可以从中得到`IDebugSession2`，但是它的`SetException`调用总是给我一个`HRESULT`错误的论点，所以我可能在这里遗漏了一些东西（`SetException`从引擎调用`IVsLoader`给了确定，只是不起作用）。

是否有其他方法比这些方法更好，或者我错过了现有方法中的某些内容？

* * *

**更新/注意：**
如果你发现这个问题是因为你想要一个更快的“打破所有异常”，我做了一个免费的扩展，你可以从 Visual Studio Gallery 获得：[Exception Breaker](http://visualstudiogallery.msdn.microsoft.com/50091e25-9e75-40d3-9780-a05892f474de)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-23T23:17:33.900

自动化接口是*不可能的*。为了提高使用它们的性能，我创建了一个从异常组到`ExceptionSettings`对象以及异常名称到对象的缓存`ExceptionSetting`。这使我能够绕过`ExceptionSettings.Item`对调用的单个异常的快速查找`SetBreakWhenThrown`，但不幸的是，内部实现`SetBreakWhenThrown`包括验证参数的调用，这反过来又触发了困扰整个方法的内部枚举过程。缓存比不使用宏的代码快大约 4 倍，但我们仍在讨论会使 IDE 挂起几分钟的代码......

**注意：到目前为止，以下说明仅在 Visual Studio 2012 中进行了测试。**

在反汇编`SetBreakWhenThrown`视图中逐步显示，关键的内部调用（验证后）是`sdm::CDebugManager::SetException`. 事实证明，shell 调试器（`SVsShellDebugger`您转换到的服务`IVsDebugger`）实现`IDebuggerInternal`了提供对当前的访问`IDebugSession3`。在我打开解决方案后但在我开始调试之前，此属性非空。

```
IDebuggerInternal debugger = Package.GetGlobalService(typeof(SVsShellDebugger)) as IDebuggerInternal;
IDebugSession3 session = debugger != null ? debugger.CurrentSession : null; 
```

注意：`IDebuggerInternal`接口定义在：

```
Microsoft.VisualStudio.Debugger.Interop.Internal, Version=11.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a 
```

使用返回的信息`EnumSetExceptions`，我创建了一个成功更改 CLR 异常设置的结构！调用`IDebugSession3.SetException`以*启用*调试器在抛出异常时停止。

```
EXCEPTION_INFO[] exceptionInfo =
{
    new EXCEPTION_INFO()
    {
        bstrExceptionName = typeof(NullReferenceException).FullName,
        bstrProgramName = null,
        dwCode = 0,
        pProgram = null,
        guidType = VSConstants.DebugEnginesGuids.ManagedOnly_guid,
        dwState = enum_EXCEPTION_STATE.EXCEPTION_STOP_FIRST_CHANCE
            | enum_EXCEPTION_STATE.EXCEPTION_STOP_SECOND_CHANCE
            | enum_EXCEPTION_STATE.EXCEPTION_JUST_MY_CODE_SUPPORTED
            | enum_EXCEPTION_STATE.EXCEPTION_STOP_USER_FIRST_CHANCE
            | enum_EXCEPTION_STATE.EXCEPTION_STOP_USER_UNCAUGHT
    }
};
hr = session.SetException(exceptionInfo); 
```

要*禁用*调试器暂停，请`IDebugSession3.RemoveSetException`改用。

# ios - 将空格添加到字符串

> ID：15582737
> 
> 赞同：1
> 
> 时间：2013-03-23T02:31:30.527
> 
> 标签：ios, objective-c, xcode

我有以下字符串

```
NSString *word1=@"hitoitatme"; 
```

如您所见，如果要在每个第二个字符后添加一个空格，则它将是一串包含最少/最多 2 个字符的单词。

```
NSString *word2=@"hi to it at me"; 
```

我希望能够在每 2 个字符后向我的字符串添加一个空白字符空间。我该怎么做呢？所以如果我有一个像word1这样的字符串，我可以添加一些代码让它看起来像word2？如果可能的话，我正在寻找最有效的方法。

先感谢您

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T02:41:27.803

在字符串中添加空格可能有不同的方法，但一种方法可能是使用[NSRegularExpression](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)

```
 NSString *originalString = @"hitoitatme";
  NSRegularExpression *regexp = [NSRegularExpression regularExpressionWithPattern:@"([a-z])([a-z])" options:0 error:NULL];
  NSString *newString = [regexp stringByReplacingMatchesInString:originalString options:0 range:NSMakeRange(0, originalString.length) withTemplate:@"$0 "];
  NSLog(@"Changed %@", newString);//hi to it at me 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-23T03:44:05.300

你可以这样做：

```
NSString *word1=@"hitoitatme";
NSMutableString *toBespaced=[NSMutableString new];

for (NSInteger i=0; i<word1.length; i+=2) {
    NSString *two=[word1 substringWithRange:NSMakeRange(i, 2)];
    [toBespaced appendFormat:@"%@  ",two ];
}

NSLog(@"%@",toBespaced); 
```

# javascript - 通过一次性调用使用多个相同目标页面的 iframe（没有多次调用目标）

> ID：15582740
> 
> 赞同：0
> 
> 时间：2013-03-23T02:32:45.103
> 
> 标签：javascript, html, iframe

我有一个内容页面 A，其中还包含页面 B 的 3 个 iframe。

页面 B 包含 3 个横幅，每个横幅都位于具有唯一 ID 的单独 div 中。
所以，页面 B 就像：
`<div id=1">`banner1 `</div>`
`<div id=2">`banner3 `</div>`
`<div id=3">`banner3`</div>`

和页面 A 调用：

```
<iframe src="/B.php#1"></iframe><br/>
<iframe src="/B.php#2"></iframe><br/>
<iframe src="/B.php#3"></iframe><br/> 
```

问题是这样页面 B 将被调用和重新创建 3 次，导致不希望的横幅轮换，因为横幅是通过 Google 的 DFP 交付的，遵循一些规则和标准。

有没有办法首先创建页面 B（仅一次），然后页面 A 来读取和“使用”元素，而不是让每个 iframe 调用为自己重新创建整个 B 页面？

先感谢您

# ruby-on-rails - 带有PassengerRuby和不同宝石套装的Passenger 4

> ID：15582741
> 
> 赞同：7
> 
> 时间：2013-03-23T02:32:46.403
> 
> 标签：ruby-on-rails, apache, passenger

我有一个主要运行 Ruby 1.8.7 的服务器，但现在我有一个需要 1.9.3 的 Rails 3.2 应用程序。我安装了Passenger 4，因为它支持在每个虚拟服务器上运行多个Ruby。

但是，虽然您可以分配特定的 Ruby，但应用程序似乎无权访问该 Ruby 的 gemset。因此，我的虚拟服务器配置了 1.9.3 Ruby，正如我的应用程序现在给出的错误页面上所确认的那样：

```
Ruby interpreter command
/home/aaron/.rvm/rubies/ruby-1.9.3-p0/bin/ruby 
```

但是 GEM_HOME 参数讲述了一个不同的故事：

```
GEM_HOME = /home/aaron/.rvm/gems/ruby-1.8.7-p352 
```

查看Passenger 4 的配置指令，我发现无法指定不同的gemset。我错过了什么，还是这件事还没有准备好迎接黄金时段？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-09-13T09:33:20.107

从您的 gemset 目录运行：

```
 $ passenger-config --ruby-command 
```

它会告诉你 Apache 和 Nginx 的 ruby​​ 路径。

```
 Command: /home/deric/.rvm/wrappers/ruby-2.0.0-p247@my_gemset/ruby
  Version: ruby 2.0.0p247 (2013-06-27 revision 41674) [x86_64-linux]
  To use in Apache: PassengerRuby /home/deric/.rvm/wrappers/ruby-2.0.0-p247@my_gemset/ruby
  To use in Nginx : passenger_ruby /home/deric/.rvm/wrappers/ruby-2.0.0-p247@my_gemset/ruby 
```

Nginx：对于Passenger 4，您可以指定多个ruby 版本。所以对于特定的服务器配置：

your_site.conf：

```
server {
   listen 80;
   root /home/aaron/web/public;
   passenger_enabled on;
   passenger_ruby /home/aaron/.rvm/wrappers/ruby-2.0.0-p247@your_gemset/ruby;
} 
```

nginx.conf：（这适用于新乘客 4.0.17）

```
http {

    passenger_root /usr/lib/ruby/vendor_ruby/phusion_passenger/locations.ini;

} 
```

只需从您的 gemset 目录运行：

```
 $ passenger-status 
```

它将检查是否`passenger_native_support.so`可用。根据您的 RVM 安装，您可能需要使用`rvmsudo`

```
 $ rvmsudo passenger-status 
```

对于 Debian/Ubuntu，现在[有 nginx 和乘客的二进制包可用](http://blog.phusion.nl/2013/09/11/debian-and-ubuntu-packages-for-phusion-passenger/)，这使得安装更加容易。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-23T07:54:52.050

正如[Tombart](https://stackoverflow.com/users/334831/tombart)指出的那样：如果您使用[预编译的 Passenger 模块](http://www.modrails.com/documentation/Users%20guide%20Apache.html)（在我的例子中是 Apache2），您最终会得到一个系统启动并运行。

但是，如果使用[RVM](https://rvm.io/) ，我偶然发现您需要使用“包装器目录”来选择正确的 RVM ruby​​ 版本**和 gemet，**就像在您的 Apache vhost 配置中一样：

```
PassengerRuby /home/of_your_ruby_user/.rvm/wrappers/ruby-x.y.z-p123@gemset/ruby 
```

这样，Passenger 就知道如何找到相对于该目录 ( `../../gems/ruby-x.y.z-p123@gemset/gems`) 的正确 gemset。否则，Passenger 会使用“标准 ruby​​ gemset”，如果您想使用相同的 ruby​​ 版本运行多个应用程序，这很奇怪。*我只能猜测这与 Nginx 类似。*

# php - 文件上传似乎有效，但文件不在目标文件夹中

> ID：15582744
> 
> 赞同：1
> 
> 时间：2013-03-23T02:33:07.980
> 
> 标签：php, jquery, file-upload, asyncfileupload

所以我正在做一个项目，但我一直在尝试上传文件。我已经阅读了多个教程并将代码复制到 netbeans 中，看看它是否会发现任何错误。一切似乎都很好，但是上传后文件不在目标文件夹中，我不知道为什么。

我正在 ajax 发布文件。这是我的 html 和 jQuery 代码：

```
<html>
<head>
    <Script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>

    <script language="javascript" type="text/javascript">

        function submit(){

            var $request;
            var $data = new FormData(document.forms.namedItem("upload")); 

            // abort pending request
            if ($request) {
                $request.abort();
            }

            var $form = $("#form");
            var $file = $("#file");

                // request to /main.php
                var $request = $.ajax({
                    url: "main.php",
                    type: "post",
                    data: $data,
                    processData: false, //tell jQuery not to process the data
                    contentType: false //tell jQuery not to set the contentType
                });

                // on success
                $request.done(function (response, textStatus, jqXHR){
                    $("#responseField").html(response).show();
                });

                //on failure
                $request.fail(function (jqXHR, textStatus, errorThrown){
                    console.error(
                        "The following error occured: "+
                        textStatus, errorThrown
                    );
                });

    };
    </script>

</head>
<body>
    <h1>Prototype Upload Page</h1><br/>
    <form enctype="multipart/form-data" method="post" id="upload">
        Select .csv file: <input type="file" name="file" id="file">
    </form>
    <input type="submit" id="submit" name="submit" value="submit" onclick="submit()"/>
    <br><textarea id="responseField" rows="4" cols="75"> file upload response: </textarea><br/>
</body> 
```

该帖子被发布到我服务器上的 main.php 中。这是代码。

```
<?php

if (!empty($_FILES["file"]["name"])) {
    uploadFile();
}

Function uploadFile() {
    if ($_FILES["file"]["error"] > 0) {
        echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
        }
      else {
        echo "Upload: " . $_FILES["file"]["name"] . "\n";
        echo "Type: " . $_FILES["file"]["type"] . "\n";
        echo "Size: " . ($_FILES["file"]["size"] / 1024) .  "kB\n";
        echo "Temp file: " . $_FILES["file"]["tmp_name"] . "\n";

        if (file_exists("uploads/" . $_FILES["file"]["name"])) {
          echo $_FILES["file"]["name"] . " already exists. ";
          }
        else {
          move_uploaded_file($_FILES["file"]["tmp_name"],"C:/inetpub/wwwroot/test1/afterbreak/uploads/test.csv");
          echo "Stored in: " . "uploads/" .$_FILES["file"]["name"];
          }
        }
}
?> 
```

我无法弄清楚到底是什么问题。我花了很多时间阅读教程，试图让它发挥作用。如果有人可以提供帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T02:39:44.860

您在移动上传的文件中有一个硬编码的目的地`move_uploaded_file($_FILES["file"]["tmp_name"],"C:/inetpub/wwwroot/test1/afterbreak/uploads/test.csv");`。我想你想要`"uploads/" . $_FILES["file"]["name"]`。

# c# - 正则表达式匹配任何单词组合，但不匹配单个小数

> ID：15582746
> 
> 赞同：3
> 
> 时间：2013-03-23T02:33:23.970
> 
> 标签：c#, regex

我有一个**很长**的正则表达式，包含`(?:\S+ ){0,4}`

那应该匹配：（它已经正确地做到了）

```
2 Terry White 
Tramal 100 
Asmol 2.5 
2.5% 
```

或任何匹配的东西，**除了**一个小数或价格。

它不应该匹配：（我不知道如何处理这个异常）

```
870
6.75
$17.60 
```

这甚至可能吗？

谢谢各位的意见。仅供那些好奇的人参考，这里是它使用的最短的“长正则表达式”之一（你可以在最后找到它）

```
^ {0,5}(\d{4}[A-Z]) +((?:\S+ )+(?: {0,10}K\+)?) *(\.\.|\d+) +(?:[A-Z#\*] *)?(\.\.|\d+(?:\.\d{1,4})?) +(?:[ab] *)?((?:\S+ ){0,4}) *([A-Z]{2}) {0,10}$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T02:37:42.143

我不确定您所说的“一位小数”是什么意思，因为您的第一个失败示例似乎是一个整数，但您可以尝试：

```
^(?!\$?\d+(?:\.\d+)?$).+$ 
```

根据您的评论，我认为负面的回顾可能更多是您正在寻找的：

```
(?<!\$?\d+(?:\.\d+)?) 
```

# html - 在 Meteor 应用程序中放置苹果全屏元标记

> ID：15582756
> 
> 赞同：11
> 
> 时间：2013-03-23T02:35:48.353
> 
> 标签：html, ipad, mobile-safari, meteor

我正在尝试使用 Meteor.js 给人一种原生 iPad 应用程序的错觉我不确定在哪里放置这些标签

```
 <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" /> 
```

到目前为止，我已经在几个不同的地方部署了它，但都没有成功。我是使用流星的新手，希望能提供任何帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-23T05:40:27.163

您将这些标签放在`index.html`文件中，`<head>`即

```
<head>
    <title>test app</title>
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" />
</head>

<body>
    {{>greeting}}
</body>

<template name="greeting">
.... 
```

# prestashop - 通过指定产品 ID 创建产品列表

> ID：15582764
> 
> 赞同：1
> 
> 时间：2013-03-23T02:36:55.810
> 
> 标签：prestashop

是否可以通过指定产品 ID 创建自定义产品列表？

例如，如果我想显示两个产品的产品列表，

我可以做类似的事情`website.com/category.php?id_product=1&id_product=2`吗？

显然上述方法不起作用，但我相信有一种简单的方法可以实现这一目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T09:08:45.360

是的，这是可能的，但您必须为此做一些工作，因为默认情况下 prestashop 仅按类别列出产品，以及标签、制造商等其他选项。根据您的要求，您可以按如下方式进行：

1) 假设您想在类别页面上显示产品列表，其 id 在 URL 中传递，例如 website.php/category.php?id_category=10&id_list=1,5,8,9

2) id_list 是我们要为 id_category 10 显示的 id 列表。现在在您的 category.php 控制器文件中，获取该 id_list 并将其传递给 getProducts 成员函数。

3）在getProducts memberFunction id_list 应该是一个选项参数，因为我们不想影响正常操作。现在如果 id_list 不为空，那么您必须对产品检索数据库查询进行调整并放置类似的内容

```
 id_product IN (your list of ids passed in) 
```

这样，只有那些提供了 id 的产品才会被获取和返回。

**注意：这只是一个想法，没有实施或测试。它只是为您提供一种方式或路径**

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-15T14:43:20.930

### 少量产品的替代解决方案

产品类构造函数可以通过 ID 为您获取产品。

```
$myProduct = new Product( MY_PRODUCT_ID ); 
```

所以你可以做类似的事情

```
$my_ids = array(
  2,
  54,
  ...etc
);

$myProducts = array();

foreach( $my_ids as $id_product )
    $myProducts[] = new Product($id_product); 
```

**警告：**对产品类构造函数的每次调用都可以调用数据库 - 此解决方案仅适用于少量产品...

*适用于PS1.6，无需核心编辑...*

# c# - 如何从文件中读取像素值并使用 C# 显示？

> ID：15582766
> 
> 赞同：0
> 
> 时间：2013-03-23T02:37:39.473
> 
> 标签：c#, .net, bitmap

我有一个像素值如下的文件：

```
78 234 56 37
62 162 63 78
28 129 30 37
12 231 12 127
24 121 95 194 
```

这表示 4*5 单色像素映射。我必须从文件中读取它并将像素值存储在列表中。

现在我的问题是，我该怎么做才能显示它？

我是在WPF中做的，有些文件很大（超过50M），所以处理速度也要考虑。在 .NET 中处理此类工作是否有最佳实践？

# django - 一起使用 django-nose 和 django-celery -- 单元测试

> ID：15582770
> 
> 赞同：9
> 
> 时间：2013-03-23T02:38:45.163
> 
> 标签：django, celery, django-celery, django-nose

我有一个使用[django-nose](https://github.com/jbalogh/django-nose)的 django 项目。我想将[django-celery](http://docs.celeryproject.org/en/latest/django/unit-testing.html)添加到项目中。我使用单元测试。django-nose 和 django-celery 都需要在我的 settings.py 文件中设置 TEST_RUNNER 。具体来说：

```
TEST_RUNNER = 'django_nose.NoseTestSuiteRunner' 
```

对于 django-nose 和：

```
TEST_RUNNER = 'djcelery.contrib.test_runner.CeleryTestSuiteRunner' 
```

对于 django 芹菜。

我应该如何处理这个问题以便我可以使用这两个包？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-06T18:42:41.670

我发现处理这个问题的最好方法是跳过 Celery 测试运行器。我只是用 a 来装饰我的芹菜使用测试，`@override_settings(CELERY_ALWAYS_EAGER=True)`一切都得到了很好的测试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T01:48:53.540

如果您能够将测试隔离为 celery 和非 celery 依赖的功能，您可以尝试[覆盖](https://docs.djangoproject.com/en/dev/topics/testing/overview/#overriding-settings)调用 celery 任务的测试类的设置：

```
from django.test.utils import override_settings

@override_settings(TEST_RUNNER='djcelery.contrib.test_runner.CeleryTestSuiteRunner')
class AsyncTestCase(TestCase):
     def test_async(self):
         self.assertEquals(add.delay(4,4), 8) 
```

而 NoseTestRunner 将在 settings.py 中设置为默认值

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-15T06:46:13.730

您可以将 Celery runner 和 Nose runner 子类化，然后您将获得所有这些方面的好处。

```
from django_nose import NoseTestSuiteRunner
from djcelery.contrib.test_runner import CeleryTestSuiteRunner

class TestRunner(CeleryTestSuiteRunner, NoseTestSuiteRunner):
    pass 
```

然后在您的设置中：

```
TEST_RUNNER = '<package to>.TestRunner' 
```

为什么有效：

```
help(TestRunner) 
```

你得到：

```
|  Method resolution order:
|      TestRunner
|      djcelery.contrib.test_runner.CeleryTestSuiteRunner
|      django_nose.runner.NoseTestSuiteRunner
|      django_nose.runner.BasicNoseRunner
|      django_nose.runner.BaseRunner
|      django.test.runner.DiscoverRunner
|      builtins.object 
```

测试 CeleryTestRunner 只是设置一些配置然后调用`super().setup_test_environment()`. 然后超级将在该链中寻找 setup_test_environment() 。

观看 Raymond Hettinger 的视频：超级被认为是超级（[这里](https://www.youtube.com/watch?v=EiOglTERPEo)）。

# c++ - 程序退出状态为 255 C++ Main 与 Ada

> ID：15582776
> 
> 赞同：3
> 
> 时间：2013-03-23T02:39:58.330
> 
> 标签：c++, linux, exit, ada

我有一组单线程 C++ 主程序，它们的大部分代码都是用 Ada 开发的。这是在 Atego (Rational) Apex Duo 中构建的，目标是 32 位 RHEL 6.3 Linux。exec 是我开发的一个类系统，它包括套接字、状态机和一个计时器类，它是 exec 的核心。类系统用于在通过套接字通信的 6 个不同系统上构建和执行 14 个单独的 exec。它们都使用相同的 Class 系统，并在启动时基于 INI 文件进行配置。

执行人员通过 gettimeofday 使用 linux 系统时钟以 50 或 60 Hz 的频率帧

```
struct timeval {
    time_t      tv_sec;     /* seconds */
    suseconds_t tv_usec;    /* microseconds */
}; 
```

和一个简单的非忙等待算法来生成所需的调度程序。

我目前面临的问题是这些高管（看似）随机失败。失败似乎是他们只是停止了取景。我已经将所有运行时 C++ 过程封装在“try{} catch(...){}”中，并且没有捕获任何内容。同样，Ada 例程受到不会被命中的异常处理程序的保护。

exec 通常会在失败前愉快地运行 30 分钟到一个多小时。没有明显的内存蠕变迹象（使用系统监视器）。我已将 Atego Rational 图形调试器附加到已经运行的执行程序上，但无济于事。当一个最终失败时，调用堆栈中没有任何内容，调试器日志中的唯一指示是应用程序“退出，状态为 255”。

恐怕系统中某处的（Linux）系统例程或驱动程序正在调用 Exit。似乎有些东西正在调用退出！

任何人都知道如何进一步解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:19:19.277

这可能不应该是一个答案，但它的评论范围太广了......

因此，故障出现在 6 台机器上的单个可执行文件中；负责通过网络共享数据的可执行文件；正确的？并且“本地”可执行文件似乎是可靠的......或者 6 个有故障的可执行文件没有如此干净地映射到 6 个系统上？

故障是否与网络负载有关，例如延迟超过您的（电视或交流电源）帧速率？通过阻塞网络使其更快地失败可以简化测试......

当 Linux 网络时钟向后运行时，我的系统出现故障......故障发生在 C++ 组件中，因此当 dt 变为负数时不会出现简单的约束错误，但是离故障很远的一个荒谬的“4e9 微秒超时”.. .

听起来 Ada 的任务工具和分布式系统附件对于这个应用程序来说是理想的，但这种级别的设计更改在现阶段可能不合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T02:58:30.307

也许它可以给你一些进一步的方向：

如果您尝试从 main 返回 double 这可能会发生。看：

```
double main ()
{
    return 0.0;
} 
```

```
$ cc double.c
double.c：在函数'main'中：
double.c:2：警告：'main' 的返回类型不是 'int'
$ ./a.out
$回声$？
255
$

```

如果在 POSIX 操作系统下尝试从 main() 返回 double，则调用进程几乎总是会看到 255。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T13:14:45.673

现在看来，Ada RTS 对 C++ main 并不“满意”。当然不是所有的都回答了......但固定工作。我们从 C++ 电源更改为 Ada 电源……这是一个简单的更改……Ada 现在导入了一堆 C++，而不是相反。它不像 C++ 主程序那样原始……但我猜它的功能非常好。

悬而未决的问题是它为什么一开始就死了？......为什么只有一些高管......而其他人继续“永远”运行？我们怀疑它最终与越界有关，并且应用程序在调用 Ada 中的例程时必须做的越多……它死得越快。这让我们相信堆栈被破坏了......但为什么只有 C++ 主？

无论如何，它适用于 Ada 电源，并且工作是最重要的要求……所以我们称之为“固定”。

# asp.net - 改进 ASP.Net 登录代码并检查用户是否已登录

> ID：15582777
> 
> 赞同：1
> 
> 时间：2013-03-23T02:40:07.733
> 
> 标签：asp.net

我想用我的 ASP.net 代码完成两件事，因为我是初学者，所以我现在正在努力完成：

1) 我在**Login.aspx**中的代码目前容易受到 SQL 注入的影响，如何才能将我的 SQL 注入风险降到最低？

```
using System;
using System.Collections;
using System.Configuration;
using System.Data.SqlClient;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;
using System.Web.Configuration;

public partial class login : System.Web.UI.Page
{

    protected void Login1_Authenticate(object sender, AuthenticateEventArgs e)
    {
        string username = Login_Box.UserName;
        string pwd = Login_Box.Password;

        string strConn;
        strConn = WebConfigurationManager.ConnectionStrings["team13ConnectionString"].ConnectionString;
        SqlConnection Conn = new SqlConnection(strConn);
        Conn.Open();

        string sqlUserName;
        sqlUserName = "SELECT id,pass FROM ts_dept ";
        sqlUserName += " WHERE (id ='" + username + "')";
        sqlUserName += " AND (pass ='" + pwd + "')";
        SqlCommand com = new SqlCommand(sqlUserName, Conn);

        string CurrentName;
        CurrentName = (string)com.ExecuteScalar();

        if (CurrentName != null)
        {
            Session["UserAuthentication"] = username;
            Session.Timeout = 1;
            Response.Redirect("Default.aspx");
        }
        else
        {
            Session["UserAuthentication"] = "";
        }
    }
} 
```

2) **Default.aspx**是我网站的主页。如果用户尚未登录，则无法访问它，我如何在此处检查 Session["Authentication"] （如果为 null，则用户被重定向到**Login.aspx**。这是我目前的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace Team13
{
    public partial class default : System.Web.UI.Page
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T04:28:50.747

看看使用[参数化 sql](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)来防止 sql 注入攻击。

但是，一般来说，我建议使用 asp.net 通用提供程序作为会员，因为这些将确保您拥有强大/安全的会员功能

看到[这个](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx)和[这个](http://blogs.msmvps.com/luisabreu/blog/2012/09/24/adding-the-simplemembership-provider-to-an-asp-net-web-forms-app/)让你开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T02:53:09.803

我首先将服务器验证放在文本框上。也许最大长度会有所帮助？还要防止使用撇号。

在第二部分尝试这样的事情，也许也可以测试空字符串：

```
If (Session("UserAuthentication") Is Nothing) 
{
    Response.Redirect("Login.aspx")
} 
```

## 更新

表单身份验证可以解决您遇到的两个问题，并且是内置的。如果需要，您可以对其进行自定义以满足您的需求。可以在[http://www.codeproject.com/Articles/408306/Understanding-and-Implementing-ASP-NET-Custom-Form找到一个很好的教程](http://www.codeproject.com/Articles/408306/Understanding-and-Implementing-ASP-NET-Custom-Form)

或者，您可以更改 SQL 命令以恢复提供的用户名的密码，并在取回数据后进行字符串比较。

```
"SELECT pass FROM ts_dept WHERE (id ='" + username + "')"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T04:36:12.007

防止sql注入的最佳做法是：

1.  使用命令参数将任何用户值传递给 sql 以执行语句。
2.  始终用户 sp_execute() 系统存储过程，用于在 DB 上执行 sql 语句
3.  在放置值 sql 语句之前始终验证用户输入值。

# windows - 为什么我的 DLL 似乎没有被调用？

> ID：15582779
> 
> 赞同：2
> 
> 时间：2013-03-23T02:40:47.693
> 
> 标签：windows, web-applications, dll, activex

我有一个 COM DLL，用 Delphi 编码。当网页在 MS IE 中加载时（通过页面上的 soem JavaScript），它应该通过 Active X 控件调用。

顺便说一句，这一切都适用于现有的串行端口接口，但我正在重新编码 DLL 以从 USB 读取；其他一切都未发生。

它在 Delphi IDE 中运行良好，但不是“在现场”。活动的 X 控件应请求它从 USB 端口读取一些输入，然后将其发送到网页。

从 USB 设备读取是有效的，因为我可以打开记事本并查看其中写入的值。

DLL 将显示一个表单和一个对话框，并将写入系统调试跟踪。由于在 MS IE 中加载网页时我没有看到这些，我认为我们可以假设 Aective X 控件没有调用 DLL。

*   在 MS IE 中，我启用了所有 Active X 选项。
*   在c:\Windows\System32（相当于c:\Windows\SysWOW64）中，我有`regsvr32.exe -u my_dll.dll`然后`regsvr32.exe my_dll.dll`这两个系统都宣布成功
*   `my_dll.dll`我搜了一下， c:\Windows下只有一份
*   它有正确的大小和日期/时间
*   my用于系统，为用户为`%path%`空`%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;`

知道我做错了什么吗？或者我该如何去追踪它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T04:31:03.477

如果您通过 javascript 在网页中加载 ActiveX 控件，则必须将控件打包以进行 Web 部署。请参阅此示例以了解如何在您的 javascript 中执行此操作，并检查您是否正确执行了此操作：

[从 javascript 调用 Activex Control 的函数](https://stackoverflow.com/questions/12246391/calling-activex-control-s-functions-from-javascript)

一旦您正确地执行了上述操作并在 IE 中打开您的网站，该网页至少会“加载”ActiveX 控件。除此之外，您还可以在 Delphi 代码中显示消息框或编写日志来追踪实际的编码问题。

# wordpress - wordpress 主题自定义在管理员中为空白

> ID：15582786
> 
> 赞同：0
> 
> 时间：2013-03-23T02:42:44.387
> 
> 标签：wordpress, wamp

我有一个我一直无法弄清楚的问题。我遇到的问题是，当我登录到 wordpress 管理员并尝试自定义主题时，除了导航之外什么都没有显示。我可以编辑页面、帖子，基本上可以在 The Admin 中做所有事情，除了自定义主题。当我上传到实时服务器时，我没有这个问题。我将附上图片的链接以供视觉参考。

我正在使用 wordpress 3.5.1 在 Windows 8 上运行 wamp。我添加了插件服务器伙伴来检查设置，一切看起来都很好。权限是 755，我暂时将其设置为 777，以确保不是出于任何奇怪的原因。我注意到文件夹的一件事是，如果我查看只读属性，则突出显示未选中并且应用不会保存更改。可能是因为他们提前应用了安全设置？

我已经用多个主题尝试了这个，结果都是一样的。

这是屏幕截图。 [http://i46.tinypic.com/qs0c2d.gif](http://i46.tinypic.com/qs0c2d.gif)

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-07T18:24:07.407

我有同样的问题。我也在管理控制台上强制使用 SSL/HTTPS。我在管理控制台上关闭了 HTTPS（我的购物车仍在使用），一切都很好。

# macos - 自制 node.js 开发

> ID：15582789
> 
> 赞同：0
> 
> 时间：2013-03-23T02:43:10.907
> 
> 标签：macos, node.js, homebrew

我已经使用**homebrew成功安装了****node.js**。但是 homebrew 没有为 node.js 和 v8 中的所有 *.h 文件创建包含目录。然后我尝试跑步，没有任何运气。**`brew install --devel node`**

 **有没有办法通过自制软件安装节点并拥有节点的所有包含文件？我正在为 node.js 创建一个 C++ 插件，因此需要所有头文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T02:50:51.980

您所需要的只是`node`可执行文件和[`node-gyp`](https://github.com/TooTallNate/node-gyp)编译。

您可以在[C/C++ 插件](http://nodejs.org/api/addons.html#addons_addons)文档中阅读这两个内容：

> Node 将其所有依赖项静态编译到可执行文件中。编译模块时，您无需担心链接到这些库中的任何一个。

> 源代码需要内置到`hello.node`二进制插件中。为此，我们创建了一个名为的文件，该文件`binding.gyp`描述了以类似 JSON 格式构建模块的配置。该文件由`node-gyp`.
> 
> ```
> {
>   "targets": [
>     {
>       "target_name": "hello",
>       "sources": [ "hello.cc" ]
>     }
>   ]
> } 
> ```

涵盖了一些介绍性示例，每个示例都可以在[rvagg 的 node-addon-examples](https://github.com/rvagg/node-addon-examples)中找到。

不过，您必须分别阅读[V8](http://izs.me/v8-docs/main.html)和[libuv](https://github.com/joyent/libuv) ( [libuv book](http://nikhilm.github.com/uvbook/) )。**

# java - Richfaces 主题问题和数据表样式类问题

> ID：15582791
> 
> 赞同：0
> 
> 时间：2013-03-23T02:43:33.757
> 
> 标签：java, jsf, richfaces

我将 RichFaces 3.1.6 用于 JSF 1.1 的旧项目

3.1.6 版本是否存在 Richfaces 主题？因为当我添加 `themes-3.3.3.Final.jar`我的应用程序时不起作用，但是如果我从我的类路径中删除 jar，那么应用程序就可以正常工作。

我在 JSF 页面中有以下内容

```
<rich:dataTable width="100%" 
id="dataemp" columnClasses="colClass"
            value="#{test.beanValues}" var="emp">  

            <rich:column>
                <f:facet name="header">Employee Number</f:facet>
                <h:outputText value="#{emp.employeeNumber}" />
            </rich:column>
            <rich:column>
                <f:facet name="header">Employee Name</f:facet>
                <h:outputText value="#{emp.employeeName}" />
            </rich:column>
            <rich:column>
                <f:facet name="header">HireDate</f:facet>
                <h:outputText value="#{emp.hireDate}" />
            </rich:column>
            <rich:column>
                <f:facet name="header">Mileage</f:facet>
                <h:outputText value="#{emp.deptNo}" />
            </rich:column>

</rich:dataTable> 
```

运行页面时，我得到的输出没有表格边框或样式和 web.xml 我有

```
<context-param>
  <param-name>org.richfaces.SKIN</param-name>
  <param-value>DEFAULT</param-value>
 </context-param> 
```

不确定如何使用 Richfaces 添加样式类，

截屏![在此处输入图像描述](../Images/87a735a68f5c5dbdd588eca4709ed806.png)

更新 1

我已经设法解决了样式类问题，但仍然无法解决主题 jar 问题。

修改过的 JSF

```
 <rich:dataTable value="#{test.beanValues}"
                        var="emp" rowClasses="row1, row2" id="empdet" rows="4"
                        columnClasses="50,100,100,100" onRowMouseOver="this.style.backgroundColor='#B5F3FB'"
                        onRowMouseOut="this.style.backgroundColor='#{a4jSkin.rowBackgroundColor}'"
                        width="350">
                        <f:facet name="header">
                            <rich:columnGroup>

                                <rich:column colspan="4">
                                    <h:outputText value="List of Employees" />
                                </rich:column>

                                <rich:column breakBefore="true">
                                    <h:outputText value="Employee #" />
                                </rich:column>

                                <rich:column>
                                    <h:outputText value="Employee Name" />
                                </rich:column>

                                <rich:column>
                                    <h:outputText value="Hire Date" />
                                </rich:column>

                                <rich:column>
                                    <h:outputText value="Dept #" />
                                </rich:column>

                            </rich:columnGroup>
                        </f:facet>

                        <rich:column>
                            <f:facet name="header">
                                <h:outputText value=" "
                                    title="Hack due to bug. Shuold be remoevd till release"></h:outputText>
                            </f:facet>
                            <h:outputText value="#{emp.employeeNumber}" />

                        </rich:column>

                        <rich:column>
                            <h:outputText value="#{emp.employeeName}" />

                        </rich:column>

                        <rich:column>
                            <h:outputText value="#{emp.hireDate}" />
                        </rich:column>

                        <rich:column>
                            <h:outputText value="#{emp.deptNo}" />
                        </rich:column>

                    </rich:dataTable>
                    <rich:datascroller align="left" for="empdet"
                        maxPages="20" /> 
```

截屏。

![在此处输入图像描述](../Images/c0ec8e1aed8d50162a1c6ed8ef4f50bc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:26:22.143

我不认为 3.3.3.Final.jar 将与 Richfaces 3.1.6 一起使用。事实上，3.1.6 版本是与 JSF 1.1 兼容的最后一个 RF 版本。

但是，您可以使用已使用的参数更改皮肤（或覆盖它以定义您的皮肤）`org.richfaces.SKIN`。在richfaces-impl-3.1.6.GA/META-INF/skins 下可以找到可能的值。

请参考此链接了解皮肤的使用和定制：[http ://docs.jboss.org/richfaces/latest_4_X/Developer_Guide/en-US/html/chap-Developer_Guide-Skinning_and_theming.html#exam-Developer_Guide-Skinning_and_theming-Using_a_base_skin](http://docs.jboss.org/richfaces/latest_4_X/Developer_Guide/en-US/html/chap-Developer_Guide-Skinning_and_theming.html#exam-Developer_Guide-Skinning_and_theming-Using_a_base_skin)

甚至有人说它与RF4有关。我认为它适用于 3.1.6

希望这个对你有帮助

# c - 保存不在 RAM 中的数组

> ID：15582793
> 
> 赞同：10
> 
> 时间：2013-03-23T02:43:53.013
> 
> 标签：c, arrays, ram

我正在和一些朋友学习（并尝试教授）电子/编程。我们决定使用启动板为我们的任务构建一个 LED 立方体。

这是我们遇到的问题：

对于我们的动画，我们将它们存储在一个二维数组中。如果我们将数组定义为常量，我们会得到错误

我不希望这个数组在 RAM 中，因为我们没有太多可用的。

编辑：代码见下文

我希望这是张贴在正确的地方。
不是时候（我认为？）我是否正在更改任何数组，它们都是手动设置一次并循环播放。我不确定要（隐式？）转换什么

如果需要信息：

MSP430G2553 16kB 闪存 0.5kB RAM

谢谢你的帮助

更新：HansPassant 告诉我为什么会出现这个错误。但我仍然遇到 RAM 溢出（显然它没有存储在闪存中？）

我尝试的另一件事是，我也将其声明为 const，而不是 #define RON (Row ON)。（因此，当创建动画数组时，它是仅使用常量显式创建的）我曾希望将其存储在闪存中。

如果需要，这是完整的代码：

```
#define povDelay delayMicroseconds(200) // POV Delay

const int CON = LOW;
const int COFF = HIGH;
const int RON = HIGH;
const int ROFF = LOW;

const int col[9] = {P1_0, P1_1, P1_2, P1_3, P1_4, P1_5, P2_0, P2_1, P2_2};
const int row[3] = {P1_6, P1_7, P2_3};

void setup()
{
 // Serial.begin(9600);
  for (int i = 0; i < 9; i++)
  {
    pinMode(col[i], OUTPUT);
    digitalWrite(col[i], COFF);
  }
  for (int i = 0; i < 3; i++)
  {
    pinMode(row[i], OUTPUT);
    digitalWrite(row[i], ROFF);
  }
}

void sideToSide(int delayTime)
{
  int sideDelay = 1000;
  // Left Frame
  const int leftFrame[3][9] = {
     {CON, COFF, COFF, CON, COFF, COFF, CON, COFF, COFF},
     {CON, COFF, COFF, CON, COFF, COFF, CON, COFF, COFF},
     {CON, COFF, COFF, CON, COFF, COFF, CON, COFF, COFF}
   };
  // Middle Frame
  const int middleFrame[3][9] = {
     {COFF, CON, COFF, COFF, CON, COFF, COFF, CON, COFF},
     {COFF, CON, COFF, COFF, CON, COFF, COFF, CON, COFF},
     {COFF, CON, COFF, COFF, CON, COFF, COFF, CON, COFF}
    };
  // Right Frame
  const int rightFrame[3][9] = {
     {COFF, COFF, CON, COFF, COFF, CON, COFF, COFF, CON},
     {COFF, COFF, CON, COFF, COFF, CON, COFF, COFF, CON},
     {COFF, COFF, CON, COFF, COFF, CON, COFF, COFF, CON}
   };

  // Display this animation 3 times (Frame 1, Frame 2, Frame 3, Frame 2)
  for (int i = 0; i < 4; i++)
  {
    displayFrame(leftFrame, delayTime);
    displayFrame(middleFrame, delayTime);
    displayFrame(rightFrame, delayTime);
    displayFrame(middleFrame, delayTime);
  }
  // Last animation
  displayFrame(leftFrame, delayTime);

} // ############ END SIDE TO SIDE

void frontToBack(int delayTime)
{
    // Left Frame
  const int frontFrame[3][9] = {
     {CON, CON, CON, COFF, COFF, COFF, COFF, COFF, COFF},
     {CON, CON, CON, COFF, COFF, COFF, COFF, COFF, COFF},
     {CON, CON, CON, COFF, COFF, COFF, COFF, COFF, COFF}
   };
  // Middle Frame
  const int middleFrame[3][9] = {
     {COFF, COFF, COFF, CON, CON, CON, COFF, COFF, COFF},
     {COFF, COFF, COFF, CON, CON, CON, COFF, COFF, COFF},
     {COFF, COFF, COFF, CON, CON, CON, COFF, COFF, COFF}
    };
  // Right Frame
  const int backFrame[3][9] = {
     {COFF, COFF, COFF, COFF, COFF, COFF, CON, CON, CON},
     {COFF, COFF, COFF, COFF, COFF, COFF, CON, CON, CON},
     {COFF, COFF, COFF, COFF, COFF, COFF, CON, CON, CON}
   };

  // Display this animation 3 times (Frame 1, Frame 2, Frame 3, Frame 2)
  for (int i = 0; i < 4; i++)
  {
    displayFrame(frontFrame, delayTime);
    displayFrame(middleFrame, delayTime);
    displayFrame(backFrame, delayTime);
    displayFrame(middleFrame, delayTime);
  }
  // Last animation
  displayFrame(frontFrame, delayTime);

}  // ############# END FRONT TO BACK

void diagFunctionOne(int delayTime)
{
  const int firstFrame[3][9] = {
     {CON, COFF, COFF, COFF, COFF, COFF, COFF, COFF, COFF},
     {CON, COFF, COFF, COFF, COFF, COFF, COFF, COFF, COFF},
     {CON, COFF, COFF, COFF, COFF, COFF, COFF, COFF, COFF}
  };
  const int secondFrame[3][9] = {
     {COFF, CON, COFF, CON, COFF, COFF, COFF, COFF, COFF},
     {COFF, CON, COFF, CON, COFF, COFF, COFF, COFF, COFF},
     {COFF, CON, COFF, CON, COFF, COFF, COFF, COFF, COFF}
  };
  const int thirdFrame[3][9] = {
     {COFF, COFF, CON, COFF, CON, COFF, CON, COFF, COFF},
     {COFF, COFF, CON, COFF, CON, COFF, CON, COFF, COFF},
     {COFF, COFF, CON, COFF, CON, COFF, CON, COFF, COFF}
  };
  const int forthFrame[3][9] = {
     {COFF, COFF, COFF, COFF, COFF, CON, COFF, CON, COFF},
     {COFF, COFF, COFF, COFF, COFF, CON, COFF, CON, COFF},
     {COFF, COFF, COFF, COFF, COFF, CON, COFF, CON, COFF}
  };
  const int fifthFrame[3][9] = {
     {COFF, COFF, COFF, COFF, COFF, COFF, COFF, COFF, CON},
     {COFF, COFF, COFF, COFF, COFF, COFF, COFF, COFF, CON},
     {COFF, COFF, COFF, COFF, COFF, COFF, COFF, COFF, CON}
  };
  // Start from 7
  const int sixthFrame[3][9] = {
     {COFF, COFF, COFF, COFF, COFF, COFF, CON, COFF, COFF},
     {COFF, COFF, COFF, COFF, COFF, COFF, CON, COFF, COFF},
     {COFF, COFF, COFF, COFF, COFF, COFF, CON, COFF, COFF}
  };
  const int seventhFrame[3][9] = {
     {COFF, COFF, COFF, CON, COFF, COFF, COFF, CON, COFF},
     {COFF, COFF, COFF, CON, COFF, COFF, COFF, CON, COFF},
     {COFF, COFF, COFF, CON, COFF, COFF, COFF, CON, COFF}
  };
  const int eighthFrame[3][9] = {
     {CON, COFF, COFF, COFF, CON, COFF, COFF, COFF, CON},
     {CON, COFF, COFF, COFF, CON, COFF, COFF, COFF, CON},
     {CON, COFF, COFF, COFF, CON, COFF, COFF, COFF, CON}
  };
  const int ninthFrame[3][9] = {
     {COFF, CON, COFF, COFF, COFF, CON, COFF, COFF, COFF},
     {COFF, CON, COFF, COFF, COFF, CON, COFF, COFF, COFF},
     {COFF, CON, COFF, COFF, COFF, CON, COFF, COFF, COFF}
  };
  const int tenthFrame[3][9] = {
     {COFF, COFF, CON, COFF, COFF, COFF, COFF, COFF, COFF},
     {COFF, COFF, CON, COFF, COFF, COFF, COFF, COFF, COFF},
     {COFF, COFF, CON, COFF, COFF, COFF, COFF, COFF, COFF}
  };

    for (int i = 0; i < 4; i++)
  {
    displayFrame(firstFrame, delayTime);
    displayFrame(secondFrame, delayTime);
    displayFrame(thirdFrame, delayTime);
    displayFrame(forthFrame, delayTime);
    displayFrame(fifthFrame, delayTime);
    displayFrame(sixthFrame, delayTime);
    displayFrame(seventhFrame, delayTime);
    displayFrame(eighthFrame, delayTime);
    displayFrame(ninthFrame, delayTime);
    displayFrame(tenthFrame, delayTime);
  }
}

/*

#####################################################
#####################################################
#####################################################
######################################################
#######################################################

*/

// Takes a frame and displays it for the length of animation delay (in ms)
void displayFrame(const int frame[3][9], int animationDelay)
{
 // Serial.println("displayFrame called");
 unsigned long currentTime = millis();

 while (1) // Do this continually until animationDelay is met
 {
 int i, j;
 // Rows
 for (i = 0; i < 3; i++)
 {
   // Turn correct ROW on
   digitalWrite(row[i], RON);

   // Columns
   for (j = 0; j < 9; j++)
   {
     // Turn correct COLUMNS on
     digitalWrite(col[j], frame[i][j]);

   } // End J loop

   povDelay;
   digitalWrite(row[i], ROFF);

 } // End I Loop

 if ((millis() - currentTime) >= animationDelay)
 {
   delay(10);
   // Cleanup, Turn all OFF
  for (int i = 0; i < 9; i++)
    {
      digitalWrite(col[i], COFF);
    }
    for (int i = 0; i < 3; i++)
    {
      digitalWrite(row[i], ROFF);
    }

   delay(10); // timefix?

   return;

 } // End time test if statement

 }

}

void loop()
{
  diag(350);
  sideToSide(350);
  frontToBack(350);

//  for (int i = 0; i < 9; i++)
//  {
//    digitalWrite(col[i], CON);
//  }
//  for (int i = 0; i < 3; i++)
//  {
//    digitalWrite(row[i], RON);
//    delay(250);
//    digitalWrite(row[i], ROFF);
//  }

} 
```

并且存在的错误：

> ```
> c:/users/dan/appdata/local/energi~1/hardware/tools/msp430/bin/../lib/gcc/msp430/4.6.3/../../../../msp430/bin/ld.exe: 
> ```
> 
> 区域“ram”溢出 142 个字节 collect2：ld 返回 1 个退出状态

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T07:06:16.420

不确定这会有所帮助，但您可以指定要使用的内存区域，请参阅[文档](http://ftp.gnu.org/old-gnu/Manuals/ld-2.9.1/html_mono/ld.html#SEC16)。

除此之外，您使用整数会浪费很多空间。减少内存的更简单方法：`const int frontFrame[3][9]`在`const BYTE frontFrame[3][9]`声明`typedef unsigned char BYTE`.

如果您使用位来表示位，您可以节省更多：

```
#define ON(b) (1 << b)

const int frontFrame[3] = {
     {ON(8) | ON(7) | ON(6)},
     {ON(8) | ON(7) | ON(6)},
     {ON(8) | ON(7) | ON(6)}
}; 
```

您将使用（在 displayFrame 中）测试一下

```
for (int r = 0; r < ROWS_NUM; ++r)
  for (int c = 0; c < COLS_NUM; ++c)
    if (frame[r] & ON(c)) { ... } 
```

我也会尝试`static`在数据声明之前添加，但很可能这对内存放置没有影响。

# c# - 使用mysqldataadapter归档时设置数据表的列默认值

> ID：15582796
> 
> 赞同：3
> 
> 时间：2013-03-23T02:44:06.167
> 
> 标签：c#, mysql, database

这是我现在的代码：

```
private static MySqlConnection conn = null;
private static MySqlDataAdapter AccountsDa = null;
private static MySqlCommandBuilder AccountsCb = null;
AccountsDa = new MySqlDataAdapter("SELECT * FROM accounts", conn);
AccountsCb = new MySqlCommandBuilder(AccountsDa);
Accounts = new DataTable();
AccountsDa.Fill(Accounts); 
```

如果我这样做，我正在尝试弄清楚如何定义列默认值而无需手动执行：

```
DataColumn col = new DataColumn();
col.ColumnName = "id";
col.AllowDBNull = false;
col.DataType = System.Type.GetType("System.Int32");
col.DefaultValue = 0;
Accounts.Columns.Add(col); 
```

对于每个列，它都可以正常工作，但是当表格被填满时，我如何让它自动设置数据库中的默认值。我希望我不必手动定义 30 列。

我尝试了 Accountsda.FillSchema(Accounts, SchemaType.Source); 它设置了允许空值和自动增量，但不是默认值

稍后在数据表中添加一行时会出现问题，有时我只需要为一列设置值，然后让其余列使用它们的默认值。

我可以输入 180 行代码来手动定义插入行的默认值，但是在创建/填充数据表时必须有一种方法可以从数据库中获取它

我正在使用内存数据表，因为有时数据仅存在 2 分钟，然后再次被删除，因为这是用于在线 rts 游戏的专用服务器。所以为了保存数据库上的点击，我使用数据表并操作它们并每 10 分钟刷新一次，这样我每 10 分钟对数据库只有 1,000 次点击，而不是可能有 40,000 次点击

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T04:16:34.727

最终在他们的论坛上得到回复后，根据 msdn 专家的说法，它不可能获得默认值。你所能做的就是加载该值是否允许为空并且它的自动增量但是你必须设置种子并踩到自动增量它也没有从数据库中获取它但是他们提供了一个速记版本它减少到 30 行代码而不是 180 行

在调用 fillschema 然后填充数据表之后，可以像这样简单地将其减少到一行而不是六行

```
Cities.Columns["wood"].DefaultValue = 0; 
```

在几次回复之后，甚至还有一种更简单的方法可以做到这一点，而不是我想要的方式，但也许它会帮助其他人走上同一条路，而不是每列一行，这在 3 行中完成

```
foreach (DataColumn col in Cities.Columns) {
    if (col.ColumnName != "id") col.DefaultValue = 0;
} 
```

id 是主键，不能设置默认值

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-31T13:01:33.880

所以我试图做一些与你类似的事情（除了我不知道如何获取有关自动增量的信息） - 我从[https://stackoverflow.com/a/12731310/222897得到了这个想法](https://stackoverflow.com/a/12731310/222897)

```
 private void AssignMandatoryColumns([NotNull] DataTable structure, string tableName)
    {
        // find schema
        string[] restrictions = new string[4]; // Catalog, Owner, Table, Column
        restrictions[2] = tableName;
        DataTable schemaTable = _dbCon.GetSchema("Columns", restrictions);
        if (schemaTable == null) return;

        // set values for columns
        foreach (DataRow row in schemaTable.Rows)
        {
            string columnName = row["COLUMN_NAME"].ToString();
            if (!structure.Columns.Contains(columnName)) continue;
            if (row["IS_NULLABLE"].ToString() == "NO") structure.Columns[columnName].AllowDBNull = false;

            //if (structure.Columns[columnName].AutoIncrement) continue; // there can be no default value
            var valueType = row["DATA_TYPE"];
            var defaultValue = row["COLUMN_DEFAULT"];
            try
            {
                structure.Columns[columnName].DefaultValue = defaultValue;
                if (!structure.Columns[columnName].AllowDBNull && structure.Columns[columnName].DefaultValue is DBNull)
                {
                    Logger.DebugLog("Database column {0} is not allowed to be null, yet there is no default value.", columnName);
                }
            }
            catch (Exception exception)
            {
                if (structure.Columns[columnName].AllowDBNull) continue; // defaultvalue is irrelevant since value is allowed to be null
                Logger.LogWithoutTrace(exception, string.Format("Setting DefaultValue for {0} of type {1} {4} to {2} ({3}).", columnName, valueType, defaultValue, defaultValue.GetType(), structure.Columns[columnName].AllowDBNull ? "NULL" : "NOT NULL"));
            }
        }
    } 
```

该函数采用您要为其设置值的DataTable（我通过查询数据库得到我的）和表的名称。

出于某种原因，无论我做什么，时间戳和日期列都不喜欢它们的默认值。

# java - 获取子类的静态数据

> ID：15582798
> 
> 赞同：-1
> 
> 时间：2013-03-23T02:45:27.403
> 
> 标签：java, class, subclass

我有一堂课`Player`，需要`Location`上课。每个位置类都 extends `Location`，它有一个`get()`返回静态实例的方法。

如果字符有一个引用位置扩展类名称的字符串，我如何获取实例？

特点：

```
public class Player {
    public static Location getLocation() {
        try {
            //return location
        } catch (Exception ex) {
            Logger.getLogger(Player.class.getName()).log(Level.SEVERE, null, ex);
        }
        return null;
    }
} 
```

地点：

```
public class Location{
    protected static Location singleton;
    public static Location get() {
        return null;
    } 
```

位置类：

```
public class Finleydale extends Location{
    public static Location get() {
        if (Finleydale.singleton == null) {
            Finleydale.singleton = new Finleydale();
        }
        return singleton;
    }
} 
```

我有多个附加地址信息，并且我在位置类中有单例，所以所有附加地址信息都有它；并且单例是静态的，因为该位置只有一个版本。有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T03:25:14.627

您在基类中声明静态字段的方式意味着您在整个程序中只有一个引用。如果您有多个子类，并且每个子类都分配给它，那么每个子类都分配给基类中*的相同*（静态）字段。`Location`我认为您希望每个子类中都有一个单独的单例。

如果您想通过键（例如字符串值）查找特定位置，那么我认为 Singleton 模式并不是您正在寻找的。我会创建一个“位置注册表”类，如下所示：

```
public class LocationRegistry
    {
    private static final Map<String, Location> registry;
    static
        {
        final Map<String, Location> _registry = new HashMap<>();
        _registry.put("Finleydale", new Finleydale());
        // ...
        registry = Collections.unmodifiablemap(_registry);
        }

    public static Location getLocation(final String id)
        {
        return registry.get(id);
        }
    } 
```

一些注意事项：

*   您仍然可以使用 Singleton 模式来填充注册表
*   如您的问题所示，经典的单例模式不是线程安全的。如果不是不可能的话，一个没有不必要锁定的正确线程安全版本是非常棘手的。一个`static final`字段很好地解决了这个问题。
*   没有必要让注册表显式引用每个 Location 子类。您可以让每个位置注册自己。唯一的技巧是有一种机制可以加载位置，以便它们可以注册自己。
*   子类实际上适合这种用途吗？不同的位置是否有不同的行为或只是不同的数据（即名称）？如果是后者，那么我将只使用一个 Location 类和一个工厂（例如上面的静态初始化程序）来创建每个位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T03:33:44.663

关于您的对象模型的某些内容似乎是错误的。为什么没有一个`Locatable`带有`getLocation()`方法的接口，接口的实现者可以返回它们各自的位置。单例`Location`在概念上似乎是错误的。

```
interface Locatable { 
   Location getLocation();
}

class FinleyLand implements Locatable { 
    @Override
    Location getLocation() { 
       //whatever it takes to get you there...
    }     
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T16:14:56.680

我拿走了 get() 函数的静态修饰符并更改了 Player 类，如图所示。
你们其他人，你们的意见很棒。

```
 String locationS; //Class name
    public static Location getLocation() {
        return ((Location) Class.forName(locationS).newInstance()).get();
    } 
```

# jvm - Java继承了字段阴影和JVM？

> ID：15582799
> 
> 赞同：0
> 
> 时间：2013-03-23T02:45:27.997
> 
> 标签：jvm, field, bytecode, shadowing

该机制是如何通过继承隐藏/隐藏字段并稍后解决 JVM 规范的一部分？我知道它是[Java 规范的一部分](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3)，可以在许多博客文章和 SO 问题中找到。但是，当我实际查看 JVM 规范中的[字段解析](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-5.html#jvms-5.4.3.2)时，“隐藏”或“阴影”这两个词并没有出现在[JVM 规范的 pdf 中的](http://docs.oracle.com/javase/specs/jvms/se7/jvms7.pdf)任何位置。

我问这个是因为我正在编写自己的 JVM，并且发现这个字段阴影是字节码/VM 的属性，而不仅仅是 Java 编译器或 Java 语言的一部分。我想知道应该在 VM 级别实施的正确、权威的方式。当然，JVM 的一个（错误？）特性需要在某个地方正式记录这一重要的特性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T03:02:02.193

阴影一词通常是指当一个标识符阴影另一个时。即一个给定的名称可以引用多个变量，因此必须有一种机制来消除它的歧义。这主要是一种语言级别的结构，因为它包含更多的名称。局部变量名称根本不会出现在字节码中，除了作为可选的调试信息之外。

从字节码的角度来看，您已经有了对类、名称和描述符的显式引用。唯一的问题是您所描述的字段是否实际上是在您指定的类中声明的，或者它是否是从它的超类之一继承的。

正如您已经发现的那样，字段分辨率在`5.4.3.2`标准部分进行了解释。没有使用术语隐藏和阴影，因为它们适用于源代码，而不是类文件。

# nsstring - 如何获取 UIColor 的名称？

> ID：15582801
> 
> 赞同：1
> 
> 时间：2013-03-23T02:45:50.093
> 
> 标签：nsstring, uicolor

我有一系列 UIColors 像

```
[UIColor blueColor]; 
```

是否可以从该 UIColor 中获取名称“蓝色”，以将其显示在字符串中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T02:53:05.757

UIKit 没有内置任何内容，但 Erica Sadun 的[uicolor-utilities 库](https://github.com/erica/uicolor-utilities)添加了类似的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:18:05.203

如果需要，您可以获取 UIColor 的 RGB 和 Alpha。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-18T04:06:32.400

可以使用 获取颜色名称列表`runtime`。请参阅我的问题：[如何获取 UIColor 的所有颜色方法？](https://stackoverflow.com/questions/34846964/how-to-get-all-color-methods-of-uicolor#34847052)

如果需要，您还可以使用字符串方法进行`'xxxColor'`转换`'xxx'`。

# iphone - 如何通过 xCode 构建设置在 iPhone 上预设地理位置？

> ID：15582804
> 
> 赞同：0
> 
> 时间：2013-03-23T02:46:09.273
> 
> 标签：iphone, xcode, geolocation

以下是我要完成的一些步骤：

> 1) 在 XCode 中，我正在创建一个新的单视图项目。
> 
> 2）没有应用程序做任何事情，我将它部署到我的 iPhone。
> 
> 3）我想做的是为应用程序指定一个设置，以便当它通过 xCode 在我的 iPhone 上构建/安装时，它会欺骗我的 iPhone 以为我在一个特定的城市。
> 
> 4）当我打开地图时，它应该默认当前位置为＃3中指定的城市。
> 
> 5）一旦我的手机 ping 到运营商，它就会获取我当前的位置并再次准确。

我遇到的问题是我找不到在#3 中指定默认城市位置的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:47:44.327

想通了。

要完成，您需要进入文件菜单 -> 产品 -> 方案 -> 编辑方案 -> 核心位置 -> 默认位置 -> 设置到您想要的位置

# java - 将值从一个类返回到另一个

> ID：15582805
> 
> 赞同：0
> 
> 时间：2013-03-23T02:46:13.720
> 
> 标签：java, swing, constructor, jframe, netbeans-7

class1 - 坐标的动态值被保存，并希望将值返回给 class2 的函数。

```
public class NewJFrame extends javax.swing.JFrame {    

    public NewJFrame() {
        initComponents();
    }    

    ArrayList<Integer> al= new ArrayList<Integer>();
    private void jLabel1MouseClicked(java.awt.event.MouseEvent evt) {
      int x= evt.getX();
      int y= evt.getY();          
      al.add(x);
      al.add(y);
       System.out.println("hi1"+al);
    }
     public ArrayList<Integer> cord()
     {
          System.out.println("hi2"+al);
         return al;
     }

    public static void main(String args[]) {

        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new NewJFrame().setVisible(true);
            }
        });
    }       

    private javax.swing.JLabel jLabel1;       
} 
```

类2

```
public class JavaApplication13 {

    public void hello()
    {
        NewJFrame j= new NewJFrame();
        ArrayList<Integer> al=j.cord();
        System.out.println("hi3"+al);
    }

    public static void main(String[] args) {
        JavaApplication13 j= new JavaApplication13();
        j.hello();
    }
} 
```

我想将 x 和 y 坐标的值从 class1 返回到 class2。但它显示为空。帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T11:18:57.390

在`NewJFrame`课堂`ArrayList<Integer> al`上公开静态并`JavaApplication13`阅读它`System.out.println("hi3"+NewJFrame.al.get())`。当然，这种方法只是千万种方法中的一种，而且你的代码有一些问题：你不能（我想你会从 ArrayList 中获得一些价值）做`"hi3"+al`。

# c# - 您如何从网站的表格中查找和提取信息？

> ID：15582807
> 
> 赞同：1
> 
> 时间：2013-03-23T02:46:21.890
> 
> 标签：c#, web-scraping, nodes, html-agility-pack

我对 C# 和特定的 HtmlAgilityPack 非常陌生，我无法从网站获取信息。例如，我想从网站的表格中获取图片网址： [Serebii](http://www.serebii.net/pokedex-rs/004.shtml)

从网站上，我试图找到并提取以下内容：

![图片链接](../Images/0aee97ac9589e4db3a9832e36ae35c4b.png)

```
 string s = "http://www.serebii.net/pokedex-rs/005.shtml";

        HtmlWeb hw = new HtmlWeb();
        HtmlAgilityPack.HtmlDocument doc = hw.Load(s);

        //HtmlNodeCollection items = doc.DocumentNode.SelectNodes("//a[@class='question-hyperlink']");
        HtmlNodeCollection items = doc.DocumentNode.SelectNodes("//table//tr//td//div//table//tbody//tr//td//img");
        foreach (HtmlNode item in items)
        {
            Console.WriteLine(item.OuterHtml);
            MessageBox.Show(item.OuterHtml);
        }

        Console.ReadLine(); 
```

我相当确定我离球很远，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T03:15:00.160

你只能希望开发者不喜欢经常更新源代码。

```
var item = doc.DocumentNode.SelectSingleNode("//table//tr//tr//td//div//tr//img");
string imageSrc = item.GetAttributeValue("src", "");
Console.WriteLine(imageSrc); 
```

# java - 如何仅在关闭框架后运行方法？

> ID：15582811
> 
> 赞同：4
> 
> 时间：2013-03-23T02:47:32.627
> 
> 标签：java, swing, jframe

所以，我的代码现在看起来像这样：

```
Class2 className = new Class2(param1, param2);
className = null;
if (Class2 == null) {
    refreshState();
} 
```

我希望该`refreshState`方法在`className`对象被销毁后运行。所以基本上`Class2`是一个在我现有框架之上运行另一个框架的类。我希望该方法仅在新框架关闭时运行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T02:50:48.503

> 所以基本上 Class2 是一个在我现有框架之上运行另一个框架的类。我希望该方法仅在新框架关闭时运行。我怎样才能做到这一点？

更好的解决方案是使用模态对话框，例如 JOptionPane 或模态 JDialog。这将停止处理主窗口中的 Swing 代码，直到对话框窗口被处理并且不再可见。然后您的 refreshState 可以在对话框关闭后立即运行：

伪代码：

```
main window code
show modal dialog
refresh state here. This will be called only after the dialog has returned. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T09:29:50.447

我会说在框架中添加一个 java.awt.event.WindowListener：

```
class2.getFrame().addWindowsListener(new WindowAdapter() {
    public void windowClosed(WindowEvent we) {
        // The frame is closed, let's dot something else
        refreshState();
    }
} 
```

# scripting - Windows批处理文件获取通配符匹配行的值，检查子字符串并在需要时附加字符串

> ID：15582816
> 
> 赞同：0
> 
> 时间：2013-03-23T02:48:21.463
> 
> 标签：scripting, batch-file

我对命令脚本完全陌生，可以使用一些指导......

我需要检查 .ini 文件中的某一行是否存在，但我只知道该行的哪一部分。如果它存在，我知道它将以字符串“Extmgr_Addins=”开头，并且它可以具有任意数量的逗号分隔字符串值。

如果我找到这一行，我需要查看是否包含子字符串“mc”。如果它已经有“mc”，那么什么也不做。如果没有，我需要将字符串“,mc”附加到该行的末尾。这是我到目前为止所拥有的：

```
for /f "TOKENS=*" %%x in (myFile.ini) do (

set line=%%x
set line=!tst:Extmgr_Addins!

if not !line!==%%x ( 
     REM matched string ExtMgr_Addins
   set hasMC = %%x
   set hasMC=!hasMC:mc!

   if not !line!==%%x (

        REM matched substring of mc - do nothing

        )else(

                         REM here is where I would append "mc" to this line                 
        )
            ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T05:09:06.637

```
@ECHO OFF
SETLOCAL
:temploop
(SET tempfile="%temp%\temp%random%.#$#")
IF EXIST %tempfile% GOTO temploop

(FOR /f "delims=" %%x IN (myfile.ini) DO (
>%tempfile% ECHO %%x
 FINDSTR /b "Extmgr_Addins=" <%tempfile% >NUL
 IF ERRORLEVEL 1 (ECHO.%%x) ELSE (
  FIND "mc" <%tempfile% >NUL
  IF ERRORLEVEL 1 (ECHO %%x,mc) ELSE (ECHO %%x)
 )
)
)>newfile.ini
DEL %tempfile%

ECHO ==== original file =====
type myfile.ini
ECHO ==== modified file =====
type newfile.ini
ECHO ==== differences =====
FC myfile.ini newfile.ini
ECHO ==== end of report =====

GOTO :eof 
```

结果：

```
tempfile="c:\temp\temp8291.#$#"
==== original file =====
notthisline
Extmgr_Addins=notargetstring
Extmgr_Addins=mchastargetstring
Extmgr_Addins=hastargetatendmc
 Extmgr_Addins=notbeginsnotargetstring
 Extmgr_Addins=notbeginsmchastargetstring
 Extmgr_Addins=notbeginshastargetatendmc
mcinthisline
thislinehasmctoo
andat the end mc
mc and Extmgr_Addins=
Extmgr_Addins=finally !@#$%^&*()_+|\=-0<>,./?:;'[]{}"
Extmgr_Addins=mc finally !@#$%^&*()_+|\=-0<>,./?:;'[]{}"
==== modified file =====
notthisline
Extmgr_Addins=notargetstring,mc
Extmgr_Addins=mchastargetstring
Extmgr_Addins=hastargetatendmc
 Extmgr_Addins=notbeginsnotargetstring
 Extmgr_Addins=notbeginsmchastargetstring
 Extmgr_Addins=notbeginshastargetatendmc
mcinthisline
thislinehasmctoo
andat the end mc
mc and Extmgr_Addins=
Extmgr_Addins=finally !@#$%^&*()_+|\=-0<>,./?:;'[]{}",mc
Extmgr_Addins=mc finally !@#$%^&*()_+|\=-0<>,./?:;'[]{}"
==== differences =====
Comparing files myfile.ini and NEWFILE.INI
***** myfile.ini
notthisline
Extmgr_Addins=notargetstring
Extmgr_Addins=mchastargetstring
***** NEWFILE.INI
notthisline
Extmgr_Addins=notargetstring,mc
Extmgr_Addins=mchastargetstring
*****

***** myfile.ini
mc and Extmgr_Addins=
Extmgr_Addins=finally !@#$%^&*()_+|\=-0<>,./?:;'[]{}"
Extmgr_Addins=mc finally !@#$%^&*()_+|\=-0<>,./?:;'[]{}"
***** NEWFILE.INI
mc and Extmgr_Addins=
Extmgr_Addins=finally !@#$%^&*()_+|\=-0<>,./?:;'[]{}",mc
Extmgr_Addins=mc finally !@#$%^&*()_+|\=-0<>,./?:;'[]{}"
*****

==== end of report ===== 
```

前几行处理建立一个有效的临时文件名。

然后我们

1.  读一行
2.  将其转储到临时文件中
3.  检查以目标字符串开头的行
4.  如果未找到（错误级别 1） ECHO 该行
5.  如果找到（不是错误级别 1，因此错误级别为 0）

*   检查是否存在“mc”
*   如果找不到，则输出附加“，mc”的行，否则只输出该行

然后删除临时文件并显示一个报告： 原来的MYFILE.INI 使用了输出NEWFILE.INI 和它们之间的区别。

将正在检查的行写入临时文件意味着可以正确处理像`<`和批量重定向器这样的尴尬字符。`>`正常的方法是卡在管道中`ECHO %%x|findstr...`并`>`泄漏错误消息。

关于唯一的问题是空行和可能以';'开头的行 将从输出中删除，但将保留包含唯一空格的行...

# android - Android VideoView 播放控件最初显示“播放”而不是“暂停”，即使文件已经在播放

> ID：15582818
> 
> 赞同：6
> 
> 时间：2013-03-23T02:48:42.670
> 
> 标签：android, android-videoview, mediacontroller

下午好/早上好！希望有人可以帮助我解决我遇到的一个小问题。我正在使用 a`VideoView`和 custom播放远程 .mp3 文件`MediaController`。

我的 MediaController 看起来像这样：

```
public class MyMediaController extends MediaController {

public MyMediaController(Context context) {
    super(context);      
}

// Do nothing on the overridden hide method so the playback controls will never go away.
@Override
public void hide() {

}

// Override the dispatchKeyEvent function to capture the back KeyEvent and tell the activity to finish.
@Override
public boolean dispatchKeyEvent(KeyEvent event)
{
    if (event.getKeyCode() == KeyEvent.KEYCODE_BACK) 
    {
        ((Activity) getContext()).finish();
    }

    return super.dispatchKeyEvent(event);
} 
```

}

我将其附加到我的`VideoView`外观的代码如下所示：

```
 VideoView videoView = (VideoView) findViewById(R.id.VideoView);

    // Use our own media controller, which inherits from the standard one. Do this to keep 
    // playback controls from disappearing.
    mediaController = new MyMediaController(this);
    mediaController.setAnchorView(videoView);

    Uri video = Uri.parse(URL);

    videoView.setMediaController(mediaController);
    videoView.setVideoURI(video);

    // Set a handler that will show the playback controls as soon as audio starts.
    videoView.setOnPreparedListener(new OnPreparedListener() {

        @Override
        public void onPrepared(MediaPlayer arg0) {

            mediaController.show();
        }

    });

    videoView.start(); 
```

我遇到的问题是，当 .mp3 文件开始播放时，底部的控制栏显示“播放”按钮（即三角形）而不是“暂停”按钮（两个平行条），即使音频是已经在玩了。有人知道怎么修这个东西吗？

编辑1：

我也对播放远程 .mp3 的任何其他解决方案感兴趣。我唯一的要求是用户可以暂停/播放音频，还可以查看音频文件（标题）的名称。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-13T05:22:10.087

试试这个：它为我解决了这个问题。

```
mMediaPlayer.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
    @Override
    public void onPrepared(MediaPlayer mp) {
        mp.start();
        mMediaController.show();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T13:16:34.343

简单地：

```
@Override
        public void onPrepared(MediaPlayer arg0) {

         if (mediaController.isShowing==false) {mediaController.show();}
        } 
```

# java - 为什么我们要特别使用 JMS？

> ID：15582820
> 
> 赞同：0
> 
> 时间：2013-03-23T02:49:28.020
> 
> 标签：java, jms

当您可以手动创建队列或手动执行异步功能时，为什么我们使用 JMS？JMS 具体做了哪些我们无法通过普通代码实现的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T02:55:01.490

> 为什么我们要特别使用 JMS？

因为：

*   使用 JMS 比“手动”重新发明轮子更好地利用开发人员的时间，并且
*   当您完成后，下一个人必须维护的自定义代码会更少（可能较差）。

另一方面，如果您的应用程序要求足够简单，以至于您只需要内部 JVM 队列和 java.util / java.util.concurrent 队列类，*那么*您可能不应该使用 JMS。

* * *

> JMS 具体做了哪些我们无法通过普通代码实现的功能？

技术上/理论上什么都没有，但见上文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T04:36:52.657

JMS 类似于 JDBC。它允许您编写使用消息传递框架的代码，而无需直接使用专有类。因为您的代码使用公共类/接口，所以可以在不更改所有代码的情况下更改消息传递实现。如果您想从 MQ 更改为 HornetQ，或更改执行应用程序代码的应用程序容器，则无需更改大部分代码发布/消费消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T02:58:45.977

*   它简化了编码（即，当您可以手动完成时，您不需要开发数据库引擎）
*   它将代码与环境设置分开（即，当您改变环境时，您不需要重新编译/部署——只需配置它）
*   可靠性、顺序消息传递、QoS、优先级等

# xslt - 从输出中省略不需要的命名空间

> ID：15582825
> 
> 赞同：7
> 
> 时间：2013-03-23T02:50:50.253
> 
> 标签：xslt, output, xml-namespaces

我的 XSLT 正在输出一些带有`xmlns:x="http://something"`属性的标签...如何避免这种冗余属性？输出 XML 从不使用，既不在.`x:tag`也不在`x:attribute`.

* * *

XML 示例：

```
<root><p>Hello</p><p>world</p></root> 
```

XSL 示例：

```
<xsl:transform version="1.0" 
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
   xmlns:xlink="http://www.w3.org/1999/xlink">
<xsl:output encoding="UTF-8" method="xml" version="1.0" indent="no"/>

<xsl:template match="root"><foo>
   <xsl:for-each select="p">
    <p><xsl:value-of select="." /></p>
   </xsl:for-each></foo>
   <xsl:for-each select="x">
    <link xlink:href="{x}" />
   </xsl:for-each></foo>
</xsl:template> 
```

XML 输出示例：

```
<foo>
   <p xmlns:xlink="http://www.w3.org/1999/xlink">Hello</p>
   <p xmlns:xlink="http://www.w3.org/1999/xlink">world</p>
</foo> 
```

这`xmlns:xlink`是一个开销，它没有被使用！

* * *

XSLT 必须使用命名空间但输出不使用[的典型情况：](http://php.net/manual/en/xsltprocessor.registerphpfunctions.php)

```
 <xsl:value-of select="php:function('regFunction', . )" /> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T06:06:28.727

正如 Dimitre 已经说过的，如果您没有`xlink`在 XSLT 中的任何地方使用名称空间，您应该只删除它的名称空间声明。但是，如果您的 XSLT 实际上在您没有向我们展示的地方使用它，您可以通过使用以下`exclude-result-prefixes`属性来阻止它被输出：

```
<xsl:transform version="1.0"
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
   xmlns:xlink="http://www.w3.org/1999/xlink"
   exclude-result-prefixes="xlink"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T04:24:50.143

**只需从指令中删除这个命名空间声明`xsl:stylesheet`——它根本不被使用（因此是必要的）**：

```
xmlns:xlink="http://www.w3.org/1999/xlink" 
```

**整个转变现在变成**：

```
<xsl:transform version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output encoding="UTF-8" method="xml" version="1.0" indent="no"/>

 <xsl:template match="root"><foo>
   <xsl:for-each select="p">
   <p class="a"><xsl:value-of select="." /></p>
   </xsl:for-each></foo>
 </xsl:template>
</xsl:transform> 
```

**当应用于提供的 XML 文档时**：

```
<root><p>Hello</p><p>world</p></root> 
```

**产生没有命名空间的结果**：

```
<foo>
    <p class="a">Hello</p>
    <p class="a">world</p>
</foo> 
```

# php - $_SESSION 未注册

> ID：15582828
> 
> 赞同：0
> 
> 时间：2013-03-23T02:51:01.553
> 
> 标签：php, session, login, passwords

这段代码有什么问题？

登录.html：

```
<?php
 session_start();
 if (isset($_SESSION['password'])) {
    header("location:admin.php");
    } else {

echo "<html>
<head>
<title>
FLG iRadio Station
</title>
<link rel='stylesheet' type='text/css' href='css/main.css' />
</head>
<body>
<center>
TO LOGIN, SUBMIT PASSWORD
<form name='login' id='login' method='POST' action=logincheck.php>
 <input type='password' NAME='password' id='password' maxlength='15' />
 <input type='submit' value='Submit Password'/>
 </form>
</center>
</body>
</html>";

    }
?> 
```

登录检查.php：

```
<?php
    $password = $_POST['password'];
    if($password == "flgpdrii"){
    session_register("password");
    header("location:admin.php");
    }
    else
    {
    echo "Wrong Password! <a href='login.html'>Login again</a>";
    }
?> 
```

管理员.php：

```
<?php
 session_start();
 if (isset($_SESSION['password'])) {
        echo "Welcome Admin";
    } else {
        echo "Login <a href='login.html'>here</a>";
    }
    echo $_SESSION['password'];
?> 
```

和注销.php：

```
<?php

// Inialize session
session_start();

// Delete certain session
unset($_SESSION['username']);
// Delete all session variables
session_destroy();

// Jump to login page
header('Location: login.html');
?> 
```

输入正确的密码，它将重定向到 admin.php 并回显“在此处登录”。它必须是“欢迎管理员”

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T08:00:22.187

有两点需要纠正。。

1) 将 Login.html 保存为 Login.php，因为您使用的是 PHP 代码。

2) 编辑 Logincheck.php 如下

```
<?php
     session_start();
    $password = $_POST['password'];
    if($password == "flgpdrii"){
    //session_register("password");
    $_SESSION['password'] = $password;
    header("location:admin.php");
    }
    else
    {
    echo "Wrong Password! <a href='login.html'>Login again</a>";
    }
?> 
```

session_register 已贬值，最好避免使用它。

# html - CSS 水平菜单

> ID：15582829
> 
> 赞同：1
> 
> 时间：2013-03-23T02:51:01.570
> 
> 标签：html, css, menu, width

我遇到了这个水平菜单栏的问题。假设它适合窗口（宽度方向），但比它应该继续的更远一点。它也应该是 top:0;left:0;

我做的每件事中的任何一件都有效。要么我将它对齐左上角但宽度太大，要么它没有对齐并且宽度适合。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Website Title</title>
    </head>
    <body>
    <style>
    body{
    }

    .bg{
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        z-index: -5000;
    }
    #cssmenu ul {
        list-style-type:none;
        width:100%;
        position:absolute;
        display:block;
        height:33px;
        font-size:.6em;
        background: #76B3F1 url(images/menu-bg.png) repeat-x top left;
        font-family:Verdana,Helvetica,Arial,sans-serif;
        border:1px solid #000;
        margin:0;
        padding:0;
        top:0;
        left:0;
    }

    #cssmenu li {
        display:block;
        float:left;
        margin:0;
        padding:0;
    }

    #cssmenu li a {
        float:left;
        color:#A79787;
        text-decoration:none;
        height:24px;
        padding:9px 15px 0;
        font-weight:normal;
    }

    #cssmenu li a:hover,.current {
        color:#fff;
        background: #A3BAE6 url(images/menu-bg.png) repeat-x top left;
        text-decoration:none;
    }

    #cssmenu .current a {
        color:#fff;
        font-weight:700;
    }
    </style>

    <div id="cssmenu">
        <ul>
           <li class='active '><a href='#'><span>Home</span></a></li>
           <li><a href='#'><span>Products</span></a></li>
           <li><a href='#'><span>Company</span></a></li>
           <li><a href='#'><span>Contact</span></a></li>
        </ul>

    </div>
    <div id="background">
        <img src="background/001.JPG" class="bg"/>
    </div>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T03:01:08.627

添加`box-sizing: border-box;`css 属性。

这告诉菜单在计算“100%”时考虑边框

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T03:10:27.477

到目前为止的答案似乎很麻烦，所以重新发布我的评论作为答案：

只需将样式更改`width:100%`为。比 IE6 更好的一切都支持这一点。如果您需要支持 IE6，请使用其语法：`left:0;right:0``ul``expression`

```
width:expression((this.parentNode.offsetWidth-2)+'px') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T03:05:39.803

如果您不想像`box-sizing`Rockafella 建议的那样使用 CSS3 属性，您可以尝试[对您的 CSS 进行此编辑](http://jsfiddle.net/Zkvy9/4/)。

我摆脱了您的，为容器`position: absolute`添加了`1px`填充，并为. 这样，on会使*内容框*的宽度不包括您指定的 1px 边框。`<div>``-1px``<ul>``width: 100%``<ul>`

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T03:29:14.550

添加`overflow-x: hidden`到您的`body`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T03:36:11.550

不使用边框，使用插入框阴影怎么样？你需要打开你的前缀，它在旧的 IE 中不起作用。就我而言，业界已经在旧版 IE 上转了个弯，并且明白给它所有的阴影和圆角是不值得的。

```
box-shadow:inset 0 0 1px 0 #000; 
```*

# android - 访问数据库中的数据并将它们放入 String[]

> ID：15582830
> 
> 赞同：0
> 
> 时间：2013-03-23T02:51:09.823
> 
> 标签：android, string, sqlite, list

我在数据库中建立了一个表，现在我想访问某个列中的所有值。最后，我想将数据放入`byte[]`. 我的部分代码：

```
db.execSQL("create table thing(id integer primary key" +
            " autoincrement, name varchar(20))");

List<Integer> all = new ArrayList<Integer>();       
String sql = " SELECT id from " + DB_NAME;
Cursor result = this.db.rawQuery(sql, null);

for (result.moveToFirst(); result.isAfterLast(); result.moveToNext()) {
    all.add(result.getInt(0));          
}

String[] fstr = (String[]) all.toArray();
for (String bstr : fstr) {
    byte[] bbs = bstr.getBytes();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T04:28:56.877

> 使用此代码

```
String[] fstr = new String[result.getCount()] ; 

    do {
    int posi = result.getPosition();
     fstr[posi] =result.getString(0);                           
    }while (result.moveToNext()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T04:59:26.463

尝试这个

```
Cursor c=this.db.rawQuery(sql, null);
if(c.getCount()>0)
{
   for(c.moveToFirst();!c.isAfterLast();c.moveToNext())
   {
     String str=c.getInt(0));// or c.getString();
   }
}

else
{
  Log.d(" Null value in cursor ", " null ");
}
c.close();
dbhelper.close(); 
```

# android - getActionBar() == null 什么时候不应该

> ID：15582831
> 
> 赞同：3
> 
> 时间：2013-03-23T02:51:33.927
> 
> 标签：android, android-actionbar, actionbarsherlock, android-4.0-ice-cream-sandwich, robolectric

我觉得我一定错过了一些疯狂的东西。我正在将编写的代码转换为与 ABS 一起使用（并且确实有效），并将其切换为使用本机 ActionBar。我将 min SDK 设置为 14 并为框架版本切换了一些东西，现在我无法让它`ActionBar`存在。

我的`Activity`：

```
public class HomeActivity extends Activity {

    @Override
    protected void onCreate(@CheckForNull Bundle icicle) {
        super.onCreate(icicle);
        getWindow().requestFeature(Window.FEATURE_ACTION_BAR);
    }
} 
```

我的安卓清单：

```
<uses-sdk android:minSdkVersion="14" android:targetSdkVersion="17"/>
...
<activity android:launchMode="singleTop" android:name=".ui.HomeActivity" android:theme="@android:style/Theme.Holo">
    <intent-filter>
        <action android:name="android.intent.action.MAIN"/>
        <category android:name="android.intent.category.LAUNCHER"/>
    </intent-filter>
    <meta-data android:name="target device" android:value="universal"/>
</activity> 
```

我的 Robolectric 测试：

```
@RunWith(RobolectricTestRunner.class)
public class HomeActivityTest {

    @Test
    public void testActionBarDisplay() {
        // Given
        final HomeActivity activity_under_testing = new HomeActivity();

        // When
        activity_under_testing.onCreate(null);

        // Then
        assertThat(activity_under_testing.getActionBar())
        .hasDisplayOptions(ActionBar.DISPLAY_SHOW_HOME
                           |ActionBar.DISPLAY_SHOW_TITLE
                           |ActionBar.DISPLAY_USE_LOGO);
    }
} 
```

我正在使用 FEST-Android `assertThat`（不可能是问题）。

问题：

> 测试运行：1，失败：1，错误：0，跳过：0，经过的时间：7.563 秒 <<< 失败！testActionBarDisplay(com.imminentmeals.android.base.ui.HomeActivityTest) 经过时间：6.588 秒 <<< 失败！java.lang.AssertionError：期望实际在 com.imminentmeals.android.base.ui.HomeActivityTest.testActionBarDisplay(HomeActivityTest.java:28) 处不为空

我应该补充一点，我正在使用**Robolectric 2.0 Alpha 2**。我跳过了测试，打包了我的 apk，`ActionBar`似乎工作正常，所以我觉得这一定是 Robolectric 问题？但我认为它应该可以在原生 Android 上正常工作，因为它运行的是原生 Android 代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-01T10:20:37.530

这个问题相当老了，但我会发布我的解决方案，以防有人遇到同样的问题。

我面临与 Dandre 相同的问题，我使用 Robolectric 2.3、minSDK 16 并使用本机 ActonBar，但**getActionBar()**保持 returnign null。解决方案是确保我的风格是指明确提到 ActionBar 的主题。就我而言，我使用的是**Theme.Light**。通过将主题更改为**Theme.Holo.Light.DarkActionBar**，我让它工作了。我相信 Dandre 也有同样的问题，因为他的主题是**Theme.Holo**。

我觉得很奇怪主题是问题的原因，因为它不会影响我的应用程序。也许有人可以解释为什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-20T11:27:53.323

> 扩展 ActionBarActivity 代替 FragmentActivity。

*   ActionBarActivity 内部扩展了 FragmentActivity，所以不用担心。
*   使用 android.support.v7 类型的 ActionBar Activity。

    ```
    import android.support.v7.app.ActionBarActivity; 
    ```

> 使用 getSupportActionBar() 代替 getActionBar()

*   签入您的清单文件，如果使用了 NoTitleBar 主题，则删除该行

> android:theme="@android:style/Theme.NoTitleBar" // 删除这一行

*   如果问题仍未解决，则在 setContentView() 方法上方使用 FEATURE_ACTION_BAR。

> requestWindowFeature(Window.FEATURE_ACTION_BAR);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-11T19:03:19.513

如果你使用 ActionBarDrawerToggle 把 getActionBar() 放在 onDrawerOpened(ViewdrawerView){} `public void onDrawerOpened(View drawerView) { title = getActionBar().getTitle(); getActionBar().setTitle("Open Drawer"); }`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T04:11:31.347

在您的清单中，您应该制作主题`Theme.Sherlock`而不是`Theme.Holo`.

您需要扩展`SherlockActivity`或`SherlockFragmentActivity`。

在您使用 ABS 时返回`ActionBar`呼叫。`getSupportActionBar`

此外，您不需要调用`Window.FEATURE_ACTION_BAR`. 使用 Holo 主题就足够了。

**来自 ActionBarSherlock 文档**

> 操作栏 API
> 
> 在创建活动以在所有版本的 Android 上使用操作栏时，您必须声明您的活动以扩展任何以“Sherlock”开头的活动类（例如，SherlockActivity、SherlockFragmentActivity）。通过调用 getSupportActionBar()（而不是 getActionBar()）来处理与操作栏的交互。

[你可以在这里阅读文档](http://actionbarsherlock.com/usage.html)

[您可以在此处阅读有关样式 ABS 的更多信息](http://actionbarsherlock.com/theming.html)

# javascript - javascript id改变onclick函数

> ID：15582832
> 
> 赞同：0
> 
> 时间：2013-03-23T02:51:55.393
> 
> 标签：javascript, html, image

所以我得到了一个 3 x 3 的桌子，看起来像这样：

```
<table align=left width="896px" class="tableCategories">
<tr class="trCategories">
    <td class="tdCategories"><input type="button" id="P11" onclick="clickE()" value="E" /></td>
    <td class="tdCategories"><input type="button" id="P12" onclick="clickS()" value="S" /></td>
    <td class="tdCategories"><input type="button" id="P13" onclick="clickB()" value="B" /></td>
.... 
```

我只希望如果用户单击九个框之一，所有框都会更改其背景图像，并且单击的框会自行更改为引用前 9 个图像的后退按钮。如果单击其中一个框，就像打开子菜单一样。

所以我以我的方式尝试了它，但效果不佳。如果我单击其中一个框，它将触发通过 id 连接的两个操作。所以我的想法是将 id 更改为，但后来我想也许有更聪明的方法可以做到这一点。所以我在这里写了我的问题：D

编辑：

每个函数的 javascript 部分看起来都是这样的：

```
function clickE()
        {
            document.getElementById("P11").value = "Zurück";
            document.getElementById("P11").onclick = clickBack;

            document.getElementById("P12").value = "Restaurant";
            document.getElementById("P12").onclick =clickCategory("restaurant");

            document.getElementById("P13").value = "Imbiss";
            document.getElementById("P13").onclick =clickCategory("imbiss");

            document.getElementById("P21").value = "Bäckerei";
            document.getElementById("P21").onclick =clickCategory("baeckerei");

            document.getElementById("P22").value = "Fast Food";
            document.getElementById("P22").onclick =clickCategory("fast_food");

            document.getElementById("P23").value = "Süßes";
            document.getElementById("P23").onclick =clickCategory("suesses");

            document.getElementById("P31").value = "Cafe";
            document.getElementById("P31").onclick =clickCategory("cafe");

            document.getElementById("P32").value = "Bar";
            document.getElementById("P32").onclick =clickCategory("bar");

            document.getElementById("P33").value = "Kneipe";
            document.getElementById("P33").onclick =clickCategory("kneipe");

        } 
```

我首先尝试使用标签，因为我认为它可以以相同的方式处理图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T06:02:43.527

由于不确定长期申请，我可能有一个起点。如果您想要扩展，提供的初始脚本可能会有点笨拙，因此现在有一个“defineElements”方法可用于配置您的元素。请注意，参数参数也已添加到 html 中的 onclick 事件中。

“defineElements”函数返回一个关联数组对象（例如键/值对），每个键都以html 元素id 命名。每个键的值也是一个关联数组，包含元素 id (eid)、标签 (lbl) 和事件 (evnt)。

长话短说...当您单击一个按钮时，每个按钮的标签都会更改并分配适当的单击处理程序。如果您单击标有“返回”的按钮，则默认单击处理程序将重新分配给所有人。

如果您可以使用 jQuery，这也是一个很好的候选者。

希望这会让你朝着正确的方向前进：

**HTML**

```
<table>
<tr class="trCategories">
    <tr class="trCategories">
    <td class="tdCategories"><input type="button" id="P11" onclick="clickE(this.id)" value="E" /></td>
    <td class="tdCategories"><input type="button" id="P12" onclick="clickS(this.id)" value="S" /></td>
    <td class="tdCategories"><input type="button" id="P13" onclick="clickB(this.id)" value="B" /></td>
</tr>
</table> 
```

==**和 Javascript**

```
function clickE(id){
  var elementDef = defineElements(id);

  for(var key in elementDef){
    var propObj = elementDef[key];
    //console.log(propObj);
    document.getElementById(propObj.eid).value = propObj.lbl;
    if(id == undefined)
    document.getElementById(propObj.eid).onclick = function(){ clickE(this.id);}     //--reassign default event
    else
    document.getElementById(propObj.eid).onclick = propObj.evnt;
  }
}

function defineElements(id){
   var elementArr = ['P11','P12','P13']; //--add your element id's to this array to extend, and then add a case for each within switch below
   var definitionObj = {};

   for(var i = 0; i < elementArr.length; i++){
     switch(elementArr[i].toUpperCase()){
       case 'P11':
          definitionObj[elementArr[i].toUpperCase()] = { eid:elementArr[i].toUpperCase(), lbl:'Zuruck', evnt: function(){ clickCategory.call(this, "whatever"); } };
       break;
       case 'P12':
          definitionObj[elementArr[i].toUpperCase()] = { eid:elementArr[i].toUpperCase(), lbl:'Restaurant', evnt: function(){ clickCategory.call(this,"restaurant"); } };
       break;
       case 'P13':
          definitionObj[elementArr[i].toUpperCase()] = { eid:elementArr[i].toUpperCase(), lbl:'Imbiss', evnt: function(){ clickCategory.call(this,"imbiss"); } };
       break;
     }
   }

   if(id != undefined){  
    definitionObj[id]['evnt'] = function(){ clickBack.call(this); } //--assign the clickback function to the selected element based on id paramater
    definitionObj[id]['lbl'] = 'Back';
   }

   return definitionObj;
}

function clickCategory(cat){
  alert(cat);
}

function  clickBack(){
  clickE();
} 
```

# scala - 迭代地图的中间三分之一

> ID：15582835
> 
> 赞同：1
> 
> 时间：2013-03-23T02:53:33.750
> 
> 标签：scala, map, loops

我有一个 scala `Map[String, String]`，我只在地图的中间三分之一处将部分键与其值进行比较。由于在地图中使用索引进行迭代并不容易，我想出了以下方法，但它不起作用。

```
 var i = 0
    var j = 0
    val mapSize = sortedMap.size/3
    for((key,value) <- sortedMap) {
        j+=1
        if((i < 3) && (key.split(' ').take(1).mkString==value)&&(j>mapSize)){
            Accuracy += 1
            i += 1
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T03:23:27.537

您可以使用该方法`slice(from: Int, until: Int)`，然后只迭代排序地图的中间三分之一。就像是

```
val mapSize = sortedMap.size
for ((key, value) <- sortedMap.slice(mapSize/3, 2*mapSize/3)) {
  ...
} 
```

请注意，这仅在对基础地图进行排序时才可靠（在您的示例中似乎就是这种情况）。您可能还需要稍微调整索引计算，具体取决于您认为大小不能被 3 整除的地图的中间三分之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T03:22:55.783

您可以将地图转换为流，修改流以删除前三分之一和后三分之一，然后遍历剩余的中间三分之一。

```
val middle = sortedMap.toStream.drop(sortedMap.size / 3).dropRight(sortedMap.size / 3)
middle.foreach(println _) // replace println with your key test 
```

对于关键测试，您可以使用模式匹配

```
case key if key.split(' ')(0) == value => ...do something... 
```

# php - dompdf 错误无法解决这个问题

> ID：15582836
> 
> 赞同：2
> 
> 时间：2013-03-23T02:53:36.090
> 
> 标签：php, html, dompdf

我收到此错误：

可捕获的致命错误：传递给 DOMNode::appendChild() 的参数 1 必须是 DOMNode 的实例，给定 null，在第 304 行的 /home/emscompl/public_html/pdf_email/dompdf/include/table_frame_decorator.cls.php 中调用并在/home/emscompl/public_html/pdf_email/dompdf/include/frame.cls.php 在第 726 行

这是dompdf代码。

```
<?php

/*$dir = dirname(__FILE__);
 require_once($dir.'/dompdf/dompdf_config.inc.php');

  $dompdf = new DOMPDF();

  $dompdf->load_html_file("http://ems-complete.com/pdf_email/patient-report.php");

    $dompdf->render(); 

    $dompdf->stream("file.pdf");*/

    $course = $_REQUEST['course'];

    $dir = dirname(__FILE__);

 require_once($dir.'/dompdf/dompdf_config.inc.php');
  $dompdf = new DOMPDF();

   $dompdf->load_html(file_get_contents("http://ems-complete.com/courseroster/courseroster.php?course=".$course));      

  $dompdf->render();
 // $dompdf->set_paper(2412, 3222);
  $dompdf->stream("courseroster.pdf");

 // exit(0);

?> 
```

这是PHP HTML

```
<html>
<head>
<link type="text/css" media="screen" rel="stylesheet" href="stylesheets/courseroster.css" />

<link type="text/css" media="print" rel="stylesheet" href="stylesheets/print.css" />
</head>

<body>
<SCRIPT LANGUAGE="JavaScript"> 
function PrintDivData(crtlid)
 {
 var ctrlcontent = document.getElementById(crtlid);
 var printscreen = window.open('','','left=1,top=1,width=1,height=1,toolbar=0,scrollbars=0,status=0​');
 printscreen.document.write(ctrlcontent.innerHTML);
 printscreen.document.close();
 printscreen.focus();
 printscreen.print();
 printscreen.close();
 }
</script>

<input type="button" name="Print" value="Print" onClick="javascript:PrintDivData('container');" Runat="Server" />
<?php
 $course = $_REQUEST['course'];?>
<?php 
        $connect = mysql_connect('localhost','db','pass') or die(mysql_error());

        $selectdb = mysql_select_db('emscompl_joom1283',$connect);
        ?>
<?php   
$qry = "SELECT * FROM courses 
WHERE id = $course";
        $result = mysql_query($qry);
        $row = mysql_fetch_array($result);

$qry2 = "SELECT s.fullname, cs.* FROM registered_users AS `s`
LEFT OUTER JOIN course_students AS cs ON s.userid = cs.userid
WHERE cs.courseid = $course
ORDER BY s.fullname";
        $result2 = mysql_query($qry2);

     echo "<a href=http://www.ems-complete.com/pdf_email/form_courseroster.php?course=".
     $course.">Display PDF</a>";?>
<div class="container" id ="container">
  <div class="header"><?php echo $row['coursename'];?> Roster</div>
  <div class="coursestatus"><p>Course Status</p>
    <p><?php echo $row['status'];?></p>
  </div>
  <div class="startdate"><p>Start Date</p>
    <p><?php echo $row['startdate'];?></p>
  </div>
  <div class="enddate"><p>End Date</p>
    <p><?php echo $row['enddate'];?></p>
  </div>
  <div class="dayofweek"><p>Class Held on:</p>
    <p><?php echo $row['dayofweek'];?></p>
  </div>
  <div class="leadinstructor"><p>Lead Instructor</p>
    <p><?php echo $row['leadinstructor'];?></p>
  </div>
  <div class="assistantinstructor"><p>Assistant Instructors</p></div>
  <div class="enrolledstudents">
    <p>Enrolled Sutdents</p>
    <table width="760" border="0">
      <tr>
        <th width="223">Student Name</th>
        <th width="102">Phone</th>
        <th width="90">Email</th>
        <th width="100">Status</th>
        <th width="220">Document Report</th>
      </tr>
      <tr>
      <?php while ($row2 = mysql_fetch_array($result2)) { ?>
        <td><?php echo $row2['fullname'];?></td>
        <td><?php echo $row2[''];?></td>
        <td><?php echo $row2[''];?></td>
        <td><?php if ($row2['studentstatus']== 0 ){
        echo "Interested";
        }
        else if ($row2['studentstatus']== 1 ){
        echo "Entrance Process";
        }
        else if ($row2['studentstatus']== 2 ){
        echo "Incomplete Entrance Process";
        }
        else if ($row2['studentstatus']== 3 ){
        echo "Enrolled";
        }
        else if ($row2['studentstatus']== 4 ){
        echo "Course Completed";
        }
        else if ($row2['studentstatus']== 5 ){
        echo "NREMT Skills Complete";
        }
        else if ($row2['studentstatus']== 6 ){
        echo "NREMT Cognitive Complete";
        }
        else if ($row2['studentstatus']== 7 ){
        echo "State Certified";
        }?></td>
        <td><?php echo "<a href=http://www.ems-complete.com/courseroster/studentdocuments.php?id=".$row2['id'].">Document Report</a>"
        ;?>
        </td>
      </tr>
      <?php } ?>
    </table>
    <p>&nbsp;</p>
  </div>
  <div class="footer">
    <p>&nbsp;</p>
  </div>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T04:05:54.840

在您的 HTML 生成脚本中，您`TR`在 while 循环外有一个开口，看起来它应该在循环内（结束标记在循环内）。这将导致无效的文档结构，显然是 dompdf 无法解析的。

仅供参考，如果 dompdf 不解析文档，首先要做的是通过验证器运行它。

# matlab - 从残差结果中获取符号表达式

> ID：15582837
> 
> 赞同：0
> 
> 时间：2013-03-23T02:53:44.193
> 
> 标签：matlab

使用残差函数，我得到了一些向量变量的结果：

[r,p,k] = 残差(b,a)

有没有办法从返回结果构建一个符号表达式（在我选择的变量上，例如'x'），比如：

```
eq = residue2sym(r,p,k)
pretty(eq) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T04:30:37.247

最后我自己实现了：

```
function eq = residue2sym( R,P,K )

syms s

eq = 0;

lastR = NaN;
lastP = NaN;
multiplicityCounter = 1;
for i = 1:length(R)
    rc = R(i);
    pc = P(i);

    if(~isnan(lastP) )
        if(pc == lastP && abs(lastR) < 1e-15)   % Quando existe multiplicidade, o R correspondente ao primeiro P
                                                % da multiplicidade deveria
                                                % ser 0, mas estranhamente
                                                % aparece como -4.4409e-16.
                                                % O que deveria ser uma
                                                % comparação com 0 então
                                                % vira uma comparação para
                                                % um módulo bem pequeno
            multiplicityCounter = multiplicityCounter + 1;
        else
            eq = eq + lastR/(s - lastP)^multiplicityCounter;
            multiplicityCounter = 1;
        end
    end
    lastR = rc;
    lastP = pc;
end
if(~isnan(lastP))
    eq = eq + lastR/(s - lastP)^multiplicityCounter;
end

 if(~isempty(K))
     eq = eq + sum(s.^(0:length(K)));
 end

eq = vpa( eq, 2);

end 
```

# python - 翻译字符串时遇到问题

> ID：15582842
> 
> 赞同：0
> 
> 时间：2013-03-23T02:55:59.167
> 
> 标签：python, python-3.x

我决定在春假期间开始一个项目，从网络漫画中提取角色并翻译文本，就好像那个角色在说它一样。我已经设法让它适用于一个角色，但有一个小问题。

```
def meulin():
    replace = {'EE':'33', 'ee':'33'}
    originalText = input('Input text -> ')
    while True:
        for i, j in replace.items():
            if i in originalText:
                newText = originalText.replace(i,j)
                print(newText.upper())
            else:
                print(originalText.upper())
        originalText = input('Input text (type "quit" to end program.) -> ')
        if originalText in ('quit', 'end', 'exit', 'stop', 'q'):
            sys.exit('Program ended.') 
```

当我运行 PyScripter 的调试器时，它告诉我，在获得输入后，程序从该`for i, j in replace.items():`行开始，完全跳过 if 语句并转到 else 语句，然后转到 if 语句。所以不仅仅是发布

> CH33SE

它会发布

> 起司
> 
> > CH33SE

我可以完全删除 else 语句，但它根本不会发布原始文本。任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T03:08:24.073

```
for i, j in replace.items():
    if i in originalText:
        newText = originalText.replace(i,j)
        print(newText.upper())
        break
else:
    print(originalText.upper()) 
```

该`break`语句意味着循环将在第一次替换后停止。Python 允许在循环中使用子句，该`else`子句`for`仅在循环未被`break`语句停止时才会执行。

您看到输出两次的原因是因为您的字典中有两个项目。我认为您仅在没有替换匹配时才希望打印原始文本。

# php - 使用 phpseclib 通过 PHP 创建 SSH 屏幕

> ID：15582850
> 
> 赞同：0
> 
> 时间：2013-03-23T02:58:00.943
> 
> 标签：php, ssh, gnu-screen, phpseclib

我有一个 PHP 脚本，我试图在我的 ssh 服务器上使用 PHP SSH 库 phpseclib 创建一个屏幕。这是我用来尝试创建屏幕的功能：

```
 function startscreen($ssh, $user)
 {
      $ssh->exec("screen -S ".$user);
 } 
```

这就是我调用函数的方式：

```
startscreen($ssh, $user); 
```

我知道我可以通过这种方式创建屏幕，但它不能使用 php 远程工作。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:01:11.750

我对屏幕一点也不熟悉，但是......在维基百科上阅读它让我想知道通过 exec() 来做这件事是否有意义。就像做 exec('vim') 并没有什么意义，因为 vim 期望在那之后用户输入，而 exec() 并没有真正提供一种机制来提供用户输入。

也许[read() / write()](http://phpseclib.sourceforge.net/ssh/examples.html#interactive)命令更适合你？也许您需要执行 nohup 和 & 将其发送到后台？

# c++ - uint64 没有命名类型

> ID：15582851
> 
> 赞同：-1
> 
> 时间：2013-03-23T02:58:16.787
> 
> 标签：c++

每次我尝试使用 uint64 执行时，编译器都会显示此消息“uint64 未命名类型”，对于 uint 或 unit32 也是如此，我已导入 stdint.h 但没用。另一个问题是，当我使用 int 执行时，变量 z 的值会有所不同，每次后续执行时都会得到较小的值，例如 -160000 然后 -140000 等等。如何解决？这是代码

```
#include <Windows.h>
#include <ctime>
#include <stdint.h>
#include <iostream>
using std::cout;
using std::endl;
#include <fstream>
using std::ifstream;

#include <cstring>

/* Returns the amount of milliseconds elapsed since the UNIX epoch. Works on both
 * windows and linux. */

uint64 GetTimeMs64()
{
    FILETIME ft;
    LARGE_INTEGER li;

    /* Get the amount of 100 nano seconds intervals elapsed since January 1, 1601 (UTC) and copy it
     * to a LARGE_INTEGER structure. */
    GetSystemTimeAsFileTime(&ft);
    li.LowPart = ft.dwLowDateTime;
    li.HighPart = ft.dwHighDateTime;

    uint64 ret;
    ret = li.QuadPart;
    ret -= 116444736000000000LL; /* Convert from file time to UNIX epoch time. */
    ret /= 10000; /* From 100 nano seconds (10^-7) to 1 millisecond (10^-3) intervals */

    return ret;
}

const int MAX_CHARS_PER_LINE = 512;
const int MAX_TOKENS_PER_LINE = 20;
const char* const DELIMITER = "|";

int main()
{
    // create a file-reading object
    ifstream fin;
    fin.open("promotion.txt"); // open a file
    if (!fin.good()) 
        return 1; // exit if file not found

    // read each line of the file
    while (!fin.eof())
    {
        // read an entire line into memory
        char buf[MAX_CHARS_PER_LINE];
        fin.getline(buf, MAX_CHARS_PER_LINE);

        // parse the line into blank-delimited tokens
        int n = 0; // a for-loop index

        // array to store memory addresses of the tokens in buf
        const char* token[MAX_TOKENS_PER_LINE] = {}; // initialize to 0

        // parse the line
        token[0] = strtok(buf, DELIMITER); // first token
        if (token[0]) // zero if line is blank
        {
            for (n = 1; n < MAX_TOKENS_PER_LINE; n++)
            {
                token[n] = strtok(0, DELIMITER); // subsequent tokens
                if (!token[n]) break; // no more tokens
            }
        }

        // process (print) the tokens
        for (int i = 0; i < n; i++) // n = #of tokens
            cout << "Token[" << i << "] = " << token[i] << endl;
        cout << endl;
    }
    uint64 z = GetTimeMs64();
    cout << z << endl;
    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T03:01:42.460

该类型被命名为`uint64_t`。`uint32_t`, `uint16_t`,`uint8_t`等也一样。

`uint`不存在。您可能只是打算这样做`unsigned int`。

# jquery - 具有相同图像的两个翻转

> ID：15582857
> 
> 赞同：0
> 
> 时间：2013-03-23T02:59:14.920
> 
> 标签：jquery, html

我有一个 div，里面有两个图像（它们是：“A”和“B”）。A 和 B 垂直并排放置，就像将两本书边对边放置一样。我的目的是为 A 和 B 创建一个翻转效果。当鼠标悬停在 A 上时，图像“C”出现在 A 和 B 之上。当鼠标悬停在 B 上时，图像“C”出现在顶部A＆B ...（相同的东西）图像“C”将出现在“A”或“B”上，并完全替换“A”+“B”重叠它们。

*   这是问题所在：当前，当触发“A”或“B”翻转时，“C”出现要么将“A”推到顶部，要么将“B”推到底部 - 拉伸 div。

对不起，如果这听起来很复杂，对外面的人来说真的很简单。谢谢你。

# c - 链表值被更改

> ID：15582858
> 
> 赞同：0
> 
> 时间：2013-03-23T03:00:01.477
> 
> 标签：c, linked-list, singly-linked-list

相关代码：

恒定定义：

```
#define MAX_NAME_LEN 15 /* Maximum length of any attribute or relation is 15\. */ 
```

结构定义：

```
typedef struct schnode {
char name[MAX_NAME_LEN + 1]; /* The name of the attribute. */
char type; /* The type of the attribute ('S' or 'I'). */
int len; /* The length of the attribute. */
struct schnode *next; /* A pointer to the next node. */
} SCHNODE; 
```

变量定义：

```
FILE *schemafile; /* A text file. */
SCHNODE *head = NULL; /* Head of the linked list. */
SCHNODE *ptrnode = NULL; /* A variable node in the linked list. */
SCHNODE *p = NULL; /* A variable node in the linked list. */
SCHNODE *tail = NULL; /* Tail of the linked list. */
char *attr_name; /* Holds the name of the current attribute. */
char *attr_type; /* Holds the current attribute type (S or I). */
int attr_len; /* Holds the current attribute length. */
int attr_loc = 0; /* Attribute location in respect to the tuple. */
int i; /* Index for loops. */
char attr_match = 0; /* 1 if the attribute is valid, 0 otherwise. */ 
```

恒定定义：

```
#define BUFFER_START_SIZE 20
#define BUFFER_INC_SIZE 10 
```

下一行功能：

```
char* NextLine (FILE *f) {
int size = BUFFER_START_SIZE;
char *buf; //buffer storing current line as a char array
int i = 0; //index for array
int c; //a character

if (f == NULL){ //check if the file pointer is NULL
    printf("Unable to find the file.\n"); fflush(stdout);
    return NULL; //nothing to read, so return NULL
}

if((c = getc(f)) == EOF) //check if the first 'char' in the line is EOF
    return NULL; //if so, line is empty, so return NULL

if((buf = (char *) malloc(size)) == NULL){ //make room for the buffer
    printf("Failed to create buffer.\n"); fflush(stdout); }

buf[0] = (char) c; //put the first char into the buffer string
i = 1; //and increment the index

while(1){
    while(i < size){ //loop through the buffer char array
        if((c = getc(f)) == '\n'){ //if end of line
            buf[i] = '\0'; //instead put '\0' to terminate string
            return buf; //and return the completed string
        }
        buf[i] = (char) c; //otherwise, just keep copying the characters
        i++; //increment the index
    }

    //IF REACHED THIS POINT, LINE IS TOO LONG TO FIT IN BUFFER -> REALLOC
    size += BUFFER_INC_SIZE;
    if((buf = (char*) realloc(buf,size)) == NULL){ //make buffer bigger
        printf("Unable to realloc memory.\n"); fflush(stdout); }
    //loop and continue adding chars from where you left off
}
} 
```

执行代码：

```
for (i = 0; i < num_attr; i++) {
    if ((i > 0) && !attr_match) attr_loc += attr_len;
    attr_name = NextLine(schemafile);
    attr_name = strtok(attr_name, " \t\n");
    attr_type = strtok(NULL, " \t\n");
    attr_len =  atoi(strtok(NULL, " \t\n"));

    /* Construct linked list of schema file data. */
    /* If empty: */
    if (head == NULL) {
        if ((head = (SCHNODE*) malloc(sizeof(SCHNODE))) == NULL) {
            fprintf(stderr, "Unable to Malloc space.\n");
            return;
        }
        strcpy(head->name, attr_name);
        head->type = attr_type[0];
        head->len = attr_len;
        head->next = NULL;
    }

    /* If the list already has a head defined: */
    else {
        /* Start from the head if tail is NULL (only 1 element) otherwise start from tail. */
        if(tail == NULL) ptrnode = head;
        else ptrnode = tail;
        /* Malloc space for the tail node. */
        if ((tail = (SCHNODE*) malloc(sizeof(SCHNODE))) == NULL) {
            fprintf(stderr, "Unable to Malloc space.\n");
            return;
        }
        strcpy(tail->name, attr_name);
        tail->type = attr_type[0];
        tail->len = attr_len;
        tail->next = NULL;
        /* Insert tail node at the end. */
        ptrnode->next = tail;
        if (strcmp(tail->name, "Instr") == 0)
            p = tail;
        if (p != NULL) printf("%d: %s\n", i, p->name);
    } 
```

输入：

```
CName  S  25
CId    S  8
Instr  S  10
Credits I  4 
```

输出：

```
2: Instr
3: Insur 
```

没有其他值被改变（据我所知）。有人可以解释为什么这个特定的值总是被改变吗？（Instr -> 保险）。我只希望我阅读的条目（Instr）在整个阅读过程中保持不变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T03:52:09.410

在您的程序中，`name`数据结构的字段定义为`pointer`. 因此，当`strcpy`您`pointer`. 因此，要么为每个节点留`malloc`一个空间，要么定义为一个元素数组。`name``name``n`

# php - 使用 php-class-html-generator 生成代码

> ID：15582859
> 
> 赞同：4
> 
> 时间：2013-03-23T03:00:13.160
> 
> 标签：php, html

我正在尝试使用[php-class-html-generator](https://code.google.com/p/php-class-html-generator/)重现以下标记，但我坚持`<i>`在最后插入和设置文本，就在之前`</h4>`

原始 HTML

```
<h4 class="formTitle lead">
    <span class="widget-number"><i class="icon-comments"></i></span>Random
</h4> 
```

我的代码：

```
$h4 = HTMLTag::createElement('h4')->setText("Random")
    ->addClass('formTitle')
    ->addClass('lead');
$h4->addElement('span')
    ->addClass('widget-number');
return($h4); 
```

我目前的输出：

```
<h4 class="formTitle lead">
     <span class="widget-number">Random</span>
</h4> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T03:23:33.243

尝试这个-

```
$h4 = HTMLTag::createElement('h4')->setText("Random")->addClass('formTitle')->addClass('lead');

$span = $h4->addElement('span')->addClass('widget-number');

$i = $span->addElement('i')->setText(' ')->addClass('icon-comments'); 
```

**结果**——

```
 <h4 class="formTitle lead">
<span class="widget-number">
<i class="icon-comments"></i></span>Random</h4> 
```

# mysql - SQL 比较日期

> ID：15582862
> 
> 赞同：1
> 
> 时间：2013-03-23T03:01:39.723
> 
> 标签：mysql, sql

大家好，我正在尝试将本地日期与我的查询之一进行比较，问题是我不知道该怎么做。

据我所知，如果我们运行这个

```
SELECT NOW() 
```

它会输出这样的东西`2013-03-23 06:56:55`

现在我想更新一个比较该信息的行，但我不知道如何，我的想法是这样的

```
UPDATE `account`.`account` SET `Level` = '1' 
WHERE `Level` = '2' AND Select NOW() >`last_online` 
```

我要防止的是我正在更新帐户并且用户在线，所以我想将上次在线时间与当前日期进行比较，然后如果当前日期大于上次在线时间，则运行查询

谢谢！

编辑：服务器是mysql

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T03:04:22.827

尝试删除第二个 SELECT

```
 UPDATE `account`.`account` 
  SET `Level` = '1' 
  WHERE `Level` = '2' AND NOW() > `last_online` 
```

# c++ - int 到 unsigned int 的无效转换

> ID：15582865
> 
> 赞同：0
> 
> 时间：2013-03-23T03:01:49.060
> 
> 标签：c++, montecarlo, pi

此代码用于分配。但是，在计算 pi monte carlo 函数中存在错误。错误统计从 int 到 unsigned int 的转换无效。我不确定这是否是有意的，但我无法纠正这个问题。如果您想知道，此函数是线程示例的一部分。任何建议都非常感谢

```
void *compute_pi( void *s )   
{
int seed;
int ii;
int *hit_pointer;
int local_hits;
double rand_no_x;
double rand_no_y;

hit_pointer = (int *) s;
seed = *hit_pointer;
local_hits = 0;

for( ii=0; ii < sample_points_per_thread; ii++ )
{
  rand_no_x = (double) (rand_r( &seed ))/(double)RAND_MAX;//*error is these lines
  rand_no_y = (double) (rand_r( &seed ))/(double)RAND_MAX;//*error is these lines
  if(((rand_no_x - 0.5) * (rand_no_x - 0.5) +
  (rand_no_y - 0.5) * (rand_no_y - 0.5)) < 0.25)//*error 
local_hits++;
  seed *= ii;
 }

*hit_pointer = local_hits;
 pthread_exit(0); 
 } 
```

我做了一些调试，现在看看错误可能在哪里。生病发布现在调用计算 pi 的主要功能。我相信这是将参数解析为样本点和线程数的地方。当我运行程序时，它会要求输入，然后它会因分段错误而失败。有什么建议么？

```
 #include <pthread.h>
  #include <stdlib.h>
  #include <stdio.h>

  #define MAX_THREADS 512

  void *compute_pi( void * );

  int sample_points;
  int total_hits;
  int total_misses;
  int hits[ MAX_THREADS ];
  int sample_points_per_thread;
  int num_threads;

  int main( int argc, char *argv[] )
  {
  /* local variables */
  int ii;
  int retval;
  pthread_t p_threads[MAX_THREADS];
  pthread_attr_t attr;
  double computed_pi;

  /* initialize local variables */
  retval = 0;

  pthread_attr_init( &attr );
  pthread_attr_setscope( &attr, PTHREAD_SCOPE_SYSTEM );

  printf( "Enter number of sample points: " );
  scanf( "%d", &sample_points );
  printf( "Enter number of threads: " );
  scanf( "%d%", &num_threads );

  /* parse command line arguments into sample points and number of threads */
  /* there is no error checking here!!!!! */
  sample_points = atoi(argv[1]);
  num_threads = atoi(argv[2]);

  total_hits = 0;
  sample_points_per_thread = sample_points / num_threads;

  for( ii=0; ii<num_threads; ii++ )
  {
  hits[ii] = ii;
  pthread_create( &p_threads[ ii ], &attr, compute_pi, (void *) &hits[ii] );
  }

  for( ii=0; ii<num_threads; ii++ )
  {
   pthread_join( p_threads[ ii ], NULL );
   total_hits += hits[ ii ];
    }

   computed_pi = 4.0 * (double) total_hits / ((double) (sample_points));

   printf( "Computed PI = %lf\n", computed_pi );

   /* return to calling environment */
   return( retval );
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T03:05:41.693

从[`rand_r(3)`手册页](http://www.manpagez.com/man/3/rand_r/osx-10.4.php)：

```
int
rand_r(unsigned *ctx); 
```

正如您所看到的，它需要一个`unsigned`指针 - 如果您将它传递给`int`并且您在编译器中打开了相应的警告/错误（而且您似乎这样做了），您将收到该错误。更改类型，`seed`您将被设置。

# android - 两次调用计时器使我的应用程序崩溃：Android

> ID：15582868
> 
> 赞同：0
> 
> 时间：2013-03-23T03:02:07.680
> 
> 标签：android

我正在尝试开发一个小型 android 应用程序。在该应用程序中，我需要使用 Timer 控件，该控件将在单击按钮时触发。我遇到的问题是，第一个计时器任务调用工作正常，但是当我再次调用它时，我的应用程序崩溃了。用于计时器任务的代码是：

```
Timer timer = new Timer();
TimerTask refreshRam;
final Handler handler = new Handler();
refreshRam = new TimerTask() 
    {
        public void run() 
        {
            handler.post(new Runnable() 
            {
                public void run() 
                {
                    txtFreeRam.setText(String.valueOf(getFreeRam()).toString());
                }
            });
        }}; 

    }

timer.schedule(refreshRam, 400); 
```

我只想在单击按钮时调用我的计时器任务。不应该重复...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T03:15:18.043

使用 timer.scheduleatfixedrate 而不是 schedule

timer.scheduleAtFixedRate(refreshRam,400, 5000);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-04T13:29:20.070

当您重新安排计时器时，它会抛出：

```
java.lang.IllegalStateException: TimerTask is scheduled already 
```

似乎您只能使用一次计时器。

为了重新调度 Timer，您只需每次都创建它的一个新实例。如下所示：

```
.
.
.

//first time; works fine!
timer = new Timer();
refreshRam = new TimerTask() { ... }
timer.schedule(refreshRam, 400);

//second time; also works fine!
//be sure to terminate the timer task that is running by calling timer.cancel()
timer.cancel();
timer = new Timer();
refreshRam = new TimerTask() { ... }
timer.schedule(refreshRam, 400); 
```

# ruby-on-rails - 使用来自另一个控制器的布局

> ID：15582871
> 
> 赞同：0
> 
> 时间：2013-03-23T03:03:00.497
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个有很多关联的模型。在这个控制器的布局中，我有几个子菜单，我想在其中显示来自这些关联的对象。但是我怎样才能在这些对象中使​​用这个布局呢？-ie 这些控制器中的其他对象不可见，因此我不断收到错误消息“您有一个 nil 对象......”如何使用关联对象内部的布局/保留内部其他实例变量的值那些对象，以便我可以在所有子菜单中使用相同的布局？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T03:11:24.440

我认为每个 Controller 方法不能使用多个布局。render 方法确实有一个 :layout 参数，因此您可以指定一个默认值以外的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T03:17:25.800

步骤 1\. 将您想要共享的布局位提取到部分中。把它放在视图/应用程序或视图/布局中

步骤 2\. 确保在第二个控制器中设置了额外的实例变量 - 去查看第一个控制器中发生了什么来设置它们并复制它。

步骤 3\. 在新页面的模板中包含新的部分。

一切都应该很好地工作:-)

# ios - 谷歌浏览器的自定义后退按钮

> ID：15582873
> 
> 赞同：1
> 
> 时间：2013-03-23T03:03:36.793
> 
> 标签：ios, objective-c, google-chrome

我在最新的 iPhone Gmail 应用程序中注意到，如果我点击一个链接（并且如果我安装了 Google Chrome iPhone 应用程序），它会打开 Google Chrome，并更改 Chrome 中的后退按钮以显示它返回到“Gmail "

![谷歌浏览器后退按钮](../Images/b75995560e3476726c0320b8b59d036a.png)

我想知道是否有人设法找到一种方法来让它与他们自己的应用程序一起使用，或者它是否是一个私有的谷歌 API？

我已经尝试过谷歌的 OpenInChromeController ( [https://developers.google.com/chrome/mobile/docs/ios-links](https://developers.google.com/chrome/mobile/docs/ios-links) ) 虽然它似乎只提供了打开 Chrome 的辅助方法，而不是更改后退按钮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T04:35:59.063

Google Chrome 使用 x-callback-url 方案来创建这种类型的行为。一个例子是这样的：

```
googlechrome-x-callback://x-callback-url/open/?x-source=MyApp&x-success=com.myapp.callback%3A%2F%2F&url=http%3A%2F%2Fwww.google.com 
```

您可以对其进行自定义，使其对成功或失败有不同的响应，并定义 Chrome 是否会在新选项卡中打开链接。您链接到的文档下方有更多可用信息。

# c# - 在 .Net 中从 Internet 下载文件的最快方法是什么？

> ID：15582876
> 
> 赞同：-4
> 
> 时间：2013-03-23T03:03:46.510
> 
> 标签：c#, .net, vb.net

我正在编写一个需要从 Internet 下载多个页面的应用程序。页面本身并不大，但是需要很长时间。我目前正在使用 WebClient.DownloadDataAsync。我曾尝试在 NetBalancer 中为应用程序赋予高优先级，但无济于事。在.Net中不使用外部库从互联网下载文件的最快方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T03:25:47.340

尝试同步运行。

```
void Main()
{
    var remotefile = "http://cdn.sstatic.net/stackexchange/img/logos/so/so-logo.png";
    var localfile = @"c:\temp\logo.png";
    using(WebClient wc = new WebClient())
        wc.DownloadFile(remotefile,localfile);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T03:32:54.457

问题不是最快的方法是什么。每页 5 分钟没有下载任何内容（除非页面非常大或连接非常慢）。您需要确定导致“缓慢”的代码部分。

也许一个简单的计时器会有所帮助：

```
Dim viStart As Long = Now.Ticks
'...
'...
'...
Dim viEnd As Long = Now.Ticks - viStart 
```

将它们放在代码的不同部分，看看哪个会减慢整个过程的速度。然后在这里发布您的问题。

# java - UDP Java 数据报

> ID：15582877
> 
> 赞同：0
> 
> 时间：2013-03-23T03:03:49.810
> 
> 标签：java, sockets, udp

使用 Java 编写基于 UDP 的客户端/服务器。

当服务器不断从套接字获取数据包时：

```
socket.receive(packet); 
```

即使客户端发送多个数据包，例如数据包 1、2、3 和 4，客户端也只能获取数据包 4。重新发送所有这些数据包或以相反的 4,3 顺序发送它们没有区别， 2和1。客户端只能获取序列号较大的数据包，这有点神奇。但我真正想要的是得到所有 4 个数据包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:28:29.300

您对所有发送的 DatagramPackets 使用相同的底层 byte[] 数组“dataBuf”，因此它们在重新发送期间不会保持不同。

# php - 带有 LEFT JOIN 和 ORDER BY 的 PDO

> ID：15582882
> 
> 赞同：2
> 
> 时间：2013-03-23T03:04:34.220
> 
> 标签：php, mysql, pdo

我有这个代码

```
$query_search = $this->db->prepare("SELECT* FROM table1 LEFT JOIN table2 ON (table1.id=table2.id) WHERE table1.nome LIKE ?  ORDER BY ? DESC");
if($query_search->execute(array($cliente_procura."%",'table2.'.$ordem)))
{
   //code
} 
```

但是我对这个`ORDER BY`条款有一些问题。如何使用 PDO 并确保我的表格按我想要的顺序排列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T03:18:29.410

使用准备好的语句无法绑定列名。

您需要使用古老的方法将它们绑定在这样的字符串中：

```
$query_search = $this->db->prepare(" SELECT * 
        FROM table1 
        LEFT JOIN table2 
            ON (table1.id=table2.id) 
        WHERE table1.nome 
        LIKE ?  
        ORDER BY table2." . $ordem . " DESC");
if( $query_search->execute( array($cliente_procura."%") ) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T03:23:59.870

来自 Stackoverflow`PDO`标签维基 - [https://stackoverflow.com/tags/pdo/info](https://stackoverflow.com/tags/pdo/info)

> **PDO 准备好的语句和标识符。**
> 
> PDO 没有标识符的占位符，因此开发人员必须手动格式化它们。要正确格式化标识符，请遵循以下两条规则：
> 
> *将标识符括在反引号中。
> *通过将它们加倍来逃避内部的反引号。

请参阅 - [PHP PDO 语句可以接受表名或列名作为参数吗？](https://stackoverflow.com/questions/182287/can-php-pdo-statements-accept-the-table-name-as-parameter)
或者 -[哪些标记可以在 PDO 准备语句中参数化？](https://stackoverflow.com/questions/1622521/which-tokens-can-be-parameterized-in-pdo-prepared-statements)

另请参阅 php 手册中的此评论/示例 - [http://us3.php.net/manual/en/book.pdo.php#69304](http://us3.php.net/manual/en/book.pdo.php#69304)

# jquery - jquery 1.7.1 无法通过类和 id 的交集选择跨度

> ID：15582884
> 
> 赞同：0
> 
> 时间：2013-03-23T03:05:34.347
> 
> 标签：jquery

我正在尝试按类和 id 选择向下投票箭头。所以看来我可以选择第一次尝试： $("span#"+obj_id+".voteup").removeClass('voteup').addClass('votedup');

但我无法选择第二次尝试： $("span#"+obj_id+".votedown").removeClass('votedown').addClass('votedown2');

代码粘贴在下面：

jQuery

```
 $(function(){
        $("body").on("click","span.voteup", 
            function(){
                obj_id = $(this).attr('id');
                var theint = parseInt($("span#votesum"+obj_id).html());
                theint++;     
                $("a#vu"+obj_id).html('☺');
                $("a#vd"+obj_id).html('⬇');
                $("span#"+obj_id+".voteup").removeClass('voteup').addClass('votedup');
                $("span#"+obj_id+".votedown").removeClass('votedown').addClass('votedown2');   
                $("span#votesum"+obj_id).html(theint);                                               
                $.post(
                    '/vote/',
                    {'obj_id': obj_id, 'vote': 1}
                );              
            }
        );
    }); 
```

html

```
 <span class="no_decoration">
                                {% if object.voted == 1 %}
                                    <span class="votedup" id= "{{object.obj_id}}">
                                        <a href='javascript:;' class='voteup' id="vu{{object.obj_id}}">☺&lt;/a>
                                    </span>
                                {% elif object.voted == -1 %}
                                    <span class="voteup2" id= "{{object.obj_id}}">
                                        <a href='javascript:;' class='voteup' id="vu{{object.obj_id}}">⬆&lt;/a>
                                    </span>
                                {% else %}
                                    <span class="voteup" id= "{{object.obj_id}}">
                                        <a href='javascript:;' class='voteup' id="vu{{object.obj_id}}">⬆&lt;/a>
                                    </span>
                                {% endif %}
                            </span>
                            <br>
                            <span style="color:black;">
                                &nbsp;<span id="votesum{{object.obj_id}}">{{object.votesum}}</span>
                            </span>
                            <br>
                            <span class="no_decoration">
                                {% if object.voted == -1 %}
                                    <span class="voteddown" id= "{{object.obj_id}}">
                                        <a href='javascript:;' class='votedown' id="vd{{object.obj_id}}">☹&lt;/a>
                                    </span>
                                {% elif object.voted == 1 %}
                                    <span class="votedown2" id= "{{object.obj_id}}">
                                        <a href='javascript:;' class='votedown' id="vd{{object.obj_id}}">⬇&lt;/a>
                                    </span>
                                {% else %}
                                  <span class="votedown" id= "{{object.obj_id}}">
                                    <a href='javascript:;' class='votedown' id="vd{{object.obj_id}}">⬇&lt;/a>
                                  </span>   
                                {% endif %} 
                            </span>
                        </span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T03:11:31.743

一个 ID 只能在一个页面上使用一次。jQuery 可能总是找到 ID 的第一个实例，这就是为什么第二次尝试（添加 votedown 类）没有找到任何东西的原因。

# oracle10g - 如何将表从一个模式备份到另一个模式

> ID：15582888
> 
> 赞同：0
> 
> 时间：2013-03-23T03:05:58.243
> 
> 标签：oracle10g

场景：我想将一个模式表备份到同一数据库中的另一个模式。

现有设计：删除备份表上的索引并截断数据，最后将数据加载到备份表中（Usign插入查询）。

要求：现有设计需要更多时间来处理。请建议我有没有其他方法可以实现这一目标......

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T09:26:29.743

如果您有大量数据，并且您已经在做“显而易见”的事情以使其快速运行（直接路径插入，主要是并行，`nologging`如果您负担得起的话），您可能无能为力坚持使用 SQL。

您可以尝试的一件事是使用带有`remap_schema`选项的数据泵模式导出/导入。该过程将是：

*   导出源模式`expdp`（在[SCHEMAS](http://docs.oracle.com/cd/B19306_01/server.102/b14215/dp_import.htm#i1007024)模式下）
*   删除目标架构并重新创建它（空）
*   `impdp`使用和`remap_schema=source:target`选项导入转储（请参阅 参考资料[`REMAP_SCHEMA`](http://docs.oracle.com/cd/B19306_01/server.102/b14215/dp_import.htm#sthref339)）。

您可以跳过第二步并`table_exists_action=replace`在导入期间使用 - 可能会更快，如果目标架构有其他对象，肯定会更好（请参阅[`TABLE_EXISTS_ACTION`](http://docs.oracle.com/cd/B19306_01/server.102/b14215/dp_import.htm#sthref364).）

如果您想留在“数据库中”以自动执行此操作，则有一个用于数据泵的 API [`DBMS_DATAPUMP`](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_datpmp.htm)：.

# extjs - Ext JS 4.2 中的分页内存代理等效技术是什么

> ID：15582892
> 
> 赞同：4
> 
> 时间：2013-03-23T03:06:05.823
> 
> 标签：extjs, extjs4, store

在 Ext JS 的 3.x 版本中，我有一个带有 json 代理的存储，用于从服务器获取完整的数据集，然后我将该存储用作存储中的读取器，并使用 PagingMemoryProxy 将原始存储作为读取器提供网格面板的分页数据。

json 存储：-

```
var fleetReader = new Ext.data.JsonReader({
      root:'results',
      successProperty:'success',
      totalProperty:'total',
      idProperty:'vid'
    },
    fleetRec
);

var fleetDs = new Ext.data.Store({
  proxy: new Ext.data.ScriptTagProxy({
    url: 'request/getfleet',
    timeout: 10000
  }),
  reader:fleetReader
}); 
```

然后我创建这个商店的分页版本如下：-

```
fleetPagedDs = new Ext.data.Store({
    proxy: new Ext.ux.data.PagingMemoryProxy(fleetDs.reader.jsonData),
    reader: fleetDs.reader,
    remoteSort: true
}); 
```

有人能告诉我如何在 ExtJS 4 中做到这一点吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:02:49.080

您在寻找[Ext.ux.data.PagingMemoryProxy](http://docs.sencha.com/ext-js/4-2/#!/api/Ext.ux.data.PagingMemoryProxy)吗？

来自 Sencha 文档：

> 分页内存代理，允许在内存数据集中使用分页网格。

# c++ - 在集合中查找最近的元素

> ID：15582893
> 
> 赞同：4
> 
> 时间：2013-03-23T03:06:45.650
> 
> 标签：c++, set

假设我有一套，像这样：

```
my_set = {"aaron", "cathy", "john", "stewie", "xavier"}; 
```

假设我想要这样的功能：

```
FindFirst(my_set, "a")      // returns an iterator pointing to "aaron"
FindFirst(my_set, "aaron")  // returns an iterator pointing to "aaron"
FindFirst(my_set, "bill")   // returns an iterator pointing to "cathy"
FindFirst(my_set, "zzzzz")  // returns past-the-end iterator 
```

基本上，它接受一个值并将迭代器返回到该元素或它之后的第一个元素（如果提供的值位于集合的末尾之后，则选择过去的迭代器）。

标准库中是否存在这样的函数，还是我必须自己编写一个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-23T03:07:38.393

[`set::lower_bound`](http://en.cppreference.com/w/cpp/container/set/lower_bound)是您正在寻找的功能。

# java - 导致 JComboBoxes 不被引用的循环

> ID：15582894
> 
> 赞同：0
> 
> 时间：2013-03-23T03:07:18.000
> 
> 标签：java, swing, loops, jcombobox, sudoku

我正在研究解决数独难题的 Java 代码。该逻辑尚未实现，但我遇到了使用循环创建 JComboBoxes 的问题。我的代码编译并运行没有错误，但是它只将右下角的 3x3 窗格转换为 JLabels。我相信这个问题是由下面的循环引起的。

```
for (int boxRow = 0; boxRow<3; boxRow++){
  for(int boxCol = 0; boxCol<3; boxCol++){
    boxes[boxRow][boxCol] = new JPanel();
    boxes[boxRow][boxCol].setLayout(new GridBagLayout());
    for (int row = 0; row < 3; row++){
      for(int col = 0; col < 3; col++){
        comboBox[row][col] = new JComboBox(sudokuChoose);
        constraints.weightx = 1;
        constraints.weighty = 1;
        constraints.gridx = col;
        constraints.gridy = row;
        boxes[boxRow][boxCol].add(comboBox[row][col], constraints);
      }
    }
    constraints.weightx = 1;
    constraints.weighty = 1;
    constraints.gridx = boxRow;
    constraints.gridy = boxCol;
    add(boxes[boxRow][boxCol], constraints);
    boxes[boxRow][boxCol].setVisible(true);
  }
}

    for(int boxRow = 0; boxRow<3; boxRow++){
  for(int boxCol = 0; boxCol<3; boxCol++){
    labelBoxes[boxRow][boxCol] = new JPanel();
    labelBoxes[boxRow][boxCol].setLayout(new GridBagLayout());
    for(int row = 0; row < 3; row++){
      for(int col = 0; col < 3; col++){
        tempComboText = (String)comboBox[row][col].getSelectedItem();
        label[row][col] = new JLabel();
        //System.out.println(comboBox[row][col]);
        //System.out.println((String)comboBox[row][col].getSelectedItem());
        label[row][col].setText(tempComboText);
        constraints.weightx = 1;
        constraints.weighty = 1;
        constraints.gridx = col;
        constraints.gridy = row;
        add(label[row][col], constraints);
        label[row][col].setVisible(true);
      } 
    }
  }
} 
```

第一个创建 9 个 JComboBoxes，它们位于 JPanel 中。有 9 个 JPanel，总共创建了 81 个 JComboBox。但是，在创建框时，每个 JPanel 中每个对应的 JComboBox 的名称都是相同的。因此，前 8 个 JPanel 中没有与 JComboBoxes 关联的名称。在第二个中，我使用第一个中使用的相同循环结构转换 JComboBoxes，但由于前 8 个 JPanel 中的 JComboBoxes 没有名称，因此无法访问它们并且无法从中读取信息。关于我将如何解决这个问题的任何想法？

# javascript - 缺少字符串字符的重复（组合）变体的Javascript

> ID：15582897
> 
> 赞同：1
> 
> 时间：2013-03-23T03:08:01.083
> 
> 标签：javascript, combinatorics, brute-force, cartesian-product, repeat

我的问题类似于尚未回答的[这个问题。](https://stackoverflow.com/questions/14962182/break-up-javascript-for-variations-with-repetition-combinatorics-into-manageab)

**如何使我的代码（或可能建议的任何 javascript 代码？）找到已知字符串长度的所有可能解决方案，其中多个缺失字符随重复而变化？**

我正在尝试获取一个已知字符长度的字符串并从该字符串中找到丢失的字符。例如：

```
var missing_string = "ov!rf!ow"; //where "!" are the missing characters 
```

我希望使用特定数组运行脚本，例如：

```
var r = new Array("A","B","C","D","E","F","G","H","I","J","K",
                  "L","M","N","O","P","Q","R","S","T","U","V",
                  "W","X","Y","Z",0,1,2,3,4,5,6,7,8,9); 
```

要找到所有可能的变化，重复这些缺失的字符以获得以下结果：

```
ovArfAow
ovBrfAow
ovCrfAow
...
ovBrfBow
ovBrfCow
...
etc //ignore the case insensitive, just to emphasize the example 
```

当然，最终在所有重复的变化中找到**ovErfLow 。**

我已经能够使它与 1 个（单个）丢失的字符一起工作。但是，当我在我的代码中添加 2 个缺失字符时，它显然会为这两个缺失字符重复相同的数组字符，这对于重复来说非常有用，但我还需要找到不重复的字符，并且可能还需要 3-4 个缺失字符可能会或可能不会重复。这是我到目前为止所拥有的：

```
var r = new Array("A","B","C","D","E","F","G","H","I","J","K",
                  "L","M","N","O","P","Q","R","S","T","U","V",
                  "W","X","Y","Z",0,1,2,3,4,5,6,7,8,9);
var missing_string = "he!!ow!r!d";
var bt_lng = missing_string.length;
var bruted="";

for (z=0; z<r.length; z++) {
for(var x=0;x<bt_lng;x++){
    for(var y=0;y<r.length;y++){
        if(missing_string.charAt(x) == "!"){
            bruted += r[z];
            break;
        }
        else if(missing_string.charAt(x) == r[y]){
            bruted += r[y];
        }
    }
}
console.log("br: " + bruted);
bruted="";
} 
```

只需一个“！”就可以很好地工作：

```
helloworAd
helloworBd
helloworCd
...
helloworLd 
```

但是有 2 个或更多“！”，我得到：

```
heAAowArAd
heBBowBrBd
heCCowCrCd
...
heLLowLrLd 
```

这对重复部分有好处，但我还需要在每个缺失的字符点测试所有可能的数组 M 字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T04:21:09.020

**也许纯javascript**中的以下函数对您来说是一个可能的解决方案。它用于`Array.prototype.reduce`创建`c`给定字母的笛卡尔积`x`，其能力`n`取决于单词中感叹号的数量`w`。

```
function combinations(w) {
    var x = new Array(
            "A","B","C","D","E","F","G","H","I","J","K",
            "L","M","N","O","P","Q","R","S","T","U","V",
            "W","X","Y","Z",0,1,2,3,4,5,6,7,8,9
        ),
        n = w.match(/\!/g).length,
        x_n = new Array(),
        r = new Array(),
        c = null;

    for (var i = n; i > 0; i--) {
        x_n.push(x);
    }

    c = x_n.reduce(function(a, b) {
        var c = [];
        a.forEach(function(a) {
            b.forEach(function(b) {
                c.push(a.concat([b]));
            });
        });
        return c;
    }, [[]]);

    for (var i = 0, j = 0; i < c.length; i++, j = 0) {
        r.push(w.replace(/\!/g, function(s, k) {
            return c[i][j++];
        }));
    }

    return r;
} 
```

`console.log(combinations("ov!rf!ow"))`在浏览器控制台中这样调用它。

# android - Android TextView 文字背景颜色

> ID：15582900
> 
> 赞同：14
> 
> 时间：2013-03-23T03:08:16.203
> 
> 标签：android, user-interface

如何使用 Android TextView 实现这样的效果。它看起来有点像选定的文本，我在 API 中找不到类似的东西。

这不是视图的背景颜色，而是仅用于文本的背景颜色。您可以看到它如何在换行符处停止，并且在文本行之间有一条细白线。

![截屏](../Images/3271879a04aaaacf9e1c7a76ac021949.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-23T03:12:41.210

```
<TextView
android:background="#0000FF"
android:textColor="#FFFFFF" /> 
```

会定义一个`TextView`蓝色背景和白色文本...是你需要的吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-23T11:06:51.327

据我所见，如果不覆盖 TextView 并在包含间隙颜色的视图上绘制自定义油漆，就没有“好”的方法。

即使设置`lineSpacingExtra`属性也只会扩展背景颜色。

您还可以考虑创建自定义`spannable`并像使用它一样使用它

```
Spannable str = new SpannableStringBuilder("How can I achieve such an effect with an Android TextView. It looks somehow like selected text and I couldn't find something similar in the API.");
str.setSpan(new NewSpannableClass(), 0, str.length() - 1, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
((TextView)findViewById(R.id.text)).setText(str); 
```

`NewSpannableClass`自定义跨度在哪里。

看到很多人都懒得去查找如何制作自定义 spannables，这里有一个例子

```
public class CustomSpannable extends ClickableSpan
{
    @Override public void updateDrawState(TextPaint ds)
    {
        super.updateDrawState(ds);
        ds.setUnderlineText(true);
    }
} 
```

此示例将在文本下划线。用于`TextPaint`更改跨区文本的外观。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-27T09:08:12.433

我相信有一种更简单、更好的方法来实现这一点：只需创建一个 backgroundColorSpan 并将其添加到 SpannableString。沿着这些思路：

```
public static SpannableString buildBackgroundColorSpan(SpannableString spannableString,
                                                String text, String searchString, int color) {

    int indexOf = text.toUpperCase().indexOf(searchString.toUpperCase());

    try {
        spannableString.setSpan(new BackgroundColorSpan(color), indexOf,
                (indexOf + searchString.length()), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    } catch (Exception e) {

    }

    return spannableString;
} 
```

其中“spannableString”是创建并假定用“text”初始化的 SpannableString 对象；“searchString” 表示您希望在 TextView 中“突出显示”的一段文本，“color”表示应设置“突出显示”文本的背景颜色。

```
String text = "The Quick Brown Fox Jumps over the Lazy Dog";
String searchString = "brown";
int color = Color.parseColor("#FFF5F19E");

SpannableString spannableString = new SpannableString(text);
spannableString = StringUtils.buildBackgroundColorSpan(spannableString, text, searchString, color); 
```

我认为这应该足够了。

谢谢

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-18T12:13:07.073

如果您想从 XML 中执行此操作，请尝试刚刚回答的其他人的解决方案：

```
 <TextView
            android:id="@+id/TextView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:textColor="#ffffff"
            android:background="#1bgtbgt"/> 
```

如果您想从活动代码中执行此操作，您可以动态更改它，例如尝试：

```
text.setBackgroundColor( int color); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-23T04:18:04.773

使用这个例子

```
 <TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="#0000FF"
    android:textColor="#FFFFFF" /> 
```

采摘颜色使用此链接 [http://html-color-codes.info/](http://html-color-codes.info/)

> 红色：#750A0A
> 
> 蓝色：#002BFF
> 
> 绿色：#33FF00
> 
> 白色：#FFFFFF
> 
> 黑色：#000000

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-23T11:20:45.050

`textview`在in`.xml`文件下面试试这个：

```
<TextView android:background="#0000FF"> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-13T17:07:03.987

只需将 TextView 的长度设置为`match_parent`假设它嵌套在跨越整个屏幕长度的父值中，您的文本将具有相同的长度，但框将增加到整个屏幕的长度。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-10-02T05:58:08.310

您可以在 TextView 周围添加另一个布局并将其背景设置为您想要的颜色

```
<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="#000000" >

    <TextView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:textColor="#FFFFFF"
        android:text="@string/text" />

</LinearLayout> 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-03-23T05:09:41.877

尝试将其用于文本背景颜色

```
 <TextView
            android:id="@+id/comment_dis"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="Stack Overflow
            android:textColor="#ffffff"
            android:background="#3cabdc"/> 
```

# android - 为什么在 onTouchEvent() 方法中调用 invalidate() 时 onDraw 不起作用？

> ID：15582904
> 
> 赞同：1
> 
> 时间：2013-03-23T03:09:10.403
> 
> 标签：android, canvas, bitmap, surfaceview, invalidation

我和我的朋友正在做一个更大的 Android 项目。这件作品需要做的是允许我们使用位图和表面视图在触摸屏上实现手绘。需要明确的是，我们最终想要的是当用户实例化一个触摸事件时，适当的像素会改变颜色，例如，如果用户在触摸屏上写下他们的名字，他们的名字就会出现在他们自己的笔迹中。我相信问题出在 invalidate 方法中，该方法在触摸屏幕时调用。使用日志输出，我们发现未调用/使用 onDraw 方法。我们使用位图的原因是因为它们可以被压缩并通过网络发送。如果有更好的方法来实现该功能，那么我们会接受建议。

```
`/**
 * 
 */
package com.example.practice_app;
import android.util.DisplayMetrics;
import android.annotation.SuppressLint;
import android.content.Context;
import android.util.AttributeSet;
import android.view.SurfaceView;
import android.view.MotionEvent;
import android.view.View;
import android.view.WindowManager;
import android.view.SurfaceHolder;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Color;

//Debugging packages
import android.util.Log;
import java.lang.RuntimeException;

/**
 * @author Asus
 *
 */
public class WhiteBoardView extends SurfaceView implements SurfaceHolder.Callback {

    //Class fields:
    //SurfaceHolder:
    SurfaceHolder holder;

    //Current context:
    Context currentContext;

    //Graphics:
    private DisplayMetrics metrics = new DisplayMetrics();

    //private Bitmap ourBitmap;
    private Bitmap ourBitmap;
    private Canvas ourCanvas;
    private Paint paint;
    private View myView;

    //Class Methods:
    /**
     * @param context
     */

    public WhiteBoardView(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
        final String CONSTRU_TAG = "Constructor";

        //Initialize class fields;
        currentContext = context;
        holder = getHolder();

        holder.addCallback(this);

        //Create the Canvas and the Bitmap:
         metrics = new DisplayMetrics();
        ((WindowManager)getWindowManager()).getDefaultDisplay().getMetrics(metrics);

        try{ourBitmap = Bitmap.createBitmap(metrics.widthPixels, metrics.heightPixels, Bitmap.Config.ARGB_8888);}
        catch(IllegalArgumentException argEr){
            Log.e("BITMAP_CREATE","Error creating the bitmap: IllegalArgumentException");
        }

        ourCanvas = new Canvas(ourBitmap);
        if(ourBitmap == null)
        {
            Log.e(CONSTRU_TAG, "ourBitmap is \"null\".");
        }
        paint = new Paint();
        paint.setColor(Color.WHITE);

    }

    private Object getWindowManager() {
        // TODO Auto-generated method stub
        return currentContext.getSystemService(Context.WINDOW_SERVICE);
    }

    /**
     * @param context
     * @param attrs
     */
    public WhiteBoardView(Context context, AttributeSet attrs) {
        super(context, attrs);

        // TODO Auto-generated constructor stub
        final String CONSTRUC_TAG2 = "Constructor(Context, AttributeSet)";
        // TODO Auto-generated constructor stub

        //Initialize class fields;
        currentContext = context;
        holder = getHolder();

        holder.addCallback(this);

        //Create the Canvas and the Bitmap:
         metrics = new DisplayMetrics();
        ((WindowManager)getWindowManager()).getDefaultDisplay().getMetrics(metrics);

        try{ourBitmap = Bitmap.createBitmap(metrics.widthPixels, metrics.heightPixels, Bitmap.Config.ARGB_8888);}
        catch(IllegalArgumentException argEr){
            Log.e("BITMAP_CREATE","Error creating the bitmap: IllegalArgumentException");
        }

        ourCanvas = new Canvas(ourBitmap);
        if(ourBitmap == null)
        {
            Log.e(CONSTRUC_TAG2, "ourBitmap is \"null\".");
        }
        paint = new Paint();
        paint.setColor(Color.WHITE);
    }

    /**
     * @param context
     * @param attrs
     * @param defStyle
     */
    public WhiteBoardView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        // TODO Auto-generated constructor stub
        final String CONSTRUC_TAG3 = "Constructr(Context, AttributeSet, int)";
        // TODO Auto-generated constructor stub

        //Initialize class fields;
        currentContext = context;
        holder = getHolder();

        holder.addCallback(this);

        //Create the Canvas and the Bitmap:
         metrics = new DisplayMetrics();
        ((WindowManager)getWindowManager()).getDefaultDisplay().getMetrics(metrics);

        try{ourBitmap = Bitmap.createBitmap(metrics.widthPixels, metrics.heightPixels, Bitmap.Config.ARGB_8888);}
        catch(IllegalArgumentException argEr){
            Log.e("BITMAP_CREATE","Error creating the bitmap: IllegalArgumentException");
        }

        ourCanvas = new Canvas(ourBitmap);
        if(ourBitmap == null)
        {
            Log.e(CONSTRUC_TAG3, "ourBitmap is \"null\".");
        }
        paint = new Paint();
        paint.setColor(Color.RED);
    }

    //Event Handlers:
    @SuppressLint("WrongCall")
    @Override
    public boolean onTouchEvent(MotionEvent e)
    {
        //Declare local variables:
        final String ONTOUCH_TAG = "onTouchEvent(MotionEvent)";
        boolean eventHandled = true;
        float x = e.getX();
        float y = e.getY();

        switch(e.getAction())
        {

        case MotionEvent.ACTION_DOWN: //Log.i(ONTOUCH_TAG, "Hurray! Touch is working!");
        case MotionEvent.ACTION_MOVE:
        case MotionEvent.ACTION_UP:
            if(((x >= 0) && (x <= ourBitmap.getWidth())) && ((y >= 0) && (y <= ourBitmap.getHeight())))
            {  

               ourBitmap.setPixel((int)x, (int)y, paint.getColor());

                   invalidate();

            }

            break;

    }
        return eventHandled;
    }

    @Override
    public void onDraw(Canvas canvas)
    {
        canvas.drawBitmap(ourBitmap, null, paint);
    }

    @Override
    public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3) {
        // TODO Auto-generated method stub

    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        // TODO Auto-generated method stub

    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        // TODO Auto-generated method stub

    }
}'

And here is the Activity that WhiteBoardView is associated with.

package com.example.practice_app;

import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.os.Bundle;
import android.util.DisplayMetrics;
import android.view.Menu;

public class Whiteboard extends Activity {

    //Class fields:
    Bitmap ourBitmap;
    Canvas ourCanvas;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        //Call the superclass constructor:
        super.onCreate(savedInstanceState);

        //Get the current Device's measurements:
        DisplayMetrics metrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(metrics);

        //Create the Bitmap and Canvas objects
        ourBitmap = Bitmap.createBitmap(metrics.widthPixels, metrics.heightPixels, Bitmap.Config.ARGB_8888);
        ourCanvas = new Canvas(ourBitmap);

        //Set the UI layout for this activity:
        setContentView(R.layout.activity_whiteboard);

    }
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.whiteboard, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T04:31:31.183

当您在 SurfaceView 上绘图时，您需要使用这些`surfaceCreated / Updated / Destroyed`方法并`Surface`在`SurfaceHolder`.

如果你改变你的类来扩展`View`和实现`onMeasure`它应该可以工作。

# python - 在 Python 中生成一个长度为 n 的位列表

> ID：15582905
> 
> 赞同：3
> 
> 时间：2013-03-23T03:09:14.800
> 
> 标签：python, permutation, bit

我想要一个函数，它会给我指定长度的所有可能的字符串，这些字符串只由零和一组成。例如：

```
spam(4) 
```

应该让我：

```
['0110', '0111', '0001', '0011', '0010', '0101', '0100', '1110', '1100', '1101', '1010', '1011', '1001', '1000'] 
```

我试图`itertools.permutations`用于这项工作。所以，这就是我所做的。

```
def getPerms(n):
    perms = getCandidates(n)
    res = []
    for i in perms:
        res.extend(permutations(i))
    res = clean(res)
    return res

def clean(ar):
    res = []
    for i in ar:
        temp = ""
        for j in i:
            temp += j
        res.append(temp)
    return list(set(res))

def getCandidates(n):
    res = []
    for i in range(1, n):
        res.append("1"*i + "0"*(n-i))
    return res 
```

但这是非常低效的，并且在 10 上会出现内存错误作为输入。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T03:14:16.837

改为使用[`itertools.product`](http://docs.python.org/2/library/itertools.html#itertools.product)。

```
>>> import itertools
>>> [''.join(i) for i in itertools.product('01', repeat=4)]
['0000', '0001', '0010', '0011', '0100', '0101', '0110', '0111', '1000', '1001', '1010', '1011', '1100', '1101', '1110', '1111'] 
```

使用函数（假设`itertools`已经导入）：

```
def bitGen(n):
    return [''.join(i) for i in itertools.product('01', repeat=n)] 
```

对于较大`n`的 s，返回生成器可能更合适。

```
def bitGen(n):
    return (''.join(i) for i in itertools.product('01', repeat=n))

# Alternatively:

def bitGen(n):
    for i in itertools.product('01', repeat=n):
        yield ''.join(i) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-23T03:13:52.810

显然，您只想生成位串。这是我知道的最快的方法：

```
for i in xrange(1, 2**n-1):
    yield '{:0{n}b}'.format(i, n=n) 
```

这会生成每一个长度精确地`n`包含至少一个 1 和一个 0 的位串。

例子：

```
>>> def gen(n):
...     for i in xrange(1, 2**n-1):
...         yield '{:0{n}b}'.format(i, n=n)
... 
>>> list(gen(4))
['0001', '0010', '0011', '0100', '0101', '0110', '0111', '1000', '1001', '1010', '1011', '1100', '1101', '1110'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T03:38:53.923

除了上面的优秀答案，如果你想继续你开始的道路，这里是一个更好的实现，使用`yield`：

```
from itertools import permutations

def spam(n):
    for perm in getPerms(n):
        print perm,
    print

def getPerms(n):
    for i in getCandidates(n):
        for perm in set(permutations(i)):
            yield ''.join(perm)

def getCandidates(n):
    for i in range(1, n):
        res = "1" * i + "0" * (n - i)
        yield res

spam(4) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-08T06:26:13.253

或者您可以使用递归..这具有能够生成任何 n 位 k 基数的额外优势

```
def bitStr(numDig, base):
 if numDig == 0: return []
 if numDig == 1: return [str(i) for i in range(0,base)]   
 return [ digit + bits for digit in bitStr(1, base)for bits in bitStr(numDig - 1, base)] 
```

打印 (bitStr(4, 2))

# java - 用于高效非阻塞服务器的 UDP 或 Unix 套接字？

> ID：15582907
> 
> 赞同：0
> 
> 时间：2013-03-23T03:09:24.220
> 
> 标签：java, linux, jakarta-ee, nio

我正在编写一个服务器（基于 Java），它只能由同一主机上的程序调用。

那么，在性能和可靠性方面，我应该使用 UDP 还是只使用 Unix Socket？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T03:17:04.190

UDP 不可靠。我正在挑选尼特，但无法保证使用 UDP 交付订单或交付。在同一主机上的两个进程之间，这可能永远不会成为问题，但在极端负载情况下可能会出现。

UDP 数据包中的开销也比 Unix 套接字中的多得多。同样，除非在最极端的负载下，这不太可能成为实际问题，并且在此之前您会遇到许多其他与负载相关的问题，因为两者的开销在现代计算术语中都是名义上的。

如果您真的担心性能和可靠性，请坚持使用 Unix 套接字。

如果您将来有任何分发和负载平衡的计划，如果您需要支持多个主机，UDP 将为您提供更大的灵活性。

说了这么多，现在这些都不是实际问题。大多数服务甚至使用 TCP 进行本地通信，然后在此之上分层其他服务，如[ZeroMQ 。](http://www.zeromq.org/)您几乎绝对不应该担心这种性能水平。使用使您的代码更易于编写和维护的软件，并在您需要的不太可能发生的情况下扩展系统。将新服务器扔到问题上比花费工时重新设计不是为了灵活而编写的软件更容易也更便宜。

另请注意，ZeroMQ（和其他消息队列系统）将选择最有效的传输机制。例如，如果可能，ZeroMQ 将使用 IPC（进程间通信），这比 UDP 或 Unix 套接字快得多，如果您需要，它还将通过 Internet 扩展到全球数千台主机，您基本上赢了不必更改您的代码。

永远不要过早地优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T03:18:48.900

unix 套接字肯定会为您节省通过 tcp/ip 堆栈进行上下文切换和封装/解封装的开销。但这种收益会有多大？我认为这取决于您对性能和可靠性的要求以及您期望此服务器处理的负载。

# java - 如何检测给定的单词（作为字符串）是否可以通过在元素周期表中附加元素的短形式来组成？

> ID：15582908
> 
> 赞同：1
> 
> 时间：2013-03-23T03:09:50.920
> 
> 标签：java, string, algorithm, runtime

所以我不确定我将如何解决这个问题，所以任何人都可以提出任何算法或方法来解决这个问题吗？

更具体地说，这个词不能由元素周期表中元素的字母组成，因为这意味着这个词总是可以组成的。我要问的是这个词是否可以通过附加元素的简短形式来组成。

另外，您建议的方法的运行时间是多少？

对不起，如果问题仍然太模糊。如果缺少详细信息，我将进行编辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T03:17:24.523

这相当于[将字符串分割成 "words"](http://thenoisychannel.com/2011/08/08/retiring-a-great-interview-problem/)，其中您的 "words" 是元素周期表中的元素缩写。那篇文章对各种解决方案进行了很好的长篇文章。它基本上归结为一个动态编程问题，您试图使用元素作为片段来消耗目标字符串的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T03:13:30.890

一个正则表达式就可以了。只需检查您的字符串是否匹配

```
/(H|He|Li|... all other elements ...)*/i 
```

正则表达式可以编译为具有`O(N)`复杂性，`N`输入的长度在哪里（[正则表达式的复杂性是多少？](https://stackoverflow.com/questions/4378455/what-is-the-complexity-of-regular-expression)）。

# vb.net - 是否可以在列表视图中单独禁用水平滚动？

> ID：15582925
> 
> 赞同：0
> 
> 时间：2013-03-23T03:12:33.990
> 
> 标签：vb.net, listview, scroll

基本上，我只是想知道是否可以禁用水平滚动，同时在 VB.NET 中使用列表视图启用垂直滚动，而无需为其创建新类。

为什么？好吧，纯粹是美学，我的列表视图目前有一点水平滚动，这不值得为此努力创建一个新类，尽管如果它可以不费力地编码，我会非常愿意这样做。

PS：我在 Windows 窗体中工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-11-05T16:43:10.383

我经常在具有单个列的详细信息视图中使用 ListView 控件，以便提供具有拖放功能的列表，这是 ListBox 控件所缺乏的。除了想要水平滚动的烦人习惯之外，ListView 可以很好地解决这个问题。可以通过将列宽设置为合适的值（通常比 ListView 的宽度小 4）来解决这个问题，但是如果外观发生变化，这将无法很好地呈现，并且如果控件决定将完全失败在运行时添加垂直滚动条。

我使用的解决方法（我承认它不能应对所有情况）就是这样。首先，配置一个单列的 ListView（名称是任意的）并隐藏它的标题：

```
lvList.View = View.Details
lvList.FullRowSelect = True
lvList.Columns.Add("ColName")
lvList.Columns(0).Width = lvList.ClientSize.Width
lvList.HeaderStyle = ColumnHeaderStyle.None 
```

然后处理 ListView 的 ClientSizeChanged 事件，并使用它将列的宽度设置为客户区的宽度（这实际上是列表主体必须填充的区域）：

```
Private Sub lvList_ClientSizeChanged(ByVal sender As Object, ByVal e As EventArgs) _
Handles lvList.ClientSizeChanged
    If lvList.Columns.Count > 0 Then
        lvList.Columns(0).Width = lvList.ClientSize.Width
    End If
End Sub 
```

随着列表内容的变化和垂直滚动条的添加或删除，ClientSizeChange 事件被触发并调整列的宽度，使其完全填满客户区。

# css - 将 div 宽度设置为高度的百分比

> ID：15582927
> 
> 赞同：4
> 
> 时间：2013-03-23T03:12:50.477
> 
> 标签：css, aspect-ratio

我正在尝试根据`.full_height_div`元素的高度使用纯 css 设置元素的宽度。它必须是相对于高度的宽度，而不是相对于宽度的高度。原因是父容器 ( `.set_rectangle_height`) 已经是一个高度相对于页面宽度的 div。显然，随着页面大小的`div`调整，页面上的 s 将调整大小，因此我无法`px`为`.full_height_div`子项设置固定宽度。

因此`.rectangle`，`.set_rectangle_height`组成父容器，其宽度占页面的百分比，高度相对于该宽度。有关此方法的说明，请参见[此处。](http://ansciath.tumblr.com/post/7347495869/css-aspect-ratio)

但问题是，然后我想在父级内放置一个 div，其`height: 100%`宽度相对于这个高度。目标是我将能够改变浏览器窗口的大小，并且一切都将保持其纵横比。

[这是我失败的尝试：](http://jsfiddle.net/HSvW4/1/)

```
.rectangle
{
    position: relative;
    width: 30%;/*the outermost div is always a % of the page
width, even while resizing*/
    display:inline-block;
    background-color: green;
}
.set_rectangle_height
{
    padding-bottom: 30%;/*this sets the height of the outermost div
to a ratio of 1:3*/
    position: relative;
    float: left;
    width: 100%;
    height: 100%;
}
.full_height_div/*this is the div that i want to have a width relative
to its height*/
{
    height: 100%;
    width: 20px;/*i will delete this once .square_set_width is working*/
    position: absolute;
    background-color: red;
}
.square_set_width
{                   
    display: inline-block;
    padding-left: 100%; /*i want to use something like this line to set
the width of this div to be equal to .full_height_div's height - ie a 1:1 aspect
ratio, but padding-left does not work :( */
    position: relative;
    height: 100%;
    background-color: blue;
}

   <div class='rectangle'>
      <div class='set_rectangle_height'>
         <div class='full_height_div'>
            <div class='square_set_width'></div>
         </div>
      </div>
   </div> 
```

所以，这就是上面不正确的标记的样子：

![不正确的布局](../Images/7a1429f9009057459e67bfdd2111f95e.png)

这就是我希望它看起来的样子：

![正确的布局](../Images/9042ef4b7a441c518f1978f7435fcc12.png)

我知道我可以在 javascript 中找到蓝色正方形百分比高度，然后将宽度设置为等于这个高度，但是如果有一个纯 css 修复我正在尝试做的事情，那将非常方便。我将经常使用这种结构，我真的不想编写代码来调整页面上所有 div 的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T03:42:34.793

你必须为此使用javascript。如果我理解你，你想要一个完美的蓝色方块。利用

```
var height = $('.square_set_width').height();
$('.square_set_width').css('width',height); 
```

这是一个jsfiddle：http: [//jsfiddle.net/a8kxu/](http://jsfiddle.net/a8kxu/)

编辑：而不是做`padding-bottom: 30%`而`height: 70%`不是。这是另一个小提琴：http: [//jsfiddle.net/a8kxu/1/](http://jsfiddle.net/a8kxu/1/)

编辑#2：抱歉，您不能使用 css 来执行此操作。它不够强大

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-23T03:18:51.260

如果我理解正确

你可以做

```
#divID {
 width: 75%;
 margin-left: auto; // this is used to center the container
 margin-right: auto;// this as well
} 
```

# php - Codeigniter 表单验证正在执行 TRUE 和 FALSE 操作（奇怪的错误！）

> ID：15582928
> 
> 赞同：0
> 
> 时间：2013-03-23T03:12:57.800
> 
> 标签：php, codeigniter

我有一个奇怪的错误。

表单验证同时执行 TRUE 和 FALSE 操作。

对于 TRUE，数据库模型 (scrape_url_model) 运行，因此数据库被更新，但随后视图运行，好像表单验证为 FALSE。显示的是 FALSE 视图 (scrape_url/index)，而不是与成功验证关联的视图 (scrape_url/form_success)。

我`The URL is already in the database`从回调函数中收到验证错误消息。

```
public function index(){
    $this->load->helper('form');
    $this->load->library('form_validation');
    $this->form_validation->set_error_delimiters('', '');

    $data['pageTitle'] = 'URL Scraping Tool';

    $this->form_validation->set_rules('event_url', 'URL', 'trim|required|callback_url_check');

    if ($this->form_validation->run() == FALSE){
            $this->load->view('templates/header', $data);  
            $this->load->view('scrape_url/index', $data);
            $this->load->view('templates/footer');
    }
    else {
        $this->load->library('Db_queries');
        $this->load->library('session');
        $this->load->helper('url');

        list($session_data['alert'],
        $session_data['alert_type'],
        $session_data['countUncategorizedDecks'],
        $session_data['event_id'],
        $session_data['eventDate']) = $this->scrape_url_model->insert_decks_and_cards();

        if ($this->input->post('last_url') == 'yes'){
            $this->scrape_url_model->insert_md_percentage($session_data['eventDate']);
        }
        $this->session->set_userdata($session_data);
        $this->load->view('templates/header', $data);  
        $this->load->view('scrape_url/form_success', $data);
        $this->load->view('templates/footer_ajax');    
    }
}                      

public function url_check($event_url) {
    $url_regex = "/^(http|https|ftp):\/\/([A-Z0-9][A-Z0-9_-]*(?:\.[A-Z0-9][A-Z0-9_-]*)+):?(\d+)?\/?/i";

    if (preg_match($url_regex, $event_url) == FALSE) {
        // check to see if input is a URL
        $this->form_validation->set_message('url_check', 'Please enter a URL including "http://".');
        return FALSE;
    }
    $this->load->database();
    $sql = 'SELECT url FROM event';
    $s = $this->db->conn_id->query($sql);
    $used_urls = $s->fetchAll(PDO::FETCH_COLUMN, 0);               

    if (in_array($event_url, $used_urls)){
        $this->form_validation->set_message('url_check', 'The URL is already in the database.');
        return FALSE;
    }
    return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T04:10:29.883

尝试使用语句：

```
$this->form_validation->run() == true 
```

然后相应地编码您的条件。它会起作用，也很容易理解。

# c# - 我有一个使用 xslt 样式的 xml 文件来生成 html 电子邮件模板。如何在 c# 中将该 xml 作为 html 电子邮件正文？

> ID：15582933
> 
> 赞同：1
> 
> 时间：2013-03-23T03:14:12.967
> 
> 标签：c#, xslt, linq-to-xml, html-email

我有一个使用 xslt 样式的 xml 文件来生成 html 电子邮件模板。我动态地从用户那里获取值，并用接收到的值替换 xml 元素文本。如何获取该 xml 文件并在 c# 中作为 html 电子邮件正文发送？

我的 Xml 看起来像这样

```
 <?xml version="1.0" encoding="utf-8" ?>
  <?xml-stylesheet type="text/xsl" href="EmailTemplateStyleForHTML.xslt"?>
 <EmailTemplate>
   <subject>Information from xyz</subject>
   <displayName>abcd</displayName>
   <Message1>
    Thanks you for registering to xyz.
  </Message1>
  <Copyright>Copyright xyz</Copyright>
 </EmailTemplate> 
```

我正在使用 LINQ 将值设置为 xml。注意：我知道如何从 xml 获取和设置值，但我想要将整个 xml 文件抓取到电子邮件正文中。

如果您认为对此有更好的方法，我很乐意听到。我将衷心感谢您的帮助。

回复后编辑：xsl转换部分：

```
 TextReader tr1 = new StringReader(@"EMailTemplateHtml.xml");
            var tr11 = new XmlTextReader(tr1);
            var xPathDocument = new XPathDocument(tr11);

            //read XSLT

            TextReader tr2 = new StringReader(@"EmailTemplateStyleForHTML.xslt");
            var tr22 = new XmlTextReader(tr2);
            var xslt = new XslTransform();
            xslt.Load(tr22);

            var sb = new StringBuilder();
            TextWriter tw = new StringWriter(sb);

            xslt.Transform(xPathDocument, null, tw);

            emailBody = sb.ToString(); 
```

我正在按照您所说的进行转换（@Roy Ashbrook）我在这里遗漏了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T03:42:47.150

我相信您需要在内存中实际执行 XSL 转换，而不是在 XML 本身中引用它。您可以将 XSL 存储在远程位置并以这种方式引用它，但我不会

所以：

1.  将您的值注入您的 xml 字符串
2.  使用您的 xsl 转换您的 xml
3.  使您的 html 消息正文

这是一些代码。主要借鉴/启发： [如何使用 .NET 中的文件将 XML 转换为不带文件的字符串？](https://stackoverflow.com/questions/2384306/how-to-transform-xml-as-a-string-w-o-using-files-in-net)和[使用 C# 发送电子邮件](https://stackoverflow.com/questions/449887/sending-e-mail-using-c-sharp)。

```
void Main()
{
    SendHtmlBody(GetHtmlBody());
}
void SendHtmlBody(string HtmlBody){
    using(SmtpClient c = new SmtpClient())
    {
        //set smtp options here
        using(MailMessage msg = new MailMessage("from@replace.me","to@replace.me"))
        {
            msg.Subject = "Testing Bulk mail application";
            msg.Body = HtmlBody;
            msg.IsBodyHtml = true;
            //c.Send(msg);
        }
    }
}
string GetHtmlBody(){
    string xmlInput = @"<?xml version=""1.0"" encoding=""utf-8"" ?>
    <EmailTemplate>
    <subject>Information from xyz</subject>
    <displayName>abcd</displayName>
    <Message1>
        Thanks you for registering to xyz.
    </Message1>
    <Copyright>Copyright xyz</Copyright>
    </EmailTemplate>";

        string xslInput = @"<?xml version=""1.0"" encoding=""ISO-8859-1""?>
    <xsl:stylesheet version=""1.0""
    xmlns:xsl=""http://www.w3.org/1999/XSL/Transform"">
    <xsl:template match=""/"">
    <html>
    <body>
        <h5><xsl:value-of select=""EmailTemplate/subject""/></h5>
        <h5><xsl:value-of select=""EmailTemplate/displayName""/></h5>
    </body>
    </html>
    </xsl:template>
    </xsl:stylesheet>";

    using (StringReader srt = new StringReader(xslInput)) // xslInput is a string that contains xsl
    using (StringReader sri = new StringReader(xmlInput)) // xmlInput is a string that contains xml
    {
        using (XmlReader xrt = XmlReader.Create(srt))
        using (XmlReader xri = XmlReader.Create(sri))
        {
            XslCompiledTransform xslt = new XslCompiledTransform();
            xslt.Load(xrt);
            using (StringWriter sw = new StringWriter())
            using (XmlWriter xwo = XmlWriter.Create(sw, xslt.OutputSettings)) // use OutputSettings of xsl, so it can be output as HTML
            {
                xslt.Transform(xri, xwo);
                return sw.ToString();
            }
        }
    }
} 
```

# java - 在 Android 中添加到外部数据库

> ID：15582935
> 
> 赞同：1
> 
> 时间：2013-03-23T03:14:18.947
> 
> 标签：java, php, android, mysql, database

我是 Android 编程新手，我正在尝试接受用户输入并将其添加到我的外部数据库中。现在我的php代码是：

```
<?php
mysql_connect("host","login","pass") or die ("Unable to connect to MySQL");
mysql_select_db("database");

mysql_query("INSERT INTO Table (number, format, name, price) VALUES ('".$_REQUEST['number1']."', ".$_REQUEST['format1'].", ".$_REQUEST['name1'].", ".$_REQUEST['price1'].")");

mysql_close(); 
```

?>

我没有看到我的 php 有任何问题，但是当我运行我的程序时，我没有收到任何错误，但是当我查看我的数据库时，似乎实际上并没有添加任何内容。我的Java代码是：

```
Log.d("debug", "ENTER METHOD ADD");
    new Thread(new Runnable(){
        public void run(){

        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

        EditText eNumber = (EditText) findViewById(R.id.barcodeEdit);
        EditText eFormat = (EditText) findViewById(R.id.codeFormatEdit);
        EditText eName = (EditText) findViewById(R.id.titleEdit);
        EditText ePrice = (EditText) findViewById(R.id.priceEdit);

        Log.d("debugNumber", eNumber.getText().toString());
        Log.d("debugFormat", eFormat.getText().toString());
        Log.d("debugName", eName.getText().toString());
        Log.d("debugPrice", ePrice.getText().toString());

        nameValuePairs.add(new BasicNameValuePair("number1", eNumber.getText().toString()));
        nameValuePairs.add(new BasicNameValuePair("format1", eFormat.getText().toString())); //you can add as many you need
        nameValuePairs.add(new BasicNameValuePair("name1", eName.getText().toString()));
        nameValuePairs.add(new BasicNameValuePair("price1", ePrice.getText().toString()));

        try {
                HttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost("http://MY_SITE.com/my.php");
                httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                HttpResponse response = httpClient.execute(httpPost);
                HttpEntity entity = response.getEntity();
                //is = entity.getContent();
                Log.d("debug", "ENDED TRY");
            }catch (Exception e) {
                // TODO: handle exception
                Log.e("log_tag", e.toString());
                //return false;
                //Toast.makeText(this, e.toString(), Toast.LENGTH_LONG).show();
            }
        }
    }).start(); 
```

那是我添加的代码。我知道我可以很好地连接到数据库，因为我用来搜索数据库的代码可以正常工作，但由于某种原因，我的添加搞砸了。我有代码在一个新线程中运行，因为前几天我了解到您不能在程序的主线程中执行这些 http 请求。我一直在寻找答案，但还没有找到答案，也许我只是漏掉了一行，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T04:50:48.563

我建议您首先开发一个简单的 html 表单，以确保您不会在 php 方面遇到任何问题。

```
<html xmlns='http://www.w3.org/1999/xhtml'>
   <head >
      <meta http-equiv='Content-Type' content='text/html; charset=utf-8'/>
      <title >Form Page: sampleform</title>
   </head>
<body>
<h1>Sample form page</h1>

<form id='sampleform' method='post' action='http://MY_SITE.com/my.php' >
   <p>
   number1: <input type='text' name='number1' />
   </p>
   <p>
   format1: <input type='text' name='format1' />

   </p>

    <p>
   name1: <input type='text' name='name1' />
   </p>

    <p>
   price1: <input type='text' name='price1' />
   </p>

   <p>
   <input type='submit' name='Submit' value='Submit' />
   </p>

</form>

</body>
</html> 
```

运行这个快速测试并告诉我。以便我可以进一步帮助您。

**编辑：**

是的。问题可能出在您的插入语句中。尝试使用以下代码。

```
 <?php
    $mysqli = new mysqli("Your host", "Db username", "Db password", "Db name");

    if ($mysqli->connect_errno) {
        echo "Couldn't connect to database";
    }

    $number = $mysqli->real_escape_string($_POST['number1']);
    $format= $mysqli->real_escape_string($_POST['format1']);
    $name= $mysqli->real_escape_string($_POST['name1']);
    $price= $mysqli->real_escape_string($_POST['price1']);

    $query = "INSERT INTO Table (number, format, name, price) VALUES('$number','$format','$name', '$price');";

    $result = $mysqli->query($query);

if($result)
{
        echo "Successfully inserted";
}

   ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T03:24:52.563

显然它在代码中没有显示错误。要逐行调试更多内容，您应该修改您的 PHP 代码并尝试 -

```
<?php
mysql_connect("host","login","pass") or die ("Unable to connect to MySQL");
mysql_select_db("database");

echo $_REQUEST['number1'];
echo $_REQUEST['format1'];
echo $_REQUEST['name1'];
echo $_REQUEST['price1'];

$sql = "INSERT INTO Table (number, format, name, price) VALUES ('".$_REQUEST['number1']."', '".$_REQUEST['format1']."', '".$_REQUEST['name1']."', '".$_REQUEST['price1']."')";

echo $sql;

mysql_query($sql) or die(mysql_error());

mysql_close();
?> 
```

您也可以尝试使用 $_POST 语法而不是 $_REQUEST。

你应该理解这个错误。

请与我们分享结果，以便我们进一步帮助您。

谢谢

# r - 递减指数的递推关系具有递增值

> ID：15582936
> 
> 赞同：1
> 
> 时间：2013-03-23T03:14:23.733
> 
> 标签：r, numerical-analysis, recurrence

```
n <- 35
F <- rep(0,n)
N <- rep(0,n)
F[1] <- 1
F[2] <- 1/3
for (k in 3:n) F[k] <- (10/3)*F[k-1]- F[k-2]
F
N <- seq(from=1, to=n, by=1) 
```

如果您不熟悉求解线性递推方程，那完全没有关系。无论如何，我们可以通过求解上述递推方程得到F[n]=3^(1-n)的结果，即F[n]=(10/3)F[n-1]-F[n-2 ]，f [1](https://i.stack.imgur.com/yBrVl.png) =1，f [2](https://i.stack.imgur.com/d2gud.png) =1/3。

为此，通过使用

```
plot (N, F,type="l") 
```

我们可以期待“3^(1-n)”的图形，称为指数函数。

但是，输出与预期不同。与输出相比

```
curve(3^(1-x),0,35, add=TRUE, col='blue') 
```

![在此处输入图像描述](../Images/e0ac41898bbe2ae602297a9c51f92813.png)

如您所知，3^(1-x) 是单调递减函数。尽管有预期，但我们只得到了在后期计算中增加的图形。

```
F[18]>F[19]
TRUE
F[19]>F[20]
FALSE 
```

发生了什么？按照常识，“F[n]>F[n+1]”的所有输出都应该是 TRUE。

如果我将分配给“n”的数字从 35 增加到 50，

```
n <- 50
plot (N, F,type="l") 
```

图形的形状变得非常奇怪。

![在此处输入图像描述](../Images/eced3ab22d048fb0e06c1adc7e1934d8.png)

我猜原因是基于“双精度二进制浮点”（[http://en.wikipedia.org/wiki/Double_precision](http://en.wikipedia.org/wiki/Double_precision)）。在我看来，R 将小于 0.0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0001 * 2^(-52) （有 52 个零）的数字分配为更大的数字，与递归关系相反。

但是，我不知道我的假设是否正确。即使我的假设是正确的，为什么 R 将非常小的数字反向分配为更大的数字，仅在“递归关系”中而不是针对诸如 3^(n-1) 之类的一般函数？此外，在“n=50”的情况下，为什么 R 会完全改变图形的形状？

你可以帮帮我吗？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T03:18:54.597

这与 R 本身无关，并且与计算机表示的浮点值有关。

递归关系就像微分方程，问题分为两部分 - 关系和初始条件。改变初始条件，你就有不同的解决方案。

请注意，对于初始条件`F[1] <- 1; F[2] <- 3`，解决方案是`3^(x-1)`（没有证明，但很容易验证）。一个递增的指数函数。

接下来，注意元素之间的比率（这里也可以查看中间值`H`）：

```
H <- tail(F, -1) / head(F, -1)
c(head(H, 1), tail(H, 1))
## [1] 0.3333333 3.0000000 
```

您正在解决方案 f(x) = 3^(1-x) 和 f(x) = 3^(xk) 之间转换（对于某些常数 k - 这里不是 1，但精确计算它是没有意义的） .

原因是当你减去 F[k-2] 时，算术是不精确的，所以你在每个阶段减去的不够多，就好像你在那个阶段有一个更高的初始条件来获得精确解。

给出F的前N个点是有效的，然后在那个阶段用递推关系求解。这给出了一系列功能。这就是数值计算时会发生的情况——每次计算时都有一组不同的初始条件。

您实际上是在计算 f(x) = (10/3)f(x-1) - f(x-2) + e(f(x-2)) 的解决方案，其中 e(x) > 0 for all x （并且表示在减法结束时掉下来的位）。

# text - HTML 5 Canvas 上的垂直对齐文本

> ID：15582937
> 
> 赞同：1
> 
> 时间：2013-03-23T03:14:42.967
> 
> 标签：text, html5-canvas, vertical-alignment

我想做的是在画布元素的中间显示多行文本。文本是动态的，因为它是由用户使用文本框输入的，然后画布会更新为用户输入的文本（代码如下所示）。我希望文本出现在画布上的方式与使用 CSS 中的垂直对齐：中间属性显示文本的方式类似。我的问题是解决这个问题的最简单方法是什么。

我遇到的一个大问题是用户可以更改字体。由于不同的字体具有不同的高度（即使它们被定义为 px 高度，它们也不是始终如一的高度）。到目前为止，我最好的想法是计算画布上文本的高度。我在网站上阅读了这篇文章[How can you find the height of text on an HTML canvas？](https://stackoverflow.com/questions/1134586/how-can-you-find-the-height-of-text-on-an-html-canvas)，见丹尼尔的第二个回答。这应该计算文本的实际高度，然后可以使用该高度计算文本的正确起始位置，使其在画布上居中。根据我下面的代码，我相信我基本上必须运行类似的代码来预先确定字体的正确起始位置。

这是我在画布上正确包装和显示文本的方法：

```
 function wrapText(context, text, x, y, maxWidth, lineHeight) {
    //manage carriage return
    text = text.replace(/(\r\n|\n\r|\r|\n)/g, "\n");
    //manage tabulation
    text = text.replace(/(\t)/g, "    "); // I use 4 spaces for tabulation, but you can use anything you want
    //array of lines
    var sections = text.split("\n"); 

     for (s = 0, len = sections.length; s < len; s++) {
          var words = sections[s].split(' ');
          var line = '';

          for (var n = 0; n < words.length; n++) {
              var testLine = line + words[n] + ' ';
              var metrics = context.measureText(testLine);
              var testWidth = metrics.width;
              if (testWidth > maxWidth) {
                  context.fillText(line, x, y);
                  line = words[n] + ' ';
                  y += lineHeight;
              } else {
                  line = testLine;
              }
          }
          context.fillText(line, x, y);

         //new line for new section of the text
         y += lineHeight;
      }
}

      var canvas = document.getElementById('myCanvas');
      var context = canvas.getContext('2d');
      var maxWidth = 350;
      var lineHeight = 25;
      var x = (canvas.width - maxWidth) / 2;
      var y = 60;
      var text = "Lorem Ipsum is simply dummy text of the printing and typesetting industry. \nLorem Ipsum has been the industry's standard dummy text ever since the 1500s.";

      context.font = '14pt Verdana';
      context.fillStyle = '#000';

      wrapText(context, text, x, y, maxWidth, lineHeight); 
```

我想知道是否有另一种我没有考虑过的方法可以简化问题，或者这种方法是否是最好的方法？是在画布元素上更简单的方法来垂直对齐文本，类似于 CSS？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2018-10-24T11:46:57.420

用于在画布中设置垂直对齐文本使用`textBaseline`. 例如：

```
ctx.beginPath();
ctx.font = "10px arial";
ctx.textAlign = "center";
ctx.textBaseline = "middle"; // set text in center of place vertically
ctx.fillText("sample text", 100, 100);
ctx.closePath(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T05:14:32.897

凉爽的！

我查看了您的参考资料：[如何在 HTML 画布上找到文本的高度？](https://stackoverflow.com/questions/1134586/how-can-you-find-the-height-of-text-on-an-html-canvas)

**我为Prestaul 的**答案设置了一个时间测试，它实际上使用画布来像素检查文本的下限和上限。在我的测试中，我使用**了所有**大写和小写字母（az 和 AZ），而不是他的小/大“gM”。我还使用了在 JS 中创建的画布，但我没有添加到 DOM 中。

结果：我能够每秒重复运行测试 900 次 +/- 次。

我没有运行 Daniel 的测试来操作 DOM 元素进行测量，但我*认为*这会比 Prestaul 的 1+ 毫秒（！）结果慢。

我的结论是，每当用户更改字体时，我都会使用 Prestaul 的方法来测试最大高度。

就个人而言，破解 DOM 可能会奏效，但对我来说，这感觉就像使用一个黑匣子，在浏览器更新后某天可能会包含炸弹。

感谢您发挥我的好奇心——我很享受！

**[编辑以包含压力测试代码]**

这是压力测试和小提琴的代码：http: [//jsfiddle.net/m1erickson/ttsjq/](http://jsfiddle.net/m1erickson/ttsjq/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; padding:50px; }
</style>

<script>
$(function(){

    var canvas=document.createElement("canvas");
    canvas.width=1000;
    canvas.height=50;
    var ctx=canvas.getContext("2d");

    function measureTextHeight(left, top, width, height,text) {

        // Draw the text in the specified area
        ctx.save();
        ctx.clearRect(0,0,canvas.width,canvas.height);
        ctx.fillText(text, 0, 35); // This seems like tall text...  Doesn't it?
        ctx.restore();

        // Get the pixel data from the canvas
        var data = ctx.getImageData(left, top, width, height).data,
            first = false, 
            last = false,
            r = height,
            c = 0;

        // Find the last line with a non-white pixel
        while(!last && r) {
            r--;
            for(c = 0; c < width; c++) {
                if(data[r * width * 4 + c * 4 + 3]) {
                    last = r;
                    break;
                }
            }
        }

        // Find the first line with a non-white pixel
        while(r) {
            r--;
            for(c = 0; c < width; c++) {
                if(data[r * width * 4 + c * 4 + 3]) {
                    first = r;
                    break;
                }
            }

            // If we've got it then return the height
            if(first != r) return last - first;
        }

        // We screwed something up...  What do you expect from free code?
        return 0;
    }

    ctx.font='32px Arial';
    var start = new Date().getTime();
    var text="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
    for(var x=0;x<1000;x++){
      var height = measureTextHeight(0, 0, canvas.width, canvas.height,text);
    }
    console.log(measureTextHeight(0, 0, canvas.width, canvas.height,text));
    console.log((new Date().getTime()-start));

}); // end $(function(){});
</script>

</head>

<body>
    <div>Stress testing Prestaul's measureTextHeight function...</div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-08-04T03:36:24.427

```
ctx.textAlign = "center";
ctx.textBaseline = "middle"; 
const fix = ctx.measureText("H").actualBoundingBoxDescent / 2; // Notice Here
ctx.fillText("H", convasWidth / 2, canvaseHeight / 2 + fix); 
```

见[codepen 演示](https://codepen.io/189/pen/zYqOLJx?editors=0010)

# class - 关于班级结构的建议

> ID：15582938
> 
> 赞同：0
> 
> 时间：2013-03-23T03:14:49.053
> 
> 标签：class, treeview

我正在寻找有关班级结构的建议。

我正在使用 3 深节点结构填充 TreeView。

```
Parent 1
   Child 1
      Sub-Child 1
      Sub-Child 2
      Sub-Child 3
   Child 2
      Sub-Child 1
      Sub-Child 2
Parent 2
   Child 1
      Sub-Child 1
   Child 2
      Sub-Child 1
      Sub-Child 2 
```

目前我有三个班级父母，孩子，子孩子。每个都有一个列表（< lower_level_class >）。然后我将遍历每个列表以填充树视图。

寻找更有效的方法。

感谢 jlimited

# c++ - 代码有效但在析构函数中崩溃（没有复制构造函数）

> ID：15582940
> 
> 赞同：1
> 
> 时间：2013-03-23T03:15:03.927
> 
> 标签：c++, copy-constructor

所以，基本上，我正在做作业，我有一个包含多项式系数和指数的链表。当不包含复制 c-tor 时，退出 main（析构函数）时代码会崩溃。使用 copy c-tor 它不会发生，但我想知道为什么因为我没有在任何地方明确调用 copy c-tor。这只是一段代码。Coef 函数将带有参数 exp 和 coef 的节点添加到列表中，因此我认为不需要包含它。

```
CPList :: ~CPList ()
{
    while (!isEmpty())
        deleteFromHead();
}

void CPList :: deleteFromHead ()
{
    CPNode* tmp=head;
    if (head==tail)
        head=tail=NULL;
    else head=head->next;
    delete tmp;
}
CPList* CPList :: mul (CPList p1, CPList p2)
{
    CPList* res = new CPList;
    CPNode *first, *second;
    for (first=p1.head; first!=NULL; first=first->next)
        for (second=p2.head; second!=NULL; second=second->next)
            res->coef(first->exp+second->exp, first->coef*second->coef);
    res->check();
    return res;
} 
```

它在这段代码之后的右括号处崩溃。

```
int main ()
{
...
    ptr=p3.mul(p1, p2);
    ptr->printall();
} 
```

当包含 copy c-tor 时，它可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T03:16:52.073

两者`p1`和`p2`都通过值传递到`mul`，因此创建副本，然后在`mul`返回时销毁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T03:44:19.903

```
CPList* CPList :: mul (CPList p1, CPList p2) {//code} 
```

当您按值传递并且尚未实现默认复制构造函数时 - 为*简单（内置类型）创建对象的***浅表副本**（这意味着简单地复制成员的所有值）， 但如果您有*成员在像指针*或引用&*这样的类中，它们的值被复制，这是不好的，因为： 例如：

 **```
class A
{
A(){new m_pOnInt};
~A(){delete m_pOnInt};
int* m_pOnInt;
}

void someFunction(A objA); 
```

当您调用 someFunction(objA) - 提供的 A 实例的临时副本被创建并推送到堆栈中，
在函数将控制权返回给调用者之后，对堆栈中的所有对象调用函数析构函数，因此调用 ~objA()；但是您仍然有作为参数提供给 someFunction 的类 A 的实例，但是应用了无效的 m_pOnInt 作为删除运算符，因此当调用 A 的实例的析构函数时出现问题

解决方案使用**“3 规则”**：这表示当您处理复杂对象时（包含指针/引用等成员的对象 - 实现特殊的成员函数：**复制构造函数、赋值运算符、构造函数**，它允许您执行深度复制。**

# java - Java Double vs double：类类型 vs 原始类型

> ID：15582944
> 
> 赞同：17
> 
> 时间：2013-03-23T03:15:37.397
> 
> 标签：java, performance, class, double, primitive

我很好奇 Java 的类和 double 的原始类型之间的性能差异是什么。所以我创建了一个小基准，发现类类型比原始类型慢 3 到 7 倍。（本地机器 OSX 上 3x，ideone 上 7x）

这是测试：

```
class Main {
    public static void main(String args[]) {
        long bigDTime, littleDTime;

        {
            long start = System.nanoTime();
            Double d = 0.0;
            for (Double i = 0.0; i < 1432143.341; i += 0.1) {
                d += i;
            }
            long end = System.nanoTime();
            bigDTime = end - start;
            System.out.println(bigDTime);
        }

        {
            long start = System.nanoTime();
            double d = 0.0;
            for (double i = 0.0; i < 1432143.341; i += 0.1) {
                d += i;
            }
            long end = System.nanoTime();
            littleDTime = end - start;
            System.out.println(littleDTime);
        }

        System.out.println("D/d = " + (bigDTime / littleDTime));
    }
} 
```

[http://ideone.com/fDizDu](http://ideone.com/fDizDu)

那么为什么 Double 类型会慢很多呢？为什么它甚至被实现为允许数学运算符？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-23T03:21:04.047

> 那么为什么 Double 类型会慢很多呢？

因为值被包装在一个需要分配、释放、内存管理以及 getter 和 setter 的对象中

> 为什么它甚至被实现为允许数学运算符？

因为 autobox 旨在允许您使用此类包装器，而不必担心它们不是普通值这一事实。你宁愿不能拥有一个`ArrayList<Double>`吗？性能**并不总是**必要的，根据情况将性能降低 3 到 7 倍是可以接受的。优化是一项并不总是存在的要求。

在任何情况下都是如此，使用`LinkedList`随机访问元素可能是矫枉过正，但这并不意味着根本`LinkedList`不应该实现。这也不意味着使用链表进行少量随机访问会严重影响性能。

**最后一点**：在对此类事物进行基准测试之前，您应该让 VM 预热。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-23T03:26:19.080

您通常不会使用`Double`,`Integer`等。（有时`Integer`etc. 可用于存储“可选”值 - 您`null`有时可能希望使用它。这是不太可能的，`Double`因为`NaN`它们可用。）

存在的理由`Double`如下。Java 有两种主要的值类型：对象（本质上就像没有算术的 C/C++ 指针）和原始值（例如`double`）。类 like`ArrayList`可以定义为接受 any `Object`，这允许用户存储`String`，`File`或他们喜欢的任何东西 - 但原始值 like`double`不在这样的定义中。所以像这样的类的存在是为了让像存储s`Double`这样的类更容易，而不需要作者为所有原始类型创建特殊版本。`ArrayList``double``ArrayList`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-23T03:26:00.130

`Double`是盒装的`double`。因此，通常编译后的代码必须`Double`在对其进行任何操作之前检查是否为 null。这当然比什么都不做要慢。

`Double`（以及原语的其他盒装版本）很有用，因为它是一个`Object`. 这允许您将它传递给需要 a 的函数，并将`Object`其转换回`Double`其他地方。更有用的是，它允许泛型类型包含它：泛型类型不能包含`double`或任何其他原语，但它可以包含`Double`.

# android - APP给出错误并停止在android上工作

> ID：15582946
> 
> 赞同：0
> 
> 时间：2013-03-23T03:15:53.530
> 
> 标签：android

我检查了 alert.class 以找到错误，因为 logcat 文件在启动 alert.class 活动时显示错误，但我找不到任何错误。
这是代码：

```
public class alert extends Activity 
{
    Button button1;
    Button button2;

public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.alert);
    button1 = (Button) findViewById(R.id.button1);
    button2 = (Button) findViewById(R.id.button2);

    button1.setOnClickListener(new OnClickListener()
    {
        public void onClick(View v1) 
        { 
        setContentView(R.layout.set);
        Intent myIntent = new Intent(getApplicationContext(), set.class);
        startActivity(myIntent);

        }
    });
    button2.setOnClickListener(new OnClickListener()
    {
        public void onClick(View v1) 
        {
            setContentView(R.layout.set);
            Intent myIntent = new Intent(getApplicationContext(), set.class);
            startActivity(myIntent);
        }
    });
} 
```

}

这是日志猫：

```
03-23 08:28:28.239: E/AndroidRuntime(463): FATAL EXCEPTION: main
03-23 08:28:28.239: E/AndroidRuntime(463): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.indianic.demo.calendark/com.indianic.demo.calendark.alert}: java.lang.NullPointerException
03-23 08:28:28.239: E/AndroidRuntime(463):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
03-23 08:28:28.239: E/AndroidRuntime(463):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
03-23 08:28:28.239: E/AndroidRuntime(463):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-23 08:28:28.239: E/AndroidRuntime(463):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
03-23 08:28:28.239: E/AndroidRuntime(463):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-23 08:28:28.239: E/AndroidRuntime(463):  at android.os.Looper.loop(Looper.java:123)
03-23 08:28:28.239: E/AndroidRuntime(463):  at android.app.ActivityThread.main(ActivityThread.java:3683)
03-23 08:28:28.239: E/AndroidRuntime(463):  at java.lang.reflect.Method.invokeNative(Native Method)
03-23 08:28:28.239: E/AndroidRuntime(463):  at java.lang.reflect.Method.invoke(Method.java:507)
03-23 08:28:28.239: E/AndroidRuntime(463):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-23 08:28:28.239: E/AndroidRuntime(463):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-23 08:28:28.239: E/AndroidRuntime(463):  at dalvik.system.NativeStart.main(Native Method)
03-23 08:28:28.239: E/AndroidRuntime(463): Caused by: java.lang.NullPointerException
03-23 08:28:28.239: E/AndroidRuntime(463):  at com.indianic.demo.calendark.alert.onCreate(alert.java:37)
03-23 08:28:28.239: E/AndroidRuntime(463):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-23 08:28:28.239: E/AndroidRuntime(463):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
03-23 08:28:28.239: E/AndroidRuntime(463):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T04:54:22.233

```
 button1.setOnClickListener(new OnClickListener()
{
    public void onClick(View v1) 
    { 
       // dont set layout here
    Intent myIntent = new Intent(getApplicationContext(), set.class);
    startActivity(myIntent); // after starting activity set.java it will create layout it self

    }
});
button2.setOnClickListener(new OnClickListener()
{
    public void onClick(View v1) 
    {

        Intent myIntent = new Intent(getApplicationContext(), set.class);
        startActivity(myIntent);
    }
}); 
```

# vb.net - 在 Visual Basic 中需要我的 Array 的帮助，无法正确添加

> ID：15582952
> 
> 赞同：-3
> 
> 时间：2013-03-23T03:17:35.557
> 
> 标签：vb.net

点击“选择媒体和预计资金”后，查看“所需机构数量”的结果。然后从左侧的代理列表框中选择代理的名称，然后单击“添加代理”。单击“添加机构：”按钮时，所选机构的名称应出现在机构列表旁边的列表框中。这是代理列表，应该在左侧的代理列表框中输入。

U-Ad ($350), Striker ($190), NewAd ($250), Samson ($530), J & R ($420), Victory ($120)。

单击“添加机构：”按钮时，计算的估计成本结果应显示在“总估计成本”旁边的文本框中。例如，如果您选择“U-Ad”和“Samson”，则总估计成本为 880.00 美元；当您单击“添加代理”时，结果应该会出现：当您添加更多代理时，应该更新这样计算的估计成本。

```
Public Class Form1

Private Sub btnMediaEstimatedFund_Click(sender As Object, e As EventArgs) Handles btnMediaEstimatedFund.Click

    Dim interestRate, balance, initialBalance As Double

    txtBoxEstimatedBudget.Enabled = False
    txtBoxAgenciesNeeded.Enabled = False

    If radButtonTraditional.Checked Then

        txtBoxAgenciesNeeded.Text = 3

    ElseIf radButtonEMedia.Checked Then

        txtBoxAgenciesNeeded.Text = 2

    End If

    If checkBoxSavings.Checked Then

        interestRate = 0.07

    ElseIf checkBoxCorporate.Checked Then

        interestRate = 0.05

    ElseIf checkBoxCorporate.Checked And checkBoxSavings.Checked Then

        interestRate = 0.05 * 0.07

    End If

    initialBalance = InputBox("Please Enter a balance between $500.00 and $3000.00")

    If initialBalance > 3000 Then

        InputBox("Please enter a number equal to or below $3000.00 and no less than $500.00")

    ElseIf initialBalance < 500 Then

        InputBox("Please enter a number equal to or above $500.00 and no more than $3000.00")

    Else

        balance = initialBalance * (1 + interestRate)
        txtBoxEstimatedBudget.Text = balance

    End If

End Sub

Private Sub btnAddAgencies_Click(sender As Object, e As EventArgs) Handles btnAddAgencies.Click

    Dim dict As Dictionary(Of String, Integer) = New Dictionary(Of String, Integer)()
    dict.Add("U-Ad", 350)
    dict.Add("Striker", 190)
    dict.Add("New Ad", 250)
    dict.Add("Samson", 530)
    dict.Add("J & R", 420)
    dict.Add("Victory", 120)

    Dim selectedItems = (From i In lstBoxAgenciesList.SelectedItems).ToArray()
    Dim total As Integer = 0

    For Each selectedItem In selectedItems

        lstBoxSelectedList.Items.Add(selectedItem)
        lstBoxAgenciesList.Items.Remove(selectedItem)

        total += dict(selectedItem)

    Next

    txtBoxEstimatedCost.Text = total.ToString()

End Sub

Private Sub btnGenerateReport_Click(sender As Object, e As EventArgs) Handles btnGenerateReport.Click

    Dim employeeLevel, year, selectedMedia, numberOfAgencies As String
    Dim today As Date

    today = CStr(dtpToday.Text)
    Name = CStr(txtBoxCreator.Text)
    employeeLevel = CStr(lstBoxResults.Text)
    year = CStr(lstBoxResults.Text)
    selectedMedia = CStr(lstBoxResults.Text)
    numberOfAgencies = CStr(txtBoxAgenciesNeeded.Text)

    dtpToday.Text = FormatDateTime(today, DateFormat.ShortDate)

    If radButtonManager.Checked Then

        employeeLevel = "Manager"

    ElseIf radButtonStaff.Checked Then

        employeeLevel = "Staff"

    End If

    If radButton2015.Checked Then

        year = "2015"

    ElseIf radButton2016.Checked Then

        year = "2016"

    ElseIf radButton2017.Checked Then

        year = "2017"

    End If

    If radButtonTraditional.Checked Then

        selectedMedia = "Traditional Media (TV, Radio)"

    ElseIf radButtonEMedia.Checked Then

        selectedMedia = "New e-Media (SNS, e-Mail)"

    End If

    lstBoxResults.Items.Add("=======================================")
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add("Date : " & today)
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add("Reporting Entity : " & Name)
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add("Level of Employee :  " & employeeLevel)
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add("=======================================")
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add("Year" & " " & year & " " & "Budget of Advertising Report")
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add("=======================================")
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add("Total Estimated Cost : " & FormatCurrency(txtBoxEstimatedCost.Text))
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add("Total Estimated Budget : " & FormatCurrency(txtBoxEstimatedBudget.Text))
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add("Selected Media : " & selectedMedia)
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add("Number of Agencies Involved : " & numberOfAgencies)
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add("=======================================")

End Sub 
```

结束类

修改后的代码！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T03:34:11.080

我更喜欢[List(Of T)](http://www.google.com/url?sa=t&rct=j&q=list%28of%20t%29&source=web&cd=1&cad=rja&ved=0CDIQFjAA&url=http%3A%2F%2Fmsdn.microsoft.com%2Fen-us%2Flibrary%2F6sh2ey19.aspx&ei=2SJNUa_wOqXDyQGds4H4Aw&usg=AFQjCNEDl4T3WgLBndZ1pncFdqEW4rkuog&bvm=bv.44158598,d.aWc)到数组。我使用了 Integer，因为它似乎不需要 Double 类型。

```
Dim myList As New List(Of Integer)
myList.Add(350)' etc...
'add the items
Dim total as Integer = myList.Sum() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T03:41:32.443

这是 Windows 窗体吗？我将假设它是的，尽管它可以通过一些工作转移到 WebForms 上下文中。

我假设您的 ListBox 只是充满了字符串。如果是这样，那么您可以设置如下：

```
 Dim dict As Dictionary(Of String, Integer) = New Dictionary(Of String, Integer)()
    dict.Add("U-AD ($350)", 350)
    dict.Add("Striker ($190)", 190)
    dict.Add("New Ad ($250)", 250)
    dict.Add("Samson ($530)", 530)
    dict.Add("J & R ($420)", 420)
    dict.Add("Victory ($120)", 120) 
```

The [Dictionary](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx) is a great collection to know, BTW.

Then, instead of your current code you could do something like:

```
Dim selectedItems = (From i In lstBoxAgenciesList.SelectedItems).ToArray()
Dim total As Integer = 0

For Each selectedItem In selectedItems
    lstBoxSelectedList.Items.Add(selectedItem)
    lstBoxAgenciesList.Items.Remove(selectedItem)
Next

For Each item in lstBoxSelectedList.Items
    total += dict(item)
Next

txtBoxEstimatedCost.Text = total.ToString(); 
```

Note the difference from your code where we cherry-pick the things to add out of the dictionary rather than try to add the entire list (which is what `While (p < list.Length())` would do). Also, we just assign the `Text` of `txtBoxEstimatedCost` once whereas in your loop it updates at each iteration, which is probably not needed since you only should display the final value.

**Note** that this isn't the best way to do this and you may be better served following an example like [here](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.displaymember.aspx) using the DisplayMember and ValueMember properties.

This makes adding to your list a little harder because you have to add a more complex type (i.e. a class you create) rather than just a String but in the long run I think it is a better approach.

# sockets - 并发 sctp 读取线程和非阻塞模式

> ID：15582953
> 
> 赞同：1
> 
> 时间：2013-03-23T03:17:43.220
> 
> 标签：sockets, concurrency, network-programming, sctp

来自 sctp 套接字的并发读取是线程安全的。SCTP 堆栈可能使用一些同步原语（例如互斥锁）来实现它。我的问题是（sctp）套接字是否处于非阻塞模式。如果 sctp 代码无法立即获得锁定或仅在套接字的缓冲区已满时阻塞，读取是否会返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T03:50:34.350

如果套接字处于非阻塞模式，它应该阻塞直到获取互斥体，然后执行当前缓冲区状态指示的任何`recvmsg()`操作，然后返回。由于没有任何阻塞，因此互斥锁暂时阻塞并不重要。这与使用 TCP 或 UDP 的情况没有什么不同。非阻塞合约就是不阻塞等待*数据。*

# python - 如何暂停 pylab 图形，直到按下键或单击鼠标？

> ID：15582956
> 
> 赞同：14
> 
> 时间：2013-03-23T03:18:37.910
> 
> 标签：python, matplotlib

我正在尝试使用 pylab 和 networkx 编写动画模拟。模拟并不是一直都很有趣，所以大多数时候我希望它快速运行，但是，我希望能够暂停它并在它看起来有趣时查看它。暂停屏幕直到按键将解决我的问题，因为我可以按我想要的快/慢按键。

这是一个示例情况：

```
import numpy as np
import networkx as nx
import pylab as plt
import sys

def drawGraph(matrix):
    plt.clf()
    G = nx.DiGraph(np.array(matrix))
    nx.draw_networkx(G)
    plt.draw()

    plt.pause(1) #I want this pause to be replaced by a keypress
    #so that it pauses as long as I want

A=[[0,1],[1,0]]
B=[[0,1],[0,0]]
x=1
while True:
    if x==1:
        drawGraph(A)
        x=0
    else:
        drawGraph(B)
        x=1 
```

我应该如何重写 plt.pause(1) 行，以便程序暂停直到按键？

其他线程中建议的一些方法会暂停程序，但图片会消失或不更新。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2014-11-21T22:53:39.110

有什么理由不使用waitforbuttonpress()吗？

```
import matplotlib.pyplot as plt

A=[[0,1],[1,0]]
B=[[0,1],[0,0]]
x=1
while True:
    if x==1:
        drawGraph(A)
        x=0
    else:
        drawGraph(B)
        x=1
    plt.waitforbuttonpress() 
```

正如它所说，这将等待按键或按钮按下以发生某些事情。如果您想了解有关事件的更多信息，它会返回值。好简单。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-23T04:45:57.497

以下代码通过*单击鼠标*停止并重新启动。它使用“TKAgg”后端：

```
import numpy as np
import networkx as nx
import matplotlib
matplotlib.use("TkAgg")

import pylab as plt
plt.ion()

fig = plt.figure()

pause = False

def onclick(event):
    global pause
    pause = not pause

fig.canvas.mpl_connect('button_press_event', onclick)

def drawGraph(matrix):
    fig.clear()
    G = nx.DiGraph(np.array(matrix))
    nx.draw_networkx(G)
    plt.draw()

A=[[0,1],[1,0]]
B=[[0,1],[0,0]]
x=1
while True:
    if not pause:
        if x==1:
            drawGraph(A)
            x=0
        else:
            drawGraph(B)
            x=1
    fig.canvas.get_tk_widget().update() # process events 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T03:51:51.157

您可以等到用户按下回车键`raw_input()`。

为了显示图表，`plt.ion()`应在导入后添加。

我认为没有任何简单的独立于平台的方法可以等待在 Python 中按下某个键，但如果 Enter 还不够，您可能需要检查一下。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-09T04:18:17.330

plt.waitforbuttonpress() 只要按下一个键或单击鼠标，就会退出非活动状态。但是，如果按下键盘键，则该函数返回 True，如果单击鼠标，则返回 False。

要保持绘图直到按下键盘键：

```
keyboardClick=False
while keyboardClick != True:
    keyboardClick=plt.waitforbuttonpress() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-18T12:28:29.043

你可以`plt.pause(1)`用`drawGraph()``plt.ginput()`

检查[文档](https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.ginput.html)。

*matplotlib.pyplot.ginput(n=1, timeout=30, show_clicks=True, mouse_add=<MouseButton.LEFT: 1>, mouse_pop=<MouseButton.RIGHT: 3>, mouse_stop=<MouseButton.MIDDLE: 2>)*

> 阻止与图形交互的调用。
> 
> 等到用户在图上点击*n*次，并以列表的形式返回每次点击的坐标。

# python - 是否只有一个 Python 解释器执行多个并发脚本？

> ID：15582962
> 
> 赞同：2
> 
> 时间：2013-03-23T03:19:04.930
> 
> 标签：python, linux, rest, concurrency, parallel-processing

我有一个 Python 脚本，它使用 REST API 将 4GB 的数据以 10MB 的块发送到服务器。无论我同时调用多少个这些脚本，我都会得到完全相同的客户端整体吞吐量（10Gb 网络，服务器类系统）：

1 次调用 = 300MB/s

2 次调用 = 300MB/s

4 次调用 = 300MB/s

8 次调用 = 300MB/s

起初我认为这是某种磁盘读取限制，但我修改了脚本，使其不需要访问硬盘驱动器并使用最少的内存，而且我仍然获得完全相同的吞吐量。执行期间的 CPU 和内存使用率极低。

进一步研究，我读到 Python 解释器是单线程的。这很好（我猜是有道理的），但是是否有可能一次只调用一个 Python 解释器的实例，尽管同时调用了多个 Python 脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T03:31:56.840

不，单独执行的多个 python 进程不会共享线程或任何其他状态。

最可能的情况是 300MB/s 是您的客户端可以支持的最快速度，或者是您的服务器可以支持的最快速度。

300MB/s 非常快，以至于我想知道您是否没有将兆字节与兆比特混淆。

# java - 无法在 libgdx 中加载渐进式 jpeg 图像

> ID：15582975
> 
> 赞同：3
> 
> 时间：2013-03-23T03:20:53.437
> 
> 标签：java, android, opengl-es, libgdx, tmx

这是我的来源

```
package com.effect.bio;

import com.badlogic.gdx.ApplicationListener;
import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.Input;
import com.badlogic.gdx.graphics.GL10;
import com.badlogic.gdx.graphics.Mesh;
import com.badlogic.gdx.graphics.OrthographicCamera;
import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.graphics.g2d.Sprite;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;
import com.badlogic.gdx.maps.tiled.TiledMap;
import com.badlogic.gdx.maps.tiled.TiledMapTileLayer;
import com.badlogic.gdx.maps.tiled.TmxMapLoader;
import com.badlogic.gdx.maps.tiled.renderers.OrthogonalTiledMapRenderer;
import com.badlogic.gdx.math.Rectangle;

public class AppController implements ApplicationListener { 
    static final int WIDTH = 480;
    static final int HEIGHT = 320;

    private OrthographicCamera camera;
    private SpriteBatch batch;
    private Texture texture;
    private Sprite sprite;
    private Mesh mesh;
    private Rectangle glViewport;
    private float rotationSpeed;

    TiledMap map;
    TiledMapTileLayer layer;
    OrthogonalTiledMapRenderer renderer;

    @Override
    public void create() {
        float w = Gdx.graphics.getWidth();
        float h = Gdx.graphics.getHeight();

        rotationSpeed = 0.5f;

        map = new TmxMapLoader().load("data/test.tmx");
        layer = (TiledMapTileLayer) map.getLayers().get(0);

        int cols = layer.getWidth();
        int rows = layer.getHeight();

        renderer = new OrthogonalTiledMapRenderer(map, 1/32f);

        camera = new OrthographicCamera(WIDTH, HEIGHT);
        camera.position.set(WIDTH/2, HEIGHT/2, 0);

        glViewport = new Rectangle(0, 0, WIDTH, HEIGHT);
    }

    @Override
    public void dispose() {
    }

    @Override
    public void render() {      
        handleInput();
        GL10 gl = Gdx.graphics.getGL10();

        // Camera --------------------- /
        gl.glClear(GL10.GL_COLOR_BUFFER_BIT);

        gl.glViewport((int) glViewport.x, (int) glViewport.y,
                        (int) glViewport.width, (int) glViewport.height);

        camera.update();
        camera.apply(gl);
    }

    @Override
    public void resize(int width, int height) {
    }

    @Override
    public void pause() {
    }

    @Override
    public void resume() {
    }

    private void handleInput() {
        if(Gdx.input.isKeyPressed(Input.Keys.A)) {
                camera.zoom += 0.02;
        }
        if(Gdx.input.isKeyPressed(Input.Keys.Q)) {
                camera.zoom -= 0.02;
        }
        if(Gdx.input.isKeyPressed(Input.Keys.LEFT)) {
                if (camera.position.x > 0)
                        camera.translate(-3, 0, 0);
        }
        if(Gdx.input.isKeyPressed(Input.Keys.RIGHT)) {
                if (camera.position.x < 1024)
                        camera.translate(3, 0, 0);
        }
        if(Gdx.input.isKeyPressed(Input.Keys.DOWN)) {
                if (camera.position.y > 0)
                        camera.translate(0, -3, 0);
        }
        if(Gdx.input.isKeyPressed(Input.Keys.UP)) {
                if (camera.position.y < 1024)
                        camera.translate(0, 3, 0);
        }
        if(Gdx.input.isKeyPressed(Input.Keys.W)) {
                camera.rotate(-rotationSpeed, 0, 0, 1);
        }
        if(Gdx.input.isKeyPressed(Input.Keys.E)) {
                camera.rotate(rotationSpeed, 0, 0, 1);
        }
}
} 
```

我在资产内的数据文件夹中有 test.tmx 文件和图像。但是，当我尝试运行我的应用程序时，出现以下错误。vector_grass_and_sky_2_by_blackmaddog.jpg 在数据目录中，但是 TmxMapLoader 无法加载文件。除了将图像文件和 tmx 文件放在同一个地方并尝试加载它之外，我还需要做任何其他事情吗？

```
Exception in thread "LWJGL Application" com.badlogic.gdx.utils.GdxRuntimeException: Couldn't load file: data/vector_grass_and_sky_2_by_blackmaddog.jpg
    at com.badlogic.gdx.graphics.Pixmap.<init>(Pixmap.java:140)
    at com.badlogic.gdx.graphics.glutils.FileTextureData.prepare(FileTextureData.java:64)
    at com.badlogic.gdx.graphics.Texture.load(Texture.java:175)
    at com.badlogic.gdx.graphics.Texture.create(Texture.java:159)
    at com.badlogic.gdx.graphics.Texture.<init>(Texture.java:133)
    at com.badlogic.gdx.graphics.Texture.<init>(Texture.java:126)
    at com.badlogic.gdx.maps.tiled.TmxMapLoader.load(TmxMapLoader.java:106)
    at com.badlogic.gdx.maps.tiled.TmxMapLoader.load(TmxMapLoader.java:88)
    at com.effect.bio.AppController.create(AppController.java:41)
    at com.badlogic.gdx.backends.lwjgl.LwjglApplication.mainLoop(LwjglApplication.java:130)
    at com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:110)
Caused by: java.io.IOException: couldn't load pixmap progressive jpeg
    at com.badlogic.gdx.graphics.g2d.Gdx2DPixmap.<init>(Gdx2DPixmap.java:57)
    at com.badlogic.gdx.graphics.Pixmap.<init>(Pixmap.java:138)
    ... 10 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T03:41:40.743

这部分异常看起来很相关：

```
Caused by: java.io.IOException: couldn't load pixmap progressive jpeg 
```

Libgdx 不支持渐进式 JPEG 图像： [https ://code.google.com/p/libgdx/issues/detail?id=761](https://code.google.com/p/libgdx/issues/detail?id=761)

渐进式 jpeg 是专为在 Internet 上使用而设计的，其设置使得部分下载将提供有用的图像，并且随着下载更多信息它会逐渐变得更好（与您需要大部分图像的标准 jpg 相比）在您可以显示整个图像之前）。对于桌面或 Android 应用程序来说，渐进式支持并不是真正需要的。您应该能够使用大多数图像编辑软件将此文件转换为常规 jpeg。

# java - 如何在不睡觉或询问用户的情况下明确确认用户已授权 Dropbox 应用？

> ID：15582977
> 
> 赞同：1
> 
> 时间：2013-03-23T03:21:06.033
> 
> 标签：java, dropbox-api

我正在用 Java 编写一个简单的 Dropbox 程序来上传文件。这是我正在使用的特定代码，它创建了与 Dropbox 帐户的连接。下面的代码仅在用户第一次运行应用程序时运行。之后，将`AccessTokenPair`保存以供后续运行使用。

```
AppKeyPair appKeys = new AppKeyPair(APP_KEY, APP_SECRET);
WebAuthSession session = new WebAuthSession(appKeys, ACCESS_TYPE);
dropbox = new DropboxAPI<WebAuthSession>(session);    

try {
  if (!STATE_FILE.exists()) {
    STATE_FILE.createNewFile();
    WebAuthInfo authInfo = session.getAuthInfo();
    RequestTokenPair pair = authInfo.requestTokenPair;
    String url = authInfo.url;
    URI confirmAddress = new URI(url);
    Desktop desktop = Desktop.getDesktop();
    desktop.browse(confirmAddress);
    boolean authenticated = false;
    while (!authenticated) {
        try {
            session.retrieveWebAccessToken(pair);
            authenticated = true;          
        } catch (DropboxException dbe) {
            io.tellUser("Waiting for user authentication...");
            Thread.sleep(4000);

        }
    }

    AccessTokenPair tokens = session.getAccessTokenPair();
    State state = new State(STATE_FILE);
    state.save(tokens); 
```

它似乎工作正常，但我对检查身份验证的方式持谨慎态度。上面的代码将在用户的默认浏览器中打开一个指向他/她的 Dropbox 帐户的链接，以允许访问此应用程序。`session.retrieveWebAccessToken(pair)`将抛出`DropboxException`if 访问未被允许。所以程序基本上检查并捕获异常，然后一遍又一遍地休眠，直到被授予访问权限。我想找到一种无需等待和检查即可完成此任务的方法。除了上面实现的方法之外，我还尝试了自旋锁/忙锁并要求用户在授权此应用程序后按下按钮`sleep()`。我宁愿不要求用户干预。在阅读了一些 Dropbox API 之后，我了解到在构造`WebAuthInfo`反对，但我不确定如何使它工作，因为我的应用程序不是网络应用程序。有谁知道如何将该回调用于我的目的或任何其他想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:13:07.780

除了显示的尝试/等待方案之外，还有其他一些方法可以处理此流程。

最好的，但也是最困难的：在 /authorize 上使用 oauth_callback 参数以及为您的应用注册的自定义 URL 方案。这将在授权后自动将用户重定向到您的应用程序，您的应用程序可以检测到然后恢复流程。

否则，您可以等到用户将“焦点”返回给您的应用程序，然后自动尝试，或者让他们告诉您的应用程序然后手动尝试。

# jquery - jQuery 添加的元素对 .click(function() 的响应很奇怪

> ID：15582980
> 
> 赞同：3
> 
> 时间：2013-03-23T03:21:35.017
> 
> 标签：jquery, bind

我有一个[JsFiddle](http://jsfiddle.net/U2E3Y/4/)来解决我要解决的问题。

本质上，我有一组复选框。我还有一个字段可让您将复选框项目添加到该集合中。最后，我有向上和向下箭头，可让您更改排序顺序。

我遇到的问题是添加到集合中的项目反应奇怪。当我单击以将这些项目向上移动时，它们会跳到集合的顶部。我[查看了这个链接](https://stackoverflow.com/questions/4369908/jquery-functions-not-responding-after-append)并找到了很好的信息，但仍然无法解决问题。

代码如下。我很感激你能提供的任何建议！

HTML

```
<div id="main">
    <div id="addbox">
        <p>Enter value:
            <br>
            <input id="Text1" type="text" size="38">
            <input id="Button3" type="submit" value="+">
        </p>
    </div>
    <div id="selectbox">
        <p>You can also select from these:</p>
        <div id="mobilecb">
            <div class="cbholder">
                <div class="cbitem" id="cbitem-1-id">
                    <input type="checkbox" checked="" class="thecb" value="1" name="collection[]">1</div>
                <div class="cbup"></div>
                <div class="cbdown"></div>
            </div>
            <div class="cbholder">
                <div class="cbitem" id="cbitem-2-id">
                    <input type="checkbox" checked="" class="thecb" value="1" name="collection[]">2</div>
                <div class="cbup"></div>
                <div class="cbdown"></div>
            </div>
            <div class="cbholder">
                <div class="cbitem" id="cbitem-3-id">
                    <input type="checkbox" checked="" class="thecb" value="1" name="collection[]">3</div>
                <div class="cbup"></div>
                <div class="cbdown"></div>
            </div>
        </div>
    </div>
</div> 
```

CSS

```
#main {
    width:400px;
}
.cbholder {
    border: 1px solid #ccc;
}
}
.cblocation {
    float:left;
    margin: 10px 10px 10px 0px;
    width:80%;
}
.cbdown {
    border-color: black transparent transparent;
    border-style: solid;
    border-width: 11px 7px 10px;
    float: right;
    margin-top:0px
}
.cbup {
    border-color: transparent transparent black !important;
    border-style: solid;
    border-width: 11px 7px 10px;
    float: right;
    margin: 0px 4px 0px 20px;
}
#mobilecb {
    clear:both;
    display:inline-block!important;
    text-align:left;
    float:left;
    background:#fff;
    font-size:.8em;
    border:1px solid #000;
}
.cbholder {
    margin: 20px 0 0px 0;
} 
```

jQuery (1.4.1)

```
 $('#Button3').click(function () {
     $('#mobilecb').append('<div class="cbholder"><div class="cbitem"><input type="checkbox"    checked="" class="thecb" value="' + $('#Text1').val() + '" name="collection[]">' + $('#Text1').val() + '</div><div class="cbup"></div><div class="cbdown"></div>   </div>')
         .bind("click", function (e) {
         $('.cbup').click(function () {
             var parent = $(this).parent();
             parent.insertBefore(parent.prev());
         });
         $('.cbdown').click(function () {
             var parent = $(this).parent();
             parent.insertAfter(parent.next());
         });
     });
 });

 $('.cbup').click(function () {
     var parent = $(this).parent();
     parent.insertBefore(parent.prev());
 });
 $('.cbdown').click(function () {
     var parent = $(this).parent();
     parent.insertAfter(parent.next());
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T03:26:53.493

如何使用可排序的 Jquery UI。[http://jqueryui.com/sortable/](http://jqueryui.com/sortable/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T03:52:41.823

[在http://jsfiddle.net/U2E3Y/10/](http://jsfiddle.net/U2E3Y/10/)上解决。`$('#mobilecb')`您已经使用 click 事件限制了父元素。

# ios - 获取由 UIView 的 animateWithDuration 创建的动画的引用或通过任何其他方式识别它

> ID：15582988
> 
> 赞同：4
> 
> 时间：2013-03-23T03:23:14.907
> 
> 标签：ios, objective-c, uiview, core-animation

假设我制作了这样的动画：

```
[UIView animateWithDuration:0.5
                      delay:0.0
                    options:UIViewAnimationOptionCurveEaseInOut
                 animations:^{
                               someView.frame = CGRect(0, 100, 200, 200);
                             }
                 completion:nil]; 
```

假设我在*someView*中有子视图，它们的*layoutSubviews*方法被覆盖。我想在该*layoutSubviews*中识别一个正在进行的动画，并根据我检测到的动画是由我创建的，还是例如由设备旋转引起的动画来做出相应的操作。

为了获得正在进行的动画，我使用以下代码：

```
for (NSString *animationKey in [self.layer animationKeys])
{
    CAAnimation *animation = [self.layer animationForKey:animationKey];
    // ... Do something ...
} 
```

现在，如果我要使用*CABasicAnimation*，我可以使用以下方法设置任意属性：

```
[myAnimation setValue:@"mySuperCoolAnimation" forKey:@"AnimationName"]; 
```

然后检查另一边的那个钥匙。但由于我的视图层次结构复杂，我想避免使用*CABasicAnimation 。*

所以为了简单起见，有没有办法使用*UIView animateWithDuration 来做类似的事情：*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T16:39:39.790

你能举个旗子说你的动画正在进行中，然后在完成块中降低它吗？

或者使用当前的 CATransaction 来存储任意键，就像您对 CABasicAnimation 所做的那样？一个鲜为人知的事实是总有一个 CATransaction，它会在运行循环结束时（在您自己的代码完成后）自动提交并运行动画，然后在完成时选择性地触发一个完成处理程序——也就是说，在事实上，这就是动画的工作原理，正如我在书中解释的那样：

[http://www.aeth.com/iOSBook/ch17.html#_animation_transactions](http://www.apeth.com/iOSBook/ch17.html#_animation_transactions)

（参见特别是“交易的真相”，在该页面的下方。）

这很酷，原因有很多：

*   当前的 CATransaction 可从您的代码中获得，即使您的代码此时与动画无关。

*   您可以进行自己的事务，包装动画并提交它（这可能是您所追求的解决方案；我不太清楚）

*   CATransaction 有一个完成处理程序。我经常使用这个技巧来做一些必须紧跟在我的一个动画之后的事情。

*   CATransaction 在其动画完成后触发其完成处理程序，即使它们不是您的动画；我将此技巧用作延迟性能的一种特殊形式，以等待运行时自己内部生成的动画之一结束。

*   CATransaction 可以存储任意键/值对，就像 CALayer 和 CAAnimation 一样。我经常使用它作为通过事务传递信号的方式，以便在完成处理程序运行时被拾取。

很抱歉在这里没有提出任何具体的解决方案，但我只是建议了解 CATransaction 可能会让您制定出适合您的情况的东西。

# jquery - 鼠标离开内部还是外部鼠标进入？

> ID：15582992
> 
> 赞同：4
> 
> 时间：2013-03-23T03:23:49.310
> 
> 标签：jquery, html, performance

我正在学习 jQuery 的基础知识，当我发现 mouseleave 和 mouseenter 动作时，我开始想知道应该在哪里放置 mouseleave 动作？哪一个更正确并且永远有效？

```
$(document).ready(function(){
    $('div').mouseenter(function(){
        $(this).fadeTo('fast','1');
        $(this).mouseleave(function(){
            $(this).fadeTo('fast','0.25');
        });
    });
}); 
```

或者也许 this1 更好？

```
$(document).ready(function(){
    $('div').mouseenter(function(){
        $(this).fadeTo('fast','1');
        });
        $('div').mouseleave(function(){
            $(this).fadeTo('fast','0.25');
        });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T03:26:24.403

您的第二个选项更正确，它应该一直有一个事件设置。[`mouseleave`](http://api.jquery.com/mouseleave/)您的第一个选项每次触发时都会添加一个新事件[`mouseenter`](http://api.jquery.com/mouseenter/)，从而导致许多附加事件。所以使用：

```
$('div').mouseenter(function () {
    $(this).fadeTo('fast', 'fast');
});
$('div').mouseleave(function () {
    $(this).fadeTo('fast', '0.25');
}); 
```

实际上有一些很好的速记[`.hover(handlerIn, handlerOut)`](http://api.jquery.com/hover/)。

```
$('div').hover(
    function () { $(this).fadeTo('fast', 'fast'); },
    function () { $(this).fadeTo('fast', '0.25'); }
); 
```

# jquery - 建立 Richfaces4 和 Primefaces3.5 但似乎 jQuery 有冲突

> ID：15582993
> 
> 赞同：1
> 
> 时间：2013-03-23T03:23:51.810
> 
> 标签：jquery, jsf, jsf-2, primefaces, richfaces

我用的是Richfaces4，一切看起来都不错。但就在我将以下行添加到我的 pom.xml 之后：

```
<dependency>  
    <groupId>org.primefaces</groupId>  
    <artifactId>primefaces</artifactId>  
    <version>3.5</version>  
</dependency> 
```

当我尝试登录时出现以下错误，似乎“Richfaces”和“jQuery”没有被包含/导入到我的服务器？

```
 $ is not a function
    [Break On This Error]   

    </div><script type="text/javascript">$(document).ready(function() {

    home.seam (line 93)
    RichFaces is not defined
    [Break On This Error]   

    ...="display: none;"><script type="text/javascript">checkUpTime=function() 
    {RichFace... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T03:48:41.457

使用`jQuery.noConflict()`，因为您有与其他库冲突的 jQuery。

> **说明：**放弃 jQuery 对`$`变量的控制。
> 
> 许多 JavaScript 库都使用`$`函数或变量名，就像这样`jQuery`做一样。In `jQuery's`case,`$`只是 的别名`jQuery`，因此所有功能都可以在不使用`$`. 如果您需要同时使用另一个 JavaScript 库`jQuery`，请通过调用 将控制权`$`返回给另一个库`$.noConflict()`。的旧引用在初始化`$`期间被保存；只是恢复它们。`jQuery``noConflict()`

### **[阅读更多](http://api.jquery.com/jQuery.noConflict/)**

**例子**

```
jQuery.noConflict();

// Use jQuery via jQuery(...)
jQuery(document).ready(function()
{
    jQuery("div").hide();
}); 
```

**或者**

```
var $jQ = jQuery.noConflict();

// Use jQuery via $jQ(...)
$jQ(document).ready(function()

{
    $jQ("div").hide();
}); 
```

使用以下技术，它允许我们`$`在代码块内部使用而不覆盖`$`：

```
(function($) { /* some code that uses $ */ })(jQuery) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T20:55:58.270

现在已在 Primefaces 3.5.1 中解决。这被标记为[问题 5219](https://code.google.com/p/primefaces/issues/detail?id=5219)。要查看 PrimeFaces 源代码的变化，请查看[修订版 8796](https://code.google.com/p/primefaces/source/detail?r=8796)。

# c# - 文件路径在用作 ApplicationDataContainer 中的键时是否会引发异常？

> ID：15582996
> 
> 赞同：1
> 
> 时间：2013-03-23T03:24:21.163
> 
> 标签：c#, windows-8, .net-4.5

我尝试使用文件路径（只是一个字符串）作为 ApplicationDataContainer 中的键，但它失败了。有3个不同的问题：

1.  如果密钥是文件路径，即使密钥不存在，容器也会报告密钥存在
2.  如果您尝试添加一个确实存在的文件路径的键，它不会做任何事情。
3.  如果您尝试添加一个不存在的文件路径的键，则会引发异常：

有没有人见过这样的问题，这是预期的行为吗？我找不到任何说明文件路径作为密钥无效的文档，对于我来说，MS 试图采用他们所知道的随机字符串并将其视为文件路径，这对我来说似乎很奇怪。

```
 An unhandled exception of type 'System.Exception' occurred in mscorlib.dll

 WinRT information: Error trying to query the application data container item info

 Additional information: The specified path is invalid. 
```

示例代码：

```
var container = ApplicationData.Current.LocalSettings.CreateContainer("SomeContainerName", ApplicationDataCreateDisposition.Always);
if (container.Values.ContainsKey("C:\\Some_Fake_Path") == false) // This will report as true even though the key is not in the container
      {
        //If you try to run this line it throws an exception that file can not be found even though it is just a key value pair
        container.Values.Add("C:\\Some_Fake_Path", "SomeStuffHere");

        //This line won't throw, but it won't actually add a key/value pair either
        container.Values.Add("C:\\This_Path_Actually_Exists\\SomeFile.txt", "SomeStuffHere");
      } 
```