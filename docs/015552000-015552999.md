# StackOverflow 问答 15552000-15552999

# javascript - IIS 6 js & css 压缩不适用于 Firefox 14.0.1

> ID：15552005
> 
> 赞同：0
> 
> 时间：2013-03-21T15:43:13.110
> 
> 标签：javascript, css, asp.net-mvc-3, compression, iis-6

我想快速完成，但尽管我付出了所有努力，但我无法让它工作，或者我可能遗漏了一些东西或忽略了一些东西！

我是 IIS6 上基于 ASP.Net 的 MVC3 Web 应用程序设置。我已经为inetmgr（IIS管理器）的静态和动态内容压缩设置了简单的IIS压缩。并且还编辑了 IIS 的 Metabase.xml 文件以微调 IIsCompressionScheme 中的 HcFileExtensions（用于 Gzip 和 deflate）。也跟随了许多这样的链接[并](http://www.codinghorror.com/blog/2004/08/http-compression-and-iis-6-0.html)尝试了很多。

但是我无法在使用 Firebug 和 YSlow 的 Firefox 14.0.1 中看到它——它说 js 文件和 css 内容没有被压缩。我有很多 jQuery 和 css。是的，我已经多次重新启动我的 IIS，清除浏览器缓存、ctrl + F5 等...也尝试使用[ZipEnabled](http://www.port80software.com/download/index_detail.asp)。

*还有一件事——CDN 参考是否确保压缩？我的意思是它不是来自我的 IIS，所以我相信它可能不会。*

谢谢。

**SO ref 审查** [-IIS 6 使用通配符应用程序映射时压缩静态文件](https://stackoverflow.com/questions/287703/iis-6-compress-static-files-when-using-wildcard-application-mapping) [Gzip 压缩与 IIS 6 上的 MVC3 问题](https://stackoverflow.com/questions/9752898/gzip-compression-with-mvc3-issue-on-iis-6)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:17:49.600

我必须得出结论，静态和动态内容的 IIS6 压缩**似乎不适**用于 Firefox 14.0.1，因为即使在歌剧中我也使用 Firefox 18+ 压缩了内容（尚未测试 chrome）

我还得出结论，与 IIS6 相比，IIS7 提供了一种管理压缩设置的好方法。

# applescript - 当我只需要来自群组的一封邮件时，如何阻止 AppleScript 选择 Mail.app 对话中的所有邮件？

> ID：15552006
> 
> 赞同：0
> 
> 时间：2013-03-21T15:43:13.410
> 
> 标签：applescript, reminders

这是我的烦恼：我想将电子邮件添加到 Reminders.app 作为待办事项。我想通了那部分。我的下一个目标是能够选择多封电子邮件并让 Reminders.app 为所选的每封电子邮件创建待办事项。我想通了那部分。

问题：当我选择作为对话一部分的电子邮件时，来自该对话的*所有*消息都被添加为单独的提醒/待办事项。这部分可能会令人困惑，但我会尽可能详细地描述我如何选择消息。在 Mail.app 中，我在最右侧的窗格中选择了一条消息，其中作为对话部分的所有电子邮件都显示在可滚动列表中。这是我选择特定消息的区域。因此，即使我从对话中选择了一条消息，该对话中的所有消息都会添加到我的 AppleScript 列表变量中，并且随后会变成提醒/待办事项。

如果我在 Mail.app 中关闭“按对话组织”，问题就会消失。我喜欢通过对话组织我的电子邮件的整洁，所以如果有一个脚本解决这个问题，我更喜欢这条路线。但是，我想不出任何方法来解决这个问题，所以我希望这里有人有一些想法。

这是我的脚本：

```
property defaultList : "Parking Lot"

on newReminder(theBody, theTitle)
    tell application "Reminders"
        tell list defaultList
            make new reminder with properties {body:theBody, name:theTitle}
        end tell
    end tell
end newReminder

tell application "Mail"
    set selectedMessages to {}
    set selectedMessages to selection
    if (count of selectedMessages) is 0 then
        return "Please select a message in Mail.app and try again."
    else
        repeat with i from 1 to (count of selectedMessages)
            tell item i of selectedMessages
                set messageid to message id
                set urlText to "message://" & "%3c" & messageid & "%3e"
                set theSender to extract name from sender
                set theSubject to subject
                my newReminder((theSender & " " & urlText), theSubject)
            end tell
        end repeat
    end if
end tell 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:24:51.127

邮件应用程序的 AppleScript 属性`selection`似乎忽略了对话中的单个消息是否在预览窗格（OS X Lion 布局中最右侧的窗格）中突出显示。这`selection`仅取决于在消息列表（中间窗格）中选择了哪些消息。如果您想`selection`在 AppleScript 中使用单个对话消息，则必须从消息列表中选择单个消息，

![](../Images/9b6912f05ed9d13f30ae108cb09d249c.png)

而不是预览窗格。

![](../Images/b73310a43f7e0feda6f72153c592989a.png)

# salesforce - 从 Apex 访问数据

> ID：15552012
> 
> 赞同：2
> 
> 时间：2013-03-21T15:43:37.410
> 
> 标签：salesforce, apex-code

首先，我只是一个菜鸟，这是我第三天的工作。我创建了一个名为

*   商品

    一个页面，并写了一个类来控制页面，下面是它们的一些细节

1.页面

```
<apex:dataTable border="1px" value="{!searchResults}" var="pitem" rowClasses="odd,even">
          <apex:column headerValue="Product" width="100">
              <apex:outputText value="{!pitem.name}"></apex:outputText>
          </apex:column>
          <apex:column headerValue="  Price" width="70">
              <apex:outputText value="{!pitem.Price__c}"></apex:outputText>
          </apex:column>
          <apex:column headerValue="Unit Price" width="200">
              <apex:outputtext value="{!pitem.Unit_Price__c}"></apex:outputText>
          </apex:column>
          <apex:column headerValue="Unit Price" width="200">
              <apex:outputtext value="{! IF(pitem.Price__c > 15, 'Unit Price is normal','Unit Price is too low')}"></apex:outputText>
          </apex:column>
     </apex:dataTable> 
```

2.班级

```
public class Bo_Test{
    public static integer age = 20;
    public string city{get; set;}
    public string name{get; set;}
    public static List<Merchandise__c> searchResults {get;set;}

   public Bo_Test(){
    searchResults = new List<Merchandise__c>();
    String queryString = 'SELECT Price__c, Name, Unit_Price__c from Merchandise__c';
    searchResults = Database.query(queryString);
    //this.city = "Jersey City";
    //name  = "Bobo";   
}

    public PageReference sayHello(){
        return null;
    } 
} 
```

在页面显示中，没有从 Merchandise 对象显示数据（实际上有很多），是我做错了吗？如何通过编辑顶点类来访问数据？

关键是，到现在我对页面和类之间的关联还是没有概念，是不是调用了默认构造函数？欢迎任何形式的建议！

帮我！我期待着收到你们的来信

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T00:34:17.017

首先，您是否将页面**绑定**到`Bo_Test`控制器？

```
<apex:page controller="Bo_Test"> 
   <apex:dataTable ....... 
```

如果这不是您的问题，请尝试通过以下方式更改您的课程

```
public class Bo_Test{
    public List<Merchandise__c> searchResults {get;set;}

    public Bo_Test(){
        searchResults = [SELECT Price__c, Name, Unit_Price__c from Merchandise__c];
    }
 } 
```

请注意，我已将静态属性删除到 searchResults。

*此外*，不需要此初始化。

```
searchResults = new List<Merchandise__c>(); 
```

# c++ - 类初始化程序错误 - C++

> ID：15552014
> 
> 赞同：0
> 
> 时间：2013-03-21T15:43:47.677
> 
> 标签：c++, class, initialization

我正在尝试在 C++ 中创建一个复数类，但是对于该类的初始化程序，我遇到了一个奇怪的错误，这是错误的屏幕截图：

![在此处输入图像描述](../Images/92b8ccb92ec2fefd2c71b6d02e0a3b14.png)

这是我的代码：

主.cpp：

```
#include <iostream>
#include "cmath"
#include "Complexx.h"

int main(int argc, const char * argv[])
{

complex c(1,1);
std::cout << c.realPart << "+" <<c.imaginaryPart << "i";
return 0;
} 
```

复杂x.h：

```
#ifndef Functions_Complexx_h
#define Functions_Complexx_h
#include "cmath"
using namespace std;

class complex {

public:
double imaginaryPart;
double realPart;
complex(double realPart, double imaginaryPart);
double modulus();
};
#endif 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T15:47:25.797

问题就在这里。

```
complex(double realPart, double imaginaryPart); 
```

你已经*声明*了一个构造函数，但你还没有*定义*它。这就是链接器抱怨的原因`undefined symbol complex::complex(double, double)`

这可能是您想要的*定义*- 将这两个参数存储在对象中。

```
complex(double realPart, double imaginaryPart)
  : realPart(realPart)
  , imaginaryPart(imaginaryPart)
{ } 
```

这些参数的名称无关紧要。C++ 不会推断，因为它们与您的成员变量具有相同的名称，所以它们应该被复制到对象中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T15:46:56.963

尽管提供了声明，但您尚未提供`complex(double, double)`构造函数的定义。这就是链接器所抱怨的。

将此添加到`.cpp`项目中的文件中，该文件是`#include`您的头文件`complexx.h`（可能`complexx.cpp`）：

```
complex::complex(double realPart, double imaginaryPart)
    :
    realPart(realPart),
    imaginaryPart(imaginaryPart)
{ } 
```

可能存在相同的问题`double modulus()`，因为您（还）没有调用它，所以没有发出链接器错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:46:53.327

看来您还没有链接`complex(double, double)`构造函数的定义。这可能是由于您忘记链接`Complexx.cpp`（假设 cpp 文件的名称与头文件的名称相同）或您完全忘记在链接`Complexx.cpp`文件中定义构造函数造成的。

只需在编译 main.cpp 时运行这个 g++ 命令（假设您使用的是 gcc）：

```
g++ -c Complexx.cpp -o Complexx.o
g++ -c main.cpp -o main.o
g++ main.o Complexx.o -o app 
```

# ios - XCode 中的代码签名“调试”或“发布”有什么意义？

> ID：15552016
> 
> 赞同：7
> 
> 时间：2013-03-21T15:43:48.967
> 
> 标签：ios, xcode, security

![代码签名](../Images/c9f3aa4c9634d4d0d7216fcb68f19dde.png)

参考图片，我不明白如果我尝试研究时选择“调试”或“发布”是无用的，那么有什么意义。我们唯一需要签名的是“Any iOS SDK”。我还做了一个二进制差异来检查签名 Debug 和 Release 在 _CodeSignature/CodeResources 文件中是否没有区别。

任何人？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-21T16:44:11.670

要在设备上运行任何应用程序，它需要由授权开发人员签名并包含有效的配置文件（由 Apple 签名），授予在设备上运行的权限。

为了将调试器附加到您的应用程序（或使用仪器），配置文件需要包含允许这样做的权利。

您在门户中生成的“开发”配置文件和证书允许您执行此调试，而发布配置文件（用于应用商店）禁用它。这就是为什么您为一个项目同时拥有“发布”和“调试”配置的原因，每个配置都选择了不同的配置文件/身份对。

“任何 iOS SDK”部分只是根据编译环境进一步更改构建设置的一种方式。例如，您可能希望在模拟器上运行时更改编译器设置（以禁用/启用某些测试功能）。

从技术上讲，签名身份不需要此“任何 iOS SDK”部分，并且默认情况下，当您创建 iOS 项目时，其他任何构建设置都没有此额外字段。你甚至可以删除它，但我不确定 Xcode 是否会正常运行。

# javascript - 如何在用锚 javascript 包裹的 div 中输出我的值

> ID：15552025
> 
> 赞同：0
> 
> 时间：2013-03-21T15:44:22.880
> 
> 标签：javascript

我正在尝试将我的值输出到包裹在锚点中的 div 中。基本上有人输入他想要的高度，它给了他等效的数据表。

我无法弄清楚如何在包含在锚点中的 div 中输出我想要的字符串。

这是我的代码：

```
<form name="test">
<label for="height">Height</label>
    <input type="text" name="height" /><br>
    <label for="width">Width</label>
<input type="text" name="width" /><br>
<label for="depth">Depth</label>
<input type="text" name="depth" /><br>
<label for="load">Load</label>
<input type="text" name="load" /><br>
    <input type="button" onclick="calculate();" value="Calculate" /><br><br>

</form>
<div id="result">
</div>

            <script type="text/javascript">
                        function calculate()
                        {
                            var height = document.test.height.value;
                            if (height <= 525) {
                                var str = "Download your Datasheet 1";

                            }
                            else if (height < 645) {
                                var str = "Datasheet 2";

                            }

                            else if (height > 1265) {
                                var str = "This configuration is beyond the standard range of top-load testers. Please contact Mecmesin Sales to discuss ways to meet your requirements.";
                            }

                            else if (isNaN(height)) {
                              window.alert(height + ' is not a number!');
                              }

                            else {
                                var str = "Datasheet 3";
                            }
                            document.test.result.value = str.anchor();

                        }
            </script> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:53:16.660

您没有正确使用 DOM。

您需要为`height`输入提供一个 ID：

```
<input type="text" id="height" name="height" />
```

```
var height = document.getElementById("height").value;
```

* * *

或者你可以简单地使用：

```
var height = document.getElementsByName("height")[0].value;
```

但我不建议这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:47:41.773

尝试这个：

```
document.getElementById("result").innerHTML = str; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:49:24.723

```
var height = document.test.height.value 
```

这条线没有给你表格中的高度值。

给那个输入一个像'height'这样的id，然后得到它的值，如下所示：

```
var height = document.getElementById('height').value; 
```

您无法像尝试那样将元素作为文档对象的属性访问，您需要使用 document.getElementById 或 document.getElementByTagName 之类的东西来选择它们

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T16:03:29.250

我认为其他人错过了让 div 包含锚点的要点......这表明您需要提供一个 url 以及一个字符串，但是一旦您完成了替换*文档的附加代码。 test.result.value*行应该类似于：

```
// empty out the result div first
var node = document.getElementById('result');
while(node.firstChild) {
    node.removeChild(node.firstChild);
}

// create the anchor DOM object
var a = document.createElement('a');
var linkText = document.createTextNode(str);
a.appendChild(linkText);
a.title = str;
a.href = "http://example.com/"+str+".pdf"; //for example

// attach it to your result node
node.appendChild(a); 
```

如果您不打算在不刷新页面的情况下重用页面，则可以不使用 while 循环。

# java - 通过 IE8 浏览器检查 java 是否启用

> ID：15552034
> 
> 赞同：3
> 
> 时间：2013-03-21T15:44:55.777
> 
> 标签：java, internet-explorer-8

需要帮助查找是否在 IE8 中启用了 java，

我已经使用了 navigator.javaEnabled() ，即使在两个地方都禁用了 java 之后，它也总是给出 true ，例如，

1.  工具 -> Internet 选项 -> 安全 -> 自定义级别 -> Java Applet 脚本。
2.  工具 -> Internet 选项 -> 高级 -> Java (Oracle) -> JRE 1.7.0_17...

你能指导我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:49:33.580

对于 IE8，navigator.javaEnabled() 不会告诉您是否安装了 Java。它只是告诉您小程序标签是启用还是禁用。

可靠地确定是否已安装（并启用）java 的唯一方法是尝试运行一个小程序。所以做一个测试页面，甚至可以在一个隐藏的 iFrame 中。

该页面需要一些 JS，例如：

```
try {
    var x = document.getElementById('appletId').isRunning()
    return x;
} catch(e) {
    return false;
} 
```

然后在 Body 中，添加小程序标签：

```
<applet src=".../yourapplet.jar" id="appletId"> 
```

当然，您的小程序应该实现方法 isRunning（或任何您想调用的方法）。如果你得到 True，java 就在那里并正在运行，否则你会得到一个异常，该异常将被捕获并返回 False。

# c# - 如何捕获互操作异常？

> ID：15552036
> 
> 赞同：2
> 
> 时间：2013-03-21T15:44:58.333
> 
> 标签：c#, exception, interop

我试图在我的 C# 代码中捕获一个互操作异常

```
IEngine engine = null;

try
{
    engine = engineLoader.GetEngineObject(AbbyySdkSerialNumber);
}
catch(System.Runtime.InteropServices.COMException ex)
{
    int i = 0;
} 
```

但它不想跳入 catch 块。有任何想法吗？先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T16:19:43.850

CLR 自动将`HRESULT`from COM 互操作映射到更具体的托管异常，而**不是**`COMException`. 例如，`E_ACCESSDENIED`变成`UnauthorizedAccessException`、`E_OUTOFMEMORY`变成`OutOfMemoryException`等等。

如果`HRESULT`是自定义结果或 CLR 不知道，则运行时会将泛型传递`COMException`给客户端。的`ErrorCode`属性`COMException`包含`HRESULT`值。

有关 COM 互操作的完整讨论，请参阅[高级 COM 互操作性](https://msdn.microsoft.com/en-us/library/bd9cdfyx(v=vs.100).aspx)。

请注意，如果您在 VS 调试器下运行它，则默认情况下，执行将在导致异常的行上停止。它不会跳转到 catch 块，除非您随后进入下一行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T15:46:11.220

如果它肯定抛出异常，那么我敢打赌它实际上并没有抛出您期望的异常类型，即`System.Runtime.InteropServices.COMException`. 我建议添加一个`catch (Exception ex)`子句，`try`以便首先检查我的理智，然后检查正在抛出的*异常*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:59:34.973

我也有同样的例外。它说我的项目 id 是错误的 - 这应该是您将在初始化期间插入到对象中的序列号。

建议：首先检查这个，如果你正在试用，那么如果它没有过期。

当我通过 win 服务运行 SDK 时出现异常。服务作为本地服务启动，由于无法通过 GetEngineObject 创建引擎对象而无法工作。我还尝试通过不同的用户名（进程）创建对象 GetEngineObject，但它没有帮助。问题是为什么我考虑在我的 Visual Studio 中创建控制台应用程序的用户名差异，在那里我将我的代码放入它并在 VS 中以调试模式运行它可以工作！（vs 以我的用户名运行）

我不知道出了什么问题...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-15T14:59:57.307

就我而言，我需要捕获生成的异常的确切类型。它在代码的托管部分中生成了 System.IO.IOException 类型的异常，而在我的非托管代码中，我需要执行 catch(IOException ^)，从而解决了问题。否则，即使使用 catch(Exception ^)，也永远不会捕获到异常。

# file - .htaccess 无法通过 internetters 工作

> ID：15552038
> 
> 赞同：1
> 
> 时间：2013-03-21T15:45:02.020
> 
> 标签：file, .htaccess

我正在尝试设置 .htaccess 文件以重写 url，因此删除 .php 和 .html 等文件扩展名，目前只有 404 错误页面适用于 .htaccess

我试图更改的网址之一的示例是：[http ://www.thinkbrainstormers.co.uk/clients.php](http://www.thinkbrainstormers.co.uk/clients.php)

我正在尝试将其更改为[http://www.thinkbrainstormers.co.uk/clients](http://www.thinkbrainstormers.co.uk/clients)

```
<IfModule mod_expires.c>
ExpiresActive On
ExpiresByType image/jpg "access plus 1 year"
ExpiresByType image/jpeg "access plus 1 year"
ExpiresByType image/gif "access plus 1 year"
ExpiresByType image/png "access plus 1 year"
ExpiresByType text/css "access plus 1 month"
ExpiresByType application/pdf "access plus 1 month"
ExpiresByType text/x-javascript "access plus 1 month"
ExpiresByType application/x-shockwave-flash "access plus 1 month"
ExpiresByType image/x-icon "access plus 1 year"
ExpiresDefault "access plus 2 days"
</IfModule>
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.*)$ $1.html
ErrorDocument 404 /404.html 
```

是 .htaccess 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:50:40.950

您正在倒退：您不会使用重写条件删除扩展名，而是定义将转到具有扩展名的文件的路径。这些行：

```
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

...基本上是在说“如果文件请求带有 .php 扩展名，请使用 .php 扩展名调用它。” 您需要做的是定义路径结构，并将这些结构映射到您要使用的 php 文件。就像是：

```
RewriteRule ^episode/([0-9]+)?$ episode.php?eid=$1 [L] 
```

...这将把`url.com/episode/5`它映射到`episode.php?eid=5`

# vb.net - 如何使用线程加载条 WinForm？

> ID：15552041
> 
> 赞同：0
> 
> 时间：2013-03-21T15:45:09.103
> 
> 标签：vb.net, multithreading, winforms, backgroundworker

我想要一个无限循环进度条，只是为了让用户在长时间加载时可以盯着看。当前，用户将选择要执行的 SQL 查询，结果将显示在另一个包含查询结果的网格视图的 winform 上。我的目标是拥有另一个 winform（加载表单），它上面只有一个进度条，它只是无限填充到结束并一遍又一遍地重置，直到结果表单上的 gridview 完成渲染。我尝试了一个后台工作人员，因为我相信这需要多线程来提高性能，但加载表单永远不会出现。基本上执行计划应该是这样的：

用户单击执行按钮，加载表单上显示进度条（无限循环），执行查询并加载结果表单关闭加载表单上的进度条

上面的执行是从我的主窗体中调用的

```
Private Sub LoadingForm_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    pbSqlCall.Minimum = 0
    pbSqlCall.Maximum = 100
    pbSqlCall.Step = 10
    Dim Counter As Integer = 0
    While Counter < 100
        pbSqlCall.Increment(10)
        Counter += 10
        If Counter = 100 Then
            Counter = 0
            pbSqlCall.Value = 0
        End If
    End While
End Sub

    BackgroundWorker1.RunWorkerAsync()
    ExecuteQuery(Parameters, Queries.Item(ddlQueries.SelectedIndex))
    'Not sure how to close the form using the thread

Private Sub BackgroundWorker1_DoWork(sender As System.Object, e As System.ComponentModel.DoWorkEventArgs) Handles BackgroundWorker1.DoWork
    lf.ShowDialog() 'Load form
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:08:13.040

给定一个名为“Loader”的表单和一个名为“Main”的表单，您可以执行以下操作

装载机：

```
Public Class Loader
    Private Sub Loader_Load(sender As Object, e As EventArgs) Handles MyBase.Load
       pbSqlCall.Style = ProgressBarStyle.Marquee
       pbSqlCall.MarqueeAnimationSpeed = 30
    End Sub
End Class 
```

主要的：

```
Imports System.Threading.Tasks
Public Class Main

    Private Sub DoWork_Click(sender As Object, e As EventArgs) Handles Button1.Click

        Dim lf As New Loader
        lf.Show(Me)

        Task.Factory.StartNew(Sub()
                                  'go get the data for the grid
                                  System.Threading.Thread.Sleep(6000)
                              End Sub) _
                    .ContinueWith(Sub(result As task)
                                      'check the aggregate exception
                                      Dim aex As System.AggregateException = result.Exception
                                      If aex IsNot Nothing Then
                                          MessageBox.Show(String.Format("something bad happened: ", aex.Flatten.Message))
                                      End If

                                      'bind the data to the grid
                                      lf.Close()
                                      lf.Dispose()
                                  End Sub, TaskScheduler.FromCurrentSynchronizationContext)

    End Sub

    Private Sub Main_Load(sender As Object, e As EventArgs) Handles MyBase.Load

    End Sub
End Class 
```

# c# - 连接关闭但我不知道如何打开实体框架

> ID：15552045
> 
> 赞同：0
> 
> 时间：2013-03-21T15:45:18.353
> 
> 标签：c#, entity-framework

我对数据库进行查询，我的 conexion 类中的内容在哪里

```
public class DBConext:DbContext 
{

    public DBConext():base("myconnectionstring")//connection is correctly perfect
    {

    }

    public DbSet<persona> personas{get; set;}
} 
```

在我的班级角色中，我有这个

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.ComponentModel.DataAnnotations.Schema;
using System.ComponentModel.DataAnnotations;
namespace MvcApplication4.Models.accesslayer 
{
    public class persona 
    {

        [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
        public int idCliente { get; set; }
        public string nombre { get; set; }
        public string apellido { get; set; }
        public string ocupacion { get; set; }
    }
} 
```

在我的表格中，我有这个

```
@model MvcApplication4.Models.accesslayer.persona

@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
</head>
<body>
    <div>
        @using(Html.BeginForm()) 
        {
            @Html.TextBoxFor(x=>x.nombre)
            @Html.TextBoxFor(x => x.apellido)
            @Html.TextBoxFor(x => x.ocupacion)
            <input type="submit" value="Enviar" />
        }
    </div>
</body>
</html> 
```

和控制器

```
[HttpPost, ActionName("Index")]
public ActionResult insertar(persona prsn) 
{
    var db = conexion.StringCon;

    db.personas.Add(prsn);
    db.Save();
    return RedirectToAction("Index");
} 
```

但是当我点击提交时，出现一个错误并说：异常详细信息：

```
System.NullReferenceException: Object reference not set to an instance of an object.
Source File: C:\dev\vsprojects\MvcApplication4\MvcApplication4\Controllers\HomeController.cs    Line: 35 
```

究竟在哪里`db.personas.add(persn)`？我不明白。有朋友告诉我数据库关闭了，但我认为实体框架没有打开和关闭。我也尝试过，但没有任何效果。建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:47:31.707

当您想使用您的`Context`时，请执行以下操作：

```
public ActionResult insertar(persona)
{
    using (var context = new DBConext())
    {
        context.personas.Add(persona);
        context.SaveChanges();

        return RedirectToAction("Index");
    }
} 
```

这将打开上下文和所有附属列表，然后您可以在此`using`语句中使用上下文中的任何内容。

# php - PHP curl请求中的参数丢失/损坏

> ID：15552046
> 
> 赞同：1
> 
> 时间：2013-03-21T15:45:22.073
> 
> 标签：php, curl, google-visualization

**更新**：我已经通过使用`file_get_contents`（或其他文件操作，例如`fopen`）而不是 curl 来解决问题，如本示例所示：[https](https://developers.google.com/chart/image/docs/post_requests) ://developers.google.com/chart/image/docs/post_requests 。因此，问题是，为什么 curl 不能 POST 正确的参数而文件操作可以呢？这本质上是在询问 curl 和`file_get_contents`...

### 原来的问题

我在 PHP 中使用 curl 来下载图像。该图像是根据通过 GET 或 POST 传递到[http://chart.googleapis.com/chart](http://chart.googleapis.com/chart)的参数生成的 Google 图像图表 ( [https://developers.google.com/chart/image/](https://developers.google.com/chart/image/) ) 。这是一个示例图表：

[http://chart.googleapis.com/chart?cht=p3&chd=t:60,40&chs=250x100&chl=Hello|World](http://chart.googleapis.com/chart?cht=p3&chd=t:60,40&chs=250x100&chl=Hello%7CWorld)

简单的方法是获取这个 URL，它可以工作。但是，当我尝试获取更长的 URL（图表数据具有更多参数）时，Google Chart 返回了一个 400 页面，显示“格式错误或非法请求”。我将浏览器指向那个较长的 URL 并看到了所需的图表，因此可以验证 URL 中的参数是否正确。

怀疑问题可能是 URL 太长，我使用了 POST。以下是我使用 POST 获取示例图表的方法（完整代码，您可能需要复制并运行）：

```
$postData = array(
  'chl' => 'Hello|World',
  'chs' => '250x100',
  'cht' => 'p3',
  'chd' => 't:60,40',
  'chof' => 'validate'   // turn on the debugging mode
);
$ch = curl_init('http://chart.googleapis.com/chart');
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $postData);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLINFO_HEADER_OUT, 1);
$ret = curl_exec($ch);
$info = curl_getinfo($ch);
echo $info["request_header"];   // check my sent header
echo $ret;   // print out received data, expected: garbled text representing a PNG
curl_close($ch); 
```

然后谷歌图表返回（即使对于这个示例图表）一个 400 页面说“图表 API 请求不包含有效参数”。请注意这里的“有效”一词，与根本没有接收到任何参数时的“图表 API 请求不包含参数”形成对比。因此，谷歌图表一定收到了*一些*参数，但它无法识别它们。

# php - 如何在我的 OS/PHP 上启用 CURLOPT_SSL_VERIFYHOST = 2 支持

> ID：15552052
> 
> 赞同：6
> 
> 时间：2013-03-21T15:45:36.393
> 
> 标签：php, ssl, curl

我一直在本地开发一个站点，该站点针对集中式登录进行身份验证。其中一个步骤是要求我向 https 资源发出 curl 请求以获取访问令牌。

curl 配置的一部分是：

```
 curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);                                         
    //curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE); 
```

如您所见，我注释掉了 CURLOPT_SSL_VERIFYHOST 选项。我已阅读 php.net 和各种博客/stackoverflow（[禁用 CURLOPT_SSL_VERIFYHOST (libcurl/openssl) 的安全后果](https://stackoverflow.com/questions/13740933/security-consequences-of-disabling-curlopt-ssl-verifyhost-libcurl-openssl)）帖子这些选项的含义。

在我的开发机器`CURLOPT_SSL_VERIFYHOST 2`上一直运行良好。我只是使用 ubuntu 12.04 php5 包和 php5-curl 中提供的 vanilla php 安装。

在生产（机架空间云站点）上`CURLOPT_SSL_VERIFYHOST 2`不起作用，这就是为什么我将其更改为 false 以验证这是问题所在。看到我没有明确地在我的本地主机上启用它，我不知道是什么指令/配置选项控制它。

我的意思是“不工作”是在生产中 curl 调用正在返回一个`http_code`of`0`当`VERIFYHOST`设置为`2`. 当我将它设置为它时，`FALSE`它返回一个状态代码`200`

我的问题是：

**如何`SSL_VERIFYHOST`在 linux 机器上启用？**

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T15:49:48.667

对于“2”，您必须确保 SSL 证书中的公用名与正在使用的主机名匹配。这是默认设置，只要您的 SSL 证书是为您使用它的主机名（公用名）适当创建的，就应该是直截了当的。

从 PHP curl_setopt 手册：

> 1 检查 SSL 对等证书中是否存在通用名称。2 检查公用名是否存在，并验证它是否与提供的主机名匹配。在生产环境中，此选项的值应保持为 2（默认值）。

[curl_setopt 的手动输入](http://php.net/manual/en/function.curl-setopt.php)

# node.js - 使用 json post 进行摘要身份验证的 curl 命令

> ID：15552053
> 
> 赞同：1
> 
> 时间：2013-03-21T15:45:45.713
> 
> 标签：node.js, post, curl, express, digest-authentication

（使用 node.js、express、passport-http）

我有一个 POST 路由进行摘要身份验证，尝试应用程序 json 内容类型。

我可以毫无问题地使用摘要访问 GET 路由，并且可以毫无问题地使用基本身份验证访问 POST 路由，但是当我尝试使用摘要身份验证进行 POST 时，我收到 400 - 错误请求。看起来 curl 将内容类型放在初始摘要请求上（内容长度为 0，因此它知道在初始摘要身份验证请求中不发送 json 正文），而我这边（快递）失败了无效的 json（空体）：

```
$ curl  -v --digest  -X POST --data @body.json --user org2user2:lameduck -H "content-type: application/json"  http://127.0.0.1:3002/user

* About to connect() to 127.0.0.1 port 3002 (#0)
*   Trying 127.0.0.1...
* connected
* Connected to 127.0.0.1 (127.0.0.1) port 3002 (#0)
* Server auth using Digest with user 'org2user2'
> POST /user HTTP/1.1
> User-Agent: curl/7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8r zlib/1.2.5
> Host: 127.0.0.1:3002
> Accept: */*
> content-type: application/json
> Content-Length: 0
> 
< HTTP/1.1 400 Bad Request
< X-Powered-By: Express
< Content-Type: text/plain
< Date: Thu, 21 Mar 2013 15:33:10 GMT
< Connection: keep-alive
< Transfer-Encoding: chunked 
```

如果没有这个，我似乎无法弄清楚发送摘要初始数据包的 curl 魔法，只在随后的实际数据请求中添加内容类型。

作为参考，虽然我认为它没有帮助，但这里是相同调用的 BASIC 成绩单：

```
$ curl  -v --basic  -X POST --data @body.json --user org2user2:lameduck -H "content-type: application/json"  http://127.0.0.1:3002/user
* About to connect() to 127.0.0.1 port 3002 (#0)
*   Trying 127.0.0.1...
* connected
* Connected to 127.0.0.1 (127.0.0.1) port 3002 (#0)
* Server auth using Basic with user 'org2user2'
> POST /user HTTP/1.1
> Authorization: Basic b3JnMnVzZXIyOmxhbWVkdWNr
> User-Agent: curl/7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8r zlib/1.2.5
> Host: 127.0.0.1:3002
> Accept: */*
> content-type: application/json
> Content-Length: 48
> 
* upload completely sent off: 48 out of 48 bytes
< HTTP/1.1 200 OK
< X-Powered-By: Express
< Content-Type: application/json; charset=utf-8
< Content-Length: 51
< Date: Thu, 21 Mar 2013 15:43:48 GMT
< Connection: keep-alive
< 
{
  "this": "is working",
  "that": "is annoying"
* Connection #0 to host 127.0.0.1 left intact
}* Closing connection #0 
```

任何帮助都是极好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:28:43.230

我遇到了同样的问题。我无法回答您关于命令行魔术告诉 CURL 不要在初始请求中发送内容类型的问题（我认为没有任何魔术）。

但是，我可以告诉您问题的根本原因是 Node+Express(connect) 正在通过 bodyParser 发送初始摘要请求，并且由于应用程序/json 标头在那里，它尝试解析正文（为空） . 就我个人而言，我认为如果正文为空，express 不应该发疯，而是只返回一个空的 JSON 结构（我的工作在下面）。

将来可能会有更好的（官方）解决方法，因为这个特定问题现在正在 github 上讨论（1 天前） [https://github.com/senchalabs/connect/issues/415](https://github.com/senchalabs/connect/issues/415)

我的解决方法（connect/lib/middleware/json.js:70）

```
if (0 == buf.length) {
//  return next(400, 'invalid json, empty body');
    req.body = {};
    return next();
} 
```

# event-log - 写入事件日志 - 未找到源，但无法搜索部分或全部事件日志。无法访问的日志：安全性。”

> ID：15552054
> 
> 赞同：2
> 
> 时间：2013-03-21T15:45:45.753
> 
> 标签：event-log

我正在尝试将一些消息写入 Windows 事件日志。

调用函数“SourceExists()”时将抛出（安全）异常。

```
private bool CheckIfEventLogSourceExits()
    {
        try
        {
            if (!EventLog.SourceExists(this.BaseEventLog))
            {
                return false;
            }
            return true;
        }
        catch (System.Security.SecurityException)
        {
            return false;
        }
    } 
```

这个问题的所有答案都在解释如何手动解决问题。像这里：[Stackoverflow 线程](https://stackoverflow.com/questions/1274018/system-security-securityexception-when-writing-to-event-log)。解决方案是更改一些注册表项

但是您不能期望使用您的应用程序的每个人都知道这些更改。

所以我的问题是，我们如何以编程方式解决这个问题？

在我的代码下面：

```
 try
            {
                string sLog = "Application";
                if (CheckIfEventLogSourceExits())
                {
                    EventLog.CreateEventSource(this.BaseEventLog, sLog);
                }

                EventLog.WriteEntry(this.BaseEventLog, message, eventLogEntryType);
            }
            catch (Exception ex)
            {
                ex.Source = "WriteToEventLog";
                throw ex;
            } 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2014-02-14T15:13:24.380

我知道发布此帖子为时已晚，但我从类似的经验中找到的答案是，您运行的服务没有机器的管理权限，因此无法写入日志。

很容易确定应用程序是否在管理员权限下运行。您可以在代码中添加类似这样的内容，并带有一个建议用户运行“admin”的消息框。

```
private void GetServicePermissionLevel()
{
bool bAdmin = false;
try {
    SecurityIdentifier sidAdmin = new SecurityIdentifier(WellKnownSidType.BuiltinAdministratorsSid, null);
    AppDomain myDomain = Thread.GetDomain();
    myDomain.SetPrincipalPolicy(PrincipalPolicy.WindowsPrincipal);
    WindowsPrincipal myPrincipal = (WindowsPrincipal)Thread.CurrentPrincipal;
    if (myPrincipal.IsInRole(sidAdmin)) {
        bAdmin = true;
    } else {
        bAdmin = false;
    }
} catch (Exception ex) {
    throw new Exception("Error in GetServicePermissionlevel(): " + ex.Message + " - " + ex.StackTrace);
} finally {
    _ServiceRunAsAdmin = bAdmin;
}
} 
```

# visual-studio-2010 - MSBuild：将单个警告视为错误

> ID：15552055
> 
> 赞同：5
> 
> 时间：2013-03-21T15:45:51.197
> 
> 标签：visual-studio-2010, azure, msbuild

**有没有办法强制 MSBuild 将某个警告视为错误？**

运行 ccproj 文件的发布目标以生成用于部署到 Azure 的 cspkg 时，会引发此错误：

> Project.Name：警告 WAT150：项目“Project.Name”依赖于以下程序集：C:\Windows\assembly\GAC_64\DllName\2.10.0.0__Guid\DllName.dll。该组件不在包装中。要确保角色启动，请将此程序集添加为对项目的引用，并将 Copy Local 属性设置为 true。[C:\bld\66\797\Sources\Applications\cloud\Project.Name.ccproj]

这是一个警告，可能意味着角色在部署时不会启动......我想让 WAT150 成为错误。 **有没有办法使特定的单个警告或警告列表成为错误？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-05-11T08:03:54.593

在 MSBuild 中，您可以使用`/warnaserror`命令行开关

```
 /warnaserror[:code[;code2]]
                     List of warning codes to treats as errors.  Use a semicolon
                     or a comma to separate multiple warning codes. To treat all
                     warnings as errors use the switch with no values.
                     (Short form: /err[:c;[c2]])

                     Example:
                       /warnaserror:MSB4130

                     When a warning is treated as an error the target will
                     continue to execute as if it was a warning but the overall
                     build will fail. 
```

这相当于`<WarningsAsErrors>`在项目文件 ( [docs](https://docs.microsoft.com/en-us/visualstudio/msbuild/common-msbuild-project-properties?view=vs-2019) ) 中设置属性。

为了完整起见，C# 编译器还具有`-warnaserror`命令行选项 ( [docs](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/compiler-options/warnaserror-compiler-option) )。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T15:57:57.070

在 msbuild 命令行选项中，你有这个：

警告作为错误

指定要视为错误的警告列表。此参数等效于 /warnaserror 编译器开关。

文档链接： http: [//msdn.microsoft.com/en-us/library/vstudio/bb629394 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/bb629394%28v=vs.100%29.aspx)

# scheme - 是否可以在 mit-scheme 中实现“define-macro”

> ID：15552057
> 
> 赞同：2
> 
> 时间：2013-03-21T15:45:54.147
> 
> 标签：scheme, mit-scheme

读完[这一页](http://www.ccs.neu.edu/home/dorai/t-y-scheme/t-y-scheme-Z-H-20.html#node_sec_A.3)。我发现很难记住如何`define-syntax`代替`define-macro`，所以我想`define-macro`在 mit-scheme 中实现（或至少找到一些等效的）。

这是我的（有问题的）实现：

```
(define-syntax define-macro
  (rsc-macro-transformer
    (let ((xfmr (lambda (macro-name macro-body)
      (list 'define-syntax macro-name
        (list 'rsc-macro-transformer
          (let ((m-xfmr macro-body))
            (lambda (e r)
              (apply m-xfmr (cdr e)))))))))
      (lambda (e r)
        (apply xfmr (cdr e))))))

(define-macro my-when
  (lambda (test . branch)
    (list 'if test (cons 'begin branch))))

(my-when #t
  (begin
    (display "True")
    (newline))) 
```

REPL 抱怨道：

```
;The object (lambda (test . branch) (list (quote if) test (cons (quote begin) branch))) is not applicable. 
```

我是计划新手，不知道出了什么问题，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T15:55:04.027

首先，你应该学会使用 quasiquotation，这样你的宏就更容易阅读了。像这样：

```
(define-macro (my-when test . branch)
  `(if ,test
     (begin ,@branch))) 
```

不过，更严重的是，这很容易用 . 编写`syntax-rules`，你真的应该非常喜欢它而不是`define-macro`.

```
(define-syntax-rule (my-when test branch ...)
  (if test
    (begin branch ...))) 
```

哦，你没见过`define-syntax-rule`吗？这是一个简单的宏，可用于编写单子句`define-syntax`宏，它的定义如下：

```
(define-syntax define-syntax-rule
  (syntax-rules ()
    ((define-syntax-rule (name . pattern) template)
     (define-syntax name
       (syntax-rules ()
         ((name . pattern) template)))))) 
```

注意，使用`define-syntax-rule`简单的宏是如何变得非常非常容易编写的。这是另一个例子：

```
(define-syntax-rule (let ((name value) ...)
                      expr ...)
  ((lambda (name ...)
     expr ...)
   value ...)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-21T00:22:33.683

如果你真的需要定义宏语义，你可以在 mit-scheme 中得到一个合理的近似值，如下所示：

```
(define-syntax define-macro
  (syntax-rules ()
    ((define-macro (name . args) body ...)
     (define-syntax name
       (rsc-macro-transformer
         (let ((transformer (lambda args body ...)))
           (lambda (exp env)
              (apply transformer (cdr exp))))))))) 
```

然后，您可以将 my-when 定义为：

```
(define-macro (my-when test . branch)
  `(if ,test (begin ,@branch))) 
```

# android - Android DatePicker.OnDateChangedListener 在旋转时不断触发

> ID：15552058
> 
> 赞同：0
> 
> 时间：2013-03-21T15:46:01.137
> 
> 标签：android, datepicker

当用户旋转日历时， Android 会`DatePicker.OnDateChangedListener`不断触发。我认为这在最近的 Android 版本中发生了变化。以前它只在微调器停止后才会触发。

我想根据新日期更新内容，这涉及到网络访问，所以这太慢（而且浪费），无法在每个事件中执行。

我不喜欢使用单独的对话框来选择日期并在该对话框的关闭事件上更新我的内容。

**我如何知道（触发事件）日期选择器何时停止旋转？** 我可以想到一些带有计时器的机制来检查日期是否在最后一秒发生了变化，但这对我来说看起来很复杂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T06:54:35.827

`CountDownTimer`我通过在每个事件上重新启动一个来解决它`OnDateChangedListener`。计时器只有 500 毫秒。

只要用户在滚动`CountDownTimer`就不会完成。它只是不断地取消并在每个`OnDateChangedListener`事件上启动，直到`DatePicker`不再滚动（不是 500 毫秒）。

# marionette - 在运行时重新渲染/刷新应用程序

> ID：15552059
> 
> 赞同：1
> 
> 时间：2013-03-21T15:46:02.853
> 
> 标签：marionette

我有以下问题：我有一个正在使用 Marionette.Layout 的应用程序，并且此 Layout 具有区域。我想向用户添加更改语言的选项（在运行时），这意味着在应用程序已经渲染并且用户正在工作之后，他可以更改语言并且所有应用程序都应该将其更改为所选语言。我的问题： 1\. 我需要“刷新/重新渲染”所有应用程序，这是如何完成的，我没有找到或我错过了，如何重新渲染应用程序？

我已经有一个“模板”类似的机制： [https](https://github.com/janl/mustache.js/issues/216) ://github.com/janl/mustache.js/issues/216 这在应用程序启动时起作用，第一次，我需要在运行时重新- 使用新数据渲染/刷新

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-21T21:12:32.033

不幸的是，木偶中没有任何东西可以为你做这件事。您必须自己编写代码以使用新的语言设置重新渲染整个应用程序。

# android - 我需要碰撞使一个对象坐在 AndEngine 中的另一个对象上

> ID：15552060
> 
> 赞同：0
> 
> 时间：2013-03-21T15:46:10.047
> 
> 标签：android, andengine, physics, collision, touch-event

我有一个游戏，我用陀螺仪控制几个街区。现在的问题是我在我的 andengine 代码中实现了 box2d，但身体似乎没有相互反应，导致它们重叠，而不是实际做物理的东西。

在我的 onCreateScene 我有这个：

```
@Override
protected Scene onCreateScene() {
    this.mMainScene = new Scene();
    backgroundSprite = new Sprite(0, 0, this.mBackgroundTextureRegion, getVertexBufferObjectManager());

physicsWorld = new PhysicsWorld(new Vector2(0, 0), false);

final Player oPlayer = new Player(centerX, centerY, this.goodTiledTextureRegion, this.getVertexBufferObjectManager(), MainActivity.this, playerID, 0);
    player_fix = PhysicsFactory.createFixtureDef(10.0f, 0.2f, 1.0f);
    body = PhysicsFactory.createBoxBody(physicsWorld, oPlayer, BodyType.DynamicBody, player_fix);
    oPlayer.setBody(body);
    playerID++;
    players.add(oPlayer);
    for (Player player : players) {
        player.setPlayers(players);
        mMainScene.attachChild(player);
        physicsWorld.registerPhysicsConnector(new PhysicsConnector(player, body, true, false));
        mMainScene.registerTouchArea(player);
    }

this.mMainScene.registerUpdateHandler(physicsWorld);
this.mMainScene.registerUpdateHandler(new TimerHandler(0.1f, true, new ITimerCallback() {
        @Override
        public void onTimePassed(final TimerHandler pTimerHandler) {
                       Player player = new Player(random, 5, goodTiledTextureRegion, getVertexBufferObjectManager(), MainActivity.this, playerID, 0);
                body = PhysicsFactory.createBoxBody(physicsWorld, player, BodyType.DynamicBody, player_fix);
                            player.setBody(body);
                            players.add(player);
mMainScene.detachChildren();
                    mMainScene.attachChild(backgroundSprite);
                    for (Player player : players) {
                        player.setPlayers(players);
                        mMainScene.attachChild(player);
                        player.body.setLinearVelocity(AccelerometerHelper.TILTX * 5, AccelerometerHelper.TILTY * 5);
                        physicsWorld.registerPhysicsConnector(new PhysicsConnector(player, body, true, false));
                        mMainScene.registerTouchArea(player);
                    }
 }

return this.mMainScene;

} 
```

现在，我创建场景，创建物理世界。然后我创建了我的第一个“玩家”，（这是我移动的精灵）。我为它创建了一个主体，并将该主体设置在我的 Player.class（实体）中。从它的实体中访问每个玩家的身体。然后每隔几次更新（代码有点长，但我取出了与物理无关的东西）我创建了一个新玩家。然后对于我的数组列表中的每个玩家（玩家），我在加速度计之后设置线速度，以使其移动。问题是，如果一名球员击中另一名球员，他们会重叠，并且不会对撞击做出反应。

播放器夹具在任何地方都是相同`player_fix = PhysicsFactory.createFixtureDef(10.0f, 0.2f, 1.0f);`的并且 BodyType 始终是 DynamicBody。有人可以告诉我我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:43:07.293

您可以从[http://code.google.com/p/andenginephysicsbox2dextension/](http://code.google.com/p/andenginephysicsbox2dextension/)下载它。

我使用 Eclipse，并将其添加为项目。然后我将它包含在我的项目中。我还推荐项目 AndEngineExamples，它向您展示了各种不错的工具。

这是我添加墙的方法：

```
final Rectangle wall = new Rectangle(pX, pY, pWidth, pHeight,  pVman); // pvman is the ObjectVertexBufferManager 
wall.setIgnoreUpdate(true);

Body body = PhysicsFactory.createBoxBody(
    pParent.mPhysicsWorld,
    wall, 
    BodyType.StaticBody,
    Environment.WALL_FIXTURE_DEF
  );
  pScene.getFirstChild().attachChild(wall);
  pParent.mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(wall, body, true, true));
  // pParent is of type GameActivity. 
```

WALL_FIXTURE_DEF 是：

```
 /* The categories. */
public static final short CATEGORYBIT_WALL = 1;
public static final short CATEGORYBIT_MONNING = 2;
public static final short CATEGORYBIT_WHEEL = 4;

/* And what should collide with what. */
public static final short MASKBITS_WALL = CATEGORYBIT_WALL + CATEGORYBIT_MONNING + CATEGORYBIT_WHEEL;
public static final short MASKBITS_MONNING = CATEGORYBIT_WALL; 
public static final short MASKBITS_WHEEL = CATEGORYBIT_WALL; 

public static final FixtureDef WALL_FIXTURE_DEF = PhysicsFactory.createFixtureDef(0, 0f, 0.9f, false, CATEGORYBIT_WALL, MASKBITS_WALL, (short)0);
public static final FixtureDef MONNING_FIXTURE_DEF = PhysicsFactory.createFixtureDef(10, 0f, 0f, false, CATEGORYBIT_MONNING, MASKBITS_MONNING, (short)0);
public static final FixtureDef WHEEL_FIXTURE_DEF = PhysicsFactory.createFixtureDef(20, 0f, 10f, false, CATEGORYBIT_WHEEL, MASKBITS_WHEEL, (short)0);
public static final float GRAVITY_MONNINGS = 2*SensorManager.GRAVITY_EARTH; 
```

这也使用 MASK_BITS 处理冲突。Monnings 和 Wheels 不应该相互碰撞，但它们应该与 Walls 碰撞。

物理世界在 createScene 函数中是这样创建的：

```
this.mPhysicsWorld = new FixedStepPhysicsWorld(Environment.FPS, new Vector2(0, Environment.GRAVITY_MONNINGS), false); 
```

AndEngineExamples 项目 ( [http://code.google.com/p/andengineexamples/](http://code.google.com/p/andengineexamples/) ) 也是必须安装的。

这可能是您需要的代码。请注意，我没有运行代码，所以它可能包含错误，但我希望你能明白：（抱歉缩进）

```
@Override
protected Scene onCreateScene() {
   this.mMainScene = new Scene();
   backgroundSprite = new Sprite(0, 0, this.mBackgroundTextureRegion,   getVertexBufferObjectManager());

    physicsWorld = new PhysicsWorld(new Vector2(0, 0), false);

   final Player oPlayer = new Player(centerX, centerY, this.goodTiledTextureRegion, this.getVertexBufferObjectManager(), MainActivity.this, playerID, 0);
   player_fix = PhysicsFactory.createFixtureDef(10.0f, 0.2f, 1.0f);

   oPlayer.setBody(body);
   playerID++;
   players.add(oPlayer);
   for (Player player : players) {

      Body body = PhysicsFactory.createBoxBody(physicsWorld, oPlayer, BodyType.DynamicBody, player_fix);
      player.setPlayers(players);
      mMainScene.attachChild(player);
      physicsWorld.registerPhysicsConnector(new PhysicsConnector(player, body, true, false));
      mMainScene.registerTouchArea(player);
}

this.mMainScene.registerUpdateHandler(physicsWorld);
this.mMainScene.registerUpdateHandler(new TimerHandler(0.1f, true, new ITimerCallback()  {
    @Override
    public void onTimePassed(final TimerHandler pTimerHandler) {
             Player player = new Player(random, 5, goodTiledTextureRegion, getVertexBufferObjectManager(), MainActivity.this, playerID, 0);
             Body body = PhysicsFactory.createBoxBody(physicsWorld, player, BodyType.DynamicBody, player_fix);
             player.setBody(body);
             players.add(player);
             player.setPlayers(players);
             mMainScene.attachChild(player);

             /* This might have to be in the loop */
             player.body.setLinearVelocity(AccelerometerHelper.TILTX * 5, AccelerometerHelper.TILTY * 5);
            physicsWorld.registerPhysicsConnector(new PhysicsConnector(player, body, true, false));
            mMainScene.registerTouchArea(player);
       }
   }

 return this.mMainScene;

} 
```

# git - Git找出我推送的最后一个提交

> ID：15552063
> 
> 赞同：17
> 
> 时间：2013-03-21T15:46:16.497
> 
> 标签：git

我想找出我推送的最后一件事，不是我提交的最后一件事，而是推送的。

有没有这个的 git 命令？

*上下文：* 我想在将我的 dev_branch 与 master 分支合并之前压缩一些提交，但我被告知你不能重新设置已经推送的任何内容（这是真的吗？）。

所以我想知道我不能包含在这个 rebase 中的最后一次提交是什么。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-21T15:48:29.550

如果您的意思是您推送到`master`分支的最后一次提交，那么假设您的遥控器是`origin`：

```
git rev-parse origin/master 
```

*正如您的本地存储库当前所知*，这将向您显示源`master`分支的尖端的提交 ID。 这可能意味着该提交是其他人的提交，如果其他人在您之后推送了提交并且您已经编辑了该分支。`origin`*`fetch`*

 *```
git show -p origin/master 
```

此命令将为您提供有关提交的信息，包括提交 ID、作者、日志消息以及与其父提交的差异。

* * *

我最喜欢的用于执行此类检查的 Git 命令之一：

```
git log --pretty=oneline --abbrev-commit --graph --decorate --all 
```

这将显示提交历史的精美 ASCII 艺术图，并且每个提交将显示针对它的任何参考。通过这种方式，您可以一目了然地查看历史中的分支和合并，并轻松查看`origin/master`与您自己的`master`.*

# perforce - 我已经删除了我目录中的所有文件。我怎样才能让他们回来？

> ID：15552066
> 
> 赞同：20
> 
> 时间：2013-03-21T15:46:23.727
> 
> 标签：perforce

我是 Perforce 的新手，老实说，我讨厌它。我的 c:\workspaces\perforce 目录中有大约 20 个文件，我选择了所有文件并按下删除键。在我删除它们之前，它们都已签入。我一直在努力想办法让它们恢复原状（Perforce 太不直观了），但对于像我这样的 n00b 来说，没有什么比这更突出的了。
我怎样才能从 Perforce 将最新的修订版本返回到目录中？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-21T16:25:04.413

您需要进行强制同步。

在命令行上：

```
$> p4 sync -f 
```

在 P4V 图形用户界面中：

1.  右键单击目录进行更新
2.  选择“获取修订版”
3.  在对话框中，选中“强制操作”
4.  点击“获取修订”

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-21T20:28:30.473

The perforce server keeps track of which files you pulled in last time. This is done so that, the next `sync` only brings in the files which have changes since the last sync, instead of all the files once again.

To override this behavior, you need to use the `-f` option.

> The -f flag forces resynchronization even if the client already has the file, and overwriting any writable files. This flag doesn't affect open files.

If you're using the command line client, you can run this command from the directory where you want to sync up:

```
p4 sync -f ... 
```

You might also want to check the list of `opened` files, since `sync -f` will not be bringing in changes corresponding to those files (even if you have deleted them).

This command should list all the opened files:

```
p4 opened ... 
```

If you have any files listed in the above list, which you had deleted as well, you should revert them before running `sync -f`.

```
p4 revert <FILE1> <FILE2>
p4 sync -f ... 
```

If you're using `p4v`, you could follow the steps mentioned by [dwinkle](https://stackoverflow.com/users/1253433/dwikle):

```
1\. Right click the folder in your workspace
2\. Choose `Get Revision` in the context menu.
3\. Choose `Get Latest revision`
4\. Check `Force Operation (replace file even if you already have the revision specified)
5\. Click on `Get Revision` button to fetch the files. 
```

To look at the list of opened files using `p4v`, you would have to look at your list of pending changelists. You should be looking in the `default` changelist, if you have not put the files in any speficic changelist. Right click on files that you see there that you had deleted earlier, and choose `Revert`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-09-27T19:07:04.530

如果您已签出文件，然后将其删除。在获得最新强制 (p4 sync -f) 之前，您需要恢复（p4 revert -a //...）文件夹。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-06-09T17:48:58.350

如果您不关心旧客户端，一种解决方案是拉下一个新客户端：

```
p4 newclient
p4 sync 
```

如果您希望客户端具有相同的名称，您可以像其他人提到的那样进行强制同步：

```
p4 sync -f 
```

如果您希望客户端具有相同的名称，但您的目录不再被识别为 p4 工作区，则需要删除客户端然后重新创建它。

```
p4 -c <client_name> client -d <client_name>
p4 newclient 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-22T14:27:54.283

替代：

`p4 reconcile` `p4 revert //...`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-11T14:48:54.693

1.  右键单击父目录。
2.  在上下文菜单中单击“协调”。
    *   创建一个新的更改列表。
3.  右键单击更改列表。
4.  还原更改。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-05T21:51:23.140

就我而言，我尝试了一切，但无法恢复所有文件，因此我尝试删除它们，但无法恢复所有文件。我重新启动了我的电脑，并尝试了许多在网上找到的解决方案。最后，我的问题通过以下一项或全部解决：升级到最新的 P4V 应用程序，以提升的权限运行应用程序，并在强制获取最新后去吃午饭。

如果你浪费了半天时间。您可能想尝试上述方法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-07T20:46:58.083

> 我已经删除了我目录中的所有文件。我怎样才能让他们回来？

我刚刚偶然发现的一个问题是，如果您删除了该*目录*，您就不能只用`p4 sync -f`它来取回它。我想要一个完整的干净版本的目录，所以我做了一个：

```
rm -rf directory1 
```

但是，当我`p4 sync -f directory1`对其进行操作时，它会吐出：

```
directory1 - no such file(s). 
```

我发现有效的是首先恢复目录中的*文件*：

```
p4 sync -f directory1/some-file 
```

您必须知道可以使用的缺失目录中的文件之一的名称：

```
p4 files //depot/some/path/directory1/\* 
```

获得其中一个文件名后，请执行以下操作：

```
p4 sync -f directory1/some-file 
```

这应该创建`directory1`目录。然后您可以在创建的目录中进行完全同步：

```
cd directory1
p4 sync -f ... 
```

希望这对其他人有帮助。

# c# - 尝试从 C# 连接到 R

> ID：15552070
> 
> 赞同：0
> 
> 时间：2013-03-21T15:46:30.133
> 
> 标签：c#

我正在尝试使用 C# 连接到 R。我安装了 R.Net 并在我的项目中引用了它。这是我第一次尝试 C#。任何想法我做错了什么？

这是示例 C# 代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using RDotNet;

namespace RNet_Calculator
{
    public partial class Form1 : Form
    {

        // set up basics and create RDotNet instance 
        // if anticipated install of R is not found, ask the user to find it. 

        public Form1()
        {
            InitializeComponent();

            string dlldir = @"C:\Users\R\R-2.15.2\bin\x64";
            bool r_located = false;

            while (r_located == false)
            {
                try
                {
                    REngine.SetDllDirectory(dlldir);
                    REngine.CreateInstance("RDotNet");
                    r_located = true;
                }

                catch
                {
                    MessageBox.Show(@"Unable to find R installation's \bin\i386 folder. 
                    Press OK to attempt to locate it.");

                }
            }
        }
    }
} 
```

![在此处输入图像描述](../Images/9d2c05c6a1fd57b7ec088c6924647197.png)

![在此处输入图像描述](../Images/88c99c211b2043f97073d33335eb27ca.png)

这是 Program.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;

namespace Form1
{
    static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new Form1());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:59:29.277

这实际上与 R 无关。您可能已经在一个地方覆盖了命名空间，而不是在另一个地方。你有代码

```
namespace RNet_Calculator 
```

在您的表单代码中。如果你打开`Form1.designer.cs`你可能会看到

```
namespace Form1 
```

只需将名称空间从`Form1`to更改为`RNet_Calculator`，您的错误就会消失。

**编辑**

作为对您的编辑的响应，您应该将单个`RNET_Calculator`命名空间改回，`Form1`或者您也应该（但不必）更改`Form1`Program.cs 文件（以及项目中的任何其他文件）中的命名空间。这样做意味着您还应该更改项目属性中的命名空间。右键单击您的项目，选择“属性”，然后在“应用程序”选项卡（应该是第一个打开的选项卡）中，将“默认命名空间”文本框更改为`RNET_Calculator`.

# javascript - 计算返回一个排序后的 observableArray

> ID：15552074
> 
> 赞同：1
> 
> 时间：2013-03-21T15:46:42.977
> 
> 标签：javascript, knockout.js

我有一个计算出的 observable，它返回我的过滤、排序版本，`observableArray`但排序根本不起作用。

这是[我的小提琴](http://jsfiddle.net/bflemi3/BPBa7/2/)

```
String.prototype.contains = function (value) {
    return this.indexOf(value) != -1;
};

function Item(data) {
    this.name = ko.observable(data);
}

function ViewModel() {
    var self = this;
    this.items = ko.observableArray([new Item('John'), new Item('Pat')]);
    this.filterValue = ko.observable();

    this.filteredItems = ko.computed(function() {
        var filterValue = self.filterValue();

        if(!filterValue)
            return self.items();

        return ko.utils.arrayFilter(self.items(), function(){
            return item.name().toLowerCase().contains(filterValue.toLowerCase());
        }).sort(function(a,b){
            return a.name == b.name ? 0 : (a.name < b.name ? -1 : 1);
        });
    });
} 
```

**答案** 这是更新[小提琴](http://jsfiddle.net/bflemi3/BPBa7/10/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T15:55:26.937

正如@Paul Manzotti 指出的那样，您的排序功能没有正确访问“名称”属性。此外，您的“filterValue”是`undefined`，因此您的函数在进入排序之前退出。

这样的事情会让它工作：

```
 var filtered = filterValue ? ko.utils.arrayFilter(self.items(), function(item){
        return item.name().toLowerCase().contains(filterValue.toLowerCase());
    }) : self.items();

    return filtered.sort(function(a,b){
        return a.name() == b.name() ? 0 : (a.name() < b.name() ? -1 : 1);
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T15:53:26.593

您的`sort`函数未正确调用可观察对象：

```
.sort(function(a,b){
        return a.name() == b.name() ? 0 : (a.name() < b.name() ? -1 : 1);
    }) 
```

我也更新了你的[小提琴](http://jsfiddle.net/manzanotti/BPBa7/3/)，这似乎有效。

# android - Android Bitmap.createScaledBitmap 主要在 Jelly Bean 4.1 上抛出 java.lang.OutOfMemoryError

> ID：15552076
> 
> 赞同：11
> 
> 时间：2013-03-21T15:46:46.297
> 
> 标签：android, exception, graphics, bitmap, out-of-memory

我的应用程序的主要目的是以如下方式显示图像，如图所示

![在此处输入图像描述](../Images/4dfb7da2dfb3048a12d386837b9c96c2.png)

```
private void setSelectedImage(int selectedImagePosition) 
{

    BitmapDrawable bd = (BitmapDrawable) drawables.get(selectedImagePosition);
    Bitmap b = Bitmap.createScaledBitmap(bd.getBitmap(), (int) (bd.getIntrinsicHeight() * 0.9), (int) (bd.getIntrinsicWidth() * 0.7), false);
    selectedImageView.setImageBitmap(b);
    selectedImageView.setScaleType(ScaleType.FIT_XY);

} 
```

详细代码可以在[这里找到](http://www.mobisoftinfotech.com/wp-content/uploads/2012/06/galleryDemo.zip)

在下一行抛出异常

```
Bitmap b = Bitmap.createScaledBitmap(bd.getBitmap(), (int) (bd.getIntrinsicHeight() * 0.9), (int) (bd.getIntrinsicWidth() * 0.7), false); 
```

上面的函数是从调用的`onItemSelected`。**该应用程序在 2.2 和 2.3 上仍然运行良好，但在 4.1 上立即抛出异常 上面的代码工作正常，但抛出以下异常。我在 2.2 和 2.3 中没有看到任何崩溃，但在 4.1 中它立即崩溃了 Jelly bean 中的内存管理有什么重大区别吗？**：

```
java.lang.OutOfMemoryError
AndroidRuntime(2616):   at android.graphics.Bitmap.nativeCreate(Native Method)
AndroidRuntime(2616):   at android.graphics.Bitmap.createBitmap(Bitmap.java:640)
AndroidRuntime(2616):   at android.graphics.Bitmap.createBitmap(Bitmap.java:586) 
AndroidRuntime(2616):   at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:466)
AndroidRuntime(2616):   at com.rdx.gallery.GalleryDemoActivity.setSelectedImage(GalleryDemoActivity.java:183) 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-11-11T13:01:24.450

需要注意的是，以下代码可能会导致异常：

```
Bitmap bitmap = Bitmap.createScaledBitmap(oldBitmap, newWidth, newHeight, true); 
oldBitmap.recycle(); 
```

正确的是：

```
Bitmap bitmap = Bitmap.createScaledBitmap(oldBitmap, newWidth, newHeight, true); 
if (oldBitmap!= bitmap){
     oldBitmap.recycle();
} 
```

因为文档说：

> 如果指定的宽度和高度与源 btimap 的当前宽度和高度相同，则返回源位图，现在创建新的位图。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-21T16:02:39.370

[http://www.youtube.com/watch?v=_CruQY55HOk](http://www.youtube.com/watch?v=_CruQY55HOk)。在andorid 3.0 之后，位图像素数据存储在堆上。看来您超出了堆内存大小。不要仅仅因为您的应用程序需要大堆而不使用大堆。堆的大小越大，垃圾收集就越规律。该视频对该主题有很好的解释。

不使用时也回收位图。堆上的垃圾收集是由我的标记和扫描完成的，所以当你回收位图时它会释放内存。所以你的堆大小不会增长和内存不足。

```
 bitmap.recycle(); 
```

[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)。有关有效加载位图的文档。看看在内存中加载缩小版本。

除此之外，您还可以使用 Universal Image Loader。[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)。

[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)。延迟加载图像。

两者都使用缓存。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-21T15:51:02.510

您正在尝试访问更多的内存。尝试使用

```
 BitmapFactory.Options opts=new BitmapFactory.Options();
        opts.inDither=false;                    
        opts.inSampleSize = 8;                   
        opts.inPurgeable=true;                 
        opts.inInputShareable=true;             
        opts.inTempStorage=new byte[16 * 1024]; 

Bitmap.createScaledBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.h1)
        , 65,65, true), 
```

另请查看以下链接以增加内存

[http://developer.android.com/reference/android/R.styleable.html#AndroidManifestApplication_largeHeap](http://developer.android.com/reference/android/R.styleable.html#AndroidManifestApplication_largeHeap)

[检测 Android 中的应用程序堆大小](https://stackoverflow.com/questions/2630158/detect-application-heap-size-in-android)

编辑 1

尝试使用 nostras 图像下载器，您可以使用它在本地存储中显示图像。它管理内存非常好......

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

# c# - TPL中httpwebequest之间的间隔

> ID：15552078
> 
> 赞同：0
> 
> 时间：2013-03-21T15:46:52.987
> 
> 标签：c#, multithreading, httpwebrequest, task-parallel-library

我正在使用`Parallel.ForEach`. 在并行循环中，我有 2 个`HttpWebRequest`实例。如何设置这两个请求之间的间隔。

由于这类似于多线程，我尝试使用 1 秒延迟`Thread.Sleep(1000)`，但这不起作用。还有什么建议吗？

# css - 基于 webkit 的浏览器的 CSS 规则

> ID：15552082
> 
> 赞同：9
> 
> 时间：2013-03-21T15:47:05.153
> 
> 标签：css, webkit, media-queries

我有下一个 CSS 代码：

```
#mgheader .letters {
  display: inline-block;
  margin-left: 55px;
  margin-top: -45px;
  position: absolute;
}

#mgheader .letters {
  display: inline-block;
  margin-left: 10px;
  position: absolute;
} 
```

现在我想**在 Google Chrome 和 Safari 中执行第一个，在其他浏览器中执行第二个**。

我试过这个，但第二个代码似乎总是在执行：

```
@media screen and (-webkit-min-device-pixel-ratio:0) {
  #mgheader .letters {
    display: inline-block;
    margin-left: 55px;
    margin-top: -45px;
    position: absolute;
  }
}   

#mgheader .letters {
  display: inline-block;
  margin-left: 10px;
  position: absolute;
} 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-21T15:49:13.553

问题是你用非 webkit 样式覆盖了你的 webkit 样式。颠倒顺序应该可以解决这个问题：

```
#mgheader .letters {
  display: inline-block;
  margin-left: 10px;
  position: absolute;
}

@media screen and (-webkit-min-device-pixel-ratio:0) {
  #mgheader .letters {
    display: inline-block;
    margin-left: 55px;
    margin-top: -45px;
    position: absolute;
  }
} 
```

您可能还想检查您是否`-webkit-min-device-pixel-ratio`在所有使用 webkit 的设备上触发，但它可能确实如此。

作为参考，层叠样式表是从上到下阅读的。关键词是级联。如果在相同的 CSS 规则*之前*给出一个 CSS 规则，则后一个将优先。在您的示例中，您专门为 webkit 浏览器设置样式，然后用一般样式规则覆盖它。颠倒顺序意味着这里的 webkit 样式会覆盖一般的样式（不影响非 webkit 浏览器）。

# magento - 从 Magento PDF 中删除 SKU

> ID：15552085
> 
> 赞同：0
> 
> 时间：2013-03-21T15:47:08.407
> 
> 标签：magento

我正在尝试从 Magento 的发票和发货 PDF 中删除 SKU 编号，我已经注释掉了位于 app/code/local/mage/sales/model/order/pdf 中的文件中对 SKU 的所有引用，但是只有 SKU 标头消失了，而不是实际值。

谁能指出我正确的方向？

我查看了代码 - 我已经编辑了发票 pdf 的默认渲染器，但它不会影响代码。我想知道这是否与此有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T04:04:16.880

您需要覆盖类中的函数 draw()

```
Mage_Sales_Model_Order_Pdf_Items_Invoice_Default
Mage_Sales_Model_Order_Pdf_Items_Invoice_Grouped
Mage_Bundle_Model_Sales_Order_Pdf_Items_Invoice 
```

为了从发票pdf中删除sku。

```
Mage_Sales_Model_Order_Pdf_Items_Shipment_Default
Mage_Bundle_Model_Sales_Order_Pdf_Items_Shipment 
```

为了从货件中删除 sku pdf

找到下面的代码并注释掉

```
// draw SKU
        $lines[0][] = array(
            'text'  => Mage::helper('core/string')->str_split($this->getSku($item), 25),
            'feed'  => 440
        ); 
```

# desire2learn - Valence API 列出所有讲师注册

> ID：15552087
> 
> 赞同：0
> 
> 时间：2013-03-21T15:47:18.460
> 
> 标签：desire2learn, valence

使用 Valence API 为用户获取所有讲师注册的最有效方法是什么。

目前我正在使用这个：

```
/d2l/api/lp/1.0/enrollments/users/{userid}/orgUnits/?roleid={Instructor} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:59:28.560

这是用于此信息的正确调用。`?orgUnitTypeId={ouTypeId}`如果您只想查看课程设置，您可以使用 进一步将返回的列表过滤到特定的组织单位类型。这可能很有用，例如，从列表中过滤掉也将在您使用的呼叫中返回的所有组和部分，或者用户注册为“讲师”角色的任何自定义组织单位，这不是严格意义上的课程（如部门、学院或其他自定义组织单位）。

如果您想查看注册角色为“讲师”的用户的*所有*注册（前提是您传递了“讲师”的角色 ID），那么您的 API 就是您想要的。

# java - 使用 XML 生成带有注释的 JPA 实体

> ID：15552093
> 
> 赞同：2
> 
> 时间：2013-03-21T15:47:27.320
> 
> 标签：java, jpa, annotations

我正在尝试找到一种使用 XML 生成带有一些 javax.validation 注释的 JPA 实体的方法。基本上我修改了一个 XML 文件，并通过一些魔法生成 JPA java 类，其中包含 javax.validation 注释。我似乎无法在网上找到合适的单词组合来查找此信息，所以我来到了这里。有没有办法做到这一点？

# android - 是否可以在不下载的情况下获得远程音频文件的持续时间？

> ID：15552098
> 
> 赞同：3
> 
> 时间：2013-03-21T15:47:35.763
> 
> 标签：android, android-mediaplayer

我有一个远程音频文件的 URL。我需要为带有跟踪详细信息的适配器列表构建数据。这是这部分代码

```
 Log.d("audioURL", audio.getUrl());
    MediaPlayer tmpMedia;
    tmpMedia = MediaPlayer.create(getContext(), Uri.parse(audio.getUrl()));
    holder.txtDuration.setDuration(tmpMedia.getDuration()/1000);
    tmpMedia.release(); 
```

但它工作得太慢了。LogCat 是这样写的：

```
15:05:51.783: D/audioURL(776): http://cs4859.vk.me/u14195999/audios/0cbd695ddf50.mp3
15:05:51.783: D/MediaPlayer(776): Couldn't open file on client side, trying server side
15:05:53.813: D/audioURL(776): http://cs4859.vk.me/u14195999/audios/0cbd695ddf50.mp3
15:05:53.823: D/MediaPlayer(776): Couldn't open file on client side, trying server side
15:05:55.373: D/audioURL(776): http://cs4859.vk.me/u14195999/audios/0cbd695ddf50.mp3
15:05:55.383: D/MediaPlayer(776): Couldn't open file on client side, trying server side
15:05:58.143: D/audioURL(776): http://cs1626.vk.me/u149968/audios/04298447cd3c.mp3
15:05:58.153: D/MediaPlayer(776): Couldn't open file on client side, trying server side 
```

...等等。因此，我的大约 30 首曲目的播放列表在大约 7 分钟内初始化。

我猜想，[MediaPlayer](http://developer.android.com/reference/android/media/MediaPlayer.html)类方法会`getDuration()`依次下载这些曲目（或其中的某些部分）以获得它们的持续时间。

有没有办法在不下载曲目的情况下快速获得这些持续时间？

Halim Qarroum，这似乎是一个正确的方法，但我在`MediaMetadataRetriever`上课时遇到了一些麻烦。

这是我上面的代码：

```
 if (android.os.Build.VERSION.SDK_INT < 10){
        holder.txtDuration.setDuration(audio.getTrackDuration());
    } else {
        MediaMetadataRetriever mRetriever = new MediaMetadataRetriever();
        Log.d("URI", Uri.parse(audio.getUrl()).toString());
        mRetriever.setDataSource(getContext(), Uri.parse(audio.getUrl()));
        String s = mRetriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_DURATION);
        holder.txtDuration.setDuration(Long.parseLong(s));
        mRetriever.release();
    } 
```

应用程序`mRetriever.setDataSource(getContext(), Uri.parse(audio.getUrl()));`因`IllegalArgumentException`. `audio.getURl()`字符串`http://cs4859.vk.me/u14195999/audios/134dfe90d1ec.mp3`是.

为什么会出现异常？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T20:37:38.343

Dheeb 发布了一个非常详细的答案。但是，`ID3 tags`并不总是存在于 mp3 文件中。[`MediaMetadataRetriever`](http://developer.android.com/reference/android/media/MediaMetadataRetriever.html)您可以使用Android 框架附带的类，而不是寻找这些标签，这会迫使您将此方法限制为 mp3 文件。

此类可以为您提供来自某些类型的音频/视频文件的多个元数据，其中一个信息是持续时间。这种方法的优点是标准，因为它带有 Android SDK 并且不限于一种音频格式。

来自 Android 开发者相关页面：

> MediaMetadataRetriever 类提供了一个统一的接口，用于从输入媒体文件中检索帧和元数据。

使用此类的代码的简单示例：

```
MediaMetadataRetriever retriever = new MediaMetadataRetriever();
retriever.setDataSource(your_data_source);
String time = retriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_DURATION);
long timeInmillisec = Long.parseLong( time );
long duration = timeInmillisec / 1000;
long hours = duration / 3600;
long minutes = (duration - hours * 3600) / 60;
long seconds = duration - (hours * 3600 + minutes * 60); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-12-18T04:37:32.873

存在与 MediaMetadataRetriever 相关的错误。你可以试试，

```
 metaRetreiver.setDataSource("<remoteUrl>", new HashMap<String, String>()); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-21T17:58:46.027

# 我会假设 mp3 因为“音频文件”是一个笼统的短语。

## 方法一：获取ID3标签

### 变体 1：第 3 方库

您将需要查看 mp3 文件中的 ID3 标签。除非您在其他地方跟踪您想要的元数据。

要明确获取文件的轨道长度，您需要确定查看 ID3 元数据标签，特别是标签的“TRCK”框架。

要仅下载 ID3 Tag 部分，您必须先下载文件的 ID3 标头部分。

该[网站](http://www.id3.org/Developer_Information)包含有关 ID3 标签格式的非常具体的信息。您将需要查看 ID3 标签的版本号，然后，您将需要找到有关 ID3 标签长度的信息。然后，您必须下载整个标签，因为帧没有任何特定的顺序。

然后您应该能够使用第三方库来查找 TRCK 框架及其数据。

### 变体 2：HTTP 黑客

对于 ID3v2 标签，抓取文件的开头。（ID3v2 帧可能在其他地方，但实际上它们总是在那里。）您无法提前知道标签将存在多长时间。对于纯文本标签，您可能会在前 512-1024 个字节中找到您想要的信息。不幸的是，越来越多的 MP3 嵌入了“专辑封面”图片，这些图片可能会更长；尝试选择一个可以优雅地忽略截断的 ID3 信息的 ID3 库。

ID3v1 标记位于文件末尾。同样，您无法确定它们会持续多长时间。当然，您事先并不知道该文件是否具有 ID3v1 标签、ID3v2 标签，或者两者都没有。一般来说，现在 ID3v2 是一个更好的选择。

要通过 HTTP 读取文件的一部分，您需要[Range](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35.2)标头。这也不是所有地方都支持的。

## 方法2：估计

可以通过 HTTP HEAD 请求获得的文件大小。持续时间表示播放时间（以秒为单位），如果不获取整个文件，则无法获取。您可以*猜测*，通过获取前几个 MP3 帧，查看它们的比特率，并假设文件的其余部分具有相同的比特率，但鉴于可变比特率编码的流行，这将接近准确的可能性是相当的低的。

> ID3 标签理论上可以在 ASPI 和 ETCO 标签中包含可以让您更好地猜测长度的信息。但在实践中，这些很少出现。

***学分***

> 归功于 SO 和互联网上的各种作者，当然还有我脑海中一楼的那个人。

# unix - 命令在 UNIX 中获取具有“.log”扩展名和名称中的“JB_”和日志文件正文中的“错误：”的文件列表（不是日志文件的名称）

> ID：15552100
> 
> 赞同：0
> 
> 时间：2013-03-21T15:47:43.407
> 
> 标签：unix, find

我在下面的命令中尝试了这个

```
ls -1 /fbrms01/dev/Logs/JB_*.log | find . -type f | xargs grep -l "ERROR:"  > /fbrms01/dev/Logs/text_JB.txt 
```

对于以下这些文件

```
./JB_CreateFormat_2013.03.18_08.27.49.log
./JB_CreateFormat_2013.03.18_17.21.31.log
./JB_ExtReservationDetail_2013.03.15_13.06.26.log
./JB_Report_Master_2013.03.18_09.53.38.log
./StoredProcessServer/ApplyTemplate_2013.02.15.log
./StoredProcessServer/ApplyTemplate_2013.03.20.log
./StoredProcessServer/AuthView_2012.08.21.log
./StoredProcessServer/AuthView_2013.02.15.log
./StoredProcessServer/BookPace_2013.01.29.log 
```

我正在获取输出文件中的所有文件，`.log`但`ERROR:`我只想要以 . 开头`JB_`和结尾的文件`.log`。有什么帮助吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:51:45.570

```
find /fbrms01/dev/Logs -type f -name 'JB_*.log' -exec grep -l "ERROR:" {} \; > /fbrms01/dev/Logs/text_JB.txt 
```

# math - 百分比公式

> ID：15552101
> 
> 赞同：0
> 
> 时间：2013-03-21T15:47:44.063
> 
> 标签：math

我有一个名为 Value 的*int*，带有一个随机数。根据值，我需要在标签中显示百分比 (0–100%)。

例如，如果值为 30 of 60，则百分比应为 50%。我应该使用什么公式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:51:04.383

```
(random_value / max_value) * 100 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-21T15:56:13.027

像这样的东西？

```
if($value > 30 && $value < 60) {
 $percentage = '50%';
} else {
 $percentage = ($value / $max_value) * 100 . '%';
} 
```

# c# - 为什么以下代码无法编译？

> ID：15552107
> 
> 赞同：1
> 
> 时间：2013-03-21T15:47:56.890
> 
> 标签：c#, generics, types, compiler-errors

我不明白为什么以下代码无法编译：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication1 {
    public interface ITestCondition<T> {
    }

    public class TestConditionBase<T>: ITestCondition<T> {
    }

    public class TestCondition<T>: TestConditionBase<T> {
    }

    public static class TestConditionExtension {
        public static V Foo<V, T>(this V condition) where V: ITestCondition<T> {
            return condition;
        }
    }

    class Program {
        static void Main(string[] args) {
            new TestCondition<int>().Foo();
        }
    }
} 
```

它说它找不到“foo”。但它在没有泛型类型的情况下完美运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T15:51:37.643

编译器无法推断类型。明确指定它们：

```
new TestCondition<int>().Foo<TestCondition<int>, int>(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T16:32:54.543

可以推断出 V 但不能推断出 T，因此对 Foo 的调用必须失败。

为什么不能推断出 T？

在执行方法类型推断时，**C# 从不从约束进行类型推断**。*通过检查参数*及其相应的*形参类型*之间的关系来进行推断。只有*在*推理完成后，我们才会检查约束是否得到满足。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T15:53:18.847

我认为您正在寻找它作为您的扩展方法：

```
public static class TestConditionExtension
{
    public static ITestCondition<T> Foo<T>(this ITestCondition<T> condition)
    {
        return condition;
    }
} 
```

由于 V 始终是 ITestCondition，因此没有理由让它比这更通用。

当我考虑使用泛型参数时，我使用的一个快速经验法则是“它是什么类型是否重要”。在这种情况下，具体的类型 J 无关紧要，只有父类型才重要。所以不要使用泛型，只需使用父类型。希望这是有道理的。

# jquery - 将类型文件的输入动态添加到表单中

> ID：15552112
> 
> 赞同：0
> 
> 时间：2013-03-21T15:48:06.107
> 
> 标签：jquery, ajax, forms, file, upload

我正在开发拖放功能。我有代码需要在文件拖放到我的放置区域时捕获文件，但是由于无法通过 jQuery 或 ajax 发送，因此在将其发送给 xmlhttprequest 时遇到了一些问题。

我现在正在考虑一个隐藏的 iFrame，但我真的不知道如何将这个文件附加到一个现有的表单中，多亏了用户删除，我已经拥有了这个文件。

```
var droparea = $('#dropzone');
    var uploadButon = $('#upload');
    droparea.on('dragover',function(){
        $(this).addClass('dragover');
        return false;
    });
    droparea.on('dragleave',function(){
        $(this).removeClass('dragover');
        return false;
    });
    droparea.on('drop', function(e) {
       e.stopPropagation();
       e.preventDefault();
       $(this).removeClass('dragover');
       var files = e.originalEvent.dataTransfer.files;

       var formData = new FormData($("form")[0]);

            for( var i = 0; i < files.length; ++i ) {
                var file = files[i];
                formData.append("files[]", file);
            }

            return $.ajax({
                url: "upload.php",
                type: "POST",
                data: formData,
                processData: false,
                contentType: false,
                success: function(text) {
                    alert(text);
                }

            });

    });

            //the php

           <?php
             echo count($_FILES["files"]);
                for($i = 0; $i < count($_FILES["files"]["name"]) ; $i++)
                {
              if(move_uploaded_file($_FILES["files"]["tmp_name"][$i],                               "upload/".$_FILES["files"]["name"][$i]))
                echo "ok";
                   else
                echo "no";
                 }
            ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:00:03.700

我想你的意思是元素

```
$("#userDroppedFile") 
```

是你的放置区。

但是，这不是您获取文件的方式，而是在 drop 事件中获取它：

```
$("#userDroppedFile").on("drag dragend dragenter dragleave dragover dragstart drop", function(e){
    var files;
    e.preventDefault();

    if( e.type === "drop" && e.originalEvent.dataTransfer ) {
        files = e.originalEvent.dataTransfer.files;
    }

    if( !files || !files.length ) {
        return;
    }

    doUpload(files);

}); 
```

在 doUpload 中，您[从静态 html 表单中获取表单数据](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData/Using_FormData_Objects)，并将文件添加到其中并上传：

```
function doUpload(files) {

    var formData = new FormData($("form")[0]);

    for( var i = 0; i < files.length; ++i ) {
        var file = files[i];
        formData.append("file" + (i+1), file);
    }

    return $.ajax({
        url: "xx",
        type: "POST",
        data: formData,
        processData: false,
        contentType: false,
        success: function() {
        }

    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:53:32.430

```
var myFile = $('userDropedFile'); 
```

不是有效的 jQuery 选择器。你的意思可能是：

```
var myFile = $('#userDropedFile'); 
```

# agile - YouTrack 4.x - 您如何在敏捷板的泳道中按优先级对所有任务进行排序？

> ID：15552113
> 
> 赞同：8
> 
> 时间：2013-03-21T15:48:07.373
> 
> 标签：agile, youtrack

正如标题所说，有没有办法按优先级对泳道内的所有任务进行排序？

我认为您可以通过顶部的搜索框执行此操作，方法是：

```
order by: priority 
```

但是它似乎没有做任何事情（我使用了自动完成位，所以看起来是正确的）？

目前，我们在底部有严重的错误，在顶部有一些小装饰，我们不希望继续手动分类它们以供开发人员拾取。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-19T06:25:07.360

这不是您正在寻找的，但可能有类似的目的：

1.  创建一个专门用于处理优先事项的委员会——我称我为“优先委员会”。
2.  将泳道类型设置为“属性”
3.  将“识别泳道的字段”设置为“优先级”
4.  选中“标识泳道的字段值”下拉框中的所有值，然后单击“应用”

Voilà - 在泳道之间拖动任务以设置它们的优先级，您可以清楚地看到各种任务的优先级和当前状态 - 不幸的是，它们在正常视图中的泳道可能不那么明显。

或者，您可以将颜色编码卡片的字段设置为“优先级”字段。与排序不太一样，但在视觉上仍然很明显。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-28T18:06:55.157

格罗菲特，

在泳道内按优先级对任务进行排序是不可能的。因此，您只能对所有泳道进行排序。另外，如果您需要按优先级排序，我建议您再次使用以下查询：

```
sort by: Priority 
```

# ember.js - camelCased 型号名称

> ID：15552117
> 
> 赞同：2
> 
> 时间：2013-03-21T15:48:21.813
> 
> 标签：ember.js, ember-data

有谁知道最近是否有骆驼属性的问题。

我有一个这样的模型：

```
var attr = DS.attr;

App.Users = DS.Model.extend({
    firstName: attr('string'),
    phone: attr('string'),
    email: attr('string')
}); 
```

在我的模板中，电子邮件和电话正确显示，但名字没有出现。我检查了 json 文件，一切似乎都很好。对于我所有的其他模型，都会出现同样的问题，所以我想它必须与 camelCase 做一些事情。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T16:32:17.887

**弃用通知：这个答案是从 2013 年开始的，直到现在还没有被修改过。这不反映 JSON API 适配器，而是反映 Ember-Data 的 RESTAdapter。**

Ember.js 依赖于[命名约定](http://emberjs.com/guides/models/the-rest-adapter/#toc_json-conventions)，它期望多单词驼峰式（例如）模型属性映射到JSON 响应上的`firstName`多单词下划线分隔小写属性（例如）。`first_name`如果您的 JSON 提供给您，或者在您**无法**`firstName`控制后端 API的情况下提供任何不在此约定中的内容，您可以选择定义一个告诉您的适配器在 JSON 响应和映射中查找特定键的选项它到给定模型中的属性。**`map`**

 **你可以这样做：

```
DS.RESTAdapter.map('App.User', { 
    firstName: { key: 'firstName' },
    lastName: { key: 'familyName' }
}); 
```

请注意，在上面的示例中，我添加了一个`lastName`不属于您自己的模型的属性。我这样做只是为了清楚地表明您可以同时映射多个属性，并且它在 JSON 响应中的名称可以是任何名称，不一定是不同大小写中的相同名称。**

# django - django 渲染理解 context_instance

> ID：15552118
> 
> 赞同：0
> 
> 时间：2013-03-21T15:48:27.800
> 
> 标签：django

我在读：

[https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#render](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#render)

如果我理解正确 context_instance 是从第一个参数（请求）自动创建的。

这些值如何呈现给视图？它是否将它们与字典参数结合起来？

context_instance 中通常有哪些类型的东西？（我知道它是根据请求构建的）。

我还读过模板预处理器可以将数据添加到 context_instance。

我只是想了解如何使用 context_instance 并且一直在搜索并且还没有找到正确的答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:58:59.830

模板上下文处理器是*唯一*以任何方式从`render`调用中影响上下文的东西。所有这些 - 无论是默认的，添加类似的东西`user`，还是您自己的自定义 - 只需将元素添加到上下文字典中。

# node.js - Node JS 互联网网关/强制门户，如在公共 WiFi 热点中使用

> ID：15552119
> 
> 赞同：9
> 
> 时间：2013-03-21T15:48:28.097
> 
> 标签：node.js, routing, wifi, iptables

我想构建一个节点 js 互联网网关/强制门户。所以我可以让用户“授权”他的mac地址或ip地址，如果mac地址不可能像用于wifi热点那样

所以我想到的是节点可以有一个 dhcp 服务器，并将其 IP 地址作为网关。因此，如果用户在 Web 浏览器上加载页面，它会给他们一个身份验证屏幕，然后他们可以登录，然后网关可以正确路由其数据包。

我如何使用 node.js 进行授权步骤，所以如果他们没有登录，它会显示一个登录页面并且他们是否要正确路由数据包？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-09T19:55:14.837

你需要几件来把它放在一起。

#1：http 代理 - 如果您可以运行 DHCP 服务器并分配 IP 地址，那么您可以运行 http-proxy 来捕获所有互联网流量。

#2：然后您需要向该代理添加身份验证逻辑，该代理可以检查 cookie、魔术包、令牌或验证访问并允许它们通过或重定向到登录页面的东西。

[node-http-proxy](https://github.com/nodejitsu/node-http-proxy)是一个非常流行且灵活的 node http 代理服务器，您可以轻松地[添加自己的逻辑](https://github.com/nodejitsu/node-http-proxy#setup-a-stand-alone-proxy-server-with-custom-server-logic)。

[node-http-auth-proxy](https://github.com/hudora/node-http-auth-proxy)是另一个这样的项目，其中包含如何处理内置身份验证的[示例。](https://github.com/hudora/node-http-auth-proxy/blob/master/doc/authserver.js)

拥有代理还可以让您将站点/IP 列入白名单/黑名单，您可能想要根据您的目标受众执行此操作。

# jsf - h:selectManyCheckbox 在导航时丢失值

> ID：15552122
> 
> 赞同：1
> 
> 时间：2013-03-21T15:48:30.650
> 
> 标签：jsf, primefaces

我的问题是 h:selectManyCheckbo 在导航时会丢失值，下面是我的代码：

```
<h:selectManyCheckbox id="selectGroupsBox" 
                      value="{userCreationWizardBean.selectedGroupsId}"
                      layout="pageDirection">

                            <f:selectItems var="Group"
                                value="#{userCreationWizardBean.terminalsGroups}"
                                itemLabel="#{terminalsGroup.groupName}"
                                itemValue="#{terminalsGroup.id}"
                                itemDisabled="#{Group.defaultGroup}">
                            </f:selectItems>
                            <p:ajax event="change" update=":form-top-wizard:numBase" process="selectGroupsBox"
                                listener="#{userCreationWizardBean.selectedGroupListner}"></p:ajax>
</h:selectManyCheckbox> 
```

如果我使用导航板来回移动，CheckBox 会丢失值：

```
<div id="top-wizard" class="#{class}">
        <ul>
            <li class="premier#{wizard_step=='0'?'_active':''}"><p:commandLink
                    action="#{userCreationWizardBean.getViewAt(0)}" ajax="true"
                    update=":msg-form:popup_faces-messages" 
                    /></li>

            <li class="deuxieme#{wizard_step=='1'?'_active':''}"><p:commandLink
                    action="#{userCreationWizardBean.getViewAt(1)}" ajax="true"
                    update=":msg-form:popup_faces-messages"  
                     /></li>

            <li class="troisieme#{wizard_step=='2'?'_active':''}"><p:commandLink
                    action="#{userCreationWizardBean.getViewAt(2)}" ajax="true"
                     update=":msg-form:popup_faces-messages"  
                     /></li>
            <li class="quatrieme#{wizard_step=='3'?'_active':''}"><p:commandLink
                    action="#{userCreationWizardBean.getViewAt(3)}" ajax="true"
                    update=":msg-form:popup_faces-messages" 
                    /></li>

        </ul>
</div> 
```

当我删除 itemDisabled 属性时，问题就消失了。

似乎我可以使用 jquery css 选择器语法来排除复选框被处理，但仅限于 primefaces 3.3，但我使用的是 3.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T12:58:27.940

我相信您遇到的问题与禁用组件或项目的值未发送到服务器这一事实有关。我也一直在尝试寻找解决方法。看看这篇[文章](https://stackoverflow.com/questions/10021634/jsf-when-disable-component-its-value-does-not-make-into-the-request-map-parame#_=_)它可能会有所帮助。

# javascript - 如何在 getElementById 语句中包含数组和递增变量？

> ID：15552126
> 
> 赞同：1
> 
> 时间：2013-03-21T15:48:59.153
> 
> 标签：javascript, arrays, getelementbyid, multi-select, setattribute

我正在尝试禁用动态创建的下拉菜单选项（取决于用户与其他菜单选项的交互）并且我遇到了一个错误，指出“null”不是一个对象。

在这行代码上：

```
if (document.getElementById(DropDownNames[j]+x).value = openerVals) { 
```

我相信我有一个语法错误，但是我对 Javascript 还是很陌生，并不完全确定。

这是整个代码：

```
var OpeningEmployees = document.getElementById('opener');
var QuantityDDOptions = ('#opener option').length;

var openerVals = eodForm.elements["opener"].value;

var DropDownNames = new Array();
DropDownNames[0] = "ui-multiselect-opener-option-";
DropDownNames[1] = "ui-multiselect-mid-option-";
DropDownNames[2] = "ui-multiselect-closer-option-";
DropDownNames[3] = "ui-multiselect-SR-option-";
DropDownNames[4] = "ui-multiselect-CR-option-";
DropDownNames[5] = "ui-multiselect-A-option-";
DropDownNames[6] = "ui-multiselect-BD-option-";
DropDownNames[7] = "ui-multiselect-Fridge-option-";
DropDownNames[8] = "ui-multiselect-AO-option-";
DropDownNames[9] = "ui-multiselect-EPV-option-";

OpeningEmployees.onchange = function () {
    for (var j = 0; j <= DropDownNames.length; j++){
        for (var x = 0; x <= QuantityDDOptions; x++) {
        if (document.getElementById(DropDownNames[j]+x).value = openerVals) {
            document.getElementById("'"+DropDownNames[j]+x+"'").setAttribute("disabled","disabled"); 
```

感谢大家的帮助。我已经从您的帖子中进行了更改，但仍然在浏览器控制台中收到错误。请注意，下拉名称末尾的数字是动态的。随着用户被添加到数据库中，他们被添加到下拉菜单中，这就是我将 QuantityDDOptions 设置为等于选项数量的原因。选项从 0 开始。

这是更新的代码：

```
var OpeningEmployees = document.getElementById('opener');
var QuantityDDOptions = ('#opener option').length;

var openerVals = eodForm.elements["opener"].value;

var DropDownNames = new Array();
DropDownNames[0] = "ui-multiselect-opener-option-";
DropDownNames[1] = "ui-multiselect-mid-option-";
DropDownNames[2] = "ui-multiselect-closer-option-";
DropDownNames[3] = "ui-multiselect-SR-option-";
DropDownNames[4] = "ui-multiselect-CR-option-";
DropDownNames[5] = "ui-multiselect-A-option-";
DropDownNames[6] = "ui-multiselect-BD-option-";
DropDownNames[7] = "ui-multiselect-Fridge-option-";
DropDownNames[8] = "ui-multiselect-AO-option-";
DropDownNames[9] = "ui-multiselect-EPV-option-";

OpeningEmployees.onchange = function () {
    for (var j = 0; j < DropDownNames.length; j++){
        for (var x = 0; x < QuantityDDOptions; x++) {
            if (document.getElementById(DropDownNames[j]+x).value == openerVals) {
                document.getElementById(DropDownNames[j]+x).setAttribute("disabled","disabled"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T15:52:39.530

```
document.getElementById(DropDownNames[j]+x).value = openerVals 
```

需要是

```
document.getElementById(DropDownNames[j]+x).value == openerVals 
```

一个单一的`=`东西将设置等于另一个东西（并返回设置值）。既然你使用了这个，那就意味着`if`语句使用的结果是设置值的真实性。

`==`用于评估两个事物是否相等，类型强制。（2 `==`“2”为真）

`===`用于评估两个事物是否相等，没有类型强制。（2 `!==`“2”为真）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T15:56:51.633

该 if 语句应该使用`==`而不是`=`. 在下一行中，您不需要在 id 周围加上引号。它已经是一个字符串。

得到错误的原因是你应该有

```
for (var j = 0; j < DropDownNames.length; j++){ 
```

如果您使用`<=`，您将尝试访问不存在的数组元素 (DropDownNames[10])，因此`document.getElementById`不会返回任何内容。很可能也是这种情况`x`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:54:51.287

您的 if 语句使用赋值 (=) 而不是比较 (==)

有些人甚至会说在 javascript 中使用 === 进行比较

# android - Android 按钮顶部/底部填充在 Android 4 中不起作用？

> ID：15552141
> 
> 赞同：4
> 
> 时间：2013-03-21T15:49:42.840
> 
> 标签：android, android-layout

当在具有背景渐变的按钮上使用较小的文本大小时，按钮会在 Android 2.2 上按预期缩小，但在 Android 4 上不会。我可以让它工作的唯一方法是将按钮变成 TextView 并设置一个点击事件在上面。我已经看到提到 TextViews 有这个问题，但这些工作对我来说是预期的。

我已经看到它在 Android 2.2 手机上按预期工作，但按钮在 Android 4.0.4 手机和 Android 4.2.2 模拟器上保持全高。

请让我知道我可能做错了什么。此示例使用 Eclipse (Juno) 中的新应用程序向导中的所有默认值。

注意：对于我正在使用的真实应用程序

```
机器人：填充=“4dp”
```

这使得 TextView 看起来不错（不影响按钮），但我在这个例子中使用了 0dp 来夸大这个问题。

活动主.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    android:orientation="vertical"
    tools:context=".MainActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/button_gradient"
        android:text="@string/hello_world" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="12sp"
        android:background="@drawable/button_gradient"
        android:text="@string/hello_world" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="0dp"
        android:textSize="12sp"
        android:background="@drawable/button_gradient"
        android:text="@string/hello_world" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="0dp"
        android:textSize="12sp"
        android:background="@drawable/button_gradient"
        android:text="@string/hello_world" />
</LinearLayout> 
```

button_gradient.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <gradient
        android:startColor="#0000BB"
        android:endColor="#E0E0E0"
        android:angle="90"/>
        <corners android:radius="10dp" />
</shape> 
```

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.test"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.test.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T06:04:54.390

您可以使用RelativeLayout，而不是使用LinearLayout。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:padding="20dp"
android:layout_margin="10dp"
android:orientation="vertical"
tools:context=".MainActivity" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/textView1"
    android:gravity="center"
    android:layout_alignLeft="@+id/button1"
    android:layout_alignRight="@+id/button1"
    android:text="@string/hello_world" />

<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/button1"
    android:layout_below="@+id/textView1"
    android:background="@drawable/button_gradient"
    android:text="@string/hello_world" />

<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="12sp"
    android:id="@+id/button2"
    android:layout_below="@+id/button1"
     android:layout_alignLeft="@+id/button1"
    android:layout_alignRight="@+id/button1"
    android:background="@drawable/button_gradient"
    android:text="@string/hello_world" />

<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="0dp"
    android:textSize="12sp"
    android:id="@+id/button3"
     android:layout_alignLeft="@+id/button1"
    android:layout_alignRight="@+id/button1"
    android:layout_below="@+id/button2"
    android:background="@drawable/button_gradient"
    android:text="@string/hello_world" />

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="10dp"
    android:textSize="12sp"
    android:layout_below="@+id/button3"
    android:layout_alignLeft="@+id/button1"
    android:layout_alignRight="@+id/button1"
    android:background="@drawable/button_gradient"
    android:text="@string/hello_world" /> 
```

# c# - Get copy of an object that won't change its parent object value

> ID：15552147
> 
> 赞同：-1
> 
> 时间：2013-03-21T15:49:51.917
> 
> 标签：c#, linq

I have an object class `TimeDuration`. When I tried to change the value of object taken from the array Span, the value inside the array also changes. How can I get copy of an object that won't change its parent object value? I need to pass this copy to another function where I have to make changes to this object

```
 public void test()
        {
            List<TimeDuration> Span = new List<TimeDuration>();
            TimeDuration ob = new TimeDuration();
            ob.FromTime = DateTime.Now;
            ob.ToTime = DateTime.Now.AddDays(1);
            Span.Add(ob);

           //Trying to assign value here!
           TimeDuration ob2= Span[1];
           ob2.FromTime = DateTime.Now.AddDays(3);

        }

public class TimeDuration
    {
        public DateTime FromTime { get; set; }
        public DateTime ToTime { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T15:52:49.947

Firstly, you should *understand* why the current code behaves as it does. See [my article on reference types and value types](http://pobox.com/~skeet/csharp/references.html) for more details.

> How can I get copy of an object that won't change its parent object value?

Two simple options:

*   Create some sort of cloning method which creates a copy of the existing object. You need to do this explicitly - although you could use `object.MemberwiseClone` as a shortcut in some cases. In many cases it's pretty simple, although inheritance makes it harder.
*   Make your `TimeDuration` class immutable, e.g. with methods of `WithToTime` returning a *new* version:

    ```
    public TimeDuration WithFromTime(DateTime newFromTime)
    {
        return new TimeDuration(newFromTime, ToTime);
    } 
    ```

    You'd make your properties read-only, and provide a constructor taking both values (which can also validate them). You might even *consider* making it a struct at this point.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T15:53:59.563

Consider turning the class into a struct, and of course also make it immutable:

```
public struct TimeDuration
{
    public DateTime FromTime { get; private set; }
    public DateTime ToTime { get; private set; }

    public TimeDuration(DateTime fromTime, DateTime toTime) : this()
    {
        FromTime = fromTime;
        ToTime = toTime;
    }

    public TimeDuration SetFromTime(DateTime fromTime)
    {
        var copy = this;
        copy.FromTime = fromTime;
        return copy;
    }

    public TimeDuration SetToTime(DateTime toTime)
    {
        var copy = this;
        copy.ToTime = toTime;
        return copy;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T15:54:40.427

Make your `TimeDuration` a `struct` instead of a `class`: value types are passed by value, so you will get a kind of "copy" behaviour.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T15:52:39.273

Classes are reference types. The value inside the array is a pointer to the memory location of your `TimeDuration` object and not a new instance of it. Therefore when you change the value it affects the array also.

You will have to create a new object of TimeDuration and pass that about.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T15:53:23.647

If you're always using `TimeDuration` this way, you may want to consider changing it from a `class` to a `struct`. To duplicate a `class`, you should implement [ICloneable](http://msdn.microsoft.com/en-us/library/system.icloneable.aspx) and call the `Clone` method.

# sql - Sybase SQL - 从查询结果中删除“半重复”

> ID：15552152
> 
> 赞同：0
> 
> 时间：2013-03-21T15:50:04.180
> 
> 标签：sql, sybase, duplicate-removal, sybase-asa

我有一个查询，它使用两个`SELECT`使用`UNION ALL`. 这两个语句都从相似的表中提取数据以填充查询结果。我正在尝试从查询中删除“半重复”行，但这样做时遇到问题。

我的查询如下：

```
 SELECT DISTINCT * 
FROM
    (
    SELECT
        TeamNum = CASE 
                WHEN T.TeamName = 'Alpha Team'
                    THEN '1'
                WHEN T.TeamName IN ('Bravo Team', 'Charlie Team')
                    THEN '2'
                WHEN T.TeamName = 'Delta Team'
                    THEN '3'
                ELSE '<Undefined>'
                END,
        P.PatientLastName AS LastName,
        P.PatientFirstName AS FirstName,
        R.PrimaryCity AS City,
        ReimbursorName = CASE
                WHEN RE.ReimbursorDescription = 'Medicare'
                    Then 'R1'
                WHEN RE.ReimbursorDescription = 'Medicaid'
                    Then 'R2'
                ELSE 'R3'
                END,
        P.PatientID AS PatientID
    FROM 
        PatReferrals PR LEFT JOIN Patient P ON PR.PatientID = P.PatientID,
        Patient P LEFT OUTER JOIN Rolodex R ON P.RolodexID = R.RolodexID,
        PatReferrals PR LEFT OUTER JOIN PatReimbursors PRE ON PR.PatientID = PRE.PatientID,
        PatReimbursors PRE LEFT OUTER JOIN Reimbursors RE ON PRE.ReimbursorID = RE.ReimbursorID,
        PatReferrals PR FULL OUTER JOIN Teams T ON PR.TeamID = T.TeamID,
    WHERE 
        PR.ReferralDate BETWEEN GETDATE()-4 AND GETDATE()-1
        AND PR.Status <> 'R' 
        AND PRE.CoveragePriority = '1'
        AND PRE.ExpirationDate IS NULL 

    UNION ALL

    SELECT
        TeamNum = CASE 
                WHEN T.TeamName = 'Alpha Team'
                    THEN '1'
                WHEN T.TeamName IN ('Bravo Team', 'Charlie Team')
                    THEN '2'
                WHEN T.TeamName = 'Delta Team'
                    THEN '3'
                ELSE '<Undefined>'
                END,
        P.PatientLastName AS LastName,
        P.PatientFirstName AS FirstName,
        R.PrimaryCity AS City,
        ReimbursorName = CASE
                WHEN RE.ReimbursorDescription = 'Medicare'
                    Then 'E1'
                WHEN RE.ReimbursorDescription = 'Medicaid'
                    Then 'E2'
                ELSE 'E3'
                END,
        P.PatientID AS PatientID
    FROM 
        PatReferrals PR LEFT JOIN Patient P ON PR.PatientID = P.PatientID,
        Patient P LEFT OUTER JOIN Rolodex R ON P.RolodexID = R.RolodexID,
        PatReferrals PR LEFT OUTER JOIN PatEligibilities PE ON PR.PatientID = PE.PatientID,
        PatEligibilities PE LEFT OUTER JOIN Reimbursors RE ON PE.ReimbursorID = RE.ReimbursorID,
        PatReferrals PR FULL OUTER JOIN Teams T ON PR.TeamID = T.TeamID,
    WHERE 
        PR.ReferralDate BETWEEN GETDATE()-4 AND GETDATE()-1
        AND PR.Status <> 'R' 
        AND PE.Status <> 'V'
        AND PE.ApplicationDate BETWEEN DATE(PR.ReferralDate)-5 AND DATE('2100/01/01')
    ) 

AS DUMMYTBL

ORDER BY 
    DUMMYTBL.LastName ASC,
    DUMMYTBL.FirstName ASC 
```

运行查询时收到的结果如下：

```
3   Doe Jane    Town    R1  19874
1   Roe John    City    R3  50016
1   Roe John    City    E1  50016
2   Smith   Jane    Town    E3  33975 
```

一旦从原始查询中引入结果，我需要删除的数据是基于特定条件的重复行。每个人只能列出一次，并且他们必须有一个支付来源（R1、R2、R3、E1、E2、E3）。如果有 R#，则不能为该人列出 E#。如果没有 R#，则必须列出 E#。如我的示例结果所示，第 2 行和第 3 行列出了同一个人，但有两个支付来源（R3 和 E1）。

如何使用我列出的标准让每个人只显示一行？

**编辑**：修改 SQL 查询以显示`WHERE`子句中的原始变量，以便显示查询的更多详细信息。PatReimbursors 和 PatEligibilities 表具有相似的数据，但是为了提取正确的数据，标准不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:56:18.453

您的查询没有意义。我将首先消除由`,`in`from`子句生成的隐式笛卡尔积。

我的猜测是 from 子句应该是：

```
FROM 
    PatReferrals PR LEFT JOIN
    Patient P
    ON PR.PatientID = P.PatientID left outer join
    Rolodex R
    ON P.RolodexID = R.RolodexID left outer join
    PatEligibilities PE
    ON PR.PatientID = PE.PatientID left outer join
    Reimbursors RE
    ON PE.ReimbursorID = RE.ReimbursorID left outer join
    Teams T ON PR.TeamID = T.TeamID 
```

完成此操作后，您可能不需要`union all`或`select distinct`. 您可以将报销人和资格都放在同一个查询中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:00:20.653

使用一个或多个子查询。

应使用以下模式编写整个查询：

```
 Select Distinct [Person Data]
 From PersonTable
     left Join to otherTable1 -- add outer join for each table you need data from
         On [Conditions that ensure join can generate only one row per person,
               ... and specify which of possibly many rows to get...] 
```

确保条件消除了连接在人员表中的每个人行中从另一个 [外部] 表生成多于一行的任何可能性。这可能（并且经常）要求连接条件基于子查询，例如......

```
 Select Distinct [Person Data]
 From PersonTable p
     left Join to employments e -- add outer join for each table you need data from
         On e.PersonId = p.PersonId 
            and e.HireDate = (Select Max(hiredate) from employments
                              where personId = p.PersonId) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T19:25:46.590

在今天处理了相当长的一段时间后，我找到了解决我遇到的问题的方法。这是有效的解决方案，可以提取我需要的正确信息：

```
SELECT DISTINCT 
    TeamNum,
    LastName,
    FirstName,
    City,
    ReimbursorName = CASE
        WHEN max(ReimbursorName) IN ('R1', 'E1')
            THEN '1' 
        WHEN max(ReimbursorName) IN ('R2', 'E2')
            THEN '2'
        ELSE '3'
        END,
    PatientID 
FROM
    (
    SELECT
        TeamNum = CASE 
                WHEN T.TeamName = 'Alpha Team'
                    THEN '1'
                WHEN T.TeamName IN ('Bravo Team', 'Charlie Team')
                    THEN '2'
                WHEN T.TeamName = 'Delta Team'
                    THEN '3'
                ELSE '<Undefined>'
                END,
        P.PatientLastName AS LastName,
        P.PatientFirstName AS FirstName,
        R.PrimaryCity AS City,
        ReimbursorName = CASE
                WHEN RE.ReimbursorDescription = 'Medicare'
                    Then 'R1'
                WHEN RE.ReimbursorDescription = 'Medicaid'
                    Then 'R2'
                ELSE 'R3'
                END,
        P.PatientID AS PatientID
    FROM 
        PatReferrals PR LEFT JOIN Patient P ON PR.PatientID = P.PatientID,
        Patient P LEFT OUTER JOIN Rolodex R ON P.RolodexID = R.RolodexID,
        PatReferrals PR LEFT OUTER JOIN PatReimbursors PRE ON PR.PatientID = PRE.PatientID,
        PatReimbursors PRE LEFT OUTER JOIN Reimbursors RE ON PRE.ReimbursorID = RE.ReimbursorID,
        PatReferrals PR FULL OUTER JOIN Teams T ON PR.TeamID = T.TeamID
    WHERE 
        PR.ReferralDate BETWEEN GETDATE()-4 AND GETDATE()-1
        AND PR.Status <> 'R' 
        AND PRE.CoveragePriority = '1'
        AND PRE.ExpirationDate IS NULL 

    UNION ALL

    SELECT
        TeamNum = CASE 
                WHEN T.TeamName = 'Alpha Team'
                    THEN '1'
                WHEN T.TeamName IN ('Bravo Team', 'Charlie Team')
                    THEN '2'
                WHEN T.TeamName = 'Delta Team'
                    THEN '3'
                ELSE '<Undefined>'
                END,
        P.PatientLastName AS LastName,
        P.PatientFirstName AS FirstName,
        R.PrimaryCity AS City,
        ReimbursorName = CASE
                WHEN RE.ReimbursorDescription = 'Medicare'
                    Then 'E1'
                WHEN RE.ReimbursorDescription = 'Medicaid'
                    Then 'E2'
                ELSE 'E3'
                END,
        P.PatientID AS PatientID
    FROM 
        PatReferrals PR LEFT JOIN Patient P ON PR.PatientID = P.PatientID,
        Patient P LEFT OUTER JOIN Rolodex R ON P.RolodexID = R.RolodexID,
        PatReferrals PR LEFT OUTER JOIN PatEligibilities PE ON PR.PatientID = PE.PatientID,
        PatEligibilities PE LEFT OUTER JOIN Reimbursors RE ON PE.ReimbursorID = RE.ReimbursorID,
        PatReferrals PR FULL OUTER JOIN Teams T ON PR.TeamID = T.TeamID
    WHERE 
        PR.ReferralDate BETWEEN GETDATE()-4 AND GETDATE()-1
        AND PR.Status <> 'R' 
        AND PE.Status <> 'V'
        AND PE.ApplicationDate BETWEEN DATE(PR.ReferralDate)-5 AND DATE('2100/01/01')
    ) 

AS DUMMYTBL
GROUP BY
    TeamNum,
    LastName,
    FirstName,
    City,
    PatientID
ORDER BY 
    DUMMYTBL.LastName ASC,
    DUMMYTBL.FirstName ASC 
```

感谢您提供的所有回复。

# java - Android：通过http播放大型视频MP4文件

> ID：15552153
> 
> 赞同：1
> 
> 时间：2013-03-21T15:50:04.027
> 
> 标签：java, android, video, streaming

我的 http 服务器上有 300 MB 的视频...我正在尝试制作简单的代码来在我的应用程序中远程播放（在 3G 模式下）这些视频 - sd 存储或本地存储不是一个选项。当然，我从 SDK android-17 (MediaPlayerDemo_Video, VideoViewDemo...) 中的演示源开始，在 3G 模式下我的视频无法播放（我正在三星 Galaxy Nexus 上进行测试）。之后，我在下一个代码中进行了新尝试：

```
/**
 * Listing 15-4: Initializing and assigning a Surface View to a Media Player
 */
import java.io.IOException;

import mobile.dariknews.R;
import android.app.Activity;
import android.media.AudioManager;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.MediaController;
import android.widget.MediaController.MediaPlayerControl;

public class SurfaceViewVideoViewActivity extends Activity 
  implements SurfaceHolder.Callback {

  static final String TAG = "SurfaceViewVideoViewActivity";

  private MediaPlayer mediaPlayer;

  public void surfaceCreated(SurfaceHolder holder) { 
    try {
      // When the surface is created, assign it as the
      // display surface and assign and prepare a data 
      // source.
      mediaPlayer.setDisplay(holder);
      mediaPlayer.setDataSource("http://snimkitevi-bg.com/darik/1.MP4");
      //mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
      mediaPlayer.prepareAsync();
    } catch (IllegalArgumentException e) {
      Log.e(TAG, "Illegal Argument Exception", e);
    } catch (IllegalStateException e) {
      Log.e(TAG, "Illegal State Exception", e);
    } catch (SecurityException e) {
      Log.e(TAG, "Security Exception", e);
    } catch (Exception e) {      
      Log.e(TAG, "IO Exception", e);
    }
  }

  public void surfaceDestroyed(SurfaceHolder holder) {
    mediaPlayer.release();
  }  

  public void surfaceChanged(SurfaceHolder holder,
                             int format, int width, int height) { }

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.surfaceviewvideoviewer);

    // Create a new Media Player.
    mediaPlayer = new MediaPlayer();

    // Get a reference to the Surface View.
    final SurfaceView surfaceView =
      (SurfaceView)findViewById(R.id.surfaceView);

    // Configure the Surface View.
    surfaceView.setKeepScreenOn(true);

    // Configure the Surface Holder and register the callback.
    SurfaceHolder holder = surfaceView.getHolder();
    holder.addCallback(this);
    holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    holder.setFixedSize(400, 300);

    // Connect a play button.
    Button playButton = (Button)findViewById(R.id.buttonPlay);
    playButton.setOnClickListener(new OnClickListener() {
      public void onClick(View v) {
        mediaPlayer.start();        
      }
    });

    // Connect a pause button.
    Button pauseButton = (Button)findViewById(R.id.buttonPause);
    pauseButton.setOnClickListener(new OnClickListener() {
      public void onClick(View v) {
        mediaPlayer.pause();        
      }
    });

    // Add a skip button.
    Button skipButton = (Button)findViewById(R.id.buttonSkip);    
    skipButton.setOnClickListener(new OnClickListener() {
      public void onClick(View v) {
        mediaPlayer.seekTo(mediaPlayer.getDuration()/2);
      }
    });

    /**
     * Listing 15-5: Controlling playback using the Media Controller
     */
    MediaController mediaController = new MediaController(this);
    mediaController.setMediaPlayer(new MediaPlayerControl() {
      public boolean canPause() {
        return true;
      }

      public boolean canSeekBackward() {
        return true;
      }

      public boolean canSeekForward() {
        return true;
      }

      public int getBufferPercentage() {
        return 0;
      }

      public int getCurrentPosition() {
        return mediaPlayer.getCurrentPosition();
      }

      public int getDuration() {
        return mediaPlayer.getDuration();
      }

      public boolean isPlaying() {
        return mediaPlayer.isPlaying();
      }

      public void pause() {
        mediaPlayer.pause();
      }

      public void seekTo(int pos) {
        mediaPlayer.seekTo(pos);
      }

      public void start() {
        mediaPlayer.start();
      }
    });    
  }
} 
```

在新的尝试之后

```
import android.app.Activity;
import android.app.Application;
import android.graphics.Bitmap;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Handler;
import android.widget.MediaController;
import android.widget.VideoView;

public class PlayerActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.videoplayer);
        new LoadOutbox().execute();

    }

    /**
     * Background Async Task to Load all OUTBOX messages by making HTTP Request
     * */
    class LoadOutbox extends AsyncTask<String, String, String> {
        int progressBarStatus = 0;
        private Handler progressBarHandler = new Handler();

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();

        }

        /**
         * getting Outbox JSON
         * */
        protected String doInBackground(String... args) {
            // Building Parameters
            VideoView videoView = (VideoView) findViewById(R.id.videoView1);
            videoView.setKeepScreenOn(true);
            // Attach a Media Controller MediaController mediaController = new
            // MediaController( this); videoView.setMediaController(
            // mediaController);
            MediaController mediaController = new MediaController(
                    PlayerActivity.this);

            videoView.setMediaController(mediaController);

            Uri uri = Uri.parse("http://snimkitevi-bg.com/darik/1.MP4");
            videoView.setVideoURI(uri);
            videoView.start();

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog after getting all products

            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {

                }
            });

        }

    }

    public static Bitmap getLocalImageBitmap(String url) {
        return MainNewsActivities.getLocalImageBitmap(url);
    }

} 
```

之后，我使用 MediaPlayer 和 VIewVideo 进行了 50 次其他测试...所有结果都相同 - 视频播放缓慢且冻结。我的需求非常简单——我的网站上有大视频文件 (mp4)，我想在我的应用程序上播放它们。所以我在这里 - 在 android 应用程序中播放大型远程文件的正确公式是什么？

PS：当然我尝试使用 GStreamer，但是这个框架与上一个 android 环境不兼容 - 我在 2 天内玩过......我的视频还可以 - 在 wifi 模式下我玩[http://snimkitevi-bg.com/darik /1.MP4](http://snimkitevi-bg.com/darik/1.MP4)

那么你能给我一些好的建议、例子、教程吗 MediaPlayer 如何在 3G 互联网连接中正常播放、缓冲和快速播放大视频文件？

# ruby-on-rails - 卸载 simpleform gem

> ID：15552155
> 
> 赞同：3
> 
> 时间：2013-03-21T15:50:08.603
> 
> 标签：ruby-on-rails, simple-form

我已经用 Rails Rails 3.2.12 和 Ruby 2.0.0p0 从我的 Gemfile 中注释掉了 gem 'simple_form'。当我这样做时`rails generate scaffold`，我仍然会得到 simple_form 表单。

有没有办法`form_for`代替原来的脚手架？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T15:55:19.137

以下应正确删除它：

```
# rails destroy simple_form:install 
# bundle 
```

此外，您可以检查 lib/templates 中的文件并删除 simple_form 的相关文件。

[http://railscasts.com/episodes/234-simple-form?view=comments#comment_150699](http://railscasts.com/episodes/234-simple-form?view=comments#comment_150699) [http://github.com/plataformatec/simple_form/issues/680](http://github.com/plataformatec/simple_form/issues/680)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T15:52:27.760

再次安装捆绑包后尝试，

```
bundle install 
```

# django - 通过 Django 提供静态文件的安全问题？

> ID：15552158
> 
> 赞同：8
> 
> 时间：2013-03-21T15:50:12.283
> 
> 标签：django, security, webserver

[官方文档](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#module-django.contrib.staticfiles)说，静态文件视图`serve`：

> ...这种观点效率极低，而且可能不安全

此警告是否仅适用于此特定视图，或者通过 Django 提供静态文件的概念是否存在固有的安全问题？这些是什么？假设我已经对我的应用程序进行了基准测试并且性能是可以接受的，还有其他我应该注意的问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T17:31:13.580

# 它是不安全的，因为它不一定是安全的

通过 django 提供静态文件意味着您通过 Python 代码来执行您的网络服务器可以更**有效**地执行的操作。

鉴于提供静态文件在性能方面是灾难性的，*没有人会在生产中使用它*。
因此，*没有人关心在 Django 中提供静态文件的安全性*。
因此，这种观点 *可能是不安全*的。

* * *

最终，它与开发服务器的基本原理相同。您不*应该*在生产中使用它，也没有人致力于使其安全。它只是实用的开发。

此外，一些低效的东西会使您暴露于 DoS 攻击。所以是的，这是不安全的。

# 但你不应该使用它。

为什么要通过 Django 提供静态文件？是控制对这些文件的访问吗？

如果是，您应该使用`X-Accel-Redirect`(Nginx) 或`X-Sendfile`(Apache) 标头。

但是不要自己做，使用：[https ://github.com/johnsensible/django-sendfile](https://github.com/johnsensible/django-sendfile)

# c - 从不兼容的指针类型传递“fprintf”的参数 1 时出错。C

> ID：15552162
> 
> 赞同：0
> 
> 时间：2013-03-21T15:50:25.727
> 
> 标签：c, data-structures

这是我到目前为止所拥有的。唯一的构建问题是第 95 行，即最后一行代码。我正在尝试计算文件中的行数，然后从数据构建数组并从用户输入中显示最大值和最小值的数组。

```
#include "stdio.h"
#include "stdlib.h"

struct earthquake_t
{ 
    float lat;
    float lng;
    float dep;
    float mag;
};

FILE* fid;

int main(void)
{
    double lat,lng, dep,mag;
    double userminlat,userminlng,usermaxlat,usermaxlng,minlat,minlng,maxlat,maxlng,                      ch,line,count
    struct earthquake_t *earthquake;
    int i;

    fid=fopen("day.txt","r");

    while (!feof(fid))
    {

         line = fscanf(fid,"%lf, %lf, %lf, %lf\n",&lng,&lat,&dep,&mag);
         count = fscanf(fid," %lf %lf %lf %lf\n",&lng,&lat,&dep,&mag);

        if (count ==4)
        {
             line ++;
        }
    }

    fseek(fid,1,SEEK_SET);
    printf("%d\n",sizeof(struct earthquake_t));          
    earthquake = (struct earthquake_t *)malloc(sizeof(struct earthquake_t)*line);

    for (i=0;i<line;i++)
    {          
        sscanf("fid", "%lf %lf %lf %lf\n",&lng,&lat,&dep,&mag,
        earthquake[i].lat,
        earthquake[i].lng,
        earthquake[i].dep,
        earthquake[i].mag);

        if(earthquake[i].lng >maxlng) 
        {     
            maxlng = earthquake[i].lng;
        }
        if(earthquake[i].lng >minlng)
        {    
            minlng = earthquake[i].lng;
        }
        if(earthquake[i].lat >maxlat)
        {
            maxlat = earthquake[i].lat;
        }
        if(earthquake[i].lat >minlat)
        {

        minlat = earthquake[i].lat;
        }

    } 

    printf("Longitude is between %f and %f\n",minlng,maxlng);
    printf("Latitude is between %f and %f\n\n",minlat,maxlat);
    printf("Give a value for min longitude: ");
    scanf("%d",userminlng);
    printf("Give a value for max longitude: ");
    scanf("%d",usermaxlng);
    printf("Give a value for min latitude: ");
    scanf("%d",userminlat);
    printf("Give a value for max latitude: ");
    scanf("%d",usermaxlat);

    FILE *fid2;
    fid2=fopen("subset.txt","w");

    for (i=0;i<line;i++)
    {     
        if((earthquake[i].lng > userminlng) && (earthquake[i].lng < usermaxlng))
        {    
            if((earthquake[i].lat > userminlat) && (earthquake[i].lat < userminlat))
            {
                fprintf( "subset.txt" ,"%f,%f,%f,%f \n", earthquake[i].lat,              earthquake[i].lng, earthquake[i].dep, earthquake[i].mag); //error

            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T15:51:41.617

`fprintf`将`FILE *`指针作为其第一个参数。在这种情况下，您可能想传入`fid2`.

# arrays - 在 Actionscript 中对多维数组进行排序

> ID：15552173
> 
> 赞同：0
> 
> 时间：2013-03-21T15:50:57.577
> 
> 标签：arrays, sorting, actionscript, arraycollection

我有一组需要排序的数组，但我无法弄清楚。我的主数组（mainArr）如下所示：

```
mainArr = ({code:"1", date:"1/2/2001", status:"Active"},
           {code:"2", date:"6/2/2004", status:"Terminated"},
           {code:"3", date:"2/2/2003", status:"Transferred"},
           {code:"4", date:"9/2/2003", status:"Active"}); 
```

我需要按对象中的日期对 mainArr 进行排序。该列表最终应该是这样的：

```
mainArr = ({code:"1", date:"1/2/2001", status:"Active"},
           {code:"3", date:"2/2/2003", status:"Transferred"},
           {code:"4", date:"9/2/2003", status:"Active"}.
           {code:"2", date:"6/2/2004", status:"Terminated"}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:22:03.207

大多数情况下，可以使用 Array 的[sortOn](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html#sortOn%28%29)方法。例如，如果您想按“代码”排序：

```
mainArr.sortOn("code"); 
```

这将使用每个对象的代码字段对数组进行排序以确定顺序。

但是，由于您希望按日期排序（以字符串格式），排序会给出不正确的结果（因为按字母顺序和日期顺序不一样）。您可以为数组中的每个对象添加一个新属性以使排序更容易，例如：

```
{code:"1", date:"1/2/2001", status:"Active"} 
```

以相反的顺序添加日期（sortableDate），它将变为：

```
{code:"1", date:"1/2/2001", status:"Active", sortableDate:"2001/2/1"} 
```

然后您可以订购：

```
mainArr.sortOn("sortableDate"); 
```

# asp.net - 切换器 .GetStack 返回 null 如何在 sitecore 中实现动态占位符

> ID：15552175
> 
> 赞同：0
> 
> 时间：2013-03-21T15:50:59.247
> 
> 标签：asp.net, sitecore, sitecore6

我正在尝试在 Sitecore 中实现 Nick Wesselman 的动态占位符技术。我正在使用 sitecore 6.5 和 asp.net。

[http://www.techphoria414.com/Blog/2011/August/Dynamic_Placeholder_Keys_Prototype](http://www.techphoria414.com/Blog/2011/August/Dynamic_Placeholder_Keys_Prototype) [http://www.techphoria414.com/Blog/2012/May/Sitecore_Page_Editor_Unleashed](http://www.techphoria414.com/Blog/2012/May/Sitecore_Page_Editor_Unleashed)

我使用了在 Sitecore_Page_Editor_Unleashed BLOG 中找到的源代码

所有管道似乎都已就位并正在工作。但是在动态占位符控件中，尽管控件上有五个动态占位符，但以下代码位返回 0（零）

```
Stack<Placeholder> stack = Switcher<Placeholder, PlaceholderSwitcher>.GetStack(false); 
```

为了隔离问题，我创建了一个非常简单的 sitecore 实例。1 个布局和 1 个子布局。

在代码隐藏子布局中，我有以下代码用于演示目的：

```
var list = new List<int>();
for (int i = 0; i < 5; i++)
{
    list.Add(i);
}

Repeater.DataSource = list;
DataBind(); 
```

这是 ascx/sublayout 的来源

```
<asp:Repeater runat="server" ID="Repeater">
     <ItemTemplate>
       <mi:DynamicKeyPlaceholder runat="server"  ID="pl" Key="place"></mi:DynamicKeyPlaceholder> 
    </ItemTemplate>
</asp:Repeater> 
```

结果是所有五个占位符仍然具有相同的键。

该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:22:25.377

I've never tested this solution with multiple dynamically created placeholder controls inside the same sublayout. It's designed to solve the problem of the same sublayout (with a placeholder) being placed on a page, multiple times. It works by grabbing the ID of the containing rendering and appending it to the placeholder key. Steps I would take:

*   Ensure that the sublayout containing your repeater is placed in the layout dynamically, through a placeholder. You should not be using `<sc:Sublayout/>` to put the sublayout on the page. This may explain why the stack is empty.
*   You will also need to databind the "Key" field on the `DynamicKeyPlaceholder`. Within the same sublayout, all the `DynamicKeyPlaceholder` controls need to have a unique Key.

Of course, the danger here is that if the data driving your repeater changes, the Key could change. You might consider re-evaluating your architecture and driving it based on placing the same sublayout multiple times (with datasources), instead of a repeater.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:16:12.813

我所做的与您的要求相似...我从调用控件（希望具有动态 ph 值）创建了另一个子布局（实现动态占位符）的引用。

所以假设我的调用控件是ControlA，实现控件是ControlB。

这是**ControlA 的标记**：

```
 <ControlB ID="SectionItems" runat="server" CurrentItem="<%# Container.DataItem %>" /> 
```

这是它**背后的代码**：

```
 private static void SetIndexForControlBItems(RepeaterItemEventArgs e)
   {
       var controlBItems = e.Item.FindControl("ControlB") as ControlB;
       if (controlBItems != null)
          controlBItems.PropertyName = e.Item.ItemIndex.ToString();
   } 
```

当您分配属性名称（将出现在 ControlB 中）时，您将获得分配动态 PH 的索引的值。在**ControlB**中，您可以执行以下操作：

```
 private void SetPlaceholderKeys(RepeaterItemEventArgs e)
    {
        Placeholder phPreColumnContentTopLeft = e.Item.FindControl("phColumnContentTopLeft") as Placeholder;
        if (phPreColumnContentTopLeft != null)
            phPreColumnContentTopLeft.Key = "topLeftColumnSectionItems" + e.Item.ItemIndex + PropertyName; 
```

希望这*会有所帮助*！

# opengl - OpenCV-OpenGL 互操作性

> ID：15552179
> 
> 赞同：1
> 
> 时间：2013-03-21T15:51:05.203
> 
> 标签：opengl, opencv

我在 Linux 下编译了支持 OpenGL 的 OpenCV 2.4.4，但我不知道如何使用 opengl_interop.hpp 函数（其中一些甚至没有记录！至少在我的文档版本中）。在启用 OpenGL 的部分中查看 window.cpp，我发现了一些有关使用 setOpenGLContext、setOpenGLDrawCallback 和 updateView 函数的提示，但即使是这段非常简单的代码，我也无法工作：

```
#include <opencv2/opencv.hpp>
#include <GL/gl.h>
#include <GL/glut.h>
#include <opencv2/core/opengl_interop.hpp>

using namespace cv;

void on_opengl(void* userdata);

int main(void)
{
    VideoCapture webcam(CV_CAP_ANY);
    Mat frame;
    namedWindow("window", CV_WINDOW_OPENGL);
    setOpenGlContext("window");
    while(waitKey(30) < 0)
    {
        webcam >> frame;
        setOpenGlDrawCallback("window", on_opengl);
        imshow("window", frame);
        updateWindow("window");
    }

    return 0;
}

void on_opengl(void* userdata)
{
    glLoadIdentity();

    glTranslated(0.0, 0.0, 1.0);

    glRotatef( 55, 1, 0, 0 );
    glRotatef( 45, 0, 1, 0 );
    glRotatef( 0, 0, 0, 1 );

    static const int coords[6][4][3] = {
        { { +1, -1, -1 }, { -1, -1, -1 }, { -1, +1, -1 }, { +1, +1, -1 } },
        { { +1, +1, -1 }, { -1, +1, -1 }, { -1, +1, +1 }, { +1, +1, +1 } },
        { { +1, -1, +1 }, { +1, -1, -1 }, { +1, +1, -1 }, { +1, +1, +1 } },
        { { -1, -1, -1 }, { -1, -1, +1 }, { -1, +1, +1 }, { -1, +1, -1 } },
        { { +1, -1, +1 }, { -1, -1, +1 }, { -1, -1, -1 }, { +1, -1, -1 } },
        { { -1, -1, +1 }, { +1, -1, +1 }, { +1, +1, +1 }, { -1, +1, +1 } }
    };

    for (int i = 0; i < 6; ++i) {
                glColor3ub( i*20, 100+i*10, i*42 );
                glBegin(GL_QUADS);
                for (int j = 0; j < 4; ++j) {
                        glVertex3d(0.2*coords[i][j][0], 0.2 * coords[i][j][1], 0.2*coords[i][j][2]);
                }
                glEnd();
    }
} 
```

在网络摄像头流上使用 opengl 的正确方法是什么？再见！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-15T14:15:49.603

为我糟糕的英语道歉，因为它不是我的母语。

OpenGL 是为渲染图形而设计的，OpenCV 是为计算机视觉而设计的。因此，我建议您在基于 GL 的应用程序中使用 CV，而不是使用 CV API 进行渲染、回调等。

如果你想要的只是一个简单的演示，那么你可以使用 freeGLUT 编写一个非常简单的带有几个回调的程序，freeGLUT 将处理窗口回调和 GL 上下文创建。（GLFW或Qt也可以）在程序中，使用`cv::ogl::Texture2D`类来处理纹理对象。使用`Texture2D::copyFrom(...)`和`Texture2D::copyTo(...)`处理设备/主机内存传输。在渲染回调中，使用标准 GL 例程绘制全屏矩形。这种方法虽然效率不高，但确实有效。

```
#include <GL/glew.h>
#include <GL/freeglut.h>
#include <opencv2/opencv.hpp>
#include <opencv2/core/opengl_interop.hpp>

using namespace cv;

//Global vars
Texture2D g_img;
void timer_cb( int )
{
    //...Update the content of g_img
}

void resize_cb( int w, int h ) { /*...*/ }
void render_cb() {
    /* ...render g_img here */
    g_img.bind();
#ifdef USE_FIXED_PIPELINE
//use fixed pipeline for old-school GL rendering
    glMatrixMode( GL_MODELVIEW );
    //Do some transformation
    glBegin(GL_QUADS);
        glTexCoord(...);
        glVertex**(...);
        ...
    glEnd();
#else
//use shaders and VBOs for 3.1+ GL
    glBindProgram( ... );
    glBindBuffer( ... );
    glVertexAttribPointer( ... );
    glDrawArrays( ... );
#endif
}
int main( int argc, char** argv )
{
    //...init GLUT, GLEW and other stuff
    glutMainLoop();
    return 0;
} 
```

笔记：

一种。推荐使用 freeGLUT 而不是 GLUT，它们是两件事。GLUT 已经过时了。但是 freeGLUT 在扩展 GLUT 的同时继续支持最新的 OpenGL 版本。

湾。你可能需要一个像 GLEW 这样的[GL 加载库](http://www.opengl.org/wiki/OpenGL_Loading_Library)来获取 GL 函数指针

C。较新的 OpenGL (3.1+) 不再支持固定管道渲染，因此需要 VBO 和着色器。如果您以较低版本的 GL 为目标，则需要指定上下文版本。这可以通过`glutInitContextVersion( int major, int minor )`. 网上有很多教程。

# r - 如何撤消 data.table 中的 setkey 排序？

> ID：15552181
> 
> 赞同：14
> 
> 时间：2013-03-21T15:51:10.777
> 
> 标签：r, data.table

假设我有一个数据表 DT，我用 set 键更改了排序

```
setkey(DT,mykey) 
```

然后，也许我从另一张桌子加入一些东西。

```
DT=DT2[DT] 
```

有没有办法恢复我原来的行排序？我知道，我可以通过在使用 setkey 之前显式包含索引来做到这一点。

```
N=Nrow(DT)
DT[,orig_index:=1:N]
setkey(DT,mykey)
DT=DT2[DT]
setkey(DT,orig_index)
DT[,orig_index:=NULL] 
```

有没有更简单的方法？如果我用 order 而不是 set key 来做这个，这会更简单一些。

```
o=order(DT$mykey)
uo=order(o)
setkey(DT,mykey)
DT=DT2[DT]
DT=DT[uo,] 
```

我想如果 setkey 可以用这样的东西反转，那会很酷

```
setkey(DT,mykey,save.unset=T)
DT=DT2[DT]
unsetkey(DT) 
```

这里 save.unset=T 会告诉 data.table 保存最后的重新排序，以便可以反转它。

更好的是，也许

```
setkey(DT, reorder=F)
DT=DT2[DT] 
```

此选项将告诉 data.table 使用键排序进行连接或其他任何内容，而无需实际更改 DT 的顺序。不确定这是否可能或自然实施。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T19:03:37.313

同意。这就是我们所说的辅助键，计划是添加`set2key`来做到这一点。现在可以进行手动辅助键。但这与您在问题中的情况非常相似。它已经出现了很多。

[FR#1007 内置辅助键](https://r-forge.r-project.org/tracker/index.php?func=detail&aid=1007&group_id=240&atid=978)

和一些例子：

[https://stackoverflow.com/a/13660454/403310](https://stackoverflow.com/a/13660454/403310)
[https://stackoverflow.com/a/13969805/403310](https://stackoverflow.com/a/13969805/403310)

# java - 通过减法将查询替换为连字符

> ID：15552183
> 
> 赞同：3
> 
> 时间：2013-03-21T15:51:11.467
> 
> 标签：java

我在网上搜索了几次，但没有找到任何可以帮助我的东西（在 java 中）。

事实上，我需要在 sql 表中搜索一些包含连字符的引用中的一些行。产生的问题是 sql 用减法的结果替换了我的引用。列的类型是字符串。

```
Statement stmt = con.createStatement();
String query = "SELECT * FROM WAREHOUSE WHERE REF LIKE('96-18')" ;
Statement statement = con.createStatement(ResultSet.TYPE_FORWARD_ONLY, ResultSet.CONCUR_READ_ONLY);

ResultSet rs = statement.executeQuery(query);
while (rs.next()) {
    System.out.println(rs.getString("S_FAMILY"));
} 
```

在这段代码中，它用 78 替换了我的引用，并且自然不会返回好的结果。

我搜索了一个转义字符，但没有找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:54:49.883

尝试`String`在查询中发送 as 参数。这样做需要将 into 更改`Statement`为`PreparedStatement`：

```
String query = "SELECT * FROM WAREHOUSE WHERE REF LIKE(?)" ;
PreparedStatement pstatement = con.prepareStatement(query,
            ResultSet.TYPE_FORWARD_ONLY,
            ResultSet.CONCUR_READ_ONLY);
pstatement.setString(1, "96-18");
ResultSet rs = pstatement.executeQuery(); 
```

注意：您应该`"96-18"`作为`String`变量的值发送，不要对其进行硬编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:56:02.920

你可以试试

```
SELECT * FROM WAREHOUSE WHERE REF LIKE('96\-18') ESCAPE '\' 
```

希望能帮助到你

# magento - Magento 支付和交易，实际工作模式？

> ID：15552187
> 
> 赞同：1
> 
> 时间：2013-03-21T15:51:27.013
> 
> 标签：magento, payment

我正在开发会计数据的导出模块，这两个关于付款的问题给我带来了麻烦：

*   一个订单是否可以有多个与之相关的付款？数据库中似乎就是这种情况，但是由于我正在为开发人员使用本地主机，因此我无法为测试进行真正的付款。例如，Order1 是 170$，它与 SALES_FLAT_ORDER_PAYMENT 表中的 Payment1 100$ 和 Payment2 70$ 相关联。

*   此外，交易与付款有何关系？在数据库中，似乎一笔付款可以关联多笔交易。这些交易是否计入支付价值？

据我搜索，Magento 的行为方式有很多，很难从系统中获得清晰和通用的信息（用于会计）。

# extjs - Ext.js 类别轴垂直标签在旋转后不居中

> ID：15552188
> 
> 赞同：1
> 
> 时间：2013-03-21T15:51:34.787
> 
> 标签：extjs, sencha-charts

[与 Sencha 论坛中的这篇](http://www.sencha.com/forum/showthread.php?238417-Chart-Category-Labels-not-centered-after-rotation&p=949938#post949938)文章类似，我如何让这个（下图）中的标签垂直显示**并**与网格对齐？似乎这应该是图表基础，但也许我错过了一些东西。

![标签与 x 轴上的网格不匹配](../Images/1d3a068da9d0f6953aec493da63343b0.png)

这是带有代码的 jsFiddle：http: [//jsfiddle.net/wilsjd/kg6Ps/8/](http://jsfiddle.net/wilsjd/kg6Ps/8/)

```
Ext.require('Ext.chart.*');

Ext.require(['Ext.Window', 'Ext.fx.target.Sprite', 'Ext.layout.container.Fit', 'Ext.window.MessageBox']);

Ext.define('CPI', {
    extend: 'Ext.data.Model',
    fields: [{
        name: 'ReportingPeriod',
        type: 'string'
    }, {
        name: 'PeriodAmount',
        type: 'decimal'
    }, {
        name: 'CumulativeAmount',
        type: 'decimal'
    }]
});

var store1 = Ext.create('Ext.data.Store', {
    model: 'CPI',
    data: [{
        ReportingPeriod: 'Period1',
        PeriodAmount: 1,
        CumulativeAmount: 1.2,
        Target: 1
    }, {
        ReportingPeriod: 'Period2',
        PeriodAmount: 1.2,
        CumulativeAmount: .2,
        Target: 1
    }, {
        ReportingPeriod: 'Period9',
        PeriodAmount: 1.5,
        CumulativeAmount: 0.8,
        Target: 1
    }]
});

var chart = Ext.create('Ext.chart.Chart', {
    style: 'background:#fff',
    animate: true,
    theme: 'Category1',
    store: store1,
    width: 300,
    height: 300,

    renderTo: 'chart',
    axes: [{
        type: 'Numeric',
        position: 'left',
        fields: ['PeriodAmount', 'CumulativeAmount'],
        title: 'CPI'                       
    },{
        type: 'Category',
        position: 'bottom',
        fields: ['ReportingPeriod'],
        title: 'Reporting Period',
         label   : {
             rotation:{degrees:270}

        }

    }],
    series: [{
        type: 'column',
        axis: 'left',
        xField: 'ReportingPeriod',
        yField: 'PeriodAmount', 
        renderer: function(sprite, record, attr, index, store) {
            var value = 0;
            if(record.get('PeriodAmount')>=1){
                value = 0;
            }else{
                value = 1;
            }
                var color = ['rgb(127, 255, 127)', 
                             'rgb(255, 0, 50)'
                             ][value];
                return Ext.apply(attr, {
                    fill: color
                });
            }
    }, {
        type: 'line',
        axis: 'left',
        xField: 'ReportingPeriod',
        yField: 'CumulativeAmount',
        markerConfig: {
                type: 'circle',
                size: 4,
                radius: 4,
                'stroke-width': 0,

            }

    }]
});

chart.show(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T23:40:50.710

我将**旋转**更改为**旋转**，它可以工作。

```
label:{
        rotate:{degrees:270}
} 
```

![在此处输入图像描述](../Images/d619df6536cff4c875ff96d0230e97db.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T21:06:12.680

像往常一样，sencha 论坛上的人们乐于助人：[http ://www.sencha.com/forum/showthread.php?156746-line-chart-time-axis-label-rotate-issue&p= 678586&viewfull=1#post678586](http://www.sencha.com/forum/showthread.php?156746-line-chart-time-axis-label-rotate-issue&p=678586&viewfull=1#post678586)

它似乎是通过`dy`html 中的属性设置的：

```
<tspan x="96" dy="3.75">Period1</tspan> 
```

改变`dy`将向左或向右移动 h-pos。不幸的是，似乎没有内置的方法可以做到这一点。

底线：它可能是一个错误（正如开发人员在上面的链接中提到的那样——但有益地没有展开）。

# javascript - 从画布获取图像尺寸

> ID：15552192
> 
> 赞同：0
> 
> 时间：2013-03-21T15:51:44.687
> 
> 标签：javascript, canvas

我有一个 612x300 像素的画布画板。如果我在其中画一些东西并得到图像，`toDataURL()`我会得到一个 612x300px 的图像，但我只想要没有背景的部分。我不知道如何从这个开始......

是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:13:38.477

**[编辑以反映新信息]**

以下是如何提取用户绘制的图片部分。

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/TPHrv/](http://jsfiddle.net/m1erickson/TPHrv/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<!--[if lt IE 9]><script type="text/javascript" src="../excanvas.js"></script><![endif]-->

<style>
    body{ background-color: ivory;}
    #container{position:relative; margin:15px;}
    canvas{border:1px solid red; position:absolute; top:0; left:0;}
    #sketch{position:absolute; top:315px; left:0px;}
    #results{border:1px solid green; position:absolute; top:350px; left:0px;}
</style>

<script>
$(function(){

    var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");
    var background=document.getElementById("background");
    var bkCtx=background.getContext("2d");
    var lastX;
    var lastY;
    var strokeColor="red";
    var strokeWidth=2;
    var canMouseX;
    var canMouseY;
    var canvasOffset=$("#canvas").offset();
    var offsetX=canvasOffset.left;
    var offsetY=canvasOffset.top;
    var isMouseDown=false;
    var top=10000;
    var left=10000;
    var right=0;
    var bottom=0;

    // draw the background
    var count=0;
    var radius=15;
    var d=radius*2
    bkCtx.strokeStyle="orange";
    bkCtx.lineWidth=1;
    bkCtx.fillStyle="blue";
    for(var y=0;y<10;y++){
      for(var x=0;x<10;x++){
          count++;
          bkCtx.beginPath();
          bkCtx.rect(x*30,y*30,30,30);
          //bkCtx.arc(x+radius, y+radius, radius, 0 , 2 * Math.PI, false);
          bkCtx.fillText(count,x*30+9,y*30+15);
          bkCtx.stroke();
          console.log(y);
        }
    }

    function handleMouseDown(e){
      canMouseX=parseInt(e.clientX-offsetX);
      canMouseY=parseInt(e.clientY-offsetY);

      // Put your mousedown stuff here
      lastX=canMouseX;
      lastY=canMouseY;
      isMouseDown=true;
    }

    function handleMouseUp(e){
      canMouseX=parseInt(e.clientX-offsetX);
      canMouseY=parseInt(e.clientY-offsetY);

      // Put your mouseup stuff here
      isMouseDown=false;
    }

    function handleMouseOut(e){
      canMouseX=parseInt(e.clientX-offsetX);
      canMouseY=parseInt(e.clientY-offsetY);

      // Put your mouseOut stuff here
      isMouseDown=false;
    }

    function handleMouseMove(e){
      canMouseX=parseInt(e.clientX-offsetX);
      canMouseY=parseInt(e.clientY-offsetY);

      // Put your mousemove stuff here
      if(isMouseDown){
          ctx.beginPath();
          ctx.moveTo(lastX,lastY);
          ctx.lineTo(canMouseX,canMouseY);
          ctx.stroke();     
          lastX=canMouseX;
          lastY=canMouseY;
          // define the bounding box of all drawings
          if(canMouseX<left){left=canMouseX;}
          if(canMouseX>right){right=canMouseX;}
          if(canMouseY<top){top=canMouseY;}
          if(canMouseY>bottom){bottom=canMouseY;}

      }
    }

    function capture(e){
        var imageData=bkCtx.getImageData(left,top,right-left,bottom-top);
        var temp=document.createElement("canvas");
        var tempCtx=temp.getContext("2d");
        temp.width=right-left;
        temp.height=bottom-top;
        tempCtx.putImageData(imageData,0,0);
        var results=document.getElementById("results");
        results.src=temp.toDataURL();
        console.log(left+"/"+top+" -- "+right+"/"+bottom);
    }

    $("#canvas").mousedown(function(e){handleMouseDown(e);});
    $("#canvas").mousemove(function(e){handleMouseMove(e);});
    $("#canvas").mouseup(function(e){handleMouseUp(e);});
    $("#canvas").mouseout(function(e){handleMouseOut(e);});
    $("#sketch").click(function(e){capture(e);});

}); // end $(function(){});
</script>

</head>

<body>
  <p>Drag to select an area to extract</p>
  <div id="container">
    <canvas id="background" width=300 height=300></canvas>
    <canvas id="canvas" width=300 height=300></canvas>
    <button id="sketch">Extract the sketch area</button>
    <img id="results">
  </div>
</body>
</html> 
```

**[这是最初的答案——在提供更多信息后需要更新]**

你走在正确的轨道上……</p>

现在，只需将背景放在素描画布*后面的***单独**图像或画布上。

 *用户将看到背景并在上面的草图画布上进行绘制。

由于您的草图画布与背景位保持一致，因此当您想使用 .toDataURL() 捕获它时，您会得到纯草图位！

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/JSux2/](http://jsfiddle.net/m1erickson/JSux2/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<!--[if lt IE 9]><script type="text/javascript" src="../excanvas.js"></script><![endif]-->

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red; position:absolute; top:0; left:0;}
    #wrapper{left-margin:150px;}
    #results{border:1px solid green; position:absolute; top:0; left:300px;}
    button{position:absolute; top:275px; left:0;}
</style>

<script>
$(function(){

    var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");
    var lastX;
    var lastY;
    var strokeColor="red";
    var strokeWidth=2;
    var canMouseX;
    var canMouseY;
    var canvasOffset=$("#canvas").offset();
    var offsetX=canvasOffset.left;
    var offsetY=canvasOffset.top;
    var isMouseDown=false;

    // load the background image and set the canvas to the same size
    var img=new Image();
    img.onload=function(){

        var background=document.getElementById("background");
        var bkCtx=background.getContext("2d");
        background.width=img.width;
        background.height=img.height;
        bkCtx.drawImage(img,0,0);

        canvas.width=img.width;
        canvas.height=img.height;

        var results=document.getElementById("results");
        results.width=img.width;
        results.height=img.height;
        console.log(img);
    }
    img.src="http://dl.dropbox.com/u/139992952/stackoverflow/house-icon.png";

    function handleMouseDown(e){
      canMouseX=parseInt(e.clientX-offsetX);
      canMouseY=parseInt(e.clientY-offsetY);
      $("#downlog").html("Down: "+ canMouseX + " / " + canMouseY);

      // Put your mousedown stuff here
      lastX=canMouseX;
      lastY=canMouseY;
      isMouseDown=true;
    }

    function handleMouseUp(e){
      canMouseX=parseInt(e.clientX-offsetX);
      canMouseY=parseInt(e.clientY-offsetY);
      $("#uplog").html("Up: "+ canMouseX + " / " + canMouseY);

      // Put your mouseup stuff here
      isMouseDown=false;
    }

    function handleMouseOut(e){
      canMouseX=parseInt(e.clientX-offsetX);
      canMouseY=parseInt(e.clientY-offsetY);
      $("#outlog").html("Out: "+ canMouseX + " / " + canMouseY);

      // Put your mouseOut stuff here
      isMouseDown=false;
    }

    function handleMouseMove(e){
      canMouseX=parseInt(e.clientX-offsetX);
      canMouseY=parseInt(e.clientY-offsetY);
      $("#movelog").html("Move: "+ canMouseX + " / " + canMouseY);

      // Put your mousemove stuff here
      if(isMouseDown){
          ctx.beginPath();
          ctx.moveTo(lastX,lastY);
          ctx.lineTo(canMouseX,canMouseY);
          ctx.stroke();     
          lastX=canMouseX;
          lastY=canMouseY;
      }
    }

    function extract(){
        var results=document.getElementById("results");
        results.src=canvas.toDataURL();
        alert("ok");
    }

    $("#canvas").mousedown(function(e){handleMouseDown(e);});
    $("#canvas").mousemove(function(e){handleMouseMove(e);});
    $("#canvas").mouseup(function(e){handleMouseUp(e);});
    $("#canvas").mouseout(function(e){handleMouseOut(e);});
    $("#sketch").click(function(e){extract(e);});

}); // end $(function(){});
</script>

</head>

<body>
    <canvas id="background" width=100 height=100></canvas>
    <canvas id="canvas" width=100 height=100></canvas>
    <button id="sketch">Extract the sketch</button>
    <img id="results" width=10 height=10>
</body>
</html> 
```*

# sql - 统计过滤掉某个条件的记录数

> ID：15552199
> 
> 赞同：1
> 
> 时间：2013-03-21T15:51:53.683
> 
> 标签：sql, sql-server, count, group-by

我试图计算一个表中只有一个会话的唯一事件的数量。我们有一个名为 Session Tracking 的表，它存储事件编号，还存储该会话的先前状态和当前状态。我想计算只有一个会话的事件数量，并且我还想计算可能有多个会话的事件数量，但前提是以下会话开始于关闭并结束于关闭。基本上不计算在聚合列表中不改变状态的会话。

例子：

```
Incident ID  Start Status  End Status
1            Open          Closed
1            Closed        Closed
2            Open          Closed
3            Open          Closed
4            Open          Open
4            Open          Closed 
```

我想获得前三个事件，因为事件 2 和 3 都只有一个会话，并且想要计算第一个事件，因为它在它已经关闭之后有一个会话，而第二个会话不计算在内。第四个事件不会被计算在内，因为它有不止一个会话是开放的。

这是我正在使用的声明，并认为可能有问题......

```
SELECT Incident, COUNT(Incident)
FROM Session_Tracking
WHERE NOT (Prev_Status = 'Closed' AND Current_Status = 'Closed')
GROUP BY Incident
HAVING COUNT(Incident) = 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:02:56.993

假设您正在使用支持窗口函数的合理数据库，您可以通过计算事物来做到这一点：

```
select SUM(case when numInIncident = 1 then 1 else 0 end) as Singletons,
       SUM(case when ClosedClosed = numInIncident - 1 and numInINcident > 1 then 1 else 0
           end) as RestClosed
from (select st.*,
             COUNT(*) over (partition by incident) as numInIncident,
             sum(case when startStatus = 'Closed' and endStatus = 'Closed' then 1 else 0 end) over (partition by incident) as ClosedClosed
      from session_tracking
     ) st 
```

内部子查询计算每个事件的行数，以及当开始和结束状态都“关闭”时的 rof 行数。外部查询应用此逻辑来获取您想要的数字。

# r - 每天给定时间间隔的最大斜率

> ID：15552200
> 
> 赞同：1
> 
> 时间：2013-03-21T15:51:55.333
> 
> 标签：r, plyr, apply, zoo

我有一组时间序列数据，其中每 10 分钟测量一次来自三个不同位置的多天（实际上是 2 年的数据）的地表温度。我感兴趣的是计算每个站点每天任何 60 分钟间隔的最大斜率（温度升高率）。

所以基本上我想每天工作 10 分钟，有一个 60 分钟的窗口，计算每个窗口的斜率，然后确定最大斜率以及它在一天中发生的时间。然后我想将此函数应用于数据集中的每一天。日期/时间采用以下格式 (%m/%d/%y %H:%M)。

我正在想象使用 ddply 和 zoo 包和函数 rollapply 来做类似这个伪代码的事情

ddply（数据，.（位置，天），函数（d）最大值（rollapply（斜率（d$temp~d$time，data=d）））

其中“时间”是每天（每 10 分钟）内的时间，“天”只是日期，因此该函数可以应用于所有日期。显然，“斜率”不是 R 函数，必须编写来计算实际斜率。

有没有人对 zoo 和 rollapply 有更多经验，或者可以想出另一种方法来解决这个问题？

我在这里包含了来自单个位置的一些示例数据（因此位置列已被删除） [https://gist.github.com/natemiller/42eaf45747f31a6ccf9a](https://gist.github.com/natemiller/42eaf45747f31a6ccf9a)

感谢您的帮助，内特

编辑：从那以后，我结合使用了 geektrader 的 Joshua Ulrich 从下面的答案，并使用基本代数将值转换回每小时 ºC 的单位

```
 CperH<-dat$Temp-(dat$Temp/(1+dat$ROC)) 
```

效果很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:15:50.350

您可以使用`xts`对时间序列分析非常有用的时间序列包。结合`TTR`包，你可以很容易地得到你想要的。

```
require(xts)
require(TTR)
dat <- read.csv("https://gist.github.com/natemiller/42eaf45747f31a6ccf9a/raw/916443cfb353d82e8af6cdebdd80b2e956317b24/sampleTempData.csv")

dat.xts <- .xts(x = dat$Temp, index = as.POSIXct(strptime(dat$Date, format = "%m/%d/%y %H:%M")))
names(dat.xts) <- "Temp"
head(dat.xts)
##                     Temp
## 2011-04-11 03:48:00  9.5
## 2011-04-11 03:58:00  9.5
## 2011-04-11 04:08:00  9.5
## 2011-04-11 04:18:00  9.5
## 2011-04-11 04:28:00  9.5
## 2011-04-11 04:38:00  9.5

dat.xts$ROC <- ROC(dat.xts, n = 6)
head(dat.xts, 10)
##                     Temp ROC
## 2011-04-11 03:48:00  9.5  NA
## 2011-04-11 03:58:00  9.5  NA
## 2011-04-11 04:08:00  9.5  NA
## 2011-04-11 04:18:00  9.5  NA
## 2011-04-11 04:28:00  9.5  NA
## 2011-04-11 04:38:00  9.5  NA
## 2011-04-11 04:48:00  9.5   0
## 2011-04-11 04:58:00  9.5   0
## 2011-04-11 05:08:00  9.5   0
## 2011-04-11 05:18:00  9.5   0

dat.xts[which.max(dat.xts$ROC), ]
##                     Temp       ROC
## 2011-04-12 09:48:00 14.5 0.5340825

# If you want to do analysis on per day basis.
dat.xts <- .xts(x = dat$Temp, index = as.POSIXct(strptime(dat$Date, format = "%m/%d/%y %H:%M")))
names(dat.xts) <- "Temp"
head(dat.xts)
##                     Temp
## 2011-04-11 03:48:00  9.5
## 2011-04-11 03:58:00  9.5
## 2011-04-11 04:08:00  9.5
## 2011-04-11 04:18:00  9.5
## 2011-04-11 04:28:00  9.5
## 2011-04-11 04:38:00  9.5

ll <- split.xts(dat.xts, f = "days")

ll <- lapply(ll, FUN = function(x) {
    x$ROC <- ROC(x, 6)
    return(x)
})

max.ll <- lapply(ll, function(x) x[which.max(x$ROC), ])

max.ll
## [[1]]
##                     Temp       ROC
## 2011-04-11 13:38:00 20.5 0.4946962
## 
## [[2]]
##                     Temp       ROC
## 2011-04-12 09:48:00 14.5 0.5340825
## 
## [[3]]
##                     Temp       ROC
## 2011-04-13 10:18:00 15.5 0.4382549
## 
## [[4]]
##                     Temp       ROC
## 2011-04-14 10:38:00 14.5 0.3715636 
```

# java - 小程序隐藏类未发现异常

> ID：15552201
> 
> 赞同：5
> 
> 时间：2013-03-21T15:52:00.007
> 
> 标签：java, applet, classloader, classnotfoundexception

我正在开发一个行为奇怪的小程序：这不是通常的“我无法在浏览器中启动我的小程序”问题，而是更微妙的问题。

该小程序由一个带有 8 个选项卡的 jtabbedpane 组成，每个选项卡都在工作流中进行一些数据操作，用户有两个按钮（后退和前进）来循环浏览选项卡。

当我在浏览器中运行它（最新的 chrome 或 firefox，但这没关系）时，我注意到从第 7 个选项卡到第 8 个选项卡时会出现持续的减速：在后者中，我在该选项卡中放置了一个带有自定义 tablemodel 的 jtable 和在eclipse中它运行得很好。几个调试步骤后，我注意到 jvm 为 RateTableModel 类抛出了一个 classnotfoundexception，这是我的自定义表模型。奇怪的是，即使我在 IDE 和作为自签名小程序到浏览器中测试小程序，也不会在任何控制台中引发异常。我到处验证：没有空的 catch 块，每个异常总是打印它的 stackstrace，如果我将我的 tablemodel 的初始化代码放在 try/catch 块中，那么异常永远不会被捕获。

我想问的是关于为什么会发生这种情况的任何想法。

类 RateTableModel 位于包 geotel.utils 中，在我必须加载这个之前，我经常实例化其他类，并且我验证了这个类存在于 jar 中。

有关开发的详细信息（可能对阅读此内容的人有用）：

使用命令对小程序进行签名

```
jarsigner -keystore keystore3 C:\GestioneOneri.jar me3 
```

小程序从以下 html 文件运行：

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
            <title>Titolo</title>
    </head>
    <body>
        <script src="http://www.java.com/js/deployJava.js"></script>
        <script> 
            var attributes = {code:'geotel.gui.Login.class', 
                    archive:'GestioneOneri.jar,mysql-connector-java-5.1.20-bin.jar,poi-3.9-20121203.jar,forms-1.3.0.jar', 
                    width:1024, height:700} ;
            var parameters = {jnlp_href:'gestioneoneri.jnlp', portalUrl:'http://192.168.146.145:8080/GestioneOneriServlet', nomeUtente:'', numeroPratica:'', percorsoFileCalcoloOneri:"/", nomeFileCalcoloOneri:"calcoloOneri.xls"} ; 
            var version = '1.6' ;
            deployJava.runApplet(attributes, parameters, version);  
        </script>
        <noscript>This page requires JavaScript.</noscript>
    </body>
</html> 
```

JNLP 文件如下：

```
<?xml version="1.0" encoding="UTF-8"?>
    <jnlp href="gestioneoneri.jnlp">
        <information>
            <title>Gestione Oneri Urbanistici</title>
            <vendor>Geotel soc. coop.</vendor>
            <offline-allowed />
        </information>
        <resources>
            <j2se version ="1.6+" initial-heap-size="128m" max-heap-size="1024m"
  href="http://java.sun.com/products/autodl/j2se" />
            <jar href="GestioneOneri.jar" main="true" />
        <jar href="mysql-connector-java-5.1.20-bin.jar"/>
        <jar href="poi-3.9-20121203.jar"/>
        <jar href="forms-1.3.0.jar"/>
        </resources>
        <applet-desc
            name="Gestione Oneri Urbanistici"
            main-class="geotel.gui.Login"
            width="1024"
            height="700"/>
    </jnlp> 
```

导致 ClassNotFoundException 的代码如下：class DatiRatePanel

```
this.tm = new geotel.utils.RateTableModel(columnNames, oneriPratica, rate, rateizzazioniPreviste); 
```

RateTableModel 类的定义是

```
public class RateTableModel extends AbstractTableModel 
```

编辑：经过几个调试步骤，我发现在调试视图中有截图中的情况 ![调试](../Images/bc0c278ccf1ba555f61440c432e04a96.png)

我完全不知道这些键代表什么，但是如果我一直按 F5（Step into），这些键就会消失，接下来的步骤将继续执行，并且类加载器神奇地能够找到 RateTableModel 类。我怎样才能摆脱这个？

谢谢！

EDIT2：我对 Eclipse 文档中的键图标进行了一些研究，发现它们是锁定对象的监视器。据我所知，监视器出现在有同步代码块的地方，而我在这里没有（而且我确信这些块没有被调用）。这让我很生气...

EDIT3：我尝试放置一些关于每条指令需要多少时间的 printlns，以下是源代码和输出。我不明白为什么时间在打印 2 和 4 中“重置”（或者看起来如此），似乎有更多线程看不到时间变量已初始化（但这是不可能的！）。

```
Long time = System.currentTimeMillis();
this.tm = new RateTableModel(columnNames, oneriPratica, rate, rateizzazioniPreviste);
time = System.currentTimeMillis() - time;
System.out.println("DatiRatePanel2.populatePanel() 1 time: " + time);
rateTable = new MyTable(tm, columnModel, this);
time = System.currentTimeMillis() - time;
System.out.println("DatiRatePanel2.populatePanel() 2 time: " + time);
table = new ExcelAdapter(rateTable);
time = System.currentTimeMillis() - time;
System.out.println("DatiRatePanel2.populatePanel() 3 time: " + time);
scrollPane = new JScrollPane(rateTable);
time = System.currentTimeMillis() - time;
System.out.println("DatiRatePanel2.populatePanel() 4 time: " + time);
scrollPane.getVerticalScrollBar().setUnitIncrement(10);
this.add(scrollPane, "1, 3, fill, fill");
aggiornaTotali();
this.invalidate();
this.validate();
this.repaint();
time = System.currentTimeMillis() - time;
System.out.println("DatiRatePanel2.populatePanel() 5 time: " + time); 
```

输出：

```
DatiRatePanel2.populatePanel() 1 time: 2
DatiRatePanel2.populatePanel() 2 time: 1364288266968
DatiRatePanel2.populatePanel() 3 time: 2
DatiRatePanel2.populatePanel() 4 time: 1364288266969
DatiRatePanel2.populatePanel() 5 time: 3 
```

EDIT4：在 java 插件控制台中激活了 5 级，这就是我得到的：

```
DettagliPratichePanel.updateObjects() impostazione oneri
network: Connessione a http://192.168.146.145:8080/GestioneOneriServlet/findWhereNomeConfigurazioneEqualsConfRateizzazioni con proxy=DIRECT
network: Connessione a http://192.168.146.145:8080/GestioneOneriServlet/findWhereNomeConfigurazioneEqualsConfRateizzazioni con proxy=DIRECT
network: Connessione a http://192.168.146.145:8080/GestioneOneriServlet/findWhereNomeConfigurazioneEqualsConfRateizzazioni con proxy=DIRECT
network: Connessione a http://192.168.146.145:8080/GestioneOneriServlet/findWhereNomeConfigurazioneEqualsConfRateizzazioni con proxy=DIRECT
network: Connessione a http://192.168.146.145:8080/GestioneOneriServlet/findByConfRateizzazioniConfRata con proxy=DIRECT
network: Connessione a http://192.168.146.145:8080/GestioneOneriServlet/findByConfRateizzazioniConfRata con proxy=DIRECT
network: Connessione a http://192.168.146.145:8080/GestioneOneriServlet/findByConfRateizzazioniConfRata con proxy=DIRECT
network: Connessione a http://192.168.146.145:8080/GestioneOneriServlet/findByConfRateizzazioniConfRata con proxy=DIRECT
DettagliPratichePanel.updateObjects() polizza
basic: JNLP2ClassLoader.findClass: geotel.utils.RateTableModel: try again ..
DatiRatePanel2.populatePanel() 1 time: 2
DatiRatePanel2.populatePanel() 3 time: 1364309403101
DatiRatePanel2.populatePanel() 4 time: 3
DatiRatePanel2.populatePanel() 5 time: 1364309403102
basic: JNLP2ClassLoader.findClass: geotel.utils.MyTable$ButtonsCellRenderer: try again ..
------------------------------------------------------------------------ Here starts trouble
network: Connessione a http://192.168.146.129:8091/Scia/sportello-unico-edilizia/archivio-pratiche-edilizie/permesso_di_costruire.2012-10-25.0455740504/portal_url/++resource++java/GestioneOneri.jar con proxy=DIRECT
network: Connessione a http://192.168.146.129:8091/ con proxy=DIRECT
network: Connessione http://192.168.146.129:8091/Scia/sportello-unico-edilizia/archivio-pratiche-edilizie/permesso_di_costruire.2012-10-25.0455740504/portal_url/++resource++java/GestioneOneri.jar con cookie "__ac="Qt/t/I4Nt7/qj0H5vhUrqR+ZrJYgcHJvZ2V0dGlzdGEx"; _ZopeId="97847822A52RRctuIzM""
network: CleanupThread used 1 us
network: Scaricamento risorsa: http://192.168.146.129:8091/Scia/sportello-unico-edilizia/archivio-pratiche-edilizie/permesso_di_costruire.2012-10-25.0455740504/portal_url/++resource++java/GestioneOneri.jar
    Content-Length: 1.940.942
    Content-Encoding: null
network: URL http://192.168.146.129:8091/Scia/sportello-unico-edilizia/archivio-pratiche-edilizie/permesso_di_costruire.2012-10-25.0455740504/portal_url/++resource++java/GestioneOneri.jar scritto su file C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\51\58374d33-15459ea4-temp
security: File lista librerie sicure non trovato
cache: Create from verifier: JarSigningData{hasOnlySignedEntries=true, hasSingleCodeSource=true, hasMissingSignedEntries=false}
network: CleanupThread used 2 us
cache: Replacing MemoryCache entry (cnt=2) for http://192.168.146.129:8091/Scia/sportello-unico-edilizia/archivio-pratiche-edilizie/permesso_di_costruire.2012-10-25.0455740504/portal_url/++resource++java/GestioneOneri.jarwas=com.sun.deploy.cache.CacheEntry (29348568) now=com.sun.deploy.cache.CacheEntry (24374818)
network: Connessione a http://192.168.146.129:8091/Scia/sportello-unico-edilizia/archivio-pratiche-edilizie/permesso_di_costruire.2012-10-25.0455740504/portal_url/++resource++java/GestioneOneri.jar con proxy=DIRECT
network: Connessione a http://192.168.146.129:8091/ con proxy=DIRECT
network: Connessione http://192.168.146.129:8091/Scia/sportello-unico-edilizia/archivio-pratiche-edilizie/permesso_di_costruire.2012-10-25.0455740504/portal_url/++resource++java/GestioneOneri.jar con cookie "__ac="Qt/t/I4Nt7/qj0H5vhUrqR+ZrJYgcHJvZ2V0dGlzdGEx"; _ZopeId="97847822A52RRctuIzM""
network: CleanupThread used 1 us
network: Scaricamento risorsa: http://192.168.146.129:8091/Scia/sportello-unico-edilizia/archivio-pratiche-edilizie/permesso_di_costruire.2012-10-25.0455740504/portal_url/++resource++java/GestioneOneri.jar
    Content-Length: 1.940.942
    Content-Encoding: null
network: URL http://192.168.146.129:8091/Scia/sportello-unico-edilizia/archivio-pratiche-edilizie/permesso_di_costruire.2012-10-25.0455740504/portal_url/++resource++java/GestioneOneri.jar scritto su file C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\51\58374d33-27c7ae17-temp
security: File lista librerie sicure non trovato
cache: Create from verifier: JarSigningData{hasOnlySignedEntries=true, hasSingleCodeSource=true, hasMissingSignedEntries=false}
network: CleanupThread used 1 us
cache: Replacing MemoryCache entry (cnt=3) for http://192.168.146.129:8091/Scia/sportello-unico-edilizia/archivio-pratiche-edilizie/permesso_di_costruire.2012-10-25.0455740504/portal_url/++resource++java/GestioneOneri.jarwas=com.sun.deploy.cache.CacheEntry (24374818) now=com.sun.deploy.cache.CacheEntry (8045053)

-------------------------------------This block is repeated at least 30 times before this
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\23\5d616017-2432b323
cache: MemoryCache: removed entry http://192.168.146.129:8091/Scia/sportello-unico-edilizia/archivio-pratiche-edilizie/permesso_di_costruire.2012-10-25.0455740504/portal_url/++resource++java/GestioneOneri.jar
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\51\58374d33-515e0fde
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\51\58374d33-515e0fde
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\51\58374d33-642e11c6
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\51\58374d33-642e11c6
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\51\58374d33-36c18954
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\51\58374d33-36c18954
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\51\58374d33-3dd37d44
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\51\58374d33-3dd37d44
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\51\58374d33-74a8c32b
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\51\58374d33-74a8c32b
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\51\58374d33-2278e899
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\51\58374d33-2278e899
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\51\58374d33-36a95dca
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\51\58374d33-36a95dca
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\51\58374d33-15459ea4
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\51\58374d33-15459ea4
cache: Create from verifier: JarSigningData{hasOnlySignedEntries=true, hasSingleCodeSource=true, hasMissingSignedEntries=false}
network: CleanupThread used 2 us
cache: Adding MemoryCache entry: http://192.168.146.129:8091/Scia/sportello-unico-edilizia/archivio-pratiche-edilizie/permesso_di_costruire.2012-10-25.0455740504/portal_url/++resource++java/GestioneOneri.jar
network: Connessione a http://192.168.146.129:8091/Scia/sportello-unico-edilizia/archivio-pratiche-edilizie/permesso_di_costruire.2012-10-25.0455740504/portal_url/++resource++java/GestioneOneri.jar con proxy=DIRECT
network: Connessione a http://192.168.146.129:8091/ con proxy=DIRECT
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\23\5d616017-1cffa7d0
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\14\39df63ce-72747a9e
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\15\7e499c8f-55d9e14b
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\23\5d616017-1ff05f86
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\14\39df63ce-3623cf5c
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\15\7e499c8f-767f4e5c
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\51\58374d33-78a94a0b
network: Connessione http://192.168.146.129:8091/Scia/sportello-unico-edilizia/archivio-pratiche-edilizie/permesso_di_costruire.2012-10-25.0455740504/portal_url/++resource++java/GestioneOneri.jar con cookie "__ac="Qt/t/I4Nt7/qj0H5vhUrqR+ZrJYgcHJvZ2V0dGlzdGEx"; _ZopeId="97847822A52RRctuIzM""
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\51\58374d33-16cf3e35
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\14\39df63ce-3d8f935b
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\15\7e499c8f-2b757fb1
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\23\5d616017-65139493
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\14\39df63ce-1d5deb21
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\15\7e499c8f-3a4f46c6
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\51\58374d33-48a86fb3
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\51\58374d33-4b1ec669
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\23\5d616017-1c1ed2e1
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\14\39df63ce-35f43fda
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\15\7e499c8f-14bf2ddf
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\51\58374d33-10a0c30f
network: CleanupThread used 1 us
network: Scaricamento risorsa: http://192.168.146.129:8091/Scia/sportello-unico-edilizia/archivio-pratiche-edilizie/permesso_di_costruire.2012-10-25.0455740504/portal_url/++resource++java/GestioneOneri.jar
    Content-Length: 1.940.942
    Content-Encoding: null
network: URL http://192.168.146.129:8091/Scia/sportello-unico-edilizia/archivio-pratiche-edilizie/permesso_di_costruire.2012-10-25.0455740504/portal_url/++resource++java/GestioneOneri.jar scritto su file C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\51\58374d33-203bfb91-temp
security: File lista librerie sicure non trovato
cache: Create from verifier: JarSigningData{hasOnlySignedEntries=true, hasSingleCodeSource=true, hasMissingSignedEntries=false}
network: CleanupThread used 1 us
cache: Replacing MemoryCache entry (cnt=3) for http://192.168.146.129:8091/Scia/sportello-unico-edilizia/archivio-pratiche-edilizie/permesso_di_costruire.2012-10-25.0455740504/portal_url/++resource++java/GestioneOneri.jarwas=com.sun.deploy.cache.CacheEntry (20330403) now=com.sun.deploy.cache.CacheEntry (8313353)
cache: MemoryCache: removed entry http://192.168.146.129:8091/Scia/sportello-unico-edilizia/archivio-pratiche-edilizie/permesso_di_costruire.2012-10-25.0455740504/portal_url/++resource++java/GestioneOneri.jar
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\51\58374d33-25fd39ec
cache: Closing CachedJarFile C:\Users\Andrea\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\51\58374d33-25fd39ec 
```

我在这里可以理解的是，在该类加载器搜索内部类 ButtonsCellRenderer 之后，它开始了这种泛洪（最终阻止了网页中的所有内容，包括 Java 控制台）。这个问题是由它是一个内部类引起的吗？

正如 Joop Eggen 所问，我正在发布我的 JTable 的代码。包geotel.utils；

```
import geotel.configuration.Configuration;
import geotel.gui.DatiPersonaliPanel;
import geotel.gui.DatiRatePanel2;
import geotel.gui.GestionePratichePanel;
import geotel.gui.IManager;
import geotel.gui.ImportazionePanel;

import java.awt.Color;
import java.awt.Component;
import java.awt.GridLayout;
import java.awt.Image;
import java.awt.Toolkit;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.net.URL;

import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JPanel;
import javax.swing.JTable;
import javax.swing.ListSelectionModel;
import javax.swing.table.TableCellRenderer;
import javax.swing.table.TableColumnModel;
import javax.swing.table.TableModel;

public class MyTable extends JTable
{
class ButtonsCellRenderer extends JPanel implements TableCellRenderer
{
    private static final long serialVersionUID = -4945689480058875463L;

    public Component getTableCellRendererComponent(final JTable table, Object value, boolean isSelected, boolean hasFocus, final int row, int column)
    {
        this.setLayout(new GridLayout(1, 1));
        if(gestione instanceof ImportazionePanel)
        {
            if(column == 0)
            {
                URL editUrl = getClass().getResource("/resource/images/051.gif");
                Image editImage = Toolkit.getDefaultToolkit().getImage(editUrl);
                JButton edit = new JButton(new ImageIcon(editImage));
                edit.setBorderPainted(false);
                edit.setContentAreaFilled(false);
                edit.setFocusPainted(false);
                edit.setOpaque(false);
                this.add(edit);
            }
            else
            {
                new Exception("else non gestito").printStackTrace();
            }
        }
        else
        {
            if(column == 0)
            {
                URL editUrl = getClass().getResource("/resource/images/005.gif");
                Image editImage = Toolkit.getDefaultToolkit().getImage(editUrl);
                JButton editB = new JButton(new ImageIcon(editImage));
                editB.setBorderPainted(false);
                editB.setContentAreaFilled(false);
                editB.setFocusPainted(false);
                editB.setOpaque(false);
                if(gestione instanceof GestionePratichePanel)
                {
                    if(Configuration.getRuoloUtenteConnesso().getModificaPratica())
                    {
                        if(edit)
                            editB.setEnabled(true);
                        else
                            editB.setEnabled(false);
                    }
                    else
                        editB.setEnabled(false);
                }
                else if(gestione instanceof DatiRatePanel2)
                {
                    if(getValueAt(row, 5) != null && !getValueAt(row, 5).equals(""))
                        editB.setEnabled(false);
                    else if(Configuration.getRuoloUtenteConnesso().getModificaPagamento())
                    {
                        if(edit)
                            editB.setEnabled(true);
                        else
                            editB.setEnabled(false);
                    }
                    else
                        editB.setEnabled(false);
                }
                else if(gestione instanceof DatiPersonaliPanel)
                {
                    if(edit)
                        editB.setEnabled(true);
                    else
                        editB.setEnabled(false);
                }
                this.add(editB);
            }
            else
            {
                URL removeUrl = getClass().getResource("/resource/images/003.gif");
                Image removeImage = Toolkit.getDefaultToolkit().getImage(removeUrl);
                JButton remove = new JButton(new ImageIcon(removeImage));
                remove.setBorderPainted(false);
                remove.setContentAreaFilled(false);
                remove.setFocusPainted(false);
                remove.setOpaque(false);
                if(gestione instanceof GestionePratichePanel)
                {
                    if(Configuration.getRuoloUtenteConnesso().getEliminaPratica())
                    {
                        if(edit)
                            remove.setEnabled(true);
                        else
                            remove.setEnabled(false);
                    }
                    else
                        remove.setEnabled(false);
                }
                else if(gestione instanceof DatiRatePanel2)
                {
                    if(getValueAt(row, 5) != null && !getValueAt(row, 5).equals(""))
                        remove.setEnabled(false);
                    else if(Configuration.getRuoloUtenteConnesso().getEliminaPagamento())
                    {
                        if(edit)
                            remove.setEnabled(true);
                        else
                            remove.setEnabled(false);
                    }
                    else
                        remove.setEnabled(false);
                }
                else if(gestione instanceof DatiPersonaliPanel)
                {
                    if(edit)
                        remove.setEnabled(true);
                    else
                        remove.setEnabled(false);
                }
                this.add(remove);
            }
        }
        return this;
    }
}

class MyTableButtonMouseListener implements MouseListener
{
    private JTable ptable;

    public MyTableButtonMouseListener(JTable table)
    {
        ptable = table;
    }

    private void forwardEventToButton(MouseEvent e)
    {
        TableColumnModel columnModel = ptable.getColumnModel();
        int column = columnModel.getColumnIndexAtX(e.getX());
        int row = e.getY() / ptable.getRowHeight();
        int value;

        if(gestione instanceof ImportazionePanel)
        {
            if(row < ptable.getRowCount() && row >= 0 && column >= 0 && column < 1)
            {
                ((ImportazionePanel) gestione).importSelected((String) ptable.getValueAt(row, 1));
                ptable.repaint();
            }
        }
        else
        {
            if(row < ptable.getRowCount() && row >= 0 && column >= 0 && column < 2)
            {
                try
                {
                    value = (Integer) ptable.getValueAt(row, 2);
                    switch(column)
                    {
                        case 0:
                        {
                            gestione.editAction(value);
                            break;
                        }
                        case 1:
                        {
                            gestione.deleteAction(value);
                            break;
                        }
                        default:
                            break;
                    }
                    ptable.repaint();
                }
                catch(Exception e1)
                {
                    e1.printStackTrace();
                }
            }
        }
    }

    public void mouseClicked(MouseEvent e)
    {
        forwardEventToButton(e);
    }

    public void mouseEntered(MouseEvent e)
    {
    }

    public void mouseExited(MouseEvent e)
    {
    }

    public void mousePressed(MouseEvent e)
    {
    }

    public void mouseReleased(MouseEvent e)
    {
    }
}

private static final long serialVersionUID = 3591458853529380099L;

protected IManager gestione;
protected TableModel tm;
protected boolean edit;

public MyTable()
{
    super();
    this.setBackground(new Color(244, 244, 244));
    this.setShowHorizontalLines(true);
    this.setShowVerticalLines(true);
    this.getTableHeader().setReorderingAllowed(false);
    this.setRowSelectionAllowed(true);
    this.setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);
    this.setFillsViewportHeight(true);
    this.addMouseListener(new MyTableButtonMouseListener(this));
}

public MyTable(TableModel tm, TableColumnModel columns, IManager gestione, boolean edit)
{
    super(tm, columns);
    this.tm = tm;
    this.gestione = gestione;
    this.edit = edit;
    // this.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
    this.setBackground(new Color(244, 244, 244));
    this.setShowHorizontalLines(true);
    this.setShowVerticalLines(true);
    this.getTableHeader().setReorderingAllowed(false);
    this.setRowSelectionAllowed(true);
    this.setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);
    this.setFillsViewportHeight(true);
    this.addMouseListener(new MyTableButtonMouseListener(this));
}

public TableCellRenderer getCellRenderer(int row, int column)
{
    if(this.gestione instanceof ImportazionePanel)
    {
        if(column < 1)
        {
            return new ButtonsCellRenderer();
        }
        else
            return super.getCellRenderer(row, column);
    }
    else
    {
        if(column < 2)
        {
            return new ButtonsCellRenderer();
        }
        else
        {
            return super.getCellRenderer(row, column);
        }
    }
}

public RataTableRow getRowObjectByIndex(int row)
{
    if(gestione instanceof DatiRatePanel2)
    {
        return ((RateTableModel) tm).getRowObjectByIndex(row);
    }
    return null;
}

public Object[] getRowObjectById(Integer id)
{
    Object[] ret = null;
    for(int i = 0; i < tm.getRowCount(); i++)
    {
        if(tm.getValueAt(i, 2).equals(id))
        {
            ret = new Object[tm.getColumnCount()];
            for(int j = 0; j < tm.getColumnCount(); j++)
                ret[j] = tm.getValueAt(i, j);
            break;
        }
    }
    return ret;
}

public Component prepareRenderer(TableCellRenderer renderer, int Index_row, int Index_col)
{
    Component comp = super.prepareRenderer(renderer, Index_row, Index_col);
    // even index, selected or not selected
    if(Index_row % 2 == 0)
    {
        if(!isCellSelected(Index_row, Index_col))
            comp.setBackground(new Color(240, 240, 240));
        else
        {
            comp.setForeground(Color.black);
            comp.setBackground(Color.green);
        }
    }
    else
    {
        if(!isCellSelected(Index_row, Index_col))
            comp.setBackground(Color.white);
        else
        {
            comp.setForeground(Color.black);
            comp.setBackground(Color.green);
        }
    }
    return comp;
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T09:42:45.747

根据一些经验，我的猜测是，未找到类的问题源于附带问题、调试环境、类加载信息、首次加载等。

使用表模型可能会产生严重的惩罚，例如在 TreeModel 中，TreeNode 错误地递归地实例化其所有子 TreeNode。

我会首先寻找类似的行为，也许是分析你的表模型类。当然，如果可能的话，我会切换一些选项卡，看看前一个选项卡中是否有清理代码。

就我所见，您在小程序中使用了 JDBC。这是昂贵的，所以一定要记录所有的 SQL 调用。

*不是一个具体的答案，但我很好奇我是否部分正确（就像任何江湖骗子一样）。*

* * *

***扩展问题代码后***

问题在于渲染器中的工作太多。请执行下列操作。*它可以写得更紧凑。*

仍然值得怀疑的是，旧`JButton.isEnabled()`的保留在原始代码和此代码中。

```
private JButton editB = new JButton();
private final Icon ICON_051;
private final Icon ICON_005;
private final Icon ICON_003;

public ButtonsCellRenderer()
{
    {
        URL editUrl = getClass().getResource("/resource/images/051.gif");
        Image editImage = Toolkit.getDefaultToolkit().getImage(editUrl);
        ICON_051 = new ImageIcon(editImage);
    }
    {
        URL editUrl = getClass().getResource("/resource/images/005.gif");
        Image editImage = Toolkit.getDefaultToolkit().getImage(editUrl);
        ICON_005 = new ImageIcon(editImage);
    }
    {
        URL editUrl = getClass().getResource("/resource/images/003.gif");
        Image editImage = Toolkit.getDefaultToolkit().getImage(editUrl);
        ICON_003 = new ImageIcon(editImage);
    }
    this.setLayout(new GridLayout(1, 1));
    editB.setBorderPainted(false);
    editB.setContentAreaFilled(false);
    editB.setFocusPainted(false);
    editB.setOpaque(false);
    this.add(editB);
}

public Component getTableCellRendererComponent(final JTable table, Object value, boolean isSelected, boolean hasFocus, final int row, int column)
{
    if(gestione instanceof ImportazionePanel)
    {
        if(column == 0)
        {
            editB.setIcon(ICON_051);
        }
        else
        {
            new Exception("else non gestito").printStackTrace();
        }
    }
    else
    {
        boolean enabled = editB.isEnabled();
        if(column == 0)
        {
            editB.setIcon(ICON_005);
            if(gestione instanceof GestionePratichePanel)
            {
                enabled = Configuration.getRuoloUtenteConnesso().getModificaPratica() && edit;
            }
            else if(gestione instanceof DatiRatePanel2)
            {
                if(getValueAt(row, 5) != null && !getValueAt(row, 5).equals(""))
                    enabled = false;
                else
                    enabled = Configuration.getRuoloUtenteConnesso().getModificaPagamento() && edit;
               else
                    enabled = false;
            }
            else if(gestione instanceof DatiPersonaliPanel)
            {
                enabled = edit;
            }
        }
        else
        {
            editB.setIcon(ICON_003);
            if(gestione instanceof GestionePratichePanel)
            {
                enabled = Configuration.getRuoloUtenteConnesso().getEliminaPratica() && edit;
            }
            else if(gestione instanceof DatiRatePanel2)
            {
                if(getValueAt(row, 5) != null && !getValueAt(row, 5).equals(""))
                    enabled = false;
                else
                    enabled = Configuration.getRuoloUtenteConnesso().getEliminaPagamento() && edit;
            }
            else if(gestione instanceof DatiPersonaliPanel)
            {
                eenabled = true;
            }
        }
        editB.setEnabled(enabled);
    }
    return this;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T08:00:36.677

在网上徘徊我发现这个线程：[jar下载了多次](https://forums.oracle.com/forums/thread.jspa?threadID=2416282&tstart=0) 因为在我的小程序问题中有一个与此类似的问题我按照其中一个回复中的说明进行操作（特别是关闭控制面板/java/常规选项卡/临时互联网文件/保留我电脑上的临时 Internet 文件），猜猜是什么……多次下载的问题已经消失，至少在浏览器中导致 UI 冻结的异常似乎也消失了。我将在 Eclipse 调试器中尝试现在正在发生的事情。任何人都可以解释用户在最后两篇文章中的意思吗？关于tomcat设置缓存过滤器。我该如何检查？我应该使用 Wireshark 寻找什么？谢谢

# c# - C# .Net Covariance - 再次为旧时代的缘故？

> ID：15552203
> 
> 赞同：3
> 
> 时间：2013-03-21T15:52:03.597
> 
> 标签：c#, .net, covariance, contravariance

所以我们有这个：

```
public interface IWidget
{
    int Id { get; set; }
}

public class Widget : IWidget
{
    public int Id { get; set; }
}

public class WidgetProcessor
{
    public static void ProcessWidgets1(IList<IWidget> widgets)
    { }

    public static void ProcessWidgets2<T>(IList<T> widgets) where T : IWidget
    { }
} 
```

我明白为什么这不会编译： `WidgetProcessor.ProcessWidgets1(new List<Widget>());` 围绕协方差的 C# 规则明智地说它不应该，或者你可能会遇到各种顽皮，正如在其他地方详细解释的那样。

但是 ProcessWidgets2：什么...？
它是如何**编译**和运行的： `WidgetProcessor.ProcessWidgets2(new List<Widget>());`

期待消除我的无知，但我看不出 ProcessWidgets1 和 ProcessWidgets2 （实际上）有何不同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T15:55:31.217

`ProcessWidgets2<T>`是一种通用方法。当你用 调用它时`new List<Widget>()`，编译器推断类型`T`是`Widget`，它与约束匹配，并调用它，因为`List<T>`implements `IList<T>`。

将其视为分解为多个调用可能最容易：

```
IList<Widget> temp = new List<Widget>();
WidgetProcessor.ProcessWidgets2<Widget>(temp); // Widget is an IWidget, so this matches constraints 
```

这里没有变化，因为`List<T>`直接 implements `IList<T>`，并且您使用编译器推断的*特定类型进行调用。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:11:29.347

对于第一个示例，您可以执行代码：

```
widgets.Add(new SomeOtherWidget()); 
```

如果`widgets`实际上被允许成为 a`List<Widget>`那么您会将 a`SomeOtherWidget`放入对象列表中`Widget`。那会很糟糕，因为当你拿出一个对象时，它可能根本就不是一个`Widget`。

对于第二个示例，`widgets.Add(new SomeOtherWidget());`将无法编译。 `SomeOtherWidget`不会是 type `T`。您将只被允许使用类型的对象而不是任何旧对象来调用`Add`列表，因此它能够保持类型安全。`T``IWidget`

# ruby - 尝试更新到 gem 3.0.20 并安装 DevKit

> ID：15552205
> 
> 赞同：1
> 
> 时间：2013-03-21T15:52:11.320
> 
> 标签：ruby, ruby-on-rails-3, heroku, makefile, gem

Heroku 建议更新到这个 gem，因为有一个安全补丁，但它给我带来了各种各样的头痛，现在我的本地环境无法正常工作。他们建议这样做作为安全预防措施。他们建议进入我的应用程序，更改 gemfile 版本并简单地运行“bundle update rails”。这是输出：

```
$ bundle update rails
Fetching source index for http://rubygems.org/
Using rake (0.8.7)
Using abstract (1.0.0)
Using activesupport (3.0.20)
Using builder (2.1.2)
Using i18n (0.5.0)
Using activemodel (3.0.20)
Using erubis (2.6.6)
Using rack (1.2.8)
Using rack-mount (0.6.14)
Using rack-test (0.5.7)
Using tzinfo (0.3.37)
Using actionpack (3.0.20)
Using mime-types (1.21)
Using polyglot (0.3.3)
Using treetop (1.4.12)
Using mail (2.2.19)
Using actionmailer (3.0.20)
Using arel (2.0.10)
Using activerecord (3.0.20)
Using activeresource (3.0.20)
Using bundler (1.0.22)
Installing json (1.7.7) with native extensions
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension. 
c:/Ruby192/bin/ruby.exe extconf.rb

creating Makefile 
make
'make' is not recognized as an internal or external command,
operable program or batch file. 

Gem files will remain installed in c:/Ruby192/lib/ruby/gems/1.9.1/gems/json-1.7.7 for inspection.

Results logged to c:/Ruby192/lib/ruby/gems/1.9.1/gems/json-1.7.7/ext/json/ext/generator/gem_make.out
An error occured while installing json (1.7.7), and Bundler cannot continue.
Make sure that `gem install json -v '1.7.7'` succeeds before bundling 
```

然后他们指出这里有人遇到类似问题的线程。它涉及下载 Devkit 等。我尝试按照说明进行操作，但现在一切都坏了。我熟悉使用 Ruby on Rails，但从未安装它（已经在我的工作计算机上设置），当 ruby​​ on Rails 背后的整个理念很简单时，我很难相信更新它是如此困难。我必须遗漏一些东西或没有使用正确的资源。

我机器上当前的 ruby​​ 版本是 ruby​​ 1.9.2p0 (2010-08-18) [i386-mingw32]

```
$rails --version
Rails 3.0.3 
```

我下载的 DevKit 是来自[http://rubyinstaller.org/downloads的 DevKit-tdm-32-4.5.2-20111229-1559-sfx.exe](http://rubyinstaller.org/downloads)

然后我尝试在此站点[https://github.com/oneclick/rubyinstaller/wiki/Development-Kit上完成安装步骤](https://github.com/oneclick/rubyinstaller/wiki/Development-Kit)

它总是回到“make”错误或“json”错误。

也许我有不同的版本冲突？

现在，当我尝试启动 WEBrick 来运行我的应用程序时，出现以下错误：

```
$ rails s
c:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/rubygems_integrat
ion.rb:183:in `stub_source_index170': uninitialized constant Gem::SourceIndex (N
ameError)
    from c:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/ruby
gems_integration.rb:303:in `stub_rubygems'
    from c:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/ruby
gems_integration.rb:246:in `replace_entrypoints'
    from c:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/runt
ime.rb:14:in `setup'
    from c:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler.rb:1
10:in `setup'
    from c:/rails/thumb/costrecovery/config/boot.rb:8:in `<top (required)>'
    from <internal:lib/rubygems/custom_require>:29:in `require'
    from <internal:lib/rubygems/custom_require>:29:in `require'
    from script/rails:5:in `<main>' 
```

任何意见是极大的赞赏。

# asp.net - 不包含“Y”的定义，并且找不到接受“X”类型的第一个参数的扩展方法“Y”

> ID：15552206
> 
> 赞同：1
> 
> 时间：2013-03-21T15:52:14.100
> 
> 标签：asp.net

我的 newTransport.aspx 按钮控件

```
<asp:Button ID="najitRidiceButton" runat="server" Text="Vyhledat ridice" onclick="najitRidiceButton_Click" /> 
```

我的 newTransport.aspx.cs 方法

```
protected void najitRidiceButton_Click(object sender, EventArgs e)
{
    DAODriver.searchDrivers(Calendar1.SelectedDate, casPrepravyTextBox.Text, Int32.Parse(pocetOsobTextBox.Text), extraZavazadla());
} 
```

我得到的错误

> CS1061：ASP.newtransport_aspx 不包含 najitRidiceButton_Click 的定义，并且找不到接受 ASP.newtransport_aspx 类型的第一个参数的扩展方法 najitRidiceButton_Click（您是否缺少 using 指令或程序集引用？）

当我删除该按钮时，一切正常，所以我不明白，这是我的第一个 ASP.NET 网络应用程序，所以请帮助我，我不知道为什么它不起作用，虽然我试图谷歌它或找到在stackoverflow上回答 - 没有结果

```
<%@ Page Title="" Language="C#" MasterPageFile="~/PageTemplate.Master" 
AutoEventWireup="true" CodeBehind="NewTransport.aspx.cs" 
Inherits="ASPDU1.NewTransport" %> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T15:56:05.917

尝试通过制作事件处理程序`public void`而不是`protected`, 只是为了看看。它对我有用`protected void`，但这里可能有一些我无法从这个示例中弄清楚的东西。我假设代码隐藏指向 ASPX 标记`@Page`参考中的正确页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-09T10:41:00.660

我在更改构建配置（例如从调试到发布）、运行项目，然后改回以前的构建配置方面取得了巨大成功。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-01T15:09:03.560

您似乎正在使用 ASP.NET WebApplication（即，不是 ASP.NET WebSite）项目类型。如果是这样，则有必要：

*   构建应用并确保构建成功；
*   使用刚刚构建的 APPLICATION_NAME.DLL 文件将所需的页面/代码/设计器（或更好的完整项目）重新部署到目标托管服务器目录。

# ruby-on-rails - 测试 resque-scheduler

> ID：15552207
> 
> 赞同：4
> 
> 时间：2013-03-21T15:52:17.503
> 
> 标签：ruby-on-rails, resque

在`resque-scheduler`，我如何 rspec-test 某些作业每 30 秒排队一次？

这是我的`resque-scheduler.yml`文件：

```
hipchat_schedule:
 queue: hipchat
 every: 30s
 class: HipChatPolling 
```

有非常有用[的 resque_spec](https://github.com/leshill/resque_spec) gem，但我不确定它是否可以测试`every`-clause。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T21:59:25.127

`resque-scheduler`首先，我认为这是由gem（或者准确地说，在`rufus-scheduler`gem 中）而不是在你身边进行测试的——并且必须被测试。如果没有发生调度，那么这不是您的应用程序中的错误，而是 gem 中的错误。

但是，如果你想测试它，你有两种方法：

*   在工作中进行一些可测试的更改并通过测试进行检查（例如触摸文件，在某处记录开始时间等
*   监视 Resque 的队列并等待作业类出现两次，并计算两次出现之间经过的时间。

请注意，为此，您必须确保`Resque.inline`在测试之前禁用设置！

# python - wxPython 菜单文本对齐

> ID：15552209
> 
> 赞同：2
> 
> 时间：2013-03-21T15:52:22.703
> 
> 标签：python, menu, wxpython, keyboard-shortcuts

我正在开发一个 wxPython GUI，并希望右对齐快捷方式文本。显然，可以使用制表符来解决这个问题，但如果有办法，我更愿意在本地进行。

因此，默认菜单项创建是：

```
menu = wx.Menu()
item_id = 1
item_name = 'My menu item'
help_text = 'Clicking this does something interesting.'
item = menu.Append(item_id, item_name, help_text) 
```

我将使用快捷方式对此进行扩展，因此如果我使用标签，它将类似于：

```
item_name = 'My menu item\t\tCtrl+Alt+H' 
```

但是，这涉及大量手动`\t`输入以确保所有内容都对齐，并且每当菜单项更改名称或添加其他项时，它们都可能需要更新。有没有办法解决这个问题，例如我没有看到自动将键绑定关联到菜单项的类方法？

**编辑：**我知道在传递类似 的文本时，如果在加速器表中存在与该 ID 关联的定义`&My menu item`，它会自动使用与指定 ID 关联的键绑定执行*某些操作，对吗？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:25:25.283

我深入研究了其他几个应用程序的代码以找到答案。事实证明，默认行为`\t`并没有做它*看起来*会做的事情（即插入一个制表符），但被工具包明智地解释为正在做我想做的事情。因此，右对齐快捷方式的方法很简单：使用您想要的文本创建它，然后是`\t<shortcut>`（就像我上面所说的那样）。在我上面粘贴的示例代码中，如果我希望我的快捷方式是`Ctrl + T`，那么它应该是这样的：

```
menu = wx.Menu()
item_id = 1
item_name = 'My menu item\tCtrl+T'
help_text = 'Clicking this does something interesting.'
item = menu.Append(item_id, item_name, help_text) 
```

**编辑：**根据 Mike Driscoll 的[非常有用的答案](https://stackoverflow.com/a/15554665/564181)更新了以下部分。

请注意，这会创建快捷方式绑定（wxPython 会选择它），但它不能使用例如 Windows 上的 Alt 键来选择它。

您可以关联 Alt 键以快速打开菜单并使用文本中的 & 符号导航到它`item_name`，但您仍然需要通过以下方式手动关联所需的键绑定`AcceleratorTable`：

```
menu = wx.Menu()
item_id = 1

# Ctrl+T is bound to the keybinding
accelerator_table = wx.AcceleratorTable([(wx.ACCEL_CTRL, ord('T'), item_id)])
self.setAcceleratorTable(accelerator_table)

# Ctrl+T is not included, but the menu item can be accessed via Alt key
item_name = '&My menu item'

help_text = 'Clicking this does something interesting.'
item = menu.Append(item_id, item_name, help_text) 
```

我想，这实际上是首选模式，因为在任何`item_id`被引用的地方，都可以自动引用快捷方式。这也将实现无缝更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T17:51:04.037

虽然 Chris 关于在菜单中正确缩进键绑定的 "\t" 是正确的，但我并没有真正理解他通过使用 & 符号*自动关联任何内容的意思。*与号 (&) 确实允许用于键入 ALT 以打开文件菜单，然后如果您键入另一个应用了与号的字母，它将跳转到该菜单项，但 & 不连接菜单项到加速器表。这是通过菜单项的 ID 完成的。

请参阅以下代码：

```
import wx

########################################################################
class MyForm(wx.Frame):

    #----------------------------------------------------------------------
    def __init__(self):
        wx.Frame.__init__(self, None, wx.ID_ANY, "wx.Menu Tutorial")

        self.panel = wx.Panel(self, wx.ID_ANY)

        menuBar = wx.MenuBar()
        fileMenu = wx.Menu()
        exitId = wx.NewId()
        exitMenuItem = fileMenu.Append(exitId, "&Exit/tCtrl+X",
                                       "Exit the application")
        self.Bind(wx.EVT_MENU, self.onExit, id=exitId )
        menuBar.Append(fileMenu, "&File")
        self.SetMenuBar(menuBar)

        accel_tbl = wx.AcceleratorTable([(wx.ACCEL_CTRL,  ord('X'), exitId )])
        self.SetAcceleratorTable(accel_tbl)

    #----------------------------------------------------------------------
    def onExit(self, event):
        """"""
        self.Close()

# Run the program
if __name__ == "__main__":
    app = wx.App(False)
    frame = MyForm().Show()
    app.MainLoop() 
```

请注意，**exitId**用于创建菜单项，将菜单项绑定到 EVT_MENU，最后在 AcceleratorTable 中使用，以便用户可以使用快捷键。

以下是一些可能有用的参考资料：

*   [http://www.blog.pythonlibrary.org/2008/07/02/wxpython-working-with-menus-toolbars-and-accelerators/](http://www.blog.pythonlibrary.org/2008/07/02/wxpython-working-with-menus-toolbars-and-accelerators/)
*   [http://wiki.wxpython.org/WorkingWithMenus](http://wiki.wxpython.org/WorkingWithMenus)
*   [http://zetcode.com/wxpython/menustoolbars/](http://zetcode.com/wxpython/menustoolbars/)
*   [http://www.blog.pythonlibrary.org/2010/12/02/wxpython-keyboard-shortcuts-accelerators/](http://www.blog.pythonlibrary.org/2010/12/02/wxpython-keyboard-shortcuts-accelerators/)

# java - 我正在用正则表达式编写 java 程序，我想从文件中读写

> ID：15552210
> 
> 赞同：-3
> 
> 时间：2013-03-21T15:52:23.477
> 
> 标签：java, regex, file-io

假设输入文件（book.txt）包含句子，例如：

```
book 'learning java' for doctor  ahmed mohamed.
the best title is:How to program for simth sahg. 
```

我想从文件（book.txt）中读取每个句子，而不是从键盘输入，并将文件中的每个句子与 3 种模式匹配：

```
 String p1 = "(book|\\)|\\:) (.*) for( doctor| author|) (.*)";
String p2 = "regex two";
String p3 = "regex three";

// matcher for each of the patterns .
Matcher m1=Pattern.compile(p1).matcher(inputtext);
Matcher m2=Pattern.compile(p2).matcher(inputtext);
Matcher p3=Pattern.compile(p3).matcher(inputtext); 
```

如果句子匹配任何模式，则将提取并写入新文件（bookout.txt）中的[作者，标题]

或不匹配任何模式写“句子”不匹配（bookout.txt）

鳕鱼是

```
 String p1 = "(book|\\)|\\:) (.*) for( doctor| author|) (.*)";
    String p2 = "regex two";
    String p3 = "regex three";
String inputtext = null;
            // matcher for each of the patterns .
            Matcher m1=Pattern.compile(p1).matcher(inputtext);
            Matcher m2=Pattern.compile(p2).matcher(inputtext);
            Matcher m3=Pattern.compile(p3).matcher(inputtext);

            try {
                BufferedWriter bw = new BufferedWriter(new FileWriter("bookout.txt",true));

            BufferedReader br = new BufferedReader(new FileReader(new File("book.txt") ));
                        inputtext= br.readLine();
                    while ((inputtext=br.readLine())!= null)
                            System.out.println(inputtext);

            String author=null;
        String title = null;

        if (m1.find()) {                //if input matches p1
            title = m1.group(2).trim();
            author = m1.group(4).trim();
        } else if (m2.find()) {           //else if input matches p2
            title = m2.group(1).trim();
            author = m2.group(3).trim();
        } else if (m3.find()) {            //else if input matches p3
            author = m3.group(2).trim();
            title = m3.group(4).trim();
        }

        if (author ==null || title == null) {   //If no matches set the author and title strings...
            bw.write("inputNot match");    //There's no match
        } else {                                //Otherwise...

            bw.write("Author : " + author);
            bw.write("Title : " + title);
            bw.close();

        }

                    } catch (Exception e) {

                        e.printStackTrace();

                    } 
```

请帮助我，如何在控制台上显示输出而不是显示将写入另一个文件（bookout.txt）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:56:28.440

使用 your`BufferedWriter`将输出写入文件。例如：

```
BufferedWriter bw = new BufferedWriter(new FileWriter("bookout.txt",true));

// write to the file
bw.write("Author : " + author);

// close the writer when you have finished writing everything
bw.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:57:46.467

代替

```
System.out.println("Author : " + author);
    System.out.println("Title : " + title); 
```

利用

```
bw.write(inputtext ) 
```

# java - 子类构造函数 (JAVA) 中的重写函数

> ID：15552215
> 
> 赞同：4
> 
> 时间：2013-03-21T15:52:39.023
> 
> 标签：java, inheritance, constructor, overriding

为什么在派生类构造函数中调用超类构造函数时 id = 0 的值？创建子对象时，何时在堆中为该对象分配内存？在基类构造函数运行之后还是之前？

```
class Parent{
        int id = 10;
        Parent(){
            meth();
        }
        void meth(){
            System.out.println("Parent :"+ id);
        }
    }
    class Child extends Parent{
        int id = 5;
        Child(){
            meth();
        }
        void meth(){
            System.out.println("Child :"+ id);
        }
    }
    public class OverRidingEg {

        public static void main(String[] args) {
            // TODO Auto-generated method stub
            Child a= new Child();

        }

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T15:57:46.623

首先执行超类构造函数。所以当被覆盖的方法被调用时，子构造函数还没有被执行，所以`id`子类中的字段仍然有它的默认值。

这就是为什么从构造函数调用可覆盖的方法是一种不好的做法，由 PMD 等工具标记：当调用这样的方法时，对象的不变量没有得到满足。

# html - 使用 Playframework Scala @select 模板 - onchange 事件

> ID：15552218
> 
> 赞同：1
> 
> 时间：2013-03-21T15:52:44.480
> 
> 标签：html, scala, playframework, playframework-2.0

我正在使用带有 scala 的 playframework 2.0，我在使用 @select 模板时遇到了很多问题。所以我有一个 @select 字段作为表单的一部分（表单在这里不应该很有趣）：

```
@select(
Form("<variable of select 1>"),
options = options(<call of function which returns a list>),
'_default -> "--- stupid select templates ---",
'_error -> Form.globalError
) 
```

现在我有另一个选择。关于这个的重要一点是 - 我想从一个函数中填充它，该函数将第一个 @select 的实际值作为参数。

```
 @select(
    Form("<other name of variable>"),
    options = options(<function(<variable of select 1>)>),
    '_default -> "--- stupid select templates ---",
    '_error -> Form.globalError
    ) 
```

所以我真正需要的是@select 字段的某种“onchange”事件。另一个问题是，playframework 无法读取 @select 的“'_default”值（当我设置默认值并尝试在表单中使用它时，它被计为无）

注意：两个 @selects 都在同一个 html 站点上，并且都属于同一个表单

有人知道这里的解决方法吗？或可能的例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-07T17:38:19.233

@adis 答案是正确的。如果您想根据刚刚选择的值动态填充下拉列表，您有两种选择：

1) 在第一次选择发生时触发表单提交并使用它来填充下一个下拉列表或 2) 使用 Javascript 和可能的 ajax 调用来动态执行此操作

第一个选项非常难看，因为它需要您重新加载并重新填充表单。这可能会导致其他与验证相关的问题，更不用说这是一个非常 90 年代的解决方案，所以我不推荐它。

像这样的东西应该会有所帮助... [根据另一个下拉列表中的选择填充一个下拉列表](https://stackoverflow.com/questions/5686735/populate-one-dropdown-based-on-selection-in-another)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T23:57:39.913

一个`default`对我有用的例子，如果所有者被填满，所有者将是可见的，而不是默认值。

```
@select(editForm("owner.id"),options(Task.owners), 'id -> "owner", 'class -> "input-xlarge", '_label -> Messages("owner"), '_default -> Messages("make.choice"), 'showConstraints -> true, '_help -> "") 
```

但我认为`onchange`服务器端模板不可能做到这一点。您将需要使用 javascript / jQuery 来执行此操作。

# gobject - 类和实例结构的区别

> ID：15552219
> 
> 赞同：1
> 
> 时间：2013-03-21T15:52:49.107
> 
> 标签：gobject

我目前正在尝试学习如何使用 GObject 并且有一点我绝对不明白：类和实例结构（如*"MamanBarClass"*和*"MamanBar"*）之间有什么区别。我该如何使用它们？
目前，我将所有对象属性放入一个私有结构中（如*"MamanBarPrivate"*），将其注册为 "g_type_class_add_private" 并定义属性/获取器/设置器以访问它们。但是当我将类结构留空时，我在“g_type_register_static_simple”处收到以下错误：

```
specified class size for type `MamanBar' is smaller than `GTypeClass' size 
```

为什么所有对象方法都定义在类结构中（如*“GtKWidgetClass”*）？可能我只是把一切都搞砸了，但我只与 Delphi 合作过 OOP（我知道，没有什么值得骄傲的 :D）

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T19:20:17.313

> 我目前正在尝试学习如何使用 GObject，但有一点我绝对不明白：类和实例结构（如“MamanBarClass”和“MamanBar”）之间有什么区别。我该如何使用它们？

类结构只创建一次，并且不是特定于实例的。这是您放置非实例特定的东西的地方，例如虚拟方法的指针（这是类结构最常见的用途）。

> 目前，我将所有对象属性放入一个私有结构（如“MamanBarPrivate”）中，使用“g_type_class_add_private”注册它并定义属性/获取器/设置器来访问它们。

好的。这是正确的做法。

> 但是当我将类结构留空时，我在“g_type_register_static_simple”处收到以下错误：

您永远不应该将类结构留空。它应该始终包含您要继承的类型的类结构。例如，如果您尝试创建 GObject，则类结构应如下所示（至少）：

```
struct _MamanBarClass {
  GObjectClass parent_class;
}; 
```

即使您没有从 GObject 继承，您仍然需要 GType 的基类：

```
struct _FooClass {
  GTypeClass parent_class;
}; 
```

这就是[在 C 中完成简单继承的方式](https://stackoverflow.com/questions/1114349/struct-inheritance-in-c)。

> 为什么所有对象方法都定义在类结构中（如“GtKWidgetClass”）？可能我只是把一切都搞砸了，但我只与 Delphi 合作过 OOP（我知道，没有什么值得骄傲的 :D）

这些是[虚拟公共方法](https://developer.gnome.org/gobject/stable/howto-gobject-methods.html#idp22001152)。至于为什么在类结构而不是实例结构中定义它们，这是因为每个实例的实现都是相同的。

# sql-server-2000 - SQL Server 2000 中的列表组合

> ID：15552222
> 
> 赞同：0
> 
> 时间：2013-03-21T15:52:51.597
> 
> 标签：sql-server-2000

我有一张列出配置文件组合的表格

```
id | p1 | p2
 1 |  1 | 2
 2 |  2 | 3
 3 |  1 | 3 
```

和一个列出用户的表格，并向其中添加配置文件。

如您所见，一个用户可以有多个配置文件

```
id | user | comb
 1 | John | 1 
 2 | John | 3 
 3 | John | 2 
 4 | Jef  | 1 
 5 | Jef  | 2 
```

现在，我想查看**每个用户**，等于第一个表的组合。异常输出：

```
 | user | comb
 | John | 1,2 
 | John | 1,3 
 | Jef| 2,3 
```

我怎样才能最好地在 SQL Server 2000 中做到这一点（所以没有 CTE :( ）？

我不能比这更进一步：

```
select * from users where comb in (
select p2 from combinations c inner join users u on u.comb = c.p1
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:26:22.097

如果我理解正确，您正在寻找具有非法组合配置文件的用户。您可以通过从非法组合表开始来做到这一点：

```
SELECT *
FROM dbo.illegal_combinations ic
JOIN dbo.user_profile p1
ON ic.p1 = p1.comb
JOIN dbo.user_profile p2
ON ic.p2 = p2.comb
AND p1.user = p2.user; 
```

这为您提供了所有用户的每个组合，因此您可能会不止一次地拥有一个用户。但这很容易解决：

```
SELECT DISTINCT p1.*
FROM dbo.illegal_combinations ic
JOIN dbo.user_profile p1
ON ic.p1 = p1.comb
JOIN dbo.user_profile p2
ON ic.p2 = p2.comb
AND p1.user = p2.user; 
```

而不是`p1.*`您应该使用特定的列列表。您可以包含来自其他表之一的列，但是您可能会再次获得重复的用户。

# google-search-appliance - 在 Google Search Appliance 上验证搜索参数

> ID：15552241
> 
> 赞同：0
> 
> 时间：2013-03-21T15:53:36.950
> 
> 标签：google-search-appliance

在我们所有的网站上，我们都为搜索功能实施了 GSA。最近，该搜索词已被扫描是否存在跨站脚本漏洞。我知道我们可以在将查询发送到 GSA 之前使用 JavaScript 来验证搜索词。但我不确定有多少地方，我们需要实现这一点。

有没有办法可以直接在 GSA 上执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:32:03.197

您应该遵循 OWASP 指南来预防 XSS。根据经验，永远不要在页面上输出未编码的内容。

[https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet](https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet)

# vba - 如何从 Powerpoint 将表格（形状）导出为 JPG

> ID：15552242
> 
> 赞同：3
> 
> 时间：2013-03-21T15:53:40.443
> 
> 标签：vba, powerpoint

我可以从 Powerpoint 将图表导出为 JPG 文件，但无法使用表格执行此操作，据我所知，它仍然是应该能够导出的“形状”。

这是我用来将图表导出为 JPG 的代码的清理版本。

```
Const imgFilePath as String = "ChartImage.JPG"
Sub ExportChartJPG()
Dim cht as Variant  'this will hold the Chart/Shape object

Set cht = ActivePresentation.Slides(1).Shapes("Chart1").Chart

On Error Resume Next
    Kill imgPath
On Error GoTo 0

cht.Export imgPath, "JPG"

End Sub 
```

我认为这很容易修改，例如：

```
Sub ExportChartJPG()
Dim cht as Variant  'this will hold the Chart/Shape object

Set cht = ActivePresentation.Slides(1).Shapes("Table1").Table

On Error Resume Next
    Kill imgPath
On Error GoTo 0

cht.Export imgPath, "JPG"

End Sub 
```

但这会引发错误`13`不匹配。

我也尝试过将尺寸标注`cht`为 Shape 而不是 Variant，并且 setting`cht = ActivePresentation.Slides(1).Shapes("Table1")`也未成功。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T20:01:03.487

尽管 KazJaw 的解决方案有效，但有点麻烦（复制需要额外的时间来处理，我认为由于没有“等待”足够长的时间来完成复制，剪贴板问题？等等）

[http://www.tech-archive.net/pdf/Archive/Office/microsoft.public.office.developer.vba/2006-10/msg00046.pdf](http://www.tech-archive.net/pdf/Archive/Office/microsoft.public.office.developer.vba/2006-10/msg00046.pdf)

我打开对象浏览器，右键单击并显示隐藏的方法，现在我可以`Export`在`Shape`.

```
Sub ExportShapeJPG()
Dim cht as Variant  'this will hold the Chart/Shape object

Set cht = ActivePresentation.Slides(1).Shapes("Table1") '<-- removed .Table and only pass the Shape itself

'Likewise, for charts, omit the .Chart:
' Set cht = ActivePresentation.Slides(1).Shapes("Chart1") 

On Error Resume Next
    Kill imgPath
On Error GoTo 0

cht.Export imgPath, ppShapeFormatJPG  '<-- The export syntax is slightly different using ppShapeFormatJPG instead of "JPG"

End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T17:17:04.117

我有一个很奇怪的想法。查看第一部分保存图表和第二部分保存表的代码。

```
Sub ExportinChartAndTable()
Dim imgFilePath As String
    imgFilePath = ActivePresentation.Path & "\chart"

Dim shp As Shape
    Set shp = ActivePresentation.Slides(1).Shapes(1)
Dim shpChart As Chart
    Set shpChart = shp.Chart
'exporting chart
On Error Resume Next
    Kill imgFilePath
On Error GoTo 0
shpChart.Export imgFilePath & "chart.jpg", "JPG"

Stop
Dim chartPart As ChartData
    Set chartPart = shpChart.ChartData

imgFilePath = ActivePresentation.Path & "\dataTable.jpg"

chartPart.Workbook.worksheets("arkusz1").Range("a1:c20").Copy
shpChart.Paste
shpChart.Shapes(1).Width = shp.Width
shpChart.Shapes(1).Height = shp.Height
On Error Resume Next
    Kill imgFilePath
On Error GoTo 0
shpChart.Export imgFilePath, "JPG"

End Sub 
```

您必须想出如何检查表格范围的想法。我希望这`CurrentRegion`会奏效，但事实并非如此。您可以使用这种可能性来计算表中的行数和列数（这是可能的）。或者也许你有固定的范围，所以这很容易。还有一件事，您必须在调整表格大小时调整尺寸。

**编辑由于大卫评论。**我保留了上述解决方案，因为可能对其他人有用（请参阅下面的评论）

```
Sub SolutionSecond()

Dim whereTo As String
    whereTo = ActivePresentation.Path & "\table.jpg"
Dim shp As Shape
Set shp = ActivePresentation.Slides(1).Shapes(1)

Dim chrt As Shape
Set chrt = ActivePresentation.Slides(1).Shapes.AddChart

shp.Copy

'required due to excel opening proces
    chrt.Select
    chrt.Chart.Paste

'set dimensions here
chrt.Chart.Export whereTo, "JPG"

    chrt.Delete
 End Sub 
```

这一个基于相同的逻辑。将表格复制到可以导出（唯一一种形状）的图表中。

# jquery - 如何将参数传递到jquery mobile中的动态页面（在函数内）

> ID：15552245
> 
> 赞同：0
> 
> 时间：2013-03-21T15:53:49.493
> 
> 标签：jquery, jquery-mobile

我有这个功能：

```
var getData = function () {

    for(var i = 0, j = localStorage.length; i < j; i ++) {
        var newKey = localStorage.key(i);
        var newValue = localStorage.getItem(newKey);    
        var newObj = JSON.parse(newValue);
        var ulListView = $('#container').append('<ul data-role="listview" data-split-icon="minus" data-split-theme="c" data-inset="true" id="ulOrigin'+i+'"></ul>');
        var objPage = $(newObj[1].value).trigger('create'); //Create an obj. of type page
        var strnDynPage = JSON.stringify(objPage.selector); //Extract the selector and convert it into a string to use for the id       

        var insideLi = $('#ulOrigin'+i).append('<li><a href="#'+objPage.selector+'"><img src="images/'+newObj[0].value+'.png"><h2>'+newObj[1].value+'</h2><p>'+newObj[0].value+'</p></a><a href = "#deleteObject" data-rel = "popup" data-position-to = "window" data-transition = "pop">Delete Entry</a></li>');       
        //var dynPage = $('<div data-role = "page" id = "'+newObj[1].value+'"><div data-role = "header"></div><div data-role = "content"></div><div data-role = "footer"></div>"</div>');
        console.log(typeof objPage.selector);

    }

}; 
```

在这个函数中，我创建了带有一些可点击项目的动态列表。我希望能够为每个列表分配一个动态页面。

**我尝试过的事情：**

在我创建一个动态页面的函数中，获取 .selector（它返回一个字符串值）并将其分配给 a href。的名单。我没有收到任何错误，但页面没有打开。对这个问题有什么想法吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:07:49.150

既然是jquery mobile那么

```
<a href="#'+objPage.selector+'"> 
```

我们需要看看什么

```
objPage.selector 
```

正在返回，将您生成的 html 添加到问题中

# cocos2d-iphone - cocos2d如何同时运行两个动作

> ID：15552246
> 
> 赞同：3
> 
> 时间：2013-03-21T15:53:49.257
> 
> 标签：cocos2d-iphone, action

所以我知道 CCSpawn 并且我一直在使用它同时运行多个操作，但现在我遇到了一个问题。我制作了一个只持续很短时间然后消失的游戏角色，我想使用 CCBlinks 通知用户。所以我想知道如何将 CCBlinks 与角色正在做的任何动作结合起来？例如角色当前的动作状态是攻击，如何将攻击动作与CCBlinks动作结合起来？

# javascript - onmouseover 改变图片

> ID：15552254
> 
> 赞同：0
> 
> 时间：2013-03-21T15:54:04.963
> 
> 标签：javascript, onmouseover

我试图在图像上放置链接。当鼠标悬停在图像上时，图像从 login_button_22.jpg 变为 login_button_11.jpg。我正在使用以下代码，它适用于 IE，但不适用于 chrome 和其他。任何想法如何修改它，为所有探险家工作？谢谢

```
<a href="#top"

onmouseover="document.getElementById('myimage1').src='img/login_button_22.jpg';"
onmouseout="document.getElementById('myimage1').src='img/login_button_11.jpg';" >

    <img src="img/login_button_11.jpg" id="myimage1" />

</a> 
```

# java - Swing AncestorListener：不要触发标签切换？

> ID：15552255
> 
> 赞同：4
> 
> 时间：2013-03-21T15:54:11.350
> 
> 标签：java, swing, jtabbedpane, ancestor

我正在使用以下代码让我的组件分别在添加/删除时注册/取消注册事件侦听器。

```
addAncestorListener(new AncestorListener() {
        @Override public void ancestorRemoved(AncestorEvent event) {
            log.info("========= Remove listeners by " + ContentViewingComponent.this);
            ...
        }
        @Override public void ancestorMoved(AncestorEvent event) {}
        @Override public void ancestorAdded(AncestorEvent event) {
            log.info("========= Add listeners by " + ContentViewingComponent.this);
            ...
        }
    }); 
```

我的意图是，在大多数情况下，这两个事件（添加和删除）基本上都会触发一次，即创建和添加组件时以及删除和忘记组件时。

`JTabbedPane`但是，事实证明，当该组件所在的选项卡 (of ) 被选中/隐藏时，它们也会被触发。有没有办法规避/检测到它？

~~也许一个版本`JTabbedPane`使用显示/隐藏而不是添加/删除？~~更新：更多调查显示该组件实际上并未被删除，而是隐藏了选项卡，并且`ancestorRemoved()`也因此而触发。我可以检测组件是否仍然具有 root* 并忽略该事件（如果有），但问题是当组件实际被移除（不可见时）时它不会再次被触发。

*~~好吧，这还有待观察。它在实际删除之前似乎`ancestorRemoved()`会触发，所以我无法沿着`getParent()`链查找组件是否有根。~~更新：通过稍后使用`SwingUtilities.invokeLater()`.

* * *

（对于那些熟悉 Flash/AS3 的人，我正在寻找与`ADDED_TO_STAGE`/`REMOVED_FROM_STAGE`事件等效的 Swing。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T16:33:55.807

通过使用 HierarchyListener 修复。

```
public static void addDisplayableListeners(final Component comp, final Runnable onDisplayable, final Runnable onNotDisplayable) {
    comp.addHierarchyListener(new HierarchyListener() {
        @Override public void hierarchyChanged(HierarchyEvent e) {
            System.out.println("HIERARCHY CHANGE ===== " + comp);
            final boolean dc = (e.getChangeFlags() & HierarchyEvent.DISPLAYABILITY_CHANGED) != 0;
            if (dc) {
                System.out.println("DISPLAYABILITY_CHANGED");
                if (comp.isDisplayable()) {
                    onDisplayable.run();
                } else {
                    onNotDisplayable.run();
                }
            }
        }
    });
} 
```

* * *

旧版：

```
 addHierarchyListener(new HierarchyListener() {

        private boolean hadRoot = false;

        @Override public void hierarchyChanged(HierarchyEvent e) {

            System.out.println("HIERARCHY CHANGE ===== " + ContentViewingComponent.this);

            final boolean hasRoot = Swing.hasRoot(ContentViewingComponent.this);
            System.out.println("Has root: " + hasRoot);

            if (hasRoot != hadRoot) {

                System.out.println("...which is not what was.");
                hadRoot = hasRoot;

                if (hasRoot) {
                    log.info("========= Add listeners by " + ContentViewingComponent.this);
                    ...
                } else {
                    log.info("========= Remove listeners by " + ContentViewingComponent.this);
                    ...
                }
            }

        }
    }); 
```

注意：我会看看我是否可以用@mKorbel 的答案中提到的官方方法替换我自己的助手（`hadRoot`和）。`hasRoot()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T16:21:08.493

> 我的意图是，在大多数情况下，这两个事件（添加和删除）基本上都会触发一次，即创建和添加组件时以及删除和忘记组件时

有 AncestorListener、ComponentListener 和 HierarchyListener 并且可以是异步的，您可以通过使用 SwingUtilities 从这些事件或祖先中获取组件的相同方式

例如

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.event.ComponentEvent;
import java.awt.event.ComponentListener;
import java.awt.event.HierarchyEvent;
import java.awt.event.HierarchyListener;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTabbedPane;
import javax.swing.event.AncestorEvent;
import javax.swing.event.AncestorListener;

public class MyTabbedPane {

    private JTabbedPane tabbedPane = new JTabbedPane();
    private JFrame f = new JFrame();
    private JLabel label1 = new JLabel("Tab1");
    private JLabel label2 = new JLabel("Tab2");
    private JLabel label3 = new JLabel("Tab3");
    private JLabel label4 = new JLabel("Tab4");

    public MyTabbedPane() {
        tabbedPane.addTab("Tab1", label1);
        tabbedPane.addTab("Tab2", label2);
        tabbedPane.addTab("Tab3", label3);
        tabbedPane.addTab("Tab4", label4);
        tabbedPane.setTabPlacement(JTabbedPane.TOP);
        tabbedPane.setTabLayoutPolicy(JTabbedPane.SCROLL_TAB_LAYOUT);

        label1.addAncestorListener(new EventHandler());
        label2.addAncestorListener(new EventHandler());
        label3.addAncestorListener(new EventHandler());
        label4.addAncestorListener(new EventHandler());

        label1.addHierarchyListener(new EventHandler());
        label2.addHierarchyListener(new EventHandler());
        label3.addHierarchyListener(new EventHandler());
        label4.addAncestorListener(new EventHandler());

        label1.addComponentListener(new EventHandler());
        label2.addComponentListener(new EventHandler());
        label3.addComponentListener(new EventHandler());
        label4.addComponentListener(new EventHandler());

        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(tabbedPane, BorderLayout.CENTER);
        f.setPreferredSize(new Dimension(600, 400));
        f.pack();
        f.setVisible(true);
    }

    class EventHandler implements AncestorListener, ComponentListener, HierarchyListener {

        @Override
        public void ancestorAdded(AncestorEvent event) {
            System.out.println("CardlayoutTest.EventHandler.ancestorAdded()");
        }

        @Override
        public void ancestorMoved(AncestorEvent event) {
            System.out.println("CardlayoutTest.EventHandler.ancestorMoved()");
        }

        @Override
        public void ancestorRemoved(AncestorEvent event) {
            System.out.println("CardlayoutTest.EventHandler.ancestorRemoved()");
        }

        @Override
        public void hierarchyChanged(HierarchyEvent e) {
            System.out.println("Components Change: " + e.getChanged());
            if ((e.getChangeFlags() & HierarchyEvent.DISPLAYABILITY_CHANGED) != 0) {
                if (e.getComponent().isDisplayable()) {
                    System.out.println("Components DISPLAYABILITY_CHANGED : " + e.getChanged());
                } else {
                    System.out.println("Components DISPLAYABILITY_CHANGED : " + e.getChanged());
                }
            }
            if ((e.getChangeFlags() & HierarchyEvent.SHOWING_CHANGED) != 0) {
                if (e.getComponent().isDisplayable()) {
                    System.out.println("Components SHOWING_CHANGED : " + e.getChanged());
                } else {
                    System.out.println("Components SHOWING_CHANGED : " + e.getChanged());
                }
            }
        }

        @Override
        public void componentHidden(ComponentEvent e) {
            System.out.println(e.getComponent().getClass().getName() + " --- Hidden");
        }

        @Override
        public void componentMoved(ComponentEvent e) {
            System.out.println(e.getComponent().getClass().getName() + " --- Moved");
        }

        @Override
        public void componentResized(ComponentEvent e) {
            System.out.println(e.getComponent().getClass().getName() + " --- Resized ");
        }

        @Override
        public void componentShown(ComponentEvent e) {
            System.out.println(e.getComponent().getClass().getName() + " --- Shown");
        }
    }

    public static void main(String args[]) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                MyTabbedPane frame = new MyTabbedPane();

            }
        });
    }
} 
```

# ios - 通过对第二个、第三个等词的锚定搜索对字符串数组进行排序

> ID：15552256
> 
> 赞同：2
> 
> 时间：2013-03-21T15:54:11.383
> 
> 标签：ios, objective-c, sorting, nsarray, nspredicate

我的意思是一个数组，其中包含以下单词：

```
@[@"Hellobla", @"Hello Kitty", @"Hello Kitty Bla", @"Bla apukitty", @"Bla helkitty"] 
```

我需要对它们进行排序，就像锚定由空格分隔的所有单词一样`@" "`。

如果我输入`"Hel"`- 我会看到`@"Hellobla", @"Hello Kitty Bla", @"Bla helkitty"`

如果我输入`"kit"`- 我会看到`@"Hello Kitty Bla", @"Hello Kitty"`

如果我输入`"bla"`- 我会看到`@"Hello Kitty Bla", @"Bla apukitty", @"Bla helkitty"`

ETC ：）

我在块返回数组中执行此操作：

```
 // arrayWithData - All Words
    // searchWord - Text i try to search with
    // arrayToWrite - array to return with words
    // arrayToCompare - array with words already added whitch first NSPredicate *beginPredicate = [NSPredicate predicateWithFormat:@"self BEGINSWITH[cd] %@", //searchText];

beginMatch = [self.objects filteredArrayUsingPredicate:beginPredicate];

   sortedWithSecondWordArray = ^(NSArray * arrayWithData,
                                  NSString * searchWord,
                                  NSMutableArray *arrayToWrite,
                                  NSArray * arrayToCompare) {

        NSString *space = @" ";

        for (__strong NSString *string in arrayWithData) {
            NSString *staticString = string; 
            while ([string rangeOfString:space].location != NSNotFound) {
                NSRange range = NSMakeRange(0, [string rangeOfString:space].location);

                NSString *keyword = [[string stringByReplacingCharactersInRange:range withString:@""] trim];

                if (keyword.length > 0
                    && [keyword rangeOfString:searchWord options:NSAnchoredSearch].location != NSNotFound
                    && ![arrayToCompare containsObject:staticString]
                    && ![arrayToWrite containsObject:staticString]) {

                    [arrayToWrite addObject:staticString];
                }
                string = keyword;
            };
        }
        return arrayToWrite;
    }; 
```

它有效，但如果在我的 Array 2000 个字符串中，它可能超过 10k。它真的很糟糕。如何优化它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:25:40.300

如果我正确理解了您的问题，那么您想匹配任何包含以您的搜索字符串开头的单词的字符串吗？

`NSPredicate`带有正则表达式的一个可以做到这一点，使用单词`\b`边界锚。

```
NSArray *data = @[@"Hellobla", @"Hello Kitty", @"Hello Kitty Bla", @"Bla apukitty", @"Bla helkitty"]; 

NSString *searchString = @"Hel"; // Change to other strings

NSString *anchoredPattern = [NSString stringWithFormat: @".*\\b%@.*", searchString];

NSPredicate *anchoredPred = [NSPredicate predicateWithFormat: @"SELF MATCHES[cd] %@", anchoredPattern];

NSArray *filtered = [data filteredArrayUsingPredicate:anchoredPred]; 
```

它会产生您想要的结果，但可能的例外是它在结果中同时包含“Hello Kitty”和“Hello Kitty Bla”。

如果这不是您想要的，您可能需要再次过滤结果以排除作为数组中其他字符串的子字符串的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:30:01.490

你说你的搜索有效（它应该做什么在问题中不是很清楚），但你担心速度。它是否明显很慢，或者您预测会很慢？

字符串计数，而不是字节计数，是速度的因素。2000 有点大，但我的直觉是使用蛮力它会足够快。

或者，优化搜索是一个巨大的话题，但可以将大多数解决方案总结如下：建立索引。例如[查看“尝试”](http://en.wikipedia.org/wiki/Trie)。

# python - 在多个文件中搜索字符串和元数据

> ID：15552258
> 
> 赞同：1
> 
> 时间：2013-03-21T15:54:21.553
> 
> 标签：python

需要在数千个文件中搜索特定的字符串/元数据、十六进制标签等，但我所做的这个 python 代码只搜索一个需要很长时间的文件

```
def check():
        datafile = file('example.txt')
        found = False
        for line in datafile:
            if blabla in line:
                found = True
                break

        return found

found = check()
if found:
    print "true"
else:
    print "false" 
```

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:20:18.900

使文件名/路径成为函数的参数。然后你的函数可以处理任何文件，而不仅仅是一个特定的文件。然后，为您希望它处理的每个文件调用该函数。您可能想要列出要处理的文件名/路径，然后有一个循环来为每个文件执行您想要的操作。

例如。

```
def check(fname):
    datafile = open(fname)
    found = False
    # ...
    return found

files = ['a', 'b', 'c']
for fname in files:
    found = check(fname)
    if found:
        print("true")
    else:
        print("false") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:23:14.333

假设文件都包含在目录“/foo”中：

```
import os, re
#Use a re.findall() to avoid line-by-line parsing
myrex = re.compile('blabla')

def check(filename):
    with open(filename) as myfile:
        matches = myrex.findall(myfile.read())
        return len(matches) > 0

os.chdir("/foo")
#Use an os.walk() to find the names of all files in this directory
for root,dir,files in os.walk('.'):
    for fname in files:
        print fname + ": " + str(check(fname)) 
```

如果文件存储在多个位置，则需要围绕“os.chdir()”块进行额外循环。如果您要搜索多个模式，请使用另一个“re.compile()”。

这有助于回答您的问题吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T16:45:34.293

如果所有文件都在一个目录中，您可以使用`os.listdir()`. 这将为您提供**目录**中所有文件的列表。从那里，您可以使用例如`os.listdir('/home/me/myData')`. 如果您在基于 unix 的系统上：`grep`是一个非常强大的工具，它将为您提供很大的灵活性。你可能想要`grep -r "your query" ./ > results.txt`. 这将为您提供与您的搜索匹配的每一行，并包括使用正则表达式的选项......并将其保存到文件中。否则，仅使用 python 搜索大量文件：

```
def check(x):
    return "blabla" in x
files = os.listdir('/home/me/files')
for f in files:
    x = open(f, "r").read()
    print check(x) 
```

*我的检查功能的行为不同，因为它不逐行检查`True`并且`False`用大写字母打印。*

我想您可能想知道结果来自哪个文件。（什么线？）

```
for f in files:
    x = open(f, "r").read().split('\n')
    for count in range( len(x) ):
        if check(x[count]):
            print f + " " + count + " " +x[count] 
```

...或任何你需要知道的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T16:29:13.170

您可能希望考虑`glob`或`os.walk`检索文件名，但类似于：

```
import fileinput

print any(blabla in line for line in fileinput.input(['some', 'list', 'of', 'file', 'names']) 
```

这会自动顺序读取文件，并会在真值测试中短路。

# php - Wordpress is_front_page 不工作

> ID：15552259
> 
> 赞同：1
> 
> 时间：2013-03-21T15:54:23.143
> 
> 标签：php, wordpress

当我使用此代码在我的首页/主页上获取特定类别的帖子时

```
<?php query_posts('category_name=featured&amp;showposts=10'); ?>
<?php while (have_posts()) : the_post(); ?>!-- stuff... --<?php endwhile;?> 
```

然后`is_front_page()`停止工作。当我删除

```
<?php query_posts('category_name=special_cat&amp;showposts=10'); ?> 
```

然后`is_front_page()`工作正常。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:54:03.650

而不是`query_posts`尝试使用`WP_Query()`来避免覆盖主查询。

就像是：

> $newQuery = new WP_Query(array('category_name'=>'featured', 'posts_per_page' =>'10'));

# android - 我不知道在哪里将意图放在进度条中

> ID：15552261
> 
> 赞同：0
> 
> 时间：2013-03-21T15:54:27.537
> 
> 标签：android

这是我刚刚在网上搜索的java代码。我不知道如何在进度条中放置和意图，以便在加载后可以更改布局...如果您能帮助我，那就太好了...谢谢...

```
public class Support extends Activity {
private static int progress;
private ProgressBar progressBar;
private int progressStatus = 0;
private Handler handler = new Handler();

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.support);

    progress = 0;
    progressBar = (ProgressBar) findViewById(R.id.progressBar);
    progressBar.setMax(400);

    while(progressStatus < 100)
    {
        progressStatus = doSomeWork();
        handler.post(new Runnable()
        {
            public void run(){
                progressBar.setProgress(progressStatus);

            }
        });

    }
    handler.post(new Runnable()
    {
        public void run()
        {
            progressBar.setVisibility(0);
        }
    }); 
```

}

```
private int doSomeWork() {
    try{
        Thread.sleep(50);
}       
catch(InterruptedException e)
{
    e.printStackTrace();

}
    return ++progress;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:43:05.890

首先，while 循环冻结了 UI。您需要将其移至[工作线程或异步任务。](http://developer.android.com/guide/components/processes-and-threads.html)

其次，进度条仅用于显示冗长任务的进度 - 而不是启动活动。要解决您的问题，请`startActivity()` **在循环完成时**调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:07:05.787

# 线程（注意 UI 冻结）

## 完整的 XML

```
<?xml version="1.0" encoding="utf-8"?>
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<Button
    android:id="@+id/btnStartProgress"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Download File" />

</LinearLayout> 
```

## 完整代码

```
import android.app.Activity;
import android.app.ProgressDialog;
import android.os.Bundle;
import android.os.Handler;
import android.widget.Button;
import android.view.View;
import android.view.View.OnClickListener;

public class MyAndroidAppActivity extends Activity {

Button btnStartProgress;
ProgressDialog progressBar;
private int progressBarStatus = 0;
private Handler progressBarHandler = new Handler();

private long fileSize = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    addListenerOnButton();

}

public void addListenerOnButton() {

    btnStartProgress = (Button) findViewById(R.id.btnStartProgress);
    btnStartProgress.setOnClickListener(
             new OnClickListener() {

       @Override
       public void onClick(View v) {

        // prepare for a progress bar dialog
        progressBar = new ProgressDialog(v.getContext());
        progressBar.setCancelable(true);
        progressBar.setMessage("File downloading ...");
        progressBar.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        progressBar.setProgress(0);
        progressBar.setMax(100);
        progressBar.show();

        //reset progress bar status
        progressBarStatus = 0;

        //reset filesize
        fileSize = 0;

        new Thread(new Runnable() {
          public void run() {
            while (progressBarStatus < 100) {

              // process some tasks
              progressBarStatus = doSomeTasks();

              // your computer is too fast, sleep 1 second
              try {
                Thread.sleep(1000);
              } catch (InterruptedException e) {
                e.printStackTrace();
              }

              // Update the progress bar
              progressBarHandler.post(new Runnable() {
                public void run() {
                  progressBar.setProgress(progressBarStatus);
                }
              });
            }

            // ok, file is downloaded,
            if (progressBarStatus >= 100) {

                // sleep 2 seconds, so that you can see the 100%
                try {
                    Thread.sleep(2000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }

                // close the progress bar dialog
                progressBar.dismiss();
            }
          }
           }).start();

           }

            });

    }

// file download simulator... a really simple
public int doSomeTasks() {

    while (fileSize <= 1000000) {

        fileSize++;

        if (fileSize == 100000) {
            return 10;
        } else if (fileSize == 200000) {
            return 20;
        } else if (fileSize == 300000) {
            return 30;
        }
        // ...add your own

    }

    return 100;

}

} 
```

## [支持文章](http://www.mkyong.com/android/android-progress-bar-example/)

# eclipse - 自动设置默认的 checkstyle 配置文件

> ID：15552262
> 
> 赞同：2
> 
> 时间：2013-03-21T15:54:29.663
> 
> 标签：eclipse, eclipse-plugin, checkstyle

我正在为大量用户配置 Eclipse 安装，并希望尽可能完整地对其进行配置。

它的 Eclipse 3.7 和我安装了 checkstyle 5.6，我还创建了一个带有自定义配置的插件。现在，我想以某种方式将此自定义 checkstyle 配置设置为 Eclipse 中新用户的默认设置。我怎样才能做到这一点？

我试图在首选项中设置它，然后导出首选项。但这似乎并没有设置 checkstyle 配置文件。

我实际上开始考虑将 CS 配置文件转换为 Eclipse 代码格式化程序，因为这将很容易让我将其设置为默认值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:26:50.453

一些设置存储在工作区中，因此如果不提供默认工作区，恐怕您将无法完成工作。

# django - 覆盖 Django 基于类的视图中的 get() 以过滤

> ID：15552267
> 
> 赞同：2
> 
> 时间：2013-03-21T15:54:47.307
> 
> 标签：django, django-class-based-views

我正在开始一个新的应用程序，我正在尽我所能接受基于类的视图。啊，成长的痛苦。我正在尝试从 GET 变量在这里做一个简单的过滤器，如果它不存在，我想返回按 id desc 排序的所有对象，如果是，我想过滤、排序并返回过滤后的列表。

我正在编写 30 多行代码来执行此操作，所以我*一定*做错了什么，对吧？我尝试覆盖 get_queryset() ，现在我想到了，也许我应该在 get_queryset() 中调用 self.request.GET['search'] 来执行此过滤。有没有标准的方法来完成这个？

```
class MyModelList(AdminPageMixin, ListView):
    model = MyModel
    context_object_name = 'object'
    template_name = 'template/list.html'

    def get(self, request, *args, **kwargs):
        if 'search' in request.GET and len(request.GET['search']):
            search = request.GET['search']
            self.object_list = MyModel.objects.filter(advertiser__name=search).orderby('-id')
            context = self.get_context_data(object_list=self.object_list, search=search)
        else:
            self.object_list = MyModel.objects.all()
            context = self.get_context_data(object_list=self.object_list).orderby('-id')
        return self.render_to_response(context)

    def get_context_data(self, **kwargs):
        context = super(MyModelList, self).get_context_data(**kwargs)
        form = MyModelForm
        try:
            context['search'] = kwargs['search']
        except KeyError:
            pass
        context['form'] = form
        context['form_action'] = reverse('mymodel-add')
        context['form_display'] = 'hide'
        context['form_save_label'] = 'Add'
        return context 
```

其次，为了使事情复杂化，我有一个 CreateView 和一个 UpdateView，我想共享我的 ListView 的 get() 或 get_queryset() 和 get_context_data() 方法。我确信使用 Mixin 是可能的，但同样，我正在寻找一种标准化的方式来做这件事。建议？这是我想在其中分享 ListView 方法的 CreateView。

```
class MyModelAdd(AdminPageMixin, CreateView):
    model = MyModel
    form_class = MyModelForm
    context_object_name = 'object'
    template_name = 'templates/list.html'

    def get_success_url(self):
        return reverse('mymodel-list')

    def get_context_data(self, **kwargs):
        context = super(MyModelAdd, self).get_context_data(**kwargs)
        context['form_action'] = reverse('mymodel-add')
        context['form_display'] = 'show'
        context['object_list'] = MyModel.objects.all()
        return context

    def form_invalid(self, form):
        form = MyModelForm(self.request.POST)
        context = self.get_context_data()
        context['form'] = form
        context['form_action'] = reverse('mymodel-add')
        context['form_display'] = 'show'
        context['form_save_label'] = 'Add'
        return render(self.request, 'templates/list.html', context) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T11:41:43.097

首先，您的观察是正确的：您绝对应该使用`get_queryset`过滤列表。我建议以下内容：

```
class MyModelList(AdminPageMixin, ListView):
    model = MyModel
    context_object_name = 'object'
    template_name = 'template/list.html'

    def get_queryset(self):
        qs = self.model.objects.all()
        search = self.request.GET.get('search')
        if search:
            qs = qs.filter(advertiser__name__icontains=search)
        qs = qs.order_by("-id") # you don't need this if you set up your ordering on the model
        return qs 
```

其次，如果你真的需要在 List 和其他视图之间重用代码，你最好编写一个单独的函数而不是使用 mixin。

附注：您不需要`form_action`表单中的 URL；只需设置`action=""`，它将发布到相同的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-23T03:56:13.877

最好的方法是过滤“get_context_data”中的数据。

```
def get_context_data(self, **kwargs):
    context = super(MyModelAdd, self).get_context_data(**kwargs)
    context['form_action'] = reverse('mymodel-add')
    context['form_display'] = 'show'
    context['object_list'] = MyModel.objects.all(user=self.request.user)# that's will filter the user data
    return context 
```

# android - 从 ShareActionProvider 列表中删除 YourSelf

> ID：15552269
> 
> 赞同：5
> 
> 时间：2013-03-21T15:54:50.880
> 
> 标签：android, android-actionbar, actionbarsherlock, shareactionprovider

我在应用程序中使用[ActionBarSherlock以及 ShareActionProvider。](http://actionbarsherlock.com)我正在使用共享意图以与[ActionBarSherlock 示例](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/demos/src/com/actionbarsherlock/sample/demos/ShareActionProviders.java)非常相似的方式共享图像：

```
Intent shareIntent = new Intent();
shareIntent.setAction(Intent.ACTION_SEND);
shareIntent.putExtra(Intent.EXTRA_STREAM, uri);
shareIntent.setType("image/*"); 
```

一切正常，唯一的问题是我的应用程序还接受共享图像内容（“image/*”），因此它显示在应用程序列表中。有没有办法解决？

**编辑：**

这是我的意图过滤器：

```
<intent-filter>
    <action android:name="android.intent.action.SEND"/>
    <category android:name="android.intent.category.DEFAULT"/>
    <data android:mimeType="image/*"/>
</intent-filter> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-02T23:36:37.653

如果我了解您想要做什么，基本上，您想要动态启用/禁用您的意图过滤器。

就我所知，你无法直接实现你想要的，但你可以通过[PackageManager 和 setComponentEnabledSetting()](http://developer.android.com/reference/android/content/pm/PackageManager.html#setComponentEnabledSetting)获得相同的效果来禁用你的活动。显然，如果在您的应用程序中禁用“接收者”活动是可能的。

# javascript - subHeader 中的 jQuery 表格排序器

> ID：15552272
> 
> 赞同：1
> 
> 时间：2013-03-21T15:54:58.173
> 
> 标签：javascript, jquery, tablesorter

我在我的 UI 中使用 jQuery tablesorter。我有一个场景，我有一个带有 2 行标题的表格。一个主标题和一个副标题。我想为子标题添加排序。我怎样才能做到这一点。

这就是我的代码的样子，

```
<table class="grid" id="gr1" cellspacing="0" width="100%" border="1">
     <tr bgcolor="#FF0000"><th class="NOBORDER" colspan="1">&nbsp;</th>
     <th class="NOBORDER" colspan="3">A</th>
     <th class="NOBORDER" colspan="3">B</th>
     <th class="NOBORDER" colspan="3">C</th>
     <th class="NOBORDER" colspan="3">D</th>
     <th class="NOBORDER" colspan="3">E</th>
     <th class="NOBORDER" colspan="3">F</th>
     </tr>
     <tr>
     <th>Group</th> 
     <th>A1</th>
     <th>A2</th>
     <th>A3</th>
     <th>B1</th>
     <th>B2</th>
     <th>B3</th>
     <th>C1</th>
     <th>C2</th>
     <th>C3</th>
     <th>D1</th>
     <th>D2</th>
     <th>D3</th>
     <th>E1</th>
     <th>E2</th>
     <th>E3</th>
     <th>F1</th>
     <th>F2</th>
     <th>F3</th>
    </tr> 
```

从此表中，我想对第二行中的组列进行排序。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T13:08:08.540

该表存在三个问题（[工作演示](http://jsfiddle.net/Mottie/eY8uH/409/)）：

1.  tablesorter在初始化之前需要一个带有`<thead>`and的表。`<tbody>`示例中没有显示完整的表格，所以我只能假设`<tbody>`可能也丢失了。

    ```
    <table class="grid tablesorter" id="gr1" cellspacing="0" width="100%" border="1">
        <thead>
            <tr bgcolor="#FF0000">
                <th class="NOBORDER" colspan="1">&nbsp;</th>
                <th class="NOBORDER" colspan="3">A</th>
                ...
                <th class="NOBORDER" colspan="3">F</th>
            </tr>
            <tr>
                <th>Group</th>
                <th>A1</th>
                <th>A2</th>
                <th>A3</th>
                <th>B1</th>
                ...
                <th>F3</th>
            </tr>
        </thead>
        <tbody>
            <tr>...</tr>
        </tbody>
    </table> 
    ```

2.  [tablesorter](http://tablesorter.com/docs/)的原始版本要求在`"tablesorter"`应用任何样式之前将类名添加到表中。

3.  原始版本似乎也不适用于`<thead>`. 因此，禁用顶行中的排序以使排序在第三列（以及第四列，但每组中的第三列）中正常工作。试试这个初始化代码：

    ```
    $('table').tablesorter({
        headers : {
            0 : { sorter: false },
            1 : { sorter: false },
            2 : { sorter: false },
            3 : { sorter: false },
            4 : { sorter: false },
            5 : { sorter: false },
            6 : { sorter: false }   
        }
    }); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:33:06.337

尝试将表格放在表格中，并将表格分类器应用于内部表格。内表将具有第二行标题，而外部表将具有第一行。您将不得不处理 css/widths，但这会将外部表与内部表无缝合并。所以你的代码看起来像这样：

```
<table class="outerTableLook" id="OuterTable" cellspacing="0" width="100%">
 <tr bgcolor="#FF0000"><th class="NOBORDER" colspan="1">&nbsp;</th>
 <th class="NOBORDER" colspan="3">A</th>
 <th class="NOBORDER" colspan="3">B</th>
 <th class="NOBORDER" colspan="3">C</th>
 <th class="NOBORDER" colspan="3">D</th>
 <th class="NOBORDER" colspan="3">E</th>
 <th class="NOBORDER" colspan="3">F</th>
 </tr>
<tr>
<table class="grid" id="gr1" cellspacing="0" width="100%" border="1">
 <tr>
 <th>Group</th> 
 <th>A1</th>
 <th>A2</th>
 .......
</tr>  
....
</table><!--inner table -->
</tr>
</table><!-- outer table --> 
```

# vim - vim -- Ctrl + N -- 禁用递归头搜索

> ID：15552273
> 
> 赞同：4
> 
> 时间：2013-03-21T15:54:59.010
> 
> 标签：vim

在处理 C++ 代码时，我经常喜欢在编辑模式下按`Ctrl`+`N`来完成当前单词。但是，`Ctrl`+`N`开始在头文件中递归搜索。我们的代码库相当庞大，所以这样的搜索需要几秒钟才能完成。

我习惯了不同的行为，当`Ctrl`+`N`完成在打开的选项卡中使用单词并且不进行广泛的递归搜索时。如何启用此行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T15:59:24.247

此行为取决于 的值`'complete'`。阅读`:h 'complete'`完整的值列表。您可能希望`i`从默认值中删除：

```
set complete-=i 
```

# c# - 如何在正则表达式中拆分字符串

> ID：15552275
> 
> 赞同：-4
> 
> 时间：2013-03-21T15:55:01.047
> 
> 标签：c#, regex

```
string str = " some string ||^^ another string ||^^ shorter string 
```

如何使用正则表达式解析 str 与模式 ||^^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:09:26.597

要拆分这个：

```
string str = " some string ||^^ another string ||^^ shorter string"; 
```

你可以使用这个正则表达式：

```
string[] lines = Regex.Split(str, @"\|\|\^\^"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:01:52.913

```
string[] lines = Regex.Split(str, "@"\|\|\^\^"); 
```

# android - 411 需要内容长度

> ID：15552276
> 
> 赞同：4
> 
> 时间：2013-03-21T15:55:03.287
> 
> 标签：android, post, httpclient

我正在尝试使用 Android Apache HttpClient 进行 POST，但它返回错误 411 Content-Length Required。这是代码。

```
 HttpClient httpClient = new DefaultHttpClient();

            HttpPost request = new HttpPost("https://www.paypal.com/webapps/auth/protocol/openidconnect/v1/tokenservice");
            request.addHeader("Authorization","Basic "+ Base64.encodeToString((appId+":"+ appSecret).getBytes(),Base64.DEFAULT)); 

            List<NameValuePair> postParameters = new ArrayList<NameValuePair>(); 
            postParameters.add(new BasicNameValuePair("grant_type", "authorization_code"));                  
            postParameters.add(new BasicNameValuePair("code", code));                  
            postParameters.add(new BasicNameValuePair("scope", "https://uri.paypal.com/services/paypalhere"));                  

                UrlEncodedFormEntity entity;
                entity = new UrlEncodedFormEntity(postParameters);

                request.setEntity(entity);
                HttpResponse response = httpClient.execute(request);

                Log.d("HTTPStatus",response.getStatusLine().toString());

                InputStream bufferedReader =         
                        response.getEntity().getContent();   
                StringBuffer stringBuffer = new StringBuffer("");   
                byte[] line = new byte[1024];   
                while (bufferedReader.read(line) > 0) {    
                    stringBuffer.append(new String(line));    
                    }   
                bufferedReader.close();

                Log.d("str",stringBuffer.toString()); 
```

我尝试添加该行：-

```
 request.addHeader("Content-Length",Long.toString(entity.getContentLength())); 
```

但后来我得到一个 'org.apache.http.ProtocolException: Content-Length header already present' 错误。这一定意味着 HttpClient 已经在发送 Content-Length。不幸的是，我无法访问服务器端。任何想法为什么会返回这些错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:13:23.637

尝试这个，

```
HttpClient httpClient = new DefaultHttpClient();
        HttpPost request = new HttpPost("https://www.paypal.com/webapps/auth/protocol/openidconnect/v1/tokenservice");
        request.setHeader("Content-type", "application/json");
        request.setHeader("Accept", "application/json");
        request.addHeader("Authorization", "Basic " + Base64.encodeToString((appId + ":" + appSecret).getBytes(), Base64.DEFAULT));

        JSONObject obj = new JSONObject();
        obj.put("grant_type", "authorization_code");
        obj.put("code", code);
        obj.put("scope", "https://uri.paypal.com/services/paypalhere");    
        request.setEntity(new StringEntity(obj.toString(), "UTF-8"));         

        HttpResponse response = httpClient.execute(request); 
```

# flyway - 在 Flyway 中获取 SQL 输出

> ID：15552279
> 
> 赞同：0
> 
> 时间：2013-03-21T15:55:11.357
> 
> 标签：flyway

我最近一直在尝试 Flyway 框架。它非常适合我的项目，一切都非常完美。现在我明白了，我们无法从 SQL 中获取控制台输出（类似于 SQLPlus 中的 SPOOL 命令）。

有替代解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T11:12:09.753

在实现之前我会想到的唯一解决方案是为 Flyway 提供一个模拟 jdbc 驱动程序，它将语句写入磁盘而不是将它们发送到数据库。

# c++ - 对虚拟 thunk 的未定义引用

> ID：15552282
> 
> 赞同：4
> 
> 时间：2013-03-21T15:55:18.107
> 
> 标签：c++, hyperlink, qt-creator, thunk

我有一个错误说

```
undefined reference to 'virtual thunk to myClass::myFunction' 
```

对于我正在尝试创建的库。

这是我的代码：

```
myClass.cpp :
    #include "myClass.h"
    void myClass::myFunction() {}
    myClass::~myClass() {} 
```

.

```
myClass.h :
    {inclusion guards}

    #include "myClass_global.h"

    class MY_CLASSSHARED_EXPORT myClass {
        public:
            myClass();
            virtual void myFunction();
            virtual ~myClass();
    }; 
```

.

```
myClass_global.h
    {inclusion guards}

    #include <QtCore/qglobal.h>

    # if degined(MY_CLASS_LIBRARY)
    #    define MY_CLASSSHARED_EXPORT Q_DECL_EXPORT
    # else
    #    define MY_CLASS Q_DECL_IMPORT
    # endif 
```

我真的不习惯制作图书馆。我在 QtCreator 下。

我发现“虚拟 thunk”可能是一个“函数指针”，指向无法找到的东西（析构函数？）......

但是，我在互联网上没有找到任何非常清楚的东西......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-03-04T09:30:49.420

问题是 GCC 之间的配置版本不匹配。

我使用的库是用 GCC 5.4 编译的，但我使用的是 GCC 7.4。

当我使用与库相同的 GCC 来编译我的代码时，这个奇怪的链接问题就消失了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:34:20.707

我确实注意到构造函数尚未实现。这会导致问题吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-12T14:59:49.420

Maybe it will help somebody in the future.. For me the problem was caused by a declaration of a virtual function in class that derives from the base abstract class (inside .hpp file) but there was no definition of the function in .cpp file.

# c++ - boost::program_options：如何忽略未知参数？

> ID：15552284
> 
> 赞同：9
> 
> 时间：2013-03-21T15:55:21.653
> 
> 标签：c++, boost, boost-program-options

在`boost::program_options`库中，我无法理解如何允许用户通过`add_options()`.
我希望它被忽略，而不是终止程序。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-03-23T02:56:33.250

今晚我遇到了同样的问题。@TAS 的回答让我走上了正确的道路，但仍然需要 20 分钟的时间来弄清楚我的特定用例的确切语法。

要忽略未知选项，而不是这样写：

```
po::variables_map vm;
po::store(po::parse_command_line(argc, argv, desc), vm);
po::notify(vm); 
```

我写了这个：

```
po::variables_map vm;
po::store(po::command_line_parser(argc, argv).options(desc).allow_unregistered().run(), vm);
po::notify(vm); 
```

请注意，只有*中线*不同。

简而言之，使用`commandline_parser()`而不是`parse_commandline()`, 并在调用后附加一些“dangly bits”（即`.options(desc).allow_unregistered().run()`）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-21T18:22:44.273

来自 boost::program_options 文档[How To: Allowing Unknown Options](http://www.boost.org/doc/libs/1_53_0/doc/html/program_options/howto.html#idp120114352)

```
parsed_options parsed = 
    command_line_parser(argc, argv).options(desc).allow_unregistered().run(); 
```

# ruby - ruby 版本和 rvm

> ID：15552290
> 
> 赞同：0
> 
> 时间：2013-03-21T15:55:41.310
> 
> 标签：ruby, rvm

我通过 rvm 安装了 ruby​​ 1.9.3。但是如果出现错误，我会收到以下形式的消息

```
/home/railstest/vendor/bundle/ruby/1.9.1/gems/activerecord-3.1.0
/lib/active_record/base.rb:1082:in `method_missing': undefined method
`mass_assignment_sanitizer=' for ActiveRecord::Base:Class (NoMethodError) 
```

问题是：这个 1.9.1 代表什么？似乎是 ruby​​ 版本，但我的是 1.9.3。这是否意味着以某种方式调用 ruby​​ 1.9.1 而不是 1.9.3？

rvm 列出以下内容：

```
rvm list

rvm rubies

=* ruby-1.9.3-p392 [ x86_64 ]

# => - current
# =* - current && default
#  * - default 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:17:56.920

您的路径中有 1.9.1 的事实**并不**意味着您使用的是 ruby​​ 1.9.1 - 它是 Ruby 兼容版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T17:12:38.607

路径中的版本组件没有指定使用的确切 Ruby 版本，而是指定了“库兼容版本”。这表明 Ruby 版本 1.9.1、1.9.2 和 1.9.3 的库 API 足够相似，以至于它们可以（理论上）共享相同的 gem。

实际的 Ruby 版本可能与该路径组件不同。Yopu 可以通过运行检查 ruby​​ 版本

```
ruby --version 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:57:20.070

可能您没有激活该版本。

使用以下命令激活您的版本。

```
rvm use 1.9.3 
```

要将此版本设置为默认值，请运行

```
rvm use --default 1.9.3 
```

# php - 新的贝宝系统已停止使用我的代码

> ID：15552292
> 
> 赞同：5
> 
> 时间：2013-03-21T15:55:45.250
> 
> 标签：php, paypal, paypal-ipn, paypal-sandbox

我已经有大约 1 个月的时间无法从事我的项目了。现在我有一些时间重新开始。我注意到贝宝做了一些改变。

在我暂时中断这个项目之前，我能够使用 paypal api 发送付款。但是现在，当我使用相同的代码时，我收到以下消息：

> 预批准 API 调用失败。详细的错误消息：收款人所在的国家/地区无法接收付款错误代码：580022错误严重性：错误错误域：平台错误类别：应用程序

我在英国，我的 paypalplaform.php 文件根本没有改变。我唯一改变的是 api 凭证和我获得的新凭证：

```
$PROXY_HOST = '127.0.0.1';
$PROXY_PORT = '808';

$Env = "sandbox";

$API_UserName = "new-facilitator_api-email-goes-here";
$API_Password = "password-goes-here";
$API_Signature = "sig-goes-here";
// AppID is preset for sandbox use
//   If your application goes live, you will be assigned a value for the live environment by PayPal as part of the live onboarding process
$API_AppID = "APP-80W284485P519543T";
$API_Endpoint = "";

if ($Env == "sandbox") 
{
        $API_Endpoint = "https://svcs.sandbox.paypal.com/AdaptivePayments";
}
else
{
        $API_Endpoint = "https://svcs.paypal.com/AdaptivePayments";
} 
```

为什么这不再起作用？我在 apache error.log 文件中没有收到任何错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T22:19:52.550

问题在于您使用的沙盒 AppID：APP-80W284485P519543T。

我们知道这个问题，并正在努力解决它。我会在解决此问题后立即通知您。
与此同时，您应该能够恢复使用美国账户进行测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T09:42:57.330

我终于收到了来自 PayPal 的回复，看起来很有希望：

> 通过电子邮件回复 (xxxx)
> 亲爱的 xxxxx，
> 我的名字是来自商家技术服务部的 xxxxx
> 这是一个已知问题，我正在与我们的工程师密切合作，
> 对于由此造成的不便，我深表歉意。
> 
> 此致
> xxxxxx
> 商家技术支持
> PayPal，一家 eBay 公司

# c++ - 调用空类方法会影响性能吗？

> ID：15552296
> 
> 赞同：2
> 
> 时间：2013-03-21T15:55:49.667
> 
> 标签：c++, performance, visual-studio-2005

计时器.h：

```
class Timer
{
public:
void start();
void printTimeAndRestart(const char* msg);
};
namespace Timing {    static Timer timer; } 
```

计时器.cpp：

```
#ifdef DO_TIMING
//implementation
void Timer::start() { ... };
void Timer::printTimeAndRestart(const char* msg) { ... };
#else
//empty - do not do timing
void Timer::start() {};
void Timer::printTimeAndRestart(const char* /*msg*/) {};
#endif 
```

timer 将在许多不同的文件中使用，例如：

```
Timing::timer.start(); 
... 
Timing::timer.printTimeAndRestart("Operation X took :"); 
```

如果应用程序对性能非常敏感并且经常调用计时器，那么在未定义 DO_TIMING 时调用空方法会影响性能吗？什么是实现隔离计时器的更好选择（无需重新编译整个项目以打开/关闭），这在关闭时根本不会影响性能。

到目前为止，我只能想到定义宏，例如

```
#ifdef DO_TIMING 
#define START_TIMING()
Timing::timer.start(); 
#endif
#else
#define START_TIMING()
#endif 
```

并使用它们代替 Timing::timer.start(); 但这需要重新编译整个代码来打开/关闭它们......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T15:59:27.173

这取决于你如何使用它。如果它是同一个项目/解决方案并且编译器能够进行完整的程序优化，那么它可能是无关紧要的。

如果您正在分发带有二进制文件的代码并且实现不可见，并且编译器无法判断它是空的，那么由于调用会产生一些（较小的）开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:01:54.487

如果函数被定义为“内联”（即，作为声明它们所属类的头文件的一部分），那么编译器可以避免为空函数生成代码。如果函数在 .cpp 文件中，编译器必须生成代码来调用函数，因为编译器无法知道函数的作用[除非编译器支持“整个程序优化”]。

我的解决方案是将函数移动到头文件中，而不是使用宏。这是一个更简洁的解决方案，除非编译器绝对是垃圾，否则它应该将其分类为“没有生成代码”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:57:18.027

在调试版本中，这将被调用，并将具有任何函数调用的整体效果。在一般优化代码中，编译器会省略调用。

根据下面的评论。

在调用站点，编译器将无法确定被调用函数无效。如果您的宏还内联定义了空条件，那么调用站点将能够看到该函数本质上是一个 noop。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T16:00:32.030

如果您想更确定编译器将优化调用，请执行以下操作：

计时器.h：

```
class Timer
{
  public:
  void start();
  void printTimeAndRestart(const char* msg);
};

namespace Timing {    static Timer timer; }

#ifndef DO_TIMING
inline void Timer::start() {}
inline void printTimeAndRestart(const char*) {}
#endif 
```

计时器.cpp：

```
#ifdef DO_TIMING
//implementation
void Timer::start() { ... };
void Timer::printTimeAndRestart(const char* msg) { ... };
#endif 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T16:01:01.170

无论如何，高质量的编译器可能会删除它，但确保将空函数内联在 .h 文件中会更安全：

定时器.h

```
class Timer
{
public:
  void start();
  void printTimeAndRestart(const char* msg);
};

#ifndef DO_TIMING

inline void Timer::start() {}
inline void printTimeAndRestart(const char* msg) {}

#endif

namespace Timing {    static Timer timer; } 
```

定时器.cpp

```
#ifdef DO_TIMING

// ...

#endif 
```

不幸的是，这确实意味着您将依赖项绑定到标头中，这将导致在打开或关闭时重新编译。

# python - 测试前冲洗 BD。设置生菜terrain.py

> ID：15552297
> 
> 赞同：1
> 
> 时间：2013-03-21T15:55:50.757
> 
> 标签：python, django, django-south, lettuce

使用沙拉（生菜）进行测试，我按照[本教程](http://cilliano.com/blog/2011/02/07/django-bdd-with-lettuce-and-splinter/)设置了我的 terraxin.py 文件，如链接所示。我安装了南，进行了初始迁移并运行了测试，但是`flush`在执行命令后的初始设置中出现错误`migrate`，获取`DatabaseError: relation "xx_yy" already exists`. 链接中的例子可以吗？有没有更好的方法来设置 terrain.py 文件以进行正确测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T21:43:20.840

该命令`call_command('syncdb', interactive=False, verbosity=0)`运行并不简单`syncdb`，而是`syncdb --all`默认运行。这就是为什么您的所有模型都同步并且您收到此错误的原因。

作为一种解决方案，`call_command('migrate', interactive=False, verbosity=0)`如果您不需要测试迁移，则可以跳过。

# c# - 具有不同内部数据网格 ItemSource 属性的 WPF UserControls

> ID：15552298
> 
> 赞同：2
> 
> 时间：2013-03-21T15:55:55.357
> 
> 标签：c#, wpf

我有三个名为 UC 的用户控件。除了它们在布局中使用的 DataGrid 需要不同的 DynamicResource 之外，它们都是相同的。基本上 ：

```
<DataGrid ...
 ItemsSource="{DynamicResource Model1}"> <!-- I want to pass in this "Model1" string? -->

...
</DataGrid>

<DataGrid ...
 ItemsSource="{DynamicResource Model2}">

...
</DataGrid>

<DataGrid ...
 ItemsSource="{DynamicResource Model3}">

...
</DataGrid> 
```

我所有的用户控件都是在 Window 中创建的：

```
<Window ...>

<my:UC/>
<my:UC/>
<my:UC/>

</Window> 
```

截至目前，我的三个 UC 在数据网格中显示相同的数据，因为动态资源在所有三个中都是相同的，如何将值传递给每个用户控件以更改其中的动态资源？或者应该如何处理我一天前开始做WPF。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:04:42.303

在您的用户控件中创建一个依赖属性，该属性将保存该`ItemsSource`值（[DependencyProperty.Register](http://msdn.microsoft.com/en-us/library/ms597500.aspx)）。在您的控件中绑定`DataGrid`到此属性。然后在您的窗口中从动态资源中设置此属性：

```
<Window ...>
    <my:UC DataGridItemsSource="{DynamicResource Model1}" />
    <my:UC DataGridItemsSource="{DynamicResource Model2}" />
    <my:UC DataGridItemsSource="{DynamicResource Model3}" />
</Window> 
```

为了`DataGrid.ItemsSource`在您的控件中绑定，您可以使用绑定`ElementName=parentName`或绑定`RelativeSource=FindAncestor`

# ios - 如何检查呼叫（运营商）信号IOS

> ID：15552302
> 
> 赞同：0
> 
> 时间：2013-03-21T15:55:59.437
> 
> 标签：ios

我正在寻找如何测试呼叫信号（如果有电话可以拨打电话。不是互联网或蜂窝连接，只是呼叫信号）。

可能吗 ？我找到了互联网和蜂窝连接，但没有找到呼叫信号。

# opencv - OpenCV 2.4.4 和 QT5

> ID：15552307
> 
> 赞同：1
> 
> 时间：2013-03-21T15:56:09.777
> 
> 标签：opencv, qt5

新的 OpenCV 版本是支持 QT5 还是仍在使用 QT4？

我正在查看[OpenCV 更改日志](http://code.opencv.org/projects/opencv/wiki/ChangeLog)以检查代码是否与 QT5 兼容，但找不到任何信息。

有人用 QT5 编译过 OpenCV 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:08:40.477

**不**，OpenCV 2.4.4 还不支持 Qt 5。

但是，[此答案](https://stackoverflow.com/a/15268560/176769)显示了如何使用 Qt 5 构建 OpenCV 2.4.3。我相信您需要进行一些小的更改才能使其适用于 2.4.4。

# c# - iTextSharp 表格溢出换行

> ID：15552311
> 
> 赞同：0
> 
> 时间：2013-03-21T15:56:19.773
> 
> 标签：c#, itextsharp

我正在生成一个两列表。当文本太长时，它不会换行到下一个 COLUMN，而是继续到下一页。为什么当文本溢出时它不换行到同一页面上的下一列？

这就是我所说的：

![截屏](../Images/59420bb54b9a0dab84c698a511b35724.png)

```
string[] stringList = new string[] {"long string 1", "long string 2"};

Document doc = new Document(PageSize.LETTER);
Paragraph paragraph = new Paragraph();
PdfPTable table = new PdfPTable(2);
table.WidthPercentage = 100;
table.SplitLate = false;
foreach (var item in stringList) {
    paragraph.Add(item);
}

PdfPCell cell = new PdfPCell(paragraph);
cell.Colspan = 1;
table.AddCell(cell);
paragraph = new Paragraph();
doc.Add(table); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:07:24.260

iTextSharp 表格的行为方式与 HTML 或 Excel 表格的行为方式相同。“列 a”中的单元格将始终保留在该列中，它永远不会溢出到另一列中。想象一个 3 行 2 列的表格，如下所示，想象一个单元格是否可以溢出到另一列：

```
| Name   | Salary  |
-------------------
| Alice  | 5,000   |
| Bob    | 50,000, |
| 000    | Charlie |
| 10,000 
```

相反，HTML、Excel、iTextSharp 和大多数表格软件会做这样的事情：

```
| Name   | Salary  |
-------------------
| Alice  | 5,000   |
| Bob    | 50,000, |
|        | 000     |
| Charlie| 10,000  | 
```

此方法保留了表格数据的意图。Adobe InDesign 等程序确实允许您手动指定溢出，但我从未在 iTextSharp 中看到过此功能，如果它确实存在，我会感到非常惊讶。

# java - “this”是什么时候分配的内存位置，什么时候可以在java中调用一个方法

> ID：15552312
> 
> 赞同：4
> 
> 时间：2013-03-21T15:56:22.170
> 
> 标签：java

```
class A
{
    B b;
    public A()
    {
        b = new B(this);
        //initialization of class A variables
    }

    public void meth1()
    {

    }
}

class B
{
    A a;
    public B(A a)
    {
        this.a = a;
    }
} 
```

我知道这个引用不应该以这种方式传递，但是如果这样做会发生什么

其他一些类调用类 A 构造函数。“this”引用何时实际分配内存？只要在调用 super() 之前调用 A 的构造函数，它会被分配内存吗？

假设 B 类是一个线程，并且由于 B 具有 A 的引用，如果“this”引用尚未分配内存，B 可以在 A 的构造函数甚至不返回之前调用 A 上的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:03:27.000

*在执行任何构造函数**之前**为对象分配内存*。否则构造函数将没有地方写入变量的值。

因此，您*可以*将对当前对象（又名）的引用传递给`this`构造函数内的其他代码段。

正如您所指出的，当时对象还没有完全构造，*实际上这样做是一个坏主意*，但是“只是”因为对象的*值*可能处于不一致的状态。此时已为该对象分配和保留内存。

`this`只是对“当前对象”的引用，您可以将其视为任何非静态方法获取的另一个参数。事实上，这实际上是 JVM 对待它的方式。请参阅[JVMS §2.6.1 局部变量](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.6.1)：

> 在实例方法调用时，局部变量*0*始终用于传递对正在调用实例方法的对象的引用（`this`在 Java 编程语言中）。

因此，“何时`this`分配”的直接答案是有效的：每当您在对象上调用方法时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:21:02.240

this 指的是当前对象，并且任何对象都使用“new”分配内存

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T16:14:46.233

只要您不修改`A`或调用方法，`A`或者它的构造函数中的成员`B`就可以工作。（见其他答案）

如果您在未完全初始化的对象上调用方法（在构造之后），则未定义会发生什么。特别是如果您使用多个线程（请参阅内存屏障）。

有关此主题的更多信息： [链接构造函数时 JVM 的隐式内存屏障如何表现？](https://stackoverflow.com/questions/2513841/how-do-jvms-implicit-memory-barriers-behave-when-chaining-constructors)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T16:05:58.933

`this`在调用构造函数之前赋值。事实上，`super()`调用是没有必要的。它只是确保父类的创建东西已经完成，如果父类是`Object`. 此外，A 的方法在创建对象后立即可用（甚至在调用构造函数之前），因此如果 B 在构造函数中获得对 A 的引用，它可以像在构造函数中使用 A 本身一样使用 A 的方法。只要确保 A 的方法可以在 A 未完全初始化时使用，或者在初始化完成后创建并启动 B。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T16:05:40.190

内存是在 JVM 处理`new`指令时分配的。例如，如果您的代码如下所示：

```
A a = new A();
      ^
      here the memory for A is allocated 
```

`this`传递给确实可能是个问题`B`。的构造函数可以在构造函数完成之前`B`调用实例方法。您应该将行移动到构造函数的末尾以避免可能出现的问题。或者，您可以使用 setter 从外部管理对象生命周期。`A``A``A`

# android - Google Maps v2 - onclick 监听器在方向更改后没有响应

> ID：15552315
> 
> 赞同：1
> 
> 时间：2013-03-21T15:56:24.820
> 
> 标签：android, android-maps-v2

我在我的应用程序中使用 Google Maps V2，当我将方向更改为横向（或基本上更改方向）时，onMapClick 方法没有响应并且即使在方向再次更改后也不响应。我知道我可以通过设置 configChange:orientation|screenSize 来避免这个奇怪的错误，但是当方向改变时，我的对话布局不会将它们的布局从 layout-portrait 更改为 layout-landscape。这一切都在一项活动中。有没有人遇到过这个问题？地图有什么问题？我不明白问题出在哪里，为什么应该取消注册听众。我在 onCreateMethod 中注册它：@Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_main);

```
 DisplayMetrics dm = getResources().getDisplayMetrics();
    screenWidth = dm.widthPixels;
    screenHeight = dm.heightPixels;

    FontUtils.setCustomFont(this, (ViewGroup) getWindow().getDecorView());

    RelativeLayout topBar = (RelativeLayout) findViewById(R.id.topBar);
    LinearLayout placeTextLayout =    (LinearLayout)topBar
                                                  .findViewById(R.id.placeTextLayout);
    placeTextView = (TextView) placeTextLayout.findViewById(R.id.placeText);

    sharedPrefs = getSharedPreferences
                              (SkyConstants.PREFS_NAME,Context.MODE_PRIVATE);
    String place = sharedPrefs.getString
                  (SkyConstants.PREF_LOCATION_ID,SkyConstants.PREF_LOCATION_DEFAULT);

    dateTextView = (TextView) topBar.findViewById(R.id.dateText);
    daysTextView = (TextView) topBar.findViewById(R.id.timeText);

    updateTopBar();
    setUpMapIfNeeded();
}

private void setUpMapIfNeeded()
{
    if (mMap == null)
    {
        mMap = ((SupportMapFragment)getSupportFragmentManager()
                                                 .findFragmentById(R.id.map)).getMap();     
    }
    if (mMap != null)
    {
        mMap.getUiSettings().setZoomControlsEnabled(true);
        mMap.getUiSettings().setZoomGesturesEnabled(true);          
        mMap.setMapType(GoogleMap.MAP_TYPE_TERRAIN);

        mMap.setOnMapClickListener(new OnMapClickListener()
        {
            @Override
            public void onMapClick(LatLng point)
            {
            //do something  

            }

        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:36:43.277

这是由于创建了方向视图，如果您处于纵向模式，并且您更改为横向，它会再次创建视图，您需要再次设置 onClickListener。

如果您以横向模式启动活动，也会发生同样的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T11:02:23.963

在 onCreate() 方法中将 map 设置为 null 有助于我处理系统的方向更改。所以首先我设置 mMap=null 然后我设置地图。

# android - 如何使 GCM 与应用程序和服务器保持同步？

> ID：15552316
> 
> 赞同：3
> 
> 时间：2013-03-21T15:56:25.657
> 
> 标签：android, asynchronous, push-notification, google-cloud-messaging

我正在将 GCM 用于应用程序通知，如此[处所示](http://developer.android.com/google/gcm/gs.html)。代码是样板：

```
GCMRegistrar.checkDevice(this);
GCMRegistrar.checkManifest(this);

final String regId = GCMRegistrar.getRegistrationId(this);
if (regId.equals("")) {
    GCMRegistrar.register(this, SENDER_ID);
} else {
    Log.v(TAG, "Already registered");
} 
```

然后`onRegistered()`回调使用返回的注册 ID 更新我的服务器。

但是，GCM 曾多次进入不一致的状态。在一种情况下，即使`GCMRegistrar.getRegistrationId()`给了我一个非空的注册 ID 字符串，它也不会转发任何通知。在其他情况下，我最终会收到两条或更多条重复消息。

为了避免这些情况，我目前有一个像这样工作的蛮力解决方案：

```
if (GCMRegistrar.isRegistered(this))
    GCMRegistrar.unregister(this);
else
    GCMRegistrar.register(this, GCMConstants.SENDER_ID); 
```

在 onUnregistered() 回调中，我告诉我的服务器删除注册 id，然后调用`GCMRegistrar.register()`. 在`onRegistered()`回调中，我告诉我的服务器添加注册 ID。

到目前为止，它正在工作，但显然它的效率低于它应该工作的方式，而且我不确定它是否不受不一致问题的影响。如果我能指望`getRegistrationId()`总是返回一个有效的 id，即当前/规范的注册 id，那就更好了。

**确保我的应用程序、我的服务器和 GCM 之间的一致性的最简单/最干净的方法是什么？** 谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:21:51.303

如果您解析从 Google 获得的响应，并确定您在响应中收到规范注册 id 的情况，则可以解决获取重复消息的问题。在这种情况下，您可以删除旧的注册 ID，并保留规范的注册 ID。

我认为比你的蛮力解决方案更好的解决方案是`register`在应用程序启动时始终调用。您可能会收到`onRegistered()`与上次通话相同的注册 ID，但如果您在设备中保留该注册 ID，您可以将保留的 ID 与收到的 ID 进行比较，如果没有，则避免将注册 ID 重新发送到您的服务器不改变。

# sql - 为另一列的每个值添加更多列？

> ID：15552318
> 
> 赞同：1
> 
> 时间：2013-03-21T15:56:35.247
> 
> 标签：sql, sql-server-2008, pivot, unpivot

我有这种表：

```
Name   Date      Value
-----------------------
Test 1/1/2001   10
Test 2/1/2001   17
Test 3/1/2001   52
Foo  5/4/2011   15
Foo  6/4/2011   321
My   15/5/2005  36
My   25/7/2005  75 
```

我想展示这样的结果：

```
Name   Date      Value  Name   Date      Value  Name   Date      Value
---------------------------------------------------------------------
Test 1/1/2001    10      Foo  5/4/2011   15      My   15/5/2005  36
Test 2/1/2001    17      Foo  6/4/2011   321     My   25/7/2005  75
Test 3/1/2001    52 
```

我需要显示与我的名称列中存在的一样多的列

我怎么能在 Sql 中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T16:47:47.423

为了获得您想要的结果，您将不得不*取消*透视表中的列并应用*透视*函数。

unpivot可以使用函数完成，*也*`UNPIVOT`可以使用`CROSS APPLY`with `VALUES`。

**取消透视：**

```
select rn, 
  col +'_'+cast(dr as varchar(10)) col, 
  new_values
from
(
  select name, 
    convert(varchar(10), date, 101) date, 
    cast(value as varchar(10)) value,
    dense_rank() over(order by name) dr,
    row_number() over(partition by name order by date) rn
  from yourtable
) d
unpivot
(
  new_values
  for col in (name, date, value)
) un; 
```

**交叉申请：**

```
select rn, 
  col +'_'+cast(dr as varchar(10)) col, 
  c.value
from
(
  select name, 
    convert(varchar(10), date, 101) date, 
    cast(value as varchar(10)) value,
    dense_rank() over(order by name) dr,
    row_number() over(partition by name order by date) rn
  from yourtable
) d
cross apply
(
  values
    ('Name', name), ('Date', date), ('Value', Value)
) c (col, value); 
```

请参阅两个版本的[带有演示的 SQL Fiddle 。](http://www.sqlfiddle.com/#!3/fd0da/17)这给出了结果：

```
| RN |     COL | NEW_VALUES |
-----------------------------
|  1 |  name_1 |        Foo |
|  1 |  date_1 | 04/05/2011 |
|  1 | value_1 |         15 |
|  2 |  name_1 |        Foo |
|  2 |  date_1 | 04/06/2011 |
|  2 | value_1 |        321 |
|  1 |  name_2 |         My |
|  1 |  date_2 | 05/15/2005 |
|  1 | value_2 |         36 | 
```

这些查询获取您现有的列值并将它们转换为行。一旦它们在行中，您可以使用窗口函数创建新的列名[`dense_rank`](http://msdn.microsoft.com/en-us/library/ms173825.aspx)。

将数据转换为行后，您可以使用新的列名（使用`dense_rank`值创建）并应用该`PIVOT`函数。

**使用 UNPIVOT 进行 PIVOT：**

```
select name_1, date_1, value_1,
  name_2, date_2, value_2,
  name_3, date_3, value_3
from
(
  select rn, 
    col +'_'+cast(dr as varchar(10)) col, 
    new_values
  from
  (
    select name, 
      convert(varchar(10), date, 101) date, 
      cast(value as varchar(10)) value,
      dense_rank() over(order by name) dr,
      row_number() over(partition by name order by date) rn
    from yourtable
  ) d
  unpivot
  (
    new_values
    for col in (name, date, value)
  ) un
) src
pivot
(
  max(new_values)
  for col in (name_1, date_1, value_1,
              name_2, date_2, value_2,
              name_3, date_3, value_3)
) piv; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/21c9d/23)

**PIVOT 与 CROSS APPLY：**

```
select name_1, date_1, value_1,
  name_2, date_2, value_2,
  name_3, date_3, value_3
from
(
  select rn, 
    col +'_'+cast(dr as varchar(10)) col, 
    c.value
  from
  (
    select name, 
      convert(varchar(10), date, 101) date, 
      cast(value as varchar(10)) value,
      dense_rank() over(order by name) dr,
      row_number() over(partition by name order by date) rn
    from yourtable
  ) d
  cross apply
  (
    values
      ('Name', name), ('Date', date), ('Value', Value)
  ) c (col, value)
) src
pivot
(
  max(value)
  for col in (name_1, date_1, value_1,
              name_2, date_2, value_2,
              name_3, date_3, value_3)
) piv; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/fd0da/13)。

**动态枢轴：**

如果您的列数有限或已知，上述版本将非常有用，如果没有，那么您将需要使用动态 SQL：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT ',' + QUOTENAME(col +'_'+cast(dr as varchar(10)))
                    from 
                    (
                      select dense_rank() over(order by name) dr
                      from yourtable
                    ) t
                    cross apply
                    (
                      values(1, 'Name'), (2, 'Date'), (3, 'Value')
                    ) c (sort, col)
                    group by col, dr, sort
                    order by dr, sort
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT ' + @cols + ' 
              from 
             (
                select rn, 
                  col +''_''+cast(dr as varchar(10)) col, 
                  c.value
                from
                (
                  select name, 
                    convert(varchar(10), date, 101) date, 
                    cast(value as varchar(10)) value,
                    dense_rank() over(order by name) dr,
                    row_number() over(partition by name order by date) rn
                  from yourtable
                ) d
                cross apply
                (
                  values
                    (''Name'', name), (''Date'', date), (''Value'', Value)
                ) c (col, value)
            ) x
            pivot 
            (
                max(value)
                for col in (' + @cols + ')
            ) p'

execute(@query) 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/fd0da/15)。

每个查询的结果是：

```
| NAME_1 |     DATE_1 | VALUE_1 | NAME_2 |     DATE_2 | VALUE_2 | NAME_3 |     DATE_3 | VALUE_3 |
-------------------------------------------------------------------------------------------------
|    Foo | 04/05/2011 |      15 |     My | 05/15/2005 |      36 |   Test | 01/01/2001 |      10 |
|    Foo | 04/06/2011 |     321 |     My | 07/25/2005 |      75 |   Test | 01/02/2001 |      17 |
| (null) |     (null) |  (null) | (null) |     (null) |  (null) |   Test | 01/03/2001 |      52 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:33:05.783

手动或使用程序。大多数人习惯于以线性方式显示输出（默认）。如果有人要求您这样做，您可以告诉他们这不是应用程序的工作方式。您可以将结果集导出为 csv，然后将其导入 Excel 之类的文件中并手动重新格式化，或者使用 ASP.net 或 PHP 等服务器端语言将结果格式化为表格。

当您解析输出时，您可以根据当前检查最后一个 var Name。如果它们不同，则添加一列。编写脚本仍然很棘手，因为它们很可能会按顺序从数据库中出来。所以你会有一个像 test, test, test, foo, foo 这样的序列，这意味着你需要创建一个多维数组来组织数据以获得列数。然后根据该表设置表，并使用一个计数器来计算行名，然后是下面的数据。

我不确定您熟悉哪些应用程序，因此在 PHP 中，多维数组的输出看起来像这样。

```
row [1]['name']=test
row [1][test][1]['date'] = 1/1/2001 
```

不过，这更像是一种视觉输出。数据库旨在保存数据并以直观的方式返回。

# javascript - 动态构建时无法访问 JSON 对象的属性，但静态构建时可以访问

> ID：15552321
> 
> 赞同：0
> 
> 时间：2013-03-21T15:56:45.340
> 
> 标签：javascript, jquery, json

我已经在这里待了一个小时，我需要帮助。这让我有点莫名其妙。考虑我的代码中对象的这种显式设置：

**工作案例：**

* * *

```
var terms={};
            terms[0]={}; 
            terms[1]={"label":"bag","cell_src":"images/bag.jpg","clue_type":"audio","clue_src":"/audio/bus.wav"};
            terms[2]={"label":"crayon","cell_src":"images/crayon.jpg","clue_type":"audio","clue_src":"/audio/car.wav"};
            terms[3]={"label":"pen","cell_src":"images/pen.jpg","clue_type":"audio","clue_src":"/audio/car.wav"};
            terms[4]={"label":"pencil","cell_src":"images/pencil.jpg","clue_src":"/audio/boat.wav"};
            terms[5]={"label":"pencil_case","cell_src":"images/pencil_case.jpg","clue_src":"/audio/train.wav"};
            terms[6]={"label":"rubber","cell_src":"images/rubber.jpg","clue_src":"/audio/taxi.wav"};
            terms[7]={"label":"ruler","cell_src":"images/ruler.jpg","clue_src":"/audio/plane.wav"};
            terms[8]={"label":"sharpener","cell_src":"images/sharpener.jpg","clue_src":"/audio/taxi.wav"}; 
           window.terms= terms;
window.terms= terms; // for using globaly 
```

如果我做一个 console.log(window.terms[1]); 我得到“包”。这就是我想要的。

**不工作的情况**

* * *

如果不是显式定义 term{} 的值，而是从 json 文件中读取内容并将它们分配给每个枚举索引，如下所示：

```
var terms={};
terms[0]={};
$.getJSON('content.json', function(data){

  $.each(data,function(i){
    //terms[i]={"label":"bag","cell_src":"images/bag.jpg","clue_type":"audio","clue_src":"/audio/bus.wav"};
    terms[i+1]={"label":data[i].headword,"cell_src":data[i].image,"clue_type":"audio","clue_src":data[i].audio};

  });
  window.terms=terms;   
}); 
```

如果我做一个 console.log(window.terms[1]); 我收到一个错误*“Uncaught TypeError: Cannot read property '1' of undefined”*请注意，我有一个替代尝试注释掉了，我消除了我试图拉入的值出现奇怪的可能性，我明确分配所有索引都具有相同的静态值。这会产生相同的错误。

任何想法这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:58:06.947

`$.getJSON`执行 AJAX 调用时不会阻塞。您必须保持回调链处于活动状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:00:13.903

该`$.getJSON()`函数只是调用`$.ajax()`加载 JSON 文件的简写。由于 AJAX 调用是异步的，`$.getJSON()`因此在数据被加载并存储在变量中之前，执行完成，以及执行之后的任何代码。

如果您想`terms`在`success`传递给`$.getJSON()`.

如果您的代码如下所示：

```
var terms={};
terms[0]={};
$.getJSON('content.json', function(data){

  $.each(data,function(i){
    //terms[i]={"label":"bag","cell_src":"images/bag.jpg","clue_type":"audio","clue_src":"/audio/bus.wav"};
    terms[i+1]={"label":data[i].headword,"cell_src":data[i].image,"clue_type":"audio","clue_src":data[i].audio};

  });
  window.terms=terms;   
});

// use window.terms here 
```

然后它将不起作用，因为 // use window.terms here 部分在AJAX 调用完成*之前执行。*您需要将其移至单独的函数并从`success`回调中调用它：

```
function workWithTerms() {
    // use window.terms here
}

var terms={};
terms[0]={};
$.getJSON('content.json', function(data){

  $.each(data,function(i){
    //terms[i]={"label":"bag","cell_src":"images/bag.jpg","clue_type":"audio","clue_src":"/audio/bus.wav"};
    terms[i+1]={"label":data[i].headword,"cell_src":data[i].image,"clue_type":"audio","clue_src":data[i].audio};

  });
  window.terms=terms;   
  workWithTerms();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T16:05:19.623

我认为您想将术语定义为对象数组。目前，您已将其定义为具有属性 1、2、3 等的对象。类似 mean 的语法`var terms = {}`是`terms`一个对象，当您分配时，`terms[1] = {"label": "bag"}`您是在说“名为 1 的对象术语的属性是`{"label": "bag"}`. 只需将您的术语声明更改为：

```
var terms = []; 
```

此外，如果您想查看其中一个对象的标签属性，则日志语句将如下所示：

```
console.log(terms[2].label); 
```

# php - 当附加到 NSMutableURLRequest 时，NSData 是什么格式的？

> ID：15552323
> 
> 赞同：1
> 
> 时间：2013-03-21T15:56:48.610
> 
> 标签：php, ios, nsdata, nsmutableurlrequest

我正在使用`NSMutableURLRequest`将数据发送到我的 PHP 服务器。这就是我创建请求的方式：

```
NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];
NSString *boundary = @"---------------------------14737809831466499882746641449";
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
[request addValue:contentType forHTTPHeaderField:@"Content-Type"];
[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"\r\n\r\n", key] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithString:[@"whatever" objectForKey:@"message"]] dataUsingEncoding:NSUTF8StringEncoding]];  //converting strings to NSData
[body appendData:[textParams objectForKey:key]];
[body appendData:[@"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[request setHTTPBody:body]; 
```

我的问题是，服务器接收到的数据是什么格式的？IE `$_POST['message']`，那会是二进制，十六进制，base64，常规字符串吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:21:29.167

“消息”值将作为字符串传递。在您的 PHP 中，您可以执行以下操作：

```
$message = $_POST['message']; 
```

尽管您的代码有问题。每个要发布的文本值都需要以下行：

```
[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"\r\n\r\n", @"message"] dataUsingEncoding:NSUTF8StringEncoding]];
NSString *text = ... // the text value to post for "message"
[body appendData:[text dataUsingEncoding:NSUTF8StringEncoding];  //converting strings to NSData
[body appendData:[@"\r\n" dataUsingEncoding:NSUTF8StringEncoding]]; 
```

您试图调用`objectForKey:`字符串文字。你不能那样做。另外，您正在添加`textParams`. 我不知道那应该是什么，但是您发布的每个值都需要上述行。也许这些参数需要成为`text`.

# javascript - 面向对象的 Javascript 自定义 addEvent 方法

> ID：15552326
> 
> 赞同：2
> 
> 时间：2013-03-21T15:56:59.283
> 
> 标签：javascript, jquery, html, oop

我有一个关于开发面向对象的 javascript 和解析变量的问题。有关更多信息，请参阅[net.tutsplus - The Basics of Object-Oriented JavaScript 的这篇博客](http://net.tutsplus.com/tutorials/javascript-ajax/the-basics-of-object-oriented-javascript/)。

我有以下创建事件的代码：

```
$(document).ready(function() {
    tools.addEvent('.someButton', 'click', user.getUserDetails);
)};

var tools = {
    addEvent: function(to, type, fn) {
        $(to).live(type, fn);
    }
}

var user = {
    getUserDetails: function(userID) {
        console.log(userID);
    }
} 
```

如您所见，它`addEvent`使用三个变量调用该方法；要将事件附加到的 DOM 元素、事件的类型以及触发事件时要运行的函数。

我遇到的问题是将变量解析为 getUserDetails 方法，我知道 2 个选项：

1.  我显然可以在开始时有 1 行代码来检查发件人的属性。例如，`.someButton`可以有一个属性`userID="12345"`。然而，这并不理想，因为该函数是从多个不同的地方运行的——这意味着这个检查并不总是可用的（并且代码更难管理）。

2.  更好的选择可能是使用另一种方法，并使用此方法从 DOM`user.willGetUserDetails`获取属性。`userID`这可以从页面上的任何位置运行，并`getUserDetails`在获取`userID`. 每当用户详细信息来自另一个函数时，我们都会直接调用`getUserDetails`。

3.  理想的情况是，如果我可以修改上面的代码以直接传递一个变量——甚至是一个未定义的变量。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T16:02:07.393

向您的 addEvent 代码添加一个参数，该参数接受要传递给事件的数据。

```
var tools = {
    addEvent: function(to, type, data, fn) {
        if ($.isFunction(data)) {
            fn = data;
            data = {};
        }
        $(to).live(type, data, fn);
    }
} 
```

另外，我建议改用委托，或 .on 在 1.7+

```
var tools = {
    addEvent: function(to, type, data, fn) {
        if ($.isFunction(data)) {
            fn = data;
            data = {};
        }
        $(document).delegate(to, type, data, fn);
    }
} 
```

或者

```
var tools = {
    addEvent: function(to, type, data, fn) {
        if ($.isFunction(data)) {
            fn = data;
            data = {};
        }
        $(document).on(type, to, data, fn);
    }
} 
```

现在你可以像这样使用它：

```
$(document).ready(function() {
    tools.addEvent('.someButton', 'click', {userID: theuserid}, user.getUserDetails);
)};

var user = {
    getUserDetails: function(event) {
        console.log(event.data.userID);
    }
} 
```

# html - 如何让四个图像或 div 填满屏幕

> ID：15552328
> 
> 赞同：1
> 
> 时间：2013-03-21T15:57:02.940
> 
> 标签：html, css

我想在我的内容中有四个彩色块`div`。每个块应该是容器宽度的 50% 和高度的 50%：两个在顶部，两个在底部。

重新调整浏览器的大小时，它们应该随之重新调整大小。

我尝试制作四个`div`高度和宽度为 50% 的元素，并尝试放置四个高度和宽度为 50% 的图像。

后者似乎可以工作，但在保持纵横比的同时可以缩放，但我希望它们拉伸以填充内容 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:15:45.787

**编辑：**

毫无疑问，有一种更优雅的方式，但这会起作用：

```
<html><body>
<div style="position:absolute; left:0; top:0; width:50%; height:50%; background-color:blue">A</div>
<div style="position:absolute; left:50%; top:0; width:50%; height:50%; background-color:green">B</div>
<div style="position:absolute; left:0; top:50%; width:50%; height:50%; background-color:yellow">C</div>
<div style="position:absolute; left:50%; top:50%; width:50%; height:50%; background-color:red">D</div>
</body></html> 
```

**原来的：**

如果您希望图像拉伸以填充内容，则不可避免地会随着窗口大小的变化而改变纵横比。

听起来您真正想要的是让块保持相同的纵横比，但在窗口内缩放到尽可能大，必要时在底部或侧面留出额外空间。

看看[这个问题。](https://stackoverflow.com/questions/1311068/scale-a-div-to-fit-in-window-but-preserve-aspect-ratio)您可以使用所需的纵横比设置单个 div，然后在内部将其拆分为四个部分。

# regex - 使用powershell中的正则表达式隔离字符串中的可变长度数字

> ID：15552330
> 
> 赞同：0
> 
> 时间：2013-03-21T15:57:09.737
> 
> 标签：regex, powershell

我正在尝试解析字符串以在字符串中找到可变长度的数字。

这是我正在测试的一些字符串...

this_is_a_test_string25365with_a_number

this_is_another_test243with_a_number

testing_again3with_a_number

```
$Regex = "\b.*([\d]{1,}).*\b"
foreach($result in $testdata) {
    if( $result -match $Regex ) {
            $Matches[1]
    }
} 
```

当我更改 \d 后面的量词时，它只会给我那个位数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:02:49.817

如果您只想隔离数字，则不需要使用`\b`和通配符的单词边界`.*`。您只希望您的数字匹配。

您想使用`[\d]+`which 表示连续 1 个或多个数字的任何数字。

根据您的示例，请[在此处查找验证。](http://rubular.com/r/bKUFldxXR9)用于验证

但是：如果要捕获整个字符串，可以在两端保留单词边界和通配符，它​​将捕获整个字符串。 [这里的例子](http://rubular.com/r/VLN0gwKbV1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:03:48.813

那 .* 将是“贪婪的”并将所有内容都吸收到满足匹配所需的最小位数。

解决此问题的一种方法：

```
$Regex = "\b\D*([\d]{1,}).*\b" 
```

# linux - 如何使用 webdav 服务器通过 cadaver 覆盖或至少删除远程文件？

> ID：15552331
> 
> 赞同：0
> 
> 时间：2013-03-21T15:57:15.450
> 
> 标签：linux, webdav, cadaver

我正在通过 webdav 发送备份，它们每月轮换一次，所以我只想让我的上传覆盖 webdav 服务器上上个月的文件：

```
cadaver https://files.server.com/webdav/ <<EOF
cd /backups/$APPNAME
delete $DBNAME$TODAYSDATE-db.aes
delete $APPNAME$LOGDATE-log.aes
put $BACKUPPATH/$DBNAME$TODAYSDATE-db.aes
put $BACKUPPATH/$APPNAME$LOGDATE-log.aes
quit
EOF 
```

我收到删除错误：

```
Deleting `repair21-log.aes': failed:
417 Expectation Failed 
```

而对于看跌期权（它不会覆盖）：

```
Progress: [=============================>] 100.0% of 232912208 bytes failed:
417 Expectation Failed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:49:51.563

FFS 我在文件夹上设置了用户权限，因此我无法覆盖或删除！

我为我在文件夹上登录的用户授予了完全权限，现在我可以删除了！

# doctrine-orm - createQueryBuilder 和 leftJoin 是如何工作的？

> ID：15552333
> 
> 赞同：1
> 
> 时间：2013-03-21T15:57:17.227
> 
> 标签：doctrine-orm

我不知道如何使它工作。

我有：

*   `partner`包含字段的表`id`和`name`
*   `partner_address`一个包含两个字段的表：`id_partner`和`id_address`
*   `address`包含字段和引用的`id`外部键的表`id_town``town(id)`
*   `town`包含字段`id`、a`name`和的表`postal_code`

我想选择在特定城镇中的所有合作伙伴`postal_code` 此查询有效：

```
SELECT p.nom, v.nom
FROM partner p
JOIN partner_address pa
ON pa.id_partner=p.id
JOIN address a
ON pa.id_address = a.id 
JOIN town t
ON a.id_town=t.id
WHERE t.postal_code='13480'; 
```

现在我想按照[文档](http://symfony.com/doc/current/book/doctrine.html)将它“翻译”成 Doctrine 2 完整语法。

所以我制作了一个自定义存储库：

`src/Society/Bundle/MyProjectBundle/Repository/PartnerRepository.php`

在这个存储库中，我正在尝试创建相应的函数：

```
<?php

namespace HQF\Bundle\PizzasBundle\Repository;

use Doctrine\ORM\EntityRepository;

class PartenaireRepository extends EntityRepository
{
    /**
     * Get all active partners from a given postal code.
     */
    public function findAllActiveByCp($cp)
    {
        return $this->createQueryBuilder('p')
            ->where('p.dateVFin IS NULL')
            ->andWhere('p.cp=:cp')
            ->addOrderBy('p.cp', 'DESC')
            ->setParameter('cp', $cp);
    }
} 
```

注意：代码中的查询**不是正确的，**但这段代码在我制作的另一个自定义存储库中工作，所以我试图从这段代码开始。

我正在尝试这样的事情，但它不起作用：

```
public function findAllActiveByCp($cp)
{
    $qb = $this->createQueryBuilder('p');
    return $qb
        ->leftJoin('partner_address pa ON pa.id_partner=p.id')
        ->leftJoin('address a ON pa.id_address = a.id')
        ->leftJoin('town t ON a.id_ville=t.id')
        ->where('p.dateVFin IS NULL')
        ->andWhere('t.cp=:cp')
        ->addOrderBy('t.cp', 'DESC')
        ->setParameter('cp', $cp);
} 
```

我收到此错误：

> 警告：Doctrine\ORM\QueryBuilder::leftJoin() 缺少参数 2，在第 18 行的 /blabla/Repository/PartenaireRepository.php 中调用并在 /blabla/symfony/vendor/doctrine/orm/lib/Doctrine/ORM/ 中定义QueryBuilder.php 第 767 行

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T16:05:38.273

您必须仅加入所选实体具有的属性。

在`join()`or `leftJoin()`or的第一个参数中，`xxxJoin()`您传递与所选对象相关的属性名称，在第二个参数中 - 连接实体的别名。

尝试与此类似：

```
$q = $this->em()->createQueryBuilder();

$q->select(['item', 'itemContact'])
  ->from('ModuleAdmin\Entity\CustomerEntity', 'item')
  ->leftJoin('item.contacts', 'itemContact')
  ->andWhere($q->expr()->like('item.name', ':customerNameStart')); 
```

当然，字段中的`CustomerEntity`contains`OneToMany`关系`contacts`。

请记住，在 select 语句中，**您必须选择根实体**（在我的示例中`CustomerEntity`别名为`item`）。

* * *

由 Olivier Pons 编辑以添加我如何找到解决方案，并将此答案标记为有效，因为它使我走上了正确的轨道，谢谢亚当！

在文件中`PartenaireRepository.php`我已经`createQueryBuilder('p')`正确使用了。以下是如何使用以下方法连续进行两个连接`createQueryBuilder()`：

```
class PartenaireRepository extends EntityRepository
{

    /** 
     * Récupération de tous les partenaires donnés pour un
     * code postal donné.
     */
    public function findAllActiveByCp($cp)
    {   
        return $this->createQueryBuilder('p')
            ->leftJoin('p.adresses', 'a')
            ->leftJoin('a.ville', 'v')
            ->where('v.cp=:cp')
            ->setParameter('cp', $cp);
    ... blabla
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T19:14:49.310

我相信对于您正在做的事情，您需要为该`leftJoin`方法提供四个参数。

```
->leftJoin('partner_address', 'pa', 'ON', 'pa.id_partner = p.id') 
```

所以你的查询构建器链应该是这样的

```
public function findAllActiveByCp($cp)
{
    $qb = $this->createQueryBuilder('p');
    return $qb
        ->leftJoin('partner_address', 'pa', 'ON', 'pa.id_partner = p.id')
        ->leftJoin('address', 'a', 'ON', 'pa.id_address = a.id')
        ->leftJoin('town', 't', 'ON', 'a.id_ville = t.id')
        ->where('p.dateVFin IS NULL')
        ->andWhere('t.cp=:cp')
        ->addOrderBy('t.cp', 'DESC')
        ->setParameter('cp', $cp)
    ;
} 
```

# c++ - 在两个 Visual Studio C++ 项目之间扩展一个类

> ID：15552343
> 
> 赞同：0
> 
> 时间：2013-03-21T15:57:35.507
> 
> 标签：c++, visual-studio-2010, sockets, header, serversocket

请看下图

![在此处输入图像描述](../Images/6969c6df85c4c0eeaa024e337f9b198b.png)

这是套接字编程。`Server`是一个 VS 项目。`Client`是另一个VS项目。但是，它们都扩展了一个类！！！如何在 2 个 VS 应用程序之间扩展一个类？？？？请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:01:21.787

将基类放在两个项目都可见和可访问的头文件中。`#include`那些项目中的那个文件并扩展基类。

*在 Visual Studio 中，您可以[制作包含项目的解决方案](http://msdn.microsoft.com/en-us/library/b142f8e7.aspx)。*

# emacs - 如何在编辑 emacs lisp 脚本时禁用 flycheck 警告？

> ID：15552349
> 
> 赞同：18
> 
> 时间：2013-03-21T15:57:52.633
> 
> 标签：emacs, flycheck

我现在正在使用 emacs prelude，发现一切都很好。但

> 编辑el文件时显示很多flycheck警告
> 
> 语法着色被覆盖

像“第一行应该是表单包---摘要”这样的警告

> 如何关闭这些警告？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-21T19:15:11.530

这些是 Checkdoc 警告。要禁用这些，请添加`emacs-lisp-checkdoc`到 option `flycheck-disabled-checkers`，或者在您的 init 文件中使用以下代码

```
(with-eval-after-load 'flycheck
  (setq-default flycheck-disabled-checkers '(emacs-lisp-checkdoc))) 
```

或通过自定义界面使用`M-x customize-variable RET flycheck-disabled-checkers`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-06-01T14:25:59.877

如果您希望仅为该文件禁用特定的 Flycheck，您还可以使用文件局部变量定义。

您可以在文件缓冲区中通过键入以交互方式执行此操作

```
 M-x add-file-local-variable flycheck-disabled-checkers RET
  (emacs-lisp-checkdoc) 
```

这将在文件末尾添加一个局部变量部分。

```
;; Local Variables:
;; flycheck-disabled-checkers: (emacs-lisp-checkdoc)
;; End: 
```

这类似于自定义`flycheck-disabled-checkers`，但仅限于文件。

这也可以在目录级别进行自定义。[http://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Directory-Variables](http://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Directory-Variables)

# android - 是否可以在 Android 主屏幕上制作动画移动小部件？

> ID：15552354
> 
> 赞同：0
> 
> 时间：2013-03-21T15:58:06.363
> 
> 标签：android

只想在这里问一个关于android的非常基本的技术问题。好吧，我只是想像一下，如果我可以制作一种不在活动上运行的应用程序，而是运行一个服务来制作某种屏幕保护程序小部件，该小部件可以在主屏幕上动画和移动对象，可能就像吃豆子吃快捷方式一样。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:14:46.633

Looked into this a while back. There is a Mario hitting a coin example floating around that does this ([https://code.google.com/p/mario-coin-block/](https://code.google.com/p/mario-coin-block/)). However, from everything I've read it is very hacky and likely to have horrible performance/battery drain.

# php - Laravel 一对多关系

> ID：15552356
> 
> 赞同：1
> 
> 时间：2013-03-21T15:58:09.990
> 
> 标签：php, laravel, eloquent, laravel-3

我正在 Laravel 中构建一个用户具有角色的应用程序。

我已经设置了用户模型`return $this->belongs_to('Role')`和角色模型，`return $this->has_many('User')`并且用户数据库表具有列 role_id。

我的问题是阅读，以及通过用户模型更新角色。下面的代码是我一直在尝试的，但到目前为止还没有运气：

控制器

```
return View::make('admin.users.index')->with('users', User::paginate(50));
// Also tried User::with('role')->paginate(50) which doesn't help 
```

看法

```
@foreach($users->results as $user)

    {{ $user->role->role }} // Trying to get property of non-object
    {{ $user->role()->role }} // Undefined property

    {{ var_dump($user->role) }}

    // Outputs
    object(Role)#39 (5) {
        ["attributes"]=>
            array(4) {
                ["id"]=> string(1) "2"
                ["role"]=> string(4) "User"
                ["created_at"]=> string(19) "0000-00-00 00:00:00"
                ["updated_at"]=> string(19) "0000-00-00 00:00:00"
            }
        ["original"]=>
            array(4) {
                ["id"]=> string(1) "2"
                ["role"]=> string(4) "User"
                ["created_at"]=> string(19) "0000-00-00 00:00:00"
                ["updated_at"]=> string(19) "0000-00-00 00:00:00"
            }
        ["relationships"]=>
            array(0) {
            }
        ["exists"]=> bool(true)
        ["includes"]=>
            array(0) {
            }
    }

@endforeach 
```

更新是一个类似的故事 -`$user->role = Input::get('role')`也不起作用。

我显然在这里遗漏了一些东西，有人可以告诉我正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:24:04.160

看看这个：http: [//vespakoen.github.com/authority-laravel/](http://vespakoen.github.com/authority-laravel/)

它是 laravel 的 ACL 授权包。一个用户可以有 1 到 n 个角色，所以它使用`this->has_many_and_belongs_to`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T21:31:30.803

如您所见，角色返回一个数组，因此您必须像访问数组一样访问它

访问它的正确方法是

$user->角色[0]->id

# jquery - 如何在 jquery 中添加动画以切换效果并在单击时显示切换

> ID：15552357
> 
> 赞同：0
> 
> 时间：2013-03-21T15:58:10.420
> 
> 标签：jquery, html, toggle

我需要动画这个切换效果并首先隐藏段落。当用户单击 Toggle 时，它​​必须显示该段落。否则需要隐藏。此代码首先显示段落并在单击切换时将其隐藏。

这是我正在使用的代码。我从 w3schools.com 复制了它，并稍作编辑。：

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
</script>
<script>
$(document).ready(function(){
  $(".ab a").click(function(){
    $("#quick").toggle();
  });
});
</script>
</head>
<body>

<div class="ab"><a href="#">Toggle</a></div>
<div id="quick">This is a paragraph with little content.</div>
<p>This is another small paragraph.</p>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:06:42.400

这应该这样做：

```
$('#quick').hide();
$(".ab a").click(function () {
    $("#quick").toggle('slow');
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/b85LE/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:54:48.420

```
$(document).ready(function() {
$(".ab a").click(function () {
    $("#quick").toggle('slow');
});
}); 
```

那应该行得通。您是否检查过控制台 (F12) 以确保 jQuery 正在加载？

# css - 是否有 css min-top 属性

> ID：15552358
> 
> 赞同：27
> 
> 时间：2013-03-21T15:58:10.537
> 
> 标签：css

有没有像 min-height 这样的 css 属性，但是对于 top ？在下面的示例中，当我隐藏 div1（通过 javascript）时，我希望 div2 具有 top:50。否则，放置在 div1 下方。

```
<html>
<head>
<style>
#div1
{
height:100px;
}
#div2{
//min-top:50px;
}
</style>
</head>

<body>
<div id='div1'>This div may be hidden</div>
<div id='div2'>This div must not be placed above 50px</div>
</body>
</html> 
```

编辑：正如我在下面回答的

> 当 div1 未隐藏时，我希望 div2 正好低于 div1。将 div1 想象成一个可以有任何高度（甚至隐藏）的树视图，将 div2 想象成一个应该始终低于 50px 的段落

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-01-14T16:25:46.017

我想出了这个解决方案，它利用了 top:0 bottom:0 hack。

我们创建一个容器，其高度是它的相对父级（如果有） - 然后我们给它一个最小高度（例如你的最小顶部）

然后我们将实际元素绝对定位到此容器的底部。

CSS：

```
.container {
  position:absolute;
  bottom:0px;
  top: 0;
  min-height: 700px; //Adjust this to your MINIMUM (eg your min-top)
}

.position-me {
  position: absolute;
  bottom: 0;
} 
```

HTML：

```
<div class="container">
    <div class="position-me">Great!</div>
</div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T16:00:28.967

不，没有什么像`min-top`

相反，您可以使用 is

```
div {
   position: relative;
   top: 50px;
} 
```

对于您展示的示例，`visibility: hidden;`这里最适合，因为它将保留您隐藏的空间`div`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T16:50:46.163

我怀疑这会对你有用，但我相信这不是一个很好的做法：

```
#div1
{
    height:100px;
    outline: 1px solid red;
    margin-bottom:-50px;
}
#div2{
    margin-top:50px;
    outline: 1px solid blue;
} 
```

演示：http: [//jsfiddle.net/pavloschris/tbbvU/](http://jsfiddle.net/pavloschris/tbbvU/)

（只需评论/取消评论`display:none`即可看到它的工作。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-25T09:44:04.373

我看到这个问题还有很多观点，人们还在评论。由于这个问题没有完全回答，我决定在这里写下完整的答案：

**适当的CSS：**

```
#div1 {
    min-height:50px;
    background-color: #fee;
    margin-bottom:-50px;
}
#div2 {
    margin-top:50px;
    background-color: #efe
} 
```

[http://jsfiddle.net/vVsAn/5051/](http://jsfiddle.net/vVsAn/5051/)

**结果**

*   当 div1 被隐藏时，div2 的 top 属性为 50px
*   当 div1 未隐藏时：
    *   如果 div1 高度小于 50px，则 div2 放置在 50px
    *   如果 div1 的高度大于 50px，那么 div2 就放在 div1 的正下方

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-15T14:55:19.223

```
$(window).on("resize", function () {
    if ($('#div1').css('display', 'none')){
    	$("#div2").addClass('minTop');
	} else if ($('#div1').css('display', 'block')){
		  $("#div2").removeClass('minTop');
	}
}).resize();
```

```
#div1{
width:100px;
height:100px;
background-color:#ff0000;
position:absolute;
display:block;
/* display:none; */
}
#div2{
width:100px;
background-color:#ffff00;
top:150px;
position:absolute;
}
#div2.minTop{
  top:50px !important;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<html>
<head>
</head>

<body>
<div id='div1'>div 1</div>
<div id='div2'>div 2</div>
</body>
</html>
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-29T10:05:14.613

“有 css min-top 属性吗？” 不是，但 ...

...您可以使用数学函数像 min-top 一样生效：

```
<style> 
  #div2{
    top:max(50px, 10%);
  }
</style> 
```

[https://developer.mozilla.org/en-US/docs/Web/CSS/max](https://developer.mozilla.org/en-US/docs/Web/CSS/max)

# excel - 如何在 Excel VBA 中捕获多页控件的页面退出事件

> ID：15552360
> 
> 赞同：2
> 
> 时间：2013-03-21T15:58:23.997
> 
> 标签：excel, vba

我在用户窗体上有一个多页控件。当用户导航到新页面时，我希望将当前页面上的数据保存到数据库中。用户可以通过各种方式在页面之间导航，我不想为所有页面编写程序。在选择新页面之前，我可以使用一个事件来引用活动页面吗？

我查看了多页控件的 Change 事件，但如果您在其中引用 multipage.selecteditem，它指的是新页面。我需要的是一个 BeforeChange 事件，但没有。

我还查看了 multipage.exit 事件，但它会在整个多页控件退出时触发，而不仅仅是一个页面。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T17:02:58.503

使用`MultiPage1_Change`事件。

如果您为 Multipage 分配了一个名称，那么您可以将子例程从`MultiPage1_Change`（默认）更改为`YourMultiPageName_Change`.

例如，我有一个叫做“MultiPageBannerFilter”。我使用这个子例程执行一些代码来捕获这个对象的 _Change 事件。

```
Private Sub MultiPageBannerFilter_Change()

MsgBox "You have changed pages!", vbInformation

End Sub 
```

只需将您的代码保存到数据库而不是消息框，并确保正确命名事件子例程并且这应该可以工作。

**修订**

```
Public previousPage As String

Sub UserForm_Activate()
    previousPage = MultiPage1.SelectedItem.Name

End Sub

Private Sub MultiPage1_Change()

Dim currentPage As String
currentPage = MultiPage1.SelectedItem.Name

If Not currentPage = previousPage Then
    previousPage = currentPage
    '
    '
    MsgBox "Your Code Goes Here!", vbInformation
    '
    '
End If

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-11T14:05:40.840

我遇到了类似的挑战，并提出了以下代码。您必须跟踪您所在的页面并使用 Click 事件。因此，将 Multipage 设置为 Initialize 子中的 Page，并将 intPrevPage 设置为相应的数字。

```
Private Sub MultiPage1_Click(ByVal Index As Long)
    Select Case True
' If the click doesn't change the Page, then do nothing
        Case intPrevPage = MultiPage1.Value
' ValidForm is a function that validates data on previous
' Page if click changed the Page
        Case ValidForm
' If TRUE then capture current Page
            intPrevPage = MultiPage1.Value
            Call FormatPage
' If FALSE then return to previous Page
        Case Else
            MultiPage1.Value = intPrevPage
    End Select
End Sub 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-12-30T05:33:31.470

MultiPage1_Change 事件只会在有页面时触发。因此，无需检测更改并使用公共变量“previousPage”

Private Sub MultiPage1_Change() Dim currentPage As String currentPage = MultiPage1.SelectedItem.Name MsgBox currentPage & "Selected!", vbInformation End Sub

# sql - PLSQL 或 SSRS，如何选择在一个组中包含所有值？

> ID：15552361
> 
> 赞同：3
> 
> 时间：2013-03-21T15:58:26.137
> 
> 标签：sql, oracle, reporting-services, plsql, ssrs-2008

我有一张这样的桌子。

```
ID NAME VALUE
______________
1   A    X
2   A    Y
3   A    Z
4   B    X
5   B    Y
6   C    X
7   C    Z
8   D    Z
9   E    X 
```

和查询：

```
SELECT * FROM TABLE1 T WHERE T.VALUE IN (X,Z) 
```

这个查询给了我

```
ID NAME VALUE
______________
1   A    X
3   A    Z
4   B    X
6   C    X
7   C    Z
8   D    Z
9   E    X 
```

但我想查看具有所有参数的名称的所有值。**因此，只有 A 和 C 同时具有 X 和 Z 值，而我想要的结果是：**

```
ID NAME VALUE
______________
1   A    X
2   A    Y
3   A    Z
6   C    X
7   C    Z 
```

我怎样才能得到想要的结果？无论是使用 sql 还是使用报告服务。也许“GROUP BY ..... HAVING”子句会有所帮助，但我不确定。

顺便说一句，我不知道列表中有多少参数。

我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T16:04:28.127

标准方法类似于

```
SELECT id, name, value
  FROM table1 a
 WHERE name IN (SELECT name
                  FROM table1 b
                 WHERE b.value in (x,y)
                 GROUP BY name
                HAVING COUNT(distinct value) = 2) 
```

这将要求您确定列表中有多少个值，以便`HAVING`如果有 2 个元素，则可以在子句中使用 2，如果有 5 个元素，则可以使用 5，等等。您还可以使用分析函数

```
SELECT id, name, value
  FROM (SELECT id,
               name,
               value,
               count(distinct value) over (partition by name) cnt
          FROM table1 t1
         WHERE t1.value in (x,y))
 WHERE cnt = 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T17:31:39.573

我更喜欢将这些“集合内的集合”查询构造为一个聚合。我发现这是最灵活的方法：

```
select t.*
from t
where t.name in (select name
                 from t
                 group by name
                 having sum(case when value = 'X' then 1 else 0 end) > 0 and
                        sum9case when value = 'Y' then 1 else 0 end) > 0
                ) 
```

的子查询`in`查找至少具有一个 X 值和一个 Y 值的所有名称。使用相同的逻辑，很容易针对其他条件进行调整（X 和 Y 和 Z，；X 和 Y 但不是 Z 等）。外部查询只返回所有行而不是名称。

# asp.net - 查看开发中的状态错误，而不是生产中的错误

> ID：15552364
> 
> 赞同：1
> 
> 时间：2013-03-21T15:58:32.297
> 
> 标签：asp.net, iis

我有两个或多或少相同的网站，都在同一台服务器上运行，但在不同的应用程序池下。应用程序池都配置为使用“网络服务”凭据运行。

在一个网站上——称之为开发副本，我收到臭名昭著的“视图状态 MAC 验证失败”错误。当页面空闲 20 分钟后发生回发时，就会发生这种情况。我被告知这是因为我没有在 web.config 或机器配置文件中指定机器密钥。手动回收应用程序池会按预期重现错误。所以我的问题不是关于如何停止这个问题，而是我想知道**为什么**错误发生在开发而不是生产中。两个站点设置之间的唯一区别是身份验证方法。

在 IIS 配置的“基本设置”部分，站点的开发版本设置为使用服务帐户连接，而生产版本使用“应用程序用户”（通过身份验证）。在身份验证设置下，两个页面都配置了模拟和 Windows 身份验证。

这是我能看到的唯一区别。我对 IIS 如何在站点和应用程序池级别处理身份验证的知识相当有限。是否有特定原因为什么一个设置应该导致机器密钥被刷新而另一个没有？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:41:47.783

安装 .NET 3.5 SP1 后，在 ASP.NET 页面上进行回发时，您可能会收到 Validation of viewstate MAC failed exceptions。

# sqlite - sqlite 不会使用索引进行查询

> ID：15552365
> 
> 赞同：1
> 
> 时间：2013-03-21T15:58:34.240
> 
> 标签：sqlite, indexing

我在我的数据库上使用这个查询

```
SELECT
      DISTINCT wb_expr_pattern2gene.gene
    FROM
      wb_expr_pattern2gene
    , wb_expr_pattern2anatomy_term
    , wb_anatomy_term2ancestor
    , wb_anatomy_term2cell
    WHERE
        wb_anatomy_term2cell.cell = 'P0'
    AND (
           wb_anatomy_term2cell.anatomy_term = wb_expr_pattern2anatomy_term.anatomy_term
        OR (
                wb_anatomy_term2cell.anatomy_term = wb_anatomy_term2ancestor.anatomy_term
            AND wb_anatomy_term2ancestor.ancestor_term = wb_expr_pattern2anatomy_term.anatomy_term
           )
        )
    AND wb_expr_pattern2anatomy_term.expr_pattern = wb_expr_pattern2gene.expr_pattern
; 
```

这需要很长时间。原因是 sqlite 不会在`wb_anatomy_term2ancestor`表上使用索引

```
0|0|3|SEARCH TABLE wb_anatomy_term2cell USING INDEX wb_anatomy_term2cell__cell (cell=?) (~10 rows)
0|1|2|SCAN TABLE wb_anatomy_term2ancestor (~1000000 rows)
0|2|1|SEARCH TABLE wb_expr_pattern2anatomy_term USING INDEX wb_expr_pattern2anatomy_term__anatomy_term (anatomy_term=?) (~10 rows)
0|2|1|SEARCH TABLE wb_expr_pattern2anatomy_term USING INDEX wb_expr_pattern2anatomy_term__anatomy_term (anatomy_term=?) (~10 rows)
0|3|0|SEARCH TABLE wb_expr_pattern2gene USING INDEX wb_expr_pattern2gene__expr_pattern (expr_pattern=?) (~10 rows)
0|0|0|USE TEMP B-TREE FOR DISTINCT 
```

尽管它们存在

```
CREATE INDEX wb_anatomy_term2ancestor__anatomy_term__ancestor_term ON wb_anatomy_term2ancestor(anatomy_term, ancestor_term);
CREATE INDEX wb_anatomy_term2ancestor__anatomy_term ON wb_anatomy_term2ancestor(anatomy_term);
CREATE INDEX wb_anatomy_term2ancestor__ancestor_term ON wb_anatomy_term2ancestor(ancestor_term); 
```

sqlite 有这种行为的充分理由吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T07:33:16.773

这个查询很快（但为什么？）

```
EXPLAIN QUERY PLAN SELECT
      wb_expr_pattern2gene.gene
    FROM
        wb_expr_pattern2gene
      , wb_expr_pattern2anatomy_term
    WHERE
    ((   
        wb_expr_pattern2anatomy_term.anatomy_term IN ( SELECT
          wb_anatomy_term2cell.anatomy_term
        FROM
          wb_anatomy_term2cell
        WHERE 
                wb_anatomy_term2cell.cell = 'P0'
        )
    )
    OR wb_expr_pattern2anatomy_term.anatomy_term IN ( SELECT
          wb_anatomy_term2ancestor.ancestor_term
        FROM
            wb_anatomy_term2ancestor
          , wb_anatomy_term2cell
        WHERE 
                wb_anatomy_term2cell.cell = 'P0'
            AND wb_anatomy_term2ancestor.anatomy_term = wb_anatomy_term2cell.anatomy_term
            AND wb_anatomy_term2cell.anatomy_term = wb_anatomy_term2ancestor.anatomy_term
       )
    )
    AND wb_expr_pattern2anatomy_term.expr_pattern = wb_expr_pattern2gene.expr_pattern
;

0|0|0|EXECUTE LIST SUBQUERY 1
1|0|0|SEARCH TABLE wb_anatomy_term2cell USING INDEX wb_anatomy_term2cell__cell (cell=?) (~10 rows)
0|0|1|SEARCH TABLE wb_expr_pattern2anatomy_term USING INDEX wb_expr_pattern2anatomy_term__anatomy_term (anatomy_term=?) (~250 rows)
0|0|0|EXECUTE LIST SUBQUERY 2
2|0|1|SEARCH TABLE wb_anatomy_term2cell USING INDEX wb_anatomy_term2cell__cell (cell=?) (~10 rows)
2|1|0|SEARCH TABLE wb_anatomy_term2ancestor USING COVERING INDEX wb_anatomy_term2ancestor__anatomy_term__ancestor_term (anatomy_term=?) (~2 rows)
0|0|1|SEARCH TABLE wb_expr_pattern2anatomy_term USING INDEX wb_expr_pattern2anatomy_term__anatomy_term (anatomy_term=?) (~250 rows)
0|0|0|EXECUTE LIST SUBQUERY 3
3|0|0|SEARCH TABLE wb_anatomy_term2cell USING INDEX wb_anatomy_term2cell__cell (cell=?) (~10 rows)
0|0|0|EXECUTE LIST SUBQUERY 4
4|0|1|SEARCH TABLE wb_anatomy_term2cell USING INDEX wb_anatomy_term2cell__cell (cell=?) (~10 rows)
4|1|0|SEARCH TABLE wb_anatomy_term2ancestor USING COVERING INDEX wb_anatomy_term2ancestor__anatomy_term__ancestor_term (anatomy_term=?) (~2 rows)
0|1|0|SEARCH TABLE wb_expr_pattern2gene USING INDEX wb_expr_pattern2gene__expr_pattern (expr_pattern=?) (~10 rows) 
```

# php - Javascript 确认 & while 循环回显

> ID：15552368
> 
> 赞同：1
> 
> 时间：2013-03-21T15:58:42.070
> 
> 标签：php, javascript, while-loop, confirm

我有一个小问题，我使用 PHP while 循环创建了一个删除按钮，如下所示：

```
while($something = mysql_fetch_array($sql_something)){

    $id = $something['id']
    echo '<a href="somewhere.php?id='.$id.'"><button onclick="delconfirm()">Delete</button></a>

} 
```

这个回声是一些内容的删除按钮。但是我需要用户确认首先删除，这就是`onclick="delconfirm()"`进来的地方。

我的确认看起来像这样：

```
function delconfirm()
{
    var r=confirm("Are you sure you want to delete this content?");

    if (r==true){

        // ...do nothing i guess? it needs to redirect using the PHP echo'd link...

    }
    else{

        window.location = "edit.php";

    }
} 
```

但是，无论您按取消还是确定，它都会将其删除。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T16:02:39.423

将其更改为：

```
while($something = mysql_fetch_array($sql_something)){

    $id = $something['id']
    echo '<a href="somewhere.php?id='.$id.'"><button onclick="return delconfirm();">Delete</button></a>

} 
```

然后你的功能：

```
function delconfirm()
{
    return confirm("Are you sure you want to delete this content?");
} 
```

**编辑**：如果你想要一个更**[不显眼](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)**的解决方案：

```
while($something = mysql_fetch_array($sql_something)){

    $id = $something['id']
    echo '<input type="button" value="Delete" data-id="$id" />';

} 
```

然后是一些 javascript 来绑定事件：

```
function bindButtons() {
    var buttons = document.getElementsByTagName("input");
    for (var i = 0; i < buttons.length; i++) {
        if (buttons[i].type == "button") {
            buttons[i].onclick = function () {
                location.href='somewhere.php?id=' + this.getAttribute("data-id");
            }
        }
    }
} 
```

并将其绑定到`window.onload`，根据 Ian 的建议：

```
window.onload = bindButtons; 
```

**注意**：如果您使用的是 jQuery，这个解决方案会更简单、更优雅。

[工作的jsFiddle](http://jsfiddle.net/3tHXv/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T16:04:35.363

如果用户按下取消，那么您需要阻止事件执行它通常会执行的操作。试试这个，例如：

```
function delconfirm(e) {
    e = e || window.event;

    if (!confirm("Are you sure you want to delete this content?")) {
        e.preventDefault();

        // This will prevent the event from bubbling up to the <a>.
        e.stopPropagation();

        return false; // For the ancient/crappy browsers still out there.
    }

    return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T16:02:42.263

您需要停止/删除当前的点击事件。执行您的代码后，事件会到达锚点并触发点击。使用 MooTools 只需添加 'new Event().stop();'。我认为 jQuery 也有类似的东西。

编辑：Hanlet Escaño 是对的。可以返回true（浏览器会重定向到href中的URL，或者false让浏览器什么都不做）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T16:02:59.787

为了防止 HTML 链接正常工作，您必须在 js 函数或 event.preventDefault() 中返回 false，其中 event 是传递给 click 事件函数的参数

在 a 元素上而不是 a 标签内的元素上放置点击事件时，我做得很薄。但它可能会奏效。

# vba - 宏更改“页面设置”不起作用

> ID：15552369
> 
> 赞同：0
> 
> 时间：2013-03-21T15:58:49.840
> 
> 标签：vba, excel, excel-2007

我有一个简单的宏，它被记录来格式化一些单元格并设置一些页面格式（页边距页脚页眉等。）宏运行没有错误，它格式化单元格很好，但不保存/更改任何页面设置选项。在我运行它之后，如果我检查页面设置，一切仍然是默认的。下面是页面设置部分。我已经在多个文件/工作簿上尝试过这个，无论如何它似乎都没有保存更改。有任何想法吗？

谢谢

```
ActiveSheet.PageSetup.PrintArea = ""
With ActiveSheet.PageSetup
    .LeftHeader = ""
    .CenterHeader = "&F"
    .RightHeader = ""
    .LeftFooter = ""
    .CenterFooter = "Page &P of &N"
    .RightFooter = ""
    .LeftMargin = Application.InchesToPoints(0.25)
    .RightMargin = Application.InchesToPoints(0.25)
    .TopMargin = Application.InchesToPoints(0.5)
    .BottomMargin = Application.InchesToPoints(0.5)
    .HeaderMargin = Application.InchesToPoints(0.25)
    .FooterMargin = Application.InchesToPoints(0.25)
    .PrintGridlines = True
    .Orientation = xlLandscape
    .FirstPageNumber = xlAutomatic
    .FitToPagesWide = 1
End With 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-18T04:57:32.170

我遇到了同样的问题，后来经过一些研究，找到了下面的解决方案。

*“如果未安装打印机，则无法在 Excel 中使用页面设置属性”*

[http://support.microsoft.com/kb/291298](http://support.microsoft.com/kb/291298)

我希望这有帮助。谢谢。

# node.js - git push 上的 Heroku“错误：生成 ENOENT”错误

> ID：15552374
> 
> 赞同：0
> 
> 时间：2013-03-21T15:59:03.067
> 
> 标签：node.js, heroku, npm

`git push`产量：

*日志*

```
[snip]

   mongodb@1.2.14 node_modules/mongodb
   └── bson@0.1.8
   npm ERR! Error: spawn ENOENT
   npm ERR!     at errnoException (child_process.js:945:11)
   npm ERR!     at Process.ChildProcess._handle.onexit (child_process.js:736:34)
   npm ERR! If you need help, you may report this log at:
   npm ERR!     <http://github.com/isaacs/npm/issues>
   npm ERR! or email it to:
   npm ERR!     <npm-@googlegroups.com>

   npm ERR! System Linux 2.6.32-350-ec2
   npm ERR! command "/tmp/node-node-HW9B/bin/node" "/tmp/node-npm-bxOq/cli.js" "rebuild"
   npm ERR! cwd /tmp/build_20l204f433b3o
   npm ERR! node -v v0.10.0
   npm ERR! npm -v 1.2.12
   npm ERR! syscall spawn
   npm ERR! code ENOENT
   npm ERR! errno ENOENT
   npm ERR! 
   npm ERR! Additional logging details can be found in:
   npm ERR!     /tmp/build_20l204f433b3o/npm-debug.log
   npm ERR! not ok code 0
! Failed to rebuild dependencies with npm
! Heroku push rejected, failed to compile Node.js app 
```

在我的机器上本地编译工作正常。

*包.json*

```
{
  "name":        "hosted-hubot",
  "version":     "2.4.8",
  "author":      "GitHub Inc.",
  "keywords":    "github hubot campfire bot",
  "description": "A simple helpful Robot for your Company",
  "licenses":     [{
    "type":       "MIT",
    "url":        "http://github.com/github/hubot/raw/master/LICENSE"
  }],

  "repository" : {
    "type": "git",
    "url":  "https://github.com/github/hubot.git"
  },

  "dependencies": {
    "hubot-hipchat": ">=2.4.5",
    "hubot":         ">=2.4.8",
    "optparse":      "1.0.3",
    "mongodb":       "*",
    "githubot":      "0.2.0",
    "date-utils":    ">=1.2.5",
    "underscore":    ">=1.3.3",
    "underscore.string": ">=2.1.1"
  },

  "engines": {
    "node": ">= 0.10.x",
    "npm":  ">=1.1.x"
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:00:40.273

删除`node_modules`是`.gitignore`我的临时修复。

# javascript - 使用 jQuery 从跨域 Ajax 请求接收 XML 响应

> ID：15552375
> 
> 赞同：10
> 
> 时间：2013-03-21T15:59:02.687
> 
> 标签：javascript, jquery, xml, jsonp, amazon-sqs

我试图向另一个域发出 ajax 请求，它已经工作了，但现在我遇到了另一个问题......

这是我的代码：

```
function getChannelMessages(channel) {
    jQuery.support.cors = true;
    $.ajax(channel, {
        cache : true,
        type : "get",
        data : _channels[channel].request,
        global : false,
        dataType : "jsonp text xml",
        jsonp : false,
        success : function jsonpCallback (response) {
            console.log(response);
            updateChannelRequest(channel);
            //getChannelMessages(channel);
        }
    });
} 
```

正如我所说，它已经工作了，但问题是服务器返回一个 XML（不是我的服务器，是另一家公司的另一台服务器 - 一个 Web 服务 - 所以我无法更改它返回的内容）并且 jsonp 期望它是一个 json失败并出现错误：

```
SyntaxError: syntax error
<?xml version="1.0"?><ReceiveMessageResponse xmlns="http://q ... /> 
```

根据 jQuery 文档，添加`jsonp text xml`应该很神奇，将响应转换为简单文本，然后将其解析为 XML，但它不起作用。

我已经能够使用 YQL 实现它，但它的限制为每小时 10,000 个请求，而我正在开发的系统每小时将有多达 1000 万个请求。出于同样的原因，我不能在我自己的服务器中“代理”这些请求......

仅供参考：我正在尝试从 SQS 获取最新消息，所以如果无论如何告诉它以 json 格式返回数据，它会更容易更好，但我在文档中也没有找到任何东西......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T16:41:18.790

我的问题的简单答案是：只有两种方法可以做到这一点：

1.  使用代理。我不会把所有的方法都放在这里，但你可以在网上找到很多信息，搜索“cors”、“cross domain ajax requests”和“yql”（最后一个是 Yahoo 的代理）

2.  使用 CORS。这就是[跨域资源共享](http://enable-cors.org/)。即：激活您要从中获取信息的服务器，以将信息发送到任何其他域并回答来自任何其他域的请求。为此，您必须是管理服务器/服务的人。

这两种是从另一个域获取信息 XML（或任何其他格式）的唯一方法。进行 json 跨域请求：

*   使用 jsonp（Json 填充）。我不会解释这一点（实际上只是额外的信息，因为如果来自服务器的答案是 XML，它将不起作用 - 我的主要问题），因为网络上[有](http://en.wikipedia.org/wiki/JSONP) [很多](http://ajaxian.com/archives/jsonp-json-with-padding) [信息](http://json-p.org/)。

不幸的是，我无法实现我的目标，因为 SQS 没有配置为任何这些方法......不过，我对跨域请求的工作原理有很多了解。我希望这对任何人都有帮助......

# php - 执行 php 显示 mib 文件丢失

> ID：15552380
> 
> 赞同：0
> 
> 时间：2013-03-21T15:59:26.063
> 
> 标签：php, apache

每次我执行 PHP 脚本时，我的 apache 错误日志都会被这些错误消息淹没：

```
[Thu Mar 21 20:17:54 2013] [error] [client 127.0.0.1] No log handling enabled - turning on stderr logging, referer: http://localhost/login.html
[Thu Mar 21 20:17:54 2013] [error] [client 127.0.0.1] Cannot find module (IP-MIB): At line 0 in (none), referer: http://localhost/login.html
[Thu Mar 21 20:17:54 2013] [error] [client 127.0.0.1] Cannot find module (IF-MIB): At line 0 in (none), referer: http://localhost/login.html
[Thu Mar 21 20:17:54 2013] [error] [client 127.0.0.1] Cannot find module (TCP-MIB): At line 0 in (none), referer: http://localhost/login.html
[Thu Mar 21 20:17:54 2013] [error] [client 127.0.0.1] Cannot find module (UDP-MIB): At line 0 in (none), referer: http://localhost/login.html
[Thu Mar 21 20:17:54 2013] [error] [client 127.0.0.1] Cannot find module (HOST-RESOURCES-MIB): At line 0 in (none), referer: http://localhost/login.html
[Thu Mar 21 20:17:54 2013] [error] [client 127.0.0.1] Cannot find module (SNMPv2-MIB): At line 0 in (none), referer: http://localhost/login.html
[Thu Mar 21 20:17:54 2013] [error] [client 127.0.0.1] Cannot find module (SNMPv2-SMI): At line 0 in (none), referer: http://localhost/login.html
[Thu Mar 21 20:17:54 2013] [error] [client 127.0.0.1] Cannot find module (NOTIFICATION-LOG-MIB): At line 0 in (none), referer: http://localhost/login.html
[Thu Mar 21 20:17:54 2013] [error] [client 127.0.0.1] Cannot find module (UCD-SNMP-MIB): At line 0 in (none), referer: http://localhost/login.html
[Thu Mar 21 20:17:54 2013] [error] [client 127.0.0.1] Cannot find module (UCD-DEMO-MIB): At line 0 in (none), referer: http://localhost/login.html
[Thu Mar 21 20:17:54 2013] [error] [client 127.0.0.1] Cannot find module (SNMP-TARGET-MIB): At line 0 in (none), referer: http://localhost/login.html
[Thu Mar 21 20:17:54 2013] [error] [client 127.0.0.1] Cannot find module (NET-SNMP-AGENT-MIB): At line 0 in (none), referer: http://localhost/login.html
[Thu Mar 21 20:17:54 2013] [error] [client 127.0.0.1] Cannot find module (DISMAN-EVENT-MIB): At line 0 in (none), referer: http://localhost/login.html
[Thu Mar 21 20:17:54 2013] [error] [client 127.0.0.1] Cannot find module (SNMP-VIEW-BASED-ACM-MIB): At line 0 in (none), referer: http://localhost/login.html
[Thu Mar 21 20:17:54 2013] [error] [client 127.0.0.1] Cannot find module (SNMP-COMMUNITY-MIB): At line 0 in (none), referer: http://localhost/login.html
[Thu Mar 21 20:17:54 2013] [error] [client 127.0.0.1] Cannot find module (UCD-DLMOD-MIB): At line 0 in (none), referer: http://localhost/login.html
[Thu Mar 21 20:17:54 2013] [error] [client 127.0.0.1] Cannot find module (SNMP-FRAMEWORK-MIB): At line 0 in (none), referer: http://localhost/login.html
[Thu Mar 21 20:17:54 2013] [error] [client 127.0.0.1] Cannot find module (SNMP-MPD-MIB): At line 0 in (none), referer: http://localhost/login.html
[Thu Mar 21 20:17:54 2013] [error] [client 127.0.0.1] Cannot find module (SNMP-USER-BASED-SM-MIB): At line 0 in (none), referer: http://localhost/login.html
[Thu Mar 21 20:17:54 2013] [error] [client 127.0.0.1] Cannot find module (SNMP-NOTIFICATION-MIB): At line 0 in (none), referer: http://localhost/login.html
[Thu Mar 21 20:17:54 2013] [error] [client 127.0.0.1] Cannot find module (SNMPv2-TM): At line 0 in (none), referer: http://localhost/login.html 
```

现在我已经阅读了很多帖子，其中提到我需要从 ext（或 extras）文件夹中复制 MIB 文件，然后创建一个环境变量 MIBDIR 以指向该文件夹。我的问题是这些 *.MIB 文件在我的机器上的任何地方都不存在......我到底如何摆脱这些错误？

# c# - MS CHESS 已经过时了？

> ID：15552384
> 
> 赞同：5
> 
> 时间：2013-03-21T15:59:34.957
> 
> 标签：c#, multithreading, thread-safety

我有一个类，它适用于字符串字典。一种方法是初始化字典，另一种方法是向字典中添加新对，第三种方法是将字典连接成字符串。

我想通过在不同线程中同时运行 init-adding-adding- ** -adding-finalizing 方法来对其线程安全进行单元测试。*在使用之前创建类的新实例，字典不是静态的。所以我想确定它是否安全。

Afaik，在单元测试中测试线程并不是一个好主意。相反，我找到了一个 CHESS，它的设计目的完全相同：[http ://blog.decarufel.net/2009/05/how-to-test-your-multi-threaded-code.html](http://blog.decarufel.net/2009/05/how-to-test-your-multi-threaded-code.html)

然而，看起来它已经过时了。在这个领域有任何现代的替代方案/建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:08:13.870

作为替代方案，您可以看看使用[ConcurrentDictionary](http://msdn.microsoft.com/en-us/library/dd287191.aspx)类型，它可以抽象出这些特定的多线程问题。

但是，如果您想继续使用自己的机制（或者如果您想对如何测试多线程代码的问题有一个一般性的答案），那么从[这篇文章](https://stackoverflow.com/questions/9260855/using-microsoft-chess-in-visual-studio-2010)中可以看出 CHESS 绝不过时。据我所知，自该工具首次发布以来，底层技术 - 多线程 - 根本没有改变，因此除非您在使用它时遇到特定问题，否则继续进行是完全合理的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T16:09:47.493

该项目的最后一次签到是在 2012 年 10 月。我不会说它已经过时了。

[http://chesstool.codeplex.com/SourceControl/list/changesets](http://chesstool.codeplex.com/SourceControl/list/changesets)

# php - 在 PHP 中从远程 URL 读取 JSON

> ID：15552385
> 
> 赞同：10
> 
> 时间：2013-03-21T15:59:37.290
> 
> 标签：php, json

我有这个 JSON 文件：

[http://www.jeewanaryal.com/angryQuiz/eighties/json/eighties.json](http://www.jeewanaryal.com/angryQuiz/eighties/json/eighties.json)

我正在尝试在 PHP 中对其进行解码，如下所示：

```
$json = file_get_contents('http://www.jeewanaryal.com/angryQuiz/eighties/json/eighties.json'); 
$data = json_decode($json);
var_dump($data); 
```

但是，我得到的输出是 NULL。我错过了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T16:16:21.987

使用[PHP.NET json_last_error()](http://www.php.net/manual/en/function.json-last-error.php)中的示例我发现您的 json 语法不正确：

```
switch (json_last_error()) {
        case JSON_ERROR_NONE:
            echo ' - No errors';
        break;
        case JSON_ERROR_DEPTH:
            echo ' - Maximum stack depth exceeded';
        break;
        case JSON_ERROR_STATE_MISMATCH:
            echo ' - Underflow or the modes mismatch';
        break;
        case JSON_ERROR_CTRL_CHAR:
            echo ' - Unexpected control character found';
        break;
        case JSON_ERROR_SYNTAX:
            echo ' - Syntax error, malformed JSON';
        break;
        case JSON_ERROR_UTF8:
            echo ' - Malformed UTF-8 characters, possibly incorrectly encoded';
        break;
        default:
            echo ' - Unknown error';
        break;
} 
```

输出：

```
 - Syntax error, malformed JSON 
```

但是，我在以下网站检查了您的 json 代码，但它显示有效：

*   [http://www.freeformatter.com/json-validator.html](http://www.freeformatter.com/json-validator.html)
*   [http://jsonlint.com/](http://jsonlint.com/)
*   [http://json.parser.online.fr/](http://json.parser.online.fr/)
*   [http://jsonformatter.curiousconcept.com/](http://jsonformatter.curiousconcept.com/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T16:03:45.257

**文档**

`json_decode`可以`NULL`按[文档](http://php.net/manual/en/function.json-decode.php)说明返回。

> 以适当的 PHP 类型返回以 json 编码的值。值 true、false 和 null（不区分大小写）分别返回为 TRUE、FALSE 和 NULL。如果无法解码 json 或编码的数据深度超过递归限制，则返回 NULL。

**你的问题**

`json_decode`**由于id 6**`\n`的内部而在这里失败

 **> { "id": 6, "url": " [http://jeewanaryal.com/angryQuiz/eighties/images/betterOffDead.jpg](http://jeewanaryal.com/angryQuiz/eighties/images/betterOffDead.jpg) ", "question": "在电影《死而复生》中，\n 是什么莱恩弟弟的名字？", "answer": [ { "a": { "text": "Bradger", "status": 1 } }, { "b": { "text": "Peter", "状态”：0 } }，{“c”：{“文本”：“弗兰克”，“状态”：0 } }，{“d”：{“文本”：“迈克尔”，“状态”：0 } } ] }

**解决方案**

我想你在这里最好的选择是先逃离他们`json_decode`

`$safe_json = str_replace("\n", "\\n", $json);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T16:17:27.043

这只是一个猜测，但由于您没有显示`$json`包含的内容，我将假设`file_get_contents`返回`false`，导致您得到的结果。

你应该检查你的`php.ini`文件，值是`allow_url_fopen`什么？如果那`0`意味着您无法从`http`地址读取文件，那么这可能是问题所在。

如果这是问题，只需更改`allow_url_fopen`to的值。`1`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T16:06:41.483

请将第二个参数设置为 true。这将为您提供一个关联数组。如果结果仍然为空，我会对 file_get_contents 是否返回某些内容感兴趣。**

# java - Java、SQL 数据库连接

> ID：15552389
> 
> 赞同：1
> 
> 时间：2013-03-21T15:59:43.543
> 
> 标签：java, sql, sql-server, sql-server-2008

我是 C# 开发人员，我对 Java 不太了解，通常在 C# 中，当我想连接到数据库时，我使用以下命令：

```
static SqlConnection cn = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Database.mdf;Integrated Security=True;User Instance=True"); 
```

我在 MSDN 中阅读了有关在 java 中建立数据库连接（Sql Server 2008）的教程，说地址必须以这种方式声明：

```
String connectionUrl = "jdbc:sqlserver://localhost:1433;" + "databaseName=JavaDB;user=UserName;password=*****"; 
```

我想如果有任何方法可以像我在 C# 中那样声明 url，我的意思是而不是

```
"jdbc:sqlserver://localhost:1433;" 
```

我直接指向数据库

```
"AttachDbFilename=|DataDirectory|\Database.mdf;" 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:29:58.087

URL 的第一部分由 JDBC 规范规定，因此所有驱动程序都将遵循该结构`jdbc:<vendor-identifier>:<vendor-specific-url>`。

在 Java 中创建连接（至少 via `java.sql.DriverManager`）独立于`Driver`创建连接的实际实现（在 C# 中，您创建类型化的供应商特定连接）。

第一部分`jdbc:<vendor-identifier>`用作选择机制，因此`Driver`可以快速决定是否接受 URL。从技术上讲，多个驱动程序实现可以接受一个 URL 并创建连接。通常`<vendor-identifier>`是数据库或公司的名称。

通常`<vendor-specific-url>`会遵循正常的 URL 约定（MS SQL Server JDBC URL 是一个例外）。

Microsoft JDBC 驱动程序的格式为：

```
jdbc:sqlserver://[serverName[\instanceName][:portNumber]][;property=value[;property=value]] 
```

请参阅：[构建连接 URL](http://msdn.microsoft.com/en-us/library/ms378428.aspx)。

从技术上讲，微软本可以只允许他们使用数据库名称`<vendor-specific-url>`并暗示它使用 localhost，但他们决定不这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:06:47.107

SQL JDBC驱动的官方文档没有提到任何这样的事情

[http://msdn.microsoft.com/en-us/library/ms378428.aspx](http://msdn.microsoft.com/en-us/library/ms378428.aspx)

[http://msdn.microsoft.com/en-us/library/ms378672(v=sql.110).aspx](http://msdn.microsoft.com/en-us/library/ms378672(v=sql.110).aspx)

所以我认为这是不可能的

# drupal - 如何将 htdocs 中的 localhost/myfolder 重命名为某个域名

> ID：15552390
> 
> 赞同：0
> 
> 时间：2013-03-21T15:59:45.197
> 
> 标签：drupal, xampp

所以我们都知道要在 htdocs 中访问您的站点，您必须输入“localhost/yoursite 文件夹”，对吗？但在我朋友的帮助下，我设法改变了这一点。现在我的朋友走了，所以我不能要求他把它改回来。而不是“localhost/yoursite”，我可以通过“mysite.test”访问它，它与system32中的host.txt有关。现在的问题是我再次在 htdocs 中安装了一个新的 drupal 站点，但我无法访问它，因为我的本地主机总是指向我的第一个 drupal 站点。我该如何配置？

这是我的主机.TXT

```
# localhost name resolution is handled within DNS itself.
#   127.0.0.1       localhost
#   ::1             localhost
    127.0.0.1   activate.adobe.com
    127.0.0.1   drupal6.test
    127.0.0.1   belmark.test 
```

drupal 6 是我以前的站点。并且 belmark.test 是我希望 localhost 指向的站点，该站点无法正常工作。即使我省略了 drupal6.test 行 localhost 仍然指向 drupal6.test

这是我的 httpd-vhost.conf

```
<VirtualHost *:80>
    ServerAdmin cadaybelmark@gmail.com
    DocumentRoot "C:/xampp/htdocs/drupal6"
    ServerName drupal6.test
    ServerAlias drupal6.test
    ErrorLog "logs/drupal6.test-error.log"
    CustomLog "logs/drupal6.test-access.log" combined
</VirtualHost>

<VirtualHost *:80>
    ServerAdmin cadaybelmark@gmail.com
    DocumentRoot "C:/xampp/htdocs/drupal7"
    ServerName belmark.test
    ServerAlias belmark.test
    ErrorLog "logs/drupal.test-error.log"
    CustomLog "logs/drupal.test-access.log" combined
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:14:59.267

您需要为 apache（通过 xampp）配置额外的虚拟主机，每个站点一个虚拟主机。

vhost 配置将 ServerName 映射到 DocumentRoot。例如，

```
ServerName localhost
DocumentRoot /path/to/my/drupal 
```

如果您想要一个新的第二个站点，您将需要第二个虚拟主机。如果您只是想用新的 Drupal 安装替换原始站点，您的原始虚拟主机可以保持不变（只要您放置在与原始站点完全相同的位置，听起来您没有这样做，因为旧站点是仍在加载）。

有关如何添加/编辑虚拟主机条目的信息，请参阅 XAMPP 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:52:30.077

我的天，答案太简单了。Apache 只需要重新启动。好的！感谢你们的努力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T16:07:00.320

不知道我是否理解你的问题

在 htdocs 中创建一个子文件夹并将其安装在那里。

```
127.0.0.1/subfolder/yoursite 
```

# xml - 扩展 XML Schema 枚举而不使用它更改文件

> ID：15552395
> 
> 赞同：1
> 
> 时间：2013-03-21T15:59:54.330
> 
> 标签：xml, xsd

我有很多 XML 模式，比如说 a.xsd、b.xsd、c.xsd，其中包含元素类型，这些元素类型对它们的某些属性使用枚举。

所以想象一下在这些类型的定义中的某个地方：

```
<xsd:attribute name="attr1" type="MyEnum" use="optional"></xsd:attribute> 
```

现在我需要向这个枚举添加一些值，但我不能触及枚举定义，因为该定义应该保持原样，因为它是标准的一部分。

如何使用另一个 XSD 架构扩展它而不更改 a.xsd、b.xsd 和 c.xsd 中的引用？我想以一种在任何地方都引用新枚举而不是旧枚举的方式重新定义这个枚举。

提前致谢！

# haskell - Haskell 中的随机模拟教程

> ID：15552397
> 
> 赞同：5
> 
> 时间：2013-03-21T16:00:00.020
> 
> 标签：haskell, simulation, stochastic, stochastic-process

我想使用 Haskell 进行随机模拟，但我不知道如何。我已经阅读了 Hutton 的“在 Haskell 中编程”，并且我很擅长编写确定性函数程序。但是，我不知道如何开始编写在 R 或 python 等命令式语言中很容易的那种随机模拟。是否有我可以阅读的教程或入门书，或者任何人都可以提供一些入门提示？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T16:49:35.940

有一篇很好的自包含论文[Erwig 和 Kollmansberger：Functional Pearls - Probabilistic Functional Programming in Haskell](http://web.engr.oregonstate.edu/~erwig/papers/PFP_JFP06.pdf)关于这个主题。我以此为起点，在 Haskell 中编写基于隐马尔可夫模型的自然语言处理器。有一个基于这篇论文的[包，它似乎也为 R 绘图提供了一个基本接口。](http://hackage.haskell.org/cgi-bin/hackage-scripts/package/probability)

HaskellWiki 上还有一个[条目](http://www.haskell.org/haskellwiki/Probabilistic_Functional_Programming)，其中包含更多 hackage 链接。特别是，[ProbabilityMonads](http://hackage.haskell.org/package/ProbabilityMonads)包可能对您有用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T17:13:39.083

[http://learnyouahaskell.com/a-fistful-of-monads#the-list-monad](http://learnyouahaskell.com/a-fistful-of-monads#the-list-monad)

[Learn You a Haskell](http://learnyouahaskell.com/)中的这一小节讨论了使用 List monad 和 functor 函数轻松处理非确定性。根据您的需求可能有点简单，但请充分利用标准库中已有的工具。

# jquery - BeforeSubmit 和 ClearAfterAdd 事件未触发

> ID：15552400
> 
> 赞同：0
> 
> 时间：2013-03-21T16:00:11.527
> 
> 标签：jquery, jqgrid

我调整了这个链接[Local form editing demo and jqGrid 4.4.1](https://stackoverflow.com/questions/12281463/local-form-editing-demo-and-jqgrid-4-4-1/12296186#12296186)以适应我的解决方案，但是我已经更改了`CloseAfterAdd:false`并添加了`ClearAfterAdd:true`and `beforeSubmit: CheckValid`。但是，这两个事件都没有触发以实现我的目标。我的目标是在使用回车键作为保存键添加记录时保持对话框表单打开，并在保存后清除表单。其次验证 CheckValid 函数中的一组相关字段。请有人指出我做错了什么。谢谢

```
function checkvalue(value, colname) { alert(value || colname); return [true, ""]; }
        var vlcontractor, field2, field3, field4, vlBuckid, vlHospid, myCustomCheck, myCustomCheck2;
        myCustomCheck = function (value, colname) {
            switch (colname) {
                case 'Contractor':
                    vlcontractor = value;
                    break;
                case 'Company Name':
                    field2 = value;
                    break;
                case 'Project End Date':
                    field3 = value;
                    break;
                default:
                    break;
            }

            if (vlcontractor == "Yes" && (field2 == undefined || field3 == undefined))
            { return [false, "Company/State ID/End Date is needed for a Contractor"]; }

            if (vlcontractor != undefined  && field2 != undefined) {
                // validate the fields here
                return [false, "some error text"];
            } else {
                //alert('we are good');
                return [true];
            }
        };
        myCustomCheck2 = function (value, colname) {
            switch (colname) {
                case 'BUCK ID':
                    vlBuckid = value;
                    break;
                case 'Hospital ID':
                    vlHospid = value;
                    break;
            }
            if ((vlBuckid == undefined && vlHospid == undefined) || (vlBuckid == '' && vlHospid == ''))
            { return [false, "A BuckID or Hospital ID is required."]; }
            else { return [true]; }
        }

        $(function () {
            var lastSel,
            mydata = '',
                grid = $("#list"),
                getColumnIndex = function (columnName) {
                    var cm = $(this).jqGrid('getGridParam', 'colModel'), i, l = cm.length;
                    for (i = 0; i < l; i++) {
                        if ((cm[i].index || cm[i].name) === columnName) {
                            return i; // return the colModel index
                        }
                    }
                    return -1;
                },
                CheckValid = function (postdata, formid) {
                    alert(postdata);
                    return false;
                },
                onclickSubmitLocal = function (options, postdata) {
                    var $this = $(this), grid_p = this.p,
                        idname = grid_p.prmNames.id,
                        grid_id = this.id,
                        id_in_postdata = grid_id + "_id",
                        rowid = postdata[id_in_postdata],
                        addMode = rowid === "_empty",
                        oldValueOfSortColumn,
                        new_id,
                        tr_par_id,
                        colModel = grid_p.colModel,
                        cmName,
                        iCol,
                        cm;

                    // postdata has row id property with another name. we fix it:
                    if (addMode) {
                        // generate new id
                        new_id = $.jgrid.randId();
                        while ($("#" + new_id).length !== 0) {
                            new_id = $.jgrid.randId();
                        }
                        postdata[idname] = String(new_id);
                    } else if (typeof postdata[idname] === "undefined") {
                        // set id property only if the property not exist
                        postdata[idname] = rowid;
                    }
                    delete postdata[id_in_postdata];

                    // prepare postdata for tree grid
                    if (grid_p.treeGrid === true) {
                        if (addMode) {
                            tr_par_id = grid_p.treeGridModel === 'adjacency' ? grid_p.treeReader.parent_id_field : 'parent_id';
                            postdata[tr_par_id] = grid_p.selrow;
                        }

                        $.each(grid_p.treeReader, function (i) {
                            if (postdata.hasOwnProperty(this)) {
                                delete postdata[this];
                            }
                        });
                    }

                    // decode data if there encoded with autoencode
                    if (grid_p.autoencode) {
                        $.each(postdata, function (n, v) {
                            postdata[n] = $.jgrid.htmlDecode(v); // TODO: some columns could be skipped
                        });
                    }

                    // save old value from the sorted column
                    oldValueOfSortColumn = grid_p.sortname === "" ? undefined : grid.jqGrid('getCell', rowid, grid_p.sortname);

                    // save the data in the grid
                    if (grid_p.treeGrid === true) {
                        if (addMode) {
                            $this.jqGrid("addChildNode", new_id, grid_p.selrow, postdata);
                        } else {
                            $this.jqGrid("setTreeRow", rowid, postdata);
                        }
                    } else {
                        if (addMode) {
                            // we need unformat all date fields before calling of addRowData
                            for (cmName in postdata) {
                                if (postdata.hasOwnProperty(cmName)) {
                                    iCol = getColumnIndex.call(this, cmName);
                                    if (iCol >= 0) {
                                        cm = colModel[iCol];
                                        if (cm && cm.formatter === "date") {
                                            postdata[cmName] = $.unformat.date.call(this, postdata[cmName], cm);
                                        }
                                    }
                                }
                            }
                            $this.jqGrid("addRowData", new_id, postdata, options.addedrow);
                        } else {
                            $this.jqGrid("setRowData", rowid, postdata);
                        }
                    }

                    if ((addMode && options.closeAfterAdd) || (!addMode && options.closeAfterEdit)) {
                        // close the edit/add dialog
                        $.jgrid.hideModal("#editmod" + grid_id, {
                            gb: "#gbox_" + grid_id,
                            jqm: options.jqModal,
                            onClose: options.onClose
                        });
                    }

                    if (postdata[grid_p.sortname] !== oldValueOfSortColumn) {
                        // if the data are changed in the column by which are currently sorted
                        // we need resort the grid
                        setTimeout(function () {
                            $this.trigger("reloadGrid", [{ current: true}]);
                        }, 100);
                    }

                    // !!! the most important step: skip ajax request to the server
                    options.processing = true;
                    $('#gridData').val(JSON.stringify(grid_p.data));
                    return {};
                },
                editSettings = {
                    //recreateForm: true,
                    jqModal: false,
                    reloadAfterSubmit: false,
                    closeOnEscape: true,
                    savekey: [true, 13],
                    closeAfterEdit: true,
                    beforeSubmit: CheckValid,
                    onclickSubmit: onclickSubmitLocal
                },
                addSettings = {
                    //recreateForm: true,
                    jqModal: false,
                    beforeSubmit: CheckValid,
                    reloadAfterSubmit: false,
                    savekey: [true, 13],
                    closeOnEscape: true,
                    closeAfterAdd: true,
                    clearAfterAdd: true,
                    onclickSubmit: onclickSubmitLocal
                },
                delSettings = {
                    // because I use "local" data I don't want to send the changes to the server
                    // so I use "processing:true" setting and delete the row manually in onclickSubmit
                    onclickSubmit: function (options, rowid) {
                        var $this = $(this), grid_id = $.jgrid.jqID(this.id), grid_p = this.p,
                            newPage = grid_p.page;

                        // reset the value of processing option to true to
                        // skip the ajax request to 'clientArray'.
                        options.processing = true;

                        // delete the row
                        $this.jqGrid("delRowData", rowid);
                        if (grid_p.treeGrid) {
                            $this.jqGrid("delTreeNode", rowid);
                        } else {
                            $this.jqGrid("delRowData", rowid);
                        }
                        $.jgrid.hideModal("#delmod" + grid_id, {
                            gb: "#gbox_" + grid_id,
                            jqm: options.jqModal,
                            onClose: options.onClose
                        });

                        if (grid_p.lastpage > 1) {// on the multipage grid reload the grid
                            if (grid_p.reccount === 0 && newPage === grid_p.lastpage) {
                                // if after deliting there are no rows on the current page
                                // which is the last page of the grid
                                newPage--; // go to the previous page
                            }
                            // reload grid to make the row from the next page visable.
                            $this.trigger("reloadGrid", [{ page: newPage}]);
                        }

                        return true;
                    },
                    processing: true
                },
                initDateEdit = function (elem) {
                    setTimeout(function () {
                        $(elem).datepicker({
                            dateFormat: 'dd-M-yy',
                            //autoSize: true,
                            showOn: 'button',
                            changeYear: true,
                            changeMonth: true,
                            showButtonPanel: true,
                            showWeek: true
                        });
                    }, 100);
                },
                initDateSearch = function (elem) {
                    setTimeout(function () {
                        $(elem).datepicker({
                            dateFormat: 'dd-M-yy',
                            //autoSize: true,
                            //showOn: 'button', // it dosn't work in searching dialog
                            changeYear: true,
                            changeMonth: true,
                            showButtonPanel: true,
                            showWeek: true
                        });
                    }, 100);
                };
            grid.jqGrid({
                datatype: 'local',
                data: mydata,
                //colNames: [/*'Inv No', */'Client', 'Date', 'Amount', 'Tax', 'Total', 'Closed', 'Shipped via', 'Notes'],
                colNames: ['Emp/Stu ID', 'Last Name, First Name', 'BUCK ID', 'Hospital ID', 'Contractor', 'Company-Name', 'State ID', 'Project End Date'],
                colModel: [
                        { name: 'empstuid', index: 'empstuid', editable: true, width: 80, editrules: { required: false }, editoptions: { maxlength: 10 } },
                        { name: 'lastFirst', index: 'lastFirst', editable: true, width: 180, editrules: { required: true} },
                        { name: 'buckid', index: 'buckid', editable: true, width: 120, editrules: { custom: true, custom_func: myCustomCheck2 } },
                        { name: 'hospid', index: 'hospid', editable: true, width: 120, editrules: { custom: true, custom_func: myCustomCheck2 } },
                        {
                            name: 'contractor', index: 'contractor', editable: true, edittype: 'checkbox',
                            editoptions: { value: "Yes:No" }, width: 70, editrules: { custom: true, custom_func:myCustomCheck }
                        },
                        { name: 'compname', index: 'compname', editable: true, width: 110, editrules: { custom: true, custom_func:myCustomCheck } },
                        { name: 'stateid', index: 'stateid', editable: true, width: 80, editrules: { custom: true, custom_func: myCustomCheck } },
                        { name: 'enddate', index: 'enddate', editable: true, width: 110, editrules: { custom: true, custom_func: myCustomCheck } }
                ],
                altRows: true,
                rowNum: 10,
                rowList: [10, 20],
                pager: '#pager',
                gridview: true,
                rownumbers: true,
                autoencode: true,
                ignoreCase: true,
                sortname: 'invdate',
                viewrecords: true,
                sortorder: 'desc',
                footerrow: true,
                emptyrecords:"There are **no records added",
                caption: '',
                height: '100%',
                editurl: 'clientArray',
                ondblClickRow: function (rowid, ri, ci) {
                    var $this = $(this), p = this.p;
                    if (p.selrow !== rowid) {
                        // prevent the row from be unselected on double-click
                        // the implementation is for "multiselect:false" which we use,
                        // but one can easy modify the code for "multiselect:true"
                        $this.jqGrid('setSelection', rowid);
                    }
                    $this.jqGrid('editGridRow', rowid, editSettings);
                },
                onSelectRow: function (id) {
                    if (id && id !== lastSel) {
                        // cancel editing of the previous selected row if it was in editing state.
                        // jqGrid hold intern savedRow array inside of jqGrid object,
                        // so it is safe to call restoreRow method with any id parameter
                        // if jqGrid not in editing state
                        if (typeof lastSel !== "undefined") {
                            $(this).jqGrid('restoreRow', lastSel);
                        }
                        lastSel = id;
                    }
                }
            }).jqGrid('navGrid', '#pager', {edit:false,add:true, del:true, search:false, refresh:false}, editSettings, addSettings, delSettings,
                { multipleSearch: true, overlay: false,
                    onClose: function (form) {
                        // if we close the search dialog during the datapicker are opened
                        // the datepicker will stay opened. To fix this we have to hide
                        // the div used by datepicker
                        $("div#ui-datepicker-div.ui-datepicker").hide();
                    }
                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:07:59.093

回调`beforeSubmit`确实触发了，但仅在成功验证的情况下。

您使用自定义验证的方式是错误的。例如，如果您检查值，如果公司已满，`contractor`您将收到错误消息事件。`"Company/State ID/End Date is needed for a Contractor"`问题是`field2`您在列`myCustomCheck`验证期间设置的变量将在验证将使用的位置*之后*设置。`'compname'`*`'contractor'``field2`*

 *如果您需要实现**多个字段**的自定义验证，则最好使用`beforeCheckValues`回调。回调将在所有其他验证*之前调用。*它`postdata`以**所有字段**作为输入。因此，您可以轻松验证数据。回调不能有任何`return`（或使用`return;`没有任何值）。您可以添加`custom: true, custom_func` *只有一列的*验证规则。如果在回调`[false, errorMessage]`中发现验证错误，您可以在验证函数内部返回。`beforeCheckValues`

此外，我不建议您*在*. `$(function () {...});`您应该将所有代码放在其中。这样您将减少全局变量的数量。*

# java - Selenium Webdriver 用于从网页中检索表格

> ID：15552402
> 
> 赞同：-2
> 
> 时间：2013-03-21T16:00:14.993
> 
> 标签：java, selenium-webdriver

selenium webdriver 可以用于检索表中显示的数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T06:20:40.363

是的 Selenium WebDriver 可用于从表中检索数据。按照以下 C# 代码从表中检索数据。[为了证明这一点，我在“ http://developer.yahoo.com/yui/examples/datasource/datasource_table_to_array.html](http://developer.yahoo.com/yui/examples/datasource/datasource_table_to_array.html) ”中使用了一个 id="accounts" 的表。

```
<table id="accounts"> 
    <caption>Table in markup with data in it</caption>
    <thead> 
           <tr> 
                <th>Due Date</th> 
                <th>Account Number</th> 
                <th>Quantity</th> 
                <th>Amount Due</th> 
           </tr> 
    </thead> 
    <tbody> 
           <tr> 
                <td>1/23/1999</td> 
                <td>29e8548592d8c82</td> 
                <td>12</td> 
                <td>$150.00</td> 
           </tr> 
           <tr> 
                <td>5/19/1999</td> 
                <td>83849</td> 
                <td>8</td> 
                <td>$60.00</td> 
           </tr> 
            ... 
   </tbody> 
</table> 
```

代码的详细信息。

1.  为 By.XPath("//table[@id='accounts']/thead/tr") 创建了一个 Web 元素

2.  创建了一个 IList，其中包含所有**标记**/thead/tr**下的 web 元素By.XPath("//table[@id='accounts']/thead/tr/th")**

***   使用循环访问表头的内容。

    *   为 By.XPath("//table[@id='accounts']/tbody/tr") 创建了一个 Web 元素

    *   创建了一个 IList，其中包含所有**标记 /tbody/tr 下的 web 元素 By.XPath("//table[@id='accounts']/tbody/tr/th")**

    ***   使用循环访问表体的内容。**** 

 ****-

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using OpenQA.Selenium;
using OpenQA.Selenium.Firefox;
using OpenQA.Selenium.Support.UI;

namespace BusinessCreation
{
    class ExtractDataFromATable
    {
        static void Main(string[] args)
        {
            IWebDriver driver = new FirefoxDriver();
         driver.Navigate().GoToUrl("http://developer.yahoo.com/yui/examples/datasource/datasource_table_to_array.html");
          if(driver.FindElement(By.XPath("//table[@id='accounts']/thead/tr/th")).Displayed)
            {
                IWebElement webElementHead =  driver.FindElement(By.XPath("//table[@id='accounts']/thead/tr"));
                IList<IWebElement> ElementCollectionHead = webElementHead.FindElements(By.XPath("//table[@id='accounts']/thead/tr/th"));
                foreach (IWebElement item in ElementCollectionHead)
                {
                    Console.WriteLine(item.Text);
                }
            }
            if (driver.FindElement(By.XPath("//table[@id='accounts']/tbody/tr")).Displayed)
            {
                IWebElement webElementBody = driver.FindElement(By.XPath("//table[@id='accounts']/tbody/tr"));
                IList<IWebElement> ElementCollectionBody = webElementBody.FindElements(By.XPath("//table[@id='accounts']/tbody/tr"));
                foreach (IWebElement item in ElementCollectionBody)
                {
                    string []arr= new string[4];
                    arr = item.Text.Split(' ');
                    for (int i = 0; i < arr.Length; i++)
                    {
                        Console.WriteLine(arr[i]);
                    }               
                }
            }
            Console.ReadLine();
        }
    }
} 
```****

# tsql - SSRS 参数过滤掉查询的联合部分

> ID：15552408
> 
> 赞同：0
> 
> 时间：2013-03-21T16:00:19.730
> 
> 标签：tsql, ssrs-2008, reporting-services

在我的 SSRS 报告中，我有一个名为“Producer Name”的列和一个名为“ProducerName”的参数字段。它目前正在返回我所有的生产者姓名行，但在我的 sql 查询中，我联合另一行调用“生产者姓名”+“总计”。我的 SSRS 报告不会返回任何添加了“总计”的生产者名称。我该如何解决这个问题？

它目前返回的内容：

```
Producer Name       Count
    Prod A            15
    Prod A             6
    Prod A             2
    Prod B             4 
```

它应该返回什么：

```
 Producer Name         count
        Prod A             15
        Prod A              6
        Prod A              2
        Prod A Totals      23
        Prod B              4
        Prod B Totals       4 
```

我认为这是因为我的 ProducerName 参数无法识别我在合并这两个语句时添加到行中的单词“totals”。任何意见将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:18:05.477

更好的解决方案是`UNION`完全从查询中删除，只`Producer Name`在报告级别处理分组和分组总计。

您所描述的是基本的 SSRS 功能，因此您不妨利用该工具提供的功能。

# java - 用单独的开始/结束字符连接字符串

> ID：15552412
> 
> 赞同：2
> 
> 时间：2013-03-21T16:00:30.360
> 
> 标签：java, string, join, guava

根据是否有一个或多个匹配项来连接具有不同开始/结束字符的字符串的好方法是什么？

预期产出

```
[1] foo=bar
[2] foo=(bar & baz & quz) 
```

我正在寻找是否有比我的解决方案更优雅的东西

```
String s = Joiner.on(" & ").join(elements);
return elements.size() > 1 ? "(".concat(s).concat(")") : s; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:02:55.997

不，没有更好的方法。Joiner（有点刻意）只做简单的加入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-10T08:23:40.150

几乎没有更优雅，但对于任何想要避免使用 Guava 并使用 java 8 Streams 的人：

```
 public class App {

        public static void main(String args[]) {

            List<String> stringList = new ArrayList<>(Arrays.asList("bar","baz","quz"));
            List<String> stringListSingle = new ArrayList<>(Arrays.asList("bar"));

            System.out.println(printStrings(stringList));
            System.out.println(printStrings(stringListSingle));
        }

        private static String printStrings(List<String> stringList) {
            return stringList.size() == 1 ?  String.join(" & ", stringList) : stringList.stream()
                                                                            .collect(Collectors.joining(", ","{", "}"));
        }

    } 
```

# css - 如何根据溢出状态显示图像

> ID：15552414
> 
> 赞同：0
> 
> 时间：2013-03-21T16:00:32.590
> 
> 标签：css, scroll, overflow

我有一个包含分页的 div 区域，但是对于移动设备访问后面的页面，水平滚动条不显示，访问者必须使用他们的手指。

我正在寻找一个非常简单的解决方案，所以我想如果我能检测到是否发生溢出，一个小图像建议用手指滚动应该可见。

这是可能的吗，有没有人有一个如何写这个的例子？

# python - Flask 会话忘记请求之间的条目

> ID：15552418
> 
> 赞同：9
> 
> 时间：2013-03-21T16:00:43.640
> 
> 标签：python, jquery, flask, session-variables, session-cookies

我正在使用最新的 Flask/Werkzeug (Flask 0.9) 客户端会话来保留请求之间的信息。会话未设置为持久（因为我可以在关闭浏览器时删除 cookie）。

我的问题如下：

我使用一些服务器端代码来用一个条目填充 Flask 会话变量。在此之后，Session 变量看起来像这样：

```
<SecureCookieSession {u'items': SOMENOTVERYIMPORTANTDICTIONARY}, '_fresh': True, 'user_id': u'1', 'csrf': '0aef1995cdf2cxx0233fdf3321d17fc7267f3b32', '_id': 'someUNIQUEcode'}*> 
```

我使用这些信息来呈现一个对同一个 Flask 应用程序执行 GET 请求（通过 JQuery）的页面，但是突然包含会话中“项目”条目的字典消失了：

```
<SecureCookieSession {'_fresh': True, 'user_id': u'1', 'csrf': '0aef1995cdf2cxx0233fdf3321d17fc7267f3b32', '_id': 'someUNIQUEcode'}> 
```

我做了一些搜索，并认为这可能与我在 localhost 上测试的事实有关（127.0.0.1 与 localhost 不同）。我修复了我的主机文件并添加了一个“dev.localhost”条目以确保所有请求都来自同一主机。

此外，我的浏览器 (Chrome) 的开发者面板显示了与发送到服务器的会话 cookie 完全相同的标识符。

此外，设置`session.modified = True`也无济于事。

请求之间唯一变化的是

```
__utmb=122666782.18.10.1363877633 
```

对于第一个请求（填充`items`条目的请求）与第二个请求

```
__utmb=122666782.19.10.1363877633 
```

认为它仍然可能是与 Ajax 相关的事情。在直接重新加载页面后，我测试了会话变量的内容：该`items`条目仍然从会话中消失。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T09:56:07.647

事实证明，发送回客户端 (Chrome) 的 cookie 超过了 cookie 大小的 4096 字节限制。显然 Django 默认使用服务器端会话，这使得这个问题仅在我将代码移动到 Flask 时出现。在 Flask 中使用服务器端会话，例如在[flask-kvsession](http://flask-kvsession.readthedocs.org/en/0.2/)和其他中应该可以解决这个问题。

# c# - 数据模板中滑块上的事件

> ID：15552422
> 
> 赞同：0
> 
> 时间：2013-03-21T16:00:58.750
> 
> 标签：c#, xaml, windows-8

我的standardstyles.xaml 中的滑块有一些问题。如何在滑块上添加可以在实现数据模板的页面上使用的事件？

```
<DataTemplate x:Key="DimmerItemTemplate">
        <Grid HorizontalAlignment="Left" Width="225" Height="70" Background="#FFECECEC">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="175"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="38"/>
            </Grid.ColumnDefinitions>
            <Grid Grid.Column="2">
                <Image x:Name="imgLow" Stretch="UniformToFill"  Source="ms-appx:///Assets/HubPage/TileLowIcon.png" Visibility="{Binding Low}"/>
                <Image x:Name="imgHigh" Stretch="UniformToFill"  Source="ms-appx:///Assets/HubPage/TileHighIcon.png" Visibility="{Binding High}"/>
            </Grid>
            <StackPanel Margin="10,0,0,15" VerticalAlignment="Bottom">
                <TextBlock Text="{Binding Title}" Foreground="#FF999999" Style="{StaticResource TitleTextStyle}" Margin="0,0,0,5" FontSize="13.333" VerticalAlignment="Top" LineHeight="13.333"/>
                <Slider Height="30" Width="160" Name="DimmerSlider" ValueChanged="slider2_ValueChanged">
                </Slider>

            </StackPanel>
            <StackPanel VerticalAlignment="Bottom" Margin="0,0,0,15" Grid.Column="1">
                <TextBlock TextWrapping="Wrap" Text="{Binding Level1}" FontFamily="Segoe UI" Foreground="Black" FontSize="13.333" FontWeight="SemiBold" Margin="0"/>
                <TextBlock TextWrapping="Wrap" Text="{Binding Level2}" FontFamily="Segoe UI" Foreground="Black" FontSize="13.333" FontWeight="SemiBold" Margin="0"/>
            </StackPanel>
        </Grid>
    </DataTemplate> 
```

# wpf - 从 RadGridView WPF c# 中删除分组网格线

> ID：15552425
> 
> 赞同：2
> 
> 时间：2013-03-21T16:01:11.937
> 
> 标签：wpf, telerik, telerik-grid

![在此处输入图像描述](../Images/2f2645eea97ea002b259971d174fc90c.png)

这是 Telerik Demos 中的示例网格视图，但我想知道如何删除在分组项目后出现的这些网格线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:21:12.893

能够摆脱垂直线：

```
<Style TargetType="grid:GridViewIndentCell">
    <Setter Property="Background" Value="{StaticResource MainBrush}" />
    <Setter Property="BorderBrush" Value="{StaticResource BasicBrush}"/>
    <Setter Property="BorderThickness" Value="0"/>
    <Setter Property="VerticalContentAlignment" Value="Stretch" />
    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
    <Setter Property="Padding" Value="0" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="grid:GridViewIndentCell">
                <Border BorderBrush="{TemplateBinding BorderBrush}"
                    Background="{TemplateBinding Background}"
                    VerticalAlignment="{TemplateBinding VerticalContentAlignment}" 
                    HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                    Padding="{TemplateBinding Padding}"
                    BorderThickness="{TemplateBinding BorderThickness}" Width="25" />
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T23:55:33.787

这是我正在处理的 Gridviewgroupstyle 代码

```
<Style x:Key="GridViewGroupRowStyle1" TargetType="{x:Type telerik:GridViewGroupRow}">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type telerik:GridViewGroupRow}">
                            <Grid x:Name="PART_GroupExpanderGrid">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition x:Name="PART_HeaderRow" MinHeight="{TemplateBinding MinHeight}"/>
                                    <RowDefinition x:Name="ContentRow" Height="Auto"/>
                                </Grid.RowDefinitions>
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="ExpandStateGroup">
                                        <VisualState x:Name="Expanded">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="Content">
                                                    <DiscreteObjectKeyFrame KeyTime="0">
                                                        <DiscreteObjectKeyFrame.Value>
                                                            <Visibility>Visible</Visibility>
                                                        </DiscreteObjectKeyFrame.Value>
                                                    </DiscreteObjectKeyFrame>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="BottomBorder">
                                                    <DiscreteObjectKeyFrame KeyTime="0">
                                                        <DiscreteObjectKeyFrame.Value>
                                                            <Visibility>Visible</Visibility>
                                                        </DiscreteObjectKeyFrame.Value>
                                                    </DiscreteObjectKeyFrame>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderThickness" Storyboard.TargetName="IconOuterBorder">
                                                    <DiscreteObjectKeyFrame KeyTime="0">
                                                        <DiscreteObjectKeyFrame.Value>
                                                            <Thickness>0</Thickness>
                                                        </DiscreteObjectKeyFrame.Value>
                                                    </DiscreteObjectKeyFrame>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderThickness" Storyboard.TargetName="IconInnerBorder">
                                                    <DiscreteObjectKeyFrame KeyTime="0">
                                                        <DiscreteObjectKeyFrame.Value>
                                                            <Thickness>1,1,0,0</Thickness>
                                                        </DiscreteObjectKeyFrame.Value>
                                                    </DiscreteObjectKeyFrame>
                                                </ObjectAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames BeginTime="0" Storyboard.TargetProperty="(UIElement.RenderTransform).(RotateTransform.Angle)" Storyboard.TargetName="ExpanderButton">
                                                    <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="180"/>
                                                </DoubleAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="Collapsed">
                                            <Storyboard>
                                                <DoubleAnimationUsingKeyFrames BeginTime="0" Storyboard.TargetProperty="(UIElement.RenderTransform).(RotateTransform.Angle)" Storyboard.TargetName="ExpanderButton">
                                                    <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="0"/>
                                                </DoubleAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                                <Border x:Name="ToggleButtonBorder" Background="{TemplateBinding Background}" Grid.ColumnSpan="2" Grid.Column="2" MinHeight="{TemplateBinding MinHeight}" telerik:SelectiveScrollingGrid.SelectiveScrollingClip="True">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="25"/>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Border Grid.Column="2" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" telerik:SelectiveScrollingGrid.SelectiveScrollingClip="True" VerticalAlignment="{TemplateBinding VerticalContentAlignment}">
                                            <Border.Visibility>
                                                <Binding Path="ShowHeaderAggregates" RelativeSource="{RelativeSource TemplatedParent}">
                                                    <Binding.Converter>
                                                        <telerik:BooleanToVisibilityConverter/>
                                                    </Binding.Converter>
                                                </Binding>
                                            </Border.Visibility>
                                            <telerik:AggregateResultsList HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" IsTabStop="False" VerticalAlignment="{TemplateBinding VerticalContentAlignment}">
                                                <telerik:AggregateResultsList.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <StackPanel IsItemsHost="True" Orientation="Horizontal"/>
                                                    </ItemsPanelTemplate>
                                                </telerik:AggregateResultsList.ItemsPanel>
                                                <telerik:AggregateResultsList.ItemTemplate>
                                                    <DataTemplate>
                                                        <telerik:GridViewAggregateResultCell AggregateResult="{Binding}" IsTabStop="False">
                                                            <telerik:StyleManager.Theme>
                                                                <telerik:Office_BlackTheme/>
                                                            </telerik:StyleManager.Theme>
                                                        </telerik:GridViewAggregateResultCell>
                                                    </DataTemplate>
                                                </telerik:AggregateResultsList.ItemTemplate>
                                            </telerik:AggregateResultsList>
                                        </Border>
                                        <Border x:Name="IconOuterBorder" BorderBrush="Transparent" BorderThickness="0,0,0,1" Background="Transparent" HorizontalAlignment="Stretch" telerik:SelectiveScrollingGrid.SelectiveScrollingOrientation="Vertical">
                                            <Border x:Name="IconInnerBorder" BorderBrush="White" BorderThickness="1,1,0,1">
                                                <Path x:Name="ExpanderButton" Grid.Column="0" Data="M0,0L1,0 2,0 2,0.99999991 3,0.99999991 3,2 4,2 4,0.99999991 5,0.99999991 5,0 5.9999999,0 7,0 7,0.99999991 5.9999999,0.99999991 5.9999999,2 5,2 5,3 4,3 4,4 3,4 3,3 2,3 2,2 1,2 1,0.99999991 0,0.99999991z" Fill="Black" HorizontalAlignment="Left" Height="5" Margin="{TemplateBinding Padding}" RenderTransformOrigin="0.5,0.5" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" Width="7">
                                                    <Path.RenderTransform>
                                                        <RotateTransform/>
                                                    </Path.RenderTransform>
                                                </Path>
                                            </Border>
                                        </Border>
                                        <ToggleButton x:Name="HeaderButton" Background="{TemplateBinding Background}" Grid.ColumnSpan="3" Grid.Column="0" IsTabStop="{TemplateBinding IsTabStop}" IsChecked="{Binding IsExpanded, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" Opacity="0" telerik:SelectiveScrollingGrid.SelectiveScrollingOrientation="Vertical"/>
                                        <ToggleButton BorderBrush="{x:Null}" BorderThickness="0" Background="Transparent" Grid.Column="1" IsTabStop="{TemplateBinding IsTabStop}" IsChecked="{Binding IsExpanded, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" Padding="0,0,10,0" telerik:SelectiveScrollingGrid.SelectiveScrollingOrientation="Vertical">
                                            <ToggleButton.Style>
                                                <Style TargetType="{x:Type ToggleButton}">
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="{x:Type ToggleButton}">
                                                                <Border BorderBrush="Transparent" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}">
                                                                    <ContentPresenter ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" ContentStringFormat="{TemplateBinding ContentStringFormat}"/>
                                                                </Border>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                    <Setter Property="HorizontalContentAlignment" Value="Left"/>
                                                    <Setter Property="VerticalContentAlignment" Value="Center"/>
                                                    <Setter Property="Padding" Value="9,0,0,0"/>
                                                </Style>
                                            </ToggleButton.Style>
                                            <ContentPresenter ContentTemplate="{TemplateBinding GroupHeaderTemplate}" Content="{TemplateBinding GroupViewModel}" Grid.Column="1" Margin="0,0,10,0" VerticalAlignment="Center"/>
                                        </ToggleButton>
                                        <Border BorderBrush="Transparent" BorderThickness="0,0,0,0" Grid.ColumnSpan="2" Grid.Column="1" telerik:SelectiveScrollingGrid.SelectiveScrollingClip="True">
                                            <Border BorderBrush="White" BorderThickness="0,1,1,1"/>
                                        </Border>
                                    </Grid>
                                </Border>
                                <Border x:Name="PART_IndicatorPresenter" BorderBrush="Transparent" BorderThickness="0,0,1,1" Grid.Column="0" telerik:SelectiveScrollingGrid.SelectiveScrollingOrientation="Vertical" Visibility="{TemplateBinding RowIndicatorVisibility}" VerticalAlignment="Stretch" Width="25">
                                    <Border BorderBrush="White" BorderThickness="1" Background="#FFE4E4E4"/>
                                </Border>
                                <telerik:IndentPresenter Background="{TemplateBinding Background}" Grid.Column="1" IsTabStop="False" IndentLevel="{TemplateBinding Level}" telerik:SelectiveScrollingGrid.SelectiveScrollingOrientation="Vertical">
                                    <telerik:StyleManager.Theme>
                                        <telerik:Office_BlackTheme/>
                                    </telerik:StyleManager.Theme>
                                </telerik:IndentPresenter>
                                <Border x:Name="Content" Grid.ColumnSpan="5" Grid.Column="0" Grid.Row="1" Visibility="Collapsed">
                                    <StackPanel>
                                        <telerik:GridViewVirtualizingPanel x:Name="PART_GridViewVirtualizingPanel" CanHorizontallyScroll="False" CanVerticallyScroll="False"/>
                                        <telerik:GridViewGroupFooterRow x:Name="Footer" IsTabStop="False">
                                            <telerik:StyleManager.Theme>
                                                <telerik:Office_BlackTheme/>
                                            </telerik:StyleManager.Theme>
                                        </telerik:GridViewGroupFooterRow>
                                    </StackPanel>
                                </Border>
                                <Border x:Name="BottomBorder" BorderBrush="Transparent" BorderThickness="0,0,0,1" Grid.Column="2" Grid.Row="1" telerik:SelectiveScrollingGrid.SelectiveScrollingClip="True" Visibility="Collapsed" VerticalAlignment="Bottom"/>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Setter Property="GroupHeaderTemplate">
                    <Setter.Value>
                        <DataTemplate>
                            <ContentPresenter Content="{Binding Header}"/>
                        </DataTemplate>
                    </Setter.Value>
                </Setter>
                <Setter Property="Background" Value="#FFE4E4E4"/>
                <Setter Property="BorderBrush" Value="Transparent"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="VerticalContentAlignment" Value="Center"/>
                <Setter Property="HorizontalContentAlignment" Value="Left"/>
                <Setter Property="Padding" Value="10,0,0,0"/>
                <Setter Property="MinHeight" Value="25"/>
                <Setter Property="AllowDrop" Value="True"/>
                <Setter Property="SnapsToDevicePixels" Value="True"/>
            </Style> 
```

# c++ - 构造函数、类、联合、结构

> ID：15552435
> 
> 赞同：0
> 
> 时间：2013-03-21T16:01:26.297
> 
> 标签：c++, class, struct, unions

我有一些关于类、结构和联合的疑问。我知道类和结构被认为是对象。我想检查联合是否也被视为对象。因此，我可以在里面有一个构造函数？

```
union ABC
{
  ABC() {};
  int x;
}A, B, C 
```

因为我有对象名称。我能做到这一点吗？

```
Union ABC obj1(); //Call constructor?
A.x;  //Variable accessing the member 
```

？？？其次，如果我 typedef union 怎么办。ABC 是什么意思？我可以这样做吗

```
union ABC obj1();
A.x;

typedef union ABC
{
  ABC() {};
  int x;
}A, B, C 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:12:41.503

1.  struct 和 class 的区别在于，struct 中的成员默认是公共的，但在类中是私有的；否则，它们在功能上是等效的。联合可以有成员函数（包括构造函数和析构函数），但不能有虚函数。联合不应有基类。联合不应用作基类。

2.  `Union ABC obj1(); //Call constructor?`

    不，这不会调用构造函数

    `union ABC obj1()`意味着您声明一个带有名称的函数`obj1`并返回一个对象`union ABC`

3.  在这两种情况下都有语法错误，您必须执行以下操作：

    ```
    union ABC
    {
       ABC() {};
       int x;
     }A, B, C;   //You cannot miss this ; 
    ```

4.  你可以做：

    ```
    typedef union ABC ABCUnion;   then 

     ABCUnion A, B,C; 
    ```

    它与

    ```
    union ABC A, B,C; 
    ```

# r - 使用来自多行的值将函数应用于多行

> ID：15552440
> 
> 赞同：0
> 
> 时间：2013-03-21T16:01:41.247
> 
> 标签：r, apply

我在 R 中创建了以下简单函数：

```
fun    <- function(a,b,c,d,e){b+(c-a)*((e-b)/(d-a))} 
```

我想将此函数应用于`data.frame`看起来像：

```
> data.frame("x1"=seq(55,75,5),"x2"=round(rnorm(5,50,10),0),"x3"=seq(30,10,-5))
  x1 x2 x3
1 55 51 30
2 60 45 25
3 65 43 20
4 70 57 15
5 75 58 10 
```

我想应用`fun`到每个单独的行以创建一个新变量`x4`，但现在困难的部分（至少对我来说......）：对于参数 d 和 e 我想使用下一行的`x2`值`x3`。因此，对于示例的第一行，这意味着：`fun(a=55,b=51,c=30,d=45,e=25)`. 我知道我可以用来`mapply()`对每一行应用一个函数，但我不知道如何告诉 mapply 它应该使用下一行的一些值，或者我是否应该寻找一种不同的方法`mapply()`？

提前谢谢了！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T16:11:32.557

使用`mapply`，但将第四列和第五列移动一行。您可以手动完成，也可以使用`taRifx::shift`.

```
> dat
  x1 x2 x3
1 55 25 30
2 60 58 25
3 65 59 20
4 70 68 15
5 75 43 10
library(taRifx)
> shift(dat$x2)
[1] 58 59 68 43 25
> mapply( dat$x1, dat$x2, dat$x3, shift(dat$x2), shift(dat$x3) , FUN=fun )
[1]    25.00000 -1272.00000   719.00000   -50.14815    26.10000 
```

如果您希望最后一行是 NA 而不是换行，请使用`wrap=FALSE,pad=TRUE`：

```
> shift(dat$x2,wrap=FALSE,pad=TRUE)
[1] 58 59 68 43 NA 
```

# azure - Azure 云服务上的 Cassette.AspNet - 它将如何扩展？

> ID：15552443
> 
> 赞同：0
> 
> 时间：2013-03-21T16:01:52.283
> 
> 标签：azure, asp.net-mvc-4, azure-web-roles, cassette

我搜索并找不到任何对我的问题的引用：在 Azure 云服务中托管 Web 应用程序时使用 Cassette.AspNet 是否安全？

目前我们正在使用它，一切正常，但我们只有一个实例。当我们扩大规模时，我们应该期待什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:05:41.857

看不出这不应该扩展的原因。但是我们从 Cassette 转移到了官方的 Microsoft 优化框架。

[http://remy.supertext.ch/2013/02/extending-the-asp-net-optimization-framework/](http://remy.supertext.ch/2013/02/extending-the-asp-net-optimization-framework/)

使用 MS 的东西通常更容易。

# python - a、b 和 c 的总和而不计算双峰值？

> ID：15552449
> 
> 赞同：0
> 
> 时间：2013-03-21T16:02:04.347
> 
> 标签：python

我正在 CodingBat 上练习 Python。在那里，一个问题是：

> 给定 3 个 int 值 abc，返回它们的总和。但是，如果其中一个值与另一个值相同，则不计入总和。

我的回答是：

```
def lone_sum(a, b, c):
  if a==b:
   return c
  elif a==c:
   return b
  elif b==c:
   return a
  elif a==b and a==c:
   return 0
  else:
   return a+b+c 
```

但是在执行时它显示正常，除了一种情况。那就是`def long_sum(3,3,3)`。但是当我写`if a==b and a==c`第一次检查时，它表明一切正常。

为什么会发生这种情况？为什么我需要`elif a==b and a==c`在第一张支票上写？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:05:10.620

`if`and`elif`语句按顺序执行，并且仅在前面的语句之一不成立时才执行。第一次检查发现`a`和`b`相等，然后返回`c`。如果在某些情况下`a`您`b`不想 return `c`，则需要先捕获这些情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:04:49.840

在这种情况下，您将`c`立即返回，因为`a == b`很满意。您应该将测试从最具体到最不具体重新排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T16:21:51.727

只是一种更 Pythonic 的方式：使用 3 个以上的 args 和 1 个如果：

```
def lone_sum(*args):
    return sum(i for i in args if args.count(i) == 1) 
```

sum 将可迭代作为唯一参数，并将它们全部相加。

我制作了一个发电机，它是一个可迭代的，与

```
i for i in args if args.count(i) == 1 
```

它只给出在列表中只出现一次的 args 的所有元素

# google-maps - 谷歌地方列表迁移到谷歌加业务

> ID：15552451
> 
> 赞同：1
> 
> 时间：2013-03-21T16:02:07.113
> 
> 标签：google-maps, google-plus, google-places

我在 google 地方帐户下有一个商家信息。

谷歌表示，我们仍然可以使用相同的谷歌地方帐户编辑业务。

该企业不再出现在谷歌地图上，找不到它，这是正确的，因为列表显示 0 次展示/操作。

我应该怎么办？是否存在某种迁移以创建 google+ 页面？如何？找不到。只需忽略该列表并在 google+ for business 中重新开始？

我在互联网上找到的信息各不相同。

你说的话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:49:01.523

完成此任务有多种途径。最好的可能是使用[Google Places 仪表板](http://www.google.com/local/add/businessCenter)

您可以使用该工具添加或编辑商家信息、验证所有权以及使商家出现在地图上。

此外，您可以为您的企业[创建一个 Google+ 信息页](https://plus.google.com/pages/create)，这对 Google+ 本地和地图中的 Google+ 用户都有帮助。选择**本地商户或地点**选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:29:35.403

您可以通过创建帐户访问 Google 地方信息仪表板。还有许多其他在线业务目录，您可以在其中列出您的业务。最好的在线商业目录[在这里](http://www.dexberry.com/)

# node.js - 在 node.js/express.js 中保留经常使用的常用功能的最佳做法是什么？

> ID：15552454
> 
> 赞同：0
> 
> 时间：2013-03-21T16:02:11.233
> 
> 标签：node.js, express

我正在使用 node.js 和 express.js 创建 Web 应用程序。我想保留功能，经常需要在单独的文件/模块中。在多个脚本文件/路由中组织/创建常用功能的最佳方法/实践是什么？

提前致谢。

# ios - Xcode 测试方案脚本

> ID：15552461
> 
> 赞同：0
> 
> 时间：2013-03-21T16:02:37.153
> 
> 标签：ios, xcode

我正在尝试更改单元测试的各种属性，以便在实际运行应用程序时注入的已知设置不会干扰各种设置（特别是钥匙串，但也可能是捆绑标识符）

（我设想这样做的方式是根据plist 中`kSecAttrAccessGroup`的条目使用不同的单元测试。）`KeyChainService`

我还打算将此脚本与`AppCode`.

问题是我找不到任何地方放置脚本（或任何变量），这将在任何测试阶段之前发生的构建阶段覆盖正常的预操作脚本。

我的 bash 脚本如下：

```
 plist="${PROJECT_DIR}/${INFOPLIST_FILE}" 
 if [[ "${plist}" == "/" ]]; then
   # AppCode (no variables set)
   plist=./myProject-Info.plist
 fi
 if [[ -z "$csKeyChain" ]]; then
     csKeyChain=RUN
 fi
 if [[ -z "$bundleIdentifier" ]]; then
    bundleIdentifier=com.mycompany.abc
 fi

 echo "Setting KeyChainService to $csKeyChain; CFBundleIdentifier to $bundleIdentifier" > ~/BUILD.txt
 /usr/libexec/Plistbuddy -c "Set KeyChainService $csKeyChain" "${plist}"
 /usr/libexec/Plistbuddy -c "Set CFBundleIdentifier $bundleIdentifier" "${plist}" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:46:57.540

我最终解决共享钥匙串问题的方式如下：

为设置“KeyChainIdentifier”属性的 KeyChain 创建了一个单例包装器帮助器类。这将用于在 KeyChain 中放置值时为每个不同的环境设置唯一的 kSecAttrService。

IE，

```
static CSKeyChain *instance;

+ (void)initialize {
    static BOOL initialized = NO;
    if (!initialized) {
        initialized = YES; {
            NSString *keyChainIdentifier = [[[NSBundle mainBundle] infoDictionary] objectForKey:@"KeyChainIdentifier"];
            instance = [[CSKeyChain alloc] initWithKeyChainIdentifier:keyChainIdentifier];
        }
    }
} 
```

然后在我添加的单元测试 setUp() 函数中

```
 [CSKeyChain setValue:@"csTest" forKeyPath:@"instance.keyChainIdentifier"]; 
```

我唯一做的另一件事是确保在使用证书 (kSecAttrKeyTypeRSA) 时，kSecAttrApplicationTag 前面有 keyChainIdentifier。

因此，我将能够运行不会干扰应用程序正常运行的单元测试，此外，通过更改 keyChainIdentifier 和 BundleIdentifier，我将能够在同一设备上为不同环境运行应用程序。繁荣！

# c# - 从列表视图项中获取文本

> ID：15552465
> 
> 赞同：3
> 
> 时间：2013-03-21T16:02:39.600
> 
> 标签：c#, visual-studio-2012, xamarin

我有一个`listview`存储语音识别结果的：

```
voice_list.ItemClick += delegate(object sender, 
    Android.Widget.AdapterView.ItemClickEventArgs args) 
    { 
        Toast.MakeText(this, "test", ToastLength.Long).Show(); 
    }; 
```

如何获取项目中的文本？例如，当我说“不”时，它会识别（现在，知道，你知道....）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:21:34.753

你已经包含了几个可以使用的`ItemClickEventArgs`好属性，其中一个特别有用`Position`。这为您提供了您单击的项目的`Position`in `ListView`，它对应于您传递给`Adapter`您正在使用的数据集中的项目的相同位置。

因此，在您的`ItemClick`事件处理程序中，您可以执行以下操作：

```
var item = _adapter.GetItem(args.Position); 
```

之后您可能必须施放该物品。

# javascript - 在 HTML 5 中上传之前调整图像大小

> ID：15552470
> 
> 赞同：4
> 
> 时间：2013-03-21T16:02:44.210
> 
> 标签：javascript, jquery, image-processing, html5-canvas

在将图像上传到服务器之前，我正在尝试调整文件上传中的图像大小。我找到了一个[不错的插件](https://github.com/gokercebeci/canvasResize/blob/master/README.md)，它返回更新图像的 blob，但是我找不到如何将 blob 分配回上传使用的文件对象。

blob 看起来像：data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQAB .....

```
 var file = e.target.files[0];
        canvasResize(file, {
            width: 300,
            height: 0,
            crop: false,
            quality: 80,
            //rotate: 90,
            callback: function (data, width, height) {
                // How to assign the data blob back to the file?
                //$(file).attr('src', data);

             // THEN submit with the smaller photo   
             $('#PhotoForm').ajaxSubmit(options);
            }
        }); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:30:23.120

如果您仍然坚持使用 canvasResize，那么还有很多其他的图像处理库。我以前使用过 Pixastic 效果很好，尽管它的开销比 canvasResize 大。不过，它有[更好的文档记录](http://www.pixastic.com/lib/docs/#basic)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:20:53.413

我最终只是将 blob 添加到表单中的隐藏字段并提交。将其保存为 C# 中的图像是通过以下方式完成的：

```
 var regex = new Regex(@"data:(?<mime>[\w/]+);(?<encoding>\w+),(?<data>.*)", RegexOptions.Compiled);
        var match = regex.Match(input.ImageBlob);
        var mime = match.Groups["mime"].Value;
        var encoding = match.Groups["encoding"].Value;
        var data = match.Groups["data"].Value;
        byte[] imagedata = Convert.FromBase64String(data);

        Image img = byteArrayToImage(imagedata);

        img.Save("someimagename.jpg"); 
```

# python - 如何从 Linux 服务器 A 上的 Python 连接到 Linux 服务器 B 上的 Progress OpenEdge DB

> ID：15552471
> 
> 赞同：0
> 
> 时间：2013-03-21T16:02:49.040
> 
> 标签：python, progress-4gl, openedge

我正在尝试在“服务器 A”上编写一个 Python 例程，该例程可以从“服务器 B”上的进度（[http://www.progress.com](http://www.progress.com)）数据库中提取数据......可能通过 pyodbc，但我很灵活在 Python 方面。两台服务器都运行 Linux 操作系统。

通过阅读 Progress 文档，远程访问 Progress DB 的唯一方法似乎是在“服务器 A”上安装 Progress ODBC 驱动程序。我想知道是否有任何其他方法可以实现从 Python 到 Progress 的连接，因为我希望避免依赖专有/商业 ODBC 驱动程序（因为我意识到这是一项艰巨的任务，因为 Progress 是专有/商业环境） .

有没有人使用“开放”解决方案实现 Python>Progress 连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:57:32.930

我在 ganimede 中写了一个小的 Python 接口，可以通过那个“替代应用程序服务器”连接[http://www.ganimede.ro/cms/lang/en-us/open-source/ganimede/](http://www.ganimede.ro/cms/lang/en-us/open-source/ganimede/)

jdbc 驱动程序正在使用开放客户端与进度应用程序服务器“对话”，如果您周围有类似的东西，它可以工作，但不允许您直接连接到数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T15:44:27.667

如果使用 jython 没有问题，您也可以尝试使用 jdbc 连接数据库。这将让您直接连接到数据库。

# java - 一些 Java 7 警告 - 如何删除它们

> ID：15552476
> 
> 赞同：6
> 
> 时间：2013-03-21T16:02:58.357
> 
> 标签：java, netbeans, compiler-warnings

我终于开始尝试摆脱 Java 7 友好生成的所有那些新的编译器警告。我这两个离开了我无法理解的。有什么方法可以在不压制它们的情况下摆脱它们？

构造一个泛型对象数组（我可以在哪里放置一个数组创建？）：

```
 static final int N = 10;
//warning: [unchecked] unchecked conversion
  static final Set<Widget>[] queued = new ConcurrentSkipListSet[N];
//required: Set<Widget>[]
//found:    ConcurrentSkipListSet[] 
```

通用可变参数（似乎几乎在我接受通用类型可变参数的所有地方都会发生）：

```
class Foo<T> {
//warning: [unchecked] Possible heap pollution from parameterized vararg type T
  public void add(T... entries) {
//where T is a type-variable:
//T extends Object declared in class Foo 
```

顺便说一句：我已经有：

```
 // Add many entries to the list.
  public void add(List<T> entries) {
    // ...
  }

  // Add a number of entries.
  public void add(T... entries) {
    // Make a list of them.
    add(Arrays.<T>asList(entries));
  } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T16:05:48.273

对于第一个：

```
static final Set<Widget>[] queued = new ConcurrentSkipListSet<>[N]; 
```

在 Java 7 之前，它必须是：

```
static final Set<Widget>[] queued = new ConcurrentSkipListSet<Widget>[N]; 
```

但是，您最好将其声明为`ArrayList<Set<Widget>>`. 通常，在 Java 中混合数组和泛型有点困难。

```
static final List<Set<Widget>> queued = new ArrayList<>();
// or new ArrayList<Set<Widget>>(); 
```

关于第二个，请参阅[此线程](https://stackoverflow.com/questions/11185774/java-1-7-varargs-function-reported-as-unchecked-warning)。尽管您可以隐藏该消息，但它实际上是在警告真正的危险。该线程的底线是安全的做法是将您的方法签名（和相应的调用）更改为：

```
class Foo<T> {
    public void add(List<T> entries) {
        . . . 
```

这个问题与第一个问题基本相同：您不应该创建泛型数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T16:10:44.287

要解决第二个问题，您需要添加[`@SafeVarargs`](http://docs.oracle.com/javase/7/docs/api/java/lang/SafeVarargs.html)到方法声明中。

从[javadocs](http://docs.oracle.com/javase/7/docs/api/java/lang/SafeVarargs.html)，这是：

> 程序员断言带注释的方法或构造函数的主体不会对其 varargs 参数执行潜在的不安全操作。将此注释应用于方法或构造函数会抑制有关不可具体化变量 arity (vararg) 类型的未经检查的警告，并抑制有关在调用站点创建参数化数组的未经检查的警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T16:11:36.120

关于通用可变参数警告：

*   [https://stackoverflow.com/a/11195950/1172714](https://stackoverflow.com/a/11195950/1172714)
*   [http://docs.oracle.com/javase/tutorial/java/generics/nonReifiableVarargsType.html#vulnerabilities](http://docs.oracle.com/javase/tutorial/java/generics/nonReifiableVarargsType.html#vulnerabilities)
*   [泛型可变参数警告](https://stackoverflow.com/q/4257883/1172714)
*   [Java 泛型和可变参数](https://stackoverflow.com/q/3096708/1172714)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T17:52:17.943

通用数组创建：

```
static final ConcurrentSkipListSet<Widget>[] queued = newArray(N);
// note: declare the most specific type for private objects

@SafeVarargs
static <E> E[] newArray(int length, E... array)
{
    return Arrays.copyOf(array, length);
} 
```

它是如何工作的 - 因为`newArray`是一个可变参数方法，`E[] array`所以必须传入一个参数，因此方法体可以访问`E[]`. 这在理论上是正确的，如果没有擦除，它将在运行时完全是类型安全的。通过擦除，我们只`E[]`在运行时擦除了 的类型，这很好，我们也返回相同的擦除类型。

# python - 在 zip 文件上分发大量文件的最佳方法

> ID：15552483
> 
> 赞同：0
> 
> 时间：2013-03-21T16:03:29.117
> 
> 标签：python, hadoop, distributed-computing, zeromq

我在分布式计算方面没有太多经验，但我想在 python 中创建一个脚本来将解压缩作业集中分发到 x 台服务器，从而使我免于经常登录多个服务器并在文件共享上分发解压缩作业的麻烦。

什么是此类任务的最佳工具，我想在未来使用 hadoop，但我知道的不够多，我认为这可能不是这项工作的正确工具。我看过一些类似的帖子暗示 zeromq。只是在寻找什么工具最适合这样的工作的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:14:09.160

当您解压缩文件时，I/O 限制通常会成为问题，而不是 CPU。因此，登录到多个服务器以解压缩同一共享上的文件只会插入托管该共享的（文件）服务器的网络连接。

另一方面，如果您尝试在不同的服务器上解压缩**相同**的文件，则根本不需要 python。查看[`pssh`](http://www.theether.org/pssh/)命令及其亲属。

# python - 无法从我的数据库中为我的 tkinter GUI 检索数据

> ID：15552486
> 
> 赞同：0
> 
> 时间：2013-03-21T16:03:46.623
> 
> 标签：python, database, user-interface, python-2.7, tkinter

它不允许我从我的数据库访问我的提示，出现错误。

代码：

```
def do_question(self):
self.func1()
#myGlobal + 1
if myGlobal >5:
    import MathsvadersReal

SQL = 'SELECT * FROM tblQuestion'
cursor = Databaseconnector.SELECT(SQL)
rows = cursor.fetchall()
random_row = random.choice(rows)

print random_row.QuestionID, random_row.Question, random_row.Hint, random_row.A1, random_row.A2, random_row.A3, random_row.A4, random_row.CorrectAnswer

# create welcome label
self.label1 = Tkinter.Label(self, bg ='yellow', text = (random_row.Question))
self.label1.grid(row = 0, column = 6, columnspan = 2, sticky = 'E')

self.label111 = Tkinter.Label(self, bg ='red', text = (random_row.QuestionID))
self.label111.grid(row = 0, column = 1, columnspan = 4, sticky = 'W') 
```

提示代码：

```
 def homepage_link(self):
    SQL = 'SELECT Hint FROM tblQuestion WHERE QuestionID = %s' % self.label111
    cursor = Databaseconnector.SELECT(SQL)
    rows = cursor.fetchall()
    tkMessageBox.showinfo("Hint", rows[0]['Hint']) 
```

错误：

IndexError：列表索引超出范围

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:56:37.230

You are passing the string representation of the widget instead of the `text` option. The first line of `homepage_link` should be:

```
SQL = 'SELECT Hint FROM tblQuestion WHERE QuestionID = %s' % self.label111['text'] 
```

# javascript - 来自已解析 XML 的带有信息框的多个地图标记

> ID：15552487
> 
> 赞同：0
> 
> 时间：2013-03-21T16:03:47.547
> 
> 标签：javascript, google-maps-api-3, xml-parsing, google-maps-markers

我知道我已经很接近解决这个问题了，我只需要朝着正确的方向努力。我正在从具有标记位置和一些其他数据的数据库生成 XML，这些数据应在单击时显示在信息框中。我正确生成 XML 并正确绘制标记。我的问题在于信息框。我的信息框显示放置的最后一个标记的数据。我创建了一个存储一条数据（名称）的数组，但信息框仍然只显示最后一个标记的信息。一旦我弄清楚如何正确显示 NAME，我就可以继续为其余数据创建数组。这是我的代码以进一步解释：

```
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <link href="styles.css" rel="stylesheet" type="text/css">
    <script type="text/javascript"src="https://maps.googleapis.com/maps/api/js?     key=MY_KEY&sensor=true"></script>
    <script type="text/javascript" src="infobox.js"></script>
    <script type="text/javascript">

var mapstyle = [styles-removed-for-space]

var icon = 'mapicon.png';

//<![CDATA[

function load() {
  var map = new google.maps.Map(document.getElementById("map"), {
    center: new google.maps.LatLng(10,-10),
    zoom: 3,
    minZoom: 3,
    disableDefaultUI: true,
    styles: mapstyle,
    mapTypeId: 'roadmap'
  });

  var name = [];

  downloadUrl("genxml.php", function(data) {
    var xml = data.responseXML;
    var places = xml.documentElement.getElementsByTagName("place");
    for (var x = 0; x < places.length; x++) {
      var getname = places[x].getAttribute("name");
      name.push(getname);
      var address = places[x].getAttribute("address");
      var point = new google.maps.LatLng(
          parseFloat(places[x].getAttribute("lat")),
          parseFloat(places[x].getAttribute("lng")));
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: icon,
        title: getname
      });

      var boxText = document.createElement("div");
      boxText.id = "infobox"
      boxText.style.cssText = " margin-top: 8px; background: white; padding: 5px;";
      boxText.innerHTML = name[x];

      var myOptions = {
         content: boxText
        ,disableAutoPan: false
        ,maxWidth: 0
        ,pixelOffset: new google.maps.Size(-250, -173)
        ,zIndex: null
        ,boxStyle: { 
          background: "url('http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/examples/tipbox.gif') no-repeat"
          ,opacity: 0.75
          ,width: "500px"
          ,height: "300px"
          ,textAlign: "center"
         }
        ,closeBoxMargin: "13px 5px 0px 0px"
        ,closeBoxURL: "http://www.google.com/intl/en_us/mapfiles/close.gif"
        ,infoBoxClearance: new google.maps.Size(1, 1)
        ,isHidden: false
        ,pane: "floatPane"
        ,enableEventPropagation: false
        };

      var ib = new InfoBox(myOptions);

      google.maps.event.addListener(marker, 'click', function(e) {
        map.setZoom(13);
        map.setCenter(this.getPosition());
        ib.open(map, this);
      });

    }

  });
}

function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

function doNothing() {}

//]]>

</script>

</head>

    <body onload="load()">
       <div id="map" style="width:100%; height:100%"></div>
    </body>
</html> 
```

我相信我忽略了一些简单的事情。任何帮助，将不胜感激。非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:13:24.277

未测试：

```
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <link href="styles.css" rel="stylesheet" type="text/css">
    <script type="text/javascript"src="https://maps.googleapis.com/maps/api/js?     key=MY_KEY&sensor=true"></script>
    <script type="text/javascript" src="infobox.js"></script>
    <script type="text/javascript">

var mapstyle = [styles-removed-for-space]

var icon = 'mapicon.png';

//<![CDATA[

function load() {
  var map = new google.maps.Map(document.getElementById("map"), {
    center: new google.maps.LatLng(10,-10),
    zoom: 3,
    minZoom: 3,
    disableDefaultUI: true,
    styles: mapstyle,
    mapTypeId: 'roadmap'
  });

  var name = [];

  downloadUrl("genxml.php", function(data) {
    var xml = data.responseXML;
    var places = xml.documentElement.getElementsByTagName("place");
    for (var x = 0; x < places.length; x++) {
      var getname = places[x].getAttribute("name");
      name.push(getname);
      var address = places[x].getAttribute("address");
      var point = new google.maps.LatLng(
          parseFloat(places[x].getAttribute("lat")),
          parseFloat(places[x].getAttribute("lng")));
      createMarker(point, address, getname, name);
    }

  });
}

function createMarker(point, address, getname, name) {
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: icon,
        title: getname
      });

      var boxText = document.createElement("div");
      boxText.id = "infobox"
      boxText.style.cssText = " margin-top: 8px; background: white; padding: 5px;";
      boxText.innerHTML = name[x];

      var myOptions = {
         content: boxText
        ,disableAutoPan: false
        ,maxWidth: 0
        ,pixelOffset: new google.maps.Size(-250, -173)
        ,zIndex: null
        ,boxStyle: { 
          background: "url('http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/examples/tipbox.gif') no-repeat"
          ,opacity: 0.75
          ,width: "500px"
          ,height: "300px"
          ,textAlign: "center"
         }
        ,closeBoxMargin: "13px 5px 0px 0px"
        ,closeBoxURL: "http://www.google.com/intl/en_us/mapfiles/close.gif"
        ,infoBoxClearance: new google.maps.Size(1, 1)
        ,isHidden: false
        ,pane: "floatPane"
        ,enableEventPropagation: false
        };

      var ib = new InfoBox(myOptions);

      google.maps.event.addListener(marker, 'click', function(e) {
        map.setZoom(13);
        map.setCenter(this.getPosition());
        ib.open(map, this);
      });
}

function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

function doNothing() {}

//]]>

</script>

</head>

    <body onload="load()">
       <div id="map" style="width:100%; height:100%"></div>
    </body>
</html> 
```

# php - 创建一个允许用户输入数据的 PHP 文件，然后将其添加到我的数据库中

> ID：15552492
> 
> 赞同：-6
> 
> 时间：2013-03-21T16:03:51.023
> 
> 标签：php, html, database, phpmyadmin

我正在尝试创建一个 php 文件，该文件将允许“客户”向其中添加信息，并且在添加和提交该信息时，应将信息添加到我的数据库中。但是，经过几次尝试，我无法将数据输入数据库。

这是用户能够查看表单的代码...

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Payment</title>
  <link rel="stylesheet" type="text/css" href="styleshoppingcart.css"/>
</head>
<body>
  <p>Please Enter The Following Details</p>

   <form method="post" action="outputty.php">
     <p>
    <label>Name:<input name="name" type="text"/></label>
     </p>
     <p>
            <label>Last Name:<input name="lastname" type="text"/></label>
     </p>
     <p>
            <label>Card Type:<input name="cardtype" type="text"/></label>
     </p>
     <p>
            <label>Card Number:<input name="cardnumber" type="text"/></label>
     </p>
     <p>
            <label>Expiry Date:<input name="expiry" type="text"/></label>
     </p>
     <p>
            <label>Door Number Date:<input name="doornumber" type="text"/></label>
     </p>
     <p>
            <label>Post Code:<input name="postcode" type="text"/></label>
     </p>
     <p>
        <input type="submit" value="Submit Form"/>
        <input type="reset" value="Clear Entries"/>
     </p>
  </form>
 </body>
 </html> 
```

这是 PHP 文件的代码，它应该允许将数据输入到数据库中。

```
 <?xml version=\"1.0\" encoding=\"utf-8\"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>NBA Memorabilia | Orders</title>
  <link rel="stylesheet" type="text/css" href="styleshoppingcart.css"/>
</head>

<body>
  <h2>Orders</h2>

<?php
     //Connect to database
     $location = "localhost";
     $username = "********";
     $password = "********";
     $database = "db?k1009076";
     $conn=@mysql_connect("$location","$username","$password");
     if (!$conn) die ("Error: Could not connect to database server.");
     @mysql_select_db($database,$conn) or die ("Error: Could not open database.");
     extract($_POST);
     if (isset($name))
     {
        //Add new comment to database
        @mysql_query("CREATE TABLE order (name VARCHAR(65),lastname VARCHAR(65),
                     cardtype VARCHAR(8), cardnumber VARCHAR(16),   expiryVARCHAR(4),doornumber VARCHAR(10), postcode VARCHAR(10) )");
        $insert = "INSERT INTO order (name,lastname, cardtype, cardnumber, expiry, doornumber, postcode) 
                   VALUES ('$name','$lastname','$cardtype', '$cardnumber', '$expiry','$doornumber','$postcode')"; 
        @mysql_query($insert) or die ("Could not add data to the table"); 
     }

     //Close connection to server
     @$disconn=mysql_close($conn);
     if (!$disconn) die ("Error: Unable to disconnect from database server.");
  ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:14:52.847

最重要的是，存储信用卡信息不仅是一个可怕的坏主意（尤其是在没有任何加密的情况下），而且还违反[PCI 安全标准](https://www.pcisecuritystandards.org/security_standards/documents.php)，如果您想要实际处理这些您存储很长时间的数字，这将是一个问题.

其次，该代码易受[SQL 注入](https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet)攻击，在这种情况下，不仅会危及一般用户的数据和交易，还会危及他们的信用卡号码。

如果您不了解信息安全最佳实践和 SQL 数据和/或最终用户财务详细信息的正确编码标准，请不要出于商业相关原因构建 Web 应用程序。

但要回答您的整体问题，您必须将 $_POST 数据传递到您的数据库，例如 $lastname -> $_POST['lastname'] 在您的语句中。但同样，不要只传递这些数据，或者至少使用参数化查询和一些使用正则表达式或其他方法的完整性检查来防止 SQL 注入，如我之前的链接中所述。

# css - 同时使用 :after 和 :hover

> ID：15552496
> 
> 赞同：7
> 
> 时间：2013-03-21T16:04:04.147
> 
> 标签：css, css-selectors, pseudo-element, pseudo-class, css-content

是否可以仅`:after`使用显示伪`:hover`？例如使用替代元素。

```
#parent{}
#child{display:none;}
#parent:hover >#child{display:block;} 
```

据我使用相同的方法：

```
#parent{}
#parent:after{content:'hi';display:none;}
#parent:hover  #parent:after{display:block;} 
```

有可能吗？还是我在自欺欺人？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T16:05:48.617

您可以将两者结合起来：

```
#parent:hover:after {
    content:'hi';
} 
```

[JSF](http://jsfiddle.net/Vqb8m/)中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T16:06:33.070

是的。不知道你为什么不自己尝试，但有可能：

```
#parent:hover:after{content:'hi';} 
```

[http://jsfiddle.net/uz3w4/](http://jsfiddle.net/uz3w4/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-21T16:06:01.347

是的，您当然可以：

[**演示**](http://jsfiddle.net/ujtyb/)

```
<a href="#">Demo</a>

a:hover:after {
    content: 'blah';
} 
```

# c# - 反应式扩展计时器

> ID：15552498
> 
> 赞同：2
> 
> 时间：2013-03-21T16:04:07.557
> 
> 标签：c#, system.reactive

我有一个哈希集。有时，新值会添加到此哈希集中。我想要做的是让计时器在添加后一分钟从集合中删除每个元素。

我还是 rx 的新手，但这似乎是使用它的理想场合。

我试过这样的事情：

```
AddItem(string item)
{
  _mySet.Add(item);
  var timer = Observable.Timer(TimeSpan.FromSeconds(60), _scheduler);
  timer
      .Take(1)
      .Do(item => RemoveItem(item))
      .Subscribe(_ => Console.WriteLine("Removed {0}", item));
} 
```

它似乎工作正常（通过单元测试）。

有人认为这种方法有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T20:11:19.200

1.  您在调用中的 lambda`Do`看起来不正确 -`Observable.Timer`产生 int 值，但您的集合是`HashSet<string>`- 这不应该编译。我猜这只是一个错字。

2.  `Do`: 一般来说，您的订阅应该在`Subscribe`. `Do`用于副作用（我不喜欢流中副作用的想法，所以我避免使用它，但它对调试很有用）。

3.  `Take`:`Observable.Timer`在终止前只产生一个值，因此不需要`Take`操作符

我会把你的函数写成：

```
AddItem(string item)
{
    _mySet.Add(item);
    Observable.Timer(TimeSpan.FromSeconds(60), _scheduler)
        .Subscribe(_ => RemoveItem(item));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T15:45:20.413

您无需创建序列即可执行此操作。您已经是一个好公民并明确使用调度程序，所以只需使用它！

您可以将其用于您的代码

```
AddItem(string item)
{
  _mySet.Add(item);
  //Note this does return an IDisposable if you want to cancel the subscription.
  _scheduler.Schedule(
    TimeSpan.FromSeconds(60),
    ()=>
    { 
        RemoveItem(item);
        Console.WriteLine("Removed {0}", item);
    });
} 
```

这基本上意味着幕后工作要少得多。考虑一下 Observable.Timer 方法正在进行的所有工作，实际上您只希望它做的只是安排一个带有值（您忽略）的 OnNext。

我还假设即使对 Rx 一无所知的用户也能够阅读此计划代码。IE。“添加此项目后，我安排此删除操作在 60 秒内运行）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T20:06:11.940

如果你使用的是 ReactiveUI，一个名为的类`ReactiveCollection`在这里肯定会有所帮助，你可以像这样使用它：

```
theCollection.ItemsAdded
    .SelectMany(x => Observable.Timer(TimeSpan.FromSeconds(60), _scheduler).Select(_ => x))
    .Subscribe(x => theCollection.Remove(x)); 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-21T16:25:43.413

对不起，不是要挑剔你，但是：

**总是丢弃 IDISPOSABLES!!!!!!**

（编辑：好的，不知道今天早上我在咖啡里放了什么，但我回答了一大堆废话；我会留下上面的只是因为*总的来说*，你确实想确保处理任何东西`IDisposable`，但是为了弥补接下来的喋喋不休......）

~~该调用`Subscribe`创建了一个您不会处理的订阅，因此对该方法的多次调用只会排队越来越多的垃圾 - 现在在这种特定情况下，它不是世界末日，因为`Timer`唯一触发一次，但仍然...处置！~~

~~如果你真的想使用这种方法（我认为更好的方法是让一些正在运行的线程/任务“倾向于”你的值，当它认为有必要时删除它），至少尝试类似于：~~

好吧，忽略所有那些被淘汰的废话。的实现`Observable.Timer`是这样的：

```
public static IObservable<long> Timer(TimeSpan dueTime)
{
    return s_impl.Timer(dueTime);
} 
```

这反过来又调用了这个：

```
public virtual IObservable<long> Timer(TimeSpan dueTime)
{
    return Timer_(dueTime, SchedulerDefaults.TimeBasedOperations);
} 
```

这叫...

```
private static IObservable<long> Timer_(TimeSpan dueTime, IScheduler scheduler)
{
    return new Timer(dueTime, null, scheduler);
} 
```

这就是事情变得有趣的地方 -`Timer`是 a `Producer<long>`，肉味的地方是：

```
private IDisposable InvokeStart(IScheduler self, object state)
{
    this._pendingTickCount = 1;
    SingleAssignmentDisposable disposable = new SingleAssignmentDisposable();
    this._periodic = disposable;
    disposable.Disposable = self.SchedulePeriodic<long>(1L, this._period, new Func<long, long>(this.Tock));
    try
    {
        base._observer.OnNext(0L);
    }
    catch (Exception exception)
    {
        disposable.Dispose();
        exception.Throw();
    }
    if (Interlocked.Decrement(ref this._pendingTickCount) > 0)
    {
        SingleAssignmentDisposable disposable2 = new SingleAssignmentDisposable {
            Disposable = self.Schedule<long>(1L, new Action<long, Action<long>>(this.CatchUp))
        };
        return new CompositeDisposable(2) { disposable, disposable2 };
    }
    return disposable;
} 
```

现在，`base._observer.OnNext`，这是设置为在计时器滴答声上触发的内部接收器，其中`Invoke`on 是：

```
private void Invoke()
{
    base._observer.OnNext(0L);
    base._observer.OnCompleted();
    base.Dispose();
} 
```

所以是的。它会自动处理自己 - 并且不会有任何“挥之不去的订阅”浮动。

嗯……乌鸦很好吃。:|

# c++ - C++ 项目中未定义 NORMAL_PRIORITY_CLASS

> ID：15552500
> 
> 赞同：0
> 
> 时间：2013-03-21T16:04:07.580
> 
> 标签：c++, visual-studio-2008, process

你好 SOF C++ 程序员 :)

**问题**：一个所谓的内置常量在编译时没有被识别，而它应该被识别。常量是，在这里引用`NORMAL_PRIORITY_CLASS`的函数中使用：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)`CreateProcess`

**上下文**：有这个软件，我没有写，我需要构建和运行。它是用我不知道的编程语言 C++ 编写的，并且是从 Visual Studio 2008 构建/运行的。而且我没有编写该软件。我已经在 4 周前演示了该软件，用于知识转移：如何在 XP PC 上为另一台设备（嵌入式设备）使用 Visual Studio 2008 构建它，以及如何在运行后使用它。所以当时一切都很好，这就是为什么我假设问题不是来自源代码（但也许确实如此）。现在，给定相同的代码库，我需要自己构建并运行它。当我在 VS2008 上构建它时，我得到了这个错误：

`error C2065: 'NORMAL_PRIORITY_CLASS' : undeclared identifier`

由此函数调用触发：

`CreateProcess(this->ApplicationName, szr, NULL, NULL, FALSE, NORMAL_PRIORITY_CLASS, NULL, NULL, &sui, &processInfo)`

where`szr`被定义为：

`TCHAR * szr = (TCHAR *)((*it).commandLine).c_str();`

我用谷歌搜索了周围的东西，据我了解，这个常量`NORMAL_PRIORITY_CLASS`是内置的。这个链接上的文档（[http://msdn.microsoft.com/en-us/library/windows/desktop/ms685100%28v=vs.85 %29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685100%28v=vs.85%29.aspx)）读取：`By default, the priority class of a process is NORMAL_PRIORITY_CLASS`

所以这不是程序员为自己的目的定义的常量。类中加载的库是：

```
 #include <windows.h>
    #include <fstream>
    #include <tchar.h>
    #include <iostream>
    #include <stdio.h>
    #include <stdlib.h> 
```

以及其他一些海关“header.h”文件，写在源代码中（VS2008中的头文件目录）。

关于什么可能导致问题的任何想法，或者我应该尝试什么来减少可能的问题列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:12:54.623

你说你正在为嵌入式系统构建。[Windows Embedded 不支持优先级类](http://msdn.microsoft.com/en-us/library/ee488350.aspx)，因此在该编译环境中未定义优先级类常量。

# backbone.js - 使用 MarionetteJs 实现双重（服务器端）渲染的最佳方法是什么？

> ID：15552502
> 
> 赞同：1
> 
> 时间：2013-03-21T16:04:24.597
> 
> 标签：backbone.js, marionette

我可以使用 MarionetteJs 实现以下工作流程：

1.  用户通过 URL 打开网站
2.  服务器生成 HTML + JSON 数据
3.  MarionetteJs 读取 JSON 数据并“附加”到生成的 HTML。所以它不会重新渲染模板。
4.  用户做某事 -> MarionetteJs 更新 DOM，发送服务器请求等

所以对我来说主要问题是 3 - 附加点。使用 MarionetteJs 实现双重渲染的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T21:17:50.277

这是尚未融入木偶的东西。我已经看到许多其他人为 Backbone 解决了这个问题，考虑到他们的解决方案可能很容易。

不过，希望有人会为您解答。我很想看到一个附加组件或插件，或者为此向项目提出请求。

# mysql - 某些价格范围之间的 MySQL 计数列表

> ID：15552505
> 
> 赞同：1
> 
> 时间：2013-03-21T16:04:31.780
> 
> 标签：mysql, count, range, between

从网站上的另一篇文章中，我进行了以下类型的查询。他们使用总和，我正在寻找列表的计数。

```
SELECT
COUNT(IF(sold_price < 20,1,0)) as 'Under 20',
COUNT(IF(sold_price BETWEEN 20 and 50,1,0)) as '20 - 50',
COUNT(IF(sold_price BETWEEN 50 and 100,1,0)) as '50 - 100',
COUNT(IF(sold_price BETWEEN 100 and 250,1,0)) as '100 - 250',
COUNT(IF(sold_price BETWEEN 250 and 500,1,0)) as '250 - 500',
COUNT(IF(sold_price BETWEEN 500 and 1000,1,0)) as '500 - 1000',
COUNT(IF(sold_price BETWEEN 1000 and 2000,1,0)) as '1000 - 2000',
COUNT(IF(sold_price > 2000,1,0)) as 'Over 2000'
FROM listings
where current_batch = 'Y' 
```

我所有的结果都以相同的数字返回

```
Under 20    20 - 50 50 - 100    100 - 250   250 - 500   500 - 1000  1000 - 2000 Over 2000
94665   94665   94665   94665   94665   94665   94665   94665 
```

有没有人对表演有任何建议，或者如果这可以通过计数来完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:09:33.290

MySQL 文档说明如下（[http://dev.mysql.com/doc/refman/5.1/en/group-by-functions.html#function_count](http://dev.mysql.com/doc/refman/5.1/en/group-by-functions.html#function_count)）：

`COUNT(expr) Returns a count of the number of non-NULL values of expr in the rows retrieved by a SELECT statement`

所以替换：

```
IF(sold_price BETWEEN 20 and 50,1,0) 
```

经过

```
IF(sold_price BETWEEN 20 and 50,1,NULL) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T18:53:15.877

在查询中使用 SUM 而不是 COUNT，例如：

```
SELECT
SUM(CASE WHEN our_price <= 10000 THEN 1 ELSE 0 END) AS p10000,
SUM(CASE WHEN our_price >= 10001 AND our_price <= 25000 THEN 1 ELSE 0 END) AS p25000,
SUM(CASE WHEN our_price >= 25001 AND our_price <= 50000  THEN 1 ELSE 0 END) AS p50000,
SUM(CASE WHEN our_price >= 50001 AND our_price <= 75000  THEN 1 ELSE 0 END) AS p75000,
SUM(CASE WHEN our_price >= 75001 AND our_price <= 100000  THEN 1 ELSE 0 END) AS p100000,
SUM(CASE WHEN our_price >= 100001 AND our_price <= 150000  THEN 1 ELSE 0 END) AS p150000,
SUM(CASE WHEN our_price >= 151000 AND our_price <= 200000  THEN 1 ELSE 0 END) AS p200000,
SUM(CASE WHEN our_price > 200000 THEN 1 ELSE 0 END) AS p200001
FROM products; 
```

# java - CI Web服务的架构位置

> ID：15552508
> 
> 赞同：0
> 
> 时间：2013-03-21T16:04:39.400
> 
> 标签：java, web-services, soap, peoplesoft

我是 Peoplesoft 的新手，正在尝试使用现有的 CI Web 服务“CI_CURRENCY”。我已按照[此处](http://peoplesoft.wikidot.com/component-interface-based-web-services)提到的步骤进行操作：

这就是模式在 WSDL 中的样子：

```
<wsdl:types>
 <xsd:schema elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:import namespace="http://xmlns.ubs.com/enterprise/Tools/schemas/M615294.V1"  
   schemaLocation="M615294.V1.xsd"/>
  <xsd:import namespace="http://xmlns.ubs.com/enterprise/Tools/schemas/M826465.V1"  
   schemaLocation="M826465.V1.xsd"/>
  <xsd:import namespace="http://xmlns.ubs.com/enterprise/Tools/schemas/M929890.V1" 
   schemaLocation="M929890.V1.xsd"/> 
```

现在，我想从这个 WSDL 文件生成存根。为此，我正在使用 apache 轴。我已将此 wsdl 保存到本地驱动器并执行以下命令 - java org.apache.axis.wsdl.WSDL2Java -o src -p com.test.generated -s Currency.wsdl

但是我收到错误消息，说找不到模式，因为它试图在 wsdl 所在的驱动器中查找模式。我的问题是如何获取生成的 wsdl 中引用的所有模式，或者是否有任何其他方式来生成存根？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:07:11.720

您可以下载 xsd 架构

PeopleTools > Integration Broker > Integration Setup > Messages ，架构在“架构”页面上

或者

[您可以通过SoapUI](http://www.soapui.org/)连接 wsdl 链接。然后，您可以从该工具下载 xsd 文件。

# mysql - MySQL 表：存储效率会影响查找时间吗？

> ID：15552511
> 
> 赞同：-1
> 
> 时间：2013-03-21T16:04:53.350
> 
> 标签：mysql, sql

我们有一些包含 100,000 到 10,000,000 条记录的 MySQL 表。有些字段是 VARCHAR(100)，而实际上没有条目超过 11 个字符。

显然，我们正在使用更多的空间，那么我们应该...

如果我们要精简这些表，并将 VARCHAR 字段减少到适当的大小，它对我们的帮助不仅仅是存储空间吗？它可能会改善查询的查找时间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:11:13.487

我不知道 mysql 实现的细节，但我知道关系数据库的典型实现，并且在那个实现中它确实有帮助。

通常，记录连续存储在称为 RID 表的文件中。RID 表中的记录号（使用基于零的计数）乘以记录大小是文件中存储记录的位置的偏移量。

如果记录大小较小，则 RID 表中的更多记录适合从磁盘获取的磁盘扇区，并且更多记录适合内存。

即使使用不同的实现，较小的记录缓冲区也允许在内存中缓存更多记录，这可以减少磁盘访问次数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T17:05:03.340

从 MySQL 文档[数据类型存储要求](http://dev.mysql.com/doc/refman/5.0/en/storage-requirements.html)开始，varchar 类型存储值如下：

*如果列值需要 0 – 255 个字节，则 L + 1 个字节，如果值可能需要超过 255 个字节，则 L + 2 个字节，其中 L 表示给定字符串值的实际字节长度*

在我看来，如果您的计划是将类型从 VARCHAR(100) 更改为 VARCHAR(11)，它不会影响查询性能，因为 MySQL 已经将值存储在其“最佳”值上。

如果您有 CHAR(100) 类型，则少于 100 个字符的字符串将用空格正确填充，在这种情况下，您的空间消耗会很差，而且我认为查询性能也会很差。

CHAR类型的长度，参考文档，是：

*M × w 字节，0 <= M <= 255，其中 w 是字符集中最大长度字符所需的字节数，其中 M 表示以字符为单位声明的列长度*

但是，如果您的所有记录都具有固定长度 11，您应该使用 CHAR(11)，它将提高查询的存储和性能。

关于字符串存储的另一个重点是指字符集，如文档中所述：

*要计算用于存储特定 CHAR、VARCHAR 或 TEXT 列值的字节数，您必须考虑用于该列的字符集以及该值是否包含多字节字符。特别是，在使用 utf8 Unicode 字符集时，您必须记住，并非所有字符都使用相同的字节数，每个字符最多需要三个字节。*

希望能帮助到你！

# codeigniter - Codeigniter + 教义与 onetomany 对象的奇怪行为

> ID：15552513
> 
> 赞同：2
> 
> 时间：2013-03-21T16:04:55.903
> 
> 标签：codeigniter, doctrine-orm

我刚开始使用 Codeigniter 的 Doctrine。

我有一个名为 Material 的实体，它与另一个名为 elementCombination 的实体之间存在一对一关系。

要检索所有材料，我使用此代码

```
$query = $this->doctrine->em->getRepository('Entities\Material')->createQueryBuilder('m');
$materials = $query->getQuery()->getResult(); 
```

当我使用 getCombination() 函数查找每种材料的元素（ElementCombination 实体）时，对于所有“材料”，我总是得到相同的结果，实际上它看起来像是合并结果，因为一种材料可能比其他材料具有更多的元素。这很奇怪，对我来说。

我通过这样做，重新查询或刷新每种材料的组合来“修复”这个问题：

```
 foreach ($materials as $key => $material)
    {
        $this->doctrine->em->flush();
        $this->doctrine->em->clear();

                    //$m_combination_1 is a ArrayCollection of ElementCombination

        $m_combination_1= $this->doctrine->em->getRepository('Entities\ElementCombination')->findBy(array('material' => $material->getId()));
        $material->setCombination($m_combination_1);
    } 
```

我看到这不是一个好方法，所以，我想知道这种行为是否正常？，我做错了什么？

yml 实体是这样的。

材料

```
Entities\Material:
  type: entity
  table: materials
oneToMany:
  similars:
    targetEntity: Similar
    mappedBy: parent
 combination:
    targetEntity: ElementCombination
    mappedBy: material
 .....

 fields:
   id:
     type: integer
     id: true
     generator:
       strategy: AUTO
..... 
```

和元素组合

```
Entities\ElementCombination:
  type: entity
  table: element_combinations
  manyToOne:
    material:
      targetEntity: Material
      inversedBy: combination
  fields:
    symbol:
      type: string
      length: 3
      nullable: false
      id: true
    maxValue:
      type: decimal
      precision: 6
      nullable: false
      column: max_value
    minValue:
      type: decimal
      precision: 6
      nullable: false
      column: min_value
    avgValue:
      type: decimal
      precision: 6
      nullable: false
      column: avg_value 
```

提前致谢。

**编辑：**

我找到了解决方案（我想）架构是错误的，我已经改成了这个，我可以去掉代码中的很多东西

```
Entities\Material:
  type: entity
  table: materials
  oneToMany:
  similars:
    targetEntity: Similar
    mappedBy: parent
  manyToMany:
   combination:
   targetEntity: ElementCombination
   inversedBy: materials
   cascade: {"remove" , "persist"}
   joinTable:
     name: material_element_combinations
     joinColumns:
       material_id:
         referencedColumnName: id
     inverseJoinColumns:
      element_combination_id:
        referencedColumnName : id
uniqueConstraints:
material_index:
  columns:
    - reference
    - inner_name 
```

对于元素组合

```
Entities\ElementCombination:
  type: entity
  table: element_combinations
  fields:
    id:
      type: integer
      id: true
      generator:
        strategy: AUTO
    symbol:
      type: string
      length: 3
      nullable: false
    maxValue:
      type: decimal
      precision: 6
      nullable: false
      column: max_value
    minValue:
      type: decimal
      precision: 6
      nullable: false
      column: min_value
    avgValue:
      type: decimal
      precision: 6
      nullable: false
      column: avg_value 
```

问候

# c++ - 从 32 位程序启动 64 位进程

> ID：15552514
> 
> 赞同：4
> 
> 时间：2013-03-21T16:05:07.983
> 
> 标签：c++, 64-bit, system, 32-bit

我有一个 32 位程序，我试图在 64 位计算机上运行。我正在运行 vssadmin 命令来获取还原点信息并将其保存到文本文件中。现在，它在我的 32 位计算机上运行良好，我正在我朋友的 64 位计算机上测试它，但它不起作用。

如果我在 64 位系统上运行的 32 位应用程序中使用 system()，它会使用 32 位命令提示符吗？这是我认为唯一会阻止它工作的事情，因为我已经从命令提示符手动运行命令并且它工作正常。

如果是这种情况？有没有强制它使用正确的命令提示符？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T16:10:12.713

在 Linux 和 Windows [我也相信 BSD/MacOS] 中，32 位应用程序可以使用相关的“创建新进程”系统调用来启动 64 位`system()`进程]。

唯一的限制是 32 位可执行文件不能使用 64 位共享库（.so 或 .dll），反之亦然。但是一个新进程首先加载一个新的可执行文件，此时该进程可以是 32 位或 64 位，具体取决于可执行文件本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T17:17:00.013

您应该始终避免使用 system() 因为

*   资源繁重
*   它破坏了安全性——你不知道它是否是一个有效的命令或者在每个系统上都做同样的事情（参见 Mats Petersson 的回答），你甚至可以启动你不打算启动的程序。 **危险在于，当您直接执行程序时，它会获得与您的程序相同的权限——这意味着，例如，如果您以系统管理员身份运行，那么您刚刚无意中执行的恶意程序也会以系统管理员身份运行。如果这不会吓到您，请检查您的脉搏。**
*   防病毒程序讨厌它，您的程序可能会被标记为病毒。

你应该使用[CreateProcess()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)。

您可以使用 Createprocess() 来启动一个 .exe 并为其创建一个新进程。该应用程序将独立于调用应用程序运行。

这是我在一个项目中使用的示例：

```
VOID startup(LPCTSTR lpApplicationName)
{
   // additional information
   STARTUPINFO si;     
   PROCESS_INFORMATION pi;

   // set the size of the structures
   ZeroMemory( &si, sizeof(si) );
   si.cb = sizeof(si);
   ZeroMemory( &pi, sizeof(pi) );

  // start the program up
  CreateProcess( lpApplicationName,   // the path
    argv[1],        // Command line
    NULL,           // Process handle not inheritable
    NULL,           // Thread handle not inheritable
    FALSE,          // Set handle inheritance to FALSE
    0,              // No creation flags
    NULL,           // Use parent's environment block
    NULL,           // Use parent's starting directory 
    &si,            // Pointer to STARTUPINFO structure
    &pi )           // Pointer to PROCESS_INFORMATION structure
    ) 
    // Close process and thread handles. 
    CloseHandle( pi.hProcess );
    CloseHandle( pi.hThread );
} 
```

注意：正如我之前所说，system() 在不同的机器上不会做同样的事情，Mats Petersson 解释了原因

# mongodb - 数据库和搜索专家：多值字段的加权分面搜索，有一个转折

> ID：15552515
> 
> 赞同：1
> 
> 时间：2013-03-21T16:05:08.117
> 
> 标签：mongodb, search, database-design, search-engine, faceted-search

这个问题几乎可以归结为“多面搜索，多个多值字段，按权重排序而不是计数”。

# 数据库

我有大约 1000 万个事件，每个事件都有多个版本，每个版本都由标签描述。有 5 种标签类型（地点、演讲者、参与者、主题、行业）。

```
{
    title: "CES",
    editions: [
        {
            date: "2013-02-01",
            tags: [ {label: "Eric Schmidt", type: "speaker", "popularity": 50}, {label: "Paris", type: "place", "popularity": 30} ]
        },
        {
            date: "2012-01-23",
            tags: [ ... ] 
        }
    ]
} 
```

# 数据逻辑

*   标签是分层的，例如，“Eric Sc​​hmidt”在 Google 下归档，而在 Tech 公司下归档。因此，每当 Eric 参加活动时，所有三个标签都与该活动相关联。
*   不同的标签可以有不同的流行度，这意味着“Eric Sc​​hmidt”的流行度为 100，而“Eileen Naughton”的流行度为“10”。
*   流行度不适用于分层。这意味着，如果“Eric Sc​​hmidt”离开 Google 加入 Foursquare，他的人气仍然是 100，而 Foursquare 的人气仍然是 50。
*   如果在给定时间，我们发现另一个“参与者”参加了，例如，我们需要能够将他添加为标签

# 搜索要求

现在，想象一个包含 4 个部分的左侧菜单：

```
Places
------------
Paris
London
New York
[more]

Speakers
----------
Google
Facebook
Marc Zuckerberg
[more] 
```

等等。

每当用户单击标签时，我希望菜单反映结果并允许他进一步下钻（分面搜索）。不同之处在于，当决定在每个部分的前三个标签中显示“Google”、“Eric Sc​​hmidt”和“Foursquare”时，我想确保最受欢迎的标签显示得更高，基于[匹配事件的数量] * [标签受欢迎程度]。这意味着如果“Foursquare”有 3 个匹配事件，而“Eric Sc​​hmidt”只有一个匹配事件，则它应该首先显示 Foursquare，得分为 3*50 = 150，而施密特的得分为 1 * 100。

另外，理想情况下，如果我选择“谷歌”，那么对于“演讲者”部分，系统不应该返回谷歌之外的演讲者，即使匹配的事件也列出了“扎克伯格”，拥有 200 的巨大人气。所以，返回的标签应位于每个部分中当前选择的“下方”，并且它们的排序应基于上述评分逻辑。

# 当前的 MongoDB 解决方案

## 为每个版本存储一个单独的文档：

```
{
    event: "CES",
    date: "2013-02-01",
    tags: [ {label: "Eric Schmidt", type: "speaker", "popularity": 50, path: ",Tech Companies,Google,"}, {label: "Paris", type: "place", "popularity": 30, path: ",Europe,France,"} ]
},
{
    event: "CES",
    date: "2012-01-23",
    tags: [ ... ] 
} 
```

## 使用聚合框架

**每种标签类型一个查询（每个请求 5 个查询）**

```
db.events.aggregate(
{
    '$match': {'tags.label': {'$all': ["selected tag 1", "selected tag2", ...]}}
},
{
    '$unwind': '$tags'
},
// group by events, so we can later sum each tag's popularity only once per event, not per event edition 
{
    '$group': {
        '_id': '$event', 
        'taglistUnqiue': {
            '$addToSet': {
                'label': '$tags.label', 
                'type': '$tags.type', 
                'popularity': '$tags.popularity'
            }
        }
    }
},
{
    '$unwind': '$taglist'
},
{
    '$match': {
        'taglist.type': "speaker",
        /* haven't tested this path-matching, but it should work 
        to only get the tags that are in the bottom tree 
        of the current selected speaker tag */
        'taglist.path': /^,selected speaker tag,/, 
    }
},
{
    '$group': {
        '_id': '$taglist.label',
        'score': {
            '$sum': '$taglist.popularity'
        }
    }
}); 
```

好的，这在算法上应该可以工作，但在性能方面，它肯定不适用于 50M 事件版本，每个版本都有数千个可能的标签。

谁能想到另一种方法？除了使用我理解的“Map/Reduce”之外，这种方法是否可以通过任何方式进行优化，因为它太慢而无法为每个用户即时执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-14T07:00:16.930

根据您的搜索需要的“实时”程度，您是否考虑过使用增量映射/减少？

[http://docs.mongodb.org/manual/tutorial/perform-incremental-map-reduce/](http://docs.mongodb.org/manual/tutorial/perform-incremental-map-reduce/)

# tfs - 我在做什么错 - 使用 TFS 2012 构建的问题

> ID：15552519
> 
> 赞同：1
> 
> 时间：2013-03-21T16:05:10.887
> 
> 标签：tfs

我正在尝试启动并运行 TFS 2012 的最基本配置。到目前为止，我使用最简单的选项安装了 TFS 服务器（安装程序中的第一个选项 - 捆绑的 SQL express 附带的选项），我配置了构建服务（1 个控制器，1 个代理，都在 TFS 机器上）。我的项目由两部分组成：C#/silverlight 部分和 C++ 部分。添加 silverlight 先决条件后，C# 项目将正确构建。

但是我无法构建 C++ 项目。我想我缺少一个先决条件，因为我收到以下错误：

> C:\Builds\1\proj1\Client\src\Code\Client\proj\main (VC11).vcxproj (19)：导入的项目“C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4\. 0\v110\Microsoft.Cpp.Default.props" 未找到。确认声明中的路径正确，并且该文件存在于磁盘上。

实际上，TFS 服务器没有“C:\Program Files (x86)\MSBuild\Microsoft.Cpp”文件夹（而我的开发机器有一个）。我安装了 Windows SDK，但这没有帮助。

我在一些帖子上看到我需要在构建机器上安装 VS 2012。那是对的吗？VS快递会吗？

在过去的两天里，我一直在努力解决这个问题，我们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:25:48.163

在您的构建服务器上安装 Visual Studio 似乎是一件奇怪的事情，但在 TFS 块附近，我发现它是管理构建服务器的最简单方法。

您可以手动将文件从您的开发机器复制到您的构建服务器，但是如果对 Visual Studio 进行了更新，您将需要弄清楚发生了什么变化并确保您也更新了所有这些文件。这些文件通常包括 Targets 文件和关联的 dll。

此外，有了现在可用的所有扩展和包，在构建服务器上加载 Visual Studio 并安装所需的包比尝试找出复制功能所需的内容更容易。

最近微软发布`ASP.Net and Web Tools 2012.2`. 这改变了网站和 Web 项目的发布管道，我需要在我的 TFS 构建中使用它。能够登录到我的构建服务器、加载`Visual Studio`和下载新更新要容易得多。

我肯定会支持在您的构建服务器上安装 Visual Studio。

# c++ - 这是从析构函数中抛出异常的安全方法吗？

> ID：15552520
> 
> 赞同：7
> 
> 时间：2013-03-21T16:05:10.760
> 
> 标签：c++, exception, c++11

我知道从析构函数中抛出通常是一个坏主意，但我想知道我是否可以`std::uncaught_exception()`用来安全地从析构函数中抛出。

考虑以下 RAII 类型：

```
struct RAIIType {
   ...

   ~RAIIType() {
      //do stuff..
      if (SomethingBadHappened()) {
           //Assume that if an exception is already active, we don't really need to detect this error
           if (!std::uncaught_exception()) {
               throw std::runtime_error("Data corrupted");
           }
      }
   }
}; 
```

这是c ++ 11中的UB吗？这是一个糟糕的设计吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T16:33:41.897

你有一个`if`，你考虑过“其他”条件吗？它可以抛出异常或......做什么？有两件事可以在另一个分支中。

*   什么都没有（如果发生错误时不需要发生任何事情，为什么要抛出异常？）
*   它“处理”异常（如果可以“处理”，为什么要抛出异常？）

既然我们已经确定像这样有条件地抛出异常是没有*目的的，那么剩下的问题就没有实际意义了。*但这里有一个花絮：永远不要从破坏者中抛出异常。如果对象抛出异常，调用代码通常会以某种方式检查该对象以“处理”异常。如果该对象不再存在，则通常无法“处理”异常，这意味着不应抛出异常。要么被忽略，要么程序生成转储文件并中止。所以从析构函数中抛出异常无论如何都是没有意义的，因为捕捉它是没有意义的。考虑到这一点，类假设析构函数不会抛出，并且如果析构函数抛出，几乎每个类都会泄漏资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-20T08:59:15.613

请注意，您的代码并没有按照您的想法执行。如果`SomethingBadHappened`没有适当的堆栈展开，您尝试从析构函数中抛出，但仍然`std::terminate`会被调用。这是 C++11 中的新行为（请参阅[本文](http://akrzemi1.wordpress.com/2013/08/20/noexcept-destructors/)）。您将需要使用`noexcept(false)`规范注释您的析构函数。

假设你这样做，不清楚你所说的“安全”是什么意思。您的析构函数永远不会`std::terminate`直接触发。但是调用`std::terminate`不是 UB：它的定义非常明确且非常有用（请参阅[这篇文章](http://akrzemi1.wordpress.com/2011/10/05/using-stdterminate/)）。

当然，您不能将您的类`RAIIType`放入 STL 容器中。C++ 标准显式调用该 UB（当析构函数抛出 STL 容器时）。

此外，该设计看起来很可疑：if 语句的真正含义是“有时报告失败，有时不报告”。你对这个好吗？

另请参阅[这篇文章](http://akrzemi1.wordpress.com/2014/09/19/destructors-2-use-cases/)以获得类似的讨论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-30T09:59:59.657

> 我知道从析构函数中抛出通常是一个坏主意，但我想知道我是否可以`std::uncaught_exception()`用来安全地从析构函数中抛出。

您可能想看看Herb Sutter 的[uncaught_exceptions](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4152.pdf)提案：

> **动机**
> 
> `std::uncaught_exception`众所周知，在许多情况下“几乎有用”，例如在实现 Alexandrescu 风格的 ScopeGuard 时。[1] 特别是，当在析构函数中调用时，C++ 程序员通常期望且基本正确的是：“如果在堆栈展开期间调用了此析构函数，uncaught_exception 返回 true。”</p>
> 
> 然而，正如至少自 1998 年以来在[Guru of the Week #47](http://www.gotw.ca/gotw/047.htm)中所记录的那样，这意味着从可以在堆栈展开期间调用的析构函数传递调用的代码无法正确检测它本身是否实际上被作为展开的一部分调用。一旦你在展开任何异常，对于 uncaught_exception 一切看起来都像是展开，即使有多个活动异常。
> 
> ...
> 
> 本文提出了一个新函数 int `std::uncaught_exceptions()`，它返回当前活动的异常数量，即抛出或重新抛出但尚未处理的异常数。
> 
> A type that wants to know whether its destructor is being run to unwind this object can query uncaught_exceptions in its constructor and store the result, then query uncaught_exceptions again in its destructor; if the result is different, then this destructor is being invoked as part of stack unwinding due to a new exception that was thrown later than the object’s construction.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T16:35:51.170

这取决于您所说的“安全”是什么意思。

这将防止从析构函数抛出的问题之一 - 如果在处理另一个异常时堆栈展开期间发生错误，则程序不会终止。

但是，仍然存在一些问题，其中包括：

*   如果你有一组这些，那么如果一个人抛出破坏，它们可能不会全部被破坏。
*   一些异常安全习惯用法依赖于非抛出破坏。
*   许多人（比如我自己）不知道如果析构函数抛出，什么会被正确销毁或不会被正确销毁的所有规则，并且不相信他们可以安全地使用你的类。

# android - 如何确定 n 边多边形的 UV 纹理坐标

> ID：15552521
> 
> 赞同：0
> 
> 时间：2013-03-21T16:05:11.647
> 
> 标签：android, opengl-es

我使用下面的代码生成了一个 n 边多边形：

```
public class Vertex
{
    public FloatBuffer floatBuffer; // buffer holding the vertices
    public ShortBuffer indexBuffer;
    public int numVertices;
    public int numIndeces;

    public Vertex (float[] vertex)
    {            
        this.setVertices(vertex);
    }

    public Vertex (float[] vertex, short[] indices)
    {            
        this.setVertices(vertex);
        this.setIndices(indices);
    }

    private void setVertices(float vertex[])
    {
        // a float has 4 bytes so we allocate for each coordinate 4 bytes
        ByteBuffer factory = ByteBuffer.allocateDirect (vertex.length * 4);
        factory.order (ByteOrder.nativeOrder ());
        // allocates the memory from the byte buffer
        floatBuffer = factory.asFloatBuffer ();
        // fill the vertexBuffer with the vertices
        floatBuffer.put (vertex);
        // set the cursor position to the beginning of the buffer
        floatBuffer.position (0);
        numVertices = vertex.length;
    }

    protected void setIndices(short[] indices) 
    {
        ByteBuffer ibb = ByteBuffer.allocateDirect(indices.length * 2);
        ibb.order(ByteOrder.nativeOrder());
        indexBuffer = ibb.asShortBuffer();
        indexBuffer.put(indices);
        indexBuffer.position(0);
        numIndeces = indices.length;
    }
} 
```

然后创建一个 n 边多边形：

```
public class Polygon extends Mesh 
{

    public Polygon(int lines)
    {
        this(lines, 1f, 1f);
    }

    public Polygon(int lines, float xOffset, float yOffset) 
    {       
        float vertices[] = new float[lines*3];  
        float texturevertices[] = new float[lines*2];
        short indices[] = new short[lines+1];

        for (int i = 0; i < lines;i++)
        {
            vertices[i*3]     = (float) (xOffset * Math.cos(2*Math.PI*i/lines));
            vertices[(i*3)+1] = (float) (yOffset * Math.sin(2*Math.PI*i/lines));
            vertices[(i*3)+2] = 0.0f;//z

            indices[i] = (short)i;  

            texturevertices[i*2] =(float) (Math.cos(2*Math.PI*i/lines)/2 + 0.5f); 
            texturevertices[(i*2)+1] = (float) (Math.sin(2*Math.PI*i/lines)/2 + 0.5f); 
        }

        indices[lines] = indices[0];        

        shape = new Vertex(vertices,indices);
        texture = new Vertex(texturevertices, indices);
    }   
} 
```

正如你所看到的，我按顺序设置了索引，以便我可以将它们渲染为线条。现在我想纹理多边形。我该怎么做呢？

我试过实现这个：

![在此处输入图像描述](../Images/eeeee04e4c106c451540ebba50507467.png)
![在此处输入图像描述](../Images/585a16a88c5999acbbf166dadac19a44.png)

从这里：[http ://en.wikipedia.org/wiki/UV_mapping](http://en.wikipedia.org/wiki/UV_mapping)

但这样的结果真的很糟糕。如何通过坐标并确定纹理的顺序？

可以在此处找到相关参考：[如何在笛卡尔坐标中绘制边正多边形？](https://stackoverflow.com/questions/7198144/how-to-draw-a-n-sided-regular-polygon-in-cartesian-coordinates)

**编辑**我根据下面 Matic Oblak 给出的答案进行了更新，结果如下：

![在此处输入图像描述](../Images/95456d06ed0b6469471c03363c43ea89.png)

旋转无关紧要。

这非常接近……但还没有雪茄。原始纹理如下：

![在此处输入图像描述](../Images/6380de37beac5bd473b419a3379a8a06.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:48:30.360

如果我没看错，你是在尝试从 n 个多边形创建一个圆。有很多方法可以使用不同类型的纹理并将它们粘贴到一个形状中，最直接的方法是绘制一个带有整个形状的纹理（对于大的“n”，它将是一个圆形）并且纹理坐标是相同的以 (.5, .5) 为圆心，半径为 0.5 的圆：

```
//for your case:
    u = Math.cos(2*Math.PI*i/lines)/2 + .5
    v = Math.sin(2*Math.PI*i/lines)/2 + .5
//the center coordinate should be set to (.5, .5) though 
```

您发布的方程式适用于球体，并且有点复杂，因为甚至很难想象将其作为图像放到 2d 表面上。

**编辑** *（来自评论）*：

创建这些三角形与绘制线带并不完全相同。您应该使用三角扇而不是三角条，并且您需要将第一个点设置为形状的中心。

```
public Polygon(int lines, float xOffset, float yOffset) 
    {       
        float vertices[] = new float[(lines+1)*3];  //number of angles + center
        float texturevertices[] = new float[(lines+1)*2];
        short indices[] = new short[lines+2];  //number of vertices + closing

        vertices[0*3]     = .0f; //set 1st to center
        vertices[(0*3)+1] = .0f;
        vertices[(0*3)+2] = .0f;
        indices[0] = 0;  
        texturevertices[0] = .5f; 
        texturevertices[1] = .5f;

        for (int i = 0; i < lines;i++)
        {
            vertices[(i+1)*3]     = (float) (xOffset * Math.cos(2*Math.PI*i/lines));
            vertices[((i+1)*3)+1] = (float) (yOffset * Math.sin(2*Math.PI*i/lines));
            vertices[((i+1)*3)+2] = 0.0f;//z

            indices[(i+1)] = (short)i;  

            texturevertices[(i+1)*2] =(float) (Math.cos(2*Math.PI*i/lines)/2 + 0.5f); 
            texturevertices[((i+1)*2)+1] = (float) (Math.sin(2*Math.PI*i/lines)/2 + 0.5f); 
        }

        indices[lines+1] = indices[1]; //closing part is same as for i=0       

        shape = new Vertex(vertices,indices);
        texture = new Vertex(texturevertices, indices);
    } 
```

现在您只需要使用三角形 FAN 绘制直到索引计数。请注意这里的“偏移量”，您使用 xOffset 和 yOffset 作为椭圆参数而不是偏移量。如果您将它们用作偏移量`vertices[(i+1)*3] = (float) (xOffset + Math.cos(2*Math.PI*i/lines));`（注意“+”而不是“*”），那么第一个顶点应该在偏移量而不是 (0,0) 处，而纹理坐标保持不变。

# php - 学习 Zend 5.3 认证

> ID：15552522
> 
> 赞同：1
> 
> 时间：2013-03-21T16:05:16.547
> 
> 标签：php, certificate

我决定参加 Zend 考试，目前正在努力学习。

我学习的主题是基于官网的[考试信息和](http://www.zend.com/services/certification/php-5-certification/)[学习指南，并使用](http://www.zend.com/topics/PHP-5-3-Study-Guide-v1.pdf)[PHP手册](http://www.php.net/manual/en/index.php)作为材料

我注意到几乎没有关于电子邮件的问题（除了与安全有关的问题），这个话题是否太小而无法提及，或者实际上不会有关于电子邮件的问题？

另一方面，我认为有数百个我从未使用过并且可能永远不会使用过的扩展程序（音频/视频操作、仅限 Windows 的扩展程序等）。

那么，这些文件的完整性如何？我应该只学习学习指南中的主题，还是应该一直学习与该主题部分相关的每一件小事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:34:22.160

您只需学习学习指南中的 10 个主题。但是你需要好好研究它们。尽可能多地学习围绕每个主题领域的特质。

正如已经提到的，几乎没有强调电子邮件，也不会有关于音频、视频等的问题。

# android - android - 在自定义 GridView 中使用复选框选择多个对象

> ID：15552524
> 
> 赞同：0
> 
> 时间：2013-03-21T16:05:28.687
> 
> 标签：android, gridview, checkbox, multi-select

我正在开发一个游戏，并且我有一个作为 GridView 的库存。每个网格项都是一个 GameObject，单击时会被选中。游戏指示用户可以选择单个对象或组合对象。

我需要的是非常具体的：我希望当用户按下菜单按钮并出现optionsMenu（带有“combine”选项）时，在每个网格项目上动态绘制一个复选框，以便多选一些项目（非常像在图库中，但使用对象而不是图像），然后将它们组合起来。

我正在使用 API 级别 8，所以 MultiChoiceMode 让我很难过。

此外，如果有人对如何实现此功能而不是使用复选框有更好的建议，我肯定会对此持开放态度。提前感谢

这是网格项目的 xml：

```
<ImageView
    android:id="@+id/grid_item_image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/>

<CheckBox
    android:id="@+id/image_check"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:visibility="invisible" /> 
```

和网格视图：

```
<TextView
    android:id="@+id/inventoryMsg"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:background="#000000"
    android:gravity="center"
    android:text="@string/inventory"/>

<GridView
    android:id="@+id/gridView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_above="@id/inventoryMsg"
    android:columnWidth="90dp"
    android:gravity="center"
    android:horizontalSpacing="10dp"
    android:numColumns="3"
    android:stretchMode="columnWidth"
    android:verticalSpacing="10dp" /> 
```

这是我的 CustomAdapter 中的 getViewMethod：

```
public View getView (int position, View convertView, ViewGroup parent) {

            View v = convertView;

    if (convertView == null) {
        holder = new ViewHolder();
        LayoutInflater layoutInflater = (LayoutInflater) a.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = layoutInflater.inflate(R.layout.griditem, null);
        holder.gameItemCheck = (CheckBox) v.findViewById(R.id.image_check);
        v.setTag(holder);
    } else {
        holder = (ViewHolder) v.getTag();
    }
    holder.gameItemCheck.setId(position);
    holder.gameItemCheck.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            //dosomestuff
        }
    });

    GameObject gameObject = gameObjectList.get(position);
    ImageView gameItemImageView = (ImageView) v.findViewById(R.id.grid_item_image);

    holder.gameItemCheck.setChecked(Inventory.selected[position]);
    holder.id = position;
    return v;
}

public class ViewHolder {

    public CheckBox gameItemCheck;
    int id;
} 
```

**我尝试动态更改复选框可见性的方式：**

1)

```
public boolean onKeyDown(int keycode, KeyEvent e) {
    switch (keycode) {
    case KeyEvent.KEYCODE_MENU:
        openOptionsMenu();
        gameObjectAdapter.holder.gameItemCheck.setVisibility(View.VISIBLE);
        gridView.refreshDrawableState();
        return true;
    }

    return super.onKeyDown(keycode, e);
} 
```

2)

```
public boolean onPrepareOptionsMenu(Menu menu) {
            gameObjectAdapter.holder.gameItemCheck.setVisibility(View.VISIBLE);
            gameObjectAdapter.notifyDataSetChange();
    return true;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T18:14:37.200

# 3 Options

## Adapt from gallery selection

## Method 1:

Just draw a checkbox onto the cell's bitmap when selected. Draw the original when toggle unchecked.
How about using this code:

```
 private Bitmap drawCheck(Bitmap bmp)
  {
   Bitmap bmChecked = Bitmap.createBitmap(bmp.getWidth(),     bmp.getHeight(), bmp.getConfig());
   Bitmap check = BitmapFactory.decodeResource(mContext.getResources(), R.drawable.upcheck);
   Canvas canvas = new Canvas(bmChecked);

   canvas.drawBitmap(bmp, 0, 0, null);
   canvas.drawBitmap(check, 0, 0, null); 
   return bmChecked;
  } 
```

## Method 2

Use the excellent [code by Mihai Fonoage](http://mihaifonoage.blogspot.com/2009/11/displaying-images-from-sd-card-in.html).

And then:

1.  added a selected flag to LoadedImage class,
2.  in the onItemClick() function I mark the clicked item as selected
3.  in the adapter's getView() use the flag to i.e. set the image background

IT WORKS.

## Method 3: Checkable interface

Have a look at [this example](http://www.java2s.com/Code/Android/UI/ThisdemoillustratestheuseofCHOICEMODEMULTIPLEMODALakaselectionmodeonGridView.htm) -- they use a custom layout class that implements Checkable interface and set a colored background-drawable on checked items.

# ios - 如何仅制作 iOS 应用景观

> ID：15552532
> 
> 赞同：2
> 
> 时间：2013-03-21T16:05:45.477
> 
> 标签：ios, uiviewcontroller, orientation, device-orientation

似乎是一件简单的事情，对吗？转到目标的摘要选项卡并将“支持的界面方向”设置为仅横向。您会认为这意味着该应用程序将仅是横向的。但不是。

例如，在运行 5.1 的设备上，如果您打开应用程序并将手机保持在正确的横向右侧位置，您将看到视图逆时针旋转 90 度，好像它认为它应该处于纵向模式，除非您添加类似这个：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

但这仅适用于一个视图控制器，谁知道它是否适用于所有操作系统版本。

那么如何只制作应用程序景观呢？我是否必须将该代码添加到应用程序中的每个视图控制器？我不需要任何旋转。我所有的视图都是在 Landscape 中设计的。我只希望应用程序以横向右模式打开并保持这种状态。我想支持 iOS 5 及更高版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:33:07.480

引入了一些新方法，您必须与旧方法一起实施，如下所示

```
-(BOOL)shouldAutorotate
{
    return YES;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:12:09.383

在 Xcode 中，您可以导航到您的项目设置 -> 摘要 -> iPhone/iPod 部署信息。您可以在此处选择支持的界面方向。您还可以通过在应用程序范围内添加所需的界面方向来编辑应用程序的 info.plist 中的“支持的界面方向”数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T16:12:53.793

在 info.plist 中将方向设置为横向

# c++ - 顶点缓冲区和渲染问题

> ID：15552533
> 
> 赞同：1
> 
> 时间：2013-03-21T16:05:47.823
> 
> 标签：c++, opengl, vertex-buffer, stride

我正在尝试使用四边形贴片来近似曲面。我使用 GL_QUADS 直接渲染并指定四边形补丁的四个顶点。

现在我正在尝试使用顶点缓冲区和顶点和法线的覆盖数组（verNor）来获得一些性能。问题是我得到了一些随机的形状，但不是我之前得到的正确形状。

我在这里放我的代码：

```
 GLenum err = glewInit();
      if (GLEW_OK != err){
            std::cout<<"Filed to Initialize GLEW :: "<<glewGetErrorString(err)<<std::endl;
      }

      verNor = new GLfloat [NA*NP*6];   // NA and NP are number of points in lets say x and y axis
      indices = new GLuint [(NA)*(NP)*4];   // When the tube is cut an spread out.

      // VBOs
      glGenBuffers(1, &vbo_tube); // Ask the GPU driver for a buffer array. "vbo" now has the ID
      glGenBuffers(1, &ibo_indices);

         // For Vertices and Normals which are interleved
         glBindBuffer(GL_ARRAY_BUFFER, vbo_tube);
         glBufferData(GL_ARRAY_BUFFER, sizeof(GLfloat) * 6*NA*NP, NULL, GL_STATIC_DRAW);
         // Obtaining the pointer to the memory in graphics buffer
         buffer_verNor = glMapBuffer(GL_ARRAY_BUFFER,GL_WRITE_ONLY);

         // For Indices
         glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, ibo_indices);
         glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(int) * 4*(NA-1)*(NP-1), NULL, GL_STATIC_DRAW);
         buffer_indices = glMapBuffer(GL_ELEMENT_ARRAY_BUFFER,GL_WRITE_ONLY);

    // Calculate the vertices of the points around the tube. Correctness guarenteed because I can draw exactly what I wanted 
    // using normal stright forward GL_QUADS that is drawing quad by quad and with out any VBOs
    // Calculated vertices are stored in vPoints.

    for (int i=0; i<NP; i++) {
        for (int j=0; j<NA; j++) {

            // Calculate the normals of each and every point above and store them in v3

            // Storing the vertices         
            verNor[6*( (i)*NA+(j) )+0] = (GLfloat)vPoints[i*NA+j].GetX();
            verNor[6*( (i)*NA+(j) )+1] = (GLfloat)vPoints[i*NA+j].GetY();
            verNor[6*( (i)*NA+(j) )+2] = (GLfloat)vPoints[i*NA+j].GetZ();
            // Storing the Normals
            verNor[6*((i-1)*NA+(j-1))+3] = (GLfloat)v3.GetX();
            verNor[6*((i-1)*NA+(j-1))+4] = (GLfloat)v3.GetY();
            verNor[6*((i-1)*NA+(j-1))+5] = (GLfloat)v3.GetZ();

            // Calculating the indices which form the quad
            indices[4*((i)*NA+(j))+0]   =   (GLuint) (i)*NA+j     ;
            indices[4*((i)*NA+(j))+1]   =   (GLuint) (i+1)*NA+j   ;
            indices[4*((i)*NA+(j))+2]   =   (GLuint) (i+1)*NA+j+1 ;
            indices[4*((i)*NA+(j))+3]   =   (GLuint) (i)*NA+j+1   ;
        }
    }

    memcpy(buffer_verNor, verNor, 6*(NA)*(NP));
    glUnmapBuffer(GL_ARRAY_BUFFER);     // Unmapping the buffer

    memcpy(buffer_indices, indices, 4*(NA-1)*(NP-1));
    glUnmapBuffer(GL_ELEMENT_ARRAY_BUFFER);

    glEnable(GL_LIGHTING);
    // Performing the Vertex Buffer Stuff
    // For Vertices and Normals
    glBindBuffer(GL_ARRAY_BUFFER, vbo_tube);
    glVertexPointer( 3, GL_FLOAT, 6*sizeof(GLfloat), (GLvoid*)((char*)NULL + 0*sizeof(GLfloat)) );
    glNormalPointer( GL_FLOAT, 6*sizeof(GLfloat), (GLvoid*)(((char*)NULL)+3*sizeof(GLfloat)) );

    // For Indices
    // Mapping the indices_vbo memory here
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, ibo_indices);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(GLuint)*4*(NA-1)*(NP-1), indices, GL_STATIC_DRAW);

    // Enabling all the buffers and drawing the quad patches
    glBindBuffer(GL_ARRAY_BUFFER, vbo_tube);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, ibo_indices);

    // Enabling normals and vertices to draw
    glEnableClientState (GL_NORMAL_ARRAY);
    glEnableClientState(GL_VERTEX_ARRAY);

    // Drawing the patches
     glDrawElements(GL_QUADS, (NA-1)*(NP-1), GL_UNSIGNED_INT,(GLvoid*)((char*)NULL));
        // Disabling the buffer objects for safety
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0);
        glBindBuffer(GL_ARRAY_BUFFER, 0);

        glDisableClientState(GL_NORMAL_ARRAY);
    glDisableClientState(GL_VERTEX_ARRAY);

    glDeleteBuffers(1, &vbo_tube);
    glDeleteBuffers(1, &ibo_indices); 
```

网格有 NP 点的 NA，所以我必须绘制 (NP-1)*(NA-1) 四边形。此外，只有当我在 glVertexPointer() 和 glNormalPointer() 函数中给出错误的偏移量和步幅时，我才能得到一些东西（但不正确）。我认为正确的是 vertexPointer :: Stride - 6*sizeof(GLfloat) , offset - 0(last argument) normalPointer :: Stride - 6*sizeof(GLfloat) , offset - 3*sizeof(GLfloat)

# c# - 将 Excel DropDown 从工作簿复制到新工作簿

> ID：15552542
> 
> 赞同：0
> 
> 时间：2013-03-21T16:06:25.310
> 
> 标签：c#, excel, vsto, validation, gembox-spreadsheet

又是一个 Excel 问题。我的客户向我发送了一个包含下拉列表（组合框）的 Excel 文件，我需要复制该组合框或使用里面的信息构建一个新组合框。对于 excel，我发现下拉列表被命名为数据验证（我已经得到它，但对他无能为力）。

我有 Gembox dll 和 NativeExcel dll，但没有找到任何解决方案。

使用 GemBox，我已经得到了这个：

```
ExcelFile ef = ExcelFile.Load("Modelo_AA.xlsx");
ExcelWorksheet ws = ef.Worksheets[0];
ExcelFile efnovo = new ExcelFile();
ExcelWorksheet wsnovo = efnovo.Worksheets.Add("Hello");
DataValidationCollection dvc = ws.DataValidations;
DataValidation dv = dvc[0];
bool dd = dv.InCellDropdown; //here i get true 
```

谢谢安德鲁

编辑：我假设数据验证与下拉列表相关联！

Edit2：主要问题是将下拉列表从工作簿复制到其他！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T10:03:01.160

首先，我想说的是，在您的情况下，DataValidation 与下拉列表相关联，因为它是 List 类型（请参阅 dv.Type 属性）。

还要将此列表 DataValidation 复制到另一个 excel 文件中，这将取决于 DataValidation 源，如 shahkalpesh 的评论中所述，它们可以是硬编码的，也可以来自单元格范围。您可以通过获取 dv.Formula1 对象来检查 DataValidation 的来源。例如，如果它是硬编码的，那么 Formula1 将是这些列表项的数组，您可以将该 DataValidation 添加到另一个 ExcelFile 中：

```
wsnovo.DataValidations.Add(dv); 
```

但是，如果 DataValidation 在 Formula1 中有一个单元格区域，那么您也必须将该单元格区域复制到一个新的 ExcelFile 中，或者您可以尝试读取该单元格区域中的单元格值并将 Formula1 替换为硬编码的项目列表.

# python - 白天以不同的时间间隔运行 python 脚本？

> ID：15552546
> 
> 赞同：0
> 
> 时间：2013-03-21T16:06:36.567
> 
> 标签：python, cron

我需要根据一天的不同时间运行 python 脚本。要求是：

**在工作日：**

*   早上 7 点开始 - 晚上 12 点结束 => 每 5 分钟运行一次脚本

*   下午 12:00 开始 - 下午 4 点结束 => 每 30 分钟运行一次脚本

*   下午 4 点开始 - 晚上 9 点结束 => 每 5 分钟运行一次脚本

*   晚上 9 点开始 - 早上 7 点结束 => 每小时运行一次脚本

**在周末：**

*   每半小时运行一次脚本

我以前做过一些简单的 cron 东西，但似乎 cron 不能处理这种粒度。

我曾考虑创建一个 bash 脚本，它会检查时间并在满足条件时运行 python 脚本，但我遇到了如何通过每次运行 bash 脚本来保持时间的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:17:59.440

只需在您的 crontab 中注册多个条目：

```
#
# Weekdays
#

# Start 7 am - End 12 pm => run script every 5 minutes
*/5  7-11      * * mon-fri *   yourscript

# Start 12:00 pm - End 4 pm => run script every 30 minutes
0,30 12-15     * * mon-fri *   yourscript

# Start 4 pm - End 9 pm => run script every 5 minutes
*/5  16-20     * * mon-fri *   yourscript

# Start 9 pm - End 7 am => run script every hour
0    0-6,21-23 * * mon-fri *   yourscript

# 
# Weekends
#

# Run script every half hour
0,30 *         * * sat-sun *   yourscript 
```

Cron 可以很好地处理这种*粒度*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:11:55.367

如果您在 Windows 中工作，则有一个名为任务调度程序的程序可以让您完全执行此操作。

如果你在 Linux 中工作（听起来像你），我相信 crontab 会做你想做的事。 [这是我找到的一个教程](http://kvz.io/blog/2007/07/29/schedule-tasks-on-linux-using-crontab/)，希望对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T16:16:36.223

看看 apscheduler：[http](http://pythonhosted.org/APScheduler/) ://pythonhosted.org/APScheduler/ 和 dateutil.rrule：[http ://labix.org/python-dateutil](http://labix.org/python-dateutil)

有了这两个，你可以在 python 中创建很多类似 chron 的规则，这使得在机器和操作系统之间传输更容易.. :)

# php - PHP 中的函数范围常量

> ID：15552550
> 
> 赞同：1
> 
> 时间：2013-03-21T16:06:43.613
> 
> 标签：php

是否可以在 PHP 中使用函数范围的常量？

如果不是，对于我们需要在函数（而不是方法）中使用常量的情况，首选的替代方案是什么？

**编辑**

我的特定用例：

我有一个与数据库一起使用的函数。我想将表名（可能还有其他不会改变的信息，例如字段名）存储在一个常量中（而只是在连接字符串中“硬编码”它）。其他函数不需要知道我的表名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:10:53.850

如果在 PHP 的较新版本上，也许您可​​以使用名称空间获得您想要的东西。

看看这个页面： http: [//php.net/manual/en/language.namespaces.nsconstants.php](http://php.net/manual/en/language.namespaces.nsconstants.php)

```
<?php
namespace my\name; // see "Defining Namespaces" section

class MyClass {}
function myfunction() {}
const MYCONST = 1;

$a = new MyClass;
$c = new \my\name\MyClass; // see "Global Space" section

$a = strlen('hi'); // see "Using namespaces: fallback to global
               // function/constant" section

$d = namespace\MYCONST; // see "namespace operator and __NAMESPACE__
                    // constant" section
$d = __NAMESPACE__ . '\MYCONST';
echo constant($d); // see "Namespaces and dynamic language features" section 
```

# css - 浮动 div 不会将其他 div 推到正确位置

> ID：15552552
> 
> 赞同：4
> 
> 时间：2013-03-21T16:06:47.920
> 
> 标签：css, html, css-float

我不是 css 专家，但我正试图让一个浮动 div 工作。我有两个 div，最上面的一个向左浮动，另一个 div 应该向右环绕。它似乎有点这样做。问题是即使它看起来正确，它实际上并没有将框推到它的右侧。我有一个 jsfiddle，你会明白我的意思。我在名为 content 的 div 上设置了一个红色边框。您会看到内容看起来差不多，但是 h1 下方的红色虚线从浮动对象的开头开始，而不是在 H1 标题下方。请帮我理解。这是jsfiddle：http: [//jsfiddle.net/wCnY3/](http://jsfiddle.net/wCnY3/)

```
<div id="subNav">box</div><div id="content">WELCOME</div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T16:09:24.573

使用属性定位您的`#content`元素`overflow-x:hidden`。

```
#content {
    overflow-x:hidden;
} 
```

像这样：http: [//jsfiddle.net/wCnY3/1/](http://jsfiddle.net/wCnY3/1/)

按照设计，它`overflow:hidden`具有强制您的元素表现得像正方形/矩形的效果。由于您没有为元素设置宽度/高度，这仅意味着其包装行为已更改。

# ios - NSSortDescriptors 获得正确的类比较方法

> ID：15552553
> 
> 赞同：0
> 
> 时间：2013-03-21T16:06:48.580
> 
> 标签：ios, objective-c, nssortdescriptor

我正在制作一个`NSFetchRequest`并希望我的结果按日期从`Core Data`. 该`dateLastViewed`属性是`NSDate`in `Core Data`，所以，我希望我的`compare:`方法是其中之一`NSDate`，现在它是 in `NSNumber`... 我该如何设置？

```
request.sortDescriptors = @[[NSSortDescriptor sortDescriptorWithKey:@"dateLastViewed" ascending:YES selector:@selector(compare:)]]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:14:17.450

在按日期值属性排序时，Core Data 做了正确的事情。您应该能够在`NSSortDescriptor`不指定比较器的情况下使用普通旧的：

```
[NSSortDescriptor sortDescriptorWithKey:@"dateLastViewed" ascending:YES] 
```

当您搜索它时，您可能会被引导到该`compare:`方法的文档`NSNumber`，但正如 Alladdinian 所指出的，许多 Foundation 类都实现`compare:`了`NSDate`.

# c++ - 基类和派生类分配

> ID：15552557
> 
> 赞同：0
> 
> 时间：2013-03-21T16:07:00.650
> 
> 标签：c++

在下面的代码中，`drvdCls`派生自`bseCls`. 此代码按原样编译和运行。然而，我在这里发现了一个问题：退出`newBse`后将被释放。`Test()`我对吗？

```
bseCls* Test()
{

    bseCls* newBse = new drvdCls();
    drvdCls newDrvd;
    newBse = &newDrvd;
    return newBse;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T16:09:02.087

最初指向的对象`newBse`将被泄露。当您将地址分配`newDrvd`给`newBse`您时，您将丢失指向堆分配对象的指针，您将无法获得`delete`它。在进程终止之前，该内存将无法使用。

此外，您将堆栈分配对象的地址作为指针返回，这有两个原因是不好的：

1.  对象的析构函数将在函数返回之前被调用，这意味着您将使用指向被破坏对象的指针。
2.  为对象分配的内存位于堆栈上，几乎肯定会被未来的函数调用破坏。那时，您的指针将指向不是 a 的东西`bseCls`，但您将像使用它一样使用它。

如果您使用此函数返回的指针，您将调用未定义的行为，并且您的程序有权执行*任何*操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:09:12.863

不，它不会被自动释放。每个调用都`new`必须与调用匹配`delete`。但这不是您的代码的唯一问题，您还从函数返回了局部变量的地址。

```
newBse = &newDrvd; // memory leak, pointer to previously allocated object is lost
return newBse;     // newDrvd is destroyed when function exits, so returned
                   // pointer points to invalid memory 
```

你可能想要做的是

```
bseCls* Test()
{
    return new drvdCls();
} 
```

现在调用者必须`delete`在使用后调用返回的指针。你应该做的是

```
std::unique_ptr<bseCls> Test()
{
    return new drvdCls();
} 
```

现在，当返回的对象超出范围时，分配的对象将自动为`delete`d 。`unique_ptr`

# c# - XMLResponse 元素显示在列表中

> ID：15552558
> 
> 赞同：0
> 
> 时间：2013-03-21T16:07:06.437
> 
> 标签：c#, xml, linq, linq-to-xml

我正在使用 c# 执行 HttpWebrequest。我得到以下回复

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Siri version="1.0" xmlns="http://www.siri.org.uk/">
  <ServiceDelivery>
    <ResponseTimestamp>2013-03-21T11:40:13.514Z</ResponseTimestamp>
    <StopMonitoringDelivery version="1.0">
      <ResponseTimestamp>2013-03-21T11:40:13.514Z</ResponseTimestamp>
      <RequestMessageRef>12345</RequestMessageRef>
      <MonitoredStopVisit>
        <RecordedAtTime>2013-03-21T11:40:13.514Z</RecordedAtTime>
        <MonitoringRef>020035811</MonitoringRef>
        <MonitoredVehicleJourney>
          <FramedVehicleJourneyRef>
            <DataFrameRef>-</DataFrameRef>
            <DatedVehicleJourneyRef>-</DatedVehicleJourneyRef>
          </FramedVehicleJourneyRef>
          <VehicleMode>bus</VehicleMode>
          <PublishedLineName>1</PublishedLineName>
          <DirectionName>Kempston</DirectionName>
          <OperatorRef>STB</OperatorRef>
          <MonitoredCall>
            <AimedDepartureTime>2013-03-21T11:41:00.000Z</AimedDepartureTime>
            <ExpectedDepartureTime>2013-03-21T11:44:27.000Z</ExpectedDepartureTime>
          </MonitoredCall>
        </MonitoredVehicleJourney>
      </MonitoredStopVisit>
    </StopMonitoringDelivery>
  </ServiceDelivery>
</Siri> 
```

此响应保存在名为“ResponseFromServer”的字符串变量中现在我只想在列表框中显示“ExpectedDepartureTime”

我尝试使用以下代码执行此操作：

```
//XMLResponse put in documentRoot
            XDocument documentRoot = XDocument.Parse(responseFromServer);

            //Linq To XML
            var documents =
            (from docs in documentRoot.Descendants("ServiceDelivery").Descendants("StopMonitoringDelivery").Descendants("MonitoredStopVisit").Descendants("MonitoredVehicleJourney").Descendants("MonitoredCall")
             select new
             {
                 dep = docs.Element("ExpectedDepartureTime").Value
             });
            //Show every ExpectedDepartureTime
            foreach (var i in documents)
            {
            lstHours.Items.Add(i);

                MessageBox.Show(i.ToString());
            } 
```

当我尝试这个时，什么也没有发生（消息框没有出现，在列表框中我看不到任何东西）。我也尝试先标记后裔但没有成功...

有人可以帮我解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:11:25.940

您需要像这样指定命名空间，然后使用一种方法`Descendants`

```
XNamespace ns = "http://www.siri.org.uk/";

var documents = 
         documentRoot.Descendants(ns + "MonitoredCall")
                     .Select(x => x.Element(ns + "ExpectedDepartureTime").Value); 
```

现在你可以

```
foreach (var i in documents)
{
      lstHours.Items.Add(i);

      MessageBox.Show(i.ToString());
} 
```

印刷

```
2013-03-21T11:44:27.000Z 
```

# php - DOM xpath 查找#text 节点并包含在段落标记中

> ID：15552560
> 
> 赞同：10
> 
> 时间：2013-03-21T16:07:16.507
> 
> 标签：php, html, dom, xpath

我想找到应该包装在`<p>`标签内的所有根级#text 节点（或具有 div 父级的节点）。在下面的文本中应该有三个（甚至只有两个）最终根`<p>`标签。

```
<div>
    This text should be wrapped in a p tag.
</div>

This also should be wrapped.

<b>And</b> this. 
```

这个想法是更好地格式化文本，以便将文本块分组为 HTML 显示的段落。但是，我一直在研究的以下 xpath 似乎无法选择文本节点。

```
 <?php

$html = '<div>
    This text should be wrapped in a p tag.
</div>

This also should be wrapped.

<b>And</b> this.';

libxml_use_internal_errors(TRUE);

$dom = DOMDocument::loadHTML($html);

$xp = new DOMXPath($dom);

$xpath = '//text()[not(parent::p) and normalize-space()]';

foreach($xp->query($xpath) as $node) {
    $element = $dom->createElement('p');
    $node->parentNode->replaceChild($element, $node);
    $element->appendChild($node);
}

print $dom->saveHTML(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-30T09:55:21.317

OK, so let me rephrase my comment as an answer. If you want to match all text nodes, you should simply remove the `//div` part from your XPath expression. So it becomes:

```
//text()[not(parent::p) and normalize-space()] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-11T21:21:57.380

您的场景有许多边缘情况，并且*应该*在顶部添加单词。我假设你想做经典*的双中断开始一个新的段落*，但是这次在父级`<div>`（或者当然是其他块元素）中也是如此。

我会让 HTML 解析器完成大部分工作，但我仍然会使用文本搜索和替换（在 xpath 旁边）。所以你会看到即将到来的有点骇人听闻，但我认为相当稳定：

首先，我会选择所有顶级或子级的文本节点。

```
(.|./div)/text() 
```

此 xpath 与作为标记的*锚*元素相关，因为它表示 HTML 片段在加载到.`<body>``DOMDocument`

如果是 div 的孩子，那么我会在开头插入起始段落。

然后在任何情况下，我都会在开始新段落的序列的每次出现处插入一个断标记（这里以注释的形式）（这应该是`"\n\n"`因为空白规范化，我可能是错的，如果它不适用，您需要预先进行空白规范化以使其透明地工作）。

```
/* @var $result DOMText[] */
$result = $xp->query('(.|./div)/text()', $anchor);

foreach ($result as $i => $node)
{
    if ($node->parentNode->tagName == 'div')
    {
        $insertBreakMarkBefore($node, true);
    }

    while (FALSE !== $pos = strpos($node->data, $paragraphSequence))
    {
        $node = $node->splitText($pos + $paragraphSequenceLength);
        $insertBreakMarkBefore($node);
    }
} 
```

这些插入的断点只是用 HTML`<p>`标记替换。HTML 解析器会将它们转换成足够的`<p>...</p>`对，这样我就可以不用自己编写该算法（尽管这可能很有趣）。这基本上就像我曾经在其他答案中概述的那样工作，但我不再找到链接：

1.  DOM树修改后，再次获取内部HTML `<body>`。
2.  将设置的标记替换为`"<p>"`（这里我也标记了类以使其可见）
3.  再次将 HTML 片段加载到解析器中，以使用正确的对重新创建 DOM `<p>...</p>`。
4.  再次从`DOMDocument`解析器中获取 HTML，现在是 finally。

这些在代码中概述的步骤（暂时跳过一些函数定义）：

```
$needle  = sprintf('%1$s<!--%2$s-->%1$s', $paragraphSequence, $paragraphComment);
$replace = sprintf("\n<p class=\"%s\">\n", $paragraphComment);
$html    = strtr($innerHTML($anchor), array($needle . $needle => $replace, $needle => $replace));

echo "HTML afterwards:\n", $innerHTML($loadHTMLFragment($html)); 
```

如图所示，双序列被单序列替换。可能最后一个也需要删除（如果适用，您也可以在此处修剪空白）。

最终的 HTML 输出：

```
<div>
<p class="break">

    This text should be wrapped in a p tag.
</p>
</div>
<p class="break">
This also should be wrapped.
</p>
<p class="break">
<b>And</b> this.</p> 
```

一些更好的输出格式的后期制作也很有用。实际上，我认为这样做是值得的，因为它可以帮助您调整算法（[完整演示](https://eval.in/42588)- 只是看到，空白规范化可能不适用于那里。所以请小心使用）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-12T12:16:14.880

我知道它不是 xpath，但请检查一下：

PHP 简单的 HTML DOM 解析器

[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

**特征**

用 PHP5+ 编写的 HTML DOM 解析器让您以非常简单的方式操作 HTML！

支持无效的 HTML。

使用像 jQuery 一样的选择器在 HTML 页面上查找标签。

在一行中从 HTML 中提取内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-07T10:04:34.243

如果您愿意，可以使用纯 JavaScript 来完成：

```
var content = document.evaluate(
                                      '//text()', 
                                      document, 
                                      null, 
                                      XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, 
                                      null );

for ( var i=0 ; i < content .snapshotLength; i++ ){
  console.log( content .snapshotItem(i).textContent );
} 
```

# ios - iOS 上的 FusionCharts：隐形第二张图表

> ID：15552561
> 
> 赞同：0
> 
> 时间：2013-03-21T16:07:19.413
> 
> 标签：ios, fusioncharts

我在 iOS 应用程序上使用 FusionCharts。

目前我有一个视图控制器，它有两个不同的 UIWebViews，它们从不同的 html 文件加载两个不同的图表。

问题是两个图表都被渲染了，但其中一个是不可见的，正如您在屏幕截图中看到的那样。

它一次只适用于一张图表。我怎样才能解决这个问题？！

[截屏](http://i.stack.imgur.com/Vfw3a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-30T21:49:31.317

这个回复可能为时已晚。我遇到了与 HighCharts 相同的问题。你不需要继承 UIWebView。您需要为每个图表提供不同的 Javascript 文件。那会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:00:38.020

这个问题的问题在于 UIWebView 它自己为了清楚的解释查看下面的链接 [http://double-slash.net/2010/10/18/using-multiple-ios-uiwebview-objects/](http://double-slash.net/2010/10/18/using-multiple-ios-uiwebview-objects/)它可以通过两种方式修复通过采用自旋锁机制或通过自定义 UIWebview 增加运行循环的渲染时间。在此处输入代码

```
@interface FCXTCustomWebView ()

@property (assign) id idelegate;

@end

@implementation FCXTCustomWebView

- (id)init
{
self = [super init];
if (self)
{
    self.delegate = self;
}

return self;
}

- (id) initWithCoder:(NSCoder *)aDecoder
{
self = [super initWithCoder:aDecoder];
if (self)
{
    self.delegate = self;
}

return self;
}

- (id)initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];
if (self) {
    // Initialization code
    self.delegate = self;
}
return self;
}

- (void)setDelegate:(id<UIWebViewDelegate>)delegate
{
 _idelegate = delegate;
}

- (void)stopRunLoop
{
CFRunLoopRef runLoop = [[NSRunLoop currentRunLoop] getCFRunLoop];
CFRunLoopStop(runLoop);
}

- (void) webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{
[self performSelector:@selector(stopRunLoop) withObject:nil afterDelay:.01];

if ([_idelegate respondsToSelector:@selector(webView:didFailLoadWithError:)])
{
    [_idelegate webView:webView didFailLoadWithError:error];
}
}

- (BOOL) webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
if ([_idelegate respondsToSelector:@selector(webView:shouldStartLoadWithRequest:navigationType:)])
{
    return [_idelegate webView:webView shouldStartLoadWithRequest:request navigationType:navigationType];
}
else
{
    return YES;
}
}

- (void) webViewDidFinishLoad:(UIWebView *)webView
{
[self performSelector:@selector(stopRunLoop) withObject:nil afterDelay:.01];

if ([_idelegate respondsToSelector:@selector(webViewDidFinishLoad:)])
{
    [_idelegate webViewDidFinishLoad:webView];
}
}

- (void) webViewDidStartLoad:(UIWebView *)webView
{
[self performSelector:@selector(stopRunLoop) withObject:nil afterDelay:.1];
if ([_idelegate respondsToSelector:@selector(stopRunLoop)])
{
    [_idelegate webViewDidStartLoad:webView];
}
}

- (void) loadHTMLString:(NSString *)string baseURL:(NSURL *)baseURL
{
[super loadHTMLString:string baseURL:baseURL];
CFRunLoopRunInMode((CFStringRef)NSDefaultRunLoopMode, 1.5, NO);
}
@end 
```

# java - Java TimeZone 和时区名称的快捷方式问题

> ID：15552564
> 
> 赞同：1
> 
> 时间：2013-03-21T16:07:24.150
> 
> 标签：java, timezone

我有一个 linux 应用程序，它以 iOS-XR 格式显示带有时区的时间：tech system clock status local-time-string "10:16:12.523 CDT Thu Mar 21 2013"

我还看到在 linux“zdump”输出中使用了“CDT”快捷方式：

> zdump -v 美国/哈瓦那 | grep 2013 America/Havana Sun Mar 10 04:59:59 2013 UTC = Sat Mar 9 23:59:59 2013 CST isdst=0 gmtoff=-18000 America/Havana Sun Mar 10 05:00:00 2013 UTC = Sun Mar 10 01:00:00 2013 CDT isdst=1 gmtoff=-14400 America/Havana Sun Nov 3 04:59:59 2013 UTC = Sun Nov 3 00:59:59 2013 CDT isdst=1 gmtoff=-14400 America/Havana Sun Nov 3 05:00:00 2013 UTC = 2013 年 11 月 3 日星期日 00:00:00 CST isdst=0 gmtoff=-18000

但是当我运行“System.out.println(TimeZone.getTimeZone("CDT"));” Java 命令我得到 GMT 时区...

1.  任何人都可以解释 Java timeZone 对象中存在快捷方式的标准是什么？
2.  我在哪里可以找到用于将时间字符串转换为“日期”对象的开源代码...我在 Java 日历、SimpleDateFormat 和日期上使用中继的当前解析器，但由于 Java TimeZone 无法识别“CDT”，它会解析这个字符串因为是格林威治标准时间...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-04-30T07:51:30.000

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T17:04:00.353

1）查看java.util.DateFormatSymbols.getZoneStrings，它返回一个数组

```
•zoneStrings[i][0] - time zone ID
•zoneStrings[i][1] - long name of zone in standard time
•zoneStrings[i][2] - short name of zone in standard time
•zoneStrings[i][3] - long name of zone in daylight saving time 
```

我们可以在 TimeZone.getTimeZone() 中使用 'time zone ID'，其余的为 SimpleDateFormat 'z' General Time Zone

2) CDT 对于 SimpleDateFormat 是可以的，试试

```
new SimpleDateFormat("z").parse("CDT"); 
```

有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T17:10:16.197

我会尝试回答你问题的第二部分。试试乔达时间

[http://joda-time.sourceforge.net/index.html](http://joda-time.sourceforge.net/index.html)

如果有帮助，请告诉我们。

# javascript - 未捕获的插入函数参数不是字符串

> ID：15552575
> 
> 赞同：0
> 
> 时间：2013-03-21T16:08:01.883
> 
> 标签：javascript, jquery

控制台在第 5 行和第 8 行显示错误。错误是“未捕获的插入函数参数不是字符串”。任何帮助将不胜感激。谢谢！

```
$(function() {
var animation = false;
function typed(term, message, delay, finish) {
    animation = true;
    var da = 0;
    term.set_prompt('');
    var interval = setInterval(function() {
        term.insert(message[da++]);
        if(da > message.length) {
            clearInterval(interval);
            setTimeout(function() {
                term.set_command('')
                term.set_prompt(message + ' ');
                animation = false;
                finish && finish();
            }, delay);
        }
    }, delay);
}
$('#fyeah').terminal(function(cmd, term) {
    var finish = false;
}, {
    name: 'test',
    greetings: null,
    onInit: function(term) {
        var msg = "testing";
        typed(term, msg, 150, function() {
            finish = true;
        });
    },
    keydown: function(e) {
        if (animation) {
            return false;
        }
    }
}); 
```

});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:20:35.727

`message[da++]`“*不是字符串*”的三种情况：

*   `message`是空字符串
*   (old) IE 不支持括号表示法获取字符串的单个字符，最好使用该`.charAt()`方法
*   在循环的最后一次迭代中，`da == message.length`- 它仅在`da`已经大于长度时才结束。然而，指数是从零开始的，从`0`到`length-1`。

要修复它，请使用

```
// init
var da = 0;
var interval = setInterval(function() {
    if (da < message.length) {
        term.insert(message.charAt(da++)); // maybe better move the incrementing
                                           // out, to the end of the loop
    } else {
        clearInterval(interval);
        // teardown / callback
    }
}, delay); 
```

# google-drive-api - 无法让谷歌驱动器 js 文件上传示例工作

> ID：15552578
> 
> 赞同：0
> 
> 时间：2013-03-21T16:08:12.897
> 
> 标签：google-drive-api

[https://developers.google.com/drive/quickstart-js](https://developers.google.com/drive/quickstart-js)

我遵循（c / p）示例，一切正常（auth等），直到我提交文件。我从驱动器得到的唯一响应是 400：错误请求 - 包含 0 个 mime 部分的无效多部分请求。

这是我的请求标头：

主机 www.googleapis.com

用户代理 Mozilla/5.0 (X11; Linux x86_64; rv:12.0) Gecko/20100101 Firefox/12.0

接受 text/html,application/xhtml+xml,application/xml;q=0.9, */* ;q=0.8

接受语言 en-gb,en;q=0.5

接受编码 gzip，放气

连接保持活动

内容类型多部分/混合；字符集=UTF-8；边界="-------314159265350000023846"

授权承载 ya29.AHES6ZSUZuBpl00000kTgoNfAsfgiffGPKl-TsIeoT0b00000qcoiWE

X-ClientDetails appVersion=5.0%20(X11)&platform=Linux%20x86_64&userAgent=Mozilla%2F5.0%20(X11%3B%20Linux%20x86_64 %3B%20rv%3A12.0)%20Gecko%2F20100101%20Firefox%2F12。 0

X-JavaScript-User-Agent google-api-javascript-client/1.1.0-beta

X-Origin [http://xxx.com](http://xxx.com)

X-Referer [http://xxx.com](http://xxx.com)

X-Goog-Encode-Response-If...base64

引用特征_%2Fam%3DQQ%2Frt%3Dj%2Fd%3D1%2Frs%3DAItR000000MKD-NmdZUrhxHhwd0000eNMw">https://www.googleapis.com/static/proxy.html?jsh=m%3B%2F_%2Fscs%2Fapps-静态%2F_%2Fjs%2Fk%3Doz.gapi.en.Y3In_W4Itv8.O%2Fm%3D_*功能*_%2Fam%3DQQ%2Frt%3Dj%2Fd%3D1%2Frs%3DAItR000000MKD-NmdZUrhxHhwd0000eNMw

内容长度 848332

杂注无缓存

缓存控制无缓存

想法？它可能是一个unicode的东西吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:52:05.037

是的，事实证明上传的 html 代码由于字符集问题而损坏。现在工作。

# c++ - 另一个“未解决的外部符号”错误

> ID：15552581
> 
> 赞同：-3
> 
> 时间：2013-03-21T16:08:21.590
> 
> 标签：c++, opengl, external, symbols

我目前正在为视频游戏开发 OpenGL 框架。该框架包含一个加载着色器的特定程序。在所述程序的类中，我具有以下三个功能：

```
InitShaderProgram(...);
CreateShader(...);
CreateProgram(...); 
```

InitShaderProgram 以这种方式调用 CreateShader 和 CreateProgram：

```
bool ShaderLoader::InitShaderProgram(GLuint &Program)
{
    std::vector<GLuint> ShaderList;

    ShaderList.push_back(ShaderLoader::CreateShader(GL_VERTEX_SHADER, VertexShader));
    ShaderList.push_back(ShaderLoader::CreateShader(GL_FRAGMENT_SHADER, FragmentShader));

    Program = ShaderLoader::CreateProgram(ShaderList);
    std::for_each(ShaderList.begin(), ShaderList.end(), glDeleteShader);

    return GL_TRUE;
} 
```

但是，每当我尝试编译此代码时，它都会给我两个“未解析的外部符号”错误：

```
Error   4   error LNK2019: unresolved external symbol "public: virtual unsigned int __thiscall ShaderLoader::CreateProgram(class std::vector<unsigned int,class std::allocator<unsigned int> > const &)" (?CreateProgram@ShaderLoader@@UAEIABV?$vector@IV?$allocator@I@std@@@std@@@Z) referenced in function "public: bool __thiscall ShaderLoader::InitShaderProgram(unsigned int &)" (?InitShaderProgram@ShaderLoader@@QAE_NAAI@Z)

Error   3   error LNK2019: unresolved external symbol "public: virtual unsigned int __thiscall ShaderLoader::CreateShader(unsigned int,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)" (?CreateShader@ShaderLoader@@UAEIIABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z) referenced in function "public: bool __thiscall ShaderLoader::InitShaderProgram(unsigned int &)" (?InitShaderProgram@ShaderLoader@@QAE_NAAI@Z) 
```

在我的头文件中，我这样定义这三个函数：

```
bool   InitShaderProgram(GLuint&);
GLuint CreateShader(GLenum, const std::string&);
GLuint CreateProgram(const std::vector<GLuint>&); 
```

如果我做对了（我很可能没有做对），编译器就不会理解这些函数的来源。有谁可以帮我离开这里吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:20:04.727

未解析的外部符号意味着编译器已经查看了您编写的代码，并在您正在编译的源文件中生成了所有代码以及链接器查找所需的一组符号。链接器获取所有目标代码文件并将所有已定义符号从一个[翻译单元](http://en.wikipedia.org/wiki/Translation_unit_%28programming%29)（想想源文件及其头文件）映射到所有符号。当它找不到已实现的符号时，它会发出未解析的外部符号。

通常这是因为您未能将库目标文件包含在目标文件的链接器列表中。如果您声明了一个函数但未定义它，则可能是另一个原因。

发出未定义的符号

主文件

```
int foo(); 

int main(int argc, char ** argv)
{
   return foo();
} 
```

这会抱怨，因为我没有定义 foo.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:12:52.063

> 如果我做对了（我很可能没有做对），编译器就不会理解这些函数的来源。

不幸的是没有。错误不是来自编译器，而是来自链接器。

您是否已经实现了这两个函数：ShaderLoader::CreateShader 和 ShaderLoader::CreateProgram？或者只是在标题中声明？你怎么链接？

# mysql - 有没有类似 ORDER BY 的子句？

> ID：15552582
> 
> 赞同：-7
> 
> 时间：2013-03-21T16:08:24.887
> 
> 标签：mysql, sql

在某些查询中，例如 UNION，ORDER BY 子句似乎不起作用，那么在这种情况下该怎么办？有没有类似 ORDER BY 的子句？

就像有一个与“LIMIT x”类似的子句是“SELECT TOP x”，其中 x 是数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:13:19.103

如果你想在一个联合中订购个人选择，你需要括号和一个 LIMIT：

```
(SELECT a FROM b ORDER BY c LIMIT 10)
UNION
(SELECT d FROM e ORDER BY f LIMIT 10) 
```

如果要对联合进行排序，请再次使用括号：

```
(SELECT a FROM b)
UNION
(SELECT d FROM e)
ORDER BY x 
```

您也可以在[手册](http://dev.mysql.com/doc/refman/5.0/en/union.html)中阅读此内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:10:49.503

[这篇文章](https://stackoverflow.com/questions/213851/sql-query-using-order-by-in-union)回答了你的问题。您不需要对 ORDER BY 使用不同的子句，只需对查询使用不同的结构。

# loops - Rails 简单循环条件

> ID：15552587
> 
> 赞同：1
> 
> 时间：2013-03-21T16:08:44.383
> 
> 标签：loops, ruby-on-rails-3.2

这里绝对是新的。

对于我的索引视图，我将如何更改循环条件`<% @complaints.each do |complaint| %>`以执行类似的操作`where @complaint.user_id == current_user`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:17:31.230

最好在控制器中执行此操作，但无论如何在视图中它是这样的：

```
<% @complaints.where(user_id: current_user).each do |complaint| %> 
```

# css - 仅在 IE 中页脚下方的空白

> ID：15552588
> 
> 赞同：8
> 
> 时间：2013-03-21T16:08:45.197
> 
> 标签：css, html, wordpress, footer

我正在为我的公司建立一个 Wordpress 博客，并且我选择了一个我认为会与我们的业务相匹配的主题。我在页脚中添加了小部件区域，以方便自定义。页面加载时，页脚下方会出现一个奇怪的空白，但这仅在 IE 中发生。在 Chrome 中，当我在底部并刷新页面时，我可以看到空白，但是一旦页面加载它就会消失。该页面在除 IE 之外的所有内容中都能正确呈现。任何帮助摆脱这种情况将不胜感激。

这是[博客](http://dev.saiedmusic.com)的实时链接。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T16:28:33.717

您可以尝试几件事。

1.  `line-height: 1`从类中删除`.fb_reset`，因为`#fb-root`div 本质上是 empy 这不应该呈现 - 但是 IE 可能会感到困惑。

2.  添加一个`overflow: hidden`到你的`#footer`和`#container`元素。

# javascript - 数学轮函数

> ID：15552590
> 
> 赞同：2
> 
> 时间：2013-03-21T16:08:53.180
> 
> 标签：javascript

我使用的表格使用以下脚本来计算包含增值税的商品价格：

```
function calculateTotaleIVA() {
          var tot = document.getElementById('totale').value;
          document.getElementById('totale_prodotto').value = Math.round(tot*121)/100;
          totale_prodotto.value = document.getElementById('totale_prodotto').value.replace(".", ",");
          totale.value = document.getElementById('totale').value.replace(".", ",");
          } 
```

此功能工作正常，但我有一个问题。有时结果是这样的：

46,4

我想在屏幕上看到小数点后两位数，如下所示：

46,40

如何修复上述功能来解决它​​？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T16:09:41.913

使用[toFixed](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed)

```
(Math.round(tot*121)/100).toFixed(2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T16:10:30.517

你可以用`toFixed(2)`它

toFixed(位数)

```
(Math.round(tot*121)/100).toFixed(2); 
```

[看这里](http://www.w3schools.com/jsref/jsref_tofixed.asp)

# python - Shell 脚本错误 | 在命令行中工作 - 不在脚本中

> ID：15552600
> 
> 赞同：1
> 
> 时间：2013-03-21T16:09:27.077
> 
> 标签：python, bash, sh, nmap

背景：

我正在使用 NMAP、shell 脚本和 python 脚本对 IP 列表运行扫描。python 部分解析 nmap 的 XML 输出以生成两个列表，一个活动主机列表和一个停机主机列表。然后，python 一遍又一遍地在关闭的主机列表上重新执行 shell 脚本（起点），直到一个变得活跃并且信息被附加到 xml 并且两个主机列表得到更正。

问题：这曾经有效，但现在在关闭主机列表上运行 shell 脚本时出现奇怪的行为（语法错误）。

```
Script:
# Grap Complete Info in XML file
sudo nmap -v -sS -oX full-scan.xml --append-output --no-stylesheet -iL $1

# Set permissions of xml for python script to write
sudo chmod a+rw full-scan.xml

# Clean NMAP XML Root Appends
sed '/<?xml/s/.*//' full-scan.xml > scan.tmp && mv scan.tmp full-scan.xml
sed 's/<\/nmaprun>//g' full-scan.xml > scan.tmp && mv scan.tmp full-scan.xml
sed '/<nmaprun/d' full-scan.xml > scan.tmp && mv scan.tmp full-scan.xml
echo "<nmaprun>" | cat - full-scan.xml > temp && echo "</nmaprun>" >> temp
mv temp full-scan.xml

# Run python parser here
./parseXMLnmap.py full-scan.xml 
```

* * *

```
Error:
./scanIPlist.sh ip.list.down 

Starting Nmap 5.00 ( http://nmap.org ) at 2013-03-21 11:55 EDT
....
Nmap done: 8 IP addresses (0 hosts up) scanned in 0.59 seconds
       Raw packets sent: 16 (672B) | Rcvd: 0 (0B)
de????@????:~/workspace/nmap-script$   File "./scanIPlist.sh", line 6
sudo nmap -v -sS -oX full-scan.xml --append-output --no-stylesheet -iL $1
        ^
SyntaxError: invalid syntax 
```

我对查明问题所在感到困惑......当我使用这个命令时：“sudo nmap -v -sS -oX full-scan.xml --append-output --no-stylesheet -iL ip.list.down "

在命令行中..它工作得很好。您可以看到 nmap 正在执行该命令，那么阻止我的脚本的其余部分继续执行的错误来自哪里？

如果我在 nmap 命令之后注释掉每一行，那么我认为可能是权限问题，但我尝试使用 sudo 执行 sed 和 mv 命令，但这并没有解决问题。

```
Permissions are as follows after the first run on the ORIGINAL IP list:
ls -l
total 32
-rw------- 1 user user 11469 2013-03-21 12:03 full-scan.xml
-rw------- 1 user user   110 2013-03-21 12:03 ip.list.down
-rw------- 1 user user   238 2013-03-20 14:44 ip.list.orig
-rw------- 1 user user   128 2013-03-21 12:03 ip.list.up
-rwx--x--x 1 user user  1528 2013-03-21 10:26 parseXMLnmap.py
-rwx--x--x 1 user user   676 2013-03-21 12:02 scanIPlist.sh 
```

所以问题是我需要一个永不结束的循环，但不会继续创建越来越多的进程。

用户输入开始 -> Shell 脚本 -> Python 脚本 -> Shell 脚本 -> .... 依此类推，直到被用户打断。

以前，在我的 python 代码中，我使用的是：

```
subprocess.call(['./scanIPList.sh', 'ip.list.down']) 
```

这并不好，因为这些进程会保持打开状态，并且只会一遍又一遍地创建它们，直到计算机最终崩溃。我需要它从子进程中分离并在它执行下一个脚本时退出。

我尝试使用这个：

```
subprocess.Popen([sys.executable, './scanIPlist.sh', 'ip.list.down']) 
```

这一定是我现在遇到的问题的原因。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:47:32.363

`SyntaxError: invalid syntax`是一个`python`错误。看起来您正试图在 python 程序中运行 shell 命令。你可能需要`import subprocess`.

或者也许你有`#!/usr/bin/python`在你的 shell 脚本的顶部？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:21:14.643

您的问题是对[subprocess.Popen](http://docs.python.org/2/library/subprocess.html#subprocess.Popen)的调用实际上是调用 Python 解释器（来自[sys.executable](http://docs.python.org/2/library/sys.html#sys.executable)）：

```
subprocess.Popen([sys.executable, './scanIPlist.sh', 'ip.list.down']) 
```

这里有一些帮助的上下文：

```
>>> import sys
>>> print sys.executable
/usr/bin/python
>>> 
```

Popen 的第一个参数应该是要传递给`exec`（或类似）的数组或字符串，因此在这种情况下，第一个参数应该是“/bin/sh”或“./scanIPlist.sh”，如果该 shell脚本是可执行的：

```
subprocess.Popen(['/bin/sh', './scanIPlist.sh', 'ip.list.down'])
# or
subprocess.Popen(['./scanIPlist.sh', 'ip.list.down']) 
```

# python - 从函数在python 3中创建全局变量

> ID：15552601
> 
> 赞同：0
> 
> 时间：2013-03-21T16:09:30.303
> 
> 标签：python, html, variables, global, python-3.3

我想知道为什么我不能在函数结束后访问变量：“variable_for_raw_data”。代码是这样的：

```
def htmlfrom(Website_URL):
    import urllib.request
    response = urllib.request.urlopen(Website_URL)
    variable_for_raw_data =(input("What will this data be saved as: "))
    global variable_for_raw_data
    variable_for_raw_data = response.read() 
```

现在为什么我不能在函数结束后访问变量“variable_for_raw_data”？

注意事项：

Python 3.3 urllib 不是 urllib2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:06:38.747

看起来您正在尝试动态创建变量，我想您的代码看起来像这样。

```
def htmlfrom(website_url):
    import urllib.request
    response = urllib.request.urlopen(website_url)
    variable_for_raw_data =(input("What will this data be saved as: "))
    global variable_for_raw_data
    variable_for_raw_data = response.read()

if __name__ == "__main__":

    htmlfrom("www.stackoverflow.com")

    #html_stackoverflow is never created it is the value
    #of variable_for_raw_data before variable_for_raw_data
    #is overridden by response.read()

    #entering information into input doesn't create a variable
    print(html_stackoverflow) 
```

这是我的做法：

```
import urllib.request

def htmlfrom(website_url): 
    '''
       docstrings
    '''

    response = urllib.request.urlopen(website_url)
    variable_for_raw_data = response.read()
    return variable_for_raw_data

if __name__ == "__main__":

    file_name = input("What will this data be saved as: ")
    html_from_website = htmlfrom("www.stackoverflow.com")

        with open(file_name, 'w') as f: 
        f.write(html_from_website) 
```

**解释**

如果您在函数内部有导入语句，则只能在函数内部访问（即其他函数无法访问它）

```
import urllib.request 
```

[PEP 8](http://www.python.org/dev/peps/pep-0008/)有关于如何在 python 中命名事物的指南 CamelCase 通常保留给类名

```
def htmlfrom(website_url): 
    '''
        docstring 
    ''' 
```

[文档字符串](http://www.python.org/dev/peps/pep-0257/)通常是个好主意。

查看此问题以获取有关正确使用[globals](https://stackoverflow.com/q/146557/322909)的更多信息。根据我对您的情况的了解，我认为您不需要使用它们。

```
 response = urllib.request.urlopen(website_url)
    variable_for_raw_data = response.read()
    return variable_for_raw_data 
```

如果您不了解[`if **name** == ' **main** '：](https://stackoverflow.com/q/419163/322909)您应该阅读它。

```
if __name__ == "__main__": 
```

不要忘记使用有意义的变量名并且不要覆盖 [内置](http://docs.python.org/2/library/functions.html)函数（即 file = "foo.txt" 将覆盖内置文件）

```
 file_name = input("What will this data be saved as: ")
    html_from_website = htmlfrom("www.stackoverflow.com") 
```

[您可以在此处](http://www.python.org/dev/peps/pep-0343/)了解有关上下文管理器的更多信息

```
 with open(file_name, 'w') as f: 
        f.write(html_from_website) 
```

使用 的编辑`globals()`，**根本不存在任何**用例。

```
def htmlfrom(website_url):
    import urllib.request
    response = urllib.request.urlopen(website_url)
    variable_for_raw_data =(input("What will this data be saved as: "))
    globals()[variable_for_raw_data] = response.read() 
```

# php - 如何在加载网页之前在 Chrome 中检查初始 Internet 连接

> ID：15552603
> 
> 赞同：3
> 
> 时间：2013-03-21T16:09:34.980
> 
> 标签：php, javascript, jquery, html

我正在建立一个网络信息亭。计算机启动并直接进入 Chrome。浏览器在建立网络连接之前加载，因此用户总是看到的第一件事就是连接错误。

我正在尝试创建一个初始的本地托管网页，等待连接建立，然后将页面重定向到网络上托管的实时网页。

我试过了：

```
navigator.onLine 
```

但在 Chrome 中，这只检查浏览器是否处于“在线模式”，而不是实际连接是否有效。结果是它总是重定向到没有连接的实时页面，并且用户收到连接错误。

我试过 AJAX 请求，但结果总是：

> Access-Control-Allow- Origin`http://localhost`不允许来源

我无法使用任何标志启动 Chrome 来禁用它。它必须是 Chrome 的默认风格。

所以我的问题是：这个问题有没有可行的解决方案？我愿意使用 Javascript / JQuery / PHP / HTML 等的任意组合。

这是我的本地托管网页的代码：

```
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Kiosk Splash</title>
  <link rel=stylesheet type="text/css" href="jquery/css/ui-lightness/jquery-ui-1.10.2.custom.css">
  <script src="jquery/js/jquery-1.9.1.js"></script>
  <script src="jquery/js/jquery-ui-1.10.2.custom.js"></script>
</head>
<body>
<div id="dialog" style="text-align:center;">
    <p>
        <font font face="verdana" size="5">The Kiosk is establishing a connection to the network...</font>
    </p>
    <div id="progressbar" style="width: 50%; margin: 0 auto;"></div>
</div>
<script>
$( "#dialog" ).dialog({ minWidth: 1000 });
$(".ui-dialog-titlebar-close", this.parentNode).hide();
$( "#progressbar" ).width(800);
$( "#progressbar" ).progressbar({
  value: false
});
      function connect(){
      try{
        $.ajax({url:"http://intranet/webpage",
        statusCode: {
    200: function() {
      window.location.replace("http://live/webpage");
    }
  },
     error: function(e){
         console.log(e);
         setTimeout(connect, 5000);
     }, 
       dataType:"json"
   });
}catch(e){
     console.log(e);         
    setTimeout(connect, 5000);
}
} 
connect();
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:27:42.577

JSONP 和 jquery 的一个相当肮脏的 hack

使用 jsfiddle jsonp 测试：

```
(function testConnection() {
  setTimeout(testConnection, 2000);
  $.getJSON("http://jsfiddle.net/echo/jsonp/?callback=redirect&cb=?");
})()

function redirect() {
   window.location = 'http://www.google.com'; // REDIRECT TARGET
} 
```

第一个版本：

```
(function testConnection() {
    setTimeout(testConnection, 2000);
    $.getJSON(
       "http://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?",
       {format:'json'}
    ).done(function(result){
        window.location = 'http://www.google.com'; // REDIRECT TARGET
    });
})() 
```

按预期工作，您可能希望拥有自己的 Web 服务器，以便不依赖特定的 API

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:21:13.477

此行为旨在防止从 localhost 连接的恶意脚本，当然，当您尝试实现 kiosk 时，这只是一种痛苦。

我认为您需要做的与这个完全不同的问题中的答案相同：[Access-Control-Allow-Origin 不允许使用 Origin](https://stackoverflow.com/questions/10143093/origin-is-not-allowed-by-access-control-allow-origin)

Matt Mombrea 提出了这样的建议：

```
Access-Control-Allow-Origin: * 
```

“这将允许跨域 AJAX。在 PHP 中，您需要像这样修改响应：”

```
<?php header('Access-Control-Allow-Origin: *'); ?> 
```

然后，您可以轮询您控制的使用此访问控制权限响应的在线服务器，以查看您的 Internet 连接是否已打开。

否则，您可以使用 localhost PHP 服务器脚本尝试访问服务器，并让您的 ajax localhost 页面查询 localhost 脚本以获取答案。

# android - 为什么拼写错误的 android:name 没有警告或错误？

> ID：15552605
> 
> 赞同：0
> 
> 时间：2013-03-21T16:09:39.303
> 
> 标签：android

我有一个接收器

```
 <receiver android:name=".AlarmReceiver" /> 
```

但是接收者的类名是 AlarmReciver （拼写错误）

为什么android-sdk在运行时显示这个错误或显示这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T16:15:10.217

因为该类是通过[反射](http://docs.oracle.com/javase/tutorial/reflect/index.html)加载的，所以编译器不知道该类不存在（对于编译器，这是 a `String`，而不是类名）。当 JVM 将尝试通过反射加载该类时，它应该抛出一个`ClassNotFoundException`指示没有这样的类。

# c# - 删除列表中的最后一个字符

> ID：15552611
> 
> 赞同：-2
> 
> 时间：2013-03-21T16:09:55.590
> 
> 标签：c#, string, linq, list, c#-4.0

我正在从数据集中构建一个列表，为 12345_9876,125675_0987，

我尝试`,` 像处理字符串一样从列表中删除最后一个..

```
value.TrimEnd(','); 
```

我们可以为列表做类似的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:11:28.460

认为你只是想要这个？：

```
 List<string mylistfromdataset = // I dunno how you populated it
  var newlist = mylistfromdataset.Select(x=> x.TrimEnd(',')).ToList(); 
```

**在海报清除问题后进行**编辑，您可以使用这 2 行代码创建一个新列表，其中最后一个字符串 , 被修剪。****

 **```
 var list = listofstring.Take(listofstring.Count - 1).ToList();
   list.Add(listofstring.Last().TrimEnd(',')); 
```

（制作一个不包括最后一项的列表。然后将最后一项用 , 修剪到新列表中。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T16:24:53.667

我希望这能帮到您？

```
var lastElement = yourList.ElementAt<string>(yourList.Count - 1).TrimEnd(',');
yourList.RemoveAt(yourList.Count - 1);
yourList.Insert(yourList.Count,lastElement); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T16:55:21.447

只需使用 String.Join：

```
String delimitedList = String.Join(",", yourList); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T17:59:52.197

```
int i=value.LastIndexOf(",");
if(i!=-1) 
   value=value.Remove(i,1); 
```**

# php - 如何使用codeigniter在mysql中保存多行

> ID：15552612
> 
> 赞同：0
> 
> 时间：2013-03-21T16:10:01.650
> 
> 标签：php, mysql, codeigniter

我有一个酒店网站的表格，我想更新它的服务，而客户想一次更新多个服务。但是，我迷失了如何将其与模型一起保存在数据库中。

我已经构建了我的控制器，它看起来像这样：

```
$items = array(
        array(
                'id'           => $this->input->post('id1', true),
                'hotel_id'     => $hotel_id,
                'des_servicio' => $this->input->post('des_servicio1', true),
                'est_activo'   => $this->input->post('est_activo1', true)
        ),
        array(
                'id'           => $this->input->post('id2', true),
                'hotel_id'     => $hotel_id,
                'des_servicio' => $this->input->post('des_servicio2', true),
                'est_activo'   => $this->input->post('est_activo2', true)
        ),
        array(
                'id'           => $this->input->post('id3', true),
                'hotel_id'     => $hotel_id,
                'des_servicio' => $this->input->post('des_servicio3', true),
                'est_activo'   => $this->input->post('est_activo3', true)
        )
);

$this->hotel_model->save_multiple($items); 
```

[更新]

这就是我的新模型的样子：

```
function save_multiple($items = array())
{
    $this->db->insert_batch($this->__tabla, $items);
    return $this->db->affected_rows();
} 
```

我的问题是，即使我只填充 3 个字段，它现在也会创建 10 行（我的原始表单有 10 个字段）。所以在我的数据库中存储了 3 个服务，还有 7 个空白行。怎么能改变呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:23:25.190

```
foreach $items //I get an error here
    as $item 
```

应该

```
foreach ( $items as $item ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:42:17.767

请记住，如果未设置该值，则 input->post() 将返回 false。因此，请检查该值是否设置为将其放入数组中。然后当模型收到它时。它拯救了他们所有人。或者另一种选择是从传入的数组在模型中创建一个新数组，然后将新数组传递给 insert_batch() 函数。

```
$items = array();

$id = $this->input->post('id1', true);
if( $id != false ) {
    $items[] = array(
        'id'           => $id, true),
        'hotel_id'     => $hotel_id,
        'des_servicio' => $this->input->post('des_servicio1', true),
        'est_activo'   => $this->input->post('est_activo1', true)
    );
}

$id = $this->input->post('id2', true);
if( $id != false ) {
    $items[] = array(
        'id'           => $id, true),
        'hotel_id'     => $hotel_id,
        'des_servicio' => $this->input->post('des_servicio2', true),
        'est_activo'   => $this->input->post('est_activo2', true)
    );
}
.... 
```

# vb.net - VB.NET BindingSource 不能是它自己的数据源... datagridview 中的错误

> ID：15552613
> 
> 赞同：0
> 
> 时间：2013-03-21T16:10:01.670
> 
> 标签：vb.net, datagridview, bindingsource

我正在尝试在 datagridview 中进行搜索，遍历每个单元格并比较 2 个字符串 - SearchString 和 CellString。

我将工作分成四个并行工作的线程（通过给每个线程一个不同的四分之一行来处理）。线程不能同时读取同一个单元格，因为它们循环遍历不同的行，所以我认为错误不存在。

每个线程执行以下操作：

```
 dim CellString as string
   For i As Integer = startrow To endrow

        For Each cell As DataGridViewCell In DataGridView.Rows(i).Cells

            CellString = cell.Value.ToString.ToLower ''Error appears here

            If cell.ColumnIndex <> 4 Then
                Select Case Compare(CellString, SearchString) ''complex function that compares 2 strings

                   ''....
                End Select
            End If
        Next
  Next 
```

我得到的错误是：

BindingSource 不能是它自己的数据源。不要将 DataSource 和 DataMember 属性设置为引用回 BindingSource 的值。

我不明白为什么会发生这种情况，因为我没有搞乱 BindingSource 也没有搞乱 DataSource。此外，我不做任何更新，我只将每个单元格作为字符串读取。

我找不到任何类似的问题，所以任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T17:16:41.910

如果没有看到你的整个代码，很难准确地回答这个问题，但一切都表明你正试图从你正在创建的线程中访问你的 UI 的某些元素（Datagridview 是其中的一部分）。

根据微软的说法，这是不合法的：

*按照设计，不能在创建窗体或控件的线程之外的线程上调用 Windows 窗体或控件方法*

查看[这篇文章](http://support.microsoft.com/kb/318607)了解更多信息。它帮助我解决了类似的问题。

# sql - 在 sql 和 c# 中使用级联和连接表从 2 个表中删除

> ID：15552615
> 
> 赞同：0
> 
> 时间：2013-03-21T16:10:05.983
> 
> 标签：sql, database-design

我有一个使用数据库的 Winforms 应用程序。

现在在数据库中我有这些表：

1.  `table A`（PK = 身份 - 自动递增）
2.  `table B`（PK = 身份 - 自动递增）
3.  `table C`（FK = 表 A 的 PK 和表 B 的 PK）

表 A 和 B 是陌生人，所以我添加了表 C 来连接它们。

我正在尝试进行级联删除，因此当我从表 A 中删除一行时，它会从表 B 和 C 中删除相关行。

我设置了表 A 和 C 以及 B 和 C 之间的关系。

但是，当我从表 A 中删除一行时，它会从表 C 中删除，而不是从 B 中删除。为什么？

我不能将表 C 设置为表 B 的父级，因为主键......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:18:24.353

当您希望进行级联处理时，我建议您添加特定处理以删除您的数据。最佳实践，以控制您的删除系统。

# javascript - 事件点击动态变量

> ID：15552620
> 
> 赞同：-1
> 
> 时间：2013-03-21T16:10:15.517
> 
> 标签：javascript, google-maps, events

大家好，我有一个使用谷歌地图的网站。问题是：我在地图中添加了一些标记，并且我希望每个标记在单击时提醒我其数据。使用我的代码警报只有最后一个（test9），因为变量是相同的。如何添加动态变量的监听器？这是我的代码：

```
for (i = 0; i<10; i++){
    myLatlng = new google.maps.LatLng((44.900)+(i/10), 11.634521);
    var marker = new google.maps.Marker({
      position: myLatlng,
      map: map,
      title:"Hello World!"+i,
      data:"test"+i
    });
    google.maps.event.addListener(marker, 'click', function() {
      alert(marker.data);
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:43:05.320

好的，尝试添加一个新函数，例如 addMarkerFunction(marker)

如

```
 function addMarkerFunction(marker){
      google.maps.event.addListener(marker, 'click', function() {
    alert(marker.data);
      });
    } 
```

然后将您的 for 循环代码编辑为：

```
 for (i = 0; i<10; i++){
myLatlng = new google.maps.LatLng((44.900)+(i/10), 11.634521);
var marker = new google.maps.Marker({
  position: myLatlng,
  map: map,
  title:"Hello World!"+i,
  data:"test"+i
});
  addMarkerFunction(marker);
 } 
```

删除对 google.maps.event.addListener 的调用

# asp.net-mvc - 如何在 Azure 上运行 excel？

> ID：15552622
> 
> 赞同：0
> 
> 时间：2013-03-21T16:10:17.953
> 
> 标签：asp.net-mvc, excel, azure

我正在使用 MVC4 在 ASP.NET 中实现一个新应用程序。我想使用 Azure 来托管我的项目。我已经创建了一个云，但是我的数据表有问题。我正在使用一个计算一些价格的excel文件。我尝试使用 openXML，但它无法重新计算我的工作表，所以我无法使用它。

然后，我想在我的云上安装 Microsoft Excel 来运行我的 excel 文件。

你有什么不同的想法吗？我的解决方案可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:46:10.703

反对在服务器上运行 Office 的建议双重适用于 Azure。简短的回答始终是“不要这样做”。[几年前](https://stackoverflow.com/questions/87576/does-anyone-have-a-good-example-of-controlling-multiple-excel-instances-from-a/90833)我回答了一个类似的问题，答案仍然适用。（使用本机 .NET 库）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:24:25.177

我个人会像瘟疫一样避免这种情况。

除非您在 Excel 工作表中进行大量计算，否则将计算转换为 asp 列表或本地 sql 实例可能比尝试通过 Azure asp 操作 Excel 更容易。

如果您可以详细说明工作表中发生的情况，我们可能会帮助您找到解决问题的方法。

**编辑：**

似乎您可能被迫使用 Excel，如果是这样，以下 Microsoft 知识库文章列出了很长的问题列表以及在服务器端操作 Excel 文件的可能解决方法：

[**Office 服务器端自动化的注意事项**](http://support.microsoft.com/kb/257757)

# android - 当我单击一个按钮时，无论我如何实现 onClick，我的应用程序都会崩溃

> ID：15552629
> 
> 赞同：2
> 
> 时间：2013-03-21T16:10:44.437
> 
> 标签：android, android-intent, onclick, android-fullscreen

```
 package com.tchotchke.weatherpaper;

import android.annotation.TargetApi;
import android.app.Activity;
import android.content.Intent;
import android.os.Build;
import android.os.Bundle;
import android.os.Handler;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

import com.tchotchke.weatherpaper.util.SystemUiHider;

public class FullscreenActivity extends Activity{

    OnClickListener buttons;

    private static final boolean AUTO_HIDE = true;
    private static final int AUTO_HIDE_DELAY_MILLIS = 3000;
    private static final boolean TOGGLE_ON_CLICK = true;
    private static final int HIDER_FLAGS = SystemUiHider.FLAG_HIDE_NAVIGATION;
    private SystemUiHider mSystemUiHider;
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_fullscreen);
        final View controlsView = findViewById(R.id.fullscreen_content_controls);
        final View contentView = findViewById(R.id.fullscreen_content);

        Button objects_button = (Button)findViewById(R.id.objects_button);

        buttons = new OnClickListener(){
            @Override
            public void onClick(View v){
                Intent intent = new Intent("com.tchotchke.MYOBJECTS");
                startActivity(intent);
            }
        };
        objects_button.setOnClickListener(buttons);

        mSystemUiHider = SystemUiHider.getInstance(this, contentView, HIDER_FLAGS);
        mSystemUiHider.setup();
        mSystemUiHider.setOnVisibilityChangeListener(new SystemUiHider.OnVisibilityChangeListener`() {`
                    // Cached values.
                    int mControlsHeight;
                    int mShortAnimTime;

                    @Override
                    @TargetApi(Build.VERSION_CODES.HONEYCOMB_MR2)
                    public void onVisibilityChange(boolean visible) {
                        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB_MR2) {
                            // If the ViewPropertyAnimator API is available
                            // (Honeycomb MR2 and later), use it to animate the
                            // in-layout UI controls at the bottom of the
                            // screen.
                            if (mControlsHeight == 0) {
                                mControlsHeight = controlsView.getHeight();
                            }
                            if (mShortAnimTime == 0) {
                                mShortAnimTime = getResources().getInteger(
                                        android.R.integer.config_shortAnimTime);
                            }
                            controlsView.animate()
                                    .translationY(visible ? 0 : mControlsHeight)
                                    .setDuration(mShortAnimTime);
                        } else {
                            // If the ViewPropertyAnimator APIs aren't
                            // available, simply show or hide the in-layout UI
                            // controls.
                            controlsView.setVisibility(visible ? View.VISIBLE : View.GONE);
                        }

                        if (visible && AUTO_HIDE) {
                            // Schedule a hide().
                            delayedHide(AUTO_HIDE_DELAY_MILLIS);
                        }
                    }
                });

        contentView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                if (TOGGLE_ON_CLICK) {
                    mSystemUiHider.toggle();
                } else {
                    mSystemUiHider.show();
                } }});   }

    @Override
    protected void onPostCreate(Bundle savedInstanceState) {
        super.onPostCreate(savedInstanceState);

        delayedHide(100);
    }

    View.OnTouchListener mDelayHideTouchListener = new View.OnTouchListener() {
        @Override
        public boolean onTouch(View view, MotionEvent motionEvent) {
            if (AUTO_HIDE) {
                delayedHide(AUTO_HIDE_DELAY_MILLIS);
            }
            return false;
        }
    };

    Handler mHideHandler = new Handler();
    Runnable mHideRunnable = new Runnable() {
        @Override
        public void run() {
            mSystemUiHider.hide();
        }
    };

    private void delayedHide(int delayMillis) {
        mHideHandler.removeCallbacks(mHideRunnable);
        mHideHandler.postDelayed(mHideRunnable, delayMillis);
    }

    } 
```

我的 logcat 看起来像这样（在单击按钮之前没有错误）

```
- 03-21 15:57:30.871: D/gralloc_goldfish(1034): Emulator without GPU emulation detected.

-03-21 15:57:31.812: I/Choreographer(1034): Skipped 107 frames!  The application may be doing too much work on its main thread.

-03-21 15:57:32.531: D/dalvikvm(1034): GC_CONCURRENT freed 185K, 11% free 2580K/2896K, paused 3ms+3ms, total 197ms

-03-21 15:57:51.971: I/Choreographer(1034): Skipped 32 frames!  The application may be doing too much work on its main thread.

-03-21 15:57:58.684: D/AndroidRuntime(1034): Shutting down VM

-03-21 15:57:58.692: W/dalvikvm(1034): threadid=1: thread exiting with uncaught exception (group=0x40a71930)

-03-21 15:57:58.702: E/AndroidRuntime(1034): FATAL EXCEPTION: main

-03-21 15:57:58.702: E/AndroidRuntime(1034): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.tchotchke.MYOBJECTS }

-03-21 15:57:58.702: E/AndroidRuntime(1034):    at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1622)

-03-21 15:57:58.702: E/AndroidRuntime(1034):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1417)

-03-21 15:57:58.702: E/AndroidRuntime(1034):    at android.app.Activity.startActivityForResult(Activity.java:3370)

-03-21 15:57:58.702: E/AndroidRuntime(1034):    at android.app.Activity.startActivityForResult(Activity.java:3331)

-03-21 15:57:58.702: E/AndroidRuntime(1034):    at android.app.Activity.startActivity(Activity.java:3566)

-03-21 15:57:58.702: E/AndroidRuntime(1034):    at android.app.Activity.startActivity(Activity.java:3534)

-03-21 15:57:58.702: E/AndroidRuntime(1034):    at com.tchotchke.weatherpaper.FullscreenActivity$3.onClick(FullscreenActivity.java:40)

-03-21 15:57:58.702: E/AndroidRuntime(1034):    at android.view.View.performClick(View.java:4204)

-03-21 15:57:58.702: E/AndroidRuntime(1034):    at android.view.View$PerformClick.run(View.java:17355)

-03-21 15:57:58.702: E/AndroidRuntime(1034):    at android.os.Handler.handleCallback(Handler.java:725)

-03-21 15:57:58.702: E/AndroidRuntime(1034):    at android.os.Handler.dispatchMessage(Handler.java:92)

-03-21 15:57:58.702: E/AndroidRuntime(1034):    at android.os.Looper.loop(Looper.java:137)

-03-21 15:57:58.702: E/AndroidRuntime(1034):    at android.app.ActivityThread.main(ActivityThread.java:5041)

-03-21 15:57:58.702: E/AndroidRuntime(1034):    at java.lang.reflect.Method.invokeNative(Native Method)

-03-21 15:57:58.702: E/AndroidRuntime(1034):    at java.lang.reflect.Method.invoke(Method.java:511)

-03-21 15:57:58.702: E/AndroidRuntime(1034):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)

-03-21 15:57:58.702: E/AndroidRuntime(1034):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)

-03-21 15:57:58.702: E/AndroidRuntime(1034):    at dalvik.system.NativeStart.main(Native Method) 
```

这是我的清单，抱歉我把它漏掉了：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.tchotchke.weatherpaper"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <activity
            android:name="com.tchotchke.weatherpaper.FullscreenActivity"
            android:configChanges="orientation|keyboardHidden|screenSize"
            android:label="@string/app_name"
            android:theme="@style/FullscreenTheme" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.tchotchke.weatherpaper.MyObjects"
            android:label="@string/dummy_button">
            <action android:name="android.intent.action.MYOBJECTS"/>
        </activity>

    </application>

</manifest> 
```

我对清单的工作方式不是很确定，但从我所看到的来看，它似乎是合法的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T16:14:45.957

它没有找到您的活动`"com.tchotchke.MYOBJECTS`，您需要在清单中声明此活动。如果这是您项目中的一项活动，那么意图通常通过以下方式完成：

```
Intent intent = new Intent(YourCurrentClassName.this, MYOBJECTS.class);
startActivity(intent); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:39:59.220

```
Intent intent = new Intent(this, MYOBJECTS.class);
intent.setAction("com.tchotchke.MYOBJECTS");
startActivity(intent); 
```

你好朋友它可以通过上述方式完成

# php - 将可变长度数组传递给类方法

> ID：15552633
> 
> 赞同：1
> 
> 时间：2013-03-21T16:10:52.010
> 
> 标签：php, arrays, methods

我正在尝试为自己创建一个小的 MVC 框架，并使用类似于： 的 url 结构`http://www.example.com/className/methodName/var1/var2/var3`。我想让它能够适应任意数量的变量。

我有我需要的所有信息，除了`/var1/var2/var3`零件。目前我把它放在“/”上的一个数组中，所以：`var[0] = "var1",var[1] = "var2",var[2] = "var3"`

由于将被调用的方法是未知的，并且每种方法都可能需要不同数量的参数，我想找出一种能够将参数传递为的方法：

```
$controller->$function($var1, $var2, $var3); 
```

而不是

```
$controller->$function($var); 
```

我意识到我可以将逗号分隔的变量串在一起，例如`$var1, $var2, $var3`并使用 eval() 来做我想做的事，但我想知道是否有更好的方法来解决它。我宁愿不为此使用 eval() ，因为它将使用用户提交的数据。

最坏的情况，我想我会在评估之前尝试清理数据，但我仍然想避免它。

我的另一个潜在想法是使用 foreach() 并遍历方法调用中的每个元素。但即使这样对我来说也有点乱。

附带说明一下，传递可变数量的参数以将它们组合在一个数组中并传入单个参数的标准方法是什么？

如果有人知道更优雅的方法来做到这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:13:49.080

使用[call_user_func_array](http://php.net/manual/en/function.call-user-func-array.php)

```
call_user_func_array(array($controller, $function), array($var1, $var2...)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:51:28.673

@Dogbert 的回答将补充我将要提出的建议。

您可以创建一个不接受参数的函数，并且您可以自由传递尽可能多的参数（或根本不传递参数），您只需要使用 PHP 函数，如: `func_get_args()`，`func_num_args()`并`func_get_arg(int arg_index)`进行操作。

下面是一个示例：

```
function syncOrderRelation(){
    $num_arguments = func_num_args();
    $arguments = func_get_args();
    #gets all the arguments in the request
    list($userID,$spID,$productID) = $arguments;
    #if you know what you're expecting or
    for($i = 0; $i < $num_arguments; $i++){
            $argument_at_index = func_get_arg($i);
    }
} 
```

您可以通过以下方式调用此函数：

```
syncOrderRelation();
syncOrderRelation($var1,$var2,var3);
syncOrderRelation($var1);
#or you could call it as @Dogbert suggested since the function will accept whatever
#arguments you supply 
```

剩下的就看你了……祝你编码愉快！

# visual-studio-2010 - tfs31001：无法连接到 tfs

> ID：15552634
> 
> 赞同：0
> 
> 时间：2013-03-21T16:10:52.843
> 
> 标签：visual-studio-2010, tfs

我安装了 VS 2012 并连接到 TFS，但由于框架 4.5 的问题，我不得不卸载框架 4.5 安装的 VS 2010，但现在我无法连接到 TFS。我添加了服务器，但是当我尝试连接到项目集合时出错。我卸载了 VS 2012。我无法删除本地工作区，我认为这可能会导致问题。我得到错误：

TF31001：无法连接到位于 SERVERNAME 的团队 Foundation Server。服务器返回以下错误：找不到字段：“Microsoft.TeamFoundation.IntegrationServiceIdentifiers.SyncService。”

PS：我的队友可以连接服务器。

我怎样才能克服这个问题？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:16:51.743

您是否已经尝试通过网络浏览器从您的计算机浏览到 TFS？你有没有把[这个软件](http://www.microsoft.com/en-us/download/details.aspx?id=29082)安装到你的visual studio 2010

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:18:57.763

这似乎是一个奇怪的答案，但您是否尝试过清除您的 Internet 临时文件和缓存？多年来，我在使用 TFS 时遇到了一些问题，并且发现这对我来说通常适用于连接问题。参考：[http ://technet.microsoft.com/en-us/subscriptions/ms244130(v=vs.90).aspx](http://technet.microsoft.com/en-us/subscriptions/ms244130(v=vs.90).aspx)

# c++ - Python构建脚本错误

> ID：15552636
> 
> 赞同：0
> 
> 时间：2013-03-21T16:10:55.080
> 
> 标签：c++, python, g++, gsl

我正在尝试使用 python 构建脚本编译软件，但遇到以下错误。

```
python build
[CC] cmd\threshold.o
 [CC] src\dwi/SH.o[CC] src\mrview/sidebar/orientation_plot.o

[CC] cmd\read_dicom.o
[CC] lib\file\dicom\dict.o
[CC] cmd\gen_unit_warp.o
[CC] cmd\mrinfo.o
 [CC] lib\file\dicom\image.o

 ERROR:
ERROR:  [CC] cmd\threshold.o[CC] src\dwi/SH.o

g++ -c -Wall -march=i686 -fno-strict-aliasing -DGL_GLEXT_PROTOTYPES -DUSE_TR1 -O
2 -IC:/MinGW/msys/1.0/local/include -DGSL_DLL -mms-bitfields -IC:/gtkmm64/includ
e/glibmm-2.4 -IC:/gtkmm64/lib/glibmm-2.4/include -IC:/gtkmm64/include/sigc++-2.0
 -IC:/gtkmm64/lib/sigc++-2.0/include -IC:/gtkmm64/include/glib-2.0 -IC:/gtkmm64/
lib/glib-2.0/include -Ilib -Isrc cmd\threshold.cpp -o cmd\threshold.og++ -c -Wal
l -march=i686 -fno-strict-aliasing -DGL_GLEXT_PROTOTYPES -DUSE_TR1 -O2 -IC:/MinG
W/msys/1.0/local/include -DGSL_DLL -mms-bitfields -IC:/gtkmm64/include/glibmm-2.
4 -IC:/gtkmm64/lib/glibmm-2.4/include -IC:/gtkmm64/include/sigc++-2.0 -IC:/gtkmm
64/lib/sigc++-2.0/include -IC:/gtkmm64/include/glib-2.0 -IC:/gtkmm64/lib/glib-2.
0/include -Ilib -Isrc src\dwi/SH.cpp -o src\dwi/SH.o

failed with output:

In file included from lib/ptr.h:26:0,
                 from lib/args.h:26,
                 from lib/app.h:30,
                 from cmd\threshold.cpp:30:
lib/mrtrix.h:69:29: fatal error: gsl/gsl_version.h: No such file or directory
compilation terminated. 
```

它正在寻找的文件“gsl_version.h”位于 C:\GnuWin32\include\gsl 中，并且 C:\GnuWin32\include 包含在我的路径中。那么为什么我会收到这个错误呢？

非常感激！！

杰西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T12:01:19.207

要修复此错误，我必须添加一个指向 gsl 目录的环境变量 LIB_GSL：C:\GnuWin32\include\gsl

干杯杰西

# c# - 在独立于单元格的编辑模式下获取选定 DataGridViewRow 的特定单元格，输入该单元格以供选择

> ID：15552637
> 
> 赞同：0
> 
> 时间：2013-03-21T16:10:56.237
> 
> 标签：c#, .net, datagridview

我有一个 DataGridView，它有两列和几行。第一列包含对象的某些属性的名称，第二列应由用户填写值。

如何在编辑模式下自动获取选定行的第二列，而不依赖于为选择行而输入的列？
这意味着，如果选择了一行，则应该可以立即在该特定行的第二列中输入一些值，即使该行是通过输入该行的第一列来选择的。

到目前为止，第一列具有属性`DataGridRowColumns.ReadOnly = true`，第二列具有`DataGridViewColumn.ReadOnly = false`. 网格具有以下属性：`DataGridView.MultiSelect = false`和`DataGridView.SelectionMode = FullRowSelect`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:15:47.587

您可以尝试使用此代码

```
protected void DataGrid1_ItemDataBound(object sender, DataGridItemEventArgs e)
{

    if (e.Item.ItemType == ListItemType.EditItem)
    {
            DataRowView dataItem1 = (DataRowView)e.Item.DataItem;
            var result = (string)dataItem1.Row["YourColumnName"];
            ......
    }    } 
```

# vb.net - 如何隐藏对话框而不隐藏 vb.net 中的主窗体？

> ID：15552640
> 
> 赞同：1
> 
> 时间：2013-03-21T16:11:05.050
> 
> 标签：vb.net, forms, modal-dialog

在主窗体“frmMain.vb”中，我有一个按钮，单击该按钮时会运行以下代码：

```
 Dim myform as New frmMyDialog
    myform.ShowDialog() 
```

在“frmMyDialog.vb”表单上，用户可以启动主表单的公共函数，我需要隐藏对话框直到函数结束，所以我写了这段代码：

```
Private Sub btnStartProcess_Click(sender As System.Object, e As System.EventArgs) Handles btnStartProcess.Click

    'hide the dialog
    Me.Hide()

    'start the sub of the main form
    frmMain.TestSub()

    'close the dialog
    Me.Close()

End Sub 
```

但是，当对话框隐藏时，主窗体将最小化。如何隐藏对话框而不隐藏主窗体？

（“frmMyDialog.vb”的“formBorderStyle”属性为“FixedDialog”，不知道能不能帮上忙。）

# c++ - 如何在键盘布局更改时收到通知？

> ID：15552641
> 
> 赞同：0
> 
> 时间：2013-03-21T16:11:07.053
> 
> 标签：c++, c, windows, keyboard

我正在编写一个应用程序，它的行为会根据所选的键盘布局而有所不同。我一直在搜索，我看到每当应用程序的布局发生更改时，应用程序都会收到一条消息（[WM_INPUTLANGCHANGE](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632630%28v=vs.85%29.aspx)，本质上是在布局更改时它具有焦点）。

但我希望在键盘布局发生变化时得到通知，不仅是该应用程序具有焦点；例如，如果更改发生在您使用 Word 工作时。

任何人都知道这是否可能？也许挂钩一些函数调用或内存中的进程（我在说甚至不知道这是否可能）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:38:07.163

迈克尔·卡普兰（Michael Kaplan）在博客中谈到了 2006 年被破坏的这些信息：

[http://www.siao2.com/2006/05/16/598980.aspx](http://www.siao2.com/2006/05/16/598980.aspx)

他继续讨论如何直接从文本服务框架获取通知，并提供了一个到已损坏的 MSDN 的链接。我相信这个是兼容的：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms629032.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms629032.aspx)

他提到的示例代码可以在该页面上的链接中找到。

这会在全球范围内奏效吗？我对文本服务框架不够熟悉，无法知道，但这是一个开始寻找的好地方。

# xpages - 使用 Lotus Notes XPages 通过 iPad 附加文件

> ID：15552650
> 
> 赞同：0
> 
> 时间：2013-03-21T16:11:38.993
> 
> 标签：xpages

我很确定这是不可能的，因为 iPad 的限制，但是有没有人使用 iPad 和 XPages 来允许用户从 iPad 中选择一个文件附加到 XPage 上？例如，用户想要附加一个 PDF 文件……他可以在 iPad 上的什么地方获得它。我不是 iPad 专家，但据我所知，我认为这是不可能的。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:17:49.753

iOS 6 允许您上传照片或视频 - 而不是任何其他文件。

# html - videojs & iPhone // 在 ie7-9 + iPad 上运行良好，但没有 iPhone

> ID：15552656
> 
> 赞同：0
> 
> 时间：2013-03-21T16:11:58.927
> 
> 标签：html, html5-video

使用 videojs 有点像纸牌屋。重新排列 IE 中的顺序和视频中断。更改法典和视频在 iPad 上中断。

谁能给我指出一个真正跨浏览器工作的干净设置以及哪个视频编解码器工作？我目前正在提供 MP4.h26 + OGG + WebM。适用于除 iPhone 之外的所有设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T03:57:54.413

Zencoder 有[一个关于如何为各种设备编码的有用指南](https://app.zencoder.com/docs/guides/encoding-settings/ios-and-mobile)。

他们的建议适用于任何编码软件，而不仅仅是他们自己的编码服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:13:20.980

您的网络服务器必须支持`Byte-Range`标头，如下所述：http: [//developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/CreatingVideoforSafarioniPhone/CreatingVideoforSafarioniPhone.html](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/CreatingVideoforSafarioniPhone/CreatingVideoforSafarioniPhone.html)

# php - 如何使用 php 获取 div 中类的值？

> ID：15552657
> 
> 赞同：-1
> 
> 时间：2013-03-21T16:12:04.663
> 
> 标签：php, regex, str-replace, explode

如何在这样的字符串上获取类的值：

```
$string = 'some text <div class="myClassValue">text</div> some text'; 
```

请记住，在字符串中可能有超过 1 个带有类的 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:15:00.063

尝试简单的 html dom 解析器 -> [http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)，如有必要，您可以循环遍历 div

也不要像约翰康德所说的那样使用正则表达式，只在最坏的情况下使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:14:26.137

正如 John Conde 评论的那样，您不应该使用 Regex 来解析 HTML。由于层次结构、不同的标签、无效的代码，事情会变得非常复杂。哦，是的，性能很糟糕。

但是，在这种特殊情况下，您可能正在处理一个 HTML 元素，但您不需要解析它。所以我认为在这种情况下正则表达式不会受到伤害。

```
preg_match_all('/class="(.*?)"/i', $string, $matches);
var_dump($matches); // array of matches 
```

`$matches[0]`将包含整个匹配项 ( `class="myClass"`)

`$matches[1]`will 仅包含类 ( `myClass`)

# python - 如何在 Python 3 中通过（几种不同的）语言环境格式化数字

> ID：15552658
> 
> 赞同：2
> 
> 时间：2013-03-21T16:12:05.380
> 
> 标签：python, python-3.x, format, locale

在不修改全局状态的情况下，是否有正确的方法来按语言环境格式化数字（获取正确的小数分隔符）？这是用于服务器端的文本生成，所以 setlocale 不是一个好主意，而且 Babel 还不支持 Python 3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:19:59.057

不幸的是，*locale*模块获取和设置全局状态。这是语言环境设计所固有的。

各种解决方法包括设置锁或将子进程作为服务调用。

# mongodb - 使用 Debian 挤压 mongodb 来自 mongoid 的奇怪结果

> ID：15552663
> 
> 赞同：0
> 
> 时间：2013-03-21T16:12:20.583
> 
> 标签：mongodb, mongoid, debian

我在 Debian 挤压上使用 mongodb 从 gem、mongoid 返回的数据中遇到了奇怪的结果。数据很好。如何阻止这些一致的失败以正确返回数据？

我的 mongodb 是 Debian 挤压反向端口中的最新版本，我正在使用 gem mongoid。

```
$ dpkg-query -l mongodb
mongodb 1:2.0.0-2~bpo60+1 
```

我确实是`$ sudo apt-get -t squeeze-backports install mongodb`为了获得最新版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:12:20.583

对于任何在 Debian 挤压 mongodb 上遇到奇怪问题的人，目前 Debian 反向移植元包 mongodb 似乎不需要其依赖项（例如 mongodb-server）来自反向移植，也不需要相同版本。因此，简单地安装`$ sudo apt-get -t squeeze-backports install mongodb`通常会默默地失败。

可以在[此处查看](http://bugs.debian.org/cgi-bin/pkgreport.cgi?package=mongodb)Debian mongodb 错误报告[703580](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=703580)。

为避免此问题，只需从 backports 显式安装其所有依赖项：

```
$ sudo apt-get -t squeeze-backports install mongodb mongodb-clients mongodb-dev mongodb-server
$ mongo
MongoDB shell version: 2.0.0
connecting to: test
> db.serverStatus().version
2.0.0
$ dpkg-query -l 'mongodb*'
||/ Name             Version            Description
+++-================-==================-==============
ii  mongodb          1:2.0.0-2~bpo60+1  object/document-oriented database (metapackage)
ii  mongodb-clients  1:2.0.0-2~bpo60+1  object/document-oriented database (client apps)
ii  mongodb-dev      1:2.0.0-2~bpo60+1  object/document-oriented database (development)
ii  mongodb-server   1:2.0.0-2~bpo60+1  object/document-oriented database (server package) 
```

# mysql - 如何从 MySql 列中删除或转换非 UTF 8 / UTF-8 字符

> ID：15552667
> 
> 赞同：2
> 
> 时间：2013-03-21T16:12:25.330
> 
> 标签：mysql, utf-8, casting

我在 MySql 5 DB 上有一个表。该表包含不是有效 UTF-8 / UTF8 的数据。

字段的数据类型是`LONGTEXT`。

以下是此类数据的示例：

```
receiver?àùs 
```

我尝试以多种方式转换和更改字符集：

```
ALTER TABLE Table1 CONVERT TO CHARACTER SET utf8;

ALTER TABLE Table1 convert to character set utf8 collate utf8_general_ci;

ALTER TABLE Table1 CHANGE `col1` `col1` LONGTEXT CHARACTER SET utf8; 
```

在我更改表后，我尝试从另一个包含该数据的表中重新加载它，但它没有改变......它看起来像“receiver?àùs”而不是 UTF 8 字符。

我怎样才能转换它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T20:48:06.973

这解决了我的问题：

```
select convert(binary convert(`Table1`.`col1` using latin1) using utf8) 
FROM `Table1` 
```

后来我更新了表格 - 我丢失了一些数据，但我不介意。大部分都留了下来。

更新查询如下：

```
Update Table1 
Set col1 = convert(binary convert(col1 using latin1) using utf8) 
```

# ios - 以 KB 为单位减小 Flash 文件大小？

> ID：15552668
> 
> 赞同：0
> 
> 时间：2013-03-21T16:12:30.973
> 
> 标签：ios, actionscript-3, flash, air

我有一个需要减小大小的 Flash 文件。

我需要减小它的大小的原因是我需要将它转换成一个 iPhone 应用程序。

目前它在第一层第一层只有2个按钮和2个TLF文本文件，文件大小为355KB。

我还将代码放在第 2 层。

有没有办法减小它的大小，这样我在发布和发送到应用商店时不会遇到问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:40:21.643

该文件大小的最大部分将与 TLF 相关。TLF（Text-Layout-Framework）非常庞大，通常不建议在移动设备上使用（因为它的 CPU 使用率很高）。

如果您没有使用任何 TLF 特定功能，那么明智的做法是将您的文本字段更改为使用经典文本 (DF3)。

除了 TLF，请确保尽可能使用矢量对象而不是位图，因为这将大大减少文件大小。如果您使用的是位图，则可以使用压缩设置来进一步优化文件大小。您可以在“发布设置”（JPEG 质量）中全局执行此操作，也可以在图形属性菜单中单独执行此操作。

一张带有矢量图形和移动设备的便笺，简单的矢量运行正常，但复杂的矢量运行得非常糟糕。确保设置`cacheAsBitmap = true;`任何复杂（甚至所有）向量以提高性能。或者在 FLashPRO 中，单击一个movieClip，然后在属性面板中，转到“显示”向下旋转，并在“渲染”设置中将缓存设置为位图。 ![缓存为位图](../Images/381d3bb0691372818baa86d65cacb3c4.png)

# widget - 依赖于另一个小部件值的 Dojo 验证

> ID：15552669
> 
> 赞同：1
> 
> 时间：2013-03-21T16:12:33.730
> 
> 标签：widget, constraints, dojo

我有一个带有验证参数的小部件，例如“min”和“max”。我希望动态设置“min”，因为它取决于另一个小部件中包含的值。

```
<input id="test" type="text"
    data-dojo-type="dijit/form/NumberTextBox"
    name= "elevation"
    required="true"
    value="3000"
    data-dojo-props="constraints:{min:-20000,max:20000,places:0},
    invalidMessage:'Invalid elevation.'" /> 
```

我该怎么做类似 min: testWidget.getValue()

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T04:26:21.387

您需要做的就是使用该`_WidgetBase#set`方法。以下是 Dojo 的 API 文档中的描述：

> 在小部件上设置属性 在小部件上设置命名属性，这些属性可能由小部件中的设置器处理。
> 
> 例如，如果小部件具有属性“foo”和“bar”以及名为 _setFooAttr() 的方法，则调用 myWidget.set("foo", "Howdy!") 将等效于调用 widget._setFooAttr("Howdy!" ) 和 myWidget.set("bar", 3) 将等价于声明 widget.bar = 3;
> 
> set() 也可以使用名称/值对的散列来调用，例如：

因此，使用您的小部件参考，您可以简单地执行以下操作：

```
var elevationInput = dijit.byId("test");
var constraints = {
  min: testWidget.getValue(); // or testWidget.get("value")
  max: elevationInput.constraints.max
};
elevationInput.set("constraints", constraints); 
```

# javascript - ExecJS 运行时错误

> ID：15552671
> 
> 赞同：2
> 
> 时间：2013-03-21T16:12:35.483
> 
> 标签：javascript, ruby-on-rails, node.js, asset-pipeline

我已经在 ubuntu 12.04 服务器上安装了 nodejs，我想知道为什么我在编译资产时遇到问题，当我转到控制台时`rails c`我运行它

```
ExecJS::Runtimes.best_available=> #<ExecJS::ExternalRuntime:0x0000000118cc88
@binary="nodejs",
@command=["nodejs", "node"],
@deprecated=false,
@encoding="UTF-8",
@name="Node.js (V8)",
@runner_path= "/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/execjs-1.4.0/lib/execjs/support/node_runner.js", 
```

@test_args=nil, @test_match=nil>

当然我可以运行`node`或`nodejs`命令，有什么问题，这是尝试编译资产后的错误

```
/home/bonsai/.rvm/rubies/ruby-1.9.3-p392/bin/ruby /home/bonsai/.rvm/gems/ruby-1.9.3-p392@global/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets
rake aborted!
Killed

  (in /home/bonsai/bonsaierp/app/assets/javascripts/application.js.coffee)
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:142:in `exec_runtime'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:28:in `block in exec'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:41:in `compile_to_tempfile'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:27:in `exec'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/uglifier-1.3.0/lib/uglifier.rb:100:in `compile'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/actionpack-3.2.13/lib/sprockets/compressors.rb:74:in `compress'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/sprockets-2.2.2/lib/sprockets/processing.rb:265:in `block in js_compressor='
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/sprockets-2.2.2/lib/sprockets/processor.rb:29:in `call'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/sprockets-2.2.2/lib/sprockets/processor.rb:29:in `evaluate'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/tilt-1.3.6/lib/tilt/template.rb:77:in `render'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/sprockets-2.2.2/lib/sprockets/context.rb:193:in `block in evaluate'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/sprockets-2.2.2/lib/sprockets/context.rb:190:in `each'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/sprockets-2.2.2/lib/sprockets/context.rb:190:in `evaluate'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/sprockets-2.2.2/lib/sprockets/bundled_asset.rb:26:in `initialize'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/sprockets-2.2.2/lib/sprockets/base.rb:252:in `new'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/sprockets-2.2.2/lib/sprockets/base.rb:252:in `build_asset'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/sprockets-2.2.2/lib/sprockets/index.rb:93:in `block in build_asset'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/sprockets-2.2.2/lib/sprockets/caching.rb:19:in `cache_asset'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/sprockets-2.2.2/lib/sprockets/index.rb:92:in `build_asset'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/sprockets-2.2.2/lib/sprockets/base.rb:169:in `find_asset'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/sprockets-2.2.2/lib/sprockets/index.rb:60:in `find_asset'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/actionpack-3.2.13/lib/sprockets/static_compiler.rb:19:in `block in compile'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/sprockets-2.2.2/lib/sprockets/base.rb:219:in `block in each_logical_path'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/sprockets-2.2.2/lib/sprockets/base.rb:206:in `block (2 levels) in each_file'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/sprockets-2.2.2/lib/sprockets/base.rb:196:in `each'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/sprockets-2.2.2/lib/sprockets/base.rb:196:in `each_entry'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/sprockets-2.2.2/lib/sprockets/base.rb:204:in `block in each_file'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/sprockets-2.2.2/lib/sprockets/base.rb:203:in `each'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/sprockets-2.2.2/lib/sprockets/base.rb:203:in `each_file'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/sprockets-2.2.2/lib/sprockets/base.rb:217:in `each_logical_path'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/actionpack-3.2.13/lib/sprockets/static_compiler.rb:18:in `compile'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/actionpack-3.2.13/lib/sprockets/assets.rake:56:in `internal_precompile'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/actionpack-3.2.13/lib/sprockets/assets.rake:70:in `block (3 levels) in <top (required)>'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/actionpack-3.2.13/lib/sprockets/assets.rake:60:in `block (3 levels) in <top (required)>'
Tasks: TOP => assets:precompile:primary
(See full trace by running task with --trace)
rake aborted!
Command failed with status (1): [/home/bonsai/.rvm/rubies/ruby-1.9.3-p392/b...]
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/actionpack-3.2.13/lib/sprockets/assets.rake:12:in `ruby_rake_task'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/actionpack-3.2.13/lib/sprockets/assets.rake:21:in `invoke_or_reboot_rake_task'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/gems/actionpack-3.2.13/lib/sprockets/assets.rake:29:in `block (2 levels) in <top (required)>'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/bin/ruby_noexec_wrapper:14:in `eval'
/home/bonsai/.rvm/gems/ruby-1.9.3-p392@rails3.2/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => assets:precompile
(See full trace by running task with --trace) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-11T20:56:41.770

当我使用 Digital Ocean 时，我也遇到了同样的问题。我假设您使用的是 512MB 的 droplet。我给他们发了一张支持票，这是他们的回复：

“通常，在 512MB 的 droplet 上运行 Nginx、Unicorn 和 Ruby on Rails，会遇到内存问题。我建议考虑升级到 1GB 的 droplet，并设置 1GB 的交换内存。”

请注意，我在使用 512MB 液滴时仍然尝试设置 1 GB 交换内存，因为我没有在服务器上设置交换内存，但这实际上产生了相同的错误。当我听从他/她的建议并升级到 1GB 液滴时，编译资产工作正常。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-16T04:18:12.967

您应该创建一个交换文件。这将从存储中创建一些虚拟内存（Digital Ocean 液滴使用 SSD，因此它应该相对较快）。

创建一个 1GB 的交换文件，仅为 root 设置读/写权限，然后启用它 [1]。

```
sudo dd if=/dev/zero of=/swapfile bs=1M count=1024
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile 
```

要使交换**永久**化，将以下行添加到 /etc/fstab 的末尾

```
/swapfile   none    swap    sw    0   0 
```

我还强烈建议您遵循 Digital Ocean 提供的本教程来优化您的 Unicorn 工作者。 [https://www.digitalocean.com/community/tutorials/how-to-optimize-unicorn-workers-in-a-ruby-on-rails-app](https://www.digitalocean.com/community/tutorials/how-to-optimize-unicorn-workers-in-a-ruby-on-rails-app)

* * *

我目前使用此设置运行两个带有 Unicorn 和 Nginx 的 Rails 网站，并且没有更多类似的问题。

1.  [https://www.digitalocean.com/community/tutorials/how-to-add-swap-on-ubuntu-14-04](https://www.digitalocean.com/community/tutorials/how-to-add-swap-on-ubuntu-14-04)

# php - 搜索查询的 PDO SQL 注入测试

> ID：15552677
> 
> 赞同：0
> 
> 时间：2013-03-21T16:12:43.150
> 
> 标签：php, mysql, pdo, sql-injection

我对使用 PDO 还是很陌生，所以我不确定我是否正确地将其关闭，但是通过以下测试，我可以进行一些我想绕过的注入。

在我的模型类中，我有一些快捷方法。其中之一称为 return_all($table,$order,$direction) ，它只返回表中的所有行：

```
 public function return_all($table,$order = false, $direction = false) {
    try {
        if($order == false) {
            $order = "create_date";
        }
        if($direction != false && !in_array($direction,array("ASC","DESC"))) {
            $direction = "DESC";
        }
        $sql = "SELECT * FROM ".mysql_real_escape_string($table)." ORDER BY :order ".$direction;
        $query = $this->pdo->prepare($sql);
        $query->execute(array("order" => $order));
        $query->setFetchMode(PDO::FETCH_ASSOC);
        $results = $query->fetchAll();
    } catch (PDOException $e) {
        set_debug($e->getMessage(), true);
        return false;
    }
    return $results;
} 
```

这很好用，除非我将以下内容作为 $table 传递给方法：

```
 $table = "table_name; INSERT INTO `users` (`id`,`username`) VALUES (UUID(),'asd');"; 
```

现在不太可能有人能够更改 $table 值，因为它被硬编码到我的控制器函数中，但是，我有点担心即使我使用 PDO 仍然能够进行一些注入。更令人惊讶的是 mysql_real_escape_string() 完全没有做任何事情，SQL 仍然运行并在 users 数组中创建了一个新用户。

我还尝试将表名设置为绑定参数，但由于在表名周围添加了 ``PDO，我假设出现 sql 错误。

有没有更好的方法来完成下面的代码？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-21T17:31:28.017

你已经解决了你的方向问题。

```
if($direction != false && !in_array($direction,array("ASC","DESC"))) {
        $direction = "DESC";
    } 
```

对表名使用相同的技术

```
$allowed_tables = array('table1', 'table2');//Array of allowed tables to sanatise query
if (in_array($table, $allowed_tables)) {
    $sql = "SELECT * FROM ".$table." ORDER BY :order ".$direction;
} 
```

# python - 解析网页以进行索引

> ID：15552680
> 
> 赞同：1
> 
> 时间：2013-03-21T16:12:46.743
> 
> 标签：python, html-parsing

我正在尝试理解/优化索引站点的逻辑。我是 HTML/JS 方面的新手，所以我边走边学。在索引站点时，我会根据每个页面上的链接递归地深入到站点。一个问题是页面有重复的 URL 和文本，如页眉和页脚。对于 URL，我有一个我已经处理过的 URL 列表。我可以做些什么来识别每页上重复的文本吗？我希望我的解释足够清楚。我目前有代码（在 python 中）来获取该站点的有用 URL 列表。现在我正在尝试索引这些页面的内容。是否有首选逻辑来识别或跳过这些页面上的重复文本（如页眉、页脚、其他简介）。我正在使用 BeautifulSoup + requests 模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:16:00.173

我不太确定这是否是您所希望的，但可读性是一种流行的服务，它只解析页面中的“有用”内容。这是集成到 Safari for ios 中的服务。

它智能地获取页面的有价值的内容，同时忽略诸如页脚/页眉/广告/等之类的内容

有 python/ruby/php 和可能其他语言的开源端口。

[https://github.com/buriy/python-readability](https://github.com/buriy/python-readability)

# python - Python Peewee 重置主键

> ID：15552681
> 
> 赞同：2
> 
> 时间：2013-03-21T16:12:49.600
> 
> 标签：python, peewee

在某些情况下，Python 模块 Peewee 会在保存对象时重置（非整数）主键。我构建了这个例子来澄清：

```
#!/usr/bin/python

from peewee import *
import uuid

db = SqliteDatabase('./db/' + str(uuid.uuid4()) + '.db')

class A(Model):
    id = CharField(primary_key=True)
    def __init__(self):
        super(A, self).__init__()
        self.id = str(uuid.uuid4())
    class Meta:
        database = db

class B(A):
    name = CharField()    
    def __init__(self, name):
        super(B, self).__init__()
        self.name = name

A.create_table()
a = A()
print a.id
a.save(force_insert=True)
print a.id
print "--"    
B.create_table()
b = B(name='Test')
print b.id
b.save(force_insert=True)
print b.id 
```

示例输出：

```
$ ./pkey.py 
0bd49fa9-c5cc-40e7-aff7-24e0b17247cb
0bd49fa9-c5cc-40e7-aff7-24e0b17247cb
--
2fe23bac-4cb2-46a2-827a-8a1c6395e665
1 
```

现在，最后一行不应该是 1，而是 2fe... 如上一行。有趣的是，正如示例所示，这仅发生在子对象上。

我在这里完全误解了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T15:57:08.867

我已经在 GitHub 上解决了这个问题并发布了一个修复程序。该问题是由模型之间的主键字段继承中的错误引起的。

[https://github.com/coleifer/peewee/issues/175](https://github.com/coleifer/peewee/issues/175)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:55:01.930

我不是 peewee 专家，但浏览了几个示例（[example](http://peewee.readthedocs.org/en/latest/peewee/example.html)，[cookbook](http://peewee.readthedocs.org/en/latest/peewee/cookbook.html)），这些是定义您的数据库模式并实现数据库访问但不打算实现您的逻辑的类。它应该是这样的：

```
#!/usr/bin/python

from peewee import *
import uuid

db = SqliteDatabase('./db/' + str(uuid.uuid4()) + '.db')

class A(Model):
    id = CharField(primary_key=True)
    class Meta:
        database = db

class B(A):
    name = CharField()    

A.create_table()
a = A.create(id=uuid.uuid4())
print a.id
a.save(force_insert=True)
print a.id
print "--"    
B.create_table()
 b = B.create(id=uuid.uuid4(), name='Test')
print b.id
b.save(force_insert=True)
print b.id 
```

浏览示例和食谱。

# java - 用 Java 中的字符串切换案例 - 垃圾？

> ID：15552682
> 
> 赞同：0
> 
> 时间：2013-03-21T16:12:51.980
> 
> 标签：java, string, switch-statement, java-7

Java 在其 Java7 中引入了带字符串的 switch case。我想知道使用这种开关盒是否会产生垃圾。

例如在我的程序中，

```
String s = getString();
switch(s) 
{
    case ABC: // ABC is a final static constant
    ...
    case CDE: // CDE is also final static constant.
    ...
} 
```

java如何执行这个switch case。假设这些开关盒有 10 个。`string s`每次与等匹配时它会创建一个新字符串`case ABC`吗？

如果是这样的话，那就太垃圾了，所以当我给 switch case 有 100 个 case 时，每次都会创建 100 个字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T16:16:52.390

如果 case 值是常量，则对于类常量池适用相同的规则，就好像它根本不在 case 语句中一样。

这是对可能对您有所帮助[的类似问题的一个很好的答案](https://stackoverflow.com/questions/8046045/java-string-literal-pool-and-string-object)。

# jquery - jquery.validation 不适用于 IE 和智能手机 bassistance

> ID：15552691
> 
> 赞同：0
> 
> 时间：2013-03-21T16:13:17.403
> 
> 标签：jquery, jquery-validate

我正在使用 bassistance jquery.validation，它适用于 ff 和 chrome，但不适用于移动设备和 IE。网站上的示例运行良好，但在我的项目中只有一次 ff 和 chrome。我正在使用红宝石和导轨。

使用此[设置](http://jquery.bassistance.de/validate/demo/themerollered.html)。

```
(function() {
// use custom tooltip; disable animations for now to work around lack of refresh method on tooltip
$("#madlibs_form").tooltip({
    show: false,
    hide: false
});

// validate signup form on keyup and submit
$("#madlibs_form").validate({
    rules: {
        industry: {
            required:"required";
        },
        amount: {
            required:"required";
        }

    },
    messages: {
        desired_amount: {
            required:{"Please enter loan amount"}

    }
});

$("#madlibs_form input:not(:submit)").addClass("ui-widget-content");
$(":submit").button();
})(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:17:10.513

我根本不了解[您的代码](http://jsfiddle.net/Lks8E/2/)在任何浏览器中的工作方式......

```
required:"required"; 
```

*   将`required`规则设置为`"required"`违反规则并被忽略。
*   使用分号会阻止插件工作。

应该是这个...

```
required: true 
```

此外，请检查您如何在自定义消息周围放置大括号。

**演示：http: [//jsfiddle.net/Lks8E/](http://jsfiddle.net/Lks8E/)**

* * *

或者，您可以这样做。请注意我们在这种情况下如何使用字段名称，它们用逗号分隔。

```
industry: "required",
amount: "required" 
```

**演示 2：http: [//jsfiddle.net/Lks8E/1/](http://jsfiddle.net/Lks8E/1/)**

* * *

**根据 OP 的评论进行编辑：**

> 这就是我`<input type="text" name="desired_amount" class="madlibs_enter_amount" placeholder="enter a amount" required >` 应该在此处添加的 html 外观`required="true"`吗？

这解释了为什么您的代码可以在某些浏览器中运行。由于您`required`在`input`元素内，HTML 5 验证接管了插件失败的地方。

不，你已经有一个`required` `attribute`，为什么还要添加另一个...... `required="true"`？虽然，最好用正确的 HTML 5 语法替换它，`required="required"`. 请参阅： [https ://stackoverflow.com/a/3012975/594235](https://stackoverflow.com/a/3012975/594235)

而且由于您已经`required` `attribute`在 HTML 中拥有 ，因此您不需要`required`在`.validate()`.

```
$('#madlibs_form').validate(); 
```

仔细检查这个 jsFiddle ......

**[http://jsfiddle.net/PFF4v/](http://jsfiddle.net/PFF4v/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T04:24:19.340

修复问题 jquery validate + jquery (1.4.4 ) 不工作 IE 7:

不要使用：

```
$('#form').validate({
 rules : {
  name : "required"
 }
}); 
```

采用 ：

```
$('#form').validate({
 rules : {
  name : {
   required : true
  }
 }
}); 
```

# java - 从密码字段获取密码

> ID：15552692
> 
> 赞同：-1
> 
> 时间：2013-03-21T16:13:19.030
> 
> 标签：java, jpasswordfield, getpasswd

我在我的框架上放了一个密码字段。我将其命名为 pwText（变量名称）。我无法从密码字段中获取输入，以便进行比较。

请注意，需要输入的密码是“userjim”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:18:19.390

```
String password = new String(pwText.getPassword());
if (password.equals("userjim") {
    // correct
} else {
    // not correct
} 
```

# vb.net - 从类或 dll 文件调用时，我的 sqlconnection 总是什么都没有

> ID：15552696
> 
> 赞同：1
> 
> 时间：2013-03-21T16:13:23.547
> 
> 标签：vb.net

我有一个类来打开一个 sqlconnection 并通过主应用程序引用该连接返回，问题是这个连接总是没有如何修改这个行为：

班级代码：

```
Public Class Class1
Public ClassConnection As SqlClient.SqlConnection

Public Function OpenConnection() As Object
    Try
        Dim sConnString As String = ""
        sConnString = "Server=ServerName;Database=DBName;User ID=Username;Password=MyPassword"
        Using ClassConnection As New SqlClient.SqlConnection
            ClassConnection.ConnectionString = sConnString
            ClassConnection.Open()
            Return ClassConnection
        End Using
    Catch ex As Exception
        Throw ex
        Return Nothing
    End Try
End Function 
```

结束类

我的表格代码：

```
Public Class Form1
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    Dim uu As New Class1
    Dim iii As SqlClient.SqlConnection = uu.OpenConnection()
    MsgBox(iii.State)
End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:15:51.563

您的问题是，通过将其包装在一个`Using`块中，您将在`ClassConnection`返回它时立即处理它。

```
Using ClassConnection As New SqlClient.SqlConnection
    ClassConnection.ConnectionString = sConnString
    ClassConnection.Open()
    Return ClassConnection
End Using ' This is equivalent to calling ClassConnection.Dispose() 
```

应该只是：

```
Dim ClassConnection As New SqlClient.SqlConnection
ClassConnection.ConnectionString = sConnString
ClassConnection.Open()
Return ClassConnection 
```

然后由*客户端*负责处理连接。

**注意**：让客户端负责清理通常被认为是糟糕的 API 设计。我建议调查[工作单元模式](http://msdn.microsoft.com/en-us/magazine/dd882510.aspx)。

# matlab - 如何检查实施时间花了多长时间

> ID：15552697
> 
> 赞同：0
> 
> 时间：2013-03-21T16:13:29.363
> 
> 标签：matlab, runtime

有没有办法`matlab`（即函数）来检查你的程序完成运行需要多长时间？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T16:16:56.690

尝试在打开探查器的情况下运行它，您将获得代码性能的细分，因此您可以轻松判断哪些区域花费的时间最长....对不起，误读了问题...是的，tic-toc 会做到的！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T16:16:40.687

是的。[tic](http://www.mathworks.com/help/matlab/ref/tic.html)和[toc](http://www.mathworks.com/help/matlab/ref/toc.html)：

```
tic;
# your code....
elapsed_time = toc; 
```

# c# - 在win32中显示并切换到一个窗口

> ID：15552703
> 
> 赞同：0
> 
> 时间：2013-03-21T16:13:49.733
> 
> 标签：c#, winforms, winapi

我有一个有时需要显示的子窗口。在我的 winform 项目中，这个窗口可以以某种方式聚焦于用户。我试过`mywindow.focus()`了，但没有用。所以我想使用 win32 api 来显示这个窗口。我听到了这样的话：

```
[DllImport("User32")]
 public static extern void SwitchToThisWindow(IntPtr hWnd, bool fAltTab);

     public static void ShowAndSwitchWindow(IntPtr MainWindowHandle)
     {
   ShowWindow(MainWindowHandle.ToInt32(), SW_MAXIMIZE);
   SwitchToThisWindow(MainWindowHandle, true);
      } 
```

但我不明白如何在我的项目中使用它？？？？？？

我的窗口是这样的：（记住这不是主窗口。这个窗口是从另一个名为 MainWindow 的窗口调用的）

```
 show_meaning s = new show_meaning(x);
                s.Show(); 
```

我不习惯win32 api。谁能帮我 ？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:16:23.540

您应该只调用 SetForegroundWindow 和 ShowWindow() 而不是 ShowWindow()。

```
[DllImport("User32")]
public static extern int SetForegroundWindow(IntPtr hwnd); 
```

# java - java函数'split()的用法

> ID：15552704
> 
> 赞同：0
> 
> 时间：2013-03-21T16:13:52.827
> 
> 标签：java, function, split, advanced-search

我想在最后出现时根据分隔符'-'在java中拆分单词。

我期待结果为“sweet_memory_in”和“everbodylife@gmail.com”。我们在java中有任何内置函数吗？

完整的词是 sweet_memory_in_everbodylife@gmail.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:21:26.990

```
String s = "sweet_memory_in_everbodylife@gmail.com";
String first = s.substring(0,s.lastIndexOf("_"));
String second = s.substring(s.lastIndexOf("_")+1 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:17:21.727

尝试这个

```
 String s = "sweet_memory_in_everbodylife@gmail.com";
    String s1 = s.substring(0,s.lastIndexOf("_"));
    String s2 = s.substring(s.lastIndexOf("_")+1,s.length()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T16:16:00.767

正则表达式可能会有所帮助。另一种方法是获取 _ 的最后一个索引并使用子字符串将其拆分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T16:26:05.927

试试这个代码：

```
 String data = "sweet_memory_in_everbodylife@gmail.com";
    int lastIndex = data.lastIndexOf("_");

    String firstSplit = data.substring(0, lastIndex);
    String secondSplit = data.substring(lastIndex + 1, data.length());

    System.out.println(firstSplit);
    System.out.println(secondSplit); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T16:46:41.107

试试这个我的朋友（Javascript代码）：

```
var str = 'sweet_memory_in_everbodylife@gmail.com';
var arr1 = str.substring(str.lastIndexOf("_")).split("_");
var arr2 = str.split("_"+arr1[1]);
alert(arr2[0] +" --> "+arr1[1]); 
```

# html - ng-repeat 没有 HTML 元素（这次真的没有）

> ID：15552708
> 
> 赞同：5
> 
> 时间：2013-03-21T16:14:08.140
> 
> 标签：html, angularjs, repeater

我想得到类似的东西：

```
Line 1<br>
Line 2<br>
Line 3<br>
Line 4<br>
Line 5<br> 
```

使用 ng 重复。行不应该分开，除了`<br>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T15:55:31.497

这是一个简单的指令，它硬编码`<br>`

HTML：

```
<p hidden-repeat="lines"></p>

app.directive('hiddenRepeat',function($parse){
  return {
    link: function(scope, elem, attr){
      var data = $parse(attr.hiddenRepeat)(scope);
      if(data){
        for (var i=0;i< data.length;i++){ 
          elem.append(data[i]+ "<br />");
        }  
      }
    }
  };
}); 
```

看看它在行动：[http ://plnkr.co/edit/Y8eahPYmBr5ohbWCInde?p=preview](http://plnkr.co/edit/Y8eahPYmBr5ohbWCInde?p=preview)

此解决方案允许您在属性中指定指令（在本例中为隐藏重复）。通过使用指令的属性版本，您可以指定包装元素是什么（在本例中为段落）。

# java - 无法使用 apache poi 读取 xlsx 文件

> ID：15552711
> 
> 赞同：0
> 
> 时间：2013-03-21T16:14:14.373
> 
> 标签：java, apache-poi, xlsx

我一直在搜索这个问题几个小时，但给出的解决方案没有奏效。我正在使用 Intellij IDEA 12.0.4 尝试读取 Microsoft 2007 xlsx 文件。我收到的错误是：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/xmlbeans/XmlException
    at org.apache.poi.ss.usermodel.WorkbookFactory.create(WorkbookFactory.java:91)
    at Main.main(Main.java:157)
Caused by: java.lang.ClassNotFoundException: org.apache.xmlbeans.XmlException
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308) 
```

代码是：

```
import org.apache.poi.ss.usermodel.Row;
import org.apache.poi.ss.usermodel.Sheet;
import org.apache.poi.ss.usermodel.Workbook;
import org.apache.poi.ss.usermodel.WorkbookFactory;
import org.w3c.dom.Document;
import org.w3c.dom.NodeList;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import java.io.File;
import java.util.Iterator;

public class Main {
    public static void main(String[] args) {
        try {

            File file = new File(root_dir + "2013-03-13 iom diff.xlsx");
            Workbook workbook = WorkbookFactory.create(file); //fails here

            //...

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

在 IDEA 中，我有以下项目设置：

![模组源](../Images/f52b7cd073ac1385f9d9ac5023905b4a.png) ![项目依赖](../Images/f8e4a3194138cc2913432000e728585a.png) ![项目路径](../Images/825c1f8260ef1f1aef8142cf1a0c27fe.png) ![项目库](../Images/b219e626f9d743fb45c3944c53d295c6.png) ![项目](../Images/828d1bf5174d9a09189719fe51d4b825.png)

我没有构面或工件，在 IDEA 的平台设置下我没有全局库。在平台设置下，我有以下 SDK： ![sdk类路径](../Images/7e4150d898c6d10ac67ad494becfe052.png) ![sdkannotations](../Images/51f2f321d4c0a21fd55684c2ae28f1ed.png) ![sdksrcpath](../Images/d250233b5b3ff7ce68360968460c0277.png)

我在 Windows 7 SP1 x64 下，`System Properties -> Environment Variables`我有： 在**system variables->CLASSPATH**下：

`C:\xmlbeans-2.5.0\lib\xbean.jar;C:\xmlbeans-2.5.0\lib\jsr173_1.0_api.jar`

在**系统变量-> 路径**下：

`...;%XMLBEANS_HOME%\bin;C:\poi-3.9\ooxml-lib\xmlbeans-2.3.0.jar;C:\poi-3.9\ooxml-lib\stax-api-1.0.1.jar;C:\poi-3.9\ooxml-lib\xmlbeans-2.3.0`其中`XMLBEANS_HOME`在变量下定义为`C:\xmlbeans-2.5.0`并`...`表示其他不相关的文件。

就Java而言，我还安装了以下内容：

```
Java 7 Update 17
Java 7 Update 17 (64-bit)
Java SE Development Kit 7 Update 17
Java SE Development Kit 7 Update 17 (64-bit) 
```

明确地我的问题是“当我收到此错误时，如何使用 apache POI 加载 xlsx 文件。” 任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:03:18.190

使用 POI 的 XSSF 实现或 sxssf 实现。

[http://poi.apache.org/spreadsheet/index.html](http://poi.apache.org/spreadsheet/index.html)

这是一个示例 [http://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/ss/examples/BusinessPlan.java](http://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/ss/examples/BusinessPlan.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T13:47:49.007

我注意到我没有将excel文件保存为OOXLM xlsx，而是保存为普通的xlsx，我认为这是问题的一部分。两者都有相同的扩展名，所以我想很容易犯这个错误。我查看了编译器的输出，并在最顶部列出了它正在使用的类路径中的 jar。但是，Intellij IDEA 12 似乎不使用系统的类路径，而是使用项目。我已将目录添加到项目的类路径中（通过转到`Project Structure->Dependencies->`然后单击`+`图标以添加 jar 或目录），但没有调用正确的 jar 文件（我可以从编译器的第一行输出中看出） . 我搜索了项目目录`.idea->libraries`并发现了我在依赖项选项卡下添加的目录路径的 xml 配置文件，其中应该包含运行程序所需的 jar 文件。我打开了其中一个 xml 文件并看到了这个：

```
<component name="libraryTable">
  <library name="poi-3">
    <CLASSES>
      <root url="file://C:/poi-3.9" />
    </CLASSES>
    <JAVADOC>
      <root url="file://C:/poi-3.9/docs/apidocs" />
    </JAVADOC>
    <SOURCES />
    <jarDirectory url="file://C:/poi-3.9" recursive="false" />
  </library>
</component> 
```

然后我改为`recursive`true 所以它读

```
<component name="libraryTable">
  <library name="poi-3">
    <CLASSES>
      <root url="file://C:/poi-3.9" />
    </CLASSES>
    <JAVADOC>
      <root url="file://C:/poi-3.9/docs/apidocs" />
    </JAVADOC>
    <SOURCES />
    <jarDirectory url="file://C:/poi-3.9" recursive="true" />
  </library>
</component> 
```

这消除了这个错误（[但现在我得到一个 nullPointer 异常](https://stackoverflow.com/questions/15587479/opening-excel-ooxml-2007-xlsx-document-returns-nullpointer-exception)）。只是想分享一下，以防万一这有助于将来使用相同 IDE 的任何人。

# google-bigquery - 从云问题导入大查询

> ID：15552713
> 
> 赞同：0
> 
> 时间：2013-03-21T16:14:18.210
> 
> 标签：google-bigquery

我已将我的数据集上传到谷歌云。我正在尝试将它们导入到大查询表中。我收到一个错误，声明我的数据位置不是谷歌云浏览器中声明的“路径”=“55555/M04Q1%20Query.txt”

那是我的桶和我的文件....所以有些东西不见了-

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:14:45.720

我对你的要求有点困惑。导入路径（如果您从谷歌云存储路径导入）应如下所示：“gs://bucket/object”。您能否提供有关您发送的请求、发送方式以及遇到的错误的更多信息？

# sql - 使用多个 SQL 查询

> ID：15552718
> 
> 赞同：1
> 
> 时间：2013-03-21T16:14:33.920
> 
> 标签：sql, delphi, delphi-5, zeos

我已经进行了一些搜索，但找不到明确的答案。

我刚刚进入 SQL，所以要温柔。使用 D5、TNTUnicode、Zeos 和 SQLite3

我有一个 DBGrid，其中显示了 tblAccounts 中的所有帐户名称。我有一个 DBGrid，其中显示了 tblFolders 中的所有文件夹。

在 Accounts 网格的 OnCellClick 中，我有一个 SQL 查询

```
qryFolders.Close;
qryFolders.SQL.Clear;  // Not really needed as I am assigning the Text next - but :)
qryFolders.SQL.Text:=
  'SELECT Folder FROM tblFolders WHERE UPPER(Account)="FIRSTTRADER"'
qryFolders.ExecSQL;
tblFolders.Refresh; 
```

在我的应用程序中，没有任何反应，我仍然可以看到完整的文件夹列表。

在 SQL-Expert 桌面**中，该行工作正常**，仅显示与该帐户关联的两个文件夹。在该应用程序中，它不断显示文件夹的完整列表

如果我单步执行 OnCellClick 它会显示正确的文本等。

我哪里错了？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T18:02:28.807

如果要显示一个Master-Detail（Account as Master，Folder as Detail），那么我们从这里开始：

```
// connecting the grids
AccountsDataSource.DataSet := tblAccounts;
AccountsGrid.DataSource := AccountsDataSource;

FoldersDataSource := tblFolders;
FoldersGrid.DataSource := FoldersDataSource;

// retrieving the data
tblAccounts.Open;
tblFolders.Open; 
```

这应该反映你已经拥有的东西。现在让我们进入主从细节。

*很明显，所有查询和表组件都有一个有效的连接集，所以我将忽略它。*

首先确定，查询未激活

```
qryFolders.Active := False; 
```

拥有一个带有查询作为细节的主细节，我们必须设置`MasterSource`

```
qryFolders.MasterSource := AccountsDataSource; 
```

之后，我们可以使用参数设置查询以链接到 MasterSource 中的字段。通过使用链接到`Account`MasterSource 中的字段`:Account`

```
qryFolders.SQL.Text := 
  'SELECT Folders FROM tblFolders WHERE UPPER( Account ) = :Account'; 
```

现在，我们准备好检索数据了

```
qryFolders.Open; 
```

在此之前，我们不会看到 的任何变化`FoldersGrid`，因为我们没有告诉任何人这样做。现在让我们使用它

```
FoldersDataSource.DataSet := qryFolders; 
```

在您的方法中，您没有`Open`查询，也没有将查询链接到网格。

* * *

另一种选择是拥有一个没有单独查询的主从细节。（似乎有一些代码重构，所以我想这是一个工作示例）

```
tblFolders.MasterSource := AccountsDataSource;
tblFolders.MasterFields := 'Account';
tblFolders.LinkedFields := 'Account'; 
```

参考：

*   [SourceForge ZTestMasterDetail.pas](http://sourceforge.net/p/zeoslib/code-0/2209/tree/trunk/test/component/ZTestMasterDetail.pas)（见第 181 行）
*   [SourceForge ZDataset.pas](http://sourceforge.net/p/zeoslib/code-0/2209/tree/trunk/src/component/ZDataset.pas)

# iphone - 如何在 UITabBarController 中推送 UIViewController

> ID：15552722
> 
> 赞同：1
> 
> 时间：2013-03-21T16:14:45.227
> 
> 标签：iphone, objective-c

我想从`UITabBarControler`. 我的应用层次结构如下所示：

> UINavigationController -> UIView -> UITabBarController

我有`UITabBarController`3 个标签。在第一个选项卡上，我添加了一个`UITableView`. 如何使表格中单元格的选择推送到另一个视图而不从选项卡控件导航？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-16T21:27:20.140

你的问题是你正在做的安排。

您正在使用`UINavigationController -> UIView -> UITabBarController`，因此`UITabBarController`是 的子视图`UINavigationController`。当您导航时，您弹出的视图来自导航控制器，因此其所有内容（包括`UITabBarController`）都将消失。

你的结构需要是这样的：

`UITabBarController -> UINavigationController -> UIView`，这意味着`UINavigationController`每个需要它的选项卡一个。

例如，如果您需要在两个选项卡内使用 push，则结构应该是这样的：

`UITabBarController`

```
|  --> UINavigationController 1 --> UIView 1 --> (push segue) --> UIView 1B

|  --> UINavigationController 2 --> UIView 2 --> (push segue) --> UIView 2B 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:18:30.920

如果你真的想在标签栏界面内有一个导航控制器类型的推送，你需要在标签栏界面*内*有一个导航界面。

不过，您最简单的解决方案可能是重新考虑您的界面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T16:21:47.200

像这样：

[如何处理 UINavigationControllers 和 UITabBarControllers iOS 6.1](https://stackoverflow.com/questions/15400827/how-to-handle-uinavigationcontrollers-and-uitabbarcontrollers-ios-6-1/15454094#15454094)

这是一个更复杂的版本，但请看一下 Tab Bar Controller 以及它与包含的 viewControllers 的关系。

基本上，您不希望您的 tabBarController 嵌入到该导航控制器中。相反，每个包含的想要推送的 viewController 都应该嵌入到它自己的 Nav Controller 中。因此，在您的情况下，您至少会为您的第一个选项卡的 tableViewController 执行此操作。

# php - 如何在 cookie 中“保护”存储信息？

> ID：15552727
> 
> 赞同：-1
> 
> 时间：2013-03-21T16:14:56.077
> 
> 标签：php, cookies

来源在这里[http://jaspan.com/improved_persistent_login_cookie_best_practice](http://jaspan.com/improved_persistent_login_cookie_best_practice)

请提出改进​​意见（方法的更改）。在这里，我只想在 cookie 中存储用户名，这样用户就不需要输入用户名。以黑客无法从被盗 cookie 中知道用户名的方式存储（如果可能的话）

如果用户选中记住我并成功登录

1）根据用户名创建一些东西。例如 $username_for_cookie = MD5($username).$salt;+可能是别的东西。在mysql中记录$username_for_cookie

2) 创建标识符。简单的随机值。在mysql中记录标识符

3) 创建令牌。也是简单的随机值，也记录在mysql中。

4) 创建 cookie 将所有上述值放在一起 $username_for_cookie 。$标识符 .$token

Cookie 名称也可能是随机值或类似 _eglasjd

用户重访网站

1）检查cookie是否存在

2) 如果 cookie 存在单独的 $username_for_cookie 。$identifier .$token 获取 3 个分隔值

3) 如果 $username_for_cookie 值存在，则在 mysql 中搜索。如果不存在，登录表单输入用户名和密码。如果存在比较 $identifier 和 $token 是否与 mysql 中的相同

这种方法“安全”吗？有什么需要改进的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:19:45.593

您可以通过执行以下操作来改善这一点。

1.  仅使用 https。
2.  使用后重置令牌。
3.  令牌必须在某个窗口内使用才能过期，并且用户需要重新登录。
4.  确保令牌足够随机以至于无法复制。不应使用用户数据构建。

# jquery - 在滚动时调整标题大小

> ID：15552728
> 
> 赞同：0
> 
> 时间：2013-03-21T16:14:58.610
> 
> 标签：jquery, css, scroll, addclass, scrolltop

我想在用户滚动时调整标题的大小，并在页面位于顶部时再次调整标题的大小。我有这个示例 HTML

```
<header class="header">
</header>
<section>
    <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.</p>  
    <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.</p>  
</section> 
```

这个 CSS

```
* { margin: 0; padding: 0; }

body {
  height: 1000px;
}

.header {
   width: 100%;
  height: 200px;
  background: red;
  position: relative;
  -webkit-transition: linear .3s;
     -moz-transition: linear .3s;
      -ms-transition: linear .3s;
       -o-transition: linear .3s;
          transition: linear .3s;
}

.test {
  height: 120px;
  position: fixed;
} 
```

我的 jQuery 是 -

```
$(window).scroll(function(){ 
  if ($(this).scrollTop() > 10){      
    $('.header').addClass("test");
  } 
  else{
    $('.header').removeClass("test");
  }
}); 
```

我遇到的问题是，当我在后面的跳转中滚动内容时，我看不到它。我无法弄清楚我的 HTML/CSS 在这里做错了什么。

有任何想法吗？

编辑：

这是一个带有代码的小jsfiddle - [http://jsfiddle.net/rHmCu/](http://jsfiddle.net/rHmCu/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:05:14.887

没有定义的`section`位置，所以它落后于`.header`：

```
section { 
    position:relative;
} 
```

（ 我想 ）

演示：http: [//jsfiddle.net/pavloschris/rHmCu/3/](http://jsfiddle.net/pavloschris/rHmCu/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:22:29.733

你的 CSS

```
.test {
  height: 120px;
  position: fixed;
} 
```

将导致所有内容都低于它，因为它的位置是固定的，如果你想避免跳转并让标题停靠，那么你需要在标题之后为元素动态添加边距顶部

像这样的东西

```
$(window).scroll(function(){ 
  var $header = $('.header');
  if ($(this).scrollTop() > 10){      
    if(!$header.hasClass('test')) {
        $header.addClass("test");
        $header.next().css('margin-top','120px');
    }
  } 
  else{
    if($header.hasClass('test')) {
        $header.removeClass("test");
        $header.next().css('margin-top','0');
    }
  }
}); 
```

我没有测试过这段代码，但它是这样的，当然如果需要你也可以动态地获取高度。

我还添加了对类测试的检查，因为如果类已经存在，您不需要做额外的工作。请注意，由于您是在滚动上执行此操作，因此这可能会导致平板电脑/手机上的卡顿

如果您将其放在小提琴中或至少说明最终目标会有所帮助。我的回答是假设您想要一个可停靠的标题并避免标题停靠时的跳转

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T16:19:13.253

我写了一个插件和元素，并在达到阈值时允许回调...... [http://drewdahlman.github.com/Pinned/](http://drewdahlman.github.com/Pinned/)

```
$("#element").pinned({
    bounds: 100, // when to become sticky
    scrolling: 0, // position during scroll
    mobile: false // should support mobile 
},function(){
    // PINNED
    // SHRINK YOUR ELEMENT
},
function(){
    // UNPINNED
    // EXPAND YOUR ELEMENT
}); 
```

这将在您向下滚动 100px 时触发，但可以设置为 1 并且应该可以解决问题。

同样来自您的小提琴 - 将您的标题设置为绝对位置，然后在发生更改时您的内容不会跳来跳去。因为您已经定位它以考虑标题的大小和位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T16:18:04.847

header 是一个元素，但是您的 CSS 和 jQuery 选择器都尝试将它作为一个类来访问。删除选择器中的点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T18:03:49.110

我设法破解了这里的一些答案，这导致了这个小提琴 -

```
$(window).scroll(function(){ 
  if ($(this).scrollTop() > 0){  
    $('header').addClass("test");
    $('section').css("padding-top", "220px");
  } 
  else{
    $('header').removeClass("test");
    $('section').css("padding-top", "0px");
  }
}); 
```

[http://jsfiddle.net/rHmCu/5/](http://jsfiddle.net/rHmCu/5/)

非常感谢所有花时间回答并让我的大脑为此工作的人

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-23T05:11:17.893

> 你可以试试这个简单的东西来调整滚动窗口上的标题。

```
$(document).on("scroll", function(){
		if
      ($(document).scrollTop() > 100){
		  $("header").addClass("shrink");
		}
		else
		{
			$("header").removeClass("shrink");
		}
	});
```

```
body {
  background: #eee;
  margin: 0;
  padding: 0;
  font-family: "Source Sans Pro", sans-serif;
  color: #333;
}

header {
  width: 100%;
  padding: 30px 0;
  background: #000;
  border-bottom: 1px solid #e1e1e1;
  /* animation magic */
  transition: all 0.4s ease-in-out;
  -webkit-transition: all 0.4s ease-in-out;
  -moz-transition: all 0.4s ease-in-out;
  z-index: 9999;
  top: 0;
  position: fixed;
  color:#aaa;
}

header h1 {
  font-size: 30px;
  text-indent: 40px;
  font-weight: bold;
}

.container {
  width: 90%;
  margin: 180px auto;
}

.shrink {
  padding: 10px 0;
}

p {
  margin: 0 0 40px 0;
  line-height: 24px;
}

strong {
  font-weight: bold;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<header>
  <h1>LOGO</h1>
</header>

<section class="container">
  <p><strong>Scroll down to see the magic in action...</strong></p>
<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
</p>

<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>

<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p> 

<p>
Sed nulla cred Banksy jean shorts. Reprehenderit mumblecore incididunt anim accusamus. Keffiyeh Cosby sweater in cornhole elit, tote bag cillum banjo. Shabby chic YOLO banh mi sunt. Artisan blog Neutra, polaroid adipisicing Banksy +1 lo-fi umami distillery fixie seitan. Semiotics artisan flannel mollit craft beer Blue Bottle. Bespoke biodiesel banh mi literally.
</p>

<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>

<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>

<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>

<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>
</section>
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-23T04:38:51.513

您需要将`top: 0; left: 0;`规则添加到“.test”类。它会将您的导航栏固定在网页顶部。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-17T11:17:04.357

一个非常简单的解决方案，只有 html 和 css：

*   在 body 元素中都有 header 和 small-header
*   让 body 创建一个新的堆叠索引，例如 z-index: 0
*   small-header 获取位置：固定和 z-index：1
*   标题获取位置：相对和 z-index：2

这会将（大）标题放在前面，它仍然会滚动并离开视口。

较小的标题在内容的后面但仍位于内容的前面（z 方向）。

标题和内容一起滚动，而中间的固定小标题保持原位。可以这么简单。

# javascript - 将节点从第二个移动到第一个

> ID：15552741
> 
> 赞同：1
> 
> 时间：2013-03-21T16:15:44.020
> 
> 标签：javascript

只想要一个将第二个节点移动为第一个节点的函数。但它不起作用，有什么建议吗？

```
 var node = document.getElementById("ir");
    var cx = node.childNodes[1];
    function der(){
    node.insertBefore(cx,node.firstChild);
} 
```

完整代码：

```
<div id="ir">
<p id="ie">test</p>
<img src="test.gif">
</div>

<script type="text/Javascript">
var node = document.getElementById("ir");
img.setAttribute("onclick","der()");
var cx = node.childNodes[1];
function der(){
        node.insertBefore(cx,node.previousSibling);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:23:39.153

[http://jsfiddle.net/joeframbach/JSZPy/](http://jsfiddle.net/joeframbach/JSZPy/)

该小提琴中html的问题是空格。`childNodes[0]`匹配第一组空格，并`childNodes[1]`匹配第一个元素。也许这是你的问题。

```
<div id="ir">
    <p>First</p>
    <p>Second</p>
</div>

var node = document.getElementById("ir");
var first = node.childNodes[1];
var second = node.childNodes[3];
node.insertBefore(second,first); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:22:20.870

我今天有点慢，但我认为你对 previousSibling 的使用是错误的。我认为它应该与子节点 cx 而不是父节点有关..所以你应该使用 cx.previousSibling 而不是 node.previousSibling - 我已经编辑了 mt 上一个示例以删除我原来的愚蠢响应......试试这个......

```
<div id="ir">
<p id="ie">test</p>
<img src="test.gif">
</div>

<script type="text/Javascript">
var node = document.getElementById("ir");
img.setAttribute("onclick","der()");
var cx = node.childNodes[1];
function der(){
    node.insertBefore(cx,cx.previousSibling);
} 
```

两天后编辑！！！.... 当然，我上面给出的示例不会交换 P 元素和图像，因为图像真正的 previousSibling 是 /P 标记闭包和图像之间的换行符。更重要的是，从编码的角度来看，它不起作用，因为在任何地方都没有定义一个名为“img”的对象......所以我提供了它作为一个可行的替代方案：

```
<script>
function swapDivs(obj) {
  if(obj.previousSibling){ // if it's null, then it's already the first element //
    obj.parentNode.insertBefore(obj, obj.previousSibling);
  }
}
</script>

<div id="ir">
  <p id="ie">test</p><img src="http://i2.ifrm.com/4639/142/emo/drool.gif" onclick="swapDivs(this);" />
</div> 
```

它没有解决换行问题，我只是重新格式化了 HTML。

但是，它确实解决了 img 问题，并提供了一种将函数添加到任何可点击 DOM 对象的通用方法，而无需自定义函数。

我将留给您解决如何解决换行符/空格兄弟的问题，但这应该不难。如果你想测试你的尝试，这里是小提琴...... [http://jsfiddle.net/radiotrib/ps9XZ/](http://jsfiddle.net/radiotrib/ps9XZ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T16:26:28.053

您已经得到了答案，但我建议您执行以下操作：

```
var node = document.getElementById("ir");
var childs = node.getElementsByTagName("div");
var cx = childs[1];

function der()
{
    node.removeChild(cx);
    node.insertBefore(cx, childs[0]);
}

der(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T16:32:58.990

我建议您在使用子节点时不要放置空格或断线，因为它们考虑的是文本类型的子节点。我希望这段代码对你有帮助： Javascript 代码：

```
function change(){
    var parent = document.getElementById("ir");
    var img = parent.childNodes[1];
    parent.removeChild(img);
    parent.insertBefore(img, parent.firstChild);
} 
```

HTML 代码：

```
<div id="ir"><p id="ie">test</p><img src="test.gif"></div>
<button onclick="change()">Change</button> 
```

# highcharts - Highcharts 3.0气泡图中的对数Y轴

> ID：15552746
> 
> 赞同：1
> 
> 时间：2013-03-21T16:15:51.577
> 
> 标签：highcharts, logarithm, bubble-chart

我正在尝试将 Highcharts 3.0ß 气泡图的 yAxis 类型更改为对数，但是 - 当它显示某些内容时 - 它显示一个系列和一个气泡......这是一个基于“官方”气泡图的简单示例演示：http: [//jsfiddle.net/FtdYf/](http://jsfiddle.net/FtdYf/)

```
$(function() {
$('#container').highcharts({

    chart: {
        type: 'bubble',
        plotBorderWidth: 1,
        zoomType: 'xy'
    },

    title: {
        text: 'Highcharts bubbles with radial gradient fill'
    },

    xAxis: {
        gridLineWidth: 1
    },

    yAxis: {
        startOnTick: false,
        endOnTick: false,
        type:'logarithmic'
    },

    series: [{
        data: [
            [9, 81, 63],
            [98, 5, 89],
            [51, 50, 73],
            [41, 22, 14],
            [58, 24, 20],
            [78, 37, 34],
            [55, 56, 53],
            [18, 45, 70],
            [42, 44, 28],
            [3, 52, 59],
            [31, 18, 97],
            [79, 91, 63],
            [93, 23, 23],
            [44, 83, 22]
        ],
        marker: {
             fillColor: {
                 radialGradient: { cx: 0.4, cy: 0.3, r: 0.7 },
                 stops: [
                     [0, 'rgba(255,255,255,0.5)'],
                     [1, 'rgba(69,114,167,0.5)']
                 ]
             }
        }
    }, {
        data: [
            [42, 38, 20],
            [6, 18, 1],
            [1, 93, 55],
            [57, 2, 90],
            [80, 76, 22],
            [11, 74, 96],
            [88, 56, 10],
            [30, 47, 49],
            [57, 62, 98],
            [4, 16, 16],
            [46, 10, 11],
            [22, 87, 89],
            [57, 91, 82],
            [45, 15, 98]
        ],
        color: 'rgba(170,70,67,0.5)',
        marker: {

             fillColor: {
                 radialGradient: { cx: 0.4, cy: 0.3, r: 0.7 },
                 stops: [
                     [0, 'rgba(255,255,255,0.5)'],
                     [1, 'rgba(170,70,67,0.5)']
                 ]
             }
        }
    }]

});
}); 
```

所以这是我的问题：对数轴（X 和 Y）是否可能在气泡图上，如果是，为什么它只显示一个系列和一个气泡？

感谢帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:47:32.883

您可以设置`tickPositions`或创建自己的`tickPositioner`. 例如：http: [//jsfiddle.net/Fusher/FtdYf/2/](http://jsfiddle.net/Fusher/FtdYf/2/)

# backbone.js - Marionette.ItemView 中的触发事件

> ID：15552749
> 
> 赞同：2
> 
> 时间：2013-03-21T16:15:56.223
> 
> 标签：backbone.js, marionette

这是我的 ItemView 的代码片段：

```
class List.GridRow extends Backbone.Marionette.ItemView
  tagName: 'tr'
  triggers:
    'click': 'row:clicked' 
```

然后在我的复合视图中，我正在这样做：

```
class List.GridView extends Backbone.Marionette.CompositeView
  template: 'mapping/list/templates/grid'
  itemView: List.GridRow
  itemViewContainer: 'tbody'

  initialize: (options) ->
    @listenTo @, 'itemview:row:clicked', (itemView, data) -> @rowClicked(itemView, data)

  rowClicked: (clickedItemView, data) =>

    # I need the original event information to check of the ctrl or shift key was pressed?
    #if !e.ctrlKey && !e.shiftKey 
```

我在这里要做的是将原始事件信息传递给触发器处理程序，但我还没有弄清楚？有没有办法用木偶做到这一点？我错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T21:33:23.950

的目的`triggers`是为视图中的最小需求提供最小的事件配置，同时还防止抽象泄漏。将原始事件 args 传递出视图会破坏视图的抽象，这应该是控制事件 args 的内容。

如果您需要控制和转换键信息，您将希望避免`triggers`配置并使用发布所需信息的标准事件。

```
 class List.GridRow extends Backbone.Marionette.ItemView
  tagName: 'tr'
  events:
    'click': 'rowClicked'
  rowClicked (e) ->
    @trigger "row:clicked", 
      control: e.ctrlKey, 
      shift: e.shiftKey 
```

# php - 如何在文本中搜索字符串并用php中的链接替换

> ID：15552754
> 
> 赞同：-1
> 
> 时间：2013-03-21T16:16:15.457
> 
> 标签：php, regex, twitter

我目前正在将 twitter 提要放入我的网站并在首页上显示内容。我想要做的就是用链接替换标签或 Twitter 用户名的任何内容。

我尝试使用 preg_replace 执行此操作，但在构建用作替换的链接时遇到问题，因为我不确定如何引用和插入匹配的模式。这是我到目前为止的内容（未完成）。有谁能够帮助我？

谢谢！

```
<?php 
foreach($tweets as $tweet) { ?>
  <?php 
    $pattern = '@([A-Za-z0-9_]+)';
    $replacement = "<a href=''>" . . "</a>";
    $regex_text = preg_replace($pattern, );

  ?>
  <div class="tweet2">
    <img src="images/quotes.png" />
    <p><?php echo $tweet[text]; ?></p>
  </div>
<?php }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:23:34.863

```
$regex_text = preg_replace($pattern, $replacement, $input_text); 
```

这是使用 preg_replace 的正确方法，`$input_text`是带有要替换内容的文本的变量。

除此之外：

```
$pattern="/@([A-Za-z0-9_]+)/"; //can't be sure if this will work w/o an example of a input string.
$replacement= "<a href=''>$1</a>";  //$1 is what you capture between `()` in the pattern. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:24:57.067

使用这些括号，您正在定义一个*捕获组*。当您在模式中使用捕获组时，您可以按顺序引用使用`\\n`或的那些`$n`，从 0 到 99。

所以你的替代品是：

`$replacement = "<a href='http://twitter.com/$1'>$1</a>";`

如果您有更多的捕获组，您将拥有更多的数字。

查看[手册条目](http://www.php.net/manual/en/function.preg-replace.php)，`$replacement`参数以获取更多信息。

# java - 数独解法

> ID：15552756
> 
> 赞同：7
> 
> 时间：2013-03-21T16:16:22.280
> 
> 标签：java, recursion, sudoku, backtracking, solver

我的数独求解方法有问题。该程序是这样工作的；板子在启动时是空的，用户在板上添加了几个数字，然后通过点击求解按钮，程序会尝试解决它。除了我将相同的数字放在同一行之外，一切正常。因此，如果用户添加 1,1,0,0 ... 0。在拼图中它无法解决它，因为它的两个 1 彼此相邻，并且将永远继续试图找到一个 sulition，即使它无法解决谜。但是，如果它们都是 0（空），它会立即解决它，就像 Id 将 1 和 2 放在左上角一样。如果我只是在其中放入一些随机数，它将检测为无法解决（或者如果它是一个有效的谜题将解决它）

我正在考虑说， when `theNumber == (row, col) equals thenNumber == (row+1, col)`，它应该`return false`是因为它是一个重复的数字。

这是我尝试在solve方法中添加的代码，显然没有成功。

```
if ((puzzle.getNum(row, col) == a) == (puzzle.getNum(row + 1, col) == a)) {
   return false;
} 
```

非常感谢帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T16:25:59.837

像这样验证谜题：

1.  创建一个包含 9 个元素的布尔数组。
2.  循环遍历每一行、每一列和 9x9 框。
    *   如果您读取一个数字，请将数组中的相应值设置为 true。
    *   如果它已经是真的抛出一个错误（不可能的谜题）。
    *   读取行、列或 9x9 框后，重置布尔数组。
3.  然后，如果验证成功，则调用求解方法。

编辑：源代码

```
public boolean checkPuzzle() {
    boolean[] nums = new boolean[9];
    for (int row = 0; row < panel.puzzleSize; row++) {
        for (int cell = 0; cell < panel.puzzleSize; cell++) {
            if (nums[puzzle[row][cell]]) return false;
            nums[puzzle[row][cell]] = true;
        }
        nums = new boolean[9];
    }
    for (int col = 0; col < panel.puzzleSize; col++) {
        for (int cell = 0; cell < panel.puzzleSize; cell++) {
            if (nums[puzzle[cell][col]]) return false;
            nums[puzzle[cell][col]] = true;
        }
        nums = new boolean[9];
    }
    for (int square = 0; square < panel.puzzleSize; square++) {
        int squareCol = panel.squareSize * (square % panel.squareSize);
        int squareRow = panel.squareSize * Math.floor(square / panel.squareSize);
        for (int cell = 0; cell < panel.puzzleSize; cell++) {
            int col = cell % panel.squareSize;
            int row = Math.floor(cell / panel.squareSize);
            if (nums[puzzle[squareCol + col][squareRow + row]]) return false;
            nums[puzzle[squareCol + col][squareRow + row]] = true;
        }
        nums = new boolean[9];
    }
    return true;
} 
```

没有太多时间进行测试，但它可能会起作用（？）。row/col 变量命名可能不正确，因为我没有时间在您的代码中找到它，但它是否工作并不重要。

# sql - 从 100 万行表中优化插入最大日期

> ID：15552768
> 
> 赞同：0
> 
> 时间：2013-03-21T16:16:54.897
> 
> 标签：sql, db2, query-optimization

我需要从满足以下条件的详细信息表中获取最大日期。
该事务表达到近 100 万行。

还有比这更好的查询吗？

```
insert into SCH1.maxDATES
     select a.ID, a.STATUS, max(detail.REGISTER_DATE) max_DATE
       from SCH1.User a
 inner join SCH1.Transaction detail on detail.ID = a.ID
      where a.STATUS = 3 and detail.REGISTER_DATE is not null
   group by a.ID, a.STATUS 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:49:42.533

确定该表的索引是什么，并在可能的情况下加入它们。同样更具体，不限制你想要的数据，总是更好。

这是一个有用的网站，我经常查看优化建议： [http ://beginner-sql-tutorial.com/sql-query-tuning.htm](http://beginner-sql-tutorial.com/sql-query-tuning.htm)

# php - Zend 的 Gdata/Youtube API 库的 getEditLink() 始终为空

> ID：15552770
> 
> 赞同：0
> 
> 时间：2013-03-21T16:17:05.007
> 
> 标签：php, zend-framework, youtube-api

当我在视频条目上使用 getEditLink() 时，它始终为空，即使连接的用户是视频的作者。

```
// $this->yt_user is the Zend_Gdata_YouTube object that is connected
//    to the API using the user's session token. This same object was
//    used to upload the video to the user's account.
// $input['get'] is sanitized $_GET. The id value is the video's ID
//    sent by Youtube after a video upload from the browser.

$videoEntry = $this->yt_user->getVideoEntry($input['get']['id']);

var_export($videoEntry->getEditLink()); 
```

我可以通过调用 var_export($videoEntry) 来验证 $videoEntry 是一个有效的视频。

我需要能够在上传后编辑视频，但由于 getEditLink() 始终为空，我无法调用 $videoEntry->getEditLink()->getHref();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:31:25.463

感谢对问题的评论，找到了答案。

getVideoEntry() 要求第三个参数为 true 以返回可编辑的视频条目。

```
$videoEntry = $this->yt_user->getVideoEntry($input['get']['id'], null, true); 
```

我阅读的所有示例都没有显示这一点（主要来自 Google 的文档或 Zend 的文档）。他们只展示了第一个论点。

# netweaver - SAP netweaver 7.0 门户 - 当我们访问 /nwa 时看到垃圾页面，/sld

> ID：15552773
> 
> 赞同：-1
> 
> 时间：2013-03-21T16:17:16.463
> 
> 标签：netweaver, sld, sap-enterprise-portal

我们正在使用 Sap Netweaver 门户 7.02。我是这个 SAP 门户的新手。

突然间，当我们访问 /nwa、/sld 时，我们开始看到垃圾页面。当我们尝试访问 /index.html 时，它会显示指向 Web Dynpro Tools、SAP NetWeaver Administrator 等的链接。

一旦我们点击这些链接中的任何一个，它就会在登录屏幕后显示相同的垃圾页面。当我们尝试访问实际的门户时，我们看不到任何菜单项。

请帮助我们解决这个问题。

这是我在浏览器中得到的垃圾字符。

```
��]ks�F������P�k����x<��)vL�/���$U[E5R I��2fS�o���3vfg6k@R�9}�\�&gt;���7�������}�B�j�f���⧽z��h7ԍ�B���;����`�X<�Ν~������o޴C�4� �`NL����[tM�'� -�3�F��8C�0B�Yx���|���|h#Ӣ'9�SY��`>z?$��^��۷Oru�������#9d�_'9N�xQTt���������a.�kls׵��ƪqܜ� �p���4�tf-�b�b���E��~���8���f�3~�����sׁ��������c�� r�5@v�;�Gl�䦷�s,+-����b*�Q�$W(� kקaE�������kd�eZ���ط�.�)pU�̊�;ĖC�����Oo��K��-ÿ�^�p��;�qr#���#�n焈��Υ5����� 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T00:36:21.200

看起来 webdynpro 库已损坏。再次部署 webdynpro 框架库。

# c# - 调用父类中的方法

> ID：15552775
> 
> 赞同：0
> 
> 时间：2013-03-21T16:17:22.293
> 
> 标签：c#, oop, class

所以这是我的设置，评论显示了我想要做的事情：

```
class Process
{
    void SomeMethod()
    {
        // Here I want to call Parent.MethodToCall()
    }
}

class Controller
{
    Process c = new Process();

    void MethodToCall()
    {
    }
} 
```

现在`Controller.MethodToCall()`将在整个类的生命周期中多次调用`Process`。

它只是需要调用的父方法，所以我相信使用 an`event`会有点浪费，因为我永远不会删除处理程序并且只会有一次调用。

所以我目前用来解决这个问题的方式如下：

```
class Process
{
    public Func<void> Method { get; set; }

    void SomeMethod()
    {
        Method();
    }
}

class Controller
{
    Process c = new Process() { Method = MethodToCall }

    void MethodToCall()
    {
    }
} 
```

首先，语法可能不完美，我很快在记事本中敲了它。

我的问题：什么是实现我想要的最佳方式，因为我正在做的事情看起来很混乱？......或者我在设计方面是否认为这是完全错误的方式？

本质上，我想要做的是调用 Controller 类中的方法而不将其公开，因为如果它是公开的，我可以简单地将 Controller 作为参数传递给 Process。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:19:59.440

```
class Child
{
    Parent parent=null;
    public Child(Parent p)
    {
      parent=p;
    }
    void SomeMethod()
    {           
        parent.MethodToCall();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T16:28:34.303

这应该是如何做到这一点的一个很好的例子

```
class Child : Parent
{
    private void SomeMethod()
    {
        base.MethodToCall();
    }
}

class Parent
{
    Child c = new Child();

    protected void MethodToCall()
    {
        c.MethodToCall();//not sure if you are wanting to call c.MethodToCall();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T16:21:50.933

好吧，用 OOP 术语来说，正确的答案如下：

```
class Child : Parent
{
    void SomeMethod()
    {
        base.MethodToCall();
    }
}

class Parent
{
    protected void MethodToCall()
    {
       // protected methods are accesible from
       // descendants and private from outside
    }
} 
```

但是你总是可以避免继承，使用[聚合](http://en.wikipedia.org/wiki/Aggregate_pattern)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T16:21:17.883

你所做的基本上是滚动你自己的事件。在内部，事件处理程序只是附加到事件的委托，唯一的区别是只有事件的所有者才能引发它。

# python - Happybase 与 hbase 连接时出错

> ID：15552776
> 
> 赞同：4
> 
> 时间：2013-03-21T16:17:26.590
> 
> 标签：python, hbase, thrift, happybase

```
>>>import happybase
>>>cnx=happybase.Connection('localhost')

Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "/home/seyf/envname/local/lib/python2.7/site-packages/happybase/api.py", line 121, in __init__
self.open()
File "/home/seyf/envname/local/lib/python2.7/site-packages/happybase/api.py", line 138, in open
self.transport.open()
File "/home/seyf/envname/local/lib/python2.7/site-packages/thrift/transport/TTransport.py", line 149, in open
return self.__trans.open()
File "/home/seyf/envname/local/lib/python2.7/site-packages/thrift/transport/TSocket.py", line 99, in open
message=message)
thrift.transport.TTransport.TTransportException: Could not connect to localhost:9090 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-05-28T07:13:55.480

首先，确保 Thrift 服务器正在运行：

```
hbase thrift start 
```

然后确保您获得正确的端口号（默认为 9090）\

```
cnx=happybase.Connection('localhost', port=xxxx) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T11:18:40.543

这看起来像一个网络问题。你真的启动了 Thrift 服务器吗？（它与 HBase 守护进程本身不同。）

# java - SWT Table - Deselecting a Row after it has been selected

> ID：15552781
> 
> 赞同：1
> 
> 时间：2013-03-21T16:17:33.013
> 
> 标签：java, swt, selection

When I select a row in my table, there is no way to deselect that row. Unless there is two rows in the table. Then I can select the other row. Now the 2nd row is selected and the 1st row is deselected. I thought by selecting the selected row again, that would deselect the row. But that does not seem to be the case for me.

```
viewer = new AplotDataTableViewer(parent, SWT.BORDER|SWT.V_SCROLL|SWT.MULTI|SWT.FULL_SELECTION); 
```

I really don't want to have to create a button to deselect current selections.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T14:40:09.717

TableViewer.setSelection(StructuredSelection.EMPTY) was the way I corrected the issue.

Sambi Reddy provided me with the solution

# jquery - 在页面加载时选择下拉菜单中的选项

> ID：15552782
> 
> 赞同：3
> 
> 时间：2013-03-21T16:17:38.517
> 
> 标签：jquery, asp.net, asp.net-mvc-3, jquery-chosen

在我的项目中，我有一个下拉选项，显示来自世界各地的不同货币代码。此下拉菜单使用“Chosen”jQuery 插件。选择货币代码后，页面中的所有相应符号都会发生变化，即选择 GBP 将显示英镑 (£) 而 USD 将显示美元 ($)。

在页面加载时，用户的默认货币是根据模型从列表中选择的。请看下面：

```
@Html.DropDownListFor(model => model.CurrencyCode, Model.CurrencyList != null ? Model.CurrencyList : new SelectList(new[] { "" }), Model.CurrencyCode != null ? Model.CurrencyCode.ToString() : "--Select Currency Code--", new { id = "CurrencyCode", onchange = " CurrencySymbol($('#hidesubtotal').val(), $('#hidevat').val(), $('#hidetotal').val(),$('#hidediscount').val()); ", @class = TransactionHelpers.cssClass(Validation, "CurrencyCode", "chzn-select"), style = "width:200px; text-align:left;" }) 
```

这在 Chrome 和 Firefox 中都可以正常工作，选择了正确的选项并且所有相关的占位符都反映了选择。但是，当在 Internet Explorer 中呈现时，它会被忽略，下拉菜单的默认选择是“选择一个选项”，而不是用户的货币代码，应该预先选择。通过添加以下参数“@data_placeholder = Model.CurrencyCode”，我可以让 IE 使用正确的代码填写下拉列表，但除非用户重新选择和选项，否则更改不会反映在其他地方。

解决此问题的最佳方法是什么，以便 IE 在没有进一步交互的情况下反映负载变化？任何帮助将不胜感激。

编辑：这里要求的是模型中的一段代码，其中货币代码在 TransactionViewModel 中传递：

```
public string CurrencyCode { get; set; } 
```

还有 JavaScript 处理：

```
 var selectedCurrency = $('#CurrencyCode option:selected').text();
    if (selectedCurrency != '--Select Currency Code--') {
        var matchedCurrecyOptions = $("#CurrencyCode option:contains('" + selectedCurrency + "')");
        if (matchedCurrecyOptions.length == 2) {
            var currencyValue = matchedCurrecyOptions[1].value;
            if (typeof currencyValue !== 'undefined') {
                $('#CurrencyCode option:selected').val(currencyValue).trigger("liszt:updated");
            }
        }
    } 
```

如果我对下拉列表进行更改，则更改会在整个页面中复制，但不会针对初始条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:47:15.257

尝试这个！

```
$(function () {
  $("#currencyCode").change( function () {
    var selectedCurrency = $('#CurrencyCode option:selected').text();
    if (selectedCurrency != '--Select Currency Code--') {
        var matchedCurrecyOptions = $("#CurrencyCode option:contains('" + selectedCurrency + "')");
        if (matchedCurrecyOptions.length == 2) {
            var currencyValue = matchedCurrecyOptions[1].value;
            if (typeof currencyValue !== 'undefined') {
                $('#CurrencyCode option:selected').val(currencyValue).trigger("liszt:updated");
            }
        }
    }

  }).trigger();
}); 
```

应在加载时触发更改事件，并将重新选择所选选项。

# filepicker.io - 使用 filepicker.io 重命名文件

> ID：15552783
> 
> 赞同：0
> 
> 时间：2013-03-21T16:17:48.263
> 
> 标签：filepicker.io

这是我的用例：用户将单击“保存”链接，将出现一个 filepicker.export() 对话框，选择位置和名称并保存文件。这是奇特的部分：那时我还没有文件。它需要先用 GET 请求下载，然后存储在 filepicker 中。在用户单击“保存”之前，我不知道要开始下载哪个文件。

这可以通过在用户单击“保存”时首先下载文件，然后才显示 filepicker.export() 对话框来解决。但是，我觉得这很麻烦，因为用户必须等待下载完成才能选择文件名和位置。

让用户首先做出选择会更好，例如“Dropbox/image.png”，并在下载运行时存储某种占位符：“Dropbox/image.png.part”。稍后，当下载完成时，我可以将数据写入文件并将其重命名为“Dropbox/image.png”。

以下是我的问题：

1.  是否可以将“.part”附加到用户在 filepicker.export() 调用中选择的文件名？
2.  更重要的是，虽然我知道下载完成后如何写入文件，但有没有办法重命名它？我尝试使用相同的文件选择器 URL 和不同的文件名创建一个新的 fpfile 对象，新文件名被忽略（尽管写入成功）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T21:22:46.570

我的建议是首先调用`filepicker.export`一个空文件，并允许用户指定他们想要的文件的名称和在他们的云存储中的位置。当`filepicker.export`调用完成时，它会将一个 FPFile 传递给回调。从那里，您可以下载所需的任何必要内容`filepicker.write`，并将内容保存到用户选择的位置。

不需要重命名文件，因为用户已经在 filepicker.export() 调用期间提供了他们想要保存文件的名称。

# java - 配置 jboss 以避免外部模式获取

> ID：15552785
> 
> 赞同：0
> 
> 时间：2013-03-21T16:17:51.793
> 
> 标签：java, xml, jpa, jboss

全部，

在我们的“更高”环境中，我们不允许访问世界以获取资源。我们的 JBoss 应用程序使用 JPA，我们的日志显示我们正在尝试从外部世界获取 persistence_2_0.xsd，但由于防火墙限制而失败。

如何教 jboss 拦截对模式文件的请求，并提供本地管理的文件？

虽然我在持久性模式的上下文中询问，但我们使用的其他服务也存在类似问题。在其中一些情况下，模式包括其他外部资源，我们希望能够拦截后续调用以提供本地管理的资源。

例如，如果我们的 XML 文件之一具有：

```
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd" 
```

我怎样才能拦截

```
http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd 
```

并提供

```
/opt/local/schemas/persistence_2_0.xsd 
```

不去外面的世界？

这是我们日志中的错误：

```
10.xx.xx.xxx, remoteHostname=10.xx.xx.xxx, remotePort=0, scheme=http, requestServerName=null, requestServerPort=0, headerFields=null, audit=null]] 2013-03-20 18:43:22,679 WARN  [org.hibernate.ejb.packaging.PersistenceXmlLoader] [http-name%2F10.yyy.yy.yy-8080-1] [request_httpUniqueId=(null)] Warning parsing XML: XML InputStream(4) schema_reference.4: Failed to read schema document 'http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd', because 1) could not find the document; 2) the document could not be read; 3) the root element of the document is not <xsd:schema>. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:56:08.550

我希望您的 JPA 实现和您的 JavaEE 容器完全能够拥有这些 XSD 的本地版本并解决这些问题（因此切断任何远程访问）。[例如， DataNucleus JPA](http://www.datanucleus.org/products/accessplatform_3_2)就是使用其中一个 jar 中的 XSD 来完成的。

# python - XMPP 聊天客户端 - 无法接收到 Google Talk 的一些 IM 消息

> ID：15552788
> 
> 赞同：1
> 
> 时间：2013-03-21T16:18:00.073
> 
> 标签：python, xmpp, chat

我在 python 中创建了一个 XMPP 聊天客户端。聊天通常有效，但在从我的聊天客户端发送给使用 Google Talk 的用户时，Google Talk 似乎“阻止”了一些消息。例如，如果我多次向 gtalk 用户发送相同的一个单词消息“hi”，它只会显示一次。但是，当在 iChat 或 Adium 上向用户发送相同的消息序列时，所有的“嗨”都会显示出来。有时，Google Talk 也不会显示来自我的客户的前 1-2 条传入消息。

否则，聊天工作。我的客户从来没有遇到过传入聊天的任何问题。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:38:32.283

万一它对任何人有帮助，我想通了。您只需要在每条聊天消息中指定一个 id 属性。它们可以是随机的 id，但每条消息都应该有一个不同的。我假设 gtalk 正在“阻止”重复消息 b/c 它无法判断消息是不同的还是只是在没有 id 的情况下重复。

# erlang - 如何将有向图传递给不同的进程和节点？

> ID：15552796
> 
> 赞同：5
> 
> 时间：2013-03-21T16:18:36.287
> 
> 标签：erlang

我在进程 A 上创建了一个[**有向图**](http://www.erlang.org/doc/man/digraph.html#add_vertex-2)术语，我想将此有向图传递给另一个节点上的进程。每当我在其他进程上使用此有向图时，我都会收到以下错误：

```
** {badarg,
   [{ets,insert,[598105,{"EPqzYxiM9UV0pplPTRg8vX28h",[]}],[]},
    {digraph,do_add_vertex,2,[{file,"digraph.erl"},{line,377}]}, 
```

因为有**向图**是基于 ETS 的，所以看起来这要复杂得多，使得有向图在它创建的过程中几乎是独立的。我发现这个条目揭示了一个类似的问题：[ETS on a different process](https://stackoverflow.com/questions/5448803/unable-to-use-erlang-ets-in-receive-block)

**我知道我可以在服务器**中创建有向图，然后通过 otp 消息连接到它，但我不能在我的架构中这样做。所有节点都可以使用旨在将状态作为条款传递的特定方法进行通信。

在我看来，将有向图发送到无法直接相互通信的不同节点是不可能的。总的来说，**一个有向图似乎不能被直接序列化**。我在想我可以将有向图“展开”为顶点和边的列表，然后在另一个进程上传输和重新创建它（效率不高、性能不高或优雅）。关于更好的**序列化**方法有什么想法吗？有没有办法将有向图状态从 ETS 存储中序列化出来？

有什么想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T19:21:08.363

我有一个解决方案，但它依赖于 digrapgh:new() 返回的变量的结构，所以我不确定它是否与未来版本兼容。

```
D = digraph:new(),
...
%some code modifying D
...
{digraph,Vertices,Edges,Neighbours,Cyclic} = D, % get the table Id of the 3 tables containing D values
% It should be preferable to use the record definition of the digraph module
%-record(digraph, {vtab = notable :: ets:tab(),
%         etab = notable :: ets:tab(),
%         ntab = notable :: ets:tab(),
%             cyclic = true  :: boolean()}).
LV = ets:tab2list(Vertices),
LE = ets:tab2list(Edges),
LN = ets:tab2list(Neighbours),
...
% then serialize and send all this variables to the target node, ideally in one single tuple like 
% {my_digraph_data,LV,LE,LN,Cyclic} or using refs to avoid the mix of messages, 
% and on reception on the remote node:

receive
    {my_digraph_data,LV,LE,LN,Cyclic} ->
        Dcopy = digrapgh:new(Cyclic),
        {digraph,Vertices,Edges,Neighbours,_Cyclic} = Dcopy,
        ets:insert(Vertices,LV),
        ets:insert(Edges,LE),
        ets:insert(Neighbours,LN),
        Dcopy;
... 
```

就是这样。

> **注意**：如果您在同一个 shell 中对此进行测试，请确保在生成的进程的表达式中更改、 和的名称`Vertices`，否则它将失败 （因为它们在匹配时已经被绑定）。`Edges``Neighbours``receive``badmatch``D`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T19:21:28.267

您可以像这样序列化/反序列化有向图；

```
serialize({digraph, V, E, N, B}) ->
    {ets:tab2list(V),
     ets:tab2list(E),
     ets:tab2list(N),
     B}.

deserialize({VL, EL, NL, B}) ->       
    DG = {digraph, V, E, N, B} = case B of 
       true -> digraph:new();
       false -> digraph:new([acyclic])
    end,
    ets:delete_all_objects(V)
    ets:delete_all_objects(L)
    ets:delete_all_objects(N)
    ets:insert(V, VL)
    ets:insert(E, EL)
    ets:insert(N, NL)
    DG. 
```

这是我用来测试的代码；

```
passer() ->
    G = digraph:new(),
    V1 = digraph:add_vertex(G),
    V2 = digraph:add_vertex(G),
    V3 = digraph:add_vertex(G),
    digraph:add_edge(G, V1, V2, "edge1"),
    digraph:add_edge(G, V1, V3, "edge2"),
    Pid = spawn(fun receiver/0),
    Pid ! serialize(G).

receiver() ->
     receive
         SG = {_VL, _EL, _NL, _B} ->
            G = deserialize(SG),
            io:format("Edges: ~p~n", [digraph:edges(G)]),
            io:format("Edges: ~p~n", [digraph:vertices(G)])
     end. 
```

非常丑陋的解决方案，但有效。我认为这是在节点之间传递有向图的唯一方法，因为 ets 表不能在节点之间共享。

编辑：删除不必要的循环

# c# - 在 WPF 中使用 Bitmap、Graphics、PictureBox 和 BitmapCopy() 的等效方法是什么？

> ID：15552797
> 
> 赞同：0
> 
> 时间：2013-03-21T16:18:42.607
> 
> 标签：c#, wpf, winforms

我会尽量清楚地解释我的问题。

我在 WinForms 中有一个工作代码，它有一个板（PictureBox），它显示了一个由每个用户控件的 UserControl.BitmapCopy() 函数从用户控件列表（win-forms）生成的图像。

这个过程从一个空白图像（图形类型）开始，对于每个用户控件，我使用用户控件的函数 BitmapCopy() 在特定位置绘制它。

结果是一个看起来像真实表单的图像（带有按钮、标签等），但它只是一个图像。

然后我在图片框中显示此图像。

现在我需要在 WPF 中实现这段代码，但是我无法使用 BitmapCopy() 生成每个用户控件的图像。

我找到[了这个代码](https://stackoverflow.com/questions/2522380/get-a-bitmap-image-from-a-control-view)，所以现在我可以为每个用户控件生成一个位图，但我不知道创建大板的最佳方法是什么，最终显示一个包含所有用户控件图像的位图，在不同的地方。

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:48:13.970

这是 WPF 中的等价物：

```
<Window x:Class="MiscSamples.VisualBrush"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="VisualBrush" Height="300" Width="300" x:Name="Window">
    <StackPanel>
        <TextBlock Text="Hi, Im a Window!"/>
        <TextBox Text="This is a TextBox"/>
        <Slider Width="200"/>
    </StackPanel>
    <Window.ToolTip>
        <ToolTip DataContext="{Binding PlacementTarget, RelativeSource={RelativeSource Self}}">
            <Grid Height="400" Width="400">
                <Grid.Background>
                    <VisualBrush Visual="{Binding}"/>
                </Grid.Background>
            </Grid>
        </ToolTip>
    </Window.ToolTip>
</Window> 
```

`Window`'s`ToolTip`由一个网格组成，`VisualBrush`其本身`Visual`就是网格`Window`。它看起来像这样：

![在此处输入图像描述](../Images/44597bf4d58dae9e48abea6e38b74299.png)

如您所见，在 WPF 中实现相同的功能只需要 0 行 C# 代码。

# ruby-on-rails - 与 Mongoid 和 Rails 的“链式”关系 (1:n:m)

> ID：15552801
> 
> 赞同：1
> 
> 时间：2013-03-21T16:18:51.487
> 
> 标签：ruby-on-rails, ruby, mongoid, belongs-to, database-relations

我试图在 Rails (3.2.12) 和 Mongoid (3.1.2) 中实现一个非常简单的“多重关系”。我得到了三个模型：

```
class User
  include Mongoid::Document
  field :name
  has_many :collections
end

class Collection
  include Mongoid::Document
  field :name
  belongs_to :user
  has_many :things
end

class Thing
  include Mongoid::Document
  field :name
  belongs_to :collection
end 
```

所以基本上有一个用户有收藏，也有收藏有“东西”。嗯......第一个问题：这甚至可能吗？如果不是：为什么不呢？;-)

我现在可以创建用户（从 Rails 控制台或通过 Web），我可以创建属于用户的集合。但是当我现在尝试创建一个“事物”时......它只是没有被创建：

```
2.0.0-p0 :014 >   u = User.first
 => #<User _id: 514b2b32e05658e1f1000005, name: "test"> 
2.0.0-p0 :015 > c = Collection.create!(name: "somename", user: u)
 => #<Collection _id: 514b30f0e05658ca67000001, name: "somename", user_id: "514b2b32e05658e1f1000005"> 
2.0.0-p0 :016 > t = Thing.create!(name: "a thing", collection: c)
 => #<Thing _id: 514b3120e05658ca67000002, name: "a thing", collection_id: "514b30f0e05658ca67000001"> 
2.0.0-p0 :017 > Thing.first
 => nil 
```

“集合”创建得很好：

```
2.0.0-p0 :018 > Collection.first
 => #<Collection _id: 514b2b65e05658e1f1000006, name: "test", user_id: "514b2b32e05658e1f1000005"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:27:49.667

将 Collection 类名称更改为其他名称，例如“Stockpile”。MongoDB 使用“集合”作为其术语的一部分，因此它可能无法很好地与您的模型配合使用。

# java - 如何使变量局部化

> ID：15552802
> 
> 赞同：5
> 
> 时间：2013-03-21T16:18:54.603
> 
> 标签：java

我做了这个递归方法来计算二叉树中的最长路径。将其存储在 arralist 中的路径，然后返回。但是，我必须将数组列表变量声明为全局的。是否可以使用这种方法，但他的数组列表变量是本地的。

```
public static <T> ArrayList<T> longestPath(BinaryNode<T> root){
    //ArrayList path = new ArrayList();

   if(root == null) return null;

   if(height(root.left) > height(root.right)){
       path.add(root.element);

       longestPath(root.left);

   }else{
       path.add(root.element);

       longestPath(root.right);

   }

   return path;

} 
```

我必须使它成为全局的原因是因为它是一个递归程序，每次它调用自己时，如果你知道我的意思，它会创建一个具有不同地址的新数组列表对象变量。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T16:20:36.500

在方法参数中传递arraylist：

```
public static <T> List<T> longestPath(BinaryNode<T> root, List<T> path){ 
```

然后当你进行递归调用时：

```
longestPath(root.right, path); 
```

`new Arraylist()`最初调用该方法时只需传递 a

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T16:24:50.037

你应该做的是让你的 main 函数创建一个`ArrayList`并将其传递给一个辅助函数来完成所有工作；例如：

```
public static ArrayList longestPath(BinaryNode root)
{
    ArrayList path = new ArrayList();
    return longestPathHelper(root, path);
}

private static ArrayList longestPathHelper(BinaryNode root, ArrayList path)
{
    // Existing code, except recursive calls pass path as well
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T16:21:02.307

如果您需要访问该变量并且不能使其成为全局变量，您的另一个选择是将其作为参数传递：

```
 public static <T> ArrayList<T> longestPath(BinaryNode<T> root, ArrayList path) {
    //... 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-21T16:21:30.527

如果你将 ArrayList 传递给你的递归函数，是的：

```
public static <T> ArrayList<T> longestPath(BinaryNode<T> root, ArrayList path){
ArrayList lPath = path;

 if(root == null) return null;

 if(height(root.left) > height(root.right)){
   lPath.add(root.element);

   longestPath(root.left, lPath);

 }else{
   lPath.add(root.element);

   longestPath(root.right, lPath);

 }

 return lPath;

 } 
```

# c# - 将文件附加到媒体库中的文档

> ID：15552806
> 
> 赞同：2
> 
> 时间：2013-03-21T16:19:00.607
> 
> 标签：c#, asp.net, kentico

我有一个问题，我需要将文件附加到媒体库中的文档。

开箱即用的 Kentico 似乎只允许在附件部分和相关文档上直接上传，您只能关联网站上的其他内容/文档。

![在此处输入图像描述](../Images/a13a9319406a4b45506b187f995740bd.png)

我希望能够将文件附加为媒体库中的相关文档或附件。

我在网上找了这个，但我找不到任何东西。

我目前的计划是在“添加相关媒体文件”中添加一个自定义部分，但如果有更简单的方法那就太好了。

为了澄清，我需要能够将**多个**媒体文件添加到文档中。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:35:26.953

**“属性**”选项卡下的“**附件**”部分仅适用于物理文件，正如您所提到的，它需要从您的文件系统上传它们。如果您需要将媒体库中的媒体链接到您的文档，还有其他方法可以做到这一点。您可以将**媒体选择**字段添加到您的文档类型，以便能够在**表单**选项卡下选择媒体文件。

 ******* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T07:44:11.373

文件必须作为附件创建吗？

如果不是，我会考虑将媒体选择器字段添加到该文档类型以链接现有媒体库文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T18:04:24.053

附件和媒体文件是两个不同的东西（它们用于不同的目的）。如果您不想复制内容，请自定义您的文档类型（添加一个媒体选择类型字段）。不幸的是，这允许每个字段仅添加一项。

您还可以使用对象关系 API - ObjectRelationshipInfo 和 ObjectRelationshipInfoProvider。您应该能够使用

```
BaseAbstractInfoProvider.GetInfoById("media.file", MediaFileID) 
```

并记录使用

```
BaseAbstractInfoProvider.GetInfoById("cms.node", NodeID). 
```

CMSModules/AdminControls/Pages/ObjectRelationships.aspx 也有一个简单的 UI - 但请注意这些东西还没有得到官方支持。

如果您不想在文档类型中添加多个字段，您可能必须使用 API 并在文档和媒体文件之间创建关系（如上所述）。此解决方案的缺点是您可能必须创建适合您需求的 UI，并且可能创建一些将考虑到关系的 webpart（或自定义现有）。******

# active-directory - LDAP 错误“未找到用户名”

> ID：15552807
> 
> 赞同：4
> 
> 时间：2013-03-21T16:19:00.907
> 
> 标签：active-directory, spring-security, ldap

当用户尝试登录我的 Web 应用程序`code 49 data 525`时，会出现 LDAP 错误 , ，这意味着`username not found`. [LDAP 错误](http://ldapwiki.willeke.com/wiki/Common%20Active%20Directory%20Bind%20Errors)

我不知道对我的 LDAP 服务器进行身份验证的资源帐户是否具有错误的用户名，或者是否是尝试登录我的系统的用户。

我怎么能弄清楚这个？

```
>     org.springframework.ldap.AuthenticationException: [LDAP: error code 49 - 80090308: LdapErr: DSID-0C0903AA, comment:
> AcceptSecurityContext error, data 525, v1772^@]; nested exception is
> javax.naming.AuthenticationException: [LDAP: error code 49 - 800\
>     90308: LdapErr: DSID-0C0903AA, comment: AcceptSecurityContext error, data 525, v1772^@]
>             at org.springframework.ldap.support.LdapUtils.convertLdapException(LdapUtils.java:182)
>             at org.springframework.ldap.core.support.AbstractContextSource.createContext(AbstractContextSource.java:266)
>             at org.springframework.ldap.core.support.AbstractContextSource.getContext(AbstractContextSource.java:106)
>             at org.springframework.ldap.core.support.AbstractContextSource.getReadOnlyContext(AbstractContextSource.java:125)
>             at org.springframework.ldap.core.LdapTemplate.search(LdapTemplate.java:287)
>             at org.springframework.ldap.core.LdapTemplate.search(LdapTemplate.java:361)
>             at org.springframework.ldap.core.LdapTemplate.search(LdapTemplate.java:215) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T21:23:23.850

对于我的问题，我错误地输入了特定 LDAP 用户的 DN。我未能逃脱`CN=Smith\, John`.

添加反斜杠后，我得到另一个 LDAP 错误`error code 49 data 52e`，这意味着用户名和密码错误。

尽管如此，这是一个逃避的问题。

# joomla - Joomla 'sobipro' - 提取数据

> ID：15552808
> 
> 赞同：0
> 
> 时间：2013-03-21T16:19:04.220
> 
> 标签：joomla, sobipro

我已经接管了一个需要重建的 Joomla 项目。

我需要取出用户数据和与用户相关的一些其他数据，我在`jos_user`表中找到了大部分数据，还有一个名为`jos_comprofiler`.

里面有`jos_sobipro_field_data`我也需要的数据，但我不知道这张表与其他任何东西有什么关系，有人可以解释一下吗？一旦我了解了它们是如何组合在一起的，我就可以编写 SQL 和 JOIN 语句来将其取出。

最后，表格`jos_comprofiler`引用了一个头像，它是一个像“100_4f97c0b3c2c31.jpg”这样的图像名称我在哪里可以找到这些图像？

**谢谢，杰克**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:05:53.863

我可以告诉你这些表来自哪里： -`jos_users`是 Joomla 核心使用的用户表，以及`jos_user_profiles`其他配置文件信息。-`jos_comprofiler`是由[http://www.joomlapolis.com/](http://www.joomlapolis.com/)的 Community Builder 扩展创建的表。-`jos_sobipro_field_data`是由 SobiPro 从[http://sobipro.sigsiu.net/创建的表](http://sobipro.sigsiu.net/)

也许这可以帮助您找到下一步。也许其他人知道更多细节。

# javascript - 如何为样式内容定义 JQuery UI 工具提示项选项

> ID：15552809
> 
> 赞同：3
> 
> 时间：2013-03-21T16:19:05.773
> 
> 标签：javascript, jquery, html, css, tooltip

我正在尝试为页面上的一些单选按钮选项创建工具提示。我的工具提示很容易显示 [title] 属性，但我想有选择地在几个元素中设置工具提示文本的格式。我知道我可以提供 HTML 格式的内容，并且我创建了一些类来设置内容的样式，但现在工具提示不再显示。我认为我的问题是我没有正确指定“项目”选项。事实上，我不太确定如何将我的 html“内容”选项定义为一个项目。哈普出场！

JS

```
$('#tooltip').tooltip({
    tooltipClass: "tooltip-class"
    items: what do?
    content: "<div class="tooltip-header">header</div><div class="tooltip-description">text</div>"
}); 
```

JS选择的HTML

```
<a href="#" id="tooltip" class="link-info"></a> 
```

谢谢阅读。:)

**更新：**

好的！我想通了……有点。我不正确地封装了我的字符串： "<>"bad code"<>" 。我的内容选项问题的解决方案是将我的 html 放入变量中并将其设置为内容。JQuery 似乎更喜欢那个。我的样式在工具提示中正确显示，但由于某种原因，它仅适用于为工具提示选择的三个项目之一。控制台中没有任何内容表明它不应该工作。没有语法错误，我选择了正确的 id。我很混乱。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T15:09:47.033

我想我知道你遇到了什么。当您使用该`content`选项时，您仍然必须`title`在元素上包含属性或将`items`选项指定为不同的东西。

我不知道为什么 jQuery 团队决定这样做，因为看起来`selector`你正在应用工具提示，这与`items`选项使用的东西是一样的。相当重复。

无论如何，您可以更改内容，但确保您应用工具提示的元素具有该`title`属性，或者您使用选择器指定`items`选项，该选择器可以简单地匹配您应用工具提示的选择器。确实很奇怪。

例子： `$('#selector').tooltip({ content: 'your content', items: '#selector' });`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-09T15:50:09.957

当您遇到报价问题时，您有很多选择，就像您说的：

1.  像你最后一样使用另一个变量
2.  用这样的反斜杠转义“内部” qoutes：

    ```
    $('#tooltip').tooltip({
        tooltipClass: "tooltip-class",
        items: "what do?",
        content: "<div class=\"tooltip-header\">header</div><div class=\"tooltip-description\">text</div>"
    }); 
    ```

3.  结合单引号和双引号：

    ```
    $('#tooltip').tooltip({
        tooltipClass: "tooltip-class",
        items: "what do?",
        content: '<div class="tooltip-header">header</div><div class="tooltip-description">text</div>'
    }); 
    ```

**更新**后的第二个问题：如果您创建了链接`id`并且正在应用带有 id 选择器的工具提示

```
<a href="#" id="tooltip" class="link-info"></a> 
```

`id`一个html页面中只能有一个相同的链接！所以如果你声明了更多相同的链接`id`，很可能它不会工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T16:23:03.400

`content: "<div class="tooltip-header">header</div><div class="tooltip-description">text</div>"`

这会产生语法错误。

请执行以下操作：

*   学习如何使用浏览器的 JS 错误控制台
*   学习 JS 语法的绝对基础，以及如何使用字符串/文本字面量进行操作

# c# - 使用非常量字符串作为 CategoryAttribute 名称

> ID：15552810
> 
> 赞同：0
> 
> 时间：2013-03-21T16:19:07.063
> 
> 标签：c#, properties, resources, attributes, constants

总而言之，我正在本地化我的 C# 应用程序，并且我已经进入了我的设置控制。当我使用 a`PropertyGrid`时，我正在使用属性来提供选项。我有一个`CategoryAttribute`“服务器访问”，我需要用不同的语言显示 - 我有：

```
[CategoryAttribute("ServerAccess"),
 ReadOnlyAttribute(false),
 XmlElement,
 DescriptionAttribute("Message about the Server Access Option.")]
public bool ShowSystemDatabases 
{
    get { return this.showSystemDatabases; }
    set { this.showSystemDatabases = value; }
} 
```

我试图将其更改为：

```
[CategoryAttribute(ObjectStrings.SettingsServerAccess),
 ReadOnlyAttribute(false),
 XmlElement,
 DescriptionAttribute(MessageStrings.SettingsShowSystemDatabaseInfo)]
public bool ShowSystemDatabases 
{
    get { return this.showSystemDatabases; }
    set { this.showSystemDatabases = value; }
} 
```

我的资源文件在哪里`ObjectStrings`（'ObjectStrings.resx' 等）。这会引发编译时错误

```
An attribute argument must be a constant expression, typeof expression or array 
creation expression of an attribute parameter type... 
```

显然，当构造函数需要一个`const string`. 我尝试过从使用各种绕行方法进行转换`string`，`const string`但都失败了。这是一个很简单的问题，但是...

**解决这个问题的最简单方法是什么？**

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:32:23.857

我不知道你如何处理这个问题，特别是在控件属性的情况下，但实现这一点的一般方法是在运行时解析资源，在你的属性上使用如下参数：

```
MessageResourceType = typeof (MyResource), MessageResourceName = "MyResourceKey") 
```

而不是直接将指针传递给资源键。

不知道CategoryAttribute、DescriptionAttribute和其他控件的properties属性是否有等效的方法，或者是否有方法可以重载它们。

# nant - 如何在 nant.onfailure 中获取错误消息

> ID：15552812
> 
> 赞同：0
> 
> 时间：2013-03-21T16:19:09.063
> 
> 标签：nant

我正在尝试获取构建失败的消息`nant.onfailure`。我知道我可以使用`try/ catch`，但我想避开这条路线。是否有可能在没有的情况下收到失败的消息`try/catch`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:57:16.953

我不确定您是否知道 NAntContrib 库。

[http://nantcontrib.sourceforge.net/](http://nantcontrib.sourceforge.net/)

您可以包含他们的库以获得额外的“任务”集。我目前正在使用名为“record”的任务在没有任何 try/catch 的情况下记录成功和失败。

就像是，

```
<property name="Build.FailureLog" value="C:\TestLog.txt" />

<!-- Start the listener record -->
<record name="${Build.FailureLog}" level="Verbose" action="Start" />
<property name="nant.onfailure" value="Failure" />

<target name="Failure" description="This target is called upon when the build has failed." >
    <!-- Close the listener -->
    <record name="${Build.FailureLog}" action="Close" />

    <!-- Additionally you could send emails by including in mail -->
</target> 
```

# graph - 图的源和目标数组的并行操作

> ID：15552813
> 
> 赞同：0
> 
> 时间：2013-03-21T16:19:09.157
> 
> 标签：graph, opencl

我有一个 MST 图的源数组和一个目标数组，通过将 MST 的 id 放置在实际顶点的位置来创建，如下所示：

源： 16 16 16 16 16 9 9 9 9 9 9 9 9 9 9 19 19 19 19 19 19 10 10 10 10 10 10 16 16 16 16 16 16 9 9 9 9 9 19 19 19 19 19 19 19 1

目的地 9 9 10 9 22 10 10 16 16 16 10 10 10 16 19 10 10 13 9 10 9 13 14 19 19 19 19 9 22 29 9 9 9 19 16 19 16 16 9 10 9 10 9 16 9 3

这些源与其在阵列中的目的地相对应地排列。我想把相似的一对放在一个地方。例如，我的 o/p 应该看起来像..

源 16 16 16 16 16 16 9 9 9 9 9

目标 9 9 9 9 9 9 10 10 10 10 10 .... 等等...！这可以并行完成，如果不是并行，如何以高效的方式顺序完成..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:31:16.637

据我了解您的问题，您想使用自定义比较运算符对 (src,dst) 对进行排序。在这种情况下，是的，有几种排序算法可以在 GPU 上高效运行。寻找 OpenCL/Parallel Bitonic 排序和 Radix 排序。

# php - 使用 JSON 通过 PHP 将 excel 数据存储在 MySQL 数据库中

> ID：15552819
> 
> 赞同：0
> 
> 时间：2013-03-21T16:19:31.913
> 
> 标签：php, mysql, json, vba, xmlhttprequest

我在一个 Excel 电子表格中有两列数据，我想将它们存储在 MySQL 数据库中（目前在本地托管）。

我正在将我的电子表格转换为我通过 XMLHTTP 发送到 PHP 代码的 JSON 字符串。这是我的 VBA 代码：

```
Sub sendjson()
Dim json As String
Dim filed1 As String
Dim i As Integer
Dim j As Integer
Dim data As String
Worksheets("param").Range("C1").Select

data = "{" + Chr(34) + "data" + Chr(34) + ":["

j = 2
Do While Not (IsEmpty(ActiveSheet.Cells(j, 3)))
    j = j + 1
Loop

i = 2
Do While Not (IsEmpty(ActiveSheet.Cells(i, 3)))
    If i < j - 1 Then
    data = data + ActiveSheet.Cells(i, 3) + ","
    Else
    data = data + ActiveSheet.Cells(i, 3) + "]}"
    End If
    i = i + 1
Loop
Worksheets("param").Range("D1").Value = data

json = data

Set objHTTP = CreateObject("Microsoft.XMLHTTP")
objHTTP.Open "POST", "http://localhost/test/jsontomysql.php", False
objHTTP.setRequestHeader "Content-Type", "application/x-www-form-urlencoded"
objHTTP.send ("field1=" & json)
Set objHTTP = Nothing
End Sub 
```

这是 jsontomysql.php 代码：

```
<?php
try
{
    $bdd = new PDO('mysql:host=localhost;dbname=test', 'root', '');
}
catch(Exception $e)
{
    die('Erreur : '.$e->getMessage());
}
$data = json_decode($json);
foreach ($data as $name => $value) {
    foreach ($value as $entry){
        $req = $bdd->prepare('INSERT INTO param (tck, value) VALUES(:tck, :value)');
        $req->execute(array(
            ':tck'=>$entry->tck,
            ':value'=>$entry->value
        ));     
    }
}
?> 
```

我的 MySQL DB 具有以下结构：

参数{tck(VARCHAR255)，值（真实）}

当我运行代码时，什么都没有发生。我很确定问题出在：`$data = json_decode($json);`

为了让事情变得更简单，我直接将 JSON 字符串复制到我的 php 代码中，如下所示：

```
<?php
try
{
    $bdd = new PDO('mysql:host=localhost;dbname=test', 'root', '');
}
catch(Exception $e)
{
    die('Erreur : '.$e->getMessage());
}
//$phpArray = json_decode($_POST['field1']);

$data = '{
    "u1":{"tck":"EUSA1 Curncy","value":0,005},
    "u2":{"tck":"EUSA2 Curncy","value":0,0049},
    "u3":{"tck":"EUSA3 Curncy","value":0,0048},
    "u4":{"tck":"EUSA4 Curncy","value":0,0047},
    "u5":{"tck":"EUSA5 Curncy","value":0,0046},
    "u6":{"tck":"EUSA6 Curncy","value":0,0045},
    "u7":{"tck":"EUSA7 Curncy","value":0,0044},
    "u8":{"tck":"EUSA8 Curncy","value":0,0043},
    "u9":{"tck":"EUSA9 Curncy","value":0,0042}
    }';

$phpArray = json_decode($data, true);

foreach ($phpArray as $key => $value) { 
    foreach ($value as $entry) { 
        $req = $bdd->prepare('INSERT INTO param (tck, value) VALUES(:tck, :value)');
        $req->execute(array(
            ':tck'=>$entry->tck,
            ':value'=>$entry->value
        ));
    }
}
?> 
```

我的第一个 foreach 循环中的第 26 行似乎有一个错误......

```
Warning: Invalid argument supplied for foreach() in C:\wamp\www\finance\jsontomysql.php on line 26 
```

编辑 ：

问题必须在 VBA 和 PHP 之间，因为当我这样做时，SQL DB 得到了很好的更新：

```
<?php
try
{
    $bdd = new PDO('mysql:host=localhost;dbname=test', 'root', '');
}
catch(Exception $e)
{
    die('Erreur : '.$e->getMessage());
}
//$phpArray = json_decode($_POST['field1']);

$data = '{"u1":{"tck":"EUSA1 Curncy","value":0.005},"u2":{"tck":"EUSA2 Curncy","value":0.0049},"u3":{"tck":"EUSA3 Curncy","value":0.0048},"u4":{"tck":"EUSA4 Curncy","value":0.0047},"u5":{"tck":"EUSA5 Curncy","value":0.0046},"u6":{"tck":"EUSA6 Curncy","value":0.0045},"u7":{"tck":"EUSA7 Curncy","value":0.0044},"u8":{"tck":"EUSA8 Curncy","value":0.0043},"u9":{"tck":"EUSA9 Curncy","value":0.0042}}';
var_dump($data);

$phpArray = json_decode($data, true);
var_dump($phpArray);

foreach ($phpArray as $u) {  
        $req = $bdd->prepare('INSERT INTO param (tck, value) VALUES(:tck, :value)');
        $req->execute(array(
            ':tck'=>$u['tck'],
            ':value'=>$u['value']
        ));
}
?> 
```

问题是什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:26:57.530

您正在调用您要发布的字段`field1`，因此该行可能必须类似于：

```
$data = json_decode($_POST['field1']); 
```

您还应该将您的准备语句移出循环；你只需要准备一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:28:01.127

您是否查看过 json_decode($json) 实际输出的内容？您是否以您期望能够像尝试一样对其进行迭代的形式获取数据？

只需尝试执行 print_r($json); 调试输出作为快速验证。

看起来 json_decode 失败了。在我的测试中，这是因为您的“价值观”没有被引用。

例子：

```
<?php

$data = '{"u1":{"tck":"EUSA1 Curncy","value":"0,005"},"u2":{"tck":"EUSA2 Curncy","value":"0,0049"},"u3":{"tck":"EUSA3 Curncy","value":"0,0048"},"u4":{"tck":"EUSA4 Curncy","value":"0,0047"},"u5":{"tck":"EUSA5 Curncy","value":"0,0046"},"u6":{"tck":"EUSA6 Curncy","value":"0,0045"}}';

$phpArray = json_decode($data, true);

foreach ($phpArray as $key => $value) {
  print "$key\n";
  print "$value[tck]\n";
  print "$value[value]\n";
  print "\n\n";
}

?> 
```

输出：

```
marks-mac-pro:~ mstanislav$ php data.php 
u1
EUSA1 Curncy
0,005

u2
EUSA2 Curncy
0,0049

u3
EUSA3 Curncy
0,0048

u4
EUSA4 Curncy
0,0047

u5
EUSA5 Curncy
0,0046

u6
EUSA6 Curncy
0,0045 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T10:05:08.217

我终于找到了:-)。问题出在发送对象和用于我的数字的分隔符中。

将“，”转换为“。”后 在我的 Excel 电子表格中，我必须弄清楚发送 vba 对象的问题。

**工作代码如下**：

**VBA**代码：（将数据转换为 JSON 字符串并将字符串发送到我的 PHP 页面）

```
Sub sendjson()
Dim i As Integer
Dim j As Integer
Dim data As String
Worksheets("param").Range("D1").Select

data = "{"

j = 2
Do While Not (IsEmpty(ActiveSheet.Cells(j, 4)))
    j = j + 1
Loop

i = 2
Do While Not (IsEmpty(ActiveSheet.Cells(i, 4)))
    If i < j - 1 Then
    data = data + ActiveSheet.Cells(i, 4) + ","
    Else
    data = data + ActiveSheet.Cells(i, 4) + "}"
    End If
    i = i + 1
Loop
Worksheets("param").Range("E1").Value = data

'data --> php
    Set objHTTP = CreateObject("WinHttp.WinHttpRequest.5.1")
    serverURL = "http://localhost/finance/jsontomysql.php"
    objHTTP.Open "POST", serverURL, False
    objHTTP.setRequestHeader "Content-Type", "application/x-www-form-urlencoded"
    objHTTP.send ("field1=" & data)
Set objHTTP = Nothing
End Sub 
```

我的**PHP**代码和**MySQL**查询：

```
<?php
try
{
    $bdd = new PDO('mysql:host=localhost;dbname=test', 'root', '');
}
catch(Exception $e)
{
    die('Erreur : '.$e->getMessage());
}
// $file = fopen("test.txt","w");
// echo fwrite($file,$_POST['field1']);
// fclose($file);
$data = $_POST['field1'];
$phpArray = json_decode($data, true);
foreach ($phpArray as $u) {  
        $req = $bdd->prepare('INSERT INTO param (tck, value) VALUES(:tck, :value)');
        $req->execute(array(
            ':tck'=>$u['tck'],
            ':value'=>$u['value']
        ));
}
?> 
```

为了确保 PHP 代码接收到字符串，我将结果写入 .txt 文件（=我的代码中的注释部分）。

现在，MySQL DB 很好地将值插入到 DB 中。

感谢大家的帮助。

# c++ - 将缓冲区存储到变量中

> ID：15552822
> 
> 赞同：0
> 
> 时间：2013-03-21T16:19:41.497
> 
> 标签：c++, winsock

我这样显示我的缓冲区：

```
void WINAPI MyUCPackets(char* unpkt, int packetlen, int iR, int arg)

cout << "[" << packetlen << "] ";
for ( int i = 0; i < packetlen; i++ ) {
printf( "%02x ", unsigned char (unpkt[i]) );
}
printf( "\n" ); 
```

现在我需要检查缓冲区的一部分是否包含特定值，例如：

```
if(unpkt[1] == 0xfb && unpkt[2] == 0x05 && unpkt[3]== 0x20)
{
    unpkt = dcpkt;
} 
```

打印输出：

```
6C FB 05 20 00 
```

我需要检查是否使用了除了第一个字节之外的确切缓冲区，因为它是随机的。

但它不起作用。条件没有得到执行，我确定 unpkt1 是 0xfb 而 unpkt2 是 05 因为缓冲区的打印显示了该值。

我尝试使用`sprintf`将缓冲区存储为十六进制，但看起来很乱。还有其他想法吗？

`sprintf(buf2, "%02X", unpkt[1]);`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:27:49.767

当您比较两个值时，两侧应该是 both`signed`或 both `unsigned`。看这个例子：

```
char x = 0xFB;

if (x == 0xFB)
    printf("YES");
else
    printf("NO"); 
```

输出，***我们期望“YES”，但我们得到“NO”***

> 不

* * *

您显示的值与您正在测试的值不同：

```
printf( "%02x ", unsigned char (unpkt[i]) ); 
```

删除`unsigned char`强制转换，然后显示值。我猜你会看到不同的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T16:32:56.497

比较`0xfb`可能失败（有符号与无符号）。如果`unpkt`定义为`char`，则该语句可能需要为：

```
if((unsigned char)unpkt[1] == 0xfb && (unsigned char)unpkt[2] == 0x05 && (unsigned char)unpkt[3]== 0x20)
{
    unpkt = dcpkt;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T16:41:23.943

你坚持使用`printf`（又名 C 流）或`cout`（C++ 流）并且不要跨越流，因为它会“很糟糕，非常糟糕”——捉鬼敢死队 I

尝试使用：

```
cout << "0x" << hex << (unsigned int) unpkt[i]; 
```

# c++ - 不能使用从 std::unary_function 继承的 typedef

> ID：15552825
> 
> 赞同：3
> 
> 时间：2013-03-21T16:19:46.690
> 
> 标签：c++

```
prog.cpp:9:13: error: ‘result_type’ does not name a type
prog.cpp:9:13: note: (perhaps ‘typename std::unary_function<_Arg, _Result>::result_type’ was intended) 
```

编译器：http: [//ideone.com/vttG8W](http://ideone.com/vttG8W)

为什么我不能直接使用 result_type？

```
#include <functional>

using namespace std;

template <typename ARGUEMENT, typename RESULT>
class FunctorBase : public std::unary_function<ARGUEMENT, RESULT>
{
public:
    virtual result_type operator () (argument_type) = 0;
        FunctorBase() {}
        virtual ~FunctorBase() {}
};

int main()
{
    FunctorBase<int&, void>();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:22:14.153

因为`result_type`和`argument_type`依赖于模板参数。采用：

```
virtual typename std::unary_function<ARGUEMENT, RESULT>::result_type
  operator () (typename std::unary_function<ARGUEMENT, RESULT>::argument_type) = 0; 
```

或者，如果您在更多地方需要它，请添加

```
using typename std::unary_function<ARGUEMENT, RESULT>::result_type;
using typename std::unary_function<ARGUEMENT, RESULT>::argument_type; 
```

在你上课的开始。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T16:26:02.530

因为它是一个*不合格的名字*。

当您在类模板中使用非限定名称时，您必须告诉编译器它不应该在两阶段名称查找的第一阶段立即搜索全局名称，而是等到实例化（因为名称可能来自基类，就像这里的情况一样）。

在这种情况下，您可以这样做（并创建`result_type`一个*从属*的限定名称）：

```
typedef typename std::unary_function<ARGUEMENT, RESULT>::result_type result_type; 
```

请注意，这同样适用于`argument_type`.

```
typedef typename std::unary_function<ARGUEMENT, RESULT>::argument_type argument_type; 
```

有了这两个`typedef`s，原始的成员函数声明现在将编译：

```
virtual result_type operator () (argument_type) = 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T16:28:56.320

您可以在您的课程中重新 typedef 它：

```
typedef typename std::unary_function<ARGUEMENT, RESULT>::result_type my_result_type; 
```

（您甚至可以将其重命名为完全相同的名称）即使您继承的内容是私有的，这也可以工作。

这[编译](http://ideone.com/nXas0C)：

```
template <typename blah>
class MyTemplateBaseClass
{
    public: 
    typedef blah my_blah_typedef;
};

template <typename arg>
class DerivedFromTemplated : private MyTemplateBaseClass<arg>
{
public:
    //Either giving the full name:
    typename MyTemplateBaseClass<arg>::my_blah_typedef GetBlahType()
    {
        return typename MyTemplateBaseClass<arg>::my_blah_typedef();
    }

    //Or typedef-ing it locally:
    typedef typename MyTemplateBaseClass<arg>::my_blah_typedef my_blah_typedef;
    my_blah_typedef GetBlahType2()
    {
        return my_blah_typedef();
    }
};

int main()
{
    DerivedFromTemplated<int> test;
} 
```

# jquery - 如何在div标签中打印文本

> ID：15552827
> 
> 赞同：1
> 
> 时间：2013-03-21T16:19:57.833
> 
> 标签：jquery, css

我想在 div 标签上打印文本。这里我有三个数组。x_array 和 y_array 是 x 和 y 值的坐标，而 txt_array 包含文本。基于和 x 和 y 坐标文本将显示在 div 标签中。以下代码将显示预期输出，但仅显示最后一个数组元素。剩余的将被删除。我想根据 x 和 y 坐标显示所有文本。请帮助我。

```
<script>
        var i=0;
       // var obj={"A","B","C","D"};
   $(document).ready(function(){
 $("#myimg").hover(function(){

  var x1=["50","100","150","200"];
  var y1=["50","100","150","200"];
  var txt1=["Text1","Text2","Text3","Text4"];
  var i=0;

  for(var i=0;i<4;i++)
      {

  var X=x1[i];
  var Y=y1[i];
  var txt=txt1[i];

      $("#myimg").append($("#test").offset({left:X,top:Y}));                    
      $("#test").html(txt);

  }

 });
 });
    </script> 
```

![以下是输出](../Images/b1412e0fda22d2128d4cfa655c8df239.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:24:33.313

ID**必须**是唯一的。尝试`classes`改用。

即使允许多个 ID，您的使用`.html()`也会覆盖所有`#test`元素的 HTML。您需要通过脚本动态创建元素：

```
 var test = $("<span class='test'></span>");
  test.html(txt);
  $("#myimg").append(test.offset({left:X,top:Y})); 
```

同样，如果您有多个`#myimg`元素，也可以为这些元素使用类。

# jquery - jQuery Quicksand 在过渡时跳动

> ID：15552834
> 
> 赞同：0
> 
> 时间：2013-03-21T16:20:05.157
> 
> 标签：jquery, css, quicksand

我遇到了与此类似的问题...[使用 jQuery Quicksand 时 CSS 冒泡](https://stackoverflow.com/questions/10302280/css-bubbling-while-using-jquery-quicksand)。当我点击过滤器时， <li> 获得一个绝对位置和 a`top: 206`并在转换完成后滑回 0 它看起来很好。但是 <li> 在移动时会变得生涩或跳动。这是一个CSS问题吗？我`float: left`对每个项目都有一个，就像他们在另一个“冒泡”问题的附加链接中提到的那样。

这是我的CSS。

```
ul.filter li {  
  float:left; 
  margin-right:20px; 
  margin-bottom: 20px; 
  list-style-type: none; 
  font-size: 17px;
}
ul.filterable-grid{ float: left; }
ul.filterable-grid li { 
  width:295px; 
  float: left; 
  margin-right:10px; 
  list-style-type: none; 
  text-transform: uppercase; 
  padding: 10px 10px 10px 10px; 
  border: 3px solid; 
  display: block;
} 
```

这是我查看源代码时的标记。

```
<ul class="filterable-grid clearfix">
  <li class="portfolio-item" data-id="id-2" data-type="filter-two ">
    <a rel="prettyPhoto[gallery]" href="http://localhost:8888/BVH/wp-content/uploads/2013/03/1.jpg">
      <img width="500" height="500" src="http://localhost:8888/BVH/wp-content/uploads/2013/03/1.jpg" class="attachment-portfolio wp-post-image" alt="1" />
    </a>                   
    <p><a href="http://localhost:8888/BVH/?portfolio=testing2">Testing2</a></p>
  </li>
  <li class="portfolio-item" data-id="id-3" data-type="filter-one ">
    <a rel="prettyPhoto[gallery]" href="http://localhost:8888/BVH/wp-content/uploads/2013/03/1.jpg">
      <img width="500" height="500" src="http://localhost:8888/BVH/wp-content/uploads/2013/03/1.jpg" class="attachment-portfolio wp-post-image" alt="1" />
    </a>                   
    <p><a href="http://localhost:8888/BVH/?portfolio=testing">Testing</a></p>
  </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:29:40.460

在查看[此处](http://razorjack.net/quicksand/)给出的示例后，我认为您可以摆脱这一行：

```
ul.filterable-grid{ float: left; } 
```

为您的样式添加一个`height`和一个`overflow:hidden`属性`li`

# node.js - 安装 socket.io 的问题

> ID：15552844
> 
> 赞同：3
> 
> 时间：2013-03-21T16:20:54.587
> 
> 标签：node.js, socket.io

我正在开发一个需要`Node.js`和`Socket.io`. 在尝试安装两者后，我发现“Node.js”没有任何不便，但在输入`npm install socket.io`CMD 时遇到错误：

```
C:\Users\otori\node_modules\socket.io\node_modules\socket.io-client\node_module s\ws\build\binding.sln : MSBUILD : error MSB3411: Could not load the Visual C++ component "VCBuild.exe". If the component is not installed, either 1) install the Microsoft Windows SDK for Windows Server 2008 and .NET Framework 3.5, or 2) install Microsoft Visual Studio 2008. 
```

错误代码：`error MSB3411`

似乎我`node.js`或我的 CMD 无法找到`VCBuild.exe`并要求我安装我已经安装的 VS2008（我也尝试过使用 VS 2010）。

非常感谢任何帮助或指导，我使用的是 Windows 8 x64 和 node.js v0.10.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-06T20:53:54.117

很抱歉挖了一个老问题，但你的问题是我搜索“Socket.io VCBuild”时的第一个结果

我偶然发现的解决方案是：

npm install socket.io --msvs_version=2012

或者

npm install sqlite3 --msvs_version=auto

# windows - 如何使用 Location 标头使 HTTP 缓存无效？

> ID：15552845
> 
> 赞同：3
> 
> 时间：2013-03-21T16:20:55.180
> 
> 标签：windows, internet-explorer, http, httpwebrequest, http-caching

关于[缓存失效](http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html#sec13.10)，HTTP 规范说：

> 某些 HTTP 方法必须导致缓存使实体无效。这是 Request-URI 或 Location 或 Content-Location 标头（如果存在）引用的实体。

我试图通过使用**Location**标头使缓存中的条目无效，但它似乎不起作用。这是我的用例：

1.  `15:13:23.9988 | GET | folders/folder.34/contents - 200 (OK)`
2.  `15:13:24.1318 | PUT | folders/folder.34/contents/test.docx - 201 (Created)`
3.  `15:13:24.1548 | GET | folders/folder.34/contents - 200 (OK) (cached)`

(2) 的响应包含一个**Location**标头，其中包含请求 (1) 和 (3) 中使用的 URI。我相信这应该使*folder/folder.34/contents的缓存条目无效，但是根据*[HttpWebResponse.IsFromCache](http://msdn.microsoft.com/en-us/library/system.net.webresponse.isfromcache.aspx)属性，（3）中的响应似乎来自缓存。

我在**Location**标头中尝试了多种 URI 格式，包括：

*   `Location: ../../../folders/folder.34/contents` （以及其他各种“../”计数）
*   `Location: folders/folder.34/contents`
*   `Location: /folders/folder.34/contents`
*   `Location: http://myhostname/folders/folder.34/contents`

但仍然（3）似乎总是来自缓存。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T18:44:13.630

HTTPBis 更加清晰：

[https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-p6-cache-22#section-6](https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-p6-cache-22#section-6)

```
Because unsafe request methods (Section 4.2.1 of [Part2]) such as
PUT, POST or DELETE have the potential for changing state on the
origin server, intervening caches can use them to keep their contents
up-to-date.

A cache MUST invalidate the effective Request URI (Section 5.5 of
[Part1]) as well as the URI(s) in the Location and Content-Location
response header fields (if present) when a non-error response to a
request with an unsafe method is received. 
```

因此，如果这不是您看到的行为，我的假设只是您使用的特定 HTTP 客户端*没有*正确的行为。

我特别期待：

```
Location: /folders/folder.34/contents 
```

要有正确的行为。

# javascript - 引导下拉按钮在标题中不起作用

> ID：15552849
> 
> 赞同：0
> 
> 时间：2013-03-21T16:21:03.737
> 
> 标签：javascript, css, twitter-bootstrap, drop-down-menu, header

我遇到了一个奇怪的问题。我正在使用一个使用引导程序的预建 wordpress 主题，它被称为导师。这是实时预览[http://demo.pixelentity.com/?mentor](http://demo.pixelentity.com/?mentor)。我正在尝试在社交图标旁边的标题中添加一个下拉按钮。问题是下拉列表将在任何地方工作，但在标题中。以下是所有相关代码：

CSS：

```
header #user_menu{
    position:absolute;
    float:right;
    margin-top:20px;    
    margin-left:660px;
    width:350px
} 
```

HTML：

```
<!--header and menu-->
    <header class="navbar navbar-fixed-top" id="top">
    <div class="navbar-inner">
        <div class="container">
            <div id="user_menu"></div>
                           ... 
```

Javascript：

```
 $("#user_menu").append('<div class="btn-group" 
style="float:left; margin-left:5px; margin-top:-2px;"> 
<a class="btn btn-primary" href="http://beta.orangegeek.com/contact">
<i class="icon-cog icon-white"></i>My Account</a> 
<a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="#">
<span class="caret"></span></a>
 <ul class="dropdown-menu"><li>
<a href="#"><i class="icon-book"></i>Billing</a></li>
<li><a href="#"><i class="icon-globe"></i>Domains</a></li>
<li><a href="#"><i class="icon-lock"></i>Change Password</a></li>
</ul>
</div>'); 
```

我知道 JS 的格式不正确，我认为这样阅读会更容易。我认为这不是问题，因为我可以复制和粘贴示例代码，但它仍然不会下拉。

就像我说的，这段代码在除标题之外的任何地方都有效。

有任何想法吗？我不知道此时还能尝试什么。

# php - 打印带有强制分页符的表格

> ID：15552851
> 
> 赞同：2
> 
> 时间：2013-03-21T16:21:09.960
> 
> 标签：php, html, css, printing

我有一张有数百行的长桌。为了在每一页上打印表格标题，我使用 THEAD {display: table-header-group} 来设置表格的样式。它在 Firefox 和 IE9 中按预期工作。但是当我尝试强制分页符时，如下面的代码所示，它在 IE9 中不起作用。使用 IE9，表格标题只打印表格自然中断的页面。

这是代码片段 -

```
CSS: 
@media print {
    thead { display: table-header-group; }
}

HTML/PHP:
    <table>
      <thead>
        <tr>
           <th>Header 1</th>
               <th>Header 2</th>
               <th>Header 3</th>        
           </tr>
      </thead>
      <tbody>
           <?php 
           foreach ($items as $item) {
               echo  " <tr> " ;
                  echo  "<td>text</td>" ;
                  echo  "<td>text</td>" ;
                  echo  "<td>text</td>" ;

                  if ($condition) {
                      echo  "</tr>" ;

                      echo  "<tr style='page-break-after:always;'>" ;
                      echo  "</tr>" ;
                  }
           }
           ?>
       </tbody>
    </table> 
```

将不胜感激任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:32:36.657

从使用带有结束标签的正确 HTML 开始

```
if ($condition) {
   echo ( "</tr>" );
   echo ( "<tr style='page-break-after:always;'>" );
   echo ( "</tr>" );
} else {
   echo ( "</tr>" );
} 
```

如果这没有帮助，请尝试

```
if ($condition) {
   echo ( "</tr>" );
   echo ( "<tr style='page-break-after:always;'>" );
   echo ( "</tr> " );
   echo ( ' <tr class="class_only_visible_when_printed"> ' );
   echo ( "  <th>Header 1</th> " );
   echo ( "  <th>Header 2</th> " );
   echo ( "  <th>Header 3</th> " );        
   echo ( " </tr> " );
} else {
   echo ( "</tr>" );
} 
```

# xsd - XSLT：在最后一个 simpleType 之后和第一个 complexType 之前将元素定义添加到 XSD

> ID：15552857
> 
> 赞同：2
> 
> 时间：2013-03-21T16:21:18.103
> 
> 标签：xsd, xslt-2.0

我正在尝试创建一个 XSLT 2.0 样式表，将我的 XSD 转换为相同的 XSD，但扩展了一些额外的元素。我试图在声明的最后一个 simpleType 之后和包含属性的第一个 complexType 之前添加一个元素`myAtt`（如果有一个复杂的，否则在最后一个 simpleType 之后）

**我的XSD：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://www.myspace.com/myxsd" targetNamespace="http://www.myspace.com/myxsd" elementFormDefault="qualified">
    <xs:include schemaLocation="myxsd-simpletypes.xsd"/>
    <xs:element name="myComplexTypeA" type="myComplexTypeAType"/>
    <xs:complexType name="myXmlType">
        <xs:sequence>
            <xs:element name="mySimpleTypeA" type="mySimpleTypeAType" minOccurs="0"/>
            <xs:element name="mySimpleTypeB" type="mySimpleTypeBType" minOccurs="0"/>
            <xs:element name="mySimpleTypeC" type="mySimpleTypeCType" minOccurs="0"/>
            <xs:element name="myComplexTypeB" type="myComplexTypeBType">
                <xs:annotation>
                    <xs:documentation>My first complex type</xs:documentation>
                </xs:annotation>
            </xs:element>
        </xs:sequence>
        <xs:attribute name="myAtt" type="stringType" use="required" fixed="myValue"/>
    </xs:complexType>
    <xs:complexType name="myComplexTypeBType">
        <xs:sequence>
            <xs:element name="mySimpleTypeA" type="mySimpleTypeAType" minOccurs="0"/>
            <xs:element name="mySimpleTypeB" type="mySimpleTypeBType" minOccurs="0"/>
            <xs:element name="mySimpleTypeC" type="mySimpleTypeCType" minOccurs="0"/>
            <xs:element name="myComplexTypeC" type="myComplexTypeCType" minOccurs="0" maxOccurs="100"/>
            <xs:element name="myComplexTypeD" type="myComplexTypeDType" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
        <xs:attribute name="myAtt" type="stringType" use="required" fixed="myValue"/>
    </xs:complexType>
    <xs:complexType name="myComplexTypeCType">
        <xs:annotation>
            <xs:documentation>Some documentation</xs:documentation>
        </xs:annotation>
        <xs:sequence>
            <xs:element name="mySimpleTypeA" type="mySimpleTypeAType" minOccurs="0"/>
            <xs:element name="mySimpleTypeB" type="mySimpleTypeBType" minOccurs="0"/>
            <xs:element name="mySimpleTypeC" type="mySimpleTypeCType" minOccurs="0"/>
        </xs:sequence>
        <xs:attribute name="myAtt" type="stringType" use="required" fixed="myValue"/>
    </xs:complexType>
    <xs:complexType name="myComplexTypeDType">
        <xs:annotation>
            <xs:documentation>Some documentation</xs:documentation>
        </xs:annotation>
        <xs:sequence>
            <xs:element name="mySimpleTypeA" type="mySimpleTypeAType" minOccurs="0"/>
            <xs:element name="mySimpleTypeB" type="mySimpleTypeBType" minOccurs="0"/>
            <xs:element name="mySimpleTypeC" type="mySimpleTypeCType" minOccurs="0"/>
        </xs:sequence>
        <xs:attribute name="myAtt" type="stringType" use="required" fixed="myValue"/>
    </xs:complexType>
</xs:schema> 
```

**MyXSLT**

```
<?xml version="1.0" encoding="UTF-8" ?>
<xsl:stylesheet version="2.0" exclude-result-prefixes="xs xdt err fn" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:xdt="http://www.w3.org/2005/xpath-datatypes" xmlns:err="http://www.w3.org/2005/xqt-errors">
    <xsl:output method="xml" indent="yes"/>

    <!-- copy all nodes and attributes-->
    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <!-- For each complexType do this -->
    <xsl:template match="/xs:schema/xs:complexType/xs:sequence">
        <xsl:element name="xs:sequence">
            <xsl:for-each select="xs:element">
                <xsl:copy>
                    <xsl:apply-templates select="@*|node()"/>
                </xsl:copy>

                <!-- Only add element after last simpleType and before first complexType (if complexType exists) -->
                <xsl:if test="?????">
                    <xsl:element name="xs:element">
                        <xsl:attribute name="maxOccurs">unbounded</xsl:attribute>
                        <xsl:attribute name="minOccurs">0</xsl:attribute>
                        <xsl:attribute name="name">myAddition</xsl:attribute>
                        <xsl:attribute name="type">myAdditionType</xsl:attribute>
                    </xsl:element>
                </xsl:if>
            </xsl:for-each>
        </xsl:element>
    </xsl:template>

    <!-- After last complexType in file add definition of myAddition -->
    <xsl:template match="/xs:schema/xs:complexType[last()]">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
        <xsl:element name="xs:complexType">
            <xsl:attribute name="name">myAdditionType</xsl:attribute>
            <xsl:element name="xs:sequence">
                <xsl:element name="xs:element">
                    <xsl:attribute name="minOccurs">0</xsl:attribute>
                    <xsl:attribute name="name">myAdditionA</xsl:attribute>
                    <xsl:attribute name="type">myAdditionAType</xsl:attribute>
                </xsl:element>
                <xsl:element name="xs:element">
                    <xsl:attribute name="minOccurs">0</xsl:attribute>
                    <xsl:attribute name="name">myAdditionBValue</xsl:attribute>
                    <xsl:attribute name="type">myAdditionBType</xsl:attribute>
                </xsl:element>
            </xsl:element>
            <xsl:element name="xs:attribute">
                <xsl:attribute name="fixed">myValue</xsl:attribute>
                <xsl:attribute name="name">myAtt</xsl:attribute>
                <xsl:attribute name="type">stringType</xsl:attribute>
                <xsl:attribute name="use">required</xsl:attribute>
            </xsl:element>
        </xsl:element>
        <xsl:element name="xs:simpleType">
            <xsl:attribute name="name">myAdditionAType</xsl:attribute>
            <xsl:element name="xs:restriction">
                <xsl:attribute name="base">AType</xsl:attribute>
                <xsl:element name="xs:maxLength">
                    <xsl:attribute name="value">10</xsl:attribute>
                </xsl:element>
            </xsl:element>
        </xsl:element>
        <xsl:element name="xs:simpleType">
            <xsl:attribute name="name">myAdditionBType</xsl:attribute>
            <xsl:element name="xs:restriction">
                <xsl:attribute name="base">AType</xsl:attribute>
            </xsl:element>
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

**我现在得到的结果：** 没有，因为它还没有完成！

**想要的结果：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://www.myspace.com/myxsd" targetNamespace="http://www.myspace.com/myxsd" elementFormDefault="qualified">
    <xs:include schemaLocation="myxsd-simpletypes.xsd"/>
    <xs:element name="myComplexTypeA" type="myComplexTypeAType"/>
    <xs:complexType name="myXmlType">
        <xs:sequence>
            <xs:element name="mySimpleTypeA" type="mySimpleTypeAType" minOccurs="0"/>
            <xs:element name="mySimpleTypeB" type="mySimpleTypeBType" minOccurs="0"/>
            <xs:element name="mySimpleTypeC" type="mySimpleTypeCType" minOccurs="0"/>
            <xs:element name="myAddition" type="myAdditionType" minOccurs="0" maxOccurs="unbounded"/>
            <xs:element name="myComplexTypeB" type="myComplexTypeBType">
                <xs:annotation>
                    <xs:documentation>My first complex type</xs:documentation>
                </xs:annotation>
            </xs:element>
        </xs:sequence>
        <xs:attribute name="myAtt" type="stringType" use="required" fixed="myValue"/>
    </xs:complexType>
    <xs:complexType name="myComplexTypeBType">
        <xs:sequence>
            <xs:element name="mySimpleTypeA" type="mySimpleTypeAType" minOccurs="0"/>
            <xs:element name="mySimpleTypeB" type="mySimpleTypeBType" minOccurs="0"/>
            <xs:element name="mySimpleTypeC" type="mySimpleTypeCType" minOccurs="0"/>
            <xs:element name="myAddition" type="myAdditionType" minOccurs="0" maxOccurs="unbounded"/>
            <xs:element name="myComplexTypeC" type="myComplexTypeCType" minOccurs="0" maxOccurs="100"/>
            <xs:element name="myComplexTypeD" type="myComplexTypeDType" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
        <xs:attribute name="myAtt" type="stringType" use="required" fixed="myValue"/>
    </xs:complexType>
    <xs:complexType name="myComplexTypeCType">
        <xs:annotation>
            <xs:documentation>Some documentation</xs:documentation>
        </xs:annotation>
        <xs:sequence>
            <xs:element name="mySimpleTypeA" type="mySimpleTypeAType" minOccurs="0"/>
            <xs:element name="mySimpleTypeB" type="mySimpleTypeBType" minOccurs="0"/>
            <xs:element name="mySimpleTypeC" type="mySimpleTypeCType" minOccurs="0"/>
            <xs:element name="myAddition" type="myAdditionType" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
        <xs:attribute name="myAtt" type="stringType" use="required" fixed="myValue"/>
    </xs:complexType>
    <xs:complexType name="myComplexTypeDType">
        <xs:annotation>
            <xs:documentation>Some documentation</xs:documentation>
        </xs:annotation>
        <xs:sequence>
            <xs:element name="mySimpleTypeA" type="mySimpleTypeAType" minOccurs="0"/>
            <xs:element name="mySimpleTypeB" type="mySimpleTypeBType" minOccurs="0"/>
            <xs:element name="mySimpleTypeC" type="mySimpleTypeCType" minOccurs="0"/>
            <xs:element name="myAddition" type="myAdditionType" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
        <xs:attribute name="myAtt" type="stringType" use="required" fixed="myValue"/>
    </xs:complexType>
    <xs:complexType name="myAdditionType">
        <xs:sequence>
            <xs:element name="myAdditionA" type="myAdditionAType" minOccurs="0"/>
            <xs:element name="myAdditionB" type="myAdditionBType" minOccurs="0"/>
        </xs:sequence>
        <xs:attribute name="myAtt" type="stringType" use="required" fixed="myValue"/>
    </xs:complexType>
    <xs:simpleType name="myAdditionAType">
        <xs:restriction base="AType">
            <xs:maxLength value="10"/>
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="myAdditionBType">
        <xs:restriction base="AType"/>
    </xs:simpleType>
</xs:schema> 
```

任何人都可以帮助我走向正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:47:03.220

同时我发现了一个解决方案，下一个 XSLT 可以完美运行。有没有人对此有任何改进？

**XSLT：**

```
<?xml version="1.0" encoding="UTF-8" ?>
<xsl:stylesheet version="2.0" exclude-result-prefixes="xs xdt err fn" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:xdt="http://www.w3.org/2005/xpath-datatypes" xmlns:err="http://www.w3.org/2005/xqt-errors">
    <xsl:output method="xml" indent="yes"/>

    <!-- copy all nodes and attributes-->
    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <!-- For each complexType do this -->
    <xsl:template match="/xs:schema/xs:complexType/xs:sequence">
        <xsl:element name="xs:sequence">
            <!-- Loop through each element within the sequence -->
            <xsl:for-each select="xs:element">
                <xsl:choose>
                    <!-- When current element is the last one and all elements are only simpleTypes, add the myAddition after it -->
                    <xsl:when test="current()/@name = ../xs:element[last()]/@name and not(../xs:element[@type=/xs:schema/xs:complexType[xs:attribute/@name='myAtt']/@name])">
                        <xsl:copy>
                            <xsl:apply-templates select="@*|node()"/>
                        </xsl:copy>
                        <xsl:element name="xs:element">
                            <xsl:attribute name="maxOccurs">unbounded</xsl:attribute>
                            <xsl:attribute name="minOccurs">0</xsl:attribute>
                            <xsl:attribute name="name">myAddition</xsl:attribute>
                            <xsl:attribute name="type">myAdditionType</xsl:attribute>
                        </xsl:element>
                    </xsl:when>
                    <!-- When current element is complexType and is the first one with attribute myAtt in it, add myAddition in front of it -->
                    <xsl:when test="current()/@type = /xs:schema/xs:complexType/@name and current()/@name = ../xs:element[@type=/xs:schema/xs:complexType[xs:attribute/@name='myAtt']/@name][1]/@name">
                        <xsl:element name="xs:element">
                            <xsl:attribute name="maxOccurs">unbounded</xsl:attribute>
                            <xsl:attribute name="minOccurs">0</xsl:attribute>
                            <xsl:attribute name="name">myAddition</xsl:attribute>
                            <xsl:attribute name="type">myAdditionType</xsl:attribute>
                        </xsl:element>
                        <xsl:copy>
                            <xsl:apply-templates select="@*|node()"/>
                        </xsl:copy>
                    </xsl:when>
                    <!-- All other cases just copy the current element -->
                    <xsl:otherwise>
                        <xsl:copy>
                            <xsl:apply-templates select="@*|node()"/>
                        </xsl:copy>
                    </xsl:otherwise>
                </xsl:choose>
            </xsl:for-each>
        </xsl:element>
    </xsl:template>

    <!-- After last complexType in file add definition of myAddition -->
    <xsl:template match="/xs:schema/xs:complexType[last()]">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
        <xsl:element name="xs:complexType">
            <xsl:attribute name="name">myAdditionType</xsl:attribute>
            <xsl:element name="xs:sequence">
                <xsl:element name="xs:element">
                    <xsl:attribute name="minOccurs">0</xsl:attribute>
                    <xsl:attribute name="name">myAdditionA</xsl:attribute>
                    <xsl:attribute name="type">myAdditionAType</xsl:attribute>
                </xsl:element>
                <xsl:element name="xs:element">
                    <xsl:attribute name="minOccurs">0</xsl:attribute>
                    <xsl:attribute name="name">myAdditionBValue</xsl:attribute>
                    <xsl:attribute name="type">myAdditionBType</xsl:attribute>
                </xsl:element>
            </xsl:element>
            <xsl:element name="xs:attribute">
                <xsl:attribute name="fixed">myValue</xsl:attribute>
                <xsl:attribute name="name">myAtt</xsl:attribute>
                <xsl:attribute name="type">stringType</xsl:attribute>
                <xsl:attribute name="use">required</xsl:attribute>
            </xsl:element>
        </xsl:element>
        <xsl:element name="xs:simpleType">
            <xsl:attribute name="name">myAdditionAType</xsl:attribute>
            <xsl:element name="xs:restriction">
                <xsl:attribute name="base">AType</xsl:attribute>
                <xsl:element name="xs:maxLength">
                    <xsl:attribute name="value">10</xsl:attribute>
                </xsl:element>
            </xsl:element>
        </xsl:element>
        <xsl:element name="xs:simpleType">
            <xsl:attribute name="name">myAdditionBType</xsl:attribute>
            <xsl:element name="xs:restriction">
                <xsl:attribute name="base">AType</xsl:attribute>
            </xsl:element>
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

# java - cucumber-jvm java HelloWorld 示例 OutOfBoundsException 错误

> ID：15552861
> 
> 赞同：4
> 
> 时间：2013-03-21T16:21:24.177
> 
> 标签：java, cucumber, bdd

我需要一些帮助来运行这个包中的 java cucumber 'hello world' 示例： ***cucumber.examples.java.helloworld.HelloStepdefs***

我想知道我在设置中错过了什么吗？

*   java版本“1.6.0_37”
*   带有 m2e 插件的 Eclipse Indigo Service Release 2
*   [https://github.com/cucumber/cucumber.git](https://github.com/cucumber/cucumber.git) 1.1.3-SNAPSHOT

我不断收到以下错误：

```
Feature: Hello World  Time elapsed: 0 sec  <<< ERROR!
java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
    at java.util.ArrayList.RangeCheck(Unknown Source)
    at java.util.ArrayList.get(Unknown Source)
    at gherkin.formatter.PrettyFormatter.indentedLocation(PrettyFormatter.java:142)
    at gherkin.formatter.PrettyFormatter.printStep(PrettyFormatter.java:255)
    at gherkin.formatter.PrettyFormatter.match(PrettyFormatter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at cucumber.runtime.Utils$1.call(Utils.java:44)
    at cucumber.runtime.Timeout.timeout(Timeout.java:12)
    at cucumber.runtime.Utils.invoke(Utils.java:40)
    at cucumber.runtime.RuntimeOptions$2.invoke(RuntimeOptions.java:138)
    at $Proxy11.match(Unknown Source)
    at cucumber.runtime.junit.JUnitReporter.match(JUnitReporter.java:61)
    at cucumber.runtime.Runtime.runStep(Runtime.java:250)
    at cucumber.runtime.model.StepContainer.runStep(StepContainer.java:49)
    at cucumber.runtime.model.StepContainer.runSteps(StepContainer.java:43)
    at cucumber.runtime.model.CucumberScenario.run(CucumberScenario.java:36)
    at cucumber.runtime.junit.ExecutionUnitRunner.run(ExecutionUnitRunner.java:83)
    at cucumber.runtime.junit.FeatureRunner.runChild(FeatureRunner.java:63)
    at cucumber.runtime.junit.FeatureRunner.runChild(FeatureRunner.java:18)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
    at cucumber.runtime.junit.FeatureRunner.run(FeatureRunner.java:70)
    at cucumber.api.junit.Cucumber.runChild(Cucumber.java:77)
    at cucumber.api.junit.Cucumber.runChild(Cucumber.java:37)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
    at cucumber.api.junit.Cucumber.run(Cucumber.java:82)
    at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
    at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:113)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T20:50:34.667

即使我面临与 1.1.3 相同的问题 :( 刚刚看到这个[https://groups.google.com/forum/?fromgroups=#!topic/cukes/rCVf28oK1SI](https://groups.google.com/forum/?fromgroups=#!topic/cukes/rCVf28oK1SI)这似乎是一个回归问题。我在 pom 中更改了版本并将文件构建到 1.1.2，它现在工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T14:55:17.830

只有在配置格式化程序、将其删除并且所有测试都正确运行时，才会发生此错误。

所以，删除格式......和版本 1.1.3 作品，但你丢失了所有的输出？！

# javascript - 使用 Javascript 加载 JSON 文件内容

> ID：15552863
> 
> 赞同：0
> 
> 时间：2013-03-21T16:21:27.130
> 
> 标签：javascript, jquery, json

我正在尝试使用 jQuery / Javascript 将 JSON 文件中的内容加载到 HTML 页面。

每当我尝试加载页面时，都会出现一个空页面。

这是代码：

**索引.html**

```
 <!DOCTYPE html>
<html>
<head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
    <style>img{ height: 100px; float: left; }</style>
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
</head>
<body>
<div id="products">

</div>
<script>
    var my_json;
    $(function(){
        $.getJSON('products.ajson', function(data) {
            var output="<ul>";
            for (var i = 0; i < data.Products.length; ++i) {
                output+="<li>" + data.Products[i].Name + " " + data.Products[i].Album + "--" + data.Products[i].Label+ data.Products[i].Tracks + data.Products[i].Price + data.Products[i].Genre+"</li>";
            }

            output+="</ul>";
            document.getElementById("products").innerHTML=output;

        });
    });
</script>
</body>
</html> 
```

**产品.json**

```
{
    "Products": [
        { "Name": "Pink Floyd",
            "Album": "The Best Of Pink Floyd: A Foot In The Door",
            "Label": "EMI UK",
            "Tracks":"Hey You, See Emily Play, The Happiest Days Of Our Lives, Another Brick in The Wall (Part 2), Have a cigar, Wish You Where Here, Time, The Great Gig in the Sky, Money, Comfortably Numb, High Hopes, Learning to Fly, The Fletcher Memorial Home, Shine On You Crazy Diamond, Brain Damage, Eclipse" ,
            "Price": "16.40",
            "Genre": "Rock"

        },
        {
            "Name": "Depeche Mode",
            "Album": "A Question Of Time",
            "Label": "Mute",
            "Tracks":"A Question Of Time, Black Celebration, Something To Do, Stripped, More Than A Party, A Question Of Time(extended), Black Celebration" ,
            "Price": "4.68" ,
            "Genre": "Rock"
        },
        {
            "Name": "Burial",
            "Album": "Street Halo/Kindred",
            "Label": "Hyperdub Japan",
            "Tracks":"Street Halo, NYC, Stolen Dog, Kindred, Loner, Ashtray Wasp" ,
            "Price": "14.06",
            "Genre": "Future Garage"

        },

        {
            "Name": "Aphex Twin",
            "Album": "I Care Because You Do",
            "Label": "1972 US",
            "Tracks":"Acrid Avid Jam Shared, The Waxen Pith, Wax The Nip, Icct Hedral (edit),  Ventolin (video version), Come On You Slags, Start As You Mean To Go On, Wet Tip Hen Ax, Mookid, Alberto Balsalm ,  Cow Cud Is A Twin, Next Heap With " ,
            "Price": "21.10",
            "Genre": "Electronica"
        },

        {
            "Name": "Daft Punk",
            "Album": "Discovery",
            "Label": "",
            "Tracks":"One More Time,  Aerodynamic, Digital Love, Harder Better Faster Stronger, Crescendolls , Nightvision,  Superheroes, High Life ,Something About Us,  Voyager ,Veridis Quo, Short Circuit, Face To Face," ,
            "Price": "23.44"   ,
            "Genre": "Nu-Disco"
        },

        {
            "Name": "Jean Michelle Jarre",
            "Album": "Oxegene 2010",
            "Label": "Oxegene",
            "Tracks":"Oxegene 2010" ,
            "Price": "8.20",
            "Genre": "Ambient"
        },

        {
            "Name": "Joy Division",
            "Album": "In The Studio With Martin Hannett",
            "Label": "Interstate",
            "Tracks":"Digital Full Track,  Noise Drums Sine Warm-up,  Square Heat Ambience Workout, Glass - Breakout Full Track, Synth Ambience Warm-up, Ambience Atmosphere Warm-up, Atmosphere Setting Up, Drums & Bass Full Atmosphere Warm-up Silence, Atmosphere Full Track Metronome Intro - Hannett Intro Question Etc, Metronome Initial Adjustments #1, Metronome Initial Adjustments #2 Industrial Build Up Etc, Dead Souls Sound Check Drums Recognition Check, Dead Souls + Metronome Intro Adjustment Full Track Etc, Cups Smash 'Synth Filters Sweeps' Take #1, Hannett Interview Something Fishy, Ice Age Bass Ambience Warm-up, Full Track Ice Age, Bass Intro Noise Ambience, Clapping Drums Clapping Prog N4 Complete Full Track + Noise, Full Track N4 Programming + Noises, Full Eternal Track,  More N4 Drum Programming Bass Guitar, N4 Industrial, N4 More Warm Up, Digital Ambience Warmth  Rooms Warm-up - Shakin Speaker Dust Off" ,
            "Price": "22.27",
            "Genre": "Rock"
        },

        {
            "Name": "Anthony Rother",
            "Album": "Mother",
            "Label": "Datapunk Germany",
            "Tracks":"Mother, Cinema" ,
            "Price": "10.54",
            "Genre": "Electro"
        },

        {
            "Name": "Gorillaz",
            "Album": "Plastic Beach",
            "Label": "EMI UK",
            "Tracks":"Orchestral Intro,  Welcome To The World Of The Plastic Beach, White Flag, Rhinestone Eyes, Stylo, Superfast Jellyfish, Empire Ants,  Glitter Freeze, Some Kind Of Nature, On Melancholy Hill,  Broken, Sweepstakes ,  Plastic Beach ,  To Binge , Cloud Of Unknowing , Pirate Jet " ,
            "Price": "7.02" ,
            "Genre": "Hip Hop"
        },

        {
            "Name": "Eminem",
            "Album": "Recovery",
            "Label": "",
            "Tracks":"Cold Wind Blows, Talkin' 2 Myself (feat Kobe),  On Fire , Won't Back Down (feat P!nk) ,WTP , Going Through Changes ,  Not Afraid , Seduction, No Love (feat Lil Wayne) ,  Space Bound ,  Cinderella Man , To Life, So Bad ,  Almost Famous ,  Love The Way You Lie (feat Rihanna) , You're Never Over, rack 17" ,
            "Price": "19.92",
            "Genre": "Hip Hop"

        }
    ]
} 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:25:42.217

你已经落后`products.Products`了。`Products.products`返回变量是`products`，它有一个名为 的属性`Products`。你需要调用它`products.Products`。

也许为了避免歧义，调用你的结果变量`result`或其他东西，所以你可以说`result.Products`.

另外，我建议使用标准`for`循环而不是`for..in`循环。如果有任何其他属性分配给`Array`原型（这是可能的 - 某些库会为原型分配新功能，例如`indexOf`），您将遇到问题。

```
for (var i = 0; i < products.Products.length; ++i) {
    // do something with products.Products[i]
} 
```

由于这是一个 javascript 错误，您可以通过调试器运行它来查看它。每当你看到这样奇怪的东西时，打开控制台（Chrome 开发工具、Firebug、IE 开发工具等），它会帮助你追踪这些东西。

# javascript - AngularJS 包装从服务器返回的 JSON 数据

> ID：15552866
> 
> 赞同：1
> 
> 时间：2013-03-21T16:21:33.510
> 
> 标签：javascript, json, angularjs

我有一个基本的 CRUD 应用程序启动并运行，但是我想要做的是用两个附加参数包装来自服务器的每个响应，即

'error' => boolean, 'errorMessage' => string, 'data' => {whatever data}

这样我就可以处理从服务器发送和返回成功的请求，但是由于某种原因数据库无法更新，所以我不仅可以使 UI 与数据库保持同步，还可以向用户显示错误消息更新失败。由于 AngularJS 期望更新的对象，如果我在失败时返回相同的对象，UI 将保持同步，但由于没有失败通知，用户不会意识到问题所在。

在我的旧应用程序 pre-Angular（基于 jQuery）中，我可以轻松地解码每个响应的 json 数据，并且如果 error === true 出现错误消息，但在 Angular 中我似乎无法弄清楚如何实现这一点。

**我很可能会离开这里，因为我刚刚进入 Angular，所以任何方向都会有所帮助。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T11:47:44.920

从 angularjs 发出这个 http 请求并从服务器发回一个响应对象。

响应对象 --->{'error' => boolean, 'errorMessage' => string, 'data' => {whatever data}}

在 Resdata 中收集。使用 Resdata 采取行动。

```
 $http({method: 'POST', url:url, data:body}).success(function(Resdata, status, headers,   config) {
        console.log(Resdata);

        if(Resdata.error == true){
            // use Resdata.errorMessage
        }
        else if(Resdata.error == false){
           // use Resdata.data
        }
    }).error(function(Resdata, status, headers, config) {
        console.log("error:", error);
    }); 
```

# css - Less 和 Bootstrap：如何使用 span3（或 spanX [任意数字]）类作为 mixin？

> ID：15552875
> 
> 赞同：4
> 
> 时间：2013-03-21T16:21:57.217
> 
> 标签：css, twitter-bootstrap, less, mixins

是否可以在 mixin中添加`span3`类以避免将其放入我的 HTML 中的每个元素中？就像是：

```
.myclass {
    .span3;
    // other rules...
} 
```

**编辑**

我很抱歉我忘了指定一个重要的细节：`span3`是 Bootstrap 的标准类。我在 Bootstrap 框架的任何文件中都没有找到它的定义。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T14:47:56.103

## 新答案（需要 LESS 1.4.0）

你真正想要的是在 LESS 和 SASS 术语中被称为[*扩展的东西。*](http://www.scottlogic.com/blog/2013/03/08/extends-in-less.html)例如，你想要一个 HTML 元素（只是一个例子）......

```
<div class="myclass"></div> 
```

...*完全*表现得好像它`span3`添加了一个来自引导程序的类，但实际上没有在 HTML 中添加该类。这可以在 LESS 1.4.0 中使用 来完成`:extend()`，但仍然不容易，主要是因为 bootstrap 的动态类生成不会被`:extend()`.

这是一个例子。假设这个初始 LESS 代码（***不像***引导程序那样动态生成的`.span3`类）：

```
.span3 {
  width: 150px;
}

.someClass .span3 {
  font-size: 12px;
}

.someOtherClass.span3 {
  background: blue;
} 
```

您在 1.4.0 中添加此 LESS 代码：

```
.myclass {
  &:extend(.span3);
} 
```

这产生了这个CSS：

```
.span3,
.myclass {
  width: 150px;
}
.someClass .span3 {
  font-size: 12px;
}
.someOtherClass.span3 {
  background: blue;
} 
```

**注意**它*没有*自动扩展`.span3`. 这[与 SASS](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#extend)不同，但这仅意味着您需要在扩展时更加明确。这样做的好处是避免过度的 CSS 代码膨胀。

要完全扩展，只需在中添加`all`关键字`extend()`（这是从我的原始代码更新的，因为我不知道该`all`选项）：

```
.myclass {
  &:extend(.span3 all);
} 
```

产生这个：

```
.span3,
.myclass {
  width: 150px;
}
.someClass .span3,
.someClass .myclass {
  font-size: 12px;
}
.someOtherClass.span3,
.someOtherClass.myclass {
  background: blue;
} 
```

这使您（在我的示例中）与班级`.myclass` ***完全等效。***`.span3`但是，在您的情况下，这意味着您需要将引导程序的任何动态类生成重新定义为非动态的。像这样的东西：

```
.span3 {
  .span(3);
} 
```

这样`:extend(.span3)`才能找到一个硬编码的类来扩展。对于动态用于`.span@{index}`添加`.span3`.

## 原始答案

**这个答案假设您希望从动态生成的类中*混合*属性（这就是我认为您的问题）。**

好的，我相信我发现了你的问题。首先，[引导程序定义了文件中的`.spanX`一系列类`mixins.less`](https://github.com/twitter/bootstrap/blob/master/less/mixins.less)，因此您显然需要确保将其包含在引导程序加载中。但是，我假设您已经包含了这些内容。

**主要问题**

主要问题是引导程序现在如何通过循环中的动态类名生成这些。这是定义`.spanX`系列的循环：

```
.spanX (@index) when (@index > 0) {
      .span@{index} { .span(@index); }
      .spanX(@index - 1);
 }
.spanX (0) {} 
```

目前，*因为类名本身是动态生成*的，所以不能用作mixin名。我不知道这是一个错误还是仅仅是 LESS 的一个限制，但我知道在撰写本文时，任何动态生成的类名都不能用作混合名称。因此，`.span3`可能会在 CSS 代码中将其作为一个类放在您的 HTML 中，但它不能直接访问以用于 mixin 的目的。

**修复**

但是，由于他们如何构建代码，您仍然可以获得所需的内容，因为正如您在上面的循环代码中看到的那样，他们使用真正的 mixin 本身来定义`.spanX`类的代码。因此，您应该能够做到这一点：

```
.myclass {
    .span(3);
    // other rules...
} 
```

该`.span(3)`代码是循环用来填充`.span3`类的代码，因此为您的类调用它将给出相同的代码`.span3`。特别是 bootstrap`mixins.less`为该 mixin 定义了这个：

```
.span (@columns) {
  width: (@fluidGridColumnWidth * @columns) + (@fluidGridGutterWidth * (@columns - 1));
  *width: (@fluidGridColumnWidth * @columns) + (@fluidGridGutterWidth * (@columns - 1)) - (.5 / @gridRowWidth * 100 * 1%);
} 
```

因此，您将`width`获得.`.span3``.myclass`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T01:22:41.670

使用 Less.js 很容易做到这一点，但真正的问题是：“我应该将结构网格类与非结构类混合吗？”

答案是否定的。

这是一个坏主意，网格系统的优点是它在结构样式和其他样式之间创建了关注点分离。我并不是说“它不应该，永远，永远做”。但总的来说，它不应该。我什至不喜欢看到这个：

```
<div class="span3 sidebar">
  <ul class="nav">
    ...
  </ul>
</div> 
```

`span3`与班级相同`div`的地方`.sidebar`。这样做的问题是，现在您的侧边栏不仅仅是在网格的列内“浮动”，它已成为网格的一部分 - 这（通常）由于您的变通方法而使维护您的样式变得更加困难需要创建以强制这种样式响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T18:01:28.270

好吧，你可以这样做，但你必须先定义`.somethign`，在这个例子中，我会这样做`font-wight: bold;`并且`font-size 20px`. 正如您在第二类 .body 中看到的那样，我不必定义`font-weight: bold;`，`font-size: 20px;`我只是添加`.something`到其中

```
.something {
    font-weight: bold;
    font-size: 20px;
}
.body {
    background-color: gray;
    border: ridge 2px black;
    .something
} 
```

您可以在此处查看示例。[http://jsfiddle.net/7GMZd/](http://jsfiddle.net/7GMZd/)

**你不能这样做**

```
.body {
    background-color: gray;
    border: ridge 2px black;
    .something {
         font-weight: bold;
         font-size: 20px;
    }
} 
```

# javascript - Backbone.js：从视图中的另一个方法调用一个方法？

> ID：15552876
> 
> 赞同：0
> 
> 时间：2013-03-21T16:21:57.693
> 
> 标签：javascript, backbone.js

我在骨干网工作。在视图中工作，我想从另一个方法中调用一个方法。

```
events: {
  "click span": "updateURL",
  "click .tag": "clearTag"
},
updateURL: function() { 
   // do stuff
},
clearTag: function(e) {
  console.log(this);
  // this fails
  this.updateURL();
}, 
```

但是`this`in`clearTag`似乎绑定到一个元素，并且`updateURL`没有被调用。有没有办法可以`updateURL`从内部调用`clearTag`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:49:48.280

从关于视图事件绑定的主干源：

```
// Callbacks will be bound to the view, with `this` set properly.
// Uses event delegation for efficiency.
// Omitting the selector binds the event to `this.el`.
// This only works for delegate-able events: not `focus`, `blur`, and
// not `change`, `submit`, and `reset` in Internet Explorer. 
```

此处的上下文应该是您的观点，因此正在发生其他事情。你能提供一个你的来源的小提琴吗？

# javascript - javascript和函数来提取数组

> ID：15552883
> 
> 赞同：0
> 
> 时间：2013-03-21T16:22:09.467
> 
> 标签：javascript, arrays

目前我有一个数组“teenused”，其中包含 a'la：“01”、“01”、“03”、“04”、“05”、“06”、“07” 我在我的代码中调用函数grintteen。

[http://jsfiddle.net/sbJ9w/](http://jsfiddle.net/sbJ9w/)

代码和功能在这里：

```
function grindTeen(teenused) {
  for (var i = 0; i < teenused.length; i++) {
            var arrayItem = teenused[i];
            return('<img src="/bena/design/icons/B-icons-'+arrayItem+'.png" width="33" height="33">');
            }
}; 
```

该函数应返回一个包含 html 图像的字符串`src`。显然我是 JavaScript 的菜鸟。有什么建议可以做得更好吗？

* * *

## 解决方案：

就我而言，我太菜鸟了，以至于我没有理解从 XML 我得到了字符串而不是数组 - 所以这是将字符串转换为数组的正确解决方案：http: [//jsfiddle.net/SQQbe/13/](http://jsfiddle.net/SQQbe/13/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:37:40.163

截至目前，您的循环仅迭代一次，因为您`return`在其中有语句，该语句返回函数的值。您需要做的是存储结果，然后最后返回它们。

```
function grindTeen(teenused) {
  var images = [];
  var arrayItem = null;
  for (var i = 0; i < teenused.length; i++) {
       arrayItem = teenused[i];
       images.push('<img src="/bena/design/icons/B-icons-'+arrayItem+'.png" width="33" height="33">');
  }
  return images;
};

var teenImages = grindTeen(teenused);

// take the items in the teenImages list and make it into a string separated by space
var teenImagesHtml = teenImages.join(' '); 
```

您可以阅读更多关于`.join()` [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join)

这是工作小提琴：http: [//jsfiddle.net/amyamy86/V4Rwh/](http://jsfiddle.net/amyamy86/V4Rwh/)

**更新：**

对于数组`['01', '02', '03', '04', '05', '06']`，输出将是（如果放入`<div>`）：

```
<div id="c">
    <img src="/bena/design/icons/B-icons-01.png" width="33" height="33">
    <img src="/bena/design/icons/B-icons-02.png" width="33" height="33">
    <img src="/bena/design/icons/B-icons-03.png" width="33" height="33">
    <img src="/bena/design/icons/B-icons-04.png" width="33" height="33">
    <img src="/bena/design/icons/B-icons-05.png" width="33" height="33">
    <img src="/bena/design/icons/B-icons-06.png" width="33" height="33">
</div> 
```

# windows-phone-7 - 如何在 Windows Phone 7.x 中打开 webView？

> ID：15552884
> 
> 赞同：0
> 
> 时间：2013-03-21T16:22:09.573
> 
> 标签：windows-phone-7, url, webview, external

我希望我的应用程序只有一个视图。

我需要这个视图是一个外部 URL。

我尝试按照 microsoft 上的示例使用 webBrowser Task。

我穿上我的承包商：

```
WebBrowserTask webBrowserTask = new WebBrowserTask();

webBrowserTask.Uri = new Uri("http://msdn.microsoft.com", UriKind.Absolute);

webBrowserTask.Show(); 
```

但是，当我按下后退按钮而不是在应用程序外部导航时，我正在导航到第一页是空的......

我的代码如下所示：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;

//added this for push
using Microsoft.Phone.Notification;
using System.Text;

//added this to open an external URL using the WebBrowser Task
using Microsoft.Phone.Tasks;

namespace WindowsPush
{

    public partial class MainPage : PhoneApplicationPage
    {

        // Constructor
        public MainPage()
        {
            /// Holds the push channel that is created or found.
            HttpNotificationChannel pushChannel;

            // The name of our push channel.
            string channelName = "ToastSampleChannel";

            InitializeComponent();

            // Try to find the push channel.
            pushChannel = HttpNotificationChannel.Find(channelName);

            // If the channel was not found, then create a new connection to the push service.
            if (pushChannel == null)
            {
                pushChannel = new HttpNotificationChannel(channelName);

                // Register for all the events before attempting to open the channel.
                pushChannel.ChannelUriUpdated += new EventHandler<NotificationChannelUriEventArgs>(PushChannel_ChannelUriUpdated);
                pushChannel.ErrorOccurred += new EventHandler<NotificationChannelErrorEventArgs>(PushChannel_ErrorOccurred);

                // Register for this notification only if you need to receive the notifications while your application is running.
                //pushChannel.ShellToastNotificationReceived += new EventHandler<NotificationEventArgs>(PushChannel_ShellToastNotificationReceived);

                pushChannel.Open();

                // Bind this new channel for toast events.
                pushChannel.BindToShellToast();

            }
            else
            {
                // The channel was already open, so just register for all the events.
                pushChannel.ChannelUriUpdated += new EventHandler<NotificationChannelUriEventArgs>(PushChannel_ChannelUriUpdated);
                pushChannel.ErrorOccurred += new EventHandler<NotificationChannelErrorEventArgs>(PushChannel_ErrorOccurred);

                // Register for this notification only if you need to receive the notifications while your application is running.
                //pushChannel.ShellToastNotificationReceived += new EventHandler<NotificationEventArgs>(PushChannel_ShellToastNotificationReceived);

                // Display the URI for testing purposes. Normally, the URI would be passed back to your web service at this point.
                System.Diagnostics.Debug.WriteLine(pushChannel.ChannelUri.ToString());
                // MessageBox.Show(String.Format("Channel Uri is {0}", pushChannel.ChannelUri.ToString()));

            }

            object uniqueID;
            if (Microsoft.Phone.Info.DeviceExtendedProperties.TryGetValue("DeviceUniqueId", out uniqueID) == true)
            {
                byte[] bID = (byte[])uniqueID;
                string deviceID = Convert.ToBase64String(bID);   // There you go
                System.Diagnostics.Debug.WriteLine("Device Unique Id is: {0}", deviceID);
            }

            //opening the external URL using webBrowserTask
            WebBrowserTask webBrowserTask = new WebBrowserTask();

            webBrowserTask.Uri = new Uri("http://msdn.microsoft.com", UriKind.Absolute);

            webBrowserTask.Show();

        }

        void PushChannel_ChannelUriUpdated(object sender, NotificationChannelUriEventArgs e)
        {
            Dispatcher.BeginInvoke(() =>
            {
                // Display the new URI for testing purposes.   Normally, the URI would be passed back to your web service at this point.
                System.Diagnostics.Debug.WriteLine(e.ChannelUri.ToString());
                MessageBox.Show(String.Format("Channel Uri is {0}", e.ChannelUri.ToString()));
            });
        }

        void PushChannel_ErrorOccurred(object sender, NotificationChannelErrorEventArgs e)
        {
            // Error handling logic for your particular application would be here.
            Dispatcher.BeginInvoke(() =>
                MessageBox.Show(String.Format("A push notification {0} error occurred.  {1} ({2}) {3}", e.ErrorType, e.Message, e.ErrorCode, e.ErrorAdditionalData)));
        }

    }
} 
```

我需要的只是在我的应用程序的第一个也是唯一一个视图上加载一个外部 URL。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:23:05.207

您正在寻找[WebBrowser 控件](http://msdn.microsoft.com/en-us/library/system.windows.controls.webbrowser%28v=vs.95%29.aspx)。将其添加到主应用程序页面并像处理`WebBrowserTask`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:40:31.590

如果你打算使用，`WebBrowserTask`那么你可以通过抛出一个未处理的异常来关闭应用程序返回它：

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    if (e.NavigationMode == NavigationMode.Back)
    {
        throw new Exception("deliberately doing this to force the app to close");
    }
} 
```

如果/当您在 Windows Phone 8 中执行此操作时，您可以调用`Application.Current.Terminate();`而不是抛出异常。

不过，请务必在提交之前检查仅启动外部网站的应用程序的市场认证要求。

# ef-code-first - 实体框架：我设置外键，SaveChanges 然后访问导航属性，但它不加载相关实体。为什么不？

> ID：15552891
> 
> 赞同：38
> 
> 时间：2013-03-21T16:22:23.123
> 
> 标签：ef-code-first, lazy-loading, entity-framework-5

我将这个实体类与 Entity Framework 5 Code First 一起使用：

```
public class Survey
{
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int ID { get; set; }

    public string SurveyName { get; set; }

    [Required]
    public int ClientID { get; set; }

    [ForeignKey("ClientID")]
    public virtual Client Client { get; set; }
} 
```

在我的控制器的 Create 方法中，我这样做：

```
 Survey entity = new Survey()
    {
        SurveyName = "Test Name",
        ClientID = 4
    };
    db.Surveys.Add(entity);
    db.SaveChanges();
    Client c1 = entity.Client;                    //Why is this null?
    Client c2 = db.Clients.Find(entity.ClientID); //But this isn't?

    string s2 = c2.ClientName;
    string s1 = c1.ClientName;   //null reference thrown here 
```

在 SaveChanges 之后，客户端导航属性保持为空。我希望调用从数据库加载客户端，因为存在外键。为什么不这样做？

**编辑** 这里的代码来自我的控制器依赖于`DbContext`. 在我完成这项工作后不久，我重新分解了代码以使用存储库和一个工作单元。`Create`这一举动的部分原因是当我想使用时感觉使用它是错误的`new`。然后发生的事情是我遇到了[如何确保在使用存储库模式时创建代理](https://stackoverflow.com/questions/16736143/how-to-ensure-proxies-are-created-when-using-the-repository-pattern-with-entity)的问题。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-03-27T20:44:19.833

为确保在创建父项后导航属性的延迟加载将起作用，您不能`Survey`使用`new`运算符创建，而是通过上下文实例创建它，因为它将实例化一个能够延迟加载相关的动态代理`Client`. 这就是该`DbSet<T>.Create()`方法的用途：

```
Survey entity = db.Surveys.Create();

entity.SurveyName = "Test Name";
entity.ClientID = 4;

db.Surveys.Add(entity);
db.SaveChanges();

Client c1 = entity.Client;
string s1 = c1.ClientName;
// will work now if a Client with ID 4 exists in the DB 
```

只是要强调一下：从数据库加载客户端的不是线`entity.ClientID = 4;`或`db.Surveys.Add(entity);`或线`db.SaveChanges`，而是线`Client c1 = entity.Client;`（延迟加载）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-27T09:42:50.540

就像@NicholasButler 说的那样，调用`SaveChanges`就像它在锡上所说的那样 - 如果您调试代码，您可以看到这一点：Intellitrace 输出将显示它为您正在持久的插入/更新生成的 SQL，但不会有后续选择.

请记住，除非您急切加载（使用该`Include`方法），否则在执行检索时不会加载相关实体，因此按道理创建/更新它们也不会。

实体框架（我认为是 4.1 及更高版本）支持延迟加载。这意味着如果启用它，类似代码`Client c1 = entity.Client;` *应该*加载该`Client`对象。需要明确的是，此操作与`SaveChanges`调用没有直接关系。

检查是否`db.Configuration.LazyLoadingEnabled`设置为`true`. 如果没有，请尝试将其设置为`true`并查看是否`Client c1 = entity.Client;`仍然为空。

简而言之，调用`SaveChanges`不会触发加载，但如果启用了延迟加载，则访问`entity.Client`应该触发实体的加载（如果尚未加载）。

**编辑：**

我应该早点考虑到这一点，但是您不会对`Survey entity`对象进行延迟加载。原因是 EF 通过创建一个派生自您的类但覆盖标记为`virtual`支持延迟加载的属性来发挥其延迟加载的魔力。它在您执行检索时执行此操作，因此您的`entity`对象不会按原样延迟加载任何内容。

在您致电后尝试此操作`SaveChanges`：

```
Survey entity2 = db.Surveys.Find(entity.ID);
Client c1 = entity2.Client; 
```

这应该表现出您所追求的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T16:29:15.123

您需要将`Survey`类上的所有属性定义为虚拟以启用延迟加载。

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/vstudio/dd468057(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/dd468057(v=vs.100).aspx)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-21T16:59:26.727

> 我希望调用从数据库加载客户端，因为存在外键。为什么不这样做？

它没有这样做是因为你没有要求它这样做。在调用 之后`SaveChanges()`，EF 没有引用行中的数据，并且不会进行潜在的冗余数据库调用来获取它。

调用`db.Clients.Find(...`告诉 EF 从数据库中获取行，这就是它返回对象的原因。

# silverlight - Silverlight FTP 文件上传在服务器中不起作用

> ID：15552892
> 
> 赞同：1
> 
> 时间：2013-03-21T16:22:24.477
> 
> 标签：silverlight

我通过以下链接（[https://github.com/dittodhole/sharpLightFtp](https://github.com/dittodhole/sharpLightFtp)）使用 FtpClient 在 Silverlight 中创建了一个文件上传项目。

它在本地开发（visual studio）和本地iis服务器中也很有效。但是当我将它托管到我的服务器中时，我遇到了以下问题。

**var 成功 = ftpClient.BasicConnect();**

**成功变得虚假**。这可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T11:46:08.827

其实我是这个图书馆的作者。

你读过[`README`](https://github.com/dittodhole/sharpLightFtp#configure-your-silverlight-application-properly)文件吗？它解释了这些步骤：

> 您需要按照[这个很棒的教程](http://www.pitorque.de/MisterGoodcat/post/Silverlight-5-Tidbits-Trusted-applications.aspx)来启用对浏览器的提升信任，这是套接字编程所必需的。

所以，我的猜测：

*   缺少 CA 的签名/缺少注册条目
*   或缺少策略文件

# jquery - 如何实现 HTML 文本元素的滑动过渡效果？

> ID：15552894
> 
> 赞同：0
> 
> 时间：2013-03-21T16:22:36.060
> 
> 标签：jquery, css

我希望创建一个 HTML 页面，`<p>`可以在其中基于鼠标单击与标签进行交互。我希望将水平滑动过渡与缓入/缓出结合起来，就像其中一些标签在[deck.js](http://imakewebthings.com/deck.js/introduction/)或[timeline.js中的那些。](http://timeline.verite.co/)`<p>`

除了挖掘deck.js 和timeline.js 代码（到目前为止还没有什么成果），有人可以推荐一个教程或示例来实现这种文本效果吗？我的 google-fu 仅向我指出了图像幻灯片的非常具体的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:32:11.720

把它放在一个div中，然后：

```
$(document).ready(function(){
  $("div").click(function(){
    $("div").animate({
      right:'250px',
    });
  });
}); 
```

或任何你想移动它的方式，你可以在 w3schools 上查找所有效果

[http://w3schools.com/jquery/jquery_animate.asp](http://w3schools.com/jquery/jquery_animate.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:50:35.377

我认为这个问题可以帮助您[使用 JQuery 水平滑动 div。](https://stackoverflow.com/questions/9864305/sliding-divs-horizontally-with-jquery)请 记住，`<p>`标签可以移动，`div`所以我认为您不会有问题。如果我错了，请告诉我。

# java - 单击/选择时更新 ListView 项目

> ID：15552897
> 
> 赞同：0
> 
> 时间：2013-03-21T16:22:50.443
> 
> 标签：java, android, android-listview

我是 android 新手，我遇到了 ListView 的问题。我的 ListView 从 REST 服务加载数据，然后使用此数据填充 ListView。我想在每个项目上添加诸如 OnItemClickListener/OnSelectedItemListener 之类的东西，并且当用户单击项目时想要添加按钮。当用户单击另一个项目时，按钮应该消失。有任何想法吗？

**[编辑]** 我试过什么？

1.  我创建了包含 ListView 和 Button 的 LinearView
2.  ListView使用REST服务数据填写Activity（TextView用于查看）
3.  我认为我的`OnClickListener`课程可能看起来像这样，但我不知道如何添加 Button（最好是创建一个 Button 对象并仅在选定项目上显示它 - 我认为它会更好的性能）

    公共类 RoomClickListener 实现 OnItemClickListener {

    ```
    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        Button b = new Button(arg0.getContext());
        b.setText("Join");
    } 
    ```

    }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:25:52.497

你试过玩`android:visibility`你的 Button 吗？

我猜将其设置为可见/不可见可能是一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:17:10.583

添加`button`并调用`invalidate()`哪个`view`更改。

这应该有效。

# ssis - 每小时自动更新 Google Fusion Table 中的数据？

> ID：15552899
> 
> 赞同：0
> 
> 时间：2013-03-21T16:22:51.173
> 
> 标签：ssis, google-fusion-tables

我们将需要每小时收集一次`update`数据，`Google Fusion Table`并正在研究是否可能使用一个`SSIS`包来完成此任务。

有没有人有过自动更新[Google Fusion Tables](http://www.google.com/drive/start/apps.html#fusiontables)的经验？有什么方法比其他方法效果更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T18:18:26.810

我会将您的问题分解为较小的问题，直到您找到可以解决的问题为止。

## 如何以 X 间隔执行任务

在纯 Windows 世界中，我会使用本机[Task Scheduler](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383614%28v=vs.85%29.aspx)。它是免费的，并且适用于您的“每小时”场景。

由于 SSIS 混合在一起，这意味着您还可以访问[SQL Agent](http://msdn.microsoft.com/en-us/library/ms189237.aspx)。它也非常适合您的场景，此时，我将检查您的组织并确定主要使用哪种调度工具。它可能是“两者都不是”。

## 如何以编程方式更新 Google Fusion Tables

已发布完整的[Fusion API](https://developers.google.com/fusiontables/)。它们甚至具有用于处理表中数据的[DML 语法。](https://developers.google.com/fusiontables/docs/v1/sql-reference)但是，请注意有关对超过 500 行/10k 个单元格/1MB 使用查询语法的[警告。](https://developers.google.com/fusiontables/docs/v1/sql-reference#insertRow)

> 注意：您可以在一个请求中列出最多 500 条 INSERT 语句，用分号分隔，只要数据的总大小不超过 1 MB 并且要添加的表格单元格总数不超过 10,000 个单元格。如果要插入大量行，请改用[import](https://developers.google.com/fusiontables/docs/v1/using#ImportingRowsIntoTables)方法，这将比使用许多 SQL INSERT 语句更快、更可靠。

## 如何使用 SSIS 更新 Google Fusion Tables

对于任何不是 SSIS 开箱即用的东西，我通常会重新提出“我如何在 .NET 中执行 X”这样的问题，因为这将归结为。由于它是一个 Web 目标，而 SSIS 有一个 Web 服务任务，它不如编写自己的 .NET 调用程序有用。

我会设想一个 SSIS 包，其中至少有一个`Data Flow Task.`取决于您的数据来自哪里，它有一个源（OLE DB、平面文件等），以及您在它和目标之间需要的任何转换。您的目的地将被`Script Component`配置为目的地。在那里，您将使用 C# 或 VB.NET 将插入/更新命令发送到 Web 服务器。我发现这个[C# 示例](https://groups.google.com/forum/?fromgroups=#!topic/fusion-tables-users-group/jJ9w7zgU8oQ)听起来合乎逻辑。我从来没有真正使用过 GFT API，所以我无法评论是否有更好的方法来做这件事。

# 在这里复制三亚的评论

> 警告：附加的示例 c# 脚本使用客户端登录来针对 Google 进行身份验证。自 2012 年 4 月 20 日起，此身份验证方法已被弃用。支持使用 OAuth2。

# google-drive-api - 为移动访问配置 Drive SDK

> ID：15552900
> 
> 赞同：3
> 
> 时间：2013-03-21T16:22:55.547
> 
> 标签：google-drive-api

我们有一个与 google drive SDK 集成的应用程序，并且在 API 控制台中配置了打开/新 URL，在桌面上运行良好。勾选“移动浏览器支持”复选框。尽管如此，当我从移动浏览器 (Ipad) 打开 Google Drive 网页时，单击文件链接会下载文件，而不是在浏览器中打开我们的应用程序。知道这是配置问题还是移动 Drive UI 中的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-09T12:48:25.253

根据我的尝试，在移动 Google Drive 网站上，只有当文件具有应用程序的 mime 类型时，才会使用您的应用程序打开一个文件，而不是下载该文件。这种 MIME 类型如下所示：

```
application/vnd.google-apps.drive-sdk.nnnnnnnnnn 
```

您可以通过使用 API [1] 请求有关您的应用程序的信息来找到它。

[1] [https://developers.google.com/drive/v2/reference/apps/list](https://developers.google.com/drive/v2/reference/apps/list)

# asp.net-mvc - 扩展方法不适用于通过 ViewBag 传递的模型实例的属性

> ID：15552901
> 
> 赞同：0
> 
> 时间：2013-03-21T16:22:55.683
> 
> 标签：asp.net-mvc, extension-methods, viewbag

我有以下字符串扩展方法：

```
public static string Truncate(this string value, int maxLength = 75)
{
    /* ... */
} 
```

我想在视图中使用它，它可以与文字字符串一起正常工作。但是当我在 ViewBag 中有一个模型实例（我们称之为`object`）并尝试使用`Truncate`它的一个字符串属性时，我得到一个`RuntimeBinderException`：

> “字符串”不包含“截断”的定义

为什么会这样？我可以解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T16:32:12.753

因为`ViewBag`是一个`dynamic`类型，扩展方法不会在没有先转换为适当的类型的情况下在它们的属性上被拾取。

例如：

```
@(((string)ViewBag.stringProperty).Trunctate()) 
```

就我个人而言，我限制了我的使用，`ViewBag`以避免不得不到处施放（*除其他原因外*）。相反，我为每个视图使用强类型视图模型。

* * *

为了完整起见，如果您的视图中未引用包含您的扩展的命名空间，也可能会遇到此错误。

您可以在位于您的视图文件夹中的 web.config 中添加命名空间：

![在此处输入图像描述](../Images/633e2e23b21d62397a70e0ed299ccf59.png)

将命名空间添加到以下部分：

```
 <system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization"/>
        <add namespace="System.Web.Routing" />
        <add namespace="MyProject.Extensions" />
      </namespaces>
    </pages>
  </system.web.webPages.razor> 
```

**或者**，您可以在 razor 视图本身中导入命名空间：

```
@using MyProject.Extensions 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-23T17:07:58.580

我做类似（干净）的事情

```
@{
    string areaName = ViewBag.AreaName;
} 
```

然后... `<h4>@areaName.ExtensionMethod()</h4>`

# visual-studio-2012 - 获取智能感知以获取中间 cs 文件

> ID：15552902
> 
> 赞同：1
> 
> 时间：2013-03-21T16:23:01.247
> 
> 标签：visual-studio-2012, msbuild

我有一个 XSD 文件（一个 DTD），我在其上运行 XSD 工具来生成一个 C# 文件。我在以下两个地方修改了我的 csproj 的 msbuild 文件：

为项目组添加了一个特殊类型：

```
<ItemGroup>
   <SchemaFiles Include="Data\DeepZoomSchema.xsd">
   </SchemaFiles>
</ItemGroup> 
```

然后在文件的底部：

```
<Target Name="BeforeBuild" Inputs="@(SchemaFiles)" Outputs="@(SchemaFiles->'$(IntermediateOutputPath)%(Filename).cs')">
  <XSD Language="CS" GenerateFromSchema="classes" SuppressStartupBanner="false" Namespace="DZParallelLib.Data" Sources="@(SchemaFiles)" AdditionalOptions="/out:$(IntermediateOutputPath)" />
  <ItemGroup>
    <Compile Include="@(SchemaFiles->'$(IntermediateOutputPath)%(Filename).cs')">
    </Compile>
  </ItemGroup>
</Target> 
```

首先，这个项目现在编译得很好。所以我想我已经完成了困难的部分。但是，从不解析 DeepZoomSchema.cs 输出文件的意义上说，智能感知被破坏了。

在我的理想世界中，从 VS2012 IDE 中，我希望找到并解析 .cs 文件。我找到了一种方法来做到这一点，如下所示：

```
<ItemGroup>
  <SchemaFiles Include="Data\DeepZoomSchema.xsd">
  </SchemaFiles>
</ItemGroup>
<ItemGroup>
  <Compile Include="@(SchemaFiles->'$(IntermediateOutputPath)%(Filename).cs')">
    <Visible>False</Visible>
  </Compile>
</ItemGroup> 
```

然后构建步骤变得更加简单：

```
<UsingTask TaskName="XSD" AssemblyName="Microsoft.Build.CppTasks.Common, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
<Target Name="BeforeBuild" Inputs="@(SchemaFiles)" Outputs="@(SchemaFiles->'$(IntermediateOutputPath)%(Filename).cs')">
  <XSD Language="CS" GenerateFromSchema="classes" SuppressStartupBanner="false" Namespace="DZParallelLib.Data" Sources="@(SchemaFiles)" AdditionalOptions="/out:$(IntermediateOutputPath)" />
</Target> 
```

现在 IDE 可以正确解析事情（并且解决方案仍在构建），但感觉不对。当我过去编写 MS 构建规则时（我承认，我没有做过很多），我总是将中间输出文件放在构建规则中（就像我之前所做的那样）。另外，感觉我应该在这里使用“DependentUpon”标签，并使它们可见，只是默认情况下在 IDE 中不显示（有点像代码隐藏文件？？）。基本上，第一个解决方案感觉它是“正确”的方式，但 IDE 不喜欢它。

所以，我的问题是：有没有比我描述的第二种解决方案更好的方法来完成我想做的事情？

# javascript - rails js 最佳实践

> ID：15552910
> 
> 赞同：-2
> 
> 时间：2013-03-21T16:23:16.610
> 
> 标签：javascript, ruby-on-rails, ruby

我将 js 代码直接插入到视图中。

post.html.erb：

```
<%=@post.text%>
<script>
  alert("Hello!")
</script> 
```

也许这不是最好的方法。告诉我放js代码的最佳方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:53:18.693

您的解决方案本质上没有任何问题，尽管您可以使用一个帮助程序，它会自动将其包装在 CDATA 部分中，因此它在旧浏览器上可能更安全：

```
<%= javascript_tag do %>
  alert("Hello!")
<% end %> 
```

# gcc - 编译 Ubuntu 10.04 内核模块时可以使用 -fstack-check 吗？

> ID：15552911
> 
> 赞同：1
> 
> 时间：2013-03-21T16:23:18.123
> 
> 标签：gcc, linux-kernel, stack, stack-overflow, ubuntu-10.04

看起来我的内核模块在重负载下执行了一些堆栈粉碎。我可以为内核模块使用 -fstack-check 编译选项吗？似乎该编译选项会导致编译器发出额外的代码，但不会链接到库或运行时。那是对的吗？

我有一个非常简化的内核，它做的不多。我可以在启用和不启用 slub 调试的情况下加载那个简单的内核，并且它也会在编译时加载和不加载 -fstack-check。当我开始测试我的模块时，当我使用 -fstack-check 编译选项时它开始崩溃，而仅使用 slub 调试似乎不会引发错误。

另一个问题（[gcc 选项 -fstack-check 究竟如何工作？](https://stackoverflow.com/questions/2369886/how-does-the-gcc-option-fstack-check-exactly-work)）提供了一些信息，但我无法找到在内核模块编译中使用 -fstack-check 选项的人的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:33:57.233

Linux 内核内部的堆栈空间*受到严重*限制。用细梳检查你的代码，检查在局部变量中没有使用过多的路径，*根本*`alloca()`不允许。除此之外，内核环境很恶劣。仔细检查你的逻辑。为可能超出范围的数据添加测试，将数据跟踪到数据来源并确保它始终如您所愿。来自用户空间的数据*始终*是引起额外偏执的原因。

# scala - 在 specs2 中，有条件地对从可能引发异常的函数返回的结果执行子测试

> ID：15552912
> 
> 赞同：4
> 
> 时间：2013-03-21T16:23:19.323
> 
> 标签：scala, testing, bdd, specs2

在 specs2 中，表达仅在其“父”测试返回结果而不引发异常时才执行的子测试模式的正确方法是什么？

我有一个 function `maybeGiveMeAThing`，它可以返回 a `Thing`，也可以抛出异常。

调用如下所示：

`val thing: Thing = maybeGiveMeAThing("foo", "bar" "baz"`)

我想用一组输入来测试它，它`maybeGiveMeAThing`成功地返回一个 Thing 而不会引发异常，并使用返回的 Thing，做进一步的测试，以确保它是正确`Thing`返回给`maybeGiveMeAThing`.

我当前设置测试的方式，如果调用`maybeGiveMeAThing`抛出异常，整个测试套件就会中止。这将是我更喜欢的逻辑：

*   如果 a`Thing`成功返回，则继续进行一组子测试来分析事物的内容
*   如果`maybeGiveMeAThing`抛出异常（任何异常），则跳过分析事物的子测试，但继续进行其余测试

我现有的测试代码大致如下：

```
// ...
"with good parameters" in {
  var thing: Thing = null   

  "return a Thing without throwing an exception" in {
    thing = maybeGiveMeAThing("some", "good", "parameters", "etc.")
  } should not(throwA[Exception])

  "the Thing returned should contain a proper Foo" in {
       thing.foo mustBe "bar"

  }
    //... etc ...
}

// ...

} 
```

...尽管这感觉与正确的做法相去甚远。什么是正确的方法？
（如果可以的话，我想避免使用`var`s 。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T03:50:48.980

一种可能性是使用@alexwriteshere 回答中的条件：

```
"parent test" in {
  val thing: Option[Thing] = maybeGiveMeAThing("foo", "bar" "baz")

  thing match {
    case Some(thing) =>
      "child test 1" in ok
      "child test 2" in ok
    case None =>
      "skipped tests" in skipped
  }
} 
```

但是，您需要`Example`在`None`case 中添加一个，以便该`in`方法的块具有可接受的类型。

这种方法的最大缺点是规范在定义的同时被执行。这意味着：

*   如果有一个例外，`maybeGiveMeAThing`那么整个规范就会爆炸
*   如果您选择使用 排除示例`thing`，您仍然可以构建它

另一种选择是使用一种`Step`说法，即任何先前的失败都将跳过所有下一个示例：

```
class MySpec extends mutable.Specification {
  "This is a test with a thing" >> {
    lazy val thing: Option[Thing] = maybeGiveMeAThing("foo", "bar" "baz")

    "the thing should be ok" >> {
      thing must beOk
    }

    step(stopOnFail = true)
    "other examples with thing" >> {
      "ex1" >> ok
      "ex2" >> ok
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T16:42:12.180

带有子案例的简单 if/else 将满足您的需求。或者，您可以让“maybeGiveMeAThing”方法返回一个选项，然后匹配它。

```
"parent test" in {
      val thing: Option[Thing] = maybeGiveMeAThing("foo", "bar" "baz")

      thing match {
        case Some(thing) =>
          "child test 1" in {
            ...
          }

          "child test 2" in {
            ...
          }
        case None =>
          // don't run additional tests
      }
    } 
```

如果maybeGiveMeAThing*必须*返回一个异常，您可以捕获它并使该方法返回一个选项。

# java - 使用 Java 从 postgreSQL 中检索 inet 数据类型？

> ID：15552914
> 
> 赞同：0
> 
> 时间：2013-03-21T16:23:25.160
> 
> 标签：java, postgresql, inet

如何使用 Java 从 postgres 数据库中获取 inet 数据类型？我试过了：

```
ResultSet foo = // query goes here //
foo.getString("loopback"); 
```

但是当我这样做时，它会抛出一个 SQL 异常“无效的列名”。AFAIK 没有与 Java 中的 postgres inet 对应的数据类型。我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:44:41.517

张贴回应克里斯特拉弗斯

我原来的查询：

```
 //Query returning the set of devices in a given market
    String stm ="SELECT device "
                "FROM mopdb.devices d " +
                "INNER JOIN mopdb.markets m " +
                "ON (d.market_id = m.market_id) " +
                "WHERE (m.short = ?) " +
                "ORDER BY d.device_id "; 
```

设备表中的“设备”由几列组成，包括环回和 oob，它们（显然）是 IP 地址（IPv4，要清楚）。

这是我使用 ResultSet 并构造一个新的“设备”对象的行

```
 ResultSet d = DBUtilities.getDevicesFromMarket(m.toString());
    while(d.next()) {
        String loopback, oob;
        Device deviceName = new Device(d.getString("device"), 
                (DBInet.valueOf(d.getString("loopback"))),
                (DBInet.valueOf(oob = d.getString("oob"))), 
                d.getString("traffic_type"), d.getString("clli"),
                d.getString("rack"), d.getInt("market_id"),
                d.getString("codebase"));
        model.addElement(deviceName);
    } 
```

DBInet.valueOf 是一个静态方法，它将 postgreSQL inet 数据类型的字符串表示形式转换为 DBInet 对象；java.net.InetAddress 的包装类。

问题是我只从设备表中选择“设备”列。以下是按预期工作的查询。

```
 //Query returning the set of devices in a given market
    String stm ="SELECT * " +
                "FROM mopdb.devices d " +
                "INNER JOIN mopdb.markets m " +
                "ON (d.market_id = m.market_id) " +
                "WHERE (m.short = ?) " +
                "ORDER BY d.device_id "; 
```

# android - Android 上的 Facebook SDK 似乎在保留旧的用户数据

> ID：15552916
> 
> 赞同：0
> 
> 时间：2013-03-21T16:23:26.267
> 
> 标签：android, facebook-android-sdk

我正在尝试使用 Android Facebook SDK 将用户登录到 Facebook。我们设置了一个 Facebook 应用程序，它正在我们的一台设备上运行。但是，当我尝试在我的测试设备上登录时，它会显示一个屏幕说

**[应用程序名称] 为 Facebook 登录配置错误。按确定返回应用程序而不将其连接到 Facebook。**

这很令人困惑，因为它可以在另一台设备上运行，并且我已将应用程序设置为同时使用调试键和释放键，但*更奇怪*的是，在屏幕底部显示

**您正在以 [一个月前离开项目的开发人员] 身份登录 [应用程序名称]。**

【一个月前离开项目的开发者】一个月前离开了项目。在此期间，我已经多次卸载并重新安装了这个应用程序。他的登录数据到底是如何在所有这些会话中持久保存的？我怎样才能摆脱它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:38:04.210

如果用户登录官方 Facebook 应用程序，Facebook SDK 将使用这些设置进行登录。我没有意识到 [一个月前离开该项目的开发人员] 仍然登录到 Facebook 应用程序。

# dhtmlx - dhtmlx 列未排序

> ID：15552917
> 
> 赞同：0
> 
> 时间：2013-03-21T16:23:28.893
> 
> 标签：dhtmlx

```
 mygrid = new dhtmlXGridObject('mygrid_container');
        mygrid.setImagePath("codebase/imgs/");
        mygrid.setHeader("Col1, Col2, Col3, Col4, Col5, Col6, Col1=7");
        mygrid.setInitWidths("*,*,*,*,*,*,*");
        **mygrid.setColAlign("left,left,left,left,left,left,left");**
        mygrid.setSkin("light");

        mygrid.setColSorting("str, int, int, int, int, int, int");
        mygrid.init(); 
```

我在第一列上有这个工作和排序，但我得到了所有其他列的排序插入符，但行没有排序。我正在用萤火虫查看控制台，但没有看到任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:50:04.690

找到了。

错误的

```
mygrid.setColSorting("str, int, int, int, int, int, int");' 
```

删除空格。

正确的

```
mygrid.setColSorting("str,int,int,int,int,int,int"); 
```

# java - 将 startActivityForResult 和 onActivityResult 包装在一个返回结果的函数中

> ID：15552919
> 
> 赞同：1
> 
> 时间：2013-03-21T16:23:37.260
> 
> 标签：java, android, android-activity, wait

我是 Android 新手，并尝试创建将使用 startActivityForResult 和 onActivityResult 并返回结果的身份验证函数（在我的例子中是两个字符串的数组 - 来自登录屏幕的用户名和密码）。

这是我的代码（为用户名和密码返回 null）

在主要活动中（调用 authenticate() 函数）：

```
public String user;
public String pass;

public void startAuth(Intent i)
{
    startActivityForResult(i, 1);
}

public String[] authenticate()
{
    String[] ret = new String[2];
    Intent i = new Intent(getApplicationContext(), LoginActivity.class);
    startAuth(i);

    ret[0] = i.getStringExtra("iUsername");
    ret[1] = i.getStringExtra("iPassword");

return ret;
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (data.getExtras().containsKey("iUsername"))
    {
        user = data.getStringExtra("iUsername");
        pass = data.getStringExtra("iPassword");
    }
} 
```

在登录活动中：

```
public class LoginActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);

    Button loginButton = (Button) findViewById(R.id.btnLogin);
    final EditText username = (EditText) findViewById(R.id.username_fill);
    final EditText password = (EditText) findViewById(R.id.password_fill);

    // Listening to Login Button
    loginButton.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            Intent i = getIntent();
            i.putExtra("iUsername", username.getText().toString());
            i.putExtra("iPassword", password.getText().toString());

            setResult(RESULT_OK, i);
            finish();
        }
    });
    }
} 
```

我知道我需要以某种方式等待 onActivityResult 回调，但我尝试了不同的解决方案（使用 wait() 和 notify()，使用单例）但无法让它工作......

我必须包装它，而不是像这样使用它，因为我想在更大的代码中使用 authenticate() 函数。任何不使用上述功能的解决方案也可以..

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:35:35.747

无论您在哪里使用`authenticate()`，您实际上都不是在等待响应：

```
public void authenticate() // Changed return type to void
{
    //String[] ret = new String[2];
    Intent i = new Intent(getApplicationContext(), LoginActivity.class);
    startAuth(i);

    /*
     * This code does nothing, the Intent you want is in onActivityResult()

        ret[0] = i.getStringExtra("iUsername");
        ret[1] = i.getStringExtra("iPassword");
        return ret;
     */
} 
```

你必须打破你的逻辑，以便在`onActivityResult()`被调用时`authenticate()`从中断的地方恢复。了解您不能在方法中间恢复。
因此，您必须`authenticate()`在一个方法结束时调用，并且您`ret`现在使用的任何位置都必须是您从中调用的新方法`onActivityResult()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T15:48:40.403

```
private final Object lock = new Object();

public synchronized void startAuth(Intent i)
{
    m_intent = i;
    Thread thread = new Thread()
    {
        @Override 
        public void run()
        {
            MainActivity.this.runOnUiThread(new Runnable() 
            {
                public void run() 
                {
                    startActivityForResult(m_intent, 1);
                }
            });     
        }           
    };

    thread.start();
}

// authenticate function
public String[] authenticate()
{
    String[] ret = new String[2];
    Intent i = new Intent(getApplicationContext(), LoginActivity.class);

    startAuth(i);

    // waiting for login
    synchronized (lock) 
    {
        try 
        {
            lock.wait();
        } 
        catch (InterruptedException e) 
        {
            e.printStackTrace();
        }
    }

// writing results
    ret[0] = m_sUser;
    ret[1] = m_sPass;

    return ret;
} 
```

# sql - 通过 Access 中的查询查找重复项

> ID：15552922
> 
> 赞同：1
> 
> 时间：2013-03-21T16:23:46.907
> 
> 标签：sql, ms-access

在我的桌子上，我有许多产品。我注意到有人使用相同的代码上传了一些产品。如何运行查询来查找 productno 字段中不唯一的所有行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:35:21.533

据我了解这个问题，您想查看哪些行包含重复`productno`值，而不仅仅是哪些`productno`值重复。

如果正确，请选择`productno`子查询中的重复值并将您的表连接到子查询。

```
SELECT y.*
FROM
    [Your Table] AS y
    INNER JOIN
        (
            SELECT [productno], Count(*)
            FROM [Your Table]
            GROUP BY [productno]
            HAVING Count(*) > 1
        ) AS sub
    ON y.[productno] = sub.[productno]
ORDER BY y.[productno]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:25:59.753

尝试这个

```
 SELECT productno, count(*) as num FROM Products GROUP BY ProductNo HAVING count(*)  > 1 
```

# c# - 为 ComboBox 设置标签函数

> ID：15552927
> 
> 赞同：1
> 
> 时间：2013-03-21T16:24:23.140
> 
> 标签：c#, wpf, combobox

**有没有办法为放置在组合框中的项目使用标签功能？**

目前它使用`ToString()`来获取标签。例如，假设您有一个`ComboBox`由类型列表对象支持的`Person`：

```
namespace WpfApplication1 {
    public class Person {

        public string fname { get; set; }

        public string mname { get; set; }

        public string lname { get; set; }

        public Person(string fname, string mname, string lname) {
            this.fname = fname;
            this.mname = mname;
            this.lname = lname;
        }

        public override string ToString() {
            return this.lname +", " + this.fname + " "+ this.mname;
        }
    }
} 
```

但是现在你希望每个人的文本都`this fname + " "+ this.mname[0]+" "+this.lname`在某些地方。理想情况下，我希望能够向支持 XAML cs 文件添加一个方法，例如：

```
public string GetLabel(Person item) {
    return item.fname + " " + item.mname[0] + " " + item.lname;
} 
```

然后以某种方式将 ComboBox 指向 cs 文件中的方法。

* * *

这是一个示例 XAML 文件和 XAML.cs（如果有帮助）：
**MainWindow.xaml**

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="100" Width="250">
    <Grid>
        <ComboBox x:Name="items" Height="22" Width="200" ItemsSource="{Binding}"/>
    </Grid>
</Window> 
```

**主窗口.xaml.cs**

```
using System.Collections.Generic;
using System.Windows;

namespace WpfApplication1 {
   public partial class MainWindow : Window {

        public List<Person> persons { get; set; }

        public MainWindow() {
            InitializeComponent();
            this.persons = new List<Person>();
            persons.Add(new Person("First", "Middle", "Last"));
            persons.Add(new Person("John", "Jacob", "Jingleheimer"));
            persons.Add(new Person("First", "Middle", "Last"));

            this.items.DataContext = this.persons;
        }

        public string GetLabel(Person item) {
            return item.fname + " " + item.mname[0] + " " + item.lname;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:51:49.317

您应该考虑使用 ViewModel 来使这更直接，但是如果您想做您所要求的，您可以在您的`Person`类上创建另一个属性，您绑定到您的 ComboBox 上。

```
public class Person 
{
    public string fname { get; set; }
    public string mname { get; set; }
    public string lname { get; set; }

    public string FullName
    {
        get
        {
            return item.fname + " " + item.mname[0] + " " + item.lname;
        }
    }

    public Person(string fname, string mname, string lname) 
    {
        this.fname = fname;
        this.mname = mname;
        this.lname = lname;
    }
} 
```

然后你可以只使用这个 XAML：

```
<ComboBox x:Name="items" Height="22" Width="200" ItemsSource="{Binding} DisplayMemberPath="FullName"/> 
```

我再次建议您了解有关 MVVM 的更多信息。

我希望这有帮助。

* * *

编辑

好的，您问我是否可以向您展示如何使用 MVVM 进行操作，所以就到这里了。

首先我们有我们的`Person`类，它是我们的模型（我重命名了属性并添加了一个 Id 字段，因为我可以）

```
public class Person
{
    public Guid Id { get; set; }
    public string FirstName { get; set; }
    public string MiddleName { get; set; }
    public string LastName { get; set; }

    public Person()
    {
        Id = Guid.NewGuid();
    }

    public Person(string firstName, string middleName, string lastName)
    {
        Id = Guid.NewGuid();
        FirstName = firstName;
        MiddleName = middleName;
        LastName = lastName;
    }
} 
```

请注意，我没有使用 FullName 属性污染我的模型，因为这纯粹是为了显示，所以我们将把它放在 ViewModel 中。

这是`PersonViewModel`（注意在这种情况下 ViewModelBase 只是一个实现的基类`INotifyPropertyChanged`）：

```
public class PersonViewModel : ViewModelBase
{
    private Person person { get; set; }

    public Guid Id { get { return person.Id; } }

    public String FirstName
    {
        get { return person.FirstName; }
        set
        {
            if (person.FirstName != value)
            {
                person.FirstName = value;
                RaisePropertyChanged("FirstName");
            }
        }
    }

    public string MiddleName
    {
        get { return person.MiddleName; }
        set
        {
            if (person.MiddleName != value)
            {
                person.MiddleName = value;
                RaisePropertyChanged("MiddleName");
            }
        }
    }

    public string LastName
    {
        get { return person.LastName; }
        set
        {
            if (person.LastName != value)
            {
                person.LastName = value;
                RaisePropertyChanged("LastName");
            }
        }
    }

    public string FullName { get { return LastName + ", " + FirstName + " " + MiddleName; } }

    public PersonViewModel()
    {
        person = new Person();
    }

    public PersonViewModel(Person inPerson)
    {
        person = inPerson;
    }
} 
```

它基本上用引发 PropertyChanged 通知的属性包装了我们的 Person 类（如果您想在属性更改时更新屏幕，则需要）。它还添加了新`FullName`属性。

接下来我们有一个 MainViewModel，因为我不想将代码放入 MainWindow 的 Code Behind 页面。它只是声明我们的`List<PersonViewModel>`并填充它。

```
public class MainViewModel : ViewModelBase
{
    public List<PersonViewModel> People { get; set; }

    public MainViewModel()
    {
        // Get the people list from your data provider (in this case returns IEnumerable<Person>)
        var peopleList = DataProvider.GetPeople();

        // Wrap each person in a PersonViewModel to make them more UI friendly
        People = peopleList.Select(p => new PersonViewModel(p)).ToList();
    }
} 
```

最后，我们有我们的 MainWindow 和`ComboBox`它。

```
<Window x:Class="MVVM_Sample.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:vm="clr-namespace:MVVM_Sample.ViewModels"
    Title="MainWindow" Height="350" Width="525"
    DataContext="{DynamicResource ViewModel}">
<Window.Resources>
    <vm:MainViewModel x:Key="ViewModel" />
</Window.Resources>
<Grid>
    <ComboBox ItemsSource="{Binding People}" DisplayMemberPath="FullName" SelectedValuePath="Id" Height="22" Width="200" />
</Grid>
</Window> 
```

`MainViewModel`请注意，我在 Resources 中声明了一个实例并将其设置`DataContext`为 Window。这使我的 Binding 语句在 MainViewModel 中查找值。

我知道对于这样一个简单的例子来说这似乎有点冗长，但是当事情开始变得复杂时它会更有意义，它有助于保持所需的关注点分离。MVVM 和 XAML 都是很棒的工具，但是有一个学习曲线。

# google-bigquery - 如何停止运行 bigquery 查询

> ID：15552931
> 
> 赞同：10
> 
> 时间：2013-03-21T16:24:33.773
> 
> 标签：google-bigquery

有什么方法可以取消正在运行的查询？

我使用网络界面。首先，我对 10k 行和超过 20k 行的表进行了一系列测试，响应以秒为单位。但比我在 100k 行的表上运行三联查询，几千秒后它似乎没完没了。

我只是想在将所有工作转移到 bigquery 之前运行一些测试，但现在恐怕它会花费整个每月 100gb 的免费限制 + 更多。

该表是一个简单的整数值键值对。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-02-01T22:35:05.310

shell 命令`bq cancel job_id`现在将执行此操作。您可以`job_id`从BigQuery 控制台的“*查询历史记录”选项卡中获取。*如果您通过 CLI 启动查询，它将记录`job_id`到标准输出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T20:06:56.473

目前没有办法通过 API 或 UI 停止正在运行的查询。您可以关闭查询生成器（通过 UI 右上角的“x”）并重新打开它以使 UI 再次响应。我们目前正在 UI 中开发此功能。

令人惊讶的是，即使是连接，对于这种大小的表，查询也会花费这么长时间，除非您的连接是在非唯一键上连接，因此需要时间来生成匹配键的叉积。例如：

```
SELECT t1.foo 
FROM (SELECT 1 as one, foo FROM table1) t1 
JOIN (SELECT 1 as one, bar FROM table2) t2
ON t1.one = t2.one 
```

将生成 nxm 行，其中 n 是 table1 中的行数，m 是 table2 中的行数。您的查询是否有可能做类似的事情？如果没有，您可以发送查询吗？（也许在另一个 SO 问题中，与慢速连接性能有关）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T16:39:50.007

在使用 Java API 时，我们没有找到停止作业的方法，据我所知，您无法在 Web 界面上停止作业。

# python - Django 搜索性别

> ID：15552932
> 
> 赞同：1
> 
> 时间：2013-03-21T16:24:40.877
> 
> 标签：python, django, django-models, django-forms

假设我有一个模型

**模型.py**

```
class Profile
gender = models.PositiveSmallIntegerField(_('gender'),
                                              choices=GENDER_CHOICES,
                                              blank=True,
                                              null=True) 
```

**表格.py**

```
GENDER_CHOICES = (
        (1, _('Male')),
        (2, _('Female')),
    )

class searchForm:

 box = forms.ModelMultipleChoiceField(
                                      choices = GENDER_CHOICES,
                                      widget  = forms.CheckboxSelectMultiple(),
                                      label   = 'Search',
                                     ) 
```

我需要搜索用户并在我的个人资料页面中显示他们是男性还是女性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:44:17.320

Django 为每个带有选择参数的字段提供了一个特殊的功能。

如果该字段被调用`gender`，您将在模型上调用一个函数，该函数`get_gender_display()`将返回字符串“Male”或“Female”。

# context-free-grammar - 需要帮助从 CFG 中消除左递归

> ID：15552943
> 
> 赞同：2
> 
> 时间：2013-03-21T16:25:10.613
> 
> 标签：context-free-grammar, recursive-descent, left-recursion

我将如何消除此 CFG 中的左递归？

```
<RE> -> <RE>'|'<CONCAT> | <CONCAT>
<CONCAT> -> <CONCAT><KLEEN> | <KLEEN>
<KLEEN> -> <KLEEN>'*' | <ELEM>
<ELEM> -> 'a' | 'b' | 'c' | 'd' | '('<RE>')' 
```

我想出了这个：

```
<RE> -> <CONCAT><re>
<re> -> '|'<CONCAT><re> | (e)
<CONCAT> -> <KLEEN><concat>
<concat> -> <KLEEN><concat> | (e)
<KLEEN> -> <ELEM><kleen>
<kleen> -> '*'<kleen> | (e)
<ELEM> -> 'a' | 'b' | 'c' | 'd' | '('<RE>')' 
```

但似乎，当我尝试将其实现为递归下降解析器并解析诸如“ab”之类的简单字符串时，我得到了由`concat`生产引起的无限循环。

我是否错误地消除了左递归？

# jquery - 构建切换器功能

> ID：15552947
> 
> 赞同：0
> 
> 时间：2013-03-21T16:25:31.157
> 
> 标签：jquery

我正在尝试构建一个简单的切换器功能。

首先，以下代码不起作用。我在这里做错了什么？

其次，我可以使用 if 语句而不是使用 2 个不同但相似的函数来构建它。

编辑：我查看了 Syon 的示例并进行了一些更改。现在发生的事情是，如果最初每个人都被选中并且如果我只点击朋友，则“选定”类被正确分配给只有朋友并从每个人中删除。但是，如果最初只选择了朋友，则不会发生任何事情。

```
 $(".switcher span").click(function(){
        $.ajax({
            type: "GET",
            url: "content/profile/index.cs.asp?Process=ChangeComm",
            success: function(data) {
            if ($(this).hasClass('public')) { 
                $(".public").addClass('selected');
                $(".limited").removeClass('selected');
            } else {
                $(".limited").addClass('selected');
                $(".public").removeClass('selected');
            }
            return false;
            },
            error: function (data) {                        
            }
        });
    });

    <style>
    .switcher { width:100%; color:white; min-height:20px; padding:5px 0; cursor:pointer; }
    .switcher .selected { font-weight:bold; background:green; }
    .switcher span { width:25%; background: black; padding:5px; border-bottom-left-radius:5px; border-bottom-right-radius:5px; border-top-left-radius:5px; border-top-right-radius:5px;   }
    .switcher span.desc { width:50%; color:black; background:white; }
    </style>
        <div class="switcher">
            <span class="desc">güncellemeler</span>
            <span class="public <% If strDisplayComm = 1 Then %>selected<% End If %>">everyone</span>
            <span class="limited <% If strDisplayComm = 0 Then %>selected<% End If %>">only friends</span>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:48:06.020

试试这个。您需要为您的 css 添加更多的特殊性 for `.selected`=`.switcher span.selected`并且您可以使用 if 来检查类名以执行不同的操作。

这是一个[jsFiddle 示例](http://jsfiddle.net/AYZDL/)

**CSS**

```
.switcher {
    width: 100 %;
    color: white;
    min - height: 20px;
    margin: 5px 0;
}
.switcher span {
    padding: 5px;
    background: black;
}
.switcher span.selected {
    background: green;
} 
```

**HTML**

```
<div class="switcher">
    <span class="public">everyone</span>
    <span class="limited">only friends</span>
</div> 
```

**jQuery**

```
$(".switcher span").on('click', function () {
    var $this = $(this);
    $(".switcher span").removeClass('selected');
    if ($this.hasClass('limited')) {
        //perform ajax
    } else if ($this.hasClass('public')) {
        //perform ajax
    }
    $this.addClass('selected');
}); 
```

# java - ArrayList 的数组？

> ID：15552950
> 
> 赞同：0
> 
> 时间：2013-03-21T16:25:36.893
> 
> 标签：java, arrays, arraylist

我正在使用数组列表来存储字符串中的单词。我将它们按单词的长度存储在数组列表的数组中。我现在正在使用 switch 语句，但我必须有 45 个案例，我想知道是否有人知道我可以执行相同操作的更简单和更短的方法。这是一些代码：

```
 String temp;
    Scanner sc = new Scanner(str);
    while(sc.hasNext())
    {
        temp = sc.next();

        switch(temp.length()){

        case 1:
            wordsByLen[0].add(temp);
        case 2:
            wordsByLen[1].add(temp);
        case 3:
            wordsByLen[2].add(temp); 
```

我有案例 1-45 和默认值。如果可能的话，我只想缩短这个时间。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:27:29.127

`wordsByLen[temp.length()].add(temp);`--- 我猜应该这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T16:27:32.683

不要理会`switch`，只要做

```
wordsByLen[temp.length() - 1].add(temp) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T16:28:00.783

```
String temp;
Scanner sc = new Scanner(str);
while(sc.hasNext())
{
    temp = sc.next();
    wordsByLen[temp.length()-1].add(temp);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-21T16:27:56.323

只用一个比长度短的

```
int len = temp.length();
wordsByLen[len - 1].add(temp); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-21T16:29:35.423

为什么你需要在这里使用 switch case。试试这个：

```
String temp;
        Scanner sc = new Scanner(str);
        while(sc.hasNext())
        {
            temp = sc.next();
          if(temp.length > 0) {
            wordsByLen[temp.length()-1].add(temp)

        } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-21T16:28:35.200

您可以简单地使用以下命令代替 switch：

```
wordsByLen[temp.length()-1].add(temp); 
```

# arm - buildroot 中的多个后期构建脚本

> ID：15552957
> 
> 赞同：2
> 
> 时间：2013-03-21T16:25:43.537
> 
> 标签：arm, embedded-linux, buildroot

我对 buildroot 很陌生，我希望添加超过 1 个构建后脚本，如文档所述：

> 3.3.1。自定义生成的目标文件系统
> 
> > 在 Buildroot 配置中，您可以指定一个或多个构建后脚本的路径。这些脚本按给定顺序调用，在 Buildroot 构建所有选定的软件之后，但在组装 rootfs 映像之前。BR2_ROOTFS_POST_BUILD_SCRIPT 允许您指定构建后脚本的位置

[http://buildroot.uclibc.org/downloads/manual/manual.html#rootfs-custom](http://buildroot.uclibc.org/downloads/manual/manual.html#rootfs-custom)

如何在 buildroot 设置中指定多个值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T20:44:45.843

请参阅：[buildroot Makefile](http://git.buildroot.net/buildroot/tree/Makefile)，尤其是第 782-784 行。

字符串被传递到 shell 的`for`循环。所以应该使用空格分隔符。每个脚本都有一个`TARGET_DIR`参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T06:49:56.823

事实上，我正在运行仅包含 Buildroot 2012.02 的 Armadeus 5.2，它不允许超过 1 个后期构建脚本。Buildroot 2013.02 可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-07T03:14:25.283

当前的文档现在已经更清楚了：

> 要启用此功能，请在配置选项 BR2_ROOTFS_POST_BUILD_SCRIPT 中指定以空格分隔的构建后脚本列表

所以空间分离为Artless从源头推导出来的。

# javascript - JavaScript - 定时器启动

> ID：15552958
> 
> 赞同：0
> 
> 时间：2013-03-21T16:25:44.457
> 
> 标签：javascript, timer, setinterval, timing

我试图让我的敌人每秒开火。现在 - 这是每一帧。

在我的敌人对象中，我有一段代码在玩家处于范围内时启动：

```
this.shotBullet = false;
var object = this;
object.Fire(); 
```

这是敌人开火功能：

```
this.Fire = function(){

    console.debug("Firing | Shot: " + this.shotBullet);

    if(!this.shotBullet){   

        if(this.weapon == "pistol")
            PistolEnemy(this);  

        this.shotBullet = true;

    }

}; 
```

还有我的 PistolEnemy 函数：

```
PistolEnemy = function(operator){

    var user = operator;

    console.debug("user:" + user.tag);

    var bulletDamage = 1;
    var bulletSpeed = 20;

    var b = new Rectangle( user.x + (user.width / 2) - 4, user.y + (user.height / 2) - 4, 8, 8);
    var velocityInstance = new Vector2(0, 0);

    velocityInstance.x = Math.cos(user.rotation) * bulletSpeed;
    velocityInstance.y = Math.sin(user.rotation) * bulletSpeed;

    var bulletInstance = new Bullet(velocityInstance, b, "Enemy", bulletDamage, "blue");

    /*audioPistol.volume = 0.5;
    audioPistol.currentTime = 0;
    audioPistol.play();*/

    user.bullets.push(bulletInstance);
    user.shotBullet = true;

}; 
```

我尝试过使用“setInterval”，但效果不佳。大多数时候，它会等待一秒钟，然后喷出大量子弹。

我想要的只是让敌人的子弹每秒启动一次。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:40:59.463

```
var triggerID = window.setInterval(function(){firing_clock()},1000);

function firing_clock()
{
// this will execute once per second....sort of
} 
```

[Mozilla window.setInteral 文档](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)

因此，您应该知道的一件事是，如果您的浏览器繁忙，它将“迟到”。Mozilla 曾经有一个额外的非标准参数详细说明“实际延迟”，但现在不再这样做了 - 但关键是您要求浏览器每秒尝试执行一次操作，但如果它变得繁忙，它将落后或跳过几轮（浏览器处理它的方式因浏览器而异）。

理想情况下，您在这里要做的是将您的敌人对象注册到一个列表中，该列表会通过fire_clock() 将射击命令发送给所有活生生的敌人。这通过仅使用一个全局计时器而不是屏幕上每个对象一个计时器来减少开销。

只用一个硬编码的敌人试试这个，看看它是如何工作的。如果它仍然不起作用，那么这是一个更大的问题，因为我知道没有javascript“保证准确的计时器”。

但它应该可以工作，只要客户端的 CPU 上的事情不会变得太紧张，并且拥有一个用于船舶发射的全局计时器应该可以让你有大量的船舶在没有太多不良影响的情况下开火。

# git - GIT：切换分支时如何保留忽略的文件？

> ID：15552959
> 
> 赞同：8
> 
> 时间：2013-03-21T16:25:46.447
> 
> 标签：git, git-branch, gitignore

我有一个 App.Local.config 文件，每个开发人员都有自己的设置。我不希望这个文件在 GIT 存储库中检查版本，因为每次它都会被其他开发人员更改覆盖。

所以我从 repo 中删除了文件并将其添加到忽略文件中。但是现在当开发人员切换分支时，App.Local.config 会从他们的本地文件系统中删除。

最终我想要的是：

1.  新的开发者克隆 repo，获取 App.Local.config 的起始版本
2.  dev 对 App.Local.config 进行更改。Git 将忽略更改而不是暂存/签入
3.  dev 切换分支，对 App.Local.config 的更改不会丢失，文件不会被删除。

我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T17:01:27.420

可能发生的情况是您从工作区中删除了文件，但没有从索引中删除。如果您这样做了，那么 git 认为删除此文件是一种更改，它将从那时起将其删除。

方法是从索引中删除您不想再跟踪的文件

```
git rm --cached App.Local.config 
```

然后将该文件添加到`.gitignore` Doing 中，您将不再对文件有任何问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:56:40.120

好像这个文件曾经在索引中。所以它的删除**是**一个变化。您可以将其添加到`.gitignore`或`.git/info/exclude`然后在每台开发人员机器上重新创建它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-13T05:56:18.053

您`git rm --cached App.Local.config`不仅应该在工作分支中使用，还应该在要切换到的分支中使用，`App.Local.config`否则如果您只在该分支中使用，则在切换回您工作的分支时会丢失`git rm --cached App.Local.config`。

# c++ - g++ 帮助与本地副本链接

> ID：15552964
> 
> 赞同：1
> 
> 时间：2013-03-21T16:26:00.487
> 
> 标签：c++, opengl, linker, g++, glew

我在 ubuntu linux 的学校计算机上工作，想知道我需要做什么才能在我的项目中链接 GLEW 的本地副本。我学校的计算机当然安装了 SDL GL 和 GLU，因此与它们进行链接很容易，但他们没有安装 GLEW 的副本，而且我没有用户权限将我编译的 GLEW 移动到适当的文件夹中以便于链接。所以我的测试源文件夹设置如下：

```
glew
    include
    lib
    ...
main.cpp 
```

我正在使用这个包含语句`#include "glew/include/GL/glew.h"`，但我不知道如何在本地级别与 lib 链接，所以我从 g++ 得到错误，说这`glewInit()`是未定义的。我的问题是我如何以这种方式链接我的本地 GLEW 副本，或者任何其他不涉及可能需要我成为特权用户的东西的方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T16:32:45.887

因为`GCC`有特殊的`-L`命令行参数来[指定库的自定义路径](http://gcc.gnu.org/onlinedocs/gcc/Directory-Options.html#Directory-Options)。

因此，您需要在链接命令行中添加类似`-L./GLEW/lib`的`g++`内容

# ruby - 载波 be_identical_to 助手不在 rspec 中工作

> ID：15552965
> 
> 赞同：0
> 
> 时间：2013-03-21T16:26:00.993
> 
> 标签：ruby, ruby-on-rails-3, rspec, carrierwave, rspec-rails

我在尝试在 Carrierwave 上传上运行的 rspec 测试时遇到一些问题。基本上，我正在尝试测试处理以确保图像是否已上传和处理。我创建了一个后处理示例文件，该文件应与后上传和处理的测试文件相同。但是，我收到以下警告：

* * *

```
ImageUploader the greyscale version should remove color from the image and make it greyscale
 Failure/Error: @uploader.should be_identical_to(@pregreyed_image)
 TypeError:
   can't convert ImageUploader into String
 # ./spec/uploaders/image_uploader_spec.rb:24:in `block (3 levels) in <top (required)>' 
```

* * *

这是我的测试文件：

**image_uploader_spec.rb**

```
require File.dirname(__FILE__) + '/../spec_helper'
require 'carrierwave/test/matchers'

describe ImageUploader do
  include CarrierWave::Test::Matchers
  include ActionDispatch::TestProcess

  before do
    ImageUploader.enable_processing = true
    @uploader_attr = fixture_file_upload('/test_images/testimage.jpg',    'image/jpeg')
    @uploader = ImageUploader.new(@uploader_attr)
    @uploader.store!
    @pregreyed_image =             fixture_file_upload('/test_images/testimage_GREY.jpg', 'image/jpeg')
  end

  after do
    @uploader.remove!
    ImageUploader.enable_processing = false
  end

  context 'the greyscale version' do
    it "should remove color from the image and make it greyscale" do

      @uploader.should be_identical_to(@pregreyed_image)
    end
  end
  end 
```

* * *

**image_uploader.rb**

```
class ImageUploader < CarrierWave::Uploader::Base

  # Include RMagick or MiniMagick support:
  include CarrierWave::RMagick
  # include CarrierWave::MiniMagick

  # Include the Sprockets helpers for Rails 3.1+ asset pipeline compatibility:
  include Sprockets::Helpers::RailsHelper
  include Sprockets::Helpers::IsolatedHelper

  # Choose what kind of storage to use for this uploader:
  storage :file

  # Override the directory where uploaded files will be stored.
  # This is a sensible default for uploaders that are meant to be mounted:
  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

  # Process files as they are uploaded:
   process :convert_to_grayscale

  def convert_to_grayscale
    manipulate! do |img|
      img.colorspace = Magick::GRAYColorspace
      img.quantize(256, Magick::GRAYColorspace)
      img = yield(img) if block_given?
      img
    end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-05T18:32:26.893

在封面之下`be_identical_to`使用`FileUtils.identical?`了两个论点。所以你的期望：

```
@uploader.should be_identical_to(@pregreyed_image) 
```

实际上是在调用：

```
FileUtils.identcal?(@uploader, @pregreyed_image) 
```

因为在我的测试环境中我使用的是文件存储系统，所以我通过传入`#current_path`而不是像这样的上传器本身来解决这个问题：

```
@uploader.current_path.should be_identical_to(@pregreyed_image) 
```

我实际上最终需要直接比较上传器并`==`在我的上传器上实现：

```
class MyUploader < CarrierWave::Uploader::Base
  ...

  def ==(other)
    return true if !present? && !other.present?
    FileUtils.identical?(current_path, other.current_path)
  end
end 
```

# c# - c#从标签中提取文本并在另一个标签中打印相应的列

> ID：15552966
> 
> 赞同：0
> 
> 时间：2013-03-21T16:26:02.060
> 
> 标签：c#, label

我是 c# 编程的新手，我被卡住了。我有一个报告，它提取前 12 个列名并将它们放入 12 个标签中作为标题标签。我在每个标签下也有一个标签，该标签必须具有相应的数据才能匹配标题。我必须这样做的方法是将文本（字符串）从标题标签中取出，假设标题标签 xrlabel1 显示“好”，然后找到名为“好”的匹配列并将值放在 xrlabel2 中。我知道该怎么做，但不知道如何做到这一点。

这是我到目前为止所拥有的：

```
bool match(object value);

    private void xrLabel2_BeforePrint(object sender, System.Drawing.Printing.PrintEventArgs e)
    {
        //double holder;
        string zero = 0.ToString();
        object value = xrLabel1.Text;
        bool showDetail = match(value);

       if (showDetail)
        {
            xrLabel2.Text =    Convert.ToString((int)GetCurrentColumnValue(xrLabel1.Text));
        }
        else
        {
           xrLabel2.Text = zero; 
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:32:25.963

我建议你这个组织

```
 bool showDetail = Match(xrLabel1.Text);
   if (showDetail)
    {
        xrLabel2.Text =    GetCurrentColumnValue(xrLabel1.Text);
    }
    else
    {
       xrLabel2.Text = "0"; 
    } 
```

你的方法

```
 private bool Match(string value)
    {
      .....
    }
    private string GetCurrentColumnValue(string value)
    {
      .....
    } 
```

# ruby - 此事件机器代码仅服务于一个客户且仅服务一次

> ID：15552970
> 
> 赞同：0
> 
> 时间：2013-03-21T16:26:18.943
> 
> 标签：ruby, rabbitmq, eventmachine

我是这方面的新手，我编写了一个简单的代码，从 RabbitMQ 获取数据并将其发送到通过 websockets 连接的客户端。

这里的问题是：

*   如果我启动一个应用程序并且客户端连接（在浏览器中）它会发送数据并且一切正常。但是，如果我关闭浏览器窗口并再次打开，它就会停止工作。
*   当两个客户端通过浏览器连接到它时也是如此。我希望这段代码一次为多个客户提供服务。

$channel = EM::Channel.new

```
EM.run do
    class App < Sinatra::Base

        get '/' do
            haml :index
        end

    end

    EventMachine::WebSocket.start(:host => '0.0.0.0', :port => 8080) do |ws|
        ws.onopen {
            AMQP.start(:host => "localhost") do |connection|
                $channel = AMQP::Channel.new(connection)
                exchange = $channel.fanout("slant", :auto_delete => false, :durable => true)
                queue        = $channel.queue("my-events", :auto_delete => true, :durable => false)

                queue.bind(exchange, :routing_key => "").subscribe(:ack => true) do |headers, payload|
                    ws.send payload.to_s
                    puts payload
                    $channel.acknowledge(headers.delivery_tag, false)
                end
            end
        }
        ws.onclose { puts "Client disconnected" }
    end
    App.run!({:port => 3000})
end 
```

客户的 JS 如下：

```
$(function(){
  ws = new WebSocket("ws://localhost:8080");

  ws.onmessage = function(evt) {
    var msg = json_parse(evt.data);

    row = '<tr><td>' + msg.severity + '</td>' + '<td>' + msg.service + '</td>' + '<td>' + msg.description+ '</td>' + '<td>' + msg.server + '</td>'+ '<td>' + msg.source + '</td>' + '<td>' + msg.date + '</td>'  + '<td>' + msg.host_address + '</td>' + '<td>' + msg.additional_info + '</td>' + '<td>' + msg.event_type + '</td>' + '</tr>'
    if ($('#alerts tbody tr:first').length > 0){
      $('#alerts tbody tr:first').before(row);
    } else {
      $('#alerts tbody')append(row);
    }
  };

  ws.onclose = function() {
    ws.send("Leaves the chat");
  };

  ws.onopen = function() {
    ws.send("Join the chat");
  };

}); 
```

我不确定出了什么问题？看起来我的代码中有一些根本性的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T10:07:42.137

尝试在不同的线程中运行 EventMachine 和 Sinatra 应用程序

# jquery - 悬停时切换图像

> ID：15552973
> 
> 赞同：0
> 
> 时间：2013-03-21T16:26:35.977
> 
> 标签：jquery

请参阅[此参考 URL](http://www.deanelliott.me/graphictankclients/nyce/roster/michonne-brown/)以更好地了解我的意思，我在描述事物时很垃圾。

基本上，您可以看到，有一个“主要”图像和 5 个“拇指”图像。我的客户想要的是每次有人将鼠标悬停在“拇指”图像之一上时都会改变“主要”图像。

因此，例如，如果有人将鼠标悬停在第三个拇指上，主图像将变为该拇指的完整尺寸版本......

那有意义吗？

我正在使用 Wordpress，所以我不知道是否有人知道有类似功能的插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:32:22.047

只是做这样的事情？

```
$('.thumb').mouseenter(function() {
    $('#main').attr('src' , $(this).attr('src'));
}); 
```

# javascript - 有没有办法在输入 type='text' 上禁用'tab'？

> ID：15552974
> 
> 赞同：11
> 
> 时间：2013-03-21T16:26:39.423
> 
> 标签：javascript, jquery, html, focus

是否有跨浏览器解决方案来禁用输入 type='text' 上的 'tab' ？

```
<input type='text' /> 
```

按“选项卡”将您移动到下一个“可聚焦”组件（例如按钮）

我想改为“标签”做其他事情。例如，即使在谷歌搜索选项卡中，也只是用于自动完成建议的文本，而不是将您移动到下一个可聚焦的组件......

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-21T16:31:17.600

```
document.querySelector('input').addEventListener('keydown', function (e) {
    if (e.which == 9) {
        e.preventDefault();
    }
}); 
```

取决于你所说的跨浏览器，因为上面只支持 IE9（和其他现代浏览器）。

[http://jsfiddle.net/ExplosionPIlls/YVUzz/](http://jsfiddle.net/ExplosionPIlls/YVUzz/)

IE8-用`attachEvent`代替`addEventListener`和`e.keyCode`代替`e.which`，也没有`preventDefault`，但可以用`return false`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T16:34:47.980

非 jQuery 实现会有点像这样 -

HTML 将是

```
<input type="text" id="myField1" onkeydown="return stopTab(event);" /> 
```

和JS如下

```
function stopTab( e ) {
    var evt = e || window.event
    if ( evt.keyCode === 9 ) {
        return false
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T16:31:48.403

是的，检查按下的键是否是 tab，如果是，则返回 false：

```
<form class='noTab'>
    <input type="text" />
    <input type="text" />
    <select>
        <option>a</option>
        <option>b</option>
    </select>
    <textarea>
    </textarea>
</form>

jQuery('.noTab').find('input,select,textarea').keydown(function (e) {
    if (e.which === 9) {
        return false;
    }
}); 
```

jQuery 将允许在旧版浏览器上进行这项工作。

[http://jsfiddle.net/JxMhY/](http://jsfiddle.net/JxMhY/)

在那个小提琴上，它显示了 2 个表单，一个带有“noTab”类，一个没有，因为 tab/shift+tab 对许多表单很有用，但不是一个具有特殊“tab”操作的表单。

# c++ - GSL ODE 解决方案中的指针类型编译时错误

> ID：15552977
> 
> 赞同：0
> 
> 时间：2013-03-21T16:26:52.630
> 
> 标签：c++, pointers, gsl, ode

我正在使用 GSL 示例页面上的代码来尝试求解一个由四个微分方程组成的系统。我一直在努力将五个参数传递给 ODE 系统，并且遇到了一个最终的（我希望如此！）编译时错误。下面是一个片段，给了我错误

```
114:57: error: invalid conversion from ‘int (*)(double, const double*, 
double*, double**, void*)’ to ‘int (*)(double, const double*, double*, 
double*, void*)’ [-fpermissive] 
```

这对应于以 开头的行`gsl_odeiv2_system`：

```
int main()
{
  double t = 0.0;
  double y[4] = { 0.0, 0.0, 1.0, 1.0 };
  int i, s;

  struct pendula_params * info;
  info->m2 = 1.0;
  info->m1 = 1.0;
  info->l1 = 1.0;
  info->l2 = 1.0;
  info->g  = 1.0;

  gsl_odeiv2_system sys = { pendula, jacobian, 4, &info };

  gsl_odeiv2_driver *d =
    gsl_odeiv2_driver_alloc_y_new (&sys, gsl_odeiv2_step_msadams,
                                   1e-3, 1e-8, 1e-8); 
```

对可能发生的事情有任何想法吗？

非常感谢，

马克 C。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:33:16.997

您可以通过比较错误消息中出现的两种函数类型来了解错误是什么。

gsl_odeiv2_system结构期望成员是指向以 a作为第四个参数的[函数的指针。](http://www.gnu.org/software/gsl/manual/html_node/Defining-the-ODE-System.html)但是您的函数将 a作为第四个参数，这使其不兼容。`jacobian``double*``jacobian``double**`

# c - UDP 客户端/服务器块

> ID：15552979
> 
> 赞同：0
> 
> 时间：2013-03-21T16:27:01.293
> 
> 标签：c, udp, block, sendto

这是客户端：

```
int main(int argc, char* argv[]){
    int port;
    int nrb;
    int flag;
    int file;
    struct hostent *host;
    unsigned int len;
    char fileName[50];
    int sock;
    char* buffer;
    int bytesRead;
    char dest[50];
    struct sockaddr_in sv_addr;
    sscanf(argv[1], "%d", &port);
    sscanf(argv[2], "%d", &nrb);
    host=gethostbyname("127.0.0.1");
    printf("%d%d", port, nrb);
    buffer= (char*)malloc(nrb*sizeof(char));
    sock= socket(AF_INET,SOCK_DGRAM, 0);

    memset( &sv_addr,0,sizeof(struct sockaddr_in));

    sv_addr.sin_family = AF_INET;
    sv_addr.sin_port = htons(port);
    sv_addr.sin_addr= *(struct in_addr*)host->h_addr_list[0];

    len= sizeof(sv_addr);

    printf("File name: ");
    scanf("%s", fileName);

    sendto(sock, fileName, sizeof(fileName), 0 , (struct sockaddr*)&sv_addr, len);
    printf("before recvrom");
    recvfrom(sock, &flag, sizeof(int), 0, (struct sockaddr*)&sv_addr,&len);
    flag= htons(flag);
    printf("recvfrom1: %d", flag);
    if(flag==-1){
        printf("The file does not exist.");
        exit(0);
    }

    strcpy(dest,"./received/");
    strcat(dest, fileName);

    file=open(dest, O_WRONLY| O_CREAT | O_TRUNC, 0755); 

    do{
        bytesRead= recvfrom(sock, buffer, nrb, 0, (struct sockaddr*)&sv_addr, &len);
        write(file, buffer, bytesRead);
    }while(bytesRead>0);

    free(buffer);
    close(file);
    close(sock);

    return 0;
} 
```

它在调用之后被阻塞`sendto`，因此它不会打印“在 recvfrom 之前”，但服务器会接收客户端发送的内容，并完成所有工作。这是服务器：

```
int main(int argc, char* argv[]){
    int port;
    unsigned int len;
    int nrb;
    char fileName[50];
    struct sockaddr_in cl_addr;

    sscanf(argv[1], "%d", &port);
    sscanf(argv[2], "%d", &nrb);

    sock=socket(AF_INET, SOCK_DGRAM, 0);
    memset(&sock_addr, 0, sizeof(sock_addr));\

    sock_addr.sin_family= AF_INET;
    sock_addr.sin_port= htons(port);
    sock_addr.sin_addr.s_addr=INADDR_ANY;

    bind(sock, (struct sockaddr*)&sock_addr, sizeof(sock_addr));
    len=sizeof(sock_addr);
    recvfrom(sock, fileName, 256, 0, (struct sockaddr*)&cl_addr,&len);
    printf("recieved: %s\n", fileName);
    int readBytes,file, flag;
    char* buffer;
    flag=0;
    file= open(fileName, O_RDONLY);
    flag=htonl(file);
    if(sendto(sock, &flag, sizeof(int), 0, (struct sockaddr*)&cl_addr,len )<0){
        perror("sendto");
    }
    if(file== -1){
        exit(0);
    }

    buffer=(char*)malloc(sizeof(char)*nrb);
    do{
        memset(buffer, 0, nrb);
        readBytes= read(file, buffer, nrb);
        printf("%s", buffer);
        sendto(sock, buffer, nrb,0, (struct sockaddr*)&cl_addr, len);

    }while(readBytes>0);
    close(file);
    free(buffer);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:02:51.847

发送的消息是 256 字节吗？或更少？虽然 recvfrom() “通常”会返回较短的消息，但不能保证它会。尝试使用 MSG_DONTWAIT 并处理获得 0 字节和 EWOULDBLOCK 的情况。

# java - 如何查看 PreparedStatement 的 SQL 字符串？

> ID：15552980
> 
> 赞同：13
> 
> 时间：2013-03-21T16:27:02.340
> 
> 标签：java, jdbc, prepared-statement

当我们创建 PreparedStatement 时，我们使用“？” 然后将字符替换为设置的参数。

设置好这些参数后，我们如何才能看到最终的 SQL 字符串呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T16:28:23.717

没有最终的 SQL 字符串，带有占位符的版本是实际发送到服务器的版本。当您对准备好的语句执行查询时，数据完全独立地发送。

您可以使用占位符记录字符串，然后分别记录每个数据集。

如果这是您想要的，您的代码可以将它们在日志中组合成一个实际的 SQL 字符串：

```
String query = "SELECT a FROM b WHERE c = ?";

...

pstmt.setString(1, "asd");
logSQL( query, "asd"); 
```

`logSQL`然后实际上会记录`"SELECT a FROM b WHERE c = 'asd'"`. [可能是有人以前实际实施过这个......](https://stackoverflow.com/a/15553105/995876)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T16:33:58.890

最简单的方法（适用于任何 JDBC 驱动程序）是使用[log4jdbc](http://log4jdbc.sourceforge.net)。它是一个包装驱动程序的代理，通过组合 SQL 及其参数并记录它来创建可读的 SQL 字符串，然后将 SQL 和参数传递给底层驱动程序。

# r - 如何复制目录中的某些文件？

> ID：15552982
> 
> 赞同：-2
> 
> 时间：2013-03-21T16:27:06.367
> 
> 标签：r

为了可重现：假设您在一个具有相同扩展名的目录中有 5 个（file1、file2、file3、file4、file5）文件。我想制作每个文件的 4 个副本，所以我将在该目录中有 20 个文件而不是 5 个文件。

程序：

```
 1-Read all files
      2- make 4 copies of file1 and put them in the directory as file1-1,file1-2,.... 
      3- make 4 copies of file2 and put them in the directory as file2-1,file2-2,.... 
      4- do the same for all files 
```

读取文件列表：

```
smith <- list.files("C:\\New folder (3)", "*.envi", full.names = TRUE) 
```

可以在R中做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:41:34.580

你可以使用这个***嵌套的 lapply 循环***（我就是喜欢`lapply`！）并调整`n`你想要的副本数量......

```
f <- list.files( path = "C:\\New folder (3)" , pattern = "*.envi" , full.names = TRUE )
n <- 5
lapply( seq_len( length(f) ) , function(x) { lapply( seq_len( n ) , function( x ,y ){
    file.copy( f[x] , paste0( sub("^([^.]*).*", "\\1", f[x] ) , "-" , y , ".txt" ) )
    } , x = x )
} ) 
```

感谢[这篇文章](http://r.789695.n4.nabble.com/Extracting-File-Basename-without-Extension-tp878817p878843.html)的正确`sub`模式匹配以删除文件扩展名。

# linux - 尝试启动 mongodb 时出错

> ID：15552989
> 
> 赞同：2
> 
> 时间：2013-03-21T16:27:29.593
> 
> 标签：linux, mongodb, centos

我在尝试启动 mongodb 时遇到问题，下面我将向您显示错误：

```
 xxx@xxx [/var/lib/mongo]# /etc/init.d/mongod start
    Starting mongod: all output going to: /var/log/mongo/mongod.log
                                                           [FAILED] 
```

在 mongod.log 上看到我收到以下通知：

```
***** SERVER RESTARTED *****

Thu Mar 21 12:10:20.860 [initandlisten] MongoDB starting : pid=19148 port=27017 dbpath=/var/lib/mongo 64-bit host=srv1.canoa.net
Thu Mar 21 12:10:20.860 [initandlisten] db version v2.4.0
Thu Mar 21 12:10:20.860 [initandlisten] git version: ce2d666c04b4a80af58e8bbb3388b0680e8cfeb6
Thu Mar 21 12:10:20.860 [initandlisten] build info: Linux ip-10-2-29-40 2.6.21.7-2.ec2.v1.2.fc8xen #1 SMP Fri Nov 20 17:48:28 EST 2009 x86_64 BOOST_LIB_VERSION=1_49
Thu Mar 21 12:10:20.861 [initandlisten] allocator: tcmalloc
Thu Mar 21 12:10:20.861 [initandlisten] options: { config: "/etc/mongod.conf", dbpath: "/var/lib/mongo", logappend: "true", logpath: "/var/log/mongo/mongod.log", pidfilepath: "/var/run/mongodb/mongod.pid" }
Thu Mar 21 12:10:20.861 [initandlisten] exception in initAndListen: 10309 Unable to create/open lock file: /var/lib/mongo/mongod.lock errno:13 Permission denied Is a mongod instance already running?, terminating
Thu Mar 21 12:10:20.861 dbexit:
Thu Mar 21 12:10:20.861 [initandlisten] shutdown: going to close listening sockets...
Thu Mar 21 12:10:20.861 [initandlisten] shutdown: going to flush diaglog...
Thu Mar 21 12:10:20.861 [initandlisten] shutdown: going to close sockets...
Thu Mar 21 12:10:20.861 [initandlisten] shutdown: waiting for fs preallocator...
Thu Mar 21 12:10:20.861 [initandlisten] shutdown: lock for final commit...
Thu Mar 21 12:10:20.861 [initandlisten] shutdown: final commit...
Thu Mar 21 12:10:20.861 [initandlisten] shutdown: closing all files...
Thu Mar 21 12:10:20.861 [initandlisten] closeAllFiles() finished
Thu Mar 21 12:10:20.861 [initandlisten] shutdown: removing fs lock...
Thu Mar 21 12:10:20.861 [initandlisten] couldn't remove fs lock errno:9 Bad file descriptor
Thu Mar 21 12:10:20.861 dbexit: really exiting now 
```

引起我注意的是：

`Thu Mar 21 12:10:20.861 [initandlisten] exception in initAndListen: 10309 Unable to create/open lock file: /var/lib/mongo/mongod.lock errno:13 Permission denied Is a mongod instance already running?, terminating`

/var/lib/mongo 里面的文件夹和文件有 0755 权限。

如果有人能告诉我这样做的方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T18:22:06.950

我解决了错误，这是因为我只将`mongod`用户分配给`/var/lib/mongo`而不是其中的文件，以下命令解决了这部分：`chown -R mongod:mongod /var/lib/mongo`.

然后只需要用用户`mongod`使用以下命令修复数据库：`sudo -u mongod mongod -f /etc/mongod.conf --repair`，我终于成功启动了数据库。

我希望这对其他人有帮助。

谢谢大家的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T16:54:51.093

也许上次`mongod`进程被错误终止时，尝试删除`mongo.lock`它应该会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T17:42:35.590

我假设您正在以 root身份运行*service mongodb start/stop/restart/status命令？*.. 使用 sudo 吗？如果我尝试以普通用户身份启动它，我会收到该错误。

# php - 在 PHP 中执行 MongoDB 查找查询

> ID：15552991
> 
> 赞同：3
> 
> 时间：2013-03-21T16:27:37.083
> 
> 标签：php, mongodb

我处于需要能够从 PHP 内部运行直接 mongodb 查询的情况，并且遇到了 execute() 函数的问题。

以下代码将正确执行并从数据库返回结果：

```
$m = new MongoClient();
$db = $m-><dbName>;
print_r($db->execute('db.<collection>.count()')); 
```

但是，如果我用 find() 替换 count() ，我会得到以下结果：

```
Array
(
    [retval] => Array
        (
            [value] => DBQuery: <dbName>.<collection>-> undefined
        )

    [ok] => 1
) 
```

为什么其中一个查询有效，而另一个查询失败？我该如何克服这个问题？我曾考虑编写一些东西，将 MongoDB 查询转换为 PHP Mongo 库使用的必要数组格式，但这将是很多我不想经历的工作。

这与此处提出的问题相同：[如何在 PHP 中访问 MongoDB 配置文件？](https://stackoverflow.com/questions/14763979/how-to-access-mongodb-profile-in-php)——但当时没有给出答案。

这个问题：[PHP MongoDB execute() 锁定集合](https://stackoverflow.com/questions/12683905/php-mongodb-execute-locking-collection)利用了带有 find() 的 execute() 方法，他们说它适用于他们，但我不确定如何。

## 更新：

所以我在 pecl 中更新了 mongo，但这并没有解决任何问题。然而，我也做了一个 YUM 更新，它为 php-pecl-mongo-1.2.12-1.el6.x86_64 提供了一个单独的包更新，使我进入了 1.3.4-1。

现在，`$db->execute('db.<collection>.find())`返回一些东西......但完全不是我所期望的。不是返回一个`MongoCursor`对象，而是返回一个`Array`，虽然它有一个`retval`字段，但执行的查询中没有实际信息。它看起来像这样：

```
Array
(
    [retval] => Array
        (
            [_mongo] => Array
                (
                    [slaveOk] =>
                    [host] => EMBEDDED
                )

            [_db] => Array
                (
                    [_mongo] => Array
                        (
                            [slaveOk] =>
                            [host] => EMBEDDED
                        )

                    [_name] => test
                )

            [_collection] => Array
                (
                    [_mongo] => Array
                        (
                            [slaveOk] =>
                            [host] => EMBEDDED
                        )

                    [_db] => Array
                        (
                            [_mongo] => Array
                                (
                                    [slaveOk] =>
                                    [host] => EMBEDDED
                                )

                            [_name] => test
                        )

                    [_shortName] => hits
                    [_fullName] => test.hits
                )

            [_ns] => test.hits
            [_query] => Array
                (
                )

            [_fields] =>
            [_limit] => 0
            [_skip] => 0
            [_batchSize] => 0
            [_options] => 0
            [_cursor] =>
            [_numReturned] => 0
            [_special] =>
        )

    [ok] => 1
) 
```

如您所见，那里的数据库实际上没有任何内容：我如何获得我的实际行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-16T19:30:36.227

```
$m = new MongoClient();
$db = $m-><dbName>;
print_r($db->execute('db.<collection>.toArray()')); 
```

假设您的数据库名称是 test 并且集合名称是 foo 。

```
print_r($m->test->execute('return db.foo.find().toArray()')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-31T18:59:47.007

我有同样的问题，这是我使用执行的解决方案：

```
$m = new MongoClient();
$db = $m-><dbName>;
print_r($db->execute('return { count : db.<collection>.count() }')); 
```

我的结果：

```
Array
(
    [retval] => Array
        (
            [count] => 10
        )

    [ok] => 1
) 
```

# jquery - 部分渲染但未显示

> ID：15552993
> 
> 赞同：-1
> 
> 时间：2013-03-21T16:27:43.027
> 
> 标签：jquery, ruby-on-rails, partial

海，

我尝试（并成功:-）构建了一个 rails 页面，我可以通过拖放来更新对象。我在表格中显示卡片，如果将它们放入列中，则会更新属性。到目前为止一切顺利，但不幸的是更新没有反映在卡中。我必须重新加载整个站点才能看到它（是的，我使用 <% **=** ... :-) 在我看到的日志中，部分呈现：

```
Started PUT "/cards/6" for 127.0.0.1 at 2013-03-21 16:55:42 +0100
Processing by CardsController#update as JS
Parameters: {"utf8"=>"✓", "authenticity_token"=>"B+xkdpwcIcslidgHQPh+I1n+Qh/MxltM=", "card"=>{"user_id"=>"2", "state_id"=>"1"}, "id"=>"6"}
Card Load (0.1ms)  SELECT "cards".* FROM "cards" WHERE "cards"."id" = ? LIMIT 1  [["id", "6"]]
(0.1ms)  begin transaction
(0.2ms)  UPDATE "cards" SET "user_id" = 2, "updated_at" = '2013-03-21 15:55:42.630330' WHERE "cards"."id" = 6
(3.2ms)  commit transaction
State Load (0.1ms)  SELECT "states".* FROM "states" WHERE "states"."id" = ? LIMIT 1  [["id", 1]]
Rendered cards/_card.html.erb (2.8ms)
Completed 200 OK in 9ms (Views: 3.5ms | ActiveRecord: 3.8ms) 
```

但是在浏览器中，user_id 仍然是 3。所以我尝试也显示一个通知：

```
format.js {render @card, notice: "nanu"} 
```

但是没有成功，通知也没有显示。

我的部分看起来像这样：

```
<%= form_for(@card, remote: true) do |f| %>
  <div id="card_<%= @card.id %>" class="card_mini">
    <h3><%= link_to @card.titel, edit_card_path(@card) %></h3>
    <p><%= @card.beschreibung %></p>
    <%= @card.user_id %> <!-- just to control the rendering -->
    <%= f.text_field :user_id, type: "hidden" %>
    <%= f.text_field :state_id, type: "hidden" %>
    <div class="status"><%= @card.state_id ? State.find(@card.state_id).status : "--" %></div >
    <%= link_to 'Destroy', @card, method: :delete, data: { confirm: 'Are you sure?' }, :class => "aktion" %>
  </div>
<% end %> 
```

你对我有什么提示吗？谢谢，S。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:03:47.340

从评论来看，您必须在`update.js.erb`. 喜欢：

```
$("#<%= dom_id(@card) %>").append("<%=j render 'card/card', card: @card %>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:02:12.420

谢谢你，ck3g，你的帮助！现在它起作用了。我必须学习两件事：

1.  Rails 负责处理 ajax 请求，但不负责 DOM 的更新。这就是 xxx.js.erb 登场的地方。
2.  永远不要在 format.js 之后提出渲染请求

因此，控制器中的正确调用是：

```
respond_to do |format|
  format.html { render action: "whatever you want, or redirect or..." }
  format.js
end 
```

然后 rails 将渲染 action.js.erb（在我的例子中是 update.js.erb）。我在 update.js.erb 中需要的代码是：

```
$("#card_<%= @card.id %>").html('<%=j render @card %>'); 
```

现在在我的日志中，我找到了部分的渲染和 update.js.erb 的渲染。

# javascript - 如何使用 xpath 选择内部子级？

> ID：15552996
> 
> 赞同：1
> 
> 时间：2013-03-21T16:27:55.913
> 
> 标签：javascript, xpath

我在页面中有以下html：

```
<p>foo
<br>bar
<!--additional br elements of variable number-->
<br>https://example.com
<!--additional br elements of variable number-->
<br>baz
</p> 
```

该链接以纯文本显示，我需要链接它。

这不会产生任何匹配：

```
document.evaluate( '//*[contains(text(),"https")]' ,document, 
    null, XPathResult.FIRST_ORDERED_NODE_TYPE, null ).singleNodeValue; 
```

如果我使用`'//text()[contains(.,"https")]'`我会得到整个文本，但不是对我可以修改的 DOM 元素的引用（用于`<a>`在它周围添加一个元素，以便它变得可点击。）

如何选择包含此纯文本 URL 的元素，然后可以对其进行修改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:23:04.580

似乎这`'//p/text()[contains(.,"https")]/..'`将适用于选择`p`元素，然后在`p`的 innerHTML 上进行正则表达式搜索和替换将完成该过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:52:37.917

```
/p/text()[3] 
```

这是我的第一个答案。

# java - 请建议Android WiFi Direct是否支持Multicast Socket通信

> ID：15552998
> 
> 赞同：2
> 
> 时间：2013-03-21T16:27:59.563
> 
> 标签：java, android, android-wifi, wifi-direct, multicastsocket

在 Android 中使用 WiFi Direct 是否可以建立 MulticastSocket 通信？我尝试了很多 S3 和 Note2 设备之间的多播套接字通信，但没有成功。

WiFi Direct 是否支持 Android 中的 MultiCast 通信。如果是，请分享示例代码。我会非常感激你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T06:41:45.550

来自[https://stackoverflow.com/a/10517551/382892](https://stackoverflow.com/a/10517551/382892)

> 根据技术规范，Group Owner 应充当 DHCP 服务器，并为连接的客户端（应充当 DHCP 客户端）提供 IP 地址。每个设备都可以很容易地知道自己的 IP 和 GO 的 IP，因此应该可以使用地址 255.255.255.255 进行广播。
> 
> 关于正确的多播，我不确定，我想这取决于创建的 DHCP 服务器的功能。