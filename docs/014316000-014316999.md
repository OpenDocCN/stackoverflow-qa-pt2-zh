# StackOverflow 问答 14316000-14316999

# tcl - tcl 中是否需要标准输出？

> ID：14316001
> 
> 赞同：1
> 
> 时间：2013-01-14T09:39:46.457
> 
> 标签：tcl, stdout

我对 tcl 很陌生，我希望精通这门语言，所以我想我应该问一下，是否有一些示例代码在代码中有 stdout 而有些只是使用 puts 的原因。这本书似乎没有解释这一点。IDE 是否更新为自动采用标准输出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T10:58:16.797

`puts`如果您不提供频道名称，该命令将写入标准输出（并且从那时起一直以这种方式工作......好吧，从永远开始）。如果你愿意，你可以把它放进去，也可以把它拿出来；没关系，但是如果以一种或另一种方式完成，可能会使事情变得更清楚。让它成为*你的*选择。唯一的强制参数`puts`是要写入的字符串。

在性能方面，省略该值会*稍微*快一些，但您应该忽略这一点，因为与执行 IO 的成本相比，查找的额外成本绝对是微不足道的。表达清晰是选择一个而不是另一个的唯一正当理由。

* * *

不过，有一个案例很重要。如果您想编写默认写入标准输出的代码，但是您可以覆盖它以写入文件（或套接字或管道或......），那么将通道名称存储在变量中要容易得多（即`stdout`当然，默认设置为）。像这样，除了一点之外，您的所有代码都是相同的：通常这不是一个好主意`close stdout`。使用这样的代码很容易避免这种情况：

```
# Also don't want to close stdin or stderr...
if {![string match std* $channel]} {
    close $channel
} 
```

# javascript - 允许使用空字符串淘汰 minLength

> ID：14316002
> 
> 赞同：2
> 
> 时间：2013-01-14T09:39:48.900
> 
> 标签：javascript, knockout.js, knockout-validation

我是淘汰赛的新手，并试图锻炼如何使用验证。我们有以下代码 -

```
 var MyObjectModel = function(myObject){
    var self = this;
    self.myNumber = ko.observable(myObject.number).trimmed();
    self.myNumber.extend({
        minLength: {
            params: 7,
            message: "My Number is too short."
        },
        maxLength: {
            params: 7,
            message: "My Number is too long."
        }
    });

    self.errors = ko.validation.group(self);
} 
```

现在我想更改代码，以便 myObject.number 的长度应该正好是 7，或者该字段应该为空。我该如何进行此更改？

任何帮助，将不胜感激。如果您认为有什么不清楚的地方，请告诉我，以便我详细说明。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T10:11:05.677

您可以对其使用自定义模式：

```
var MyObjectModel = function(myObject){
    var self = this;
    self.myNumber = ko.observable(myObject.number).trimmed();
    self.myNumber.extend({
        pattern: {
            params: '^[0-9]{7}$|^$',
            message: "My Number must have 7 chars or stay empty."
        }
    });

    self.errors = ko.validation.group(self);
} 
```

# lucene - 有没有办法关闭 Lucene 中的所有 Closeables？

> ID：14316004
> 
> 赞同：1
> 
> 时间：2013-01-14T09:40:13.683
> 
> 标签：lucene

索引时，[Lucene 经常会泄露未封闭的 reader、writer 等](https://stackoverflow.com/q/9037528)。

有没有办法在每次迭代结束时关闭 Lucene 中的所有 Closeables？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:40:34.453

恐怕没有。

Lucene 为您提供`IndexSearcher`,`IndexReader`和`IndexWriter`. 不关闭它们中的任何一个只会导致文件描述符泄漏，并且几乎没有办法解决它。虽然有一些技巧：

1.  使用[`SearcherManager`](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/search/SearcherManager.html). 然而，这仍然需要调用`manager.release(s)`并且不适用于作者/读者。
2.  扩展这些类并将`.close()`调用放入终结器中。是的，我知道它很脏。但它有效！
3.  如果您使用的是 Java 7，则可以扩展这些类并[`AutoCloseable`](http://docs.oracle.com/javase/7/docs/api/java/lang/AutoCloseable.html)在 try-with-resources 语句中实现和使用它们，以便自动关闭。理想情况下，所有这些类都应该实现`AutoCloseable`它们自己，并且希望它们在 Lucene 切换到 Java 7 时实现。

# wpf - 数据模板上的样式

> ID：14316006
> 
> 赞同：1
> 
> 时间：2013-01-14T09:40:15.170
> 
> 标签：wpf, styles, datatemplate

我在 WPF 中的 DataTemplates 上使用 Styles 时遇到问题……它看起来很糟糕。假设您定义了一个 DataTemplate：

```
<DataTemplate DataType="{x:Type local:DataSource}">
    <TextBox Style="{StaticResource TextBoxStyle}" Text="{Binding Path=myData}"  />
</DataTemplate> 
```

现在有什么方法可以动态设置这个元素的样式吗？（例如更改应用程序某些部分的背景颜色）我的问题是：

*   如果您在某些父控件中设置样式，它会被忽略，因为数据模板中已经存在样式
*   如果您在父控件上设置属性，它不会被继承，因为样式优先于属性继承

有没有人看到这样做的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:54:18.043

你可以尝试使用 DynamicResource

```
<DataTemplate DataType="{x:Type local:DataSource}">
        <TextBox Style="{DynamicResource TextBoxStyle}" Text="{Binding Path=myData}"  />
</DataTemplate> 
```

然后稍后如果您需要更改任何其他控件中的样式。您可以为该控件声明具有相同键的相同资源。假设您在 ListBox 中使用它。

```
 <ListBox>
        <ListBox.Resources>
            <Style x:Key="TextBoxStyle" TargetType="TextBox">
               <!--define changed style.-->
            </Style>
        </ListBox.Resources>
    </ListBox> 
```

新风格将适用于那里。

# mysql - 我的 sql：如何在子查询中使用通配符？

> ID：14316007
> 
> 赞同：0
> 
> 时间：2013-01-14T09:40:16.837
> 
> 标签：mysql, wildcard, sql-like

例子：

```
SELECT country 
FROM data
WHERE city LIKE 
(SELECT LEFT ('jakartada',7)); 
```

它工作得很好但是如果我给定界符 value:4 ，我必须像这样给出通配符 ---> "%string%" ，我可以在查询中给出通配符吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T09:46:40.053

使用 LIKE，您可以在模式中使用以下两个通配符。

```
Character   Description
%           Matches any number of characters, even zero characters
_           Matches exactly one character
\%          Matches one “%” character
\_          Matches one “_” character 
```

此查询对您有帮助吗？

```
SELECT country 
FROM data
WHERE city LIKE CONCAT ('%', (SELECT LEFT ('jakartada',7)), '%'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T09:52:50.487

为什么你使用子查询？

```
SELECT * FROM `data` WHERE city LIKE 'jakar%' 
```

# android - 有没有办法对我的列表视图进行排序？

> ID：14316009
> 
> 赞同：0
> 
> 时间：2013-01-14T09:40:37.790
> 
> 标签：android, android-listview

我有一个`ListView`. 当我单击其中一个项目时，它会显示另一个`ListView`. 例如，现在我希望对第二个`Listview`进行排序`RPname`。我怎样才能做到这一点？

这是我的活动

```
using Android.App;
using Android.Content;
using Android.OS;
using Android.Widget;
using Itsak.Classes;
using AndroidApplication17;

namespace Itsak
{
[Activity(Label = "Record Points", NoHistory = false)]
public class ActivityRecordPoints : Activity
{
    private RecordPointListAdapter _listAdapter;

    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        // Create your application here
        SetContentView(Resource.Layout.RecordPointListView);

        //Create adapter
        _listAdapter = new RecordPointListAdapter(this);

        //Find the listview reference
        var listView = FindViewById<ListView>(Resource.Id.lstViewRecordPoints);

        //Hook up adapter to ListView
        listView.Adapter = _listAdapter;
        //Wire up the click event
        listView.ItemClick += ListViewItemClick;
    }

    private void ListViewItemClick(object sender, AdapterView.ItemClickEventArgs e)
    {
        //Get item from the list adapter
        var item = _listAdapter.GetItemAtPosition(e.Position);
        //Make a toast with the item name just to show it was clicked
        Toast.MakeText(this, item.StationName, ToastLength.Short).Show();

        // Invoke ActivityComponents
        var components = new Intent(this, typeof(ActivityComponents));

        StartActivity(components);
    }
}
} 
```

这是我的 XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RecordPointLinearLayout"
android:layout_width="fill_parent"
android:layout_height="80px">
<ImageView
android:id="@+id/imageItemRP"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center_vertical" />
<LinearLayout
android:id="@+id/linearTextRP"
android:layout_width="wrap_content"
android:layout_height="fill_parent"
android:orientation="vertical"
android:layout_marginLeft="10px"
android:layout_marginTop="10px">
    <TextView
    android:id="@+id/textTopRPName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" />
    <TextView
    android:id="@+id/textBottomRPCode"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:46:33.223

您可以在适配器初始化中对查询进行排序。使用以下命令对数据库查询进行排序：

```
Cursor c = db.query(DATABASE_TABLE, cols,null, null, null, null,RPName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T09:48:44.350

我认为一般的方法是在您的适配器中创建一个排序方法，对包含的数据进行排序。在 Android 上`ArrayAdapter`确实有一个本机`Sort`方法，您将比较器作为参数传递给它。

所以我个人会创建一个类似的排序方法，它需要在你的.[`Comparison`](http://msdn.microsoft.com/en-us/library/tfakywbh.aspx) `Delegate``List``Adapter`

如果您从数据库中获取数据，请使用数据库中内置的排序方法。

# spotify - Spotify 列表：突出显示下一个/上一个曲目

> ID：14316013
> 
> 赞同：0
> 
> 时间：2013-01-14T09:40:53.330
> 
> 标签：spotify

在我的 spotify 应用程序中，如果我点击播放器播放曲目，曲目会在列表视图中突出显示。但是，当我单击下一个按钮 Spotify 时，列表视图中的下一首曲目没有突出显示，即使它正在播放......突出显示完全丢失。我不知道该怎么做。
如果我只是重新加载应用程序或继续下一个选项卡，它就可以工作。谁能指导我如何解决这个问题？提前致谢 ：-）

```
models.Track.fromURI(track, function(track) {
  models.Album.fromURI(track.album.uri, function(album) {            
      var pl = new views.Player(); 
      pl.context = album;             
      document.getElementById('imag').appendChild ( pl.node );

      var tracklist = new views.List(album);      
      tracklist.node.classList.add("sp-list");
      $("#song1").append(tracklist.node); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:46:52.620

您的代码应该没有任何问题，因为您对视图和视图都使用相同`context`的 代码。事实上，我已经对其进行了测试，它对我有用（请注意，我添加了几行缺失的行）：`Player``List`

```
 var sp = getSpotifyApi(),
    models = sp.require("$api/models"),
    views = sp.require("$api/views"),
    track = "spotify:track:6G0RXhQJGDnjgUdbQfBZRk";

  models.Track.fromURI(track, function(track) {
    models.Album.fromURI(track.album.uri, function(album) {
      var pl = new views.Player();
      pl.context = album;
      document.getElementById("imag").appendChild(pl.node);

      var tracklist = new views.List(album);
      tracklist.node.classList.add("sp-list");
      document.getElementById("song1").appendChild(tracklist.node);
    });
  }); 
```

# windows - Kinect for Windows - PC 不兼容

> ID：14316016
> 
> 赞同：1
> 
> 时间：2013-01-14T09:41:31.370
> 
> 标签：windows, kinect, incompatibility

我在一所应用科学大学工作，我们想购买一些 Kinect 和一些 PC 用于未来的研究和学生项目，我们目前正处于一个阶段，我们想定义要使用的硬件。

我们有一个适用于 Windows 的 Kinect 传感器，我们正在使用戴尔 PC 对其进行测试`(Inspiron 15r 7520; Windows7 64bit, Intel i5-3210M @2.5GHz; 6GB RAM; USB 3.0)`。

我们安装了 1.6 版 Kinect SDK 的所有驱动程序，但 PC 仅偶尔检测到 Kinect 摄像头。

在设备管理器`"Kinect for windows Audio Array Control"`中`"Kinect for Windows Security Control"`出现了，但`"Kinect for Windows"`相机只偶尔出现一次。如果我们插拔 Kinect 10 次（或 20 次或 30 次或 5 次），摄像头检测不到 9 次。然后突然检测到相机一次，我们就可以使用它了。

下次我们必须插拔摄像头 20 或 30（或 2 或 5 或 10）次，直到再次检测到摄像头。然后，我们可以插拔相机 5 或 6 次，每次都会检测到。

每次未检测到相机时，都会弹出一个 Windows USB 信息（黄色三角形），说明未检测到 USB 设备。

我们很确定 Kinect 传感器不是问题，因为它可以在其他 5 台 PC 上运行而没有任何问题。然后我们想到了USB控制器的问题，但是在更换了PC的主板和USB控制器后，错误仍然存​​在。

是否有任何已知的 PC - Kinect 不兼容问题，或者有人能想到这种奇怪行为的原因吗？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:41:20.270

我不确定这是否包括识别相机，但某些 USB 主机控制器和 1.6 版存在已知问题。如果您还没有，请查看“USB 主机控制器兼容性”子标题下的[此MSDN 页面。](http://msdn.microsoft.com/en-us/library/jj663798.aspx)

它确实提到了两个已知存在问题的 USB 3.0 控制器。如果您使用的是“Etron USB 3.0 可扩展主机控制器”或“瑞萨电子 USB 3.0 控制器”，您可能会有答案。

# jquery - 用户输入最大长度处理

> ID：14316017
> 
> 赞同：0
> 
> 时间：2013-01-14T09:41:33.730
> 
> 标签：jquery, input, maxlength

```
 <input type="text" name="user" maxlength="10"> 
```

我有一些代码：

```
$("#user").keyup(function(e){ 
  if($("#user").val().length < 4) {$("#spanUser").html("Too Short !");}  //works 
```

我该怎么写：

```
if($("#user").val().length > 0 < 4)... // between 1 and  4
if($("#user").val().length == 10) {play a beep sound;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:43:48.797

使用 && 运算符..

试试这个

```
var valLength=$("#user").val().length ;  //declare a variable..  which is bit faster than calling a selector again n again

if(valLength > 0  && valLength< 4){  //use && operator here
   //do your stuff
}else if(valLength == 10){  //else if length is 10..
   //play beep sound
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T09:43:52.390

```
if($("#user").val().length > 0  && $("#user").val().length< 4)
{
    //between 1 and  4
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T09:44:32.847

```
$("#user").keyup(function(e){ 
    var elem = $("#user");
  if(elem.val().length < 4) {
      $("#spanUser").html("Too Short !"); //works
   } else if(elem.val().length > 0 && elem.val().length < 4) {
      //Your code here    
    } else if(elem.val().length == 10) {
      //play beep sound    
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T09:44:36.980

你的意思是这样的：

```
var length = $("#user").val().length;
if(length > 0 && length < 4)
{... // between 1 and  4
}
else if(length == 10)
{play a beep sound;} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-14T09:45:01.567

您可以为此应用这种正则表达式

```
^[A-Za-z]{1,4}$ 
```

您可以使用范围量词 {min,max} 指定最小 1 个字符和最大 4 个字符

```
var patt1=new RegExp("^[A-Za-z]{1,4}$");
if(patt1.test($("#user").val())
{
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-14T09:45:29.377

首先，您应该使用`keypress`事件，因为您当前的代码允许某人按住键并获取多个字符。

```
$("#user").keypress(function(e) { 
    var userVal = $("#user").val();
    if (userVal.length >= 1 && userVal.length <= 4) {
        $("#spanUser").html("Too Short !");
    }
    else if (userVal.length == 10) {
        // play beep sound
    }
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-14T09:47:29.433

我认为检查一个条件就足够了。看看你如何拥有一个文本框，长度只能是一个正数。

```
if($("#user").val().length) < 4) {
    //your code.
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-14T09:52:08.910

从用户体验的角度来看，这里的实现存在一些问题。

首先，作为最终用户，我不希望在开始在文本框上书写时看到警告。当用户完成用户文本框时，您最好显示此警报/警告。您应该为此考虑失去焦点事件。

其次，当输入达到最大值时播放声音不是一个好主意。您的用户正在使用的设备可能没有声音功能或已禁用声音设备。甚至用户也可能听力受损。MaxLenght 对于大多数情况应该足够了。如果你想更加强调这个限制，你可以在输入旁边放置一个警告，以某种方式降低可见性。

我知道这不是您问题的答案，但可以以某种方式帮助您。

# php - 如何在外部/独立 PHP 文件（Wordpress 之外）中调用 Wordpress 片段

> ID：14316019
> 
> 赞同：1
> 
> 时间：2013-01-14T09:41:55.600
> 
> 标签：php, wordpress, varnish, esi

我正在尝试设置一个独立的 PHP 文件，该文件能够使用当前安装的插件的简码。该文件将完全位于我当前安装的 Wordpress 之外。

我这样做是因为 ESI 需要调用 php 文件（以及最终的插件短代码功能），因为我的网站正在由 Varnish 处理。

我正在使用的插件：[http ://wordpress.org/extend/plugins/custom-content-by-country/](http://wordpress.org/extend/plugins/custom-content-by-country/)

我目前和不成功的尝试使这项工作：

```
<?php

// This section is experimental and not working (also the 'do_shortcode...' sections below)

include ("../../../wp-load.php");
include ("../../../wp-includes/shortcodes.php");

// end of section

$cwd = getcwd();
$path = substr($cwd, 0, strpos($cwd, 'wp-content/'));
require $path . 'wp-blog-header.php';
global $adrotate_config;

do_shortcode('[CBC country="us" show="y"]'); // not working correctly
echo adrotate_group('1'); // Working Correctly
do_shortcode('[/CBC]'); // not working correctly

do_shortcode('[CBC country="us" show="n"]'); // not working correctly
echo "Hello World!"; // Working Correctly
do_shortcode('[/CBC]'); // not working correctly

?> 
```

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T09:50:06.273

您是否尝试包含在内`wp-blog-header.php`？

您的外部文件：

```
define( 'WP_USE_THEMES', false );        
require('wp-blog-header.php');       

do_shortcode('[CBC country="us" show="n"]'); 
```

我刚刚尝试了以下方法，它奏效了：

外部文件：

```
define( 'WP_USE_THEMES', false );        
require('wp-blog-header.php');       

do_shortcode('[displayshortcode]'); 
```

函数.php 文件：

```
function shortcode_function() {
     echo 'shortcode';
}
add_shortcode('displayshortcode', 'shortcode_function'); 
```

# mysql - 加入两个不同行数的mysql表

> ID：14316020
> 
> 赞同：-1
> 
> 时间：2013-01-14T09:42:02.937
> 
> 标签：mysql, join

我有两张桌子`tasks`和`task_category`：

任务

```
+---------+----------------+-----------+
|   ID    |task_category_id| task_name |
+---------+----------------+-----------+
|    1    |        1       |    task1  |
+---------+----------------+-----------+
|    2    |        1       |    task2  |
+---------+----------------+-----------+
|    3    |        1       |    task3  |
+---------+----------------+-----------+
|    4    |        2       |    task4  |
+---------+----------------+-----------+
|    5    |        2       |    task5  |
+---------+----------------+-----------+
|    6    |        3       |    task6  |
+---------+----------------+-----------+
|    ...  |      ...       |    ...    |
+---------+----------------+-----------+ 
```

任务类别

```
+---------+----------------+
|   ID    |task_category   | 
+---------+----------------+
|    1    |  category_1    |
+---------+----------------+
|    2    |  category_2    |
+---------+----------------+
|    3    |  category_3    |
+---------+----------------+
|    4    |  category_4    |
+---------+----------------+ 
```

我需要像这样输出html表：

```
 <table>
  <tr>
   <td>
   category_1
   </td>
  </tr>
  <tr>
   <td>
   task_1
   </td>
  </tr>
  <tr>
   <td>
   task_2
   </td>
  </tr>
  <tr>
   <td>
   task_3
   </td>
  </tr>
  <tr>
   <td>
   category_2
   </td>
  </tr>
  <tr>
   <td>
   task_4
   </td>
  </tr>      
 </table>

SELECT DISTINCT factor.* , cat.task_name as factors
            FROM task_category as factor
            LEFT JOIN task AS cat ON factor.id = cat.task_category_id 
```

此 mysql 查询返回重复的类别条目...如何连接表以获得如提供的示例中的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T09:47:05.383

```
SELECT task_name, task_category 
FROM task LEFT JOIN task_category 
ON task.category_id=task_category.id 
```

然后你遍历结果来构建你的表。
您将有重复的类别，但您不必将它们写入表中：

```
echo '<table>';
$last_category='DUMMY_NO_CATEGORY';
foreach ($rows as $row) { // <-- Please adapt to your database connection
  if ($row['task_category']!=$last_category) {
    echo '<tr><td>'.$row['task_category'].'</td></tr>';
    $last_category=$row['task_category'];
  }
  echo '<tr><td>'.$row['task_name'].'</td></tr>';
}
echo '</table>'; 
```

（假设 PHP）

# java - 在 Jira 5.1.8 的行为插件 0.5.3 中，我无法将报告字段设置为只读？

> ID：14316021
> 
> 赞同：2
> 
> 时间：2013-01-14T09:42:04.183
> 
> 标签：java, jira

我正在将我的 Jira 从 4.3.2 升级到 5.1.8。我有我的记者字段作为几个转换的只读字段。

我也想让这个记者字段在 Jira 5.1.8 中只读。但是当我为 Jira 5.1.8 即 Behavior Plugin 0.5.3 安装兼容版本时。那么记者字段或任何其他用户选择器不会被设为只读。

这是行为插件的错误。谁能告诉我解决方法？

任何帮助都将是可观的......

提前致谢。

雷努

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T09:51:33.267

**更新**

你是如何应用这个的？在浏览器控制台上运行时，这应该可以完成工作：

```
AJS.$("#reporter-field").attr("disabled", true); 
```

但是当将其输入到字段描述中时，请使用

```
<script type="text/javascript">
  AJS.$(document).ready(function() {
    AJS.$("#reporter-field").attr("disabled", true);
  });
</script> 
```

您可以通过以下方式应用此脚本：

*   转到 `View Field Configuration`并编辑该`reporter`字段并将此代码添加为描述。
*   将其添加到自定义字段描述中。这个自定义字段应该出现在该`reporter`字段所在的每个屏幕上。
*   将其添加到`Announcement Banner`描述中

这将使该`reporter`字段在所有屏幕中都是只读的。要禁用快速编辑选项，请将其添加到`Announcement Banner`说明中：

```
<script type="text/javascript">
  AJS.$(document).ready(function() {
    AJS.$("#reporter-val").removeClass("editable-field inactive");
    AJS.$("#reporter-val .icon-edit-sml").remove();
  });
</script> 
```

**编辑**

要将其限制为仅针对特定转换，您可以：

*   仅将自定义字段添加到特定的转换屏幕并将其添加到脚本的描述中。
*   仅在特定的过渡屏幕上执行脚本：

例如，仅将其应用于`Resolve Issue`：

```
if (AJS.$("#workflow-transition-5-dialog .aui-popup-heading").text().indexOf("Resolve Issue") >= 0) {
    AJS.$("#reporter-field").attr("disabled", true);;
} 
```

* * *

**原帖**

您可以使用 jQuery 轻松实现此目的。在客户提交页面中，单击`Edit`所需的字段，然后在`description`输入 jQuery 代码下，如下所示：

要禁用该字段：

```
<script type="text/javascript">
  AJS.$(document).ready(function() {
    AJS.$("#customfield_10001").attr("disabled", true);
  });
</script> 
```

使其只读：

```
<script type="text/javascript">
  AJS.$(document).ready(function() {
    AJS.$("#customfield_10001").attr("readonly", true);
  });
</script> 
```

**编辑**

我刚刚注意到您打算禁用`reporter`，这不是自定义字段，并且无法添加`description`。

作为一种解决方法，您可以创建一个自定义字段，不管是哪个（如果您的页面中已经有一个，它就可以解决问题），然后`#customfield_10001`换成`reporter`：

```
<script type="text/javascript">
  AJS.$(document).ready(function() {
    AJS.$("#reporter-field").attr("disabled", true);
  });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:23:04.123

您正在尝试在行为插件中将记者字段设置为只读。我想这是插件中的一个错误。我建议您编写一个 groovy 脚本，该脚本将使用 setHelpText(String helptext) 将帮助文本添加到报告字段。帮助文本将是下面的 javascript 。您需要将其作为字符串转义:)

```
<script type="text/javascript">
    AJS.$(document).ready(function() {
        AJS.$("#reporter-field").attr("disabled", true);
    });
</script> 
```

希望这可以帮助

# lwuit - 如何使 TextField 在列表中时可编辑？

> ID：14316028
> 
> 赞同：0
> 
> 时间：2013-01-14T09:42:13.533
> 
> 标签：lwuit, lwuit-textfield, lwuit-list

有一个包含 TextFields 的列表。问题是这些字段不可编辑！以下是代码：

```
 public formConstructor()
    {
       ...
       private Vector vList = new Vector(); // datasource of the list
       private CListCellProduits listRenderer;
       private List list;
       ...
       listRenderer          = new CListCellProduits(20);
       vList.addElement(new String("P001;"));
       vList.addElement(new String("P002;"));
       list             = (new ListUtil(vList)).createList(listRenderer);
       addComponent(list);
       ...
    }

    public class CListCellProduits extends Container implements ListCellRenderer {
        private Label focus = new Label("");
        private Label lData;
        private Champ sortie = new Champ("123", TextArea.NUMERIC);
        private Champ dispo = new Champ("123", TextArea.NUMERIC);
        private int widthCommun;
        private Container cRow1 = new Container(new BoxLayout(BoxLayout.X_AXIS));

        public CListCellProduits(int widthCommun)
        {
            super();
            setLayout(new BoxLayout(BoxLayout.Y_AXIS));

            lData = new Label("");

            sortie.setPreferredW(widthCommun);
            dispo.setPreferredW(widthCommun);
            this.widthCommun = widthCommun;

            cRow1.addComponent(lData);
            cRow1.addComponent(sortie);
            cRow1.addComponent(dispo);
            addComponent(cRow1);
        }
        public Component getListCellRendererComponent(List list, Object value, int index, boolean isSelected)
        {
            Content entry = null;
            if (value instanceof Content)
                entry = (Content)value;
            if (!"".equals(entry.getColumn(0)))
                lData.setText(entry.getColumn(0));
            else
                lData.setText("-");
            lData.setPreferredW(widthCommun);
            list.repaint();

            return this;
        }
        public Component getListFocusComponent(List arg0)
        {
            return focus;
        }
    }

    public class ListUtil {

        private Vector data = new Vector();
        private Content[] contents;

        public ListUtil(Vector vData)
        {
            data = vData;
            contents = new Content[vData.size()];
        }

        public List createList(CListCellProduits renderer)
        {
            CList theList;
            for(int i = 0; i < data.size(); i++)
            {
                contents[i] = new Content(String.valueOf(data.elementAt(i)));
            }
            theList = new CList(contents, renderer);
            return theList;
        }
    }

    public class CList extends List {
        public CList(Object[] data, CListCellProduits renderer)
        {
            super(data);
            setListCellRenderer(renderer);
            setScrollAnimationSpeed(getScrollAnimationSpeed()/4);
        }
    }

public class Champ extends TextField {

    public Champ(String imo)
    {
        super();
        setReplaceMenu(false);
        setInputModeOrder(new String[]{imo});
    }
    public Champ(String imo, int contrainte)
    {
        super();
        setReplaceMenu(false);
        setInputModeOrder(new String[]{imo});
        setConstraint(contrainte);
    }
    protected Command installCommands(Command clear, Command t9)
    {
        return null;
    }
} 
```

在运行时它给出了这样的东西：

![在此处输入图像描述](../Images/918cbcde442dec482701e9f89ec962fa.png)

那么如何使 TextFields 可编辑呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:06:55.300

这在 List 中是**不可能的。**

列表仅用于显示可点击项目的列表，不适用于文本字段。

# jdbc - 在 sonar-runner 和 jenkins 中覆盖的 sonar.jdbc.url 参数

> ID：14316029
> 
> 赞同：0
> 
> 时间：2013-01-14T09:42:16.367
> 
> 标签：jdbc, parameters, jenkins, sonarqube, sonar-runner

我在使用 Jenkins 和 Sonar 时遇到问题。**这是我的设置：托管Jenkins**和**Sonar**的主要 linux 服务器和用于构建项目的 windows vm。windows vm配置为Jenkins **slave**，我定义的job可以成功获取项目源码并执行ant build。但它无法使用声纳运行器运行声纳分析。

引发的错误说“java.sql.SQLException：未选择数据库”，在查看控制台输出时，我看到了两次 jdbc url 参数：

```
... "-Dsonar.jdbc.url=jdbc:mysql://xxx.xx.xx.xxx:3306/sonar?userUnicode=true&characterEncoding=utf8" ... -Dsonar.jdbc.url=jdbc:mysql://xxx.xx.xx.xxx:3306 ... 
```

所以显然第二个参数是使用的参数，并且缺少数据库名称。如果我更改第二个参数并从命令行启动它，它工作正常。

问题是：为什么我的参数被覆盖了，我该如何改变它？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:12:05.940

经过几次参数修改后，我的修复是简单地重新启动 Jenkins salve agent... 由于这不是一个完整的解释，欢迎任何有更多细节的人发布另一个答案。

# methods - 为什么使用 has_many 关联集合时出现“未初始化常量”错误（模型以 s 错误结尾）？

> ID：14316034
> 
> 赞同：0
> 
> 时间：2013-01-14T09:42:36.740
> 
> 标签：methods, ruby-on-rails-3.2, model-associations

在使用 has_many 为其集合提供的任何方法（例如“where”）时，我无法找到为什么在我的视图中出现以下错误：

NameError in History/hist_paquets_mesures#show Showing /var/www-opf/opf/app/views/history/hist_paquets_mesures/show.html.haml 其中第 19 行出现： **未初始化的常量 HistPaquetMesures::HistVersionsPaquetsMesure**

我的（HAML）视图中导致此问题的部分：

```
// I want to make this work
//= @hist_paquet_mesures.hist_versions_paquets_mesures.where(:hist_origine_modification == nil).first.version
// So I debug with this, which is causing the same error
= debug @hist_paquet_mesures.hist_versions_paquets_mesures 
```

**我为在config/initializers/inflections.rb**中使用的特殊单复数名称设置了一个例外：

```
 ActiveSupport::Inflector.inflections do |inflect|
    inflect.irregular 'pub_liste_horizon', 'pub_listes_horizon'
    inflect.irregular 'hist_paquet_mesures', 'hist_paquets_mesures'
    inflect.irregular 'hist_projet_connexe', 'hist_projets_connexes'
    inflect.irregular 'hist_version_paquet_mesures', 'hist_versions_paquets_mesures'
    inflect.irregular 'hist_origine_modification', 'hist_origines_modification'
  end 
```

**复数**、**单数**和**分类**方法在 rails 控制台上按预期工作：

```
"hist_versions_paquets_mesures".singularize  => "hist_version_paquet_mesures"
"hist_versions_paquets_mesures".classify  => "HistVersionPaquetMesures"
"hist_version_paquet_mesures".pluralize  => "hist_versions_paquets_mesures" 
```

我的**app/model/hist_paquet_mesures.rb**模型：

```
class HistPaquetMesures < ActiveRecord::Base
  belongs_to :pub_indice
  belongs_to :pub_liste_horizon
  belongs_to :admin_utilisateur
  has_many :hist_versions_paquets_mesures
end 
```

我的**app/model/hist_version_paquet_mesures.rb**模型：

```
class HistVersionPaquetMesures < ActiveRecord::Base
  belongs_to :hist_paquet_mesures
  belongs_to :pub_modification
  belongs_to :vers_origine, :class_name => 'HistOrigineModification', :foreign_key => 'hist_origine_modification_id'
  # polymorphic association
  has_one :comme_origine, :class_name => 'HistOrigineModification', as: :hist_origine
end 
```

我的**app/controllers/history/hist_paquets_mesures_controller.rb**控制器：

```
class History::HistPaquetsMesuresController < ApplicationController
  def show
    @hist_paquet_mesures = HistPaquetMesures.find_by_id(params[:id])
    respond_with(:history, @hist_paquet_mesures)
  end
end 
```

奇怪的是“s”在错误消息的“HistVersionsPaquetsMesure”中的位置：**HistPaquetMesures::HistVersionsPaquetsMesure**

不应该是 HistPaquetMesures::HistVersionPaquetMesures 吗？为什么我有这个结果？

欢迎任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:02:23.360

尝试在以下位置使用 :class_name 参数：

```
has_many :hist_versions_paquets_mesures, :class_name => HistVersionPaquetMesures 
```

您的协会名称可能有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:07:37.000

这是一个BUG！

我就这个案子开了一个[问题。](https://github.com/rails/rails/issues/8928)看来问题来自 ActiveSupport 库。为了获得类名，它执行“camelize.singularize”。由于我的变形是用下划线定义的，因此预期的结果是不正确的。如果图书馆执行了“singularize.camelize”，它就会起作用。

解决方法：使用骆驼语法添加另一个不规则变形。

# c# - “.”后只写两个字符？

> ID：14316042
> 
> 赞同：0
> 
> 时间：2013-01-14T09:43:07.020
> 
> 标签：c#

在此字符“。”之后的文本框中 我希望用户只输入 2 个这样的字符 `100.00`。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T09:47:23.757

实现[OnTextChanged](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.textbox.ontextchanged.aspx)事件以限制和修改内容

```
private void textBox1_TextChanged(object sender, EventArgs e)
{
     int i = textBox1.Text.IndexOf(".");
     if ((i != -1) && (i == textBox1.Text.Length - 4))
     {
         textBox1.Text = textBox1.Text.Substring(0, textBox1.Text.Length - 1);
         textBox1.SelectionStart = textBox1.Text.Length;
     }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T09:46:29.510

如果您的目标只是数字，请使用：

winforms [http://msdn.microsoft.com/en-us/library/system.windows.forms.numericupdown.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.numericupdown.aspx)

wpf WPF [中好的 NumericUpDown 等效项？](https://stackoverflow.com/questions/382676/good-numericupdown-equivalent-in-wpf)

asp.net [http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/NumericUpDown/NumericUpDown.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/NumericUpDown/NumericUpDown.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T09:49:05.740

您可以在该点之后检查 textbox.text 的长度，以执行此操作。找到'.'的索引 然后如果 textbox.text.length 大于该索引 + 3，则删除最后一个字母。

```
int indexofDot=textbox.Text.indexOf('.');
if(textbox.text.Length>indexofDot+3) {... } 
```

要删除最后一个字母，只需将字符串复制到另一个临时字符串并删除最后一个字符，然后将其返回到 textbox.Text

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T09:53:47.267

您可以使用它的[`TextChanged`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.textchanged.aspx)事件来验证输入：

```
private void textBox1_TextChanged(object sender, EventArgs e)
{
    TextBox txt = (TextBox)sender;
    double d;
    if (!double.TryParse(txt.Text, out d))
    {
        MessageBox.Show("Please enter a valid number");
        return;
    }

    string num = d.ToString();
    string decSeparator = CultureInfo.CurrentCulture.NumberFormat.NumberDecimalSeparator;
    int numDecPlaces = 0;
    int decSepIndex = num.LastIndexOf(decSeparator);
    if (decSepIndex != -1)
        numDecPlaces = num.Substring(decSepIndex).Length;
    if (numDecPlaces > 2)
    {
        MessageBox.Show("Please enter two decimal places at a maximum");
        return;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T10:23:17.027

首先，您需要确定您是否在功能上想要：

*   **防止**即通过使用面具，或
*   **使用正则表达式**验证ie****

 **实施因所选技术而异。

当您选择阻止时，您可以寻找一个[MaskedTextBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.mask.aspx)控件。它在 WinForms 中提供，可以在 WPF 的 Web 上找到。

当您选择验证时，请使用[WPF的](http://weblogs.asp.net/monikadyrda/archive/2009/06/24/wpf-textbox-validation.aspx)[Windows 窗体](http://blog.scosby.com/post/2010/02/11/Validation-in-Windows-Forms.aspx)的最佳实践。**

# .net - TFS 2010 文件/项目结构

> ID：14316043
> 
> 赞同：1
> 
> 时间：2013-01-14T09:43:13.077
> 
> 标签：.net, tfs, tfsbuild

我目前正在使用一个源代码树，它有一个 sln 文件，其中包含所有 WebApp、WinServices、WebServices、控制台应用程序和公共库（业务实体、自定义控件等）。

文件结构非常扁平，如

```
+--Solution Folder
 +----Solution File
 +------WebApp1
 +------WcfService1
 +------WinService1
 +------CommonEntities
 +------WebControls1
 +------ThirdPartyAssemblies 
```

我已经开始为每个 Web 应用程序、wcf 服务等创建单独的解决方案。在此过程中，我能够看到这些解决方案中的通用项目。

我对你们的问题是我如何在 TFS 中构建我的文件系统，以便我可以全面使用通用项目？

我非常乐意遵循单一 TFS 项目方法，为工作项和报告定义每个站点/服务的区域，但我不太热衷于为每个项目分支公共库。那就是说你们是如何克服这些问题的？

我知道人们还建议在一个解决方案中包含公共项目，然后在其他解决方案中引用已编译的二进制文件。我也不是很热衷于这种方法。公平地说，如果这些是唯一的选择，我将采取两种弊端中的较小者，但我很想看看其他人是如何解决它的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T19:20:59.077

M.Radwan 对构建项目的回答中的建议没有考虑 CI（持续集成）和门控构建。我对微软以这种方式推荐事物有疑问。CI 和门控构建当前由工作区映射触发。所以解决方案文件不应该在 Main 的顶部。例如，如果您在解决方案文件夹级别设置了所有解决方案文件，并且为 WebApp1、WcfService1、WinService1、通用实体等设置了单独的门控构建。它们都需要映射主解决方案文件夹并有效地隐藏不需要的文件夹（额外的工作很难维护），当开发人员将代码签入这些文件夹中的任何一个时，比如说 WebApp1，他们将看到一个对话框来选择要运行的门控构建。此对话框将显示所有这些门控构建，因为它们都映射相同的结构，并且开发人员可能会选择 WinService1，因为它可用，并且他们的代码不可能使构建失败，因为 WebApp1 中的任何代码都不在该构建中。因此，可能无法编译的代码刚刚通过了门控构建系统。

对 CI 不利的原因，因为如果您设置了 CI 并且您更改了任何子文件夹中的一个文件，它将触发每个构建设置的 CI 构建，其中 Main 映射到它。您应该做的是将每个解决方案文件及其代码放在它自己的目录中。因此，在他的示例中，MyApp1 的解决方案文件应该位于 MyApp1 文件夹中。这是你可以拥有非常小的和包含的构建，这些构建只能由它自己的代码触发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T16:16:34.430

我不能完全理解你的意思，所以我会试着为你开门，你看过多重解决方案吗？

![在此处输入图像描述](../Images/bec7c0e58141be94f423856f22ddc053.png)

更多信息：

[第 3 章 – 在源代码管理中构建项目和解决方案](http://msdn.microsoft.com/en-us/library/bb668953.aspx)

对于源代码控制结构，有不同的方法

你看过服务器端结构吗？

```
$MyTeamProject1
     /Main                                                              Can contain solution (.sln) files    
            /Source
                        /MyApp1                                         Contains MyApp1.sln file
                                    /Source                             Contain folder for all source
                                                /ClassLibrary1          Contains ClassLibrary1.csproj
                                                /MyApp1Web              Contains Default.aspx
                                    /UnitTests                          Container folder for unit tests
                                                /ClassLibrary1Tests     Contains test project and code
                                                /MyApp1WebTests         Contains test project and code
                        /SharedBinaries                                 Shared binaries e.g. libraries
                        /SharedSource                                   Shared source code           
            /Docs                                                       Contains product documentation
            /Tests                                                      Container for tests
                        /FunctionalTests
                        /PerformanceTests
                        /SecurityTests / 
```

更多信息：

[第 4 章 – 在 Team Foundation 源代码控制中构建项目和解决方案](http://msdn.microsoft.com/en-us/library/bb668954.aspx)

# oracle - Oracle 10 - 查询短路评估

> ID：14316046
> 
> 赞同：2
> 
> 时间：2013-01-14T09:43:30.253
> 
> 标签：oracle, plsql

Oracle 10 是否支持短路评估查询？如果是的话，有一些特殊的钥匙可以使用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T09:48:53.130

您可能在谈论短路评估。

DBMS 具有[基于成本的优化器](http://docs.oracle.com/cd/A58617_01/server.804/a58246/optimiz.htm)。不能保证首先评估哪个条件，也没有特殊的键来激活它。

*请注意，PL/SQL**确实**使用短路评估*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T09:50:54.157

我见过 Oracle 做的唯一短路与 NVL 与 COALESCE 有关。

```
SELECT NVL(1,1/0) FROM DUAL

SELECT COALESCE(1,1/0) FROM DUAL 
```

NVL 评估双方并引发错误，合并不会。

它看起来也`decode`正在做同样的事情：

```
SELECT decode(1,1,9,2,1/0) FROM DUAL 
```

它不评估第二部分，因此避免引发错误。

在 SQL Server 优化器上，我知道查询引擎可以重写这类语句并导致这样的短路示例出现问题，因此作为一般规则 - 你永远不应该依赖逻辑中的短路 - 我不知道是否这同样适用于甲骨文——我怀疑它会的。

# jquery - 找不到具有我动态添加的特定数据破折号属性的元素

> ID：14316053
> 
> 赞同：3
> 
> 时间：2013-01-14T09:43:57.117
> 
> 标签：jquery, jquery-selectors, custom-data-attribute

当我向元素添加 data-itemid 属性时，我无法使用

```
$('someSelector').find( '[data-itemid="' + itemid + '"]' ) 
```

正在做

```
$('#id-of-element-i-added-the-attribute-to').data('itemid') 
```

返回正确的数据。

```
$('#id-of-element-i-added-the-attribute-to').attr('data-itemid') 
```

返回一个空字符串。

`$('someSelector').find( '[data-itemid="' + itemid + '"]' )`适用于最初具有该数据破折号属性的元素，但不适用于动态添加的属性。

我像这样添加属性 `$('#'+listItemId).data('itemid', itemId)`；

如何找到具有动态添加的具有特定值的 data-itemid 属性的元素。

这个选择器不能正常工作（它们返回空数组）：

```
$('*').find( '[data-itemid="' + itemid + '"]' )
$('[data-itemid="' + itemid + '"]' )
$('[data-itemid="16"]' ) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T09:47:22.883

您可以使用`filter`来查找动态添加的`data`属性。试试这个：

```
var $elementsWithDataAttr = $('someSelector .class').filter(function() {
    return $(this).data('itemid') != "";
});
// do something with $elementsWithDataAttr ... 
```

# javascript - 发布预览 - 使用 AJAX 和 Fancybox 传递数据

> ID：14316054
> 
> 赞同：6
> 
> 时间：2013-01-14T09:44:00.127
> 
> 标签：javascript, jquery, ajax, forms, fancybox

我正在尝试进行发布预览，它将出现在新的 Fancybox iframe 中。几周以来，我一直在寻找一些帮助或最佳实践，但找不到。

我的主要问题是将数据从表单（更新数据库之前）传递到 Fancybox 窗口。我的 AJAX 技能很差，所以也许我的问题不是那么难。

请检查代码：

```
$('.preview2').fancybox({
fitToView    : false,
width        : 905,
height        : 505,
autoSize    : false,
closeClick    : false,
openEffect    : 'none',
closeEffect    : 'none',
ajax: {
    type: "POST",
    cache : false,
    url: "preview.php",
    data: $('#postp').serialize()
}
}); 
```

还有一个通话链接：

```
<a class="preview2" data-fancybox-type="iframe" href="preview.php" id="preview2">Preview</a> 
```

我几乎可以肯定 preview.php 文件一切正常，只需发布​​变量并将其打印在正确的位置。

有人可以检查 Fancybox / AJAX 部分吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-15T17:40:06.807

正如我在评论中提到的，您的预览按钮应该通过 ajax 提交表单以获取 POST 预览值（我们将使用`ajax`而不是`iframe`），所以：

```
<a class="preview2" data-fancybox-type="ajax" href="preview.php" id="preview2">Preview</a> 
```

然后，您需要将预览按钮绑定到手动`on("click")`方法以`ajax`首先通过 .... 然后将结果发布到 fancybox 中，例如：

```
$(document).ready(function () {
  $('.preview2').on("click", function (e) {
    e.preventDefault(); // avoids calling preview.php
    $.ajax({
      type: "POST",
      cache: false,
      url: this.href, // preview.php
      data: $("#postp").serializeArray(), // all form fields
      success: function (data) {
        // on success, post (preview) returned data in fancybox
        $.fancybox(data, {
          // fancybox API options
          fitToView: false,
          width: 905,
          height: 505,
          autoSize: false,
          closeClick: false,
          openEffect: 'none',
          closeEffect: 'none'
        }); // fancybox
      } // success
    }); // ajax
  }); // on
}); // ready 
```

见**[DEMO](http://www.picssel.com/playground/jquery/postPreview_15jan13.html)**（随意探索源代码）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-07T14:30:16.273

我不喜欢这个解决方案，所以我会发布我自己的调查。

`.on("click", ...`为什么用 1\. 2\. `e.preventDefault`3\. `$.ajax`4.编写代码`this.href`只是为了在成功时调用 fancybox，里面已经有了[所有这些功能](http://fancyapps.com/fancybox/source/jquery.fancybox.js?v=2.1.5)？

如果您决定使用 ajax 而不是 iframe（如在接受的答案中），您可以简单地添加`type`属性来`fancybox()`调用，因为它正在被检查，然后通过所有其他

```
$('.preview2').fancybox({
    type: "ajax",
    ajax: {
        data:  $('#postp').serialize() 
     // url: "someurl.php" not needed here, it's taken from href
     //                    if you need it, e.g. you have a button, not a link
     //                    use "href" property that overrides everything
     //                    not attribute, cause it's invalid
    }
 // href: "url_to_add_or_override_existing_one",
 // all other effects
 // afterLoad: function () { // other cool stuff }
}); 
```

**编辑**正如[@JFK](https://stackoverflow.com/users/1055987/jfk)指出的那样，这还不够，每次单击链接时都必须获取表单数据，因此`beforeLoad()`需要而不是`data`. 最后：

```
$('.preview2').fancybox({
    type: "ajax",
    beforeLoad: function() {
        this.ajax.data = $('#postp').serialize();
    }
}); 
```

您也可以删除所有`data-*`属性

**[小提琴](http://jsfiddle.net/vladkras/5s2e73tq/3/)**

吻

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T11:28:34.157

我尝试了一种更有趣的方式，用fancybox有效，

在fancybox页面

```
var myvar;
$(document).ready(function(){
    myvar = parent.$("#formvariwant").val();
}); 
```

# c# - 如何在 ListView 中禁用 PageUp/PageDown？

> ID：14316063
> 
> 赞同：0
> 
> 时间：2013-01-14T09:44:42.347
> 
> 标签：c#, .net, winforms, listview, .net-2.0

而不是跳到 ListView 的开头/结尾，我想执行一些其他操作。所以我想禁用使用 PageUp/PageDown 跳过 ListView 并执行一些其他操作。

我以为我可以做某事。像

```
ListView.PreviewKeyDown 
```

并做一个

```
e.Handled = true, 
```

但只能设置

```
e.Handled = true 
```

在

```
ListView.KeyUp. 
```

但是当试图捕捉 PageUp/PageDown 时

```
ListView.Keyup, 
```

选择已经跳到开头或结尾。

那么如何禁用跳转到开头/结尾并执行其他操作呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:50:03.030

请改用[OnKeyDown](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onkeydown.aspx)。

但是，我必须建议不要更改这样的基本内容。在列表视图中按向上/向下翻页时，用户会期待某些事情。覆盖此行为会使您的用户更难使用您的应用程序。

# numpy - c 风格的联合与 numpy dtypes？

> ID：14316066
> 
> 赞同：7
> 
> 时间：2013-01-14T09:45:00.737
> 
> 标签：numpy, union

我对使用有些不均匀数据类型的 numpy 数组很感兴趣。由于 numpy 指定数据必须是同质的，这将通过定义一个充当所有子 dtype 的联合包装器的 super-dtype 来实现。访问子 dtypes 的字段然后给出对基础数据的不同解释。

例如，已经有一些设施可以做到这一点

```
dtype(('|S2', [('x', '|i1'), ('y', '|i1')])) 
```

指的是一个双字节字符串的数组，但第一个和第二个字节也可以通过'x'和'y'字段名称解释为整数。不过，我不知道如何将字段标签分配给两字节字符串。

这可以更通用，以便我们可以在数据上覆盖任意数量的不同字段规范吗？

我的第一次尝试是在 dtype 中指定字段偏移量，但失败并抱怨必须对偏移量进行排序（即非重叠数据）。

```
dtype1 = np.dtype(dict(
   names=['a','b'], 
   formats=['|a2','<i2'], 
   offsets=[0,0])) 
```

另一种技术有效，但很麻烦。在这种技术中，我可以将多个变量定义为相同基础数据的视图，并更改不同变量的 dtype 以让我以不同格式访问数据，即

```
a=np.zeros(3, dtype='<a2')
b=a[:]
b.dtype='<i2' 
```

这让我可以根据我查看的是 a 还是 b，以字符串或整数的形式访问数据。但这是一种操作数据的繁琐方式。理想情况下，我希望能够指定具有任意偏移量的各种不同字段。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T14:47:09.793

自 2011 年 6 月起允许使用 Union dtypes：[https ://github.com/numpy/numpy/pull/94](https://github.com/numpy/numpy/pull/94)

您需要升级到 NumPy 1.7.x 才能使用它。

但是，在以前的版本中，您可以使用覆盖 dtype 构造函数：

```
>>> a = np.zeros(3, dtype=np.dtype(('<i2', [('a', '|a2')])))
>>> a[0] = 0x3456
>>> a['a'][0]
'V4' 
```

这记录在[http://docs.scipy.org/doc/numpy-dev/reference/arrays.dtypes.html#specifying-and-constructing-data-types](http://docs.scipy.org/doc/numpy-dev/reference/arrays.dtypes.html#specifying-and-constructing-data-types)（搜索`(base_dtype, new_dtype)`）。

# javascript - ExtJS JsonStore 添加/删除/排序

> ID：14316069
> 
> 赞同：0
> 
> 时间：2013-01-14T09:45:11.567
> 
> 标签：javascript, extjs, extjs2

我创建了一个依赖于 JsonStore 的列表视图。

此列表实时更新。这意味着我收到要更新的记录，并从商店中删除现有记录。然后我放回更新的那些并执行排序。在每次更新时，这可能意味着删除和替换 5-10 条记录。

我的问题是，如果我将排序操作放入“添加”侦听器中，我会在视图中找到重复项（但不是商店）。我最好的猜测是排序操作使用某种缓存。

我正在使用 ExtJS 2.3.0。关于为什么会发生这种情况的任何想法？

编辑：我正在做的一些示例代码：

这是在 ajax 调用新数据的成功事件中......

```
var updatedRows = [];
var rowData = Ext.decode(response.responseText);
for ( var x = 0; x < rowData.rows.length; x++ ) {
    var index = store.find('rowID', rowData.rows[x].rowID);
    store.removeAt(index);
    // create new record and use store.add()
} 
```

# android - 我应该如何组织我的 Android uiautomator 测试用例？

> ID：14316070
> 
> 赞同：1
> 
> 时间：2013-01-14T09:45:12.450
> 
> 标签：android, user-interface, functional-testing

我正在尝试使用新发布的 android 测试框架 uiautomator 自动化我的大多数 Android 应用程序的 UI 测试用例。

总共有17个左右的测试用例。我想知道我应该组织我的测试代码。或者有什么最佳做法吗？

uiautomator 正在使用 Junit 3。但似乎您一次只能运行一个类，例如：

```
 adb shell uiautomator runtest myApp-ui-testing.jar -c com.myAndroidApp.test.ui.trial.SearchNearbyUITesting 
```

我应该将所有测试用例转储到一个类中还是将它们放在不同的类中并使用 shell 脚本多次运行上述命令？

任何建议将不胜感激：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:48:49.287

```
uiautomator runtest myApp-ui-testing.jar -c com.myAndroidApp.test.ui.trial.SearchNearbyUITesting -c com.myAndroidApp.test.ui.trial.SearchNearbyUITesting2 -c com.myAndroidApp.test.ui.trial.SearchNearbyUITesting3 
```

使用此命令，您可以添加任意数量的类并运行它。

它对我有用。

# asp.net-web-api - 如何强化 ASP.NET WebApi OData 服务以防止滥用？

> ID：14316072
> 
> 赞同：3
> 
> 时间：2013-01-14T09:45:18.987
> 
> 标签：asp.net-web-api, odata

我喜欢 OData，而且我特别高兴它被 ASP.NET Web API 采用。

我创建了一些服务供内部应用程序使用，但从不供公众使用。主要原因是 OData 的开放性似乎很难让“安全”免受滥用。

最具体地说，我担心鉴于运行任意查询的能力，用户可能会表达一个复杂的查询，这会给操作系统带来压力，以至于对所有其他用户的体验都不好。

在 WebApi 控制器中，OData 端点公开如下：

```
public class OrderController
{
    [Queryable]
    public IQueryable<Orders> Get()
    {
         // Compose and return the IQueryable<Orders>
    }
} 
```

这可以完全控制查询的组合和执行过程，但通过复杂的`IQuerable<T>`界面来实现。为用户提供信息的子集变得微不足道，例如附加 a`Where`以仅包括他们有权访问的记录。

是否有`IQueryable<T>`可以包装现有`IQuerable<T>`实例以限制用户可以运行的查询的实现？我最感兴趣的是限制查询的复杂性，但我也希望能够防止用户遍历与他们不应该访问的资源的关联。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T19:11:36.193

我认为您会很高兴在 RTM 中了解到这一点，我们添加了一些选项，让您可以自定义要向用户公开的查询类型。所以你可以这样做，例如：

```
[Queryable(
    AllowedFunctions = AllowedFunctions.AllStringFunctions,
    AllowedLogicalOperators = AllowedLogicalOperators.Equal,
    AllowedOrderByProperties = "ID")] 
```

并以几种常见的方式限制您的查询。如果您想进一步限制查询，可以插入验证钩子，例如`ODataQueryValidator`或通过覆盖属性`ValidateQuery`上的方法。`[Queryable]`

您可以使用我们的夜间构建来访问这些功能，或者自己构建最新的位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T16:49:42.750

而不是使用 Queryable 属性（您缺少），您不能使用此属性，而是手动接受 ODataQueryOptions 参数，这使您可以访问各种过滤器、顶部等选项以允许验证它们。

OData 查询调用的任何函数都可以传递一个参数 ODataQueryOptions，例如：

```
public IQueryable<T> Get(ODataQueryOptions options)`  
{ 
//Use the following vars to fetch the values, and check if
//they are as you expect them to be. etc.  
options.Top.RawValue;
options.Filter.Value;
options.Filter.ApplyTo();
} 
```

在这种情况下，您可以跳过 [Queryable] 属性并使用`ApplyTo`手动将各种查询应用于结果。:)

# android - 无法从活页夹创建光标窗口

> ID：14316082
> 
> 赞同：20
> 
> 时间：2013-01-14T09:46:32.870
> 
> 标签：android, android-cursor

```
1 Cursor cursor = contentResolver.query(MY_URI, new String[] { "first" }, null, null, null);
2 if (cursor != null) {
3   if (cursor.moveToFirst()) {
4       first = cursor.getString(cursor.getColumnIndex("first"));
5       cursor.close();
6   }
7 } 
```

然后在第 3 行（根据日志），我不时遇到这个异常（摘录如下）：

```
android.database.CursorWindowAllocationException: Cursor window could not be created from binder.
    at android.database.CursorWindow.<init>(CursorWindow.java:134)
    at android.database.CursorWindow.<init>(CursorWindow.java:41)
    at android.database.CursorWindow$1.createFromParcel(CursorWindow.java:709)
    at android.database.CursorWindow$1.createFromParcel(CursorWindow.java:707)
    at android.database.CursorWindow.newFromParcel(CursorWindow.java:718)
    at android.database.BulkCursorProxy.getWindow(BulkCursorNative.java:196) 
```

...

任何想法为什么它会抛出这个异常？谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-23T16:07:31.713

我怀疑该错误可能与您没有始终正确关闭游标有关。尝试：

```
Cursor cursor = contentResolver.query(MY_URI, new String[] { "first" }, null, null, null);
if (cursor != null) {
  if (cursor.moveToFirst()) {
      first = cursor.getString(cursor.getColumnIndex("first"));
  }
  cursor.close(); ///// Changed here
} 
```

游标应始终关闭（无论其是否为空）。确保您的应用程序的其余部分也这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T22:04:01.153

Try another thread

```
new Thread(new Runnable(){ public void run(){

...here all code

}}); 
```

. But by Android SDK source codes look like 4.0.2_r1

```
130  private CursorWindow(Parcel source) {
131      mStartPos = source.readInt();
132      mWindowPtr = nativeCreateFromParcel(source);
133      if (mWindowPtr == 0) {
134          throw new CursorWindowAllocationException("Cursor window could not be "
135                  + "created from binder.");
136      }
137      mName = nativeGetName(mWindowPtr);
138      mCloseGuard.open("close");
139  }

```

where **mWIndowPtr** is **Int**

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-23T15:55:45.190

试试这种方式：

> ```
>  if (cursor != null) {
>   cursor.moveToFirst();
>    do {
>    first = cursor.getString(cursor.getColumnIndex("first"));
>   }while(cursor.moveToNext()); 
> ```
> 
> }

# python - thread.start_new_thread：将异常转移到主线程

> ID：14316088
> 
> 赞同：1
> 
> 时间：2013-01-14T09:47:02.617
> 
> 标签：python

> **可能重复：**
> [在 Python 的调用者线程中捕获线程的异常](https://stackoverflow.com/questions/2829329/catch-a-threads-exception-in-the-caller-thread-in-python)

我有一个给定的代码，并且有一个

```
thread.start_new_thread() 
```

正如我刚刚在 python doc 中读到的：“当函数因未处理的异常而终止时，会打印堆栈跟踪，然后线程退出（但其他线程继续运行）。” 但是当（新）函数因异常终止时，我也想终止主线程 - 所以异常应转移到主线程。我怎样才能做到这一点？

编辑：这是我的代码的一部分：

```
def CaptureRegionAsync(region=SCREEN, name="Region", asyncDelay=None, subDir="de"):
    if asyncDelay is None:
        CaptureRegion(region, name, subDir)
    else:
        thread.start_new_thread(_CaptureRegionAsync, (region, name, asyncDelay, subDir))

def _CaptureRegionAsync(region, name, asyncDelay, subDir):
    time.sleep(max(0, asyncDelay))
    CaptureRegion(region, name, subDir)

def CaptureRegion(region=SCREEN, name="Region", subDir="de"):
    ...
    if found:
        return
    else:
        raise Exception(u"[warn] Screenshot has changed: %s" % filename)

CaptureRegionAsync(myregion,"name",2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:11:47.843

**UPD：**这不是最好的解决方案，因为您的问题与我认为的不同：我预计您正在尝试处理您无法修改的线程代码中的异常。但是，我决定不删除答案。

很难从另一个线程中捕获异常。通常应该手动传输。

你能包装一个线程函数吗？如果您将崩溃的工作线程包装到 try...except 中，那么您可能会执行退出主线程所需的操作`except`块（`sys.exit`似乎没用，虽然这让我感到惊讶，但是有`thread.interrupt_main()`and `os.abort()`，虽然您可能需要一些东西更优雅，例如设置主线程定期检查的标志）。

但是，如果你不能封装函数（不能修改第三方代码调用`start_new_thread`），你可以尝试猴子补丁线程模块（或第三方模块本身）。的补丁版本`start_new_thread()`应该包装您担心的功能：

```
import thread
import sys
import time

def t():
    print "Thread started"
    raise Exception("t Kaboom")

def t1():
    print "Thread started"
    raise Exception("t1 Kaboom")

def decorate(s_n_t):
    def decorated(f, a, kw={}):
        if f != t:
            return s_n_t(f, a, kw)
        def thunk(*args, **kwargs):
            try:
                f(*args, **kwargs)
            except:
                print "Kaboom"
                thread.interrupt_main() # or os.abort()
        return s_n_t(thunk, a, kw)
    return decorated

# Now let's do monkey patching:
thread.start_new_thread = decorate(thread.start_new_thread)

thread.start_new_thread(t1, ())
time.sleep(5)
thread.start_new_thread(t, ())
time.sleep(5) 
```

这里有一个异常`t()`原因`thread.interrupt_main()`/ `os.abort()`。应用程序中的其他线程函数不受影响。

# android - 如何防止应用程序自行关闭

> ID：14316091
> 
> 赞同：1
> 
> 时间：2013-01-14T09:47:16.817
> 
> 标签：android

我开发了一个 mdm 服务器（移动设备管理器）和一个 android 应用程序。我设法连接了两个设备。另外，我写了一个安卓应用程序，可以在任何安卓平台上运行。现在，我正在尝试以一种未经我许可无法关闭的方式管理 android 应用程序。换句话说，android 应用程序将从手机启动开始运行，直到我发送关闭自身的命令。

我不知道如何做到这一点。如果你知道，你能分享你的知识吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T09:51:06.123

不可能，您无法阻止用户杀死您的应用程序。（任务杀手等）

但是您可以做的是创建一个服务并通过 startService/stopService 启动/停止它。并使其具有粘性。

Android 可以在资源不足时终止服务，STICKY 将使服务重新启动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T09:54:57.937

在 Android 上不可能有永无止境的应用程序。

每当系统需要更多资源来执行当前前台任务时，它会终止后台进程以释放 RAM 和 CPU。

但是，您可以执行以下操作之一：

**使用服务返回 START_STICKY 或 START_REDELIVER_INTENT**

在您的服务的 onStartCommand() 中，返回[START_STICKY](http://developer.android.com/reference/android/app/Service.html#START_STICKY)或[START_REDELIVER_INTENT](http://developer.android.com/reference/android/app/Service.html#START_REDELIVER_INTENT)

```
public int onStartCommand(Intent intent, int flags, int startId) {
   super.onStartCommand(intent, flags, startId);
   return START_STICKY;
} 
```

**仅在需要时使用 GCM 之类的推送通知服务来触发您的应用程序的启动**

这是一种更省电的方法，因为您的应用在不需要时不会运行。通过集成[GCM](http://developer.android.com/google/gcm/index.html)，您可以通过已安装在每个 Google 批准的 Android 设备（任何带有 Google Play 的设备）上的 Google 服务向您的应用发送推送通知。当设备收到您的通知时，它将启动并通知您设备上的应用程序，从而启动它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T09:52:21.560

众所周知的说法是“预防胜于治疗”，通过这些行我的意思是您应该尝试将可疑指令包含在 try、catch 和 finally 块中。

除非发生意外的缺陷或错误，否则应用程序不会自行关闭。因此，请确保您已包含敏感程序指令，例如连接、查找设备等，并在 finaly 块中应用正确的指令。您的程序将根据您的要求运行。谢谢

# wpf - 用户控件内的 WPF 动画

> ID：14316092
> 
> 赞同：0
> 
> 时间：2013-01-14T09:47:18.203
> 
> 标签：wpf, animation, user-controls

我有一个用户控件，它的作用类似于进度条，并将矩形的宽度设置为对事件的响应。有人以特定的百分比引发事件，矩形宽度从其实际宽度动画到用户控件的实际宽度的百分比。

如果我尝试设置新的宽度，我会得到“*调用线程无法访问这个对象，因为另一个线程拥有它。* ”所以我使用了 Dispatcher.Invoke，它运行良好。

如果我尝试为宽度更改设置动画而不是仅设置它，则会出现问题。然后我在使用调度程序时得到*不同的线程拥有它错误事件。*

所以。这段代码运行良好：

```
bar.Dispatcher.Invoke((Action)delegate { bar.Width = myWidth; }); 
```

但是这段代码没有：

```
DoubleAnimation widthAnimation = new DoubleAnimation();
widthAnimation.From = bar.ActualWidth;
widthAnimation.To = myWidth;
widthAnimation.Duration = new Duration(new TimeSpan(0, 0, 0, 0, 500));
widthAnimation.RepeatBehavior = new RepeatBehavior(1);
bar.Dispatcher.Invoke( (Action)delegate {
    bar.BeginAnimation(Rectangle.WidthProperty, widthAnimation); 
}); 
```

那么..我应该如何在像这样的用户控件上运行动画？

提前致谢 ！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:22:15.140

动画也应该在 UI 线程中创建：

```
bar.Dispatcher.Invoke((Action)delegate
{
    var widthAnimation = new DoubleAnimation
    {
        From = bar.ActualWidth,
        To = myWidth,
        Duration = TimeSpan.FromMilliseconds(500)
    };
    bar.BeginAnimation(Rectangle.WidthProperty, widthAnimation); 
}); 
```

# iphone - 如何在注册页面中进行 JSON 解析

> ID：14316095
> 
> 赞同：-2
> 
> 时间：2013-01-14T09:47:23.693
> 
> 标签：iphone, ios, objective-c

我在 JSON 解析中遇到了麻烦。当我完成代码并运行它时，就会出现问题：

> 选择器“显示警报：带有消息”没有已知的类方法。

以下是我的代码：

```
if (!isValid) {
    [AppDelegate showAlert:@"Alert!" withMessage:strMessage];
}
return isValid;

}

-(void)registerUser{
[Loading startLoading:YES];
NSString *urlString = [NSString stringWithFormat:@"URL=//%@",Access_Token];
//username, password, name, email, country
NSString *parameter = [NSString stringWithFormat:@"firstname=%@&lastname=%@email=%@&username=%@&password=%@&confirmpassword=@",fnameField.text,lnameField.text,eamilField.text,unameField.text,passField.text,cpassField];
NSConnection *conn = [[NSConnection alloc] initWithDelegate:self];
[conn sendRequest:urlString withParaMeter:parameter withMethod:@"POST" withTag:1];
[conn startAsynchronousRequest];

}

-(void)NSConnection:(NSConnection*)conn didFailWithError:(NSError*)error withTag:(int)tag{
NSLog(@"error is:- %@",[error description]);

}

-(void)NSConnection:(NSConnection*)request didSuccessWithItems:(NSDictionary*)dicData withData:(NSData*)data withTag:(int)tag{
NSLog(@"all data is:- %@",dicData);
int returnCode = [[dicData valueForKeyPath:@"process.returncode"] intValue];
NSString *strMessage = @"";
returnCode = 0;

switch (returnCode) {
    case 0:
        break;
    case 1:
        strMessage = @"User not logged in/process Id not available.";
        break;
    case 2:
        strMessage = @"Invalid parameters passed.";
        break;
    case 3:
        strMessage = @"Access token doesn't exist.";
        break;
    default:
        strMessage = @"User name allready exist.";

        break;
}
[AppDelegate showAlert:@"Alert!" withMessage:strMessage];
[Loading stopLoading];
[self.navigationController popViewControllerAnimated:YES]; 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:01:56.663

那是因为您试图在对象 AppDelegate 上调用该方法

但是 AppDelegate 类没有实现它。

因此错误。确保它得到实施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:01:45.293

这个问题有两次机会

1.  您没有`showAlert: withMessage:`在您的方法中声明方法签名`@interface`
2.  您可以将其声明为实例方法，使用类名称调用它。

**修复：**

1.  在你的声明方法签名`@interface`
2.  将您的方法定义为 Class 方法，否则使用您的应用程序委托的实例调用它

# ipad - 限制在 ipad 中从 gmail/yahoo 发送邮件

> ID：14316100
> 
> 赞同：0
> 
> 时间：2013-01-14T09:47:39.207
> 
> 标签：ipad, email, gmail, msn, yahoo-mail

我正在为一个社会设计一个应用程序。在此应用程序中，具有通过单击按钮通过邮件发送特定页面内容的功能。没有设计自定义邮件应用程序。该功能使用 iPad 的本机邮件应用程序来发送邮件。我想限制用户仅从协会的域注册邮件帐户发送邮件，而不是从他/她的个人 gmail/yahoo/msn id 发送邮件。如何从我的应用程序中设置此限制？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:03:27.287

我建议您从您的服务器发送电子邮件，因为您不会（也不应该）能够控制用户的电子邮件应用程序。换句话说，您允许用户在您的应用程序中输入一个或多个电子邮件地址，然后将页面内容放入您从电子邮件服务器发送到指定地址的电子邮件中。

# powershell - Bat 文件或其他方式来创建映射驱动器并重命名它们

> ID：14316105
> 
> 赞同：0
> 
> 时间：2013-01-14T09:48:01.773
> 
> 标签：powershell, batch-file

我已经有一个包含映射驱动器信息的 bat 文件，但是有没有办法让 bat 重命名驱动器，以便在“我的计算机”中如何正确标记它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:59:05.737

您可以像这样使用 comobject（powershell 代码）：

```
$desc=  "MyNetworkshare" # This is the label for your unit
$mDrive =  "H:\" #this is your unit (any letter you have..)
$oShell = new-Object -com Shell.Application
$oShell.NameSpace($mDrive).Self.Name = $Desc 
```

# php - PHP 5.4 编译器的当前状态是什么？

> ID：14316106
> 
> 赞同：0
> 
> 时间：2013-01-14T09:48:08.733
> 
> 标签：php, linux, compiler-construction, obfuscation

我尝试搜索简单的编译器，通过将 PHP 源代码转换为操作码来混淆它们。但似乎许多不再处于积极开发中，例如 PHC、bcompiler。Facebook 开发的 HipHop 看起来很复杂，只能在 64 位操作系统上运行。然后，还有其他需要 .NET 框架。是否有与安装在 Linux 上的 PHP 5.4 一起使用的编译器？

其他形式的涉及 PHP 函数的混淆，例如`eval`会使调试变得复杂，所以，我现在不看这些。

我研究过的一些相关问题：
[你能“编译”PHP代码吗？](https://stackoverflow.com/q/1408417)
[如何在 PHP 5.4 中编译 php 源代码](https://stackoverflow.com/q/13130865)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:33:29.017

Zend Guard 是封闭源代码，但免费。以下比较表可能对您有所帮助： [http ://en.wikipedia.org/wiki/List_of_PHP_accelerators#Feature_Table](http://en.wikipedia.org/wiki/List_of_PHP_accelerators#Feature_Table)

# python - 如何在不登录的情况下使用密钥在 python 中读取谷歌电子表格？

> ID：14316107
> 
> 赞同：4
> 
> 时间：2013-01-14T09:48:20.683
> 
> 标签：python, google-sheets

我已使用该`gspread`库从 Google 文档中读取 CSV 文件，但它首先需要我登录。

```
gc = gspread.login('email','password')
sheetData = gc.open("NSEport").sheet1 
```

我想使用共享电子表格时生成的密钥直接打开电子表格，而无需登录 Google 帐户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-13T17:55:56.447

```
full_doc = gc.open("NSEport")
list_of_worksheets = full_doc.worksheets()
one_I_want = full_doc.get_worksheet(0)  # gets first worksheet 
```

# .net - 如何使用用户名和密码对托管 wcf 服务进行身份验证？

> ID：14316111
> 
> 赞同：1
> 
> 时间：2013-01-14T09:48:42.307
> 
> 标签：.net, wcf

我在服务器中托管了一个 wcf 服务，该服务器在该服务器中运行良好。我尝试添加该服务的服务引用，该服务也成功添加到另一台服务器中，然后尝试验证这些服务，如下所示

```
var engServiceClient = new EngServiceClient();
engServiceClient.ClientCredentials.Windows.AllowedImpersonationLevel = TokenImpersonationLevel.Anonymous;
engServiceClient.ClientCredentials.Windows.ClientCredential.Domain = @"test";
engServiceClient.ClientCredentials.Windows.ClientCredential.UserName = @"hello";
engServiceClient.ClientCredentials.Windows.ClientCredential.Password = @"123wcf";
var getData = engServiceClient.GetActiveEngagements(); 
```

但我收到异常**通过 HTTP 通道传输数据时发生错误（请求被中止：请求被取消。）。**

添加服务引用后生成的配置文件

```
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="EngService" closeTimeout="00:01:00" openTimeout="00:01:00"
                    receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
                    bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                    useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <security mode="Transport">
                        <transport clientCredentialType="Windows" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="https://testwebdemo-t.orioninc.com:8443/Services/2012v2/EngService.svc"
                binding="basicHttpBinding" bindingConfiguration="EngService"
                contract="ServiceReference1.IEngService" name="EngService" />
        </client>
    </system.serviceModel>
</configuration> 
```

如何使用我的用户名和密码验证此服务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T11:41:25.690

首先，在设置 WCF 服务/客户端时，配置 WCF 跟踪以获取更详细和用户友好的错误消息非常有用。有关 WCF 跟踪的更多信息，请参阅[WCF 跟踪](http://msdn.microsoft.com/en-us/library/ms733025.aspx)

您要实施什么样的客户授权？我可以看到您`Windows`为传输安全和`UserName`消息安全指定的类型既多余又令人困惑。

假设您只想要一个简单的用户名和密码授权，而不是通过 https 的 Windows 授权。然后您的安全部分应如下所示：

```
<security mode="TransportWithMessageCredential">
        <transport clientCredentialType="None" />
        <message clientCredentialType="UserName" establishSecurityContext="true"/>
      </security> 
```

然后，您可以使用此代码在客户端指定您的凭据。

```
client.ClientCredentials.UserName.UserName = "username";
client.ClientCredentials.UserName.Password = "password"; 
```

希望能帮助到你

# jquery-mobile - Jquery Mobile Javascript不适用于ajax加载

> ID：14316113
> 
> 赞同：2
> 
> 时间：2013-01-14T09:48:47.160
> 
> 标签：jquery-mobile

在我的 html 页面中有以下标记，以根据是否单击搜索图标来切换搜索栏：

```
<a id="searchIcon" href="/"></a> 

<div id="searchWrapOuter" style="display:none;">
    <div id="searchWrapInner">
        <div id="formContainer">
            <form id="searchForm" action="#">
                <div>
                    <input type="search" name="search-mini" id="search-mini" value="" data-mini="true" />
                </div>
            </form>
        </div>
    </div>
</div> 
```

宽度以下 javascipt/jquery：

```
 $(function() {
        $(document).on("click", "#searchIcon", function () {
            var searchWrapper = $("#searchWrapOuter");
            $(searchWrapper).slideToggle();
            return false;
        });
}); 
```

此代码在直接从 Url 加载的页面上按预期工作。当从一个加载了 Ajax 的链接进入页面时，将页面的内容加载到 DOM 中，并且 DOM 就绪处理程序仅针对第一页执行。

我已阅读有关使用

> $(document).on('pageinit')，而不是 $(document).ready()/$(function()

但是，当从 ajax 链接进入时，我仍然无法让它工作。实现这些事件以使来自 Ajax 链接的代码正常工作的正确方法是什么？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T09:53:05.803

很可能是因为您使用的是 ID 而不是类。jQuery Mobile 不能很好地处理 ID，因为它会将页面缓存到 DOM 中，因此如果您打开一个页面，关闭它，然后返回该页面，您的页面可能会在 DOM 中出现两次（一个可见，一个隐藏/缓存）。因此，当您这样做时，`$("#searchWrapOuter")`您不知道实际处理的是哪个元素（在您的情况下，可能是隐藏的元素）。

解决方案是将您的 ID 更改为类。这不是很直观，但我发现这是使用 jQuery Mobile 的最佳方式。

另请注意文档中可能与您相关的此评论：

> 所有元素的 id 属性不仅在给定页面上必须是唯一的，而且在站点中的各个页面上也必须是唯一的。这是因为 jQuery Mobile 的单页导航模型允许许多不同的“页面”同时出现在 DOM 中。这在使用多页模板时也适用，因为模板上的所有“页面”都是一次加载的。

[http://jquerymobile.com/demos/1.2.0/docs/pages/page-anatomy.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-anatomy.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T09:58:03.730

您可以手动将延迟时间调整为 500ms 和 1s。

```
$(searchWrapper).delay(1000).slideToggle(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-26T21:53:36.087

我的问题是页面 ID 在页面标签下方。因此，一旦我将页面 div 移到它上面，javascript 就会包含在 ajax 页面加载中。在此之前

# php - Composer 没有为包生成 .git 文件夹

> ID：14316115
> 
> 赞同：7
> 
> 时间：2013-01-14T09:48:55.860
> 
> 标签：php, composer-php

这很奇怪，似乎我错过了一些小东西。几天前，当我`composer install`获得带有自己的 Vendor 目录时`.git`，这允许我进行更改并更新我自己的打包存储库。

今天运行后`composer install`，`.git`每个包文件夹里面的目录都不见了！（我认为这可能与从缓存安装有关？）

有人可以尝试重新创建这个吗？

```
$ git clone https://github.com/nathankot/rbhpi
$ cd rbhpi
$ ./composer.phar install
$ cd vendor/rbhpi/core
$ ls -a 
```

从上面的命令中，`.git`我找不到该目录。

我在文档中找不到这个规范，但我确实在[这个常见问题项目](http://getcomposer.org/doc/faqs/should-i-commit-the-dependencies-in-my-vendor-directory.md)中找到了它：

> 安装后删除每个依赖项的 .git 目录

我的问题有什么解决方案吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-14T10:02:34.550

Composer 更喜欢依赖项的 dist 包，这意味着从 github 下载 .tgz 并解压缩它。如果您想要源代码，请安装您的供应商

```
composer install --prefer-source 
```

这将像你想要的那样做一个 git checkout 。

# extjs - 如何在 ExtJS Combobox 中获取所选 displayField 的值

> ID：14316120
> 
> 赞同：5
> 
> 时间：2013-01-14T09:49:23.927
> 
> 标签：extjs, extjs3

如何在 ExtJS 3.4 ComboBox 中获取所选 displayField 的值？getValue() 返回 valueField，但我需要其他。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-05-01T14:26:34.660

combo.getValue() -> valueField
combo.getRawValue() -> displayField

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-16T12:15:48.640

如果是这种情况，

```
displayField : 'countryName',
valueField  : 'countryId', 
```

然后以下函数给出所需的 displayFiled （即使商店中有超过 1 个字段，您也可以获得它们）

```
function getFieldValues(combo, nameIn, nameOut){
     try{
          var r = combo.getStore().find(nameIn,combo.getValue());
          return combo.getStore().getAt(r).get(nameOut);
     }
     catch(err){
          return'error';
     }
} 
```

获取显示字段或存储中的任何其他文件的方法：

```
var item = getFieldValues(Ext.getCmp('combo'), 'countryId', 'countryName'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-12T06:06:22.070

也许你只是用户 store.filter()，对吧？如果是这样，请尝试清除过滤器并再次加载，如下所示：

```
onProvinceSelected: function (com,record,index)
{
    var provinceCode = com.getValue();
    var postGrid = this.lookupReference('postgrid');
    if (provinceCode != 0) {
        postGrid.store.filter('ProvinceCode', provinceCode);
    } else {
        postGrid.store.filters.clear();
        postGrid.getStore().load();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-30T10:31:04.423

我正在使用 ComboBox 的 lastSelectionText 属性；对我来说很好，但它是一个未记录的功能，因此可能随时中断......

```
Ext.override(Ext.form.ComboBox,
{
    getDisplayValue: function () {
        return this.lastSelectionText;
    }
}); 
```

# c# - 从 Web 应用程序中检索原始用户身份

> ID：14316121
> 
> 赞同：2
> 
> 时间：2013-01-14T09:49:28.780
> 
> 标签：c#, web-services, credentials

**问题总结**：在 ASP.net 中，如果您使用凭据调用 Web 服务，如何检索登录到调用 Web 服务的 Web 应用程序的原始用户？

**解释：**

我们有一个 Web 应用程序，它调用一个 Web 服务。两者都是 ASP.NET，目前是 2.0。

用户登录到 Web 应用程序（Windows 身份验证），但要调用 Web 服务，我们使用特定的凭据：

```
 proxy.PreAuthenticate = true;
   proxy.Credentials = new System.Net.NetworkCredential(UserName, Password); 
```

从调用的 Web 服务中，如果我们访问 Web 服务类 ( `WebService.User.Identity`) 的身份属性，它**会获取登录的原始用户**，而不是这些凭据。

但是，当在 Web 服务中切换到联合身份验证和 .NET 4 时，现在 WebService.User.Identity 会检索特殊凭据。

总结起来，使用相同的凭据调用相同的 Web 方法，WebService.User.Identity 返回：

*   .NET 2 + Windows 身份验证：登录用户的原始用户名

*   .NET 4 + 联合身份验证：方法调用中使用的凭据

如何更改它以使原始用户使用联合身份验证登录 .NET 4？

**编辑：** 更多信息，在 .NET 2 中，与用户相关的服务器变量是：

*   AUTH_USER：用户登录
*   LOGON_USER：特殊用户凭据
*   REMOTE_USER：用户登录

正如我所说，在 .NET 4 中，3 个服务器变量是特殊的用户凭据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:58:20.510

嗨，您可以尝试以下代码来获取原始登录用户：

```
 string serverVariable = Request.ServerVariables["AUTH_USER"].ToString();
        string[] authUser = serverVariable.Split('\\');
        string strUserName = authuser[0];
        string strDomain = authUser[1]; 
```

# header - Sinatra 错误“nil:NilClass 的未定义方法 'split'”带有一个简单的 'GET' 请求

> ID：14316123
> 
> 赞同：0
> 
> 时间：2013-01-14T09:49:36.237
> 
> 标签：header, get, split, sinatra

当我执行一个简单的“GET”请求时，Sinatra 给了我这个错误：

```
ERROR NoMethodError: undefined method `split' for nil:NilClass... 
```

我认为错误在 Sinatra 标头哈希旁边：

```
 response.headers["Access-Control-Allow-Origin"] = "*"
 response.headers["Access-Control-Allow-Methods"] = "GET, POST, DELETE, OPTIONS"
 response.headers["Access-Control-Allow-Headers"] = request.env["HTTP_ACCESS_CONTROL_REQUEST_HEADERS"] 
```

这是get方法：

```
get '/login' do

   body(true.to_json)

end 
```

你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:51:48.203

我认为您发布了不完整的错误堆栈跟踪。我想`true.to_json`如果您没有加载所需的 JSON 库，它可能会失败。喜欢

```
require 'json' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:02:57.783

当 URL 返回 nil 时，通常会发生该错误。你确定要`body(true.to_json)`退货吗？

# android - 如何在sql数据库中根据其名称查询单个项目并返回游标？

> ID：14316124
> 
> 赞同：1
> 
> 时间：2013-01-14T09:49:36.913
> 
> 标签：android, sql, android-cursor, sqliteopenhelper

我有一个包含所有食品的数据库。我想在数据库中搜索可变食品并获取其光标。让我们以食物 = 橙子为例。在终端中键入时，以下行给出了正确的结果。

```
SELECT * from food WHERE item = 'Oranges' 
```

为了实现它，我在扩展 SQLiteOpenHelper 的类中创建了一个名为 getOneItem 的方法，如下所示。

```
public Cursor getOneItem(String itemName) {
    return myDataBase.query(TABLE, null, C_NAME+" = " +itemName , null, null, null, null);

} 
```

但是当调用该方法时，我收到错误“没有这样的列：Oranges，编译时

```
SELECT * from table WHERE item = Oranges 
```

为什么计算机在搜索名为 Oranges 的列而不在列内搜索 Oranges？

当我将方法修改为：

```
public Cursor getOneItem(String itemName) {
    return myDataBase.query(TABLE, null, C_NAME+" = '" +itemName +"'", null, null, null, null);

} 
```

我得到 CursorIndexOutOfBoundException, Index -1 requested with size 1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T09:58:36.877

第二个参数不应为空...指定您需要显示的列..

```
 return  myDataBase.query( TABLE, new String[] {
                    C_NAME
                    }, 
                    C_NAME + "= ?" , 
                    new String[] { itemName }, ,         
                    null, 
                    null, 
                    null); 
```

# c# - 如何向文本框添加其他属性

> ID：14316131
> 
> 赞同：0
> 
> 时间：2013-01-14T09:50:08.520
> 
> 标签：c#, wpf, xaml, textbox, wpf-controls

我正在尝试向我的应用程序中的文本框添加几个自定义属性，它将帮助我大大减少所需的代码行数..

用于添加属性的 C# 代码

```
class HorizonTextBoxExt:TextBox
{
    public HorizonTextBoxExt() : base() { }

    public bool BoundToDataGrid
    {
        get { return (bool)this.GetValue(BoundToDataGridProperty); }
        set { this.SetValue(BoundToDataGridProperty, value); }
    }

    public static readonly DependencyProperty BoundToDataGridProperty =
    DependencyProperty.Register(
    "BoundToDataGrid",
    typeof(bool),
    typeof(HorizonTextBoxExt),
    new UIPropertyMetadata(false)
    );
} 
```

> “错误 3 在 Horizo​​nTextBoxExt 类型中找不到可附加属性 'BoundToDataGrid'。

是我在 wpf 设计器的 xaml 风中遇到的错误

```
 <Window x:Class="WpfApplication7.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            xmlns:Local ="clr-namespace:WpfApplication7"
            Title="MainWindow" Height="350" Width="525">
            <Grid>
                <TextBox HorizontalAlignment="Left" Height="63" Margin="90,47,0,0"       TextWrapping="Wrap" Text="TextBox" VerticalAlignment="Top" Width="225" Local:HorizonTextBoxExt.BoundToDataGrid="true" />

           </Grid>
     </Window> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T09:51:38.087

替换这个：

```
<Grid>
    <TextBox /* ... */ Local:HorizonTextBoxExt.BoundToDataGrid="true" />

</Grid> 
```

有了这个：

```
<Grid>
    <Local:HorizonTextBoxExt /* ... */ BoundToDataGrid="true" />

</Grid> 
```

# android - 应用程序分辨率支持

> ID：14316144
> 
> 赞同：0
> 
> 时间：2013-01-14T09:50:58.353
> 
> 标签：android, android-manifest

我创建了一个在 Galaxy S3 720 x 1280 上运行良好但尚不兼容 Nexus 4 768 x 1280 的应用程序，它在 Nexus 4 上看起来失真。如何在清单中限制特定的分辨率大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:55:07.250

我想这就是你要找的。
[关联](http://developer.android.com/guide/topics/manifest/supports-screens-element.html)

# emacs - emacs 未绑定的键绑定

> ID：14316148
> 
> 赞同：3
> 
> 时间：2013-01-14T09:51:08.167
> 
> 标签：emacs, key-bindings

如何清除绑定或编辑 emacs 包提供的绑定？

例如，我有键绑定 Mc 来大写一个单词。
在我安装了一些 3rd 方 emacs 包后，它被更改为 calc-dispatch。

我想像以前一样使用 Mc 作为大写，并将 calc-dispatch 设置为其他内容。

一般来说，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:25:47.793

*键绑定映射按顺序加载。稍后加载的键绑定映射将具有更高的优先级。这就是本地键映射将覆盖全局键映射的原因，因为全局键映射在本地键映射（模式键映射）之前加载。* **这里不对劲。看看菲尔斯的评论。**

我解决此问题的方法是向该指定模式添加一个挂钩以禁用该键绑定并将其重新绑定到该键映射中的其他键。

**首先**，您需要找到定义`M-c`绑定到的键映射名称`calc-dispatch`。它通常是`mode name`和的组合`mode-map`。

例如，python 模式键映射的名称是`py-mode-map`.

**其次**，删除该`M-c`模式下的绑定并使用钩子重新绑定到其他键。

例如，在python模式下，我想删除绑定`C-j`（`py-newline-and-indent`）。并将其重新绑定到`C-i`. 因为我在全球范围内绑定`C-j`到`linum-ace-jump`. 这与你的情况类似。

```
(add-hook 'python-mode-hook 
          #'(lambda () 
              (define-key py-mode-map "\C-j" nil)
              (define-key py-mode-map "\C-i" 'py-newline-and-indent))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T09:59:13.200

你要求的是：

```
(global-set-key (kbd "M-c") 'capitalize-word) 
```

这通常是全局设置单词的方法。

也许如果你想替换两者，你可以试试这个：

```
(substitute-key-definition
           'capitalize-word 'calc-dispatch (current-global-map))

(define-key KEYMAPNAME (kbd "KEYCOMBO") 'FUNCNAME) 
```

用于特定模式。例如：(define-key emacs-lisp-mode (kbd "Mc) 'capitalize-word)。

```
(global-set-key (kbd "M-c") nil) 
```

通常是解除绑定一个键（全局）。

您只需使用谷歌搜索即可轻松找到更多相关信息。

# java - Criteria API 在 Select 语句中创建新对象

> ID：14316149
> 
> 赞同：3
> 
> 时间：2013-01-14T09:51:07.933
> 
> 标签：java, jpa-2.0, jpql, criteria-api

我现在可以使用类似的代码在带有标准 api 的 select 语句中创建新对象

```
CriteriaBuilder cb...
CriteriaQuery<Wrapper> q = cb.createQuery(Wrapper.class);
  Root<SuperClass> c = q.from(SuperClass.class);
  q.select(cb.construct(Wrapper.class,c.get("name"))); 
```

但我想知道是否可以使用标准 api 创建这样的查询

```
select new Wrapper(p.name, type(p)) FROM SuperClass p 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:20:11.960

我不知道我是否正确理解了您的问题，但是您可以使用 HQL 创建类似的东西，至少使用 hibernate。[你可以在这里](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-select)看到更多。

就像你展示的那样。来自 Hibernate HQL 文档：

```
select new Family(mother, mate, offspr)
    from DomesticCat as mother
    join mother.mate as mate
    left join mother.kittens as offspr 
```

希望这可以帮助。

# android - 使用phonegap在android中创建标签栏

> ID：14316152
> 
> 赞同：0
> 
> 时间：2013-01-14T09:51:11.770
> 
> 标签：android, cordova, android-actionbar, tabbar

当我使用actionbar在android（类似于iphone）中使用phonegap创建标签栏时显示以下错误

我想要一个使用 android 版本 3.2 来解决这个问题的示例程序

```
01-12 22:51:12.404: D/dalvikvm(1150): GC_FOR_ALLOC freed 40K, 4% free 6357K/6595K, paused 166ms
01-12 22:51:12.404: I/dalvikvm-heap(1150): Grow heap (frag case) to 6.754MB for 513744-byte allocation
01-12 22:51:12.493: D/dalvikvm(1150): GC_FOR_ALLOC freed <1K, 4% free 6859K/7111K, paused 37ms
01-12 22:51:12.574: D/dalvikvm(1150): GC_CONCURRENT freed <1K, 4% free 6859K/7111K, paused 3ms+2ms
01-12 22:51:12.724: I/CordovaLog(1150): Changing log level to DEBUG(3)
01-12 22:51:12.724: I/CordovaLog(1150): Found preference for useBrowserHistory=true
01-12 22:51:12.734: D/CordovaLog(1150): Found preference for useBrowserHistory=true
01-12 22:51:12.734: I/CordovaLog(1150): Found preference for exit-on-suspend=false
01-12 22:51:12.734: D/CordovaLog(1150): Found preference for exit-on-suspend=false
01-12 22:51:12.764: D/JsMessageQueue(1150): Set native->JS mode to 2
01-12 22:51:12.854: D/DroidGap(1150): DroidGap.init()
01-12 22:51:12.854: D/AndroidRuntime(1150): Shutting down VM
01-12 22:51:12.864: W/dalvikvm(1150): threadid=1: thread exiting with uncaught exception (group=0x40014760)
01-12 22:51:12.894: E/AndroidRuntime(1150): FATAL EXCEPTION: main
01-12 22:51:12.894: E/AndroidRuntime(1150): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.actionbar_demo/com.example.actionbar_demo.MainActivity}: java.lang.NullPointerException
01-12 22:51:12.894: E/AndroidRuntime(1150):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1815)
01-12 22:51:12.894: E/AndroidRuntime(1150):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1831)
01-12 22:51:12.894: E/AndroidRuntime(1150):     at android.app.ActivityThread.access$500(ActivityThread.java:122)
01-12 22:51:12.894: E/AndroidRuntime(1150):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1024)
01-12 22:51:12.894: E/AndroidRuntime(1150):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-12 22:51:12.894: E/AndroidRuntime(1150):     at android.os.Looper.loop(Looper.java:132)
01-12 22:51:12.894: E/AndroidRuntime(1150):     at android.app.ActivityThread.main(ActivityThread.java:4123)
01-12 22:51:12.894: E/AndroidRuntime(1150):     at java.lang.reflect.Method.invokeNative(Native Method)
01-12 22:51:12.894: E/AndroidRuntime(1150):     at java.lang.reflect.Method.invoke(Method.java:491)
01-12 22:51:12.894: E/AndroidRuntime(1150):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
01-12 22:51:12.894: E/AndroidRuntime(1150):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
01-12 22:51:12.894: E/AndroidRuntime(1150):     at dalvik.system.NativeStart.main(Native Method)
01-12 22:51:12.894: E/AndroidRuntime(1150): Caused by: java.lang.NullPointerException
01-12 22:51:12.894: E/AndroidRuntime(1150):     at com.example.actionbar_demo.MainActivity.setContentView(MainActivity.java:77)
01-12 22:51:12.894: E/AndroidRuntime(1150):     at org.apache.cordova.DroidGap.init(DroidGap.java:343)
01-12 22:51:12.894: E/AndroidRuntime(1150):     at org.apache.cordova.DroidGap.init(DroidGap.java:313)
01-12 22:51:12.894: E/AndroidRuntime(1150):     at org.apache.cordova.DroidGap.loadUrl(DroidGap.java:358)
01-12 22:51:12.894: E/AndroidRuntime(1150):     at com.example.actionbar_demo.MainActivity.onCreate(MainActivity.java:32)
01-12 22:51:12.894: E/AndroidRuntime(1150):     at android.app.Activity.performCreate(Activity.java:4397)
01-12 22:51:12.894: E/AndroidRuntime(1150):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
01-12 22:51:12.894: E/AndroidRuntime(1150):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1779)
01-12 22:51:12.894: E/AndroidRuntime(1150):     ... 11 more 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:18:00.827

抱歉，我没有为您的帖子添加评论选项.. 所以...从我看到的情况来看，您正在将 null 传递给某个方法.. 请编辑您的问题并向我们提供导致错误的代码，它将是更容易回答。。

**注意：在第 77 行的 MainActivity 类中查看 MainActivity.setContentView ，它的参数为 null ..所以检查你的代码有什么问题..**

# android - 适用于 Android 的 2D (GFX) 引擎

> ID：14316158
> 
> 赞同：1
> 
> 时间：2013-01-14T09:51:37.593
> 
> 标签：android, 2d, game-engine, 2d-engine

我正在寻找某种适用于 Android 的 2D 图形引擎。在我的特殊情况下，我只想移动一些 Sprite，播放简短的声音，也许播放一些简单的动画。

我知道，我可以自己做所有这些事情，但出于个人原因，我对其他解决方案感兴趣。那么，是否有一个好的、精简、高效且最重要的开源引擎可供人们使用并做出贡献？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:59:29.017

[AndEngine](http://www.andengine.org/)是一个不错的选择。它是免费的，它是开放的（包括源代码），它提供 Box2D 物理、动态壁纸、Aug. Reality（相机游戏）和各种其他东西的扩展 - 市场上已经有大量游戏使用它（没有版税）。

[Cocos-2d](http://code.google.com/p/cocos2d-android/)也是一个不错的选择。

我主要推荐[Unity3d](http://unity3d.com/)，因为它简直太棒了！它有一个很棒的[文档](http://unity3d.com/support/documentation/)和许多[资源和教程](http://unity3d.com/support/resources/)。但对于 Android 开发来说，它并不是免费的。[这](http://unity3d.com/unity/licenses)是价格细节和功能比较。

[还可以在这里](http://www.cuteandroid.com/ten-open-source-android-2d-or-3d-game-engine-for-android-developers)查看一些游戏引擎的列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-15T08:47:58.750

以下引擎多年来一直可用，开发人员正在积极改进它们：

[GDevelop](https://gdevelop-app.com/features)是 Fl​​orian Rival 开发的一款非常优秀[的开源引擎](https://github.com/4ian/GDevelop)，无需进行传统编程即可[导出到 Android 。](http://wiki.compilgames.net/doku.php/gdevelop5/publishing/android_and_ios)主要开发人员有很多方法可以为项目做出贡献。

如果您有兴趣进入游戏行业，[Unity是一个绝佳的选择，但它不是](https://unity.com)[您可以修改的开源项目](https://blogs.unity3d.com/2018/03/26/releasing-the-unity-c-source-code/)。摘自 Aras Pranckevičius 于 2018 年 3 月 26 日发表的 Unity 博客：

> 我们不会将 Unity 作为开源发布。一点儿都没有。（抱歉。）并不是我们不喜欢开源。如果我们认为我们可以摆脱 Unity 并在明天继续开展业务，我们今天会开源所有 Unity，而且我们确实有越来越多的开源项目。但在可预见的将来，主引擎仍将是专有的，并且 C# 参考源代码是根据许可发布的，它只允许您阅读代码，而不能修改它。在您着迷之前，请查阅完整的许可证文本以获取详细信息。

话虽如此，Unity 显然对开发人员[的贡献持开放](https://docs.unity3d.com/Manual/OpenSourceRepositories.html)态度：

> 我们决定开始开源 Unity 组件的目的是帮助我们与您、我们的客户和用户互动。我们希望为您提供具有源访问权限的所有安全性和灵活性。
> 
> 我们始终欢迎协作参与和社区发展。我们希望并期望通过这一举措，我们的社区将能够以以前不可能的方式扩展 Unity。

之后，您可以选择涉及比游戏或图形设计更多的编程：

如果您对传统编程感兴趣，[LibGDX](https://libgdx.badlogicgames.com/)是一个强大[的开源引擎。](https://github.com/libgdx/libgdx)

如果您正在寻找传统编程，[Cocos2d-x](https://cocos2d-x.org/)是另一个[开源选项。](https://github.com/cocos2d/cocos2d-x)

# html - 是否可以让客户在不编写脚本的情况下选择正确的页面翻译？

> ID：14316161
> 
> 赞同：0
> 
> 时间：2013-01-14T09:51:52.983
> 
> 标签：html

我为柏林当地的围棋会议写了一个[网站](http://fuz.su/go)。它被翻译成德文、英文和中文。目前，我使用三个翻译的命名方案`index.<lang>.html`和顶部的导航栏让用户选择。

`index.html`如果可能的话，是否可以在（目前只是一个符号链接）上使用元标记让用户代理自动重定向到使用正确语言的站点？我对既不涉及重新配置服务器也不需要启用 java 脚本的解决方案感兴趣，尽管第一个可能是可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:54:29.720

> 如果可能的话，是否可以在 index.html（目前只是一个符号链接）上使用元标记让用户代理自动重定向到使用正确语言的站点？

不。

如果要自动选择，则需要注意请求中的 Accept 标头。这需要服务器配置或脚本。

没有它，您可以拥有的最好的就是指向用户可以手动选择的文档翻译的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T12:25:59.037

您可以使用 HTTP 内容协商来选择与浏览器发送的语言首选项信息最匹配的版本。所以不用脚本也是可能的，但是你需要在服务器中进行设置以进行协商。

但是，这不是很实用，因为不能依赖语言偏好信息。它主要基于浏览器默认设置，因为很少有用户知道浏览器中的相关设置，更不用说进行适当的设置了。

# workflow - 工作流程 4 跟踪记录查看器

> ID：14316162
> 
> 赞同：0
> 
> 时间：2013-01-14T09:51:54.310
> 
> 标签：workflow, workflow-foundation-4, workflow-foundation

有一个名为“WorkflowMonitor”的应用程序包含在工作流 3 的示例工具包中，它通过以前运行的工作流为您提供了视觉回放。

应用程序所针对的跟踪记录似乎与工作流 4 中的跟踪记录不同，是否有任何人都知道的类似查看器可以让我深入了解工作流 4 中以前运行的工作流？

我真的只是在寻找解释数据的最佳方式，工作流监视器本来是完美的，但现在似乎不兼容。

谢谢，

戴夫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:48:48.080

我对 WF3 几乎一无所知，但根据您的要求，您可能希望从下载[此 WCF/WF 示例包](http://www.microsoft.com/en-us/download/details.aspx?id=21459)开始。

查看*WF\Application\VisualWorkflowTracking*解决方案，了解视觉跟踪系统的运行情况。

另请参阅 WF4 上的 Workflow Tracking Participants 的概念，在这些链接上：

*   [工作流跟踪和追溯](http://msdn.microsoft.com/en-us/library/ee513992%28VS.100%29.aspx)
*   [跟踪 .NET 4 Beta 1 中的参与者](http://blogs.msdn.com/b/endpoint/archive/2009/07/14/tracking-participants-in-net-4-beta-1.aspx)

第一个链接的一个小介绍：

> Windows 工作流跟踪是 .NET Framework 版本 4 的一项功能，旨在提供对工作流执行的可见性。它提供了一个跟踪基础设施来跟踪工作流实例的执行。WF 跟踪基础结构透明地检测工作流，以在执行期间发出反映关键事件的记录。默认情况下，此功能可用于任何 .NET Framework 4 工作流。

示例包包含一堆关于 WF_WCF_Samples\WF\Basic\Tracking 文件夹中跟踪的示例代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T13:47:19.427

@Jota 的回答很好，你应该看看这些例子。视觉跟踪示例虽然有点混乱。我们中的一些人做了一些不同的变化，将工作流的运行与跟踪数据的查看区分开来。

[http://geekswithblogs.net/JoshReuben/archive/2011/06/07/workflow-4.0.1-statemachine](http://geekswithblogs.net/JoshReuben/archive/2011/06/07/workflow-4.0.1-statemachine) —distributed-tracking-visualization.aspx

[https://github.com/PeteGoo/Workflow-Service-Tracking-Viewer](https://github.com/PeteGoo/Workflow-Service-Tracking-Viewer)

和我自己的带有signalR的版本，但基于视觉跟踪示例 [http://panmanphil.wordpress.com/2012/11/05/slides-and-sample-from-the-chippewa-valley-code-camp/](http://panmanphil.wordpress.com/2012/11/05/slides-and-sample-from-the-chippewa-valley-code-camp/)

看起来你手上有一些读物。

# c# - 将函数作为参数传递

> ID：14316167
> 
> 赞同：-1
> 
> 时间：2013-01-14T09:52:11.410
> 
> 标签：c#

我想将函数的返回结果发送到另一个收集它们的函数，然后再打印它们，这是我尝试的方法：

```
 public void CreateAccount()
    {
        AccountList.Add(name(), code());
    }

    public string Name()
    {
        Console.WriteLine("insert your name : ");
        string name = Console.ReadLine();
        return name;
    }

    public int Code()
    {
        Random rnd4 = new Random();
        int fourNumbers = rnd4.Next(1000, 10000);
        return fourNumbers;

    } 
```

我想添加到列表“名称”+“代码”。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T09:54:38.317

`Add`使用该方法一次只能将一个元素添加到列表中。

你可能想要

```
accountList.Add(Name())
accountList.Add(Code()); 
```

我希望你将字符串和整数添加到同一个列表中`accountList`。`List<object>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T09:54:51.093

关于什么：

```
AccountList.Add(Name());
AccountList.Add(Code()); 
```

我建议重命名`Name()`和`Code()`类似的东西`PromptName()`，`PromptCode()`这样他们的意图就更清楚了。

# c# - 从 MDF 数据库中删除记录

> ID：14316169
> 
> 赞同：1
> 
> 时间：2013-01-14T09:52:17.500
> 
> 标签：c#, sql-server, database

我想用 C# 创建简单的应用程序。它应该是 windowsForms 应用程序，将基于服务的数据库添加到项目中。在这个我想制作表（`ID`，，`name`）`second name`并在程序中显示名称`listBox`。当前选择的名称`listBox`将被删除（行将被删除）

谁能帮我怎么做？我已经尝试使用数据集，这是有效的，但是在我关闭应用程序并再次运行它之后，表再次充满了数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T10:19:27.887

要将记录保存到数据库中并将它们加载到列表框中，您可以看到..

*   [保存数据到数据库然后加载数据到列表框](https://stackoverflow.com/questions/13544284/save-data-to-database-then-load-data-to-listbox)

现在，要从列表框中删除记录，您可以像这样编写代码..

```
 protected void removeButton_Click(object sender, EventArgs e)
    {
        if (ListBox1.SelectedItem.Text == null)
        {
            MessageBox.Show("Please select an item for deletion.");
        }
        else
        {
            for (int i = 0; i <= ListBox1.Items.Count - 1; i++)
            {
                if (ListBox1.Items[i].Selected)
                {
                    DeleteRecord(ListBox1.Items[i].Value.ToString());
                }
            }
            string remove = ListBox1.SelectedItem.Text;
            ListBox1.Items.Remove(remove);
        }
    } 
```

要从数据库中删除该记录，也可以像这样使用..

```
private void DeleteRecord(string ID)
{
    SqlConnection connection = new SqlConnection("YOUR CONNECTION STRING");
    string sqlStatement = "DELETE FROM Table1 WHERE Id = @Id";

try
{
    connection.Open();
    SqlCommand cmd = new SqlCommand(sqlStatement, connection);
    cmd.Parameters.AddWithValue("@Id", ID);
    cmd.CommandType = CommandType.Text;
    cmd.ExecuteNonQuery();
}
catch (System.Data.SqlClient.SqlException ex)
{
    string msg = "Deletion Error:";
    msg += ex.Message;
    throw new Exception(msg);
}
finally
{
    connection.Close();
}
} 
```

# c - CleanMem 工具 - 自动释放 Windows 上分配的内存？

> ID：14316170
> 
> 赞同：-1
> 
> 时间：2013-01-14T09:52:20.997
> 
> 标签：c, windows, memory-management

[http://www.pcwintech.com/about-cleanmem](http://www.pcwintech.com/about-cleanmem)

*   有人用过这个工具吗？
*   使用简单的 C 程序执行 malloc，然后在 Windows 上永远休眠，如果运行 cleanmem，我可以看到内存下降。

问题：

*   这个工具是否通过将进程内存移动到系统缓存来产生错觉？（如使用 windows api）
*   如果在使用 C 时是这种情况，每个人都会更喜欢运行 cleanmem，而不是 free（我不同意这一点，'mem leak is mem leak'，除非你调用 free）
*   linux有没有类似的工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:05:34.603

这个程序实际上并没有做任何事情。作者只知道足够危险，但并不真正知道内存在 Windows 中是如何工作的。这可能是您链接的页面上我最喜欢的一行：

> 警告：Windows 中的内存术语完全搞砸了。系统缓存可能意味着其他东西，也许内存缓存更好？作为 Windows 中内存标记的这种令人困惑的方式的证明，在 Windows XP 中，任务管理器中的 PF 使用实际上是提交费用，而不是页面文件使用

如果你真的可以阻止 Windows 写入页面文件，那么你所能做的就是让程序耗尽内存并崩溃。

这条线也很搞笑：

> CleanMem 不会让您的系统更快。CleanMem 所做的再次是帮助避免使用硬盘驱动器上的页面文件，而这正是您减慢速度的原因。包括我自己在内的一些用户已经注意到系统更流畅。也许是安慰剂效应？谁知道。我确实知道 CleanMem 没有任何伤害，并且在一定程度上确实有所帮助。

**编辑**

多一个：

> I think I should also clarify, I am no memory expert.

# django - Django 表单：将生成的 pdf 从表单值附加到电子邮件

> ID：14316173
> 
> 赞同：0
> 
> 时间：2013-01-14T09:52:29.330
> 
> 标签：django, pdf, django-forms

您将如何生成表单值的临时 pdf 并将其附加到电子邮件中？你是在form_view中做的吗？

```
def show_orderform(request):
    if request.method == 'POST':

        form = OrderForm(request.POST)

        if form.is_valid():
            subject = "New order"

            email = form.cleaned_data['email']

            recipients = ['orders@domain.com']

            rendered = render_to_string('emailtemplates/email_body.html', {'form':form , 'form_headline':subject})

            msg = EmailMultiAlternatives(subject, rendered, email, recipients)
            msg.attach_alternative(rendered, "text/html")
            msg.send()            
            return HttpResponseRedirect('/order/completed/')

    else:
        form = OrderForm() # An unbound form

    return render(request, 'forms/orderform.html', {
        'form': form,
    }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:47:38.727

我们使用[pisa](http://www.xhtml2pdf.com/)来生成我们的 pdf。您可以在 form.is_valid() 和将 pdf 附加到电子邮件之间的某个地方执行此操作。

这三个函数已添加到我们的代码库中，因此我们可以从任何地方生成 pdf。

```
import os
import StringIO
import xhtml2pdf.pisa as pisa

def fetch_resources(uri, rel):
    """
    Callback to allow xhtml2pdf/reportlab to retrieve Images,Stylesheets, etc.
    `uri` is the href attribute from the html link element.
    `rel` gives a relative path, but it's not used here.
    """
    if uri.startswith(settings.MEDIA_URL):
        path = os.path.join(settings.MEDIA_ROOT,
            uri.replace(settings.MEDIA_URL, ""))
    elif uri.startswith(settings.STATIC_URL):
        path = os.path.join(settings.STATIC_ROOT,
            uri.replace(settings.STATIC_URL, ""))
    else:
        path = os.path.join(settings.STATIC_ROOT,
            uri.replace(settings.STATIC_URL, ""))

        if not os.path.isfile(path):
            path = os.path.join(settings.MEDIA_ROOT,
                uri.replace(settings.MEDIA_URL, ""))

            if not os.path.isfile(path):
                raise Exception(
                    'media urls must start with %s or %s' % (
                        settings.MEDIA_ROOT, settings.STATIC_ROOT))

    return path

def render_to_pdf(template_src, context_dict):
    """Function to render html template into a pdf file"""
    template = get_template(template_src)
    context = Context(context_dict)
    html = template.render(context)
    result = StringIO.StringIO()

    pdf = pisa.pisaDocument(StringIO.StringIO(html.encode("UTF-8")),
        dest=result,
        encoding='UTF-8',
        link_callback=fetch_resources)
    if not pdf.err:
        response = HttpResponse(result.getvalue(), mimetype='application/pdf')
        return response

    return HttpResponse('We had some errors<pre>%s</pre>' % escape(html))

def write_pdf(template_src, context_dict, filename):
    template = get_template(template_src)
    context = Context(context_dict)
    html  = template.render(context)
    result = open(filename, 'wb') # Changed from file to filename
    pisa.pisaDocument(StringIO.StringIO(html.encode("UTF-8")), result)
    result.close() 
```

# objective-c - 访问 NSMutbleArray 中的所有索引

> ID：14316174
> 
> 赞同：0
> 
> 时间：2013-01-14T09:52:30.863
> 
> 标签：objective-c, xcode, nsmutablearray

有谁知道如何访问所有索引，而不仅仅是某个键的特定索引

IE`[[anArray objectAtIndex:indexPath.row]objectForKey:@"Number"]`

我想要`[[anArray objectAtIndex:ALL ROWS]objectForKey:@"Number"]`

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T09:57:28.920

您可以使用 -valueForKey: NSArray 的方法：

```
NSArray* numbersArray = [anArray valueForKey:@"Number"]; 
```

此方法返回一个包含 -valueForKey: 结果的数组，在数组的每个元素上调用（放置 NSNull 对象以防结果为 nil）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:00:05.437

你可以使用 valueForKey

```
 [array valueForKey:@"key"]; 
```

# c# - 对 Type.GetType 感到困惑

> ID：14316180
> 
> 赞同：1
> 
> 时间：2013-01-14T09:52:59.823
> 
> 标签：c#, generics, reflection

我正在深入阅读C#，但我无法理解本章的段落

> 另一种方法——这一次已经存在于 .NET 1.1 中——值得探索的是`Type.GetType(string)`及其相关 `Assembly.GetType(string)`方法，这两种方法都提供了`typeof`. 您可能希望能够将清单 3.11 输出的每一行提供给`GetType`调用适当程序集的方法，**但不幸的是，生活并不是那么简单。这对于封闭的构造类型来说很好——类型参数只是放在方括号中。但是，对于泛型类型定义，您需要完全删除方括号——否则 `GetType`会认为您的意思是数组类型。清单 3.12 展示了所有这些方法的作用。**

在示例代码作者做了他要求不要做的事情，我相信：

```
string listTypeName = "System.Collections.Generic.List`1";
Type defByName = Type.GetType(listTypeName);

Type closedByName = Type.GetType(listTypeName + "[System.String]"); // did here ? , since he passed the listTypeName + [Type args] , so compiler should think it's array?
Type closedByMethod = defByName.MakeGenericType(typeof(string)); 
```

或者我可能弄错了，任何人都可以用例子详细说明他所说的**“对于泛型类型定义，你需要完全删除方括号 - 否则`GetType`认为你的意思是数组类型”**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T09:56:59.650

`System.Collections.Generic.List`1[System.String]`是封闭的泛型类型的名称。

并且开放泛型类型的名称不是`System.Collections.Generic.List`1[]`but `System.Collections.Generic.List`1`。

这基本上就是本段所说的全部内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T10:01:31.233

通过字符串传递的 .Net 类型名称`[<type1>(,<typeN>)]`用于指示泛型类型/函数参数列表。 `[]`它本身表示数组类型。

此外，任何泛型类型名称都将具有以下结构：

```
`n 
```

在其字符串名称之后指示该类型具有的泛型参数的*数量*。所以：

```
MyNamespace.MyType`1 
```

引用*开放的泛型类型* `MyNamespace.MyType<>`（即没有提供泛型参数）。

然而

```
MyNamespace.MyType`1[System.String] 
```

引用*封闭的泛型类型* `MyNamespace.MyType<string>`。

请注意，还有更多规则需要处理`Type.GetType`- 即您只能在以下任一情况下省略程序集名称（包括公钥令牌，如果适用）：

1.  请求的类型可以在调用程序集中找到
2.  类型请求在`mscorlib`.

因此，许多核心类型可以通过仅具有命名空间限定名称的字符串来指定，包括泛型 - 当类型名称被指定为类型参数时也是如此（如上`System.String`所示）。

# google-maps - Google Maps API - 页面上有 2 个地图 - 两个地图上都有标记点击事件

> ID：14316181
> 
> 赞同：0
> 
> 时间：2013-01-14T09:53:04.677
> 
> 标签：google-maps

我在一页上有两张地图。地图加载正常，但地图上的两个标记仅触发最后一个信息窗口出现。我继续写 bla bla 因为如果我不这样做我就无法提交问题:-)

这是代码：

```
var places = {
    place1 : {
        long : 0.0,
        lat  : 0.0,
        address : 'Address...'
    },
    place2 : {
        long : 0.0,
        lat  : 0.0,
        address : 'Address...'
    }
};

for( var i in places ) {

    mapPositions[i] = new google.maps.LatLng( places[i].long, places[i].lat ),

    myOptions[i] = {
        zoom: 15,
        center: mapPositions[i],
        disableDefaultUI: false,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }

    $maps[i] = new google.maps.Map( document.getElementById( i + "_map_canvas" ), myOptions[i] );

    var title = 'Company ' + i;

    LatLngs[i] = new google.maps.LatLng( places[i].long, places[i].lat );

    markers[i] = new google.maps.Marker({
        position: $maps[i].getCenter(),
        map: $maps[i],
        title: title,
        location: places[i]
    });

    infowindows[i] = new google.maps.InfoWindow({
        content: '<div class="infoWindow">' + 
                    markers[i].title + ' - ' + markers[i].location.address + '<br/>' +
                '</div>'
    });

    google.maps.event.addListener( markers[i], 'click', function() {
        infowindows[i].open( $maps[i], markers[i] );
    });
} 
```

谁能看到出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:34:06.537

Pretty much a closure issue it seems.

[How do JavaScript closures work?](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)

In this part:

```
google.maps.event.addListener( markers[i], 'click', function() {
    infowindows[i].open( $maps[i], markers[i] );
}); 
```

It will remember the last value of i. Just change it to

```
var iLocal = i;
google.maps.event.addListener( markers[i], 'click', function() {
    infowindows[iLocal].open( $maps[iLocal], markers[iLocal] );
}); 
```

This should help solve your closure problem.

# c - C fabs 返回整数

> ID：14316183
> 
> 赞同：2
> 
> 时间：2013-01-14T09:53:08.350
> 
> 标签：c, math.h

我对 C 代码中的 fabs 函数有一个奇怪的问题。我有两个双精度值，我想使用如下代码找到它们差异的绝对值：

```
a = 87.967498;
b = 218.025015;
if (fabs(a-b)<2.0)
...code to execute 
```

的值`fabs(a-b)`是一个int，等于1。我不知道这里有什么问题，我在网上找不到任何东西。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T09:54:21.420

你没有包括`<math.h>`. 将以下行添加到您的其他包括：

```
#include <math.h> 
```

为了更容易找到此类错误，我建议您使用详细的编译器警告（`gcc -Wall -Wextra ...`如果您使用 gcc）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T09:54:25.347

`fabs`可以返回 an的唯一方法`int`是：

*   您的程序使用的声明`fabs`不是`math.h`.
*   您的程序未能包含`math.h`，因此根本没有声明`fabs`。在这种情况下，参数和返回值默认为`int`. 这当然是一个错误，因为实际实现`fabs`不匹配，因此返回的值是无意义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T10:03:53.463

请参阅此代码：

```
#include <math.h>
#include <stdio.h>

int main()
{
    float a = 87.967498;
    float b = 218.025015;
    float diff = a-b;

    printf("diff=%f\nfabs(diff)=%f\n",diff,fabs(diff));
    if (fabs(diff)<2.0) {
        printf("OK\n");
    } else {
        printf("FAIL\n");
    }

    return 0;
} 
```

它产生这个输出：

```
diego@malti:~/tmp$ clang test-math.c -o test-math -lm
diego@malti:~/tmp$ ./test-math 
diff=-130.057510
fabs(diff)=130.057510
FAIL 
```

看？应用程序没问题，差异（218-87=130）不小于 2。

另请参阅当我编译时，我还链接`-lm`以获取数学库。相同的语法适用于 gcc，我只是喜欢使用 clang :)

# jquery - jQuery冲突？

> ID：14316186
> 
> 赞同：0
> 
> 时间：2013-01-14T09:53:39.940
> 
> 标签：jquery, conflict

我正在将以下脚本安装在一个 JS 文件中，该文件包含许多其他用于 Wordpress 博客的脚本。谁能指出一些工具的方向来检查冲突，因为当我将它放在站点构建中时，这个脚本不起作用。（它本身工作正常）。

谢谢...

```
this.randomtip = function(){
    var length = $("#message li").length;
    var ran = Math.floor(Math.random()*length) + 1;
    $("#message li:nth-child(" + ran + ")").show();
};

$(document).ready(function(){   
    randomtip();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:05:22.357

尝试

```
var randomtip = function() {
    // [...]
};

// OR

function() randomtip {
    // [...]
}

// OR

window.randomtip = function() {
    // [...]
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:12:00.483

我不认为有冲突。这只是范围的问题。

如果`randomtip`在范围内，则可以调用它，例如：

```
$(document).ready(function(){   
    function randomtip(){
        var length = $("#message li").length;
        var ran = Math.floor(Math.random()*length) + 1;
        $("#message li:nth-child(" + ran + ")").show();
    };
    randomtip();
}); 
```

或者

```
var MYNAMESPACE = (function() {
    var randomtip = function(){
        var length = $("#message li").length;
        var ran = Math.floor(Math.random()*length) + 1;
        $("#message li:nth-child(" + ran + ")").show();
    }
    ...
    return {
        randomtip: randomtip,
        ...
    };
})();

$(document).ready(function(){   
    MYNAMESPACE.randomtip();
}); 
```

# sql - 在 derby 中更改具有自动递增 1 的表列

> ID：14316187
> 
> 赞同：10
> 
> 时间：2013-01-14T09:53:43.647
> 
> 标签：sql, database, derby

我在 derby Netbeans 中创建了一个表，现在我意识到我需要将一个列自动递增 1，这是一个**主键**。我该怎么做？我尝试了以下代码，但徒劳无功。

```
ALTER TABLE ISSUERECIPT ALTER IRCODE SET INCREMENT BY 1; 
```

我需要再次创建表还是可以通过其他方式？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-14T11:53:18.087

我找到了一个替代解决方案，我从数据库中删除了该列（感谢 vels4j）再次从 netbeans derby UI 添加了该列，如下所示：

![在此处输入图像描述](../Images/689b87a82327ff3c3582621798bbe962.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-12T10:10:03.810

要更改要自动生成的列，代码是

```
ALTER TABLE ISSUERECIPT ALTER IRCODE SET INCREMENT BY 1; 
```

但是必须已经使用 IDENTITY 属性定义了该列（如本[文档](http://db.apache.org/derby/docs/10.2/ref/rrefsqlj81859.html)中所述）。

在大多数情况下（假设您也是），主键列未设置为 IDENTITY。因此，您可能打算将该列更改为 IDENTITY，但这是不可能的。

唯一的方法是删除表并再次创建它，如此[处](https://stackoverflow.com/a/7295716)所述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T10:05:12.957

```
ALTER TABLE ISSUERECIPT  ADD IRCODE INTEGER NOT NULL primary key GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1), 
```

我想可以为你做这些事

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T10:09:34.633

检查这个

```
ALTER TABLE ISSUERECIPT 
ALTER IRCODE INTEGER NOT NULL 
GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1); 
```

如果你的桌子是空的，试试这个

```
ALTER TABLE DROP  PRIMARY KEY your_primaryKeyContrainName ; 
ALTER TABLE ISSUERECIPT DROP COLUMN IRCODE ;
ALTER TABLE ISSUERECIPT ADD COLUMN 
IRCODE PRIMARY KEY INTEGER NOT NULL 
GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1); 
```

**另请参阅：** [Derby ALTER TABLE 语法](http://db.apache.org/derby/docs/10.1/ref/rrefsqlj81859.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T10:00:59.900

ALTER TABLE tbl ADD id INT PRIMARY KEY AUTO_INCREMENT;

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-22T05:19:41.403

ALTER TABLE 语句无法将 IDENTITY 列添加到表中

如果您的表是空的或不在生产中。删除表并再次创建，例如：

```
DROP TABLE CUSTOMER;
CREATE TABLE CUSTOMER
(CUSTOMER_ID INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 
1),
FIRSTNAME VARCHAR(100) NOT NULL,VARCHAR(100),
PREFERRED_ID INTEGER,
CONSTRAINT primary_key PRIMARY KEY (CUSTOMER_ID)
); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-14T09:57:44.753

试试这个 ：

```
alter table ISSUERECIPT modify column IRCODE int(4) auto_increment 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-06-15T09:33:34.617

再次重新创建表，请参见下面的示例：

```
CREATE TABLE students
(
id INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),
name VARCHAR(24) NOT NULL,
address VARCHAR(1024),
CONSTRAINT primary_key PRIMARY KEY (id)
) ; 
```

# java - OSGi：将服务重构为声明式服务

> ID：14316189
> 
> 赞同：1
> 
> 时间：2013-01-14T09:53:50.137
> 
> 标签：java, spring, osgi, apache-felix, eclipse-virgo

我正在与 OSGi 取得联系，现在我有点困惑。我正在使用混合服务模型，这意味着声明性服务和低级 API 的混合。

考虑以下放置在 OSGi-INF/component.xml 下的部分声明：

```
<property name="canHandle" type="String" value="Some kind of stuff"/>
<service>
  <provide interface="foo"/>
</service> 
```

还有一个

```
<property name="canHandle" type="String" value="Some other Stuff"/>
<service>
  <provide interface="foo"/>
</service> 
```

在另一个包中，我有这样的东西：

```
bar.createSomething(String type){

ServiceReference[] services FrameworkUtil.getBundle(getClass()).getBundleContext()
                .getAllServiceReferences("foo");
for (ServiceReference s : services) {
    if (type.equals(s.getProperty("canHandle")){
        Foo foo = (Foo)FrameworkUtilgetBundle(getClass()).getBundleContext().getService(s);
foo.execute(); 
```

长话短说，ia 有一个具有多个实现的服务接口，并且在运行时我使用的是一个将字符串与属性匹配的接口。那么我怎样才能只使用声明性服务来处理这种情况呢？

我们正在使用 Virgo，所以如果可以使用 spring，这也是一个选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T10:01:20.930

您可以使用`<reference>`元素上的目标过滤器来执行此操作。或者，使用 bnd 注释：

```
@Reference(target = "(canHandle=blah)")
public void setFoo(Foo foo) {
    // ...
} 
```

现在即使有多个`Foo`服务实例可用，也只有匹配过滤器的实例`(canHandle=blah)`才会被注入到您的组件中。

**更新**

已澄清要匹配的值是静态未知的。在这种情况下，不能使用静态过滤器。但是您仍然可以使用声明式服务并手动检查服务属性的值，例如：

```
@Reference(multiple = true, dynamic = true)
public void setFoo(Foo foo, Map<String,Object> serviceProps) {
    if ("value".equals(serviceProps.get("canHandle"))) {
        // ...
    }
} 
```

请记住，您现在可能会获得多个匹配的实例。

# google-places-api - Google Places Api 获取类别 ID

> ID：14316197
> 
> 赞同：1
> 
> 时间：2013-01-14T09:54:23.403
> 
> 标签：google-places-api

如何获取地点类别或类别 ID？
这里所有类别和子类别

```
http://support.google.com/places/bin/answer.py?hl=en&topic=1656882&answer=1722104#category 
```

但是地方 api 不返回 cat_id

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:57:21.247

Places API 有一组稍微不同的[“类型”](https://developers.google.com/places/documentation/supported_types)，它们在 API 的[Place Details](https://developers.google.com/places/documentation/details#PlaceDetailsResponses)响应中返回。

如果您通过 API 添加新地点，则应使用这些类型，而批量上传的数据应使用您提到的帮助文章中的相应代码。

# ios - iOS：回溯中的 + 数值（在崩溃日志中）

> ID：14316201
> 
> 赞同：11
> 
> 时间：2013-01-14T09:54:33.743
> 
> 标签：ios, crash-reports, backtrace

我正在尝试学习如何更好地理解崩溃日志并且到目前为止做得很好。我注意到[苹果技术说明 TN2151 中没有解释的](http://developer.apple.com/library/ios/#technotes/tn2151/_index.html)部分。这是回溯每个部分末尾的 + 数值。

这是一个例子：

```
6   UIKit    0x38bf3e7c -[UIViewController window:willAnimate:duration:] **+ 704** 
```

加粗的部分是什么意思？

非常感谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-14T10:12:24.083

该数字代表从方法的入口点到导致崩溃的指令的字节偏移量。

查看[这个线程](https://stackoverflow.com/questions/6462214/how-to-read-objective-c-stack-traces)，描述如何阅读和理解堆栈跟踪。 [Ray Wenderlich 关于在 iOS 下处理应用程序崩溃的教程](http://www.raywenderlich.com/10209/my-app-crashed-now-what-part-1)也是一个很好的来源。

# r - 并行化 R 脚本

> ID：14316203
> 
> 赞同：2
> 
> 时间：2013-01-14T09:54:39.403
> 
> 标签：r, parallel-processing

我的 R 脚本的问题是它需要太多时间，我考虑的主要解决方案是并行化它。我不知道从哪里开始。

我的代码如下所示：

```
n<- nrow (aa) 
output <- matrix (0, n, n)

akl<- function (dii){
        ddi<- as.matrix (dii)
        m<- rowMeans(ddi)
        M<- mean(ddi)
        r<- sweep (ddi, 1, m)
        b<- sweep (r, 2, m)
        return (b + M)  
        }
for (i in 1:n)
{
A<- akl(dist(aa[i,]))

dVarX <- sqrt(mean (A * A))

for (j in i:n)
{
    B<- akl(dist(aa[j,]))
        V <- sqrt (dVarX * (sqrt(mean(B * B))))

        output[i,j] <- (sqrt(mean(A * B))) / V        
}
} 
```

我想在不同的 cpu 上并行化。我怎样才能做到这一点？我看到了 SNOW 包，它适合我的目的吗？谢谢你的建议，加布

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T11:03:29.880

我可以想到有两种方法可以使您的代码运行得更快：

`First:`正如`@Dwin`所说的（稍加改动），您可以`precompute`akl（是的，不一定是 dist，而是整个 akl）。

```
# a random square matrix
aa <- matrix(runif(100), ncol=10)
n <- nrow(aa)
output <- matrix (0, n, n)

akl <- function(dii) {
    ddi <- as.matrix(dii)
    m   <- rowMeans(ddi)
    M   <- mean(m) # mean(ddi) == mean(m)
    r   <- sweep(ddi, 1, m)
    b   <- sweep(r, 2, m)
    return(b + M)
}

# precompute akl here
require(plyr)
akl.list <- llply(1:nrow(aa), function(i) {
    akl(dist(aa[i, ]))
})

# Now, apply your function, but index the list instead of computing everytime
for (i in 1:n) {
    A     <- akl.list[[i]]
    dVarX <- sqrt(mean(A * A))

    for (j in i:n) {
        B <- akl.list[[j]]
        V <- sqrt (dVarX * (sqrt(mean(B * B))))
        output[i,j] <- (sqrt(mean(A * B))) / V        
    }
} 
```

这应该已经让您的代码在更大的矩阵上运行得比以前更快（因为您每次都在内循环中计算 akl）。

`Second:`除此之外，您可以通过并行化来更快地获得它，如下所示：

```
# now, the parallelisation you require can be achieved as follows
# with the help of `plyr` and `doMC`.

# First step of parallelisation is to compute akl in parallel
require(plyr)
require(doMC)
registerDoMC(10) # 10 Cores/CPUs
    akl.list <- llply(1:nrow(aa), function(i) {
    akl(dist(aa[i, ]))
}, .parallel = TRUE)

# then, you could write your for-loop using plyr again as follows
output <- laply(1:n, function(i) {
    A     <- akl.list[[i]]
    dVarX <- sqrt(mean(A * A))

    t <- laply(i:n, function(j) {
        B <- akl.list[[j]]
        V <- sqrt(dVarX * (sqrt(mean(B*B))))
        sqrt(mean(A * B))/V
    })
    c(rep(0, n-length(t)), t)
}, .parallel = TRUE) 
```

请注意，我`.parallel = TRUE`只在外循环上添加了。这是因为，您为外部循环分配了 10 个处理器。现在，如果将它添加到外部和内部循环中，那么处理器的总数将为 10 * 10 = 100。请注意这一点。

# html - 集成后退按钮

> ID：14316207
> 
> 赞同：0
> 
> 时间：2013-01-14T09:55:04.413
> 
> 标签：html, wordpress, wordpress-theming

我在运行 wordpress 的网站上安装了这个主题[http://themes.two2twelve.com/site/fluidapp/light/ 。](http://themes.two2twelve.com/site/fluidapp/light/)我按照以下步骤将模板转换为 wordpress 主题：http: [//thethemefoundry.com/blog/html-wordpress/](http://thethemefoundry.com/blog/html-wordpress/)并且一切正常。

但是，我现在被赋予了在其中集成“后退按钮”功能的疯狂任务。他们想要的是具有某种 Back 按钮功能（或浏览器功能），因此当他们打开**Team**并按下 Back 时，他们会回到**Home**。模板基本上是一页的，你可以在源代码中看到。

我可以看到这种情况发生的一种方法是，如果我将每个页面都设为不同的 .php 文件，将它们上传到我的主题文件夹，然后只是超链接它们。像 www.yoursite.com/team.php

另一种可能的方式（我认为）是创建一个 page.php 模板文件，然后使用 wordpress 发布页面。**问题：**如何告诉 wordpress 使用 page.php 作为页面模板文件？

你能想出另一种方法来集成这个功能吗？提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:30:00.117

如果它总是要将用户返回到起始页，您可以使用 home_url(); 功能。

```
<a href="<?php echo home_url(); ?>">Back</a> 
```

如果您有更高级的结构，并且希望按钮仅将用户重定向回一页，则应使用 javascript。

```
<a href="javascript:history.go(-1)">Back</a> 
```

page.php 是 wordpress 页面的默认模板。因此，如果在 admin 中没有选择其他，将使用 page.php。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:42:49.617

如果您使用 javascript 加载新内容，您可以使用 javascript`pushState()`并将`popState()`这些内容记录到新的 url，它会被添加到浏览器历史记录中。[这是一个例子。](http://html5.gingerhost.com/)

# c# - 通过 lambda 找出一个列表是否包含另一个列表值

> ID：14316217
> 
> 赞同：4
> 
> 时间：2013-01-14T09:55:39.143
> 
> 标签：c#, list, lambda

我怎样才能通过 lambda 做到这一点？找出两个列表是否具有相同的值。

```
 void Main()
    {
        var list1 = new List<string>{
            "a", "b", "c"
        };

        var list2 = new List<string>{
            "c", "d", "e"
        };

        bool listsHaveSameValue = false;
        foreach(var list1Value in list1){
              listsHaveSameValue = list2.Any(c => c.Equals(list1Value));
              if(listsHaveSameValue){
                   break;
              }
        }

        Debug.WriteLine(listsHaveSameValue.ToString());
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T09:56:49.793

你应该调查一下`Intersect`。

```
var list1 = new List<string>{ "a", "b", "c"};
var list2 = new List<string>{ "c", "d", "e"};

var doubles = list1.Intersect(list2);
bool listsHaveSameValue = doubles.Any(); 
```

实际上并没有真正需要使用 lambda（如您所问）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T09:57:50.310

尝试使用[*`Enumerable.Intersect`*](http://msdn.microsoft.com/en-us/library/bb460136.aspx)方法

> 通过使用默认相等比较器比较值来生成两个序列的集合交集。

```
public static void Main(string[] args)
        {
            var list1 = new List<string>{
            "a", "b", "c"
        };

            var list2 = new List<string>{
            "c", "d", "e"
        };

           IEnumerable<string> dubvalues = list2.Intersect(list1);

            foreach (var i in dubvalues)
            {
                Console.WriteLine(i); // Output is c
            }
        } 
```

这是一个*[`DEMO`](http://ideone.com/ZsTWW3)*.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T09:58:09.507

您正在有效地搜索最后一个值。

确定所有元素是否相同（与列表中的顺序无关）

你应该使用

```
 listsHaveSameValue = listsHaveSameValue && list2.Any(c => c.Equals(list1Value)); 
```

代替

```
 listsHaveSameValue = list2.Any(c => c.Equals(list1Value)); 
```

确定是否具有相同元素的 Linq 方法之一`list1`是`list2`使用[`SequenceEqual`](http://msdn.microsoft.com/en-us/library/bb348567.aspx)

```
listsHaveSameValue = list1.OrderBy(x=>x).SequenceEqual(list2.OrderBy(x=>x) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T09:58:40.053

你应该使用[相交](http://msdn.microsoft.com/de-de/library/vstudio/bb460136.aspx)

```
var list3 = list2.Intersect(list1); 
```

list3 包含**两个**列表中出现的元素

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T09:58:46.427

这将检查是否存在至少一个公共元素。

```
list1.Any(i => list2.Contains(i)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T09:59:05.823

```
list1.Intersect(list2).Any() 
```

应该返回真或假。

# android - 无法将应用程序上传到 google play

> ID：14316219
> 
> 赞同：0
> 
> 时间：2013-01-14T09:55:46.753
> 
> 标签：android, google-play

当我在 Eclipse 中创建应用程序时，我使用默认设计器，并在命名空间中获取应用程序：

> com.example.MyName

现在我尝试将应用程序上传到 Google Play，但出现错误“包名称“com.example”不可接受。请尝试另一个。”

如果我将名称更改为 com.MyName，我会收到很多错误，例如：

> R 无法解析为变量

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:58:13.063

确保您的清单是最新的。
确保您的源代码移动到正确的包中。
清理您的项目（项目 > 清理）。它将重新编译您的代码和 R.java 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T10:01:19.777

根据您的应用程序的复杂程度，您将需要在至少 2 个甚至更多的地方更改包：

1.  更改包中元素的`package`属性。`<manifest>``AndroidManifest.xml`
2.  更改`src`文件夹中的包名称，方法是右键单击旧包，转到`Refactor`->`Rename`并输入您在 #1 中使用的相同名称。
3.  除此之外，如果您的 XML 文件使用自定义视图，您还需要更新它们的类名。此外，您将需要更新使用完全限定域名的任何其他位置，例如从组件名称启动 Intent 时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T10:01:02.983

Google Play 不接受默认的`com.example`包名（我想是为了防止每个人都使用它）。改成`com`更惨！

使用包含您的姓名、公司、应用程序名称、昵称等的包来创造*独特*的东西。

当您更改类的包时，您需要更新类和类**中**`import`的-statements （以及可能**对它**的其他引用，如 AndroidManifest.xml 中的引用）。

 **请确定：您可以*清理项目*以重新生成自动生成的源文件并重新编译所有类。**

# iphone - 使用 xcode4.5 在 stroyboard 中设计滚动视图

> ID：14316220
> 
> 赞同：0
> 
> 时间：2013-01-14T09:55:47.707
> 
> 标签：iphone, objective-c, ios6

我在 Xcode4.5 中创建了一个带有故事板的应用程序项目

我创建了一个表格视图，并嵌入了导航控制器。点击表格视图单元格后，我创建了一个详细视图的转场。

我需要在这个详细视图中放入大量信息，所以我决定制作一个滚动视图。

我创建了一个视图控制器并在视图中添加了一个滚动视图，将滚动视图高度设置为大于视图高度，并在滚动视图中排列标签和图像视图。

*但是*在我构建并运行应用程序之后，我的滚动视图根本无法滚动。我不确定问题出在哪里。任何人都可以指出吗？

非常感谢。

**编辑** 我的 ItemViewController.h

```
＃进口

@interface COSViewController : UIViewController
...
@property（非原子，保留）IBOutlet UIScrollView *itemDetailScrollView;
@结尾

```

在连接检查器中将 itemDetailScrollView 与 Scrollview 连接起来。

我的 ItemViewController.m

```
-（void）viewWillAppear：（BOOL）动画{

    [超级viewWillAppear：动画]；

    self.itemDetailScrollView.contentSize = CGSizeMake(320, 600);

}

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:59:13.543

滚动视图的滚动取决于内容大小。您的内容大小需要大于滚动视图框架的大小。

```
scrollView.contentSize = <Your actual content size> 
```

# c# - 如果连接字符串在 web.config 中加密，外部用户是否可以访问该站点？

> ID：14316222
> 
> 赞同：2
> 
> 时间：2013-01-14T09:55:56.460
> 
> 标签：c#, asp.net, encryption, web-config, connection-string

我想在我的 web.config 中加密我的连接字符串。

1\. 最好的方法是什么？

2\. 这是否会导致外部用户访问网站出现问题。

3\. 如果是这样，可以做些什么使用户能够访问该站点？（用户通过用户名和密码输入）。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:00:14.387

加密您的连接字符串不会影响其他用户登录到您的站点（它只是您的应用程序用来连接到数据库的凭据）。.Net SDK 捆绑工具来保护您的连接字符串和配置文件的其他区域。完整的概述[在 MSDN 上](http://msdn.microsoft.com/en-us/library/53tyfkaw.aspx)。

基本命令行是这样使用 aspnet_regiis 的：

```
aspnet_regiis -pe "connectionStrings" -app "/SampleApplication" -prov "RsaProtectedConfigurationProvider" 
```

其中“connectionStrings”是要保护的部分，“/SampleApplication”是您的应用程序，“RsaProtectedConfigurationProvider”是用于保护它的提供程序。

Q3 没有实际意义，它不会影响您的用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T10:00:08.257

是的，这样的网站将是可访问的。

加密连接字符串与站点的可访问性无关。

1.  `aspnet_regiis`与加密选项一起使用。我建议this [howto](http://msdn.microsoft.com/en-us/library/ms998283.aspx)了解详细信息。

2.  不应该引起问题。

3.  只是让用户访问该站点所需的常规操作。没有什么特别的要求。

# android - Android：在开发/生产环境中运行应用程序？

> ID：14316223
> 
> 赞同：4
> 
> 时间：2013-01-14T09:56:03.323
> 
> 标签：android

我想通过实现一个配置参数来简化开发，该参数确定应用程序应该在“DEV”模式还是“PROD”模式下运行。

我希望可以从任何文件访问此参数（基于此参数将执行不同的代码块）。

存储此参数的最实用方法是什么（用户无法访问或更改）？

*如何从应用程序中访问它？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T10:07:13.680

从 ADT 17 (IIRC) 开始，您会自动将其作为自动生成`BuildConfig`类的一部分。

该`DEBUG`字段在开发时始终是`true`，但是当您导出已签名或未签名的 apk 时，它设置为`false`. 您可以将其用作：

```
if(BuildConfig.DEBUG) {
    //Debug mode
} 
```

或者反过来：

```
if(!BuildConfig.DEBUG) {
    //Release mode
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T09:59:10.873

您可以使用枚举：

```
public enum BuildType {

    Release, Pilot, Debug;
} 
```

并将其分配给全局变量：

```
public static final BuildType BUILD_TYPE = BuildType.Debug; 
```

您甚至可以在枚举中创建一些方法，允许您切换应用程序的非常特定的部分。

现在你可以做这样的事情：

```
if (MyApplication.BUILD_TYPE != BuildType.Release) {
    // some code that does not go in the release
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T09:59:49.967

您的一个 Activity 中的静态字段？或者我错过了什么？

```
public static boolean isDev = true; 
```

你可以在`onCreate`你的主要活动中设置它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T10:05:19.290

您可以创建一个新类并在那里添加您的变量。您还可以添加一些方法，这些方法将在开发模式下显示有关您的应用程序的一些详细信息。

```
public class Console{
  public final static boolean isDev = true;
  public static error(String tag, String msg){
    if(isDev){
      Log.e(TAG, msg);
    }
  }
} 
```

# c++ - 正确的 C++ 中对象的生命周期管理

> ID：14316230
> 
> 赞同：4
> 
> 时间：2013-01-14T09:56:50.360
> 
> 标签：c++, memory-management

我有几个简单的 C++ 类来保存数据。它们是分层的，每个都包含一个指向子对象的指针列表（因为我在内存中有很多它们，我不想复制它们）。

我只在最高级别工作（将其传递给函数），并且希望每个级别的析构函数都销毁其子级，所以我要做的就是释放所有这些子级，只需在最顶层的父级上调用 delete。当在堆栈上创建某些类时，这会导致问题，但这实际上只是问题的症状。

正如我所看到的，我需要在同一级别上创建和销毁对象，从而知道我是否应该调用 delete。但是，这将迫使我在代码中每次使用后都持有指向所有子级的指针并销毁它们，这是一个比在最顶层的父级上调用 delete 更脏的解决方案。

所以，我的选择是：

1.  永远不要在堆栈上定义它们（坏）
2.  在构造函数中传递一个布尔值，指示该对象是否应该被删除（坏）
3.  每次使用后手动删除对象，具体取决于我创建它们的方式（坏）
4.  “本地”复制项目（可能有成千上万的项目是不好的）
5.  智能指针？一些框架？（我可以使用的东西相当有限）

我错过了什么吗？还有其他想法吗？

谢谢，瓦迪姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-17T23:49:13.730

考虑将 children 对象放在`std::list`. 代替 using `new`，您编写了一个函数，该函数使用创建一个新子代`push_back()`并返回一个指向它的指针。您不需要直接销毁孩子，并且可以防止泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:15:28.607

在 C++11 中，您将定义一个移动构造函数并`std::move`在对象超出范围之前调用它，以便它可以传递原本会得到`delete`d 的资源的所有权。

在 C++03 中，可以在没有语言形式的情况下定义相同的功能，但是您必须在对象为空的地方添加一个状态。这通常通过引入默认构造函数并实现`swap`.

被删除的指针应该默认构造为null，并且在交换（或复制构造函数或任何函数）将指针传递到将超出范围的新容器对象之后，它们被设置为`NULL`所以`delete`没有效果（并使对象无法使用，这很“脏”但还不错，因为您可以轻松地确保对象在移出后不用于任何事情）。

# haskell - 列表列表或元组的元组

> ID：14316236
> 
> 赞同：3
> 
> 时间：2013-01-14T09:57:13.803
> 
> 标签：haskell, tuples

我只是想知道是否有可能创建一个返回与此类似的（希望是无限的）数字列表的函数。[1, [2, [3, [4]]]]。

我得到的最接近的是这个。

```
func list 0 = list
func list num = func newList (num-1) 
                where newList = list ++ [[num]] 
```

这是使用这样的东西。

```
func [] 3 
```

哪个返回这个。

```
[[3],[2],[1]] 
```

现在我知道这不是无限的，也不是正确的顺序，但我只是想表明我至少在发布之前尝试了一些东西。:)

非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T10:19:30.853

您不能编写这样的函数，因为列表的所有元素必须具有相同的类型。即使只有两个元素，您要创建的列表也不会进行类型检查：

```
Prelude> :t [1::Int,[2::Int]]

<interactive>:1:9:
    Couldn't match expected type `Int' with actual type `[Int]'
    In the expression: [2 :: Int]
    In the expression: [1 :: Int, [2 :: Int]] 
```

第一个元素是 Int，第二个元素是 Int 列表，因此类型检查失败。

虽然你可以用元组来表达结果，例如

```
Prelude> :t (1::Int,(2::Int,(3::Int,4::Int)))
(1::Int,(2::Int,(3::Int,4::Int))) :: (Int, (Int, (Int, Int))) 
```

您仍然无法编写函数，因为结果的类型会根据您希望拥有的元素数量而改变。让我们调用`f`假设函数：

```
f 1 :: (Int)
f 2 :: (Int,(Int))
f 3 :: (Int,(Int,(Int)))
... 
```

类型`f`随参数变化，所以`f`不能写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T15:40:14.477

关键是想出正确的类型。

如果你想要类似的东西`[1, [2, [3, [4]]]]`，那么这样做*是*行不通的，因为所有列表元素都必须是相同的类型。

这是有道理的，因为当我从列表中抓取一个元素时，我需要知道它是什么类型，然后才能对它做任何事情（这是类型的全部意义，它们告诉你你能做什么和能做什么'不做某事）。

但是由于 Haskell 的类型系统是静态的，我需要知道它是什么类型，即使*不知道它是列表的哪个元素*，因为在程序运行之前我可能不知道我正在抓取的列表索引。所以无论我使用什么索引，我几乎都必须得到相同类型的东西。

但是，可以做一些非常像您想要的事情：您想要一个可能是整数或可能是列表的数据类型：

```
type IntegerOrList a = Either Integer [a] 
```

如果您不熟悉`Either`类型，则值`Either l r`可以是`Left x`some`x :: l`或`Right y`some `y :: r`。`IntegerOrList a`其值为整数或某物列表的类型也是如此。所以我们可以列出这些东西：以下是 type 的值`[IntegerOrList Bool]`：

```
[Left 7, Left 4, Right [True, False], Left 8, Right [], Right [False]] 
```

好的，这是列表中的一级列表，但是我们还不能将列表放入列表中的列表中——内部列表包含`Bool`s，它不能是列表。如果我们改为使用`[IntegerOrList (IntegerOrList Bool)]`，我们将能够在列表中的列表中包含列表，但我们仍然无法获得进一步的结果。在我们的示例中，我们有一个列表，其中包含整数或列表的值，列表是包含整数或列表的值的列表，并且......我们真正想要的是类似的东西`IntegerOrList (IntegerOrList (IntegerOrList ...`，或者更简单地说，像：

```
type IntegerOrLists = Either Integer [IntegerOrLists] 
```

但这是不允许的——类型同义词不能是递归的，因为这会产生无限大的类型，这会让糟糕的编译器感到困惑。但是，正确的数据类型*可以*是递归的：

```
data IntegerOrLists = I Integer | L [IntegerOrLists] 
```

现在您可以构建这样的列表，混合整数和您类型的列表：

```
L [I 1, L [I 2, L [I 3, L [I 4]]]] 
```

关键是每个项目是整数还是列表都必须使用`I`or`L`构造函数来标记。现在列表的每个元素都是 type `IntegerOrLists`，我们可以通过查看构造函数来区分它是什么。所以类型检查器终于高兴了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T14:57:22.670

```
{-# LANGUAGE ExistentialQuantification #-}

class Foo a

instance Foo Int
instance Foo [a]

data F = forall a. Foo a => F a

test = F [F (1 :: Int), F [F (2 :: Int), F [F (3 :: Int), F [F (4 :: Int)]]]] 
```

这个例子显示

*   你可以在 Haskell 中拥有这样的结构，只需使用一些礼品包装
*   这些结构实际上是无用的（尝试用它做点什么）

# actionscript-3 - maxScrollV 不考虑滚动文本字段的html 图像大小

> ID：14316237
> 
> 赞同：1
> 
> 时间：2013-01-14T09:57:17.253
> 
> 标签：actionscript-3, flash

我正在使用 Flash Pro CS6。我已经建立了一个通过 XML 注入 htmltext 的滚动文本字段。

我遇到的问题是 maxScrollV 似乎没有考虑到我的 images 。我试图在 html 中设置尺寸，`<img src='assets/images/test.png' height='330' width='330' />`但这似乎抛弃了自动换行。

```
public class ScrollingTextField extends Sprite
{
    private var myText:TextField;
    private var myFormat:TextFormat;
    private var bounds:Rectangle;
    private var boundHeight:Number;
    private var slider:SliderImage;

    public function ScrollingTextField()
    {
        trace("ScrollingTextField added");
        myText = new TextField();
        myFormat = new TextFormat();
        slider = new SliderImage();

        myFormat.font = "Arial";
        myFormat.color = 0x333333;
        myFormat.size = 14;
        addChild(myText);

        myText.htmlText = "init";
        myText.setTextFormat(myFormat);
        myText.wordWrap = true;
        myText.multiline = true;
        myText.setTextFormat(myFormat);
        myText.selectable = false;

        this.addChild(slider);

        slider.addEventListener(MouseEvent.MOUSE_DOWN, dragSlider);
        addEventListener(Event.ENTER_FRAME, checkSlider);
    }

    private function dragSlider(evt:MouseEvent):void
    {
        slider.startDrag();
        slider.removeEventListener(MouseEvent.MOUSE_DOWN, dragSlider);
        slider.addEventListener(MouseEvent.MOUSE_UP, dropSlider);
        addEventListener(MouseEvent.MOUSE_MOVE,moveSlider);
    }

    private function dropSlider(evt:MouseEvent):void
    {
        slider.stopDrag();
        slider.removeEventListener(MouseEvent.MOUSE_UP, dropSlider);
        slider.addEventListener(MouseEvent.MOUSE_DOWN, dragSlider);
        removeEventListener(MouseEvent.MOUSE_MOVE,moveSlider);
    }

    private function moveSlider(evt:MouseEvent):void
    {
        evt.updateAfterEvent();
        if (evt.buttonDown)
        {
            slider.startDrag(false,bounds);
        }
        else
        {
            slider.stopDrag();
        }
    }

    private function checkSlider(evt:Event):void
    {
        myText.scrollV = ((slider.y - bounds.y)* (myText.maxScrollV)/boundHeight);
    }

    public function textToDisplay(txt:String):void
    {
        myText.htmlText = txt;
        myText.setTextFormat(myFormat);
    }

    public function setDimensions(w:Number, h:Number):void
    {
        boundHeight = h - slider.height;
        bounds = new Rectangle(w + 20,10,0,h - slider.height);
        slider.x = w + 20;
        slider.y = 10;
        myText.width = w;
        myText.height = h;
    }

    public function checkTextFieldSize():void
    {
        trace("numLines = " + myText.numLines);
        trace("text height = " + myText.textHeight);
        trace("height = " + myText.height);
        if (myText.textHeight < myText.height)
        {
            slider.visible = false;
        }
        else
        {
            slider.visible = true;
        }
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:40:00.440

好吧，我最终做了一个便宜的解决方法。从网上搜索，似乎 .maxScrollV 只是不喜欢 .htmltext。我会把它带到 Adob​​e ......同时在`<p>&nbsp;</p>`html 中添加大量时间来充当图像空间，似乎可以解决问题。

# javascript - Internet Explorer 10 中是否提供 FormData 对象？

> ID：14316240
> 
> 赞同：13
> 
> 时间：2013-01-14T09:57:38.267
> 
> 标签：javascript, ajax, html, internet-explorer, file-upload

我正在编写一个小的 JavaScript 应用程序，它允许我异步上传图像。

这个脚本在每个浏览器中都非常棒，除了，猜猜是谁，Internet Explorer ......

所以我做的第一件事是使用 AjaxForm Plugin for jQuery 为 IE9 版本创建一个后备，效果很好！

这是JS脚本。

```
$("#Uploader").change(function(e){
        var form = $("#UploaderForm");
        form.trigger('submit');
        $(this).attr('disabled','disabled');
        e.preventDefault();
});
$("#UploaderForm").submit(function(e){
        e.preventDefault();
        e.stopPropagation();
        var type="POST";var loading=$("#PhotoIsLoading");
        if(windowApi === true){
            var formData = new FormData($(this)[0]);
            $.ajax({
                url: url,
                type: type,
                xhr: function() {
                    myXhr = $.ajaxSettings.xhr();
                    if(myXhr.upload){ myXhr.upload.addEventListener('progress',progressHandlingFunction, false);}
                    return myXhr;
                },
                beforeSend: function(){loading.removeClass('isHidden_important');},
                success: function(response){
                    jres = JSON.parse(response);
                    alert("Test ok, file uploaded");
                },
                error: function(response){console.warn(response);},
                data: formData, 
                cache: false,
                contentType: false,
                processData: false
            });
            e.preventDefault();
        }else{
            $(this).ajaxSubmit({
                url: url,
                dataType: 'json',
                type: type,
                beforeSubmit: function(){loading.removeClass('isHidden_important');$(this).formSerialize();},
                success:function(response){
                    jres = JSON.parse(response);
                    alert("FallbackTest Complete");
                },
                error: function(response){console.warn(response);},
            });
            e.preventDefault();
            return false;
        }
    }); 
```

`WindowApi`并且所有其他变量都在全局脚本中定义，但不用担心，它们可以工作。准确地说，`WindowApi`是这样的：

```
var windowApi=true;
if(window.File&&window.FileReader&&window.FileList&&window.Blob){
console.log("window.api ready");windowApi=true;}
else{console.log("window.api not ready");windowApi=false;}; 
```

所以，通过这几行代码，我可以处理所有浏览器和 IE9 浏览器......

现在的问题在于 IE10，因为它拥有所有`window.*`方法并且可以使用该`FormData`对象。但是，当我尝试使用 IE10 和 FormData 上传内容时，我收到 formData 对象的**“拒绝访问”**错误。

此过程中涉及的 HTML 是：

```
<form name="UploaderForm" id="UploaderForm" method="post" enctype="multipart/form-data">
    <input type="file" name="Uploader" id="Uploader" accept="image/*" tabindex="1" />
</form> 
```

所以最后我的问题是：

尝试访问 FormData 对象时，如何避免在 IE10 中出现“拒绝访问”异常？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T06:53:23.640

[https://stackoverflow.com/a/13657047/641293](https://stackoverflow.com/a/13657047/641293)和[https://stackoverflow.com/a/4335390/641293](https://stackoverflow.com/a/4335390/641293)可能有用。IE 对您可以以`<input type='file'>`编程方式执行的操作非常严格。

基于第一个，将第一行更改为此修复问题吗？

```
$("#Uploader").on('click', function(e){ /* rest of the function unchanged... */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T07:37:18.290

当您提交包含被 javascript 弄乱的字段的表单时，您会收到拒绝访问。您在上传字段上动态添加了`disabled`属性，这可能是您收到`Access denied`. 也许您应该在不禁用活动场地的情况下`change`试一试？

顺便说一句，您最好`FormData`结合以下内容检查可用性`File API`：

```
var formDataSupport = false;
if (typeof FormData === 'function' && 
    window.File && 
    window.FileReader && 
    window.FileList && 
    window.Blob)
{
  console.log("File API available, formData available");  
  formDataSupport = true; 
} 
```

# mysql - MySQL按顺序选择随机行

> ID：14316241
> 
> 赞同：1
> 
> 时间：2013-01-14T09:57:42.433
> 
> 标签：mysql, random, sql-order-by

我想从表中检索随机行，但这些行必须按类别排序。

```
select category, 
   (select order_number 
   from orders 
   where order_number in (123,125,128,129,256,263,966,258,264,159,786) 
   order by rand()) 
from orders 
order by category 
```

这是我尝试过的查询。但这会检索表中的整个数据。

* * *

工作查询；

```
SELECT category,order_number FROM (
    SELECT category,order_number 
    from orders 
    where order_number in (`$order_numbers_variable`) 
    order by rand()
) order by category 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:33:27.817

我假设要求是： **从按 'category' 排序的表中检索 'N' 随机行**。

让我们假设**N**是**10**。如果要更改行数，请在 LIMIT 子句中更改。

```
SELECT * FROM (
    SELECT category from orders ORDER BY rand() ASC  LIMIT 10
) AS innerResult 
ORDER BY innerResult.category 
```

# java - 实施外部公式

> ID：14316246
> 
> 赞同：-2
> 
> 时间：2013-01-14T09:57:55.680
> 
> 标签：java, string, integer, formula

给定一个带有输入的文件：

```
Formula: m = (y - c) / x
Formula: m = y + c^2 
```

**我想在 java 中实现每个公式来求解 m**，这样在这种情况下我会得到 2 个答案。我必须这样做，因为单独为每个公式编码对于我需要的所有公式来说太耗时了。

到目前为止，我下面的代码只是检测并隔离了每个公式。出于此问题的目的，我还删除了用户输入。

```
int y = 8;
int c = 2;
int x = 2;

    try{
       FileInputStream fstream = new FileInputStream("Filename");

        DataInputStream in = new DataInputStream(fstream);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));
        String strLine;

        while((strLine = br.readLine()) != null){
            if(strLine.startsWith("Formula")){
                String standAloneFormula = strLine.replace("Formula: ", "");
                System.out.println(standAloneFormula);
            }
        }
    }
    catch(Exception e){
        System.out.print(e); 
```

我遇到的主要问题是访问代码，然后将整数值应用于字符串值。在这种情况下，解决**m**的最简单方法是什么？

任何想法、链接或相关代码将不胜感激。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:47:48.657

[尝试使用复合模式](http://en.wikipedia.org/wiki/Composite_pattern)为方程创建一个简单的对象模型。您可以将每个输入行分解为单个表达式，可能包含其他表达式作为操作数。然后你可以`calculate(HashMap<String, Integer> values)`在你的所有类中定义一个方法，这里`values`就是你计算中可能出现的所有变量的定义。通过递归调用该方法，您最终应该得到结果。

对于您希望支持的每个数学运算，您将需要一个类，例如加法、减法、否定，......

解析字符串和构建对象层次结构实际上是最困难的任务。使用[波兰符号](http://en.wikipedia.org/wiki/Polish_notation)或更容易解析的东西会容易得多。

总体而言，建议使用更适合解决数学问题的工具，而不是尝试自己编写代码。也许甚至 Excel 可能会有所帮助。

# java - CoreConnectionPNames.SO_TIMEOUT 和 CoreConnectionPNames.CONNECTION_TIMEOUT 有什么区别？

> ID：14316255
> 
> 赞同：3
> 
> 时间：2013-01-14T09:58:20.897
> 
> 标签：java, timeout, apache-httpclient-4.x, resttemplate

有人可以解释一下这两个参数之间的区别吗？

1.  [org.apache.http.params.CoreConnectionPNames.CONNECTION_TIMEOUT](http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/params/CoreConnectionPNames.html#CONNECTION_TIMEOUT)；
2.  [org.apache.http.params.CoreConnectionPNames.SO_TIMEOUT](http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/params/CoreConnectionPNames.html#SO_TIMEOUT)。

根据javadocs：

CoreConnectionPNames.CONNECTION_TIMEOUT：

> 确定建立连接之前的超时时间（以毫秒为单位）。超时值为零被解释为无限超时。

CoreConnectionPNames.SO_TIMEOUT：

> 以毫秒为单位定义套接字超时 (SO_TIMEOUT)，这是等待数据的超时时间，或者换句话说，是两个连续数据包之间的最大不活动时间。

那么，对于第一个，`CoreConnectionPNames.CONNECTION_TIMEOUT`它是否发生在发送任何数据之前？而对于第二个，`CoreConnectionPNames.SO_TIMEOUT`这是否意味着已经发送了一些数据？表示连接已成功建立。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:12:09.583

> 在发送任何数据之前会发生吗？

是的，它确实。

> 这是否意味着已经发送了一些数据？

在 HTTP 级别上，不，它没有。（TCP/IP 或 SSL 可能是另一回事）

> 表示连接已成功建立。

是的，它确实。

# spring - Hibernate Updating 实体集合，返回给用户更新实体的数量

> ID：14316263
> 
> 赞同：1
> 
> 时间：2013-01-14T09:58:51.180
> 
> 标签：spring, hibernate

我有一组来自数据库的实体，这些实体向用户显示（带有 Spring 的 Web 应用程序）。用户可以更改一个或多个实体（行）并将他的所有更改一起提交给服务器（不是一个一个）。

仅更新使用 Hibernate 更改的行的推荐方法是什么？目前，我将原始集合作为属性存储在控制器中，并仅保存通过将集合的实体与旧实体一一比较而更改的行（递增返回到用户）。我想将集合存储在控制器上不是一个好习惯。有没有更好的方法来实现这一目标？

如果有任何区别，我还想使用乐观锁定（自动版本控制）。

# c++ - 带 getline 的缓慢 istringstream

> ID：14316264
> 
> 赞同：1
> 
> 时间：2013-01-14T09:58:55.053
> 
> 标签：c++

我有一个 Wavefront .obj 文件解析器，它使用 getline 和 stringstream 解析数据。起初，当模型很小时，没有问题，但现在，当我尝试加载具有 ~207000 行的模型时，仅在我计算所有元素的第一遍时，它需要大量的时间（约 4.7 秒）结束PC，第二遍需要半分钟。另一方面，Blender 只需 2 秒左右即可加载整个模型。我使用 Visual Studio 2012，目前处于调试模式。

我的元素计数代码如下所示：

```
istringstream input(obj);
string line;
while (getline(input, line)) {
    if (line.find("# ") != string::npos) {
        // Comments.
    }
    else if (line.find("f ") != string::npos) {
        faces++;
    }
    else if (line.find("v ") != string::npos) {
        vertices += 3;
    }
    else if (line.find("vn ") != string::npos) {
        normals += 3;
    }
    else if (line.find("vt ") != string::npos) {
        uvCoordinates += 2;
    }
    else if (line.find("o ") != string::npos) {
        // Count here, if needed.
    }
} 
```

实际加载整个数据的代码大约需要 30 秒：

```
istringstream input(obj);
string line;
if (faces.capacity() > UINT_MAX / 3) {
    LOGE("Model cannot have more faces than: %d", UINT_MAX / 3);
    return false;
}
while (getline(input, line)) {
    vector<string> arr = stringSplit(line, ' ');
    string param = arr[0];
    int params = arr.size();
    if (line.length() == 0) {
        continue;
    }

    if (arr[0] == "v") { // Vertices.
        vertices.push_back(stringToFloat(arr[1].c_str()));
        vertices.push_back(stringToFloat(arr[2].c_str()));
        vertices.push_back(stringToFloat(arr[3].c_str()));
    }
    else if (arr[0] == "vn") { // Normals.
        normals.push_back(stringToFloat(arr[1].c_str()));
        normals.push_back(stringToFloat(arr[2].c_str()));
        normals.push_back(stringToFloat(arr[3].c_str()));
    }
    else if (arr[0] == "f") { // Faces.
        if (params < 4) {
            //LOGI("LINE: %s", line.c_str());
            continue;
        }
        else if (params > 4) {
            LOGI("Line: %s", line.c_str());
            LOGE("Obj models must only contain triangulated faces.");
            return false;
        }
        Face face;
        parseFace(face, line);
        faces.push_back(face);
    }
    else if (arr[0] == "vt") { // UV coordinates.
        uvCoordinates.push_back(stringToFloat(arr[1].c_str()));
        uvCoordinates.push_back(stringToFloat(arr[2].c_str()));
    }
    else if (arr[0] == "mtllib") { // Material.
        material = arr[1];
    }
    else if (arr[0] == "o") { // Sub-model.
        // Separate models here, if needed.
    }
} 
```

obj 变量是一个包含整个文件内容的字符串。从第一个循环内部删除所有内容对时间影响没有任何影响。关于如何优化它的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T10:28:48.653

首先，尝试发布版本。调试版本是可调试的，而不是快速的。

另一件事是使用 stringstream 和 getline 会导致大量复制和堆分配。为了获得最佳性能，您可以尝试仅使用索引遍历字符串，从原始字符串本身而不是从提取的片段中解析内容，等等。当然，您需要替换标准库中的一些功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T11:23:43.013

零，简介！

首先，如果您只是使用`istringstream`调用`getline()`从字符串中获取一行，请创建您自己的函数，该函数将简单地向前搜索下一个`'\n'`并为您提供字符串。这样，您将避免大量开销。

其次，避免多遍算法。为什么需要提前计算对象？

第三，避免不必要的重复内存分配/构造和释放/销毁。

将`arr`变量移出循环。返工`stringSplit()`以拆分为现有向量的现有元素，以避免重新分配向量及其中的字符串：

```
vector<string> arr = stringSplit(line, ' '); 
```

除非您正在修改向量的元素并且您确实需要此处的字符串副本，否则请避免复制，而是使用对 const 字符串的引用：

```
string param = arr[0]; 
```

在这里，不是变量，而是初始化，`push_back()`首先调整向量的大小，然后调用`parseFace()`它的最后一个元素：

```
Face face;
parseFace(face, line);
faces.push_back(face); 
```

避免使用这些长`if/else if`链或至少对它们进行排序，以便最常见的实体位于链的顶部。更好的是，仅在`switch-case`块中使用第一个字母和完整比较进行切换。编译器可以将 switch 语句优化为平衡决策树或跳转表。

```
if (arr[0] == "v") { // Vertices.
//...
}
else if (arr[0] == "vn") { // Normals.
//...
}
else if (arr[0] == "f") { // Faces.
//...
}
else if (arr[0] == "vt") { // UV coordinates.
//...
}
else if (arr[0] == "mtllib") { // Material.
//...
}
else if (arr[0] == "o") { // Sub-model.
//...
} 
```

**编辑：**

至于第一遍，如果你没有它并且向量正在动态调整大小，它会如何影响性能？

如果您预先在向量中为 1000 个面、1000 个法线、3000 个顶点（假设 1:1:3 是这些实体之间的典型比例）等预留空间，那么您的向量将增长得更快，并且会避免大部分与从空向量开始相比，调整大小时的复制开销。

至于面孔，我的意思是改变这个：

```
Face face;
parseFace(face, line);
faces.push_back(face); 
```

进入这个（如果你保持`push_back()`apprach的风格）：

```
std::size_t const faces_size = faces.size();
faces.resize(faces_size + 1);
parseFace(faces.back()); 
```

在所有情况下，请确保

1.  基准测试至少 3 次运行
2.  做一个应该改善事情的改变
3.  再次进行基准测试

# javascript - 新的 Image() 对象在哪里定义？

> ID：14316266
> 
> 赞同：3
> 
> 时间：2013-01-14T09:58:59.147
> 
> 标签：javascript, image

玩弄一些 HTML 元素我遇到了一个图像对象声明

```
var image = new Image(); 
```

有人能告诉我这个构造函数是在哪里定义的吗？我已经搜索了 ECMAScript 和一些 hmtl 规范......

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:03:23.777

虽然在浏览器中得到很好的支持， ~~不属于任何标准~~最接近`Image()`标准的一部分是[出现在 HTML 5 草案中](http://www.w3.org/html/wg/drafts/html/master/embedded-content-0.html#dom-image)。[MDN 上](https://developer.mozilla.org/en-US/docs/DOM/Image)有一些[文档`Image`](https://developer.mozilla.org/en-US/docs/DOM/Image)。

我通常建议使用[`createElement`](https://developer.mozilla.org/en-US/docs/DOM/document.createElement)它，因为它为创建任何类型的元素提供了一致的 API，并且是 DOM 标准的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:00:54.837

它是 HTML DOM 的一部分（不是 ECMAScript 的一部分），请参阅此链接：

[图像 API](https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/Image)

# java - Java i/o 在隐藏特定单词的同时读取文本

> ID：14316274
> 
> 赞同：0
> 
> 时间：2013-01-14T09:59:24.883
> 
> 标签：java, io, bufferedreader, name-hiding

每次出现 SECRET 时，您如何阅读以下文本？这是文本：

这条线有一个秘密词。

这条线没有一个。

这条线有两个秘密词。

这条线没有。

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;

public class BufferedReadertest {

    public static void main(String[] args) {

        ArrayList <String>list = new ArrayList<>();

        BufferedReader br = null;

        try {

            String sCurrentLine;

            br = new BufferedReader(new FileReader("secretwords.txt"));

            while ((sCurrentLine = br.readLine()) != null) {
                list.add(sCurrentLine);

                }

            for (int i = 0; i < list.size(); i++) {

                System.out.println(list.get(i));
            }

        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                if (br != null)br.close();
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:02:10.540

你的意思是喜欢

```
System.out.println(list.get(i).replaceAll("SECRET", "******"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:04:44.320

我看到需要使用 ArrayList。`SECRET`迭代缓冲阅读器时替换并打印消息。

```
public static void main(String[] args) {

        BufferedReader br = null;

        try {

            String sCurrentLine;

            br = new BufferedReader(new FileReader("secretwords.txt"));

            while ((sCurrentLine = br.readLine()) != null) {
                System.out.println(sCurrentLine.replaceAll("SECRET", ""));

            }

        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                if (br != null)br.close();
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T10:05:11.040

```
if(line.indexOf("SECRET") > -1){
   System.out.println("Has Secret");
   continue;
} 
```

# dynamics-crm-2011 - 如何将 CRM 4 类型更改为 CRM 2011

> ID：14316276
> 
> 赞同：2
> 
> 时间：2013-01-14T09:59:31.857
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm, dynamics-crm-4

我正在尝试将 crm 4 插件转换为 CRM 2011。有人知道 CRM 2011 中的相应类型吗？

> 客户、CrmDateTime、CrmDecimal、CrmFloat、CBool​​ean、CrmMoney、所有者、选项列表、键、状态、UniqueIdentifier、CrmBoolean

```
public static object GetAttributeValue(this Entity target, string attributeLogicalName)
        {
            object value;
            if (target.Attributes.Contains(attributeLogicalName))
            {
                value = target.Attributes[attributeLogicalName];
                if ((value is Boolean) || (value is string))
                    return value;
                else if (value is Customer)
                    return ((Customer)value).Value;
                else if (value is CrmDateTime)
                    return ((CrmDateTime)value).UserTime;
                else if (value is CrmDecimal)
                    return ((CrmDecimal)value).Value;
                else if (value is CrmFloat)
                    return ((CrmFloat)value).Value;
                else if (value is CrmNumber)
                    return ((CrmNumber)value).Value;
                else if (value is CBoolean)
                    return ((CrmBoolean)value).Value;
                else if (value is Lookup)
                    return ((Lookup)value).Value;
                else if (value is CrmMoney)
                    return ((CrmMoney)value).Value;
                else if (value is Owner)
                    return ((Owner)value).Value;
                else if (value is Picklist)
                    return ((Picklist)value).Value;
                else if (value is Key)
                    return ((Key)value).Value;
                else if (value is Status)
                    return ((Status)value).Value;
                else if (value is UniqueIdentifier)
                    return ((UniqueIdentifier)value).Value;
                else if (value is CrmBoolean)
                    return ((CrmBoolean)value).Value;
                return null;
            }
            else
                return null;
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T10:16:15.733

由于 Dynamics CRM 2011 不再需要自定义类型来替代 .NET 类型。您可以（并且必须）使用标准的 .NET 类型。有关类型映射的说明，请参阅[Microsoft Dynamics CRM SDK中的类型。](http://msdn.microsoft.com/en-us/library/gg328507.aspx)

CRM 3 和 CRM 4 ( `CrmBoolean`, ...) 中存在自定义类型是必要的，因为 CRM 3 基于没有 Nullable 类型的 .NET 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:12:18.927

请参阅[这篇](http://crmbusiness.wordpress.com/2011/01/28/type-mapping-between-versions-crm-2011-and-crm-4/)记录从 CRM 4 类型到 CRM 2011 类型的映射的文章。

It is not entirely true that custom types are no longer required. While most custom types are no longer used they are still required for attributes that are lookups and picklists.

# html - 响应式设计网站标题和滑块

> ID：14316278
> 
> 赞同：0
> 
> 时间：2013-01-14T09:59:48.720
> 
> 标签：html, css, responsive-design

我刚刚做了一个响应式设计，但是有两个错误。当窗口大小调整为不同大小时，整个网站会自动调整大小，但标题标题和滑块不会调整大小。但如果我重新加载它，它会调整大小。

我制定了不同的字体大小和滑块高度的 css 规则，如果不重新加载，这些规则将无法工作。你可以看到在线网站：[http](http://www.itmediagroup.lt) ://www.itmediagroup.lt你看到滑块，改变窗口大小，然后你会看到一个问题，当重新加载网站时，看到所有的变化，我认为所有的错误都在我的 css 上，但是我不知道如何解决它。

PS fontsize 我试图用百分比来做，但是字体的大小太小了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T02:12:33.740

您可以使用媒体查询、javascript ( [fittext.js](http://fittextjs.com/) ) 为元素设置字体大小，也可以使用 css 视口单元。例如;

**视口单元语法**

*   1vw：视口宽度的 1%
*   1vh：视口高度的 1%
*   1vmin：1vw 或 1vh，无论是最小的
*   1vmax：1vw 或 1vh，无论是最大的

大多数新浏览器都支持它，但可以通过使用[**VminPolly使其更加“防弹”**](https://github.com/saabi/vminpoly)

[这里有一些很好的信息和例子](http://css-tricks.com/viewport-sized-typography/)

# javascript - jVectorMap 错误：“未定义 jvm”

> ID：14316285
> 
> 赞同：6
> 
> 时间：2013-01-14T10:00:16.477
> 
> 标签：javascript, jquery, json, jvectormap

我正在尝试重新创建美国失业的 jVectorMap 示例可视化。我直接从[github](https://github.com/bjornd/jvectormap-examples/tree/master/us-unemployment)获取代码。地图不会加载，控制台给我这个错误：“jvm 未定义。”

这是代码：

```
 <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8"/>
      <title>Maps</title>
      <link rel="stylesheet" media="all" href="../jvectormap/jquery-jvectormap.css"/>
      <link rel="stylesheet" media="all" href="css/jquery-ui-1.8.21.custom.css"/>
      <script src="../jvectormap/tests/assets/jquery-1.8.2.js"></script>
      <script src="../jquery-jvectormap.js"></script>
      <script src="../jvectormap/tests/assets/jquery-jvectormap-us-aea-en.js"></script>
      <script src="jquery-ui-1.8.21.custom.min.js"></script>

  <script>
    $(function(){
      $.getJSON('data.json', function(data){
        var val = 2009;
            statesValues = jvm.values.apply({}, jvm.values(data.states)),
            metroPopValues = Array.prototype.concat.apply([], jvm.values(data.metro.population)),
            metroUnemplValues = Array.prototype.concat.apply([], jvm.values(data.metro.unemployment));

        $('.map').vectorMap({
          map: 'us_aea_en',
          markers: data.metro.coords,
          series: {
            markers: [{
              attribute: 'fill',
              scale: ['#FEE5D9', '#A50F15'],
              values: data.metro.unemployment[val],
              min: jvm.min(metroUnemplValues),
              max: jvm.max(metroUnemplValues)
            },{
              attribute: 'r',
              scale: [5, 20],
              values: data.metro.population[val],
              min: jvm.min(metroPopValues),
              max: jvm.max(metroPopValues)
            }],
            regions: [{
              scale: ['#DEEBF7', '#08519C'],
              attribute: 'fill',
              values: data.states[val],
              min: jvm.min(statesValues),
              max: jvm.max(statesValues)
            }]
          },
          onMarkerLabelShow: function(event, label, index){
            label.html(
              '<b>'+data.metro.names[index]+'</b><br/>'+
              '<b>Population: </b>'+data.metro.population[val][index]+'</br>'+
              '<b>Unemployment rate: </b>'+data.metro.unemployment[val][index]+'%'
            );
          },
          onRegionLabelShow: function(event, label, code){
            label.html(
              '<b>'+label.html()+'</b></br>'+
              '<b>Unemployment rate: </b>'+data.states[val][code]+'%'
            );
          }
        });

        var mapObject = $('.map').vectorMap('get', 'mapObject');

        $(".slider").slider({
          value: val,
          min: 2005,
          max: 2009,
          step: 1,
          slide: function( event, ui ) {
            val = ui.value;
            mapObject.series.regions[0].setValues(data.states[ui.value]);
            mapObject.series.markers[0].setValues(data.metro.unemployment[ui.value]);
            mapObject.series.markers[1].setValues(data.metro.population[ui.value]);
          }
        });
      });
    })
  </script>
</head>
<body>
  <div class="map" style="width: 800px; height: 600px"></div>
  <div class="slider" style="width: 280px; margin: 10px"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-04T06:58:54.270

我有这个完全相同的问题。问题是您下载的 ZIP 文件将您重定向到

```
<script src="../jquery-jvectormap.js"></script> 
```

实际上是一个调用 JVM 的 JS 文件，而不是实际的 JVM 库（这就是您收到“JVM 未定义”错误的原因。

我修复它的方法是获取文件

```
http://jvectormap.com/js/jquery-jvectormap-1.2.2.min.js 
```

并将其包含在我的项目中。

那是 ACTUAL JVM 库，所以只要在您进行任何 .vectorMap 调用之前包含它，它就会非常适合您。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T10:44:13.913

因此，您使用的是未缩小的 js 文件。它只包含没有库的主要代码。

要修复此错误，您有 2 个解决方案：

1.  添加所有需要的库。您可以在`lib/`目录中找到它。带有文件的示例以及您需要添加的顺序，您可以在`tests/index.html`文件 中找到

2.  创建缩小的 js。您需要使用 NIX 系统并执行`./build.sh`. 也许你需要安装[uglifyjs 实用程序](https://github.com/mishoo/UglifyJShttp://)，例如你可以[从这里安装 npm](http://nodejs.org/download/)然后执行`npm install uglify-js@1`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-17T22:44:45.267

看起来缩小的文件包含所有需要的各种文件，而`jquery-jvectormap.js`没有。因此，如果您想使用非缩小版本，那么您应该准备手动加载所需的所有各种文件`jquery-jvectormap.js`，例如`map.js`，等如果您从[jvector maps 网站](http://jvectormap.com/download/)`vector-canvas.js`获取文件，这些可以在目录中找到`/src`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T01:11:11.760

, `statesValues`,`metroPopValues`和`metroUnempValues`变量声明应该是它们自己的以 . 结尾的语句`;`。您当前以`,`.

```
var val = 2009;
var statesValues = jvm.values.apply({}, jvm.values(data.states));
var metroPopValues = Array.prototype.concat.apply([], jvm.values(data.metro.population));
var metroUnemplValues = Array.prototype.concat([], jvm.values(data.metro.unemployment)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-27T17:33:51.303

如果您仍然想在本地保存正确的文件，例如如果您使用的是 bower，那么您也可以在 GitHub 上使用[这个“内置”版本的 jvectormap 。](https://github.com/tlvince/bower-jvectormap)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-22T18:34:36.887

**如果您下载了 zip 文件或从 GitHub 克隆：**转到您下载的目录并执行`build.sh`文件。这将生成缩小文件供您与所有适当的依赖项一起使用。

在 Mac 上： `source build.sh`

**或者你可以只使用 npm** 安装依赖： `npm install jvectormap --save`然后使用你的缩小文件`node_modules`。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-01-14T10:13:13.910

关于 jVectorMap 的内容不多，只是一个简单的观察。

在您的代码中，变量“jvm”未定义。检查代码中使用的 JS 文件并注意“jvm”变量的任何初始化不是一个好主意吗？

# c++ - 无法打印字符数组

> ID：14316288
> 
> 赞同：0
> 
> 时间：2013-01-14T10:00:39.037
> 
> 标签：c++

我正在为我的学校项目使用 turbo c++。我知道它很老了，我应该使用代码块或 MVC++，但我只是将它用于学校的简单程序。好的，我的问题是我无法打印出 char 数组。这是我的简单代码

```
#include <iostream.h>
#include <conio.h>

class abc
{
    private:
            int rno,m1,m2,tot;
            char sname[10],grade;
    public:
            void getinput()
            {
                cout<<"Enter roll no:"<<endl;
                cin>>rno;
                cout<<"\nEnter mark 1:"<<endl;
                cin>>m1;
                cout<<"\nEnter mark 2:"<<endl;
                cin>>m2;
                cout<<"\nEnter student name:"<<endl;
                cin>>sname;
                cout<<endl;
                // Getting the returns.
                //tot = gettotal();
                //grade = getgrade();
            }

            void gettotal()
            {
                tot = m1+m2;
                // Returning the total to getinput's "tot" part.
                //return (tot);
            }

            void getgrade()
            {
                if(tot >= 150)
                {
                    grade = 'A';
                }
                else if(tot >= 100)
                {
                    grade = 'B';
                }
                else
                {
                    grade = 'C';
                }
                // Returning the total to getinput's "grade" part.
                //return (grade);
            }

            void display()
            {
                cout<<sname<<"'s total grade ranks: "<<grade;
            }
 };

 void main()
 {
    abc a;
    a.getinput();
    a.gettotal();
    a.getgrade();
    a.display();
 } 
```

如您所见，它要求标记 1 和标记 2，然后计算它并根据标记打印“A”、“B”和“C”。

好的，所以我想要打印'First'，'Second'和'Third'而不是A，B，C。

有人可以帮助我吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:26:39.230

试试这个方法：

```
enum Grade{
    A,
    B,
    C,
};

const char * GetGradeStr(Grade grade){
    switch(grade){
    case A:return "First";
    case B:return "Second";
    case C:return "Third";
    }
}

char sname[10];
Grade grade;

...
    grade = A;

...
    cout<<sname<<"'s total grade ranks: "<<GetGradeStr(grade); 
```

这将grade变成一个枚举，这意味着只有3个值是有效值，然后将正确的字符串作为“字符串文字”返回

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T10:55:15.323

也许我可以添加一些东西，让你更清楚。您需要了解 char 数组和指针之间的区别。指针只是一个指向内存中某个区域的变量。您可以`malloc`将地址存储并存储到 a `char*`- 这将类似于 char 数组。但不一样。

char 数组（以及 C/C++ 中的任何数组）在编译时必须具有已知大小。然后编译器将静态“分配”这个内存，而不是在运行时通过`malloc`or分配`new`。该数组现在可以隐式转换为 a `char*`- 例如，当您打印它时会发生这种情况。看下面的代码：

```
char* foo = "Hello world"; 
```

这实际上是这样的：

```
// Compiler generated "global constant",
// somewhere in your executable
const char fooString[] = "Hello world";

char* foo = fooString; 
```

对于您在代码中使用的每个字符串文字，编译器都会生成这样一个“全局常量”。通过分配给一个 char 指针，指针现在指向该常量的内存地址，因此可以打印它、索引它（`foo[2]`）、复制它等。

如果您使用 char 数组，编译器还将在编译时分配空间。`char sname[10]`例如，将导致类的每个对象包含`abc`10 个字符的内存（除了其他成员等）。现在，当您`sname`在代码中引用时，它的类型将为`char[10]`，但可以（隐式）转换为`a`char*`指向数组中的第一个字符。现在让我们看看下面的代码：

```
grade = "First";
grade = "Second";
grade = "Third"; 
```

如果我们记得字符串文字被转换为全局常量，它实际上类似于以下内容：

```
const char[] str1 = "First";
const char[] str2 = "Second";
const char[] str3 = "Third";

grade = str1;
grade = str2;
grade = str3; 
```

正如您现在可能猜到的那样，如果是 char 指针，这将很好地工作`grade`：它只会指向常量字符串文字之一，然后可以用于打印它等。但是如果`grade`是数组，编译器会看到来自的赋值`char*`to `char[]`- 这是不可能的。但可以使用`strcpy`- 为什么？因为`strcpy`将 char 指针作为参数。因此，编译器会将 char 数组隐式转换`grade`为指向其第一个元素的指针，并将其传递给`strcpy`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T10:04:35.290

您已将**Grade**定义为**char**而不是**char ***。请将其更新为**char ***然后您可以分配这些值，例如“First”等

**编辑**

```
#include <iostream.h>
#include <conio.h>

class abc
{
    private:
            int rno,m1,m2,tot;
            char sname[10];
            char * grade;
    public:
            void getinput()
            {
                cout<<"Enter roll no:"<<endl;
                cin>>rno;
                cout<<"\nEnter mark 1:"<<endl;
                cin>>m1;
                cout<<"\nEnter mark 2:"<<endl;
                cin>>m2;
                cout<<"\nEnter student name:"<<endl;
                cin>>sname;
                cout<<endl;
                // Getting the returns.
                //tot = gettotal();
                //grade = getgrade();
            }

            void gettotal()
            {
                tot = m1+m2;
                // Returning the total to getinput's "tot" part.
                //return (tot);
            }

            void getgrade()
            {
                if(tot >= 150)
                {
                    grade = "First";
                }
                else if(tot >= 100)
                {
                    grade = "Second";
                }
                else
                {
                    grade = "Third";
                }
                // Returning the total to getinput's "grade" part.
                //return (grade);
            }

            void display()
            {
                cout<<sname<<"'s total grade ranks: "<<grade;
            }
 };

 int main()
 {
    abc a;
    a.getinput();
    a.gettotal();
    a.getgrade();
    a.display();
 } 
```

# javascript - jquery 和 javascript 函数计时

> ID：14316289
> 
> 赞同：0
> 
> 时间：2013-01-14T10:00:49.253
> 
> 标签：javascript, jquery

我正在尝试编写一个基于 cookie 的菜单，其中包含三个选项（三个链接）。现在我希望当用户访问网站时，他们必须选择三个选项之一。用户的选择可以存储在 cookie 中，这样下次当他到达同一站点时，他不必再次进行选择，并且必须自动将他引导到他之前的选择。

这是我的代码

```
</style>
<!-- style Develpor page ends here-->
<script src="jqery1.8.js"></script>
<script type="text/javascript">

var val;

$(document).ready(function (e) {
  $('.nav a').click(function (event) {
    event.preventDefault();
    val = $(this).index();

    if (val == 0) {

      $('#hide_main').hide();
      $('.main_BSNS').animate({
        opacity: "show",
        height: "400px"
      }, 'slow')

    } //if val==0 ends here

    else if (val == 1) {

      $('#hide_main').hide();
      $('.main_ACTNT').animate({
        opacity: "show",
        height: "400px"
      }, 'slow')

    } else if (val == 2) {

      $('#hide_main').hide();
      $('.main_devp').animate({
        opacity: "show",
        height: "400px"
      }, 'slow')

    }
  });
});

<!--cookies starts here-->
function getCookie(c_name) {
  var i, x, y, ARRcookies = document.cookie.split(";");
  for (i = 0; i < ARRcookies.length; i++) {
    x = ARRcookies[i].substr(0, ARRcookies[i].indexOf("="));
    y = ARRcookies[i].substr(ARRcookies[i].indexOf("=") + 1);
    x = x.replace(/^\s+|\s+$/g, "");
    if (x == c_name) {
      return unescape(y);
    }
  }
}

function setCookie(c_name, value, exdays) {
  var exdate = new Date();
  exdate.setDate(exdate.getDate() + exdays);
  var c_value = escape(value) + ((exdays == null) ? "" : "; expires=" + exdate.toUTCString());
  document.cookie = c_name + "=" + c_value;
}

function checkCookie() {
  var username = getCookie("BSNS");
  if (username != null && username != "") {
    $('#hide_main').hide();
    $('.main_BSNS').animate({
      opacity: "show",
      height: "400px"
    }, 'slow')

  } else {

    username=val;
    alert(val);
    if (username != null && username != "") {
      setCookie("BSNS", username, 365);
      $('#hide_main').hide();
      $('.main_BSNS').animate({
        opacity: "show",
        height: "400px"
      }, 'slow')

    }
  }
}
<!--cookies ends here-->
</script> 
```

现在函数`checkCookie()`由 body 调用，`onload="checkCookie()"`并且警报返回值，`val`因为`undefined`我知道这是因为`checkCookie()`之前正在加载`document.write`但我不知道如何克服这个困难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:24:40.853

嘿，伙计们看看这个……我做了一个新代码，它确实对我有用……我把它放在这里，这样寻找像我这样的活动的人可能会发现它很有帮助……

```
<script type="text/javascript">
var val,cookiee;
$(document).ready(function(e) {

            $('.nav a').click(function(event) {
                event.preventDefault();
                 val=$(this).index();

                if(val==0){

                $('#hide_main').hide();
                $('.main_BSNS').animate({opacity:"show",height:"400px"},'slow')

                    var value="BSNS"
                    var today = new Date();
                    var expire = new Date();
                    nDays=1;
                    expire.setTime(today.getTime() + 3600000*24*nDays);
                    document.cookie = escape(value) + ";expires="+expire.toGMTString();

                    }//if val==0 ends here

                else if(val==1){

                    $('#hide_main').hide();
                    $('.main_ACTNT').animate({opacity:"show",height:"400px"},'slow')                                                

                    var value="ACTNT"
                    var today = new Date();
                    var expire = new Date();
                    nDays=1;
                    expire.setTime(today.getTime() + 3600000*24*nDays);
                    document.cookie = escape(value) + ";expires="+expire.toGMTString();
                    }

                else if(val==2){

                    $('#hide_main').hide();
                    $('.main_devp').animate({opacity:"show",height:"400px"},'slow')                                             

                    var value="APP"
                    var today = new Date();
                    var expire = new Date();
                    nDays=1;
                    expire.setTime(today.getTime() + 3600000*24*nDays);
                    document.cookie = escape(value) + ";expires="+expire.toGMTString();

                    }

            });
});
function checkCookie(){

cookiee=document.cookie;//assigning cookie value to var cookiee
var check_BSNS=cookiee.match(/BSNS/);//checking if cookie has word BSNS
var check_ACTNT=cookiee.match(/ACTNT/);//checking if cookie has word ACTNT
var check_APP=cookiee.match(/APP/);//checking if cookie has word BSNS

if(check_BSNS=="BSNS" && check_ACTNT==null && check_APP==null)//code to executed if cookie has BSNS
{
                $('#hide_main').hide();
                $('.main_BSNS').animate({opacity:"show",height:"400px"},'slow')

    }

else if(check_BSNS==null && check_ACTNT=="ACTNT" && check_APP==null)//code to executed if cookie has ACTNT
{
            $('#hide_main').hide();
            $('.main_ACTNT').animate({opacity:"show",height:"400px"},'slow')                                                

    }

else if(check_BSNS==null && check_ACTNT==null && check_APP=="APP")//code to executed if cookie has APP
{
            $('#hide_main').hide();
            $('.main_devp').animate({opacity:"show",height:"400px"},'slow')                                                     

    }

} 
```

window.onload=checkCookie();// 此代码将在窗口打开后立即加载函数 checkCookie...

现在这个 checkCookie() 函数将被 body onload="checkCookie()" 调用....我只是把注释放在那里以显示 co 的工作

# c++ - 二维数组分配，C++

> ID：14316296
> 
> 赞同：0
> 
> 时间：2013-01-14T10:01:03.573
> 
> 标签：c++, arrays

我想要一个数组`int candidates[9][]`，其中第一个维度是已知的（9），第二个维度取决于执行。

我发现分配数组的方法如下：

```
int *candidates[9]; /* first allocation at declaration */
for(int i=0;i<9;i++) candidates[i] = new int[6]; /* allocation at execution */ 
```

但是当我像那样使用它并尝试访问时`candidates[i][j]`，它不起作用。我使用返回和 int[] 大小正确`candidate[i]`的函数进行初始化，但其内容是错误的。`fun()``candidate[i][j]`

```
candidates[0] = fun(); 
```

我不明白我错在哪里......谢谢你的帮助:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:03:46.407

尝试使用 int`*candidates[9]`而不是`int candidates[9][]`它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:22:01.257

为什么不试试`vector`STL 中的模板类...代码更整洁、更全面...

```
#include <iostream>
#include <vector>

using namespace std;

int main()
{
    vector<int> arrayOfVecs[9];

    //use each array to put as many elements you want, each one different
    arrayOfVecs[0].push_back(1);
    arrayOfVecs[1].push_back(100);
    .
    .
    arrayOfVecs[1].push_back(22);
    arrayOfVecs[0].pop_back();
    arrayOfVecs[8].push_back(45);

    cout<<arrayOfVecs[1][0]<<endl;//prints 100

    return 0;
} 
```

**带有指针数组**

```
int main()
{
    int* arrayOfPtrs[9];

    for(int index = 0;index<9;index++)
    {
        int sizeOfArray = //determine the size of each array
        arrayOfPtrs[index] = new int[sizeOfArray];

        //initialize all to zero if you want or you can skip this loop
        for(int k=0;k<sizeOfArray;k++)
            arrayOfPtrs[index][k] = 0;

    }

    for(int index = 0;index<9;index++)
    {
        for(int k=0;k<6;k++)
            cout<<arrayOfPtrs[index][k]<<endl;
    }

    return 0; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T10:38:16.183

尝试`int **candidates=0;`后跟`candidates = new int *[9] ;`.

代码：

```
#include <iostream>
using namespace std;

int main(void)
{

    int **candidates=0;//[9]; /* first allocation at declaration */
    candidates = new int *[9] ;
    for(int i=0;i<9;i++) candidates[i] = new int ; /* allocation at execution */

    for(   i = 0 ; i < 9 ; i++ )
    {
        for( int  j = 0 ; j < 9 ; j++ )
        {

            candidates[i][j]=i*j;
            cout<<candidates[i][j]<<" ";
        }
        cout<<"\n";
    }

    cout<<" \nPress any key to continue\n";
    cin.ignore();
    cin.get();

   return 0;
} 
```

# ios - 由于 UIView 动画导致不可预测的崩溃

> ID：14316303
> 
> 赞同：0
> 
> 时间：2013-01-14T10:01:29.180
> 
> 标签：ios, uiviewanimation

我制作了一个自定义活动指示器以在项目中使用。我为此旋转了一个静态加载器图像。

```
- (void) rotate {
    lastInstance++;
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector:@selector(rotate)];
    [UIView setAnimationDuration:0.1];
    [UIView setAnimationCurve:UIViewAnimationCurveLinear];
    spinnerImageView.layer.transform = CATransform3DMakeRotation(M_PI*(lastInstance%10)/5, 0.0, 0.0, 1.0);
    [UIView commitAnimations];
} 
```

包含在`spinnerimageview`一个超级视图容器中，它带有静态加载器图像。它工作正常，除了在没有任何错误消息的情况下意外崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:07:53.530

看起来你陷入了一个永无止境的递归。你如何决定何时停止旋转？

每次旋转动画完成时，它都会`rotate`再次调用，似乎看不到尽头。

您看到的崩溃可能是堆栈溢出（多么恰当）。

我建议重新考虑如何决定动画是否可以继续。

# c# - c#不能声明具有相同参数的静态和非静态方法？

> ID：14316305
> 
> 赞同：6
> 
> 时间：2013-01-14T10:01:35.197
> 
> 标签：c#, class, methods

如果我尝试使用相同的参数声明静态和非静态方法，编译器将返回错误：类型“Test”已经定义了一个名为“Load”的具有相同参数类型的成员。

```
 class Test
    {
        int i = 0;

        public int I
        {
            get { return i; }
            set { i = value; }
        }

        public bool Load(int newValue)
        {
            i = newValue;
            return true;
        }

        public static Test Load(int newValue)
        {
            Test t = new Test();
            t.I = newValue;
            return t;
        } 
```

据我所知，这两种方法不能混合使用，在对象上调用非静态方法，而在类上调用静态方法，那么为什么编译器不允许这样的事情，有没有办法做类似的事情？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T10:04:58.033

如果您的`Test`班级有这样的方法：

```
public void CallLoad()
{
    Load(5);
} 
```

编译器不知道要使用哪个 Load()。类成员完全允许调用没有类名的静态方法。

至于如何做类似的事情，我想你最好的办法是给方法类似但不同的名称，例如将`static`方法重命名为`LoadTest()`or `LoadItem()`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T10:04:50.040

在类本身内部，您可以在没有实例或类名的情况下调用实例方法和静态方法，因此如果名称和参数相同，则两者无法区分：

```
class Test
{
    public void Foo()
    {
        Load(0); // Are you trying to call the static or the instance method?
    }

    // ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T10:13:57.257

方法的签名是名称和参数（数字和类型）的组合。

在您的情况下，您的 2 种方法具有相同的签名。一个是静态的，另一个不是静态的这一事实对于接受它们作为类的有效方法没有任何影响。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T10:05:30.617

我不这么认为。如果此类中的非静态方法调用 Load(intValue)。将调用哪个方法？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T10:06:15.553

这两种方法具有相同的名称，在相同的类（范围）中定义并具有相同的签名。C# 不允许这样做。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T10:14:15.343

该问题与写作`this`或`classname`. C# 规范允许您使用对象实例调用静态方法：

```
AClass objectA = new AClass();
objectA.CallStaticMethod(); 
```

此代码是有效的，因此编译器永远无法知道您是在调用静态方法还是实例方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-14T10:43:17.123

在 C# 中，方法不能被返回类型重载。它必须至少有一组不同的参数，不管方法是否是静态的。

# javascript - 如何使我的“电话”字段就像 Google 注册页面一样

> ID：14316306
> 
> 赞同：-3
> 
> 时间：2013-01-14T10:01:43.883
> 
> 标签：javascript, jquery, jquery-mobile, country-codes

我有“ `Phone Number`”字段我需要做的是使它像下图一样。默认将是用户当前位置国家代码

![在此处输入图像描述](../Images/691fee95fb117eba956523e976d9654b.png)

当我点击它时，它会像这样打开![在此处输入图像描述](../Images/24c6b9e4d0fb1ddd98dc78fd56c00de7.png)

注意：我不需要国家标志，它是 jQuery Mobile 站点。谁能提供我的jsfiddle？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:08:48.640

您是否考虑过使用带有国家名称的 jquery 皮肤下拉列表，并简单地使用选定的选项将国家代码添加到您的文本框中？

更新：它**实际上**是一个下拉列表。考虑下面的 jQuery TimePicker 插件片段：

```
// some default cars
    var newHTML = '';
    var $t = $(this);

    // calculate the offsets
    var height = this.height() + 1;
    var width = this.outerWidth();

    // generate our html dropdown
    var timeMargins = ['00', '15', '30', '45'];
    newHTML += ' <select style="position: absolute; left:0;top:' + height + 'px; width: ' + width + 'px;" size="7">'
    for (var h = params.minHour; h <= params.maxHour; h++)
    {
        for (var i = 0; i < timeMargins.length; i++)
        {
            if (h == params.maxHour && timeMargins[i] >= params.maxMinute)
            {
                //do nothing
            }
            else
            {
                var newhour = "" + h;
                var v = (newhour.length == 1 ? '0' : '') + h + ':' + timeMargins[i];
                newHTML += '<option>' + v + '</option>';
            }
        }
    }
    newHTML += '</select>';

    var id = this.attr('id');
    var newid = id + '-container';

    // wrap the target in the div
    $t.wrap('<div id="' + newid + '" style="position: relative; display: inline;"></div>');
    $t.after(newHTML); 
```

它应该可以帮助您了解如何通过 jQuery/javascript 创建下拉列表。

# c# - 文件写了 3 次 C#

> ID：14316308
> 
> 赞同：1
> 
> 时间：2013-01-14T10:01:55.197
> 
> 标签：c#, utf-8

我有这个重复3次的代码：

```
private static void convert(object source, FileSystemEventArgs f)
{
    string FileName;
    FileName = f.FullPath;

    string destinationFile = @"Y:\test\test.xml";
              System.Threading.Thread.Sleep(2000);
   try
   {

        Encoding utf8 = new UTF8Encoding(false);
        Encoding ansi = Encoding.GetEncoding(1256);
        System.Threading.Thread.Sleep(2000);

        string xml = File.ReadAllText(FileName, ansi);
       XDocument xmlDoc = XDocument.Parse(xml);
            **Console.WriteLine("1st");**
            File.WriteAllText(
               destinationFile,
                @"<?xml version=""1.0"" encoding=""utf-8""?>" + xmlDoc.ToString(),
               utf8
            );
    } 
```

以粗体检查上述内容。它写了3次。我刚刚把它进行了测试。但是为什么它写出3次..意味着正在写入的文件也被写了3次。

我从 filesystemwatcher 函数调用此函数以监视文件夹是否已更改，然后将文件转换为 utf-8 并将其放入目标文件中。

编辑1：这是我的观察者。你能检查一下这是否正常：

```
private static void WatchFile()
    {
                watcher.Path = @"C:\project";

                   watcher.NotifyFilter = NotifyFilters.LastWrite;
        watcher.Filter = "*.xml";

        watcher.Changed += new FileSystemEventHandler(convert);
        watcher.Error += new ErrorEventHandler(WatcherError);
        Console.WriteLine("2nd");
        watcher.EnableRaisingEvents = true;

    } 
```

仍然不知道为什么它会重复 3 次。

编辑2：

这是我的完整代码：

```
using System;
using System.IO;
using System.Text;
using System.Xml;
using System.Xml.Linq;
using System.Collections.Generic;
using System.Linq;

class Test
{
 class Class1
{
    private static FileSystemWatcher watcher =
       new FileSystemWatcher();

    public static void Main()
    {
        WatchFile();
      Console.ReadLine();
     }

    private static void WatchFile()
    {
        watcher.Path = @"C:\project";

                    watcher.NotifyFilter = NotifyFilters.LastWrite;
        watcher.Filter = "*.xml";

        watcher.Changed += new FileSystemEventHandler(convert);
        watcher.Error += new ErrorEventHandler(WatcherError);
        Console.WriteLine("2nd");
        watcher.EnableRaisingEvents = true;

    }

    public static string CrL = "\r\n";

    private static void convert(object source, FileSystemEventArgs f)
    {
        string FileName;
        FileName = f.FullPath;

               string destinationFile = @"Y:\test\OnAirNow.xml";

                 System.Threading.Thread.Sleep(2000);
       try
       {

            Encoding utf8 = new UTF8Encoding(false);
            Encoding ansi = Encoding.GetEncoding(1256);
            System.Threading.Thread.Sleep(2000);

            string xml = File.ReadAllText(FileName, ansi);
           XDocument xmlDoc = XDocument.Parse(xml);
                Console.WriteLine("1st");
                File.WriteAllText(
                   destinationFile,
                    @"<?xml version=""1.0"" encoding=""utf-8""?>" + xmlDoc.ToString(),
                   utf8
                );

        }
        catch (Exception e)
        {
            Console.WriteLine("The process failed: {0}", e.ToString());
        }

    }

    private static void WatcherError(object source, ErrorEventArgs e)
    {

        Exception watchException = e.GetException();
                   watcher = new FileSystemWatcher();
        while (!watcher.EnableRaisingEvents)
        {
            try
            {
                                   WatchFile();
                Console.WriteLine("I'm Back!!");
            }
            catch
            {
                                    System.Threading.Thread.Sleep(2000);
            }
        }
    }

  }  
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T10:11:35.177

一个常见的模式是在开始处理事件时`FileSystemWatcher`设置`EnableRaisingEvents`为：`false`

```
this.fileSystemWatcher = new FileSystemWatcher()
{
    Path = AppDomain.CurrentDomain.SetupInformation.ApplicationBase,
    NotifyFilter = NotifyFilters.LastWrite,
    Filter = Path.GetFileName(AppDomain.CurrentDomain.SetupInformation.ConfigurationFile)
};

this.fileSystemWatcher.Changed += this.ConfigChanged;
this.fileSystemWatcher.EnableRaisingEvents = true; 
```

和

```
public void ConfigChanged(object sender, FileSystemEventArgs e)
{
    try
    {
        this.fileSystemWatcher.EnableRaisingEvents = false;
        s_logger.Info("Configuration file changed.");
        // reload config here
        s_logger.Info("Configuration settings reloaded.");
    }
    catch (Exception exception)
    {
        s_logger.Error(exception.Message);
        s_logger.Error("Failed to reload configuration settings.");
    }
    finally
    {
        this.fileSystemWatcher.EnableRaisingEvents = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T10:25:15.313

FileSystemWatcher 可能会针对一个文件更改引发多个事件，请查看：

> 常见的文件系统操作可能会引发多个事件。例如，当一个文件从一个目录移动到另一个目录时，可能会引发几个 OnChanged 以及一些 OnCreated 和 OnDeleted 事件。移动文件是一个复杂的操作，由多个简单的操作组成，因此会引发多个事件。同样，某些应用程序（例如，防病毒软件）可能会导致 FileSystemWatcher 检测到的其他文件系统事件。

[MSDN 中的 FileSystemWatcher 类](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher%28v=vs.90%29.aspx)

# c# - 想要超链接到控制器方法而不是视图

> ID：14316309
> 
> 赞同：1
> 
> 时间：2013-01-14T10:01:56.373
> 
> 标签：c#, razor, asp.net-mvc-4, hyperlink

我希望 Logout 链接执行位于`HomeController`而不是显示新的`View`. 我该如何构建这个？

控制器方法：

```
public ActionResult LogoutProcess()
    {
        previousLoggedIn = WebSecurity.CurrentUserName;
        WebSecurity.Logout();
        return RedirectToAction("Logout", "Home");
    }

    public ActionResult Logout(HomeModels.LogoutModel model)
    {
        model.PreviouslyLoggedInUsername = previousLoggedIn;
        return View(model);
    } 
```

看法：

```
<a href = "@Url.Action("LogoutProcess", "Home")">Logout</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:06:03.773

您可以使用标准链接，针对该操作

```
@Url.Action("LogoutProcess", "Home") 
```

“技巧”是在您的操作结束时*重定向*到其他视图`LogoutProcess()`：

```
public ActionResult LogoutProcess()
{
    // TempData to transfer user name      
    TempData["previousLoggedIn"] = WebSecurity.CurrentUserName;
    WebSecurity.Logout();
    return RedirectToAction("Logout", "Home");
}

public ActionResult Logout(HomeModels.LogoutModel model)
{
    // fill model from TempData
    model.PreviouslyLoggedInUsername = TempData["previousLoggedIn"];
    return View(model);
} 
```

通过`CurrentUserName`传递给其他动作`TempData`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:06:17.610

试试这个：

```
public ActionResult LogoutProcess()
{
    WebSecurity.Logout();
    //return null;
    Return RedirectToAction("Index");//or whatever page you want to display after logout.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T10:13:16.890

您是否考虑过无内容 http 状态码结果？

```
return new HttpStatusCodeResult(HttpStatusCode.NoContent); 
```

# ios - UIImage 的 imageWithContentsOfFile 中的内存泄漏

> ID：14316311
> 
> 赞同：2
> 
> 时间：2013-01-14T10:01:58.113
> 
> 标签：ios, objective-c, cocoa-touch

我有一个表格视图，其中有 10 个显示图像的单元格。每次滚动时，应用程序都会分配更多内存（但不会在泄漏中显示这一点），但在分配中，我可以看到每次滚动时内存都会增加 2 兆字节。

这是泄漏的代码，特别是我设置图像视图图像的行（如果我将其注释掉，它不会泄漏）：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    cell.imageView.image = [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"background_stripes" ofType:@"png"]];
    return cell;
} 
```

![在此处输入图像描述](../Images/ce3537960d5491034f1fbcd6a9512477.png)

**更新：**我用 1 个视图控制器创建了一个简单的新项目：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    self.tableView.rowHeight = 130.f;

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return 16;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.imageView.image = [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"background_stripes" ofType:@"png"]];

    return cell;
} 
```

非常简单...我在这里看不到任何问题...但是滚动时会泄漏，内存消耗会随着时间的推移而增长...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:13:24.737

问题是没有泄漏=）。上图说明了分配而不是泄漏。泄漏在底部图形中，并且它们的图形是红色的，因此没有内存泄漏。您可能认为“Overall Bytes”代表内存泄漏，但事实并非如此，它只是程序在运行时分配的字节数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:11:04.263

我对 dataWithContentsOfURL 有同样的问题：@autoreleasepool 解决了它

试试这个：

```
@autoreleasepool {
     self.image = [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"background_stripes" ofType:@"png"]];
} 
```

# qml - 如何在 BlackBerry 10 Cascades 中创建图像按钮？

> ID：14316312
> 
> 赞同：3
> 
> 时间：2013-01-14T10:02:01.813
> 
> 标签：qml, blackberry-10, blackberry-cascades

我需要在 Cascades Qml 中创建自定义 UI 元素，例如按钮和带有图像背景的列表，但是似乎没有办法设置按钮等控件的背景。

我在任何地方都找不到这样的例子。

似乎可以通过使用容器并创建自定义控件来实现这一点，但我看不到让该容器具有 onClick 事件的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T16:11:23.803

在BB10中自定义控制其实很简单。这是您尝试执行的操作的示例：

```
Container {
    property alias text: label.text
    property alias image: imagev.imageSource
    ImageView {
        id: imagev
        imageSource: "asset:///images/Button1.png"
    }        
    Label {
        id: label
        text: "demo"            
    }

    gestureHandlers: [
        TapHandler {
             onTapped: {
                 //do tapped code
             }                
        },
        LongPressHandler {
            onLongPressed: {
                //do long press code
            }            
        }        

    ]
} 
```

将其保存为“CustomButton.qml”，然后在您的主 QML 文件中，您可以像这样访问它：

```
Page {
    CustomButton {
        text: "my text"
        image: "images/myimage.png"
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T10:43:20.090

您可以通过使用**MouseArea**元素来做到这一点：

```
Item {
  Image {
    anchors.fill: parent
    source: "yourimg.png"
  }
  MouseArea {
    anchors.fill: parent
    onClicked: {
      console.log("do your action here!")
    }
  }
} 
```

如果您将此代码放在单独的 QML 文件中，例如 CustomButton.qml。您可以在其他 QML 文件中使用它，例如自定义按钮元素：

```
CustomButton {
} 
```

[您可以在此处](http://doc.qt.digia.com/4.7.1/qml-extending-types.html#defining-new-components)阅读有关此内容的更多信息。

# iphone - 隐藏在其他类中声明的 TableView

> ID：14316318
> 
> 赞同：0
> 
> 时间：2013-01-14T10:02:11.560
> 
> 标签：iphone, ios, ipad, object, hidden

如何隐藏我在另一个类中声明的 tableView..

这是我的代码片段，

`CRStoreView.h`

```
@interface CRStoreView : UIView <UITableViewDelegate, UITableViewDataSource>{
            ....
  }

@property (strong, nonatomic) IBOutlet UITableView *tblStore; 
```

我想把它隐藏`tblStore`在我的新课程中（CRNextView.m）..

我试过了，但桌子没有隐藏，

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{

    NSLog(@"touchesBegan");
    CRStoreView *Obj = [[CRStoreView alloc] init];
    [Obj.tblStore setHidden:YES];
} 
```

**如何解决？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:11:30.920

一种方法是使用委托。创建`CRStoreView`一个委托`CRNextView`并从委托上调用 `setHidden`方法`CRNextView`。`CRStoreView`或者您可以传递to的当前实例`CRNextView`并访问 tableView 对象。

# sql - 访问 SQL 聚合函数查询

> ID：14316320
> 
> 赞同：0
> 
> 时间：2013-01-14T10:02:29.750
> 
> 标签：sql, ms-access-2007

我想做一个 SQL 查询来从下表中提取汇总统计信息：

```
 Company | Product X1 | ProdX2 | ... | ProdX10 | ProdY1 | ProdY2 | ... | ProdY10

    ABC               5         3      ...     6           5       8      ...      12
    EDF               2        NULL    ...     5          Null     1      ...       6
     .                .         .       .      .           .       .       .        . 
     .                .         .       .      .           .       .       .        .
     .                .         .       .      .           .       .       .        . 
    XYZ             NULL        3      ...     14          7       2      ...       8 
```

查询的结果应该是这样的（其他设计建议表示赞赏）

```
Product   |   Average   |      Min     | Covariance with corresponding X or Y Product
ProdX1      Avg(ProdX1)    Min(ProdX1)    Covar(ProdX1,ProdY1)   
ProdX2      Avg(ProdX2)    Min(ProdX2)    Covar(ProdX2,ProdY2)
  .
  .
  .
ProdY10     Avg(ProdY1)   Min(ProdY10)    Covar(ProdY10,ProdX10) 
```

我可以使用不同的聚合函数，当然 Covar (X1,Y1) = Covar(Y1,X1)

但是，我不确定如何创建返回所需结果的查询。任何建议都非常感谢。

非常感谢。

# json - 在自助服务终端上使用 OAuth2.0 (Google API)

> ID：14316326
> 
> 赞同：0
> 
> 时间：2013-01-14T10:02:49.330
> 
> 标签：json, api, oauth, kiosk

我正在尝试在信息亭模式下设置一台 PC，它将显示来自 Google 日历的事件列表。我最初想为此使用 Google API（无论是 JS 客户端、Python 客户端还是其他），但似乎所有这些都需要用户通过浏览器中的页面进行同意。这是不可接受的，因为它是一个独立的系统——没有用户可以点击任何东西。该系统将每天进行一次电源循环，因此“一次同意永远运行”也是不可能的。

有没有一种方法可以使用经过身份验证的（OAuth2.0）Google API 来访问日历数据而无需任何用户干预（除了一次性初始设置）？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:42:05.370

这正是 OAuth 应该能够做到的。您应该进行一次性设置（启动流程、授权请求并获取令牌），然后存储令牌。存储令牌后，只要您拥有令牌，就不需要任何更多的用户操作。然后，这些令牌将用于从 Google 日历中检索数据。

# c++ - 除了使用 ofstream 将数据写入 C++ 中的 .txt 文件之外的任何其他方式

> ID：14316327
> 
> 赞同：0
> 
> 时间：2013-01-14T10:02:50.317
> 
> 标签：c++, omnet++

我尝试使用`ofstream`将数据写入 OMNET++ 中的 .txt 文件，如下`iostream`所示`fstream`：

```
ofstream myfile;
myfile.open ("example.txt");
myfile << "Writing this to a file.\n";
myfile.close(); 
```

但是 OMNET++ 没有解析`open`和`close`功能。

`ofstream`除了在 C++ 中实现在 .txt 文件中读取和写入数据的相同任务之外，有人可以提出任何建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T10:13:40.943

*将我的评论变成答案。*

`ofstream`（以及所有其他标准库类）在 namespace 中定义`std`。您需要使用限定名称（例如`std::ofstream`）来访问它们。

# mobile - 将 Adob e AIR 移动应用程序无线连接到 Arduino - 有哪些选项？

> ID：14316330
> 
> 赞同：3
> 
> 时间：2013-01-14T10:03:09.563
> 
> 标签：mobile, air, bluetooth, arduino, xbee

有没有办法在没有电脑或路由器的情况下将 Adob​​e AIR 移动应用程序无线连接到 Arduino 硬件？使用蓝牙还是直接连接到连接到 Arduino 的 Xbee 部件？

我需要 iOS 和 android 解决方案

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:25:39.530

您可以使用适用于[iOS 和 Android](http://www.adobe.com/devnet/air/articles/building-ane-ios-android-pt1.html)[的 Adob​​e AIR 的 Native Extensions (ANE)](http://www.adobe.com/devnet/air/native-extensions-for-air.html)，尽管这意味着您可能需要进行一些 C 编码（或者至少对 C 编程语言有基本的了解）。已经使用 ANE 为蓝牙或 Arduino 连接创建了几个项目。

Google Code 上有一个名为[as3-arduino-connector](http://code.google.com/p/as3-arduino-connector/)的基于 ANE 的项目，它为您提供 ActionScript 3 API 并模仿 Arduino 串行端口。

另一个有用的项目可能是[AirNativeiOS-Bluetooth](https://github.com/jamieowen/AirNativeiOS-Bluetooth)，这是一个 AIR Native Extension，用于为 iOS 应用程序添加蓝牙支持。Android 的一个对应项目是[Bluetooth ANE](http://as3breeze.com/bluetooth-ane/)，尽管该网站提到它只是早期测试版，尚未准备好投入生产。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T16:59:25.557

Digi International 现在有[Wi-Fi XBee](http://www.digi.com/products/wireless-wired-embedded-solutions/zigbee-rf-modules/point-multipoint-rfmodules/xbee-wi-fi#overview)；这可能是一个不错的选择，因为 Android 和 iOS 设备已经有 Wi-Fi。更常用的 XBee 模块（系列 1 和 2）使用 802.15.4 网络（而不是 Wi-Fi 的 802.11）。

我个人还没有使用过，所以我不知道你如何访问连接到 Arduino 的串口。可以远程登录到 XBee 并从 Arduino 发送/接收数据。

# iphone - 远程通知警报框中的应用程序图标

> ID：14316332
> 
> 赞同：0
> 
> 时间：2013-01-14T10:03:23.910
> 
> 标签：iphone, push-notification

我正在使用 php 向 iOS 应用发送推送通知。

每当推送通知显示在 iPhone 中时，我都想在通知中显示我的应用程序图标。

如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:48:35.217

如果您正在寻找以下内容：

![推送通知](../Images/cdf28a3daa0c6db70784dee51986d986.png)

这是锁定屏幕中推送通知的默认行为。

您无需执行任何操作即可显示这样的通知。

图片来自[谷歌](http://www.google.co.in/imgres?hl=en&client=firefox-a&hs=Vti&sa=X&tbo=d&rls=org.mozilla:en-US:official&channel=np&biw=1600&bih=717&tbm=isch&tbnid=SSeStrn20KqzzM:&imgrefurl=http://thenextweb.com/apps/2012/10/29/netbot-for-app-net-gets-push-notifications-and-full-search-support/&docid=g30rJ3o74BwzfM&imgurl=http://cdn.thenextweb.com/wp-content/blogs.dir/1/files/2012/10/IMG_0942.png&w=640&h=960&ei=seHzUJTyBYPykQWZ5oFw&zoom=1&iact=hc&vpx=4&vpy=228&dur=6539&hovh=275&hovw=183&tx=79&ty=153&sig=105717649603477773507&page=1&tbnh=134&tbnw=89&start=0&ndsp=46&ved=1t:429,r:23,s:0,i:157)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T10:34:35.173

通知显示为横幅或警报。您无法在警报上设置任何应用程序图标，并且横幅上的图标会自动从捆绑包中的应用程序图标中获取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T10:16:44.703

推送通知可以做三件事：

1.  显示一条短信
2.  播放简短的声音
3.  在应用程序图标的徽章中设置一个数字。

我认为您不能在推送通知消息中手动设置应用程序图标。

Ray Wenderlich 在这方面做了一个很棒的教程。试试这两个链接：

第 1 部分：[http ://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

第 2 部分：[http ://www.raywenderlich.com/3525/apple-push-notification-services-tutorial-part-2](http://www.raywenderlich.com/3525/apple-push-notification-services-tutorial-part-2)

# php - 我的第一辆定制购物车

> ID：14316334
> 
> 赞同：0
> 
> 时间：2013-01-14T10:03:30.697
> 
> 标签：php, e-commerce, shopping-cart

我第一次为一个非常特殊的项目从头开始创建购物车。

此时我已经完成了所有步骤，从产品选择/定制，到购物车产品数量更新和其他需要的东西。

我的整个购物车都存储在会话变量中，加密。

我现在的问题是，我不知道通过 PayPal 结账的最佳方式是什么。

现在我建立购物车评论页面。问题是，如何将购物车信息发送到贝宝？

在表单内的评论页面中添加隐藏字段并使用 post 方法在 PayPal 中发送该信息是一种好方法吗？

这种方法不太好，因为具有知识的最终用户有能力更改该数据。

关于如何继续的任何想法？

# git - 从 git merge 添加文件和排除文件

> ID：14316341
> 
> 赞同：0
> 
> 时间：2013-01-14T10:03:55.787
> 
> 标签：git, git-merge

我有两个问题：我在本地仓库中添加了一个新分支，所以我有两个“master”和一个新的“new”。我在new中添加并提交了一些文件，但是当我切换回master时，新添加的文件仍在master中。怎么会这样 ？

顺便说一句，我想在新文件中添加很多我不想出现在主文件中的文件，我合并新文件和主文件（但也许我需要将这个“排除的主文件合并文件”合并到其他分支中）。我知道 .gitignore 但在这里我想将合并限制为一些特定的文件，如何做到这一点（我听说过子模块，但它似乎并没有算出我的具体问题）

# javascript - 指定你想要的事件

> ID：14316343
> 
> 赞同：1
> 
> 时间：2013-01-14T10:04:08.470
> 
> 标签：javascript, jquery, class, events, triggers

我有很多复选框。他们中的大多数都有一个类（a 类或 b 类），但其中一些同时具有两个类。

```
<input type="checkbox" class="a b"> 
```

我对这两个类都有相同的 jquery 事件（更改）。

```
$('.a').change(function(e){ // whatever });
$('.b').change(function(e){ // whatever }); 
```

在我的代码中，我必须从 .each() 中的输入触发事件“更改”。这意味着可以有上述任何情况的复选框。

```
$(this).trigger('change'); 
```

我的问题是，当我从具有两个类的复选框触发它时，它会触发 2 个不同的事件（这是逻辑）。但我只想触发一个类的选择更改事件。

有没有办法指定这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:10:23.800

为什么不这样指定？

```
$('.a:not(".a.b")').change(function(){
//only a
});

$('.a.b').change(function(){
//both
});

$('.b:not(".a.b")').change(function(){
//only b    
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:11:12.633

您可以通过过滤暴露这两个类的元素来解决您的问题。例如，仅`b`当元素不公开 class时才为 class 注册处理程序`a`：

```
$(".a").change(function(e) { /* whatever */ });
$(".b:not(.a)").change(function(e) { /* whatever */ }); 
```

# php - Arduino fopen 错误

> ID：14316346
> 
> 赞同：2
> 
> 时间：2013-01-14T10:04:33.730
> 
> 标签：php, serial-port, arduino

我正在尝试通过[PHP](http://en.wikipedia.org/wiki/PHP)将字符串发送到串行端口。但是当我执行它时出现此错误：

> 警告：fopen(com8) [function.fopen]：无法打开流：第 15 行 C:\server\web\arduino\index.php 中的权限被拒绝

```
<?php
    if(isset($_GET['command'])){
        $fp =fopen("com8", "w");
        $i = ($_GET['command'] > 0) ? $_GET['command'] : 0;
        echo "<p>Wrote $i </p>";
        fwrite($fp, chr($i));
        sleep(3);
        fclose($fp);
    }
?> 
```

Arduino 脚本

```
// Includes

#include <Servo.h>

// Aanmaken van de variabelen voor in de code

int ledPin = 13;
int motorPin = 12;
int USBnumber = 0;
Servo stuurServo;   // Create servo object to control a servo.
int pos = 90;       // Variable to store the servo position.

// Make the first setup.
void setup()
{
    pinMode(ledPin, OUTPUT);
    pinMode(motorPin, OUTPUT);
    stuurServo.attach(11);
    Serial.begin(9600);
    stuurServo.write(pos);
}

void loop()
{
    if (Serial.available() > 0) {
        USBnumber = Serial.read();
    }

    if (USBnumber > 0) {
        if (USBnumber == 1){ // Blink LED
            digitalWrite(ledPin, HIGH);
            delay(1000);
            digitalWrite(ledPin, LOW);
            delay(500);
            digitalWrite(ledPin, HIGH);
            delay(1000);
            digitalWrite(ledPin, LOW);
            delay(500);
            digitalWrite(ledPin, HIGH);
            delay(1000);
            digitalWrite(ledPin, LOW);
            delay(500);
        }else if(USBnumber == 2){ // Motor on for five seconds
            digitalWrite(motorPin, HIGH);
            delay(5000);
            digitalWrite(motorPin, LOW);
            delay(500);
        }else if(USBnumber == 3){ // Control servo +10 graden
            if(pos != 180){
              pos + 10;
              stuurServo.write(pos);
              delay(500);
            }
        }else if(USBnumber == 4){ // Control servo -10 graden
            if(pos != 0){
              pos - 10;
             stuurServo.write(pos);
            delay(500);
            }
        }else if(USBnumber == 5){ // Control servo left
             pos = 0;
             stuurServo.write(pos);
             delay(500);
        }else if(USBnumber == 6){ // Control servo right
             pos = 180;
             stuurServo.write(pos);
             delay(500);
        }else{
            delay(500);
        }
        USBnumber = 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T00:52:50.173

尝试使用以下内容，并在**w**的末尾添加**+**（即**w+**）。

 ******'w+'** - 打开读写；将文件指针放在文件的开头并将文件截断为零长度。如果该文件不存在，请尝试创建它。

```
$fp = fopen("com8", "w+"); 
```

见： http: [//php.net/manual/en/function.fopen.php](http://php.net/manual/en/function.fopen.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-17T02:35:53.373

在 fopen() 和 "w+" 之后 sleep(2)

```
$fp =fopen("com8", "w");
sleep(2); 
```****

# c++ - 从一个类到任何类的成员函数的函数指针

> ID：14316348
> 
> 赞同：0
> 
> 时间：2013-01-14T10:04:40.560
> 
> 标签：c++, c++11

我在定义一个可以指向任何成员函数（不仅仅是指定类的成员函数）的函数指针时遇到了困难。

例如，C++ 强制我指定指向成员函数的函数指针将指向的类：

```
typedef void (Foo::*MyFunctionPointerTypeName)(int); 
```

但是如果这个函数指针指向的类成员函数不在`Foo`呢？那么我将如何写这个，或者我可以使用什么替代方法？

* * *

**更新：**对于任何寻求如何使用 C++11 完成此任务的快速答案的人 `std::function`（因为有关该主题的教程似乎假设了很多读者）：

定义（从内部`Foo`）：

```
std::function<void(int)> _fun; 
```

绑定（来自任何类）：

```
objFoo->_fun = std::bind(&SomeOtherClass::memberFunction, 
    this, std::placeholders::_1); 
```

调用它（从内部`Foo`）

```
if(_fun != nullptr) _fun(42); 
```

如果你的函数没有参数，你可以删除`std::placeholders::_1`. 如果您的函数有两个参数，您**还需要将** `std::placeholders::_2`其作为参数添加到`std::bind`. 对于三参数、四参数等同样如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:25:54.990

使用继承：

```
#include <iostream>

struct Foo {};

struct Bar : public Foo
{
    int F0()
    {
        return 0;
    }
};

struct Baz : public Foo
{
    int F1()
    {
        return 1;
    }    
};

int main(int argc, char **argv)
{
    int (Bar::*pF0)() = &Bar::F0;
    int (Baz::*pF1)() = &Baz::F1;
    int (Foo::*pointer1)() = static_cast<int (Foo::*)()>(pF0);
    int (Foo::*pointer2)() = static_cast<int (Foo::*)()>(pF1);

    Bar r;
    Baz z;

    // Pointer to Foo member function calling Bar member function        
    std::cout << (r.*pointer1)() << '\n';
    // Pointer to Foo member function calling Baz member function
    std::cout << (z.*pointer2)() << '\n';

    return 0;
} 
```

[输出](http://ideone.com/iDBM98)：

```
0
1 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T10:26:52.510

您不能编写可以指向*任何*类的成员的成员指针。请记住：成员指针的参数之一是类实例本身。并且指针是有类型的，所以它的参数类型在很大程度上是指针类型的一部分。

但是，您*可以*使用`std::function`它，它可以存储各种可调用对象。你将如何实际调用它（即：你给它什么参数）取决于你的需要，因为你没有解释你想要做什么。

# php - 使用 PDO 检索存储在数据库中的数组

> ID：14316350
> 
> 赞同：0
> 
> 时间：2013-01-14T10:04:45.893
> 
> 标签：php, mysql, pdo

我有一个数组：`productid = [1,2]`。现在我想通过使用这部分代码从产品表中获取数据：

```
$sql = 'SELECT name FROM product WHERE id=:id';
$s = $pdo->prepare($sql);
foreach($productid as $id)
{
  $s->bindValue(':id', $id);
  $s->execute();
} 
```

当我返回如下名称时：

```
foreach($s as $row)
{
  $name[] = array(
      'name' => $row['name']
  );
} 
```

我刚得到第二个 id 的产品名称，但没有得到两个名称。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:17:17.020

> 我刚得到第二个 id 的产品名称，但没有得到两个名称。有什么问题？

您必须将您的`$name[] = $row['name'];`（是的，这是正确的符号）代码以及实际获取数据的代码放入 foreach 循环中。

您还可以形成一个`IN()`应该看起来像的语句`IN (?,?,?,?)`并在一个查询中运行它。像这样的东西（未经测试）：

```
$in   = trim(str_repeat('?,',count($productid)).",");
$sql  = "SELECT name FROM product WHERE id IN ($id)";
$stmt = $db->prepare($sql);
$stmt->execute($productid);
$name = $stmt->fetchAll(); 
```

# sql - from 语句中的 Sqlite 和嵌套查询

> ID：14316352
> 
> 赞同：1
> 
> 时间：2013-01-14T10:04:51.280
> 
> 标签：sql, sqlite

我目前正在使用 SQLite，我对这个查询感到害怕

```
 SELECT Cur.Name, SUM(Cur.Added+Cur.Removed) AS Lines, COUNT(DISTINCT(Cur.Author)) AS authCurrent,
       ( SELECT COUNT(DISTINCT(Author)) 
         FROM Change
         WHERE Extencion = "java" AND
             Date >= date('2012-04-08') AND
             Date < date('2012-04-15')
         ) AS totCurrent
    FROM 
       Change AS Cur,
       ( SELECT a.Name, COUNT(DISTICT(a.Author)) AS authLast
         FROM Change AS a
         WHERE a.Extencion = "java" AND
           a.Date >= date('2012-04-08') AND
           a.Date < date('2012-04-15')
       GROUP BY a.Name ) AS Previous
    WHERE
       Previous.Name = Cur.Name
       Cur.Extencion = "java" AND
       Cur.Date >= date('2012-04-15') AND
       Cur.Date < date('2012-04-22')
   GROUP BY Cur.Name 
```

它说“查询错误：靠近“Cur”：语法错误无法执行语句”我不知道，是不是因为SQLite不支持嵌套查询而导致查询不可执行？

无论如何，表更改具有以下形式

```
 Author | Path | Extencion | Name | Date | Added | Removed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:10:45.977

看来您`DISTINCT`在这一行拼写错误：

```
COUNT(DISTICT(a.Author)) AS authLast  -- change to DISTINCT 
```

您是否也以这种方式尝试过查询：

```
SELECT Cur.Name, 
  SUM(Cur.Added+Cur.Removed) AS Lines, 
  COUNT(DISTINCT(Cur.Author)) AS authCurrent,
  Previous.authLast AS totCurrent
FROM Change AS Cur
LEFT JOIN 
( 
  SELECT a.Name, COUNT(DISTINCT(a.Author)) AS authLast
  FROM Change AS a
  WHERE a.Extencion = "java" AND
    a.Date >= date('2012-04-08') AND
    a.Date < date('2012-04-15')
  GROUP BY a.Name
) AS Previous
  ON Previous.Name = Cur.Name
WHERE 
       Cur.Extencion = "java" AND
       Cur.Date >= date('2012-04-15') AND
       Cur.Date < date('2012-04-22')
GROUP BY Cur.Name, Previous.authLast 
```

# php - Codeigniter 内存从 XML 对象耗尽到数组

> ID：14316357
> 
> 赞同：1
> 
> 时间：2013-01-14T10:05:05.127
> 
> 标签：php, codeigniter, memory

我有一个 PHP 网站是使用 Codeigniter 框架构建的。我总是从 Apache 日志中收到以下错误消息：

> PHP 致命错误：在第 150 行的 /usr/local/apache2/htdocs/mywebsite/application/helpers/my_helper.php 中允许的内存大小为 1073741824 字节已用尽（试图分配 8192 字节）

关于第 150 行的 my_helper.php 如下：

```
function objectToArray( $object ){
if( !is_object( $object ) && !is_array( $object ) )
    {           
        return $object;
    }
    if( is_object( $object ) )
    {
        $object = get_object_vars( $object );   # <<<<<<< Line 150
    }   
    return array_map( 'objectToArray', $object );  
} 
```

“objectToArray”的功能是用来处理XML文件的XPATH结果对象（我使用simplexml_load_file来加载XML文件）。

> # 传递 XML 对象的示例如下：#

```
$xmlObject = simplexml_load_file(PATH_TO_XML_FILE, 'SimpleXMLElement', LIBXML_NOCDATA);
$data = $xmlObject->xpath(MY_XPATH);
$ary = objectToArray($data); 
```

我也尝试将 memory_limit 值设置为 unlimit(ini_set('memory_limit',-1))，但它仍然有错误。

是否有任何关于硬件或编程的调整以防止出现问题？谢谢！

# php - 在 magento 的购物车页面上添加其他信息

> ID：14316362
> 
> 赞同：0
> 
> 时间：2013-01-14T10:05:21.273
> 
> 标签：php, magento-1.7

我正在做一个 magento 定制网站，我需要将有关产品的一些附加信息添加到购物车页面、结帐页面。我是 magento 的新手，请帮助我该怎么做。

我在 app\design\frontend\base\default\template\checkout\cart\item\default.phtml 中尝试了此代码

```
$_product =$_item->getProductId();
 $_helper = $this->helper('catalog/output');
    $_product = $this->getProduct()
?>
<?php if($_additional = $this->getAdditionalData()): ?>

    <div class="availability in-stock"><b>Compatible with : </b><div class="button2" style="color:#77C25A;"><?php  echo $_additional['computer_manufacturers']['value']; echo " | "; echo $_additional['model_type']['value']; echo " | "; echo $_additional['model_version']['value'] ;  ?>  </div></div>

<?php endif;?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T23:26:33.723

您好，您可以尝试以下方法：

```
$product = Mage::getModel("Catalog/Product")->load($_item->getProduct()->getId()); 
//echo sprintf("<pre>%s</pre>",print_r($product->getData(),true));
echo $product->getColor(); //shows the key 3
echo $product->getData('color'); //shows the key 3
echo $product->getAttributeText('color'); //shows the text blue 
```

**使属性在前端可用：**

在管理属性页面上：

*   在前端允许 HTML 标签
*   在前端的产品视图页面上可见

删除对 sprintf 的评论以查看其中的内容。如果键中有 _，则应使用 CamelCase 表示法，以便 the_color 将变为 getTheColor()。

希望能帮助到你 ！

# django - django模板显示动态python代码调用结果

> ID：14316364
> 
> 赞同：0
> 
> 时间：2013-01-14T10:05:23.910
> 
> 标签：django

我可以在解释器中得到一个动态的 Python 函数调用结果。

```
def test1():
    ''' i assume it will cost 2 seconds '''
    #code here
    print 'test1 success...'

def test2():
    ''' i assume it will cost 2 seconds '''
    #code here
    print 'test2 success...'

def test3():
    ''' i assume it will cost 2 seconds '''
    #code here
    print 'test3 success...'

def run():
    test1()
    test2()
    test3() 
```

当我执行“运行”功能时，我可以在前 2 秒后在解释器屏幕上获取内容。

```
test1 success 
```

然后 4 秒后解释器屏幕上的内容：

```
test1 success...
test2 success... 
```

然后 6 秒后解释器屏幕上的内容（最终）：

```
test1 success...
test2 success...
test3 success... 
```

每个功能完成后，我可以在解释器屏幕上获得其结果或状态显示。

但是我怎样才能在 Django 模板中动态地发生这种情况呢？它与变量值变化不同吗？Javascript 和 AJAX 可以修复它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:10:21.513

如果您想动态更新模板中的变量，您需要 JavaScript 和 AJAX，是的。否则，您将不得不定期重新加载整个模板，这可能不是您想要的（并且不推荐这样做）。

处理 AJAX 调用的最佳方式是使用[`jQuery.ajax()`](http://api.jquery.com/jQuery.ajax/).

# java - 范围分页的数据库缓存策略

> ID：14316365
> 
> 赞同：2
> 
> 时间：2013-01-14T10:05:25.203
> 
> 标签：java, mysql, database, caching

需要有关缓存和分页的建议。场景是这样的。用户给变量范围（比如变量 X 从 x1 到 x2 和 Y 从 y1 到 y2），然后我从数据库中获取数据，然后一些逻辑对该结果进行排序并将第一页返回给用户..

对于每个用户，这些 (X & Y) 都是不同的。当用户要求第二页时问题开始我必须触发查询并再次订购结果并给出第二页结果。

这必须为每个用户请求完成..你能建议我任何缓存策略吗..（Java + mysql）如果我不清楚，请告诉我......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:27:21.210

如果您使用`hibernate`数据库访问权限，您可以允许`second_level_caching`EhCache 自动缓存您的结果。[在此处](http://www.javalobby.org/java/forums/t48846.html)阅读更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:32:43.033

我假设用户可以请求例如 x1 到 x100 并获得 100 个结果，并且您希望显示分页的结果，例如 10 个结果。

我有三个建议，每个都有不同的优点。

**依靠 MySQL 来做缓存。**
MySQL 非常擅长缓存。如果您多次重复相同的查询，那么 MySQL 将尝试为您缓存结果，从而使后续查询非常快（它们来自内存并且不触及磁盘）。如果您查询 x1 到 x100 并只显示 x1 到 x10，那么当您想显示第 2 页时，您再次查询 x1 到 x100 MySQL 可以使用自己的内部缓存。MySQL 缓存显然使用 RAM，因此您需要确保您的 DB 服务器有足够的 RAM 才能有效地进行缓存。您将不得不估计您希望缓存多少数据，看看这是否可行。

这是一个简单的解决方案，硬件 (RAM) 相当便宜*。

**内部缓存**
将整个 x1 到 x100 结果保存在您的应用程序中（例如在用户会话中）并显示请求页面的相关结果。这类似于使用 MySQL 进行缓存，但您将缓存移动到更靠近需要它的位置。如果您这样做，您必须自己考虑诸如缓存管理之类的事情（例如，何时使缓存过期、管理内存使用）。您可以为此使用现有的缓存工具，例如 ehcache。

**预取而不是缓存**
缓存需要大量内存。如果缓存不可行，那么您可能需要考虑预取策略。如果没有缓存，您可能会遇到响应时间变慢的情况，但通过预取可以在一定程度上缓解该问题。这是在用户查看一个页面后，您对用户可能查看的其他页面（通常是下一个和上一个）进行异步查找的地方。查找可能会很慢，但您*在用户请求之前就已经完成了，*因此在他们需要时立即准备好。

预取是 Web 应用程序中相当常见的技术。当用户查看页面时，应用程序可以在用户查看当前页面时使用 ajax 将上一页和下一页加载到幕后的 DOM 中。当用户单击“下一个”链接时，应用程序会修改 DOM 以显示下一页，而根本无需接触服务器。对用户来说，响应似乎是即时的。

*我曾经在 MySQL 管理课程上，关于性能的主题，导师说*任何人都*应该做的第一件事是为服务器提供尽可能多的 RAM，因为它支持。大多数服务器都可以装满 RAM（说的是 100 Gb），而成本低于为期 3 天的性能调整课程的成本。

# facebook-graph-api - 如何获取玩家的 is_eligible_promo 状态？新付款人促销现在不起作用

> ID：14316366
> 
> 赞同：0
> 
> 时间：2013-01-14T10:05:27.550
> 
> 标签：facebook-graph-api, facebook-fql, facebook-credits

现在，在用户信息的 Facebook[文档中](http://developers.facebook.com/docs/reference/fql/user)，似乎 is_eligible_promo 仅对应用程序可见，其中用户是管理员。但是根据[Payer Promotions 文档](https://developers.facebook.com/docs/payments/payer_promotion/)，在提示 Payer Promotions Dialog 之前，应用程序需要获取 is_eligible_promo 状态。现在 API 更改后，我们如何检测玩家是否有资格获得付款人促销？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T13:09:39.063

如[https://developers.facebook.com/docs/concepts/payerpromotions/](https://developers.facebook.com/docs/concepts/payerpromotions/)中所述，您可以通过将获取请求发送到： [https](https://graph.facebook.com/USER_ID?fields=is_eligible_promo&access_token=USER_ACCESS_TOKEN) ://graph.facebook.com/USER_ID?fields=is_eligible_promo&access_token=USER_ACCESS_TOKEN 您将拥有响应 json 中的 is_eligible_promo 字段 如果用户符合条件，如果没有，您将只获得用户 ID。

# bash - 打印给定行号的文件的一行

> ID：14316369
> 
> 赞同：4
> 
> 时间：2013-01-14T10:05:34.897
> 
> 标签：bash, unix

在 UNIX 中是否可以打印文件的特定行？例如，我想打印 file 的第 10 行`example.c`。我尝试使用`cat`, `ls`，`awk`但显然这些没有该功能，或者我无法正确阅读`man`:-)。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-14T10:11:38.390

使用 awk：

```
awk 'NR==10' file 
```

使用 sed：

```
sed '10!d' file 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-14T10:11:00.867

```
sed -n '10{p;q;}' example.c 
```

将为您打印第十行`example.c`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-14T10:06:26.613

试试 head 和 tail，可以指定行数和从哪里开始。

要获得第三行：

```
head -n 3 yourfile.c | tail -n 1 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-14T10:07:33.670

`head -n 10 /tmp/asdf | tail -n 1`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-14T10:20:03.460

不幸的是，如果提供的行号大于我们文件中的总行数，所有其他使用`head`/的解决方案都不会正常工作。`tail`

如果 N 超过总行数，这将打印行号 N 或**不打印：**

```
grep "" file | grep "^20:" 
```

如果要从输出中删除行号，请将其通过管道`sed`：

```
grep "" file | grep "^20:" | sed 's/^20://' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-14T10:15:15.193

试试这个：

```
cat -n <yourfile> | grep ^[[:space:]]*<NUMBER>[[:space:]].*$ 
```

cat -n 给文件编号

grep 的正则表达式搜索编号为 ;-) 的原始不匹配的行，如评论中所述。当前的一个寻找完全匹配的。- 即在特定的案例中，我们需要一行以任意数量的 ( *) 空格开头，然后是一个空格，然后是任何 (.* )

万一有人翻过这个正则表达式并且根本不明白 - 这里有一个很好的教程可以帮助你入门：[http](http://regex.learncodethehardway.org/book/) ://regex.learncodethehardway.org/book/ （它使用 python 正则表达式作为例子）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-14T19:38:46.693

这可能对您有用：

```
sed '10q;d' file 
```

# java - 如何删除依赖项中的无效版本

> ID：14316370
> 
> 赞同：1
> 
> 时间：2013-01-14T10:05:47.770
> 
> 标签：java, maven

我正在使用 maven 编译项目。

这是依赖的结果：树

```
[INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @ tournament-system-web ---
[INFO] org.toursys:tournament-system-web:war:0.0.1-SNAPSHOT
[INFO] +- org.toursys:tournament-system-processor:jar:0.0.1-SNAPSHOT:compile
[INFO] |  +- com.itextpdf:itextpdf:jar:5.1.3:compile
[INFO] |  \- com.itextpdf.tool:xmlworker:jar:1.1.1:compile
[INFO] +- org.toursys:tournament-system-repository:jar:0.0.1-SNAPSHOT:compile
[INFO] |  +- org.sqlproc:sql-processor:jar:1.9.0:compile
[INFO] |  |  +- org.antlr:antlr:jar:3.4:compile
[INFO] |  |  |  \- org.antlr:ST4:jar:4.0.4:compile
[INFO] |  |  +- org.antlr:antlr-runtime:jar:3.4:compile
[INFO] |  |  |  +- org.antlr:stringtemplate:jar:3.2.1:compile
[INFO] |  |  |  \- antlr:antlr:jar:2.7.7:compile
[INFO] |  |  \- commons-beanutils:commons-beanutils:jar:1.8.3:compile
[INFO] |  \- org.sqlproc:sql-processor-spring:jar:1.9.0:compile
[INFO] |     \- org.springframework:spring-jdbc:jar:3.0.5.RELEASE:compile (version managed from 3.1.2.RELEASE)
[INFO] |        \- org.springframework:spring-tx:jar:3.0.5.RELEASE:compile
[INFO] +- org.slf4j:slf4j-api:jar:1.6.1:compile
[INFO] +- org.slf4j:slf4j-log4j12:jar:1.6.1:compile
[INFO] +- log4j:log4j:jar:1.2.15:compile
[INFO] +- org.springframework:spring-core:jar:3.0.5.RELEASE:compile
[INFO] |  +- org.springframework:spring-asm:jar:3.0.5.RELEASE:compile
[INFO] |  \- commons-logging:commons-logging:jar:1.1.1:compile
[INFO] +- org.springframework:spring-web:jar:3.0.5.RELEASE:compile
[INFO] |  +- aopalliance:aopalliance:jar:1.0:compile
[INFO] |  \- org.springframework:spring-context:jar:3.0.5.RELEASE:compile
[INFO] |     +- org.springframework:spring-aop:jar:3.0.5.RELEASE:compile
[INFO] |     \- org.springframework:spring-expression:jar:3.0.5.RELEASE:compile
[INFO] +- javax.servlet:servlet-api:jar:2.4:compile
[INFO] +- org.apache.wicket:wicket-core:jar:1.5.8:compile
[INFO] |  +- org.apache.wicket:wicket-util:jar:1.5.8:compile
[INFO] |  \- org.apache.wicket:wicket-request:jar:1.5.8:compile
[INFO] +- org.apache.wicket:wicket-spring:jar:1.5.8:compile
[INFO] |  \- org.apache.wicket:wicket-ioc:jar:1.5.8:compile
[INFO] |     \- cglib:cglib:jar:2.2:compile
[INFO] |        \- asm:asm:jar:3.1:compile
[INFO] +- org.apache.wicket:wicket-datetime:jar:1.5.8:compile
[INFO] |  \- joda-time:joda-time:jar:2.0:compile
[INFO] +- org.apache.wicket:wicket-extensions:jar:1.5.8:compile
[INFO] +- org.wicketstuff:wicketstuff-minis:jar:1.5.8:compile
[INFO] |  \- org.apache.wicket:wicket:pom:1.5.8:compile
[INFO] +- org.springframework:spring-beans:jar:3.0.5.RELEASE:compile
[INFO] +- cglib:cglib-nodep:jar:2.2:compile
[INFO] +- commons-dbcp:commons-dbcp:jar:1.2.2:runtime
[INFO] |  \- commons-pool:commons-pool:jar:1.3:runtime
[INFO] \- mysql:mysql-connector-java:jar:5.1.20:compile 
```

问题是当我查看生成的战争时，有两个版本的检票口。1.5.5 和 1.5.8，我不知道为什么还有旧版本。我没有依赖它。我怎样才能删除它或找到为什么仍然有这个库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:24:21.053

你应该排除`wicket-1.5.5`它作为另一个包的依赖项。[此处](http://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html)描述了依赖项排除。

# jenkins - 如何让 jenkins API 返回更多构建？

> ID：14316371
> 
> 赞同：8
> 
> 时间：2013-01-14T10:05:52.443
> 
> 标签：jenkins

我有一个脚本，可以从 jenkins 作业中提取工件并将其安装在我们的硬件测试系统上。现在，今天我需要降级到一个相当旧的版本。不幸的是，jenkins API 只返回最后几个构建。

我使用 jenkinsapi python API。它失败如下：

```
/usr/local/lib/python2.7/dist-packages/jenkinsapi-0.1.6-py2.7.egg/jenkinsapi/job.pyc in get_build(self, buildnumber)
    177     def get_build( self, buildnumber ):
    178         assert type(buildnumber) == int
--> 179         url = self.get_build_dict()[ buildnumber ]
    180         return Build( url, buildnumber, job=self )
    181 
```

python API 命中 url `http://jenkins/job/job-name/api/python/`。如果我自己这样做，那么我会得到以下响应：

```
{"actions":[{},{},{},{},{},{},{}],
 "description":"text",
 "displayName":"job-name",
 "displayNameOrNull":None,
 "name":"job-name",
 "url":"http://jenkins/job/job-name/",
 "buildable":True,
 "builds":[
     {"number":437,"url":"http://jenkins/job/job-name/437/"},
     {"number":436,"url":"http://jenkins/job/job-name/436/"},
     {"number":435,"url":"http://jenkins/job/job-name/435/"},
     {"number":434,"url":"http://jenkins/job/job-name/434/"},
     {"number":433,"url":"http://jenkins/job/job-name/433/"},
     {"number":432,"url":"http://jenkins/job/job-name/432/"},
     {"number":431,"url":"http://jenkins/job/job-name/431/"},
     {"number":430,"url":"http://jenkins/job/job-name/430/"},
     {"number":429,"url":"http://jenkins/job/job-name/429/"},
     {"number":428,"url":"http://jenkins/job/job-name/428/"},
     {"number":427,"url":"http://jenkins/job/job-name/427/"},
     {"number":426,"url":"http://jenkins/job/job-name/426/"},
     {"number":425,"url":"http://jenkins/job/job-name/425/"},
     {"number":424,"url":"http://jenkins/job/job-name/424/"},
     {"number":423,"url":"http://jenkins/job/job-name/423/"}],
"color":"yellow_anime",
"firstBuild": {"number":311,"url":"http://jenkins/job/job-name/311/"},
"healthReport":[
                {"description":"Test Result: 0 tests failing out of a total of 3 tests.","iconUrl":"health-80plus.png","score":100},
                {"description":"Build stability: No recent builds failed.","iconUrl":"health-80plus.png","score":100}],
"inQueue":False,
"keepDependencies":False,
"lastBuild":{"number":438,"url":"http://jenkins/job/job-name/438/"},
"lastCompletedBuild":{"number":437,"url":"http://jenkins/job/job-name/437/"},
"lastFailedBuild":{"number":386,"url":"http://jenkins/job/job-name/386/"},
"lastStableBuild":{"number":424,"url":"http://jenkins/job/job-name/424/"},
"lastSuccessfulBuild":{"number":437,"url":"http://jenkins/job/job-name/437/"},
"lastUnstableBuild":{"number":437,"url":"http://jenkins/job/job-name/437/"},
"lastUnsuccessfulBuild":{"number":437,"url":"http://jenkins/job/job-name/437/"},
"nextBuildNumber":439,
"property":[],
"queueItem":None,
"concurrentBuild":False,
"downstreamProjects":[],
"scm":{},
"upstreamProjects":[]} 
```

现在，我想获得第 315 号工作。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T14:36:22.100

我最终使用了以下解决方法：

```
try:
   build=job.get_build(build_no)
except KeyError:
   build=jenkinsapi.build.Build('%s%d/' % (job.baseurl, build_no), build_no, job=job) 
```

它不漂亮，但它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:59:44.667

您确定所有构建都存在并且没有被删除吗？也许启用了一些设置（例如通过限制删除旧版本）。我试图在我的 Jenkins 实例上点击 URL，它会呈现所有版本（大约 150 个）。我已经尝试过 python 和 XML api 版本。

# java - 我们应该将参数作为变量还是直接在java中作为新对象传递给方法

> ID：14316372
> 
> 赞同：1
> 
> 时间：2013-01-14T10:06:01.990
> 
> 标签：java

考虑以下两个对 java 中相同方法的调用：-

1)`doSomething(new Object[]{"something"}) ;`

2)

```
Object[] obj = {"something"} ;

doSomething(obj); 
```

就内存和时间效率而言，哪一个更有效？我会说 1) 在内存和时间效率方面都更好。在第二个选项中的原因要求我们创建另一个变量（额外内存），然后将该值分配给变量（额外时间）。任何意见 ？

只是为了澄清对象只会创建一次，我说的是用于保存新创建对象的地址的额外变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T10:08:23.567

两者在时间和记忆方面都是一样的。编译器可以优化额外的分配。

不同之处在于，第二个版本让您有机会为变量指定一个有用的名称，这可以使代码更加清晰。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T10:08:36.987

第二个调用允许您在调用方法中重用对象，但第一个不允许。

它与内存无关，因为无论如何都会创建传递的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T10:11:03.427

您应该始终首先考虑更简单和更清晰的内容。仅当您知道存在问题时才应考虑性能，因为您在分析器或微基准测试中对其进行了测量。

最好的选择可能是使用可变参数

```
doSomething("something");

void doSomething(String... args) { } 
```

注意：这不仅是最简单的，而且可能是最快的，因为 JIT 可以消除`String[]`创建的。

# r - 在 R 的几个数据框中创建一个新变量

> ID：14316374
> 
> 赞同：2
> 
> 时间：2013-01-14T10:06:08.783
> 
> 标签：r, variables, vector, dataframe

我有几个数据框*df1, df, 2...., df10*。列（变量）在所有这些中都是相同的。

我想在每个变量中创建一个新变量。我可以轻松地“手动”完成，如下所示：

```
df1$newvariable <- ifelse(df1$oldvariable == 999, NA, df1$oldvariable) 
```

或者，或者，

```
df1 = transform(df1, df1$newvariable= ifelse(df1$oldvariable==999, NA, df1$oldvariable))) 
```

不幸的是，我无法循环执行此操作。如果我写

```
for (i in names) { #names is the list of dataframes
  i$newvariable <- ifelse(i$oldvariable == 999, NA, i$oldvariable)
} 
```

我得到以下输出

```
Error in i$oldvariable : $ operator is invalid for atomic vectors 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T10:10:17.793

我要做的是将所有`data.frame`内容集中到一个列表中，然后`lapply`按如下方式使用：

```
df1 <- as.data.frame(matrix(runif(2*10), ncol=2))
df2 <- as.data.frame(matrix(runif(2*10), ncol=2))
df3 <- as.data.frame(matrix(runif(2*10), ncol=2))
df4 <- as.data.frame(matrix(runif(2*10), ncol=2))

# create a list and use lapply
df.list <- list(df1, df2, df3, df4)
out <- lapply(df.list, function(x) {
    x$id <- 1:nrow(x)
    x
}) 
```

现在，您将拥有所有附加了新列的 data.frames，`id`并且`out`是`data.frames`. `x[[1]]`您可以使用等访问每个 data.frames `x[[2]]`...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T10:27:53.690

这已经被问过很多次了。不能将该`$<-`“i”索引转换为第一个或第二个参数。对于`[[<-`第二个参数，它能够这样做，但不是第一个参数。您应该学习使用`lapply`，您可能需要使用两个嵌套`lapply`的 's，一个用于“名称”列表，另一个用于数据框中的每一列。这个问题是不完整的，因为它缺乏具体的例子。组成一组三个数据框，将一些值设置为“999”并提供名称列表。

# java - 在android中解析json日期字符串

> ID：14316375
> 
> 赞同：5
> 
> 时间：2013-01-14T10:06:11.867
> 
> 标签：java, android, json, parsing

我从我的 android 应用程序中的服务器获得了一个 1970 年之后毫秒数的 json 字符串。

看起来像这样：`\/Date(1358157378910+0100)\/`。

如何将其解析为 Java 日历对象，或者仅从中获取一些日期值？我应该从正则表达式开始并得到毫秒吗？服务器是.NET。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T10:43:43.473

时间似乎也有时区，所以我会做这样的事情：

```
String timeString = json.substring(json.indexOf("(") + 1, json.indexOf(")"));
String[] timeSegments = timeString.split("\\+");
// May have to handle negative timezones
int timeZoneOffSet = Integer.valueOf(timeSegments[1]) * 36000; // (("0100" / 100) * 3600 * 1000)
int millis = Integer.valueOf(timeSegments[0]);
Date time = new Date(millis + timeZoneOffSet); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T02:59:32.567

从接受的答案复制，修复了一些错误:)

```
 String json = "Date(1358157378910+0100)";
    String timeString = json.substring(json.indexOf("(") + 1, json.indexOf(")"));
    String[] timeSegments = timeString.split("\\+");
    // May have to handle negative timezones
    int timeZoneOffSet = Integer.valueOf(timeSegments[1]) * 36000; // (("0100" / 100) * 3600 * 1000)
    long millis = Long.valueOf(timeSegments[0]);
    Date time = new Date(millis + timeZoneOffSet);
    System.out.println(time); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T10:12:36.390

是的，你可以`substring`从`json`“（”到“）”，转换`string`为毫秒并传入`calendar`对象。

```
String millisString = json.substring(json.indexOf('('), json.indexOf(')')); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T10:17:17.677

我认为你可以得到这样的：

```
json.getAsJsonPrimitive().getAsString(); 
```

`json`它是`JsonElement`

编辑：您可以在没有 Date() 的情况下发送，只是数字，不是吗？如果您使用的是 JSON，为什么不使用 Date 对象呢？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-10T09:44:38.670

试试这个..

```
String jsonDate = "\/Date(1358157378910+0100)\/";
String date = "";
 try {
String results = jsonDate.replaceAll("^/Date\\(","");
results = results.substring(0, results.indexOf('+'));                       
long time = Long.parseLong(results);
Date myDate = new Date(time);

SimpleDateFormat sdf = new SimpleDateFormat("dd-MM-yyyy HH:mm");
date = sdf.format(myDate);
    System.out.println("Result Date: "+date);
} 
catch (Exception ex) {
     ex.printStackTrace();
     } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-04T17:20:40.390

这是一个更完整的解决方案，基于@pablisco 答案：

```
public class DateUtils {

    public static Date parseString(String date) {

        String value = date.replaceFirst("\\D+([^\\)]+).+", "$1");

        //Timezone could be either positive or negative
        String[] timeComponents = value.split("[\\-\\+]");
        long time = Long.parseLong(timeComponents[0]);
        int timeZoneOffset = Integer.valueOf(timeComponents[1]) * 36000; // (("0100" / 100) * 3600 * 1000)

        //If Timezone is negative
        if(value.indexOf("-") > 0){
            timeZoneOffset *= -1;
        } 

        //Remember that time could be either positive or negative (ie: date before 1/1/1970) 
        time += timeZoneOffset;

        return new Date(time);
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-31T21:20:04.170

其他一些答案（例如[pablisco](https://stackoverflow.com/a/14316932/642706)）对于解析字符串以提取数字（自纪元以来的毫秒数）是正确的。但是他们使用过时的日期时间类。

# java.time

Java 8 及更高版本内置了[java.time](https://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html)框架。一个巨大的进步。灵感来自[Joda-Time](http://www.joda.org/joda-time/)。由[JSR 310](http://jcp.org/en/jsr/detail?id=310)定义。由[ThreeTen-Extra](http://www.threeten.org/threeten-extra/)项目扩展。[ThreeTen-BackPort](http://www.threeten.org/threetenbp/)项目向后移植到 Java 6 和 7，该项目由[ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP)项目为 Android 包装。

分别考虑输入的两个部分。一个是从[纪元](https://en.wikipedia.org/wiki/Epoch_(reference_date))开始的计数，以毫秒为单位，另一个是[offset-from-UTC](https://en.wikipedia.org/wiki/UTC_offset)。

假设源使用与 java.time 相同的纪元（UTC 时间 1970 年的第一个时刻），我们可以使用它来实例化一个[`Instant`](http://docs.oracle.com/javase/8/docs/api/java/time/Instant.html)对象。An是[UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time)`Instant`时间线上的时刻。

```
 String inputMillisText = "1358157378910";
    long inputMillis = Long.parseLong ( inputMillisText );
    Instant instant = Instant.ofEpochMilli ( inputMillis ); 
```

接下来我们解析与UTC的偏移量。这里的诀窍是我们不知道源的意图。也许他们的意思是预期的日期时间比 UTC*晚*一个小时，所以我们应该按照这个偏移文本作为公式，增加一个小时来达到 UTC。或者他们的意思是显示的时间*比*UTC 早一小时。常用的[ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)标准定义了后者，所以我们将使用它。但是您确实应该调查数据源的意图。

```
 String inputOffsetText = "+0100";
    ZoneOffset zoneOffset = ZoneOffset.of ( inputOffsetText ); 
```

我们将`Instant`和结合起来[`ZoneOffset`](http://docs.oracle.com/javase/8/docs/api/java/time/ZoneOffset.html)得到一个[`OffsetDateTime`](http://docs.oracle.com/javase/8/docs/api/java/time/OffsetDateTime.html).

```
 OffsetDateTime odt = OffsetDateTime.ofInstant ( instant , zoneOffset ); 
```

转储到控制台。

```
 System.out.println ( "inputMillis: " + inputMillis + " | instant: " + instant + " | zoneOffset: " + zoneOffset + " | odt: " + odt ); 
```

> 输入米利斯：1358157378910 | 瞬间：2013-01-14T09:56:18.910Z | 区域偏移：+01:00 | 时间：2013-01-14T10:56:18.910+01:00

# android - 如何在android中每10秒更新一次电池温度

> ID：14316380
> 
> 赞同：0
> 
> 时间：2013-01-14T10:06:32.027
> 
> 标签：android

> **可能重复：**
> [在android上获取电池温度](https://stackoverflow.com/questions/3997289/get-temperature-of-battery-on-android)

我是安卓新手，正在制作一个显示安卓电池温度的应用程序每 10 秒更新一次……请帮帮我

```
 public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
       // setContentView(R.layout.activity_blue_tooth);

        LinearLayout big = new LinearLayout(this);
        big.setOrientation(LinearLayout.VERTICAL);

    LinearLayout small[]= new LinearLayout[5];

    for(int i=0; i<5; i++)
    { 
        small[i]= new LinearLayout(this);
    small[i].setOrientation(LinearLayout.HORIZONTAL);
    LinearLayout.LayoutParams linearparams1 = new LinearLayout.LayoutParams(
            LinearLayout.LayoutParams.MATCH_PARENT,
            LinearLayout.LayoutParams.MATCH_PARENT);

     temp = new TextView(this);
     small[i].addView(temp);

       volt= new TextView(this);
      small[i].addView(volt); 

        big.addView(small[i]);
    }
        setContentView(big);

        this.registerReceiver(this.mBatInfoReceiver, 
        new IntentFilter(Intent.ACTION_BATTERY_CHANGED));

      }

      private BroadcastReceiver mBatInfoReceiver = new BroadcastReceiver(){

        @Override
        public void onReceive(Context arg0, Intent intent) {
          // TODO Auto-generated method stub
            int temperature = intent.getIntExtra(BatteryManager.EXTRA_TEMPERATURE, 0);
            int voltage= intent.getIntExtra(BatteryManager.EXTRA_VOLTAGE,0);
            temp.setText("Temperature="+String.valueOf(temperature) + "%");
          volt.setText("   " +"Voltage="+String.valueOf(voltage) + "%");
        }
      }; 
```

我正在获取电池温度和电压，但我无法每 10 秒更新一次

# asp.net-mvc - 需要 Twilio MVC 基本示例

> ID：14316381
> 
> 赞同：4
> 
> 时间：2013-01-14T10:06:39.773
> 
> 标签：asp.net-mvc, twilio

**背景**

*   第一次使用 Twilio。
*   使用 ASP.NET MVC4
*   使用官方 twilio-csharp 库：[https ://www.twilio.com/docs/csharp/install](https://www.twilio.com/docs/csharp/install)

**问题**

我正在尝试制作一个非常简单的示例来处理电话。我想我有主要想法，但我正在努力在 TwiML 中返回什么等。这是我的代码：

```
public ActionResult TestCall()
        {
            var twilio = new TwilioRestClient("accountSid", "authToken");
            var call = twilio.InitiateOutboundCall("0123456789", "0123456789", "http://example.com/handleCall");
            return new EmptyResult();// Is this correct?
        }

        public ActionResult HandleCall()// Do I need arguments here?
        {
            var response = new TwilioResponse();
            // Do I need anythign in the response?
            return TwiML(response);
        } 
```

我不想提供任何类型的自动化服务...我只是希望我网站的用户单击呼叫按钮，他可以与他正在呼叫的任何人交谈...就像 Skype 等一样。

我只需要一个非常基本的例子。相信我，我花了一些时间搜索这个并且有很多例子，但没有一个能特别回答我的这个新手问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T15:25:43.960

听起来您想要做的是使用 Twilio 让用户直接从他们的浏览器拨打电话到另一部电话。为此，您可以使用 Twilio 客户端。

[http://www.twilio.com/client](http://www.twilio.com/client)

下面是一个快速入门链接，展示了如何在网页中使用 Twilio Client javascript SDK 创建从浏览器到 Twilio 的音频连接：

[http://www.twilio.com/docs/quickstart/csharp/client/outgoing-calls](http://www.twilio.com/docs/quickstart/csharp/client/outgoing-calls)

注意顶部有一些 C# 代码。这使用一个名为 TwilioCapability 的类来生成一个令牌，该令牌告诉 Twilio 您的帐户凭据是什么，以及一旦建立连接，您想使用什么 TwiML 应用程序 sid 来处理连接。TwilioCapability 包含在 Twilio.Client nuget 包中。

[http://nuget.org/packages/Twilio.Client](http://nuget.org/packages/Twilio.Client)

TwiML 应用程序代表您可以从 Twilio 仪表板配置的 URL（单击 DevTools -> TwiML 应用程序）。一旦打开来自浏览器的音频连接，Twilio 就会向该 URL 发出 HTTP 请求。这使您可以向 Twilio 提供 TwiML 指令，告诉它如何处理该连接。例如，您可以告诉 Twilio 拨出到另一个电话号码。

如果您想使用 MVC 操作方法动态生成该 TwiML，您可以使用 Twilio.Mvc nuget 包。不久前我写了一篇博文，展示了如何使用 nuget 包安装的库从 MVC 操作方法返回 TwiML：

[http://www.twilio.com/blog/2012/02/twilio-for-net-developers-part-5-twilio-client-mvc-and-webmatrix-helper-libraries.html](http://www.twilio.com/blog/2012/02/twilio-for-net-developers-part-5-twilio-client-mvc-and-webmatrix-helper-libraries.html)

希望有帮助。如果您还有其他问题，请告诉我。

德文

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-06T06:09:04.780

也许你的意思是这样的？

```
using Twilio.TwiML.Mvc;
using Twilio.TwiML;

public class PhoneController : Controller
{
    public ActionResult Welcome()
    {
        var response = new TwilioResponse();
        response.Say("Welcome Monkey");

        return new TwiMLResult(response);
    }
} 
```

这将为 say 动词返回正确的 TwiML xml，该动词将对调用者说“Welcome Monkey”。

如果您使用 nuget，您将需要安装 Twilio 库，这很容易。确保获得 Twilio.MVC 库。您还需要设置一个号码，拥有一个公共 .net 站点，该站点可以使用正确的 xml (TwiML) 响应电话应用程序请求（将使用该方法）。

参考： http: [//www.twilio.com/blog/2012/02/twilio-for-net-developers-part-5-twilio-client-mvc-and-webmatrix-helper-libraries.html](http://www.twilio.com/blog/2012/02/twilio-for-net-developers-part-5-twilio-client-mvc-and-webmatrix-helper-libraries.html)

# java - 实现java菜单栏并打开新窗口

> ID：14316384
> 
> 赞同：0
> 
> 时间：2013-01-14T10:06:44.530
> 
> 标签：java, swing, jmenu, jmenuitem

我正在尝试开发带有不同项目的java菜单栏。一旦您单击所选项目，应打开另一个窗口。我设法运行菜单，但似乎无法打开其他窗口。换句话说，我的菜单项在那里，但由于某种原因无法正常工作。您能在下面的代码中看到我在哪里犯了错误吗？

```
 package cbrrecommender.main;

import java.awt.*;
import javax.swing.*;
import java.awt.event.*;

public class GUI extends JFrame {

    JMenuBar menubar;
    JMenu help;
    JMenuItem about;

    public GUI() {
        setLayout(new FlowLayout());

        menubar = new JMenuBar();
        add(menubar);

        help = new JMenu("Help");
        menubar.add(help);

        about = new JMenu("About");
        help.add(about);

        setJMenuBar(menubar);

        event e = new event();
        about.addActionListener(e);
    }

    public class event implements ActionListener {
        public void actionPerformed(ActionEvent e) {

            FullGUI gui = new FullGUI(GUI.this);
            gui.setDefaultCloseOperation(JFrame.HIDE_ON_CLOSE);
            gui.setSize(300, 100);
            gui.setLocation(300, 300);
            gui.setVisible(true);

        }
    }

    public static void main(String args[]) {
        GUI gui = new GUI();
        gui.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        gui.setSize(300, 100);
        gui.setVisible(true);
        gui.setTitle("Main Window");
    }

} 
```

我扩展另一个类 FullGUI 的代码是：

```
public class FullGUI  extends GUI{ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:14:19.577

“关于”应该是一个`JMenuItem`，而不是一个`JMenu`。试试这个...

```
about = new JMenuItem("About"); 
```

# php - 如何在元素的结束标记之前插入一些东西？

> ID：14316396
> 
> 赞同：0
> 
> 时间：2013-01-14T10:07:34.147
> 
> 标签：php, domdocument

我需要更正很多 html 文档中的某些内容。

所以，我的身体里有这样的结构（简化）：

```
<body>
    <div id="inter">
        <!-- some content -->
    </div>
</body> 
```

我需要在我的结束标签之前插入一些东西`div id="inter"`。我猜我必须使用 PHP 和 DOMDocument。

所以我得到类似的东西：

```
<body>
    <div id="inter">
        <!-- some content -->
        @insert something here
    </div>
</body> 
```

在 my`<div id="inter">`中，我可以有很多内容，例如 other `div`、`image`、`span`等。

你知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T10:13:21.133

你可以用[`createElement()`](http://php.net/manual/en/domdocument.createelement.php)and做到这一点[`appendChild()`](http://php.net/manual/en/domnode.appendchild.php)：

```
$newElem = $doc->createElement('p', 'New element');
$doc->getElementById('inter')->appendChild($newElem); 
```

演示：[http ://codepad.viper-7.com/GMGjkd](http://codepad.viper-7.com/GMGjkd)

如果您想添加评论，您可以简单地使用以下内容：

```
$newComment = $doc->createComment('New comment');
$doc->getElementById('inter')->appendChild($newComment); 
```

演示：[http ://codepad.viper-7.com/QMuDMt](http://codepad.viper-7.com/QMuDMt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:10:28.597

[`appendChild`](http://php.net/manual/en/domnode.appendchild.php)将一个节点添加到另一个节点的末尾。

您可以使用创建评论节点[`DOMComment`](http://php.net/manual/en/class.domcomment.php)

# c# - 当从接收到的响应流中读取数据时，无法在 try/catch 中捕获 monotouch webexception

> ID：14316397
> 
> 赞同：1
> 
> 时间：2013-01-14T10:07:41.523
> 
> 标签：c#, mono, xamarin.ios, system.net

我的 IO 应用程序向服务发送请求，该服务以指定的频率（通常每秒 2 或 3 次）发​​送一些数据。15 或 20 分钟后，我得到了 WebException，它不能被 try/catch 块捕获。使用 BinaryReader.ReadBytes() 读取数据时会引发异常。这是堆栈：

```
System.Net.WebException: The operation has timed out.
at System.Net.WebConnectionStream.Read (System.Byte[] buffer, Int32 offset, Int32 size) [0x00048] in /Developer/MonoTouch/Source/mono/mcs/class/System/System.Net/WebConnectionStream.cs:330
at System.IO.BinaryReader.ReadBytes (Int32 count) [0x00051] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System.IO/BinaryReader.cs:318
at JpegProcessorLib.FramesProvider.OnGetResponse (IAsyncResult asyncResult) [0x0013f] in /Users/User/Projects/NvrViewer/NvrViewer/Streaming/FramesProvider.cs:146
at System.Net.WebAsyncResult.CB (System.Object unused) [0x00000] in /Developer/MonoTouch/Source/mono/mcs/class/System/System.Net/WebAsyncResult.cs:148 
```

这是代码：

```
private void OnGetResponse (IAsyncResult asyncResult)
    {
        if (!this.isStreamActive) 
        {
            return;
        }

        HttpWebResponse resp = null;
        byte[] buff = null;

        byte[] imageBuffer = new byte[this.approximatelyImageSize];
        Stream stream = null;

        // get the response
        HttpWebRequest req = (HttpWebRequest)asyncResult.AsyncState;
        req.GetRequestStream().Close();
        resp = (HttpWebResponse)req.EndGetResponse (asyncResult);

        // find our magic boundary value
        string contentType = resp.Headers ["Content-Type"];

        if (!string.IsNullOrEmpty (contentType) && !contentType.Contains ("="))
        {
            this.PublishFrameReceivingResult(new FrameProviderException ("Invalid content-type header. The camera is likely not returning a proper MJPEG stream."));
            return;         
        }

        string boundary = resp.Headers["Content-Type"].Split('=')[1].Replace("\"", "");
        byte[] boundaryBytes = Encoding.UTF8.GetBytes(boundary.StartsWith("--") ? boundary : "--" + boundary);

        try
        {
            stream = resp.GetResponseStream();
        }
        catch(ProtocolViolationException)
        {
            this.PublishFrameReceivingResult(new FrameProviderException ("Payload was not received from the server"));
            return;
        }

        BinaryReader br = new BinaryReader(stream);
        isStreamActive = true;

        try
        {
            buff = br.ReadBytes(this.frameWidth);   
        }
        catch(WebException)
        {
            br.Close();
            resp.Close();
            return;
        }

        while (isStreamActive)
        {
            int size;

            // find the JPEG header
            int imageStart = buff.Find(JpegHeader);

            if(imageStart != -1)
            {
                // copy the start of the JPEG image to the imageBuffer
                size = buff.Length - imageStart;
                Array.Copy(buff, imageStart, imageBuffer, 0, size);

                while(true)
                {
                    /*

> System.Net.WebException: The operation has timed out.   at System.Net.WebConnectionStream.Read (System.Byte[] buffer, Int32
> offset, Int32 size) [0x00048] in
> /Developer/MonoTouch/Source/mono/mcs/class/System/System.Net/WebConnectionStream.cs:330
> at System.IO.BinaryReader.ReadBytes (Int32 count) [0x00051] in
> /Developer/MonoTouch/Source/mono/mcs/class/corlib/System.IO/BinaryReader.cs:318
> at JpegProcessorLib.FramesProvider.OnGetResponse (IAsyncResult
> asyncResult) [0x0013f] in
> /Users/User/Projects/NvrViewer/NvrViewer/Streaming/FramesProvider.cs:146
> at System.Net.WebAsyncResult.CB (System.Object unused) [0x00000] in
> /Developer/MonoTouch/Source/mono/mcs/class/System/System.Net/WebAsyncResult.cs:148

                    */

                    try
                    {
                        buff = br.ReadBytes(this.frameWidth);
                    }
                    catch
                    {
                        br.Close();
                        resp.Close();
                        return;
                    }

                    // find the boundary text
                    int imageEnd = buff.Find(boundaryBytes);
                    if(imageEnd != -1)
                    {
                        // copy the remainder of the JPEG to the imageBuffer
                        Array.Copy(buff, 0, imageBuffer, size, imageEnd);
                        size += imageEnd;

                        // create a single JPEG image
                        byte[] currentFrame = new byte[size];
                        Array.Copy(imageBuffer, 0, currentFrame, 0, size);

                        this.SaveImage(currentFrame);

                        // copy the leftover data to the start
                        Array.Copy(buff, imageEnd, buff, 0, buff.Length - imageEnd);

                        // fill the remainder of the buffer with new data and start over
                        byte[] temp = br.ReadBytes(imageEnd);

                        Array.Copy(temp, 0, buff, buff.Length - imageEnd, temp.Length);
                        break;
                    }

                    // copy all of the data to the imageBuffer
                    Array.Copy(buff, 0, imageBuffer, size, buff.Length);
                    size += buff.Length;
                }
            }
        }
        resp.Close();
    } 
```

有人可以建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:28:48.687

您还有另一个不在 try/catch 处理程序中的 ReadBytes：

```
byte[] temp = br.ReadBytes(imageEnd); 
```

也许那里抛出异常？

# iphone - 在没有 Xcode 和 USB 电缆的设备上运行正在开发的 ios 应用程序

> ID：14316399
> 
> 赞同：0
> 
> 时间：2013-01-14T10:07:47.550
> 
> 标签：iphone, ios, xcode, ipad, device

我是一名新的 iOS 开发者计划成员。

现在，我需要在设备（iPhone 和 iPad）上检查我的应用程序。

编辑：在模拟器下一切正常。

当我从 Xcode 启动该应用程序以及使用 USB 电缆连接设备时，我可以在设备上运行该应用程序。

但是，当我直接从设备跳板启动应用程序时，它会崩溃。

编辑：有点精确：我的应用程序从跳板启动，但是当我触摸屏幕中的某处（按钮或 tableViewcell）时，应用程序停止。

这是正常行为吗？

我是否必须使用 ad-hoc 技术在没有 Xcode 和 USB 电缆的设备上运行我的开发应用程序？

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:39:49.543

这不是正常的行为。您的应用程序中必须存在错误。您开发的应用程序可以像从应用商店安装一样运行。

从 springboard 启动应用程序失败后，再次连接设备，在 xcode Organizer 中，检查应用程序的设备日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T13:44:28.187

真可惜，这是一个扭曲的记忆问题。

由于我省略了关闭 NSZombieEnabled 选项，一些内存问题不会出现在模拟器中，而只会出现在设备上。

谢谢大家 ！

# javascript - 2个完整页面之间的JS或Css页面幻灯片转换

> ID：14316402
> 
> 赞同：8
> 
> 时间：2013-01-14T10:08:08.070
> 
> 标签：javascript, jquery, css, transitions

我有两个 html 页面：Page1.html、Page2.html。我想在两页之间滑动。我找到了很多插件和解决方案，可以在两个 div 之间滑动或在容器内滑动，但我需要的是完整的页面更改。

[我发现了一些东西](http://www.fasw.ws/faswwp/non-jquery-page-transitions-lightweight/)，但问题是页面加载时 page2 上的 jquery 代码不会触发。我可以使用 jQuery mobile，但我的项目使用 jQuery ui，它给了我一些冲突......所以我需要别的东西。

该项目应该在 iPad 上运行，因此拥有可以拖动的滑动页面会很酷。但我很乐意为幻灯片找到一个插件。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:57:26.860

您几乎没有解决方案，例如使用 Ajax 将内容添加到“新页面”并使用 jQuery 添加一些滑动效果。Stack Overflow 上有一些关于此的主题：

[使用 jQuery 在页面之间滑动](https://stackoverflow.com/questions/9518762/slide-between-pages-using-jquery)

[页面间滑动效果的线索](https://stackoverflow.com/questions/9446921/clues-on-sliding-between-pages-effect)

或者只是在准备好的页面上添加一些效果，就像在这个示例中一样：

```
<html>
<head>
    <script src="js/jquery-1.7.2.min.js"></script>
    <script>
        $(document).ready(function(){
            $('body div').slideDown();
        });
    </script>
</head>
<body>
    <div style="width: 400px; height: 400px; background-color: blue; display: none;">
        <a href="page2.htm" style="color: white;">PAGE 2>></a>
    </div>
</body> 
```

```
<html>
<head>
    <script src="js/jquery-1.7.2.min.js"></script>      
    <script>
        $(document).ready(function(){
            $('body div').slideDown();
        });
    </script>
</head>
<body>
    <div style="width: 400px; height: 400px; background-color: red; display: none;">
        <a href="page1.htm" style="color: white;">PAGE 1>></a>
    </div>
</body> 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-11T19:10:34.793

我正在寻找一个完整的页面转换与许多显示一个页面有几个 DIV 的示例。我发现 Animate.css 做得很好。

[演示在此链接。](http://blog.regencysoftware.com/post/html-page-transitions-animiations)

[![在此处输入图像描述](../Images/aef3eb7c83016d3004865827ddd7a788.png)](https://i.stack.imgur.com/h8XfF.png)

# java - 使用 jpa 实体管理器从表中选择过滤记录

> ID：14316403
> 
> 赞同：0
> 
> 时间：2013-01-14T10:08:09.370
> 
> 标签：java, sql, jpa, ejb

我想使用 jpa 实体管理器在表中查找具有如下过滤条件的条目

```
select * from My_Table where (status='A' or status='Z' or status='NA') 
```

请建议一种方法来做到这一点..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:18:58.470

假设如下：

1.  em = 实体管理器
2.  MyTable = My_Table 实体
3.  MyTable 有一个状态字段。

**爪哇**

```
public List findByStatus() {
    return em.createQuery(
        "SELECT mt FROM MyTable mt WHERE mt.status in ('A', 'Z', 'NA')")
        .getResultList();
} 
```

# scala - Akka 演员与 Futures 的工作交接

> ID：14316407
> 
> 赞同：3
> 
> 时间：2013-01-14T10:08:33.663
> 
> 标签：scala, akka

我正在尝试在 akka 演员之间建立一个消息传递过程，以代表主人给工人一份工作，并密切关注它。我的问题是

1.  是我在合理的方法下提出的建议吗？
2.  即使不是，为了我的未来教育，我想知道如何通过 Futures 的组合来正确完成它。

我想要的过程是这样的

**1)** Master 用`ask`. 它希望在 5 秒内得到答复，否则它认为工人已经失去了机会，它将不得不再次进入投标。

```
import context.dispatcher
implicit val timeout = Timeout(5 seconds)
val workCompletedFuture = (worker ? WorkTicket(work)).mapTo[Future[WorkCompleted]] 
```

**2a）**如果工人在 5 秒内没有响应，我希望主人向自己发送一条消息，说重新分配工作。

```
self ! WorkAllocationFailed(work, worker) 
```

**2b）**如果工人确实做出了回应，那么它会给我们一个 Future[WorkCompleted]。我想等待那个未来完成，比如说，2 分钟。

**3a)**如果 Future[WorkCompleted] 未能在超时时间内完成，则重新分配工作

```
self ! WorkFailed(work, worker) 
```

**3b)**如果 Future[WorkCompleted] 成功则收集结果

我已经尝试过创建这个逻辑，但是我把嵌套搞得一团糟`onComplete`，而且我不知道如何在 Future[WorkCompleted] 上进行超时。我尝试阅读[Akka 2.10 Futures 文档](http://docs.scala-lang.org/overviews/core/futures.html)，但找不到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T12:30:14.193

一般的想法是，你有一个将工作交给一群工人的主人是一个合理的模式。

另一方面，当系统的所有部分都已经是参与者时，我不建议使用 Futures。无需使用 ask 提交作品，您只需通过 tell 发送即可。然后，master 可以定期检查超时的作业并再次重新提交它们。

此外，在 actor 的主体中调用 onComplete 非常危险，因为它在可能不同的线程上执行。与参与者交流的安全方式是通过消息传递。如果你有一个 Future 并且希望在 Future 完成后在 Actor 中做一些事情，那么最好使用管道模式。

您的代码段中还有一个小错误。如果您的工人演员回复 WorkCompleted，那么这就是您真正想要的行：

```
val workCompletedFuture = (worker ? WorkTicket(work)).mapTo[WorkCompleted] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T13:51:45.037

我同意 Endre 的回答 - 都是非常好的观点。

这个怎么样：

1) 为自己安排一条超时消息（使用`system.scheduler.scheduleOnce`）

2）使用常规向工人发送工作消息`tell`

3a) 如果完成的工作在超时消息之前返回，取消计划的工作并使用步骤 1 和 2 重新分配工作

3b) 如果完成的工作在超时消息后返回，则忽略它或取消重新分配的工作。

未来可能对工人有用的一个地方是，特别是如果工作需要很长时间或正在阻塞。工作人员可以使用未来来完成工作并保持可用以处理更多传入消息，例如取消工作。

# ios5 - 子类化 QLPreviewController 时未调用 DataSource 方法

> ID：14316409
> 
> 赞同：2
> 
> 时间：2013-01-14T10:08:37.907
> 
> 标签：ios5, ios6, qlpreviewcontroller

我`QLPreviewController`用于显示文档，以删除我正在子类化的共享按钮`QLPreviewController`，如下所示，

```
@interface QuickLookViewController : QLPreviewController{

} 
```

我正在使用下面的类

```
QuickLookViewController *previewer = [[QuickLookViewController alloc] init];
// Set data source
[previewer setDataSource:self];
// Which item to preview
[previewer setCurrentPreviewItemIndex:indexPath.row];
// Push new viewcontroller, previewing the document
[[self navigationController] pushViewController:previewer animated:YES]; 
```

但是数据源方法没有调用。

谁能帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:28:59.773

您的界面必须告诉它正在实现回调

```
@interface QuickLookViewController : QLPreviewController
<QLPreviewControllerDataSource, QLPreviewControllerDelegate> 
```

在类名之后的箭头括号内添加协议名称

# url - 默认文档不显示完整的 url

> ID：14316410
> 
> 赞同：7
> 
> 时间：2013-01-14T10:08:43.413
> 
> 标签：url, iis, .net-3.5

我对 iis 设置的默认文档有疑问。在我的站点 (http://mysite) 中，我提供了默认文档作为登录页面。当用户键入 url (http://mysite) 时，它会将用户重定向到登录页面，但不显示完整的 url (http://mysite/login.aspx)。看起来默认文档执行 server.transfer 而不是 response.redirect。因此，当用户输入他们的凭据然后单击登录时，它会再次将他们重定向到登录并从那里正常工作。所以用户必须输入他们的凭据两次。

我的应用程序是在 .NET 3.5 上开发的。

有没有办法可以实现response.redirect。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T00:29:45.613

使用 index.html 作为基本目录中的默认文档。在此 index.html 中，使用元刷新或 javascript 重定向到您的 login.aspx 页面。请参阅以下示例元刷新代码。

你的项目

```
website 
   index.html
   secure/login.aspx 
```

索引.html

```
<!DOCTYPE html>
<html>
<head>
<title>YOUR PROJECT NAME</title>
    <meta http-equiv="refresh" content="0;URL='http://www.YOURDOMAIN:COM/secure/login.aspx'" />    
</head>

<body>
    <p> Click to   
        <a href="http://www.YOURDOMAIN:COM/secure/login.aspx">Login</a>
   </p> 

</body>

</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T17:03:43.003

在与默认文档相同的文件夹中，放置名为 web.Config（无 .txt、.xml 或任何其他扩展名）的文本文件，其内容如下：

```
<?xml version="1.0"?>
<configuration>
    <system.webServer>
        <rewrite>
            <rules>
                <rule name="Redirect to login" stopProcessing="true"> 
                    <match url=".*" />
                    <conditions>
                         <add input="{URL}" pattern="^/$" />
                    </conditions>
                    <action type="Redirect" url="/login.aspx" redirectType="Permanent" />
                </rule>
            </rules>
        </rewrite>
    </system.webServer>
</configuration> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-02T10:23:57.473

在登录页面的 Page_Init 中写入以下行。

```
Protected Sub Page_Init(sender As Object, e As System.EventArgs) Handles Me.Init
    If Not MyBase.IsPostBack Then
        If HttpContext.Current.Request.Url.ToString.Contains("Login") = False Then
            Response.Redirect("~/Login.aspx")
        End If
End Sub 
```

# c++ - 等价于 Matlab 中的 C++ std::set

> ID：14316414
> 
> 赞同：6
> 
> 时间：2013-01-14T10:08:53.793
> 
> 标签：c++, matlab

如何`set`在具有以下属性的 Matlab 中定义一个：

*   独特的物品
*   高效搜索
*   已订购

`std::set`也许没有内置容器，那么我怎样才能结合一些东西来获得与C++相同的东西呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T10:15:20.883

您可以像这样使用 Java 的 HashSet：

```
>> x = java.util.HashSet;
>> x.add(1);
>> x.add(2);
>> x.contains(1)
ans = 
     1
>> x.contains(3)
ans = 
     0
>> x
x = 
[2.0, 1.0] 
```

在评论中指出 HashSet 没有排序。这是完全正确的。我的错！您可以改用 TreeSet，它*是*有序的：

```
>> x = java.util.TreeSet;
>> x.add(1);
>> x.add(3);
>> x.add(2);
>> x
x = 
[1.0, 2.0, 3.0] 
```

# asp.net-mvc - 如何在 Asp.Net MVC 中导出到 excel？

> ID：14316415
> 
> 赞同：4
> 
> 时间：2013-01-14T10:08:55.837
> 
> 标签：asp.net-mvc, export-to-excel

脚本

```
function PostExportValues(meter_id, range_type_id, start_date, end_date, returnUrl) {
    var meter = $("#meter_selection").val()[0];
    $.ajax({
        url: '@Url.Action("GridExportToExcel", "Widget")',
        type: 'POST',
        data: { MeterType: meter_id, DateRangeType: range_type_id, StartDate: start_date, EndDate: end_date, returnUrl: returnUrl, Meter: meter },
        success: function () {
            alert("Success.");
        },
        error: function () {
            alert("Error!");
        }
    });   //end ajax
} //end PostExportValues 
```

控制器

```
public void GridExportToExcel(int MeterType, int DateRangeType, DateTime? StartDate, DateTime? EndDate, string returnUrl, int Meter)
{
    Customers customer = CustomerManager.GetCustomer(WebSecurity.CurrentUserId);
    //if start date is null, then set it to another early date.
    DateTime startDate = DateTimeManager.GetStartDate(StartDate, DateRangeType, customer.sno);
    //if end date is null, then set to date time now.
    DateTime endDate = DateTimeManager.GetEndDate(EndDate, StartDate);

    IQueryable<MeterReadingsForChart> meterReadings = MeterReadingManager.GetCustomerMeterReadings(customer.sno, MeterType, Meter, startDate, endDate, DateTimeManager.GetTimeIntervalTypeById(DateRangeType)).AsQueryable(); // MeterReadingManager.GetCustomerTotalMeterReadings(customer.sno, MeterType, startDate, endDate, DateTimeManager.GetTimeIntervalTypeById(DateRangeType)).AsQueryable();
    var table = MeterReadingManager.GetMeterReadingsPivot(meterReadings, MeterType);

    //table output some thing like following:
    //T1 T2 T3
    //10 20 25
    //13 23 21
    //15 26 27

    var grid = new GridView();
    grid.DataSource = table;
    grid.DataBind();

    Response.ClearContent();
    Response.AddHeader("content-disposition", "attachment; filename=MyExcelFile.xls");

    Response.ContentType = "application/excel";
    StringWriter sw = new StringWriter();
    HtmlTextWriter htw = new HtmlTextWriter(sw);

    grid.RenderControl(htw);

    Response.Write(sw.ToString());
    Response.End();

    //return View("Index");
} 
```

方法`GridExportToExcel`正在运行，脚本警报消息是`Success.`，但没有任何操作（没有任何反应）。

我错过了什么？我希望该 excel 文件会自动下载。

谢谢...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-14T10:53:46.993

您不能在 ajax 查询上调用文件下载，因为浏览器不会触发文件下载。不要对控制器方法使用 ajax 调用，您可以像这样使用

```
window.open("url/Exporttoexcel?id="); 
```

添加参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:14:35.850

问题可能是您实际上无法通过 ajax 调用下载。如果你看这个：[jQuery plugin for requesting ajax like file downloads](http://filamentgroup.com/lab/jquery_plugin_for_requesting_ajax_like_file_downloads/)。

这将帮助你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-09T06:32:53.630

你也可以使用

```
window.location.href = "controllerName/GridExportToExcel?id=" 
```

# android - Android：在九个旧 Android 的帮助下，我们如何将 withEndAction 向后移植到旧版本

> ID：14316416
> 
> 赞同：11
> 
> 时间：2013-01-14T10:08:55.440
> 
> 标签：android

我正在做一些需要一个接一个播放大约 10 个动画的东西，但是在每个动画结束时需要检查一些条件，所以我不能使用动画集或 setStartDelay。

我发现在 Jelly Bean 上使用新方法很容易做到，其中的新方法是 withEndAction，而我正在做它作为实验，但现在我必须在具有 minSdk 10 的应用程序中实现它。

我正在使用九个旧 Android 并且效果很好，但是使用 setListner 非常困难，并且创建的代码难以维持 10 个连续动画。

所以我在想，创建一个继承自九个旧机器人的适配器，我可以添加执行 runnable 的 withEndAction 函数？

有人可以指导我如何做到这一点，有没有更好的方法呢？

谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-10-11T15:38:14.367

我使用[了 setListener](http://developer.android.com/reference/android/view/ViewPropertyAnimator.html#setListener%28android.animation.Animator.AnimatorListener%29)

```
 if (Build.VERSION.SDK_INT < Build.VERSION_CODES.JELLY_BEAN) {
        viewPropertyAnimator.setListener(new AnimatorListenerAdapter() {
            @Override
            public void onAnimationEnd(Animator animation) {
                doSomething();
            }
        });
    } else {
        viewPropertyAnimator.withEndAction(new Runnable() {
            @Override
            public void run() {
                doSomething();
            }
        });
    } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-11-15T04:39:20.093

您现在可以使用`ViewCompat`和附加您想要的任何动画。

```
ViewCompat.animate(yourView).scaleY(3).withEndAction(yourRunnable).start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-02T09:54:23.943

基本上，为了使您的代码更具可读性，您可以使用内置的[AnimatorListenerAdapter](http://developer.android.com/reference/android/animation/AnimatorListenerAdapter.html)将您从匿名内部类混乱中拯救出来。您甚至可以将其抽象化，使其看起来像`withEndAction`这样：

```
import android.animation.Animator;
import android.animation.AnimatorListenerAdapter;
import android.app.Application;
import android.support.v4.view.ViewPropertyAnimatorListener;
import android.view.View;

public class AnimatorActionListener extends AnimatorListenerAdapter {

public enum ActionType {
    START, END;
}

final private ActionType type;
final private Runnable action;

public AnimatorActionListener(Runnable action, ActionType type) {
    this.action = action;
    this.type = type;
}

@Override
public void onAnimationEnd(Animator animation) {
    if (type == ActionType.END) {
        action.run();
    }
}

@Override
public void onAnimationStart(Animator animation) {
    if (type == ActionType.START) {
        action.run();
    }
}
} 
```

然后用法变成：

```
 view.animate()./*...some parameters...*/.setListener(new AnimatorActionListener(new Runnable() {
        @Override
        public void run() {
            // do stuff
        }
    }, ActionType.END)); // or ActionType.START 
```

而对于那些必须使用平台内置函数的人来说`withStartAction, withEndAction`，只需将SDK检查代码`AnimatorActionListener`也放入其中，以免客户端类杂乱无章。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T10:33:19.727

我能想到2个选项：

1.  使用外观模式创建自己的动画池（这可能需要很多工作）
2.  从 ADT 获取源代码并进行修改。如果你找不到它，这里是：http: [//pastebin.com/9nCPC4aR](http://pastebin.com/9nCPC4aR)。将它（类似于`ViewPropertyAnimatorCompat`）复制到您自己的包中。该类似乎与其他 Android 的东西没有太多的耦合，所以应该按原样工作:)
3.  **更新：**这是另一种选择，动画队列。类似于第一个想法，但更直截了当：

代码：

```
public class AnimationQueue extends LinkedList<Animation> implements
    AnimationListener {

private View mView;

public static AnimationQueue ready(Animation... animations) {
    AnimationQueue queue = new AnimationQueue();
    for (Animation animation : animations) {
        queue.add(animation);
    }
    return queue;
}

public AnimationQueue steady(View view) {
    mView = view;
    return this;
}

public void go() {
    Animation animation = poll();
    animation.setAnimationListener(this);
    mView.startAnimation(animation);
}

@Override public void onAnimationEnd(Animation animation) {
    go();
}

@Override public void onAnimationStart(Animation animation) {
}

@Override public void onAnimationRepeat(Animation animation) {
}

} 
```

用法：

```
AnimationQueue.ready(anim1, anim2, anim3).steady(view).go(); 
```

干杯

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-31T13:21:06.707

我想我有更好的解决方案：

```
 view.animate().setDuration(2000).alpha(0);
            //timAnimDelay.purge();
            timAnimDelay.schedule(new TimerTask() {
                @Override
                public void run() {

                    // on UI thread
                    runOnUiThread(new Runnable() {
                        @Override
                        public void run() {
                            // here animation
                        }
                    });
                }
            // delay start
            } , 2000);
            timAnimDelay.purge(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-17T18:15:01.057

我的解决方案也使用了很棒的 Nineoldandroids

代替

```
starsBig[4].animate().rotation(3600).setDuration(2000).withEndAction(runnable) 
```

我做了

```
animate(starsBig[4]).rotationBy(3600).setDuration(2010);
this.runOnUiThread(new Runnable() {
public void run() {
    for (int i = 0; i < 5; i++) {
        starReset(stars[i]);
        starReset(starsBig[i]);
    }
           }
}); 
```

它适用于一个动画

# php - Opencart 1.5.4 addToCart() 首次页面显示功能不起作用

> ID：14316417
> 
> 赞同：0
> 
> 时间：2013-01-14T10:09:18.177
> 
> 标签：php, javascript, opencart

我目前正在开发 Open Cart 1.5.4 中的一个项目。我将购物车轻微移动到另一个 div 中，没有任何问题。事情是在新电脑上，当他们第一次进入网站时，客户不可能将产品添加到购物车中。如果他们进入另一个页面然后返回它就可以了。javascript文件正确加载，没有任何问题。

希望这个解释很好地解释了问题或错误。

提前致谢。

JAVASCRIPT

```
function addToCart(product_id, quantity) {
    quantity = typeof(quantity) != 'undefined' ? quantity : 1;

    $.ajax({
        url: 'index.php?route=checkout/cart/add',
        type: 'post',
        data: 'product_id=' + product_id + '&quantity=' + quantity,
        dataType: 'json',
        success: function(json) {
            $('.success, .warning, .attention, .information, .error').remove();

            if (json['redirect']) {
                location = json['redirect'];
            }

            if (json['success']) {
                //$('#notification').html('<div class="success" style="display: none;">' + json['success'] + '<img src="catalog/view/theme/default/image/close.png" alt="" class="close" /></div>');

                $('.success').fadeIn('slow');
                try {
                    $('#cart-total').html(json['total']);
                }
                catch(err) {
                    console.log(err.message());
                }

                $('html, body').animate({ scrollTop: 0 }, 'slow');

                $(".heading").animate({backgroundColor: "#FFFFFF"}, 'slow');

                $(".cart_arrow").attr("style", "display: block;");

                $(".heading").animate({backgroundColor: "#585858"}, 'slow');

            }   
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:42:59.430

改变

```
url: 'index.php?route=checkout/cart/add', 
```

到

```
url: $('base').attr('href') + 'index.php?route=checkout/cart/add', 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:36:14.863

找到了问题的原因。当安装了 Open Cart 并且即将选择域时，您可以选择 www 或非 www。取决于你选择的另一个不会工作。所以解决这个问题的htaccess重定向从非www到www地址

```
RewriteCond %{HTTP_HOST} ^domain.com$ [NC]
RewriteRule ^(.*) http://www.domain.com/$1 [R=301,L]

RewriteBase /
RewriteRule ^sitemap.xml$ index.php?route=feed/google_sitemap [L]
RewriteRule ^googlebase.xml$ index.php?route=feed/google_base [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !.*\.(ico|gif|jpg|jpeg|png|js|css)
RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA] 
```

The redirect has to be over RewriteBase /

Thanks and I hope this helps in the future for anyone nedded this kind of support

# javascript - 使用Javascript计算重复字段的数量

> ID：14316419
> 
> 赞同：0
> 
> 时间：2013-01-14T10:09:25.177
> 
> 标签：javascript

是否可以计算用户添加的字段数。

```
<div class="myzebra-repeatable-field">
  <input id="cred_form_3584_1_wpcf-ticket-student-name" class="myzebra-control myzebra-text myzebra-prime-name-wpcf-ticket-student-name" type="text" placeholder="" value="" name="wpcf-ticket-student-name[0]">
</div>
<div class="myzebra-repeatable-field" style="display: block;">
  <input id="cred_form_3584_1_wpcf-ticket-student-name_repeat_2" class="myzebra-control myzebra-text myzebra-prime-name-wpcf-ticket-student-name" type="text" placeholder="" value="" name="wpcf-ticket-student-name[2]" style="visibility: visible;">
  <a class="myzebra-remove-field" href="javascript:;">Remove</a>
</div>
<div class="myzebra-repeatable-field" style="display: block;">
  <input id="cred_form_3584_1_wpcf-ticket-student-name_repeat_3" class="myzebra-control myzebra-text myzebra-prime-name-wpcf-ticket-student-name" type="text" placeholder="" value="" name="wpcf-ticket-student-name[3]" style="visibility: visible;">
  <a class="myzebra-remove-field" href="javascript:;">Remove</a>
</div> 
```

第一个字段是必需的（所以没有删除按钮），其余的可以删除，因此我需要知道我应该怎么做才能计算最后的字段数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:10:35.320

为什么不简单

```
var nb = $('.myzebra-repeatable-field').length - 1 ; 
```

?

如果您想明确计算具有删除链接的那些，您可以这样做

```
var nb = $('.myzebra-repeatable-field .myzebra-remove-field').length ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:15:20.770

只需使用[`document.getElementsByClassName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)并查看返回的 HTMLCollection 的长度：

```
var u = document.getElementsByClassName('myzebra-repeatable-field').length - 1; 
```

# linux-kernel - 从源代码编译后如何从 linux 内核启动？

> ID：14316424
> 
> 赞同：1
> 
> 时间：2013-01-14T10:09:42.257
> 
> 标签：linux-kernel, boot

我已经编译了linux kernel 2.6.39，我想在BOCHS中模拟它。那么，如何在BOCHS中从这个编译的内核启动？
我有一个制作启动 .ISO 文件的想法。但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:09:54.640

Bochs 似乎缺乏直接启动可执行文件的能力，因此您应该先创建一个虚拟磁盘磁盘映像[（教程）](http://bochs.sourceforge.net/doc/docbook/user/diskimagehowto.html)。然后您可以使用 kpartx 将图像设置为循环设备：

```
# kpartx -a image.img 
```

这将在 /dev 下创建 loopNp1（N 取决于使用的循环设备，通常为 0）。现在您可以格式化并挂载它：

```
# mkfs.ext4 /dev/loopNp1
# mount /dev/loopNp1 /mnt 
```

然后，您可以将内核映像（zImage、bzImage 或类似的）复制到 /mnt/boot。但是，要使其正常工作，您还需要一个引导加载程序。您可以使用以下命令轻松安装 grub（如果您已经在系统上使用它）

```
# grub-install --boot-directory=/mnt/boot /dev/loopN 
```

您还需要一个 grub.cfg 之类的

```
set timeout=0
set default=0 # Set the default menu entry

menuentry "Linux" {
   linux /boot/zImage
   boot
} 
```

将它放在 /mnt/boot/grub 下。现在我们完成了，卸载所有内容，在你的 bochsrc 中添加一行

ata0-master：类型=磁盘，路径=image.img，模式=平面，圆柱=0，磁头=0，spt=0，平移=自动

（注意：在某些情况下，您可能需要手动指定 CHS 值）并且它应该可以工作（好吧，至少在它尝试运行 init 之前 - 但这是一个不同的问题）。

# ruby-on-rails - 是否有 Ruby on Rails 的 PayPal IPN 代码示例？

> ID：14316426
> 
> 赞同：21
> 
> 时间：2013-01-14T10:09:46.600
> 
> 标签：ruby-on-rails, paypal-ipn

有几种语言的官方代码示例，但找不到适用于 Rails 的代码示例。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-14T10:09:46.600

我在这里发布了 Rails 控制器的工作代码示例。它进行验证。我希望它会有用。

```
class PaymentNotificationsController < ApplicationController
  protect_from_forgery :except => [:create] #Otherwise the request from PayPal wouldn't make it to the controller
  def create
    response = validate_IPN_notification(request.raw_post)
    case response
    when "VERIFIED"
      # check that paymentStatus=Completed
      # check that txnId has not been previously processed
      # check that receiverEmail is your Primary PayPal email
      # check that paymentAmount/paymentCurrency are correct
      # process payment
    when "INVALID"
      # log for investigation
    else
      # error
    end
    render :nothing => true
  end 
  protected 
  def validate_IPN_notification(raw)
    live = 'https://ipnpb.paypal.com/cgi-bin'
    sandbox = 'https://ipnpb.sandbox.paypal.com/cgi-bin'
    uri = URI.parse(sandbox + '/webscr?cmd=_notify-validate')
    http = Net::HTTP.new(uri.host, uri.port)
    http.open_timeout = 60
    http.read_timeout = 60
    http.verify_mode = OpenSSL::SSL::VERIFY_PEER
    http.use_ssl = true
    response = http.post(uri.request_uri, raw,
                         'Content-Length' => "#{raw.size}",
                         'User-Agent' => "My custom user agent"
                       ).body
  end
end 
```

代码的灵感来自[Railscast 142](http://railscasts.com/episodes/142-paypal-notifications?view=asciicast)和[Tanel Suurhans的这篇文章](http://www.perfectline.ee/blog/correct-paypal-ipn-handling-with-rails)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-16T23:13:22.567

PayPal 的 Ruby Merchant SDK 提供了一种`ipn_valid?`布尔方法，让您可以轻松完成这项工作。

```
def notify
  @api = PayPal::SDK::Merchant.new
  if @api.ipn_valid?(request.raw_post)  # return true or false
    # params contains the data
  end
end 
```

[https://github.com/paypal/merchant-sdk-ruby/blob/master/samples/IPN-README.md](https://github.com/paypal/merchant-sdk-ruby/blob/master/samples/IPN-README.md)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-16T14:30:30.983

## IPN 宝石

DWilke 的 Paypal IPN gem 可以在这里找到：

[https://github.com/dwilkie/paypal](https://github.com/dwilkie/paypal)

查看 IPN 模块。这是很好的代码：

[https://github.com/dwilkie/paypal/blob/master/lib/paypal/ipn/ipn.rb](https://github.com/dwilkie/paypal/blob/master/lib/paypal/ipn/ipn.rb)

## 针对模拟器进行测试

您可以在此处针对 IPN 模拟器对其进行测试：

[https://developer.paypal.com/webapps/developer/applications/ipn_simulator](https://developer.paypal.com/webapps/developer/applications/ipn_simulator)

我使用 ngrok 在公共 URL 上公开 localhost:3000，然后将模拟器指向它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T10:18:24.490

我在我的一个项目中实现了 IPN，您的代码看起来不错。那么你面临的问题是什么？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T12:25:39.880

查看[ActiveMerchant](https://github.com/Shopify/active_merchant) gem，其中包括多个网关实现，其中包括[Paypal 的 IPN](https://github.com/Shopify/active_merchant/tree/master/lib/active_merchant/billing/integrations/paypal)。

高温高压

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-13T12:03:33.707

**您可以这样做以获取 ipn 详细信息。结果将显示您是否已验证。您可以从 body 获取所有详细信息**

post '/english/ipn' 做

url = " [https://sandbox.paypal.com/cgi-bin/webscr?cmd=_notify-validate](https://sandbox.paypal.com/cgi-bin/webscr?cmd=_notify-validate&#) {@query}"

正文 = request.body.string

结果 = RestClient.post 网址，正文

结尾

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-20T15:07:42.400

有一些 PayPal gem，其中至少一个（paypal-sdk-rest）包含该`PayPal::SDK::Core::API::IPN.valid?`方法。

以下是如何使用它：

```
class YourController < ApplicationController

  skip_before_action :verify_authenticity_token, only: :your_action

  def your_action
    verified = PayPal::SDK::Core::API::IPN.valid?(request.raw_post)

    if verified
      # Verification passed, do something useful here.
      render nothing: true, status: :ok
    else
      # Verification failed!
      render nothing: true, status: :unprocessable_entity
    end
  end

end 
```

# dart - Dart pub 更新失败

> ID：14316430
> 
> 赞同：7
> 
> 时间：2013-01-14T10:10:14.930
> 
> 标签：dart, dart-pub, dart-editor

尝试进行发布更新以`web_ui`安装软件包时出现以下错误。

**飞镖编辑器版本：** 0.2.10_r16761

**Dart SDK 版本：** 0.2.10.1_r16761

`"Help > About > Check for Update..."`也给了我`"Unable to get latest revision"`。可能是代理问题吗？

是否有手动添加软件包的方法，例如下载软件包并将其放在某个地方？

```
Running pub update ...
Pub update failed, [1] Resolving dependencies...
Got socket error trying to find package "web_ui" at http://pub.dartlang.org.
OS Error: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
, errno = 10060 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:49:26.173

根据评论讨论，此问题是由于您位于 HTTP 代理服务器后面。Dart Editor 和 Dart Pub 不支持系统的代理设置，只有在您与网络正常连接时才能工作。目前有 2 个 bug 被 Dart 团队希望在某个时候修复，但它们还没有出现。

请在错误上查看有关此问题的更多详细信息，如果您希望修复它，请为错误加注星标。

*   错误 5455：[允许 Dart 编辑器使用代理进行更新](http://code.google.com/p/dart/issues/detail?id=5455)
*   错误 5454：[允许 Pub 使用 HTTP 代理](http://code.google.com/p/dart/issues/detail?id=5454)

# sql - SQLi 查询说明

> ID：14316434
> 
> 赞同：0
> 
> 时间：2013-01-14T10:10:21.747
> 
> 标签：sql, sql-injection

我是 SQL 注入领域的初学者，如果你能帮助我，我会很高兴。

**场景：**易受攻击的 Web 应用程序。

假设你有一个这样的 URL：

```
http://www.site1.com/cms/login.php 
```

还假设为了访问该站点，您必须提供以下凭据：

> 用户名：foo，密码：bar

因此，上面的 URL 变为：

```
http://www.site.com/cms/login.php?username=foo&password=bar 
```

如果您随后注入有效负载`'OR'1'='1`，它将更改为：

```
 http://www.site.com/cms/login.php?username=foo&password=bar'OR'1'='1 
```

这对我来说很清楚，但我担心的是，我被告知相应的 SQL 查询（由后端 RDBMS 处理发送的查询）应该是：

```
SELECT userid
FROM CMSUsers
WHERE user = 'foo'AND password = 'bar' OR'1'='1'; 
```

该查询是重言式，因为`'1'='1'`始终为 TRUE。

但是有效载荷`'OR'1'='1`和查询的条件语句似乎不同`OR'1'='1';`（看`'`，有效载荷中最后一个 1 之后没有重音）

我的怀疑合理吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T10:18:10.450

易受此类攻击的应用程序将具有类似于以下的代码来构造 SQL 查询：

```
var query = "SELECT userid
FROM CMSUsers
WHERE user = '" + usernameValue + "' AND password = '" + passwordValue + "'"; 
```

请注意单引号的放置。用户通过`passwordValue`变量传递的所有内容都将插入到单引号内的该位置。

现在，要执行攻击，您需要尽早关闭密码的单引号，以便能够添加始终正确的部分。你会传递这样的东西：`bar' OR '1' = '1`. 请注意：开头或结尾没有单引号。这些来自应用程序中的硬编码查询字符串。

在上面的位置插入这个值会`passwordValue`产生以下结果：

```
... AND password = 'bar' OR '1' = '1'
<------- A --------><------- B ---->A 
```

*   `A`：来自程序的硬编码内容
*   `B`: 通过`passwordValue`变量传递的内容

# django - 从 1.3 升级到 1.4 时导致 django 崩溃的 Cookie

> ID：14316445
> 
> 赞同：0
> 
> 时间：2013-01-14T10:11:01.213
> 
> 标签：django

于是我从 django 1.3 升级到了 1.4，一切都很顺利。然而，少数用户只是得到一个`Internal Server Error`, 由 nginx 抛出，通常是在服务器崩溃时。

对此进行调查表明这是 cookie 的问题。日志中的错误是：

```
ImproperlyConfigured: Error importing authentication backend
  site.app.backends.EmailModelBackend: "No module named site.app.backends" 
```

这是因为在升级期间我重新组织了我的项目，而这个特定的后端现在位于`app.backends`而不是`site.app.backends`. 显然，此信息被硬编码到 auth cookie 中，这导致了问题。

除了向用户发送电子邮件并告诉他们清除 cookie 之外，还有什么方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T11:13:55.897

如果您使用默认的[数据库支持会话](https://docs.djangoproject.com/en/dev/topics/http/sessions/?from=olddocs#using-database-backed-sessions)，则对旧后端的引用存储在`django_session`表中，而用户的 cookie 只是对数据库中行的引用。在这种情况下，您可以通过从数据库中删除所有会话数据来防止错误。

在您执行此操作之前请仔细考虑。您可能不想删除所有会话数据——例如，它会注销所有用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:46:47.960

我不认为你可以把这归咎于饼干。请用细齿梳子再次检查您的代码，并寻找对`site.app.backends`.

如果您可以从崩溃中访问调用堆栈，它会告诉您确切的位置。

# facebook - Facebook 访问令牌有效性

> ID：14316450
> 
> 赞同：1
> 
> 时间：2013-01-14T10:11:07.583
> 
> 标签：facebook, oauth, facebook-oauth

我使用 Facebook[服务器端登录流程](https://developers.facebook.com/docs/howtos/login/server-side-login/)来获取长期访问令牌，有效期为 60 天。由于我一直需要访问用户的帐户（即我总是需要一个有效的访问令牌），当令牌即将到期时，我要求用户重新确认对我的应用程序的访问。问题是，当令牌尚未过期时，Facebook 会返回相同的令牌，但没有延长有效期。

例如，刚刚发行的令牌有效期为 60 天。三天后，用户再次确认访问我的应用程序，但 Facebook 返回相同的令牌，有效期仅为 57 天。我想在每次确认后获得一个新的（有效期为 60 天）。

在 Stack Overflow 上，有几个关于 Facebook 令牌有效性的问题，但是没有一个讨论这个问题。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T11:26:42.973

根据[Facebook 的扩展访问令牌的文档](https://developers.facebook.com/docs/howtos/login/extending-tokens/)，“从……服务器端登录流程创建的应用程序会自动获得长期存在的用户访问令牌。每次用户触发身份验证流程时，这个长期存在的令牌都会刷新和扩展。”

由于这没有发生，您应该[向 Facebook 提交错误](http://developers.facebook.com/bugs)。

我还建议不要检查访问令牌过期，因为访问令牌可能会在过期日期之前因多种原因过期：

*   用户更改密码
*   您更改了应用密码
*   用户删除应用程序，然后返回应用程序

相反，您应该在每次调用 FB api 时检查 OAuth 错误，然后在检测到 OAuth 错误时将用户重定向到登录流程，如 Facebook 开发人员博客上关于[如何处理过期访问令牌](http://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)的文章中所述.

# c - CUDA 中的并行列表减少

> ID：14316451
> 
> 赞同：1
> 
> 时间：2013-01-14T10:11:09.093
> 
> 标签：c, cuda, parallel-processing, gpu

我正在研究 Cuda Parallel reduction Whitepaper，但不幸的是我的算法似乎反复产生不正确的结果，我似乎无法弄清楚为什么（当然教科书示例必须有效？当然我只是在做一些非常明显的错误？） . 这是我的内核函数：

**我的定义：**

```
 #define BLOCK_SIZE 512 
```

**我的内核功能：**

```
 __global__ void total(float * inputList, float * outputList, int len) {
      __shared__ float sdata[2*BLOCK_SIZE];
      unsigned int tid = threadIdx.x;
      unsigned int i = blockIdx.x*(blockDim.x*2) + threadIdx.x;
      sdata[t] = inputList[i]+inputList[i+blockDim.x];
      __syncthreads();
      for (unsigned int s=blockDim.x/2; s>0; s>>=1) {
        if (tid < s) {
          sdata[tid] += sdata[tid + s];
        }
        __syncthreads();
      }
      if (tid == 0) 
        outputList[blockIdx.x] = sdata[0];
} 
```

**我的内存分配：**

```
 outputSize = inputSize / (BLOCK_SIZE<<1);
  cudaMalloc((void**) &deviceInput, inputSize*sizeof(float));
  cudaMalloc((void**) &deviceOutput, outputSize*sizeof(float));
  cudaMemcpy(deviceInput, hostInput, inputSize*sizeof(float), cudaMemcpyHostToDevice); 
```

**我的设备呼叫：**

```
 dim3 dimGrid((inputSize-1)/BLOCK_SIZE +1, 1, 1);
 dim3 dimBlock(BLOCK_SIZE,1,1);

 total<<<dimBlock, dimGrid>>>(deviceInput, deviceOutput, outputSize);
 cudaDeviceSynchronize(); 
```

**我的记忆提取：**

```
 cudaMemcpy(hostOutput, deviceOutput, outputSize*sizeof(float), cudaMemcpyDeviceToHost); 
```

最后是我的最终计算：

```
 for (int counter = 1; counter < outputSize; counter++) {
    hostOutput[0] += hostOutput[counter];
 } 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T11:06:13.390

以下代码行中的内核启动配置不正确。

```
total<<<dimBlock, dimGrid>>>(deviceInput, deviceOutput, outputSize); 
```

内核配置的第一个参数是网格大小，第二个参数是块大小。

你应该这样做：

```
total<<<dimGrid, dimBlock>>>(deviceInput, deviceOutput, outputSize); 
```

请始终[对 CUDA Runtime 函数调用执行错误检查，](https://stackoverflow.com/a/14038590/1231073)并检查返回的错误代码以获取程序失败的原因。

您的内核启动应该在您当前的代码中失败。对`cudaDeviceSynchronize`调用进行错误检查会导致您找到不正确结果的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T10:29:51.113

该代码假定输入大小是块大小的倍数。如果 inputSize 不是块大小的倍数，它将读取 inputList 数组的末尾。

# breeze - 翻译微风验证消息

> ID：14316454
> 
> 赞同：3
> 
> 时间：2013-01-14T10:11:13.457
> 
> 标签：breeze

改进我的示例，了解如何使用获得的元数据在淘汰赛中创建验证规则 (http://stackoverflow.com/questions/13662446/knockout-validation-using-breeze-utility) 现在我使用轻风插入实体的验证器：

```
function addValidationRules(entity) {
    var entityType = entity.entityType;
    console.log(entityType);
    if (entityType) {
        for (var i = 0; i < entityType.dataProperties.length; i++) {
            var property = entityType.dataProperties[i];
            var propertyName = property.name;
            var propertyObject = entity[propertyName];

            var validators = [];
            for (var u = 0; u < property.validators.length; u++) {
                var validator = property.validators[u];
                var nValidator = {
                    propertyName: propertyName,
                    validator: function (val, other) {
                        var error = this.innerValidator.validate(val, { displayName: this.propertyName });
                        this.message = error ? error.errorMessage : "";
                        return error === null;
                    },
                    message: "",
                    innerValidator: validator
                }
                validators.push(nValidator);
            }
            propertyObject.extend({
                validation: validators
            });
        }

        for (var i = 0; i < entityType.foreignKeyProperties.length; i++) {
            var property = entityType.foreignKeyProperties[i];
            var propertyName = property.name;
            var propertyObject = entity[propertyName];

            var validators = [];
            for (var u = 0; u < property.validators.length; u++) {
                var validator = property.validators[u];
                var nValidator = {
                    propertyName: propertyName,
                    validator: function (val, other) {
                        var error = this.innerValidator.validate(val, { displayName: this.propertyName });
                        this.message = error ? error.errorMessage : "";
                        return error === null;
                    },
                    message: "",
                    innerValidator: validator
                }
                validators.push(nValidator);
            }
            propertyObject.extend({
                validation: validators
            });
            if (!property.isNullable) {
                //Bussiness Rule: 0 is not allowed for required foreign keys
                propertyObject.extend({ notEqual: foreignKeyInvalidValue });
            }
        }
    }
}; 
```

我现在需要将错误消息翻译成我的语言，我想知道是否可以包含一个类似于包含在敲除验证中的功能来翻译消息：

```
//quick function to override rule messages
ko.validation.localize = function (msgTranslations) {

    var msg, rule;

    //loop the properties in the object and assign the msg to the rule
    for (rule in msgTranslations) {
        if (ko.validation.rules.hasOwnProperty(rule)) {
            ko.validation.rules[rule].message = msgTranslations[rule];
        }
    }
};
//#endregion 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T18:07:43.660

这是一个好主意。请将其添加到[微风用户语音](https://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions)（并投票）。我们非常重视这些建议。

短期内还有另一种方法。您可以更换任何

```
Validator.messageTemplates 
```

与您自己的消息。**Validator.messageTemplates**是一个配置对象，以验证器的名称为键，其中的值是错误消息的参数化版本。

我们确实需要更好地记录这一点。

# delphi - 使用 NTQuerySystemInformation/NtQueryInformationFile/NtQueryObject 获取进程使用的 Unicode 文件名

> ID：14316461
> 
> 赞同：3
> 
> 时间：2013-01-14T10:11:47.343
> 
> 标签：delphi, delphi-xe3

我稍微修改了这里的代码：

[Delphi - 查找正在从我的程序访问文件的进程](https://stackoverflow.com/questions/8726906/delphi-finding-the-process-that-is-accessing-a-file-from-my-program)

为了通过给定的 pID 返回句柄名称列表，我将每个条目添加到 TStringList。问题是名称包含像“？”这样的垃圾。在包含 unicode 字符的文件名中，例如“xxx ★ 5”出现为“xxx ? 5”

代码有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T11:12:24.377

看到任何非 ASCII 字符的问号是尝试从 Unicode 转换为 ANSI 的标志。

问题出在这个函数中：

```
function GetFileNameHandleThr(Data: Pointer): DWORD; stdcall;
var
  dwReturn: DWORD;
  FileNameInfo: FILE_NAME_INFORMATION;
  ObjectNameInfo: TOBJECT_NAME_INFORMATION;
  IoStatusBlock: IO_STATUS_BLOCK;
  pThreadParam: TGetFileNameThreadParam;
begin
  ZeroMemory(@FileNameInfo, SizeOf(FILE_NAME_INFORMATION));
  pThreadParam := PGetFileNameThreadParam(Data)^;
  Result := NtQueryInformationFile(pThreadParam.hFile, @IoStatusBlock,  @FileNameInfo, MAX_PATH * 2, FileNameInformation);
  if Result = STATUS_SUCCESS then
  begin
    Result := NtQueryObject(pThreadParam.hFile, ObjectNameInformation,  @ObjectNameInfo, MAX_PATH * 2, @dwReturn);
    if Result = STATUS_SUCCESS then
    begin
      pThreadParam.Result := Result;
      WideCharToMultiByte(CP_ACP, 0, @ObjectNameInfo.Name.Buffer[ObjectNameInfo.Name.MaximumLength - ObjectNameInfo.Name.Length], ObjectNameInfo.Name.Length, @pThreadParam.FileName[0], MAX_PATH, nil, nil);
    end
    else
    begin
      pThreadParam.Result := STATUS_SUCCESS;
      Result := STATUS_SUCCESS;
      WideCharToMultiByte(CP_ACP, 0, @FileNameInfo.FileName[0], IoStatusBlock.Information, @pThreadParam.FileName[0], MAX_PATH, nil, nil);
    end;
  end;
  PGetFileNameThreadParam(Data)^ := pThreadParam;
  ExitThread(Result);
end; 
```

这在对 的调用中从 Unicode 转换为 ANSI `WideCharToMultiByte`。您只需要删除那部分代码。

您需要修改此记录

```
TGetFileNameThreadParam = packed record
  hFile    : THandle;
  Result   : NT_STATUS;
  FileName : array [0..MAX_PATH - 1] of AnsiChar;
end; 
```

所以这`FileName`是一个数组`WideChar`。

```
TGetFileNameThreadParam = packed record
  hFile    : THandle;
  Result   : NT_STATUS;
  FileName : array [0..MAX_PATH - 1] of WideChar;
end; 
```

然后进行`GetFileNameHandleThr`相应的调整。我没有详细研究过它，但我希望你需要这样的东西：

```
function GetFileNameHandleThr(Data: Pointer): DWORD; stdcall;
var
  dwReturn: DWORD;
  FileNameInfo: FILE_NAME_INFORMATION;
  ObjectNameInfo: TOBJECT_NAME_INFORMATION;
  IoStatusBlock: IO_STATUS_BLOCK;
  pThreadParam: TGetFileNameThreadParam;
begin
  ZeroMemory(@FileNameInfo, SizeOf(FILE_NAME_INFORMATION));
  pThreadParam := PGetFileNameThreadParam(Data)^;
  Result := NtQueryInformationFile(pThreadParam.hFile, @IoStatusBlock,  @FileNameInfo, MAX_PATH * 2, FileNameInformation);
  if Result = STATUS_SUCCESS then
  begin
    Result := NtQueryObject(pThreadParam.hFile, ObjectNameInformation,  @ObjectNameInfo, MAX_PATH * 2, @dwReturn);
    if Result = STATUS_SUCCESS then
    begin
      pThreadParam.Result := Result;
      Move(ObjectNameInfo.Name.Buffer[ObjectNameInfo.Name.MaximumLength - ObjectNameInfo.Name.Length], pThreadParam.FileName[0], Min(ObjectNameInfo.Name.Length, MAX_PATH)*SizeOf(WideChar));
      //WideCharToMultiByte(CP_ACP, 0, @ObjectNameInfo.Name.Buffer[ObjectNameInfo.Name.MaximumLength - ObjectNameInfo.Name.Length], ObjectNameInfo.Name.Length, @pThreadParam.FileName[0], MAX_PATH, nil, nil);
    end
    else
    begin
      pThreadParam.Result := STATUS_SUCCESS;
      Result := STATUS_SUCCESS;
      Move(FileNameInfo.FileName[0], pThreadParam.FileName[0], Min(IoStatusBlock.Information, MAX_PATH)*SizeOf(WideChar));
      //WideCharToMultiByte(CP_ACP, 0, @FileNameInfo.FileName[0], IoStatusBlock.Information, @pThreadParam.FileName[0], MAX_PATH, nil, nil);
    end;
  end;
  PGetFileNameThreadParam(Data)^ := pThreadParam;
  ExitThread(Result);
end; 
```

~~我没有运行此代码，因此您可能需要进一步处理它。但是，很明显，问题在于转换为 ANSI。~~

我现在运行了这段代码，它运行良好。

# shell - zsh 在将行添加到行缓冲区之前清除 RPS1

> ID：14316463
> 
> 赞同：8
> 
> 时间：2013-01-14T10:11:51.677
> 
> 标签：shell, zsh

我是 vim 用户，最近才开始使用 zsh 以便能够在 shell 中使用 vi 模式（由于缺少插入/命令模式指示器，这在 bash 中不实用）。在阅读了一些示例之后，我设置了以下函数来相应地更新行（我选择了与 vim-powerline 匹配的颜色方案，我也使用了）：

```
vim_ins_mode="%{$fg[white]%}%{$fg_bold[blue]$bg[white]%} INSERT %{$reset_color%}"
vim_cmd_mode="%{$fg[green]%}%{$fg_bold[black]$bg[green]%} COMMAND %{$reset_color%}"
vim_mode=$vim_ins_mode
function zle-line-init zle-keymap-select {
    RPS1="${${KEYMAP/vicmd/${vim_cmd_mode}}/(main|viins)/${vim_ins_mode}}"
    RPS2=$RPS1
    zle reset-prompt
}
zle -N zle-line-init
zle -N zle-keymap-select 
```

它工作得很好，除了当我运行更多命令时，以前命令的 RPS1 会输出到屏幕上。你可以想象，在我的终端上放多个明亮的盒子会让人分心： ![这是一个例子](../Images/b759eeccee61bf80790deee10247b825.png)

我希望以某种方式清除该字段，然后将其作为先前的命令转储到行缓冲区中，但到目前为止，我查看的示例和 zsh 主题都没有打扰这样做。在我的旧 .bashrc 文件中，我有一个陷阱设置来重置我的命令的颜色，这样输出颜色就不会受到影响，我想知道这里是否有类似的可能？或者也许 zsh 有更清洁的方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-15T14:39:07.190

~~试试下面的代码：~~

 ~~```
function _-accept-line()
{
    emulate -L zsh
    local SAVEDRPS1="$RPS1"
    RPS1=""
    zle reset-prompt
    RPS1="$SAVEDRPS1"
    zle .accept-line
}
zle -N accept-line _-accept-line 
```~~ 

~~忘记这段代码。Zsh 可以选择您想要的行为：~~

 ~~```
setopt transientrprompt 
```

> 接受命令行时从显示中删除任何正确提示。这对于使用其他剪切/粘贴方法的终端可能很有用。~~

# facebook - 如何使用 Graph API 或 FQL 获取 Facebook 上分享的前 10 篇文章的列表？

> ID：14316467
> 
> 赞同：3
> 
> 时间：2013-01-14T10:12:00.480
> 
> 标签：facebook, facebook-graph-api, facebook-fql

在我的网站上，我有 Facebook 分享插件，以便用户可以在 Facebook 上分享文章。现在我想要一份关于过去一周或一个月内我的网站在 Facebook 上分享的前 10 篇文章的报告。

我尝试使用 FQL，

```
https://graph.facebook.com/fql?q=SELECT url, normalized_url, share_count, like_count, comment_count, total_count FROM link_stat WHERE url like '%www.indiatimes.com%' order by total_count desc limit 10 
```

但是 'like' 关键字在 fql 中不起作用。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T20:44:10.603

我建议你这样做：

例如：来自[http://googledevelopers.blogspot.com](http://googledevelopers.blogspot.com)的文章（可能不适用于所有网站，所以你可以试试运气。）

> [https://graph.facebook.com/search?q=googledevelopers.blogspot.com&type=post&limit=25](https://graph.facebook.com/search?q=googledevelopers.blogspot.com&type=post&limit=25)

您可以收集域上存在/有效文章的所有链接/消息/...等（例如， http: [//googledevelopers.blogspot.com/2013/05/an-easier-way-to-save- files-to-google.html](http://googledevelopers.blogspot.com/2013/05/an-easier-way-to-save-files-to-google.html)存在并考虑增加一个计数，但是[http://googledevelopers.blogspot.com](http://googledevelopers.blogspot.com)不考虑一个计数。）

**您通过分页“直到=** ”收集所有内容，直到一周或一个月，然后您停止分页。

当然，每个计数都应该与一个帖子 ID 相关联。删除这些重复的 post_id 计数。（当消息和链接都包含“ [http://googledevelopers.blogspot.com/2013/05/an-easier-way-to-save-files-to-google.html](http://googledevelopers.blogspot.com/2013/05/an-easier-way-to-save-files-to-google.html) ”时可能会发生，所以它应该只考虑一个计数）

将每篇唯一文章的所有计数相加。（例如， http: [//googledevelopers.blogspot.com/2013/05/an-easier-way-to-save-files-to-google.html](http://googledevelopers.blogspot.com/2013/05/an-easier-way-to-save-files-to-google.html)有 3 个计数），然后排序所有这些文章的计数。同样，确保所有计数都没有重复的 post_id。

干杯

# php - 如何在 symfony 2 fosuserbundle 注册表单中添加用户组选择字段？

> ID：14316468
> 
> 赞同：2
> 
> 时间：2013-01-14T10:12:02.510
> 
> 标签：php, symfony, fosuserbundle

我已经在 symfony 2 中配置了 fosuserbundle，我可以列出/显示详细信息/添加/编辑/删除用户组吗？

我搜索但找不到在用户注册表单中添加用户组选择字段的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T14:05:16.170

have your read [how to override registration form](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_forms.md) ?

your could add a custom group field in your custom registration form. Beware if you use 'fos_user.group_manager.default' service to provide select options, you may not want to provide all fosuser groups in your registration form

You can listen to "FOSUserEvents::REGISTRATION_SUCCESS" event to assign the group after form is submitted and valid (User infos are not saved yet)

Hope this helped

# php - 从 ajax 更改数据库以进行会话

> ID：14316470
> 
> 赞同：0
> 
> 时间：2013-01-14T10:12:08.683
> 
> 标签：php, javascript, xml, ajax

我有一个对数据库进行查询的 XML API。我还有一个站点，它使用这个 XML API 函数从我的数据库中获取数据。我想根据用户在我的网站上选择的内容来更改数据库。当用户从选择项中选择区域代码时，ii 调用调用 xml api 调用（php 文件）的 javascript 操作来更改我的数据库。DB 仅针对当前呼叫更改，但我想针对当前会话更改它。在我的 XML API 中，我有一个配置文件，它创建一个 Mysql 类并启动与数据库的连接。该配置文件是 API 的每个 php 文件的 require_once。课堂是这样的：

```
class Mysql 
{ 
    private $host = DB_HOST; 
    private $username = DB_USER; 
    private $password = DB_PASS; 
    private $database = DB_NAME; 
    private $connection; 
    private $selection; 

    public function connect() 
    { 
       $connection = mysql_connect($this->host,$this->username,$this->password) or die('Cannot connect to db('.$this->database.'): '. mysql_error()); 
            $selection = mysql_select_db($this->database) or die('Cannot select db: '. mysql_error()); 
            return $connection;
    } 

    public function connect_close() 
    { 
       mysql_close();
    }

        public function change_DB($dbname){
            //$this->connect_close();
            $this->database = $dbname;
        }

        public function getDB(){
            return $this->database;
        }
} 
```

要更改数据库，我尝试在 change_DB 函数中使用 mysql_select_db ，但它仅针对特定调用而更改。然后我尝试更改私有 var 数据库，关闭连接并使用新数据库重新打开它，但没有。有人可以给我一个建议吗？我已经完成了我的家庭作业。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:26:08.247

这种行为的原因之一可能是您的 $object 在每次调用时都被创建为一个新对象。也许您的 PHP MySQL 未配置为创建持久连接。在查看您的 php.ini 以及您如何在各个页面中管理此对象后，我只能判断是否是这种情况。

您需要确保您的 PHP MySQL 设置为 mysql.allow_persistent = 1。您可以在此处阅读有关此设置的更多信息：

[http://php.net/manual/en/mysql.configuration.php#ini.mysql.allow-persistent](http://php.net/manual/en/mysql.configuration.php#ini.mysql.allow-persistent)

[http://php.net/manual/en/features.persistent-connections.php](http://php.net/manual/en/features.persistent-connections.php)

希望这可以帮助。

# perl - CGI perl：下载脚本不起作用

> ID：14316471
> 
> 赞同：1
> 
> 时间：2013-01-14T10:12:16.390
> 
> 标签：perl, file, cgi, download

```
print $page->p("Hello All, Downloading file");
my @contents= $ssh->file_content("$dir/$file", 1);
download(@contents, $file);
...
...
...
sub download {
    use strict;
    my @content = shift;
    my $filename = shift;
    print "Content-Type:application/x-download\n";
    print "Content-Disposition: attachment;filename=$file\n\n";
    print @content;
    return 1;
} 
```

但它不是下载它，而是在屏幕上打印文件的内容。请告诉我我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:21:51.663

尝试保持您的标头 HTTP 兼容：

```
print "Content-Type: application/x-download\r\n";
print "Content-Disposition: attachment;filename=$file\r\n\r\n";
print @content; 
```

# html - 使用 HTML5 数据库 API

> ID：14316472
> 
> 赞同：2
> 
> 时间：2013-01-14T10:12:22.200
> 
> 标签：html, storage, local-storage

我正在开发一个使用`phonegap/cordova 2.2`并希望将数据存储在 sql 类型数据库中的网络应用程序，但似乎由于**html5**尚未记录在案，并且存在三种竞争方法来保存大量数据，因此我应该使用哪种方法令人困惑。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:48:31.680

您可以在此处查看存储文档：http: [//docs.phonegap.com/en/2.3.0/cordova_storage_storage.md.html#Storage](http://docs.phonegap.com/en/2.3.0/cordova_storage_storage.md.html#Storage)

对于查询语法，您可以查看 sqlite.org

HTML5 DB 在 iOS 和 Android 上运行顺畅，但在 Blackberry 中存在一些问题。Window Phone 7 不支持 HTML5 DB。

您可以在以下位置查看适用于 SQLite 的 PhoneGap 插件：

[https://github.com/brodyspark/PhoneGap-sqlitePlugin-iOS](https://github.com/brodyspark/PhoneGap-sqlitePlugin-iOS)

[https://github.com/brodyspark/PhoneGap-SQLitePlugin-Android](https://github.com/brodyspark/PhoneGap-SQLitePlugin-Android)

[https://github.com/marcucio/Cordova-WP-SqlitePlugin](https://github.com/marcucio/Cordova-WP-SqlitePlugin) (WP8+)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T13:29:43.093

另请查看我自己的图书馆[https://bitbucket.org/ytkyaw/ydn-db/wiki/Home](https://bitbucket.org/ytkyaw/ydn-db/wiki/Home)。该库支持 iOS、Android 和 Windows Phone 8。

## 目标

漂亮的数据库 API，用于安全、健壮、高性能、可维护的大型 javascript Web 应用程序。

## 特征

*   支持 IndexedDB、WebSQL 和 WebStorage 存储机制。
*   支持异步 IndexedDB API 的所有功能。
*   经过良好测试的闭包库模块。
*   固定模式、自动版本控制、动态模式生成，同时保持多个连接（在选项卡或工作线程上）。
*   低级游标迭代，高级查询
*   每个方法调用都是一个原子事务，同时支持事务和高级事务工作流。
*   我们采用严格的 javascript 编码模式：没有全局，没有 eval，没有错误通配，参数化查询，所有公共方法和构造函数都是强类型，this is this，编码错误抛出错误。
*   JQuery 插件可用（见下载部分）。

## 基本用法

```
var db = new ydn.db.Storage('db name');
db.put('store1', {test: 'Hello World!'}, 123);
db.get('store1', 123).done(function(value) {
  console.log(value);
} 
```

## 文件资料

*   [用户指南](http://dev.yathit.com/ydn-db/getting-started.html)
*   [API 参考](http://dev.yathit.com/api-reference/ydn-db/storage.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T14:22:38.570

如果您想要一个关系数据库选项，但又关心 WebSQL（该标准已被放弃并且未在许多浏览器中实现），另一个很好的选择是：[SequelSphere](http://www.sequelsphere.com)

它是一个 100% 的 HTML5/JavaScript 关系数据库，可以跨浏览器工作，并使用 IndexedDB 或本地存储来保存数据。在 PhoneGap/Cordova 中，它将使用 IndexedDB，从而使您能够以允许 SQL 查询的关系方法存储“大量”数据。它是它自己的数据库引擎，不依赖于内置的（WebSQL）关系数据库。因此，如果您想将您的应用程序移植到其他地方，它也可以在所有浏览器和平台上运行。

它的 API 可在以下网站上轻松获得：

*   这是 API： [SequelSphere API](http://www.sequelsphere.com/dbdocs/api-documentation/)
*   基础文档： [SequelSphere Basic](http://www.sequelsphere.com/how-it-works/code-sample/)
*   SequelSphere 关于“本地存储”支持的文档：本地 [数据存储和持久性](http://www.sequelsphere.com/dbdocs/local-data-storage/)

# php - 如何在 ffmpeg 仍在 PHP 中对文件进行转码时开始流式传输

> ID：14316477
> 
> 赞同：2
> 
> 时间：2013-01-14T10:13:08.767
> 
> 标签：php, ffmpeg, video-streaming

我想用 ffmpeg 将 AVI 视频转码为 mp4，但仍在转码时，我想在 flash 视频播放器上实时观看转码的视频，我使用 jwplayer，我用 mp4 做了一些测试，效果很好，但我在转码时无法使其工作

我制作了一个 php 脚本来在后台运行命令

**`ffmpeg.exe -threads 1 -y -i "a.avi" -s 1280x720 -f mp4 -vcodec libx264 -b 2000000 -ab 128000 -ar 44100 "a.mp4"`**

在 jwplayer 我有源“a.mp4”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T01:44:52.733

请查看 ffmpeg 提供的详细流媒体指南：http: [//ffmpeg.org/trac/ffmpeg/wiki/StreamingGuide](http://ffmpeg.org/trac/ffmpeg/wiki/StreamingGuide)。

# java - Java：从特定字符后开始的字符串中获取子字符串

> ID：14316487
> 
> 赞同：233
> 
> 时间：2013-01-14T10:14:11.280
> 
> 标签：java, string, substring

我有一个字符串：

```
/abc/def/ghfj.doc 
```

我想从中提取`ghfj.doc`，即最后一个之后的子字符串`/`，或者`/`从右边开始。

有人可以提供一些帮助吗？

* * *

## 回答 #1

> 赞同：365
> 
> 时间：2013-01-14T10:17:42.680

```
String example = "/abc/def/ghfj.doc";
System.out.println(example.substring(example.lastIndexOf("/") + 1)); 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-01-14T10:17:27.317

一个非常简单的实现[`String.split()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split(java.lang.String))：

```
String path = "/abc/def/ghfj.doc";
// Split path into segments
String segments[] = path.split("/");
// Grab the last segment
String document = segments[segments.length - 1]; 
```

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2013-01-14T10:18:27.907

你试过什么？这很简单：

```
String s = "/abc/def/ghfj.doc";
s.substring(s.lastIndexOf("/") + 1) 
```

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2017-01-10T11:16:10.940

另一种方法是使用[此](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html).

```
String path = "/abc/def/ghfj.doc"
String fileName = StringUtils.substringAfterLast(path, "/"); 
```

如果将 null 传递给此方法，它将返回 null。如果没有与分隔符匹配，它将返回空字符串。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2016-07-01T14:56:19.270

您可以使用 Apache 公共资源：

对于最后一次出现后的子字符串，请使用[此](https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#substringAfterLast(java.lang.String,%20java.lang.String))方法。

对于第一次出现后的子字符串，等效方法在[这里](https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#substringAfter(java.lang.String,%20java.lang.String))。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2016-08-25T18:50:52.560

这也可以获取文件名

```
import java.nio.file.Paths;
import java.nio.file.Path;
Path path = Paths.get("/abc/def/ghfj.doc");
System.out.println(path.getFileName().toString()); 
```

将打印`ghfj.doc`

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-05-28T08:13:59.913

用[番石榴](https://mvnrepository.com/artifact/com.google.guava/guava/23.6-jre)做到这一点：

```
String id="/abc/def/ghfj.doc";
String valIfSplitIsEmpty="";
return Iterables.getLast(Splitter.on("/").split(id),valIfSplitIsEmpty); 
```

最终配置`Splitter`并使用

```
Splitter.on("/")
.trimResults()
.omitEmptyStrings()
... 
```

还可以查看[这篇关于 guava Splitter](https://github.com/google/guava/wiki/StringsExplained#splitter)的文章和[这篇关于 guava Iterables 的文章](https://github.com/google/guava/wiki/CollectionUtilitiesExplained#iterables)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-03-27T22:37:08.607

在 Kotlin 中，您可以使用`substringAfterLast`, 指定分隔符。

```
val string = "/abc/def/ghfj.doc"
val result = url.substringAfterLast("/")
println(result)
// It will show ghfj.doc 
```

从[文档](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/substring-after-last.html)：

> 在最后一次出现分隔符之后返回一个子字符串。如果字符串不包含分隔符，则返回默认为原始字符串的 missingDelimiterValue。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-05-10T22:48:09.837

我认为如果我们直接使用拆分功能会更好

```
String toSplit = "/abc/def/ghfj.doc";

String result[] = toSplit.split("/");

String returnValue = result[result.length - 1]; //equals "ghfj.doc" 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-02-04T00:43:50.573

**java 安卓**

就我而言

我想从

> ~/propic/........png

**/propic/**之后的任何内容都与之前的内容无关

> ........png

最后，我在[Class StringUtils中找到了代码](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html)

这是代码

```
 public static String substringAfter(final String str, final String separator) {
         if (isEmpty(str)) {
             return str;
         }
         if (separator == null) {
             return "";
         }
         final int pos = str.indexOf(separator);
         if (pos == 0) {
             return str;
         }
         return str.substring(pos + separator.length());
     } 
```

# c++ - 使用 googlemock 模拟 const 指针参数的副作用

> ID：14316490
> 
> 赞同：3
> 
> 时间：2013-01-14T10:14:19.483
> 
> 标签：c++, mocking, googlemock

我正在使用 googlemock 进行单元测试，并尝试模拟具有“输出数组参数”的方法：

```
void MyMock::myFunc(double myVal[2]). 
```

myFunc 方法应该将值存储在 myVal 数组中。

我如何模拟这种副作用？我尝试了以下方法：

```
double a_mockedValues[] = {1., 2.};
ON_CALL(myMock, myFunc(_)).WillByDefault(SetArgPointee<0>(a_mockedValues)); 
```

我的意图是 myFunc 的调用者将值 1\. 和 2\. 接收到它传递给模拟方法的数组中。

但是，这种方法行不通。编译器这样说：

**无法为数组指定显式初始化程序**

有人知道如何模拟这种参数的行为吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T11:20:39.007

这个特定用例实际上有一个谓词：（`SetArrayArgument`参见[Google Mock CookBook](https://github.com/google/googletest/blob/master/docs/gmock_cook_book.md#mocking-side-effects-mockingsideeffects)

您的代码将变为：

```
double a_mockedValues[] = { 1., 2\. };
ON_CALL(myMock, myFunc(_)).WillByDefault(SetArrayArgument<0>(a_mockedValues, a_mockedValues + 2)); 
```

# c++ - 为什么只有声明的虚函数会导致编译器错误？

> ID：14316494
> 
> 赞同：15
> 
> 时间：2013-01-14T10:14:45.227
> 
> 标签：c++

我有这堂课，

```
class Base {
    public:
        void foo();
};

int main()
{
    Base b;
} 
```

`main`将编译没有任何错误，虽然`foo()`没有定义。但是`b.foo();`会导致编译错误。

此外，即使对于`constructor`and `operator=`，我也可以只声明它们而不定义它们，只要我不触发它们，它就会编译。

# 问题

再次，我将一个虚函数添加到`Base`,

```
class Base {
    public:
        void foo();
        virtual void bar();  // no defition is gonna be provided.
}; 
```

现在，`main`无法编译，而是出现错误：

```
未定义对 Base 的 vtable 的引用
```

好吧，这让我有点困惑，因为以前，`main`只要`foo()`不调用就可以编译，但现在我添加`bar()`了它，根本不调用它。

为什么在这种情况下不编译？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-14T10:21:57.913

这完全取决于编译器。这两种情况都不需要诊断。

### 10.3 虚函数 [class.virtual]

> 9`virtual`在类中声明的函数应在该类中定义或声明为纯（10.4），或两者兼而有之；但**不需要诊断** （3.2）。[强调我的]

为了理解为什么会发生这种情况，让我们看看它是如何工作的。

每个翻译单元生成一个目标文件，每个目标文件都有导出（它导出的符号）和导入（它想要的符号）。

第一个示例很简单 - 导入仅`foo`在使用时才需要。链接器没有理由寻找符号，所以它没有。

第二个，用`virtual`方法，有点复杂。大多数编译器（如果不是全部）都需要**有效的虚函数表**。这意味着在链接时，所有声明非纯虚方法的类都必须导出这些方法。这比非`virtual`情况更严格，因为实现实际上并不知道函数是否被调用（它可以被多态调用）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T10:19:22.353

第一个版本可以编译，因为链接器不需要搜索 object `foo`。它无处使用。

但是当你创建一个虚函数时，[vtable](https://en.wikipedia.org/wiki/Virtual_method_table)（用于动态调度）的构造需要一个函数的地址`Base::bar`（它引用它），因此链接器需要找到它的实现。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-14T10:25:00.293

创建多态对象（具有至少一个虚函数的类的实例）时，它必须有一个指向虚表的虚表指针。每个多态类都有一个构造一次的虚拟表。**允许虚拟表不完整取决于编译器的实现**。该表是根据虚函数定义填充的。

如果没有实现任何虚函数并且该函数不是纯虚函数，那么由于虚表不完整，一些编译器会给出编译器错误。

在简单（非虚拟）函数的情况下，如果从未使用过函数声明，它将被忽略。即使使用它，我们也会得到链接器错误而不是编译器错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T10:24:04.637

在类中声明的虚函数应在该类中定义或声明为纯函数，或两者兼而有之（C++03 标准）。

# ant - 蚂蚁：如何创建 包括来自的文件 ?

> ID：14316497
> 
> 赞同：0
> 
> 时间：2013-01-14T10:14:50.077
> 
> 标签：ant, jar, path, uberjar

`path`给定一个像下面这样的 Ant元素：

```
<path id="compile.classpath">
    <pathelement location="${common.jar}"/>
    <pathelement location="${servlet.jar}"/>
    <pathelement location="${j2ee.jar}"/>
    ...
</path> 
```

如何创建一个`jar`包含所有文件的 uber-`path`而无需再次拼出所有文件名？以下工作，但包含重复的代码，而不是我想要的：

```
<jar jarfile="uber.jar" ...>
    <manifest> ... </manifest>
    <zipfileset src="${common.jar}"/>     // UNWANTED code duplication
    <zipfileset src="${servlet.jar}"/>
    <zipfileset src="${j2ee.jar}"/>
</jar> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:41:41.363

你应该能够做到这一点：

```
<jar destfile="über.jar">
    <manifest>
        <attribute name="Main-Class" value="${entry.point.class}"/>
    </manifest>
    <path refid="compile.classpath"/>
</jar> 
```

我不明白为什么`common.jar`会有*不需要的重复代码*。此外，您通常不会在 jar 中包含 jar。

我认为您真正想要创建的是[War File](http://ant.apache.org/manual/Tasks/war.html)。一个war 文件可以包含多个jar，以及您要执行的类（通过`<javac>`任务编译的类）。在 META-INF/MANIFEST.MF 文件中，您包含一个`Main-Class:`指向类的条目，该类应该是您的战争的入口点。用户将能够执行您的战争：

```
 $ java -jar my.war 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:55:57.617

或者，您可以使用清单文件中列出的类路径创建一个可执行 jar：

*   [在使用 Ant 编译的文件中找不到主类](https://stackoverflow.com/questions/3143567/cannot-find-main-class-in-file-compiled-with-ant/3144290#3144290)

# java - 从 H2 数据库中的大表中选择随机行

> ID：14316500
> 
> 赞同：2
> 
> 时间：2013-01-14T10:15:12.500
> 
> 标签：java, sql, database, random, h2

我的数据库中有一个大表（可能有数百万条记录），我需要选择 #X 个随机行（假设 #X 在 10 到 50 之间），但我需要这个查询尽可能优化。

该表如下所示：

```
CREATE TABLE sample (
    id bigint auto_increment PRIMARY KEY,
    user_id bigint NOT NULL,
    screen_name VARCHAR NOT NULL,
    ...
); 
```

我四处寻找，我找到了这样的答案：

```
SELECT * FROM sample ORDER BY RAND() limit X. 
```

但在我看来，这将获取完整的表格然后对其进行排序，不是吗？

我认为最好生成 10 或 50 个随机整数并执行`select * from sample where rowid in (<random integer list>)`. 但是 afaik，H2 中缺少 rowid 概念，所以我可能会选择在我的表中使用 ID 列。

如果我能用一个 SQL 查询来完成这项任务，那就太棒了。

有更好的建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:55:35.547

以下脚本非常有效地选择每 n 行。它假设 id 中没有间隙。如果可能存在间隙，那么您可能希望将 range(1, 100) 增加到 range(1, 200) 左右。要获得随机行，最后的公式需要稍作更改：

```
drop table test;

create table test(
  id bigint auto_increment primary key, 
  name varchar(255));

insert into test 
select x, 'Hello ' || x from system_range(50, 1200);

select * from test t, system_range(1, 100) range
where t.id = x * (select max(id)-min(id) from test) / 100 + 
(select min(id) from test); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T10:20:46.343

您应该使用 column`id`而不是`rowid`. 列`id`存在于您的表中并且是`auto_increment`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-09T14:16:41.650

您可以对表进行排名并从中选择 50 个随机排名，避免以任何方式进行排序或分组以保持优化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-11T21:12:45.107

我为此做的是创建一个临时表。在表中生成从 1 到最大标识值的随机数。然后从他们的身份值在临时表中的表中选择。

“这样做的单一查询方式”

创建临时表（我不知道它的 h2 语法，但它支持字段名称为 DesiredIdentity 的临时表）

从表中选择最大标识值。

使用 rand 命令循环将随机数插入到临时表中，从 1 到所需的随机行数。将随机范围设置为 1 到最大行数。确保不选择相同的随机数。

然后从身份临时表中身份值所在的表中进行选择。

# java - 带有 spring-security 的 OAuth2 - 通过 HTTP 方法限制 REST 访问

> ID：14316506
> 
> 赞同：4
> 
> 时间：2013-01-14T10:15:25.777
> 
> 标签：java, rest, spring-security, scope, oauth-2.0

因此，我们已经使用**spring-security**在我们的**REST 服务器**和**客户端应用程序服务器之间实现了****OAuth2 - 客户端凭据授予**。客户端可以使用客户端凭据身份验证获得的令牌访问其资源。

 ******我没有得到的是我可以为客户和资源设置的**范围。**

我明确说过，**客户端 A**具有**角色 X**和**范围 READ**并且我说**资源 U**可以使用**角色 X**和**范围 READ**访问。现在我希望资源拒绝任何`DELETE`请求`POST`，但显然我错了。如果我向资源 U 发送一个`HTTP DELETE`，**它将**通过。

所以看起来范围在我的设置中毫无意义。我该如何使用它们？

还是我仍然需要按照下面的建议限制对资源本身的访问？

* * *

我们设置的片段：

```
<oauth:client-details-service id="clientDetails">
    <oauth:client client-id="the_client"
        authorized-grant-types="client_credentials" authorities="ROLE_CLIENT"
        scope="read" secret="secret" />
</oauth:client-details-service>

<http pattern="/rest/**" create-session="never"
    entry-point-ref="oauthAuthenticationEntryPoint"
    access-decision-manager-ref="accessDecisionManager"
    xmlns="http://www.springframework.org/schema/security">
    <anonymous enabled="false" />

    <intercept-url pattern="/rest/persons" access="ROLE_CLIENT,SCOPE_READ" />

    <custom-filter ref="resourceServerFilter" before="PRE_AUTH_FILTER" />
    <access-denied-handler ref="oauthAccessDeniedHandler" />
</http> 
```

REST 资源：

```
@Path("/persons")
@Named
public class PersonRest {

    @GET
    @Consumes(MediaType.APPLICATION_FORM_URLENCODED)
    @Produces({ MediaType.APPLICATION_JSON })
    public Response getAll(@Context UriInfo uriInfo) {
        // ...
    }

    @DELETE
    @Path("/{id}")
    @Consumes(MediaType.TEXT_PLAIN)
    @Produces(MediaType.APPLICATION_JSON)
    @Transactional
    public Response delete(@PathParam("id") String id) {
        // ...
    } 
```

* * *

**是否有任何“简单”配置来告诉服务器端的 Spring Security，ROLE_READ 应该只允许 GET 请求？**

或者我是否需要`@PreAuthorize`为特定资源设置一些注释或上下文？

那么，这样的事情会起作用吗：？

```
 @PreAuthorize("hasScope(read)")
    @DELETE
    @Path("/{id}")
    // ...
    public Response delete(@PathParam("id") String id) { 
```

虽然如果我不得不这样做，那将是一个可怕的消息，因为那时我必须单独配置每个资源......

也许我可以使用一些**过滤器**？

感谢您对此的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T06:57:17.503

为什么不能使用

```
@RolesAllowed({"customRole"}) 
```

保护您的 HTTP 方法，并使用过滤器将 Oauth 范围转换为 {customRole}

或者你试过

```
<security:intercept-url pattern="/rest/persons" access="hasAnyRole('ROLE_USER_READ')" method="GET"/> 
```

或类似的东西******

# linux - Dstat 网络指标

> ID：14316510
> 
> 赞同：6
> 
> 时间：2013-01-14T10:15:30.270
> 
> 标签：linux, linux-kernel

有人可以谈谈 dstat 的网络指标（*`dstat -n`*）吗？是字节还是位？非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-26T15:58:55.973

字节.. 至少从 .3 版开始。来自变更日志：

*   0.3
    *   添加负载统计信息 (-l)
    *   添加了内存统计信息 (-m)
    *   输出现在适合空间并添加单位
    *   将所有值转换为字节

有趣的是.. 在 0.7.2svn 他们添加了 bits 选项

*   0.7.2svn - ... - 发布 03/09/2010
    *   ...
    *   添加了新的 --bits 选项以在屏幕上强制位值 (Scott Baker)

[https://github.com/dagwieers/dstat/blob/master/ChangeLog](https://github.com/dagwieers/dstat/blob/master/ChangeLog)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-09T21:05:48.740

我确认网络度量的单位是**`Bytes/sec`**

**方法：** 我运行了一些网络 I/O 流量并使用`dstat`

```
[root@centos72_base ~]# dstat --full
You did not select any stats, using -cdngy by default.
-------cpu0-usage--------------cpu1-usage------ --dsk/sda-- net/eno1677 ---paging-- ---system--
usr sys idl wai hiq siq:usr sys idl wai hiq siq| read  writ| recv  send|  in   out | int   csw 
  4   0  96   0   0   0:  1   0  99   0   0   0|   0     0 |1205k 9874B|   0     0 | 562   601 
  4   0  96   0   0   0:  0   0 100   0   0   0|   0     0 |1206k   10k|   0     0 | 529   656 
  4   1  95   0   0   0:  4   0  96   0   0   0|   0     0 |1206k   10k|   0     0 | 580   712 
  3   0  97   0   0   0:  2   0  98   0   0   0|   0     0 |1207k   10k|   0     0 | 506   615 
```

在稳定状态下，我平均`1206k`。我输出`dtsat`到 CSV 以查看完整的数字并获得完整的值，例如`1234196`.

接下来，我使用`ifconfig`.

```
[cyc@centos72_base one_forward]$ ifconfig; sleep 1; ifconfig; sleep 1; ifconfig
        RX packets 18500852  bytes 42118560051 (39.2 GiB)
        ...
        RX packets 18501061  bytes 42119793977 (39.2 GiB)
        ...
        RX packets 18501286  bytes 42121029469 (39.2 GiB) 
```

`ifconfig`明确指出网络指标以千兆字节为单位。计算两个连续秒之间的差异：`42119793977 - 42118560051 = 1233926`。`1233926 Bytes/sec`from`ifconfig`密切匹配`1234196`from `dstat`。`dstat`输出也是如此**`Bytes/sec`**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-14T11:16:26.187

我的猜测是它是字节，因为输出显示`B`，位将是`b`：

```
-net/total-
 recv  send
   0     0 
2376B  725B
1523B  180B 
```

但是，手册中没有任何内容可以证实这一点。

# jsp - 连接两个字符串后如何在循环中获取值

> ID：14316511
> 
> 赞同：0
> 
> 时间：2013-01-14T10:15:32.173
> 
> 标签：jsp, jstl

假设我有名称为 SOH_EVENT_1、SOH_EVENT_2、.....、SOH_EVENT_21 的变量。

我试图在循环中获取这些变量的值..像这样-

```
<c:forEach begin="1" end="21" varStatus="loopCount">

<C:out value="${SOH_EVENT_loopCount.count}" />

</c:forEach> 
```

但是我无法获得这些变量的确切值。当我为每个变量输入这行代码时，我能够在将字符串与计数连接后获得值但不能在侧循环中。

```
<C:out value="${SOH_EVENT_1}" />
<C:out value="${SOH_EVENT_2}" />
...
....
<C:out value="${SOH_EVENT_21}" /> 
```

我怎样才能得到循环内的值。

谢谢，维维克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:31:44.853

如果您将这些变量放在某个范围内，比如请求，它会变得更容易：

```
<c:forEach begin="1" end="21" varStatus="loopCount">
    <c:set var="key" value="SOH_EVENT_${loopCount.index}"/>
    <C:out value="${request[key]}" />
</c:forEach> 
```

# java - 创建异常类时，我应该实现 java.lang.Exception 的所有构造函数吗？

> ID：14316513
> 
> 赞同：5
> 
> 时间：2013-01-14T10:15:38.563
> 
> 标签：java, exception

创建异常类时可以只提供“特定”构造函数：

```
public CircularLinkException(final String msg, final String link)
{
    super(msg);
    link = inputName;
} 
```

或者我应该实现以下构造函数`Exception`：

```
public class CircularLinkException extends Exception
{
    public CircularLinkException() { /* ... */ }
    public CircularLinkException(final String msg) { /* ... */ }
    public CircularLinkException(final Throwable t) { /* ... */ }
    public CircularLinkException(final String msg, final Throwable t) { /* ... */ }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T10:19:14.643

您应该创建将使用的所有构造函数。

当您想象某物的用途时，不要添加代码。当您有需求时添加它。

[http://c2.com/xp/YouArentGonnaNeedIt.html](http://c2.com/xp/YouArentGonnaNeedIt.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T10:22:59.820

实际上**不需要**实现任何特定的构造函数。可以实现任意一种，以便完全构造异常。

通常会发生两种情况：

*   您的代码在检查某些内容后意识到出了问题。它想引发异常。对于这种情况，需要一个接受字符串消息的构造函数。通常最好在出错的消息中进行解释。
*   您的代码尝试做某事并捕获由于未声明而无法进一步抛出的异常。然后，您仍然可以在消息中解释错误，将一些重要的上下文数据放在那里，但提供捕获的异常以进行诊断也很重要。对于这种情况，您需要一个接受 String 和 Throwable 的构造函数。

我认为，不带参数的版本和仅采用 Throwable 的版本更适合懒惰的人，您只需通过不实现这些来强制执行代码中的更多顺序。

如果您的特定异常受益于一些始终可用的附加信息，那么构造函数肯定应该具有附加参数，从而强制传递此信息。在您的情况下，应保留具有两个字符串参数的版本，但可能也将 Throwable 作为第三个参数的版本会很好。许多已知的异常（例如 IOException）经历了从“我们永远不需要这种构造函数”到在以后的版本中添加这样的构造函数的痛苦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T10:18:43.720

您只能声明`specific`构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T10:20:13.097

据我了解，您希望自己例外

```
public class CircularLinkException extends Exception 
```

所以你可以有任意数量的构造函数，`CircularLinkException`但它们中的每一个都应该调用`super(smthg)`，它是从[这里开始的四分之一](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Exception.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T11:14:36.157

没有必要在您的类中拥有所有构造函数。根据您的需要创建构造函数，但请记住，Java 中的 Exception 类没有默认构造函数，因此请始终从子类的第一行调用父类构造函数，同时生成自己的异常（自定义异常）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T11:41:33.987

可以提供特定的构造函数，并且可以在需要时添加更多构造函数。就我个人而言，我不会使用超类的所有构造函数。

但这一切都取决于如何使用新的异常类“CircularLinkException”。如果这个异常类是某个异常库的一部分，将被其他用户使用，那么提供“来自异常类的构造函数”+“新构造函数”可能是一个好主意。这样，用户可以根据自己的需要在构造函数之间进行选择。

如果您是这个异常类的唯一用户，那么最好分析哪些构造函数对您的代码有用并只编写它们。如果您认为某些构造函数将来会派上用场，您可以随时编写它们 :)。

# c# - 如何以正确的方式在项目之间移动课程

> ID：14316516
> 
> 赞同：3
> 
> 时间：2013-01-14T10:15:43.713
> 
> 标签：c#, visual-studio-2010

我知道这真的不是一个聪明的问题，但我在理解 Visual Studio 2010 的某些工作时遇到了一些麻烦。

对 Windows 窗体进行编程我需要将包含在主命名空间和程序集中的源文件（比如说：x.cs）文件中的类（比如说：x 类）移动到不同的项目（和程序集）中命名空间。后者是一个旨在收集实用程序类的 dll。可能我以错误的方式做到了这一点。

症状是：在主窗体（代码，而不是设计）中，将鼠标悬停在 X 类的构造函数上按 F12 会导致显示“来自元数据”的新源，包括类声明（但我仍然可以打开源代码单击鼠标右键并选择“显示源代码”）。VS 似乎无法在解决方案中找到正确的源代码。

我的问题：

1.  如何从 F12 点恢复到正确的方法？
2.  更一般地说，在不同项目和/或程序集中移动代码的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:51:54.730

我刚刚尝试复制所描述的问题，但对我来说效果很好。让我描述一下我采取的步骤，也许你会发现你在哪里做了不同的事情。

1.  创建新的解决方案。
2.  添加名为 FormsApp 的新 Windows 窗体应用程序。这给了我一个名为 Form1 的表单，其默认命名空间为 FormsApp。
3.  在 FormsApp 项目中名为 util.cs 的文件中创建了一个名为 Util 的类。它获得与 FormsApp 相同的命名空间。
4.  如果我在 Form1 构造函数中创建 Util 类的实例，我可以按 F12 以按预期将其带到 Util 的定义中。
5.  在解决方案中创建了一个名为 Utility 的新类库。
6.  可以通过多种方式移动文件，但我只是在解决方案资源管理器中单击 util.cs 文件并将其拖到实用程序项目中。这将复制文件，但保留原件。也许您以不同的方式复制了文件？
7.  删除原始文件后，如果您尝试编译，应该会收到构建错误。这是意料之中的，因为 FormsApp 项目对新添加的 Utility 项目中的 Util 类一无所知。
8.  在解决方案资源管理器的 FormsApp 项目中添加对 Utility 项目的引用。
9.  如果您现在尝试构建，那么它应该会成功。尽管我没有更改 Util 类的命名空间，但在 Form1 构造函数中按 F12 会按预期将我带到 Util 类的定义。

如果它有助于澄清事情，这里有几张图片：

**解决方案资源管理器：**

![解决方案资源管理器](../Images/0e40cf187e5a5162712da82f5ed04540.png)

**Form1 构造函数：**

![在此处输入图像描述](../Images/6774b45c4bc8c692442d741132642690.png)

**实用类：**

![在此处输入图像描述](../Images/97cd1204d8471c522ada474fd0596800.png)

# javascript - 从 css/js 禁用背景

> ID：14316519
> 
> 赞同：0
> 
> 时间：2013-01-14T10:15:49.243
> 
> 标签：javascript, html, css

我的 Web 界面上有一个签名板，一旦用户单击它，我想禁用除该签名板之外的所有内容。我希望通过禁用其他所有内容来使签名板存在，通过禁用我的意思是使其变为浅黑色，如模态一样。

这是代码。

```
 <body>
    <!-- Some Code -->

    <div class="sig sigWrapper current" style="display: block;">
    <div class="typed" style="display: none; ">
    </div> 
    <canvas class="pad" width="310" height="75" id="signature_pad">
    </canvas>
    <input type="hidden" name="output" class="output validate[required]" value="">
    </div>
    <!-- Some more Code -->
 </body> 
```

# autocomplete - Zend Studio 9.0.4 中缺少自动完成功能

> ID：14316521
> 
> 赞同：3
> 
> 时间：2013-01-14T10:15:53.607
> 
> 标签：autocomplete, zend-studio

我从 1 周开始就在 Zend Studio 工作。上周我在做 ZF2 教程。今天我不得不对一个旧项目进行一些编码。我通过 SVN 进行了一次干净的结帐并认识到我没有自动完成功能。我认为我的项目可能有问题，所以我创建了一个新的本地项目，其中只有一个文件。

```
<?php
class foo {
    public function bar() {
        echo "foobar";
    }
}

$ac = new foo();
$ac->bar(); 
```

不幸的是，“new foo()”带有下划线，Zend Studio 说“找不到类 'foo'”。所以这个问题与 include_path 或构建路径无关，就像其他人之前遇到的问题一样。

其他人以前遇到过这个奇怪的问题或知道如何解决它？

# windows-8 - Windows 8 应用商店应用程序 - 内存占用太高

> ID：14316522
> 
> 赞同：3
> 
> 时间：2013-01-14T10:15:54.320
> 
> 标签：windows-8, microsoft-metro, windows-store-apps, winjs, memory-footprint

我正在构建一个 WinJS Windows 8 Store 应用程序，并且我在保持“内存占用”低时遇到问题，因为目前它无法通过“HTML5 应用程序的性能分析器”：

> **内存占用**
> 
> 应用程序在使用少量内存时运行得更好。应用程序的内存占用应小于 60MB。要减少应用程序的内存占用，请避免保留对不再需要的对象（例如图像或 blob）的引用。
> 
> 结果：*应用*参考集为112MB；工作集为 98MB。这超过了 80MB 参考集最大值和 80MB 工作集最大故障阈值。

我正在寻找有关如何处理此问题的任何提示，但我看不到这 112MB 的来源，在任务管理器中查看，我的应用程序从未超过约 50MB。

谢谢！

如果您需要更多信息，请询问，不知道该提供什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T16:44:46.930

我的小应用程序 C#/XAML 已经占用了大约 100 MB，似乎底层沙箱/CLR 负责其中的大部分。Metro 应用程序具有来自操作系统的积极内存管理，这是一件好事，一旦它们不在视线范围内，它们就会被暂停并部分从内存中删除。

更新：似乎 MS 文档是正确的，通过清理数据集（主要是对象和字符串的列表），内存使用量急剧下降。我从 120 MB 增加到 30 MB，更易于管理并且有呼吸空间。

# javascript - Javascript（纯）选择第一个元素（表格）

> ID：14316523
> 
> 赞同：5
> 
> 时间：2013-01-14T10:16:11.913
> 
> 标签：javascript, jquery, html

我有两个这样的表：

```
<table>
    <tr>
        <td></td>
        <td></td>
    </tr>
</table>
<table>
    <tr>
        <td></td>
        <td></td>
    </tr>
</table> 
```

他们都是一样的。我必须使用纯 javascript 选择第一个（和第二个）。在 jQuery 中是`$(table:first)`.

如果表是这样的（带类），我可以使用`getElementByClassName('class')[0]`

```
<table class="class">
    <tr>
        <td></td>
        <td></td>
    </tr>
</table>
<table class="class">
    <tr>
        <td></td>
        <td></td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T10:23:33.097

您可以使用：

`var firstTable = document.getElementsByTagName("table")[0]`

这是跨浏览器兼容的。

对于较新的浏览器，您可以使用：

`var firstTable = document.querySelector("table")`

这将选择第一个表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T10:18:42.333

您可以使用[`.getElementsByTagName("table")`](https://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagName)on `document`，它将返回[`NodeList`](https://developer.mozilla.org/en-US/docs/DOM/NodeList)包含文档中所有表格的 a。NodeLists 是类似数组的对象，并且表的返回顺序与它们在文档中的顺序相同，因此您可以使用其索引获取第一个元素。

```
var firstTable = document.getElementsByTagName("table")[0]; 
```

**节点列表是*实时的***

值得注意的是，`NodeList`返回的`.getElementsByTagName()`是*live*，这意味着如果您在调用 之后进行 DOM 操作`.getElementsByTagName()`，这些操作将反映在您的列表中。

```
var tables = document.getElementsByTagName("table");
var firstTableBefore = tables[0];

/*
If you then prepend a new table to the body at this point, calling tables[0] 
again will now return the newly added element
*/

var firstTableAfter = tables[0];

// firstTableBefore and firstTableAfter will NOT be the same 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-14T10:18:14.430

您可以使用[getElementsByTagName()](http://www.w3schools.com/jsref/met_doc_getelementsbytagname.asp)来获取表集合并为第一个表使用 0 索引。

```
firstTable = document.getElementsByTagName('table')[0]; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-14T10:18:26.567

[`getElementsByTagName` *^([MDN])*](https://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagName)返回一个`NodeList`类似数组的对象。元素按文档顺序返回。您可以通过索引访问每个元素：

```
var tables = document.getElementsByTagName('table');
// first table: tables[0] 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-14T10:18:30.913

您可以使用以下方法获取页面上的元素数组：

```
var tables= document.getElementsByTagName("table"); 
```

然后

```
tables[0] 
```

会给你第一张桌子。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-14T10:25:08.830

在您的修改如下：

```
<table id="first">
  <tr>
     <td></td>
     <td></td>
  </tr>
</table>

<table id="second">
  <tr>
     <td></td>
     <td></td>
  </tr>
</table> 
```

在您的 js 代码中：

```
var table1=document.getElementByID("first"); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-14T10:29:56.327

您可以将此代码用于您的解决方案

```
<html> 
 <head><title>hello</title>
 </head>
 <body>

     <table> 
        <tr>
             <td>click first td(table1)</td></br>
             <td>click second td(table1)</td></br>
        </tr>
    </table>
    <table> 
        <tr>
             <td>first td(table2)</td></br>
             <td>second td(table2)</td></br>
        </tr>
    </table>
    <script>
            var firstTable = document.getElementsByTagName("table")[0];
            //alert(firstTable)

                cells = firstTable.getElementsByTagName('td');

                for (var i=0,len=cells.length; i<len; i++){
                    cells[i].onclick = function(){
                        alert(this.innerHTML);
                    }
                }
    </script>
 </body>
</html> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-01-14T10:34:48.077

要通过 获取第一个表`tag`，您可以简单地执行以下操作：

```
var first = document.getElementsByTagName("table")[0]; 
```

要通过 获取第一个表`class`，您可以简单地执行以下操作：

```
var first = document.getElementsByClassName("class")[0]; 
```

[小提琴](http://jsfiddle.net/zJLVt/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-01-14T10:20:36.623

使用纯 js，您可以使用不同的 document.getelement 命令获取元素。你在这里寻找的是

```
document.getElementsByTagName("table") 
```

这将返回一个数组，您可以从那里完成您的工作。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-01-14T10:20:58.213

您可以使用`document.getElementsByTagName`javascript 调用。

对于上面的 HTML：

```
var allTables = document.getElementsByTagName("table")
alert(allTables.length); 
```

提醒我 2。

然后你可以访问`allTables[0]`等...

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-09-11T07:58:02.290

另一种方法可以做到这一点。

```
let firstTable = document.querySelectorAll("table")[0];
let secondTable = document.querySelectorAll("table")[1];
```

```
<table>
  <tr>
    <td>first td(table1)</td>
    <td>second td(table1)</td>
  </tr>
</table>
<table>
  <tr>
    <td>first td(table2)</td>
    <td>second td(table2)</td>
  </tr>
</table>
```

# jquery - 使用 jQuery 显示边缘时停止拖动

> ID：14316525
> 
> 赞同：2
> 
> 时间：2013-01-14T10:16:11.510
> 
> 标签：jquery, jquery-ui, draggable

这是网站的链接：[战争游戏地图](http://game.creeight.se/)

我在一个较小的 div 中有一个大的 jQuery 可拖动 div（将地图图像设置为背景），该 div 上有溢出：隐藏。重点是让用户像在 maps.google.com 上一样拖动地图。

虽然谷歌地图有一个水平循环地图，但我的地图停在太平洋的两边。就像现在一样，用户可以将地图两边拖得太远，以便红色背景开始显示在左侧或右侧。

在红色背景开始显示之前，当地图边缘出现时，我如何使用 jQuery 停止拖动？

（我知道现在这张地图丑得要命，但它正在建设中。）

的CSS：

```
body {

overflow:hidden;
background-color: #ff0000;

}

#theBody {

position: absolute;
top: 50px;
left: 0px;
width: 1px;
height: 1px;
overflow: hidden;

}

#draggable {

background-image: url(map.gif);
width: 3944px;
height: 2258px;

} 
```

jQuery：

```
var viewportWidth = $(window).width();
var viewportHeight = $(window).height();

viewportHeight = (viewportHeight - 50);

$('#theBody').css({'width': viewportWidth});
$('#theBody').css({'height': viewportHeight});

$('#draggable').draggable(); 
```

的HTML

```
<div id="theBody">

    <div id="draggable" class="ui-widget-content"></div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:11:35.810

`draggable`jquery-ui的特性提供了定义容器的可能性，这将限制拖动项目的移动。通过在初始化您的可拖动对象时设置一个`containment`参数，您将达到预期的目标。在您的情况下，您应该使用

```
$('#draggable').draggable({containment:"#theBody"}); 
```

您可以[在此处](http://jqueryui.com/draggable/#constrain-movement)找到更多详细信息。

为了使可拖动对象大于包含区域，您可以使用以下技巧：

1.  为容器创建`viewContainer`所需大小的 div（例如 300x300），使用`overflow:hidden`
2.  附加到这个 div a`draggableContainer`中，这将是可拖动意义上的真正容器。第二个 div 必须足够大以包含您的可拖动对象。
3.  附加到这个`draggableContainer`你的可拖动`draggable`，比如说 500x500
4.  `draggableContainer`根据另外两个的大小调整大小和位置。在这种情况下，为了允许在整体上平移`draggable`，它需要`700x700`有一个`-200x-200`偏移量

您可以[在此处查看完整的工作示例](http://jsfiddle.net/UjztS/)。

# c# - 我如何有效地管理在主线程中运行的准“任务”

> ID：14316527
> 
> 赞同：0
> 
> 时间：2013-01-14T10:16:16.117
> 
> 标签：c#

我正在开发一个小型内部使用实用程序来监控几个网站的正常运行时间和响应能力。我们有非常专业的要求和测试标准，因此为此开发了一个小型应用程序。

我必须使用 WebBrowser 控件来加载网站，因为它在 JavaScript 和所需的插件上具有良好的性能。（测试必须尽可能真实）因此，我的测试必须在 GUI 线程中运行，目前在“DocumentCompleted”事件中。

此外，我正在测试的网站是 AJAX 繁重的，所以我必须在我的逻辑中实现等待期，以确保 DOM 按我的预期加载。例如，我使用 while 循环检查登录页面上是否存在标记。

我的概念验证按预期工作，我对结果非常满意。但是，我正在努力如何使这个更加“以任务为导向”。例如，我需要实现一个超时期限以及让用户取消正在发生的事情的能力。例如，登录页面可能失败，因此永远不会显示正确的输入。

目前，我能看到的唯一方法是在每一步都实现逻辑以检查`UserCancel`变量或检查秒表。

我担心我在我的应用程序架构中做出了一个根本错误的选择，所以我正在寻找有关如何实现上述内容和改进代码的建议。

* * *

```
private void TestSite(string url){

webBrowser.Naviate(url);
stopwatch.Start();

}

private void webBrowser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e) {

if(stopwatch.Elapsed.Seconds > timeOutValue || userCancel){
//Task timed out, or user has cancelled
return;
}

//Switch to the relevant application logic
//siteStatus is defined by where I expect the website to be at any particular time. 
switch(siteStatus)
{

     case siteStatus.LogonPage:
     if(DocumentTitle != ExpectedDocumentTitle){

     //Page is unexpected. Handle this and return

     }

     //Title is correct, wait until website has built the DOM
     while(stopwatch.Elapsed.Seconds < timeOutValue || !userCancel || webBrowser1.Document.GetElementsByTagName("input").Count() < 2){

     //Carry on
     Application.DoEvents();

     } 

     if(stopwatch.Elapsed.Seconds > timeOutValue){ return; }
     if(userCancel){ return; } 

     //Business logic goes here. Reports on time taken, ensures correct elements are on the page

     break;

     case siteStatus.Menu:

     //Essentially as above with different logic and tests

     break;

    //etc etc

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:32:27.050

基于事件的模型可能是更好的方法；而不是循环。

我会将一些`OnPropertyChanged`事件处理程序添加到`div`由 ajax 查询而不是循环更新的或容器中。

```
private void DocumentCompletedHandler(object sender, EventArgs e)
{

    HtmlElement elem = webctrl.Document.GetElementById("ajaxDiv");

    if (elem != null)
    {
          elem.AttachEventHandler("onpropertychange", new EventHandler(ajaxEvent));
    }

} 
```

与处理程序

```
private void ajaxEvent(Object sender, EventArgs e)
{
      HtmlElement div = webctrl.Document.GetElementById("ajaxDiv");
      if (div == null) return;  // Not Found!?
      String contentLoaded = div.InnerHtml; // get the content loaded via ajax
} 
```

考虑到相同的结构，您可以触发中断事件或类似的中止操作。或者您可以使用该`stop`命令停止 Web 控件上的所有处理 - 虽然我不确定这是否会停止 ajax 处理。

```
private void BtnAbort_Click(Object sender, EventArgs e)
{
   webctrl.Stop();
   // TODO : Remov any event handlers
} 
```

# matlab - 在matlab中将矩阵数组（包括字符字符串）转换为扩展矩阵

> ID：14316528
> 
> 赞同：0
> 
> 时间：2013-01-14T10:16:16.993
> 
> 标签：matlab

我正在尝试为任意电路（很像香料）做一个节点分析的脚本。我想从文本文件中导入数据并创建一个矩阵，进一步的操作将基于该矩阵。所以我使用了 textscan

```
fid = fopen('text2.txt');
netlist = textscan(fid,'%s%s%d%d%d%d%f'); 
```

所以对于这样的输入文件：

```
R1 R 1 0 3 0 0 
C1 C 1 0 5 0 0 
L1 L 2 1 10 0 0 
R2 R 1 2 1 0 0 
i1 Iac 2 0 1 1 0.523 
```

结果将是这样

```
 {5x1 cell}    {5x1 cell}    [5x1 int32]    [5x1 int32]    [5x1 int32]    [5x1 int32]
 [5x1 double] 
```

问题是，现在我不能从矩阵中调用任何单个值。所以我试图弄清楚如何重新创建原始矩阵（如果可能的话），如果这不起作用，你能告诉我一种调用单个元素的方法吗（比如（2,2）中的 C？谢谢进步

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:48:59.170

元胞数组只是另一种存储数据的方式。具体来说，当每个单元格包含不同类型或不同维度的数据时（在这种情况下，使用矩阵将不起作用），需要使用单元格数组。

要访问元胞数组中的单个元素，请使用大括号 ( `{}`)。在 `textscan`您的数据存储为列之后，您首先通过 访问第 i 列`C{i}`。

然后你需要考虑你的细胞包含什么。第 2 列包含字符串，因此它是另一个元胞数组（您也可以在结果中验证它——第 2 列被描述为 a `{5x1 cell}`）。因此，您需要再次使用花括号。如果要访问第二列中的第二个元素，则必须编写：

```
C{2}{2} 
```

**PS**
如果您要访问第三列中的第二个元素，您将使用圆括号`()`作为第二个下标，因为第二列是一个向量。在这种情况下，语法应该是：

```
C{3}(2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:33:10.990

我假设这些输出矩阵存储在变量中还是存储在另一个单元格数组中？

您可以做的是将两个文本数组保留为单元格数组，您可以像这样找出特定字符串的行（我可能得到了`ismember`反转的参数）：

```
find(ismember(FirstCellArray, "R1") == 1) 
```

然后你可以将数值数组组合成一个矩阵。您必须在此处指定它们的存储方式，但可以说它们位于名为 col1、col2 等的单独变量中（显然它们不是，您可能需要使用 cell2mat 但我们需要查看容纳它们的单元矩阵的结构) 然后你可以像这样组合它们：

```
NumberMatrix = [col1, col2, col3 ...]; 
```

您可能需要将它们重新转换为双打，但我对此表示怀疑：

```
NumberMatrix = [double(col1), double(col2), double(col3) ...]; 
```

现在，如果你想要 R1 R 行的第三个数值，你可以去

```
index1 = find(ismember(FirstCellArray, "R1") == 1);
index2 = find(ismember(SecondCellArray, "R") == 1);
rowIndex = intersect(index1, index2);
value = NumberMatrix(rowIndex, 3) 
```

# r - 带有 knitr 字幕的循环

> ID：14316529
> 
> 赞同：5
> 
> 时间：2013-01-14T10:16:23.257
> 
> 标签：r, knitr, reproducible-research

我想知道是否有一种简单的方法可以在`knitr`. 我知道的唯一方法是：（从[https://github.com/yihui/knitr-examples/blob/master/075-knit-expand.Rnw](https://github.com/yihui/knitr-examples/blob/master/075-knit-expand.Rnw)简化）。但是将输出收集到`src`然后在循环之后打印它是一个拖累，因为我想编写一个函数来从任意数据集产生这样的循环。

```
\documentclass{article}
\title{Using knit\_expand() for templates}
\author{Yihui Xie}
\begin{document}

\maketitle
\tableofcontents

<<lm-mtcars, tidy.opts=list(width.cutoff=55)>>=
# the template
tpl = c("\\subsection{Regression on {{xvar}}}",
        "<<lm-{{xvar}}>>=",
        "lm(mpg~{{xvar}}, data=mtcars)",
        "@")
# expand to knitr source and pass to knit()
src = lapply(names(mtcars)[-1], function(xvar) {knit_expand(text = tpl)})
@

\Sexpr{knit(text = unlist(src))}

\end{document} 
```

所以我希望能够做的是这样的事情：

```
\documentclass{article}
\title{Using knit\_expand() for templates}
\author{Yihui Xie}
\begin{document}

\maketitle
\tableofcontents

<<lm, tidy.opts=list(width.cutoff=55)>>=
    myLfFun=function(dataset){
... some function definition which produces say an lm for each variable in dataset ...
}
@

\Sexpr{myLfFun(Titanic}
...
\Sexpr{myLfFun(mtcars}
... etc
\end{document} 
```

...如果我在其上运行 brew() 会产生...

```
\documentclass{article}
\title{Brew + knitR}
\author{Ramnath Vaidyanathan}
\begin{document}

\maketitle
\tableofcontents

<<lm-cyl >>=
lm(mpg ~ cyl, data = mtcars)
@

<<lm-disp >>=
lm(mpg ~ disp, data = mtcars)
@

<<lm-hp >>=
lm(mpg ~ hp, data = mtcars)
@

<<lm-drat >>=
lm(mpg ~ drat, data = mtcars)
@

<<lm-wt >>=
lm(mpg ~ wt, data = mtcars)
@

<<lm-qsec >>=
lm(mpg ~ qsec, data = mtcars)
@

<<lm-vs >>=
lm(mpg ~ vs, data = mtcars)
@

<<lm-am >>=
lm(mpg ~ am, data = mtcars)
@

<<lm-gear >>=
lm(mpg ~ gear, data = mtcars)
@

<<lm-carb >>=
lm(mpg ~ carb, data = mtcars)
@

((... same for Titanic database ...))

\end{document} 
```

...然后我可以 knit2pdf() 的输出。所以如果模板被称为 tmpl.Rnw，我会运行 brew('tmpl.Rnw','doc.Rnw');knit2pdf('doc.Rnw)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T11:10:13.207

我不明白为什么你需要`knit_expand`老好人`sprintf`可以做同样的事情。这是输出：[http](http://www.anst.uu.se/chrba104/stackoverflow/output.pdf) ://www.anst.uu.se/chrba104/stackoverflow/output.pdf 。

尽管我的模板也是为数据集定制的`mtcars`，但我看不出如何在不失去灵活性的情况下使其更简单。

```
\documentclass{article}
\title{Not using knit\_expand() for templates}
\author{Yihui Xie}
\begin{document}

\maketitle
\tableofcontents

<<lm-mtcars, tidy.opts=list(width.cutoff=55)>>=
vars <- setdiff(names(mtcars), 'mpg')
src <- sprintf(
    paste('\\subsection{Regression on %s}',
          '<<lm-%s>>=',
          'lm(mpg ~ %s, data=mtcars)',
          '@', sep='\n'),
    vars, vars, vars)
@
\Sexpr{knit(text = src)}

\end{document} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T16:31:45.730

我更喜欢使用专门的模板库`whisker`来`brew`实现您所寻求的，因为尝试使用 R 函数恕我直言编写乳胶代码是非常难看的。模板文件如下所示，命名为`tpl.Rnw`. 您可以通过运行以下命令将其转换为 pdf。您可以轻松编写一个函数来封装使用 knitr 将 brew 模板转换为 pdf 的逻辑。

```
brew('tpl.Rnw', 'doc.Rnw') 
knit2pdf('doc.Rnw') 
```

模板文件`tpl.Rnw`

```
\documentclass{article}
\title{Brew + knitR}
\author{Ramnath Vaidyanathan}
\begin{document}

\maketitle
\tableofcontents

<% for (xvar in names(mtcars)[-1]) { %>

\subsection{Regression on <%= xvar %>}

<<lm-<%= xvar %> >>=
lm(mpg ~ <%= xvar %>, data = mtcars)
@

<% } %>

\end{document} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T19:49:16.220

我发现了为什么我不能把这`\Sexpr{knit(text = unlist(src))}`条线放在前面的普通代码块中。我需要在文档的开头设置并为块`opts_knit$set(progress = F, verbose = F)`设置至少一些。`comment=NA, warning=FALSE,message=FALSE,echo=FALSE`这个简单的动作使得粘贴行就像`knit(text = unlist(src))`我想要的任何地方一样，并且我想要在一个块中多次粘贴。这消除了对专用功能的需要。

# php - 如何使用适当的SQL标准在MYSQL中计算具有特定纬度和经度的所需半径或距离？

> ID：14316530
> 
> 赞同：5
> 
> 时间：2013-01-14T10:16:31.430
> 
> 标签：php, mysql

我需要知道如何使用适当的 SQL 标准在 MYSQL 中计算具有特定纬度和经度的所需半径或距离？我在互联网上找到了许多解决方案，但他们花费了很多时间来涉及 cos 和其他术语。请帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T10:29:44.987

看看这个链接。这可能会对你有所帮助。

[计算距离。](http://www.marketingtechblog.com/calculate-distance/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T10:37:09.607

为了计算两个 GPS 点之间的距离，我使用了 MySQL 函数：

```
CREATE FUNCTION `distance`(lat1 FLOAT(10,7), lng1 FLOAT(10,7), lat2 FLOAT(10,7), lng2 FLOAT(10,7)) RETURNS FLOAT(20,2)
    RETURN ROUND(6371 * 2 * ASIN(SQRT( POWER(SIN((lat1 -ABS( lat2 )) * PI()/180 / 2),2) + COS(lat1 * PI()/180 ) * COS( ABS ( lat2 ) *  PI()/180) * POWER(SIN((lng1 - lng2) *  PI()/180 / 2), 2) )), 2); 
```

然后很容易使用它：

```
SELECT
    distance( city1.latitude, city1.longtitude, city2.latitude, city2.longtitude) AS distanceKM
FROM
    city1, city2 ... 
```

您可以[在此处阅读](http://www.movable-type.co.uk/scripts/latlong.html)如何将坐标转换为公里

**注意：** `6371`是以公里为单位的[地球半径](http://en.wikipedia.org/wiki/Earth_radius)，因此如果您需要以英里为单位的距离，则必须将其替换为`3959`

# php - 同一服务器上的两个 PHP 应用程序之间的通信？

> ID：14316531
> 
> 赞同：5
> 
> 时间：2013-01-14T10:16:35.963
> 
> 标签：php, codeigniter, architecture, project-planning, amazon-mws

我正在开发一个包含两个组件的项目：

1) 一个是 CodeIgniter 框架，我将在其中构建所有自定义代码。

2）另一个是亚马逊的用于MWS API的PHP SDK库。

问题是，我的 CodeIgniter 代码和亚马逊的 SDK 都需要它们自己的 autoload()。

Amazon 的 SDK 也进一步分为 3-4 个组件，每个组件都有自己的自动加载功能，所以如果你想在同一个会话中使用 Products 的 SDK，然后使用 Reports SDK，你会遇到已经定义的自动加载功能。

出于这个原因，我正在考虑建立一个 Web 服务系统，用于在我自己的代码和 Amazon 的 SDK 文件之间进行通信，即使它们在同一台服务器上，但至少这样可以避免命名冲突。即，我将向 CodeIgniter 外部的文件发送 HTTP 请求，该文件将处理 Amazon 的 SDK，并以 JSON 或 XML 格式返回响应。

我不认为命名空间是一种选择，因为我不想遍历 SDK 中的每个文件/类并添加命名空间语句。

我的问题是，我应该注意这种方法是否存在任何性能问题？除了命名空间之外，还有什么方法可以避免这种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:17:09.727

只需将它们的自动加载器功能复制到一个单独的文件中，重命名它们，然后将它们连接起来`spl_autoload_register`：

```
<?php
function loadFrameworkOne($name) {
    // contents of __autoload from framework one.
}
function loadFrameworkTwo($name) {
    // contents of __autoload from framework two.
}
spl_autoload_register('loadFrameworkOne');
spl_autoload_register('loadFrameworkTwo'); 
```

这很快，很脏，而且离我的头顶；）

# android - iOS/Android 商店和从各自商店外部购买积分（没有应用内购买）

> ID：14316532
> 
> 赞同：1
> 
> 时间：2013-01-14T10:16:38.770
> 
> 标签：android, ios, web, app-store

我正在开发一款针对 Android、iOS、Web 的游戏。

用户必须创建一个帐户才能玩游戏，并且他可以在上述三个平台中的任何一个中使用该帐户。

随着用户玩得更多，他可以解锁/购买新功能（武器），我需要将这些购买的详细信息存储在中央数据库服务器中。我正在考虑像这样实施

*   当用户`unlock`在游戏过程中点击（在任何 iPhone、Android 或 Web 中）时，会显示一个新网页，用户可以在其中使用 paypal 或任何其他方式购买该功能。
*   在移动设备中，当用户单击解锁此网页的移动版本时，此网页会显示在网页视图中
*   当用户购买/解锁功能时，数据存储在集中式数据库中。
*   简而言之，我不想在各自的移动设备上使用应用购买。

我的问题是这些

1.  iTunes 商店/谷歌播放规则中禁止此类购买/业务的任何内容？苹果/谷歌会反对这些吗？
2.  如果 Apple/Google 确实反对，那么我唯一的选择是**在 app purchase**中使用。在这种情况下，我如何实现一个可以在所有平台上运行的集中式功能解锁/购买系统？**我不想让我的用户生气，因为他在 iPhone 中购买的武器在他玩 Web 时不存在。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:53:09.397

*   iTunes 商店/谷歌播放规则中禁止此类购买/业务的任何内容？苹果/谷歌会反对这些吗？

使用 iOS，您不能这样做：

> 显示一个新网页，用户可以在其中使用贝宝或任何其他方法购买该功能

应用程序内的任何购买*可见*都必须使用 IAP。因此，您可以非常轻松地在 iOS 版本中可用的其他平台上进行购买。

至于采购。您要么使用 IAP，要么在您的网站上允许该选项。但*不要*在您的应用内提供指向您网站上“立即购买”选项的链接。

查看 Kindle 应用程序，了解如何操作。

*   如果 Apple/Google 确实反对，那么我唯一的选择是在应用购买中使用。在这种情况下，我如何实现一个可以在所有平台上运行的集中式功能解锁/购买系统？我不想让我的用户生气，因为他在 iPhone 中购买的武器在他玩 Web 时不存在。

使用 iOS，只有计费必须通过他们的服务器。您可以在自己的服务器上触发下载/事件，所以这不是问题。

# c# - 带有冒号的 Razor 标记中的字符串切换以防万一语句导致错误“未终止的字符串文字”

> ID：14316537
> 
> 赞同：6
> 
> 时间：2013-01-14T10:17:01.103
> 
> 标签：c#, razor, switch-statement, string-literals

当我想在我的字符串 switch case 语句中使用冒号“：”时，我收到错误“未终止的字符串文字”，我该如何解决这个问题，为什么会出现错误？

代码：

```
@switch (stringText)
{
    case "aaaa:ggg":
        Do something...
        break;
    case "bbbb:ggg":
        Do something else...
        break;
 } 
```

如果通过这样做修复它但没有找到一个好的解决方案：

```
const string extra = ":ggg";
@switch (stringText)
{
    case "aaaa" + extra:
        Do something...
        break;
    case "bbbb" + extra:
        Do something else...
        break;
 } 
```

编辑：使用 MVC Razor 语法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T13:05:29.013

如果您将值定义为实用程序类中的常量，然后在 switch 语句中引用这些常量而不是字符串文字，怎么样？

```
class Constants
{
     public const string Aaaa = "aaaa:gggg";
     public const string Bbbb = "bbbb:gggg";
} 
```

...

```
@switch (stringText)
{
    case Constants.Aaaa:
        Do something...
        break;
    case Constants.Bbbb:
        Do something else...
        break;
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T13:13:17.543

奇怪的错误。

这是另一种解决方法：如果您不想定义常量，则可以使用转义序列`\x3A`在字符串文字中获取冒号，这种方式不会干扰 razor 语法检查器。

在您的情况下，代码可能是：

```
@switch (stringText)
{
    case "aaaa\x3Aggg":
        Do something...
        break;
    case "bbbb\x3Aggg":
        Do something else...
        break;
} 
```

# asp.net-mvc - ASP.NET MVC 4 数据库规范化

> ID：14316538
> 
> 赞同：0
> 
> 时间：2013-01-14T10:17:07.767
> 
> 标签：asp.net-mvc, asp.net-mvc-4, normalization

我正在考虑用 MVC4 开发一个网络/移动应用程序。就我对 ASP.NET MVC 的了解而言，当您在表和模型类之间具有 1 对 1 的关系时，它非常有用，而当您需要使用规范化数据库时，我遇到了一些问题。

- -更新 - -

即使过去我使用 Linq to SQL，我也在考虑使用实体数据模型（还不确定，但乍一看似乎更好）。

--

一个愚蠢的例子：

```
**table person**
ID
Name
Surname
HairColorID

**table hairColor**
HairColorID
Color 
```

我想知道这样的情况是否可以在 MVC4 中轻松解决，而无需编写太多代码来手动映射所有表。我的意思是，我不知道在我的控制器中是否有一些简单的方法，例如：

```
public ActionResult About(Person person) 
```

人自动加入我的两张桌子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:07:40.837

我使用不同的项目将我的应用程序分成几个不同的层。

*   我的 AppName.Data 项目处理我所有的数据访问（即从数据库中检索数据）。
*   我的 AppName.Models 项目包含我的应用程序所需的所有视图模型类和其他模型类。
*   我的 AppName.Web 项目只是 MVC Web 应用程序
*   我的 AppName.Services 项目处理我的所有业务逻辑以及 Web 层和数据层之间的通信。它构建视图模型、处理数据验证等。我从不使用实际的数据库对象调用控制器操作方法。我总是使用视图模型。该视图模型仅包含填充视图所需的内容。

因此，在这种情况下，如果这是一个只读视图，我会做的是创建一个 AboutPersonDisplayViewModel，如下所示：

```
public class AboutPersonDisplayViewModel
{
    public int PersonID { get; set; }
    public string Name { get; set; }
    public string Surname { get; set; }
    public string HairColor { get; set; }
} 
```

如果它是一个可编辑的视图，我将有一个单独的视图模型，如下所示：

```
public class AboutPersonEditViewModel
{
    public int PersonID { get; set; }
    public string Name { get; set; }
    public string Surname { get; set; }
    public int HairColorID { get; set; }
    public IDictionary<int, string> HairColorOptions { get; set; }
} 
```

在数据库中，您应该在 person 和 hairColor 表之间建立关系。因此，当您构建视图模型时，您只需获取要查找的 ID 的人员，并使用该人员的信息填充 AboutPersonViewModel 并使用导航属性导航到 Person.HairColor 以获取存储的 ID 的头发颜色.

然后，当我保存时，服务层将验证数据并正确映射/保存选择的头发颜色。

我希望这有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:17:53.587

具体查看您的数据访问权限。看起来您想要一个`person`由数据库中的许多表组成的复杂类，并且您希望快速构建对象而无需分离您的关注点。

您可以使用[Dapper](http://code.google.com/p/dapper-dot-net)轻松映射对象。

这是一个非常简单的例子：

```
using System;
using System.Collections.Generic;
using System.Data.SqlClient;
using Dapper;
namespace DapperTest
{
    class MyEntity
    {
        public int ID { get; set; }
        public string name { get; set; }
        public string Description { get; set; }
    }

    class Program
    {

        public static readonly string connectionString = "Data Source=.;Initial Catalog=sandbox;Integrated Security=True";

        public static SqlConnection GetOpenConnection()
        {
            var connection = new SqlConnection(connectionString);
            connection.Open();
            return connection;
        }

        static void Main(string[] args)
        {
            var c = GetOpenConnection();
            IEnumerable<MyEntity> result = c.Query<MyEntity>(@"select people.id, people.description as name ,beauty.description from people
join peoplebeautylink on peopleid = people.id
join beauty on beautyid = beauty.id ");
            foreach (var myEntity in result)
            {
                Console.WriteLine(myEntity.name);
            }
            Console.ReadKey();
        }
    }
} 
```

如果你想去掉 MVC 的仪式。我建议你看看[南希](http://nancyfx.org/)

# objective-c - presentModalViewController 和 pushViewController 关于内存管理的区别

> ID：14316539
> 
> 赞同：0
> 
> 时间：2013-01-14T10:17:09.963
> 
> 标签：objective-c, uiviewcontroller, automatic-ref-counting, modal-dialog, pushviewcontroller

虽然我已经解决了这个问题。我*真的*需要有人向我解释它为什么有效。

我`UINavBar`有一个自定义`UIView`为可见的 ViewController。我创建了一个自定义按钮来代替导航栏的标题视图并将其设置为`autorelease`（我正在自定义现有的非 ARC[代码](http://www.research.ibm.com/remail/)）：

```
- (void)loadView {
    ..  

    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [button addTarget:self
               action:@selector(presentEmailThreadList)
     forControlEvents:UIControlEventTouchDown];
    [button setTitle:[NSString stringWithFormat:@"1 of %d",self.numThreads] forState:UIControlStateNormal];
    button.frame = CGRectMake(80.0, 210.0, 160.0, 40.0);

    self.navigationItem.titleView = [button autorelease];
} 
```

当我以模态方式呈现视图时，此代码有效，即：

```
[self presentModalViewController:emailThreadListVC animated:YES]; 
```

但`EXC_BAD_ACCESS`如果我尝试将其推送到导航堆栈，则会出现错误，然后单击新 VC 上的“后退按钮”：

```
[self.navigationController pushViewController:emailThreadListVC animated:YES]; 
```

特别是在以下位置崩溃`UINavigationItemTitleView`：

![在此处输入图像描述](../Images/aad6dbcfbffaa0f5798bfe4b66c888aa.png)

我得出的结论是，`titleView`当我尝试返回原始 VC 时，它不再存在，这意味着当我将 VC 推送到堆栈顶部时，它`autorelease`确实减少了引用计数，但是`titleView`当我将引用计数减少时，它不会减少以模态方式推送 VC。

知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:05:28.147

问题在这里：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
...
self.navigationItem.titleView = [button autorelease];  <-- DOUBLE AUTORELEASE 
```

`buttonWithType`已经返回一个自动释放的对象，所以你不需要再次显式地自动释放它。

为什么它在您使用时有效`presentViewController`是另一个问题。我认为这归结为两种情况下不同的时间安排。

# postgresql - 基于 PostgreSQL 中 10 分钟间隔测量的时间数据库的平均聚合

> ID：14316547
> 
> 赞同：1
> 
> 时间：2013-01-14T10:17:39.620
> 
> 标签：postgresql, aggregate-functions, average, temporal-database

我有一个时间数据库，我想通过使用以下时间序列中的数据通过时间序列数据的平均函数执行时间聚合：

```
Hourly average of HH= (HH-1):51, HH:01, HH:11, HH:21, HH:31, HH:41. 
```

此外，上述值是瞬时值。

样本数据：

```
 ambtemp      ddate_ttime
1     -1.42 2007-09-28 23:39:09
2     -1.24 2007-09-28 23:41:09
3     -1.28 2007-09-28 23:43:09
4     -1.28 2007-09-28 23:45:09
5     -1.24 2007-09-28 23:47:09
6     -1.42 2007-09-28 23:49:09
7     -1.68 2007-09-28 23:51:09
8     -1.76 2007-09-28 23:53:09
9     -1.96 2007-09-28 23:55:09
10    -2.02 2007-09-28 23:57:09
11    -1.92 2007-09-28 23:59:09
12    -1.64 2007-09-29 00:01:09
13    -1.76 2007-09-29 00:03:09
14    -1.83 2007-09-29 00:05:09
15    -1.86 2007-09-29 00:07:09
16    -1.94 2007-09-29 00:09:09
17    -1.87 2007-09-29 00:11:09
18    -1.87 2007-09-29 00:13:09
19    -1.80 2007-09-29 00:15:09
20    -1.64 2007-09-29 00:17:09
21    -1.60 2007-09-29 00:19:09
22    -1.90 2007-09-29 00:21:09
23    -2.08 2007-09-29 00:23:09
24    -1.94 2007-09-29 00:25:09
25    -2.12 2007-09-29 00:27:09
26    -1.87 2007-09-29 00:29:09
27    -2.18 2007-09-29 00:31:09
28    -1.98 2007-09-29 00:33:09
29    -1.73 2007-09-29 00:35:09
30    -1.84 2007-09-29 00:37:09
31    -2.04 2007-09-29 00:39:09
32    -1.86 2007-09-29 00:41:09
33    -1.94 2007-09-29 00:43:09
34    -1.77 2007-09-29 00:45:09 
```

和预期结果：

```
Hourly mean for 0:00 = average of values of (23:51, 0:01, 0:11, 0:21, 0:31, 0:41) 
```

每小时平均 0:00 = (-1.68+-1.64+-1.87+-1.90+-2.18+-1.86)/6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:59:17.373

```
select dt, average_temp
from (
    select
        date_trunc('hour', ddate_ttime + interval '10 minutes') dt,
        avg(ambtemp) over(
            partition by date_trunc('hour', ddate_ttime + interval '10 minutes')
        ) average_temp
    from sample
    where extract(minute from ddate_ttime) in (51, 01, 11, 21, 31, 41)
) s
group by 1, 2
order by dt 
```

[SQL小提琴](http://www.sqlfiddle.com/#!12/5c733/1)

# c# - 如何检查是否在 MS Word 中单击了按钮？

> ID：14316555
> 
> 赞同：2
> 
> 时间：2013-01-14T10:18:13.877
> 
> 标签：c#, ms-word, autohotkey

我目前正在尝试使用脚本`Autohotkey`（

要记录这些错误点击（在不可点击的区域），我希望每次在 C# 的帮助下单击 MS word 上的按钮时都知道（如果它可以告诉我它是哪个按钮，如果不只是知道“某个按钮被点击”也可以）。

我想知道是否有任何好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:32:14.933

为了检测 word 或其他程序中的某些位置，请使用 ControlSend [http://www.autohotkey.com/docs/commands/ControlSend.htm](http://www.autohotkey.com/docs/commands/ControlSend.htm) 和 [http://www.autohotkey.com/docs/commands/ControlGet.htm](http://www.autohotkey.com/docs/commands/ControlGet.htm)

这样，您可以将输入直接发送到窗口中的指定控件。

# function - postgresql中的第n个百分位数计算

> ID：14316562
> 
> 赞同：32
> 
> 时间：2013-01-14T10:18:28.997
> 
> 标签：function, postgresql, percentile

令人惊讶的是，我找不到 postgresql 的第 n 个百分位函数。

我通过 mondrian olap 工具使用它，所以我只需要一个返回 95% 的聚合函数。

我确实找到了这个链接：

[http://www.postgresql.org/message-id/162867790907102334r71db0227jfa0e4bd96f48b8e4@mail.gmail.com](http://www.postgresql.org/message-id/162867790907102334r71db0227jfa0e4bd96f48b8e4@mail.gmail.com)

但由于某种原因，该百分位函数中的代码在某些情况下会返回空值，并进行某些查询。我检查了数据，数据中似乎没有什么奇怪的原因！

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2015-01-05T17:04:20.577

在 PostgreSQL 9.4 中，现在有对百分位数的原生支持，在*Ordered-Set Aggregate Functions*中实现：

> ```
> percentile_cont(fraction) WITHIN GROUP (ORDER BY sort_expression) 
> ```
> 
> 连续百分位数：返回与排序中指定分数相对应的值，如果需要，在相邻输入项之间进行插值
> 
> ```
> percentile_cont(fractions) WITHIN GROUP (ORDER BY sort_expression) 
> ```
> 
> 多个连续百分位数：返回与分数参数的形状匹配的结果数组，每个非空元素替换为对应于该百分位数的值

有关更多详细信息，请参阅文档：[http ://www.postgresql.org/docs/current/static/functions-aggregate.html](http://www.postgresql.org/docs/current/static/functions-aggregate.html)

并在这里查看一些示例：[https ://github.com/michaelpq/michaelpq.github.io/blob/master/_posts/2014-02-27-postgres-9-4-feature-highlight-within-group.markdown](https://github.com/michaelpq/michaelpq.github.io/blob/master/_posts/2014-02-27-postgres-9-4-feature-highlight-within-group.markdown)

```
CREATE TABLE aa AS SELECT generate_series(1,20) AS a;
--SELECT 20

WITH subset AS (
    SELECT a AS val,
        ntile(4) OVER (ORDER BY a) AS tile
    FROM aa
)
SELECT tile, max(val)
FROM subset GROUP BY tile ORDER BY tile;

 tile | max
------+-----
    1 |   5
    2 |  10
    3 |  15
    4 |  20
(4 rows) 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-10-07T17:09:59.453

该`ntile`功能在这里非常有用。我有一张桌子`test_temp`：

```
select * from test_temp

score
integer
3
5
2
10
4
8
7
12

select score, ntile(4) over (order by score) as quartile from test_temp;

score    quartile
integer  integer
2        1
3        1
4        2
5        2
7        3
8        3
10       4
12       4 
```

`ntile(4) over (order by score)`按分数对列进行排序，将其分成四个偶数组（如果数字均分）并根据顺序分配组号。

因为我在这里有 8 个数字，它们代表第 0、第 12.5、第 25、第 37.5、第 50、第 62.5、第 75 和第 87.5 个百分位数。因此，如果我只取`quartile`2 的结果，我将得到第 25 和第 37.5 个百分位数。

```
with ranked_test as (
    select score, ntile(4) over (order by score) as quartile from temp_test
)
select min(score) from ranked_test
where quartile = 2
group by quartile; 
```

返回`4`， 8 列表中第三高的数字。

如果您有一个更大的表并使用`ntile(100)`您过滤的列将是百分位数，您可以使用与上面相同的查询。

# bash - bash 基于真实文件创建虚拟文件和文件夹

> ID：14316565
> 
> 赞同：3
> 
> 时间：2013-01-14T10:18:30.920
> 
> 标签：bash, loops, replace

所以我需要一个简单的 bash 脚本来根据实际文件夹的内容创建虚拟文件和文件夹。这是我到目前为止得到的

```
dir=/mnt/TV
dummy_dir=/home/bob/Desktop/dummy

for d in `ls $dir`; do
  mkdir "$dummy_dir/$(basename $d)"
done
for f in `ls -a $dir`; do
  touch "$dummy_dir/$(basename $f)"
done 
```

但它不能正常工作..谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:57:54.680

而不是使用``cmd``,`$(cmd)`是新样式，如果可能的话应该使用，它更清晰，也可以嵌套。但是我也不会使用。

我怀疑，您遇到的问题是 mkdir，它要求在创建基础目录之前存在所有顶级目录，即

```
mkdir /tmp/path/here 
```

需要 /tmp/path 存在，除非您使用 -p 标志，无论当前存在什么，它都会创建整个树。

您会发现的另一个问题是隐藏文件和目录将被创建为文件，而非隐藏文件和目录将被创建为目录，无论原始目录中的文件类型如何。

更好的方法是使用 find。例如

```
dir=/mnt/TV
dummy_dir=/home/bob/Desktop/dummy

find $dir -type d -printf '%P\n' | \
    while read dir; do 
        [[ -d "$dummy_dir/$dir" ]] || mkdir -p "$dummy_dir/$dir"
    done

find $dir -type f -printf '%P\n' | \
     while read file; do
        [[ -f "$dummy_dir/$file" ]] || touch "$dummy_dir/$file"
     done 
```

第一个 find 命令将打印出作为 $dir 子目录的所有目录的相对于 $dir 的路径。然后将这些通过管道传送到 while 循环中，该循环测试该目录是否存在于 dummy_dir 中，如果不存在则创建它。

第二个 find 命令将对文件执行相同的操作。

注意：这将完全忽略符号链接套接字或任何其他不是目录或常规文件的文件。

如果这不能满足您的要求，请更新您的问题以包含更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:12:27.187

```
cp -pvr /mnt/TV /home/bob/Desktop/dummy 
```

If you are trying to achieve anything more than this, specify it in your question.

# android - 如何以编程方式制作android主题

> ID：14316571
> 
> 赞同：0
> 
> 时间：2013-01-14T10:18:45.803
> 
> 标签：android, android-theme

我需要使用 android 编程构建一个主题。是否有一个类用于为移动设备构建 android 主题（不适用于我的应用程序）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:22:42.910

您不能像那样为 AOSP Android 设置主题。

但是，您可以为 ADW 和 Go Launcher 等应用程序编写主题。从技术上讲，这不是 Android 主题，但您正在为主启动器应用程序设置主题，它与现有的 Android 一样好。

# java - 递归搜索具有特定结尾的文件，避免使用 SVN 文件夹

> ID：14316586
> 
> 赞同：0
> 
> 时间：2013-01-14T10:19:49.797
> 
> 标签：java, io, apache-commons, apache-commons-io

我想在文件夹中搜索名称以“_1.xml”结尾的文件（UNIX 文件系统，我正在搜索 /home/myuser/myfolder/）。我想避免使用 svn 文件夹：我不知道它们是否会给我错误，这就是我想避免它们的原因。如果你向我保证他们是安全的，我不介意他们。

我的代码如下：

```
/**
 * Searches associated XML file "WHATEVER_id.xml" given an id
 * 
 * @param id
 *            notam id
 * 
 * @return absolute path to XML file
 * 
 */
public String getXMLFileFromID(final int id) {
    String path = null;
    File root;
    try {
        root = new File("/home/myuser/myfolder");
        String[] extensions = {"xml"};
        boolean recursive = true;
        try{
            Collection<File> files = FileUtils.listFiles(root, extensions, recursive);

            for(Iterator<File> iterator = files.iterator(); iterator.hasNext(); ){
                File file = (File) iterator.next();
                if(file.getName().endsWith(Integer.toString(id) + ".xml")){
                    path = file.getAbsolutePath();
                    LoggerFactory.getLogger(FTPDatabase.class).info("getXMLFileFromID : Found associated XML file in " + path);
                    return path;
                }
            }
        }catch(Exception e){
            e.printStackTrace();
        }

        LoggerFactory.getLogger(FTPDatabase.class).info("getXMLFileFromID : Unable to find XML associated to id " + id);

    } catch (DatabaseException e) {
        LoggerFactory.getLogger(FTPDatabase.class).info("getXMLFileFromID : DatabaseException : " + e.getMessage());
    }
    return path;
} 
```

也尝试过这样的 FilenameFilters：

```
 File[] matchingFiles = f.listFiles(new FilenameFilter() {
            public boolean accept(File dir, String name) {
                return name.endsWith(Integer.toString(id) + ".xml");
            }
        });
        if(matchingFiles.length == 1){
            path = matchingFiles[0].getAbsolutePath();
            LoggerFactory.getLogger(FTPDatabase.class).info("getXMLFileFromID : Found associated XML file in " + path);
        }
        else{
            LoggerFactory.getLogger(FTPDatabase.class).info("getXMLFileFromID : Unable to find XML associated to NOTAM id " + id);
        } 
```

无论如何我都会遇到异常：

```
 java.lang.IllegalArgumentException: Parameter 'directory' is not a directoy,
     at org.apache.commons.io.FileUtils.validateListFileParameters (545)
     at org.apache.commons.io.FileUtils.listFiles(521)
     at org.apache.commons.io.FileUtils.listFiles(691)
     at com.core.ftp.FTPDataBase.getXMLFileFromID(227) (that's the FileUtils.listFiles 
line)

     ... 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:39:07.797

我还没有尝试过，但以下代码段应该适合您的需求：

```
public List<File> search(File root, int id) {
    List<File> found = new ArrayList<File>();
    if (root.isFile() && root.getName().endsWith("_" + id + ".xml")) {
        found.add(root);
    } else if (root.isDirectory() && !root.getName().contains("svn")) {
        for (File file : root.listFiles()) {
            found.addAll(search(file, id));
        }
    }
    return found;
} 
```

来电：

```
List<File> found = search(new File("/home/myuser/myfolder"), 1); 
```

# php - 使用 128 位密钥创建 HMAC-SHA-256 算法

> ID：14316587
> 
> 赞同：2
> 
> 时间：2013-01-14T10:19:54.693
> 
> 标签：php, algorithm, hash

我现在为此苦苦挣扎了一段时间。我几乎扫描了谷歌上的所有内容，但我找不到正确的脚本，如何使用 128 位密钥创建 HMAC-SHA-256 算法。

它应该像这样简单：

```
$algo = 'sha256';
$file = 'file.txt';
$key = '1234567890abcdef1234567890abcdef';
echo hash_hmac_file ($algo, $file, $key ); 
```

`file.txt`仅包含 8 个零（*00000000*）。

输出必须是**FF365893D899291C3BF505FB3175E880**，但我就是不明白怎么做？

我尝试了多种散列算法，但没有一个返回必要的值。我在这里做错了什么以及如何解决？

我也尝试[了这个](http://php.net/manual/en/function.hash-hmac.php#109409)解决方案，但它仍然是错误的。

我需要这个来与银行联系，他们会提供[这些测试数据](http://www.bgc.se/Default____8758.aspx)。

* * *

最终答案：

```
echo 'FF365893D899291C3BF505FB3175E880<br />';
$algo = 'sha256'; $file = 'file.txt'; $key = '1234567890abcdef1234567890abcdef';
echo substr( strtoupper( hash_hmac_file( $algo, $file, pack("H*" , $key) ) ), 0, 32 ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T10:30:15.677

您的密钥需要从十六进制转换为二进制数据。添加：

```
$key = hex2bin($key); 
```

*并*确保您`file.txt`不包含任何尾随字符，如换行符或回车符。

 *编辑：函数[hex2bin](http://php.net/manual/en/function.hex2bin.php)是在 PHP 5.4.0 中引入的。对于旧版本，您可以改用

```
$key = pack("H*" , $key); 
```*

# visual-studio - 编译速度 Visual Studio

> ID：14316591
> 
> 赞同：0
> 
> 时间：2013-01-14T10:20:16.310
> 
> 标签：visual-studio, compilation

我想知道与只有一个项目的解决方案（具有相同数量的类，例如 200 个类）相比，Visual Studio 如何处理编译一个拆分为子项目的解决方案。哪个编译速度更快（或者它们都相同）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:27:10.680

我认为通过编译将 uf 拆分为子项目的解决方案会更快。如果您没有更改其他项目之一，它可以使用未更改子项目的已编译 dll。如果所有类都位于一个项目中，则每次构建时都必须编译整个项目...

但在我看来，比构建速度更重要的是将解决方案拆分为子项目的架构优势。如果您有多个组件可以用作独立程序或另一个解决方案中的库，那么拆分您的项目是完全有意义的。这将是我将解决方案拆分为子项目的方法！编译速度只是一个积极的副作用。

查看此链接以优化构建速度：http: [//blogs.microsoft.co.il/blogs/arik/archive/2011/05/17/speed-up-visual-studio-builds.aspx](http://blogs.microsoft.co.il/blogs/arik/archive/2011/05/17/speed-up-visual-studio-builds.aspx)

在将解决方案拆分为多个项目时还有一个优势：编译器能够并行编译——即使这些项目之间存在一些依赖关系。所以总而言之，它会更快，我会说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:24:57.583

一般很难回答 - 这取决于许多因素，包括 VS 版本。预编译的头文件可能会或可能不会被共享；整体程序优化实际上是整体链接单元优化；链接 DLL 发生在运行时，因此不计入 Visual Studio 构建时间等。

# c# - 在 C#.net 中为 datagridview 行提供背景图像

> ID：14316592
> 
> 赞同：0
> 
> 时间：2013-01-14T10:20:22.767
> 
> 标签：c#, datagridview, background-image

我想将图像设置为 datagridview 的背景，但我找不到执行此操作的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:50:54.013

这应该更接近您的需要

```
Image image;

private void Form1_Load(object sender, EventArgs e)
{
    image = Image.FromFile(@"D:\x.jpg");
}

private void dataGridView1_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
    DataGridViewRow row = dataGridView1.Rows[e.RowIndex];
    row.DefaultCellStyle.BackColor = Color.Transparent;
}

private void dataGridView1_RowPrePaint(object sender, DataGridViewRowPrePaintEventArgs e)
{
    e.Graphics.DrawImage(image, e.RowBounds);
} 
```

当然，您可以根据行索引交替图像。如果还不够，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:26:15.100

您可以使用 datagridview 的绘制事件。像这样：

```
 Image bgImage;

    public Form1()
    {
        InitializeComponent();
        bgImage = Image.FromFile(@"C:\Users\Public\Pictures\Sample Pictures\Koala.jpg");
    }

    private void dataGridView1_Paint(object sender, PaintEventArgs e)
    {
        e.Graphics.DrawImageUnscaled(bgImage, new Point(0, 0));
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T10:26:23.180

您可以给它一个 CSS 类或修改主题的行 Css 类（如果有的话），以获得一个背景属性：

> .rowClass { background: url('your file here') 左上角无重复；}

# c# - 像枚举这样的结构

> ID：14316593
> 
> 赞同：0
> 
> 时间：2013-01-14T10:20:24.733
> 
> 标签：c#, struct, enums

> **可能重复：**
> [C# .NET 3.5+ 中属性和字段之间的区别](https://stackoverflow.com/questions/653536/difference-between-property-and-field-in-c-sharp-net-3-5)

示例代码：

```
public struct State
{
    private readonly byte state;

    private State (byte pState)
    {
        state = pState;
    }

    // property...

    public static State StateOne
    {
        get
        {
            return new State (1);
        }
    }

    // or...

    public static readonly State StateOne = new State (1);
} 
```

我应该使用属性还是字段？在此示例中，性能无关紧要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:23:06.480

除非您将该属性用作新实例的工厂，否则您应该将返回的“new State(1)”缓存在一个私有成员中，并在第一次调用初始化它之后返回该成员。（单身人士）

* * *

进一步澄清：

您编写的不同之处在于，该字段将始终指向同一个实例，而该属性始终创建一个新实例并返回它，因此该属性不断创建新实例，这可能不是您想要的，并且可能是性能问题视情况而定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T10:23:20.753

在我看来，它是字段，因为它是您需要的最低限度，而且它可能更具可读性。但实际上，考虑到按值传递的语义，在这个结构中呈现的这种微不足道的情况下并没有实际的区别。

特别是 - 具有缓存本地字段的属性参数（如此处的另一个答案））基于引用相等是完全无效的，因为根据它们的定义，值类型永远不能是引用相等的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T10:33:05.783

我想在这里使用字段而不是属性。看看 MS 的人是如何做类似工作的：

```
//String.cs
public int Length { get; }   //string has a property named Length
public static string Empty = ...    //string has a public field named Empty 
```

Try to think "string has a public *property* called *Empty*", No, *Empty* is not a property of a string. Things are almost the same in your case. "State has a property called *One*" sounds really weired.

# android - Jsoup：选择类名末尾包含空格的行

> ID：14316594
> 
> 赞同：2
> 
> 时间：2013-01-14T10:20:34.640
> 
> 标签：android, css-selectors, whitespace, jsoup

我是新手，`Jsoup`搜索了很长时间都找不到解决方案。我有一个表，其中最后`tr`有一个带有空格的类名。

```
<table class="table_one">
<tr class="no_background ">
<td>
<b> Text comes here</b>
</td>
<td> and here... </td>
</tr></table> 
```

现在，我想访问文本。当我说

```
Select("table[class=tag_std] tr[class=bgnd_1 ]") 
```

它返回`empty`列表。我如何获得价值

```
"Text comes here and here...". 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:36:25.687

我认为您需要将标签放在标签中，而不是 .

```
<table class="table_one">
<tr class="no_background ">
    <td>
        <b> Text comes here</b>
    </td>
</tr>
</table> 
```

我认为你需要这个，根据你的具体情况。这是一个简单的示例供您测试。

```
public static void main(String[] args) {
    File input = new File("/Users/hugo/Desktop/test.html");
    Document doc = null;
    try {
        doc = Jsoup.parse(input, "UTF-8", "http://example.com/");
    } catch (IOException e) {
        e.printStackTrace();
    }

    Elements links = doc.select("table.table_one tr.no_background td");
    for (Element element : links) {
        System.out.println(element.text());
    }
} 
```

输出：

```
Text comes here
and here. 
```

..

# .net - SQL Server OLAP 立方体（教程）

> ID：14316602
> 
> 赞同：2
> 
> 时间：2013-01-14T10:21:01.490
> 
> 标签：.net, sql-server, olap, cubes

希望这不是转发，至少我在谷歌上没有找到任何我满意的结果。

问题是我对 OLAP 连接了解不多，但在 SQL 请求方面我很不错，但我想进一步提高我的技能

什么网站，书 - 你会推荐

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T10:43:26.560

MSDN 有一组基本教程，可帮助您安装/浏览示例 OLAP 环境。

[http://msdn.microsoft.com/en-us/library/ms170208.aspx](http://msdn.microsoft.com/en-us/library/ms170208.aspx)

这些突出了 SSAS 项目中的不同领域。

查询方面（MDX）可以看**SQL Server Central - Stairway to MDX**系列文章：

[http://www.sqlservercentral.com/stairway/72404/](http://www.sqlservercentral.com/stairway/72404/)

# matlab - 如何使用切片在圆柱网格上绘制数据？

> ID：14316603
> 
> 赞同：1
> 
> 时间：2013-01-14T10:21:08.477
> 
> 标签：matlab, sorting, 3d, cylindrical

我在圆柱网格上输入了数据，并希望`slice`在 MATLAB 中使用它们来绘制它们。为此，我首先使用 . 将参考坐标转换为笛卡尔坐标`pol2cart`。

```
r   = linspace(1,4,4);
phi = linspace(0,2*pi,10);
z   = linspace(1,3,3);

[rmesh,phimesh,zmesh]=meshgrid(r,phi,z)
[xmesh,ymesh,zmesh]=pol2cart(phimesh,rmesh,zmesh) 
```

当我`slice`现在使用（例如`slice(xmesh,ymesh,zmesh,ones(10,4,3),2,2,2)`）时，会引发错误，因为坐标矩阵的排序不正确（`Input grid is not a valid MESHGRID.`）

如何修改矩阵以获得可绘制的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:22:57.720

遗憾的是，您不能将柱坐标中给出的数据用于切片。

来自 matlab 文档：

```
slice(X,Y,Z,V,sx,sy,sz) draws slices of the volume V. X, Y, and Z are three-dimensional arrays specifying the coordinates for V.
X, Y, and Z must be monotonic and orthogonally spaced (as if produced by the function meshgrid). 
```

你能做的就是使用`griddata`.

这是一个例子：

```
 r = linspace(1,4,4);
    phi = linspace(0,2*pi,10);
    z   = linspace(1,3,3);
    data = repmat(linspace(1,0,4),[10,1,3]);

    [rmesh,phimesh,zmesh]=meshgrid(r,phi,z);
    [xmesh,ymesh,zmesh]=pol2cart(phimesh,rmesh,zmesh);

    [xg, yg, zg] = meshgrid(linspace(-4,4,50),linspace(-4,4,50),linspace(1,3,3));
    gdata = griddata(xmesh,ymesh,zmesh,data,xg,yg,zg);

    slice(xg,yg,zg,gdata,2,2,2) 
```

根据您拥有的数据类型以及不显示“超出范围”的数据的重要性（意思是，按照您的示例：半径小于 1 或大于 4），您可以添加以下内容以隐藏不在您感兴趣的领域：

```
rg = sqrt(xg.^2+yg.^2);
gdataNaN = gdata;
gdataNaN(rg<min(r)) = NaN;
gdataNaN(rg>max(r)) = NaN;

figure
slice(xg,yg,zg,gdataNaN,2,2,2) 
```

如果这还不够，您将不得不实现自己的`slice`方法（基本上使用 griddata 方法）或查看 matlab 中央文件交换。我尚未对其进行测试，但分析 MRI 图像的工具可能会起到作用（例如，检查：http: [//www.mathworks.com/matlabcentral/fileexchange/27983-3d-slicer](http://www.mathworks.com/matlabcentral/fileexchange/27983-3d-slicer)）。

编辑： http: [//www.mathworks.com/matlabcentral/fileexchange/30147-smartslice-and-igslice](http://www.mathworks.com/matlabcentral/fileexchange/30147-smartslice-and-igslice) 这似乎是由有同样问题的人开发的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:41:03.780

你可以在笛卡尔坐标上调用 meshgrid 吗？

```
r   = linspace(1,4,4);
phi = linspace(0,2*pi,10);
z   = linspace(1,3,3);

[x, y] = pol2cart(r,phi);

[xmesh,ymesh,zmesh]=meshgrid(x, y, z); 
```

顺便说一句，有时您可能会发现`[ymesh,xmesh,zmesh]=meshgrid(x, y, z);`对您的应用程序更有意义。

# opengl - 这个纹理映射有什么问题？

> ID：14316604
> 
> 赞同：2
> 
> 时间：2013-01-14T10:21:19.713
> 
> 标签：opengl, textures, hud

由于openGL的纹理映射，我快要发疯了。它永远不会映射正确的东西，请看一下。

```
glEnable(GL_TEXTURE_2D);
glBindTexture(GL_TEXTURE_2D, speed.texID);
glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_DECAL);

glBegin(GL_QUADS);
    glTexCoord2f(1,0); 
    glVertex2f(210, 638);   //Top-Left
    glTexCoord2f(1,1);
    glVertex2f(210, 438);   //Top-Right
    glTexCoord2f(0,1); 
    glVertex2f(10, 438);    //Bottom-Right
    glTexCoord2f(0,0);
    glVertex2f(10, 638);    //Bottom-Left
glEnd();
glDisable(GL_TEXTURE_2D); 
```

此代码输出图像后变成这样： ![在此处输入图像描述](../Images/f027c21d6fe106375fcf7b9caba0aaf4.png)

但我希望它是这样的： ![在此处输入图像描述](../Images/18b523d60cd144a9e7ecc16d9a89c1b2.png)

当我将纹理更改为其他内容时，它会正确映射它，但显然不是这个。为什么你认为这可能是？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T10:44:24.603

如果其他纹理有效，则该纹理可能是奇数大小或不同格式，并且已在未观察到一些必要填充的情况下加载。

纹理格式通常需要偶数个像素，或者四舍五入到其他倍数。

纹理的 45 度倾斜也表明了这种问题，因为它通常是由于管道中某个点的每一行都读取（或跳过）一个额外的像素造成的。

可能的解决方法是：

*   更改纹理的尺寸，以便没有填充。
*   更改纹理的加载，使填充与 GL 期望的一致
*   告诉 GL 你的纹理是如何打包的，使用`glPixelStorei()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T10:53:38.177

如果您使用的纹理不能对齐到 4 个字节，您必须关心一些事情，其中​​之一是设置正确的像素包和解包对齐：

```
glPixelStorei(GL_PACK_ALIGNMENT, 1);
glPixelStorei(GL_UNPACK_ALIGNMENT, 1); 
```

有关更多信息，请参见[此处。](http://www.opengl.org/sdk/docs/man/xhtml/glPixelStore.xml)

# c# - 为什么在 switch case 语句中只允许有限的类型

> ID：14316605
> 
> 赞同：7
> 
> 时间：2013-01-14T10:21:32.443
> 
> 标签：c#, java, c++, switch-statement

`Java`, `c++`,`c`等语言`c#`允许`integral`在 switch-case 语句中使用类型或计算为整数类型的表达式。[`string`在某些语言中允许使用文字和其他一些类型]

为什么我们需要只使用`integral`类型或一些有限数量的类型而不是类型`double`，例如`float`？是因为某种**优化**还是只是为了**简单**？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-14T10:26:31.853

首先，Java 7 允许切换字符串值……C# 也是如此。（在 Java 中，你*不能*打开`long`...谢谢你提醒我彼得。）

`float`但是，不允许打开和打开的原因`double`很可能是舍入错误和浮点数的不精确表示的阴险影响会使使用浮点开关的代码非常容易出错......或者需要特殊的语法来表达错误值的界限`case`。

现在，如果有很多好的用例来切换浮点值，那么人们会期望*某些*语言会支持这一点。但据我所知，没有主流编程语言曾经走这条路。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-14T10:42:30.387

在 C++ 的情况下，这是因为`switch`/`case`不应该复制`if`. 如果它应该提供一种在代码允许的情况下获得有效“跳转表”的方法。

# css - 如何创建一个完整的 CSS 盒子阴影，而不是剪辑

> ID：14316606
> 
> 赞同：2
> 
> 时间：2013-01-14T10:21:32.097
> 
> 标签：css

尝试使用 CSS3 box-shadow 属性，我想知道您是否可以阻止对象投射它来剪切阴影。在下面的代码中，投射阴影的 DIV 是不可见的，但阴影仍然被裁剪。有没有办法在 CSS 中完成这项工作？也可能在 JavaScript / JQuery 中？或者是将 box-shadow 偏移量设置为大于 DIV 并重新定位阴影的唯一方法（不是很优雅）。

```
div#shadow
{
    position: absolute;
    background-color: transparent;
    top: 100px;     
    left: 100px;
    width: 300px;
    height: 200px;
    box-shadow: 100px 100px 100px gray;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:42:35.590

我不喜欢页面外的位置元素，但这可能是一个好方法吗？

```
div#shadow {
    position: absolute;
    background-color: transparent;
    top: 100px;     
    left: -9999px;
    width: 300px;
    height: 200px;
    box-shadow: 10199px 100px 100px gray;
} 
```

给`left`属性一个大的负值，然后给`box-shadow`的左属性一个使用这个公式计算的数字：

```
0 - actual negative left + desired left + original box-shadow's left 
```

因此，对于您上面的示例，它将是：

```
0 - -9999 + 100 + 100 = 10199 
```

你可以看到它在这个[jsfiddle](http://jsfiddle.net/cchana/GcKpP/)中工作。

我能看到的唯一另一种方法是匹配and`border-radius`以便它匹配阴影。在这种情况下会是，但我根本无法匹配，当然它会随着不同的颜色或图像而变化。`background-colour``div``border-radius``100px``background-color`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-14T10:45:59.520

如果您使用`opacity`而不是透明背景颜色，它应该可以工作。

# mysql - 上传数据库时出错

> ID：14316607
> 
> 赞同：0
> 
> 时间：2013-01-14T10:21:33.190
> 
> 标签：mysql, sql, localhost

我已经备份了我的 Wordpress 网站，我正在尝试使用 XAMPP 运行它。我已经复制了文件，但是当我使用导入选项导入数据库时​​，我得到了执行 0 个查询的结果。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:16:56.487

这个问题有一些原因，你能告诉我们更多信息吗？

我建议：您的转储（导出）非常大--> 如果您使用 PHPMyadmin 创建转储，则网络服务器上的超时会很小--> 损坏的文件。如果导出为 zip 文件，请打开文件并检查 zip 包中的 sql-dump 文件。

解决方案尽可能增加脚本超时时间或单独导出表。有时只导出 db 的结构，导入它，然后导出并将表作为 csv 文件导入会更快。

# jquery - 首次访问时，AnythingSlider 加载缓慢

> ID：14316608
> 
> 赞同：0
> 
> 时间：2013-01-14T10:21:34.127
> 
> 标签：jquery, silverstripe, anythingslider

我真的很难找到解决这个问题的方法，或者了解类似问题的任何修复方法。

在第一次访问以下域时，我似乎遇到了一个问题，其中样式表已加载，但未加载 AnythingSlider 脚本。

我敢肯定有人会立即知道出了什么问题（我希望）。

[http://www.exeterdentalcentre.co.uk/](http://www.exeterdentalcentre.co.uk/)

请注意，该网站是建立在 SilverStripe 上的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:42:56.613

我不认为银条不是这里需要强调的东西。这是一个基于浏览器的问题。

使用 Mac firefox 和 Safari 进行了快速测试，它们都是最新版本：芬兰没有问题。

一切似乎都是为了 html 虎钳（根据 w3c 验证器的小问题）：在我的意见中，css 和 js 包含顺序是“事实上的”。

您遇到问题的浏览器是什么？

:O

# android - AutoCompleteTextView 不显示文本栏

> ID：14316610
> 
> 赞同：0
> 
> 时间：2013-01-14T10:21:55.240
> 
> 标签：android, focus, autocompletetextview

我的布局中有一个 AutoCompleteTextView，问题是虽然它工作得很好，但没有显示“文本栏”（我真的不知道它是如何被称为“|”），所以很难知道在哪里焦点。你知道我该如何解决吗？

```
<AutoCompleteTextView android:id="@+id/a_addproduct_producto_text" 
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:singleLine="true" android:imeOptions="actionNext"
                android:background="@android:drawable/editbox_background_normal" 
                android:cursorVisible="true"
                android:textColor="@android:color/black"
                android:textSize="17sp"/> 
```

# android - 循环延迟任务

> ID：14316613
> 
> 赞同：0
> 
> 时间：2013-01-14T10:22:08.413
> 
> 标签：android, handler, delay, runnable

我有一个代码可以多次循环给定方法，但是 for 循环是在一次等待中执行的。也就是说，对于给定的代码：

```
for(int j=3;j>=1; j--)
{
final int k=j;
new Handler().postDelayed(new Runnable(){
    @Override
    public void run() {
        randomMethod(k);
        Toast.makeText(someService.this, "works!", Toast.LENGTH_SHORT).show();
    }
}, 10000);
} 
```

代码在 10 秒内完全执行，而不是所需的 30 秒。执行 run() 后，for 循环不应该等待延迟完成吗？

我该如何纠正？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:53:52.327

```
int REFRESH_INTERVAL = 10 * 1000;
int counter = 3;
...

Timer timer = new Timer();
timer.scheduleAtFixedRate(new MyTimerTask(), 0, REFRESH_INTERVAL);
...
private class MyTimerTask extends TimerTask{
    public void run() {
       randomMethod(counter--);
       Toast.makeText(someService.this, "works!", Toast.LENGTH_SHORT).show();
    }
} 
```

`Handler`我认为， and中没有必要`postDelayed()`，因为`Timer`做这项工作

# sql-server - 更新列和唯一键违规

> ID：14316618
> 
> 赞同：0
> 
> 时间：2013-01-14T10:22:31.907
> 
> 标签：sql-server

我有一张桌子，我需要清理一列。列中的数字应如下所示：`'123 4567'`。但是许多数字都有这样的下划线：`123_4567`，我需要摆脱它。我可以使用下面的更新代码来做到这一点。

唯一的问题是当某些列已经存在或不带下划线时。然后我得到一个唯一密钥违规并且“代码”被终止。我知道，`IGNORE_DUP_KEY=ON`但它不适用于我的更新声明。我也做了一个`TRY/Catch`没有成功。

开始`IGNORE_DUP_KEY=ON`工作对我来说似乎是最好的选择。然后它不会在找到重复键时终止代码，我可以更改脚本以添加`:2`到其余被忽略的行中。

```
UPDATE Table  
    SET [Name] = REPLACE([Name], '_', ' ')  
    WHERE Substring([Name],4,1)='_' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:04:13.187

这是一次性的工作，对吧？我会这样做，直接在违反唯一密钥的地方添加“：2”。

```
UPDATE T SET 
    T.[Name] = 
        REPLACE(T.[Name], '_', ' ')  +
        CASE WHEN T2.NAME IS NOT NULL THEN ':2' ELSE '' END
FROM 
    Table T
LEFT JOIN 
    Table T2 ON T2.[Name] = REPLACE(T.[Name], '_', ' ')  
WHERE 
    Substring(T.[Name],4,1)='_' 
```

# vector - Java3D：我试图将 4 个立方体并排放置。为什么我只得到一个立方体？

> ID：14316619
> 
> 赞同：0
> 
> 时间：2013-01-14T10:22:33.400
> 
> 标签：vector, transformation, cube, java-3d

我基本上是在尝试通过 Java3D 创建一个形状，屏幕上只出现一个立方体。我想把立方体放在一行或一列中，但我就是不知道我做错了什么。显然这只是部分代码，只是创建立方体的方法。

私人无效createCubes（）{

```
 Cuboid box = new Cuboid(0.03f, 0.03f, 0.03f, cubeAppearance);
                Cuboid box2 = new Cuboid(0.03f, 0.03f, 0.03f, cubeAppearance);
                Cuboid box3 = new Cuboid(0.03f, 0.03f, 0.03f, cubeAppearance);
                Cuboid box4 = new Cuboid(0.03f, 0.03f, 0.03f, cubeAppearance);

                Vector3f vector = new Vector3f(0f, .3f, 0f);

                TransformGroup tg = new TransformGroup();
                Transform3D transform = new Transform3D();
                transform.setTranslation(vector);

                tg.addChild(box);
                tg.setTransform(transform);
                tg.addChild(box2);
                tg.setTransform(transform);
                tg.addChild(box3);
                tg.setTransform(transform);
                tg.addChild(box4);
                tg.setTransform(transform);

                rootGroup.addChild(tg); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:32:15.223

为什么您认为您的代码应该将多维数据集放在一行/列中？它们都具有相同的坐标、大小、变换并属于同一个变换组...您必须为要单独放置的每个框创建一个新的变换和变换组。

像这样的东西应该可以解决 4 个盒子：

```
TransformGroup getNewBox(float hpos) {
  Cuboid box = new Cuboid(0.03f, 0.03f, 0.03f, cubeAppearance);
  TransformGroup tg = new TransformGroup();
  Transform3D transform = new Transform3D();
  Vector3f vector = new Vector3f(0f, hposf, 0f);
  transform.setTranslation(vector);
  tg.addChild(box);
  tg.setTransform(transform);
  return tg;
}

{
  rootGroup.addChild(getNewBox(0f);
  rootGroup.addChild(getNewBox(0.3f);
  rootGroup.addChild(getNewBox(0.6f);
  rootGroup.addChild(getNewBox(0.9f);
} 
```

# ios - 如何在我的 iOS 应用程序中设置基本的灰色背景？

> ID：14316620
> 
> 赞同：0
> 
> 时间：2013-01-14T10:22:38.377
> 
> 标签：ios, ios6

> **可能重复：**
> [如何让细条纹背景显示？](https://stackoverflow.com/questions/1062453/how-can-i-get-the-pinstripe-background-to-show)

我喜欢默认 iOS 应用程序中的背景 - 带有垂直线条的灰色背景。但我在任何视图的背景设置中都找不到它。它只是一个图像吗？或者有什么方法可以访问它以在我的应用程序中使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T10:26:47.137

我相信你正在寻找这个：

```
+ (UIColor *)groupTableViewBackgroundColor 
```

更多信息在这里：

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIColor_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIColor_Class/Reference/Reference.html)

（见**系统颜色**）

示例用法：

```
myView.backgroundColor = [UIColor groupTableViewBackgroundColor]; 
```

编辑：

好的，根据 UIInterface.h 文件，Apple 似乎已弃用上述调用：

> // 分组样式表视图背景不能再用简单的颜色来表示。
> 
> // 如果你想在自己的视图中有一个看起来像表格视图背景的背景，
> 
> // 然后你应该创建一个空的 table view 并将它放在你的内容后面。

```
+ (UIColor *)groupTableViewBackgroundColor; // This method will be deprecated during the 6.0 seed program 
```

看起来你必须按照苹果在上面评论中的建议去做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T10:32:13.560

如果您使用 nib (xib) 文件来创建视图，则将主视图背景颜色设置为***滚动视图纹理背景颜色。***

希望这是您正在寻找的。

享受编码:)

# playframework - 未找到 Play 框架列中的 Ebean 查询

> ID：14316625
> 
> 赞同：0
> 
> 时间：2013-01-14T10:23:00.440
> 
> 标签：playframework

我得到了代码

```
public static List <Post> getPostForTopic(String topicName) {
    List <Post> list = find.where().eq("topic_name",topicName).findList();
    return list;
} 
```

SQL 演进

```
# --- Created by Ebean DDL
# To stop Ebean DDL generation, remove this comment and start using Evolutions

# --- !Ups

create table post (
text                      varchar(255))
;

create table topic (
topic_name                varchar(255) not null,
constraint pk_topic primary key (topic_name))
;

create sequence topic_seq;

# --- !Downs

SET REFERENTIAL_INTEGRITY FALSE;

drop table if exists post;

drop table if exists topic;

SET REFERENTIAL_INTEGRITY TRUE;

drop sequence if exists topic_seq; 
```

当我运行它时，我有执行异常：

```
[PersistenceException: Query threw SQLException:Столбец "TOPIC_NAME" не найден Column "TOPIC_NAME" not found; SQL statement: select t0.text c0 from post t0 where topic_name = ? [42122-158] Bind values:[null] Query was: select t0.text c0 from post t0 where topic_name = ? ] 
```

我和当我在我的 h2 数据库控制台中键入查询时，例如“Select * from topic”，我得到的结果是没有表“TOPIC”。请帮我找出错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:28:22.463

我认为你使用了错误的取景器。

我敢打赌，您创建的`find`变量看起来像这样（我实际上不知道您使用什么类型作为主键）：

```
 public static Finder<XXX,Post> find = new Finder<XXX,Post>(
    XXX.class, Post.class
  ); 
```

而你应该使用：

```
 public static Finder<String,Topic> find = new Finder<String,Topic>(
   String.class, Topic.class
 ); 
```

# javascript - 在 JavaScript 中的函数之间传递变量

> ID：14316628
> 
> 赞同：-3
> 
> 时间：2013-01-14T10:23:03.067
> 
> 标签：javascript

如何`word1`将第一个函数中的变量传递给纯 JavaScript 中的第二个函数？

```
function functionOne()
{
    var word1 = "dog" ;
}

function functionTwo()
{
    var word2= word1;
} 
```

我已经检查了 stackoverflow 中有关此主题的其他问题，但没有得到简单的答案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T10:24:08.803

使用参数：

```
function functionOne() {
    var word1 = "dog";
    functionTwo(word1);
}

function functionTwo(word1) {
    var word2 = word1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T10:25:19.640

**如下创建公共变量**可解决您的问题

```
var _common;

function functionOne()
{
    var word1 = "dog" ;
   _common= word1;
}

function functionTwo()
{
    var word2= _common;
} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-14T10:29:30.883

我假设您需要一个全局声明，`word1`因为您不允许将任何参数传递到`functionTwo`.

SO这里有很多资源，下次请做更彻底的搜索。

[在 Javascript 中的函数之间传递变量](https://stackoverflow.com/search?q=passing%20variables%20functions%20javascript%20%5Bjavascript%5D)

我不打算在这里讨论全局变量的优缺点。

# javascript - linux和windows之间的Javascript执行顺序区别

> ID：14316632
> 
> 赞同：1
> 
> 时间：2013-01-14T10:23:17.290
> 
> 标签：javascript, ajax, jakarta-ee, dojo

```
function show_SelectRateItems() {
                document.getElementsByName("buttonval")[0].value="No";
                dojo.event.topic.publish("show_RateItems");
                setTimeout(show_SelectRateItems, 500);
                dojo.event.topic.publish("show_OhItems");
                setTimeout(show_SelectRateItems, 500);
                dojo.event.topic.publish("show_TaxItems");
                return false;
            } 
```

嗨，上面提到的是我执行的 javascript 方法，以从 3 种不同的方法获取单个操作的输出（更改下拉值）。这是Java Web 应用程序。我在这里使用ajax。问题是这在 Windows 操作系统中执行得很好，并让我输出显示在 3 个不同的位置。但是当我在 Ubuntu OS 中托管相同的战争文件时。最后一个没有给我输出。而是抛出错误！

# php - 查询使 2 个得分相等的团队

> ID：14316636
> 
> 赞同：1
> 
> 时间：2013-01-14T10:23:28.863
> 
> 标签：php, mysql, database, combinations

我有一个桌子女巫，看起来像这样：

```
--------------------------------------
| 索引 | 球员 | 日期 | 分数 |
--------------------------------------
| 1 | 一月 | 2013-01-13 | 5 |
--------------------------------------
| 2 | 彼得| 2013-01-13 | 6 |
--------------------------------------
| 3 | 克拉斯 | 2013-01-13 | 5 |
--------------------------------------
| 4 | 基斯 | 2013-01-13 | 7 |
--------------------------------------
| 5 | 威廉| 2013-01-13 | 8 |
--------------------------------------
| 6 | 约翰 | 2013-01-13 | 4 |
--------------------------------------

```

现在我想做一些棘手的事情，为了像 2013-01-14 的比赛那样打下一场比赛，我们想让 2 支球队得分相等。

每个日期期间有 12 名球员，因此 2013 年 1 月 13 日是 12 名球员，而 2013 年 1 月 14 日仍然有相同的球员。

他们必须分成 2 支球队，所以 12 / 2 = 6。每支球队有 6 人。现在这不是问题，问题在于两支球队的总分必须相等或接近。

如果 12 名球员的所有分数都是 77，那么 2 支球队的总分数必须几乎相等，这样 77 / 2 = 38,5

> 球队 1 - 球员 6 - 总分 37
> 
> 队 2 - 球员 6 - 总分 40

最后查询输出必须是这样的：

```
-----------------------------------------------------------
| 索引 | 球员 | 日期 | 分数 | 团队 |
-----------------------------------------------------------
| 1 | 一月 | 2013-01-13 | 5 | 1 |
-----------------------------------------------------------
| 2 | 彼得| 2013-01-13 | 6 | 1 |
-----------------------------------------------------------
| 3 | 克拉斯 | 2013-01-13 | 8 | 1 |
-----------------------------------------------------------
| 4 | 基斯 | 2013-01-13 | 7 | 1 |
-----------------------------------------------------------
| 5 | 威廉| 2013-01-13 | 5 | 1 |
-----------------------------------------------------------
| 6 | 约翰 | 2013-01-13 | 6 | 1 |
-----------------------------------------------------------
| 7 | 格瑞特 | 2013-01-13 | 6 | 2 |
-----------------------------------------------------------
| 8 | 马杰| 2013-01-13 | 6 | 2 |
-----------------------------------------------------------
| 9 | 莎拉 | 2013-01-13 | 8 | 2 |
-----------------------------------------------------------
| 10 | 埃尔斯 | 2013-01-13 | 7 | 2 |
-----------------------------------------------------------
| 11 | 艾伦 | 2013-01-13 | 5 | 2 |
-----------------------------------------------------------
| 12 | 史蒂文 | 2013-01-13 | 8 | 2 |
-----------------------------------------------------------

```

和

```
-----------------------------------------------------------
| 团队 | 分数 | 日期 | 球员 |
-----------------------------------------------------------
| 团队 1 | 37 | 2013-01-13 | 6 |
-----------------------------------------------------------
| 团队 2 | 40 | 2013-01-13 | 6 |
-----------------------------------------------------------

```

在#Danack 的一些启发下，我做了这个：

```
$difference = 10;
$team_smnstlln = array();
for($q=0; $q<1000; $q++){

    $players = array();

    $team_smnstlln[$q] = array(
                                'team1' => array(),
                                'team2' => array(),
                                'total' => 0
                              );

    $count1 = 0;
    for($w=0; $w<6; $w++){
        $player = pick_random(true);
        $score1 = $team_smnstlln[$q]['team1'][$player] = $data[$player]['score'];
        $count1 = $count1 + $score1;
    }

    $count2 = 0;
    for($w=6; $w<12; $w++){
        $player = pick_random(true);
        $score2 = $team_smnstlln[$q]['team2'][$player] = $data[$player]['score'];
        $count2 = $count2 + $score2;
    }

    if($count1 > $count2){
        $total = $count1 - $count2;
    }
    elseif($count2 > $count1){
        $total = $count2 - $count1;
    }
    else{
        $total = 0;
    }

    $team_smnstlln[$q]['total'] = $total;

    if($team_smnstlln[$q]['total'] == 0){
        $difference = 0;
        $winner = $q;
        break;
    }
    elseif($team_smnstlln[$q]['total'] < $difference){
        $difference = $team_smnstlln[$q]['total'];
        $winner = $q;
    }

}

echo "Kleinst gekozen set met score verschil van $difference punten. array $winner is gekozen<br>";

$team1 = $team_smnstlln[$winner]['team1'];
$team2 = $team_smnstlln[$winner]['team2'];

print_r($team1);
print_r($team2);

// random player picker

function pick_random($gonogo){

    global $players;

    $go = true;
    $total_players = 11;

    while($go){

        $player = rand(0, $total_players);

        if(!in_array($player, $players)){
            $players[] = $player;
            $go = false;
        }

    }

    return $player;

} 
```

此代码运行 1000 个不同的团队设置。当得分差达到 0 时，它将停止并与最好的平等球队比赛相呼应。否则，当没有 0 差异时，它将返回最低结果

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T11:06:26.567

正如moonwave99 所说，在PHP 中执行此操作比在SQL 中执行此操作要好得多。

问题是这是一个很难解决的问题。您可以通过重新提出您的问题来看到这一点：

“一个队的6名球员和另一队的6名球员的什么组合，得分差异最小？”

从 12 名球员中挑选 6 名球员的组合数为 (12! / 6!) 或 665,280 种组合，每种组合都需要计算得分差异。

您需要检查所有可能的组合，并计算每个组合的分数以找到“最佳”组合。

```
//An array to record whether each player has already been selected for a combination
$playersChosen = array();

//Initialise the array
for($x=0 ; $x<12 ; $x++){
    $playersChosen[$x] = FALSE;
}

//Need to store lowest score somewhere - and have a flag for the first calculation
$lowestScore = FALSE;

chooseAnotherPlayer(6, 0);

//$GLOBALS['bestCombination'] - will now contain the best combination of players.

//Recursive function that either:
//goes through each player in turn and then calls itself or 
//calculates the 'score' when all the players are chosen for one team
//$playersToChoose - how many players left to choose.
//$minimumPlayerNumber - index to start searching for players not yet chosen - as the choice,  3 + 5 is identical to 5 + 3
function chooseAnotherPlayer($playersToChoose, $minimumPlayerNumber){

    //We have 6 pl
    if($playersToChoose == 0){
        //Calculate Score from which players are selected in $GLOBALS['playersChosen']
        if($lowestScore === FALSE ||
            $score < $lowestScore){
            $GLOBALS['bestCombination'] = $GLOBALS['playersChosen'];  //Arrays are copied by value, not reference
//So this saves a snapshot of the best selection.
        }
        return;
    }

    //Go through each of the players
    for($x=$minimumPlayerNumber ; $x<12; $x++){
        //Select them if they're available
        $playerAvailable = selectPlayer($x);
        if($playerAvailable == TRUE){
                    //Pick another player
            chooseAnotherPlayer($playersToChose - 1, $x + 1);
                    //Release this player, so he's available for other combinations
            unselectPlayer($x);
        }
    }
}

function selectPlayer($x){
    if($GLOBALS['playersChosen'][$x] == TRUE){
        //Player has already been selected in this combination.
        return FALSE;
    }

    return TRUE;
} 
```

如果您不介意花几秒钟来处理该代码将完全解决您的问题。但是，如果您需要快速，最好随机选择团队，评估“分数”并进行足够的迭代以获得合理的结果。

```
$playersChosen = array();

resetArray();

$playersToChose = 6;
$lowestScore = FALSE;

for($n=0 ; $n<10000 ; $n++){
    chooseAnotherPlayers(6);
    resetArray();
}

function chooseAnotherPlayer($playersToChoose){

    if($playersToChoose == 0){
        //Calculate Score from which players are selected in $GLOBALS['playersChosen']
        if($lowestScore === FALSE ||
            $score < $lowestScore){
            $GLOBALS['bestCombination'] = $GLOBALS['playersChosen'];
            return;
        }
    }

    selectPlayerAtRandom($x);
    chooseAnotherPlayer($playersToChose - 1);
}

function selectPlayer($x){

    $playerSelected = FALSE;

    while($playerSelected == FALSE){

        $x = rand(0, 12 - 1);

        if($GLOBALS['playersChosen'][$x] == FALSE){
            $GLOBALS['playersChosen'][$x] = TRUE;
            return $x;
        }    
    }

}

function resetArray(){
    for($x=0 ; $x<12 ; $x++){
        $GLOBALS['playersChosen'][$x] = FALSE;
    }
} 
```

除非您需要让团队精确匹配，否则即使只涵盖了一小部分不同组合，由于标准差和分布背后的数学，这可能会给您非常接近的结果。

您可以通过“经验法则”确定可接受的总分差是多少，然后搜索直到找到满足该标准的玩家组合或运行最大搜索时间（可能生成一个提醒搜索超时，并且匹配不均匀）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:42:55.927

这在 SQL 中很容易做到，并且在数据库中做到这一点有一定的优势——特别是，数据库可以利用并行性。以下是其中一个团队的 6 名团队成员。其余的应该很容易弄清楚：

```
select t1.index, t2.index, t3.index, t4.index, t5.index, t6.index,
       (t1.score+t2.score+t3.score+t4.score+t5.score+t6.score) as TeamScore
from t t1 join
     t t2
     on t1.index < t2.index join
     t t3
     on t2.index < t3.index join
     t t4
     on t3.index < t4.index join
     t t5
     on t4.index < t5.index join
     t t6
     on t5.index < t6.index cross join
     (select cast(sum(score)/2 as integer) as score from t) as Half
where Half.Score - TeamScore in (0, 1)
order by (Half.score - TeamScore)
limit 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T12:53:20.127

触发以下查询，它将在团队 1 中放入 6 条记录

```
 update table1 t1 set t1.team="1" where id IN(
    SELECT y.id
      FROM (SELECT t.id,
                   t.scores,
                   (SELECT SUM(x.scores)
                      FROM table1 x
                     WHERE x.id <= t.id) AS running_total
             FROM table1 t
         ORDER BY t.id) y
     WHERE y.running_total > (select * from (SELECT SUM(scores)/2 FROM table1) as sum) 
    ORDER BY y.id); 
```

现在下面的查询会将其他 6 条记录放入团队 2

```
update table1 t1 set t1.team="2" where id NOT IN(
    SELECT y.id
      FROM (SELECT t.id,
                   t.scores,
                   (SELECT SUM(x.scores)
                      FROM table1 x
                     WHERE x.id <= t.id) AS running_total
             FROM table1 t
         ORDER BY t.id) y
     WHERE y.running_total > (select * from (SELECT SUM(scores)/2 FROM table1) as sum) 
    ORDER BY y.id); 
```

# object - 序列化字典中的时间跨度 使用 Json.NET

> ID：14316637
> 
> 赞同：2
> 
> 时间：2013-01-14T10:23:32.937
> 
> 标签：object, serialization, json.net, deserialization, timespan

我有一个实际上是字典的属性。而且我在这本字典中保留了许多类型，例如 TimeSpan、DateTimes 等。但是序列化和反序列化 TimeSpan 是错误的，它会反序列化为字符串。

```
var dict = new Dictionary<string, object>();
dict.Add("int", 15);
dict.Add("string", "foo");
dict.Add("timeSpan", new TimeSpan(1,1,1));
dict.Add("dateTime", DateTime.Now);

var settings = new JsonSerializerSettings{
    TypeNameHandling = TypeNameHandling.All,
        TypeNameAssemblyFormat = FormatterAssemblyStyle.Simple
};
var serializedObj = JsonConvert.SerializeObject(dict, Newtonsoft.Json.Formatting.Indented, settings);
var deserializedObj = (Dictionary<string, object>)JsonConvert.DeserializeObject(serializedObj, settings);
//Displaying the types with LinqPad:
deserializedObj["int"].GetType().Dump();
deserializedObj["string"].GetType().Dump();
deserializedObj["timeSpan"].GetType().Dump();
deserializedObj["dateTime"].GetType().Dump(); 
```

结果： ![对象的类型](../Images/7e6033acbf79fc5644e22d9b43967516.png)

所以对象中的 TimeSpan 不能反序列化为时间跨度。我也尝试过使用最新版本的 Json.Net。但结果是一样的。

如何为 TimeSpan 指定类型名称？或者我应该编写一个自定义转换器以及如何编写？

**编辑：**

我做了一些测试，并像这样更改了序列化的 timeSpan 属性：

```
""timeSpan"": {
    ""$type"": ""System.TimeSpan"",
    ""$value"": ""01:01:01""} 
```

而这一次 json.net 可以将其反序列化为 TimeSpan。但是我怎样才能像这样在序列化级别指定 TimeSpan 的 $type 和 $value 呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T14:04:10.233

我终于找到了解决方案。我已经为 TimeSpan 编写了一个自定义转换器。但我认为 Json.Net 中有一个错误。因为我不会为像 TimeSpan 这样的原始类型编写转换器。无论如何，这是解决方案：

```
public class TimeSpanConverter : JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        return objectType == typeof(TimeSpan);
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        writer.WriteStartObject();
        writer.WritePropertyName("$type");
        writer.WriteValue(value.GetType().FullName);
        writer.WritePropertyName("$value");
        writer.WriteValue(value);
        writer.WriteEndObject();
    }

    public override object ReadJson(JsonReader reader, Type type, object value, JsonSerializer serializer)
    {
        return value;
    }   
} 
```

也不要忘记将此转换器添加到 json 序列化程序设置。如果有任何更好的解决方案，我们将不胜感激。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:22:33.563

我也遇到了 System.Guid 作为字典中的值类型的问题。

我在 Json.NET 问题跟踪器中提交[了这个错误。](http://json.codeplex.com/workitem/23833)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T17:59:38.873

我挖了一点，找出了根本问题——它发生在任何 Json.NET`DefaultContractResolver.CanConvertToString()`返回 true 的类型上。请参阅此处： [Json.NET 字典序列化中的重大错误](https://stackoverflow.com/questions/15885571/significant-bug-in-json-net-dictionary-serialization)

不幸的是，作者目前认为它不是一个错误。我认为 Json.NET 很棒，但是这个问题吓到我了……

这是错误页面上的讨论： [https ://json.codeplex.com/workitem/23833](https://json.codeplex.com/workitem/23833)

# javascript - 冒泡自定义事件

> ID：14316641
> 
> 赞同：6
> 
> 时间：2013-01-14T10:23:36.307
> 
> 标签：javascript, jquery

事件只会冒泡，但有时需要在父元素上触发自定义事件，并使其调用其任何子元素上的所有处理程序（如果它们绑定了侦听器）。在 jQuery 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T10:23:36.307

到目前为止，我想出了这个：

```
$(startingParentElement).addBack().find('*').each(function(index,element){ 
    $(element).triggerHandler('myCustomEventName');
}); 
```

*   *[triggerHandler()](http://api.jquery.com/triggerHandler/)*确保事件不会冒泡
*   *each()*是必需的，因为*triggerHandler()*仅对匹配集合中的第一项执行
*   *[addBack()](http://api.jquery.com/addBack/)*确保绑定到*startingParentElement*的处理程序也被调用

# sass - Yeoman CSS 图像路径

> ID：14316643
> 
> 赞同：3
> 
> 时间：2013-01-14T10:23:45.103
> 
> 标签：sass, compass-sass, yeoman

当我构建我的[Yeoman](http://yeoman.io/)项目时（没什么特别的，我只使用 jQuery 和 Modernizr），没有显示与 CSS 一起使用的图像。

**我的 CSS 代码**

```
.contact {
    background:url(../icon-contact.png) no-repeat top center;
} 
```

**构建应用程序后的输出（没有区别）**

```
.contact {background:url(../icon-contact.png) no-repeat top center;} 
```

这不起作用，因为 icon-contact.png 的文件名已更改为*f91724e0.icon-contact.png*。

如何确保在缩小的 CSS 文件中更新图像路径？

* * *

**编辑：我添加了我的解决方案作为答案**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T16:13:48.290

### 更新（2014 年 2 月 24 日）

您可以通过添加`<%= yeoman.dist %>/images`到`assetsDirs`usemin 任务来解决此问题。见[http://www.github.com/yeoman/yeoman/issues/824#issuecomment-32691465](http://www.github.com/yeoman/yeoman/issues/824#issuecomment-32691465)

### 上一个答案（2013 年 3 月 4 日）

有一个名为[“usemin:css”的问题没有为](https://github.com/yeoman/yeoman/issues/824)GitHub 上的相对 url 生成正确的图像路径，关于这个特定问题。[Tak Tran](https://github.com/taktran)建立了 Yeoman 的一个分支并实施了修复。

以下是我如何删除当前的 Yeoman 安装并安装 Tak Tran 的分支版本：

```
npm uninstall yeoman -g
git clone git://github.com/taktran/yeoman.git
cd yeoman/cli
npm install -g
npm link 
```

来源：[https ://github.com/yeoman/yeoman/wiki/Additional-FAQ](https://github.com/yeoman/yeoman/wiki/Additional-FAQ)

通过这个修复，Yeoman 将重命名 CSS 中的相对图像路径，我的问题得到了解答。感谢大家的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:17:57.080

`GruntFile.js`您需要调整任务，`usemin`以便处理引用：

```
// update references in HTML/CSS to revved files
    usemin: {
      html: ['**/*.html'],
      css: ['**/*.css']
    }, 
```

检查您是否有此任务配置。

# java - 线程和同步

> ID：14316644
> 
> 赞同：0
> 
> 时间：2013-01-14T10:24:00.263
> 
> 标签：java, eclipse, thread-synchronization

我需要为以下内容创建一个 java 程序：

1.  创建一个 ArrayList 来存储员工的姓名。
2.  创建两个同步方法以将员工姓名添加到 ArrayList 并打印员工姓名。
3.  两个线程完成添加员工后，打印员工姓名。

我已经完成了以下操作，但它不起作用。它在“pr.print(X)”行给出了一个例外。有人可以帮忙吗？这不是我的作业！！！我只是想学习。

```
import java.util.*;

public class Ch5Ex2 
 {
  public static void main(String[] args) 
   {
    List<String> li = new ArrayList<String>();
    Print pri = new Print();
    pri.start();
    Insert in = new Insert(li);
    in.start();
   }
}   

class Insert extends Thread
{
 Print pr = new Print();
 List<String> x;
 public Insert(List<String> x)
  {
    this.x = x;
  }

public synchronized void run()
 {
    try
    {
      x.add("robin");
      x.add("ravi");
      x.add("raj");
      pr.print(x);
    }
    catch(Exception e)
     {
        e.printStackTrace();
     }
 }

}

class Print extends Thread
{
 List<String> y;
public void print(List<String> y)
 {
    this.y = y;
    notify();
 }

public synchronized void run()
 {
    try
    {
     wait();
     for(int i=0;i<y.size();i++)
      {
         System.out.println(y.get(i));
      }
     }
    catch(Exception e)
    {
        e.printStackTrace();
    }
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:28:53.240

我猜`pr`在课堂上是空的`Insert`，你永远不会调用构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T10:52:02.713

我认为你需要这个：

```
import java.util.*;

public class Ch5Ex2 {
    public static void main(String[] args) {
        List<String> li = new ArrayList<String>();
        Print pri = new Print();
        pri.start();
        Insert in = new Insert(li, pri);
        in.start();
    }
}

class Insert extends Thread {
    Print pr;
    List<String> x;
    public Insert(List<String> x, Print p) {
        this.x = x;
        pr = p;
    }

    public synchronized void run() {
        try{
            x.add("robin");
            x.add("ravi");
            x.add("raj");
            pr.print(x);
        } catch(Exception e) {
            e.printStackTrace();
        }
    }
}

class Print extends Thread {
    List<String> y;
    public synchronized void print(List<String> y) {
        this.y = y;
        notify();
    }

    public synchronized void run() {
        try {
            while(y == null){
                wait();
            }
            for(int i=0;i<y.size();i++) {
                System.out.println(y.get(i));
            }
        } catch(Exception e) {
            e.printStackTrace();
        }
    }
} 
```

现在这应该工作......

解决方案是：当您在创建方法中执行`wait()`此操作`Print thread`时，您必须对此进行操作。此外，如果在开始之前被调用，它将进入并且在这种情况下你不会这样做.. :)`pri object``main()``notify()``pri object``Print thread``notify()``Print thread``y``Print``non-null``Print thread``wait()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T10:33:27.627

你没有为 pr 分配内存。你只是在创建一个变量 Print pr。所以你必须得到 NPE

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T10:32:35.310

为了让您的生活更轻松，您可能会忘记应用程序级别的同步，而只需`ArrayList`通过调用`Collections#synchronizedList()`这样的方式创建同步

列出 yourArray = Collections.synchronizedList(new ArrayList())

在这种情况下，来自不同线程的所有调用都`yourArray`将被同步。除此之外，它看起来像`pr`null，因为您从不实例化它（感谢**@Nikolay Kuznetsov**）。

# javascript - 如何将javascript数组绘制到jqplot中？

> ID：14316648
> 
> 赞同：0
> 
> 时间：2013-01-14T10:24:08.067
> 
> 标签：javascript, arrays, json, graph, jqplot

我在 javascript 中有一个数组，它是从`json_encode`in派生的`jqplot`。如何在 jqplot 中绘制数组。

以下代码获取值并放入两个文本框中，创建一个 javascript 数组。我需要绘制`newArray2JS`in`x-axis`和`newArrayJS`in`y-axis`

```
<script type='text/javascript'>

function parseMe(){
    var json=document.getElementById('json_text').value;
    var obj=eval('('+json+')');
    document.createElement('u1');

    alert(obj);
    for(val in obj){
        alert(obj[val]);

        //alert(obj[val]);
        //}
        }}
        </script>
        </head>
        <body>
        <form>
        <input type='text' id='json_text1' value='<?php echo $newArrayJS; ?>' />
        <input type='text' id='json_text2' value='<?php echo $newArray2JS; ?>' />
        <input type='button' value='parse' onclick='parseMe();' />

        </form>
        <div id = 'chart1'></div> 
```

我是`jqplot`json 的新手。

我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:02:01.317

首先如果你想使用jqplot，你需要jquery。如果您的页面中有 jquery，则不需要“document.getElement ...”的东西。使用 jquery 和[jquery-selectors](http://api.jquery.com/category/selectors/)那里！

鉴于您的输入包含一个作为字符串的数组，您可以对其进行 json.parse 并将其提供给 jqplot：

```
$(document).ready(function() {
  var yourOptions = {} // fill this with your options (see jqplot docs)
    , stringArray
    , yourArray;  // this is the array you want to be plotted, which is filled onclick
  $('input[type=button]').on('click', function() {
    // the array as a string
    stringArray = $('#json_text1').val();
    try {
      // parse your string to make it a js-array
      yourArray = JSON.parse(stringArray);
      // and now jqplot it (see more info on how to use this in the jqplot-docs: http://www.jqplot.com/docs
      $.jqplot('#chart1', yourArray, yourOptions);
    } catch (e) {
      // you should do something here if your string is not parsable
    }
  });

}); 
```

这样，您可以从 html 中删除 javascript-onclick-attributes！

# dynamics-crm-2011 - 如何独立于查询获取动态营销列表的成员

> ID：14316653
> 
> 赞同：0
> 
> 时间：2013-01-14T10:24:23.847
> 
> 标签：dynamics-crm-2011, late-binding, query-expressions

我正在尝试获取动态营销列表的成员列表。当它只有一个（或几个）列表时，我可以单独获取底层查询的结果。但是，当营销列表的数量增加时，一一抓取变得非常无效。

对于静态营销列表，我希望它应该是直截了当的。在基于我的*QueryExpression*对象中的*联系人*筛选与所有营销列表相对应的一组 guid 时，我应该能够获取实体*联系人*的所有实例（或用于创建它的任何基本类型） 。这是正确的认识吗？

 **（如何）我可以获取服务器上所有动态列表的所有底层成员吗？

![在此处输入图像描述](../Images/5f153aedaef9a6e90961ca4208d13225.png)

编辑：这是自动生成的 fetch-XML。

```
<fetch version="1.0" output-format="xml-platform" mapping="logical" distinct="false">
  <entity name="account">
    <attribute name="name" />
    <attribute name="primarycontactid" />
    <attribute name="telephone1" />
    <attribute name="accountid" />
    <order attribute="name" descending="false" />
  </entity>
</fetch> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:08:51.477

好吧，对于您的要求（结果中的非明确记录和保留成员所属的营销列表的名称）来说，组合 FetchXML 查询将太困难（如果可能的话）。请注意，根据[文档](http://msdn.microsoft.com/en-us/library/gg309405.aspx)FetchXML 查询只能针对一个根实体（例如帐户或联系人）运行，其他实体只能链接。由于您在数据库中的 Accounts 和 Marketing 列表之间没有直接链接（而不是您只有一个 FetchXML 字符串存储在 DB 中），因此您将无法为您的工作使用链接实体。

假设您现在通过 C# 代码执行此操作 - 这实际上是一个**好方法**。它可以让您更好地控制数据 - 您可以轻松地重新排列/组合/转换。我认为你不应该担心性能。多个 fetch xml 一个一个执行不会比一个巨大的组合可能花费的时间多得多。此外，如果您在 C# 中明智地实现集合操作，您可以获得相当不错的性能。我真的不认为组合巨大的 FetchXML 会带来任何性能优势，而只会带来维护困难。**

# haskell - 模板 Haskell 引用中的独立派生声明

> ID：14316656
> 
> 赞同：7
> 
> 时间：2013-01-14T10:24:42.940
> 
> 标签：haskell, template-haskell, deriving

为什么模板 Haskell 忽略引用中的独立派生声明？

```
{-# LANGUAGE TemplateHaskell, StandaloneDeriving #-}
data Test a = Test a
$([d| deriving instance Show a => Show (Test a); f x = x |]) 
```

```
ghci> :l Test.hs 
[1 of 1] Compiling Main             ( Test.hs, interpreted )
Ok, modules loaded: Main.
ghci> :t f
f :: t -> t
ghci> Test 1 :: Test Int

<interactive>:18:1:
    No instance for (Show (Test Int)) arising from a use of `print'
    Possible fix: add an instance declaration for (Show (Test Int))
    In a stmt of an interactive GHCi command: print it 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T11:49:58.833

这曾经是编译器的一个缺点，其中用于声明的 Template Haskell 数据类型甚至无法存储独立的派生实例（参见[http://hackage.haskell.org/packages/archive/template-haskell/2.8 .0.0/doc/html/Language-Haskell-TH-Syntax.html#t:Dec](http://hackage.haskell.org/packages/archive/template-haskell/2.8.0.0/doc/html/Language-Haskell-TH-Syntax.html#t:Dec) )。

不过，自 7.10 以来，[此错误](https://ghc.haskell.org/trac/ghc/ticket/8100)已得到修复。（感谢@VladimirStill 在下面的评论中指出这一点。）

# java - 如何处理android中的队列？爪哇

> ID：14316662
> 
> 赞同：2
> 
> 时间：2013-01-14T10:25:12.777
> 
> 标签：java, android, events, queue, timertask

我需要知道，如何在 android java 代码中处理队列。当队列不为空时，我想触发一些方法。任何人都可以就此提供建议...</p>

目前我已经实现了一个定时器任务。这个类经常看到队列状态。当队列不为空时，它将触发该方法。

我想知道有任何替代方法可以做到这一点..

公共类 GSMLocationTask 扩展 TimerTask { 处理程序 TDGetDeviceLocHandler;

```
int myLatitude, myLongitude;
int cid;
int lac;
double latitude;
double longitude;
TelephonyManager telephonyManager;
GsmCellLocation cellLocation;
LocationSendTask lst;

public GSMLocationTask(LocationSendTask locSendtask) {
    // TODO Auto-generated constructor stub
    this.lst = locSendtask;
    this.telephonyManager = (TelephonyManager)TrackDriodApplication.getAppContext().getSystemService(TrackDriodApplication.getAppContext().TELEPHONY_SERVICE);
    this.cellLocation = (GsmCellLocation) telephonyManager.getCellLocation();
}

@Override
public void run() 
{
    Log.d("GSMLocationTask", "GSM Location task Start run...");

       //cid = cellLocation.getCid();
       //lac = cellLocation.getLac();
       cid = 256229;//cellLocation.getCid();
       lac = 30310;//cellLocation.getLac();
       try 
       {
           //new TDGetDeviceLocation().execute(null, null, null); 

           if(RqsLocation(cid, lac))
            {
                latitude = (float)myLatitude/1000000;
                longitude = (float)myLongitude/1000000;
                Log.d("GSMLocationTask", "Lat :" +latitude +" Long :"+longitude);
            }

           DataTransaction dtra = new DataTransaction();
           ServerSettings ss = new ServerSettings();
           ss = dtra.getDeviceSettings(TrackDriodApplication.getAppContext());
           String deviceID = String.valueOf(ss.getDeviceID());
           Log.d("GSMLocationTask", "locationSend obj create");
           LocationSend loc = new LocationSend();
           Log.d("GSMLocationTask", "set lat");
           loc.setLatitude(Double.toString(latitude));
           Log.d("GSMLocationTask", "set long");
           loc.setLongitude(Double.toString(longitude));
           Log.d("GSMLocationTask", "set devid");
           loc.setDeviceID(deviceID);
           Log.d("GSMLocationTask", "set set datetime");
           loc.setDateTime(getCurrentTime());

           Log.d("GSMLocationTask", "add loc to queue sart");
           lst.addLocationToQueue(loc);
           Log.d("GSMLocationTask", "add loc to queue end");
       } 
       catch (Exception e)
       {  
       }

}
private static String getCurrentTime()
{
    SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    String currentDateandTime = sdf.format(new Date());
    return currentDateandTime;
}

private Boolean RqsLocation(int cid, int lac)
{          
    Log.d("GSMLocationTask", "call ReqLocation");
           Boolean result = false;
           String urlmmap = "http://www.google.com/glm/mmap";  

              try {
                  Log.d("GSMLocationTask", "start try..");
               URL url = new URL(urlmmap);
               URLConnection conn = url.openConnection();
               HttpURLConnection httpConn = (HttpURLConnection) conn;      
               httpConn.setRequestMethod("POST");
               httpConn.setDoOutput(true);
               httpConn.setDoInput(true);
               httpConn.connect();

               OutputStream outputStream = httpConn.getOutputStream();
               WriteData(outputStream, cid, lac);

               InputStream inputStream = httpConn.getInputStream();
               DataInputStream dataInputStream = new DataInputStream(inputStream);

               dataInputStream.readShort();
               dataInputStream.readByte();
               int code = dataInputStream.readInt();
               if (code == 0) 
               {
                   myLatitude = dataInputStream.readInt();
                   myLongitude = dataInputStream.readInt();

                   result = true;   
               }
               Log.d("GSMLocationTask", "end try..");

         } catch (IOException e) {
          // TODO Auto-generated catch block
          e.printStackTrace();
         }
         Log.d("GSMLocationTask", "return result :" +result);
         return result;

 }

 private void WriteData(OutputStream out, int cid, int lac) throws IOException        
    {    
        DataOutputStream dataOutputStream = new DataOutputStream(out);
        dataOutputStream.writeShort(21);
        dataOutputStream.writeLong(0);
        dataOutputStream.writeUTF("en");
        dataOutputStream.writeUTF("Android");
        dataOutputStream.writeUTF("1.0");
        dataOutputStream.writeUTF("Web");
        dataOutputStream.writeByte(27);
        dataOutputStream.writeInt(0);
        dataOutputStream.writeInt(0);
        dataOutputStream.writeInt(3);
        dataOutputStream.writeUTF("");           
        dataOutputStream.writeInt(cid);
        dataOutputStream.writeInt(lac);              
        dataOutputStream.writeInt(0);
        dataOutputStream.writeInt(0);
        dataOutputStream.writeInt(0);
        dataOutputStream.writeInt(0);
        dataOutputStream.flush();       
    }

class TDGetDeviceLocation extends AsyncTask<Object, Object, Object>{

    @Override
    protected Object doInBackground(Object... params) {
        try 
        {               
            Log.d("GSMLocationTask", "doInBackground start........");
            if(RqsLocation(cid, lac))
            {
                latitude = (float)myLatitude/1000000;
                longitude = (float)myLongitude/1000000;
            }

            return null;
        } 
        catch (Exception e) 
        { 
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;
    }       
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T11:08:54.627

您可以使用[Queue](http://developer.android.com/reference/java/util/Queue.html)对象来创建和管理队列，并使用[Observer](http://developer.android.com/reference/java/util/Observer.html)接口在您将元素添加到队列时触发事件来完成此操作。

[这里](https://stackoverflow.com/questions/9269899/best-way-to-update-activity-from-a-queue)有一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:07:10.220

代替 Timer 线程，使用普通线程和阻塞队列：

```
class Worker extends Thread {
  BlockingQueue<LocationSend> queue = new LinkedBlockingQueue<LocationSend>();

  public void run() {
     for (;;) {
        LocationSend loc=queue.take();
        someMethod(loc):
     }
  }
}
...
Worker worker=new Worker();
worker.start();
...
LocationSend loc = new LocationSend();
worker.queue.put(loc); 
```

# webdriver - nspec 可以运行并行测试吗？

> ID：14316666
> 
> 赞同：1
> 
> 时间：2013-01-14T10:25:24.383
> 
> 标签：webdriver, bdd, nspec, parallel-testing

我正在为 C# 寻找 Rspec 风格的工具，并找到了 Nspec。

我将通过 Saucelabds 将它用于 Webdriver 测试，因此并行运行测试的能力是一个关键考虑因素。

这可以在 Nspec 中完成吗？目前我使用 MBunit，它对并行测试有很好的支持，只能真正考虑也支持这个的 BDD 方法。

我相信 Specflow 可以并行运行，但我正在寻找 Rspec 风格而不是 Cucumber 风格的工具

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T21:22:20.290

目前，没有内置支持允许并行执行测试。我在 github 存储库上创建了一个新问题，可能会添加此功能：[https ://github.com/mattflo/NSpec/issues/53](https://github.com/mattflo/NSpec/issues/53)

# java - 关闭扫描仪，但需要从另一个类访问它

> ID：14316668
> 
> 赞同：0
> 
> 时间：2013-01-14T10:25:45.943
> 
> 标签：java, java.util.scanner

我的扫描仪出现问题。单击该按钮，应显示第二个文件中的文本。我让按钮工作了，但是程序直接跳到新文本文件的最后一行。由于加载时间很慢，我认为这是因为我无法关闭我的第一台扫描仪。我不认为我的布局对事情有很大帮助，因为一次会读取很多文本文件，但是将第二个类编写为内部类会使事情看起来更加复杂。

如何使第二类的扫描仪可以访问第一类（因此，使用`reader.close()`）？我应该使用嵌套/内部类来启动程序吗？是否有一种更简洁的方法来启动程序，然后为扫描仪准备好以后的操作？

最后，我一直在努力符合 SSCCE，我接近了吗？谢谢你的帮助

```
import declarations
public class MihatteFrame extends JFrame implements ActionListener{
....
public MihatteFrame() {
    area
    textfield
    button  
}
displayText method
checkTextFieldText method

public void actionPerformed(ActionEvent e) {
    try {
        if (textField.getText().equals("proceed to the entrance")) {
            Scanner.close();
            Scanner reader2 = new Scanner(new File("(Start) Front Gate.txt"));
            while (reader2.hasNextLine()) {
                String line = reader2.nextLine();
                displayText(line);
                try {
                    if(!line.trim().equals("")){
                                Thread.sleep(1000);
                        }
                    } catch (InterruptedException e) {
                    }   
            }
        } else {
            while (textField.getText() == null) {
                displayText("I`m sorry, could you say that again?");
            }
        }
    } catch (IOException ioe) {
    }
} 
```

X

```
import declarations
class ShowIntro {
public static void main(String args[]) throws IOException {
MihatteFrame mf = new MihatteFrame();
Scanner reader = new Scanner(new File("(Start) Introduction.txt"));

while (reader.hasNextLine()) {
    String line = reader.nextLine();
    mf.displayText(line);
    try {
        if(!line.trim().equals("")){
        Thread.sleep(1000);
            }
    } catch (InterruptedException e) {
    }       
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:30:41.723

GUI 线程仅在您从它调用您的事件中返回时执行操作。这意味着如果你做了很多动作，你只会看到这些动作的累积，如果你因为任何原因暂停，你的 GUI 也会暂停。

您需要在另一个线程中执行该操作，以便 GUI 线程可以更新屏幕。您还需要使用 SwingUtils.invokeLater() 从第二个线程更新 GUI。

# php - 在 echo 内容时插入 span 或 li 标签

> ID：14316673
> 
> 赞同：0
> 
> 时间：2013-01-14T10:26:06.643
> 
> 标签：php, html, echo

在回显时，我需要在内容中的每个换行符后插入 span 标签。

我怎样才能做到这一点？

我知道`nl2br(string)`它插入了 XHTML 兼容。

```
 The nl2br() function inserts HTML line breaks (<br />) in front of
   each newline (\n) in a string. 
```

*   如何使用 echo 或在 内容中的每个换行符后`<span>`显示我的内容时在我的内容中获取标签...

*   `<li>`在使用 echo 显示数据时，我还需要在我的内容中插入标签

任何想法。它的要求很简单，但我不知道如何解决这个问题？

非常感谢任何帮助。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:33:36.503

I don't see why echoing `"<span>"` wouldn't work for you, but you can always write html in php code. For example:

```
foreach($result in $results)
{
?>
    <a>
<?php
    echo $result["column"];
?>
    </a>
<?php
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T18:09:46.217

我找到了这个..我正在寻找像这样的跨度，因为预定义功能不适用于回声...

```
 function nl2p($string, $line_breaks = true, $xml = true)
{
    // Remove existing HTML formatting to avoid double-wrapping things
    $string = str_replace(array('<p>', '</p>', '<br>', '<br />'), '', $string);

    // It is conceivable that people might still want single line-breaks
    // without breaking into a new paragraph.
    if ($line_breaks == true)
        return '<p>'.preg_replace(array("/([\n]{2,})/i", "/([^>])\n([^<])/i"), array("</p>\n<p>", '<br'.($xml == true ? ' /' : '').'>'), trim($string)).'</p>';
    else 
        return '<p>'.preg_replace("/([\n]{1,})/i", "</p>\n<p>", trim($string)).'</p>';
}  

    <?php
$text = "Hello.

My name is Geoffrey.";

echo nl2p($text);
?> 
```

谢谢大家:)

# delphi - FastReport CrossTab 列标题旋转

> ID：14316674
> 
> 赞同：2
> 
> 时间：2013-01-14T10:26:14.647
> 
> 标签：delphi, delphi-xe2, fastreport

我有一个带有长列名的 FastReport CrossTab 报告，如果我要打印它，它会扩展到多个页面。我想也许我可以旋转列标题以节省一些空间。但 FastReport 不会为行计算正确的 Y 位置，生成的报告如下所示：

![报告](../Images/f23e64ae74029fd7c91ff79c1e97dfdd.png)

注意黄色旋转的标题和重叠的数据行。第一个数据行的位置正确，因为后面的行没有。我已将已为列标题生成`Rotation`的 FastReport 的属性设置为. 我应该怎么做才能将行放置在正确的垂直位置？`TfrxMemoView``90`

我正在使用 FastReport 版本 4.12.12

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:20:36.277

问题解决了。如果`MasterBand`小于`TfrxDBCrossView`内部，FastReport 无法正确计算行的垂直位置。

# html - 带边框的 div 中的图像和文本

> ID：14316678
> 
> 赞同：0
> 
> 时间：2013-01-14T10:26:24.473
> 
> 标签：html, css, image, text, border

这是代码：

```
 <div  style="border-style:solid; border-color:aqua; border-width:1px;">

       <img src="some picture" align="left" /> 
       <div>
            <span >SOME TEXT</span></br>
            <span >SOME TEXT</span></br>
            <span >SOME TEXT</span>
       </div>  

   </div> 
```

跨度块占用的（垂直）空间比图像少，因此边框和图像重叠并且图像部分超出了 div 跨度。这是[jsFiddle](http://jsfiddle.net/aTDYL/3/)

如何将边框应用于out div？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T10:39:31.817

您应该清除图像和带有跨度的 div`<div style="clear:both"></div>`最后添加 : 。

```
<div  style="border-style:solid; border-color:aqua; border-width:3px;">

           <img id="image_HDDimageControl" src="http://stereo-ssc.nascom.nasa.gov/beacon/t0193.jpg" align="left"> 
           <div>
             <span >SOME TEXT</span ></br>
             <span >SOME TEXT</span ></br>
             <span >SOME TEXT</span >
           </div>  

<div style="clear:both"></div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T10:43:28.577

添加`overflow:auto`到第一个 div 样式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T10:40:17.313

如果这个[http://jsfiddle.net/vleran/aTDYL/8/](http://jsfiddle.net/vleran/aTDYL/8/)是你想要做的，而不仅仅是`<div style="clear:both;"></div>`在外部 div（父 div）的结束标记之前添加。

# android - Android：Java线程如何对应原生线程？

> ID：14316682
> 
> 赞同：2
> 
> 时间：2013-01-14T10:26:33.210
> 
> 标签：android, multithreading, java-native-interface, native

在Android中，如果我从不同的Java线程调用同一个JNI库中的函数，JNI函数是在同一个本机线程上调用还是在不同的本机线程中调用？

所有 Android 版本的答案都一样吗？

（如果您调用需要在同一个本地线程上初始化和调用的 JNI 库，我怀疑这`AsyncTask`不是最佳选择。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:35:03.803

Regarding native code, there is no distinction between Java threads and native treads, its all just a thread. You won't change the thread by calling a native method from Java, it will execute on the same thread as the Java code before.

The Java VM holds some extra information for each thread, so threads created in native code have to be attached to the VM first.

The following sections from the JNI specification give some hints:

> Creating the VM
> 
> The JNI_CreateJavaVM() function loads and initializes a Java VM and returns a pointer to the JNI interface pointer. The thread that called JNI_CreateJavaVM() is considered to be the main thread.
> 
> Attaching to the VM
> 
> The JNI interface pointer (JNIEnv) is valid only in the current thread. Should another thread need to access the Java VM, it must first call AttachCurrentThread() to attach itself to the VM and obtain a JNI interface pointer. Once attached to the VM, a native thread works just like an ordinary Java thread running inside a native method. The native thread remains attached to the VM until it calls DetachCurrentThread() to detach itself.
> 
> The attached thread should have enough stack space to perform a reasonable amount of work. The allocation of stack space per thread is operating system-specific. For example, using pthreads, the stack size can be specified in the pthread_attr_t argument to pthread_create.
> 
> Detaching from the VM
> 
> A native thread attached to the VM must call DetachCurrentThread() to detach itself before exiting. A thread cannot detach itself if there are Java methods on the call stack.

# jmeter - 采样器错误上的 JMeter 线程队列

> ID：14316688
> 
> 赞同：0
> 
> 时间：2013-01-14T10:27:06.457
> 
> 标签：jmeter

我有一个测试计划如下：

![测试计划](../Images/3a053178fb3b4dd9543bfb32ccb85aab.png)

我的线程组包含三个请求，一个 POST 和两个应该一个接一个执行的 GET。`POST Suggestions`返回一个被执行的令牌，`GET Progress`直到它完成，当它完成时，我准备好了`GET Suggestions`。

问题是服务器被配置为一次只处理 5 个线程，如果我生成 6 个线程，它会处理 5 个并且第六个简单地死掉（停止线程），因为服务器回答为`503 Service Unavailable`. 我想找到这样一个解决方案，将第六个、第七个等 POST 请求留在某个队列中，直到前五个线程之一完成，即池中有一个位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:32:04.340

您尝试做的事情是错误的，因为这意味着测试的应用程序中存在问题（JMeter 显示），正确的方法是解决此问题，以便服务器可以处理更多请求，而不是试图找到一种方法让 JMeter 解决这个问题。

测试应用程序的客户端将面临您发现的问题，而不是尝试解决方法。

但如果这是自愿的：

![在此处输入图像描述](../Images/cf7801c49588ad3f79142beaa7403f5c.png)

![在此处输入图像描述](../Images/5dc6e06297d4e82a8dad6ec454507e3b.png)

![在此处输入图像描述](../Images/1d2c3f920d3d1ba0a99274c18d789f3a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:13:58.313

![最终解决方案](../Images/f5dc42463aca09aea3538501e22c4337.png)

我用上面的测试计划解决了这个问题。

# multithreading - 使用多线程重新设计 Perl 代码，以便为每个主机生成连续的 Ping 记录

> ID：14316692
> 
> 赞同：0
> 
> 时间：2013-01-14T10:27:18.873
> 
> 标签：multithreading, perl, optimization, ping, multitasking

祝大家新年快乐 :D

我已经用 perl 编写了一段代码，它运行良好，但我期待利用多线程和进程分叉等特性来增强该代码。代码旨在用于以下任务：

1.  持续记录列表中提供的多个服务器的 ping。
2.  分别为每个被 ping 的主机维护和写入日志。
3.  在实时命令窗口中显示实时统计信息。

完整代码为：

```
#!/user/perl/bin 
use strict;
use Net::Ping;
use Time::HiRes;
use IO::Handle;
use threads;
use threads::shared;

#       AUTHOR  :       Avi Mehenwal
#       PURPOSE :       Continuous ping check with PERL iThreads (interpreted threads)
#       DATE    :       10th-Jan-2013

sub Ping {

#Filer handle generation and open log file for writing in append mode.
#creating ping object to check ping response
#Writing Ping results in logs and command window for Real time analysis
#Close file after logs are witten

    my ($host , $protocol) = @_;
    chop $host;
    open my $log, '>>', "Ping_$host.txt" or die "Cannot create log file: $!";
    $log->autoflush;                                                          #autoflusing to stop output stream buffering.      
    my $p = Net::Ping->new($protocol) or die "Cannot create new Net::Ping object : $!";
    $p->hires;
    my ($ret, $duration, $ip) = $p->ping($host);
    if ($ret=='1')
     {    my $event = sprintf "%s\t%s is alive $protocol (packet RTT: %.3fms)\n",
                             scalar localtime, $host, $duration;
          print STDOUT $event;
          print $log $event;
          sleep(1);  #sleep only when ping is continuous    
      }
    else
     {    my $event = sprintf "%s\t%s is UNAVAILABLE (Timedout/lost $protocol request)\n",
                                            scalar localtime, $host;
          print STDOUT $event;
          print $log $event;               
     }
    close $log; 
}

my @hostip = qw(10.98.10.253, 10.112.114.10, 10.112.114.11);
STDOUT->autoflush;
print "****************************************************************************\n\ncPING-CHECK -v2.0 By-Avi Mehenwal\n\n";
print "Kindly enter the protocol to be used by cPing-Probe : tcp / udp / icmp ...\n";
my $protocol = <STDIN>;
chomp $protocol;
if($protocol eq "icmp") {
 print "\nWARNING:For cPing-Probe to use icmp protocol kindly run the program in administrative command prompt\ncPing-Probe v2.0will now exit ...";
 sleep(10);
 exit;
}      

while(1)      {
 foreach my $thost (@hostip) {
   Ping($thost,$protocol);
 }     
}     

#END 
```

现在我正在考虑使用每个 ip 主机一个线程来改进我的代码，这将检查 ping 和写入日志而不影响其他主机 ip 线程。为此，我尝试了几个代码，但我发现以下代码取得了一些成功：

```
my @hostip = qw(10.98.10.253, 10.112.114.10, 10.112.114.11);
STDOUT->autoflush;
print "****************************************************************************\n\ncPING-CHECK -v2.0 By-Avi Mehenwal\n\n";
print "Kindly enter the protocol to be used by cPing-Probe : tcp / udp / icmp ...\n";
my $protocol = <STDIN>;
chomp $protocol;
if($protocol eq "icmp") {
 print "\nWARNING:For cPing-Probe to use icmp protocol kindly run the program in administrative command prompt\ncPing-Probe v2.0will now exit ...";
 sleep(10);
 exit;
}      

while(1)
{   my $thr;
foreach my $thost (@hostip) 
{       $thr = threads->new(Ping,$thost,$protocol) or die "Cannot Create thread : $!";  #seperate thread for each IP
    Ping($thost,$protocol);
    }
    if($thr->is_joinable())
     {       $thr->join(); 
             print STDOUT "Thread joined\n";   }
    else
      {      $thr->detach();
             print STDOUT "Thread detached\n"; }     
}     

#END 
```

但是这段代码有一些不需要的症状，我需要专家的帮助。

*   为什么我会生成一个名为 Ping_ 的日志文件并将日志写入其中！理想情况下，每个主机都需要日志文件。我无法理解这里的诀窍。
*   我的代码是否真的在为每个主机并行运行线程进行多任务处理？我怎样才能检查或确定这一点？
*   有没有更好的方法来完成我的工作？
*   您认为我可以将任何其他功能添加到我的代码中吗？

提前感谢大家：D干杯！

-Avi Mehenwal

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:20:41.993

1.  根本不要使用线程；在 Perl 中，它们是邪恶的。
2.  不要用于`fork`I/O 密集型任务。

[AnyEvent::Ping](https://metacpan.org/module/AnyEvent%3a%3aPing)似乎完全符合您的要求：

```
#!/usr/bin/env perl
use common::sense
use AnyEvent;
use AnyEvent::Ping;

my $c = AnyEvent->condvar;

my $ping = AnyEvent::Ping->new;

$ping->ping('google.com', 1, sub {
    my $result = shift;
    print "Result: ", $result->[0][0],
      " in ", $result->[0][1], " seconds\n";
    $c->send;
});

$c->recv; 
```

# php - 在 MySQL 数据库中使用 AJAX 进行关键字搜索

> ID：14316697
> 
> 赞同：-1
> 
> 时间：2013-01-14T10:27:55.643
> 
> 标签：php, mysql, ajax, database, echo

我正在使用 AJAX 和 MySQL 组合来搜索数据库并在表中显示结果。不幸的是，它不会回显数据库中的结果，但代码已经找到它。

```
$in=$_GET['txt'];
$msg="";
if(strlen($in)>0 and strlen($in) <20 ) {
    $t=mysql_query("SELECT user FROM users WHERE user LIKE '$in%'");
    while($nt=mysql_fetch_array($t)) {
        $msg.=$nt[name]."->$nt[id]<br>";
    }
}
echo $msg; 
```

问题似乎出在我的代码的这一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:32:03.327

您仅`user`在查询中选择。应该`*`改为吗？

```
SELECT user FROM users WHERE user LIKE '$in%'
->
SELECT * FROM users WHERE user LIKE '$in%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T10:33:52.057

您已选择`user`但要显示`name`查询未返回的内容，因此：

```
$in  = mysql_real_escape_string($_GET['txt']);
$msg = '';
if(strlen($in) > 0 && strlen($in) < 20){
  $t = mysql_query("SELECT id, name 
                    FROM users 
                    WHERE user 
                    LIKE '%$in%'");
  while($nt = mysql_fetch_array($t)){
    $msg .= $nt['name'] . "->" . $nt['id'] . "<br />";
  }
}

echo $msg; 
```

请注意，我添加`mysql_real_escape_string()`了防止 mysql 注入的功能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T10:34:34.770

您只是`user`从数据库中选择并`$msg`与`$nt[name]`

您的查询至少应该是

```
"SELECT user,name,id FROM users WHERE user LIKE '$in%'" 
```

# c# - 在 Web 应用程序中锁定 XML 文件

> ID：14316700
> 
> 赞同：1
> 
> 时间：2013-01-14T10:28:22.520
> 
> 标签：c#, asp.net, locking, linq-to-xml

我们有一个充当表单设计器的网站应用程序。

表单数据存储在 XML 文件中。每个表单都有自己的 xml 文件。

当我编辑表单时，我基本上是重新创建 XML 文件。

```
public void Save(Guid form_Id, IEnumerable<FormData> formData)
{
    XDocument doc = new XDocument();
    XElement formsDataElement = new XElement("FormsData");
    doc.Add(formsDataElement);
    foreach (FormData data in formData)
    {
        formsDataElement.Add(new XElement("FormData",
                                 new XAttribute("Id", data.Id)
                                 new XAttribute("Name", data.Name)
                                 // other attributes
                             ));
    }

    doc.Save(formXMLFilePath);
} 
```

这很好用，但我想确保两个用户不会同时更新 XML 文件。我想以某种方式锁定它。

如何单独锁定每个文件的保存过程？

我可以像下面那样锁定保存功能，但这会锁定所有用户，即使他们保存了不同的 XML 文件。

```
private static readonly object _lock = new object();
public void Save(Guid form_Id, IEnumerable<FormData> formData)
{
    lock(_lock)
    {
        XDocument doc = new XDocument();
        foreach (FormData data in formData)
        {
            // Code
        }

        doc.Save(formXMLFilePath);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:45:43.547

为了防止同时写入文件，该方法在内部使用以下构造函数`XDocument.Save`创建一个：`FileStream`

```
new FileStream(
    outputFileName,
    FileMode.Create,
    FileAccess.Write,
    FileShare.Read,
    0x1000,
    UseAsync) 
```

该选项`FileShare.Read`可防止同时发生多个写入。如果您尝试同时执行两次写入，您最终会`IOException`被抛出。

您可能需要编写一些代码来处理这种可能性。这个答案[https://stackoverflow.com/a/50800/138578](https://stackoverflow.com/a/50800/138578)应该准确地提供如何处理被锁定的文件并重试直到文件可用。

如果您的文档又小又多，那么您不应该经常遇到这种情况，如果有的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T10:36:44.470

尝试这样的事情：

```
FileStream file = new FileStream(formXMLFilePath,FileMode.Create,FileAccress.Write,FileShare.None);

try {
    doc.Save(file);
} finally {
    file.Close();
} 
```

这使用了 a`FileStream`并且我们提供了一个`FileShare`模式。在我们的例子中，我们*专门*锁定文件，以便只有我们可以写入它。

但是，这仅仅意味着后续写入将失败，因为存在锁定。

为了解决这个问题，我倾向于有一个队列和一个单独的线程，唯一的工作是处理队列并写入文件系统。

然而，另一种解决方案是简单地尝试访问该文件，如果失败，请稍等片刻，然后再试一次。这将让你做一些类似于`lock`它等待直到它可以访问然后继续的事情：

```
private static bool IsLocked(string fileName)
{
    if (!File.Exists(fileName)) return false;

    try {
        FileStream file = new FileStream(fileName,FileMode.Open,FileAccess.Write,FileShare.None);

        try {
            return false;
        } finally {
            file.Close();
        }
    } catch (IOException) {
        return true;
    }
}

public void Save(Guid form_Id, IEnumerable<FormData> formData)
{
    while (IsLocked(formXMLFilePath)) Thread.Sleep(100);

    FileStream file = new FileStream(formXMLFilePath,FileMode.Create,FileAccress.Write,FileShare.None);

    try {
        doc.Save(file);
    } finally {
        file.Close();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T10:37:03.787

打开 xml 文件后，您没有关闭 xml 文件连接。所以我认为你需要在你的函数结束时首先关闭你的连接。

你可以用这个

```
filename.Close(); 
```

我希望这能帮到您

# asp.net - ASP.NET 主题：由用户编辑

> ID：14316702
> 
> 赞同：0
> 
> 时间：2013-01-14T10:28:36.547
> 
> 标签：asp.net, css, themes

我正在寻找一个演示应用程序，它允许用户在 ASP.NET 中编辑（更改项目 css - 颜色、背景等，还可以更改项目位置并在页面上添加/删除新元素）应用程序主题/css。对这样的应用有任何想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:59:27.150

Umbraco - 一个免费的 .NET 内容管理系统 - 可能值得一试，但我不确定这是否正是您正在寻找的：

[http://umbraco.com/why-umbraco](http://umbraco.com/why-umbraco)

上面的链接本身不是演示，因此如果您严格需要演示，请推迟到另一个答案，而不是具有您指定的功能的工具示例。除了您提到的项目之外，Umbraco 还允许您在 CMS 中嵌入您自己的控件，以及其他出色的功能。我没有亲身体验，但同事向我推荐了它。

# android - 打算推出画廊

> ID：14316704
> 
> 赞同：1
> 
> 时间：2013-01-14T10:28:50.090
> 
> 标签：android, android-intent, android-gallery

我想通过一个意图启动 android 的本机画廊，我希望用户从画廊中选择一种媒体图像或视频，但两者都应该列在那里。我的问题是现在我可以为图像或视频启动图库。我搜索了很多，但没有找到任何完美的解决方案。现在我正在做：

```
Intent mediaChooser = new Intent(Intent.ACTION_GET_CONTENT);
mediaChooser.setType("video/*, images/*");
context.startActivityForResult(mediaChooser, GALLERY_REQUEST_CODE); 
```

在这里，我在上面尝试过，但并不总是有效，我也尝试过单一类型，即：

```
mediaChooser.setType("video/*");
          OR
mediaChooser.setType("image/*"); 
```

谁能告诉我如何让两种类型的媒体文件都出现在画廊中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:28:03.410

**以下代码在android 2.2**上对我来说很好用。试试 ..
**视频**

```
Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
intent.setType("video/*");
startActivityForResult(intent,0); 
```

**图片**

```
Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
intent.setType("image/*");
startActivityForResult(intent,0); 
```

**对于两者都**
尝试..

```
final Intent galleryIntent = new Intent(Intent.ACTION_GET_CONTENT);
galleryIntent.setType("image/* video/*");
startActivityForResult(galleryIntent, REQUEST_CODE); 
```

# javascript - 如何使用 jquery 在 Waterwheel Carousel 中调用向右或向左移动？

> ID：14316706
> 
> 赞同：-1
> 
> 时间：2013-01-14T10:28:56.133
> 
> 标签：javascript, jquery

我是 jquery 的新手，我想 从按钮**向左/向右移动我的 Waterwheel Carouselc**

假设我有一个向右移动的按钮 我怎样才能使用 Waterwheel Carousel 功能执行此代码？我尝试了以下代码：

```
$("#waterwheelcarouseldefault").waterwheelCarousel().moveItem(); 
```

有人有它的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:57:10.363

在左侧按钮中写下：

```
$("#waterwheelcarouseldefault").find('.carousel-controls .carousel-prev').trigger('click'); 
```

在右键中写下：

```
$("#waterwheelcarouseldefault").find('.carousel-controls .carousel-next').trigger('click'); 
```

我认为这可能是工作。

# jenkins - 在 Jenkins 上构建多项目 Gradle

> ID：14316712
> 
> 赞同：5
> 
> 时间：2013-01-14T10:29:06.823
> 
> 标签：jenkins, gradle, multi-project

我在 Mercurial 存储库中托管了一个 Gradle 多项目。我想以这样的方式设置我的 Jenkins，如果我只将更改提交到 1 个子项目，那么只有那个子项目将被构建并发布到我的 Nexus 存储库。

有人可以给我一个提示吗？还是完全有可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-12T14:32:38.987

我们有这样的工作。

我们在 Jenkins 中为每个 gradle 子项目创建一个项目。在 Jenkins 配置中，我们只构建子项目，方法如下：

```
gradle clean :<subproject>:build 
```

*我们仍然存在一个问题，即整个*项目的所有签入都会触发该作业。我会将 Jenkins 配置为仅在签入子项目时才构建，但不知道如何指定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-27T06:35:21.147

将我们未来的最终解决方案留在这里。

我们为每个子项目创建了一个单独的 Jenkins 作业。Jenkins 的 Mercurial 插件允许指定“模块”：

> 通过在存储库中指定逗号或空格分隔的“模块”列表来减少不必要的构建。模块是该项目所在的存储库中的目录名称。如果设置了此字段，指定模块之外的更改将不会触发构建（即使由于 Mercurial 限制，整个存储库无论如何都已签出。）

这样我们的工作只有在监控子项目发生变化时才会被触发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T05:35:00.143

我猜你需要在 jenkins 中为每个子项目创建一个项目。

其他选择是查找是否有办法拦截 repo 同步并查看哪些子项目已更改并动态进行构建。

# c# - 异步进程读取无法读取提示

> ID：14316714
> 
> 赞同：0
> 
> 时间：2013-01-14T10:29:21.270
> 
> 标签：c#, asynchronous, process, prompt

我正在为现有应用程序开发一个简单的包装器，以通过异步读取和响应它的提示来自动化它。

异步读取是通过使用`Process.BeginOutputReadLine`and完成的`Process.BeginErrorReadLine`，这里有一个问题：

读取事件仅在读取一整行后返回，因此当预期用户输入时，不返回提示并且程序挂起。即使不是整行，我如何阅读提示？我什至可以检测到程序何时需要用户输入？

# ruby-on-rails-3 - 如何从预编译中排除几个 CSS 文件？

> ID：14316720
> 
> 赞同：0
> 
> 时间：2013-01-14T10:29:40.320
> 
> 标签：ruby-on-rails-3, asset-pipeline

我有一个 Rails 3.2.x 应用程序，它使用一个 3rd 方 JS 库，它本身包含一些 CSS 文件。当我预编译资产时，我的所有 JS 都进入 application.js，所有 CSS 进入 application.css。

我希望将已放入 vendor/assets/stylesheets 的 CSS 文件从预编译中排除，但仍然可用，以便 JS 库可以使用它们。关于我如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:58:28.783

只需从 application.css 中删除以下行

在资产/样式表目录中

```
 *= require_self
  *= require_tree . 
```

这些行默认选择样式表目录中的所有文件进行编译。

# javascript - 在 dom 加载后获取插件选项的动态值。(Fineuploader 插件)

> ID：14316721
> 
> 赞同：2
> 
> 时间：2013-01-14T10:29:41.483
> 
> 标签：javascript, jquery, dom, jquery-plugins, plugins

我希望你能在这件事上有所帮助。

我正在使用 Fineuploader，我需要获取和发送输入字段值（即文件组标题）。

为此，我正在使用服务器端脚本的路径（我没有编码，这就是为什么我必须以某种方式在我这边做）：

```
endpoint: '/Services/hndFileUploader.ashx?case=deals&dealfiletitle=' + $("input").val() 
```

问题是带有 Fineuploader 的 DOM 已经加载，并且输入的值当然是空的。

如何获得动态值以与该查询一起发送？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T11:11:41.597

您可以使用`setParams`Fineuploader 的选项来执行此操作。[文档在这里](https://github.com/valums/file-uploader/blob/master/readme.md)，但基本上它可能是这样的：

```
$('#fineUploaderElementId').fineUploader({
    request: {
        endpoint: '/Services/hndFileUploader.ashx'
    }
}).on('submit', function(event, id, filename) {
     $(this).fineUploader('setParams', {'case': 'deals', 'dealfiletitle': $(input).val(); });
  }); 
```

# .htaccess - RedirectMatch 不适用于较长的网址

> ID：14316725
> 
> 赞同：1
> 
> 时间：2013-01-14T10:29:49.850
> 
> 标签：.htaccess, rewrite

我对 RedirectMatch 301 有疑问。它在顶级域上运行良好，并且附加了一个变量，即

```
http://xenolith.ws/ redirects to xeno-mods.com
http://xenolith.ws/explore redirects fine as well
http://xenolith.ws/mods/122 does not work 
```

我的 RedirectMatch 看起来像这样：

```
RedirectMatch 301 ^/(.*)$ http://xeno-mods.com/$1 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:03:57.863

在测试您的配置时，不要使用 301，请参阅此答案[调试 .htaccess 重写规则的提示](https://stackoverflow.com/a/9204355/1741542)

根据您的配置以及您拥有此`RedirectMatch`的位置，前导`/`是否已被删除。你可以试试

```
RedirectMatch .* http://xeno-mods.com/$0 
```

或者

```
RedirectMatch .* http://xeno-mods.com$0 
```

你也可以只使用`Redirect`

```
Redirect / http://xeno-mods.com/ 
```

它将所有请求重定向到新域。

不要忘记在浏览器中重新加载，因为您之前的 301 测试，浏览器可能已经缓存了一些结果。

当重定向按预期工作时，您可以再次插入 301 状态代码。但是没有它，测试会容易得多。

# php - 通过使用 MySQL 和 PHP 从下拉列表中选择特定选项来过滤记录

> ID：14316729
> 
> 赞同：0
> 
> 时间：2013-01-14T10:29:56.250
> 
> 标签：php, jquery, mysql, ajax

在我的 HTML 页面中，我有一个包含几个选项的下拉列表，这些选项是一些公司名称。当我选择某个公司时，我想获得相关记录。我对此没有任何问题。但是我想在列表顶部添加一个“全部”选项，当我选择“全部”时，所有记录都会显示出来。由于我将选择的公司名称发布到后端并进行正常的sql查询以查找公司名称与我发布的记录相同的记录，所以我绝对不能只将“全部”发布到后端。有没有一种巧妙的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:37:19.947

最简单（也是最简洁）的可能是在服务器端放置一个 if(){ 语句。所以，

```
if($input == 'all'){
     $sql = <select all code>;
}else{
     $sql = <select any one code>;
} 
```

然后运行`$sql`查询。

# sql - 长柱未正确绕线

> ID：14316734
> 
> 赞同：2
> 
> 时间：2013-01-14T10:30:19.810
> 
> 标签：sql, oracle, spool

> **可能重复：**
> [Oracle 假脱机到文件中的最大列宽](https://stackoverflow.com/questions/4156527/max-column-width-in-oracle-spool-to-file)

我在表中有一个 LONG 列。我想将此列的内容假脱机到假脱机文件中。我已经编写了以下文件并正在运行它。问题是在假脱机文件中只写入了每行的前 81 个字符。我已将 linesize 设置为 100000 但问题仍然存在。要获得 f，我需要进行哪些更改？

```
set head on
set linesize 100000
set pagesize 50000
set long 100000
set echo on
set trimspool on
set colsep ';'

SPOOL D:\DCN.SPL

SELECT long_col FROM table;

SET ECHO OFF
SPOOL OFF 
```

# mysql - 从文件中复制 MySQL 数据库

> ID：14316735
> 
> 赞同：0
> 
> 时间：2013-01-14T10:30:24.763
> 
> 标签：mysql

我有一个安装了 MySQL 5 的硬盘（这个硬盘属于另一台装有 Windows XP 的 PC），我已经将它连接到我的 PC。如何将其 MySQL 数据复制到另一个 MySQL 5 ？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:36:35.250

你可以试试这个。关闭两个mysql服务器。找到 mysql 数据目录（例如 /。如果您的数据库使用 myisam 作为引擎，您会为任何数据库找到一个文件夹。在此文件夹中是每个表、索引文件和数据文件的文件。将文件夹复制到您电脑上的数据目录。启动你的mysql服务器。

PS：检查两台服务器的版本。

或者您可以使用 mysqldump 这是 mysql 的命令行实用程序。导出后将导出文件复制到您的服务器并使用以下命令： `mysql -u<username> -p<password> < <exportfilename>`

亲切的问候

# c# - 在不断联系中，我必须再添加一个联系人列表

> ID：14316737
> 
> 赞同：0
> 
> 时间：2013-01-14T10:30:41.270
> 
> 标签：c#, constantcontact

我在特定列表中有一个联系人，我也想将其添加到另一个列表中。
下面的代码正在工作，但突然停止工作不知道为什么？

我也没有收到任何错误。我在这里做错什么了吗。

```
string[] emailAddress = new string[] { list[i].EmailAddress };
IList<Contact> myList = Utility.SearchContactByEmail(authenticationData, emailAddress, out nextChunkId);
Contact thisContact =  Utility.GetContactDetailsById(authenticationData, myList[0].Id);

thisContact.Id = myList[0].Id;

ContactOptInList newList = new ContactOptInList();
newList.OptInSource = ContactOptSource.ActionByCustomer;
newList.ContactList = new ContactList("3");
//Contact list you want to add them to
thisContact.ContactLists.Add(newList); 
```

# glassfish - JkMount 不同的 URI 到相同的应用程序名称

> ID：14316743
> 
> 赞同：2
> 
> 时间：2013-01-14T10:30:56.493
> 
> 标签：glassfish, mod-jk

在两台服务器（服务器 A，服务器 B）上，我有 Glassfish 和应用程序 A。它们前面是使用 mod_jk 的 Apache。Apache 响应域 www.myDomain.com。

如何进行这种类型的重定向：

*   www.mydomain.com/A 转到 serverA/A
*   www.mydomain.com/B 转到服务器 B/A

# c# - 缓存中的数据消失 - 键保留，但值为空

> ID：14316745
> 
> 赞同：-1
> 
> 时间：2013-01-14T10:31:29.473
> 
> 标签：c#, asp.net, windows, caching

我们有几个用 C# 编写的相当大的 ASP.NET 2.0 应用程序，在 Windows Web Server 2008 上运行。我们经常使用缓存，直到最近都没有问题。然而，在过去的几个月里，我们在使用 Cache 的方法中遇到了随机错误。尽管键存在，但值 Cache[key] 似乎为空。或者缓存中有一个集合，它的所有元素突然都为空（集合是用常量初始化的，所以这些不是数据库问题）。这怎么可能？有什么已知的错误吗？那可能是服务器内存或磁盘故障吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:44:13.400

即使您使用`Cache.NoAbsoluteExpiration`+填充缓存`Cache.NoSlidingExpiration`，ASP.NET 也可以从缓存中删除项目（例如，当内存不足时）。

传递给以[`CacheItemPriority.NotRemovable`](http://msdn.microsoft.com/en-us/library/system.web.caching.cacheitempriority.aspx)防止`Cache.Insert()`这种情况发生。

# c# - 下拉列表中的国家/地区和城市列表

> ID：14316749
> 
> 赞同：3
> 
> 时间：2013-01-14T10:31:46.987
> 
> 标签：c#, javascript, jquery, sql

我需要在同一个下拉列表中创建一个包含地区（亚洲、东南亚、北美等）和国家/地区的下拉列表。选择选项后，我将根据所选国家填充城市。

它看起来像这样，但在下拉列表中，而不是展开。在我的例子中，新加坡、澳大利亚、柬埔寨等是地区，显示的城市是国家。 ![在此处输入图像描述](../Images/6b348d4418090f469d4106d5b526120f.png)

或者更具体地说，如下所示，以台湾、中国大陆为地区，以城市为国家。

![在此处输入图像描述](../Images/b08bd1c3ee41258cd2093c119b67cbc9.png)

我所有的数据都是从我的数据库中提取的，我的 RegionTable 看起来像这样

![在此处输入图像描述](../Images/ac71da235de38f45241f19ced1b27da7.png)

我的 CountryTable 是这样的：

![在此处输入图像描述](../Images/a3934d2e6b2687f77deb718175e4d1ba.png)

我的代码工作正常，可以根据所选国家/地区填充城市，现在的问题是我不知道如何将该地区与国家/地区放在同一个下拉列表中。唯一的问题是我如何添加区域并使其不可选择，因为用户应该选择国家而不是区域。

我使用以下代码获取我的 CountryDropDownList

```
function loadPackage_CountryList() {
$('#Package_Country option').each(function (i, option) { $(option).remove(); });
$('#Package_Country').attr('disabled', true);
$("#Package_Country").append("<option value=''>Downloading...</option>");
$.ajax({
    type: "POST", url: PackageWSURL + "/GetPackageCountryList", data: "",
    contentType: "application/json; charset=utf-8", dataType: "json",
    success: function (response) {
        var countries = response.d;
        $('#Package_Country option').each(function (i, option) { $(option).remove(); });
        $('#Package_Country').attr('disabled', false);
        for (var i = 0; i < countries.length; i++) {
            $("#Package_Country").append("<option value='" + countries[i].Value + "'>" + countries[i].Display + "</option>");
        }
    }
}); 
```

}

任何人都可以帮助我如何将区域添加到下拉列表中？提前致谢。

--------------已编辑----------

这是我从数据库中获取数据的 WebMethod。

```
 [WebMethod]
public List<jsonItem> GetPackageCountryList()
{
    List<jsonItem> RecordList = new List<jsonItem>();

    jsonItem jItemA = new jsonItem();
    jItemA.Display = "All Countries";
    jItemA.Value = "ALL";
    jItemA.Group = "---";
    RecordList.Add(jItemA);

    String ConnStr = WebConfigurationManager.ConnectionStrings["TOUR_DB_ConStr"].ConnectionString;
    SqlConnection connection = new SqlConnection(ConnStr);
    connection.Open();

    try
    {
        String SQL = "SELECT [CountryList].[CountryCode], [CountryList].[CountryName], [CountryList].[Regioncode] ";
        SQL += "FROM [CountryTable] ";
        SQL += "WHERE [CountryTable].[Activation] = 1 ";
        SQL += "ORDER BY [CountryTable].[Regioncode], [CountryTable].[CountryName]";
        SqlCommand command = new SqlCommand(SQL, connection);
        SqlDataReader dataReader = command.ExecuteReader();
        while (dataReader.Read())
        {
            jsonItem RecordItem = new jsonItem();

            RecordItem.Display = dataReader["CountryName"].ToString() + " - " + dataReader["CountryCode"].ToString();
            RecordItem.Value = dataReader["CountryCode"].ToString();
            RecordItem.Group = getRegionName(dataReader["RegionCode"].ToString());
            RecordList.Add(RecordItem);
        }
        dataReader.Close();
    }
    catch { }
    finally
    {
        connection.Close();
    }

    return RecordList;
} 
```

我已经设法从下面的函数中添加了 optgroup，但现在的问题是我认为它会自动添加到`<optgroup>`行尾，即使我已经添加了`if` `else`函数。

```
function loadPackage_CountryList() {
$('#Package_Country option').each(function (i, option) { $(option).remove(); });
$('#Package_Country').attr('disabled', true);
$("#Package_Country").append("<option value=''>Downloading...</option>");
$.ajax({
    type: "POST", url: PackageWSURL + "/GetPackageCountryList", data: "",
    contentType: "application/json; charset=utf-8", dataType: "json",
    success: function (response) {
        var countries = response.d;
        var group = "";
        $('#Package_Country option').each(function (i, option) { $(option).remove(); });
        $('#Package_Country').attr('disabled', false);
        for (var i = 0; i < countries.length; i++) {
            group = countries[i].Group;
            if (group != "---") {
                $("#Package_Country").append("<optgroup label='" + countries[i].Group + "'><option value='" + countries[i].Value + "'>" + countries[i].Display + "</option>");
                if (group != countries[i].Group)
                { $("#Package_Country").append("</optgroup>"); }
                else { continue; }

            }
            else { $("#Package_Country").append("<option value='" + countries[i].Value + "'>" + countries[i].Display + "</option>"); }

        }
    }
}); 
```

}

所以现在它看起来像这样

![在此处输入图像描述](../Images/ca62903f5eda22a67d8e21aaa11fee02.png)

注意亚洲是如何重复的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:36:31.197

我认为您应该使用select 的[optgroup](http://www.w3schools.com/tags/tag_optgroup.asp)功能。如果您能指出您使用的技术（WebForms、MVC），我可以进一步提供帮助

**编辑**

我会用这段代码改变你**的**

```
var selectCountries = $("select#Package_Country");
for (var i = 0; i < countries.length; i++) {
    group = countries[i].Group;
    var optgroupRegion = null;
    if (group !== "---") {
        optgroupRegion = selectCountries.find("optgroup[label='" + group + "']");
        if (optgroupRegion.length === 0) {
            optgroupRegion = $("<optgroup></optgroup>").attr("label", group).appendTo(selectCountries);
        }
    }

    $("<option></option>").val(countries[i].Value).text(countries[i].Display).appendTo(optgroupRegion !==     null ? optgroupRegion : selectCountries);
} 
```

更新后的代码将重用已添加的 optgroup。

# wordpress - 如何删除留下的空标签 在 WordPress 中

> ID：14316756
> 
> 赞同：0
> 
> 时间：2013-01-14T10:32:14.403
> 
> 标签：wordpress, preg-replace, user-defined-functions, str-replace

Wordpress 不支持像 wp_nav_menu 那样向 the_date 添加样式，因此我们必须在函数外部对样式进行编码。

虽然 the_date 每天只显示一次很方便，但它确实会在代码中留下空标签，这会弄乱布局，尤其是边距/填充。

寻找解决方案后，最好的选择是在主题的function.php中编写一个与the_content挂钩的函数，所以这是我想出的：

```
 function remove_empty_date($string)
    {
    $string = str_replace('/<small class="date">\s*</small>/', '',$string);
    return $string;
    }
    add_filter('the_content','remove_empty_date'); 
```

罪魁祸首是`<small class="date"></small>`，它在页面中表现为一个日期样式的字段，其中没有日期。

如果没有比上述更好的解决方案，代码哪里出错了，所以它不会删除不需要的字符串？

更新：误报，Wordpress 确实支持从函数调用中添加标签，[http://codex.wordpress.org/Function_Reference/the_date](http://codex.wordpress.org/Function_Reference/the_date)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:46:42.223

解决方案：从函数内添加标签：

来自：[http](http://codex.wordpress.org/Function_Reference/the_date) ://codex.wordpress.org/Function_Reference/the_date —</p>

```
<?php the_date( $format, $before, $after, $echo ); ?> 
```

# sql - 我的 sql 查询中的错误

> ID：14316759
> 
> 赞同：0
> 
> 时间：2013-01-14T10:32:26.663
> 
> 标签：sql, postgresql

嘿伙计们，我正在尝试在我的 postgres 数据库中运行此查询，但它返回一个错误：[Err] ERROR: syntax error at or near "," LINE 13: 而不是 substr(a.zoneiddest , 1 ,3) = any ( '254','255','256'...

查询是这样的

```
SELECT
    to_char(a.CALLDATE, 'yyyymm') AS month,
    min(a.calldate) AS start_time,
    max(a.calldate) AS end_time,
    ceil(SUM(a.CALLDURATION::INT) / 60) AS minutes,
    COUNT(DISTINCT a.IDENTIFIANT) AS distinct_callers,
    a.zoneiddest AS country_code,
    b.country
FROM cdr_data a,
    country_codes b
WHERE a.CALLSUBCLASS = '002'
  AND a.CALLCLASS = '008'
  AND a.zoneiddest::INT > 0
  AND SUBSTR(a.CALLEDNUMBER, 1, 2) NOT IN
    ( '77', '78', '75', '70', '71', '41', '31', '39', '76', '79' )
  AND NOT substr(a.zoneiddest, 1, 3) = ANY
    ( '254', '255','256', '211', '257', '250', '256' )
  AND trim(a.zoneiddest) = trim(b.country_code)
GROUP BY
    to_char(a.CALLDATE, 'yyyymm'),
    a.zoneiddest,
    b.country
ORDER BY 1 
```

同样的查询在 oracle 中运行良好，只需将 a.zoneiddest::integer > 0 更改为 a.zoneiddest > 0

我可能做错了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:39:10.147

问题出在您的`ANY`运营商身上。如果我正确理解您的查询，您可以用一个`NOT IN`语句替换它。

```
SELECT to_char (a.CALLDATE,'yyyymm') as month,min(a.calldate) as 
start_time,max(a.calldate) as end_time,
ceil(SUM (a.CALLDURATION::integer) / 60) AS minutes,
COUNT (DISTINCT a.IDENTIFIANT) AS distinct_callers,
a.zoneiddest as country_code,b.country
FROM cdr_data a,COUNTRY_CODES b
WHERE  a.CALLSUBCLASS = '002'
AND  a.CALLCLASS = '008'
and a.zoneiddest::integer > 0
AND SUBSTR (a.CALLEDNUMBER, 1, 2) NOT IN
  ('77', '78', '75', '70', '71', '41', '31', '39', '76','79')
// This line
AND substr(a.zoneiddest , 1 ,3) NOT IN
  ('254','255','256','211','257','250','256')
// End of line
and trim(a.zoneiddest)  = trim(b.country_code)
GROUP BY to_char (a.CALLDATE,'yyyymm') ,a.zoneiddest,b.country
ORDER BY 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T10:45:33.793

尝试将关键字 any 与参数数组结合使用，如下所示：

```
= any (ARRAY['254','255','256','211','257','250','256']) 
```

# c++ - glfw + 代码块 + 对 `__gxx_personality_sj0' 的未定义引用

> ID：14316761
> 
> 赞同：0
> 
> 时间：2013-01-14T10:32:27.433
> 
> 标签：c++, codeblocks, glfw

1) 我从[http://www.glfw.org/download.html](http://www.glfw.org/download.html) - glfw 源下载。编译它们，得到glfw.dll、libglfw.a、libglfwdll.a。

2）从这些链接中逐步放置它们：

[GLFW 和代码块](https://stackoverflow.com/questions/7856648/glfw-and-codeblocks)

到它们必须所在的文件夹。

3）在代码块中创建新项目。

在构建它时（使用默认的 main.cpp，由代码块创建）我得到了

```
undefined reference to `__gxx_personality_sj0' 
```

这里：[未定义的对 `__gxx_personality_sj0 的引用](https://stackoverflow.com/questions/7751640/undefined-reference-to-gxx-personality-sj0) 将该问题描述为*使用不同异常处理实现编译的*问题。

但实际上，我没有更改编译器设置中的任何内容，并且我自己构建了 glfw，因此它不会在其他地方出现未知异常处理。所以，异常处理（我什至不知道它是什么以及我在哪里可以改变它）在编译glfw或main.cpp之后就无法改变了。

请帮我解决这个问题，编译由 CodeBlocks 生成的 main.cpp。谢谢你。

PS：我从 codeblocks.org（二进制）下载了 CodeBlocks，然后从[http://nuwen.net/mingw.html](http://nuwen.net/mingw.html)下载了“MinGW + boost” ，然后在 CodeBlocks 内的 MinGW 上解压了它。会不会有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:19:43.623

> 问题描述为使用不同异常处理实现编译的问题

另外编译glfw库和编译main.cpp时编译器版本必须相同

# java - Jfree 图表和 OpenSDK 问题

> ID：14316763
> 
> 赞同：0
> 
> 时间：2013-01-14T10:32:29.860
> 
> 标签：java, jfreechart

在我们当前的应用程序中，我使用`JfreeChart`了 apis 来生成图表。在其中一张图表中，我使用`ValueMarker`类在图表中显示一条垂直线。当我使用 Oracle Java SDK 在 Windows 7 上工作时，一切正常。但是在 Ubuntu 上，这条垂直线（由`ValueMarker`类生成）没有显示。我们的ubuntu环境细节如下：

> java version "1.6.0_20"
> OpenJDK Runtime Environment (IcedTea6 1.9.13) (6b20-1.9.13-0ubuntu1~10.04.1)
> OpenJDK 64-Bit Server VM

在这方面的任何指针都会非常有帮助。

# xml - 将 xml 字符串反序列化为 uint 属性

> ID：14316771
> 
> 赞同：0
> 
> 时间：2013-01-14T10:33:24.890
> 
> 标签：xml, parsing, serialization, hex, uint

`MyValue`是否可以使用is反序列化 XML 文件`0x0001`并将其反序列化为 uint 属性？实现这一点的最佳方法是什么？

```
public class MyClass
{
    private string myValue;
    public uint MyValue
    {
         //checkValue method checks if myValue is a decimal or hex and number (returns an uint value).

         get { return checkValue(myValue); } 
         set { myValue = value.ToString(); }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:40:16.980

怎么样：

```
public class MyClass
{
    private uint? _myValue;
    [XmlIgnore]
    public uint MyValue
    {
        get{ return _myValue ?? checkValue(MyValueString); }
        set{ _myValue = value; }
    }    

    [XmlElement("MyValue")]
    public string MyValueString
    {
         //checkValue method checks if myValue is a decimal or hex and number (returns an uint value).
         get; set;
    }
} 
```

# jquery - .load(url) 页面加载

> ID：14316777
> 
> 赞同：0
> 
> 时间：2013-01-14T10:33:36.897
> 
> 标签：jquery

这是我的代码

```
<script type="text/javascript" language="javascript">
    $(document).ready(function (){
        $("#foo2").load("carousel/todos.html");
        $('#foo2').animate({ "opacity":"1" });
        $('#carouselselectitem1').css({ 'color' : '#FF0000', 'opacity' : '1' })
    });
</script> 
```

`animate()`并且`css()`工作完美，但`load()`不导入我的 HTML。如果我使用`click`带有按钮的处理程序，它可以正常工作。

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:46:02.880

为了保护您，浏览器不会自动加载页面（给出`Origin null is not allowed by Access-Control-Allow-Origin`错误）。您可以重新启动浏览器以允许此类活动*或*将其放在网络服务器上，它应该可以工作。

[HTTP 访问控制](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:44:14.540

试试这个，可能是 foo 没有准备好加载，或者一些缓存问题

```
$(document).ready(function(){
 setTimeout(function(){
    $("#foo2").load("carousel/todos.html");
    $('#foo2').animate({ "opacity":"1" });
    $('#carouselselectitem1').css({ 'color' : '#FF0000', 'opacity' : '1' })
 },1000);

}); 
```

或试试这个

```
 $(document).ready(function(){

        $("#foo2").load("carousel/todos.html?"+ Math.random());
        $('#foo2').animate({ "opacity":"1" });
        $('#carouselselectitem1').css({ 'color' : '#FF0000', 'opacity' : '1' })

    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T10:54:00.410

试试这个：

```
<script type="text/javascript" language="javascript">
    $(document).ready(function (){
        $("#foo2").load("carousel/todos.html", function(){
          $(this).animate({ "opacity":"1" });
          $('#carouselselectitem1').css({ 'color' : '#FF0000', 'opacity' : '1' });
        });
    });
</script> 
```

或者可能是这样：

```
<script type="text/javascript" language="javascript">
    $(document).ready(function () {
      $("#foo2").ready(function () {
        $(this) load("carousel/todos.html", function () {
          $(this).animate({"opacity": "1"});
          $('#carouselselectitem1').css({'color': '#FF0000', 'opacity': '1'});
        });
      });
    });
</script> 
```

# c++ - Visual C++ 代码在 Code::Blocks 中不起作用

> ID：14316781
> 
> 赞同：2
> 
> 时间：2013-01-14T10:33:54.670
> 
> 标签：c++, visual-studio, codeblocks

我目前使用以下代码从 C# Dll 调用函数，该代码在 Visual C++ 中完美运行。

```
#include <mscoree.h>
#include <stdio.h>
#pragma comment(lib, "mscoree.lib") 

void Bootstrap()
{
    ICLRRuntimeHost *pHost = NULL;
    HRESULT hr = CorBindToRuntimeEx(L"v4.0.30319", L"wks", 0, CLSID_CLRRuntimeHost, IID_ICLRRuntimeHost, (PVOID*)&pHost);
    pHost->Start();
    printf("HRESULT:%x\n", hr);

    // target method MUST be static int method(string arg)
    DWORD dwRet = 0;
    hr = pHost->ExecuteInDefaultAppDomain(L"c:\\temp\\test.dll", L"Test.Hello", L"SayHello", L"Person!", &dwRet);
    printf("HRESULT:%x\n", hr);

    hr = pHost->Stop();
    printf("HRESULT:%x\n", hr);

    pHost->Release();
}

int main()
{
    Bootstrap();
} 
```

问题是，当我将它移动到 Code::Blocks （我更熟悉 - 因为我所做的小 C++ 是原生的）时，会引发很多编译器错误。

最初的编译器错误是因为它找不到 header `mscoree.h`。我在 .NET SDK 中找到了这个，所以我把它复制到了解决这个问题的 mingw 包含目录，然后我对它找不到的所有其他头文件做了同样的事情。

在复制了所有标题之后，它开始给出一大堆其他错误，与我刚刚移动的标题中的代码有关 - 与下面的代码无关。

为什么当 VS 直接运行时 Code::Blocks 很难运行它？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T11:17:30.473

**Code::Blocks**是用于 C++ 编程的出色 IDE，但您显然是在这里进行 Windows 编程。尽管它是相同的编程语言，但它们之间的编译器并不兼容。

如果您使用 gcc 编译器或单个 CodeBlocks IDE 下载了 CodeBlocks 版本，则需要配置 CodeBlocks 才能使用 MS C++ 编译器。为此，请转到*Settings >> Compiler and debugger >> Toolchain executables*。

此外，在同一选项中，查找*搜索目录*并将 MS C++ 编译器头文件的路径放在那里。

完成后，您将能够编译您的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-23T00:45:26.970

Code::Blocks 与 Visual Studio 的编译器完全不同，编译时对源代码的解码和编码不同，虽然它们是相同的编程语言，但无法相互识别。

# ios - iOs 从几个字符串创建新的表格单元格

> ID：14316782
> 
> 赞同：-2
> 
> 时间：2013-01-14T10:33:58.727
> 
> 标签：ios, uitableview, nsstring, nsarray

我在 SecondViewController 中收到了一些字符串。在这个视图控制器中，我有一个 tableView，但还没有任何 tableCells。

我收到以下信息：

```
2013-01-14 11:24:22.342 Scanner[16200:c07] (
    123456,
    "Jeans lynn skinny coj glass",
    "119.90",
    "S, M, L, XL",
    "G-Star"
)
2013-01-14 11:24:22.342 Scanner[16200:c07] jsonstring:{"2":"G-Star","3":null,"product":"Jeans lynn skinny coj glass","4":"119.90","maten":"S, M, L, XL","5":"S, M, L, XL","barcode":"123456","afbeelding":null,"0":"123456","winkel":"G-Star","prijs":"119.90","1":"Jeans lynn skinny coj glass"}
2013-01-14 11:24:22.342 Scanner[16200:c07] barcode:123456
2013-01-14 11:24:22.343 Scanner[16200:c07] product:Jeans lynn skinny coj glass
2013-01-14 11:24:22.343 Scanner[16200:c07] prijs:119.90
2013-01-14 11:24:22.343 Scanner[16200:c07] maten:S, M, L, XL
2013-01-14 11:24:22.343 Scanner[16200:c07] winkel:G-Star 
```

从这段代码

```
 array = [[NSArray alloc] init];
    array = a;
    NSLog(@"%@", a);
    string = [[NSString alloc] init];
    string = s;
    NSLog(@"jsonstring:%@", s);
    NSString * barcode = [a objectAtIndex:0];
    NSLog(@"barcode:%@", barcode);
    NSString * product = [a objectAtIndex:1];
    NSLog(@"product:%@", product);
    NSString * prijs = [a objectAtIndex:2];
    NSLog(@"prijs:%@", prijs);
    NSString * maten = [a objectAtIndex:3];
    NSLog(@"maten:%@", maten);
    NSString * winkel = [a objectAtIndex:4];
    NSLog(@"winkel:%@", winkel); 
```

有谁知道如何将它放在一个新单元格中，该单元格带有来自该单元格“123456”的标签，旁边有一个图像，以及子视图控制器中的其他信息？

我愿意在 2 天后悬赏这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:47:11.437

您可以简单地使用 UITableViewDelegate [http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html)。

使用：

*   (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView (返回你想要在你的tableview中的section数)
*   (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section （返回特定部分所需的单元格数）

而且当然：

表视图：cellForRowAtIndexPath：

例子：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {

return 1;

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

return [array count];

} 
```

和你的手机：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier] autorelease];
    }

    // Set up the cell...

  cell.text = @"lol";

    return cell;
    } 
```

# macos - Make the mouse cursor stay visible while typing in NSTextField

> ID：14316791
> 
> 赞同：3
> 
> 时间：2013-01-14T10:34:47.063
> 
> 标签：macos, cocoa, nstextfield

In OS X, the mouse cursor typically disappears when you are typing in a text field, in every app. Even when I am typing in this text field here on Stack Overflow, the cursor disappears. This makes sense most of the time. But in my app I want it to stay visible, because the user has to do a lot of clicking between text fields, and it is really nasty when the mouse is always gone.

How can I make the cursor stay visible when typing in an `NSTextField`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:04:36.220

好的，我解决了。

当您在此处添加断点时，`+[NSCursor setHiddenUntilMouseMoves:]`您会注意到，Apple 调用`[NSTextField keyDown:]`
它时，为了防止鼠标消失，重写此方法不是一个好主意。`-(void)controlTextDidChange:(NSNotification *)obj`所以我使用 NSTextFieldDelegate 在和上获得通知`-(void)controlTextDidEndEditing:(NSNotification *)obj`。然后我打电话`[NSCursor setHiddenUntilMouseMoves:NO]`

它不是 100% 干净，但它可以工作。

非常感谢 Richard 和 Kurt 的大力帮助 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T04:26:36.670

我的猜测是，在苹果代码中很深，鼠标在打字时会消失。因为即使您刚开始打字，鼠标也会消失，甚至出现在文本框之外。就像您在浏览器窗口中单击并键入一样。

# iis-7 - Writing to IIS using Command Line

> ID：14316792
> 
> 赞同：0
> 
> 时间：2013-01-14T10:34:47.720
> 
> 标签：iis-7, batch-file, iis-6, iis-5

I am trying to install application using a script. This application creates a virtual directory under Default Web Site in IIS. I have written this script. Is this right script or i am missing some thing.

```
cd C:\Users\Administrator\Desktop
msiexec /qb /i ZFPSetup.msi INSTALLLOCATION="C:\Program Files (x86)\Application" TARGETVDIR="ZFP" WIXUI_EXITDIALOGOPTIONALCHECKBOX=1 /l*v "C:\log.txt"
iisvdir /create Default Web Site ZFP C:\Program Files (x86)\Application\ZFP 
call "C:\Program Files (x86)\Application\StartKaraf.bat" echo error 
```

I am getting below error:

```
MSI (s) (28:D0) [04:25:58:897]: Invoking remote custom action. DLL: C:\Windows\Installer\MSIF886.tmp, Entrypoint: WriteIIS7ConfigChanges
WriteIIS7ConfigChanges:  Error 0x80070002: Site not found for create application
WriteIIS7ConfigChanges:  Error 0x80070002: Failed to configure IIS application.
WriteIIS7ConfigChanges:  Error 0x80070002: WriteIIS7ConfigChanges Failed.
CustomAction WriteIIS7ConfigChanges returned actual error code 1603 (note this may not be 100% accurate if translation happened inside sandbox) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:45:30.957

> 错误 0x80070002：找不到创建应用程序的站点

也许这是由于缺少引号引起的，所以不是：

> ... iisvdir /create 默认网站 ...

尝试：

> ... iisvdir /create "默认网站" ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:42:25.050

使用简单的批处理文件并不是配置 IIS 的最佳方式。对于诸如此类的系统管理任务，Microsoft 创建了[PowerShell](http://en.wikipedia.org/wiki/Windows_PowerShell)。

在此处查看如何使用 PowerShell 配置 IIS：[http](http://www.iis.net/learn/manage/powershell) ://www.iis.net/learn/manage/powershell 。

下面是一个如何使用 PowerShell 在 IIS 中创建虚拟目录的示例：

```
PS IIS:\> New-Item 'IIS:\Sites\Default Web Site\DemoVirtualDir1' -type VirtualDirectory -physicalPath c:\test\virtualDirectory1 
```

上面的代码使用[PowerShell 管理单元来创建应用程序](http://www.iis.net/learn/manage/powershell/powershell-snap-in-creating-web-sites-web-applications-virtual-directories-and-application-pools)。

祝你好运！

# wpf - WPF MVVM Single ViewModel for Display and Editing

> ID：14316794
> 
> 赞同：1
> 
> 时间：2013-01-14T10:34:48.840
> 
> 标签：wpf, mvvm, viewmodel

I am using the example from [Josh Smith](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx). He has a WorkspaceViewModel which display a list of CustomerViewModels. He is using the same ViewModel for displaying all Customers and for editing one single customer.

Is this a good practice? If I have a list of CustomerViewModels I dont need the SaveCommand or the CloseCommand or some IsSelected Flag.

Is it better to have a seperate EditCustomerViewModel? But how to deal with Workspace related stuff? For example:

```
public class Workspace : ViewModel
{
    public ICommand CloseCommand;
}

public class AllCustomers : Workspace
{
    public ObservableCollection<CustomerViewModel> CustomerViewModels;
}

// Option A (one ViewModel for display and edit):
public class CustomerViewModel : ? 
{
    public string CustomerName;
    public ICommand SaveCommand;    
} 
```

Or seperation:

```
// Option B:
public class CustomerViewModel : ViewModel 
{
    public string CustomerName;
}

public class EditCustomerViewModel : Workspace
{
    public CustomerViewModel CustomerViewModel;
    public ICommand SaveCommand;
}

// Option C (CustomerViewModel does not need CloseCommand but EditCustomerViewModel does):
public class CustomerViewModel : Workspace 
{
    public string CustomerName;
}

public class EditCustomerViewModel : CustomerViewModel
{   
    public ICommand SaveCommand;    
} 
```

**Edit:** I try to clarify my problem. In the CustomerViewModel in the example of Josh Smith, he has Commands for closing and saving a customer. In the AllCustomerView he has a GridView that binds to a ObservableCollection of CustomerViewModels. But in the GridView the both commands are not necessary. In the GridView I can ignore both commands, but is that a good design?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:49:08.950

我不太确定您的意思，因为快速浏览该文章表明他同时使用了列表和视图/编辑视图模式，分别称为`AllCustomers­ViewModel`和`CustomerViewModel`。这肯定是推荐的做法，而不是使用具有多个职责的单一视图模型。

这两个视图模型都继承自`WorkspaceViewModel`其中添加了他的工作区功能。所以，总而言之，如果你想构建类似的东西，我会遵循他的模式。您还应该认真考虑 MVVM 框架，例如[Caliburn.Micro](http://caliburnmicro.codeplex.com/)，它添加了简单的基于约定的视图组合以及屏幕生命周期。

# oracle10g - 比较 Oracle 10g 和 Oracle 11g 模式

> ID：14316796
> 
> 赞同：0
> 
> 时间：2013-01-14T10:35:01.300
> 
> 标签：oracle10g, oracle11g, database-schema, schema-compare

我手头有一个任务，我们需要比较两个不同版本的两个数据库模式。

实际上，应用程序已升级为使用 Oracle 11g ，该应用程序的旧版本使用 Oracle 10g。基本上需要检查的是两个不同版本的应用程序架构的差异，主要是检查是否没有功能被破坏或没有遗漏相关架构更改

我做了一些研发，发现有很多工具可用于比较模式、DB Solo 等。但我的要求是比较两个不同版本的两个模式。这些工具可用于比较相同版本的模式。

我和前辈讨论后想出的一些解决方案 1）在2个DB模式之间建立一个DB链接，并做USER_OBJECTS的比较。然而，这种解决方案对我们来说是不可行的。

2）如果我们可以得到两个模式的类似文本的转储，基本的文本比较将给出模式差异。

但是，我不知道解决方案 2 是如何实现的。我看过一些较旧的帖子，例如 [比较两个模式并使用新模式的新列更新旧模式，](https://stackoverflow.com/questions/2332617/compare-two-schemas-and-update-the-old-schema-with-the-new-columns-of-new-schema)但我需要一个更简单的解决方案！

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:23:31.950

[您是否已经尝试过Oracle SQL Developer](http://www.oracle.com/technetwork/developer-tools/sql-developer/overview/index.html)的“工具”->“数据库差异” ？

# windows-8 - Where is the dump file of windows store app on windows 8?

> ID：14316797
> 
> 赞同：3
> 
> 时间：2013-01-14T10:35:01.503
> 
> 标签：windows-8, windows-runtime, windows-store-apps, windows-store

I can't find any dump file in test or publish enviroment when my windows store app crashs, instead the app just automatica terminate. How can I got dump file in test device or in dashboard, does something must done first?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T03:48:41.110

**`C:\Users\UserName\AppData\Local\Microsoft\Windows\WER\ReportArchive`**

此位置有应用程序的崩溃日志。请找到您的应用程序文件夹并获取**`Report.wer`**文件

# java - Java如何从数据库中获取数据到XML

> ID：14316800
> 
> 赞同：-1
> 
> 时间：2013-01-14T10:35:18.307
> 
> 标签：java, mysql, xml, sql-server-2008

我只是有一个简单的问题，是否可以将数据从 MySQL 数据库获取到网页中的 XML。例如，我有一个公共表单网站，用户可以在其中发布和回答问题，并且我想从我的网站的数据库中获取数据并进入 XML 树结构，以便我可以在我的桌面应用程序中使用 XML 解析器从该网站获取数据到我的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:43:17.403

是的，您可以通过使用 [Jaxb][1] 来做到这一点，它有助于将数据从 java 对象带到 xml。因此，您必须使用 sql 将数据导入 java 对象，然后使用 java 对象导入 xml。[1]：[http ://www.vogella.com/articles/JAXB/article.html#jaxb](http://www.vogella.com/articles/JAXB/article.html#jaxb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:42:45.247

您应该手动将您的转换`ResultSet`为`XML`循环遍历它的项目。

# java - Rounding up to 2 decimal place

> ID：14316803
> 
> 赞同：2
> 
> 时间：2013-01-14T10:35:37.747
> 
> 标签：java, rounding

I have this code below, my desired answer is 37.58 and not 37.56 or 37.60 after inputting 37576

```
BigDecimal n = new BigDecimal(num);
BigDecimal t = new BigDecimal(100);

BigDecimal res = n.divide(t);
BigDecimal b =res.setScale(1, BigDecimal.ROUND_HALF_UP);
DecimalFormat forma = new DecimalFormat("K0.00");
String bigf = forma.format(b);

txtnewk.setText(" " + bigf); 
```

what changes do I have to make?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T10:42:10.170

使用以下代码：

```
String num = "37576";
BigDecimal n = new BigDecimal(num);
BigDecimal t = new BigDecimal(1000);
BigDecimal res = n.divide(t);
BigDecimal b = res.setScale(2, BigDecimal.ROUND_HALF_UP); 
```

b 根据需要为 37.58。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:45:38.000

您使用了错误版本的除法（如果您立即四舍五入）。setScale 的值是错误的。你应该有：

```
BigDecimal res = n.divide(t, 2, BigDecimal.ROUND_HALF_UP); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T10:42:30.877

使用[此代码](https://stackoverflow.com/questions/2808535/round-a-double-to-2-significant-figures-after-decimal-point)进行四舍五入：

```
public static double round(double value, int places) {
    if (places < 0) throw new IllegalArgumentException();

    long factor = (long) Math.pow(10, places);
    value = value * factor;
    long tmp = Math.round(value);
    return (double) tmp / factor;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T11:01:41.910

使用`double`你可以做

```
long l = 37576; // or Long.parseLong(text);
double v = Math.round(l / 10.0) / 100.0;
System.out.println(v); 
```

印刷

```
37.58 
```

第一个四舍五入`/ 10.0`表示您想通过四舍五入删除最低位，并且`/ 100.0`表示您想将小数位移动两位数。

# .net - How do I secure my service using SSL for Services created using Service stack?

> ID：14316804
> 
> 赞同：3
> 
> 时间：2013-01-14T10:35:46.297
> 
> 标签：.net, rest, ssl, servicestack, x509

I would like to secure my REST service implemented over the Service Stack, by means of X509 certificates? I will be hosting my service in a .NET application.

I can build the service and it seems to work fine.

Any working example using certificates would be highly appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:43:16.167

我一直在关注这两个例子：

[http://pfelix.wordpress.com/2012/02/26/enabling-https-with-self-hosted-asp-net-web-api/](http://pfelix.wordpress.com/2012/02/26/enabling-https-with-self-hosted-asp-net-web-api/)

[http://blogs.msdn.com/b/jpsanders/archive/2009/09/29/walkthrough-using-httplistener-as-an-ssl-simple-server.aspx](http://blogs.msdn.com/b/jpsanders/archive/2009/09/29/walkthrough-using-httplistener-as-an-ssl-simple-server.aspx)

在这两个博客中，我做了以下事情：

1.  获得证书并安装在本地计算机>个人>证书

2.  将我的端点地址设置为：https://*:443/

3.  运行博客中的命令：

    netsh http 添加 urlacl url=https://+:443/ user=XXX

后来我发现这不起作用，这确实

```
 netsh http add urlacl url=https://*:443/ user=XXX 
```

然后链接证书：

```
netsh http add sslcert ipport=0.0.0.0:443 certhash=XXXX appid={XXX} 
```

这失败并出现致命错误 - 1312，此[链接](http://www.kozeniauskas.com/itblog/2011/03/25/ssl-certificate-add-failed-error-1312/)解释了问题的原因。对于我们的网络人员来说，解决方案相当容易，但超出了我对证书的理解。

一旦安装了正确的证书，netsh 命令就可以毫无问题地运行，并且我可以使用 SSL 启动并运行。

# python - Package python directory for different architectures

> ID：14316805
> 
> 赞同：0
> 
> 时间：2013-01-14T10:35:49.167
> 
> 标签：python, packages, cython

I have a personal python library consisting of several modules of scientific programs that I use. These live on a directory with the structure:

```
root/__init__.py   
root/module1/__init__.py
root/module1/someprog.py
root/module1/ (...)
root/module2/__init__.py
root/module2/someprog2.py
root/module2/somecython.pyx
root/module2/somecython.so
root/module2/somefortran.f
root/module2/somefortran.so
(...) 
```

I am constantly making changes to these programs and adding new files. With my current setup at work, I share the same directory with several machines of different architectures. What I want is a way to use these packages from python in the different architectures. If the packages were all pure python, this would be no problem. But the issue is that I have several compiled binaries (as shown in the example) from Cython and from f2py.

Is there a clever way to repackage these binaries so that python in the different systems only imports the relevant binaries? I'd like to keep the code organised in the same directory.

Obviously the simplest way would be to duplicate the directory or create another directory of symlinks. But this would mean that when new files are created, I'd have to update the symlinks manually.

Has anyone bumped into a similar problem, or can suggest a more pythonic approach to this organisation problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:54:39.580

可能您应该使用[setuptools](http://pypi.python.org/pypi/setuptools) / [distribute](http://pypi.python.org/pypi/distribute)。然后，您可以定义一个[setup.py](http://docs.python.org/2/distutils/setupscript.html)来根据您当前的平台编译所有文件，将它们复制到某个适当的目录并确保它们在您的`sys.path`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T21:23:43.153

在编译 python 的源代码时，您将执行以下操作。

将带有目录的 exec-prefix 标志传递给 ./configure

有关更多信息：./configure --help 将为您提供以下信息：

安装目录： --prefix=PREFIX 在 PREFIX [/usr/local] 中安装与体系结构无关的文件 --exec-prefix=EPREFIX 在 EPREFIX [PREFIX] 中安装体系结构相关的文件

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-20T16:48:29.603

不幸的是，没有办法做到这一点。python 包必须完全位于一个目录中。[PEP 382](http://www.python.org/dev/peps/pep-0382/)提议支持可以在不同目录中拆分的命名空间包，但被拒绝了。（无论如何，这些都是特殊的包裹。）

鉴于 python 包必须位于单个目录中，因此无法将已编译的扩展模块混合用于不同的体系结构。有两种方法可以缓解这个问题：

1.  将二进制扩展保存在一个单独的目录中，并将所有 python 包放在一个可以在架构之间共享的公共目录中。然后可以为不同的架构选择二进制扩展的单独目录，使用`PYTHONPATH`.
2.  为不同架构保留一个包含所有 python 文件和扩展的公共目录。对于每个架构，使用包名创建一个新目录。然后符号链接每个目录中的所有 python 文件和二进制文件。这仍然允许代码存在一个地方，但必须为每个新文件创建新的符号链接。

不幸的是，Thorsten Krans 建议的选项不适用于这个问题。使用 distutils/setuptools/distribute 仍然需要将所有 python 源文件安装在每个架构的目录中，从而抵消了将它们放在单个目录中的优势。（这不是一个完成的包，但总是在进行中。）

# python - What is the preferred conventional way of incorporating a third party library in Python open source projects?

> ID：14316806
> 
> 赞同：5
> 
> 时间：2013-01-14T10:35:51.617
> 
> 标签：python, setuptools

I'm working on a new Python authentication library for WSGI frameworks and want to use the [python-openid](https://github.com/openid/python-openid) and maybe some other third-party libs too. I see 2 options:

*   Distribute my library with a copy of the **third-party library** inside (via GIT submodules)
*   Let the user of **my library** resolve the dependency on the **third-party library** by himself

The question is:

**What is the preferred conventional way of incorporating a third party library in Python open source projects?**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T10:38:15.240

首选的方法是使用[setuptools](http://pypi.python.org/pypi/setuptools) / [distribute](http://pypi.python.org/pypi/distribute)并为您的项目定义一个[setup.py通过](http://docs.python.org/2/distutils/setupscript.html)[PyPi](http://pypi.python.org)下载第三方库。

这是我的一个项目的摘录。请注意 setup/install/test/extras-require 关键字参数的使用，这就是您要查找的内容

```
import distribute_setup
distribute_setup.use_setuptools()

import os
from setuptools import setup, find_packages

# Utility function to read the README file.
# Used for the long_description.  It's nice, because now 1) we have a top level
# README file and 2) it's easier to type in the README file than to put a raw
# string in below ...

def read(fname):
    return open(os.path.join(os.path.dirname(__file__), fname)).read()

setup(
    name='buildboticon',
    version='0.3.2',
    author='Marcus Lindblom',
    author_email='macke@yar.nu',
    description=('A buildbot monitoring utility'),
    license='GPL 3.0',
    keywords='buildbot systemtray pyqt',

    url='http://bitbucket.org/marcusl/buildboticon',
    download_url='http://packages.python.org/buildboticon',

    package_dir={'':'src'},
    packages=find_packages('src', exclude=['*.tests']),
    long_description=read('README'),

    entry_points={
        'setuptools.installation': [
            'eggsecutable = bbicon:main',
        ],
        'gui_scripts': [
            'buildboticon = bbicon:main',
        ]
    },

    setup_requires=[
        'setuptools_hg',
    ],

    tests_require=[
        'unittest2 >= 0.5',
        'mock >= 0.7.0b4',
    ],

    install_requires=[
        'pyyaml >= 0.3',
#        'pyqt >= 4.7'   # PyQt doesn't have anything useful on PyPi :(
    ],

    extras_require={
        'speech':  ['pyspeech >= 1.0'],
#        'phidgets': ['PhidgetsPython >= 2.1.7'],
    }, 
```

完整文件在这里：[https ://bitbucket.org/marcusl/buildboticon/src/5232de5ead73/python/setup.py](https://bitbucket.org/marcusl/buildboticon/src/5232de5ead73/python/setup.py)

# ios - iOS 上对 NSString 的 SoapRequest？

> ID：14316809
> 
> 赞同：1
> 
> 时间：2013-01-14T10:36:21.883
> 
> 标签：ios, objective-c, web-services, soap, sudzc

我正在使用 Sudzc.com 从 WDSL 生成的 API。我有这个方法：

```
- (SoapRequest*) getToolListAsXML: (id <SoapDelegate>) handler getEmptyFC: (BOOL) getEmptyFC repoid: (NSString* ) repoid 
```

我认为它调用 web 服务并接收一个 XML 作为字符串，因为 sudzc.com 生成的文档告诉我：

![文件](../Images/2e5cc9a7ed2b53a168747ca86cfedc6d.png)

但是我真的不知道 SoapDelegate 是如何工作的，如果我想要响应（作为字符串的列表）我应该做什么？这些例子更令人困惑，它说：

![例子](../Images/1fd37dfc1bd964da688a227f82148c84.png)

但是，很明显，

```
NSString resp = [service getToolListAsXML:self action:@selector(getToolListAsXMLHandler:) getEmptyFC: NO repoid: @""]; 
```

由于“不兼容的指针类型......”而不起作用

我对此很陌生，如果我说的是废话，我很抱歉。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:48:17.080

尝试这个

```
 [service getToolListAsXML:self action:@selector(getToolListAsXMLHandler:) getEmptyFC: NO repoid: @""]
    - (void) getToolListAsXMLHandler: (id) value {

if([value isKindOfClass:[NSError class]]) {
        //NSLog(@"%@", value);
        return;
    }

    // Handle faults
    if([value isKindOfClass:[SoapFault class]]) {
        //NSLog(@"%@", value);
        return;
    }
    NSString * resp =(NSString *)value;
    } 
```

您将收到字符串中的肥皂请求

# excel - 根据单元格值在新工作表上多次复制数据的 VBA 代码

> ID：14316810
> 
> 赞同：0
> 
> 时间：2013-01-14T10:36:24.500
> 
> 标签：excel, vba

我对 VBA 非常陌生。我正在尝试在我每天使用的工作表中自动执行复制功能。

我想要做的是复制名称和 ID 的次数，因为计数显示到 B 列和 C 列的下一张表中。如果计数为 0，计数器将移动到下一行而不复制名称和 ID那个特定的行。

```
名称 ID 计数
戴夫 dg124s 8
罗伯特 rc5675 10
玛丽 mg987 0
约翰 jh785 6
六月 fg71d 22
```

挑战是

1.  包含数据的行数可以在任何给定时间超过。（这里我们有 6 行数据，但可以增加到 40）。

2.  副本应该从最底部的行开始并到顶部。（在这种情况下从第 6 行开始）

3.  粘贴时，它应该从下一张表的最顶行开始（下一张表中的字段保持不变）

希望我已经解释清楚了。如果有人可以帮助我，我将不胜感激。

谢谢，

戴夫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:47:31.613

尝试这个 -

[编辑]

```
Sub CopyNames()

Dim rngCopy As Range, rngTemp As Range, rngTarget As Range
Dim intMultiple As Integer, i As Integer, intRow As Integer

Set rngCopy = Sheet1.Range("A2", Sheet1.Cells(Sheet1.Rows.Count, 1).End(xlUp)) 'Set range including names
Set rngTarget = Sheet2.Cells(Sheet2.Rows.Count, 2).End(xlUp).Offset(1, 0) 'Set target range to next available row in Sheet2

For intRow = rngCopy.Rows.Count To 1 Step -1
    Set rngTemp = rngCopy.Cells(intRow)
    intMultiple = rngTemp.Offset(0, 2) 'Find how many times to copy the name
        For i = 1 To intMultiple
            rngTarget.Value = rngTemp.Value 'Copy name
            rngTarget.Next.Value = rngTemp.Next.Value 'Copy ID
            Set rngTarget = rngTarget.Offset(1, 0) 'Move target range to next row
        Next
Next

End Sub 
```

# android - 日蚀中的黄色波浪下划线是什么意思？

> ID：14316816
> 
> 赞同：0
> 
> 时间：2013-01-14T10:36:37.297
> 
> 标签：android, eclipse

在我的应用程序中，我看到一些带有黄色波浪下划线的单词。它们是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T10:37:16.657

这些是拼写检查器的警告。

我可以禁用它`Window->Preferences->General->Editors->Text Editors->Spelling.`

此外，如果单词在字符串中，则如果黄线在变量或函数上，则为拼写错误，则可能是由于未使用变量或方法，或者未初始化变量，或者如果在函数调用上，那么可能是该函数已被弃用。很伤心@Boardy，谢谢:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T12:48:52.127

这取决于上下文。如果单词在字符串中，则如果黄线在变量或函数上，则为拼写错误，则可能是多种原因，例如未使用变量或方法，未初始化变量，或者如果打开一个函数调用，那么它可能是该函数已被弃用。

此外，如果您将鼠标悬停在黄色波浪线上，它通常会告诉您它的警告内容。

# linux - Redmine RailsBaseURI

> ID：14316818
> 
> 赞同：5
> 
> 时间：2013-01-14T10:36:43.117
> 
> 标签：linux, redmine

[我用这个 How-To http://www.redmine.org/projects/redmine/wiki/HowTo_Install_Redmine_using_Debian_package](http://www.redmine.org/projects/redmine/wiki/HowTo_Install_Redmine_using_Debian_package)安装了 Redmine

```
ln -s /usr/share/redmine/public /var/www/redmine

chown -R www-data:www-data /var/www/redmine
echo "RailsBaseURI /redmine" > /etc/apache2/sites-available/redmine
a2ensite redmine
/etc/init.d/apache2 reload
/etc/init.d/apache2 restart 
```

但我收到以下消息重新启动 apache2。

```
Syntax error on line 1 of /etc/apache2/sites-enabled/redmine:
Invalid command 'RailsBaseURI', perhaps misspelled or defined by a module not included in the server configuration
Action 'configtest' failed.
The Apache error log may have more information.
 failed! 
```

最好的祝愿

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-15T20:58:47.477

部分解决了@favoretti 的建议：

```
#apt-get install libapache2-mod-passenger
#/etc/init.d/apache2 reload
Reloading web server config: apache2. 
```

意味着错误消失了

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-06T20:22:46.060

我是由于谷歌搜索“无效命令'RailsBaseURI'而到达的。这里没有给我答案，但我后来意识到这个错误是由于未启用乘客引起的。

假设您已经安装了它，您可以使用`sudo a2enmod passenger`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-04T12:42:43.263

您应该检查乘客配置。

1.是否在/etc/apache2/mods-enabled中链接passenger.conf和passenger.load

```
/etc/apache2/mods-enabled# ls passenger.*
passenger.conf
passenger.load 
```

2.检查您的配置文件：passenger.conf/passenger.load

乘客.conf：

```
<IfModule mod_passenger.c>
  PassengerRoot /home/hao/.rvm/gems/ruby-1.9.3-p448@rails4.0/gems/passenger-4.0.14
  PassengerDefaultRuby /home/hao/.rvm/wrappers/ruby-1.9.3-p448@rails4.0/ruby
</IfModule> 
```

乘客负载：

```
LoadModule passenger_module /home/hao/.rvm/gems/ruby-1.9.3-p448@rails4.0/gems/passenger-4.0.14/buildout/apache2/mod_passenger.so 
```

3.根据[官方文件，乘客是否正在跑步](http://www.modrails.com/documentation/Users%20guide%20Apache.html#verify_passenger_running)

```
Restart your web server and run:
passenger-memory-stats 
```

# java - android：如何找到表单小部件或图像视图的位置？

> ID：14316820
> 
> 赞同：3
> 
> 时间：2013-01-14T10:36:44.583
> 
> 标签：java, android, drag-and-drop, android-linearlayout

在我的应用程序中，我将 textview、imageview 从一个线性布局拖放到另一个线性布局。如何以编程方式找到 textview 或 imageview 的当前位置，无论它是第一个布局还是第二个布局。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:45:21.020

您可以通过调用获取视图父级`view.getParent()`，然后将其转换为`LinearLayout`. 然后，我只需检查父 ID`view.getId()`并检查它是否等于`R.id.nameOfYourFirstLayout`或`R.id.nameOfYourSecondLayout`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:41:08.127

您可以尝试检索父视图并检查它的 ID：

```
View parent = (View)view.getParent(); 
```

还是布局也是动态的？

# java - 使用 XMLConfiguration() 编辑 xml 文件中的数据

> ID：14316821
> 
> 赞同：0
> 
> 时间：2013-01-14T10:36:47.747
> 
> 标签：java, xml

我有点困惑如何编辑 xml 内容，例如我有一个 xml 文件

```
<configuration>
<steps>
<step>
    <step1>abc</step1>
    <step2>def</step2>
</step>

<step>
    <step1>pqr</step1>
    <step2>xyz</step2>
</step>
</steps>
</configuration> 
```

如何将“xyz”编辑为“stu”

我尝试使用 commons-configuration-1.6.jar 的 XMLConfiguration

```
setProp(String name, String tochange){ // here I pass name as  "pqr" , toChange as "stu"
      XMLConfiguration config = new XMLConfiguration("config.xml");
      //TODO: config.setProperty("steps.step.step2",tochange); Here I am not sure what to do..
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:40:24.473

我想你需要

```
steps.step(1).step2 
```

以识别第二步节点。有关更多信息，请参阅[此文档](http://commons.apache.org/configuration/userguide-1.2/howto_xml.html)。请注意，它从 0 开始索引，而不是 1（与 XPath 不同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:48:37.673

尝试这个

```
XMLConfiguration config = new XMLConfiguration("config.xml");
config.addProperty("steps.step(2).step2",tochange); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-02T02:33:35.453

为了将“xyz”编辑为“stu”并显示xml

公共类数据更改 {

```
public static void main(String[] args) throws ConfigurationException {
    XMLConfiguration config = new XMLConfiguration("change.xml");
    config.setProperty("steps.step(1).step2", "stu");       
    StringWriter s = new StringWriter();
    config.save(s);
    System.out.println(s.toString());
} 
```

}

# android - Android 4.0 或更高版本中可绘制颜色的奇怪行为

> ID：14316826
> 
> 赞同：3
> 
> 时间：2013-01-14T10:37:04.927
> 
> 标签：android, android-drawable

我对android资源有一个奇怪的问题。我在 Android 2.2 上创建了应用程序`(android:minSdkVersion="8")`。该应用程序工作正常。

当我在例如 Android 4.0 上安装应用程序时，该应用程序工作正常，但是在第一次运行时，一些资源发生了变化。

**例如**，我有一个名为 primary_color 的可绘制颜色，它指的是`#FFFFFF`html 颜色。安装后，系统呈现黑色而不是白色。在某些情况下`@android:color/white`呈现黑色。

强制关闭应用程序并重新启动应用程序可解决此问题。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T13:54:38.850

这是由 Android 版本 4.0 到 4.1.3 中的错误引起的，我一直在测试类似的问题，即仅在具有这些版本的设备上可绘制对象变为黑色，它不存在于 android 版本 > 4.2 的设备中。

我确定您在自己的研究中注意到了，但似乎没有正确记录，也没有官方解决方案，但我可以提供一些解决方法：

1）关闭硬件加速，我为我的问题使用了不同的解决方案，但已知这可以解决上述 Android 版本中图像的一些问题。如果您想为您的应用程序启用硬件加速，您可以通过将其添加到清单中的活动声明来禁用它以解决问题活动。

```
<activity
 android:name="activityName"
 android:hardwareAccelerated="false"/> 
```

2）对于特定于您的示例的解决方案，请尝试将颜色设置为`@android:color/transparent`，这解决了我需要背景可绘制以保持白色的问题。

3) 请参阅此处：[http](http://code.google.com/p/android/issues/detail?id=34619) ://code.google.com/p/android/issues/detail?id=34619以查看类似的记录错误，其中一些解决方案也可能适用于您的问题。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-24T19:42:49.770

我遇到了完全相同的问题！我在colors.xml上有这个

```
 <resources>
    <color name="white">#ffffffff</color>
 </resources> 
```

在styles.xml上

```
<style name="AppTheme" parent="Theme.AppCompat.Light.NoActionBar">
  <item name="android:windowBackground">@color/white</item>
</style> 
```

问题是，当在活动中使用片段（包含 ListView）时，ListView 在第一次运行时显示白色作为背景（这是我需要的），但在第二次运行时，ListView 背景为黑色。该问题仅在 Android 4.0 上存在（我没有在 4.1 上测试）但在 Android 4.3、4.4、5 等上运行良好。

原来只有白色有问题，当使用白色以外的颜色时，没有黑色背景问题！

因此，由于我想要一个白色背景，并且我不想过度绘制具有多个背景，因此在 styles.xml 上将白色设置为 windowBackground 很重要，但同时它会导致黑色背景问题！

因此，作为解决方案，我创建了另一种颜色，它不是完全白色，而是白色

```
<resources>
    <color name="fakewhite">#fffefefe</color>
</resources> 
```

在styles.xml上

```
<style name="AppTheme" parent="Theme.AppCompat.Light.NoActionBar">
    <item name="android:windowBackground">@color/fakewhite</item>
</style> 
```

因此，简而言之，对于 ListView 等视图，颜色 #ffffffff 会转换为 #00000000，我也注意到 ScrollView 上的这种行为。这可能不是一个完美的解决方案，但它对我有用！

# c++ - 查找未实现的类方法

> ID：14316833
> 
> 赞同：10
> 
> 时间：2013-01-14T10:37:57.680
> 
> 标签：c++, methods, interface-implementation

在我的应用程序中，我正在处理一个较大的类（超过 50 个方法），每个类都相当复杂。我并不担心复杂性，因为它们在将功能块分离成更小的方法然后调用它们方面仍然很简单。这就是方法数量变大的原因（其中很多方法是私有的——特别是隔离功能块）。

然而，当我进入实施阶段时，我发现我忘记了哪些方法已经实施，哪些方法没有实施。然后在链接阶段，我收到未实现方法的错误。这很好，但是类之间有很多相互依赖关系，为了链接应用程序，我需要准备好一切。然而，我更愿意先上一堂课，然后再去下一堂课。

由于我无法控制的原因，我不能使用 IDE——只能使用纯文本编辑器和 g++ 编译器。有没有办法在一个类中找到未实现的方法而不进行完整链接？现在，我确实对每个方法的实现 cpp 文件中的方法签名进行文本搜索，但这非常耗时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T11:50:08.277

您可以为您打算实现的每个方法添加一个存根，然后执行以下操作：

```
void SomeClass::someMethod() {
    #error Not implemented
} 
```

使用 gcc，这会为每个输出文件、行号和错误消息。因此，您可以只编译有问题的模块并 grep 为“未实现”，而无需运行链接器。

尽管您仍然需要将这些存根添加到实现文件中，这可能是您最初试图规避的部分内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:41:20.973

尽管在不实际尝试链接的情况下看不到执行此操作的简单方法，但您可以 grep 链接器输出“未定义对 ClassInQuestion:: 的引用”，它应该只为您提供与给定类的方法的此错误相关的行.

这至少可以让您避免从整个链接过程中筛选所有错误消息，尽管它不会阻止必须通过完整链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T12:28:10.810

在过去，我为每个类构建了一个可执行文件：

```
#include "klass.h"
int main() {
    Klass object;
    return 0;        
} 
```

这减少了构建时间，可以让您一次专注于一门课程，加快您的反馈循环。

它可以很容易地实现自动化。

不过，我真的会考虑减少该课程的规模！

**编辑**

如果有障碍，您可以使用蛮力：

```
#include "klass.h"

Klass createObject() {
    return *reinterpret_cast<Klass>(0);
}    

int main() {
    Klass object = createObject();
    return 0;        
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T12:41:47.010

这就是单元测试和测试覆盖工具的用途：预先为所有功能编写最少的测试。缺少功能的测试不会链接。测试覆盖率报告会告诉你是否所有的函数都被访问过。

当然，这只是在一定程度上有所帮助，它不是 100% 的傻瓜证明。不过，您的开发方法对我来说听起来有点狡猾：孤立地一个一个地开发类在实践中是行不通的：相互依赖的类（请记住：减少依赖关系！）需要在某种程度上同步开发。你不能为一个类完成一个完整的实现，然后再转移到下一个类，永不回头。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T23:08:06.307

您可以编写一个小脚本来分析方法实现的头文件（正则表达式将使这变得非常简单），然后扫描实现文件以查找相同的方法实现。

例如在 Ruby 中（对于 C++ 编译单元）：

```
className = "" # Either hard-code or Regex /class \w+/
allMethods = []

# Scan header file for methods
File.open(<headerFile>, "r") do |file|
    allLines = file.map { |line| line }
    allLines.each do |line|
        if (line =~ /(\);)$/) # Finds lines ending in ");" (end of method decl.)
            allMethods << line.strip!
        end
    end
end

implementedMethods = []
yetToImplement = []

# Scan implementation file for same methods
File.open(<implementationFile>, "r") do |file|
    contents = file.read
    allMethods.each do |method|
        if (contents.include?(method)) # Or (className + "::" + method)
            implementedMethods << method
        else
            yetToImplement << method
        end
    end
end

# Print the results (may need to scroll the code window)
print "Yet to implement:\n"
yetToImplement.each do |method|
    print (method + "\n")
end

print "\nAlready implemented:\n"
implementedMethods.each do |method
    print (method + "\n")
end 
```

其他人将能够告诉您如何将其自动化到构建过程中，但这是快速检查哪些方法尚未实现的一种方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-16T11:39:44.197

c++11的delete关键字可以解决问题

```
struct S{
  void f()=delete; //unimplemented
}; 
```

如果 C++11 不可用，您可以使用 private 作为解决方法

```
struct S{
  private: //unimplemented
  void f();
}; 
```

使用这两种方法，您可以在 .cpp 文件中编写一些测试代码

```
//test_S.cpp
#include "S.hpp"
namespace{
  void test(){
    S* s;
    s->f(); //will trigger a compilation error
  }
} 
```

请注意，您的测试代码将永远不会被执行。命名空间{} 告诉链接器，此代码永远不会在当前编译单元（即 test_S.cpp）之外使用，因此将在编译检查后立即删除。

因为这段代码永远不会被执行，你实际上不需要在测试函数中创建一个真正的 S 对象。您只想欺骗编译器以测试 S 对象是否具有可调用的 f() 函数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-05T04:26:46.793

您可以创建自定义异常并抛出它，以便：

*   调用未实现的函数将终止应用程序，而不是使其处于意外状态
*   即使没有实现所需的功能，仍然可以编译代码
*   您可以通过查看编译器警告（通过使用一些可能令人讨厌的技巧）或搜索您的项目目录轻松找到未实现的函数
*   您可以选择从发布版本中删除异常，如果有任何函数试图抛出异常，这将导致构建错误

```
#if defined(DEBUG)

#if defined(__GNUC__)
#define DEPRECATED(f, m) f __attribute__((deprecated(m)))
#elif defined(_MSC_VER)
#define DEPRECATED(f, m) __declspec(deprecated(m)) f
#else
#define DEPRECATED(f, m) f
#endif

class not_implemented : public std::logic_error {
public:
    DEPRECATED(not_implemented(), "\nUnimplemented function") : logic_error("Not implemented.") { }
}

#endif // DEBUG 
```

未实现的函数如下所示：

```
void doComplexTask() {
    throw not_implemented();
} 
```

您可以通过多种方式查找这些未实现的功能。在 GCC 中，调试版本的输出是：

```
main.cpp: In function ‘void doComplexTask()’:
main.cpp:21:27: warning: ‘not_implemented::not_implemented()’ is deprecated: 
Unimplemented function [-Wdeprecated-declarations]
     throw not_implemented();
                           ^
main.cpp:15:16: note: declared here
     DEPRECATED(not_implemented(), "\nUnimplemented function") : logic_error("Not implemented.") { }
                ^~~~~~~~~~~~~~~
main.cpp:6:26: note: in definition of macro ‘DEPRECATED’
 #define DEPRECATED(f, m) f __attribute__((deprecated(m))) 
```

发布版本：

```
main.cpp: In function ‘void doComplexTask()’:
main.cpp:21:11: error: ‘not_implemented’ was not declared in this scope
     throw not_implemented;
           ^~~~~~~~~~~~~~~ 
```

您可以使用以下命令搜索异常`grep`：

```
$ grep -Enr "\bthrow\s+not_implemented\b"
main.cpp:21:    throw not_implemented(); 
```

使用的好处`grep`是它`grep`不关心你的构建配置，无论如何都会找到一切。你也可以去掉不推荐使用的限定符来清理你的编译器输出——上面的 hack 会产生很多不相关的噪音。根据您的优先级，这可能是一个劣势（例如，如果您当前正在实现特定于 Linux 的功能，则您可能不关心特定于 Windows 的功能，反之亦然。）

如果您使用 IDE，大多数都可以让您搜索整个项目，有些甚至可以让您右键单击一个符号并在任何使用它的地方查找。（但你说你不能使用一个，所以在你的情况下`grep`是你的朋友。）

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-01-14T10:59:44.080

我看不到这样做的简单方法。拥有几个没有实现的类很容易导致在多成员团队中跟踪将是一场噩梦。

就个人而言，我想对我编写的每个类进行单元测试，而测试驱动开发是我的建议。但是，这涉及每次您要检查状态时链接代码。有关使用 TDD 的工具，请参阅[此处](https://stackoverflow.com/questions/5307627/test-driven-development-with-c)的链接。

另一种选择是编写一段代码，可以解析源代码并检查要实现的功能。GCC_XML 是一个很好的起点。

# asp.net - 正确配置后 Aspnet 配置连接测试失败

> ID：14316834
> 
> 赞同：1
> 
> 时间：2013-01-14T10:38:02.167
> 
> 标签：asp.net

我正在使用 VS2012Express 版本构建 Web 表单。我正在尝试实现 SqlMembership 提供程序。我进行了配置，所有必需的对象都已安装。我可以在我的数据库服务器上看到带有所有对象的 aspnetdb。但是当我尝试通过转到项目和 ASPNET 配置然后提供程序选项卡来创建新用户时。我单击测试连接并收到此错误。`Could not establish a connection to the database. If you have not yet created the SQL Server database, exit the Web Site Administration tool, use the aspnet_regsql command-line utility to create and configure the database, and then return to this tool to set the provider.` 我已经完成了这条错误消息所告诉的内容，并查看了 MSDN 网站上的几个示例。问题可能是因为我的机器上同时安装了 VS2010 Profession 和 VS2012 Express，或者在某处做错了什么？这是我的网络配置。

# jquery - 如何改组在 jquery 中添加的类的不透明度

> ID：14316835
> 
> 赞同：0
> 
> 时间：2013-01-14T10:38:14.843
> 
> 标签：jquery, css, if-statement, jquery-selectors

我在 jquery 中使用 jquery 向我的图像添加了类

```
$('.myimage img').addClass('img_opacity').css({"position":"absolute","z-index":"999","opacity":"0"}) 
```

现在我想`img_opacity`用 jquery variable 将类的不透明度从“0”和“1”洗牌`myvar`。此 jquery 变量的值为`opa1 and opa2`. 如何在上面的 jquery 脚本中使用 if else 来调整不透明度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T10:50:54.950

不确定我是否理解您的问题，但也许这符合您的需求：

```
var opa1 = 0, opa2 = 1;
$('.img_opacity').each(function(){
    var myvar = $(this).is(':hidden')?opa2:opa1;
    $(this).css({opacity:myvar});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:54:14.883

如果你想在点击时改变不透明度，这可能是答案[http://jsfiddle.net/vleran/ErajA/](http://jsfiddle.net/vleran/ErajA/)

**HTML**

```
<a href="#">Shuffle!</a>

<div class="myimage">
  <img class="is-visible" src="http://www.osa-opn.org/opn/media/Images/ImageOfTheWeek/12-10-22.jpg?width=1024&height=1024&ext=.jpg" alt="NASSA"/>
</div> 
```

**jQuery**

```
$('a').click( function(e) {

e.preventDefault();
  if($('img').hasClass('is-visible')) {
    $('img').animate({opacity: 0}, 500).addClass('is-hidden').removeClass('is-visible');
  } else {
    $('img').animate({opacity: 1}, 500).addClass('is-visible').removeClass('is-hidden');
  }
}); 
```

# multithreading - 使用 Invoke 调用 ComboBox Clear 函数时如何避免 RaceOnRCW

> ID：14316839
> 
> 赞同：0
> 
> 时间：2013-01-14T10:38:21.637
> 
> 标签：multithreading, combobox

我正在开发像 TeraTerm 这样的 UART 终端程序。我正在制作自己的终端程序，因为我需要一些在其他终端程序中找不到的功能。

我的终端程序可以打开几个终端窗口，每个窗口都显示来自所选 COM 端口的输出。每个终端窗口都在自己的线程中运行。

我已经覆盖了终端窗口窗体的 WndProc 函数来捕获设备更改事件，因为我想用当前 PC 的可用 COM 端口更新 ComboBox 的项目。如果用户插入 USB COM 端口设备，这样做是为了使 COM 端口列表保持最新。

我的 WndProc 如下所示：

```
 protected override void WndProc(ref Message m)
    {
        switch(m.Msg)
        {
            case WM_DEVICECHANGE:
                GetAvailableCOMPorts();
                COMPortsComboBox.Invoke(UpdateCOMPortsComboBoxDelegate);
                break;
        }

        base.WndProc(ref m);
    } 
```

UpdateCOMPortsComboBoxDelegate 是在发生设备更改时更新 ComboBox 中项目的函数。如果设备不是 COM 设备，则无关紧要。我不检查以保持简单。

委托所指向的 UpdateCOMPortsComboBox 函数如下所示：

```
 private void UpdateCOMPortsComboBox()
    {
        bool State                  = COMPortsComboBox.Enabled;
        COMPortsComboBox.Enabled    = false;           
        COMPortsComboBox.Items.Clear();
        COMPortsComboBox.Enabled    = State;

        // Then add the new list of COM ports
        for(int i = 0; i < AvailableSerialPorts.Length; i++)
        {
            COMPortsComboBox.Items.Add(AvailableSerialPorts[i]);
        }
    } 
```

我的问题是我有时会在 Clear() 方法调用中得到 RaceOnRCW，即使我已经使用 Invoke 来确保在运行控制消息循环的线程上调用它。

到底是怎么回事？

我该如何防止这种情况发生？

或者，也许我怎样才能确定控件是否正在另一个线程上使用？然后也许等待另一个线程完成。

当设备更改事件发生时，是否有更好的方法来使用新列表更新 ComboBox 项？

调用堆栈发生时如下所示：

```
 mscorlib.dll!System.__ComObject.ReleaseSelf() + 0x5 bytes   
    mscorlib.dll!System.Runtime.InteropServices.Marshal.ReleaseComObject(object o) + 0x9a bytes 
    System.Windows.Forms.dll!System.Windows.Forms.StringSource.ReleaseAutoComplete() + 0x11 bytes   
    System.Windows.Forms.dll!System.Windows.Forms.ComboBox.OnHandleDestroyed(System.EventArgs e) + 0x85 bytes   
    System.Windows.Forms.dll!System.Windows.Forms.Control.WmDestroy(ref System.Windows.Forms.Message m) + 0x46 bytes    
    System.Windows.Forms.dll!System.Windows.Forms.Control.WndProc(ref System.Windows.Forms.Message m) + 0x44d bytes 
    System.Windows.Forms.dll!System.Windows.Forms.ComboBox.WndProc(ref System.Windows.Forms.Message m) + 0x882 bytes    
    System.Windows.Forms.dll!System.Windows.Forms.Control.ControlNativeWindow.OnMessage(ref System.Windows.Forms.Message m) + 0x13 bytes    
    System.Windows.Forms.dll!System.Windows.Forms.Control.ControlNativeWindow.WndProc(ref System.Windows.Forms.Message m) + 0x31 bytes  
    System.Windows.Forms.dll!System.Windows.Forms.NativeWindow.DebuggableCallback(System.IntPtr hWnd, int msg, System.IntPtr wparam, System.IntPtr lparam) + 0x64 bytes 
    [Native to Managed Transition]  
    [Managed to Native Transition]  
    System.Windows.Forms.dll!System.Windows.Forms.UnsafeNativeMethods.DestroyWindow(System.Runtime.InteropServices.HandleRef hWnd) + 0x10 bytes 
    System.Windows.Forms.dll!System.Windows.Forms.NativeWindow.DestroyHandle() + 0x89 bytes 
    System.Windows.Forms.dll!System.Windows.Forms.Control.DestroyHandle() + 0x157 bytes 
    System.Windows.Forms.dll!System.Windows.Forms.Control.RecreateHandleCore() + 0x16a bytes    
    System.Windows.Forms.dll!System.Windows.Forms.ComboBox.RecreateHandleCore() + 0x1a bytes    
    System.Windows.Forms.dll!System.Windows.Forms.ComboBox.SetAutoComplete(bool reset, bool recreate) + 0x105 bytes 
    System.Windows.Forms.dll!System.Windows.Forms.ComboBox.ObjectCollection.ClearInternal() + 0xa1 bytes    
    System.Windows.Forms.dll!System.Windows.Forms.ComboBox.ObjectCollection.Clear() + 0x17 bytes    
>   Echo.exe!Echo.Echo.UpdateCOMPortsComboBox() Line 231 + 0x1d bytes   C#
    [Native to Managed Transition]  
    mscorlib.dll!System.Delegate.DynamicInvokeImpl(object[] args) + 0x77 bytes  
    System.Windows.Forms.dll!System.Windows.Forms.Control.InvokeMarshaledCallbackDo(System.Windows.Forms.Control.ThreadMethodEntry tme) + 0xa7 bytes    
    System.Windows.Forms.dll!System.Windows.Forms.Control.InvokeMarshaledCallbackHelper(object obj) + 0x90 bytes    
    System.Windows.Forms.dll!System.Windows.Forms.Control.InvokeMarshaledCallback(System.Windows.Forms.Control.ThreadMethodEntry tme) + 0xa2 bytes  
    System.Windows.Forms.dll!System.Windows.Forms.Control.InvokeMarshaledCallbacks() + 0xda bytes   
    System.Windows.Forms.dll!System.Windows.Forms.Control.MarshaledInvoke(System.Windows.Forms.Control caller, System.Delegate method, object[] args, bool synchronous) + 0x365 bytes   
    System.Windows.Forms.dll!System.Windows.Forms.Control.Invoke(System.Delegate method, object[] args) + 0x50 bytes    
    System.Windows.Forms.dll!System.Windows.Forms.Control.Invoke(System.Delegate method) + 0x7 bytes    
    Echo.exe!Echo.Echo.WndProc(ref System.Windows.Forms.Message m) Line 247 + 0x19 bytes    C#
    System.Windows.Forms.dll!System.Windows.Forms.Control.ControlNativeWindow.OnMessage(ref System.Windows.Forms.Message m) + 0x13 bytes    
    System.Windows.Forms.dll!System.Windows.Forms.Control.ControlNativeWindow.WndProc(ref System.Windows.Forms.Message m) + 0x31 bytes  
    System.Windows.Forms.dll!System.Windows.Forms.NativeWindow.DebuggableCallback(System.IntPtr hWnd, int msg, System.IntPtr wparam, System.IntPtr lparam) + 0x64 bytes 
    [Native to Managed Transition]  
    [Managed to Native Transition]  
    System.Windows.Forms.dll!System.Windows.Forms.StringSource.Bind(System.Runtime.InteropServices.HandleRef edit, int options) + 0x46 bytes    
    System.Windows.Forms.dll!System.Windows.Forms.ComboBox.SetAutoComplete(bool reset, bool recreate) + 0x2f4 bytes 
    System.Windows.Forms.dll!System.Windows.Forms.ComboBox.ObjectCollection.Add(object item) + 0x55 bytes   
    Echo.exe!Echo.Echo.UpdateCOMPortsComboBox() Line 237 + 0x34 bytes   C#
    [Native to Managed Transition]  
    mscorlib.dll!System.Delegate.DynamicInvokeImpl(object[] args) + 0x77 bytes  
    System.Windows.Forms.dll!System.Windows.Forms.Control.InvokeMarshaledCallbackDo(System.Windows.Forms.Control.ThreadMethodEntry tme) + 0xa7 bytes    
    System.Windows.Forms.dll!System.Windows.Forms.Control.InvokeMarshaledCallbackHelper(object obj) + 0x90 bytes    
    System.Windows.Forms.dll!System.Windows.Forms.Control.InvokeMarshaledCallback(System.Windows.Forms.Control.ThreadMethodEntry tme) + 0xa2 bytes  
    System.Windows.Forms.dll!System.Windows.Forms.Control.InvokeMarshaledCallbacks() + 0xda bytes   
    System.Windows.Forms.dll!System.Windows.Forms.Control.MarshaledInvoke(System.Windows.Forms.Control caller, System.Delegate method, object[] args, bool synchronous) + 0x365 bytes   
    System.Windows.Forms.dll!System.Windows.Forms.Control.Invoke(System.Delegate method, object[] args) + 0x50 bytes    
    System.Windows.Forms.dll!System.Windows.Forms.Control.Invoke(System.Delegate method) + 0x7 bytes    
    Echo.exe!Echo.Echo.WndProc(ref System.Windows.Forms.Message m) Line 247 + 0x19 bytes    C#
    System.Windows.Forms.dll!System.Windows.Forms.Control.ControlNativeWindow.OnMessage(ref System.Windows.Forms.Message m) + 0x13 bytes    
    System.Windows.Forms.dll!System.Windows.Forms.Control.ControlNativeWindow.WndProc(ref System.Windows.Forms.Message m) + 0x31 bytes  
    System.Windows.Forms.dll!System.Windows.Forms.NativeWindow.DebuggableCallback(System.IntPtr hWnd, int msg, System.IntPtr wparam, System.IntPtr lparam) + 0x64 bytes 
    [Native to Managed Transition]  
    [Managed to Native Transition]  
    System.Windows.Forms.dll!System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(System.IntPtr dwComponentID, int reason, int pvLoopData) + 0x1b8 bytes    
    System.Windows.Forms.dll!System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(int reason, System.Windows.Forms.ApplicationContext context) + 0x16c bytes  
    System.Windows.Forms.dll!System.Windows.Forms.Application.ThreadContext.RunMessageLoop(int reason, System.Windows.Forms.ApplicationContext context) + 0x61 bytes    
    System.Windows.Forms.dll!System.Windows.Forms.Application.RunDialog(System.Windows.Forms.Form form) + 0x33 bytes    
    System.Windows.Forms.dll!System.Windows.Forms.Form.ShowDialog(System.Windows.Forms.IWin32Window owner) + 0x38f bytes    
    System.Windows.Forms.dll!System.Windows.Forms.Form.ShowDialog() + 0x7 bytes 
    Echo.exe!Echo.Program.NewEcho() Line 48 + 0xa bytes C#
    mscorlib.dll!System.Threading.ThreadHelper.ThreadStart_Context(object state) + 0x63 bytes   
    mscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state, bool ignoreSyncCtx) + 0xb0 bytes    
    mscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state) + 0x2c bytes    
    mscorlib.dll!System.Threading.ThreadHelper.ThreadStart() + 0x44 bytes   
    [Native to Managed Transition] 
```

我使用以下代码在单独的线程中创建新的终端窗口：

```
 public static void CreateNewEchoThread()
    {
        //// Create a new thread
        Thread  EchoThread      = new Thread(new ThreadStart(Program.NewEcho));

        // Set thread parameters
        EchoThread.IsBackground = true;
        EchoThread.SetApartmentState(ApartmentState.STA);

        //// Start the thread
        EchoThread.Start();

        // Increment the number of open Echo forms
        Echo.NumberOfOpenWindows++;
    }

    [STAThread]
    static void NewEcho()
    {
        // Create a new Echo form window and show it as a Dialog to prevent the thread from exiting immediately.
        Echo NewEchoForm    = new Echo();
        NewEchoForm.ShowDialog();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:48:49.730

我找到了一种避免 RaceOnRCW 的方法。

我用一个一个一个地删除每个项目的循环替换 Clear 调用。不是我喜欢的解决方案，但它似乎有效。

我仍然想听听有关如何执行此操作的其他想法，因为我无法使用清除功能让我很困扰。

```
int NItems  = COMPortsComboBox.Items.Count;
for(int i = 0; i < NItems; i++)
{
    COMPortsComboBox.Items.RemoveAt(0);
} 
```

# mysql - 来自和到单个表的 Sql 组合

> ID：14316840
> 
> 赞同：9
> 
> 时间：2013-01-14T10:38:28.923
> 
> 标签：mysql, sql

我有一个看起来像这样的表：

表格摘录

```
 Owner   | Attribute | value
----------------------------------------------------
    10      | COLOR     | BLUE
    10      | COLOR     | RED
    10      | COLOR     | GREEN
    10      | SIZE      | BIG
    20      | COLOR     | GREEN
    20      | SIZE      | MEDIUM
    20      | MEMORY    | 16G
    20      | MEMORY    | 32G
    30      | COLOR     | RED
    30      | COLOR     | BLUE
    30      | MEMORY    | 64G 
```

是否有一个 SQL 将计算所有属性与单个索引的组合（结果中的最后一列）：

```
Owner   | Attribute | Value | Rule_No
10      | COLOR     | BLUE  | 1
10      | SIZE      | BIG   | 1
10      | COLOR     | RED   | 2
10      | SIZE      | BIG   | 2
10      | COLOR     | GREEN | 3
10      | SIZE      | BIG   | 3
20      | COLOR     | GREEN | 1
20      | SIZE      | MEDIUM| 1
20      | MEMORY    | 16G   | 1
20      | COLOR     | GREEN | 2
20      | SIZE      | MEDIUM| 2
20      | MEMORY    | 32G   | 2
30      | COLOR     | BLUE  | 1
30      | MEMORY    | 64G   | 1
30      | COLOR     | RED   | 2
30      | MEMORY    | 64G   | 2 
```

每个所有者的规则编号都是唯一的（所有者“10”的规则“1”与所有者“20”的规则“1”无关。

我尝试使用 SQL 交叉连接，但属性的数量不固定，然后我不能使用它（每个属性需要一个交叉连接），我希望组合是新行而不是新列。

我正在尝试使用`Talend Open Studio - Data Integration`它，但仅使用 SQL 的解决方案对我来说会更好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T17:06:50.227

您是否*真的*想要问题中给出的形式的数据（然后需要进一步汇总`Rule_No`才能在最可能的情况下有用），还是您最终寻求对它进行调整？也就是说，规则连接在一起（每个属性成为自己的列），如下所示：

```
+---------+-------+--------+--------+--------+
| 规则_否 | 所有者 | 颜色 | 尺码 | 内存 |
+---------+-------+--------+--------+--------+
| 1 | 10 | 蓝色 | 大 | 空 |
| 2 | 10 | 红色 | 大 | 空 |
| 3 | 10 | 绿色 | 大 | 空 |
| 1 | 20 | 绿色 | 中 | 16G |
| 2 | 20 | 绿色 | 中 | 32G |
| 1 | 30 | 红色 | 空 | 64G |
| 2 | 30 | 蓝色 | 空 | 64G |
+---------+-------+--------+--------+--------+

```

可以使用如下查询对此类数据进行透视：

```
SELECT   @t:=IF(Owner=@o,@t,0)+1 AS Rule_No,
         @o:=Owner AS Owner,
         `COLOR`,`SIZE`,`MEMORY`
FROM     (SELECT DISTINCT Owner, @t:=0 FROM my_table) t0

  LEFT JOIN (
    SELECT Owner, value AS `COLOR`
    FROM   my_table
    WHERE  Attribute='COLOR'
  ) AS `t_COLOR` USING (Owner)

  LEFT JOIN (
    SELECT Owner, value AS `SIZE`
    FROM   my_table
    WHERE  Attribute='SIZE'
  ) AS `t_SIZE` USING (Owner)

  LEFT JOIN (
    SELECT Owner, value AS `MEMORY`
    FROM   my_table
    WHERE  Attribute='MEMORY'
  ) AS `t_MEMORY` USING (Owner)

ORDER BY Owner, Rule_No 
```

由于属性列表是动态的，因此可以使用查询来构造上述 SQL，从中准备并执行语句：

```
SELECT CONCAT('
         SELECT   @t:=IF(Owner=@o,@t,0)+1 AS Rule_No,
                  @o:=Owner AS Owner,
                  ', GROUP_CONCAT(DISTINCT CONCAT(
                    '`',REPLACE(Attribute,'`','``'),'`'
                  )), '
         FROM     (SELECT DISTINCT Owner, @t:=0 FROM my_table) t0
       ', GROUP_CONCAT(DISTINCT CONCAT('
           LEFT JOIN (
             SELECT Owner, value AS `',REPLACE(Attribute,'`','``'),'`
             FROM   my_table
             WHERE  Attribute=',QUOTE(Attribute),'
           ) AS `t_',REPLACE(Attribute,'`','``'),'` USING (Owner)
         ') SEPARATOR ''), '
         ORDER BY Owner, Rule_No
       ') INTO @sql
FROM   my_table;

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/2980c/1/2)上查看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T01:19:32.563

好的，所以在我写任何东西之前首先：这个查询可以在一个 SQL 选择中完成，但我不会推荐它。它可能适用于这个小样本表，但它不会是大表的现实解决方案，并且可以通过使用存储过程以更好（更快，更清洁）的方式解决。

另外，我没有完全完成它，因为现在不是凌晨 2 点 10 分，而且我已经有几个小时的工作了 - 不去想这是一个太大的挑战，但剩下的部分只是复制粘贴 SQL 重写基于已经存在的查询。

[我用pastebin](http://pastebin.com/9MswhM3P)上的示例数据发布了我的思考过程

基本流程是：

1.  计算所有者的可能排列 (N)
2.  构造一个 SQL 查询，它从 1..(N*number_of_attributes) 生成数字
3.  对于每一行
    1.  根据 N 选择一个属性
    2.  根据 N 为属性选择一个值

该算法是任意数量的属性或值的通用解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:08:56.120

这是 fthiella 对 SQL Server 的回答（非最终版）：

```
If  Object_ID('tempdb..#test') Is Not Null Drop Table #test;

Select '10' As Owner,'COLOR' Attribute,'BLUE' Value Into #test
Union
Select '10','COLOR','RED'
Union
Select '10','COLOR','GREEN'
Union
Select '10','SIZE','BIG'
Union
Select '20','a','1'
Union
Select '20','a','2'
Union
Select '20','b','111'
Union
Select '20','b','222'
Union
Select '20','COLOR','GREEN'
Union
Select '20','SIZE','MEDIUM'
Union
Select '20','MEMORY','16G'
Union
Select '20','MEMORY','32G'
Union
Select '30','COLOR','RED'
Union
Select '30','COLOR','BLUE'
Union
Select '30','MEMORY','64G';

Select 
    Owner, Attribute, Value,
    RuleNo = Row_Number() Over (Partition By Owner, Attribute Order By Owner, Attribute)
From
    (Select Base.Owner, Base.Attribute, Base.Value
    From
        #Test As Base
        Inner Join
            (Select Owner, Attribute
             From #Test
             Group By Owner, Attribute
             Having Count(*) > 1) As MultipleValue
        On Base.Owner = MultipleValue.Owner
        And Base.Attribute = MultipleValue.Attribute
        Union All
        Select Sing.Owner, Sing.Attribute, Sing.Value
        From
            (Select Owner, Attribute, Value = Min(Value)
            From #Test
            Group by Owner, Attribute
            Having Count(*) = 1) As Sing
        Inner Join
            (Select Owner, Attribute
            From #Test
            Group by Owner, Attribute
            Having Count(*) > 1) As Mult
            On Sing.Owner = Mult.Owner
        Inner Join #Test As Comp
        On Mult.Owner = Comp.Owner And Mult.Attribute = Comp.Attribute) As Vals
Order By 
    Owner, RuleNo, Attribute, Value 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T20:22:36.307

我试了一下（并且花了太多时间在上面）。以为我有一个解决方案——它为给定的数据产生了预期的结果（不准确，但我相信可以接受）。不幸的是，当添加更多数据时，它并不能成立。

也许其他人可以在此基础上找到可行的解决方案。

```
SELECT DISTINCT a.`owner`, a.`attribute`, a.`value`, a.`index` * b.`index` AS `Rule_No`
FROM (
  SELECT `owner`, `attribute`, `value`,  
    IF(
      `owner` = @_owner AND `attribute` = @_attribute,
      @_row := @_row + 1,
      @_row := 1 AND (@_owner := `owner`) AND (@_attribute := `attribute`)
    ) + 1 AS `index`
  FROM `attributes`, (SELECT @_owner := '', @_attribute := '', @_row := 0) x
  ORDER BY `owner`, `attribute`
  ) a
INNER JOIN (
  SELECT `owner`, `attribute`, `value`,  
    IF(
      `owner` = @_owner AND `attribute` = @_attribute,
      @_row := @_row + 1,
      @_row := 1 AND (@_owner := `owner`) AND (@_attribute := `attribute`)
    ) + 1 AS `index`
  FROM `attributes`, (SELECT @_owner := '', @_attribute := '', @_row := 0) x
  ORDER BY `owner`, `attribute`
  ) b
ON a.`owner` = b.`owner` AND a.`attribute` <> b.`attribute`
ORDER BY `owner`, `Rule_No`, `attribute`, `value` 
```

[SQLFiddle - 工作](http://sqlfiddle.com/#!2/0626e/1)

[SQLFiddle - 损坏（添加了更多数据）](http://sqlfiddle.com/#!2/0a543/1)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T20:24:03.830

虽然这还远未完成，但这是我当时能做的最好的事情。也许它会给别人一个想法？具体来说，它以错误的顺序为该数据集获取正确的行数。

```
select a.owner, a.attribute, a.value
from test1 a
    join (
        select owner, attribute, count(distinct attribute, value) - 1 as total
        from test1
        group by owner, attribute
    ) b
        on a.owner = b.owner
            and a.attribute = b.attribute
    join (
        select owner, max(total) as total from (
            select owner, attribute, count(distinct attribute, value) as total
            from test1
            group by owner, attribute
        ) t group by owner
    ) c
        on a.owner = c.owner
    join (
        select @rownum:=@rownum+1 as num
        from test1,
            (select @rownum:=0 from dual) r
    ) temp
        on num <= c.total - b.total
order by a.owner asc
; 
```

# java - 通过 WS 公开 DAO（在基于 Struts2 的应用程序中）。

> ID：14316843
> 
> 赞同：1
> 
> 时间：2013-01-14T10:38:34.003
> 
> 标签：java, web-services, jax-ws, hibernate-generic-dao

我如何设计一个 Web 服务，它将在 Struts2 基础应用程序中公开已经开发的休眠实体类？第三方应用程序要做 CRUD 操作，我如何使用相同的 Hibernate 类通过 Web 服务进行 CRUD？

# c++ - 一次将十六进制字符串输入为 char

> ID：14316844
> 
> 赞同：0
> 
> 时间：2013-01-14T10:38:36.963
> 
> 标签：c++, hex

我有这样的字符串：

```
315c4eeaa8b5f8aaf9174145bf43e1784b8fa00dc71d885a804e5ee9fa40b16349c146fb778cdf2d3aff021dfff5 
```

有没有办法一次将它从文件中读取到字符串对象中，记住每 2 个字符都是字节的十六进制表示？即我需要从十六进制转换为字符的读数。

*更新*
伙计们，请仔细阅读我的要求。
我能够编写转换函数并沿着字符串循环。
**但我需要****一次**将一串十六进制读入一串字符。
没有任何循环。没有手动转换。
像`cin >> ...some string variable...`
谢谢一样的东西。

*UPDATE2*
想象一下我有字符串`"315c4eeaa8b5"`。我想写一些类似的东西`cin >> string_var`并让 string_var 完全包含`"'0x31','0x5c','0x4e','0xea','0xa8','0xb5'"`. 请注意，最后一个是序数`std::string`。即`0x31,0x5c,etc`是字符代码。
希望它能让事情更清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:54:25.233

要么编写代码，要么使用已经存在的东西。如果您使用的是 C++ IO 流，那么我建议您查看[Boost.IOStreams](http://www.boost.org/doc/libs/1_52_0/libs/iostreams/doc/index.html)库，尤其是它的[过滤流](http://www.boost.org/doc/libs/1_52_0/libs/iostreams/doc/guide/filtering_streams.html)概念。您可以使用选项卡扩展[2.2.5.2 input_filter](http://www.boost.org/doc/libs/1_52_0/libs/iostreams/doc/tutorial/tab_expanding_filters.html#tab_expanding_input_filter)教程示例作为十六进制输入过滤器实现的基础。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:50:20.610

您可以将 istream::opeartor>> 与 std::hex 操纵器一起使用以解析为十六进制：

```
ifstream in("...");
char buffer[3];
vector<char> chars;

while (in.read(buffer, 2))
{
    buffer[2] = '\0';

    char c;
    istringstream(buffer) >> hex >> c;
    chars.push_back(c);
} 
```

# c# - 如何通过 Func 不知道 T 的范围？

> ID：14316846
> 
> 赞同：1
> 
> 时间：2013-01-14T10:38:45.993
> 
> 标签：c#, generics

这可能是不可能的，但我希望它是！

我有一个具有泛型类型范围的方法，并实例化一个`List<Func<GenericType>>`. 然后我有另一种方法可以接收`List<Func<T>>`. `T`我对这种方法一无所知。

**示例代码**

```
public void PassFuncs<Item>()
{
  List<Func<Item>> funcs = new List<Func<Item>>();
  RecieveFuncs(funcs);
}
public void RecieveFuncs(List<Func<object>> funcs)
{
  //Do some stuff with funcs
} 
```

我希望它会像使用`object`代替`T`一样容易，并且会如此简单。当然，`T`不是一个`object`，而是一个`Type`，因此我不能互换它们。有什么建议或者这是不可能的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T10:40:39.490

您可以使您的方法通用：

```
public void RecieveFuncs<T>(List<Func<T>> funcs)
{
  //Do some stuff with funcs
} 
```

要调用它，您可以`T`显式声明

```
public void PassFuncs<Item>()
{
  List<Func<Item>> funcs = new List<Func<Item>>();
  RecieveFuncs<Item>(funcs);
} 
```

或者让类型推断魔法完成它的工作并保持调用原样：

```
public void PassFuncs<Item>()
{
  List<Func<Item>> funcs = new List<Func<Item>>();
  RecieveFuncs(funcs);  // C# automatically infers T = Item
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T10:43:38.200

如果你知道这`Item`是一个引用类型，你可以使用每个函数的方差（但不是列表）：

```
public void PassFuncs<Item>() where Item : class
{
    List<Func<Item>> funcs = new List<Func<Item>>();
    var tmp = funcs.ConvertAll(func => (Func<object>)func);
    RecieveFuncs(tmp);
} 
```

这将创建一个新列表，但使用原始函数。如果这不可能，您需要添加一个中间函数：

```
public void PassFuncs<Item>()
{
    List<Func<Item>> funcs = new List<Func<Item>>();
    var tmp = funcs.ConvertAll<Func<object>>(func => () => func());
    RecieveFuncs(tmp);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-14T10:44:06.970

如果`RecieveFuncs`由于某种原因你不能通用，你可以使用：

```
public void PassFuncs<TItem>()
    where TItem:class
{
  List<Func<TItem>> funcs = new List<Func<TItem>>();
  RecieveFuncs(funcs);
}

public void RecieveFuncs(IEnumerable<Func<object>> funcs)
{
  //Do some stuff with funcs
} 
```

这需要一个通用约束来引用 的类型`TItem`，并且需要一个协变接口，`IEnumerable<T>`而不是`List<T>`在接收端。如果您真的想收到一个`List<Func<object>>`，您可以使用创建一个新列表`List<Func<object>>(funcs)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T10:55:31.970

你可以像这样“投射”`Func<Item>`到`Func<object>`

```
public delegate object Func();

public void PassFuncs<Item>()
{
  List<Func<Item>> funcs = new List<Func<Item>>();
  RecieveFuncs(funcs.Select<Func<Item>, Func<object>>(f => () => (object)f())
                    .ToList());
}

public void RecieveFuncs(List<Func<object>> funcs)
{
  //Do some stuff with funcs
} 
```

这适用于引用类型和值类型，尽管它会为值类型设置框。如果您仅使用引用类型，请使用 @CodesInChaos 答案。

# php - 来自数组的 PHP 中的回声和特定值

> ID：14316847
> 
> 赞同：0
> 
> 时间：2013-01-14T10:38:56.683
> 
> 标签：php

我是 PHP 的新手，正在尝试一些东西以查看它们的工作原理.. 我在这方面尝试了很多不同的尝试.. 但没有运气.. 它应该回显输出 2 .. !!! 我不断收到错误。

```
<?php

$a = array('x' => array('y' => 1, 'z' => 2, 'q' => 3,));

echo {$a['z']};//echo the value 2 from $a (tried this and it did not work.  

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T10:40:37.173

由于数组中有一个数组，因此您需要执行以下操作：

```
echo $a['x']['z']; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T10:42:39.050

您正在使用关联数组，并且您的语法不正确。

要到达`z`您需要通过`x`：

```
echo $a['x']['z']; 
```

花括号语法仅在您想要访问字符串内的数组（称为[数组解引用）（称为](http://php.net/manual/en/language.types.array.php#language.types.array.syntax.accessing)[变量插值](http://en.wikipedia.org/wiki/Variable_interpolation)）时使用：

```
echo "The value is: {$a['x']['z']}"; 
```

如果您不使用方括号取消引用变量，则不需要大括号：

```
$value = $a['x']['z'];
echo "The value is: $value"; 
```

另外，您提到您遇到错误。了解它们的含义，您将能够帮助自己。如果您寻求帮助，那么告诉我们您遇到的错误也是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T10:40:26.410

试试这个不带括号

```
echo $a['z']; 
```

或者不，你有两个数组

尝试

```
echo $a["x"]["z"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T10:40:56.767

尝试简单：

```
<?php

$a = array('x' => array('y' => 1, 'z' => 2, 'q' => 3,));

echo $a['x']['z'];

?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T10:41:35.960

您的数组是[多维的](http://php.net/manual/en/language.types.array.php)，因此您必须提供两个索引：

```
echo $a['x']['z']; // echoes 2 
```

# eclipse - Eclipse - 通过保管箱共享工作区（.project 文件错误，因为路径错误）

> ID：14316851
> 
> 赞同：1
> 
> 时间：2013-01-14T10:39:10.383
> 
> 标签：eclipse, workspace, project-settings

我正在与我的 Dropbox 共享我的 Eclipse 工作区。

`M:\Dropbox`我在家里和工作中都有我的保管箱文件夹`D:\Dropbox`。

在家里，我想保留 M: 用于“我的文件”-Drive 并且不想将其更改为 D: 而在工作中，M: 已经映射...

除了创建符号链接到我可以在两台机器上使用的位置之外，还有其他方法吗？我的目标是，我不必更改家用计算机上的任何内容...

另一个问题是，我正在使用一个变量和该变量的相对路径来导入库。因此，如果路径发生变化，我只需要更改单个变量。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T10:42:42.173

也许只是将 M: 重新映射到工作中的其他东西，然后将 D: 映射到 M:

编辑：否则请查看此链接 [http://www.eclipse.org/forums/index.php/t/270978/](http://www.eclipse.org/forums/index.php/t/270978/)

为了一致性，我将复制重要的部分：

> 正如我所说，您不能共享工作空间，但您可能会因共享同一个项目而侥幸。就是这样。
> 
> 1.  在一台计算机上创建项目，或多或少地获得您喜欢的方式（即：Eclipse 创建的简单 Java 项目、动态 Web 项目等）。稍后您将能够添加或删除源代码，但该项目应该存在足以让 Eclipse 识别它。
>     
>     
> 2.  将项目的重要部分复制到您的保管箱位置。
>     
>     
> 3.  从 Eclipse 内部，丢弃包括源文件在内的原始项目（它会提示您对此保持谨慎）。
>     
>     
> 4.  在相同（或不同）的工作区中创建一个新项目。当向导出现时，您可以将其命名为您想要的名称，但告诉它从另一个位置获取源文件，而不是将它们复制到工作区中。我认为 Eclipse 将从 Dropbox 使用该项目。
>     
>     
> 5.  从您的另一台计算机的 Eclipse 中重复此操作，显然使用它自己的工作区。
>     
>     
> 6.  您在一台计算机上所做的更改将反映在另一台计算机上。更改计算机时，您必须右键单击您的项目并选择刷新。
>     
>     
> 7.  所有第三方库 (JAR) 都必须复制到项目内的路径中。否则，您的 .classpath 文件将获取完整的文件系统路径名，这在两台计算机上都不会成立。导致此问题的另一种方法是将 Javadoc 或源代码与任何这些第三方 JAR 相关联（假设您希望 javadoc 用于 hibernate3.jar，一旦您这样做，您就完蛋了）。
>     
>     
> 
> 我没有这样做；我告诉你的可能有一个漏洞，或者你可能不小心做了一些破坏你这样做的能力的事情（如#7所建议的那样）。
> 
> 正如我在原始回复中指出的那样，最好为此使用版本控制系统（而且，显然还有其他好处）。

我认为这将涵盖论坛帖子的主要思想。我自己采用了使用版本控制系统的解决方案，因为它是一种更清洁的做事方式

# internet-explorer - youtube 播放器上的 CSS3 旋转在 IE FF 上不起作用

> ID：14316854
> 
> 赞同：1
> 
> 时间：2013-01-14T10:39:11.487
> 
> 标签：internet-explorer, firefox, css, youtube, rotation

我想旋转一个 youtube 播放器，这里是我的代码 => [http://jsbin.com/abihux/11/watch](http://jsbin.com/abihux/11/watch)

我用过css3

```
-moz-transform:    rotate(15deg);
-o-transform:      rotate(15deg);
-webkit-transform: rotate(15deg);
transform:         rotate(15deg); 
```

它适用于 chrome，但不适用于 ie9/ff18 (windows)。

在 FF 我有一个黑屏，在 IE 上，youtube 播放器没有旋转

我也尝试过使用 YouTube 嵌入式播放器（同样的问题），不幸的是我们不能强制使用 HTML5 播放器......

有人有解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:38:56.530

I believe the correct vendor-specific property for IE would be `-ms-transform`.

In Firefox 17.0.1 and 18.0 (Windows 7 Professional), the link worked and the video was rotated.

# eclipse - Eclipse Maven WTP插件在切换配置文件时不刷新资源

> ID：14316856
> 
> 赞同：0
> 
> 时间：2013-01-14T10:39:41.950
> 
> 标签：eclipse, maven, eclipse-wtp, maven-eclipse-plugin

我正在使用 Eclipse Juno 和 Maven-WTP 插件开发一个 Web 应用程序。这个应用程序有一个标题图像，我也有两个 Maven 配置文件。这些配置文件允许更改标题图像，因为它们指向图像所在的不同目录。这就是它们的配置方式：

```
<profile>
    <id>local</id>
    <properties>
        <imagen.cabecera.dir>src/main/resources/styles/headers/example1</imagen.cabecera.dir>
    </properties>
</profile>

<profile>
    <id>local2</id>
    <properties>
        <imagen.cabecera.dir>src/main/resources/styles/headers/example2</imagen.cabecera.dir>
    </properties>
</profile> 
```

这个想法是当我更改*.m2/settings.xml*中的活动配置文件以更改头文件时。活动配置文件的配置如下：

```
<activeProfiles>
    <!--make the profile active all the time -->
    <activeProfile>nexus</activeProfile>
    <activeProfile>local</activeProfile>
</activeProfiles> 
```

如果我更改活动配置文件并`mvn clean install`在项目的目标目录中做所有事情就像一个魅力。但是，问题来自 Maven-WTP 插件。该插件正在从`webapp/images`目录中获取文件，并且看起来当我更改活动配置文件时没有获取新配置文件。似乎 WTP 插件没有更新这里的文件，所以我在浏览器中显示了旧的，即使我做了一个`clean install`. 这是我的**pom.xml**配置：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-resources-plugin</artifactId>
    <executions>
        <execution>
            <id>copy-resources</id>
            <phase>process-resources</phase>
            <goals>
                <goal>copy-resources</goal>
            </goals>
            <configuration>
                <outputDirectory>${project.build.directory}</outputDirectory>
                <resources>
                    <resource>
                        <directory>${imagen.cabecera.dir}</directory>
                        <includes>
                            <include>cabecera.jpg</include>
                        </includes>
                        <targetPath>${project.build.directory}/header</targetPath>
                    </resource>
                </resources>
            </configuration>
        </execution>
    </executions>
</plugin>

<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-war-plugin</artifactId>
    <executions>
        <execution>
            <id>default-war</id>
            <configuration>
                <webResources>
                    <resource>
                        <directory>${project.build.directory}/header</directory>
                        <includes>
                            <include>cabecera.jpg</include>
                        </includes>
                        <targetPath>/images</targetPath>
                    </resource>
                </webResources>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:11:34.663

您可能需要通过以下方式更新您的 Maven 项目配置：

> 右键单击您的项目 -> **Maven -> 更新项目**

![在此处输入图像描述](../Images/b4cfc7d9cb30c2fe0c044b2ee5f8bdcd.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:34:13.457

Maven **Eclipse WTP 插件**正在从*webapp*目录获取要部署的数据。线索是执行时没有清理这个目录`mvn clean install`，因为Maven只清理*目标*目录。诀窍是[迫使 Maven 清理](https://stackoverflow.com/a/5702741/1199132)我也将要更新的资源。

```
<plugin>
    <artifactId>maven-clean-plugin</artifactId>
    <version>2.5</version>
    <configuration>
        <filesets>
            <fileset>
                <directory>src/main/webapp/images</directory>
                <includes>
                    <include>cabecera.jpg</include>
                </includes>
            </fileset>
        </filesets>
    </configuration>
</plugin> 
```

# tinymce - TinyMCE 链接和取消链接按钮在自定义主题中不起作用

> ID：14316861
> 
> 赞同：1
> 
> 时间：2013-01-14T10:40:01.587
> 
> 标签：tinymce

我有一个带有几个按钮的 TinyMCE 自定义主题（粗体、斜体、删除线、左对齐、居中和右对齐、bullist、numlist、链接和取消链接）。

![自定义主题](../Images/670a471533e203ef4a2dd70a539f0be0.png)

问题在于 numlist、bullist、link 和 unlink 按钮。这些不起作用，其他的表现正常。

我的 tinyMCE.init 看起来像这样：

```
tinyMCE.init({

                mode: "textareas",
                editor_selector: "tinymce",
                language: false, // Prevents language packs from loading

                theme: function(editor, target) {
                    var dom = tinymce.DOM, editorContainer;

                    // Generate UI
                    editorContainer = dom.insertAfter(dom.create('div', {style: 'border: 1px solid gray'},
                        '<div>' +
                            '<button class="tinybutton tinybold" data-mce-command="bold"></button>' +
                            '<button class="tinybutton tinyitalic" data-mce-command="italic"></button>' +
                            '<button class="tinybutton tinystrike" data-mce-command="strikethrough"></button>' +
                            '<button class="tinybutton tinybullist" data-mce-command="bullist"></button>' +
                            '<button class="tinybutton tinynumlist" data-mce-command="numlist"></button>' +
                            '<button class="tinybutton tinyleft" data-mce-command="justifyleft"></button>' +
                            '<button class="tinybutton tinycenter" data-mce-command="justifycenter"></button>' +
                            '<button class="tinybutton tinyright" data-mce-command="justifyright"></button>' +
                            '<button class="tinybutton tinylink" data-mce-command="link"></button>' +
                            '<button class="tinybutton tinyunlink" data-mce-command="unlink"></button>' +
                        '</div>' 
                    ), target);

                    // Set editor container size to target element size
                    dom.setStyle(editorContainer, 'width', target.offsetWidth);

                    // Bind events for each button
                    tinymce.each(dom.select('button', editorContainer), function(button) {
                        dom.bind(button, 'click', function(e) {
                            e.preventDefault();

                            // Execute editor command based on data parameters
                            editor.execCommand(
                                dom.getAttrib(e.target, 'data-mce-command'),
                                false,
                                dom.getAttrib(e.target, 'data-mce-value')
                            );
                        });
                    });

                    // Register state change listeners
                    editor.onInit.add(function() {
                        tinymce.each(dom.select('button', editorContainer), function(button) {
                            editor.formatter.formatChanged(dom.getAttrib(button, 'data-mce-command'), function(state) {
                                button.style.color = state ? "red" : "";
                            });
                        });
                    });

                    // Return editor and iframe containers
                    return {
                        editorContainer: editorContainer,
                        iframeContainer: editorContainer.lastChild,

                        // Calculate iframe height: target height - toolbar height
                        iframeHeight: target.offsetHeight - editorContainer.firstChild.offsetHeight
                    };
                },

                encoding: "xml",
                setup: function (ed) {

                    ed.onContextMenu.add(function (ed, e) {
                        tinymce.activeEditor.save();
                    });
                    ed.onKeyUp.add(function (ed) {
                        tinymce.activeEditor.save();
                    });
                    ed.onClick.add(function (ed) {
                        tinymce.activeEditor.save();
                    });
                    ed.onGetContent.add(function (ed, o) {
                        o.content = o.content.replace(/'/g, "&apos;");
                    });
                    //ed.onInit.add(function (ed, evt) {
                    //    tinymce.dom.Event.add(ed.getDoc(), 'blur', function (e) {
                    //        // Do something when the editor window is blured.
                    //        tinymce.activeEditor.save();
                    //    });
                    //});
                },
                width: "100%"                    
            }); 
```

我不确定这是我应该如何处理所有按钮，或者我必须处理那些不能以其他方式工作的按钮。这是使用标准按钮的正确方法吗？

```
editor.execCommand(
       dom.getAttrib(e.target, 'data-mce-command'),
       false,
       dom.getAttrib(e.target, 'data-mce-value')
       ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-12T23:29:02.787

> 使用 editor_css 定义工具栏图标。制作一个新皮肤并使用默认按钮。

# c - malloc 和 calloc

> ID：14316863
> 
> 赞同：4
> 
> 时间：2013-01-14T10:40:12.970
> 
> 标签：c, linux

按照：

```
calloc(20, sizeof(int))
malloc(20 * sizeof(int)) 
```

这将为 20 个整数分配内存。

`malloc()`&是否`calloc()`分配虚拟或物理连续空间？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-14T10:43:03.717

C 并没有说机器既有物理地址空间又有虚拟地址空间。

您所知道的就是您获得了指针，并且您可以按照语言的运算符定义的连续方式对它们进行索引/取消引用。

如果这样做需要硬件将虚拟地址重新映射到物理地址，或者向回复地址位置内容的人发送电子邮件，则由实现定义。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T10:42:01.153

空间是否在物理上是连续的，取决于您正在开发的平台、MMU 和操作系统......

实际上它将是连续的，永远。

无论是 calloc 还是 malloc 都不会产生影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T11:43:35.330

两者都将分配连续的虚拟内存。现在假设您正在运行一个将分页用作虚拟内存管理的系统。前十个字可能分配在一个页框的末尾，最后十个字将分配在另一个页框的开头。物理页面分配取决于内核，而不是`{m|c}alloc()`实现。这些只会通过系统调用请求更多内存（请参阅`brk()`, `mmap()`）。因为物理页框分配不一定是连续的，所以您最终将分配的一部分落入一页，而另一部分落入另一页。

在大多数情况下，您不必担心数据是否会跨越页面边界，除非您正在寻找优化并且想要避免过多的次要页面错误。

# c# - 在 Win 7 64 位上开发 WCF 服务

> ID：14316866
> 
> 赞同：0
> 
> 时间：2013-01-14T10:40:20.527
> 
> 标签：c#, visual-studio-2010, wcf

我正在尝试在 64 位 Win 7 上开发 WCF 服务。该服务必须利用第三方组件来完成它的工作。

3rd 方组件是这样实例化的

```
ThirdPartyib.ThirdPartyClass objThird = new ThirdPartyib.ThirdPartyClass; 
```

调用该方法会给出错误

**调用服务失败。可能原因：服务离线或无法访问；客户端配置与代理不匹配；现有代理无效。有关更多详细信息，请参阅堆栈跟踪。您可以尝试通过启动新代理、恢复到默认配置或刷新服务来恢复。**

当我注释掉第三方 dll 的实例化部分并返回一个简单的字符串时，它工作正常。事实上，我什至尝试使用该服务在本地创建一个文件夹，这也可以。我该怎么做才能使服务与第 3 方 dll 一起使用？

这个第 3 方 dll 是 32 位的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:09:34.760

您是否在 IIS 中托管此应用程序？在这种情况下，您要么需要使用 x64 和/或 anyCpu 库。或者您必须[告诉 IIS 可以在 32 位模式下运行](http://blogs.msdn.com/b/rakkimk/archive/2007/11/03/iis7-running-32-bit-and-64-bit-asp-net-versions-at-the-same-time-on-different-worker-processes.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:01:32.553

您需要将整个服务编译为 x86。这包括您的所有项目：托管 WCF 服务的服务应用程序、包含 WCF 服务定义的 DLL（如果有这样的 DLL）以及您使用的所有其他未编译为*任何 CPU*的库，并且你开发。

简短：整个解决方案必须仅使用 x86。

# mysql - 如果时间戳小于 24 小时 SQL 返回 false

> ID：14316871
> 
> 赞同：-1
> 
> 时间：2013-01-14T10:40:31.280
> 
> 标签：mysql, sql

我有一个应用程序，用户可以在其中为帖子投票，但我想限制他们，以便他们每 24 小时只能投票一次。

如何从数据库中选择行来检查时间戳字段是否早于 24 小时？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T10:48:40.070

我想您正在寻找[mysql 的日期/时间函数](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)。这里作为一个例子供您扩展：

```
… WHERE timestamp_column < NOW() - INTERVAL 24 HOUR; 
```

# php - 用于搜索用户令牌（技能）的 SQL 查询

> ID：14316873
> 
> 赞同：1
> 
> 时间：2013-01-14T10:40:34.927
> 
> 标签：php, jquery, mysql, jquery-tokeninput

我正在我的网站上构建一个搜索系统，用于搜索用户技能，此技能以令牌的形式呈现，用户技能的 db 表如下所示：

```
 id=> primary id(auto increment), 
user_id=> this is the user id,  
competence_nom=> this is the skill name, 
competence_id=> this is the skill parent id 
```

所以我想要的是当两个技能（或更多..）属于一个用户时，显示如下：

```
user name + skill one + skill two 
```

而不是这样（我现在正在实现的目标）

```
user name +skill one
user name +skill two 
```

我正在使用 jQuery tokeninput 插件将令牌数据传递给服务器端，我将技能 ID 传递给服务器端，然后在服务器端我分解 jQuery tokeninput 给出的技能数组：

```
 $comps=explode(",", $_POST["competences"]); 
```

然后我把它放在一个foreach循环中：

```
 foreach($comps as $i=>$v){  

} 
```

这就是我得到错误输出的地方：

```
user name +skill one
    user name +skill two 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:53:34.633

据我目前了解，这是您的数据模型的问题。

核心问题是您的数据模型必须支持哪些用例，以及作为其中的一部分，底层查询必须有多高效。

如果您的技能集非常有限并且需要非常高的性能，那么您可能想要寻求一种解决方案，其中技能集真正表示为位集。

如果清晰的用户界面和清晰的数据模型是主要目标，而性能可能是次要的，那么想到的方法是在一个表中拥有一个包含人员核心数据的关系数据模型，并在第二个表中分配技能，就像这样：

```
TABLE person
id: (auto increment)
name: (or split into first name etc)
email: (etc, you get the idea)

TABLE skill
id: (auto increment)
description:

TABLE personskill
personid: (reference to person.id)
skillid: (reference to skill.id) 
```

然后，通过关系数据库查询，系统将回答哪些技能分配给了哪些人的问题。

```
SELECT skillid FROM personskill WHERE personid = (id of person you're looking at) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:01:22.050

您可以使用 mysql 的 GROUP_CONCAT 命令。

这是此命令详细信息的链接

[http://www.w3resource.com/mysql/aggregate-functions-and-grouping/aggregate-functions-and-grouping-group_concat.php](http://www.w3resource.com/mysql/aggregate-functions-and-grouping/aggregate-functions-and-grouping-group_concat.php)

希望这可以帮助。

谢谢。

# css - 使用 CSS 制作...窗口？滑过？移动文本的东西？

> ID：14316876
> 
> 赞同：0
> 
> 时间：2013-01-14T10:40:50.797
> 
> 标签：css

我真的不知道这叫什么，它让我很烦。

我正在尝试使用 CSS 制作一个方形图块，当您将鼠标悬停在它上面时，一个带有文本的黑框会从该图块的底部滑入。就像你有一个 youtube 视频方块，如果你将鼠标悬停在它上面，一个带有标题或更多信息的黑框会滑入。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:42:13.710

你是说工具提示？

试试这个：[http ://csstooltip.com/](http://csstooltip.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:11:01.287

不幸的是，你需要为此使用 javascript。有一些机会用 css 来做到这一点，但它在植物浏览器中工作得非常糟糕（如果你需要例如悬停后的动画，你需要使用 css3，它在旧浏览器的植物中不使用）。

用 css 做到这一点阅读关于伪类：css 中的悬停和转换

您需要了解很多关于在 css 中定位元素的知识。

# java - 使用休眠获取基于类似'123％'的sql结果

> ID：14316881
> 
> 赞同：0
> 
> 时间：2013-01-14T10:41:05.210
> 
> 标签：java, hibernate, jpa

我正在使用 Hibernate 4，并且我的 DAO 类中有以下代码，我想从我的表中获取结果

```
CriteriaBuilder cb = entityManager.getCriteriaBuilder();
        CriteriaQuery<Employee> c = cb.createQuery(Employee.class);
        Root<Employee> emp = c.from(Employee.class);
        c.select(emp);
List<Predicate> criteria = new ArrayList<Predicate>();
ParameterExpression<String> pexp = cb.parameter(String.class,
                "employeeNumber");
Predicate predicate = cb.like(emp.get(Employee_.employeeNumber),
                pexp);

        criteria.add(predicate);

if (criteria.size() == 1) {
            c.where(criteria.get(0));           
        } else if (criteria.size() > 1) {
            c.where(cb.and(criteria.toArray(new Predicate[0])));

        }

TypedQuery<Employee> q = entityManager.createQuery(c);
if (employeeNumber != null) {
            q.setParameter("employeeNumber", employeeNumber);
data.setResult(q.getResultList()); 
```

当页面运行时，从日志中我可以看到 sql 为

```
select employeede0_.EMPLOYEE_NUMBER as EMPLOYEE1_0_ from EMPLOYEES employeede0_ 
where employeede0_.EMPLOYEE_NUMBER like ? 
```

因此，我无法看到任何结果。理想情况下，我想有一个像这样的查询

```
select employeede0_.EMPLOYEE_NUMBER as EMPLOYEE1_0_ from EMPLOYEES employeede0_ 
    where employeede0_.EMPLOYEE_NUMBER like '123%' 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:54:54.727

你想最终执行

```
Predicate predicate = cb.like("employeeNumber", "123%"); 
```

所以包括百分比。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T11:02:44.113

这应该适合你：

```
criteria.add ( Restrictions.like ("employeeNumber", "123%" ) ); 
```

# sql - 如何用自己的值加上另一个表中的变量来更新一个表列？

> ID：14316883
> 
> 赞同：0
> 
> 时间：2013-01-14T10:41:10.873
> 
> 标签：sql, oracle

> **可能重复：**
> [Oracle - 使用内部连接更新语句](https://stackoverflow.com/questions/2446764/oracle-update-statement-with-inner-join)

在 SQL Server Developer Edition 中，我想用另一个表中的值和变量来更新列。

表中`sa_tran_item`，`ref_no6`字段显示`"NYN"` ，其他表`apo_rms_i_item_place`，`SORTIMENTSGRUPP_KOD`字段显示10

我想更新表`sa_tran_item`，`ref_no6`字段为`"NYN10"`

**我的查询**

```
UPDATE sa_tran_item 
SET ref_no6 = "ref_no6" + "a.SORTIMENTSGRUPP_KOD" 
FROM apo_rms_i_item_place a, sa_tran_item 
WHERE a.varnummer in  (select item from item_master where item_number_type='MANL' and PRIMARY_REF_ITEM_IND = 'Y' and item_parent in 
(select  ITEM from sa_tran_item where  error_ind = 'Y' and tran_seq_no in 
(select tran_seq_no from sa_error where tran_seq_in ='49910349001'  error_code like 'ACG_NOT_FOUND') )); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:46:16.230

在oralce 中，双管道`||`用于连接字符串值。您可以使用更新

```
SET ref_no6 = ref_no6 || TO_CHAR(a.SORTIMENTSGRUPP_KOD) 
```

如果列`SORTIMENTSGRUPP_KOD`是整数类型并且

```
SET ref_no6 = ref_no6 || a.SORTIMENTSGRUPP_KOD 
```

如果它是字符串/varchar2 类型。

# powershell - 使用 Windows Powershell 执行 SQL 脚本

> ID：14316887
> 
> 赞同：0
> 
> 时间：2013-01-14T10:41:22.993
> 
> 标签：powershell, sql-server-2008-r2

我有一个`"SQL"`脚本需要通过 Windows 运行`Powershell`才能创建数据库。该脚本已经具有 drop 和 create 功能，因此无需在命令行末尾添加数据库名称。尝试执行命令行时，我收到一条错误消息

```
"Invoke-Sqlcmd : A network-related or instance-specific error occurred while establishing a connection to SQL Server
The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 25 - Connection string is not valid)
At line:1 char:14
+ invoke-sqlcmd <<<<  -inputfile "c:\A.sql" -serverinstance "Louis_dev\MSSQLSERVER"
    + CategoryInfo          : InvalidOperation: (:) [Invoke-Sqlcmd], SqlException
    + FullyQualifiedErrorId : SqlExectionError,Microsoft.SqlServer.Management.PowerShell.GetScriptCommand

Invoke-Sqlcmd :
At line:1 char:14
+ invoke-sqlcmd <<<<  -inputfile "c:\A.sql" -serverinstance "Louis_dev\MSSQLSERVER"
    + CategoryInfo          : ParserError: (:) [Invoke-Sqlcmd], ParserException
    + FullyQualifiedErrorId : ExecutionFailureException,Microsoft.SqlServer.Management.PowerShell.GetScriptCommand" 
```

不确定它是否是调用命令，我已经按照此链接中的步骤[如何使用 powershell 执行 .sql 文件？](https://stackoverflow.com/questions/10894688/how-to-execute-sql-file-using-powershell). 是否有任何机会可以解决此错误。`SQLSERVER`实例已配置`LocalSystem`为网络实例，但未配置为网络实例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:52:23.780

我已经弄清楚出了什么问题。创建数据库时，脚本中有一行出现问题，当我从脚本中删除该行时，它没有问题。问题出在哪里：

```
 /****** Object:  Database [dbname]    Script Date: 01/03/2013 06:53:20 ******/
   CREATE DATABASE [Mdbname] -- ON  PRIMARY 
    **--( NAME = N'dbname', FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA\dbname.mdf' , SIZE = 30417920KB , MAXSIZE =   UNLIMITED, FILEGROWTH = 1024KB )
   -- LOG ON 
   --( NAME = N'dbname_log', FILENAME = N'C:\Program Files\Microsoft SQL  Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA\dbname_1.ldf' , SIZE = 28333632KB , MAXSIZE = 2048GB , FILEGROWTH = 10%)
 --GO**. Normally  its not the best idea to comment those sections out, but i had no          other choice. Databases were created and tables, stored procs, functions and views were all put into their rightful places. 
```

# asp.net - Response.Write 在标记的特定部分

> ID：14316896
> 
> 赞同：3
> 
> 时间：2013-01-14T10:42:10.340
> 
> 标签：asp.net, css, visual-studio-2010, c#-4.0, response.write

我在 ASP.NET、C# 和 MS SQL Server 中有一个 Web 应用程序。我正在使用一个外部 CSS **Metro UI CSS**，它为我提供了样式化的组件，如 Tiles（类似于 Win8）、通知、按钮等。我想显示从数据库中获取的内容或以这些样式**DIV**计算的数据。但由于它们不是 ASP.NET 控件，因此它们不能绑定到数据源。

我尝试使用`Response.Write("MY HTML CODE")`动态生成内容并且有效，但它并不完美，因为内容与标记不同。我实际上不知道有什么区别，但它不适合我现有的静态页面内容。有没有办法将内容插入到现有的 HTML 中`Response.Write()`？

现在我正在尝试这个，

```
Response.Write("<div class='message-dialog bg-color-blue fg-color-white' style='width: 50%; z-index:1000;'><h1>Congratulations!<br/></h1><h3>You Account is created.Please Sign In.</h3><a href='Default.aspx'><button class='button-set active bg-color-red fg-color-white' style='float:right'> OK </button></a></div>"); 
```

这显示了一个带有正确文本的样式框，但它出现在我现有页面的顶部，`_z-index_`没有它的页面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T10:56:56.697

任何控件，甚至是*特殊样式的 div*`runat="server"`都可以通过向其添加属性在服务器端进行修改。

因此，在您的 aspx 中，您可以执行以下操作：

```
<div class='message-dialog bg-color-blue fg-color-white' style='width: 50%; z-index:1000;' runat="server" id="myDiv" /> 
```

在代码后面做任何你想做的事情......例如：

```
myDiv.Controls.Add(new Label() { Text = "Hello World" }); 
```

甚至

```
 myDiv.InnerHtml = "<h1>Hello World</h1>"; 
```

`Response.Write`在这种情况下使用可能是错误的方法......

# algorithm - 贪心算法的证明

> ID：14316898
> 
> 赞同：1
> 
> 时间：2013-01-14T10:42:16.847
> 
> 标签：algorithm, greedy, proof

我最近尝试在 Codeforces 上解决一个问题，我确实得到了正确的解决方案，但现在正试图证明它。算法是这样的：

拿最小的折扣，把它应用到最贵的，连续两个便宜的免费。然后不断地做，直到没有物品剩下。

我有点卡在证明上。如果有人可以通过矛盾给我一个正式的证明，那就太好了。

[问题](http://codeforces.com/contest/262/problem/C)！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:06:56.243

它分为两部分：

**选择哪个折扣？**

假设我们选择`m`除最小的折扣（`n`物品， ）之外的任何其他折扣（物品免费 2 `n<m`）：购买物品`a(1)`我们免费`a(m)`获得`b`物品`c`。我们可以采取最小的折扣，购买物品`a(1)`以免费`a(n)`获得，`b`并以全价购买物品最终处于相同的情况。因此，选择最小的折扣在最坏的情况下与其他选择相提并论。`c``a(n+1)``a(m)`

**选择哪些免费文章？**

现在假设我们将折扣应用于商品`a1`，`a2`而不是最昂贵的`b1`商品`b2`（`cost(a1)<cost(b1)`或`cost(a2)<cost(b2)`）。让我们假设，`cost(a1)<cost(a2)`因为案例是对称的。出现三种情况：

1.  `a2`不知何故，作为促销活动的一部分，我们仍然设法免费获得：`a1`如果我们还没有选择它，我们也可以得到。
2.  作为折扣的一部分，我们必须为此付费。折扣使我们能够购买价格高达`c`. 出现以下情况之一：
    *   `c<=cost(a1)`: 我们可以交换`a1`和`a2`，这会降低这个篮子的成本，而不需要改变其他任何东西。
    *   `cost(a2)<=c<cost(a1)`: 让我们打电话`d`，`e`我们从第二次折扣中得到的物品，`d`是最贵的。我们可以`a2`在第一次折扣中选择免费商品，在第二次折扣中将其替换为免费商品，然后在第二次折扣中`d`选择`a1`免费商品，从而降低或相等的成本。
3.  我们以折扣价购买它：我们可以在不改变其他任何东西的情况下以较低的成本挑选`a2`和支付，因此挑选不是最理想的。`a1``a1`

# ruby-on-rails - 如何通过rails模型将值设置为null？

> ID：14316900
> 
> 赞同：4
> 
> 时间：2013-01-14T10:42:19.547
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

如何通过 ruby​​ on rails 中的模型使列值为空？例如，我有一个`checkbox`被叫`'include_on_epc'`和`textbox`被叫`'removal_reason'`。

如果选中该复选框，我想将文本框的值设置为数据库中的 NULL。

我尝试了以下方法，它不起作用。

```
class Emm::Rrr::Result < ActiveRecord::Base

  before_save :no_removal_reason_when_including_on_epc

  private
  def no_removal_reason_when_including_on_epc
    if include_on_epc == 1
      self.removal_reason == nil
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T10:50:58.030

这里有两个问题。

1.  正如 Jakob 指出的那样，`self.removal_reason == nil`与 相比`removal_reason`，`nil`您想*设置* `removal_reason`为`nil`。因此`self.removal_reason = nil`，这绝对是您想要的。

2.  如果`include_on_epc`是一`boolean`列，比较`1`是行不通的。您可能想要一个简单`if include_on_epc`的值，因为它的值很可能是`true`or `false`，不是`1`or `0`，并且在 Ruby 中`1 != true`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T10:44:23.053

看来`self.removal_reason == nil`应该是`self.removal_reason = nil`。我猜你想要分配，而不是在那条线上的比较。;-)

# textbox - 文本框像我的winform上的一个洞一样透明

> ID：14316905
> 
> 赞同：2
> 
> 时间：2013-01-14T10:42:30.887
> 
> 标签：textbox, transparent

所以我有一个 C# winform，有一个面板和一个属于面板的文本框。

问题是文本框在我的 winform 上显示为一个洞。我可以看到它背后的内容（我的桌面、其他窗口等）。这对我来说听起来像是一个错误，因为经过一些谷歌研究，我得出的结论是文本框不能透明。

如果以下任何一项相关：winform 透明度键设置为透明、文本框`backcolor=white`和`forecolor=black`.

我尝试重新启动 Visual Studio 和计算机，但问题仍然存在。

有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T10:53:00.337

Color.Transparent 在 ARGB 中为 0,255,255,255。这意味着它的白色没有不透明度。由于透明度键用于非透明颜色（24 位 RGB），因此它不使用 Alpha 部分。这意味着。Color.Transparent == Color.White 用于 TransparencyKey

因此，您的行为是 100% 预期的，TransparencyKey 为白色，TextBox BackColor 为白色。因此文本框背景不可见。根本不是错误。

您可以通过根本不设置 TransparencyKey 或将其设置为 Color.Empty 或其他颜色来解决此问题。或者，如果您想保持白色作为 TransparencyKey，您可以更改 TextBox 的 BackgroundColor。

不过，将白色作为 TransparencyKey 并不是一个好主意（您已经知道原因了）。如果您仍想使用它，我建议您使用青色或洋红色（很少使用的颜色）

# javascript - canJS：加载带有关联的模型，但只保存“基础”模型

> ID：14316913
> 
> 赞同：1
> 
> 时间：2013-01-14T10:42:59.357
> 
> 标签：javascript, jquery, canjs, canjs-model

[这是一个演示](http://jsbin.com/owuvam/1/edit)，如何在 canJS 中加载具有关联的模型（在单个请求中）。我在[canJS 的 github repo 中](https://github.com/bitovi/canjs)找到了它，[here](https://github.com/bitovi/canjs/blob/master/model/pages/associations.html)，实际上我不得不稍微重写它才能工作（它已经过时了），但它现在可以工作了。

我的问题是，如果我更改加载的联系人（`contact.attr('name', 'Tom');`），然后我想保存它（`contact.save();`），那么联系人以及联系人的任务将通过 ajax 发布到服务器，以进行保存。这是合乎逻辑的，因为`tasks`是 的一个属性`contact`。

我的问题是，我只想要联系人`name`，`birthday`并`id`在更新记录时发布。我可能应该重写该`makeRequest`方法，并在发布到服务器之前删除`tasks`，但我认为应该有一个更优雅的解决方案。

希望这里有一些 canJS 用户，他们已经处理了这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T11:19:36.843

我自己正在寻找解决这个问题的方法，我想出了我自己的解决方案，灵感来自于trickey 在[这篇文章](https://forum.javascriptmvc.com/topic/how-to-wrap-data-sent-to-server)中的 JavascriptMVC 论坛上关于修改`serialize()`模型方法以使其与 Rails 更好地配合的建议。

像他的建议一样，我创建了自己的 Model 类扩展，并`include`在我的模型上添加了一个字段，您可以在其中列出您想要包含的属性（在 Rails as_json 方法之后的模式）。

```
can.Model("BaseModel", {}, {
  serialize: function() {
    var data, retval, serialized;
    data = {};
    retval = {};
    serialized = can.Model.prototype.serialize.call(this);
    //check if we're using the "include" fields or not
    if (typeof this.constructor.include !== 'undefined') {
      can.each(this.constructor.include, function(attr) {
        data[attr] = serialized[attr];
      });
    } else {
      data = serialized;
    }
    //wrap the return value in the model name for Rails purposes, e.g. {"event": {data}}
    retval[this.constructor._shortName] = data;
    return retval;
  }
}); 
```

然后在我的模型中，我使用“包含”数组来指示我想要包含哪些字段。通过省略“参加者”和“演讲者”，这些关联的模型将不会被打包到我的序列化 JSON 中，然后发送回服务器。

```
Event = BaseModel.extend('Event', {
  findAll: "GET /admin/events",
  findOne: "GET /admin/events/{id}",
  create: "POST /admin/events",
  update: "PUT /admin/events/{id}",
  destroy: "DELETE /admin/events/{id}",
  attributes: {
    attendees: 'Models.User.models',
    speakers: 'Models.User.models'
  },
  include: ['id', 'name', 'start_time', 'end_time']
}, {}); 
```

# session - 在 Joomla 登录中设置会话

> ID：14316914
> 
> 赞同：0
> 
> 时间：2013-01-14T10:43:01.487
> 
> 标签：session, joomla

我使用的是最新版本，一旦用户登录`Joomla 3.0`，我需要删除，我不想再次使用相同的用户 ID --- 因此 Joomla 中的会话通过`session``login``$session =& JFactory::getSession();`

知道如何设置用户名，以便他只能`logged`在网站上访问一次吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T11:43:24.390

像这样试试

```
$user    = JFactory::getUser();
$session =& JFactory::getSession();

$session->set('userid',$user->id);

//checking whether the user logged in or not
$userid = $session->get('userid');
if($userid=='')
{
   $session->set('userid','');  //set to blank
} 
```

# vba - 在 Word 中复制表格中的文本并保留格式

> ID：14316916
> 
> 赞同：1
> 
> 时间：2013-01-14T10:43:15.423
> 
> 标签：vba, ms-word

我在将单元格从表格复制到另一个单元格时遇到问题。我在这里说的是两个word文档。我可以复制文本，但项目符号和一些格式都消失了。

我试过`.Formattedtext`了，但还是做不到。

```
Dim test As Word.Cell

'An error occurs something like "Object variable or With block variable not set"
test.Range.FormattedText = CTPDoc.Tables(2).Rows(testCount).Cells(3).Range.FormattedText 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T12:08:13.003

这是一个例子。

假设我们在一个 word 文档中有两个表格。请看下面的截图

![在此处输入图像描述](../Images/6cca9f8e2ddbc5672e6f226ea0032314.png)

假设我们要粘贴从`Cell 1`of`Table 1`到`Cell 1`of的数据，`Table 2`然后试试这个

```
Sub Sample()
    Dim tbl1 As Table, tbl2 As Table

    Set tbl1 = ActiveDocument.Tables(1)
    Set tbl2 = ActiveDocument.Tables(2)

    tbl1.Cell(1, 1).Range.Copy
    tbl2.Cell(1, 1).Range.PasteAndFormat (wdFormatOriginalFormatting)
End Sub 
```

这就是宏的作用

![在此处输入图像描述](../Images/c470ffd5f69028a2676748466e213e82.png)

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T02:34:04.680

@Siddharth Rout 你的回答真的很有帮助。这不是我的问题的确切答案，但至少我了解了`PasteandFormat`它的不同类型，例如`wdFormatOriginalFormatting`. 也许有一天我可以使用它。

现在解决了我的问题。使用 Siddharth 给出的逻辑，我使用了 simple`tbl2.Cell(1, 1).Range.Paste`而不是`PasteandFormat`. 实际上`PasteandFormat`有效，但仅在选定的源文件/表中发生了问题。我认为源表中存在一些格式，当粘贴到另一个单元格中时，它看起来会一团糟。我不确定那到底是什么，但`.Paste`肯定为我解决了。我希望我也可以帮助别人:)

# php - 有没有办法将查询传递给 php 函数

> ID：14316920
> 
> 赞同：0
> 
> 时间：2013-01-14T10:43:18.950
> 
> 标签：php, mysql

我希望这没有在其他地方被问到，因为我看了，但这里有。我编写了这个函数来为我创建表。它可以工作，但我遇到的问题是每次我调用这个函数时它都会运行查询。有没有办法调用这个函数并将查询传递给函数？

```
function createawardtables($awardname, $awardshortname, $maxawards, $id){    
    $query="SELECT * FROM awards WHERE id = $id";
    $result = mysql_query($query) or die("There was a problem with the SQL query: " . mysql_error());
    while($row = mysql_fetch_array($result)){
        $order = array("","1st","2nd","3rd","4th","5th","6th","7th","8th",'9th',"10th");
        echo "<table><th colspan=4><font color=maroon  size='4pt'><u><b>Orders of the $awardfullname</b></u></font></th>";   
        for($i=1; $i<$maxawards+1; $i++) {
            ${$awardshortname.$i} = dateconvert(($row["$awardshortname$i"]), 2);
            ${$awardshortname.$i.'by'} = $row["$awardshortname{$i}by"];
            ${$awardshortname.$i.'memo'} = $row["$awardshortname{$i}memo"];
            echo "<tr>
                <td>$order[$i] Order given on </td>
                <td><input type=text name='$awardshortname$i' title='mm/dd/yyyy' value= '${$awardshortname.$i}' size=8/></td>
                <td>by <input type=text name='$awardshortname{$i}by' title='Name of who gave the award.' value='${$awardshortname.$i.'by'}'size=15/></td>
                <td>for <input type=text name='$awardshortname{$i}memo' title='What the award was give for.' value='${$awardshortname.$i.'memo'}'size=15/></td>
                </tr>";

            if($i==10 or $awardshortname=="initiate"){
            echo "</table><br />";

            };
        };
    };
    mysql_free_result($result); 
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:46:52.873

当然，只需在`$awardname`函数中添加一个新参数（如 ）并在调用 'mysql_query()` 时使用它。

另请注意，强烈建议不要使用`mysql_*`函数：

> 此扩展自 PHP 5.5.0 起已弃用，并将在未来删除。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。

[http://www.php.net/mysql_query](http://www.php.net/mysql_query)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:47:26.120

干得好

```
function createawardtables($result, $awardname, $awardshortname, $maxawards, $id)
{    
    while($row = mysql_fetch_array($result)){
        $order = array("","1st","2nd","3rd","4th","5th","6th","7th","8th",'9th',"10th");
        echo "<table><th colspan=4><font color=maroon  size='4pt'><u><b>Orders of the $awardfullname</b></u></font></th>";   
        for($i=1; $i<$maxawards+1; $i++) {
            ${$awardshortname.$i} = dateconvert(($row["$awardshortname$i"]), 2);
            ${$awardshortname.$i.'by'} = $row["$awardshortname{$i}by"];
            ${$awardshortname.$i.'memo'} = $row["$awardshortname{$i}memo"];
            echo "<tr>
                <td>$order[$i] Order given on </td>
                <td><input type=text name='$awardshortname$i' title='mm/dd/yyyy' value= '${$awardshortname.$i}' size=8/></td>
                <td>by <input type=text name='$awardshortname{$i}by' title='Name of who gave the award.' value='${$awardshortname.$i.'by'}'size=15/></td>
                <td>for <input type=text name='$awardshortname{$i}memo' title='What the award was give for.' value='${$awardshortname.$i.'memo'}'size=15/></td>
                </tr>";

            if($i==10 or $awardshortname=="initiate"){
            echo "</table><br />";

            };
        };
    };
    mysql_free_result($result); 
}; 
```

和函数调用

```
$query="SELECT * FROM awards WHERE id = $id";
$result = mysql_query($query) or die("There was a problem with the SQL query: " . mysql_error());
createawardtables($result, $awardname, $awardshortname, $maxawards, $id); 
```

# android - Unity3D Build Configuration 为 iOS 省略一个包

> ID：14316923
> 
> 赞同：1
> 
> 时间：2013-01-14T10:43:23.847
> 
> 标签：android, ios, unity3d, game-center, gree

我正在为 iOS 和 Android 构建 Unity3D 游戏。对于排行榜和成就，我想在 Android 中使用 GREE，在 iOS 中使用 Gamecenter。那么，当从 Unity3D 构建时，是否可以以这样的方式进行配置，即 XCode 项目中不存在 GREE 库和文件，并且 iOS 与 GREE 没有依赖关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:08:52.080

在脚本中，您可以使用[Platform Dependent Compilation](http://docs.unity3d.com/Documentation/Manual/PlatformDependentCompilation.html)来控制哪些部分代码被编译，哪些部分不被编译。例如，你可以这样写：

```
static public void showLeaderBoard()
{
#if UNITY_IPHONE
   //Show GameCenter leader board
#elif UNITY_ANDROID
   //Show GREE's leader board 
#endif
} 
```

因为您在 iOS 和 Android 上都有相同的脚本，所以您编写的这个脚本对于构建来说不会有问题。为了防止库和文件（我认为它们可能都是插件）显示在错误的项目文件夹中，您可以尝试使用 /Assets/Plugins/ 文件夹中的文件夹。将所有仅限 iOS 的文件放入 /Assets/Plugins/iOS/，将所有仅限 Android 的文件放入 /Assets/Plugins/Android/。针对不同平台构建后，Unity 会将相应文件夹中的文件复制到您的 iOS/Android 项目中。

# android - 检测蓝牙设备断开连接

> ID：14316925
> 
> 赞同：1
> 
> 时间：2013-01-14T10:43:28.063
> 
> 标签：android, bluetooth

我试图找出是否可以可靠地检测到与（非音频）设备的蓝牙连接何时丢失。Android SDK 提供了一个蓝牙聊天示例，该示例使用以下代码段：

```
public void run() {
    Log.i(TAG, "BEGIN mConnectedThread");
    byte[] buffer = new byte[1024];
    int bytes;

    // Keep listening to the InputStream while connected
    while (true) {
        try {
            // Read from the InputStream
            bytes = mmInStream.read(buffer);

            // Send the obtained bytes to the UI Activity
            mHandler.obtainMessage(BluetoothChat.MESSAGE_READ, bytes, -1, buffer)
                    .sendToTarget();
        } catch (IOException e) {
            Log.e(TAG, "disconnected", e);
            connectionLost();
            break;
        }
    }
} 
```

当我在不使用应用程序的情况下启动线程并在 12 小时后断开设备连接时，这种方法有多可靠（服务在后台运行）。当然，服务总是可以被杀死？

然后是广播。我的应用会一直收到这些广播吗？什么时候不会？我已经尝试通过在 AndroidManifest 中使用它来实现它：

```
 <receiver android:name="MyReceiver" >
        <intent-filter>
            <action android:name="android.bluetooth.device.action.ACL_CONNECTED" />
            <action android:name="android.bluetooth.device.action.ACL_DISCONNECT_REQUESTED" />
            <action android:name="android.bluetooth.device.action.ACL_DISCONNECTED" />
        </intent-filter>
    </receiver> 
```

我在很短的时间内测试了这两种方法，并且都有效。如前所述，我不确定当手机长时间闲置时这些是否可靠。

谁能对此有所了解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:42:44.800

蓝牙中的每个活动都有一个与之关联的超时。它因设备而异。

只要您启用了蓝牙服务，它就会在后台运行。ACL [Asynchronous Connection Less] 包一般用于传输非语音相关的数据。ACL 就像两个蓝牙设备之间的连接通道。这可能会根据不活动计时器或超时值断开连接。

您可以读取调用 HCI createConnection API 时设置的连接超时。此信息可以通过执行 hcidump 工具获取。http://www.bluez.org/download/

# php - Symfony2：生成捆绑包后无法启动

> ID：14316930
> 
> 赞同：0
> 
> 时间：2013-01-14T10:43:39.370
> 
> 标签：php, symfony, netbeans, terminal, mamp

我刚刚通过使用终端（OSX）生成它来创建一个 Symfony2 项目。

我生成了以下内容：

*   包命名空间：SG/FOBundle
*   捆绑包名称：SGFOBundle
*   配置格式：YML

所有其他设置都是默认设置（是的，是的，是的 -> 您现在可以开始使用生成的代码了！）

--

当我在 Netbeans 中将文件夹添加为 PHP 项目并启动时（MAMP 处于活动状态），我只收到以下错误：致命错误：调用 /Applications/MAMP/ 中未定义的方法 SocialGEO\FOBundle\SocialGEOFOBundle::getName() htdocs/socialgeo/app/bootstrap.php.cache 第 798 行

我在 Google 或 Symfony 网站上都找不到任何解决方案。

有任何想法吗？谢谢！

# window - - Titanium - 基本创建新窗口

> ID：14316935
> 
> 赞同：0
> 
> 时间：2013-01-14T10:43:52.037
> 
> 标签：window, titanium

我有一个钛新手。我尝试创建新页面，但发现错误

> [错误]：脚本错误 = 找不到变量：newCard.js 中的模块（第 21 行）。[错误]：脚本错误 = 'undefined' 不是 FirstView.js 中的对象（评估 'Ti.include("ui/common/newCard.js").createWindow'）（第 46 行）。

这是我的测试代码

```
 function FirstView() {  
    var self = Ti.UI.createView();  

    var label = Ti.UI.createLabel({
        color:'black',
        text:String.format(L('welcome'),'(test)'),      
        top:'50',
        align:'center',
        height:'auto',
        width:'auto'
    });
    self.add(label);

    var txtClick=Ti.UI.createLabel({
        text:String.format(L('txtclick'),'- click here -'),
        color:'red',
        top:'180',
        align:'center',
        height:'auto',
        width:'auto'        
    });
    self.add(txtClick); 

    var show=Ti.UI.createImageView({
        top:'100',
        width:'172',
        height:'52',
        image:'/images/logo.png' 
    });
    self.add(show); 

    txtClick.addEventListener('click', function(e) {    
       var window = Ti.include("ui/common/newCard.js").createWindow({
        title:"new card a day"
       });
       window.open({
            animated:true
       }); 
    });

    return self;
}
module.exports = FirstView; 
```

和 cardNew.js

```
 function newCard(){
        var self = Ti.UI.createView({
            backgroundColor: 'black',
        });

        var show=Ti.UI.createImageView({
            top:'100',
            width:'172',
            height:'52',
            image:'/images/logo.png' 
        });
        self.add(show);

        return self;
    }
module.exports = newCard; 
```

请帮我。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T11:58:36.880

Try to change your code to this inside the eventlistener's callback:

```
var newCard = require("ui/common/newCard");
var win = new newCard();
win.open({animated:true}); 
```

# cpu - POWER8 架构“平面”虚拟地址空间

> ID：14316936
> 
> 赞同：4
> 
> 时间：2013-01-14T10:43:55.443
> 
> 标签：cpu, cpu-architecture, virtual-address-space

如此处所述，任何人[都](https://en.wikipedia.org/wiki/IBM_POWER#The_architecture "这里")可以解释“平坦”32位空间的含义吗？

懒人的文字：

> 该架构的另一个有趣特性是虚拟地址系统，它将所有地址映射到 52 位空间。通过这种方式，应用程序可以在“平坦”的 32 位空间中共享内存，并且所有程序都可以有不同的 32 位块。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T21:58:30.793

“平坦”地址空间意味着用于每个程序的虚拟化 32 位空间可以在从字节 0 一直到 xFFFFFFFF 的连续偏移中独立且直接地访问。

将此与通常称为“分段”地址空间的情况进行对比，其中地址由段号或描述符组成，然后是较少数量的位作为该段/描述符的偏移量。

内存管理系统巧妙地将 32 位地址引用转换为底层架构提供的实际 52 位地址空间内的特定位置。

# php - 自我:: 在 PHP5.2 中

> ID：14316937
> 
> 赞同：0
> 
> 时间：2013-01-14T10:43:57.420
> 
> 标签：php, php-5.2

如何使它与 PHP5.2 向后兼容？它适用于 5.3 及更高版本

# 错误

```
Fatal error: Cannot call method self::utf8_dec() or method does not exist 
```

# 代码

```
private function utf8_decode($arr){
    array_walk_recursive($arr, 'self::utf8_dec'); // <----- error

    return $arr;
}

private function utf8_dec(&$value, $key){
    $value = utf8_decode($value);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:48:07.963

试试这个：

```
array_walk_recursive($arr, array(__CLASS__, 'utf8_dec')); 
```

我也会这样做：

```
private static function utf8_dec(&$value, $key) { // now is static!
    $value = utf8_decode($value);
} 
```

我还建议看一下如何在 PHP 中定义回调：http: [//php.net/manual/en/language.types.callable.php](http://php.net/manual/en/language.types.callable.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:48:08.950

代替`self`，您可以直接使用类的名称。它没有那么灵活，但它应该可以工作。

```
static private function utf8_decode($arr){
    array_walk_recursive($arr, 'YourClass::utf8_dec');

    return $arr;
}

static private function utf8_dec(&$value, $key){
    $value = utf8_decode($value);
} 
```

您还需要在方法前面加上`static`关键字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T10:59:23.263

它似乎不是类型（静态）的问题，而不是它被称为超出范围。如果您不使用严格模式，它应该可以在没有您说函数是静态的情况下工作。

```
<?php
class test {
    public function __construct($arr) {
        print_r(self::utf8_decode($arr));
        print_r($this->utf8_decode($arr));

        print_r(self::utf8_decode_v2($arr));
        print_r($this->utf8_decode_v2($arr));
    }
    private static function utf8_decode($arr){
        array_walk_recursive($arr, 'self::utf8_dec'); 
        return $arr;
    }
    private function utf8_decode_v2($arr){
        array_walk_recursive($arr, array($this, 'utf8_dec')); 
        return $arr;
    }

    private function utf8_dec(&$value, $key){
        $value = utf8_decode($value);
    }
}
$a = new test(array('apple','pinaple','nut'));
?> 
```

# asp.net-mvc-3 - ASP.NET Web API - NTLM 身份验证和 HTTPS

> ID：14316938
> 
> 赞同：4
> 
> 时间：2013-01-14T10:43:58.427
> 
> 标签：asp.net-mvc-3, https, asp.net-web-api, ntlm

我有以下配置：

1.  自托管 ASP.NET Web API
2.  ASP.NET MVC 3 Web 应用程序

Web 应用程序 [2] 通过 HTTPS 与 Web API [1] 通信。他们（目前）都住在同一台机器上。

Web API [1] 的 Http 绑定配置如下：

`httpBinding.Security.Mode = HttpBindingSecurityMode.Transport;` `httpBinding.Security.Transport.ClientCredentialType = HttpClientCredentialType.Ntlm;`
`httpBinding.TransferMode = TransferMode.Streamed`

我无法使用 https 和 ntlm 授权使其工作。

*   如果我通过纯 http 进行通信，它可以工作并且我已通过正确的身份验证
*   如果我通过 https 进行通信，则所有具有 [Authorize] 标签的控制器操作都会出现“401 Unauthorized”错误（它适用于不需要授权的操作）

为什么只更改传输协议（从 http 到 https）会阻止 NTLM 身份验证工作？

感谢您提供任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-06T00:25:16.683

@Jacek Nowak 我自己也遇到了同样的问题，今天我刚刚找到了答案，在下面[的帖子](https://frendsrnd.wordpress.com/2014/02/03/httpselfhostserver-hosted-web-api-with-https-and-windows-authentication-enabled/)中有详细说明。

下面是我将如何编码。

```
public class NTLMSelfHostConfiguration : HttpSelfHostConfiguration
{
    public NTLMSelfHostConfiguration(string baseAddress) : base(baseAddress) { }
    public NTLMSelfHostConfiguration(Uri baseAddress) : base(baseAddress) { }
    protected override BindingParameterCollection OnConfigureBinding(HttpBinding httpBinding)
    {
        httpBinding.Security.Mode = HttpBindingSecurityMode.TransportCredentialOnly;
        httpBinding.Security.Transport.ClientCredentialType = System.ServiceModel.HttpClientCredentialType.Ntlm;
        httpBinding.ConfigureTransportBindingElement = 
            element => element.AuthenticationScheme = 
                System.Net.AuthenticationSchemes.IntegratedWindowsAuthentication;
        return base.OnConfigureBinding(httpBinding);
    }
}

public static class Program()
{
    public static void main(string[] args)
    {
        var config = new NTLMSelfHostConfiguration("https://localhost/");            
        config.Routes.MapHttpRoute("Main",
                                    "api/{controller}");

        var server = new HttpSelfHostServer(config);

        server.OpenAsync().Wait();

        Console.WriteLine("Running");
        Console.ReadLine();

        server.CloseAsync().Wait();

    }
} 
```

# c# - 通过$动态发送数据。ajax方法

> ID：14316939
> 
> 赞同：1
> 
> 时间：2013-01-14T10:43:59.683
> 
> 标签：c#, jquery, ajax, asp.net-mvc

我在 MVC 网站项目中使用 jquery。

我有一个名为“testController”的简单 C# 控制器：

```
public class testController
{
    public string test(string id)
    {
        return id;
    }
} 
```

..和一个使用它的javascript函数：

```
function myfunct(sData) {
    $.ajax({
        type: "POST",
        async: false,
        datatype: "json",
        url: '/test/test',
        data: '{' + sData + '}', //Not Working if I set sData = "id:'Hello'"
                                 //Work if I write data = { id:'hello'},
        success: function (json) {
            alert(json); //Need to return 'Hello'
        }
    });
} 
```

..有一种方法可以动态分配“数据”参数吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T10:46:49.770

只要您传递的对象中的属性与操作接受的类型的属性相匹配，您就可以根据需要创建对象。尝试这个：

```
var sData = { id: 1234 }; // note 'id' matches the property in the signature of the action method

// in the $.ajax() call properties...
data: sData 
```

这也适用于类。例如，如果您的控制器中有此类和操作：

```
public class Foo {
    public int Id { get; set; }
    public string Name { get; set; }
}

// in controller:
public ActionResult Bar(Foo myFoo) {
    // do stuff with Foo
} 
```

然后，您可以通过`$.ajax`以下形式传递一个 javascript 对象：

```
var data = { Id: 1234, Name: 'Foo bar' }; 
```

请注意，属性被映射到方法签名中的类的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T11:03:48.167

如果 the`key`和 its`value`都是动态的，则需要使用稍微不同的语法来创建`data`在调用 时设置为属性的对象`jQuery.ajax()`。

一般原则是这样的：

```
var key = 'id', value = 'Hello', data = {};
data[key] = value; 
```

这是因为在 JavaScript 中对象键（或属性）不必是字符串。以下是完全有效和等效的：

```
var obj = {id : 'Hello'};
var obj = {'id' : 'Hello'}; 
```

因此，如果您尝试使用存储在变量中的动态值，并在尝试创建它时将其传递给对象字面量，JavaScript*不知道*它应该使用具有该名称的变量的值，而是只是将其视为对象中的关键。

在您的情况下，您可能想要更改函数，以便将对象本身传递给它，如下所示：

```
function myfunct(sData) {
    $.ajax({
        type: "POST",
        async: false,
        datatype: "json",
        url: '/test/test',
        data: sData,
        success: function (json) {
            alert(json); //Need to return 'Hello'
        }
    });
} 
```

然后像这样使用它：

```
var key = 'id', value = 'Hello', data = {};
data[key] = value;
myfunct(data); 
```

至于为什么`data: '{' + sData + '}'`不起作用，当您将字符串作为`data`属性值传递时，jQuery 只是将其用作 AJAX 请求的查询字符串，而您传递的字符串不会设置正确的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T11:21:54.497

我找到了一个解决方案：

正如@Anthony Grist 在之前的回答中提到的那样，我需要使用一个对象，而不是一个字符串......所以使用 '. eval()' 方法我动态创建我的键值对。

像这样的东西：

```
function myfunct(sData) {
eval('var ssData = {' + sData + '}');
$.ajax({
    type: "POST",
    async: false,
    datatype: "json",
    url: '/test/test',
    data: ssData,
    success: function (json) {
        alert(json); 
    }
});
}
myfunct("id:'hello'"); //Return Hello
myfunct("id:'bye'"); //Return bye 
```

...这似乎对我有用..你怎么看？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T10:48:46.887

您可以创建一个单独的变量以将参数发送到控制器中的操作。

```
function myfunct(sData) {
    $.ajax({
        type: "POST",
        async: false,
        datatype: "json",
        url: '/test/test',
        data: { id: 'hello'}, // pass directly your parameter in a dynamic object
        success: function (json) {
            // your can read: json.Id , json.Name, etc...
            alert(json.id); //Need to return 'Hello' in ID property
        }
    });
} 
```

在控制器上，您可以获取字符串并返回 JSon 格式的结果。

```
public class TestController
{
    public ActionResult Test(string id)
    {
        string valueResult = id; // process your result
        return Json(new { id: valueResult, name = 'User' }, JsonRequestBehavior.AllowGet.);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T10:49:14.440

尝试以下

```
var mydata = { key : value };

    $.ajax({
        type: "POST",
        async: false,
        datatype: "json",
        url: '/test/test',
        data: mydata,
        success: function (json) {
            alert(json); //Need to return 'Hello'
        }
    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T11:00:59.950

可能你正在寻找这个：

`jQuery.parseJSON()`在您的情况下会有所帮助：[http ://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

```
function myfunct(sData) {

    $.ajax({
        type: "POST",
        async: false,
        datatype: "json",
        url: '/test/test',
        data: jQuery.parseJSON(sdata),
        success: function (json) {
            alert(json); //Need to return 'Hello'
        }
    });
} 
```

# scala - 将类作为值传递并创建实例

> ID：14316940
> 
> 赞同：6
> 
> 时间：2013-01-14T10:44:00.407
> 
> 标签：scala

我有许多类的共同基本特征。我有一个函数需要创建这些类之一的实例的新实例，但只有在运行时才知道哪一个。

是否可以将此类作为参数传递并在运行时在 Scala 中创建实例？

我什至不确定答案是否是最好的方法，但目前这是我唯一能想到的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T10:47:38.573

您可以这样传递值：

```
myFunc(classOf[myObj]) 
```

到带有签名的方法

```
def myFunc(clazz : AnyRef)={ ... 
```

但这闻起来很糟糕。您正在考虑实现[工厂模式](http://www.oodesign.com/factory-pattern.html)，或者更好的是您可以使用多态性并简单地执行以下操作：

```
myObj.myFunc 
```

因为您的功能取决于所涉及的类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T11:05:01.600

与 Java 相同：

```
classOf[MyClass].newInstance // calls the constructor without parameters
classOf[MyClass].getConstructor(/* parameter types */).newInstance(/* parameters */) 
```

有关 Class ，请参阅[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html)。

这适用于任何 Scala 版本。Scala 2.10 有[新的反射库](http://www.scala-lang.org/api/current/index.html#scala.reflect.api.Mirrors)，它们了解 Scala 概念。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T11:37:04.167

我建议尽量避免反射，因为它很容易导致难以测试的代码和运行时异常。

但是，您可以为该类创建一个构建器，如下所示：

```
trait Builder[A]{
   def newItem:A
} 
```

然后将适当的构建器传递给您的函数

```
def myFunc[A](param1:B,builder:Builder[A]) 
```

你也可以利用隐式

```
def myFunc[A](param1:B)(implicit builder:Builder[A]) 
```

也许您可以详细说明您的用例？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T15:09:43.907

获得所需内容的最“无缝”方式是将执行实例化的方法声明为具有上下文绑定的类型参数`ClassManifest`

```
def maker[T : ClassManifest](args...): T = ... 
```

这将导致编译器自动将一个实例传递`ClassManifest[T]`给 maker。调用者只需要指定他们想要实例化的特定类。

```
package rrs.scribble

import  scala.reflect.ClassManifest

object  Maker
{
  def maker[T : ClassManifest]: T = {
    val cmT = implicitly[ClassManifest[T]]
    val cT = cmT.runtimeClass
    cT.newInstance.asInstanceOf[T]
  }
} 
```

这只适用于有问题的类的无参数构造函数。您可以使用参数调用构造函数，但涉及更多。您必须熟悉 Java 反射 API。

在 REPL 中：

```
scala> import rrs.scribble.Maker._
import rrs.scribble.Maker._

scala> class Argless
defined class Argless

scala> val s1 = maker[Argless]
s1: Argless = Argless@1512d075 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T13:43:36.563

我个人会避免反思。

如果您可以事先识别所有可能的用例并使用标识符对其进行分类：

```
trait SUPER

class A extends SUPER
class B extends SUPER
class C extends SUPER
class D extends SUPER

val idA = 'CLASS_A
val idB = 'CLASS_B
val idC = 'CLASS_C
val idD = 'CLASS_D

def build(selectedId: Symbol): SUPER = selectedId match {
  case 'CLASS_A => new A
  case 'CLASS_B => new B
  case 'CLASS_C => new C
  case 'CLASS_D => new D
} 
```

否则，如果您更喜欢建筑商，我会遵循 @Edmondo1984 的建议

# android - 在android中集成twitter API时获取NetworkOnMainThreadException

> ID：14316941
> 
> 赞同：4
> 
> 时间：2013-01-14T10:44:06.280
> 
> 标签：android, android-asynctask, android-twitter

我已经搜索了很多，但无法找到解决方案。我正在尝试将 twitter 集成到我的 Android 应用程序中。它在模拟器上运行良好，但在蜂窝和更高级别的设备上运行不佳。下面，我附上了带有代码的日志猫错误。

```
01-14 11:56:31.226: W/System.err(3649): android.os.NetworkOnMainThreadException
01-14 11:56:31.230: W/System.err(3649):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
01-14 11:56:31.230: W/System.err(3649):     at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
01-14 11:56:31.230: W/System.err(3649):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
01-14 11:56:31.230: W/System.err(3649):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
01-14 11:56:31.230: W/System.err(3649):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
01-14 11:56:31.230: W/System.err(3649):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
01-14 11:56:31.230: W/System.err(3649):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
01-14 11:56:31.230: W/System.err(3649):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
01-14 11:56:31.230: W/System.err(3649):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
01-14 11:56:31.230: W/System.err(3649):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
01-14 11:56:31.230: W/System.err(3649):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
01-14 11:56:31.230: W/System.err(3649):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
01-14 11:56:31.234: W/System.err(3649):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
01-14 11:56:31.234: W/System.err(3649):     at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
01-14 11:56:31.234: W/System.err(3649):     at libcore.net.http.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:479)
01-14 11:56:31.234: W/System.err(3649):     at twitter4j.internal.http.HttpResponseImpl.<init>(HttpResponseImpl.java:45)
01-14 11:56:31.234: W/System.err(3649):     at twitter4j.internal.http.HttpClientImpl.request(HttpClientImpl.java:178)
01-14 11:56:31.234: W/System.err(3649):     at twitter4j.internal.http.HttpClientWrapper.request(HttpClientWrapper.java:75)
01-14 11:56:31.234: W/System.err(3649):     at twitter4j.internal.http.HttpClientWrapper.get(HttpClientWrapper.java:103)
01-14 11:56:31.238: W/System.err(3649):     at twitter4j.Twitter.getAccountSettings(Twitter.java:1440)
01-14 11:56:31.238: W/System.err(3649):     at com.recipe.pack.TwitterUtils.isAuthenticated(TwitterUtils.java:23)
01-14 11:56:31.238: W/System.err(3649):     at com.recipe.pack.RecpieActivity.onClick(RecpieActivity.java:763)
01-14 11:56:31.238: W/System.err(3649):     at android.view.View.performClick(View.java:3511)
01-14 11:56:31.238: W/System.err(3649):     at android.view.View$PerformClick.run(View.java:14105)
01-14 11:56:31.238: W/System.err(3649):     at android.os.Handler.handleCallback(Handler.java:605)
01-14 11:56:31.238: W/System.err(3649):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-14 11:56:31.238: W/System.err(3649):     at android.os.Looper.loop(Looper.java:137)
01-14 11:56:31.242: W/System.err(3649):     at android.app.ActivityThread.main(ActivityThread.java:4424)
01-14 11:56:31.242: W/System.err(3649):     at java.lang.reflect.Method.invokeNative(Native Method)
01-14 11:56:31.242: W/System.err(3649):     at java.lang.reflect.Method.invoke(Method.java:511)
01-14 11:56:31.242: W/System.err(3649):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-14 11:56:31.242: W/System.err(3649):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-14 11:56:31.246: W/System.err(3649):     at dalvik.system.NativeStart.main(Native Method) 
```

TwitterUtils.java

```
public static boolean isAuthenticated(SharedPreferences prefs) {

        String token = prefs.getString(OAuth.OAUTH_TOKEN, "");
        String secret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");

        AccessToken a = new AccessToken(token,secret);
        Twitter twitter = new TwitterFactory().getInstance();
        twitter.setOAuthConsumer(Constants.CONSUMER_KEY, Constants.CONSUMER_SECRET);
        twitter.setOAuthAccessToken(a);

        try {
            twitter.getAccountSettings();
            return true;
        } catch (TwitterException e) {
            return false;
        }
    }

    public static void sendTweet(SharedPreferences prefs,String msg) throws Exception {
        String token = prefs.getString(OAuth.OAUTH_TOKEN, "");
        String secret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");

        AccessToken a = new AccessToken(token,secret);
        Twitter twitter = new TwitterFactory().getInstance();
        twitter.setOAuthConsumer(Constants.CONSUMER_KEY, Constants.CONSUMER_SECRET);
        twitter.setOAuthAccessToken(a);
        twitter.updateStatus(msg);
    } 
```

实现按钮的类：

```
case R.id.btweet:
            Toast.makeText(this, "Recipe Tweet will be posted on your profile", 5000).show();
            try{
            if (TwitterUtils.isAuthenticated(prefs)) {
                sendTweet();
            } else {
                Intent i = new Intent(getApplicationContext(), PrepareRequestTokenActivity.class);
                i.putExtra("tweet_msg",getTweetMsg());
                startActivity(i);
            }
            }catch(Exception e){
                e.printStackTrace();
            }
            break; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T11:15:19.607

尝试这个：

替换此代码：

```
if (TwitterUtils.isAuthenticated(prefs)) { 
```

具有以下内容：

```
 new AsyncTask<SharedPreferences,Object, Boolean>() {

        @Override
        protected Boolean doInBackground(SharedPreferences... params) {
            return TwitterUtils.isAuthenticated(params[0]);
        }

        @Override
        protected void onPostExecute(Boolean isAuthenticated) {
            if (isAuthenticated) {
                // Do processing after successful authentication
                    sendTweet();
            }
            else {
                // Do processing after authentication failure
                    Intent i = new Intent(getApplicationContext(), PrepareRequestTokenActivity.class);
                    i.putExtra("tweet_msg",getTweetMsg());
                    startActivity(i);
            }
        }
    }.execute(prefs); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T10:49:05.427

您不能在主线程上使用网络操作，您必须实现一个`AsyncTask`对其方法执行网络操作的`doInBackground`方法。

在你的按钮上试试这个：

```
Toast.makeText(this, "Recipe Tweet will be posted on your profile", 5000).show();
            try{
            if (TwitterUtils.isAuthenticated(prefs)) {
                new AsyncTask<Void,Void,Void>(){

                    protected Void doInBackground(Void... args){
                        sendTweet();
                        return null;
                    }

                }.execute();
            } else {
                Intent i = new Intent(getApplicationContext(), PrepareRequestTokenActivity.class);
                i.putExtra("tweet_msg",getTweetMsg());
                startActivity(i);
            }
            }catch(Exception e){
                e.printStackTrace();
            }
            break; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-06-12T05:34:49.217

写下这些行并在 oncreate 中，它不会给你例外

```
//-----------------Checking thread policy
    int SDK_INT = android.os.Build.VERSION.SDK_INT;
    if (SDK_INT >= 10) {
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
                .permitAll().build();
        StrictMode.setThreadPolicy(policy);
    } 
```

# ruby-on-rails-3 - Nginx-Passenger（Ruby on Rails）最大连接？

> ID：14316946
> 
> 赞同：1
> 
> 时间：2013-01-14T10:44:12.570
> 
> 标签：ruby-on-rails-3, nginx, passenger

一个简单的 Nginx-Passenger (Ruby on Rails) VPS 可以处理多少流量或访客？如何启用它？

# java - Play 框架中的 Json 响应字符编码

> ID：14316948
> 
> 赞同：1
> 
> 时间：2013-01-14T10:44:13.713
> 
> 标签：java, json, playframework, playframework-1.x

我有一个问题，我需要你的帮助。

我正在使用 Java 中的 Play Framework v1.2.4 用于我的移动应用程序的服务器中工作，但 Json 响应存在问题。

我一直使用视图来结束我的 Json 响应，但我意识到当我使用特殊字符（如 ñ、\n、á、é 等）时会出现问题，并且我的移动应用程序运行错误。

这是代码：

```
{
  "id":${data[0]},

  "messages": 
  [
      #{list items:data[1], as:'message'}
      {           
           "text":"${message.text}"
      }${message_isLast ? '' : ','
}#{/list}
 ] } 
```

我尝试使用 java 方法而不是在 .json 视图中正确解析响应，这没关系。那是代码：

```
JsonObject jsonOut = new JsonObject(); 
jsonOut.addProperty("id",conversation.id); 
JsonArray jsonArray = new JsonArray();   

for(int i = 0; i < conversation.messages.size; i++)  {
    Message message = conversation.messages.get(i);
    JsonObject jsonMessage = new JsonObject();
    jsonMessage.addProperty("text", message.text);
    jsonArray.add(jsonMessage); 
}

jsonOut.add("messages", jsonArray); 

renderText(jsonOut); 
```

我的问题是我是否可以在视图中做一些事情来将变量正确解析为 json 格式而无需手动操作，因为我有很多必须更改的响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T23:50:38.740

使用模板来呈现 JSON 字符串是......不好（无论如何，我应该在这里完成我的答案......）。

JSON 序列化程序通常会处理正确的引号、转义特殊字符、尊重类型、编码字符（如果需要）等...我可以看到您的模板没有这样做。

使用模板您需要自己做所有事情，如果您不完全了解 JSON 规范，您将被判失败。这不仅仅是粘贴`${message.text}`在适当的位置...

换句话说：你的第二种方法总是比第一种更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:54:44.213

JSON 的默认编码是 UTF-8。Java 的默认编码取决于区域设置。

您需要确保运行 Play 的 JVM 也以 Charset.defaultCharset() 的形式运行 UTF-8。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T22:46:40.027

编译器和编辑器都应将其编码设置为“UTF-8”。Play 框架和 JSON 已经使​​用 UTF-8。属性文件应该被`\u....`编码。错误可能出在非 Java 文件中。

# android - 单击按钮时屏幕关闭

> ID：14316953
> 
> 赞同：1
> 
> 时间：2013-01-14T10:44:29.870
> 
> 标签：android, android-button

我想在按钮单击时打开设备的屏幕，我使用的代码如下

```
public class MainActivity extends Activity {

Button powerOff;
int amountOfTime =0;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

powerOff = (Button)findViewById(R.id.button1);
powerOff.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        PowerManager manager = (PowerManager) getSystemService(Context.POWER_SERVICE);

        // Choice 1
        manager.goToSleep(amountOfTime);

        // Choice 2
        PowerManager.WakeLock wl = manager.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "Your Tag");
        wl.acquire();
        wl.release();
    }
});
} 
```

也获得了许可

```
 <uses-permission android:name="android.permission.WAKE_LOCK"/> 
```

它仍然显示一个例外

```
 01-14 16:06:00.875: E/AndroidRuntime(9317): FATAL EXCEPTION: main
   01-14 16:06:00.875: E/AndroidRuntime(9317): java.lang.SecurityException: Neither user 10079  nor current process has android.permission.DEVICE_POWER.
   01-14 16:06:00.875: E/AndroidRuntime(9317):  at android.os.Parcel.readException(Parcel.java:1322)
   01-14 16:06:00.875: E/AndroidRuntime(9317):  at android.os.Parcel.readException(Parcel.java:1276)
  01-14 16:06:00.875: E/AndroidRuntime(9317):   at android.os.IPowerManager$Stub$Proxy.goToSleep(IPowerManager.java:341)
  01-14 16:06:00.875: E/AndroidRuntime(9317):   at android.os.PowerManager.goToSleep(PowerManager.java:464) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:48:28.013

您缺少`DEVICE_POWER`权限。

编辑：显然，只允许系统应用程序使用此权限，所以你实际上被卡住了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:54:26.930

向您的清单添加以下权限：

```
<uses-permission android:name="android.permission.DEVICE_POWER"/>
<uses-permission android:name="android.permission.CHANGE_NETWORK_STATE"/> 
```

# ios6 - 我们可以使用“unwind segue”返回两个级别而不是展开到根控制器吗？

> ID：14316954
> 
> 赞同：0
> 
> 时间：2013-01-14T10:44:40.573
> 
> 标签：ios6

[流程图](http://i.stack.imgur.com/YsQVn.jpg)

你好，

我是ios开发的新手。是否有任何可能的方法可以使用“Unwind segue”进入特定的视图控制器而不是进入根控制器。我附上了代表控制器流程的图表。假设“视图控制器 3”包含一个 Button。如果我单击按钮，我想查看“表格视图控制器”。当我尝试使用“Unwind Segue”时，它会转到“View Controller 1”。因为“View Controller 1”是应用程序的根容器。我们可以使用“Unwind segue”转到“Table view controller”吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T01:21:40.510

您可以使用

```
[self.navigationController popToViewController:[[self.navigationController viewControllers]          objectAtIndex:yourindex] animated:YES]; 
```

转到堆栈上所需的视图控制器

# sql-server-2008 - 虽然存储过程中的循环不起作用

> ID：14316955
> 
> 赞同：0
> 
> 时间：2013-01-14T10:44:48.800
> 
> 标签：sql-server-2008, tsql, stored-procedures, while-loop

我正在研究一个数据库（学校项目）。我需要对该数据库进行一些测试（SQL Server 2008 R2）。

我正在尝试测试它的恢复情况。在那里我正在构建一个存储过程，以便它需要足够长的时间来使我的电脑崩溃。

问题是我正在使用的 while 循环 doenst 似乎有效。

存储过程：

```
USE [OnderzoekSQL]
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dbo].[Test_pro_opnemen] 
-- Add the parameters for the stored procedure here
@bnummer int OUT,
@i int

AS
BEGIN

SET NOCOUNT ON;
WHILE(@i <= @@ROWCOUNT )
    -- Insert statements for procedure here
    SELECT TOP 1 @bnummer = accountnumber
    FROM dbo.bank 
    ORDER BY saldo DESC

    PRINT @bnummer

    UPDATE bank
    SET saldo = '0'
    WHERE accountnumber = @bnummer
    SET @i = @i+1

END 
```

和表：

```
CREATE TABLE [dbo].[bank](
[accountnumber] [nvarchar](50) NOT NULL,
[saldo] [real] NULL,
[owner_id] [int] NULL; 
```

以及关于 nvarchar 和 accountnumber 的 int 的区别。这并不重要，因为我只在帐号中使用数字。

如果我删除 While 循环，该过程将起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:49:33.193

在第一个循环迭代`@@Rowcount`中将是 1 - 您可以在新的查询窗口中自己测试。

假设`@i`通常 >= 1，循环将在其第一次迭代时退出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T10:50:16.033

你为什么这样做

```
WHILE(@i <= @@ROWCOUNT ) 
```

?

`@@ROWCOUNT`返回受最后一条语句影响的行数。所以你`UPDATE`把那个数字放进去`@@ROWCOUNT`，然后你增加@i。你想达到什么目的？只要您`UPDATE`更新的行数少于`@i+1`，您的`WHILE`循环就会终止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T16:49:03.127

我同意其他所有人的观点，但我建议您以某种方式指定您的 MAX 条款，这可能会解决问题：

而不是返回最后受影响的语句行的@@Rowcount，而是得到一些你可以明确声明和保持的东西。我通常使用一个变量。请注意，有时会出现复杂的循环，您可能需要三个变量一个开始和结束，以及一个谓词变量。有时我发现您可能正在从语句更新复杂查询，例如开始日期，并且您需要将其与将从集合中增加的变量分开。

这是我将使用的循环方法的一个简单示例：

```
declare @Table Table ( personID int identity, person varchar(8));

insert into @Table values ('Brett'),('John'),('Peter');

-- say I want to affect a whole table.  I need to get it's count and HOLD it.  You could just select an expression but a variable is more clean IMHO.
declare @Max int;

-- I should set a beginning variable and statically set it, however if you are doing an update in the middle of something you can set it with 
-- a select expression as well.
declare @Current int = 1;

-- bind the variable to the count of a table I want to update.  My example is simple, it could work with a table that is very large as well though.
select @Max = count(*) from @Table

-- see data before loop
select * From @Table;

while @Current <= @Max  -- @Current is explicitly set and so is Max.  However @Current will increment in the BEGIN END BLOCK.
BEGIN
    update @Table set person = person + 'New' where personID = @Current -- update from @Current variable 

    set @Current += 1;  -- increment up one in the loop AFTER OPERATION
END

-- see data after the loop
select *
from @Table 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-20T17:46:30.497

这可能是旧的，但在您原来的 WHILE 语句中，您只执行 WHILE 语句之后的第一行代码。循环中必须有 BEGIN 和 END。

你的循环应该是这样的：

```
WHILE(@i <= @@ROWCOUNT )

   BEGIN

    -- Insert statements for procedure here
       SELECT TOP 1 @bnummer = accountnumber
       FROM dbo.bank 
       ORDER BY saldo DESC

       PRINT @bnummer

       UPDATE bank
       SET saldo = '0'
       WHERE accountnumber = @bnummer
       SET @i = @i+1

   END 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-26T09:37:21.760

试试这个 for While 循环....

```
SET NOCOUNT ON
 DECLARE @LoopCounter INT , @MaxEmployeeId INT, 
    @EmployeeName NVARCHAR(100)

SELECT @LoopCounter = min(id) , @MaxEmployeeId = max(Id) FROM #Employee

WHILE  ( @LoopCounter IS NOT NULL AND  @LoopCounter <= @MaxEmployeeId)

BEGIN
 UPDATE TOP(1) #Employee
 SET  Status = 1, @EmployeeName = Name WHERE Id = @LoopCounter  AND Status = 0 
```

打印@EmployeeName

```
 SELECT @LoopCounter  = min(id) FROM #Employee WHERE Id >= @LoopCounter AND Status = 0
END 
```

# c++ - 复合查找 (Windows)

> ID：14316962
> 
> 赞同：0
> 
> 时间：2013-01-14T10:45:18.073
> 
> 标签：c++, windows, search, visual-studio-2012

我在 Visual Studio 的许多项目中有很多 C++ 文件。我想在给定函数中搜索特定字符串。例如：

```
virtual void BaseClass :: refresh() { ;}

// this is the result I want:
virtual DerivedClassA :: refresh() { ... theString ... }  

virtual DerivedClassB :: refresh () { ... }

// this is another match:
virtual DerivedClassC :: refresh () { theString ... } 
```

所以我正在寻找一种搜索工具，它可以让我进行这种“在函数内查找”搜索。我使用的是 Windows，所以该工具必须在它下运行。我需要忽略的其他函数中可能还有其他“theString”实例。

我还假设这对于 Visual Studio 是不可能的，但是有一些我可以使用的插件吗？

谢谢你的帮助！

# android - 在android上创建2个地图视图

> ID：14316963
> 
> 赞同：0
> 
> 时间：2013-01-14T10:45:18.280
> 
> 标签：android, google-maps, android-mapview

> **可能重复：**
> [如何为每个 Android 应用程序/进程使用多个 MapActivity/MapViews](https://stackoverflow.com/questions/3379575/how-to-use-multiple-mapactivities-mapviews-per-android-application-process)

我需要`MapView`在 android 上创建 2 s；我可以看到每个进程只允许一个地图视图，否则我会得到`IllegalStateError`，但我需要在我的应用程序中有 2 个地图视图。

我想达到什么目的？我的主要（登陆页面）活动上有一个地图视图，用户可以从中选择一个位置菜单按钮，该按钮提供一个弹出窗口。从这个结果弹出窗口中，我需要一个地图视图供用户选择兴趣点并删除其他点。

我需要使底层主要活动的地图视图保持活跃。我已经看到了杀死一个人的解决方案。

# oz - 如何在 mozart oz 中编写一个简单的高阶函数？

> ID：14316965
> 
> 赞同：1
> 
> 时间：2013-01-14T10:45:25.077
> 
> 标签：oz, mozart

我是 mozart oz 的初学者，我想编写一个简单的高阶函数，例如 {{Add 1}2}，其结果必须为 3。我想这类似于 C 中的嵌套调用，其中一个函数可以调用自己吗？我不知道如何定义这个函数，我应该写

```
declare
fun {Add I} 
```

或者

```
declare
fun {{Add I}J} 
```

? 而且我真的不知道如何完成这样的功能。我已经尝试了几次，但我从来没有成功过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:20:13.663

像这样的东西应该可以工作（未经测试）：

```
declare
   fun {Add I}
      % define a local function which adds I to its argument
      fun {Adder J}
         J + I
      end
   in
      % returns this new function
      Adder
   end

{Show {{Add 1} 2}}  % should print 3

% or more verbose:
declare
   Add1 = {Add 1}
   {Show {Add1 2}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T11:16:00.257

简洁的代码：

```
fun{Add I}
   fun{$ J} I+J end
end 
```

# windows-phone-7 - 如何知道我的手机在 Windows Phone 设备上是否有 SIM 卡？

> ID：14316968
> 
> 赞同：1
> 
> 时间：2013-01-14T10:45:36.693
> 
> 标签：windows-phone-7

如下两个问题：

1.  如何知道我的手机在 Windows Phone 设备上是否有 SIM 卡？
2.  如果我的 windows phone 设备的 SIM 卡无效，我怎么知道？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:38:08.270

您可以在 MSDN 上查看此主题：

[Windows Phone 的网络和网络接口信息](http://msdn.microsoft.com/en-us/library/hh202867%28v=vs.92%29.aspx)

特别是这个：[如何：获取 Windows Phone 的网络信息](http://msdn.microsoft.com/en-us/library/hh202859%28v=vs.92%29.aspx) 和这个：[如何：确定 Windows Phone 的移动运营商](http://msdn.microsoft.com/en-us/library/hh202875%28v=vs.92%29.aspx)

更新：

通过上面的 MSDN 示例提供的代码，通过我的测试，我得到了结果供您参考：

我将应用程序放在没有 SIM 卡、未连接 WiFi 的设备上，然后得到：

`DeviceNetworkInformation.CellularMobileOperator`“空，是的，它是空的” `DeviceNetworkInformation.IsNetworkAvailable.ToString()`True `DeviceNetowrkInformation.IsCellularDataEnabled.ToString()`False `DeviceNetworkInformation.IsCellularDataRoamingEnabled.ToString()`False `DeviceNetworkInformation.IsWiFiEnabled.ToString()`True

因此，如果里面有 SIM 卡，则 CellularMobileOperator 有东西但不是空的，你可以利用它来确定设备里面是否有 SIM 卡。

但我还没有考虑到如果手机内部出现“无效 SIM”会怎样。

# themes - OJS（开放期刊系统）主题开发

> ID：14316970
> 
> 赞同：2
> 
> 时间：2013-01-14T10:45:40.257
> 
> 标签：themes, system, journal, ojs

我想为 ojs 开发自己的主题。

我采用了现有主题（插件/主题）并仅更新了适合我的环境的文件和变量的名称。我期待在“Setup=>The Look->5.6 Journal Layout”列表中显示我的主题名称，但没有运气。我遇到了一个致命错误。

`Fatal error: Class 'SteelThemePlugin' not found in C:\wamp\www\jucs\plugins\themes\shahid\index.php on line 23`

我搜索了这个问题并制定了抽象指南。但是，我找不到任何有用的教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:47:34.473

If you cannot find enough detail no problem, Read the following steps you will be able to figure it out.

1.  All the themes are placed inside the `plugin/themes` directory.

2.  Thus create your theme folder say `pakistan`.

3.  Now you will have to create the following files:

    3.1\. `version.xml`

    3.2\. `index.php`

    3.3\. `PakistanThemePlugin.inc.php`

    3.4\. `pakistan.css`

* * *

**NOTE:** The easiest way to start with is to copy any existing theme and starting start changing its values that suites you.

Your own custom theme is ready and you can use OJS with same theme as your parent site.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-14T21:39:05.383

您可能忘记更改 index.php 包装器中的类名。确保那里的 require_once 语句和 return 语句引用您更新的主题类名称。

# c# - 尝试将 MEF 与 MVC 控制器一起使用时的 CompositionContractMismatchException

> ID：14316978
> 
> 赞同：10
> 
> 时间：2013-01-14T10:46:05.400
> 
> 标签：c#, asp.net-mvc-4, mef

我正在开发一个更大的 C# MVC 4 项目，该项目分为几个程序集（核心、域、后端 MVC、前端 MVC 等）。我使用 MEF 提供的插件架构来加载和解决大多数依赖项。现在我还希望它用于加载 MVC 控制器。在几十个样本中发现的典型场景。

但我不断收到这个 YSOD：

异常说：

```
[CompositionContractMismatchException: Cannot cast the underlying exported value of type "XY.HomeController (ContractName="XY.HomeController")" to type "XY.HomeController".]
System.ComponentModel.Composition.ExportServices.CastExportedValue(ICompositionElement element, Object exportedValue) +505573
System.ComponentModel.Composition.<>c__DisplayClass10`2.<CreateSemiStronglyTypedLazy>b__c() +62
System.Lazy`1.CreateValue() +14439352
System.Lazy`1.LazyInitValue() +91
  XY.DependencyManagement.SomeCustomControllerFactory.GetControllerInstance(RequestContext requestContext, Type controllerType) in (Path)\Core\DependencyManagement\SomeCustomControllerFactory.cs:32
System.Web.Mvc.DefaultControllerFactory.CreateController(RequestContext requestContext, String controllerName) +89
System.Web.Mvc.MvcHandler.ProcessRequestInit(HttpContextBase httpContext, IController& controller, IControllerFactory& factory) +305
System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state) +87
System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +12550291
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +288 
```

自定义控制器工厂：

```
 public class SomeCustomControllerFactory : DefaultControllerFactory {

    private readonly CompositionContainer _compositionContainer;

    public SomeCustomControllerFactory (CompositionContainer compositionContainer) {
        _compositionContainer = compositionContainer;
    }

    protected override IController GetControllerInstance(RequestContext requestContext, Type controllerType) {
        var export = _compositionContainer.GetExports(controllerType, null, null).SingleOrDefault();

        IController result;

        if (export != null) {
            result = export.Value as IController;
        } else {
            result = base.GetControllerInstance(requestContext, controllerType);
            _compositionContainer.ComposeParts(result);
        }

        return result;
    }

 protected override Type GetControllerType(RequestContext requestContext, string controllerName) {

        Type controllerType = base.GetControllerType(requestContext, controllerName);

 // used to find objects in the container which assemblies are in a sub directory and not discovered by MVC
 // TODO: only create parts that are used
        if (controllerType == null && this._compositionContainer != null &&
            this._compositionContainer != null) {

            var controllerTypes =
                this._compositionContainer.GetExports<Controller, IDictionary<string, object>>()
                    .Where(
                        e =>
                        e.Value.GetType().Name.ToLowerInvariant() ==
                        controllerName.ToLowerInvariant() + ControllerNameByConvention)
                    .Select(e => e.Value.GetType()).ToList();

            switch (controllerTypes.Count) {
                case 0:
                    controllerType = null;
                    break;
                case 1:
                    controllerType = controllerTypes.First();
                    break;
                case 2:
                    throw CreateAmbiguousControllerException(requestContext.RouteData.Route, controllerName,
                                                             controllerTypes);
            }
        }

        return controllerType;
    } 
```

还有一个 CustomDependencyResolver：

```
 public class CustomDependencyResolver : IDependencyResolver {

    private readonly CompositionContainer _container;
    public CustomDependencyResolver(CompositionContainer container) {
        _container = container;
 }
    public IDependencyScope BeginScope() {
        return (IDependencyScope)this;
    }

    public object GetService(Type serviceType) {
        var export = _container.GetExports(serviceType, null, null).SingleOrDefault();

        return null != export ? export.Value : null;
    }

    public IEnumerable<object> GetServices(Type serviceType) {
        var exports = _container.GetExports(serviceType, null, null);
        var createdObjects = new List<object>();

        if (exports.Any()) {
            foreach (var export in exports) {
                createdObjects.Add(export.Value);
            }
        }

        return createdObjects;
    } 
```

一切都是这样配置的 DependencyResolver.SetResolver(new CustomDependencyResolver(container)); ControllerBuilder.Current.SetControllerFactory(new SomeCustomControllerFactory(container));

旁注：使用 MEF2 RegistrationBuilder 和具有三个 AssemblyCatalog 和一个 DirectoryCatalog 的 AggregateCatalog。

如果我从主项目解决方案中提取它并创建一个新的 mvc 4 互联网项目解决方案并将其集成到那里，整个事情就会完美地工作。（用一个程序集和第二个简单的核心库对其进行了测试。）

我已经打开了 CompositionOptions.DisableSilentRejection。并找到此资源来调试 MEF 相关错误[https://blogs.msdn.com/b/dsplaisted/archive/2010/07/13/how-to-debug-and-diagnose-mef-failures.aspx?Redirected=true](https://blogs.msdn.com/b/dsplaisted/archive/2010/07/13/how-to-debug-and-diagnose-mef-failures.aspx?Redirected=true) 我删除了 HomeController 中的所有内容（空构造函数，没有导入等）。MEF 容器装满了合适的出口。一切都很好。

经过一整天的调试和研究，我学到了很多关于 MEF 的知识，但仍然遇到同样的问题。希望有人可以在这里给我一个提示想错了。因为将所有内容移动到新的 MVC 项目将非常非常耗时:-(

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-14T14:26:37.257

这看起来类似于[System.InvalidCastException](http://msdn.microsoft.com/en-us/library/03tbzscz.aspx)，当同一个程序集在不同上下文或不同位置加载两次时有时会抛出该异常。MEF 中的所有程序集加载都由[AssemblyCatalog](http://msdn.microsoft.com/en-us/library/system.componentmodel.composition.hosting.assemblycatalog.aspx)类使用[Assembly.Load(AssemblyName)](http://msdn.microsoft.com/en-us/library/x4cw969y.aspx)方法处理，该方法将在 Load 上下文中加载具有给定名称的程序集。但是，在[某些情况下](http://blogs.msdn.com/b/suzcook/archive/2004/08/04/load-assemblyname.aspx)，它将在 LoadFrom 上下文中加载它，这有时会导致转换异常，例如您提到的那个：

> 无法将类型“XY.HomeController(ContractName="XY.HomeController")”的基础导出值转换为类型“XY.HomeController”。]

我要做的是查看包含的程序集`XY.HomeController`是否部署在多个位置。如果它是一个强命名程序集，请不要忘记查看 GAC。

[Telerik 的论坛](http://www.telerik.com/community/forums/winforms/richtextbox/compositioncontractmismatchexception-on-cut-copy-paste.aspx)中提到了类似的问题。

如果您想了解有关此主题的更多详细信息，请查看[“运行时如何定位程序集”](http://msdn.microsoft.com/en-us/library/yx7xezcf%28v=vs.100%29.aspx) [“程序集加载的最佳实践”](http://msdn.microsoft.com/en-us/library/dd153782%28v=vs.110%29.aspx)以及[Suzanne Cooks MSDN 博客](http://blogs.msdn.com/b/suzcook/)中与加载相关的条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-28T22:00:37.817

我有同样的问题，由多次加载相同的程序集引起。将您的合同添加到单独的项目并引用输出 dll 而不是直接引用项目将解决此问题。

# wpf - 使用 XAML 创建 WPF UserControl，以便我可以在其中嵌套子控件

> ID：14316982
> 
> 赞同：3
> 
> 时间：2013-01-14T10:46:17.800
> 
> 标签：wpf, xaml, data-binding, wpf-controls

我正在尝试在 WPF/XAML 中创建一个“标题块”用户控件，具有以下行为：

*   控件本身是一个包含 DockPanel 的 Border。DockPanel 包含一个顶部对齐的“标题”TextBlock，这个 DockPanel 的其余部分应该是“子小部件区域”。

控制声明是这样的：

```
<Border x:Name="LayoutRoot" Background="#4C000000" CornerRadius="10" Padding="10">
    <DockPanel>
        <TextBlock Text="Some Title" DockPanel.Dock="Top" />
    </DockPanel>
</Border> 
```

预期的用法是这样的：

```
<Grid x:Name="LayoutRoot" Background="White">
    <local:Bloco Height="100" Width="100" Title="Other Title">
        <local:Bloco Title="Yet other title" />
    </local:Bloco>
</Grid> 
```

渲染这样的东西：

![在此处输入图像描述](../Images/f49ebf41bc93289c16842be9367516ad.png)

但是，实际的当前渲染是无效的。问题是：

*   我不知道（也没有通过搜索找到）如何使控件具有“子容器”，我可以在其中通过直接嵌套在 XAML 中添加子容器；
*   我不知道如何为用户控件的每个实例绑定不同的标题，无论是通过 XAML 属性还是绑定（最好），无论是通过代码后面。编写上述代码会创建无效的 xaml 代码，这并不奇怪，因为“Title”属性还不存在。

谢谢阅读！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T11:20:25.213

1.  您可以创建从 ContentControl 继承的控件并为其添加模板
2.  如果您想访问您在 xaml 中的自定义属性作为属性，您需要将其注册为 DependencyProperty（请参阅[在此处输入链接描述](http://msdn.microsoft.com/en-us/library/ms597501.aspx)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T12:45:50.853

通用用户控件：

XAML：

```
<UserControl x:Class="WpfControlLibrary.GenericUserControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:local="clr-namespace:WpfControlLibrary"
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300" x:Name="Control">
<UserControl.Resources>
    <Style TargetType="{x:Type local:GenericUserControl}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:GenericUserControl}">
                    <Grid Background="{Binding Background, ElementName=Control}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="5"></RowDefinition>
                            <RowDefinition Height="20"></RowDefinition>
                            <RowDefinition Height="*"></RowDefinition>
                            <RowDefinition Height="5"></RowDefinition>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="5"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="5"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="1" Grid.Row="1" Text="{Binding Title, ElementName=Control}"/>
                        <ContentPresenter Grid.Column="1" Grid.Row="2"/>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</UserControl.Resources> 
```

后面的代码：

```
namespace WpfControlLibrary
{
   public partial class GenericUserControl
   {
      public string Title
     {
        get { return (string)GetValue(TitleProperty); }
        set { SetValue(TitleProperty, value); }
     }

     public static readonly DependencyProperty TitleProperty =
      DependencyProperty.Register("Title", typeof(string), typeof(GenericUserControl), new PropertyMetadata(string.Empty));

public GenericUserControl()
     {
        InitializeComponent();
     }
   }
} 
```

而不是像这样使用用户控件：

```
 <wpfControlLibrary:GenericUserControl Title="Other Title" Background="LightGray">
       <wpfControlLibrary:GenericUserControl Title="Yet Another Title" Background="Gray"/>
</wpfControlLibrary:GenericUserControl> 
```

# javascript - 我的 Youtube 播放器不工作？

> ID：14316991
> 
> 赞同：-1
> 
> 时间：2013-01-14T10:46:53.080
> 
> 标签：javascript, youtube

我通过此代码在我的页面上添加了一个 youtube 视频。

```
 <div id="ytplayer"></div>
            <script>
                // Load the IFrame Player API code asynchronously.
                var tag = document.createElement('script');
                tag.src = "https://www.youtube.com/player_api";
                var firstScriptTag = document.getElementsByTagName('script')[0];
                firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

                // Replace the 'ytplayer' element with an <iframe> and
                // YouTube player after the API code downloads.
                var player;
                function onYouTubePlayerAPIReady() {
                    player = new YT.Player('ytplayer', {
                        height: '390',
                        width: '640',
                        videoId: 'o9UQSUHHdtA',
                        events: {
                            'onReady': onPlayerReady,
                            'onStateChange': onPlayerStateChange
                        }
                    });
                }
            </script> 
```

当用户单击按钮时，我播放视频。它通过删除显示可见：无。现在它在 Firefox 中不起作用，在 chrome 中可以正常工作。有人可以帮我吗。

谢谢：live就[在这里](http://freelancehood.com/test121/)。

它告诉我`TypeError: player.seekTo is not a function`有人知道如何等待加载播放器。如果我在萤火虫中手动执行 player.seekTo ，那么它就可以了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:25:51.063

```
var _isPlayerReady=  false;
     function _playVideo(){
                setTimeout(function(){
                        if (_isPlayerReady) {
                            player.seekTo(0);
                        }
                        else{
                            _playVideo();
                        }
                },1000);
            }

function onPlayerReady(event){
isPlayerReady = true;
} 
```

正如 Ciack404 所说，他们在 YT API 中有 2 个事件可用。这就是我的制作方法。

我在准备好的事件上调用 onPlayerReady。因为它是隐藏的，所以它不能在 Firefox 中使用（如果你没有尝试使用 Show() 回调，那么这个技巧很有用）。

此代码调用检查播放器存在并在其工作时在下一秒播放视频。这在每个浏览器中都可以正常工作。

注意：- 我看到一个隐藏的 div 视频可以在 Chrome 中播放，但在 Firefox 17（目前）中不起作用。这就是我设置超时功能的原因，因为我的视频从隐藏状态变为可见状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:13:03.800

[YouTube iFrame API .seekTo() not a method?](https://stackoverflow.com/questions/9813774/youtube-iframe-api-seekto-not-a-method#answer-9829679)

Make sure that the following conditions are satisfied:

> 1.  A container with ID player is defined: `<div id="ytplayer"></div>.`
> 2.  The code is not deferred. Ie, not within an onload event, $(document).ready, setTimeout, etc. Otherwise, the IFrame API fails to load, and the code will not work.
> 3.  jQuery is loaded.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T11:16:34.100

你应该使用

```
window.onYouTubePlayerAPIReady() {
    player = new YT.Player('ytplayer', {
        height: '390',
        width: '640',
        videoId: 'o9UQSUHHdtA',
        events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
        }
    });
} 
```

# jquery - 带有标题的 jQuery 表格样式

> ID：14316993
> 
> 赞同：0
> 
> 时间：2013-01-14T10:47:04.203
> 
> 标签：jquery, html, jquery-ui, user-interface

我有一个 jQuery 表，呈现如下：

![在此处输入图像描述](../Images/cee89d098cac4a18ef3d08691a49e746.png)

标记如下。

```
 <table class="ui-widget-content" style="width: 565px; height: 80px; margin-top: 10px;">
        </table> 
```

如何打破表格边框，使其包含表格的内容 - 所以我在下面的图片中模拟了我想要的样子。

![在此处输入图像描述](../Images/06221251d17edefca1d4c4f75416748b.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T10:51:15.397

与字段集中的表格一起使用`<fieldset>`和...`<legend>`

[http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_fieldset](http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_fieldset)

# java - 如何在java中替换正在运行的应用程序中的类？

> ID：14316996
> 
> 赞同：23
> 
> 时间：2013-01-14T10:47:17.507
> 
> 标签：java, classloader

假设我有一个名为`NameGenerator`. 我可以使用它根据给定的逻辑生成名称。然后我写了一个`TestNameGeneration`类，它的方法要求用户提供一封信并根据该方法生成一个名称。现在我想更改`NameGeneration`类中的逻辑并在不停止应用程序的情况下应用该特定更改。

我这样做是为了了解有关类加载器的更多信息，有人可以解释我必须学习做类似事情的关键概念或站点任何参考吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-14T11:21:17.600

这是一个工作测试。每 5 秒 Test.main() 从文件系统重新加载 test.Test1.class 并调用 Test1.hello()

```
package test;

public class Test1 {
    public void hello() {
        System.out.println("Hello !");
    }
}

public class Test {

    static class TestClassLoader extends ClassLoader {
        @Override
        public Class<?> loadClass(String name) throws ClassNotFoundException {
            if (name.equals("test.Test1")) {
                try {
                    InputStream is = Test.class.getClassLoader().getResourceAsStream("test/Test1.class");
                    byte[] buf = new byte[10000];
                    int len = is.read(buf);
                    return defineClass(name, buf, 0, len);
                } catch (IOException e) {
                    throw new ClassNotFoundException("", e);
                }
            }
            return getParent().loadClass(name);
        }
    }

    public static void main(String[] args) throws Exception {
        for (;;) {
            Class cls = new TestClassLoader().loadClass("test.Test1");
            Object obj = cls.newInstance();
            cls.getMethod("hello").invoke(obj);
            Thread.sleep(5000);
        }
    }
} 
```

运行。然后更改并重新编译Test1

```
System.out.println("Hello !!!"); 
```

在测试运行时。你会看到 Test1.hello 输出改变了

```
...
Hello !
Hello !
Hello !!!
Hello !!! 
```

这就是例如 Tomcat 重新加载 webapps 的方式。它为每个 web 应用程序都有一个单独的 ClassLoader，并在新的 ClassLoader 中加载新版本。旧的就像任何 Java 对象以及旧的类一样是 GCed。

请注意，我们使用 TestClassLoader 加载了 Test1，并使用反射调用了它的第一个方法。但是所有的 Test1 依赖都会被 Test1 类加载器隐式加载，也就是说所有的 Test1 应用程序都会被 JVM 加载到 TestClassLoader 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T10:55:32.340

有2种方式：

1.  要覆盖您正在使用的类加载器，首先使用现有的类加载器来引导您的应用程序，特别是对于您需要动态更新的类，您必须使用覆盖的类加载器。
2.  使用 OSGi 框架。根据您的应用程序的规模，OSGi 框架可能不是一个好的选择，因为它要求您遵循它的编码约定。

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T10:49:27.710

那么[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)呢？它可能是解决您问题的更好解决方案，而不是使用类加载器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T10:56:10.660

这真的很简单，您将利用 OOP 的优势并使用接口，不需要管理类加载器您可以使用 setter 注入实现：

创建一个名为 NameGeneration 的接口创建 n 个实现 NameGenerationImpl1，例如 NameGenerationimpl2 在您的客户端类中定义一个变量：

```
NameGeneration nameGeneration ; 
```

和二传手：

```
 public void setNameGeneration(NameGeneration nameGeneration) {
 this.nameGeneration = nameGeneration ;
} 
```

nameGeneration 会生成你想要的。

当您更改算法时，您可以通过以下方式更改实现：

```
setNameGeneration(new NameGenerationImpl1()) ; 
```

或者

```
setNameGeneration(new NameGenerationImpl2()) ; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T14:39:15.997

您可以编写自己的自定义类加载器。当类文件或包含类文件的资源/jar 发生更改时（检查时间戳），销毁以前的类加载器实例并创建一个新的类加载器实例，该实例反过来将加载新的类文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-23T13:29:18.887

如果您在企业级应用程序中工作，并且希望避免每次更改类时都重新加载应用程序上下文，那么使用[DCEVM](https://github.com/dcevm/dcevm/releases)和[HotSwapAgent](https://github.com/HotswapProjects/HotswapAgent/releases)可以更好地帮助您。下面的命令会将 DCEVM 添加到您的 JDK，

**java -jar DCEVM-8u181-installer.jar**

并且您必须将以下 VM 参数添加到您的运行命令（或）配置中

**-XXaltjvm=dcevm -javaagent:Your_directory_location/hotswap-agent-1.3.0.jar .jar=autoHotswap=true**

参考：[https ://dzone.com/articles/hot-swap-java-bytecode-on-runtime](https://dzone.com/articles/hot-swap-java-bytecode-on-runtime)

# sql - 从数据库结果创建自定义表

> ID：14316997
> 
> 赞同：0
> 
> 时间：2013-01-14T10:47:19.460
> 
> 标签：sql, netezza

我需要创建一种方法来在多列中显示来自 SQL 查询的结果。sql非常基本，它是对某种类型的每个条目的计数。

所以SQL就像

```
Select count(distinct(id)) from Table where id_type = a

Select count(distinct(id)) from Table where id_type = b

Select count(distinct(id)) from Table where id_type = c 
```

ETC

我希望这些显示在一个表中，其中一行将在具有自定义名称的列下给出每种类型的计数。

我的 SQL 相当稀疏，所以总是欢迎额外的外部信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:50:10.153

听起来您希望将*数据*从行转换为列。如果在 MySQL 中是这种情况，您将需要使用带有`CASE`表达式的聚合函数来执行此数据转换：

```
Select 
  count(distinct case when id_type = 'a' then id end) TotalA,
  count(distinct case when id_type = 'b' then id end) TotalB,
  count(distinct case when id_type = 'c' then id end) TotalC
from Table 
```

或者，如果您出于某种原因仍想使用单独的查询，那么您可以使用 a`UNION ALL`然后将数据旋转到列中：

```
select 
  max(case when col = 'A' then TotalCount end) TotalA,
  max(case when col = 'B' then TotalCount end) TotalB,
  max(case when col = 'C' then TotalCount end) TotalC
from
(
  Select count(distinct(id)) TotalCount, 'A' Col
  from Table 
  where id_type = 'a'
  union all
  Select count(distinct(id)) TotalCount, 'B' Col
  from Table 
  where id_type = 'b'
  union all
  Select count(distinct(id)) TotalCount, 'C' Col
  from Table 
  where id_type = 'c'
) src 
```