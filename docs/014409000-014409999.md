# StackOverflow 问答 14409000-14409999

# android - 无法在具有向后兼容性的 Android 应用中导入 ActionBar

> ID：14409000
> 
> 赞同：4
> 
> 时间：2013-01-18T22:58:12.420
> 
> 标签：android, eclipse, sdk, android-actionbar, compatibility

我有一个针对 API 17 的 Android 应用程序，并且 SDK 版本最低为 8。我对在 Android API < 11 的设备中提供 ActionBar 不感兴趣，但我想在运行 Android >= 3.0 的设备中使用.

浏览stackoverflow以了解如何这样做，我偶然发现了这个问题：[如何在Android SDK中编写向后兼容的新功能？](https://stackoverflow.com/questions/9558638/how-to-code-backward-compatible-new-feature-in-android-sdk). 我想使用其答案中提供的实现，但我无法导入 android.app.ActionBar。Eclipse 无法识别它。

可能是什么问题呢？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T23:01:33.747

确保您的项目引用目标的 android.jar 文件，而不是最低 SDK。

在 Eclipse 中，右键单击项目 -> 构建路径 -> 配置构建路径，然后查看那里引用了哪个 Android 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T00:15:00.007

为什么不使用[动作条 sherlock](http://actionbarsherlock.com/)？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-31T07:17:48.170

[正如这里](http://developer.android.com/reference/android/app/ActionBar.html)提到的

> 从 Android 3.0（API 级别 11）开始，当活动使用系统的 Holo 主题（或其后代主题之一）时，操作栏会出现在活动窗口的顶部，这是默认设置。您可以通过调用 requestFeature(FEATURE_ACTION_BAR) 或在自定义主题中使用 windowActionBar 属性声明它来添加操作栏。

# java - Spring Security 3 + GAE - 我真的需要整个堆栈吗？

> ID：14409001
> 
> 赞同：2
> 
> 时间：2013-01-18T22:58:16.527
> 
> 标签：java, google-app-engine, spring-security, basic-authentication, facebook-authentication

我想知道是否可以将 Spring Security 3 集成到 GAE 应用程序中，而不必带来整个 Spring + Spring MVC 堆栈。到目前为止，我看到的每个示例都包含 Spring Beans 和/或 Spring MVC

我想要做的基本上是在一个地方实现通用身份验证（基本注册、登录、注销、重置密码等），包括 OpenID、Google 身份验证、Facebook 身份验证等 - Spring Security 做得很好。

或者，我希望拥有尽可能少的库并推出自己的库，是否有人有链接或一些很好的资源来设置身份验证服务，允许在不使用自定义登录、谷歌、Facebook 等的情况下登录春季安全？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-26T20:53:22.270

你不能使用 Spring MVC，但无论如何你需要 spring 核心。春季安全常见问题解答中突出显示了此问题的答案：http: [//docs.spring.io/spring-security/site/faq/faq.html#faq-what-dependencies](http://docs.spring.io/spring-security/site/faq/faq.html#faq-what-dependencies)

您可以在此处找到有关依赖项的更多详细信息：http: [//docs.spring.io/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#appendix-dependencies](http://docs.spring.io/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#appendix-dependencies)

# java - 用Java序列化游戏？

> ID：14409003
> 
> 赞同：1
> 
> 时间：2013-01-18T22:58:31.940
> 
> 标签：java, serialization, load, save, game-engine

我试图用Java序列化一个蛇游戏，其中游戏必须有“**保存**”和“**加载**”的选项。我没有收到任何错误，但每当我尝试打印出**生命**、**时间**等时。当**生命**和时间不应该为**0**时，它只会给我**0**。

 ****这是我保存和加载部分的一些代码：

```
 public void SaveGame() throws IOException {

    PnlCentro pnlCentro = new PnlCentro();

    FileOutputStream fileOut = new FileOutputStream(fileName);
    ObjectOutputStream out = new ObjectOutputStream(fileOut);
    out.writeObject(pnlCentro);
    out.close();
}

public void LoadGame() throws FileNotFoundException, IOException, ClassNotFoundException {

    PnlCentro p = null;

    FileInputStream fileIn = new FileInputStream(fileName);
    ObjectInputStream in = new ObjectInputStream(fileIn);

    p = (PnlCentro) in.readObject();

    System.out.println("Body: " + p.vecBody);
    System.out.println("Life: " + p.life);
    System.out.println("Timer: " + p.getTime());

    in.close();
    fileIn.close();

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T00:21:20.357

我认为您的`SaveGame()`和`LoadGame`方法工作得很好，它们只是不保存或加载当前游戏会话中的任何数据。

```
 public void SaveGame() throws IOException {

    PnlCentro pnlCentro = new PnlCentro(); //<-- Problem likely lies here!

    FileOutputStream fileOut = new FileOutputStream(fileName);
    ObjectOutputStream out = new ObjectOutputStream(fileOut);
    out.writeObject(pnlCentro);
    out.close();
} 
```

注意方法`pnlCentro`中的初始化行`SaveGame()`。该对象是使用默认构造函数声明和实例化的。除非您已覆盖默认构造函数以`pnlCentro`使用当前游戏数据实例化对象，否则当前游戏数据在写入磁盘之前永远不会设置。

**考虑一下：**

```
 public void SaveGame() throws IOException {

    PnlCentro pnlCentro = new PnlCentro();

    /* Set data prior to writing out */
    pnlCentro.setLives(getThisGamesNumLives());
    pnlCentro.setTime(getThisGamesTime());

    FileOutputStream fileOut = new FileOutputStream(fileName);
    ObjectOutputStream out = new ObjectOutputStream(fileOut);
    out.writeObject(pnlCentro);
    out.close();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T00:21:05.200

在 SaveGame 方法中，您总是在序列化之前创建一个新的 PnlCentro 实例，当您使用代码时：

```
PnlCentro pnlCentro = new PnlCentro(); 
```

在序列化之前没有对对象 plnCentro 的默认值进行任何修改，这可能就是您在反序列化后读取零的原因。****

# javascript - JavaScript 创建可点击的 href

> ID：14409004
> 
> 赞同：0
> 
> 时间：2013-01-18T22:58:34.643
> 
> 标签：javascript, wordpress, url, append, href

我有一个简单的愚蠢问题。我想在我的 HTML 中添加一个可在 JavaScript 中点击的 URL

```
var a = document.createElement('a');
a.setAttribute('href', 'http://example.at');
$("#upcomingEvents").append('Please check our website. ' + a); 
```

网址出现了，但无法点击，我该如何更改？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T23:00:15.757

试试这样：

```
$("#upcomingEvents").append('Please check our website. ');
$("#upcomingEvents").append(a); 
```

运算符导致 DOMNode被`+`强制转换为字符串，您不希望这样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T23:01:20.570

您必须在链接中添加一些文本，以便可以单击：

```
a.innerText='click me!'; 
```

然后你不能将字符串连接到 DOM 元素。

```
$("#upcomingEvents").append('Please check our website.');
$("#upcomingEvents").append(a); 
```

[演示](http://jsbin.com/arojad/1/edit)

# java - 为什么我有一个错误？

> ID：14409005
> 
> 赞同：1
> 
> 时间：2013-01-18T22:58:40.460
> 
> 标签：java

在下面的代码中，我只是想计算一个项目在文件中出现的次数。但是，当我打印出键和它们的值时，我得到的计数比实际值多一个。当我初始化`total`为 0 时，它解决了问题，但我不知道为什么。

```
import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.FileInputStream;
import java.io.InputStreamReader;
import java.util.HashMap;
import java.util.HashSet;

public class Problem {
   public static void main(String[] arg) {
      HashSet QID = new HashSet();
      HashMap QIDToCorrect = new HashMap();
      try {
         // Open the file that is the first command line parameter
         FileInputStream fstream = new FileInputStream(
               "C:/Users/lol/Downloads/data.csv");

         // Get the object of DataInputStream
         DataInputStream in = new DataInputStream(fstream);
         BufferedReader br = new BufferedReader(new InputStreamReader(in));

         //Read File Line By Line
         String strLine;
         br.readLine(); //skip header line
         int total = 0;
         int blah = 0;
         while ((strLine = br.readLine()) != null) {

            String[] split = strLine.split(",");

            if (!QID.contains(split[0])) {
               total = 1;
               QID.add(split[0]);
               QIDToCorrect.put(split[0], total);
            } else {
               total += 1;
               QIDToCorrect.put(split[0], total);
            }

            //System.out.println();
         }
      } catch (Exception e) {
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T00:52:29.017

假设您输入了每行的第一个元素如下所示：

```
foo
foo
bar
foo 
```

现在让我们考虑一下你的循环对这个输入做了什么

而 ((strLine = br.readLine()) != null) {

```
 String[] split = strLine.split(","); 
```

`split[0]`是第一个“foo”。

```
 if (!QID.contains(split[0])) { 
```

“foo”尚未添加

```
 total = 1;
           QID.add(split[0]);
           QIDToCorrect.put(split[0], total); 
```

`total`设置为`1`, "foo" 添加到`QID`和 ("foo", 1) 添加到`QIDToCorrect`

```
 String[] split = strLine.split(","); 
```

`split[0]`是第二个“foo”

```
 if (!QID.contains(split[0])) { 
```

评估为假，因此`if`语句落入`else`.

```
 } else {
           total += 1;
           QIDToCorrect.put(split[0], total);
        } 
```

`total`递增到 2 并`QIDToCorrect`更新为 ("foo", 2)。

```
 String[] split = strLine.split(","); 
```

`split[0]`现在包含“栏”。

```
 if (!QID.contains(split[0])) {
           total = 1;
           QID.add(split[0]);
           QIDToCorrect.put(split[0], total); 
```

`QID`不包含 bar，因此`total`重置为 1，将 "bar" 添加到 中`QID`，并将 ("bar", 1) 插入到`QIDToCorrect`中。

```
 String[] split = strLine.split(","); 
```

现在`split[0]`包含*第三个*“foo”

```
 if (!QID.contains(split[0])) { 
```

"foo" 以前见过，所以请转到`else`.

```
 } else {
           total += 1;
           QIDToCorrect.put(split[0], total);
        } 
```

`total`递增到 2 并`QIDToCorrect`用 ("foo", 2) 更新。

因此，您的包含计数器的地图认为只有*两个* `foo`s。我在这里看到一个问题。`total`每次看到新项目时，您的计数器都会重置。因此，当您打电话时`QIDToCorrect.put()`，不要考虑您过去看到该项目的次数。您可能需要使用`QIDToCorrect.get()`才能获得项目的先前计数。这消除了对`total`变量的需要（除非您想知道您看到的所有项目的总数）。此外，`QID`HashSet 是不必要的，因为您可以查询`QIDToCorrect`它是否已经包含一个键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T23:23:51.943

你的算法看起来很奇怪，但如果我正确理解你想要做什么，我会替换

```
if (!QID.contains(split[0])) {
               total = 1;
               QID.add(split[0]);
               QIDToCorrect.put(split[0], total);
            } else {
               total += 1;
               QIDToCorrect.put(split[0], total);
            } 
```

和

```
Integer lasttotal = (Integer)QIDToCorrect.get(split[0]);
total = 1 + lasttotal!=null ? lasttotal : 0;
QID.add(split[0]);
QIDToCorrect.put(split[0], total); 
```

这样，即使它们没有排序，总数也会正确计算您的项目......但是，这并不能解释您的问题。你确定你打印的值正确吗？您是否尝试过逐步调试？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T00:34:28.050

您需要在更新之前获取密钥的值......见下文：

```
if (!QID.contains(split[0])) {
   total = 1;
   QID.add(split[0]);
   QIDToCorrect.put(split[0], total);
} else {
   total = QIDToCorrect.get(split[0]);  // RETRIEVE VALUE FOR KEY
   total += 1;
   QIDToCorrect.put(split[0], total);
} 
```

# c# - 将 ILMerge 与 log4net 一起使用会导致“由于保护级别而无法访问”错误

> ID：14409010
> 
> 赞同：13
> 
> 时间：2013-01-18T22:59:01.843
> 
> 标签：c#, log4net, ilmerge

我为我的 log4net 日志对象的初始化创建了一个包装类，以便更容易在 ThreadContext 中建立自定义属性。这发生在我与许多其他有用函数一起建立的类库中。为了加入所有各种库，我还使用“/internalize”开关向 ILMerge 添加了 AfterBuild 目标。

**ILMerge 所针对的库中对这个初始化方法的**所有引用似乎都可以正常工作。但是，当我在其他地方引用这个合并的库时。我的实现引发了保护级别错误。我尝试将各种内容添加到可选的排除 (/internalize:excludes.txt) 文件中，但这似乎不起作用。

示例 excludes.txt：

```
log4net.Config
log4net.ThreadContext
log4net.LogManager 
```

其他人遇到过这个问题吗？

**[编辑]：**

这是代码：

```
 [assembly: log4net.Config.XmlConfigurator(Watch = true)]
namespace Logging
{
    public static class Log4NetThreadContext
    {
        public static ILog Initialize(Type declaringType)
        {
            // Read from configuration
            XmlConfigurator.Configure();

            // Set Properties
            ThreadContext.Properties["ID"] = ...
                ...
                ...
                ...

            if(System.Diagnostics.Debugger.IsAttached)
            {
                // Special debugging logger
                return LogManager.GetLogger("DEBUG_MODE");
            }
            else
            {
                // Root logger
                return LogManager.GetLogger(declaringType);
            }
        }
    }
} 
```

我正在像这样使用这段代码..

```
private static readonly Type declaringType = 
    MethodBase.GetCurrentMethod().DeclaringType;
private static readonly ILog log =
    Log4NetThreadContext.Initialize(declaringType);
...
log.Info("Something useful"); 
```

**[编辑]：**

这是我的 AfterBuild 目标

```
<Target Name="AfterBuild">
<CreateItem Include="@(ReferenceCopyLocalPaths)" Condition="'%(Extension)'=='.dll'">
  <Output ItemName="AssembliesToMerge" TaskParameter="Include" />
</CreateItem>
<Message Text="MERGING: @(AssembliesToMerge->'%(Filename)')" Importance="High" />
<Exec Command="&quot;$(ProgramFiles)\Microsoft\Ilmerge\Ilmerge.exe&quot; /targetplatform:v2 /log /internalize:&quot;ilmerge.excludes.txt&quot; /keyfile:$(AssemblyOriginatorKeyFile) /out:@(MainAssembly) &quot;@(IntermediateAssembly)&quot; @(AssembliesToMerge->'&quot;%(FullPath)&quot;', ' ')" />
<Delete Files="@(ReferenceCopyLocalPaths->'$(OutDir)%(DestinationSubDirectory)%(Filename)%(Extension)')" /> 
```

一般来说，是否有更好的方法来调试保护级别问题？

```
Log4NetThreadContext.Initialize(System.Type)' is inaccessible due to its protection level 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T20:48:04.287

最终，最简单的做法是将 log4net 从 ilmerge 过程中完全排除，并将其作为依赖程序集进行维护。

因此，经过多次折磨，这里是“不那么明显”的解决方案..

毕竟不需要排除，真正的答案是使用`/lib:[path]`ilmerge 中的开关。

我更新了目标以从交换机`AfterBuild`中删除排除项。`/internalize`接下来，我添加了`/lib`将 log4net dll 的位置作为依赖引用传递的开关。它看起来像这样：

```
<Target Name="AfterBuild">
  <CreateItem Include="@(ReferenceCopyLocalPaths)" Condition="'%(Extension)'=='.dll'">
    <Output ItemName="AssembliesToMerge" TaskParameter="Include" />
  </CreateItem>
  <Message Text="MERGING: @(AssembliesToMerge->'%(Filename)')" Importance="High" />
  <Exec Command="&quot;$(ProgramFiles)\Microsoft\Ilmerge\Ilmerge.exe&quot; /lib:..\packages\log4net.2.0.0\lib\net35-full\ /targetplatform:v2 /log /internalize /keyfile:$(AssemblyOriginatorKeyFile) /out:@(MainAssembly) &quot;@(IntermediateAssembly)&quot; @(AssembliesToMerge->'&quot;%(FullPath)&quot;', ' ')" />
  <Delete Files="@(ReferenceCopyLocalPaths->'$(OutDir)%(DestinationSubDirectory)%(Filename)%(Extension)')" />
</Target> 
```

此外，我添加了另一个目标，通过向`<ILMerge />`位于我的 .csproj 文件中的引用添加唯一元素来限制合并中包含的程序集列表

```
<Target Name="AfterResolveReferences">
  <Message Text="Filtering out ILMerge assemblies from ReferenceCopyLocalPaths..." Importance="High" />
  <ItemGroup>
    <ReferenceCopyLocalPaths Remove="@(ReferenceCopyLocalPaths)" Condition="'%(ReferenceCopyLocalPaths.ILMerge)'=='false'" />
  </ItemGroup>
</Target> 
```

因此，参考元素按如下方式列出以适应：

```
...
<Reference Include="Ionic.Zip">
  <HintPath>..\packages\DotNetZip.1.9.1.8\lib\net20\Ionic.Zip.dll</HintPath>
  <ILMerge>True</ILMerge>
</Reference>
<Reference Include="log4net">
  <HintPath>..\packages\log4net.2.0.0\lib\net35-full\log4net.dll</HintPath>
  <ILMerge>False</ILMerge>
... 
```

将 ILMerge=False 值显式添加到开关可能有更好的（编程）替代方案，`/lib`但在我的情况下，由于只有一个排除项，因此就足够了。否则，您可能需要手动添加其他路径。

我列出的“AfterResolveReferences”技术归功于[http://www.hanselman.com/blog/MixingLanguagesInASingleAssemblyInVisualStudioSeamlessWithILMergeAndMSBuild.aspx](http://www.hanselman.com/blog/MixingLanguagesInASingleAssemblyInVisualStudioSeamlesslyWithILMergeAndMSBuild.aspx)

希望这可以帮助某人！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:59:33.303

当我从远程位置运行代码时，这通常会发生在我身上。从远程位置访问配置文件时，.NET 存在权限问题。例如，网络共享上的代码存储库设置。

我只能通过将我的代码移动到本地硬盘来克服它（因为我没有管理员权限来将网络共享的安全性提升到“受信任”等）。

*（请注意，这主要是 2005 年之前的 Visual Studio 版本的问题。我认为这在 2008 年以后已修复，因此它可能不会影响您。不过，您没有说您使用的是什么版本。）*

# java - 最佳实践——构造器和设置器

> ID：14409012
> 
> 赞同：0
> 
> 时间：2013-01-18T22:59:05.610
> 
> 标签：java

我有一个 IDE，可用于为实例变量自动创建构造函数和设置器，但我想知道它创建它们的方式是否可能不是最佳实践。这是它的作用：

```
private String partNum;
private String partDesc;
private int quant;
private double price;

public Invoice( String partNum, String partDesc, int quant, double price )
{
    this.partNum = partNum;
    this.partDesc = partDesc;
    this.quant = quant;
    this.price = price;
} 
```

我担心的是“this.name”，以及构造函数将参数标记为与其正在构造的变量相同的名称。setter 也做同样的事情——使用与其设置的变量名称相同的参数名称，并使用 this.name。

那么，这有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T23:03:22.353

这是我的首选方式。否则，您将不得不为输入参数考虑不同的任意名称，这会变得很麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T23:02:49.967

不，没有任何问题。关键字解决了歧义，`this`因为它告诉编译器您设置的 l 值是成员变量（例如 this.partNum）而不是输入参数（partNum）。

如果这是一种不好的做法，那更多的是个人品味问题。有些人不喜欢对成员变量和输入参数使用相同的名称。就个人而言，我经常使用它有几个原因：

*   避免名称泛滥
*   `"this."`如果名称以:)开头，则 Eclipse 开始自动完成名称

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T23:04:09.843

不，这根本不是问题。这些只是变量名。左值和右值将保持其唯一性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T23:04:41.590

您所看到的是非常标准的 Java 实践，甚至在[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se5.0/html/statements.html#14.4.3)中提到：

> 如果声明为局部变量的名称已声明为字段名称，则该外部声明在整个局部变量的范围内被遮蔽（第 6.3.1 节）。类似地，如果名称已被声明为变量或参数名称，则该外部声明在整个局部变量的范围内被遮蔽（前提是根据 §14.4.2 的规则，遮蔽不会导致编译时错误） . 有时可以使用适当的限定名称访问阴影名称。
> 
> 例如，关键字 this 可用于访问阴影字段 x，使用 this.x 形式。事实上，这个成语通常出现在构造函数中（第 8.8 节）：

```
class Pair {
        Object first, second;
        public Pair(Object first, Object second) {
                this.first = first;
                this.second = second;
        }
} 
```

> 在此示例中，构造函数采用与要初始化的字段同名的参数。这比必须为参数发明不同的名称更简单，并且在这种风格化的上下文中不会太混乱。然而，一般来说，将局部变量与字段同名被认为是一种糟糕的风格。

当方法的局部变量与类变量同名时，它们有效地“隐藏”或隐藏这些变量。但是您仍然可以通过`this`上下文范围引用它们来访问类变量。

# java - 将子进程输出直接通过管道传输到标准输出（java/clojure）

> ID：14409014
> 
> 赞同：8
> 
> 时间：2013-01-18T22:59:29.033
> 
> 标签：java, clojure, exec

我正在寻找一种在 clojure 中启动子进程的方法（java 可以）并将其输出实时直接发送到标准输出。我能找到的最接近的是 clojure 的 Conch 库，它允许您将输出发送到`*out*`，但在进程完成运行之前它实际上不会显示输出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T00:35:20.563

不确定是否有一个方便的 Clojure 包装器：

```
(->> (.. Runtime getRuntime (exec "ls") getInputStream)                                                                                                                   
    java.io.InputStreamReader.                                                                                                                                            
    java.io.BufferedReader.                                                                                                                                               
    line-seq                                                                                                                                                              
    (map println)) 
```

在实践中值得注意的是，您需要定期读取 stdin 和 stderr ，否则当其中一个缓冲区填满时，进程可能会挂起。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-18T19:05:23.563

我将 Arthur 的答案标记为正确，因为它引导我找到了解决方案，这基本上是人们在基本情况下想要的。我最终构建了一个更大的方法，它虽然做得更多，但我想我会把它放在这里以防其他人发现它有用

```
(defn- print-return-stream     
    [stream]
    (let [stream-seq (->> stream    
                          (java.io.InputStreamReader.)    
                          (java.io.BufferedReader.)       
                          line-seq)]                      
        (doall (reduce
            (fn [acc line]     
                (println line) 
                (if (empty? acc) line (str acc "\n" line))) 
            ""                 
            stream-seq))))     

(defn exec-stream              
    "Executes a command in the given dir, streaming stdout and stderr to stdout,
    and once the exec is finished returns a vector of the return code, a string of
    all the stdout output, and a string of all the stderr output"
    [dir command & args]       
    (let [runtime  (Runtime/getRuntime)
          proc     (.exec runtime (into-array (cons command args)) nil (File. dir)) 
          stdout   (.getInputStream proc) 
          stderr   (.getErrorStream proc) 
          outfut   (future (print-return-stream stdout))
          errfut   (future (print-return-stream stderr))
          proc-ret (.waitFor proc)]       
        [proc-ret @outfut @errfut]      
        )) 
```

# javascript - 动态地将活动类应用于导航 li

> ID：14409015
> 
> 赞同：1
> 
> 时间：2013-01-18T22:59:32.037
> 
> 标签：javascript, jquery, html, css, nav

我已经在我的文件中包含了一个标题，如包含。标题中是导航栏。

我如何使用 jQuery 应用`class="active"`到相关的`li`.

我能想到的唯一方法是在实际页面上设置一个变量，应用一个等于相关页面的该变量的 id，如果它们匹配，则应用一个类到 li。

但是，我认为必须有一种更简单的方法来实现这一点。

```
<ul class="nav nav-pills right" id="div">
    <li id="home" class="active">
       <a href="index.php">Home</a>
    </li>
    <li id="search">
       <a href="search.php">Search</a>
    </li>
    <li id="contact">
      <a href="contact.php">Contact</a>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T23:04:07.957

更紧凑的方式：

```
$(function(){
    var sPath = window.location.pathname;
    var sPage = sPath.substring(sPath.lastIndexOf('/') + 1);
    $('a[href="'+ sPage +'"]').parent().addClass('active');
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T23:05:09.593

一个简单的方法是每页都有一个脚本：

```
$('#home').addClass('active'); // for home page 
```

您可以尝试将 href 与当前 url 匹配：

```
var path = window.location.pathname.substring(1);
$('.nav>li>a[href="' + path + '"]').parent().addClass('active'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-18T23:06:29.380

页面加载后，它将运行以下代码：

```
$(document).ready(function(){
    $('li').removeClass('active');
    $('li a').each(function() {
       $found = $.contains($(this).prop("href"),location.pathname);
       if ($found) {
           $(this).closest('li').addClass('active');
           break;
        }
    });
}); 
```

或者

您也可以使用 regex 执行此操作：

```
$(document).ready(function(){
    $('li').removeClass('active');
     var regex = /[a-z]+.php/g; 
     var input = location.pathname; 
        if(regex.test(input)) {
           var matches = input.match(regex);
           $('a[href="'+matches[0]+'"]').closest('li').addClass('active');
        }
}); 
```

您可能需要具有与 php 文件类似的 id 名称。

在此处查看演示：[演示](http://jsfiddle.net/kAbfG/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T23:12:02.990

你可以这样做：

```
//remove the active class from all items, if there is any
$('.nav>li').removeClass('active');

//finally, add the active class to the current item
$('a[href='+ location.pathname.substring(1) +']').parent().addClass('active'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T23:13:19.620

您可以使用 javascript 根据 url 查找当前列表项，方法是在加载 DOM 后将类添加到正确的列表项（例如 window.location 的字符串操作以及 JQuery 选择器和 addClass()）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-12T16:37:37.343

我找到了一个在我的共享菜单上设置活动（当前）类的例程，但我需要修改它以仅设置父链接，而不是“最近”链接。它适用于没有子菜单的菜单项，但是当单击子菜单项时，页面加载后主菜单上没有指示。（我需要修改的代码如下）

> (function($) { $.fn.activeNavigation = function(selector) { var pathname = window.location.pathname var extension_position; var href; var hrefs = [] $(selector).find("a").each( function(){ // 删除 href 文件扩展名 extension_position = $(this).attr("href").lastIndexOf('.'); href = (extension_position >= 0) ? $(this).attr("href" ).substr(0, extension_position) : $(this).attr("href");
> 
> ```
>  if (pathname.indexOf(href) > -1) {
>             hrefs.push($(this));
>         }
>     })
>     if (hrefs.length) {
>         hrefs.sort(function(a,b){
>             return b.attr("href").length - a.attr("href").length
>         })
>       hrefs[0].closest('li').addClass("current")
>     }
> }; })(jQuery); 
> ```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-04T02:48:32.290

如果有人仍然在谷歌上查看如何操作，这是我的解决方案

```
var path = window.location.href; // full url 
$('a[href="'+ path +'"]').parent().addClass('active'); // find by selector url 
```

HTML

```
<ul class="navbar-nav mr-auto">
    <li class="nav-item">
        <a class="nav-link" href="http://example.com/">Home</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="http://example.com/history"> History</a>
    </li>
</ul> 
```

# c# - 使用 Telerik 测试环境

> ID：14409018
> 
> 赞同：0
> 
> 时间：2013-01-18T22:59:40.803
> 
> 标签：c#, telerik

我正在学习如何使用 Telerik 测试环境。我创建了一个贯穿我的程序的测试。其中一个步骤是创建一个存储库，我将向其中上传数据。我想多次运行这个测试作为负载测试，所以名称需要是动态的。我想创建一个名称，例如“Repository_Date_Time”，因为无论我使用多少次，都可以保证唯一性。

我在文本框插入步骤之前创建了一个代码步骤。我想生成一个字符串，然后在下一步中使用它，以便使用唯一名称创建存储库。

生成的代码是：这是在 Telerik 应用程序中的步骤中

```
 [WebTest_CodedStep] : New Coded Step 
```

然后，在这一步中，我可以对内容进行硬编码：

```
 [CodedStep(@"New Coded Step")]
            public void WebTest_CodedStep()
            {

            } 
```

我想使用这样的东西：`string currentTime = DateTime.Now.ToString("HH:mm:ss");`

然后使用 saveNow 包含的数据作为字符串的结尾以使其唯一，但必须在以下步骤中完成：

```
Type 'Moshe-Master Repository Test01' into Item0Textboxchanged     
TypedText:               Moshe-Master Repository Test01 
```

这样红色名称将被一个带有我创建的新字符串的变量替换。TypedText 框是自动输入的值，我想用上一步生成的值更改它。TypedText 值可以是动态的吗？

谢谢！

编辑：我刚刚意识到有一种方法可以使用变量作为输入，但是，我不知道在哪里可以创建它。我可以将其作为输入的位置位于右上角的状态图中，所有当前数据都用于该特定步骤。（绑定）目前设置为收藏。当我尝试将其更改为变量时，它告诉我需要创建变量 - 它没有指定在哪里。

# grails - 运行简单的 GEB 程序时出现“线程“主”java.lang.ClassNotFoundException：org.codehaus.groovy.tools.GroovyStarter 中的异常”错误

> ID：14409019
> 
> 赞同：0
> 
> 时间：2013-01-18T22:59:50.487
> 
> 标签：grails, groovy, intellij-idea, geb

我有：

*   java版本“1.6.0_37”
*   Java(TM) SE 运行时环境 (build 1.6.0_37-b06-434-10M3909)
*   Java HotSpot(TM) 64 位服务器 VM（内部版本 20.12-b01-434，混合模式）
*   圣杯 2.2.0
*   时髦的 2.0
*   GEB核心0.7.2

和所有需要的罐子。

我正在尝试运行一个简单的 GEB 程序：

```
@Grapes([
    @Grab("org.codehaus.geb:geb-core:0.7.2"),    
    @Grab("org.seleniumhq.selenium:selenium-firefox-driver:2.28.0"),
    @Grab("org.seleniumhq.selenium:selenium-support:2.15.0")
])
import geb.Browser

Browser.drive {
    go "http://googel.com/"
    assert title == "Google"
} 
```

当我运行它时，我看到了上面提到的异常：

```
Exception in thread "main" java.lang.ClassNotFoundException: org.codehaus.groovy.tools.GroovyStarter
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:169)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:113) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-08-04T17:38:05.863

基本上，您的 GROOVY_HOME 要么指向错误的位置，要么无法访问。只需纠正它并完成工作。

当我尝试执行一个 groovy 脚本作为某些迁移活动的一部分时，我遇到了这个问题。问题很简单。就我而言，它无法看到 groovy 安装的路径。当我使用它的完整路径时，`$GROOVY_HOME/bin/groovy <script>` 它起作用了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T19:08:50.567

它与 Geb 无关——您的环境配置错误。

看看这个[groovy 用户邮件列表线程](http://groovy.329449.n5.nabble.com/groovy-installation-error-td362496.html)。

另一件事是，据我所知 Geb 0.7.2 是用 Groovy 1.8.6 编译的，我不知道它是否与 Groovy 2.0 兼容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-01T10:39:58.730

[从http://groovy.codehaus.org/Download](http://groovy.codehaus.org/Download)下载 Groovy 二进制文件

下载 zip：二进制版本

提取本地磁盘说 D;\GROOVY\ groovy-2.3.9

它包含文件夹结构 D:。├───bin ├───conf ├───嵌入式 ├───indy ├───lib └───META-INF

转到控制面板\用户帐户\用户帐户更改我的环境变量

设置/新 GROOVY_HOME = D:\GROOVY\groovy-2.3.9 （不要放：分号）

设置 PATH = C:\Program Files\Java\jdk1.8.0_25\bin;%GROOVY_HOME%\bin;

将 groovy-all.jar 添加到 CLASSPATH

D:\ GROOVY\ \groovy-2.3.9\embeddable\groovy-all-2.3.9.jar;.

关闭和打开命令和说 -groovy

对于控制台 -groovyConsole

# mysql - OpenStreetMaps MySQL 数据库。检索 POI 和街道名称

> ID：14409024
> 
> 赞同：1
> 
> 时间：2013-01-18T23:00:23.340
> 
> 标签：mysql, geo, openstreetmap

在我的一个项目中，我有一个问题是要获得一些坐标最近的街道名称和兴趣点。我正在使用 OSM 本地数据库。我已将一些地理区域导入我的 MySQL 数据库。为了创建它，我遵循了这篇不错的文章[http://goblor.de/wp/2009/10/16/openstreetmap-projekt-teil-1-openstreetmap-daten-in-mysql-datenbank-einlesen/](http://goblor.de/wp/2009/10/16/openstreetmap-projekt-teil-1-openstreetmap-daten-in-mysql-datenbank-einlesen/) 所以我正在使用这个结构[http://goblor.de/wp/wp-content/uploads/2009/10/schema1.png](http://goblor.de/wp/wp-content/uploads/2009/10/schema1.png)

而现在，我有一个问题。我不知道如何从中检索数据。我有一些坐标。我的目标是获得最近的道路名称和 POI。

有人有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T23:30:25.687

看起来该教程仅插入纬度/经度坐标。您将需要创建几何类型并对其进行索引以便在空间上查询它们。

MySQL 的空间扩展通常不是这类事情的最佳解决方案。如果可能的话，我建议使用 PostgreSQL。

请参阅此线程[https://gis.stackexchange.com/questions/27878/how-to-find-20-closest-points-efficiently](https://gis.stackexchange.com/questions/27878/how-to-find-20-closest-points-efficiently)

在这里转换 OSM： [http ://wiki.openstreetmap.org/wiki/Osm2pgsql](http://wiki.openstreetmap.org/wiki/Osm2pgsql)

# solr - Solr - 如果没有结果，我可以设置默认响应记录吗？

> ID：14409027
> 
> 赞同：0
> 
> 时间：2013-01-18T23:00:43.867
> 
> 标签：solr

当我查询我的 solr 核心并返回 0 个结果时，有没有办法可以用它代替回退（默认）记录返回？

所以 - 例如，而不是得到这个（下）：

```
<response><lst name="responseHeader"><int name="status">0</int><int name="QTime">2</int><lst name="params"><str name="indent">on</str><str name="start">0</str><str name="q">asdf</str><str name="version">2.2</str><str name="rows">10</str></lst></lst><result name="response" numFound="0" start="0"/></response> 
```

我得到了某种回报，比如我的数据集中的第一个 id（其中字段 'id' 等于 '1'）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T16:14:46.097

没有什么是开箱即用的。如果您乐于实现自己的 Java 代码，请查看 SearchComponents 是如何实现的。例如，[Query Elevation 组件](http://wiki.apache.org/solr/QueryElevationComponent)做了类似的事情。

事实上，如果您不介意某个特定文档**总是**被返回并且 - 如果不需要 - 被客户端忽略，那么您可以使用 QueryElevationComponent 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T04:12:05.097

没有办法设置我知道的默认响应记录。您可以在连接到 Solr 时使用的客户端中设置此行为。响应中的`numFound`属性，然后做出相应的反应。

# asp.net - SQL Server 2012 的 ASP.NET 连接字符串

> ID：14409029
> 
> 赞同：0
> 
> 时间：2013-01-18T23:00:44.667
> 
> 标签：asp.net, sql-server, odbc, database-connection, oledb

我在 IIS 上的 ASP 应用程序和现有 SQL Server 2012 实例之间的连接字符串遇到问题。

当前有效的连接字符串如下：

```
 Data Source=SERVER1;Initial Catalog=CORE;User
 ID=testuser;Password=password;
 MultipleActiveResultSets=true;Connection Timeout=200;pooling=false 
```

安装的 ODBC 驱动程序是 SQL Server V 6.01.7601.17514。然后我添加了最新的驱动程序 SQL Server Native Client 11 并尝试在 IIS 中调整连接字符串，但没有成功。

我尝试了 ODBC 和 OLE DB 字符串`connectionstrings.com`。

**OLEDB**

```
Provider=SQLNCLI11;Server=SERVER1;Database=CORE;Uid=testuser;Pwd=password; 
```

**ODBC**

```
Driver={SQL Server Native Client 11.0};Server=SERVER1;Database=CORE;Uid=testuser;Pwd=password; 
```

每次我得到一个我不明白为什么连接字符串无法提供这些详细信息的登录提示时？我在这里想念什么？

只是看看一些类似的问题，一些提到启用的命名管道......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T23:10:12.980

第一个连接字符串对 Net Framework 数据提供程序（SqlClient 类）有效，而其他连接字符串对 OleDb 提供程序或 ODBC 提供程序有效。

当然，您应该使用您的提供者理解的连接字符串。

如果在您的代码中使用 SqlClient 类（SqlConnection、SqlCommand），则需要使用第一个连接字符串，如果使用 OleDbConnection 或 ODBCConnection，则应使用其他连接字符串

[请参阅 connectionstrings.com](http://www.connectionstrings.com/sql-server-2012)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T23:15:26.140

我一直这样做：

```
Data Source=;Initial Catalog=;UID=;PWD=; 
```

我还建议您将连接字符串放在配置文件中以便于编辑，如下所示： http: [//www.connectionstrings.com/Articles/Show/store-connection-string-in-web-config](http://www.connectionstrings.com/Articles/Show/store-connection-string-in-web-config)

# jquery - Tablesorter 不使用 % 对字段进行排序

> ID：14409035
> 
> 赞同：1
> 
> 时间：2013-01-18T23:01:23.297
> 
> 标签：jquery, tablesorter

出于某种原因，当字段包含特殊字符（如`%`排序）时完全失败。

这个[小提琴](http://jsfiddle.net/houmie/fEWdz/4/)显示了 A 列在没有百分比的情况下是如何正常工作的。

```
<tbody id="search_result">
    <tr>
        <td>AAA 0</td>
      <td>39.90</td>
      <td>29 Dec 2012</td>
    </tr>
  <tr> 
```

但是一旦`%`进入它就会失败->[小提琴](http://jsfiddle.net/houmie/fEWdz/2/)

```
<tbody id="search_result">
    <tr>
        <td>AAA 0%</td>
      <td>39.90</td>
      <td>29 Dec 2012</td>
    </tr>
  <tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T23:19:47.877

看这个例子

```
$(function() { 

  $.extend($.tablesorter.themes.bootstrap, { 
    // these classes are added to the table. To see other table classes available, 
    // look here: http://twitter.github.com/bootstrap/base-css.html#tables 
    table      : 'table', 
    header     : 'bootstrap-header', // give the header a gradient background 
    footerRow  : '', 
    footerCells: '', 
    icons      : '', // add "icon-white" to make them white; this icon class is added to the <i> in the header 
    sortNone   : 'bootstrap-icon-unsorted', 
    sortAsc    : 'icon-chevron-up', 
    sortDesc   : 'icon-chevron-down',
    active     : '', // applied when column is sorted 
    hover      : '', // use custom css here - bootstrap class may not override it 
    filterRow  : '', // filter row class 
    even       : '', // odd row zebra striping 
    odd        : ''  // even row zebra striping 
  }); 

  // call the tablesorter plugin and apply the uitheme widget 
  $("#tab_open_deals").tablesorter({ 
    theme : "bootstrap", // this will  

    widthFixed: true, 

    headerTemplate : '{content} {icon}', // new in v2.7\. Needed to add the bootstrap icon! 

    // widget code contained in the jquery.tablesorter.widgets.js file 
    // use the zebra stripe widget if you plan on hiding any rows (filter widget) 
    widgets : [ "uitheme", "filter", "zebra" ], 

    widgetOptions : { 
      // using the default zebra striping class name, so it actually isn't included in the theme variable above 
      // this is ONLY needed for bootstrap theming if you are using the filter widget, because rows are hidden 
      zebra : ["even", "odd"], 

      // reset filters button 
      filter_reset : ".reset", 

      // set the uitheme widget to use the bootstrap theme class names 
      // uitheme : "bootstrap" 

    } 
  }) 
  .tablesorterPager({ 

    // target the pager markup - see the HTML block below 
    container: $(".pager"), 

    // target the pager page select dropdown - choose a page 
    cssGoto  : ".pagenum", 

    // remove rows from the table to speed up the sort of large tables. 
    // setting this to false, only hides the non-visible rows; needed if you plan to add/remove rows with the pager enabled. 
    removeRows: false, 

    // output string - default is '{page}/{totalPages}'; 
    // possible variables: {page}, {totalPages}, {filteredPages}, {startRow}, {endRow}, {filteredRows} and {totalRows} 
    output: '{startRow} - {endRow} / {filteredRows} ({totalRows})' 

  }); 

});

$(document).ready(function() {

}); 
```

[例子](http://jsfiddle.net/vCTHw/575/)

问候

# php - 为什么我的菜单项不显示？

> ID：14409039
> 
> 赞同：0
> 
> 时间：2013-01-18T23:01:58.977
> 
> 标签：php, drupal-6, hook-menu

我正在尝试创建一个根据登录用户动态更改的菜单项。

这是我模块中的代码：

```
<?php
global $user;
$current_uid = $user->uid;
$current_name - $user->name;
function willmodule_menu(){
$techprofile = 'tech=profile/' . $current_uid . '/' . $current_name;
$items['$techprofile'] = array(
  'menu_name' => 'menu-tech-account-menu',
  'title'=>'View Your Tech Profile',
);
return $items;
}
?> 
```

我不知道我做错了什么。我的菜单项甚至没有出现。不过，从好的方面来说，它并没有破坏我的网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T23:10:52.180

好吧，发布时的拼写错误或代码中的实际错误很少：

```
 1\. $current_name - $user->name; //change dash to = sign?
   2\. $items['$techprofile'] //use double quotes instead of single quotes when 
                             //using php variables 
```

# mysql - MySQL的mediumint通过jdbc

> ID：14409040
> 
> 赞同：0
> 
> 时间：2013-01-18T23:02:04.247
> 
> 标签：mysql, jdbc, types

如果我通过 jdbc 从 MySQL 表中查询`mediumint`列，我会在 ResultSet 对象中返回什么类型？

或者那会是一个错误？

（我知道 JDBC 的 Types.java 没有 MEDIUMINT）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T23:09:12.203

您几乎可以使用任何 Java 类型（请看[这里](http://docs.oracle.com/cd/E17952_01/refman-5.0-en/connector-j-reference-type-conversions.html)），但最好的方法是使用 Integer，因为 `Short`它是缩写`MEDIUMINT`并返回结果，您应该使用该方法`rs.getInteger("COLUMNNAME")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T23:36:19.840

不是错误。[ResultSetMetaData.getColumnType()](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSetMetaData.html#getColumnType%28int%29)返回的列类型为4，INTEGER。如果你调用 ResultSet.getObject()，你会得到一个 java.lang.Integer。调用 getInt() 或 getLong() 都可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T20:52:16.500

JDBC 驱动程序返回的类型，如果不表示为 JDBC 规范本身的一部分（附录 B 中臭名昭著的表），将是可以表示 MySQL 类型的全部值范围的最小 Java 类型。

# python - 将参数传递给访问自我变量的列表中的装饰器？

> ID：14409054
> 
> 赞同：0
> 
> 时间：2013-01-18T23:03:12.653
> 
> 标签：python

如何`self`使用 a 修改变量`decorator`？

前任。

```
class Foo:
   def __init__(self,a):
       self.a = a
       self.li = []

    def afunction(self):
       pass 
```

我想将函数对象添加`afunction`到列表中`self.li`，以便可以在列表中调用它。前任。有一个类定义的函数列表。我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T23:05:25.217

我认为你不需要装饰师。函数是 Python 中的一等对象：

```
class Foo:
   def __init__(self,a):
       self.a = a
       self.li = [self.afunction]

    def afunction(self):
       pass 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T23:19:32.127

如果您的意图是将类的某些函数标记为特殊类型，以便以后可以将它们识别为其他目的，则可以使用装饰器，或者您可以只使用命名约定。

```
def marked(function):

    function.marked = 1
    return function

class MarkAware(object):

    def run_marked(self, *args, **kwargs):
        for name in dir(self):
            meth = getattr(self, name)
            if hasattr(meth, 'marked'):
                meth(*args, **kwargs)

    def foo(self):
        pass

    @marked
    def bar(self):
        pass 
```

选择：

```
class NameConvention(object):

     def run_batchable(self, *args, **kwargs):
         for name in dir(self):
             if name.startswith('batchable_'):
                 getattr(self, name)(*args, **kwargs)

     def foo(self):
         pass

     def batchable_bar(self):
         pass 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T23:21:50.690

正如 Lattyware 在对 unutbu 答案的评论中解释的那样，您不能直接执行您的要求，因为任何装饰器`afunction`都将在创建类本身时运行，而不是在创建每个实例时运行。

如果您真正想要的只是“类定义的函数列表”，那么您根本不需要任何花哨的东西。只需在以下位置创建该列表`__init__`：

```
def __init__(self, a):
    self.a = a
    self.li = [f for f in dir(self) if inspect.ismethod(f)] 
```

如果您想要某些特定功能的列表，最简单的方法是方法`unutbu`建议，它仍然不需要装饰器。

如果您希望装饰器仅标记“此方法应进入`li`”，请参阅 sr2222 的答案。

这些都不是您要求的，但它们可能是您想要的。有几种方法可以实际使用装饰器将函数添加到`self.li`，但它们都非常糟糕，您可能不想要它们。例如：

```
class Foo:
    def __init__(self,a):
        self.a = a
        self.li = []

        def mydecorator(f):
            self.li.append(f)
            return f

        @mydecorator
        def afunction(self):
            print('a')
        self.afunction = new.instancemethod(afunction, self, Foo) 
```

# java - 尽管对我来说一切正常，但 Object Animator 会引发运行时异常。请指出是什么原因造成的

> ID：14409057
> 
> 赞同：0
> 
> 时间：2013-01-18T23:03:25.713
> 
> 标签：java, android, runtimeexception, objectanimator

在添加对象动画器来为 ImageView 设置动画之前，它运行良好。但是在创建动画后，它开始抛出运行时异常。尽管我知道是动画师造成的，但我无法弄清楚问题是什么，因为如果我删除了动画师初始化的代码，它就可以正常工作。请任何人帮我解决这个问题。谢谢！这是运行时异常的堆栈：

```
ActivityThread.performLaunchActivity(ActivityThread$ActivityClientRecord, Intent) line: 2304    
ActivityThread.handleLaunchActivity(ActivityThread$ActivityClientRecord, Intent) line: 2354 
ActivityThread.access$600(ActivityThread, ActivityThread$ActivityClientRecord, Intent) line: 150    
ActivityThread$H.handleMessage(Message) line: 1244  
ActivityThread$H(Handler).dispatchMessage(Message) line: 99 
Looper.loop() line: 137 
ActivityThread.main(String[]) line: 5191    
Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
Method.invoke(Object, Object...) line: 511  
ZygoteInit$MethodAndArgsCaller.run() line: 795  
ZygoteInit.main(String[]) line: 562 
NativeStart.main(String[]) line: not available [native method] 
```

这是我的代码：

```
import android.animation.ObjectAnimator;
import android.app.Activity;
import android.os.Bundle;
import android.util.DisplayMetrics;
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.FrameLayout;
import android.widget.ImageView;

public class Startup extends Activity {
    private boolean itIsMultiplayerCard = false;
    private float x, y;
    private int screenWidth, screenHeight, initX, finX;
    private Animation goDown, goUp;
    private ObjectAnimator centerSlider;
    private DisplayMetrics displayMetrics;
    private FrameLayout startUpFrameLayout;
    private ImageView backImageView, playNowImageView, multiplayerImageView,         optionsImageView, exitImageView;

    private OnClickListener backImageListener = new OnClickListener()   {
        @Override
        public void onClick(View v) {

        }
    };

    private OnClickListener playNowListener = new OnClickListener() {
        @Override
        public void onClick(View v) {

        }
    };

    private OnClickListener multiplayerListener = new OnClickListener() {
        @Override
        public void onClick(View v) {
            itIsMultiplayerCard = true;
            optionsImageView.setOnClickListener(null);
            exitImageView.setOnClickListener(null);
            multiplayerImageView.setOnClickListener(backListener);
            multiplayerImageView.startAnimation(goDown);
            multiplayerImageView.setImageResource(R.drawable.blank);
            multiplayerImageView.bringToFront();
            multiplayerImageView.startAnimation(goUp);
        }
    };

    private OnClickListener optionsListener = new OnClickListener() {
        @Override
        public void onClick(View v) {
            itIsMultiplayerCard = false;
            multiplayerImageView.setOnClickListener(null);
            exitImageView.setOnClickListener(null);
            optionsImageView.setOnClickListener(backListener);
            optionsImageView.startAnimation(goDown);
            optionsImageView.setImageResource(R.drawable.blank);
            optionsImageView.bringToFront();
            optionsImageView.startAnimation(goUp);
        }
    };

    private OnClickListener exitListener = new OnClickListener()    {
        @Override
        public void onClick(View v) {
            System.exit(0);
        }
    };

    private OnClickListener backListener = new OnClickListener()    {
        @Override
        public void onClick(View v) {
            if(itIsMultiplayerCard) {
                optionsImageView.setOnClickListener(optionsListener);
                multiplayerImageView.setOnClickListener(multiplayerListener);
                multiplayerImageView.startAnimation(goDown);
                multiplayerImageView.setImageResource(R.drawable.mul_u);
                playNowImageView.bringToFront();
                backImageView.bringToFront();
                multiplayerImageView.startAnimation(goUp);
            } else  {
                multiplayerImageView.setOnClickListener(multiplayerListener);
                optionsImageView.setOnClickListener(optionsListener);
                optionsImageView.startAnimation(goDown);
                optionsImageView.setImageResource(R.drawable.op_u);
                multiplayerImageView.bringToFront();
                playNowImageView.bringToFront();
                backImageView.bringToFront();
                optionsImageView.startAnimation(goUp);
            }
            itIsMultiplayerCard = false;
            exitImageView.setOnClickListener(exitListener);
        }
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_startup);

        displayMetrics = new DisplayMetrics();

        getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);

        screenHeight = displayMetrics.heightPixels;
        screenWidth = displayMetrics.widthPixels;
        initX = backImageView.getWidth();
        finX = ((screenWidth / 2) - (235 / 2));
        goUp = AnimationUtils.loadAnimation(this, R.anim.go_up);
        goDown = AnimationUtils.loadAnimation(this, R.anim.go_down);
        startUpFrameLayout = (FrameLayout) findViewById(R.id.startUpFrameLayout);
        backImageView = (ImageView) findViewById(R.id.backImageView);
        playNowImageView = (ImageView) findViewById(R.id.playNowImageView);
        multiplayerImageView = (ImageView) findViewById(R.id.multiplayerImageView);
        optionsImageView = (ImageView) findViewById(R.id.optionsImageView);
        exitImageView = (ImageView) findViewById(R.id.exitImageView);
        centerSlider = ObjectAnimator.ofFloat(backImageView, "TranslationX", -117, 117);

        backImageView.setOnClickListener(backImageListener);
        playNowImageView.setOnClickListener(playNowListener);
        multiplayerImageView.setOnClickListener(multiplayerListener);
        optionsImageView.setOnClickListener(optionsListener);
        exitImageView.setOnClickListener(exitListener);
        playNowImageView.setAlpha(0.0f);
        multiplayerImageView.setAlpha(0.0f);
        optionsImageView.setAlpha(0.0f);
        exitImageView.setAlpha(0.0f);
        centerSlider.setDuration(300);
        centerSlider.start();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T09:37:14.063

无需回答。发现了问题。这是我的一个愚蠢的错误。`initX = backImageView.getWidth();`我在初始化`backImageView()`导致异常的之前写过。它不是由动画师造成的。

# c++ - C++ 参考集合

> ID：14409060
> 
> 赞同：0
> 
> 时间：2013-01-18T23:03:50.957
> 
> 标签：c++

所以......你不能做一个引用数组，但你能建立一个处理引用、指针和值的集合吗？

```
Collection<Integer32*> a;
Collection<Integer32&> b;
Collection<Integer32> c; 
```

这是我遇到的问题：

```
template <class ItemType> class Collection
{
    public:
        Collection(ItemType array[]);  // or ItemType*, doesnt matter

    protected:
        ItemType* innerArray;
}; 
```

编译器说不，没有指向引用的指针......可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T23:05:26.730

不 -`Collection<Integer32&> b;`无效，您不能拥有参考集合。

其余的都是合法的——你的类应该编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T23:52:20.463

像普通数组这样的标准容器不支持将引用作为值类型，但是如果您创建自己的集合类型，则可以这样做。

在内部，集合必须将引用存储为可以复制和分配的东西。您可以使用普通指针或查看 std::reference_wrapper 以获得此类表示。

您可能需要对参考案例使用部分专业化。

# c# - 如何使用 Unity IoC 在已解析的具体类型上指定构造函数值？

> ID：14409061
> 
> 赞同：2
> 
> 时间：2013-01-18T23:04:01.850
> 
> 标签：c#, dependency-injection, unity-container

我看到很多帖子询问使用 Unity 选择*哪个*重载构造函数，但我的问题有点不同，我无法弄清楚答案。我有以下类继承一个接口（部分代码）：

```
public class UnitOfWork : IUnitOfWork
{
    private DbContext _context;

    public UnitOfWork(DbContext context)
    {
        _context = context;
    }

} 
```

所以现在我正在尝试使用统一来将具体类型解析为如下接口：

```
container.RegisterType<IUnitOfWork, UnitOfWork>(); 
```

但是，我需要在解析时将我的实体框架上下文传递给该具体类型。我*想做*这样的事情：

```
container.RegisterType<IUnitOfWork, UnitOfWork(new AdventureWorks2008R2Entities())>(); 
```

当然，我知道上面的代码是不正确的，并且已经阅读了有关使用`InjectionConstructor`该类的信息，但我认为这不适用于这里。

`UnitOfWork`所以我的问题是，在使用 Unity IoC 解析具体类型时，如何在类上定义该构造函数的值？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T00:52:53.153

您需要为 DbContext 添加注册：`container.RegisterType<DbContext, AdventureWorks2008R2Entities>();`

请记住，IoC 容器的一个主要功能是自动连接。您不需要告诉每个注册使用哪个实例。您只需将接口/类注册到实现并让它把东西放在正确的位置（并在极少数情况下您正在做一些不正常的事情时覆盖）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T14:36:50.753

我能够`InjectionConstructor`按照我的意图使用该课程，并且以下注册效果很好：

```
container.RegisterType<IUnitOfWork, UnitOfWork>(new InjectionConstructor(new AdventureWorks2008R2Entities())); 
```

以下链接帮助我更好地理解了这一点：

[注册注入的参数和属性值](http://msdn.microsoft.com/en-us/library/ff660882%28v=pandp.20%29.aspx)

# css - 当有可变大小的标题时，如何使 div 填充剩余高度？

> ID：14409063
> 
> 赞同：0
> 
> 时间：2013-01-18T23:04:07.347
> 
> 标签：css, html

有什么方法可以让红色区域填充可视区域的其余部分，但不像现在那样延伸到页脚中？我还需要 infoContent 部分是可滚动的。标题部分的高度是可变的。

我发现了一堆几年前的答案，说要使用 JavaScript，但是有没有可以在现代浏览器中使用的技术来避免这种情况？

HTML：

```
<div id="page">
<aside id="infoBar">
        <header>Variable Sized Header</header>
        <div id="infoContent">
            <div>First Content Item</div>
            <div>Second Content Item</div>
            <div>Third Content Item</div>
        </div>
    </aside>
    <footer id="footer">Footer</footer>
</div> 
```

CSS：

```
#footer { position:fixed; bottom: 0; height: 50px; background-color: rgba(0, 0, 255, 0.5); width: 100%;}

#infoBar { position: fixed; right:0; top: 0; bottom: 50px; padding: 5px; border: 1px solid black; width: 200px; }
#infoBar > header { height: 50px; }

#infoContent { height: 100%; background-color: red; overflow-y: auto; }
#infoContent > div { margin: 5px; height: 50px; background-color: yellow; } 
```

这是一个可以玩的小提琴：http: [//jsfiddle.net/gWmtD/](http://jsfiddle.net/gWmtD/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T23:25:29.463

首先想到的是使用表格：http: [//jsfiddle.net/gWmtD/9/](http://jsfiddle.net/gWmtD/9/)

我使用内联 CSS 是因为我更容易使用它来制作原型，并且您可以轻松地看到我所做的更改。

```
<div id="page">
    <aside id="infoBar" style="overflow-y: auto;">
        <table style="height:100%; width:100%;">
            <tr>
                <td>
                    <header>
                        Variable Sized Header
                    </header>
                </td>
            </tr>
            <tr>
                <td style="height:100%; width:100%;">
                    <div id="infoContent">
                        <div>First Content Item</div>
                        <div>Second Content Item</div>
                        <div>Third Content Item</div>
                    </div>
                </td>
            </tr>
        </table>
    </aside>
    <footer id="footer">Footer</footer>
</div> 
```

**编辑：**要在 FireFox 中向下滚动页面时启用旁边的滚动条，请添加以下属性：

```
overflow-y: auto; 
```

这将使 y 滚动条仅在需要时出现。这在 Chrome 中默认发生，可以通过设置在 Chrome 中关闭：

```
overflow-y: none; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-18T23:27:05.860

快速谷歌搜索显示滚动条的溢出方法：http: [//www.w3schools.com/cssref/pr_pos_overflow.asp](http://www.w3schools.com/cssref/pr_pos_overflow.asp)

作为开始，您应该查看其他问题的 css 包装类。

# html - CSS：将嵌套元素定位在父元素边界之外

> ID：14409067
> 
> 赞同：40
> 
> 时间：2013-01-18T23:04:20.497
> 
> 标签：html, css, positioning

我有 2 个 div，一个嵌套在另一个内部。根据页面设计，嵌套 div 需要出现在父 div 的“顶部”，如：（[来源：][[cloudfront.net](https://dzwonsemrish7.cloudfront.net/items/0m1a1Z0Q19212e2y0o1m/Screen%20Shot%202013-01-18%20at%204.54.06%20PM.png?v=cea05db2)][）]
[![这个图片](../Images/0c0e4a8e173215d04314e97d9ed947d9.png)](https://i.stack.imgur.com/QTx5C.png)

我已经为这两个元素编码了 CSS，在嵌套 div 上使用负上边距来尝试模拟所需的效果。但是，嵌套 div 的顶部 10px 左右并没有出现在父级边界之外，而是被截断，如下所示：（[来源：][[cloudfront.net](https://dzwonsemrish7.cloudfront.net/items/0u332c091m2j070g461f/Screen%20Shot%202013-01-18%20at%204.54.18%20PM.png?v=911f961f)][）]
[![这个图片](../Images/4fc80e8aa7ecf5fc17466543d3220f71.png)](https://i.stack.imgur.com/a9qvR.png)

我不想绝对定位元素，因为这个页面的目标是它是响应式的。

用于 div 的 HTML：

```
<div class="container-div">
  <div class="child-div">
    ...
  </div>
</div> 
```

div的CSS：

```
.container-div {
  padding: 10px 10px 0;
}

.child-div {
  display: inline-block;
  width: 100px;
  height: 60px;
  margin: -15px 10px 0;
  border: 1px solid #efefef;
  background-color: #fff;
} 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-01-18T23:16:37.383

您不需要应用`position:absolute`到嵌套的`div`.

在这种情况下，`margin`可能不是最佳实践。

只需添加`position:relative`到嵌套`div`，并将其设置`top`为您想要的任何数字。在你的情况下，它可能是负面的。

看看[这个小提琴。](http://jsfiddle.net/S2Kaw/2/)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-10-20T13:23:02.650

`overflow: hidden`在父母身上会做得很完美！

# javascript - 包含可变长度元素的表格的 jsRender 模板

> ID：14409073
> 
> 赞同：0
> 
> 时间：2013-01-18T23:05:13.617
> 
> 标签：javascript, templates, asp.net-mvc-4, jsrender

我有一个简单的视图模型，它具有传统的一对多关系：客户有订单。
我正在创建一个表格，每行都有一个客户名称，后面有一行订单。这一切都很好，但不幸的是，很少有客户拥有相同数量的订单，因此构建表格最终看起来像一个横向条形图。

我知道有一个标准的解决方案，但我无法为我的生活弄明白。我要做的是让每一行都包含相同数量的单元格。我考虑过将虚拟数据放入我的模型中，但这闻起来很糟糕。我可以获得尽可能多的订单，但我似乎无法弄清楚如何设计一个可以使用任何这些信息来创建统一表格的模板。这是我到目前为止所拥有的：

```
//#data is my ViewModel containing a few other things
<table id="ordersTable">
<!--header stuff-->
<tbody>
    {{for #data.Customers tmpl='tmplRow' /}}
</tbody> 
```

```
// OrderRow.tmpl.html
{{if #index % 2 == 0}}
<tr class="tableRowAlt1">
{{else}}
<tr class="tableRowAlt2">
{{/if}}
    <td>{{>Name}}</td>
    <td></td>
    {{for Orders }}
    <td>
        {{>OrderId}}
    </td>
    {{/for}}
</tr> 
```

**编辑：**所以我决定只强制列数，但现在我的新模板出现了一些奇怪的行为：

```
 // OrderRow.tmpl.html
{{if #index % 2 == 0}}
<tr class="tableRowAlt1">
{{else}}
<tr class="tableRowAlt2">
{{/if}}
    <td>{{>Name}}</td>
   <td>
        {{>Order[0].Id}}
    </td>
   <td>
        {{>Order[1].Id}}
    </td>
    <!--...-->
</tr> 
```

它呈现“Order.0 为空或不是对象”。我已经验证每一行都有数据，但模板认为它没有。我想这与我正在寻找数组元素的事实有关，但我不确定如何以 jsRender 将接受的方式通过索引访问元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T21:31:02.277

这可能没有资格作为答案，但作为评论太长了。

我不会 100% 遵循你想要的。我猜如果您有 5 个客户，一个客户有 10 个订单，而其他 4 个客户有 7 个订单，那么您需要 3 个空 td 标签用于其他 4 个客户。

您需要知道的第一件事是最长订单列表的长度。假设它是 10。然后您需要将其传递到 OrderRow 模板中。实际上，您需要当前客户的最大订单数和订单数之间的差异。让我们称之为三角洲。

现在，在 {{for Orders}} 循环之后，您有两个选择。您可以添加一个跨度为 delta 的 td，也可以添加 delta 数量的空 td 标签。仅当 delta 大于 0 时，您才想做这些添加中的任何一个。假设 ~max 作为最大订单数传入，而不是类似：

```
{{if (~max - Orders.lengh) > 0 }}
  <td colspan='{{ ~max - Orders.length }}'></td>
{{/if}} 
```

我感到困惑的是最终结果看起来是一样的。它仍然会在表格左侧以横向条形图的形式显示订单。

您提到了“对此的标准解决方案”。你能在某处指出一个渲染的例子吗？

# objective-c - 如何使用 GCC 编译 Objective-C 代码？

> ID：14409078
> 
> 赞同：3
> 
> 时间：2013-01-18T23:05:27.730
> 
> 标签：objective-c, gcc

当我尝试编译这段代码时，我用 gcc[在这里得到了表格：](http://en.wikipedia.org/wiki/List_of_Hello_world_program_examples#Objective-C)

```
#import <stdio.h>
#import <objc/Object.h>

@interface Hello: Object
- (void) init;
- (void) say;
@end

@implementation Hello
- (void) init {
  [super init];
}
- (void) say {
  printf("Hello, world!\n");
}
@end

int main() {
  Hello *hello = [Hello new];
  [hello say];
  [hello free];
  return 0;
} 
```

使用命令行：g++ -x objective-c++ test.mm -otest -lobjc

编译时我收到以下警告：

```
test.mm:11:14: warning: ‘Object’ may not respond to ‘-init’ [enabled by default]
test.mm:11:14: warning: (Messages without a matching method signature
[enabled by default]
test.mm:11:14: warning: will be assumed to return ‘id’ and accept
[enabled by default]
test.mm:11:14: warning: ‘...’ as arguments.) [enabled by default]
test.mm: In function ‘int main()’:
test.mm:19:28: warning: ‘Hello’ may not respond to ‘+new’ [enabled by default]
test.mm:21:14: warning: ‘Hello’ may not respond to ‘-free’ [enabled by default] 
```

如果我尝试运行 - 我会得到 SIGSEGV：

```
$> ./test
$> Segmentation fault 
```

我做错了什么？

环境：linux-x86_64，gcc-4.7.2

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T00:30:12.320

那个代码是错误的。又古。它永远不会奏效。现在它应该有（修复并添加了一些额外的例子）。

首先，检查您是否安装了 GNUStep。如果这样做，请切换到使用 NSObject 和 libFoundation （实际上`libgnustep-base`，正如 Fred 在评论中指出的那样）。

`init`其次，当 Object 仍然是根类时，[IIRC - 在此处刮擦旧脑细胞]仍然返回 (id)。由于您在该`init`方法中没有做任何有用的事情，因此只需将其完全删除。

编译器错误表明您的`Hello`子类没有正确地继承自`Object`，这是没有意义的。

# opencv - 无法创建 cvblobslib.lib

> ID：14409080
> 
> 赞同：1
> 
> 时间：2013-01-18T23:05:39.900
> 
> 标签：opencv, blob

我下载了最新的 cvblobslib。我试图在 Visual c++ 2010 Express 中加载 cvblobslib.dsw，它说它需要转换它，但是它说它不能加载 cvblobslib.dsp 然后将其删除。最后，它会打开一个空项目。

那么如何使用 Vc2010 Express 编译这个库呢？

如果 Express 无法做到这一点，有人可以发布编译后的 cvblobslib.lib 吗？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T15:57:55.333

我在这里找到了 cvblobslib.lib： [http](http://www.technical-recipes.com/2011/object-detection-using-the-opencv-cvblobslib-libraries/#comment-2906) ://www.technical-recipes.com/2011/object-detection-using-the-opencv-cvblobslib-libraries/#comment-2906 在教程的最后。

所以，我解决了我的问题。

无论如何，如果有人知道如何在 VC c++ 2010 Express 中编译 cvblobslib，它也可能很有用。

# php - 将日期插入mysql

> ID：14409081
> 
> 赞同：0
> 
> 时间：2013-01-18T23:05:42.227
> 
> 标签：php, mysql

> **可能重复：**
> [PHP mysql 插入日期格式](https://stackoverflow.com/questions/12120433/php-mysql-insert-date-format)

我正在尝试在我的 mysql 数据库中插入一个日期。问题是，例如，当我尝试保存 2013-01-18 时，它会像这样保存它：000-00-00。

```
$date = date("Y-m-d");
mysql_query("insert into events values('','$event','$notes','$date')"); 
```

我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T23:10:24.277

最好先转换成Unix时间戳，然后保存时间戳。排序等要容易得多。

至于您的问题：如果您真的想以这种方式保存它，那么您的列应该是“varchar”。

此外，不推荐使用 mysql_query。不要再使用它了，它将不再受支持。

# r - 用前导零填充到公共宽度

> ID：14409084
> 
> 赞同：28
> 
> 时间：2013-01-18T23:06:19.990
> 
> 标签：r

我正在处理一个小时格式的数据库，例如：

```
HOUR ID
1  2
10 4
5  6
20 6 
```

我想在具有 1 个字符的值中放置一个零并将它们存储在一个名为 NHOUR 的新列中，例如：

```
NHOUR HOUR ID
01 1  2
10 10 4
05 5 6
20 20 6 
```

到目前为止，我一直在努力解决类似的问题（我遵循论坛中已经为 ifelse 提供的一些建议）：

```
DB$NHOUR<-with(DB,ifelse(nchar(HOUR,type="chars")==1),sprintf("%02d",HOUR),as.numeric(HOUR)) 
```

但没有任何成功！R 总是报告“是”元素未指定等。

一如既往，感谢任何提示！

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-01-18T23:24:30.533

只需遵循@joran 评论中的建议，

```
DB <- data.frame(
HOUR  = c(1, 10, 5, 20),
ID  = c(2, 4, 6, 6))

NHOUR <- sprintf("%02d",DB$HOUR) # fix to 2 characters 

cbind(NHOUR, DB) # combine old and newdata 
  NHOUR HOUR ID
1    01    1  2
2    10   10  4
3    05    5  6
4    20   20  6 
```

**更新 2013-01-21 23:42:00Z**受到以下[daroczig 的性能测试的](https://stackoverflow.com/a/14409851/1305688)启发，并且因为我想尝试[microbenchmark 包](http://cran.r-project.org/web/packages/microbenchmark/)，我用我自己的一个小型性能测试更新了这个问题，比较了建议的三种不同解决方案这个线程。

```
# install.packages(c("microbenchmark", "stringr"), dependencies = TRUE)
require(microbenchmark)
require(stringr)

SPRINTF <- function(x) sprintf("%02d", x)
FORMATC <- function(x) formatC(x, width = 2,flag = 0)
STR_PAD <- function(x) str_pad(x, width=2, side="left", pad="0")

x <- round(runif(1e5)*10)
res <- microbenchmark(SPRINTF(x), STR_PAD(x), FORMATC(x), times = 15)

## Print results:
print(res)
Unit: milliseconds
        expr       min        lq    median        uq      max
1 FORMATC(x) 623.53785 629.69005 638.78667 671.22769 679.8790
2 SPRINTF(x)  34.35783  34.81807  35.04618  35.53696  37.1622
3 STR_PAD(x) 116.54969 118.41944 118.97363 120.05729 163.9664

### Plot results:
boxplot(res) 
```

![微基准测试结果的箱线图](../Images/0ace860bd755c50a78e54bb0dd8c168a.png)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-19T02:13:26.593

我喜欢使用这个`stringr`包：

```
DB$NHOUR <- str_pad(DB$HOUR, width=2, side="left", pad="0") 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-19T00:34:29.130

替代解决方案：

```
> formatC(DB$HOUR, width = 2,flag = 0)
[1] "01" "10" "05" "20" 
```

* * *

**更新：**我刚刚对性能问题进行了快速测试，只是为了记录这个问题

```
> library(microbenchmark)
> SPRINTF <- function(x) sprintf("%02d", x)
> FORMATC <- function(x) formatC(x, width = 2,flag = 0)
> x <- round(runif(1e5)*10)
> microbenchmark(SPRINTF(x), FORMATC(x), times = 10)
Unit: milliseconds
        expr       min        lq    median        uq      max
1 FORMATC(x) 688.35430 723.42458 767.06025 780.84768 878.4966
2 SPRINTF(x)  31.29167  31.96052  35.75735  40.54656 147.6805 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-07-27T22:33:59.587

与 类似`stringr`，有`stri_pad_left`从`stringi`

```
library(stringi)
stri_pad_left(str=DB$HOUR, 2, pad="0")
# [1] "01" "10" "05" "20" 
```

在速度方面应该几乎相同。右侧和两侧都有类似的填充功能。

# c# - 委托调用中断点击事件

> ID：14409085
> 
> 赞同：1
> 
> 时间：2013-01-18T23:06:19.967
> 
> 标签：c#, .net, delegates

我在一段复杂的代码中遇到了问题。似乎委托方法调用正在中断动态添加的按钮的单击事件。我还没有编写一个100％确定的基本示例，但看起来就是这样。

我们有一个包含用户控件的 .aspx 页面

```
<wachter:ViewEditTemplateControl ID="veSiteInfo" runat="server" Mode="View" EnableAjax="false" CanEditPermission="SiteInfoCanEdit">
                                <ViewButtonsTemplate>
                                 <asp:ImageButton ID="ibMap" CommandName="Map" ImageUrl="../Images/NavIcons/map.png" Visible="true" ToolTip="Site Map" runat="server" />
                                 <asp:ImageButton ID="ibtnSiteNotes" CommandName="SiteNotes"  ImageUrl="/Images/iconInfo.png" visible="false" ToolTip="Site Notes" runat="server"  />
                                 <asp:ImageButton ID="imgEdit" CommandName="Edit" ToolTip="Edit" runat="server" ImageUrl="/Images/iconEdit.png" />
                                </ViewButtonsTemplate>
                                <ViewTemplate>
                                    <uc1:SiteInformationView ID="SiteInformationView1" runat="server" />
                                </ViewTemplate>
                                <EditTemplate>
                                    <uc1:SiteInformationEdit ID="SiteInformationEdit1" runat="server" />
                                </EditTemplate>
                            </wachter:ViewEditTemplateControl> 
```

在 .aspx 的代码隐藏中，我们为 ViewTemplate 的用户控件设置了一个委托

```
protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);

        (veSiteInfo.FindControl("SiteInformationView1") as JobSiteViewControl).SiteChanged += SiteChanged;
    } 
```

此委托用于设置我们的编辑按钮 imgEdit 的可见性。

ViewEditTemplateControl 在代码隐藏中包含一些代码，可动态添加保存/编辑按钮

```
Button btnSave = new Button();
            btnSave.ID = "btnSave";
            btnSave.Text = "Save";
            btnSave.CommandName = "Save";

            root.Controls.Add(btnSave);

            Button btnCancel = new Button();
            btnCancel.ID = "btnCancel";
            btnCancel.Text = "Cancel";
            btnCancel.CommandName = "Cancel";
            btnCancel.CausesValidation = false;

            root.Controls.Add(btnCancel); 
```

在 ViewTemplate 的代码隐藏中，我们在页面初始化时调用此委托。

```
public Action<JobSiteEntity> SiteChanged;

public override void InitControl() 
{

    if (SiteChanged != null)
            SiteChanged(DataItemTyped); 
} 
```

问题是单击动态添加的 btnCancel 会触发委托，但不会触发它的事件处理程序。

如果我注释掉设置委托，按钮的事件处理程序就会被命中。

我知道我的代码片段不是最好的，但任何想法都会受到赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:09:59.157

不是最好的解决方案，但我最终删除了委托调用并直接访问了基本页面上的方法。

```
if (Page is IJobEntityPage)
        {
            ((IJobEntityPage)Page).SetEditVisibility(DataItemTyped);
        } 
```

# refresh - 使用动态数据预填充 PowerPoint Deck

> ID：14409096
> 
> 赞同：0
> 
> 时间：2013-01-18T23:07:52.940
> 
> 标签：refresh, powerpoint, dynamic-data

我需要构建一个在创建时预先填充的 PowerPoint 模板/演示文稿。一些幻灯片将从 SQL 数据源获取表格数据。其他幻灯片具有必须从同一数据源刷新的“甘特”样式计划对象。

这是否可能仅使用 Microsoft 组件？一般来说，什么是好的方法？

# php - 如何重置结果集以便再次循环遍历它？

> ID：14409098
> 
> 赞同：0
> 
> 时间：2013-01-18T23:08:14.143
> 
> 标签：php, mysql

我想做这样的事情：

```
$select = "select some_fiels from some_table";

$result = mysql_query($select);

    if (mysql_num_rows($result) > 0 )
    {
               $rows = array();
               while($r = mysql_fetch_assoc($result))
               {
                 $rows[] = $r;
               }

               echo json_encode($rows);

               // THIS IN ORDER TO EXTRACT THE VARIABLE VALUE FOR USE LATER IN THE SCRIPT   
           while($row = mysql_fetch_assoc($result))
       {
        $creator_member_id = $row['creator_member_id'];
       }
    } 
```

但我不确定重置 $result 变量的最佳方法是什么。还是需要重新设置？我将值提取到 $creator_member_id 变量中的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T23:12:56.703

如果要保留以前的结果，只需将查询放入不同的数组中。

$result2 = mysql_query($select);

```
if (mysql_num_rows($result2) > 0 ) 
```

如果您解释了您尝试查询的内容，这将有所帮助，因为我认为您可能会做比实际需要做的更多的查询。

# linux - 从 shell 脚本中的文件中提取特定模式

> ID：14409099
> 
> 赞同：0
> 
> 时间：2013-01-18T23:08:15.793
> 
> 标签：linux, bash, shell, sed

我尝试从文件中提取特定模式。文件内容：

```
--------some other command in here----------
<tr>
<td>someWords</td>
<td>anotherWords</td>
</tr>
--------some other command in here-----------
the <tr>...</tr> patter occur again 
```

我尝试从文件中提取 tr 模式

在我写的shell脚本中：

读取输入

```
grep '<tr>\n<td>[A-Za-z0-9,<,>,/]</td>\n<td>[A-Za-z0-9,<,>,/]</td>\n</tr> 
```

但是，此命令不起作用。任何的想法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T23:12:49.430

```
 sed -n '/<tr>/,/<\/tr>/p' file 
```

见例子：

```
kent$  cat a                      
--------some other command in here----------
<tr>
<td>someWords</td>
<td>anotherWords</td>
</tr>
--------some other command in here-----------
the 
<tr>
<td>someOtherWords</td>
<td>anotherWords2</td>
</tr>

kent$  sed -n '/<tr>/,/<\/tr>/p' a
<tr>
<td>someWords</td>
<td>anotherWords</td>
</tr>
<tr>
<td>someOtherWords</td>
<td>anotherWords2</td>
</tr> 
```

# merge - 从 n 个排序数组中找到 k 个最小的数

> ID：14409100
> 
> 赞同：0
> 
> 时间：2013-01-18T23:08:26.120
> 
> 标签：merge, sorting

我有 n 个不同大小的排序数组。给 K i 需要找到前 k 个最小的数。
int a[] = {10,20,30,40};
诠释 b[]= {20,30,40};
诠释 c[] ={-10,0};

如果 k = 1 那么输出应该是一个数组 = {-10}, k=2 然后 op= {-10,0} k = 4 {-10,0,10,20,20}

我想到的想法：
1.维护一个最小堆，但是我需要扫描所有剩余数组的所有元素吗？
2\. 维护 op 大小为 K 的数组，然后扫描所有数组的所有元素，除非我们在数组 "op" 中遇到大于 max 的元素

如果我从专栏开始思考，有什么办法吗？

约束：合并所有数组并找到第一个 k 并不好，因为数组的大小可能很大，就像单个数组中的数百万个整数一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T23:11:11.950

使用基本合并（例如在合并排序中）将在 O(m) 时间内运行（其中 m 是元素的总数），并且您可以从那里选择前 k 个元素。

编辑：关于合并的修改后：

另一种解决方案是迭代 k 次，并找到每个数组的第一个元素的最小值（即，如果您有数组 [1、2、3、4、5]、[2、4、6] 和 [3 , 4, 7, 8]，你会找到 min(1, 2, 3)。将此最小值添加到您的解决方案数组（k 个最小整数）中，并将其从相应的数组中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T23:22:35.443

这可能会给你一个想法..

```
 List<int> new1 = new List<int>();
         List<int> testArr = new List<int>() { 10, 20, 30, 40 };
         List<int> testArr1 = new List<int>() { -10, 0 };
     int[] newArr=   testArr.Concat(testArr1).ToArray();

     var s1 = (from i in newArr
              orderby i ascending
              select i);
     foreach (var x in s1)
     {
         new1.Add(x);
     } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T23:17:27.113

另一种方法是像堆栈一样使用数组。您需要在每个数组中保存一个指向上次使用的最小值的指针，并在每次迭代时检查所有指针（在您的示例中为 3 个指针）。您需要进行 K 次迭代才能获得 K 值。

以下是 c# 上的示例代码：

```
 int[] a = new int[] {10,20,30,40};
 int[] b = new int[] {20,30,40};
 int[] c = new int[] {-10,0};

 Dictionary<object, int> dic = new Dictionary<object, int>();
 dic.Add(a, 0);
 dic.Add(b, 0);
 dic.Add(c, 0);

 int K = 4;

 for (int i = 0; i < K; i++)
 {
     var min = dic.Min(s => ((int[])s.Key)[s.Value]);
     var arr = dic.First(p => ((int[])p.Key)[p.Value] == min);
     int idx = arr.Value + 1;
     dic.Remove(arr.Key);
     if (((int[])arr.Key).Length > idx)
         dic.Add(arr.Key, idx);
     Console.WriteLine(min);
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T23:10:22.577

一种方法是

使用 将所有已排序的数组收敛为一个已排序的数组，然后答案是新数组开头的 k 个元素。为此，您可以通过从开始维护每个数组的索引并在该数组中的元素被推入结果数组时递增它们来实现。我已经为两个数组做了这个，你可以进一步使用它。

添加约束后编辑：遍历所有数组，如果任何数组的长度> k，则截断为长度 k（如果每个数组都是一个大数组，这可能是一个很好的折衷）

```
// Find K largest numbers in two sorted arrays
//Returns 0 on success and -1 in failure and c contains the resulting array

int k_largest(a, b, c, k) {
    int a_len = a.length;
    int b_len = b.length;
    if (a_len + b_len < k) return -1;
    int i = 0;
    int j = 0;
    int m = 0;

if(a[k] < b[0])
c=a;
else if (b[k] < a[0])
c=b;

/* (i<k) test below is to discard the rest of the elements of the arrays ,
using the sorted property of array */

    while (i < k && j < a_len && m < b_len) {
        if (a[j] < b[m]) {
            c[i] = a[j];
            i++;
            j++;
        } else {
            c[i] = b[m];
            i++;
            m++;
        }
    }

    if (i === k) {
        return 0;
    } else if (j < a_len) {
        while (i < k) {
            c[i++] = b[m++];
        }
    } else {
        while (i < k) c[i++] = a[j++];
    }
    return 0;
} 
```

使用 a = 结果数组和 b = 第三个数组再次执行此操作，依此类推

# sql - Sql获取表中的所有孩子

> ID：14409101
> 
> 赞同：3
> 
> 时间：2013-01-18T23:08:37.407
> 
> 标签：sql, sql-server, sql-server-2008

我有一个名为 tblmodules 的表，它有 3 列：moduleid、name、parent_id。parent_id 列采用其他模块的值。前任：

```
Moduleid      Name       Parentid
--------     -----       --------
1           grandparent    Null
2            parent         1
3           child           2
4           childofChild    3 
```

如果我将存储过程作为祖父母的参数，我想构建一个存储过程来获取所有孩子。对于上面的例子，我不只想要（父母），但我想要孩子和孩子的孩子，因为他们在祖父母之下。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T23:13:55.490

您需要[递归 CTE](http://msdn.microsoft.com/en-gb/library/ms186243%28v=sql.105%29.aspx)

```
CREATE PROC YourProc 
@ModuleId INT
AS
    WITH R
         AS (SELECT *
             FROM   YourTable
             WHERE  Moduleid = @ModuleId
             UNION ALL
             SELECT Y.*
             FROM   YourTable Y
                    JOIN R
                      ON R.Moduleid = Y.Parentid)
    SELECT *
    FROM   R 
```

[SQL小提琴](http://www.sqlfiddle.com/#!6/86810/1)

# c# - 如何从异步方法写入的 Stream 中读取

> ID：14409102
> 
> 赞同：0
> 
> 时间：2013-01-18T23:08:47.493
> 
> 标签：c#, .net

我有一个从 FTP 下载文件的功能，具有以下签名：

```
BeginDownloadFile(string path, Stream ouputStream); 
```

此函数异步下载文件并将数据存储在*outputStream*中。

在另一种方法中，我需要立即读取*ouputStream*流上的可用字节。

例如，如果`BeginDownloadFile`存储了 500 个字节，`ouputStream`我需要将其读取到缓冲区（以另一种方法）并用这些字节做一些逻辑等等。

所以理论上什么时候`BeginDownloadFile`将最后一部分字节写入`outputStream`我的方法也应该读取最后一部分。

我等不及`BeginDownloadFile`要下载所有文件了。我正在使用.net 4。

感谢帮助

# mysql - mysql复杂连接与许多可能具有空值的表

> ID：14409106
> 
> 赞同：0
> 
> 时间：2013-01-18T23:09:22.737
> 
> 标签：mysql, sql

我有多个存储数据的表。

**DNS 表**包含

```
tld(id) | 2ld(id) | 3ld(id) | IPAddress
101     | 33      | 3       | 203.11.1.19 
```

（示例值）

我有dnstld**表**

```
id(index) | value(char)
101       | 'com' 
```

（示例值）

同样**dns2ld, dns3ld**。

例如，dns2ld 包含 (33,'marriot')，dns3ld 包含 (3,'australia')。

我可以轻松地将这些表与内部连接连接起来

```
INNER JOIN dns2ld ON dns.2ld=dns2ld.id 
INNER JOIN dnstld ON dns.tld=dnstld.id 
INNER JOIN dns3ld ON dns.3ld=dns3ld.id 
```

但是我有**另一个表**，其中包含列入黑名单的域

```
id(uniq) | 3ld(char) | 2ld(char) | tld(char) 
```

如何加入这 5 个表，以便列出与黑名单匹配的 DNS 表中的内容。注意黑名单中的 3ld 可能为 NULL，2ld 可能为 NULL，但 tld 不能为 null。

我可能有许多域在黑名单中，但不在 dns 表中，因此在 dns2ld、dns2ld 和 dns3ld 表中未识别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T00:11:18.490

严格来说，您可能不需要`Blacklist.id`.

假设您想按层次结构列出事物（即，如果未指定第二级，则第三级也不能），我相信以下应该有效：

```
SELECT DNS.ipAddress, tld.value, 2ld.value, 3ld.value
FROM Blacklist bl
JOIN DNS 
  ON dns.tld = bl.tld
     AND ((dns.2ld IS NULL AND bl.2ld IS NULL)
          OR (dns.2ld = bl.2ld))
     AND ((dns.3ld IS NULL AND bl.3ld IS NULL)
          OR (dns.2ld IS NOT NULL AND dns.3ld = bl.3ld))
JOIN DnsTld tld
  ON tld.id = bl.tld
LEFT JOIN Dns2ld 2ld
       ON 2ld.id = bl.2ld
LEFT JOIN Dns3ld 3ld
       ON 3ld.id = bl.3ld 
```

嗯，以后你是不是觉得不能这么用缩写了？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T13:43:23.457

为了找到列入黑名单的 dns 表中的条目*，*此查询应该有效：

```
SELECT DISTINCT dns.IPAddress, dns3ld.value, dns2ld.value, dnstld.value
FROM dns
INNER JOIN dnstld ON dnstld.id = dns.tld
INNER JOIN dns2ld ON dns2ld.id = dns.2ld
INNER JOIN dns3ld ON dns3ld.id = dns.3ld
INNER JOIN blacklist bl
ON bl.tld = dnstld.value
   AND (bl.2ld IS NULL
        OR b1.2ld = dns2ld.value
           AND (bl.3ld IS NULL
                OR bl.3ld = dns3ld.value)) 
```

# php - 从 1 到 MAX 的对数序列

> ID：14409108
> 
> 赞同：0
> 
> 时间：2013-01-18T23:09:33.683
> 
> 标签：php, math

我想计算一个从 1 到 MAX 的对数范围，数字的近似总数为 TOTAL。

一个非对数的例子可能是：

```
$max = 3600;
$total = 100;

$range = array();
for($i = $total; $i > 0; $i--){
  $range[] = round($max/$i);
} 
```

然而，这会创建一个大致均匀分布的范围。我希望该范围在开始时拥有大部分数字，而在结束时数量较少 - 通过对数刻度。值的总数不是一个严格的限制，只是一个估计。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T11:54:00.650

关于对数刻度的有趣之处在于，`$range`数组的元素（这些是`x`您以后可能用来计算函数值的值`fct(x)`）实际上具有指数行为，而不是对数行为。如果您查看此[Wikipedia 图像](http://en.wikipedia.org/wiki/File%3aLogLogPlot_of_Line.GIF)，您会看到轴刻度是 10^1、10^2、10^3 等 - 这是指数增长（我说的是轴刻度，而不是函数本身！） .

要生成它，请使用

```
$max = 3600;
$total = 100;

$range = array();
for($i = 0; $i < $total; $i++) {
  $range[] = pow($max,$i/($total - 1));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T23:19:41.480

在这里使用[PDL](http://www.phpmath.com/home)似乎是你最好的选择：

```
require_once '../LognormalDistribution.php'; 
require_once 'make_table.php'; 

$mu     = 0.0;
$sigma  = 1.0;

$lognormal = new LognormalDistribution($mu, $sigma);

$Output1 = $lognormal->PDF(.2); 
$Output2 = $lognormal->ICDF(0.95); 
$Output3 = $lognormal->CDF(.50); 
```

希望有帮助...

# asp.net-mvc - MVC .NET 4 MapRoute + ActionLink 或 RouteLink 问题

> ID：14409112
> 
> 赞同：0
> 
> 时间：2013-01-18T23:10:07.277
> 
> 标签：asp.net-mvc, actionlink, maproute

好的，这就是交易。我有一个名为“Hotel”的控制器，其视图名为“Index”，我正在尝试生成代码，允许我生成以下形式的链接：

```
../Hotel?id=1 
```

ID 作为参数传递。为此，我尝试使用 MapRoute：

```
@Html.RouteCollection.MapRoute("Hotel", "../{controller}/{id}", new { controller = "hotel" }); 
```

与 ActionLink 一起使用：

```
@Html.ActionLink("More >>>", "", "Hotel", new { id = item.HotelId }, null) 
```

但是结果链接是这样的：

```
Hotel/Index/1 
```

这会导致正确的位置，但会破坏我网站上所有链接的视觉一致性。我也尝试过 RouteLink，但没有成功。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T03:34:19.820

您想让应用程序中的*所有*链接对名为“id”的参数使用标准查询字符串格式吗？如果是这样，从“默认”路由中的 url 和默认对象中删除 {id} 应该可以为您做到这一点。

如果您想将其限制为“酒店”控制器，那么您就在使用自定义路线的正确轨道上。首先，确保自定义路由出现*在*默认路由定义之前，其次，在控制器/操作之外定义它，例如：

```
routes.MapRoute(
            "HotelRoute", // Route name
            "Hotel/{action}/", // URL with parameters
            new { controller="Hotel", action = "Index" } // Parameter defaults
        ); 
```

然后，您传入的任何参数都应作为名称/值对附加到查询字符串中。

# java - java jface将参数传递给向导

> ID：14409117
> 
> 赞同：0
> 
> 时间：2013-01-18T23:10:27.237
> 
> 标签：java, parameter-passing, jface

在我继续感谢之前的帮助之前。

我现在想尝试的是将现有参数传递给 jface 向导。我不知道这是否可能。如果有人做过，能否给点建议。

原因是我需要在新向导中使用一个参数。

在此先感谢基思

# c# - 无法将 .bmp 图像从 ASP.NET 保存到服务器

> ID：14409120
> 
> 赞同：0
> 
> 时间：2013-01-18T23:10:39.583
> 
> 标签：c#, asp.net, iis-7, windows-server-2008, gdi

在一个 ASP.net (C#) Web 应用程序中，我使用 HTML 5 画布和 java 脚本创建了一个签名板。我们正在使用触摸设备（Android 和 iOS）捕获签名。

签名完成后，它将数据从画布发送到服务器，我将其转换为 .bmp 图像，并使用 Bitmap.Save(location, Format) 将其保存到服务器根程序目录上名为签名文件的目录中. 到目前为止，这已经为几个客户工作了好几个月。

不幸的是，我目前正在捕获异常但没有将它们发送到任何地方（我目前正在纠正的巨大错误）。如果必须，我将使用一些异常输出重新编译代码，以便我可以获得更多信息，但由于它是一个新客户端，我希望能够尽快修复这个问题，并且代码已经运行了很长时间没有问题，我很乐观，它是一个服务器设置。

IIS7 或 Windows Server 2008 中是否存在可能阻止应用程序将文件保存到服务器的安全设置。如果不是，则可能需要在服务器上安装某些东西以允许以下操作：

```
byte[] imageBytes = Convert.FromBase64String(suffix);

MemoryStream ms = new MemoryStream(imageBytes, 0, imageBytes.Length);

ms.Write(imageBytes, 0, imageBytes.Length);

string thePath = Path.GetDirectoryName(saveLocation);

FileStream fs = new FileStream(thePath + @"\image.png", FileMode.Create);

BinaryWriter bw = new BinaryWriter(fs);

bw.Write(imageBytes);

bw.Close();

    if (string.IsNullOrEmpty(Path.GetFileName(saveLocation)))
        {

            string filename = Path.GetRandomFileName();
            filename = filename.Substring(0, filename.IndexOf('.'));
            filename = filename + Path.GetRandomFileName();
            filename = filename.Substring(0, filename.IndexOf('.'));

            theSaveLocation = saveLocation + @"\" + filename + "." + format;
        }

        ms = new MemoryStream();

        Bitmap input = (Bitmap)Bitmap.FromFile(thePath + @"\image.png");

        Bitmap result = ProcessBitmap(input, Color.White);

    result = (Bitmap)resizeImage((System.Drawing.Image)result, size);

    result.Save(theSaveLocation, System.Drawing.Imaging.ImageFormat.Bmp);

    input.Dispose();
        result.Dispose();
        ms.Close(); 
```

这是我上面使用的流程位图函数

```
private Bitmap ProcessBitmap(Bitmap bitmap, Color color)
{
    Bitmap temp = new Bitmap(bitmap.Width, bitmap.Height, System.Drawing.Imaging.PixelFormat.Format24bppRgb);
    Graphics g = Graphics.FromImage(temp);
    g.Clear(color);
    g.DrawImage(bitmap, Point.Empty);
    return temp;
} 
```

这是我在上面使用的 resizeImage 函数：

```
private static System.Drawing.Image resizeImage(System.Drawing.Image imgToResize, Size size)
{

    int sourceWidth = imgToResize.Width;
    int sourceHeight = imgToResize.Height;

    float nPercent = 0;
    float nPercentW = 0;
    float nPercentH = 0;

    nPercentW = ((float)size.Width / (float)sourceWidth);
    nPercentH = ((float)size.Height / (float)sourceHeight);

    if (nPercentH < nPercentW)
        nPercent = nPercentH;
    else
        nPercent = nPercentW;

    int destWidth = (int)(sourceWidth * nPercent);
    int destHeight = (int)(sourceHeight * nPercent);

    Bitmap b = new Bitmap(destWidth, destHeight);
    Graphics g = Graphics.FromImage((System.Drawing.Image)b);

    g.DrawImage(imgToResize, 0, 0, destWidth, destHeight);
    g.Dispose();

    return (System.Drawing.Image)b;
} 
```

# php - 如何在 Json 中解码以下代码？

> ID：14409123
> 
> 赞同：0
> 
> 时间：2013-01-18T23:10:52.010
> 
> 标签：php, json

我正在尝试使用 php json_decode 函数解码以下 JSON。

[{"total_count":17}]

我认为输出中的方括号阻止了它。我该如何解决？我无法控制输出，因为它来自 Facebook FQL 查询：

[https://api.facebook.com/method/fql.query?format=json&query=SELECT%20total_count%20FROM%20link_stat%20WHERE%20url=%22http://www.apple.com%22](https://api.facebook.com/method/fql.query?format=json&query=SELECT%20total_count%20FROM%20link_stat%20WHERE%20url=%22http://www.apple.com%22)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T23:25:30.993

PHP 的[json_decode](http://php.net/manual/en/function.json-decode.php)默认返回一个 stdClass 的实例。

对你来说，处理数组可能更容易。您可以强制 PHP 返回数组，作为 json_decode 的第二个参数：

```
$var = json_decode('[{"total_count":17}]', true); 
```

之后，您可以访问该变量`$result[0]['total_count']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T23:22:17.867

有关如何阅读它的示例，请参见此 JS fiddle：

[http://jsfiddle.net/8V4qP/1](http://jsfiddle.net/8V4qP/1)

它与 PHP 的代码基本相同，除了您需要将 true 作为第二个参数传递给[json_decode](http://php.net/manual/en/function.json-decode.php)以告诉 php 您要将其用作关联数组而不是实际对象：

```
<?php
    $result = json_decode('[{"total_count":17}]', true);
    print $result[0]['total_count'];
?> 
```

如果您不传递 true，则必须像这样访问它：`$result[0]->total_count`因为它是一个包含对象的数组，而不是包含数组的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T23:27:37.453

```
$json = "[{\"total_count\":17}]";

$arr = Jason_decode($json);
foreach ($arr as $obj) {
    echo $obj->total_count . "<br>";
} 
```

或者`json_decode($json, true)`，如果您想要关联数组而不是对象，请使用。

# php - 如何仅在选择第一个选择列表后调用/激活第二个选择列表？

> ID：14409128
> 
> 赞同：0
> 
> 时间：2013-01-18T23:11:17.123
> 
> 标签：php, jquery, html

我有以下选择列表：

选择列表 1：

```
<select name="productcolor" id="productcolor" onChange="GetAvailProductSizes();">
    <option value=""><? echo $langdata['oneprodpage_selectcolor']; ?>...</option>
    <? foreach ($thisproduct['availcolors'] as $color) { ?>
    <option value="<? echo $color['id']; ?>"><? echo $color['name']; ?></option>
    <? }; ?>
</select> 
```

选择清单 2：

```
<select name="productsize" id="productsize" style="width: 120px;">
<option value=""><? echo $langdata['oneprodpage_selectsize']; ?>...</option>
</select> 
```

如果在 LIST 1 中没有选择任何选项，则 LIST 2 将为空。就像 LIST 2 取决于 LIST 1。

这是用这个功能做的：

```
<script type="text/javascript"><!--
    function GetAvailProductSizes() {
        $('select#productsize option').remove();
        $('select#productsize').append('<option value=""><? echo $langdata['oneprodpage_selectsize']; ?>...</option>');

        var color = $('#productcolor').val();
        if (color > 0) {
            var availsizes;
            var http_request = new XMLHttpRequest();
            http_request.open( "GET", '<? echo ROOT; ?>/autocompleteavailsizes/?productid=<? echo $thisproduct['id']; ?>&color=' + color, true );
            http_request.send(null);
            http_request.onreadystatechange = function () {
                if ( http_request.readyState == 4 ) {
                    if ( http_request.status == 200 ) {
                        availsizes = eval( "(" + http_request.responseText + ")" );

                        for (var i = 0; i < availsizes.length; i++) {
                            $('select#productsize').append('<option value="' + availsizes[i].id + '">' + availsizes[i].name + '</option>');
                        };
                    } else {
                        alert( "There was a problem with the URL." );
                    }
                    http_request = null;
                }
            };
        };
    }
//-->
</script> 
```

现在，我希望隐藏 SELECT LIST 2 直到 SELECT LIST 1 未被触及。任何有关 PHP 或 jQuery 的帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T23:27:37.203

只需添加`display:none`到`style`第二个列表的属性并`$('select#productsize').show();`在你的函数中使用让它出现，

# jquery - 如何使用 jQuery 淡出按钮的文本？

> ID：14409132
> 
> 赞同：0
> 
> 时间：2013-01-18T23:11:44.017
> 
> 标签：jquery, html, button

我有以下按钮，我想淡出文本。我不想淡出按钮，只是其中的文本。我该怎么做？

到目前为止：

```
$('#name').click(function(){
    //Fade out text
   }); 
```

标记：

```
 <button id="name" type="submit" class="btn btn-large">Next >></button> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T23:18:32.353

好像您正在使用 twitter 引导程序。在这种情况下，使用`<a>`代替`<button>`

像这样的东西：

```
<a href="#" id="name" class="btn btn-large"><span id="fade">Next</span></a> 
```

然后你可以淡出跨度：

```
$("#fade").fadeOut("slow") 
```

jsfiddle：[jsfiddle](http://jsfiddle.net/MgcDU/1392/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T23:15:22.033

我建议将文本的颜色更改为按钮的颜色...

```
$('#name').click(function(){
   $(this).css('color', 'red');
}); 
```

因为淡出文本是不可能的......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T23:41:15.750

您可以使用[jQuery Color 插件](https://github.com/jquery/jquery-color)将颜色从原始颜色更改为“透明”。

### HTML

```
<button id="submit_button">Next >></button> 
```

### CSS

```
#submit_button {
    color: #000;
} 
```

### Javascript

```
$(document).ready(function(){
    $('#submit_button').click(function(){
        $(this).animate({
            color: 'transparent'    
        },1000);
    });
}); 
```

这是一个 jsFiddle 作为说明：http: [//jsfiddle.net/5p2cH/3/](http://jsfiddle.net/5p2cH/3/)

# magento - Magento 资源和 API 数据源

> ID：14409138
> 
> 赞同：2
> 
> 时间：2013-01-18T23:12:16.587
> 
> 标签：magento

由于我经常使用第三方 API，我认为创建一些 Magento 模块以实现轻松连接和查询它们会很有帮助。理想情况下，您可以像这样查询 API...

```
$data = Mage::getModel( 'tools/apixyz_list' )->getCollection(); 
```

它会为其中一个列表项实例化一个模型，然后尝试通过查询 API 来获取它们的集合。这将需要在资源模型和 API 之间的配置中进行某种连接，这就是我遇到一些麻烦的地方。

有推荐的方法吗？我很难找到有关该主题的任何内容，但考虑到通常需要从项目到项目集成的 API 数量，我觉得这应该是一个非常普遍的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T00:29:24.977

是的！我实际上是为 Recurly 构建的——我试图让它开源，但它还没有开放。这是 load() 方法的一个片段，它是它的核心。

```
// TBT_Recurly_Model_Resource_Recurly_Abstract_Collection
public function load($printQuery = false, $logQuery = false)
{
    if ($this->isLoaded()) {
        return $this;
    }

    if ($this->_isCached()) {
        return $this->_loadCache();
    }

    $this->_beforeLoad();
    $this->_renderFilters()
        ->_renderOrders()
        ->_renderLimit();
    $this->clear();

    try {
        # This is ultimately doing the API call
        $recurly_list = $this->_getListSafe();
    } catch (Recurly_Error $e) {
        Mage::logException($e);
        $this->setConnectionError($e->getMessage());
        return $this;
    }

    foreach ($recurly_list as $recurly_item)
    {
        $item = $this->getNewEmptyItem();
        $item->getResource()->setDataOnObject($item, $recurly_item);

        // Recurly appears to sometimes return duplicate subscription items in it's list response.
        if (!isset($this->_items[$item->getId()])) {
            $this->addItem($item);
        }
    }
    $this->_afterLoadRecurly();

    // We have to setIsLoaded before we saveCache b/c otherwise it will infinite loop
    $this->_setIsLoaded();
    $this->_saveCache();
    $this->_afterLoad();
    return $this;
} 
```

我们实际上最终采用了这个并将它放入一个基本的 REST 类中，这真的很酷，因为它最终很容易在它之上实现新的 REST API。

就最佳实践而言，我不确定我是否具体回答了您的问题。但基本上我认为要让它干净的主要事情是：

*   按照 Magento 模型/集合方法签名进行查询。
*   实现缓存
*   在资源模型层实现API通信

# android - 为什么我的应用程序在设备上的大小与 APK 或 Play 商店的大小不同

> ID：14409139
> 
> 赞同：13
> 
> 时间：2013-01-18T23:12:17.747
> 
> 标签：android, size, apk

我有一个来自用户的非常有效的问题，我无法深入了解为什么 Google Play 商店报告的大小与设备上报告的大小不同。我在 PC 上签名的发行版 APK 大小为 3.8MB。上传到 Google Play 会显示类似的大小。然而，查看设备上的应用程序管理器会显示以下统计信息：

```
Total: 6.62MB
App:   6.51MB
Data:   112KB 
```

这与启用 Google Play 的复制保护无关（正如其他类似问题所暗示的那样），因为我在安装签名的 APK 或开发 APK 时获得了相同的统计信息。

手机上 /data/app 下的 APK 又是 3.8MB，而 /data/data/com.my.app 下的文件又是 100KB 左右（大概是上面的“数据”行）。

是什么导致了统计数据的差异？

编辑：进一步研究，这是我设备上许多应用程序的共同功能。Google Play 报告一种尺寸，而设备报告的尺寸通常是 2 倍大。很高兴知道它可能不是我正在做的事情，但仍然很好奇这里的推理是什么，因为它被用户指责“篡改”安装大小显得更小令人沮丧！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-23T20:04:09.863

在android系统中安装APK时，安装的是DEX文件。其中包含编译为二进制文件的代码、资源等。您的 dex 通常与您的 apk 大小相同，除非您有未在资产中编译的资源。

好吧，我们都知道。没有广泛传播的是android也保存了你原来的apk。也许是为了在出现错误或其他原因时重新安装。

这就是为什么我们的应用程序的内存量是系统的两倍。它是原始 apk 和安装的 dex 大小的总和。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-19T11:24:10.370

它就像所有其他软件应用程序一样，最初将被压缩并作为单个文件进行安装，并且在安装时，它将提取手机中的所有文件（代码、资产，即图像等）。这就是为什么您的应用在安装到手机后会占用更多内存的原因。

为了防止这种情况发生，请将您的应用程序设置为服务器端并请求 Internet 的强制许可，以便您可以发送数据而不会为应用程序消耗更多内存。

# ruby - 控制器规范的 DRY rspec 语法

> ID：14409141
> 
> 赞同：0
> 
> 时间：2013-01-18T23:12:25.810
> 
> 标签：ruby, ruby-on-rails-3, rspec, tdd, dry

通常在我的控制器规格中，我会做这样的事情：

```
describe MyController do
  describe 'POST #create' do
    let!(:my_model) { initialize_something_here }

    before :each do
      post :create, my_model: my_model
    end

    it 'should be successful' do
      response.should be_successful
    end

    ... more tests ...
  end
end 
```

我的问题是，当我执行使用块的断言时，`expect`例如检查数据库中的项目计数是否在 a 之后增加`create`，我必须`post`从块中删除调用`before :each`，如下所示并为每个`it`语句重复它：

```
describe MyController do
  describe 'POST #create' do
    let!(:my_model) { initialize_something_here }

      it 'should insert into database' do
        expect { post :create, my_model: my_model }.to change(MyModel, :count).by(1)
      end

      it 'should be successful' do
        post :create, my_model: my_model
        response.should be_successful
      end

      ... more tests ...
    end
  end 
```

有没有一种 DRY-er 的方式来`post`拨打电话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T23:47:03.873

我相信您可以在 let 中使用 lambda

```
 let(:post_create_model) { -> { post :create, my_model }}

  it 'should insert into database' do
     expect(post_create_model).to change(MyModel, :count).by(1)
  end

  it 'should be successful' do
    post_create_model.call
    response.should be_successful
  end 
```

# mysql - 如何在mysql中复制行并生成不重复的ID

> ID：14409149
> 
> 赞同：0
> 
> 时间：2013-01-18T23:13:09.167
> 
> 标签：mysql, duplicates

我正在使用 mysql，需要复制表中的所有行，但我不复制 id 列，并且新生成的编号需要 ex。

我的桌子

```
 item_db             
+------------------------------------------+    
|  id  |  name      |  price  | detail  | 
+------------------------------------------+
|   1  |  example   |    230  |         3  | 
|   2  |  power     |    110  |         3  | 
|   3  |  voltage   |    1.2  |         4  | 
|   4  |  example   |    240  |         4  | 
|   5  |  example   |    320  |         6  | 
|   6  |  power     |    100  |         4  | 
|   7  |  power     |    110  |         6  | 
|   8  |  example   |    230  |         3  | 
|   9  |  power     |    110  |         3  | 
|   10 |  voltage   |    1.2  |         4  | 
|   20  |  example  |    240  |         4  | 
|   21  |  example  |    320  |         6  | 
|   22  |  power    |    100  |         4  | 
|   23  |  power    |    110  |         6  | 
|   24  |  example  |    240  |         4  | 
|   25  |  example  |    320  |         6  | 
|   26  |  power    |    100  |         4  | 
|   27  |  power    |    110  |         6  | 
|   28  |  example  |    240  |         4  | 
|   29  |  example  |    320  |         6  | 
|   30  |  power    |    100  |         4  | 
+------------------------------------------+ 
```

我需要复制

```
 item_db             
+------------------------------------------+    
|  id  |  name      |  price  | detail  | 
+------------------------------------------+
|   1  |  example   |    230  |         3  | 
|   2  |  power     |    110  |         3  | 
|   3  |  voltage   |    1.2  |         4  | 
|   4  |  example   |    240  |         4  | I need to dup id 1-10 to 101-110
|   5  |  example   |    320  |         6  | 
|   6  |  power     |    100  |         4  | 
|   7  |  power     |    110  |         6  | 
|   8  |  example   |    230  |         3  | 
|   9  |  power     |    110  |         3  | 
|   10 |  voltage   |    1.2  |         4  | 
|   101|  example   |    230  |         3  | 
|   102|  power     |    110  |         3  | 
|   103|  voltage   |    1.2  |         4  | 
|   104|  example   |    240  |         4  | 
|   105|  example   |    320  |         6  | 
|   106|  power     |    100  |         4  | 
|   107|  power     |    110  |         6  | 
|   108|  example   |    230  |         3  | 
|   109|  power     |    110  |         3  | 
|   110|  voltage   |    1.2  |         4  | 
|   20 |  example  |    240  |         4  | 
|   21 |  example  |    320  |         6  | 
|   22 |  power    |    100  |         4  | 
|   23 |  power    |    110  |         6  | 
|   24 |  example  |    240  |         4  | 
|   25 |  example  |    320  |         6  | 
|   26 |  power    |    100  |         4  | i need to dup 20-30 to 200-210
|   27 |  power    |    110  |         6  | 
|   28 |  example  |    240  |         4  | 
|   29 |  example  |    320  |         6  | 
|   30 |  power    |    100  |         4  |
|   200|  example  |    240  |         4  | 
|   201|  example  |    320  |         6  | 
|   202|  power    |    100  |         4  | 
|   203|  power    |    110  |         6  | 
|   204|  example  |    240  |         4  | 
|   205|  example  |    320  |         6  | 
|   206|  power    |    100  |         4  | 
|   207|  power    |    110  |         6  | 
|   208|  example  |    240  |         4  | 
|   209|  example  |    320  |         6  | 
|   210|  power    |    100  |         4  |  
+------------------------------------------+ 
```

谢谢专家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T23:17:18.990

您可以使用[`INSERT ... SELECT`](http://dev.mysql.com/doc/en/insert-select.html)：

```
INSERT INTO item_db (id, name, price, detail)
SELECT id+180, name, price, detail FROM item_db WHERE id BETWEEN 20 AND 30 
```

您究竟想如何治疗`id`并不完全清楚。例如，如果您希望自动分配值，那么您可以（像往常一样）从语句中`AUTO_INCREMENT`省略它。`INSERT`

# c# - 避免将未更改的变量传递到库中

> ID：14409150
> 
> 赞同：0
> 
> 时间：2013-01-18T23:13:09.680
> 
> 标签：c#, parameters, refactoring

我正在制作一个库，它将执行读取进程内存并从所述进程获取信息的操作。

我遇到的问题是，要调用函数，我每次都必须传递很多变量，即使它们的值没有改变。

例如，`ReadProcessMemory`要求我通过：

*   进程句柄
*   内存地址
*   主模块基地址
*   要读取的字节数

每次读取唯一会改变的是内存地址，所以我真的不需要每次调用函数时都传递其余的变量（我实际上有 3 个可以通过这种方式减少的函数，并且可能很快就会有更多）。

谁能给我一个简短的解释，我应该如何去做？变量会在运行时存在，所以我可以直接从 DLL 文件中调用函数并使用它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T23:17:06.743

调用带有可选参数的方法时，可以使用命名参数。

```
public void MyMethod(string s = null, int i = 0, MyType t = null)
{ 
    /* body */ 
} 
```

像这样称呼它：

```
MyMethod(i: 10, t: new MyType());
MyMethod("abc");
MyMethod("abc", t: new MyType()); 
```

或者，您可以使用重载：

```
public void MyMethod(string s)
{
    MyMethod(s, 0, null);
}
public void MyMethod(int i)
{
    MyMethod(null, i, null);
}
public void MyMethod(MyType t)
{
    MyMethod(null, 0, t);
}
public void MyMethod(string s = null, int i = 0, MyType t = null)
{ 
    /* body */ 
} 
```

另一种选择是使用像这样的参数类：

```
public class MyParametersClass
{
    public string s { get; set; }
    public int i { get; set; }
    public MyType t { get;set; }

    public MyParametersClass()
    {
        // set defaults
        s = null;
        i = 0;
        MyType = null;
    }
}

public void MyMethod(MyParametersClass c)
{ 
    /* body */ 
} 
```

像这样调用：

```
MyMethod(new MyParametersClass 
{
    i = 25,
    t = new MyType()
}); 
```

使用参数类可能是您的首选方法。参数类可以在您处理您正在处理的任何内容时随身携带。:) 对其所做的任何更改都不会丢失...

```
var parameters = new MyParametersClass();
MyMethod(parameters);
parameters.i = 26;
MyMethod(parameters); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T23:19:13.017

一种方法是将方法调用转换为对象并将参数缓存在此类对象中。称为[重构为“方法对象”](http://sourcemaking.com/refactoring/replace-method-with-method-object)。

近似样本（Tx - 是一些类型）：

```
 int My.ReadProcessMemory(T1 a1, T2 a2, T3 variable)
 {...}

 class ReadProcessMemory
 {
      T1 a1;
      T2 a2;
      public ReadProcessMemory(T1 a1, T2 a2)
      {
         this.a1 = a1;
         this.a2 = a2;
      }
      public int Run(T3 variable)
      {
         return My.ReadProcessMemory(a1, a2, variable);
      }
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T23:21:00.043

为此编写一个包装类...将变量设置为“新事物（...）”的属性或参数，然后后续调用是thing.Read（MemoryAddress）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T23:21:31.863

除了使用命名参数之外，您还需要以某种方式将不会更改的值存储在库中。

如果这些只是运行时变量，那么您可以只使用类变量（如果您的库是类）或静态变量（如果不是）。但是，这确实意味着您的库正在存储系统的状态，并且必须验证该状态在每次调用时仍然有效。

要求在每次调用中传递值实际上是一个更简洁的接口，并强制库的用户以一致的方式工作。

# input - 清除输入字段 onfocus

> ID：14409155
> 
> 赞同：0
> 
> 时间：2013-01-18T23:13:29.847
> 
> 标签：input, text, onblur, onfocus

我在创建几个函数以清除输入字段 onfocus 并将其重置为默认文本 onblur（如果它为空）时遇到问题。它可以正常工作，直到您更改一些文本然后退格出来。

我的职能是：

```
function enterField (id, defaultText) {
   if (document.getElementById(id).value == defaultText) {
      document.getElementById(id).setAttribute("value", "");
      document.getElementById(id).style.color = "#000000";
   }
}

function leaveField (id, defaultText) {
   if (document.getElementById(id).value == "" || document.getElementById(id).value == defaultText) {
      document.getElementById(id).setAttribute("value", defaultText);
      document.getElementById(id).style.color = "#dddddd";
  }
} 
```

我的html是：

```
<table style="width: 464px; margin-right: -7px; margin-left: -7px; table-layout: fixed;" cellpadding="0" cellspacing="8">
    <tr>
        <td class="input"><input id="name" type="text" class="name" size="32" value="Name" onfocus="enterField('name', 'Name');" onblur="leaveField('name', 'Name');"></td>
        <td class="input"><input id="email" type="text" class="name" size="32" value="Email" onfocus="enterField('email', 'Email');" onblur="leaveField('email', 'Email');"></td>
    </tr>
    <tr>
        <td class="input" colspan="2"><textarea id="message" class="message" rows="8" onfocus="enterField('message', 'Message');" onblur="leaveField('message', 'Message');">Message</textarea></td>
    </tr>
    <tr>
        <td style="text-align: right;" colspan="2"><input id="submit" type="submit" class="button" value="Send"></td>
    </tr>
</table> 
```

[您可以在www.ag-designs.ca/index_new.php](http://www.ag-designs.ca/index_new.php)了解它的运作方式。点击底部的“让我们谈谈”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T23:31:41.977

改变

```
document.getElementById(id).setAttribute("value", defaultText); 
```

到

```
document.getElementById(id).value = defaultText; 
```

在您的函数中出现两次。

# android - 获取从activity1（包含图片列表视图）到activity2（包含画布以绘制从activity1返回的图片）的图像路径

> ID：14409157
> 
> 赞同：0
> 
> 时间：2013-01-18T23:13:37.717
> 
> 标签：android, android-intent

我开发了一个包含画布来绘制图像的活动，并且我有一个名为 calla 活动的菜单（此活动显示图片列表）。一旦我从列表中选择了一张图片，这张图片必须在画布上绘制。所以，我的问题是如何将这张图片从 Activity1 的 listView 发送到*Activity2**的*画布。

 *这是我的代码：

活动1

```
case R.id.menu_prefs:
        Intent i = new Intent(TpMainActivity.this, ListViewImagesActivity.class);
        startActivity(i);
        return true; 
```

Acitvity2（列表查看图片）

```
public class ListViewImagesActivity extends Activity {
/** Called when the activity is first created. */
private PaintView paintView;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ArrayList<ItemDetails> image_details = GetSearchResults();

    final ListView lv1 = (ListView) findViewById(R.id.listV_main);
    lv1.setAdapter(new ItemListBaseAdapter(this, image_details));

    lv1.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> a, View v, int position, long id) { 
                                Thread thread = new Thread() {
                    //  @Override
                    public void run() {
                    try {
                        InputStream bitmap=getAssets().open("a.gif");
                        Bitmap bit=BitmapFactory.decodeStream(bitmap);
                        paintView.setBitmap(bit);
                    } catch (IOException e1) {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
                    }
                    }
                    };
                    thread.start();

        }  
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T23:25:17.303

让 activity1 调用 startActivityForResult 而不是 startActivity。然后你可以在activity2上调用finish时返回一个结果。Activity1 将需要实现 onActivityResult。活动 2 可以返回发送回活动 1 的意图中的路径。*

# php - 在里面放置一个 MySQL 变量

> ID：14409159
> 
> 赞同：-1
> 
> 时间：2013-01-18T23:13:39.570
> 
> 标签：php, html, mysql

这听起来可能有点模糊，但我希望将 MySQL 数据库中的一个变量放在一行 HTML 中。目前它看起来像这样：

![你好](../Images/a59e6ca5b85a18c101e966061215fd43.png).

下面是我正在使用的代码。谢谢！

```
echo "<table border='1'>";
echo "<tr> <th>Helo</th> <th>Class</th> <th>Need</th> </tr>";
// keeps getting the next row until there are no more to get
while($row = mysql_fetch_array( $result )) {
    // Print out the contents of each row into a table
    echo "<tr><td>"; 
    echo $row['Icon'];
    echo "</td><td>"; 
    echo $row['Class'];
    echo "</td><td>"; 
    echo $row['Need'];
    echo "</td></tr>"; 
} 

echo "</table>";
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T23:15:24.703

尝试：

```
echo '<img src="'.$row['Helo'].'" title="'.$row['Class'].'">'; 
```

# c# - 使用EF做一个简单的查询比使用Nhibernate快1s。为什么？

> ID：14409166
> 
> 赞同：0
> 
> 时间：2013-01-18T23:14:34.243
> 
> 标签：c#, performance, entity-framework, nhibernate

我认为 NHibernate 比 EF 快。但是这段代码告诉我，EF 在 1s 左右，但 Nhibernate 在 2~4s 左右。查询有什么问题吗？

要点链接：[https ://gist.github.com/d271f4ca0276cca7d481](https://gist.github.com/d271f4ca0276cca7d481)

它是一个表，没有链接，与其他人没有关系，但只有 300k 行数据。

MySQL.EF5，NHibernate 3.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T09:34:37.900

我看不出测试中使用的查询有什么问题。测试的问题是它测量了一个批量处理操作，这超出了 NHibernate 的目标用例。

此外，NHibernate 并没有将性能作为首要目标，因此不应仅根据该参数对其进行评估。也就是说，如果性能是您最重要的一个因素，那么您可能会更好地使用更简单的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T23:27:44.150

根据我对 NHibernate 的经验，问题是 ISessionFactory 需要最多的时间来创建。在那里进行所有映射，初始化缓存等等。

使用 NHibernate 进行查询的方式也不同于 EF。EF 编译“Linq”-Expression Tree 并基于使用的 Driver 构建 SQL 语句。

在 NHibernate 中，您自己用自己的语法编写查询。与 EF 相比，这速度较慢。

这就是我的经验。也许其他人可以进行更深入的研究。

# python - 如何将变量传递给 IPython 中的魔术“运行”函数

> ID：14409167
> 
> 赞同：89
> 
> 时间：2013-01-18T23:14:39.690
> 
> 标签：python, ipython, ipython-magic

我想做如下的事情：

```
In[1]: name = 'long_name_to_type_every_now_and_then.py'

In[2]: %run name 
```

但这实际上试图运行`'name.py'`，这不是我想要做的。

有没有将变量转换为字符串的通用方法？

类似于以下内容：

```
In[3]: %run %name% 
```

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2013-01-19T04:35:24.723

`$name`IPython 使用, bash 样式扩展变量。这适用于*所有魔法*，而不仅仅是`%run`。

所以你会这样做：

```
In [1]: filename = "myscript.py"

In [2]: %run $filename
['myscript.py'] 
```

myscript.py 包含：

```
import sys
print(sys.argv) 
```

通过 Python 的花哨字符串格式，您甚至可以将表达式放入`{}`：

```
In [3]: args = ["arg1", "arg2"]

In [4]: %run $filename {args[0]} {args[1][-2:]}
['myscript.py', 'arg1', 'g2'] 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-18T23:51:27.610

用于`get_ipython()`获取对当前[InteractiveShell](http://ipython.org/ipython-doc/dev/api/generated/IPython.core.interactiveshell.html)的引用，然后调用该`magic()`方法：

```
In [1]: ipy = get_ipython()

In [2]: ipy.magic("run foo.py")
ERROR: File `u'foo.py'` not found. 
```

**编辑**查看[minrk 的答案](https://stackoverflow.com/a/14411126/71522)——这是一种更好的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-30T08:46:21.890

如果参数中可能有空格，例如文件名，最好使用这个：

```
%run "$filename" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T00:55:26.590

使用内置的`%run`魔法功能，这似乎是不可能的。不过，你的问题让我陷入了困境，我想看看做类似的事情是多么容易。最后，花费所有这些精力来创建另一个仅使用`execfile()`. 也许这对某人、某处有一些用处。

```
# custom_magics.py
from IPython.core.magic import register_line_magic, magics_class, line_magic, Magics

@magics_class
class StatefulMagics(Magics):
    def __init__(self, shell, data):
        super(StatefulMagics, self).__init__(shell)
        self.namespace = data

    @line_magic
    def my_run(self, line):
        if line[0] != "%":
            return "Not a variable in namespace"
        else:
            filename = self.namespace[line[1:]].split('.')[0]
            filename += ".py"
            execfile(filename)
        return line

class Macro(object):
    def __init__(self, name, value):
        self.name = name
        self._value = value
        ip = get_ipython()
        magics = StatefulMagics(ip, {name: value})
        ip.register_magics(magics)

    def value(self):
        return self._value

    def __repr__(self):
        return self.name 
```

使用这对类，（并给定一个 python 脚本`tester.py`），可以创建和使用带有新创建的“my_run”魔术函数的“宏”变量，如下所示：

```
In [1]: from custom_magics import Macro

In [2]: Macro("somename", "tester.py")
Out[2]: somename

In [3]: %my_run %somename
I'm the test file and I'm running!
Out[3]: u'%somename' 
```

是的，这是一个巨大且可能是浪费的黑客攻击。在这种情况下，我想知道是否有办法将绑定到宏对象的名称用作宏的实际名称。会调查的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-06T01:05:12.877

如果“变量”是指用户命名空间中可用的变量，那么我建议使用`get_ipython().ev(varname)`（[docs](https://ipython.readthedocs.io/en/stable/api/generated/IPython.core.interactiveshell.html)）在函数中获取变量：

```
from __future__ import print_function
import argparse
import shlex

from IPython import get_ipython
from IPython.core.magic import register_cell_magic

@register_cell_magic
def magical(line, cell):
    parser = argparse.ArgumentParser()
    parser.add_argument("varname")
    # using shlex to split the line in a sys.argv-like format
    args = parser.parse_args(shlex.split(line))
    ipython = get_ipython()

    v = ipython.ev(args.varname)
    # do whatever you want here
    print(v) 
```

上面的这个模板对我很有帮助——我用它来制作一个 jinja2 单元魔法，每当单元运行时它也会打印到文件中。

# c++ - C ++中的一对指针

> ID：14409170
> 
> 赞同：0
> 
> 时间：2013-01-18T23:15:19.283
> 
> 标签：c++, pointers, std-pair

我需要返回一个数组及其大小：

```
pair<int*, int> load(string path,int * memory){
    ifstream handle;
    int container;
    int size = 0; 

    if(!handle){
        QMessageBox::warning(0, QString(""), "file cannot be loaded");
        return make_pair(NULL,-1);
    }

    handle.open(path.c_str());
    while(!handle.eof()){
        handle >> container;
        size++;
    }
    size--;
    if(!size){
        QMessageBox::warning(0, QString(""), "file is empty");
        return make_pair(NULL,-1);
    }
    memory = new int[size]; 

    handle.clear();
    handle.seekg(0, ios::beg);

    for(int i = 0; i < size; i++){
        handle >> memory[i];
    }
    handle.close();
    return make_pair(memory, size);
} 
```

错误输出为：

> /usr/include/c++/4.6/bits/stl_pair.h:109：错误：从“int”到“int*”的无效转换 [-fpermissive]

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T23:20:45.050

由于 NULL 可能定义为：

```
#define NULL 0 
```

表达式`make_pair(NULL,-1)`变为`make_pair(0, -1)`，所以它创建`pair<int, int>`。例如`nullptr`，如果可用或`(int*)NULL`其他方式，您可以使用。

# iphone - iPhone递归完成块

> ID：14409175
> 
> 赞同：0
> 
> 时间：2013-01-18T23:15:39.243
> 
> 标签：iphone, networking, recursion

他在那里，我有一个带有文件和文件夹的简单树结构。它是可以下载虚拟文件夹的客户端-服务器应用程序的一部分。无论如何，我喜欢使用 ^blocks 进行异步编程。我有 3 个 url，第一个下载文件夹描述，第二个用于下载文件，第三个用于下载文件夹内容。DSFolder 是文件夹描述，DSFile 继承自 DSFolder 并包含下载结果的 NSData 字段。文件夹下载代码如下：

```
- (void)loadFolderData:(DSFolder *)folder 
              finished:(void(^)(DSFolder *))finished 
                 error:(void(^)(NSError *))error {

    if (!folder) {
        return;
    }
    for (DSFolder* fileOrFolder in folder.children) {
        if ([fileOrFolder isFolder]) {
            [self loadFolderData:fileOrFolder
                        finished:^(DSFolder * folder) {

                        // *********************************
                        // Next folder level would be a copy
                        // of the whole for loop in here
                        // *********************************

                    } error:^(NSError * err) {
                        if (error) {
                            error(err);
                        }
                    }];
        } else {
            [self loadFile:fileOrFolder.name
                    folder:folder.name
                  finished:^(NSData * data) {
                      ((DSFile *) fileOrFolder).data = data;
                  } error:^(NSError * err) {
                      if (error) {
                          error(err);
                      }
                  }];
        }
    }
} 
```

好吧，我可以通过将循环复制几次来限制树级别的深度，但这看起来很丑陋。我希望这个问题是合理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T23:39:10.363

递归*已经*为您运行了“循环副本”：

```
- (void)loadFolderData:(DSFolder *)folder 
              finished:(void(^)(DSFolder *))finished 
                 error:(void(^)(NSError *))error {

    if (!folder) {
        return;
    }
    for (DSFolder* fileOrFolder in folder.children) {
        if ([fileOrFolder isFolder]) {
            [self loadFolderData:fileOrFolder finished:nil error:error];
        } else {
            [self loadFile:fileOrFolder.name
                    folder:folder.name
                  finished:^(NSData * data) {
                      ((DSFile *) fileOrFolder).data = data;
                  } error:error];
        }
    }
} 
```

我假设`-loadFile:finished:error:`正确处理一个零错误块。

其他几件事：

*   `[self loadFile:fileOrFolder.name folder:folder.name ...]`如果有子目录，它看起来会做错事：假设路径`a/b/c`的文件名是 ，`c`文件夹名是`b`，它看起来会加载`b/c`.
*   `error`*每个*错误都会调用。这可能不是你想要的。它也不会返回导致错误的负载。
*   有一个回调更正常，例如`void(^)(DSFolder*,NSError*)`.
*   `finished`未使用。看起来您希望在整个层次结构完成加载时调用它，这有点棘手。

# sql - 查找 StartDate 和 EndDate 之间的重叠以查看同一天是否有超过 3 次出现

> ID：14409176
> 
> 赞同：1
> 
> 时间：2013-01-18T23:16:05.980
> 
> 标签：sql, sql-server-2008, tsql

所以我在 SQL SERVER 2008 中有一个表，其中包含一个项目列表。一个人每天最多只能订购 4 件商品。所以我想知道在任何开始日期或结束日期是否有一段时间他们在特定日期有超过 4 个项目。

这是我的表的示例：

```
OrderNo  Item     quantity   StartDate   EndDate
112      xbox        2       2012-12-05  2012-12-10
123      tv          1       2012-12-06  2012-12-07
125      computer    4       2012-12-10  2012-12-11
165      game        1       2012-12-06  2012-12-10
186      toy         2       2012-12-02  2012-12-04 
```

所以从这张表中我们可以看到他们每天有超过 4 件物品......现在我需要知道有多少物品以及他们有超过 4 件物品的日子。

基本上，我想检查物品从何时出库到归还时的重叠日期，以查看在特定日期是否同时有 4 件以上的物品出库。

我不知道如何解决这个问题。我查看了 SQL 中许多重叠的日期和范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T00:01:23.063

你需要一个日历表。理想情况下，这是在您的主数据库中设置的永久表，所有索引都已正确索引，但您可以像这样动态创建它：

```
WITH Calendar
AS
(
    SELECT MIN(StartDate) AS Today
          ,MAX(EndDate) AS LastDay
    FROM table
    UNION ALL
    SELECT DATEADD(day,1,Today)
          ,LastDay
    FROM Calendar
    WHERE Today<LastDay
) 
```

注意：您的正常最大递归为 100，因此您最多可以获得 100 天，除非您添加`OPTION (MAXRECURSION n)`其中 n 是小于 32768 的 int。

您现在有一个表格，您可以将其与涵盖所有相关日期的原始表格连接起来，就像这样

```
SELECT Today
      ,SUM(Quantity) AS ItemCount
FROM Calendar c
     INNER JOIN 
     Table t ON c.Today BETWEEN t.StartDate AND t.EndDate
GROUP BY Today
HAVING SUM(Quantity)>4 
```

看到这个[SQL Fiddle](http://sqlfiddle.com/#!3/3361b/9)

这个[SQL fiddle](http://sqlfiddle.com/#!3/988d1/3)为解决方案提供了一个“永久”日历表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T00:20:34.140

这个使用运行总计来汇总每个日期订购的项目。要检查任何日期（示例数据中未给出），只需使用此结果并进行一些连接。有关序列号/日期的更多信息，请查看[孤岛和间隙](http://msdn.microsoft.com/en-us/library/aa175780%28v=sql.80%29.aspx)

```
insert into "timestamps"
select
  *
from
(
select "OrderNo", "ts", "quantity", case when "timestamp" = 'StartDate' then 1 else -1 end as "factor", 0 as "rolSum" from
    ( select "OrderNo", "StartDate", "EndDate", "quantity" from "data" ) as d
    unpivot ( "ts" for "timestamp" in ( "StartDate", "EndDate" )) as pvt
) as data
order by "ts"

declare @rolSum int = 0
update "timestamps" set @rolSum = "rolSum" = @rolSum + "quantity" * "factor" from "timestamps"

select 
    "OrderNo"
  , "ts"
  , "rolSum"
from
  "timestamps" 
```

请参阅[SQL-Fiddle-Demo](http://www.sqlfiddle.com/#!3/13083/11/0)（包括表创建和您的演示数据）。

# jquery-mobile - JQuery Mobile - 更改内容后刷新按钮

> ID：14409183
> 
> 赞同：0
> 
> 时间：2013-01-18T23:16:53.870
> 
> 标签：jquery-mobile

是否有理由在我的按钮`button()`上调用方法后从我的按钮中删除点击处理程序。我正在更改按钮的内容，因此我需要刷新它们。我注意到刷新不起作用，所以我尝试了该`button`方法。

这将重新设计我的“按钮”，但我失去了我的`click`活动。

我怎样才能做到这两点？

[http://jsfiddle.net/RQZG8/2/](http://jsfiddle.net/RQZG8/2/)

这是代码：

```
$("[data-role=button]").html("hello world").button();
$("[data-role=button]").click(function(){
    alert("i have been clicked");
}); 
```

我的大问题是我有一个`div`充当按钮的按钮。我想更改 的内容`div`，但我希望能够让它继续看起来像一个按钮，同时保持它的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T23:28:35.830

试试这个：`$("[data-role=button] .ui-btn-text").html("hello world");`否则填充丢失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T05:52:27.233

**首先**`div`恕我直言，鉴于您的示例与问题相关（当您仅更改按钮的标题时），当 jQM 为您提供许多标准选择时，使用 a 作为按钮没有多大意义。

所有这些：

```
<button>Button element</button>
<input type="button" value="Button" />
<input type="submit" value="Submit Button" /> 
```

将由**jQM 自动增强**为按钮，甚至无需指定`data-role="button"`. 您当然可以使用链接作为按钮

```
<a href="index.html" data-role="button">Link button</a> 
```

**现在**，如果您仍想将您的`div`用作按钮，则无需指定`data-role="button"`仅调用`button()`插件。这将为您创建所有必要的标记，并且您的原始 div 将被保留为隐藏。

```
<div id="button1">By button<div>
$("div#button1").button(); 
```

要在更改标题后刷新按钮，您需要调用`refresh`方法：

```
$("div#button1").html("Hello World").button("refresh"); 
```

**现在**要正常处理特定按钮的单击事件（如果它不是页面上唯一的按钮），您可能需要比`data-role=button`属性更具体的选择器。`id`将是完美的。所以而不是

```
$("[data-role=button]").click(function(){...}); 
```

做

```
$("div#button1").click(function(){...}); 
```

**最后**，您肯定知道这一点，但我没有在您的 jsfiddle 中看到它，所以我只是提到您最好将代码放在 jQM 页面处理程序之一中。[pageinit](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)是推荐的方式。

```
$(document).on("pageinit", "#page1", function(){
    ...
}); 
```

[这](http://jsfiddle.net/pmatseykanets/q5TnQ/)是jsFiddle。

# c# - 如何在 XAML Metro 应用程序中禁用网格（面板）？

> ID：14409184
> 
> 赞同：0
> 
> 时间：2013-01-18T23:17:04.263
> 
> 标签：c#, xaml, windows-8, windows-runtime

我想在 XAML Metro App 中模拟模式对话框。

因此，我打算在所有控件上设置 .IsEnabled = false ，除了将构成模式对话框的控件。

显然 IsEnabled 不在 Grid 中，不在 Panel 中，不在 FrameworkElement 中。**如何禁用它而不使用户控制它？**

我猜 Sinofsky 走了不少弯路，以至于整个事情现在更像是 Escher 楼梯。我正在失去信心。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T23:55:05.807

设置`IsHitTestVisible = false`在背景内容上。

此外，您可以将焦点设置为模态层根中的某些内容，并设置[`TabNavigation`](https://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.control.tabnavigation.aspx?f=255&MSPPError=-2147217396)为[`Cycle`](https://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.input.keyboardnavigationmode.aspx?f=255&MSPPError=-2147217396)模态层根以确保用户无法使用 tab/shift+tab 退出它。还要确保模态层全部命中 test-solid - 例如`Transparent`或有一些其他填充，因此用户无法单击它。

还要确保`Popups`在您的模态层可见时不显示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T15:33:47.043

抱歉，我参加聚会有点晚了……

以下是我创建模式弹出窗口的方法 - 我使用了一个弹出对话框，其中顶部和底部部分是透明的，因此它后面的任何内容都会显示出来。当弹出窗口打开时，我将其大小设置为覆盖整个屏幕。

弹出窗口的顶部和底部也设置为自动调整大小（高度 = *），以便它们填满屏幕的整个顶部和底部。这可以防止任何输入进入下面的网格。

这是我在 Visual Studio 中弹出窗口的屏幕截图： ![在此处输入图像描述](../Images/b997ec6312aab1f540e8878fd5fc7d13.png)

弹出窗口是一个有 5 行的网格，其中 3 行用于对话框本身，2 行用于透明顶部和底部。

这是弹出窗口在我的应用程序中的外观。显然，网格通过透明的顶部和底部显示。由于弹出窗口填满了整个屏幕，因此任何输入（键盘或鼠标）都会转到它而不是下面的网格，这使得弹出窗口就像一个模式对话框。

![下方有网格的弹出窗口](../Images/3c756b51a0c627567b38558caa93059c.png)

请注意，尽管使用此策略，您必须处理这些事件：

*   屏幕调整大小（全屏、快照视图、填充视图） - 您需要调整弹出窗口的大小以适应每个视图状态
*   屏幕旋转 - 再次，您必须在此处处理调整大小
*   键盘弹出窗口 - 您需要向上移动弹出窗口，以便屏幕键盘不会干扰它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T14:34:30.500

不幸的是，似乎没有人知道（除了给出错误答案并且从不费心修改它的 Skakun 先生）。

因此我的解决方案（最简单的）是使有问题的元素隐藏 - 我找不到任何其他方法来“禁用”网格。

如果我想正确禁用它，我将不得不编写一个递归函数来查找网格子项中的所有 FrameworkElements 并设置 IsEnabled = false。

# image - 模式匹配——归一化相关

> ID：14409187
> 
> 赞同：1
> 
> 时间：2013-01-18T23:17:18.443
> 
> 标签：image, matlab, image-processing

作为我作业的一部分，我需要实现这种模式匹配。目标是“在图像 coin4.tif 中检测尽可能多的 0（零）”。
我被赋予了NGC功能。我需要使用它
这是我的 main.m 文件

```
Image = readImage('coins4.tif');
Pattern = readImage('zero.tif');
showImage(Image);
showImage(Pattern);
message = sprintf('Pattern matching Normalized Correlation');
PatternMatching(Image , Pattern);
uiwait(msgbox(message,'Done', 'help'));
close all 
```

这是我的 PatternMatching 函数。

```
function [ output_args ] = PatternMatching( Image , Pattern )
% Pattern matching – Normalized Correlation
% Detect as many of the 0's (zeros) as you can in image coins4.tif.
% Use the 0 of the 10 coin as pattern.
% Use NGC_pm and find good threshold. Display original image with? detected regions marked using drawRect.

% NGCpm(im,pattern);
% drawRect(rectCoors,color);
% rectCoors = [r0,c0,rsize,csize]  - r0,c0 = top-left corner of rect.
%             rsize = number of rows, csize = number of cols
%
% color = an integer >=1 representing a color in the color wheel
%                   (curerntly cycles through 8 different colors

showImage(Image);
hold on
res = NGCpm(Image, Pattern);

 for i = 1:size(res,1)
     for j = 1:size(res,2)
         if res(i,j) > 0.9999
             drawRect([i j size(Pattern,1) size(Pattern,2)], 5)
         end
     end
 end

end 
```

这是给定的 NGCpm.m 文件

```
function res=NGC_PM(im,pattern)
[n m]=size(pattern);
[im_row,im_col]=size(im);
if ~(var(pattern(:))==0)
     res = normxcorr2(pattern, im);
     res=res(n:im_row,m:im_col);   
else
    res=zeros(size(im)-size(pattern)+1);
end;
 res = 1-abs(res);  % res = abs(res); 
```

这是我试图找到的模式和结果，我得到了

我正在尝试使用硬币 10 的零模式找到尽可能多的“零”。

我试图了解我的 PatternMatching 函数中的算法是否有问题。由于已经给了我 NGCpm 功能，我需要做的只是循环最佳阈值，对吗？
还是我需要模糊图像或图案？

![这是我试图找到的模式](../Images/410fe19964f4fd41f0a06b6843671051.png)

![这是图像和结果](../Images/9207ec549f2351501295e1f96f8d1edc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T21:06:29.653

这是此功能的固定版本。

```
function [ output_args ] = patternMatching( Image , Pattern )
% Pattern matching – Normalized Correlation
% Detect as many of the 0's (zeros) as you can in image coins4.tif.
% Use the 0 of the 10 coin as pattern.
% Use NGC_pm and find good threshold. Display original image with? detected regions marked using drawRect.

% NGCpm(im,pattern);
% drawRect(rectCoors,color);
% rectCoors = [r0,c0,rsize,csize]  - r0,c0 = top-left corner of rect.
%             rsize = number of rows, csize = number of cols
%
% color = an integer >=1 representing a color in the color wheel
%                   (curerntly cycles through 8 different colors

showImage(Image);
hold on
res = 1-NGCpm(Image, Pattern);
normalized_corellation = uint8(255*res/max(max(res)));
res_thresh = thresholdImage(normalized_corellation,100);
 for i = 1:size(res_thresh,1)
     for j = 1:size(res_thresh,2)
         if res_thresh(i,j) > 0
             drawRect([i j size(Pattern,1) size(Pattern,2)], 5)
         end
     end
 end

end 
```

# c - 此更改编程不起作用

> ID：14409189
> 
> 赞同：-4
> 
> 时间：2013-01-18T23:17:20.723
> 
> 标签：c

所以这是我的代码。出于某种原因，它总是说四分之一的数量是 4。我做错了什么？

```
#include <stdio.h>

#define QUARTER 25      // Define the constant cent values of the quarters, dimes, nickels, and pennies.
#define DIME    10
#define NICKEL  5
#define PENNY   1

int main( void ){

    int priceOfitem;  // Initialize the variable that will be the price.
    printf("Enter the price of an item less than one dollar (in cents) (eg: 57) : ");
    scanf("%lg", &priceOfitem);

    if(priceOfitem >= 100){
    printf("The price must be less than one dollar. \nProgramming exiting.");
    return 0;
    }

    int changeAmount = 100 - priceOfitem; /* Create the variable that is the amount of change needed.
                                           * This variable will be modified later on.
                                           */

    int amountOfQuarters = ((changeAmount - (changeAmount % QUARTER)) / QUARTER); // Utilizing the modulus operator to determine the amount of quarters.

    printf("\n\nThe Amount of Quarters Needed in the Change is: %d", amountOfQuarters);

    changeAmount = changeAmount - (amountOfQuarters * QUARTER); // Modifying the change amount

    int amountOfDimes = ((changeAmount - (changeAmount % DIME)) / DIME); // Utilizing the modulus operator to determine the amount of dimes.

    printf("\n\nThe Amount of Dimes Needed in the Change is: %d", amountOfDimes);

    changeAmount = changeAmount - (amountOfDimes * DIME); // Modifying the change amount

    int amountOfNickels = ((changeAmount - (changeAmount % NICKEL)) / NICKEL); // Utilizing the modulus operator to determine the amount of nickels.

    printf("\n\nThe Amount of Nickels Needed in the Change is: %d", amountOfNickels);

    changeAmount = changeAmount - (amountOfNickels * NICKEL); // Modifying the change amount

    int amountOfPennies = changeAmount; // Since the changeAmount can now be expressed with pennies only, set the amountOfPennies variable as such.

    printf("\n\nThe Amount of Pennies Needed in the Change is: %d", amountOfPennies);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T23:22:32.580

这里：

```
int priceOfitem;  // Initialize the variable that will be the price.
printf("Enter the price of an item less than one dollar (in cents) (eg: 57) : ");
scanf("%lg", &priceOfitem); 
```

您需要传递`"%d"`给 scanf 以进行整数输入：

```
scanf("%d", &priceOfitem); 
```

你也不需要这个减法：

```
int changeAmount = priceOfitem; //int changeAmount = 100 - priceOfitem 
```

编译时始终使用`-Wall -Werror`（或您选择的编译器的类似标志）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T23:26:48.003

这不是您问题的真正答案，但是...

通常我们通过使用整数运算来计算四分之一的数量（以及类似的东西），这会丢弃任何小数部分。

```
 int amountOfQuarters = changeAmount / QUARTER; 
```

所以，如果 changeAmount 是 57，我们使用整数运算除以 25，我们得到 2。

# .net - 为什么此性能监视器代码失败

> ID：14409191
> 
> 赞同：0
> 
> 时间：2013-01-18T23:17:30.460
> 
> 标签：.net, system.diagnostics, performancecounter

这段代码以前可以工作，现在它抛出异常并拒绝工作。代码没有改变。我怀疑原因是当我对磁盘进行分区以添加第二个分区时。预期目的是监视它自己的路径所在的物理驱动器的空闲时间百分比。

```
 Try
        Dim drive As String = BunzipInputStream.BinDirectory.Substring(0, 2)
        Dim instname As String = Nothing
        If drive.EndsWith(":"c, StringComparison.Ordinal) Then
            Dim dix = New System.Diagnostics.PerformanceCounterCategory
            dix.CategoryName = "PhysicalDisk"
            For Each px In dix.GetInstanceNames()
                If px.EndsWith(drive, StringComparison.OrdinalIgnoreCase) Then
                    instname = px
                End If
            Next
            diskcounter = New System.Diagnostics.PerformanceCounter()
            diskcounter.CategoryName = "PhysicalDisk"
            diskcounter.CounterName = "% Idle Time"
            diskcounter.InstanceName = instname
            diskcounter.NextValue()
        End If
    Catch ex As Exception
        'ENDS UP HERE AND ABORTS THE MONITOR
        If Not diskcounter Is Nothing Then
            diskcounter.Dispose()
            diskcounter = Nothing
        End If
    End Try 
```

（这是设置代码。有一个计时器调用 diskcounter.NextValue() 如果它不是没有显示）。

```
System.InvalidOperationException occurred
  Message=Counter is not single instance, an instance name needs to be specified.
  Source=System
  StackTrace:
       at System.Diagnostics.PerformanceCounter.NextSample()
       at System.Diagnostics.PerformanceCounter.NextValue()
       at Redacted.PerformanceMon.OnHandleCreated(EventArgs e) in C:\development\redacted\redacted\Forms\PerformanceMon.vb:line XX
  InnerException: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-02T07:06:18.000

正如 Hans Passant 在评论中所说，您的变量**instname**可能没有按照您想要的方式设置。

# language-agnostic - 具有状态的谓词的适当术语

> ID：14409192
> 
> 赞同：1
> 
> 时间：2013-01-18T23:17:38.913
> 
> 标签：language-agnostic, vocabulary

谓词（一个对象是一个布尔值函数，用于测试其输入的条件）通常被假定为无状态的。

**对于具有状态测试功能的对象，最合适的名称是什么？**

例如，在 Java 中，`CountTrigger`下面的类仅在第 N 次针对与所需值匹配的值进行测试时返回 true，否则返回 false。

```
 interface QuasiPredicate<T>  // what should this be renamed to?
 {
      public boolean test(T value);
 }

 class CountTrigger<T> implements QuasiPredicate<T>
 {
      // for simplicity, ignore synchronization + null-value issues
      private int remainingTriggers = 0;
      final private T testValue;

      public CountTrigger(T testValue, int count)
      {
          this.remainingTriggers = count;
          this.testValue = testValue;
      }
      @Override public boolean test(T value)
      {
          if (!this.testValue.equals(value))
              return false;
          if (this.remainingTriggers == 0)
              return false;
          if (--this.remainingTriggers == 0)
              return true;                  
      }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:21:38.013

考虑到它是一个接口，而接口`implemented`不是，`extended`那么我看不到您的对象实现谓词的问题。

如果您也打算放入`public CountTrigger(T testValue, int count)`界面，那么您可能需要一个不同的名称。也许是 IFinitRule 或其他合适的同义词。也许在[https://english.stackexchange.com/](https://english.stackexchange.com/)上询问；-)

# c# - c# .Match().Value 和 Match().ToString() 之间的正则表达式区别

> ID：14409193
> 
> 赞同：3
> 
> 时间：2013-01-18T23:17:55.210
> 
> 标签：c#, regex

我有以下代码：

```
Match matcher = new Regex("[0-9]+.[0-9]+.[0-9]+").Match("12/02/1994");

if (matcher.Success)
{
   string matchedString1 = matcher.Value;
   string matchedString2 = matcher.ToString();
} 
```

在这种情况下`matchedString1`和`matchedString2`包含相同的值`"12/02/1994"`。是否`matcher.Value`并且`matcher.ToString()`总是为任何正则表达式返回相同的结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T23:22:29.803

Match 类派生自 Group 类，而这一类派生自[Capture](http://msdn.microsoft.com/en-us/library/vstudio/system.text.regularexpressions.capture%28v=vs.100%29.aspx)类。

Capture 类使用以下代码覆盖 ToString() 方法：

```
[__DynamicallyInvokable, TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")]
public override string ToString()
{
    return this.Value;
} 
```

所以，是的，它是相同的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T23:23:43.250

来自*MSDN*；

[`Capture.Value`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.capture.value.aspx)财产;

> 从输入字符串中获取捕获的子字符串。

[`Capture.ToString()`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.capture.tostring.aspx)方法。

> **通过调用Value**属性从输入字符串中检索捕获的子字符串 。

即使当我们查看*.NET Reflector*时，我们也可以看到它是这样的`Capture`类覆盖`ToString()`方法；

```
[__DynamicallyInvokable, TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")]
public override string ToString()
{
    return this.Value;
} 
```

所以，是的。它们具有相同的价值。

# ffmpeg - 如何在 FFmpeg 中为 mp4 文件禁用非第一音频流/音轨

> ID：14409194
> 
> 赞同：7
> 
> 时间：2013-01-18T23:17:58.720
> 
> 标签：ffmpeg, apple-tv

我的最终目标是创建一个 FFmpeg 命令，它将我的 h264.DTS.mkv 文件转换为与我的 AppleTV 兼容的格式，同时保持原始质量。

我快到了，但是我无法弄清楚如何禁用流/音轨。

到目前为止，我得到了：

```
ffmpeg -i FILE \
 -y -strict experimental \
 -map 0:0 -map 0:1 -map 0:1 -map 0:1 -map 0:2 \
 -c:0 copy -c:1 aac -ac:a 2 -c:2 ac3 -ac:a 6 -c:3 copy -c:4 mov_text \
 OUTPUT 
```

这会生成一个如下所示的输出文件：

1.  H264 视频轨道（启用）[从原始复制]
2.  AAC 2 声道音轨（启用）
3.  AC3 6 声道音轨（启用）
4.  DTS 6 声道音轨（启用）[从原始复制]
5.  字幕轨道（启用）

问题是我需要它看起来像：

1.  1 个 H264 视频轨道（从原始复制）（启用）
2.  1 个 AAC 2 声道音轨（启用）
3.  1 AC3 6 声道音轨**（禁用）**
4.  1 个 DTS 6 声道音轨（从原始复制）**（禁用）**
5.  1 个字幕轨道（启用）

因此，我需要知道如何禁用非第一音频流/音轨。

根据我的阅读，这是位于“tkhd.flags”位置的轨道头原子的一部分。但我无法弄清楚如何通过命令行参数进行设置。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-12-16T17:23:24.663

您好 Dipesh 这将解决您的问题。

# 问题

您要完成的是标记哪个音频流将是默认的，同时在所有不需要的音频流上否定此标志。当尝试选择哪个（如果有）字幕轨道将是默认和/或可能强制时，此解决方案将类似。

# 通用解决方案

FFmpeg 将自动标记**所有**流，`default`无需用户干预。因此，我们首先需要标记所有流`-default`，然后`default`将所需的流标记为默认值。让我们以音频流为例。

```
-disposition:a -default -disposition:a:0 default 
```

上面语句的结果将所有音频流`-default`和第一个音频流标记为`default`.

可以在[FFmpeg 文档](https://ffmpeg.org/ffmpeg-all.html#Main-options)的**5.4 Main options**下找到有关其使用的详细信息。

# 具体解决方案

```
ffmpeg -i FILE \
 -y -strict experimental \
 -map 0:0 -map 0:1 -map 0:1 -map 0:1 -map 0:2 \
 -c:0 copy -c:1 aac -ac:a 2 -c:2 ac3 -ac:a 6 -c:3 copy -c:4 mov_text \
 -disposition:a -default -disposition:a:0 default \
 OUTPUT 
```

在解决方案`-disposition:a -default`中，将输出文件中的所有音频流标记**为非**默认值。While`-disposition:a:0 default`将输出文件中的第一个音频流标记为默认值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T09:40:48.383

您是否检查过这个： http: [//ffmpeg.org/trac/ffmpeg/wiki/How%20to%20use%20-map%20option](http://ffmpeg.org/trac/ffmpeg/wiki/How%20to%20use%20-map%20option) 只是不要将不需要的流复制到输出中。

```
ffmpeg -i FILE \
 -y -strict experimental \
 -map 0:0 -map 0:1 -map 0:4 \
 -c:0 copy -c:1 aac -ac:a 2 -c:4 mov_text \
 OUTPUT 
```

我希望我能正确地回答你的问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-09T04:31:10.150

禁用音轨并不意味着完全删除它。

看图片

[![在此处输入图像描述](../Images/1fcf199f48537df859b9fd5cf003afdb.png)](https://i.stack.imgur.com/C2u6f.png)

# java - 使用 BufferedReader 在手机上应用程序崩溃

> ID：14409196
> 
> 赞同：0
> 
> 时间：2013-01-18T23:18:11.707
> 
> 标签：java, android, bufferedreader

我是android开发的菜鸟。

我制作了一个应用程序，它从位于 url 的文本文件中获取行并将它们添加到向量中。

它不适用于我的智能手机（Xperia U），但适用于 android 虚拟机（Nexus One）。

Logcat 没有显示任何错误，因此删除代码行 1 by 1 我发现了问题：BufferedReader

这是我要更改的代码部分...我将其称为主要活动...我该怎么办？

```
 URL url = new URL(// an url);
    BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
    String str;

    this.names=new Vector<String>();
    this.links=new Vector<String>();

    while ((str = in.readLine()) != null) {
        String[] splitted = str.split("#"); 
        names.add(splitted[0].toString());
        links.add(splitted[1].toString());
    }
        in.close(); 
```

# error-handling - 如何处理 XPages 中自定义控件中的设计错误？

> ID：14409201
> 
> 赞同：1
> 
> 时间：2013-01-18T23:18:33.580
> 
> 标签：error-handling, el, xpages

在自定义控件中有这个重复控件引用文件夹中的列（不是视图）。文件夹的默认设计可以及时更改，结合自定义控件。因此，自定义控件的代码可能比文件夹的设计更新，因此设计不匹配并且 XPage 出错。

我特别想要的是自定义控件处理与缺少视图/文件夹列或类似设计错误相关的错误。该错误将在某处报告，通知用户他/她可以激活可以修复这种情况的东西。

我知道如何捕获 JavaScript 错误，不幸的是所有列值都使用表达式语言。当然，我可以重新编码它们，但我想知道是否有更好的方法。

简而言之：如何捕获表达式语言错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T15:37:08.693

您可以`EL`通过添加自己的`VariableResolver`和自己的`PropertyResolver`. 为此，您必须创建两个 Java 类：

1.  变量解析器

    ```
    package ch.hasselba.xpages.demo;

    import javax.faces.application.FacesMessage;
    import javax.faces.context.FacesContext;
    import javax.faces.el.EvaluationException;
    import javax.faces.el.VariableResolver;

    public class ELErrVariableResolver extends VariableResolver {

      private final VariableResolver delegate;

      public ELErrVariableResolver(VariableResolver resolver) {
        delegate = resolver;
      }

      @Override
      public Object resolveVariable(FacesContext context, String name) throws EvaluationException {
          Object variable = null;
          try{
              variable = delegate.resolveVariable(context, name);
          }catch( EvaluationException ee ){
              addResolveErrMessage( context, name );
          }

         return variable;
      }

      public void addResolveErrMessage( FacesContext context , String name ){
          FacesMessage msg = new FacesMessage();
          msg.setSummary( "BAD EL! Variable '" + name + "' not found." );
          msg.setSeverity( FacesMessage.SEVERITY_FATAL );
          context.addMessage("BAD EL!", msg);
      }
    } 
    ```

2.  属性解析器

    ```
    package ch.hasselba.xpages.demo;

    import javax.faces.application.FacesMessage;
    import javax.faces.context.FacesContext;
    import javax.faces.el.EvaluationException;
    import javax.faces.el.PropertyNotFoundException;
    import javax.faces.el.PropertyResolver;

    public class ELErrPropertyResolver extends PropertyResolver{

        private final PropertyResolver delegate;

          public ELErrPropertyResolver(PropertyResolver resolver) {
            delegate = resolver;
          }

        @Override
        public Class getType(Object paramObject1, Object paramObject2)
                throws EvaluationException, PropertyNotFoundException {
            Class c = null;
            try{
                c = delegate.getType(paramObject1, paramObject2);
            }catch(Exception e){
                addResolveErrMessage( FacesContext.getCurrentInstance(), paramObject1.toString() + "." + paramObject2.toString() );
            }
            return c;
        }

        @Override
        public Class getType(Object paramObject, int paramInt)
                throws EvaluationException, PropertyNotFoundException {
            Class c = null;
            try{
                c = delegate.getType(paramObject, paramInt);
            }catch(Exception e){
                addResolveErrMessage( FacesContext.getCurrentInstance(), paramObject.toString() + "." + paramInt );
            }
            return c;
        }

        @Override
        public Object getValue(Object paramObject1, Object paramObject2)
                throws EvaluationException, PropertyNotFoundException {
            Object c = null;

            try{
                c = delegate.getValue(paramObject1, paramObject2);
            }catch(Exception e){
                addResolveErrMessage( FacesContext.getCurrentInstance(), paramObject1.toString() + "."  + paramObject2.toString() );
            }
            return c;
        }

        @Override
        public Object getValue(Object paramObject, int paramInt)
                throws EvaluationException, PropertyNotFoundException {
            Object c = null;
            try{
                c = delegate.getValue(paramObject, paramInt);
            }catch(Exception e){
                addResolveErrMessage( FacesContext.getCurrentInstance(), paramObject.toString() + "." + paramInt );
            }
            return c;
        }

        @Override
        public boolean isReadOnly(Object paramObject1, Object paramObject2)
                throws EvaluationException, PropertyNotFoundException {
            boolean c = false;
            try{
                c = delegate.isReadOnly(paramObject1, paramObject2);
            }catch(Exception e){
                addResolveErrMessage( FacesContext.getCurrentInstance(), paramObject1.toString() + "." + paramObject2.toString() );
            }
            return c;
        }

        @Override
        public boolean isReadOnly(Object paramObject, int paramInt)
                throws EvaluationException, PropertyNotFoundException {
            boolean c = false;
            try{
                c = delegate.isReadOnly(paramObject, paramInt);
            }catch(Exception e){
                addResolveErrMessage( FacesContext.getCurrentInstance(), paramObject.toString() + "." + paramInt );
            }
            return c;
        }

        @Override
        public void setValue(Object paramObject1, Object paramObject2,
                Object paramObject3) throws EvaluationException,
                PropertyNotFoundException {
            try{
                delegate.setValue(paramObject1, paramObject2, paramObject3);
            }catch(Exception e){
                addResolveErrMessage( FacesContext.getCurrentInstance(), paramObject1.toString() + "." + paramObject2.toString() );
            }

        }

        @Override
        public void setValue(Object paramObject1, int paramInt, Object paramObject2)
                throws EvaluationException, PropertyNotFoundException {

            try{
                delegate.setValue(paramObject1, paramInt, paramObject2);
            }catch(Exception e){
                addResolveErrMessage( FacesContext.getCurrentInstance(), paramObject1.toString() + "." + paramInt );
            }

        }

        public void addResolveErrMessage( FacesContext context , String name ){
              FacesMessage msg = new FacesMessage();
              msg.setSummary( "BAD EL! Property '" + name + "' not found." );
              msg.setSeverity( FacesMessage.SEVERITY_FATAL );
              context.addMessage("BAD EL!", msg);
          }
    } 
    ```

3.  将新的解析器添加到您的`faces-config.xml`：

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <faces-config>
       <application>
            <variable-resolver>ch.hasselba.xpages.demo.ELErrVariableResolver
            </variable-resolver>
            <property-resolver>ch.hasselba.xpages.demo.ELErrPropertyResolver
            </property-resolver>
        </application>
    </faces-config> 
    ```

4.  在您的 CC 添加一个`xp:messages`组件以显示您的消息（或更改类中的错误例程以添加您想要的任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T07:21:28.963

In the custom control you can check if the folder/view you are going to work with is correct. Aka has the correct design. This can be done in the beforepageload event. When the design check reports an error it should be written to a log file and a 'nice' message should be displayed to the user.

The error logging could be done with the various logging projects on openntf like [xlogger](http://www.openntf.org/internal/home.nsf/release.xsp?action=openDocument&documentId=C735FEF019D4C8DD86257AC20067B1CC) When your code reports an error you can than set a scoped value called 'displayRepeat' to false. The repeat control ( and other controls ) should be rendered according to this displayRepeat value.

To display the nice error message to the user. Place a errors control on the top of your control and add the following code:

```
facesContext.addMessage( null, 
new javax.faces.application.FacesMessage( "your error message" ) ); 
```

# git - 在 Ruby 中安装和使用 git

> ID：14409203
> 
> 赞同：1
> 
> 时间：2013-01-18T23:18:49.047
> 
> 标签：git, rubygems

我一直在使用 putty 在我的 vps 上安装 ruby​​ gem，并取得了一些成功。我已经成功安装和配置了 sass、compass 等，但似乎在安装和使用 git 时遇到了问题。

我已经安装了gem

```
gem install git 
```

根据输出，这很好用，但从那时起我似乎无法用它做任何事情。例如

```
git -v 
```

告诉我

```
-jailshell: git: command not found 
```

有任何想法吗？我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T23:38:34.643

我不是 ruby​​ist，但[git gem](http://rubygems.org/gems/git)似乎是一个用 Ruby 操作 git 的库，而不是一个完整的 git 安装。如果要运行独立的 git 命令，则需要[安装 git 本身](http://git-scm.com/book/en/Getting-Started-Installing-Git)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T09:05:49.217

如果您使用的是 linux，则必须通过包管理器安装 git：

例如：（`sudo apt-get install git`在 ubuntu 等上）

它不是 ruby​​ 库，因此无法通过尝试`gem install git`. 请访问[http://git-scm.com](http://git-scm.com)了解如何在您的特定服务器上安装它的更多信息。

# c# - 使用 WPF 窗口模拟控制台

> ID：14409204
> 
> 赞同：0
> 
> 时间：2013-01-18T23:18:52.330
> 
> 标签：c#, wpf, console

首先，免责声明，你将要见证的是我近 20 年来的第一次编码。我是 C# 和 WPF 的新手，试图让我的头脑 WPF 不仅仅是一个挑战。

在过去的一个月里，我一直在开发一个宠物项目控制台应用程序，它一直表现良好。我现在正试图通过向项目添加现代 GUI 来更进一步。

我想通过使用包装在 WPF 窗口中的滚动条内的 WPF 文本块来模拟控制台（只是基本的输出功能）。您可以[在此处查看原始控制台应用程序的运行情况，](http://www.youtube.com/watch?feature=player_embedded&v=TKvSL9yvki4#!)以更好地了解我正在尝试模拟的控制台输出类型。但是我在基本函数调用方面遇到了一个主要问题，我认为这是因为我不完全了解 WPF/C# 如何在后台工作。

应用程序通过 Main() 在代码中启动，如下所示：

```
 class Program
{
    public static ConsoleWindow MainConsole = new ConsoleWindow();

    [STAThread]
    static void Main(string[] args)
    {
        Application MyApplication = new Application();
        MyApplication.Run(MainConsole);

        // The following code does not work, it produces no output in the Textblock
        MainConsole.WriteLine("Crystal Console");
        MainConsole.WriteLine("Version: " + Properties.Settings.Default.BuildVersion);
        MainConsole.WriteLine("Current Time: " + DateTime.Now);
        MainConsole.WriteLine("Last Login: " + Properties.Settings.Default.dateLastLogin);
    }
} 
```

问题是调用的方法似乎对文本块的内容没有任何影响。

尽管我将提供大量信息以防万一，但问题本身很简单：**为什么从同一窗口上的文本框控件获取内容时 Textblock 更新正常，但在以下情况下不显示任何更新在 Main() 中调用了相同的方法？**

出于测试目的，窗口有几个文本框，它们在窗口内调用 .WriteLine 方法，这可以工作，所以我知道 .WriteLine 代码没有问题，您可以在此处看到：

```
public void WriteLine(string Message = null, string Sender = null)
    {
        _Console.AddElement(new ConsoleElement(Sender, Message + "\n"));
        _Console.DisplayContent(ConsoleTextBlock);
        ConsoleScroller.ScrollToEnd();
    } 
```

这是控制台本身的代码，以防需要，“ConsoleElement”类本质上只是一个对象，其中包含要在文本块中显示的消息以及每个消息的格式。

```
class ConsoleStream
{
    IList<ConsoleElement> ConsoleElements = new List<ConsoleElement>();

    public void AddElement(ConsoleElement NewElement)
    {
        if (NewElement.Sender == null)  // Sender is System not user.
        {
            NewElement.Content = "     " + NewElement.Content;
            NewElement.Font = new FontFamily("Arial");
            NewElement.FontSize = 12;
        }
        ConsoleElements.Add(NewElement);
    }

    public void ClearElements()
    {
        ConsoleElements.Clear();
    }

    public void DisplayContent(TextBlock sender)
    {
        sender.Text = null;
        foreach (ConsoleElement Message in ConsoleElements)
        {
            //If message is a status update, i.e. has no sender, format it as a system message.
            if (Message.Sender != null)
            {
                sender.Inlines.Add(new Run(Message.Sender + ": ") { Foreground = Message.SenderColour, FontFamily = Message.Font, FontSize = Message.FontSize });
            }
            //if message has a sender it's either the user or the AI. Format it as a user message.
            if (Message.Sender != null) sender.Inlines.Add(new Run(Message.Content) { Foreground = Message.ContentColour, FontFamily = Message.Font, FontSize = Message.FontSize });
            else sender.Inlines.Add(new Run(Message.Content) { Foreground = Message.SystemColour, FontFamily = Message.Font, FontSize = Message.FontSize });
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T01:02:06.247

MyApplication.Run(MainConsole); 控制线程，它之后的代码直到关闭窗口后才会执行。

将代码移至 ConsoleWindow 的加载（或初始化）方法

# wcf - WCF 数据服务在添加服务引用时产生“找到不明确的匹配”错误

> ID：14409212
> 
> 赞同：0
> 
> 时间：2013-01-18T23:19:47.347
> 
> 标签：wcf, entity-framework

我有一个使用由 DBcontext 生成器工具生成的 POCO 类的应用程序。创建这些 POCO 类后，我将 Model.tt 文件复制到解决方案中另一个项目的不同命名空间。我更正了 Model.tt 文件中的引用以指向 edmx 文件。我创建了一个指向 DBcontext 的 WCF 数据服务。我还在 Model.Context.cs 文件中添加了一条 using 语句，以便上下文使用移动的 POCO 类。当我尝试读取 WCF 数据服务的元数据时，出现以下错误：

服务器在处理请求时遇到错误。异常消息是“找到不明确的匹配项。”。有关更多详细信息，请参阅服务器日志。异常堆栈跟踪是：

在 System.Type.GetProperty(String name, BindingFlags bindingAttr) 在 System.Data.Services.Providers .ObjectContextServiceProvider.PopulateMemberMetadata(ResourceType resourceType, IProviderMetadata workspace, IDictionary `2 knownTypes, PrimitiveResourceTypeMap primitiveResourceTypeMap) at System.Data.Services.Providers.ObjectContextServiceProvider.PopulateMetadata(IDictionary`2 knownTypes, IDictionary `2 childTypes, IDictionary`2 entitySets) 在 System.Data.Services.Providers.BaseServiceProvider.PopulateMetadata() 在 System.Data.Services.Providers.BaseServiceProvider.LoadMetadata() 在 System. Data.Services.DataService 1.CreateProvider `1.CreateMetadataAndQueryProviders(IDataServiceMetadataProvider& metadataProviderInstance, IDataServiceQueryProvider& queryProviderInstance, BaseServiceProvider& builtInProvider, Object& dataSourceInstance) at System.Data.Services.DataService`() 在 System.Data.Services.DataService`1.HandleRequest() at System.Data.Services.DataService`1.ProcessRequestForMessage(Stream messageBody) at SyncInvokeProcessRequestForMessage(Object , Object[] , Object[] ) at System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[] inputs, Object[] & outputs) 在 System.ServiceModel。 Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage41(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(MessageRpc& rpc) ) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher 的 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc& rpc)。在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet) 的 ImmutableDispatchRuntime.ProcessMessage2(MessageRpc& rpc)

如果我将 POCO 类留在包含 edmx 的项目中，则 WCF 数据服务可以正常工作。我可以检索元数据、创建服务引用并使用该服务。

什么可能导致“找到不明确的匹配”。错误信息？如何访问服务器日志并分析信息？

# javascript - DataTables - 最后一列固定宽度

> ID：14409227
> 
> 赞同：0
> 
> 时间：2013-01-18T23:21:46.430
> 
> 标签：javascript, jquery, css, html-table

这个想法是这样的：

我有一个加载 DataTables 的 jQuery，我知道我可以设置 "aoColumns" : "sWidth" 参数以使一列固定宽度并且它正在工作。

我遇到的问题是我有很多表，列的数量可变，并且我需要最后一个固定大小，无论该列是什么数字。有时可以是第 3^次，有时可以是第 8^次，有时可以是第 16^次，没关系。

甚至可能吗？

不，我不想为每个表调用 datatable jQuery，不，我不想修改结构中的任何内容，因为它现在工作得很好，只是可能向 Javascript 添加一些类或参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T00:48:10.270

像这样构造你的表：

```
<table class="tableClass">
    <colgroup>
    <col></col>
    <col></col>
    <col></col>
</colgroup>
<thead>
    <tr>
        <th>Column 1</th>
            <th>Column 2</th>
            <th>Column 3</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td>Cell 1</td>
        <td>Cell 2</td>
            <td>Cell 3</td>
    </tr>
</tbody>    
</table> 
```

这样，您的 jQuery 将只需要这样做：

```
$('.tableClass').each(function() {
    var self = this;
$(self).find('col:last').css('background-color', 'red'); 
}); 
```

该 jQuery 将在每个表中找到该类的最后一列，并在每个表的最后一个类上做任何你想做的事情。（我只是使用背景颜色来测试它。）

如果您所做的只是设置宽度，那么您也许可以侥幸逃脱`$(self).find('th:last')`，但`<colgroup>`and`<col>`是“正确”的方式。

# batch-file - 更新批处理文件版本

> ID：14409228
> 
> 赞同：1
> 
> 时间：2013-01-18T23:21:47.340
> 
> 标签：batch-file, version

假设我有一个名为`somefile_old.bat`. 网上有个新版本叫`somefile_new.bat`。如何从 在线查看是否有新版本`somefile_old.bat`，如果有，请下载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T23:27:12.027

1.  将 somefile_new.bat 的[散列](http://en.wikipedia.org/wiki/SHA-1)放在某处。
2.  计算 somefile_old.bat 的哈希值。
3.  比较两者。
4.  如果它们不一样，则下载新版本并处理旧版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T23:29:24.550

使用纯批处理，您只能在下载文件并比较两者后检查版本是否更新（您可以使用[bitsadmin](http://ss64.com/nt/bitsadmin.html)或更好的[wget](http://users.ugent.be/~bpuype/wget/)）。由于它是一个批处理文件，因此不会花费很长时间，并且可能是最快的方式..

# maven - 如何将单个 maven 依赖项的 jar 文件复制到 dest 目录？

> ID：14409233
> 
> 赞同：0
> 
> 时间：2013-01-18T23:22:14.183
> 
> 标签：maven, maven-bundle-plugin

我想将**com.XYjar**复制到目标目录**com/X/Z/target/distribution-0.0.1-SNAPSHOT/bundle**。此 Jar 文件的内容在运行时使用。

在**com.XZ**的 pom 文件中，我有以下依赖配置

```
<dependency>
  <groupId>com.X</groupId>
  <artifactId>com.X.Y</artifactId>
  <version>0.0.1-SNAPSHOT</version>
</dependency> 
```

但是，它不会像其他依赖项那样复制到捆绑目录中。

如何确保正确复制此依赖项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T00:19:17.353

如果它没有自动选择它，您可以使用 dependency:copy-dependencies 目标将它放在您想要的位置吗？

[http://maven.apache.org/plugins/maven-dependency-plugin/copy-dependencies-mojo.html](http://maven.apache.org/plugins/maven-dependency-plugin/copy-dependencies-mojo.html)

当您谈论捆绑目录时，我不确定您指的是什么。

# jquery - $.ajax() 可以在请求完成之前触发“成功”吗？

> ID：14409235
> 
> 赞同：1
> 
> 时间：2013-01-18T23:22:24.740
> 
> 标签：jquery, ajax

假设我正在`$.post()`向执行以下操作的脚本发出 AJAX 请求：

```
echo "foo";
sleep(60);  // block request for some time
echo "bar"; 
```

原始脚本会在看到“foo”时触发成功函数，还是在回显“bar”后最终完成 ajax 脚本时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T23:29:54.970

响应到达时可能有多个`readystatechange`事件，但`readyState`响应完成时唯一更改为 4（已加载）。

jQuery 库会在事件发生且属性为 4（已加载）`success`时调用该方法，并且属性显示成功的状态码（例如 200）。`readystatechange``readyState``status`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T23:26:50.870

在“酒吧”之后。:) 或者更准确地说，当它接收到状态码为 200 的 HTTP 标头时。这意味着脚本已完成执行。

# php - 如何在后台处理自动更新

> ID：14409236
> 
> 赞同：0
> 
> 时间：2013-01-18T23:22:26.840
> 
> 标签：php, javascript, mysql, ajax

我有

1.  1-数据库中的多个单元
2.  每个单元都有自己的更新时间（以秒为单位）
3.  具有动态内容的网页
4.  目前每次调用时都会嵌入自动刷新（2分钟），见下文

`function refreshPage(){`

```
minutes = 2;
seconds = 0;  
interval=120000;
getCheckedUnits(); //call to function that checks and updates stuff 
```

}

```
function timedRefresh(timeoutPeriod) {
    //refreshPage();
    setInterval(refreshPage, timeoutPeriod);
    countdown('countdown');
}

var interval;
var minutes = 2;
var seconds = 0;

function countdown(element) {
    interval = setInterval(function() {
        var el = document.getElementById(element);
        if(seconds == 0) {
            if(minutes == 0) {
                el.innerHTML = "Waiting for refresh";
                clearInterval(interval);
                return;
            } else {
                minutes--;
                seconds = 60;
            }
        }
        if(minutes > 0) {
            var minute_text = minutes + (minutes > 1 ? ' minutes' : ' minute');
        } else {
            var minute_text = '';
        }
        var second_text = seconds > 1 ? 'seconds' : 'second';
        el.innerHTML = 'Page will auto-refresh in: ' + minute_text + ' ' + seconds + ' ' + second_text + ' remaining';
        seconds--;
    }, 1000);
} 
```

我需要做的是使其对用户透明并根据需要调用更新（我有在数据库中设置的值）。

作为一种解决方案（在 JS-Ajax 中），我可以使用与上面相同的计时器（将其设置为 5 秒）并创建一个包含存储 id、上次更新时间和下次更新时间的对象的数组。然后我只能在当前时间大于下一次更新时间时更新每个对象。或者我可以通过 cron-job 来处理这个方法。

我以前从未这样做过，我想听听基于经验的意见。什么是最好的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T23:34:53.477

您在获取更大数据之前获取最后更新时间并进行比较的方案是解决此问题的一种完全有效的方法，但您可以考虑其他方法。特别是，您正在尝试实现的称为[服务器推送](http://en.wikipedia.org/wiki/Push_technology)。使用最后更新的时间戳可以近似于此，但诸如长轮询和（在未来/某些浏览器中）WebSockest 等替代技术是一些替代方法。

[Here is a better writeup to a similar question](https://stackoverflow.com/questions/8110550/is-there-a-real-server-push-over-http)。

# jquery - DataTables jQuery 代码应该去哪里？

> ID：14409241
> 
> 赞同：0
> 
> 时间：2013-01-18T23:22:37.197
> 
> 标签：jquery, ruby-on-rails-3, datatables

这是一个真正的菜鸟问题，但是在努力寻找答案之后，也许毕竟不是那么菜鸟：我到底应该把 jQuery 应用程序 DataTables 放在哪里，以便服务器端处理开始工作？在 datatables.net 和 datatables 标签下都找不到答案。（这是使用 Rails 3.2.2、ruby 1.9.3p362 和 datatables 1.9；所有必需的 gem 都出现了）

我的 jquery 源位于 public/jquery.js 和 public/jquery.dataTables.js

这是我的 app/assets/javascripts/application.js 中的内容：

```
//= require jquery
//= require_tree . 
```

这是我在 app/assets/javascripts/genotypes.js 中的内容：

```
$(document).ready(function() {
    $('#genotypes').dataTable( {
        "bProcessing": true,
        "bServerSide": true,
         sAjaxSource: $('#genotypes').data('source')
    } );
} ); 
```

这是相关视图的 index.html.erb：

```
<h1>Listing genotypes</h1>

<table id="genotypes" class="display" data-source="<%= genotypes_url(format: "json") %>">
  <thead>
    <tr>
      <th>Marker</th>
      <th>LabID</th>
      <th>SubjectID</th>
      <th>Box</th>
      <th>Well</th>
      <th>Allele1</th>
      <th>Allele2</th>
      <th>Run date</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>

  <tbody>
  </tbody>
</table>

<br />

<%= link_to 'New Genotype', new_genotype_path %> 
```

到目前为止，当我加载基因型视图（http://localhost:3000/genotypes）时发生的所有事情，我只得到列标题，*没有*别的......

非常感谢任何帮助....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:29:56.777

您的`javascript`文件应该存在于 中`app/assets/javascripts/`，而不是 public 文件夹中。看看这个： http: [//guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)。

尝试`jquery.js`进入该目录，然后就像 Ryan 在您提到的 Railscasts 中所说的那样，将这一行添加到您的`application.js`：

`//= require dataTables/jquery.dataTables`.

对您的 css 文件执行相同的操作并尝试一下。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T23:30:09.917

您需要引用 DataTables js 和 css 文件。DataTables 通过在浏览器中编辑 HTML 来工作。我知道没有服务器端组件。

您能否检查它们是否在您的页面上被引用，并使用 Chrome 或 Firefox / Firebug，检查浏览器是否确实能够访问它们？

# node.js - 使用 node / express 跟踪路由错误

> ID：14409242
> 
> 赞同：0
> 
> 时间：2013-01-18T23:22:42.360
> 
> 标签：node.js, express

我最近与[诗人](http://jsantell.github.com/poet)建立了我的快递网站。我可以使用 post.url 和*提供给所有视图*的所有本地变量，除了 url 路由 - 例如，在我的 blog.jade 视图中：

```
 ul.blog-preview$
     each post in postList$
       li$
         a(href=#{post.url}) #{post.title}$ 
```

视图渲染得很好，但是当点击 post.url 时路由快递会尝试：“http://localhost:8080/undefined/post/poet-testundefined” 我试图到达的帖子被称为“poet-test” . 所以，我尝试在视图中打印出 post.url

```
p #{post.url} 
```

令我惊讶的是，它作为post/poet-test打印得很好。因此，显然我尝试浏览到 localhost:8080/post/poet-test，但这也不起作用，因为 post.title 上的引用错误，我怀疑这是一个问题，因为帖子在路由中迷路了。

这是我的 site.js（或大多数人称为 app.js），我已经包含了我认为必须与解决此问题相关的内容。

```
var express   = require('express')
  , app       = module.exports = express()
  , http      = require('http')
  , poet      = require('poet')(app)

poet
  .createPostRoute()
  .createPageRoute()
  .createTagRoute()
  .createCategoryRoute()
  .init(function(locals) {
    locals.postList.forEach(function ( post ) {
  console.log('loading post: ' + post.url)
})
  })

app.configure(function(){
  //...etc
  app.use(app.router);
  //...etc
  app.use(express.static(__dirname + '/public'));
});
//Dev settings
app.configure('development', function(){
  app.use(express.errorHandler({ dumpExceptions:true, showStack:true }));
  app.set('port', process.env.PORT || 8080);
  app.use(express.logger('dev'));
});
//Production settings
//....etc

// controllers - load them
controllers = ["pages", "blog"]
for (i in controllers) {
  controller = require('./controllers/' + controllers[i]);
  controller.setup(app)
}

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

如您所见，我检查 post.url 以检查它在 poet.init(function(post) { ... }) 中加载的每个帖子，并且每个帖子都使用正确的 /post/title url...所以，我有点卡在这里。也许使用 app.router() 或诗人特定的解决方案以某种方式记录路由。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:40:40.417

查看 Poet repo 中的示例——你不应该逃避你的 hrefs .. 看起来 Poet 中的 url 很好，只是与 Jade 搏斗，试试这个：

```
a(href=post.url) post.title 
```

[https://github.com/jsantell/poet/blob/master/examples/views/includes/postSnippet.jade#L3](https://github.com/jsantell/poet/blob/master/examples/views/includes/postSnippet.jade#L3)

# php - 用PHP搜索json

> ID：14409244
> 
> 赞同：-1
> 
> 时间：2013-01-18T23:23:02.993
> 
> 标签：php, json

我有一个格式为 json 的文件

```
{
    "list" : {
           "1" : {
                "thing1" : "description",
                "thing2" : "description",
                "thing3" : "description"
            },
           "2" : {
                "thing1" : "description",
                "thing2" : "description",
                "thing3" : "description"
            },
            etc.

} 
```

我需要根据事物 2 的描述搜索并返回数据，但我还需要返回列表的编号。问题是 json 文件中的数字都是乱序的，所以我不能在遍历它们时只增加一个变量。

目前我的代码设置如下：

```
$json = json_decode($response);
foreach($json->list as $item) {
        $i++;
        if($item->thing2 == "description") {
            echo "<p>$item->thing1</p>";
            echo "<p>$item->thing2</p>";
            echo "<p>$item->thing3</p>";
            echo "<p>position: $i</p><br /><br />";
        }
    } 
```

不幸的是，每次 $i 变量重新调整错误位置时，位置都会出现问题。如何返回具有正确 thing2 描述的项目的标题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T23:29:46.607

改变

```
foreach($json->list as $item) {
    $i++; 
```

至

```
foreach($json->list as $i => $item) { 
```

[（这在对象迭代](http://php.net/manual/en/language.oop5.iterations.php)的 PHP 文档中有所描述。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T23:29:31.460

`json_decode()`设置to的第二个参数`TRUE`返回一个关联数组，它更有利于您想要做的事情：

```
$json = json_decode($response, TRUE);
foreach($json['list'] as $key => $item) {
    if($item['thing2'] == "description") {
        echo "<p>$item['thing1']</p>";
        echo "<p>$item['thing2']</p>";
        echo "<p>$item['thing3']</p>";
        echo "<p>position: $key</p><br /><br />";
    }
} 
```

应该做的伎俩。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-18T23:30:32.207

[json_decode](http://www.php.net/manual/en/function.json-decode.php)可以选择返回关联数组 ( `$assoc = true`)。在此之后，只需访问`$associative_array["2"]`.

# android - 如何获取 Android 上的应用程序列表？

> ID：14409245
> 
> 赞同：0
> 
> 时间：2013-01-18T23:23:04.343
> 
> 标签：android

我想做一些你可能称之为动态文件夹的东西，其中包含一个列表应用程序，这些应用程序由例如 id（包名称）或可见名称的某些部分过滤。

所以我需要一些可以用于联系人的东西：

```
Cursor contacts = managedQuery(ContactsContract.Contacts.CONTENT_URI,
                    new String[]{
                        ContactsContract.Contacts.DISPLAY_NAME,
                        ContactsContract.Contacts._ID
                    },
                    ContactsContract.Contacts.HAS_PHONE_NUMBER + "='1'"
                    , null, null) 
```

但我需要查询以列出应用程序。

从列表中选择时，我还需要一种运行应用程序的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T23:32:29.280

您可以编写如下内容：

```
 PackageManager pm = this.getPackageManager();

    Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);
    mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);

    List<ResolveInfo> appList = pm.queryIntentActivities(mainIntent, 0);
    Collections.sort(appList, new ResolveInfo.DisplayNameComparator(pm));

    int found = -1;
    for (int i = 0; i < appList.size(); i++) {
        String pack = appList.get(i).activityInfo.applicationInfo.packageName;
        if (pack.equals("com.mypackage")) // Your custom criteria comes here...
            found = i;
    }
    // Launch found application
            Intent intent = new Intent();
        intent.setAction(Intent.ACTION_MAIN);
        intent.addCategory(Intent.CATEGORY_LAUNCHER);
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
        intent.setComponent(new ComponentName(appList.get(found).activityInfo.applicationInfo.packageName, appList
                .get(found).activityInfo.name));
        startActivity(intent); 
```

# php - PHP，来自字符串的虚拟文件，无需写入硬盘

> ID：14409250
> 
> 赞同：4
> 
> 时间：2013-01-18T23:23:36.277
> 
> 标签：php

如果我有一个字符串（包含pdf文件）可以制作一个“虚拟”文件以避免写入硬盘，以便以后用于需要现有文件的功能？

```
// theorical code

$file=stringToVirtualFile($string);

require($file); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T23:29:06.240

您可以[使用特殊的 php://memory](http://php.net/manual/en/wrappers.php.php)来获得引用内存数据而不是写入文件的数据的文件句柄。你也可以使用 php://temp 来建立一个文件支持的内存存储（如果文件默认超过 2MB，它将被写入磁盘）。

# backbone.js - Safari 中未触发的主干事件

> ID：14409251
> 
> 赞同：4
> 
> 时间：2013-01-18T23:23:36.633
> 
> 标签：backbone.js

作为学习练习，我将一个 sinatra/backbone 应用程序转换为 Rails 环境。我让它在 Chrome 和 Firefox 上运行，但它在 Safari 上不起作用。原来的应用程序 [http://backbone-hangman.heroku.com](http://backbone-hangman.heroku.com)也不能在 Safari 上运行。当您单击“新游戏”时，它似乎不会触发事件。Safari 控制台没有显示任何错误（尽管我对 Safari 的开发人员工具并不熟悉，因为我从不使用它们）。

由于这里有应用程序的实时版本[http://backbone-hangman.heroku.com](http://backbone-hangman.heroku.com) 我不会发布很多代码，但这是设置点击事件的视图代码#new_game，触发 startNewGame功能。Safari 中什么也没有发生。原文的源代码在这里[https://github.com/trivektor/Backbone-Hangman](https://github.com/trivektor/Backbone-Hangman)

我用谷歌搜索了一下，发现一些提到 Safari 以不同的方式处理事件，但找不到解决方案。有什么可以推荐的吗？

```
$(function() {

  window.OptionsView = Backbone.View.extend({
    el: $("#options"),
    initialize: function() {
      this.model.bind("gameStartedEvent", this.removeGetAnswerButton, this);
      this.model.bind("guessCheckedEvent", this.showGetAnswerButton, this);
    },
    events: {
      'click #new_game': 'startNewGame',
      'click #show_answer': 'showAnswer'
    },
    startNewGame: function() {
      this.model.new();
    },
    removeGetAnswerButton: function() {
      $("#show_answer").remove();
    },
    showGetAnswerButton: function(response) {
      console.log("showGetAnswerButton");
      console.log(response);
      var threshold = this.model.get("threshold");
      console.log(threshold);
      if (response.incorrect_guesses == this.model.get("threshold")) {
        $(this.el).append('<input type="button" id="show_answer" class="action_button" value="Show answer" />');
      }
    },
    showAnswer: function() {
      this.model.get_answer();
    }
  })

}) 
```

更新

根据 OP 下面的评论之一，我发布了更多代码。这是hangman.js，其中对象被实例化

```
var game = new Game

  var options_view = new OptionsView({model: game});

  var characters_view = new CharactersView({model: game});

  var hint_view = new HintView({model: game});

  var word_view = new WordView({model: game});

  var hangman_view = new HangmanView({model: game});

  var answer_view = new AnswerView({model: game});
  var stage_view = new StageView({model: game}); 
```

视图和模型像这样附加到窗口

```
window.AnswerView = Backbone.View.extend({ ... 
```

更新 除了在站点范围内加载的 Backbone、jQuery 和 Underscore 之外，还为 Rails 系统中的这个特定应用程序加载了以下文件。

![在此处输入图像描述](../Images/1add15374c41119ebed45c19a78e3f39.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:16:21.930

[这是 jQuery + Safari 问题（document.ready）](https://stackoverflow.com/questions/7311106/safari-jquery-compatibility)

您可以将脚本移动到 body 标记内并删除`$(function(){ /**/ })`每个文件中的包装器。

我还添加了requirejs支持并提出了[拉取请求](https://github.com/trivektor/Backbone-Hangman/pull/1)

# 编辑：

首先对不起我的英语:)

* * *

### 文件视图/index.haml：

我们应该在页面底部嵌入js（避免Safari错误）

`= javascript_include_tag "javascript/require.js", :"data-main" => "javascript/config"`

这`javascript/config`是 requirejs 配置的路径。

* * *

### 文件公共/javascript/config.js：

`"deps" : ["hangman"]`

这意味着应用程序将以`hangman.js`

* * *

### 文件公共/javascript/hangman.js：

我们不需要`$(function() {`包装器，因为我们从正文和文档初始化的脚本已经“准备好”

```
define([
  'models/game',
  'views/answerView',
  /* ... */
],
function(Game, OptionsView, /* ... */) {
  // ...
} 
```

在这里我们加载我们的模块（第一个数组元素将在第一个函数参数中可用，依此类推）

* * *

### 其它文件

我们只是替换`$(function() {`为`define(['backbone'], function(Backbone) {`

在第一行中，我们加载主干模块。当它被获取时，它将在匿名函数中可用（第一个参数 - 骨干）

接下来我们应该返回视图以避免`undefined`模块值（`public/javascript/hangman.js`文件应该初始化很多视图。它不能初始化`undefined`它应该初始化`Backbone.View`我们应该返回）

* * *

要了解更多信息，您应该阅读 requirejs 文档。我建议你从[这篇文章开始](http://jspro.com/toolsandlibraries/understanding-requirejs-for-effective-javascript-module-loading/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T00:58:15.980

试试这个。

```
var OptionsView = Backbone.View.extend({
    el: $("#options"),
    initialize: function() {
      this.model.bind("gameStartedEvent", this.removeGetAnswerButton, this);
      this.model.bind("guessCheckedEvent", this.showGetAnswerButton, this);
    },
    events: {
      'click #new_game': 'startNewGame',
      'click #show_answer': 'showAnswer'
    },
    startNewGame: function() {
      this.model.new();
    },
    removeGetAnswerButton: function() {
      $("#show_answer").remove();
    },
    showGetAnswerButton: function(response) {
      console.log("showGetAnswerButton");
      console.log(response);
      var threshold = this.model.get("threshold");
      console.log(threshold);
      if (response.incorrect_guesses == this.model.get("threshold")) {
        $(this.el).append('<input type="button" id="show_answer" class="action_button" value="Show answer" />');
      }
    },
    showAnswer: function() {
      this.model.get_answer();
    }
  }); 
```

您的代码不需要在文档中准备好（它不是直接操作 DOM，它只是声明一个对象）；

不过，请确保 game.js 遵循您的所有声明。

Safari 在将变量添加到全局对象时似乎存在问题。在全局上下文中使用 var 确保 window.OptionsView 存在。您将来可能要考虑使用 require.js 来管理所有这些全局对象问题。

# rbenv - 带钩子的 rbenv

> ID：14409255
> 
> 赞同：0
> 
> 时间：2013-01-18T23:23:46.633
> 
> 标签：rbenv

我对 ruby​​ 和 rbenv 完全陌生，但我正试图让这个“bwoken”应用程序与 rbenv 一起工作。

这是 bwoken，它用于 iOS UIAutomation 测试： [https ://github.com/bendyworks/bwoken](https://github.com/bendyworks/bwoken)

我的问题是如何为 rbenv 添加钩子？

它说：
`Ensure your after_cd_bundler rvm hook is enabled:`

`$ chmod u+x ~/.rvm/hooks/after_cd_bundler Then, add the following line to your Rakefile:`

好的，所以我在这里看到版本历史记录中的评论
[https://github.com/sstephenson/rbenv](https://github.com/sstephenson/rbenv)

这么说：
`Added /usr/lib/rbenv/hooks to the plugin hook search path.`

`Added /usr/local/etc/rbenv.d to the list of directories searched for rbenv hooks.`

问题是添加钩子的原始默认位置是什么？他们在任何地方都没有提到它。正确的放置位置在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T01:08:47.303

对于 rbenv，您必须使用点 (.) 文件，例如 .rbenv_version。该插件在 rvm 上下文中讨论配置。两者都是在同一系统上拥有多个 ruby​​ 版本的不同方式。

# git - 如何在不克隆的情况下从 git 存储库获取 SHA1 哈希？

> ID：14409266
> 
> 赞同：6
> 
> 时间：2013-01-18T23:24:38.000
> 
> 标签：git, hash

如果*U*是一个 git URL（例如，一个 ssh URL），我如何在*没有*U的本地克隆的情况下找到*U*的分支或标签的 SHA1 哈希？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T23:31:29.357

您可以使用[`git ls-remote U`](http://www.kernel.org/pub/software/scm/git/docs/git-ls-remote.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-30T07:19:40.277

您可以使用： `git ls-remote U branch | cut -c1-7` 其中，'branch' 指定来自该特定分支的提交哈希

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-19T01:10:37.120

如果您正在使用 ，请确保使用 Git 2.28（2020 年第三季度）[`git ls-remote`](https://git-scm.com/docs/git-ls-remote)，因为 SHA-256 迁移工作仍在继续。
自 Git 2.19（2018 年第二季度）以来，Git 准备从 SH1 哈希到 SHA2 的转换，详见“[为什么 Git 不使用更现代的 SHA？](https://stackoverflow.com/a/47838703/6309) ”

参见[提交3716D50](https://github.com/git/git/commit/3716d50dd5c8ee7e5ccaa89fcbfff2cd1b82ad1d)，[提交6161CE7](https://github.com/git/git/commit/6161ce7bbeeb128dd1a176d8355e2ce18168b16a)，[提交371C407](https://github.com/git/git/commit/371c4079f4d14bd9412fc62478407b319f13e3e1)，[提交4DDD3F5](https://github.com/git/git/commit/4ddd3f506390af217fb86508691cf07f3279e6d2)，[提交F7C6A3B](https://github.com/git/git/commit/f7c6a3bf080aae499e0aa0c69aa0d86423bd24f8)，[提交8FC7003](https://github.com/git/git/commit/8fc700354045ccf1eb3c10fe0f7d6cb2c6427628)，[提交](https://github.com/git/git/commit/54cbbe4c6e4f82a765e70bcd28172e7d56542991)54CBBE4 ，提交97997E6 ，[提交793731F ，](https://github.com/git/git/commit/97997e6ad2790e58c727c180548a3d0073c4c1d2) [793731F](https://github.com/git/git/commit/793731f742ab1df28deb289714e61244e3de3b37)，[提交586740A](https://github.com/git/git/commit/586740aa6e70013a837e0d9f3e0ea04c7f180fbd)，[提交AC093D0](https://github.com/git/git/commit/ac093d0790cf9073e6cb03744b1d0fbc1e07d3f7)（fists AC093D0（fist） 505（fists） [50.202020202020202026](https://github.com/git/git/commit/d96dab868e63cd5a55b50e1d8a23b640e17413bb)，[d9331](https://github.com/git/git/commit/f0af95f42455b03e3dd83f27f24cb6203eef99ae)， d96 and nd.26，d91 ， d9 [and dynd.cland and d9 nd.cl.and and d9 nd.cly nd and d9 nd.cly nd nd nd and](https://github.com/git/git/commit/9de0dd361c9ea2ca6eca14a7dd43fe11d170a253) [d9 n](https://github.com/git/git/commit/ab67235bc4900d8203a1a6b6f33cf8afa845e43e) . ,[提交 67e9a70](https://github.com/git/git/commit/67e9a70741c577b6e49bd60556779c7ab32ae4f8) ,[提交 7f46e7e](https://github.com/git/git/commit/7f46e7ead1d82538866265228f9d743f0e93e17a) ,[提交 059d806](https://github.com/git/git/commit/059d8066f843a09c615be2b7c7e42fd393852ed6) ,[提交 88a09a5](https://github.com/git/git/commit/88a09a557c7571760b3ded75764bf3b1fd0e8bf0) ,[提交 1610dda](https://github.com/git/git/commit/1610dda8ae5190438b3de205c2a0f87dfe878ca3)，[提交629DFFC](https://github.com/git/git/commit/629dffc461f3631bb7acfe905d805caa38b49dfa)，[提交49C9A2F](https://github.com/git/git/commit/49c9a2ffe59b2e89ed4fd3f90b3dbc5d67760d74)，[提交D553ACE](https://github.com/git/git/commit/d553acebeeda584e0e749cfe04dad450c667de90)，[提交4B83120](https://github.com/git/git/commit/4b831208bb365fedd0cce286e0c27627598d9393)，[提交9DC78C2](https://github.com/git/git/commit/9dc78c20dc2aa5ed073a95dc35880d940658a5be)，[提交B65DC2C](https://github.com/git/git/commit/b65dc2cebd6ac7d869895297ed5061af15428544)，提交7F60501 ，[提交](https://github.com/git/git/commit/9a9f0d3fc0888599723812be62fa2d7b3cc4d2d6)8B85EE4 ，提交452E356 ，[提交](https://github.com/git/git/commit/7c97af4d64100bf9ce4b335ee91e743378e2e181)BB095D0 ，[提交](https://github.com/git/git/commit/48bf1415896db0f890530dcd182f33c2f0df10a8)[7C601DC](https://github.com/git/git/commit/bb095d087557b9ded2245270d3fac64ddc774af6)，[commit](https://github.com/git/git/commit/8b85ee4f47aadc23c8806bff5540baf819bbde95) [7C601DC](https://github.com/git/git/commit/7f60501775b2a0e0dcabb98fde3eb46fd980a8cc)，[commit](https://github.com/git/git/commit/452e35684f97be1ef3b1fa608b8ec7fbaebf18a6) [48BFF1，841141，84114141，84.141，84.1411410](https://github.com/git/git/commit/7c601dc333b6cd86a84e77f41c968a3bb773ba36) [，，，，，，](https://github.com/git/git/commit/84eca27aebeb11ce96441f957f2595c28d89fe36)[y](https://github.com/git/git/commit/82db03abbbce3cfe28f42a16a16c2b5723974954) [84](https://github.com/git/git/commit/122037c2edec0c2bbcbfe52679fddc438165ab54) bfffffffffff ，,, [9a9f0d3](https://github.com/git/git/commit/9a9f0d3fc0888599723812be62fa2d7b3cc4d2d6)，[提交 1349ffe](https://github.com/git/git/commit/1349ffed6dfa8ddcf9f48ede3b9cfd16fdde16fc)，[提交 2c6a403](https://github.com/git/git/commit/2c6a403d96cd5d31f1638679502f06e2b953647f)，[提交 bf30dbf](https://github.com/git/git/commit/bf30dbf82611e3bb7e2bbac1d38bb38ad10c8636)，[提交 14570dc](https://github.com/git/git/commit/14570dc67d2a500dfb9f33a7445bdbd6133af4ac)，[提交 92315e5](https://github.com/git/git/commit/92315e50b275deee8e84d28ee1ff1ad555a5de36)（2020 年 5 月 25 日）和[提交 b8615c3](https://github.com/git/git/commit/b8615c3c63246ae4340239fbad2e6b64cbeb0fa5)，[提交 a114296](https://github.com/git/git/commit/a1142963710fd71e5e6e0feb0c4020e977301af7)（2020 年 5 月 13 日），作者：[brian m。卡尔森 ( `bk2204`)](https://github.com/bk2204) .
^(（由[Junio C Hamano 合并 -- `gitster`--](https://github.com/gitster)在[提交 1221085](https://github.com/git/git/commit/12210859da0c16c644dab658d9e1ef671ec28788)中，2020 年 7 月 6 日）)

> ## [`remote-curl`](https://github.com/git/git/commit/97997e6ad2790e58c727c180548a3d0073c4c1d2): 避免使用 ls-remote 截断引用
> 
> ^(签字人：brian m. 卡尔森)

> 通常，`remote-curl`传输助手知道我们正在使用的哈希算法，因为我们在具有适当哈希算法集的存储库中。
> 
> 但是，当在存储库*之外*使用时，我们不会正确初始化哈希算法，因此请使用打印与我们检测到的算法相对应的 ref。[`git ls-remote`](https://git-scm.com/docs/git-ls-remote) *`hash_to_hex_algop`*

 *这很重要，因为在您的情况下，您将`git ls-remote U`在任何本地 Git 存储库之外使用。*

# xml - 如何将 Wikipedia XML 转储解析为每行一个文档？

> ID：14409267
> 
> 赞同：0
> 
> 时间：2013-01-18T23:24:40.090
> 
> 标签：xml, parsing, wikipedia, corpus

对于一个项目，我需要将 Wikipedia XML 转储转换为纯文本语料库文件，该文件每行保留一个文档。我找到了几个工具来将 XML 转储拆分为几个不同的文件，但这不是所需的格式，我担心管理数百万个小文件会给我已经很慢的 HDD 增加不必要的工作。

对此有什么好的程序建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T11:31:37.170

您可以使用任何流式 XML 解析器逐页读取转储文件，从页面文本中去除换行符并将其打印出来。如果您告诉我们您使用的语言，我们或许可以提供更具体的建议。

（如果你使用 Perl，我看到很多人推荐 XML::Twig 模块，但即使是普通的旧 XML::Parser 也可以做到这一点。）

# c# - 将图像加载到 XAML 图像中

> ID：14409268
> 
> 赞同：0
> 
> 时间：2013-01-18T23:24:46.010
> 
> 标签：c#, xaml, windows-runtime, windows-store-apps, winrt-xaml

如何将图像加载到图像中？我试过了

```
 private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        string path = "D:/baby.jpg";
        BitmapImage bitmap = new BitmapImage(new Uri(path, UriKind.Relative));
        imagebox.Source = bitmap;
    } 
```

但是当我点击按钮时，什么也没发生。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T23:53:52.687

Windows 应用商店应用不支持绝对路径。您需要使用其中一种有效的方案，但这不适用于根目录中的文件。在这种情况下，您将需要使用文件选择器之类的东西访问 StorageFile 并在从文件打开的流上调用 imagebox.SetSource()。

# c++ - 将临时变量写入自己的新变量会更好吗？

> ID：14409272
> 
> 赞同：1
> 
> 时间：2013-01-18T23:25:00.940
> 
> 标签：c++, variables, copy

我经常遇到这种情况，你有一个临时变量，它的值需要修改，修改后*你不需要访问旧值*。

```
// Find out if the jello will be jiggly
// at a certain time
bool IsJiggly( JelloType jello, float time )
{
    // JelloType has some weird overloads..
    jello = jello + time ; // I don't need the unrefrigerated jello,
    // _so I overwrite jello_..

    return jello.jiggles() ;
}

bool IsJiggly( JelloType jello, float time )
{
    JelloType jello2 = jello + time ; // I don't need the unrefrigerated jello,
    // but I create a new variable anyway, 
    return jello2.jiggles() ;
} 
```

（我意识到上面的例子有些做作，即`JelloType`应该有一个成员函数`operator+=`..但情况不是！）

所以，问题是： **_在 C++ 中，*覆盖*变量或创建一个新变量并使用它更好吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T23:37:49.323

编译器可能会在几乎所有情况下优化差异。

请注意，简单地调用您的函数会导致`jello`被复制。如果复制 a`JelloType`很便宜，那么就没有问题。如果它很昂贵，那么您可能应该将 const 引用传递给它。

在你的第二个例子中，你引入了`jello2`临时的，你——理论上——调用另一个复制构造函数。如果这有副作用，那么编译器将无法优化它。如果它没有副作用（一个好的复制构造函数不应该*有*副作用），那么编译器可能会消除临时的（因为你的`jello`参数已经是一个临时副本）。

有时，制作副本是有意义的，例如，如果副本的名称有助于理解。如果该副本不能使代码更易于理解，并且您已经制作了一个临时副本，因为您传入的是副本而不是引用，那么我可能不会引入`jello2`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T23:30:54.273

您的代码可以通过删除临时对象并通过时间来发挥更好的编码风格来增强`jiggles`功能，也可以在返回 bool 时重命名为`jiggles`。`IsJiglly`另外一个 const 引用应该足够了，而不是对象副本（也许编译器会优化掉副本？）：

```
bool IsJiggly(const JelloType& jello, float time )
{
   return jello.IsJiggly(time);
} 
```

如果编译器不删除副本，至少这个函数与你的两个函数相同可以收集更好的性能。并且它的功能设计更好，更直观，更易于维护。

***在 C++ 中，覆盖变量或创建一个新变量并使用它会更好，性能明智吗？***

这不是真正的语言问题，它取决于应用程序设计。如果 JeloType 是很小的对象，复制起来非常便宜（比复制引用便宜），那么我可能不在乎复制它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T00:53:32.757

好吧，我不得不说不，不，先生。

C++ 优于 C 和 C 优于普通机器代码的整个想法是为代码赋予一些人类可以理解的“含义”，并使编译器能够强制执行设计决策（函数可见性等）。特别是对于 C++，它允许您将变量和函数分组到可以与实际问题对象相关的“对象”中。如果有的话，优化应该是你脑子里最后一件事。与原始性能相比，您的项目更有可能因施工难度、错误和不可维护性而失败。

呜呜……

1）如果 jello 是一个简单的计数器，那么当然，你不需要保存旧值。我们都知道它会随时间递增，我们都知道 + 会做什么，并且我们在使用时都会小心。我只是建议将其称为 jelloTime 或其他名称。

2）如果果冻是一个对象，那么NOOO：

Jello 应是与“真实”业务对象相关的实体，因此：

a) + 不得用于添加时间或其他任何内容。任何人都无法知道这一点，果冻+时间对我来说毫无意义。（我的团队知道这不是一个有效的答案）。添加一个名为 .addFrozentTime() 的方法或其他方法。（避免 addTime()，仍然不清楚……）。

b) 此外，jello 将一些 jello 永远称为实体，因此方法永远不会改变对象的身份，只会改变它的状态。（享元是一个例外，但这不是重点）所以要么：

B1）您的评论是错误的：

// 我不需要未冷藏的果冻

它是不同状态下的同一个对象。说“果冻现在冷藏”并保留变量……</p>

或者

B2）代码错误：

果冻=果冻+时间

*   创建一个不同的果冻，然后当然永远不要为新对象重用旧变量！稍后会有人来，但无法分辨，只是在错误的对象上调用 jello,xxx。

因此，答案是“视情况而定”，但无论哪种方式，您都需要修改代码。

我的 2 cts 我只是想帮忙。

# jquery - jquery图片到同一页面弹出

> ID：14409274
> 
> 赞同：0
> 
> 时间：2013-01-18T23:25:10.580
> 
> 标签：jquery, html, css

第一次在这里发帖，虽然时不时关注一些帖子。所以，大家好。

有一个快速的问题，我还没有找到在线等的答案。我有一个模板我正在拆开，用它来重新构建我的网站，让它只有一个页面，带有调用隐藏子页面的链接。保持简单等。

但我遇到了一个问题，即允许图库中的图片链接弹出页面，而不是原始的 .png 文件以获取信息。我喜欢 .png 路线，但我需要放置外部页面和视频等的链接，因此需要指向子页面的图片链接，而不是 .png 文件。

这是一个链接 [.zip at 3.4mb] 到实际模板，您可以下载并使用它来了解我的意思。 [http://www.Smokingbunny.co.uk/downloads/cream%20template.zip](http://www.smokingbunny.co.uk/downloads/cream%20template.zip)

很可能，我的运气，这很容易。但我只是看不出现在该做什么。花了一段时间寻找答案和测试路线，但没有运气。所以这就是我问的原因。

感谢您提前提供任何答案

## 刘易斯·爱德华兹

吸烟兔网

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T23:36:44.330

首先，您需要禁用灯箱插件以防止您的图片点击运行该功能。

`$('#img_slider li .pic').fancybox({'titlePosition': 'inside', 'overlayColor':'#000'});`删除`line 88`或评论`scripts.js`

接下来，您可以使用当前的 picHold div 链接到您的子页面。添加一个 ID/href（它将链接到哪里）来链接锚点。

```
 <div class="picHold">
<a id="mySubpage" class="pic" rel="Appendix" href="#!/mySubpage"><span class="zoomSp"></span><img src="images/galleryIcon1.jpg" alt=""></a>
</div> 
```

然后复制您的其他内容容器 (li) 并为其提供您新创建的 ID。

例如

```
 <li id="mySubpage">
                   <div class="box">
                        <div class="closePlane">
                            <a class="closeButton" href="#!/pageGallery"><img src="images/closeIcon.png" alt=""></a>
                     </div>
                    <div class="containerContent">
                    <h2>Subpage Policy</h2>
                        <div class="col1">
                            <div class="Btns1">
                                <a href="#" class="upBtn"></a>
                                <a href="#" class="downBtn"></a>
                            </div>
                            <div class="scroll1">

                                <p class="padBot4">Consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.</p>
                                <p class="padBot4">At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus. Duis autem vel eum iriure dolor in hendrerit.</p>
                                <p>Consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.</p>
                            </div>
                        </div> 
                    </div>
               </div>
            </li> 
```

你很高兴去！测试/工作。

# ruby-on-rails - 为模型名称唯一性编写测试

> ID：14409281
> 
> 赞同：0
> 
> 时间：2013-01-18T23:25:39.813
> 
> 标签：ruby-on-rails, rspec

我有一个属于用户模型的教程模型。我希望教程标题在每个用户级别上都是唯一的。因此，两个用户可以拥有具有相同标题的教程，但一个用户不能拥有两个具有相同标题的教程。我的测试失败了，但我知道我正在纠正过滤掉重复的标题。我的测试有什么问题？

```
# model - tutorial.rb
class Tutorial < ActiveRecord::Base
  attr_accessible :title
  belongs_to :user

  validates :user_id, presence: true
  validates :title, presence: true, length: { maximum: 140 }, uniqueness: { :scope => :user_id }
end

# spec for model
require 'spec_helper'
describe Tutorial do
  let(:user) { FactoryGirl.create(:user) }
  before do
    @tutorial = FactoryGirl.create(:tutorial, user: user)
  end

  subject { @tutorial }

  describe "when a title is repeated" do
    before do
      tutorial_with_same_title = @tutorial.dup
      tutorial_with_same_title.save
    end
    it { should_not be_valid }
  end
end

# rspec output
Failures:
  1) Tutorial when a title is repeated 
     Failure/Error: it { should_not be_valid }
       expected valid? to return false, got true
     # ./spec/models/tutorial_spec.rb:50:in `block (3 levels) in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T00:10:35.027

测试的问题是这一行：

`it { should_not be_valid }`

该规范检查`valid?`您的测试主题，即`@tutorial`- 这是有效的。

**建议重构：**

```
describe Tutorial do
  let(:user) { FactoryGirl.create(:user) }
  before do
    @tutorial = FactoryGirl.create(:tutorial, user: user)
  end

  subject { @tutorial }

  describe "when a title is repeated" do
    subject { @tutorial.dup }
    it { should_not be_valid }
  end
end 
```

# javascript - 如何使用 javascript 更改 JQuery Mobile 按钮图标

> ID：14409282
> 
> 赞同：2
> 
> 时间：2013-01-18T23:25:52.793
> 
> 标签：javascript, jquery-mobile

我想要一个根据用户选择更改数据图标类的按钮

示例按钮为：

```
<a href="#language2" data-rel="popup" data-role="button" 
                     data-icon="english-flag" data-inline="true" 
                     data-position-to="origin">
    <span id="language3">English</span>
</a> 
```

我想知道我需要实现哪些javascript代码才能将自定义定义`data-icon="english-flag"`改为`data-icon="another-flag"`

提前致谢。

编辑：下面关于如何指定要影响哪个按钮的后续问题的答案可以在以下位置找到； [如何使用 javascript 更改特定的 JQuery Mobile 按钮图标](https://stackoverflow.com/questions/14410847/how-to-change-a-specific-jquery-mobile-button-icon-with-javascript)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T23:32:35.433

jQuery Mobile 有一个预定义的功能：

```
$('a').buttonMarkup({ icon: "star" }); 
```

仅仅改变一个属性是不够的，最终的按钮重新设计必须使用**.buttonMarkup(**函数。

这是官方文档：http: [//jquerymobile.com/demos/1.2.0/docs/buttons/buttons-options.html](http://jquerymobile.com/demos/1.2.0/docs/buttons/buttons-options.html)

这是一个例子：http: [//jsfiddle.net/Gajotres/AmFKa/](http://jsfiddle.net/Gajotres/AmFKa/)

此外，因为您正在创建一个自定义按钮，仅更改图标名称是不够的，首先您需要在您的 css 中定义它，如下所示：

```
<style type="text/css">
    .ui-icon-edit {
       background-image: url(icons-18-white.png); // This should be your picture
       background-repeat: no-repeat;
       background-position: -824px 50%;
    }
</style> 
```

我们会像这样添加这个新图标：

```
$('a').buttonMarkup({ icon: "edit" }); 
```

在这种情况下，我们正在添加图片**编辑**。现在注意它的 cass 名称**.ui-icon-edit**，要添加一个新的图标类，您需要将**.ui-icon-**字符串与图标名称结合起来。在您的情况下，您的班级名称将是**.ui-icon-another-flag**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T23:30:13.923

只需将值传递给数据函数。[请参阅文档](http://api.jquery.com/data/)

```
$("#language2").data("icon", "another-flag"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T23:31:38.787

您可以使用`$('selector').attr('data-icon', 'newValue')`来更改属性。

[文档](http://api.jquery.com/attr/ "文档")

# sql-server - 又一个 SQL Server 主体访问错误

> ID：14409283
> 
> 赞同：0
> 
> 时间：2013-01-18T23:26:09.487
> 
> 标签：sql-server, sql-server-2008

我有一个用户正在尝试访问他也拥有权限的 DatabaseA，但他不断收到以下错误（他可以访问 DatabaseA，但没有访问 DatabaseB 的权限）：

`The server principal "Domain\Username" is not able to access the database "DatabaseB" under the current security context.`

因为他无权访问 DatabaseB，所以这首先是有道理的。不幸的是，他没有以任何方式调用 DatabaseB。

*   我已经通过使用 Profiler 的服务器看到了这一点，一直到不使用过滤器的语句级别。我可以看到他的连接和错误出现，但没有迹象表明 DatabaseB 受到任何影响。

*   我已经查看了他试图运行的存储过程。它包含一个简单的 select 语句，它只访问 DatabaseA 中的表。

*   我可以通过让他访问 DatabaseB 来解决这个问题，但这不是一个可行的长期解决方案。

*   我已确认该用户不是孤儿

*   我搜索了谷歌，有很多关于这个错误的帖子，但没有一个描述这个场景。

如果有人看到或对此有所了解，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T23:29:46.187

如果连接未指定数据库，则用户正在连接到默认数据库。在 SQL Server 中检查默认数据库的登录信息。默认可能设置为 DatabaseB，但登录名不是数据库中的用户。

您可以使用对象浏览器查看信息。连接到您的 SQL Server，将树导航到 Security > Logins 并选择登录名。右键单击并选择属性。默认数据库位于“常规”选项卡上表单底部附近。

# spring - 基于 Spring-MVC-Java 的配置：已为此响应调用 getOutputStream()

> ID：14409284
> 
> 赞同：2
> 
> 时间：2013-01-18T23:26:10.283
> 
> 标签：spring, spring-mvc, freemarker, spring-3

我正在使用 Spring 3 和基于 Java 的配置。

我有一个向用户导出 Excel 工作表的模块（即向用户下载工作表）

我在日志中遇到以下异常 .... 但它可以正常导出：

> java.lang.IllegalStateException: getOutputStream() 已经在 org.apache.catalina.connector.Response.getWriter(Response.java:639) 在 org.apache.catalina.connector.ResponseFacade.getWriter(ResponseFacade. java:214) 在 javax.servlet.ServletResponseWrapper.getWriter(ServletResponseWrapper.java:105) 在 javax.servlet.ServletResponseWrapper.getWriter(ServletResponseWrapper.java:105) 在 org.springframework.web.servlet.view.freemarker.FreeMarkerView.processTemplate (FreeMarkerView.java:366) at org.springframework.web.servlet.view.freemarker.FreeMarkerView.doRender(FreeMarkerView.java:283) at org.springframework.web.servlet.view.freemarker.FreeMarkerView.renderMergedTemplateModel(FreeMarkerView.java ：233) 在 org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262) 在 org.springframework.web 的 org.springframework.web.servlet.view.AbstractTemplateView.renderMergedOutputModel(AbstractTemplateView.java:167) .servlet.DispatcherServlet.render(DispatcherServlet.java:1157) 在 org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:927) 在 org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827) ) 在 org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882) 在 org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778) 在 javax.servlet.http.HttpServlet.service( HttpServlet.java：621) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:728) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter (ApplicationFilterChain.java:210) 在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311) 在 org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116 ) 在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323) 在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323) 在 org.springframework.security 的 org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113) .web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101) 在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)doFilter(SessionManagementFilter.java:101) at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)doFilter(SessionManagementFilter.java:101) at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)

经过调查，我发现 getOutputStream() 方法只能在响应上调用一次。但是，每次用户需要按以下方式导出工作表时，我都会调用它：

```
public void exportExcel(HttpServletResponse response) throws Exception {

    response.setContentType("application/vnd.ms-excel");

    response.setHeader("Content-disposition", "attachment;filename=" + sheetName + "");

    ByteArrayOutputStream excelFileByteArrayOutputStream =

    excelFileByteArrayOutputStream.writeTo(response.getOutputStream());
    excelFileByteArrayOutputStream.flush();
    response.flushBuffer();
    excelFileByteArrayOutputStream.close();
  } 
```

Freemarker配置：

```
@Bean
  public FreeMarkerViewResolver viewResolver() {
    FreeMarkerViewResolver freeMarkerViewResolver = new FreeMarkerViewResolver();
    freeMarkerViewResolver.setCache(true);
    freeMarkerViewResolver.setPrefix("");
    freeMarkerViewResolver.setSuffix(".ftl");
    return freeMarkerViewResolver;
  }

  @Bean
  public FreeMarkerConfigurer freemarkerConfig() {
    FreeMarkerConfigurer freeMarkerConfigurer = new FreeMarkerConfigurer();
    freeMarkerConfigurer.setTemplateLoaderPath("/WEB-INF/freemarker/");
    Properties settings = new Properties();
    settings.setProperty("number_format", "0.######");
    freeMarkerConfigurer.setFreemarkerSettings(settings);
    Map variables = new java.util.HashMap<String, Object>();

    variables.put("xml_escape", new XmlEscape());
    freeMarkerConfigurer.setFreemarkerVariables(variables);
    return freeMarkerConfigurer;
  } 
```

@Controlle ...导出工作表后，它永远不会按照我的指定重定向到主页：

```
 @RequestMapping(value = "/smth", method = RequestMethod.GET)
  public ModelAndView exportSheet(HttpServletResponse response,
                                                           Bean aBean,
                                                           BindingResult result) throws Exception {

//Some Code
    return new ModelAndView("/home");
  } 
```

我的 WebApplicationInitializer：

```
public class SpringWebApplicationInitializer implements WebApplicationInitializer {

  @Override
  public void onStartup(final ServletContext servletContext) throws ServletException {

    // Create the 'root' Spring application context
    AnnotationConfigWebApplicationContext rootContext = new AnnotationConfigWebApplicationContext();
    rootContext.register(WebConfiguration.class);

    // Manage the lifecycle of the root application context
    servletContext.addListener(new ContextLoaderListener(rootContext));

    // Create the dispatcher servlet's Spring application context
    AnnotationConfigWebApplicationContext dispatcherContext = new AnnotationConfigWebApplicationContext();
    dispatcherContext.register(DispatcherConfiguration.class);

    // Register and map the dispatcher servlet
    ServletRegistration.Dynamic dispatcher =
      servletContext.addServlet("dispatcher", new DispatcherServlet(dispatcherContext));
    dispatcher.setLoadOnStartup(1);
    dispatcher.addMapping("/");

    // Register Spring Security Filter
    DelegatingFilterProxy securityFilter = new DelegatingFilterProxy();
    FilterRegistration.Dynamic securityFilterRegistration =
      servletContext.addFilter("springSecurityFilterChain", DelegatingFilterProxy.class);
    securityFilterRegistration.addMappingForUrlPatterns(null, false, "/*");
  }

} 
```

任何想法如何解决这个问题！

# ruby-on-rails - 如何从 shell 脚本运行 rails 命令命令？

> ID：14409285
> 
> 赞同：4
> 
> 时间：2013-01-18T23:26:20.580
> 
> 标签：ruby-on-rails, ruby, bash, ruby-on-rails-3.2, sh

假设我想运行 'User.all.each{|u| u.destroy}' 来自名为 killallusers.sh 的 shell 脚本。如何从 shell 或可执行脚本调用 Rails 控制台命令？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T23:28:27.060

要么将其编写为[Rake 任务](http://guides.rubyonrails.org/command_line.html#rake)，要么使用[Rails "runner"](http://guides.rubyonrails.org/command_line.html#rails-runner)。

在您的 shell 脚本中放置适当的 rake 或 runner 命令。

# actionscript-3 - 尽管添加了作为 Sprite 扩展的用户定义类，但在舞台上不可见 - 这是怎么回事？（动作脚本 3）

> ID：14409286
> 
> 赞同：0
> 
> 时间：2013-01-18T23:26:23.870
> 
> 标签：actionscript-3, switch-statement, sprite, draw, stage

我正在尝试使用 Flex 库和 FlashDevelop IDE 在 ActionScript 3 中编写程序。该程序需要在舞台上绘制五个空白方块，单击其中任何一个方块将独立呈现一个独特的图案（由几何图元组成），以代替该方块。再次单击这些图案会将它们切换回空白方块。

我决定将这种行为抽象为一个用户定义的类，它是 的扩展`Sprite`，称为`PatternTile`. 但是，我收到一个程序错误，`PatternTile`尽管已将其添加到舞台（由事件处理程序确认），但它本身不可见。默认情况下，对象应在中央舞台渲染，并且根据参数，矩形周围至少应有黑色轮廓。单击时，对象应该通过清除和重新指定图形属性来重绘自己。

构造函数有一个参数可以切换这些属性。现在它们都是等价的。

下面是`PatternTile`类的代码：

```
package  
{
    /**
     * ...
     * @author ...
     */

    import flash.display.Shape;
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.events.MouseEvent;
    import flash.display.Stage;

    public class PatternTile extends Sprite
    {
        // OBJECTIVE: Generalize a tile object that can be drawn several times independently and change pattern when clicked.

        // DECLARE+INSTANCE VARS

        private var tileFlip : Boolean = new Boolean( true ) ; // tileFlip - switch for tracking state of shape when clicked on

        // PatternTile, for the sake of simplicity, will include all its potential shapes in its constructor.
        private var patternCode : int = new int(  ); // Stores pattern classification to switch what the pattern for this tile is.

        // CONSTRUCTOR
        public function PatternTile( xBase:int, yBase:int, xTrans:int , yTrans:int , patternType:int ):void
        {

            /* ARGUMENTS:
             * xBase - reference point for translations on the X axis.
             * yBase - reference point for translations on the Y axis.
             * xTrans:int - integer representing displacement of pixels from center on X axis. 
             * yTrans:int - integer representing displacement of pixels from center on Y axis. 
             * patternType:int - sets code for pattern
             */

            patternCode = patternType

            x = xBase + xTrans ; // x - new X position

            y = yBase + yTrans ; // y - new Y position

            // Assign Parametres to blankTile
            this.graphics.lineStyle( 5, 0x000000, 1)
            this.graphics.beginFill( 0xFFFFFF, 1 );
            this.graphics.drawRect( x , y , 200 , 200 );
            this.graphics.endFill(  );

            // EVENT LISTENERS - Clicking on the Sprite
            addEventListener( MouseEvent.CLICK , mouseClickHandler ); // Will this generalize to handling clicks on both pattern types (tile, altObject?); 
            addEventListener( Event.ADDED_TO_STAGE, addedToStage ); // Created event handler for debugging purposes.
        }

        // Mouse Click Function
        public function mouseClickHandler(event:Event):void
        {
            if (tileFlip) {

                this.graphics.clear(); // clear previous properties

                switch (patternCode) {
                // Because I know there are only five cases, I can include all of them within the object.
                    case 0: // Pattern 0

                        // Colour Properties
                        this.graphics.lineStyle( 1, 0x000000, 1 );
                        this.graphics.beginFill(0xFFFFFF, 1);
                        // Draw shape primitives here
                        this.graphics.drawCircle( x, y, 50 ); // PLACEHOLDER
                        this.graphics.endFill(  );
                        // trace("you are here")

                        break;

                    case 1: // Pattern 1

                        // Colour Properties
                        this.graphics.lineStyle( 1, 0x000000, 1 );
                        this.graphics.beginFill(0xFFFFFF, 1);
                        // Draw shape primitives here
                        this.graphics.drawCircle( x, y, 50 ); // PLACEHOLDER
                        this.graphics.endFill(  );

                        break;

                    case 2: // Pattern 2

                        // Colour Properties
                        this.graphics.lineStyle( 1, 0x000000, 1 );
                        this.graphics.beginFill(0xFFFFFF, 1);
                        // Draw shape primitives here
                        this.graphics.drawCircle( x, y, 50 ); // PLACEHOLDER
                        this.graphics.endFill(  );

                        break;

                    case 3: // Pattern 3

                        // Colour Properties
                        this.graphics.lineStyle( 1, 0x000000, 1 );
                        this.graphics.beginFill(0xFFFFFF, 1);
                        // Draw shape primitives here
                        this.graphics.drawCircle( x, y, 50 ); // PLACEHOLDER
                        this.graphics.endFill(  );

                        break;

                    case 4: // Pattern 4

                        // Colour Properties
                        this.graphics.lineStyle( 1, 0x000000, 1 );
                        this.graphics.beginFill(0xFFFFFF, 1);
                        // Draw shape primitives here
                        this.graphics.drawCircle( x, y, 50 ); // PLACEHOLDER
                        this.graphics.endFill(  );

                        break;

                    }

                tileFlip = false; // prime alternate state to be checked on next click

            } else {

                this.graphics.clear(); // clear previous properties         

                // Blank Tile Properties
                this.graphics.lineStyle( 1, 0x000000, 1 );
                this.graphics.beginFill(0xFFFFFF, 1);
                this.graphics.drawRect( x , y , 100 , 100 );
                this.graphics.endFill(  );

                tileFlip = true; // prime alternate state to be checked on next click
            }
        }

        public function addedToStage(e:Event):void 
        {
             trace("Added PatternTile to stage");           
        }

    }
} 
```

下面是`Main`课程：

```
package 
{
    import flash.display.Shape;
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.events.MouseEvent;

    // User-Defined Classes
    import PatternTile

    /**
     * ...
     * @author kbruskie
     */
    public class Main extends Sprite 
    {
        // Center Stage, called throughout program.
        private var xCenter : int = new int( stage.stageWidth / 2 );
        private var yCenter : int = new int( stage.stageHeight / 2 );

        // Tiles
        private var tile1 : PatternTile ;
        /*      
        private var tile2 : PatternTile = new PatternTile( 0, 0, 0 );
        private var tile3 : PatternTile = new PatternTile( 0, 0, 0 );   
        private var tile4 : PatternTile = new PatternTile( 0, 0, 0 );   
        private var tile5 : PatternTile = new PatternTile( 0, 0, 0 );
        */

        public function Main():void 
        {
            trace(xCenter) // prints center of stage on X axis - working
            trace(yCenter) // prints center of stage on Y axis - working

            tile1 = new PatternTile( xCenter, yCenter, 200, -200, 1 ) // draws single clickable tile in the middle of the stage. Not yet added to stage.
            // instances the object but it isn't visibly drawn. What's going on?

            stage.addChild(tile1) // Finally - all the properties are set, and this object is ready for showbiz. Add to stage.
        }
    }
} 
```

我不明白发生了什么，我对我的理论没有信心。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T23:38:54.047

我假设您的对象在舞台上，但在可见区域之外......在 PatternTile 构造函数中，您正在设置位置，例如：

```
x = xBase + xTrans; 
```

然后你从 x 开始画一个正方形：

```
this.graphics.drawRect( x , y , 200 , 200 ); 
```

所以正方形被有效地绘制在位置 x+x 处。不应该是这个吗？

```
this.graphics.drawRect( 0 , 0 , 200 , 200 ); 
```

# jquery - zend framework 2 - 响应错误消息的最佳方法

> ID：14409290
> 
> 赞同：0
> 
> 时间：2013-01-18T23:27:08.720
> 
> 标签：jquery, error-handling, zend-framework2, httpresponse

我在控制器的 Action 方法中有这段代码：

```
 $session = new Container('user');
    $response = $this->getResponse();
    if (!$session->offsetExists('userId')) {
      return $response->setContent(-1);
    }
    else //Correct response code 
```

在我看来，我使用 jquery/javascript 和 ajax 检测到错误，并且效果很好。

```
 function anyfunction(drawId) {
      $.post('controller/action', '&param1=X', function(data) {
        if (data == -1) document.error.innetHTML = 'user no logued';
        else //correct response
      }
    } 
```

我想改变我的方法，因为我喜欢从控制器发送消息。我需要发送一些指示器，以便视图知道响应是错误的。我考虑过使用 $response->setMetaData() 方法，但我不知道它是否适用于此。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T06:39:16.953

您必须使用适当的 HTTP 状态代码，正文可选地包含错误描述。
在这种情况下，代码是~~[401 Unauthorized](https://www.rfc-editor.org/rfc/rfc2616#section-10.4.2)~~
实际上，401 不适合，因为它需要 WWW-Authenticate 标头。那么应该使用403 Forbidden。

另外，我建议您了解：

1.  JSON 格式，原生 javascript 并由带有 json 视图策略的 ZF2 MVC 支持。
2.  RESTful API。如果不使用它，它仍然会让您了解如何正确使用 HTTP。您可能想阅读此[博客文章和评论](http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven)
3.  看看这个 ietf 草案：[HTTP API 的问题详细信息](https://datatracker.ietf.org/doc/html/draft-nottingham-http-problem-02)这个草案目前在任何方面都不是标准的，但它可以给你一些想法。

更新：

我觉得我应该添加说明，因为答案不完整。除了状态码之外，您通常还需要生成带有额外详细信息的响应正文，可能与上述草案一致。
由于 Zf2 非常灵活，因此没有固定的方法来做某事。在其中一种可能的方法中，您将需要监听`MvcEvent::EVENT_DISPATCH`器来检测未经身份验证/未经授权的访问并触发`MvcEvent::EVENT_DISPATCH_ERROR`事件。
看看 BjyAuthorize 模块。你可以使用它。

而且您将需要监听`MvcEvent::EVENT_DISPATCH_ERROR`器来准备正确的响应。
[您可以将此用作示例](https://github.com/bjyoungblood/BjyAuthorize/blob/master/src/BjyAuthorize/View/UnauthorizedStrategy.php)至少应将 ViewModel 替换为正确填充的 JsonModel。您还需要注册 json 视图策略才能使其工作。

# c# - 尝试使用 Html Agility Pack 获取单个节点

> ID：14409293
> 
> 赞同：0
> 
> 时间：2013-01-18T23:27:29.653
> 
> 标签：c#, html, html-agility-pack

在找到具有特定标签的 htmlnode 后，我试图获取单个节点。但我得到的是一个错误：

> 你调用的对象是空的。

现在这里是代码：

```
HtmlWeb htmlWeb = new HtmlWeb();
// Creates an HtmlDocument object from an URL
HtmlAgilityPack.HtmlDocument document = htmlWeb.Load(url);
// Targets a specific node
// If there is no node with that Id, someNode will be null
HtmlNode someNode = document.GetElementbyId("<li name=\"XU\">");
var parseString = someNode.SelectSingleNode("//span[@class='lp']"); 
```

我的目的是获取 XU li 标签内的所有节点。我知道类的名称。

还要注意的是，当我将最后一行代码替换为

```
var parseString = document.DocumentNode.SelectSingleNode("//span[@class='long-position']"); 
```

那么 SelectSingleNode 中的 tag 参数工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T02:14:40.203

```
HtmlNode someNode = document.SelectSingleNode("//li[@name='XU']").SelectSingleNode("/span[@class='lp']"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T23:48:47.147

在您的代码中...

```
HtmlNode someNode = document.GetElementbyId("<li name=\"XU\">"); 
```

... 可能返回 null ... 然后调用：

```
var parseString = someNode.SelectSingleNode("//span[@class='lp']"); 
```

...抛出该异常，因为 someNode 为空。

尝试这个：

```
HtmlNode someNode = document.GetElementbyId("XU");

if (someNode != null)
{
    var parseString = someNode.SelectSingleNode("/span[@class='lp']");
    // ... 
```

# php - 多个虚拟主机上的 WAMP 403

> ID：14409295
> 
> 赞同：1
> 
> 时间：2013-01-18T23:27:34.963
> 
> 标签：php, apache, .htaccess, wamp

我有两个文件夹：

```
c:wamp:www  // My root  
c:wamp:coll // Alternative 
```

在我的`www`文件夹中，我有`.htaccess`我的 CodeIgniter 应用程序，所以我可以有这样的 url`site.com/controller/method`

```
RewriteEngine on  
RewriteCond %{REQUEST_FILENAME} -f [OR] 
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [L]  
RewriteRule ^.*$ index.php [L] 
```

我想在 coll 中运行合作者应用程序，在 www 中运行我的 ci 这就是我设置我的方式`httpd.conf`

```
DocumentRoot "c:/wamp/www/"

<VirtualHost *:80>
    ServerAdmin webmaster@localhost
    DocumentRoot "c:/wamp/www/"
    ServerName localhost
    ErrorLog "logs/localhost-error.log"
    CustomLog "logs/localhost-access.log" common
    <directory "c:/wamp/www/">
        Options Indexes FollowSymLinks
        AllowOverride all
        Order Deny,Allow
        Deny from all
        Allow from 127.0.0.1
    </directory>
</VirtualHost>
<VirtualHost *:80>
    DocumentRoot "c:/wamp/coll/"
    ServerName project.localhost
    <directory "c:/wamp/coll/">
        Options Indexes FollowSymLinks
        AllowOverride all
        Order Deny,Allow
        Deny from all
        Allow from 127.0.0.1
    </directory>
</VirtualHost> 
```

我已激活所有必需的模块：

```
# Virtual hosts
Include conf/extra/httpd-vhosts.conf

LoadModule vhost_alias_module modules/mod_vhost_alias.so
LoadModule rewrite_module modules/mod_rewrite.so 
```

我的`hosts`文件如下：

```
127.0.0.1    localhost
127.0.0.1    project.localhost 
```

错误日志：

```
[Fri Jan 18 23:30:11 2013] [notice] Apache/2.2.22 (Win64) PHP/5.4.3 configured -- resuming normal operations
[Fri Jan 18 23:30:11 2013] [notice] Server built: May 13 2012 19:41:17
[Fri Jan 18 23:30:11 2013] [notice] Parent: Created child process 1872
[Fri Jan 18 23:30:11 2013] [notice] Child 1872: Child process is running
[Fri Jan 18 23:30:11 2013] [notice] Child 1872: Acquired the start mutex.
[Fri Jan 18 23:30:11 2013] [notice] Child 1872: Starting 64 worker threads.
[Fri Jan 18 23:30:11 2013] [notice] Child 1872: Starting thread to listen on port 80.
[Fri Jan 18 23:30:11 2013] [notice] Child 1872: Starting thread to listen on port 80.
[Fri Jan 18 23:30:15 2013] [notice] Parent: Received shutdown signal -- Shutting down the server.
[Fri Jan 18 23:30:15 2013] [notice] Child 1872: Exit event signaled. Child process is ending.
[Fri Jan 18 23:30:16 2013] [notice] Child 1872: Released the start mutex
[Fri Jan 18 23:30:17 2013] [notice] Child 1872: All worker threads have exited.
[Fri Jan 18 23:30:17 2013] [notice] Child 1872: Child process is exiting
[Fri Jan 18 23:30:17 2013] [notice] Parent: Child process exited successfully.
[Fri Jan 18 23:41:31 2013] [notice] Apache/2.2.22 (Win64) PHP/5.4.3 configured -- resuming normal operations
[Fri Jan 18 23:41:31 2013] [notice] Server built: May 13 2012 19:41:17
[Fri Jan 18 23:41:31 2013] [notice] Parent: Created child process 5380
[Fri Jan 18 23:41:32 2013] [notice] Child 5380: Child process is running
[Fri Jan 18 23:41:32 2013] [notice] Child 5380: Acquired the start mutex.
[Fri Jan 18 23:41:32 2013] [notice] Child 5380: Starting 64 worker threads.
[Fri Jan 18 23:41:32 2013] [notice] Child 5380: Starting thread to listen on port 80.
[Fri Jan 18 23:41:32 2013] [notice] Child 5380: Starting thread to listen on port 80.
[Fri Jan 18 23:41:41 2013] [notice] Parent: Received shutdown signal -- Shutting down the server.
[Fri Jan 18 23:41:41 2013] [notice] Child 5380: Exit event signaled. Child process is ending.
[Fri Jan 18 23:41:42 2013] [notice] Child 5380: Released the start mutex
[Fri Jan 18 23:41:43 2013] [notice] Child 5380: All worker threads have exited.
[Fri Jan 18 23:41:43 2013] [notice] Child 5380: Child process is exiting
[Fri Jan 18 23:41:43 2013] [notice] Parent: Child process exited successfully.
Warning: DocumentRoot [C:/wamp/coll'] does not exist
Warning: DocumentRoot [C:/apache2/docs/dummy-host.example.com] does not exist 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T00:07:32.477

我不能说我曾经见过虚拟主机在你进入一个公共的 web 目录（比如 www）之前就分道扬镳了，但是如果我尝试这样做并得到 403，我会查看额外的 DocumentRoot "c: /wamp/www/" 在您的文档顶部 - 对我来说看起来像是一个开放的基本目录违规。您的 apache 错误日志应该包含有关它返回 403 的原因的更具体信息。

在没有看到错误日志的情况下，我会尝试将第一个文档根声明更改为：

```
DocumentRoot "c:/wamp/" 
```

但就像我说的那样，我不知道你为什么要在 www 之外托管页面——我相信这是出于安全原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-23T06:30:24.723

对于 localhost 无需添加项目。

它应该像这样工作。

```
# your vhost

<VirtualHost *:80>
    ServerAdmin email@your.vhost.domain
    DocumentRoot "your.vost.doc.root"
    ServerName your.vhost.domain
    ErrorLog "logs/your.vhost.domain.log"
    CustomLog "logs/your.vhost.domain-access.log" common
    <Directory "your.vost.doc.root">
        Options Indexes FollowSymLinks
        AllowOverride None
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost>

#
# Localhost
#

<VirtualHost *:80>
    DocumentRoot C:/wamp/www # wamp doc root
    ServerName localhost
</VirtualHost> 
```

*your.vhost.domain 必须更改为您自己的。

希望这对您有所帮助。谢谢。

# git - 将文件添加到 .gitignore 后，git 会从版本控制中删除文件吗？

> ID：14409299
> 
> 赞同：7
> 
> 时间：2013-01-18T23:27:47.753
> 
> 标签：git

我不小心将我的 Python 虚拟环境目录包含`venv`在我的所有 git 提交和推送活动中。

我刚刚添加`venv`到我的`.gitignore`. 但是我的 .git 文件夹仍然很大（我假设是因为以前的提交和对 venv 的跟踪）。

我怎样才能让 git 完全忘记跟踪`venv`并将我的`.git`文件夹再次缩小到合理的大小，因为这让 Heroku 成为了一场噩梦。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-18T23:37:04.203

尝试从您的 git 存储库中删除文件：

```
git rm --cached venv* 
```

Rich Stone 在下面提到，如果`venv`是文件夹，则应使用递归开关，`-r`：

```
git rm --cached -r venv* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T23:39:16.863

不，不是的。`.gitignore`仅确保不会意外添加被忽略的文件，但不会从历史记录中删除它们，也不会从 HEAD 中删除它们，如果已经添加它们，甚至不会从索引中删除它们。

从 git 历史中永久删除大文件需要重写历史，这是一个有点痛苦的操作。特别是，它会中断来自具有“旧”历史版本的其他存储库的推送和拉取。但这是可以完成的; 有关详细信息，请参见例如[这个问题](https://stackoverflow.com/questions/2164581/remove-file-from-git-repository-history)或[这个](https://stackoverflow.com/questions/10067848/remove-folder-and-its-contents-from-git-githubs-history?lq=1)问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T23:35:48.420

试试看`git gc`，根据[手册](http://git-scm.com/book/ch9-7.html)，这会触发自动垃圾收集。如果这没有帮助，请在此处发表评论，我会为您调查更多选项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T23:44:33.037

请参阅此线程：[如何使 Git “忘记”已跟踪但现在位于 .gitignore 中的文件？](https://stackoverflow.com/questions/1274057/making-git-forget-about-a-file-that-was-tracked-but-is-now-gitignored)

从当前提交中删除文件很容易，但是从历史记录中完全删除它们以减小文件大小是一团糟，请参阅[如何从 Git 存储库中的提交历史记录中删除/删除大文件？](https://stackoverflow.com/questions/2100907/how-do-i-purge-a-huge-file-from-commits-in-git-history/11032521#11032521)或[https://help.github.com/articles/remove-sensitive-data](https://help.github.com/articles/remove-sensitive-data)

将您的最新代码导出到新的 git 存储库并重新开始并保留旧代码存档可能会更快。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-19T01:13:25.267

放入文件`.gitignore`不会从存储库中删除文件。

您需要使用`git filter-brach`从存储库中完全删除文件或目录。为此，请使用以下命令：

```
git filter-branch --index-filter 'git rm --cached --ignore-unmatch file/or/dir/with/complete/path' --prune-empty --all 
```

这样，您将更改存储库历史记录以完成`file/or/dir/with/complete/path`从所有提交中删除。请记住，您将需要执行 a `git push -f`，因为您更改了历史记录。

# php - 将时间格式化为“00 小时 00 分钟 00 秒”？

> ID：14409300
> 
> 赞同：0
> 
> 时间：2013-01-18T23:27:50.090
> 
> 标签：php

我想格式化从数据库（01:00:00）检索的时间，如下所示：

```
01 Hrs 00 Mins 00 Secs 
```

但是以下尝试没有奏效，并且给了我错误，所以我的问题是如何在上述时间获得我想要的格式：

```
<strong>Start Date:</strong> <?php echo date("H"),"Hrs",date("i"),"Mins",date("s"),"Secs",strtotime($detailsSessionDuration)); ?> 
```

错误：

`Parse error: syntax error, unexpected ')', expecting ',' or ';'`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T23:30:35.533

尝试使用[DateTime](http://php.net/manual/en/book.datetime.php) :: [createFromFormat](http://php.net/manual/en/datetime.createfromformat.php)：

```
$d = DateTime::createFromFormat('H:i:s', '12:34:56');
echo $d->format('H \H\r\s i \M\i\n\s s \S\e\c\s'); 
```

或者您可以仅使用支持[时间格式的](http://php.net/manual/en/datetime.formats.time.php)[DateTime::__construct()](http://php.net/manual/en/datetime.construct.php)：`24 hour notation`

```
$d = new DateTime('12:34:56');
echo $d->format('H \H\r\s i \M\i\n\s s \S\e\c\s'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T23:31:14.833

也许：

```
<strong>Start Date:</strong> 
<?php 

    $time = strtotime($detailsSessionDuration);
    echo date("H", $time),"Hrs",date("i", $time),"Mins",date("s", $time),"Secs"; 
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T23:37:04.157

```
$arr = explode(':', $detailsSessionDuration);
printf("%s Hrs %s Mins %s Secs", $arr[0], $arr[1], $arr[2]); 
```

# python - 使用继承的 python optparse 选项生成一个进程

> ID：14409301
> 
> 赞同：2
> 
> 时间：2013-01-18T23:27:51.430
> 
> 标签：python, arguments, command-line-arguments, optparse

我有一堆使用 optparse 包的 python 脚本。我想给他们一个“remote_run”选项，我想使用如下：

```
if options.remote_run:
    cmd = create_cmd(options)
    os.system('ssh %s@%s "%s"' % (user, server, cmd))
    sys.exit(0) 
```

该函数`create_cmd()`应创建一个与用于启动此进程的命令等效的命令，但未设置 remote_run 选项。这个想法是让脚本将自己外包给不同的服务器，以保留当前服务器的资源。

做这个的最好方式是什么？我通过编写自定义的 cmd 生成函数一次性完成了几个脚本，但是每当我向这些脚本添加新选项时，我必须使这些函数保持最新，这并不理想。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T02:51:54.330

基于[是否可以在脚本中设置 python -O（优化）标志？](https://stackoverflow.com/questions/7527055/is-it-possible-to-set-the-python-o-optimize-flag-within-a-script)：

```
#!/usr/bin/env python
import socket
import subprocess
import sys
from pipes import quote

def main():
    print(socket.gethostname())
    print(sys.argv)

if __name__=="__main__":
   if '--remote-run' in sys.argv:
      sys.argv.remove('--remote-run')
      command = ' '.join(map(quote, ['python'] + sys.argv))
      sys.exit(subprocess.call(['ssh', '%s@%s' % (user, server), command]))
   else:
      main() 
```

# iphone - 在 iOS 网络调用中缓存？

> ID：14409303
> 
> 赞同：0
> 
> 时间：2013-01-18T23:28:10.543
> 
> 标签：iphone, ios, objective-c, nsurlconnection

我在我的 iPhone 应用程序中进行了一些网络调用，我注意到它们的行为就像响应被缓存一样。例如，如果我按下一个按钮来下载大小不小的东西（因此在下载时会导致感知延迟），它在第一次时会按预期运行，并且需要一两秒钟。如果我重复这个过程，它几乎会立即完成。我还更新了一些它依赖于服务器端并从应用程序刷新的文件，并且没有出现更改。

我的网络代码非常简单，并且没有对缓存做任何事情。它本质上是一个方便的包装器`[NSURLConnection sendAsynchronousRequest:...`以及一些日志记录和逻辑，以确保系统网络活动指示器在请求未完成时显示。有关完整详细信息，请参见[此处](https://github.com/tomhamming/gcf/blob/master/GCF/GCF/GCFNetworkUtility.m)（GitHub 链接）。

我对缓存的猜测是对这种行为的有效猜测吗？如果是这样，它会在设备上发生吗？我可以禁用它吗？我希望我的数据在我想要的时候真正刷新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T23:33:53.477

您是否正在设置缓存策略`NSURLRequest`？

```
NSURLRequest *myRequest = [NSURLRequest requestWithURL:myURL cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData timeoutInterval:90]; 
```

查看[NSURLRequest Docs](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html)并查看`NSURLRequestCachePolicy`可以使用的不同缓存策略的部分。

# jquery - 立方体图像在 3D 动画中看起来不太好

> ID：14409312
> 
> 赞同：0
> 
> 时间：2013-01-18T23:29:30.947
> 
> 标签：jquery, html, css, css-transitions

如何通过圆角立方体的角使立方体在外部完美，我看到一些额外的空间如何移除立方体外部的额外空间。 [http://jsfiddle.net/ZrpLT/3/](http://jsfiddle.net/ZrpLT/3/)

```
<div class="top" style="-webkit-transform: rotateX(90deg) translateZ(75px); z-index: 1000;"><img src="http://www.defie.co/designerImages/thumbnails/inventory.png" width="150" height="150" style="margin-top: 0px;"></div>

div.melonhtml5_gallery div.cube {
    width: 100%;
    height: 100%;
    position: absolute;
    -webkit-transform-style: preserve-3d;
    -moz-transform-style: preserve-3d;
    -o-transform-style: preserve-3d;
    -ms-transform-style: preserve-3d;
    transform-style: preserve-3d;
    -webkit-transition: -webkit-transform 1s;
    -moz-transition: -moz-transform 1s;
    -o-transition: -o-transform 1s;
    -ms-transition: -moz-transform 1s; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T00:23:42.690

制作更合适的图像。这似乎是您可以使用具有锐利边缘的立方体所做的所有事情 - 您（现在）可以通过 CSS 旋转实现的唯一类型。

另外 - 你的最后一个立方体不会旋转：http: [//jsfiddle.net/ZrpLT/25/](http://jsfiddle.net/ZrpLT/25/)

谁知道为什么，因为 MelonHTML5 3D Cube Gallery 是一个商业产品，它似乎没有免费提供的文档。

放在最后一个盒子`<div data-caption="void" data-image="" style="display:none"></div>`之后似乎没有任何作用。如果你省略`style="display:none"`, 那么 - 尽管最后一个立方体现在旋转 - 它会给你留下一个额外的丑陋的带阴影的不可见盒子。

# css - Div 中的背景图像无法正确显示在左侧而不是右侧

> ID：14409318
> 
> 赞同：0
> 
> 时间：2013-01-18T23:30:04.057
> 
> 标签：css, html

我有一个图像，用于在主要内容区域周围创建一个伪阴影边框。但是，它只会出现在内容的左侧，而不是右侧。我知道这不是图像大小的问题，因为我们在页脚使用了类似的（以创建盒装外观）。下面是该部分的 css，谁能告诉我他们是否看到了我需要更改、删除或添加的内容？我对做网络前端/设计很陌生，所以如果您需要其他任何东西，请告诉我。谢谢

```
#main 
{
background-image: url('../../Content/Images/body_rpt.png');
clear: both;  /*add this so tabs go left! */
padding: 15px 15px 15px 30px; /*30px 30px 15px 30px; */
background-color: #fff;
/*border-radius: 4px 0 0 0;*/
-webkit-border-radius: 4px 0 0 0;
-moz-border-radius: 4px 0 0 0;
} 
```

为了比较这里是页脚部分，它工作正常

```
footer, 
#footer 
{
background-image: url('../../Content/Images/body_bot.png');
background-repeat: no-repeat;
background-color: #fff;
color: #999;
padding: 10px 0;
text-align: center;
line-height: normal;
margin: 0 0 30px 0;
font-size: .9em;
border-radius: 0 0 4px 4px;
-webkit-border-radius: 0 0 4px 4px;
-moz-border-radius: 0 0 4px 4px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T23:40:46.560

我没有看到任何会导致您的主 bg 图像出现在右侧的东西......我要做的是创建两个单独的 div 说如果我有 body > wrapper > col1, col2，我会做 body > wrapper > col1（左边框）、col2、col3、col4（右边框） 如果我要使用图像作为边框，我会将 col1 和 col4 设置为 1-2% 宽度。

另一种方法是使用浮点数，另一种方法是使用 CSS 阴影属性中的构建（我不知道你的边框是什么样子，使用 fiddelr ？？？）。

但是，如果我感觉很新鲜，我会拍摄我的 bg 图像，在图像编辑器中打开它，将 body length + border(left) + border(right) 作为我的图像宽度，并在两侧设置边框并使用它作为我的背景（静态图像方法）。

# python - 如何在 Python 代码中包装和对齐注释？

> ID：14409320
> 
> 赞同：3
> 
> 时间：2013-01-18T23:30:09.987
> 
> 标签：python, emacs, alignment, comments

我正在尝试使我的 Python 代码看起来更具可读性。我阅读了[风格指南](http://www.python.org/dev/peps/pep-0008/)，但我不知道如何获得这样的东西

```
x = foo(x);  # compute the value of the next prime number
             # that is larger than x  (foo is a really bad 
             # choice for this function's name) 
```

或这个

```
x = x + 1                 # Compensate for border
some other code           # some other comment 
```

你如何包装评论并像这样对齐它们？你不只是输入一堆`space`，是吗？如果我编辑了代码，我是否必须手动重新对齐注释？

我使用 emacs 作为我的编辑器。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T23:38:30.283

我认为你根本不想要这个。Lattyware 已经解释了第二种情况，但让我们看一下第一种情况：

```
x = foo(x);  # compute the value of the next prime number
             # that is larger than x  (foo is a really bad 
             # choice for this function's name) 
```

太长而无法嵌入的注释可以变成代码上方的块注释，如下所示：

```
# compute the value of the next prime number that is larger than
# x (foo is a really bad choice for this function's name)
x = foo(x); 
```

这似乎比右对齐的评论更具可读性。它还为您提供更多空间。而且使用 emacs 肯定更容易（只需输入整个内容并 meta-Q 即可）。并且，引用PEP 8 中的[内联注释：](http://www.python.org/dev/peps/pep-0008/#inline-comments)

> 谨慎使用内联注释。
> 
> 内联注释是与语句在同一行上的注释。

这是内联注释样式指南的开端，它非常强烈地暗示，如果你试图在同一行上写的东西超出你的容量，你应该改用块注释。

此外，当我们谈论 PEP 8 时：

*   “评论应该是完整的句子。” 您的第一条评论需要句号。（是的，它还说“如果评论很短，末尾的句号可以省略”，但你有一个 3 行 2 句的评论，所以这里不适用。）
*   “如果评论是一个短语或句子，它的第一个单词应该大写”。所以，大写“Compute”（但不是“foo”，因为那是一个标识符）。
*   不要添加函数名称不好的注释，只需重命名函数即可。
*   去掉那个分号。

所以：

```
# Compute the value of the next prime number that is larger than x.
x = next_larger_prime(x) 
```

但是一旦你这样做了，你甚至*不需要*评论。

事实上，这很常见。当您发现自己想知道如何打破注释的样式准则时，您可能应该询问如何重新组织代码以使其不需要所有这些注释。这并不总是可能的，但通常至少值得尝试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T23:32:37.097

我认为这两种情况有很大不同。在第一种情况下，我会在制表符上使用空格，因为无论用户编辑器中的制表符宽度设置如何，您都希望注释对齐。显然，如果您通常使用制表符来缩进代码，请使用制表符直到达到代码级别，然后使用空格。

想象一下使用标签：

```
x = foo(x) # compute the value of the next prime number
⟶⟶⟶⟶ # that is larger than x  (foo is a really bad 
⟶⟶⟶⟶ # choice for this function's name) 
```

现在想象有人使用较短的制表符长度设置：

```
x = foo(x) # compute the value of the next prime number
→→→→ # that is larger than x  (foo is a really bad 
→→→→ # choice for this function's name) 
```

但是，我会争辩说，您可能希望将其替换为三引号字符串：

```
"""Compute the value of the next prime number
that is larger than x  (foo is a really bad 
choice for this function's name)."""
x = foo(x) 
```

在第二种情况下，我认为对齐注释不会增加可读性，我只是将它们放在行尾。PEP-8 建议不要对齐分配、dict 文字等... - 我认为这是对它的扩展。

```
x = x + 1 # Compensate for border
some other code # some other comment 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-18T23:37:54.053

你不应该这样做。第一个应该像这样格式化：

```
# Compute the value of the next prime number that is larger than x
# (foo is a really bad choice for this function's name).
x = foo(x) 
```

第二个：

```
x = x + 1  # Compensate for border
some other code   # some other comment 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-15T08:48:56.293

尽管有使用替代方案的原因，如果您发现自己处于需要它的位置，例如评论用伪代码 Python 编写的证明行，您可以使用[`align-regexp`](https://www.emacswiki.org/emacs/AlignCommands#toc4)：

```
M-x align-regexp RET  # RET 
```

（在 # 号前加一个空格）应该按照你的要求做。它适用于当前选定的区域。

# wordpress - 我无法在 localhost 上激活我的 WordPress 插件

> ID：14409330
> 
> 赞同：0
> 
> 时间：2013-01-18T23:30:50.653
> 
> 标签：wordpress, plugins, activation

我正在尝试激活在 localhost 上运行的 WordPress 上的一个小插件，但它遇到以下错误：

> *该插件在激活期间生成了 6 个字符的意外输出。如果您发现“标头已发送”消息、联合提要问题或其他问题，请尝试停用或删除此插件。*

```
<?php
/*
Plugin Name: myphoto Plugin
Description: A plugin to retrieve photos and share them on the wordpress.
Version: 1.0
Author: Saeed pirdost
Copyright: 2012,  Saeed pirdost  
*/
?>
<?php
myprint();
function myprint()
{
    echo "hello";
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T23:38:30.290

尝试移除一些东西并使用合适的钩子。

```
<?php // remove all spaces up of here too
/*
  Plugin Name: RePhotosPic Plugin
  Description: A plugin to retrieve photos and share them on the wordpress.
  Version: 1.0
  Author: Saeed pirdost
  Copyright: 2012,  Saeed pirdost
 */

// remove     ?> <?php

add_filter('admin_notices', 'hello');

function hello()
{
    echo 'Hello';
}

// remove ?> 
```

**更新：**

也将其移除`myprint();`放置在 WP 挂钩内。像这样：

```
add_filter('admin_notices', 'myprint');

function myprint()
{
    echo "hello";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T23:36:32.883

错误告诉你出了什么问题。除非 WordPress 调用其功能之一，否则插件不应产生输出。当 WordPress 忙于呈现管理面板时，您的尝试写“Hello”。这不是一个彬彬有礼的插件。

如果您想在屏幕上看到“Hello”，请在页面呈现期间在 WordPress 触发的操作上注册一个钩子，并在那里运行您的输出。

# python - 按值获取字典的键

> ID：14409331
> 
> 赞同：2
> 
> 时间：2013-01-18T23:30:52.083
> 
> 标签：python, dictionary, hashmap, key-value

> **可能重复：**
> [Python 中的高效双向哈希表？](https://stackoverflow.com/questions/3318625/efficient-bidirectional-hash-table-in-python)

我正在研究一个解析 python 代码的 AST 解析器。首先，我将 python 代码转换为 AST，并调用`compile`.
在这样做时，我需要确保我不会两次编译相同的导入模块，即使有两次调用来导入它。

目前，我可以检测到这两个调用是等效的：

```
import modname as mod
import modname as mod 
```

我维护一个映射（在这种情况下）`mod`到`modname`. 我不仅使用它来检测`modname`已经导入的内容，而且还用于其他一些簿记功能。

现在，我无法检测到以下三个调用导入了相同的模块：

```
import modname as mod
import modname as foo
import modname 
```

我知道我可以通过在第二次编译之前使用 a`set`来包含和检查这个集合来轻松地规避这个问题。然而，这需要另一块线性空间。 我可以对字典进行线性传递，以检查是否有任何键映射到 的值，但这违背了使用字典的目的。`modname``modname`
`modname`

因此我的问题是：是否存在一种“双向`dict`”的数据结构 - 一种将其键映射到值并且其值也可以在 O(1) 时间查找的数据结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T23:46:05.143

Python 已经跟踪导入的模块，在`sys.modules`.

每个键都是一个导入的模块名称（而不是导入它的别名），每个值都是具有该模块全局命名空间的实际模块对象：

```
>>> import sys
>>> import os
>>> 'sys' in sys.modules
True
>>> 'os' in sys.modules
True
>>> sys.modules['sys'].__dict__.keys()
['setrecursionlimit', 'dont_write_bytecode', 'getrefcount', 'path_importer_cache', 'stdout', 'getprofile', '__stdin__', 'version_info', 'exc_clear', 'prefix', 'getfilesystemencoding', 'byteorder', '_clear_type_cache', 'excepthook', 'ps1', 'exc_type', '__excepthook__', 'executable', 'float_info', 'copyright', 'setdlopenflags', 'exec_prefix', 'getdlopenflags', 'getrecursionlimit', 'py3kwarning', 'path_hooks', '__package__', '_current_frames', 'platform', 'maxsize', 'version', 'exit', 'call_tracing', 'callstats', 'flags', 'setcheckinterval', '__doc__', 'api_version', '__plen', 'getdefaultencoding', 'getcheckinterval', 'maxunicode', 'settrace', 'setprofile', 'argv', '__stdout__', 'meta_path', '__name__', 'subversion', 'builtin_module_names', 'stdin', '__stderr__', '__egginsert', 'displayhook', 'ps2', 'gettrace', 'modules', 'warnoptions', 'last_type', 'getsizeof', 'last_traceback', 'maxint', '__displayhook__', '_getframe', 'stderr', 'exc_info', 'path', 'last_value', 'hexversion'] 
```

# php - 根据textarea内容获取一个json对象

> ID：14409333
> 
> 赞同：0
> 
> 时间：2013-01-18T23:31:05.673
> 
> 标签：php

我正在尝试获取文本区域的值并基于它创建一个 json 对象。

文本区域如下所示：

```
<textarea name="msisdn" wrap="physical">
51971855080
51971855081
51971855082
</textarea> 
```

动态部分是“messId”和“destAddr”，其他部分将替换为从这样的表单接收到的 php 变量：

```
$str_obj_json='{
"method":"SUBMIT","params":{
"batchType":"submit",
"batchId":"'.$batch.'",
"origAddr":"550",
"origTon":2,
"userData":"'.$sms.'",
"submits":
  [
   {
   "messId":"mess127_009",
   "destAddr":"51971855080"},
   {
   "messId":"mess127_010",
   "destAddr":"51971855081"},
   {
   "messId":"mess127_011",
   "destAddr":"51971855082"},
  ]
}
}'; 
```

如何动态创建这部分？：

```
 "submits":
  [
   {
   "messId":"mess127_009",
   "destAddr":"51971855080"},
   {
   "messId":"mess127_010",
   "destAddr":"51971855081"},
   {
   "messId":"mess127_011",
   "destAddr":"51971855082"},
  ] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T23:35:00.637

使用`json_encode()`：

```
$submits = array();

for (...) {
    $submits[] = array('messId' => ..., 'destAddr' => ...);
}

$jsonString = json_encode(array('submits' => $submits); 
```

它将 PHP 数组转换为 JSON 表示法。因此，您可以根据需要动态创建数组，然后对其进行编码。

至于使用来自的值`textarea`：只需使用将相应的`$_POST`数据分成几行`split("\n", $_POST['msisdn'])`

# javascript - Highcharts，在缩放期间显示跟随选定点的文本

> ID：14409339
> 
> 赞同：0
> 
> 时间：2013-01-18T23:32:06.630
> 
> 标签：javascript, charts, highcharts

我可以在一个点附近显示一个文本，但实际上，这个文本并没有附加到该点上。并且文本在缩放期间不跟随该点。

我制作了这段代码并且**它的工作**：

```
events: {
    redraw: function() {
        $.each(chart.getSelectedPoints(), function(i, point) {
            $('#txt-'+point.x+'-'+point.y)
            .attr('y', point.plotY + chart.plotTop - 10)
                .find('tspan')
                .attr('x', point.plotX + chart.plotLeft + 10);
        });
    }
}, 
```

这个函数在点选择事件上被调用：

```
function addText(point) {
    chart.renderer.text(
        'paf!',
        point.plotX + chart.plotLeft + 10,
        point.plotY + chart.plotTop - 10
    ).attr({
        zIndex: 5,
        id: 'txt-'+point.x+'-'+point.y
    }).add();
} 
```

完整代码：http: [//jsfiddle.net/ManUtopiaK/XaURC/](http://jsfiddle.net/ManUtopiK/XaURC/)

我只是想知道是否有另一种*官方*的方式来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:22:13.187

它不遵循，因为当您使用渲染器添加点时，您以像素为单位定义位置，即x：100px，y：100px，并且缩放后图表中的像素与没有缩放的位置相同。在其他作品中，当您使用 Renderer 时，您不会像 x:3 和 y:4 那样定义与图表相关的位置，而是以像素为单位。

# php - 从现有数据库生成实体时出现无效参数异常

> ID：14409342
> 
> 赞同：5
> 
> 时间：2013-01-18T23:32:34.103
> 
> 标签：php, symfony, doctrine-orm, symfony-2.1

我正在将一个 Symfony 2 项目从 Propel 转换为 Doctrine，并希望将现有数据库转换为 Doctrine Entities。

为此，我遵循[Symfony 网站上的教程](http://symfony.com/doc/2.0/cookbook/doctrine/reverse_engineering.html)，但是当我运行以下命令时：

`php app/console doctrine:mapping:convert xml ./src/Acme/BlogBundle/Resources/config/doctrine/metadata/orm --from-database --force`

我立即收到以下错误：

```
[InvalidArumentException]
Doctrine ORM Manager named "" does not exist. 
```

谁能解释我哪里出了问题以及我如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-19T01:39:46.747

终于查明是什么导致了错误。似乎 config.yml 中的教义配置设置需要一个名为`auto_mapping: true`.

例如：

```
doctrine:
    dbal:
        driver:   "%database_driver%"
        host:     "%database_host%"
        dbname:   "%database_name%"
        user:     "%database_user%"
        password: "%database_password%"
    orm:
        auto_mapping: true 
```

更多信息可以在这里找到：[http ://symfony.com/doc/2.0/reference/configuration/doctrine.html](http://symfony.com/doc/2.0/reference/configuration/doctrine.html)

# ruby - sinatra config.ru：configure 块有什么用？

> ID：14409349
> 
> 赞同：18
> 
> 时间：2013-01-18T23:33:47.317
> 
> 标签：ruby, configuration, sinatra, passenger

我正在使用带有“经典”风格的 Apache 和 Phusion-Passenger 的 Sinatra：

```
# config.ru
require 'sinatra'

configure do
    ....
end

require './app'

run Sinatra::Application 
```

我想定义一些东西。在配置块内部或外部定义它有什么区别？

```
# config.ru
require 'sinatra'

# A) Defining logger here
rack = File.new("logs/rack.log", "a+") 
use Rack::CommonLogger, rack

# B) Global variables here
LOGGER = Logger.new(...)

# C) Gem configuration here
DataMapper::Property::Boolean.allow_nil(false)

configure do
    # A) Or defining logger here?
    rack = File.new("logs/rack.log", "a+") 
    use Rack::CommonLogger, rack

    # B) Or global variables here?
    LOGGER = Logger.new(...)

    # C) Or gem configuration here?
    DataMapper::Property::Boolean.allow_nil(false)
    ....
end

require './app'

run Sinatra::Application 
```

是否有一些一般规则应该在外面做什么和应该在里面做什么？有什么区别？我测试了这两种变体，两者似乎都运行良好。

我知道`configure`可以用来对这样的环境做出反应：

```
configure :development do
    ....
end 
```

所以它对于不同的环境配置很有用。这个用例很清楚，但是每个环境的通用配置呢？我把它们放在哪里？这只是风格问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-19T09:00:26.560

这首先是环境问题，其次是风格问题。放置配置的位置没有区别。

如果您将代码放入块中，它确实会使您的代码更具可读性（恕我直言）。它还可以让您添加基于环境的选项，然后将其放入各自的块中。

总而言之，这取决于你:)

# eclipse - 在 Eclipse 中进行查找和替换时“替换/查找”的键盘快捷键

> ID：14409350
> 
> 赞同：2
> 
> 时间：2013-01-18T23:33:48.950
> 
> 标签：eclipse, keyboard-shortcuts, hotkeys

在椭圆中打开“查找/替换”对话框后，我希望能够使用键盘快捷键执行“替换/查找”操作。有没有办法做到这一点？

`ret`可以使用 找到下一个匹配项，使用 可以找到上一个匹配项`shift+ret`，但我似乎无法找到执行替换或替换/查找的方法。目前我知道的唯一方法是使用鼠标与对话框交互。

更一般地说，我希望能够在 Eclipse 中进行简单的正则表达式查找和替换操作，而无需使用鼠标。如果有另一种方法可以避免使用“查找/替换”对话框，那也可以。

这是我试图与之交互的 Eclipse 中的查找/替换对话框：

![查找/替换对话框](../Images/a0fa4ba8c7ff3eae95851f69e095a456.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-27T18:33:51.627

目前不存在此类功能（afaik）。

我提交了一个功能请求： [https ://bugs.eclipse.org/bugs/show_bug.cgi?id=449004](https://bugs.eclipse.org/bugs/show_bug.cgi?id=449004)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T23:37:08.307

Ctrl+k 查找下一个，但从未见过查找/替换快捷方式

# algorithm - 这个明显的 O(n lg n) 乘法算法的错误在哪里？

> ID：14409352
> 
> 赞同：1
> 
> 时间：2013-01-18T23:33:54.057
> 
> 标签：algorithm, time-complexity, multiplication

最近[一篇](http://pratikpoddarcse.blogspot.ca/2013/01/evenly-spaced-ones-in-binary-string.html?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed:%20pratikpoddarcse%20%28CSE%20Blog%29)关于找到三个均匀间隔的谜题的博文将我引向了一个[stackoverflow 问题](https://stackoverflow.com/questions/1560523/onlogn-algorithm-find-three-evenly-spaced-ones-within-binary-string)，其中一个最佳答案声称可以在 O(n lg n) 时间内完成。有趣的部分是该解决方案涉及对多项式进行平方，参考[描述如何在 O(n lg n) 时间内完成它的论文](http://www.cs.iastate.edu/~cs577/handouts/polymultiply.pdf)。

现在，多项式相乘实际上与数字相乘相同。唯一真正的区别是缺少进位。但是...进位也可以在 O(n lg n) 时间内完成。例如：

```
 var value = 100; // = 0b1100100

    var inputBitCount = value.BitCount(); // 7 (because 2^7 > 100 >= 2^6)
    var n = inputBitCount * 2; // 14
    var lgn = n.BitCount(); // 4 (because 2^4 > 14 => 2^3)
    var c = lgn + 1; //5; enough space for 2n carries without overflowing

    // do apparently O(n log n) polynomial multiplication
    var p = ToPolynomialWhereBitsAreCoefficients(value); // x^6 + x^5 + x^2
    var p2 = SquarePolynomialInNLogNUsingFFT(p); // x^12 + 2x^11 + 2x^10 + x^8 + 2x^7 + x^4
    var s = CoefficientsOfPolynomial(p2); // [0,0,0,0,1,0,0,2,1,0,2,2,1]
    // note: s takes O(n lg n) space to store (each value requires at most c-1 bits)

    // propagate carries in O(n c) = O(n lg n) time
    for (var i = 0; i < n; i++)
        for (var j = 1; j < c; j++)
            if (s[i].Bit(j))
                s[i + j].IncrementInPlace();

    // extract bits of result (in little endian order)
    var r = new bool[n];
    for (var i = 0; i < n; i++)
        r[i] = s[i].Bit(0);

    // r encodes 0b10011100010000 = 10000 
```

所以我的问题是：这里的错误在哪里？O(n lg n) 中的数字相乘是计算机科学中一个巨大的开放性问题，我真的很怀疑答案会这么简单。

*   携带错误，还是不是 O(n lg n)？我已经计算出每个值 lg n + 1 位足以跟踪进位，并且算法非常简单，如果它是错误的，我会感到惊讶。请注意，虽然单个增量可能需要 O(lg n) 时间，但 x 个增量的总成本是 O(x)。
*   论文中的多项式乘法算法是错误的，还是有我违反的条件？该论文使用快速傅立叶变换而不是数论变换，这可能是一个问题。
*   40 年来，有很多聪明人错过了[Schönhage-Strassen 算法的一个明显变体吗？](http://en.wikipedia.org/wiki/Sch%C3%B6nhage%E2%80%93Strassen_algorithm)这似乎是最不可能的。

我实际上已经编写了代码来实现这一点，除了有效的多项式乘法（我还不太了解数论变换）。随机测试似乎可以确认算法是正确的，因此问题很可能在时间复杂度分析中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T05:22:50.863

问题是`SquarePolynomialUsingFFT`如果 n 是 word-RAM 或 bit-RAM 模型下的位数，则该步骤实际上不能在 O(n log(n)) 时间内完成。在 word-RAM 模型中（即对 log(n) 位字的常见操作具有单位成本），您刚刚将您的 n 个字变成了 n log(n) 个字，然后您进行了一个需要 O(n log) 的 FFT ² (n)) 时间。在 bit-RAM 模型中（位操作有单位成本），FFT 中的每个操作都需要 O(log n) 时间，因此整个 FFT 需要 O(n log ² (n)) 时间。

Schoenhage-Strassen 的神奇之处在于巧妙地递归选择环，在该环上进行 FFT，这样您就不会得到进一步的 log(n) 爆炸，而只会得到 log(log(n)) 的爆炸。如果你有 k 个 m 字环元素（因此 k*m = n），你只需要 O(m*k log(k)) 时间在那个环中做 m 个 FFT。如果你这样做，你必须计算 k^2 相关的 m-word 卷积，但这很酷；我们可以批量 FFT（使用较小的环）所有 k 个 m 字环元素，进行乘法，然后逆 FFT 返回。

# php - 如何将 php 变量作为文本放置在隐藏的输入 html 输入中？

> ID：14409354
> 
> 赞同：1
> 
> 时间：2013-01-18T23:33:59.783
> 
> 标签：php, html, web

我目前的代码是

```
<form action="post.php" method="post">
<input type="text" name="post"> <br />
<input type="text" name="uname" value="<?php echo $uname?>"> 
```

我需要 $uname 变量成为隐藏输入字段中的文本，以便我可以将其发布到 post.php，因为它是通过前一个发布到此页面的，需要继续进行。有没有更好的方法可以做到这一点，比如直接发布变量，而不是通过输入字段？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T23:35:17.220

尝试

```
<input type="hidden" name="uname" value="<?php echo $uname; ?>"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T23:46:00.457

可能的主要改进是使用“隐藏”输入类型和正确的 HTML 转义值：

```
<input type="hidden" name="uname" value="<?php echo htmlspecialchars($uname); ?>"> 
```

请记住，任何恶意用户都可以通过这种方式查看和篡改传回服务器的数据。如果这是一个问题，您可能希望将数据存储在用户的[会话](http://php.net/manual/en/book.session.php)中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T23:39:11.050

您`type`需要，并且输入元素上`hidden`没有属性，它的.`text``value`

完整示例：

```
<input type="hidden" name="uname" value="<?php echo $uname?>" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T23:37:55.147

```
<input type="hidden" name="uname" value="<?php echo $uname;?>" /> 
```

另一种方法是存储会话变量以将它们带到其他页面。

# dynamic-c - 无法编译 BACnet 代码

> ID：14409356
> 
> 赞同：0
> 
> 时间：2013-01-18T23:34:14.567
> 
> 标签：dynamic-c

我正在尝试在 Rabbit 处理器上运行一些 BACnet 代码，但它会引发以下错误：

```
line  200 : ERROR BACNET.LIB   : 'STDINT.H' cannot be found.            
line  201 : ERROR BACNET.LIB   : 'CONFIG.H' cannot be found.            
line  202 : ERROR BACNET.LIB   : 'VERSION.H' cannot be found.           
line  204 : ERROR BACNET.LIB   : 'KEY.H' cannot be found.               
line  205 : ERROR BACNET.LIB   : 'KEYLIST.C' cannot be found.           
line  206 : ERROR BACNET.LIB   : 'INDTEXT.C' cannot be found.           
line  207 : ERROR BACNET.LIB   : 'FIFO.C' cannot be found.              
line  208 : ERROR BACNET.LIB   : 'RINGBUF.C' cannot be found.           
line  209 : ERROR BACNET.LIB   : 'FILENAME.C' cannot be found.          
line  210 : ERROR BACNET.LIB   : 'MEMCOPY.C' cannot be found.           
line  211 : ERROR BACNET.LIB   : 'CRC.C' cannot be found.               
line  213 : ERROR BACNET.LIB   : 'BACENUM.H' cannot be found.           
line  214 : ERROR BACNET.LIB   : 'BACDEF.H' cannot be found.            
line  215 : ERROR BACNET.LIB   : 'BACSTRUCTS.H' cannot be found.        
line  217 : ERROR BACNET.LIB   : 'BACSTR.C' cannot be found.            
line  218 : ERROR BACNET.LIB   : 'BITS.C' cannot be found.              
line  219 : ERROR BACNET.LIB   : 'BACINT.C' cannot be found.            
line  220 : ERROR BACNET.LIB   : 'BACREAL.C' cannot be found.           
line  221 : ERROR BACNET.LIB   : 'DATETIME.C' cannot be found.          
line  223 : ERROR BACNET.LIB   : 'TXBUF.C' cannot be found. 
```

问题是所有“.c”文件都存在于同一个目录中，我还在项目选项中提到了包含路径。还有其他一些我需要注意的设置吗？有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:52:23.273

动态 c 目录中的 lib.dir 文件需要添加 bacnet 文件夹。arc、demo\handlers 和 demo\objects 文件夹需要添加。

# visual-studio-2010 - 我无法在 Visual Studio 2010 中查看列表框

> ID：14409357
> 
> 赞同：0
> 
> 时间：2013-01-18T23:34:29.873
> 
> 标签：visual-studio-2010, ide

我在 Visual Studio 2010 的 windows 窗体中添加了 tabPage 组件。一切都很好，当今天注意到一些组件（列表框，3 个标签）时，虽然它们存在于项目中，但我看不到它们。

这是截图： ![在此处输入图像描述](../Images/5244ee97c39674a9363333c993a58618.png)

对不起我的无能，但这个问题真的让我很沮丧。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T23:36:55.983

您可能将 TabPage 组件放在其他组件之上。尝试右键单击标签页并选择“发送到后面”或选择隐藏的组件，右键单击并选择“放在前面”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T00:50:20.127

解决！！！我注意到在 Form1.designer.cs 中删除了这一行：this.Controls.Add(this.listBox1);。

之后我添加它，组件是可见的。

这是截图：

![在此处输入图像描述](../Images/509a6bc26dc640c7e2b26a576325a551.png)

# customization - 限制未经身份验证的外网用户访问 Sitecore Media 资产

> ID：14409358
> 
> 赞同：2
> 
> 时间：2013-01-18T23:34:31.473
> 
> 标签：customization, sitecore

我希望对媒体资产的请求表现得像对页面/项目的请求。也就是说，如果用户未登录，他们将被退回到登录页面，并返回他们最初请求的项目。

我可以通过删除外网/匿名用户的读取权限来限制对媒体资产的访问。这可行，但用户被发送到“noaccess”页面（在配置中定义），然后返回以“noaccess”页面作为引荐来源登录。我想知道是否有办法让媒体请求首先检查身份验证而不是访问级别（可能使用自定义处理程序）或扩展处理“禁止访问”请求的方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T10:29:41.213

我检查了`Sitecore.Resources.Media.MediaRequestHandler`类的代码，它的工作原理如下：

1.  Sitecore 尝试获取 mediaItem，然后检查用户 AccessRights
2.  如果访问权限正常，它将处理该项目
3.  如果用户没有足够的访问权限，Sitecore 将重定向到该`<site name="yoursite" loginPage="">`部分中设置的站点登录页面。如果未设置此 loginPage，Sitecore 将重定向到`<setting name="NoAccessUrl" />`web.config 中的设置。

我假设您已将 loginPage 设置设置为您的登录页面。如果这不是所需的行为，您可以为 MediaRequestHandler 创建一个自定义处理程序。

从 MediaRequestHandler 中查看处理访问权限不足的部分代码：

```
using (SecurityDisabler securityDisabler = new SecurityDisabler())

                {
                    media = MediaManager.GetMedia(mediaRequest.MediaUri);
                }
                if (media != null)
                {
                    Assert.IsNotNull(Context.Site, "site");
                    if (Context.Site.LoginPage != string.Empty)
                    {
                        loginPage = Context.Site.LoginPage;
                    }
                    else
                    {
                        loginPage = Settings.NoAccessUrl;
                    }
                    itemNotFoundUrl = loginPage;
                }
                else
                {
                    itemNotFoundUrl = Settings.ItemNotFoundUrl;
                }
                if (!Settings.RequestErrors.UseServerSideRedirect)
                {
                    HttpContext.Current.Response.Redirect(itemNotFoundUrl);
                }
                else
                {
                    HttpContext.Current.Server.Transfer(itemNotFoundUrl);
                } 
```

请参阅[这篇博文](http://sitecoreblog.alexshyba.com/2010/07/file-download-dialog-box-for-sitecore.html)，了解如何创建自定义 MediaHandler

# android - 图像自动旋转到 90 度

> ID：14409363
> 
> 赞同：1
> 
> 时间：2013-01-18T23:34:53.180
> 
> 标签：android

当我使用 phonegap 方法在 android 中上传 potrait 格式的图像时。我遇到了一些错误，它自动旋转到 90 度如何解决这个问题？

# c# - 运行 Project Hawaii 示例应用程序时出现 System.Reflection.TargetInvocationException

> ID：14409366
> 
> 赞同：3
> 
> 时间：2013-01-18T23:35:15.553
> 
> 标签：c#, windows-phone-7, reflection

我正在使用 Project Hawaii SDK 来创建 Speech to Text 应用程序。我运行了示例项目，并在启动时引发了以下异常。

```
System.Reflection.TargetInvocationException was unhandled by user code
HResult=-2146232828
Message=Exception has been thrown by the target of an invocation.
Source=mscorlib
InnerException: System.MethodAccessException
   HResult=-2146233072
   Message=Attempt by security transparent method 'System.RuntimeMethodHandle.InvokeMethod(System.Object, System.Object[], System.Signature, Boolean)' to access security critical method 'System.IO.File.Exists(System.String)' failed.
   Source=mscorlib
   InnerException: 
```

我看到了异常描述，但是我找不到合适的解决方案。这是发生错误的块代码。

```
 try
        {
            bool fileExists = (bool)existsMethodInfo.Invoke(null, new object[] { configFilePath });

            if (fileExists)
            {
                IEnumerable<string> lines = (IEnumerable<string>)readLinesMethodInfo.Invoke(null, new object[] { configFilePath });
                foreach (string line in lines)
                {
                    if (!string.IsNullOrEmpty(line))
                    {
                        return line;
                    }
                    else
                    {
                        break;
                    }
                }
            }
        } 
```

进行这些调用的函数的摘要是“该函数用于查找指定文件中的设置。如果不存在，则返回默认值。由于 CA2140 分析规则，需要 [SecurityCritical] 属性。

# c# - T4 模板不会随 build 转换

> ID：14409368
> 
> 赞同：16
> 
> 时间：2013-01-18T23:35:42.103
> 
> 标签：c#, visual-studio-2012, t4, tangible-t4-editor

我在 Windows 7 上使用 VisualStudio Ultimate 2012（更新 1）。我可以让我的 T4 模板通过以下方式生成文件： *右键单击 [tt 文件] | 运行自定义工具*。效果很好！（对我来说是的）。如果我运行菜单命令，它也可以工作：*Build | 转换所有 T4 模板*。但我想要自动化！当我尝试在每次构建时生成生成的代码文件时遇到问题——这是我的目标。
我看了这个： [Visual Studio 中的 T4 转换和构建顺序](https://stackoverflow.com/questions/1293320/t4-transformation-and-build-order-in-visual-studio)

这不是我想要的。它讨论了使用预构建构建事件。我希望它成为构建的一部分。

还有这个： [有没有办法让 Visual Studio 在成功构建时运行“转换所有模板”？](https://stackoverflow.com/questions/3427079/is-there-a-way-to-get-visual-studio-to-run-transform-all-templates-upon-a-succ)

这也不是我想要的。它讨论了使用构建后事件。

然后我发现了这个： [了解 T4：MSBuild 集成](http://www.olegsych.com/2010/04/understanding-t4-msbuild-integration/)

来自[Oleg Sych 的博客](http://www.olegsych.com/)：

完美的！这就是我要的。尽管他的博客讨论了 VS2010，但我已在适用的情况下将其应用于 VS2012。

我浏览了他实现这一点的每一个步骤。我安装了[Visual Studio SDK 2012](http://www.microsoft.com/en-us/download/details.aspx?id=30668) & [Visual Studio Visualization and Modeling SDK (2012)](http://www.microsoft.com/en-us/download/details.aspx?id=30680)

我开始使用 Tangible T4 插件，但认为有问题，我使用了 Oleg 的 T4 Toolbox Beta。可悲的是，我似乎得到了相同的结果：构建错误。

我按照他在他的网站上的指示重新阅读了所有步骤和部分。我已经研究了几天，现在我在这里的第一篇文章。我被困住了。谢谢你看...

回顾一下：当我在 Visual Studio 2012 中构建或从命令行运行 msbuild 时出现错误（但当我*运行自定义工具*或使用手动*转换所有 T4 模板*时再次出现错误- 两者都可以正常工作）。

这是我的 t4template 调用`s_code.tt`：

```
<#@ template  debug="true" hostSpecific="true" language="C#" #>
<#@ output extension=".js" #>
<#@ assembly name="System.Core" #>
<#@ assembly name="System.Xml" #>
<#@ assembly name="EnvDTE" #>
<#@ assembly name="EnvDTE80" #>
<#@ assembly name="Microsoft.VisualStudio.Shell.Interop.8.0" #>
<#@ import namespace="System.Diagnostics" #>
<#@ import namespace="System" #>
<#@ import namespace="System.Text" #>
<#@ import namespace="System.IO" #>
<#@ import namespace="EnvDTE" #>
<#@ import namespace="EnvDTE80" #>
<#@ import namespace="Microsoft.VisualStudio.TextTemplating" #>
<#@ import namespace="Microsoft.VisualStudio.Shell.Interop" #>

<#
    IServiceProvider serviceProvider = (IServiceProvider)Host;
    EnvDTE.DTE dte = (EnvDTE.DTE)serviceProvider.GetService(typeof(EnvDTE.DTE));
    var configName = dte.Solution.SolutionBuild.ActiveConfiguration.Name;
    string filename = this.Host.ResolvePath("s_code_source.txt");
    string[] lines = File.ReadAllLines(filename);
    bool isAccountFound = false;
    int linecount = lines.Length;
    int currentline = 0;
    for (int i=0;i<linecount;i++)
    {
        if (Contains_S_Account(lines[i]))
        {
            if (configName.ToUpper() == "DEBUG")
            {
                    WriteLine("var s_account = \"macudev2\"");
            }
            else if (configName.ToUpper() == "RELEASE")
             {
                   WriteLine("var s_account = \"macudev\"");
             }

            currentline = i;
            isAccountFound = true;
        }
        else
        {
            WriteLine(lines[i]);
        }
    }
    for (int i=currentline;i<linecount;i++)
    {
        WriteLine(lines[i]);
    }

#>

<#+
private bool Contains_S_Account(string line)
{
    if (line.ToLower().Contains("var s_account"))
    {
        return true;
    }
    else
    {
        return false;
    }
}
#> 
```

这是我的`.csproj`文件：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" Condition="Exists('$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props')" />
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
    <ProductVersion>
    </ProductVersion>
    <SchemaVersion>2.0</SchemaVersion>
    <ProjectGuid>{0A44E136-F4A4-4B31-95DD-2C8A79FDFAF4}</ProjectGuid>
    <ProjectTypeGuids>{349c5851-65df-11da-9384-00065b846f21};{fae04ec0-301f-11d3-bf4b-00c04f79efbc}</ProjectTypeGuids>
    <OutputType>Library</OutputType>
    <AppDesignerFolder>Properties</AppDesignerFolder>
    <RootNamespace>Macu.Content</RootNamespace>
    <AssemblyName>Macu.Content</AssemblyName>
    <TargetFrameworkVersion>v4.0</TargetFrameworkVersion>
    <UseIISExpress>true</UseIISExpress>
    <IISExpressSSLPort />
    <IISExpressAnonymousAuthentication />
    <IISExpressWindowsAuthentication />
    <IISExpressUseClassicPipelineMode />
    <TargetFrameworkProfile />
    <TransformOnBuild>True</TransformOnBuild>
    <IncludeFolders>$(MSBuildProjectDirectory)\Include</IncludeFolders>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
    <DebugSymbols>true</DebugSymbols>
    <DebugType>full</DebugType>
    <Optimize>false</Optimize>
    <OutputPath>bin\</OutputPath>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
    <DebugType>pdbonly</DebugType>
    <Optimize>true</Optimize>
    <OutputPath>bin\</OutputPath>
    <DefineConstants>TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <ItemGroup>
    <Reference Include="EnvDTE, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a">
      <EmbedInteropTypes>True</EmbedInteropTypes>
    </Reference>
    <Reference Include="envdte80, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a">
      <EmbedInteropTypes>True</EmbedInteropTypes>
    </Reference>
    <Reference Include="Microsoft.CSharp" />
    <Reference Include="Microsoft.VisualStudio.Shell.Interop.10.0, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL">
      <EmbedInteropTypes>True</EmbedInteropTypes>
    </Reference>
    <Reference Include="Microsoft.VisualStudio.TextTemplating.11.0, Version=11.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL" />
    <Reference Include="System" />
    <Reference Include="System.Xml" />
  </ItemGroup>
  <ItemGroup>
    <Content Include="shared\script\s_code.js">
      <AutoGen>True</AutoGen>
      <DesignTime>True</DesignTime>
      <DependentUpon>s_code.tt</DependentUpon>
    </Content>
    <Content Include="shared\script\s_code_source.txt" />
    <Content Include="Web.config" />
  </ItemGroup>
  <ItemGroup>
    <Compile Include="Properties\AssemblyInfo.cs" />
  </ItemGroup>
  <ItemGroup>
    <Content Include="shared\script\s_code.tt">
      <Generator>TextTemplatingFileGenerator</Generator>
      <LastGenOutput>s_code.js</LastGenOutput>
      <Parameters>
        &lt;%3fxml version="1.0" encoding="utf-16"%3f&gt;
        &lt;ArrayOfParameterStorage xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" /&gt;
      </Parameters>
    </Content>
    <None Include="Properties\PublishProfiles\Local.pubxml" />
    <None Include="Web.Debug.config">
      <DependentUpon>Web.config</DependentUpon>
    </None>
    <None Include="Web.Release.config">
      <DependentUpon>Web.config</DependentUpon>
    </None>
  </ItemGroup>
  <ItemGroup>
    <T4ReferencePath Include="$(VsInstallDir)PublicAssemblies\" />
  </ItemGroup>
  <ItemGroup>
    <Folder Include="shared\images\" />
  </ItemGroup>
  <ItemGroup />
  <ItemGroup>
    <Service Include="{508349B6-6B84-4DF5-91F0-309BEEBAD82D}" />
  </ItemGroup>
  <PropertyGroup>
    <VisualStudioVersion Condition="'$(VisualStudioVersion)' == ''">10.0</VisualStudioVersion>
    <VSToolsPath Condition="'$(VSToolsPath)' == ''">$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion)</VSToolsPath>
  </PropertyGroup>
  <Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" />
  <Import Project="$(MSBuildExtensionsPath)\Microsoft\VisualStudio\v11.0\TextTemplating\Microsoft.TextTemplating.targets" />
  <Import Project="$(VSToolsPath)\WebApplications\Microsoft.WebApplication.targets" Condition="'$(VSToolsPath)' != ''" />
  <Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v10.0\WebApplications\Microsoft.WebApplication.targets" Condition="false" />
  <ProjectExtensions>
    <VisualStudio>
      <FlavorProperties GUID="{349c5851-65df-11da-9384-00065b846f21}">
        <WebProjectProperties>
          <UseIIS>True</UseIIS>
          <AutoAssignPort>True</AutoAssignPort>
          <DevelopmentServerPort>30698</DevelopmentServerPort>
          <DevelopmentServerVPath>/</DevelopmentServerVPath>
          <IISUrl>http://localhost:50012/</IISUrl>
          <NTLMAuthentication>False</NTLMAuthentication>
          <UseCustomServer>False</UseCustomServer>
          <CustomServerUrl>
          </CustomServerUrl>
          <SaveServerSettingsInUserFile>False</SaveServerSettingsInUserFile>
        </WebProjectProperties>
      </FlavorProperties>
    </VisualStudio>
  </ProjectExtensions>
  <PropertyGroup>
    <PreBuildEvent>
    </PreBuildEvent>
  </PropertyGroup>
  <!-- To modify your build process, add your task inside one of the targets below and uncomment it. 
       Other similar extension points exist, see Microsoft.Common.targets.
  <Target Name="BeforeBuild">
  </Target>
  <Target Name="AfterBuild">
  </Target>
  -->
</Project> 
```

`MSBuild`这是我从命令行运行后看到的错误：

```
C:\Users\[myUserName]\Documents\Visual Studio 2012\Projects\Macu.Content\Macu.Conten
t>msbuild macu.content.csproj /t:TransformAll
Microsoft (R) Build Engine version 4.0.30319.17929
[Microsoft .NET Framework, version 4.0.30319.17929]
Copyright (C) Microsoft Corporation. All rights reserved.

Build started 1/17/2013 2:16:59 PM.
Project "C:\Users\[myUserName]\Documents\Visual Studio 2012\Projects\Macu.Content\M
acu.Content\macu.content.csproj" on node 1 (TransformAll target(s)).
ExecuteTransformations:
  Performing incremental T4 transformation
  Calculating whether transformed output is out of date...
  Transforming template shared\script\s_code.tt...
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\TextTemplating\Micr
osoft.TextTemplating.targets(396,5): warning : Compiling transformation: The va
riable 'isAccountFound' is assigned but its value is never used. Line=24, Colum
n=7 [C:\Users\[myUserName]\Documents\Visual Studio 2012\Projects\Macu.Content\Macu.
Content\macu.content.csproj]
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\TextTemplating\Micr
osoft.TextTemplating.targets(396,5): error : Running transformation: System.Nul
lReferenceException: Object reference not set to an instance of an object.\r [C
:\Users\[myUserName]\Documents\Visual Studio 2012\Projects\Macu.Content\Macu.Conten
t\macu.content.csproj]
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\TextTemplating\Micr
osoft.TextTemplating.targets(396,5): error :    at Microsoft.VisualStudio.TextT
emplating7D294BC599798219F70D124BB1976BCDFB50B07280E2004F9365EC71A617D68D059E43
6CBD1AD344727611A619EE41F939B60372B3E16565CA2D4E4B40FBC5C7.GeneratedTextTransfo
rmation.TransformText() in c:\Users\[myUserName]\Documents\Visual Studio 2012\Proje
cts\Macu.Content\Macu.Content\shared\script\s_code.tt:line 21\. Line=21, Column=
0 [C:\Users\[myUserName]\Documents\Visual Studio 2012\Projects\Macu.Content\Macu.Co
ntent\macu.content.csproj]
Done Building Project "C:\Users\[myUserName]\Documents\Visual Studio 2012\Projects\
Macu.Content\Macu.Content\macu.content.csproj" (TransformAll target(s)) -- FAIL
ED.

Build FAILED.

"C:\Users\[myUserName]\Documents\Visual Studio 2012\Projects\Macu.Content\Macu.Cont
ent\macu.content.csproj" (TransformAll target) (1) ->
(ExecuteTransformations target) ->
  C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\TextTemplating\Mi
crosoft.TextTemplating.targets(396,5): warning : Compiling transformation: The
variable 'isAccountFound' is assigned but its value is never used. Line=24, Col
umn=7 [C:\Users\[myUserName]\Documents\Visual Studio 2012\Projects\Macu.Content\Mac
u.Content\macu.content.csproj]

"C:\Users\[myUserName]\Documents\Visual Studio 2012\Projects\Macu.Content\Macu.Cont
ent\macu.content.csproj" (TransformAll target) (1) ->
(ExecuteTransformations target) ->
  C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\TextTemplating\Mi
crosoft.TextTemplating.targets(396,5): error : Running transformation: System.N
ullReferenceException: Object reference not set to an instance of an object.\r
[C:\Users\[myUserName]\Documents\Visual Studio 2012\Projects\Macu.Content\Macu.Cont
ent\macu.content.csproj]
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\TextTemplating\Micr
osoft.TextTemplating.targets(396,5): error :    at Microsoft.VisualStudio.TextT
emplating7D294BC599798219F70D124BB1976BCDFB50B07280E2004F9365EC71A617D68D059E43
6CBD1AD344727611A619EE41F939B60372B3E16565CA2D4E4B40FBC5C7.GeneratedTextTransfo
rmation.TransformText() in c:\Users\[myUserName]\Documents\Visual Studio 2012\Proje
cts\Macu.Content\Macu.Content\shared\script\s_code.tt:line 21\. Line=21, Column=
0 [C:\Users\[myUserName]\Documents\Visual Studio 2012\Projects\Macu.Content\Macu.Co
ntent\macu.content.csproj]

    1 Warning(s)
    1 Error(s)

Time Elapsed 00:00:01.04 
```

你能看到我正在做的任何导致错误的事情吗？你知道如何修复它，以便我可以使用 msbuild 而不会遇到这个错误吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-19T00:39:45.517

恐怕您无法在构建时成功运行模板，这些模板利用 Host 变量来获取像 DTE 这样的 IDE 服务，因为 msbuild T4 主机被设计为既可以从命令行工作，也可以在内置IDE，因此，不会将全局服务提供者或 DTE 暴露给模板。简单的命令行主机 texttransform.exe 也是如此。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-11T06:11:50.267

我们的一位客户遇到了完全相同的问题，GarethJ 是正确的，这不能开箱即用。

但是，您可以编写自己的“TextTransform.exe”工具，该工具很容易为模板提供 Visual Studio 自动化 API。您需要做的就是实现[ITextTemplatingEngineHost](https://msdn.microsoft.com/en-us/library/microsoft.visualstudio.texttemplating.itexttemplatingenginehost%28v=vs.110%29.aspx?f=255&MSPPError=-2147217396)和[IServiceProvider](https://msdn.microsoft.com/en-us/library/system.iserviceprovider%28v=vs.110%29.aspx)接口，并在请求时返回[DTE](https://msdn.microsoft.com/en-us/library/envdte.dte.aspx)接口的实例。

也就是说：我们写了一篇关于这个场景的[博客文章，并发布了](http://blog.aitgmbh.de/2015/08/07/executing-text-transformation-toolkit-templates-t4-within-the-continuous-build-process/)[工具 = 源代码](https://github.com/AITGmbH/VisualStudioTextTransform)。

不过请注意：您需要在构建服务器上安装正确许可的 Visual Studio 才能使其正常工作。

马蒂德@AIT

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T10:43:54.777

有形 T4 编辑器中有一个名为“构建时转换”的专业功能，它允许您在解决方案资源管理器属性网格中将模板标记为“构建时转换”。这将在您每次在 Visual Studio（而不是构建服务器）中构建时转换模板。在那里，您的模板还可以访问 EnvDTE 和其他 Visual Studio 变量。请参阅：[http ://t4-editor.tangible-engineering.com/blog/transforming-t4-templates-on-build.html](http://t4-editor.tangible-engineering.com/blog/transforming-t4-templates-on-build.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-06T08:26:13.540

我最近在构建过程中遇到了这个问题（不使用`DTE`）。我通过确保我的 PC 上只有 1 个 texttransform.exe 来解决它。出于某种原因，IDE 使用的是最新版本`texttransform.exe`和`msbuild`旧版本。

# php - 使用 Rijndael-128 进行 PHP 解密

> ID：14409371
> 
> 赞同：0
> 
> 时间：2013-01-18T23:36:10.807
> 
> 标签：php, aes, encryption, rijndael

我在 php 中有一个函数可以解密为标题。此函数从 base64 解码并正确解密：

```
function decrypt($base64encoded_ciphertext) {

    $key = 'a16byteslongkey!a16byteslongkey!';

    $plaintext = mcrypt_decrypt(MCRYPT_RIJNDAEL_128, $key, base64_decode($base64encoded_ciphertext), MCRYPT_MODE_CBC);
    $plaintext = trim($plaintext);

    //Sostituisco tutti i caratteri fasulli
    for($i=0; $i<32; $i++) $plaintext = str_replace(chr($i), "", $plaintext);

    return $plaintext;
} 
```

但是..如果我输入这个字符串：**Da/itClhHEVQH9BfL/gIug==**

它返回：**100000065912248XNš!†Özé‰ÎªãaóÒ]`-ÐüõÁÔ...ayã›[¿gp—›s.ý 3á«uÛ§hZ¼ú™R2。**

而不是只有**100000065912248**

我已经尝试使用在线工具并且加密的字符串是正确的..

![在线工具](../Images/34ab5eb497d9302efa0a94bd6fe12509.png)

谢谢！

# linux - 使用awk按列匹配时如何删除原始行和重复行？

> ID：14409373
> 
> 赞同：0
> 
> 时间：2013-01-18T23:36:21.993
> 
> 标签：linux, shell, awk

我找到了我的问题的部分答案，但我不知道其余的。我正在使用awk。我可以使用以下命令删除原始行和重复行：

```
awk 'NR==FNR{a[$0]++;next} a[$0]<2' infile infile 
```

但是，这需要复制整行。有谁知道在第 1 列匹配时如何删除原始行和重复行？

我试过这个

```
awk 'key[$1]; NR==FNR{a[$0]++;next} a[$0]<2' infile infile 
```

但这并没有让我到任何地方。我有一个包含以下类型数据的文件：

```
srv13108 f15001:/export/rack131/srv13108
srv13407 f15001:/export/rack134/srv13407
srv13501 f13901:/export/rack135/srv13501
srv13501 f14001:/export/rack135/srv13501
srv13609 f14901:/export/rack136/srv13609
srv14407 f14101:/export/rack144/srv14407

```

我希望输出为：

```
srv13108 f15001:/export/rack131/srv13108
srv13407 f15001:/export/rack134/srv13407
srv13609 f14901:/export/rack136/srv13609
srv14407 f14101:/export/rack144/srv14407

```

因为 2 行有一个匹配的第 1 列。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T23:59:52.060

你需要awk在线吗？

```
awk '{a[$1]=$0;u[$1]++}END{for(i in u)if(u[i]==1)print a[i]}'  file 
```

给出：

```
srv13609 f14901:/export/rack136/srv13609
srv13108 f15001:/export/rack131/srv13108
srv13407 f15001:/export/rack134/srv13407
srv14407 f14101:/export/rack144/srv14407 
```

# android - 使用“com.google.android.gms.maps.GoogleMap”，我可以在 maps.google.com 上绘制路线吗？

> ID：14409374
> 
> 赞同：0
> 
> 时间：2013-01-18T23:36:32.743
> 
> 标签：android, google-maps, google-maps-android-api-2

我希望可以使用适用于 Android 的 Google 地图在两点之间获取路线/绘制路线（请注意：Google 地图，而不是 Google 导航）。

我刚刚让“com.google.android.gms.maps.GoogleMap”（使用 MapFragment）工作，但我没有看到任何用于在两点之间绘制/获取路线的方法。所以我怀疑这是做不到的。

有人可以验证或否认这一点吗？=)

PS：我知道“谷歌导航”。它可以使用 Intent 在那里获取路线，但问题是我无法让它在我的应用程序中“内联”，这在某种程度上并不理想。所以我转而看地图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T23:46:34.017

> 但我没有看到任何在两点之间绘制/获取路线的方法。所以我怀疑这是做不到的。

使用[a`Polyline`](https://developers.google.com/maps/documentation/android/lines#polylines)绘制路线。

“获取路线”不是 Maps V1 的一部分，也不是 Maps V2 的一部分。您必须找到一些可以为您提供路线信息的 Web 服务。

此外，我强烈建议您让合格的法律顾问查看使用 Maps V2 的条款和条件，以确认您正在尝试做的事情在该协议的范围内，该协议包含与提供导航帮助相关的特定条款。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-09T13:37:21.080

Google Developers 使用 API V2 讨论了获取路由。API V1 确实不是正确的答案。这是 API V2 代码

```
public void setupLine(LatLng startLocation){
     //set up path
     PolylineOptions line=new PolylineOptions().add(startLocation).add(startLocation).color(mLineColour);
     mPath=mMap.addPolyline(line);
     mPath.setGeodesic(true);

     //Add 2 points
      pathPoints=new ArrayList<LatLng>(2);
      pathPoints.add(startLocation);//origin
      pathPoints.add(startLocation);//destination - updated later
    }

private void updateLine(LatLng position){
      //replace location
      pathPoints.set(1, position);

      //assign new points to path
      mPath.setPoints(pathPoints);

    } 
```

# c# - 了解如何在 MVVM 中将 ICollectionView 与实体框架数据一起使用

> ID：14409376
> 
> 赞同：0
> 
> 时间：2013-01-18T23:36:33.763
> 
> 标签：c#, wpf, mvvm, entity-framework-4, observablecollection

我目前有一个简单的应用程序，它由两个同步的 ListBox 组成，这些 ListBox 绑定到 ObservableCollections，它们包装了两个不同的实体框架类。

当 listBox1 中的 Part 项目被选中时，它会将`SelectedItem`的导航键信息传递给 listBox2，listBox2 会显示 Vendors 实体的相应子集。

目前，我的 ViewModel (MainViewModel.cs) 看起来像：

```
public MainViewModel()
{
    _context = new DBEntities();
    _partsCollection = new ObservableCollection<Part>(_context.Parts);
    _vendorsCollection = new ObservableCollection<Vendor>(_context.Vendors);
}

public ObservableCollection<Part> PartsCollection
{
     get { return _partsCollection; }
     set
     {
          OnPropertyChanged("PartsCollection");
          _partsCollection = value;
     }
}

public Observable<Part> SelectedPart
{
     get { return _selectedPart; }
     set
     {
          OnPropertyChanged("SelectedPart");
          _selectedPart = value;
     }
}

public ObservableCollection<Vendor> VendorsCollection
{
     get { return _vendorsCollection; }
     set
     {
          OnPropertyChanged("VendorsCollection");
          _vendorsCollection = value;
     }
} 
```

我的视图（MainView）看起来像：

```
 <UserControl.Resources>
    <local:MainViewModel x:Key="MainViewModelDataSource" />
    </UserControl.Resources>

    <Grid x:Name="LayoutRoot" DataContext="{Binding Source={StaticResource MainViewModelDataSource}}">
           <ListBox ItemsSource="{Binding PartsCollection, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"  Margin="43,87,377,57" Name="listBox1"
             SelectedItem="{Binding SelectedPart, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
             IsSynchronizedWithCurrentItem="True" >
        <ListBox.ItemTemplate>
            <DataTemplate>
                <TextBlock FontSize="13" Foreground="Black" Padding="3" Text="{Binding shapeName}" />
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>

    <ListBox IsSynchronizedWithCurrentItem="True" 
             ItemsSource="{Binding ElementName=listbox2,  Path=SelectedItem.Vendors, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, NotifyOnSourceUpdated=True}" Margin="345,87,75,57" 
             >
        <ListBox.ItemTemplate>
            <DataTemplate>
                <TextBlock FontSize="13" Foreground="Black" Padding="3" Text="{Binding mateStyle}" />
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

这很好用。但是，我想将 listBox2 绑定到我的视图模型的属性以更新`VendorsCollection`. 我想`SelectedPart`在我的视图模型上使用“”属性，目前甚至没有使用它。

EF 的全部意义在于将它的所有功能用作 ORM，而不是在我的视图模型中再次构建额外的 ORM 来发送更改通知。据我所见，设置 an`ICollectionView`是一种相当复杂的方法，但我无法弄清楚绑定。

我不确定下一步是什么，以便我可以`PropertyChanged`发出通知并更新我的 Vendors `ObservableCollection`，将 listBox2 xaml 绑定到我的视图模型的集合属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T02:27:52.820

我也在使用 MVVM 和实体框架，但使用代码优先的方法。我厌倦了所有 MVVM 的“纯粹性”，其中 ViewModel 应该引发更改通知事件，所以我在我的所有模型类上实现了 INPC，我从未如此快乐过！在 ViewModel 中复制所有模型属性只是为了通知更改是很疯狂的。

我看到您正在使用 DBEntities，所以我不确定您将如何在模型对象中实现更改通知，但我强烈建议您这样做。我会让你的生活更轻松。

顺便说一句，请务必在将支持字段设置为新值之后引发 OnPropertyChanged 事件，如下所示：

```
 set
 {
      _selectedPart = value; //first you change the private backing field
      OnPropertyChanged("SelectedPart"); //then you notify that it has changed, so everything gets the new value
 } 
```

关于绑定，您正在使用 ViewModel 的 SelectedPart 属性，此处：

```
SelectedItem="{Binding SelectedPart, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
IsSynchronizedWithCurrentItem="True" 
```

您将 listbox1 中的选定项目绑定到 SelectedPart 属性，并且通过将 IsSynchronizedWithCurrentItem 设置为 true，每次您在 UI 中选择某些内容时，ViewModel 中的属性都会更新（反之亦然，如果您将 SelectedPart 设置为代码 UI 将接收更新）。

因此，要绑定到第二个列表框中的 SelectedPart 供应商，只需执行以下操作：

ItemsSource="{绑定 SelectedPart.Vendors, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, NotifyOnSourceUpdated=True}"

在这种情况下，您不需要创建 VendorsCollection，因为您可以通过 SelectedPart.Vendors 访问相同的元素（或者您可以将 VendorsCollection 设置为具有好名称的包装器以返回 SelectedPart.Vendor，只需确保检查 SelectedPart 是否为空）。

关于 ICollectionView，知道它只是 ObservableCollection（或类似的）的包装，以便绑定到从 Selector 继承的 FrameworkElements（如 ListBox）（即它们具有 SelectedItem 属性）。

当您绑定到 ObservableCollection 时，WPF 在后台创建一个 ICollectionView，因此您获得了 SelectedItem。您可以创建自己的 ICollectionView，使用 ObservableCollection 提供它，然后绑定到 XAML 中的 ICollectionView，就像使用 ObservableCollection 一样。如果您决定这样做，我建议您使用 ListCollectionView，您可以使用它过滤和创建组（用于树视图）。

最后一句话：记住 ObservableCollection（以及所有 ICollectionViews）只会引发 CollectionChanged 事件（即，当您向集合添加/删除项目时）。如果您更改属于集合的元素的属性，即使它实现 INotifyPropertyChanged，它们也不会引发任何事情。如果您想了解这一点，您必须创建一个自定义集合，[这里](https://stackoverflow.com/questions/901921/observablecollection-and-item-propertychanged)是一个（众多）示例。

希望这是有用的，问候！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T15:39:23.520

要开箱即用 PropertyChanged，只需将 ObservableCollection 传递到 BindingList 中。

**System.Data.Entity**命名空间中的EntityFramework有一个**ToBindingList**扩展，可以帮助您。

# android - 当我在文本输入框中输入超过 7 个序列号时，Android 上的应用程序关闭

> ID：14409378
> 
> 赞同：0
> 
> 时间：2013-01-18T23:36:44.890
> 
> 标签：android, html, textinput

我正在使用 android 模拟器和手机设备测试我在 eclipse 中创建的应用程序，发现每当我在输入文本框中输入超过 7 个序列号时，应用程序立即关闭并且 Eclipse LogCat 显示：01-14 20 ：52：12.888：A / libc（617）：致命信号11（SIGSEGV）在0x0000000c（代码= 1），线程631（WebViewCoreThre）

示例输入是“1234567890”，但是，当我到达数字 9 时，表单和应用程序关闭。但是，如果我在第 8 个字符之后输入字母字符（例如，“12345678AB”），它可以正常工作。请参阅下面的 html 剪辑。

```
<label for="ContactNbr">Enter Contact Number:</label>
<input type="text" name="ContactNbr" id="ContactNbr" value="" /> 
```

# javascript - 原型 - 删除类，到由 ClassName 选择的元素

> ID：14409380
> 
> 赞同：1
> 
> 时间：2013-01-18T23:36:54.207
> 
> 标签：javascript, prototype, classname

## [http://jsfiddle.net/9UQwM/1/](http://jsfiddle.net/9UQwM/1/)

该脚本以交替模式从元素中删除类，

最重要的是为什么？

可以做些什么来解决这个问题？

```
Object.prototype.removeClass = function (class_name) {
    if (this.length) {
        for (i = 0; i < this.length; i++) {
            this[i].classList.remove(class_name);
        }
    }
}
document.getElementsByClassName("test").removeClass("test"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T23:43:26.893

因为当你删除时，下一个索引会向下移动一个。向相反方向循环。

```
for (var i = this.length - 1; i >= 0; i--) { ... } 
```

[http://jsfiddle.net/9UQwM/2/](http://jsfiddle.net/9UQwM/2/)

使用 while 循环可能会带来更多内容

```
Object.prototype.removeClass = function(class_name) {
    if (this.length) {
        while(this.length>0) {
            console.log(this.length);
            this[0].classList.remove(class_name);
        }
    }
}
document.getElementsByClassName("test").removeClass("test"); 
```

输出将是 7,6,5,4,3,2,1

[http://jsfiddle.net/9UQwM/4/](http://jsfiddle.net/9UQwM/4/)

所以`this`当你删除类时更新

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T23:50:11.373

我发现了另一种解决方法，而不是[@epascarello](https://stackoverflow.com/a/14409442/1249581)描述的。制作纯 JS 数组可以`this`很好地完成工作：

```
var that = Array.prototype.slice.call(this);
for (var i = 0; i < that.length; i++) {
    that[i].classList.remove(class_name);
} 
```

**演示：http:** [//jsfiddle.net/9UQwM/3/](http://jsfiddle.net/9UQwM/3/)

# android - 来自 findViewById 的 NullPointer 错误

> ID：14409388
> 
> 赞同：1
> 
> 时间：2013-01-18T23:37:13.223
> 
> 标签：android, xml, nullpointerexception, eclipse-adt, findviewbyid

我的 findViewById() 上的空指针有问题，它是一个非常简单的应用程序，它首先加载到 AnalogClock 活动中，只有一个模拟时钟和按钮进入 DigitalClock 活动，第一个活动加载正常，但是当单击按钮时 viewById () 在 DigitalClock 活动的 onCreate 中返回 null 然后崩溃。

```
AnalogActivity.java

package com.example.dualclocks2;

import android.net.Uri;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class AnalogActivity extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_analog);

    Button go2DigitalButton = (Button) findViewById(R.id.btnGo2Digital);
    go2DigitalButton.setOnClickListener(go2DigitalButtonListener);

}

public OnClickListener go2DigitalButtonListener = new OnClickListener() 
   {

    @Override
    public void onClick(View v) {

         Intent intent = new Intent(AnalogActivity.this, DigitalActivity.class);            

         startActivity(intent); // execute the Intent
    }

   };

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_analog, menu);
    return true;
}
} 
```

活动模拟.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".AnalogActivity" >

<AnalogClock
    android:id="@+id/analogClock1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="150dp" />

<Button
    android:id="@+id/btnGo2Digital"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/analogClock1"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="62dp"
    android:text="@string/go2DigitalClock" />
</RelativeLayout> 
```

数字活动.java

```
 package com.example.dualclocks2;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class DigitalActivity extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_digital);

    Button go2AnalogButton = (Button) findViewById(R.id.btnGo2Digital);//null here
    go2AnalogButton.setOnClickListener(go2AnalogButtonListener);
}

public OnClickListener go2AnalogButtonListener = new OnClickListener() 
   {

    @Override
    public void onClick(View v) {

         Intent intent = new Intent(DigitalActivity.this, AnalogActivity.class);            

         startActivity(intent); // execute the Intent
    }

   };

@Override
public boolean onCreateOptionsMenu(Menu menu) 
      {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_digital, menu);
    return true;
} 
```

}

activity_digital.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".DigitalActivity" >

<Button
    android:id="@+id/btnGo2Analog"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="69dp"
    android:text="@string/go2Analog" />

<DigitalClock
    android:id="@+id/digitalClock1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:gravity="center"
    android:text="DigitalClock"
    android:textSize="@dimen/digitalClockSize" />

</RelativeLayout> 
```

日志猫

```
01-18 17:05:35.835: E/AndroidRuntime(15800): FATAL EXCEPTION: main
01-18 17:05:35.835: E/AndroidRuntime(15800): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.dualclocks2/com.example.dualclocks2.DigitalActivity}: java.lang.NullPointerException
01-18 17:05:35.835: E/AndroidRuntime(15800):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
01-18 17:05:35.835: E/AndroidRuntime(15800):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
01-18 17:05:35.835: E/AndroidRuntime(15800):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-18 17:05:35.835: E/AndroidRuntime(15800):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
01-18 17:05:35.835: E/AndroidRuntime(15800):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-18 17:05:35.835: E/AndroidRuntime(15800):    at android.os.Looper.loop(Looper.java:130)
01-18 17:05:35.835: E/AndroidRuntime(15800):    at android.app.ActivityThread.main(ActivityThread.java:3688)
01-18 17:05:35.835: E/AndroidRuntime(15800):    at java.lang.reflect.Method.invokeNative(Native Method)
01-18 17:05:35.835: E/AndroidRuntime(15800):    at java.lang.reflect.Method.invoke(Method.java:507)
01-18 17:05:35.835: E/AndroidRuntime(15800):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
01-18 17:05:35.835: E/AndroidRuntime(15800):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
01-18 17:05:35.835: E/AndroidRuntime(15800):    at dalvik.system.NativeStart.main(Native Method)
01-18 17:05:35.835: E/AndroidRuntime(15800): Caused by: java.lang.NullPointerException
01-18 17:05:35.835: E/AndroidRuntime(15800):    at com.example.dualclocks2.DigitalActivity.onCreate(DigitalActivity.java:19)
01-18 17:05:35.835: E/AndroidRuntime(15800):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-18 17:05:35.835: E/AndroidRuntime(15800):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
01-18 17:05:35.835: E/AndroidRuntime(15800):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T23:40:07.520

```
R.layout.activity_digital 
```

不包含 id 为 的 Button `btnGo2Digital`。

看来您想要`R.id.btnGo2Analog`并打算写

```
Button go2AnalogButton = (Button) findViewById(R.id.btnGo2Analog);//changed id 
```

# android - 选择上下文菜单项时出现空指针异常

> ID：14409391
> 
> 赞同：1
> 
> 时间：2013-01-18T23:37:33.847
> 
> 标签：android, nullpointerexception, android-contextmenu

我有一个项目清单。当我长按一个项目时，我会弹出一个上下文菜单，其中包含 3 个选项来编辑、删除和添加到收藏夹。但是，当我从上下文菜单中选择第一项来编辑联系人时，我收到以下错误：

**java.lang.RuntimeException：无法启动活动 ComponentInfo{com.example.oopca2/com.example.oopca2.EditActivity}：java.lang.NullPointerException**

这是我的代码：

```
public class MainActivity extends ListActivity {

ActionBar ab;
ContactsListAdapter adapter;
ContactsDbAdapter dbAdapter;
List<Contact> contacts;
Context context;
private Contact selectedPerson;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ab = this.getActionBar();
    ab.setDisplayShowTitleEnabled(true);
    ab.setTitle("All Contacts");

    dbAdapter = new ContactsDbAdapter(this);
    dbAdapter.open();
    contacts = dbAdapter.getAllContacts();
    adapter = new ContactsListAdapter(this, contacts, dbAdapter);
    this.setListAdapter(adapter);
    registerForContextMenu(this.getListView());

    context = this.getApplicationContext();

}

@Override
protected void onResume() {
    super.onResume();
    adapter.updateList();
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    Contact c = contacts.get(position);
    Toast.makeText(this, c.getName().toString() + " Clicked!", Toast.LENGTH_SHORT).show();
}

//Context menu
@Override
public void onCreateContextMenu(ContextMenu menu, View v,ContextMenuInfo menuInfo) {
    AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo) menuInfo;
    this.selectedPerson = contacts.get(info.position);
    MenuInflater mi = getMenuInflater();
    mi.inflate(R.menu.activity_context, menu);
    menu.setHeaderIcon(R.drawable.setting);
    menu.setHeaderTitle(this.selectedPerson.getName().toString() + " - Options");
}

@Override
public boolean onContextItemSelected(MenuItem item) { 
```

AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo) item.getMenuInfo();

```
 long rowId = (info.id);

    switch(item.getItemId()){
    case R.id.menu_edit:
        Toast.makeText(this, "Edit " + rowId, Toast.LENGTH_SHORT).show();
        Intent i = new Intent(getApplicationContext(), EditActivity.class);
        i.putExtra("row", rowId);
        startActivity(i);

        return true;
    case R.id.menu_delete:
        Toast.makeText(this, "Delete " +  rowId , Toast.LENGTH_SHORT).show();
        dbAdapter.deleteContact(rowId);
        return true;

    case R.id.menu_favs:
        Toast.makeText(this, "Added to Favourites!" +  rowId, Toast.LENGTH_SHORT).show();

        return true;
    }

    return false;
}

//Options menu
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch(item.getItemId()){
    case R.id.menu_add:
        Toast.makeText(this, "Add Contact", Toast.LENGTH_SHORT).show();
        Intent i = new Intent(context, AddActivity.class);
        startActivity(i);
        return true;

    case R.id.menu_fav:
        Toast.makeText(this, "View Favourites", Toast.LENGTH_SHORT).show();
        return true;
    }

    return false;
} 
```

}

这是 EditActivity.class：

```
public class EditActivity extends Activity{

EditText name;
EditText number;
EditText email;
CheckBox fav;
ActionBar ab;
Button updateBtn;
ContactsDbAdapter dbAdapter;
Contact c;
Intent i;
Long rowId;
boolean favourite;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.setContentView(R.layout.activity_edit);

    ab = this.getActionBar();
    ab.setTitle("Edit Contact");

    dbAdapter.open();

    i = getIntent();
    rowId = i.getExtras().getLong("row");
    c = dbAdapter.getContact(rowId);

    name = (EditText)findViewById(R.id.editText1);
    number = (EditText)findViewById(R.id.editText2);
    email = (EditText)findViewById(R.id.editText3);
    fav = (CheckBox)findViewById(R.id.checkBox1);

    name.setText(c.getName().toString());
    number.setText(c.getNumber().toString());
    email.setText(c.getEmail().toString());
    fav.setChecked(c.getFavourite());

    updateBtn = (Button)findViewById(R.id.editBtn);
    updateBtn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            if(fav.isChecked()){
                favourite = true;
            }else{
                favourite = false;
            }

            dbAdapter.updateContact(name.getText().toString(), number.getText().toString(), email.getText().toString(), favourite, rowId);
            dbAdapter.close();
            finish();
        }
    });
}

//Options menu
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {

        switch(item.getItemId()){
        case R.id.menu_add:
            Toast.makeText(this, "Add Contact", Toast.LENGTH_SHORT).show();
            Intent i = new Intent(getApplicationContext(), AddActivity.class);
            startActivity(i);
            return true;

        case R.id.menu_fav:
            Toast.makeText(this, "View Favourites", Toast.LENGTH_SHORT).show();
            return true;
        }

        return false;
    } 
```

}

我不知道我哪里出错了。任何帮助将非常感激！谢谢。

日志：

```
01-18 23:48:16.319: E/AndroidRuntime(23708): FATAL EXCEPTION: main
01-18 23:48:16.319: E/AndroidRuntime(23708): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.oopca2/com.example.oopca2.EditActivity}: java.lang.NullPointerException
01-18 23:48:16.319: E/AndroidRuntime(23708):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2194)
01-18 23:48:16.319: E/AndroidRuntime(23708):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2229)
01-18 23:48:16.319: E/AndroidRuntime(23708):    at android.app.ActivityThread.access$600(ActivityThread.java:139)
01-18 23:48:16.319: E/AndroidRuntime(23708):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1261)
01-18 23:48:16.319: E/AndroidRuntime(23708):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-18 23:48:16.319: E/AndroidRuntime(23708):    at android.os.Looper.loop(Looper.java:154)
01-18 23:48:16.319: E/AndroidRuntime(23708):    at android.app.ActivityThread.main(ActivityThread.java:4944)
01-18 23:48:16.319: E/AndroidRuntime(23708):    at java.lang.reflect.Method.invokeNative(Native Method)
01-18 23:48:16.319: E/AndroidRuntime(23708):    at java.lang.reflect.Method.invoke(Method.java:511)
01-18 23:48:16.319: E/AndroidRuntime(23708):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-18 23:48:16.319: E/AndroidRuntime(23708):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-18 23:48:16.319: E/AndroidRuntime(23708):    at dalvik.system.NativeStart.main(Native Method)
01-18 23:48:16.319: E/AndroidRuntime(23708): Caused by: java.lang.NullPointerException
01-18 23:48:16.319: E/AndroidRuntime(23708):    at com.example.oopca2.EditActivity.onCreate(EditActivity.java:50)
01-18 23:48:16.319: E/AndroidRuntime(23708):    at android.app.Activity.performCreate(Activity.java:4531)
01-18 23:48:16.319: E/AndroidRuntime(23708):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
01-18 23:48:16.319: E/AndroidRuntime(23708):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2150)
01-18 23:48:16.319: E/AndroidRuntime(23708):    ... 11 more 
```

编辑活动.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_margin="20dp"
tools:context=".EditActivity" >

<CheckBox
    android:id="@+id/checkBox1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/editText3"
    android:layout_marginTop="17dp"
    android:text="@string/favLabel" />

<Button
    android:id="@+id/editBtn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/checkBox1"
    android:text="@string/editBtn" />

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/editText2"
    android:layout_marginTop="22dp"
    android:text="@string/emailLabel" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_marginTop="16dp"
    android:layout_toRightOf="@+id/textView2"
    android:ems="10"
    android:inputType="textPersonName" />

<EditText
    android:id="@+id/editText2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/textView2"
    android:layout_alignLeft="@+id/editText1"
    android:layout_alignParentRight="true"
    android:ems="10"
    android:inputType="phone" />

<EditText
    android:id="@+id/editText3"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/textView3"
    android:layout_alignLeft="@+id/editText2"
    android:layout_alignParentRight="true"
    android:ems="10"
    android:inputType="textEmailAddress" >

</EditText>

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/editText1"
    android:layout_marginTop="22dp"
    android:text="@string/numberLabel" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/editText1"
    android:layout_alignParentLeft="true"
    android:text="@string/nameLabel" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T23:44:02.993

您只是忘记了初始化`dbAdapter`：

```
dbAdapter = new ContactsDbAdapter(); // Something like this
dbAdapter.open(); 
```

# open-source - 我正在寻找开源的帮助台解决方案

> ID：14409404
> 
> 赞同：-2
> 
> 时间：2013-01-18T23:38:42.460
> 
> 标签：open-source, tool-rec

我正在寻找一个帮助台解决方案，我希望它开源开发，如果有的话我可以付款。有人可以帮我搜索一下。

[我想要的一些功能](http://www.manageengine.com/products/service-desk/help-desk-features.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T23:42:02.943

我使用[osTicket](http://osticket.com/)。你可以随心所欲地编辑它:)

# python - 这个双重列表理解可以直接进入一个数组吗（有没有更 Pythonic 的方式？）

> ID：14409406
> 
> 赞同：4
> 
> 时间：2013-01-18T23:38:53.047
> 
> 标签：python, numpy, reduce

我的目标是编写一个函数来执行两个数组的模 2 乘法（乘法 = 和，加法 = xor）。这是我现在拥有的代码。任何关于如何改进这一点的建议都非常感激 - 特别是，我应该/如何让列表理解直接进入适当形状的数组？

```
import numpy as np
import operator

def m2mult(a,b):

    c = np.ndarray([reduce(operator.xor, np.logical_and(a[x,:],b[:,y]))
         for x in range(0,a.shape[0]) for y in range (0, b.shape[1])])
    c.shape = (a.shape[0], b.shape[1])

    return c 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T00:01:15.700

你根本不应该这样做：

```
a = np.random.randint(0,2,(4,4))
b = np.random.randint(0,2,(4,4))

# Now note that this is true:
# (I will let you figure that out, its a lot of neat broadcasting.
# b.T would be enough as well, because of it)
np.multiply(a[:,None,:], b.T[None,:,:]).sum(-1) == np.dot(a,b)
# note also that .sum(-1) is the same as np.add.reduce(array, axis=-1)

# now we can do the same thing for your logical operations:
a = np.random.randint(0,2,(4,4)).astype(bool)
b = np.random.randint(0,2,(4,4)).astype(bool)

def m2mult(a, b):
    mult = np.logical_and(a[:,None,:], b.T[None,:,:])
    return np.logical_xor.reduce(mult, axis=-1) 
```

它完全矢量化，速度更快，而且只是 numpy！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T23:14:46.073

您可以只对`int`s 进行公共矩阵乘法，然后进行模2归约，然后转换回`bool`：

```
np.mod(np.dot(a.astype('u1'), b), 2).astype('bool') 
```

它比 seberg 的解决方案和 Jaime 对它的修改要快。

```
+---------------+---------+-----------+----------+
|               |  10x10  | 1000x1000 | 750x1250 |
+---------------+---------+-----------+----------+
| m2mult_tz     | 33 us   | 7.27 s    | 4.68 s   |
| m2mult_jaime  | 56.7 us | 20.4 s    | 14.2 s   |
| m2mult_seberg | 62.9 us | 20.5 s    | 14.3 s   |
+---------------+---------+-----------+----------+ 
```

对于非常大的数组或者如果您的程序经常执行此操作，这可能是一个问题。
我对这种方法和 seberg 的解决方案以及 Jaime 建议的修改进行了计时。
以下是我实现不同功能的方式：

```
import numpy as np

def create_ab(n, m):
    a = np.random.randint(0, 2, (n, m)).astype(bool)
    b = np.random.randint(0, 2, (m, n)).astype(bool)
    return a, b

def m2mult_tz(a, b):
    return np.mod(np.dot(a.astype('u1'), b), 2).astype(bool)

def m2mult_seberg(a, b):
    return np.logical_xor.reduce(
                np.logical_and(a[:,None,:], b.T[None,:,:]),
                axis=-1)

def m2mult_jaime(a, b):
    return np.logical_xor.reduce(
                np.logical_and(a[:, :, None], b),
                axis=1) 
```

这是 1000x1000 时间的记录（我还检查了所有情况下的结果是否相同）：

```
In [19]: a, b = create_ab(1000, 1000)

In [20]: timeit m2mult_tz(a, b)
1 loops, best of 3: 7.27 s per loop

In [21]: timeit m2mult_jaime(a, b)
1 loops, best of 3: 20.4 s per loop

In [22]: timeit m2mult_seberg(a, b)
1 loops, best of 3: 20.5 s per loop

In [23]: r_tz = m2mult_tz(a, b)

In [24]: r_jaime = m2mult_jaime(a, b)

In [25]: r_seberg = m2mult_seberg(a, b)

In [26]: np.all(r_tz == r_jaime)
Out[26]: True

In [27]: np.all(r_tz == r_seberg)
Out[27]: True 
```

# gerrit - 通过提交消息搜索 Gerrit

> ID：14409413
> 
> 赞同：16
> 
> 时间：2013-01-18T23:39:20.113
> 
> 标签：gerrit

我们的团队使用的标准是在所有提交消息前加上“bz12345:”（其中 12345 被您正在处理的错误替换），我希望能够搜索具有该错误编号的所有提交。

我一遍又一遍地阅读[http://gerrit.googlecode.com/svn/documentation/2.1.6/user-search.html](http://gerrit.googlecode.com/svn/documentation/2.1.6/user-search.html)并没有找到搜索提交消息标题的方法。有人有在提交消息的第一行搜索任意文本的技巧吗？message:、tr: 和 bug: 都不起作用。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-21T15:51:08.257

啊，我想通了。你也必须有一个`status:`查询。例如，这**有效**：

```
status:merged message:bz12345 
```

这**不会**：

```
message:bz12345 
```

这可能是因为我们使用的是较旧版本的 Gerrit（我认为是 2.2.1）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-19T01:01:37.563

消息：bz12345 应该可以工作。

查看[最新文档](https://gerrit-review.googlesource.com/Documentation/user-search.html#_search_operators)

请注意，它会搜索整个邮件正文，而不仅仅是主题。

> 消息：'消息'
> 
> 与提交消息正文中的 MESSAGE 任意字符串匹配的更改。

# php - PHP file_exists 但重命名失败“没有这样的文件或目录......”？

> ID：14409415
> 
> 赞同：5
> 
> 时间：2013-01-18T23:39:37.337
> 
> 标签：php, rename, file-exists

考虑到有问题的文件的创建有点落后于有问题的函数，我尝试运行一个 while 循环以在调用 rename 之前争取一点时间。

```
$no_file = 1;   
while($no_file && $no_file < 300)
{   // generation of Worksheet.xls may lag behind function -- WAIT FOR IT
    if(file_exists($old_path))
    {   $no_file = 0;
        rename($old_path, $new_path);
    }   else $no_file++;
}
if($no_file) die("Error: Worksheet.xls not found"); 
```

在这种配置中，我认为只有在 file_exists() 返回 true 时才能调用 rename()，但是对于我的一生，我无法弄清楚 rename() 是如何/为什么被调用然后返回失败...

> PHP 警告：重命名（C:\wamp\www\demox/wp-content/plugins/cat-man/store-manager/summary/worksheets/Worksheet.xls,C:\wamp\www\demox/wp-content/plugins /cat-man/store-manager/summary/statements/TESTING/2012/Worksheet.xls) 没有这样的文件或目录...

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-18T23:40:43.887

它可能告诉你`statements/TESTING/2012/`不存在。创建这些目录，[`mkdir()`](http://php.net/mkdir)以便它能够保存文件。

```
mkdir( 'C:\wamp\www\demox/wp-content/plugins/cat-man/store-manager/summary/statements/TESTING/2012/', 777, true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T03:21:49.923

无论多么遥远，此代码都可能出现竞争条件，您的文件可能会在检查它是否存在和尝试重命名它之间发生变化。最好立即从`try/catch`块中尝试重命名并直接处理失败。

`break`您应该在重命名后使用语句显式退出循环。而`$no_file = 0;`改名前的设定就是过早地庆祝胜利。

此外，如果您出于延迟目的而循环，则需要休眠执行，否则循环将以 PHP 处理它的速度完成。看看`time_nanosleep`。如果您对该`while`循环计时，您会看到它非常非常快地完成：

```
$time_start = microtime(true);
$x = 0;
while ($x < 300) {
    file_exists("index.php");
    $x++;
}
echo sprintf("300 loops in %.9f seconds", microtime(true) - $time_start);

// 300 loops in 0.000626087 seconds 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T16:36:21.623

好的，mkdir() 确实解决了问题！这是上下文中的解决方案。

```
$old_path = $smry_dir."worksheets/Worksheet.xls";
if(@$store_options->paypal_live ==='false')
{   $new_path = $smry_dir."statements/TESTING/$reporting_year";
}   else $new_path = $smry_dir."statements/$reporting_year";
if(!is_dir($new_path)) mkdir($new_path, 777, true);
rename($old_path, $new_path."/Worksheet.xls"); 
```

再次感谢所有的帮助！语句 DIR 始终存在，我发现虽然 rename() 会毫无怨言地写入单个新子目录 $reporting_year，但它不会/不能写入递归子目录“TESTING/$reporting_year”。

mkdir 的递归参数来救援！

# git - 在单个文件中重新启动/撤消冲突解决

> ID：14409420
> 
> 赞同：231
> 
> 时间：2013-01-18T23:40:16.610
> 
> 标签：git, git-merge

在与几个冲突文件的较大 git 合并中，我错误地将文件标记为已解决（`git add FILE`经过一些编辑后使用）

现在我想撤销我的冲突解决尝试并重新开始解决该文件。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：422
> 
> 时间：2013-01-19T00:18:05.313

在这里找到解决方案：http: [//gitster.livejournal.com/43665.html](http://gitster.livejournal.com/43665.html)

```
git checkout -m FILE 
```

这将恢复未解析状态，包括有关父级和合并基础的所有信息，从而允许重新启动解析。

# java - 覆盖 Spring MVC 上下文配置位置会产生错误

> ID：14409425
> 
> 赞同：0
> 
> 时间：2013-01-18T23:41:19.167
> 
> 标签：java, xml, spring, spring-mvc, tcserver

尝试初始化我的应用程序时，我不断收到此错误（它似乎实际上工作正常，但令人不安）

```
SEVERE: Exception sending context initialized event to listener instance of class 

org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from ServletContext resource [/WEB-INF/spring-mango/root-context.xml]; nested exception is java.io.FileNotFoundException: Could not open ServletContext resource [/WEB-INF/spring-mango/root-context.xml]
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:341)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:93)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:467)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:397)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:649)
    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1585)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.io.FileNotFoundException: Could not open ServletContext resource [/WEB-INF/spring-mango/root-context.xml]
    at org.springframework.web.context.support.ServletContextResource.getInputStream(ServletContextResource.java:117)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:328)
    ... 26 more 
```

我已经在`context.xml`web 服务器中设置了配置文件的位置，如此处所示（这是在 SpringSource ToolSuite 2.9.2 和 tc server 2.7 中）

```
<?xml version="1.0" encoding="UTF-8"?>
<Context>
    <!-- Default set of monitored resources -->
    <WatchedResource>WEB-INF/web.xml</WatchedResource>

    <!-- Uncomment this to disable session persistence across Tomcat restarts -->
    <!--
            <Manager pathname="" />
            -->
    <!-- Uncomment this to enable Comet connection tacking (provides events
                 on session expiration as well as webapp lifecycle) -->
    <!--
            <Valve className="org.apache.catalina.valves.CometConnectionManagerValve" />
            -->
    <Loader loaderClass="com.springsource.insight.collection.tcserver.ltw.TomcatWeavingInsightClassLoader"/>
    <Listener className="com.springsource.insight.collection.tcserver.lifecycle.ApplicationLifecycleCollectionListener"/>

    <Parameter name="contextConfigLocation" value="/WEB-INF/spring-mango/root-context.xml" override="false"/>

</Context> 
```

web.xml 文件可以在这里找到

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">
  <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/root-context.xml</param-value>
  </context-param>
  <filter>
    <filter-name>hibernateFilter</filter-name>
    <filter-class>org.springframework.orm.hibernate3.support.OpenSessionInViewFilter</filter-class>
    <init-param>
      <param-name>sessionFactoryBeanName</param-name>
      <param-value>sessionFactory</param-value>
    </init-param>
  </filter>
  <filter-mapping>
    <filter-name>hibernateFilter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
  <filter>
    <filter-name>CharacterEncodingFilter</filter-name>
    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
    <init-param>
      <param-name>encoding</param-name>
      <param-value>UTF-8</param-value>
    </init-param>
    <init-param>
      <param-name>forceEncoding</param-name>
      <param-value>true</param-value>
    </init-param>
  </filter>
  <filter>
    <filter-name>HttpMethodFilter</filter-name>
    <filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>
  </filter>
  <filter>
    <filter-name>Spring OpenEntityManagerInViewFilter</filter-name>
    <filter-class>org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>CharacterEncodingFilter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>HttpMethodFilter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>Spring OpenEntityManagerInViewFilter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
  <filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
  <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener>
  <servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
      <param-name>contextConfigLocation</param-name>
      <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>
</web-app> 
```

以及在此处找到的根上下文文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:security="http://www.springframework.org/schema/security"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

    <!-- Enables the Spring MVC @Controller programming model -->
    <annotation-driven />

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
    <resources mapping="/resources/**" location="/resources/" />

    <interceptors>
        <beans:bean class="org.springframework.web.servlet.theme.ThemeChangeInterceptor"/>
    </interceptors>

    <beans:bean class="org.springframework.ui.context.support.ResourceBundleThemeSource" id="themeSource"/>
    <beans:bean class="org.springframework.web.servlet.theme.CookieThemeResolver" id="themeResolver" 
                p:cookieName="theme" p:defaultThemeName="default"/>

    <!-- Support for multipart form data as parameters to controllers -->
    <!-- NOTE: the maxUploadSize limit, we must be aware of DB sizes and increase this if necessary -->
    <beans:bean id="multipartResolver" p:maxInMemorySize="5000000"
            class="org.springframework.web.multipart.commons.CommonsMultipartResolver"
            p:maxUploadSize="150000000"/>

    <!-- Resolves views selected for rendering by @Controllers to .jspx resources in the /WEB-INF/views directory -->
    <!-- 
    <beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jspx" />
    </beans:bean>
     -->

    <!-- Tiles Configuration -->
    <beans:bean class="org.springframework.web.servlet.view.UrlBasedViewResolver" id="tilesViewResolver">
        <beans:property name="viewClass" value="org.springframework.web.servlet.view.tiles2.TilesView"/>
    </beans:bean>

    <beans:bean class="org.springframework.web.servlet.view.tiles2.TilesConfigurer" id="tilesConfigurer">
        <beans:property name="definitions"> 
            <beans:list>
                <beans:value>/WEB-INF/layouts/layouts.xml</beans:value> 
                <!-- Scan views directory for Tiles configurations --> 
                <beans:value>/WEB-INF/views/**/views.xml</beans:value>
            </beans:list> 
        </beans:property>
    </beans:bean>

    <context:component-scan base-package="com.kwhours.mango.web.controller" />

    <beans:import resource="classpath:mango-app-context.xml"/>

    <beans:import resource="classpath:mango-app-security.xml"/>

    <context:component-scan base-package="com.kwhours.mango.service.jpa"/>

</beans:beans> 
```

所以我想弄清楚为什么 contextLoaderListener 无法找到指定目录中的这个文件。我是否需要以某种方式使其对其他地方的 contextLoaderListener 可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T22:30:55.977

查看异常堆栈跟踪：

```
Caused by: java.io.FileNotFoundException: Could not open ServletContext resource [/WEB-INF/spring-mango/root-context.xml 
```

您的应用程序正在查找文件 /WEB-INF/spring-mango/root-context.xml，但您的 web.xml 中引用了以下内容：

*   /WEB-INF/spring/root-context.xml
*   /WEB-INF/spring/appServlet/servlet-context.xml

但是您的 context.xml 中有以下内容：

```
<Parameter name="contextConfigLocation" value="/WEB-INF/spring-mango/root-context.xml" override="false"/> 
```

那么您的应用程序要寻找什么？也许您需要删除 context.xml 中的条目。

# ruby - Ruby 条件语句

> ID：14409434
> 
> 赞同：2
> 
> 时间：2013-01-18T23:42:22.517
> 
> 标签：ruby, conditional-statements

如何在 Ruby 的条件语句中表达多个或选项？我认为这样的事情会起作用，但它不会：

```
1 == (3 || 2 || 1)
(1 == (3 || 2 || 1)) 
```

我认为那些会返回true。

我想用一种方式来说明一组事物中是否有任何数量为真，然后返回真。我必须把它拼出来吗？

```
if (1 == 3 || 1 == 2 || 1 == 1) 
```

用英语我会说

> 如果 1 等于 3、2 或 1，则返回 true。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T23:45:41.210

是的，这是一种方法。更多 Rubyesque 将是：

```
if [3, 2, 1].include?(1) 
```

`1 == (3 || 2 || 1)`不起作用的原因是因为`(3 || 2 || 1)`首先评估。如果第`||`一个值为真，则运算符返回第一个值，如果第一个值为假，则返回第二个。

因此`(3 || 2 || 1)`是`3`，所以你在比较`1 == 3`，这显然是`false`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T23:54:11.317

该`include`方法可以满足您的要求。此外，您可以使用`any?`能够很好地表达您想要的方法：

```
[1, 2, 3].any? { |v| 1 == v } 
```

但是为了平等，你可以使用`include`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T23:55:01.733

如果您要测试的值不连续，那么这`Array#include?`是一个不错的选择。

如果测试值是连续的，并且可以表示为[Range](http://www.ruby-doc.org/core-1.9.3/Range.html)，则可以使用：

```
Range#cover?
Range#include?
Range#member? 
```

例如：

```
(1..3).member?(1) # => true 
```

`include?`并且`member?`可能更通用一点，在[Enumerable](http://www.ruby-doc.org/core-1.9.3/Enumerable.html)中定义，因此适用于任何集合对象或从那里派生的类。Enumerable 还定义了`any?`, 用于此问题的另一个答案，加上`none?` 和`one?`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T21:31:35.167

`case when`条件支持多个选项：

```
x = 1
puts case x
  when 1, 2, 3 then "Low"
  when 4, 5, 6 then "High"
  else "Strange dice..."
end
#=>Low 
```

# jquery - 使使用 JavaScript 弹出的 HTML 表单输入提示可访问？

> ID：14409435
> 
> 赞同：1
> 
> 时间：2013-01-18T23:42:25.453
> 
> 标签：jquery, html, accessibility

想象一下，我有一个带有隐藏提示的表单：

```
<form>
    <input type='text' id='name' placeholder='Name'>
    <span id="name_hint" style="display: none;">Please enter your name</span>
</form> 
```

输入值无效时jQuery会弹出提示：

```
$('#name').on('blur', function(){
    if(!this.value.length) {
        $('#name_hint').show();
    }
}); 
```

当该用户离开文本输入而没有输入任何内容时，我如何告诉网络阅读器阅读现在可见提示的提示内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:49:50.367

对于初学者来说，表单元素应该真正具有`<label>`真正可访问性：

```
<form>
 <input type='text' id='name'>
  <label for='name'>Please enter your name</label>
</form> 
```

placeholder 属性[不能很好地替代 label](http://www.paciellogroup.com/blog/2011/02/html5-accessibility-chops-the-placeholder-attribute/)。但是，如果您想使用您的方法，它应该是：

```
<form>
    <input type='text' id='name' placeholder='Name' aria-labelledby="name_hint">
    <span id="name_hint" style="display: none;">Please enter your name</span>
</form> 
```

那么你的 JS 也应该有一个 onFocus 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T23:56:58.143

我认为这个问题更多地属于 ux.stackexchange.com，但对于初学者，我可以推荐：

*   让它们脱颖而出：使用明亮的颜色。此外，当涉及到成功/警告/错误消息时，请坚持使用通常的颜色（请参阅[twitter bootstrap](http://twitter.github.com/bootstrap/components.html#alerts)是如何做到的）。

*   让用户有时间看到它们：使用过渡效果。也许不是超级花哨的东西。用户总是想读一些会在他眼皮底下弹出的东西，但他需要注意它。过渡让用户有时间看到它们。

*   明确它与用户正在操作的内容相关：可能通过一个箭头指示弹出窗口与焦点字段相关。

好像您更关心警告/错误/重要消息，我建议您查看此[线程](https://ux.stackexchange.com/questions/4260/do-users-read-pop-up-messages-notifications-error-messages-etc)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-19T00:23:05.917

`span`有一个`tabindex`可以集中注意力。通过添加`tabindex`提示并在输入值无效时关注它，我们可以强制网络阅读器读取弹出的提示！

```
<form>
    <input type='text' id='name' placeholder='Name'>
    <span id="name_hint" style="display: none;" tabindex="2">Please enter your name</span>
</form>

$('#name').on('blur', function(){
    if(!this.value.length) {
        $('#name_hint').show().get(0).focus();
    }
}); 
```

# c# - 获取通用单元测试的通用测试数据

> ID：14409437
> 
> 赞同：0
> 
> 时间：2013-01-18T23:42:56.707
> 
> 标签：c#, unit-testing, nunit, test-data

**我想重用通用测试，但是如何获取通用测试数据？**

* * *

我编写了自己的`IReadOnlyCollection<T>`接口，并编写了一些使用它的类。

由于该接口的方法和属性（例如`Contains`，`CopyTo`）无论实现它的类如何都应该始终完全相同，因此我想编写可以应用于任何实现的通用测试。使用[这篇文章](https://stackoverflow.com/a/3121883/146622)中建议的方法，我现在有以下内容：

```
// Tests that must work for any type T:
public abstract class IReadOnlyCollectionTests<T>
{
    protected abstract IReadOnlyCollection<T> CreateInstance(params T[] data);

    [Test]
    public void Contains_GivenExistingValue_ReturnsTrue()
    {
        // Given
        T[] data;   // <-- Get some data?
        T value = data[1];
        var sut = CreateInstance(data);

        // When
        bool result = sut.Contains(value);

        // Then
        Assert.IsTrue(result);
    }

    // 40 more such tests...
} 
```

现在我需要一些数据来测试。类型`T`可以是布尔值、字符串或任何值。*我如何获得一些适用于任何类型的通用数据`T`？*

* * *

顺便说一句：我将通过为每个实现派生一个测试类来运行这个通用测试，就像我的`BitArray`实现（布尔集合）一样：

```
[TestFixture]
public class BitArrayROC : IReadOnlyCollectionTests<bool>
{
    protected override IReadOnlyCollection<bool> CreateInstance(params bool[] data)
    {
        return new BitArray(data);
    }
} 
```

与 类似`BitArray`，我有一个`StringCollection`要测试其`IReadOnlyCollection<T>`实现的类（以及其他类）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T23:54:07.460

创建通过参数返回数据的数据提供者，并让参数为您需要的数据类型。您可以设置实现通用测试所需的数据类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T09:21:54.830

`data`您可以创建在`IReadOnlyCollection<T>`类中返回的抽象方法。然后在派生类中，您可以编写特定于类型的实现。

参见示例：

```
public abstract class IReadOnlyCollectionTests<T>
{
    protected abstract IReadOnlyCollection<T> CreateInstance(params T[] data);

    protected abstract T[] GetData();

    [Test]
    public void Contains_GivenExistingValue_ReturnsTrue()
    {
        // Given
        T[] data = GetData();
        T value = data[1];
        var sut = CreateInstance(data);

        ...
    }
}

[TestFixture]
public class BitArrayROC : IReadOnlyCollectionTests<bool>
{
    protected override bool[] GetData()
    {
        return new[] { true, false };
    }

    ...
} 
```

实际上，这个想法与您为创建集合实例实现的想法相同。

# sql - SQL查询不做任何事情

> ID：14409438
> 
> 赞同：1
> 
> 时间：2013-01-18T23:43:08.640
> 
> 标签：sql, exec

我正在尝试从我的 wp_pagesvisites 表中删除一行。

```
global $wpdb;
$time = time();

$timebd = $wpdb->get_col("SELECT Timestamp FROM wp_pagesvisites");

foreach ($timebd as $v)
{
    //echo ($time - $v)."  -  ";

    if ($v - $time > 600)
    {   

        $wpdb->query(   
                $wpdb->exec(
                    "DELETE FROM wp_pagesvisites WHERE Timestamp=$v"
                )
        );
    }
} 
```

它确实进入了我的 if 条件，因为如果我对 $time - $v 进行回显，有些大于 600，所以我认为这是我的 SQL 查询不好。希望你能看到我的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T23:48:23.257

您说“ `$time - $v`，有些大于 600”，但您的 if 条件反之亦然（即`$v - $time`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T23:52:40.557

警告 - 您似乎对 SQL 注入持开放态度，您应该使用参数化查询。此外，您将以最低效的方式进行此操作（通过遍历每一行）。你应该做的是告诉 SQL 删除超过一定年龄的行；这些方面的东西（可能需要调整才能在您的环境/语言中工作）：

```
$time = time() - 600;

$wpdb->query(   
     $wpdb->exec(
          "DELETE FROM wp_pagesvisites WHERE Timestamp < $time"
     )
); 
```

...这应该为您删除所有行。

* * *

除了@mavili 提到的问题之外，您还在考虑日期/时间/时间戳错误。当您想要某个范围内的所有内容时，您正在将所有值与它们自己进行比较。最好将时间戳考虑为双精度数 - 它们不能完全相互比较，只能作为范围的一部分（`>=`,`<`等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T23:54:57.900

你可以这样做 ：

$bdd 你的数据库

$wpdb = $bdd->prepare("DELETE FROM wp_pagesvisites WHERE Timestamp <'$v'"); $wpdb->执行（）；

或者

$req = $bdd->exec("DELETE FROM wp_pagesvisites WHERE Timestamp < '$v' ");

# php - phpMailer 从 Heroku 到 gmail 业务？

> ID：14409441
> 
> 赞同：1
> 
> 时间：2013-01-18T23:43:18.267
> 
> 标签：php, heroku, gmail, phpmailer

我一直在尝试设置 google 企业电子邮件 smtp。我使用自己的电子邮件地址 (username@mydomain.me) 创建了一个帐户。这是由 gmail 托管的。

我在 Heroku 上使用 phpMailer 类。我已经取消了 php.ini 文件中 php_openssl.dll 的注释。

我不断收到此错误：

```
ERROR: Failed to connect to server: php_network_getaddresses: getaddrinfo failed: Name or service not known (0) SMTP Error: Could not connect to SMTP host. 
```

有谁知道这里出了什么问题？

```
 ...
 $mail->Host = "ssl://stmp.gmail.com";
 $mail->SMTPDebug  = 2;  
 $mail->SMTPAuth   = true;
 $mail->Port       = 587;
 $mail->SMTPSecure = 'ssl'; 
 $mail->Username   = "username@myDomain.me";
 $mail->Password   = "mypassword";
 $mail->SetFrom('username@myDomain.me', '...');
 $mail->AddReplyTo("an@email.co", '');
 $mail->Subject = '...';
 ... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T17:11:33.827

弄清楚了！诀窍是“tls”而不是 ssl！

```
 $mail->IsSMTP(); // telling the class to use SMTP
    $mail->Host       = "mail.mydomain.me"; // SMTP server
    $mail->SMTPDebug  = 2;                     // enables SMTP debug information (for testing)
                                               // 1 = errors and messages
                                               // 2 = messages only
    $mail->SMTPAuth   = true;                  // enable SMTP authentication
    $mail->SMTPSecure = "tls";                 // sets the prefix to the servier
    $mail->Host       = "smtp.gmail.com";      // sets GMAIL as the SMTP server
    $mail->Port       = 587;                   // set the SMTP port for the GMAIL server
    $mail->Username   = "name@mydomain.me";  // GMAIL username
    $mail->Password   = "pass";            // GMAIL password 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T23:54:46.627

尝试这个

```
$mail->Host = "smtp.gmail.com"; // sets GMAIL as the SMTP server
$mail->SMTPSecure = "ssl";
$mail->Port = 465; 
```

应该管用

参考：- [1](http://www.web-development-blog.com/archives/send-e-mail-messages-via-smtp-with-phpmailer-and-gmail/) [2](http://phpmailer.worxware.com/index.php?pg=exampleagmail)

# scala - 玩！框架和彗星与 jsonp

> ID：14409443
> 
> 赞同：1
> 
> 时间：2013-01-18T23:43:27.823
> 
> 标签：scala, playframework-2.0, comet

我正在尝试在我的 play 2.0 应用程序中创建一个彗星频道。在本地测试时一切正常，不幸的是，在部署代码并使用它时，我收到以下消息：

[16:03:24.195] 访问属性“cometfunc”的权限被拒绝@ [http://dfc3379b64b6.v2.localtunnel.com/comet](http://dfc3379b64b6.v2.localtunnel.com/comet)

我认为这是由于跨域权限。

这是否可能，如果可以，解决问题的最佳方法是什么。我相信这与
我的控制器中的 val comet = Comet[String](callback = "parent.cometfunc") 有关。我有第二个应用程序，它是我在不同域中运行的其他服务的前端，包括连接到彗星套接字的 javascript。

# bash - 找不到命令：完成

> ID：14409446
> 
> 赞同：16
> 
> 时间：2013-01-18T23:43:34.080
> 
> 标签：bash, autocomplete, terminal, zsh, homebrew

我面前有一个新的mac，我安装了自制软件（很好），哦，我的zsh（很好）。

我正在尝试安装自动跳转，它是一个智能目录数据库。例如，您可以在终端中“跳转”到`~/Documents`with 。`j doc`

我做了这个

`brew install autojump`

我已经有了我认为看起来不错的 .zshrc。我在其中添加了它说的行：

```
[[ -s `brew --prefix`/etc/autojump.sh ]] && . `brew --prefix`/etc/autojump.sh 
```

当我启动 iterm2 时，我收到以下警告：

```
/usr/local/Cellar/autojump/21.3.0/etc/autojump.bash:13: command not found: complete
/usr/local/Cellar/autojump/21.3.0/etc/autojump.bash:55: = not found 
```

我已经使用 brew 安装了其他东西，并且我可以`autojump -s`成功运行，所以我知道它正在看到`$path`. 我不知道还有什么问题，因为这都是全新的安装。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-29T11:15:21.390

在您的 .zshrc 中，您必须**获取 autojump.zsh**而不是**autojump.bash** （我不知道它在 Mac 上的位置，但它与 autojump.bash 位于同一文件夹中）。

在 Ubuntu 上，您需要在 .zshrc 末尾附加以下内容：

```
source /usr/share/autojump/autojump.zsh 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-29T23:08:32.617

要解决此问题，您应该更新该行：

```
[[ -s `brew --prefix`/etc/autojump.sh ]] && . `brew --prefix`/etc/autojump.sh 
```

说：

```
[[ -s `brew --prefix`/etc/autojump.zsh ]] && . `brew --prefix`/etc/autojump.zsh 
```

即使用自动跳转脚本的**.zsh**版本。那为我修好了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T23:51:37.463

[**该文件**](http://github.com/joelthelion/autojump/blob/master/bin/autojump.bash)没有Shebang。这意味着它可能会被 Zsh 解释。

这是一个问题，因为`complete`是[**Bash builtin**](https://stackoverflow.com/a/921219)。

也许[**这**](http://github.com/joelthelion/autojump#additional-configuration)可以为您解决问题，或者也许

```
[[ -s `brew --prefix`/etc/autojump.sh ]] && bash `brew --prefix`/etc/autojump.sh 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-30T02:07:05.977

在我的情况下，注释掉

```
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion 
```

解决了这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-19T12:41:03.910

您需要添加

```
[[ -s `brew --prefix`/etc/autojump.sh ]] && . `brew --prefix`/etc/autojump.sh 
```

到你的`~/.bash_profile`. Homebrew 在您安装时会告诉您这一点，但我第一次没有注意到它，结果来到了这个网页。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-08T22:21:32.207

就我而言，我解决了这个问题，添加：

```
autoload bashcompinit && bashcompinit 
```

在第一个`complete`命令之前。

我用过这个链接：[固定！az.completion:10：找不到命令：完成](https://jessicadeen.com/fixed-az-completion10-command-not-found-complete/)

# java - 我的新手代码没有减去两个变量

> ID：14409453
> 
> 赞同：0
> 
> 时间：2013-01-18T23:44:10.400
> 
> 标签：java

我真笨。

```
import java.util.Scanner;
public class ATM {
public static void main(String[] args) {
Scanner scanner = new Scanner(System.in);
double withdraw = scanner.nextDouble();
double balance = scanner.nextDouble();
int withdraw = 0; int balance;
if (withdraw % 5 == 0 && withdraw<(balance-.5)) {
    balance = balance - (withdraw + .5); 
    System.out.println(balance);
}
 else {
     System.out.println(balance);
 }}} 
```

我正在努力使余额被提款金额减去，同时产生 0.50 美元的费用。不幸的是，它一直只减去 $.50 而不减去提款。提前致谢。

**固定代码**

```
import java.util.Scanner;
public class ATM {
public static void main(String[] args) {
Scanner scanner = new Scanner(System.in);
double withdraw = scanner.nextDouble();
double balance = scanner.nextDouble();
if (withdraw % 5 == 0 && withdraw<(balance-.5)) {
    balance -= (withdraw + .5); 
    System.out.println(balance);
}
 else {
     System.out.println(balance);
 }}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T23:56:43.050

这是算法[https://stackoverflow.com/a/14387552/1083704](https://stackoverflow.com/a/14387552/1083704)

您有同样的问题 - 复杂表达式中的错误，包括使用未知类型。而且你必须做同样的事情来调试你的程序——使用中间变量将 oneliner 简化为多个简单的表达式。然后您可以逐步调试您的代码并观察这些中间值。成为程序员意味着成为黑客，不学习调试就不会成为黑客。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T23:49:07.510

你在哪里设置withdraw变量？我会看那里，听起来您正在将 0.5 添加到尚未分配大于 0 的值的变量中。在更复杂的代码中进行测试的一种真正简单的方法是在代码中设置撤消说在平衡方程中使用它之前的值 5，这样你就可以判断问题是出在你的方程还是出在变量上，虽然方程看起来很可靠。另外，你可以做

```
balance -= (withdraw + .5) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T23:53:03.840

当信息如此之少时，调试代码是相当困难的；但我最好的猜测是一个初始化错误——withdraw*没有*被正确初始化，只是我假设它的默认值，*0*

但可以肯定的是，我们需要在您的打印声明之前知道提款等于什么。您可以在添加余额之前添加打印语句，如下所示：

```
System.out.println(withdraw);
balance -= (withdraw + .5);
System.out.println(balance); 
```

然后在运行时查看*withdraw*是否> 0？如果不; 在计算余额之前检查它是否设置为您的提款值。

更好的是发布您的完整代码片段，所以我猜我们可以看到自己。

注意 a -= b 是 a = a - b 的简写

# python - Python IDLE 多行提示

> ID：14409454
> 
> 赞同：1
> 
> 时间：2013-01-18T23:44:14.563
> 
> 标签：python, python-3.x, python-idle

我在 Python 3.3 中使用 IDLE 命令提示符，当我输入多行命令时，我看到的是一个空行，而不是包含三个点的多行提示符。我知道这是一件小事，但是有人知道如何启用多行提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T00:51:48.457

下载梦派。它将提示分为两部分，一个工作区和一个结果区。

除此之外，它与 IDLE 非常相似。

[http://www.dreampie.org/download.html](http://www.dreampie.org/download.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T03:28:42.367

正如其他人所指出的，IDLE 不会显示您正在寻找的三个点；但是，如果你必须拥有它们，你总是可以通过在终端中输入“python”并按 ENTER 从终端运行 python。要从终端退出 python，您可以键入“exit()”或“quit()”，然后按 Enter。

# php - Komodo IDE Xdebug 远程调试 URI 映射不起作用

> ID：14409460
> 
> 赞同：1
> 
> 时间：2013-01-18T23:44:52.457
> 
> 标签：php, macos, xdebug, remote-debugging, komodo

我使用 Xdebug 进行远程调试，当我使用 MacGDBp 作为调试工具时，它可以正常工作（我猜）。我已经连接了 Komodo 5 来监听端口 9000，当我远程启动 Xdebug 会话时，Komodo 会弹出一个用于 URI 映射的对话框。

给定的 URI 是`file://IP.of.host.machine/path/to/my/project` 空字段要求“映射到：”，我试图指向本地目录。我单击“本地”按钮，并将其放入 /Users/myname/Documents/xdebug

但是，当我按 Enter 键时，“映射到：”字段被清空，我面临着 URI 映射对话框的连续循环。

可能是什么问题？我已经更改了本地“映射到：”目录的权限`chmod -R 777 /xdebug`

我不确定还有什么问题。

我可以做些什么来获取本地地图以在 Komodo 5 中进行调试，和/或能够单步执行并观察变量值的另一种解决方案是什么？

# java-me - 如何通过网页中的链接启动已安装的 s40 应用程序？

> ID：14409463
> 
> 赞同：0
> 
> 时间：2013-01-18T23:45:03.223
> 
> 标签：java-me, nokia-s40

我们在 s40 设备中安装了自己的应用程序。我们可以通过网页或网络应用程序中的 url 或命令调用它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:37:33.827

是的，你可以这么做。它被称为OTA。启动你的模拟器，进入浏览器，输入链接。安装过程自动开始。

请记住，该链接应指向位于服务器中的 jad 或 jar 文件。

# msbuild - 返回 MSB3481 的 MSBuild SignFile 任务：找不到签名证书

> ID：14409465
> 
> 赞同：5
> 
> 时间：2013-01-18T23:45:07.200
> 
> 标签：msbuild, code-signing, signtool

我最近获得了一个新的代码签名证书。我正在使用 MSBuild 的 SignFile 任务对应用程序清单进行签名。由于某种原因，任务正在返回：

```
MSB3481: The signing certificate could not be located.
Ensure that it is in the current user's personal store. 
```

证书肯定在我的个人存储中，我可以在 certmgr.msc 中看到它。而且我相信我以同一用户身份登录，因为我能够使用同一个人商店中的不同证书签署清单。不知道为什么找不到这个新证书。

我什至可以使用带有新证书的 SHA1 的 signtool.exe 来对文件进行签名。但我真的更喜欢将我们现有的 MSBuild 与 SignFile 任务一起使用。任何想法这里可能出了什么问题？

我也尝试过在有和没有完整证书路径的情况下导入证书。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-25T05:42:17.090

我不确定这是否有帮助，但我记得如果您从管理单元字段复制指纹，第一个位置有一个“不可见”符号。因此，无法在您的商店中找到该不可打印的指纹。尝试从证书指纹（包括引号）的开头删除 3-5 个符号并手动键入它们。

还要考虑指纹应该全部大写（尽管该属性以小写显示）。

# c - 简单的哈希函数

> ID：14409466
> 
> 赞同：43
> 
> 时间：2013-01-18T23:45:13.160
> 
> 标签：c, function, hashtable, string-hashing

我正在尝试编写一个使用哈希表来存储不同单词的**C**程序，我可以使用一些帮助。

首先，我创建一个质数大小的哈希表，它与我必须存储的单词数最接近，然后我使用哈希函数为每个单词找到一个地址。我从最简单的函数开始，将字母加在一起，最终导致 88% 的冲突。然后我开始试验这个函数，发现无论我把它改成什么，碰撞都不会低于 35%。现在我正在使用

```
unsigned int stringToHash(char *word, unsigned int hashTableSize){
  unsigned int counter, hashAddress =0;
  for (counter =0; word[counter]!='\0'; counter++){
    hashAddress = hashAddress*word[counter] + word[counter] + counter;
  }
  return (hashAddress%hashTableSize);
} 
```

这只是我想出的一个随机函数，但它给了我最好的结果——大约 35% 的碰撞。

过去几个小时我一直在阅读有关哈希函数的文章，我尝试使用一些简单的，例如 djb2，但所有这些都给了我更糟糕的结果。（djb2 导致 37% 的冲突，即'差很多，但我期待更好而不是更糟）我也不知道如何使用其他一些更复杂的，比如 murmur2，因为我不知道参数是什么（key，len , 种子) 他们接受的是。

即使使用 djb2，发生超过 35% 的冲突是否正常，还是我做错了什么？什么是 key、len 和 seed 值？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-01-19T00:48:35.287

试试 sdbm：

```
hashAddress = 0;
for (counter = 0; word[counter]!='\0'; counter++){
    hashAddress = word[counter] + (hashAddress << 6) + (hashAddress << 16) - hashAddress;
} 
```

或 djb2：

```
hashAddress = 5381;
for (counter = 0; word[counter]!='\0'; counter++){
    hashAddress = ((hashAddress << 5) + hashAddress) + word[counter];
} 
```

或 Adler32：

```
uint32_t adler32(const void *buf, size_t buflength) {
     const uint8_t *buffer = (const uint8_t*)buf;

     uint32_t s1 = 1;
     uint32_t s2 = 0;

     for (size_t n = 0; n < buflength; n++) {
        s1 = (s1 + buffer[n]) % 65521;
        s2 = (s2 + s1) % 65521;
     }     
     return (s2 << 16) | s1;
}

// ...

hashAddress = adler32(word, strlen(word)); 
```

不过，这些都不是很好。如果你真的想要好的散列，你需要更复杂的东西，比如[lookup3](http://burtleburtle.net/bob/c/lookup3.c)。

请注意，一旦哈希表被填充*超过 70-80%* ，它就会发生大量冲突。这是完全正常的，如果您使用非常好的哈希算法，甚至会发生这种情况。这就是为什么大多数哈希表实现会在您向哈希表添加内容时立即增加哈希表的容量（例如`capacity * 1.5`，甚至`capacity * 2`）和比率`size / capacity`已经高于 0.7 到 0.8。增加容量意味着创建一个具有更高容量的新哈希表，将当前哈希表中的所有值添加到新哈希表中（因此它们必须全部重新哈希，因为它们的新索引在大多数情况下会有所不同），新的 hastable 数组替换旧的，旧的被释放/释放。如果您计划散列 1000 个单词，最不推荐的散列表容量为 1250，最好是 1400 甚至 1500。

哈希表不应该被“填满”，至少如果它们应该快速高效（因此它们总是应该有备用容量）。`O(1)`这是哈希表的缩小尺寸，它们速度很快（1000 字；缩小尺寸是查找不能比`O(log n)`这种情况更快）。在大多数情况下，任何一种方式都无法实现无冲突哈希表。几乎所有的哈希表实现都期望发生冲突，并且通常有某种方式来处理它们（通常冲突会使查找速度变慢，但哈希表仍然可以工作并且在许多情况下仍然优于其他数据结构）。

另请注意，如果您使用的是非常好的哈希函数，那么如果哈希表的容量为 2 的幂，`%`并且最后使用模 ( ) 裁剪哈希值，则没有要求，甚至没有优势。许多哈希表实现总是使用 2 的幂的原因是因为**它们不使用模数**，而是使用 AND ( `&`) 进行裁剪，因为 AND 操作是大多数 CPU 上最快的操作之一（模永远不会比 AND ，在最好的情况下它会同样快，在大多数情况下它会慢很多）。如果您的哈希表使用 2 个大小的幂，您可以使用 AND 操作替换任何模块：

```
x % 4  == x & 3
x % 8  == x & 7
x % 16 == x & 15
x % 32 == x & 31
... 
```

不过，这仅适用于 2 大小的幂。如果您使用模数，则 2 大小的幂只能买一些东西，如果哈希是非常糟糕的哈希，并且“位分布”非常糟糕。错误的位分布通常是由不使用任何类型的位移（`>>`或`<<`）或任何其他与位移具有类似效果的操作的散列引起的。

我为您创建了一个精简的 lookup3 实现：

```
#include <stdint.h>
#include <stdlib.h>

#define rot(x,k) (((x)<<(k)) | ((x)>>(32-(k))))

#define mix(a,b,c) \
{ \
  a -= c;  a ^= rot(c, 4);  c += b; \
  b -= a;  b ^= rot(a, 6);  a += c; \
  c -= b;  c ^= rot(b, 8);  b += a; \
  a -= c;  a ^= rot(c,16);  c += b; \
  b -= a;  b ^= rot(a,19);  a += c; \
  c -= b;  c ^= rot(b, 4);  b += a; \
}

#define final(a,b,c) \
{ \
  c ^= b; c -= rot(b,14); \
  a ^= c; a -= rot(c,11); \
  b ^= a; b -= rot(a,25); \
  c ^= b; c -= rot(b,16); \
  a ^= c; a -= rot(c,4);  \
  b ^= a; b -= rot(a,14); \
  c ^= b; c -= rot(b,24); \
}

uint32_t lookup3 (
  const void *key,
  size_t      length,
  uint32_t    initval
) {
  uint32_t  a,b,c;
  const uint8_t  *k;
  const uint32_t *data32Bit;

  data32Bit = key;
  a = b = c = 0xdeadbeef + (((uint32_t)length)<<2) + initval;

  while (length > 12) {
    a += *(data32Bit++);
    b += *(data32Bit++);
    c += *(data32Bit++);
    mix(a,b,c);
    length -= 12;
  }

  k = (const uint8_t *)data32Bit;
  switch (length) {
    case 12: c += ((uint32_t)k[11])<<24;
    case 11: c += ((uint32_t)k[10])<<16;
    case 10: c += ((uint32_t)k[9])<<8;
    case 9 : c += k[8];
    case 8 : b += ((uint32_t)k[7])<<24;
    case 7 : b += ((uint32_t)k[6])<<16;
    case 6 : b += ((uint32_t)k[5])<<8;
    case 5 : b += k[4];
    case 4 : a += ((uint32_t)k[3])<<24;
    case 3 : a += ((uint32_t)k[2])<<16;
    case 2 : a += ((uint32_t)k[1])<<8;
    case 1 : a += k[0];
             break;
    case 0 : return c;
  }
  final(a,b,c);
  return c;
} 
```

这段代码没有像原始代码那样高度优化性能，因此它要简单得多。它也不像原始代码那样可移植，但它可以移植到当今使用的所有主要消费者平台。它也完全忽略了 CPU 字节序，但这并不是真正的问题，它适用于大小字节序的 CPU。请记住，它不会为大小端 CPU 上的相同数据计算相同的哈希值，但这不是必需的；它将在两种 CPU 上计算出良好的哈希值，唯一重要的是它始终为单台机器上的相同输入数据计算相同的哈希值。

您将按如下方式使用此功能：

```
unsigned int stringToHash(char *word, unsigned int hashTableSize){
  unsigned int initval;
  unsigned int hashAddress;

  initval = 12345;
  hashAddress = lookup3(word, strlen(word), initval);
  return (hashAddress%hashTableSize);
  // If hashtable is guaranteed to always have a size that is a power of 2,
  // replace the line above with the following more effective line:
  //     return (hashAddress & (hashTableSize - 1));
} 
```

你很想知道`initval`是什么。好吧，这就是你想要的。你可以称之为盐。它会影响散列值，但散列值不会因此而在质量上变得更好或更差（至少在平均情况下不会，但是对于非常特定的数据，它可能会导致或多或少的冲突）。例如，`initval`如果你想对相同的数据进行两次哈希处理，你可以使用不同的值，但每次都应该产生不同的哈希值（不能保证它会，但如果`initval`不同的话，很有可能；如果它创建相同的值，这将是一个非常不幸的巧合，您必须将其视为一种碰撞）。不建议使用不同的`initval`为同一个哈希表散列数据时的值（这会导致更多的平均冲突）。initval 的另一个用途是，如果您想将散列与其他一些数据结合起来，在这种情况下，已经存在的散列`initval`在散列其他数据时会变成（因此，其他数据以及先前的散列都会影响散列函数的结果）。您甚至可以设置`initval`为`0`是否喜欢或在创建哈希表时选择一个随机值（并且始终将此随机值用于此哈希表实例，但每个哈希表都有自己的随机值）。

碰撞注意事项：

在实践中，碰撞通常不是一个大问题，为了避免它们而浪费大量内存通常是没有回报的。问题是您将如何以有效的方式处理它们。

您说您目前正在处理 9000 个单词。如果您使用的是未排序的数组，则在数组中查找一个单词平均需要 4500 次比较。在我的系统上，4500 个字符串比较（假设单词长度在 3 到 20 个字符之间）需要 38 微秒（0.000038 秒）。因此，即使是这样一个简单、无效的算法，对于大多数用途来说也足够快。假设您正在对单词列表进行排序并使用二进制搜索，则在数组中查找单词平均只需要 13 次比较。13 次比较在时间上几乎为零，甚至无法可靠地进行基准测试。因此，如果在哈希表中查找一个单词需要 2 到 4 次比较，我什至不会浪费一秒钟的时间来回答这是否可能是一个巨大的性能问题。

在您的情况下，具有二进制搜索的排序列表甚至可能远远超过哈希表。当然，13 次比较比 2-4 次比较需要更多时间，但是，对于哈希表，您必须首先对输入数据进行哈希处理才能执行查找。单独散列可能已经花费了超过 13 次比较！哈希值*越好*，对相同数量的数据进行哈希处理所需的*时间就越长。*因此，只有在您拥有大量数据或必须频繁更新数据（例如，不断向表中添加/删除单词，因为这些操作对于哈希表而言，这些操作的成本比它们低用于排序列表）。哈希表`O(1)`只是意味着无论它有多大，查找都会大约。总是需要相同的时间。`O(log n)`仅表示查找与单词数成对数增长，这意味着更多的单词，更慢的查找。然而，Big-O 符号并没有说明绝对速度！这是一个很大的误解。并不是说`O(1)`算法总是比一个算法执行得快`O(log n)`。Big-O 表示法仅告诉您，如果`O(log n)`算法对一定数量的值更快，并且您不断增加值的数量，则该`O(1)`算法肯定会`O(log n)`在某个时间点超过该算法，但您当前的字数可能会远低于该点。如果不对这两种方法进行基准测试，您无法仅通过查看 Big-O 表示法来判断哪种方法更快。

回到碰撞。遇到碰撞怎么办？如果冲突的数量很小，这里我不是指冲突的总数（哈希表中发生冲突的单词数），而是每个索引一个（存储在同一哈希表索引中的单词数，所以在您的情况下可能是 2-4），最简单的方法是将它们存储为链表。如果到目前为止此表索引没有冲突，则只有一个键/值对。如果发生冲突，则有一个键/值对的链表。在这种情况下，您的代码必须遍历链表并验证每个键，如果匹配则返回值。根据你的数字，这个链接列表不会有超过 4 个条目，并且进行 4 次比较在性能方面是微不足道的。所以找到索引是`O(1)`，查找值（或检测到该键不在表中）是`O(n)`，但这里`n`只是链表条目的数量（因此最多为4）。

如果冲突次数增加，链表可能会变慢，您还可以存储一个动态大小、排序的键/值对数组，它允许`O(log n)`再次查找，`n`只是该数组中键的数量，而不是 hastable 中所有键的数量。即使一个索引有 100 次冲突，找到正确的键/值对也最多需要 7 次比较。这仍然几乎没有。尽管事实上，如果您在一个索引上确实有 100 次冲突，那么您的哈希算法不适合您的关键数据，或者哈希表的容量太小。动态大小的排序数组的缺点是添加/删除键比链表的情况要多一些工作（代码方面，不一定是性能方面）。因此，如果您将冲突的数量保持在足够低的水平，那么使用链表通常就足够了，并且在 C 中自己实现这样的链表并将其添加到现有的哈希表实现中几乎是微不足道的。

我似乎使用过的大多数哈希表实现都使用这种“回退到备用数据结构”来处理冲突。缺点是这些需要一点额外的内存来存储替代数据结构和更多的代码来搜索该结构中的键。还有一些解决方案可以将冲突存储在哈希表本身内，并且不需要任何额外的内存。然而，这些解决方案有几个缺点。第一个缺点是随着更多数据的添加，每次碰撞都会增加更多碰撞的机会。第二个缺点是，虽然到目前为止，键的查找时间随着碰撞次数线性减少（正如我之前所说，随着数据的添加，每次碰撞都会导致更多的碰撞），不在哈希表中的键的查找时间会减少得更糟，最后，如果您对不在哈希表中的键执行查找（但不执行查找就无法知道），查找时间可能与线性时间一样长搜索整个哈希表（YUCK !!!）。因此，如果您可以节省额外的内存，请使用替代结构来处理冲突。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T23:02:46.050

> 首先，我创建一个质数大小的哈希表，它与我必须存储的单词数接近，然后我使用哈希函数为每个单词找到一个地址。

...

> 返回 (hashAddress%hashTableSize);

由于不同哈希的数量与单词的数量相当，因此您不能指望碰撞会低得多。

我用随机散列（这是你能做到的最好的）做了一个简单的统计测试，发现如果你有 #words == #different 散列，26% 是限制冲突率。

# c# - 未向任何事件处理程序注册的 DropDownList 正在触发不同的下拉列表的 selectedindexchanged 处理程序

> ID：14409469
> 
> 赞同：0
> 
> 时间：2013-01-18T23:45:33.143
> 
> 标签：c#, asp.net

我不确定为什么会发生这种情况，但我在事件处理程序中有一个断点，它只注册到下拉列表 A 并且每次下拉列表 B 更改其选定的索引并导致回发时，断点被激活。

下拉列表 B 不应注册任何事件处理程序。

另一个奇怪的是，我创建了一个新的网络表单，并将两个下拉列表的相关代码复制到新表单中，一切正常。

下拉列表 B 触发下拉列表 A 的处理程序的原因可能是什么？

编辑：我会在后面发布代码，但它相当冗长，即使只是在相关部分。

我确实对短语 selectedIndex 进行了搜索，但我只在一个使用正确下拉列表注册它的地方找到了它。所有这些都是以编程方式完成的，因此标记不会有太大帮助。

编辑2：

```
 DropDownList ddlname1 = new DropDownList();

                ddlname1.AutoPostBack = true;

                ddlname1.EnableViewState = true;

                ddlname1.ID = "ddlname1" + dex.ToString();
ddlname1.DataSource = nameODS1;

                ddlname1.DataValueField = "Card";

                ddlname1.DataBind(); 
```

这些是唯一提到 ddlname1（或上述讨论中的下拉列表 B）的行。

编辑3：

```
DropDownList ddlset1 = new DropDownList();
ddlset1.ID = "ddlset1" + dex.ToString();

                ddlset1.SelectedIndexChanged += new EventHandler(ddlset_SelectedIndexChanged);

                ddlset1.AutoPostBack = true;

                ddlset1.EnableViewState = true;
ddlset1.DataSource = setODS1;

                ddlset1.DataValueField = "Set";

                ddlset1.DataBind(); 
```

根据要求，这是与其他下拉列表相关的代码

编辑4：我刚刚注意到其他可能相关的东西。两个下拉列表都在同一个更新面板中。但是，在我为测试创建的测试表单中也是如此，并且在那里一切正常。

# xcode - 附件未通过 ipad 的电子邮件发送

> ID：14409472
> 
> 赞同：1
> 
> 时间：2013-01-18T23:46:00.430
> 
> 标签：xcode, ipad, ios6

我有一台 iPad，它具有创建 pdf 并作为电子邮件附件发送的例程。这一切似乎都与电子邮件编辑器打开显示附加的 pdf 文档一起工作。但是，在 iPad 上进行测试时，收到电子邮件时没有附件。有任何想法吗？

```
 [mailComposer addAttachmentData:data mimeType:@"application/pdf" fileName:@"pdffile.pdf"];
    [self presentViewController:mailComposer animated:YES completion:nil]; 
```

非常感谢

细节：

pdf 文件被创建并称为 pdffile.pdf。以下是完整的电子邮件例程：

```
 MFMailComposeViewController *mailComposer;
    mailComposer  = [[MFMailComposeViewController alloc] init];
    mailComposer.mailComposeDelegate = self;
    [mailComposer setModalPresentationStyle:UIModalPresentationFormSheet];
    [mailComposer setSubject:[NSString stringWithFormat: @"i-observe Lesson Observation for: %s", "date"]];
    [mailComposer setMessageBody:[NSString stringWithFormat: @"i-observe Lesson Observation for: %s", "name"] isHTML:NO];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *file = [documentsDirectory stringByAppendingFormat:@"pdffile.pdf"];
    NSMutableData *data=[NSMutableData dataWithContentsOfFile:file];
    [mailComposer addAttachmentData:data mimeType:@"application/pdf" fileName:@"pdffile.pdf"];
    [self presentViewController:mailComposer animated:YES completion:nil]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T01:23:41.530

试试这个方法：

```
 if([MFMailComposeViewController canSendMail]){      

        MFMailComposeViewController *mail=[[MFMailComposeViewController alloc]init];
        mail.mailComposeDelegate=self;
        [mail setSubject:@"Email with attached pdf"];   
        NSString *newFilePath = @"get path where the pdf reside";

        NSData * pdfData = [NSData dataWithContentsOfFile:newFilePath];
    [mail addAttachmentData:pdfData mimeType:@"application/pdf" fileName:@"yourpdfname.pdf"];
        NSString * body = @"";
        [mail setMessageBody:body isHTML:NO];
        [self presentModalViewController:mail animated:YES];
        [mail release];         
    }
    else
    {
        NSLog(@"Message cannot be sent");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T14:31:58.367

下一个解决方案基于假设 pdf 文件位于您的主包中：

```
 NSBundle *mainBundle = [NSBundle mainBundle];
        NSString *myFile = [mainBundle pathForResource: @"RealNameofFile" ofType: @"pdf"];
        NSData *pdfD = [NSData dataWithContentsOfFile:myFile];
        [mailViewController addAttachmentData:pdfData mimeType:@"application/pdf" fileName:@"Nametodisplayattached.pdf"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-09T23:58:07.607

确保文件与表格单元格同名

# jquery - 除非我在 Firefox 中移动光标，否则 jQuery 动画会冻结

> ID：14409479
> 
> 赞同：0
> 
> 时间：2013-01-18T23:47:01.407
> 
> 标签：jquery, firefox, jquery-animate

我对 jQuery 很陌生。我有一个绝对定位的 div，我想在屏幕上移动。这是我拥有的代码：

```
$(document).ready(function() {
    $("#cloud_white").animate({
    top: "100px",
    right: "-500px"
    },0).animate({
    marginRight: "2000px"
    },8000);
}); 
```

除非我在浏览器中移动鼠标光标，否则 div 不会移动。见这里： [http ://www.vardagbok.com/test.asp](http://www.vardagbok.com/test.asp)

# python - 在 Python 中逐行写入管道的正确方法

> ID：14409483
> 
> 赞同：4
> 
> 时间：2013-01-18T23:47:19.787
> 
> 标签：python, shell, unix, subprocess, pipe

如何从 Python 写入标准输出并同时（通过 Unix 管道）将其提供给另一个程序？例如，如果您有

```
# write file line by line
with open("myfile") as f:
  for line in f:
    print line.strip() 
```

但是您希望它逐行转到另一个程序，例如`| wc -l`，以便它输出`myfile`. 怎么可能呢？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T23:53:14.467

如果您想通过管道`python`连接到`wc`外部，这很容易，并且可以正常工作：

```
python myscript.py | wc -l 
```

如果你想 tee 让它的输出被打印并被传送到`wc`，尝试`man tee`或者更好的是，你的 shell 内置的花哨的重定向功能。

如果您希望`wc -l`从脚本中运行，并将输出发送到 stdout 和它，您也可以这样做。

首先，使用[`subprocess.Popen`](http://docs.python.org/2/library/subprocess.html#popen-constructor)启动`wc -l`：

```
wc = subprocess.Popen(['wc', '-l'], stdin=subprocess.PIPE) 
```

现在，您可以这样做：

```
# write file line by line
with open("myfile") as f:
  for line in f:
    stripped = line.strip()
    wc.stdin.write(stripped + '\n') 
```

这将使`wc`' 的输出与您的脚本的输出相同。如果这不是您想要的，您也可以将其`stdout`设为 PIPE。在这种情况下，您希望使用[`communicate`](http://docs.python.org/2/library/subprocess.html#subprocess.Popen.communicate)而不是尝试手动获取所有繁琐的细节。

# internet-explorer - KnockoutJS IE 问题

> ID：14409484
> 
> 赞同：0
> 
> 时间：2013-01-18T23:47:32.563
> 
> 标签：internet-explorer, knockout.js

有人可以帮我吗？

基本上我有一个带有子项目的项目列表。选中项目（复选框）时，我将有一个绑定者，可以自动检查匹配的项目并勾选复选框。

这适用于 Chrome、FF 和 IE > 9，但不适用于 IE 7 或 8。选中复选框时，它保持未选中状态，且绑定处理程序自动选中的复选框无法取消选中。

我的第二个问题是如何将 isDirty 标志设置为子项，因为子项（例如：我的数据示例中的**行**）项映射到表单。这可能吗？

抱歉，想在 jsfiddle.net 中发布代码但无法正常工作:(

另外，有没有更好的方法来做我想要实现的目标？

提前谢谢了。

**更新**

我已经设法将代码放在 jsfiddle [http://jsfiddle.net/huzzi786/ugcJU/](http://jsfiddle.net/huzzi786/ugcJU/)

**我要做的就是在选中复选框时（仅选中）根据某些条件查找匹配的项目并将它们标记为选中，然后在与 IE 7 一起使用的表单上显示子项目。获得 isDirty 将是额外的奖励在子项目上工作的标志。**

**HTML**

```
<table>
    <tr>
        <td valign="top">
            <table>
                <thead>
                    <tr>
                        <td></td>
                        <td>Id</td>
                        <td>Name</td>
                    </tr>
                </thead>
                <tbody data-bind="foreach: users">
                    <tr data-bind="attr: { id: ('user-' + id()) }">
                        <td>
                            <input type="checkbox" data-bind="attr: { value: id(), id: id() }, checked: isSelected, SelectRelatedUsers: Name, event:{'change' : $parent.selectUser }" /></td>
                        <td class="quiet"><span data-bind="text: id"></span></td>
                        <td class="quiet">
                            <a href="#" class="tag-ts" data-bind="text: Name, click: $parent.selectUser"></a>
                        </td>

                    </tr>
                </tbody>
            </table>
        </td>
        <td valign="top">

            <table data-bind="with: selectedUser, visible: selectedUser() !=null" style="border: 1px solid #ccc">

                <thead>
                    <th>Day</th>
                    <th>isDirty</th>

                </thead>

                <tbody data-bind="foreach: Lines">

                    <tr>
                        <td>Mon</td>
                        <td>
                            <input class="input-small" type="text" data-bind="value: Mon" />
                        </td>
                  <!--       <td data-bind="text: dirtyFlag.isDirty() ? 'Yes' : 'No'"> -->
                    </tr>
                    <tr>
                        <td>Tue</td>
                        <td>
                            <input class="input-small" type="text" data-bind="value: Tue" />
                        </td>
                         <!--  <td data-bind="text: dirtyFlag.isDirty() ? 'Yes' : 'No'"> -->
                        <tr>
                            <td>Wed</td>
                            <td>
                                <input class="input-small" type="text" data-bind="value: Wed" />
                            </td>
                             <!--  <td data-bind="text: dirtyFlag.isDirty() ? 'Yes' : 'No'"> -->
                            <tr>
                                <td>Thu</td>
                                <td>
                                    <input class="input-small" type="text" data-bind="value: Thu" />
                                </td>
                           <!--     <td data-bind="text: dirtyFlag.isDirty() ? 'Yes' : 'No'"> -->
                                <tr>
                                    <td>Fri</td>
                                    <td>
                                        <input class="input-small" type="text" data-bind="value: Fri" />
                                    </td>
                                  <!--    <td data-bind="text: dirtyFlag.isDirty() ? 'Yes' : 'No'"> -->
                                </tr>
                    <tr>
                        <td colspan="3">
                            <button type="button" data-bind="click: saveData">
                                Save
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
    </tr>

</table> 
```

**淘汰赛JS**

```
 ko.dirtyFlag = function (root, isInitiallyDirty) {
        var result = function () { }
        var _initialState = ko.observable(ko.toJSON(root));
        var _isInitiallyDirty = ko.observable(isInitiallyDirty);

        result.isDirty = ko.dependentObservable(function () {
            return _isInitiallyDirty() || _initialState() !== ko.toJSON(root);
        });

        result.reset = function () {
            _initialState(ko.toJSON(root));
            _isInitiallyDirty(false);
        };

        return result;
    };

    var userMapping = {
        users: {
            key: function (item) {
                return ko.utils.unwrapObservable(item.Id);
            },
            create: function (options) {
                return createUser(options.data);
            }
        }
    };

    var createUser = function (user) {
        var result = ko.mapping.fromJS(user);
        result.dirtyFlag = ko.dirtyFlag(result);
        return result;
    };

        ViewModel = function (serverData) {
            users = ko.observableArray();
            selectedUser = ko.observable();
            selectedLines = ko.observable();
            users(serverData.users());

            ko.bindingHandlers.SelectRelatedUsers = {
                init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
                },
                update: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {

                    var u = (bindingContext.$parent.users);
                    // console.log(u.length)
                    if ($(element).is(':checked')) {
                        for (var i = 0; i < u().length; i++) {
                            if ((viewModel.group() == u()[i].group()) && (viewModel.status() == u()[i].status()) && (viewModel.accesslevel() == u()[i].accesslevel())) {
                                u()[i].isSelected(true);

                            } else {
                                u()[i].isSelected(false);

                            }
                        };
                    }
                }
            };

            selectUser = function () {
                selectedUser(this);
                selectedLines(this.Lines);
                console.log(selectedLines)
            };

            saveData = function () {
                alert('Saving data...')
                $.ajax({
                    type: "POST",
                    url: "/server/save",
                    data: ko.toJSON(selectedLines()),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data) {
                        $('div-result').show();
                    }
                });

            };

            return {
                users: users,
                saveData: saveData,
                selectUser: selectUser

            }

        };

        var getdata = ko.mapping.fromJSON('{"users":[{"id":1,"Name":"Ali","group":2,"status":false,"accesslevel":1,"isSelected":false,"Lines":[{"lineid":3,"Mon":1,"Tue":8,"Wed":3,"Thu":4,"Fri":5}]},{"id":2,"Name":"Patel","group":2,"status":false,"accesslevel":1,"isSelected":false,"Lines":[{"lineid":2,"Mon":4,"Tue":2,"Wed":4,"Thu":4,"Fri":5}]},{"id":3,"Name":"Peter","group":2,"status":false,"accesslevel":2,"isSelected":false,"Lines":[{"lineid":3,"Mon":1,"Tue":11,"Wed":3,"Thu":1,"Fri":5}]},{"id":4,"Name":"Martin","group":2,"status":false,"accesslevel":2,"isSelected":false,"Lines":[{"lineid":4,"Mon":11,"Tue":2,"Wed":13,"Thu":4,"Fri":5}]},{"id":5,"Name":"Terry","group":2,"status":false,"accesslevel":2,"isSelected":false,"Lines":[{"lineid":5,"Mon":1,"Tue":2,"Wed":3,"Thu":4,"Fri":5}]}]}', userMapping, {});

        ko.applyBindings(ViewModel(getdata)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T03:59:06.233

看起来它在某种程度上与在 IE 中触发事件的顺序有关。

您可以通过从您的函数返回 true 来克服这个问题`selectUser`，这允许执行默认操作。

因此，您可能希望将其更改为：

```
 selectUser = function () {
            selectedUser(this);
            selectedLines(this.Lines);
            return true;
        }; 
```

# mysql - 正则表达式复制粘贴行并在每个末尾添加带有增量的数字

> ID：14409487
> 
> 赞同：0
> 
> 时间：2013-01-18T23:47:36.323
> 
> 标签：mysql, regex, notepad++

我需要创建 Mysql 查询的音调，例如

```
delete * from `post` WHERE  `postid` =5380; 
```

最后一个是`282164`

我将使用正则表达式`notepad++`来解决它。

我需要帮助来创建将复制第一行的正则表达式

```
delete * from `post` WHERE  `postid` =5380; 
```

并将其以增量 +1 粘贴到数字`5380`，直到达到`282164`

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T23:51:39.730

为什么不：

```
DELETE FROM post WHERE postid BETWEEN 5380 AND 282164 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T23:49:45.283

您最好使用 Excel 或在 MySQL 中生成动态查询。

例如，在 Excel 中，您可以输入以下内容：

A1: =CONCATENATE("从帖子中删除 * postid=", B1)

B1：5380

然后重复直到 282164

...或者eggyal说的:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T23:52:10.250

单个查询呢：

```
DELETE * FROM post WHERE postid BETWEEN 5380 AND 282164 
```

# iphone - 手势识别器可以控制 iOS 显示亮度吗？

> ID：14409488
> 
> 赞同：0
> 
> 时间：2013-01-18T23:47:40.407
> 
> 标签：iphone, objective-c, uigesturerecognizer, brightness, uiscreen

我想让用户使用手势识别器上下滑动来控制 iOS 应用程序的亮度。手势甚至可以控制亮度吗？我在使用滑块和 UIScreen 的亮度属性之前已经完成了...

```
[UIScreen mainScreen].brightness = 0.5; 
```

我希望能够像使用滑块（如 iBooks 应用程序）一样控制亮度，但使用手势识别器代替滑块。这个想法是，只要识别到触摸并且手指向上或向下移动，手势就会不断改变亮度值。我不确定是否应该使用平移手势并将方向以某种方式限制为向上或向下，或者使用滑动手势（但显然检测到一次滑动并且不会持续更新值）。

也许将手指在屏幕上向上移动指定的量会使亮度值的范围增加 0.0 - 1.0。我不知道如何处理它，所以我只是大声思考。

有任何想法吗？非常感谢。

**编辑：**好的，所以我在另一个类似的问题上找到了这段代码

```
- (void)pan:(UIPanGestureRecognizer *)recognizer
{
    if ((recognizer.state == UIGestureRecognizerStateChanged) ||
        (recognizer.state == UIGestureRecognizerStateEnded))
    {
        CGPoint velocity = [recognizer velocityInView:self.view];

        if (velocity.y >0)   // panning down
        {
            self.brightness = self.brightness -.02;
                 NSLog (@"Decreasing brigntness in pan");
        }
        else                // panning up
        {
            self.brightness = self.brightness +.02;
              NSLog (@"Increasing brigntness in pan");
        }
    }
} 
```

似乎每次向上或向下手势时至少打印一个 NSLog，我想我现在只想知道是否有一种方法可以使用**NSLog 来找出当前的亮度值**，而不是仅仅告诉你它是否检测到手势（除非我很愚蠢并且我正在使用的 NSLog 已经告诉我了？）。谢谢，知道这将非常有用，因为我无法在设备上运行。:-D

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-25T13:08:39.090

**增加和减少屏幕的亮度**

**对于斯威夫特**

**1）如何在视图中添加 PanGesture**

```
let panGesture = UIPanGestureRecognizer.init(target: self, action: #selector(pan(recognizer:)))
panGesture.delegate = self
panGesture.minimumNumberOfTouches = 1
mp.view.addGestureRecognizer(panGesture) 
```

**2) 使用 PanGesture 增加和减少屏幕亮度的代码**

```
func pan(recognizer:UIPanGestureRecognizer){
    if recognizer.state == UIGestureRecognizerState.changed || recognizer.state == UIGestureRecognizerState.ended {
        let velocity:CGPoint = recognizer.velocity(in: self.view)

        if velocity.y > 0{
            var brightness: Float = Float(UIScreen.main.brightness)
            brightness = brightness - 0.03
            UIScreen.main.brightness = CGFloat(brightness)
            print("Decrease brigntness in pan")
        }
        else {
            var brightness: Float = Float(UIScreen.main.brightness)
            brightness = brightness + 0.03
            UIScreen.main.brightness = CGFloat(brightness)
            print("Increase brigntness in pan")
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T01:22:14.963

**是的！**只需使用 a并在调用平移手势时相应地`UIPanGestureRecognizer`调整值。**检查苹果文档。**`brightness`

# objective-c - Xcode - 实现一个方法，也由它的主类实现

> ID：14409492
> 
> 赞同：2
> 
> 时间：2013-01-18T23:48:36.483
> 
> 标签：objective-c, pragma

我正在使用 Xcode 4.5。在我最新的 Xcode 项目中，当我构建/编译我的程序时会弹出这个警告：

`Category is implementing a method which will also be implemented by its primary class`

这是导致错误的我的代码：

```
 @implementation NSApplication (SDLApplication)
 - (void)terminate:(id)sender {
    SDL_Event event;
    event.type = SDL_QUIT;
    SDL_PushEvent(&event); }
 @end 
```

我已经做到了，所以编译器会忽略（或跳过）使用`pragma code`.

所以我的代码现在看起来像这样：

```
 @implementation NSApplication (SDLApplication)

 #pragma clang diagnostic push
 #pragma clang diagnostic ignored "-Wobjc-protocol-method-implementation"
 - (void)terminate:(id)sender{
   SDL_Event event;
   event.type = SDL_QUIT;
   SDL_PushEvent(&event);}
 #pragma clang diagnostic pop
 @end 
```

显然它完成了这项工作，并且一旦构建/编译，就不会生成任何警告。

我的问题是，这是一种以这种方式抑制或忽略警告的安全/正常方式吗？

我在一些线程上读到使用子类是有利的，但是有很多人反对以这种方式使用它们......我很感激你的想法:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T00:37:52.850

> “我在一些线程上读到使用子类是有利的......”

使用子类可能是有利的，但这不是你在这里做的。

您所做的`(SDLApplication)` [是](http://developer.apple.com/library/mac/documentation/cocoa/conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html#//apple_ref/doc/uid/TP40011210-CH6-SW2)在`NSApplication`. 在该类别中，您正在覆盖`NSApplication`'s`terminate:`方法。通常，您应该只使用类别向现有类添加其他方法，而不是覆盖现有方法，因为这可能会产生不可预知的结果。

您真正应该做的是子类`NSApplication`，以便您可以`terminate:`正确覆盖：

```
@interface SDLApplication : NSApplication {

}

@end

@implementation

- (void)terminate:(id)sender {
   SDL_Event event;
   event.type = SDL_QUIT;
   SDL_PushEvent(&event);
   [super terminate:sender]; // this line is the key to assuring proper behavior
}

@end 
```

覆盖方法的最后一步`terminate:`应该是调用`super`，以便 terminate 方法正常工作。`super`（不允许在类别中使用关键字；只有单词`self`，这就是需要子类化的原因）。

确保您还将文件中`NSPrincipalClass`键的值更改为而不是.`Info.plist``SDLApplication``NSApplication`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T00:26:51.487

# 不。

覆盖（或重新实现）方法，尤其`-terminate:`是类别中的关键系统方法会导致未定义的行为。显然，退出应用程序不应该是机会游戏。子类 NSApplication 并覆盖`-terminate:`（最后调用 super），然后在 info.plist 中将其指定为主体类。 `Pragma`s 不是警告修复者，它们只是抑制器。

# ruby-on-rails - 在 rails 启动后重新初始化 ActiveRecord

> ID：14409493
> 
> 赞同：2
> 
> 时间：2013-01-18T23:48:39.197
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rails-activerecord

我正在构建一个允许用户通过管理前端界面修改 database.yml 内容的系统。

在重新启动应用程序之前，对 database.yml 的更改显然没有任何影响。与其强迫用户（可能没有对物理框的 SSH 访问权限）手动重新启动应用程序，我想要一种强制 ActiveRecord 在启动后重新加载配置的方法。

有没有办法强制 ActiveRecord 在初始启动后重新初始化，而不是要求他们重新启动服务器？

**基本原理**

这有两个用例 - a) 初始设置向导 b) 从 sqlite 评估数据库移动到生产支持的数据库。

*初始设置向导*

在安装我们的应用程序并首次启动后，用户将看到一个设置向导，其中允许用户在使用 sqlite 的内置评估数据库或指定生产支持的数据库之间进行选择。他们需要指定数据库属性。我们不希望用户在服务器上编辑`yml`文件，而是希望当前的前端在初始设置期间这样做。

*从 sqlite 评估数据库迁移到生产支持数据库*

如果用户选择使用内置评估数据库，但 alter 想要迁移到生产数据库，他们需要更新数据库设置以反映此更改。与上述相同的原因，需要一个前端而不是要求用户编辑配置文件，特别是因为我们可以验证应用程序的连接性、权限等，而不是用户在尝试启动应用程序时发现它不起作用他们得到一个 activerecord 异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T05:31:26.923

在下一个请求时重新启动 Rails 堆栈，就像您可以访问服务器一样。

```
system("touch #{File.join(Rails.root,'tmp','restart.txt')") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-09T15:49:36.640

以@wless1 的回答为基础，以使类似 ERB 的 ENV 变量（例如`<%= ENV['DB_HOST'] %>`）工作，试试这个：

```
YAML::load(ERB.new(File.read(File.join(Rails.root, "config/database.yml"))).result)
ActiveRecord::Base.establish_connection config[Rails.env] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T23:55:51.123

从理论上讲，您可以通过以下方式实现此目的：

```
config = YAML::load File.read(File.join(Rails.root, "config/database.yml"))

ActiveRecord::Base.establish_connection config[Rails.env] 
```

您必须在运行的每个 rails 进程中执行重新连接代码才能使其生效。不过，这里有很多危险的事情需要担心——更改数据库配置时的竞争条件、新 database.yml 中的语法问题等。

# node.js - 如何从外部应用程序写入 Meteor 数据库？

> ID：14409495
> 
> 赞同：8
> 
> 时间：2013-01-18T23:48:43.637
> 
> 标签：node.js, mongodb, meteor

我试图弄清楚如何从我正在编写的外部本机移动应用程序（特别是现在使用 Cinder 的 iOS）将数据插入 Meteor mongodb 数据库。我希望将移动设备应用程序上发生的事件写入我的 Meteor 应用程序的数据库，以便它可以立即显示在其他地方的浏览器上。

重要的是，我需要留在移动设备上的本机应用程序中 - 我无法启动浏览器。我对 Meteor 有点陌生，所以如果我忽略了一些明显的东西，我深表歉意。

关于如何做到这一点的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T02:45:48.410

最好的办法是使用这样的 iOS DDP[客户](https://github.com/alansikora/objective-c_ddp-client)**端**。您可以在现有 iOS 应用程序中本地使用此客户端，并订阅和写回 Meteor 生态系统中的数据。

DDP 代表*分布式数据协议*，由 Meteor 组编写，作为实时应用程序框架采用的外部标准。这是一种比直接与数据库通信更受欢迎的方法，因为您可以利用Meteor 生态系统中的[发布](http://docs.meteor.com/#meteor_publish)和[订阅方法。](http://docs.meteor.com/#meteor_subscribe)

该协议正在快速发展中。

我相信很快就会有一个版本来阐述 DDP 的当前状态及其官方规范的演变。[1.0 版本的正式规范](https://trello.com/c/kMkw800Z)。

**注意：**这是DDP*目前*形式的[精彩视频概述。](http://www.eventedmind.com/posts/meteor-subscriptions-and-ddp)

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T09:56:10.783

另一种选择是让您的 iOS 应用程序直接写入 Meteor 应用程序使用的 MongoDB 实例。您可以使用任何 MongoDB 驱动程序，例如[NuMongoDB](https://github.com/timburks/NuMongoDB)。Meteor 每十秒轮询一次 MongoDB 数据库，因此基于 Web 的用户将自动看到更新，尽管会有短暂的延迟。

正如 Tim 所说，DDP 正在迅速发展，所以这个选项可能会更稳定一些。

在托管方面，为了可扩展性，我建议使用 Mongo 主机（例如 MongoHQ）将您的 MongoDB 实例与免费的 meteor.com 站点分开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-23T12:53:06.883

那么其他情况呢？我的意思是浏览器应用程序？*

# google-cloud-storage - 如何将 gsutil 与多个帐户一起使用？

> ID：14409499
> 
> 赞同：41
> 
> 时间：2013-01-18T23:49:29.360
> 
> 标签：google-cloud-storage, gsutil

我经常通过至少两个帐户使用 Google Cloud Storage：personal@gmail.com 和 work@corp.com。我曾经为两个帐户`gsutil config`创建`.boto`文件，我已将其重命名为`personal.boto`和`work.boto`。

`cp personal.boto ~/.boto`每当我需要在这些帐户之间切换时，必须记住输入是很累的。有没有更好的办法？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2014-01-18T19:39:28.320

[Google Cloud SDK](https://developers.google.com/cloud/sdk/gcloud)现在包含该`gcloud`工具，可让您登录并在帐户之间轻松切换。

```
$ gcloud auth list
Credentialed accounts:
 - youremail@gmail.com (active)
To set the active account, run
 $ gcloud config set account <account> 
```

要登录另一个帐户，只需运行`$ gcloud auth login`并使用另一个 Google 帐户。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-18T23:49:29.360

最简单的方法如下：

```
$ BOTO_CONFIG=/path/to/personal.boto gsutil cp #... 
```

有关此主题的更多详细变化，请参阅[此线程](https://groups.google.com/forum/#!topic/gs-discussion/UMjqPKUNg6k/discussion)。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-04-17T10:08:52.263

为此，请使用以下命令切换到您想要的帐户。

```
gcloud auth login 
```

这将带您进入可用于切换到相关用户的 Google 帐户切换页面。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-06-29T06:00:54.920

在 windows 操作系统下：设置 BOTO_CONFIG=E:\.boto & e:\gsutil\gsutil.py ls s3://your_bucket/folder

# datetime - 在执行 ftp 时需要一个 bat 脚本根据日期重命名文件

> ID：14409501
> 
> 赞同：1
> 
> 时间：2013-01-18T23:49:36.310
> 
> 标签：datetime, ftp, batch-file, filenames, rename

这是我的情况。

我有一台服务器，它每天都以以下格式保存文件：TACO_2012-Dec-30__21-50-00_UTC.csv

我想使用 bat 脚本将此文件重命名为以下格式：TACO_20121230_215000.csv TACO_yyyymmdd_hhmmss.csv

这是我想要作为脚本执行的操作 1\. 登录到 ftp 服务器 2\. 将文件重命名为上述新格式

请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T08:51:04.533

```
@echo off
setlocal
for /f "tokens=2-7 delims=_.-" %%A in ('dir /B TACO_*') do (
  setlocal enabledelayedexpansion
  call :getmonth %%B
  ren TACO*_*%%A-%%B-%%C*_*%%D-%%E-%%F_UTC.csv TACO_%%A!mon!%%C_%%D%%E%%F.csv
  endlocal
)

:getmonth
if "%1" equ "Jan" set mon=01
if "%1" equ "Feb" set mon=02
if "%1" equ "Mar" set mon=03
if "%1" equ "Apr" set mon=04
if "%1" equ "May" set mon=05
if "%1" equ "Jun" set mon=06
if "%1" equ "Jul" set mon=07
if "%1" equ "Aug" set mon=08
if "%1" equ "Sep" set mon=09
if "%1" equ "Oct" set mon=10
if "%1" equ "Nov" set mon=11
if "%1" equ "Dec" set mon=12
goto :eof
endlocal 
```

# smlnj - number_in_month 锻炼

> ID：14409502
> 
> 赞同：0
> 
> 时间：2013-01-18T23:49:36.850
> 
> 标签：smlnj

我对 SML 很陌生，并以此做功课。“编写一个函数 number_in_month，它接受一个日期列表和一个月份（即一个 int）并返回列表中有多少个日期在给定月份中。”

这就是我解决的问题，看不出有什么问题。请帮忙。

`

```
 fun number_in_month (dates: (int*int*int) list,month:int) = 
    if ((#2 (hd dates)) = month)
    then val flag=1 flag+number_in_month(tl dates, month) 
    else number_in_month((tl dates),month)` 
```

REPL 告诉我们：用 EQUALOP 替换 VAL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T03:29:00.047

您不能“以这种方式”绑定变量。变量的绑定是一个声明，因此不能在需要表达式的地方完成。

在这种情况下，您必须使用 let-in-end 表达式

```
fun foo x = 
  let 
    val a = 42 
  in 
    a*x
  end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T18:46:06.687

你的问题是无休止的递归。编译器无法摆脱它，因为独立于结果 if..then..else 你再次运行你的函数试试这个：

```
fun number_in_month (dates: (int*int*int) list,month:int) = 
    if null dates
    then 0
    else if ((#2 (hd dates)) = month)
    then val flag=1 flag+number_in_month(tl dates, month) 
    else number_in_month((tl dates),month) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T16:55:15.410

我试图自己修复它，这就是我的解决方案：

fun number_in_month (dias: (int*int*int) list,mes:int) = if null dias then 0 else if ((#2 (hd dias)) = mes) then let val flag = 1 + number_in_month(tl dias, mes) in flag end else number_in_month((tl dias),mes)

我希望你也可以使用它！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T14:21:54.593

REPL 的错误消息令人困惑，但 Jesper 是正确的，如果您需要函数中的赋值语句，您应该使用 let-in-end 表达式。这肯定会让你解决这个错误。

# c# - C# 编译器是免费的吗？

> ID：14409506
> 
> 赞同：4
> 
> 时间：2013-01-18T23:50:23.260
> 
> 标签：c#

我要加入[Facebook 黑客杯](https://www.facebook.com/notes/facebook-hacker-cup/hacker-cup-2013-faq/)。规则说你可以使用任何带有免费编译器的语言；C# 是免费的吗？我想是的，但想确保...

我使用 Visual Studio Ultimate（从我的学校获得许可，不是免费的），我想避免在比赛前 1 周学习一门新语言......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T23:59:01.823

是的。C# 编译器是适用于 Windows 7 和 .NET Framework 4 的 Microsoft Windows SDK 的一部分。您可以在此处免费下载它：

[适用于 Windows 7 和 .NET Framework 4 的 Microsoft Windows SDK](http://www.microsoft.com/en-us/download/details.aspx?id=8279)

选择 IDE 是另一回事。如果规则允许您使用您的 Visual Studio Ultimate 副本，那就太棒了。如果没有，您将不得不找到其他东西。[Visual Studio Express](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-products)版本之一可能适合您的需要。

如果没有，请查看[MonoDevelop](http://monodevelop.com/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T23:51:59.797

是的，Visual Studio Express 附带免费的编译器。Mono 是另一个免费的 C# 编译器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T23:52:14.177

是的，编译器是免费的。不过，大多数版本的 Visual Studio IDE 都不是免费的。

# android - Android 的自定义加载图形 - 控制动画 gif？

> ID：14409509
> 
> 赞同：2
> 
> 时间：2013-01-18T23:50:48.303
> 
> 标签：android, loading, animated-gif

我想为我的 Android 应用程序（minSDK 8）创建一个自定义的、复杂的加载图形。

如果我创建一个 100 帧的 GIF，在 Java/Android 中有没有办法告诉它在我的函数中转到哪个帧`'doProgress()'`？

是否有另一种或更好的方法来进行自定义加载图形？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T00:06:05.300

> 如果我创建一个 100 帧的 GIF，Java/Android 中是否有办法告诉它在我的“doProgress()”函数中转到哪个帧？

由于 Android 不制作 GIF 动画，所以没有。

> 是否有另一种或更好的方法来进行自定义加载图形？

选项#1：使用[帧动画](http://developer.android.com/guide/topics/resources/animation-resource.html#Frame)。

选项 #2：使用 a`RotateAnimation`与`ImageView`.

选项 #3：使用`ViewPropertyAnimator`（使用 NineOldAndroids 作为后端）`android:rotation`在`ImageView`.

可能还有其他选择，尽管这是我想到的三个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-25T05:32:04.667

如果你有一个 gif 图像，那么你可以使用`WebView`组件来显示 gif 图像。在 webview 中，图像会自行循环，我们不需要做额外的工作。

# jquery - 单击一个跨度，使其消失并出现其他内容

> ID：14409519
> 
> 赞同：1
> 
> 时间：2013-01-18T23:52:14.170
> 
> 标签：jquery, visibility

我有一个php代码：

```
<div class="spacermenu">
                <span>Just a write</span>
                <div class="spacerhidden">
                        <input type"text" class="spacetext"> <img class="spacetext" src="images/delete.png">
                </div>
</div> 
```

和一个 jquery 脚本

```
$(".spacermenu span").click(function () {
    $(this).css("display","none");
    $(??????).css("display","block");
}); 
```

我想要实现的是，当我单击“仅写入”时，使该跨度消失（完成）并使 .spacerhidden div 出现。我的猜测是使用像“.spacermenu .spacerhidden”这样的选择器，但这显示了所有 .spacerhidden div，而不是我点击的那个。

我在这里缺少什么？

提前致谢。

到目前为止的每个人：“下一个”是不是有点不精确，即使它在 atm 工作？我不能选择那个精确的元素吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T23:53:52.517

你可以使用`next`方法。

```
$(".spacermenu span").click(function () {
    $(this).hide().next('.spacerhidden').show();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T23:54:01.270

尝试[`.next()`](http://api.jquery.com/next/)

```
$(".spacermenu span").click(function () {
    $(this).css("display","none");
    $(this).next().css("display","block");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T23:56:28.733

尝试`next`

```
$(".spacermenu span").click(function () {
    $(this).next('.spacerhidden').css("display","block");
}); 
```

[演示](http://jsfiddle.net/wYPtR/1/)

# objective-c - Objective C - 不能在子类中设置超类属性

> ID：14409524
> 
> 赞同：0
> 
> 时间：2013-01-18T23:52:25.593
> 
> 标签：objective-c, inheritance, properties

采用这个简单的类层次结构：

**树.h**：

```
@interface Tree : NSObject
@property (nonatomic, assign) id<TreeDelegate> delegate;
@end 
```

**树.m**：

```
@implementation Tree
@synthesize delegate;
@end 
```

**阿斯彭.h**：

```
@interface Aspen : Tree
- (void)grow:(id<TreeDelegate>)delegate;
@end 
```

**阿斯彭.m**：

```
@implementation Aspen
- (void) grow:(id<TreeDelegate>)d {
    self.delegate = d;
}
@end 
```

当我尝试这样做时`self.delegate = d;`，我收到以下错误：

> -[Aspen setDelegate:]: 无法识别的选择器发送到实例 0x586da00

我期望`Tree`父类的`delegate`属性对子类是可见的，但它似乎不是，因为错误表明父类的合成设置器不可见。

我错过了什么？我是否必须在子类级别重新声明该属性？我尝试`@dynamic`在实现的顶部添加，`Aspen`但这也不起作用。这里有一个如此简单的概念，但我已经浪费了一个小时来寻找解决方案。在这一点上没有想法。

**- 编辑 -**

上面的代码只是一个非常精简的示例，用于演示我所看到的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T00:24:04.347

我刚刚尝试了您的代码，并辅以协议，实现它的对象，必要`import`的`main`功能和功能，在我的系统上它就像一个魅力：

```
#import <Foundation/Foundation.h>

@protocol TreeDelegate <NSObject>
@end

@interface MyDelegate : NSObject <TreeDelegate>
@end

@implementation MyDelegate
@end

@interface Tree : NSObject
@property (nonatomic, assign) id<TreeDelegate> delegate;
@end

@interface Aspen : Tree
- (void)grow:(id<TreeDelegate>)delegate;
@end

@implementation Tree
@synthesize delegate;
@end

@implementation Aspen
- (void) grow:(id<TreeDelegate>)d {
    self.delegate = d;
}
@end

int main(int argc, char ** argv) {
    MyDelegate * d = [[MyDelegate alloc] init];
    Aspen * a = [[Aspen alloc] init];

    [a grow:d];
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:39:01.210

我终于能够弄清楚这一点。在我的示例中，我的实际代码利用了定义类的第 3 方静态库`Tree`。`Aspen`我已经构建了一个新版本的静态库，该版本公开了`Tree delegate`我的示例中给定的内容，但是在将它添加到我的项目后我没有正确重新链接该库，因此旧版本仍在运行时被访问。

经验教训：认真执行导入 3rd 方库的步骤，当简单的基本编程概念（例如我的示例文本）不起作用时，退后一步，确保你已经点了 i 和交叉 t。

# php - 在新查询 PHP/PDO 中链接现有 MySQL 记录

> ID：14409525
> 
> 赞同：0
> 
> 时间：2013-01-18T23:52:28.933
> 
> 标签：php, mysql, pdo

```
$insert = $dbh->prepare('INSERT INTO tags (tag_name) VALUES (:tag)');
  $insert->bindParam(':tag', $tag, PDO::PARAM_STR);
  foreach($tags as $tag) {
   $insert->execute();
   $tag_id = $dbh->lastInsertID();
echo $tag_id."+".$photo_id."<br />";
$sql = "INSERT INTO tagrefs (tag_id, photo_id) VALUES (:tag_id,:photo_id)";
$q = $dbh->prepare($sql);
$q->execute(array(':tag_id'=>$tag_id,
                       ':photo_id'=>$photo_id));
  } 
```

这段特定的代码将与上传的照片相关的标签插入到名为“标签”的表中。它将 tag_id 链接到名为“tagrefs”的表中的 photo_id。这一切都很好，直到我使用了两次标签。这是合乎逻辑的，因为没有插入任何内容（标签是唯一的，我只是希望“tagrefs”中的条目列出我的下一张带有 tag_id 的照片的 photo_id）

如何使我的代码比较用户输入的标签并比较它们，或者返回现有标签的值并正确放入“tagrefs”？非常感谢您抽出宝贵时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T23:56:50.047

如果使用[`INSERT ... ON DUPLICATE KEY UPDATE`](http://dev.mysql.com/doc/en/insert-on-duplicate.html), then`lastInsertID()`将返回`AUTO_INCREMENT`匹配行的字段值，即使`UPDATE`执行的是 an 而不是插入。

为了确保它也适用于 v5.1.12 之前的 MySQL 版本，可以使用 MySQL 的[`LAST_INSERT_ID()`](http://dev.mysql.com/doc/en/information-functions.html#function_last-insert-id)函数显式设置插入 id：

```
INSERT INTO tags
  (tag_name)
VALUES
  (:tag)
ON DUPLICATE KEY UPDATE
  id = LAST_INSERT_ID(id) 
```

# asp.net - ASP.NET 应用程序负载平衡

> ID：14409530
> 
> 赞同：2
> 
> 时间：2013-01-18T23:53:10.113
> 
> 标签：asp.net, sql-server, load-balancing

我有一个 ASP 应用程序位于 2 台服务器上，使用 SQL Server 2012 中的数据库。SQL Server 使用 AlwaysOn 可用性组，但是当这些故障转移时，连接到 ASP.NET 应用程序的客户端终止。我查看了 SQL 驱动程序，结果发现该应用程序正在使用 SqlClasses，因此不使用 ODBC 驱动程序（根据我的推断，我认为逻辑是合理的，但如果我错了，请纠正我）。

另一个建议是我对 2 个应用程序服务器进行负载平衡，这将无缝地允许故障转移，而客户端不会丢失连接，这是一种可行的方法吗？我们对应用程序代码没有太多控制权来要求它在失败后再次尝试连接......

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T00:12:12.050

尝试在连接字符串中定义[故障转移伙伴。](http://www.connectionstrings.com/sql-server-2012)

```
Data Source=myServerAddress;Failover Partner=myMirrorServerAddress;
Initial Catalog=myDataBase;Integrated Security=True; 
```

并查看[.NET 4.5 中的 MultiSubNetFailover 属性](http://msdn.microsoft.com/en-us/library/hh205662.aspx)

# css - IE8中隐藏的标题元素

> ID：14409534
> 
> 赞同：0
> 
> 时间：2013-01-18T23:53:41.497
> 
> 标签：css, html, internet-explorer-8

我正在研究 www.doublegbobcat.com/preview 并且我使用了标题元素。事情正在按预期显示，除了在 IE8 中，标题似乎隐藏在其他内容后面的 z-index 上。如何让标题元素像在 Chrome 中一样在 IE8 中显示？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T00:19:15.437

IE8 开发人员工具中没有显示 header 元素，即使您已为 IE lt 9 声明了新的 HTML 5 元素

相反，请尝试在您的`<head>`

[链接到脚本](http://code.google.com/p/html5shiv/)

[更多信息](http://en.wikipedia.org/wiki/HTML5_Shiv)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T23:58:18.047

IE8 将不接受 HTML5 标签。您需要使用条件语句来替换它。

[http://fortuito.us/diveintohtml5/semantics.html#unknown-elements](http://fortuito.us/diveintohtml5/semantics.html#unknown-elements)

# c# - 类、结构或接口成员声明中的无效标记“=”，类、结构或接口成员声明中的无效标记“（”

> ID：14409537
> 
> 赞同：2
> 
> 时间：2013-01-18T23:53:55.933
> 
> 标签：c#

我想返回存储在数据库中的最后一条记录，并希望将该返回值实例化到类 ReligionCaste 的成员 pID，但我有标题错误。

我的数据库功能是

```
public int LastEnteredRecord()
    {
        int lastId=0;
        dbConnection = new SqlConnection(connectionString);
        try    //If error in connection opening, throws it.
        {
            dbConnection.Open();
            command.Connection = dbConnection;
            command.CommandType = CommandType.StoredProcedure;
            command.CommandText = "dbo.LastRecordEntered";

            try    //if error in query execution, throws it.
            {
                lastId= Convert.ToInt32 ( command.ExecuteScalar());
               // MessageBox.Show("Record Entered with ID:"+lastId .ToString ());
            }
            catch (SqlException ex)
            {
                MessageBox.Show(ex.Message);

            }
            dbConnection.Close();
            dbConnection.Dispose();
        }
        catch (SqlException ex)
        {
            MessageBox.Show(ex.Message);

        }
        return lastId;
    } 
```

我想将该返回值分配给代码为的类

```
class ReligionCaste
{
    //public int religion_ID, caste_ID;
    public String religion, sect, caste, subCaste;
    public int pID;

    DatabaseHandler.DBCntrlr dbObj = new DatabaseHandler.DBCntrlr();
    pID = dbObj.LastEnteredRecord();

 } 
```

但它给出了上述错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T23:56:50.367

您需要一个构造函数来为 pId 赋值，此时您的语法无效。例子：

```
class ReligionCaste
{
    public ReligionCaste()
    {
        pID = dbObj.LastEnteredRecord();
    }

    //public int religion_ID, caste_ID;
    public String religion, sect, caste, subCaste;
    public int pID;

    DatabaseHandler.DBCntrlr dbObj = new DatabaseHandler.DBCntrlr();
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T23:57:55.397

```
class ReligionCaste
{
    //public int religion_ID, caste_ID;
    public String religion, sect, caste, subCaste;
    public int pID;
    private DatabaseHandler.DBCntrlr dbObj;

    public ReligionCaste()
    {
        dbObj = new DatabaseHandler.DBCntrlr();
        pID = dbObj.LastEnteredRecord();
    }  
 } 
```

# php - PHP: if ($Name=='ProxiedIP') 导致 500（内部服务器错误）

> ID：14409548
> 
> 赞同：6
> 
> 时间：2013-01-18T23:54:51.657
> 
> 标签：php, string, http-headers, self-reference

这可能是一个太模糊的问题，但我已经解决了几个小时令人费解的服务器错误并将其归结为最奇怪的问题；在这一点上，我只想知道是否有人曾经发生过类似的事情，或者可能对可能发生的事情有任何见解。

以下代码行触发了错误：

```
if ($Name=='ProxiedIP') { return true; } 
```

这个版本运行没有任何问题：

```
if ($Name=='proxiedIP') { return true; } 
```

似乎令牌“ProxiedIP”以某种方式弄脏了一些东西，但我什至无法想到解析器将如何翻译字符串文字，从而使服务器像这样挂起。顺便说一句，我确定**$Name!='proxiedIP'**和**$Name!='ProxiedIP'**。

这是apache错误日志中的条目：

```
[Fri Jan 18 18:15:12.924419 2013] [core:error] [pid 27676:tid 3427232831232] [client 12.345.67.890:34482] Premature end of script headers: index.php, referer: http://mySite.com/ 
```

我搜索了“ProxiedIP”作为我系统上我能想到的每个组件的关键字，但我一无所获。不过，对我来说更重要的问题是字符串如何在比较检查中产生这种影响。有任何想法吗？

* * *

还值得注意的是，PHP 错误日志对此完全保持沉默。我在页面顶部启用了错误输出，但脚本从未完成加载，因此这可能是一个因素。这是我设置它的方式：

```
error_reporting(E_ALL);
ini_set('display_errors', 1); 
```

因为代码在[这里](http://codepad.org/Dx4dtVya)工作，它似乎更有可能是特定于平台实现的东西。我在 Gandi.net 的“简单托管”服务的实例上运行它，该服务运行 Varnish 以加速应用程序。值得一提的是，代码正在加载到单独域中的 iframe 中。

我也在对标头进行一些密集的工作，这似乎是问题的最大潜在根源，尽管就我而言奇怪的是触发错误的方式。此外，我知道没有一个名为“ProxiedIP”的通用标头，尽管到目前为止，使用冲突似乎是唯一有意义的事情。无论如何，我没有看到它。

对我来说，真正相关的仅仅是字符串比较导致服务器崩溃的事实。我已经用 PHP 编程超过 10 年了，以前从未发生过这样的事情。我试图了解它是如何发生的背后的后勤工作。

* * *

更新：我尝试了以下变体，它仍然产生相同的结果：

```
if ($Name === (strtoupper("p").'roxiedIP')) { return true; } 
```

有人问我是否会发布完整的代码，但 iframe 端的脚本有 1400 多行，所以这并不可行。我正在调整有问题的部分以尝试在新脚本中运行它，并将发布结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T08:57:14.800

我认为问题出在变量 $Name 上。检查它是否被正确分配。还要检查导致问题的 if 语句之后的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T00:01:49.330

实际上，我认为您的问题在于调用函数，即根据返回值，它会做一些“愚蠢”的事情并且 PHP 崩溃。尝试用硬`return true`或替换 if()`return false`看看会发生什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T01:01:52.743

当我从你的错误中得到消息时，你正在搞乱框架，如果你的框架的变化会在允许 fw 进行输出之前触发一些输出被调用。只是更详细地阅读它，你在错误的火车上得到它，这不是错误的原因，它是 fw 不神圣状态的开始。

尝试在 php 调试器中运行脚本，而不是使用 var dump。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T19:21:09.293

感谢您的帖子，但事实证明这是一个非常复杂的场景，其中功能链下几个级别的条件导致了所讨论的任一功能范围之外的意外行为。

实际问题是由于在一个完全独立的进程中解析 debug_backtrace() 数组的输出时进行了条件检查，具有讽刺意味的是，这是为了防止无限递归，而是触发了类似的破坏性级联事件，这些事件超出了分配的内存限制。

我最初发帖是因为我对真正似乎是字符串文字比较做一些我认为不可能的事情感到困惑，并且想了解如果是这样的话，什么条件可以允许它发生。我很高兴原因实际上并不是它看起来的那样。感谢您帮助解决难题。

* * *

更新：错误的真正根源在于 PHP 难以翻译包含对其自身的引用的对象或数组。我正在存储转换后的标头、直接标头引用、$_REQUEST[] 和 $_SERVER[] 项，以及在复杂的关联数组中记录消息和相关数据。这些项目之间有很多动态引用，尤其是那些涉及我使用的原生 PHP 全局变量的引用。

PHP[传统上](http://php.net/manual/en/function.print-r.php#refsect1-function.print-r-changelog)在管理自引用实体方面[存在问题](https://bugs.php.net/bug.php?id=53915)，尽管已经进行了改进，但我的特殊情况非常复杂，以至于在尝试映射这些对象时将[ReflectionClass](http://us3.php.net/manual/en/class.reflectionclass.php)发送到无限循环中。我已经通过在轮询项目时手动[取消引用](https://wiki.php.net/rfc/functionarraydereferencing)它们来修复它，但是如果需要在一个公共数组或引用结构中使用多个与 $GLOBALS 相关的变量，则需要注意这一点。

# android - ViewPager 中的按钮滚动到特定页面

> ID：14409556
> 
> 赞同：28
> 
> 时间：2013-01-18T23:55:35.853
> 
> 标签：android, android-layout, android-viewpager, android-animation, android-button

我的 ViewPager 中的一个布局有一个按钮。“R.layout.add_site”。我想要点击按钮的选项，它会滚动到我的特定页面。我已经可以选择滑动到特定页面，但我希望两者都有。

现在我确定有办法做到这一点，但由于某种原因，我无法弄清楚。

您会看到我已经尝试过，但只是不知道调用什么方法才能使其滚动到所需的页面。这是 R.layout.main。

这是我的代码。

```
public class fieldsActivity extends Activity {

Button addSiteButton;
Button cancelButton;
Button signInButton;

/**
 * Called when the activity is first created.
 */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // to create a custom title bar for activity window
    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);

    setContentView(R.layout.fields);
    // use custom layout title bar
    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.topbar);

    Pager adapter = new Pager();
    ViewPager mPager = (ViewPager) findViewById(R.id.fieldspager);
    mPager.setAdapter(adapter);
    mPager.setCurrentItem(1);

    addSiteButton = (Button) findViewById(R.id.addSiteButton);
    addSiteButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
        // Don't know what method to call!?

        }

    });

    cancelButton = (Button) findViewById(R.id.cancel_button);
    signInButton = (Button) findViewById(R.id.sign_in_button);

}

 private class Pager extends PagerAdapter {
    public int getCount() {
        return 3;

    }

    @Override
    public Object instantiateItem(View collection, int position) {
        LayoutInflater inflater = (LayoutInflater) collection.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        int resId = 0;
        switch (position) {
            case 0:
                resId = R.layout.field01;
                break;
            case 1:
                resId = R.layout.add_site;

                break;
            case 2:
                resId = R.layout.main;
                break;

        }

        View view = inflater.inflate(resId, null);
        ((ViewPager) collection).addView(view, 0);
        return view;
    }

    @Override
    public void destroyItem(View arg0, int arg1, Object arg2) {
        ((ViewPager) arg0).removeView((View) arg2);
    }
    @Override
    public boolean isViewFromObject(View arg0, Object arg1) {
        return arg0 == ((View) arg1);
    }
    @Override
    public Parcelable saveState() {
        return null;
    }

}

} 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-01-19T00:12:13.410

称呼 ：

```
 mPager.setCurrentItem(2); 
```

在你的 onClick() 方法中，或者为了更平滑的滚动：

```
mPager.setCurrentItem(2, true); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-02-02T06:46:28.520

我无法真正回答为什么会发生这种情况，但是如果您将 setCurrentItem 调用延迟几毫秒，它应该可以工作。我的猜测是，因为在此期间`onResume`还没有渲染通道，而 ViewPager 需要一个或类似的东西。

```
private ViewPager viewPager;

@Override
public void onResume() {
    final int pos = 3;
    viewPager.postDelayed(new Runnable() {

        @Override
        public void run() {
            viewPager.setCurrentItem(pos);
        }
    }, 100);
} 
```

**原答案：** [这里](https://stackoverflow.com/a/19858877/2599596)

# eclipse - nextInt() 方法的 noSuchElement 异常

> ID：14409557
> 
> 赞同：1
> 
> 时间：2013-01-18T23:55:38.350
> 
> 标签：eclipse, exception, java.util.scanner

嘿伙计们，我不明白为什么我在这个简单的代码中遇到异常
我正在尝试制作纸牌游戏，并尝试阅读用户想要的他手中的卡片索引（它是德语）

```
public Karte abschlagen(Karte gegnK) {
    System.out
            .println("Bitte die Zahl für die jeweilige Karte auswählen: ");
    gibHandAus(); // prints the users cards with their indexes 

    try {
        Scanner sc = new Scanner(System.in);
        int index = sc.nextInt();
        if (index < 0 || index >= getHand().size()) {
            System.out
                    .println("Bitte nur eine der gegebenen Zahlen auswählen!");
                     sc.close();
            return abschlagen(gegnK);
        }
        Karte k = getHand().get(index);
        getHand().remove(index);
        sc.close(); 
```

那么这里有什么问题呢？
在我可以选择一个数字之前，它会引发 noSuchElement 异常。
我在另一个问题中读到 close() 方法可能会导致这种情况，但没有它它仍然会这样做。

错误信息是：

```
Exception in thread "main" java.util.NoSuchElementException
   at java.util.Scanner.throwFor(Unknown Source) 
   at java.util.Scanner.next(Unknown Source) 
   at java.util.Scanner.nextInt(Unknown Source) 
   at java.util.Scanner.nextInt(Unknown Source) 
   at durak.Spiel.spielerWehrtAb(Spiel.java:229) 
   at durak.Spiel.main(Spiel.java:314) 
```

编辑： spielerWehrAb() 的代码：

```
public static boolean spielerWehrtAb(Karte k) {
.
.
.
try {
Scanner sc = new Scanner(System.in);
int x = sc.nextInt();
sc.close();

if (x == 0) {
... }
else if(x == 1) {
System.out.println("1 ausgewählt");
Karte k2 = spieler.abschlagen(k);
....
} 
else return spielerWehrAb(k); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T00:10:39.677

问题是`Scanner.close();`关闭了底层流。第二次，你试图从一个封闭的流中读取，所以它显然失败了。

请在此处查看我为演示此行为而设计的测试： [java.util.Scanner 与 System.in 一起使用时的奇怪行为](https://stackoverflow.com/questions/14410327/java-util-scanner-strange-behaviour-when-used-with-system-in/)

解决方案是关闭后不阅读`Scanner`。例如，您可以将 定义`Scanner`为类成员并始终使用该成员。

# ruby-on-rails - Ruby/Rails 从具有 id 的数据库中收集值

> ID：14409562
> 
> 赞同：0
> 
> 时间：2013-01-18T23:56:34.257
> 
> 标签：ruby-on-rails, ruby, associations, rails-activerecord

尝试自学 Rails 并遇到了一些在 PHP 中很容易但在这一领域感到困惑和卡住的东西。

我有一个带有许多下拉菜单的表格。我设法让下拉菜单显示一个值并将该值的 id 存储到另一个表中。现在我想查看新记录，但不想显示我保存的 ID，我想从原始表中收集值并显示它。

我希望这是有道理的。

以下是我当前的代码。

**寻找模型**

```
class Finding < ActiveRecord::Base
belongs_to :skill 
```

**技能模型**

```
class Skill < ActiveRecord::Base
attr_accessible :skill_desc, :skill_level
has_many :findings 
```

**显示.html.erb**

```
<td>Finding Skill</td>
<td><%= @finding.skill_id %> </td> 
```

我想我的问题是我还需要更改 @finding.skill_id 以显示技能模型中的 Skill_desc 字段吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T00:27:14.247

```
<%= @finding.skill.skill_desc %> 
```

`@finding.skill`返回`Skill`与该结果关联的对象，您可以调用该对象`skill_desc`来检索所述值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T00:27:10.330

```
@finding.skill.skill_desc 
```

如果你想找到一项技能的发现，你需要使用

`@skill.findings`返回与该技能对象关联的结果对象数组。

在 sql 中，它可能看起来像这样

```
SELECT * FROM findings WHERE ID EQ 23 JOIN skills ON findings.skill_id = Skills.id 
```

# java - 游戏中的 NullPointerException

> ID：14409565
> 
> 赞同：-1
> 
> 时间：2013-01-18T23:56:46.710
> 
> 标签：java, nullpointerexception

我正在尝试用 Java 制作太空入侵者类型的游戏，但无法弄清楚为什么游戏无法运行。这是错误

```
java.lang.NullPointerException
at UFO_Game.checkForHit(UFO_Game.java:131)
at UFO_Game.setup(UFO_Game.java:109)
at UFO_Game.run(UFO_Game.java:44)
at acm.program.Program.runHook(Program.java)
at acm.program.Program.startRun(Program.java)
at acm.program.Program.start(Program.java)
at sun.applet.AppletPanel.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

这是出现错误的代码。

```
public void checkForHit(){
    GObject CHECK = getElementAt(Bullet.getX(), Bullet.getY());
    if(CHECK == SHIP){
        removeAll();
    } 
```

顺便说一句，我正在使用斯坦福方法论中的 ACM 东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T00:04:03.253

我想这`Bullet`是你`UFO_Game`班上的一个领域。它没有被分配一个有效的值（对象字段用 初始化`null`）。当您尝试调用`getX()`时，`NullPointerException`会抛出 a。为避免这种情况，`Bullet`请在构造每个`UFO_Game`对象时初始化该字段。

顺便说一句，Java 中的方法和字段名称应该以小写字母开头。任何熟悉 Java 的人都会将`Bullet.getX()`其视为对静态（类）方法的调用。

# c - 在嵌入式项目中使用talloc

> ID：14409568
> 
> 赞同：1
> 
> 时间：2013-01-18T23:56:51.873
> 
> 标签：c, compiler-errors, embedded

我希望能够在我正在处理的嵌入式项目中使用[talloc](http://talloc.samba.org/talloc/doc/html/index.html)，但一直无法确定如何将它整合到我的开发环境中。有问题的环境是供应商提供的使用 ARM GCC 4.4.1 的 Windows IDE，我正在使用它来定位 ARM7 设备。

我已经到了编译器抱怨类型冲突的阶段：

```
In file included from .\talloc-2.0.8\talloc.c:33:
.\talloc-2.0.8\lib\replace/replace.h:626: error: conflicting types for 'ptrdiff_t'
c:\program files (x86)\cypress\psoc creator\2.2\psoc creator\import\gnu_cs\arm\4.4.1\bin\../lib/gcc/arm-none-eabi/4.4.1/include/stddef.h:149: note: previous declaration of 'ptrdiff_t' was here
.\talloc-2.0.8\lib\replace/replace.h:848: error: conflicting types for 'useconds_t'
c:\program files (x86)\cypress\psoc creator\2.2\psoc creator\import\gnu_cs\arm\4.4.1\bin\../lib/gcc/arm-none-eabi/4.4.1/../../../../arm-none-eabi/include/sys/types.h:253: note: previous declaration of 'useconds_t' was here
.\talloc-2.0.8\talloc.c:123: error: expected specifier-qualifier-list before 'uint8_t' 
```

我注意到 replace.h 试图包含一个名为 config.h 的文件，该文件在talloc 源代码树中不存在——我通过创建一个该名称的空白文件来解决这个问题。是否使用 config.h 来通知talloc 系统已经定义了哪些功能？这只是使用`#define`指令来防止 replace.h 尝试替换现有类型的问题吗？

鉴于这是我第一次尝试使用不是我自己在项目中编写的代码，我对如何调和这些冲突感到有些困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T00:08:03.237

`config.h`应该是自动生成的。对于 tmalloc，它是由[waf](http://code.google.com/p/waf/)（基于 python 的构建系统）完成的。

```
$ python ./buildtools/bin/waf configure
Checking for program gcc or cc           : /usr/lib/ccache/gcc 
Checking for program cpp                 : /usr/bin/cpp 
Checking for program ar                  : /usr/bin/ar 
Checking for program ranlib              : /usr/bin/ranlib 
Checking for gcc                         : ok  
Checking for program git                 : /usr/bin/git 
Check for -MD                            : yes 
....
$ python ./buildtools/bin/waf build
..... 
```

# javascript - 使用 Jquery Mobile 选中和取消选中单选按钮

> ID：14409571
> 
> 赞同：9
> 
> 时间：2013-01-18T23:57:10.890
> 
> 标签：javascript, html, cordova, jquery-mobile, radio-button

我无法使用 jquery mobile 以编程方式检查一组复选框，我有以下代码：

```
<div data-role="fieldcontain"  id="div_radio" class="radiogroup">
    <fieldset data-role="controlgroup">
        <input type="radio" name="radio-pieces" id="radio-choice-1" value="3" checked="checked" />
        <label for="radio-choice-1">1 to 3</label>

        <input type="radio" name="radio-pieces" id="radio-choice-2" value="5"  />
        <label for="radio-choice-2">4 to 5</label>

        <input type="radio" name="radio-pieces" id="radio-choice-3" value="6"  />
        <label for="radio-choice-3">over 5</label>
    </fieldset>
</div> 
```

如果我这样做：`$("input[type='radio']:last").attr("checked",true).checkboxradio("refresh");`一切都很完美，但这些都不起作用：

```
$("input[type='radio']:first").attr("checked",true).checkboxradio("refresh");
$("input[type='radio']:eq(0)").attr("checked",true).checkboxradio("refresh");
$("input[type='radio']:eq(1)").attr("checked",true).checkboxradio("refresh");
$("input[type='radio']:eq(2)").attr("checked",true).checkboxradio("refresh"); 
```

如何正确操作这些元素？取消选择所有复选框也可以正常工作：

```
$("input[type='radio']").attr("checked",false).checkboxradio("refresh"); 
```

似乎唯一有效的复选框是最后一个。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-19T03:34:34.737

他们都工作得很好。您只需要触发`refresh`所有`input radio`群组。

```
$("input[type='radio']:first").attr("checked", "checked");
$("input[type='radio']").checkboxradio("refresh"); 
```

jsFiddle 在[这里](http://jsfiddle.net/pmatseykanets/xA5jC/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-29T21:40:18.880

除了：

```
$('#reset').click(function(){
    $('#Store').trigger("click").trigger("click"); // yes... twice
}); 
```

在 jQuery Mobile 1.4.2 上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-24T13:57:32.247

对我来说，这可以取消选中整个收音机组：

```
$(".my_class").removeAttr("checked");
$(".my_class").checkboxradio("refresh"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T00:48:02.457

这似乎不对。不需要单引号 input[type=radio] 是正确的。我使用的是过时的版本（1.1.1）。了解您使用的版本会有所帮助。

请记住，这些是单选按钮，一次只能选择一个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-08T08:30:55.760

在 Jquery 移动单选按钮刷新是这样的：

```
$(".iscfieldset input[type='radio']:first").attr("checked", "checked");

    $(".iscfieldset input[type='radio']").checkboxradio().checkboxradio("refresh"); 
```

试试这个对我来说很好

# ruby - 如何使用 ruby -git 递归克隆远程仓库？

> ID：14409573
> 
> 赞同：2
> 
> 时间：2013-01-18T23:57:32.733
> 
> 标签：ruby, git

如何使用[ruby​​-git](https://github.com/schacon/ruby-git)递归克隆远程仓库？

我使用这段代码：

```
require "git"
Git.clone "git://github.com/user/repo.git", "/tmp/repo" 
```

但这不会递归地从 GitHub 克隆 repo。

我需要一个模拟：

```
$ git clone git://github.com/user/repo.git /tmp/repo --recursive 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T06:00:01.150

ruby-git中方法的实现`#clone`告诉我们目前是不可能的：

[https://github.com/schacon/ruby-git/blob/master/lib/git/lib.rb#L44](https://github.com/schacon/ruby-git/blob/master/lib/git/lib.rb#L44)

```
def clone(repository, name, opts = {})
  @path = opts[:path] || '.'
  clone_dir = opts[:path] ? File.join(@path, name) : name

  arr_opts = []
  arr_opts << "--bare" if opts[:bare]
  arr_opts << "-o" << opts[:remote] if opts[:remote]
  arr_opts << "--depth" << opts[:depth].to_i if opts[:depth] && opts[:depth].to_i > 0

  arr_opts << '--'
  arr_opts << repository
  arr_opts << clone_dir

  command('clone', arr_opts)

  opts[:bare] ? {:repository => clone_dir} : {:working_directory => clone_dir}
end 
```

你最好 fork ruby​​-git 并在那里插入几行。它会解决你的问题，全世界都会说“谢谢”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T07:07:09.033

有时最简单的方法是让应用程序自己做。为什么不使用？

```
`git clone git://github.com/user/repo.git /tmp/repo --recursive` 
```

# java - 不支持的媒体类型 (415) 与通用 Put 或 Post

> ID：14409575
> 
> 赞同：1
> 
> 时间：2013-01-18T23:57:39.623
> 
> 标签：java, generics, post, restlet, put

啊哈！

我试图在 Restlet 中实现一个通用的 put 或 post 方法。（我能够毫无问题地实现一个通用的 Get 方法。）

这是我的服务器资源（接口）文件的相关部分：

```
@Post
public <T> void insert( T object ) ;   //  non-idempotent update/create 
```

这是我的服务器资源（实现）文件的相关部分：

```
//  non-idempotent create/update
public <T> void insert( T object )
{ } 
```

我在我的 Restlet 客户端中尝试了以下两种方法：

```
clientResource.insert( newUser ) ;
clientResource.<User>insert( newUser ) ; 
```

但是，这两者都会导致以下客户端异常：

```
Exception in thread "main" Unsupported Media Type (415) - Unsupported Media Type
at org.restlet.resource.ClientResource.doError(ClientResource.java:612)
at org.restlet.engine.resource.ClientInvocationHandler.invoke(ClientInvocationHandler.java:264)
at $Proxy8.store(Unknown Source)
at storage.client.Client.main(Client.java:53) 
```

因此，似乎有某种封送处理（对于实际的服务器 put 方法 -- insert()）失败了。

有谁知道如何解决这个问题？

小心，

达尔文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T18:37:53.153

我认为您遇到了这个已知的错误：

[https://github.com/restlet/restlet-framework-java/issues/426](https://github.com/restlet/restlet-framework-java/issues/426)

这里有一些背景讨论：

[http://restlet.tigris.org/ds/viewMessage.do?dsForumId=4447&viewType=browseAll&dsMessageId=2910995#messagefocus](http://restlet.tigris.org/ds/viewMessage.do?dsForumId=4447&viewType=browseAll&dsMessageId=2910995#messagefocus)

# delphi - Delphi：每个 TIdcontext 的唯一变量

> ID：14409576
> 
> 赞同：2
> 
> 时间：2013-01-18T23:57:42.817
> 
> 标签：delphi, variables, indy10

我在为 IdTCPServer 的每个连接声明一个唯一的全局变量时遇到问题。我在这里要做的是。

```
TMyContext = class(TIdServerContext)
  public
    Tag: Integer;
    Queue: TIdThreadSafeList;
    FPacketBuffer: Pointer;
    PacketBufferPtr: Integer;

    constructor Create(AConnection: TIdTCPConnection; AYarn: TIdYarn; AList: TThreadList = nil); override;
    destructor Destroy; override;
  end; 
```

然后使用 TMyContext(AContext).FPacketBuffer 访问变量，但是当连接处于活动状态并且新连接尝试连接时出现访问冲突错误。这是我的 idTcpConnect 和 idTcpDisconnect 中的内容

```
procedure TMainFrm.MainSckConnect(AContext: TIdContext);
begin
  TMyContext(AContext).Queue.Clear;
  TMyContext(AContext).Tag := -1;
  GetMem(TMyContext(AContext).FPacketBuffer,65536);
end;

procedure TMainFrm.MainSckDisconnect(AContext: TIdContext);
Var Client: TClientInfo;
begin
//If TMyContext(AContext).Queue.Count > 0 Then TMyContext(AContext).Queue.Clear;
TMyContext(AContext).Queue.Clear;
FreeMem(TMyContext(AContext).FPacketBuffer);
If AContext.Data <> nil Then Begin
  Client := Pointer(AContext.Data);
  Clients.Remove(Client);
  Client.Free;
  AContext.Data := nil;
End;
end; 
```

在 idtcpconnect 中调用 getmem 时会发生错误，我认为我做错了，我不确定如何为每个上下文设置一个唯一的全局变量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T00:30:56.633

`TIdTCPServer.ContextClass`确保在运行时激活服务器之前将类类型分配给属性，例如：

```
procedure TMainFrm.FormCreate(Sender: TObject);
begin
  MainSck.ContextClass := TMyContext;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T00:32:13.397

您不能将 [已创建] 对象实例的类更改为不同的类型。该对象**属于**它在创建时实例化的类。

您可以安全地将任何对象转换为它自己的类或它继承的任何类，因为该对象是该类的。在硬演员中（就像你正在做的那样），你告诉编译器你知道你在做什么，例如：

```
type
  TMyButton: TButton
  public
    FMyField: array[1..50] of byte;
  end;

var
  Button: TButton;
begin
  //next line is valid, a variable of type TButton can reference any object 
  //inheriting from TButton or a TButton instance directly
  Button := TMyButton.Create(nil);
  //next line contains a valid cast, because Button contains a reference to
  //a instance of TMyButton
  TMyButton(Button).FMyField[10] := 5;
  //valid, a TButton variable referencing a TButton instance
  Button := TButton.Create(nil);
  //next line is invalid and may cause an AV or in the worst case 
  //you may corrupt memory by doing that
  TMyButton(AButton).FMyField[20] := 5; 
end; 
```

事实上，在您的 OnConnect 事件中，您获得了一个已经创建的 TIdContext 实例（或后代类型）。

如果您希望这个对象属于您的类，您必须首先通过 ContextClass 属性请求服务器创建该类的对象。您必须在服务器的 Active 属性设置为 true 之前执行此操作。

```
procedure TMyForm.Init;
begin
  MyServer.ContextClass := TMyContext;
  MyServer.Active := True;
end; 
```

最后，如果您有对象引用，则必须在上下文构造函数中创建对象，或者如果您不想浪费内存并且不经常使用它，则添加一个后期创建机制：

```
TMyContext = class(TIdServerContext)
private
  FQueue: TIdThreadSafeList;
public
  constructor Create(AConnection: TIdTCPConnection; AYarn: TIdYarn; AList: TThreadList = nil); override;
  destructor Destroy; override;
  property Queue: TIdThreadSafeList read FQueue;
end;

constructor TMyContext.Create(AConnection: TIdTCPConnection; AYarn: TIdYarn; AList: TThreadList = nil);
begin
  inherited;
  FQueue := TIdThreadSafeList.Create(Parameters);
end;

destructor TMyContext.Destroy;
begin
  FQueue.Free;
  inherited;
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T02:23:44.127

呸呸呸呸！我正在为出了什么问题而自杀，我在想 FPacetBuffer 变量并不是每个连接都是唯一的，但是经过大量调试和注释掉代码部分后，我发现了问题，我就像 WHATTT ！！！！

在处理登录数据包数据时，我声明了一个 PChar 变量并使用 StrLCopy 将数据复制到它并检索数据的大小，然后我自己为其分配了一个空字符（这就是问题所在）。

```
Size := (Packet.BufferSize-SizeOf(TLoginPacket));
GetMem(UserName,Size);
StrLCopy(UserName, PChar(Cardinal(Packet)+SizeOf(TLoginPacket)),Size);
UserName[Size] := #0;  <--- This Line here 
```

大小变量在其中保存实际大小 + 2。

感谢所有的帮助家伙:)

# java - 为什么 string == "value" 即使它的 "value" 也返回 false？

> ID：14409577
> 
> 赞同：-2
> 
> 时间：2013-01-18T23:57:46.600
> 
> 标签：java, string, equality

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

用户发送命令“/test”以获得 2 个输出： - 如果密码错误 - 如果密码正确

正确的密码是“秘密”

为什么当用户执行“/test secret”时它仍然返回错误的密码？

```
@Override
    public void processCommand(ICommandSender sender, String[] args)
    {  
        if ( args.length == 1 )
        {      
            if ( args[0] != "secret" ) {
                sender.sendChatToPlayer("Wrong password " + sender.getCommandSenderName() );
            } else {
                sender.sendChatToPlayer("Welcome " + sender.getCommandSenderName() );
            }
        } else if ( args.length == 0 ) {
                sender.sendChatToPlayer("No parameters send");
        } else {
                sender.sendChatToPlayer("You have to give me just 1 argument");
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T23:59:03.877

因为它们是不同的实例。使用 equals() 比较字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T00:00:22.333

您应该使用`string.equals(other_string)`而不是`==`，它只检查它们是否是同一个对象。它们可能不是同一个对象，但可能仍然相等。字符串实习可能发生在两个对象相同的 Java 中*，*但这不能保证。

# android - 安卓。桌面上的 HDPI 图标，但活动上的 MDPI 图标

> ID：14409580
> 
> 赞同：0
> 
> 时间：2013-01-18T23:58:00.093
> 
> 标签：android

当我安装和运行应用程序时，我在桌面上看到大的 HDPI 图标，但是当活动开始时，我看到小的 MDPI 图标。图标有一些标记来区分它们，所以我确定我看到了什么图标。

**布局：**

```
<ImageView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/icon" 
    /> 
```

**AndroidManifest.xml**

```
<application
    android:icon="@drawable/icon"
    android:label="@string/app_name" >
... 
```

**图标：**

```
/drawable-mdpi/icon.png -> 48x48 px
/drawable-hdpi/icon.png -> 72x72 px 
```

**显示指标：**

```
DisplayMetrics{density=1.0, width=1280, height=752, scaledDensity=1.0, xdpi=160.15764, ydpi=160.0} 
```

那么，为什么需要 HDPI 才能显示在桌面上呢？我的屏幕还有 MDPI 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T00:29:07.237

您的设备屏幕的物理尺寸是多少？我感觉您的应用程序只是在屏幕兼容模式下运行。否则，您的软件包资源可能会以某种方式搞砸。通常在 Eclipse 中清理项目会解决这个问题。如果其兼容模式，请查看此页面以获取更多信息：http: [//developer.android.com/guide/practices/screen-compat-mode.html](http://developer.android.com/guide/practices/screen-compat-mode.html)

# c# - 迭代 wpf 控件

> ID：14409582
> 
> 赞同：1
> 
> 时间：2013-01-18T23:58:08.713
> 
> 标签：c#, wpf, controls, loops, visualtreehelper

我对 C# 很陌生，我又迷路了。我讨厌问这个问题，但我对理解它是如何工作的非常迷茫。我正在尝试遍历 WPF 表单上的 TextBoxes 以清除数据。
我所有的文本框都有前缀“TextBox”，它在一串6个字符之前，即（TextBox3N1W09，TextBox3N1W10 ...）。我想我想使用 VisualTreeHelper，但我不够聪明：
#1）传入一个变量。我想我了解父级，

> XAML < 网格名称="ThisGrid" >

在我的情况下，我将网格命名为：“ThisGrid”，但我不明白如何传入文本框，我不知道是否需要通过文本框的名称进行迭代并将它们作为字符串传递，或者我是否需要可以简单地让 VisualTreeHelper 查看网格中的所有文本框。
#2）一旦传入这些文本框名称或文本框对象，我不确定如何处理结果：

> {
> 将孩子返回为 T；
> }

我完全不知道“T”是什么，我该怎么处理“T”？我需要在方法中做某事还是从我调用该方法的地方做某事。就像我一开始说的，我只想清除文本框，这似乎并不难，但我玩得很开心。

```
public static T FindVisualChildByName<T>(DependencyObject parent, string name) where T : DependencyObject
{
    for (int i = 0; i < VisualTreeHelper.GetChildrenCount(parent); i++)
    {
        var child = VisualTreeHelper.GetChild(parent, i);
        string controlName = child.GetValue(Control.NameProperty) as string;
        if (controlName == name)
        {
            return child as T;
        }
        else
        {
            T result = FindVisualChildByName<T>(child, name);
            if (result != null)
                return result;
        }
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T04:06:54.723

> 我正在尝试遍历 WPF 表单上的 TextBoxes 以清除数据

这是错误的方法开始。在 WPF 中，Visual 树是一个复杂的东西，并且通过它导航也可能很复杂。相反，你应该改变你的心态：

*   WPF 最适合使用 MVVM 模式，它鼓励将应用程序逻辑和数据与表示层分离。我建议您研究这种模式，否则您会发现自己一遍又一遍地尝试在 WPF 中做“看似简单”的事情（例如清除文本框）。

*   你必须学会​​把 UI 看作不是**存储**数据的地方，而是一种**显示**数据的方式。因此，您实际要清除的字符串不是任何 UI 元素的属性，而是它们是**Model**或**ViewModel**的一部分。我建议您阅读有关 WPF 中的 MVVM 和 DataBinding 的信息。

*   此外，您将 TextBoxes 命名为 TextBox3N1W09、TextBox3N1W10 等的事实让我认为您必须展示**数据项的****集合**（这就是 MVVM 思维方式发挥作用），因此您最好使用其中一个或一个来执行此操作它的衍生物，和一个适当的. 我建议你也阅读这个概念。**`ItemsControl``DataTemplate`**

 **底线是，由于 Visual Tree 的复杂性以及诸如 Dispatcher 线程关联等其他因素，WPF 很快不鼓励对 UI 元素的操作。乍一看可能看起来很复杂，但您很快就会意识到应用正确的模式将简化你的生活。

这里有一些你可以开始阅读的文章：

[http://en.wikipedia.org/wiki/Model_View_ViewModel](http://en.wikipedia.org/wiki/Model_View_ViewModel)

[http://msdn.microsoft.com/en-us/library/ms750612.aspx](http://msdn.microsoft.com/en-us/library/ms750612.aspx)

[http://www.wpftutorial.net/](http://www.wpftutorial.net/)**

# ios - 如何为 UICollectionView 创建一个“粘性”页脚？

> ID：14409585
> 
> 赞同：8
> 
> 时间：2013-01-18T23:58:23.193
> 
> 标签：ios, ios6, uicollectionview, uicollectionreusableview

`UICollectionView`为“粘”到给定页面的屏幕边界底部的页脚提供页脚的最佳方法是什么？假设`UICollectionView`是全屏并且只有一个部分。

目前我在 中提供一个`UICollectionReusableView`对象`collectionView:viewForSupplementaryElementOfKind:atIndexPath:`，但是（正如人们所期望的那样）当我的集合的内容超出此屏幕的范围时，页脚被推到屏幕外。

我猜关键是*装饰视图*- 但我找不到任何关于这些如何工作的好的代码（非 IB）示例，而且我认为 Apple 的文档在这个特定主题上不清楚。

**更新回复：装饰视图**

在构建并尝试了*装饰视图*（[使用本教程](http://markpospesel.wordpress.com/2012/12/11/decorationviews/)）之后，我遇到了一些限制 - 即*装饰视图*对象和您的`UICollectionViewController`控制器对象之间实际上没有任何回调（*装饰视图*由一个`UICollectionViewLayout`对象管理，而不是`UICollectionViewController`目的）。看起来 Apple 非常重视*装饰视图*仅限于视觉装饰，而不是数据驱动（尽管你显然可以绕过这个）。

因此，我仍然无法找到“正确”的解决方案，但与此同时，我刚刚创建了一个静态`UIView`对象，并且只是从我的`UICollectionViewController`对象中管理它。它工作正常，但感觉不对。

**更新回复：粘性标题**

在过去的几个月里，我在各种项目中处理过类似的问题，并且最近确实找到了粘性 HEADERS 的解决方案。我认为这同样适用于页脚，但我还没有测试过。

此处有关标头的详细信息：

[如何使补充视图在 UICollectionView 中浮动，就像部分标题在 UITableView 普通样式中一样](https://stackoverflow.com/questions/13511733/how-to-make-supplementary-view-float-in-uicollectionview-as-section-headers-do-i)

实现相当繁重，但在大多数情况下似乎运行良好。

如果很快没有关于这个问题的进一步活动，我将作为副本关闭并指向上面的文章。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-06-04T16:42:13.237

基本上你需要做的是提供一个自定义`UICollectionViewLayout`子类，当边界改变时（当视图滚动边界改变时）它会失效。然后提供`UICollectionViewLayoutAttributes`补充视图，其中更新中心以拥抱集合视图的当前边界（顶部、底部、左侧、右侧等）。

我在[github](https://github.com/derrh/StickyViews)上添加了演示此策略的项目。

**更新：**从 iOS 9 开始，`UICollectionViewFlowLayout`有两个非常方便的属性可以大大简化这个任务。见`sectionHeadersPinToVisibleBounds`和`sectionFootersPinToVisibleBounds`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-06T06:58:41.077

好的..所以我尝试从下面的链接更新代码。它有效。 [https://teamtreehouse.com/community/add-sticky-footer-to-uicollectionview-in-swift](https://teamtreehouse.com/community/add-sticky-footer-to-uicollectionview-in-swift)

```
class StickyFooter : UICollectionViewFlowLayout {

var footerIsFound             : Bool = false
var UICollectionAttributes    : [UICollectionViewLayoutAttributes]?

override func shouldInvalidateLayout(forBoundsChange newBounds: CGRect) -> Bool {
    return true
}

override func layoutAttributesForElements(in rect: CGRect) -> [UICollectionViewLayoutAttributes]?
{
    UICollectionAttributes = super.layoutAttributesForElements(in: rect)

    for  attributes in UICollectionAttributes! {

        if let type = attributes.representedElementKind {

            if type == UICollectionElementKindSectionFooter
            {
                footerIsFound = true
                updateFooter(attributes: attributes)
            }
        }
    }

    if (!self.footerIsFound) {

        let newItem = self.layoutAttributesForSupplementaryView(ofKind: UICollectionElementKindSectionFooter, at : NSIndexPath(row: self.UICollectionAttributes!.count, section: 0) as IndexPath)

        UICollectionAttributes?.append(newItem!)

    }

    return UICollectionAttributes
}

override func layoutAttributesForSupplementaryView(ofKind elementKind: String, at indexPath: IndexPath) -> UICollectionViewLayoutAttributes?
{
    let attributes = UICollectionViewLayoutAttributes(forSupplementaryViewOfKind: elementKind, with: indexPath)

    attributes.size = CGSize(width: self.collectionView!.bounds.size.width, height: 75)

    if elementKind.isEqualToString(find: UICollectionElementKindSectionFooter)
    {
        updateFooter(attributes: attributes)
    }
    return attributes
}

func updateFooter(attributes : UICollectionViewLayoutAttributes){
    let currentBounds = self.collectionView?.bounds
    attributes.zIndex = 1024
    attributes.isHidden = false
    let yOffset = currentBounds!.origin.y + currentBounds!.size.height - attributes.size.height/2.0
    attributes.center = CGPoint(x: currentBounds!.midX, y: yOffset)

}} 
```

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2013-04-17T14:29:06.430

UICollectionViewController（如 UITableVC）是一个“捷径”，这两个类只是重写 UIViewController，为你创建 collectionView。

您可以轻松地做到这一点并自行添加粘性视图。

# xib - 从 XIB Viewcontroller 中的 segmentcontrol 到 Storyboard Viewcontroller

> ID：14409593
> 
> 赞同：0
> 
> 时间：2013-01-18T23:59:19.457
> 
> 标签：xib, segue

我在 xib 中创建的视图控制器（UISegmentController.h、UISegmentController.m、UISegmentController.xib）中有一个段控件。现在我正在尝试继续（理想情况下推送）到我创建的 Storyboard 视图控制器（ChartviewController.h，ChartviewController.m）。这个 Viewcontroller 将保存图像。我尝试按如下方式执行此推送：

```
-(IBAction) segmentedControlIndexChanged;
{

//some code
ChartViewController *chartviewpage = [[ChartViewController alloc] initWithNibName:@"ChartViewController" bundle:nil];
[self.navigationController pushViewController:chartviewpage animated:YES];
//some code
} 
```

我曾经将此代码实现到另一个 xib 视图控制器，它工作正常。但现在不使用故事板视图控制器。但是，我收到如下异常：

Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Could not load NIB in bundle: 'NSBundle (loaded)' with name 'ChartViewController'' *** First throw call stack: (0x15e6012 0x11b3e7e 0x15e5deb 0x53ffac 0x404e37 0x405418 0x405648 0x405882 0x405b2a 0x41cef5 0x41cfdb 0x41d286 0x41d381 0x41deab 0x41e4a3 0x41e098 0x4048 0x11c7705 0x327920 0x3278b8 0x3e8671 0x3e8bcf 0x3e86a6 0x43d597 0x43f83b 0x35716d 0x357552 0x3353aa 0x326cf8 0x22d1df9 0x22d1ad0 0x155bbf5 0x155b962 0x158cbb6 0x158bf44 0x158be1b 0x22d07e3 0x22d0668 0x32465c 0x1d0d 0x1c35) libc++abi.dylib: terminate called throwing an exception (lldb)

你能帮忙吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T22:08:22.210

我终于想通了，做更多的研究。首先，需要在他们试图转换到的情节提要中实例化控制器（ChartViewcontroller）。然后你需要给控制器一个故事板ID名称（ChartID），在选择控制器后可以在文件检查器下找到它。最后执行推送到新控制器。

希望这可以帮助某人。

UIStoryboard * myStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil]; ChartViewController *chartpage = [myStoryboard instantiateViewControllerWithIdentifier:@"ChartID"];

// 将选中的对象传递给新的视图控制器。[self.navigationController pushViewController:chartpage Animation:YES];

# jquery - 如果 SELECT LIST 包含特定值，则 JQUERY 自动隐藏它

> ID：14409594
> 
> 赞同：-1
> 
> 时间：2013-01-18T23:59:22.960
> 
> 标签：jquery

```
<select name="productsize" id="productsize">
    <option value="">1</option>
    <option value="">xxx</option>
</select> 
```

如果包含“xxx”作为选项之一，jQuery 如何隐藏此 SELECT 列表？

是否可以？

## 更新：

以上只是一个例子，ROB 回答了它，它确实有效。但在我的情况下，这个选择列表首先是由另一个 jquery 函数生成的。

就是这个：

```
<script type="text/javascript"><!--
function GetAvailProductSizes() {
    $('select#productsize option').remove();
    $('select#productsize').append('<option value=""><? echo $langdata['oneprodpage_selectsize']; ?>...</option>');

    var color = $('#productcolor').val();
    if (color > 0) {
        var availsizes;
        var http_request = new XMLHttpRequest();
        http_request.open( "GET", '<? echo ROOT; ?>/autocompleteavailsizes/?productid=<? echo $thisproduct['id']; ?>&color=' + color, true );
        http_request.send(null);
        http_request.onreadystatechange = function () {
            if ( http_request.readyState == 4 ) {
                if ( http_request.status == 200 ) {
                    availsizes = eval( "(" + http_request.responseText + ")" );
                    $('select#productsize').show();

                    for (var i = 0; i < availsizes.length; i++) {
                        $('select#productsize').append('<option value="' + availsizes[i].id + '">' + availsizes[i].name + '</option>');
                    };
                } else {
                    alert( "There was a problem with the URL." );
                }
                http_request = null;
            }
        };
    };
} 
```

//-->

我试过这个：

```
<script type="text/javascript"><!--
function GetAvailProductSizes() {
    $('select#productsize option').remove();
    $('select#productsize').append('<option value=""><? echo $langdata['oneprodpage_selectsize']; ?>...</option>');

    var color = $('#productcolor').val();
    if (color > 0) {
        var availsizes;
        var http_request = new XMLHttpRequest();
        http_request.open( "GET", '<? echo ROOT; ?>/autocompleteavailsizes/?productid=<? echo $thisproduct['id']; ?>&color=' + color, true );
        http_request.send(null);
        http_request.onreadystatechange = function () {
            if ( http_request.readyState == 4 ) {
                if ( http_request.status == 200 ) {
                    availsizes = eval( "(" + http_request.responseText + ")" );
                    $('select#productsize').show();
                    $('select#productsize option').each(function() {
                        if ($(this).text() == '-') {
                            $('select#productsize').hide();
                        }
                    });
                    for (var i = 0; i < availsizes.length; i++) {
                        $('select#productsize').append('<option value="' + availsizes[i].id + '">' + availsizes[i].name + '</option>');
                    };
                } else {
                    alert( "There was a problem with the URL." );
                }
                http_request = null;
            }
        };
    };
} 
```

//-->

但它不工作......

哦，是的，我的选择列表有样式**显示：无**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T00:02:07.530

非常坦率的...

```
$('#productsize option').each(function() {
    if ($(this).text() == 'xxx') {
        $('#productsize').hide();
    }
}); 
```

[http://jsfiddle.net/uRAsu/](http://jsfiddle.net/uRAsu/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T00:05:00.277

```
$('select:has(option:contains("xxx"))').hide(); 
```

或者：

```
$('#productsize option').filter(function(){
   var t = this.textContent || this.innerText;
   return t === 'xxx'; 
}).parent().hide(); 
```

[http://jsfiddle.net/Vz7gY/](http://jsfiddle.net/Vz7gY/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T00:08:12.773

Rob 答案的替代方法是检查从此选择器中选择的元素数量。

```
if($('#productsize option[value="xxx"]').length) {
    $('#productsize').hide();
} 
```

这假设您设置每个选项的 value 属性而不是内部文本。

# android - Android操作栏位置和蓝线？

> ID：14409595
> 
> 赞同：1
> 
> 时间：2013-01-18T23:59:39.970
> 
> 标签：android, location, android-actionbar

我制作了一个操作栏菜单文件并将其添加到我的活动中。问题是它在错误的地方。这是我在 android 开发者网页上找到的图片：

![在此处输入图像描述](../Images/bd038d91b63e191e432fa54dfbe44819.png) 在标准情况下，操作栏位于位置 1。当 ia 在我的清单中添加类似 'uiOptions="splitActionBarWhenNarrow"' 的行时，该栏会转到位置 3。无论如何，我怎样才能让它坚持到位置 2？

另外，他们是如何得到操作栏下的那条蓝线的？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T00:02:45.103

您无法更改拆分操作栏的功能，它在*拆分*时位于底部。位置 2 指的是操作栏选项卡，而不是拆分操作栏。

此外，“蓝线”是操作栏主题的一部分，您可以对其进行扩展。[这个](https://stackoverflow.com/questions/11824627/change-line-color-in-tabs-actionbarsherlock)SO answer 专门讨论了更改选项卡颜色，并提供了一个有用的[网站](http://jgilfelt.github.com/android-actionbarstylegenerator/#name=Test&compat=holo&theme=light&actionbarstyle=transparent&backColor=E4E4E4,100&secondaryColor=D6D6D6,100&tertiaryColor=F2F2F2,100&accentColor=33B5E5,100)来自定义有关栏的所有内容。

# javascript - 如果单击了非默认单选按钮，则隐藏下拉框

> ID：14409597
> 
> 赞同：0
> 
> 时间：2013-01-18T23:59:48.520
> 
> 标签：javascript, asp-classic, onchange

我发誓我会学习更多的 JavaScript ......

我有这个页面（它实际上是另一个 ASP 页面中的包含文件，但我复制了正确的 HTML 并制作了它，因此它会自行加载以用于我的测试目的）：

[FO 样品](http://www.fromnaturewithlove.com/includes/samples-new.asp)

这就是他们第一次加载它时应该显示的方式。如果他们选择其他单选按钮之一，它应该隐藏 2 个下拉框。使用此代码（我从其他人的问题中发现的），它的工作。

```
<script type="text/javascript">
    function ChangeDropdowns(value) {
        if (value == "0") {
            document.getElementById('SAMPLEDROPDOWN').style.display = 'block';
        } 
        else  {
            document.getElementById('SAMPLEDROPDOWN').style.display = 'none';
        }        
    }
</script> 
```

但是如果他们回到“我想自己挑选！”，我不知道如何让它再次向他们展示。收音机。**SAMPGROUP**的值是该样本类别组的数据库中的 ID。所以它不一定按数字顺序，它可能会跳过#（如果我们删除一个类别或其他东西）。基本上，如果 SAMPGROUP = 0 则它应该显示下拉列表，而不是其他任何东西！

我尝试将我的代码更改为这个（95 是 SAMPGROUP 的“Autumm”选项的值），但它似乎没有什么不同。

```
<script type="text/javascript">
    function ChangeDropdowns(value) {
        if (value == "0") {
            document.getElementById('SAMPLEDROPDOWN').style.display = 'block';
        } else if (value == "95") {
        document.getElementById('SAMPLEDROPDOWN').style.display = 'none';
    }
    else  {
        document.getElementById('SAMPLEDROPDOWN').style.display = 'none';
    }        
    }
</script> 
```

任何帮助将不胜感激！！

马哈洛！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T02:18:45.130

在调用函数 ChangeDropdowns 时，您可能没有将任何值传递给参数“value”。请确保您传递 ChangeDropdowns(0) 等值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T02:40:32.267

您没有在 onchange 事件中设置“值”，因此它永远不会等于 0。尝试更改：

```
<input type="radio" name="SAMPGROUP" value="0" OnChange="Javascript:ChangeDropdowns()" checked /> 
```

到

```
<input type="radio" name="SAMPGROUP" value="0" OnChange="Javascript:ChangeDropdowns(0)" checked /> 
```

这是[小提琴](http://jsfiddle.net/KBxRn/)。

祝你好运。

# iphone - 从 UIAlertview 中的自定义 UITextfields 获取内容

> ID：14409599
> 
> 赞同：-1
> 
> 时间：2013-01-18T23:59:54.283
> 
> 标签：iphone, objective-c, xcode, uitextfield, uialertview

得到以下代码：

```
-(void)addGrade {

    UIAlertView *alertview = [[UIAlertView alloc] initWithTitle:@"Text" message:@"\n \n \n" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Add", nil];

    // Textfield1

    UITextField *utextfield = [[UITextField alloc] initWithFrame:CGRectMake(12.0, 50.0, 260.0, 25.0)];

    [utextfield becomeFirstResponder];

    UIView *paddingView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 5, 20)];

    utextfield.leftView = paddingView;
    utextfield.leftViewMode = UITextFieldViewModeAlways;

    utextfield.placeholder = @"Subject";
    [utextfield setBackgroundColor:[UIColor whiteColor]];
    utextfield.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
    [alertview addSubview:utextfield];

    // Textfield2

    UITextField *ptextfield = [[UITextField alloc] initWithFrame:CGRectMake(12.0, 85.0, 90.0, 25.0)];

    ptextfield.placeholder = @"Another Subject";
    ptextfield.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
    ptextfield.textAlignment = NSTextAlignmentCenter;

    [ptextfield setBackgroundColor:[UIColor whiteColor]];
    [alertview addSubview:ptextfield];

    // Textfield3

    UITextField *ctextfield = [[UITextField alloc] initWithFrame:CGRectMake(161.0, 85.0, 27.0, 25.0)];

    ctextfield.placeholder = @"3";
    [ctextfield setBackgroundColor:[UIColor whiteColor]];
    ctextfield.contentVerticalAlignment = UIControlContentHorizontalAlignmentCenter;
    ctextfield.textAlignment = NSTextAlignmentCenter;
    [alertview addSubview:ctextfield];

    // Label1

    UILabel *telt = [[UILabel alloc] initWithFrame:CGRectMake(121.0, 85.0, 40.0, 25.0)];

    telt.text = @"Text";
    telt.textColor = [UIColor whiteColor];
    telt.backgroundColor = [UIColor clearColor];
    [alertview addSubview:telt];

    // Label2

    UILabel *keermee = [[UILabel alloc] initWithFrame:CGRectMake(199.0, 85.0, 100.0, 25.0)];

    keermee.text = @"more text";
    keermee.textColor = [UIColor whiteColor];
    keermee.backgroundColor = [UIColor clearColor];
    [alertview addSubview:keermee];

    [alertview show];

}

-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {

    NSString *title = [alertView buttonTitleAtIndex:buttonIndex];

    if ([title isEqualToString:@"Add"])
    {
        UITextField *field = (UITextField *)[[alertView subviews] lastObject];
        NSLog (@"%@", field.text);

    }

} 
```

此代码在 UIAlertView 中生成 3 个文本字段和 2 个标签。

随着`UITextField *field = (UITextField *)[[alertView subviews] lastObject];`我回来了“更多文字”，这是真的，因为您正在询问最后一个对象。

现在我的问题是如何获取所有 UITextfield 的内容而不仅仅是标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T16:43:19.217

分配标签并用它们检索它们。

```
myTextField.tag = 100; 
```

然后找到它使用这个函数：

```
myTextField = [view subviewWithTag: 100]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T15:35:50.180

```
for (UIView *view in [alertView subviews]){
    if ([view isMemberOfClass:[UITextField class]]){
        UITextField *textField = (UITextField *)view;

        NSLog(@"%@", textField.text);

    }
} 
```

# cluster-analysis - 非数字维度上的聚类

> ID：14409600
> 
> 赞同：3
> 
> 时间：2013-01-18T23:59:56.407
> 
> 标签：cluster-analysis, k-means

我最近开始研究聚类和 k-means 算法，并试图提出一个好的用例并解决它。

我有以下关于在不同城市销售的物品的数据。

物品城市

第 1 项纽约
第 2 项夏洛特
第 1 项旧金山
...

我想根据变量 city 和 item 对数据进行聚类，以查找可能对所售商品具有相似模式的城市组。问题是我使用的 k-means 不接受非数字输入。任何想法我应该如何继续寻找有意义的解决方案。

谢谢 SV

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T18:20:27.220

聚类需要距离定义。如果根据某个距离函数，项目“更接近”，则集群只是一个集群。它们越接近，它们属于同一个集群的可能性就越大。

在您的情况下，您可以尝试根据与城市相关的各种数据（例如其地理坐标或人口统计信息）进行聚类，并查看聚类在各种情况下是否重叠！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T09:51:12.820

为了让 k-means 产生可用的结果，这些**均值必须是有意义的**。

即使您会使用二进制向量，恕我直言，这些上的 k-means 也没有多大意义。

开始使用 k-means 的最佳用例可能是颜色量化。拍照，并将每个像素的 RGB 值用作 3d 向量。然后以 k 作为所需颜色数运行 k-means。颜色中心是您的最终调色板，每个像素都将映射到最近的中心以减少颜色。

这与 k-means 一起工作的原因有两个：

*   平均值实际上对于找到多个像素的平均颜色是有意义的
*   轴 R、G 和 B 具有相似的含义和比例，因此没有偏差

如果你想超越，尝试做同样的事情，例如在 HSB 领域。如果你想让它变得非常好，你会遇到困难。因为色调值是循环的，与均值不一致。假设色调在 0-360 度，那么“1”和“359”的“平均”色调*不是*180 度，而是 0。所以在这个数据上，k-means 的结果将是次优的。

参见例如[https://en.wikipedia.org/wiki/Color_quantization](https://en.wikipedia.org/wiki/Color_quantization)以了解详细信息以及此处关于稀疏和二进制数据的两打 k-means 问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T00:17:09.867

您可能仍需要以数字形式抽象地表示您的数据。这可能会有所帮助

[http://www.analyticbridge.com/forum/topics/clustering-with-non-numeric?commentId=2004291%3AComment%3A40805](http://www.analyticbridge.com/forum/topics/clustering-with-non-numeric?commentId=2004291%3AComment%3A40805)

尝试再次重新分析问题并了解是否有任何关系可以利用并以数字形式表示。我在一个项目中工作，我必须用它们的 RGB 值来表示颜色。它工作得很好。

希望这可以帮助

# maven-3 - pom.xml 设置父项目的版本

> ID：14409603
> 
> 赞同：1
> 
> 时间：2013-01-19T00:00:11.430
> 
> 标签：maven-3

在我们的 pom.xml 中，我需要将父项目的版本设置为环境变量：

例子：

```
 <parent>
     <groupId>edu.university.se.se_parent_project</groupId>
     <artifactId>SE_ParentProject</artifactId>
     <version>${parent.version}</version>  
     <relativePath>../SE_ParentProject/pom.xml</relativePath>
   </parent> 
```

我怎么做？

使用 ${parent.version} 给我这个错误： [错误] 不可解析的父 POM：无法从/到中央传输工件 edu.university.se.se_parent_project:SE_ParentProject:pom:${parent.version}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:28:20.727

替换`${parent.version}`为`${env.PARENT_VERSION}`并将此环境变量添加到您的操作系统

```
PARENT_VERSION=1.0.0-SNAPSHOT 
```

# pyqt - 使用 Mayavi 查看器安装 FiPy 的 pip 问题

> ID：14409604
> 
> 赞同：0
> 
> 时间：2013-01-19T00:00:12.520
> 
> 标签：pyqt, pip, homebrew, mayavi, fipy

在 OSX 10.8.2 上使用 pip 和 brew 安装 Python 2.7.3 安装了 FiPy，我运行了以下示例测试代码：

```
from fipy import *
mesh = Grid3D(nx=50, ny=100, nz=10, dx=0.1, dy=0.01, dz=0.1)
x, y, z = mesh.cellCenters
xyzVar = CellVariable(mesh=mesh, name=r"x y z", value=x * y * z)
k = Variable(name="k", value=0.)
viewer = MayaviClient(vars=numerix.sin(k * xyzVar), limits={'ymin': 0.1, 'ymax': 0.9}, datamin=-0.9, datamax=2.0, title="MayaviClient test")
for kval in range(10):
   k.setValue(kval)
   viewer.plot()
viewer._promptForOpinion() 
```

这产生了以下错误：

```
File "/usr/local/lib/python2.7/site-packages/pyface/qt/__init__.py", line 17, in prepare_pyqt4 
sip.setapi('QString', 2)
ValueError: API 'QString' has already been set to version 1 
```

我决定通过在 prepare_pyqt4 中注释掉 sip.setapi('QString', 2) 和 sip.setapi('QVariant', 2) 来看看我能走多远。这个简单的 hack 通过了版本控制问题，但提出了一个新问题。

```
File "/Library/Python/2.7/site-packages/fipy/viewers/mayaviViewer/mayaviDaemon.py", line 79, in <module>
from enthought.mayavi.plugins.app import Mayavi
ImportError: No module named enthought.mayavi.plugins.app 
```

现在看来 FiPy Mayavi 查看器缺少一个模块。

我认为我的站点包也应该都在同一个位置。看起来 pip 安装到 /Library/Python/2.7/site-packages 而 brew 安装到 /usr/local/lib/python2.7/site-packages，我必须解决一些问题（我认为问题出在 pip 上）。

我的问题是如何获得一个干净的 FiPy 安装与 Mayavi 一起工作（不产生这些错误）并修复我的站点包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:01:33.060

我不确定是什么导致了你的问题。我在 Mac OS X 10.6.8 下运行 Homebrew 安装，Mayavi 为我工作（包括您的示例脚本）。我在[http://matforge.org/fipy/wiki/InstallFiPy/MacOSX/HomeBrew描述了我的安装过程](http://matforge.org/fipy/wiki/InstallFiPy/MacOSX/HomeBrew)

我能猜到的唯一问题是你说你的 pip 安装到`/Library/Python/2.7/site-packages`. 我猜你正在使用系统 python 而不是 brew 安装的。上次我这样做时，我不得不这样做`brew install python`，`easy_install pip`但是[https://github.com/mxcl/homebrew/wiki/Homebrew-and-Python](https://github.com/mxcl/homebrew/wiki/Homebrew-and-Python)听起来就像你现在用酿造的 python 自动获得 pip 一样。

尝试做

*   `which python`
*   `which easy_install`
*   `which pip`

# javascript - V8 javascript 引擎有 GIL 吗？

> ID：14409609
> 
> 赞同：11
> 
> 时间：2013-01-19T00:01:04.067
> 
> 标签：javascript, v8

我读到 V8 Javascript 引擎是一个即时编译器。PyPy 是一个 Python 解释器，也是一个即时编译器。PyPy 以在存在多个线程的情况下具有 GIL 而闻名。

V8 Javascript 引擎是否有类似于全局解释器锁 (GIL) 的东西来处理 Web 工作线程？

并且所有动态语言在处理多核时都有问题吗？如果是这样，为什么 JIT 编译器会在 GIL 上出现问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-19T00:18:10.003

Chromium Web Workers 是在 V8 Isolates 之上实现的。每个 Isolate 本质上都是一个完全独立的 V8 VM 实例。许多 Isolate 可以在同一个进程中共存并同时执行 JavaScript 代码。

然而，在任何给定时刻，每个 Isolate 只能由单个线程拥有。**嵌入器必须**使用Isolate 级别的锁定机制来确保对 Isolate 的独占访问。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-10T00:04:56.887

要回答您的最后一个问题，我认为 GIL 不一定必须存在于动态解释或 JIT 编译语言中。例如，PyPy 已经完成了一些使用软件事务内存消除 GIL 的初步工作。PyPy 和 CPython 拥有 GIL 的事实更多地与它们历史上较早做出的设计决策以及它们的内部数据结构不是线程安全的事实有关。

# ruby - 有没有办法在 Ruby 中创建临时命名空间和常量？

> ID：14409614
> 
> 赞同：0
> 
> 时间：2013-01-19T00:01:29.710
> 
> 标签：ruby, oop, object, object-oriented-analysis

我有一堂课：

```
class MyClass
  def self.say_hello
    puts "hello"
  end
end 
```

我想创建一个进程来临时覆盖类及其方法：

```
begin "a temporary namespace, constants, variables and methods within this code"
  Thread.current[:neverland] = -> do
    Object.instance_exec do
      class MyClass
        def self.say_hi
          puts "hi"
        end
      end

      MyClass.say_hi
      MyClass.say_hello
    end
  end
end

> Thread.current[:neverland].call
=> "hi"
=> "hello"

> MyClass.methods - Object.methods
=> ["say_hello"]

> MyClass.say_hi
=> undefined method `say_hi' for MyClass:Class (NoMethodError) 
```

Ruby中有这样的东西还是我只是在做梦？无污染的命名空间、临时常量、方法、命名空间、类。干净、专注和优化的代码，没有太多干扰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T01:34:22.033

您可能正在考虑计划在 Ruby 2.0 中发布的类似[Refinements的东西。](http://blog.headius.com/2012/11/refining-ruby.html)

在那之前，你必须要有创造力。

# git - GIT相同的存储库不同机器上的不同分支

> ID：14409616
> 
> 赞同：2
> 
> 时间：2013-01-19T00:01:47.357
> 
> 标签：git

我在 linux 服务器上创建了一个 git 存储库。在更长的时间里，我独自工作，一切都很好。当一个朋友加入时，他抱怨他只能看到 master 分支。我也在我的机器上检查了这个，我也在 VMWare 中运行 ubuntu 实例，确实如此。更让我困惑的是，我能够从 ubuntu 机器推送一个新分支，该分支仅在 ubuntu 客户端内部可见，但在 Windows 客户端上不可见。

所以我面临的问题是从两台（在我的情况下是逻辑上）独立的机器，但是针对同一个存储库，我看到不同的分支

我最初在 Windows 上使用 Git bash 推送分支，如果我在那里运行***git branch -r***我得到：

```
origin/HEAD -> origin/master
origin/develop
origin/develop2
origin/master 
```

在 ubuntu ***git branch -r***我得到

```
origin/HEAD -> origin/master
origin/develop3
origin/master 
```

我可以随心所欲地做***git fetch***，只是事情就像他们正在针对单独的 repo 工作（除了共享的 master 分支）。可能是我以某种方式错误配置了 git 服务器，或者可能是密钥问题，不确定，需要建议，谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T00:12:33.783

请注意，这`git branch -r`只会列出存储在本地存储库中的远程分支。因此，这并不一定意味着这些分支像远程存储库本身那样存在。但是，默认情况下，`git fetch`它将从远程存储库中获取所有分支并将远程引用添加到本地存储库中。因此，您也将拥有远程本地存在的所有分支。

然而，没有做`git fetch`的是清理创建但稍后从远程存储库中删除的远程分支。为此，请使用`git fetch origin --prune`. 这将使 Git 更新远程存储库的远程分支列表。

因此，如果分支稍后被移除，您会注意到它。如果这不会使远程分支列表同步，那么很可能您的远程存储库实际上并不相同。您可以使用`git remote -v`获取远程配置列表，并仔细检查两台机器上的配置是否相同。

# javascript - 如果网络浏览器用户修改 Javascript 并执行它（例如从控制台），它是否违反同源策略？

> ID：14409620
> 
> 赞同：1
> 
> 时间：2013-01-19T00:02:17.487
> 
> 标签：javascript, html

例如：服务器呈现一个页面，然后用户使用 Javascript 控制台对使用相同协议的同一主机进行 Ajax 调用。是否违反同源政策？

后续问题 - 如果上述情况不违反同源政策，有没有办法确保网络浏览器从我的主机执行真正的、未经修改的 Javascript？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T00:03:54.310

No and No. 无法知道用户是否更改了代码。我什至不需要控制台。我可以劫持 http 响应并提供不同的文件。这就是为什么您需要验证服务器上的所有内容。

# android - Android：用户名的输入类型是什么

> ID：14409622
> 
> 赞同：14
> 
> 时间：2013-01-19T00:02:24.420
> 
> 标签：android, android-layout

我的`xml`布局上有一个编辑文本，允许用户输入他的用户名，如下所示：

```
<EditText
                android:id="@+id/etUsername"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:inputType=""
                /> 
```

我应该使用哪种类型`inputType`让用户输入他的用户名，用户名只包含字母小写字母和大写字母和数字

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-19T00:15:19.213

我是否可以建议[`textVisiblePassword|textNoSuggestions`](http://developer.android.com/reference/android/text/InputType.html#TYPE_TEXT_FLAG_NO_SUGGESTIONS)它为您提供带有显示数字选项的普通键盘，但摆脱了 Android 建议（在输入用户名时它们毫无用处）。

**编辑：**

正如 Hailwood 所指出的，一些用户可能会喜欢 Android 键盘提供的建议带来的额外好处。经过对此事的思考，也许一个标准`text`可能更适合这种情况。

这真的是一个用户体验问题，你必须在这里做出选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T00:18:12.157

我会推荐`android:inputType="textVisiblePassword|textNoSuggestions"`一些 IME/Android 版本组合似乎忽略`textNoSuggestions`但不是`textVisiblePassword`。如果在某些 IME 上留下建议，则会自动插入空格或其他标点符号并自动大写文本，这可能会导致登录失败。

# java - 在 aspx 表单中查找直接链接或使用 android 读取表单

> ID：14409623
> 
> 赞同：1
> 
> 时间：2013-01-19T00:02:40.103
> 
> 标签：java, android, asp.net, html

我每天访问[此](http://timeplan.uia.no/swsuiagrv/public/no/default.aspx)链接以查找我在学校的讲座。每次我必须向下滚动列表以找到我自己的课程，然后发布它以便我可以查看结果。有什么办法可以直接链接到首选内容？我希望在 Android 中创建一个简单的 webview 应用程序，显示单个表单类别。

编辑：实际上任何将 aspx 信息转换为另一种格式的方法都可以解决问题。最好是每个表单项的直接链接。但是，如果我可以将每个项目转换为 .xml 文件或其他任何我可以使用的文件。但我必须让它自动化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T00:10:49.260

您可以捕获传出请求并编写一个简单的应用程序将数据 POST 回页面。[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.80%29.aspx)类对此很有用。

查看 Chrome 开发者工具中的请求，我看到表单回发到自身，然后重定向到结果页面。据推测，您应该将表单数据 POST 到初始页面，这将导致它执行重定向。

该表单包含大量 ViewState 数据，这些数据可能需要也可能不需要包含在请求中以使其工作。

一种完全不同的方法是找到一个浏览器扩展程序，例如宏记录器，它可以模拟您的操作。[这个插件](http://www.addictivetips.com/internet-tips/macro-recorder-plugin-for-google-chrome/)（我自己没有尝试过）似乎正是这样做的。

# javascript - jquery/javascript 通过循环一个接一个地设置多个超时以独立于另一个运行

> ID：14409626
> 
> 赞同：0
> 
> 时间：2013-01-19T00:02:51.777
> 
> 标签：javascript, jquery, settimeout

我正在尝试为少数 DIV 设置动画以向上滚动，但我希望一个在一个又一个暂停后向上滚动。我现在能想到的最好的就是

```
$('.curtain').each(function()
{
    var $elem = $(this);
    setTimeout(function()
    {
        $elem.animate({"height":0+'px'}, 2000);
    }, 1000);
}); 
```

问题是它们仍然没有停顿地一起动画。我怎么能以这种方式做某事。div 是动态生成的，其中可以有 5 - 20 个，所以硬编码逻辑已经过时了，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T00:24:40.960

```
function animateIt () {
    var elems = $('.curtain').get();
    (function next() {        
        if(elems.length){
            var elem = $(elems.shift());
            elem.animate({"height":0+'px'}, 2000, next);
        }
    })();
}
animateIt(); 
```

[运行示例](http://jsfiddle.net/MELPQ/)

另一种方式，如队列

```
function animateIt () {
    var divs = $('.curtain');
    divs.each( function(){
        var elem = $(this);
        $.queue(divs[0],"fun", function(next) { elem.animate({"height":0+'px'}, 2000, next); });               
    });
    divs.eq(0).dequeue("fun");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T00:09:27.993

看起来一个简单的递归函数可能对你有用 -

```
function doAnimation(elapsed){
  var iterations = $('.curtain').length;
  var current = elapsed+1;
  if (current <= iterations){
   setTimeout(function(){
      $('.curtain:eq(' + elapsed + ')').animate(...);
      doAnimation(current);
    },50);
  }
}

doAnimation(0); 
```

### [这是一个简单的演示](http://jsfiddle.net/khZYf/1/)

# javascript - 为什么这个分页不起作用

> ID：14409627
> 
> 赞同：0
> 
> 时间：2013-01-19T00:02:52.387
> 
> 标签：javascript, jquery

我一直在尝试对从我网站上的目录中提取的图像列表进行分页。我已经成功了，因为 div 中的“一、二、三..十六”文本分页。但是，所有图像（大约 50 张）都同时加载并跳过分页。

这是我的脚本的加载顺序还是我需要重新考虑如何从另一个目录中提取图像？

我正在使用这个分页插件 - [http://th3silverlining.com/2010/04/15/pajination-a-jquery-pagination-plugin/](http://th3silverlining.com/2010/04/15/pajination-a-jquery-pagination-plugin/)

**查询脚本**

```
<script>
$(document).ready(function() {
    $('.fancybox').fancybox();
    $.ajax({
        url: "user-uploads-thumbnails",
        success: function(data){
            var imageNames = [];
            $(data).find("a:contains(.jpg)").each(function(){
                // store each image name into array
                imageNames.push($(this).attr("href"));
               });

            var sortedImageNames = imageNames.sort();

            for(var i = sortedImageNames.length; i-- > 0;) {
                    var linkImage = 'user-uploads/' + sortedImageNames[i];
                    var thumbnailImage = 'user-uploads-thumbnails/' + sortedImageNames[i];
                    var item = '<li><a class="fancybox" href="' 
                        + linkImage 
                        + '" data-fancybox-group="gallery"><img class=dropshadow src="' 
                        + thumbnailImage 
                        + '"></a></li>';
                    $(item).appendTo('.alt_content');
                }
            $('.fancybox').fancybox();
            }
        });
    });
    $('#paging_container3').pajinate({
                    items_per_page : 5,
                    item_container_id : '.alt_content',
                    nav_panel_id : '.alt_page_navigation'   
                })

</script> 
```

**DIV 我正在尝试分页**

```
 <div id="paging_container3" class="container">
            <h2>Custom List Size</h2>
            <div class="alt_page_navigation"></div>
            <ul class="alt_content">
                 <li><p>One</p></li> 
                 <li><p>Two</p></li> 
                 <li><p>Three</p></li> 
                 <li><p>Four</p></li> 
                 <li><p>Five</p></li> 
                 <li><p>Six</p></li> 
                 <li><p>Seven</p></li> 
                 <li><p>Eight</p></li> 
                 <li><p>Nine</p></li> 
                 <li><p>Ten</p></li> 
                 <li><p>Eleven</p></li> 
                 <li><p>Twelve</p></li> 
                 <li><p>Thirteen</p></li> 
                 <li><p>Fourteen</p></li> 
                 <li><p>Fifteen</p></li> 
                 <li><p>Sixteen</p></li> 
            </ul>   
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T02:24:09.820

把你的 `$('#paging_container3').pajinate();` 函数放在函数里面`$(document).ready();`。

`#paging_container3`我相信，pajinate 代码是在加载之前执行的。

# android - 使用操作栏的选项卡

> ID：14409629
> 
> 赞同：0
> 
> 时间：2013-01-19T00:03:04.947
> 
> 标签：android, android-fragments, android-actionbar

我对操作栏很陌生，我想通过使用 min sdk 14 和 target sdk 16 使用操作栏选项卡和片段制作简单的应用程序。

这是片段类

```
public class Tab1fragment extends Fragment{

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub

    return inflater.inflate(R.layout.fragmenttab, container,false);

    }
} 
```

这是tablistener类

```
public class tabslistener implements ActionBar.TabListener{

    Fragment _fragment;
    boolean check=true;

    public tabslistener(Fragment _fragment)
    {
        this._fragment=_fragment;
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

        if(check)
        {
            ft.add(R.id.Fragment1, _fragment,null);
            check=false;
        }
        else
        {
            ft.attach(_fragment);
        }

    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub
        ft.detach(_fragment);
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }

} 
```

这是我的主要课程

```
public class NextActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        ActionBar actionbar=getActionBar();
        actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        Fragment fragment=Fragment.instantiate(this, Tab1fragment.class.getName());
        tabslistener tablistener=new tabslistener(fragment);
        ActionBar.Tab tab1=actionbar.newTab().setTabListener(tablistener);
        actionbar.addTab(tab1);

    } 
```

这是我在 logcat 中遇到的错误

```
01-19 01:40:40.078: E/AndroidRuntime(725): FATAL EXCEPTION: main
01-19 01:40:40.078: E/AndroidRuntime(725): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.tabs/com.example.tabs.NextActivity}: java.lang.IllegalArgumentException: No view found for id 0x7f070001 for fragment Tab1fragment{416511c8 #0 id=0x7f070001}
01-19 01:40:40.078: E/AndroidRuntime(725):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
01-19 01:40:40.078: E/AndroidRuntime(725):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
01-19 01:40:40.078: E/AndroidRuntime(725):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
01-19 01:40:40.078: E/AndroidRuntime(725):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
01-19 01:40:40.078: E/AndroidRuntime(725):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-19 01:40:40.078: E/AndroidRuntime(725):  at android.os.Looper.loop(Looper.java:137)
01-19 01:40:40.078: E/AndroidRuntime(725):  at android.app.ActivityThread.main(ActivityThread.java:4424)
01-19 01:40:40.078: E/AndroidRuntime(725):  at java.lang.reflect.Method.invokeNative(Native Method)
01-19 01:40:40.078: E/AndroidRuntime(725):  at java.lang.reflect.Method.invoke(Method.java:511)
01-19 01:40:40.078: E/AndroidRuntime(725):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-19 01:40:40.078: E/AndroidRuntime(725):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-19 01:40:40.078: E/AndroidRuntime(725):  at dalvik.system.NativeStart.main(Native Method)
01-19 01:40:40.078: E/AndroidRuntime(725): Caused by: java.lang.IllegalArgumentException: No view found for id 0x7f070001 for fragment Tab1fragment{416511c8 #0 id=0x7f070001}
01-19 01:40:40.078: E/AndroidRuntime(725):  at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:822)
01-19 01:40:40.078: E/AndroidRuntime(725):  at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1032)
01-19 01:40:40.078: E/AndroidRuntime(725):  at android.app.BackStackRecord.run(BackStackRecord.java:622)
01-19 01:40:40.078: E/AndroidRuntime(725):  at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1382)
01-19 01:40:40.078: E/AndroidRuntime(725):  at android.app.Activity.performStart(Activity.java:4474)
01-19 01:40:40.078: E/AndroidRuntime(725):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1929) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T10:35:25.013

> 这是我在 logcat 中遇到的错误

出现该错误是因为您尝试执行事务以将片段（`Tab1fragment`）添加到无法找到的视图（具有 id 的视图`R.id.Fragment1`）。我不知道您发布的是否是完整代码，但似乎带有 id 的视图`R.id.Fragment1`位于`Tab1fragment`的布局文件中，`R.layout.fragmenttab`. 如果是这种情况，请不要这样做，而是应该为已经在`Activity`. 例如，您可以使 的内容`NextActivity`变得简单`FrameLayout`，并将其用作选项卡内容的容器：

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        FrameLayout fl = new FrameLayout(this);
    fl.setId(1000);
    setContentView(fl);
   //... 
```

并将`1000`id 用于片段添加事务：

```
 @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

        if (check) {
            ft.add(1000, _fragment, null);
            check = false;
        } else {
            ft.attach(_fragment);
        }

    } 
```

# jquery - 遍历所有子元素并删除所有样式

> ID：14409631
> 
> 赞同：3
> 
> 时间：2013-01-19T00:03:11.350
> 
> 标签：jquery

我有一个共享点站点，它让我发疯，试图删除所有垃圾代码，以便我可以应用我的设计。我很好奇 jquery 是否可以从包含 div 的所有元素中删除所有 css？

例如，如何使用 jquery 从这个 html 中去除所有 css 格式？

```
<div id="myID" > 
    <span class="myClass1">
        <span class="myClass2"></span> 
    </span> 
    <span class="myClass3">
        <ul class="myClass4" style="padding-left:100px;">
            <li>item</li>
        </ul>
    </span> 
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T00:07:56.450

试试这个（[更新最后一次演示](http://jsfiddle.net/7L7va/3/)）（感谢 Fabrício 的指针）：

```
$('#myID [style]').removeAttr('style'); 
```

这将剥离 的唯一子节点的任何内联样式属性`<div id="myID">`，并保持其他所有内容不变（删除这些节点上的类可能会产生除样式之外的其他效果）。您可以定义一些仅适用于子节点的CSS，`<div id="myID">`例如 CSS 重置。这可能看起来像这样：

```
#myID * {
  border: thin red solid;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T00:18:37.057

要剥离所有的 css，我认为你必须删除所有的`style` `class`和`id`属性。

这是我的[**演示**](http://jsfiddle.net/QUYSu/)

此 Javascript 删除样式属性和类

```
$("#myID *").removeAttr("style");
$("#myID *").each(function(){
    $(this).removeClass($(this).attr("class"));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T00:08:14.800

尝试 ：

```
$('#myID').find('*').attr('class', ''); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-27T14:41:22.483

其他答案对我来说的问题是，并非所有孩子都会被处理，或者`class`没有的属性`=classname`会保留。

这对我有用：

```
$("#myID *")                   // select all children of elements that containt id="myID"
  .each(function(){            // iterate through all children
  $(this).removeAttr("class"); // remove class attribute from each child
});
console.log($("#myID").html()); 
```

# linux - 无法在 Ubuntu 上更新 Git

> ID：14409639
> 
> 赞同：30
> 
> 时间：2013-01-19T00:04:19.243
> 
> 标签：linux, git, ubuntu

我正在尝试在 Ubuntu 机器上设置 Git（我使用的是运行 Ubuntu 12.04 的三星 Chromebook）。

当我输入“sudo apt-get install git”并成功安装 Git 1.79

```
user@ChrUbuntu:~$ git --version
git version 1.7.9.5 
```

我无法弄清楚我在这里做错了什么。有什么建议么？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-06-26T05:42:41.180

对于 Ubuntu 的新安装，我会首先尝试这个来获取最新的更新

```
sudo apt-get dist-upgrade 
```

有关这方面的更多信息，请参阅[https://askubuntu.com/questions/81585/what-is-dist-upgrade-and-why-does-it-upgrade-more-than-upgrade](https://askubuntu.com/questions/81585/what-is-dist-upgrade-and-why-does-it-upgrade-more-than-upgrade)

那应该可以解决它，但如果没有，请从这些家伙那里添加存储库[https://launchpad.net/~git-core/+archive/ppa](https://launchpad.net/~git-core/+archive/ppa)

```
sudo add-apt-repository ppa:git-core/ppa
sudo apt-get update
sudo apt-get install git 
```

这样您就不必构建它等。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-19T00:09:09.403

也许您需要为 [最新版本构建](http://digitalocean.com/community/articles/how-to-install-git-on-ubuntu-12-04)

```
wget git-core.googlecode.com/files/git-1.8.1.1.tar.gz
tar -zxf git-1.8.1.1.tar.gz
cd git-1.8.1.1
make prefix=/usr/local all
sudo make prefix=/usr/local install 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-19T01:11:08.630

如果你想升级到最新版本的 Git，你应该这样做：

```
sudo apt-get update
sudo apt-get upgrade 
```

这将更新您的所有软件包以及 Git。
顺便说一句，我的 Kubuntu 12.10 上最新版本的 Git 是`1.7.10.4`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-01T03:51:00.107

一些答案的组合对我有用。我做了...

sudo add-apt-repository ppa:git-core/ppa

sudo apt-get 更新

sudo apt-get 升级

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-19T00:53:33.023

你试过做一个`apt-get update`吗？您可能有一个过时的包裹清单。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-27T08:59:10.113

在 ubuntu 14.04 我尝试了终端代码：

sudo apt-get 更新
sudo apt-get 升级

升级 git 的步骤。

1.) git --version
*知道你电脑里的 git 版本

2.) sudo apt-get update
*update ubuntu

3.) sudo apt-get upgrade
*升级软件，包括 git

4.) 尝试 git - -版本

就是这样 ：）

# scala - Scala 解析器组合器 reduce/foldLeft

> ID：14409640
> 
> 赞同：2
> 
> 时间：2013-01-19T00:04:20.527
> 
> 标签：scala, parser-combinators

我正在尝试从动态填充的列表中进行以下操作：

```
val primitives = "x" | "y" | "z" // what I want

val primitives2 = List("x", "y", "z") // what I need to transform from 
```

我认为这样的事情可能会奏效：

```
primitives2.reduce(_|_) 
```

但是不行。然后我找到了这个片段，它有效：

```
primitives2.foldRight(failure("no matching delimiter"): Parser[Any])(_|_) 
```

但是，基本情况`failure("no matching delimiter")`令人困惑。这只是 Parser 对象的等效 Nil 情况吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T01:33:28.613

我将假设您正在使用`RegexParsers`它或其后代之一。如果是这样，那么问题只是从`String`to的隐式转换`Parser[String]`不会自动启动`reduce(_ | _)`。如果您首先显式转换列表中的每个项目，如下所示：

```
val anyPrimitive = primitives2.map(literal).reduce(_ | _) 
```

你会很好的——除了这会给你留下一些令人困惑的错误消息，就像这样：

```
scala> parser.parseAll(parser.anyPrimitive, "a")
res8: parser.ParseResult[Any] = 
[1.1] failure: `z' expected but `a' found

a
^ 
```

如果您想要更清晰的错误消息，那么您需要使用该方法提供您自己的起始值`fold`。

# streaming - RTP 中应用程序定义的事件

> ID：14409641
> 
> 赞同：0
> 
> 时间：2013-01-19T00:04:31.357
> 
> 标签：streaming, rtp

我正在研究通过 RTP 发送自定义时间戳数据事件的能力。一个示例可能是应与正在流式传输的任何音频/视频保持同步的聊天消息序列。这些信息没有内在的音频或视频解释；由客户端软件来做一些适当的事情（将它们添加到聊天日志等）。

我发现一些证据表明人们使用自定义 RTP 编解码器来实现这一点。我还看到了一些关于自定义 RTP 有效负载的讨论。任何可以在这里阐明的光都将不胜感激。

我也有兴趣了解 RTP 之外的可能实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:37:50.667

对于每个 RTP 的自定义数据传输，最好使用自定义未分配的有效负载类型（请参阅[http://www.iana.org/assignments/rtp-parameters/rtp-parameters.xml](http://www.iana.org/assignments/rtp-parameters/rtp-parameters.xml)中的列表）。更灵活的方法是使用动态有效负载类型分配（参考，RFC 3551）。

发送方将使用此有效负载类型和您想要的实时媒体帧的时间戳设置 RTP 标头（参考[https://www.rfc-editor.org/rfc/rfc3550#section-5.1](https://www.rfc-editor.org/rfc/rfc3550#section-5.1) ）与同步。

在接收端，您将根据接收到的 RTP 数据包标头中的有效负载类型分派对 RTP 数据的处理。处理可能应该允许媒体到达和自定义数据包之间的一点延迟，然后（显示）两者一起播放......

如果您使用 Java，您可能可以基于 JMF 提供的架构和抽象来构建您的应用程序 ( [http://www.oracle.com/technetwork/java/javase/tech/index-jsp-140239.html](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-140239.html) ) .

# c - 初始化 char 数组和 MISRA 错误

> ID：14409644
> 
> 赞同：1
> 
> 时间：2013-01-19T00:05:16.193
> 
> 标签：c, arrays, array-initialization, misra

我有以下行（减少到最低限度的演示问题）：

```
char version_text[64U] = {'\0'}; 
```

此行生成以下 MISRA 错误：

```
Error[Pm023]: missing elements - braces shall be used to indicate and match the structure in the non-zero initialization of arrays and structures (MISRA C 2004 rule 9.2). 
```

为什么这是一个错误？

我目前的解决方法是：

```
char version_text[64U] = {0}; 
```

这表明该`char`类型是`signed char`由我的编译器（IAR EW）实现的。

我的理解是 '\0' 是一个字符文字，因此应该匹配 type `char`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T00:09:10.010

在 C 中，整数字符常量的类型是`int`，而不是`char`。所以

```
char version_text[64U] = { '\0' }; 
```

和

```
char version_text[64U] = { 0 }; 
```

是完全等价的（这与 的符号无关`char`）。两者都提供一个`int`常量作为唯一的初始化器。

MISRA 检查器抱怨第一个，而不是第二个，这只是不一致。

然而，这可能是因为零初始化通常是通过提供一个来完成的`0`，而使用整数字符常量通常只用于非零初始化 - 如果我解释消息，MISRA 期望所有元素的初始化器正确，并且检查器只是不查看字符常量内部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T00:15:16.517

规则说：

> “还请注意，数组或结构的所有元素都可以通过仅为第一个元素提供显式初始化程序来初始化（为零或 NULL）。如果选择了这种初始化方法，则第一个元素应初始化为零（或 NULL )，并且不需要使用嵌套大括号。”

据此，只有`{0}`and`{NULL}`符合 MISRA，而 {'\0'} 不符合（即使编译器以相同的方式处理它们）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:02:16.703

尝试以下方法：

```
char version_text[64U] = { '\0', }; 
```

这实际上会将每个数组元素初始化为`NULL`不仅是第一个元素。注意逗号！

# google-maps - Google map api v3 + Google 已禁用此应用程序的 Maps API

> ID：14409645
> 
> 赞同：8
> 
> 时间：2013-01-19T00:05:16.333
> 
> 标签：google-maps, google-maps-api-3

今天间歇性地遇到这个错误：

```
Google has disabled use of the Maps API for this application. See the Terms of Service for more information: http://www.google.com/intl/en-US_US/help/terms_maps.html. 
```

不知何故，当我刷新页面时，地图又回来了。我认为如果这是违规行为，它将永久撤销密钥，并且不再允许使用此密钥加载地图。此外，错误总是在页面加载时发生。如果它已经成功加载，我还没有遇到错误。我简要阅读了这些条款，但没有发现任何可疑之处。任何人都可以建议如何解决这个错误？我应该检查一些 js 错误还是地图条款？谢谢。

这是地图脚本的样子：

```
<script src="http://maps.google.com/maps/api/js?v=3&sensor=false&libraries=places&key=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" type="text/javascript"> </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T00:32:45.093

您可以尝试为地图 API 脚本[记录的 URL ：](https://developers.google.com/maps/documentation/javascript/tutorial#Loading_the_Maps_API)

```
<script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&sensor=SET_TO_TRUE_OR_FALSE">
    </script> 
```

建议使用密钥但不是强制性的并且需要传感器的地方。

（所以这应该工作）：

```
<script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?sensor=SET_TO_TRUE_OR_FALSE">
    </script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T23:50:07.433

今天早上我也注意到了同样的问题，我认为这是因为我使用了通过 API 服务注册的域的子域，但它也发生在我的实际域中。

我已经从库 url 中删除了 api 密钥，它现在似乎已经解决了这个问题，当它再次开始工作时我会把它放回去。这一定是 Google 的许可服务器的问题，因为它也影响了他们自己的网站。

# firefox - 如何在 Firefox 中对 SVG 文本进行抗锯齿处理

> ID：14409647
> 
> 赞同：7
> 
> 时间：2013-01-19T00:05:38.060
> 
> 标签：firefox, svg, antialiasing

有谁知道将在 Firefox 中工作的抗锯齿 svg 文本的最佳方法？

我尝试了 text-antialias:true 但这没有效果，我也尝试使用描边颜料，但这只会使字体变厚，这不是我喜欢的。

例子：

```
<!DOCTYPE html>
<html>
<body>
<svg height="100" width="500">
<text y="50" x="250" text-anchor="middle" style="font-size: 40px" >Hello</text>
</svg>
</body>
</html> 
```

我已将此上传到[http://jsfiddle.net/KJhrY/](http://jsfiddle.net/KJhrY/)

此示例在我的 PC (Windows) 上的 IE9 中显示为抗锯齿

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-19T09:32:32.687

Firefox 25[将支持](https://bugzilla.mozilla.org/show_bug.cgi?id=857142#c83)mox-osx-font-smoothing 属性！

因此对于 Firefox 25，您可以使用：

```
.yourclass{
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
} 
```

Firefox 25~~可能会在2013 年 10 月 29 日[十月末](https://wiki.mozilla.org/RapidRelease/Calendar)~~发布的某个地方发布。
每晚构建可以在[http://nightly.mozilla.org/找到](http://nightly.mozilla.org/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T07:53:34.960

尝试“文本渲染”属性。
text-rendering = "optimizeLegibility"

# concurrency - 如果当前作业未完成，Cron 会开始新作业吗？

> ID：14409651
> 
> 赞同：29
> 
> 时间：2013-01-19T00:06:10.297
> 
> 标签：concurrency, cron

> **可能重复：**
> [如何防止 cron 作业执行，如果它已经在运行](https://stackoverflow.com/questions/10552016/how-to-prevent-the-cron-job-execution-if-it-is-already-running)

我的`cron`工作可能需要 2 分钟或 5 小时才能完成。我需要确保始终执行此作业。

**我的问题是：**

它会在前一个完成后启动，还是如果我将它设置为每分钟执行一次，它们会同时运行并弄乱数据库？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-01-19T00:37:22.370

它们将同时运行。围绕这个的标准做法是创建一个文件锁（通常称为flock），如果锁不可用，则不要运行。

与 Zdenek 方法相比，这种方法的优点是它**不需要数据库**，并且当进程结束时，会自动释放群。这包括进程被终止、服务器重新启动等情况。

虽然您没有提及您的 cron 作业是用什么编写的，但在大多数语言中，flock 是标准的。我建议使用谷歌搜索锁和您使用的语言，因为这将是更强大的解决方案，并且不依赖于随机超时。以下是来自 SO 的一些示例：

*   [外壳脚本](https://stackoverflow.com/questions/169964/how-to-prevent-a-script-from-running-simultaneously)
*   [Python](https://stackoverflow.com/questions/6146523/running-python-script-with-cron-only-if-not-running/6146573)
*   [PHP](https://stackoverflow.com/a/10552054/759517)
*   [Perl](https://stackoverflow.com/questions/3966472/how-can-i-ensure-only-one-copy-of-a-perl-script-is-running-at-a-time/3966529#3966529)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-19T00:09:26.823

它们将同时运行。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-19T00:13:08.520

我建议将其记录在数据库中。我会记录脚本何时开始以及任务是否成功完成。该脚本还应该更新数据库中的记录——比如每 5 分钟一次——我仍在运行。

当新作业开始时，它应该检查所有先前的任务是否已完成或上次更新是否超过几分钟（？），如果是则运行，否则退出。

这样您就知道之前的脚本正在运行，或者如果它死了，则未完成且 10 分钟未更新的作业将被标记为已完成。

我应该提一下，当您有多个服务器并且可以在其中任何一个上触发任务时，此解决方案可能比群发更好。

# linux - 在 Linux 上缺少 modversions.h

> ID：14409652
> 
> 赞同：1
> 
> 时间：2013-01-19T00:06:17.640
> 
> 标签：linux, module

我已经成功配置并构建了 linux 内核 2.6.27，并启用了模块支持。但是当我尝试构建另一个需要 include/linux/modversions.h 的程序（内核模块）时，它找不到该文件。

我的问题是：除了在 linux 内核配置中启用模块支持之外，我还需要做些什么来生成/获取 modversions.h？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T01:05:34.113

运行 a `find /path/to/kernel -name modversions.h`，您可能会在目录中找到一个，在`config`目录中找到另一个`linux`，如果是这样，它是使用您的内核编译的。

如果该模块已编译，则可以使用 安装它`make modules_install`，尽管这将安装所有已编译的模块，而不是它们的头文件。

要告诉 gcc 在编译时搜索内核源代码，请使用 -I 选项`-I/path/to/kernel`。您还可以使用 INCLUDE_DIRS var 告诉 gcc 包含该目录，`export INCLUDE_DIRS=$INCLUDE_DIRS:/path/to/kernel`.

# image-processing - 在 Scikit learn python 模块上的 SVM 中训练后通过示例图像进行查询

> ID：14409655
> 
> 赞同：0
> 
> 时间：2013-01-19T00:06:41.430
> 
> 标签：image-processing, svm, scikit-learn, threshold

当我使用训练集和验证集执行 SVM 时，我使用混淆矩阵检查结果，一切都很好。

之后，如何实现系统“示例查询”：我给出一张图片并返回图像集中最相似的图像（基于阈值）？python中有示例（带有scikit-learn模块）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:16:39.000

检索相似图像不需要分类器。它通常是最近邻问题，很可能具有高维特征。关键是找到：

*   你最关心形象的什么性格？形状？颜色？颜色分布？目的？
*   描述图像特征的最佳特征是什么？如果是颜色，那么您可能需要 R/G/B 值或直方图。
*   你想如何衡量相似度？即距离函数。
*   您想在此类最近邻问题设置中使用哪种算法？选项包括但不限于：kd-tree、locality-sensitive-hashing 等。[这里](https://stackoverflow.com/questions/5751114/nearest-neighbors-in-high-dimensional-data)有一些很好的讨论。

# jquery - jQuery拖放，在放置时复制克隆

> ID：14409656
> 
> 赞同：1
> 
> 时间：2013-01-19T00:06:42.790
> 
> 标签：jquery, drag-and-drop, jquery-ui-draggable, jquery-ui-droppable

不知道出了什么问题，但是当我将项目放在第二个列表中时，我正在编辑该克隆，拖放时的 html 代码，并且我添加到项目的内容正在被复制。

例如，我正在删除一个图像，但在放置时我想添加文本框和标签，我的代码是添加文本框和标签，但是两次。

这是我的代码：

```
$("#left-pane li").draggable({
    containment: '#gbox',
    cursor: 'move',
    helper: 'clone',
    scroll: false,
    connectToSortable: '#right-pane',
    appendTo: '#right-pane',
    start: function () {},
    stop: function (event, ui) {}
}).mousedown(function () {});

$("#right-pane").sortable({
    sort: function () {},
    placeholder: 'ui-state-highlight',
    receive: function () {},
    update: function (event, ui) {}
});

$("#right-pane li").live('dblclick', function () {
    $(this).remove();
})

$("#right-pane").droppable({
    accept: "#left-pane li",
    accept: ":not(.ui-sortable-helper)",
    drop: function (event, ui) {
        $(ui.draggable).append("<div class='single-item'><input type='text' class='item-title' /><br /><textarea class='item-text'></textarea></div>");
    }
});

$("#left-pane").droppable({
    accept: "#right-pane li",
    drop: function (event, ui) {}
});

$("ul, li").disableSelection(); 
```

**HTML：**

```
<ul id="left-pane">
   <li><img src="example.png" /></li>
   <li><img src="example2.png" /></li>
   <li><img src="example3.png" /></li>
</ul>

<ul id="right-pane">
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T01:40:53.653

不知道为什么要添加两次，但这是解决问题的快速解决方案。（这可能与 Iswanto San 在问题评论中发布的错误有关）。

[http://jsfiddle.net/Robodude/Y7RmR/](http://jsfiddle.net/Robodude/Y7RmR/)

我更新了你的 drop 函数来检查它是否已经包含你要添加的 div。如果是这样，那么它不会第二次放置它。

```
$("#right-pane").droppable({
    accept: "#left-pane li",
    accept: ":not(.ui-sortable-helper)",
    drop: function (event, ui) {
        if ($(ui.draggable).children('.single-item').length == 0)
        {
            $(ui.draggable).append("<div class='single-item'><input type='text' class='item-title' /><br /><textarea class='item-text'></textarea></div>");
        }
    }
}); 
```

# python - 在 Python 中使用类的骰子生成器

> ID：14409661
> 
> 赞同：6
> 
> 时间：2013-01-19T00:07:06.127
> 
> 标签：python, class, python-2.7

**更新** *有人可能会因为我以这种方式发帖而对我下手，但评论中没有足够的空间来涵盖这一点，他们特别告诉你不要通过后续回答来回答你自己的问题，所以这里......*

我已经创建了你们所说的骰子类。

```
class dice():
    def __init__(self, sides, number):
        self.sides = sides
        self.number = number

    def roll(self):
        return random.randint(1, self.sides) 
```

`number`争论没有做任何事情。

```
def att():
    d = dice(20, 2)
    base = d.roll()
    if base == 1:
        print 'Miss!'
    elif base == 20:
        crit = d.roll()
        if crit < 10:
            print 'Hit!'
        else:
            print 'Critical hit!\n'
            effect = super_crit()               
    else:
        print base 
```

我得到不止一个死的唯一方法是如果我做这样的事情：

```
def initiative():
    d = dice(10, 1)
    ini = d.roll(), d.roll()
    print ini 
```

我也试过：

```
def initiative():
    d = dice(10, 2)
    d.sides = 10
    d.number = 2
    ini = d.roll()
    print ini 
```

这对我来说看起来是多余的，但我得到了一个`Type Error:`因为没有`dice(10, 2)`. 无论我使用哪种方法，我都会得到相同的结果——一个死。我错过了什么吗？

**原帖**

我正在学习如何在 Python 2.7 中使用类，作为练习，我正在为基于文本的 RPG 编写战斗模块。它使用老式的掷骰子方法来确定结果和效果。掷骰决定命中或未命中。如果掷出自然 20，则另一个掷骰确定它是否是重击。如果重击 = TRUE，则掷另一个骰子以确定受影响的身体部位。每个身体部位都与字典中的数字 1-12 配对。根据受影响的部分，有三种可能的输出消息。我的问题是返回整个值列表而不是特定部分。我在这里做错了什么？

是的，我知道这是超级书呆子。是的，我知道输出很蹩脚，但它都是占位符。

```
import sys, random

#dice generator
class dice():
    def d4(self):
        number = random.randint(1, 4)
        return number

    def d6(self):
        number = random.randint(1, 6)
        return number

    def d10(self):
        number = random.randint(0, 9)
        return number

    def d12(self):
        number = random.randint(1, 12)
        return number

    def d20(self):
        number = random.randint(1, 20)
        return number

    def d100(self):
        number = random.randint(0, 99)
        return number 

#critical hit effect generator        
class super_crit(dice):
    def __init__(self):
        roll = dice()
        loc = roll.d12()
        hit_loc = {1 : 'Head',
                   2 : 'Left Arm',
                   3 : 'Right Arm',
                   4 : 'Left Leg',
                   5 : 'Right Leg',
                   6 : 'Left Hand',
                   7 : 'Right Hand',
                   8 : 'Left Foot',
                   9 : 'Right Foot',
                   10 : 'Chest',
                   11 : 'Stomach',
                   12 : 'Body'}
        part = hit_loc.values()
        for w in part:
            if loc <= 9:
                print w, "has been severed!"
            elif loc == 10:
                print "You sink your blade into his", w, "and pierce the heart!"
            elif loc == 11:
                print "You slash him across the", w, "and eviscerate him!"
            elif loc == 12:
                print "You shred the enemy's", w, "to ribbons!"

class attackRoll(dice):
        pass

#Attack function        
def att():
    roll = attackRoll()
    base = roll.d20()
    if base == 1:
        print 'Miss!'
    elif base == 20:
        crit = roll.d20()
        if crit < 10:
            print 'Hit!'
        else:
            effect = super_crit()               
    else:
        print base

def main():
    att()

if __name__ == '__main__':

main() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T00:09:39.170

你循环遍历字典的所有值：

```
part = hit_loc.values()
for w in part:
    # loop over each part, so print a damage message for all 12 bodyparts 
```

也许您打算选择受影响的那个？

```
part = hit_loc[loc]  # assign *one* body part to `part`
if loc <= 9:
    print part, "has been severed!"
elif loc == 10:
    print "You sink your blade into his", part, "and pierce the heart!"
elif loc == 11:
    print "You slash him across the", part, "and eviscerate him!"
elif loc == 12:
    print "You shred the enemy's", part, "to ribbons!" 
```

换句话说，这里根本不需要循环。

请注意，每当您发现自己使用一系列连续的数字作为字典的键时，您也可以将其设为列表：

```
hit_loc = [
    'Head', 'Left Arm', 'Right Arm', 'Left Leg', 
    'Right Leg', 'Left Hand', 'Right Hand', 'Left Foot', 'Right Foot',
    'Chest', 'Stomach', 'Body'
] 
```

除了现在索引从 0 到 11，所以用它`loc - 1`来找到正确的身体部位：

```
part = hit_loc[loc - 1] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T00:32:29.783

*相切*...

骰子类的更简单版本可能类似于：

```
class Die(object):
    def __init__(self, sides = 6):
        self.sides = sides

    def roll(self):
        return randint(1, self.sides) 
```

您现在有了一个通用的骰子对象，它不需要您在每次提出新的掷骰模式时都添加新方法。例如

```
d = Die(10);
d.roll() # ---> some value between 1 and 10 
```

添加可选`start`和`increment`属性，以便您可以拥有一个 D20，`5, 10, ..., 95, 100`作为学生的练习。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-19T01:30:44.013

这看起来像是一个有趣的 Python 学习程序。其他答案主要涵盖了您的需求，但我只想指出一件事：

如果你想在现实生活中用骰子选择某样东西，方法是给这些东西分配数字，然后掷骰子，并使用骰子中的数字来确定选择了哪个东西。但是，在 Python 中，您可以做的事情比这更简单：您可以告诉 Python “这里有一堆东西，我想要随机选择一个项目”。这样做的功能是：`random.choice()`

所以对于重击的东西，你可以替换它：

```
hit_loc = {1 : 'Head',
           2 : 'Left Arm',
           3 : 'Right Arm',
           4 : 'Left Leg',
           5 : 'Right Leg',
           6 : 'Left Hand',
           7 : 'Right Hand',
           8 : 'Left Foot',
           9 : 'Right Foot',
          10 : 'Chest',
          11 : 'Stomach',
          12 : 'Body'}

# two steps to randomly choose a hit location
loc = roll.d12()
part = hit_loc[loc] 
```

有了这个：

```
locations = ('Head', 'Left Arm', 'Right Arm', 'Left Leg', 'Right Leg',
         'Left Hand', 'Right Hand', 'Left Foot', 'Right Foot',
         'Chest', 'Stomach', 'Body')

# one step to randomly choose a hit location
part = random.choice(locations) 
```

通常，当您想弄清楚如何使用类似 的模块`random`时，阅读文档确实值得。在 Python 中，总是有一些随代码提供的简洁文档；在 Python 提示符下，您可以这样做：

```
>> import random
>> help(random) 
```

该`help()`命令将打印出简洁的文档，如果您通读它，您会发现`random.choice()`、`random.shuffle()`和其他漂亮的东西。

玩得开心！

PS 这是一个有趣的示例程序。不过，这不是类的最佳示例。您在这里使用一个类只是为了获得一个将相关函数组合在一起的命名空间，这没有错，但是当一个类封装一些数据和一些组合在一起的函数时，它会更加有用。这里有一个建议：创建一个`Person()`类，它有一个名为 的成员变量`hit_points`，并编写一个`.attack()`攻击另一个`Person`实例的方法函数。然后编写一个程序，创建两个`Person()`实例并让它们互相争斗！

我建议它应该像这样工作：

```
black_knight = Person()
king_arthur = Person()

while True:
    king_arthur.attack(black_knight)
    if black_knight.hit_points <= 0:
        print "Victory is mine!"
        break
    black_knight.attack(king_arthur)
    if king_arthur.hit_points <= 0:
        print "None shall pass!"
        break 
```

在这个例子中，一个`Person`实例将关于一个人的信息（命中点）和与一个人一起工作的功能（一个人可以`attack`另一个人）捆绑在一起。

您可以扩展模型以包括关键命中；实例可以跟踪它收到了`Person`哪些致命一击；a`Person`可能有库存，包括总是会造成致命一击的武器（例如“Vorpal Bunny Teeth”、“Antioch 的圣手榴弹”）等。

事实上，你可以继续添加更多的东西`Person`来跟踪，以及更多的方法函数，如果你坚持下去，你可能会把整个事情变成一个真正的游戏。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T00:27:14.060

而不是 hit_loc.values() 上的 for 循环，只需设置`loc=hit_loc`.

代码还有许多其他问题。这里有几个：

*   使用函数定义而不是*骰子类*
*   缩进对*main()的调用*
*   带有数字键的字典可以替换为*列表*或*元组*

这是对代码第一部分的一种可能的重构：

```
from functools import partial
from random import randint

d4 = partial(randint, 1, 4)
d6 = partial(randint, 1, 6)
d10 = partial(randint, 0, 10)
d12 = partial(randint, 1, 12)
d20 = partial(randint, 1, 20)
d100 = partial(randint, 0, 99)

def critical_hit_effect():
    locations = ('Head', 'Left Arm', 'Right Arm', 'Left Leg', 'Right Leg',
                 'Left Hand', 'Right Hand', 'Left Foot', 'Right Foot',
                 'Chest', 'Stomach', 'Body')
    roll = d12()
    if roll == 10:
        msg = "You sink your blade into his %s and pierce the heart!"
    elif roll == 11:
        msg = "You slash him across the %s and eviscerate him!"
    elif roll == 12:
        msg = "You shred the enemy's %s to ribbons!"
    else:
        msg = "%s has been severed!"
    print msg % locations[roll-1] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-21T06:06:44.060

我认为当您有其他问题时，可以发布另一个问题。由于您更新了您的问题以询问如何做多个骰子，因此我提出了另一个答案。（我怀疑我会为此获得任何积分，但我并不真正关心这些积分。）

有些游戏需要知道骰子是如何产生的。例如，在超级英雄游戏*Champions*中，有时您需要计算掷出多少个六面骰子。（我想……我已经很久没有玩了。）

无论如何，你的骰子类应该返回骰子掷骰结果的列表或元组，而不是对骰子求和并返回总和。我会告诉你两个。如果元组一令人困惑，请忽略它，直到您对 Python 有更多了解；你现在不需要学习这个。

Python 有一种非常方便的方法来制作列表，称为“列表推导”。如果你用谷歌搜索“列表理解”，你会发现很多页的解释。（这就是为什么我没有得到任何分数的原因...... StackOverflow 并不需要另一个列表推导解释！）基本上，它的工作原理是这样的：

`[`*表达式*`for`*变量*`in`*序列*`if`*条件*`]`

开始寻找中间的“for”部分。这意味着“为序列的每个成员设置一个变量。检查条件，如果为真，则评估表达式并将结果附加到新列表中。”

一个简单的例子：制作一个从 1 到 10 的奇数平方的列表。这将做到：

```
lst_odd_squares = [x**2 for x in range(10) if (x % 2) == 1]
print(lst_odd_squares) # prints: [1, 9, 25, 49, 81] 
```

以下是如何使用`for`循环执行此操作：

```
lst_odd_squares = []  # start with an empty list
for x in range(10):  # just like the for part
    if (x % 2) == 1:  # just like the condition part
        lst_odd_squares.append(x**2)  # append the expression part 
```

“条件”部分是可选的，这个特定的例子可以这样完成：

```
lst_odd_squares = [x**2 for x in range(1, 10, 2)] 
```

在这里，我们从 1 开始范围，并以 2 为单位，所以我们直接生成我们想要的数字。

表达式中通常包含`for`变量，但它不必：

```
counters = [0 for x in range(10)] 
```

这将产生一个包含 10 个整数的列表，最初都设置为 0。然后您可以将它们用作计数器或其他东西。

无论如何，这是制作一个返回列表的骰子滚动类的方法：

```
import random

class Dice():
    def __init__(self, sides):
        self.sides = sides

    def roll(self, number):
        """return a list of length number, with random values from 1 to self.sides"""
        return [random.randint(1, self.sides) for _ in range(number)]

    def roll_one(self):
        """return a single value from 1 to self.sides"""
        return random.randint(1, self.sides)

d6 = Dice(6)
d10 = Dice(10)

print d6.roll(3)  # roll 3d6
print d10.roll(2)  # roll 2d10

print d10.roll(1)  # roll 1d10 -- returns a list of length 1
print d10.roll_one() # roll a single d10 -- returns a single integer 
```

我稍微改变了你的代码。每次你需要掷不同数量的骰子时，我没有创建一个不同的类实例，而是让`.roll()`方法函数接受一个`number`参数。你的方式不一定是错的，但我认为这种方式更容易一些。

通常最好对类名使用大写字母。有一个大多数 Python 人喜欢使用的规则列表，称为“PEP 8”，类名的大写是规则之一：

[http://www.python.org/dev/peps/pep-0008/#class-names](http://www.python.org/dev/peps/pep-0008/#class-names)

（顺便说一句，*Learning Python*这本书会以良好的 PEP 8 风格为您提供所有示例。因此，如果您从那本书中学习，您将学习 PEP 8 方式。这是该书教给您所有有关 Python 的方式之一。）

我使用单个下划线 ( `_`) 作为循环变量。这是合法的，有时这样做是为了表明您打算不使用该值。我们需要一个循环变量，但我们实际上并没有使用它，就像`counters`上面的例子一样。

Python 具有“列表理解”，但没有“元组理解”。所以这里有一种创建元组的方法：首先创建列表，然后从列表中构建一个元组。

```
lst = [random.randint(1, self.sides) for _ in range(number)]
return tuple(lst) 
```

您可以一口气完成所有操作，而列表没有明确的变量名称：

```
return tuple([random.randint(1, self.sides) for _ in range(number)]) 
```

这有点丑。如果我们要建立列表，为什么不直接返回呢？为什么用了那一次就喂进去`tuple()`再销毁呢？

Python 提供了一种称为“生成器表达式”的东西，有点像列表推导式。重要的两个区别： 0）您使用括号，而不是方括号；1）它不构建任何东西，它返回一个可以产生一系列值的“迭代器”对象。（当 Python 拉出一系列值时，我们说 Python 正在“迭代”这个对象。）如果你然后将这个“迭代器”传递给`tuple()`，你可以直接构建一个元组，而无需先构建一个列表，然后再销毁该列表。这里有一个很酷的技巧：您需要使用括号来调用`tuple()`，并且您可以将这些括号用作生成器表达式所需的括号。

```
return tuple(random.randint(1, self.sides) for _ in range(number)) 
```

同样，如果生成器表达式的东西现在看起来很奇怪或很难，请忽略它。对于很多东西，列表理解是你所需要的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-14T21:08:38.963

这就是我在为我 DM 的 Pathfinder 游戏构建的工具包中处理多个骰子的方式：

```
import random

def rolldice(number,sides):
    Result = []
    for dice in range(0, number):
        Result.append(random.randint(1,sides))
    return Result

class Dice():
    def __init__(self, number, sides):
        self.sides = sides
        self.number = number

    def roll(self):
        return rolldice(self.number, self.sides)

# 10th level fireball
fireball = Dice(10,6)
damage = fireball.roll()
# all of the rolls (for 4d6 drop lowest, 2d20 take highest, etc)
print (damage)
# total damage
print (sum(damage))
# a d20 roll
d20 = Dice(1,20)
print (sum(d20.roll())) 
```

输出：

```
[2, 3, 1, 4, 2, 1, 5, 4, 5, 4]
31
13 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-26T11:28:18.123

我将在这里留下一些我写的漂亮的 Python 元类魔法。这是给你的，未来的代码考古学家，他们有足够的决心从深埋在这个线程中挖掘它。

```
from random import randint
class MetaRoll(type):
    def __getattr__(cls, dice):
        n,n_faces = [int(part) if part else 1 for part in
                     dice.lower().strip('a').strip('_').split('d')]
        return sum( randint(1,n_faces) for i in range(n) )
class Roll(metaclass=MetaRoll):
    """ A handy RPG styled dice roller.

    The implementation has been enchanted using Python __getattr__ and metaclass
    magic. Beyond that, only the random module is used.
    enchanted using Python __getattr__ and metaclass magic. 

    As a result, any roll is exposed as a public attribute and the dice
    roller that can be used like this:

    ``Roll.a_2D6 + 2``

    Note that the ``a_`` is needed to allow names starting with numbers, and, 
    e.g. ``2D10`` is written as ``a_2D10`` or ``a2D10``.

    Attributes:
        a_3D6 (int): Rolls three six sided dice and returns the sum. This is
                      most boring example with a nice probability distribution.
        D6 (int): If there is just one die, the attribute name does not start
                   with a number. Hence, the ``a_`` prefix can be omitted.
    """
    pass

print(Roll.D6) # Outputs an integer between [1,6]
print(Roll.D20+2) # Note how easy it is to add modifiers
print(Roll.a_3d6-2) # Outputs a sum of random integers from a range [1,16]. 
```

附言。当描述你所做的事情比编写代码需要更长的时间时，你知道你是一个向导。

# php - 让 $_GET 或 $_POST 与 ajax 一起工作时遇到问题

> ID：14409664
> 
> 赞同：0
> 
> 时间：2013-01-19T00:07:45.147
> 
> 标签：php, javascript, ajax, post, get

我的 find.php 文件中有这段代码：

```
<select name="EmpName" required="required" id='empn'>
    <option value="" style="display:none;"></option>    
    <?php

    //get the employee id 
        $employeeId = $_POST['country'];

    //make connection to database, bail if no connection
    $connection = odbc_pconnect('db','','');
    if (!$connection) { exit("Connection Failed: " . $connection); }

    //retrieve usernames and passwords
    $sql = "SELECT EName FROM LoginTable WHERE EmployeeID='$employeeId'";

    $rs = odbc_exec($connection, $sql);

    while(odbc_fetch_row($rs)) {
        $rowJobNum = odbc_result($rs, 'EName');
        printf("<option value='%s'>%s</option>", $rowJobNum, $rowJobNum);
    }

?></select> 
```

我的 index.php 文件中有这段代码：

```
<script>
function getXMLHTTP() { //function to return the xml http object
        var xmlhttp=false;  
    try{
        xmlhttp=new XMLHttpRequest();
    }
    catch(e)    {       
        try{            
            xmlhttp= new ActiveXObject("Microsoft.XMLHTTP");
        }
        catch(e){
            try{
            xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
            }
            catch(e1){
                xmlhttp=false;
            }
        }
    }

    return xmlhttp;
}

function getCity(strURL) {      

    var req = getXMLHTTP();

    if (req) {

        req.onreadystatechange = function() {
            if (req.readyState == 4) {
                // only if "OK"
                if (req.status == 200) {                        
                    document.getElementById('citydiv').innerHTML=req.responseText;                      
                } else {
                    alert("There was a problem while using XMLHTTP:\n" + req.statusText);
                }
            }               
        }           
        req.open("GET", strURL, true);
        req.send(null);
    }

}
</script>

</head>

<body>

<form method="post" action="" name="form1">
<table width="60%" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td width="150">Country</td>
    <td  width="150"><select name="country" onChange="getCity('find.php?country='+this.value)">
    <option value="">Select Country</option>
    <option value="1">mg05</option>
    <option value="2">Canada</option>
        </select></td>
  </tr>
  <tr style="">
    <td>City</td>
    <td ><div id="citydiv"><select name="city">
        </select></div></td>
  </tr>

</table>  
</form>
</body>
</html> 
```

这是问题所在...我无法访问第一个下拉菜单中的选择，下拉菜单中的选择永远不会进入`find.php`. 作为参考，`mg05`下拉列表中是一个员工 ID，我正在处理一个最初为城市/州等格式化的示例。

这是我的大问题，如果我去：

```
$sql = "SELECT EName FROM LoginTable WHERE EmployeeID = '$employeeId'"; 
```

并将其更改为

```
$sql = "SELECT EName FROM LoginTable WHERE EmployeeID= 'mg05'"; 
```

它完美地工作，并返回正确的结果。所以......显然从 index.php 到 find.php 的数据发布不起作用，我不知道为什么。我有`$_GET`并`$_POST`在我网站的其他区域工作，但不是这个。

关于我可能在哪里出错的任何见解？我试过同时使用get和post，但没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T00:16:43.220

问题是您希望选择中显示的文本被发布。如果所选选项具有 value 属性，则不会发生这种情况，将使用 value 属性

```
<select name="country" onChange="getCity('find.php?country='+this.value)">
    <option value="">Select Country</option>
    <option value="mg05">mg05</option>
    <option value="Canada">Canada</option>
</select> 
```

# amazon-web-services - AWS Elastic Beanstalk - 启动 SWF 后台工作程序

> ID：14409665
> 
> 赞同：5
> 
> 时间：2013-01-19T00:07:55.363
> 
> 标签：amazon-web-services, cron, backgroundworker, amazon-elastic-beanstalk, amazon-swf

我一直在尝试找出在 AWS Elastic beanstalk 上使用 PHP 运行后台作业的最佳方法，并且在 Google 和 SO 上搜索了数小时后，我相信一个好的解决方案是使用 SWF 和活动工作者。

我发现这个例子隐藏在 aws-sdk-for-php 中：[https ://github.com/amazonwebservices/aws-sdk-for-php/tree/master/_samples/AmazonSimpleWorkflow/cron](https://github.com/amazonwebservices/aws-sdk-for-php/tree/master/_samples/AmazonSimpleWorkflow/cron)

自述文件说：

> 要运行此示例，您需要在单独的终端/控制台窗口中从命令行执行三个脚本

和

> 请注意，start_cron_example_workflow.php 脚本将快速退出，而决策者和活动工作者脚本将继续运行，直到您手动终止它们。

决策者和活动工作者将“永远”循环，尝试在 EB 中运行这些是我遇到的麻烦。

在我的 .ebextensions 目录中，我有一个执行这些文件的文件：

```
container_commands:
  01background_task: 
    command: "php -f start_cron_example_activity_workers.php"
  02background_task: 
    command: "php -f start_cron_example_workflow_workers.php" 
```

但我收到以下错误消息：

错误
无法部署应用程序版本。

错误 某些实例没有响应命令。未收到来自 [i-a5417ed4] 的回复。

有什么办法可以使用配置文件来做到这一点？如何在不引入单点故障的情况下在 AWS EB 中进行这项工作？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T08:02:33.427

你看过[胖控制器](http://fat-controller.sourceforge.net)吗？它可以守护任何东西。网站上有文档和示例：http: [//fat-controller.sourceforge.net](http://fat-controller.sourceforge.net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T01:57:26.343

您可能会考虑使用[IronWorker 之](http://www.iron.io/worker)类的服务——这是专为您正在尝试做的事情而设计的，并且可能比将您自己的解决方案放在一个微型实例上更好。

我还没有使用[Iron.io](http://www.iron.io/)，但是我正在评估它，因为我希望将我的东西转移到 AWS，所以我还需要处理 cron 作业。

# gmail - 有没有集成 Gmail 和 Basecamp 的应用程序？

> ID：14409674
> 
> 赞同：1
> 
> 时间：2013-01-19T00:08:26.097
> 
> 标签：gmail, basecamp

我们从 InSightly 切换到 Basecamp，到目前为止它很棒，但有一个例外。使用 InSightly，我们可以直接从进入我们 gmail 帐户的电子邮件中创建待办事项。有没有可以用 Basecamp 做到这一点的应用程序？我们尝试了 GCamp，如果他们为新的大本营升级 API，它会起作用，但这似乎是一条死胡同。有什么帮助吗？寻找有效的东西。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T18:17:02.907

你见过这个：[http](http://www.goldladder.co.uk/basecamp-and-google-apps-integration-pt-1) ://www.goldladder.co.uk/basecamp-and-google-apps-integration-pt-1 ？它可能有助于集成。

此视频也可能有所帮助：[http ://basecamp.com/help/videos/email-content](http://basecamp.com/help/videos/email-content)

# ckeditor - kcfinder未在ckeditor中显示选项卡

> ID：14409676
> 
> 赞同：0
> 
> 时间：2013-01-19T00:08:56.827
> 
> 标签：ckeditor, integration

我按照页面上描述的方式安装了 CKEditor 和 KCfinder。现在 CKEditor 很好地显示并且运行良好，但是 KCfinder 没有显示在 CKEditor 图像选项卡中。我根据他们的手册/安装指南做了所有事情，并在互联网上搜索了其他实现 KCfinder 的方法。我找不到真正有效的指南或描述我的问题的指南。

有没有人遇到同样的问题并解决了它或拥有正确的知识来帮助我摆脱这种令人沮丧的情况？

我真的很感激每一个输入。我对 Web 开发还很陌生，对于新手来说，Stackoverflow 是一个非常棒的平台和知识数据库！

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:36:59.570

如果您指的是 CKEditor 的图像对话框中缺少的“上传”选项卡和“浏览服务器”按钮，我会确保这些路径对于您的集成是正确的。

[http://kcfinder.sunhater.com/docs/integrate](http://kcfinder.sunhater.com/docs/integrate)

# php - 像在 PHP 中一样在 javascript 中获取函数参数

> ID：14409680
> 
> 赞同：0
> 
> 时间：2013-01-19T00:09:11.210
> 
> 标签：php, javascript

> **可能重复：在 Javascript** [javascript 数组参数列表](https://stackoverflow.com/questions/3917243/javascript-array-parameter-list)
> [中使用动态参数调用动态函数](https://stackoverflow.com/questions/676721/calling-dynamic-function-with-dynamic-parameters-in-javascript)

我正在寻找我在 PHP 中使用的以下功能的 Javascript 等效项：

```
function myfunc()
{
     $arg_arr = array();
     $arg_arr = func_get_args();

     $my_arg_val_1 = (!isset($arg_arr[1]) || ($arg_arr[1] == '')) ? true : $arg_arr[1];
} 
```

基本上，我正在尝试获取函数参数。我想编写一个 javascript 函数来获取一个参数，但是我想添加一些代码来使用第二个和第三个参数（如果提供的话）做一些事情，但我不知道如何解决这个问题。

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T00:12:21.320

使用[参数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)变量。

它不是一个数组（它是一个“类数组对象”，与标准数组有一些不同），但您可以通过以下方式将其转换为真正的数组：

```
function myfunc() {
    var argArray = Array.prototype.slice.call( arguments );
    /* ... do whatever you want */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T00:12:13.623

在 JavaScript[`arguments`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)中，每个函数都有可用的变量。它看起来像一个数组，其中包含传递给函数的所有参数：

```
function myfunc() {
    var arg1 = arguments[0],
        arg2 = arguments[1],
        argc = arguments.length;
}

myfunc(1, "abc");  // arg1 = 1,
                   // arg2 = "abc",
                   // argc = 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T00:12:33.933

这个问题是骗人的，但答案很简单：

```
function foo() {
  for (var i = 0; i < arguments.length; i++) {
    alert(arguments[i]);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T00:19:00.367

您已移植到 js 的那些功能：

*   [func_get_arg](http://phpjs.org/functions/func_get_arg/)
*   [func_get_args](http://phpjs.org/functions/func_get_args/)
*   [伊塞特](http://phpjs.org/functions/isset/)
*   [大批](http://phpjs.org/functions/array/)

**[{php} .js](http://phpjs.org/)**

# java - 获取格式错误的访问令牌 "t ype":"OAuthException","code":190

> ID：14409685
> 
> 赞同：4
> 
> 时间：2013-01-19T00:09:38.530
> 
> 标签：java, android, facebook, facebook-graph-api

我正在编写一个 android 应用程序来获取 Facebook 用户相册和照片并在我的 Android 应用程序中显示。我创建了一个**APP_ID 为 281846961912565 的 Facebook 应用程序**。

在创建 Facebook 实例时，我按如下方式传递此 ID

```
facebook = new Facebook(APP_ID); 
```

使用这个实例，我能够以编程方式登录到我的 FB 帐户帖子上的 facebook 墙上的消息。登录后，我得到一个 access_token。

我正在使用访问令牌来获取专辑 ID`facebook.request("https://graph.facebook.com/me/albums?access_token="+facebook.getAccessToken());`

现在我明白了`{"error":{"message":"Malformed access token ACCESSTOKENACCESSTOKEN?access_token=ACCESSTOKENACCESSTOKEN","t‌​ype":"OAuthException","code":190}}`

你们中的任何人都可以帮我解决这个问题并指出我做错了什么。

我的代码如下：

```
 private static final String[] PERMISSIONS = new String[] { "publish_stream","user_photos" };
public boolean saveCredentials(Facebook facebook) {
    Editor editor = getApplicationContext().getSharedPreferences(KEY,
            Context.MODE_PRIVATE).edit();
    editor.putString(TOKEN, facebook.getAccessToken());
    editor.putLong(EXPIRES, facebook.getAccessExpires());
    return editor.commit();
}

public boolean restoreCredentials(Facebook facebook) {
    SharedPreferences sharedPreferences = getApplicationContext()
            .getSharedPreferences(KEY, Context.MODE_PRIVATE);
    facebook.setAccessToken(sharedPreferences.getString(TOKEN, null));
    facebook.setAccessExpires(sharedPreferences.getLong(EXPIRES, 0));
    return facebook.isSessionValid();
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    facebook = new Facebook(APP_ID);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.facebook_dialog);
    String facebookMessage = getIntent().getStringExtra("facebookMessage");
    if (facebookMessage == null) {
        facebookMessage = "Test wall post";
    }
    messageToPost = facebookMessage;
} 
```

R.layout.facebook_dialog 是弹出的对话框，询问是否应该在 facebook 上共享消息。如果是，则调用以下方法。

```
 public void share(View button) {
    if (!facebook.isSessionValid()) {
        loginAndPostToWall();
    } else {
        postToWall(messageToPost);
    }
}
   public void loginAndPostToWall() {
    facebook.authorize(this, PERMISSIONS, Facebook.FORCE_DIALOG_AUTH,
            new LoginDialogListener());
}
   class LoginDialogListener implements DialogListener {
    public void onComplete(Bundle values) {
        saveCredentials(facebook);
        if (messageToPost != null) {
            postToWall(messageToPost);
        }
    }

    public void onFacebookError(FacebookError error) {
        showToast("Authentication with Facebook failed!");
        finish();
    }

    public void onError(DialogError error) {
        showToast("Authentication with Facebook failed!");
        finish();
    }

    public void onCancel() {
        showToast("Authentication with Facebook cancelled!");
        finish();
    }
}

   public void postToWall(String message) {
    Bundle parameters = new Bundle();
    parameters.putString("message", message);
    parameters.putString("description", "topic share");
    try {
        facebook.request("me");
        String response = facebook.request("me/feed", parameters, "POST");
        Log.d("Tests", "got response: " + response);
        if (response == null || response.equals("")
                || response.equals("false")) {
            showToast("Blank response.");
        } else {
            showToast("Message posted to your facebook wall!");
        }
                    getImagesFromUserAlbum();
        finish();

    } catch (Exception e) {
        showToast("Failed to post to wall!");
        e.printStackTrace();
        finish();
    }
} 
```

后来当我做一个 `private void getImagesFromUserAlbum() { facebook.getAccessToken();

```
 JSONArray albumss = null;
    String response = null;
    try {
        response = facebook.request("me/albums"); 
```

// `

我收到错误 {"error":{"message":"Malformed access token ACCESSTOKEN?access_token=ACCESSTOKEN","type":"OAuthException","code":190}}

谢谢你的帮助。

上面的代码现在是工作副本。感谢巴特克。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T00:39:16.957

如果您查看文档中的[错误页面](http://developers.facebook.com/docs/reference/api/errors/)，您会看到当您获取时`error 190`您应该授权/重新授权用户。

我怀疑这发生在您身上，因为您首先登录，然后将访问相册[的权限添加](https://stackoverflow.com/questions/14408889/in-android-how-to-add-user-photos-permission-to-get-the-facebook-album-photos)到您的应用程序但没有注销并重新登录。因此，您需要获取一个新的访问令牌，该令牌将授予新权限到您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T09:34:01.277

请检查您的访问令牌中是否有 &expires，如果是，则将其删除，因为它不是 access_token 的一部分，然后尝试。

# sas - SAS：将当前文件夹设置为包含正在运行的程序的文件夹

> ID：14409689
> 
> 赞同：5
> 
> 时间：2013-01-19T00:09:55.370
> 
> 标签：sas

我刚刚开始学习 SAS，因为我需要将它用于统计课程。对于本课程，该大学通过他们的虚拟机设置提供 SAS 9.2：我在他们的系统中进行预订，他们在其中一台服务器上生成一个 VM，然后我使用 Microsoft 的远程桌面客户端连接到该 VM。每个会话生成和擦除虚拟机；每次都会重置设置，并且文件必须存储在我的客户端计算机上（可以通过 UNC 路径在 VM 中访问）。

在此设置中，当我打开存储在笔记本电脑上的程序文件时，我只能通过硬编码完整路径或更新“当前文件夹”在每个会话开始时设置。第一个是有问题的，因为这意味着该程序不会在其他任何地方运行 - 特别是当我通过电子邮件将其发送给教授时。第二个是不方便的，因为浏览到这个特定的 UNC 路径非常耗时，而且我已经必须浏览到相同的路径才能打开程序文件。

我想通过以编程方式将当前文件夹设置为包含该程序的文件夹来简化此操作。然后我可以打开文件并开始工作。我找到了一些[获取程序文件的文件名](http://www.sascommunity.org/wiki/Get_Name_of_Program)、[获取 fileref 的路径](http://www.sascommunity.org/wiki/Tips:Using_PATHNAME_to_Retrieve_a_Physical_Path)以及（超出链接限制）设置当前文件夹的示例，但我无法以正确的方式组合它们。请为我连接点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T15:02:47.687

要以编程方式从 SAS 更改 Windows 当前目录，您可以使用该`X`命令，这是使用“更改当前文件夹”对话框时真正发生的情况：

```
x 'cd "\\computername\share name\folder"'; 
```

您也可以使用`SYSTEM`data step 函数来执行此操作，这是我更喜欢的一种方法，因为您会得到一个返回码（但当然要输入更多）：

```
data _null_;
   rc = system( 'cd "\\computername\share name\folder"' );
   if rc = 0 
      then putlog 'Command successful';
      else putlog 'Command failed';
run; 
```

请注意，UNC 路径用双引号括起来，如果路径包含空格，这是必需的。

当然，这仍然需要您手动输入命令，但它可能是您可以添加到程序源代码中的内容。如果您的 VM 环境允许您在服务器上保持某些永久存在，则可以将此命令保存到启动文件中。

我想请教你的教授；如果您正在使用作为课程的一部分提供给您的数据，您可能只需要发送源代码。另一方面，如果您将创建输出数据作为作业的一部分，您的教授可能希望您提供源代码和 SAS 数据集。他或她肯定会有一些程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T18:54:55.633

## 完整答案：

SAS 的钝符号需要一些奇怪的分隔符摆弄才能将我的部分解决方案（查找路径）与@Bob Duell 的部分解决方案（设置当前文件夹）结合起来。似乎涉及两个关键规则：

*   &var 在双引号字符串 ("&var") 中展开，但不是在单引号字符串 ('&var') 中展开
*   &var 中的引号在展开后不被视为分隔符

因此解决方案是计算带引号的路径的字符串（其中引号是字符串的一部分），并在双引号参数中将其扩展为 X 或 SYSTEM：

```
%let qsrc=%str(%")&src%str(%");
X "cd &qsrc" 
```

不需要存储字符串，&src 和 &qsrc 都可以就地扩展，从而产生单个语句解决方案：

```
X "cd %str(%")%substr(%sysget(SAS_EXECFILEPATH),1,%eval(%length(%sysget(SAS_EXECFILEPATH))-%length(%sysget(SAS_EXECFILENAME))))%str(%")"; 
```

这可以正确执行，但会破坏 GUI 中的语法着色。在一个字符串中，`%str(%")`并且`""`都扩展为`"`，因此用两者替换`%str(%")`可以`""`正确执行并且在 GUI 中正确着色：

```
X "cd ""%substr(%sysget(SAS_EXECFILEPATH),1,%eval(%length(%sysget(SAS_EXECFILEPATH))-%length(%sysget(SAS_EXECFILENAME))))"""; 
```

这继承了它仅在定义 SAS_EXECFILEPATH 和 SAS_EXECFILENAME 时才有效的限制，从 Windows GUI 编辑器中运行时就是这种情况。它还受到“cd”命令中的任何限制，[SAS 拦截](http://support.sas.com/documentation/cdl/en/hostwin/63285/HTML/default/viewer.htm#sassession.htm)而不是调用 Windows 命令行。我希望它会在包含引号的路径上失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T17:29:30.183

部分答案：从程序文件的文件名中获取包含文件夹的一种方法

展开和记录步骤：

```
/* Find PathName of folder containing program */
%let FullName=%sysget(SAS_EXECFILEPATH);
%put FullName: &FullName.;
%let FullLen=%length(&FullName);
%put FullLen: &FullLen.;
%let BaseName=%sysget(SAS_EXECFILENAME);
%put BaseName: &BaseName.;
%let BaseLen=%length(&BaseName);
%put BaseLen: &BaseLen.;
%let PathLen=%eval(&FullLen.-&BaseLen.);
%put PathLen: &PathLen.;
%let PathName=%substr(&FullName,1,&PathLen);
%put PathName: &PathName.; 
```

合并和沉默：

```
/* Find src folder */
%let src=%substr(%sysget(SAS_EXECFILEPATH),1,%eval(%length(%sysget(SAS_EXECFILEPATH))-%length(%sysget(SAS_EXECFILENAME)))); 
```

这仅在定义 SAS_EXECFILEPATH 和 SAS_EXECFILENAME 时有效，并且不清楚何时定义。它在使用 Windows GUI 编辑器时确实有效。

# jquery - jQuery - 为每个实例独立地将每个元素高度设置为子元素高度

> ID：14409701
> 
> 赞同：0
> 
> 时间：2013-01-19T00:11:47.940
> 
> 标签：jquery, height

我在一个 jQuery 循环实例中有多个 html 块，如下所示：

```
<div class="pane" id="...">
 <div class="title">
  <span>...</span>
  <div class="sS">...</div>
 </div>
</div> 
```

`.pane`是循环幻灯片。我想独立地获得每个跨度的高度（因为它们包含不同数量的文本，所以有些会在较小的屏幕上换成两行）。

计算出高度后，我想将此值应用于父级的高度`.title`- 独立（无需根据 ID 为每个窗格手动完成所有工作）。

到目前为止，我有：

```
 $(".pane").each(function() {
    var tpheight =  $(this).find("span").outerHeight()
    $(this).find(".title").css({"height" : tpheight + "px"})
}) 
```

哪种作品（包含“px”没有区别）但第一个跨度显示为正确的高度，但其他窗格中的所有其他跨度都太短了。我正在使用`outerHeight`，因为我需要包含填充。这是我正在处理的页面：

[http://test.soundvaultstudios.co.uk/services](http://test.soundvaultstudios.co.uk/services)

许多其他帖子都谈到了获取最高元素的高度并将该值应用于所有其他元素，但我希望这些值都独立计算出来。我这样做的原因是当您将鼠标悬停在窗格上时，标题 div 的样式`height:auto`会显示 的内容`.sS`，然后在鼠标离开时，标题 div 的高度会恢复到跨度的高度。我希望这是有道理的，请查看该站点以了解我的意思。但是，悬停功能会生成正确的高度变化，但我希望页面以相同的方式加载。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:01:13.780

我知道我哪里错了。我的`each`函数设置得非常好，问题在于它相对于`cycle`初始化的位置（它导致放置在它之后的脚本出现故障）。将`cycle`初始化放在我的块中（或至少在我的每个函数之后）按我的意图进行。如果有人在使用 Cycle 时看到此问题，请记下您的脚本的顺序，Cycle 最后！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T01:09:44.593

也许试试...

```
$(".pane").each(function() {
    var tpheight =  $(this).find("span").outerHeight()
    $(this).find(".title").outerHeight(tpheight);
 }) 
```

另外，如果你正在设置css，它应该是......

```
 $(this).find(".title").css("height",tpheight) 
```

不是......

```
$(this).find(".title").css({"height" : tpheight + "px"}) 
```

# javascript - 使用内联动画关键帧定义？

> ID：14409706
> 
> 赞同：9
> 
> 时间：2013-01-19T00:12:18.893
> 
> 标签：javascript, css

我们有这种在 css 文件中定义关键帧的语法：

```
@-webkit-keyframes fade {
    from {opacity: 1;}
    to {opacity: 0.25;}
} 
```

我们像这样引用它：

```
.foo {
    -webkit-animation: fade 1s linear infinite;
} 
```

有没有办法只内联它，比如：

```
.foo {
    -webkit-animation: (from {opacity: 1;} to {opacity: 0.25;}) 1s linear infinite;
} 
```

有没有办法做到这一点，或者在运行时将“@-webkit-keyframes”元素注入我的样式表？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T01:05:50.890

看看[W3C CSS Animations WD](http://www.w3.org/TR/css3-animations/#animation-shorthand-property)，`animation`速记属性的语法是：

```
[<animation-name> || <animation-duration> || <animation-timing-function> || 
 <animation-delay> || <animation-iteration-count> || <animation-direction> || 
 <animation-fill-mode>] [, [<animation-name> || <animation-duration> ||
 <animation-timing-function> || <animation-delay> || <animation-iteration-count> ||
 <animation-direction> || <animation-fill-mode>] ]* 
```

这意味着它只需要[`animation-name`](https://developer.mozilla.org/en-US/docs/CSS/animation-name)用于选择为动画提供属性值的关键帧规则，然后是定义如何执行这些规则的其他参数。

`animation-name`目前，规范中没有定义允许在规则中定义内联关键帧的简写语法，您必须使用该属性引用现有的。从[规格](http://www.w3.org/TR/css3-animations/#animation-name-property)：

> 'animation-name' 属性定义了适用的动画列表。每个名称都用于选择为动画提供属性值的关键帧规则。如果名称与规则中的任何关键帧都不匹配，则没有要设置动画的属性并且动画将不会执行。

# symfony - Symfony2 - 生成没有教义捆绑的实体

> ID：14409708
> 
> 赞同：0
> 
> 时间：2013-01-19T00:12:25.823
> 
> 标签：symfony, doctrine-orm

是否可以在 Symfony2 框架中生成没有 Doctrine2 包的实体文件？我喜欢在控制台中快速轻松地生成实体的方式，然后可以根据实体生成 FormType

```
Now I am using 
1\. generate:doctrine:entities
2\. doctrine:generate:form
3\. Remove all ORM annotations and primary key from entity.
- it is a bit lame so I hope there is a Symfony better way. 
```

我不需要持久化实体，我将它们用于验证和从表单中收集数据，然后调用 Web 服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T06:40:24.550

如果您不想保留实体，那么您可以制作额外的捆绑包并将一些实体放在那里。然后，您可以为此使用不同的实体管理器映射。

在 config.yml 文件中，默认情况下，所有实体都由所有包中的实体管理器管理。但是您可以像这样告诉您希望该学说坚持哪些捆绑包

```
orm:
    auto_generate_proxy_classes: %kernel.debug%

    default_entity_manager:   default
    entity_managers:
        default:
            connection:       default
            mappings:
                MyTestBundle1: ~
                MyMainBUndle2: ~
        logger_em:
            connection:       logger_connection
            mappings:
                MyExtraBundle: ~ 
```

# javascript - 多个画布上的鼠标坐标 HTML5/Javascript

> ID：14409714
> 
> 赞同：0
> 
> 时间：2013-01-19T00:13:08.907
> 
> 标签：javascript, html, canvas, html5-canvas, dom-events

我正在尝试使用 2 个画布，我希望它们都接受放入其中的图像并使用鼠标单击来操作图像。这是我正在处理的代码。

我有它，如果我只有“droppedImage”画布的事件监听器，它就可以正常工作，只要我为“changeImage”画布放入处理程序，它就会看到第二个画布并将坐标报告为第一个画布的扩展和它不再显示 RGB 值或更改第三个画布“selectedColour”的背景

在我上床睡觉时发布此内容，如果有人给出答案或需要更多信息，我将在明天工作更新前弹出。

```
window.onload = function() {
    var droppedImage = document.getElementById("droppedImage"),
        ctx = droppedImage.getContext("2d");
    droppedImage.addEventListener("mouseup", mpos);
        // init event handlers
    droppedImage.addEventListener("dragenter", dragEnter, false);
    droppedImage.addEventListener("dragexit", dragExit, false);
    droppedImage.addEventListener("dragover", dragOver, false);
    droppedImage.addEventListener("drop", drop, false);

        var changeImage = document.getElementById("changeImage"),
        ctx = changeImage.getContext("2d");
    changeImage.addEventListener("mouseup", mpos);
    // init event handlers
    changeImage.addEventListener("dragenter", dragEnter, false);
    changeImage.addEventListener("dragexit", dragExit, false);
    changeImage.addEventListener("dragover", dragOver, false);
    changeImage.addEventListener("drop", drop, false);

    var selectedColour = document.getElementById("selectedColour");

function dragEnter(evt) {
    evt.stopPropagation();
    evt.preventDefault();
}

function dragExit(evt) {
    evt.stopPropagation();
    evt.preventDefault();
}

function dragOver(evt) {
    evt.stopPropagation();
    evt.preventDefault();
}

function drop(evt) {
    evt.stopPropagation();
    evt.preventDefault();

    var files = evt.dataTransfer.files;
    var count = files.length;

    // Only call the handler if 1 or more files was dropped.
    if (count >0)   
        importImage(files);
}

function mpos(e) {
    var cX = 0,
        cY = 0;

    if (event.pageX || event.pageY) {
        cX = event.pageX;
        cY = event.pageY;
    }
    else {
        cX = event.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;
        cY = event.clientY + document.body.scrollTop + document.documentElement.scrollTop;
    }

    cX -= droppedImage.offsetLeft;
    cY -= droppedImage.offsetTop;

   // ctx.fillRect(cX, cY, 2, 2);

   alert("X co-ord : "+ cX +", Y co-ord : "+ cY);
   var imageData = ctx.getImageData(cX, cY, 1, 1);
   alert("Pixel 1: "+ imageData.data[0]+", "+imageData.data[1]+", "+ imageData.data[2]+", "+ imageData.data[3]);
   selectedColour.style.backgroundColor = "rgb("+imageData.data[0]+","+imageData.data[1]+","+imageData.data[2]+")";

}
}

function importImage(files) {

    var file = files[0];
    var reader = new FileReader;
    reader.onloadend = handleReaderLoadEnd; 
    reader.readAsDataURL(file);

function handleReaderLoadEnd(evt){     

    var canvas = document.getElementsByTagName('canvas')[0];
    var ctx = canvas.getContext('2d');
    var img = new Image;
        img.src = event.target.result;          
        img.onload = function() {       
        width = img.width;
        height = img.height;        
        var scaleX, scaleY, scale;
        var scaledWidth, scaledHeight;
        scaleX = width / canvas.width;
        scaleY = height / canvas.height;
        scale = scaleX > scaleY ? scaleX : scaleY;
        scaledWidth = width / scale;
        scaledHeight = height / scale;
        ctx.clearRect(0,0, canvas.width, canvas.height);
        ctx.drawImage(img, (canvas.width - scaledWidth) / 2, (canvas.height - scaledHeight) / 2, scaledWidth, scaledHeight);

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T14:56:04.200

理论上，如果您有两组画布并向它们添加事件侦听器，那么根据设计，*两组*事件侦听器将*同时*触发。最好有一个附加了事件侦听器的画布，然后检测鼠标坐标并操纵正在单击的图像。请记住，您不能在画布内的绘制精灵上使用单击处理程序，只能在画布本身上使用；您检查鼠标坐标是否在绘制的精灵内。

在您的场景中，我将简单地复制放入的图像并将其传递给第二个画布元素。我假设您正在做某种二合一图像编辑应用程序；在这种情况下，我将在左侧有一个“拖放区”供图像进入，然后它会出现在右侧，可编辑。然后只在一个画布上使用点击处理程序。在[这个线程](https://stackoverflow.com/questions/13916966/adding-collision-detection-to-images-drawn-on-canvas/14062645)中，我对此也有更多的想法。

# javascript - 画布标签和滚动问题

> ID：14409718
> 
> 赞同：2
> 
> 时间：2013-01-19T00:13:48.423
> 
> 标签：javascript, html, canvas

我一直在研究两种不同的方法来创建带有 html5 代码的图形画布，允许图形的图形表示和水平滚动。画布代表某种时间线。当我们水平滚动时，我们的想法是以时间线的形式表示几年......例如：说计算机的历史发展......我在图表上绘制点参考xy坐标。这目前是手动的。稍后我计划基于 sql 查询来制作它。然后随着我滚动的更多，在未来几年/过去几年中绘制的点会相应地显示......给它一个连续的时间线感觉。

我一直在尝试用 html5 canvas 中的 2 种方法来尝试这个。有些人建议使用 SVG、silverlight、GDI +....

***方法1：-***

[http://jsfiddle.net/7KaKf/1/](http://jsfiddle.net/7KaKf/1/)

方法 - 创建一个网格，使用变量列表在网格上绘制点，在画布上单击鼠标 - 激活触发，拖动画布以水平滚动，再次单击画布并禁用滚动。

**这种方法的优势**- 水平滚动就像一个魅力！

但是，这种方法的问题是我不确定如何在该网格上绑定 y 轴标签，以便每个可滚动帧都具有一致的 x 轴和 y 轴标签。

注意：您可以查看我的下一个方法以了解标签的含义。

***方法2： -***

[http://jsfiddle.net/WNpKE/10/](http://jsfiddle.net/WNpKE/10/)

第二种方法的问题，主要是在捕获鼠标滚动/拖动事件并尝试重新绘制画布元素的函数中：-

```
window.onmousemove = function (e) {
  var evt = e || event;
  if (dragging) {
    var delta = evt.offsetX - lastX;
    translated += delta;

    //console.log(translated);

    ctx.restore();
    ctx.clearRect(0, 0, 930, 900);
    ctx.save();
    ctx.translate(translated, 0);
    lastX = evt.offsetX;
    timeline();
  }
} 
```

**另一个问题**可能是，即使在画布滚动时调用了时间线（），网格也是静态绘制的，在 x = 65 和 x = 930/ 之间，因此没有绘制其他网格。

尽管使用这种方法可以进行标记（第一种方法被证明很困难），但网格并不一致，一旦我滚动出第一帧，网格就会消失......虽然未来的绘制点是当我们滚动时仍然可见。

在我的第一种方法中，我使用了一个网格，当我们在画布上滚动时，它会不断重复自己……但是标记变得很困难……在第二种方法中，我标记了，但是创建这种重复网格的样式变得很困难。我遇到了很大的障碍。不知何故，我需要结合这两种方法来创建解决方案。任何人都可以帮忙吗？

如果有人也可以给我链接到酷帆布相关的理论材料。我会很感激。:)

***更新了第二种方法和解决方案：-***

[http://jsfiddle.net/WNpKE/12/](http://jsfiddle.net/WNpKE/12/)

使用这种方法，y 轴标签保持不变。背景网格正在复制。尽管这是我一直在寻找的解决方案（它并不完美），但欢迎进行任何修改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T10:17:08.987

我认为你应该坚持使用 D3 库：[http](http://d3js.org/) ://d3js.org/ 。它是数据可视化方面的绝对参考，即使它不是基于画布，但有大量示例，通过检查代码，您可以学到很多东西。

另一种是[paperjs](http://www.paperjs.org)，但这一种主要适用于用户交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:10:44.157

虽然我的解决方案还不完美，但可以在以下位置找到解决方案：-

[http://jsfiddle.net/WNpKE/12/](http://jsfiddle.net/WNpKE/12/)

解决方案：- 作为函数单独创建 xy 网格。

```
grid = (function (dX, dY) {
                        var can = document.createElement("canvas"),
                            ctx = can.getContext('2d');
                        can.width = dX;
                        can.height = dY;
                        // fill canvas color
                        ctx.fillStyle = 'black';
                        ctx.fillRect(0, 0, dX, dY);

                        // x axis
                        ctx.strokeStyle = 'orange';
                        ctx.moveTo(.5, 0.5);
                        ctx.lineTo(dX + .5, 0.5);
                        ctx.stroke();

                        // y axis
                        ctx.moveTo(.5, .5);
                        ctx.lineTo(.5, dY + .5);
                        ctx.stroke();

                        return ctx.createPattern(can, 'repeat');
                    })(72, 50); 
```

# php - 当帐单信息地址和送货信息地址相同时发出警报

> ID：14409719
> 
> 赞同：-1
> 
> 时间：2013-01-19T00:13:57.393
> 
> 标签：php, jquery

我已经构建并订购了输出当前变量的对象，如下所示。

我希望警报是...两个 div 突出显示为绿色。我假设我需要合并一些 jquery .. 这就是我所拥有的：

```
<div class='address_info left'>
            <h3>Billing Info</h3>
            <ul>
                <li><label>Account No: </label><?php echo $order->patient_id;?></li>
                <li><label>Name: </label><?php echo trim($order->billing_address['name']); ?></li>
                <li><label>Address 1: </label><?php echo trim($order->billing_address['addr1']);?></li>
                <li><label>Address 2: </label><?php echo trim($order->billing_address['addr2']);?></li>
                <li><label>City, State, Zip:</label><?php echo trim($order->billing_address['city'] . ' ' . $order->billing_address['state'] . ' ' . $order->billing_address['zip']);?></li>
                <li><label>Email: </label><a href='mailto:<?php echo $order->customer_email;?>'>Send Customer Email</a></li>
                <li><label>Phone: </label><?php echo $order->customer_phone;?></li>
            </ul>
        </div>  
        <div class='address_info right'>
            <h3>Shipping Info</h3>
            <ul>
                <li><label>Name: </label><?php echo $order->shipping_address['name']; ?></li>
                <li><label>Address 1: </label><?php echo $order->shipping_address['addr1'];?></li>
                <li><label>Address 2: </label><?php echo $order->shipping_address['addr2'];?></li>
                <li><label>City, State, Zip:</label><?php echo $order->shipping_address['city'] . ' ' . $order->shipping_address['state'] . ' ' . $order->shipping_address['zip']?></li>
                <li><label></label></li>
                <li><label></label></li>
                <li><label></label></li>
            </ul>
        </div> 
```

我目前在悬停时使用一些 CSS 来获取颜色。

```
div.address_info.left:hover {
    background: red;
    color: #fff; }

div.address_info.right:hover {
    background: #5C991F;
    color: #fff; }

div.order_info:hover {
    background: #3366FF;
    color: #fff; } 
```

所以这是我的更新：

```
if (count(array_diff($this->billing_address, $this->shipping_address)) > 0)
            return false;
        else
            return true; 
```

我想我真正的问题是如何在我的数据上运行 jquery 事件。很抱歉一开始又如此含糊不清。我想我们没有走对路。不过希望对 jQuery 有一些帮助。提前致谢。

感谢所有的帮助..我想通了！

```
if($order->check_addresses())
    $class='same';
else
    $class='different';

    <div class='address_info left <?php echo $class; ?>'>
         <div class='address_info right <?php echo $class; ?>'> 
```

而不是CSS

```
div.same {background-color: green;}
div.different {background-color: red;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T00:16:27.290

包含 PHP 和 jquery 是正确的。您可以使用 JavaScript 在客户端或使用 PHP 在服务器上执行此操作。试一试，遇到问题再回来。

在 PHP 中，您可以使用比较的结果在 div 上设置 CSS 类。然后在样式表中根据该类设置背景颜色。

在 JavaScript 中它会更复杂，但不需要访问服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T01:29:46.320

使用隐藏的输入你可以很容易地做到这一点。这是使用您的代码的示例。

```
 <!DOCTYPE html>
<html lang="en">
  <head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(function()
    { 
    var BillAddy = $("#billing").val();
    var ShipAddy = $("#shipping").val();

    if(BillAddy == ShipAddy)
        {
            $(".address_info ").css("backgroundColor","#00FF00");
            return true;
        }
    return false;
    });
</script>
  </head>
  <body>
<div class='address_info left'>
            <h3>Billing Info</h3>
            <ul>
            <input type="hidden" id="billing" value="<?php echo $order->billing_address; ?>" />
                <li><label>Account No: </label><?php echo $order->patient_id;?></li>
                <li><label>Name: </label><?php echo trim($order->billing_address['name']); ?></li>
                <li><label>Address 1: </label><?php echo trim($order->billing_address['addr1']);?></li>
                <li><label>Address 2: </label><?php echo trim($order->billing_address['addr2']);?></li>
                <li><label>City, State, Zip:</label><?php echo trim($order->billing_address['city'] . ' ' . $order->billing_address['state'] . ' ' . $order->billing_address['zip']);?></li>
                <li><label>Email: </label><a href='mailto:<?php echo $order->customer_email;?>'>Send Customer Email</a></li>
                <li><label>Phone: </label><?php echo $order->customer_phone;?></li>
            </ul>
        </div>  
        <div class='address_info right'>
            <h3>Shipping Info</h3>
            <ul>
                <input type="hidden" id="shipping" value="<?php echo $order->shipping_address; ?>" />
                <li><label>Name: </label><?php echo $order->shipping_address['name']; ?></li>
                <li><label>Address 1: </label><?php echo $order->shipping_address['addr1'];?></li>
                <li><label>Address 2: </label><?php echo $order->shipping_address['addr2'];?></li>
                <li><label>City, State, Zip:</label><?php echo $order->shipping_address['city'] . ' ' . $order->shipping_address['state'] . ' ' . $order->shipping_address['zip']?></li>
                <li><label></label></li>
                <li><label></label></li>
                <li><label></label></li>
            </ul>
  </body>
</html> 
```

# c - 连接到 IRC

> ID：14409720
> 
> 赞同：2
> 
> 时间：2013-01-19T00:13:57.570
> 
> 标签：c, sockets, irc

我正在寻找用 C 编写一个 IRC 客户端，问题是我有点 IRC 菜鸟，我不知道 IRC 服务器如何接受连接。

我的英语不太好，谁能给我看一些 IRC 连接的伪代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T00:19:26.883

它是一个基于线路的 TCP 协议。只需发送如下内容：

```
NICK MyNickname
USER MyUser 1 1 1 :I am awesome 
```

除此之外，只需`PING`用相应的. 响应 a 即可`PONG`。例子：

> $ telnet irc.freenode.net 6667
> :morgan.freenode.net 注意 * : 查找您的主机名...
> :morgan.freenode.net 注意 * : 检查
> 身份 :morgan.freenode.net 注意 * : 没有身份响应
> :morgan。 freenode.net NOTICE * : 找到你的主机名

我发了：

> NICK MyNickname
> USER MyUser 1 1 1 ：我很棒

我有：

> :morgan.freenode.net 001 MyNickname :欢迎来到freenode Internet Relay Chat Network MyNickname

该协议记录在[RFC1459](https://www.rfc-editor.org/rfc/rfc1459)中。自 RFC 发布以来最大的变化是昵称现在可以更长，通常最多 30 个字符。

# c++ - 如何在 C++ 中表示数字 2^1000？

> ID：14409721
> 
> 赞同：3
> 
> 时间：2013-01-19T00:14:29.027
> 
> 标签：c++

所以，我试图在 Project Euler 上做问题 #16，如果你还没有看到的话，来自[http://projecteuler.net 。](http://projecteuler.net)如下：

```
2^15 = 32768 and the sum of its digits is 3 + 2 + 7 + 6 + 8 = 26.

What is the sum of the digits of the number 2^1000? 
```

我无法弄清楚如何在 C++ 中表示数字 2^1000。我猜这有一个技巧，但我真的被卡住了。我真的不想要这个问题的答案，我只想知道如何将该数字表示为一个变量，或者如果可能有一个技巧，也许有人可以让我知道？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-19T00:16:12.710

将其表示为字符串。这意味着您需要编写两段代码：

1.  您需要编写一段代码来将数字加倍，给定该数字作为字符串。

2.  您需要编写一段代码来对表示为字符串的数字的数字求和。

有了这两块，就很简单了。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-19T00:30:44.893

对于这个问题，一个值得了解的好算法：

```
2^1 = 2
2^2 = 2 x 2 = 2 + 2
2^3 = 2 x (2 x 2) = (2 + 2) + (2 + 2)
2^4 = 2 x [2 x ( 2 x 2)] = [(2 + 2) + (2 + 2)] + [(2 + 2) + (2 + 2)] 
```

因此，我们有一个`recursive`定义，用于根据操作计算 2 的幂`addition`：`just add together two of the previous power of two.`

这个[链接](http://blog.functionalfun.net/2008/07/project-euler-problem-16-calculating.html)很好地解决了这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-19T02:56:10.687

这是一个完整的程序。数字保存在一个向量中。

```
#include <iostream>
#include <numeric>
#include <ostream>
#include <vector>

int main()
{
    std::vector<unsigned int> digits;
    digits.push_back(1);        // 2 ** 0 = 1

    const int limit = 1000;
    for (int i = 0; i != limit; ++i)
    {
        // Invariant: digits holds the individual digits of the number 2 ** i

        unsigned int carry = 0;
        for (auto iter = digits.begin(); iter != digits.end(); ++iter)
        {
            unsigned int d = *iter;
            d = 2 * d + carry;
            carry = d / 10;
            d = d % 10;
            *iter = d;
        }
        if (carry != 0)
        {
            digits.push_back(carry);
        }
    }

    unsigned int sum = std::accumulate(digits.cbegin(), digits.cend(), 0U);
    std::cout << sum << std::endl;

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T01:17:07.310

这个问题的重点是想出一种方法来做到这一点，而无需实际计算 2^1000。

但是，如果您*确实*想计算 2^1000（这可能是个好主意，因为这是测试您的其他算法是否正确的好方法），您将需要某种“bignum”库，例如[`gmp`](http://gmplib.org/manual)：

```
mpz_t two_to_1000;
mpz_ui_pow_ui(two_to_1000, 2, 1000); 
```

或者，您可以使用[C++ 接口](http://gmplib.org/manual/C_002b_002b-Interface-General.html)来`gmp`. 它不做幂运算，所以第一部分变得稍微复杂而不是更少，但它使数字求和更简单：

```
mpz_class two_to_1000;
mpz_ui_pow_ui(two_to_1000.get_mpz_t(), 2, 1000);
mpz_class digitsum(0);
while (two_to_1000) {
    digitsum += two_to_1000 % 10;
    two_to_1000 /= 10;
} 
```

（实际上没有理由在那里做`digitsum`，`mpz`所以你可能想弄清楚如何证明结果适合 32 位，将其添加为注释，然后使用`long`for `digitsum`。）

话虽如此，我可能不会编写这段`gmp`代码来测试它，因为整个事情都是 Python 中的单行代码：

```
 print(sum(map(int, str(2**1000)))) 
```

而且，即使将 bignum 转换为字符串以将每个数字转换为 int 来总结它们可能是解决它的最不有效的方法，但在我这里最慢的机器上它仍然需要不到 200us。确实没有理由双重检查需要与实际解决方案使用相同的语言。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-19T01:00:12.090

您需要一个 1000 位机器整数来表示 2^1000；我从来没有听说过有这样的机器。但是周围有很多大整数包，它们根据需要对尽可能多的机器字进行算术运算。最简单的解决方案可能是使用其中之一。（尽管考虑到您需要的特定操作，但正如 David Schwartz 建议的那样，对字符串进行算术运算可能是合适的。在一般情况下，这不是一个好主意，但因为您所做的只是乘以 2，然后取小数位数，它可能会很好。）

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-19T01:04:12.293

因为 2^10 大约是 10^3，并且 2^1000 = (2^10)^100 = (10^3)​​^100 = 10^300（大约）。所以分配一个数组

```
char digits[ 300 ]; // may be too few 
```

并在每个字符中存储 0 .. 9 之间的值。

# c# - 每天运行任务以计算产品浏览量（没有 cronjob）

> ID：14409722
> 
> 赞同：2
> 
> 时间：2013-01-19T00:14:31.380
> 
> 标签：c#, asp.net, counter

我想创建一个计数器，每天，每周和所有时间。我数据库中的每个产品都会有一个每周、每天和 all_time 计数器。我的目标是能够模仿 cronjob。我想知道这是否是正确的做法。

假设我将只针对每日计数器。在我的产品表中的数据库中，我将有一行名为**'daily_counter'**。对于每个产品，它将被初始化为零。另一个表将只有一行被调用`'for_Day'`，该行包含每日计数器适用的那一天。

我还将用一行初始化与表对应的应用程序变量，并将“for_day”中的值读取到`Application["for_day"]`变量中。这只会在应用程序第一次启动时发生。

对于每个用户的产品页面的每个视图，我将执行以下操作（使用 C#）

获取当前日期编号

```
Int current_day = DateTime.Now.Day; 
```

将当前日期与 Application["for_day"] 中的内容进行比较

```
if(current_day == Application["for_day"]){ // same day from last counter reset
 // do nothing
} 
```

如果它们相等，则什么也不做。

```
else if(current_day > Application["for_day"]){ // new day

 1\. Reset the daily counter in the database to zero
 2\. Application["for_day"] = current_day;
 3\. Update the column for_day in the database to current_day

} 
```

我对访问我网站的每个用户进行此项检查。这应该每天只运行一次，并将数据库中的每日计数器重置为 0，以便前几天访问该站点的第一个用户。即使第一个用户在两天后出现，它仍然应该可以正常工作，因为它会相应地更新数据，并且所有用户都会看到当天的新计数器。

我认为这比 cronjob 更可取，我只在 application_Start 查询数据库，并且每天最多查询一次。在负载均衡器的多台服务器上启动我的 Web 应用程序时，我的解决方案应该可以工作。因为数据库位于远程位置并且不会在每台服务器上抵抗，所以我认为这应该可以正常工作。

我想听听你对这项技术的看法，它是否会像我预期的那样工作，以及是否有办法改进它。我更喜欢这个，因为我不依赖外部 cronjob 服务/服务器，一切都在我的应用程序中。

我正在用 ASP.NET 和 C# 开发我的应用程序，并将其安装在 Windows 2008 服务器上，它将在负载均衡器后面运行，可能是 Amazon AWS ElasticBeans。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T02:46:12.740

这是一个坏主意，原因有很多：

*   当应用程序因为没有人访问而卸载时，所有应用程序变量值都会丢失（我认为默认应用程序回收时间为 20 分钟）。
*   当多个线程尝试运行此代码时，您将不得不处理竞争条件。
*   您将如何确保同一用户不会多次增加相同的产品计数？

[在这个线程](https://stackoverflow.com/questions/246919/page-view-counter-like-on-stackoverflow)中有几个好主意：

*   每次点击时将视图计数直接存储到数据库中。
*   使用每日 cookie 或特定日期的资源 url 来防止同一用户多次点击（这可以避免，但 99.9% 的用户不会尝试） - 作为附带好处，这是客户端，所以如果用户已经访问过一个产品，它甚至不必导致另一个数据库命中。

# vb.net - 水晶报告打印错误：尝试读取或写入受保护的内存

> ID：14409736
> 
> 赞同：0
> 
> 时间：2013-01-19T00:16:50.990
> 
> 标签：vb.net, crystal-reports

请在用户单击打印按钮时出现此错误，在我的 PC 上不会出现该错误，仅在某些 PC 上出现！问题是什么 ？

以前，这个错误没有出现，现在才出现！

我在 vb.net 水晶报告中的代码，用于本地服务器上 vs2010 报告的数据源

编辑：这是我的代码（报告加载按钮）：

```
 Dim mov As New leavingReport
    Dim rep As New rep
    LogOn(mov, DataBasePath, DataBasePath, "Admin", "")
    rep.CrystalReportViewer1.ReportSource = mov
    mov.Refresh()
    rep.ShowDialog()
    mov.Dispose()
    rep.Dispose() 
```

谢谢你

# ios - 有谁知道_UIApplicationDidRemoveDeactivationReasonNotification？

> ID：14409739
> 
> 赞同：4
> 
> 时间：2013-01-19T00:17:22.893
> 
> 标签：ios, nsnotificationcenter

每当发布 _UIApplicationDidRemoveDeactivationReasonNotification 通知（这是苹果私有 NSNotification）时，它在其 userInfo 中保存一个 NSNumber，有谁知道，每个数字是什么意思？

关键是 _UIApplicationDeactivationReasonUserInfoKey

到目前为止，我所知道的第 5 位意味着应用程序已为 InAppPurchase 验证而退出活动（这是一条操作系统消息，在用户单击“取消”或“购买”之前，您的应用程序将处于非活动状态）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-03T16:52:04.150

所以我需要这个，我得到了一些解码的值。

我正在查看另一个`_UIApplicationWillAddDeactivationReasonNotification` 具有相同值键的类似通知`_UIApplicationDeactivationReasonUserInfoKey`

它们在这里（对于 ios6/7）：

```
// notification/control center overlay
kDeactivationReasonControlOverlay = 1,
// double tapped for the task manager mode
kDeactivationReasonTaskManager = 2,
// app is going inactive, eg: locked, enter background, power off screen, phone call, voice control (not siri)
kDeactivationReasonLockScreen = 3,
// system alerts, eg: privacy permissions, IAP dialogs
kDeactivationReasonSystemAlert = 5,
// siri overlay
kDeactivationReasonSiriOverlay = 6, 
```

但是我没有可以重现 4 的测试用例。而且我不知道 0 或 6 以上的值是否是有效值，如果有人知道请发表评论！

# mysql - 如何在下面的示例中正确执行 SQL 中的计数

> ID：14409740
> 
> 赞同：1
> 
> 时间：2013-01-19T00:17:23.377
> 
> 标签：mysql, sql, database, join

我在下面有一个数据库示例：

**会话表：**

```
SessionId (PK auto)  SessionName
1                    SODJW 
```

**问题表：**

```
QuestionId (PK auto)  QuestionContent  SessionId (FK) refer to Session
1                     Blah             1   
2                     Blah Blah        1
3                     Blah Blah Blah   1 
```

**Penalty_Marks 表：**

```
PenaltyAnswerId  PenaltyMarks  QuestionId (FK) refer to Question
1                1             1
2                0             1
3                1             2
4                2             3
5                2             3 
```

现在我想执行一个计算`PenaltyMarks`会话的 SQL。因此，要做到这一点，我们需要知道哪个`QuestionId`属于`SessionId`，然后计算标记。

我的问题是如何编写 SQL 以便能够在其中找到`QuestionId`' `SessionId`，然后我们可以计算罚分？我问这个的原因是因为它给了我不正确的计数值。

我的尝试：

```
SELECT COUNT(PenaltyMarks)
FROM Session s
INNER JOIN Question q ON s.SessionId = q.SessionId
INNER JOIN Penalty_Marks pm ON q.QuestionId = pm.QuestionId
WHERE s.SessionId = 1; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T00:22:23.073

您的查询返回行数，而不是罚分总数。您还说您需要查看每个会话的问题以及总罚分，因此您必须按会话 ID 和问题 ID 进行分组。

```
SELECT s.SessionId,q.QuestionId,SUM(pm.PenaltyMarks)
    FROM Session s
    INNER JOIN Question q ON s.SessionId = q.SessionId
    INNER JOIN Penalty_Marks pm ON q.QuestionId = pm.QuestionId
    GROUP BY s.SessionId,q.QuestionId 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/006ca/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T00:19:58.067

我认为你想要`SUM(PenaltyMarks)`而不是`COUNT(PentaltyMarks)`你可能还需要一个`GROUP BY QuestionId`

我现在无法测试它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T00:20:18.877

Count 返回行数；您想使用[sum()](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_sum)，它将为您添加行中的值。

# python - 动态和/或静态直线/正交/XY凸包

> ID：14409743
> 
> 赞同：2
> 
> 时间：2013-01-19T00:18:01.987
> 
> 标签：python, performance, algorithm, convex

我正在寻找一种有效的算法来处理 2D 动态[直线凸包](http://en.wikipedia.org/wiki/Rectilinear_convexity)。

我编写了一个静态算法，虽然它在大多数情况下都有效，但它根本不起作用，所以我也在寻找关于静态直线凸包的资源。维基百科有一些关于算法的研究论文，但我无法访问它们。所以寻找其他来源或帮助编写代码。

任何帮助将不胜感激，Python中的算法，非常感谢。

当前静态代码：

```
def stepped_hull(points, is_sorted=False, return_sections=False):
    # May be equivalent to the orthogonal convex hull

    if not is_sorted:
        points = sorted(set(points))

    if len(points) <= 1:
        return points

    # Get extreme y points
    min_y = min(points, lambda p:p[1])
    max_y = max(points, lambda p:p[1])

    points_reversed = list(reversed(points))

    # Create upper section
    upper_left = build_stepped_upper(points, max_y)
    upper_right = build_stepped_upper(points_reversed, max_y)

    # Create lower section
    lower_left = build_stepped_lower(points, min_y)
    lower_right = build_stepped_lower(points_reversed, min_y)

    # Correct the ordering
    lower_right.reverse()
    upper_left.reverse()

    if return_sections:
        return lower_left, lower_right, upper_right, upper_left

    # Remove duplicate points
    hull = OrderedSet(lower_left + lower_right + upper_right + upper_left)
    return list(hull)

def build_stepped_upper(points, max_y):
    # Steps towards the highest y point

    section = [points[0]]

    if max_y != points[0]:
        for point in points:
            if point[1] >= section[-1][1]:
                section.append(point)

            if max_y == point:
                break
    return section

def build_stepped_lower(points, min_y):
    # Steps towards the lowest y point

    section = [points[0]]

    if min_y != points[0]:
        for point in points:
            if point[1] <= section[-1][1]:
                section.append(point)

            if min_y == point:
                break
    return section 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-01-06T23:08:09.463

为了实现正确的算法，您可能想看看[这个](https://math.stackexchange.com/questions/1354195/rectilinear-convex-hull)。对于Rectilinear Convex hull的动态维护，最好寻找动态数据结构来维护Maxima of a Set，这是一个研究较多的课题。点集的最大元素集是 Rectilinear Convex Hull 的顶点集，所以这两个问题是等价的。

[您可以在本文](https://doi.org/10.1137/S0097539798348365)中找到每次操作花费 $O(\log n)$ 时间的算法。

# ios - 如何解决 ObjCHiredis redis 的设置块

> ID：14409753
> 
> 赞同：1
> 
> 时间：2013-01-19T00:19:08.197
> 
> 标签：ios, redis

当我使用 ObjCHiredis redis 连接到无效的 IP 和端口时，它会被阻塞。如何将其设置为非阻塞模式？谢谢

```
- (void)setUp {
NSLog(@"begin setUp");
NSString *ip = @"125.124.125.125";
self.redis = [ObjCHiredis redis:ip on:[NSNumber numberWithInt:123] db:[NSNumber numberWithInt:0]];
if(self.redis == nil)
{
    NSLog(@"init redis error.");
    return ;
}
 NSLog(@"end setUp");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T00:42:32.977

最简单的方法可能是在单独的线程上运行连接并使用块来处理主线程上的响应。

这是我经常用来执行任何类型的异步任务的辅助方法。我已经对其进行了调整，因此它应该适用于您正在尝试做的事情：

```
+(void)threadedConnect:(NSString*)ip On:(int)port DB:(int)db WithResponseTask:(void(^)(ObjCHiredis *redis))task
{
    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0);

    dispatch_async(queue, ^{

        ObjCHiredis *redis = [ObjCHiredis redis:ip
                                on:[NSNumber numberWithInt:port]
                                db:[NSNumber numberWithInt:db]];

        // Run completion block back on main thread with result as argument
        dispatch_async(dispatch_get_main_queue(), ^{ task(redis); });
    });
} 
```

# php - 维基百科不喜欢 file_get_contents

> ID：14409758
> 
> 赞同：0
> 
> 时间：2013-01-19T00:19:23.080
> 
> 标签：php, proxy, file-get-contents, wikipedia

我使用 PHP 函数`file_get_contents`作为代理来获取两个不同 Web 主机上的网站。

它适用于除维基百科以外的所有网站。

它每次都给我这个输出：

> WIKIMEDIA FOUNDATION
> 错误
> 我们的服务器当前遇到技术问题。这可能是暂时的，应该尽快修复。请在几分钟后再试一次。

有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T00:25:13.157

您可能没有通过正确的用户代理。见[**这里**](http://meta.wikimedia.org/wiki/User-Agent_policy)。

您应该将上下文传递给`file_get_contents`：

*   [PHP: `file_get_contents`- 手动](http://php.net/file_get_contents)
*   [PHP: `stream_context_create`- 手动](http://php.net/stream_context_create)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T00:27:13.603

维基媒体基金会的[政策](//meta.wikimedia.org/wiki/User-Agent_policy)是阻止带有非描述性或缺少 User-Agent 标头的请求，因为这些请求往往源自行为不端的脚本。“PHP”是此标头的黑名单值之一。

您应该[将默认的 User-Agent 标头更改为](//www.mediawiki.org/wiki/API%3aQuick_start_guide#Identifying_your_client)标识您的脚本以及系统管理员在必要时如何与您联系的标头：

```
ini_set('user_agent', 'MyCoolTool/1.1 (http://example.com/MyCoolTool/; MyCoolTool@example.com)'); 
```

当然，请务必更改名称、URL 和电子邮件地址，而不是逐字复制代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T00:26:00.143

Wikipedia 要求`User-Agent`随请求一起发送 HTTP 标头。默认情况下，`file_get_contents`不发送。

您应该使用`fsockopen`、`fputs`和`feof`来`fgets`发送完整的 HTTP 请求，或者您可以使用 cURL 来完成。我个人的经验是`f*`功能，所以这里有一个例子：

```
$attempts = 0;
do {
    $fp = @fsockopen("en.wikipedia.org",80,$errno,$errstr,5);
    $attempts++;
} while(!$fp && $attempts < 5);
if( !$fp) die("Failed to connect");
fputs($fp,"GET /wiki/Page_name_here HTTP/1.0\r\n"
     ."Host: en.wikipedia.org\r\n"
     ."User-Agent: PHP-scraper (your-email@yourwebsite.com)\r\n\r\n");
$out = "";
while(!feof($fp)) {
    $out .= fgets($fp);
}
fclose($fp);
list($head,$body) = explode("\r\n\r\n",$out);
$head = explode("\r\n",$head);
list($http,$status,$statustext) = explode(" ",array_shift($head),3);
if( $status != 200) die("HTTP status ".$status." ".$statustext);
echo $body; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T00:56:13.963

为此使用 cURL：

```
$ch = curl_init('http://wikipedia.org');
curl_setopt_array($ch, array(
    CURLOPT_USERAGENT => 'Mozilla/5.0 (Windows NT 5.1; rv:18.0) Gecko/20100101 Firefox/18.0',
    CURLOPT_FOLLOWLOCATION => true,
    CURLOPT_RETURNTRANSFER => true
);
$data = curl_exec($ch);
echo $data; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-19T00:25:19.867

我假设您已经“在几分钟内再次尝试”。

您可以尝试的下一件事是使用 cURL 而不是`file_get_contents`，并将用户代理设置为常用浏览器之一。

如果它仍然不起作用，它至少应该为您提供更多信息。

# git - 多个 bitbucket 帐户的 ssh 配置 - 简单示例，但“远程端意外挂断”

> ID：14409761
> 
> 赞同：14
> 
> 时间：2013-01-19T00:19:28.507
> 
> 标签：git, bitbucket, ssh-keys

假设我的 bitbucket 用户名是“jon”，并且我在`https://bitbucket.org/jon`.

假设我随后加入了一个开发团队，该团队有一个名为“devteam”的 bitbucket 帐户，可以在`https://bitbucket.org/devteam`

然后假设我正在设置一台新机器。我生成了一个 ssh 密钥对，`id_rsa`它们`id_rsa.pub`位于`~/.ssh`. 然后我的开发团队负责人将我`id_rsa.pub`的公钥添加到 bitbucket 上的 devteam 帐户。现在我可以从 devteam 帐户克隆项目并开始工作了。

接下来我想与我自己的`jon`帐户进行交互。但是，我无法将`id_rsa.pub`密钥添加到我的 bitbucket 帐户，因为 bitbucket 告诉我该密钥已添加到帐户中。这意味着我必须生成第二个密钥对。所以我`ssh-keygen -f ~/.ssh/jon -C "jon"`按照这里的指示运行：[https](https://confluence.atlassian.com/pages/viewpage.action?pageId=271943168) ://confluence.atlassian.com/pages/viewpage.action?pageId=271943168然后我将此`jon.pub`密钥添加到我`jon`在 bitbucket 的帐户中。

现在我有两个密钥对，`id_rsa`并且`jon`，我必须配置何时使用哪个密钥。按照上面链接的 bitbucket 帮助页面中的说明，我`config`在我的目录中创建了一个文件，`~/.ssh`其中包含以下内容：

```
Host devteam
 HostName bitbucket.org
 IdentityFile ~/.ssh/id_rsa
Host jon
 HostName bitbucket.org
 IdentityFile ~/.ssh/jon 
```

然后我被告知我可以进行以下替换：从`git@bitbucket.org:jon/reponame.git`到`git@jon:jon/reponame.git`

所以我尝试执行以下命令：`git clone git@jon:jon/reponame.git`我收到以下错误：

```
Initialized empty Git repository in /home/jon/dev/reponame/.git/
Bad owner or permissions on /home/jon/.ssh/config
fatal: The remote end hung up unexpectedly 
```

我做错什么了？

编辑：这是我`~/.ssh`目录中的文件权限：

```
[jon@linuxmachine ~/.ssh]
 1$ ls -alh
total 32K
drwx------.  2 jon 4.0K Jan 18 19:20 ./
drwx------. 11 jon 4.0K Jan 18 19:34 ../
-rw-rw-r--.  1 jon  132 Jan 18 19:20 config
-rw-------.  1 jon 1.8K Jan 18 15:21 id_rsa
-rw-r--r--.  1 jon  406 Jan 18 15:21 id_rsa.pub
-rw-------.  1 jon 1.7K Jan 18 18:45 jon
-rw-r--r--.  1 jon  390 Jan 18 18:45 jon.pub
-rw-r--r--.  1 jon  808 Jan 18 18:40 known_hosts 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-10-31T12:44:16.637

我有同样的问题。在我将文件的权限更改为之后`~/.ssh/config`，`-rw-r--r--`错误

```
Bad owner or permissions on /home/username/.ssh/config
fatal: The remote end hung up unexpectedly 
```

消失了。

在控制台中写入：

```
cd ~/.ssh
chmod 644 config 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T16:21:53.320

关于出现在`../.ssh/`文件夹中的 RSA 文件，我通过删除任何损坏的文件修复了这个问题，然后在安装 GitHub 时再次生成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-03T11:28:43.397

这些命令应该可以解决问题：

```
chown $USER ~/.ssh/config
chmod 644 ~/.ssh/config 
```

`sudo`如果文件由不同的用户拥有，则带有前缀。

如果有更多文件受到影响，请替换`config`为`*`.

在`man ssh`我们可以阅读：

> 由于存在滥用的可能性，因此该文件必须具有严格的权限：用户读/写，其他人不可写。如果所讨论的组仅包含用户，则它可以是组可写的。

# css - Redirect_to session_path 控制器并查看 RAILS DEVISE

> ID：14409765
> 
> 赞同：0
> 
> 时间：2013-01-19T00:20:06.553
> 
> 标签：css, ruby-on-rails, redirect, view, controller

为什么这不起作用？我尝试了多种选择，例如渲染和放置，但它不想正确更改。几个想法用户？

**风景：**

```
<div id = "container">
    <div id = "smaller-container">
    <%= user_signed_in? %>
  <%= @Uchecker %>
  <% else %>
     <%= link_to "Sign Up", new_user_registration_path, :id => "SignUpText" %>
    </div> 
```

**控制器：**

```
class PostsController < ApplicationController
  def Uchecker
    @Uchecker = redirect_to user_session_path
 end
end 
```

# opencl - 比较 Intel Xeon Phi 和 Nvidia Tesla K20 的基准

> ID：14409778
> 
> 赞同：12
> 
> 时间：2013-01-19T00:21:58.040
> 
> 标签：opencl, gpu, benchmarking, nvidia, xeon-phi

令我惊讶的是，我找不到使用开源 OpenCL 基准套件（例如[rodinia](https://www.cs.virginia.edu/~skadron/wiki/rodinia/index.php/Main_Page)和[SHOC](https://github.com/spaffy/shoc/wiki) ）的这些产品的比较。这样的比较可能比理论峰值性能的比较或简单矩阵乘法内核的性能比较更有趣，我已经找到了。

有谁知道在哪里可以获得这样的结果？如果做不到这一点，是否有任何堆栈溢出用户可以访问一种或两种产品，以及运行基准测试和共享结果的时间和倾向？任何一张卡的任何版本的结果都会很有趣。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-16T10:00:26.453

CLBenchmark.com 现在有一些[Xeon Phi的结果，以及](http://clbenchmark.com/device-info.jsp?config=15887974)[K20c](http://clbenchmark.com/device-info.jsp?config=14378297)的完整集。

[这是一个并排的比较](http://clbenchmark.com/compare.jsp?config_0=14378297&config_1=15887974)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-11T11:35:20.830

这是 Xeon Phi 与 GTX Titan 的比较。

[http://clbenchmark.com/compare.jsp?config_0=14470292&config_1=15887974](http://clbenchmark.com/compare.jsp?config_0=14470292&config_1=15887974)

Xeon Phi 基本上在 10/12 基准测试中完全被破坏，并且与其他 2 个相当。因此，300 瓦 22 纳米 Phi 部分与 250 瓦 28 纳米 GPU 相比并不好。

基本上，Phi 似乎在利用其带宽容量时遇到了重大问题，矢量化代码似乎是另一个问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-08T14:28:09.680

这是比较稀疏矩阵乘法性能的基准：

[http://uk.arxiv.org/abs/1302.1078](http://uk.arxiv.org/abs/1302.1078)

它部分回答了我的问题，但我宁愿看到不止一种算法，而且我想看看 OpenCL 的可移植性如何，我仍然会接受任何可以提供该信息的答案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-21T06:26:20.450

Xeon Phi 的 SHOC 基准测试套件位于 github 上：

[英特尔至强融核 SHOC 基准套件](https://github.com/vetter/shoc-mic?source=c)

大量的基准测试帖子开始公开和“谷歌搜索”，但这里是关于 Xeon Phi 与双插槽 E5-2670 基准测试的标准英特尔通信：

[英特尔至强融核性能文档](http://www.intel.com/content/dam/www/public/us/en/documents/performance-briefs/xeon-phi-product-family-performance-brief.pdf)。

在将 Xeon Phi 的性能与常规 Xeon 或任何其他平台进行比较时，请确保您考虑了平台的功率包络（双插槽 Xeon）以及应用程序是否已经针对 Xeon 进行了调整。Xeon Phi 的一大卖点是，除了 Xeon Phi 改进之外，您通常还会获得 Xeon 改进。蛮甜的。。

# jquery - Bootstrap DatePicker，如何设置明天的开始日期？

> ID：14409779
> 
> 赞同：40
> 
> 时间：2013-01-19T00:22:02.953
> 
> 标签：jquery, twitter-bootstrap, bootstrap-datepicker

如何设置明天的 startDate？我在 Date.today 的文档中没有看到选项，因此我可以再添加一天。

有没有办法做到这一点？

```
$(function() {
    $("#appointment_adate").datepicker({
        format: 'yyyy-mm-d',
        autoclose: true,
        startDate: '+1d'    
    });
}); 
```

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-01-19T00:50:46.763

bootstrap 没有官方的日期选择器；因此，您应该明确说明您正在使用哪一个。

如果您使用的是[eternicode/bootstrap-datepicker](https://github.com/eternicode/bootstrap-datepicker)，则有一个[startDate](https://github.com/eternicode/bootstrap-datepicker/blob/ca11c450/README.md#startdate)选项。正如README 中的[Options 部分](https://github.com/eternicode/bootstrap-datepicker/blob/ca11c450/README.md#options)直接讨论的那样：

> 所有带有“日期”的选项都可以处理日期对象；根据给定格式格式化的字符串；**或相对于今天**的时间增量，例如“-1d”、“+6m +1y”等，其中有效单位为“d”（天）、“w”（周）、“m”（月）和“y” ' （年）。

所以你会这样做：

```
$('#datepicker').datepicker({
    startDate: '+1d'
}) 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-19T00:33:26.137

如果您正在谈论[Bootstrap 的 Datepicker](http://vitalets.github.com/bootstrap-datepicker/)，您可以使用以下命令设置开始日期（最小日期）：

```
$('#datepicker').datepicker('setStartDate', <DATETIME STRING HERE>); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-11-15T06:01:40.957

```
this.$('#datepicker').datepicker({minDate: 1}); 
```

`minDate:0`- 从当前日期启用日历中的日期。`MinDate:1`在日历中启用日期`currentDate+1`

要限制从明天到下个月同一天之间的日期，您需要提供类似

```
$( "#datepicker" ).datepicker({ minDate: 1, maxDate: "+1M" }); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-03-24T17:26:30.257

如果你使用[bootstrap-datepicker](https://github.com/uxsolutions/bootstrap-datepicker)你可以使用这种风格：

```
$('#datepicker').datepicker('setStartDate', "01-01-1900"); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-07-29T06:08:13.103

1) 用于明天的日期 startDate: '+1d'

2) 用于昨天的日期 startDate: '-1d'

3) 用于今天的日期 startDate: new Date()

# java - 找不到源：SQLiteCursor.class

> ID：14409780
> 
> 赞同：3
> 
> 时间：2013-01-19T00:22:05.037
> 
> 标签：java, android

在调试中运行并按 F8 继续将得到这个“类文件编辑器 - 找不到源错误”

```
// Compiled from SQLiteCursor.java (version 1.5 : 49.0, super bit)
public class android.database.sqlite.SQLiteCursor extends     android.database.AbstractWindowedCursor {

// Method descriptor #8 (Landroid/database/sqlite/SQLiteDatabase;Landroid/database/sqlite    /SQLiteCursorDriver;Ljava/lang/String;Landroid/database/sqlite/SQLiteQuery;)V
// Stack: 3, Locals: 5
  public SQLiteCursor(android.database.sqlite.SQLiteDatabase db,     android.database.sqlite.SQLiteCursorDriver driver, java.lang.String editTable, android.database.sqlite.SQLiteQuery query);
     0  aload_0 [this]
 1  invokespecial android.database.AbstractWindowedCursor() [1]
 4  new java.lang.RuntimeException [2]
 7  dup
 8  ldc <String "Stub!"> [3]
10  invokespecial java.lang.RuntimeException(java.lang.String) [4]
13  athrow
  Line numbers:
    [pc: 0, line: 5]
  Local variable table:
    [pc: 0, pc: 14] local: this index: 0 type: android.database.sqlite.SQLiteCursor
    [pc: 0, pc: 14] local: db index: 1 type: android.database.sqlite.SQLiteDatabase
    [pc: 0, pc: 14] local: driver index: 2 type: android.database.sqlite.SQLiteCursorDriver
    [pc: 0, pc: 14] local: editTable index: 3 type: java.lang.String
    [pc: 0, pc: 14] local: query index: 4 type: android.database.sqlite.SQLiteQuery

// Method descriptor #23 (Landroid/database/DataSetObserver;)V
// Stack: 3, Locals: 2
public void registerDataSetObserver(android.database.DataSetObserver observer);
 0  new java.lang.RuntimeException [2]
 3  dup
 4  ldc <String "Stub!"> [3]
 6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
 9  athrow
  Line numbers:
    [pc: 0, line: 6]
  Local variable table:
    [pc: 0, pc: 10] local: this index: 0 type: android.database.sqlite.SQLiteCursor
    [pc: 0, pc: 10] local: observer index: 1 type: android.database.DataSetObserver

// Method descriptor #27 ()Landroid/database/sqlite/SQLiteDatabase;
// Stack: 3, Locals: 1
public android.database.sqlite.SQLiteDatabase getDatabase();
 0  new java.lang.RuntimeException [2]
 3  dup
 4  ldc <String "Stub!"> [3]
 6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
 9  athrow
  Line numbers:
    [pc: 0, line: 7]
  Local variable table:
    [pc: 0, pc: 10] local: this index: 0 type: android.database.sqlite.SQLiteCursor

// Method descriptor #29 (II)Z
// Stack: 3, Locals: 3
public boolean onMove(int oldPosition, int newPosition);
 0  new java.lang.RuntimeException [2]
 3  dup
 4  ldc <String "Stub!"> [3]
 6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
 9  athrow
  Line numbers:
    [pc: 0, line: 8]
  Local variable table:
    [pc: 0, pc: 10] local: this index: 0 type: android.database.sqlite.SQLiteCursor
    [pc: 0, pc: 10] local: oldPosition index: 1 type: int
    [pc: 0, pc: 10] local: newPosition index: 2 type: int

// Method descriptor #34 ()I
// Stack: 3, Locals: 1
public int getCount();
 0  new java.lang.RuntimeException [2]
 3  dup
 4  ldc <String "Stub!"> [3]
 6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
 9  athrow
  Line numbers:
    [pc: 0, line: 9]
  Local variable table:
    [pc: 0, pc: 10] local: this index: 0 type: android.database.sqlite.SQLiteCursor

// Method descriptor #36 (Ljava/lang/String;)I
// Stack: 3, Locals: 2
public int getColumnIndex(java.lang.String columnName);
 0  new java.lang.RuntimeException [2]
 3  dup
 4  ldc <String "Stub!"> [3]
 6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
 9  athrow
  Line numbers:
    [pc: 0, line: 10]
  Local variable table:
    [pc: 0, pc: 10] local: this index: 0 type: android.database.sqlite.SQLiteCursor
    [pc: 0, pc: 10] local: columnName index: 1 type: java.lang.String

// Method descriptor #39 ()[Ljava/lang/String;
// Stack: 3, Locals: 1
public java.lang.String[] getColumnNames();
 0  new java.lang.RuntimeException [2]
 3  dup
 4  ldc <String "Stub!"> [3]
 6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
 9  athrow
  Line numbers:
    [pc: 0, line: 11]
  Local variable table:
    [pc: 0, pc: 10] local: this index: 0 type: android.database.sqlite.SQLiteCursor

// Method descriptor #41 ()V
// Stack: 3, Locals: 1
public void deactivate();
 0  new java.lang.RuntimeException [2]
 3  dup
 4  ldc <String "Stub!"> [3]
 6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
 9  athrow
  Line numbers:
    [pc: 0, line: 12]
  Local variable table:
    [pc: 0, pc: 10] local: this index: 0 type: android.database.sqlite.SQLiteCursor

// Method descriptor #41 ()V
// Stack: 3, Locals: 1
public void close();
 0  new java.lang.RuntimeException [2]
 3  dup
 4  ldc <String "Stub!"> [3]
 6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
 9  athrow
  Line numbers:
    [pc: 0, line: 13]
  Local variable table:
    [pc: 0, pc: 10] local: this index: 0 type: android.database.sqlite.SQLiteCursor

// Method descriptor #44 ()Z
// Stack: 3, Locals: 1
public boolean requery();
 0  new java.lang.RuntimeException [2]
 3  dup
 4  ldc <String "Stub!"> [3]
 6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
 9  athrow
  Line numbers:
    [pc: 0, line: 14]
  Local variable table:
    [pc: 0, pc: 10] local: this index: 0 type: android.database.sqlite.SQLiteCursor

// Method descriptor #46 (Landroid/database/CursorWindow;)V
// Stack: 3, Locals: 2
public void setWindow(android.database.CursorWindow window);
 0  new java.lang.RuntimeException [2]
 3  dup
 4  ldc <String "Stub!"> [3]
 6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
 9  athrow
  Line numbers:
    [pc: 0, line: 15]
  Local variable table:
    [pc: 0, pc: 10] local: this index: 0 type: android.database.sqlite.SQLiteCursor
    [pc: 0, pc: 10] local: window index: 1 type: android.database.CursorWindow

// Method descriptor #50 ([Ljava/lang/String;)V
// Stack: 3, Locals: 2
public void setSelectionArguments(java.lang.String[] selectionArgs);
 0  new java.lang.RuntimeException [2]
 3  dup
 4  ldc <String "Stub!"> [3]
 6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
 9  athrow
  Line numbers:
    [pc: 0, line: 16]
  Local variable table:
    [pc: 0, pc: 10] local: this index: 0 type: android.database.sqlite.SQLiteCursor
    [pc: 0, pc: 10] local: selectionArgs index: 1 type: java.lang.String[]

// Method descriptor #41 ()V
// Stack: 3, Locals: 1
protected void finalize();
 0  new java.lang.RuntimeException [2]
 3  dup
 4  ldc <String "Stub!"> [3]
 6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
 9  athrow
  Line numbers:
    [pc: 0, line: 17]
  Local variable table:
    [pc: 0, pc: 10] local: this index: 0 type: android.database.sqlite.SQLiteCursor 
```

}

我不明白这是在告诉我什么。

如果我再按 F8 几次，程序将继续正常运行，并按我的预期显示数据和结果。

如何阅读此错误，以便对代码进行有效修复？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T17:10:14.607

使用[此处](https://stackoverflow.com/questions/9652690/the-jar-file-android-8-android-jar-has-no-source-attachment)找到的解决方案摆脱了难以理解的消息并附加了类文件。

然后帮助我识别游标未关闭错误。

# sql - Visual Studio 2012 片段快捷方式不适用于 SQL

> ID：14409785
> 
> 赞同：4
> 
> 时间：2013-01-19T00:23:31.447
> 
> 标签：sql, visual-studio-2012, keyboard-shortcuts, code-snippets

我有一个自定义代码片段，我可以通过 Ctrl+K、Ctrl+X 很好地访问它，然后为“我的代码片段”输入“m”并点击 Tab，然后输入我想要使用的片段的第一个字母，然后按 Enter。

到那个时候，只需输入真实的东西几乎就更短了。

我尝试将键盘快捷键分配给 Edit.InvokeSnippetFromShortcut（工具 > 选项 > 环境 > 键盘），但尽管它允许我分配和保存快捷方式，但输入片段“快捷方式”，然后输入我分配给 InvokeSnippetFromShortcut 的快捷方式没有任何作用。这可能是因为它没有显示在它看起来（从谷歌搜索）应该位于的“编辑”菜单上，所以它可能不可用。

背景：我正在编辑一个 .sql 文件，所以这是一个 SQL 片段。C#、VB 等的代码段行为可能不适用于此处。我的自定义代码段使用“sql”作为语言（我已经尝试使用 sql_ssdt w/相同的结果）。我只想能够输入“foo”，点击一个键盘快捷键，并让编辑器将“foo”替换为“barbaz_some_long_thing_that_is_tedious_to_type”

有没有人有这个工作？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T15:54:52.920

这听起来像是[AutoHotKey](http://www.autohotkey.com/)的工作。您可以创建一个 .ahk 脚本来侦听“热字符串”（在键盘上键入的任何内容，然后添加条件，例如打开某个窗口。我使用此命令来检测 Visual Studio

```
Vis()
{
  SetTitleMatchMode 2
  IfWinActive, Microsoft Visual Studio
  {
    return 1
  }
  else
  {
    return 0
  }
} 
```

所以你可以写这个命令

```
:*:foo::
if Vis() = 1
{
    SendInput bar
}
else
{
    SendInput foo
}
return 
```

键入`foo`Visual Studio 将运行代码段并`bar`改为发送输入。键入`foo`任何其他窗口将`foo`正常输出。安装 AutoHotKey 比尝试在 VS 的限制范围内工作要快得多，而且容易得多。

# android - Android 自定义 ListView 问题

> ID：14409787
> 
> 赞同：1
> 
> 时间：2013-01-19T00:23:50.333
> 
> 标签：android, android-listview, android-xml, android-adapter, android-tabactivity

在我的应用程序中，我想对同一帖子类别中的每个帖子进行分组。Listview 不会刷新项目计数。例如，“.Net”类别有 3 个帖子。Listview 有 15 行。12 行似乎是空的。如何刷新列表视图行数？我尝试了一些东西，但我没有。我是否为每个类别创建不同的布局文件？第一张图片显示了我博客中的所有帖子。第二张图片显示仅获取“.Net”类别的帖子。

```
public class Anasayfa extends FragmentActivity implements ActionBar.TabListener {

    private String[][] liste;
    private int tabdeger = 0; 
    private MyCustomAdapter adapter;

    private static ListView listview;

    /**
     * The serialization (saved instance state) Bundle key representing the
     * current tab position.
     */

    public class arkaPlanIsleri extends  AsyncTask<String[][], String[][], String[][]> {

         private ProgressDialog dialog = new ProgressDialog(Anasayfa.this);
         int kategori;

         public arkaPlanIsleri(int kategori){
             this.kategori = kategori;
         }

         @Override
         protected void onPostExecute(String[][] liste) {
          // TODO Auto-generated method stub
             switch(kategori){
             case 0:

             listview = (ListView)findViewById(R.id.list);
             adapter = new MyCustomAdapter(Anasayfa.this, R.layout.list, liste[0]);
             listview.setAdapter(adapter);

             break;

             case 1:

                 listview = (ListView)findViewById(R.id.list);
                 adapter = new MyCustomAdapter(Anasayfa.this, R.layout.deneme, liste[0]);
                 listview.setAdapter(adapter);

                 break;
             }

          dialog.dismiss();
         }
         @Override
         protected void onPreExecute() {
          // TODO Auto-generated method stub
            dialog.setMessage("Yükleniyor...");

            dialog.show();
         }

        @Override
        protected String[][] doInBackground(String[][]... params) {
            // TODO Auto-generated method stub
            getListFromXml("feed",kategori);
            return liste;
        }
    }

    public class MyCustomAdapter extends ArrayAdapter<String> {

        String[] xmlList;

         public MyCustomAdapter(Context context, int textViewResourceId,
           String[] liste) {
          super(context, textViewResourceId, liste);
          // TODO Auto-generated constructor stub

         xmlList = liste;
         }

         @Override
         public View getView(int position, View convertView, ViewGroup parent) {
          // TODO Auto-generated method stub
          //return super.getView(position, convertView, parent);

          View row=convertView;

          switch(tabdeger){
          case 0:
            if(row==null){
           LayoutInflater inflater=getLayoutInflater();
           row=inflater.inflate(R.layout.list, parent,false);
           } 

            TextView label=(TextView)row.findViewById(R.id.text1);
            label.setText(xmlList[position]);

            ImageView image =(ImageView)row.findViewById(R.id.img);
            image.setImageResource(R.drawable.ic_launcher );
            break;
          case 1:
              if(row==null){
                   LayoutInflater inflater=getLayoutInflater();
                   row=inflater.inflate(R.layout.deneme, parent,false);
                   } 
              TextView label2=(TextView)row.findViewById(R.id.text2);
              label2.setText(xmlList[position]);

              ImageView image2 =(ImageView)row.findViewById(R.id.img2);
              image2.setImageResource(R.drawable.ic_launcher );
              break;
          }

          return row;
         }
        }

    public String[][] getListFromXml(String strng,int kategori)  {

        try {

            URL url=new URL(strng);
            DocumentBuilderFactory dFactory=DocumentBuilderFactory.newInstance();
            DocumentBuilder dBuilder=dFactory.newDocumentBuilder();

            Document document=dBuilder.parse(new InputSource(url.openStream()));
            document.getDocumentElement().normalize();

            NodeList nodeListCountry=document.getElementsByTagName("item");
            int sayi = nodeListCountry.getLength();
            liste[1] = new String[sayi]; //category
                int genelcount=0;
                int netcount=0;
                int androidcount=0;
                int ilgicount=0;
                int windowscount=0;

            for (int i = 0; i < nodeListCountry.getLength(); i++) {
                Node node=nodeListCountry.item(i);
                Element elementMain=(Element) node;

                NodeList nodeListText=elementMain.getElementsByTagName("title");
                Element elementText=(Element) nodeListText.item(0);

                NodeList kategoriler = elementMain.getElementsByTagName("category");
                Element kategoriText = (Element) kategoriler.item(0);
                liste[1][i] = kategoriText.getChildNodes().item(0).getNodeValue();
                    switch(kategori){
                    case 0:
                        break;
                    case 1:
                        netcount++;
                        break;
                    case 2:
                        androidcount++;
                        break;
                    case 3:
                        genelcount++;
                        break;
                    case 4:
                        ilgicount++;
                        break;
                    case 5:
                        windowscount++;
                        break;
                    }
                }

            switch(kategori){
                case 0:
                    liste[0] = new String[sayi]; //title
                    break;
                case 1:
                    liste[0] = new String[netcount]; //title
                    break;
                case 2:
                    liste[0] = new String[androidcount]; //title
                    break;
                case 3:
                    liste[0] = new String[genelcount]; //title
                    break;
                case 4:
                    liste[0] = new String[ilgicount]; //title
                    break;
                case 5:
                    liste[0] = new String[windowscount]; //title
                    break;
                }
            int flag=0;

            for (int i = 0; i < nodeListCountry.getLength(); i++) {
                Node node=nodeListCountry.item(i);
                Element elementMain=(Element) node;

                NodeList nodeListText=elementMain.getElementsByTagName("title");
                Element elementText=(Element) nodeListText.item(0);

                switch(kategori){
                case 0:
                    liste[0][i]=elementText.getChildNodes().item(0).getNodeValue();
                    break;
                case 1:
                    if(liste[1][i].equals(".Net")){
                        liste[0][flag]=elementText.getChildNodes().item(0).getNodeValue();
                        flag++;
                    }
                    break;
                case 2:
                    if(liste[1][i].equals("Android")){
                        liste[0][flag]=elementText.getChildNodes().item(0).getNodeValue();
                        flag++;
                    }
                    break;
                case 3:
                    if(liste[1][i].equals("Genel")){
                        liste[0][flag]=elementText.getChildNodes().item(0).getNodeValue();
                        flag++;
                    }
                    break;
                case 4:
                    if(liste[1][i].equals("İlgi Çekici")){
                        liste[0][flag]=elementText.getChildNodes().item(0).getNodeValue();
                        flag++;
                    }
                    break;
                case 5:
                    if(liste[1][i].equals("Windows Phone")){
                        liste[0][flag]=elementText.getChildNodes().item(0).getNodeValue();
                        flag++;
                    }
                    break;
                }
            }

        } catch (MalformedURLException e) {
            e.printStackTrace();
        }catch (ParserConfigurationException e) {
            e.printStackTrace();
        } catch (SAXException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        return liste;
    }

@Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_anasayfa);

            liste = new String[2][];

    //       new arkaPlanIsleri(tabdeger).execute();

             listview = (ListView)findViewById(R.id.list);

            // Set up the action bar to show tabs.
            final ActionBar actionBar = getActionBar();
            actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

            // For each of the sections in the app, add a tab to the action bar.

            actionBar.addTab(actionBar.newTab().setText("HEPSİ")
                    .setTabListener(this));
            actionBar.addTab(actionBar.newTab().setText(".Net")
                    .setTabListener(this));
            actionBar.addTab(actionBar.newTab().setText("ANDROID")
                    .setTabListener(this));
            actionBar.addTab(actionBar.newTab().setText("GENEL")
                    .setTabListener(this));
            actionBar.addTab(actionBar.newTab().setText("İLGİ ÇEKİCİ")
                    .setTabListener(this));
            actionBar.addTab(actionBar.newTab().setText("WINDOWS PHONE")
                    .setTabListener(this));
        }

@Override
    public void onTabSelected(ActionBar.Tab tab,
            FragmentTransaction fragmentTransaction) {
        // When the given tab is selected, show the tab contents in the
        // container view.
        Fragment fragment = new DummySectionFragment();
        Bundle args = new Bundle();
        args.putInt(DummySectionFragment.ARG_SECTION_NUMBER,
                tab.getPosition() + 1);
        fragment.setArguments(args);
        getSupportFragmentManager().beginTransaction()
                .replace(R.id.container, fragment).commit();

        tabdeger = tab.getPosition();
        liste = new String[2][];
//      xmlList = new String[sayi];
        listview.setAdapter(null);
        new arkaPlanIsleri(tabdeger).execute();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T01:31:55.853

当您获得所有类别的长度时，问题出在您的 XML 解析器上

```
liste[1][i] = ((Node) kategoriText).getChildNodes().item(0).getNodeValue();

switch(kategori){
      case 0:
         break;
      case 1:
         netcount++;
         break;
      case 2:
         androidcount++;
         break;
      case 3:
         genelcount++;
         break;
      case 4:
         ilgicount++;
         break;
      case 5:
         windowscount++;
         break;
} 
```

这将为所有内容返回相同的值。您需要测试传入的数据。这将适用于您尝试做的事情

```
liste[1][i] = ((Node) kategoriText).getChildNodes().item(0).getNodeValue();

if (liste[1][i].contains(".Net")){
    netcount++;
} else if (liste[1][i].contains("Android")){
    androidcount++;
} ......... 
```

等等等等。

# c# - 不是外键列，不能在这里使用

> ID：14409788
> 
> 赞同：3
> 
> 时间：2013-01-19T00:23:53.577
> 
> 标签：c#, ajax, linq

我是 linq、Ajax 和 c# 的新手。我对 SQL Server 或 VB 并不陌生。我收到错误消息：

```
'ReportTypeID' is not a foreign key column and cannot be used here. 
```

是的，我查看了[http://forums.asp.net/t/1254559.aspx](http://forums.asp.net/t/1254559.aspx)并发现了我的一个错误。

不，我没有使用视图，所以“ [...不是外键列，不能在这里使用？](https://stackoverflow.com/questions/1008641/is-not-a-foreign-key-column-and-cannot-be-used-here) ”没什么用。

据我所知，它已正确配置为处理外键。

两张表配置如下：

```
CREATE TABLE [dbo].[Report](
    [Id] [INT] IDENTITY(1,1) NOT NULL,
    [ReportTypeID] [INT] NOT NULL,
 CONSTRAINT [PK_Report] PRIMARY KEY CLUSTERED
(
    [Id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
ALTER TABLE [dbo].[Report] ADD CONSTRAINT [DF_Report_ReportTypeID]  DEFAULT ((1)) FOR [ReportTypeID]
GO
ALTER TABLE [dbo].[Report]  WITH CHECK ADD  CONSTRAINT [FK_Report_ReportType] FOREIGN KEY([ReportTypeID])
REFERENCES [dbo].[ReportType] ([TypeValue])
GO
ALTER TABLE [dbo].[Report] CHECK CONSTRAINT [FK_Report_ReportType]
GO
CREATE TABLE [dbo].[ReportType](
    [TypeValue] [INT] NOT NULL,
    [TypeDescr] [VARCHAR](50) NOT NULL,
 CONSTRAINT [PK_ReportType] PRIMARY KEY CLUSTERED
(
    [TypeValue] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO 
```

SQL连接如下：

```
SELECT * FROM Report r INNER JOIN ReportType rt ON r.ReportTypeID = rt.TypeValue 
```

最后，适当列上的 C# dbml 定义（大大减弱）如下：

```
<Table Name="dbo.Report" Member="Reports">
  <Type Name="Report">
    <Column Name="ReportTypeID" Type="System.Int32" DbType="INT NOT NULL" CanBeNull="false" />
    <Association Name="ReportType_Report" Member="ReportType" ThisKey="ReportTypeID" OtherKey="TypeValue" Type="ReportType" IsForeignKey="true" />
  </Type>
</Table>
<Table Name="dbo.ReportType" Member="ReportTypes">
  <Type Name="ReportType">
    <Column Name="TypeValue" Type="System.Int32" DbType="INT NOT NULL" IsPrimaryKey="true" CanBeNull="false" />
    <Association Name="ReportType_Report" Member="Reports" ThisKey="TypeValue" OtherKey="ReportTypeID" Type="Report" />
  </Type>
</Table> 
```

SQL 工作正常，数据中没有分离，当我逐步执行程序时数据是正确的。ReportTypeID=1 的值是有效的。ReportType 表中的 TypeValue 不是自动生成的，它是唯一的并且是主键。我怀疑这与 dbml 定义有关。我仍然肯定缺少一些东西。 **编辑：**添加视觉关系。该设置基于图像中有效的其他关系。![表的视觉关系](../Images/fc875fb9f2f9406a49fddd203ac11f80.png)

Ajax字段模板代码“ForeignKeyRequired_Edit.ascx.cs”报错

```
protected override void OnDataBinding(EventArgs e)
{
  base.OnDataBinding(e);

  if (Mode == DataBoundControlMode.Edit)
  {
    string foreignkey = ForeignKeyColumn.GetForeignKeyString(Row); // Error On This Line
    ListItem item = DropDownList1.Items.FindByValue(foreignkey);
    if (item != null)
    {
      DropDownList1.SelectedValue = foreignkey;
    }
  }
} 
```

**编辑**我相信我找到了问题，我需要一些文档来找到答案。代码中有一个switch语句需要编辑。我正在进入我的模板，但没有进入我的领域。

```
case "Source": // This Works
  items = StaticCache.Sources.AsQueryable().Where(att.WhereClause).Select(r => new ListItem { Text = r.Name, Value = r.Id.ToString() }).ToArray();
  break;
// Problem Code - This One Doesn't - Not Sure Which Of These To Use
case "ReportTypeTable": // Based On The Table Definition -- Internal Doc Points To This One
  items = StaticCache.ReportTypes.AsQueryable().Where(att.WhereClause).Select(r => new ListItem { Text = r.TypeDescr, Value = r.TypeValue.ToString() }).ToArray();
  break; 
```

**编辑**
SQL Server 将“ReportType”表视为“无效对象”。这可能是问题吗？
**编辑**
我现在正在调查活动目录作为一个可能的问题。**编辑**不是活动目录问题，“无效对象”错误是智能感知问题（已修复）。

**编辑：**我有部分答案。文档不清楚。答案在于表的 dbml 定义。幸运的是，我重命名了该表的每个级别，以便定义中对“ID”每个级别的引用具有唯一但相关的名称。部分答案是使用 dbml 表名。我不再收到此错误。我只是在下拉列表中没有任何数据。请参阅：[http](http://www.seekwaytech.com/2011/02/27/asp-net-4-0-dynamic-data-foreign-keys-show-up-in-a-text-box/) ://www.seekwaytech.com/2011/02/27/asp-net-4-0-dynamic-data-foreign-keys-show-up-in-a-text-box/和[http:// /forums.asp.net/t/1254559.aspx 按此](http://forums.asp.net/t/1254559.aspx) 顺序。（第一个解释第二个的答案）

**编辑**最后，摆脱所有垃圾测试并返回动态对象完成了这项工作。

```
<asp:DynamicControl runat="server" DataField="ReportTypeTable" DataValueField="TypeValue" DataTextField="TypeDescr" Mode="Edit" UIHint="ForeignKeyRequired" CssClass="general" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T00:43:40.407

我猜这是你的问题...

```
 <Association Name="ReportType_Report" Member="Reports" ThisKey="TypeValue" OtherKey="ReportTypeID" Type="Report" /> 
```

ReportType 没有引用 Report 表，相反，您已经定义了它们。

杀死这个关联，看看它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:34:13.807

文档不清楚。答案在于表的 DBML 定义。幸运的是，我重命名了该表的每个级别，以便定义中对“ID”每个级别的引用具有唯一但相关的名称。部分答案是使用 DBML 表名。我不再收到此错误。我只是在下拉列表中没有任何数据。请参阅：[http](http://www.seekwaytech.com/2011/02/27/asp-net-4-0-dynamic-data-foreign-keys-show-up-in-a-text-box/) ://www.seekwaytech.com/2011/02/27/asp-net-4-0-dynamic-data-foreign-keys-show-up-in-a-text-box/和[http:// /forums.asp.net/t/1254559.aspx 按此](http://forums.asp.net/t/1254559.aspx) 顺序。（第一个解释第二个的答案）

最后，我回到对象的原始定义，将“DataValueField”和“DataTextField”添加到控件中。它现在可以根据需要工作。

```
<asp:DynamicControl runat="server" DataField="ReportTypeTable" DataValueField="TypeValue" DataTextField="TypeDescr" Mode="Edit" UIHint="ForeignKeyRequired" CssClass="general" /> 
```

# windows - 在 Safari 5.1.7 for Windows 中暂停 HTML 5 视频

> ID：14409789
> 
> 赞同：0
> 
> 时间：2013-01-19T00:23:54.440
> 
> 标签：windows, html, video, safari, video.js

`<video>`在使用以下方法触发事件后，我正在尝试暂停页面上 HTML 5 标记的每个实例：

```
jQuery("video").each (function() { this.pause(); }) 
```

适用于所有浏览器，Windows 5.1.7 的 Safari 除外，它会抛出：

> TypeError：“未定义”不是函数（评估“this.pause（）”）

为什么 Safari 会抛出此异常，我该如何避免它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T00:37:58.247

编辑：

所以，鉴于您使用的是 video.js，也许是这样的？

```
jQuery("video").each (function() { 
  _V_($(this).id).pause(); //make sure all your video tags have an id attribute
}); 
```

[https://github.com/zencoder/video-js/blob/master/docs/api.md](https://github.com/zencoder/video-js/blob/master/docs/api.md)

# ruby-on-rails - 大约 30 个 RoR 应用程序等待（冻结）1 个应用程序启动。如何解决这个问题？

> ID：14409792
> 
> 赞同：3
> 
> 时间：2013-01-19T00:24:08.443
> 
> 标签：ruby-on-rails, nginx, passenger

我有一个包含大约 30 个 Ruby On Rails 应用程序的服务器。

当我（重新）启动 30 个应用程序中的 1 个时，所有其他应用程序都无法访问，它们似乎正在等待 1 个应用程序（重新）启动。

即使是命令：passenger-status，似乎也要等到 1 应用程序（重新）启动。

这是正常行为吗？或者如何解决这个问题？

（虚拟）服务器规格：

*   CPU：3核x 2.2GHz
*   内存：4GB
*   硬盘：40GB

服务器软件：

*   CentOS 6.3 版（最终版）
*   Nginx版本：nginx/1.0.12
*   Ruby 1.9.3p125（2012-02-16 修订版 34643）[x86_64-linux]
*   Phusion 乘客版 3.0.18

Nginx/乘客配置：

```
passenger_max_pool_size 50;
passenger_min_instances 1;
passenger_max_instances_per_app 2; 
```

如果需要，我很乐意提供更多详细信息。

****更新**** 安装了乘客企业和nginx，现在这些应用程序不再相互打扰了。所以我认为这个问题已经解决了passenger_rolling_restarts；**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T20:08:06.367

嗯...看起来这可能是Passenger开源版本的“功能”。来自[http://phusionpassenger.com/enterprise](http://phusionpassenger.com/enterprise)：

> 在 Phusion Passenger 的开源版本中，重新启动应用程序涉及关闭所有应用程序进程并生成新进程。由于启动新进程可能需要很长时间（取决于应用程序），因此在重新启动过程中访问者可能会遇到响应缓慢的情况。通过滚动重启，Phusion Passenger Enterprise 在后台重启您的应用程序进程。

因此，选项似乎是：

1) 升级到Passenger企业版

2）切换到其他服务器。

呸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:32:17.277

实际上，这里有两个问题在起作用：

1.  当不使用滚动重启时，您的访问者将不得不等到重启完成。正如卓斯波罗所说。
2.  此外，Phusion Passenger 3 在为应用程序生成第一个进程时会锁定整个应用程序池。在此期间，无法处理任何请求。后续进程生成在后台完成，滚动重启生成也在后台完成，因此它们不会影响请求。在 Phusion Passenger 4（当然还有 Phusion Passenger Enterprise 4）中，这种锁定限制已经完全解除：一切都是异步的。**

# silverlight-5.0 - SL 5 超出浏览器 - 1 像素白色边框？

> ID：14409793
> 
> 赞同：1
> 
> 时间：2013-01-19T00:24:13.360
> 
> 标签：silverlight-5.0, out-of-browser

我有一个设置为用完浏览器的 SL 5 应用程序。
OOB 设置：

```
<WindowSettings Title="Thing" Height="497" Width="462" WindowStyle="BorderlessRoundCornersWindow" /> 
```

Blend 将 UserControl 的宽度和高度报告为 463, 500。
当应用程序在浏览器之外运行时，它的左侧和顶部边缘似乎有一条 1 像素的白色线。
一些xml：

```
 <Grid x:Name="LayoutRoot" Height="500" >
    <Border  BorderThickness="1" CornerRadius="6" Padding="2" Background="#FFF17A35">
        <Grid Background="Transparent">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,4,6">
                <HyperlinkButton
                    <!--blah blah -->
                </HyperlinkButton>
                <HyperlinkButton x:Name="hyperlinkCloseButton"
                    <!--blah blah -->
                </HyperlinkButton>
            </StackPanel>
            <StackPanel Orientation="Vertical" Grid.Row="2" HorizontalAlignment="Center" Margin="0,2,0,0">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <!--blah blah -->
                </StackPanel>
            </StackPanel>
            <ScrollViewer Width="400" Grid.Row="4" VerticalAlignment="Center" MaxHeight="76">
                <TextBlock x:Name="DbgOutput" 
              Text="{Binding DbgMsgTxt}"
               Width="396" TextWrapping="Wrap"/>
            </ScrollViewer>
        </Grid>
    </Border>
</Grid> 
```

![在此处输入图像描述](../Images/b2fdedf4f9515f4beb740469178a3020.png) 关于白度来自哪里的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:18:55.307

我认为按照这个步骤对你很有帮助

有新的想法来实现这个

1\. 单击 Sliverlight 项目

2\. 选择属性选项

3\. 选择第一个选项卡选项，例如 Silverlight

4\. 单击浏览器外设置选项

![在此处输入图像描述](../Images/1e9d4a3e2e9af917d6ca9a25c83f3ba2.png)

# objective-c - 以 30FPS 每帧写入 XML 行

> ID：14409794
> 
> 赞同：0
> 
> 时间：2013-01-19T00:24:24.527
> 
> 标签：objective-c, xml, cocoa

这是我的代码：

```
float timeInterval = 1 / [frameRateTextField floatValue];

        recordingTimer = [NSTimer scheduledTimerWithTimeInterval:timeInterval
                                                          target:self
                                                        selector:@selector(recordingTimerSelector:)
                                                        userInfo:nil
                                                         repeats:YES];

- (void) recordingTimerSelector:(NSTimer*)timer{
    NSXMLElement *timecode = [[NSXMLElement alloc] initWithName:@"timecode"];
    [timecode setStringValue:[NSString stringWithFormat:@"%@,%@,%@,%@,%@",[DMXChannelArray objectAtIndex:0], [DMXChannelArray objectAtIndex:1], [DMXChannelArray objectAtIndex:2], [DMXChannelArray objectAtIndex:3], [DMXChannelArray objectAtIndex:4]]];

    [root addChild:timecode];

    time = time + 1;
    [theRecordingTime setStringValue:[NSString stringWithFormat:@"%d", time]];
} 
```

这是最好的方法吗？我基本上是在制作分辨率为 30FPS 的“录像机”。有没有办法让它与实际时间一致，而不是成为一个单独的实体？它可能会使它更准确。喜欢：

```
10:40:41.0 - record element
10:40:41.3 - record element
10:40:41.6 - record element 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T03:12:03.333

You can [get the current number of seconds since the reference date by asking NSDate for it](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDate/timeIntervalSinceReferenceDate).

Get that time interval when you start your timer, and then every time it fires, and subtract the starting time interval from the current one to get the number of seconds since you started.

# css - 引导程序对于智能手机来说太重了吗？

> ID：14409797
> 
> 赞同：1
> 
> 时间：2013-01-19T00:24:50.317
> 
> 标签：css, twitter-bootstrap

自从我开始使用引导程序以来，我感觉它变得越来越重。
使用 PC，我不觉得它滞后，但使用我的 iPhone。

我们通常是否必须尽可能少地减少 CSS 框架工作？
但是要找出我的 CSS 中使用了什么以及没有使用什么，工作量太大了。

有人对此有什么好主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T00:26:32.383

它不是太重。但是，您可以对其进行自定义并仅获取您需要的部分。[http://twitter.github.com/bootstrap/customize.html](http://twitter.github.com/bootstrap/customize.html)

# installation - NSIS 检测 Windows 版本

> ID：14409801
> 
> 赞同：8
> 
> 时间：2013-01-19T00:25:52.363
> 
> 标签：installation, nsis

在 NSIS 中有没有办法确定用户当前正在运行什么版本的 Windows？

我想这样做的原因是因为我的安装程序在 Windows XP 计算机上看起来不同。我的安装程序使用 MUI2，但我似乎没有与 Windows 7 中相同的 GUI 按钮（我认为它称为 XP 样式），并且主安装程序窗口比 Windows 7 中的大得多（大约 500 x 400 像素）。**在使用 MUI2 的安装程序中存在这些差异是否正常？** *我认为 MUI2 在 Windows XP 及更高版本中看起来一致？*

为了克服安装程序窗口大小的差异，我的解决方案是检测用户是否使用 Windows XP 并相应地调整窗口大小。这可能吗？

我需要将窗口设置为特定大小，因为我有一个背景图像并且图像宽 500 像素，所以如果安装程序窗口更大，我会有一个空白间隙。我可以将背景图像更改为更宽，但对我自己来说最简单的解决方案是我上面解释的那个

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-02T12:23:40.463

如果[安德斯的回答](https://stackoverflow.com/a/14413268/1285846)不够明确（我花了几个小时才把它弄好），这里有一个更“初学者友好”的版本。

您将需要添加`!include WinVer.nsh`到 cd.nsi 文件的顶部。

然后，您可以使用如下代码：

```
${If} ${IsWinXP}
     MessageBox MB_OK|MB_ICONEXCLAMATION "We have Win XP"
${EndIf} 
```

这是我测试的唯一功能，但 WinVer.nsh 文件以迷你手册开头，其功能包括：

*   `AtLeastWin<version>`它检查安装程序是否至少按照指定在 Windows 版本上运行。
*   `IsWin<version>`它检查安装程序是否完全按照指定在 Windows 版本上运行。
*   `AtMostWin<version>`它检查安装程序是否最多在指定的 Windows 版本上运行。

`<version>`可以替换为以下值（可能更多，取决于您的 WinVer.nsh 文件的最新程度）：`95`, `98`, `ME`, `NT4`, `2000`, `XP`, `2003`, `Vista`, `2008`, `7`, `2008R2`

WinVer.nsh 文件中还有更多功能和一些用法示例，该文件可能位于*C:\Program Files\NSIS\Include*之类的位置，例如：

*   `AtLeastServicePack`它检查安装程序是否至少在指定的 Windows 服务包版本上运行。
*   `IsServicePack`它检查安装程序是否完全按照指定在 Windows 服务包版本上运行。
*   `AtMostServicePack`它检查安装程序是否最多按照指定在 Windows 服务版本包上运行。
*   `IsWin2003R2`（没有提供更多细节）
*   `IsStarterEdition`（没有提供更多细节）
*   `OSHasMediaCenter`（没有提供更多细节）
*   `OSHasTabletSupport`（没有提供更多细节）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-19T10:16:26.247

MUI 不会根据 Windows 版本调整窗口大小。然而，窗口大小受字体和 DPI 设置的影响。

用于[`WinVer.nsh`](http://nsis.sourceforge.net/Get_Windows_version)检测 Windows 版本。默认情况下，此模块包含在 NSIS 包含文件夹中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-01T10:51:32.603

You could also read from the registry directly:

```
ReadRegStr $WinEdition HKLM "SOFTWARE\Microsoft\Windows NT\CurrentVersion" "ProductName" 
```

Next, you can compare it using "==", for example:

```
${If} $WinEdition == "Windows XP" 
```

or you could use [StrContains](http://nsis.sourceforge.net/StrContains) to check if the windows version contains "Windows XP"

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-15T14:26:33.237

下面的代码片段显示了如何使用我能想象到的尽可能多的细节来识别 Windows 版本：

```
!include WinVer.nsh
!include "LogicLib.nsh"

Function LogWinVer

    ${WinVerGetMajor} $R0
    ${WinVerGetMinor} $R1
    ${WinVerGetBuild} $R2
    ${WinVerGetServicePackLevel} $R3

    ; determine windows product name
    ${If} $R0 == 5 
            ${If} $R1 == 0
                    DetailPrint "Windows 2000 SP $R3"
            ${ElseIf} $R1 == 1
                    DetailPrint "Windows XP SP $R3"
            ${ElseIf} $R1 == 2
                    DetailPrint "Windows Server 2003 SP $R3"
            ${EndIf}
    ${ElseIf} $R0 == 6
            ${If} $R1 == 0
                    ${If} ${IsServerOS}
                            DetailPrint "Windows Server 2008 SP $R3"
                    ${Else}
                            DetailPrint "Windows Vista SP $R3"
                    ${EndIf}
            ${ElseIf} $R1 == 1
                    ${If} ${IsServerOS}
                            DetailPrint "Windows Server 2008 R2 SP $R3"
                    ${Else}
                            DetailPrint "Windows 7 SP $R3"
                    ${EndIf}
            ${ElseIf} $R1 == 2
                    ${If} ${IsServerOS} 
                            DetailPrint "Windows Server 2012 SP $R3"
                    ${Else}
                            DetailPrint "Windows 8 SP $R3"
                    ${EndIf}
            ${ElseIf} $R1 == 3
                    ${If} ${IsServerOS}
                            DetailPrint "Windows Server 2012 R2 SP $R3"
                    ${Else}
                            DetailPrint "Windows 8.1 SP $R3"
                    ${EndIf}
            ${EndIf}
    ${EndIf}

    ; version
    DetailPrint "Kernel $R0.$R1 build $R2"

    ; x86 or x64:
    Call LogWinVer
    System::Call "kernel32::GetCurrentProcess() i .s"
    System::Call "kernel32::IsWow64Process(i s, *i .r0)"
    StrCmp $0 "0" is32bit is64bit

    is32bit:
            DetailPrint "32 bit"
            Goto exit
    is64bit:
            DetailPrint "64 bit"
    exit:
FunctionEnd 
```

# nuget - 使用本地提要恢复 Nuget 包

> ID：14409806
> 
> 赞同：2
> 
> 时间：2013-01-19T00:27:03.963
> 
> 标签：nuget, nuget-package

我正在尝试让 nuget 包恢复在一个解决方案中工作，该解决方案正在常规、公共 nuget 提要和位于共享网络驱动器上的本地提要中寻找包。

到目前为止，我尝试的是在解决方案上启用 nuget 包还原，然后编辑 Nuget.targets 并更改 PackageSources 变量，但这似乎不起作用。这可能吗？

对于包源部分，我的 Nuget.targets 文件如下所示：

```
<ItemGroup Condition=" '$(PackageSources)' == '' ">
    <!-- Package sources used to restore packages. By default, registered sources under %APPDATA%\NuGet\NuGet.Config will be used -->
    <!-- The official NuGet package source (https://nuget.org/api/v2/) will be excluded if package sources are specified and it does not appear in the list -->
    <PackageSource Include="https://nuget.org/api/v2/" />
    <PackageSource Include="\\mynetworkshare\Development\NugetPackages" />
</ItemGroup> 
```

我在构建时遇到的错误是“无法找到包 'MyCustomPackage' 的版本 '1.0.0'。我已验证 nupkg 存在于`\\mynetworkshare\Development\NugetPackages\MyCustomPackage.1.0.0.nupkg`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T17:31:11.943

对我来说，解决方法是 bhuvak 的回答加上我不得不重命名一些包。

我一直在创建符号包（命名类似于`MyCustomPackage.1.0.0.symbols.nupkg`）并使用本地包源文件夹中的符号包。但是，包还原似乎并没有解决这些问题。我不得不重命名它们，删除`.symbols`文件名的一部分。

在我这样做之后，包还原效果很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T19:14:41.870

更新 NuGet.targets 中的源应该可以工作。确保在目标文件中明确添加了官方 NuGet 源和本地源。您注意到什么错误？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-13T10:20:44.567

我们遇到了与@evan 类似的问题。我们正在使用[CreateNewNuGetPackageFromProjectAfterEachBuild](https://newnugetpackage.codeplex.com/wikipage?title=NuGet%20Package%20To%20Create%20A%20NuGet%20Package%20From%20Your%20Project%20After%20Every%20Build)包在 TFS 2013 构建服务器上创建我们的 NuGet 包。我们有一个基于共享的本地包源，并将 nupkg 文件从构建输出复制到此共享。我们发现引用这些包的构建失败，因为 NuGet 包还原无法在本地源中找到包。

从构建服务器上的命令行运行 NuGet，我们会得到奇怪的行为：

```
nuget.exe list <search-term-for-our-packages> -allversions 
```

总是成功并列出我们包的每个版本。但是，当我们转到失败的构建`\src`文件夹并运行时

```
nuget.exe restore .\oursolution.sln 
```

我们总是得到：

```
Unable to find version '1.0.6.341' of package 'our.package.name'. 
```

我尝试了各种各样的方法来解决这个问题，使用 nuget.config 并在 nuget.exe 版本之间进行交换，但修复只是与我们的 nupkg 文件的命名有关。默认情况下`CreateNewNuGetPackageFromProjectAfterEachBuild`，将它生成的 nupkg 命名为包 ID 加上构建配置和目标。例如

```
our.package.name.1.0.6.341.Release.AnyCPU.nupkg 
```

在我们的包源中使用此文件`nuget list`可以工作但`nuget restore`失败。当我将包重命名为

```
our.package.name.1.0.6.341.nupkg 
```

然后按预期工作`nuget list`。`nuget restore`

我们的修复只是简单地修改配置文件`CreateNewNuGetPackageFromProjectAfterEachBuild`以防止它包括构建配置和目标。但是为什么`nuget restore`依赖包文件名而不依赖于包文件名`nuget list`呢？

# android - 如何在不闪烁的情况下更新 TileOverlay？

> ID：14409813
> 
> 赞同：39
> 
> 时间：2013-01-19T00:27:24.477
> 
> 标签：android, google-maps-android-api-2

我有一些动态图块内容要显示在地图上（特别是天气图像——雷达、卫星、温度等）。我正在使用适用于 Android v2 的 Google Maps API。

我遇到的问题是，显然更新平铺图像的唯一方法（即当新数据到达时，或者当帧在延时动画中前进时）是调用 TileOverlay.clearImageCache。不幸的是，当我这样做时，瓷砖覆盖片会闪烁片刻。这是因为 clearImageCache 会立即从显示中删除现有的平铺图像，但在解码和显示新的平铺图像之前存在延迟。

我正在使用自定义 TileProvider 来缓存平铺图像，而不是每次都从服务器获取它们。但即使它只提供缓存的切片（即我的 TileProvider.getTile 实现没有造成明显的延迟），在处理过程中仍然有足够的延迟，用户可以看到闪烁。

有谁知道避免这种闪烁的方法？有什么方法可以对瓷砖叠加层进行双重缓冲？我尝试使用附加到地图的两个 TileOverlay 对其进行双重缓冲，其中一个是不可见的。但是不可见的 TileOverlay 并没有开始从我的 TileProvider 中获取任何图块——即使在我调用 clearImageCache 之后也是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:33:26.297

是否可以加载即将到来的平铺图像但是将可见性设置为 false？`Tile.setVisible(false);`

然后当你想改变时（在即将到来的瓦片加载后），将即将到来的瓦片设置为可见而当前瓦片不可见？

```
CurrentTile.setVisible(false);
NewTile.setVisible(true); 
```

这样，更改都发生在同一个渲染帧内，并且没有等待缓存图像加载的延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:14:30.757

一个相当好的解决方案是将切片下载和缓存与 TileProvider 分开。这样您就可以完全控制何时下载它们，并且仅在下载全部后替换 byte[] 引用。

这可能有点复杂，因为您必须注意当前的可见区域并缩放而不是全部下载它们，而只下载那些可见的区域。

**编辑**

使用以下代码进行测试：

```
try {
    InputStream is = getAssets().open("tile1.jpg");
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    int b = is.read();
    while (b != -1) {
        baos.write(b);
        b = is.read();
    }
    byte[] array = baos.toByteArray();
    cache = new Tile(256, 256, array);
    is = getAssets().open("tile2.jpg");
    baos = new ByteArrayOutputStream();
    b = is.read();
    while (b != -1) {
        baos.write(b);
        b = is.read();
    }
    array = baos.toByteArray();
    nextCache = new Tile(256, 256, array);
} catch (IOException ex) {
    Log.e("tag", "error reading tiles", ex);
}

tileOverlay = map.addTileOverlay(new TileOverlayOptions().tileProvider(new TileProvider() {
    @Override
    public Tile getTile(int x, int y, int zoom) {
        return cache;
    }
})); 
```

稍后的某个地方：

```
Tile temp = cache;
cache = nextCache;
nextCache = temp;
tileOverlay.clearTileCache(); 
```

“最快”的可能代码仍然失败。

如果您无法切换到 GroundOverlay 或 Markers，另一个想法是尝试使用第三方地图图块，即您当前的天气图块上方和下一个图块，以便他们可以在几秒钟后加载和切换它们（使用 zOrder）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-30T01:14:28.123

我为此找到的解决方案是使图层的透明度为 1。这使它们隐藏但仍然请求图块。然后，您可以切换哪些图层的透明度为 1 和 0。

由于在更改两个图层的透明度之间进行了渲染调用，仍然存在一些闪烁的可能性。没有办法使它成为原子操作。

还发现没有一种很好的方法可以知道图层何时完全加载了图块。即使在您从 TileProvider 返回图块之后，Google 地图也必须对其进行一些处理，因此您在切换图块之前需要一些延迟。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-16T08:29:57.200

对我有用的解决方案（我尝试每秒刷新瓷砖）：

```
 // Adding "invisible" overlay
    val newTileOverlay =  mMap?.addTileOverlay(
        TileOverlayOptions()
            .tileProvider(getTileProvider()).transparency(1f).visible(true)
    )

    mTileOverlay?.transparency = 0.5f // making previous overlay visible
    mOldTileOverlay?.remove() // removing previously displayed visible overlay
    mOldTileOverlay = mTileOverlay
    mTileOverlay = newTileOverlay 
```

所以我们一次有两层（一层可见，一层不可见）。我不确定它如何影响性能。

# angularjs - 修改在 ng-repeat 中显示的对象中的数组

> ID：14409815
> 
> 赞同：2
> 
> 时间：2013-01-19T00:27:43.130
> 
> 标签：angularjs

我正在尝试`ng-repeat`使用包含数组内容的输入元素更新显示在页面上的 $scope 对象的数组。可以在此处找到 plunker 示例：[Plunker 演示](http://plnkr.co/edit/LmTxBWNHgdFDXUJBnFug?p=preview)（基本，我的问题的精简示例）

我定义了以下设置对象：

```
$scope.settings = {
  list: ['list item one', 'list item two', 'list item three']
}; 
```

我代表页面上的数据，如下所示：

```
<ul> 
  <li ng-repeat="item in settings.list">
    <input type="text" 
           value="{{item}}" 
           ng-model="singleItem"
           ng-change="settings.list[$index] = singleItem" />
    <a href="javascript:void(0)">delete</a>
  </li>
</ul> 
```

我的目标是最初`<input>`用内容填充字段，`$scope.settings.list`并且每当更改项目时更新数组，但我还没有弄清楚如何在视图中。在输入中省略`ng-model`and`ng-change`会正确呈现文本框中的输入值，但是在进行更改时不会修改数组。

旁注：在 Plunker 示例中，我有`$watch`设置对象。在我的实际代码中，这用于使用[`$cookies`模块](http://docs.angularjs.org/api/ngCookies)更新“设置 cookie” 。示例中省略了 Cookie，但出于调试目的，我将手表留在了里面。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T00:44:57.250

您的方法有两个主要问题。首先是 ngRepeat 使用继承范围，因此原始值（如字符串和数字）不能很好地发挥作用。您应该将对象数组传递给 ngRepeat 而不是基元数组。您的第二个问题是绑定到输入的过于复杂的方式。您只需要这样做：

```
$scope.settings = {
  list: [
    { val: 'list item one'},
    { val: 'list item two'},
    { val: 'list item three'}
  ]
}; 
```

然后在你看来：

```
<ul> 
  <li ng-repeat="item in settings.list">
    <input type="text" ng-model="item.val"></input>
    <a ng-click="remove($index)">delete</a>
  </li>
</ul> 
```

这是修改后的 plunker：[http](http://plnkr.co/edit/ZGFjBnVSwM4hNSgVSOCW?p=preview) ://plnkr.co/edit/ZGFjBnVSwM4hNSgVSOCW?p=preview 。

# internet-explorer - 强制浏览器立即呈现部分响应

> ID：14409817
> 
> 赞同：3
> 
> 时间：2013-01-19T00:28:15.213
> 
> 标签：internet-explorer, http, google-chrome

当 HTTP 响应包含缓冲输出（即带有`Transfer-Encoding: chunked`）并且块之间存在延迟时，Chrome 和 Internet Explorer 在收到整个响应之前不会显示响应。Firefox 将在内容到达时显示。

在 Firefox 中尝试[此测试页面](http://jumpingfishes.com/progresstest.ashx)，然后在 Chrome 或 IE 中尝试。

有没有办法强制 Chrome 和 Internet Explorer 在收到内容时呈现内容，而不是等待完整的响应？也许是一些 HTTP 标头？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T00:46:06.687

诀窍是最初发送大量数据以强制浏览器开始渲染输出。在我的测试中，1024 个字符足以让 Chrome 开始呈现响应。IE10 在收到 4065 个字符之前不会响应。

这有点骇人听闻，但确实有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:26:55.207

Google Closure 的 browserchannel 让服务器发送一个 290 字节的字符串来强制 IE 从第一个块呈现内容：

[请参阅https://code.google.com/p/libevent-browserchannel-server/wiki/BrowserChannelProtocol](https://code.google.com/p/libevent-browserchannel-server/wiki/BrowserChannelProtocol)上的“290 字节字符串 7cca694...e693af”

# google-app-engine - Google Email Migrator API 太慢

> ID：14409818
> 
> 赞同：0
> 
> 时间：2013-01-19T00:28:20.450
> 
> 标签：google-app-engine, google-apps, google-email-migration

我们从文档中知道，理论上每个用户每秒发送 1 条消息的限制，但在高端服务器上运行电子邮件迁移时，我们并没有接近这个限制。我们应该做什么？我们是否应该将每个用户的线程数量增加到一个以上（即使文档建议每个用户只有 1 个线程）？我使用了他们的 GAMME 工具，它在速度方面让电子邮件迁移 api 大吃一惊，即使在低端服务器上也是如此。

有没有人有什么建议？它不是超级慢，但它慢到足以让人痛苦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T00:52:30.610

GAMME 工具本身使用电子邮件迁移 API，它没有做任何特别的事情，因此可能有其他因素会减慢您的迁移速度。您是否真的从 AppEngine 打了迁移 API？如果是这样，您应该能够利用[appstats](http://googleappengine.blogspot.com/2010/03/easy-performance-profiling-with.html)来分析您的应用程序并查看是否存在其他瓶颈。你从哪里拉消息？

不要尝试为每个用户迁移使用超过 1 个线程，这将不起作用，并且您会遇到性能问题。请确保您[正确实施指数退避](https://developers.google.com/google-apps/email-migration/#usage_notes_and_troubleshooting)。如果您的应用程序没有通过回退指数（第一次 1 秒，然后是 2 秒、4、8 等）来确认 503 错误代码，那么 Google 将通过进一步限制您的 API 调用来做出响应。

# android - 进程被杀死后恢复状态

> ID：14409819
> 
> 赞同：7
> 
> 时间：2013-01-19T00:28:31.977
> 
> 标签：android, reload, serializable, savestate

我已经实现了 onRestoreInstanceState 和 onSaveInstanceState。当应用程序最小化时（通过按下主页按钮，或者另一个活动在前台），它们都可以成功运行。但是，当我最小化应用程序并终止进程（通过打开当前进程列表并结束该进程）时，应用程序不会恢复保存的实例状态。我怎样才能让它恢复那个保存的状态？我最好的选择是使用可序列化将 savedInstanceState 包写入文件（因此将某些内容存储在硬盘驱动器上，而不是 RAM 上），然后从文件中重新加载 savedInstanceState 吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-19T01:04:06.770

> 我怎样才能让它恢复那个保存的状态？

你不能。这不是保存的实例状态的用途。

> 我最好的选择是使用可序列化将 savedInstanceState 包写入文件（因此将某些内容存储在硬盘驱动器上，而不是 RAM 上），然后从文件中重新加载 savedInstanceState 吗？

您的“最佳选择”是持久性，例如文件、数据库或`SharedPreferences`. 您的具体方法似乎很奇怪。

保存的实例状态*仅*用于临时信息，例如用户已填写但尚未提交的表单的内容。除此之外的任何东西都不属于保存的实例状态，而是属于某种持久数据模型。这与构建 Web 应用程序没有什么不同，您在 DOM 和 JavaScript 变量中的数据不会永远存在，而是需要存储在某个地方（通常在 Web 服务器上）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-26T14:22:59.983

`SavedStateHandle`答案可能为时已晚，但是您可以使用Android Jetpack保存状态（并且它将在进程终止后幸存下来） 。

在此处查看更多信息： [https ://developer.android.com/topic/libraries/architecture/viewmodel-savedstate](https://developer.android.com/topic/libraries/architecture/viewmodel-savedstate)

# javascript - HighCharts：动态更新系列名称标签

> ID：14409821
> 
> 赞同：1
> 
> 时间：2013-01-19T00:29:21.137
> 
> 标签：javascript, highcharts

我已经能够使用 addPoint() 动态更新图表上的数据，但是在更新图表的任何其他部分时遇到了问题。

我想更新系列名称。

![在此处输入图像描述](../Images/58922e664a1a9d3e443a676673f23e6d.png)

我尝试直接在 javascript 中设置 series.name，并且尝试使用更新的选项（包括名称）调用 series.setOptions()。但是即使我调用chart.redraw()，图形也不会更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T15:30:10.520

不是最佳的，但在更改系列名称后，您可以通过操作 SVG 直接修改图例（假设为 jQuery）：

```
$($('.highcharts-legend-item tspan')[0]).text('SomeOtherLabel') 
```

或者更好的是，使用 Highcharts API：

```
$(chart.legend.allItems[0].legendItem.element.childNodes).text('Hi Mom') 
```

# android - Jsoup在解析Html时出错

> ID：14409826
> 
> 赞同：3
> 
> 时间：2013-01-19T00:29:37.563
> 
> 标签：android, html, parsing

该代码在 java 控制台中运行良好，但在 android 模拟器中时会出错。我检查了其他相同类型的帖子，但没有成功...

```
import java.io.IOException;
import java.util.ArrayList;
import java.util.Locale;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.select.Elements;

import android.app.Activity;
import android.content.ActivityNotFoundException;
import android.content.Intent;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.location.Geocoder;
import android.os.Bundle;
import android.speech.RecognizerIntent;
import android.speech.tts.TextToSpeech;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class AndroidGPSTrackingActivity extends Activity {
//some code which calls directions

    }

    public void directions() {
        try {

                        Document doc = Jsoup.connect("http://10.0.2.2/kj/jhjh.htm")
                    .get();////////////////error occurs here
            Elements el = doc.getElementsByClass("lkklk");
            String str = el.text();
            str = str.replaceAll("[0-9]+[.] ", "\n");
            string = str.split("\n");
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
} 
```

以下是错误......

```
01-19 05:34:35.723: E/AndroidRuntime(952): FATAL EXCEPTION: main
01-19 
05:34:35.723: E/AndroidRuntime(952): java.lang.NoClassDefFoundError: org.jsoup.Jsoup
01-19 
05:34:35.723: E/AndroidRuntime(952):    at com.example.gpstracking.AndroidGPSTrackingActivity.directions(AndroidGPSTrackingActivity.java:308)
01-19 
05:34:35.723: E/AndroidRuntime(952):    at com.example.gpstracking.AndroidGPSTrackingActivity.onActivityResult(AndroidGPSTrackingActivity.java:193)
01-19 
05:34:35.723: E/AndroidRuntime(952):    at android.app.Activity.dispatchActivityResult(Activity.java:5192)

01-19 05:34:35.723: E/AndroidRuntime(952):  at android.app.ActivityThread.deliverResults(ActivityThread.java:3137)
01-19 
05:34:35.723: E/AndroidRuntime(952):    at android.app.ActivityThread.handleSendResult(ActivityThread.java:3184)
01-19 
05:34:35.723: E/AndroidRuntime(952):    at android.app.ActivityThread.access$1100(ActivityThread.java:130)
01-19 
05:34:35.723: E/AndroidRuntime(952):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1243)
01-19 
05:34:35.723: E/AndroidRuntime(952):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-19 
05:34:35.723: E/AndroidRuntime(952):    at android.os.Looper.loop(Looper.java:137)

01-19 05:34:35.723: E/AndroidRuntime(952):  at android.app.ActivityThread.main(ActivityThread.java:4745)
01-19 
05:34:35.723: E/AndroidRuntime(952):    at java.lang.reflect.Method.invokeNative(Native Method)
01-19 
05:34:35.723: E/AndroidRuntime(952):    at java.lang.reflect.Method.invoke(Method.java:511)
01-19 
05:34:35.723: E/AndroidRuntime(952):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-19 
05:34:35.723: E/AndroidRuntime(952):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-19 
05:34:35.723: E/AndroidRuntime(952):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T00:47:50.940

你得到一个`NoClassDefFoundError`因为你的 jar 文件在运行时不可用。为了让它在运行时可用，您必须将它放在您的 libs 文件夹中，并检查您的 java 构建路径中 jar 文件上的复选框，如下所示：

![在此处输入图像描述](../Images/91f321c449ae6cde410f06affabc44dd.png)

# mysql - SQL 如何构建这个特定的数据库模式

> ID：14409829
> 
> 赞同：0
> 
> 时间：2013-01-19T00:30:18.613
> 
> 标签：mysql, sql, database-design, data-modeling

我有两张桌子。

**用户类型**

*   (1)个人
*   (2)业务
*   (3)学生

**关系猫**

*   cat_id
*   猫名
*   用户身份
*   用户类型

首先`Relationship_cat`，我希望一个条目看起来像这样

```
cat_id(1), cat_name(interests) ,user_id(ANy user), user_type(only 1 and 3)
cat_id(2), cat_name(news) ,user_id(ANy user), user_type(only 2 and 3)
etc 
```

我`user_type`相信我可以将其设置为 0 作为默认值，因此它不受任何用户的限制。我该如何处理这个`"relationship_cat > user_type"`案子？我是否使用逗号分隔的值列表？它有效率吗？如果有很多`User_types`条目增加怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T00:35:23.497

您应该使用多对多连接表。因此，您的架构可能如下所示：

用户类型

*   user_type_id
*   用户类型值

类别

*   cat_id
*   猫名

categories_to_user_types

*   cat_id
*   user_type_id

任何时候您可能会考虑使用您提到的逗号分隔值，这应该是您进一步规范化表格的标志。我所展示的通常是表达表之间多对多关系的最佳方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T00:37:24.867

如果您需要在单个列中存储多个值，我建议您引入另一个表，以将这些关系存储为一对多关系。将其命名为 Relationship_cat_user_type 并将 cat-Id 和 user_type_id 值存储在该表中。这最适合标准化。

祝你好运。

# java - 在 Osmdroid 地图中禁用滚动

> ID：14409838
> 
> 赞同：2
> 
> 时间：2013-01-19T00:32:26.740
> 
> 标签：java, android, maps, osmdroid, openstreetmap

我有一个[Osmdroid](https://code.google.com/p/osmdroid/) MapView。即使我已经设置

```
mapView.setClickable(false);
mapView.setFocusable(false); 
```

地图仍然可以移动。有没有一种简单的方法可以禁用与地图视图的所有交互？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-03-14T17:30:58.360

一个简单的解决方案是像@Schrieveslaach 一样使用mapView：

```
mapView.setOnTouchListener(new View.OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        return true;
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-04T08:28:33.827

我找到了解决方案。您需要通过设置一个`OnTouchListener`. 例如，

```
public class MapViewLayout extends RelativeLayout {

    private MapView mapView;

    /**
     * @see #setDetachedMode(boolean)
     */
    private boolean detachedMode;

    // implement initialization of your layout...

    private void setUpMapView() {
       mapView.setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                if (detachedMode) {
                    if (event.getAction() == MotionEvent.ACTION_UP) {
                        // if you want to fire another event
                    }

                    // Is detached mode is active all other touch handler
                    // should not be invoked, so just return true
                    return true;
                }

                return false;
            }
        });
    }

    /**
     * Sets the detached mode. In detached mode no interactions will be passed to the map, the map
     * will be static (no movement, no zooming, etc).
     *
     * @param detachedMode
     */
    public void setDetachedMode(boolean detachedMode) {
        this.detachedMode = detachedMode;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T02:44:12.573

你可以试试：

```
mapView.setEnabled(false); 
```

这应该禁用与地图视图的所有交互

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-23T06:27:25.700

我的解决方案类似于@schrieveslaach 和@sagix，但我只是扩展了基`MapView`类并添加了新功能：

```
class DisabledMapView @JvmOverloads constructor(
    context: Context, attrs: AttributeSet? = null
) : MapView(context, attrs) {

    private var isUserInteractionEnabled = true

    override fun dispatchTouchEvent(event: MotionEvent?): Boolean {
        if (isUserInteractionEnabled.not()) {
            return false
        }
        return super.dispatchTouchEvent(event)
    }

    fun setUserInteractionEnabled(isUserInteractionEnabled: Boolean) {
        this.isUserInteractionEnabled = isUserInteractionEnabled
    }
} 
```

# php - 动态添加到PHP中的数组？

> ID：14409841
> 
> 赞同：0
> 
> 时间：2013-01-19T00:33:05.563
> 
> 标签：php, html, arrays, forms, input

我正在尝试从表单中获取输入，将其添加到数组中，然后`print_r`将该数组添加到屏幕上。

我的问题是表单的输入只替换了数组中的第一个（也是唯一一个）元素。

```
<form action="" method="POST">
    <input type="text" name="text" />
    <input type="submit" name="sub"/>
</form>

<?php
    $a = array();

    if( isset($_REQUEST['text']) && !empty($_REQUEST['text'])){
        array_push($a, $_REQUEST['text']);
        print_r($a);
    }
?> 
```

我的一个理论是`$a`不断地在 PHP 代码的第一行 () 上重新分配`$a = array();`，但我不知道如何修复它。我环顾四周，但找不到答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T00:36:05.437

你是对的。每次发布表单时，数组都会重新*初始化*。您想要做的是将您的数组作为更持久的数据源。

1.  您可以考虑使用会话和[`$_SESSION`变量](http://php.net/manual/en/reserved.variables.session.php).

```
session_start();
if (!is_array($_SESSION['a'])){
  $_SESSION['a'] = array();
}
$_SESSION['a'][] = $_REQUEST['text']; 
```

1.  您还可以考虑将此数据[写入](http://php.net/manual/en/function.file-put-contents.php)一个小文本文件，然后您可以在脚本开始时[读取](http://php.net/manual/en/function.file-get-contents.php)该文件。

2.  另一种选择是将[数据写入`$_COOKIE`](http://php.net/manual/en/function.setcookie.php).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T00:35:36.647

你正在混合客户端和服务器执行......
如果你想要一个文本数组，你应该使用这样的东西：

```
<form action="" method="POST">

    <input type="text" name="text[]" />
    <input type="text" name="text[]" />
    <input type="text" name="text[]" />

    <input type="submit" name="sub"/>
</form> 
```

如果您想添加更多文本输入，您应该使用 javascript 注入更多输入

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T00:36:00.373

您没有替换任何东西，您正在做的是将 的值添加`$_REQUEST['text']`到之前为空的数组中。

# android - Google API 兼容性问题

> ID：14409843
> 
> 赞同：2
> 
> 时间：2013-01-19T00:33:23.393
> 
> 标签：android

我尝试复制 Google Drive QuickStart 示例，但是当我尝试在我的设备 (4.0.4) 上调试时，一个感叹号 (!) 出现在 Android 设备上的 Target 字段下的 4.0.4 旁边选择对话框这是什么意思，我需要配置我的设备吗？如何？

# python - Python2.7 导入模块时搜索不需要的目录

> ID：14409847
> 
> 赞同：0
> 
> 时间：2013-01-19T00:33:43.550
> 
> 标签：python, python-2.7, pythonpath, python-2.4, python-import

我尝试使用 Python 2.7 导入`numpy`.

可能导致问题的配置

*   我的电脑上安装了两个 Python 解释器，Python`2.4`和`2.7`
*   **安装的两份**副本`numpy`，一份在我的主目录中，这是所需的一份，另一份在 Python 2.4 的地方`/usr/lib/python2.4/site-packages/`，这是不受欢迎的。

此外，我将`PYTHONPATH`环境变量设置为包含导入所需`numpy`副本的必要路径。

但是 Python 2.7 搜索 Python 2.4 的默认模块安装路径在哪里，在我的例子中是`/usr/lib/python2.4/site-packages`.

这怎么可能发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:00:00.017

如果您找不到包含的来源，您可以在其他导入之前将以下内容放在程序顶部：

```
import sys
sys.path.remove('/usr/lib/python2.4/site-packages') 
```

# c++ - 如何从 MySQL Connector/C++ 获取本机 C API 连接结构？

> ID：14409848
> 
> 赞同：5
> 
> 时间：2013-01-19T00:33:47.513
> 
> 标签：c++, mysql, mysql-connector

我正在使用 MySQL 连接器/C++ 从 C++ 程序与 MySQL 服务器进行通信。出于某种原因（背景见下文），我在某些时候需要原生 C API 连接结构。如何从 Connector/C++ 类中获取它？

背景：

我想将大量数据（最多 2-30 亿个元组）从客户端的主内存加载到服务器中。因此，我想尝试 LOAD DATA INFILE 语句。为了避免首先将整个数据写入文本文件，我想定义我自己的本地 infile 处理程序，它直接从主内存中读取数据。

但是，Connector/C++ 没有设置用户定义的本地 infile 处理程序的方法，但本机 C API 可以。对应的 C 函数 mysql_set_local_infile_handler() 需要一个本地连接处理程序（MYSQL 结构）作为输入参数。那么如何从 Connector/C++ 获取这个处理程序呢？或者有没有更好的方法在连接器/C++ 环境中设置本地 infile 处理程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T14:16:21.557

您想要[`sql::mysql::NativeAPI::MySQL_NativeConnectionWrapper::mysql`](http://www.sourcecodebrowser.com/mysql-connector-cplus-pplus-p/1.1.0~r814/classsql_1_1mysql_1_1_native_a_p_i_1_1_my_s_q_l___native_connection_wrapper.html#a0a93e50136736baf98722022d69e0d61)，但它是任何方法都不会返回的私有成员。因此，要访问该结构，您必须分叉连接器/C++ 源代码并编译您自己的连接器。

如果这是您所采取的路径，您可能更愿意提供`mysql_set_local_infile_handler()`从连接器/C++ 中访问的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T20:25:48.030

还有另一种方法可以通过 c++ 命令“system”的帮助来解决它。

1）在my.cnf中设置mysql环境：`local-infile=1`. 你可以在这里找到这个文件：[how to know mysql my.cnf location](https://stackoverflow.com/questions/2482234/how-to-know-mysql-my-cnf-location)。或者只是在下面提到的 shell 命令行中添加选项。`mysql **--local-infile** [other options]`

2) 在您的 c++ 代码中，而不是`stmt->execute(...)`从 c++ 连接器使用，使用

`system("mysql -u username --database=dbname --password=pw -e \"LOAD DATA LOCAL INFILE filename INTO TABLE tablename FIELD TERMINATED BY ',' LINES TERMINATED BY '\n' (column1, column2, column3);\"");`

char 数组也可以在程序中进行操作。虽然它看起来“技术含量低”，但它确实在我的项目中完成了工作。

# python - 在 unix 系统上使用 Python 对文件进行排序

> ID：14409849
> 
> 赞同：1
> 
> 时间：2013-01-19T00:34:17.900
> 
> 标签：python, shell, unix, filesystems

我正在使用自定义 unix 命令对 Python 中的文本文件进行排序，该命令将文件名作为输入（或从标准输入读取）并写入标准输出。我想对`myfile`排序后的版本进行排序并将其保留在原位。是从 Python 中创建临时文件的最佳方法吗？我目前的解决方案是：

```
inputfile = "myfile"
# inputfile: filename to be sorted
tmpfile = "%s.tmp_file" %(inputfile)
cmd = "mysort %s > %s" %(inputfile, tmpfile)
# rename sorted file to be originally sorted filename
os.rename(tmpfile, inputfile) 
```

这是最好的解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T00:47:40.910

如果您不想创建临时文件，可以使用`subprocess`如下：

```
import sys
import subprocess

fname = sys.argv[1]
proc = subprocess.Popen(['sort', fname], stdout=subprocess.PIPE)
stdout, _ = proc.communicate()
with open(fname, 'w') as f:
    f.write(stdout) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T00:42:19.410

最好的解决方案是使用[os.replace](http://docs.python.org/3/library/os.html#os.replace)，因为它也可以在 Windows 上运行。

不过，这并不是我所认为的“就地排序”。通常，就地排序意味着您实际上交换列表中的单个元素而不进行复制。您正在制作副本，因为必须先完全构建排序列表，然后才能覆盖原始列表。如果您的文件变得非常大，这显然不再适用。那时您可能需要在原子性和就地性之间进行选择。

如果您的 Python 太旧而无法安装 os.replace，那么在[添加 os.replace 的 bug](http://bugs.python.org/issue8828)中有很多资源。

对于临时文件的其他用途，您可以考虑使用[tempfile 模块](http://docs.python.org/3/library/tempfile.html)，但我认为在这种情况下它不会给您带来太多好处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T00:35:57.857

您要么创建一个临时文件，要么必须将整个文件读入内存并将其通过管道传递给您的命令。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-19T02:17:16.893

您可以尝试截断写入模式：

```
with open(filename, 'r') as f:
   model.read(f)
model.process()
with open(filename, 'w') as f:
   model.write(f) 
```

注意这是非原子的

此条目描述了在 Python 中更新文件的一些优点/缺点：http: [//blog.gocept.com/2013/07/15/reliable-file-updates-with-python/](http://blog.gocept.com/2013/07/15/reliable-file-updates-with-python/)

# c# - 调用 ReadProcessMemory 时导致引用设置为 null 的奇怪行为

> ID：14409852
> 
> 赞同：3
> 
> 时间：2013-01-19T00:34:51.293
> 
> 标签：c#, winapi, pinvoke

[`ReadProcessMemory`](http://msdn.microsoft.com/en-us/library/ms680553(v=VS.85).aspx)通过此 P/Invoke 签名调用 C# 时，我遇到了一些非常奇怪的行为：

```
[DllImport("kernel32.dll", SetLastError = true)]
[return: MarshalAs(UnmanagedType.Bool)]
public static extern bool ReadProcessMemory(
    IntPtr hProcess,
    IntPtr lpBaseAddress,
    [Out] byte[] lpBuffer,
    int dwSize,
    out int lpNumberOfBytesRead
    ); 
```

* * *

在我的应用程序中，我正在扫描具有读写访问权限的内存区域的整个内存（并且应用了更多过滤器，不过这是另一部分）。

扫描部分的代码是这样的：

```
int numberOfBytes;
if (!NativeMethods.ReadProcessMemory(handle, region.StartAddress,
    buffer, (int)region.RegionSize, out numberOfBytes))
// The handle, region (custom struct containing some fields from the
// MEMORY_BASIC_INFORMATION struct), and buffer come from parameters. 
```

并且代码完美运行。它扫描整个内存以查找字节序列。那里没有问题。

* * *

在我的程序流程中更进一步，我有这个代码：
*注意：它使用与前面的代码相同的句柄 IntPtr（检查它）并且它在同一个线程中运行*

```
int bytesRead;
byte[] buffer = new byte[128]; // In my real app this is some calculated value
                            // however that irrelevant. It's calculated 128.
if (!NativeMethods.ReadProcessMemory(handle, location.Location,
    buffer, buffer.Length, out bytesRead))
    continue; // Error while reading
// At this point buffer == null, so the next line causes an exception
if (bytesRead != buffer.Length) continue; 
```

代码非常相似，但由于某种原因，对缓冲区的引用丢失并且缓冲区设置为空。如果它不是外部调用，我会 100% 确定这是一个错误，因为缓冲区没有作为`ref`或`out`参数传递。但是我知道 .NET 在外部调用（例如编组）时会做一些伏都教的事情。

使情况更加奇怪的是，当我将该代码替换为：

```
int bytesRead;
byte[] buffer = new byte[128];
byte[] bufferRef = buffer;
if (!NativeMethods.ReadProcessMemory(handle, location.Location,
    buffer, buffer.Length, out bytesRead))
    continue; // Error while reading
buffer = bufferRef;
if (bytesRead != buffer.Length) continue; 
```

代码很简单。内存读取和所有！所以发生的所有事情都是由于某种原因`buffer`变量失去了对实际缓冲区的引用。它把我搞糊涂了。

* * *

**这种行为是由于我做错了什么（例如错误的 P/Invoke）造成的，它是否危险（泄漏内存？），并且可以解释？**

* * *

我的配置：

*   .NET 框架 4.0
*   Visual Studio Professional 2012（版本 11.0.51106.01 更新 1）
*   已安装 .NET Framework 4.5.50709
*   以管理员身份运行
*   发生在发布和调试版本中，在 Visual Studio 主机可执行文件和常规构建可执行文件中。
*   Windows 7 64 位
*   我正在读取内存的进程是 32 位的
*   构建配置：平台：任何 CPU

* * *

**编辑：**我正在使用的完整 NativeMethods 类可以在这里找到：http: [//paste2.org/p/2770271](http://paste2.org/p/2770271)

**Edit2：**我添加了解决问题的简单步骤，可以在[此处](https://stackoverflow.com/a/14410443/613176)找到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T01:13:57.670

可能因为您是 64 位应用程序，所以您的 lpNumberOfBytesRead 应该是“长”的，因此对 ReadProcessMemory 的调用会在返回时覆盖（您的一部分）缓冲区指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T02:06:37.963

由于[Hans Passant](https://stackoverflow.com/users/17034/)和[500 - Internal Server Error](https://stackoverflow.com/users/448932/)（我将其标记为已接受的答案）的提示，我设法解决了这个问题。

这些是我采取的步骤：

1.  我选择使用 32 位而不是 Any CPU。（主要是为了向后兼容。）
2.  然后我使用 MSDN 页面更新了 P/Invoke 签名的功能和[这个](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383751(v=vs.85).aspx)关于 windows 数据类型的页面。并选择了签名的 32 位变体。
3.  我再次运行代码，缓冲区引用没有被清除。

谢谢您的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T01:02:53.523

在您的 ReadProcessMemory 导入`OutAttribute`中声明的of （这是 的正确移植）指定数据应该从被调用者封送回调用者......因此您的字节数组可能被被调用者本身（Kernel32）引用为空。`byte[] lpBuffer``_Out_ LPVOID lpBuffer`

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-19T01:45:21.623

不要将 标记`byte[] buffer`为`[Out]`参数。它更类似于`ref`than `out`，因为它是一个字节数组，所以已经暗示了这一点。由于整数（`int`这里）是一个值类型，它需要`out`参数 for `numberOfBytesRead`。那是唯一应该用 标记的`out`。

当某些东西被标记为`out`参数时，`Marshal`该类期望被调用者（`ReadProcessMemory`此处）返回一个值。字节数组只是指向内存中包含字节的位置的指针（地址）。您不希望被调用者写入此指针。

# ios - 未来相对日期人类可读形式

> ID：14409853
> 
> 赞同：0
> 
> 时间：2013-01-19T00:35:10.217
> 
> 标签：ios, objective-c, cocoa-touch

如何输出人类可读的日期，如将 NSDATE 转换为人类可读的形式，如明天、一周后、1 个月后等？

例如，如果当前时间是 2012 年 1 月 19 日上午 7 点

输入日期为 2012 年 1 月 20 日上午 9 点

那么函数应该在明天上午 9 点结束。

我发现如何在网上使用过去的日期而不是未来的日期来做到这一点。

我在网上找到的功能也不具体。任何帮助，将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T00:39:21.863

您需要使用 NSDateFormatter。从[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html#//apple_ref/occ/cl/NSDateFormatter)：

> setDoesRelativeDateFormatting：指定接收者是否对日期组件使用诸如“今天”和“明天”之类的短语。

```
- (void)setDoesRelativeDateFormatting:(BOOL)b 
```

> 参数 b YES 指定接收方应使用相对日期格式，否则为 NO。讨论 如果日期格式化程序使用相对日期格式化，它会在可能的情况下用表示相对日期的短语（例如“今天”或“明天”）替换其输出的日期部分。可用的短语取决于日期格式化程序的语言环境；而对于未来的日期，英语可能只允许“明天”，法语可能允许“后天后天”，如下例所示。

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setTimeStyle:NSDateFormatterNoStyle];
[dateFormatter setDateStyle:NSDateFormatterMediumStyle];
NSLocale *frLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"fr_FR"];
[dateFormatter setLocale:frLocale];

[dateFormatter setDoesRelativeDateFormatting:YES];

NSDate *date = [NSDate dateWithTimeIntervalSinceNow:60*60*24*3];
NSString *dateString = [dateFormatter stringFromDate:date];

NSLog(@"dateString: %@", dateString);
// Output
// dateString: après-après-demain 
```

# matlab - 在MATLAB中生成给定均值和标准差的随机数据？

> ID：14409854
> 
> 赞同：0
> 
> 时间：2013-01-19T00:35:13.853
> 
> 标签：matlab, random, statistics, mean

我有有限的数据 RV，我可以找到平均 mu 和标准偏差 sigma。现在我想生成更多保持相同 mu 和 sigma 的数据点。我将如何在 MATLAB 中执行此操作？我做了以下操作，但是当我绘制生成数据（mu_2）的平均值时，它不匹配 mu...

```
N = 15
R = mean(RV) + std(RV)*randn(N, 1);
mu = mean(RV)*ones(N,1);
mu_2 = mean(R)*ones(N,1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T00:43:15.243

我认为您应该使用**normrnd(mu,sigma)**函数转到[文档](http://www.mathworks.com/help/stats/normrnd.html)以获取更多详细信息

此致

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T00:42:20.750

这看起来是正确的。对于如此小的样本量，您不太可能得到很好的匹配。尝试**更大**的值`N`。

如果您想将数据集**强制**为特定的均值和标准差，那么您可以生成一组样本，然后测量它们的均值和标准差，然后通过缩放和标量加法进行调整。

例如：

```
R = randn(N,1);

% Measure
mu_tmp = mean(R);
std_tmp = std(R);

% Normalise and denormalise
R = (R - mu_tmp) / std_tmp;
R = (R * std_desired) + mu_desired; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-07T13:06:25.080

您还可以使用 Netlab 库生成高斯混合（它是免费的！）

```
mix=gmm(8,3,'spherical');
[Data, Label]=gmmsamp(mix,1000); 
```

以上生成了超过 1000 个观测值的 8 个维度和三个中心（球形）的数据集。

# php - 无法识别的日期格式

> ID：14409857
> 
> 赞同：1
> 
> 时间：2013-01-19T00:35:23.977
> 
> 标签：php, javascript, date, date-format

好的 ！

我在从日期中提取数据时遇到了一些困难。问题是我从一个未记录的 API 中获得了一个数字。

> “创建”：734394
> “last_chapter_date”：734883

我尝试将其除以 365,242 天（一年的确切天数）

> 2010,705231052289
> 所以显然这些是自 0.0.0000 以来经过的天数

我目前正在尝试这样的事情：http: [//jsfiddle.net/LRUy5/4/](http://jsfiddle.net/LRUy5/4/)

```
function zero21970(nDays) {
    // 0     70   2013  
    // |-----|-----|  

    // 0 to date
    var dateMils = nDays*24*60*60*100;
    // 0 to 1970
    zeroTo1970 = (1970*365.242)*24*60*60*100;

    //subtract time from 0-1970 from the time 0-date
    //to cut out the part from 1970-today
    return new Date(dateMils-zeroTo1970);
}

//http://www.mangaeden.com/api/manga/4e70e9f6c092255ef7004344/
zero21970(734394) //-> Jan 26 1974 
```

我需要将它保存在数据库中并通过 php 或 javascript 使用它。有没有人认识这种格式，或者你知道格式化它的方便方法吗？

编辑：我应该补充一点，最后一章是在 2013 年 1 月 15 日左右发布的……只是为了有一些东西可以抓住。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T00:42:53.673

## 更新后的版本：

我猜如果最后一章是从 2013 年开始的，那么该值是从`01.01.0001`. 因此，我们可以更新初始日期以及更改`setHours`方法`setDate`以提高准确性：

```
var date = new Date("0001");
date.setDate(734883);
date.toGMTString();  // "Tue, 15 Jan 2013 00:00:00 GMT" 
```

**演示：http:** [//jsfiddle.net/LRUy5/6/](http://jsfiddle.net/LRUy5/6/)

* * *

**旧版：**

我找到了一种可以在我的计算机上成功运行的解决方案：

```
var date = new Date("0000");
date.setHours(734394 * 24);
date.toGMTString();  // "Mon, 13 Sep 2010 21:00:00 GMT" 
```

**演示：http:** [//jsfiddle.net/LRUy5/5/](http://jsfiddle.net/LRUy5/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T00:43:55.467

如果您使用的是 PHP，那么您应该替换

```
return new Date(dateMils-zeroTo1970); 
```

和

```
return date('Y-m-d', (dateMils-zeroTo1970)); 
```

# ruby-on-rails - 是否可以将序列化属性用于关联？

> ID：14409858
> 
> 赞同：0
> 
> 时间：2013-01-19T00:35:34.340
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有类似的东西：

```
class Bucket < ActiveRecord::Base
  serialize :droplets, Array #of IDs
end

class Droplet < ActiveRecord::Base
  #...
end 
```

由于单个`Droplet`可以属于多个`Bucket`s （真正的问题有点复杂），是否有实现类似于以下内容的“rails-way”：

```
#in some action
@bucket = Bucket.find(47)
@droplets = Droplet.find_all_by_id(@bucket.droplets) 
```

这样人们就可以访问`Bucket#droplets`数组中每个元素的位置`Droplet`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T22:38:19.917

听起来你想要多对多的关系。真的建议用 3 张桌子来做这件事。如果您不希望这样做，则必须将数组保留在 sql 中，在这种情况下，您将失去一些 rails 功能，并且必须按照您自己的描述进行操作

```
@bucket = Bucket.find(47)
@droplets = Droplet.find_all_by_id(@bucket.droplets) 
```

如果你想以更清洁的方式做：

```
class Bucket < ActiveRecord::Base
  has_and_belongs_to_many :droplets
end

class Droplet < ActiveRecord::Base
  has_and_belongs_to_many :buckets
end 
```

您将需要迁移：

```
# in migration
def change
  create_table 'buckets_droplets', :id => false do |t|
    t.column :bucket_id, :integer
    t.column :droplet_id, :integer
  end
end 
```

# javascript - 如何在谷歌地图上找到最接近鼠标光标的纬度/经度位置

> ID：14409860
> 
> 赞同：1
> 
> 时间：2013-01-19T00:35:41.247
> 
> 标签：javascript, google-maps-api-3

我有很多标记。

在左边我有谷歌地图上实际标记的标记抽象列表。

我决定使用折线

```
 var flightPlanCoordinates = [
    new google.maps.LatLng(near_cursor_lat, near_cursor_lon),
    new google.maps.LatLng(marker_lat, marker_lon)
  ];

  var flightPath = new google.maps.Polyline({
    path: flightPlanCoordinates,
    strokeColor: "#FF0000",
    strokeOpacity: 1.0,
    strokeWeight: 2
  });

  flightPath.setMap(map); 
```

这个想法是用户将鼠标指向左侧的标记抽象框，然后他在地图上显示从标记抽象到实际标记的线。`STARTING POINT`除了（图像上的红点）之外，我已经拥有了所有东西

**当鼠标指向左侧的框时，如何找到位于鼠标指针旁边的起始纬度/经度**

一些细节： 当鼠标指向 sais PERSON1 的框时，我想要第一个红点的坐标。当鼠标指向 sais PERSON2 的框时，我想要第二个红点的坐标。等等。有一个技巧部分 - 左框位于谷歌地图 div 之外；另外，如果有很多人的框，左边的div会允许上下滚动这些人，所以人框和红点之间的垂直相关性是动态的。

理论上，**我认为**，我需要一个在我指向其中一个框时触发的事件。当 even 被触发时，我需要测量从顶部到鼠标指针的垂直距离（以像素为单位）。然后，当我有垂直距离时，我需要执行一些操作来测量谷歌地图上相同的垂直距离，并在地图上以纬度/经度坐标获得该点。

![在此处输入图像描述](../Images/c303f2b60ee3c75bb360ad568fd6eb92.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:33:24.793

**使用[此代码的工作示例进行](http://tinkerbin.com/yxsJOFTU) **更新**使用[JsFiddle 进行](http://jsfiddle.net/farrukhsubhani/zG4eL/show/)**第二次更新两种方式的示例单击并打开地图窗口或鼠标悬停地图以突出显示列表****

 **据我了解，您遇到的问题如下：

1.  人员列在与地图分开的 div 中
2.  人们在地图上具有与其相关联的纬度和经度
3.  地图使用 lat long 显示带有标记的人的位置（可能存储在 db 或其他东西中）
4.  你想要它，这样人们就可以在地图上突出显示一个人，以及鼠标悬停在列表中。

如果您在地图或列表中有可用的纬度/经度，您需要将它们关联在一起。

解决方案是这样的，但是有很多方法可以实现这种映射

1.  在您列出人员的 div 中。当有人将鼠标悬停在每个人元素上时，将 data-mapid 属性插入到每个元素上，然后突出显示它并从那里获取 data-mapid。
2.  在您的地图上，当您渲染一个标记时，您还可以传递一个参数 data-mapid 或其他具有相同值的东西，并且在地图上也有一个突出显示功能。

* * *

```
`jQuery("#gmap3ul li[data-gb='plist']").each(function(){
           elemtopush = {
                        lat:jQuery(this).attr("data-lat"), 
                        lng:jQuery(this).attr("data-long"), 
                        data:{
                            "ht":jQuery(this).html(),
                            "id":jQuery(this).attr("data-mapid")
                        }
                    };
                    ulmarkerspgb.push(elemtopush);
                });` 
```

* * *

在上面的代码中，我有要在地图上显示的 html 以及作为 data-mapid 的 id 现在这个 mapid 可以是 person1 person2 等等，所以你可以用列表关联到 div。我正在使用 ul 和 li 在 div 中列出它们。

在将鼠标悬停在标记事件上时，您可以执行以下操作

* * *

```
mouseover: function(marker, event, data)
                                            {
                                                clearalllist();
                                                var listelement = jQuery("td[data-mapid='"+data.id+"']");
                                                jQuery(listelement).attr('style','background-color:#ccc');
                                                var map = jQuery(this).gmap3('get'),
                                                infowindow = jQuery(this).gmap3({action:'get', name:'infowindow'});
                                                    if (infowindow){
                                                        infowindow.open(map, marker);
                                                        infowindow.setContent(data.ht);
                                                        google.maps.event.addListener(infowindow, 'closeclick', function(event) {
                                                            jQuery(listelement).attr('style','');
                                                        });
                                                        google.maps.event.addListener(infowindow, 'close', function(event) {
                                                            jQuery(listelement).attr('style','');
                                                        });

                                                    } else {
                                                        jQuery(this).gmap3({action:'addinfowindow', anchor:marker, options:{content: data.ht}});
                                                        infowindow = jQuery(this).gmap3({action:'get', name:'infowindow'});
                                                        google.maps.event.addListener(infowindow, 'closeclick', function(event) {
                                                            jQuery(listelement).attr('style','');
                                                        });
                                                        google.maps.event.addListener(infowindow, 'close', function(event) {
                                                            jQuery(listelement).attr('style','');
                                                        });
                                                    }
                                            } 
```

* * *

我从 3 个位置复制粘贴了很多冗余代码，因此您可能只能从中获得所需的内容。

这可以使地图链接到列表和列表链接到地图。请参阅我在顶部的第二次更新或单击此[JSFiddle 示例](http://jsfiddle.net/farrukhsubhani/zG4eL/show/)。当您单击顶部的列表时，它会打开地图窗口，当您将鼠标悬停在地图图标上时，它会突出显示列表。

这也通过列表而不是在 js 中硬编码 lat longs 来填充地图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T13:42:29.733

@MehdiKaramosly 的回答很到位。

只是稍微推进上述内容，要获得不属于可见地图的元素的纬度 lng（如果地图在那里可见），您可以将事件页面 X/Y 传递到该行：

```
projection.fromLatLngToContainerPixel(marker.getPosition()); 
```

像这样：

```
var pixelLatLng = overlay.getProjection().fromContainerPixelToLatLng(new google.maps.Point(e.pageX,e.pageY)); 
```

我在以下位置放置了一个非常基本的示例：[http ://tinkerbin.com/p30yEXqH](http://tinkerbin.com/p30yEXqH)

如果您单击地图外的任何位置（相当于单击覆盖它的 div），您将在控制台日志中看到您单击的任何位置的 lat/lng（即使它不在可见地图空间），已记录。

干杯，

C。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T15:49:31.860

这应该是您问题的答案：

您应该使用标记来表示（人），然后在下面的帖子中添加一个监听器 onMouseOver：

```
var overlay = new google.maps.OverlayView();
overlay.draw = function() {};
overlay.setMap(map); // 'map' is new google.maps.Map(...) 
```

在监听器中使用覆盖来获取投影和像素坐标：

```
google.maps.event.addListener(marker, 'mouseover', function() {
    var projection = overlay.getProjection(); 
    var pixel = projection.fromLatLngToContainerPixel(marker.getPosition());
    // use pixel.x, pixel.y ... (after some rounding)
}); 
```

复制自： [Get Position of Mouse Cursor on Mouseover of Google Maps V3 API Marker](https://stackoverflow.com/questions/6558160/get-position-of-mouse-cursor-on-mouseover-of-google-maps-v3-api-marker)**

# ruby-on-rails - Cucumber vs Rspec 用什么来检查用户权限

> ID：14409861
> 
> 赞同：0
> 
> 时间：2013-01-19T00:35:41.490
> 
> 标签：ruby-on-rails, rspec, devise, cucumber, cancan

我正在使用 devise 和 cancan 来确保保护我网站的某些区域。

什么工具最适合检查具有角色的用户可以访问而另一个角色不能访问？实际上，我正在创建几个黄瓜功能以确保具有管理员角色的用户可以看到该页面，而所有其他角色则不能（收到错误消息）。有没有更好的方法来做到这一点？

我已经阅读了很多关于何时在 rspec 上使用 cucumber 以及何时在用户 rspec 上使用 cucumber，我得到的一般想法是我应该用 cucumber 说“用户说这个”，并且用 rspec 确保在引擎盖下一切都是正常工作...顺便说一句，很难在工作中应用这个一般概念，老实说，我觉得这是浪费时间。如果我可以检查最后一页是否符合预期，我为什么要测试例如控制器？我发现只值得测试模型验证和模型功能。

有什么建议吗？可能比 RSpec 书更实用，因为我必须尽快应用概念。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T21:54:34.447

从评论中扩展。

基于[https://github.com/ryanb/cancan/wiki/Testing-Abilities](https://github.com/ryanb/cancan/wiki/Testing-Abilities)我执行以下测试。

在我的管理员规范中。

```
require 'spec_helper'
require 'cancan/matchers'

describe Administrator do
 describe "abilities" do
    subject { ability }
    let(:ability) { Ability.new(admin) }
    let(:account) { FactoryGirl.create :account, isp: admin.isp }

    context "is a helpdesk admin" do
      let(:admin) { FactoryGirl.create :helpdesk_admin }
      let(:mail_user) {FactoryGirl.create :mail_user, account: account}
      let(:web_user) {FactoryGirl.create :web_user, account: account }
      let(:radius_user) { FactoryGirl.create :radius_user, account: account}

      it { should be_able_to(:change_password,mail_user)}
      it { should be_able_to(:change_password,radius_user)}
      it { should be_able_to(:change_password,web_user)}
      it { should_not be_able_to(:manage, Account.new) }
    end

    context "is a realm admin" do
      let(:admin) { FactoryGirl.create :realm_admin }
      it{ should be_able_to(:manage, MailDomain.new)}
      it{ should be_able_to(:manage, RadiusDomain.new)}
      it{ should be_able_to(:manage, WebDomain.new)}
      it{ should be_able_to(:manage, Administrator.new)}
    end
end 
```

这让我可以测试每个角色分配的能力

然后在我的功能中/我为每个控制器做这样的事情，以确保我不会忘记授权。

```
context "regular admin" do
    let(:admin) {FactoryGirl.create(:admin)}
     before(:each) do
      visit login_path
      fill_in "email" , with: admin.email
      fill_in "password", with: admin.password
      click_button "Sign in"
    end

     it "shoudln't allow them to add new admins" do 
       visit new_administrator_path
       page.should have_content "You are not authorized to access this page."
     end

  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T20:21:01.803

Cucumber 更适合商业案例测试，例如 Bill 不能编辑 Ben 的个人资料。RSpec 可能更适合进行更详尽的分析，但希望您可以相信 Devise 和 CanCan 已经为您完成了这项工作。

我有一个示例项目，它展示了一些使用 Cucumber 进行身份验证的有趣方法，因此您可以编写非常简单的功能。将这些想法扩展到角色使用并不需要太多。希望它有一些用处

[看这里](https://github.com/diabolo/r3-mongo-devise)

# ruby-on-rails - 错误 406，远程：真正的 Ajax 表单仍然导致重定向

> ID：14409862
> 
> 赞同：4
> 
> 时间：2013-01-19T00:35:45.617
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery

这让我一整天都难过。

我的应用程序提供文件上传，一旦上传，它就会运行 create.js.erb 并将新记录添加到页面中。

我的 HTML 看起来像这样，

```
<div id="doc_upload">
  <%= form_for Document.new, remote: true do |f| %>
  <%= f.file_field :file, multiple: true, name: "document[file]" %>
  <%= f.hidden_field :plot_id %>
  <%= f.submit 'upload' %>
  <% end %>
</div> 
```

我在文档目录中有一个 create.js.erb 文件。我目前正在使用 JQuery 文件上传，拖放文件上传不会导致任何问题。但是，当我使用此表单手动选择文件并上传时，我得到：

*   406 HTTP 错误
*   页面重定向到 /documents
*   当我回去时，文件已成功上传并保存。

标题如下。

```
Request URL:http://localhost:3000/documents
Request Method:POST
Status Code:406 Not Acceptable
Request Headersview source
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8} 
```

我的控制器是：

```
def create
  @document = Document.create(params[:document])
  respond_to do |format|
    format.js
  end
end 
```

正如我所说，这真的让我摸不着头脑，因为 Ajax 请求似乎没有被触发。这是否意味着它可能与不引人注目的 JS 没有拾取远程真实数据类型有关。这是我能想到重定向的唯一原因。

如果是这样，我如何确认和解决这个问题？

任何帮助都会很棒。

罗斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T08:34:04.967

如果您的表单中有文件上传，则必须添加[:multipart => true 。](http://apidock.com/rails/ActionView/Helpers/FormHelper/form_for#103-Multipart-form)

但[您不能通过 AJAX 发布多部分表单](https://stackoverflow.com/questions/4009252/is-it-possible-in-rails3-to-have-a-multipart-form-true-use-remote-true/4009466#4009466)

# cuda - CUDA 内核仅适用于一维线程索引

> ID：14409863
> 
> 赞同：1
> 
> 时间：2013-01-19T00:35:45.787
> 
> 标签：cuda

有一个奇怪的问题。我有以下代码。当我调用第一个函数时，它没有给出正确的结果。但是，当我调用 function2（第二个函数）时，它工作正常。这对我来说太奇怪了。有人对这个问题有任何想法吗？谢谢！！！

```
__global__ void function(int w, class<double> C, float *result) {  

    int r = threadIdx.x + blockIdx.x * blockDim.x;  
    int c = threadIdx.y + blockIdx.y * blockDim.y;  
    int half_w = w /2;  

    if (r < w && c < w) {  
        double dis = sort((double)(r - half_w) * (r - half_w) + (double)(c_half_w) * (c - half_w));  
    result[c * w + r] = (float)C.getVal(dis);  
    }  
}

__global__ void function2(int w, class<double> C, float *result) {  

    int tid = threadIdx.x + blockIdx.x * blockDim.x;  

    int half_w = w /2;
    int r = tid / w;  
    int c = tid % w;    

    if (r < w && c < w) {  
        double dis = sort((double)(r - half_w) * (r - half_w) + (double)(c_half_w) * (c - half_w));  
    result[c * w + r] = (float)C.getVal(dis);  
    }  
} 
```

更新：我使用`function`and`function2`来绘制图像。像素值基于图像中心和当前像素位置之间的距离。根据距离，C 类 getVal 将计算像素的值。所以，在内核中，我只是让每个线程计算距离和对应的像素值。将正确结果与 CPU 版本进行比较。`function`只是给出一些随机值，一些非常大，一些非常小。当我将 更改为`result[c * w + r] = (float)C.getVal(dis)`时`result[c * w +r ] = 1.0f`，生成的图像似乎没有改变。

图像尺寸为 W x W，启动时`function`我设置 `dim3 grid_dim(w / 64 + 1, w / 64 + 1);` `dim3 block_dim(64, 64);` `function<<<grid_dim, block_dim>>>(W, C, cu_img);`

推出`function2` `function2<<<W / 128 + 1, 128>>>(W, C, cu_img)`

固定的：

我有问题。我为一个块分配了太多线程。在我的设备中，一个块中的最大线程数为 1024。实际上，当我运行 cuds-memcheck 时，我可以看到`function2`它甚至没有启动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T17:06:39.670

我解决了这个问题。我为一个块分配了太多线程。在我的设备中，一个块中的最大线程数为 1024。实际上，当我运行 cuda-memcheck 时，我可以看到`function2`从未启动过。

# asp.net - ios应用程序的浏览器要访问的JSON结果的最大长度

> ID：14409864
> 
> 赞同：-1
> 
> 时间：2013-01-19T00:35:48.833
> 
> 标签：asp.net, ios, json, web-services, httprequest

我的 Web 服务以 JSON 格式返回 SQL 数据。我从我的 iOS 应用程序调用此服务。我总共有两个 3 功能。第一个返回 3000 条记录。我为此功能运行了 Uritemplate，我可以看到 3000 条记录。第二个和第三个函数分别返回 19000 和 27000 条记录。我将每条记录添加到列表中并以 JSON 格式发送。但是当我在 safari/firefox 中访问 url 时，它会显示“服务器已断开连接。服务器忙”消息。所以我试图减少记录的数量，大约 9300-9400 条记录是它失败的时候。我可以发送 9300 条记录，但在那个范围内它失败了。我在我的 web.config 中做了这个

```
 <system.web>
    <httpRuntime maxRequestLength="2097151"  executionTimeout="45" />
  .....

   <system.web.extensions>
<scripting>
  <webServices>
    <jsonSerialization maxJsonLength="100000000"/>
  </webServices>
</scripting> 
```

但两者都不起作用。我怎么能发送这么多数据。我将 9300 条记录保存到一个文件中，发现它是 397KB。所以我猜 19000 条记录将是两倍..800KB 左右。为什么我在浏览器上看不到这些记录？我还能在我的配置文件中添加什么来发送这么多记录。更多问题在队列中。如果您需要更多信息，请询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T00:39:30.647

在我看来，您应该考虑分页，因为我怀疑您的 UI 能否以任何一种用户友好的方式一次合理地显示那么多记录（无论它是哪种记录）。

因此，您应该集中精力只减少一次可以合理显示的数据量，以及在满足对另一页数据的后续请求时可能用于用户滚动到视图中的任何额外缓冲区.

这也可能会在加载时间方面带来更好的用户体验，因为用户不必等待某个巨大的请求得到满足，就可以开始与应用程序交互。

# java - 摆动计时器不停止

> ID：14409868
> 
> 赞同：2
> 
> 时间：2013-01-19T00:36:11.373
> 
> 标签：java, swing, timer

我正在使用 swing Timer 在 Netbeans 中制作倒计时时钟：

```
public void startTimer() {

    System.out.println(right + "value");
    ActionListener listener = new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent event) {
            System.out.println("action");
            timerLabel.setText("" + seconds);
            --seconds;
            System.out.println(seconds);
            if (seconds == -1 && seconds < 0) {
                System.out.print("zero");
                //displayTimer.stop();
                wrong();
                dispose();
            }
        }
    };
    displayTimer = new Timer(1000, listener);
    displayTimer.setInitialDelay(100);
    displayTimer.start();

    if (right == null) {
        System.out.println("null");
    } else if (right == true) {
        System.out.println("truehere");
        displayTimer.stop();
        right = null;
        seconds = 20;
        displayTimer.setDelay(10000);
        displayTimer.setInitialDelay(100);
        displayTimer.start();
    } else if (right == false) {
        System.out.print("wrong");
        //displayTimer.stop();
        seconds = 20;
    }

} 
```

我只是使用 System.out.print 来测试程序，它不是真实程序的一部分。我调用了 stop() 方法，但计时器继续计数。另外，我创建了一个新计时器，`displayTimer = new javax.swing.Timer(10000, listener);`但它的计数速度是原来的两倍。任何人都可以帮忙吗？

编辑：

这是我的计时器（类似于 SSCCE）：

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Scanner;

import javax.swing.*;

public class JavaApplication8 {
 public static void startTimer() {
    ActionListener listener = new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent event) {
            int seconds = 20;
            seconds--;
            System.out.println(seconds);

            if (seconds == -1 && seconds < 0) {
                System.out.print("zero");
            }
        }
    };
    Timer displayTimer = new Timer(1000, listener);
    displayTimer.setInitialDelay(100);
    displayTimer.start();
 }

public static void main(String[] args) {
    System.out.println("Type win to win!");

    startTimer();

    String read;
    Boolean right;
    int seconds;

    Scanner scanIn = new Scanner(System.in);
    read = scanIn.nextLine();

    if (read.equals("win")){
        right = true;
    }
    else{
        right = false;
    }

    if (right == true) {
        System.out.println("correct");
        //displayTimer.stop();
        right = null;
        seconds = 20;
        //displayTimer.setDelay(10000);
        //displayTimer.setInitialDelay(100);
        //displayTimer.start();
    } else if (right == false) {
        System.out.print("incorrect");
        //displayTimer.stop();
        seconds = 20;
        right = null;
    }
}
} 
```

它不能正常工作，因为秒数没有出现，但它确实显示了 20 次，这是我想要的。这只是在它自己的应用程序中，在我的实际程序中更容易看到问题。

我注意到游戏第一次运行时运行良好。然后我再次点击播放（重置整个游戏），它的速度是原来的两倍。也许我没有正确重置某些东西？这是我的重置代码：

```
// Reset Everything
    PlayFrame.seconds = 20;
    PlayFrame.winnings = 0;
    PlayFrame.right = false;
    //PlayFrame.displayTimer.stop();
    PlayFrame.questionLabel.setText(null);
    PlayFrame.count = 0;
    WelcomeFrame WFrame = new WelcomeFrame();
    WFrame.setVisible(true);
    setVisible(false);                             
    PlayFrame P = new PlayFrame();
    P.dispose();

    if (PlayFrame.seconds == -1 && PlayFrame.seconds < 0){
        PlayFrame.displayTimer.stop();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T01:21:05.980

它只是用于查看如何启动和停止计时器的伪代码。

```
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;
import javax.swing.Timer;

public class TimerOnJLabel extends JFrame {

    private static final long serialVersionUID = 1L;        
    long start = System.currentTimeMillis();
    long elapsedTimeMillis;
    int sec = 5;
    Timer timer;

    public TimerOnJLabel() {
        super("TooltipInSwing");
        setSize(400, 300);
        getContentPane().setLayout(new FlowLayout());
        final JLabel b1;
        final JRadioButton jrb = new JRadioButton();
        b1 = new JLabel("Simple tooltip 1");

        ActionListener timerTask = new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                elapsedTimeMillis = System.currentTimeMillis();
                b1.setText("Timer : " + (elapsedTimeMillis-start)/1000+" ::::: " +sec);
                System.out.println("Timer working: " + sec);
                if(--sec == 0){
                    timer.stop();
                    System.out.println("Timer Stopped");
                }
            }
        };
        timer = new Timer(1000, timerTask);
        System.out.println("Timer Started");
        timer.start();

        getContentPane().add(b1);

        setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);          
        setVisible(true);
    }

    public static void main(String args[]){
        new TimerOnJLabel();
    }
} 
```

我希望这会有所帮助。

# haxe - 确保 Haxe 程序将在所有平台上运行

> ID：14409869
> 
> 赞同：2
> 
> 时间：2013-01-19T00:36:20.587
> 
> 标签：haxe

我计划在 Haxe 的一个子集中编写 Haxe 库，该子集将编译为每种 Haxe 目标语言。有什么方法可以验证 Haxe 程序是否可以编译为所有目标语言，是否可以在不手动测试每个目标平台上的编译代码的情况下做到这一点？

例如，有没有办法确保以下代码在每个目标平台上都有效，而无需在每个平台上手动测试？

```
 class Test {
  static function main(){
    trace("How can I check to see which platforms this program will run on?");
  }
} 
```

**编辑：**我编写了一个`compile.hxml`将类编译`Test.hx`为各种目标语言的文件。需要先安装所有必要的 haxelib 库才能使其正常工作。

```
-js test.js
-main Test

--next
-php www
-main Test

--next
-cpp cpp
-debug
-main Test

--next
-main Test
-java java

--next
-cs test
-main Test
-D haxe3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T03:53:25.367

[我用我的一些库（ mdown](https://github.com/jasononeil/mdown)和[detox](https://github.com/jasononeil/detox) ）做了一些类似的事情，并且我能够使用 MUnit / MassiveUnit 测试几个平台：

[https://github.com/massiveinteractive/MassiveUnit](https://github.com/massiveinteractive/MassiveUnit)

这是一个单元测试平台，您可以使用它来检查您跨多个目标的行为。还有[utest](http://lib.haxe.org/p/utest)，可能还有其他。

目前，munit 可以在以下目标上自动为您的代码运行测试：

*   猫
*   闪光 8
*   闪电侠 9+
*   Javascript
*   CPP

这里有添加对其他目标的支持的[说明](https://github.com/massiveinteractive/MassiveUnit/wiki/Guide-to-adding-support-for-new-haxe-targets)

（如果您对单元测试不太了解 - 这是一种编写大量小测试以确保您的库/代码按预期运行的方法，并且非常适合检查事物是否跨平台运行，以及确保您没有更改代码时不要破坏。）

# pointers - 在NXT上的NXC中没有指针的内存测试操作？

> ID：14409873
> 
> 赞同：3
> 
> 时间：2013-01-19T00:36:40.420
> 
> 标签：pointers, memory, assembly, nxt, nxc

我正在尝试为 NXT 编写内存测试程序，因为我有几个内存单元已烧毁，并且想确定哪些 NXT 无法使用。该程序旨在通过以下方式测试内存中每个字节的完整性：

1.  将 64 位分配给线性反馈移位寄存器随机化器
2.  向内存指针添加另一个字节
3.  将随机数据写入选定的存储单元
4.  验证数据是否正确回读

然而，通过这些尝试，我发现NXT实际上并不支持指针操作。因此，我不能简单地迭代指针字节并读取其位置进行测试。

如何在没有指针的情况下迭代内存中的索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T22:40:12.420

我认为问题在于您并没有真正在 NBC/NXC 或 RobotC 中获得直接内存访问。

据我所知，两者都在 NXT 固件模拟器上运行；所以从你的程序的角度来看，坏的内存地址[es]可能会改变（假设模拟器使用虚拟内存）。

要实际运行裸机，我建议使用 John Hansen 修改后的固件的 NXTBINARY 功能，如下所述：
[http ://www.tau.ac.il/~stoledo/lego/nxt-native/](http://www.tau.ac.il/~stoledo/lego/nxt-native/)

可以在以下位置找到增强的固件：http:
[//bricxcc.sourceforge.net/test_releases/](http://bricxcc.sourceforge.net/test_releases/)

# asp.net-mvc-3 - 如何通过在 Asp.Net MVC3 中输入诸如 example.com/username 之类的 URL 来显示用户配置文件

> ID：14409878
> 
> 赞同：0
> 
> 时间：2013-01-19T00:37:24.943
> 
> 标签：asp.net-mvc-3, url, profile

我想创建 asp.net mvc3 应用程序，当用户进入网站时， `example.com`他将显示登录页面，或者当他在 url 中输入用户名时，`example.com/username`他将能够看到他或其他用户的个人资料。请给我一些教程。

类似的问题，但我想在 asp.net mvc3 [如何通过在域名后面传递用户名来显示用户配置文件](https://stackoverflow.com/questions/5936748/how-to-show-a-user-profile-by-passing-username-just-after-the-domain-name)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T04:50:20.350

我回答了一个类似的[问题](https://stackoverflow.com/questions/13558541/what-kind-of-route-would-i-need-to-provide-vanity-urls/13641225)，看看它是否对你有帮助。在您的情况下，还需要为匿名用户提供显示用户个人资料的操作。

希望这可以帮助。

# android - onCreate 中的 MapView NullPointerException

> ID：14409880
> 
> 赞同：3
> 
> 时间：2013-01-19T00:37:31.747
> 
> 标签：android, constructor, nullpointerexception, android-mapview, oncreate

我正在以`MapView`这样的方式创建一个：

```
MapView mv = new MapView(this); 
```

然而，这导致`NullPointerException`（见日志）。如果我使用另一个构造函数，例如

```
MapView mv = new MapView(this, new GoogleMapOptions()); 
```

一切都很好。有什么事？

**创建：**

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.listings);

    mSmallMapView = new MapView(this);
    mSmallMapView.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, 200));

    this.addView(mSmallMapView);

    mSmallMapView.onCreate(savedInstanceState);
} 
```

**日志猫：**

```
01-19 01:28:20.411: E/AndroidRuntime(16039): FATAL EXCEPTION: main
01-19 01:28:20.411: E/AndroidRuntime(16039): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example/com.example.ui.ListingsActivity}: java.lang.NullPointerException
01-19 01:28:20.411: E/AndroidRuntime(16039):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-19 01:28:20.411: E/AndroidRuntime(16039):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-19 01:28:20.411: E/AndroidRuntime(16039):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-19 01:28:20.411: E/AndroidRuntime(16039):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-19 01:28:20.411: E/AndroidRuntime(16039):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-19 01:28:20.411: E/AndroidRuntime(16039):    at android.os.Looper.loop(Looper.java:137)
01-19 01:28:20.411: E/AndroidRuntime(16039):    at android.app.ActivityThread.main(ActivityThread.java:5039)
01-19 01:28:20.411: E/AndroidRuntime(16039):    at java.lang.reflect.Method.invokeNative(Native Method)
01-19 01:28:20.411: E/AndroidRuntime(16039):    at java.lang.reflect.Method.invoke(Method.java:511)
01-19 01:28:20.411: E/AndroidRuntime(16039):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-19 01:28:20.411: E/AndroidRuntime(16039):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-19 01:28:20.411: E/AndroidRuntime(16039):    at dalvik.system.NativeStart.main(Native Method)
01-19 01:28:20.411: E/AndroidRuntime(16039): Caused by: java.lang.NullPointerException
01-19 01:28:20.411: E/AndroidRuntime(16039):    at maps.am.r.a(Unknown Source)
01-19 01:28:20.411: E/AndroidRuntime(16039):    at maps.y.ae.a(Unknown Source)
01-19 01:28:20.411: E/AndroidRuntime(16039):    at maps.y.bm.onCreate(Unknown Source)
01-19 01:28:20.411: E/AndroidRuntime(16039):    at com.google.android.gms.maps.internal.IMapViewDelegate$Stub.onTransact(IMapViewDelegate.java:66)
01-19 01:28:20.411: E/AndroidRuntime(16039):    at android.os.Binder.transact(Binder.java:310)
01-19 01:28:20.411: E/AndroidRuntime(16039):    at com.google.android.gms.maps.internal.IMapViewDelegate$a$a.onCreate(Unknown Source)
01-19 01:28:20.411: E/AndroidRuntime(16039):    at com.google.android.gms.maps.MapView$b.onCreate(Unknown Source)
01-19 01:28:20.411: E/AndroidRuntime(16039):    at com.google.android.gms.internal.d$3.a(Unknown Source)
01-19 01:28:20.411: E/AndroidRuntime(16039):    at com.google.android.gms.internal.i.b(Unknown Source)
01-19 01:28:20.411: E/AndroidRuntime(16039):    at com.google.android.gms.maps.MapView$a.a(Unknown Source)
01-19 01:28:20.411: E/AndroidRuntime(16039):    at com.google.android.gms.maps.MapView$a.a(Unknown Source)
01-19 01:28:20.411: E/AndroidRuntime(16039):    at com.google.android.gms.internal.d.a(Unknown Source)
01-19 01:28:20.411: E/AndroidRuntime(16039):    at com.google.android.gms.internal.d.onCreate(Unknown Source)
01-19 01:28:20.411: E/AndroidRuntime(16039):    at com.google.android.gms.maps.MapView.onCreate(Unknown Source)
01-19 01:28:20.411: E/AndroidRuntime(16039):    at com.example.ui.ListingsActivity.onCreate(ListingsActivity.java:108)
01-19 01:28:20.411: E/AndroidRuntime(16039):    at android.app.Activity.performCreate(Activity.java:5104)
01-19 01:28:20.411: E/AndroidRuntime(16039):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-19 01:28:20.411: E/AndroidRuntime(16039):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-19 01:28:20.411: E/AndroidRuntime(16039):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:02:16.273

您可能需要初始化 Maps 才能使其正常工作。

尝试调用：

```
try {
    MapsInitializer.initialize(getActivity());
} catch (GooglePlayServicesNotAvailableException e) {
    e.printStackTrace();
} 
```

在“setContentView()”之后的 onCreate() 方法中。

# ruby - Chef 10：如何使用 remote_file 或类似工具从 Windows 共享中获取文件？

> ID：14409881
> 
> 赞同：0
> 
> 时间：2013-01-19T00:37:42.370
> 
> 标签：ruby, windows, chef-infra

我正在尝试使用`remote_file`在 Windows 共享上缓存大型包的本地副本。这是怎么做到的？

我无法让它与基于驱动器号的路径、基于 UNC 的路径或`file:`URL 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T08:24:51.533

没有要测试的窗口，但这样的东西应该可以工作：

```
require 'fileutils'
remote_path = '...'
local_path = '...'

ruby "cache-#{remote_path}" do
    block  { FileUtils.copy_file(remote_path, local_path) }       
    not_if { File.exists?(local_path) }
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:45:31.050

我想出了一个我认为非常巧妙的技巧。我创建了以下定义（并将其放入`definitions/default.rb`）：

```
define :file_from_network, :action => :create do
   myPath = (params[:path] || params[:name])
   mySource = params[:source]

   if File.exist?(mySource)
      file myPath do
         action params[:action]
         content File.open(mySource) {|io| io.read}
      end
   else
      Chef::Log.error("File #{mySource} not found!")
   end
end 
```

定义的工作方式与资源的工作方式不同，但这很容易实现并且可以满足我的需要。当然，内存读取对于大文件来说是不切实际的，但它允许 Chef 在触发对文件资源的操作之前检查内容是否不同。

# android - 超时查找用户位置

> ID：14409882
> 
> 赞同：3
> 
> 时间：2013-01-19T00:37:42.557
> 
> 标签：android, gps

我需要找到超时的用户位置，然后我写了这样的代码

1.  启动 LocationListener

    ```
    GPSLocationListener = new LocationListener() {

    @Override
    public void onLocationChanged(Location location) {
             _timerGPSLocation.cancel();
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle b) {
    }

    @Override
    public void onProviderEnabled(String s) {
    }

    @Override
    public void onProviderDisabled(String s) {
    }
    };

     _locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, minTime, minDistance, _GPSLocationListener); 
    ```

    `

2.  设置超时计时器

    ```
    _timerGPSLocation = new Timer();
    _timerGPSLocation.schedule( new TimerTask() {

    @Override
    public void run() {
        _locationManager.removeUpdates(_GPSLocationListener);
    }

    }, (long)(timeout*1000) ); 
    ```

我认为多次这样做（尝试读取坐标并设置超时计时器）可以让 GPS 联系一些卫星并给我正确的位置。有更好的方法吗？超时调用 _locationManager.removeUpdates 会删除所有联系的卫星吗？

编辑：

我的目标是定期（5 分钟）读取 GPS。在尝试使用 GPS 读取获取位置时，我还需要设置超时。如果超时后没有读取位置，我需要停止位置侦听器。我已经使用这里的代码列表实现了这一点。

现在我的问题是，如果因为超时而删除 LocationListener 会导致 GPS 和卫星之间的“确认”丢失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T01:08:28.793

安排一个计时器将适用于您正在尝试做的事情。同样，您可以使用处理程序并将其传递给线程或 Looper 对象。如在

`Handler h = new Handler();`

`h.postDelayed(Runnable r, long millis);`

有了它，您还可以延迟发布一个可运行的，即线程或活套，以取消位置更新。

编辑： postDelayed 用于可运行在一定延迟后运行。postAtTime 在程序的某个正常运行时间发布

# java - Cassandra IllegalArgumentException 创建键空间

> ID：14409887
> 
> 赞同：5
> 
> 时间：2013-01-19T00:38:20.510
> 
> 标签：java, cassandra

我在 Mac OS X Lion 上使用 Cassandra 1.2。

我已进入 ./bin/cassandra-cli 并尝试使用以下语法创建键空间：

```
CREATE KEYSPACE my_keyspace WITH REPLICATION = { 'class': 'SimpleStrategy', 'replication_factor': 1 }; 
```

这个命令几乎完全是从[这里](http://www.datastax.com/docs/1.2/cql_cli/cql/CREATE_KEYSPACE)的 Cassandra 1.2 的文档中复制而来的，但是我收到了一个 Java 错误：

```
java.lang.IllegalArgumentException: No enum const class org.apache.cassandra.cli.CliClient$AddKeyspaceArgument.REPLICATION 
```

有谁知道这个错误的根本原因以及我该如何解决它？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-19T15:23:56.527

如果您使用的是**cassandra-cli**，这是正确的语法：

```
CREATE KEYSPACE my_keyspace
with placement_strategy = 'org.apache.cassandra.locator.SimpleStrategy'
and strategy_options = {replication_factor:1}; 
```

（您尝试使用的语法是**cqlsh**）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T03:07:56.657

这是 CQL3 的`create keyspace`命令，`bin/cqlsh -3`
Schildmeijer 的答案是 CLI

# c - TCP 套接字永远不会关闭

> ID：14409889
> 
> 赞同：2
> 
> 时间：2013-01-19T00:38:45.953
> 
> 标签：c, sockets, select, freebsd

我有一个`pselect`正在等待 TCP 连接的运行。那`pselect`是在它自己的线程中运行的，因此我有一堆在运行。

我对那些设置了超时，`pselect`但是，当我运行时`sockstat`，我似乎有一些永远不会关闭的连接。他们中的 99% 都这样做。当我完全关闭正在建立连接的客户端时，我会认为在超时时间之后，我将能够关闭这些套接字。我设置了断点来检查返回值是否为零，但它从未发生过。

在psuedo这就是我所拥有的

```
if((ret == pselect(..., timeout, NULL) <0 ){
//check errors
} else if (ret == 0)
{
//close connection for timing out
//I never land here, even though I can close the client side (thus presumably closing the connection)
} 
```

如果这是我的问题，我还能做些什么来调试？尽管我可以在 sockstat 中看到它们，但我很难准确地判断出哪些套接字 fd 处于打开状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T01:23:12.247

您的线程可能在（不包括在内）情况下旋转，`else`因为从另一端关闭的套接字既可读又可写。要进入超时情况，您需要在超时期间保持另一端打开。

（您所处的情况是`POLLHUP`在`poll()`条款中）

# iphone - 如何拒绝我自己正在等待审核的应用内购买？

> ID：14409893
> 
> 赞同：2
> 
> 时间：2013-01-19T00:39:24.283
> 
> 标签：iphone, ios, app-store, in-app-purchase, app-store-connect

我有大约 25 个应用内购买对象 (IAP)，我想在我的应用程序的新更新中上线。这是我第一次更新 IAP。

**什么地方出了错：**

我创建了 5 个 IAP，然后提交了带有“开发人员控制”版本的应用程序，因此在我完成创建和提交其余 IAP 之前它不会进入商店，这需要我几天时间才能完成。这对我来说似乎是一个非常合乎逻辑的计划（它可以节省 4-5 天的日历时间，并且代码可以动态处理新的 IAP），并且在阅读了 Apple 关于 IAP 的（非常不清楚）文档后，我认为这是可能的.

提交几天后，我完成了 IAP，但在尝试提交它们时，iTunes Connect 告诉我，除非它们在“当前版本”上工作，否则不会批准任何 IAP。由于没有这些 IAP 就不会发布我的更新，显然我的省时计划没有奏效。无赖！

所以，我拒绝了我的新更新二进制文件，以为我会重新提交所有 25 个 IAP。没什么大不了。但是拒绝二进制后，原来的 5 个 IAP 并没有被拒绝；他们仍然停留在“等待审核”中，因此我无法在“版本详细信息”页面中添加到我的更新中。

**核心问题：**

如何拒绝自己处于“等待审核”状态的 IAP？

如果没有办法，我唯一的选择似乎是等待我的 5 个旧 IAP 被拒绝，因为只有这样才能所有 25 个都可以提交，对吧..？

这么多节省时间。=/

# ios - 如何在 iOS 6 中计算具有给定宽度的 NSAttributedString 的高度

> ID：14409897
> 
> 赞同：62
> 
> 时间：2013-01-19T00:39:51.317
> 
> 标签：ios, nsattributedstring, bounding-box

> **可能重复：**
> [如何以固定宽度获取 NSAttributedString 的高度](https://stackoverflow.com/questions/2282629/how-to-get-height-for-nsattributedstring-at-a-fixed-width)

现在 NSAttributedString 在 iOS 6 中可用。出于布局目的，我想知道如何计算 NSAttributedString 在固定宽度下所需的高度。我正在寻找与 NSString 等效`- (CGSize)sizeWithFont:(UIFont *)font constrainedToSize:(CGSize)size`但适用于 NSAttributedString 的东西。

要计算 NSAttributedStrings 的绘图大小，有两种方法可用：

1.  `- (CGSize)size`不能使用，因为它没有考虑任何宽度。
2.  我试过`- (CGRect)boundingRectWithSize:(CGSize)size options:(NSStringDrawingOptions)options context:(NSStringDrawingContext *)context`了，但不知何故它没有给我正确的高度。我认为该方法是错误的。如果我运行以下代码，它`bounding size: 572.324951, 19.000000`会让我忽略给定的 200 宽度。它应该给我 100 的高度。

```
    NSMutableAttributedString *attributedString = [[NSMutableAttributedString alloc] init];
    NSDictionary *attributes = @{NSFontAttributeName : [UIFont fontWithName:@"HelveticaNeue" size:15], NSForegroundColorAttributeName : [UIColor blueColor]};
    [attributedString appendAttributedString:[[NSAttributedString alloc] initWithString:@"Attributed String\n" attributes:attributes]];
    [attributedString appendAttributedString:[[NSAttributedString alloc] initWithString:@"Attributed String\n" attributes:attributes]];
    [attributedString appendAttributedString:[[NSAttributedString alloc] initWithString:@"Attributed String\n" attributes:attributes]];
    [attributedString appendAttributedString:[[NSAttributedString alloc] initWithString:@"Attributed String\n" attributes:attributes]];
    [attributedString appendAttributedString:[[NSAttributedString alloc] initWithString:@"Attributed String\n" attributes:attributes]];

    CGRect frame = [attributedString boundingRectWithSize:CGSizeMake(200, 1000) options:0 context:nil];
    NSLog(@"边界大小: %f, %f", frame.size.width, frame.size.height);

```

Mac OS X 还有其他可用的方法，但不适用于 iOS。

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2013-01-19T00:59:43.870

选项 2 在 iOS 中使用适当的参数确实有效。

```
NSAttributedString *attrStr = ... // your attributed string
CGFloat width = 300; // whatever your desired width is
CGRect rect = [attrStr boundingRectWithSize:CGSizeMake(width, 10000) options:NSStringDrawingUsesLineFragmentOrigin | NSStringDrawingUsesFontLeading context:nil]; 
```

如果没有正确的`options`参数值，您将得到错误的高度。

还需要`attrStr`包含字体属性。没有字体，就无法正确计算大小。

# ajax - WordPress 没有去正确的地址来查找文件

> ID：14409900
> 
> 赞同：0
> 
> 时间：2013-01-19T00:40:19.357
> 
> 标签：ajax, wordpress, plugins

我在我的本地主机上运行 WordPress 并尝试使用 ajax 将请求从我的插件文件发送到另一个名为 photos.php 的文件，我已经在 xmlhttp.open 函数中正确写入了文件的地址，但它遇到了以下错误。

```
Not Found

The requested URL /wordpress/wp-admin/wp-content/plugins/myphoto/photos.php was not found on this server. 
```

文件的实际地址是/wordpress/wp-content/plugins/myphoto/photos.php

```
xmlhttp.open("GET","wp-content/plugins/myphoto/photos.php?c="+option,true);
            xmlhttp.send(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T00:54:58.213

尝试设置绝对路径：

```
xmlhttp.open("GET","/wordpress/wp-content/plugins/myphoto/photos.php?c="+option,true); 
```

您的错误意味着您正在使用相对路径。目录`/wordpress/wp-admin/wp-content...`不存在。

# php - 迁移 MSSQL SERVER 后 Zend 框架中的 PHP PDO 错误连接错误

> ID：14409904
> 
> 赞同：0
> 
> 时间：2013-01-19T00:41:15.643
> 
> 标签：php, sql-server-2008, zend-framework, pdo, zend-db

在计划将旧的 MSSQL Server 专业版迁移到最后一个 MSSQL Server Express 版本后，我遇到了与旧 PHP 项目的连接问题，该项目使用 Zend 框架连接到 MSSQL 服务器上，我想是使用 PDO 库。

错误信息是：

> 连接失败：SQLSTATE[HY000] 无法连接：Adaptive Server 不可用或不存在（严重性 9）

连接配置为：

> Mein_Db::registry('mssql', Mein_Db::factory('dblib', array('host' => 'xx.xx.x.xx', 'username' => 'sa', 'password' => ' xxxxxxx', 'dbname' => 'xxxxxxx' )) );

提前致谢， 詹卢卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:25:34.270

抱歉，这是 MS SQL Server 的 ip 配置错误。谢谢大家。

詹卢卡

# c# - 允许用户删除我的应用程序正在使用的文件？

> ID：14409905
> 
> 赞同：2
> 
> 时间：2013-01-19T00:41:32.693
> 
> 标签：c#, wpf, windows, filesystems

我可以允许用户在 Windows 下删除我的应用程序正在使用的文件吗？

在我的场景中，我有一个由我的应用程序监控的“快速添加”目录。当它看到新图像出现时，它会创建一张新幻灯片以在自动幻灯片放映中显示。我还想允许我的用户从我的“快速添加”目录中删除（和/或重命名）一个文件，并将其从幻灯片中删除。

有没有一种方法可以标记该文件，通知 Windows 我可以在我的应用程序使用它时删除该文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T00:58:01.123

> 有没有一种方法可以标记该文件，通知 Windows 我可以在我的应用程序使用它时删除该文件？

是的。在 Win32 中，这被`dwShareMode`传递给[`CreateFile()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx). 这是您希望允许另一个进程执行的操作的位域。您正在寻找的是`FILE_SHARE_DELETE`允许在打开时删除或重命名的位。但是，对于最礼貌的行为，我建议包括所有 3, `FILE_SHARE_READ | FILE_SHARE_WRITE | FILE_SHARE_DELETE`. ^([1])

由于您询问的是 C# 而不是 Win32，因此在 .NET 世界中，这些都包含在[`FileShare`](http://msdn.microsoft.com/en-us/library/system.io.fileshare.aspx)您可以在打开文件时传递的枚举中，例如。在[`File.Open`](http://msdn.microsoft.com/en-us/library/y973b725.aspx).

请注意，这些标志不允许您在按名称打开文件时重命名文件的父目录。由于内核中的限制（技术上在 ntfs.sys IIRC 中），无论共享如何，这都会失败。

* * *

^(脚注)

^(1：编辑评论：很遗憾，传递`0`（许多人不假思索地做）恰好是最不被允许的选项，或者更多在 Windows 上编写代码的人没有意识到这个参数的作用并传递这三个标志。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T00:53:13.307

如果在使用该文件的控件上调用`Delete()`或`Rename()`方法，则可以在 PictureBox 删除或重命名文件之前将其从 PictureBox 中删除。

做倍数应该没有太大问题。使用控件上的复选框，您只需检查每个控件以查看该属性是否为真，然后调用适当的方法。

# ruby-on-rails-3 - Rails 3.2 杂乱的日志

> ID：14409912
> 
> 赞同：0
> 
> 时间：2013-01-19T00:42:22.200
> 
> 标签：ruby-on-rails-3, logging

我在本地服务器上发出的每个请求都会生成大量日志消息，如下所示：

```
[aa6f821b342dc08800f423e86d24db20] [127.0.0.1]   Rendered shared/_footer.html.erb (3.5ms)
[aa6f821b342dc08800f423e86d24db20] [127.0.0.1] Completed 200 OK in 2684ms (Views: 590.0ms | ActiveRecord: 191.8ms)
[cd2037fee6bd082a4119d8799a7e7439] [127.0.0.1] 
[cd2037fee6bd082a4119d8799a7e7439] [127.0.0.1] 
[cd2037fee6bd082a4119d8799a7e7439] [127.0.0.1] Started GET "/assets/global.css?body=1" for 127.0.0.1 at 2013-01-18 19:39:22 -0500
[cd2037fee6bd082a4119d8799a7e7439] [127.0.0.1] Served asset /global.css - 304 Not Modified (3ms)
[5f2da9e4e857fb4e8c024a95a424fc14] [127.0.0.1] 
[5f2da9e4e857fb4e8c024a95a424fc14] [127.0.0.1] 
[5f2da9e4e857fb4e8c024a95a424fc14] [127.0.0.1] Started GET "/assets/caEntry.css?body=1" for 127.0.0.1 at 2013-01-18 19:39:22 -0500
[5f2da9e4e857fb4e8c024a95a424fc14] [127.0.0.1] Served asset /caEntry.css - 304 Not Modified (2ms)
[708c81464666f10e1b2a46e1dbf4af71] [127.0.0.1] 
[708c81464666f10e1b2a46e1dbf4af71] [127.0.0.1] 
[708c81464666f10e1b2a46e1dbf4af71] [127.0.0.1] Started GET "/assets/forms.css?body=1" for 127.0.0.1 at 2013-01-18 19:39:22 -0500
[708c81464666f10e1b2a46e1dbf4af71] [127.0.0.1] Served asset /forms.css - 304 Not Modified (2ms)
[3a807660584a753319c6c19c405b9cce] [127.0.0.1] 
[3a807660584a753319c6c19c405b9cce] [127.0.0.1] 
```

我**确实**喜欢知道正在加载什么，但是没有办法稍微清理这些空消息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T01:16:20.667

有一颗宝石，但我不记得名字了……把这个放进去`config/initializers/quiet_assets.rb`

```
Rails.application.assets.logger = Logger.new('/dev/null')
Rails::Rack::Logger.class_eval do
  def before_dispatch_with_quiet_assets(env)
    before_dispatch_without_quiet_assets(env) unless env['PATH_INFO'].index("/assets/") == 0
  end
  alias_method_chain :before_dispatch, :quiet_assets
end 
```

# java - 创建可运行的 Jar 文件。(java.lang.NoClassDefFoundError)

> ID：14409920
> 
> 赞同：0
> 
> 时间：2013-01-19T00:43:15.757
> 
> 标签：java, swing, user-interface, ant, jar

> **可能重复：**
> [当我的 JAR 在类路径上时，为什么 Ant 会说“NoClassDefFound”？](https://stackoverflow.com/questions/14387470/why-does-ant-say-noclassdeffound-when-my-jar-is-on-the-classpath)

我目前有 3 个在 Ant 中编译的 java 文件。它使用 Java GUI，因此它依赖于 2 个 .jar 文件。使用 javac 和 jar 编译在 Ant 中可以正常工作。但是一旦我双击 jar 文件运行它，它就不会运行。当我尝试在 Ant 中使用 Java 运行它时，会发生以下错误。

```
 [java] Exception in thread "main" java.lang.NoClassDefFoundError: org/jdesktop/layout/GroupLayout$Group
 [java]     at tictactoe.General.main(Unknown Source)
 [java] Caused by: java.lang.ClassNotFoundException: org.jdesktop.layout.GroupLayout$Group 
```

ETC...

**这是我的 Ant 文件**`井字游戏 - CIS3760A1

```
 <path id="classpath">
        <fileset dir="lib" includes="*.jar" />
    </path>

<target name="init">
    <mkdir dir="build" />
    <mkdir dir="dist" />
</target>

<target name="compile" depends="init">
    <javac srcdir="src" destdir="build" classpathref="classpath" includeantruntime="false" />
</target>

<target name="jar" depends="compile">
    <jar destfile="dist/CIS3760A1.jar" basedir="build">
        <manifest>
            <attribute name="Main-Class" value="tictactoe.General"/>
            <attribute name="Class-Path" value="lib/org-jdesktop-layout.jar lib/swing-layout-1.0.4.jar"/>
        </manifest>
    </jar>
</target>

<target name="clean">
    <delete dir="build" />
    <delete dir="dist" />
</target>

<target name="run" depends="jar">
    <java jar="dist/CIS3760A1.jar" fork="true" classpathref="classpath" />
</target> 
```

`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T00:49:41.860

JAR 文件是否是带有 lib 子目录的目录，其中包含 2 个必需的 jar？从脚本的外观来看，它正在构建到 dist 目录中，并且看起来它没有相对于主 jar 所需的 lib 目录。

# xml - 验证使用 JAXB 类（不是 XSD）生成的 XML

> ID：14409929
> 
> 赞同：1
> 
> 时间：2013-01-19T00:45:30.497
> 
> 标签：xml, xsd, jaxb, jaxb2, jaxb2-basics

如果 XML 是由 JAXB 类（而不是 XSD）生成的，我没有要验证的 XSD。如何验证 XML？JAXB 是否在开始解组之前自动验证 XML？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T10:44:47.243

如果您没有 XSD，JAXB 仍将执行“结构”验证。例如，如果您使用“必需”或指定特定的“访问顺序”注释 JAXB 类属性，并且输入 XML 未确认注释的值，您将获得异常。但是，您将无法执行“数据”验证，例如特定的 XML 元素被限制为具有“8”个字符长度（我相信 JEE7 将集成 BeanValidation 并希望 JAXB 利用此规范）。

# c# - 如何在查询字符串中安全地包含密码

> ID：14409930
> 
> 赞同：1
> 
> 时间：2013-01-19T00:45:38.093
> 
> 标签：c#, asp.net, encryption, passwords, query-string

是否可以在 ac#asp.net 站点的查询字符串中安全地包含密码。

我知道的一些假设和事情 -

1.  该网站没有也不会有与其他网站的链接/图像/javascript/分析。因此，无需担心引荐链接。
2.  与网络浏览器的所有通信都将通过 https。
3.  我知道查询字符串将保留在计算机的历史记录中。
4.  登录不仅需要密码/用户名。因此，简单地将 url 粘贴回浏览器不会导致登录。

我知道该站点可能容易受到跨站点脚本和重放攻击。我该如何减轻这些？

鉴于上述情况，我应该如何在查询字符串中包含密码？

请不要问我“为什么”，我知道这不是一个好主意，但这是客户想要的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T00:57:43.063

# SSL

您可以使用 SSL 连接安全地将密码发送到 Web 服务器。这会加密客户端/服务器之间的所有通信。

# 隐藏在标题中

基本身份验证协议将用户/密码信息放在 HTTP 请求标头中。C# 和许多其他 Web 服务器语言可以访问此信息，并使用它来验证请求。当与 SSL 混合时，这是非常安全的。

# 注册应用程序密钥

如果以上都不可行，那么建议您为每个用户创建一个唯一的密钥。而不是发送他们的密码，这个密钥被使用。优点是密钥存储在数据库中，可以删除。用户的密码保持不变，但他们必须重新注册才能获得新密钥。如果有人可能滥用他们的密钥，这很好。

# 进行握手

握手是客户端向服务器发出请求，服务器发回随机生成的密钥。然后，客户端使用密钥从该密钥生成哈希，并将其发送回服务器。然后服务器可以检查客户端是否知道正确的秘密。如果密码是秘密并且客户端在请求中包含用户名详细信息，则可以执行相同的操作。这可以在不发送密码的情况下进行身份验证。

# 加密密码

如果以上都不是可能的选项，那么您可以尝试使用 JavaScript 在密码通过开放 URL 发送之前对其进行加密。[我找到了AES 分组密码](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)的开源版本。该项目名为[JSAES](http://point-at-infinity.org/jsaes/)，支持 128 到 256 位加密。可能还有其他 JS 库做同样的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-11T21:20:28.523

通常不建议将秘密放在查询字符串中，然后可以将其标记和复制，从而将静态密码暴露在历史文件、cookie 等中。

为了*在*这个用例中保护密码，一个选项是散列密码（单向，不可逆）。通过这种方式，实际密码在传输过程中或静止状态下都是未知的，但是......这意味着**攻击者仍然可以使用散列值登录**服务器，该服务器可能会将散列值与其存储进行比较以进行身份​​验证。

*更新：切换到无状态 (JWT) 会话*

在过去，越野车是一件事（好吧-它们仍然是一些边缘群体的事情，但是）-我们使用“会话”。例如，在基于 Java/J2EE/Servlet 的系统中，“会话 ID”（参见 JSESSION_ID）被存储为 cookie。该值是一个随机数，很难猜测 - 但它存在从劫持到内存和服务器上查找开销的问题。

在 2020 年（截至撰写本文时）... JSON Web 令牌 (JWT) 可用于安全地封装用户会话信息，并在不暴露密码的情况下将其推送回不可变的 cookie，并且服务器开销很小。

在此模型中，登录后，服务器会发出一个令牌（使用 OAUTH2 或相关），该令牌具有过期时间戳。

然后可以对这些数据和可能的其他会话信息进行加密、散列、签名和包装在 JWT（令牌）中 - 作为返回 Web 浏览器的 cookie。

参考：[https ://oauth.net/2/jwt/](https://oauth.net/2/jwt/)

在这一点上，客户端不能做任何事情来破坏（甚至查看）cookie，因为任何敏感数据都应该被加密（使用 AES256 等或更好）并且内容被散列和散列签名。这意味着当服务器取回令牌时，它会查看时间戳并可能将其丢弃 - 强制重新身份验证，然后......

否则可以验证它对内容进行签名，对内容进行哈希处理，并在需要时验证哈希和解密数据（其中不包括密码，而只是用户的 ID - 已验证且本身不一定是秘密）。

这可以包括用户可以执行的操作的已查找范围（授权）等 - 在令牌超时之前避免往返身份验证服务器。

因此，上述方法（使用 JWT、散列、签名、加密 - 到 cookie 中）是推荐的方式，既可以实现无状态，又可以避免在客户端和服务器之间传递秘密。

参考：[https ://auth0.com/blog/stateless-auth-for-stateful-minds/](https://auth0.com/blog/stateless-auth-for-stateful-minds/)

此外，考虑到多因素身份验证方案（请参阅 Google 身份验证器）和相关系统的安全性要强得多（窃取密码是不够的，并且密钥会在外部系统上自动轮换），但确实需要对轮换密钥的半频繁访问系统，在一定程度上抑制了流畅的用户体验。

*更新：Google 和其他人的 Multi-Factor auth 已经变得更好了。*

老公司仍然使用 SMS 一次性密码 (OTP) ... 可以通过前往无线公司商店并声称 SIM 卡丢失（给定一个已知的电话号码）来破坏它。谷歌和其他更先进的公司相对使用可嵌入智能手机应用程序中的旋转令牌，然后用于许多服务。谷歌甚至有推送通知，用户只需按下按钮确认：“是的 - 是我”。

# php - 从终端（bash）在 PHP 中执行 MySql

> ID：14409933
> 
> 赞同：0
> 
> 时间：2013-01-19T00:46:41.993
> 
> 标签：php, mysql, bash

我有这个问题，我创建了一个 php 文件，它将数据插入到 Mamp 上的 mysqldatabase 中。

我可以在任何地方使用命令 mysql 并启动 mysql 客户端。

但是当我启动我的 php 脚本时，我得到了这个错误：

```
Warning: Error establishing mySQL database connection. Correct user/password? Correct hostname? Database server running? in 
```

为了测试，我使用了默认的用户名和密码“root”。有谁知道这是什么原因？

我也试过这个命令：

```
sudo ln -s /Applications/MAMP/tmp/mysql/mysql.sock /tmp/mysql.sock 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T01:09:10.700

对我来说，它工作正常。您在`php`代码中使用哪个主机名？

```
sgeorge-mn:~ sgeorge$ cat con_mysql.php 
<?php
$con = mysql_connect("127.0.0.1:3306","root","PASSWORD");
if (!$con)
    {
    die('Could not connect: ' . mysql_error());
    }
else
    {
    echo "Connection Established\n"; 
    }
mysql_close($con);
?>

sgeorge-mn:~ sgeorge$ php con_mysql.php 
Connection Established 
```

# image - 在 Magento 管理产品图像上传器中允许 tiff/tiff 图像文件

> ID：14409934
> 
> 赞同：0
> 
> 时间：2013-01-19T00:47:00.020
> 
> 标签：image, magento, magento-1.7, tiff

如何在 Magento 管理员的产品图片库上传器中允许 tif/tiff 文件？我已经尝试使用以下代码更新 {Package}_Adminhtml_Block_Media_Uploader::__construct() ：

```
$this->getConfig()->setFilters(array(
        'images' => array(
            'label' => Mage::helper('adminhtml')->__('Images (.gif, .jpg, .png, .tif)'),
            'files' => array('*.gif', '*.jpg', '*.png', '*.tif', '*.tiff')
        ), 
```

尽管上传者浏览弹出窗口仍然过滤/灰显 tif。

我已经确认我的本地课程正确地覆盖了核心。我还在 CMS 模块中找到了文件扩展名的 xml 配置，但这显然与这里无关（对吗？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T01:56:25.200

您说的是所见即所得的图像上传器，对吗？Prattski 在这里用一个简单的模块解释了如何：http: [//prattski.com/2011/01/10/magento-allow-other-file-types-in-wysiwyg-editor/](http://prattski.com/2011/01/10/magento-allow-other-file-types-in-wysiwyg-editor/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:01:55.240

tiff 的问题是，GD2 不能用这种格式做任何事情。因此，您需要更改 Image_Adapter，例如：

[https://github.com/magento-hackathon/Perfect_Watermarks](https://github.com/magento-hackathon/Perfect_Watermarks)

然后你必须重写uploder（也许观察者也可以这样做）以更改格式检查并添加tif，tiff

# python - python installation can't find psycopg2 ImportError

> ID：14409944
> 
> 赞同：1
> 
> 时间：2013-01-19T00:48:07.783
> 
> 标签：python, macos, osx-lion, macports, psycopg2

I'm calling on psycopg2 with

```
import psycopg2 
```

I get the std error

> ImportError: No module named psycopg2

I installed my copy with macports, so I'm curious why it wouldn't work because all of the dependencies should be downloaded as well. I don't have any experience with Postgresql, nor this module, so I don't know what could be going wrong. Fact is, another project I'm trying to get built calls upon it, so if I could avoid using this I would. :)

I'm sure that postgresql is installed, but that has little to do with the fact that my installation can't find psycopg2\. Any suggestinos would be appreciated.

```
$ which python 
```

reveals

```
/Library/Frameworks/Python.framework/Versions/Current/bin/python 
```

and

```
$ python --version 
```

reveals

```
Python 2.7.3 -- EPD_free 7.3-2 (32-bit) 
```

I don't necessarily want the version of EPD_free, but I had to install it for (somewhat) unrelated reasons.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T00:59:04.403

MacPorts installs its own version of Python alongside Apple's version. You can manage the active version of Python (the one that gets run when you type in `python` at the command line or by /usr/bin/env) by using the `port select` command. See [this question](https://stackoverflow.com/questions/6612009/macports-port-select-commands).

# python - 我正在尝试为 Google AppEngine URL 编写一个正则表达式以不返回一个或多个变量

> ID：14409951
> 
> 赞同：0
> 
> 时间：2013-01-19T00:49:08.507
> 
> 标签：python, regex, google-app-engine, url, webapp2

为了确保我的应用程序运行顺利，我尝试匹配多个 URL，如下所示：

我有以下获取功能：

```
class Competition(Handler):
     def get(self, *a):
        if a:
            print a
        else:
            print 'None'

app = webapp2.WSGIApplication([('/', Index),
                               ('/competitions[/]?([^/]+)[/]?([^/]+)[/]?([^/]*)$', Competition),
                              ],debug=True) 
```

我目前使用的正则表达式是这个的修改版本：[Jed Smith help others](https://stackoverflow.com/questions/1655745/help-with-a-appengine-handler-regex)

并得到以下输出：

/competitions/one/two/three = ('one', 'two', 'three') - 预期结果
/competitions/one/two = ('one', 'two', '') - 预期结果

/competitions/one/ = ('on', 'e', '') - 意外结果
/competitions/one = ('on', 'e', '') - 意外结果

/competitions/ = 404 - 不匹配模式
/competitions = 404 - 不匹配模式

理想情况下，我希望 Regex 从匹配基本 url 开始：

**localhost:8080/competitions**（带有或不带有尾随“/”）到比赛处理程序

然后添加 0 个或多个我可以测试的参数... 0 将匹配我的 if 语句的开头，并且将根据需要处理以下语句。

我可以将它限制为 *a 中的 3 个最大变量（即：/competitions/one/two/three 是最大值）但是为了更好地学习如何处理这些东西，我想学习如何使它匹配尽可能多输入。

任何帮助，将不胜感激。正则表达式让我感到困惑。

干杯

*   编辑以修复格式

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T01:24:01.610

所以这似乎有效。感谢@FrankieTheKneeMan 为我指明了正确的方向：

```
class Test(Handler):
    ''' Test Handler '''
    def get(self, variables):
        variables = filter(None, (variables.split('/')))
        if variables:
            print variables
        else:
            print 'None' 
```

和正则表达式：

```
('/test[/]?(.*)', Test), 
```

如果没有添加斜杠或变量，这将导致“无”...并返回一个包含或不带斜杠的变量的列表。

filter 语句很好地从变量中删除空字符串，如果没有变量，也返回 None。

希望这可以帮助其他人学习 AppEngine ......它一直困扰着我一段时间。

# j - J中如何实现封装？

> ID：14409955
> 
> 赞同：3
> 
> 时间：2013-01-19T00:49:55.293
> 
> 标签：j

我不是J领域的专家，所以如果我犯了错误，请纠正我。（事实上​​，这是这个问题的部分原因。）

我想要做的是创建一个*在*（但不是*没有*）语言环境中可见的名称。请注意，分配 with`=.`并*不能实现*这一点。

我认为这是不可能的，但我希望得到 J 专家的确认。

看到Eelvex的回答后，我觉得我必须澄清我的问题。这就是我想要的：我想要一个在语言环境中是全局但*在语言环境**之外*不可见的名称，即使您知道该名称并使用语言环境后缀对其进行限定，这与 OOP 中类的私有成员完全相似。

让我们想象一个名为 J 的动词`private`，它使名称在语言环境中成为私有。

```
cocurrent 'foo'
x =: 3
private 'x' NB. x is still visible to all members of _foo_, but cannot be accessed in any way outside of _foo_
bar =: 3 : 'x & *'
cocurrent 'base'

bar_foo_ 14 NB. This works, because bar_foo_ can see x_foo_
x_foo_ NB. value error. We can't see x_foo_ because it's private to the locale. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T01:33:38.200

**编辑**，*（在 OP 的编辑之后）*

不，你不能隐藏一个名字。如果实体在区域设置中可见，则可以从所有区域设置访问它。AFAIK唯一真正私有的名称是`=.`在显式`:`定义中定义的名称

*预览答案：*

*所有名称都在*（但不是*没有*）它们的语言环境中可见。例如：

```
 a_l1_ =: 15
  a_l2_ =: 20
  coclass 'l1'
  a
15
  coclass 'l2'
  a
20
  coclass 'base'
  a
|value error: a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T21:05:05.503

简短的回答：是的，在当前的实现中是不可能的。

长答案：您可能应该将语言环境视为类或对象的公共部分（尽管语言环境也可用于其他目的，例如堆栈帧或闭包）。

If you want hidden information, you might think about putting it in a different process, or on a different machine, rather than in a locale. You could also try obscuring it (for example, using the foreign function interface, or files), but whether this is valid depends on your reasons for hiding the information.

That said, note that accessing arbitrary information in an arbitrary locale is somewhat like using the debugger api or reflection api in another language. You can do it, but if that's not what you want you should probably avoid doing that.

That said, in my opinion, you should ideally eliminate private state, rather than hide it. (And, if that winds up being too slow, you might also consider implementing the relevant speed-critical part of your code in some other language. J is wonderful for exploring architectural alternatives but the current implementations do not include compilers suitable for optimizing arbitrary, highly serial, algorithms. You could consider (13 :) or (f.) to be compilers - but they are not going to replace something like the gcc build tools and they currently are not capable of emitting code that gcc can handle.)

That said, it's also hypothetically possible that a language extension (analogous to 9!:24) could be added, to prevent explicit access to locales from new sentences.

# django - 如何在 Django 管理员中生成用户反馈？

> ID：14409966
> 
> 赞同：0
> 
> 时间：2013-01-19T00:51:30.983
> 
> 标签：django, django-admin

我有一个用于在游戏中调度玩家的模型，我希望调度器能够跟踪花名册的大小和其他属性。

我创建了一些自定义验证，当违反名册规则时（即，安排的球员太多或太少），效果相当好。但我也想在名册不违反规则时提供反馈。

我一直在尝试以各种方式使用 message_user 插入消息。我最接近成功的是：

```
def save_model(self, request, obj, form, change):
    obj.save()
    count = obj.players.count()
    self.message_user(request,"Players scheduled: %s" % count) 
```

问题是在第一次单击“保存”或“保存并继续编辑”时，反馈消息没有更新到正确的计数。用户必须再次单击才能获得当前计数。

也许 save_model 方法不是最好的方法，但我尝试了其他几个方法（queryset、change_view），但成功率更低。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T15:58:23.567

解决了。在 obj.save() 之后添加了 form.save_m2m()。

```
def save_model(self, request, obj, form, change):
    obj.save()
    form.save_m2m()
    count = obj.players.count()
    self.message_user(request,"Players scheduled: %s" % count) 
```

# xaml - Windows Phone 8 设备上的像素对齐

> ID：14409967
> 
> 赞同：2
> 
> 时间：2013-01-19T00:51:33.113
> 
> 标签：xaml, layout, windows-phone-8, pixel, pixel-perfect

我正在尝试在 WP8 设备（Lumia 920）上显示一个简单的全屏位图。

它有 1280x768 的屏幕，使用[ScaleFactor](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206974%28v=vs.105%29.aspx#BKMK_Resolutiondependentbackgroundsandassets) 160 和 800x480 的虚拟分辨率。

这是显示黑白棋盘位图的结果（它是模糊的）：

*   [源图像](https://dl.dropbox.com/u/2641019/wp8/checkerboard_1280x768.png)
*   [截屏](https://dl.dropbox.com/u/2641019/wp8/wp_ss_20130119_0006.png)
*   [裁剪的缩放片段](https://dl.dropbox.com/u/2641019/wp8/wp_ss_20130119_0006_crop.png)（注意这应该是黑白棋盘格，而不是深灰色/浅灰色，看到文本像素更白

而且，很明显，`UseLayoutRounding`在任何地方都是真实的。

那么，嗯，**是否可以在高分辨率 Windows Phone 8 设备上对位图进行像素对齐**？

**更新：**检查 800x480 模拟器（带有 800x480 图像） - 非常清晰。1280x768 模拟器 - 模糊，与设备上相同：/

此外，打开[具有棋盘背景的网页](https://dl.dropbox.com/u/2641019/wp8/bg.html)（注意：1280x768 图像）`viewport width=device-width`会导致相同的模糊图像。这是否意味着除了使用 Direct3D 之外，无法在 Lumia 上获得清晰的全屏图像？

XAML：

```
<phone:PhoneApplicationPage 
    x:Class="PhoneRt.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="768"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="Portrait" Orientation="Portrait"
    shell:SystemTray.IsVisible="True" UseLayoutRounding="True">
    <Canvas x:Name="LayoutRoot">
        <TextBlock x:Name="button">aaa</TextBlock>
        <Image x:Name="viewport" UseLayoutRounding="True" Canvas.Left="0" Canvas.Top="0" Width="480" Height="800"></Image>
    </Canvas>
</phone:PhoneApplicationPage> 
```

放大片段：

![在此处输入图像描述](../Images/a1b5ad1b1f443e5093424e4a23e7a033.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-30T21:05:47.150

我在模拟器中玩了一下。首先我认为这是因为您在代码中设置了图像，但实际上似乎系统托盘是罪魁祸首。

*   系统托盘关闭 -> 漂亮而清脆。
*   系统托盘打开 -> 灰色为灰色。

可能是系统托盘从应用程序空间中截断的像素弄乱了缩放比例。如果您将系统托盘设置为有点透明，则用户看不到它，并且屏幕空间更大。对我来说，这使得棋盘图形清晰且黑白相间。

尝试

```
shell:SystemTray.Opacity="0.99" 
```

在您的 XAML 文件中。

# matlab - 求解带参数的矩阵

> ID：14409968
> 
> 赞同：0
> 
> 时间：2013-01-19T00:51:41.467
> 
> 标签：matlab

我试图用matlab中的参数求解一个矩阵。所以我定义了`a`，然后我的矩阵`b``syms a b``D = [-1 -2 2 1 -3; 1 1 a 1 2; 2 1 -1 b 3; 1 1 -1 1 2; -1 1 a -1-b 0]`

```
D =

[ -1, -2,  2,       1, -3]
[  1,  1,  a,       1,  2]
[  2,  1, -1,       b,  3]
[  1,  1, -1,       1,  2]
[ -1,  1,  a, - b - 1,  0] 
```

当我这样做`rref(D)`时，它给了我以下信息：

```
>> rref(D)

ans =
[ 1, 0, 0, 0, 1]
[ 0, 1, 0, 0, 1]
[ 0, 0, 1, 0, 0]
[ 0, 0, 0, 1, 0]
[ 0, 0, 0, 0, 0] 
```

这对我来说实际上没用，因为我需要使用其中的结果参数来解决系统。

任何人的想法？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T01:25:46.923

好吧，很明显，两者`a`和`b`都可以使用 消除`rref`，因为`a` 只在第二列`b`出现两次，并且只在第四列出现两次。例如，(row2+row3)/(row5+row1) 和宾果游戏，不`a`和`b`...

# list - SML 函数带有 2 个返回 XOR 的列表---已修复

> ID：14409973
> 
> 赞同：2
> 
> 时间：2013-01-19T00:52:56.830
> 
> 标签：list, sml, xor

任何人都可以为 SML 中的函数提供任何建议，该函数将采用 2 个列表并返回它们的 XOR，因此如果您有列表 [a,b,c,d], [c,d,e,f]函数返回 [a,b,e,f] ？

我试图用 2 个函数来做，但即使这样也不能正常工作。

```
fun del(nil,L2) = nil
|del(x::xs,L2)=
if (List.find (fn y => y = x) L2) <> (SOME x) then
del(xs, L2) @ [x]
else 
del(xs, L2);

fun xor(L3,L4) = 
rev(del(L3,L4)) @ rev(del(L4,L3)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T10:44:49.850

您的尝试似乎几乎是正确的，但`fn x => x = x`没有任何意义，因为它总是返回 true。我想你想要`fn y => y = x`。

其他一些评论：

*   您可以将您的使用替换`List.find`为`List.filter`更接近您想要的。

*   不要`del(xs,L) @ [x]`为递归步骤做。追加到列表末尾的成本与第一个列表的长度成线性关系，因此如果您在每一步都这样做，您的函数将具有二次运行时间。改为这样做`x :: del(xs,L)`，这也允许您最终删除列表反转。

*   您在这里所说的“XOR”通常称为*对称差异*，至少对于类似集合的结构而言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T03:49:31.177

最简单的方法是从每个列表中过滤掉重复项，然后连接两个结果列表。使用 List.filter，您可以删除属于另一个列表的成员 (List.exists) 的任何元素。

然而，这是非常低效的，下面的代码更像是一个如何在现实生活中不这样做的例子，尽管它“功能上”很好看:)

```
fun symDiff a b =
    let
      fun diff xs ys =
          List.filter (fn x => not (List.exists ( fn y => x = y) ys)) xs
      val a' = diff a b
      val b' = diff b a
    in
      a' @ b'
    end 
```

这应该是一个更好的解决方案，仍然保持简单。它使用 SML/NJ 特定的 ListMergeSort 模块对组合列表进行排序`a @ b`。

```
fun symDiff1 a b =
    let
      val ab' = ListMergeSort.sort op> (a @ b)
      (* Remove elements if they occur more than once. Flag indicates whether x
         should be removed when no further matches are found *)
      fun symDif' (x :: y :: xs) flag  =
          (case (x = y, flag) of
             (* Element is not flagged for removal, so keep it *)
             (false, false) => x :: symDif' (y :: xs) false
             (* Reset the flag and remove x as it was marked for removal *)
           | (false, true) => symDif' (y::xs) false

             (* Remove y and flag x for removal if it wasn't already *)
           | (true, _) => symDif' (x::xs) true)
        | symDif' xs _ = xs
    in
      symDif' ab' false
    end 
```

但是，这仍然有点愚蠢。由于排序功能会遍历组合列表中的所有元素，因此它也应该是“负责”删除重复项的功能。

# database - Wicket - 将西里尔字符插入数据库时 的问号

> ID：14409981
> 
> 赞同：0
> 
> 时间：2013-01-19T00:54:59.787
> 
> 标签：database, wicket

我正在使用检票口、弹簧和 mysql。当我尝试将西里尔字符而不是字符插入数据库时​​，我看到问号（'?????'）。

当我使用 i18n 文件时，我没有这种问题。此外，从其他地方（即mysql工作台）插入字符时也没有问题。换句话说，问题不在数据库中。数据库和我的 html 文档都在 utf-8 中。

你能帮我解决这个问题吗？

干杯! 尼古拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T11:28:41.933

Wicket 还有两个与编码相关的设置，试试这个（在你`Application`初始化时）：

[`getMarkupSettings()`](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/Application.html#getMarkupSettings%28%29). [`setDefaultMarkupEncoding("utf-8")`](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/settings/IMarkupSettings.html#setDefaultMarkupEncoding%28java.lang.String%29);

[`getRequestCycleSettings()`](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/Application.html#getRequestCycleSettings%28%29).[`setResponseRequestEncoding("utf-8")`](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/settings/IRequestCycleSettings.html#setResponseRequestEncoding%28java.lang.String%29)

# javascript - 它是当前正在运行的脚本的最后一个“脚本”元素吗？

> ID：14409982
> 
> 赞同：8
> 
> 时间：2013-01-19T00:55:03.707
> 
> 标签：javascript, html, dom

假设`script`脚本运行时文档中的最后一个元素* 是当前正在运行的脚本是否安全？

例如，我想创建一个脚本，该脚本可以放在页面正文的任何​​位置，并在同一位置显示一个元素。我正在做这样的事情：

```
function getCurrentScriptElement() {
    var scripts = document.getElementsByTagName('script');
    return scripts[scripts.length - 1];
}

var script = getCurrentScriptElement();
var view = document.createElement('span');

/* Put stuff in our view... */

script.parentNode.insertBefore(view, script); 
```

假设脚本在文档正文中，这是否“安全”？该`getCurrentScriptElement`函数是否总是返回正在运行的脚本？如果没有，怎么办？

我想在不将脚本绑定到特定 id 属性或类似属性的情况下执行此操作，我希望它只是位置性的。

* * *

[我在这里](http://jsbin.com/ibufos/1/edit)创建了一个示例来引入[这个脚本](http://jsbin.com/oloyef/3/edit)。一个答案表明，其他脚本可能会创建这样的示例会中断的条件。是否可以在此示例中添加其他脚本来破坏它？

* * *

有人建议其他具有`defer`或`async`属性的脚本可以打破这一点。谁能举例说明这样的脚本如何工作？

据我了解，`defer`意味着首先加载 DOM，然后运行带有`defer`标签的脚本。出现在另一个脚本元素上的属性将如何`defer`影响 的行为`getCurrentScriptElement`？

`async`，据我了解，这意味着开始获取该脚本并同时继续解析 DOM，不要等待……但是当它到达*我的*脚本时，它仍然应该停止并等待，对吗？

我看不出任何一个会如何影响它，谁能提供一个例子？

* * *

*出于这个问题的目的，我只对外部脚本感兴趣。

** 不是`script`整个文档中的最后一个`script`元素，而是文档运行时的最后一个元素。文档的其余部分不应该加载，对吧？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T01:54:08.870

这不是绝对的保证。看看这个 JSFiddle：http: [//jsfiddle.net/jAsek/](http://jsfiddle.net/jAsek/)

```
<!DOCTYPE html>
<title>Test case</title>
<div>
    <p>At the start</p>
    <script id="first">
        var scr1 = document.createElement("script");
        scr1.setAttribute("id", "early");
        document.body.appendChild(scr1);
    </script>
    <p>After the first script</p>
    <script id="second">
        function getCurrentScriptElement() {
            var scripts = document.getElementsByTagName('script');
            return scripts[scripts.length - 1];
        }

        alert(getCurrentScriptElement().id);
    </script>
    <p>At the end</p>
</div> 
```

此处警报报告“早期”注入脚本的 id，而不是当前正在运行的脚本“第二”的 id。

内部脚本和外部脚本之间没有实际区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T01:03:52.997

我认为这根本不是一个安全的假设，因为浏览器执行 javascript 代码的方式取决于许多事情（比如头部是否有其他脚本元素，如果它们是外部的等）。

您应该只要求人们使用具有自定义 id 或类的虚拟元素。这样，您还可以在一个页面上多次执行您所做的任何事情，而无需多次运行脚本。

这也是使用小部件时所做的事情，例如 Google 的 +1 按钮。

另一种方法是`document.write`在脚本执行时用于编写附加内容。但是，这不会替换脚本标记，而只是在其后添加一些内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-18T08:36:24.197

如果您的目标是 IE， 您可能希望**使用90% 的浏览器当前支持的 document.currentScript 并回退到 document.scripts[document.scripts.length-1]**

```
function writeHere(element)
{
 var sc = document.currentScript || document.scripts[document.scripts.length-1] ;  
 sc.parentNode.insertBefore(element, sc);
 // or in jquery $(sc).before($(element));
} 
```

注意：我没有`document.scripts[document.scripts.length-1]`彻底测试，但它应该在大多数情况下工作（但不是在 Alohci 示例中）。
这是对 IE 的修复，所以谁在乎 :)

# c++ - 复制类构造函数 C++

> ID：14409983
> 
> 赞同：1
> 
> 时间：2013-01-19T00:55:13.483
> 
> 标签：c++

我有一首班级歌曲，我想复制...

```
int mtm::Song::getLimitedLength(int maximum_length) {

        Song copied_song(this);
    this->Song(copied_song);
} 
```

我得到这个错误：

```
Multiple markers at this line
- candidates are:
- no matching function for call to 'mtm::Song::Song(mtm::Song* const)' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T00:56:22.313

说`Song copied_song(*this);`。

请记住，这`this`是一个指针，但复制构造函数需要一个*引用*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T00:56:36.323

尝试这个：

```
Song copied_song(*this); 
```

复制构造函数定义为`Song(const Song&)`，但`this`它是指向 Song 的指针。因此，您需要取消引用它。

下面的行让我有些困惑：

```
this->Song(copied_song); 
```

我想这只是再次尝试调用复制构造函数，不是吗？无论如何，它不会那样工作。使用我答案顶部的解决方案，或使用：

```
Song copied_song = *this; 
```

# javascript - 在 JavaScript 中将属性添加到“类”

> ID：14409985
> 
> 赞同：1
> 
> 时间：2013-01-19T00:55:25.390
> 
> 标签：javascript, class, prototype

javascript 中没有实际的类。但是你必须用你得到的东西工作。

让我们以“类”为例：

```
var example = function (string) {
  this._self = string;
} 
```

有了上述内容，您可以执行以下操作：

```
var ex = new example("Hello People."),
    display = ex._self; // returns "Hello People." 
```

我认为通过使用类似的东西`example.prototype.newFun = function(){}`会为该“类”添加一个新属性。但它在我的代码中不起作用。

这是我正在测试的完整代码：

```
var example = function (string) {
  this._self = string;//public, var like, storage
}

var showExample = new example("Hello People");
showExample.prototype.display = function (a) {//code stops here, with error "Uncaught TypeError: Cannot set property 'display' of undefined"
  return a;
}
console.log(showExample._self);
console.log(showExample.display("Bye")); 
```

我想要做的是将`display`函数作为“公共函数”添加到示例函数中。我可能做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T01:02:43.717

拥有原型的不是对象，而是您用来创建对象的函数：

```
var example = function (string) {
  this._self = string;
}

example.prototype.display = function (a) {
  return a;
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T01:01:36.673

因为没有原型`showExample`- 它只是`example`. 尝试这样做：`example.prototype.display = function (a) {}`它会起作用。

这里有更多关于 JavaScript 中的类：

*   [3种“定义”类的方法](http://www.phpied.com/3-ways-to-define-a-javascript-class/)

*   [这个可爱的问题](https://stackoverflow.com/questions/387707/whats-the-best-way-to-define-a-class-in-javascript)

*   我喜欢[Classy](http://classy.pocoo.org/)处理这个问题的方式，也喜欢[CoffeeScript](http://coffeescript.org/#classes)中类的实现方式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-19T01:01:44.433

您尝试向(showExample)`prototype`的实例添加一个方法。`example`该实例没有原型。尝试`example.prototype.display = function() {/*...*/};`（换句话说，将方法添加到`prototype`of 的`constructor`，`showExample`即`example`）并再次检查。之后，`example`“知道”该`display`方法的所有实例，或者用你的话来说，`display`对所有实例都是“公共的”。

您*可以*使用将方法添加到*实例*中`showExample.display = function() {/*...*/};`。使用它，只`showExample`知道`display`方法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-19T01:05:46.500

您可以修改为 showExample ..的构造函数

前任。

```
showExample.constructor.prototype.display = function (a) {
  return a;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-19T01:03:15.400

在你的情况下 showExample 是一个例子的对象......

采用

```
example.prototype.display = function(a)... 
```

# objective-c - NSTableView 的自定义 NSView 不更新组件

> ID：14409986
> 
> 赞同：0
> 
> 时间：2013-01-19T00:55:25.273
> 
> 标签：objective-c, cocoa, interface-builder

我为 NSTableView 创建了一个自定义 NSView。

我正在尝试使用 Interface Builder 填写我在其中创建的字段，但我不能。我会说每个组件都正确链接并且代码没问题。

这是功能

```
- (NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row
{
    Account *account = (Account *)[self.dataSource objectAtIndex:row];

    AccountTableCellViewController *controller = [[AccountTableCellViewController alloc] init];
    controller.subtitleLabel.stringValue = account.name;
    [controller.titleLabel setStringValue:account.num];
    NSLog(@"%@", controller.titleLabel);
    return [controller view];
} 
```

这是绑定的图片：

![在此处输入图像描述](../Images/ee73af89c739cff89e103d5cc3a2a078.png)

该表正确显示所有行，但未按预期填充 NSTextFields。

更新：

这是它的样子（不更新视图）： ![在此处输入图像描述](../Images/095e7fa007b6c557ba77d43cb0fdd8c2.png)

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T01:45:22.270

标签尚未从笔尖加载。我只需在您的视图控制器中创建一个额外的帐户实例变量，在那里分配它，然后将信息加载到`-(void)awakeFromNib`

# c# - 如何在不丢失 C# 中的任何信息的情况下向异常添加消息？

> ID：14409988
> 
> 赞同：70
> 
> 时间：2013-01-19T00:55:30.397
> 
> 标签：c#, exception, exception-handling

我有以下代码：

```
catch(Exception ex)
{
    throw new FatalException("An error occurred while trying to load the XSLT file.", ex);
} 
```

不幸的是，这只是吞噬了异常。我可以通过执行以下操作来解决此问题：

```
catch(Exception ex)
{
    throw;
} 
```

但我仍然想包含自定义消息以获取事件记录的帮助。

如何在不丢失任何信息的情况下将此消息添加到异常中？（堆栈跟踪/调试符号等）

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-01-19T01:28:02.697

如果您只需要向原始异常添加信息，例如用户可读的消息或对您跟踪错误有用但对最终用户无用的特定详细信息，您可以使用Exception 的[Data](http://msdn.microsoft.com/en-us/library/system.exception.data.aspx)属性，它是一个键/值对字典。

我们广泛使用它来记录信息，例如正在执行的报告或正在处理的文件，以便操作可以确定错误发生时究竟发生了什么。用户不需要此详细信息，因为他们直接处理失败的原因。

您还可以使用它来传递对用户有意义的纯文本消息。唯一的问题是您必须在日志框架或最终用户界面中执行一些额外的工作，以便提取数据并使其对消费者有用。

例如，您可以这样做：

```
catch (Exception ex)
{
    ex.Data.Add("UserMessage", "An error occurred while trying to load the XSLT file.");
    throw;
} 
```

然后在客户端代码中，您可以测试 UserMessage 是否存在，如果存在，则将其呈现给用户而不是 Exception：

```
catch (Exception ex)
{
    if (ex.Data.Contains("UserMessage"))
    {
        MessageBox.Show(ex.Data["UserMessage"].ToString());
    }
    else
    {
        MessageBox.Show(ex.Message);
    }
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-19T01:00:16.050

原来的异常仍然存在。

当您进行异常日志记录时，您收到的异常将是您使用消息生成的 FatalException。原始异常位于`ex.InnerException`. 您可以继续循环 InnerException 直到它为 null 以获取所有 Stack Trace 信息等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-19T01:07:13.013

简而言之，不要。

我相信您可以通过一些反思找到解决此问题的方法，但我**强烈**警告您不要这样做。它违背了 .NET 中异常的原始设计。异常不仅有助于记录，它们还提供有关应用程序失败的原始原因的信息。

通常首选使用第一个选项，因为它维护原始异常的堆栈跟踪，但允许您通过将其包装在单独的异常中来提供附加信息。在我自己的代码中，每当我记录异常时，我的记录函数都会通过 InnerException 属性进行递归，以查找有关该错误的所有可能有用信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-05T04:56:42.717

以防万一有人需要一个好的答案。关键是使用 AppDomain.CurrentDomain.FirstChanceException

您可以使用 IDisposable 创建一个自定义对象以将所有信息放入其中。如果发生异常，则 FirstChanceException 处理程序获取该信息并填充 Exception.Data。

使用本地线程存储使其线程安全。然后，捕获它的代码将获取数据并记录下来。

例子：

```
using(MyCustomMessage.EnterToLocalStorage("Info for logging"") ) 
{ 
...code 
...exception thrown
.... FirstChanceException examines local thread storage and get's "info for logging" and puts into Exception.Data. 
} 
//Dispose is called and all messages that were put into LocalStorage are removed. 
//So if exception was not thrown before then it like nothing happened. 
```

谷歌 AsyncDiagnosticStack 就是一个很好的例子。[https://github.com/StephenCleary/AsyncDiagnostics/blob/master/src/Nito.AsyncEx.AsyncDiagnostics/AsyncDiagnosticStack.cs](https://github.com/StephenCleary/AsyncDiagnostics/blob/master/src/Nito.AsyncEx.AsyncDiagnostics/AsyncDiagnosticStack.cs)

# c# - 具有多态性的通用接口来处理对象

> ID：14409989
> 
> 赞同：2
> 
> 时间：2013-01-19T00:56:01.097
> 
> 标签：c#, interface, polymorphism, abstraction

以前的帖子被删除；**更新**：

* * *

所以我有一个独特的问题，虽然这可能相当普遍。属性很可能是最常用的代码；因为它要求我们的数据保持恒定的值存储。所以我想我怎么能实现这个；然后我想到了泛型可以让生活变得多么容易。不幸的是，我们不能在没有繁重工作的情况下只在泛型中使用属性。所以这是我的解决方案/问题；因为我不确定这是不是最好的方法——这就是我寻求同行审查的原因。

请记住，应用程序将是巨大的；这是一个非常简单的例子。

**抽象的：**

表示层：界面会有一系列字段；甚至数据通过网络服务通过网络传输到我们的数据库。

```
// Interface:
public interface IHolder<T>
{
     void objDetail(List<T> obj);
} 
```

所以我最初的想法是一个接口，它可以让我通用地处理我的每个对象。

```
// User Interface:
public class UI : IHolder
{
    void objDetail(List<object> obj)
    {
        // Create an Instance
        List<object> l = new List<object>();
        // Add UI Fields:
        l.Add(Guid.NewGuid());
        l.Add(txtFirst.Text);
        l.Add(txtLast.Text);
        // l to our obj        
        obj = l;
        return;
     }
} 
```

现在我有了一个界面；我们的 UI 已经使用它来输入信息。现在；这就是我好奇心的根源所在。

```
// Create an Object Class
public class Customer : IHolder
{
     // Member Variable:
     private Guid _Id;
     private String _First;
     private String _Last;

     public Guid Id
     { 
           get { return _Id; }
           set { _Id = value; }
     }
     public String First
     {
           get { return _First; }
           set { _First = value; }
     }
     public String Last
     {
           get { return _Last; }
           set { _Last = value; }
     }

     public virtual objDetail(List<Customer> obj)
     {
         // Enumerate through List; and assign to Properties.
     }
} 
```

现在这是我认为很酷的地方；如果我可以使用多态性来使用相同的接口；但覆盖它以不同的方式执行该方法。所以接口使用了一个泛型；能够变形为我们给定的项目类别。

现在我们的对象类；可以移动到我们的实体接口，它将处理基本的 Crud 操作。

我知道这个例子对我的意图不是最好的；因为你真的不需要使用多态性。但是，这是总体想法/目标......

*   存储表示层 UI 字段值的接口
*   将属性实现到所需的类
*   在我的班级周围创建一个包装器；可以是多态的。
*   变形为 Crud 操作的泛型

我在正确的道路上吗？这是禁忌吗？我不应该这样做吗？我的应用程序需要保存每个实例；但我需要灵活性来快速适应，而不会破坏过程中的每一个实例。这就是我认为我可以解决问题的方式。有什么想法吗？建议？我在这里错过了一个概念吗？还是我想多了？我是否错过了这条船并完全错误地实施了我的想法？那是我迷路的地方...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:47:55.783

在考虑了这个场景之后，我想什么可以提供这种灵活性，同时仍然确保代码针对修改和业务进行了优化。我不确定这是正确的解决方案，但它似乎有效。它不仅有效，而且效果很好。它似乎相当健壮。

这种方法什么时候有用？好吧，当您打算将用户界面与逻辑分离时。我将逐步构建每个方面，以便您可以看到整个结构。

```
public interface IObjContainer<T>
{
     void container(List<T> object);
} 
```

这种特殊的结构将很重要。因为它将所有所需的内容存储到其中。

因此，首先您将创建一个包含一系列字段的表单。

*   个人信息
*   地址信息
*   支付信息
*   订单信息

如您所见，所有这些都可以是单独的数据库表，但属于您正在操作的类似实体模型。这很常见。

因此，关注的隔离将开始略微显示，字段将被操作并通过接口传递。

```
public interface IPersonalInformation
{
      public string FirstName { get; set; }
      public string LastName  { get; set; }
} 
```

所以本质上，接口将其变量传递给接口。因此，您将建立一个接口来处理您希望调用的整个表单或单个接口，以便它们保持可重用。

所以现在你有一系列的接口，或者一个单一的。但它包含所有这些要使用的变量。所以你现在要创建一个类：

```
public class CustomerProperties: IPersonalInformation, IOrderInformation
{
    // Implement each Interface Property
} 
```

现在您已经创建了一个容器来保存您的所有值。这个容器的妙处在于您可以在应用程序中为另一个类重用相同的值或选择不同的值。但它会在逻辑上分离用户界面。

所以本质上这类似于存储库。

现在您可以获取这些值并执行所需的逻辑。现在变得很棒的是，在您执行完逻辑之后，您将对象传递到我们的通用列表中。然后，您只需在另一个类中为您的目标实现该方法并遍历您的列表。

老实说，它似乎运行良好并且很好地解耦。我觉得做一些类似于普通存储库和工作单元的工作需要做很多工作，这回答了这个问题，但天气与否对你的项目来说是理想的，我会研究存储库、工作单元、关注点隔离，控制反转和依赖注入。他们可能会更清洁地使用相同的方法。

* * *

**更新：**

写完之后我想了想，我注意到你实际上可以绕过一系列接口将这些属性值实现到通用列表结构中；但这会引入一致性问题，因为您必须知道每次按顺序传递的数据。这是可能的，但可能并不理想。

# twitter-bootstrap - 如何使用 Rails 3.2 将音频播放器添加到我的引导导航栏？

> ID：14409992
> 
> 赞同：2
> 
> 时间：2013-01-19T00:56:12.423
> 
> 标签：twitter-bootstrap, ruby-on-rails-3.2, audio-streaming

我正在制作一个网络应用程序，它可以从音乐博客中抓取 mp3 文件并将它们聚合到一个位置（类似于[http://hypem.com](http://hypem.com)）。我需要在我的网站上添加一个音频播放器，它将在同一播放器中播放来自数据库的多个 mp3 文件。

理想情况下，我想将此播放器放在我的应用程序的导航栏中，以便在用户滚动页面时始终可见。我正在使用带有 rails 3.2 的 bootstrap gem 作为我的样式，我希望将播放器直接集成到这个框架中。

# ruby-on-rails-3 - 请解释 layouts/application.html.erb 是如何工作的

> ID：14409995
> 
> 赞同：-1
> 
> 时间：2013-01-19T00:56:21.067
> 
> 标签：ruby-on-rails-3

Rails 是否仅在找不到以当前控制器命名的布局时才包含应用程序布局？我想我已经看到不同 Rails 版本的一些冲突行为。

如果 Rails 选择包含 1 个布局（以当前控制器命名的布局，或者如果不存在控制器布局，则为应用程序布局），如果我有一个我希望所有页面都遵守的标准模板，但每个页面都需要一些自定义，那该怎么办？页。

在每个页面的单独布局中复制所有内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T01:11:46.330

是的，第一个问题。请参阅Ruby on Rails 指南页面的布局和渲染中的[查找布局](http://guides.rubyonrails.org/layouts_and_rendering.html#finding-layouts)部分，以了解如何选择布局。

如果您有一个用于所有页面的标准模板，并且每个页面都有一些自定义，您可以[使用嵌套布局](http://guides.rubyonrails.org/layouts_and_rendering.html#using-nested-layouts)来减少多个布局的重复。