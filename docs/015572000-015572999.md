# StackOverflow 问答 15572000-15572999

# html - 如何在 django 的网页中制作动态表格？

> ID：15572000
> 
> 赞同：-3
> 
> 时间：2013-03-22T13:49:42.690
> 
> 标签：html, django, dynamic

我正在使用 Django 构建我的应用程序，我需要从数据库中检索数据并将其放入 html 页面中的动态表中。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:57:27.793

使用[模板](https://docs.djangoproject.com/en/dev/ref/templates/)！

```
<table>
    {% for key, value in data %}
        <tr>
            <td>{{ key|title }}</td>
            <td>{{ value }}</td>
        </tr>
    {% endfor %}
</table> 
```

# java - 在测试中更改最终类的返回值

> ID：15572004
> 
> 赞同：0
> 
> 时间：2013-03-22T13:49:48.350
> 
> 标签：java, junit, mockito

有人知道如何更改最终类中方法的返回值吗？

我正在尝试测试`ToBeTested`课程，我希望得到真实的结果。我尝试使用`Powermockito`但没有找到解决方案。

```
public final class ToBeChanged {

    public static boolean changeMyBehaviour() {
        return false;
    }
}

public class ToBeTested {
    public boolean doSomething () {
        if (ToBeChanged.changeMyBehaviour)
            return false;
        else 
            return true;
    }
} 
```

我不想将类声明为`ToBeChanged`类中的字段`ToBeTested`。所以没有办法改变实现的类本身。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:21:55.060

使用 JMockit 工具，测试将如下所示：

```
@Test
public void doSomething(@Mocked ToBeChanged mock)
{
    new NonStrictExpectations() {{ ToBeChanged.changeMyBehaviour(); result = true; }};

    boolean res = new ToBeTested().doSomething();

    assertTrue(res);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:06:12.647

隐藏接口后面的静态依赖。模拟界面。

由于您不想在您的类上有一个字段，只需将接口作为方法参数传递（或者通过工厂获取实例，只是不要使用紧耦合）

```
public final class ToBeChanged {

    public static boolean changeMyBehaviour() {
        return false;
    }
}

public interface MyInterface {

    boolean changeMyBehaviour();

}

public class MyInterfaceImpl implements MyInterface {

    @Override
    public boolean changeMyBehaviour() {
        return ToBeChanged.changeMyBehaviour();
    }

}

class ToBeTested {
    public boolean doSomething (MyInterface myInterface) {
        return !myInterface.changeMyBehaviour();
    }
}

class TheTest {
    @Test
    public void testSomething() {
        MyInterface myMock = mock(MyInterface.class);
        when(myMock.changeMyBehaviour()).thenReturn(true);
        new ToBeTested().doSomething(myMock);
    }
} 
```

# javascript - onClick 事件和 IE

> ID：15572006
> 
> 赞同：0
> 
> 时间：2013-03-22T13:49:52.257
> 
> 标签：javascript, jquery, internet-explorer, onclick

[我正在使用在此链接](http://jqueryui.com/dialog/#modal-form)上找到的 jQuery 对话框， 我试图通过 onClick 事件打开它，而不是使用按钮。它适用于 Firefox 和 Chrome，但不适用于 IE。如果你去我的测试站点并单击左上角（第一个）框，你会看到它在 FF 和 Chrome 中弹出一个对话框，但在 IE8 或 IE9 中没有选择“手”光标。 [http://calmaps.co.calumet.wi.us/datapopuptest.html](http://calmaps.co.calumet.wi.us/datapopuptest.html) 我对JavaScript不精通，但我只是在使用一个例子，所以我没有写代码，只是改变了一些文字以满足我的需要.

javascript 我试图在 html 中调用：

```
$( "#request-data" )
  //.button()
  .click(function() {
    $( "#dialog-form" ).dialog( "open" );
  }); 
```

我的 html 调用 javascript：

```
<a id="request-data" title="Municipal Boundary Data" onclick= "$('#request-data').click(function() {$('#dialog-form').dialog('open');
    return false;})" href="PleaseEnableJavascript.html"><img src="img/muni.png" alt="Calumet Municipal Boundaries" /></a> 
```

就像我说的，这适用于 Chrome 和 Firefox，但我在 IE 中什么也没有，没有错误，什么也没有。我花了一天时间研究这个问题，我希望我能得到一些见解。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:53:43.450

鉴于`onclick`您正在为元素定义[点击处理程序](http://api.jquery.com/click/)（即，当您单击它时，您会告诉它在单击它时要做什么），它在您第一次单击它时在*任何*浏览器中工作的事实证明了波斯特尔定律。

您可以更改 onclick 以执行您需要的操作：

```
onclick= "$('#dialog-form').dialog('open') .. 
```

或者让它调用一个函数：

```
function showDialog() { .. }

onclick= "showDialog()" 
```

或者你可以只在 中分配点击处理程序`document.ready`，然后你不需要任何东西`onclick`

```
$(document).ready(function() {
  $("#request-data").click(function() {
        $("#dialog-form").dialog("open");
     });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:18:07.080

stuartd 已经指出了不同的解决方案，我为您创建了一个 js fiddle，并提出了一个建议，以避免默认的单击功能。

这是相关部分：

```
$( "#create-user" )
      .css('cursor','pointer') //some css for a pointer
      .click(function(event) {
          event.preventDefault();
          $( "#dialog-form" ).dialog( "open" );
}); 
```

在这里你会找到 js-fiddle：http: [//jsfiddle.net/JBqzU/](http://jsfiddle.net/JBqzU/)

并且已经说过，没有必要将内联 js 包含到您的 a-tag 中。

编辑：

在这里，您做了一些 jslint 标准，但我认为这不会解决评论中建议的问题，您必须运行整个 js 代码。我认为你在那里有问题，因为在小提琴上测试片段，即工作正常。

无论如何祝你好运。

```
$(function () {
    "use strict";
    var name = $("#name"),
        email = $("#email"),
        organization = $("#organization"),
        allFields = $([]).add(name).add(email).add(organization),
        tips = $(".validateTips");

    function updateTips(t) {
        tips
            .text(t)
            .addClass("ui-state-highlight");
        setTimeout(function () {
            tips.removeClass("ui-state-highlight", 1500);
        }, 500);
    }

    function checkLength(o, n, min, max) {
        if (o.val().length > max || o.val().length < min) {
            o.addClass("ui-state-error");
            updateTips("Length of " + n + " must be between " + min + " and " + max + ".");
            return false;
        } else {
            return true;
        }
    }

    function checkRegexp(o, regexp, n) {
        if (!(regexp.test(o.val()))) {
            o.addClass("ui-state-error");
            updateTips(n);
            return false;
        } else {
            return true;
        }
    }

    $("#dialog-form").dialog({
        autoOpen: false,
        height: 300,
        width: 350,
        modal: true,
        buttons: {
            "Show Me The Data": function () {
                var bValid = true;
                allFields.removeClass("ui-state-error");
                bValid = bValid && checkLength(name, "name", 3, 25);
                bValid = bValid && checkLength(email, "email", 6, 80);
                bValid = bValid && checkLength(organization, "organization", 5, 25);
                bValid = bValid && checkRegexp(name, /^[a-z\-\s]+$/i, "Name may consist of letters only.");
                // From jquery.validate.js (by joern), contributed by Scott Gonzalez: http://projects.scottsplayground.com/email_address_validation/
                bValid = bValid && checkRegexp(email, /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i, "Email must be valid - eg. ui@jquery.com");
                bValid = bValid && checkRegexp(email, /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i, "Email must be valid - eg. ui@jquery.com");
                bValid = bValid && checkRegexp(organization, /^([0-9a-zA-Z\-\s])+$/, "Organization field only allows : a-z 0-9");

                if (bValid) {
                    $("#users tbody").append("<tr>" +
                                               "<td>" + name.val() + "</td>" +
                                               "<td>" + email.val() + "</td>" +
                                               "<td>" + organization.val() + "</td>" +
                                               "</tr>");
                    location.href = "ftp://liouser:l!oguest1@ftp.co.calumet.wi.us/websitedata/CalumetBoundaries.zip";
                    $(this).dialog("close");
                }
            },
            Cancel: function () {
                $(this).dialog("close");
            }
        },
        close: function () {
            allFields.val("").removeClass("ui-state-error");
        }
    });

    $("#request-data")
        .css('cursor', 'pointer')
        .click(function (event) {
            event.preventDefault();
            $("#dialog-form").dialog("open");
        });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:56:58.560

使用 jQuery 的全部要点之一是您可以在不使用`onclick`HTML 的情况下定义您的点击事件。

该`$(...).click()`方法不适用于`onclick`属性内部。

在您的函数中编写 jQuery click 处理程序`$(document).ready()`并将其从 HTML 中取出。

希望有帮助。

# iphone - 如何使用 GPUImage 编辑现有视频并将其重新保存在设备库中

> ID：15572019
> 
> 赞同：0
> 
> 时间：2013-03-22T13:50:36.820
> 
> 标签：iphone, ios, objective-c, xcode, gpuimage

我想使用已保存在设备库中的 GPUImage 编辑视频。编辑后，将编辑后的视频重新保存在设备库中。请帮助....提前谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:28:29.613

这是一个很好的教程：

[http://www.sunsetlakesoftware.com/2012/02/12/introducing-gpuimage-framework](http://www.sunsetlakesoftware.com/2012/02/12/introducing-gpuimage-framework)

请参阅“过滤和重新编码电影”部分。

# java - 如何从没有实例的其他类中调用方法？

> ID：15572021
> 
> 赞同：0
> 
> 时间：2013-03-22T13:50:47.727
> 
> 标签：java, oop, gwt

我如何从一个不是另一个类中的对象的类中调用一个方法，并且与另一个类没有任何共同之处？

就我而言：

```
class GridUI {
    com.google.gwt.user.cellview.client.DataGrid grid;

    public void refresh() {
         dataGrid.redraw();
    }
}

class SomeBackendService() {
   public foo() {
      //have to trigger refresh of a specific grid
   }
} 
```

一种可能性可能是使`refresh()`and `grid` `static`。但这是糟糕的设计，我不能使用这种方法，因为我想使用`GridUI`.

那么，如何从不包含此网格作为对象的任何服务刷新我的应用程序中的某个网格类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T14:13:04.893

只需在您的服务中创建并触发[`Event`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/web/bindery/event/shared/Event.html)它，并让您的网格注册它`Event`。最好使用[`EventBus`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/event/shared/EventBus.html).

使用`Map<String, Grid>`接受的答案中建议的静态将起作用，但它不合适。您可能会犯错误，并且当网格数量增加时，管理起来并不容易。

这种`EventBus`方法需要更多的前期工作，但最终它是一种更好的方法。您将能够重用`EventBus`整个应用程序。它确实有助于降低耦合度。您还可以轻松地让不同的对象作用于相同`Event`的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:06:49.783

或者创建一个组件注册表（基本上是 a ），然后使用其 id 作为注册表中的键来`Map<String,Grid>`获取网格。`SomeBackendService`（我想你知道要刷新哪个网格，对吧？）

不过要小心注册表：

*   如果需要，确保它们是线程安全的（在 UI 应用程序中可能是这样）
*   如果处理不当，它们往往会填满和泄漏内存

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-15T15:23:17.160

很抱歉这么长时间没有回答，我正在休假。

接口是某种类。但是它们没有实现任何方法，它们有空的方法体。

每个实现接口的类通常必须实现它的方法。

在 C# 中你会做：

```
enter code here

    interface IMyInterface
    {
       void PleaseImplementMe();
    }

    class clMyInterface :IMyInterface
    {

        void  IMyInterface.PleaseImplementMe()
        {
            MessageBox.Show("One implementation");
        }    
    }

end 
```

请让我知道，这是否可以帮助您。

# javascript - 如何使用先前的下拉选择作为参数创建多个调用不同存储过程的下拉列表？

> ID：15572023
> 
> 赞同：0
> 
> 时间：2013-03-22T13:50:51.047
> 
> 标签：javascript, html, asp-classic, ado

我有 4 个下拉菜单。每个下拉菜单“取决于”它上面的下拉菜单。例如，当用户从下拉列表 A 中进行选择时，下拉列表 B 需要调用存储过程并根据下拉列表 A 上选择的内容过滤其选择选项。其余下拉列表的想法相同。Dropdown C 将根据 Dropdown B 进行过滤......

解决此问题的最佳方法是什么？示例或任何有用的链接都会很棒！:) 这适用于使用 ASP Classic、HTML 和 JavaScript 的网站

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:03:30.120

发表评论后，我把懒惰抛在脑后，发现了这个：[http://www.aspmessageboard.com/showthread.php?181927-Allowing-Autopostback-after-dropdown-selection...](http://www.aspmessageboard.com/showthread.php?181927-Allowing-Autopostback-after-dropdown-selection...)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:29:08.733

有或没有明显的回发？

**使用 postback**，您有多种途径。您可以让每个下拉列表发布到不同的页面，或者您可以让它们都发布到同一页面，并具有确定发布哪个下拉列表的逻辑。

这是早期方法的概念：

```
<script>
    function SubmitTo(where) {
        alert(where);
        f1.action = where + ".asp";
        f1.submit();
    }
</script>
<form name="f1" method="post">
<select name="a" id="a" onchange="SubmitTo('page1')"><option></option><option>1</option><option>2</option></select>
<br />
<select name="b" id="b" onchange="SubmitTo('page2')"><option></option><option>3</option><option>4</option></select>
<br />
<select name="c" id="c" onchange="SubmitTo('page3')"><option></option><option>5</option><option>6</option></select>
<br />
<select name="d" id="d" onchange="SubmitTo('page4')"><option></option><option>7</option><option>8</option></select>
</form> 
```

**如果没有 post back**，使用 AJAX，你会做类似的事情，除了你将结果的 bulding 移动到你的浏览器中。基本上，您创建单独的“onChange 客户端脚本处理程序（或侦听器），它们执行两件事：1\. AJAX 调用 Web 服务器页面以检索“下一个”下拉列表的数据，以及 2.当结果出现时，“构建"下一个下拉菜单。

# ios - 使用 GCD 加载图像时收到内存警告

> ID：15572028
> 
> 赞同：2
> 
> 时间：2013-03-22T13:51:19.787
> 
> 标签：ios, multithreading, grand-central-dispatch, alassetslibrary, nsautoreleasepool

我正在使用 AssetsLibrary 开发一个照片库应用程序来加载我的设备照片。在另一个 VC 中呈现随机图像时，我注意到以下情况：我的完整 res 图像加载到 imageView 大约需要 1 或 2 秒（比本机 photosApp 长得多），我还从日志中得到“已接收加载几张图片后出现内存警告”。如果我将我的表示设置为 fullScreenImage 警告会停止，但我不想要这个。为了在视图上获得流畅的性能和高质量的图像，我必须进行哪些更改？

这是代码，希望你能告诉我问题是什么：

这是我想在屏幕上展示我的图像的 VC

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSLog(@"%@",assetsController);

    detailImageView = [[UIImageView alloc]initWithFrame:self.view.bounds];
    [self.view addSubview:detailImageView];
    detailImageView.image = smallImage; //small image is my asset thumbnail and is passed as an argument in my init function

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{

        NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

        ALAsset *asset = [assetsController.albumPics objectAtIndex:assetsController.index];
        ALAssetRepresentation *representation = [asset defaultRepresentation];

        bigImage = [[UIImage imageWithCGImage:[representation fullResolutionImage]]retain];

        dispatch_async(dispatch_get_main_queue(), ^{

            detailImageView.image = bigImage;

        });
        [pool release];
    });
} 
```

**更新 1**

```
 {
        UIImageView *detailImageView = [[UIImageView alloc]initWithFrame:self.view.bounds];
        [self.view addSubview:detailImageView];
        detailImageView.image = smallImage;

        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{

            NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

            ALAsset *asset = [assetsController.albumPics objectAtIndex:assetsController.index];
            ALAssetRepresentation *representation = [asset defaultRepresentation];

            UIImage *bigImage = [UIImage imageWithCGImage:[representation fullResolutionImage]];

            dispatch_async(dispatch_get_main_queue(), ^{

                detailImageView.image = bigImage;

            });
            [pool release];

        });
} 
```

![在此处输入图像描述](../Images/7a9b8bd2dc1db21c99a11d6e1cc64590.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:54:21.060

是`bigImage`实例变量吗？是不是在这里以外的地方使用过？如果它没有在其他任何地方使用，那么它应该是一个局部变量，你不应该保留它。如果它是您保留的实例变量，则需要在为其分配新值之前释放先前的值。

同样的讨论适用于`detailImageView`

# linux - Ubuntu 神秘代理

> ID：15572030
> 
> 赞同：3
> 
> 时间：2013-03-22T13:51:25.117
> 
> 标签：linux, shell, ubuntu, proxy, system-administration

找不到我的代理设置的存储位置。

我在 Ubuntu 12.04 上。曾几何时，我通过网络应用程序 GUI 创建了一个“手动”代理。以同样的方式将其关闭，但现在我每次使用**shell**时都必须“清空”代理`export http_proxy=""`等等。

在那里。

```
env | grep proxy 
```

*   http_proxy= [http://proxy1.bsu:3128/](http://proxy1.bsu:3128/)
*   https_proxy= [https://proxy1.bsu:3128/](https://proxy1.bsu:3128/)

代理已启动，但在哪里？

*   **/etc/environment** - 不存在
*   **/etc/apt/apt.conf** - 不存在
*   **/etc/apt/apt.conf.d/ 文件夹**- 不存在
*   **/etc/profile** - 不存在
*   **/etc/bash.bashrc** - 不存在
*   **~/.bashrc** - 不存在
*   **~/.profile** - 不存在
*   **~/.bash_profile** - 不存在
*   **~/.bash_login** - 不存在
*   **~/.pam_environment** - 不存在

跑`gsettings set org.gnome.system.proxy mode 'none'`了没有效果。尝试通过`gconf-editor \ dconf-editor`仍然没有运气。我也尝试过更新系统`apt-get update`。注销和登录，重新启动 shell 会话等。

它更像是超级用户 q，但仍然如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:49:36.220

即使是蛮力方法`grep -rl proxy1.bsu /`也没有找到任何文件。
必须覆盖变量`~/.bashrc`

应该是我系统的bug。

# javascript - 为什么 jQuery 对单个命令执行不需要的多个操作？

> ID：15572033
> 
> 赞同：1
> 
> 时间：2013-03-22T13:51:34.253
> 
> 标签：javascript, jquery

当我调整浏览器大小时，它会发出多个警报。我使用“return false”不起作用。

如果我使用 unbind()/unbind('resize') 那么它可以工作，但它会产生另一个问题 - resize() 函数从第二次浏览器/窗口调整大小时停止工作。

我的代码-

```
<script src="jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function(e) {

    alert($(".myclass").parent().width());

    $(window).bind('resize',function() {
        alert($(".myclass").parent().width());
    });

});
</script>
<section class="myclass"></section> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:54:30.667

这不是 jQuery 的问题，而是浏览器调整大小的实现。

根据您使用的浏览器，它可能会触发中间调整大小，或者仅在释放鼠标时触发调整大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:53:42.250

因为每次浏览器更改时都会触发调整大小。

如果您调整 100 像素的大小，它最多可以触发 100 次。

只有在您停止调整窗口大小时，这样的事情才会起作用并触发：

```
var resizing = false, stopedResizing = true;
$(window).bind('resize',function() {
    if(!resizing){
        console.log("started resizing. Width = " + $(".myclass").parent().width());
        resizing = true;
    }
    stopedResizing = false;
    setTimeout(function(){
       if(!stopedResizing){
           stopedResizing = true;
           setTimeout(function(){
               if(stopedResizing && resizing){
                resizing = false;
                console.log('Stoped resizing. Width = ' + $(".myclass").parent().width());
               }
           }, 500);
       }
    }, 500);
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T13:58:10.807

您可以执行以下操作：

```
$(document).ready(function(e) {

    alert($(".myclass").parent().width());
    var lastTime = 0;

    $(window).bind('resize',function() {
        var currentTime = new Date().time();
        if(currentTime > lastTime + 5000)
            alert($(".myclass").parent().width());
        lastTime = currentTime;
    });

}); 
```

...这样它只会在至少相隔 5 秒的调整大小时触发。但通常情况下，您希望在调整大小停止时采取行动，而不是在开始时采取行动。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-22T14:01:43.103

此代码在发生调整大小事件后在窗口的鼠标悬停时触发。

```
$(document).ready(function() {

        var windowResized = false;

        function callFunction() {

            console.log("I am called once after window resize");
        }

        $(window).mouseover(function() {

            if (windowResized == true) {

                callFunction();
                windowResized = false;
            }

        })

        $(window).resize(function() {

            windowResized = true;

        });

    }) 
```

# javascript - JavaScript：从弹出窗口访问父窗口 | 认证 API

> ID：15572035
> 
> 赞同：0
> 
> 时间：2013-03-22T13:51:35.683
> 
> 标签：javascript, google-api

我在使用 Google Auth 时遇到了一些问题，从本[教程](http://25labs.com/import-gmail-or-google-contacts-using-google-contacts-data-api-3-0-and-oauth-2-0-in-php/)扩展而来：

存在主窗口，例如`win1`

此窗口包含功能

```
$('#gmail-connect').click(function () {
popupWindow = window.open(
    'https://accounts.google.com/o/oauth2/auth?client_id=527884649784.apps.googleusercontent.com&redirect_uri=http://25labs.com/demo/import-gmail-contacts/oauth.php&scope=https://www.google.com/m8/feeds/&response_type=code','', 'width=900,height=600,resizable,scrollbars');
}); 
```

在此弹出窗口 ('win2') 中，Google 将我重定向到包含代码的已定义回调 URL：

```
<html>
    <script>
        {literal}
            function makeResponse() {
                if (window.opener && !window.opener.closed) {
                    window.opener.foo();
                }
                return;
                window.close();
            }
        {/literal}
    </script>
    <body onload="makeResponse();"></body>
</html> 
```

所以问题是我无法让 window.opener 访问父窗口，导致重定向。如何解决？

# ruby-on-rails - 通过电子邮件访问贝宝帐户

> ID：15572037
> 
> 赞同：2
> 
> 时间：2013-03-22T13:52:03.380
> 
> 标签：ruby-on-rails, paypal, stripe-payments

让我解释一下我的网站（Ruby on Rails）当前的场景：

1）我们可以从我的网站创建多个管理员帐户。

2）每个管理员都有自己的客户，这些客户也有他们的网站访问部分。

3) 每个客户都可以向他们相关的管理员贝宝帐户提交一些付款。

4）并且这个提交的金额应该转移到管理员贝宝帐户。

问题：

我们希望通过他们的电子邮件地址访问管理员 Paypal 帐户，并且我们不想定义用户/管理员可以提交他们的帐户凭据（如商家密钥等）的界面。

有什么选择可以通过我实现这种情况吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T06:04:20.707

您可以使用[Adaptive Payments API](https://developer.paypal.com/webapps/developer/docs/classic/adaptive-payments/integration-guide/APIntro/)来实现它，在用户之间创建付款和使用其他调用只需要用户的电子邮件。

要获取用户在 PayPal 上指定的确切电子邮件，您可以使用“使用[PayPal 登录”](https://developer.paypal.com/webapps/developer/docs/integration/direct/log-in-with-paypal/detailed/)功能，它允许您通过 OAuth 协议获取有关用户的基本信息。这种方式比用户手动输入电子邮件更可靠。

# java - java DOM lookupNamespaceURI 无法找到命名空间 URI

> ID：15572043
> 
> 赞同：0
> 
> 时间：2013-03-22T13:52:21.723
> 
> 标签：java, dom, namespaces

我正在尝试关注[http://www.ibm.com/developerworks/xml/library/x-nmspccontext/index.html](http://www.ibm.com/developerworks/xml/library/x-nmspccontext/index.html)

```
 UniversalNamespaceResolver 
```

使用 XML 解析 XPath 评估的命名空间的示例。我遇到的问题是下面的lookupNamespaceURI调用在XML上返回null，我在下面给出：

```
 DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();

    DocumentBuilder builder = domFactory.newDocumentBuilder();
    Document dDoc = builder.parse(new InputSource(new StringReader(xml)));

    String nsURI = dDoc.lookupNamespaceURI("h"); 
```

XML：

```
<?xml version="1.0"?>

<h:root xmlns:h="http://www.w3.org/TR/html4/">

   <h:table>
     <h:tr>
       <h:td>Apples</h:td>
       <h:td>Bananas</h:td>
     </h:tr>
   </h:table>`
</h:root> 
```

虽然我希望它返回“ [http://www.w3.org/TR/html4/](http://www.w3.org/TR/html4/) ”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:02:51.517

在配置 DocumentBuilder 时，您必须明确地使其知道命名空间（当没有命名空间时 xml 的第一天是一个愚蠢的遗物）：

```
domFactory.setNamespaceAware(true); 
```

作为旁注，那篇文章中的建议不是很好。它从根本上忽略了一点，即您*不在乎*实际文档中的名称空间前缀是什么，它们无关紧要。您需要 xpath 命名空间解析器来匹配您正在使用的 xpath 表达式，仅此而已。如果您按照他们的建议进行操作，那么每当文档的前缀更改时，您都必须更改 xpath 代码，这是一个可怕的想法。

请注意，他们在最后一个项目符号中放弃了这一点，但本文的其余部分似乎忽略了这是使用 xpath 时的基本思想。

> 但是，如果您无法控制 XML 文件，并且有人可以向您发送他们希望的任何前缀，那么最好独立于他们的选择。您可以按照示例 1 (HardcodedNamespaceResolver) 编写自己的名称空间解析，并在 XPath 表达式中使用它们。

# asp.net - 如何将标签云链接到asp.net中的特定段落或图片

> ID：15572044
> 
> 赞同：0
> 
> 时间：2013-03-22T13:52:22.453
> 
> 标签：asp.net, hyperlink, tags, cloud, href

我刚刚开始为我正在开发的新网站使用标签云功能。但是现在我遇到了一些问题，我可以在标签云中设置链接以转到页面，但是我有很多带有标签容器的页面。

例如，我有一个标签容器。其中一个面板是运动面板。标签容器还有其他三个面板，比如食物、旅行和饮料。如何在选项卡容器中制作直接进入该面板的标签？真的卡在这里了。尝试创建一个普通的 a id="something" name="something"，并尝试使用 # 为该名称创建一个 href 标记，但这不起作用。

有人可以帮助我吗，当然，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:07:25.640

# 是你最好的选择。因此，例如，如果您将链接设置为：

```
<a href="/yourpagewithtabs.aspx#tagname">Link text</a> 
```

然后，您可以使用 javascript 绑定到“哈希更改”事件。下面的 jQuery 示例。

```
// on load
jQuery(document).ready(function(){

    // bind window hashchange event
    jQuery(window).bind("hashchange", function(){

        // get hash selected
        var hash = window.location.hash;

        // *** now do something with that information *** //
        // *** eg, show hide panels where a nested element, attribute or data matches hash *** //

    });
}); 
```

如果你这样做，你应该让所有的“标签点击”也简单地绑定哈希更改，忘记任何以前的功能。然后它将是坚实的，一致的。

您也可以使用查询字符串来做同样的事情。如果你不是“hashchange”的粉丝，那就换一种方式。关键是您将拥有一个 javascript 函数，该函数在 url 中查找某些内容，然后对其执行*一些*操作！

**编辑**

添加到“做某事”部分，假设所有选项卡都属于同一类并且哈希与 ID 同名

```
jQuery(".tabs").hide();
jQuery("#" + hash).show(); 
```

# jpa - WEB9031 - 无法存储具有序列生成 ID 的实体

> ID：15572046
> 
> 赞同：1
> 
> 时间：2013-03-22T13:52:27.580
> 
> 标签：jpa, glassfish, ejb

我正在使用 glassfish、postgres 和 openjpa。

我只有一个 bean，首先想创建一个新实例并将其存储在 DB 中。我创建了一个新的用户对象，填充它（除了 id）并得到 - 试图坚持 - 以下异常：

```
Caused by: java.lang.IllegalStateException: WEB9031: WebappClassLoader unable to load resource [org.apache.openjpa.util.LongId], because it has not yet been started, or was already stopped
at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1401)
at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1359)
at org.myPlace.server.user.UserPDO.pcNewObjectIdInstance(UserPDO.java)
at org.apache.openjpa.enhance.PCRegistry.newObjectId(PCRegistry.java:142)
at org.apache.openjpa.meta.MetaDataRepository.processRegisteredClass(MetaDataRepository.java:1694)
at org.apache.openjpa.meta.MetaDataRepository.processRegisteredClasses(MetaDataRepository.java:1644)
... 128 more

 WARNING: StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for
 servlet Faces Servlet threw exception
 java.lang.IllegalStateException: WEB9031: WebappClassLoader unable to load resource   
 [org.apache.openjpa.util.LongId], because it has not yet been started, or was already stopped
at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1401)
at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1359)
at org.myPlace.server.user.UserPDO.pcNewObjectIdInstance(UserPDO.java)
at org.apache.openjpa.enhance.PCRegistry.newObjectId(PCRegistry.java:142)
at org.apache.openjpa.meta.MetaDataRepository.processRegisteredClass(MetaDataRepository.java:1694) 
```

我的豆子看起来像这样：

```
@Entity
@Table(name="tbl_User")
public class UserPDO implements Serializable {

private long id;
private String username;
private String password;

public UserPDO() {}

@Id
@GeneratedValue(strategy=GenerationType.SEQUENCE, generator="user_seq_gen") 
@SequenceGenerator(name="user_seq_gen", sequenceName="user_seq")
public long getId() {
    return id;
}

public void setId(long id) {
    this.id = id;
}

... } 
```

我的 persistence.xml 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>

<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence" 
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
         xsi:schemaLocation="http://java.sun.com/xml/ns/persistence 
                             http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">

<persistence-unit name="myPlace" transaction-type="JTA">

    <provider>org.apache.openjpa.persistence.PersistenceProviderImpl</provider>

    <class>org.myPlace.server.user.UserPDO</class>

    <properties>
      <property name="openjpa.jdbc.DBDictionary" value="postgres"/>

      <property name="openjpa.ConnectionDriverName" value="org.postgresql.Driver"/>
      <property name="openjpa.ConnectionURL" value="jdbc:postgresql://localhost:5432/myPlace"/>
      <property name="openjpa.ConnectionPassword" value="myPlace"/>
      <property name="openjpa.ConnectionUserName" value="myPlace"/>

      <property name="openjpa.jdbc.SynchronizeMappings" value="buildSchema"/> 
      <property name="openjpa.Log" value="File=/home/username/apache.log, DefaultLevel=ERROR, Tool=INFO, SQL=TRACE"/>

      <property name="openjpa.DynamicEnhancementAgent" value="false" />
      <property name="openjpa.RuntimeUnenhancedClasses" value="unsupported" />
      <property name="openjpa.DataCache" value="false"/>
      <property name="openjpa.QueryCache" value="false"/>
    </properties>

</persistence-unit> 
```

该表已正确创建，顺序也是如此。但是当我想通过创建一个新的用户对象时

```
public <T> T create(T t) {
    this.em.persist(t);
    this.em.flush();
    this.em.refresh(t);
    return t;
} 
```

我得到了上面提到的异常。我在这里找到了一些问题/答案，表明停用运行时增强应该可以解决问题。但这对我不起作用。我的第一个想法是，它可能是 Classloader-Leak。我将 postgres-driver 和 openjpa-jars 复制到 glassfish/lib 文件夹中。

有人可以帮忙吗？谢谢！

# java - Eclipse RCP 中的 XML 验证

> ID：15572057
> 
> 赞同：1
> 
> 时间：2013-03-22T13:52:50.893
> 
> 标签：java, eclipse-plugin, eclipse-rcp

我正在构建一个 Eclipse 插件，我需要在其中“即时”验证 XML 文件。

我创建了一个以**org.eclipse.core.runtime.xml**作为基本类型的新内容类型，并为该内容类型创建了一个扩展**org.eclipse.wst.sse.ui.StructuredTextEditor**的新编辑器。我还为 org.eclipse.wst.validation.validatorV2 做出了贡献，以使用**org.eclipse.wst.xml.core.internal.validation.eclipse.Validator****创建**一个验证器来验证我的 XML 文件。

 **这是我的 plugin.xml

```
<plugin>  
   <extension  
         point="org.eclipse.core.contenttype.contentTypes">  
      <content-type  
            base-type="org.eclipse.core.runtime.xml"  
            file-extensions="example"  
            id="com.example.editor.content.example"  
            name="Example Files"  
            priority="normal">  
      </content-type>  
   </extension>  
   <extension  
         point="org.eclipse.ui.editors">  
      <editor  
            class="com.example.editor.ExampleEditor"  
            id="com.example.editor.example"  
            name="Example editor">  
         <contentTypeBinding  
               contentTypeId="com.example.editor.content.example">  
         </contentTypeBinding>  
      </editor>  
   </extension>
   <extension
         id="com.example.validator.ExampleValidator"
         name="Example validator"
         point="org.eclipse.wst.validation.validatorV2">
      <validator
            build="true"
            class="org.eclipse.wst.xml.core.internal.validation.eclipse.Validator"
            manual="true">
         <include>
            <rules>
               <contentType
                     id="com.example.editor.content.example">
               </contentType>
            </rules>
         </include>
      </validator>
   </extension>
</plugin> 
```

手动验证（右键单击 -> 验证）有效，但文件未“即时”验证（即在用户键入或保存文件时）。

有没有办法在每次保存文件时验证文件以显示可能的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T13:19:20.973

不久前我确实注意到了这个错误。此 org.eclipse.wst.sse.ui.StructuredTextEditor 编辑器未能包含对编辑器的验证。您是否尝试过扩展内置 XML 编辑器？我想在扩展 XML 编辑器的内容类型之后可能因为我不想为我的扩展扩展编辑器。它自动验证了编辑器。**

# jquery - 如何绑定剑道网格而不将数据存储到数据库中

> ID：15572058
> 
> 赞同：0
> 
> 时间：2013-03-22T13:52:53.490
> 
> 标签：jquery, kendo-ui, kendo-grid

我正在使用一个剑道下拉列表和一个添加按钮和一个剑道网格。

我想在单击“添加”按钮时将下拉列表中的数据绑定到剑道网格。在这里，我不想将数据存储在数据库中并检索它。我想在不存储到数据库的情况下实现这一点。

请任何机构让我知道如何实现这一目标？？？

谢谢迪帕克

# vb.net - 扫描包含给定字符串的行的文本文件并用另一个字符串替换该行

> ID：15572061
> 
> 赞同：0
> 
> 时间：2013-03-22T13:53:01.607
> 
> 标签：vb.net, file

我想扫描我的文件以查找包含特定字符串“black =”的行，如果匹配则将其替换为“blah blah”，但我不知道该怎么做。这是我尝试过的，但它不起作用。

```
Dim myStreamReaderL1 As System.IO.StreamReader
myStreamReaderL1 = System.IO.File.OpenText("C:\File.txt")
myStreamReaderL1.ReadLine()
If myStreamReaderL1.ReadLine.Contains("black=") Then
    Button2.Hide()
Else
    Return
End If 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T15:11:33.773

假设输入文件不是很大，您可以将整个文件读入一个字符串并将所有实例更改`black=`为`blah blah`

```
 Dim myStreamReaderL1 As System.IO.StreamReader
        Dim myStream As System.IO.StreamWriter

        Dim myStr As String
        myStreamReaderL1 = System.IO.File.OpenText("C:\File.txt")
        myStr = myStreamReaderL1.ReadToEnd()
        myStreamReaderL1.Close()

        myStr = myStr.Replace("black=", "blah blah")
        'Save myStr
        myStream = System.IO.File.CreateText("C:\FileOut.txt")
        myStream.WriteLine(myStr)
        myStream.Close() 
```

**编辑：根据****Christian Sauer**的建议，使用 ReadAllText 稍微更有效（代码更少）的版本。

**EDIT2：**如果我想提高效率，让我们优化一切。一条线就够了，我想。

如果要保存到文件中：

```
 System.IO.File.WriteAllText("C:\FileOut.txt", System.IO.File.ReadAllText("C:\File.txt").Replace("black=", "blah blah")) 
```

如果您只是想存储到一个字符串中以供以后使用：

```
 Dim myStr As String = System.IO.File.ReadAllText("C:\File.txt").Replace("black=", "blah blah") 
```

# ruby - 在 Heroku 中使用 Padrino 发送电子邮件

> ID：15572067
> 
> 赞同：5
> 
> 时间：2013-03-22T13:53:18.460
> 
> 标签：ruby, heroku, padrino, mailing

我正在尝试通过 Padrino 中的 sendmail 发送电子邮件。我做了[这里](http://jp.padrinorb.com/guides/padrino-mailer#configuration "指导帕德里诺梅勒")指定的配置（**配置**和**快速使用**）

但我总是在服务器日志中收到以下错误（在 Heroku 或 localhost 上）：

```
app[web.1]: sh: Illegal option - 
app[web.1]: Errno::EPIPE - Broken pipe: 
```

我安装了`mail gem`，我正在使用 Padrino 0.10.7

我正在使用它来发送电子邮件：

```
post :create do
  email(:from => "tony@reyes.com", :to => "john@smith.com", :subject => "Welcome!", :body=>"Body")
end 
```

这几乎就是我所拥有的...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T07:19:49.367

您应该使用合作伙伴插件之一来使用 Heroku 发送邮件。

一个不错的选择是 Sendgrid

`heroku addons:add sendgrid:starter --app=your_app_name`

然后在您的 App 类中的 app.rb 中的 Padrino 应用程序中：

```
set :delivery_method, :smtp => { 
  :address              => "smtp.sendgrid.net",
  :port                 => 587,
  :domain               => 'heroku.com',
  :user_name            => ENV['SENDGRID_USERNAME'],
  :password             => ENV['SENDGRID_PASSWORD'],
  :authentication       => :plain,
  :enable_starttls_auto => true  
} 
```

您可以将这些替换为另一个外部 SMTP 服务器的设置，或者查看[Mandrill](http://mandrillapp.com)的交易电子邮件。

我怀疑您看到的 Errno::EPIPE 错误是它无法连接到有效的 SMTP 服务器，因此您的控制器代码应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T15:56:59.510

Pat 是对的，您不需要附加组件，只需像 stef 建议的那样配置您的 app.rb 即可。因此，例如，我们使用 gmail，我们的配置看起来像这样：

```
 set :delivery_method, :smtp => {
    :address              => "smtp.domain.com",
    :port                 => 587,
    :domain               => 'rails.domain.com',
    :user_name            => "rails@domain.com",
    :password             => "super-secret",
    :authentication       => "plain",
    :enable_starttls_auto => true,
    :openssl_verify_mode  => OpenSSL::SSL::VERIFY_NONE
  } 
```

# hadoop - 解释级联点图

> ID：15572070
> 
> 赞同：2
> 
> 时间：2013-03-22T13:53:36.050
> 
> 标签：hadoop, cascading

有人可以解释如何阅读这些图表吗？我了解从头到尾的流程，但我特别想知道如何读取椭圆（管道/水龙头）之间的字段（括号）转换。

例如，使用图像中每个管道之后的字段，我能够解释这些的方式是第一个字段集，即 [{2}:'token', 'count'] 是进入下一个管道的内容/点击，但是第二个字段集[{1}：'token']的意义是什么？

这是进入上一个管道的字段集吗？第二个括号是否具有编程意义，即我们是否能够使用特定的级联代码在该管道中访问它？（在第二个字段集大于第一个的情况下）

[![不耐烦的厕所 PNG](../Images/c1591ea4820194f020406622b725938a.png)](https://i.stack.imgur.com/zwZhF.png)
[（来源：[cascading.org](http://www.cascading.org/files/2012/08/wc.png)）]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T19:25:11.173

第二个字段集表示哪些字段可用于该 map 或 reduce 中的后续操作。

在您上面的示例中，在减少步骤中，由于您按“令牌”分组，因此只有“令牌”可用于该减少步骤中的后续聚合（Everys）。例如，您可以添加另一个输出平均令牌长度的聚合，但您还不能使用使用“计数”的聚合。

这种行为的原因是同一组上的后续聚合并行发生。因此， Count 不会完成以馈入您链接的任何其他聚合。

# javascript - Jquery停止功能没有正常工作

> ID：15572078
> 
> 赞同：-1
> 
> 时间：2013-03-22T13:53:43.340
> 
> 标签：javascript, jquery

我用函数调用为 show div 创建了这个函数，但是我需要执行这个函数并在 show 后一秒钟内停止：

```
<script>

function repit_clouds(request)
{
  if (request=='no')
  {
    stop();
  }
  else
  {
    if (request=='ok')
    {
      var interval = setInterval(function() {
        $("#header_sun").fadeIn(4000);
        $("#header_sun").fadeOut(4000);
      },10000);
    }
  }
}

$(document).ready(function() 
{

  $("#header_sun").fadeIn(4000).delay(4000).fadeOut(4000);
  repit_clouds('ok');
  $("#header_background_clouds").fadeOut(2000).css("display","#none");
  $("#header_background_night").fadeIn(2000).css("background","#000").show(4000).fadeIn(2500);
  repit_clouds('no');
});
</script> 
```

repit_clouds 函数的问题，当我发送值 no 时，函数必须停止，但没有正常工作并继续`request==ok`，我不知道为什么不停止

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:56:48.583

嗯，你*到底*是怎么想`stop()`的？你也许是说：

```
$('#header_sun').stop() 
```

这会暂停该元素上的任何现有动画？

或者您是否还想停止间隔计时器：

```
clearInterval(interval); 
```

当然，这也需要在函数*外部*`interval`声明，这样每次调用函数时它的值都不会丢失。

 *我还注意到，您的`.css()`函数不会被`.fadeOut()`or`.show()`调用排队 -`.css()`不是动画函数，因此这些更改总是会立即发生。

同样，这两个调用`repit_clouds()`也不会排队 - 如果您希望在之前的动画之后完成这些*调用*，那么您需要调查 jQuery`.queue()`函数，或者在“动画完成回调”期间触发它们。*

# javascript - Javascript：添加“选择”表格行的功能，使用参数调用事件侦听器

> ID：15572082
> 
> 赞同：2
> 
> 时间：2013-03-22T13:53:58.210
> 
> 标签：javascript

一年前在大学课堂上学习了一些基础知识后，我才刚刚开始自学 Javascript。对于我应该编写的网络应用程序，我需要允许用户“选择”表格的行，最好是通过单击它们。我有很强的 Python 背景，我的方法可能带有 GTK 范式的味道。当有更标准或可接受的方式时，我担心我会以某种方式“重新发明轮子”，但就像我说的那样，还不太了解 Javascript。我尝试执行此操作的 Javascript 代码是：

```
//Get list of rows in the table
var table = document.getElementById("toppings");
var rows = table.getElementsByTagName("tr");

var selectedRow;

//Row callback; reset the previously selected row and select the new one
function SelectRow(row) {
    if (selectedRow !== undefined) {
        selectedRow.style.background = "#d8da3d";
    }
    selectedRow = row;
    selectedRow.style.background = "white";
}

//Attach this callback to all rows
for (var i = 0; i < rows.length; i++) {
    var idx = i;
    rows[idx].addEventListener("click", function(){SelectRow(rows[idx])});
} 
```

这显然不起作用，因为在循环退出后 idx 等于 rows.length - 1 所以 SelectRow 中的行参数是 rows[rows.length - 1]，它始终是最后一行；也就是说，**i 的值不会“保存”为事件侦听器回调的参数。**如何使用自己保存的参数调用事件侦听器？[该线程](https://stackoverflow.com/questions/14044257/javascript-to-add-table-row-onclick-events)似乎提供了一种使用 onclick 属性执行此操作的方法，但我知道这已被弃用，并且 addEventListener （或一些与 IE 兼容的怪物 addEvent 库）现在是“正确”的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:58:24.983

您遇到了关闭问题。这里有一个参考：[循环内的 JavaScript 闭包——简单实用的例子](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)

试试这个：

```
for (var i = 0; i < rows.length; i++) {
    (function (idx) {
        rows[idx].addEventListener("click", function() {
            SelectRow(rows[idx]);
        });
    })(i);
} 
```

[http://jsfiddle.net/2Vs5w/2/](http://jsfiddle.net/2Vs5w/2/)

当然，您实际上并不需要传递`rows[idx]`到`SelectRow`- 您可以传递`this`而不必处理创建闭包来捕获当时的值`i`。所以是这样的：

```
for (var i = 0; i < rows.length; i++) {
    rows[idx].addEventListener("click", function() {
        SelectRow(this);
    });
} 
```

[http://jsfiddle.net/2Vs5w/3/](http://jsfiddle.net/2Vs5w/3/)

在示例中，我包含了一个用于有效地将事件附加到元素的函数：

```
function addEvent(element, evt, callback) {
    if (element.addEventListener) {
        element.addEventListener(evt, callback, false);
    } else if (element.attachEvent) {
        element.attachEvent("on" + evt, callback);
    } else {
        element["on" + evt] = callback;
    }
} 
```

尝试使用现代标准`addEventListener`，然后尝试使用IE的方式- `attachEvent`，然后是DOM0方式- `element.onevent`。有几个地方可以获得这个功能，甚至可能是更好的版本，但这现在应该可以工作了:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:02:14.867

您已经找到了常见的 JavaScript 陷阱！:)

1.  变量具有函数作用域
2.  闭包维护对父作用域的引用（不是变量值的副本）。

如果你总结 1 + 2，你就会明白为什么这条线是错误的：

```
 rows[idx].addEventListener("click", function(){SelectRow(rows[idx])}); 
```

闭包中的是对父作用域（2）的引用，为什么`idx`在循环结束时？`idx = rows.length`将循环放在内部并不重要`var`，声明位于函数级别（1）。

您可以使用@Ian 解决方案来复制 idx。

*注意 1：*事件处理程序接收一个事件对象，您可以使用它`event.target`来获取触发事件的对象，这样您就不需要传递`row[idx]`：

```
 rows[idx].addEventListener("click", function(evt){SelectRow(evt.target)}); 
```

*注意 2：*通常将事件处理程序附加到每一行可能效率低下，请尝试将事件处理程序附加到表中

# jquery - jQuery专注于文本框在使用警报时设置光标但不是没有它

> ID：15572084
> 
> 赞同：0
> 
> 时间：2013-03-22T13:54:00.167
> 
> 标签：jquery, cursor, focus, set, alert

在元素上使用 focus() 时我遇到了一些奇怪的问题。我需要将光标设置在单击的位置。我可以得到点击的位置，但我有点困惑，因为我不能在 focus() 事件中将它设置为这个位置。这是我的代码：

```
function modify(value, item_ID, attr_NAME, obj_name) {
    var item_id = item_ID;
    var attr_name = attr_NAME;
    $('.ajax').html($('.ajax input').val());
    $('.ajax').removeClass('ajax');
    $(value).addClass('ajax');
    $(value).html(
            '<input id="editbox"' + ' type="text" value="' + $(value).text()
                    + '"/>');

    $('#editbox').focus(function(e) {
        var pos = GetCaretPosition(this);
        alert(pos);
    });

    $('#editbox').keydown(function(event) {
        if (event.which == 13) {
            $(document).attr('helpAttr', false);
            confirmAction(this.value, item_id, attr_name, obj_name);
        }
    });
    $('#editbox').blur(
            function() {
                if ($(document).attr('helpAttr')
                        || ($(document).attr('helpAttr') == undefined)) {
                    confirmAction(this.value, item_id, attr_name, obj_name);
                } else {
                    $(document).attr('helpAttr', true);
                }
            });
}

//Got this from the Internet
function GetCaretPosition(ctrl) {
    var CaretPos = 0; 
// IE Support
    if (document.selection) {
        ctrl.focus();
        var Sel = document.selection.createRange();
        Sel.moveStart('character', -ctrl.value.length);
        CaretPos = Sel.text.length;
    }
    // Firefox support
    else if (ctrl.selectionStart || ctrl.selectionStart == '0')
        CaretPos = ctrl.selectionStart;
    return (CaretPos);
} 
```

对我来说奇怪的是，如果我使用 alert(pos) 光标将被放置在这个位置。是否有任何解决方案来删除警报，因为每次单击文本框时都会收到一个消息框是破坏性的。谢谢

# r - 神经网络预测为所有预测返回相同的值

> ID：15572091
> 
> 赞同：13
> 
> 时间：2013-03-22T13:54:40.903
> 
> 标签：r, machine-learning, artificial-intelligence, neural-network, survival-analysis

我正在尝试使用神经网络包构建神经网络，但遇到了一些麻烦。我的`nnet`包裹很成功，但没有运气`neuralnet`。我已经阅读了整个文档包并且找不到解决方案，或者我无法发现它。

我正在使用的训练命令是

```
nn<-neuralnet(V15 ~ V1 + V2 + V3 + V4 + V5 + V6 + V7 + V8 + V9 + V10 + V11 + V12 + V13 + V14,data=test.matrix,lifesign="full",lifesign.step=100,hidden=8) 
```

和预测

```
result<- compute(nn,data.matrix)$net.result 
```

训练比 nnet 训练花费的时间要长得多。我尝试使用与`nnet`（反向传播而不是弹性反向传播）相同的算法，但什么也没改变，也改变了激活函数（和`linear.output=F`）以及几乎所有其他东西，结果没有改善。预测值都是一样的。我不明白为什么 nnet 对我有用，而 nnet`neuralnet`却不行。

我真的可以使用一些帮助，我（缺乏）对这两件事（神经网络和 R）的理解可能是原因，但找不到原因。

我的数据集来自[UCI](http://archive.ics.uci.edu/ml/datasets/Adult)。我想使用神经网络进行二元分类。数据样本为：

```
25,Private,226802,11th,7,Never-married,Machine-op-inspct,Own-child,Black,Male,0,0,40,United-States,<=50K.
38,Private,89814,HS-grad,9,Married-civ-spouse,Farming-fishing,Husband,White,Male,0,0,50,United-States,<=50K.
28,Local-gov,336951,Assoc-acdm,12,Married-civ-spouse,Protective-serv,Husband,White,Male,0,0,40,United-States,>50K.
44,Private,160323,Some-college,10,Married-civ-spouse,Machine-op-inspct,Husband,Black,Male,7688,0,40,United-States,>50K.
18,?,103497,Some-college,10,Never-married,NA,Own-child,White,Female,0,0,30,United-States,<=50K.
34,Private,198693,10th,6,Never-married,Other-service,Not-in-family,White,Male,0,0,30,United-States,<=50K.
29,?,227026,HS-grad,9,Never-married,?,Unmarried,Black,Male,0,0,40,United-States,<=50K.
63,Self-emp-not-inc,104626,Prof-school,15,Married-civ-spouse,Prof-specialty,Husband,White,Male,3103,0,32,United-States,>50K.
24,Private,369667,Some-college,10,Never-married,Other-service,Unmarried,White,Female,0,0,40,United-States,<=50K.
55,Private,104996,7th-8th,4,Married-civ-spouse,Craft-repair,Husband,White,Male,0,0,10,United-States,<=50K.
65,Private,184454,HS-grad,9,Married-civ-spouse,Machine-op-inspct,Husband,White,Male,6418,0,40,United-States,>50K.
36,Federal-gov,212465,Bachelors,13,Married-civ-spouse,Adm-clerical,Husband,White,Male,0,0,40,United-States,<=50K.
26,Private,82091,HS-grad,9,Never-married,Adm-clerical,Not-in-family,White,Female,0,0,39,United-States,<=50K. 
```

转换为矩阵，因子为数值：

```
V1  V2  V3  V4  V5  V6  V7  V8  V9  V10 V11 V12 V13 V14 V15
39  7   77516   10  13  5   1   2   5   2   2174    0   40  39  0
50  6   83311   10  13  3   4   1   5   2   0   0   13  39  0
38  4   215646  12  9   1   6   2   5   2   0   0   40  39  0
53  4   234721  2   7   3   6   1   3   2   0   0   40  39  0
28  4   338409  10  13  3   10  6   3   1   0   0   40  5   0
37  4   284582  13  14  3   4   6   5   1   0   0   40  39  0
49  4   160187  7   5   4   8   2   3   1   0   0   16  23  0
52  6   209642  12  9   3   4   1   5   2   0   0   45  39  1
31  4   45781   13  14  5   10  2   5   1   14084   0   50  39  1
42  4   159449  10  13  3   4   1   5   2   5178    0   40  39  1
37  4   280464  16  10  3   4   1   3   2   0   0   80  39  1
30  7   141297  10  13  3   10  1   2   2   0   0   40  19  1
23  4   122272  10  13  5   1   4   5   1   0   0   30  39  0 
```

预测值总结：

```
 V1           
 Min.   :0.2446871  
 1st Qu.:0.2446871  
 Median :0.2446871  
 Mean   :0.2451587  
 3rd Qu.:0.2446871  
 Max.   :1.0000000 
```

Wilcoxon-Mann-Whitney 检验的值（曲线下面积）表明预测性能几乎与随机相同。

```
performance(predneural,"auc")@y.values
[1] 0.5013319126 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-01-30T01:56:50.090

当您使用神经网络得到奇怪的结果时，首先要考虑的原因是归一化。您的数据必须标准化，否则，是的，训练会导致 NN 偏斜，这将始终产生相同的结果，这是一个常见的症状。

查看您的数据集，有值 >>1 这意味着它们都被 NN 处理基本相同。其原因是传统上使用的响应函数在 0 附近的某个范围之外（几乎）是恒定的。

始终在将数据输入神经网络之前对其进行规范化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-02-06T22:09:29.510

与@sashkello 的回答类似，当我的数据未正确规范化时，我早些时候遇到了类似的问题。一旦我对数据进行规范化，一切都会正常运行。

最近，我再次遇到这个问题，经过调试，我发现神经网络给出相同输出可能还有另一个原因。如果您的神经网络具有权重衰减项，例如**RSNNS**包中的权重衰减项，请确保您的衰减项不会太大，以至于所有权重基本上都为 0。

我在 R 中使用**caret**包。最初，我使用衰减超参数 = 0.01。当我查看诊断结果时，我看到正在为每个折叠（交叉验证）计算 RMSE，但 Rsquared 始终为 NA。在这种情况下，所有预测都得出相同的值。

一旦我将衰减降低到一个低得多的值（1E-5 和更低），我就得到了预期的结果。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-17T19:29:44.193

如果有人有同样的问题，我`rep`在定义神经网络时使用参数解决了。如果您不设置此参数，似乎网络的训练只进行一次，这会导致网络返回相同值的向量（或非常相似的值，例如 0.99872 和 0.97891）。

我相信问题也可能出在`err.fct`参数的默认值上，我将其设置`ce`为二进制分类。

这是导致正常结果的代码：

```
library(neuralnet)

model <- neuralnet(formula = allow ~ .,
                   data = podaci_train,
                   linear.output = FALSE, 
                   err.fct = "ce",
                   hidden = 4,
                   rep = 3)

predictions <- compute(model, subset(podaci_test, select = -c(allow)))
predictions <- predictions$net.result
max(predictions)
min(predictions) 
```

这是输出（最大概率 - 94.57%，最小概率 - 0.01%）：

```
[1] 0.9456731
[1] 0.0009583263 
```

使用`rep`会导致 RStudio 在绘图时出现一些奇怪的行为，因为在不同的训练迭代中有多个模型。因此，如果您不想让您的环境因过多的绘图而崩溃，请使用附加参数：

```
plot(model, rep = 'best') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-22T10:42:35.540

我在这里为可能遇到与我相同问题的任何人添加此内容。

如果上述任何一项都不起作用，并且您正在使用带有自定义训练循环的 TensorFlow。确保设置`training=True`为：

```
predictions = model(inputs, training=True) 
```

# grails - beforeDelete() 中的服务访问

> ID：15572092
> 
> 赞同：4
> 
> 时间：2013-03-22T13:54:44.710
> 
> 标签：grails, grails-orm

我想在我的 grails 域对象中调用服务 beforeDelete() 事件。不幸的是，当事件被触发时，它总是会重复崩溃。我建立了一个重现问题的示例。域对象：

```
class Gallery {

    def myService

    def beforeDelete() {
            // System.out.println(myService); // not even this works, same error!
        System.out.println(myService.say());
    }
} 
```

服务：

```
class MyService {

    String say() {
        "hello"
    }
} 
```

测试控制器：

```
class DeleteController {

    def index() {

        Gallery.list().each {
            it.delete()
        }
    }

    def create() {
        def gallery = new Gallery()
        gallery.save()
    }
} 
```

如果我启动应用程序并调用 create 后跟 index 我得到：

```
Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [testbeforedelete.Gallery#1] 
```

我想要完成的是调用我的服务，这比这个例子要复杂一些。我无法解释这种行为，也不知道如何应对。我知道休眠事件需要特别注意，但我被困住了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T13:06:12.583

beforeDelete 实际上对您的域类进行了更改。我同意你不会期望这种行为。Hibernate 认为您正在修改实例。您可以使用以下代码来解决您的问题

```
def beforeDelete() {
    Gallery.withNewSession {
        System.out.println(myService.say());
    }
} 
```

# twitter-bootstrap - Twitter Bootstrap：网格和布局之间的区别？

> ID：15572093
> 
> 赞同：-1
> 
> 时间：2013-03-22T13:54:46.800
> 
> 标签：twitter-bootstrap

Bootstrap 脚手架文档 ( [http://twitter.github.com/bootstrap/scaffolding.html](http://twitter.github.com/bootstrap/scaffolding.html) ) 描述了 Grid 系统，但在之后介绍了 Layout 概念...

如果 Grid 系统旨在设计页面布局，那么这个 Layout 概念的目的是什么？

艾蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:15:01.893

Twitter Bootstrap 上下文中的布局定义了网格的环境。或者换句话说，它定义了网格的外部宽度。

您可以在固定和流体之间进行选择。

*   固定意味着您的网格将具有绝对（最大）宽度（例如 960 像素）。
*   Fluid 意味着您的 Grid 将适合浏览器窗口的大小。

# c# - Telerik Radgrid：添加另一个页脚行

> ID：15572095
> 
> 赞同：3
> 
> 时间：2013-03-22T13:54:51.263
> 
> 标签：c#, asp.net, telerik, radgrid

我需要向我的`RadGrid`实例添加多个页脚行；不过，目前我只想添加第二个。我目前有一个页脚行，它正在完美地工作和显示，以供记录。

我在 Telerik 论坛上找到[了以下相关问题](http://www.telerik.com/community/forums/aspnet-ajax/grid/radgrid-with-3-footers.aspx)并尝试实现它，但它不起作用：代码被执行，新代码`FooterItem`被添加到第二行，`Controls`但第二行没有出现。我需要找出原因，如果有人能帮我解决这个问题，我将不胜感激。

**ASP 网格代码**

```
<div id="OrderMainContent">
    <telerik:RadAjaxManager runat="server" ID="RadAjaxManager1">
        <AjaxSettings>
            <telerik:AjaxSetting AjaxControlID="RadGrid1" />
            <telerik:AjaxSetting AjaxControlID="txtQuantity">
                <UpdatedControls>
                    <telerik:AjaxUpdatedControl ControlID="RadGrid1" />
                </UpdatedControls>
            </telerik:AjaxSetting>
        </AjaxSettings>
    </telerik:RadAjaxManager>
    <telerik:RadInputManager ID="RadInputManager1" runat="server">
        <telerik:NumericTextBoxSetting BehaviorID="NumericBehavior1" Type="Number" DecimalDigits="0">
            <TargetControls>
                <telerik:TargetInput ControlID="RadGrid1" />
            </TargetControls>
        </telerik:NumericTextBoxSetting>
    </telerik:RadInputManager>
    <telerik:RadGrid ID="RadGrid1" runat="server" Skin="Sunset" AllowSorting="True" AutoGenerateColumns="False"
        GridLines="None" ShowFooter="True" OnItemDataBound="RadGrid1_ItemDataBound" OnPreRender="RadGrid1_PreRender">
        <MasterTableView DataKeyNames="ProductID" TableLayout="Fixed">
            <RowIndicatorColumn>
                <HeaderStyle Width="20px"></HeaderStyle>
            </RowIndicatorColumn>
            <ExpandCollapseColumn>
                <HeaderStyle Width="20px"></HeaderStyle>
            </ExpandCollapseColumn>
            <Columns>
                <telerik:GridBoundColumn UniqueName="colProduct" HeaderText="<%$ Resources: SiteLabels, ProductOrderForm.lblProduct %>"
                    HeaderStyle-HorizontalAlign="Center" DataField="ProdDesc">
                    <HeaderStyle HorizontalAlign="Center"></HeaderStyle>
                </telerik:GridBoundColumn>
                <telerik:GridTemplateColumn UniqueName="colQuantity" HeaderText="<%$ Resources: SiteLabels, ProductOrderForm.lblQuantity %>"
                    HeaderStyle-HorizontalAlign="Center" DataField="OrderQty" ColumnEditorID="txtQuantity">
                    <HeaderStyle Width="90" />
                    <ItemStyle Width="90px" />
                    <ItemTemplate>
                        <asp:TextBox ID="txtQuantity" runat="server" Width="50px" OnTextChanged="txtQuantity_TextChanged"
                            AutoPostBack="true">
                        </asp:TextBox>
                    </ItemTemplate>
                </telerik:GridTemplateColumn>
                <telerik:GridTemplateColumn UniqueName="colPrice" HeaderText="<%$ Resources: SiteLabels, ProductOrderForm.lblBasePrice %>"
                    HeaderStyle-HorizontalAlign="Center" DataField="ProdUnitPrice">
                    <HeaderStyle Width="80px" />
                    <ItemStyle Width="80px" />
                    <ItemTemplate>
                        <asp:Label ID="lblPrice" runat="server" Text='<%# Eval("ProdUnitPrice") %>' />
                    </ItemTemplate>
                </telerik:GridTemplateColumn>
                <telerik:GridBoundColumn UniqueName="colNotes" HeaderText="<%$ Resources: SiteLabels, ProductOrderForm.lblNotes %>"
                    HeaderStyle-HorizontalAlign="Center">
                    <HeaderStyle Width="200px" />
                    <ItemStyle Width="200px" />
                </telerik:GridBoundColumn>
            </Columns>
        </MasterTableView>
        <ClientSettings>
            <Scrolling AllowScroll="True" UseStaticHeaders="True" />
        </ClientSettings>
    </telerik:RadGrid>
</div> 
```

**后面的相关代码**

```
 protected void RadGrid1_PreRender(object sender, EventArgs e)
    {
        AddFooterRow(sender as RadGrid);
    }

    private void AddFooterRow(RadGrid grid)
    {
        if (grid != null)
        {
            GridItem[] footerItems = grid.MasterTableView.GetItems(GridItemType.Footer);

            if (footerItems.Count() == 1)
            {
                GridTFoot foot = footerItems[0].Parent.Controls[0].Parent as GridTFoot;

                for (int i = 0; i < foot.Controls.Count; i++)
                {
                    GridFooterItem item = foot.Controls[i] as GridFooterItem;

                    if(item != null)
                    {
                        lastFooterPos = i;
                        break;
                    }
                }

                GridFooterItem existingFooter = foot.Controls[lastFooterPos] as GridFooterItem;
                GridFooterItem newFooterItem = new GridFooterItem(grid.MasterTableView, 0, 0);

                foreach(TableCell fc in existingFooter.Cells)
                {
                    TableCell newFooterCell = new TableCell();
                    newFooterCell.Text = "allo";
                    newFooterItem.Cells.Add(newFooterCell);
                }

                foot.Controls.AddAt(lastFooterPos + 1, newFooterItem);
            }
        }
    } 
```

当然，如果您需要更高的精度，请询问。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:00:40.353

在对 Telerik 文档进行了一些搜索之后，我很确定这不仅仅是可能的。例如，在[这个问题](http://www.telerik.com/community/forums/aspnet-ajax/ajax/insert-row-to-radgrid.aspx)中，Telerik 管理员明确指出“ *RadGrid 是数据绑定控件，它的项目是根据其数据源中的记录创建的并显示数据源数据。因此，为了在网格中添加新行，您需要在其数据源中添加新记录并重新绑定网格。* "

因此，为了解决我的问题，我决定删除网格上的页脚并在下面添加一个全新的网格，我将绑定到`DataTable`我将通过`Page_Load`事件处理程序中的代码创建的虚拟对象。这些值要么通过 Javascript 在客户端确定，要么简单地注入到该虚拟表的行中。

如果有人找到更优雅的解决方案，我仍然有兴趣了解它！然而，现在，工作必须向前推进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-12T10:58:43.927

```
 int lastFooterPos;

    protected void RadGrid1_PreRender(object sender, EventArgs e) {
        AddFooterRow(sender as RadGrid);
    }

    private void AddFooterRow(RadGrid grid) {
        if (grid != null) {
            GridItem[] footerItems = grid.MasterTableView.GetItems(GridItemType.Footer);

            if (footerItems.Length == 1) {
                GridTFoot foot = footerItems[0].Parent.Controls[0].Parent as GridTFoot;

                for (int i = 0; i < foot.Controls.Count; i++) {
                    GridFooterItem item = foot.Controls[i] as GridFooterItem;

                    if (item != null) {
                        lastFooterPos = i;
                        break;
                    }
                }
                GridFooterItem existingFooter = foot.Controls[lastFooterPos] as GridFooterItem;
                GridFooterItem newFooterItem = new GridFooterItem(grid.MasterTableView, 0, 0);

                int k = 0;
                int l = 0;
                int n = 0;
                int p = 0;
                int a = 0;
                int b = 0;
                int c = 0;
                foreach (TableCell fc in existingFooter.Cells) {
                    //decimal cost = Convert.ToDecimal(existingFooter["Marks"].Text);
                    TableCell newFooterCell = new TableCell();
                    if (k == 0) {
                        newFooterCell.Text = "";
                        newFooterCell.Height = 12;
                        newFooterItem.Cells.Add(newFooterCell);
                        k = 1;

                    }
                    else {
                        if (l == 0) {
                            newFooterCell.Text = "";
                            newFooterCell.Height = 12;
                            newFooterItem.Cells.Add(newFooterCell);
                            l = 1;
                        }
                        else {
                            if (n == 0) {
                                newFooterCell.Text = "";
                                newFooterCell.Height = 12;
                                newFooterItem.Cells.Add(newFooterCell);
                                n = 1;
                            }
                            else {
                                if (p == 0) {
                                    newFooterCell.Text = "Another Total Footer:";
                                    newFooterCell.Height = 12;
                                    newFooterItem.Cells.Add(newFooterCell);
                                    p = 1;
                                }
                                else {
                                    if (a == 0) {
                                        newFooterCell.Text = Convert.ToString(existingFooter["Marks"].Text);
                                        newFooterCell.Height = 12;
                                        newFooterItem.Cells.Add(newFooterCell);
                                        a = 1;
                                    }
                                    else {
                                        if (b == 0) {
                                            newFooterCell.Text = Convert.ToString(existingFooter["Fees"].Text);
                                            newFooterCell.Height = 12;
                                            newFooterItem.Cells.Add(newFooterCell);
                                            b = 1;
                                        }
                                        else {
                                            if (c == 0) {
                                                newFooterCell.Text = Convert.ToString(existingFooter["Noofstudents"].Text);
                                                newFooterCell.Height = 12;
                                                newFooterItem.Cells.Add(newFooterCell);
                                                c = 1;
                                            }
                                            else {
                                                newFooterCell.Text = "";
                                                newFooterCell.Height = 12;
                                                newFooterItem.Cells.Add(newFooterCell);

                                            }

                                        }

                                    }

                                }

                            }
                        }
                    }

                    foot.Controls.AddAt(lastFooterPos + 1, newFooterItem);

                }
            }
        }
    } 
```

# telerik - KendoUI：在 PHP 中获取按钮单击的 ID

> ID：15572099
> 
> 赞同：1
> 
> 时间：2013-03-22T13:55:01.967
> 
> 标签：telerik, kendo-ui

我用过 kendoui 网格之类的；

```
<script>
    $(function(){
        $("#grid").kendoGrid({
            dataSource:{
                transport: {
                    read: "<?php echo base_url() ?>index.php/user_management/manage_users/list_view/"
                },
                schema:{
                    data: "data"
                }
            },
            columns: [
                {
                    field: "UserID",
                    hidden:true
                },
                {
                    field: "Username",
                    title:"Username"
                },
                { field: "FirstName",
                    title:"First Name"
                },
                {field:"MiddleNames"},
                {field:"LastName"},
                {field:"City"},
                {field:"Email"},
                {field:"Actions"},
                {command: { text: "View", click: showDetails }, title: " ", width: "140px"}
            ]
        });

    });

    function showDetails(e) {
        e.preventDefault();

        //i want to get the id of the clicked row and pass that id to the next(redirected) page;
    }
</script> 
```

如何获取当前单击的行 id 即`UserId`列值并将该 id（重定向）传递到下一页？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T15:02:52.197

从您收到的事件中，您将获得它所属的行：

```
var row = $(e.target).closest("tr"); 
```

然后你得到项目使用`dataItem`：

```
var item = $("#grid").data("kendoGrid").dataItem(row); 
```

所以它会是：

```
function showDetails(e) {
    var row = $(e.target).closest("tr");
    var item = $("#grid").data("kendoGrid").dataItem(row);
    alert("UserId is:" + item.UserId);
} 
```

# c++ - 我的反向单链表函数代码有什么问题？

> ID：15572105
> 
> 赞同：0
> 
> 时间：2013-03-22T13:55:09.420
> 
> 标签：c++, list, linked-list, reverse

我正在尝试反转链接列表并发现运行它的问题。该代码只会在显示时产生错误。显示时进入无限循环。我有正确的步骤吗？

```
void Header::reverse()
{
    Node* nodePtr = head;
    Node* first = head;
    Node* temp = NULL;
    while(nodePtr)
    {
        temp = nodePtr;
        nodePtr = nodePtr->next;
        temp->next = first;
        first = temp;
    }
    head = first;
} 
```

这是我的课程代码的一部分....

```
enter code here
class Header
{
 private:
  struct Node
   {
 Node* next;
 int value;
   };
 Node* head; 
```

......

谁能告诉我我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:01:34.337

first 在开始时必须为 NULL，否则在第一次迭代中您实际上是在做

```
head->next = head; 
```

# mysql - MSSQL 到 MySQL 迁移 - UCS-2 代理对的字符编码问题，如何从 MSSQL 数据库中删除这些？

> ID：15572108
> 
> 赞同：5
> 
> 时间：2013-03-22T13:55:18.317
> 
> 标签：mysql, sql-server, character-encoding, migration

我的任务是将 Microsoft SQL Server 2005 数据库迁移到 MySQL 5.6（这些都是本地运行的数据库服务器），非常感谢一些帮助。

-MSSQL 源数据库有 latin1 排序规则（所以有 ISO 8859-1 字符集对吗？）但没有任何 char/varchar 字段（任何字符串字段都是 nvarchar/nchar）所以所有这些数据都应该使用 UCS-2 字符放。

-MySQL 目标数据库想要字符集 UTF-8

我决定在最新版本的 MySQL 工作台中使用数据库迁移工具包。起初它运行良好并按预期迁移了所有内容。但是在 MSSQL 数据库中遇到 UCS-2 代理对字符时，我完全被绊倒了。

迁移工具包可复制表程序没有提供非常有用的错误消息：“wstring 的字符集转换期间出错：没有错误”。它也没有提供有关导致问题的数据的任何字段/行信息，并且会在 100 行的块内失败。因此，在最后一次成功插入后搜索 100 行后，我发现问题似乎是由其中一个 nvarchar 字段中的两个 UCS-2 字符引起的。它们在 UCS-2 字符集中被列为代理项对。它们特别是字符 DBC0 和 DC83（我通过查看该字段的二进制数据并将字节对（小端序）与成功迁移的数据进行比较得到了这一点）。

当从 MSSQL 数据库中删除此代理对时，该行已成功迁移到 MySQL。

这是问题所在：

我试图在测试 MSSQL 表中搜索这些字符（这个图表表只是一个 nvarchar 字段的各种测试字符串）以准备替换脚本并不断得到奇怪的结果......我一定做错了。

正在寻找

```
SELECT * FROM chartest WHERE text LIKE NCHAR(0xdc83) 
```

将返回任何代理对字符（无论它是否使用 DC83），但显然，仅当它是该字段中唯一的字符（或该对的一部分）时。这没什么大不了的，因为无论如何我都想删除这些实例（我不喜欢删除这样的数据，但我认为我们负担得起）。

正在寻找

```
SELECT * FROM chartest WHERE text LIKE '%' + (NCHAR(0xdc83))+ '%' 
```

将返回每一行！无论字段中是否存在 unicode 字符，更不用说 DC83 字符了。有没有更好的方法来查找和替换这些字符？或者我应该尝试其他什么？

我还尝试将目标数据库、表和字段字符集设置为 UCS-2，但似乎没有什么区别。

我还应该提到，此迁移使用实时数据（约 50GB 数据库！），而其中一个提供它的站点已脱机，因此任何解决方案都需要快速运行...

我非常感谢任何建议！如果我遗漏了任何信息，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-20T13:48:09.387

我有这个错误，现在我找到了问题的根源。我很难找到答案，所以也许这对某人有用，即使我意识到，我的问题和解决方法可能不会与 op 的原始问题相匹配。

我正在将数据从 MSSQL 迁移到 MySQL，并且正在迁移的内容是来自 Sitecore CMS 的 html-content（目标 CMS 是 Drupal，顺便说一句）。

我发现，在转换包含**Instagram-embeds**的数据库和点击记录时出现此错误。Instagram-embeds 的工作方式是将嵌入的帖子数据复制到嵌入代码中（而不是异步加载，等等 - 甚至图像也包含为 base64-css ......），而年轻人现在倾向于在他们的图像描述中加入很多表情符号（使用带有表情符号键盘的 iPhone）。Emoji 由 4 字节编码字符表示，但 MySQL`utf8`仅允许 3 字节编码 unicode 字符。

我最初的运行错误`wbcopytables.exe`（这是在 MySQL Workbench 中执行迁移向导的非 GUI 方式）是

> wstring的字符集转换期间出错：没有错误

但是将 MySQL Workbench 升级到最新版本（从*5.something*到*6.x*）会使错误更具描述性，提示表和列（唉，不是行）：

> 错误：无法在表 [MyDatabase].[dbo].[MyTable]（MyColumn 列）中成功地将 UCS-2 字符串转换为 UTF-8。原始字符串：...

无论如何-*可以*使用`utf8mb4`一个允许表情符号的解决方案。[在这里](https://stackoverflow.com/questions/10957238/incorrect-string-value-when-trying-to-insert-utf-8-into-mysql-via-jdbc)阅读更多。

但看起来，在我的 Drupal 案例中这样做是[个坏主意。](https://www.drupal.org/node/1314214)

所以 - 我最终得到的解决方案只是在我的迁移脚本中删除这些字符。为相关站点的用户保留这些是没有意义的，因为它们无论如何都在网页上显示为矩形。由于您无法在 SQL Server 中使用正则表达式进行搜索和替换，因此我使用 DAL 和 c# .NET 处理了数据，并在[此处](https://stackoverflow.com/questions/28023682/how-do-i-remove-emoji-characters-from-a-string)找到了帮助（非常感谢[Jon Skeet](https://stackoverflow.com/users/22656/jon-skeet)）-原来有一个正则表达式-用于匹配 UTF-16 中代理对的一半的模式。见下文（如果需要，可以使用另一种语言的模式）。

```
var noUcs2SurrogatePairsString = Regex.Replace(stringWithUcs2SurrogatePairs, @"\p{Cs}", string.Empty); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-05T22:31:19.910

我解决了仅编辑“导入数据脚本.cmd”的问题，它通过仅用“VARCHAR”替换列来读取“As NVARCHAR”列。

注意：我的表列已经是 VARCHAR 类型，所以......由于某些愚蠢的原因，迁移脚本不正确地将其转换为 UNICODE (NVARCHAR) 类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-18T07:55:20.463

我今天遇到了一个非常相似的问题，我发现它是由空字符串引起的，将它们替换为 NULL 或表示没有数据的值并且迁移工作正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T08:55:10.297

现在这个问题已经解决了。我在这里使用用户 [Remus Rusanu 的](https://dba.stackexchange.com/users/708/remus-rusanu)建议[来](https://dba.stackexchange.com/questions/37343/sql-server-to-mysql-migration-how-can-i-remove-ucs-2-surrogate-pairs-in-sql-se)查找具有这些代理对字符的行，`CHARINDEX`并决定使用它`SUBSTRING`来排除麻烦的字符，如下所示：

```
UPDATE test
SET a = SUBSTRING(a,  1,   (CHARINDEX(0x83dc, CAST(a AS VARBINARY(8000)))+1)/2 - 1) -- string before the unwanted character
+ SUBSTRING(a, (CHARINDEX(0x83dc, CAST(a AS VARBINARY(8000)))+1)/2 +1, LEN(a) ) -- string after the unwanted character
WHERE CHARINDEX(0x83dc, CAST(a AS VARBINARY(8000))) % 2 = 1 -- only odd numbered charindexes (to signify match at beginning of byte pair character) 
```

# windows - 执行第二个应用程序的卸载程序

> ID：15572111
> 
> 赞同：1
> 
> 时间：2013-03-22T13:55:27.143
> 
> 标签：windows, inno-setup, uninstallation

我正在尝试在卸载之前卸载我的应用程序上安装的所有插件。我正在使用下面的代码，但我没有结果......

```
for I := 0 to GetArrayLength(PluginsID)-1 do
begin
    sUnInstallString := 'Software\Microsoft\Windows\CurrentVersion\Uninstall\' + PluginsID[I];
    Exec(sUnInstallString, '/NORESTART','', SW_SHOW, ewWaitUntilTerminated, uResultCode);
end; 
```

有什么问题吗？

**已编辑**

我更改代码以找到正确的 unistall 字符串：

```
 for I := 0 to GetArrayLength(Plugins)-1 do
  begin
    sUnInstPath := 'Software\Microsoft\Windows\CurrentVersion\Uninstall\' + Plugins[I];
    if RegQueryStringValue(HKLM, sUnInstPath, 'UninstallString', sUnInstallString) then
    begin    
        Exec(sUnInstallString, '','', SW_HIDE, ewWaitUntilTerminated, uResultCode);
    end;
  end; 
```

但它不再起作用....`sUnInstallString`填充了正确的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T01:37:36.803

将您的 Exec 调用更改为：

```
Exec('>', sUnInstallString, ...) 
```

（在执行此操作之前不要去掉引号。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:26:24.170

我只需要添加行

```
StringChangeEx(sUnInstallString, '"', '', True); 
```

之前`Exec`。该值来自具有无效字符的注册表`"`

# css - css 条件语句：包括 IE8+ 和 rest 的样式表

> ID：15572114
> 
> 赞同：0
> 
> 时间：2013-03-22T13:55:38.393
> 
> 标签：css

我有这个样式表：

```
<link rel="stylesheet" href="/static/web/bootstrap/css/bootstrap-responsive.min.css" /> 
```

我想将它包含在 IE8+ 和任何其他浏览器中，但**不**包含在 IE7- 中。可能吗？

**编辑：** 我试过：

```
<!--[if (gte IE 8)|(!IE)]>
<link rel="stylesheet" href="/static/web/bootstrap/css/bootstrap-responsive.min.css" />
<![endif]--> 
```

但这不包括 Firefox 或 Chrome 下的文件（或者我想 IE8+ 以外的任何其他浏览器）

**EDIT2：** 事实上，我应该包含 IE9+（不是 IE8+）的文件，因为我刚刚发现甚至 IE8 都不支持媒体查询。无论如何，就“如何做这些事情”而言，这并不重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:58:08.950

[条件注释](http://www.quirksmode.org/css/condcom.html)中有一些特殊的语法

```
gt: greater than
lte: less than or equal to 
```

因此，您可以使用它们进行过滤。

```
<!--[if gt IE 7]>
<link rel="stylesheet" href="/static/web/bootstrap/css/bootstrap-responsive.min.css" />
<![endif]--> 
```

条件注释还支持使用或运算符的[多个条件](http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx)`AND(&)``OR(|)`

```
<!--[if (gt IE 7)|(!IE)]>
    <link rel="stylesheet" href="/static/web/bootstrap/css/bootstrap-responsive.min.css" />
    <![endif]--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:03:45.283

在条件语句中包含您的旧 IE CSS 文件，然后包含您的普通 CSS 文件

```
<!--[if lt IE 9]>
<link rel="stylesheet" href="/static/web/bootstrap/css/OLD-IE.css" />
<![endif]-->
<link rel="stylesheet" href="/static/web/bootstrap/css/bootstrap-responsive.min.css" /> 
```

# c - 向后递增数组中的值

> ID：15572118
> 
> 赞同：0
> 
> 时间：2013-03-22T13:55:57.113
> 
> 标签：c, algorithm, math

我想通过向后递增来遍历数组中值的所有组合。
所以让我们有一个数组

```
 int array[10] = {0,0,0,0,0,0,0,0,0,0}; 
```

我想这样增加它：{0,0,0,0,0,0,0,0,0,1} > {0,0,0,0,0,0,0,0,0,2 }...{p-1,p-1,p-1,p-1,p-1,p-1,p-1,p-1,p-1,p-1}。

例如较小的数组，p=3：{0,0,0}>{0,0,1}>{0,0,2}>{0,1,0}>{0,1,1}>{ 0,1,2}...{2,2,2}

数组可以`sizeof(int)*m`很大，其中 1<=m<=10。

有人可以帮我解决这个问题吗？

编辑：抱歉，忘记了这个。
好吧，很抱歉混淆了，但我还有一个条件。

该数组不会采用那种形式。这将是这样的**例子**

```
 int array[10] = {0,0,0,0,0,0,0,0,0,0};
    int help[10] = {3,4,0,1,0,0,3,0,1,0}; 
```

我想得到数组[帮助[]！= 0]中的值组合，在这种情况下数组[0]，数组[1]，数组[3]，数组[6]，数组[8]所以->

```
 int array[10] = {0,0,0,0,0,0,0,0,0,0};
    int array[10] = {0,0,0,0,0,0,0,0,1,0};
    int array[10] = {0,0,0,0,0,0,0,0,2,0};
    int array[10] = {0,0,0,0,0,0,1,0,0,0};
    int array[10] = {0,0,0,0,0,0,1,0,1,0};
    int array[10] = {2,2,0,2,0,0,2,0,2,0}; 
```

p=3
类似 for() 循环的内容将变为 i=0,1,3,6,8，其中值为 i=help[i]!=0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:03:22.757

这是一个例子：

```
void increment(int array[], size_t size, int limit)
{
     do
     {
         if (++array[--size] != limit)
         {
             break;
         }
         array[size] = 0; // value overflow
     }
     while (size);
} 
```

用法：

```
int array[10];
memset(array, 0, sizeof(array));

increment(array, 10, 3); 
```

编辑：带过滤器的算法

```
void increment(int array[], int filter[], size_t size, int limit)
{
     do
     {
         if (!filter[--size])
         {
             // skip this position
             continue;
         }
         if (++array[size] != limit)
         {
             break;
         }
         array[size] = 0; // value overflow
     }
     while (size);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T13:59:14.753

我看到问题发生了一些变化，从向后递增数组到在基数（n）上加一……这是一个不同的问题。

```
int base = 3;

for( int i = (sizeof( array ) / sizeof( array[0] ))-1; i >= 0; )
{
    if( ++array[i] < base )
        break;
    else
        array[i--] = 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T14:02:21.323

这相当于简单地从自然数递增，从 0 到 (p+1) ^ arrayLength，以 p+1 为基数。

所以对于你的例子，

```
for (long i=0; i<4^10; i++)
{
   convert i to string in base (p+1), left- padding with 0s
   convert characters in string to comma separated array format and print 
} 
```

# postgresql - 如果表 A 不包含值，PostgreSQL 插入表 A 和表 B

> ID：15572120
> 
> 赞同：0
> 
> 时间：2013-03-22T13:55:59.113
> 
> 标签：postgresql, syntax, insert

您好我正在尝试在 postgreSql 表中执行以下操作，但语法有问题。

伪代码：

```
if (tableA.column1 does not contain value1)
{
    INSERT INTO tableA (column1, column2)
    VALUES value1, value2
}

// do this check even if the above already existed
if (tableB does not contain value1 and value3 in the same row)
{
    // it is ok if value1 and value3 already exist in the table, just not the same row
    INSERT INTO tableB (column1, column2)
    VALUES (value1, value3)
}

return true 
```

对此操作的实际语法的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:14:23.557

```
-- first insert:
insert into tablea (col1, col2)
select 1,2
from tablea
where not exists (select * from tablea where col1 = 1);

-- second insert (same logic to apply a conditional insert)
insert into tableb (col1, col2)
select 1,2
from tableb
where not exists (select * from tableb where col1 = 1 and col2 = 2); 
```

# jakarta-ee - apache velocity 拒绝与处女座合作

> ID：15572122
> 
> 赞同：1
> 
> 时间：2013-03-22T13:56:11.217
> 
> 标签：jakarta-ee, osgi, velocity, eclipse-virgo

我一直在解决一个项目的 virgo 配置问题，并且有一个库拒绝合作 - apache velocity。

因此，我的包的清单是（我已经更改或删除了一些内部库的名称）：

```
Manifest-Version: 1.0
Web-ContextPath: blah
Bundle-ManifestVersion: 2
Bundle-Name: thebundle
Bundle-SymbolicName: blahblah
Bundle-Version: 0.1.0
Bundle-Activator: blah.Activator
Import-Package: mydatasource,
 javax.crypto,
 javax.jms;version="[1.1.0,2.0.0)",
 javax.naming;version=0,
 javax.naming.directory;version=0,
 javax.servlet;version="[2.6.0,2.6.0]",
 javassist.util.proxy;version="[3.15.0.GA,3.15.0.GA]",
 javax.servlet.http;version="[2.6.0,2.6.0]",
 org.hibernate.validator;version="[4.2.0.Final,4.2.0.Final]",
 org.osgi.framework;version="[1.7.0,1.7.0]",
 org.osgi.util.tracker,
 org.slf4j.impl;version="[1.7.2,1.7.2]"
Export-Package: .... (stuff removed)
Bundle-ClassPath: .,
 WEB-INF/classes,
 WEB-INF/lib/velocity.jar <--- THIS IS APACHE VELOCITY
 WEB-INF/lib/blahblah.jar
Import-Bundle: org.eclipse.virgo.web.dm;version="3.5.0.RELEASE";resolution:=optional,
 a bunch of other bundles I've removed 
```

在长堆栈跟踪结束时出现以下异常：

```
Caused by: java.lang.ClassNotFoundException: org.apache.velocity.exception.VelocityException
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:501)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at org.eclipse.virgo.kernel.userregion.internal.equinox.KernelBundleClassLoader.loadClass(KernelBundleClassLoader.java:135) 
```

我已验证velocity.jar 已在我的包中发布。我对任何其他库都没有任何问题。它似乎看到了一些速度类，但没有看到其他类。我尝试将所有单独的速度包放在 Import-Package 下，但没有效果。我试过粗话，没有效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-30T19:09:44.307

您必须将包和包导入到您的包中，（在您可以下载速度包并部署到您的拾取文件夹之前）

```
see this example 

Import-Bundle:
 org.springframework.web.servlet;version="[3.0.0.RELEASE,3.0.5.RELEASE]"
 com.springsource.org.apache.velocity;version="[1.5.0,1.5.0]"

Import-Package:
 org.springframework.web.servlet.view.velocity;version="[3.0, 3.5)"

 Import-Bundle: com.springsource.javax.ejb;version="[3.0.0,3.0.0]",com.
 springsource.org.apache.catalina;version="[7.0.26,7.0.26]",com.spring
source.org.apache.commons.lang;version="[2.6.0,2.6.0]",com.springsour
ce.org.apache.velocity;version="[1.5.0,1.5.0]",org.eclipse.virgo.web.
dm;version="[3.0.3.RELEASE,3.0.3.RELEASE]",org.springframework.contex
t;version="[3.0.5.RELEASE,3.0.5.RELEASE]",org.springframework.web;ver
 sion="[3.0.5.RELEASE,3.0.5.RELEASE]",**org.springframework.web.servlet;
version="[3.0.0.RELEASE,3.0.5.RELEASE]"**
Bundle-Vendor: Roshka
Bundle-Version: 1.0.0
Build-Jdk: 1.6.0_37
Bundle-ManifestVersion: 2
Bundle-SymbolicName: helloworld-bundlor
Import-Package: javax.ejb,org.apache.commons.lang,org.apache.naming.ja
va,org.apache.velocity,org.apache.velocity.servlet,org.eclipse.virgo.
web.dm;version="[3.0.0, 4.0.0)",org.springframework.beans.factory.ann
otation;version="[3.0, 3.5)",org.springframework.context,org.springfr
amework.core.io;version="[3.0, 3.5)",org.springframework.ejb.access,o
rg.springframework.stereotype;version="[3.0, 3.5)",org.springframewor
k.web.bind.annotation;version="[3.0, 3.5)",org.springframework.web.co
ntext;version="[3.0, 3.5)",org.springframework.web.servlet;version="[
  3.0, 3.5)",org.springframework.web.servlet.view;version="[3.0, 3.5)",
**org.springframework.web.servlet.view.velocity;version="[3.0, 3.5)",or 
g.springframework.web.servlet.mvc.annotation;version="[3.0, 3.5)" 
```

# android - HTTPUrlConnection 中的 HTTP POST 数据未设置？

> ID：15572126
> 
> 赞同：2
> 
> 时间：2013-03-22T13:56:22.727
> 
> 标签：android, django, http, rest, tastypie

我正在 android 中创建一个 HTTPUrlConnection 并准备它的帖子，如下所示

```
urlConnection = (HttpURLConnection) url.openConnection();

urlConnection.setRequestProperty("content-type", "application/json");
byte [] encoded = Base64.encode((username+":"+password).getBytes("UTF-8"), Base64.DEFAULT); 
//Basic Authorization               
urlConnection.setRequestProperty("Authorization", "Basic "+ new String(encoded, "UTF-8"));
urlConnection.setDoInput(true);
urlConnection.setDoOutput(true);

//This gets implicitly set when DoOutput is True, but still let it be               
urlConnection.setRequestMethod("POST");

//Required for POST not to return 404 when used on with a host:port combination
//http://stackoverflow.com/questions/5379247/filenotfoundexception-while-getting-the-inputstream-object-from-httpurlconnectio
urlConnection.setRequestProperty("User-Agent","Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:17.0) Gecko/20100101 Firefox/17.0");
urlConnection.setRequestProperty("Accept","*/*"); 
```

然后我准备 JSON 并将其写入`OutputStream`连接的

```
JSONObject jsonObject = new JSONObject();
jsonObject.put("key1", "value1");
jsonObject.put("key2", "value2");

outputStreamWriter = urlConnection.getOutputStream ();
outputStreamWriter.write(jsonObject.toString().getBytes());

finally {
    if (outputStreamWriter != null) try { outputStreamWriter.close(); } catch (IOException logOrIgnore) {}
            } 
```

当我发出请求时，我的状态为 500，因为我的服务器收到一个空的 POST 数据，它是无效的 json。

在 Web 浏览器和 curl 上也是如此。GET 在具有相同参数的 android 上工作。我错过了什么？应该为 POST 请求设置的方式参数的顺序有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:14:13.683

我能够让它工作。下面的代码片段

**创建要发送的数据，注意所需的转义引号**

```
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(3);

nameValuePairs.add(new BasicNameValuePair("\A\"", "\"/api/v1/a/1/\""));

nameValuePairs.add(new BasicNameValuePair("\"B\"", "\"/api/v1/b/1/\""));

nameValuePairs.add(new BasicNameValuePair("\"C\"", "\"Hello from Android\"")); 
```

**创建客户端并设置标头**

```
HttpClient httpclient = new DefaultHttpClient();

HttpPost httppost = new HttpPost(urlToPost);

httppost.setHeader("content-type", "application/json"); 
```

**设置授权标头**

```
String encoded = "Basic " + Base64.encodeToString((username+":"+password).getBytes("UTF-8"), Base64.URL_SAFE|Base64.NO_WRAP);

httppost.setHeader("Authorization",encoded); 
```

**将数据字符串化并将其设置为 POST 请求中的 HTTP 参数**

```
StringEntity entity = new StringEntity(getQueryJSON(nameValuePairs));

httppost.setEntity(entity);

HttpResponse response = httpclient.execute(httppost);

if(response!=null){

InputStream in = response.getEntity().getContent(); //Get the data in the entity

readStream(in);

} 
```

**将 JSON 编码为字符串** private String getQueryJSON(List params) 的实用函数抛出 UnsupportedEncodingException

```
{

    StringBuilder result = new StringBuilder();

    boolean first = true;

    for (NameValuePair pair : params)

    {

    if (first){

        first = false;

        result.append("{");

    }else

        result.append(",");

    result.append(pair.getName());

    result.append(":");

    result.append(pair.getValue());

    }

    result.append("}");

    return result.toString();

} 
```

# active-directory - 不同的活动目录

> ID：15572136
> 
> 赞同：-1
> 
> 时间：2013-03-22T13:56:58.923
> 
> 标签：active-directory, windows-server-2008

我想在我的 windows server 2008 上安装 Active Directory，但我不知道这五个 Active Directory 有什么区别：

> *   证书服务
> *   域服务
> *   联合服务
> *   轻量级目录服务
> *   权限管理服务

有人可以解释每一点以及与其他点的区别吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:07:58.173

您可能知道，这些是用于非常不同目的的非常不同的服务。您对这个特定的 Windows Server 2008 安装的目标是什么？这些信息可能会帮助人们引导您走上正确的道路。以下内容太长，无法发表评论，但我已尝试从 Microsoft 中提取这五项服务的定义，如下所示：

[证书服务](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376539%28v=vs.85%29.aspx)是在 Windows 服务器操作系统上运行的服务，它通过 RPC 或 HTTP 等传输接收对新数字证书的请求。它根据自定义或特定于站点的策略检查每个请求，为要颁发的证书设置可选属性，并颁发证书。证书服务允许管理员向证书撤销列表 (CRL) 添加元素，并定期发布签名的 CRL。

[域服务](http://msdn.microsoft.com/en-us/library/ee707373%28v=vs.91%29.aspx)是封装 WCF RIA 服务应用程序的业务逻辑的 Windows Communication Foundation (WCF) 服务。域服务以服务层的形式公开了一组相关的操作。定义域服务时，您指定通过域服务允许的数据操作。

[联合服务](http://msdn.microsoft.com/en-us/library/bb897402.aspx)是一种基于标准的服务，允许在受信任的业务合作伙伴（称为联合）之间通过外联网安全共享身份信息。当用户需要从其联合合作伙伴之一访问 Web 应用程序时，用户自己的组织负责对用户进行身份验证，并以“声明”的形式向托管 Web 应用程序的合作伙伴提供身份信息。托管合作伙伴使用其信任策略将传入声明映射到其 Web 应用程序可以理解的声明，该应用程序使用声明来做出授权决策。

[轻量级目录服务](http://msdn.microsoft.com/en-us/library/bb897400.aspx)是一种轻量级目录访问协议 (LDAP) 目录服务，设计用于支持目录的应用程序。启用目录的应用程序是使用目录而不是数据库或平面文件来存储数据的应用程序。

[Active Directory 权限管理服务](http://technet.microsoft.com/en-us/library/cc771234%28v=ws.10%29.aspx)(AD RMS) 是一种信息保护技术，可与启用了 AD RMS 的应用程序一起使用，以帮助保护数字信息免遭未经授权的使用。内容所有者可以定义谁可以打开、修改、打印、转发或对信息执行其他操作。

# node.js - 使用猫鼬（Node.js）创建动态模式？

> ID：15572137
> 
> 赞同：1
> 
> 时间：2013-03-22T13:56:59.507
> 
> 标签：node.js, mongodb, mongoose

我正在尝试使用 mongoose 在 mongoDB 中创建动态模式。我正在使用以下代码

```
var http = require('http');
var mongoose = require('mongoose'); 
var data = '';
var options = { 
   host: '127.0.0.1', 
   port: 1000, 
   path: '/service',
}; 
var dataDB = mongoose.createConnection('mongodb://localhost/dataDB');
var Schema = mongoose.Schema;
var dataSchema = new Schema({id:String},{strict:false});

http.get(options, function(res) { 
    if (res.statusCode == 200) { 

        res.on('data', function (chunk) { 
            data += chunk;
        });

        res.on('end', function (chunk) { 
            console.log(data);
            var obj = JSON.parse(data);
            var dataLoaddata = dataDB.model('dataSchema', dataSchema, 'data_Load');

            for(var i=0;i<3;i++) {
                console.log(obj.empDetails[i].empName);
                var data1 = 'name';
                var item1 = dataDB.model('data_Load', dataSchema);
                item1.update( { 'id' : i },{data1 : obj.empDetails[i].empName}, { upsert: true }, function (err, numberAffected, raw) {
                    if (err) return handleError(err);
                    console.log('The number of updated documents was %d', numberAffected);
                    console.log('The raw response from Mongo was ', raw);
                });
            }
        });
    } else { 
        console.log("The site is down!"); 
    }
}).on('error', function (e) { 
    console.log("There was an error: " + e.message); 
}); 
```

以下是我从特定服务获得的响应

```
{
    empDetails: [
        {
            empId: "1",
            empName: "Manoj"
        },
        {
            empId: "2",
            empName: "kumar"
        },
        {
            empId: "3",
            empName: "hello"
        }
    ]
} 
```

我正在尝试在更新操作中动态创建键名，如下所示

```
var data1 = 'name';
var item1 = dataDB.model('data_Load', dataSchema);
item1.update( { 'id' : i },{`data1` : obj.empDetails[i].empName}, { upsert: true }, function (err, numberAffected, raw){
                    if (err) return handleError(err);
                    console.log('The number of updated documents was %d', numberAffected);
                    console.log('The raw response from Mongo was ', raw);
                });
            } 
```

但是变量没有得到解析并作为列插入（意思是说 data1 的值没有被传递）。它只是作为'data1'插入。我需要传递的值。谁能帮我解决这个问题？

# html - 直接同级选择器误解

> ID：15572141
> 
> 赞同：2
> 
> 时间：2013-03-22T13:57:15.693
> 
> 标签：html, css

我有以下 HTML：

```
<div id="player">
    <div class="frame" data-aspect="4:3">
    </div>

    <div class="seeker">
    </div>

    <div class="controls">
    </div>

    <div class="extra-controls">
    </div>
</div> 
```

我试图使用`.seeker`以下选择器进行访问：

```
#player .frame + #player .seeker
{
    margin-top: 1em;

    height: 50px;

    background-color: #575757;

    color: white;
} 
```

哪个[没有样式`.seeker`元素（链接到第 1 号小提琴）](http://jsfiddle.net/psycketom/Ea3eF/)，没有`#player` [它的地方（链接到第 2 号小提琴）](http://jsfiddle.net/psycketom/Ea3eF/1/)：

```
#player .frame + .seeker
{
    margin-top: 1em;

    height: 50px;

    background-color: #575757;

    color: white;
} 
```

我很困惑，因为直接选择，没有`+` [它选择元素（链接到第 3 号小提琴）](http://jsfiddle.net/psycketom/Ea3eF/2/)，所以，有一个匹配的`#player .seeker`.

**注意：**每个小提琴都有几乎相同的结果，但是它们的 CSS 有点不同。

这里发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:00:46.643

`#player .frame + #player .seeker`不会工作，因为它正在寻找一个#player，它是**另一个**#player 中.frame 的兄弟。

你想要的可能是`#player .frame + .seeker`，它将选择一个 .seeker，它是 #player 中 .frame 的紧随其后的兄弟。

查看[http://meyerweb.com/eric/articles/webrev/200007a.html](http://meyerweb.com/eric/articles/webrev/200007a.html)了解更多示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:00:01.440

兄弟选择器相对于该点的选择器。它不会再次从文档顶部开始。所以`#player .frame + .seeker`是正确的。指定`#player`就像打字一样`#player #player ...`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T14:05:59.000

考虑以下：

```
<div class="parent">
  <div class="child">
  </div>
  <div class="sibling">
    FOO
  </div>
  <div class="child">
  </div>
  <div class="parent">
    <div class="sibling">
      BAR
    </div>
  </div>
</div> 
```

对于这个结构，`.parent .child + .sibling`选择器会找到用'FOO'填充的那个。但是选择器写的和你的一样 - `.parent .child + .parent .sibling`- 会找到一个充满“BAR”（[**证明**](http://jsfiddle.net/r3Zvs/)）的选择器。

关键是，`+`它只是一个运算符——就像`>`和`（一个空格）一样。它不会“分组”其操作数。`

# objective-c - NSFileManager 线程安全吗？

> ID：15572142
> 
> 赞同：13
> 
> 时间：2013-03-22T13:57:22.813
> 
> 标签：objective-c, cocoa-touch, concurrency, grand-central-dispatch, nsfilemanager

是否可以通过 defaultManager 获取 NSFileManager 的实例并在主队列之外使用它？

这段代码可以吗？

```
dispatch_queue_t q = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);

dispatch_async(q, ^{

    NSFileManager *fm = [NSFileManager defaultManager];

}); 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-22T13:59:54.267

来自[NSFileManager 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsfilemanager_Class/Reference/Reference.html)：

> 共享的 NSFileManager 对象的方法可以安全地从多个线程中调用。但是，如果您使用委托来接收有关移动、复制、删除和链接操作状态的通知，您应该创建文件管理器对象的唯一实例，将您的委托分配给该对象，并使用该文件管理器来启动你的操作。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-22T13:59:47.707

从[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html)中：

> 共享的 NSFileManager 对象的方法可以安全地从多个线程中调用。但是，如果您使用委托来接收有关移动、复制、删除和链接操作状态的通知，您应该创建文件管理器对象的唯一实例，将您的委托分配给该对象，并使用该文件管理器来启动你的操作。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-22T14:00:50.637

直接来自[`NSFileManager`文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html)：

> **线程注意事项**
> 
> 共享的 NSFileManager 对象的方法可以安全地从多个线程中调用。但是，如果您使用委托来接收有关移动、复制、删除和链接操作状态的通知，您应该创建文件管理器对象的唯一实例，将您的委托分配给该对象，并使用该文件管理器来启动你的操作。

# jquery - 悬停时显示侧面菜单

> ID：15572144
> 
> 赞同：0
> 
> 时间：2013-03-22T13:57:25.563
> 
> 标签：jquery, hover

我有一个隐藏在屏幕外的简单侧边菜单，当它悬停在特定区域时我想显示它。它工作得很好，但是如果鼠标移到菜单上，它会认为它超出了该区域并返回。然后，一旦发生这种情况，它将与我想要的交互相反：

```
<div class="menu-hover">
  Hover Mouse Here
</div>
<div class="side-menu">
  <div class="btn-group btn-group-vertical">
    <button id="metro" class="btn">Metro</button>
    <button id="list" class="btn">List</button>
    <button id="grid" class="btn">Grid</button>
  </div>
</div> 
```

CSS：

```
.side-menu {
    background-color: #333;
    border: 1px solid #444;
    color: #fff;
    display: block;
    font-size: 15px;
    font-weight: 700;
    left: -96px;
    padding: 15px;
    text-decoration: none;
    top: 0;
    height: 100%;
    position: fixed;
    z-index: 5;
    cursor: pointer;
} 
```

JS：

```
$(".menu-hover").hover(
  function () {
    var $lefty = $(".side-menu");
    $lefty.animate({
        left: parseInt($lefty.css('left')) < -95 ?
        $lefty.css('left') == 0 :
        -96
    });
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:05:18.030

工作代码看起来像这样

```
 $(".menu-hover").on({
    'mouseenter': function (e) {
        e.stopPropagation();
                    var $lefty = $(".side-menu");
                    $lefty.animate({
                     left: parseInt($lefty.css('left')) < -95 ?
                     $lefty.css('left') == 0 :
                        -96})
                   }
});
$('.menu-hover').on({
    'mouseleave': function(){
        var $lefty = $(".side-menu");
            $lefty.animate({
            left: -96
        })
    }
}) 
```

关于 jsfiddle 的示例：http: [//jsfiddle.net/glenswift/7UQDM/1/](http://jsfiddle.net/glenswift/7UQDM/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:59:06.763

尝试这个：

工作演示[**在这里**](http://jsfiddle.net/UpaS7/1/)

```
$(".menu-hover, .side-menu").mouseenter(function (){
    $(".side-menu").animate({
        left: 0
    })
});

$('.side-menu').mouseleave(function(){
    $(this).animate({
        left: -96
    })
}); 
```

# java - 在 PreparedStatement 中调用 UPDATE 时发生插入

> ID：15572145
> 
> 赞同：0
> 
> 时间：2013-03-22T13:57:26.367
> 
> 标签：java, sql, sql-update, prepared-statement, sql-insert

对不起我的愚蠢，但我在这里发生了一些奇怪的事情。我正在为 AS/400 开发 DB2 数据库，并使用 java 中的一些准备好的语句编写一些 SQL。截至目前，我正在提取 49828 条测试记录。当我运行 pstate.executeUpdate() 时，每次运行 executeUpdate() 时它实际上都返回“2”。不知道为什么。

这是方法：

```
private void loadBenefitsAndDividendsData() {
    PreparedStatement pstate;
    String benefitTableName = "PFCASBENE";
    String dividendTableName = "PFCASDVACM";

    String sqlSelect = "SELECT "+ benefitTableName + ".FPLAN, " + 
        benefitTableName + ".FPSFLG, " + benefitTableName + 
        ".FPLAMT, " + benefitTableName + ".FUNITS, " + 
        dividendTableName + ".DAPAMT, " + otherSchema + "." + 
        dailyTableName + ".DBPOLN FROM " + benefitTableName + 
        " INNER JOIN " + dividendTableName + 
        " ON " + benefitTableName + ".FPOLNO = " + dividendTableName + 
        ".DAPOLN" + 
        " INNER JOIN " + otherSchema + "." + dailyTableName + 
        " ON " + dividendTableName + ".DAPOLN = " + 
        otherSchema + "." + dailyTableName + ".DBPOLN"; 

    String sqlUpdate = "UPDATE " + otherSchema + "." + dailyTableName + 
        " SET DBAPLN = ?, DBASTA = ?, DBAFAC = ?, DBAUNI = ? , DBAPUA = ? WHERE DBPOLN = ?";

    String policyNumber,dbapln, dbasta;
    BigDecimal dbauni,dbafac, dbapua;

    try {
        pstate = dataDataSource.getConnection().prepareStatement(sqlUpdate);
        ResultSet rSet = dataDataSource.getConnection().
            prepareStatement(sqlSelect).executeQuery();
        int count = 0;
        while (rSet.next()) {

            policyNumber = rSet.getString("DBPOLN");
            dbapln = rSet.getString("FPLAN");
            dbasta = rSet.getString("FPSFLG");
            dbafac = rSet.getBigDecimal("FPLAMT");
            dbauni = rSet.getBigDecimal("FUNITS");
            dbapua = rSet.getBigDecimal("DAPAMT");

            pstate.setString(1, dbapln);
            pstate.setString(2, dbasta);
            pstate.setBigDecimal(3, dbafac);
            pstate.setBigDecimal(4, dbauni);
            pstate.setBigDecimal(5,dbapua);
            pstate.setString(6, policyNumber);

            count += pstate.executeUpdate();
        }

        rSet.getStatement().close();
        pstate.close();

    } catch (SQLException sqlEx) {
        logger.error("SQLException was thrown:  " + sqlEx);
    }
    logger.info(getClass().getName() + "Has successfully loaded the PFCASBENE fields into DAILY01.");
} 
```

当我附加调试器并遵循“计数”时，它每次增加 2。当我对表记录进行初始计数时，我得到了正确的数量，即 49828，在更新之后，我得到了 99656，这恰好是两倍，这表明更新语句实际上是在插入行。

String sqlSelect 返回带有 2 个内部连接的 3 个数据表，我得到了正确的结果。

sqlUpdate 只是获取 3 个连接的 ResultSet 并将它们推送到准备好的语句中，该语句使用结果集中的数据更新 49828 条记录。

我不确定为什么要插入两次，而不是简单地更新。谁能在这里指出我正确的方向？

提前致谢，

温馨问候，

乔什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:47:40.533

事实证明，我最初的预感是正确的，即有一些开放资源在 as/400 数据文件 (DB2) 上设置了文件锁定。尽管我尽了最大努力变得可爱和花哨，但只需将调用者方法重写为我的直接 sql 语句，这被证明是解决解决方案的最佳（和最快）方法。

# java - Spring MVC：接收单选按钮值

> ID：15572149
> 
> 赞同：2
> 
> 时间：2013-03-22T13:57:37.537
> 
> 标签：java, spring, jakarta-ee, spring-mvc

我需要在我的控制器上接收未知数量的单选按钮值。

单选按钮已生成并且可能会有所不同......所以我需要一种方法来接收用户发送的数量。我怎样才能做到这一点？

查看（使用速度）：

```
...
#foreach( $f in $model.fields )
<input type="radio" name="rd_$f.name" value="S" checked="checked"/> S
<input type="radio" name="rd_$f.name" value="C" /> C
#end
... 
```

这将生成 X 个单选按钮集...我需要在我的控制器上接收它：

```
@RequestMapping(value = "/{e}/{id1}/{id2}", method = RequestMethod.POST)
    public ModelAndView salvar(@PathVariable(value = "e") String e,
            @PathVariable(value = "id1") Long id1, 
            @PathVariable(value = "id2") Long id2,
            //MY RADIO BUTTONS ARRAY HERE!
      ) {

          ...

    } 
```

**更新：**

生成的 html 类似于：

```
...
<input type="radio" name="rd_1" value="S" checked="checked"/> S
<input type="radio" name="rd_1" value="C" /> C
...
<input type="radio" name="rd_2" value="S" checked="checked"/> S
<input type="radio" name="rd_2" value="C" /> C
...
<input type="radio" name="rd_n" value="S" checked="checked"/> S
<input type="radio" name="rd_n" value="C" /> C
... 
```

所以我不能只绑定到控制器上的 [] ，对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T14:01:49.833

`@RequestParam(value="radio_name") String[] radioCheckedValues`您可以在 spring 控制器中使用作为另一个属性进行绑定。

**编辑** 服务器可以知道来自客户端的唯一方法是使用名称。您可以使用`request.getParameterNames`.

伪代码...

```
List<String> values = new ArrayList();
Enumeration<String> enumeration = req.getParameterNames();
while (enumeration.hasMoreElements()) {
    String parameterName = (String) enumeration.nextElement();
    if(parameterName.startsWith("rd_")) {
        values.add(req.getParameter(parameterName));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:05:55.240

在名称中使用`[]`将每个单选框分组到一个数组中：

```
#foreach( $f in $model.fields )
<input type="radio" name="radio[]" value="S" checked="checked"/> S
<input type="radio" name="radio[]" value="C" /> C
#end 
```

然后在控制器中读取这个数组。

编辑：

要检索值，请使用（在每个数组上循环）：

```
String[] params = request.getParameterValues("rd_n"); 
```

# r - 将 geom_ribbon 添加到 reshape2 数据框

> ID：15572151
> 
> 赞同：0
> 
> 时间：2013-03-22T13:57:48.597
> 
> 标签：r, ggplot2

我有一个格式为的数据框（df）

```
 Date          Cs.137 In.111 I.123  I.131     X99m.Tc min    max
1 2013-01-03    8.2    6.49   6.97   10.5      15      8.294  7.87930
2 2013-01-04    8.1    6.47   6.94   10.5      15      8.293  7.87835
3 2013-01-07    8.1    6.48   6.96   10.5      15      8.292  7.87740
4 2013-01-08    8.1    6.43   6.91   10.5      15      8.291  7.87645
5 2013-01-09    8.1    6.49   6.92   10.5      15      8.291  7.87645
6 2013-01-10    8.1    6.51   6.95   10.5      15      8.290  7.87550 
```

我想将多个日期内各种同位素的测量活动绘制为散点图。为此，我重塑了数据

`plot_Data <- melt(df[,c(1,2:6)], id="Date", value.name="Activity", variable.name="Isotope")`

```
 Date        Isotope     Activity
1 2013-01-03  Cs.137      8.2
2 2013-01-04  Cs.137      8.1
3 2013-01-07  Cs.137      8.1
4 2013-01-08  Cs.137      8.1
5 2013-01-09  Cs.137      8.1
6 2013-01-10  Cs.137      8.1 
```

然后我使用`melt`from`reshape2`

`p <- ggplot(plot_Data, aes(x=Date, y=Activity, col=Isotope)) + geom_point()+ theme_bw()` ![在此处输入图像描述](../Images/a1db1692468b99c31ce7fc10e4931634.png)

但是，我还想显示一个 geom_ribbon 以突出显示 Cs-137 活动的允许范围（由原始数据框中的 min 和 max 给出）。我可以使用自己创建这样的功能区

`m <- ggplot(df) + geom_ribbon(data=df, aes(x=Date,ymin=min, ymax = max), alpha = 0.2, fill='blue')`

但是，这是使用原始帧 pre_melted 数据帧。

当我尝试时，`p + geom_ribbon(data=df, aes(x=Date,ymin=min, ymax = max), alpha = 0.2, fill='blue')`我收到错误消息`Error in eval(expr, envir, enclos) : object 'Activity' not found`

如何在原始图像上叠加色带？

这是可以重建剩余数据的原始数据帧 `structure(list(Date = structure(c(15708, 15709, 15712, 15713, 15714, 15715, 15716, 15719, 15720, 15721, 15722, 15723, 15726, 15727, 15729, 15730, 15733, 15734, 15735, 15736, 15740, 15741, 15743, 15747, 15748, 15749, 15750, 15751, 15754, 15755, 15756, 15757, 15758, 15761, 15762, 15764, 15765, 15768, 15769, 15770, 15771, 15772), class = "Date"), Cs.137 = c(8.2, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.2, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8, 8.2, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1, 8.1), In.111 = c(6.49, 6.47, 6.48, 6.43, 6.49, 6.51, 6.5, 6.47, 6.48, 6.4, 6.48, 6.48, 6.48, 6.49, 6.49, 6.47, 6.48, 6.48, 6.5, 6.47, 6.49, 6.55, 6.46, 6.49, 6.48, 6.48, 6.46, 6.48, 6.49, 6.44, 6.49, 6.46, 6.45, 6.46, 6.46, 6.43, 6.49, 6.47, 6.45, 6.43, 6.44, 6.44), I.123 = c(6.97, 6.94, 6.96, 6.91, 6.92, 6.95, 6.93, 6.92, 6.93, 7, 6.97, 6.96, 6.96, 6.94, 6.98, 6.97, 6.95, 6.95, 6.94, 6.96, 6.97, 7.01, 6.92, 7, 6.98, 6.97, 6.91, 6.99, 6.95, 6.88, 6.96, 6.91, 6.91, 6.93, 6.94, 6.94, 6.97, 6.93, 6.93, 6.93, 6.96, 6.94), I.131 = c(10.5, 10.5, 10.5, 10.5, 10.5, 10.5, 10.5, 10.5, 10.5, 10.8, 10.5, 10.6, 10.5, 10.5, 10.5, 10.5, 10.5, 10.5, 10.5, 10.5, 10.5, 10.6, 10.5, 10.5, 10.5, 10.5, 10.5, 10.5, 10.5, 10.5, 10.5, 10.5, 10.5, 10.5, 10.5, 10.5, 10.5, 10.5, 10.4, 10.5, 10.4, 10.5), X99m.Tc = c(15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15.1, 15, 15, 15.1, 15, 15, 15, 15, 15.1, 15, 15.1, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 14.9, 15, 15, 15, 15, 15, 15), Exp_Act = c(8.294, 8.293, 8.292, 8.291, 8.291, 8.29, 8.29, 8.288, 8.288, 8.287, 8.287, 8.286, 8.285, 8.284, 8.283, 8.283, 8.281, 8.28, 8.28, 8.279, 8.277, 8.277, 8.276, 8.274, 8.273, 8.273, 8.272, 8.272, 8.27, 8.27, 8.269, 8.269, 8.268, 8.266, 8.266, 8.265, 8.264, 8.263, 8.262, 8.262, 8.261, 8.261), Exp_Act_0.95 = c(7.8793, 7.87835, 7.8774, 7.87645, 7.87645, 7.8755, 7.8755, 7.8736, 7.8736, 7.87265, 7.87265, 7.8717, 7.87075, 7.8698, 7.86885, 7.86885, 7.86695, 7.866, 7.866, 7.86505, 7.86315, 7.86315, 7.8622, 7.8603, 7.85935, 7.85935, 7.8584, 7.8584, 7.8565, 7.8565, 7.85555, 7.85555, 7.8546, 7.8527, 7.8527, 7.85175, 7.8508, 7.84985, 7.8489, 7.8489, 7.84795, 7.84795), Exp_Act_1.05 = c(8.7087, 8.70765, 8.7066, 8.70555, 8.70555, 8.7045, 8.7045, 8.7024, 8.7024, 8.70135, 8.70135, 8.7003, 8.69925, 8.6982, 8.69715, 8.69715, 8.69505, 8.694, 8.694, 8.69295, 8.69085, 8.69085, 8.6898, 8.6877, 8.68665, 8.68665, 8.6856, 8.6856, 8.6835, 8.6835, 8.68245, 8.68245, 8.6814, 8.6793, 8.6793, 8.67825, 8.6772, 8.67615, 8.6751, 8.6751, 8.67405, 8.67405)), row.names = c(NA, -42L), .Names = c("Date", "Cs.137", "In.111", "I.123", "I.131", "X99m.Tc", "Exp_Act", "Exp_Act_0.95", "Exp_Act_1.05"), class = "data.frame")`

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T14:16:12.917

首先，您发布的数据没有名为`min`and的列`max`，但是我找到了相关的列并更改了名称。然后，您可以使用这样的聚合为功能区制作第二个 df ......

```
mydf <- aggregate( cbind(min , max) ~ Date, data = df , FUN = mean ) 
```

然后，您可以使用它来绘制数据，如下所示......

```
p <- ggplot( NULL )+
  geom_point( data = plot_Data , aes( x = Date , y = value , col = variable ) )+
  geom_ribbon( data = mydf , aes( x = Date , ymin = min , ymax = max ), alpha = 0.2 , fill='blue' )+
  theme_bw()

print(p) 
```

![在此处输入图像描述](../Images/a049f3a046bf03a8238c6140af2a91b9.png)

这是你所期待的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:35:02.400

问题是（在您取消映射这两种美学之后）`ggplot`您的列名`min`和`max`. 这些恰好也是函数。只需将它们重命名为`ymin`and `ymax`。

我应该补充一点，我不完全确定为什么 ggplot 会被您的完整数据上的列名弄糊涂，但不是当我只是复制+粘贴您的缩写数据时（尽管在后一种情况下，结果图有点荒谬）。但是偶尔奇怪的参数解析问题是你在 ggplot2-land 中必须忍受的事情。

# mysql - Mysql查询分组问题请帮助我..？

> ID：15572152
> 
> 赞同：0
> 
> 时间：2013-03-22T13:57:53.790
> 
> 标签：mysql, sql, group-by

我的桌子是：

```
CREATE TABLE IF NOT EXISTS `maf_game` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(250) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3 ;

INSERT INTO `maf_game` (`id`, `name`) VALUES
(1, 'Finders Keepers'),
(2, 'My american farm');

CREATE TABLE IF NOT EXISTS `maf_game_stats` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `userid` varchar(100) NOT NULL,
  `sessionid` varchar(100) NOT NULL,
  `gid` int(11) NOT NULL,
  `qid` int(11) NOT NULL,
  `result` varchar(50) NOT NULL,
  `accesstime` datetime NOT NULL,
  PRIMARY KEY (`id`)
);

INSERT INTO `maf_game_stats` (`id`, `userid`, `sessionid`, `gid`, `qid`, `result`, `accesstime`) VALUES
(1, '514c550391709', 'dicuu6e5bhv9j8com9fq38ipe2', 1, 1, '1', '2013-03-22 18:26:41'),
(2, '514c550391709', 'dicuu6e5bhv9j8com9fq38ipe2', 1, 2, '1', '2013-03-22 18:26:43'),
(3, '514c5521c63e1', 'f3ffkgsdejo9luulgfn2i5lv60', 1, 1, '1', '2013-03-22 18:27:15'),
(4, '514c5521c63e1', 'f3ffkgsdejo9luulgfn2i5lv60', 1, 2, '1', '2013-03-22 18:27:17'),
(5, '514c5521c63e1', 'f3ffkgsdejo9luulgfn2i5lv60', 1, 3, '0', '2013-03-22 18:27:21'),
(6, '514c5521c63e1', 'f3ffkgsdejo9luulgfn2i5lv60', 1, 4, '1', '2013-03-22 18:27:23'),
(7, '514c5521c63e1', 'f3ffkgsdejo9luulgfn2i5lv60', 1, 5, '1', '2013-03-22 18:28:28'),
(8, '514c5521c63e1', 'f3ffkgsdejo9luulgfn2i5lv60', 2, 1, '1', '2013-03-22 18:29:01'),
(9, '514c5521c63e1', 'f3ffkgsdejo9luulgfn2i5lv60', 2, 2, '1', '2013-03-22 18:29:02'),
(10, '514c5521c63e1', 'f3ffkgsdejo9luulgfn2i5lv60', 2, 3, '1', '2013-03-22 18:29:07'),
(11, '514c5521c63e1', 'f3ffkgsdejo9luulgfn2i5lv60', 2, 4, '0', '2013-03-22 18:29:09'),
(12, '514c5521c63e1', 'f3ffkgsdejo9luulgfn2i5lv60', 2, 5, '1', '2013-03-22 18:29:10'),
(13, '514c58b1372e7', 'e70qhplor1v1ht2o3f17e2l3j3', 2, 1, '0', '2013-03-22 18:42:22'),
(14, '514c58b1372e7', 'e70qhplor1v1ht2o3f17e2l3j3', 2, 2, '0', '2013-03-22 18:42:24'),
(15, '514c58b1372e7', 'e70qhplor1v1ht2o3f17e2l3j3', 2, 3, '0', '2013-03-22 18:42:26'),
(16, '514c58b1372e7', 'e70qhplor1v1ht2o3f17e2l3j3', 2, 4, '0', '2013-03-22 18:42:27'),
(17, '514c58b1372e7', 'e70qhplor1v1ht2o3f17e2l3j3', 2, 5, '0', '2013-03-22 18:42:29'),
(18, '514c5baf5ef35', 'hn7q2cd4575864pm6etkmkdfh2', 2, 1, '1', '2013-03-22 18:55:07'),
(19, '514c5baf5ef35', 'hn7q2cd4575864pm6etkmkdfh2', 2, 2, '1', '2013-03-22 18:55:08'),
(20, '514c5baf5ef35', 'hn7q2cd4575864pm6etkmkdfh2', 2, 3, '1', '2013-03-22 18:55:14'),
(21, '514c5baf5ef35', 'hn7q2cd4575864pm6etkmkdfh2', 2, 4, '1', '2013-03-22 18:55:15'),
(22, '514c5c8f5b55e', 'a36enh6d78dm8cao4a3ibqj4s0', 1, 1, '1', '2013-03-22 18:58:50'),
(23, '514c5c8f5b55e', 'a36enh6d78dm8cao4a3ibqj4s0', 1, 2, '1', '2013-03-22 18:58:52'); 
```

我的书面查询是：

```
SELECT D.gid, D.qid, D.result, COUNT(D.id) AS staus FROM 
(SELECT MIN(id) AS id, userid, gid, qid, result, accesstime FROM maf_game_stats WHERE gid=2 GROUP BY userid, qid) AS D 
GROUP BY D.qid, D.result 
```

以上查询结果：

```
gid qid result  staus
2   1   0       1
2   1   1       2
2   2   0       1
2   2   1       2
2   3   0       1
2   3   1       2
2   4   0       2
2   4   1       1
2   5   0       1
2   5   1       1 
```

它工作正常，但我想要的结果就像 Ex：

1.  有多少学生在第一次尝试时每个问题都正确/错误？

结果

```
--------------------------------------------
gid qid Correct Incorrect
-------------------------------------------
1   1   3      10       
1   2   8      1        
1   3   2      5
1   4   1      7    
1   5   4      3 
```

请任何建议....？

谢谢！瓦桑斯
22MR2013

对不起，我忘了.....谁第一次尝试

1.  有多少学生在第一次尝试时每个问题都正确/错误？

```

如果不存在“maf_game”，则创建表（
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(250) NOT NULL,
  主键（`id`）
) ;

插入“maf_game”（“id”、“name”）值
（1，“发现者守护者”），
（2，“我的美国农场”），
（3，“管理”），
（4，“收获这个”）；

如果不存在“maf_game_stats”，则创建表（
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `userid` varchar(100) NOT NULL,
  `sessionid` varchar(100) NOT NULL,
  `gid` int(11) 非空，
  `qid` int(11) 非空，
  `result` varchar(50) NOT NULL,
  `accesstime` 日期时间不为空，
  主键（`id`）
) ;

插入`maf_game_stats`（`id`、`userid`、`sessionid`、`gid`、`qid`、`result`、`accesstime`）值
(1, '514c550391709', 'dicuu6e5bhv9j8com9fq38ipe2', 1, 1, '1', '2013-03-22 18:26:41'),
(2, '514c550391709', 'dicuu6e5bhv9j8com9fq38ipe2', 1, 2, '1', '2013-03-22 18:26:43'),
(3, '514c5521c63e1', 'f3ffkgsdejo9luulgfn2i5lv60', 1, 1, '1', '2013-03-22 18:27:15'),
(4, '514c5521c63e1', 'f3ffkgsdejo9luulgfn2i5lv60', 1, 2, '1', '2013-03-22 18:27:17'),
(5, '514c5521c63e1', 'f3ffkgsdejo9luulgfn2i5lv60', 1, 3, '0', '2013-03-22 18:27:21'),
(6, '514c5521c63e1', 'f3ffkgsdejo9luulgfn2i5lv60', 1, 4, '1', '2013-03-22 18:27:23'),
(7, '514c5521c63e1', 'f3ffkgsdejo9luulgfn2i5lv60', 1, 5, '1', '2013-03-22 18:28:28'),
(8, '514c5521c63e1', 'f3ffkgsdejo9luulgfn2i5lv60', 2, 1, '1', '2013-03-22 18:29:01'),
(9, '514c5521c63e1', 'f3ffkgsdejo9luulgfn2i5lv60', 2, 2, '1', '2013-03-22 18:29:02'),
(10, '514c5521c63e1', 'f3ffkgsdejo9luulgfn2i5lv60', 2, 3, '1', '2013-03-22 18:29:07'),
(11, '514c5521c63e1', 'f3ffkgsdejo9luulgfn2i5lv60', 2, 4, '0', '2013-03-22 18:29:09'),
(12, '514c5521c63e1', 'f3ffkgsdejo9luulgfn2i5lv60', 2, 5, '1', '2013-03-22 18:29:10'),
(13, '514c58b1372e7', 'e70qhplor1v1ht2o3f17e2l3j3', 2, 1, '0', '2013-03-22 18:42:22'),
(14, '514c58b1372e7', 'e70qhplor1v1ht2o3f17e2l3j3', 2, 2, '0', '2013-03-22 18:42:24'),
(15, '514c58b1372e7', 'e70qhplor1v1ht2o3f17e2l3j3', 2, 3, '0', '2013-03-22 18:42:26'),
(16, '514c58b1372e7', 'e70qhplor1v1ht2o3f17e2l3j3', 2, 4, '0', '2013-03-22 18:42:27'),
(17, '514c58b1372e7', 'e70qhplor1v1ht2o3f17e2l3j3', 2, 5, '0', '2013-03-22 18:42:29'),
(18, '514c5baf5ef35', 'hn7q2cd4575864pm6etkmkdfh2', 2, 1, '1', '2013-03-22 18:55:07'),
(19, '514c5baf5ef35', 'hn7q2cd4575864pm6etkmkdfh2', 2, 2, '1', '2013-03-22 18:55:08'),
(20, '514c5baf5ef35', 'hn7q2cd4575864pm6etkmkdfh2', 2, 3, '1', '2013-03-22 18:55:14'),
(21, '514c5baf5ef35', 'hn7q2cd4575864pm6etkmkdfh2', 2, 4, '1', '2013-03-22 18:55:15'),
(22, '514c5c8f5b55e', 'a36enh6d78dm8cao4a3ibqj4s0', 1, 1, '1', '2013-03-22 18:58:50'),
(23, '514c5c8f5b55e', 'a36enh6d78dm8cao4a3ibqj4s0', 1, 2, '1', '2013-03-22 18:58:52'),
(24, '514c5c968de28', '5nfatkpl301k9povksp8seteu3', 3, 1, '1', '2013-03-22 20:06:29'),
(25, '514c5c968de28', '5nfatkpl301k9povksp8seteu3', 3, 2, '1', '2013-03-22 20:06:31'),
(26, '514c5c968de28', '5nfatkpl301k9povksp8seteu3', 3, 3, '1', '2013-03-22 20:06:34'),
(27, '514c6c75405dc', 'jhpoub8ueva48ja5glvt9rhsl6', 3, 1, '1', '2013-03-22 20:06:41'),
(28, '514c6c75405dc', 'jhpoub8ueva48ja5glvt9rhsl6', 3, 2, '1', '2013-03-22 20:06:43'),
(29, '514c6c75405dc', 'jhpoub8ueva48ja5glvt9rhsl6', 3, 3, '1', '2013-03-22 20:06:45'),
(30, '514c6c75405dc', 'jhpoub8ueva48ja5glvt9rhsl6', 3, 4, '1', '2013-03-22 20:06:47'),
(31, '514c6c75405dc', 'jhpoub8ueva48ja5glvt9rhsl6', 3, 5, '1', '2013-03-22 20:06:49'),
(32, '514c6c8351cf3', 'rfa7agnrt63m2rk58legl7fr95', 3, 1, '0', '2013-03-22 20:06:55'),
(33, '514c6c8351cf3', 'rfa7agnrt63m2rk58legl7fr95', 3, 2, '1', '2013-03-22 20:06:56'),
(34, '514c6c8351cf3', 'rfa7agnrt63m2rk58legl7fr95', 3, 3, '0', '2013-03-22 20:06:58'),
(35, '514c6c8351cf3', 'rfa7agnrt63m2rk58legl7fr95', 3, 4, '0', '2013-03-22 20:06:59'),
(36, '514c6c8351cf3', 'rfa7agnrt63m2rk58legl7fr95', 3, 5, '1', '2013-03-22 20:07:00'),
(37, '514d3307066c4', 'kdmcg2lc3a0c1ts82860lt8fg1', 2, 1, '0', '2013-03-23 10:26:56'),
(38, '514d3307066c4', 'kdmcg2lc3a0c1ts82860lt8fg1', 2, 2, '1', '2013-03-23 10:26:58'),
(39, '514d3307066c4', 'kdmcg2lc3a0c1ts82860lt8fg1', 2, 3, '0', '2013-03-23 10:26:59'),
(40, '514d3307066c4', 'kdmcg2lc3a0c1ts82860lt8fg1', 2, 4, '0', '2013-03-23 10:27:00'),
(41, '514d3307066c4', 'kdmcg2lc3a0c1ts82860lt8fg1', 2, 5, '1', '2013-03-23 10:27:01'),
(42, '514d3307066c4', 'kdmcg2lc3a0c1ts82860lt8fg1', 1, 1, '1', '2013-03-23 10:27:04'),
(43, '514d3307066c4', 'kdmcg2lc3a0c1ts82860lt8fg1', 1, 2, '1', '2013-03-23 10:27:06'),
(44, '514d3307066c4', 'kdmcg2lc3a0c1ts82860lt8fg1', 1, 3, '1', '2013-03-23 10:27:09'),
(45, '514d3307066c4', 'kdmcg2lc3a0c1ts82860lt8fg1', 1, 4, '1', '2013-03-23 10:27:10'),
(46, '514d3307066c4', 'kdmcg2lc3a0c1ts82860lt8fg1', 1, 5, '1', '2013-03-23 10:27:11'),
(47, '514d3307066c4', 'kdmcg2lc3a0c1ts82860lt8fg1', 4, 1, '1', '2013-03-23 10:27:14'),
(48, '514d3307066c4', 'kdmcg2lc3a0c1ts82860lt8fg1', 4, 2, '1', '2013-03-23 10:27:15'),
(49, '514d3307066c4', 'kdmcg2lc3a0c1ts82860lt8fg1', 4, 3, '1', '2013-03-23 10:27:18'),
(50, '514d3307066c4', 'kdmcg2lc3a0c1ts82860lt8fg1', 4, 4, '1', '2013-03-23 10:27:19'),
(51, '514d3307066c4', 'kdmcg2lc3a0c1ts82860lt8fg1', 4, 5, '1', '2013-03-23 10:27:20'),
(52, '514d363fd70d1', 'h82qih1hb3spv0fk4k1h3cdg10', 2, 1, '1', '2013-03-23 10:27:40'),
(53, '514d363fd70d1', 'h82qih1hb3spv0fk4k1h3cdg10', 2, 2, '1', '2013-03-23 10:27:41'),
(54, '514d363fd70d1', 'h82qih1hb3spv0fk4k1h3cdg10', 2, 3, '1', '2013-03-23 10:27:43'),
(55, '514d363fd70d1', 'h82qih1hb3spv0fk4k1h3cdg10', 2, 4, '1', '2013-03-23 10:27:44'),
(56, '514d363fd70d1', 'h82qih1hb3spv0fk4k1h3cdg10', 2, 5, '1', '2013-03-23 10:27:45'),
(57, '514d363fd70d1', 'h82qih1hb3spv0fk4k1h3cdg10', 1, 1, '1', '2013-03-23 11:04:50'),
(58, '514d363fd70d1', 'h82qih1hb3spv0fk4k1h3cdg10', 1, 2, '1', '2013-03-23 11:05:04'),
(59, '514d363fd70d1', 'h82qih1hb3spv0fk4k1h3cdg10', 1, 3, '1', '2013-03-23 11:05:06'),
(60, '514d363fd70d1', 'h82qih1hb3spv0fk4k1h3cdg10', 1, 4, '0', '2013-03-23 11:05:06'),
(61, '514d363fd70d1', 'h82qih1hb3spv0fk4k1h3cdg10', 1, 5, '0', '2013-03-23 11:05:07'),
(62, '514d363fd70d1', 'h82qih1hb3spv0fk4k1h3cdg10', 1, 1, '0', '2013-03-23 11:05:11'),
(63, '514d363fd70d1', 'h82qih1hb3spv0fk4k1h3cdg10', 1, 2, '1', '2013-03-23 11:05:12'),
(64, '514d363fd70d1', 'h82qih1hb3spv0fk4k1h3cdg10', 1, 3, '1', '2013-03-23 11:05:15'),
(65, '514d363fd70d1', 'h82qih1hb3spv0fk4k1h3cdg10', 1, 4, '1', '2013-03-23 11:05:19'),
(66, '514d363fd70d1', 'h82qih1hb3spv0fk4k1h3cdg10', 1, 5, '1', '2013-03-23 11:05:20');

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:08:15.820

```
SELECT  GID, QID, 
        SUM(Result = 1) Correct,
        SUM(Result = 0) Incorrect
FROM    maf_game_stats
GROUP   BY GID, QID 
```

# android - 市场更新后自动重启应用

> ID：15572154
> 
> 赞同：9
> 
> 时间：2013-03-22T13:58:01.683
> 
> 标签：android, service, google-play, auto-update

每当我在市场中发布我的应用程序的新版本时，如果用户启用了“自动更新”选项，应用程序将自动更新。

该应用程序包含一个不断运行的服务。但是当自动更新发生时，旧的正在运行的应用程序被杀死，但新的应用程序没有启动。由于更新对用户来说主要是透明的，因此应用程序的服务应该在更新后自动重新启动，这样服务几乎不会中断。

用市场上的真实更新来测试这个有点困难，所以我使用以下两个 adb 命令来模拟这个更新过程。安装第一版：

```
adb install oldversion.apk 
```

自动更新：

```
adb install -r newversion.apk 
```

运行第二个命令后，应用程序成功更新，但它已停止且未重新启动。

**如何让新版本的服务自动启动？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-18T15:57:16.300

如果您的应用程序正在运行`API 12`或更高版本，我建议您注册一个`BroadcastReceiver`收听`android.intent.action.MY_PACKAGE_REPLACED`.

仅当您的应用程序获得更新时才会触发此 Intent。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T14:13:39.853

这是您必须仔细测试的东西，但是您应该能够使用带有操作[Intent.ACTION_PACKAGED_REPLACED的广播接收器来捕获它](https://developer.android.com/reference/android/content/Intent.html#ACTION_PACKAGE_REPLACED)

然后你从你的接收器启动服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T14:16:49.017

注册一个`BroadcastReceiver`到`Intent.ACTION_PACKAGE_REPLACED`

然后，`EXTRA_UID`与自己的比较。如果匹配，您可以重新启动服务。

# perl - 如何从 LoadRunner 调用 Perl 代码？

> ID：15572160
> 
> 赞同：0
> 
> 时间：2013-03-22T13:58:10.440
> 
> 标签：perl, loadrunner

对不起，如果这是一个重复的问题；我没有找到答案。（是的，我查过了，但我没有为 LR 11.04 使用 RTFM。我想保持我所剩无几的理智。）

我知道可以从 loadrunner 中调用 Perl，但还没有找到示例。我知道这是可能的，因为 Web_Reg_Save_Param_ex / Web_Reg-Save_Param_Regexp 函数中的 RegEx 逻辑被移植到 Perl 子例程中。

我需要知道如何做到这一点，因为我需要对我们测试的 (half-@$$ed) 应用程序做很多事情。

例子是：

*   .NET 应用程序 - 我可以快速轻松地找到参数值，在 LR 之外对它们进行切片和解析，然后将值返回到 LR。

*   标准 Web 应用程序 - 对某人的沙箱进行第三方调用。所有信息均采用 Base64 编码。我们需要获取明文（作为响应提供），然后编码为 Base 64，并将其发送到主系统。所以，AUT 是系统 A；系统 A 调用系统 B（302 响应），系统 B 响应，然后 AUT 将该数据发送回系统 A 以存储在其数据库中。（因为系统 A 和系统 B 来自同一供应商 - 嗯，我对我们的投标过程有疑问，但它是 OT。）

我有一个问题，我是一个优秀的程序员，但对 Perl 却是个菜鸟。所以我需要清理并重新编写，而不仅仅是坐下来编写代码。我检查了我能找到的 RegEx 信息（到目前为止最好的是[在 loadrunner 中使用正则表达式](http://www.headwired.com/articles/using-regular-expressions-in-loadrunner/)），但到目前为止还不足以满足我的要求。

资源：

```
{"text":"A*","value":"271"},  // This is just the pattern - it's repeated 320 times or so 
```

示例代码片段：

```
web_reg_save_param_ex(
    "ParamName=Charity1",
    "LB={\"text\":\"", 
    "RB/RE=\",\"value\":\"([0-9]+)\"},", 
    "Ordinal=All",
    SEARCH_FILTERS,
    "Scope=Body",
    "IgnoreRedirections=Yes",
    "RequestUrl=*/Person.aspx*",
    LAST); 
```

那个有效，返回名称（`A*`来自上面的来源）。

```
web_reg_save_param_ex(
    "ParamName=Charity1",
    "LB/RE={\"text\":\"([A-Za-z0-9].+)\",\"value\":\"",
    "RB=\"},", 
    "Ordinal=All",
    SEARCH_FILTERS,
    "Scope=Body",
    "IgnoreRedirections=Yes",
    "RequestUrl=*/Person.aspx*",
    LAST); 
```

这对我不起作用 - 找到的总记录为零。好的，其中一个条目有一个“-”，有些有空格 - 但 100% 失败？OTOH，如果我可以捕获整个列表，然后我会将其发送到 Perl，拆分子字符串，并返回两个修剪整齐的值，以保存为 LoadRunner 字符串（我认为 - LR 不太喜欢一个返回到目前为止的值。但我可以做一个 STRUCT 并将值返回给那个，我认为，或者一个指向内存空间的指针，让 LR 将引用的内存读取到一个 STRUCT，或者类似的东西。）

问题是，很明显 AUT 立即使用这两个值，所以我不能在以后使用它，当值被发回时 - 显然，数字比文本更重要。

任何建议都值得赞赏，但我想避免使用`system()`- 这是我对 Base64 问题的解决方法（它应该是唯一的 Perl 调用，永远。）它工作得很好......直到我添加了一个`M$`需要补丁，并且无法再在 LoadRunner 中打开和读取文件（惠普说，这是自定义代码，我们帮不了你。所以我删除了`M$`补丁并运行了测试。它是大约 2010 年的 c++ Redistributable。那是2012 年末。作为参考，我们仍在这家商店运行 XP。我的办公桌上有一个 4 GB 的 Core i5... 与 Win7 一起发货。我们正在运行 Xtra Pathetic。这里的理智供不应求...... )

// ***** ** *** **** 后期修订：

在我理顺了 RegEx 之后，修改 LoadRunner 调用（到 web_reg_save_param_regexp）起作用了。不清楚为什么“不引用”正则表达式没有`A*`为第一个值返回 an，但我发现了为什么`271`没有出现 - 实际上这很容易。最终值没有相同的边界条件。第一个值，显然“不引用”不包括当`*`值中有“”时。？？？

```
web_reg_save_param_regexp(
"ParamName=Charity_REGEX",
"RegExp={\"text\":\"([^\"]{1,8})\",\"value\":\"", 
"Ordinal=All",
SEARCH_FILTERS,
"Scope=Body",
"IgnoreRedirections=Yes",
"RequestUrl=*/Person.aspx*",
LAST);

web_reg_save_param_regexp(
"ParamName=Tenants_REGEX",
"RegExp=\",\"value\":\"([0-9]{1,3})\"}",
"Ordinal=All",
SEARCH_FILTERS,
"Scope=Body",
"IgnoreRedirections=Yes",
"RequestUrl=*/Person.aspx*",
LAST); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T19:58:14.923

用于在 system() 之外调用项目（包括 perl 代码）。您可能必须将 perl 项输出到一个文件中，然后再读回。或者，您可以将代码放在 DLL 中并使用 lr_load_dll() 调用它。

根据您的 base64 挑战，这里有一些您可能想要利用的 base64 函数。按原样提供，使用风险自负，不暗示或以其他方式提供支持。我会说这段代码直接来自工作负载运行程序的虚拟用户，它们编码和解码都很好。

```
static const unsigned char base64_table[64] =
        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";

unsigned char outbuf[BUFSIZE];

unsigned char * base64_encode(unsigned char *src, size_t len,
                              size_t *out_len)
{
        unsigned char *out, *pos;
        const unsigned char *end, *in;
        size_t olen;
        int line_len;

        olen = len * 4 / 3 + 4; /* 3-byte blocks to 4-byte */
        olen += olen / 72; /* line feeds */
        olen++; /* nul termination */
        if (olen >= BUFSIZE)
            {
            lr_message("ERROR:  required buffer size of %d versus fixed buffer of %d.\n",
                        olen, BUFSIZE);
            return NULL;
            }
        out = outbuf;

        end = src + len;
        in = src;
        pos = out;
        line_len = 0;
        while (end - in >= 3) {
                *pos++ = base64_table[in[0] >> 2];
                *pos++ = base64_table[((in[0] & 0x03) << 4) | (in[1] >> 4)];
                *pos++ = base64_table[((in[1] & 0x0f) << 2) | (in[2] >> 6)];
                *pos++ = base64_table[in[2] & 0x3f];
                in += 3;
                line_len += 4;
                if (line_len >= 72) {
                        *pos++ = '\n';
                        line_len = 0;
                }
        }

        if (end - in) {
                *pos++ = base64_table[in[0] >> 2];
                if (end - in == 1) {
                        *pos++ = base64_table[(in[0] & 0x03) << 4];
                        *pos++ = '=';
                } else {
                        *pos++ = base64_table[((in[0] & 0x03) << 4) |
                                              (in[1] >> 4)];
                        *pos++ = base64_table[(in[1] & 0x0f) << 2];
                }
                *pos++ = '=';
                line_len += 4;
        }

        if (line_len)
                *pos++ = '\n';

        *pos = '\0';
        if (out_len)
                *out_len = pos - out;
        return out;
}

unsigned char * base64_decode(unsigned char *src, size_t len,
                              size_t *out_len)
{
        unsigned char dtable[256], *out, *pos, in[4], block[4], tmp;
        size_t i, count, olen;

        memset(dtable, 0x80, 256);
        for (i = 0; i < sizeof(base64_table); i++)
                dtable[base64_table[i]] = i;
        dtable['='] = 0;

        /*for (i = 0;  i < 256;  i++)
            printf("%d ('%c')\t%d ('%c')\n", i, i, dtable[i], dtable[i]);*/

        count = 0;
        for (i = 0; i < len; i++) {
                if (dtable[src[i]] != 0x80)
                        count++;
        }

        //printf("count is %d\n", count);
        /*if (count % 4)
                return NULL;*/

        /*  handle code missing the ender equals - russelladd   */
        //if (count % 4)
                //printf("Input file with wrong number of valid characters.\n");
        for (i = 0;  i < count % 4;  i++)
            strcat(src, "=");

        count += (count % 4);
        /*  russelladd  */

        olen = count / 4 * 3;
        if (olen >= BUFSIZE)
            {
            lr_message("ERROR:  required buffer size of %d versus fixed buffer of %d.\n",
                        olen, BUFSIZE);
            return NULL;
            }
        pos = out = outbuf;

        count = 0;
        for (i = 0; i < len; i++) {
                tmp = dtable[src[i]];
                if (tmp == 0x80)
                        continue;

                in[count] = src[i];
                block[count] = tmp;
                count++;
                if (count == 4) {
                        *pos++ = (block[0] << 2) | (block[1] >> 4);
                        *pos++ = (block[1] << 4) | (block[2] >> 2);
                        *pos++ = (block[2] << 6) | block[3];
                        count = 0;
                }
        }

        if (pos > out) {
                if (in[2] == '=')
                        pos -= 2;
                else if (in[3] == '=')
                        pos--;
        }

        *out_len = pos - out;
        return out;
} 
```

# ios - 搜索没有日期的ios提醒

> ID：15572163
> 
> 赞同：3
> 
> 时间：2013-03-22T13:58:18.307
> 
> 标签：ios, objective-c, nspredicate, eventkit

我熟悉使用`eventstore`搜索谓词，例如`predicateForIncompleteRemindersWithDueDateStarting:Ending:Calendars:`

但我试图弄清楚如何搜索任何**未设置任何到期日期**的不完整提醒。我已经尝试过`NSCompoundPredicate`，但`eventstore`不会获取不是使用自己的谓词创建方法创建的谓词。有任何想法吗？

编辑：根据文档，为开始日期和结束日期传递 nil 会导致所有提醒，而不仅仅是没有到期日期的提醒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:19:54.520

**编辑**

您可以尝试过滤所有不完整的提醒以仅在没有截止日期的情况下获取：

```
[store fetchRemindersMatchingPredicate:predicate
                            completion:^(NSArray *reminders)
     {
         NSArray *myReminders = [reminders filteredArrayUsingPredicate:
                                 [NSPredicate predicateWithFormat:@"dueDateComponents = nil"]];
         NSLog(@"%@", myReminders);
     }]; 
```

[文档](http://developer.apple.com/library/ios/documentation/EventKit/Reference/EKEventStoreClassRef/Reference/Reference.html#//apple_ref/occ/instm/EKEventStore/predicateForIncompleteRemindersWithDueDateStarting%3aending%3acalendars%3a)`predicateForIncompleteRemindersWithDueDateStarting:ending:calendars:`：_

> **startDate 的讨论**
> 通行证`nil`以查找 endDate 之前到期的所有提醒。同样，传递`nil`startDate 和 endDate 以获取指定日历中的所有未完成提醒。

# asp.net-mvc - 如何将 ASP.NET 服务器控件添加到我的 MVC4 视图？

> ID：15572164
> 
> 赞同：1
> 
> 时间：2013-03-22T13:58:22.123
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4, visual-studio-2012

正如帐户名称所声称的那样，我确实是一个n00b。;)

我是 MVC 的新手。我只是想向`<asp:Label/>`创建项目时存根的默认视图之一添加一个。但是在智能感知中什么都没有出现，`@Register`并且解决方案中没有任何带有“asp”标签前缀的地方。我在构建时收到警告***"Unrecognized namespace 'asp'"***，然后当我运行该站点时该标签未显示在页面上。

我想我一直认为在其他非 MVC Web 项目中，在某处列出了一个 tagprefix="asp" 是理所当然的。但是在互联网上搜索答案后，我无法在 MVC 中找到任何有关如何执行此操作的信息。似乎它应该是交钥匙的东西，而我不得不努力寻找答案。

如何让 MVC4 识别 ASP.NET 控件？如果没有插入此引用，我将如何做模板或网格或任何东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T14:00:25.657

## 不要那样做。

ASP.Net MVC 的全部意义在于它不使用服务器控件。

相反，您应该编写原始 HTML 并使用 HTML 助手（`@Html.*()`方法）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T14:01:49.553

MVC 框架不是为服务器端控件设计的。事实上，你在 mvc 中根本没有服务器端控件。您所要做的就是使用标准的 html 控件。

我认为您应该在深入了解 MVC 之前多阅读一些内容。与 Web 表单相比，这是一种完全不同的方法，尝试比较事物会导致太多的混乱和困难。你可能不得不忘记你通过努力学到的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-24T08:07:33.413

因为 MVC 不使用视图状态来维护状态信息。所以我们不能使用能够进行回发的 Asp.Net 服务器端控件。.aspx 页面和 ASP.NET MVC 应用程序的执行生命周期不同，MVC 不支持很多 .aspx 页面生命周期事件，因为模型、视图和控制器之间的交互使用不同的生命周期模型。

# c# - 使用 ABCPDF 检测 PDF 中每一页的方向

> ID：15572165
> 
> 赞同：2
> 
> 时间：2013-03-22T13:58:24.040
> 
> 标签：c#, vb.net, pdf, abcpdf

有没有办法检测pdf文件中每一页的方向？

我正在创建一个将水印（文本）添加到 pdf 文件的应用程序。这些文件可以有纵向、横向或两者的组合。

使用 doc.MediaBox 属性，我使用以下逻辑：

```
portrait = box.Height > box.Width 
```

我的问题是，即使在横向文档上，它也总是返回真实值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T14:29:44.347

Doc 在每个页面上都可以有不同的 MediaBox。要检查第 N 页的媒体框：

```
doc.PageNumber = n
portrait = doc.Mediabox.Height > doc.Mediabox.Width 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T10:57:17.193

有两种方法可以在 PDF 中实现方向。

正确的方法是为页面指定一个旋转角度。您可以使用以下形式的代码获取当前页面的旋转。

```
 string GetRotate(Doc doc) {
         return GetInheritedValue(doc, doc.Page, "/Rotate*:Num");
  } 
```

#

```
 string GetInheritedValue(Doc doc, int id, string name) {
   string val = "";
   for (int i = 1; i < doc.PageCount * 2; i++) { // avoid overflow if doc corrupt
    val = doc.GetInfo(id, name);
    if (val.Length > 0)
     break;
    id = doc.GetInfoInt(id, "/Parent:Ref");
    if (id == 0)
     break;
   }
   return val;
  } 
```

但是，有时页面方向是通过将 MediaBox 设置为宽而不是高页面大小来实现的。您可以使用 Doc.MediaBox 属性检查当前的 MediaBox。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T15:04:30.947

横向页面可以通过 2 种方式创建：将宽度设置为大于高度，或者将页面旋转设置为 90 度或 270 度以用于纵向页面。用于确定页面是纵向还是横向的伪代码如下所示：

```
bool isPortrait = width < height;
if ((rotation == 90) || (rotation == -90) || (rotation == 270))
{
 isPortrait = !isPortrait;
} 
```

我不熟悉 ABCPDF，但我假设您可以访问页面旋转。

# c# - 从 C# 中的 ListView 中删除项目

> ID：15572169
> 
> 赞同：6
> 
> 时间：2013-03-22T13:58:39.323
> 
> 标签：c#, listview

我需要从 a 中删除项目`ListView`，我正在寻找的代码将显示一个 MessageBox 进行确认，如果没有选择任何项目，它将显示一个错误 MessageBox

这是我的代码，它不起作用:(

```
private void button2_Click(object sender, EventArgs e)
{
    if (listView1.SelectedItems != null)
    {
        var confirmation = MessageBox.Show(
            "Voulez vous vraiment supprimer les stagiaires séléctionnés?",
            "Suppression", MessageBoxButtons.YesNo, MessageBoxIcon.Question
        );

        if (confirmation == DialogResult.Yes)
        {
            for (int i = 0; i < listView1.Items.Count; i++)
            {
                if (listView1.Items[i].Selected)
                {
                    listView1.Items[i].Remove();
                    i--;
                }
            }
        }
    }
    else
    {
        MessageBox.Show("aucin stagiaire selectionnes", "erreur",
            MessageBoxButtons.OK, MessageBoxIcon.Error);
    }
} 
```

错误不在 delete 中，但在`MessageBox's`I have two`MessageBox's`中，必须在确认之前先显示错误。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-22T14:03:11.743

从末尾开始计数到零

```
for (int i = listView1.Items.Count - 1; i >= 0; i--)
{
    if (listView1.Items[i].Selected)
    {
        listView1.Items[i].Remove();
    }
} 
```

但是，考虑到每个 ListViewItem 都有一个 Index 属性，并且使用该集合具有避免冗余测试和在较少数量的项目上循环的优势。

（注意，SelectedItems 集合永远不会为空，如果不存在任何选择，则该集合为空但不为空）

所以你的代码可以重写

```
if (listView1.SelectedItems.Count > 0)
{
    var confirmation = MessageBox.Show("Voulez vous vraiment supprimer les stagiaires séléctionnés?", "Suppression", MessageBoxButtons.YesNo, MessageBoxIcon.Question);
    if (confirmation == DialogResult.Yes)
    {
        for (int i = listView1.SelectedItems.Count - 1; i >= 0; i--)
        {
            ListViewItem itm = listView1.SelectedItems[i];
            listView1.Items[itm.Index].Remove();
        }
    }
}
else
    MessageBox.Show("aucin stagiaire selectionnes", ...); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T14:17:55.277

您不应该引用您在迭代期间使用的原始集合，而应该引用其他一些：

```
foreach(ListViewItem item in listView1.Items)
   if (item.Selected)
     listView1.Items.Remove(item); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-06T15:05:48.370

```
//if (lvPhotos.SelectedIndices.Count > 0)
            if (lvPhotos.CheckedIndices.Count > 0)
            {
                var confirmation = MessageBox.Show("Supprimer les photos séléctionnées ?", "Confirmation", MessageBoxButtons.YesNo, MessageBoxIcon.Question);
                if (confirmation == DialogResult.Yes)
                {
                    // selected
                    //for (int i = lvPhotos.SelectedIndices.Count - 1; i >= 0; i--)
                    //{
                    //    lvPhotos.Items.RemoveAt(lvPhotos.SelectedIndices[i]);
                    //}

                    // checked
                    for (int i = lvPhotos.CheckedIndices.Count - 1; i >= 0; i--)
                    {
                        lvPhotos.Items.RemoveAt(lvPhotos.CheckedIndices[i]);
                    }
                }
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T14:05:21.053

您可以仅使用此代码而无需 -- 递减

```
listView1.Items[i].Remove(); 
```

注意：您也可以`RemoteAt method`通过指定位置来使用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T14:08:24.373

您需要将确认`MessageBox`从更改`Show`为`ShowDialog`。这将使它成为模态并等待结果。

您需要检查“SelectedItems”是否为空

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T14:13:11.600

您可以像这样更改代码。请注意，`ListView.SelectedIndices`collection 包含 selected 的索引`ListViewItems`。只需从头到尾迭代它们，您就不需要处理索引更新，而是将它们留给`for`循环：

```
 if (listView1.SelectedIndices.Count>0)
            {
                var confirmation = MessageBox.Show("Voulez vous vraiment supprimer les stagiaires séléctionnés?", "Suppression", MessageBoxButtons.YesNo, MessageBoxIcon.Question);
                if (confirmation == DialogResult.Yes)
                {
                    for (int i = listView1.SelectedIndices.Count-1; i >= 0; i--)
                    {

                        listView1.Items.RemoveAt(listView1.SelectedIndices[i]);

                    }
                }
            }
            else
                MessageBox.Show("aucin stagiaire selectionnes", "erreur", MessageBoxButtons.OK, MessageBoxIcon.Error); 
```

# python - 我们目前在“for x in y:”循环中处于哪个元素

> ID：15572171
> 
> 赞同：0
> 
> 时间：2013-03-22T13:58:54.063
> 
> 标签：python, list, loops

`for x in y:`遍历列表的 Python 语法必须以某种方式记住指针当前所在的元素是正确的？当我试图解决这个问题而不诉诸于 `for index, x in enumerate(y):`

我想这样做的技术原因是我假设`enumerate()`在以某种方式访问​​已经存在的“指针”时会降低性能。我从答案中看到，但是这个指针非常私密且无法访问。

我想这样做的功能原因是如果当前元素浮点值远离“所需”浮点范围，则能够跳过例如 100 个元素。

- 回答 -

解决方法如下（纯示意图示例）：

```
# foo is assumed to be ordered in this example
foo = [1,2,3,4,5,6....,99,100]
low = 60
high = 70
z = iter(foo)
for x in z:
    if x < low-10
        next(islice(z,10,10),None)
    if x > high
        break 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T14:03:55.750

你不能。`for`使用[Python 迭代协议](http://docs.python.org/2/glossary.html#term-iterator)，这对于列表意味着它将创建一个*私有*迭代器对象。该对象跟踪列表中的位置。

即使您要使用 显式创建迭代器[`iter()`](http://docs.python.org/2/library/functions.html#iter)，当前位置*也不*是该对象的公共属性：

```
>>> list_iter = iter([])
>>> list_iter
<listiterator object at 0x10056a990>
>>> dir(list_iter)
['__class__', '__delattr__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__iter__', '__length_hint__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', 'next'] 
```

迭代协议的重点在于，它可以让您以完全相同的方式处理任何序列，甚至是无限继续的序列。*创建一个没有位置*的序列生成器很简单：

```
def toggle():
    while True:
        yield True
        yield False 
```

当您对其进行迭代时，该生成器将在`True`和值之间切换。`False`那里的序列中没有位置，因此也没有暴露位置的意义。

坚持下去`enumerate()`。所`enumerate()`要做的就是保持一个*柜台*。它根本不在包装的迭代器中保持位置。增加该整数不会花费您太多的性能或内存。

[`enumerate()`](http://docs.python.org/2/library/functions.html#enumerate)基本上*就是*这样，[在 C 中实现](http://hg.python.org/cpython/file/tip/Objects/enumobject.c#l122)：

```
def enumerate(sequence, start=0):
    n = start
    for elem in sequence:
        yield n, elem
        n += 1 
```

因为它是在 C 中实现的，所以它会在任何一天尝试读取原始迭代器上的属性，这将需要在每次迭代中进行更多的字节码操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:02:25.710

该“指针”值对于创建迭代器的任何内容都是内部的。请记住，它不需要是一个列表（可以被索引的东西），所以如果你真的想要“索引”，你将需要使用枚举。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T14:03:38.310

此信息在迭代器内部，无法访问。[有关迭代器协议](http://docs.python.org/2/library/stdtypes.html)的描述，请参见此处。本质上，迭代器的唯一公开可用的成员是一旦范围用完就会`next()`引发异常。`StopIteration`

此外，`enumerate`效率很高。相当于写

```
i = -1
for x in y:
  i += 1
  # do something with x and i 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T14:01:24.477

不，它使用底层**迭代器**，它不会强制跟踪当前索引。

除非您手动增加一个计数器，否则这是不可能的：

```
idx = 0
for x in y:
    idx+=1
    # ... 
```

所以，请继续`enumerate()`

# pagination - 放置在 CS 购物车中的类别页面顶部时，底部分页不起作用？

> ID：15572174
> 
> 赞同：0
> 
> 时间：2013-03-22T13:58:58.027
> 
> 标签：pagination, cs-cart

放置在 CS 购物车中的类别页面顶部时，底部分页不起作用！任何想法？

请帮我....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T05:16:38.670

转到管理面板设置>外观>客户设置检查在列出的对象顶部显示“分页部分”。希望对你有帮助

# c# - UserControl 之外的搜索控件

> ID：15572177
> 
> 赞同：0
> 
> 时间：2013-03-22T13:59:05.090
> 
> 标签：c#, asp.net, controls

我在**AddPostUserControl**`button`里面。我想当内部**AddPostUserControl**的点击事件触发时找到ID **ShowPostsListView**。我怎样才能做到这一点 ？`user control`**`button``user control` **`asp:ListView`****

 ******```
 <%--add post user control--%>
                <uc1:AddPostUserControl runat="server" id="AddPostUserControl" />

                <%--show posts--%>
                <asp:ListView ID="ShowPostsListView" runat="server">
                    <ItemTemplate>
                        <div class="thisPost">
                            <div class="thisPostAuthor">
                                <%# this.GetCurrentUser(Eval("User")) %>
                            </div>
                            <div class="thisPostHeader">
                                <h3>
                                    <%# Eval("Title") %>
                                </h3>
                                <span class="postDateTime">
                                    <%# Eval("PostDate") %>
                                </span>
                            </div>
                            <div class="thisPostContent">
                                <p>
                                    <%# Eval("PostContent") %>
                                </p>
                            </div>
                        </div>
                    </ItemTemplate>
                </asp:ListView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:04:41.823

```
Page page = HttpContext.Current.Handler as Page
ListView lsv = page.FindControl("ShowPostsListView"); 
```******

# java - 如何使用 JDBC 检索存储过程的信息？

> ID：15572178
> 
> 赞同：0
> 
> 时间：2013-03-22T13:59:05.440
> 
> 标签：java, sql-server, jdbc

现在我需要检索数据库中 SQL Server 2008 R2 中所有 sproc(s) 的信息（主要是名称和参数信息），JDBC 是否支持它？如果这是不可能的，如果给定一个 sproc 名称，我可以检索特定 sproc 的信息 - 参数的信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:48:22.897

[`DatabaseMetaData.getProcedures(...)`](http://docs.oracle.com/javase/7/docs/api/java/sql/DatabaseMetaData.html#getProcedures%28java.lang.String,%20java.lang.String,%20java.lang.String%29)您可以使用和检索有关所有存储过程的信息[`DatabaseMetaData.getProcedureColumns(...)`](http://docs.oracle.com/javase/7/docs/api/java/sql/DatabaseMetaData.html#getProcedureColumns%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)。

参数`procedureNamePattern`(and `columnNamePattern`) 需要一个 SQL`LIKE`模式，因此如果您想要所有过程，您可以将其称为：

```
DatabaseMetaData dbmd = ...;
dbmd.getProcedures(null, null, "%"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:31:05.337

是的，您可以使用 SQL Server 从 JDBC 检索存储过程结果。

有多种方法。

1.  直接使用 JDBC 时，在 CallableStatement 中注册输出参数。[http://www.mkyong.com/jdbc/jdbc-callablestatement-stored-procedure-out-parameter-example/](http://www.mkyong.com/jdbc/jdbc-callablestatement-stored-procedure-out-parameter-example/)
2.  使用 Spring 时，您可以使用 SimpleJDBCCall 声明输出参数。[http://tothepointtalks.blogspot.com/2009/12/execute-stored-procedure-in-spring-with.html](http://tothepointtalks.blogspot.com/2009/12/execute-stored-procedure-in-spring-with.html)

# ubuntu - 在 Ubuntu 上安装流星时出错

> ID：15572187
> 
> 赞同：0
> 
> 时间：2013-03-22T13:59:28.920
> 
> 标签：ubuntu, installation, meteor

我正在 Ubuntu 上安装流星。Meteor --help 已经可以了。现在尝试运行`./install.sh`，这给了我消息：

```
name@name-laptop:~/meteor$ ./install.sh 
```

无法写入`/usr/local`

我在它下面创建了 /usr 和 /local 但仍然是相同的消息。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:00:35.467

以 root 权限运行此命令：

```
$ sudo ./install.sh 
```

或将其安装在不同的位置`/usr/local`。

发生此错误是因为您没有`/usr/local`目录的写入权限。

# java - 使用 UDP 的视频流

> ID：15572189
> 
> 赞同：1
> 
> 时间：2013-03-22T13:59:40.760
> 
> 标签：java, udp, datagram

我的问题是如何使用 UDP 从网络摄像头（客户端-服务器）发送数据。我已经使用 UDP 实现了一个音频传输应用程序并且它正在工作，但我不知道如何从我的网络摄像头获取数据字节。对于音频传输，我使用了 targetdataline 并将数据放在临时缓冲区中并将其发送到服务器。如何使用相同的原理进行视频传输。以下是我如何从网络摄像头获取图像。谁能指导我下一步该怎么做。谢谢你。

```
 /* Grab the default web cam*/
    MediaLocator ml = new MediaLocator("vfw://0");

    /* Create my data source */
    DataSource ds = Manager.createDataSource(ml);

    requestFormatResolution(ds);

    /* Create & start my player */
    Player p = Manager.createRealizedPlayer(ds);

    p.start(); 
```

# mysql - 如何从 MySQL 的视图中选择一个字段？

> ID：15572190
> 
> 赞同：0
> 
> 时间：2013-03-22T13:59:42.873
> 
> 标签：mysql

如何在 MySQL 中进行以下查询？

```
Select SUM(T1.Amount) 
From 
( 
  Select  Distinct PersonName,Amount 
  From  tblusers as T1 
  where city ="xxx"
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:00:46.220

只需给子查询起别名：

```
Select SUM(Amount) 
From (
    Select Distinct PersonName, Amount 
    From  tblusers 
     where city ="xxx")  t 
```

如果您正在寻找每个人，请添加一个 GROUP BY：

```
Select PersonName, SUM(Amount) 
From (
    Select Distinct PersonName, Amount 
    From  tblusers 
     where city ="xxx")  t
Group By PersonName 
```

如果您真的想要每个人的总和（而不是不同人/金额的总和），那么您根本不需要子查询：

```
Select PersonName, SUM(Amount) 
From tblusers 
Where city ="xxx"
Group By PersonName 
```

不过还是看你的实际需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:00:49.123

MySQL 需要派生表或子查询的别名。因此，您将需要使用以下内容：

```
Select SUM(t1.Amount) 
From 
( 
  Select Distinct PersonName, Amount 
  From  tblusers
  where city ="xxx"
) t1 
```

根据您的需要，您应该能够使用以下内容：

```
select personName, sum(Amount)
from tblusers
where city = "xxx"
group by personName 
```

或者，如果您只想返回总和，您可以使用：

```
select sum(Amount)
from tblusers
where city = "xxx"
group by personName 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T14:05:04.683

我用下面的查询完成了它。但想知道是否有其他可能的方法来做到这一点。

```
 CREATE VIEW  T1 as (Select  Distinct PersonName,Amount From  tblusers  where city ="xxx" );

     Select SUM(Amount) From  T1 
```

# ios6 - Webviews 中 iOS 智能应用链接的行为是什么？

> ID：15572191
> 
> 赞同：0
> 
> 时间：2013-03-22T13:59:44.780
> 
> 标签：ios6, uiwebview

我们从我们的应用程序中链接到我们自己的网站，在 web 视图中显示一些页面。

如果配置了智能应用链接，它还会显示吗？如果是这样，如何阻止它这样做（因为只有在有人只是浏览网页时才出现才有意义）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-28T22:36:53.380

智能横幅不会出现在 Mobile Safari 以外的浏览器中，包括 Web 视图——它们本质上是 Safari 特有的功能。

一些开发人员已经实现了看起来像智能横幅的功能，以便在其他浏览器中使用（例如，[http://blog.ijasoneverett.com/2013/01/ios-smart-app-banners-in-browsers-not-named-safari /](http://blog.ijasoneverett.com/2013/01/ios-smart-app-banners-in-browsers-not-named-safari/) )，但这听起来不像你想要的。

# jquery - 连续的 Jquery Ajax 帖子

> ID：15572193
> 
> 赞同：0
> 
> 时间：2013-03-22T13:59:51.230
> 
> 标签：jquery, ajax

我创建的这段代码：

```
 $("button").click(function(){
       for (var i=0;i<array.length;i++){
         var text = array[i];
         $.post("process.php",
                { data : text},
                function(data){
                  if (data="success"){
                   alert("success");
                 } else {
                   alert(data);}
         });
       }
    }); 
```

是工作，但不根据数组索引连续发送数据（文本）。我无法一一发送，因为数组长度将由用户输入。如何根据其数据数组的索引连续发布ajax？而且，这也很重要，如何在最后一个请求中检测 onComplete() 事件？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:11:27.013

最干净的解决方案（恕我直言）是递归回调循环 - 您只需在前一个 AJAX 调用完成时触发下一条数据的上传。

```
$('button').click(function() {
    var a = array.slice(0);
    (function loop() {
        var text = a.shift();
        if (typeof text !== 'undefined') {
            $.post(url, {data: text})
             .done(function(data) {
                 // use result
                 ...
             }, loop);  // and iterate
        } 
    })();  // start the loop immediately
}); 
```

上面的代码利用了`.done`延迟对象方法，并传递了两个回调——一个是传统的“成功”回调，第二个是触发对函数的伪递归回调`loop`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:04:02.933

如果数据必须按顺序到达，那么您需要延迟执行进一步的 POST，直到前一个 POST 完成其轮次；您可以通过多种方式执行此操作，但最好的选择可能是执行 AJAX POST 并接受下一个项目/索引或其他任何参数的函数，并在 AJAX 调用的`success`回调中调用自身。

```
function submitData(items, index) {
  if (index < items.length) {
    $.post(
      "process.php",
      { data : items[index] },
      function(data) {
        submitData(items, ++index);
      }
    );
  }
} 
```

然后调用：

```
submitData(items, 0); 
```

# jquery - jquery sprite 动画响应式

> ID：15572197
> 
> 赞同：2
> 
> 时间：2013-03-22T13:59:58.960
> 
> 标签：jquery, animation, sprite, scale

我想用精灵替换两个图像 gif 动画。问题是，我使用的是响应式设计。因此，当窗口大小发生变化时，整个“系统”就不再工作了。gif 很糟糕，并且 cpu 吃东西，但它的比例是正确的。

所以我的问题 - 因为我没有找到解决方案 - 是否可以从实际窗口中获取窗口大小，将图像缩放到正确的高度、宽度，当然还有将“跳转”从第一张图像更改为第二张图像等等。

```
var scrollUp = (function () {

  var timerId;

  return function (height, times, element) {
    var i = 0;
    timerId = setInterval(function () {
      if (i > times)
        i = 0;
      element.style.backgroundPosition = "0px -" + i * height + 'px';
      i ++;
    }, 100  );
  };
})( );

scrollUp( 1200 ,   6, document.getElementById('anim')) 
```

所以在这段代码中，图像大小设置为 1200 - 没错，如果显示是 1980x1200，但是随着显示的变化，大小 1200 是错误的 - 它应该是实际的显示大小 - 同时，图像应该是缩放到那个大小。

这样的事情可能吗？或者有人对 eays 响应式精灵动画有更好的想法吗？

也许css3？

谢谢！

广告

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T08:01:08.730

```
$(window).resize(function myAss(){ //when window is resizing it starts
    var wid = $(window).width();
    //or
    var wid = $("#someid").width();
    //or
    var wid = $(".someclass").width();
    $("#yourdiv").css("width",wid*0.5); //your div will be 50% of the received width. do same with the height if you want.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-21T22:07:47.253

查看[LazyLou](https://github.com/ozanmuyes/lazylou)并继续关注 v1.1。我是这个插件的开发者，我打算在 v1.1 上添加附加架构。该插件的第一个附加组件将是动画师。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-11T22:33:30.377

我只用 CSS 做的。如果您的精灵有（例如）5 张图像，则将背景大小设置为 500%。它对我有用。[工作示例](http://www.arnojansen.eu/davidu/huis-3.html)。

# css - 如何为 Sharepoint Prediefined DIV 设置不透明度？

> ID：15572203
> 
> 赞同：0
> 
> 时间：2013-03-22T14:00:20.053
> 
> 标签：css, sharepoint, sharepoint-2010

```
As mentioned in title, I am not able to set opacity.
I tried using rgba(0,0,0,0.5) - not working.
also tried opacity:0.6; still not working. 
```

我正在使用 Sharepoint 2010、IE9 和 Sharepoint Designer 2010

# javascript - Google maps api 3 json - 创建动态中心点

> ID：15572208
> 
> 赞同：2
> 
> 时间：2013-03-22T14:00:28.547
> 
> 标签：javascript, jquery, json, google-maps

我正在加载一个 JSON 文件以填充 Google 地图上的标记。

我试图找出一种方法，我可以拥有一个动态中心点，而不是让它静态，有没有一种方法可以通过边界方法做到这一点？

这是我到目前为止所拥有的。

```
<pre>
<!-- language: lang-js -->
<script type="text/javascript">

var map;
var arrMarkers = [];
var arrInfoWindows = [];

function mapInit() {
    var centerCoord = new google.maps.LatLng(18.23, -66.39); // Puerto Rico
    var mapOptions = {
        zoom: 9,
        center: centerCoord,
        mapTypeId: google.maps.MapTypeId.TERRAIN
    };

    map = new google.maps.Map(document.getElementById("map"), mapOptions);

    $.getJSON("map.json", {}, function (data) {
        $.each(data.places, function (i, item) {
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(item.lat, item.lng),
                map: map,
                title: item.title
            });
            arrMarkers[i] = marker;
            var infowindow = new google.maps.InfoWindow({
                content: "<h3>" + item.title + "</h3><p>" + item.description + "</p>"
            });
            arrInfoWindows[i] = infowindow;
            google.maps.event.addListener(marker, 'click', function () {
                infowindow.open(map, marker);
            });
        });
    });
}
$(function () {
    // initialize map (create markers, infowindows and list)
    mapInit();
}); < /script>

</pre> 
```

例子在这里。[http://thirstythursdays.co.uk/google-maps-native2/](http://thirstythursdays.co.uk/google-maps-native2/)

再次感谢，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:19:12.400

您可以按如下方式执行此操作。

```
var map;
var arrMarkers = [];
var arrInfoWindows = [];

function mapInit() {
    var centerCoord = new google.maps.LatLng(18.23, -66.39); // Puerto Rico
    var mapOptions = {
        zoom: 9,
        center: centerCoord,
        mapTypeId: google.maps.MapTypeId.TERRAIN
    };

    map = new google.maps.Map(document.getElementById("map"), mapOptions);
    // Declare your bounds
    var bounds = new google.maps.LatLngBounds();

    $.getJSON("map.json", {}, function (data) {
        $.each(data.places, function (i, item) {
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(item.lat, item.lng),
                map: map,
                title: item.title
            });

            // Declare lat/long 
        var latlng = new google.maps.LatLng(item.lat, item.lng);

        // Add lat/long to bounds
        bounds.extend(latlng);

            arrMarkers[i] = marker;
            var infowindow = new google.maps.InfoWindow({
                content: "<h3>" + item.title + "</h3><p>" + item.description + "</p>"
            });
            arrInfoWindows[i] = infowindow;
            google.maps.event.addListener(marker, 'click', function () {
                infowindow.open(map, marker);
            });
        });
    });

    // Fit map to bounds.
     map.fitBounds(bounds); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:17:45.633

将所有点添加到 google.maps.LatLngBounds 对象，在结果边界上调用 map.fitBounds。（未测试）

```
$.getJSON("map.json", {}, function(data){
var bounds = new google.maps.LatLngBounds();
  $.each(data.places, function(i, item){
    //$("#markers").append('<li><a href="#" rel="' + i + '">' + item.title + '</a></li>');
var latlng = new google.maps.LatLng(item.lat, item.lng);
bounds.extend(latlng);
            var marker = new google.maps.Marker({
                position: latlng,
                map: map,
                title: item.title
            });
            arrMarkers[i] = marker;
            var infowindow = new google.maps.InfoWindow({
                content: "<h3>"+ item.title +"</h3><p>"+ item.description +"</p>"
            });
            arrInfoWindows[i] = infowindow;
            google.maps.event.addListener(marker, 'click', function() {
                infowindow.open(map, marker);
            });
        });
    map.fitBounds(bounds);
    });
} 
```

[例子](http://www.geocodezip.com/v3_SO_JSON_fitBounds.html)

# javascript - 解释所需的 Javascript 代码（递归示例）

> ID：15572212
> 
> 赞同：-1
> 
> 时间：2013-03-22T14:00:30.537
> 
> 标签：javascript

我的主要问题是我似乎无法理解如何在纸上解决问题，更不用说理解代码或编写自己的代码了。这是我正在阅读的一本书 Eloquent JavaScript 的摘录。

考虑这个难题：从数字 1 开始，反复加 5 或乘以 3，可以产生无限数量的新数字。你将如何编写一个函数，给定一个数字，试图找到产生该数字的一系列加法和乘法？

¶ 例如，数字 13 可以通过先将 1 乘以 3，然后再将 5 加两次来得到。15 号根本无法到达。

¶ 这里是解决方案：

```
 function findSequence(goal) {
   function find(start, history) {
     if (start == goal)
      return history;
     else if (start > goal)
       return null;
     else
       return find(start + 5, "(" + history + " + 5)") ||
              find(start * 3, "(" + history + " * 3)");
   }
   return find(1, "1");
 }

 print(findSequence(24)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:07:41.603

```
function findSequence(goal) {

   // define a function that has a 'start' number (current total),
   // and a string that is the history of what we've done so far
   // (and note that for this function, the 'goal' parameter above is in scope).
   function find(start, history) {
     // if we've reached the goal, return the string that says how we got there
     if (start == goal)
      return history;
     // if we've overshot, return null
     else if (start > goal)
       return null;
     else
       // call this same function (recursion) with two different possibile ways of
       // getting closer to the goal - one adding 5 and one multiplying by 3...
       // the or ('||') operator will return the first of the two that is not null
       return find(start + 5, "(" + history + " + 5)") ||
              find(start * 3, "(" + history + " * 3)");
   }
   // start at 1
   return find(1, "1");
 } 
```

# entity-framework - .net 4.5外键数据注释c#

> ID：15572214
> 
> 赞同：1
> 
> 时间：2013-03-22T14:00:40.317
> 
> 标签：entity-framework, entity-framework-5, data-annotations

`[foreign key("blah")]`.net 4.5 不再支持了吗？当我导入数据注释模型时，智能感知告诉我它不存在。逆属性也是如此。他们是否试图让我们将流利的 api 用于这些类型的操作？fluent api vs data annotations有什么标准吗？

模型 ：

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;

namespace DevCentral.Entities
{   
    public partial class Category
    {    
        [Key]
        public int Id { get; set; }

        [MaxLength(75), MinLength(1)]
        public string Name { get; set; }

        [Required]
        public int ClassificationId { get; set; }

        [ForeignKey("ClassificationId"), InverseProperty("Categories")]
        public virtual Classification Classification { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:13:47.547

ForeignKey 在 .net 4.5 中仍然非常活跃，请检查：

[http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.schema.foreignkeyattribute.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.schema.foreignkeyattribute.aspx)

您可能在项目中缺少对 System.ComponentModel.DataAnnotations.dll 程序集的引用。

**更新：** 正如@mtleising 评论的`ForeignKeyAttribute`那样，.net 4.5 的命名空间是 `System.ComponentModel.DataAnnotations.Schema`

# asp.net - IIS 7.5 中超过 1000 个重定向是否会影响站点响应时间和/或性能

> ID：15572216
> 
> 赞同：2
> 
> 时间：2013-03-22T14:00:44.607
> 
> 标签：asp.net, iis-7, url-rewrite-module

我希望标题确实已经解释了我的问题。我们有一个网站，在 rewritemap（iis 7.5 重写模块）中定义了 1000 多个静态 url。如果这个数字仍然增加，这会影响站点响应时间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:16:52.247

对于 RewriteMap 来说，1,000 个条目应该不是问题，它被实现为一个性能非常好的哈希表。更具影响力的是您使用的规则的复杂性，因此如果您执行非常复杂的 RegEx 或类似的事情，它可能会产生影响。特别是如果您使用的是 PHP 或 ASP 之类的东西，与实际的动态内容处理程序相比，性能影响将完全可以忽略不计。

但是说了这么多，最好的事情总是衡量你的具体情况。

# c++ - CallWindowProc 在退出时崩溃

> ID：15572221
> 
> 赞同：1
> 
> 时间：2013-03-22T14:00:49.927
> 
> 标签：c++, winapi

为了挂钩 a `wndproc`，我编写了 a`wndprochook`并使用`SetWindowLong`：

```
wndproc=(WNDPROC)GetWindowLong(hwnd_1,GWL_WNDPROC);
SetWindowLong(hwnd_1,GWL_WNDPROC,(LONG)wndprochook); 
```

`wndproc`现在我必须在函数中和函数末尾做一些事情，我调用原来的`wndproc`：

```
return wndproc(hwnd, uMsg, wParam, lParam); 
```

它失败了，但感谢上帝，我发现`CallWindowProc`：

```
return CallWindowProc(wndproc, hwnd, uMsg, wParam, lParam); 
```

现在它正在工作。所以**问题1：为什么我们必须使用`CallWindowProc`？简单地调用时缺少什么`wndproc`？**

钩子运行良好，但是当我退出程序时，它崩溃了。当然，一切都完成了，崩溃实际上并没有影响任何事情。但是看到崩溃仍然很糟糕。所以**问题2：这里可能发生了什么以及如何解决它？**

很抱歉，我没有关于原始程序如何自行关闭的信息，因为我所做的只是挂钩`wndproc`以捕获一些消息。所以我只是希望以前遇到过类似情况的经验丰富的人可以提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:07:02.543

从以下文档`CallWindowProc`：

> “如果这个值是通过调用参数设置为or的`GetWindowLong`函数获得的，它实际上要么是一个窗口或对话框过程的地址，要么是一个**只对 有意义的特殊内部值****”**`nIndex``GWL_WNDPROC``DWL_DLGPROC`**`CallWindowProc`**

你不能调用“特殊的内部值”，除非做同样的事情`CallWindowProc`，最简单的方法是调用`CalLWindowProc`......

顺便说一句，看看`SetWindowSubclass`，它可能会为你减轻一些事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T17:38:21.383

关于问题2：

从另一个答案的评论中，听起来您的子类 wndprochook 位于注入进程的 DLL 中。如果是这种情况，那么在退出期间，您的 DLL 可能会在窗口仍有未决消息时被卸载。所以 Window 的类仍然指向你的 wndproc，但是那个代码被卸载了，所以它崩溃了。

最安全的做法可能是在关闭之前恢复原始 wndproc。例如，当您的子类看到 WM_DESTROY 或 WM_NCDESTROY 时，您基本上颠倒了您在子类化窗口时所做的步骤：在使用该消息执行 CallWindowProc 之前恢复窗口类中的原始 wndproc 字段。您的代码将不再被调用，即使该窗口还有更多消息流入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T07:25:35.437

谢谢阿德里安·麦卡锡。

```
Private Function WndProc(ByVal hWnd As Long, ByVal MSG As Long, ByVal wParam As Long, ByVal lParam As Long) As Long
Select Case MSG
    Case WM_CUT, WM_PASTE, WM_CLEAR
        WndProc= 1
    Case WM_DESTROY, WM_NCDESTROY
        Call UnHookRKey(hWnd)
    Case Else
        WndProc= CallWindowProc(lngPrevWndProc, hWnd, MSG, wParam, lParam)
End Select 
```

结束功能

# javascript - 将变量传递给函数callBack

> ID：15572223
> 
> 赞同：2
> 
> 时间：2013-03-22T14:00:51.433
> 
> 标签：javascript, cordova, callback

如何获取 fileDoesNotExist 回调的变量、url 和名称：

```
window.checkIfFileExists = function(path, url, name) {
  return window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, (function(fileSystem) {
    return fileSystem.root.getFile(path, {
      create: false
    }, fileExists, fileDoesNotExist);
  }), getFSFail);
};

fileDoesNotExist = (fileEntry, url, name) ->
  downloadImage(url, name) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:07:18.733

phoneGap的`getFile`函数有两个回调函数。您在这里犯的错误`fileDoesNotExist`是它应该调用两个函数，而不是引用一个变量。

像下面这样的东西会起作用：

```
window.checkIfFileExists = function(path, url, name) {
  return window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, (function(fileSystem) {
    return fileSystem.root.getFile(path, {
      create: false
    }, 
    function(e) {
      //this will be called in case of success
    },
    function(e) {
      //this will be called in case of failure
      //you can access path, url, name in here
    });
  }), getFSFail);
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:06:19.127

您可以传入一个匿名函数，并将它们添加到回调的调用中：

```
window.checkIfFileExists = function(path, url, name) {
  return window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, (function(fileSystem) {
    return fileSystem.root.getFile(path, {
      create: false
    }, fileExists, function(){
        //manually call and pass parameters
        fileDoesNotExist.call(this,path,url,name);
    });
  }), getFSFail);
}; 
```

# ios - Objective C - 相当于 PHP 包

> ID：15572242
> 
> 赞同：0
> 
> 时间：2013-03-22T14:02:15.930
> 
> 标签：ios, objective-c

Objective-C 中的 PHP 函数包的确切等价物是什么？例如 ：

```
$key = pack('H*', 'ABEFFF' );
$result = hash_hmac("SHA512", "Awesome message", $key) 
```

我正在寻找与 PHP pack 函数返回的字符串完全相同的字符串。

我已经阅读了这个主题：[https](https://stackoverflow.com/a/8950667/2199320) ://stackoverflow.com/a/8950667/2199320 但我无法从 NSData（ASCII、UTF-8、base 64 ......）中获得正确的 NSString。或者，如果这个函数真的有效，我需要一种方法将 NSData 的 hmac 哈希作为盐，将 NSString 作为消息......

我尝试了很多不同的解决方案，但都没有奏效......

# vba - 需要在命令提示符下运行 VBA 代码

> ID：15572243
> 
> 赞同：1
> 
> 时间：2013-03-22T14:02:20.680
> 
> 标签：vba, batch-file, tiff

我有一个 Tiff 文件拆分器 DLL，它有一个 VBA 代码：

```
Dim tsplit As New SCTiffPageSplitNetDLL.TiffPageSplitterDLL
Dim rslt as Integer
To call the function and split TIFF files, you could use the following:

rslt = tsplit.Tiff_PageSplit("C:\test\test.tif", "C:\outputdir") 
MsgBox rslt 
```

如何在 a 中运行这行代码`command prompt`？我需要用这段代码制作一个批处理文件（.bat）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:42:38.863

您可以将它放在一个 VBScript (.vbs) 文件中并使用 cscript 运行它。请参阅此线程[如何从 .bat 运行 .vbs](https://stackoverflow.com/questions/6216285/how-to-run-a-vbs-from-a-bat)

# jquery - 如何重置引导单选按钮组？

> ID：15572247
> 
> 赞同：1
> 
> 时间：2013-03-22T14:02:24.253
> 
> 标签：jquery, twitter-bootstrap

我在工具栏中使用引导单选按钮组，如果再次单击，我希望这些按钮能够被重置。到目前为止，我已经用这个[http://jsfiddle.net/a6xZt/](http://jsfiddle.net/a6xZt/)进行了尝试，但不幸的是它不起作用。

尽管我可以删除任何其他课程，但我无法删除该`active`课程。或者有没有办法重置整个组？非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:21:23.997

改变

```
<div class="btn-group btn-group-vertical mark_selector" data-toggle="buttons-radio"> 
```

至

```
<div class="btn-group btn-group-vertical mark_selector" data-toggle="buttons-checkbox"> 
```

编辑：

误读问题：如果收音机功能是强制性的，请尝试

$().button('切换')

正如引导文档所说（[http://twitter.github.com/bootstrap/javascript.html#buttons](http://twitter.github.com/bootstrap/javascript.html#buttons)）

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:35:07.293

我同意 spoutnik，您需要将数据切换更改为“按钮复选框”。

默认单选按钮功能不允许“未点击”。

此解决方案的唯一问题是您允许用户选择多个选项，默认使用复选框。

这是复选框所需的代码：

```
<div class="btn-group btn-group-vertical mark_selector" data-toggle="buttons-checkbox"> 
```

有一种方法可以改变复选框的工作方式，但请尝试为您快速解决。

# asp.net - 格式化 DataSet 中的数据

> ID：15572249
> 
> 赞同：0
> 
> 时间：2013-03-22T14:02:26.307
> 
> 标签：asp.net, vb.net, dataset

我从 xml 文件创建了一个数据集并将其附加到 gridview。我想如何格式化数据集中或网格视图中的数据，例如，更改列的标题文本或仅在我的网格视图中显示某些项目。

```
Dim xmlDataSet As New DataSet
xmlDataSet.ReadXml(GlobalClass.GlobalUrl)
GridView1.DataSource = xmlDataSet
GridView1.DataBind() 
```

无论如何如何处理数据集中的数据？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:14:52.397

您可以尝试使用这些帖子：

第一个定义：http: [//msdn.microsoft.com/en-us/library/zb0sdh0b.aspx](http://msdn.microsoft.com/en-us/library/zb0sdh0b.aspx)

注意：阅读有关方法和属性的这些链接非常有趣

链接 1：http: [//msdn.microsoft.com/fr-fr/library/system.data.dataset.aspx](http://msdn.microsoft.com/fr-fr/library/system.data.dataset.aspx)

链接 2：http: [//msdn.microsoft.com/fr-fr/library/system.data.dataset.tables.aspx](http://msdn.microsoft.com/fr-fr/library/system.data.dataset.tables.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:18:37.640

您可以这样做来重命名列：

```
xmlDataSet.Tables[0].Columns["CurrentColumnName"].ColumnName = "NewColumnName"; 
```

这是一种隐藏或显示列的方法：

```
xmlDataSet.Tables[0].Columns["ColumnName"].Visible = true; 
```

# php - php创建的文件不能通过FTP删除

> ID：15572250
> 
> 赞同：2
> 
> 时间：2013-03-22T14:02:27.180
> 
> 标签：php, file, ftp, file-permissions, delete-file

我在网上搜索了可能的解决方案，但这似乎让我越来越陷入困境。

一旦 PHP 创建了一个文件，该文件就不能被删除，同一目录中的其他文件可以被删除。如果一个目录是用PHP创建的，整个目录不能被FTP使用，我可以看到那个目录下的文件，但是不能删除、修改或上传到这个目录。

我确实在这里看到了很多这样的问题，但大多数都涉及权限问题，在这种情况下，所有权限、umask 和属性都与可以通过 FTP 删除的文件相同。

我还认为可能是该文件正在使用中，但事实并非如此，（lsof 结果为空，杀死 apache 和 nginx，通常释放文件也无济于事）。

服务器正在运行 PLESK 11.0.9 FTP 服务器是 ProFTPD。

这是由 PHP、PLESK 或 ProFTPD 本身引起的一些限制吗？

我希望你能帮助我，因为我很沮丧。如果您有任何可能有助于回答此问题的问题，请随时提问:)。

[编辑]更多细节为什么我认为这不是权限问题。

```
[root@srv domains]# lsattr
-------------e- ./test
-------------e- ./test2

[root@srv domains]# ls -als 
total 32 
4 drwxrwxrwx.  7 user0041 psacln  4096 Mar 22 06:41 . 
4 drwxr-x---. 12 user0041 psaserv 4096 Mar 22 07:28 .. 
4 drwxrwxrwx.  2 user0041 psacln  4096 Mar 22 06:30 test
4 drwxrwxrwx.  2 user0041 psacln  4096 Mar 22 06:34 test2

[root@srv domains]# lsof test
[root@srv domains]# 
```

我无法通过 ftp 对目录 test 执行任何操作，但我可以对目录 test2 执行任何操作

test 是使用 php 的 mkdir 命令创建的，而 test2 是通过 ssh 创建的，并且已经被正确的用户所拥有。

我还从输出中删除了一些不相关的条目

有关登录时运行的用户 proftpd 的更多信息：

```
[root@srv domains]# ps aux | grep ftp
10000     8508  0.5  0.0 152192  3684 ?        SNs  08:37   0:00 proftpd: user0041 - x: IDLE
[root@srv domains]# cat /etc/passwd | grep 10000
user0041:x:10000:505::/var/www/vhosts/domain.ltd:/bin/false 
```

出于隐私问题，我已将域名更改为 domain.ltd。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:06:11.057

看起来您的 FTP 用户无权删除运行 PHP 的用户创建的任何内容。您需要就此联系您的托管公司。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:11:58.703

很可能是用户权限问题。但是，如果您发布了一些用例，其中包含更多详细信息来描述您到底在做什么（文件名，进程，...），这可能会有所帮助

# php - 在 PHP 中膨胀 Flash CompressionAlgorithm.DEFLATE ByteArray

> ID：15572252
> 
> 赞同：0
> 
> 时间：2013-03-22T14:02:40.727
> 
> 标签：php, flash, apache-flex, actionscript

我正在尝试在 PHP 中膨胀 Flash 压缩缓冲区。

这是我在 Flex ActionScript 中的内容：

```
var comp:ByteArray = new ByteArray();
comp.writeObject(buffer);
comp.compress(CompressionAlgorithm.DEFLATE);
var request:URLRequest = new URLRequest(url);
request.method = URLRequestMethod.POST;
request.contentType = contentType;
request.data = comp;
loader.load(request); 
```

的内容`comp`会以post数据的形式上传到服务器。一个 php 脚本会膨胀它：

```
$contents = gzinflate(file_get_contents($file)); 
```

问题是这样一来， 的内容`$contents`与`buffer`. 它确实膨胀了，但它总是增加 4 个额外的字节。例如，32000 字节变成了 32004 字节。我不确定这是开始还是结束。

有没有关于这 4 个字节是什么的文档，我应该如何在 php 中扩充这些数据？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T03:22:08.503

原来，神奇的字母是`0C 83 F4 01`。而这 4 个字节被添加在未压缩数据的开头。我找不到任何关于此的文档。但是通过从每个 ByteArray 的开头删除这 4 个字节，我可以获得原始数据。

# soundcloud - 使用 SoundCloud 默认音频小部件，您可以将其设置为从 JavaScript 随机播放吗？

> ID：15572253
> 
> 赞同：2
> 
> 时间：2013-03-22T14:02:47.170
> 
> 标签：soundcloud, oembed

我正在使用默认的 SoundCloud 音频小部件来播放播放列表，并希望歌曲以随机顺序播放。我正在使用 SoundCloud JavaScript SDK oEmbed 对象（iframe 版本）。

```
<script src="//connect.soundcloud.com/sdk.js"></script>  

SC.oEmbed("//soundcloud.com/buzzinfly",  { 
  auto_play: true,   
  start_track: random_start_track,  
  iframe: true,  
  maxwidth: 480,  
  enable_api: true,  
  randomize: true 
 },  
 document.getElementById("soundcloud_player")); 
```

该文档没有提及任何随机化或随机播放属性，但 oembed 支持其他未记录的属性，如 start_track。

```
//developers.soundcloud.com/docs/oembed#parameters
//developers.soundcloud.com/docs/widget 
```

有谁知道在默认音频小部件中是否有一个属性可以随机播放歌曲顺序？

如果没有，有没有办法从默认的 SoundCloud 小部件中捕获事件，所以我可以在歌曲完成事件后播放一首随机歌曲？就像您可以使用自定义播放器一样。

//developers.soundcloud.com/docs/custom-player#events

```
$(document).bind('onPlayerTrackSwitch.scPlayer', function(event, track){  
  // goto random track   
}); 
```

谢谢

* * *

**更新**

这是我在得到 gryzzly 的帮助后使用的代码。

下一个按钮效果很好。我可以跳过随机歌曲。不幸的是，当曲目播放完毕时，我会听到两首歌曲的音频：播放列表中的下一首歌曲和在 FINISH 事件中跳到的随机曲目。

```
var widget = null;
var song_indexes = new Array();
var current_index = 0;

$(function() {
    var iframe = document.querySelector('#soundcloud_player iframe');
    widget = SC.Widget(iframe);        
    widget.bind(SC.Widget.Events.READY, function() {
        widget.unbind(SC.Widget.Events.FINISH);
        widget.bind(SC.Widget.Events.FINISH, function() {        
            play_next_shuffled_song();
        });

        widget.getSounds(function(sounds) {
            create_shuffled_indexes(sounds.length);
            play_next_shuffled_song();
        });               
    });
    $("#button_sc_next").on("click", play_next_shuffled_song);
});

function play_next_shuffled_song() {
    current_index++;
    if (current_index >= song_indexes.length) {
        current_index = 0;
    }  
    var track_number = song_indexes[current_index];
    widget.skip(track_number);
}

function create_shuffled_indexes (num_songs) {
    for (var i=0;i<num_songs;i++) {
        song_indexes.push(i);
    }
    song_indexes = shuffle(song_indexes);
}

//+ Jonas Raoni Soares Silva
//@ http://jsfromhell.com/array/shuffle [v1.0]
function shuffle(o){ //v1.0
    for(var j, x, i = o.length; i; j = parseInt(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
    return o;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T12:51:56.703

[您可以在此处](http://developers.soundcloud.com/docs/api/html5-widget)找到 Widget API 的文档。

伪代码类似于：

```
load widget
get widget sounds LENGTH /* say 5 */
create an ARRAY of that LENGTH and shuffle it /* to have something like [3, 1, 0, 2, 4] */
create function SKIP that will check if ARRAY still has any items in it (length is not 0) and skip player to array.pop() index /* pop will return the last item in the array and return its value */
attach event handler to FINISH events that will run SKIP function
run SKIP function first time yourself 
```

如果用户使用小部件 UI 中的“下一首”控件跳过，小部件将只播放列表中的下一首歌曲。您也许可以以某种方式检测到它并跳到另一个随机轨道。

我希望这有帮助！

# silverlight - ServiceStack Silverlight 服务客户端

> ID：15572254
> 
> 赞同：1
> 
> 时间：2013-03-22T14:02:48.787
> 
> 标签：silverlight, servicestack

我按照[https://github.com/ServiceStack/ServiceStack/wiki/SilverlightServiceClient](https://github.com/ServiceStack/ServiceStack/wiki/SilverlightServiceClient)上的说明进行操作，但我不确定本教程是否有效。一方面，我根本没有得到任何 ServiceClient 。其次，我不确定是否需要根据“ServiceClient 实现”下的代码构建它，或者它是否已经是 nuget 包的一部分。是的，我安装了 nuget 包。请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T05:36:36.970

查看对象浏览器中的 ServiceStack 程序集，看起来 ServiceClientBase 有多种风格。该教程可能已过时，因为我没有看到任何简单命名为“ServiceClient”的派生类型。也许我们要使用 AsyncServiceClient 代替？

# rspec - 最后如何阻止 rspec 运行测试单元？

> ID：15572257
> 
> 赞同：3
> 
> 时间：2013-03-22T14:02:50.097
> 
> 标签：rspec, testunit

Rspec 尝试在运行任何规范文件或整个测试套件结束时运行 Test::Unit 测试。仍然可以，因为我没有任何测试单元测试文件，但它会尝试将提供给 rspec 的命令行选项传递给 Test::Unit ，这会导致

```
Finished in 0.54616 seconds
7 examples, 0 failures
invalid option: -O
Test::Unit automatic runner.
Usage: /usr/local/bin/rspec [options] [-- untouched arguments]

-r, --runner=RUNNER              Use the given RUNNER.
                                 (c[onsole], f[ox], g[tk], g[tk]2, t[k])
-n, --name=NAME                  Runs tests matching NAME.
                                 (patterns may be used).
-t, --testcase=TESTCASE          Runs tests in TestCases matching TESTCASE.
                                 (patterns may be used).
-I, --load-path=DIR[:DIR...]     Appends directory list to $LOAD_PATH.
-v, --verbose=[LEVEL]            Set the output level (default is verbose).
                                 (s[ilent], p[rogress], n[ormal], v[erbose])
    --                           Stop processing options so that the
                                 remaining options will be passed to the
                                 test.
-h, --help                       Display this help.

Deprecated options:
    --console                    Console runner (use --runner).
    --gtk                        GTK runner (use --runner).
    --fox                        Fox runner (use --runner). 
```

如何阻止 rspec 运行测试单元测试？

我正在使用的测试宝石版本是

```
gem 'rspec', '~> 2.7'
gem 'rspec-instafail'
gem 'ci_reporter'
gem 'rspec-rails', '~> 2.7'
gem 'shoulda', :require => false # 2.3.3
gem 'factory_girl', '~> 2.6.4'
gem 'rr'
gem 'timecop'
gem 'rcov'
gem 'database_cleaner'
gem 'webmock', '~> 1.9.3'
gem 'vcr'
gem 'fakeweb', '~> 1.3.0'
gem 'spork', '~> 0.8.0'
gem 'webrat' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:15:53.070

[这个页面](http://www.jonathanleighton.com/articles/2012/stop-test-unit-autorun/)有你的问题的答案

临时解决方法是在 env.rb 文件中将 Test::Unit.run 设置为 true：

```
Test::Unit.run = true 
```

# php - 将数据库值传递给 JavaScript

> ID：15572259
> 
> 赞同：0
> 
> 时间：2013-03-22T14:02:54.657
> 
> 标签：php, javascript, mysql

我使用 MySQL joins 和 PHP 检索了我所有朋友的名字，这些名字目前在线。

现在我想在 JavaScript 中插入他们的名字以便与他们聊天。

```
<a href="javascript:void(0)" onclick="javascript:chatWith('Friend1')">Friend1 </a>
<a href="javascript:void(0)" onclick="javascript:chatWith('Friend2')">Friend2 </a> 
```

我无法做到这一点。因为我不知道如何在 PHP 中调用 JavaScript，反之亦然。

```
while($get_usernames=mysql_fetch_array($get_users_query)) {             
    echo '<br>'.$get_usernames['username'];                         
} 
```

我想在 JavaScript 中将每个显示`$get_usernames['username']`为 Friend1、Friend2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:07:01.523

您可以使用 AJAX 调用 php 页面并从中获取价值。

调用 php 页面并在查询后使用`echo`. 您可以`responseText`在 javascript中使用该值

[http://www.tizag.com/ajaxTutorial/ajaxphp.php](http://www.tizag.com/ajaxTutorial/ajaxphp.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:12:20.160

如果你想在 javascript 中放置一些 PHP 变量，一个简单的方法是简单地使用页面内的 php 循环来创建 a 标签。

像这样的东西：

```
$aTagList = "";
while($get_usernames=mysql_fetch_array($get_users_query)) {             
    $aTagList .= "<a href='javascript:void(0)' onclick='javascript:chatWith(\"".$get_usernames['username']."\")>".$get_usernames['username']."</a>";                         
} 
```

然后使用一些内联代码在页面中任何需要它的地方回显 $aTagList。

```
<?php echo $aTagList; ?> 
```

不知道我是否得到了所有的转义正确，但它应该给你正确的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T14:13:14.523

就像是：

```
<?php
$aUsernames = array();
while($get_usernames=mysql_fetch_array($get_users_query)) {             
    array_push($aUsernames, $get_usernames['username']);                         
}
foreach($aUsernames as $name) {
?>
<a href="javascript:void(0)" onclick="javascript:chatWith('<?php echo $name; ?>')"><?= $name; ?> </a>
<?php
}
?> 
```

使用 AJAX 当然要简洁得多，但是如果它全部在一个 PHP 文件中就足够了。

另外，我想鼓励您迁移到 PDO 或 Mysqli，因为不推荐使用 mysql 函数。

# php - 控制器方法和模型方法之间的胖模型和瘦控制器设计混淆

> ID：15572263
> 
> 赞同：3
> 
> 时间：2013-03-22T14:03:09.947
> 
> 标签：php, codeigniter, model-view-controller, model, controller

我是 MVC 的新手（使用 codeIgniter 作为我的例子），我已经阅读了 MVC 胖模型和瘦控制器 3 次，我得到了什么：

*   模型在控制器调用模型并传递要由视图呈现的数据时进行艰苦的工作

但我有一个困惑，例如我有一个管理页面会删除数据库中的产品数据，我会有这个代码（使用 codeIgniter）：

```
public function deleteProduct($id = '')
    {
        if( is_digit($id))
        {
            $this->load->model('productModel');
            $this->productModel->deleteById($id);

            //oops product has images in another DB table and in server, so i need to delete it
            $success = $this->_deleteProductImages($id);
        }
        else
        {
            //redirect because of invalid param
        }

            //if success TRUE then load the view and display success
            //else load the view and display error
    }

protected function _deleteProductImages($productId)
{
        $this->load->model('productModel');

        //return array of images path
        $imgs = $this->productModel->getImagesPath($productId);

        // after i got the imgs data, then delete the image in DB that references to the $productId
        $this->productModel->deleteImage($productId);
        foreach($imgs as $imgPath)
        {
            if(file_exists $imgPath) unlink($imgPath);
        }
} 
```

我的问题是：

在瘦控制器和胖模型的概念中，我应该将方法移动`_deleteProductImages($id)`到我的 productModel 还是应该这样保留它？如果您有其他更好的方法，请在此处指导我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:21:07.647

我的模型中有一个删除产品的方法。此方法将完成删除产品所需的所有工作（包括删除关联的数据库记录、文件等）。

如果操作成功，该方法将返回 TRUE。

如果无法删除关联的记录或文件，我会在其操作中记录该错误，可能会在 UI 中引发错误消息并继续。

该方法可能会调用其他模型中的其他方法……例如，我可能有一个 product_attributes 模型来存储所有产品的属性。该模型可能有一个方法：delete_by_product_id()。在这种情况下，我的产品模型将调用 product_attributes->delete_by_product_id()，它会处理关联记录的删除。

# delphi - 在离开时在 delphi 程序上捕获 global appcrash

> ID：15572269
> 
> 赞同：0
> 
> 时间：2013-03-22T14:03:23.707
> 
> 标签：delphi

我的 delphi 程序有时会在关闭时崩溃。（他被设计为通过指令关闭自己）

我的目标只是绕过该 Crash 错误（因此程序会自行关闭而不显示阻止应用程序关闭的讨厌的错误消息框）。

我想我需要一个全局异常处理程序。我知道我应该跟踪引发该错误的错误，但我需要做一些快速和肮脏的事情，所以现在只阻止那个错误消息框是一个有效的解决方案。

欢迎任何线索。

```
 Nom d’événement de problème:  APPCRASH
  Nom de l’application: AutomateBuilder.exe
  Version de l’application: 1.0.0.0
  Horodatage de l’application:  2a425e19
  Nom du module par défaut: KERNELBASE.dll
  Version du module par défaut: 6.1.7601.17965
  Horodateur du module par défaut:  506dbe50
  Code de l’exception:  0eedfade
  Décalage de l’exception:  0000c41f
  Version du système:   6.1.7601.2.1.0.1296.17
  Identificateur de paramètres régionaux:   1036
  Information supplémentaire n° 1:  c360
  Information supplémentaire n° 2:  c3603bb720f34381cd4463c13e515373
  Information supplémentaire n° 3:  04ba
  Information supplémentaire n° 4:  04ba20d4fba8ec9ad3a49cccf38783e 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:15:25.927

见 SetErrorMode

> 控制系统是否将处理指定类型的严重错误或进程是否将处理它们。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms680621%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680621%28v=vs.85%29.aspx)

# java - itext 字体 UnsupportedCharsetException

> ID：15572273
> 
> 赞同：4
> 
> 时间：2013-03-22T14:03:33.497
> 
> 标签：java, character-encoding, fonts, itext

我正在尝试在 Java Web 应用程序中使用 iText（版本 5.4.0）创建 pdf 文档，但遇到了字体问题。

Web 应用程序是多语言的，因此用户可以以各种语言（例如英语、法语、立陶宛语、中文、日语、阿拉伯语等）将信息保存到系统中。

当我尝试将 pdf 配置为输出一些示例日语文本时，它没有显示出来，因此我开始遵循官方“iText in Action”一书中的示例。我遇到的问题是，当我尝试使用 BaseFont.IDENTITY_H 编码配置字体时，出现以下错误：

```
java.nio.charset.UnsupportedCharsetException: Identity-H
    at java.nio.charset.Charset.forName(Charset.java:505)
    at com.itextpdf.text.pdf.PdfEncodings.convertToBytes(PdfEncodings.java:186)
    at com.itextpdf.text.pdf.Type1Font.<init>(Type1Font.java:276)
    at com.itextpdf.text.pdf.BaseFont.createFont(BaseFont.java:692)
    at com.itextpdf.text.pdf.BaseFont.createFont(BaseFont.java:615)
    at com.itextpdf.text.pdf.BaseFont.createFont(BaseFont.java:450) 
```

书中或谷歌搜索都没有提到这个问题。

关于我可能错过的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:17:41.273

正如您可能从两个 Michaels 的答案中了解到的那样，您错误地假设标准 Type 1 字体 Times Roman 和`IDENTITY_H`兼容。如果要使用，则必须更改字体，如果`IDENTITY_H`要使用标准 Type 1 字体，则必须更改编码（在这种情况下，使用`BaseFont.EMBEDDED`没有意义，因为从不嵌入标准 Type 1 字体）。如果我没有在我的书中提到这一点，我很抱歉。我认为这有点微不足道。可以从我写的关于复合字体的文章中推断出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-28T04:59:39.383

我不认为有任何一种编码适用于所有语言，带有字体嵌入。例如，您假设选择 UTF-8 编码并将字体嵌入设置为 true 将嵌入字体，但事实并非如此。

我发现自己不得不这样做，因为我事先不知道文本的语言：

```
try {
  // Try to embed the font.
  // This doesn't work for type 1 fonts.
  return FontFactory.getFont(fontFace, BaseFont.IDENTITY_H, 
      true, fontSize, fontStyle, textColor);
} catch (ExceptionConverter e) {
  return FontFactory.getFont(fontFace, "UTF-8", true, 
      fontSize, fontStyle, textColor);
} 
```

（异常类可能不同，因为我使用的是旧版本的 iText -- 2.1。）

与许多 iText 的东西一样，这没有很好的文档记录，并且使简单的东西变得不必要地困难。

# javascript - Soundmanager2 mp3 播放器按钮预加载下一个声音

> ID：15572275
> 
> 赞同：1
> 
> 时间：2013-03-22T14:03:39.193
> 
> 标签：javascript, jquery, soundmanager2

我使用 Soundmanager2 的 mp3 播放器按钮在我的网站上播放 mp3 链接。为了在播放当前 mp3 期间预加载下一个 mp3，我使用了以下修改。

```
play: function() {
sm.load('basicMP3Sound'+(1*this._data.oLink.title)+1);
      //mycode end
      pl.removeClass(this._data.oLink,this._data.className);
      this._data.className = pl.css.sPlaying;
      pl.addClass(this._data.oLink,this._data.className);

}, 
```

在上面的示例中，您可能会注意到 this._data.oLink.title 中的标题标签**，**我将其添加到 mp3 链接中以简单的方式处理文件顺序，例如：

```
<a href="/quran/assets/audio/Menshawi_16kbps/002001.mp3" class="sm2_button" title="0">/002001.mp3</a> 
```

但是，我注意到在播放当前 mp3 期间没有预加载下一个 mp3 链接。这是因为下一个 mp3 没有连续播放或在播放完上一个 mp3 后开始播放。换句话说，下载需要一些时间或延迟。

我的代码有问题吗？或者你有什么建议？

> **注意**这个 mp3 层的生活演示[可以在这个链接中找到](http://quran.2index.net/viewSura/6/page:2)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T03:50:15.550

编辑：使用[SoundManager 内联按钮播放器的方法](http://www.schillmania.com/projects/soundmanager2/demo/mp3-player-button/)

在下面的设置参数中，`mp3-player-button.js`在`config`哪里`playNext : true|false`找到（第 39 行），将其更新为如下所示：

```
...
this.config = {
    // configuration options
    playNext: true, // stop after one sound, or play through list until end
    autoPlay: false,  // start playing the first sound right away
    preloadNext :  true // preload next sound when previous sound starts to play
};
... 
```

然后，在`this.events`对象下方（第 96 行），修改`play`函数以预加载下一个声音：

```
...
this.events = {

// handlers for sound events as they're started/stopped/played

play: function() {
  pl.removeClass(this._data.oLink,this._data.className);
  this._data.className = pl.css.sPlaying;
  pl.addClass(this._data.oLink,this._data.className);

  if (pl.config.preloadNext) {
    var nextLink = (pl.indexByURL[this._data.oLink.id]+1);
    if (nextLink<pl.links.length) {
     sm.load(nextLink)
    }
  }
 },
... 
```

总之，当一首歌曲开始时，我们检查是否有下一首歌曲；如果有，我们`id`从实例化 SoundManager 时创建的声音数组中提取它。在这种情况下， SoundManager 是`sm`，所以我们只需将`id`下一首歌曲的 传递给`sm.load()`函数。

这是一个[现场演示：http://plnkr.co/edit/mpBkfDIrLNduMAWJjRfN](http://plnkr.co/edit/mpBkfDIrLNduMAWJjRfN)。

* * *

~~试试这个方法：~~

使用[方法](http://www.schillmania.com/projects/soundmanager2/demo/api/)`onplay`的和`onfinish`事件，您可以链接一系列相互委托的文件。[`createSound`](http://www.schillmania.com/projects/soundmanager2/demo/api/)

明确告诉`firstSound`：“当你开始播放时，*预加载*下一个声音，当你完成播放时，*播放*下一个声音”

### JavaScript

```
var firstSound = soundManager.createSound({
    id: 'firstSound',
    url: 'path/to/your/firstSound.mp3'
});
var secondSound = soundManager.createSound({
    id: 'secondSound',
    url: 'path/to/your/secondSound.mp3'
});
// Kickoff first sound
firstSound.load();
// Define the chain of events
firstSound.play({
    onplay: function () {
        // When `firstSound` starts, preload `secondSound`
        secondSound.load();
    },
    onfinish: function () {
        // Repeat, with next sound
        secondSound.play({...
        })
    }
}); 
```

# haskell - 在 Haskell 中优化 Perlin 噪声

> ID：15572277
> 
> 赞同：6
> 
> 时间：2013-03-22T14:03:39.907
> 
> 标签：haskell, optimization, perlin-noise

（此程序的依赖项：`vector --any`和`JuicyPixels >= 2`。代码可用作[Gist](https://gist.github.com/rhymoid/5221478)。）

```
{-# LANGUAGE Haskell2010 #-}
{-# LANGUAGE BangPatterns #-}

import Control.Arrow
import Data.Bits
import Data.Vector.Unboxed ((!))
import Data.Word
import System.Environment (getArgs)

import qualified Codec.Picture as P
import qualified Data.ByteString as B
import qualified Data.Vector.Unboxed as V 
```

我尝试将[Ken Perlin 改进的噪音](http://mrl.nyu.edu/~perlin/noise/)移植 到 Haskell，但我不完全确定我的方法是否正确。主要部分应该很好地推广到更高和更低的维度，但这是以后的事情：

```
perlin3 :: (Ord a, Num a, RealFrac a, V.Unbox a) => Permutation -> (a, a, a) -> a
perlin3 p (!x', !y', !z')
  = let (!xX, !x) = actuallyProperFraction x'
        (!yY, !y) = actuallyProperFraction y'
        (!zZ, !z) = actuallyProperFraction z'

        !u = fade x
        !v = fade y
        !w = fade z

        !h = xX
        !a = next p h + yY
        !b = next p (h+1) + yY
        !aa = next p a + zZ
        !ab = next p (a+1) + zZ
        !ba = next p b + zZ
        !bb = next p (b+1) + zZ
        !aaa = next p aa
        !aab = next p (aa+1)
        !aba = next p ab
        !abb = next p (ab+1)
        !baa = next p ba
        !bab = next p (ba+1)
        !bba = next p bb
        !bbb = next p (bb+1)

    in
        lerp w
            (lerp v
                (lerp u
                    (grad aaa (x, y, z))
                    (grad baa (x-1, y, z)))
                (lerp u
                    (grad aba (x, y-1, z))
                    (grad bba (x-1, y-1, z))))
            (lerp v
                (lerp u
                    (grad aab (x, y, z-1))
                    (grad bab (x-1, y, z-1)))
                (lerp u
                    (grad abb (x, y-1, z-1))
                    (grad bbb (x-1, y-1, z-1)))) 
```

这当然伴随着函数中提到的几个函数`perlin3` ，我希望它们尽可能高效：

```
fade :: (Ord a, Num a) => a -> a
fade !t | 0 <= t, t <= 1 = t * t * t * (t * (t * 6 - 15) + 10)

lerp :: (Ord a, Num a) => a -> a -> a -> a
lerp !t !a !b | 0 <= t, t <= 1 = a + t * (b - a)

grad :: (Bits hash, Integral hash, Num a, V.Unbox a) => hash -> (a, a, a) -> a
grad !hash (!x, !y, !z) = dot3 (vks `V.unsafeIndex` fromIntegral (hash .&. 15)) (x, y, z)
  where
    vks = V.fromList
        [ (1,1,0), (-1,1,0), (1,-1,0), (-1,-1,0)
        , (1,0,1), (-1,0,1), (1,0,-1), (-1,0,-1)
        , (0,1,1), (0,-1,1), (0,1,-1), (0,-1,-1)
        , (1,1,0), (-1,1,0), (0,-1,1), (0,-1,-1)
        ]

dot3 :: Num a => (a, a, a) -> (a, a, a) -> a
dot3 (!x0, !y0, !z0) (!x1, !y1, !z1) = x0 * x1 + y0 * y1 + z0 * z1

-- Unlike `properFraction`, `actuallyProperFraction` rounds as intended.
actuallyProperFraction :: (RealFrac a, Integral b) => a -> (b, a)
actuallyProperFraction x
  = let (ipart, fpart) = properFraction x
        r = if x >= 0 then (ipart, fpart)
                      else (ipart-1, 1+fpart)
    in r 
```

对于排列组，我只是复制了 Perlin 在他的网站上使用的一个：

```
newtype Permutation = Permutation (V.Vector Word8)

mkPermutation :: [Word8] -> Permutation
mkPermutation xs
    | length xs >= 256
    = Permutation . V.fromList $ xs

permutation :: Permutation
permutation = mkPermutation
    [151,160,137,91,90,15,
   131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,
   190, 6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,
   88,237,149,56,87,174,20,125,136,171,168, 68,175,74,165,71,134,139,48,27,166,
   77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,
   102,143,54, 65,25,63,161, 1,216,80,73,209,76,132,187,208, 89,18,169,200,196,
   135,130,116,188,159,86,164,100,109,198,173,186, 3,64,52,217,226,250,124,123,
   5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,
   223,183,170,213,119,248,152, 2,44,154,163, 70,221,153,101,155,167, 43,172,9,
   129,22,39,253, 19,98,108,110,79,113,224,232,178,185, 112,104,218,246,97,228,
   251,34,242,193,238,210,144,12,191,179,162,241, 81,51,145,235,249,14,239,107,
   49,192,214, 31,181,199,106,157,184, 84,204,176,115,121,50,45,127, 4,150,254,
   138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180
   ]

next :: Permutation -> Word8 -> Word8
next (Permutation !v) !idx'
  = v `V.unsafeIndex` (fromIntegral $ idx' .&. 0xFF) 
```

而这一切都与 JuicyPixels 联系在一起：

```
main = do
    [target] <- getArgs
    let image = P.generateImage pixelRenderer 512 512
    P.writePng target image
  where
    pixelRenderer, pixelRenderer' :: Int -> Int -> Word8
    pixelRenderer !x !y
        = floor $ ((perlin3 permutation ((fromIntegral x - 256) / 32,
          (fromIntegral y - 256) / 32, 0 :: Double))+1)/2 * 128

    -- This code is much more readable, but also much slower.
    pixelRenderer' x y
        = (\w -> floor $ ((w+1)/2 * 128)) -- w should be in [-1,+1]
        . perlin3 permutation
        . (\(x,y,z) -> ((x-256)/32, (y-256)/32, (z-256)/32))
        $ (fromIntegral x, fromIntegral y, 0 :: Double) 
```

我的问题是这`perlin3`对我来说似乎很慢。如果我对其进行概要分析，`pixelRenderer` 也会花费很多时间，但我现在将忽略它。不知道怎么优化`perlin3`。我试图用 bang 模式提示 GHC，这将执行时间缩短了一半，这很好。显式特化和内联对`ghc -O`. `perlin3`应该这么慢？

* * *

**更新**：这个问题的早期版本提到了我的代码中的一个错误。问题已经解决了; 原来我的旧版本有问题`actuallyProperFraction`。它隐式地将浮点数的整数部分四舍五入为`Word8`，然后从浮点数中减去它以获得小数部分。由于`Word8`只能取介于`0`和`255`包含之间的值，因此对于该范围之外的数字（包括负数），这将无法正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T18:49:55.733

此代码似乎主要受计算限制。它可以改进一点，但不会改进很多，除非有一种方法可以使用更少的数组查找和更少的算术。

有两种有用的工具可用于测量性能：分析和代码转储。我添加了一个 SCC 注释，`perlin3`以便它显示在配置文件中。然后我用`gcc -O2 -fforce-recomp -ddump-simpl -prof -auto`. 该`-ddump-simpl`标志打印简化的代码。

*Profiling：*在我的电脑上，运行程序需要 0.60 秒，大约 20% 的执行时间（0.12 秒）`perlin3`根据 profile 花费在上面。请注意，我的个人资料信息的精度约为 +/-3%。

*简化器输出：*简化器产生相当干净的代码。 `perlin3`被内联到`pixelRenderer`中，所以这是您要查看的输出部分。大多数代码由未装箱的数组读取和未装箱的算术组成。为了提高性能，我们希望消除一些这种算法。

一个简单的更改是消除运行时检查`SomeFraction`（这不会出现在您的问题中，而是您上传的代码的一部分）。这将程序的执行时间减少到 0.56 秒。

```
-- someFraction t | 0 <= t, t < 1 = SomeFraction t
someFraction t = SomeFraction t 
```

接下来，在简化器中显示了几个数组查找，如下所示：

```
 case GHC.Prim.indexWord8Array#
                        ipv3_s23a
                        (GHC.Prim.+#
                           ipv1_s21N
                           (GHC.Prim.word2Int#
                              (GHC.Prim.and#
                                 (GHC.Prim.narrow8Word#
                                    (GHC.Prim.plusWord# ipv5_s256 (__word 1)))
                                 (__word 255)))) 
```

原始操作`narrow8Word#`用于从a 强制`Int`转换为 a `Word8`。我们可以通过在 的定义中使用`Int`而不是来摆脱这种强制。`Word8``next`

```
next :: Permutation -> Int -> Int
next (Permutation !v) !idx'
  = fromIntegral $ v `V.unsafeIndex` (fromIntegral idx' .&. 0xFF) 
```

这将程序的执行时间减少到 0.54 秒。仅考虑在 中花费的时间`perlin3`，执行时间已经（大约）从 0.12 秒下降到 0.06 秒。尽管很难衡量剩余时间的去向，但它很可能分散在剩余的算术和数组访问中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T09:58:39.953

在我的机器上，带有散热器优化的参考代码需要 0.19 秒。

首先，我已经使用`JuicyPixels`了我最喜欢的标志（它们在[此处](http://hackage.haskell.org/packages/archive/yarr/1.3.1/doc/html/Data-Yarr.html)给出）：`yarr``yarr-image-io``-Odph -rtsopts -threaded -fno-liberate-case -funbox-strict-fields -fexpose-all-unfoldings -funfolding-keeness-factor1000 -fsimpl-tick-factor=500 -fllvm -optlo-O3`

```
import Data.Yarr as Y
import Data.Yarr.IO.Image as Y
...

main = do
    [target] <- getArgs
    image <- dComputeS $ fromFunction (512, 512) (return . pixelRenderer)
    Y.writeImage target (Grey image)
  where
    pixelRenderer, pixelRenderer' :: Dim2 -> Word8
    pixelRenderer (y, x)
        = floor $ ((perlin3 permutation ((fromIntegral x - 256) / 32,
          (fromIntegral y - 256) / 32, 0 :: Double))+1)/2 * 128

    -- This code is much more readable, but also much slower.
    pixelRenderer' (y, x)
        = (\w -> floor $ ((w+1)/2 * 128)) -- w should be in [-1,+1]
        . perlin3 permutation
        . (\(x,y,z) -> ((x-256)/32, (y-256)/32, (z-256)/32))
        $ (fromIntegral x, fromIntegral y, 0 :: Double) 
```

这使程序速度提高了 30%，即 0.13 秒。

其次，我已将标准的使用替换`floor`为

```
doubleToByte :: Double -> Word8
doubleToByte f = fromIntegral (truncate f :: Int) 
```

这是已知问题（谷歌“haskell floor performance”）。执行时间减少到 52 毫秒（0.052 秒），几乎是 3 倍。

最后，为了好玩，我尝试并行计算噪声（`dComputeP`而不是在命令行运行中）`dComputeS`。`+RTS -N4`程序花费了 36 毫秒，包括大约 10 毫秒的 I/O 常数。

# python - 按名称分类列表并计数

> ID：15572282
> 
> 赞同：0
> 
> 时间：2013-03-22T14:03:58.587
> 
> 标签：python, list, slice, dictionary

我有一个这样的行列表

```
animals = ['i am a dog', 'i am a cat','i am a dog','i am a bird','i am a dog'] 
```

我需要对列表进行分类，以便按它们是什么动物对它们进行分类。然后我需要对它们进行计数，如果每个类别的动物超过 2 只，则打印一条消息等。

我会通过对 7+ 个字符或其他方法使用切片来对列表进行分类吗？如果有人能给我一个例子，那就太好了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:15:19.910

你可以使用collectios.Counter。

您可以使用以下内容：

```
from collections import Counter

animals = [var[7:] for var in animals]
cnt = Counter(animals)

for ani in animals:
    if cnt[ani] > 2:
        print ani 
```

# php - 返回按周 MySQL 分组的行数

> ID：15572283
> 
> 赞同：8
> 
> 时间：2013-03-22T14:04:00.790
> 
> 标签：php, mysql, sql, database

我正在尝试从数据按周分组的 MySQL 表中获取行数。

到目前为止，我的查询是：

```
 "SELECT count(*) as tweets, twitTimeExtracted as date 
  FROM scene.twitData 
  group by week(twitTimeExtracted)" 
```

此查询返回以下数据：

![在此处输入图像描述](../Images/db708b8de0b663113724be920de91fa1.png)

如您所见，周数不正确，我预计从 1 月 7 日星期一（7、14、21、28、4、11 等）开始到本周的每周数据。

我还尝试了原始查询的修改版本：

```
SELECT count(*) as tweets, twitTimeExtracted as date 
FROM scene.twitData 
WHERE date(twitTimeExtracted) 
   BETWEEN '2013-01-07' and '2013-03-11' 
group by week(twitTimeExtracted) 
```

这将返回与第一个查询类似的结果。

可能与存储在 DATETIME: twitTimeExtracted 列中的一些数据不一致的几行数据？我真的不知道我对 MySQL 不是很有经验。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-22T14:45:25.333

这会将`datetime`值转换为一周中适当的星期一

```
select count(*) as tweets,
       str_to_date(concat(yearweek(twitTimeExtracted), ' monday'), '%X%V %W') as `date`
from twitData 
group by yearweek(twitTimeExtracted) 
```

[`yearweek`](https://dev.mysql.com/doc/refman/en/date-and-time-functions.html#function_yearweek)返回周和年。与字符串一起`monday`，[`str_to_date`](https://dev.mysql.com/doc/refman/en/date-and-time-functions.html#function_str-to-date)为您提供星期一的`datetime`值。

如果您的一周从[Monday](http://www.timeanddate.com/calendar/days/#monday)开始，请`yearweek(twitTimeExtracted, 1)`改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:10:57.413

始终获得一周中的星期一的一种选择是使用 adddate：

```
SELECT count(*) as tweets, adddate(twitTimeExtracted, INTERVAL 2-DAYOFWEEK(twitTimeExtracted) DAY)
FROM twitData 
WHERE date(twitTimeExtracted) 
   BETWEEN '2013-01-07' and '2013-03-11' 
GROUP BY adddate(twitTimeExtracted, INTERVAL 2-DAYOFWEEK(twitTimeExtracted) DAY) 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/4e680/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T14:17:26.727

试试这个：

```
 SELECT count(*) as tweets, 
     date_add('7 Jan 2012', day, datediff('7 Jan 2012', twitTimeExtracted)) % 7   
 FROM scene.twitData 
 group by date_add('7 Jan 2012', day, datediff('7 Jan 2012', twitTimeExtracted)) % 7 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-10T12:18:31.683

另一种解决方案：

```
SELECT DATE(DATE_SUB(yourDate, INTERVAL WEEKDAY(yourDate) DAY)); 
```

例如：

```
SELECT DATE(DATE_SUB(DATE("2016-04-11"), INTERVAL WEEKDAY(DATE("2016-04-11")) DAY)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-19T03:38:31.103

你也可以试试这个。

```
select 
DATE_ADD(DATE(date), INTERVAL (7 - DAYOFWEEK(date)) DAY) as weekend,
count(tweets)
from scene.twitData 
  group by weekend; 
```

# vb.net - 从字符串到双精度的标签转换无效

> ID：15572285
> 
> 赞同：0
> 
> 时间：2013-03-22T14:04:21.340
> 
> 标签：vb.net

我有以下代码，用于倒数计时器

```
 Dim countdown As Integer = SharpTextBox6.Text
    Label1.Text = "Sending to " + "" + SharpTextBox4.Text + "" + "For" + countdown.ToString - 1 
```

问题是它说“从字符串“值...”到加倍的对话无效。为什么它会转换成加倍？以及我该如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:07:51.673

**MSDN**：[***当您使用 + 运算符时，您可能无法确定是否会发生加法或字符串连接。使用 & 运算符进行连接以消除歧义并提供自记录代码。***](http://msdn.microsoft.com/en-us/library/9c5t70w2%28v=VS.71%29.aspx)

```
Label1.Text = "Sending to " & SharpTextBox4.Text & " For " & (countdown - 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:15:49.063

你可以试试这个：

```
Label1.Text = "Sending to " + SharpTextBox4.Text + "For" + (countdown - 1).ToString 
```

# c# - WCF 发送 JSON，方法中的对象始终为空

> ID：15572286
> 
> 赞同：0
> 
> 时间：2013-03-22T14:04:23.830
> 
> 标签：c#, jquery, json, wcf

我想将 JSON 数据发送到我的 WCF 服务，但在服务中，我的对象始终为空。我已经阅读了很多文章，但我无法解决我的问题。

```
[WebInvoke(UriTemplate = "/POST/PersonPost", Method = "POST",BodyStyle=WebMessageBodyStyle.WrappedRequest, ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json)]
 public Person InsertPerson(Person per)
 {   Debug.WriteLine("InsertPerson");
     if (per == null)
    {
       return new Person("2", "null");
    }

    Debug.WriteLine("POST:[PersonId = {0} PersonName = {1}]", per.Id, per.Name);
        return new Person("1", "InsertPerson");
  }

[DataContract]
    public class Person
    {

        public Person(string id, string name)
        {
            this.id = id;
            this.name = name;
        }
        [DataMember]
        public string Id { get; set; }
        [DataMember]            
        public string Name { get; set; }

        public override string ToString()
        {
            var json = JsonConvert.SerializeObject(this);
            return json.ToString();
        }
    } 
```

这里是我的 jQuery：

```
var person = {};
                person.Id = "abc123";
                person.Name = "aaaa";
                var per = {};
                per.per = person;

                var param = JSON.stringify(per);

                //param =   "{"per":{"Id":"abc123","Name":"aaaa"}}"

                $.support.cors = true;

                $.ajax({
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    data: param,
                    dataType: "json",
                    processData: false,
                    crossDomain: true,
                    url: "http://localhost:59291/Person/POST/PersonPost",
                    success: function (data) {
                        alert("Post erfolgreich: ");

                    },
                    error: function (xhr, ajaxOptions, thrownError) {
                        alert("Fehler Post: Status " + xhr.status + " AntwortText " + xhr.responseText);
                    }
                }); 
```

有什么问题？为什么我在 insertPerson 方法中的参数 per 始终为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:32:45.247

对不起我的英语，这对我有用：

```
var LstPerson = new Array();
var person = {};

person.Id = 1
person.name = 'abc'

LstPerson.push(person)

var param = JSON.stringify(LstPerson); 
```

仅从 JS 发送 [{"id": "1", "name": "abc"}] 和 WCF REST 定义：

```
[WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.Bare, 
        RequestFormat=WebMessageFormat.Json, ResponseFormat=WebMessageFormat.Json)]
public Person InsertPerson(List<Person> per) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:24:16.123

这不起作用的原因是因为`DataMember`s 是`id`and`name`而不是`Id`and `Name`。您需要修改以下代码：

```
person.Id = "abc123";
person.Name = "aaaa";
var per = {};
per.per = person; 
```

到

```
person.id = "abc123";
person.name = "aaaa";
var per = {};
per.per = person; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T14:20:27.303

您的网站违反了[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)

这是规避[同源政策的方法](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)

您将[crossDomain](http://api.jquery.com/jQuery.ajax/)设置为`true`，但这仅与 jsonp 兼容，[请阅读此](https://stackoverflow.com/questions/11736431/make-cross-domain-ajax-jsonp-request-with-jquery/11736771#11736771)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T15:00:15.793

试试这个：

```
var person = {};
person.id = "1";
person.name = "abc";
var param = JSON.stringify(person); 
```

原因之一是您收到的请求对象为 null，因为该方法需要一个 Person 类型的对象。根据您对 Person 的定义，JSON 中的 this 如下所示。

```
{"id": "1", "name": "abc"} 
```

这是因为没有像 per inside Person 这样的东西。

```
Person person = New Person("1", "abc");
person.per //There is nothing defined as per inside person. 
```

# python - 用于包装尝试的通用装饰器除了在 python 中？

> ID：15572288
> 
> 赞同：67
> 
> 时间：2013-03-22T14:04:36.167
> 
> 标签：python, try-catch, wrapper, decorator

我会与很多我没有编写的深度嵌套的 json 进行交互，并且想让我的 python 脚本对无效输入更加“宽容”。我发现自己在编写涉及 try-except 块，并且宁愿将可疑的功能包装起来。

我知道吞下异常是一个糟糕的策略，但我宁愿稍后打印和分析它们，而不是实际停止执行。在我的用例中，继续循环执行比获取所有密钥更有价值。

这就是我现在正在做的事情：

```
try:
    item['a'] = myobject.get('key').METHOD_THAT_DOESNT_EXIST()
except:
    item['a'] = ''
try:
    item['b'] = OBJECT_THAT_DOESNT_EXIST.get('key2')
except:
    item['b'] = ''
try:
    item['c'] = func1(ARGUMENT_THAT_DOESNT_EXIST)
except:
    item['c'] = ''
...
try:
    item['z'] = FUNCTION_THAT_DOESNT_EXIST(myobject.method())
except:
    item['z'] = '' 
```

这就是我想要的，（1）：

```
item['a'] = f(myobject.get('key').get('subkey'))
item['b'] = f(myobject.get('key2'))
item['c'] = f(func1(myobject)
... 
```

或 (2)：

```
@f
def get_stuff():
   item={}
   item['a'] = myobject.get('key').get('subkey')
   item['b'] = myobject.get('key2')
   item['c'] = func1(myobject)
   ...
   return(item) 
```

...我可以将单个数据项 (1) 或主函数 (2) 包装在某个函数中，该函数将执行停止异常转换为空字段，打印到标准输出。前者将是一种逐项跳过 - 在该键不可用的情况下，它记录为空白并继续前进 - 后者是行跳过，如果任何字段不起作用，则整个记录是跳过。

我的理解是某种包装器应该能够解决这个问题。这是我尝试过的，带有一个包装器：

```
def f(func):
   def silenceit():
      try:
         func(*args,**kwargs)
      except:
         print('Error')
      return(silenceit) 
```

这就是为什么它不起作用。调用一个不存在的函数，它不会尝试捕获它：

```
>>> f(meow())
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'meow' is not defined 
```

在我什至添加一个空白返回值之前，我想让它正确地尝试捕获。如果该功能有效，这将打印“错误”，对吗？

包装函数在这里是正确的方法吗？

**更新**

我在下面有很多非常有用、有帮助的答案，谢谢你——但我已经编辑了我上面使用的例子来说明我试图捕捉的不仅仅是嵌套的关键错误，我我专门寻找一个包装了 try-catch 的函数...

1.  当方法不存在时。
2.  当一个对象不存在并且正在获取一个调用它的方法时。
3.  当一个不存在的对象被作为函数的参数调用时。
4.  这些东西的任意组合。
5.  奖励，当函数不存在时。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-22T14:50:33.170

您可以使用[Raymond Hettinger 的 PyCon 2013 演示文稿中概述的 defaultdict 和上下文管理器方法](https://speakerdeck.com/pyconslides/transforming-code-into-beautiful-idiomatic-python-by-raymond-hettinger-1)

```
from collections import defaultdict
from contextlib import contextmanager

@contextmanager
def ignored(*exceptions):
  try:
    yield
  except exceptions:
    pass 

item = defaultdict(str)

obj = dict()
with ignored(Exception):
  item['a'] = obj.get(2).get(3) 

print item['a']

obj[2] = dict()
obj[2][3] = 4

with ignored(Exception):
  item['a'] = obj.get(2).get(3) 

print item['a'] 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2014-12-16T08:01:09.893

这里有很多很好的答案，但我没有看到任何可以解决你是否可以通过装饰器完成这个问题的答案。

简短的回答是“不”，至少在没有对代码进行结构更改的情况下是这样。装饰器在功能级别上运行，而不是在单个语句上运行。因此，为了使用装饰器，您需要将每个要装饰的语句移动到它自己的函数中。

但请注意，您不能只将赋值本身放在修饰函数中。您需要从修饰函数返回 rhs 表达式（要分配的值），然后在外部进行分配。

用您的示例代码来说明这一点，可以使用以下模式编写代码：

```
@return_on_failure('')
def computeA():
    item['a'] = myobject.get('key').METHOD_THAT_DOESNT_EXIST()

item["a"] = computeA() 
```

`return_on_failure`可能是这样的：

```
def return_on_failure(value):
  def decorate(f):
    def applicator(*args, **kwargs):
      try:
         return f(*args,**kwargs)
      except:
         print('Error')
         return value

    return applicator

  return decorate 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2014-12-12T15:30:58.490

使用可配置的装饰器很容易实现。

```
def get_decorator(errors=(Exception, ), default_value=''):

    def decorator(func):

        def new_func(*args, **kwargs):
            try:
                return func(*args, **kwargs)
            except errors, e:
                print "Got error! ", repr(e)
                return default_value

        return new_func

    return decorator

f = get_decorator((KeyError, NameError), default_value='default')
a = {}

@f
def example1(a):
    return a['b']

@f
def example2(a):
    return doesnt_exist()

print example1(a)
print example2(a) 
```

只需将错误类型传递给 get_decorator 元组，您希望将其静音并返回默认值。输出将是

```
Got error!  KeyError('b',)
default
Got error!  NameError("global name 'doesnt_exist' is not defined",)
default 
```

**编辑：**感谢martineau，我将错误的默认值更改为具有基本异常的元组以防止错误。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-03-22T14:23:41.420

这取决于您期望的例外情况。

如果您唯一的用例是`get()`，您可以这样做

```
item['b'] = myobject.get('key2', '') 
```

对于其他情况，您的装饰器方法可能很有用，但不是您这样做的方式。

我将尝试向您展示：

```
def f(func):
   def silenceit(*args, **kwargs): # takes all kinds of arguments
      try:
         return func(*args, **kwargs) # returns func's result
      except Exeption, e:
         print('Error:', e)
         return e # not the best way, maybe we'd better return None
                  # or a wrapper object containing e.
  return silenceit # on the correct level 
```

然而，`f(some_undefined_function())`不会工作，因为

a)`f()`在执行时尚未激活，并且

b) 使用错误。正确的方法是包装函数然后调用它：`f(function_to_wrap)()`.

“lambda 层”在这里会有所帮助：

```
wrapped_f = f(lambda: my_function()) 
```

包装一个 lambda 函数，该函数又调用一个不存在的函数。调用`wrapped_f()`导致调用包装器，该包装器调用试图调用的 lambda `my_function()`。如果这不存在，则 lambda 会引发一个由包装器捕获的异常。

这是有效的，因为名称`my_function`不是在定义 lambda 时执行，而是在执行时执行。然后这个执行被函数保护和包装`f()`。所以异常发生在 lambda 内部，并被传播到装饰器提供的包装函数，它会优雅地处理它。

如果您尝试用包装器替换 lambda 函数，那么这种向 lambda 函数内部的移动不起作用

```
g = lambda function: lambda *a, **k: function(*a, **k) 
```

其次是

```
f(g(my_function))(arguments) 
```

因为这里的名称解析是“回到表面”：`my_function`无法解析，这发生在`g()`甚至`f()`被调用之前。所以它不起作用。

如果你尝试做类似的事情

```
g(print)(x.get('fail')) 
```

如果你没有，它就不能正常工作`x`，因为`g()`保护`print`，不是`x`。

如果你想在`x`这里保护，你必须这样做

```
value = f(lambda: x.get('fail')) 
```

因为由`f()`调用该 lambda 函数提供的包装器会引发异常，然后将其静音。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-03-22T14:27:03.630

在您的情况下，您首先评估 meow 调用的值（不存在），然后将其包装在装饰器中。这是行不通的。

首先在包装之前引发异常，然后包装器错误地缩进（`silenceit`不应返回自身）。您可能想要执行以下操作：

```
def hardfail():
  return meow() # meow doesn't exist

def f(func):
  def wrapper():
    try:
      func()
    except:
      print 'error'
  return wrapper

softfail =f(hardfail) 
```

输出：

```
>>> softfail()
error

>>> hardfail()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 2, in hardfail
NameError: global name 'meow' is not defined 
```

无论如何，在您的情况下，我不明白您为什么不使用简单的方法，例如

```
def get_subkey(obj, key, subkey):
  try:
    return obj.get(key).get(subkey, '')
  except AttributeError:
    return '' 
```

并在代码中：

```
 item['a'] = get_subkey(myobject, 'key', 'subkey') 
```

**编辑：**

如果您想要可以在任何深度工作的东西。您可以执行以下操作：

```
def get_from_object(obj, *keys):
  try:
    value = obj
    for k in keys:
        value = value.get(k)
    return value
  except AttributeError:
    return '' 
```

你会打电话给：

```
>>> d = {1:{2:{3:{4:5}}}}
>>> get_from_object(d, 1, 2, 3, 4)
5
>>> get_from_object(d, 1, 2, 7)
''
>>> get_from_object(d, 1, 2, 3, 4, 5, 6, 7)
''
>>> get_from_object(d, 1, 2, 3)
{4: 5} 
```

并使用您的代码

```
item['a'] = get_from_object(obj, 2, 3) 
```

顺便说一句，就个人而言，我也喜欢使用上下文管理器的@cravoori 解决方案。但这意味着每次都需要三行代码：

```
item['a'] = ''
with ignored(AttributeError):
  item['a'] = obj.get(2).get(3) 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2018-12-16T09:17:51.727

扩展@iruvar 答案 - 从 Python 3.4 开始，Python 标准库中有一个现有的上下文管理器：[https ://docs.python.org/3/library/contextlib.html#contextlib.suppress](https://docs.python.org/3/library/contextlib.html#contextlib.suppress)

```
from contextlib import suppress

with suppress(FileNotFoundError):
    os.remove('somefile.tmp')

with suppress(FileNotFoundError):
    os.remove('someotherfile.tmp') 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-12-16T01:57:23.303

由于您正在处理大量损坏的代码，因此`eval`在这种情况下使用它可能是可以原谅的。

```
def my_eval(code):
  try:
    return eval(code)
  except:  # Can catch more specific exceptions here.
    return '' 
```

然后包装所有可能损坏的语句：

```
item['a'] = my_eval("""myobject.get('key').get('subkey')""")
item['b'] = my_eval("""myobject.get('key2')""")
item['c'] = my_eval("""func1(myobject)""") 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-03-22T14:32:04.717

为什么不只使用循环？

```
for dst_key, src_key in (('a', 'key'), ('b', 'key2')):
    try:
        item[dst_key] = myobject.get(src_key).get('subkey')
    except Exception:  # or KeyError?
        item[dst_key] = '' 
```

或者如果你想写一个小帮手：

```
def get_value(obj, key):
    try:
        return obj.get(key).get('subkey')
    except Exception:
        return '' 
```

如果你有几个地方需要获得价值，你也可以结合这两种解决方案，而辅助功能会更合理。

不确定您是否真的需要一个装饰器来解决您的问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-01T22:28:35.083

### 尝试使用除装饰器来实现同步和异步功能

注：`logger.error`可以换成`print`

最新版本可以在[这里](https://github.com/vineetk1998/utils/blob/main/tryExceptDecorator.py)找到。

[![在此处输入图像描述](../Images/f87fd429345b9e3b1805fdf490e89efe.png)](https://i.stack.imgur.com/xZEQA.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-12-14T07:21:18.913

像这样的东西怎么样：

```
def exception_handler(func):
def inner_function(*args, **kwargs):
    try:
        func(*args, **kwargs)
    except TypeError:
        print(f"{func.__name__} error")
return inner_function 
```

然后

```
@exception_handler
def doSomethingExceptional():
    a=2/0 
```

所有学分都转到：[https ://medium.com/swlh/handling-exceptions-in-python-a-cleaner-way-using-decorators-fae22aa0abec](https://medium.com/swlh/handling-exceptions-in-python-a-cleaner-way-using-decorators-fae22aa0abec)

# ibatis - MyBatis - 使用 IN 运算符时返回空值

> ID：15572290
> 
> 赞同：1
> 
> 时间：2013-03-22T14:04:43.333
> 
> 标签：ibatis, mybatis

我有一个如下查询，

```
<select id="getTableName" resultType="java.lang.String" parameterType="java.lang.String">
    Select Distinct TableName From TABLE_COLUMN_MAPPING Where COLUMNNAME IN (#{columnNames})
</select> 
```

我通过传递如下值来调用服务方法。

```
sampleService.getTableName("'BANKRM','APPLICANTID','APPLICANTTYPE','APPLICANTTYPE','TOTAL','SCQUES9'"); 
```

但它的回归...... []

帮助我为什么没有得到值而是得到空列表。

PS：我检查了日志，它的语句创建没有任何问题

```
2013-03-22 19:16:27,521 DEBUG [main] org.apache.ibatis.datasource.pooled.PooledDataSource (debug:27) - Created connection 23845098.
2013-03-22 19:16:27,590 DEBUG [main] java.sql.Connection (debug:27) - ooo Connection Opened
2013-03-22 19:16:27,670 DEBUG [main] java.sql.PreparedStatement (debug:27) - ==>  Executing: Select Distinct TableName From Config_FieldDetails Where COLUMNNAME IN (?) 
2013-03-22 19:16:27,670 DEBUG [main] java.sql.PreparedStatement (debug:27) - ==> Parameters: 'BANKRM','APPLICANTID','APPLICANTTYPE','APPLICANTTYPE','TOTAL','SCQUES9'(String)
2013-03-22 19:16:27,954 DEBUG [main] java.sql.Connection (debug:27) - xxx Connection Closed
2013-03-22 19:16:27,955 DEBUG [main] org.apache.ibatis.datasource.pooled.PooledDataSource (debug:27) - Returned connection 23845098 to pool.
2013-03-22 19:16:27,955 INFO [main] com.hcl.cob.mybatis.bpm.service.impl.COBBPMCommonServiceImpl (getTableNameFromConfigFieldDetails:41) - getTableNameFromConfigFieldDetails(String columnName) -- End 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:00:57.607

将列名列表放在一个 List 参数中，然后将其传递给查询：

```
List<String> columnNames = Arrays.asList(["BANKRM", "APPLICANTID", "APPLICANTTYPE", "APPLICANTTYPE","TOTAL","SCQUES9"]); 
sampleService.getTableName(columnNames); 
```

然后更新查询以获取列表并使用`foreach`标记迭代列表值并将它们放入`in`子句中：

```
<select id="getTableName" resultType="java.lang.String" parameterType="java.util.List">
    Select Distinct TableName From TABLE_COLUMN_MAPPING Where COLUMNNAME IN 
        <foreach item="columnName" index="index" collection="columnNames" open="(" separator="," close=")">
            #{columnName}
        </foreach>
</select> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:06:53.030

如果要放置将用于创建`PreparedStatement`的参数（而不是传递参数），则应使用`${}`符号：

```
${columnNames} 
```

# python - 在 sqlalchemy 中使用 DATEADD

> ID：15572292
> 
> 赞同：14
> 
> 时间：2013-03-22T14:04:50.483
> 
> 标签：python, sql, sqlalchemy, flask, flask-sqlalchemy

如何在 python 中使用 sqlalchemy 重写以下 sql 语句。我一直在寻找 30 分钟，但仍然找不到任何解决方案。

```
DATEADD(NOW(), INTERVAL 1 DAY) 
```

或者

```
INSERT INTO dates (expire)
VALUES(DATEADD(NOW(), INTERVAL 1 DAY)) 
```

提前致谢

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-22T15:12:10.417

为了完整起见，以下是使用 using 生成确切 SQL 的方法[`sqlalchemy.sql.func`](http://docs.sqlalchemy.org/en/rel_0_8/core/tutorial.html#functions)：

```
from sqlalchemy.sql import func
from sqlalchemy.sql.expression import bindparam
from sqlalchemy import Interval

tomorrow = func.dateadd(func.now(), bindparam('tomorrow', timedelta(days=1), Interval())) 
```

这导致：

```
>>> from sqlalchemy.sql import func
>>> func.dateadd(func.now(), bindparam('tomorrow', timedelta(days=1), Interval(native=True)))
<sqlalchemy.sql.expression.Function at 0x100f559d0; dateadd>
>>> str(func.dateadd(func.now(), bindparam('tomorrow', timedelta(days=1), Interval(native=True))))
'dateadd(now(), :tomorrow)' 
```

或者，您可以使用`text()`对象来指定间隔：

```
from sqlalchemy.sql import func
from sqlalchemy.sql.expression import text

tomorrow = func.dateadd(func.now(), text('interval 1 day')) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-22T15:02:14.293

SQLAlchemy 日期自动映射到 Python 日期时间对象，所以你应该能够做到：

```
from sqlalchemy import Table, Column, MetaData, DateTime
from datetime import datetime, timedelta

metadata = MetaData()
example = Table('users', metadata,
   Column('expire', DateTime)
)

tomorrow = datetime.now() + timedelta(days=1)

ins = example.insert().values(expire=tomorrow) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-22T15:06:16.750

Doobeh 在我打字的时候打败了我，这是我要发布的烧瓶 sqlalchemy 示例（以补充简单的 sqlalchemy 示例）：

```
from flask.ext.sqlalchemy import SQLAlchemy
from datetime import datetime, timedelta

db = SQLAlchemy()

class Thing(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    created = db.Column(db.DateTime)

c = Thing(created = datetime.utcnow() + timedelta(days=1))
print repr(c.created)
# datetime.datetime(2013, 3, 23, 15, 5, 48, 136583) 
```

您也可以将默认值作为可调用对象传递：

```
from flask.ext.sqlalchemy import SQLAlchemy
from datetime import datetime, timedelta

db = SQLAlchemy()

def tomorrow():
    return datetime.utcnow() + timedelta(days=1)

class Thing(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    publish_date = db.Column(db.DateTime, default=tomorrow) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-29T21:20:35.943

```
from datetime import datetime, timedelta
from dateutil import tz

new_date = datetime.now(tz=tz.tzlocal()) + timedelta(days=1)
new_item = Expire(expire=new_date)
session.save(new_item)
session.commit() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-26T00:16:10.907

您可以使用 MySQL `timestampadd`insted `dateadd`。

更多详细信息[http://dev.mysql.com/doc/refman/5.7/en/date-and-time-functions.html#function_timestampadd](http://dev.mysql.com/doc/refman/5.7/en/date-and-time-functions.html#function_timestampadd)

# python - Eclipse/PyDev 中的良好调用层次结构

> ID：15572295
> 
> 赞同：12
> 
> 时间：2013-03-22T14:04:59.573
> 
> 标签：python, eclipse, pydev

有没有办法在 PyDev 中获得良好的调用层次结构？我希望能够选择一个函数并查看它在哪些文件中被调用以及最终由哪些其他函数调用。我通过按 F4 尝试了 Eclipse 中的层次结构视图，但它没有输出我想要的内容。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-22T21:33:47.503

PyDev 有一个使用 Ctrl+Shift+G 的查找引用（不确定这就是您所说的调用层次结构）。

# orm - Sqlalchemy primaryjoin 连接参数替代

> ID：15572297
> 
> 赞同：1
> 
> 时间：2013-03-22T14:05:02.590
> 
> 标签：orm, sqlalchemy, relationship

在 sqlalchemy 中，可以为*关系构造指定**primaryjoin*参数以指定备用连接条件。

 *我的问题是：这可以“手动”完成，即。是否有替代方案（对于相同的结果..）？同样，我们可以使用*subqueryload*、*joinedload*、*eagerload*等方法“手动”加载（强制预加载）。

IE。而不是指定*primaryjoin*，*

# sql - 数据库结果的可变结构

> ID：15572300
> 
> 赞同：1
> 
> 时间：2013-03-22T14:05:04.537
> 
> 标签：sql, delphi

很多时候，当我们查询数据库时，我们只需要一列带有 varchar。所以我做了一个很好的函数来查询数据库并将结果放在一个字符串列表中：

```
function Getdatatostringlist(sqlcomponent, sqlquery: string): TStringlist; 
```

我现在正在寻找的基本上是相同的功能，但对于具有多列的结果，您事先不知道数据是什么类型，无论是 varchar、int、datetime。

在这里使用什么样的数据结构比较好。

我想要这个的原因是我尽量不处理开放数据集。我更喜欢将所有结果提取到临时结构中，关闭数据集并处理结果。

* * *

在 Kobiks 回复了关于在内存数据集中使用的问题后，我想出了以下内容，很快就可以将它放在一起来测试这个概念：

```
procedure TForm1.Button2Click(Sender: TObject);
var
  MyDataSet : TAdoDataSet;
begin
 MyDataSet := GetDataToDataSet('SELECT naam FROM user WHERE userid = 1', ADOConnection1);
 try
   Form1.Caption := MyDataSet.FieldByName('naam').AsString;
 finally
   MyDataSet.free;
 end;
end;

function TForm1.GetDataToDataSet(sSql: string; AdoConnection: TADOConnection): TAdoDataSet;
begin
  Result := TAdoDataSet.Create(nil);
  Result.LockType := ltBatchOptimistic;
  Result.Connection := AdoConnection;
  Result.CommandText :=  sSql;
  Result.Open;
  Result.Connection := nil;
end; 
```

我认为这是可以建立的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T14:12:20.567

您应该使用任何断开连接的内存`TDataSet`后代，例如[`TClientDataSet`](http://delphi.about.com/od/usedbvcl/a/tclientdataset.htm).

不要试图通过将记录集存储在一些新的“变体”结构中来重新发明轮子。A`TClientDataSet`已经包含操作“临时”数据结构所需的所有功能。

以下是创建`TClientDataSet`结构的方法：

```
cds.FieldDefs.Add('id', ftInteger);
cds.FieldDefs.Add('name', ftString, 100);
// ...
// create it
cds.CreateDataSet; 
// add some data records
cds.AppendRecord([1, 'Foo']);
cds.AppendRecord([2, 'Bar']); 
```

许多 TDataSet 能够根据提供者用作内存（客户端）数据集`LockType`，例如`TADODataSet`with`LockType=ltBatchOptimistic`可以从服务器获取结果集，然后保持断开连接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T14:18:30.387

对于与 Excel 交换数据，此结构很有用，可能对其他目的有用。

```
Function GetDatasetasDynArray(Ads: TDataset; WithHeader: Boolean = true): Variant;
// 20130118 by Thomas Wassermann
var
  i, x, y: Integer;
  Fields: Array of Integer;
begin
  x := 0;
  y := Ads.RecordCount;
  if WithHeader then
    inc(y);
  SetLength(Fields, Ads.FieldCount);
  for i := 0 to Ads.FieldCount - 1 do
    if Ads.Fields[i].Visible then
    begin
      Fields[x] := i;
      inc(x);
    end;
  SetLength(Fields, x);
  Result := VarArrayCreate([0, y - 1 , 0, length(Fields) - 1], VarVariant);
  y := 0;
  if WithHeader then
  begin
    for i := Low(Fields) to High(Fields) do
    begin
      Result[y, i] := Ads.Fields[Fields[i]].DisplayLabel;
    end;
    inc(y);
  end;
  try
    Ads.DisableControls;
    Ads.First;
    while not Ads.EOF do
    begin
      for i := Low(Fields) to High(Fields) do
      begin
        Result[y, i] := Ads.Fields[Fields[i]].Value;
      end;
      Ads.Next;
      inc(y);
    end;
  finally
    Ads.EnableControls;
  end;
end;

procedure TForm1.Button1Click(Sender: TObject);
var
 DynArray:Variant;
begin

   DynArray := GetDatasetasDynArray(Adodataset1,true);
   //DynArray[0,x] Header or First row
   //DynArray[1,x] First row or SecondRow
   Excel.Range.Value := DynArray;
end; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T14:10:11.433

你为什么不喜欢使用开放数据集？他们通常不会阻止服务器。将数据从数据集中复制到您想要的任何地方都是额外的开销，这很可能是不必要的。

数据集提供了您想要的功能：具有可变列和行的矩阵。

编辑：但是，如果您经常遍历数据集，您应该考虑创建一个保存相关信息的类，然后将数据复制到通用列表、字典、树或任何您需要的快速查找结构中。

当然，您可以考虑构建一些智能的东西，它可以像数据集一样灵活，但是：越通用的东西，性能越差（通常）。

# dependency-injection - MEF 和 IoC 容器（如 Unity、Autofac、SMap、Ninject、Windsor.Spring.net 等）之间的区别

> ID：15572302
> 
> 赞同：46
> 
> 时间：2013-03-22T14:05:13.420
> 
> 标签：dependency-injection, inversion-of-control, mef, ioc-container, structuremap

我一直在搜索依赖注入并阅读了几篇文章。但我仍然无法找出 MEF 和其他 IoC 之间的区别。所以，我的问题是：在哪种情况下我应该更喜欢使用 MEF 或 IoC 容器？

为什么将 MEF 与 PRISM 一起用于（WPF 和 Silverlight）或桌面应用程序是好的？

而在 Web 应用程序中，人们使用 IoC 容器。

那么，决定我应该使用哪种依赖技术的标准是什么？

我已经通过文章[http://devlicio.us/blogs/casey/archive/2009/12/18/what-is-the-difference-between-an-ioc-container-and-mef.aspx](http://devlicio.us/blogs/casey/archive/2009/12/18/what-is-the-difference-between-an-ioc-container-and-mef.aspx) ，但我无法确定任何事情。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-25T08:29:34.707

最终，我对 MEF 与 IoC 容器的结论如下：

当必须处理未知类型或基于插件的架构时，首选使用 MEF。

IoC 容器最好与已知类型一起使用。

此外，MEF 是依赖注入的架构解决方案

而 IoC 容器是依赖注入的代码级解决方案。

IoC 容器只是填充类实例的依赖注入技术，如果这些类的构造函数需要其他类的对象，那么 IoC 也会注入所需的对象。但 MEF 不仅仅是依赖注入。虽然，MEF 也使用基于 IoC 的方法进行依赖注入，但除了依赖注入之外，MEF 还做了很多其他事情。

MEF 有两个组件：

1.  目录：负责发现扩展

2.  容器：提供将扩展加载到正在运行的应用程序的能力

MEF 不仅仅是依赖注入技术。它用于我们的应用程序需要基于插件的架构，但同时 MEF 使用基于 IoC 的方法进行依赖注入。

我期待更多的人对此发表评论。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-05-27T01:22:57.577

IoC 是一种架构设计策略，MEF 是设计模式依赖注入的实现。依赖注入（DI）通常是 IoC 的实现策略。通常使用术语 IoC 容器，表明 IoC 就是这种技术。

不，不然。IoC是一个广义的概念，DI是实现IoC核心的设计模式。MEF 是某种形式的 DI，但它并不具备 IoC 的所有基本特征。

MEF 使用组合来找出它需要解决的依赖关系。这很像许多其他 IoC 容器，例如 Pico 和[Spring](http://en.wikipedia.org/wiki/Spring_Framework)。但它停在那里。我没有看到任何生命周期管理或池配置。我认为后两者是 IoC（而不是 DI）的基本部分，因为调用者的性能不应该因为被调用者使用的内存消耗而受到影响。

IoC 原则是通过松散耦合为调用者和被调用者提供服务。这样，两种功能都可以优化。MEF 可能存在优化问题。例如，当您从菜单调用数据库时，有时会调用数据库。为此最好使用池化。MEF 无法做到这一点。

应用程序的类型应该独立于设计模式的选择。桌面应用程序或 Web 应用程序之间没有太大区别。两者都是用户界面，都应该能够使用 MEF 和 IoC。如果功能很简单并且不需要跨越优化边界（如数据库调用），那么 MEF 是首选，因为它是使用 .NET 4 时存在的框架。那么它可能很有用，但如果调用跨越优化边界（如文件的解析或上传），则使用 IoC 容器对性能和维护更有成效。

我使用的信息：

*   [Hanselminutes 148](http://s3.amazonaws.com/hanselminutes/hanselminutes_0148.mp3)（Glenn Block 的播客采访）。

*   *[托管可扩展性框架 (MEF)](http://msdn.microsoft.com/en-us/library/dd460648.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-1)* (MSDN)

*   *[前沿 - 应用程序可扩展性：MEF 与 IoC](http://msdn.microsoft.com/en-us/magazine/gg650670.aspx)*

*   *[控制容器的反转和依赖注入模式](http://www.martinfowler.com/articles/injection.html)*

*   *[控制反转](http://en.wikipedia.org/wiki/Inversion_of_control)*（维基百科）

*   *[为什么 MEF 不是 DI/IoC 容器？](https://stackoverflow.com/questions/216565/why-exactly-isnt-mef-a-di-ioc-container)*

# sql - Oracle 正确获取月差

> ID：15572303
> 
> 赞同：2
> 
> 时间：2013-03-22T14:05:16.517
> 
> 标签：sql, oracle, oracle11g

嗨，我一直在获取与当月不包括日期的日期的正确差异时遇到问题。

即，如果运行查询的月份是 2013 年 3 月

那么以下应该是结果

```
EXECUTION_DATE，EXEC_DIFF
13 年 1 月 1 日至 2 月 1 日
2013 年 1 月 31 日，2
2013 年 1 月 30 日，2

```

但是使用下面的 sql 语句我得到

```
EXECUTION_DATE，EXEC_DIFF
13 年 1 月 1 日至 2 月 1 日
2013 年 1 月 31 日，2
13 年 1 月 30 日，1

```

```
select EXECUTION_DATE,
       floor(MONTHS_BETWEEN (trunc(sysdate,'MM')-1, EXECUTION_DATE))+1 "EXEC_DIFF"
from V_CERT_LIST  
WHERE EXECUTION_DATE < TO_DATE('02/02/2013','DD/MM/YYYY') 
ORDER BY EXECUTION_DATE DESC 
```

请有人能把我说得对吗？我已经用这个头疼了一段时间了

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T14:17:29.453

```
select EXECUTION_DATE,
       MONTHS_BETWEEN (trunc(sysdate,'MM'), trunc(EXECUTION_DATE,'MM')) "EXEC_DIFF"
from V_CERT_LIST  
WHERE EXECUTION_DATE < TO_DATE('02/02/2013','DD/MM/YYYY') 
ORDER BY EXECUTION_DATE DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:29:23.633

不寻找分数但无法理解months_between有什么问题？据我了解，当月执行时间无关紧要 - 1 月 31 日或 1 月 30 日......如您的示例所示，1 月和 3 月之间的差异仍然是 2 个月。我可以在查询中添加更多天数，但 mo_betw。仍然是一样的......：

```
SELECT to_char(exec_date, 'DD-MON-YYYY') exec_date, MONTHS_BETWEEN(run_date, exec_date) months_btwn
 FROM
 (
 SELECT to_date('01/03/2013', 'DD/MM/YYYY') run_date
     , Add_Months(Trunc(sysdate,'YEAR'),Level-1) exec_date -- first day of each month
   FROM dual
 CONNECT BY LEVEL <= 3
 )
/

EXEC_DATE   MONTHS_BTWN
------------------------
 01-JAN-2013    2
 01-FEB-2013    1
 01-MAR-2013    0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T14:16:02.383

`Months_Between`具有复杂的逻辑，将月份中的某天考虑在内。

也许你想要的是这样的：

```
select EXECUTION_DATE,
       ((year(sysdate)*12+month(sysdate)) - (year(execution_date)*12 + month(execution_date))
       ) as Exec_Diff
from V_CERT_LIST  
WHERE EXECUTION_DATE < TO_DATE('02/02/2013','DD/MM/YYYY') 
ORDER BY EXECUTION_DATE DESC 
```

这会将年/月组合转换为自 0 时间以来的月数，然后减去结果。

# mysql - 由于rails通常以单线程方式在自己的进程中运行，你需要一个conn池吗？

> ID：15572310
> 
> 赞同：4
> 
> 时间：2013-03-22T14:05:30.397
> 
> 标签：mysql, ruby-on-rails, connection-pooling, passenger, thin

据我了解，通过 Thin/phusion 运行多个进程以支持 Rails 的并发性是一种常见的做法。这意味着，如果您想模仿 30 个线程，则必须生成 30 个单独的 rails 进程来运行您的应用程序。

如果以上是正确的，那么 ActiveRecord 是否支持连接池或者只有一个连接到 mysql？甚至需要多个连接都没有意义，因为每个 rails 进程都不会提供多个请求，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T00:24:58.277

Nginx/Unicorn 堆栈非常优雅地处理此类问题，并隐藏了 DB 连接池的实现。

在这里阅读更多：[https ://github.com/blog/517-unicorn](https://github.com/blog/517-unicorn)

# python - 如何不暴露python中的方法

> ID：15572312
> 
> 赞同：0
> 
> 时间：2013-03-22T14:05:31.573
> 
> 标签：python

我们怎么能不暴露 Python 中的方法并像在 Java 中一样将它们设为私有？

具体来说，我的场景涉及用户不应该使用的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:32:40.610

我认为使无法访问的方法的唯一方法是这样

```
class A:
   def some_func(self,*some_Args):
       def this_is_innaccessible_function():
           return  "yellow"

       print this_is_innaccessible_function() 
```

但是，其他班级也无法访问它……唯一可以访问的地方是`some_func`

标准约定告诉我们用双下划线标记私有函数，这会导致在幕后进行一些名称修改，这使得从类外部访问变得更加困难

```
class A:
    def __private_by_convention(self):
        print "this should not be called outside of class...but it can be" 
```

# scala - 将两个列表与 Scala 相乘的功能样式

> ID：15572315
> 
> 赞同：5
> 
> 时间：2013-03-22T14:05:36.923
> 
> 标签：scala, functional-programming

我正在使用 Scala 2.9，并且想根据一些操作构建一个列表。

考虑以下，我有两个简单的列表：

```
    val l1 = 列表（2,3）
    val l2 = 列表（列表（4,5,6），列表（7,8,9））

```

我想要的行为如下，两个列表的操作，如下所示：

```
    (2*4)+(3*7)
    (2*5)+(3*8)
    (2*6)+(3*9)

```

因此，我希望有另一个包含这些值的列表：

```
29,34,39
```

我已经尝试用上面的源代码解决了。我可能正在以完全错误的方式思考这个问题，但我正在努力想出一个优雅的解决方案。

```
    val lr = (l1,l2).zipped.map( (t1:Int, t2:List[Int]) =>
        ...
    )    
    println (lr) // 应该打印 List(29, 34, 39)

```

但是，我什至不确定我的方法是否正确，或者我应该如何继续。谁能想到一个优雅的解决方案来解决我的问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T14:23:17.920

这是一种可能的方法，但我不确定它是否优雅：

```
l2.transpose.map(sl => (l1, sl).zipped.map{ case(x,y) => x*y }.sum)
res: List[Int] = List(29, 34, 39) 
```

根据@Tharabas 和@michael_s 的评论，我们终于有了一个更紧凑的解决方案：

```
l2.transpose.map((l1,_).zipped.map(_*_).sum) 
```

# delphi - Delphi XE3 中的 64 位内联汇编

> ID：15572318
> 
> 赞同：0
> 
> 时间：2013-03-22T14:05:46.017
> 
> 标签：delphi, assembly, 64-bit, x86-64, basm

我在 Delphi XE3 中使用 64 位内联汇编程序遇到了这个问题，我不明白。

我试过这个，它适用于 32 位和 64 位

```
function test(a, b: integer): integer; assembler; register;
asm
  mov eax, a
  add eax, edx
end; 
```

但是，这仅适用于 32 位而非 64 位，在 64 位中它可以编译，但不会返回两个整数之和的正确结果。

```
function test(a, b: integer): integer; assembler; register;
asm
  add eax, edx
end; 
```

我知道以前的 FPU 代码，如 FLD、STP 可以在 32 位上运行，但在 64 位编译器上会出现编译错误。知道如何处理 64 位浮点数吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T14:12:09.287

这是因为 64 位系统使用自己的[调用约定](http://en.wikipedia.org/wiki/X86_calling_conventions#Microsoft_x64_calling_convention)，这些参数在 RCX 和 RDX 寄存器中。[MSDN 中有更多解释](http://msdn.microsoft.com/en-us/library/zthk2dkh%28v=vs.80%29.aspx)。

关于处理浮点数 - 阅读[英特尔开发人员文档](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)。

# java - 使用 jsoup 从表中提取内容

> ID：15572321
> 
> 赞同：1
> 
> 时间：2013-03-22T14:05:54.220
> 
> 标签：java, jsoup

我正在尝试解析以下页面。

```
Document doc = Jsoup.connect(“http://www.informatik.unitrier.de/~ley/pers/hd/h/Han:Jiawei.html“).get(); 
```

我需要提取第一个表的内容，即只有作者姓名及其出版物。但我只需要从 1986 年到 2012 年的表格内容。jsoup 中可能的语法是什么？

任何帮助将不胜感激 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:16:17.087

本站数据使用的是*javascript*，所以无法用jsoup解析。

我在这个答案中列出了一些替代方案：[Trying to parse html hidden by javascript](https://stackoverflow.com/questions/13666453/trying-to-parse-html-hidden-by-javascript/14715242#14715242)

# java - 单点登录以保护 REST API 和内部基于 Web 的系统

> ID：15572323
> 
> 赞同：2
> 
> 时间：2013-03-22T14:05:57.263
> 
> 标签：java, security, oauth-2.0, cas

我需要一些关于如何使用单一身份验证系统保护 REST API 和基于 Web 的内部系统的建议。

我正在研究使用的可能性：

1.  oAuth 2.0
2.  JA-SIG CAS
3.  自定义实现（实现两个单独的 API）
    1.  保护 REST API 并将调用重定向到特定 API 实例
    2.  对 Web 应用程序用户进行身份验证。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T12:24:15.987

我假设你有一个 webapp 的 UI，并且想要在你的 webapp 和你的 web 服务之间共享你的身份。您可以通过以下方式实现：

1.  “cassifying”您的网络应用程序（例如：[https](https://wiki.jasig.org/display/CASC/Configuring+the+Jasig+CAS+Client+for+Java+in+the+web.xml) ://wiki.jasig.org/display/CASC/Configuring+the+Jasig+CAS+Client+for+Java+in+the+web.xml ）
2.  将您的呼叫从您的 webapp 代理到您的 web 服务 ( [https://wiki.jasig.org/display/CAS/Proxy+CAS+Walkthrough](https://wiki.jasig.org/display/CAS/Proxy+CAS+Walkthrough) )。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T21:49:34.697

以下是有关如何保护 REST API 的一些建议。它们与 iPhone 有关，但它们通常适用于客户端/服务器 REST API 实现。如果没有更多信息，我不知道它们的适用性如何，但它们可能会对您有所帮助：

[在 iPhone 应用程序中使用 REST API 时的安全性](https://stackoverflow.com/questions/15273705/security-when-using-rest-api-in-an-iphone-application/15277589#15277589)

[https://stackoverflow.com/questions/15390354/api-key-alternative/15390892#15390892](https://stackoverflow.com/questions/15390354/api-key-alternative/15390892#15390892)

# c# - 旋转面魔方 C#

> ID：15572326
> 
> 赞同：3
> 
> 时间：2013-03-22T14:06:06.393
> 
> 标签：c#, rotation, unity3d, rubiks-cube

我已经在互联网上浏览了几天，但我真的找不到一个我能很好理解的答案来旋转我的魔方。

我使用魔方的 Blender 制作了自己的 3D 模型，并将其导入 Unity，这就是我将用来旋转面的工具。

但我似乎不明白旋转魔方所涉及的数学，我应该使用矩阵吗？如果是这样，我如何将它们结合在一起才能正常工作？

我可以通过按面将砖块组合在一起来旋转单面，但是当您转动下一张面时，它会完全破坏另一面。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T14:14:06.367

我的想法：将 26 个块中的每一个保持为单独的`GameObject`对象（8 个角、12 个边、6 个中心），每个块的原点位于立方体的中心。您单独跟踪哪个块当前在立方体上的位置，例如在 3D 阵列中。

然后当需要转脸时：

*   找出哪些块属于人脸。
*   使用 Unity 的正常旋转功能围绕旋转轴（通过立方体的中间）旋转这些块中的每一个。
*   更新有关哪些块在哪里的信息。

# php - PHP：如何检查 file_get_contents() 的结果字符串是否为 JPG 图像？

> ID：15572328
> 
> 赞同：9
> 
> 时间：2013-03-22T14:06:08.373
> 
> 标签：php

我正在使用`file_get_contents()`从远程服务器中提取一些图像，并且我想在进一步处理之前确认结果字符串是否为 JPG/PNG 图像，例如将其保存在本地并创建拇指。

```
$string = file_get_contents($url); 
```

你会怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T14:14:58.997

您可以使用[getimagesize()](http://php.net/manual/en/function.getimagesize.php "获取图像大小（）")

```
$url = 'http://www.geenstijl.nl/archives/images/HassVivaCatFight.jpg';
$file = file_get_contents($url);
$tmpfname = tempnam("/tmp", "FOO");
$handle = fopen($tmpfname, "w");
fwrite($handle, $file);

$size = getimagesize($tmpfname);
if(($size['mime'] == 'image/png') || ($size['mime'] == 'image/jpeg')){
   //do something with the $file
   echo 'yes an jpeg of png';
}
else{
    echo 'Not an jpeg of png ' . $tmpfname .' '. $size['mime']; 
    fclose($handle);
} 
```

我刚刚对其进行了测试，所以它可以工作。您需要制作一个临时文件，因为图像函数适用于本地数据，并且它们只接受本地目录路径，如 'C:\wamp2\www\temp\image.png'

如果不使用`fclose($handle);`PHP，脚本结束后会自动删除 tmp。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T14:25:50.290

我从这个[答案](https://stackoverflow.com/a/3312996/1401975)中得到了 JPG 图像的起始位。所以基本上你可以做的是检查起始位是否相等：

```
$url = 'http://i.stack.imgur.com/Jh3mC.jpg?s=128&g=1';
$jpg = file_get_contents($url);

if(substr($jpg,0,3) === "\xFF\xD8\xFF"){
    echo "It's a jpg !";
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-22T14:10:46.970

您可以使用

[exif_imagetype()](http://php.net/manual/en/function.exif-imagetype.php)

评估您的文件。请检查php手册。

**编辑：**

请注意必须启用 PHP_EXIF。[你可以在这里](http://www.php.net/manual/en/book.exif.php)阅读更多关于它的信息

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T14:11:17.163

也许标准 PHP 函数 exif_imagetype() [http://www.php.net/manual/en/function.exif-imagetype.php](http://www.php.net/manual/en/function.exif-imagetype.php)

# sql - 左外连接等价

> ID：15572333
> 
> 赞同：3
> 
> 时间：2013-03-22T14:06:15.940
> 
> 标签：sql, sql-server, left-join, equivalent

我有一个表包含空值。在 ORDER 表中，我在 PART_ID 部分中有 2 个空值，在 CUSTOMER_ID 中有 2 个空值。

我有这样的查询：

```
SELECT O.ORDER_ID , O.ORDER_DATE , O.CUST_ID, O.QUANTITY ,O.PART_ID ,
       C.CUST_NAME, C.CUST_CODE, P.PART_NAME, P.PART_CODE
FROM [ORDER] O
     LEFT OUTER JOIN PART P ON P.PART_ID = O.PART_ID
     LEFT OUTER JOIN CUSTOMER C ON C.CUST_ID = O.CUST_ID 
```

所以这是我的问题。我怎么能不使用外连接呢？我尝试了太多东西，包括 where not exists 或 this ；

```
SELECT *
FROM [ORDER] O ,CUSTOMER C, PART P
WHERE C.CUST_ID = (
  SELECT CUST_ID FROM CUSTOMER C WHERE O.CUST_ID = C.CUST_ID
) AND P.PART_ID = (SELECT PART_ID FROM PART P WHERE O.PART_ID = P.PART_ID) 
```

但我找不到解决方案。如果有解决方案会怎样？

（注：这是作业。）

我有那种桌子：

![在此处输入图像描述](../Images/7fae147962a83a6c3a10c908f72308bf.png)

左外连接给出：

![在此处输入图像描述](../Images/1d7df36d0046d4820954139a5cbe27ae.png)

硬件说不使用外连接并获得与左外连接相同的表。但就像我说的那样，我不能。我也在使用 MSSQL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:42:46.070

外连接产生超集而不是内连接。事实上，来自[维基百科](http://en.wikipedia.org/wiki/Join_%28SQL%29#Outer_join)：*左外连接返回内连接的所有值加上左表中与右表不匹配的所有值。*

因此，要使用内连接对左外连接进行建模，可以在具有相同连接条件的相同表之间使用内连接*SELECT的**UNION以及来自第一个表的另一个**SELECT*，该表返回右表中没有匹配的所有行（我将您的情况减少到一个左加入）：

 **```
SELECT O.ORDER_ID , O.ORDER_DATE , O.CUST_ID, O.QUANTITY ,O.PART_ID ,
       P.PART_NAME, P.PART_CODE
FROM [ORDER] O JOIN PART P ON P.PART_ID = O.PART_ID
UNION
SELECT O.ORDER_ID , O.ORDER_DATE , O.CUST_ID, O.QUANTITY ,O.PART_ID ,
       NULL, NULL 
FROM [ORDER] O
WHERE NOT EXISTS (SELECT 'found' FROM PART P WHERE P.PART_ID = O.PART_ID) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:10:31.130

据推测，您希望获得与具有 NULL 值的列的匹配，而不是让它们失败。如果是这样，只需修改连接条件：

```
FROM [ORDER] O
     LEFT OUTER JOIN PART P
     ON P.PART_ID = O.PART_ID or (p.Part_id is NULL and o.Part_id is null)
     LEFT OUTER JOIN CUSTOMER C
     ON C.CUST_ID = O.CUST_ID or (c.cust_id is null and o.cust_id is null) 
```

这种方法的主要问题是许多（大多数？）SQL 引擎不会使用索引进行连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T14:14:40.527

您不想使用外部联接是否有特定原因？这不是你想要的结果吗？：

```
FROM [ORDER] O 
LEFT JOIN PART P 
ON P.PART_ID = O.PART_ID and P.PARTID is not null
LEFT JOIN CUSTOMER C 
ON C.CUST_ID = O.CUST_ID and C.CUSTID is not null 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T12:15:25.517

所以完整的答案应该是这样的（在我的老师给出结果之后）：

```
 SELECT O.ORDER_ID,O.ORDER_DATE,O.CUST_ID,
(SELECT C.CUST_CODE FROM CUSTOMER C WHERE C.CUST_ID=O.CUST_ID) AS CUST_CODE,
(SELECT C.CUST_NAME FROM CUSTOMER C WHERE C.CUST_ID=O.CUST_ID) AS CUST_NAME,
O.PART_ID,
(SELECT P.PART_CODE FROM PART P WHERE P.PART_ID = O.PART_ID ) AS PART_CODE,
(SELECT P.PART_NAME FROM PART P WHERE P.PART_ID = O.PART_ID ) AS PART_NAME,
O.QUANTITY

FROM [ORDER] O 
```**

# android - 子更改后，ScrollView 不会直接调整大小

> ID：15572336
> 
> 赞同：14
> 
> 时间：2013-03-22T14:06:29.150
> 
> 标签：android, resize, scrollview

我遇到了一个关于 ScrollView 调整大小的非常烦人的问题，而且我已经没有可能的解决方案了。

我有一个 FragmentPager 包含几个不同的 Fragment，其中一个有一个 ScrollView。带有 ScrollView 的 Fragment 由 Spinner 和包含 LinearLayout 的 ScrollView 组成，其中包含几行其他 View（例如 SeekBars、Buttons、Edittexts）。根据在 Spinner 中选择的选项，ScrollView 显示不同的视图。为此，一些视图的可见性变为已消失，而另一些视图则变为可见。这很好用，除了 ScrollView 在使用 Spinner 选择不同的选项时似乎没有正确调整自身大小。

当 ScrollView 充满视图并因此可滚动时，如果用户选择的选项显示的 Views 少于填充 ViewPort 所需的 Views，则 ScrollView 仍会滚动。当用户再次选择旧选项时，ScrollView 现在无法滚动，因为它采用了前一个选项所需的大小。当用户再次选择 SAME 选项时，ScrollView 突然可滚动，因为它现在已调整为所需的实际大小。

这里发生了什么？更好的是，我该如何解决这个烦人的问题？

我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/control_scroll"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:background="#99000000"
    android:fillViewport="true" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="20dp"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="#DD000000"
            android:gravity="bottom"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/lamp_choose_tv"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="2dp"
                android:paddingLeft="5dp"
                android:text="@string/choose_lamp_text"
                android:textColor="#FFFFFF"
                android:textSize="14sp" />
        </LinearLayout>

        <Spinner
            android:id="@+id/lamp_select_spinner"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dp"
            android:textColor="#FFFFFF" />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="#DD000000"
            android:gravity="bottom"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/lamp_settings_tv"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="2dp"
                android:background="#44000000"
                android:paddingLeft="5dp"
                android:text="@string/lamp_settings_text"
                android:textColor="#FFFFFF"
                android:textSize="14sp" />
        </LinearLayout>
        <!-- Lamp name -->

        <LinearLayout
            android:id="@+id/naam_bar"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="bottom"
            android:paddingBottom="3dp"
            android:paddingLeft="10dp"
            android:paddingRight="10dp"
            android:paddingTop="3dp" >

            <TextView
                android:id="@+id/bridge_naam"
                style="@style/ConfigText"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="@string/config_lightname"
                android:textColor="#FFFFFF"
                android:textSize="16sp" />

            <EditText
                android:id="@+id/lamp_naam_input"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="2"
                android:background="@drawable/tasstextfield"
                android:inputType="textNoSuggestions"
                android:textColor="#FFFFFF" >
            </EditText>
        </LinearLayout>

        <View
            android:id="@+id/separator"
            android:layout_width="fill_parent"
            android:layout_height="0.5dp"
            android:background="@android:color/black"
            android:visibility="visible" />
<!-- Rest of the views --> 
```

我已经尝试过的事情：

*   父 ScrollView 上的 ForceLayout/requestLayout
*   使 ScrollView 无效
*   包含 LinearLayout 上的 ForceLayout/requestLayout
*   使线性布局无效
*   使 ScrollView 的所有子级无效
*   ScrollView 的所有子项上的 ForceLayout/requestLayout

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T08:24:38.487

这可能不是最令人愉快的解决方案，但它可能会奏效。使用处理程序发布延迟消息以再次刷新视图，就好像用户在单击刷新按钮后会选择两次相同的选项一样。

```
// The code when the user wants to update the views 
myButton.setOnClickListener(new OnClickListener{
  @Override
  public void onClick(View view) {
    updateView();
    Message m = Message.obtain();
    m.what = UPDATE_TAG;
    mHandler.sendMessageDelayed(msg, 200);
  }
})

...

final int UPDATE_TAG = 1;

public void updateView() {
  // Code where View.GONE and View.VISIBLE + invalidate is used.
}

Handler mHandler = new Handler {
  @Override
  public void handleMessage(Message input_msg) {
    if(msg.what == UPDATE_TAG) {
      updateView();
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T07:30:19.030

尝试进行此更改

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/control_scroll"
android:layout_width="fill_parent"
android:layout_height="wrap_content"

android:background="#99000000"
android:fillViewport="true" > 
```

退出 `android:layout_weight="1"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T14:53:37.133

我想这`LinearLayout`使用某种缓存机制来避免每次都测量孩子。或者也许我错了。

但是，您可以尝试使用`RelativeLayout`而不是一堆`LinearLayout`. 这将解决您的问题，并且效率更高，因为嵌套`ViewGroup`s 不利于性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T21:52:41.893

您可以继续将 ScrollView 高度设置为“wrap_content”，这样即使子视图发生更改，ScrollView 也可以调整为新设置

# ios - 如何在 iOS 中以编程方式设置日期和时间

> ID：15572339
> 
> 赞同：3
> 
> 时间：2013-03-22T14:06:43.117
> 
> 标签：ios, objective-c, date, cocoa-touch

我有一个要求，我们需要以编程方式从服务器设置日期和时间（或同步时间）。

它是如何在 iOS 中完成的？

是否有任何 Apple 文档说我们不能这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:09:52.087

您不能以编程方式在 iPhone/iPad 上设置日期和/或时间。这些 API 被视为受 Apple 保护。换句话说，如果您要使用这些 API 并使用它们提交应用程序，它将被拒绝。

**编辑**：

要获取这方面的文档，您可以使用开发人员计划中包含的免费技术支持事件之一联系 Apple 开发人员技术支持。[关联](https://developer.apple.com/membercenter/index.action#techSupport)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T23:15:14.420

正如对您的海报的评论所说，您不能，因为虽然有一个 API 可以做到这一点，但它是“私有的”，只能由 Apple 使用。因此，如果您这样做，Apple 将拒绝您的应用程序，因为在 App Store 上禁止使用私有 API。

没有替代解决方案。您必须向您的客户解释，作为第三方开发人员，您不能更改系统设置，故事结束。

# r - 由于标准偏差为零，如何避免 R 在调用 cor 时崩溃？

> ID：15572343
> 
> 赞同：0
> 
> 时间：2013-03-22T14:06:52.617
> 
> 标签：r

例如，如果我运行：

```
cor(rep(1,7), rep(1,7))
Error in cor(rep(1, 7), rep(1, 7)) :
  (converted from warning) the standard deviation is zero
 1: cor(rep(1, 7), rep(1, 7))
 2: .signalSimpleWarning("the standard deviation is zero", quote(cor(rep(1, 7), rep(1, 7))))
 3: withRestarts({
    .Internal(.signalCondition(simpleWarning(msg, call), msg, call))
    .Internal(.dfltWarn(msg, call))
}, muffleWarning = function() NULL)
 4: withOneRestart(expr, restarts[[1]])
 5: doWithOneRestart(return(expr), restart) 
```

当我尝试在 上运行以计算具有相同名称列的两个数据帧中的每一列的相关性时，这是一个`sapply`问题`names(some.data.frame)`。大约有 80 列，其中一列的向量为零，导致此崩溃调用，有没有办法避免这种情况并改为输出`NA`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:44:51.047

我看起来您设置 R 以使用 options 命令将所有警告转换为错误。

这将使它恢复原状：

```
options(warn=0) 
```

警告：

设置警告消息的处理。如果警告为负，则忽略所有警告。如果 warn 为零（默认值），则存储警告，直到顶级函数返回。如果发出的警告少于 10 个，它们将被打印出来，否则会显示一条消息，说明发出了多少个警告。创建了一个名为 last.warning 的对象，并且可以通过函数警告打印。如果 warn 为 1，则在出现警告时打印警告。如果 warn 为 2 或更大，则所有警告都会变成错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:09:53.720

不可重现：

```
R> cor(rep(1,7), rep(1,7))
[1] NA
Warning message:
In cor(rep(1, 7), rep(1, 7)) : the standard deviation is zero
R> 
```

确保你有最新的版本，确保你的会话中没有随机的东西，确保你知道如何提出一个格式良好且可重复的问题等 pp

# regex - 使用正则表达式验证帐号

> ID：15572349
> 
> 赞同：-3
> 
> 时间：2013-03-22T14:07:11.660
> 
> 标签：regex

你能帮我用一个允许几种有效格式的字符串的正则表达式吗？

格式为：

5 位破折号 6 位

5 位破折号 7 位

6 位破折号 6 位

7digits 破折号 7digits

7位破折号 8位

我问这个是因为我对正则表达式几乎一无所知。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:10:48.403

我建议您对这个正则表达式保持简单：

```
/^\d{5,7}-\d{6,8}$/ 
```

即使您指定的格式可以通过以下正则表达式进行验证：

```
^\d{5}-\d{6,7}|\d{7}-\d{7,8}|\d{6}-\d{6}$ 
```

但这对于未来的变化来说不是很容易维护。

# php - PHP 会话停止工作

> ID：15572350
> 
> 赞同：0
> 
> 时间：2013-03-22T14:07:15.420
> 
> 标签：php, debugging, session

我一直在我正在构建的网站上使用 PHP 会话，它一直运行良好，直到今天早上奇怪：

一页一：

```
session_start();
$_SESSION['myarray']=$myarray; 
```

然后在第二页我尝试：

```
session_start();
print_r($_SESSION['myarray']); 
```

但是它显示一个空数组。

我已经检查了第 1 页，并且该数组中有值。

关于寻找什么来调试这个的任何想法？

谢谢。

（已解决）：最终解决了问题-该行必须位于使用任何会话变量的每个页面的最顶部-实际上是第 1 行！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:16:13.587

检查您的 php 设置中是否有“register_globals = On”。我认为情况就是这样。当您在 php 设置上设置了 register_globals 时，它将处理

$_SESSION['myarray'] 和 $myarray 一样。

解决方案是禁用 php 中的 register_globals，因为它在较新版本中已弃用。否则在 $_SESSION 变量中使用不同的键名或将 $myarray 变量更改为不同的名称。

# ember.js - ember-data 如何重新加载/排序存储记录

> ID：15572354
> 
> 赞同：2
> 
> 时间：2013-03-22T14:07:24.697
> 
> 标签：ember.js, ember-data

有没有办法在 ember-data 中重新加载整个商店？还是对里面的物品进行分类？

它应该是这样的：

*   用户点击“添加”按钮
*   添加了新记录
*   商店已提交
*   用户被传送到列出项目的状态
*   他的新条目以正确的顺序出现

为此，我必须在不应该的 model.didCreate 中传输（这不是模型的角色！），或者在传输后刷新存储。

有人有类似的问题吗？

我正在使用 ember-data 修订版 12

**编辑**

我用了：

```
Ember.run.later(this, function(){
    this.transitionToRoute('list');         
}, 500); 
```

给商店一些时间。但话又说回来，新条目总是在列表的底部。我仍然需要重新加载整个商店或以某种方式对其进行排序。

**编辑#2**

所以我在这里做了很少的返工。在我的模板中，我使用：

```
{{#each arrangedContent}} 
```

要使用排序数据并在我的路线中：

```
App.AdsRoute = Ember.Route.extend({
    model: function(){
        return App.Ad.find();
    },
    sortProperties: ['id']
}); 
```

但它不起作用。看起来 Route 不是 ArrayController。如果我`AdsController`从`ArrayController`它做额外的扩展也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:50:43.520

Ember ArrayControllers 有一些用于对内容进行排序的选项：

[http://emberjs.com/api/classes/Ember.ArrayController.html#property_sortAscending](http://emberjs.com/api/classes/Ember.ArrayController.html#property_sortAscending)

您可以设置要排序的字段以及要使用的顺序。当您使用这些时，您将希望将视图绑定到排列内容，而不仅仅是简单的旧内容。

在我的应用程序中，我通常会在记录保存后返回到列表状态：

```
var observer,   _this = this;

observer = function(target, path) {   
  if (target.get(path) === 'saved') {
    target.removeObserver(path, null, observer);
    return _this.get('target.router').transitionTo('apps.index');   
  } 
}; 
```

我不确定商店是否有重新加载机制（个人记录有），但如果我找到答案，我可以更新这个响应。

# image - 用opencv比较两张图片的相似度？

> ID：15572357
> 
> 赞同：7
> 
> 时间：2013-03-22T14:07:27.403
> 
> 标签：image, opencv, compare

我想用opencv检查两个图像是否相似或不同。

如果它们相同 printf("same");

如果它们不相同 printf("not same");

在opencv中有什么方法或方法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-22T15:35:16.997

这不是一件容易的事，而且是不可能做到的。我推荐的是匹配图像的兴趣点。基本上，您可以使用 opencv 库来识别图像上的兴趣点并执行它们的匹配。如果匹配的百分比足够高，则可以得出图像相同的结论。在大多数情况下，此百分比取决于您要匹配的图像类型。这意味着您需要调整接受百分比的值。

要执行指纹匹配，您可以使用 ORB、FREAK、BRISK、SURF 算法。但我建议你使用 ORB。[您可以在此处](https://willowgarage.com/sites/default/files/orb_final.pdf)阅读有关此内容的更多信息。

以下是一些提示如何使用 OpenCV for Java 进行操作：

```
//Load images to compare
Mat img1 = Highgui.imread(filename1, Highgui.CV_LOAD_IMAGE_GRAYSCALE);
Mat img2 = Highgui.imread(filename1, Highgui.CV_LOAD_IMAGE_GRAYSCALE);

MatOfKeyPoint keypoints1 = new MatOfKeyPoint();
MatOfKeyPoint keypoints2 = new MatOfKeyPoint();
Mat descriptors1 = new Mat();
Mat descriptors2 = new Mat();

//Definition of ORB keypoint detector and descriptor extractors
FeatureDetector detector = FeatureDetector.create(FeatureDetector.ORB); 
DescriptorExtractor extractor = DescriptorExtractor.create(DescriptorExtractor.ORB);

//Detect keypoints
detector.detect(img1, keypoints1);
detector.detect(img2, keypoints2);  
//Extract descriptors
extractor.compute(img1, keypoints1, descriptors1);
extractor.compute(img2, keypoints2, descriptors2);

//Definition of descriptor matcher
DescriptorMatcher matcher = DescriptorMatcher.create(DescriptorMatcher.BRUTEFORCE_HAMMING);

//Match points of two images
MatOfDMatch matches = new MatOfDMatch();
matcher.match(descriptors1,descriptors2 ,matches); 
```

请注意，它是一个非常基本的图像匹配器。如何让它变得更好你应该根据你想要匹配的图像来调查它。还可以查看 Good Matches 方法，您可以在[此处](http://docs.opencv.org/doc/tutorials/features2d/feature_flann_matcher/feature_flann_matcher.html)找到该方法。

# php - Php Auth标头不起作用

> ID：15572358
> 
> 赞同：0
> 
> 时间：2013-03-22T14:07:33.223
> 
> 标签：php, http-headers

经过长时间的互联网研究，我找到了一种似乎有效的方法，但在我想要的网站上却没有。

```
<?php

$username = '';
$password = '';
$url = 'https://web.esme.fr/pscripts/bsp';

$context = stream_context_create(array(
    'http' => array(
        'header'  => "Authorization: Basic " . base64_encode("$username:$password")
    )
));

$data = file_get_contents($url , false, $context);

 echo($data);

?> 
```

我已经在网站的另一部分尝试过这个并且它有效，但是在我想要 $data 的页面上什么都没有！！！！

我知道有时这个 url 要求 2 次身份验证，有时不是。

有什么建议吗？

谢谢

# ruby - 由于 libpq.so.5 导致 Ruby 脚本崩溃无法打开共享对象文件：没有这样的文件或目录，这是什么以及如何解决？

> ID：15572360
> 
> 赞同：1
> 
> 时间：2013-03-22T14:07:40.103
> 
> 标签：ruby, ruby-on-rails-3, activerecord, shared-libraries

我是一个 Ruby Noob 编写脚本以从数据库中提取数据并使用 active_record 加载表：

这些是我在脚本中需要的宝石。要求 'pg' gem 也无济于事（尝试过）..

```
require 'active_record'
require 'rubygems'
require 'vertica'
require 'postgres'
require 'pony' 
```

该脚本在我的 Mac 上运行良好。当我尝试在应用服务器上部署它时，它会崩溃并出现以下错误...

我什至不知道这个错误是什么意思：

```
libpq.so.5: cannot open shared object file: No such file or directory - /gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/pg-0.14.1/lib/pg_ext.so
<internal:lib/rubygems/custom_require>:29:in `require'
<internal:lib/rubygems/custom_require>:29:in `require'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activesupport-3.0.5/lib/active_support/dependencies.rb:239:in `block in require'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activesupport-3.0.5/lib/active_support/dependencies.rb:225:in `block in load_dependency'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activesupport-3.0.5/lib/active_support/dependencies.rb:596:in `new_constants_in'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activesupport-3.0.5/lib/active_support/dependencies.rb:225:in `load_dependency'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activesupport-3.0.5/lib/active_support/dependencies.rb:239:in `require'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/pg-0.14.1/lib/pg.rb:4:in `<top (required)>'
<internal:lib/rubygems/custom_require>:33:in `require'
<internal:lib/rubygems/custom_require>:33:in `rescue in require'
<internal:lib/rubygems/custom_require>:29:in `require'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activesupport-3.0.5/lib/active_support/dependencies.rb:239:in `block in require'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activesupport-3.0.5/lib/active_support/dependencies.rb:225:in `block in load_dependency'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activesupport-3.0.5/lib/active_support/dependencies.rb:596:in `new_constants_in'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activesupport-3.0.5/lib/active_support/dependencies.rb:225:in `load_dependency'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activesupport-3.0.5/lib/active_support/dependencies.rb:239:in `require'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/connection_adapters/postgresql_adapter.rb:9:in `postgresql_connection'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:229:in `new_connection'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:237:in `checkout_new_connection'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:191:in `block (2 levels) in checkout'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:187:in `loop'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:187:in `block in checkout'
/gds/apps/ruby-1.9.2-p180/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:186:in `checkout'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:94:in `connection'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:317:in `retrieve_connection'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/connection_adapters/abstract/connection_specification.rb:97:in `retrieve_connection'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/connection_adapters/abstract/connection_specification.rb:89:in `connection'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/arel-2.0.2/lib/arel/table.rb:127:in `table_cache'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/arel-2.0.2/lib/arel/table.rb:122:in `tables'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/arel-2.0.2/lib/arel/table.rb:118:in `table_exists?'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/arel-2.0.2/lib/arel/table.rb:97:in `[]'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/relation/predicate_builder.rb:23:in `block in build_from_hash'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/relation/predicate_builder.rb:9:in `each'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/relation/predicate_builder.rb:9:in `map'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/relation/predicate_builder.rb:9:in `build_from_hash'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/relation/query_methods.rb:227:in `build_where'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/relation/query_methods.rb:77:in `where'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/relation.rb:221:in `destroy_all'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/base.rb:439:in `destroy_all'
./edx_vert_to_pg.rb:43:in `<main>' 
```

该脚本在我的 Mac 上运行良好。当我尝试部署它时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:12:39.210

您可能没有为 postgres 正确设置路径，这就是它找不到它的原因。

[这](https://stackoverflow.com/questions/12781566/error-while-loading-shared-libraries-libpq-so-5-cannot-open-shared-object-file)看起来像一个类似的问题。

# ruby-on-rails - Rails 使用复选框和 jquery ajax 更改布尔值

> ID：15572371
> 
> 赞同：14
> 
> 时间：2013-03-22T14:08:11.840
> 
> 标签：ruby-on-rails, jquery, routes, boolean

我是 Rails 的新手，并试图通过复选框和使用 jquery ajax 来更改布尔值：

```
<%- @tasks.each do |task| %>
  <div class="task-wrapper">
    <%= check_box_tag 'completed', task.id , task.completed, :class => "task-check" %>
    <%= content_tag :span, task.task %>
    <%= content_tag :span, task.deadline %>
  </div>
<% end %> 
```

和javascript：

```
$(".task-check").bind('change', function(){
  if (this.checked){
    var bool = this.checked ? 1 : 0;
    $.ajax({
      url: '/todos/toggle',
      type: 'POST',
      data: '{"task_id":"'+ this.value +'", "bool":"'+ bool +'"}'
    });
  }
  else {
    alert("no");
  }
}); 
```

然后控制器：

```
def toggle(task_id, bool)
  @task = Todo.find_by_id(task_id)

  if @task != nil?
    @task.update_attributes(:completed => bool)
  else
    set_flash "Error, please try again"
  end
end 
```

最后是路线：

```
resources :todos do
  member do
    post 'toggle'
  end
end 
```

> 也尝试了收集，但给出了同样的错误。

每当我尝试它时，我都会`404 error`采取行动。

问题是什么？

谢谢

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2016-01-07T00:44:10.470

从 Rails 4 开始，有一种方法可以做到这一点，而无需任何额外的 JS 或 CSS：

```
<%= check_box_tag 'completed', task.id, task.completed,
      data: {
        remote: true,
        url: url_for(action: :toggle, id: task.id),
        method: "POST"
      } %> 
```

事实证明，添加`remote: true`到输入会导致 jquery-ujs 以所有不错的方式使其成为 ajax-y。Thoughtbot 的[“A Tour of Rails jQuery UJS”](https://robots.thoughtbot.com/a-tour-of-rails-jquery-ujs#ajax-forms)简要介绍了这一点（以及许多其他可用的好东西）；jQuery UJS wiki 中的[“Unobtrusive scripting support for jQuery”页面](https://github.com/rails/jquery-ujs/wiki/Unobtrusive-scripting-support-for-jQuery)在这方面也做了彻底的工作。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-22T14:50:53.383

尝试以下操作（保留其他所有内容）：

的JavaScript：

```
$(".task-check").bind('change', function(){
  if (this.checked){
    $.ajax({
      url: '/todos/'+this.value+'/toggle',
      type: 'POST',
      data: {"completed": this.checked}
    });
  }
  else {
     alert("no");
  }
}); 
```

控制器：

```
def toggle
  @task = Todo.find(params[:id])

  if @task.update_attributes(:completed => params[:completed])
    # ... update successful
  else
    # ... update failed
  end
end 
```

看看`bundle exec rake routes`向您展示 rails 生成的路径。如果您`post 'toggle'`是成员，您将获得类似的路径`/todos/:id/toggle`，因此在 ajax 中更新了 url。

在控制器中，`:id`来自路径的最终位于`params[:id]`. 来自 ajax 请求的数据也以`params`散列结束，因此`params[:completed]`.

# winjs - 如何从winjs中的应用程序文件夹中读取图像

> ID：15572375
> 
> 赞同：1
> 
> 时间：2013-03-22T14:08:20.520
> 
> 标签：winjs

## 如何从winjs中的应用程序文件夹中读取图像

```
 var item = groupedProducts.getAt(indx);            
 item.img = Windows.Storage.ApplicationData.current.localFolder.path + "\\" + "3766111.jpg";
                    groupedProducts.setAt(indx, item);
                    WinJS.UI.processAll(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:58:53.930

您需要使用异步 API 来访问 WinJS 中的 ApplicationData 中的文件，例如下面使用的 getFileAsync 函数（这是我在数据绑定中为我的一个应用程序使用的辅助函数）：

```
function getLocalLargeMapTile(item) {
    return new WinJS.Promise(
        function (completed, error, progress) {
            var filename;
            var sourceFolder;

            if (item.latlong) {
                var latandlong = item.latlong.split(", ");
                var lat = latandlong[0];
                var lon = latandlong[1];
                filename = lat + lon + ".png";

                var appData = Windows.Storage.ApplicationData.current;
                sourceFolder = appData.localFolder;

                sourceFolder.getFileAsync(filename).then(function (file) {
                    var mapUrl = window.URL.createObjectURL(file, { oneTimeOnly: true });
                    completed(mapUrl);
                },
                function (error) {
                    handleError(error)
                });
            }
            else {
                filename = "ms-appx:///images/megaphone_256x256.png";
                completed(filename);
            }
        }
    );
} 
```

我在辅助函数中所做的是检查我的数据是否包含纬度和经度，如果是，则检查具有匹配文件名的文件，并且由于这些文件位于 Application Data 文件夹中，因此使用 objectURL 包装文件并返回一个带有 objectURL 的承诺。否则，我只返回一个指向应用程序图像文件夹中静态文件的 ms-appx url。以下是我如何从编程模板调用此辅助函数（我认为您不能使用声明性模板执行此操作）：

```
var image = document.createElement("img");
image.className = "item-image";
image.src = "ms-appx:///images/megaphone_256x256.png";
result.appendChild(image);

// additional code omitted
var promise = mapTileUtil.getLocalMapTile(currentItem);
promise.done(function (mapTileUrl) {
    image.src = mapTileUrl;
}); 
```

有关模板函数的更多信息，它比声明性模板提供对呈现标记的更大控制，请查看：

[http://msdn.microsoft.com/en-us/library/windows/apps/jj585523.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/jj585523.aspx)

和

[http://go.microsoft.com/fwlink/p/?linkid=231499](http://go.microsoft.com/fwlink/p/?linkid=231499)

有关 Windows 应用商店应用程序开发的更多信息，请注册[App Builder](http://bit.ly/gd30tolaunch)。

# php - 教义 ORM 内存问题

> ID：15572384
> 
> 赞同：3
> 
> 时间：2013-03-22T14:09:05.693
> 
> 标签：php, memory, symfony, doctrine-orm

问题：

在运行使用以下 Factory 类中的 Doctrine 的守护程序服务时，存在内存问题。当守护程序服务启动时，它运行大约 175MB。一天后它大约是 250MB，再过一天它是 400MB。我正在寻找导致内存增加的原因以及如何降低内存。

我尝试过的事情：

*   $em->clear(); // 这有点帮助
*   $em->close(); // 这会导致问题
*   $em->getConnection()->getConfiguration()->setSQLLogger(null);

    --env=prod 应该处理 setSQLLogger(null)，对吗？

我应该做些什么来帮助使用 Doctrine 2.x 和 Symfony 2.1.x 解决内存问题？

创建了一个工厂来处理连接

===================== 启动 EMFactory =====================

```
<?php

namespace NS\Bundle\EMBundle;

use Doctrine\ORM\EntityManager;

class EMFactory
{
    /**
     * @var
     */
    private $container;

    /**
     * @param $container
     */
    public function __construct($container)
    {
        $this->container = $container;
    }

    /**
     * @return EntityManager
     */
    public function getBlahEntityManager()
    {
        return $this->getContainer()->get('doctrine.orm.blah_manager_entity_manager');
    }

    /**
     * @return EntityManager
     */
    public function getFooEntityManager()
    {
        return $this->getContainer()->get('doctrine.orm.foo_manager_entity_manager');
    }

    /**
     * @return EntityManager
     */
    public function getBarEntityManager()
    {
        return $this->getContainer()->get('doctrine.orm.bar_manager_entity_manager');
    }

    /**
     * @return mixed
     */
    public function getContainer()
    {
        return $this->container;
    }

    /**
     * @param $container
     * @return $this
     */
    public function setContainer($container)
    {
        $this->container = $container;
        return $this;
    }

    public function closeEntityManager(EntityManager $em)
    {
        try {
            $em->clear(); // This kinda helps
            //$em->close(); // this causes issues
            //$em->getConnection()->getConfiguration()->setSQLLogger(null); // --env=prod should take care of this
        } catch (\Exception $e) {
            // exception here
        }
    }
} 
```

===================== END EMFactory =====================

我使用构造 EMFactory 的抽象类

===================== 启动抽象类 =====================

```
/**
 * @param \Symfony\Component\DependencyInjection\Container $container
 */
public function __construct(Container $container)
{
    $this->container = $container;
    $this->entityManagerFactory = new EMFactory($container);
} 
```

===================== END抽象类=====================

这是我如何使用 EM 的示例，该类扩展了上面的 Abstract 类

===================== 开始工作示例#1 =====================

```
// calling like this looks to be working as expected

$fooEM = $this->getEntityManagerFactory()->getFooEntityManager();

$barResults = $fooEM->getRepository('NS\Bundle\EMBundle\Entity\Bar')->findOneBy(array('id' => 1));

if (!is_object($barResults)) {
    throw new \Exception("Bar is a non object.");
}

// some logic here ...

$this->getEntityManagerFactory()->closeEntityManager($fooEM); 
```

===================== END 工作示例#1 =====================

这是我如何使用 EM 的另一个示例，该类扩展了上面的 Abstract 类

===================== 开始工作示例#2 =====================

```
// calling from functions like this

$fooEM = $this->getEntityManagerFactory()->getFooEntityManager();

$dql = 'SELECT b.*
        FROM NS\Bundle\EMBundle\Entity\Bar b            
        WHERE b.id = :id';

$query = $fooEM->createQuery($dql);
$query->setParameter('id', 1);

$barResults = $query->getResult();

$this->getEntityManagerFactory()->closeEntityManager($fooEM);

return $barResults; 
```

===================== END 工作示例#2 =====================

这是我如何使用 EM 的另一个示例，该类扩展了上面的 Abstract 类

===================== 开始工作示例#3 =====================

```
// calling from functions like this

$fooEM = $this->getEntityManagerFactory()->getFooEntityManager();

$barEntity = new Bar();
$barEntity->setId(1);
$barEntity->setComment('this is foo-ie');

$fooEM->persist($barEntity);
$fooEM->flush();

$this->getEntityManagerFactory()->closeEntityManager($fooEM);

unset($barEntity); 
```

===================== END 工作示例#3 =====================

这些只是一些基本示例，但只是查询变得更加复杂。

有什么突出的东西说，优化我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:56:02.240

您的问题可能来自您的实体经理的实例。如果你有一组特定的，你可能宁愿使用 Symfony2 依赖注入而不是调用容器。

每次使用访问器时，都会实例化一个新的实体管理器，因此会消耗更多内存（并且由于它是一个守护进程，因此您永远不会真正释放它）。通过使用 DI，您将始终拥有相同的实例。

您的 EMFFactory 应如下所示：

```
<?php

namespace NS\Bundle\EMBundle;

use Doctrine\ORM\EntityManager;

class EMFactory
{
    /**
     * @var
     */
    private $fooEm;
    /**
     * @var
     */
    private $barEm;
    /**
     * @var
     */
    private $blahEm;

    /**
     * @param $fooEm
     * @param $barEm
     * @param $blahEm
     */
    public function __construct($fooEm, $barEm, $blahEm)
    {
        $this->fooEm = $fooEm;
        $this->barEm = $barEm;
        $this->blahEm = $blahEm;
    }

    /**
     * @return EntityManager
     */
    public function getBlahEntityManager()
    {
        return $this->blahEm;
    }

    /**
     * @return EntityManager
     */
    public function getFooEntityManager()
    {
        return $this->fooEm;
    }

    /**
     * @return EntityManager
     */
    public function getBarEntityManager()
    {
        return $this->barEm;
    }

    /**
     * @return mixed
     */
    public function getContainer()
    {
        return $this->container;
    }

    /**
     * @param $container
     * @return $this
     */
    public function setContainer($container)
    {
        $this->container = $container;
        return $this;
    }

    public function closeEntityManager(EntityManager $em)
    {
        try {
            $em->clear(); // This kinda helps
            //$em->close(); // this causes issues
            //$em->getConnection()->getConfiguration()->setSQLLogger(null); // --env=prod should take care of this
        } catch (\Exception $e) {
            // exception here
        }
    }
} 
```

然后，调整您的服务定义以将各种 EM 提供给您的配置，并将您的 EMFactory 也定义为服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T12:39:51.323

这解决了我们遇到的连接问题。

只需要关闭连接

```
public function closeEntityManager(EntityManager $em)
{
    try {
        $em->clear(); // This kinda helps
        $em->getConnection()->close(); // this seems to work            
    } catch (\Exception $e) {
        // exception here
    }
} 
```

# python - 从字符串中的数字拆分字母

> ID：15572387
> 
> 赞同：11
> 
> 时间：2013-03-22T14:09:13.627
> 
> 标签：python, string, split

我正在处理这样的字符串：`"125A12C15"` 我需要在字母和数字之间的边界处拆分它们，例如这个应该变成`["125","A","12","C","15"]`.

在 Python 中是否有比逐个位置检查它是字母还是数字，然后进行相应连接更优雅的方法呢？例如这种东西的内置函数或模块？

感谢您的任何指点！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-22T14:12:22.110

[`itertools.groupby`](http://docs.python.org/2/library/itertools.html#itertools.groupby)与方法一起使用[`str.isalpha`](http://docs.python.org/2/library/stdtypes.html#string-methods)：

> 文档字符串：
> 
> groupby(iterable[, keyfunc]) -> 创建一个迭代器，它返回按 key(value) 的每个值分组的 (key, sub-iterator)。

* * *

> 文档字符串：
> 
> S.isalpha() -> 布尔值
> 
> 如果 S 中的所有字符都是字母并且 S 中至少有一个字符，则返回 True，否则返回 False。

* * *

```
In [1]: from itertools import groupby

In [2]: s = "125A12C15"

In [3]: [''.join(g) for _, g in groupby(s, str.isalpha)]
Out[3]: ['125', 'A', '12', 'C', '15'] 
```

* * *

或者可能`re.findall`或`re.split`来自[正则表达式模块](http://docs.python.org/2/library/re.html)：

```
In [4]: import re

In [5]: re.findall('\d+|\D+', s)
Out[5]: ['125', 'A', '12', 'C', '15']

In [6]: re.split('(\d+)', s)  # note that you may have to filter out the empty
                              # strings at the start/end if using re.split
Out[6]: ['', '125', 'A', '12', 'C', '15', '']

In [7]: re.split('(\D+)', s)
Out[7]: ['125', 'A', '12', 'C', '15'] 
```

* * *

至于性能，似乎使用正则表达式可能更快：

```
In [8]: %timeit re.findall('\d+|\D+', s*1000)
100 loops, best of 3: 2.15 ms per loop

In [9]: %timeit [''.join(g) for _, g in groupby(s*1000, str.isalpha)]
100 loops, best of 3: 8.5 ms per loop

In [10]: %timeit re.split('(\d+)', s*1000)
1000 loops, best of 3: 1.43 ms per loop 
```

# linux - 通过 SSH shell 创建文本文件

> ID：15572390
> 
> 赞同：0
> 
> 时间：2013-03-22T14:09:18.027
> 
> 标签：linux, git, bash

我正在尝试在我的共享主机帐户上创建一个通过 SSH 运行的 BASH shell 脚本，以自动化 git 网站控制系统，详见：

```
http://danielmiessler.com/study/git/#website. 
```

到目前为止，我的 bash 脚本就在上面的文章之外：

```
cd ~/mydomains; mkdir $name.git;
cd ~/mydomains/$name.git; git init --bare; 
/bin/vi ~/domains/$name.git/hooks/post-update 
```

前 2 行按预期工作。

当我添加第三行时，脚本似乎冻结了。在我的环境中，vi 的路径是 /bin/vi。

直接从文章中我希望执行以下操作：

```
vi /path/website.git/hooks/post-update 
```

然后插入：

```
GIT_WORK_TREE=/path/htdocs git checkout -f 
```

然后关闭文件。

谁能给我一些关于现在该怎么做的建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:12:57.007

为什么您尝试在脚本中使用 vi 只是为了将行添加到文件中？问题是 vi 是交互式的，但您正在寻找如何自动化它;-)

你应该使用

```
echo "GIT_WORK_TREE=/path/htdocs git checkout -f" >> ~/domains/$name.git/hooks/post-update 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:15:03.850

我相信您需要在 git 使用钩子脚本之前使其可执行。

```
chmod +x /path/website.git/hooks/post-update 
```

之后，在 push 之后，应该执行脚本。

# ruby-on-rails - 为什么 Rails 生成一个运行类而不是对象的 config.ru？

> ID：15572392
> 
> 赞同：12
> 
> 时间：2013-03-22T14:09:24.610
> 
> 标签：ruby-on-rails, ruby, rack

机架[指定](http://rack.rubyforge.org/doc/SPEC.html)

> Rack 应用程序是响应调用的 Ruby 对象（不是类）。

因此，一个简单的`config.ru`看起来像这样：

```
class MyApp
  def call(env)
    [200, {"Content-Type" => "text/plain"}, ["Hello from Rack!\n"]]
  end
end

run MyApp.new 
```

而 Rails 生成这个：

```
# This file is used by Rack-based servers to start the application.

require ::File.expand_path('../config/environment',  __FILE__)
run RailsApp::Application 
```

所以，我想知道：为什么不`run RailsApp::Application.new`将 Rack 指定为对象而不是类？`Rails::Application`我错过了什么特别的东西吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-22T15:00:13.753

这确实有点隐藏:)

`RailsApp::Application`是 的子类`Rails::Application`，而后者又是 a `Rails::Engine`which 是 a `Rails::Railtie`。现在`Rails::Railtie`有一个[`inherited`钩子](https://github.com/rails/rails/blob/v3.2.12/railties/lib/rails/railtie.rb#L129-L134)，只要子类从 Railtie 类继承（在本例中`Engine`），就会调用该钩子。

此回调将[`Rails::Railtie::Configurable`](https://github.com/rails/rails/blob/v3.2.12/railties/lib/rails/railtie/configurable.rb)模块包含到子类中。在这个模块中，你会发现魔法的第一部分。

在类上定义的`method_missing`方法调用类实例上的方法，或多或少地解析为

```
RailsApp::Application.new.call(...) 
```

该`call`实例方法[`Rails::Application#call`](https://github.com/rails/rails/blob/v3.2.12/railties/lib/rails/application.rb#L221-L224)在典型的 Rack 处理中定义并执行。

可能还涉及到更多的魔法，这使得它不是 100% 等价的，但大致应该是这样......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:55:16.467

一个类也是一个对象。Rack 不实例化应用程序对象（这就是它指定您需要提供对象的原因），您在 中执行此操作`config.ru`，因此当 Rack 发送“调用”时，如果 Rails 类对象遵循所有 Rack 规则，它不应该是问题。

在内部，我不知道 Rails 是否对`call`. 它甚至可以是一个工厂方法，既吐出应用程序类的实例并运行它。但这并不需要满足 Rack。

# vim - 更改 snipMate 中的默认选项卡

> ID：15572395
> 
> 赞同：7
> 
> 时间：2013-03-22T14:09:32.330
> 
> 标签：vim, snipmate

我已经阅读了一段时间的文档，但我似乎找不到任何关于如何在 snipMate 中更改默认完成键的信息。

这是文档。[https://github.com/garbas/vim-snipmate/blob/master/doc/snipMate.txt](https://github.com/garbas/vim-snipmate/blob/master/doc/snipMate.txt) 我是不是忽略了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-03-08T15:08:11.867

在`:help SnipMate-mappings`

> SnipMate 使用的映射可以使用 :map 命令进行自定义。例如，要更改触发片段并移动到下一个制表位的键，>
> 
> ```
>  :imap <C-J> <Plug>snipMateNextOrTrigger
>     :smap <C-J> <Plug>snipMateNextOrTrigger 
> ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T14:28:55.973

这是通过两个变量完成的；它似乎没有记录在案，但它是在`after/plugin/snipMate.vim`. 要覆盖，请在获取插件之前重新定义这些变量，例如在您的`~/.vimrc`：

```
:let g:snips_trigger_key = '<tab>'
:let g:snips_trigger_key_backwards = '<s-tab>' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-29T01:08:35.740

它实际上记录在案：

```
:help snipMate-remap 
```

# vb.net - DotNetZip 循环逻辑的逻辑帮助

> ID：15572397
> 
> 赞同：0
> 
> 时间：2013-03-22T14:09:33.800
> 
> 标签：vb.net, zip, logic, dotnetzip

我有一个逻辑问题，只是需要更多的大脑来解决这个问题。

```
 For Each JobNode In JobNodes
                    Dim Source = JobNode.SelectNodes("Source")
                    For Each item As System.Xml.XmlNode In Source
                        Dim infoReader As System.IO.FileInfo

                        ''''Discerns whether a file or directory

                        If item.InnerText.Contains(".") Then 'is a file

                            If Dir$(item.InnerText) <> vbNullString Then
                                mySize += FileLen(item.InnerText)
                            End If

                            zip.AddFile(item.InnerText, "")

                            Dim numFiles2 = filenames.Count
                            mySize = BytesTO(mySize, convTo.MB)
                            Console.WriteLine("...Added all " & numFiles2 & " files. Total loose file collection size is " & Math.Round(mySize, 2) & " MB")
                            Console.WriteLine(vbCrLf)

                        Else 'is a directory

                            zip.AddDirectory(item.InnerText, GetLastDirName(item.InnerText & " "))
                            Dim dinfo As New DirectoryInfo(item.InnerText)
                            Dim sizeOfDir As Long = DirectorySize(dinfo, True)
                            Dim numFiles As Integer = CountFiles_FolderAndSubFolders(item.InnerText)

                            Console.WriteLine("...Added all " & numFiles & " files. Total directory size is {0:N2} MB", (CDbl(sizeOfDir)) / (1024 * 1024))
                            Console.WriteLine(vbCrLf)
                        End If

                    Next 
```

这是我制作的备份程序的一部分。这是确定要添加到 zip 的对象是文件（IF 语句的第一部分）还是目录（IF 语句的 ELSE 部分）的部分。

我的问题是，我正在尝试添加此代码：

```
Dim numFiles2 = filenames.Count
mySize = BytesTO(mySize, convTo.MB)
Console.WriteLine("...Added all " & numFiles2 & " files. Total loose file collection size is " & Math.Round(mySize, 2) & " MB")
Console.WriteLine(vbCrLf) 
```

就在`zip.AddFile(item.innertext,"")`部分之后。我想添加它，以便我可以从控制台打印信息。

问题是，如果我只是把它直接放在 之后`zip.addfile()`，它每次都会直接输出上面的代码。我只希望它在完成添加所有松散文件（或使用添加的文件）后打印出该部分（正上方`zip.AddFile()`）

编辑：在顶部添加 for 循环以获得更多说明

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:11:06.587

添加一个标志，然后在循环完成后查找它。似乎您正在循环文件而不是递归调用它。我猜你现在只有一个循环。

循环迭代之前：

```
Dim FilesBeingAdded as Boolean = False
Dim numFiles2 as Integer = 0 
```

迭代内部：

```
If item.InnerText.Contains(".") Then 'is a file
     If FilesBeingAdded = False Then
         FilesBeingAdded = true          
     End If

     If Dir$(item.InnerText) <> vbNullString Then
         mySize += FileLen(item.InnerText)
     End If

     zip.AddFile(item.InnerText, "")
     numFiles2 +=1

 Else 'is a directory
     zip.AddDirectory(item.InnerText, GetLastDirName(item.InnerText & " "))
     Dim dinfo As New DirectoryInfo(item.InnerText)
     Dim sizeOfDir As Long = DirectorySize(dinfo, True)
     Dim numFiles As Integer = CountFiles_FolderAndSubFolders(item.InnerText)

     Console.WriteLine("...Added all " & numFiles & " files. Total directory size is {0:N2} MB", (CDbl(sizeOfDir)) / (1024 * 1024))
     Console.WriteLine(vbCrLf)
End If 
```

循环迭代后：

```
If FilesBeingAdded = True Then
   mySize = BytesTO(mySize, convTo.MB)
   Console.WriteLine("...Added all " & numFiles2 & " files. Total loose file collection size is " & Math.Round(mySize, 2) & " MB")
   Console.WriteLine(vbCrLf)
   mySize = 0
   numFiles2 = 0
   FilesBeingAdded = False
End If 
```

因此，当它完成当前迭代时，它将记录它添加的文件的数量以及大小并将其打印到控制台。然后它将变量归零，以便内部循环的下一次迭代具有干净的值。我假设您在多个目录上运行它。通过检查`FilesBeingAdded`，您可以确保避免在目录不包含文件时显示丑陋的零计数输出的情况。

该解决方案对您如何输入这段代码进行了很多假设。如果我的假设不正确，请修改问题以提供更好的解决方案。

# javascript - 森伯斯特动画故障

> ID：15572398
> 
> 赞同：2
> 
> 时间：2013-03-22T14:09:34.950
> 
> 标签：javascript, charts, d3.js, sunburst-diagram

我从默认的[Sunburst 示例](http://bl.ocks.org/mbostock/4063423)开始，并尝试在单击时添加动画 - 单击楔形会使该楔形成为中心元素。除了在少数情况下，这很有效——看起来如果深度超过 2（基于 0），那么一些楔子的动画效果不正确；他们似乎在错误的地方开始动画，但最终在正确的地方结束。

以下是我认为的相关代码，希望对其他人有用：

```
animate = function (d) {
            var oldDs = [], topD, includeds;

            if (animating)
                return;
            animating = true;

            topD = (d == selected && d.parent) ? d.parent : d;
            if (selected == topD) {
                animating = false;
                return;
            }
            selected = topD;

            svg.selectAll("path").filter(function (f) {
                return (!isDescendant(f, topD))
            }).transition().duration(1000).style("opacity", "0").attr("pointer-events","none");

            includeds = svg.datum(topD).selectAll("path").filter(function (f) {
                return isDescendant(f, topD);
            });

            // step 1 - save the current arc settings
            includeds.data().each(function (d) {
                oldDs[d.ac_id] = {x: d.x, dx: d.dx, y: d.y, dy: d.dy};
            });

            // step 2 - recalculate arc settings and animate
            includeds.data(partition.nodes) // recalculates
                .transition().duration(1000).attrTween("d", function (d) {
                    var oldD = oldDs[d.ac_id],
                        interpolator = d3.interpolateObject(oldD, d);
                    return function (t) {
                        return arc(interpolator(t));
                    }
                }).style("opacity", "1").attr("pointer-events","all");

            setTimeout(function(){ animating = false; }, 1000);
        }; 
```

因为我的代码与深度没有任何关系，我预计问题出在其他地方，但我一直无法找到它。该故障似乎影响了所有浏览器（至少 Chrome、Firefox 和 IE）。

所以，我的问题是：问题是什么，我该如何解决？

# hibernate - 休眠本机查询返回整数列表不起作用

> ID：15572399
> 
> 赞同：1
> 
> 时间：2013-03-22T14:09:36.813
> 
> 标签：hibernate, native

我在休眠中使用本机查询，它会返回我的 id 列表。我想将此列表转换为整数列表。但它不起作用并向我显示异常。

```
public List<Integer> fethcSurvayIdOnCount(){
            HibernateCallback action = new HibernateCallback() {
            public Object doInHibernate(Session session)
            throws HibernateException, SQLException {
        String hq = "select id from tb_abc where age='10'" ;

        SQLQuery query = (SQLQuery) session
                .createSQLQuery(hq)
                .setResultTransformer(
                        Transformers
                                .aliasToBean(Integer.class));

        return query.list();
    }
    };
    return (List<Integer>) getHibernateTemplate()
        .execute(action);
    } 
```

这是例外

```
org.springframework.orm.hibernate3.HibernateSystemException: Could not find setter for id on class java.lang.Integer; nested exception is org.hibernate.PropertyNotFoundException: Could not find setter for id on class java.lang.Integer
    at org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:676)
    at org.springframework.orm.hibernate3.HibernateAccessor.convertHibernateAccessException(HibernateAccessor.java:412)
    at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:424)
    at org.springframework.orm.hibernate3.HibernateTemplate.execute(HibernateTemplate.java:339) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-25T14:30:34.457

这个更好。在循环中不需要从 Object 到 Integer 的转换：

```
public List<Integer> getIds(){ 

    String hq = "select id from tb_abc where age='10'" ;
    List<Integer> results = session.createSQLQuery(hq).list();

    return results;
} 
```

我正在使用休眠 4.3

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T03:26:59.457

这个问题很简单。首先，如果你使用原生SQL，返回的结果集是对象数组，每个数组的第一个元素是你的id值，所以方法的return-value应该是List，这里举个例子：

```
public List<Object[]> getIds(){ 

    String hq = "select id from tb_abc where age='10'" ;
    List<Object[]> results = session.createSQLQuery(hq).list();

    return results; 
```

}

获得结果后，您可以获得如下预期值：

```
for(Object[] obj : results) {
     Integer id = Integer.valueOf(obj[0].toString());
     // do sth
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T15:05:30.703

问题来自您的`Transfomer`. 当您请求特定字段时，您从列表 Method 中获得的是 a`List<Object[]>`并且您的转换器尝试将这些对象映射为整数，但基于属性的别名（在您的情况下为“id”）并假设您指定的类是一个不是的bean（因此是方法的名称`aliasToBean`）`Integer`。

您可能必须遍历查询返回的列表才能获得正确的类型（无论如何，这都是转换器在幕后所做的）。

# javascript - 如果单选按钮 .is(':checked') - 无法正常工作

> ID：15572401
> 
> 赞同：2
> 
> 时间：2013-03-22T14:09:44.387
> 
> 标签：javascript, jquery, html, input, radio-button

我有一个 javascript 代码可以在选中单选按钮时显示一个字段。该代码运行良好，但是当我取消选中收音机时，该字段并没有隐藏。当单选按钮被选中时，它还会显示一个`<span>`，但当它未被选中时，跨度也不会隐藏。

```
<script>
$(function() {
    $('#radiopromo2').live('change', function() {
        if($(this).is(':checked')) {
            $("#fieldtraining").show();
            $("#radio3").show();
        } else {
            $("#fieldtraining").hide();
            $("#radio3").hide();
        }
    }).trigger('change');
});
</script> 
```

谁能帮助我？我做了一个 jsfiddle [http://jsfiddle.net/4UH2H/8/](http://jsfiddle.net/4UH2H/8/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T14:14:47.657

尝试使用更合适的[.prop()](http://api.jquery.com/prop/)：

```
if($(this).prop('checked')){ 
```

甚至是普通的旧Javascript（它更快）：

```
if(this.checked){ 
```

这总是对我有用。此外，`.live()`不推荐使用`.on()`，而对于单选按钮，最好使用`click`而不是`change`因为较旧的 webkit 版本错误无法正确识别 onchange：

```
$('#radiopromo2').on('click',function(){ 
```

有了这些变化，你应该是金子。

**编辑** 基于[此处的 jsFiddle](http://jsfiddle.net/4UH2H/11/)，您的事件未使用正确的选择器触发。这是更新的东西：

```
$('input[name="radiotraining"]').on('click', function () {
    if ($('#radiopromo2').prop('checked')) {
        $("#fieldtraining").show();
        $("#radio3").show();
    } else {
        $("#fieldtraining").hide();
        $("#radio3").hide();
    }
}); 
```

有用！耶！尽管查看您的 jsFiddle，但您确实应该考虑使用 CSS 而不是 jQuery 来处理这些基本的显示/隐藏内容：

```
#fieldtraining,#radio3 {
    display:none;
}

#radiopromo2:checked + #radio2 > #radio3 {
    display:inline;
}

#radiopromo2:checked ~ #fieldtraining {
    display:block;
} 
```

可以在 IE9+ 和所有真正的浏览器（耶 CSS3！）上完美运行，比 JS 快得多，甚至当灰头发的人在他们的浏览器上关闭 JS 时也能正常工作。您可以为那些蹩脚的旧浏览器（如 IE6）保存 jQuery。[这是 jsFiddle](http://jsfiddle.net/4UH2H/12/)来说明我的意思。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:17:13.437

```
the behavior of .is() method in jquery is not as expected.Instead of .is() use .attr():
if($(this).attr("checked") == "checked")){
// code goes here
} 
```

# javascript - 没有为 Dust.js 模板中的元素触发 JQuery 事件

> ID：15572405
> 
> 赞同：0
> 
> 时间：2013-03-22T14:09:53.773
> 
> 标签：javascript, jquery, dust.js

所以我使用灰尘模板来渲染一些元素，并且在渲染模板之后，我绑定到其中一个元素的 jquery 事件不会触发。灰尘模板：

```
<input type="number" id="numAmounts" value={numAmounts}> 
```

$(document).ready 中的 Jquery 事件绑定：

```
$("#numAmounts").on("blur", updateModel); 
```

该事件根本没有触发，有人知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:29:21.143

听起来 Dust.js 模板是在 DOM 就绪事件触发*后呈现的。*这意味着当你的`$(document).ready()`函数被执行时，不存在带有`id`of 的元素`numAmounts`，也没有绑定事件处理程序。

解决此问题的一种解决方案是使用[事件委托](http://api.jquery.com/on/#direct-and-delegated-events)：

```
$(document).on('blur', '#numAmounts', updateModel); 
```

基本原则是事件处理程序绑定到一个*确实*存在的元素 - 在本例中是`document`它本身 - 并且您为动态元素指定一个选择器，该选择器将出现在其中您想要对该事件做出反应的动态元素。理想情况下，您会选择更接近 HTML 结构中的动态元素的内容，而不是整个文档。

作为替代解决方案：通过简要阅读 Dust 文档，您似乎可以将回调函数传递给`render`将在模板渲染后执行的函数。您可以在其中包含您的静态事件处理程序绑定，并且假设该元素将在该点存在应该是安全的。查看[Dust.js 文档的](http://akdubya.github.com/dustjs/)*回调接口*部分。

# linux - greping 和替换 2 个文件路径

> ID：15572407
> 
> 赞同：0
> 
> 时间：2013-03-22T14:10:00.757
> 
> 标签：linux, unix, grep, cygwin

我目前正在做一个项目，我想在多个地方更改图片。

```
 old file dir: /images/icons/helpPop.png
  new file dir: /public/website_pngs/icons-buttons/button_question_mark.png 
```

我想试试

```
grep -rl 'images/icons/helpPop' . | xargs sed -i 's/images/icons/helpPop/public/website_pngs/icons-buttons/button_question_mark/g' 
```

但我知道那是行不通的。我正在研究定界符，并希望得到一些额外的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:12:27.270

```
for i in grep -rl 'images/icons/helpPop' . ; do cp $i $i.bak; sed -i 's/images\/icons\/helpPop/public\/website_pngs\/icons-buttons\/button_question_mark/g' < $i.bak > $i; done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:15:06.163

> 我正在研究定界符，并希望得到一些额外的建议。

一些建议：

*   如果旧/新目录已修复，请尝试将它们保存到变量中
*   在 sed 中使用不同的分隔符，例如`"s#$old#$new#g" or "s@$old@$new@g"`（双引号！！）
*   为了更安全，您最好在旧目录文本中转义`. (period/dot)`。因为它`any char`在正则表达式中表示。像这样的纯文本**可能**是危险的操作。（幸运`.*`的是你的路径中没有 ^_^ ）

或者你想要工作代码？

**编辑**评论：

您不需要“设置”分隔符，只需使用它，就像您正在使用的一样`/`，看看这个例子：

```
kent$  echo "/////"|sed 's#/#?#g'
?????

kent$  echo "/////"|sed 's^/^?^g'
?????

kent$  echo "/////"|sed 's%/%?%g'
?????

kent$  echo "/////"|sed 's;/;?;g'
????? 
```

# java - 在 clone() 中我们使用 super.clone() 然后访问了一个不在 super 中的变量，这是怎么回事？

> ID：15572408
> 
> 赞同：6
> 
> 时间：2013-03-22T14:10:02.173
> 
> 标签：java

在克隆方法的通常实现中，有一些我不明白的地方。如果您查看以下代码中 try 块的第一行，我们正在调用 super.clone()，它将创建超类的实例，并返回对该实例的 Object 引用。现在，该实例不一定包含hireDay，那么我们怎么说copy.hireDay？确实它会编译得很好，但是如果实例不包含hireDay，它不应该崩溃吗？

```
public Object clone() {
    try {
        Employee copy = (Employee) super.clone(); // copy ID, name, and salary!
        copy.hireDay = (Date) hireDay.clone();
        return copy;
    } catch (CloneNotSupportedException e) {
        System.out.println(e);
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:13:32.283

`clone()`是基类中的一个特殊方法，`Object`它创建正确基类类型的新实例并复制所有字段（并避免使用任何构造函数）。因此，如果您没有*不*委托给`Object.clone()`您的自定义父类，则始终会返回当前类型。

作为旁注，在您的示例中，如果`super.clone()`没有返回，*那么*`Employee`您的代码甚至会在您到达引用的步骤之前抛出 ClassCastException `hireDay`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T14:16:53.913

的约定`clone`是实现与构造函数相同的调用模式：第一步始终是调用超类实现。这导致`Object.clone`首先被调用，并且所有子类都使用该方法返回的实例。

`Object.clone`将返回与被克隆的类相同的实例。这是通过语言外的魔法发生的，基本上是通过内存块的按位副本 + 对副本进行必要的更改。

克隆机制很脆弱，因为祖先链中的任何不兼容类都会破坏其所有后代的克隆。这是该机制不受欢迎的几个原因之一。

# c++ - 对象的成员函数存储在哪里？

> ID：15572411
> 
> 赞同：15
> 
> 时间：2013-03-22T14:10:05.777
> 
> 标签：c++, memory, function-pointers, pointer-to-member

我正在尝试使用 C++ 来了解类/结构及其各自的对象如何在内存中布局，并且我了解类/结构的每个字段都是它们各自对象的偏移量（因此我可以拥有一个成员变量指针）。

我不明白为什么，即使我可以拥有成员函数指针，以下代码也不起作用：

```
struct mystruct
{
    void function()
    {
        cout << "hello world";
    }
    int c;
};

int main() 
{ 
    unsigned int offset_from_start_structure = (unsigned int)(&((mystruct*)0)->c);
    unsigned int offset_from_start_structure2 = (unsigned int)(&((mystruct*)0)->function); // ERROR - error C2276: '&' : illegal operation on bound member function expression

    return 0;
} 
```

我的问题是：为什么这条线

```
unsigned int offset_from_start_structure = (unsigned int)(&((mystruct*)0)->c); 
```

编译并返回我从结构和行开始的“c”字段的偏移量

```
unsigned int offset_from_start_structure2 = (unsigned int)(&((mystruct*)0)->function); 
```

甚至不编译？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-22T14:14:01.883

成员函数或指向它们的指针不存储在对象中。（`virtual`函数通常通过存储在表中的指针来调用，对象有一个指向该表的指针）这将浪费大量内存**。**它们通常存储在代码内存部分中，并且为编译器所知。对象 ( `*this`) 通常作为*不可见*参数传递，因此函数在调用时知道要对哪个对象进行操作。

所以，用外行的话来说，你会有

```
 0x10001000    void A::foo
 ..........    {code for A::foo} 
```

和

```
 push a;
 call A::foo (0x10001000)
 pop a; 
```

`a`您正在调用的对象在哪里`foo`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T14:12:58.787

成员函数指针实际上并不存储在对象中：没有必要。C++ 标准并没有具体说明如何实现例如虚函数，但是虚成员函数的常见做法是每个对象都包含一个指向函数指针表的指针。该指针称为**[vtable 指针](http://en.wikipedia.org/wiki/Virtual_method_table)**。

您可能会尝试了解 Stanley Lippman 的**[“Inside the C++ object model”](http://books.google.no/books/about/Inside_the_C++_Object_Model.html?id=hLdmQgAACAAJ&redir_esc=y)**。

或者，在我当时的主页站点消失之前，您可能只是尝试获取我的旧**[指针教程](https://docs.google.com/fileview?id=0B2oiI2reHOh4M2MzNzYwYzQtMGZkNC00NTljLWJiM2UtOGI0MmRkMTMyZGY4)**，该教程曾经从 Wikipedia 的指针文章中引用。

* * *

关于第二个问题，为什么取地址`p->memberFunc`会让编译器有点窒息，那个表达式没有类型，它只是一个*语法实体*，你可以应用一个参数列表来调用函数。

以机智，

```
struct S
{
    void foo() {}
};

#include <iostream>
#include <typeinfo>
using namespace std;
int main()
{
    S* p = 0;
    typeid( &p->foo );
} 
```

汇编：

```
[W:\开发\测试]
> *g++ foo.cpp*
foo.cpp：在函数'int main()'中：
foo.cpp:12:17: 错误：ISO C++ 禁止使用绑定成员函数的地址来形成指向成员函数的指针。说 '&S::foo' [-fpermissive]
foo.cpp:12:22：警告：未使用计算的值 [-Wunused-value]
foo.cpp:12:22：警告：语句无效 [-Wunused-value]

[W:\开发\测试]
> _

```

# c++ - 如何为自定义 QLabel 实现 setWordWrap(True)？

> ID：15572414
> 
> 赞同：0
> 
> 时间：2013-03-22T14:10:11.947
> 
> 标签：c++, python, qt, pyqt, pyside

我`QLabel()`通过覆盖它的paintEvent来重新实现。

我正在做的是，重绘文本 3 次以获得浮雕效果。

我正在使用**PyQT-PySide**并且该应用程序针对**OS X**，它不支持 Qt 的出色效果（shadow 等）。因此，这是我想出的解决方案。

一切正常，除了执行`setTextWrap(True)`. 它失败。

我需要做什么`self.text()`才能相应地包装它以适合标签的盒子？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:25:04.837

这可以使用然后添加到**drawText()**方法的`Qt.TextWordWrap` **标志****`QPainter()`**

 **例子：

```
 painter.drawText(self.rect(), self.alignment() | Qt.TextWordWrap, self.text()) 
```**

# c++ - g++ 中“>”之前的预期主表达式，但在 microsoft 编译器中没有

> ID：15572415
> 
> 赞同：24
> 
> 时间：2013-03-22T14:10:17.350
> 
> 标签：c++, templates

此代码无法在 g++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3 上编译，出现此错误

```
test.cpp: In function ‘T mul(V&, V&)’:
test.cpp:38:27: error: expected primary-expression before ‘&gt;’ token
test.cpp:38:29: error: expected primary-expression before ‘)’ token
test.cpp:38:53: error: expected primary-expression before ‘&gt;’ token
test.cpp:38:55: error: expected primary-expression before ‘)’ token 
```

但它可以在 Microsoft C/C++ Optimizing Compiler Version 15.00.21022.08 for x64 上正确编译和执行

```
#include <iostream>
#include <complex>

template <class T>
class SM
{
public:
    T value;
};

template <class T>
class SC : public SM<T>
{
};

class PSSM {

public:
    template <class T>
    T & getSC() { return sc; }

private:
    SC<double> sc;
};

class USSM {

public:
    template <class T>
    T & getSC() { return sc; }

private:
    SC<std::complex<double> > sc;
};

template <class T, class V>
T mul( V & G, V & S) {
    return (G.getSC<SC<T> >().value * S.getSC<SC<T> >().value); // error is here
}

int main() {
    PSSM p;
    PSSM q;
    p.getSC<SC<double> >().value = 5; 
    q.getSC<SC<double> >().value = 3; 

    std::cout << mul<double>(p,q);

} 
```

我不明白问题出在哪里。任何人都可以理解如何解决它，或者在 g++ 中解释问题的性质吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-22T14:12:03.347

问题在于语法。在这种情况下，您应该使用`template`消歧器，以便正确解析您对成员函数模板的调用：

```
return (G.template getSC<SC<T> >().value * S.template getSC<SC<T> >().value);
//        ^^^^^^^^^                          ^^^^^^^^^ 
```

这个消歧器帮助编译器识别后面`G.`是*成员模板特化*，而不是，例如，调用`getSC`后跟一个`<`（小于）的数据成员。

消歧器的标准参考`template`是 C++11 标准的第 14.2/4 段：

> 当成员模板特化的名称出现在postfix-expression 之后或之后，或者在 qualified-id 中的`.`nested - *name* *-specifier之后，并且**postfix-expression*的对象表达式是类型相关的或*nested-name-specifier*在qualified-id 中指的是依赖类型，但名称不是当前实例化的成员（14.6.2.1），**成员模板名称必须以关键字为前缀****。****否则，该名称被假定为命名非模板。**[*示例：*`->`******`template`******
> 
>  ***```
> struct X {
> template<std::size_t> X* alloc();
> template<std::size_t> static X* adjust();
> };
> template<class T> void f(T* p) {
> T* p1 = p->alloc<200>(); // ill-formed: < means less than
> T* p2 = p->template alloc<200>(); // OK: < starts template argument list
> T::adjust<100>(); // ill-formed: < means less than
> T::template adjust<100>(); // OK: < starts template argument list
> } 
> ```
> 
> —<em>结束示例]***

# awk - 根据 column1 打印 column2 的数量

> ID：15572420
> 
> 赞同：1
> 
> 时间：2013-03-22T14:10:41.793
> 
> 标签：awk

我有一个文件，如下所示。我想打印每个科目的学生人数（重复的名字不想计算）。

```
alvy  science
eby   maths
alvy  science
bitty science
monika maths
eby    maths 
johny  social 
```

如何使用 awk 获得以下输出？

```
`no:of students in` science- 2
 no:of students in  maths -  2
 no:of students in social -  1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:22:43.493

这是应该为您工作的代码：

```
awk '!s[$1, $2]++ {arr[$2]++} 
     END {for (i in arr) print "no:of students in", i, "-", arr[i]}' 
```

# android - 当点击 seekBar 时，seekBar 拇指被拉伸

> ID：15572424
> 
> 赞同：2
> 
> 时间：2013-03-22T14:10:59.100
> 
> 标签：android, seekbar

我遇到了一个奇怪的问题。在我的应用程序中，我有一个`SeekBar`带有 2 种状态的拇指的自定义。当我单击 时`seekBar`，它的拇指会变形并*在几秒钟后恢复正常状态。*相应的`MediaPlayer`对象会按预期立即做出反应，这个问题只是一个视觉问题。快照来说明这一点：

正常行为：

![在此处输入图像描述](../Images/d0a1e86f97a21052931754650a126f7d.png)

单击时`seekBar`：

![在此处输入图像描述](../Images/ff48d3c68ac3cb51be6b5737ef1621a7.png)

我不知道这有什么问题。

搜索栏：

```
 <SeekBar
        android:id="@+id/seekBarMain"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_gravity="bottom"
        android:layout_marginBottom="5dp"
        android:indeterminate="false"
        android:maxHeight="3dp"
        android:maxWidth="450dp"
        android:minHeight="3dp"
        android:paddingLeft="9dp"
        android:paddingRight="9dp"
        android:progressDrawable="@drawable/pb"
        android:thumb="@drawable/thumb_state" /> 
```

Drawable 用于其 Thumb：

```
 <?xml version="1.0" encoding="utf-8"?>
       <selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:drawable="@drawable/thumb_pressed" android:state_enabled="true" android:state_pressed="true"/>
<item android:drawable="@drawable/thumb" android:state_pressed="false"/>

      </selector> 
```

OnTouchListener：

```
 @Override
public boolean onTouch(View v, MotionEvent event) {

    if (v.getId() == R.id.seekBarMain) {

        if (mp.isPlaying()) {

            int playPositionInMillisecconds = (mediaFileLengthInMilliseconds / 100)
                    * sb.getProgress();
            mp.seekTo(playPositionInMillisecconds);
        } else {
            int playPositionInMillisecconds = (mediaFileLengthInMilliseconds / 100)
                    * sb.getProgress();
            mp.start();
            mp.seekTo(playPositionInMillisecconds);
            btnPlay.setBackgroundResource(R.drawable.button_pause);
            primarySeekBarProgressUpdater();

        }
    }

    return false;

} 
```

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:10:50.037

好吧，我刚刚发现这个问题与可绘制对象有关，`"thumb_pressed"`它比用于正常状态的可绘制对象大约 25%。我无法真正解释这一点，但是将可绘制对象修改为与`"thumb_pressed"`可绘制对象具有相同的大小`"thumb"`解决了这个问题。

# c++ - 如何在 Visual Studio 中使用 C++11 线程

> ID：15572425
> 
> 赞同：4
> 
> 时间：2013-03-22T14:11:05.203
> 
> 标签：c++, multithreading, visual-studio-2010, visual-c++, c++11

在我开始之前，我想解释一下我是一个新手，很可能我错过了一些简单的东西，或者有些简单的东西我只是不知道。

使用 Visual Studio，我想在其中进行一些线程练习，但我无法将其包含在我的代码顶部。我知道这是 C++11 的新功能，但我不确定 Visual Studio 2010 是否启用了它，或者我不确定我将如何去做。

这是我的代码的屏幕截图：

![我的代码](../Images/2292a989474a2a536e86adb29a72ebed.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T14:16:18.633

你不能：VS2010 附带的 C++ 标准库的实现不支持 C++11 的线程支持库。如果你想使用它，你应该升级到 VS2012。

或者，您可以使用[Boost.Thread](http://www.boost.org/doc/libs/1_53_0/doc/html/thread.html)，它是 C++11 标准线程支持库的灵感来源。

作为进一步的选择，您可以考虑购买[Just.Thread](http://www.stdthread.co.uk/order.html)库，它提供了完整的实现并且也可用于 VS2010。

# oracle - Oracle：在索引搜索上强制并行

> ID：15572426
> 
> 赞同：1
> 
> 时间：2013-03-22T14:11:09.723
> 
> 标签：oracle, parallel-processing, indexing

![在此处输入图像描述](../Images/dbd552ad4e3b989a97373e10cf9c9406.png)

我想在 LET_TESTATE_LETTURE 上使用并行执行而不强制进行全表扫描，我想在索引上使用强制并行性。

我该如何解决？

```
alter session enable parallel dml;  

CREATE TABLE netatemp.let_testate_letture1
AS
   SELECT /* parallel(tele 32) full(tele) */
         tele.TELE_DATA_LETTURA,
         tele.tele_storico_id
     FROM let_testate_letture tele
    WHERE     tele.prov_provenienza_lettura_id = '*1ENI01BCAMBIO'
          AND tele.spwkf_stato_pubblico_id != '*1UNICOANN';

Size    56,1 GB
Number Extents  1.081

OWNER   SIUMETERING
TABLE_NAME  LET_TESTATE_LETTURE
TABLESPACE_NAME SIUMETERING_DATITD
CLUSTER_NAME    
IOT_NAME    
STATUS  VALID
PCT_FREE    10
PCT_USED    
INI_TRANS   30
MAX_TRANS   255
INITIAL_EXTENT  80 KB
NEXT_EXTENT 1 MB
MIN_EXTENTS 1
MAX_EXTENTS 2.147.483.645
PCT_INCREASE    
FREELISTS   
FREELIST_GROUPS 
LOGGING YES
BACKED_UP   N
NUM_ROWS    456.635.338
BLOCKS  3.340.120
EMPTY_BLOCKS    0
AVG_SPACE   0
CHAIN_CNT   0
AVG_ROW_LEN 385
AVG_SPACE_FREELIST_BLOCKS   0
NUM_FREELIST_BLOCKS 0
DEGREE  1
INSTANCES   1
CACHE   N
TABLE_LOCK  ENABLED
SAMPLE_SIZE 456.635.338
LAST_ANALYZED   29/12/2012 13:03:15
PARTITIONED NO
IOT_TYPE    
TEMPORARY   N
SECONDARY   N
NESTED  NO
BUFFER_POOL DEFAULT
FLASH_CACHE DEFAULT
CELL_FLASH_CACHE    DEFAULT
ROW_MOVEMENT    DISABLED
GLOBAL_STATS    YES
USER_STATS  NO
DURATION    
SKIP_CORRUPT    DISABLED
MONITORING  YES
CLUSTER_OWNER   
DEPENDENCIES    DISABLED
COMPRESSION ENABLED
COMPRESS_FOR    OLTP
DROPPED NO
READ_ONLY   NO
SEGMENT_CREATED YES
RESULT_CACHE    DEFAULT 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:49:32.990

尝试

```
/*+ parallel_index(tele, let_tele_letb_prov_fk_idx, 32) */ 
```

注意星号后面的“+”。没有它，Oracle 将忽略该提示。

此外，您可能还希望根据返回的行数并行创建表，例如：

```
CREATE TABLE netatemp.let_testate_letture1 parallel 32 as
select /*+ ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T14:26:03.900

您必须将索引更改为并行。IE

```
alter index xxx parallel; 
```

或者

```
alter index xxx parallel <n>; 
```

因为并行提示仅适用于表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T04:35:50.457

您发布了很多有用的信息，令人耳目一新。因此，除了回答您的问题之外，我还可以提供其他提高性能的建议：

1.  语句级提示。
    由于您在 11gR2 上（基于 column 的存在`SEGMENT_CREATED`），您应该使用 [语句级并行提示](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements006.htm#CHDGEGFI)，而不是对象级。使用`/*+ parallel(32) */`, 然后 Oracle 将并行化查询中的所有内容，无论访问方法或别名如何。
2.  旧数据还是旧数据？
    最后分析于 2012 年 12 月 29 日似乎有点旧。如果您的表非常活跃，那么您应该重新收集统计信息。如果它真的不经常更改，您可能需要考虑重新创建它，按`prov_provenienza_lettura_id`. 这可能会显着提高索引的性能。尽管它可能会降低其他索引的性能。
3.  压缩。
    您的表使用压缩，但您的索引是否也被压缩？如果你真的有 900 万个相同值的条目，索引压缩可以节省大量空间，并使索引读取速度更快。此外，位图索引可能很适合这里。
4.  全表扫描。
    优化器认为您将读取大约 2% 的行。甚至 2% 也可能足以保证进行全表扫描，具体取决于诸如集群因素之类的因素。您可能不想尝试强制使用特定的访问方法——首先让 Oracle 尝试选择。如果 Oracle 弄错了，那么您应该尝试通过提供更多有用的信息来帮助它，例如更好的统计数据和可能的直方图。

DazzaL 和 Ronnis 的建议也应该会有所帮助。

# wpf - wpf tabitem 带图像

> ID：15572433
> 
> 赞同：0
> 
> 时间：2013-03-22T14:11:27.160
> 
> 标签：wpf, styles, wpf-controls, tabitem

我需要使用带有 mahapps.metro 的阶梯，带有文本和图像的 tabitem .. 这是我的代码：

```
<TabItem Style="{StaticResource gMetroTabItem}">
    <TabItem.Header>
        <StackPanel Orientation="Horizontal">
            <Image Name="img" Height="auto" Width="auto" Source="/myProject;component/Resources/Black_Tools.png" />
            <TextBlock Text="tabItem2" Margin="2,0,0,0" VerticalAlignment="Center" />
        </StackPanel>
    </TabItem.Header>
</TabItem> 
```

这是样式的代码：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Style TargetType="{x:Type TabControl}" x:Key="gMetroTabControl">
        <Setter Property="Background" Value="{x:Null}" />
        <Setter Property="BorderBrush" Value="{x:Null}" />
    </Style>

    <Style TargetType="TabItem" x:Key="gMetroTabItem">
        <Setter Property="FocusVisualStyle" Value="{x:Null}" />
        <Setter Property="IsTabStop" Value="False" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Padding" Value="6,2,6,2" />
        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
        <Setter Property="VerticalContentAlignment" Value="Stretch" />
        <Setter Property="MinWidth" Value="5" />
        <Setter Property="MinHeight" Value="5" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="TabItem">
                    <Label x:Name="root" FontSize="46.67">
                        <ContentPresenter ContentSource="Header"  RecognizesAccessKey="True" />
                    </Label>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsSelected" Value="true">
                            <Setter TargetName="root" Property="Foreground">
                                <Setter.Value>
                                    <SolidColorBrush Color="{DynamicResource AccentColor}" />
                                </Setter.Value>
                            </Setter>
                        </Trigger>

                        <Trigger Property="IsSelected" Value="false">
                            <Setter  TargetName="root" Property="Foreground">
                                <Setter.Value>
                                    <SolidColorBrush Color="{DynamicResource GrayNormal}" />
                                </Setter.Value>
                            </Setter>
                        </Trigger>
                        <Trigger SourceName="root" Property="IsMouseOver" Value="True">
                            <Setter  TargetName="root" Property="Foreground">
                                <Setter.Value>
                                    <SolidColorBrush Color="Lime" />
                                </Setter.Value>
                            </Setter>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <!--<Setter Property="ContentTemplate">
            <Setter.Value>
                <DataTemplate>
                    <AdornerDecorator>
                        <ContentPresenter Content="{Binding}"/>
                    </AdornerDecorator>
                </DataTemplate>
            </Setter.Value>
        </Setter>-->
    </Style>
</ResourceDictionary> 
```

但不起作用，因为样式去更改文本属性，并且图像不显示..

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:38:42.187

从您发布的截屏视频中：

*   设计时间：[http ://www.screencast.com/t/TV20zfCi](http://www.screencast.com/t/TV20zfCi)
*   运行时：[http ://www.screencast.com/t/7w9rBBEkhMnH](http://www.screencast.com/t/7w9rBBEkhMnH)

这表明`Black_Tools.png`具有不正确的属性。确保图像设置为资源并复制到输出目录：

*   在解决方案资源管理器中右键单击`Black_Tools.png`> 属性
*   构建操作：资源
*   复制到输出目录：始终复制（如果更新，则复制）

如果图像未设置为资源并复制到输出目录，那么您将在设计时看到图像，因为可以在解决方案中解析图像。但是，在运行时，图像路径是不同的，因为文件将位于项目的输出目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:15:10.527

刷一下我之前说的。这要容易得多。

您只需要 TabControl.ItemTemplate。这决定了标题的布局。通过对祖先的一些棘手绑定，您可以绑定到 DataTriggers 的 TabItem 属性。

在此示例中，我展示了如何绑定到 IsSelectedProperty。我将把 IsMouseOver 作为练习留给你。提示：使用 ElementName "root" 绑定到 IsMouseOver，然后在 setter 中使用 TargetName="root"。

```
 <Style TargetType="{x:Type TabControl}" x:Key="gMetroTabControl">
        <Setter Property="Background" Value="{x:Null}" />
        <Setter Property="BorderBrush" Value="{x:Null}" />
        <Setter Property="ItemTemplate">
            <Setter.Value>
                <DataTemplate DataType="{x:Type local:TabItemHeaderData}">
                    <StackPanel>
                        <TextBlock Name="root" Text="{Binding LabelText}"/>
                        <Rectangle Fill="{Binding RectFill}"/>
                    </StackPanel>
                    <DataTemplate.Triggers>
                        <DataTrigger Binding="{Binding
                            RelativeSource={RelativeSource
                            Mode=FindAncestor,AncestorType={x:Type TabItem}},Path=IsSelected}" Value="true">
                            <Setter TargetName="root" Property="Foreground">
                                <Setter.Value>
                                    <SolidColorBrush Color="Blue" />
                                </Setter.Value>
                            </Setter>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding
                            RelativeSource={RelativeSource
                            Mode=FindAncestor,AncestorType={x:Type TabItem}},Path=IsSelected}" Value="false">
                            <Setter TargetName="root" Property="Foreground">
                                <Setter.Value>
                                    <SolidColorBrush Color="Black" />
                                </Setter.Value>
                            </Setter>
                        </DataTrigger>
                    </DataTemplate.Triggers>
                </DataTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="ContentTemplate">
            <Setter.Value>
                <DataTemplate DataType="{x:Type local:TabItemHeaderData}">
                    <ContentControl Content="{Binding Content}"/>
                </DataTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

然后你需要创建一个数据对象。

```
public class TabItemHeaderData
{
    public Brush RectColor { get; set; }
    public String LabelText { get; set; }
    public object Content { get; set; }
} 
```

然后你只需像这样设置数据对象中的值。

```
<TabControl Style="{StaticResource gMetroTabControl}">
    <local:TabItemHeaderData RectColor="Black" LabelText="John">
        <local:TabItemHeaderData.Content>
            <Button>George</Button>
        </local:TabItemHeaderData.Content>
    </local:TabItemHeaderData>
    <local:TabItemHeaderData RectColor="Black" LabelText="John">
    </local:TabItemHeaderData>
</TabControl> 
```

# python - 生成零附近的二项分布

> ID：15572434
> 
> 赞同：3
> 
> 时间：2013-03-22T14:11:40.263
> 
> 标签：python, random, numpy, distribution, probability

我正在寻找生成二项式分布。我想要一个二项分布，但我希望它以零为中心（我知道这对于二项分布的定义没有多大意义，但仍然是我的目标。）

我发现在 python 中这样做的唯一方法是：

```
def zeroed_binomial(n,p,size=None):
    return numpy.random.binomial(n,p,size) - n*p 
```

这个发行版有真名吗？这段代码是否真的给了我想要的东西（我怎么知道）？是否有更清洁/更好/规范/已经实施的方式来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:27:09.890

如果你想要一个以 0 为中心的“离散”正态分布，你正在做的事情很好。如果你想要整数值，你应该`n*p`在减去之前四舍五入。

但是[二项分布的极限只是](http://en.wikipedia.org/wiki/Binomial_distribution#Normal_approximation)当`n`变大并且有`p`界远离0或1时的正态分布。既然`n*p`除了某些值之外不会是整数，为什么不直接使用正态分布呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T20:32:55.863

模块中实现的概率分布允许您通过在构造函数中指定关键字`scipy.stats`来任意移动分布。`loc`要获得均值偏移接近 0 的二项分布，您可以调用

```
p = stats.binom(N, p, loc=-round(N*p)) 
```

（确保使用`loc`离散分布的整数值。）

这是一个例子：

```
p = stats.binom(20, 0.1, loc=-2)
x = numpy.arange(-3,5)
bar(x, p.pmf(x)) 
```

![条形图](../Images/cdc79e0ea3c12430ce477f3bde60c05b.png)

**编辑：**

要生成实际的随机数，请使用模块`rvs()`中每个随机分布附带的方法。`scipy.stats`例如：

```
>>> stats.binom(20,0.1,loc=-2).rvs(10)
array([-2,  0,  0,  1,  1,  1, -1,  1,  2,  0]) 
```

# c# - datagridview 在日期过期或更少时更改行颜色

> ID：15572450
> 
> 赞同：0
> 
> 时间：2013-03-22T14:12:20.507
> 
> 标签：c#, if-statement, for-loop, datagridview, colors

我的代码适用于更改行中的颜色，但我需要做出正确的 if 语句。在单元格 [0] 中，我有日期值“2013.03.20”。此日期是指产品的过期日期。

```
foreach (DataGridViewRow row in dataGridView1.Rows)
{
  if (row.Cells[0](dont know how write))
  {
   row.DefaultCellStyle.BackColor = Color.Red;
  }
} 
```

例子：

*   今天是 2013.03.10
*   产品有效期为 2013.03.20。
*   产品到期的最后 7 天将呈现黄色。（即13日至20日）
*   当产品过期时，我想将其显示为红色。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T14:19:21.977

像这样的东西（在我没有 Visual Studio 的情况下，请原谅任何小的语法错误）。您可能需要更强大的 DateTime 转换来处理空值、无效日期等。您可以调整条件以匹配您的确切要求：

```
 foreach (DataGridViewRow row in dataGridView1.Rows)
                switch (Convert.ToDatetime(row.Cells[0].ToString()))
                {
                   case > DateTime.Today:
                      row.DefaultCellStyle.BackColor = SomeColor;  
                      break;
                   case == DateTime.Today:
                      row.DefaultCellStyle.BackColor = SomeColor;  
                      break;
                    case else:
                      row.DefaultCellStyle.BackColor = SomeColor;  
                      break;
                } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T14:38:10.623

正如西蒙所说，您还应该为 DateTime 处理不正确的日期格式。

```
foreach (DataGridViewRow row in dataGridView1.Rows)
        {
            var now = DateTime.Now;
            var expirationDate =  DateTime.Parse(row.Cells[0].Value.ToString());
            var sevenDayBefore = expirationDate.AddDays(-7);

            if (now > sevenDayBefore && now < expirationDate)
            {
                row.DefaultCellStyle.BackColor = Color.Yellow;
            }
            else if (now > expirationDate)
            {
                row.DefaultCellStyle.BackColor = Color.Red;    
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T14:31:35.650

您可以使用**RowDataBound**事件处理程序而不是使用 foreach。我认为使用 RowDataBound 事件处理程序是为了这些事情。

```
public void dataGridView1_RowDataBound(Object sender, GridViewRowEventArgs e)  
{
    if(e.Row.RowType == DataControlRowType.DataRow)
    {
        Product currentProduct = e.Item.DataItem as Product;

        TimeSpan diffDate = DateTime.Now - currentProduct.ExpireDate;

        if (dateDiff < TimeSpan.FromDays(0))
        {
            row.DefaultCellStyle.BackColor = Color.Yellow;
        }
        else if (dateDiff < TimeSpan.FromDays(7))
        {
            row.DefaultCellStyle.BackColor = Color.Red;
        }
    }  

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-23T01:28:11.350

试试这个例子。

```
DateTime currentToday = (DateTime)this.dataGridView1.Rows[e.RowIndex].Cells["Date"].Value;

if (currentToday <= DateTime.Now.Date)
{
      e.CellStyle.ForeColor = Color.Red; //Font Color
      e.CellStyle.SelectionForeColor = Color.Red; //Selection Font color
} 
```

# ios - UIViewController 作为 Apple PodCast 应用程序

> ID：15572455
> 
> 赞同：-2
> 
> 时间：2013-03-22T14:12:32.213
> 
> 标签：ios, uiviewcontroller, uirefreshcontrol

我想让一个 UI 看起来像[苹果播客应用程序](https://www.dropbox.com/s/581jkap5c0czyz2/photo%20%281%29.PNG)的应用程序。

这有两个部分`UIViewController`：

1.  带有按钮和图像的固定部分
2.  `tableview`和`refreshcontrol`

这是我的问题的最后一点：`refreshcontrol`。我找到了以前的[SO 解决方案](https://stackoverflow.com/questions/12497940/uirefreshcontrol-without-uitableviewcontroller)，但 `refreshcontrol`直接在我的视图上添加会破坏所有单元格和表格样式。

你知道我怎样才能用这些特征来做一个视图`fixed part`：`refreshcontrol`和`tableview`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:06:40.710

你可以使用`UIViewController`遏制。

您可以拥有一个父视图控制器，其中包括顶部固定部分的视图和`UITableView`底部的视图。

对于`UITableView`您可以包含 a`UITableViewController`作为子视图控制器，因此您可以`UIRefreshControl`按预期使用。

# android - 如何在 android 项目中包含 unity3d 项目？

> ID：15572456
> 
> 赞同：1
> 
> 时间：2013-03-22T14:12:32.200
> 
> 标签：android, unity3d, augmented-reality, vuforia

我正在尝试制作一个 android 应用程序，其中包括从 Uniy3d 创建和导出的两个不同项目，一个是简单的交互式 3d 环境，另一个是基于 Vuforia 扩展的 AR 应用程序。[我也在统一论坛](http://forum.unity3d.com/threads/71607-Integrating-Unity-and-Eclipse)和[vuforia](https://developer.vuforia.com/resources/dev-guide/extending-unity-android-activity-and-adding-custom-views-eclipse)中尝试了许多教程，但它似乎不起作用......也许是因为它已经过时了，因为您可以在最后一个版本中将统一项目导出到 Eclipse。

你对我怎么可能做到这一点有任何想法吗？任何帮助，将不胜感激...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:47:05.530

最好的办法是在 Unity3D 中创建整个应用程序，因为它可以拥有良好的用户界面，而不是将其分成几部分......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T03:59:51.003

Unity3D 3.5.7和blow会直接生成apk，你可以试试Unity4，它会生成一个android项目，可以导入eclipse。

# android - 在android中启动项目时出错

> ID：15572459
> 
> 赞同：1
> 
> 时间：2013-03-22T14:12:40.433
> 
> 标签：android, linux, fedora

我正在使用 Fedora 17 64 位操作系统。即使安装了 32 位共享库，我也收到以下错误。

```
[2013-03-22 19:19:29 - adb] /usr/src/android-sdk-linux/platform-tools/adb: error while loading shared libraries: libncurses.so.5: cannot open shared object file: No such file or directory
[2013-03-22 19:19:29 - adb] 'adb version' failed!
/usr/src/android-sdk-linux/platform-tools/adb: 
```

加载共享库时出错：libncurses.so.5：无法打开共享对象文件：没有这样的文件或目录 [2013-03-22 19:19:29 - adb] 无法解析“adb 版本”的输出：

我曾尝试安装以下库，但仍然无法正常工作

```
yum install ncurses-libs.i686
Loaded plugins: langpacks, presto, refresh-packagekit
No package ncurses-libs.i686 available.
Error: Nothing to do

Even After trying following command it didn't work.

yum install ncurses-libs.i686 libstdc++.i686 libgcc.i686
Loaded plugins: langpacks, presto, refresh-packagekit
updates/metalink                                                                                                                                | 3.6 kB     00:00     
updates                                                                                                                                         | 4.6 kB     00:00     
updates/primary_db                                                                                                                              | 7.9 MB     00:24     
No package ncurses-libs.i686 available.
Package libstdc++-4.7.2-2.fc17.i686 already installed and latest version
Package libgcc-4.7.2-2.fc17.i686 already installed and latest version
Nothing to do 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:17:58.873

如果您在开发机器上运行 64 位发行版，则需要使用 apt-get: 安装 ia32-libs 包：

apt-get 安装 ia32-libs

更多信息[http://developer.android.com/sdk/installing/index.html](http://developer.android.com/sdk/installing/index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:22:01.200

发生这种情况是因为 Android SDK 是一个 32 位应用程序并且需要一些 32 位共享库，

您可以使用以下方法修复：

```
$ sudo apt-get install ia32-libs 
```

请参阅此处：[Android SDK — Linux](https://stackoverflow.com/questions/10005907/eclipse-android-plugin-libncurses-so-5)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T14:17:05.660

试试这个命令：

```
yum install ncurses-libs.i686 libstdc++.i686 libgcc.i686 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-14T12:06:14.970

我在 centos 上，以下依赖项将解决 android 构建问题

百胜安装 ncurses-libs.i686 libstdc++48.i686 libgcc.i686 zlib.i686

# ios - 如何以编程方式在 UICollectionVIew 中插入单元格？

> ID：15572462
> 
> 赞同：23
> 
> 时间：2013-03-22T14:12:46.507
> 
> 标签：ios, objective-c, collectionview

我有一个`UICollectionView`，它工作正常，但我想以`UICollectionViewCells`编程方式将一些项目添加到集合视图中。

那么我该如何实现呢？

进一步澄清：当我以编程方式说时，我的意思是在运行时插入一个单元格，当触发一个动作时，而不是在加载应用程序时（使用该`viewDidLoad`方法）。我知道何时更新模型并`UICollectionView`在`insertItemsAtIndexPaths:`方法中进行调用。它应该创建一个新的单元格，但它没有这样做，它抛出了一个错误。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-10-22T15:28:15.437

...通过参考[UICollectionView 文档](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UICollectionView_class/)

> 您可以完成：
> 
> 插入、删除和移动部分和项目 要插入、删除或移动单个部分或项目，请执行以下步骤：
> 
> 1.  更新数据源对象中的数据。
> 2.  调用集合视图的适当方法来插入或删除部分或项目。
> 
> 在通知集合视图任何更改之前更新数据源至关重要。集合视图方法假定您的数据源包含当前正确的数据。如果没有，collection view 可能会从您的数据源接收到错误的项目集，或者请求不存在的项目并使您的应用程序崩溃。当您以编程方式添加、删除或移动单个项目时，集合视图的方法会自动创建动画以反映更改。但是，如果您想同时为多个更改设置动画，则必须在一个块内执行所有插入、删除或移动调用，并将该块传递给 performBatchUpdates:completion: 方法。然后，批量更新过程会同时为您的所有更改设置动画，您可以自由混合调用插入、删除、

从您的问题：例如，您可以注册一个手势识别器，并通过执行以下操作插入一个新单元格：

在

```
// in .h 
@property (nonatomic, strong) NSMutableArray *data;

// in .m 
@synthesize data
// 

- (void)ViewDidLoad{
      //.... 

    myCollectonView.dataSource = self;
    myCollectionView.delegate = self; 
    data = [[NSMutableArray alloc] initWithObjects:@"0",@"1", @"2" @"3", @"4", 
                                                   @"5",@"6", @"7",  @"8", @"9",  
                                                   @"10", @"11", @"12", @"13",
                                                   @"14", @"15", nil];

    UISwipeGestureRecognizer *swipeDown = 
     [[UISwipeGestureRecognizer alloc] 
       initWithTarget:self action:@selector(addNewCell:)];
    swipeDown.direction = UISwipeGestureRecognizerDirectionDown;
        [self.view addGestureRecognizer:swipeDown];
    //.. 
} 

-(void)addNewCell:(UISwipeGestureRecognizer *)downGesture {
    NSArray *newData = [[NSArray alloc] initWithObjects:@"otherData", nil];
    [self.myCollectionView performBatchUpdates:^{
        int resultsSize = [self.data count]; //data is the previous array of data
        [self.data addObjectsFromArray:newData];
        NSMutableArray *arrayWithIndexPaths = [NSMutableArray array];

        for (int i = resultsSize; i < resultsSize + newData.count; i++) {
            [arrayWithIndexPaths addObject:[NSIndexPath indexPathForRow:i 
                                                              inSection:0]];
        }
        [self.myCollectionView insertItemsAtIndexPaths:arrayWithIndexPaths];
    } completion:nil];

} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-22T14:23:18.450

如果要插入多个`items`into `UICollectionView`，则可以使用`performBatchUpdates:`

```
[self.collectionView performBatchUpdates:^{
    // Insert the cut/copy items into data source as well as collection view
    for (id item in self.selectedItems) {
        // update your data source array
        [self.images insertObject:item atIndex:indexPath.row];

        [self.collectionView insertItemsAtIndexPaths:
          [NSArray arrayWithObject:indexPath]];          
    }
} completion:nil]; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-22T14:23:12.120

`– insertItemsAtIndexPaths:`做这项工作

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-04-14T13:12:36.177

以下是在 Swift 3 中插入​​项目的方法：

```
 let indexPath = IndexPath(row:index, section: 0) //at some index
    self.collectionView.insertItems(at: [indexPath]) 
```

您必须首先更新您的数据。

# iphone - 如何在 iphone 应用程序中设置 uitextfield 边框颜色

> ID：15572466
> 
> 赞同：8
> 
> 时间：2013-03-22T14:13:02.033
> 
> 标签：iphone, ios, objective-c

`UITextView`当我们在 textfield 和 textview 中输入或编辑时，如何以编程方式设置 uitextfield 和边框颜色。

我使用了这段代码，但没有改变`UITextView`.

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
    textField.layer.borderColor=[[UIColor cyanColor] CGColor];
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-22T14:15:53.023

**不要忘记：** `#Import <QuartzCore/QuartzCore.h>`

**工作代码：**

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
    textField.layer.cornerRadius=8.0f;
    textField.layer.masksToBounds=YES;
    textField.layer.borderColor=[[UIColor redColor]CGColor];
    textField.layer.borderWidth= 1.0f;
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:16:30.463

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField 
```

声明是否允许用户编辑文本字段。将方法更改为：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField {
  textField.layer.borderColor=[[UIColor cyanColor] CGColor];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T14:19:01.027

给定**边框**和**颜色**。`UITextField`

添加`#import "QuartzCore/QuartzCore.h"`框架工作。

```
textField.layer.borderColor = [UIColor lightGrayColor].CGColor; // set color as you want.
textField.layer.borderWidth = 1.0; // set borderWidth as you want. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T14:26:27.263

当您编辑文本字段时，有很多方法看起来非常相似。您正在尝试使用`-textFieldShouldBeginEditing:`. 根据文档，textFieldShouldBeginEditing，“询问代表是否应该在指定的文本字段中开始编辑。” 用法是，“当用户执行通常会启动编辑会话的操作时，文本字段首先调用此方法以查看是否应实际进行编辑。在大多数情况下，您只需从该方法返回 YES 以允许编辑到继续。” 这不是你不想做的。

相反，您应该使用`-textFieldDidBeginEditing:`. 此方法“告诉代理指定文本字段的编辑开始”。它“通知代理指定的文本字段刚刚成为第一响应者。您可以使用此方法更新代理的状态信息。例如，您可以使用此方法显示在编辑时应该可见的覆盖视图。”

这意味着您的代码应更改为：

```
-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField {
    textField.layer.borderColor=[[UIColor cyanColor] CGColor];
} 
```

至

```
-(BOOL)textFieldDidBeginEditing:(UITextField *)textField {
    textField.layer.borderColor=[[UIColor cyanColor] CGColor];
} 
```

您可以在[http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)`UITextFieldDelegate`阅读有关文档中方法的更多信息

# javascript - 我正在尝试使用 javascript 构建一个基本的数学游戏

> ID：15572468
> 
> 赞同：0
> 
> 时间：2013-03-22T14:13:07.707
> 
> 标签：javascript

这是我所有的代码，我希望你能看到我哪里出错了。

```
 var $randomnumber1;
            var $randomnumber2;
            var $answer;            
            var $counter = 1;
            var $data;
    function start_game() { 
         document.getElementById('counternumber').innerHTML = $counter; 
         document.getElementById('txtbox').value = "";                  
         $randomnumber1 = Math.floor(Math.random()*11);                 

            document.getElementById('num1').innerHTML = $randomnumber1; 
                $answer = $randomnumber1 + $randomnumber2;
                $counter++; 
                setFocus();                 
    }           
    function check_answer() {
            var $txt = document.getElementById('txtbox'); 
            var $value = $txt.value;
                if ($value == $answer) {
                    alert('You are correct');
                }
                else {
                    alert('You are incorrect, the answer was ' + $answer);
                }
            document.getElementById('txtbox').value = "";               
            document.getElementById('num1').innerHTML = "";
            document.getElementById('num2').innerHTML = ""; 
                     $randomnumber1 = Math.floor(Math.random()*11); 
                     $randomnumber2 = Math.floor(Math.random()*11);
                     document.getElementById('num1').innerHTML = $randomnumber1; 
                     document.getElementById('num2').innerHTML = $randomnumber2;

                        $answer = $randomnumber1 + $randomnumber2;
                document.getElementById('counternumber').innerHTML = $counter;
                $counter++; 
                    if ($counter > 4) {
                        alert ('End of game......Thanks for playing');
                        $counter = 1;
                            document.getElementById('num1').innerHTML = "";
                            document.getElementById('num2').innerHTML = ""; 
                    } 
```

函数 addAnswers() { var data = $randomnumber1 + " + " + $randomnumber2 + " = " + ($randomnumber1+$randomnumber2) var newListItem = document.createElement('li'); var newText = document.createTextNode(data); newListItem.appendChild(newText); document.getElementById("ans").appendChild(newListItem); }

```
 <div class="container" id="wrapper">
        <h3>Games Played = <b id='counternumber'></b> / 3 </h3>
        <div id="total">Total: <p id="sumtotal"></p></div>

            <div class="left"><h3 id="num1"></h3></div>
            <div class="plus"><img src="images/plus.png"></div>
            <div class="right"><h3 id="num2"></h3></div>

        <button onclick="start_game(); myCountDown()">Start Game</button>

            <form id="form">
                 <input type="text" id="txtbox" /> 
                 <input type="button" value="Answer" onclick="check_answer(); setFocus(); ShowResults(); sumResults()" />
            </form> 
        </div>
    <a href="index.html">home page</a>

    </div> <!-- /content -->

    <div id="aside">

    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:45:41.943

你可以使用这个：

```
 function addAnswers()
        {
            var data = $randomnumber1 + " + " + $randomnumber2 + " = " + ($randomnumber1+$randomnumber2)
            var newListItem = document.createElement('li');
            var newText = document.createTextNode(data);
            newListItem.appendChild(newText);
            document.getElementById("ans").appendChild(newListItem);
        } 
```

您的问题尚不清楚，但这应该与您正在寻找的内容相符。您需要做的是添加`<ul>`带有 id 的a ，`ans`并且此函数将`li`在您每次运行时将组件附加到它（您的答案）。答案本身将存储到`data`.

试试看 - 如果您需要帮助自定义它，请更新您的答案。

# javascript - Prototype.js：如何覆盖一个 div，而不是通过 ajax 更新它的内容？

> ID：15572475
> 
> 赞同：1
> 
> 时间：2013-03-22T14:13:18.097
> 
> 标签：javascript, prototypejs

当我做

`new Ajax.Updater('foo', 'getALifeGuys.php', ...`

这将更新的内容

`<div id="foo">`.

但是我如何用 ajax 调用的结果覆盖这个 div 呢？这背后的主要思想是我们不知道 foo-div 的父级，并且 ajax 调用的结果也包含`<div id="foo">`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T14:32:29.940

您可以使用[`insertion`option](http://api.prototypejs.org/ajax/Ajax/Updater/)，它也有一个函数：

```
new Ajax.Updater('foo', 'getALifeGuys.php', {
    insertion: function(el, response) {
        $(el).replace(response);
    }
}); 
```

如果您`div#foo`是其父元素的唯一子元素，您也可以只传递该父元素：

```
new Ajax.Updater($('foo').parentNode, 'getALifeGuys.php', …); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T14:29:46.850

在这种情况下，您最容易做的事情是，而不是使用`Ajax.Updater`，使用`Ajax.Request`which `Ajax.Updater`wraps。在该方法的成功方法中，您可以使用`Element.replace`, 将带有 id 的 div 替换为`foo`从您的方法返回的内容。

# php - 试图改变一个值mysql数据库

> ID：15572479
> 
> 赞同：-1
> 
> 时间：2013-03-22T14:13:34.177
> 
> 标签：php, mysql, database

我对 MySQL 数据库非常陌生，但我有一些 PHP 知识
，我想更新`wp_s2member_login couter`表中所有字段的值。
当我尝试更新表时出现此错误：

> 连接成功 'where 子句'中的未知列'wp_s2member_login_counter'

```
<?php
// Connect to MySQL
$link = mysql_connect('mywebsite.com', 'wrd6rEDgggy', 'mypassword'); 
if (!$link) { 
die('Could not connect: ' . mysql_error()); 
} 
echo 'Connected successfully'; 
mysql_select_db(wrd_47io4f3a6l);

$result = mysql_query("UPDATE wp_usermeta SET meta_value='0' WHERE          wp_s2member_login_counter<>'0'") 
or die(mysql_error());  

?> 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:17:05.683

根据您上面发布的内容，您的`wp_s2member_login couter`表应该是`wp_s2member_login counter`？

计数器中的“n”？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:37:49.390

```
$result = mysql_query("UPDATE wp_usermeta SET meta_value='0' WHERE          wp_s2member_login_counter<'0' OR wp_s2member_login_counter>0") 
```

或者

```
$result = mysql_query("UPDATE wp_usermeta SET meta_value='0' WHERE          wp_s2member_login_counter != 0") 
```

# string - 从groovy中的字符串中提取数字数据

> ID：15572481
> 
> 赞同：17
> 
> 时间：2013-03-22T14:13:35.233
> 
> 标签：string, groovy

我得到一个可以包含文本和数字数据的字符串：

例子：

“100 磅”“我认为是 173 磅”“73 磅”。

我正在寻找一种干净的方法来仅从这些字符串中提取数字数据。

这是我目前正在做的剥离响应：

```
def stripResponse(String response) {
    if(response) {
        def toRemove = ["lbs.", "lbs", "pounds.", "pounds", " "]
        def toMod = response
        for(remove in toRemove) {
            toMod = toMod?.replaceAll(remove, "")
        }
        return toMod
    }
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-22T14:20:27.703

您可以使用`findAll`然后将结果转换为整数：

```
def extractInts( String input ) {
  input.findAll( /\d+/ )*.toInteger()
}

assert extractInts( "100 pounds is 23"  ) == [ 100, 23 ]
assert extractInts( "I think 173 lbs"   ) == [ 173 ]
assert extractInts( "73 lbs."           ) == [ 73 ]
assert extractInts( "No numbers here"   ) == []
assert extractInts( "23.5 only ints"    ) == [ 23, 5 ]
assert extractInts( "positive only -13" ) == [ 13 ] 
```

如果您需要小数和负数，您可以使用更复杂的正则表达式：

```
def extractInts( String input ) {
  input.findAll( /-?\d+\.\d*|-?\d*\.\d+|-?\d+/ )*.toDouble()
}

assert extractInts( "100 pounds is 23"   ) == [ 100, 23 ]
assert extractInts( "I think 173 lbs"    ) == [ 173 ]
assert extractInts( "73 lbs."            ) == [ 73 ]
assert extractInts( "No numbers here"    ) == []
assert extractInts( "23.5 handles float" ) == [ 23.5 ]
assert extractInts( "and negatives -13"  ) == [ -13 ] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-01-15T18:16:21.013

把它放在这里给同样需要它的人。

我不需要创建新问题，而是需要一个字符串中的一个数字。

我用正则表达式做到了这一点。

```
def extractInt( String input ) {
  return input.replaceAll("[^0-9]", "")
} 
```

输入可能在哪里`this.may.have.number4.com`并返回`4`

我从上面的答案中收到错误（可能是由于我的 Jenkins 版本）-出于某种原因，我得到了这个： ----它在[Jenkins](https://issues.jenkins-ci.org/browse/JENKINS-43520)`java.lang.UnsupportedOperationException: spread not yet supported in input.findAll(\d+)*.toInteger()`上说它已解决。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-14T09:05:44.897

通过 metaClass添加下面的方法后`numbersFilter`，您可以如下调用它：

```
assert " i am a positive number 14".numbersFilter() == [ 14 ]
assert " we 12 are 20.3propaged 10.7".numbersFilter() == [ 12,20.3,10.7 ]
assert " we 12 a20.3p 10.7 ,but you can select one".numbersFilter(0) == 12
assert " we 12 a 20.3 pr 10.7 ,select one by index".numbersFilter(1) == 20.3 
```

将此代码添加为 BootStrap

```
String.metaClass.numbersFilter={index=-1->
            def tmp=[];
            tmp=delegate.findAll( /-?\d+\.\d*|-?\d*\.\d+|-?\d+/ )*.toDouble()
            if(index<=-1){
                return tmp;
            }else{
                if(tmp.size()>index){
                    return tmp[index];
                }else{
                   return tmp.last();
                }
            }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-30T14:46:12.880

由于 input.findAll( /\d+/ )*.toInteger() 不适用于 Jenkins。您可以改用它。

```
def packageVersion = "The package number is 9.2.5847.1275"
def nextversion=packageVersion.findAll( /\d+/ ).collect{ "$it".toInteger() }
nextversion.add(nextversion.pop()+1)
nextversion = nextversion.join('.')
Result: 9.2.5847.1276 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-30T17:54:47.487

另一种替代解决方案，没有 RegEx。它将字符串解析为标记并将它们转换为数字列表或空值。删除空值，最后只考虑第一个条目（根据需要）。

```
def extractNumericData(String response) {
    response.split(' ')
        .collect { it.isFloat() ? Float.parseFloat(it) : null }
        .findAll { it }
        .first()
}

assert 100 == extractNumericData("100 pounds")
assert 173 == extractNumericData("I think 173 lbs")
assert 73 == extractNumericData("73 lbs.") 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-01-09T18:36:20.077

当逐行解析 String.contains 和 String.replaceAll （用空格替换所有非数字字符序列）时，String.split() 组合很有用，如下所示：

```
if (line.contains("RESULT:")) {
    l = line.replaceAll("[^0-9][^0-9]*"," ")
    a = l.split()
    pCount1 = Integer.parseInt(a[0])
    pCount2 = Integer.parseInt(a[1])
} 
```

String.findAll 解决方案更好！相等的：

```
if (line.contains("RESULT:")) {
    a = line.findAll( /\d+/ )*.toInteger()
    pCount1 = a[0]
    pCount2 = a[1]
} 
```

# git - 如何做到“git grep -e “用jgit？

> ID：15572483
> 
> 赞同：2
> 
> 时间：2013-03-22T14:13:41.010
> 
> 标签：git, jgit

我正在使用“git grep -e”来查找与内容中的模式匹配的文件。我查看了jgit的索引，找不到“grep”，但最接近的是PatternMatchRevFilter。这类似于“git grep”正在做的事情吗？

在官方的 JGit 用户指南中，它说“TODO 谈论过滤器”。:) 有人有如何使用这个过滤器的例子吗？

谢谢！

杰森

附言。这可能是一个单独的问题 - 我如何为搜索指定一个分支？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-28T14:29:26.043

首先，PatternMatchRevFilter 不是您想要的。RevFilter 用于在行走期间选择某些修订（提交）。所以它相当于`git log --grep=pattern`.

您想要的是遍历单个修订的树并读取 blob 内容。

目前还没有一个简单易用的 API 相当于`git grep`. 您已经结合了较低级别的 API：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

import org.eclipse.jgit.diff.RawText;
import org.eclipse.jgit.lib.ObjectId;
import org.eclipse.jgit.lib.ObjectLoader;
import org.eclipse.jgit.lib.ObjectReader;
import org.eclipse.jgit.lib.Repository;
import org.eclipse.jgit.revwalk.RevCommit;
import org.eclipse.jgit.revwalk.RevWalk;
import org.eclipse.jgit.treewalk.AbstractTreeIterator;
import org.eclipse.jgit.treewalk.CanonicalTreeParser;
import org.eclipse.jgit.treewalk.TreeWalk;

public class Grep {

    private final Repository repository;
    private final Pattern pattern;

    private final String revName;

    public Grep(Repository repository, Pattern pattern, String revName) {
        this.repository = repository;
        this.pattern = pattern;
        this.revName = revName;
    }

    public void grepPrintingResults() throws IOException {
        ObjectReader objectReader = repository.newObjectReader();
        try {
            ObjectId commitId = repository.resolve(revName);
            impl(objectReader, commitId);
        } finally {
            objectReader.release();
        }
    }

    private void impl(ObjectReader objectReader, ObjectId commitId)
            throws IOException {

        TreeWalk treeWalk = new TreeWalk(objectReader);
        RevWalk revWalk = new RevWalk(objectReader);
        RevCommit commit = revWalk.parseCommit(commitId);

        CanonicalTreeParser treeParser = new CanonicalTreeParser();
        treeParser.reset(objectReader, commit.getTree());

        int treeIndex = treeWalk.addTree(treeParser);
        treeWalk.setRecursive(true);

        while (treeWalk.next()) {
            AbstractTreeIterator it = treeWalk.getTree(treeIndex,
                    AbstractTreeIterator.class);
            ObjectId objectId = it.getEntryObjectId();
            ObjectLoader objectLoader = objectReader.open(objectId);

            if (!isBinary(objectLoader.openStream())) {
                List<String> matchedLines = getMatchedLines(objectLoader
                        .openStream());
                if (!matchedLines.isEmpty()) {
                    String path = it.getEntryPathString();
                    for (String matchedLine : matchedLines) {
                        System.out.println(path + ":" + matchedLine);
                    }
                }
            }
        }
    }

    private List<String> getMatchedLines(InputStream stream) throws IOException {
        BufferedReader buf = null;
        try {
            List<String> matchedLines = new ArrayList<String>();
            InputStreamReader reader = new InputStreamReader(stream, "UTF-8");
            buf = new BufferedReader(reader);
            String line;
            while ((line = buf.readLine()) != null) {
                Matcher m = pattern.matcher(line);
                if (m.find()) {
                    matchedLines.add(line);
                }
            }
            return matchedLines;
        } finally {
            if (buf != null) {
                buf.close();
            }
        }
    }

    private static boolean isBinary(InputStream stream) throws IOException {
        try {
            return RawText.isBinary(stream);
        } finally {
            try {
                stream.close();
            } catch (IOException e) {
                // Ignore, we were just reading
            }
        }
    }
} 
```

像这样使用它：

```
Grep grep = new Grep(repository, Pattern.compile("test"), "HEAD");
grep.grepPrintingResults(); 
```

# facebook - Facebook 缩略图未显示

> ID：15572489
> 
> 赞同：0
> 
> 时间：2013-03-22T14:13:56.497
> 
> 标签：facebook

我有一个奇怪的问题 - 当我从我们的网站分享一个页面的链接时，图像不会显示为缩略图（有时）。它具有正确的元数据，但它几乎就像它超时。

例如

[http://modetro.com/our-favourites/vintage-retro-sankyo-japanese-flip-alarm-clock-mode-no-401-space-age-mid-century](http://modetro.com/our-favourites/vintage-retro-sankyo-japanese-flip-alarm-clock-mode-no-401-space-age-mid-century)

有元标记

```
<meta property="og:image" content="http://modetro.com/image/cache/data/ebay/vintage-retro-sankyo-japanese-flip-alarm-clock-mode-no-401-space-age-mid-century/652436936_o-340x340.jpg" /> 
```

如果我在 FB 上分享此链接，它不会显示缩略图？我已经为此页面和其他页面使用了调试工具，有时它会获取图像，有时却没有？任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:25:11.517

根据 Facebook 的说法，他们正在处理一个小故障..[在此处查看此页面](https://www.facebook.com/help/community/question/?id=10200708365214182&referer=search_result&query=share%20thumbnail)

# ios - 绘制一个 3D 立方体并旋转它

> ID：15572493
> 
> 赞同：2
> 
> 时间：2013-03-22T14:14:05.200
> 
> 标签：ios, objective-c, xcode, opengl-es, 3d

对于 iOS 应用程序，我想绘制一个 3D 立方体并能够通过滑动手势旋转它。我在哪里可以找到这样一个基本场景的教程或其他东西？我能找到的只是对 openGL 的深度阅读，但我认为一定有更简单的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:18:41.267

你可以看这个教程..... [http://www.raywenderlich.com/3664/opengl-es-2-0-for-iphone-tutorial](http://www.raywenderlich.com/3664/opengl-es-2-0-for-iphone-tutorial)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:19:34.957

[Cocos3d](https://github.com/cocos3d/cocos3d)是一个很好的入门框架，而且使用起来相当简单。查看演示中的示例，我认为它们内部也有一个旋转对象。

# erlang - Erlang: {error,timeout} 在同一台机器上启动第 14 个从机时

> ID：15572495
> 
> 赞同：3
> 
> 时间：2013-03-22T14:14:05.977
> 
> 标签：erlang

我在启动从站时遇到以下行为：

```
aura:/home/xtomast1>$ erl -rsh ssh -sname root_worker
Erlang R14B04 (erts-5.8.5) [source] [64-bit] [smp:64:64] [rq:64] [async-threads:0] [kernel-poll:false]

Eshell V5.8.5  (abort with ^G)
(root_worker@aura)1> slave:start(localhost, 1).
{ok,'1@localhost'}
(root_worker@aura)2> slave:start(localhost, 2).
{ok,'2@localhost'}
(root_worker@aura)3> slave:start(localhost, 3).
{ok,'3@localhost'}
(root_worker@aura)4> slave:start(localhost, 4).
{ok,'4@localhost'}
(root_worker@aura)5> slave:start(localhost, 5).
{ok,'5@localhost'}
(root_worker@aura)6> slave:start(localhost, 6).
{ok,'6@localhost'}
(root_worker@aura)7> slave:start(localhost, 7).
{ok,'7@localhost'}
(root_worker@aura)8> slave:start(localhost, 8).
{ok,'8@localhost'}
(root_worker@aura)9> slave:start(localhost, 9).
{ok,'9@localhost'}
(root_worker@aura)10> slave:start(localhost, 10).
{ok,'10@localhost'}
(root_worker@aura)11> slave:start(localhost, 11).
{ok,'11@localhost'}
(root_worker@aura)12> slave:start(localhost, 12).
{ok,'12@localhost'}
(root_worker@aura)13> slave:start(localhost, 13).
{ok,'13@localhost'}
(root_worker@aura)14> slave:start(localhost, 14).
{error,timeout} 
```

我怀疑这是与 ssh 相关的问题，因此我尝试使用[此答案](https://stackoverflow.com/a/10832210/2199413)中提供的方法进行故障排除，但[获得的日志](http://pastebin.com/RzkRx3J5)显示第 14 次身份验证尝试成功，就像前 13 次一样。

^(现在我不知道下一步该尝试什么。我对 Erlang 几乎一无所知，并且我在上面的交互式 shell 会话中提出的这个问题在运行我真正需要工作的某个 Erlang 程序时也表现出来 - 所以任何帮助将不胜感激。)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:42:10.083

我怀疑它连接到`max user processes`限制，每个从节点似乎在我的测试中使用 3 个操作系统进程。如果您对用户进程的限制较低或已经启动了太多，这可能会导致像您这样的错误。

您没有指定您正在尝试的操作系统，但我想它与 Unix 类似。

查看您当前的限制设置类型

```
ulimit -a 
```

在外壳。

此外，列出所有进程可能会很有趣。由于您的 Erlang 报告了 64 个 Smp-Cores，因此它需要启动 64 个调度程序线程。我在我的操作系统上看不到这一点，但您可能启动的线程甚至可能存在限制。如果每个从站也启动 64 个线程，那么你就有很多线程在运行。

# javascript - 如何为 Fullcalendar 添加 EventSource 详细信息页面

> ID：15572502
> 
> 赞同：0
> 
> 时间：2013-03-22T14:14:24.463
> 
> 标签：javascript, jquery, fullcalendar

我想在 Adam Shaw 的[Fullcalendar](http://arshaw.com/fullcalendar/)中添加一个 EventSource 详细信息页面。此页面的一个用例是用户想要更改源的 URL 或更改属于该源的事件的颜色。现在我被我不确切知道如何检索源对象的事实所阻止。部分问题在于，据我所知，来源没有 ID。

我应该将 EventSourceID 注入源对象的正确函数是哪个？这个函数应该类似于 $ROOT/src/common/Views.js 中的 addEventSource 吗？

更新：为了清楚起见，我将有问题的文本源更改为 EventSource。现在我也有了一个解决方案，如果它是侵入性的，请告诉我：

1.  确保每个源对象都有一个 ID 属性集。这可以通过向 fc.sourceNormalizers 数组添加源规范化器函数来完成。

2.  创建以 EventSourceID 作为参数并返回源的retrieveEventSource。这将类似于 _addEventSource 的实现。

更新：已经发现一个问题，函数retrieveEventSource 是私有的，我不知道如何将它暴露给FullCalendar 之外的世界。此外，在源详细信息更改后，我还不知道如何实现应该重绘/AND/OR/重新获取事件的更新功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T15:00:15.707

好吧，既然您是首先填充日历事件数据的人，只需在新页面上使用该数据即可。

```
events: function (start, end, callback) {
    $.ajax({
        url: url,
        data: "json-events.php",
        success: function (data) {
            callback([event0,event1,event2,.....])
        },
        dataType: /* xml, json, script, or html */
    });
    ... 
```

只需在日历 api 之外的其他页面上获取数据

# ruby-on-rails - 即使 nginx.conf 更改，nginx 也会一直说“欢迎使用 nginx”

> ID：15572503
> 
> 赞同：0
> 
> 时间：2013-03-22T14:14:30.603
> 
> 标签：ruby-on-rails, ruby, nginx, capistrano, vps

这是我的 nginx.conf，使用 capistrano 成功部署后：

```
http{
  server {
    listen 80;
    server_name localhost;
    passenger_enabled on;
    root /home/gwuix2/picurwebaruhaz/releases/20130322133124/public/;
  }
} 
```

我还添加了

```
gem 'capistrano-nginx' 
```

到我的 Gemfile.rb

没什么帮助，默认的 nginx 页面会一直显示。服务器：Ubuntu VPS 12.10 我遵循了本教程： [https ://www.digitalocean.com/community/articles/how-to-install-rails-and-nginx-with-passenger-on-ubuntu](https://www.digitalocean.com/community/articles/how-to-install-rails-and-nginx-with-passenger-on-ubuntu)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:18:17.000

修改 nginx.conf 后是否重启了 Nginx？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:31:07.770

我不确定 sites-enabled 和 sites-available 是否有效果。试试这些链接 [/running-rails-applications-using-nginx-with-passenger-on-ubuntu-server](http://www.ivankuznetsov.com/2010/05/running-rails-applications-using-nginx-with-passenger-on-ubuntu-server.html)和[configure-nginx-and-phusion-passenger](http://blog.binarybalance.com.au/2010/09/19/configuring-nginx-and-phusion-passenger)

# asp.net - 测量 ASP.NET SQL 会话状态提供程序的性能

> ID：15572504
> 
> 赞同：1
> 
> 时间：2013-03-22T14:14:33.603
> 
> 标签：asp.net, sql-server, performance, session-state

我们有一个非常大的三层 .NET 4.0 Web 应用程序（ASP.NET、WCF、SQL Server 2008 R2），我正在尝试诊断一些性能问题。ASP.NET 层使用 SQL 会话状态提供程序，并且相当广泛地使用会话状态。

```
<sessionState mode="SQLServer" sqlConnectionString="..." cookieless="false" timeout="20"/> 
```

我试图弄清楚将会话加载和保存到数据库需要多少时间。请注意，这与使用 SQL 分析器或其他数据库方法来测量该层上的时间不同；我想测量**从 ASP.NET 层花费的总时间。** 即，这将包括会话对象序列化/反序列化、连线时间和 SQL 保存/加载时间。

我是一位经验丰富的开发人员（自 80 年代初以来），我已经在网上搜索了*几个小时*——有大量文章对比会话状态方法和一般性能概念等，但我找不到任何关于如何实际衡量这个总数的文章SQL 会话状态提供程序的时间。我最初考虑使用 HttpModule 来挂钩事件并使用秒表，但似乎没有一条干净的路径。（我会选择一种*合理*准确到百分之几的方法......）

非常感谢任何想法/建议，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:19:18.023

您能否将会话超时更改为秒，然后更改为越来越低的数量，直到它无法加载和保存会话？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T18:31:16.427

首先想到的是创建一个除了加载/存储会话状态变量之外什么都不做的页面。从那里您可以设置一个编码的 UI 测试，该测试多次访问页面，并为页面加载时间所涉及的可变性和分布构建统计估计。

WCAT（Web容量分析工具）也可用于查看负载下性能如何变化......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:09:43.433

托管堆栈可以在 VS 分析器中进行分析。看：

*   [使用 Visual Studio Profiler 查找应用程序瓶颈](http://msdn.microsoft.com/en-us/magazine/cc337887.aspx)
*   [如何：使用性能向导分析网站或 Web 应用程序](http://msdn.microsoft.com/en-us/library/2s0xxa1d.aspx)
*   [使用分析工具分析应用程序性能](http://msdn.microsoft.com/en-us/library/z9z62c29.aspx)

对于使用 Xperf 的低级内容，请参阅[两分钟练习：XPerf 简介](http://blogs.technet.com/b/askperf/archive/2008/06/27/an-intro-to-xperf.aspx)

对于 SQL Server 端，有许多性能故障排除方法，例如[Waits 和 Queues](http://technet.microsoft.com/en-us/library/cc966413.aspx)。对于特定的语句持续时间/IO 成本，您可以使用探查器跟踪，请参阅[使用 SQL Server Profiler 的场景](http://msdn.microsoft.com/en-us/library/ms190793%28v=sql.105%29.aspx)。

现在，在您的情况下，您可以使用一种非常*具体*且*侵入性*的方式，您可以使用性能计数器。不是股票种类，而是创建自己的。请参阅[使用 XSLT 生成性能计数器](http://rusanu.com/2009/04/11/using-xslt-to-generate-performance-counters-code/)，以轻松生成使用自己的性能计数器增强应用程序所需的管道，然后将代码与性能跟踪挂钩。使用标准性能计数器工具链（[logman.exe](http://technet.microsoft.com/en-us/library/bb490956.aspx)、[perfmon.exe](http://technet.microsoft.com/en-us/library/bb490957.aspx)）进行捕获和分析。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T16:14:43.067

执行此操作的最简单方法是分析应用程序并查看在 ASP.NET 内部深处花费的时间。您将能够通过类和方法名称快速发现与会话相关的活动。

Perfview 很适合这个。它有一个采样分析器，这意味着它将为您提供准确、无偏差的分析信息。但它不能告诉你用什么方法花了多少秒。它告诉你的只是百分比。

我会针对一个空页面启动负载测试，并让 perfview 运行 30 秒。

dottrace 是一个简单的分析器，我相信它还可以显示每次调用所花费的 CPU 时间。

# xpages - 您可以在 JAVA 类中使用 xPages DominoViewData 吗？

> ID：15572505
> 
> 赞同：0
> 
> 时间：2013-03-22T14:14:33.910
> 
> 标签：xpages, xpages-extlib

我想在我的 Java 类中使用 com.ibm.xsp.model.domino.DominoViewData() 来过滤和排序多米诺视图数据，但我不确定如何去做。

那里没有很多示例，我发现的大多数示例都是在 xPage 或数据表上使用它。

在 JAVA 课程中，我想：

*   创建一个新的 DominoViewData 对象。
*   设置视图名称。
*   设置要排序的列。
*   （可选）设置过滤器。
*   最后，检索 ViewEntryCollection 以进行进一步处理。

DominoViewData 类可以这样使用吗？

感谢您的帮助，任何示例将不胜感激。

——杰夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:56:42.613

只要您在 XPage 应用程序中使用它们，这是可能的。我不确定您将获得什么好处而不是直接访问视图，但这里是代码：

1.您需要一个帮助类来访问表格数据模型

```
/**
 * Returns the tabular data model from a datasource
 * 
 * @author Christian Guedemann, Sven Hasselbach
 * @param dsCurrent
 *   datasource to get the tdm from
 * @param context
 *   current FacesContext instance
 * @return
 *   TabularDataModel
 */
public static TabularDataModel getTDM(DataSource dsCurrent, FacesContext context) {
    try {
        if (dsCurrent instanceof ModelDataSource) {
            ModelDataSource mds = (ModelDataSource) dsCurrent;
            AbstractDataSource ads = (AbstractDataSource) mds;
            ads.load(context);
            DataModel tdm = mds.getDataModel();
            if (tdm instanceof TabularDataModel) {
                TabularDataModel tds = (TabularDataModel) tdm;
                return tds;
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
} 
```

2.你必须创建你的数据源并将它们添加到一个组件，fe view root

```
DominoViewData dvd = new DominoViewData();
dvd.setViewName( "YOUR VIEW NAME" );
dvd.setComponent( FacesContext.getCurrentInstance().getViewRoot() ); 
```

3.现在您可以将过滤器选项或任何其他选项添加到您的数据源，这些：

```
dvd.setSortOrder( "ascending" );
dvd.setSortColumn( "NAME OF COLUMN" ); 
```

4.然后访问数据源的TDM，得到第一个条目，你有一个父级的句柄，一个ViewNavigator

```
TabularDataModel tdm = getTDM( dvd, FacesContext.getCurrentInstance() );
tdm.setDataControl( new UIDataEx() );
Entry noiEntry = (Entry) tdm.getRowData();
ViewNavigator nav = null;
try {
    nav = (ViewNavigator) noiEntry.getParent();
    System.out.println( "NAV COUNT: " + nav.getCount() );
    nav.recylce();
} catch (NotesException e) {
    e.printStackTrace();
} 
```

（好的，你现在有一个 ViewNavigator 而不是 ViewEntryCollection）

# php - 从对象数组中找到最合适的对象

> ID：15572509
> 
> 赞同：0
> 
> 时间：2013-03-22T14:14:49.123
> 
> 标签：php, arrays, loops, logic

给定一个具有以下结构的数组（尽管其中显然包含更多项）：

```
Array
(
    [0] => stdClass Object
        (
            [currency] => 1
            [role] => 3
            [client_company] => 
            [client_group] => 
            [hourly_rate] => 115.00
        )

    [1] => stdClass Object
        (
            [currency] => 1
            [role] => 1
            [client_company] => 
            [client_group] => 
            [hourly_rate] => 115.00
        )

    [2] => stdClass Object
        (
            [currency] => 1
            [role] => 3
            [client_company] => 58
            [client_group] => 
            [hourly_rate] => 110.00
        )
) 
```

我正在尝试创建一个带有四个参数的函数：

*   $角色
*   $货币
*   $公司 [可选]
*   $group [可选]

（“groups”是“companies”的子级：如果指定了组，则始终也会指定母公司）

...这将返回最适合这些参数的项目的“小时费率”值，基于：

如果指定了 $row、$currency、$company 和 $group：

*   找到与角色、货币、公司和团体相匹配的汇率。
*   如果没有，请找到与角色、货币和公司匹配的
*   如果没有，找一个与角色和币种匹配的
*   如果没有，返回 FALSE

如果只指定了 $row、$currency 和 $company：

*   找到与职位、货币和公司相匹配的费率
*   如果没有，找一个与角色和币种匹配的
*   如果没有，返回 FALSE

如果只指定了 $row 和 $currency：

*   找到与角色和货币相匹配的汇率
*   如果没有，返回 FALSE

我得到的是下面，它的工作原理。然而，它像罪恶一样丑陋。必须有一种更优雅的方式，而不是仅仅将大量 if/else 和循环放在一起。然而，现在是星期五，我午餐吃的比萨太多了，我的大脑被奶酪淹没了。

你能帮我吗？

```
$hourly_rate = FALSE;

if ( !empty($group) && !empty($company) ) {

    foreach ( $rates_cache as $rate ) {

        if ( $rate->currency == $currency && $rate->role == $role && (int) $rate->client_company === (int) $company && (int) $rate->client_group === (int) $group ) {
            $hourly_rate = $rate->hourly_rate;
        }

    }

    if ( empty($hourly_rate) ) {

        foreach ( $rates_cache as $rate ) {

            if ( $rate->currency == $currency && $rate->role == $role && (int) $rate->client_company === (int) $company ) {
                $hourly_rate = $rate->hourly_rate;
            }

        }
    }

    if ( empty($hourly_rate) ) {

        foreach ( $rates_cache as $rate ) {

            if ( $rate->currency == $currency && $rate->role == $role ) {
                $hourly_rate = $rate->hourly_rate;
            }

        }
    }

}else if ( !empty($company) ) {

    foreach ( $rates_cache as $rate ) {

        if ( $rate->currency == $currency && $rate->role == $role && (int) $rate->client_company === (int) $company ) {
            $hourly_rate = $rate->hourly_rate;
        }

    }

    if ( empty($hourly_rate) ) {

        foreach ( $rates_cache as $rate ) {

            if ( $rate->currency == $currency && $rate->role == $role ) {
                $hourly_rate = $rate->hourly_rate;
            }

        }
    }

}else{

    foreach ( $rates_cache as $rate ) {

        if ( $rate->currency == $currency && $rate->role == $role ) {
            $hourly_rate = $rate->hourly_rate;
        }

    }

}

return $hourly_rate; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:46:25.013

## 假设

我相信您`cache`始终采用以下格式

**缓存格式：**

```
$cache = array(
        0 => (object) (array(
                'currency' => 1,
                'role' => 3,
                'client_company' => '',
                'client_group' => '',
                'hourly_rate' => '115.00'
        )),
        1 => (object) (array(
                'currency' => 1,
                'role' => 1,
                'client_company' => '',
                'client_group' => '',
                'hourly_rate' => '115.00'
        )),
        2 => (object) (array(
                'currency' => 1,
                'role' => 3,
                'client_company' => 58,
                'client_group' => '',
                'hourly_rate' => '110.00'
        ))
); 
```

## 您修改后的功能

```
$param = array(
        "role" => 1,
        "currency" => 1
);

echo find($cache, $param)->hourly_rate; 
```

**使用的功能**

```
function find($cache, $param) {
    $mx = array();
    if (! isset($param['role']) || ! isset($param['currency']))
        throw new Exception("Missing Role Or Currency");
    foreach ( $cache as $k => $r ) {
        foreach ( array_keys(array_intersect($param, (array) $r)) as $key ) {
            if ($r->{$key} == $param[$key]) {
                isset($mx[$k]) ? $mx[$k] ++ : $mx[$k] = 1;
            }
        }
    }
    arsort($mx);
    return $cache[key($mx)];
} 
```

## 更复杂：另一种方法

**用法**

```
$param = array(
        "role" => 1,
        "currency" => 1
);

$process = new Process($cache);
echo $process->find($param)->best()->hourly_rate; // Outputs 115.00 
```

**多个结果**

当找到最合适的......有可能你会得到不止一个结果

```
$param = array(
        "role" => 3,
        "currency" => 1
);

$process = new Process($cache);
var_dump($process->find($param)->results()); 
```

**输出**

```
array (size=2)
  0 => 
    object(stdClass)[1]
      public 'currency' => int 1
      public 'role' => int 3
      public 'client_company' => string '' (length=0)
      public 'client_group' => string '' (length=0)
      public 'hourly_rate' => string '115.00' (length=6)
  2 => 
    object(stdClass)[3]
      public 'currency' => int 1
      public 'role' => int 3
      public 'client_company' => int 58
      public 'client_group' => string '' (length=0)
      public 'hourly_rate' => string '110.00' (length=6) 
```

**没有得到最好的结果**

如果您正在寻找最便宜的奖品并且您打电话，您可以根据您的参数看到您获得 2

```
$param = array(
        "role" => 3,
        "currency" => 1
);

echo Process::quick($cache, $param)->best()->hourly_rate; // returns 115.00 but that is not the cheapest 
```

**解析度**

解决方案是您可以添加过滤器和 `sort`

```
$param = array(
        "role" => 3,
        "currency" => 1
);

$sort = function ($a, $b) {
    return $a->hourly_rate < $b->hourly_rate ? - 1 : 1;
};

echo Process::quick($cache, $param)->sort($sort)->best()->hourly_rate; // 110 
```

**获取所有相关信息**

您也可以遍历所有结果并选择您想要插入的列以获得最佳结果

```
foreach ( Process::quick($cache, $param)->sort($sort)->getColoum("client_company", "hourly_rate") as $result ) {
    print_r($result);
} 
```

**输出**

```
stdClass Object
(
    [client_company] => 58
    [hourly_rate] => 110.00
)
stdClass Object
(
    [client_company] => 
    [hourly_rate] => 115.00
) 
```

**更新类**

要添加所有这些附加功能，您需要将您的课程升级到

```
 class Process implements JsonSerializable, IteratorAggregate {
    private $cache;
    private $matrix = array();
    private $final = array();

    function __construct($cache) {
        $this->cache = $cache;
    }

    function find($param) {
        if (! isset($param['role']) || ! isset($param['currency']))
            throw new Exception("Missing Role Or Currency");
        foreach ( $this->cache as $k => $rate ) {
            $keys = array_intersect($param, (array) $rate);
            foreach ( array_keys($keys) as $key ) {
                if ($rate->{$key} == $param[$key]) {
                    isset($this->matrix[$k]) ? $this->matrix[$k] ++ : $this->matrix[$k] = 1;
                }
            }
        }
        arsort($this->matrix);
        $this->matrix = array_keys(array_filter($this->matrix, function ($v) {
            return $v >= 2;
        }));
        $this->final = $this->sortArray($this->cache, $this->matrix);
        return $this;
    }

    public static function quick($cache, $param) {
        $process = new Process($cache);
        return $process->find($param);
    }

    public function best() {
        reset($this->final);
        return empty($this->final) ?  : current($this->final);
    }

    public function results() {
        return $this->final;
    }

    public function limit($length = 0) {
        $this->final = array_slice($this->final, 0, $length);
        return $this;
    }

    public function sort(Callable $function) {
        usort($this->final, $function);
        return $this;
    }

    public function getColoum() {
        $arg = array_flip(func_get_args());
        foreach ( $this->final as &$s ) {
            foreach ( $s as $k => $v ) {
                if (! isset($arg[$k]))
                    unset($s->{$k});
            }
        }
        return $this;
    }

    public function getIterator() {
        return new ArrayIterator($this->final);
    }

    public function jsonSerialize() {
        return json_encode($this->final);
    }

    public function __toString() {
        return $this->jsonSerialize();
    }

    private function sortArray(array $array, array $orderArray) {
        $ordered = array();
        foreach ( $orderArray as $key => $value ) {
            array_key_exists($value, $array) and $ordered[$value] = $array[$value];
        }
        return $ordered;
    }
} 
```

# php - '事件'的每小时时间线显示 - mysql php

> ID：15572510
> 
> 赞同：11
> 
> 时间：2013-03-22T14:14:51.187
> 
> 标签：php, jquery, mysql

我已经在谷歌上搜索了一段时间，但还没有想出什么很棒的东西。

我想要做的是获取mysql数据（下） ![mysql表](../Images/0e1e5bfc1909783ca6d0d95d6cf0c372.png)

并将其显示在每小时的时间轴中，例如： ![所需时间线](../Images/9c44c80e48cb559f2104905d74377e65.png)

任何人都有关于如何实现这一点的任何好的链接或教程？

不是在寻找一个确切的解决方案（尽管这有帮助），而只是一些让我开始的方向。

所以带有 php 和 jquery 的 mysql db

谢谢，

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-22T15:33:32.220

这些时间线/甘特图插件应该可以帮助您完成大部分工作，可能只需要设置 JSON 数据：

1.  [dhtmlxScheduler](http://dhtmlx.com/docs/products/dhtmlxScheduler/index.shtml)（时间线视图）

    [![时间线视图](../Images/78a0b771021f00795a3fe01617b35ffb.png)](http://dhtmlx.com/docs/products/dhtmlxScheduler/sample_timeline.shtml)

2.  [Bluelinemedia 时间线](http://www.bluelinemedia.co.uk/timelinedemo/)

    [![Bluelinemedia 时间线](../Images/47b6224fb9d3bf2815ae67b1a9a96923.png)](http://www.bluelinemedia.co.uk/timelinedemo/)

3.  [纯 CSS 时间线 - Matt Bango](http://mattbango.com/notebook/code/pure-css-timeline/)（链接不再起作用）

    [![纯 CSS 时间线](../Images/359c69c520e82a25b3d0a1c6bb279d2b.png)](http://mattbango.com/demos/pure-css-timeline/)

4.  [时间线 JS](http://stoicloofah.github.com/chronoline.js/)

    [![时间线 JS](../Images/846cd99de3f02bd65497c3e086cec07f.png)](http://stoicloofah.github.com/chronoline.js/)

5.  [时间轴 JS](http://timeline.verite.co/)

    [![时间轴 JS](../Images/1cb45cba8e07bb27b840802e91387eb1.png)](http://timeline.verite.co/)

6.  [jQuery.甘特图](http://taitems.github.com/jQuery.Gantt/)

    [![在此处输入图像描述](../Images/c6cb33ecbe788799625c0b633000c18c.png)](http://taitems.github.com/jQuery.Gantt/)

其中大部分是使用**时间线**、**甘特**图、**jQuery**、**js**关键字找到的

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-05T09:30:25.400

我一直在寻找可以显示具有更高时间分辨率的时间线的东西（至少低至几小时和几分钟）。这个时间线可能能够处理这样的事情：

[**Jos de Jong 和 Almende BV 的**时间表****](http://almende.github.io/chap-links-library/js/timeline/doc/)

 *** * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-06-09T12:35:42.000

[Timestack](http://isaaccambron.com/timestack/)也很有趣（而且很容易破解）。

谷歌[也有](https://google-developers.appspot.com/chart/interactive/docs/gallery/timeline)自己的时间线图。**

# python - Python/Django 安装没有发生

> ID：15572513
> 
> 赞同：0
> 
> 时间：2013-03-22T14:14:58.317
> 
> 标签：python, django

我新安装了 python 2.7 和 django 1.3。Django 1.3 是从此命令安装的

```
yum install Django MySQL-python 
```

据说安装已成功完成。但之后我尝试使用命令创建数据库表

```
 python manage.py syncdb 
```

我得到以下回溯

```
[root@localhost DemoApp]# python manage.py syncdb
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/usr/lib/python2.7/site-packages/django/core/management/__init__.py", line 429, in execute_from_command_line
    utility.execute()
  File "/usr/lib/python2.7/site-packages/django/core/management/__init__.py", line 379, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/usr/lib/python2.7/site-packages/django/core/management/base.py", line 191, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/usr/lib/python2.7/site-packages/django/core/management/base.py", line 219, in execute
    self.validate()
  File "/usr/lib/python2.7/site-packages/django/core/management/base.py", line 249, in validate
    num_errors = get_validation_errors(s, app)
  File "/usr/lib/python2.7/site-packages/django/core/management/validation.py", line 102, in get_validation_errors
    connection.validation.validate_field(e, opts, f)
  File "/usr/lib/python2.7/site-packages/django/db/backends/mysql/validation.py", line 14, in validate_field
    db_version = self.connection.get_server_version()
  File "/usr/lib/python2.7/site-packages/django/db/backends/mysql/base.py", line 338, in get_server_version
    self.cursor()
  File "/usr/lib/python2.7/site-packages/django/db/backends/__init__.py", line 250, in cursor
    cursor = self.make_debug_cursor(self._cursor())
  File "/usr/lib/python2.7/site-packages/django/db/backends/mysql/base.py", line 322, in _cursor
    self.connection = Database.connect(**kwargs)
  File "/usr/lib/python2.7/site-packages/MySQLdb/__init__.py", line 81, in Connect
    return Connection(*args, **kwargs)
  File "/usr/lib/python2.7/site-packages/MySQLdb/connections.py", line 187, in __init__
    super(Connection, self).__init__(*args, **kwargs2)
_mysql_exceptions.OperationalError: (1049, "Unknown database 'DemoApp'") 
```

谁能告诉我这个问题的原因是什么，安装中的任何错误

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T14:50:43.250

根据[Django 文档](https://docs.djangoproject.com/en/dev/intro/tutorial01/#database-setup)：

> 如果您使用的是 PostgreSQL 或 MySQL，请确保此时您已经创建了一个数据库。使用“CREATE DATABASE database_name;”来做到这一点 在数据库的交互式提示中。
> 
> 如果您使用 SQLite，则无需事先创建任何内容 - 数据库文件将在需要时自动创建。

因此，您需要先创建数据库才能让 syncdb 加载数据。

要创建数据库，请运行该`mysql`程序。这为您提供了与 SQL 数据库交互的命令提示符。然后你跑...

```
create database DemoApp; 
```

有关执行此操作的更多信息，请参阅 MySQL 教程[连接和断开与服务器的连接](http://dev.mysql.com/doc/refman/5.6/en/connecting-disconnecting.html)以及[创建和选择数据库](http://dev.mysql.com/doc/refman/5.6/en/creating-database.html)。

# vb.net - 无法设置 PageSetup 类的 PaperSize 属性

> ID：15572525
> 
> 赞同：6
> 
> 时间：2013-03-22T14:15:35.893
> 
> 标签：vb.net, excel

我正在尝试使用 VB.NET 打印 Excel 电子表格，但出现错误

> 无法设置 PageSetup 类的 PaperSize 属性

这是我的代码，

```
Dim oldCI As System.Globalization.CultureInfo = System.Threading.Thread.CurrentThread.CurrentCulture
    System.Threading.Thread.CurrentThread.CurrentCulture = New System.Globalization.CultureInfo("en-US")

    With application
        .AutomationSecurity = Microsoft.Office.Core.MsoAutomationSecurity.msoAutomationSecurityForceDisable
        .Visible = False
        .EnableEvents = False
        .DisplayAlerts = False
        .ScreenUpdating = False
    End With

    Dim workbook As Excel.Workbook
    Dim worksheet As Excel.Worksheet
    'Open as readonly and do not update links
    workbook = application.Workbooks.Open(_fileName, 2, True)

    For Each worksheet In workbook.Worksheets
        worksheet.PageSetup.PaperSize = _paperSize
    Next

    workbook.PrintOutEx()
    workbook.Close(False)
    application.Quit()

    System.Threading.Thread.CurrentThread.CurrentCulture = oldCI

    worksheet = Nothing
    application = Nothing 
```

这段代码在我的开发机器上工作，一旦我部署到测试服务器，代码就会失败。服务器上已经安装了默认打印机驱动程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-02T15:52:51.647

您需要安装打印机驱动程序。Excel 的 PageSetup 类必须与打印机驱动程序交互

我在 Mac Parallels（虚拟机）下运行的 Windows 8 上运行相关代码时遇到了类似的问题。对于在 Mac Parallels 上进行 Visual Studio 部署的任何人，这就是我正在做的事情：

1.  禁用 Mac 和 Windows 之间的打印机共享。转到 Parallels (VM) > 配置 > 硬件，然后单击打印。取消选中“添加所有 Mac 打印机”和“同步默认打印机”
2.  在 Windows 上安装打印机驱动程序
3.  为了通过同一个无线路由器获得分配的 IP 地址（如果您需要无线连接到打印机），您需要将网络设置为桥接。转到 Parallels (VM) > 配置 > 硬件 > '网络 1' 并选择网络类型作为机场和 DHCP 服务器作为自动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-23T23:01:44.187

核心问题在于***_paperSize***常量。在我的情况下，它给出了同样的错误：（原谅 c#）

```
worksheet.PageSetup.PaperSize = Excel.XlPaperSize.xlPaperLedger; 
```

根据打印机的不同，例如“ledger”尺寸的纸张可能被定义为 11x17 或 Tabloid。找出打印驱动程序所指的页面大小，然后

**没用：**

```
excel.ActiveSheet.PageSetup.PaperSize = Excel.XlPaperSize.xlPaperLedger 

excel.ActiveSheet.PageSetup.PaperSize = Excel.XlPaperSize.xlPaper11x17 
```

**工作：**

```
excel.ActiveSheet.PageSetup.PaperSize = Excel.XlPaperSize.xlPaperTabloid 
```

我希望这可以帮助任何因 Microsoft Excel 枚举的有趣不一致而遇到令人沮丧的问题的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-22T16:37:05.980

微软确认 XSham 的回答：

[https://support.microsoft.com/de-de/help/291298/you-cannot-use-page-setup-properties-in-excel-if-no-printers-were-inst](https://support.microsoft.com/de-de/help/291298/you-cannot-use-page-setup-properties-in-excel-if-no-printers-were-inst)

> # 症状
> 
> 当您运行 Microsoft Visual Basic for Applications 宏尝试设置或获取 Microsoft Excel 中工作簿中任何工作表的页面设置属性时，您可能会收到以下错误消息之一：
> 
> 运行时错误“1004”：无法设置 PageSetup 类的 x 属性运行时错误“1004”：无法获取 PageSetup 类的 x 属性
> 
> # 原因
> 
> 如果您的计算机上没有安装打印机驱动程序，则会出现此问题。如果未安装打印机驱动程序，Excel 将无法设置或获取页面设置属性。
> 
> # 解析度
> 
> 为防止出现此问题，请在您的计算机上安装打印机驱动程序。使用控制面板中的打印机选项添加和删除打印机驱动程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T16:15:55.357

您可以使用办公自动化来更改页面大小，如下所示

```
worksheet.PageSetup.PaperSize = WdPaperSize.wdPaperLetter 
```

或从“WdPaperSize”下拉列表中选择任何其他纸张类型。

希望对您有所帮助。

# mysql - 如何在我的 vb.net 应用程序中捕获 mysql 触发器和存储过程？

> ID：15572527
> 
> 赞同：0
> 
> 时间：2013-03-22T14:15:40.373
> 
> 标签：mysql, wpf, vb.net, stored-procedures, triggers

嘿，我需要一些帮助，我正在使用 Visual Studio 2010 和 mysql v5.5 开发一个 vb.net 桌面应用程序，其数据库将位于主服务器中，因此应用程序必须与数据库通信以获取/发布信息.

然而，我的问题是，我希望我的应用程序能够实时更新数据库内容，这样如果 user1 更新数据库，它会立即反映在 user2 的应用程序中。我已经阅读了推荐使用 mysql 语法中的触发器和存储过程来执行此操作的文章，但我不知道这将如何工作。

我有一个名为 'Store' 的表，当用户在表存储中输入一个项目时，我希望应用程序知道它并更新列表框或数据网格中的项目及其内容。

如何在我的 vb.net 代码中捕获这些事件？

我希望我足够清楚，如果没有，请询​​问。您的所有建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:32:37.033

我认为解决问题的最简单方法是定期从服务器获取记录并适当地更新本地列表。在您的客户端应用程序上，您可以存储上次更新列表的时间，并在您执行获取时将其作为参数发送并获取在该时间之后创建的所有项目（这样您只能获取新项目）。

另一种可能的解决方案是让客户端注册到服务器应用程序（以便服务器跟踪所有客户端），当您创建新记录时，您将该新记录发送给所有客户端，这些客户端将监听该事件。

很难说在你的情况下什么是“最好的”方法。您的代码是如何设计的（架构是什么）？客户端和服务器应用程序之间的连接是否持久？是否有您的客户端应用程序与之对话的服务器应用程序，或者每个客户端都直接与数据库对话？

# java - AlertDialog 中的 RatingBar：如何以编程方式更改星数？

> ID：15572528
> 
> 赞同：1
> 
> 时间：2013-03-22T14:15:42.870
> 
> 标签：java, android, android-alertdialog, ratingbar

我尝试在 AlertDialog 中显示 RatingBar（它经常从处理程序中调用）。

我的问题是我不能改变星星的数量。我知道那里有很多答案，但总是通过我不想要的 xml。

任何人都可以帮忙吗？

```
public void taskRatingPopup() {
    final AlertDialog.Builder popDialog = new AlertDialog.Builder(this);
    final RatingBar rating = new RatingBar(this);
    rating.setMax(5);
    rating.setNumStars(5);
    rating.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

    popDialog.setIcon(android.R.drawable.btn_star_big_on);
    popDialog.setTitle("BlaBla");
    popDialog.setView(rating);

    // Button OK
    popDialog.setPositiveButton(android.R.string.ok,
    new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int which) {

    writeRatingFile(rating.getProgress());

    //Remove the dialog
    dialog.dismiss();
    }

    })

    // Button Cancel
    .setNegativeButton("Cancel",
    new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int id) {
    dialog.cancel();
    }
    });

    popDialog.create();
    popDialog.show();
} 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-30T06:45:00.787

用于添加编号。评分栏中的星星数量，只需获取该数字并使用此标签即可。

```
rb_rate.setNumStars(<no.of stars,integer value>); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T10:49:22.460

```
//code block
        public void itemRatingPopup() {
            final AlertDialog.Builder popDialog = new AlertDialog.Builder(
                    mainScreen);
            final RatingBar rating = new RatingBar(mainScreen);
            rating.setNumStars(5);
            rating.setStepSize(0.1f);
            rating.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                    LayoutParams.WRAP_CONTENT));
            LinearLayout parent = new LinearLayout(mainScreen);
            parent.setGravity(Gravity.CENTER);
            parent.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,
                    LayoutParams.MATCH_PARENT));
            parent.addView(rating);

            // popDialog.setIcon(android.R.drawable.btn_star_big_on);
            popDialog.setTitle(mainScreen.getResources().getString(
                    R.string.user_ratings));
            popDialog.setView(parent);

            // Button OK
            popDialog.setPositiveButton(R.string.submit,
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {
                            String fanid = StorageManager.getInstance()
                                    .getSharedPrefs(mainScreen)
                                    .getString(AppConstants.PREFS_FAN_ID, "0");
                            if (fanid != null) {
                                new SubmitUserRatingAsyncTask("Item", ""
                                        + item.getId(), fanid, rating.getRating())
                                        .execute();
                            }
                            dialog.dismiss();
                        }
                    }).setNegativeButton(R.string.cancel,
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {
                            dialog.cancel();
                        }
                    });
            popDialog.create();
            popDialog.show();
        } 
```

您的对话框 UI 不会准确显示 5 颗星，它可能会显示任意数量的开始，因为您已将 RatingBar 指定为 Dialog 的根视图，请参阅上面的代码以供参考：

```
 you can change rating programatically by below code:
    float myRating=0f;
    rating.setRating(myRating) 
```

# android - Android 闹钟开机启动

> ID：15572530
> 
> 赞同：1
> 
> 时间：2013-03-22T14:15:48.190
> 
> 标签：android, notifications, broadcastreceiver, alarmmanager, bootcompleted

我想在一周中的特定日期发送通知，我的代码在当天有效，但每次打开智能手机/模拟器时都会收到通知。我该如何解决这个问题？

我的清单

```
 <receiver android:name=".AutoStart">
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED"></action>
            </intent-filter>
        </receiver>
        <receiver android:name=".Alarm"></receiver>
        <receiver android:name=".NotificationActivity"></receiver> 
```

自动启动.java

```
 public class AutoStart extends BroadcastReceiver
{   
    Alarm alarm = new Alarm();
    @Override
    public void onReceive(Context context, Intent intent)
    {   
        if (intent.getAction().equals("android.intent.action.BOOT_COMPLETED"))
        {
            alarm.SetAlarm(context);
        }
    }
} 
```

还有我的 Alarm.java

```
 @SuppressLint("Wakelock")
    public class Alarm extends BroadcastReceiver 
    {    
        static RSSFeed myRssFeed = null;
         @Override
         public void onReceive(Context context, Intent intent) 
         {   

             PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
             PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "");
             wl.acquire();

             SetAlarm(context);

             wl.release();
         }

    public void SetAlarm(Context context)
     {
         AlarmManager am=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
         Intent i = new Intent(context, NotificationActivity.class);
         PendingIntent pi = PendingIntent.getBroadcast(context, 0, i, 0);
         Calendar calendar = new GregorianCalendar();
         calendar.set(Calendar.DAY_OF_WEEK, 2);
         calendar.set(Calendar.HOUR_OF_DAY, 9);
         calendar.set(Calendar.MINUTE, 30);
         calendar.set(Calendar.SECOND, 0);
         am.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), AlarmManager.INTERVAL_DAY, pi); 
     }

     public void CancelAlarm(Context context)
     {
         Intent intent = new Intent(context, Alarm.class);
         PendingIntent sender = PendingIntent.getBroadcast(context, 0, intent, 0);
         AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
         alarmManager.cancel(sender);
     }
 } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:19:42.050

因为您已经在清单中声明了 android.intent.action.BOOT_COMPLETED 权限。这意味着每当您的设备或手机重新启动时，它都会调用 BroadcastReceiver。

试试下面的。这是工作代码。它每 10 分钟唤醒一次 CPU，直到手机关机。

添加到 Manifest.xml：

...

```
<uses-permission android:name="android.permission.WAKE_LOCK"></uses-permission> 
```

...

```
<receiver  android:process=":remote" android:name="Alarm"></receiver> 
```

... 代码：

```
package YourPackage;
import android.app.AlarmManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.PowerManager;
import android.widget.Toast;

public class Alarm extends BroadcastReceiver 
{    
     @Override
     public void onReceive(Context context, Intent intent) 
     {   
         PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
         PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "");
         wl.acquire();

         // Put here YOUR code.
         Toast.makeText(context, "Alarm !!!!!!!!!!", Toast.LENGTH_LONG).show(); // For example

         wl.release();
     }

 public void SetAlarm(Context context)
 {
     AlarmManager am=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
     Intent i = new Intent(context, Alarm.class);
     PendingIntent pi = PendingIntent.getBroadcast(context, 0, i, 0);
     am.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), 1000 * 60 * 10, pi); // Millisec * Second * Minute
 }

 public void CancelAlarm(Context context)
 {
     Intent intent = new Intent(context, Alarm.class);
     PendingIntent sender = PendingIntent.getBroadcast(context, 0, intent, 0);
     AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
     alarmManager.cancel(sender);
 }
 } 
```

从服务设置警报：

```
 package YourPackage;
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.os.IBinder;

public class YourService extends Service
{
Alarm alarm = new Alarm();
public void onCreate()
{
    super.onCreate();       
}

public void onStart(Context context,Intent intent, int startId)
{
    alarm.SetAlarm(context);
}

@Override
public IBinder onBind(Intent intent) 
{
    return null;
} 
```

}

# optimization - 优化 - 每日流量模式 - ABCA 是否优于 ACBA？

> ID：15572538
> 
> 赞同：0
> 
> 时间：2013-03-22T14:16:05.363
> 
> 标签：optimization, google-maps-api-3, routing

Google Maps API Route Optimization 是否考虑了一周中的一天和一天中的小时典型流量模式？

例如，假设一条路线从 A 开始，必须访问 B 和 C，然后返回 A。在一个典型的星期一早上，ABCA 证明时间最短——这就是交通恰好通过这些点的方式。

周一晚上 10 点后，最好使用 ACBA 路线。

路线优化可以建议这种优化吗？不仅仅是一个最佳距离——考虑交通的旅行时间，包括使用典型的交通模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:39:57.493

谷歌使用最快的时间来计算距离。因此它应该像你想要的那样工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-22T14:28:43.557

目前，API 中没有任何内容可以为您提供替代目的地的建议以缩短旅行时间。

# jsf - 防止从 jsf 2 中包含的 jar 安装相位侦听器

> ID：15572539
> 
> 赞同：6
> 
> 时间：2013-03-22T14:16:05.940
> 
> 标签：jsf, jsf-2

我有一个 JSF 2 应用程序，其中包含一个 jar 文件，该文件又在其 META-INF 目录中包含一个 faces-config.xml。faces-config.xml 包含一个阶段监听器的声明。我想在不修改 jar 文件本身的情况下阻止安装此阶段侦听器。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T14:34:26.430

您不能阻止`faces-config.xml`解释 3rd 方 JAR 中的特定部分。

你基本上有2个选择：

1.  `faces-config.xml`通过添加到webapp`metadata-complete="true"`自己的`faces-config.xml`.

    ```
    <faces-config ... metadata-complete="true"> 
    ```

    请注意，这也会跳过第 3 方 JAR 类中的注释扫描。你基本上需要重新定义你想在 webapp 自己的`faces-config.xml`.

    * * *

2.  提供一个自定义[`Lifecycle`](http://docs.oracle.com/javaee/6/api/javax/faces/lifecycle/Lifecycle.html)实现[`LifecycleFactory`](http://docs.oracle.com/javaee/6/api/javax/faces/lifecycle/LifecycleFactory.html)，您可以通过它在`<factory><lifecycle-factory>`webapp 的`faces-config.xml`. 在该实现中，相应地覆盖以在跳过或继续之前[`addPhaseListener()`](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/api/javax/faces/lifecycle/Lifecycle.html#addPhaseListener%28javax.faces.event.PhaseListener%29)执行例如检查。`instanceof`

# google-drive-api - 如何为 Google Drive 中的每个文件创建一个可用的 Google Drive 应用程序？

> ID：15572542
> 
> 赞同：0
> 
> 时间：2013-03-22T14:16:10.863
> 
> 标签：google-drive-api, mime

我按照文档[https://developers.google.com/drive/enable-sdk](https://developers.google.com/drive/enable-sdk)创建了一个 Google Drive 应用程序。

我希望能够通过右键单击“打开方式”来使用我的 Google Drive 应用程序打开存储在 Google Drive 中的任何文件和文件夹

我尝试将 */* 设置为“默认 MIME 类型”，以避免必须设置完整列表……但它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:39:51.777

/ is not a valid MIME type or file extension, you have to explicitly list all MIME types and extension your app can support in the Google Drive SDK tab of the APIs Console for your peoject.

# arrays - python中的列表，循环，数组

> ID：15572545
> 
> 赞同：1
> 
> 时间：2013-03-22T14:16:18.910
> 
> 标签：arrays, list, for-loop, python-2.7

作为一个新手python程序员，我有一个小问题，如果有人可以帮助我将不胜感激！

我有两个清单

随机重复数字列表（未知大小），例如：

```
number = [44,198,57,48,658,24,7,44,44,44..] 
```

对于数字中的 n，我想按顺序将这些数字提供给一个人列表，一个人一个数字。如果一个号码重复，程序会在第一次出现时找出得到这个号码的人。这意味着我想打印一个类似的列表

```
people = [1,2,3,4,5,6,7,1,1,1...]

print people 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:25:13.457

将数字到索引的映射存储在 a 中`dict`，并随时更新。

```
numbers = [44,198,57,48,658,24,7,44,44,44.]
index_mapping = {}
indexes = []
next_index = 1
for number in numbers:
    if number in index_mapping:
        # already seen
        indexes.append(index_mapping[number])
    else:
        # a new one
        indexes.append(next_index)
        index_mapping[number] = next_index
        next_index += 1

print indexes 
```

# java - HttpTransportSe.call() 方法最多需要一分钟来调用 Web 服务

> ID：15572549
> 
> 赞同：5
> 
> 时间：2013-03-22T14:16:27.440
> 
> 标签：java, android, web-services, ksoap2

我正在从我的 Android 应用程序调用 Web 服务。我在整个应用程序中对该服务进行了许多不同的调用，并且每个调用都在不到一秒的时间内返回数​​据，除了一个。即使实际的 Web 服务调用几乎是即时的，我的一个调用也可能需要一分钟才能返回数据。该行出现问题：

```
transport.call(SOAP_ACTION, soapEnvelope); 
```

这被调用并且值几乎立即从 Web 服务返回。但可能需要一分钟才能到达下一行：

```
SoapObject result = (SoapObject) soapEnvelope.bodyIn; 
```

Web 服务返回数据和应用程序点击下一行（上图）之间发生了什么？有没有办法减少这种延迟？有什么简单的检查吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:40:07.157

> 有没有办法减少这种延迟？有什么简单的检查吗？

唯一知道的方法是测量各个区域的时间差异。对于 SOAP Web 服务调用，这些是要衡量的时间。

# 客户端时间

客户端应用程序代码 -> 请求处理程序 -> 请求序列化 -> 请求调度 -> HTTP 传输 -> 服务器端

# 服务器端时间

接收 HTTP 请求 -> 反序列化 -> 应用程序代码 -> 响应处理程序 -> 序列化 -> 调度 -> HTTP 传输

阻塞通常出现在应用程序代码、处理程序和网络中。衡量这些，你可以找到时间花在哪里。

*   要测量应用程序代码和处理程序占用的 CPU 时间，请使用分析器。我会推荐[Jprofiler](http://www.ej-technologies.com/products/jprofiler/overview.html)。
*   要测量网络时间，请 ping 目标服务器并使用类似[Charles](http://www.charlesproxy.com/)的 Web 调试代理。它可以告诉您请求在网络上花费的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:50:16.237

原来延迟只是在调试应用程序时。在没有附加调试器的情况下运行应用程序时，它会立即返回。

# c# - Html 动作链接。将列表中的项目分配给操作链接

> ID：15572551
> 
> 赞同：0
> 
> 时间：2013-03-22T14:16:36.243
> 
> 标签：c#, asp.net-mvc, razor, foreach, actionlink

我试图通过使用从数据库收集的数据创建 ActionLinks 来创建菜单。我尝试使用@item.name，@item.ActionName ....但它不起作用....我做错了什么，但找不到......请帮助。谢谢

```
<ul id="menu">
    @foreach (var item in ViewBag.MenuList) 
    { 
        <li class="ajax_link">
            @Html.ActionLink(item.Name, item.ActionName, item.ControllerName)
        </li>
        <li>|</li>
    }
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:19:13.430

您必须投射 ViewBag。我假设您有一个名为`MenuList`或类似的课程。将您的代码更改为此

```
@foreach (var item in ViewBag.MenuList as List<HomeController.MenuList>)
{ 
  <li class="ajax_link">
     @Html.ActionLink(item.Name, item.ActionName, item.ControllerName)
  </li> 
```

或者，完全放弃烦人的 ViewBag 以支持 viewModel，您的原始语法将按预期工作。也就是说：

使您的菜单项列表成为 viewModel 属性

```
public class MenuList
{
    public string Name { get; set; }
    public string ActionName { get; set; }
    public string ControllerName { get; set; }
}

public class ViewModel
{
    //...
    public List<MenuList> MenuLists { get; set; }
} 
```

强烈键入您的视图

```
 @model MvcApplicationForTestingStuff.Controllers.HomeController.ViewModel 
```

然后您的操作链接将使用此语法

```
 <ul id="menu">
    @foreach (var item in Model.MenuLists) 
     { 
       <li class="ajax_link">
            @Html.ActionLink(item.Name, item.ActionName, item.ControllerName)
        </li>
        <li>|</li>
    }
</ul> 
```

# shell - apachectl 在 shell 脚本中不起作用

> ID：15572552
> 
> 赞同：0
> 
> 时间：2013-03-22T14:16:37.423
> 
> 标签：shell

这是我的 shell 脚本的问题。请帮助解决这个问题。

如果我这样输入终端，

> apachectl -S | awk '{if ($4 == "example.abc.uws") 打印 $4;}

它会给出输出`example.abc.uws`。（这是我在 Apache 中配置的 url。）

但是如果我存储`example.abc.uws`到一个变量中并用`apachectl`这样的命令给出，

> var=example.abc.uws
> apachectl -S | awk '{if ($4 == $var) print $4;}

然后，它不会给出任何输出。

`$servername`请帮助解决这个问题。我认为给出的`apachectl`命令可能存在一些问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:20:40.563

像这样：

```
var=example.abc.uws
apachectl -S | awk -v x="$var" '{if ($4 == x) print $4;} 
```

# ruby - 私有 gem 不在 Heroku 上运行

> ID：15572554
> 
> 赞同：0
> 
> 时间：2013-03-22T14:16:40.883
> 
> 标签：ruby, heroku

我对 right_aws gem 进行了更改。我将这个 gem 在本地保存到：myapp/vendor/gems/right_aws-3.0.4。我的应用程序在本地正确运行。

我可以毫无错误地将 ruby​​ 应用程序推送到 Heroku。但是，当我运行它时，我收到以下错误：

:29:in `require': no such file to load -- right_aws (LoadError) from <internal:lib/rubygems/custom_require>:29:in`require' 来自 /app/db/db.rb:1:in `<top (required)>' from build_transactions_db.rb:3:in`require_relative' 来自 build_transactions_db.rb:3:in `'

我的 Gemfile 包含： gem 'right_aws', :path => "vendor/gems/right_aws-3.0.4/"

在：path 中有或没有尾随“/”时，我都会遇到相同的错误。

我在非 Rails ruby​​ 应用程序中运行 ruby​​ 1.9.3-p374。如何修复此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:34:11.943

执行此操作时通常必须指定版本号：

```
gem 'right_aws', '3.0.4', :path => "vendor/gems/right_aws-3.0.4" 
```

希望能帮助到你

# ios - 如何检测 iOS 设备是否支持推送通知？

> ID：15572555
> 
> 赞同：2
> 
> 时间：2013-03-22T14:16:43.163
> 
> 标签：ios, push-notification, apple-push-notifications

如何检测 iOS 设备是否具有推送通知功能？

`[[UIApplication sharedApplication] enabledRemoteNotificationTypes]`告诉用户授予了哪些权限。我试图弄清楚该设备具有哪些功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:19:04.083

所有 iOS 设备都具有推送通知功能。

*   iPad
*   苹果手机
*   iPod 触摸

这仅取决于操作系统版本和用户设置。不是硬件本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:19:52.450

来自 Apple 文档。您无需调用方法即可解决。

> Apple 推送通知服务（简称 APNs）是推送通知 > 功能的核心。它是一种强大且高效的服务，用于将信息传播到 iPhone、iPad 和 iPod touch 设备等设备。

[http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T14:34:58.603

[根据 Apple](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194-CH1-SW1)的说法，推送通知是在 iOS 3.0 中引入的。

这意味着所有运行 iOS 3.0 或更高版本的 i 设备都具有该功能。

iPhone、iPod Touch 和 iPad 都支持该系统，因为正如其他人所指出的，这是操作系统功能，而不是硬件功能。

因此，请检查 iOS 是否为 3.0 或更新版本，或者您的软件是否针对更新的设备，在这种情况下您甚至不必检查。

# blackberry - 在 BlackBerry 上显示后台服务应用程序的应用程序图标

> ID：15572558
> 
> 赞同：2
> 
> 时间：2013-03-22T14:16:52.207
> 
> 标签：blackberry, java-me, icons, background-service

我正在开发一个具有后台服务功能的应用程序。[我已经使用“如何同时运行后台服务应用程序和 UIApplication”](https://stackoverflow.com/a/5772279/935381)的答案成功实现了后台服务

当我在模拟器上安装应用程序时，我看不到应用程序图标。我已经设置和取消设置属性`Do not display the application icon on the BlackBerry home screen.`，`BlackBerry_App_Descriptor.xml`但应用程序图标仍然不显示。

这是默认功能吗？选择的应用程序`Alternate entry point`不显示应用程序图标吗？

如何启用具有后台服务功能的应用程序图标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T05:26:32.117

为了显示 App Icon，您需要`Icons`在文件中指定两个（图像）`BlackBerry_App_Descriptor.xml`。在 下`Application Icons`，添加两个图像文件并为其中一个图像选择“翻转”。即使将其悬停或单击，这也会为您的应用显示一个图标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T05:31:39.627

你绝对可以做你所要求的。

您尚未显示该`BlackBerry_App_Descriptor.xml`文件，但我的猜测是您的问题出在哪里。对于像您这样的应用程序，您可能有 2 或 3 个不同的入口点。很多时候，通常`UiApplication`是一个入口点，然后可能有一个后台服务入口点，或者可能是一个单独的推送通知入口点。

对于其中的每一个，您可以在 BlackBerry_App_Descriptor.xml 文件中指定属性。对于您的主 UI 应用程序，它应该**在启动时自动运行**并且**不要在未选中的 BlackBerry 主屏幕上显示应用程序**（**未**选中！）。然后，您还需要确保在**Icon Files**部分中指定了图标文件。不过，您实际上并不*需要*翻转图标，尽管您当然可以添加它。

```
<AlternateEntryPoint Title="MyAppName" MainMIDletName="" ArgumentsForMain="" HomeScreenPosition="0" StartupTier="7" 
                     IsSystemModule="false" IsAutostartup="false" 
                     hasTitleResource="false" TitleResourceBundleKey="" TitleResourceBundleName="" 
                     TitleResourceBundleClassName="" TitleResourceBundleRelativePath="">
  <Icons>
    <Icon CanonicalFileName="res/img/icon.png" IsFocus="false"/>
  </Icons>
  <KeywordResources KeywordResourceBundleName="" KeywordResourceBundleRelativePath="" KeywordResourceBundleClassName="" KeywordResourceBundleKey=""/>
</AlternateEntryPoint> 
```

然后，对于您的后台服务，您将选中**启动时自动运行**和**不在 BlackBerry 主屏幕上显示应用程序。**

```
<AlternateEntryPoint Title="MyBackgroundService" MainMIDletName="" ArgumentsForMain="-background" HomeScreenPosition="0" StartupTier="7" 
                     IsSystemModule="true" IsAutostartup="true" 
                     hasTitleResource="false" TitleResourceBundleKey="" TitleResourceBundleName="" 
                     TitleResourceBundleClassName="" TitleResourceBundleRelativePath="">
  <Icons>
    <Icon CanonicalFileName="res/img/icon.png" IsFocus="false"/>
  </Icons>
  <KeywordResources KeywordResourceBundleName="" KeywordResourceBundleRelativePath="" KeywordResourceBundleClassName="" KeywordResourceBundleKey=""/>
</AlternateEntryPoint> 
```

## 参考

Also, see this [BlackBerry reference document](http://developer.blackberry.com/java/documentation/always_on_1984356_11.html), and take a look at the section titled **Scheduling processes to run periodically**.

# php - 如何从另一个类的方法中包含文件和访问类方法？

> ID：15572560
> 
> 赞同：0
> 
> 时间：2013-03-22T14:16:57.080
> 
> 标签：php

我有一个名为`numDisplay`包含几个方法的类。这些方法中的大多数都需要使用另一个类中的方法，该方法`prefs`在其职责过程中包含在另一个文件中。

我想我可以包含该文件，实例化该类`prefs`，然后从需要它的每个方法内部单独访问该方法，但是，我希望有更好的方法吗？

我想在 of 中做文件并`require_once`在那里实例化类，然后我可以从.`__constructor``numDisplay``numDisplay`

我尝试了下面的代码和各种语法变体，但无法正常工作。请问我该怎么做？

```
class numDisplay {

    private $P;

    function __construct($P) {

        require_once($_SERVER['DOCUMENT_ROOT'].'/includes/classes/preferences.php');
        $P = new Preferences();

    }

    public function displayBSNo($num, $invType) {

        $auto_bs_no     = $this->$P->getPreference('auto_bs_no');
        $length_bs_no       = $this->$P->getPreference('length_bs_no');
        $length_alt_bs_no   = $this->$P->getPreference('length_alt_bs_no');

        if ($invType == 1) { // It's a standard BS

            if ($auto_bs_no == '1') {

                return "BS-" . $this->pad($num, $length_bs_no);

            } else {

                if ($num == '') {
                    return '<i>none</i>';
                } else {
                    return $num;
                }
            }

        }

        elseif ($invType == 2) {
            return "PI-" . $this->pad($num, $length_alt_bs_no);
        }
    }

} 
```

当我尝试使用 displayBSNo() 时，我收到以下错误：

```
Fatal error: Call to a member function getPreference() on a non-object in /home/peter/Documents/websites/Our_websites/bookkeeper.ph/books.bookkeeper.ph/public/includes/classes/common.classes.php on line 347 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:18:57.230

代替

```
$this->$P->getPreference('') 
```

采用

```
$this->P->getPreference('') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:26:26.027

您没有在构造函数中设置属性：

```
function __construct($P) {
    require_once($_SERVER['DOCUMENT_ROOT'].'/includes/classes/preferences.php');
    $P = new Preferences();
} 
```

在这里，`$P`只是构造函数范围内的局部变量；要将值存储在属性`P`中，您应该具有：

```
 $this->P = new Preferences(); 
```

在您的其余代码中：

```
$this->$P->getPreference(...) 
```

引用名称所在的属性，`$P`这可能不是您想要的。它应该是：

```
$this->P->getPreference(...) 
```

当你犯了这些错误时，PHP 实际上会发出通知；您可以通过以下方式查看它们：

```
error_reporting(-1);
ini_set('display_errors', 'On'); 
```

仅在开发期间使用这些设置。

# google-visualization - 使用 Google 可视化：离线组织结构图

> ID：15572561
> 
> 赞同：1
> 
> 时间：2013-03-22T14:17:00.250
> 
> 标签：google-visualization, offline-mode

我可以在离线模式下使用[Google 可视化：组织结构图吗？](https://developers.google.com/chart/interactive/docs/gallery/orgchart)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-08T22:21:24.000

遗憾的是无法离线使用谷歌图表。

阅读常见问题解答以获取更多信息：

[https://developers.google.com/chart/interactive/faq?hl=it#offline](https://developers.google.com/chart/interactive/faq?hl=it#offline)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:25:03.757

将[https://www.google.com/jsapi](https://www.google.com/jsapi)作为 my.js 文件（使用一些文本编辑器复制粘贴）保存在与您的 html 相同的文件夹中并替换

```
<script type='text/javascript' src='https://www.google.com/jsapi'></script> 
```

和

```
<script type='text/javascript' src='my.js'></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-12T16:15:16.203

这首先不起作用谷歌不允许这样做，其次如果你复制粘贴它不会起作用，因为 jsapi 文件会生成一个像 google/udc/?vi.... 这样的文件。如果你添加`<script type='text/javascript' src='my.js'></script>`它会生成文件 my. js/?vi....' 如果您删除 .js 扩展名，它将不会加载（404 Not Found）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-18T21:45:30.410

我无法离线使用谷歌图表。法律上不可能。

我用jit js做了一个组织结构图，你可以离线使用。

[https://github.com/rlopez0689/OrgChartJit](https://github.com/rlopez0689/OrgChartJit)

# jsf - LifeCycleContext 与 FacesContext

> ID：15572562
> 
> 赞同：1
> 
> 时间：2013-03-22T14:17:01.183
> 
> 标签：jsf, oracle-adf

我知道与请求相关的所有信息都存储在`FacesContext`类中，并在请求结束时被丢弃。那么`LifeCycleContext`班级和班级有什么不同`FacesContext`呢？它能活多久？它是在 Http 请求结束时被 GC 处理的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T08:38:35.270

基于 Java 文档和[http://docs.oracle.com/cd/E15051_01/web.1111/b31974/adf_lifecycle.htm](http://docs.oracle.com/cd/E15051_01/web.1111/b31974/adf_lifecycle.htm)。我似乎 LifeCycleContext 负责对 ADF 放置的上下文进行分组。另一方面，FacesContext 是一个 Faces 构造，用于保存人脸请求细节。LifeCycleContext 添加到 FacesContext 提供的内容。请记住，ADF 是基于（并添加到）Trinidad，而 Trinidad 是基于（并添加到）Faces。

它应该在请求结束时被释放。何时进行垃圾收集取决于 JVM。

# php - 如何在 Codeigniter 中构建“维护模式”？

> ID：15572568
> 
> 赞同：9
> 
> 时间：2013-03-22T14:17:13.413
> 
> 标签：php, codeigniter

我正在使用最新的 codeigniter，当设置为“true”时，我需要创建一个标志（最好在配置中），所有页面都显示“维护模式”消息，而不是执行它们的控制器代码。

这样做的最佳/最简单的做法是什么？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-10-09T09:39:54.257

这是我的解决方案，对我来说很好：

下面将立即调用 maintanance.php，因此您可以继续破坏您的 CI 代码，而不会被全世界看到。

还允许您添加自己的 IP 地址，以便您仍然可以访问该站点进行测试等。

在 index.php 顶部添加：

```
$maintenance = false; ## set to true to enable

if ($maintenance)
{
    if (isset( $_SERVER['REMOTE_ADDR']) and $_SERVER['REMOTE_ADDR'] == 'your_ip')
    {
        ##do nothing
    } else
    {

        error_reporting(E_ALL);
        ini_set('display_errors', 1); ## to debug your maintenance view

        require_once 'maintenance.php'; ## call view
        return;
        exit();

    }
} 
```

在与 index.php 相同的文件夹中添加文件 Maintanance.php（或更新上面的路径）：

```
<!DOCTYPE html>

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Maintenance</title>

        <style>
            body {
                width:500px;
                margin:0 auto;
                text-align: center;
                color:blue;
            }
        </style>
    </head>

    <body>

        <img src="images/home_page_logo.png">

        <h1><p>Sorry for the inconvenience while we are upgrading. </p>
            <p>Please revisit shortly</p>
        </h1>
        <div></div>

        <img src="images/under-maintenance.gif"   >

    </body>
</html>
<?php
header('HTTP/1.1 503 Service Temporarily Unavailable');
header('Status: 503 Service Temporarily Unavailable');
header('Retry-After: 3600');
?> 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-03-22T14:27:42.160

通过在核心目录中放置一个名为 MY_Controller 的新文件来扩展 CI_Controller。

在此文件的构造函数中，执行以下操作：

```
public function __construct()
{
    parent::__construct();

    if($this->config->item('maintenance_mode') == TRUE) {
        $this->load->view('maintenance_view');
        die();
    }
} 
```

让应用程序中的所有控制器都继承自该类。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-11-09T09:32:32.720

这是我的解决方案，简单、干净、有效地适用于所有 url 调用和 SEO 方面：

* * *

将此变量添加到： **application/config/config.php**

```
$config['maintenance_mode'] = TRUE;
$config['maintenance_ips'] = array('0.0.0.0', '1.1.1.1', '2.2.2.2'); 
```

* * *

在末尾添加这个条件： **application/config/routes.php**

```
if(!in_array($_SERVER['REMOTE_ADDR'], $this->config->item('maintenance_ips')) && $this->config->item('maintenance_mode')) {
    $route['default_controller'] = "your_controller/maintenance";
    $route['(:any)'] = "your_controller/maintenance";";
} 
```

* * *

在以下位置创建方法*维护*： **application** **/controllers/ *your_controller.php***

```
function maintenance() {
     $this->output->set_status_header('503'); 
     $this->load->view('maintenance_view');
} 
```

* * *

创建视图： **application/views/maintenance_view.php**

```
<!DOCTYPE html>
<html>
   <head>
      <title>Maintenance</title>
   </head>
   <body>
      <p>We apologize but our site is currently undergoing maintenance at this time.</p>
      <p>Please check back later.</p>
   </body>
</html> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-10-01T20:02:34.230

这是我想出的创建维护模式的方法。

1.  在 config.php 文件中启用 Hooks
2.  在errors文件夹下创建error_maintenance.php页面
3.  创建一个名为维护的 Hook
4.  在钩子配置设置中，您的钩子调用以在 post_controller 上运行

## 应用程序/错误/error_maintenance.php

```
<!DOCTYPE html>
<html>
  <head>
    <title>Maintenance</title>
    <style>Style your page</style>
  </head>
  <body>
    <p>We apologize but our site is currently undergoing maintenance at this time.</p>
    <p>Please check back later.</p>
  </body>
</html> 
```

## 应用程序/钩子/maintenance.php

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class maintenance
{
   var $CI;    
   public function maintenance()
   {
      $this->CI =& get_instance();
      $this->CI->load->config("config_maintenance");    
      if(config_item("maintenance"))
      {
          $_error =& load_class('Exceptions', 'core');
          echo $_error->show_error("", "", 'error_maintenance', 200);
          exit;
      }
   }
} 
```

## 应用程序/config/hooks.php

```
$hook['post_controller'][] = array(
   'class' => 'maintenance',
   'function' => 'maintenance',
   'filename' => 'maintenance.php',
   'filepath' => 'hooks',
   'params' => array()
); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-22T14:29:08.127

这个怎么样 ：

1.  创建自动加载的库，始终检查数据库上的维护标志。
2.  创建一个模块来控制您的应用程序维护标志。
3.  在维护模式开启时创建用于重定向的模块

自动加载的库可以包含如下内容：

```
class Maintenance_mode {
    function __construct(){
        $CI =& get_instance();
        $check_maintenance = $CI->db->select('flag_mode')->get('tbl_settings')->result();
        if($check_maintenance[0]->flag_mode == '1') 
            redirect(site_url('maintenance_mode_controller'));
    }
} 
```

下一步是为维护页面创建一个控制器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-04T10:57:24.733

这个很好用，

**应用程序/视图/vw_maintenance.php**

```
 <!DOCTYPE html>
    <html>
      <head>
        <title>Maintenance</title>
        <style>Style your page</style>
      </head>
      <body>
        <p>We apologize but our site is currently undergoing maintenance at this time.</p>
        <p>Please check back later.</p>
      </body>
    </html>
<?php exit(); ?> 
```

exit() 函数很重要，别忘了把它放在底部，它会阻止所有页面显示。

**应用程序/库/maintenance.php**

```
class Maintenance{

    private $CI;

    public function __construct() {

        $this->CI =& get_instance();

        // flag on and off
        $this->flag( $this->CI->uri->segment(1) );

        // get the flag status
        $check_maintenance = $this->CI->db->select('flag_mode')->where(array('setting_name' => 'maintenance'))->get('tbl_settings')->result();

        //display view if true
        if($check_maintenance[0]->flag_mode == '1')
            $this->CI->load->view('vw_maintenance');

    }

    private function flag($command){

        $this->CI->db->where('setting_name', 'evolving');

        switch($command){

            case "activate":                
                $this->CI->db->update('tbl_settings', array('flag_mode' => 1) ); 
            break;

            case "deactivate":
                $this->CI->db->update('tbl_settings', array('flag_mode' => 0) );
                redirect(site_url('/'));
            break;

        }
    }

} 
```

自动加载库，以便检查每个页面加载。

现在您可以通过键入或激活和停用维护模式

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-24T15:19:09.283

我认为这很简单，只需在构造函数上调用视图，如下所示。

评论（网站将上线）

```
class home extends CI_Controller {

public function __construct() {
    parent::__construct();
    //echo $this->load->view('maintenance','',true);exit;
    }
} 
```

取消注释（网站将在维护中）

```
class home extends CI_Controller {

public function __construct() {
    parent::__construct();
    echo $this->load->view('maintenance','',true);exit;
    }
} 
```

您可以在 CI 应用程序的“视图”下使用自己的“maintenance.php”页面。

# c# - 使用 NSPredicate 在 monoTouch 中过滤数组

> ID：15572569
> 
> 赞同：1
> 
> 时间：2013-03-22T14:17:16.170
> 
> 标签：c#, iphone, ios, xamarin.ios

所以我试图在 MonoTouch 中使用 NSPredicate 过滤数组。在 Objective-c 中它会是这样的：

```
NSPredicate *findStringWithReference = [NSPredicate predicateWithFormat:@"SELF CONTAINS [cd] %@",cRText.text];
NSArray *trackTraceContentFiltered = [trackTraceContent filteredArrayUsingPredicate:findStringWithReference]; 
```

我无法弄清楚如何在 c# 中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:33:21.830

您必须使用 NSArray 还是可以使用 .Net List / Collection 使您能够使用 Linq？

[101 LINQ Samples](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)是使用 LINQ 的绝佳资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:33:44.613

像这样的东西：

```
NSPredicate findStringWithReference = NSPredicate.FromFormat("SELF CONTAINS [cd] %@", new NSObject[] {cRText.StringValue } );
var trackTraceContentFiltered = trackTraceContent.Filter(findStringWithReference); 
```

如果您在 .NET 中工作，则可以使用 LINQ。网上有很多例子，大概是这样的：

```
var array = new string[] { "one", "two", "three" };
var filteredResult = array.Where(x => x.Contains("ne"); 
```

# jquery - jQuery基本对话框不显示

> ID：15572576
> 
> 赞同：0
> 
> 时间：2013-03-22T14:17:34.943
> 
> 标签：jquery, html, css

我正在使用 jQuery 并尝试在单击链接时打开一个基本对话框。[您在此处](http://jsfiddle.net/cvh2013/ELZpt/)的小提琴中看到的图像每个都用作链接。单击时，链接到的文本会显示在新的浏览器选项卡中，但不会生成对话框（应包含链接到的文本）。谁能告诉我我做错了什么，好吗？

CSS：

```
.circle {
width: 250px;
height: 250px;
border-radius: 50%;
border: 2px solid #fff;
float: left;
display: inline-block;
/*margin-right: 20px;*/

/* text styling */
font-size: 45px;
color: #FFF;  
line-height: 250px;
text-align: center;
font-family: Ubuntu, sans-serif;
}

.industry { background: #DD4814; margin-left: 5%; margin-right: 5%; }
.in-house { background: #AEA79F; margin-left: 5%; margin-right: 10%; }
.lawfirms { background: #5E2750; margin-left: 16%; margin-right: 5%; }
.industry-box-shadow { box-shadow: 0px 0px 2px 2px #DD4814 }
.in-house-box-shadow { box-shadow: 0px 0px 1px 1px #AEA79F }
.lawfirms-box-shadow { box-shadow: 0px 0px 1px 1px #5E2750 }
.text { line-height: 45px; padding-top: 50px; height: 200px }

.loading { position: absolute; top: 50%; left: 50%; margin-top: -8px; margin-left: -8px;             } 
```

HTML：

```
<div id="sf">

    <a href="dialogcontent/lawfirms.html" title="Law firms">
        <div class="circle lawfirms lawfirms-box-shadow">Law firms</div>
    </a> 
    <a href="dialogcontent/industry.html" title="Industry">
        <div class="circle industry industry-box-shadow">Industry</div>
    </a> 
    <a href="dialogcontent/in-house.html" title="In-house legal counsel">
    <div class="circle in-house in-house-box-shadow text">In-house
            legal counsel</div> 
    </a>

</div> 
```

Javascript：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script
src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script>

<script type="text/javascript">

$(document).ready(function() {
    var $loading = $('<img src="images/loading.gif" alt="Loading ..." class="loading">');

    $('#sf a').each(function() {
        var $dialog = $('<div></div>')
            .append($loading.clone());
        var $link = $(this).one('click', function() {
            $dialog
                .load($link.attr('href') + ' #content')
                .dialog({
                    title: $link.attr('title'),
                    width: 500,
                    height: 300
                });

            $link.click(function() {
                $dialog.dialog('open');

                return false;
            });

            return false;
        });
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:22:50.027

首先你必须在你的提琴手中加载 jQuery 和 jQuery UI，接下来你不能`var $dialog`在 click 事件中使用它，如果它只在[Fiddle](http://jsfiddle.net/ELZpt/8/)`$.each`的 see here中定义

```
 $(document).ready(function () {
    var $loading = $('<img src="http://ubuntuone.com/5qQ3i4ctM8HAvRsSIZKgqd" alt="Loading ..." class="loading">'); 
    var $dialog = $('<div></div>')

    $('#sf a').each(function () {

             $dialog.append($loading.clone());
        var $link = $(this).one('click', function () {
            $dialog.load($link.attr('href') + ' #content')
                .dialog({
                title: $link.attr('title'),
                width: 500,
                height: 300
            });

            $link.click(function (e) {

            //    e.preventDefault();
                $dialog.dialog('open');

                return false;
            });

            return false;
        });
    }); 
```

# jquery - 为什么我的 onsubmit 事件处理程序在要求重新加载页面之前只工作一次？

> ID：15572580
> 
> 赞同：2
> 
> 时间：2013-03-22T14:17:49.267
> 
> 标签：jquery, jquery-mobile

Start 和 Reset 按钮会触发输入字段文本的更改。
**当我导入：jquery.mobile-1.3.0.min.js 时
，我必须重新加载页面以使按钮重新触发事件。**

如果我只使用 Jquery-1.8.2，它就可以完美运行。

如何使用 Jquery 移动 UI 停止所需的重新加载？

我正在使用 Firefox 19.02。

```
 <!DOCTYPE html>   
<html>   
    <head>    
    <meta name="viewport" content="width=device-width, initial-scale=1">   

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />  
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>  
    <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>  

</head>   

<body>   

<form id='testform' action="#">  
    <fieldset>  
        <label for="timer">  
            <span>Event triggered</span>  
            <input type='text' name='triggered'>  
        </label>  
    </fieldset>  
    <fieldset>  
     <input value="Start" type="submit">  
     <input value="Reset" type="reset">  
     </fieldset>  
</form>  
<script type="text/javascript">  

//bind a submit handler to the sample form  
document.getElementById('testform').onsubmit = function()  
{  
   $("input[name='triggered']").val("Start button clicked.");  

    // cancel the normal submit  
    return false;  
};  

document.getElementById('testform').onreset = function()  
{  
    $("input[name='triggered']").val("Reset clicked.");  

    //cancel the normal rest  
    return false;  
};  

</script>  
</body>  
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:47:59.630

工作 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/GjU8e/](http://jsfiddle.net/Gajotres/GjU8e/)

```
<!DOCTYPE html>   
<html>   
    <head>    
    <meta name="viewport" content="width=device-width, initial-scale=1"/>   
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />  
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>  
    <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>  

</head>   

<body>   
    <div data-role="page" id="index">
        <form id='testform' action="#" data-ajax="false">  
            <fieldset>  
                <label for="timer">  
                    <span>Event triggered</span>  
                    <input type='text' name='triggered'/>  
                </label>  
            </fieldset>  
            <fieldset>  
                <input value="Start" type="submit"/>  
                <input value="Reset" type="reset"/>  
             </fieldset>  
        </form>  
    </div>        
<script type="text/javascript">  

// bind submit and reset event before page is shown 
$(document).on('pagebeforeshow', '#index', function(){ 
    //bind a submit handler to the sample form 
    $(document).on('submit', '#testform', function(){ 
        $("input[name='triggered']").val("Submit button clicked.");      
        // cancel the normal submit  
        return false;    
    });
    //bind a reset handler to the sample form 
    $(document).on('reset', '#testform', function(){ 
        $("input[name='triggered']").val("Reset button clicked.");      
        // cancel the normal reset  
        return false;    
    });  
});
</script>  
</body>  
</html> 
```

几点评论：

*   不要在 jQuery 中使用 vanila java 脚本。它会工作，但代码看起来很脏。
*   使用 jQuery Mobile 时，将代码包装在页面中。它可以在没有它的情况下工作，但不能完全正确。jQM 1.4 或 1.5 版将完全支持页面容器之外的页面元素/小部件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:29:37.007

将您的表单标签更改为此。

`<form id='testform' action="#" data-ajax="false">`

jQuery mobile 正在尝试使用 ajax 提交您的表单。

# sql-server - 使用回车换行将多行合并为一列

> ID：15572581
> 
> 赞同：11
> 
> 时间：2013-03-22T14:17:51.387
> 
> 标签：sql-server

下面的代码（我从[这里](https://stackoverflow.com/questions/12645297/merge-multiple-rows-into-one-column-without-duplicates/12645346?noredirect=1#comment22037856_12645346)得到的）在将多个用逗号分隔的字段合并在一起方面做得很好。

```
select player,
  stuff((SELECT distinct ', ' + cast(score as varchar(10))
       FROM yourtable t2
       where t2.player = t1.player
       FOR XML PATH('')),1,1,'') 
from yourtable t1
group by player 
```

我需要用回车换行替换逗号。我尝试了下面的代码，但它开始用这些字符分隔条目：“#x0D;”

```
select player,
  stuff((SELECT distinct CHAR(13)+CHAR(10) + cast(score as varchar(10))
       FROM yourtable t2
       where t2.player = t1.player
       FOR XML PATH('')),1,1,'') 
from yourtable t1
group by player 
```

我怀疑问题出在“FOR XML PATH('')),1,1,''”，但我不知道要输入什么值。

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T14:22:17.913

您实际上可以替换 STUFF 结果上的逗号。

尝试这个：

```
select player,
  replace(stuff((SELECT distinct ', ' + cast(score as varchar(10))
       FROM yourtable t2
       where t2.player = t1.player
       FOR XML PATH('')),1,1,''), ',', char(13) + char(10))
from yourtable t1
group by player 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-13T12:13:49.223

您可以使用以下方法处理 XML 添加的所有特殊字符（其中`#x0D;`一个）：

```
FOR XML PATH(''), TYPE).value('.','nvarchar(max)') 
```

更多信息[在这里](http://blogs.lobsterpot.com.au/2010/04/15/handling-special-characters-with-for-xml-path/)。

您还需要将第三个参数调整为`STUFF`在结果开始时需要跳过的字符数（在本例中为 2，因为您有`char(13)`and `char(10)`）。

所以你的解决方案是：

```
select player,
  stuff((SELECT distinct CHAR(13)+CHAR(10) + cast(score as varchar(10))
       FROM yourtable t2
       where t2.player = t1.player
       FOR XML PATH(''), TYPE).value('.','nvarchar(max)'),1,2,'') 
from yourtable t1
group by player 
```

# actionscript-3 - flash 获取函数的参数名称

> ID：15572583
> 
> 赞同：1
> 
> 时间：2013-03-22T14:17:53.273
> 
> 标签：actionscript-3, flash, function, arguments

我想在函数中获取函数的所有参数名称

例子：

```
function fct(var1:string,var2:string){
  var names:Array=...
  trace(names);
} 
```

必须跟踪：var1,var2

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:20:56.900

简单地说，这是不可能的。您可以获得的最接近的是参数编号和值。见下文：

```
function fct( ... args ):void {
    for ( var v:Object in args ) {
        trace( v + ": " + args[v] );
    }
}
var str1:String = "this is a test";
var str2:String = "this is another test";
fct( str1, str2 );

//output
//0: this is a test
//1: this is another test 
```

为了将来参考，您可以使用`...`+ 一个变量名来允许您需要的任意数量的参数。无论如何，您应该只需要访问而不是实际的变量名，因为无法应用范围（例如）`args[ INDEX ]`，您无论如何都无法访问它`variableName[ "propertyName" ]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T17:27:55.007

不可能像本机方法一样，但您可以使用元数据标签来设置参数名称。我创建了一个简单的例子。但我不明白它如何在实际项目中为您提供帮助：

```
[Arguments(param1="arg1",param2="arg2")]
public function test(arg1:Number, arg2:Number):void {

    var desc_xml:XML = describeType(Object(this).constructor);
    var metas_xml:XMLList = desc_xml.factory.method.(@name == "test");
    var args_xml:XMLList =   metas_xml.metadata.(@name == "Arguments");

    for each (var argx:XML in args_xml.arg)
    {
        trace(argx.@value.toXMLString());
    }

}; 
```

我使用 flex 4.6。不要忘记使用“-keep-as3-metadata+=Arguments”将每个现有的元数据标记添加到编译器参数。它需要编译发布版本。

# c# - 使用列表 仅 1 个项目的 MVC 视图

> ID：15572586
> 
> 赞同：0
> 
> 时间：2013-03-22T14:18:04.900
> 
> 标签：c#, asp.net-mvc

我有一个返回`List<T>`. 我将它发送到几个视图，其中大多数都需要列表，因为它将包含多个`T`类型的对象。我唯一的问题是我有一个只使用其中一个`T`对象的视图。所以本质上它是一个包含一个对象的列表。有没有一种简单的方法可以在我的视图中不使用`foreach`循环来将一个项目从列表/模型中取出？或者我应该为那个视图创建一个新的视图模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:28:55.963

```
List<T> myList = //...
T myT = myList[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:29:49.100

是的，您可以为此使用 System.Linq 命名空间下的 Linq 扩展方法，有几种方法允许您使用各种标准从列表中选择数据，而无需使用 foreach 循环。

IEnumerable 的扩展方法 [http://msdn.microsoft.com/en-us/library/9eekhta0.aspx](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)

如果您的视图是强类型列表，请使用视图中的扩展方法。

# mysql - 从一个表中选择另一个表中不存在的三遍

> ID：15572587
> 
> 赞同：1
> 
> 时间：2013-03-22T14:18:05.000
> 
> 标签：mysql, sql, join

我有一张桌子，里面装满了学生提交的不同项目。每个项目应由三位不同的评委评判。所以还有另一个分数表，其中包括 projectid 和 Judgeid。我正在尝试编写一个查询，可以选择任何尚未判断三遍的项目。

这是一些示例表...

**项目**

```
projectid | projectname
-----------------------
9         | Kintetics
11        | Volcano
15        | Robots
22        | Oceanlife 
```

**分数**

```
scoreid (AI) | projectid | judgeid | score
------------------------------------------
1            | 9         | 15      | 5
2            | 11        | 15      | 18
3            | 9         | 23      | 12
4            | 11        | 23      | 11
5            | 9         | 45      | 19
6            | 22        | 15      | 3 
```

我希望此查询返回项目 11、15 和 22，因为这三个项目还没有分配给他们的三名评委。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T14:19:53.953

```
SELECT  a.ProjectID, a.ProjectName
FROM    Projects a
        LEFT JOIN Scores b
            ON a.ProjectID = b.ProjectID
GROUP   BY a.ProjectID, a.ProjectName
HAVING  COUNT(a.ProjectID) < 3 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/06b480/2)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

输出

```
╔═══════════╦═════════════╗
║ PROJECTID ║ PROJECTNAME ║
╠═══════════╬═════════════╣
║        11 ║ Volcano     ║
║        15 ║ Robots      ║
║        22 ║ Oceanlife   ║
╚═══════════╩═════════════╝ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:25:13.653

另一种选择：

```
SELECT  a.ProjectID, a.ProjectName
FROM    Projects a
LEFT JOIN (select ProjectID, count(*) counted from Scores) b
       ON a.ProjectID = b.ProjectID
WHERE COALESCE(b.counted,0) < 3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T14:26:38.403

```
SELECT COUNT(scores.id) AS score_count, projects.* 
FROM scores, projects
WHERE scores.projectid = projects.id
GROUP BY projects.id
HAVING score_count > 2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T14:20:48.730

试试这个

```
select * from scores where id not in (select id from scores where project id in (select projectid from scores group by projectid having count(prjectid)=3)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T14:22:21.373

试试这个：

```
SELECT * FROM Projects p WHERE (SELECT COUNT(*) FROM Scores s WHERE s.projectid = p.projectid) < 3 
```

# c# - 无法创建 MyEntities 的实例

> ID：15572588
> 
> 赞同：2
> 
> 时间：2013-03-22T14:18:05.410
> 
> 标签：c#, linq, entity-framework

我正在开发一个使用实体框架的 MVC 应用程序。

我添加了新的 Ado.Net 实体数据模型文件，名为 Car。

在我的 web.config 文件中，我有这个：

```
<connectionStrings>
<add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-MyProjectName-20130322132315;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-MyProjectName-20130322132315.mdf" providerName="System.Data.SqlClient" />
<add name="CarEntities" connectionString="metadata=res://*/Models.Car.csdl|res://*/Models.Car.ssdl|res://*/Models.Car.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=PC\SQLEXPRESS;initial catalog=Car;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

在我的控制器中，我正在尝试这样做：

```
CarEntities car_db = new CarEntities(); 
```

我得到语法错误。CarEntities 无法识别。解决选项不存在。为什么会这样？我发现我可以直接从我的数据库中获取表。但这不起作用：

```
int exist = (from x in User where x.username == username select x).Count(); 
```

.edmx 文件在我的模型文件夹中，在我的控制器中我确实有：

```
using MyProjectName.Models; 
```

在另一个解决方案中，我完全能够做到这一点：

```
MyEntities myDatabase = new MyEntities();
(from x in myDatabase.User where x.username == username select x).Count(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:35:49.533

解决方案是删除这两个文件：

![在此处输入图像描述](../Images/6aac3fb49ec93c06fe92df4640550718.png)

然后将“代码生成策略”属性设置为备用值。当模型在设计器中打开时，此属性在属性窗口中可用。

# c++ - 基类集合的泛型类型的通信

> ID：15572591
> 
> 赞同：1
> 
> 时间：2013-03-22T14:18:11.730
> 
> 标签：c++, design-patterns

请帮我解决以下 C++ 设计问题

```
Class Office 
{
    std::list<Employees *> m_Employees; 
    string m_Address;

    void AddEmployee(Employees *employee);
    string GetAddress();    
}
Class SalesOffice : public Office
{
    int  m_TotalEmployees_SalesPerYear;
    int GetSalesPerYear();  
}
Class FinanceOffice : public Office
{
    int m_TotalEmployees_ProfitPerYear;
    int GetProfitPerYear(); 
}
Class BookKeepingOffice : public Office
{
    int m_TotalEmployees_RecordsPerYear;
    int GetRecordsPerYear();    
}

Class Employees
{
    int id; 
    int GetID();
}
Class SalesEmployees : public Employees
{
    int m_SalesPerYear;
    int GetEmployeeSalesPerYear();  
}
Class FinanceEmployees : public Employees
{
    int m_ProfitPerYear;
    int GetEmployeeProfitPerYear(); 
}
Class BookKeepingEmployees : public Employees
{
    int m_RecordsPerYear;
    int GetEmployeeRecordsPerYear();    
} 
```

班级办公室有一份班级员工名单。这种复合关系不能改变。显然，任何类型的办公室都只知道员工。问题：SalesOffice 的 GetSalesPerYear 如何访问 GetEmployeeSalesPerYear() 注意：我不想对每个办公室的员工进行类型转换。关于设计和设计模式的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:20:25.850

`int GetEmployeeSalesPerYear();`应该定义为 的虚方法`Employee`，返回 0 并且 `SalesEmployees`应该重新实现它。

# javascript - Chrome 扩展：从 popup.js 访问 background.js 的变量

> ID：15572595
> 
> 赞同：10
> 
> 时间：2013-03-22T14:18:30.463
> 
> 标签：javascript, google-chrome-extension

如果我使用[chrome.extension.getBackgroundPage()](https://developer.chrome.com/extensions/extension.html#method-getBackgroundPage)，我可以像这样访问 background.js 的变量：

背景.js：

```
var transfer = 'some text'; 
```

popup.js：

```
chrome.extension.getBackgroundPage().transfer 
```

但这[表示](https://developer.chrome.com/extensions/extension.html#method-getBackgroundPage)我只得到一个窗口对象（但“窗口”之前的“JavaScript”可能意味着什么......）。如何访问后台变量？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-22T14:45:27.630

是的，window 前面的“javascript”这个词确实意味着它返回了 javascript 文件（页面）background.js

为了便于访问我的文件顶部，我`popup.js`这样做：

```
var background = chrome.extension.getBackgroundPage(); //do this in global scope for popup.js 
```

那么你可以这样做：

```
background.transfer; 
```

由于您通常必须经常访问您的背景页面，这只会让生活变得更轻松。

# android - 数据库或 XML

> ID：15572597
> 
> 赞同：-2
> 
> 时间：2013-03-22T14:18:33.060
> 
> 标签：android, xml, database, performance

我正在编写一个聊天应用程序。下一步是在列表视图中列出所有用户（带有图像和 co）。

listview 的所有内容都已完成，但现在我在通过 xml 文件读取联系人或通过数据库（sqllite？）读取联系人之间进行选择。后来同样的消息。

我应该使用什么？两者中哪一个更快（性能）？

格力兹舞者

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:22:32.170

将数据存储在文件中可能会导致并发问题。如果不使用数据库，您也会在过滤数据时遇到很多麻烦。不断访问文件也会占用大量内存。数据库是更好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:21:23.363

显然，正确编写的数据库更快，并且android包含很多使用游标等的东西。

JSON 很好，因为它易于使用。联系人列表不应该太大，这样就可以了。

至于 XML，我真的不明白您为什么要使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T14:32:59.890

可以使用 MySQL 数据库而不是 SqLite 数据库或 XML 文件，因为联系人和消息可能会占用很大的空间，并且您需要将它们存储起来（有历史记录），因此您需要在远程服务器上有一个数据库并使用JSON 和 Web 服务 (php) 进行通信，您将拥有安全的数据和更大的存储空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T14:37:56.187

本地 Sqlite 数据库会更快。对于联系人，这仅取决于您要保存联系人的位置（在线/本地）。我会选择在线选项，因为这更有意义。

# ios - 用于编辑和非编辑文本字段的不同弹出框

> ID：15572599
> 
> 赞同：0
> 
> 时间：2013-03-22T14:18:37.310
> 
> 标签：ios, ipad, uipopovercontroller

好的，对不起，如果标题有点不对劲。希望我在这里解释得更好。我想要做的是有一个弹出框（iPad 应用程序），它会根据 UITextField 的状态做不同的事情。因此，如果用户在该文本字段中输入然后点击弹出框按钮，弹出框就会出现，如果用户点击该弹出框中的某些内容，它将被添加到该文本字段中（例如添加常用文本）。在这种情况下，弹出框只会在文本字段完成编辑时消失。

但是，如果用户在文本字段未编辑时点击弹出框按钮，则该项目列表仍会出现，但现在如果用户在弹出框之外点击，它应该会消失。

我听说过一些关于传递视图的信息，但我不确定那是我需要的。
有人知道这样做的好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:06:04.317

passthrought 视图是弹出框之外的视图，不会导致它自动关闭。当您想在文本字段完成编辑 call 时从代码中关闭弹出框时`[myPopover dismissPopoverAnimated:YES]`。

对于将文本块添加到文本字段中，我认为委派是正确的做法。您将主视图设置为弹出框内容视图的代表，并且每次选择弹出框中的文本块时，您都告诉代表将此块添加到文本字段文本中。

当您想在编辑文本字段时防止弹出框消失时，您应该实现`UIPopoverControllerDelegate`methode `popoverControllerShouldDismissPopover:`。

# mongodb - 查找最近 n 天内的所有文档

> ID：15572607
> 
> 赞同：28
> 
> 时间：2013-03-22T14:18:59.400
> 
> 标签：mongodb

我的`daily`收藏有如下文件：

```
..
{ "date" : ISODate("2013-01-03T00:00:00Z"), "vid" : "ED", "san" : 7046.25, "izm" : 1243.96 }
{ "date" : ISODate("2013-01-03T00:00:00Z"), "vid" : "UA", "san" : 0, "izm" : 0 }
{ "date" : ISODate("2013-01-03T00:00:00Z"), "vid" : "PAL", "san" : 0, "izm" : 169.9 }
{ "date" : ISODate("2013-01-03T00:00:00Z"), "vid" : "PAL", "san" : 0, "izm" : 0 }
{ "date" : ISODate("2013-01-03T00:00:00Z"), "vid" : "CTA_TR", "san" : 0, "izm" : 0 }
{ "date" : ISODate("2013-01-04T00:00:00Z"), "vid" : "CAD", "san" : 0, "izm" : 169.9 }
{ "date" : ISODate("2013-01-04T00:00:00Z"), "vid" : "INT", "san" : 0, "izm" : 169.9 }
... 
```

我离开了**_id**字段以节省空间。我的任务是“获取过去 15 天内的所有文件”。如您所见，我需要以某种方式：

1.  获得 15 个独特的日期。最新的应该作为集合中的最新文档（我的意思是今天的日期不是必需的，它只是基于**日期**字段的集合中的最新文档），而最旧的.. 好吧，也许没有必要要严格定义查询中最旧的一天，我需要的是从最新一天开始的某种 top15，如果你知道我的意思的话。就像 15 个*独特的*日子。
2.  **db.daily.find()**所有文档，**日期**字段在 15 天范围内。

**结果，我应该在 15 天内看到所有文档，从最新的集合开始。**

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-04-22T01:33:40.033

我刚刚针对您的数据样本测试了以下查询，它运行良好：

```
db.datecol.find(
{
    "date": 
    {
        $gte: new Date((new Date().getTime() - (15 * 24 * 60 * 60 * 1000)))
    }
}
).sort({ "date": -1 }) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-12-05T11:12:39.230

从 开始`Mongo 5`，这对操作员来说是一个很好的用例[`$dateSubtract`](https://docs.mongodb.com/manual/reference/operator/aggregation/dateSubtract/#mongodb-expression-exp.-dateSubtract)：

```
// { date: ISODate("2021-12-05") }
// { date: ISODate("2021-12-02") }
// { date: ISODate("2021-12-02") }
// { date: ISODate("2021-11-28") } <= older than 5 days
db.collection.aggregate([
  { $match: {
    $expr: {
      $gt: [
        "$date",
        { $dateSubtract: { startDate: "$$NOW", unit: "day", amount: 5 } }
      ]
    }
  }}
])
// { date: ISODate("2021-12-05") }
// { date: ISODate("2021-12-02") }
// { date: ISODate("2021-12-02") } 
```

使用`$dateSubtract`，我们通过从当前日期( ) 中减去`5`( `amount`) `"days"`( ) 来创建保存文档的最旧日期。`unit`[`$$NOW`](https://docs.mongodb.com/manual/reference/aggregation-variables/#mongodb-variable-variable.NOW)`startDate`

您显然可以添加一个`$sort`按日期对文档进行排序的阶段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-28T20:00:03.323

您需要运行[distinct](http://docs.mongodb.org/manual/reference/command/distinct/)命令来获取所有唯一日期。下面是示例。“值”数组包含您需要从中检索客户端最近 15 天的集合的所有唯一日期

```
db.runCommand ( { distinct: 'datecol', key: 'date' } )
{
    "values" : [
       ISODate("2013-01-03T00:00:00Z"),
       ISODate("2013-01-04T00:00:00Z")
    ],
    "stats" : {
       "n" : 2,
       "nscanned" : 2,
       "nscannedObjects" : 2,
       "timems" : 0,
       "cursor" : "BasicCursor"
    },
    "ok" : 1
} 
```

然后，您将[$in](http://docs.mongodb.org/manual/reference/operator/in/)运算符与步骤 1 中最近的 15 个日期一起使用。下面是一个示例，用于查找属于上述两个日期之一的所有文档。

```
db.datecol.find({
  "date":{
     "$in":[
        new ISODate("2013-01-03T00:00:00Z"), 
        new ISODate("2013-01-04T00:00:00Z")
      ]
  }
}) 
```

# c++ - 在 C++ 中转换函数指针

> ID：15572611
> 
> 赞同：3
> 
> 时间：2013-03-22T14:19:10.033
> 
> 标签：c++, polymorphism, function-pointers

假设我有两个班级，A 和 B：

```
class A
{
public:
    typedef void (*Handler)( A * a );

    Handler handler;

    void foo() ( handler( this ); }
};

class B : public A
{
}; 
```

假设我有一个功能

```
void bar( B * b ); 
```

那我可以去吗

```
B b;
b.handler = bar;??? 
```

如果我声明`void bar( A * a )`，那么一切都很酷，但是我必须强制`a`转换`B*`为丑陋的。我不能模板化类型定义，那么有没有一种很好的方法呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T14:29:00.927

不，没有。

你违反了 LSP：b.handler() 不能用任何随机 A* 调​​用，而基类承诺它可以。

```
B b;
b.handler = bar; // This doesn't compile!
A a2;
b.handler(&a2); // As this would call bar(B*) with an A* 
```

在这种情况下可以有不同的类型，但只有当参数是逆变的并且返回值是协变的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:33:11.693

这是cdhowie提到的解决方案。您可以定义一个抽象基类：

```
template<typename T>
class AbstractA {
   typedef void (*Handler)( T * a );
   Handler handler;

   void foo() ( handler( (T*) this ); }
}; 
```

然后像这样实现子类：

```
class A : public AbstractA<A> {
    //...
};

class B : public AbstractA<B> {
    //...
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T17:27:50.520

这闻起来像**虚拟功能**工作。

# jquery - 以引导 x 可编辑形式设置最大长度

> ID：15572619
> 
> 赞同：8
> 
> 时间：2013-03-22T14:19:28.780
> 
> 标签：jquery, css, twitter-bootstrap

我需要在引导 xeditable 表单中设置文本框的最大长度。问题是出现的文本框是表单的构建功能，所以我无法将 maxlength 设置为 html 属性。我尝试使用 jquery 但它不工作。（我无法附上截图）请帮我解决这个问题，

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-07-10T09:00:32.047

You can set HTML attributes by overwriting the template:

Such as:

```
$('#your_id').editable({
  tpl: '<textarea maxlength="250"></textarea>'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-02T22:16:46.190

看起来您可以传递一个“inputclass”属性，以便您可以按照自己的方式设置它的样式。覆盖 tpl 选项可能很麻烦，因为应用了自定义库类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T14:56:56.530

好吧，您应该能够`maxLength`使用 jQuery 设置属性，例如：

```
$('#myBox').attr('maxlength', 6); 
```

[这个问题](https://stackoverflow.com/q/6141680/322283)有更多信息。

但很难从你的问题中看出你尝试了什么。请将您尝试过的 jQuery 代码添加到您的问题中，以便我们更好地帮助您。

# java - 我可以从两个整数中设置一个双精度数吗？

> ID：15572622
> 
> 赞同：2
> 
> 时间：2013-03-22T14:19:36.423
> 
> 标签：java, double

我想知道是否可以从两个整数中设置一个双精度数，比如：

```
int i = 1;
int j = 2;

double l = i.j; 
```

所以希望我设置为 1.2。

我目前正在使用循环尝试此操作，但没有任何结果：

```
for (int i = 0; i < 8; i++){
    for(int l = 0; l < 8; l++){
        double piece = i.l;
            ChessSquare chessSquare = new ChessSquare(i, l, piece);
            int[][] square = new int[i][l];
            frame.add(chessSquare);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T14:23:13.567

```
int i=1;
int j=2;
String s = i+"."+j;
double d = Double.parseDouble(s);
System.out.println(d); 
```

这个怎么样？我知道`String`concat 和 stuff 会很烦人（主要是例外），但当然，如果`i`&`j`肯定会是数字，这可以帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T14:23:10.120

这应该可行，尽管我不明白在国际象棋游戏中双打的作用：

```
int i = 1;
int j = 2;
double piece = i + j /  Math.pow(10.0 , String.valueOf(j).length()) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T14:22:04.383

```
int i = 1;
int j = 2;

double l = i + j/Math.pow(10, Math.floor(Math.log10(j) + 1)); 
```

例如：

```
int i = 1234;
int j = 56789;

double l = i + j/Math.pow(10, Math.floor(Math.log10(j) + 1));

System.out.println(l); 
```

**输出：**

```
1234.56789 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T14:22:31.577

这个解决方案怎么样：

```
double l = i + (j / 10d); 
```

它适用于 0 到 9 (10 > j >= 0) 之间的 j 值；

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T14:24:57.277

干得好

```
int i = 1;
int j = 2;

double l = ((double)i*10+j)/10; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T14:26:48.360

如果要将两个整数设置为一个 double，则必须采用另一种方式。

试试这个：

```
int first = 1;
int second = 22;

double secondD = second;
while (secondD > 1) {
  secondD /= 10;
}

double firstD = first;
double result = firstD + secondD;
//result = 1.22 
```

# c - 在 C 中的 readdir() 中识别目录

> ID：15572625
> 
> 赞同：0
> 
> 时间：2013-03-22T13:40:20.117
> 
> 标签：c

如何在 C 中调用 readdir() 时检查 ent.d->name 是文件还是目录，其中 ent 的类型为 struct dirent*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:02:50.660

这就是`S_ISREG()`与.`S_ISDIR()`一起使用时的用途和用途`stat(2)`。有关详细信息，请参见其手册页。

如果您可以忍受不完全符合 POSIX，您可以使用`DT_REG()`和`DT_DIR()`分别检查目录性和规则性。这在`readdir(3)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:10:48.700

另一种方法是尝试在 d_name 上调用 opendir() 并查看它是否返回 null：

```
int isDir(struct dirent *ent)
{
    if (ent && strcmp(ent->d_name, ".") && strcmp(ent->d_name, "..")) // don't include pwd and parent dir
    {
        DIR *isDir = opendir(ent->d_name);
        if (isDir)
            return 1;
    }
    return 0;
} 
```

# share - 博主在 Google Plus 上分享错误的标题

> ID：15572627
> 
> 赞同：1
> 
> 时间：2013-03-22T14:19:44.470
> 
> 标签：share, google-plus, blogger

我将我的博客与 Google plus 连接起来，因此当我在博客上发布新帖子时，会弹出一个 Google plus 以在 Google plus 上分享该帖子。

但是当我在谷歌上分享一篇文章时，我遇到了一个问题，它还分享了博客标题和文章标题，这看起来很难看。我只想分享帖子标题而不是博客标题。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:01:18.787

尝试更改 Blogger 显示帖子标题的方式。

去年我在我的博客上写了一篇[文章](http://www.howtosolutions.net/2012/05/blogger-change-page-title-to-increase-traffic/)，描述了如何在 Blogger 中做到这一点，只需跳到文章的第二部分。

基本上在您的模板中找到这一行：

```
<title><data:blog.pageTitle/></title> 
```

并将其替换为

```
<title>
<b:if cond='data:blog.pageName== ""'>
<data:blog.title/>
<b:else/>
<data:blog.pageName/>
</b:if>
</title> 
```

# java - android ui helper 对象防止活动被 GC

> ID：15572628
> 
> 赞同：0
> 
> 时间：2013-03-22T14:19:49.090
> 
> 标签：java, android, garbage-collection

创建一个接受活动引用的 UIHelper 类是不是一个坏主意？我试图理解和避免内存泄漏，我读过的最大问题之一是不传递上下文。我有这个 UIHelper 类，它引用一个活动并将 TextView 和 EditView 对象构建/返回给我的活动。我在想这会阻止我的活动被 GC'ed 但我不确定。有没有更合适的方法来做到这一点？

这是我的 UIHelper 类

```
public class UIHelper {

    private Activity activity;
    private LinearLayout.LayoutParams inputParms = new LinearLayout.LayoutParams(
            LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
    private LinearLayout.LayoutParams labelParms = new LinearLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    private LinearLayout.LayoutParams valueParms = new LinearLayout.LayoutParams(
            LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
    private static String[] USStates;

    public UIHelper(Activity activity){
        this.activity = activity;
        this.USStates = activity.getResources().getStringArray(R.array.USStates);

        labelParms.setMargins(5, 5, 0, 0);
        inputParms.setMargins(5, 2, 0, 12);
    }

    public View buildEditView(RecordItem recordItem){
        String type = recordItem.getType();

        if(type.equalsIgnoreCase("text") || type.equalsIgnoreCase("phone") || type.equalsIgnoreCase("integer")){

            EditText vTextInput = new EditText(activity);
            vTextInput.setTextSize(20);
            vTextInput.setLayoutParams(inputParms);

            if (type.equalsIgnoreCase("integer")) {
                vTextInput.setInputType(InputType.TYPE_CLASS_NUMBER);
            } else if (type.equalsIgnoreCase("phone")) {
                vTextInput.setInputType(InputType.TYPE_CLASS_PHONE);
            }

            if (!recordItem.getDisplay()) {
                vTextInput.setVisibility(View.GONE);
            }

            vTextInput.setSingleLine();
            recordItem.setEditView(vTextInput);

            return vTextInput;

        }else if(type.equalsIgnoreCase("USState")){

            Spinner vSpinnerInput = new Spinner(activity);
            ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(
                    activity,
                    android.R.layout.simple_spinner_item, USStates);
            dataAdapter
                    .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            vSpinnerInput.setAdapter(dataAdapter);
            recordItem.setEditView(vSpinnerInput);

            return vSpinnerInput;
        }else if(type.equalsIgnoreCase("keyword")){

            Spinner vSpinnerInput = new Spinner(activity);
            recordItem.setEditView(vSpinnerInput);

            return vSpinnerInput;
        }else if(type.equalsIgnoreCase("recordPicker")){
            TextView textView = new TextView(activity);

            textView.setTextSize(20);
            textView.setGravity(Gravity.LEFT);
            valueParms.topMargin = 17;
            textView.setLayoutParams(valueParms);
            //textView.setBackgroundColor(0xFFC2EAFF);
            textView.setBackgroundColor(0xFFFFFFD0);
            textView.setPadding(15, 7, 0, 7);

            recordItem.setEditView(textView);
            return textView;
        } 

        Log.i("C2_UIHelper", "returned a null editView!");
        return null;
    }

    public TextView buildLabelView(RecordItem recordItem){
        TextView vLabel = new TextView(activity);
        vLabel.setText(recordItem.getLabel());
        vLabel.setTextSize(12);
        vLabel.setLayoutParams(labelParms);
        vLabel.setTextColor(0xFF777777);
        return vLabel;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:26:32.133

你可以这样做，有时它会清理你的代码。重要的是，当调用活动的 onDestroy 时，您需要在帮助程序上调用清理方法，将保存上下文的变量设置为 null，因此您不会在两个变量之间保持循环引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:26:46.633

只要您只在 Activity 中保留对 UIHelper 的引用，就应该没有问题。在这种情况下，它将与 Activity 一起被 GC。如果您将引用保留在较长时间的地方，例如在静态变量、ThreadLocals 或应用程序类和服务中的字段中，您只会遇到问题。

# javascript - 在对象内部使用 document.getElementById()，在 JSFiddle 中工作，实际上是 TypeError。为什么？

> ID：15572630
> 
> 赞同：3
> 
> 时间：2013-03-22T14:19:51.157
> 
> 标签：javascript, html, jsfiddle

我有一个可以在 JSFiddle 中运行的代码，但是当我在本地保存 HTML+JS 并在本地测试它时不起作用。我无法弄清楚代码有什么问题。这是我的 JSFiddle

[http://jsfiddle.net/LLUAB/](http://jsfiddle.net/LLUAB/)

这是实际的代码，不是很长

```
<!doctype html>
<html>
<head>
<script type="text/javascript" language="Javascript">
function Composer(foobox) {
    this.foobox = document.getElementById(foobox);

    this.foobox.onkeydown = function(){window.alert("hello")};
}

var myComposer = new Composer("foo");
</script>
</head>
<body>

<textarea id="foo"></textarea>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T14:20:44.100

因为在 JSFiddle 中，您的脚本默认放置在`window.onLoad`事件处理程序中。在您的情况下，`getElementById()`方法无法找到尚未加载的元素。

将所有脚本放在结束`</body>`标记之前，它将起作用：

```
<script type="text/javascript">
    // ...
</script>
</body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:21:11.240

`onLoad`由于此处指定了选项，它可以在 Fiddle 中使用。问题是当`new Composer`line 被触发时，DOM 中还没有这样的元素。将此行包装在`DOMReady`处理程序中 - 或将其调用移动到`<body>`元素的末尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T14:26:02.510

这是因为你的 dom 还没有准备好

```
function Composer(foobox) {
    this.foobox = document.getElementById(foobox);
    alert(this.foobox); --Prints null
    this.foobox.onkeydown = function(){window.alert("hello")};
} 
```

工作代码在这里。[http://jsfiddle.net/LLUAB/1/](http://jsfiddle.net/LLUAB/1/)

# c# - Kinect SDK：骨架闪烁

> ID：15572633
> 
> 赞同：0
> 
> 时间：2013-03-22T14:19:54.407
> 
> 标签：c#, kinect, kinect-sdk

我对这段代码有疑问。

当我使用 时`MoveTo`，我的骨架会在屏幕上滑动。我对原始代码做了一些小改动（[这里](https://stackoverflow.com/questions/13552564/how-to-move-a-kinect-skeleton-to-another-position)）：

*   将骨架位置锁定到特定的 Z 位置
*   增加水平速度 (X)

我使用 XNA 4.0 并将该成员称为 Draw“回调”。

所以，问题是：为什么骷髅会轻弹？

```
private Skeleton MoveTo2(Skeleton skToBeMoved) {
    Joint newJoint = new Joint();
    ///Based on the HipCenter
    float howMuchMoveToX = ((skToBeMoved.Joints[JointType.HipCenter].Position.X - settings_skel_offset_x) * -1) * settings_skel_offset_x_mult;
    float howMuchMoveToY = (skToBeMoved.Joints[JointType.HipCenter].Position.Y - settings_skel_offset_y) * -1;
    float howMuchMoveToZ = (skToBeMoved.Joints[JointType.HipCenter].Position.Z - settings_skel_offset_z) * -1;

    foreach (JointType item in Enum.GetValues(typeof(JointType)))
    {
        newJoint = skToBeMoved.Joints[item];
        SkeletonPoint pos = new SkeletonPoint()
        {
            X = (float)(newJoint.Position.X + (howMuchMoveToX)),
            Y = (float)(newJoint.Position.Y + (howMuchMoveToY)),
            Z = (float)(newJoint.Position.Z + (howMuchMoveToZ)),
        };

        if (XnaBasics.settings_skel_lock_z)
        {
            pos.Z = settings_skel_offset_z;
        }

        newJoint.Position = pos;
        Debug.WriteLine("SkelID: "+skToBeMoved.TrackingId+ " howMuchMoveToX: " + howMuchMoveToX + " oldPosX: " + skToBeMoved.Joints[item].Position.X + " newPosX: " + newJoint.Position.X);
        skToBeMoved.Joints[item] = newJoint;
    }
    return skToBeMoved;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:31:23.917

**解决了**

在从“Draw”回调调用之前，我将成员调用放入“Update”回调中。

正确代码（相关部分）

```
public override void Update(GameTime gameTime)
{
    // Debug.WriteLine("= UPDATE - SkeletonStreamRender");
    if (null == this.Chooser.Sensor || false == this.Chooser.Sensor.IsRunning || KinectStatus.Connected != this.Chooser.Sensor.Status)
    {
        return;
    }

    if (skeletonDrawn || !drawChk)
    {
        using (var skeletonFrame = this.Chooser.Sensor.SkeletonStream.OpenNextFrame(0))
            {
            if (null == skeletonData || skeletonData.Length != skeletonFrame.SkeletonArrayLength)
            {
                skeletonData = new Skeleton[skeletonFrame.SkeletonArrayLength];
            }

            skeletonFrame.CopySkeletonDataTo(skeletonData);

            int counter = 0;
            foreach (Skeleton s in skeletonData)
            {
                if (s.TrackingState == SkeletonTrackingState.Tracked)
                {
                    playersID = s.TrackingId;
                    Skeleton skeleton = MoveTo2(s);
                    skeletonData[counter] = skeleton;
                    continue;
                }
                counter++;
            }

            skeletonDrawn = false;
        }
        [CUT] 
```

来自 Draw 的错误调用

```
public override void Draw(GameTime gameTime)
    {
        // Debug.WriteLine("== DRAW - SkeletonStreamRender");
        // If the joint texture isn't loaded, load it now
        if (null == this.jointTexture)
        {
            this.LoadContent();
        }

        // If we don't have data, lets leave
        if (null == skeletonData || null == this.mapMethod)
        {
            return;
        }

        if (false == this.initialized)
        {
            this.Initialize();
        }

        this.SharedSpriteBatch.Begin();

        foreach (var skeleton in skeletonData)
        {
            if (playersID != skeleton.TrackingId)
                continue;

            switch (skeleton.TrackingState)
            {
                case SkeletonTrackingState.NotTracked:
                    // non tracciato
                    break;
                case SkeletonTrackingState.Tracked:
                    // blocco la posizione Z

                    Skeleton skeleton = MoveTo2(skeletonTmp);

                    // Draw Bones
                    this.DrawBone(skeleton.Joints, JointType.Head, JointType.ShoulderCenter);
                    this.DrawBone(skeleton.Joints, JointType.ShoulderCenter, JointType.ShoulderLeft);
                    this.DrawBone(skeleton.Joints, JointType.ShoulderCenter, JointType.ShoulderRight);
                    this.DrawBone(skeleton.Joints, JointType.ShoulderCenter, JointType.Spine);
                    [CUT] 
```

# jsf - a4j:commandLink 不执行请求

> ID：15572636
> 
> 赞同：0
> 
> 时间：2013-03-22T14:19:55.393
> 
> 标签：jsf, richfaces, ajax4jsf, commandlink

我使用richfaces 4。我从[http://livedemo.exadel.com/richfaces-demo/richfaces/stateAPI.jsf?c=stateAPI](http://livedemo.exadel.com/richfaces-demo/richfaces/stateAPI.jsf?c=stateAPI)举了一个例子。它在 liveemo 网站上运行良好。但对我来说它不起作用。我在 chrome 中看到（通过开发人员工具），当我单击 a4j:commandLink 时，没有对服务器的任何请求。我绝望地在互联网上找到答案。代码有什么问题？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"> 

<h:head></h:head> 
<h:body>

    <center>
    <rich:panel style="width:320px;" id="panel">
        <f:facet name="header">
            <h:panelGroup>
                <h:outputText value="Login"/>
                <a4j:commandLink action="#{userBean.doSwitch}" value="(to register)" immediate="true" 
                    render="panel"  />
            </h:panelGroup>
        </f:facet>

        <rich:message for="action"/>

        <h:panelGrid columns="3"  columnClasses="col1,col2">
            <h:outputText value="username"/>
            <h:inputText value="#{userBean.login}" id="login" required="true">
                <f:validateLength minimum="3" maximum="30"/>
            </h:inputText>
            <rich:message for="login" showSummary="false"/>
                <h:outputText value="password"/>
                <h:inputSecret value="#{userBean.password}" id="password" required="true">
                    <f:validateLength minimum="5" maximum="30"/>
                </h:inputSecret>
                <rich:message for="password"/>
            <h:outputText value="confirm" rendered="#{userBean.state}"/>
            <h:inputSecret value="#{userBean.passwordConfirmation}" 
                    rendered="#{userBean.state}" id="passwordConfirmation" required="true">
                <f:validateLength minimum="5" maximum="30"/>
            </h:inputSecret>
            <rich:message for="passwordConfirmation"/>
        </h:panelGrid>

        <a4j:commandButton action="#{userBean.doLogin}" rendered="#{!userBean.state}" value="login" id="actionL"/>
        <a4j:commandButton action="#{userBean.doRegister}" rendered="#{userBean.state}" value="register" id="actionR"/>

    </rich:panel>
    </center>

</h:body>
</html> 
```

和托管豆

```
@ManagedBean
@SessionScoped
public class UserBean {

    private String login;
    private String password;
    private String passwordConfirmation; 
    private boolean state; 

    public UserBean() {
        super();
        this.state = false;
    } 

    public boolean isState() {
        return state;
    }

    public void setState(boolean state) {
        this.state = state;
    } 

    public String doSwitch(){
        this.setState(true);
        return "loginss";
    }

    public String doLogin() {
        return "done";
    }

    public String doRegister() { 
```

我使用库：

> richfaces-core-impl-4.3.1.Final richfaces-core-api-4.3.1.Final richfaces-components-ui-4.3.1.Final richfaces-components-api-4.3.1.Final sac-1.3 javax.faces -2.1.7 番石榴-14.0.1 cssparser-0.9.7

当我按下 a4j:commandlink 时，我的 Eclipse 中没有任何错误消息。还有我的 web.xml

```
<welcome-file-list>
    <welcome-file>/faces/register.xhtml</welcome-file>
  </welcome-file-list>
  <servlet>
    <servlet-name>FacesServlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>FacesServlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
  </servlet-mapping>

  <context-param>

  <param-name>javax.faces.DEFAULT_SUFFIX</param-name>

  <param-value>.xhtml</param-value>

 </context-param>

 <context-param>

  <param-name>facelets.REFRESH_PERIOD</param-name>

  <param-value>2</param-value>

 </context-param>

 <context-param>

  <param-name>facelets.DEVELOPMENT</param-name>

  <param-value>true</param-value>

 </context-param>

 <context-param>

  <param-name>facelets.SKIP_COMMENTS</param-name>

  <param-value>true</param-value>

 </context-param>

 <context-param>

  <param-name>javax.faces.STATE_SAVING_METHOD</param-name>

  <param-value>server</param-value>

 </context-param>

 <context-param>

  <param-name>org.richfaces.SKIN</param-name>

  <param-value>glassX</param-value>

 </context-param>

 <filter>

  <display-name>Ajax4jsf Filter</display-name>

  <filter-name>ajax4jsf</filter-name>

  <filter-class>org.ajax4jsf.Filter</filter-class>

 </filter> 
```

# datatable - 日期格式为“MM-dd-yyy” 带动态列

> ID：15572644
> 
> 赞同：4
> 
> 时间：2013-03-22T14:20:11.943
> 
> 标签：datatable, date-format, dynamic-columns

我有一个生成动态列的数据表。我有一个要显示的日期列，但采用特定格式

在我没有动态列生成的数据表中...我通过这种方式使日期以特定格式显示

```
<p:dataTable .....>
  <p:column headerText="Date" id="dateID"
                        sortBy="#{iterator.updatedDate}"
                        filterBy="#{iterator.updatedDate}">

                        <h:outputText value="#{iterator.updatedDate}">
                            <f:convertDateTime pattern="MM-dd-yyyy" />
                        </h:outputText>

  </p:column>
</p:dataTable> 
```

我该怎么做才能在动态列的数据表中获得相同的结果...

任何人都可以帮助我解决这个问题...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-07-07T18:13:14.563

如果您的属性是日历类型，则在其后插入 .time。

```
<h:outputText value="#{iterator.updatedDate.time}">
       <f:convertDateTime pattern="MM-dd-yyyy" />
 </h:outputText> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-14T16:58:46.093

您可以在支持 bean 中创建访问器方法，使您能够以所需格式直接获取日期，作为字符串。

举个例子：

```
public class MyBean{

    private Date myDate;

    public Date getMyDate() {
        return myDate;
    }

    public String getMyFormattedDate() {
        return new SimpleDateFormat("dd-MM-yyyy").format(myDate);
    }
} 
```

然后，在您的数据表中，应该调用属性“myFormattedDate”，以便打印格式化的日期。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-04-05T18:03:30.133

您需要将标记替换为以下内容：

```
<p-column headerText="Date" id="dateID">
     <ng-template let-col let-car="rowData" pTemplate="body">
        <span>{{car[col.field] | date: 'MM-dd-yyyy'}}</span>
     </ng-template>
</p-column> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-02T01:07:32.873

我有条件地格式化单元格的内容。如果它将表示来自 Date 对象的数据，我将应用合适的日期格式。

```
<ng-template pTemplate="body" let-rowData let-columns="cols" let-d>
    <tr>
      <td *ngFor="let col of cols">
        {{col.field == 'dateUtc'?  (rowData[col.field] | date: 'dd-MM-yyyy'):rowData[col.field]}}
      </td>
    </tr>
</ng-template> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-05T07:51:59.117

```
<p-column field="date" header="Date">
    <ng-template let-col let-car="rowData" pTemplate="body">
        <span>{{car[col.field] | date: 'MM-dd-yyy'}}</span>
    </ng-template>
</p-column> 
```

见：[https ://www.primefaces.org/primeng/#/datatable/template](https://www.primefaces.org/primeng/#/datatable/templating) [https://angular.io/api/common/DatePipe](https://angular.io/api/common/DatePipe)

# python - Python：DictReader 返回字典列表？

> ID：15572647
> 
> 赞同：-1
> 
> 时间：2013-03-22T14:20:18.000
> 
> 标签：python, csv

我正在使用 csv.DictReader() 读取文件。它实际上返回一个字典列表，而不是单个字典。如何强制它返回单个字典或如何合并它返回的字典列表？

```
def agilent_e8361c_pna_read(file_loc):
    '''
    Load the '.s2p' file in to a dictionary.
    '''

    with open(file_loc) as f:
        # define the fields in the Agilent '.s2p' file
        col_names = ["f","s11","arg_s11","s21","arg_s21","s12","arg_s12","s22","arg_s22"]

        # read the data into a dictionary
        s2p_dicts = csv.DictReader(itertools.ifilter(n_input.is_comment, f), fieldnames=col_names, delimiter=' ')

    return s2p_dict 
```

理想情况下，数据最初会被读入单个字典，并且永远不需要合并。它是一组数据。这些列属于一起并且没有完整集或连贯子集是无意义的。如果 DictReader 不能“以python 方式”实现这一壮举，我将决定只合并字典列表。这不应该是科学家和程序员都想用数据集做的一件不寻常的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T14:32:30.230

如果你想要一个`key:listOfValues`你可以做这样的事情：

```
def transposeDict(listOfDicts):
    """Turn a list of dicts into a dict of lists.  Assumes all dicts in the list have the exact same keys."""

    keys = listOfDicts[0].iterkeys()
    return dict((key, [d[key] for d in listOfDicts]) for key in keys) 
```

或者，在 python2.7 或更高版本中：

```
def transposeDict(listOfDicts):
    """Turn a list of dicts into a dict of lists.  Assumes all dicts in the list have the exact same keys."""

    keys = listOfDicts[0].iterkeys()
    return {key: [d[key] for d in listOfDicts] for key in keys} 
```

当然，这假设列表中的所有 dicts 都具有完全相同的键 - 它们将来自 DictReader。

一般来说，如果不是这样，你需要做类似的事情

```
from collections import defaultdict

def transposeListOfDicts(listOfDicts):
    """Turn a list of dict into a dict of lists"""

    result = defaultdict(list)

    for d in listofDicts:
        for key, value in d.iteritems():
            result[key].append(item)

    return result 
```

如果你想要缺失值的占位符，那么它看起来像这样：

```
def transposeListOfDicts(listOfDicts):
    keys = {}
    for d in listOfDicts:
        keys.update(d.iterkeys())

    return {key: [d.get(key, None) for d in listOfDicts] for key in keys} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T14:27:31.703

`DictReader`获取常规`csv.reader()`返回的每一行，并根据您传入或从第一行读取的字段名将其转换为字典。这是设计使然。

如果您的输入文件只包含*一行*，请通过调用`next()`阅读器返回：

```
def agilent_e8361c_pna_read(file_loc):
    with open(file_loc) as f:
        col_names = ["f","s11","arg_s11","s21","arg_s21","s12","arg_s12","s22","arg_s22"]

        reader = csv.DictReader(itertools.ifilter(n_input.is_comment, f), fieldnames=col_names, delimiter=' ')
        return next(reader) 
```

请注意，`next()`调用应该在`while`块内，否则文件将在您读取之前关闭。

如果您需要将行合并到一个字典中，则需要说明您希望如何查看合并的数据。您可以轻松地将行合并到每个键的列表中：

```
import csv

def agilent_e8361c_pna_read(file_loc):
    with open(file_loc) as f:
        col_names = ["f","s11","arg_s11","s21","arg_s21","s12","arg_s12","s22","arg_s22"]
        result = {k: [] for k in col_names}

        reader = csv.reader(itertools.ifilter(n_input.is_comment, f), fieldnames=col_names, delimiter=' ')
        for row in reader:
            for k, v in zip(col_names, row):
                result[k].append(v)

        return result 
```

那时我们不再需要 a `DictReader`，因为我们没有在这里为每行构建一个字典。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T15:22:11.427

好的，这是最优雅的解决方案，以防任何人遇到此问题。

```
def agilent_e8361c_pna_read(file_loc):
    '''
    Load the '.s2p file in to a dictionary.
    '''

    with open(file_loc) as f:
        # read the data into a dictionary
        rows = csv.reader(itertools.ifilter(n_input.is_comment, f), delimiter=' ')

        # transpose data
        cols = transpose(rows)

        # create a dictionary with intuitive key names
        col_names = ["f","s11","arg_s11","s21","arg_s21","s12","arg_s12","s22","arg_s22"]
        s2p_dict = dict(zip(col_names,cols))

    return s2p_dict

def transpose(l):
    return map(list, zip(*l)) 
```

# c++ - 为什么 switch 只能与 const 值进行比较？

> ID：15572657
> 
> 赞同：0
> 
> 时间：2013-03-22T14:20:56.697
> 
> 标签：c++, switch-statement

我只是好奇：使用如下 switch 语句：

```
switch(myVar)
{
case(label):
    ...
    break;
} 
```

为什么**标签**必须是常量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T14:26:30.847

Andy Prowl 提供了标准中的相关段落，这可能是您想要这样的**原因。**

考虑`switch (c) { case a: ...; break; case b: ...; break; }`。`a==b`如果和 ，你期望会发生`b==c`什么？

如果你用`if ...; if ...`or来写这个`if ...; else if ...`，语义就很清楚了。在的情况下`switch`，没有那么多。当然，您*可以*将其定义为以一种或另一种方式运行，但恕我直言，这会导致代码的行为无法立即清楚，这通常是一件坏事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T14:26:35.060

如果**标签**不是恒定的，它可能会导致歧义，

```
int a = 1, b = 6;

switch(myVar)
{

case a+1;
//etc
break;

case 2;
//etc
break;

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T14:31:36.273

C 中的a 背后的整个想法`switch`是编译器可以“准备”什么`myVar`值去哪里。是的，它仍然可以选择使用 if-else-if-else 类型的操作链，但是给定一个特定的 值`myVar`，每次的结果应该是相同的。当然，如果表达式 in`label`不是常量，则它无法确定每个值在编译时的去向。

如果这不是您想要的，那么您需要在您的代码中执行其他操作 - 表或大量 if 语句将是最明显的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T14:23:25.357

可以使用任何常量表达式。根据 C++11 标准的第 6.4.2 段：

> 条件应为整数类型、枚举类型或类类型。如果是类类型，则条件在上下文中隐式转换（第 4 条）为整数或枚举类型。进行整体促销。switch 语句中的任何语句都可以用一个或多个 case 标签标记，如下所示：
> 
> 案例***常量表达式***：
> 
> **其中*常量表达式*应是转换条件的提升类型的转换常量表达式（5.19）**。同一个 switch 中的任何两个 case 常量在转换为 switch 条件的提升类型后都不应具有相同的值。

# java - 是否可以在同一个 Tomcat 实例上运行多个不同的 war 文件？

> ID：15572663
> 
> 赞同：0
> 
> 时间：2013-03-22T14:21:12.260
> 
> 标签：java, tomcat, vps

我目前正在使用基于云的解决方案 (couldbees.com) 来运行我的 3 个 Web 应用程序（Java，非常小规模）。它运行良好，但成本是一个问题（每月接近 70 欧元，甚至没有使用 2Gb 的 RAM 并且没有存储空间！）。我想切换：采用 VPS 托管解决方案，在其上安装 Tomcat，并在其上运行我的 Web 应用程序。

我的新手问题很简单：您能否在同一台 Tomcat 服务器上同时运行多个 Web 应用程序，安装在 VPS 上？我想是这样，但我只是想得到确认以确保！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:24:10.610

是的你可以。它们将在不同的上下文路径上运行。

所以，

```
http://yourdomain.com/app1
http://yourdomain.com/app2 
```

您还可以根据您可能或可能不可用的配置选项设置子域以路由到那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:26:22.023

这是使用 Apache2 托管多个网站的[教程](http://www.debian-administration.org/articles/412)

# c++ - 具有成员函数的 C++ 结构与具有公共变量的类

> ID：15572665
> 
> 赞同：29
> 
> 时间：2013-03-22T14:21:18.957
> 
> 标签：c++, class, struct

这确实是一个良好形式/最佳实践的问题。我使用 C++ 中的结构来形成旨在基本上保存数据的对象，而不是创建一个具有大量访问器方法的类，这些方法除了获取/设置值之外什么都不做。例如：

```
struct Person {
    std::string name;
    DateObject dob;
    (...)
}; 
```

如果你想象那里还有 20 个变量，那么将它写成一个包含私有成员和 40 多个访问器的类会很痛苦，而且对我来说似乎很浪费。

但有时，我可能还需要为数据添加某种最小功能。在示例中，假设我有时也需要基于 dob 的年龄：

```
struct Person {
    std::string name;
    DateObject dob;
    (...)
    int age() {return calculated age from dob;}
} 
```

当然，对于任何复杂的功能，我都会创建一个类，但是对于像这样的简单功能，这是“糟糕的设计”吗？如果我确实使用了一个类，将数据变量保留为公共类成员是一种不好的形式，还是我只需要接受它并使用一堆访问器方法创建类？我了解类和结构之间的区别，我只是在询问最佳实践。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-22T14:43:45.663

我认为这里有两个重要的设计原则需要考虑：

1.  **如果该类有一些不变量，则通过接口隐藏该类的表示。**

    当该类存在无效状态时，该类具有不变量。该类应始终保持其不变性。

    考虑一种`Point`表示 2D 几何点的类型。这应该只是`struct`公共`x`和`y`数据成员。没有无效点之类的东西。`x`和值的每个组合`y`都非常好。

    在 a 的情况下`Person`，它是否具有不变量完全取决于手头的问题。您认为空名称之类的东西是有效名称吗？可以`Person`有出生日期吗？对于你的情况，我认为答案是肯定的，你的班级应该让成员公开。

    请参阅：[类应该强制执行不变量](http://www.artima.com/intv/goldilocks3.html)

2.  **非友元非成员函数提高了封装性。**

    没有理由将您的`age`函数实现为成员函数。的结果`age`可以使用 的公共接口计算`Person`，所以它没有理由成为成员函数。`Person`将其放置在与参数相关的查找相同的命名空间中。ADL 找到的函数是该类接口的一部分；他们只是无权访问私人数据。

    如果您确实将其设为成员函数，并且有一天向 引入了一些私有状态`Person`，那么您将有不必要的依赖。突然`age`拥有比它需要的更多的数据访问权限。

    请参阅：[非成员函数如何改进封装](http://www.drdobbs.com/cpp/how-non-member-functions-improve-encapsu/184401197)

所以这就是我将如何实现它：

```
struct Person {
  std::string name;
  DateObject dob;
};

int age(const Person& person) {
  return calculated age from person.dob;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-22T14:24:37.573

在 C++ 中，Structs 是类，*唯一*的区别（至少我能想到）是 Structs 中的成员默认情况下是公共的，但在类中它们是私有的。这意味着完全可以按照您的方式使用 Structs -[这篇文章](http://blog.stevedoria.net/20050913/differences-between-cpp-classes-and-structs)很好地解释了这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T14:29:50.070

在 C++ 中，结构和类之间的唯一区别是结构在默认情况下是公开可见的。一个好的指导方针是将结构用作纯旧数据 (POD)，它只保存数据并在需要更多功能（成员函数）时使用类。

您可能仍然想知道是在类中只使用公共变量还是使用成员函数；考虑以下情况。

假设你有一个类`A`，它的函数`GetSomeVariable`只是一个私有变量的 getter：

```
class A
{
    double _someVariable;

public:
    double GetSomeVariable() { return _someVariable; }
}; 
```

如果二十年后，该变量的含义发生变化，并且您必须将其乘以 0.5，该怎么办？使用 getter 时，很简单；只需返回乘以 0.5 的变量：

```
 double GetSomeVariable() { return 0.5*_someVariable; } 
```

通过这样做，您可以轻松维护并轻松修改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T14:33:09.693

如果你想要一些数据持有者，那么更喜欢没有任何 get/set 方法的结构。

如果还有更多内容，例如本例中的“人”。

1.  它模拟现实世界的实体，
2.  有明确的状态和行为，
3.  与外部世界互动，
4.  展示与其他实体的简单/复杂关系，
5.  它可能会随着时间的推移而演变，

那么它是一个类的完美候选人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T14:26:51.450

“仅将结构用于携带数据的被动对象；其他一切都是类。”

说[谷歌指南](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml#Structs_vs._Classes)，我这样做并发现它是一个很好的规则。除此之外，我认为你可以定义自己的语用学，或者如果它真的有意义的话，可以偏离这个规则。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T14:31:47.973

我不想在这里引发一场圣战；我通常以这种方式区分它：

*   对于 POD 对象（即，仅数据，没有暴露行为）声明内部公开并直接访问它们。关键字的使用`struct`在这里很方便，也可以作为对象使用的提示。
*   对于非 POD 对象，声明内部私有并定义公共 getter/setter。在这些情况下，关键字的使用`class`更自然。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-05T21:40:41.453

只是为了消除一些人的困惑！而且采摘方便！这里有几点！

在**结构**中！您可以拥有**封装**和**可见性**运算符（**私有**或**公共**）！就像你上课一样！

因此，有人说或您可能在网上找到的说法是：其中一个区别是结构没有可见性运算符和隐藏数据的能力，**这是错误的！**

您可以像在类中一样拥有方法！

运行下面的代码！你可以检查它是否编译得很好！并且运行良好！整个**结构**就像**class**一样工作！

主要区别在于可见性模式的默认设置！

结构公开！默认情况下为私人课程！

```
#include<iostream>
#include<string>

using namespace std;

int main(int argv, char * argc[]) {
    struct {
        private:
            bool _iamSuperPrivate = true;
            void _sayHallo() {
                cout << "Hallo mein Bruder!" << endl;
            }
        public:
            string helloAddress = "";
            void sayHellow() {
                cout << "Hellow!" << endl;

                if (this->helloAddress != "") {
                    cout << this->helloAddress << endl;
                }

                this->_sayHallo();
            }
            bool isSuperPrivateWorking() {
                return this->_iamSuperPrivate;
            }
    } testStruct;

    testStruct.helloAddress = "my Friend!";
    testStruct.sayHellow();

    if (testStruct.isSuperPrivateWorking()) {
        cout << "Super private is working all well!" << endl;
    } else {
        cout << "Super private not working LOL !!!" << endl;
    }

    return 0;
} 
```

[![在此处输入图像描述](../Images/c7a1d446b349d898dcc24de9a82e572b.png)](https://i.stack.imgur.com/Fw0xd.png)

在记忆中他们是一样的！

我没有检查自己！但有人说，如果你做同样的事情！编译后的汇编代码在**结构**和**类**之间是一样的！（被检查！）

**参加任何课程**并将名称更改为**typedef struct**！您会看到代码仍然可以正常工作！

```
class Client {

}

Client client(...); 
```

=>

```
typedef struct Client {
 ....
} Client;

Client client(...); 
```

如果你这样做，一切都会一样！至少我知道在 gcc 中会这样做！

你可以测试！在您的平台上！

# wpf - 绑定到 DataGridColumnHeader.Command

> ID：15572666
> 
> 赞同：3
> 
> 时间：2013-03-22T14:21:20.523
> 
> 标签：wpf, xaml, mvvm, binding, datagrid

我需要使用`Command`on`DataGridColumnHeader`对我的数据进行排序。标准`DataGrid`排序功能对我来说是不够的，因为`DataGrid`. 我的虚拟机中什至没有所有数据。（这是不可能的......它太多了）我只是从服务器请求具体的数据页面。现在我还想从排序数据中获取具体页面。

所以我这样做了：

```
 <DataGrid ItemsSource="{Binding Path=Entities, Mode=OneWay}" CanUserSortColumns="False" SelectionMode="Single" SelectedItem="{Binding Path=SelectedEntity}">
      <DataGrid.ColumnHeaderStyle>
           <Style TargetType="{x:Type DataGridColumnHeader}">
               <Setter Property="Command" Value="{Binding Path=MyCommand}"/>
               <Setter Property="CommandParameter" Value="{Binding Path=Content, RelativeSource={RelativeSource Self}}"/>
           </Style>
      </DataGrid.ColumnHeaderStyle>
      <DataGrid.Columns>
           <DataGridTemplateColumn >
                <DataGridTemplateColumn.Header>
                     <DataGridColumnHeader Content="Column1" />
                 </DataGridTemplateColumn.Header>
                 <DataGridTemplateColumn.CellTemplate>
                      <DataTemplate>
                          <TextBox Text="{Binding Path=Property1}"/>
                      </DataTemplate>
                 </DataGridTemplateColumn.CellTemplate>
           </DataGridTemplateColumn>
      </DataGrid.Columns>
 </DataGrid> 
```

它工作得很好。现在我只想`AutoGenerateColumns="True"`不幸的是它不再起作用了。有没有人可以**解释**为什么它不适用于自动生成的列并为我提供一些解决方案？先感谢您！

**编辑**

这可能与跟随也不起作用的事实有关。

```
<DataGrid ItemsSource="{Binding Path=Entities, Mode=OneWay}" CanUserSortColumns="False" SelectionMode="Single" SelectedItem="{Binding Path=SelectedEntity}">
  <DataGrid.ColumnHeaderStyle>
       <Style TargetType="{x:Type DataGridColumnHeader}">
           <Setter Property="Command" Value="{Binding Path=MyCommand}"/>
           <Setter Property="CommandParameter" Value="{Binding Path=Content, RelativeSource={RelativeSource Self}}"/>
       </Style>
  </DataGrid.ColumnHeaderStyle>
  <DataGrid.Columns>
       <DataGridTemplateColumn>
            <!-- HERE IS THE CHANGE -->
            <DataGridTemplateColumn.Header>Column1</DataGridTemplateColumn.Header>
             <DataGridTemplateColumn.CellTemplate>
                  <DataTemplate>
                      <TextBox Text="{Binding Path=Property1}"/>
                  </DataTemplate>
             </DataGridTemplateColumn.CellTemplate>
       </DataGridTemplateColumn>
  </DataGrid.Columns> 
```

但是应用了样式。我知道这一点，因为我尝试过：

```
<Style TargetType="{x:Type DataGridColumnHeader}">
   <Setter Property="Background" Value="Tomato"/> <!-- beautiful tomato background -->
   <Setter Property="Command" Value="{Binding Path=MyCommand}"/>
   <Setter Property="CommandParameter" Value="{Binding Path=Content, RelativeSource={RelativeSource Self}}"/>
</Style> 
```

列标题有番茄背景，但命令不起作用。

**编辑2**

以下是解决方案。显然`DataGridColumnHeaders`不继承 DataContext，因为当我更改命令绑定时，一切都会再次运行。

```
<Setter Property="Command" Value="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}},
                                Path=DataContext.MyCommand}"/> 
```

但我仍然不太明白为什么。所以回答详细解释将获得赏金。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:34:30.867

[DataGridColumnHeader](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.datagridcolumnheader.aspx)是 DataGridColumn.Header 的容器项[，](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridcolumn.header.aspx)例如，[ListBoxItem](http://msdn.microsoft.com/en-us/library/system.windows.controls.listboxitem.aspx)是[ListBox](http://msdn.microsoft.com/en-us/library/system.windows.controls.listbox.aspx)的[ItemsSource](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemssource.aspx)中每个项的容器项。

由于 ListBoxItem 的 DataContext 将被设置为 ListBox 的 ItemsSource 中的一个项目，因此 DataGridColumnHeader 的 DataContext 将被设置为 DataGridColumn.Header 对象是很自然的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T11:11:03.103

正如您的发现所暗示的，自动生成的列将具有一个 DataGridColumn.Header，其 DataContext 设置为字符串标题对象。

如果您不使用自动生成的列，而是指定 DataGridTemplateColumn 和 DataGridTemplateColumn.Header，则 DataContext 的标准继承仍然适用，这就是它第一次为您工作的原因。

编辑：快速搜索没有提供描述此行为的即时结果。但是，验证事实并不难：

![在此处输入图像描述](../Images/004754727c540d86c7d5c23b9fa6ca7c.png)

xml:

```
<DataGrid ItemsSource="{Binding MyClasses}" AutoGenerateColumns="True" MouseRightButtonUp="DataGrid_MouseRightButtonUp_1" >
    <DataGrid.Columns>
        <DataGridTemplateColumn>
            <DataGridTemplateColumn.Header>
                <DataGridColumnHeader Content="Name (Manual Column)" />
            </DataGridTemplateColumn.Header>
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Path=Name}"/>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

视图模型：

```
public class ViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    private void OnPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    private ObservableCollection<Class1> _myClasses;
    public ObservableCollection<Class1> MyClasses { get { return _myClasses; } set { _myClasses = value; OnPropertyChanged("MyClasses"); } }

    public ViewModel()
    {
        MyClasses = new ObservableCollection<Class1>()
        {
            new Class1() { Name = "Andy" },
            new Class1() { Name = "Mark" },
            new Class1() { Name = "Peter" },
            new Class1() { Name = "Gregor" },
            new Class1() { Name = "Jenny" }
        };
    }
} 
```

后面的代码（仅用于说明目的）：

```
private void DataGrid_MouseRightButtonUp_1(object sender, MouseButtonEventArgs e)
{
    if (e.OriginalSource is Microsoft.Windows.Themes.DataGridHeaderBorder)
    {
        object dataContext = ((Microsoft.Windows.Themes.DataGridHeaderBorder)e.OriginalSource).DataContext;
    }
} 
```

右键单击手动列标题（文本块外）会生成以下数据上下文：

![在此处输入图像描述](../Images/a2851fc5b3ebe67ef2606301aa7bda46.png)

右键单击自动生成的列标题：

![在此处输入图像描述](../Images/b5af151ce97dce0e4d3b9c40c2869c66.png)

# eclipse - Eclipse - 从 git 存储库中排除根目录？

> ID：15572667
> 
> 赞同：6
> 
> 时间：2013-03-22T14:21:23.210
> 
> 标签：eclipse, git, eclipse-plugin, egit

我正在尝试使用 EGit 为我的 Eclipse 项目设置一个 git 存储库。但是，我无法从存储库中排除根/项目目录。也就是说，我的项目具有以下结构：

```
ProjectDirectory
    src
    war
    etc 
```

我希望存储库包含`src`、`war`和`etc`，但不包含父目录`ProjectDirectory`。那是因为如果我想在我的工作区中克隆项目的副本，`ProjectDirectory2`，第二个项目的存储库现在将尝试创建第二个根目录，`ProjectDirectory`. 不幸的是，当我尝试使用 EGit 为项目添加存储库时，我似乎只能在项目文件夹本身上使用 Team > Share Project，而且我似乎看不到从存储库中排除根目录在 Eclipse 中。

关于如何使用 EGit 跳过存储库中的顶级目录的任何建议？我更喜欢能够在 Eclipse 中做所有事情，但如果没有办法，有没有办法在 git 之外以这种方式设置存储库，然后仍然可以在 git on 中定期使用 git 控件存储库跳过顶级目录？非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-12-18T16:51:30.097

简短的回答是EGIT + M2E是**可能的**

诀窍是在配置 git repo 窗口中进行共享项目时 ->

确保在项目的父文件夹中使用或创建存储库被勾选

并确保单击创建存储库按钮

这样做的主要目的是在您的项目根目录中创建 .git 文件夹

不在您的项目根目录之上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-09T21:07:10.313

这是我的解决方案。虽然不是特别优雅 - 步骤都很简单，但它很有效，并且可以在大约 10 分钟内完成：

1.  将远程 git repo 克隆到本地文件系统中 .. 例如： `~/git/project_repo_root`

2.  像往常一样创建你的eclipse项目..例如： `~/workspace/eclipse_project_root`

3.  从 Eclipse 中删除项目（但不是文件系统！）

4.  打开文件管理器，将刚刚创建的eclipse项目从~/workspace/root移动到~/git

    `mv ~/workspace/eclipse_project_root ~/git/`

5.  将 .git/ 文件夹从 repo 文件夹移动到 eclipse 项目根文件夹：

    `mv ~/git/project_repo_root/.git ~/git/eclipse_project_root`

6.  使用 shell 进入 /eclipse_project_root/ 并对你想要在 repo 中的所有文件执行常用的命令行命令：

    `git add <abc>; .. commit; .. push`

7.  返回 Eclipse 并转到 Git Perspective，然后单击“将现有的本地 Git 存储库添加到此视图”。选择你正在使用的 git repo，一旦你说好的，视图应该更新为该 repo 的条目。

8.  在视图中看到本地 repo 后，您可以右键单击它并选择 Import Projects

9.  回到您的主要开发视角（Java 等），您应该会在包资源管理器视图的根节点上看到带有 Git 标记的项目。

~~~~~

此时，您应该会看到刚刚移动的 eclipse 项目文件夹*（在此处描述的示例中到 ~/git）*

我意识到这比我希望的答案更冗长，但是对于这个特殊的挑战/解决方案..我不知道有更直接的方法来做到这一点。

至于上面描述的帖子，您应该始终包含 eclipse 项目根目录。现实是一些项目/客户端/等要求 git repo 不包含根文件夹。所以有时*需要*这样的解决方案

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-28T09:52:04.713

如果您有 maven 项目，您通常希望创建一个没有 egit 创建的项目文件夹的存储库。根据我的经验，使用 egit 插件是不可能的。但可以从 git 命令行轻松完成。

首先将现有的 eclipse/maven 项目从 eclipse 工作区移动到 git 文件夹中（这也是 egit 插件所做的）：

```
mv myproject ~/git/ 
```

接下来创建一个新的 git 存储库

```
cd ~/git/myproject
git init 
```

现在创建一个 .gitignore 文件并将其放入新的存储库文件夹（~/git/myproject/.gitignore）。这是 .gitignore 文件的示例：

```
# ignore all bin directories
# matches "bin" in any subfolder
bin/

# ignore all target directories
target/

# ignore all files ending with ~
*~ 

# ignore eclipse directories and project files
.settings/
.project
.classpath 
```

最后用你的项目内容初始化你的新存储库

```
git add *
git commit -m "My initial commit message" 
```

而已。现在您可以重新启动 eclipse 并从新的 git 存储库重新导入项目。进入您的 Eclipse egit 存储库视图并选择“导入现有项目”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T14:53:42.457

您应该出于多种原因提交项目根目录：

*   如果您只提交项目的子目录，您将错过隐藏在项目根目录下的文件和文件夹（例如 .settings 目录和其他目录）。这些也需要提交，否则您的项目将丢失信息并且可能不会在另一台机器上导致相同的结果。
*   您希望在同一个工作空间中第二次克隆同一个存储库的愿望听起来很像您应该重新阅读有关 git 分支的信息。在 git 中，分支之间的切换是在眨眼之后完成的，因此在处理项目的不同功能、版本或其他不同版本时应该使用分支。
*   Eclipse 项目名称和磁盘上的底层文件夹名称不需要相同（创建新项目时请注意复选框“使用默认位置”）。因此，您可以签出具有不同名称的项目的第二个克隆。
*   如果您稍后将更多项目添加到您的工作区（例如测试项目），您将无法轻松地将它们共享到同一个 git 存储库中，因为这些附加项目的内容会与存储库中第一个项目的子目录混淆。

# mysql - 数据规范化 - mysql

> ID：15572673
> 
> 赞同：1
> 
> 时间：2013-03-22T14:21:33.207
> 
> 标签：mysql, normalization

我搜索了一下，因为我的情况与“多个表与逗号分隔值”相同，但我的情况不同。我已经完成了这两种做法，但是对于一个新的要求，我有点困惑，因为包含逗号分隔的列的列大约是 3-4 ......所以人们会建议......

```
Example (Existing Scenario):

Student Table
---------------------
id name subjectsEnrolled gamesEnrolled       BooksIssued             absentOn

1  Naya yoga, maths      cricket, football    aka#date, baka#date,caka#date   20121010,20130103
2  sait science, botany  football,chess,abc   prea#date, sunbaka#date      20121010,20130103 
```

我认为可能的修复

## 学生表（作为学生主数据）

```
id name moredetailsofstudent like address & blah blah

1  Naya              
2  Naya 
```

然后有另一个表缺席表

```
StudentId absentOn
1  20121010
1  20121011
2  20121010
2  20121011
1  20121012 
```

然后让另一个表掌握具有唯一 ID 的书籍和书籍IssueTable 的“booksTable”

## 书籍问题表

```
bookid issuedby dated
4       1       a date
2       1       a date 
```

对于游戏（2 张桌子）和主题（2 张桌子）几乎相同，并且存储方式与我在上面对书籍所做的相同。

```
gameid enrolledby 
4       1      
2       12
4       10      
3       12 
```

等等...

我说得对吗……这就是我想从我们的数据库和编码专家那里知道的。

注意：我不是在创建学校管理...这只是一个示例...因为我无法发布真实数据。在实际场景中，我在主学生表中有太大的数据，比如 10-20 lac ...所以缺席表、booksIssueTable、gamesEnollTable、subjectenrollTable 可以轻松拥有 10 条 lac 记录 * 1-10 ...= 每个大约 30-90 lacs使用这个解决方案。请建议。

## 更新

到目前为止，我已经知道我正在朝着正确的方向前进，有人会建议让日期缺席吗？我是否也应该为日期创建一个主表，然后使用它的 dateid 来绑定缺席表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:17:50.180

是的，规范化比存储逗号分隔值更好。我在这里对逗号分隔值的缺陷给出了一个流行的答案： [在数据库列中存储分隔列表真的那么糟糕吗？](https://stackoverflow.com/questions/3653462/is-storing-a-delimited-list-in-a-database-column-really-that-bad/3653574#3653574)

至于您的其他问题，不，我不会为简单的日期值制作查找表。可能有用的场景是 AbsentTable 中有许多行具有相同的日期，并且您希望通过在其他地方更新单行来更改所有这些行的值。但我希望您的 AbsentTable 永远不需要这样做。

顺便说一句，使用 an`id`来引用另一个表中的条目*与 normalization 无关*。自然值既可以作为被引用表的主键，也可以作为被引用表的外键，仍然符合范式。

您可能还对我在《[SQL 反模式：避免数据库编程的陷阱》](http://pragprog.com/book/bksqla/sql-antipatterns)一书中所写的关于逗号分隔值和数据库规范化的内容感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:30:25.807

您正在做的正是期望得到解决问题的方法，即使有大量数据，它也会达到这样的程度：拥有适当的 mn 表将比在相同字段中使用逗号分隔的值改进得多。

很好地为自己找到解决方案。不能提出更好的建议。

# image - 如何在 magento cms 编辑器中插入图像

> ID：15572675
> 
> 赞同：1
> 
> 时间：2013-03-22T14:21:34.397
> 
> 标签：image, magento, insert, editor

我正在尝试使用管理面板中的 magento 中的编辑器插入图像。图片上传没有问题，但上传后我点击插入图片。但路径没有进入弹出 src url。所以我无法将图像放入编辑器。

请任何人帮助我。

谢谢，壁画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T13:00:06.150

我认为问题在于您无法像应有的那样添加图像。这个问题与 Firefox 有关，至少在我的情况下是这样。

如果您在 Chrome 或 IE 中选择图像，它可以工作。在 Firefox 中它没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:24:47.453

1.  像你说的上传图片
2.  在左栏中选择正确的文件夹，然后单击右栏中的图像。
3.  按右上角的插入图像。
4.  请参阅类似代码：`<img src="{{media url="wysiwyg/filename.jpg"}}" alt="" />`出现在文本区域中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-05T03:26:48.063

根据您的描述，一旦您在图像管理器中看到上传的图像...双击图像，它将使用自定义 URL 进入您的编辑器

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T14:28:54.090

1.  将您的图像放在`http://magento.com/images`目录中。
2.  单击显示/隐藏编辑器。
3.  更改/编辑`src`标签，例如`src="/images/banner1.jpg"`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-29T19:48:36.560

这是最好的方法：

```
<img src="{{skin url='images/YOUR-IMAGE.jpg'}}" /> 
```

# c# - 如果值包含＆符号，如何在 C# 中更正解析查询字符串？

> ID：15572682
> 
> 赞同：2
> 
> 时间：2013-03-22T14:22:02.153
> 
> 标签：c#

我需要解析查询字符串：`?artist=singer1 & singer2&song=name song`

如果 value 包含像“singer1＆singer2”这样的＆符号，则静态方法`HttpUtility.ParseQueryString`无法按我想要的方式工作。

例如：

```
string qs = "?artist=singer1 & singer2&song=name song"; 
NameValueCollection query = HttpUtility.ParseQueryString(qs); 
```

结果是：

> 1.  艺术家=歌手1
> 2.  空=歌手2
> 3.  歌曲=名字歌曲

我想要结果

```
artist = singer 1 & singer2
song = name song 
```

任何的想法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-22T14:26:50.003

您的一个值中间的与号( `&`) 正在抛弃解析器，因为它是一个保留符号。用它的数字代码代替它：

```
string qs = "?artist=singer1+%26+singer2&song=name song"; 
NameValueCollection query = HttpUtility.ParseQueryString(qs); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-22T14:26:35.837

您的问题是`&`在查询字符串中具有特殊含义，即分隔参数。在您感知的参数`&`中间*实际上*被解析为*参数分隔符*。构建 URL 时需要对 URL 进行编码。`artist`**`&`**

 **例如，一个正确的查询字符串是：

```
?artist=singer1+%26+singer2&song=name+song 
```

（空格通常可以编码为`+`或`%20`，但这是另一个讨论的主题。）

您可以`HttpUtility.UrlEncode()`在构建查询字符串组件时使用，以确保正确转义结果。例如，您可以像这样构建查询字符串：

```
static void Main()
{
    var values = new NameValueCollection();
    values["artist"] = "singer1 & singer2";
    values["song"] = "name song";

    Console.WriteLine(CreateQueryString(values));
}

static string CreateQueryString(NameValueCollection values)
{
    if (values == null) { throw new ArgumentNullException("values"); }

    return string.Join(
        "&",
        values.AllKeys.Select(key => HttpUtility.UrlEncode(key) + "=" +
                                     HttpUtility.UrlEncode(values[key]))
                      .ToArray());
} 
```

换句话说，问题发生*在您构建查询字符串*时，而不是在您尝试解析它时。解析它时，您已经有一个语义不正确的查询字符串；此时您无能为力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T14:30:53.570

如果你想要艺术家 =`singer1 & singer2`你需要`&`在你的查询字符串中转义或编码。

例如，如果我向 Google 询问`fred & blotts` 结果查询字符串包含`&q=fred+%26+blotts`而不是`&q=fred+&+blotts`

见[https://www.rfc-editor.org/rfc/rfc3986#page-12](https://www.rfc-editor.org/rfc/rfc3986#page-12)**

# unix - 为什么 awk 函数只返回文件的最后一行？

> ID：15572685
> 
> 赞同：1
> 
> 时间：2013-03-22T14:22:07.437
> 
> 标签：unix, awk

我正在使用 awk 重新格式化文件中的某些字段，并使用 awk 函数来修复一个字段值（如果它是负数）。这是我的 awk 命令：

```
awk 'function fix_neg(value) {\
if(value < 0)\
return '$new_value'\
else\
return value\
} END { print $2,$1,fix_neg($3) }' input_file.txt 
```

其中 $new_value 在此调用之前设置。我不明白为什么这只返回重新格式化的 input_file.txt 的最后一行（其中包含多行数据）。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:29:04.603

试试这个：

```
awk -v newV="$new_value" '{print $2,$1,($3<0?newV:$3)}' inputfile 
```

在您的程序中，您只获得了最后一行数据，因为您将 print 语句放在了`END{..}`块中。它在处理整个文件后触发，而不是针对每一行。删除`END`它，它会按您的预期工作。

# excel - Simpe VBA sub：函数启动时出错，但之后没有

> ID：15572686
> 
> 赞同：2
> 
> 时间：2013-03-22T14:22:07.980
> 
> 标签：excel, email, vba

我有一个简单的功能来选择一个固定范围并准备电子邮件，它可以工作......但只有在第二次运行该功能之后。这个问题在我打开 Excel 电子表格后立即发生，然后我会“结束”脚本并再次运行它，然后它就像一个魅力一样工作。

非常感谢您的帮助，非常想了解错误发生的原因。

错误：**运行时错误 1004：工作表类的选择方法失败。**

在调试时，“.Parent.Select”行会从下面的脚本中突出显示。

```
Sub Select_Range_now()
   Dim Sendrng As Range
   Dim EndOfLine As Integer

   EndOfLine = Find_First() - 1
   Set Sendrng = Worksheets("Output").Range("B1:I" & EndOfLine)

   ActiveWorkbook.EnvelopeVisible = True

   With Sendrng
       .Parent.Select
       .Select

       With .Parent.MailEnvelope
           With .Item
               .SentOnBehalfOfName = "groupemail@someemail.com"
               .To = "someothergroupemail@someemail.com"
               .CC = ""
               .Subject = "Report"
           End With
       End With
   End With
End Sub 
```

## **编辑：**新发现：

单击“邮件收件人”选项时，我得到这个 msgbox：[msgbox 对话框](http://imagebin.org/251272)

**电子邮件：您可以将整个工作簿作为电子邮件的附件发送，也可以将当前工作表作为电子邮件的正文发送。**

*   **将整个工作簿作为附件发送**
*   **将当前工作表作为消息正文发送**

再次单击该按钮将不会再次提示，并且脚本会立即运行。我猜在第一次运行时似乎无法处理这个对话框，或者什么！

如果有人需要知道 Find_First() 函数是什么，它用于查找文本 ENDOFLINE 以便我可以计算我的选择范围：

```
Function Find_First() As String
   Dim FindString As String
   Dim Rng As Range
   FindString = "ENDOFLINE"

   With Sheets("Output").Range("A:I")
       Set Rng = .Find(What:=FindString, _
                       After:=.Cells(.Cells.Count), _
                       LookIn:=xlValues, _
                       LookAt:=xlWhole, _
                       SearchOrder:=xlByRows, _
                       SearchDirection:=xlNext, _
                       MatchCase:=False)
       If Not Rng Is Nothing Then
           'Application.Goto Rng, True
           'MsgBox "row number: " & Rng.Row
           Find_First = Rng.Row
       Else
           'MsgBox "Nothing found"
       End If
   End With
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:08:52.247

这应该可以满足您的需求。

[修改自我几周前在 SuperUser 上所做](https://superuser.com/questions/552331/excel-macro-to-extract-header-and-rows-then-email/552770#552770)的一个答案，由于 Ron de Bruin，他的一些代码在`RangeToHTML()`下面的函数中被改编了。

```
Sub PublishObjectFromFilteredRange()
'An example of applying autofilter to sheet
' and setting range variable = to the autofiltered cells/visible cells
Dim ws As Worksheet
Dim pObj As PublishObject
Dim sndRange As Range
Dim OutApp As Object
Dim outmail As Object 'mail item

Set ws = Sheets("Sheet1")
Set sndRange = ActiveWorkbook.Sheets(1).Range("D7:G10") '<--- Modify this line to use your sendRange

'Create & publish the PublishObject
'   Change the Filename to a location that works for you...
Set pObj = ActiveWorkbook.PublishObjects.Add( _
    SourceType:=xlSourceRange, _
    Filename:="C:\Users\david_zemens\Desktop\publish.htm", _
    Sheet:="Sheet1", _
    Source:=sndRange.Address, _
    HtmlType:=xlHtmlStatic)

    pObj.Publish True

'Create an instance of Outlook to send the email:
    Set OutApp = CreateObject("Outlook.Application")

    Set outmail = OutApp.CreateItem(0)

    With outmail
        .SentOnBehalfOfName = "Me!"
        .To = "email@address"
        .CC = "someoneelse@address"
        .Subject = "Report"
        .HTMLBody = RangetoHTML(sndRange)
        .Send 'Or use .Display to show the message.
    End With

    OutApp.Quit

End Sub

Function RangetoHTML(rng As Range)
' Changed by Ron de Bruin 28-Oct-2006
' Working in Office 2000-2010
Dim fso As Object
Dim ts As Object
Dim TempFile As String
Dim TempWB As Workbook

TempFile = Environ$("temp") & "/" & Format(Now, "dd-mm-yy h-mm-ss") & ".htm"

'Copy the range and create a new workbook to past the data in
rng.Copy
Set TempWB = Workbooks.Add(1)
With TempWB.Sheets(1)
    .Cells(1).PasteSpecial Paste:=8
    .Cells(1).PasteSpecial xlPasteValues, , False, False
    .Cells(1).PasteSpecial xlPasteFormats, , False, False
    .Cells(1).Select
    Application.CutCopyMode = False
    On Error Resume Next
    .DrawingObjects.Visible = True
    .DrawingObjects.Delete
    On Error GoTo 0
End With

'Publish the sheet to a htm file
With TempWB.PublishObjects.Add( _
     SourceType:=xlSourceRange, _
     Filename:=TempFile, _
     Sheet:=TempWB.Sheets(1).Name, _
     Source:=TempWB.Sheets(1).UsedRange.Address, _
     HtmlType:=xlHtmlStatic)
    .Publish (True)
End With

'Read all data from the htm file into RangetoHTML
Set fso = CreateObject("Scripting.FileSystemObject")
Set ts = fso.GetFile(TempFile).OpenAsTextStream(1, -2)
RangetoHTML = ts.readall
ts.Close
RangetoHTML = Replace(RangetoHTML, "align=center x:publishsource=", _
                      "align=left x:publishsource=")

'Close TempWB
TempWB.Close savechanges:=False

'Delete the htm file we used in this function
Kill TempFile

Set ts = Nothing
Set fso = Nothing
Set TempWB = Nothing
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:54:49.650

尝试

```
Sub Select_Range_now()

  ....

  Set Sendrng = ActiveWorkbook.WorkSheets("Output").Range("B1:I" & EndOfLine)

  ....

End Sub 
```

和

```
Function Find_First() As String

  ....

  With ActiveWorkbook.Sheets("Output").Range("A:I")

  ....

End Sub 
```

如果您从 Excel 以外的应用程序运行这些函数，强烈建议您`ActiveWorkbook`使用引用您的 Excel 实例的变量 ( `AppExcel.ActiveWorkbook...`) 作为前缀，否则如果打开第二个 Excel 实例，您的应用程序可能会失败。

抱歉，我目前无法解决您问题的第二部分。

# ios - UINavigationController 作为 UINavigationController 的子级

> ID：15572696
> 
> 赞同：0
> 
> 时间：2013-03-22T14:22:39.467
> 
> 标签：ios, objective-c, uinavigationcontroller, parentviewcontroller, childviewcontroller

我不知道标题是否解释了问题本身，但在这里......

我有一个 UINavigationController，它是 UINavigationController 的 parentViewController。问题是 childViewController 的行为很奇怪，当我将它作为孩子添加时，它首先有 statusBar 的间隙（它不占据整个屏幕），如果我通过隐藏和显示导航栏来“解决”那个“错误”，差距消失了，但现在孩子不尊重我手动设置的框架。然后我试图继续，当我在孩子身上展示一个模态并解雇它时，整个孩子都消失了......

那里会有什么问题？两个容器的父子关系还是什么？

谢谢指教

编辑：这是一个显示奇怪行为的示例项目

[http://www.mediafire.com/?8saa68daqfkf335](http://www.mediafire.com/?8saa68daqfkf335)

编辑2：我实际上找到了一个解决方案，但我在Apple Docs上并没有发现它很清楚，它说childViewControllers从它们所属的parentViewController中获取它的框架，但它并没有说如果parentViewController“重新出现”（比如推动它）childViewControllers 再次被 parentViewController 框架调整大小......希望这对任何人都有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:55:18.590

我相信将第二个导航视图控制器呈现为模态视图控制器会更好。例如，将您当前的 presentController 选择器替换为以下内容：

```
- (void)presentController:(id)sender {

ChildViewController1 *cvc = [[ChildViewController1 alloc] initWithNibName:@"ChildViewController1" bundle:nil];
nc3 = [[UINavigationController alloc] initWithRootViewController:cvc];

nc3.modalTransitionStyle = UIModalTransitionStyleCoverVertical;

[self presentViewController:nc3 animated:YES completion:nil];

UIBarButtonItem *i = [[UIBarButtonItem alloc] initWithTitle:@"X" style:UIBarButtonItemStyleBordered target:self action:@selector(close)];
cvc.navigationItem.leftBarButtonItem = i;
} 
```

然后，您的关闭选择器可能变为：

```
- (void)close {
[nc3 dismissViewControllerAnimated:YES completion:nil];
} 
```

（虽然我建议移动按钮的创建并实际在 ChildViewController1.m 中处理关闭）。

当然，这将使导航控制器的所有创建脱离 ViewController.m 的 viewDidLoad 选择器：

```
- (void)viewDidLoad
{
[super viewDidLoad];
self.view.backgroundColor = [UIColor blueColor];

UIButton *b = [UIButton buttonWithType:UIButtonTypeRoundedRect];
b.frame = CGRectMake(0, 100, 100, 40);
[b setTitle:@"present" forState:UIControlStateNormal];
[b addTarget:self action:@selector(presentController:) forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview:b];
} 
```

希望它有效！

# java - Check two float/double values for exact equality

> ID：15572700
> 
> 赞同：16
> 
> 时间：2013-03-22T14:22:49.047
> 
> 标签：java, floating-point

What is an elegant, readable and non-verbose way of comparing two floating point value for exact equality?

As simple as it may sound, its a wicked problem. The `==` operator doesn't get the job done for NaN and also has special treatment for zero:

```
(+0.0 == -0.0) -> true
Double.NaN == Double.NaN -> false 
```

But I want to determine if two values are exactly the same (but I do *not* care for different NaN patterns, so any NaN == any other NaN -> true).

I *can* do this with this ugly Monster piece of code:

```
Double.doubleToLongBits(a) == Double.doubleToLongBits(b) 
```

Is there a better way to write this (and make the intent obvious)?

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-22T14:24:03.660

You can use

```
Double.compare(a, b) == 0 
```

From the javadoc for compareTo

*   Double.NaN is considered by this method to be equal to itself and greater than all other double values (including Double.POSITIVE_INFINITY).
*   0.0d is considered by this method to be greater than -0.0d.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-22T14:24:55.680

What you've got is already the best way of doing it, I'd say. It makes it clear that you're interested in the *bitwise* representation of the value. You happen to be converting those bits to `long` as a convenient 64-bit type which doesn't have any funky behaviour.

If you don't want it appearing frequently in your codebase, just add a method to wrap it:

```
public static boolean bitwiseEqualsWithCanonicalNaN(double x, double y) {
    return Double.doubleToLongBits(x) == Double.doubleToLongBits(y);
} 
```

Note that as per your question, this does *not* differentiate between different NaN values. If you wanted to do this at a later date, you'd need to use [`Double.toRawLongBits`](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#doubleToRawLongBits%28double%29).

# c++ - c++11 下 fmod（和其他）的不同行为，至少在 Visual Studio 中

> ID：15572705
> 
> 赞同：10
> 
> 时间：2013-03-22T14:22:59.603
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012

我有一些示例代码在 Visual C++ 2012 下使用新的 C++11 标头的行为与在 VC++ 2010 下的行为不同。它涉及调用包含 cmath 时获得的 std::fmod 函数时会发生什么，并且当您传递的参数不是双精度，而是具有隐式转换为双精度运算符的类时：

```
#include <cmath>

class Num {
double d_;
public:
Num(double d) : d_(d) {}

operator double() const { return d_; }
};

int main(int argc, char* argv[]) {
Num n1(3.14159265358979323846264338327950288419716939937510);
Num n2(2.0);

double result1 = fmod((double)n1, (double)n2);
double result2 = fmod((float)n1, (float)n2);
double result3 = fmod(n1, n2);

if (result2==result1) std::cout << "fmod(double, double) returns the same as fmod(float,float)" << std::endl;
if (result3==result1) std::cout << "fmod(Num, Num) returns the same as fmod(double,double)" << std::endl;
if (result3==result2) std::cout << "fmod(Num, Num) returns the same as fmod(float,float)" << std::endl;
} 
```

令我惊讶的是，这调用了需要两个浮点数的 fmod 版本，而不是需要两个双精度数的 fmod 版本。

所以我的问题是，考虑到 C++ 11 标准，这是正确的行为吗？我能找到的关于该行为的唯一信息是[这里](http://en.cppreference.com/w/cpp/numeric/math/fmod "这里")的 cppreference.com 文档，上面写着（强调我的）：

> 如果任何参数具有整数类型，则将其强制转换为 double。如果任何其他参数为 long double ，则返回类型为 long double ，**否则为 double**。

然而，Visual Studio 头文件中的实现似乎实现了“否则它是一个浮点数”。

任何人都知道意图是什么:-)？

通过在线 c++11 版本的 GCC 运行该示例（否则我无法简单访问 GCC 的最新副本），它似乎调用了 fmod 的“双”版本，这是我天真地期望的.

为了清楚起见，我正在使用

> Microsoft (R) C/C++ 优化编译器版本 17.00.51106.1 for x86

这是附带的

> Microsoft Visual Studio Express 2012 for Windows 桌面版 11.0.51106.01 更新 1

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T14:57:01.627

这与我的[这个问题有关](https://stackoverflow.com/q/14295217/743214)。原因是，为了提供标准要求的额外重载（并在您的问题中引用）VS 2012 为所有 2 参数数学函数定义了通用函数模板。所以你实际上并没有打电话`fmod(float, float)`，而是`fmod<Num>(Num, Num)`首先打电话。

这个模板化函数比普通`double`版本更受欢迎的原因是，因为双版本需要用户定义的从`Num`to转换`double`，而模板版本是直接可实例化的。

但是调用`fmod`函数的实际基本类型随后由以下类型特征确定`<xtgmath.h>`：

```
template<class _Ty>
    struct _Promote_to_float
    {   // promote integral to double
    typedef typename conditional<is_integral<_Ty>::value,
        double, _Ty>::type type;
    };

template<class _Ty1,
    class _Ty2>
    struct _Common_float_type
    {   // find type for two-argument math function
    typedef typename _Promote_to_float<_Ty1>::type _Ty1f;
    typedef typename _Promote_to_float<_Ty2>::type _Ty2f;
    typedef typename conditional<is_same<_Ty1f, long double>::value
        || is_same<_Ty2f, long double>::value, long double,
        typename conditional<is_same<_Ty1f, double>::value
            || is_same<_Ty2f, double>::value, double,
            float>::type>::type type;
    }; 
```

这样做是检查提升的类型`_Promote_to_float`（在您的情况下又是`Num`，因为它只检查它的积分，`Num`显然不是）到所有浮点类型，直到它匹配，它不匹配，因此导致其他情况`float`。

这种错误行为的原因是，这些额外的数学重载从来都不是为每种类型提供的，而只是为内置算术类型提供（并且模棱两可的标准措辞即将被修复，如我对链接的问题）。因此，在上面解释的所有这种类型推导机制中，VS 2012 假定传入的类型要么是内置整数类型，要么是内置浮点类型，这当然对于`Num`. 所以实际的问题是 VS 提供了过于通用的数学函数，而它们应该只为内置类型提供重载（就像已经为 1-argument 函数正确完成的那样）。如链接答案中所述，我已经为此提交了一个错误。

**编辑：** ~~事实上（您也意识到）即使他们遵循当前模棱两可的标准措辞并需要提供通用函数模板，他们仍然应该将这些通用参数的实际提升类型定义为`double`而不是`float`. 但我认为这里的实际问题是他们完全忽略了在整个类型转换过程中可能存在的非内置类型（因为对于内置类型，它们的逻辑工作得非常好）。~~

但是根据第**26.8 节 [c.math]**中当前模棱两可的标准措辞（尽管已经计划更改），他们确实正确地将提升的类型推断为`float`（根据第 3 种情况）：

> 应有足够的额外过载以确保：
> 
> 1.  如果对应于 double 形参的任何实参的类型为 long double，则对应于 double 形参的所有实参都将有效地转换为 long double。
> 2.  否则，如果对应于 double 参数的任何实参具有 double 类型或整数类型，则对应于 double 形参的所有实参都将有效地强制转换为 double。
> 3.  否则，对应于双参数的所有参数都被有效地转换为浮点数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:04:32.107

正如克里斯蒂安在他的相关问答中指出的那样，这是严格阅读标准所要求的行为。

但是，您可以很容易地为所有版本解决此问题：

```
Num fmod(const Num a, const Num b)
{
    const double cvt_a = a;
    const double cvt_b = b;
    return Num(fmod(cvt_a, cvt_b));
} 
```

# c++ - 使用带有 Bullseye 的 GoogleTest 生成测试报告

> ID：15572712
> 
> 赞同：-2
> 
> 时间：2013-03-22T14:23:14.467
> 
> 标签：c++, c, unit-testing, googletest, bullseye

我正在尝试使用`GoogleTest`和`bullseye`测试 C 应用程序代码。我在使用 i686 型处理器的[Red Hat Linux环境中。](http://en.wikipedia.org/wiki/Red_Hat_Linux)我得到了`gtest`和`bullseye`库。编写存根和测试代码的过程也是可以理解的。我面临问题的步骤是更改`makefile`获取二进制文件和覆盖文件。

`gtest`我浏览了and的官方文档`bullseye`，但我不能完全掌握这个过程。

如果有人经历过同样的情况并最终得到了演练，请与我分享。这会很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T03:56:26.700

对于googleTest，只需添加库和包含路径，`-I${GTEST_DIR}/include -L${GTEST_DIR}/lib/.libs/libgtest.a`在进行gcc编译时添加。

或者，如果您使用 automake 生成 Makefile，添加两行可供`Makefile.am`automake 使用的行也可以。

```
autotest_LDADD=@LIBS@ ${GTEST_DIR}/lib/.libs/libgtest.a
autotest_CXXFLAGS=@CXXFLAGS@ -I${GTEST_DIR}/include 
```

项目名称是autotest，${GTEST_DIR}应该是编译前的环境变量。

从未使用过靶心，但它应该接近这个。

# jquery - 如何在 jquery mobile 中禁用图像源替换

> ID：15572714
> 
> 赞同：0
> 
> 时间：2013-03-22T14:23:17.703
> 
> 标签：jquery, jquery-mobile

我正在使用 jquery mobile，但在我的网站上加载图像时遇到了问题。

Jquery mobile 将我的基本 href 添加到图像源的开头，使我的源错误..

我怎样才能禁用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:18:47.143

**解决方案**

在网上搜寻了几天的解决方案后，我终于找到了一些有用的东西。

我下载了jquery mobile的未压缩源代码，并将变量“newPath”替换为以下代码：

```
var newPath = path.get( $('head base').attr('href') ); 
```

奇迹般有效！

# javascript - 互斥 - jwPlayer

> ID：15572717
> 
> 赞同：1
> 
> 时间：2013-03-22T14:23:18.653
> 
> 标签：javascript, jquery, jwplayer

```
jwplayer("myElement_0").onPlay(function(){ pausePlayers(1); alert('0 has started'); });
jwplayer("myElement_1").onPlay(function(){ pausePlayers(2); alert('1 has started'); });
jwplayer("myElement_2").onPlay(function(){ pausePlayers(3); alert('2 has started'); });
jwplayer("myElement_3").onPlay(function(){ pausePlayers(4); alert('3 has started'); });
function pausePlayers(playing) { 
    for (var i=0; i<4; i++) {
       if(i != playing) { jwplayer("myElement_"+i).pause(true); }
    }
}; 
```

如果一个正在运行，我有这个脚本可以暂停其他玩家。但它不起作用。在我的控制台中，我看到：

`Uncaught TypeError: Object #<Object> has no method 'onPlay' (anonymous function)`

alhouthgh 我很确定 jwplayer 脚本正在加载，没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:20:11.063

这是一些快速而肮脏的示例代码，用于类似这样的事情：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <script type="text/javascript" src="http://www.longtailvideo.com/jwplayer/jwplayer.js"></script>
        <title>Multiple Mutually Exclusive JW6 Players Which Stop at End</title>
    </head>
    <body bgcolor="#EEE">
            <div id="container"></div>
            <script type="text/javascript">
            jwplayer("container").setup({
            file: "http://www.longtailvideo.com/jw/upload/bunny.mp4",
            image: "http://www.longtailvideo.com/jw/upload/bunny.jpg",
            height: 200,
            width: 300,
            stretching: "exactfit",
            events:{
                onPlay: function() {
                jwplayer('container2').stop();jwplayer('container3').stop();
                },
                onTime: function(object) {
                if(object.position > object.duration - 1) {this.pause();}
                }
            }
            });
            </script>
            <br />
            <div id="container2"></div>
            <script type="text/javascript">
            jwplayer("container2").setup({
            file: "http://www.longtailvideo.com/jw/upload/bunny.flv",
            image: "http://www.longtailvideo.com/jw/upload/bunny.jpg",
            height: 200,
            width: 300,
            stretching: "exactfit",
            events:{
                onPlay: function() {
                jwplayer('container').stop();jwplayer('container3').stop();
                },
                onTime: function(object) {
                if(object.position > object.duration - 1) {this.pause();}
                }
            }
            });
            </script>
            <br />
            <div id="container3"></div>
            <script type="text/javascript">
            jwplayer("container3").setup({
            file: "http://www.longtailvideo.com/jw/upload/bunny.mov",
            image: "http://www.longtailvideo.com/jw/upload/bunny.jpg",
            primary: "flash",
            height: 200,
            width: 300,
            stretching: "exactfit",
            events:{
                onPlay: function() {
                jwplayer('container').stop();jwplayer('container2').stop();
                },
                onTime: function(object) {
                if(object.position > object.duration - 1) {this.pause();}
                }
            }
            });
            </script>
    </body>
</html> 
```

# javascript - Javascript 链接方法和处理时间

> ID：15572718
> 
> 赞同：2
> 
> 时间：2013-03-22T14:23:20.233
> 
> 标签：javascript, performance, method-chaining

我正在使用 javascript API，我看到了这句话：

> 因为 JavaScript 是一种脚本语言，所以每一行代码都会占用宝贵的处理器时间。提高处理器时间的一种方法是链接方法调用以减少代码行数。esri.Graphic 和 esri.symbol.* 等对象提供了返回对象本身的 setter 方法，允许链接方法。
> 
> 效率较低：

```
var symbol = new esri.symbol.SimpleMarkerSymbol();
symbol.setSize(10);
symbol.setColor(new dojo.Color([255,0,0])); 
```

> 更高效：

`var symbol = new esri.symbol.SimpleMarkerSymbol().setSize(10).setColor(new dojo.Color([255,0,0]));`

> 在链接方法调用时，您需要确定代码的效率和可读性之间的平衡。如果您避免链接，您的代码可能会更易读和维护；但是，您将失去链接提供的性能优势。

我理解在 Java 中，编写链方法与方法堆栈应该编译成相同的字节码。然而，既然这是一种脚本语言，这真的站得住脚吗？此外，如果确实如此，是否值得牺牲代码的可读性来实现该部分代码的性能？

并作为参考我从哪里得到这个文本： http: [//help.arcgis.com/en/webapi/javascript/arcgis/jshelp/inside_graphics.html](http://help.arcgis.com/en/webapi/javascript/arcgis/jshelp/inside_graphics.html)

编辑：经过一些性能测试，我发现方法是否被链接并不重要。（一次更快，另一次更快）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:59:54.203

像这样的链接方法可以提高性能，但仅在您使用的 API 被构建为提供此功能的有限场景中。想到的第一个例子是 jQuery。

调用 $("#test") 需要时间来返回引用 #test 的 jquery 对象。

当您链接一个方法时，它会重用该对象。

看看我做的这个测试作为例子。

[http://jsperf.com/chaining-demo](http://jsperf.com/chaining-demo)

# html - 如何修改开放期刊系统的font-changer的html代码？

> ID：15572721
> 
> 赞同：0
> 
> 时间：2013-03-22T14:23:29.843
> 
> 标签：html, css

我正在更改开放期刊系统的 CSS 代码。在侧边栏上，有一些 div 包含一些部分。其中之一在底部包含三个关于更改页面字体大小的链接（较大的字体大小-默认字体大小-较小的字体大小）。链接布局是并排使用的

```
float: left; 
```

然后我让这些 div 更时尚。我添加了以下规则：

```
border-radius: 8px;
border: 1px solid #aaa;
margin: 10px auto;
background: rgb(254,254,254); 
```

但由于链接的 float:left 规则，div 的高度似乎不够。所以我决定在我之前提到的三个链接之后添加下面的行：

```
<div  style="clear:both"></div> 
```

我已经搜索了整个网站中的任何文件，但我找不到它在哪里。有人知道我可以在三个链接后在哪里添加该 html 代码吗？

你可以看到我当前问题的图像。 ![我的问题](../Images/388c4de590f72e1afe035ba40082ae52.png)

正如您在图像上看到的那样，按钮/链接超出了 div 的边界。我想添加上面的行来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:56:33.860

隐藏 oveflow 解决了我的问题。谢谢CBroe

```
border-radius: 8px;
border: 1px solid #aaa;
margin: 10px auto;
background: rgb(254,254,254);
overflow:hidden; 
```

![问题消失了](../Images/ee0da4a5b7ca07fff614aa8fdd5d457a.png)

## 另一种方法

但是我找到了另一种解决方案，尽管 nd_macias 说这是一种旧方法。

我找到了文件 public_html/lib/pkp/js/fontController.js

然后我在第 32 到 35 行找到了以下内容：

```
smallFontHtml = "<a href='javascript:void(0);' class='smallFont' title='" + minCaption +"'>" + minCaption + "</a> ";
defFontHtml = "<a href='javascript:void(0);' class='defaultFont' title='" + defCaption +"'>" + defCaption + "</a> ";
largeFontHtml = "<a href='javascript:void(0);' class='largeFont' title='" + maxCaption +"'>" + maxCaption + "</a> ";
$(container).html(smallFontHtml + defFontHtml + largeFontHtml); 
```

然后将其修改为以下内容：

```
smallFontHtml = "<a href='javascript:void(0);' class='smallFont' title='" + minCaption +"'>" + minCaption + "</a> ";
defFontHtml = "<a href='javascript:void(0);' class='defaultFont' title='" + defCaption +"'>" + defCaption + "</a> ";
largeFontHtml = "<a href='javascript:void(0);' class='largeFont' title='" + maxCaption +"'>" + maxCaption + "</a> ";
clearFix = "<div style='clear:both;'></div>";
$(container).html(smallFontHtml + defFontHtml + largeFontHtml + clearFix); 
```

这可以作为另一种解决方案来处理。

# c++ - 如何为 IAsyncOperation 指定回调方法

> ID：15572723
> 
> 赞同：3
> 
> 时间：2013-03-22T14:23:34.700
> 
> 标签：c++, asynchronous, windows-runtime, windows-phone-8

是否可以指定完成操作后要调用的方法`async`？

平台：C++，Windows Phone 8

我需要实现异步发送 UDP 数据包的非阻塞方法。他们有我的方法：

```
onWriteComplete(int errorCode) 
```

操作完成时回调。

这是我尝试过的：

```
res = await asyncWrite();
onWriteComplete( res ); 
```

但没有运气。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T14:48:58.140

在 Windows Phone 8 和 Windows RT 应用程序的所有语言中，异步操作以类似的方式工作。异步操作返回一个 IAsyncOperation 结果，您可以使用该结果链接一个函数以在操作完成时运行。

[在 C++ 中，您可以使用create_task](http://msdn.microsoft.com/en-us/library/hh913025.aspx)和[task::then](http://msdn.microsoft.com/en-us/library/hh750044.aspx)函数以类似于 C# 的方式创建任务并将它们链接起来。查看[C++ 中的异步编程（Windows 应用商店应用程序）](http://msdn.microsoft.com/en-us/library/windows/apps/hh780559.aspx)作为示例。

该示例从 IAsyncOperation 结果创建一个任务，并安排另一个任务在第一个任务完成时执行：

```
auto deviceEnumTask = create_task(deviceOp);

// Call the task’s .then member function, and provide
// the lambda to be invoked when the async operation completes.
deviceEnumTask.then( [this] (DeviceInformationCollection^ devices ) 
{       
    for(int i = 0; i < devices->Size; i++)
    {
        DeviceInformation^ di = devices->GetAt(i);
        // Do something with di...          
    }       
}); // end lambda 
```

# memory-management - 逻辑内存需要什么？

> ID：15572727
> 
> 赞同：-4
> 
> 时间：2013-03-22T14:23:46.050
> 
> 标签：memory-management, operating-system

学习OS的时候，发现了一个逻辑内存的概念。那么为什么需要逻辑内存？CPU是如何产生逻辑内存的？“ **&ptr** ”算子的输出是逻辑还是物理地址？是逻辑内存还是虚拟内存？相同的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:41:32.453

如果您在谈论 C 和 C++ `sizeof`，它会返回大小而不是地址。而且 CPU 不会产生任何内存。

在**x86** CPU 上，地址计算和转换有几个层次。x86 程序使用由两项组成的**逻辑地址进行操作：****段选择器**（该选择器并不总是在指令中明确指定，可能来自`cs`、或段寄存器）和**偏移量**。`ds``ss``es`

 **然后**段选择器**被翻译成**段基地址**（或者直接（在 CPU 的实地址模式和虚拟 8086 模式下乘以 16）或通过使用特殊的**段描述符表**（全局或本地，GDT 或 LDT，在 CPU 的保护模式下），选择器用作描述符表的索引，从中提取基地址）。

然后总和**段基地址**+**偏移量**形成一个**线性地址**（AKA**虚拟地址**）。

如果 CPU 处于实地址模式，那是最终的**物理地址**。

如果 CPU 处于保护模式（或虚拟 8086），则该**线性/虚拟地址**可以通过**页表进一步转换为****物理地址**（如果启用了页面转换，当然，否则，它是最终的物理地址为出色地）。

 ****物理内存**是您的 RAM 或 ROM（或闪存）。**虚拟内存**是由磁盘存储空间扩展的**物理内存**（可以是闪存，也可以是我们现在拥有的 SSD）。

你真的需要阅读这个。你似乎不知道。****

# ios - 在运行时调整参数？

> ID：15572732
> 
> 赞同：3
> 
> 时间：2013-03-22T14:24:02.457
> 
> 标签：ios, objective-c, debugging, lldb

使用 iOS 时，有时我需要测试一些值。我可能会调整这些值 30 次，并且必须重新构建/重新运行 30 次来测试它们。这是一个明显的麻烦。

所以我想知道（使用 iOS SDK）是否可以在应用程序运行时调整小参数/数据？只是为了方便生活。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T15:10:26.753

1.  设置一个`BreakPoint`
2.  在`lldb`调试区域类型中：

示例 1：

```
expr (void)[aView setBackgroundColor:(UIColor*)[UIColor redColor]] 
```

在这里，我想在运行`aView`时`UIView`查看它的框架。我在运行时调用 a 的`setBackgroundColor`方法。`UIView`任何方法都可以这样调用。

示例 2：

```
expr nsstringVariable = @"yourRunTimeValue" 
```

在这里，我在运行时更改了一个字符串变量。

有关`expr`类型的更多帮助

`help expr`

我强烈建议人们阅读`Brian Moakley` [使用 Xcode 4.5 进行中间调试的教程](http://www.raywenderlich.com/28289/debugging-ios-apps-in-xcode-4-5/ "使用 Xcode 4.5 进行中间调试")

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T15:24:36.147

是的，使用[Xcode 注入](http://injectionforxcode.com/)：

> 使用注入可以对 Objective-C 类的实现进行更改，并在类保存后立即生效，而无需重新启动应用程序。此功能适用于模拟器和 iOS 设备中的 OS X 和 iOS 应用程序。

# c# - ASP.NET AJAX UpdatePanel 和动态 HTML 插入问题 (Telerik)

> ID：15572735
> 
> 赞同：-2
> 
> 时间：2013-03-22T14:24:09.077
> 
> 标签：c#, asp.net, json, telerik, asp.net-ajax

好的，所以我有一个问题。我目前正在开发一个使用 ASP.NET AJAX 的 Telerik 框架的项目，尽管这并不重要，因为我在这部分工作中完全（几乎）绕过了 Telerik。

我正在将一个类似于 facebook 的聊天程序整合到我们公司的 CRM 系统中，虽然到目前为止一切顺利，但我遇到了障碍。问题是当我尝试“创建一个新的聊天框”时。我将 asp 控件 UpdatePanel 与 jQuery $.ajax 调用结合使用，将 JSON 方法名称传递给我的代码隐藏文件。这是 JSON 逻辑：

**双击用户列表中的用户：**

```
$telerik.$(".UserListEntry").dblclick(function () {
                var ToName = $telerik.$(this).children(".UserListEntryName").text();
                var FromName = $telerik.$("#lkUserGeneralSettings").text();
                $telerik.$.ajax({
                    type: 'POST',
                    url: 'DefaultHandler.ashx',
                    data: { "ToName": ToName, "FromName": FromName },
                    success: CreateChatBox(),
                    error: function (response) { alert("error: 001"); }
                });
            }); 
```

**CreateChatBox 回调：**

```
function CreateChatBox() {
            $telerik.$.ajax({
                type: 'POST',
                url: 'Default.aspx',
                data: { MethodName: "CreateChatBox" },
                success: ForceAsyncPostback,
                error: function (response) { alert("error: 002"); }
            });
        } 
```

**强制 asyncpostback （不应该，但这甚至不起作用！）：**

```
function ForceAsyncPostback() {
            var UpdatePanel1 = '<%=Panel3.ClientID%>';

            if (UpdatePanel1 != null) {
                __doPostBack(UpdatePanel1, '');
            }
            alert("Success");
        } 
```

UpdatePanel 是通过各种文字和一些硬编码的 html good-ole' 风格的 div 创建的。问题**不**在于所述元素的动态创建，这很好用。事实上，如果我将其放入 PageLoad 事件中，我的代码（我将在下面发布）创建并显示一切都非常好。

无论如何，**这是.aspx：**

```
<asp:UpdatePanel ID="Panel3" runat="server" OnLoad="Panel3_Load" UpdateMode="Conditional">
                <ContentTemplate>
                    <asp:Literal ID="ChatBoxesLiteralTop" runat="server" />
                    <asp:Literal ID="ChatBoxesLiteralMid" runat="server" />
                    <asp:PlaceHolder ID="ChatBoxesPlaceHolder" runat="server" />
                    <asp:Literal ID="ChatBoxesLiteralBot" runat="server" />
                    <div id="UserListCorner">
                        <img id="UserListBtn" src="images/list.png" />
                    </div>
                    <div id="UserList" class="UserListHidden">
                        <div id="UserListView">
                            <asp:Literal ID="UserListViewLiteral" runat="server" />
                        </div>
                    </div>
                </ContentTemplate>
            </asp:UpdatePanel> 
```

**代码背后：**

```
protected void Panel3_Load(object sender, EventArgs e)
    {
        #region Ajax methods
        if (Request.Form["MethodName"] == "CreateChatBox")
        {
            CreateChatBox();
        }
        #endregion

        Engine m_engine = new Engine();
        string m_sql = @"SELECT FullName FROM Users WHERE RecordDeleted <> 1";
        DataTable dt = m_engine.GetObjectsAsDataTable(m_sql);
        for (int i = 0; i < dt.Rows.Count; i++)
        {
            UserListViewLiteral.Text += "<div class='UserListEntry'><span class='UserListEntryStatus'><img src='images/status-online.png' width='10' /></span>&nbsp;<span class='UserListEntryName'>" + dt.Rows[i]["FullName"].ToString() + "</span></div>";
        }

        RadAjaxManager.GetCurrent(Page).ResponseScripts.Add("ChatAjax()");   
    }

    private void CreateChatBox()
    {
        ChatBoxesLiteralTop.Text = @"<div id='ChatBox' class='ChatBoxHidden'>
                                        <div class='ChatBoxHeader'>
                                            <img id='ChatBoxStatusBtn' src='Images/status-online.png' />
                                            <span id='ChatBoxUserLabel'>John Doe</span>
                                            <img id='closeBtn' src='Images/close.png' />
                                            <img id='toggleTab' src='Images/up-arrow.png' />
                                        </div>
                                        <div id='ChatBoxMessageOutput'></div><div class='ChatBoxFooter'>";

        TextBox txt = new TextBox();
        txt.ID = "ChatBoxMessageInput";
        txt.Height = 16;
        txt.MaxLength = 270;
        txt.Width = 250;
        txt.AutoPostBack = false;
        ChatBoxesPlaceHolder.Controls.Add(txt);

        RadButton btn = new RadButton();
        btn.ID = "ChatBoxSendButton";
        btn.Text = "Send";
        btn.AutoPostBack = true;
        btn.Height = 22;
        btn.Click += ChatBoxSendButton_Click;
        ChatBoxesPlaceHolder.Controls.Add(btn);

        ChatBoxesLiteralBot.Text = "</div></div>";

        Panel3.Update();

        RadAjaxManager.GetCurrent(Page).ResponseScripts.Add("ChatAjax()");
    } 
```

我当然忽略了一些非常愚蠢的事情，但是来自经验丰富的 ASP.Net Ajaxer 的新眼睛将不胜感激！提前致谢。

## 澄清问题

**有什么作用：**

*   代码运行正常。
*   JSON 方法被传递给后面的代码并被读取。
*   CreateChatBox() 方法贯穿并据称填充了文字和控件。
*   JSON 链中的所有回调均已成功执行。

**什么不起作用：**

*   UpdatePanel，即使在冗余回发之后，在代码成功执行后也没有这个新的 HTML。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:37:41.080

## To Whom It May Concern

* * *

Well I happened to solve this problem the day after posting it. Of course there are now new hurdles to tackle but I am happy to say that my asynchronous chat module is nearly done. Since nobody decided to take on the problem, I am going to post what I did to properly produce dynamic, asynchronous objects based on hard-coded HTML in ASP.NET since, while Googling the matter, this post was the only relevant result popping up.

I'll start by saying I am well aware that this is a very unconventional approach. That being said, the requirements of the project justified the means. While there may be many other ways to accomplish your goal, this does work. I am not going to go into extraneous details with respect to my particular project, but hopefully this will help somebody in the future.

## The Wrongs

* * *

The primary problem with my original question was the way I was attacking the rendering sequence. A major flaw in my logic was attempting to separate the ASP controls (literals, placeholders, buttons and such) from my HTML too much. My initial approach (from above) looked like this:

```
<asp:UpdatePanel ID="Panel3" runat="server" OnLoad="Panel3_Load" UpdateMode="Conditional">
            <ContentTemplate>
                <asp:Literal ID="ChatBoxesLiteralTop" runat="server" />
                <asp:Literal ID="ChatBoxesLiteralMid" runat="server" />
                <asp:PlaceHolder ID="ChatBoxesPlaceHolder" runat="server" />
                <asp:Literal ID="ChatBoxesLiteralBot" runat="server" />
                <div id="UserListCorner">
                    <img id="UserListBtn" src="images/list.png" />
                </div>
                <div id="UserList" class="UserListHidden">
                    <div id="UserListView">
                        <asp:Literal ID="UserListViewLiteral" runat="server" />
                    </div>
                </div>
            </ContentTemplate>
</asp:UpdatePanel> 
```

The final result looks more like this:

```
<asp:UpdatePanel ID="Panel3" runat="server" OnLoad="Panel3_Load" UpdateMode="Conditional">
                <ContentTemplate>
                    <asp:PlaceHolder ID="ChatBoxesPlaceHolder" runat="server" />
                    <div id="UserListCorner">
                        <img id="UserListBtn" src="images/list.png" />
                    </div>
                    <div id="UserList" class="UserListHidden">
                        <div id="UserListView">
                            <asp:Literal ID="UserListViewLiteral" runat="server" />
                        </div>
                    </div>
                    <asp:Label ID="Label42" Font-Bold="true" runat="server" />
                    <asp:HiddenField runat="server" ID="LatestDisplayTick" />
                </ContentTemplate>
</asp:UpdatePanel> 
```

With the code behind (abridged) similar to this:

```
Literal top = new Literal();
// ...
UpdatePanel UpdatePanel2 = new UpdatePanel();
// ...
top.Text = @"<div id='ChatBox' class='ChatBoxShown'>
                                             <div class='ChatBoxHeader'>
                                                 <img id='ChatBoxStatusBtn' src='Images/status-online.png' />
                                                 <span id='ChatBoxUserLabel'>" + UserNames[0] + @"</span>
                                                 <img id='closeBtn' src='Images/close.png' />
                                                 <img id='toggleTab' src='Images/up-arrow.png' />
                                             </div>";

top.ID = "ChatBoxesLiteralTop";
top.Mode = LiteralMode.PassThrough;
// ...
UpdatePanel2.ID = "UpdatePanel2";
UpdatePanel2.UpdateMode = UpdatePanelUpdateMode.Conditional;
UpdatePanel2.ChildrenAsTriggers = false;
UpdatePanel2.ContentTemplateContainer.Controls.Add(top2);
// ...
Panel3.ContentTemplateContainer.Controls.Add(top);
Panel3.ContentTemplateContainer.Controls.Add(UpdatePanel2);               
Panel3.ContentTemplateContainer.Controls.Add(mid); 
```

## What It Means

* * *

All I've done is wrapped the entirety of my chatbox elements inside a single placeholder, dynamically creating HTML elements that wrap ASP controls all from the server and posting it as a "chunk" of dynamic data. This sidesteps some strange behaviors with ASP control placement otherwise, and allows for a quasi-OO approach for the client-side functionality of my project. After creation, I can now make use of some JSON and AJAX calls to dynamically enter data into said dynamically created controls.

An example would be posting a message received from a database notification to my chat window (ChatBoxesLiteralMid control) when it is received.

**After Page/Control Load**

```
if(ChatBoxesLiteralMid != null)
            ChatBoxesLiteralMid.Text += @"<div class='ChatBoxEntry'><span class='ChatBoxEntryName ChatBoxSelf'>" + AppParameters.Current.AppUser.FirstName + "</span>:&nbsp;<span class='ChatBoxEntryMessage'>" + dy.Rows[dy.Rows.Count - 1]["Message"].ToString() + "</span></div>"; 
```

## Why Go To The Trouble?

* * *

What I have accomplished is for a particular project with needs to go far above and beyond the original scope, started by another developer years prior. This is an unconventional way to teach the old dog some new tricks. I now have near-full control of an indiscriminate amount of real-time chat boxes/sessions on the CLIENT side. It's really pretty freakin' sweet honestly. Please feel free to post questions (or concerns) as I regularly check SO and am happy to respond.

# oracle - SQL Oracle 排序字符串（数字）和（带数字的字母）

> ID：15572737
> 
> 赞同：20
> 
> 时间：2013-03-22T14:24:12.483
> 
> 标签：oracle, sorting

我是甲骨文的新手，我有一个问题。我有一个名为 file_id 的列。

当我通过它对字符串进行排序时，例如

```
1
1 
10 
100 
11 
11
110 
114
12
300 
31
4200
B14
B170
B18 
```

编辑：我希望它以这种方式排序。

```
1
1
10
11
11
12
31
100
300
4200
B14
B18 
B170 
```

下面的答案完美无缺。我现在遇到的唯一其他问题..我的记录是空白的。我怎样才能在最后制作空白记录？

```
1 
1 
10 
11 
11 
12 
31 
100 
300 
4200 
BLANK 
BLANK 
BLANK 
BLANK 
BLANK 
B14 
B18 
B170 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-22T14:31:30.480

```
select column 
from table
order by 
  regexp_substr(column, '^\D*') nulls first,
  to_number(regexp_substr(column, '\d+')) 
```

[小提琴](http://www.sqlfiddle.com/#!4/332aa/2)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-08-21T09:37:09.937

这是一个老问题，但它是谷歌的第一个热门话题，所以我想我会分享一个替代解决方案：

```
select column
from table
order by 
  LPAD(column, 10) 
```

LPAD 函数用空格填充字符串的左侧，以便对结果进行数字排序。这适用于非数字值，空值将排在最后。如果您知道要排序的字符串的最大长度（您可能需要调整第二个参数以满足您的需要），这将很有效。

来源：[http ://www.techonthenet.com/oracle/questions/sort1.php](http://www.techonthenet.com/oracle/questions/sort1.php)

**编辑**：
我注意到虽然我的解决方案适用于我的情况，但输出与接受的答案略有不同（[http://www.sqlfiddle.com/#!4/d935b8/2/0](http://www.sqlfiddle.com/#!4/d935b8/2/0)）：

```
1
1
10
11
11
12
31
100
110
114
300
A14
A18
4200
A170
(null)
(null) 
```

4200 应该在 300 之后。对于我的情况，这已经足够了，但可能并非总是如此。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-18T15:59:53.640

基于之前的解决方案：

```
SELECT column
FROM table
ORDER BY LPAD(column, (SELECT MAX(LENGTH(column)) FROM table)) ASC 
```

这种方法的优点是您不需要知道表格列的大小。

# ember.js - Ember.js：确保已加载父级

> ID：15572739
> 
> 赞同：0
> 
> 时间：2013-03-22T14:24:18.260
> 
> 标签：ember.js

这可能是一个简单的问题，但我似乎找不到任何关于如何实现这一目标的当前（RC1）示例。

所以假设我有以下两条路线：

```
App.PostRoute = Ember.Route.extend({
});

App.PostCommentRoute = Ember.Route.extend({
}); 
```

当我直接访问 PostComment 路由时，如何确保 PostRoute 的控制器被加载。即直接从浏览器调用#/post/comment？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:13:11.043

您需要 PostRoute`model`挂钩来返回一个承诺。如果您使用的是 ember-data，这将自动为您完成。

路由器检查，如果`model`钩子返回的对象实现了`then`函数（这意味着它是一个承诺），它将把路由器转换到一个`loading`状态，直到承诺被解决（这意味着数据被获取）。然后它会继续`PostCommentRoute`。

# php - 除非我使用 CAPTCHA，否则 PHP 邮件表单不起作用

> ID：15572742
> 
> 赞同：-1
> 
> 时间：2013-03-22T14:24:37.003
> 
> 标签：php, email, forms

我正在尝试将此表格发送到我的电子邮件地址。

这是我正在使用的 PHP（它用于位于[http://protoolstutorial.org/cottageinn/](http://protoolstutorial.org/cottageinn/)上的表单）。我需要知道为什么这没有通过并发送到我的电子邮件。我从代码中遗漏了什么？

```
<?php 

$your_email ='cottageinndrive@gmail.com';// <<=== update to your email address

session_start();

$errors = '';
$south = '';
$east = '';
$west = '';
$midwest = '';
$visitor_email = '';

if(isset($_POST['submit']))
{
    $south = $_POST['south'];
    $east = $_POST['east'];
    $west = $_POST['west'];
    $midwest = $_POST['midwest'];
    $visitor_email = $_POST['email'];

    ///------------Do Validations-------------

    if(empty($visitor_email))
    {
        $errors .= "\n Email is required fields. "; 
    }

    if(IsInjected($visitor_email))
    {
        $errors .= "\n Bad email value!";
    }

    if(empty($errors))
    {
        //send the email
        $to = $your_email;
        $subject="New form submission";
        $from = $your_email;
        $ip = isset($_SERVER['REMOTE_ADDR']) ? $_SERVER['REMOTE_ADDR'] : '';
        $body = "A user  submitted the contact form:\n".
                "South: $south\n".
                "East: $east\n".
                "West: $west\n".
                "Midwest: $midwest\n".
                "Email: $visitor_email \n".
                "IP: $ip\n";    
        $headers = "From: $from \r\n";
        $headers .= "Reply-To: $visitor_email \r\n";

        mail($to, $subject, $body,$headers);
        header('Location: thank-you.html');
    }
}

// Function to validate against any email injection attempts
function IsInjected($str)
{
    $injections = array('(\n+)', 
                        '(\r+)', 
                        '(\t+)', 
                        '(%0A+)', 
                        '(%0D+)', 
                        '(%08+)', 
                        '(%09+)'
                       );
    $inject = join('|', $injections);
    $inject = "/$inject/i";
    if(preg_match($inject,$str))
    {
        return true;
    }
    else
    {
        return false;
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:32:40.657

1.  在您的 php 开头添加`error_reporting(E_ALL)`以获取错误。
2.  在使用它们之前声明函数。
3.  对于智能、安全和轻松的邮件发送，请尝试[http://code.google.com/a/apache-extras.org/p/phpmailer/](http://code.google.com/a/apache-extras.org/p/phpmailer/)

# delphi - 重建丢失的代码 (AddToArray)

> ID：15572745
> 
> 赞同：-2
> 
> 时间：2013-03-22T14:24:38.533
> 
> 标签：delphi

我缺少其他开发人员处理的某些代码中的一个单元。

这是我能够从其他单位中破译的内容

我需要一个名为 AddToArray 的函数。

我知道它需要一个 TStringArray 和 String 并返回一个 TStringArray

```
TStringArray = array of string;

function AddToArray (A: TStringArray; S: String): TStringArray;
begin
  // result:=
end; 
```

我不确定其余部分是如何完成的。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T14:29:14.120

最明显的实现是：

```
function AddToArray(A: TStringArray; S: String): TStringArray;
begin
  Result := A;
  SetLength(Result, Length(Result)+1);
  Result[high(Result)] := S;
end; 
```

但如果我这样做，我会使用 const 参数：

```
function AddToArray(const A: TStringArray; const S: String): TStringArray; 
```

好吧，如果我真的这样做，我会使用`TStringList`.

# python - django-reversion 撤消功能 - 恢复多个对象

> ID：15572746
> 
> 赞同：3
> 
> 时间：2013-03-22T14:24:40.820
> 
> 标签：python, django, undo, django-reversion

我正在尝试使用 django-reversion 在 django 项目中实现“撤消”功能，以防用户意外修改多个对象。使用管理面板将不起作用，因为必须逐个还原对象。

我的问题是我无法创建包含多个对象数据的修订版。
即使我这样做

```
with reversion.create_revision():
    Res.object.all().delete() 
```

然后我无法访问分组此更改的修订。它以“一个对象一个版本。模型。版本”的方式进行拆分。

```
In [103]: reversion.models.Version.objects.all()
Out[103]: [<Version: #00001>, <Version: #00002>] 
```

我也试过了

```
reversion.models.Revision.objects.all().order_by('-date_created')[0].version_set.all() 
```

但它也只为一个已删除的 Res 对象返回了一个版本。好像我错过了什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T14:35:02.943

**tl;dr - 修订不是你“撤消”的东西。这是你恢复的东西。因此，撤消是查找在您要撤消的内容之前发生的最新修订，并通过调用 revert() 恢复它的情况。**

django-reversion 的数据模型基于修订和版本。一个版本由一个或多个版本组成，一个版本代表一个 Django 模型的序列化状态。

django-reversion 允许您回滚到任何先前版本或修订的状态。这类似于但不等同于撤消功能。

考虑以下工作流程：

```
# Create a Revision containing two Versions.
with reversion.create_revision():
    a = SomeModel.objects.create(name="A version 1")
    b = SomeModel.objects.create(name="B version 1")

# Create a Revision containing to Versions.
with reversion.create_revision():
    a.name = "A version 2"
    a.save()
    b.name = "B version 2"
    b.save() 
```

此时，您可以通过恢复到上一个​​版本来“撤消”第二次编辑。

```
# Revert just 'a' to version 1\. This is the last but one revision.
reversion.get_for_object(a)[1].revert()

# Or, revert 'a' and 'b' to version 1.
reversion.get_for_object(b)[1].revision.revert() 
```

您还可以像这样删除和恢复：

```
# Store the pk of 'a', then delete it.
a_pk = a.pk
a.delete()

# Recover 'a' via it's primary key.
reversion.get_deleted(SomeModel).filter(object_id=a_pk).revert() 
```

因此，您可以恢复到单个模型或一起保存的一组模型的先前状态。但是，没有办法说“撤消我刚刚所做的”。相反，你必须告诉reversion '变得像你当时的样子'。

在您的情况下，如果您想撤消批量删除，您可以这样做：

```
# Save a revision containing all SomeModel instances.
with reversion.create_revision():
    for obj in SomeModel.objects.all():
        obj.save()

# Delete them all.
SomeModel.objects.delete()

# Revert back to the previous revision, where nothing was deleted.
Revision.objects.filter(version__content_type=ContentType.objects.get_for_model(SomeModel)).order_by("-date_created")[0].revert() 
```

然而，在这种情况下，您将得到一个非常愚蠢的竞争条件，因为可以随时创建 SomeModel 的其他修订。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T17:32:03.783

我终于明白了。

**问题 1：将与多个对象相关的更改存储在单个修订版中**

解决方案：将 TransactionMiddleware 添加到 MIDDLEWARE_CLASSES

**问题 2：撤消功能/恢复更改**

嗯，这很令人困惑。您不能***REVERT CHANGES***您可以将***OBJECT 恢复***到以前已知的状态。**在您的对象更改视图中使用 reversion.create_revision() 会在更改对象后**存储有关该对象的数据。如果您有修改多个对象的视图，那么您必须在进行实际更改***之前创建修订。***

这在管理面板中也可见。如果您更改对象，则会出现一个新的日志条目。但是，如果您想恢复该更改，则不能选择最新版本——它与对象的当前状态相同——而是必须选择**前**一个。

# android - 异步任务中的进度条在上传时未显示

> ID：15572747
> 
> 赞同：2
> 
> 时间：2013-03-22T14:24:42.067
> 
> 标签：android, android-asynctask, progress-bar

谁能告诉我，为什么上传图片时进度条不显示。我从我工作的旧项目中复制了 asynctask 结构。在我的旧项目中，我使用 asynctask 从 Web 服务器下载图片，并在下载时显示进度条。这是我的代码：

```
public class PreviewPostActivity extends Activity {

ImageView imageView;

TextView tvComment;
Button submit;
MyLocationListener locationListener;
List<NameValuePair> list = new ArrayList<NameValuePair>();
private final String url = "***"; //Url of php script
ProgressDialog pDialog;
String responseMessage="";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.preview_post);

    Intent intent = this.getIntent();
    imageView = (ImageView)findViewById(R.id.imgPerview);
    tvComment = (TextView)findViewById(R.id.txtPreviewComment);
    submit = (Button)findViewById(R.id.btnPreviewSubmit);

    Bitmap image = (Bitmap)intent.getParcelableExtra("picture");
    String comment = intent.getStringExtra("comment");
    locationListener = (MyLocationListener)intent.getSerializableExtra("location");
    String imagePath = intent.getStringExtra("imagePath");
    String date = intent.getStringExtra("date");

    imageView.setImageBitmap(image);
    tvComment.setText(comment);

    //tvComment.append("\n"+locationListener.latitude + "\n"+locationListener.longitude);

    list.add(new BasicNameValuePair("image", imagePath));
    list.add(new BasicNameValuePair("comment", comment));
    list.add(new BasicNameValuePair("longitude", Double.toString(locationListener.longitude)));
    list.add(new BasicNameValuePair("latitude", Double.toString(locationListener.latitude)));
    list.add(new BasicNameValuePair("date", date));

    submit.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            new uploadPost().execute();

        }
    });

}

public void post(List<NameValuePair> nameValuePairs) {
    HttpParams httpParameters = new BasicHttpParams();
    HttpConnectionParams.setConnectionTimeout(httpParameters, 100000);
    HttpConnectionParams.setSoTimeout(httpParameters, 200000);
    HttpClient httpClient = new DefaultHttpClient(httpParameters);
    HttpContext localContext = new BasicHttpContext();
    HttpPost httpPost = new HttpPost(url);

    try {
        MultipartEntity entity = new MultipartEntity();

        for(int index=0; index < nameValuePairs.size(); index++) {
            if(nameValuePairs.get(index).getName().equalsIgnoreCase("image")) {
                // If the key equals to "image", we use FileBody to transfer the data

                entity.addPart(nameValuePairs.get(index).getName(), new FileBody(new File(nameValuePairs.get(index).getValue()),"image/jpeg"));
            } else {
                // Normal string data
                entity.addPart(nameValuePairs.get(index).getName(), new StringBody(nameValuePairs.get(index).getValue()));
            }
        }

        httpPost.setEntity(entity);

        HttpResponse response = httpClient.execute(httpPost, localContext);
        HttpEntity httpEntity = response.getEntity();
        String responseMessage = EntityUtils.toString(httpEntity);

        tvComment.setText(responseMessage);
    } catch (IOException e) {
        e.printStackTrace();
    }
}

class uploadPost extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(PreviewPostActivity.this);
        pDialog.setMessage("Uploading post. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();
    }

    /**
     * Getting product details in background thread
     * */
    protected String doInBackground(String... params) {

        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {

                    //post(list);
                HttpParams httpParameters = new BasicHttpParams();
                HttpConnectionParams.setConnectionTimeout(httpParameters, 100000);
                HttpConnectionParams.setSoTimeout(httpParameters, 200000);
                HttpClient httpClient = new DefaultHttpClient(httpParameters);
                HttpContext localContext = new BasicHttpContext();
                HttpPost httpPost = new HttpPost(url);

                try {
                    MultipartEntity entity = new MultipartEntity();

                    for(int index=0; index < list.size(); index++) {
                        if(list.get(index).getName().equalsIgnoreCase("image")) {
                            // If the key equals to "image", we use FileBody to transfer the data

                            entity.addPart(list.get(index).getName(), new FileBody(new File(list.get(index).getValue()),"image/jpeg"));
                        } else {
                            // Normal string data
                            entity.addPart(list.get(index).getName(), new StringBody(list.get(index).getValue()));
                        }
                    }

                    httpPost.setEntity(entity);

                    HttpResponse response = httpClient.execute(httpPost, localContext);
                    HttpEntity httpEntity = response.getEntity();
                    responseMessage = EntityUtils.toString(httpEntity);

                    //tvComment.setText(responseMessage);
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        });

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog once got all details
        tvComment.setText(responseMessage);
        pDialog.dismiss();
    }
} 
```

因此，当我点击上传按钮时，屏幕冻结并保持冻结状态，直到上传完成，并且根本不显示进度条。有时它会显示，但它的后部很稳定，我不知道为什么。我已经尝试从 doInBackground 主体中的类调用 Post() 方法，插入整个代码（主体中的代码与 post() 方法中的代码相同）但效果是一样的，所以我想我在创建进度条时没有做正确的事情。但是我再次说我从旧项目中复制了整个 asynctask 代码，它运行良好。

编辑：

我只是尝试在 PreviewPostActivity.class 的构造函数中创建进度条，之后我为 asynctask 类创建了构造函数，但它仍然有效。我很困惑，因为它在我的旧程序中工作。这是他的代码：

```
class GetSlike extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(KlubSlikeActivity.this);
        pDialog.setMessage("Ucitavanje u toku. Molimo vas sacekajte...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();
    }

    /**
     * Getting product details in background thread
     * */
    protected String doInBackground(String... params) {

        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {

                    String id = Integer.toString(k.getId());
                    List<NameValuePair> params = new ArrayList<NameValuePair>();
                    params.add(new BasicNameValuePair("klub",id));

                    slikeUrl = JSONAdapter.getSlike(params);
                    gv.setAdapter(new SlikeAdapter(slikeUrl,KlubSlikeActivity.this));
            }
        });

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog once got all details
        pDialog.dismiss();
    }
} 
```

唯一改变的是 doInBackground 身体......

**编辑：**

执行后显示对话框`runOnUiThread()`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-10T12:26:11.310

我发现这个库非常适合完成上传任务，还提供了一个进度处理程序，可用于设置 a 的值`ProgressBar`：

[https://github.com/nadam/android-async-http](https://github.com/nadam/android-async-http)

它可以像下面这样使用......为上传按钮设置onClickHandler：

```
@Override
public void onClick(View arg0) {
    try {
        String url = Uri.parse("YOUR UPLOAD URL GOES HERE")
                .buildUpon()
                .appendQueryParameter("SOME PARAMETER IF NEEDED 01", "VALUE 01")
                .appendQueryParameter("SOME PARAMETER IF NEEDED 02", "VALUE 02")
                .build().toString();

        AsyncHttpResponseHandler httpResponseHandler = createHTTPResponseHandler();

        RequestParams params = new RequestParams();
        // this path could be retrieved from library or camera
        String imageFilePath = "/storage/sdcard/DCIM/Camera/IMG.jpg";
        params.put("data", new File(imageFilePath));

        AsyncHttpClient client = new AsyncHttpClient();
        client.post(url, params, httpResponseHandler);
    } catch (IOException e) {
        e.printStackTrace();                
    }
} 
```

然后将此方法添加到您的活动代码中：

```
public AsyncHttpResponseHandler createHTTPResponseHandler() {
    AsyncHttpResponseHandler handler = new AsyncHttpResponseHandler() {
        @Override
        public void onStart() {
            super.onStart();
        }

        @Override
        public void onProgress(int position, int length) {
            super.onProgress(position, length);

            progressBar.setProgress(position);
            progressBar.setMax(length);
        }

        @Override
        public void onSuccess(String content) {
            super.onSuccess(content);
        }

        @Override
        public void onFailure(Throwable error, String content) {
            super.onFailure(error, content);
        }

        @Override
        public void onFinish() {
            super.onFinish();
        }
    };

    return handler;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T14:40:07.903

在 asynctask doinbackground() 中的 ui 线程上运行不正确。此外，您在 doInBackground() 中返回 null，并且在 onPostExecute() 中有参数 file_url。doInbackground() 中的返回值在 onPostExecute() 中接收值。

doInBackGround() 在后台运行，因此您无法在此处访问或更新 ui。

要更新 ui，您可以使用 onPostExecute()。

您的 AsyncTask 应该如下所示。你做错了。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)。**请参阅 4 个步骤下的主题**

```
 pd= new ProgressDialog(this);
 pd.setTitle("Posting data");
 new PostTask().execute();

private class PostTask extends AsyncTask<VOid, Void, Void> {

protected void onPreExecute()
{//display dialog.
  pd.show();
}
protected SoapObject doInBackground(Void... params) {
// TODO Auto-generated method stub
       //post request. do not update ui here. runs in background
return null;
}

protected void onPostExecute(Void param)
{   

 pd.dismiss();
 //update ui here
} 
```

# django - Django 从模型中更新状态

> ID：15572749
> 
> 赞同：0
> 
> 时间：2013-03-22T14:24:42.370
> 
> 标签：django, django-models

当我的以下过程完成时，我想要一种方法来更新模型字段中的状态。

**视图.py**

```
 #If we had a POST then get the request post values.
    if request.method == 'POST':
        batches = Batch.objects.for_user_pending(request.user)
        for batch in batches:
            ProcessRequests.delay(batch) 
```

所以我正在考虑在视图中做这样的事情......

```
batch.complete_update() 
```

我的问题是，在我的模型中，我不确定如何，只需要一点帮助。

这是我到目前为止所做的......

我建立

```
STATUSES = (
    ('Pending', 'Pending'),
    ('Complete', 'Complete'),
    ('Failed', 'Failed'),
    ('Cancelled', 'Cancelled'),
) 
```

然后是一个名为 的模型函数`def complete_update(self):`，但我不确定如何使用上述状态更新其中的字段，然后将其全部保存在模型中。

先感谢您。

PS，这是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:30:47.633

```
class Batch(model.Model):
    STATUSES_CHOICES = (
        ('Pending', 'Pending'),
        ('Complete', 'Complete'),
        ('Failed', 'Failed'),
        ('Cancelled', 'Cancelled'),
    )
    status = models.CharField(max_length=25, choices=STATUS_CHOICES)
    # The rest of the fields..

    def complete_update(self):
        self.status = 'Complete'
        self.save() 
```

应该这样做

编辑：正如 karthikr 所述， post_save 可能是解决此问题的更好方法

# ios - WeeApp iOS 通知中心小部件：位置服务不保存权限（越狱）

> ID：15572753
> 
> 赞同：1
> 
> 时间：2013-03-22T14:24:50.303
> 
> 标签：ios, objective-c, cllocationmanager, jailbreak, theos

我正在使用 theos 模板为越狱的 iPhone 制作通知中心（因此它在 WeeApp 上运行）。这是一个天气小部件，我希望它能够获取手机的当前位置，以便它可以从最近的车站获取天气。我目前正在使用以下代码开始获取位置：

```
i_locationManager = [[CLLocationManager alloc] init];
i_locationManager.delegate = self;
i_locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters;
i_locationUpdated = NO;
[i_locationManager startUpdatingLocation]; 
```

我有一个`didUpdateLocations`方法。所有这些工作正常。问题在于手机用于获得使用该位置的权限的弹出窗口。首先，它表示 SpringBoard 想要使用该位置。有没有办法让它说出我的小部件的名字？

更重要的是，保存的权限不会保留。只要手机在运行，它们就会持续存在，但每次我重新启动并再次打开通知中心时，它都会重新请求使用该位置的权限。

当然，这不是一个致命的问题，但它很烦人。有没有办法让手机记住允许小部件使用当前位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T00:41:27.900

这可能会有所帮助

```
[CLLocationManager setAuthorizationStatus:YES forBundleIdentifier:@"com.apple.springboard"]; 
```

这将以编程方式授权 SpringBoard。第一次您可以显示弹出窗口并将其保存在用户授权您的位置。然后，您可以在每次需要位置时自己进行操作。

至于弹出窗口中的应用程序名称。您可以尝试挂钩返回应用程序名称的 UIApplication、SBApplication、NSBundle 方法。我认为没有更简单的方法可以做到这一点。

# java - JDBC + Swing：无法获取表格内容

> ID：15572754
> 
> 赞同：0
> 
> 时间：2013-03-22T14:24:51.520
> 
> 标签：java, mysql, swing, search, jdbc

我正在学习 JDBC，对它完全陌生。我非常了解 MySQL。我的小程序（选项卡 2）中有一个搜索表单，用于搜索食物。当我单击搜索时，我希望它从数据库中搜索确切的食物并单独返回该特定行的表格内容。但我没有得到任何结果。只打开一个空框架。但是当我将查询作为“SELECT * FROM table”时，我得到了完整的表。但我只想要一行，即被搜索的那一行。谁能告诉我哪里出错了？这是我的代码：

```
 import java.awt.*;
    import java.awt.event.*;
    import java.sql.DriverManager;
    import java.util.Vector;
    import javax.swing.*;
    import com.mysql.jdbc.*;

    public class Tryout extends JFrame  implements ActionListener {

            private static final long serialVersionUID = 1L;

            final Vector columnNames = new Vector();
            final Vector data = new Vector();

            private JTabbedPane tabbedPane = new JTabbedPane();
            private JPanel inputpanel;
            private JPanel searchpanel;
            public String s;

            public Tryout()  {          
                    inputpanel = createPage1();
                    searchpanel = createPage2();
                    tabbedPane.addTab("Input Form", inputpanel);
                    tabbedPane.addTab("Search Form", searchpanel);
                    this.add(tabbedPane, BorderLayout.CENTER);           
            }

            public JPanel createPage1()  {          
                JPanel panel = new JPanel();
                panel.setLayout(new GridBagLayout());
                GridBagConstraints c = new GridBagConstraints();
                //Some code
                return panel;            
            }

            public JPanel createPage2() {      

                    JPanel panel = new JPanel();
                    panel.setLayout(new GridBagLayout());
                    GridBagConstraints c = new GridBagConstraints();
                    c.anchor = GridBagConstraints.LINE_START;
                    c.weightx = 0.5;
                    c.weighty = 0.5;
                    JLabel region = new JLabel("Enter Region"); 
                    c.anchor = GridBagConstraints.FIRST_LINE_START;
                    c.gridx = 0;
                    c.gridy = 0;
                    panel.add(region, c);
                    JTextField field = new JTextField(20);
                    c.anchor = GridBagConstraints.FIRST_LINE_START;
                    c.gridx = 1;
                    c.gridy = 0;
                    panel.add(field, c);
                    JButton search = new JButton("SEARCH");               
                    c.anchor = GridBagConstraints.FIRST_LINE_START;
                    c.gridx = 2;
                    c.gridy = 0;
                    panel.add(search, c);
                    s = field.getText();
                    search.addActionListener(new ActionListener() {

                        public void actionPerformed(ActionEvent ae){

                        try{
                        Connection con = null;
                        Class.forName("com.mysql.jdbc.Driver");
                        con = (Connection) DriverManager.getConnection("jdbc:mysql://localhost:3306/delikat", "root", "");
                        PreparedStatement statement = (PreparedStatement) con.prepareStatement("SELECT * FROM delicious WHERE name = ?");
statement.setString(1,s);
ResultSet rs= (ResultSet) statement.executeQuery();
                        ResultSetMetaData md = (ResultSetMetaData) rs.getMetaData();
                        int columns = md.getColumnCount();
                        for (int i = 1; i <= columns; i++) {
                        columnNames.addElement( md.getColumnName(i) );
                        }
                        while (rs.next()) {
                        Vector row = new Vector(columns);
                        for (int i = 1; i <= columns; i++) {
                        row.addElement( rs.getObject(i) );
                        }
                        data.addElement( row );
                        }
                        rs.close();
                        statement.close();
                        }
                        catch(Exception e) {}
                        JFrame tab=new JFrame();
                        JTable table = new JTable(data, columnNames);
                        JScrollPane scrollPane = new JScrollPane( table );
                        tab.add( scrollPane );
                        tab.setVisible(true);
                        tab.setSize(300,100);
                        }
                        });
                    return panel;
            }

            public static void main(String args[]) {
                    SwingUtilities.invokeLater(new Runnable() {
                            @Override
                            public void run() {
                                    Tryout ex = new Tryout();
                                    ex.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                                    ex.setSize(500,500);
                                    ex.setVisible(true);
                            }
                    });
            }       
    } 
```

这是我的桌子：

![表结构](../Images/a963c61c468cd3a0cad94a3dac5f9f21.png)

另外，我正在尝试在搜索表单下方的面板本身中显示表格，但是当我添加时它会出错

```
panel.add(scrollpane); 
```

我该如何纠正这个问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:32:34.780

Sudhanshu 的意思是：

```
PreparedStatement statement = con.preparedStatement("SELECT * FROM delicious WHERE name = ?");
statement.setString(1,s);
ResultSet rs= (ResultSet) statement.executeQuery(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T14:26:29.840

如果其类型为字符串 (varchar)，则将名称括起来。在这种情况下最好使用 PreparedStatement。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T17:03:36.283

基本调试。您是否显示了 PreparedStatement 中使用的“s”值？

```
s = field.getText(); 
```

从我所见，当您构建 GUI 时会执行此语句，这没有任何意义，因为用户甚至没有在此文本字段中输入任何文本。

当您实际调用 SQL 时，需要执行该语句。

# java - Value[] 的默认值是多少？

> ID：15572763
> 
> 赞同：-6
> 
> 时间：2013-03-22T14:25:18.100
> 
> 标签：java, unit-testing, jakarta-ee, jstl

的默认值是什么`Value[]`，为什么，因为，我需要默认值来编写测试用例。

`property.getValues`将返回`Value[]`，但只是想看看究竟是什么默认值 `Value[]`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:34:55.550

```
Anything that holds an object is initialized to null. 
int/short/byte 0.
float/double 0.0
booleans false. 
```

当您使用新的和数组大小创建数组时，所有条目都归零。在这种情况下，答案为空。您需要显式初始化任何局部变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:28:02.920

与任何 Java 数组一样，数组类型的对象字段`Value[]`默认为`null`，而不管 的确切类型如何`Value`：

```
public class Demo {
    private int[] intArray;
    private String[] strArray;
    private MyClass[] myArray;
} 
```

在上面的示例中`intArray`，`strArray`、 和`myArray`将一直存在，`null`直到您为它们分配值。

# python - 如何在 python 中实现 Haskell 实例？

> ID：15572767
> 
> 赞同：-1
> 
> 时间：2013-03-22T14:25:39.727
> 
> 标签：python, haskell, inheritance, multiple-inheritance

在 Haskell 中，如果您创建这样的实例：

```
instance (Eq a) => POrd (Set a) where
    ... 
```

那么如果你需要在python中做同样的事情，是否意味着我们正在创建一个名为Set的类，它继承自另一个名为POrd的类，而Set继承自一个名为Eq的类？就像是：

```
class Eq:
    ...

class POrd:
    ...

class Set(Eq, POrd): 
    ... 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:27:58.907

`Eq`您的 Python 代码不对和之间的关系做任何假设`POrd`，但`Set`确实从这两个类继承。它们中的每一个都可以是完全不相关的。

`Eq`拥有继承自`POrd`和`Set`自的“链”`Eq`将转化为类似：

```
class POrd:
    ...

class Eq(POrd):
    ...

class Set(Eq): 
    ... 
```

# jmeter - 用于 JMX 的 JMeter PerfMon Metrics Collector 插件

> ID：15572769
> 
> 赞同：0
> 
> 时间：2013-03-22T14:25:42.093
> 
> 标签：jmeter, jmx, jmeter-plugins

我无法让 JMeter PerfMon Metrics Collector 侦听器收集 JMX 数据。我已经启动了“serverAgent”。如插件主页[https://code.google.com/p/jmeter-plugins/wiki/PerfMon](https://code.google.com/p/jmeter-plugins/wiki/PerfMon)中所述，我已经使用以下参数启动了远程 JBoss 服务器：

```
java -Dcom.sun.management.jmxremote.port=4711 -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.local.only=false -Dcom.sun.management.jmxremote.ssl=false 
```

然后，我配置 JMeter Perf Mon 侦听器以从端口“5444”收集数据，将 Metric 配置为收集“JMX”，以及 Metric 参数“gc-time”。在配置中，我将 JMX 连接参数定义为“localhost”和端口“4711”。

当我启动 JMeter 测试时，“serverAgent”会出现以下错误：

```
 INFO    2013-03-22 16:16:06.682 [kg.apc.p] (): Starting measures: jmx:gc-time   cpu:
ERROR: java.lang.NoSuchMethodError: method java.lang.String.isEmpty with signature ()Z     was not found.
*** Problem's technical details go below ***

Exception in thread "main" java.lang.NoSuchMethodError: method java.lang.String.isEmpty     with signature ()Z was not found.
   at kg.apc.perfmon.metrics.JMXMetric.<init>(JMXMetric.java:35)
   at kg.apc.perfmon.metrics.AbstractPerfMonMetric.createMetric(AbstractPerfMonMetric.java:65)
   at kg.apc.perfmon.PerfMonMetricGetter.setUpMetrics(PerfMonMetricGetter.java:138)
   at kg.apc.perfmon.PerfMonMetricGetter.processCommand(PerfMonMetricGetter.java:63)
   at kg.apc.perfmon.PerfMonMetricGetter.processNextCommand(PerfMonMetricGetter.java:101)
   at kg.apc.perfmon.PerfMonWorker.read(PerfMonWorker.java:210)
   at kg.apc.perfmon.PerfMonWorker.processCommands(PerfMonWorker.java:97)
   at kg.apc.perfmon.AgentTool.processParams(AgentTool.java:72)
   at kg.apc.cmdtools.PluginsCMD.processParams(PluginsCMD.java:63)
   at kg.apc.cmdtools.PluginsCMD.processParams(PluginsCMD.java:23)
   at java.lang.reflect.Method.invoke(libgcj.so.7rh)
   at kg.apc.cmd.UniversalRunner.main(UniversalRunner.java:150) 
```

如果我只收集 CPU 和内存，那么 JMeter 一切正常。只有在收集 JMX 时，我才会收到此异常。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T13:00:59.160

现在 jmeter 插件中有一个独立的 JMX 指标收集器（从 1.1.2 版开始）

虽然它很新（并且可能充满了错误，因为我写了它:)，也许你可以试试那个？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T20:57:10.533

isEmpty() 方法直到 JDK 1.6 才被添加。我的猜测是您使用的是 JDK 1.5 或更早版本。

# magento - 不小心将 chown "root" 设置为我的所有服务器

> ID：15572770
> 
> 赞同：-1
> 
> 时间：2013-03-22T14:25:43.017
> 
> 标签：magento, nginx, magento-1.7, php

我在我的网络服务器上运行 2 个 magento 应用程序，我不小心从服务器的根目录设置了“chown -R www-data:www-data *”。意思是，所有文件都归用户root所有。

这立即在magento网站上产生了问题，即：mysql没有连接，因为它应该使用“mysql”用户。

我已经解决了这个问题，并将网页文件设置为由 www-data 拥有。

网站现在运行良好，但是当我尝试完成订单时，它会在超时前挂在那里一分钟。订单在后台注册，但没有按预期显示“订单成功页面”。

我正在运行 nginx 和 php-fpm，php-fpm 日志显示：

```
[22-Mar-2013 13:31:24] WARNING: [pool www] child 1791, script '/var/www/website.com/index.php' (request: "POST /index.php") execution timed out (1436.378897 sec), terminating
[22-Mar-2013 13:31:24] WARNING: [pool www] child 1791 exited on signal 15 (SIGTERM) after 1600.011818 seconds from start
[22-Mar-2013 13:31:24] NOTICE: [pool www] child 2717 started 
```

发生了什么？是否会因为某些文件不属于其正确所有者而发生这种情况？如果是这样，哪些文件/文件夹是那些文件/文件夹，它应该拥有什么所有者？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:38:12.007

正确设置 Magento 文件/文件夹权限后，这将成为服务器管理员 101 问题。

**从 / 递归**销毁权限/所有权元数据的影响是深远的，一旦完成，通常需要完全重新安装操作系统或退回到未受污染的 VM 映像。

您可能已经修复了足够的操作系统来运行，但各种故障会不断出现。每个以自己的用户身份运行的守护程序都需要恢复所有权/组。

备份您的 Magento 数据库、Web 服务器公用文件夹并重新安装/将操作系统恢复到其工作环境。关于如何执行此操作的大量关于服务器故障的问题已得到解答。

如果您要管理自己的服务器，Magento 除了应用程序知识外，还需要操作系统管理知识。开始修改/修改/学习，这样您就知道如何不造成操作系统损坏。那里还有一些陷阱。

关于服务器故障的相关答案（Linux 发行版可能与您的不同）：

[https://serverfault.com/questions/141934/restore-default-ownership-in-centos-after-terrible-chown](https://serverfault.com/questions/141934/restore-default-ownership-in-centos-after-terrible-chown)

[https://serverfault.com/questions/356112/reverting-file-owner-on-centos](https://serverfault.com/questions/356112/reverting-file-owner-on-centos)

[https://serverfault.com/questions/469070/recovering-from-a-system-wide-chown](https://serverfault.com/questions/469070/recovering-from-a-system-wide-chown)

[https://serverfault.com/questions/378074/recovering-from-bad-chown-command](https://serverfault.com/questions/378074/recovering-from-bad-chown-command)

[https://serverfault.com/questions/441663/how-to-revert-mass-ownership-change](https://serverfault.com/questions/441663/how-to-revert-mass-ownership-change)

# jquery - 如何判断一个对象是否是 jQuery 函数中的 $(document)？

> ID：15572774
> 
> 赞同：0
> 
> 时间：2013-03-22T14:25:57.323
> 
> 标签：jquery, object, document

```
$.fn.foo = function() {
    console.log($(this));
};

$("#foo").foo();

$(document).foo(); 
```

我如何判断`$(this)`函数内的天气是`$(document)`与否？

* * *

在[这个问题](https://stackoverflow.com/questions/10326889/how-to-know-if-an-object-is-an-html-document-using-javascript)上，人们建议

```
1\. if (obj instanceof HTMLDocument)

2\. if (Object.prototype.toString.call(obj) == "[object HTMLDocument]")

3\. $obj.is('html') 
```

但它们都不起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T14:27:35.760

何况简单...

```
if (this[0] === document) 
```

...因为`this`jQuery 函数内部对应于 jQuery 对象（不是 HTML 对象）。即使这个对象是空的，`this[0]`它仍然是一个有效的表达式——它只是`undefined`.

另一种方法是使用 jQuery [**is**](http://api.jquery.com/is/)方法：

```
if ($(this).is(document)) 
```

...因为它也接受`DOMElement`作为参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:41:48.007

```
$.fn.foo = function() {
    console.log(this[0] == document);
};

$("#foo").foo();

$(document).foo(); 
```

# c++ - 在 GVim 中添加/添加（前缀/后缀）行

> ID：15572782
> 
> 赞同：2
> 
> 时间：2013-03-22T14:26:14.053
> 
> 标签：c++, vim, comments, append, prepend

我希望能够使用*GVim***轻松地** 添加到行前，以便能够在 C++ 中注释某些代码块。我试图这样[做](http://geek.chrislott.org/2012/prepend-append-prefix-postfix-lines-vim/)： *`//`*

 *> 要使用 Vim 为行添加前缀或前置文本，您可以使用 VISUAL BLOCK 模式：
> 
> *   使用 CTRL-V 进入 VISUAL BLOCK 模式选择您想要的行
> *   前缀 按 I 在块的开头插入 键入文本
> *   你想插入（你只会在当前行看到它）按
> *   ESC 退出模式并添加其余行
> 
> 要后缀或追加，您使用类似的技术，但使用 A：
> 
> *   使用 CTRL-V 进入 VISUAL BLOCK 模式选择要添加前缀的行...确保选择整行（选择行并使用 $）
> *   按 A 附加到块
> *   键入您要插入的文本（您只会在当前行看到它）
> *   按 ESC 退出模式并将其余行添加到前面

`//`我得到的唯一东西是在所选块的开头只有一个。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:35:02.650

切换评论是一个已解决的问题；不要试图发明你的（可怜的）替代方案。最受欢迎的插件（我知道）是：

*   [NERD 评论者](http://www.vim.org/scripts/script.php?script_id=1218)
*   [EnhCommentify.vim - 程序中的注释行](http://www.vim.org/script.php?script_id=23)
*   [tComment - 可扩展且通用的评论插件](http://www.vim.org/scripts/script.php?script_id=1173)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:39:06.883

```
CTRL + V
select the lines using arrows (or hjkl)
press I - this puts you into insert mode
Type '// ' (for example)
Hit ESC key to exit insert mode 
```

为我工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T03:17:23.797

它必须是`CTRL`+ `V`，而不是`CTRL`+ `v`。（大写五）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T14:39:08.437

几种方法，假设您要注释 5 行并且在第一行：

```
I//<Esc>
j^.
j^.
j^.
j^.

v4j
:'<,'>norm I//<CR> " the range is inserted for you so that's only norm I//<CR>

v4j
:'<,'>s+^+//<cr> " same deal with the range

:,+4norm I//<CR>

:,+4norm s+^+//<cr>

nnoremap <F4> :s+^+//<cr> 
```

或者简单地使用像[评论这样的插件](https://github.com/tpope/vim-commentary)*

# groovy - Groovy 获取字符串错误

> ID：15572792
> 
> 赞同：0
> 
> 时间：2013-03-22T14:26:34.773
> 
> 标签：groovy, spock

试图弄清楚这个geb和spock测试框架并遇到一些问题。现在我只是在努力让 spock 工作。

```
@Grab(group='org.codehaus.geb', module='geb-core', version='0.7.2')
@Grab(group='org.seleniumhq.selenium', module='selenium-firefox-driver', version='2.31.0')
@Grab(group='org.spockframework', module='spock-core', version='0.6-groovy-1.7')
@Grab(group='org.codehaus.groovy', module='groovy-all', version='1.8.6')

import geb.*
import org.openqa.selenium.firefox.FirefoxDriver
import spock.lang.*

class TestSimpleGoogle extends Specification {
    def "pushing an element on the stack"() {
        when: "A variable is defined"
        title = "Hello"

        then: "Check to see if it equals hello"
        assert(title == "Hello")
    }
} 
```

这是我从命令终端得到的输出

```
Caught: java.lang.NoSuchMethodError: org.codehaus.groovy.runtime.InvokerHelper.getVersion()Ljava/lang/String;
java.lang.NoSuchMethodError: org.codehaus.groovy.runtime.InvokerHelper.getVersion()Ljava/lang/String;
        at org.spockframework.util.GroovyReleaseInfo.getVersion(GroovyReleaseInfo.java:23)
        at org.spockframework.util.VersionChecker.<clinit>(VersionChecker.java:18)
        at org.spockframework.compiler.SpockTransform.<init>(SpockTransform.java:43) 
```

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:38:45.027

您为您正在抓取的 Groovy 版本抓取了错误版本的 spock，我不确定您为什么要抓取 groovy...

这适用于 Groovy 2.1.2：

```
@Grab( 'org.spockframework:spock-core:0.7-groovy-2.0' )
import spock.lang.*

class TestSimpleGoogle extends Specification {
  def "pushing an element on the stack"() {
    when: "A variable is defined"
      def title = "Hello"

    then: "Check to see if it equals hello"
      title == "Hello"
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:38:57.803

对于 Groovy 1.8，您需要一个以`groovy-1.8`. 要开始，您唯一需要的是`@Grab(group='org.spockframework', module='spock-core', version='0.7-groovy-1.8')`.

# javascript - 碰撞时滚动固定 div

> ID：15572798
> 
> 赞同：2
> 
> 时间：2013-03-22T14:26:40.380
> 
> 标签：javascript, jquery

我正在尝试创建一个页面，顶部有两个固定 div（div1 和 div2），一个 div（div3），页面内容在下面自然流动。当用户滚动div3到达div1的底部时，我希望两个div融合在一起并正常滚动。该[网站](http://shun.kaiusaltd.com/ "网站")具有我试图复制的确切行为。

我使用不同的 z-index 将 div1 和 div3 保持在 div2 之上，并在 div1 和 div3 触摸时检测到：

```
$(window).scroll(function(e) {
    var calc = $("#div3").offset().top - $("#div1").height();
    if ($(this).scrollTop() >= calc) 
    {
        //fuse
    }
    else
    {
        //unfuse
    }
}); 
```

但我不知道如何将 div3 和 div1 融合在一起。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:22:28.957

这是一种解决方案。`.header`它依赖`.content-inner`于`.content`. `.header`显示为`position:fixed`直到达到滚动阈值，此时将添加一个类`.content`并`.header`切换回它，`position:static`以便它回到页面的常规流程中。

`.content-inner`是必要的，因为当回到静态定位时，我们需要减少`margin-top`以腾出空间。`.header`

[jsFiddle](http://jsfiddle.net/Tyriar/GkwEc/1/)

**HTML**

```
<div class="banner"></div>
<div class="content">
    <div class="header"></div>
    <div class="content-inner">
        ...
    </div>
</div> 
```

**CSS**

```
body,
html {
    margin:0;
    padding:0;
}

.banner {
    position:fixed;
    z-index:-1;
    left:0;
    right:0;
    top:100px;
    height:300px;
    background-color:#F00;
}

.content {
    margin-top:400px;
    background-color:#FFF;
    position:relative;
}
.content.fuse {
    margin-top:300px;
}

.content-inner {
    background-color:#FFF;    
}

.header {
    position:fixed;
    height:100px;
    background-color:#00F;
    left:0;
    top:0;
    right:0;
}

.content.fuse .header {
    position:static;
} 
```

**JS**

```
$(window).scroll(function(e) {
    if ($(window).scrollTop() < 300)
        $('.content').removeClass('fuse');
    else
        $('.content').addClass('fuse');
}); 
```

# .net - 如何将 x86 和 x64 DLL 混合到同一个 MSI 包中？

> ID：15572801
> 
> 赞同：3
> 
> 时间：2013-03-22T14:26:43.770
> 
> 标签：.net, visual-studio-2010, profiling, windows-installer

我正在开发一个 .NET 分析器，我需要为`64bit`机器构建 2 个 DLL（一个用于`x86`兼容应用程序，另一个用于兼容应用程序`x64`）。我想创建一个`MSI`包含 2 个 DLL 的单个。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:09:22.867

是的，您可以创建一个 MSI 来安装文件。但是，MSI 包是 32 位或 64 位的。64 位 MSI 程序包无法安装在 32 位计算机上，32 位程序包无法安装到 64 位位置。因此，如果您同意将 64 位二进制文​​件安装到 32 位位置（如`C:\Program Files (x86)\`），那么您只需将`Condition`s 添加到您`Component`的 s 即可安装正确的位。

例如，使用 WiX 工具集，代码可能如下所示：

```
<Component>
  <Condition>NOT VersionNT64</Condition>

  <File Source='path\to\32bit.dll' />
<Compnent>

<Component>
  <Condition>VersionNT64</Condition>

  <File Source='path\to\64bit.dll' />
<Compnent> 
```

# javascript - Phonegap插件不能调用android的原生函数

> ID：15572803
> 
> 赞同：0
> 
> 时间：2013-03-22T14:26:45.323
> 
> 标签：javascript, android, cordova, plugins, native-methods

我是phonegap和android的新手。

我在 phonegap 和 android 中创建了一个插件来使用 javascrip 调用本机函数。

我的代码如下。

# 插件/BannerLink.js

```
var BannerLink = {

    callNativeFunction: function (success, fail, resultType) {
        //alert(resultType);
         return    Cordova.exec( success, fail,
                    "org.apache.cordova.example.BannerLink", 
                    "nativeFunction", 
                    [resultType]);

                    alert(resultType);
    }
}; 
```

# 我的html视图文件

```
function bannerPressed(link){
    alert(link.rel);
    //window.location.href=link.rel;
    //window.open(link.rel);
    BannerLink.callNativeFunction( nativePluginResultHandler,nativePluginErrorHandler,link.rel );
}
function nativePluginResultHandler (result) {
    alert("SUCCESS: \r\n"+result );
}

function nativePluginErrorHandler (error) {
    alert("ERROR: \r\n"+error );
} 
```

# 我的 BannerLink.java 文件

```
package org.apache.cordova.example;

import org.apache.cordova.api.Plugin;
import org.apache.cordova.api.PluginResult;
import org.json.JSONArray;

import android.app.AlertDialog;
import android.util.Log;

@SuppressWarnings("deprecation")
public class BannerLink extends Plugin {

    @Override
    public PluginResult execute(String action, JSONArray args, String callbackId)  {
        // TODO Auto-generated method stub

        AlertDialog alertDialog=new AlertDialog.Builder(null).create();
        alertDialog.setTitle("Reset...");
        alertDialog.show();
        Log.d("HelloPlugin", "Hello, this is a native function called from PhoneGap/Cordova!"); 
        //only perform the action if it is the one that should be invoked 
        return new PluginResult(PluginResult.Status.ERROR);
    }

} 
```

# 我的 config.xml 文件

```
<plugin name="BannerLink" value="org.apache.cordova.example.BannerLink"/> 
```

我正在使用phonegap 2.0

请纠正我在哪里犯了错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:36:55.153

有几个错误是你的JS。“cordova”是小写而不是大写，您只需要在 exec 方法中提供插件名称而不是完整路径：

```
var BannerLink = {
    callNativeFunction: function (success, fail, resultType) {
        return    cordova.exec(success, fail,
                    "BannerLink", 
                    "nativeFunction", 
                    [resultType]);
    }
}; 
```

您尝试在 Java 代码中显示的 AlertDialog 需要包装在可运行文件中，例如：

```
 Runnable runnable = new Runnable() {
        public void run() {

            AlertDialog alertDialog=new AlertDialog.Builder(null).create();
            alertDialog.setTitle("Reset...");
            alertDialog.show();
        };
    };
    this.cordova.getActivity().runOnUiThread(runnable); 
```

# java - 基准 JUnit AllTests

> ID：15572806
> 
> 赞同：1
> 
> 时间：2013-03-22T14:26:48.350
> 
> 标签：java, junit

有没有办法在 JUnit 测试套件中放置简单的开始/停止时间？

当我创建一个测试套件类时，它看起来像这样，我可以运行它。但是我怎么能在这里放一个简单的长启动时间变量来显示所有测试需要多长时间才能运行呢？

```
public class AllTests {

    public static Test suite() throws Exception {
        TestSuite theTestSuite = new TestSuite();
        theTestSuite.addTest(com.company.AllBlahTests.suite());
        theTestSuite.addTest(com.company.AllOtherTests.suite());
        return theTestSuite;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T15:12:37.250

请参阅上一个问题的答案。[jUnit 4.x 中的前后套件执行挂钩](https://stackoverflow.com/questions/82949/before-and-after-suite-execution-hook-in-junit-4-x#177069)

如果您实施该解决方案，您可以将计时代码放在套件类的设置和拆卸方法中。

# servlets - 如何使 opencms 和 servlet 工作？

> ID：15572808
> 
> 赞同：0
> 
> 时间：2013-03-22T14:26:50.023
> 
> 标签：servlets, opencms

我在尝试将 kaptcha.jar ( [https://code.google.com/p/kaptcha/](https://code.google.com/p/kaptcha/) ) 实施到 opencms 时遇到问题。

我添加了 jar 并且它已正确加载，就像在我的 jsp 中一样：

```
<%@ page import="com.google.code.kaptcha.servlet.KaptchaServlet" %>
<%
KaptchaServlet test = new KaptchaServlet();
String temp = test.getClass().getSimpleName();
%>
<div> Test : <%=test%></div> 
```

正在显示：

```
Test : com.google.code.kaptcha.servlet.KaptchaServlet@14b1fda 
```

所以我认为罐子已经加载（虽然我可能错了）。

在我的 web.xml 中，我添加了这个：

```
<servlet>
        <servlet-name>Kaptcha</servlet-name>
        <servlet-class>com.google.code.kaptcha.servlet.KaptchaServlet</servlet-class>
</servlet>
<servlet-mapping>
        <servlet-name>Kaptcha</servlet-name>
        <url-pattern>/kaptcha.test</url-pattern>
</servlet-mapping> 
```

重新启动我的服务器，并尝试访问以下 URL，总是得到 404/page 不存在：

*   本地主机/kaptcha.test
*   本地主机/opencms/kaptcha.test
*   本地主机/opencms/opencms/kaptcha.test
*   本地主机：8080/kaptcha.test
*   本地主机：8080/opencms/kaptcha.test
*   本地主机：8080/opencms/opencms/kaptcha.test

我做错了什么？为什么我的 servlet 不工作？

我在 Eclipse 的自定义动态 Web 项目中尝试了该 jar，它运行良好。在这个项目中，当我访问 /kaptcha.test 时，会显示一个图像，每次刷新页面时都会改变。

谢谢你的帮助。

注意：我使用的是 OpenCMS 7.0

马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-04T04:11:39.350

[您是否从https://code.google.com/p/kaptcha/downloads/detail?name=kaptcha-2.3.2.zip](https://code.google.com/p/kaptcha/downloads/detail?name=kaptcha-2.3.2.zip)下载了 zip ？

如果这样做，您将在 zip 中看到一个 .war 文件。

如果您正确安装和设置了 Apache Tomcat，您只需将 war 文件放在 Web Apps 目录中，就会自动为您安装示例......

然后您可以从那里看到如何在 Eclipse 项目中构建 Web 应用程序。

# javascript - 移动连接/断开连接事件

> ID：15572813
> 
> 赞同：0
> 
> 时间：2013-03-22T14:26:55.553
> 
> 标签：javascript, android, iphone, cordova, mobile

当我的 websocket 服务器由于手机与互联网断开连接而失去连接时，我可以每隔几分之一秒定期检查一次，但这效率低下。

是否有我可以监听的事件来触发此事件，而不是仅在用户连接到 Internet 时发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:31:32.353

您可以使用PhoneGap[在线](http://docs.phonegap.com/en/2.5.0/cordova_events_events.md.html#online)/[离线](http://docs.phonegap.com/en/2.5.0/cordova_events_events.md.html#offline)事件。

# php - 更新数据 php/mysql

> ID：15572814
> 
> 赞同：-3
> 
> 时间：2013-03-22T14:26:59.620
> 
> 标签：php, mysql, sql-update

我刚开始使用 php 和 mysql，我遇到了这种情况。用户注册到页面并登录。我用`$_SESSION['SESS_USERNAME']`来问候他，直到这里一切正常。然后我想在输入字段中显示与此登录用户相关的数据，例如名字、姓氏、地址，然后他可以在数据库中编辑和更新。我该怎么做呢？我找到了很多示例，但是当我只想为登录的用户显示数据时，我无法弄清楚什么最适合我的场景。任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:29:50.047

你会想做一些类似的事情：

```
<?php
$con=mysqli_connect("example.com","peter","abc123","my_db");
// Check connection
if (mysqli_connect_errno())
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }

$result = mysqli_query($con,"SELECT * FROM users WHERE username = '".$_SESSION['SESS_USERNAME']."'");

while($row = mysqli_fetch_array($result))
  {
  echo $row['FirstName'] . " " . $row['LastName'];
  echo "<br />";
  }

mysqli_close($con);
?> 
```

这是使用[`MySQLi SELECT`](http://www.w3schools.com/php/php_mysql_select.asp).

`SELECT * FROM users WHERE username = '".$_SESSION['SESS_USERNAME']."'`基本上说选择等于会话用户名`users`的所有行。`username`所以理论上这将返回该用户名会话的数据。

要显示列数据，您只需将列名放入：

`$row['column_name']`

例如，它可以被`echo`淘汰。

希望这是有用的，同样在将来，请向我们[展示您尝试过](http://whathaveyoutried.com)的内容，我建议您阅读[常见问题解答](https://stackoverflow.com/faq)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:34:46.340

我会建议使用他的 user_id。当他登录时，您可以通过 user_id 获取他的信息。

例子：

```
<?php

$user = new User();

//Check if is numeric only
if(is_numeric($_SESSION["user_id"]))
  $user->GetUser((int)$_SESSION["user_id"]);
else
  throw new Exception("Session incorrect");   

class User
{
   public $user_name;
   public $last_name;
   public $address;

   public function __construct()
   {
   }

   public function GetUser($user_id)
   {
      //Get user info from database
      // fill object
     $this->user_name = $result["username"];
     $this->last_name = $result["last_name"];
     $this->address = $result["address"];

     return $this;
   }
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T14:33:09.033

其他信息存储在哪里？您需要使用用户名来搜索和检索它们。假设它们在 MySQL 数据库中，请查看[有关 PDO 的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)以安全地检索条目

# javascript - 如何从 window.opener 执行未暴露给窗口的函数？

> ID：15572818
> 
> 赞同：1
> 
> 时间：2013-03-22T14:27:09.903
> 
> 标签：javascript, authentication, oauth

我目前正在玩构建类似 Mozilla Persona 的东西。到目前为止，我已经构建了这个：

```
(function()
{
    var loginFailedCallback = function(){};

    var loginSuccessCallback = function(){};

    var MyId = {
        Request: function(fail, success)
        {
            loginFailedCallback = fail;
            loginSuccessCallback= success;

            window.open("oauth.html", 'test', "width=650,height=280,location=0,menubar=0,resizable=0,scrollbars=0,status=0,toolbar=0");
        }
    };

    window.MyId = MyId;
})(); 
```

如您所见，我创建了一个对象，站点所有者可以使用它来向用户请求身份验证过程。这两个回调不会暴露给全局命名空间，因此它们不会被站点所有者代码（或控制台）触发。

但是问题在于：如何从弹出窗口中执行这些回调？我知道我可以使用 window.opener 访问开启器窗口。但是由于回调没有暴露给窗口对象，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:50:13.697

您无法从弹出窗口中执行它。

您必须将其公开给全局范围。例如，为您的*库*创建一个全局对象并将其附加到该对象。

然后，您将需要以某种方式检查函数的执行位置。您将禁用网站所有者通过检查而不是不公开来触发该功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:09:13.640

[对 Mozillas Persona](https://login.persona.org/include.orig.js)的开发版本的研究揭示了[Cross-Window Messaging](https://developer.mozilla.org/de/docs/DOM/window.postMessage)的使用。

# asp.net - 如何在 asp.net 中使用 Oauth 发布推文？

> ID：15572821
> 
> 赞同：2
> 
> 时间：2013-03-22T14:27:17.233
> 
> 标签：asp.net, tweets

我想在我的项目中开发一个功能，我应该能够使用 oauth 向 Twitter 发送推文。我曾尝试使用以下直接推文方法：

```
https://twitter.com/intent/tweet?text=' + text + "&url=" + encodeURIComponent("myurl"); 
```

但这需要在每条推文上登录。

谁能帮我吗…………。

# symfony - Symfony2中带有变量的简单Twig IF语句

> ID：15572830
> 
> 赞同：1
> 
> 时间：2013-03-22T14:27:38.050
> 
> 标签：symfony, twig

我试图只包含一些基于 IF 语句的 HTML：

```
{% if "{{ app.request.attributes.get('var_name') }}" != "" %}
<meta id="var_name" content="{{ app.request.attributes.get('var_name') }}" />
{% endif %} 
```

如果 var_name 变量包含数据，则上述内容将完全按预期工作，但如果它为空或未定义，它总是返回如下 HTML：

```
<meta id="var_name" content="" /> 
```

...所以基本上它将 IF 语句注册为 true，即使没有什么可显示的。

变量是否定义没有区别。

另外，这个：

```
{% if {{ app.request.attributes.get('var_name') }} != "" %} 
```

...返回此错误：

哈希键必须是带引号的字符串、数字、名称或括在括号中的表达式（在...

我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T14:33:54.963

做这个：

```
{% if app.request.attributes.get('var_name') != "" %} 
```

你不需要`{{ }}`内部`{% %}`

更多信息：[树枝-如果](http://twig.sensiolabs.org/doc/tags/if.html)

# sql-server-2008 - 带有 (XLOCK,READPAST) 的 SQL Server Select 语句

> ID：15572831
> 
> 赞同：0
> 
> 时间：2013-03-22T14:27:39.740
> 
> 标签：sql-server-2008, database-deadlocks

我运行了以下查询，我的记录现在被锁定，我无法读取、更新或删除。出于测试目的，我没有调用 commit tran，现在这些记录卡住了。我怎样才能释放这些已经放置的锁。

```
 BEGIN TRAN

  SELECT * from inquiry with (XLOCK,READPAST)  where inquiry_id=228563 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:30:56.540

您应该找到您通过 sys.dm_tran_locks 锁定进程 ID 并手动终止它

```
SELECT * FROM sys.dm_tran_locks WHERE RESOURCE_TYPE = ‘OBJECT’ 
```

然后使用 KILL 和 id 号

# java - compareTo() 与 equals() 不一致时的后果

> ID：15572832
> 
> 赞同：6
> 
> 时间：2013-03-22T14:27:40.630
> 
> 标签：java

有人可以阐明与班级`compareTo()`不一致时的后果是什么。`equals()`我已经读过，如果`Obj1.compareTo(Obj2) = 0`那么它不是强制性的`Obj1.equals(Obj2) = true`。但如果发生这种情况，后果是什么。谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T14:32:14.467

的文档[`Comparable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)对此进行了一些详细的解释：

> 一个类的自然顺序`C`被认为是与`equals`当且仅当具有与类的每个和`e1.compareTo(e2) == 0`相同的布尔值时一致的。请注意，它不是任何类的实例，即使返回，也应该抛出一个。`e1.equals(e2)``e1``e2``C``null``e.compareTo(null)``NullPointerException``e.equals(null)``false`
> 
> 强烈建议（尽管不是必需的）自然排序与`equals`. 之所以如此，是因为没有显式比较器的排序集（和排序映射）在与自然顺序与`equals`. 特别是，这样的排序集（或排序图）违反了集合（或图）的一般合同，该合同是根据`equals`方法定义的。
> 
> 例如，如果向不使用显式比较器的排序集添加两个键`a`和`b`，则第二个添加操作返回（并且排序集的大小不会增加），因为从排序集的角度来看，和是等价的。`(!a.equals(b) && a.compareTo(b) == 0)``false``a``b`
> 
> 几乎所有实现`Comparable`的 Java 核心类都具有与`equals`. 一个例外是`java.math.BigDecimal`，其自然排序等同于`BigDecimal`具有相同值和不同精度的对象（例如`4.0`和`4.00`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-03T14:32:53.467

尽管文档说一致性不是强制性的，但最好始终确保这种一致性，因为您永远不知道您的对象是否有一天会出现在`TreeMap`/`TreeSet`或类似的地方。如果`compareTo()`为 2 个不相等的对象返回 0，则所有基于树的集合都将被破坏。

例如，想象一个类`Query`，实现一个 SQL 查询，有 2 个字段：

*   tableList：表列表
*   参考：使用此类查询的程序列表

假设 2 个对象相等，如果它们的 tableList 相等，即`tableList`是这个对象的自然键。`hashCode()`并且`equals()`只考虑这个领域`tableList`：

```
public class Query implements Comparable {
    List<String> tableList;
    List<String> references;

    Query(List<String> tableList, List<String> references) {
        this.tableList = tableList;
        this.references = references;
        Collections.sort(tableList); // normalize
    }

    @Override
    public int hashCode() {
        int hash = 5;
        hash = 53 * hash + Objects.hashCode(this.tableList);
        return hash;
    }

    @Override
    public boolean equals(Object obj) {
        if (obj == null) {
            return false;
        }
        if (getClass() != obj.getClass()) {
            return false;
        }
        final Query other = (Query) obj;
        return Objects.equals(this.tableList, other.tableList);
    }
} 
```

假设我们希望按照引用的数量进行排序。天真地编写代码`compareTo()`会产生一个看起来像这样的方法：

```
public int compareTo(Object o) {
    Query other = (Query) o;
    int s1 = references.size();
    int s2 = other.references.size();
    if (s1 == s2) {
        return 0;
    }
    return s1 - s2;
} 
```

这样做似乎没问题，因为相等和排序是在两个单独的字段上完成的，到目前为止一切都很好。

但是，无论何时放入 a`TreeSet`或 a `TreeMap`，都是灾难性的：这些类的实现认为如果 compareTo 返回 0，则元素相等。在这种情况下，这意味着每个具有相同引用数量的对象确实是“相等”的对象，显然情况并非如此。

更好的`compareTo()`方法可能是：

```
public int compareTo(Object o) {
    Query other = (Query) o;
    // important to match equals!!!
    if (this.equals(other)) {
        return 0;
    }
    int s1 = references.size();
    int s2 = other.references.size();
    if (s1 == s2) {
        return -1; // not 0, they are NOT equal!
    }
    return s1 - s2;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T14:35:26.813

一些集合会假设如果两个对象跟随，`obj1.compareTo(obj2) = 0`那么`obj1.equals(obj2)`也是如此。例如：排序`TreeSet`。未能满足此逻辑将导致图标一致的集合。请参阅： [比较器和 equals()](https://stackoverflow.com/questions/4344246/comparator-and-equals)。

# java - 打开一个新的终端窗口并通过java在其中执行命令而不使用bash脚本

> ID：15572838
> 
> 赞同：1
> 
> 时间：2013-03-22T14:27:57.737
> 
> 标签：java, macos, bash, terminal

例如，这是我的 bash 脚本

```
osascript -e 'tell app "Terminal"
 do script "./process1"
end tell'

osascript -e 'tell app "Terminal"
 do script "./process2"
end tell' 
```

基本上，它将打开两个不同的终端窗口（在 mac 上）并执行定义的命令。我尝试在java中通过

```
process1 = Runtime.getRuntime().exec(new String[]{"process1"});
process2 = Runtime.getRuntime().exec(new String[]{"process2"}); 
```

问题是似乎只打开了一个终端（并且不可见 - 它在后台运行），然后执行了两个命令 process1 和 process2。但是由于进程 1 将使该终端保持忙碌，因此进程 2 无法运行。这就是为什么我想打开不同的终端来执行这些命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:28:27.077

为每个人创建一个线程。并给出一个时间空间“睡眠（一段时间线程 1 或 2）”，这将根据您的操作系统运行。

# excel - 如何在将导入 Access 的 Excel 中转换此文本日期？

> ID：15572839
> 
> 赞同：1
> 
> 时间：2013-03-22T14:27:58.147
> 
> 标签：excel, ms-access, excel-formula

我有一个包含如下值的文本列的电子表格：

```
13:09:23 01 JUL 2011 
```

我将此电子表格导入 Access 数据库，我需要类型为日期/时间，如下所示：

```
7/1/2011 1:09:23 PM 
```

是不是在导入前在Excel中更改，还是导入后在Access中处理更容易？

我尝试在 Excel 中添加一个新列 (B) 并`=DATEVALUE(A1)`输入 B1，它可以正确地给我日期。然后我尝试将列格式化为不同的日期类型，但它们都忽略了时间，只显示 12:00 AM。

如何以上面列出的格式同时获取日期和时间？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:29:58.210

```
=datevalue(A1) + timevalue(A1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:34:56.387

设置要读取的公式，`=TEXT("YOUR Cell ref","m/d/yyyy h:MM:ss AM/PM")`这将强制您的格式。

# c# - 来自代码隐藏的网格视图内的绑定标签。

> ID：15572841
> 
> 赞同：1
> 
> 时间：2013-03-22T14:28:00.797
> 
> 标签：c#, asp.net, gridview

我想将我的 totalcomplete 变量绑定到我的 gridProgress 中的 lblComplete 但我不知道该怎么做，有人可以帮我吗？

ASP 代码：

```
<asp:GridView ID="gridProgress" runat="server" AutoGenerateColumns="False">
    <Columns>
       <asp:TemplateField HeaderText="Complete">
          <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" Width="10%" />
          <HeaderStyle HorizontalAlign="Center" />
          <ItemTemplate>
              <asp:Label ID="lblComplete" runat="server"></asp:Label>
          </ItemTemplate>
      </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

C#代码：

```
da = new SqlDataAdapter(sql, oConn);
da.Fill(ds);

//count number of tasks completed, not completed
int count = ds.Tables[0].Rows.Count;
string value = ds.Tables[0].Rows[0]["Completed"].ToString();
int completed = 0;
for (int i = 0; i < count; i++)
{
   if (value == "No")
   {
       completed++;
   }                
   int totalcomplete = completed;
   //here i want to bind totalcomplete to my lblCompleted
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:46:48.087

使用 的`FindControl`属性`Gridview`。

```
Label lbl = gv.Rows[rowIndex].FindControl("lblComplete") as Label;
lbl.Text = Convert.ToString(totalcomplete); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:50:32.740

你的问题不清楚。
你想在每一行
或其他地方显示totlalComplete吗？
因为您在 gridview 中有一个模板字段
所以它将在每一行中呈现

**而且你的循环也很奇怪**
应该如下

```
int count = ds.Tables[0].Rows.Count;
int completed = 0;
for (int i = 0; i < count; i++)
{
   string value = ds.Tables[0].Rows[i]["Completed"].ToString();
   if (value == "No")
   {
      completed++;
   }                
   int totalcomplete = completed;
   //here i want to bind totalcomplete to my lblCompleted
} 
```

## 编辑 1

这是一个链接，可以帮助您
[在 GridView 的页脚中显示总计，并在最后一列中添加列总和（行虎钳）](https://stackoverflow.com/questions/11734308/displaying-total-in-footer-of-gridview-and-also-add-sum-of-columnsrow-vise-in)
[http://csharpdotnetfreak.blogspot.com/2009/07/display-total-in-gridview-footer .html](http://csharpdotnetfreak.blogspot.com/2009/07/display-total-in-gridview-footer.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T14:32:08.660

您可以使用 `DataBinder.Eval method`

```
Text='<%# DataBinder.Eval(Container.DataItem,"totalcomplete") %>' 
```

# jquery - jQuery选择器获取没有特定兄弟元素的元素？

> ID：15572847
> 
> 赞同：0
> 
> 时间：2013-03-22T14:28:19.823
> 
> 标签：jquery, jquery-selectors

我有一些简化的 html 如下所示：

```
<tr>
    <td><input/><span></span><i></i></td>
</tr>
<tr>
    <td><input/><span></span><i></i></td>
</tr>
    <td><input/><span></span></td>
<tr>
    <td><input/><span></span><i></td>
</tr> 
```

我想获得所有没有 i 兄弟的跨度。

根据 jquery 文档：

```
 $("div ~ p") 
```

将匹配作为 div 元素的兄弟的所有 p 元素。

我看不出有任何方法可以重写它以获取**没有**特定兄弟的元素。

这可能与单个选择器有关吗？

谢谢你的帮助

编辑：

这是一个 jsfiddle 来说明：http: [//jsfiddle.net/J6UnY/](http://jsfiddle.net/J6UnY/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:35:23.603

像这样的东西应该能让你到达那里：

```
$('td:not(:has(i))').children('span'); 
```

# iphone - 库存应用程序中使用的 iOS 日期滑块/选择器

> ID：15572857
> 
> 赞同：2
> 
> 时间：2013-03-22T14:28:46.533
> 
> 标签：iphone, ios

我正在尝试制作类似于下面的日期选择器的东西？有谁知道如何/甚至使用什么类型的元素？我在想一个 UISlider，但不确定如何自定义滑块以显示气泡等。任何帮助将非常感激。谢谢

![日期滑块](../Images/4934577130c66abaae830f5ed37d4074.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:30:16.850

这看起来像**A custom View and graph by [Bezier path](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaDrawingGuide/Paths/Paths.html)**。

您还需要[CoreGraphics](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaDrawingGuide/DrawingEnviron/DrawingEnviron.html)的帮助。

那些 1d、1w、1m、3m 看起来像一个按钮或图像。需要在它们上面写动作方法。

# android - Android：将 EditText 定位在一个之上和另一个之下

> ID：15572862
> 
> 赞同：0
> 
> 时间：2013-03-22T14:28:56.130
> 
> 标签：android, android-edittext, center, android-relativelayout

我在包含 (com.test.richedit.RichTextEditor) 的 RelativeLayout 上使用 android:layout_below 和 android:layout_above 尝试始终将其呈现在我的底部 RelativeLayout: (com.test.SetCancelButtons) 和始终低于我的 LinearLayout (com .test.MenuBarTopNote) 。但是，当我这样做时，com.test.richedit.RichTextEditor 根本不会出现。我也试过只使用 android:layout_below="@+id/menu_bar_top" 而没有指定 android:layout_above，但是，当键入多行文本时，EditText 会增长到底部页脚栏后面的 pont（com.测试.SetCancelButtons）。**我本质上希望编辑文本在顶部标题栏和底部页脚栏之间拉伸的大小始终相同，并且内容可滚动**

com.test.richedit.RichTextEditor 本质上是一个 LinearLayout，其中包含一些按钮，用于在其下方的 EdiText 中设置文本样式。

我之前在 ListView 上一起使用过 android:layout_below 和 android:layout_above 并且效果很好，在这种情况下如何获得相同的结果？

我试图将 com.test.richedit.RichTextEditor 置于 2 个视图之上和之下的 xml：

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/llayNote"
            android:layout_width="fill_parent" android:layout_height="fill_parent"
            android:background="@drawable/bkgrd_event_new">

           <com.test.StatusBar
                android:id="@+id/statusbar"
                android:layout_width="fill_parent" 
                android:layout_height="49dip" 
                android:paddingTop="0dip"
                android:background="@drawable/statusbar"
              />

             <com.test.MenuBarTopNote
                android:id="@+id/menu_bar_top"
                android:layout_below="@+id/statusbar"
                android:layout_width="fill_parent" 
                android:layout_height="104dip" 
                android:background="@drawable/menu_bar_top1"
             />

                <!-- EDIT SUBJECT -->
                <RelativeLayout
                    android:layout_below="@+id/menu_bar_top" 
                    android:layout_above="@+id/setcancelbuttons"  
                    android:layout_marginLeft="8dip"
                    android:layout_marginTop="10dip"
                    android:layout_marginRight="8dip"  
                    android:layout_width="fill_parent" android:layout_height="fill_parent">

                        <com.test.richedit.RichTextEditor
                            android:id="@+id/edNoteSubject" 
                            android:layout_width="wrap_content" android:layout_height="wrap_content"
                           />
                </RelativeLayout>

             <com.test.SetCancelButtons
                android:layout_alignParentBottom="true"
                android:id="@+id/setcancelbuttons"
                android:layout_width="wrap_content" 
                android:layout_marginTop="20dip"
                android:layout_height="wrap_content" />

    </RelativeLayout> 
```

com.test.richedit.RichTextEditor：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                                android:orientation="vertical"
                android:layout_width="fill_parent" 
                android:layout_height="fill_parent"
                android:padding="5dip"
                >

        <LinearLayout android:id="@+id/toolbar" 
                      android:orientation="horizontal"
                      android:layout_width="fill_parent" 
                      android:layout_height="wrap_content"
                      android:padding="2dip"
                      >

                <ToggleButton  
                            android:id="@+id/bold"
                            android:background="@drawable/button_toggle"
                            android:layout_width="wrap_content"  
                            android:layout_height="wrap_content" 
                            android:textSize="14sp"
                            android:textOn="B"
                            android:textOff="B"
                            android:textColor="#464646" />   

                <ToggleButton
                            android:id="@+id/italic"
                            android:background="@drawable/button_toggle"
                            android:layout_width="wrap_content"  
                            android:layout_height="wrap_content"
                            android:textSize="14sp"
                            android:textOn="I"
                            android:textOff="I"
                            android:textColor="#464646" />

                <ToggleButton
                            android:id="@+id/underline"
                            android:background="@drawable/button_toggle"
                            android:layout_width="wrap_content"  
                            android:layout_height="wrap_content"
                            android:textSize="14sp"
                            android:textOn="U"
                            android:textOff="U"
                            android:textColor="#464646" />

                <Button
                            android:id="@+id/size"
                            android:background="@drawable/button_toggle"
                            android:layout_width="wrap_content"  
                            android:layout_height="wrap_content"
                            android:textSize="14sp"
                            android:text=" SIZE "
                            android:textColor="#000000" /> 

                <Button
                            android:id="@+id/color"
                            android:background="@drawable/button_toggle"
                            android:layout_width="wrap_content"  
                            android:layout_height="wrap_content"
                            android:textSize="14sp"
                            android:text=" COLOR "
                            android:textColor="#000000" /> 

                <Button
                            android:id="@+id/link"
                            android:background="@drawable/button_toggle"
                            android:layout_width="wrap_content"  
                            android:layout_height="wrap_content"
                            android:textSize="14sp"
                            android:text=" LINK "
                            android:textColor="#464646" /> 

                <ToggleButton
                            android:id="@+id/html"
                            android:background="@drawable/button_toggle"
                            android:layout_width="wrap_content"  
                            android:layout_height="wrap_content"
                            android:textSize="14sp"
                            android:textOn=" HTML "
                            android:textOff=" HTML "
                            android:textColor="#464646" />

<!-- 

                        <ToggleButton
                                        android:id="@+id/strike"
                                        android:background="@drawable/button_toggle"
                            android:layout_width="wrap_content"  
                            android:layout_height="wrap_content"
                            android:layout_alignTop="@id/underline"
                            android:layout_toRightOf="@id/underline"
                            android:textSize="17dip"
                            android:textOn="@string/strike"
                            android:textOff="@string/strike"
                            android:textColor="#464646" />

                        <Button
                                         android:id="@+id/link" 
                                         android:background="@drawable/button_toggle"
                            android:layout_width="wrap_content"  
                            android:layout_height="wrap_content"
                            android:layout_alignTop="@id/strike"
                            android:layout_toRightOf="@id/strike"
                            android:textSize="17dip"
                            android:textColor="#21759b"
                            android:text="@string/link" />  

                        <ToggleButton
                                        android:id="@+id/bquote"
                                        android:background="@drawable/button_toggle"
                            android:layout_width="wrap_content"  
                            android:layout_height="wrap_content" 
                            android:layout_alignTop="@id/link"
                            android:layout_toRightOf="@id/link"
                            android:textSize="17dip"
                            android:textOn="b-quote"
                                        android:textOff="b-quote"
                            android:textColor="#464646" />
 -->    
        </LinearLayout>

    <EditText android:id="@+id/content"
              android:layout_width="fill_parent" 
              android:layout_height="fill_parent"
              android:scrollbars="vertical"
              android:gravity="top" 
              android:minLines="1"
              android:textColorLink="#21759b" /> 

    <!--   android:autoText="true" -->

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:41:44.287

尝试将 setCancelButton 移动到布局中 RichTextEditor 视图的上方。还将 RichTextEditor 布局的宽度和高度设置为 fill_parent

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:42:07.720

我不擅长 android 的 xml 布局，但是为什么不尝试将“fill_parent”放在richtexteditor 的宽度和高度上，并将权重设置为 1 以确保对象将填充所有剩余空间视图，所以它看起来像这样：

```
 <com.test.richedit.RichTextEditor
                        android:id="@+id/edNoteSubject" 
                        android:layout_width="fill_parent" 
                       android:layout_height="fill_parent"
                       android:layout_weight="1"
                       /> 
```

希望这会帮助你。

# asp.net - 使用 Visual Studio 2010 连接到 Web 服务器

> ID：15572865
> 
> 赞同：0
> 
> 时间：2013-03-22T14:29:06.233
> 
> 标签：asp.net, sql-server

我目前正在尝试使用 Visual Studio 2010 连接到 Web 服务器（因为我需要使用 ASP.NET 编写多个页面）并且不知道如何操作。我已成功连接到 SQL 数据库以设置表，但实际上无法看到 Web 服务器上的文件（在 Visual Studio 2010 IDE 下），因此我可以同时使用 Web 服务器和数据库上的 asp 文件。

到目前为止，我已经设法使用 WinSCP（按照[**此处**](http://co-web.lboro.ac.uk/notes/config.htm)通过 VPN 的说明）连接到 Web 服务器，但我似乎无法在 Visual Studio 2010 下连接到同一个 Web 服务器。

[**服务器所有者在这里**](http://co-web.lboro.ac.uk/notes/config.htm)提供了信息，但对我来说似乎没有任何意义。谁能推荐一些好的教程？我非常感谢您的帮助。

# ruby-on-rails - 运行“精简启动”时未收到数据

> ID：15572871
> 
> 赞同：1
> 
> 时间：2013-03-22T14:29:16.443
> 
> 标签：ruby-on-rails, ssl, thin

我正在使用 ruby​​ 1.9.3 和 rvm。我想使用 --ssl 选项运行瘦服务器。我在一些答案中读到运行“thin start --ssl”应该可以解决问题。但是在我的开发环境中，当我运行 thin start --ssl 时，终端运行：

```
Using rack adapter
Thin web server (v1.5.1 codename Straight Razor)
Maximum connections set to 1024
Listening on 0.0.0.0:3000, CTRL+C to stop
And in my web-browser in localhost:3000:

No data received
Unable to load the webpage because the server sent no data.
Here are some suggestions:
Reload this webpage later.
Error 324 (net::ERR_EMPTY_RESPONSE): The server closed the connection without sending any data. 
```

当我使用“rails s thin”运行相同的命令时，它可以工作，但会显示不同的消息：

```
Booting Thin
Rails 3.2.11 application starting in development on http:// 0\. 0\. 0 .0 :3000
Call with -d to detach
Ctrl-C to shutdown server 
```

我不知道为什么会发生这种情况（可能是因为 rvm），但 Thin 工作正常。我想运行第一个版本“thin start --ssl”，因为我无法在“rails s”命令中设置这个 ssl 选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:41:10.477

我找到了“未收到数据”的原因。如果有人有同样的错误：

我运行了“thin start --ssl”，所以我的服务器只会响应 https 请求。所有的http请求都没有得到回应，所以这就是没有数据的原因（愚蠢）。默认情况下，http 请求转到 80 端口，而 https 请求转到 443 端口。

“thin start --ssl”可以很好地在本地调试 ssl，您可以通过在应用程序控制器中强制使用 ssl 来测试整个应用程序（因此您不会发现自己处于相同的情况，没有收到任何数据）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:56:08.603

一个更简单（也更真实）的解决方案是在您的 Rails 应用程序前面运行一个 Web 服务器（如 nginx）。这个 Web 服务器会监听 http 和 https 流量，然后将所有内容通过端口 3000 传递给 Rails（瘦）服务器。

# c - 制作一个简单的C头文件

> ID：15572875
> 
> 赞同：-2
> 
> 时间：2013-03-22T14:29:29.393
> 
> 标签：c, header-files

我有一个功能 `void MOTOR(int left, int back , int right);`

该函数运行另一个函数：`void PWMe(int left, int back, int right);`

`MOTOR`使用这个和一些全局变量。

我想制作一个包含`MOTOR`但不包含的头文件`PWMe`（注意这`PWMe`是 中的一个函数`mainproj.c`）。

我的第一个问题是，如何制作包含 MOTOR、用途`PWMe`和全局变量 的头文件`mainproj.c`？

其次，我想改成`MOTOR.c`汇编和`MOTOR.lib`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T14:45:37.850

标头的全部意义在于公开声明。如果您希望`MOTOR(int,int,int)`除定义它的源文件之外的任何源文件都能看到您的实现，请将其放在标题中。

现在，如果您在其他`PWMe(int,int,int)`地方声明了另一个函数，那么同样的事情也适用。为了使`MOTOR`函数能够调用它，您需要在标头中公开它。我猜它定义在`mainproj.c`?

**电机.h**

```
#ifndef MOTOR_H__
#define MOTOR_H__

void MOTOR( int left, int back, int right );

#endif 
```

**主项目.h**

```
#ifndef MAINPROJ_H__
#define MAINPROJ_H__

extern const char const *one_hit_wonder;

void PWMe( int left, int back, int right );

#endif 
```

请注意，`mainproj.h`我已经声明了一个变量和一个函数。希望你能明白。以下是实现：

**主项目.c**

```
#include "mainproj.h"

const char const *one_hit_wonder = "Yazz";

void PWMe( int left, int back, int right )
{
    printf( "The only way is up, baby\n" );
} 
```

**马达.c**

```
#include "motor.h"
#include "mainproj.h"

void MOTOR( int left, int back, int right )
{
    PWMe( left, back, right );
    printf( "For you and me now\n" );
    printf( "\n - %s\n", one_hit_wonder );
} 
```

现在，`MOTOR`使用任何参数调用都应该会从 80 年代的热门单曲中产生引人入胜的合唱。

# ios - 捕获仍然没有压缩的 UIImage（来自 CMSampleBufferRef）？

> ID：15572893
> 
> 赞同：3
> 
> 时间：2013-03-22T14:30:39.000
> 
> 标签：ios, objective-c, avfoundation, cmsamplebufferref

我需要从 CMSampleBufferRef 中获取`UIImage`未压缩的图像数据**。**我正在使用代码：

```
captureStillImageOutput captureStillImageAsynchronouslyFromConnection:connection
 completionHandler:^(CMSampleBufferRef imageSampleBuffer, NSError *error) 
{
    // that famous function from Apple docs found on a lot of websites
    // does NOT work for still images
    UIImage *capturedImage = [self imageFromSampleBuffer:imageSampleBuffer]; 
} 
```

[http://developer.apple.com/library/ios/#qa/qa1702/_index.html](http://developer.apple.com/library/ios/#qa/qa1702/_index.html)是`imageFromSampleBuffer`函数的链接。

但它不能正常工作。:(

有一种`jpegStillImageNSDataRepresentation:imageSampleBuffer`方法，但它给出了压缩数据（嗯，因为 JPEG）。

捕获静止图像后如何`UIImage`使用最原始的非压缩数据创建？

也许，我应该为视频输出指定一些设置？我目前正在使用这些：

```
captureStillImageOutput = [[AVCaptureStillImageOutput alloc] init];
captureStillImageOutput.outputSettings = @{ (id)kCVPixelBufferPixelFormatTypeKey : @(kCVPixelFormatType_32BGRA) }; 
```

我注意到，该输出的默认值为`AVVideoCodecKey`，即`AVVideoCodecJPEG`。是否可以以任何方式避免它，或者在捕获静止图像时**它是否重要？**

我在那里找到了一些东西：[来自“645 PRO”之类的相机的原始图像数据](https://stackoverflow.com/questions/11612647/raw-image-data-from-camera-like-645-pro/)，但我只需要一个 UIImage，而不使用 OpenCV 或 OGLES 或其他第 3 方。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T12:36:29.887

该方法`imageFromSampleBuffer`确实有效，实际上我正在使用它的更改版本，但如果我没记错的话，您需要正确设置 outputSettings。我认为您需要将键设置为`kCVPixelBufferPixelFormatTypeKey`并将值设置为`kCVPixelFormatType_32BGRA`。

例如：

```
NSString* key = (NSString*)kCVPixelBufferPixelFormatTypeKey;                                 
NSNumber* value = [NSNumber numberWithUnsignedInt:kCVPixelFormatType_32BGRA];                
NSDictionary* outputSettings = [NSDictionary dictionaryWithObject:value forKey:key];

[newStillImageOutput setOutputSettings:outputSettings]; 
```

**编辑**

我正在使用这些设置来拍摄静止图像而不是视频。你的 sessionPreset 是 AVCaptureSessionPresetPhoto 吗？可能有问题

```
AVCaptureSession *newCaptureSession = [[AVCaptureSession alloc] init];
[newCaptureSession setSessionPreset:AVCaptureSessionPresetPhoto]; 
```

**编辑 2**

关于将其保存到 UIImage 的部分与文档中的部分相同。这就是我要求问题的其他根源的原因，但我想那只是抓住稻草。我知道还有另一种方法，但这需要 OpenCV。

```
- (UIImage *) imageFromSampleBuffer:(CMSampleBufferRef) sampleBuffer{
CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);

CVPixelBufferLockBaseAddress(imageBuffer, 0);

void *baseAddress = CVPixelBufferGetBaseAddress(imageBuffer);

// Get the number of bytes per row for the pixel buffer
size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer);
// Get the pixel buffer width and height
size_t width = CVPixelBufferGetWidth(imageBuffer);
size_t height = CVPixelBufferGetHeight(imageBuffer);

// Create a device-dependent RGB color space
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

// Create a bitmap graphics context with the sample buffer data
CGContextRef context = CGBitmapContextCreate(baseAddress, width, height, 8,
                                             bytesPerRow, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst);
// Create a Quartz image from the pixel data in the bitmap graphics context
CGImageRef quartzImage = CGBitmapContextCreateImage(context);
// Unlock the pixel buffer
CVPixelBufferUnlockBaseAddress(imageBuffer,0);

// Free up the context and color space
CGContextRelease(context);
CGColorSpaceRelease(colorSpace);

// Create an image object from the Quartz image
UIImage *image = [UIImage imageWithCGImage:quartzImage];

// Release the Quartz image
CGImageRelease(quartzImage);

return (image);

} 
```

我想这对你没有帮助，对不起。我知道的不够多，无法为您的问题考虑其他根源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-20T07:47:58.723

这是一种更有效的方法：

```
UIImage *image = [UIImage imageWithData:[self imageToBuffer:sampleBuffer]];

- (NSData *) imageToBuffer:(CMSampleBufferRef)source {
    CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(source);
    CVPixelBufferLockBaseAddress(imageBuffer,0);

    size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer);
    size_t width = CVPixelBufferGetWidth(imageBuffer);
    size_t height = CVPixelBufferGetHeight(imageBuffer);
    void *src_buff = CVPixelBufferGetBaseAddress(imageBuffer);

    NSData *data = [NSData dataWithBytes:src_buff length:bytesPerRow * height];

    CVPixelBufferUnlockBaseAddress(imageBuffer, 0);
    return data;
} 
```

# c# - 使用 Azure 瞬态故障处理重试策略访问已处置的关闭警告

> ID：15572897
> 
> 赞同：2
> 
> 时间：2013-03-22T14:31:00.947
> 
> 标签：c#, azure, resharper

我们有一个工作角色，它根据查询结果处理记录并根据需要发送 Azure 服务总线消息，这基本上是一个队列处理服务。作为使用 SQL Azure 的最佳实践的一部分，我们使用重试策略包装了所有查询语句（这会检测瞬时错误并将根据定义的策略重试）。请注意，我们实际上是从 using 语句中发送消息，因此 db 变量没有“泄漏”。

在我们的 using 语句中，ReSharper 抛出了“Access to Disposed Closure”警告，这很可能是因为我们将 DataContext 作为重试策略的 func 参数传递。

我的问题是，我是否可以假设 ReSharper 没有正确检测到这种模式，或者在我们编写这些函数时是否有替代方法以防止出现上述警告？

**编码**

*retryPolicy.ExecuteAction 中的 db 变量是被标记的*

```
using (var db = new MyEntities())
{
   var thingsToUpdate = retryPolicy.ExecuteAction(() => db.QueueTable.Where(x => x.UpdateType == "UpdateType" && x.DueNext < DateTime.UtcNow).Take(30).ToList());
   if (!thingsToUpdate.Any())
   {
      return;
   }
   while (thingsToUpdate.Any())
   {
      var message = new ServiceMessage{
                            Type = "UpdateType",
                            Requests = thingsToUpdate.Select(x => new ServiceMessageRequest
                                {
                                    LastRan = x.LastRan,
                                    ParentItemId = x.ThingId,
                                    OwnerId = x.Thing.ForiegnKeyid
                                }).ToList()
                        };
      SendMessage("UpdateType", message);
      foreach (var thing in thingsToUpdate )
      {
          thing.LastRan = DateTime.UtcNow;
          thing.DueNext = DateTime.UtcNow.AddMinutes(10);
      }
      retryPolicy.ExecuteAction(() => db.SaveChanges());
      thingsToUpdate = db.QueueTable.Where(x => x.UpdateType == "UpdateType" && x.DueNext < DateTime.UtcNow).Take(30).ToList());
     }
} 
```

**附加信息**

我还将这个发布到 ReSharper 论坛以供更广泛的受众使用，并且在那边更详细地解决了这个特定问题。对于后代，您可以在[此处找到问题。](http://devnet.jetbrains.com/message/5482748)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T16:26:44.180

我猜你的 ExecuteAction 会立即执行你的 lamdba。然后，您应该使用 ReSharper 的属性 [InstantHandle] 注释 ExecuteAction 方法中的 lambda 参数。

例如：

```
public void ExecuteAction([InstantHandle] Action action)
{
  ...
} 
```

您可以导入 JetBrains.Annotations.dll 以获取此属性，也可以仅复制项目中的所有属性。[在此处](http://www.jetbrains.com/resharper/webhelp/Reference__Options__Code_Inspection__Code_Annotations.html)和[此处](http://www.jetbrains.com/resharper/webhelp/Code_Analysis__Code_Annotations.html)查看有关 JetBrains 网站的更多信息。

# google-chrome - Chrome 扩展通知异常：DOM 异常 18

> ID：15572904
> 
> 赞同：1
> 
> 时间：2013-03-22T14:31:24.140
> 
> 标签：google-chrome, google-chrome-extension, webkit

我正在创建一个 chrome 扩展，但在使用**通知**webkit 时遇到了一些困难。当我尝试显示通知时，会引发异常：

**未捕获的错误：SecurityError：DOM 异常 18**

波纹管遵循我的**Javascript 代码**：

```
var icon  = 'icon_48.png';
var title = 'Test Plugin';
var body  = message;
var popup = window.webkitNotifications.createNotification(icon, title, body);
popup.show(); 
```

下面跟着我的**manifest.json**：

```
{
  "name": "Test Plugin",
  "version": "1.0.6",
  "manifest_version": 2,
  "description": "This is a test",
  "browser_action": {
    "default_icon": "images/icon_32.png",
    "default_popup": "popup.html"
  },
  "icons": {
      "128": "images/icon_128.png",
      "16": "images/icon_32.png",
      "48": "images/icon_48.png"
   },
  "permissions": [ 
    "http://*/*", 
    "https://*/*", 
    "contextMenus", 
    "tabs", 
    "notifications", 
    "management", 
    "webRequest" 
    ],
  "content_scripts": [
      {
        "matches": ["<all_urls>"],
        "js": ["webtoolkit-sha1.js","content.js"],
        "run_at": "document_end",
        "css" : ["css/style.css"]
      }
  ],
  "web_accessible_resources": ["webtoolkit-sha1.js","inject.js","icon_48.png"]
} 
```

我究竟做错了什么？

谢谢大家！

**信息更新：**

manifest.json在**权限**部分有属性**通知**，但是当我打印*webkitNotifications.checkPermission()*结果为 1 (PERMISSION_NOT_ALLOWED)。

 **** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:21:46.870

该`notifications`权限仅适用于扩展程序的进程。为了让您的代码正常工作，需要添加一个[背景](https://developer.chrome.com/extensions/background_pages.html)（或[事件）页面来创建通知。](https://developer.chrome.com/extensions/event_pages.html)内容脚本可以使用[消息](https://developer.chrome.com/extensions/messaging.html)API 来请求通知。***

# android - 将伪造的短信标记为已送达

> ID：15572905
> 
> 赞同：1
> 
> 时间：2013-03-22T14:31:27.027
> 
> 标签：android, sms

我正在搞乱创建假短信，虽然这个片段非常适合让它看起来像是从手机发送的消息，但我不知道如何将创建的消息标记为已送达。

 `````
ContentValues values = new ContentValues();
values.put("address", "some-address");
values.put("body", "some-text");
getContentResolver().insert(Uri.parse("content://sms/sent"), values); 
````  `如果没有“真正发送”的消息，这是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:48:19.793

列名称在此[如何使用 SMS 内容提供程序？文档在哪里？](https://stackoverflow.com/questions/1976252/how-to-use-sms-content-provider-where-are-the-docs)问题。“状态”可能是您正在寻找的。

从[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.7_r1/android/provider/Telephony.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.7_r1/android/provider/Telephony.java)我想说

```
113         public static final String STATUS = "status";
114 
115         public static final int STATUS_NONE = -1;
116         public static final int STATUS_COMPLETE = 0;
117         public static final int STATUS_PENDING = 32;
118         public static final int STATUS_FAILED = 64; 
```

设置为 0（完成）应将其标记为已发送。``

# java - 视频驱动程序不支持 OpenGL

> ID：15572908
> 
> 赞同：8
> 
> 时间：2013-03-22T14:31:32.983
> 
> 标签：java, libgdx

当我使用此代码时：

```
import com.badlogic.gdx.backends.lwjgl.LwjglApplication;
import com.badlogic.gdx.backends.lwjgl.LwjglApplicationConfiguration;

public class Main {
   public static void main(String[] args) {
      LwjglApplicationConfiguration cfg = new LwjglApplicationConfiguration();
      cfg.title = "MtxJungleGameMenu";
      cfg.useGL20 = false;
      cfg.width = 800;
      cfg.height = 480;
      new LwjglApplication(new MainStarter(), cfg);
   }
} 
```

我得到一个这样的例外：

> 线程“LWJGL 应用程序”com.badlogic.gdx.utils.GdxRuntimeException 中的异常：com.badlogic.gdx.utils.GdxRuntimeException：视频驱动程序不支持 OpenGL。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-04-13T11:32:27.807

把这段代码 System.setProperty("org.lwjgl.opengl.Display.allowSoftwareOpenGL", "true");

在我的情况下解决了问题..这将允许 libgdx 作为软件 openGL 模式运行。

您的代码将如下所示。

```
import com.badlogic.gdx.backends.lwjgl.LwjglApplication;
import com.badlogic.gdx.backends.lwjgl.LwjglApplicationConfiguration;

public class Main {
   public static void main(String[] args) {
      LwjglApplicationConfiguration cfg = new LwjglApplicationConfiguration();
      System.setProperty("org.lwjgl.opengl.Display.allowSoftwareOpenGL", "true");
      cfg.title = "MtxJungleGameMenu";
      cfg.useGL20 = false;
      cfg.width = 800;
      cfg.height = 480;
      new LwjglApplication(new MainStarter(), cfg);
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-25T10:16:06.517

您需要更新视频驱动程序。

基本上是您 PC 的显示驱动程序

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-17T10:16:48.777

**我遇到了类似的问题，并通过降级到jdk 8 update 45**来修复它。

 **我正在使用 win 10 和集成的 Intel HD 2000 进行图形处理。**

# java - Primefaces 数据表过滤器

> ID：15572920
> 
> 赞同：1
> 
> 时间：2013-03-22T14:32:06.487
> 
> 标签：java, jsf, primefaces

我已经尝试了一些事情，但我无法对我的过滤器数据表做任何工作。已经按照 primefaces 展示的例子，什么都没有。

我有以下代码：

xhtml:

```
<p:dataTable id="dataTable" var="valor" value="#{beanMensagemXContato.listaContatoEmail}" 
                widgetVar="carsTable" emptyMessage="No cars found with given criteria" filteredValue="#{tableBean.filteredCars}">                           

                <f:facet name="header">  

                    </f:facet> 

                    <p:column 
                        style="max-width: 50px; min-width: 50px; overflow: hidden">
                        <f:facet name="header">
                            <h:outputText value="Contato" />
                        </f:facet>
                        <h:outputText value="#{valor.nomGrupoEmail}" />
                    </p:column>

                    <p:column
                        style="max-width: 50px; min-width: 50px; overflow: hidden">
                        <f:facet name="header">
                            <h:outputText value="Email" />
                        </f:facet>
                        <h:outputText value="#{valor.endEmail}" />
                    </p:column>

                    <p:column
                        style="max-width: 50px; min-width: 50px; overflow: hidden">
                        <f:facet name="header">
                            <h:outputText value="Telefone" />
                        </f:facet>
                        <h:outputText value="#{valor.numTelefone}" />
                    </p:column>

                    <p:column
                        style="max-width: 50px; min-width: 50px; overflow: hidden">
                        <f:facet name="header">
                            <h:outputText value="Ações" />
                        </f:facet>

                    </p:column>

                </p:dataTable> 
```

豆：

```
public List<ContatoEmail> getListaContatoEmail() {

        listaContatoEmail = new ArrayList<ContatoEmail>();
        listaContatoEmail = consultaContatoEmail.listarContatoEmail();

        return listaContatoEmail;
    } 
```

我想要一些东西，当您在 dataTable 中键入一个单词时选择该行。

谁能给我一个简单的例子。

既然我已经欣赏了。

黛博拉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T08:14:48.563

好的，这是一个例子：我将举一个流行的汽车例子。

## **用例：在自动完成中的每次击键时动态更新数据表**

## 我的小脸：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">
<f:view>
    <h:head />
    <h:body>
        <h:form>
            <p:autoComplete var="carac" converter="carconvertor"
                value="#{testBean.selectedCar}" itemLabel="#{carac.carmodel}"
                itemValue="#{carac}"
                completeMethod="#{testBean.complete}" process="@this"
                onSelectUpdate="idGrid">
                <p:ajax event="keyup" listener="#{testBean.onValueChange}"
                    update="idGrid"></p:ajax>
            </p:autoComplete>

            <p:dataTable value="#{testBean.matchingCarModels}" var="carmatch"
                id="idGrid" converter="carconvertor">
                <p:column headerText="Car Model">
                    <h:outputText value="#{carmatch.carmodel}" />
                </p:column>
            </p:dataTable>
        </h:form>
    </h:body>
</f:view>
</html> 
```

## 一辆汽车 POJO

```
public class Car 
{
    private String carmodel;

    public Car(String carmodel) {
        super();
        this.carmodel = carmodel;
    }
    // Add setters and getters
} 
```

## A Car Faces 转换器

```
@FacesConverter(forClass=Car.class, value="carconvertor")
public class CarConverter 
implements Converter {
    @Override
    public Object getAsObject(FacesContext arg0, UIComponent component, String stringvalue) {
        Car car = new Car(stringvalue);
        return car;
    }

    @Override
    public String getAsString(FacesContext arg0, UIComponent component, Object objectvalue) {
        Car car = (Car) objectvalue;

        if(car == null) {
            return StringUtils.EMPTY;
        }

        return car.getCarmodel();
    }
} 
```

## 最后是backing bean

```
@ManagedBean(name="testBean")
@SessionScoped
public class TestBackingBean 
{
    /**
     * The input filter
     */
    private String filter = StringUtils.EMPTY;

    /**
     * Some test data
     */
    private final List<Car> carModels = new ArrayList<Car>() {
        {
            add(new Car("toyota"));
            add(new Car("honda"));
            add(new Car("suzuki"));
            add(new Car("ford"));
            add(new Car("renault"));
            add(new Car("subaru"));
        }
    };

    /**
     * For updating the grid.
     */
    public void onValueChange(AjaxBehaviorEvent event)
    {
        AutoComplete ac = (AutoComplete) event.getSource();

        Car input = (Car) ac.getValue();

        filter = (input == null) ? StringUtils.EMPTY : input.getCarmodel();
    }

    /**
     * For the auto complete drop down
     */
    public List<Car> complete(String input)
    {
        filter = input;

        return getMatchingCarModels();
    }

    /**
     * get the match
     */
    public List<Car> getMatchingCarModels()
    {
        if(StringUtils.isEmpty(filter))
            return carModels;

        List<Car> matches = new ArrayList<Car>();

        for(Car car : carModels)
        {
            if(car.getCarmodel().startsWith(filter))
            {
                matches.add(car);
            }
        }

        return matches;
    }

    /**
     * The selected car
     */
    private Car selectedCar;
    //Add setters and getters for above member
} 
```

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:40:08.273

[您可以在此处查看](https://stackoverflow.com/questions/6910763/primefaces-datatable-filtering-problem-running-the-example?rq=1)stackoverflow 中相同问题的解决方案

作为搜索和捕获 keyup 事件以更新数据表的替代方法（使用自动完成）。一个符合您的上下文的示例：

```
<p:autoComplete var="address"
    value="#{addressBean.address}" itemLabel="#{address.personName}"
    itemValue="#{address}" completeMethod="#{addressBean.complete}"
    process="@this" converter="personconvertor"
    onSelectUpdate="dataTable">
    <p:ajax event="keyup" listener="#{addressBean.onValueChange}"
        update="dataTable"></p:ajax>
</p:autoComplete> 
```

# python - Python结构大小不匹配

> ID：15572925
> 
> 赞同：4
> 
> 时间：2013-03-22T14:32:18.910
> 
> 标签：python, struct

我有一些我想从二进制文件中读取的结构。我尝试使用python的结构。这是一个用于阅读的字符串：

```
.... = struct.unpack('I36s36s72sQQIIH4s36s4s20s', datab.read(238)) 
```

它工作正常。我通过将值打印到屏幕来看到它。

现在我想把“4s”改成“I”。当我将字符串更改为：

```
.... = struct.unpack('I36s36s72sQQIIHI36s4s20s', datab.read(238)) 
```

（将第一个“4s”更改为“I”），我收到错误：

```
struct.error: unpack requires a bytes object of length 240 
```

正如文档所说“我”的大小是 4 个字节，为什么我的更改会导致错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T14:40:54.993

这与对齐有关。`I`在四字节边界上对齐，在它之前需要两个字节的填充。另一方面，`4s`没有这样的要求。

见[7.3.2.1。字节顺序、大小和对齐](http://docs.python.org/2/library/struct.html#byte-order-size-and-alignment)方式以获取有关如何关闭此功能的信息。

# c# - system.entrypointnotfoundexception in 在 Unity3d 中

> ID：15572926
> 
> 赞同：2
> 
> 时间：2013-03-22T14:32:22.590
> 
> 标签：c#, unity3d, native-code

我正在尝试从 Unity3D 调用一个简单的本机函数 (C++)。我做了以下事情：

1.  放置`libMSDKWrapper.so`在 Assets->Plugins->Android

2.  这是我的 C# 代码

    ```
    using UnityEngine;
    using System.Collections;
    using System.Runtime.InteropServices;

    public class facebooktest : MonoBehaviour {

        [DllImport ("MSDKWrapper")]
        private static extern long getContextNative();

        void Start () {
            Debug.Log("Hello, World!");
            long context = getContextNative(); // <-- Exception thrown here
            Debug.Log(context);
            }
    } 
    ```

我收到以下异常：

> system.entrypointnotfoundexception at [0x00000] in Filename unknown:0

我使用相同的 libMSDKWrapper.so 使用 java 使用命令

> System.loadLibrary("MSDKWrapper");

我能够访问和使用 getContextNative() 方法。

编辑 1：我解压了 apk 的内容，发现 libMSDKWrapper.so 文件存在于 test.apk/lib/armeabi-v7a 中

编辑 2：这里是 logcat 日志。03-25 11:40:17.543: D/dalvikvm(26176): 试图加载 lib /data/data/com.disney.citygirl.goo/lib/libMSDKWrapper.so 0x41566348 03-25 11:40:17.568: D/ MSDK（26176）：注册提供者：SN_COMMUNITY 03-25 11:40:17.568：D/MSDK（26176）：注册提供者：SN_FACEBOOK 03-25 11:40:17.568：D/dalvikvm（26176）：添加共享库/数据/data/com.disney.citygirl.goo/lib/libMSDKWrapper.so 0x41566348 03-25 11:40:17.568: I/MSDK(26176): JNI_OnLoad 调用 03-25 11:40:17.573: D/dalvikvm(26176) : 试图加载 lib /data/data/com.disney.citygirl.goo/lib/libMSDKWrapper.so 0x41566348 03-25 11:40:17.573: D/dalvikvm(26176): Shared lib '/data/data/com. disney.citygirl.goo/lib/libMSDKWrapper.so' 已经加载到同一个 CL 0x41566348 03-25 11:40:17.598: I/Unity(26176): System.EntryPointNotFoundException: getContextNative 03-25 11:40:17.598:
03-25 11:40:17.598：I/Unity(26176)：（文件名：./Runtime/ExportGenerated/AndroidManaged/UnityEngineDebug.cpp 行：43）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:36:04.893

您正在使用 C++ 插件，但您的 Unity3D 版本可能不支持它？我记得你需要 Pro 来做到这一点。

[此页面](http://docs.unity3d.com/Documentation/Manual/PluginsForAndroid.html)可能会提供解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T21:54:08.667

确保您使用 extern 'c' 指令来避免[名称混淆问题](http://en.wikipedia.org/wiki/Name_mangling#Name_mangling_in_C.2B.2B)。如果您不将调用“包装”在“c”方法名称中，您将得到这种确切的行为，因为 c++ 编译器会“破坏”或在方法名称中添加额外的特定于体系结构的“垃圾”。有问题可以参考我的github项目[HERE](https://github.com/nterry/39DLL-4-Linux)

关注 main.cpp（在 android-src/ 中的入口点与在根目录中的入口点相同）。这就是你需要为你的 c++ dll 建模的模式。该项目还将向您展示如何为 android 构建 c++ dll。查看 README 以获取 Ubuntu（和其他类似 Debian 的操作系统）和 android 的完整构建说明。

@Virtlink 我知道它是一个专业功能，但似乎 Unity 在使用 p/invokes 时只会发出警告。如果 Unity 在 V4 中修复了它，我不会使用它，但是 V3 允许您无论如何都可以使用它们。审判也足够了。

就像另一个注意事项一样，您需要使用 C++ dll 是否有特定的原因？在几乎所有情况下，您都可以在托管 C# 代码中执行您想要的操作。绝对确定您需要此 DLL，因为它会破坏与单个代码库的交叉兼容性。使用我的 dll，我决定放弃我的用例，并用 c# 重新编写了整个内容。

# c# - 参考文件的 XML 注释

> ID：15572927
> 
> 赞同：2
> 
> 时间：2013-03-22T14:32:28.440
> 
> 标签：c#, xml, comments

我想将对文件的引用添加到类的 xml 注释中。我可以这样做：

```
/// <summary>
/// Condition with the content of the text <a href="file:///d:/a.jpg">file</a>
/// </summary> 
```

如何使用文件的相对路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:42:26.100

在 Sandcastle 中，路径相对于工作文件夹（`.\Working`设置中设置的输出路径下的文件夹）。要指定相对于您的项目的路径，请在其前面加上`{@ProjectFolder}`. 例如：

```
<a href="{@ProjectFolder}/a.jpg">File</a> 
```

您可以在此处找到此类替换标签的完整列表：

> [自定义构建过程 - 替换标签](http://www.ewoodruff.us/shfbdocs/html/69d998a7-1af5-4bf5-889b-59cd00b64000.htm)

* * *

您是否知道可以在文档标签中替换`cref`为：`href`

```
<see href="http://www.example.com/">Example</see>

<seealso href="http://www.example.com/">Example</seealso> 
```

# javascript - 如何判断 javascript 是否在缓存中重新加载

> ID：15572936
> 
> 赞同：0
> 
> 时间：2013-03-22T14:32:40.970
> 
> 标签：javascript

我面临的问题是 javascript 被缓存在用户的浏览器上，并且在更改投入生产时没有得到更新。因为该站点使用多个嵌入式 iframe，仅使用 f5 是不够的。我采用的解决方案是首先加载一个脚本，该脚本获取我需要的 js 文件的所有修改日期，然后将这些日期附加到每个页面的 js 文件中。每个页面看起来像这样：

```
 <script type="text/javascript" src="get_dates"></script>//returns the dates for each file in array
    <script type="text/javascript">
        document.writeln('<script type="text/javascript" src="' + some_path + '?Mod=' + date_array[pos] + '"></script>...repeat for all scripts
    </script> 
```

我的问题是：

1.  在模组日期更改之前，您如何判断脚本是否被缓存？（我仍然希望它们被缓存，只是如果它们被更新了）
2.  html 页面的缓存将如何影响这一点？
3.  使用 document.writeln(() 会影响缓存吗？即，如果您编写完全相同的脚本，它们是否仍会被缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:40:42.140

*   [从服务器发送正确的标头](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Avoiding_caching)应该控制缓存活动。
*   或者使用脚本加载器来加载其他脚本并将[缓存清除](http://www.adopsinsider.com/ad-ops-basics/what-is-a-cache-buster-and-how-does-it-work/)应用于不需要缓存的脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:42:25.193

在每个生产版本中将版本控制应用于您的 js 文件。让我们说

发布1：

```
<script src="source.js?v1.0"></script> 
```

发布2：

```
<script src="source.js?v2.0"></script> 
```

等等...

这样，您仍然允许客户端缓存您的 js 文件，但在特定版本上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T14:42:35.773

> 在模组日期更改之前，您如何判断脚本是否被缓存？

只需将到期时间设置为无限（或者说，1 年 - 这已经足够长了）。每次您的`Mod`参数更改时，都会请求新文件。

> html 页面的缓存将如何影响这一点？

一点也不。`get_dates`但是，脚本的缓存会。

> 使用 document.writeln(() 会影响缓存吗？即，如果您编写完全相同的脚本，它们是否仍会被缓存？

不，它不会影响任何事情。结果 -`<script>`引用外部脚本的节点将是相同的。

另请阅读[如何强制浏览器重新加载缓存的 CSS/JS 文件？](https://stackoverflow.com/q/118884/1048572)

# ajax - 具有动态路由值的 Html.BeginForm

> ID：15572938
> 
> 赞同：0
> 
> 时间：2013-03-22T14:32:44.307
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-routing, html.beginform, routevalues

我需要在 html.beginform 中添加一个动态路由值，就像这样

```
Html.BeginForm("action", "controller", new { 

   somethingID = "some js function or jquery that get the value from a textbox" 

})) 
```

我知道当表单提交时 mvc 已经将参数传递给我的方法，但是我需要 url 以将参数包含在 mvc url 格式中，即`mydomain.com/controller/action/somethingID`. Eveything 现在正在工作，但是因为我有另一个`$.ajax()`调用传递 url，例如`"../someMethod"`，`$.ajax()`不工作，因为当前 url`(mydomain.com/controller/action)`不是`(mydomain.com/controller/action/somethingID)`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-09T02:49:38.583

确保在您的 RouteConfig 中设置`UrlParameter.Optional`为`id`：

```
routes.MapRoute(
       name: "Default",
       url: "{controller}/{action}/{id}",
       defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional}
); 
```

# javascript - 加载 HTML 和脚本命令执行

> ID：15572940
> 
> 赞同：1
> 
> 时间：2013-03-22T14:32:56.160
> 
> 标签：javascript, html, performance, mobile

我对浏览器加载脚本的顺序有疑问。我需要知道客户端将人们重定向到移动网站的最佳方式是什么。

我是说。如果我想将移动检测脚本客户端放在`<head>`没有功能的情况下，手机会在执行脚本之前下载所有页面并重定向客户端？

```
(function(a){jQuery.browser.mobile=/android|avantgo|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|wp7|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))})(navigator.userAgent||navigator.vendor||window.opera);
if (jQuery.browser.mobile) {

    var url = document.URL;

    if (url.indexOf("?mobile=false") != -1) {
        setCookie("cookieMobile","full");
    }
    else { 
        var nmscookie = getCookie("cookieMobile");
        if (nmscookie == "full") {
            setCookie("cookieMobile","full");
        }
        else {
            location.href="/mobile"; 
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:46:16.647

是的。页面内容将被下载。

浏览器必须确保它是一个有效的 html 文档等等。下载后，解析和执行就开始了。但正如我在您的脚本中看到的那样，它至少会下载 HTML 页面和 JQuery，然后才能决定是否要切换到移动站点。

就像评论所暗示的那样，最好检查服务器端。

# eclipse - RAD / WebSphere：NoClassDefFoundError

> ID：15572941
> 
> 赞同：3
> 
> 时间：2013-03-22T14:32:58.813
> 
> 标签：eclipse, websphere, ibm-rad

当我将我的应用程序部署到集成的 WebSphere 服务器时，我得到了同一项目中包含的两个类的 NoClassDefFoundErrors。注意：我在这里调用缺少的类*com.my.package.MyClass*。

消费项目包含会话 Bean，并在“配置构建路径”中导入导出项目。如果企业资源管理器中的消费项目，则导出项目被列为“EAR 库”。导出项目是一个普通的 java 项目，其中包含 com.my.package.MyClass。它导出其源文件夹。

例外情况如下所示：

```
com.ibm.websphere.naming.CannotInstantiateObjectException: Exception occurred while the JNDI NamingManager was processing a javax.naming.Reference object. [Root exception is com.ibm.ejs.container.ContainerEJBException: Unable to initialize deferred EJB.; nested exception is: java.lang.NoClassDefFoundError: com.my.package.MyClass]
    at com.ibm.ws.naming.util.Helpers.processSerializedObjectForLookupExt(Helpers.java:1033)
    at com.ibm.ws.naming.urlbase.UrlContextHelper.processBoundObjectForLookup(UrlContextHelper.java:175)
    at com.ibm.ws.naming.urlbase.UrlContextImpl.processBoundObjectForLookup(UrlContextImpl.java:1736)
    at com.ibm.ws.naming.urlbase.UrlContextImpl.lookup(UrlContextImpl.java:1249)
    at com.ibm.ws.naming.urlbase.UrlContextImpl.lookup(UrlContextImpl.java:1225)
    at com.ibm.ws.naming.urlbase.UrlContextImpl.lookup(UrlContextImpl.java:1276)
    at javax.naming.InitialContext.lookup(Unknown Source)
... 
```

或者像那样

```
[22.03.13 14:56:12:994 CET] 00000025 EJBContainerI E   WSVR0068E: Attempt to start EnterpriseBean MyEar#MyJar.jar#MyBean failed with exception: java.lang.NoClassDefFoundError: com.my.package.MyClass
    at java.lang.Class.getDeclaredMethodsImpl(Native Method)
    at java.lang.Class.getDeclaredMethods(Class.java:673)
    at com.ibm.ws.metadata.ejb.EJBMDOrchestrator.processTimeoutMetaData(EJBMDOrchestrator.java:6494)
    at com.ibm.ws.metadata.ejb.EJBMDOrchestrator.finishBMDInit(EJBMDOrchestrator.java:1488)
    at com.ibm.ws.runtime.component.EJBContainerImpl.finishDeferredBeanMetaData(EJBContainerImpl.java:5036)
    at com.ibm.ws.runtime.component.EJBContainerImpl.initializeDeferredEJB(EJBContainerImpl.java:4845)
    at com.ibm.ejs.container.HomeOfHomes$1.run(HomeOfHomes.java:406)
    at com.ibm.ws.security.util.AccessController.doPrivileged(AccessController.java:118)
    at com.ibm.ejs.container.HomeOfHomes.getHome(HomeOfHomes.java:403)
    at com.ibm.ejs.container.HomeOfHomes.getHome(HomeOfHomes.java:339)
    at com.ibm.ejs.container.util.EJBLocalInterfaceObjectFactory.getObjectInstance(EJBLocalInterfaceObjectFactory.java:139)
    at javax.naming.spi.NamingManager.getObjectInstanceByFactoryInReference(Unknown Source)
    at javax.naming.spi.NamingManager.getObjectInstance(Unknown Source)
    at com.ibm.ws.naming.util.Helpers.processSerializedObjectForLookupExt(Helpers.java:927)
    at com.ibm.ws.naming.urlbase.UrlContextHelper.processBoundObjectForLookup(UrlContextHelper.java:175)
    at com.ibm.ws.naming.urlbase.UrlContextImpl.processBoundObjectForLookup(UrlContextImpl.java:1736)
    at com.ibm.ws.naming.urlbase.UrlContextImpl.lookup(UrlContextImpl.java:1249)
    at com.ibm.ws.naming.urlbase.UrlContextImpl.lookup(UrlContextImpl.java:1225)
    at com.ibm.ws.naming.urlbase.UrlContextImpl.lookup(UrlContextImpl.java:1276)
    at javax.naming.InitialContext.lookup(Unknown Source)
... 
```

我正在使用版本 8.0.4 中*的 IBM Rational Application Developer for WebSphere*和版本 7.0.0.11 中的*IBM WebSphere Application Server*

我的工作区在问题视图中没有错误。

我已经尝试过： - 使用 -clean 参数启动 RAD - 刷新企业资源管理器中的所有项目 - 项目 > 清理 - 在服务器视图中：停止、重新启动、清理、发布 - 关闭和重新启动 RAD

首先我遇到了第二个问题：在 RAD 中，我无法通过 Ctrl + Shift + T 找到 com.my.package.MyClass。我通过删除文件（*.index 文件和“savedIndexNames.txt”）解决了这个问题/.metadata/.plugins/org.eclipse.jdt.core。但不幸的是，这并没有解决运行时/部署时的问题。:-(

有人可以给我提示吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:25:00.760

您需要做的是添加 Java 项目作为 EAR 项目的部署程序集。

这将自动从您的 Java 项目中添加 $PROJECT.jar 在 /lib/ 文件夹下的 .ear

WebSphere 自动从 lib 文件夹中提取 .jar 文件并将它们添加到类路径中，并且这些 .jar 可以在 .ear 文件中打包的所有 EJB.jar 和 .war 中找到。

因此，右键单击您的 EAR 项目，转到属性，然后选择“部署程序集”而不是在那里添加您的 Java 项目，您应该会在 lib 文件夹下看到生成的 jar。

![在此处输入图像描述](../Images/83099ca0fe339f98c8a421241b6ff15d.png)

# jquery - Fancy Box jquery - 在 php 覆盖后打开

> ID：15572943
> 
> 赞同：0
> 
> 时间：2013-03-22T14:32:59.767
> 
> 标签：jquery, css, fancybox

www.yorkshirephotographer.net/new

你可以查看所有代码

图库/作品集页面在标准模式下工作 - 当您单击照片时，它会正确打开

当网站针对手机/平板电脑进行优化时，图库照片显示在页面块/php 块后面 - 需要在前面吗？

谢谢本

ps - 点击“作品集”查看图库图片

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T14:46:20.393

这与 Javascript 无关，真的：这是一个 CSS 问题。您`#content`所在区域的 z-index 为 10000 `style-600.css`；这比花式框（`z-index: 8010`）要高。改变它，你应该没问题。

# javascript - JQuery / Javascript：函数未在 document.ready 中调用

> ID：15572944
> 
> 赞同：1
> 
> 时间：2013-03-22T14:33:02.857
> 
> 标签：javascript, jquery, dom

我想要做的是有一个滑块，DIV 可以左右移动。代码如下所示：

```
<script type="text/javascript">
var $slider;
var $transition_time = 1000; // 1 second
var $time_between_slides = 4000; // 4 seconds

 $(function() {
    $slider = $('.slidemid');
    $slider.fadeOut();

    // set active classes
    $slider.first().addClass('active');
    $slider.first().fadeIn($transition_time).css('display', 'inline-block');

    // auto scroll 
    setInterval(function () {
      slideright(); }, $transition_time + $time_between_slides );

    $('.slidelefta').click(function() {slideleft(); return false;});
    $('.sliderighta').click(function() {slideright(); return false;});

 });

 function slideright() {
 $slider = $('.slidemid');
  var $i = $slider.find('.active').index();

  $slider.eq($i).removeClass('active');
  $slider.eq($i).fadeOut($transition_time);

  if ($slider.length == $i + 1) $i = -1; // loop to start

  $slider.eq($i + 1).fadeIn($transition_time).css('display', 'inline-block');
  $slider.eq($i + 1).addClass('active');
}
function slideleft() {
 $slider = $('.slidemid');
  var $i = $slider.find('.active').index();

  $slider.eq($i).removeClass('active');
  $slider.eq($i).fadeOut($transition_time);

  if ($i == 0) $i = $slider.length; // loop to end

  $slider.eq($i - 1).fadeIn($transition_time).css('display', 'inline-block');
  $slider.eq($i - 1).addClass('active');
}

</script> 
```

初始的`fadeOut`,`fadeIn`和`addClass`（在`document.ready`函数中）执行得很好。

调用`slideright()`并且`slideleft()`永远不会被执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:54:20.467

查看这个[JSBin](http://jsbin.com/ijanaf)，我在其中粘贴了您的代码并简化了一些行，因为调用定义的函数是问题所在。您可以在控制台中看到
，实际上该函数是从 setInterval 调用的。另外，我想在这里指出，最好在你的范围内定义你的函数，就像在 JSBin 演示中声明它们的方式一样。为什么？好吧，如果你在你的范围之外定义它们，在全局范围内，一个非常糟糕的人可以在控制台中执行，`slideright = function () { evilXSShere; }`瞧，你的函数被覆盖了。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:35:27.027

如果您在控制台上没有收到任何错误，那么我认为这是 javascript 范围的问题。当您在匿名函数的函数内部调用函数 slideright() 和 sildeleft() 时，但这些函数是在全局范围内的匿名函数之外定义的。

将匿名函数视为一个类，并且您在类函数中调用该函数，而这些函数不属于该类范围。

解决方案（我还没有确认代码，我很确定应该可以）：

1.  在匿名函数 $(function() 或
2.  将这些函数包装在构造函数或对象中

    函数幻灯片（）{ this.slideRight = 函数（）{} this.slideLeft = 函数（）{}

    } //像这样调用它 var slider = new Slide(); slider.slideRight//为slideRight slider.slideLeft//为slideLeft

# c++ - 如何在布尔上下文中直接评估对象？

> ID：15572947
> 
> 赞同：4
> 
> 时间：2013-03-22T14:33:09.127
> 
> 标签：c++, object, boolean-expression

我想在布尔上下文中评估某个类的实例。或者更清楚地说，如果直接在布尔上下文中使用，我想定义对象如何反应。
这里有一个例子：

```
class Foo 
{
  int state;
  Foo(): state(1) {}
  bool checkState()
  {
    return (state >= 0);
  }
  void doWork() 
  { 
    /*blah with state*/
  }
};

int main()
{
  Foo obj;
//while(obj.checkState())  //this works perfectly, and thats what i indent to do!
  while(obj)               //this is what want to write
    obj.doWork();
  return 0;
} 
```

好的，很高兴拥有:-)，但这有可能吗？如果是，如何？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-22T14:35:18.687

使用显式转换运算符来布尔：

```
explicit operator bool() const { return (state >= 0); } 
```

这*正是*您想要的：定义在布尔上下文中评估对象时会发生什么。

如果您有一个较旧的编译器，则不能使用`explicit`，这很糟糕，因为`operator bool()`（没有`explicit`）最终可能会在非布尔上下文中不受欢迎地使用。在这种情况下，请改用[安全的 bool 习惯用法](http://www.artima.com/cppsource/safebool.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T14:36:46.617

您可以使用`operator bool()`：

```
explicit operator bool() const
{
    return (state >=0) ;
} 
```

正如所指出的，您想使用它`explicit`来防止在整数上下文中使用它。main也[应该返回一个 int](https://stackoverflow.com/questions/204476/what-should-main-return-in-c-c)。

# adobe-indesign - 如何从 InDesign 中的自定义文件夹加载脚本？就像来自中央存储库

> ID：15572950
> 
> 赞同：0
> 
> 时间：2013-03-22T14:33:11.643
> 
> 标签：adobe-indesign

我需要在服务器上共享一个文件夹，而 InDesign CS6 需要从该特定位置加载脚本。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T03:21:04.383

如果您只想在脚本中包含其他脚本，您可以这样做：

`$.evalFile(new File(mainscriptloc + "/c/some/folder/central.jsx"));`

它将`central.jsx`像“包含”文件一样加载到执行脚本中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-20T19:19:01.103

在 Mac 上，我建议使用符号链接（一种特殊的 OSX 快捷方式 - 转到[此处](http://tewha.net/2012/07/make-a-symbolic-link-from-finder/ "如何从 Finder 创建符号链接")获取说明和 Automator 工作流程下载，可在您需要时创建一个）。

要创建快捷方式，只需选择位于计算机/服务器上其他位置的所需文件夹（推荐）或文件并运行工作流程（我建议按照说明中的说明为工作流程创建键盘快捷方式）。将创建的快捷方式拖到您的 inDesign 脚本文件夹中，它的显示和操作方式与您的脚本面板中的实际脚本或文件夹完全相同。只需单击链接，inDesign 就会完成剩下的工作 - 您永远不会知道您单击的不是实际的文件夹/文件，或者它位于其他位置。

注意：如果您创建脚本*文件*而不是*文件夹*的快捷方式，请务必删除工作流添加到名称的额外文本（即，当应用于“MyScript.jsx”时，工作流将创建一个名为“MyScript”的快捷方式.jsx 符号链接”。删除“符号链接”部分，以便 inDesign 将快捷方式识别为脚本文件。否则它将无法运行）。

我已经在我的 Mac 上使用 inDesign CC 对此进行了测试，它可以完美运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T10:19:23.203

我发现最好的方法是在您希望脚本所在的任何位置（如服务器）创建一个文件夹，该文件夹与所有用户共享。然后设置和运行脚本将更加棘手：

*   打开 ExtendScript 工具包
*   打开“脚本”选项卡
*   点击右上角的“添加收藏”
*   选择脚本的路径，然后单击确定
*   现在您可以单击左侧的下拉菜单并选择“收藏夹”
*   单击右侧的下拉菜单，然后单击您的文件夹名称
*   双击您的脚本并运行它

现在您可以直接从自定义文件夹运行脚本。

启动脚本不能从那里运行......所以它只适用于脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T16:10:04.577

我们在用户个人脚本文件夹中创建链接，这些链接链接回 Windows 中央存储库中的实际脚本。缺点当然是用户会合理地经常意外地复制实际脚本，而不是脚本的链接——然后他们会错过未来对脚本的更新。

以下是典型用户“脚本面板”文件夹的示例。每个显示的快捷方式都指向我们中央存储库中的一个文件。 ![在此处输入图像描述](../Images/8ace603a046c6dd34adc7181158eb07d.png)

当用户打开 InDesign 时，这些快捷方式会以与常规脚本文件相同的方式出现在他们的脚本面板中。

![在此处输入图像描述](../Images/6c9323ffffcff0ef623fd032c2470403.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-24T11:57:18.740

在 Mac 上？我发现这个解决方案很有用：

[http://tewha.net/2012/07/make-a-symbolic-link-from-finder/](http://tewha.net/2012/07/make-a-symbolic-link-from-finder/)

# git - ~/.gitconfig 中的 Git 命令别名配置

> ID：15572953
> 
> 赞同：1
> 
> 时间：2013-03-22T14:33:20.160
> 
> 标签：git, github

我想为我的**Git命令创建****别名**，所以我编辑了*~/.gitconfig*文件，如下所示：

 ***```
email = my.name@gmail.com
name = My Name
git config --global alias.st status
git config --global alias.co checkout
git config --global alias.ci commit 
```

然后，在我的项目中，当我尝试运行 git 命令时，总是收到错误消息：

```
fatal: bad config file line 4 in /Users/myname/.gitconfig 
```

我哪里错了？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:49:09.023

重命名 .gitconfig 文件以将其放在一边，然后从命令行运行以下命令：

```
git config user.name "Your Name"
git config user.email "your email"
git config alias.st status
git config alias.co checkout
git config alias.ci commit 
```

结果应该是一个`.gitconfig`看起来像这样的文件：

```
[user]
        name = Your Name
        email = your email
[alias]
        st=status
        co=checkout
        ci=commit 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T14:35:24.933

您将实际的 git 命令放入 .gitconfig 中。应该运行这些命令以从命令行修改您的 .gitconfig，或者如果您想直接修改您的 .gitconfig，它看起来像这样：

```
[alias]
  st = status
  co = checkout
  ci = commit 
```

如果您的 gitconfig 中已经有一个 [alias] 部分，请将您的别名放在现有部分下。***

# excel - Excel ODBC 访问驱动程序找不到文件 - 寻找 .mdb 而不是 .accdb

> ID：15572960
> 
> 赞同：0
> 
> 时间：2013-03-22T14:33:34.190
> 
> 标签：excel, ms-access, connection-string

我有一个旧的 .mdb 数据库，上个月转换为 .accdb。当时，我更改了连接字符串以查看 .accdb - 它有效。这个月，当我去刷新我的 Excel 报告时，它给了我一个错误，指出“[Microsoft][ODBC Microsoft Access Driver] 找不到文件'文件路径/文件名.MDB'。

这是我设置的连接字符串： DBQ=H:\ZVDept\CorpOps-FieldOps Processing\Contract certainty\All Sates Database\All States CC.accdb;Driver={Microsoft Access Driver (*.mdb, *.accdb) };DriverId=25;FIL=MS Access;MaxBufferSize=2048;PageTimeout=5;

当我将连接字符串设置为 .accdb 时，为什么 Excel 会查找 .mdb 文件？我希望将 Excel 2010 报表连接到 Access 2010 数据库。

我尝试了使用 Microsoft Query 的过程，但是这个报告使用了一些连接 - 当我尝试设置第二个连接时它被炸毁了，所以我宁愿尝试使用连接字符串方法离开它，如果可能的话.

谢谢。

# android - 位图矩阵 postRotate 改变 X 和 Y 轴方向

> ID：15572961
> 
> 赞同：1
> 
> 时间：2013-03-22T14:33:40.047
> 
> 标签：android, canvas, matrix

我正在尝试使用我在某处找到的现成解决方案来旋转我的位图。代码如下：

```
 public void onDraw(Canvas canvas) {
                float x = ship.Position.left;
                float y = ship.Position.top;
                canvas.drawBitmap(ship.ship, x,y,null);
                invalidate();
      } 
```

但是，当我这样做时，X 轴和 Y 轴会改变它们的方向 - 如果我增加 Y，图像会朝向屏幕顶部，而不是朝向底部。如果我旋转 90 度，X 也会发生同样的情况。

我需要旋转它但不改变 Y 和 X 轴方向。

即使旋转，如果我增加 Y，我仍然希望位图向底部移动，如果我增加 X，我仍然希望位图向右移动。

```
 public void update()
     {
       if(!moving)
         {
           fall();
         }
       else //moving
         {
           move();
          faceDirection();
         }
       Position.top += Speed;
      }

private void move() {
   if(Speed < MAXSPEED)
        Speed -= 0.5f;  
 }
private void fall() {
    if(Speed > MAXSPEED*-1)
    Speed += 0.2f;  
 }
private void faceDirection() {

    double OldDiretion = Direction;
    Direction = DirectionHelper.FaceObject(Position, ClickedDiretion);
    if (Direction != OldDiretion)
    {
        Matrix matrix = new Matrix();
        matrix.postRotate((float)Direction);
        ship = Bitmap.createBitmap(ship, 0, 0, ship.getWidth(),ship.getHeight(), matrix, false);
    } 
```

我尝试了上面的代码，但它仍然在改变 Y 方向，它会到达位图的底部，而不是屏幕的底部。

这是项目：[https ://docs.google.com/file/d/0B8V9oTk0eiOKOUZJMWtsSmUtV3M/edit?usp=sharing](https://docs.google.com/file/d/0B8V9oTk0eiOKOUZJMWtsSmUtV3M/edit?usp=sharing)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:50:03.363

您应该首先旋转，而不是翻译：

```
matrix.postTranslate(x, y);
matrix.postRotate(degree); 
```

替代方法是尝试使用`preRotate()`而不是`postRotate()`.

我还强烈建议在绘图时翻译/旋转原件。所以你的`createBitmap()`电话不应该修改方向。至少当您在用户交互时动态更改它时不会。否则，您将创建大量位图来一次又一次地表示旋转，这会影响性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:00:08.660

问题是您实际上并没有旋转位图 - 您只是将它旋转绘制。因此，下次重绘它时，首先通过增加 x/y 将其推向底部或右侧，然后旋转它。

您必须实际旋转位图本身。您可以使用以下代码：

```
ship.ship = Bitmap.createBitmap(ship.ship, 0, 0, ship.ship.getWidth(), ship.ship.getHeight(), matrix, false); 
```

在这里，您创建一个新的旋转位图并将您的参考设置为指向它。

**笔记！**您只能这样做一次！所以你不能在`onDraw`方法中这样做，因为每次重绘它都会旋转。您必须在其他地方执行此操作，然后像往常一样在其中绘制它`onDraw`（没有矩阵旋转）。

# xml - XPATH 表达式查找节点

> ID：15572962
> 
> 赞同：1
> 
> 时间：2013-03-22T14:33:43.757
> 
> 标签：xml, xpath

我在形成正确的 xpath 表达式以在 xml 中查找数据时遇到问题，类似于以下内容：

```
<record>
<datafield tag="675" ind1=" " ind2=" ">
    <subfield code="a">791.221.4(71+44+469+450)(086.82)</subfield>
    <subfield code="c">791.2</subfield>
    <subfield code="s">791.2</subfield>
    <subfield code="b">791.2</subfield>
    <subfield code="v">UDCMRF 2006</subfield>
</datafield>
<datafield tag="702" ind1="1" ind2="1">
    <subfield code="3">39609187</subfield>
    <subfield code="a">Cronenberg</subfield>
    <subfield code="b">David</subfield>
    <subfield code="f">1943-</subfield>
    <subfield code="4">300</subfield>
    <subfield code="4">690</subfield>
</datafield>
<datafield tag="702" ind1="0" ind2="1">
    <subfield code="3">16448611</subfield>
    <subfield code="a">Suschitzky</subfield>
    <subfield code="b">Peter</subfield>
    <subfield code="4">600</subfield>
</datafield>
<datafield tag="702" ind1="0" ind2="1">
    <subfield code="3">8497763</subfield>
    <subfield code="a">Shore</subfield>
    <subfield code="b">Howard</subfield>
    <subfield code="4">230</subfield>
</datafield>
</record> 
```

如何构建一个基本上说的表达式：搜索标签值为 702 的数据字段，并在代码 4 的子字段中返回我的姓氏和值为 300 的人的姓名 - 这样在这种情况下的答案将是 Cronenberg David？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:44:21.690

```
datafield[@tag="702"][./subfield[@code="4" and .="300"]] 
```

将选择所需的数据字段元素。

```
datafield[@tag="702"][./subfield[@code="4" and .="300"]]/subfield[@code="a" or @code="b"]/text() 
```

`['Cronenberg', 'David']`假设子字段在文档中按该顺序出现，将返回

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:25:31.883

**使用**：

```
/*/*[@tag=702 and subfield[@code=4]=300]
         /subfield[@code='a' or @code='b']/text() 
```

# c# - 是否可以检测到 d:DesignInstance

> ID：15572964
> 
> 赞同：1
> 
> 时间：2013-03-22T14:33:49.860
> 
> 标签：c#, wpf

我的数据对象中正在进行一些 AOP，这导致设计器在创建对象时失败。是否可以检测到对象是从设计器创建的，以便我可以中止 AOP 过程？

最好从 AOP 类中（它在一个库中，甚至不知道涉及 WPF。）也许通过查看工作目录（如果它与设计器不同）或类似的东西？

```
xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
mc:Ignorable="d" 
d:DataContext="{d:DesignInstance IsDesignTimeCreatable=True, Type={x:Type ui:DesignData}}"

class DesignData
{
    public DesignData()
    {
        Func<int, ObservableCollection<Food>> createFoods = i =>
            {
                var r = new ObservableCollection<Food>();
                for (int j = 0; j < 10; j++)
                {
                    r.Add(new Food("Food #"+j+" for profile #"+i));
                }
                return r;
            };

        Profiles = new ObservableCollection<Profile>();
        for (int i = 0; i < 20; i++)
        {
            //Crashes because of AOP start-up procedure
            Profiles.Add(new Profile { Name = "ProfileName" + i, Foods = createFoods(i) });
        }
    }

    public ObservableCollection<Profile> Profiles { get; set; }
} 
```

如果答案是否定的，那么什么是合适的替代方案？我唯一能想到的就是创建一个与真实数据对象具有相同属性的全新数据对象，但这会非常烦人。

# javascript - 如何在页面上检索多个可见 div 并显示计数

> ID：15572966
> 
> 赞同：0
> 
> 时间：2013-03-22T14:33:53.760
> 
> 标签：javascript, jquery

我在页面上有大约 1000 个名为“itemcontainer”的 div。我还有许多复选框，可以让我过滤这些项目。

我想在页面顶部显示“返回结果的数量”。“#”是实际返回的 div 数。

目前我有：

```
var divCount = $('.item-container:visible').length;
            $('.header').append(contactCount); 
```

单击过滤器时，它会显示可见结果。但是，如果我取消选中某个过滤器或选中另一个过滤器，它会在之前的结果之外显示可见项目帐户。

例如。有1000个项目。我单击一个复选框。它在页面顶部显示 604。我取消选中该复选框，它将显示 6041000。

对此的任何帮助将不胜感激。

谢谢大家。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T14:35:38.203

```
$('.header').text(contactCount); 
```

应该做的伎俩。有关更多详细信息，请参阅[jQuery 文档](http://api.jquery.com/text/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T14:37:53.477

那是因为您使用了附加功能。它确实将您提供给它的内容附加到 DOM。我建议指定一个跨度，而不是使用 html 函数来设置该跨度的内容。

```
var divCount = $('.item-container:visible').length;
$('#counter').html(divCount); 
```

# android - 动作栏夏洛克中的微调器

> ID：15572968
> 
> 赞同：0
> 
> 时间：2013-03-22T14:33:58.507
> 
> 标签：android, actionbarsherlock

我想在操作栏标题旁边显示一个微调器，我能知道该怎么做吗？对于普通标题，正在使用“setTitle（”“）”，但如果我想自定义标题而不仅仅是文本视图，这怎么可能。这是mainactivity和baseactivity

```
public class MainActivity extends BaseActivity{

    private Fragment mContent;

    public MainActivity(){
        super(R.string.app_name);   
    }

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);

        if (savedInstanceState != null)
            mContent = getSupportFragmentManager().getFragment(savedInstanceState, "mContent");
        if (mContent == null)
            mContent = new MainView();

        setContentView(R.layout.content_frame);
        getSupportFragmentManager()
        .beginTransaction()
        .replace(R.id.content_frame, mContent).commit();

        setBehindContentView(R.layout.menu_frame);
        getSupportFragmentManager()
        .beginTransaction()
        .replace(R.id.menu_frame, new RandomList()).commit();

        getSlidingMenu().setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
        setSlidingActionBarEnabled(true);
    }

    @Override
    public void onSaveInstanceState(Bundle outState){
        super.onSaveInstanceState(outState);
        getSupportFragmentManager().putFragment(outState, "mContent", mContent);
    }

    public void switchContent(Fragment fragment){
        mContent = fragment;
        getSupportFragmentManager().beginTransaction().replace(R.id.content_frame, fragment).commit();
        getSlidingMenu().showContent();
    }   

}
public class BaseActivity extends SlidingFragmentActivity {

    private int mTitleRes;
    protected ListFragment mFrag;

    public BaseActivity(int titleRes){
        mTitleRes = titleRes;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setTitle(mTitleRes);

        setBehindContentView(R.layout.menu_frame);
        FragmentTransaction ft = this.getSupportFragmentManager().beginTransaction();
        mFrag = new RandomList();
        ft.replace(R.id.menu_frame, mFrag);
        ft.commit();

        SlidingMenu sm = getSlidingMenu();
        sm.setShadowWidth(15);
        sm.setShadowDrawable(R.drawable.shadow);
        sm.setBehindOffset(60);
        sm.setFadeDegree(0.35f);
        sm.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);

        getSupportActionBar().setDisplayHomeAsUpEnabled(true);
        getSupportActionBar().setIcon(R.drawable.ic_launcher);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item){
        switch(item.getItemId()){
        case android.R.id.home:
            toggle();
            return true;
        }
        return onOptionsItemSelected(item);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu){
        getSupportMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public class BasePagerAdapter extends FragmentPagerAdapter{
        private List<Fragment> mFragments = new ArrayList<Fragment>();
        private ViewPager mPager;

        public BasePagerAdapter(FragmentManager fm, ViewPager vp){
            super(fm);
            mPager = vp;
            mPager.setAdapter(this);
            for (int i = 0; i < 3; i++){
                addTab(new RandomList());
            }
        }

        public void addTab(Fragment frag){
            mFragments.add(frag);
        }

        @Override
        public Fragment getItem(int position){
            return mFragments.get(position);
        }

        @Override
        public int getCount(){
            return mFragments.size();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:47:36.457

我在这里得到了答案是需要什么

```
 getSupportActionBar()
            .setDisplayShowCustomEnabled(true);
   getSupportActionBar().setCustomView(
            R.layout.your_custom_layout); 
```

[Sherlock Actionbar 定制设计](https://stackoverflow.com/questions/11877544/sherlock-actionbar-custom-design?rq=1)

上面的链接有详细的答案

# java - 使用 DataInputStream 和 DataOutputStream

> ID：15572970
> 
> 赞同：2
> 
> 时间：2013-03-22T14:34:11.587
> 
> 标签：java, arrays, datainputstream, dataoutputstream

我想使用 DataInputStream 将几个字符串从 A 发送到 B。

我知道如何使用`.write()`，但我不确定分离字符串的最佳方法。事实上 - 经过研究，除非我在字符串中添加一个字符并在 B 处拆分，否则似乎不可能。

`DataInputStream`将考虑使用的任何替代方案。我打算创建一个`Array`并将其发送出去，尽管我不知道该怎么做。

到目前为止，我有：

```
public String getDetails() {       
 System.out.print("Name: ");
 String uiname = scan.next();
 pout.write(uiname);

 System.out.print("Address: ");
 String uiaddress = scan.next();

 pout.write(uiaddress);

 return ""; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:40:09.260

只要您的字符串长度小于 65536 个字符，您就可以使用[DataOutputStream.writeUtf()](http://docs.oracle.com/javase/6/docs/api/java/io/DataOutputStream.html#writeUTF%28java.lang.String%29)和[DataInputStream.readUTF()](http://docs.oracle.com/javase/6/docs/api/java/io/DataInputStream.html#readUTF%28%29)。如果您需要比字符串和原语更复杂的东西，则需要使用`ObjectOutputStream`and `ObjectInputStream`。

示例（可能包含语法错误）：

```
DataOutputStream out = new DataOutputStream(...);
out.writeUtf("foo");
out.writeUtf("bar");
out.close();

DataInputStream in = new DataInputStream(...);
String s1 = in.readUtf();
String s2 = in.readUtf();
// that's all, folks! 
```

该`writeUtf()`方法在字符串之前加上其字符数。该`readUtf()`方法首先获取字符数，然后准确读取那么多字符。只要您只是在编写/读取字符串，流就可以弄清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:41:41.697

两个想法：

*   使用`DataOutputStream.writeUTF`和 `DataInputStream.readUTF`

*   使用像 JSON（或 XML）这样的“持有人”格式并构建一个您“打印”的 JSON 数组，然后在另一端使用众多库中的任何一个进行解码（[json.org](http://json.org/java/)上的 JSON 库足以完成该任务)

# emacs - 在 CUA 模式下 Cx 的标准行为

> ID：15572975
> 
> 赞同：3
> 
> 时间：2013-03-22T14:34:32.543
> 
> 标签：emacs, elisp

我最近从 切换`vi`到`emacs`. 我喜欢`CUA`模式。但是，`CUA`模式会`C-x`杀死活动区域。当我想用 . 清除矩形选择时，这很烦人`C-x r c`。

如何`CUA`在完全开箱即用的行为的同时使用模式`C-x`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T17:13:04.937

如果您查看 cua-mode 的帮助，它会为您提供使用与前缀键（如`C-x`）冲突的命令的选项：

```
如果您确实需要执行以以下之一开头的命令
即使该区域处于活动状态，前缀键也有三个
选项：
- 快速按两次前缀键（在 0.2 秒内），
- 在 0.2 秒内按下前缀键和下一个键，或
- 使用带有前缀键的SHIFT 键，即CSx 或CSc。

```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T23:20:39.323

使用`cua-selection-mode`而不是`cua-mode`.

前者提供了 CUA 的其他配置和功能（例如 Francesco 提到的矩形编辑），但它只留下`C-x`, `C-c`, `C-v`, and `C-z`，这意味着它与开箱即用的 Emacs 使用高度兼容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T18:48:26.773

除了 jtahlborn 的一般回答之外，还请注意 cua-mode 重新实现了矩形命令（恕我直言，其方式比标准`C-x``r`命令更有趣）

只需按下`C-RET`即可进入矩形选择模式。从那里常规命令对矩形选择起作用：例如，您可以使用删除区域`DEL`。

# azure - 如何为 Azure 中的“被动”Web 项目执行 web.config 转换/发布？

> ID：15572977
> 
> 赞同：1
> 
> 时间：2013-03-22T14:34:32.927
> 
> 标签：azure, publish, azure-web-roles

在我的 Azure Web 角色中，我添加了一个额外的网站，与[此处描述](http://www.wadewegner.com/2011/02/running-multiple-websites-in-a-windows-azure-web-role/)的大致相同。
问题是第二个网站由 Site`physicalDirectory`中的属性引用`ServiceDefinition.csdef`：

```
<Site name="SecondWeb" physicalDirectory="..\..\..\mySecondWebSite"> 
```

如果我将此属性指向项目位置，它将简单地打包整个项目文件夹并发布到 Web 角色。
我想要的`web.config`是打包了带有我的转换的编译/发布的配置文件，与完成 Web 角色的“默认”Web 项目非常相似。

有没有办法在 Azure 云项目的（预）发布事件中编译/发布（到本地文件夹）？

# c# - 测试数据构建器模式相对于对象初始化器有什么好处？

> ID：15572982
> 
> 赞同：18
> 
> 时间：2013-03-22T14:34:57.870
> 
> 标签：c#, unit-testing

我一直在阅读大量支持测试数据构建器模式优点的[博客](http://elegantcode.com/2008/04/26/test-data-builders-refined/) [文章。](http://geekswithblogs.net/Podwysocki/archive/2008/01/08/118362.aspx)这似乎是一个好主意，但所有的帖子都是几年前的。

当 C# 引入[Object Initializes](http://msdn.microsoft.com/en-us/library/vstudio/bb384062.aspx)时，它是否使 Test Data Builder 模式过时了？

在 Object Initializers 之前，您需要以下代码来初始化 person 对象：

```
Person p = new Person("John", "Doe", "555-555-1234"); 
```

当时，拥有一个构建器会像这样清理代码：

```
Person person = new PersonBuilder()
        .WithFirstName("John")
        .WithLastName("Doe")
        .WithPhoneNumber("555-555-1234"); 
```

现在使用对象初始化器，它可以看起来像这样，而无需编写任何构建器方法：

```
Person p = new Person() {FirstName="John", LastName="Doe", Phone="555-555-1234"}; 
```

在这个简单的示例中，似乎不需要构建器模式。我错过了什么吗？人们还在使用建造者模式吗？如果是这样，有什么好处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:17:22.573

在许多情况下，您可以用对象初始化器替换构建器。

但是，在某些情况下，构建器仍然是一个不错的选择。

不可变对象就是一个例子。例如，Jon Skeets protobuff 实现是不可变对象的真实世界构建器模式的一个很好的例子。（[https://codeblog.jonskeet.uk/2008/08/20/lessons-learned-from-protocol-buffers-part-1-messages-builders-and-immutability/](https://codeblog.jonskeet.uk/2008/08/20/lessons-learned-from-protocol-buffers-part-1-messages-builders-and-immutability/)）

```
Person john = new Person.Builder()
    .SetFirstName("John")
    .SetLastName("Doe")
    .Build(); //creates an immutable person 
```

其他情况可能是应用预设值。例如。

```
Rectangle rect = RectangleBuilder.MakeSquare(10).Build();
Car car = CarBuilder.MakeVolvo().PimpIt().SetColor(Color.Red).Build(); 
```

在这种情况下，您可以一次设置多个属性，以便您可以从某种原型开始并从那里继续。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:50:45.080

以 StringBuilder 为例。为了构建具有高性能的新字符串，它仍然有用且需要（因为编译器中的优化不会涵盖所有场景）。正如已经评论过的，其他不可变对象也是如此。

此外，当使用 builder 模式时，更容易替换 initalized 类型，这会给您带来松散耦合（用于依赖注入）。测试目的可能并不总是需要它，但有时仍可能派上用场。

# php - 获取动态 url 的一部分

> ID：15572992
> 
> 赞同：1
> 
> 时间：2013-03-22T14:35:10.980
> 
> 标签：php, regex

我正在尝试在我的网站上获取部分 URL

在这个情况下：

```
http://mywebsite/filexx/yyyyy/abaete/374    

$url2 = "http://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]";

if(preg_match("/\/(\d+)$/",$url2,$matches))
{
    $meuid = $matches[1];
} 
```

它的作品，但让我们提出两种不同的情况：

```
http://mywebsite/filexx/yyyyy/abaete/374/?p=1
// i'm try to get the 374 (ID)

http://mywebsite/filexx/yyyyy/374/?p=1
// here the same 
```

所以如果整数（ 374 ）或查询 374/?p=1 之前的部分，我想获得最后一部分。所以我想要374。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:45:49.443

我只会让我的评论成为答案：

```
<?php
    $string = 'http://mywebsite/filexx/yyyyy/abaete/374/?g=123';
    $matches = array();

    preg_match_all('/.*?\/(\d+)\/?/s', $string, $matches);

    echo '<pre>';
    print_r($matches);
    echo '</pre>';
?> 
```

它还将忽略 /?getval1=1&getval2=2&etc=etc

**输出**

```
Array
(
    [0] => Array
        (
            [0] => http://mywebsite/filexx/yyyyy/abaete/374/
        )

    [1] => Array
        (
            [0] => 374
        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:42:04.533

```
$url = 'http://mywebsite/filexx/yyyyy/abaete/374/?p=1';

$explodedUrl = explode('/',$url);
$countArray = count($explodedUrl);
if(strpos($explodedUrl[$countArray-1],'?') === FALSE){
    $yourId = $explodedUrl[$countArray-1];
} else {
    $yourId = $explodedUrl[$countArray-2];
} 
```

`$yourId`包含您的 ID

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T14:46:09.630

```
http://mywebsite/filexx/yyyyy/abaete/374    

$url2 = "http://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]";

if(preg_match('~([0-9]+)\/\?p=~', $url2, $matches))
{
    $meuid = $matches[1];
} 
```

这将获得 /?p= 之前的数字。

# android - 需要 Greendroid GDExpandableListActivity 示例

> ID：15572993
> 
> 赞同：1
> 
> 时间：2013-03-22T14:35:11.433
> 
> 标签：android, expandablelistview, greendroid

我正在寻找该活动类的任何简单实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T08:04:32.100

我会在这里回答自己我的解决方案

```
import greendroid.app.GDExpandableListActivity;
import greendroid.widget.ActionBarItem.Type;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import android.os.Bundle;
import android.widget.ExpandableListAdapter;
import android.widget.SimpleExpandableListAdapter;

public class ExpListViewActivity extends GDExpandableListActivity {
    private static final String NAME = "NAME";
    private static final String IS_EVEN = "IS_EVEN";

    DataBaseHelper dbHelper;

    private ExpandableListAdapter mAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addActionBarItem(Type.Add);
    List<Map<String, String>> groupData = new ArrayList<Map<String, String>>();
    List<List<Map<String, String>>> childData = new ArrayList<List<Map<String, String>>>();

    for (int i = 0; i < 20; i++) {
        Map<String, String> curGroupMap = new HashMap<String, String>();
        groupData.add(curGroupMap);
        curGroupMap.put(NAME, "Item " + i);
        curGroupMap.put(IS_EVEN, (i % 2 == 0) ? "This group is even" : "This group is odd");

        List<Map<String, String>> children = new ArrayList<Map<String, String>>();
        for (int j = 0; j < 5; j++) {
            Map<String, String> curChildMap = new HashMap<String, String>();
            children.add(curChildMap);
           // curChildMap.put(NAME, "Child " + j);
            curChildMap.put(IS_EVEN, (j % 2 == 0) ? "Hello " + j: "Good Morning "+ j);
        }
        childData.add(children);
    }

    // Set up our adapter
    mAdapter = new SimpleExpandableListAdapter(
            this,
            groupData,
            android.R.layout.simple_expandable_list_item_1,
            new String[] { NAME, IS_EVEN },
            new int[] { android.R.id.text1, android.R.id.text2 },
            childData,
            android.R.layout.simple_expandable_list_item_2,
            new String[] { NAME, IS_EVEN },
            new int[] { android.R.id.text1, android.R.id.text2 }
            );
    setListAdapter(mAdapter);

    }

} 
```

# asp.net - dbo.TempGetStateItemExclusive3 重复调用

> ID：15572994
> 
> 赞同：16
> 
> 时间：2013-03-22T14:35:14.093
> 
> 标签：asp.net, sql-server, sitecore, session-state

我正在调查我们网站使用 SQL Server 管理会话的问题。该网站是基于 sitecore CMS 的 asp.net 网络表单。我们在各种环境中都有相同的代码，例如 QA、登台和生产。

在生产中，我们看到的是，周期性地，我们得到一个快速上升的 CPU 使用率，这与服务器的流量没有任何关系。除了这个 cpu 峰值，我们还看到了网络 I/O 的相应峰值。

我们的监控软件不会区分到 Internet 的流量和到 DB 服务器的流量；但是，我们在 DB 服务器上看到的**实际上是每秒`dbo.TempGetStateItemExclusive3`**对 asp 会话数据库的数百次调用，所有这些调用都是针对相同的会话 id，并且没有相应数量的页面请求进入 Web 服务器。

使用相同的代码和配置，我们根本看不到其他环境的这种行为。对于其他会话 ID，我们也看不到它，只有这个特定的。

从数据库中删除该行只会导致使用相同的会话 ID 重新创建它。

更新

我在事件日志中发现了这个错误：

```
Violation of PRIMARY KEY constraint 'PK__ASPState__C9F49290145C0A3F'. Cannot insert duplicate key in object 'dbo.ASPStateTempSessions'. The duplicate key value is (sessionidwiththeproblem). The statement has been terminated.
Stack trace:

at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean\ breakConnection)
at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand\ cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler,\ TdsParserStateObject stateObj)
at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds,\ RunBehavior runBehavior, String resetOptionsString)
at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior,\ RunBehavior runBehavior, Boolean returnStream, Boolean async)
at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior,\ RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)
at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(DbAsyncResult\ result, String methodName, Boolean sendToPipe)
at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
at System.Web.SessionState.SqlSessionStateStore.SqlExecuteNonQueryWithRetry(SqlCommand\ cmd, Boolean ignoreInsertPKException, String id) 
```

任何人都知道如何尝试创建重复的会话 ID？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-05T10:20:05.430

我们遇到了具有以下配置的类似问题：

*   IIS 7.5
*   .NET 框架 4.0
*   Windows 2008（在 IIS 和数据库服务器上）
*   由 ASPState 数据库管理的会话

问题是有时某些会话仍然锁定在 ASPState 数据库中，导致每个锁定会话每秒调用数百次 dbo.TempGetStateItemExclusive3。

IIS 服务器上的 CPU 最终会随着锁定会话的数量而增加。一个临时解决方案是回收应用程序池。

进一步并在 IIS 服务器上启用跟踪，然后分析跟踪，我们注意到每当 EXECUTE_REQUEST_HANDLER 模块中出现问题（即导致 500 内部服务器错误的网络连接问题）时，下一个模块是 RELEASE_REQUEST_STATE （并且应该解锁会话）没有被执行。因此会话保持锁定。

它原来是来自 IIS 的错误，我们通过在 web.config 中将 uploadReadAheadSize 的值更改为 0 来修复它：

```
<system.webServer>
  <serverRuntime uploadReadAheadSize="0" />
</system.webServer> 
```

UploadReadAheadSize 属性确定 Web 服务器将读入缓冲区并传递给 ISAPI 扩展的字节数。每个客户端请求都会发生一次。

另请参阅： [AJAX POST 的 ManagedPipelineHandler 如果 IE9 用户在调用正在进行时离开页面，则崩溃](https://stackoverflow.com/questions/15437524/managedpipelinehandler-for-an-ajax-post-crashes-if-an-ie9-user-navigates-away-fr)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:26:32.853

要探索 IIS 中的应用程序设置中可能存在的概念，您可以使用 Web 部署 (msdeploy) 转储站点的配置。然后对显示问题的框和没有问题的框之间的输出进行比较。

像这样的东西会输出到控制台

```
msdeploy –verb:dump –source:appHostConfig="Default Web Site" 
```

或作为 XML

```
msdeploy –verb:dump –source:appHostConfig="Default Web Site" -xml 
```

请参阅[http://technet.microsoft.com/en-us/library/dd569101(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/dd569101(v=ws.10).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T15:34:54.747

看起来像是 SQL 问题而不是 Sitecore 问题，可能与未清除的会话有关。我不是 DBA，但是否启用了 SQL 代理？您的生产 SQL 服务器是否与其他环境处于不同的服务包/补丁级别（[本文](https://stackoverflow.com/questions/2156876/sql-server-requests-time-out-as-tempgetstateitemexclusive-is-getting-called-cont)提到了一些针对类似问题的旧修补程序）？

一些调查链接，直到有人可以更具体地回答这个问题！您可能希望包含有关您正在使用的 SQL 版本的一些信息。

[http://jerschneid.blogspot.co.uk/2010/01/aspnet-sql-server-requests-timing-out.html](http://jerschneid.blogspot.co.uk/2010/01/aspnet-sql-server-requests-timing-out.html)

[https://www.simple-talk.com/sql/sql-tools/how-to-identify-blocking-problems-with-sql-profiler/](https://www.simple-talk.com/sql/sql-tools/how-to-identify-blocking-problems-with-sql-profiler/)

# orchardcms - 在 virtual/app 子目录上部署基于 Orchard 的网站的问题

> ID：15572995
> 
> 赞同：0
> 
> 时间：2013-03-22T14:35:17.733
> 
> 标签：orchardcms

我在虚拟主机上部署基于 Orchard 的网站时遇到问题。

我需要在我的虚拟主机上运行 2 个 Orchard 网站。为此，我创建了 2 个子目录，这些子目录设置为拥有自己权限的应用程序和虚拟目录：

*   **〜/网站1**
*   **~/site2**

最后我设置了两个域名：

*   **mysite1.com**指向我主机的 vdir **~/site1**
*   **mysite2.com**指向我主机的 vdir **~/site2**

当我转到 mysite1.com 主页或 mysite1.com/Admin（硬路径？！）时，我的页面可以工作。但是当页面 slurp 指向 Orchard 动态页面/内容时，它们不起作用。然后它给了我很多：

> HTTP 404。找不到资源

你有什么想法吗？

[ps：我在果园论坛](http://orchard.codeplex.com/discussions/437490)上也贴了更多详情

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:57:51.273

它们不仅需要是 vdir，还需要是完整的 IIS 应用程序，在 ASP.NET 4.0 集成管道应用程序池下，具有完全信任。（请不要跨帖）

# haskell - 表示有限（非递归）代数类型值的最有效方法是什么？

> ID：15572996
> 
> 赞同：11
> 
> 时间：2013-03-22T14:35:18.400
> 
> 标签：haskell, serialization, algebraic-data-types

序列化仅由构造函数组成的有限（非递归）代数数据类型的最有效方法是什么？

例如

```
p = A
  | B q

q = C 
  | D r
  | E

r = F
  | G 
```

手动枚举这个微不足道的定义的所有有效组合是可能的：

```
A      0x00
B C    0x01
B D F  0x02
B D G  0x03
B E    0x04 
```

*   这里有更广泛的理论吗？

*   如果我们然后添加非构造函数类型，例如 int 等，怎么样？

*   Haskell 如何在内存中表示这些（它允许递归，因此可能需要指针/引用）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T17:10:21.613

没有完全标准的类可以做到这一点，但自己制作一个非常容易。我将勾勒出一种方法：

```
data P = A | B Q deriving Show
data Q = C | D R | E deriving Show
data R = F | G  deriving Show

class Finite a where
    allValues :: [a]

instance Finite P where
    allValues = [A] ++ map B allValues

instance Finite Q where
    allValues = [C] ++ map D allValues ++ [E]

instance Finite R where
    allValues = [F] ++ [G] 
```

我以这种方式编写了实例，以表明它非常简单和机械，并且可以通过程序来完成（例如，使用通用编程或 Template Haskell）。`Bounded`如果类型是可擦除的，您还可以添加一个实例来为您做一些工作`Enum`：

```
instance (Bounded a, Enum a) => Finite a where
    allValues = [minBound..maxBound] 
```

如果您现在添加`deriving (Bounded, Show)`到`R`，那就少写一个实例！

无论如何，现在我们可以评估`allValues :: [P]`并返回`[A,B C,B (D F),B (D G),B E]`- 然后您可以`zip`使用它`[0..]`来获取您的编码等等。

* * *

但肯定以前有人做过！我没有过多地使用序列化（如果有的话），但是快速搜索表明[二进制包](http://hackage.haskell.org/package/binary)和[二进制派生包](http://hackage.haskell.org/package/binary-derive) 可以为您做类似的事情，而无需自己编写实例。我会先看看那些做你想做的事。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-22T17:21:19.113

至于内存中的 haskell 表示，我们通常不能表示完全打包的东西，因为结构是惰性的，这意味着我们需要在每个级别上进行间接处理。也就是说，拆包会让你把这些东西压在一起。但是，据我所知，它不会将嵌套构造函数中的位打包到同一个单词中。

有一个指针标记优化，它在指向它的指针中推送有关构造函数的一些信息：http: [//hackage.haskell.org/trac/ghc/wiki/Commentary/Rts/HaskellExecution/PointerTagging](http://hackage.haskell.org/trac/ghc/wiki/Commentary/Rts/HaskellExecution/PointerTagging)

有关拆包的更多信息，请参见：[http ://www.haskell.org/haskellwiki/Performance/Data_types#Unpacking_strict_fields](http://www.haskell.org/haskellwiki/Performance/Data_types#Unpacking_strict_fields)