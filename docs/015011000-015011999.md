# StackOverflow 问答 15011000-15011999

# string - Ext.String.escape

> ID：15011003
> 
> 赞同：4
> 
> 时间：2013-02-21T19:52:37.647
> 
> 标签：string, extjs

对于如下字符串：

Sencha 的字符串实用程序是“好”的

Ext.String.escape 会将其转换为以下内容：

Sencha\\ 的字符串实用程序是 \"good\"

为什么它在撇号上添加双反斜杠与在倒逗号上添加单反斜杠。

最终发生的是当我显示它显示的字符串时：

Sencha\ 的字符串实用程序是“好”的

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:09:16.840

你可以试试这个：

```
Ext.String.escape('Sencha\'s string utility is "good"').replace(/\\/,'');
// Output: Sencha's string utility is "good" 
```

# c++ - 创建 win32 API C++ 后访问组件

> ID：15011007
> 
> 赞同：0
> 
> 时间：2013-02-21T19:52:41.557
> 
> 标签：c++, winapi

喜欢 c++ 并想创建一个类似 windows 的应用程序，我决定尝试 win32。现在效果相当不错（我认为）。然而，我发现自己有一个问题。

我想创建一个有 2 个按钮的应用程序。当按下 1 时，另一个不再可见（非常有用）。

**问题**

我似乎无法访问我在应用程序中创建的按钮。如何访问 CALLBACK 中创建的按钮。我很确定这是一个相当愚蠢的问题，但它肯定会帮助我进步。

**到目前为止我做了什么**（不包括所有代码）

```
enum {
  IDBC_DEFPUSHBUTTON=200
};

//Prototype functions
LRESULT CALLBACK WndProc(HWND,UINT,WPARAM,LPARAM);
int OnCreate(const HWND,CREATESTRUCT*);
HWND CreateButton(const HWND,const HINSTANCE,DWORD,const RECT&,const int,const ustring&);
inline int ErrMsg(const ustring&);

//Main
int WINAPI WinMain(HINSTANCE hInst,HINSTANCE,LPSTR pStr,int nCmd) {
   ...
}

LRESULT CALLBACK WndProc(HWND hwnd,UINT uMsg,WPARAM wParam,LPARAM lParam) {
    switch (uMsg) {
    case WM_CREATE: //APP-CREATE
        return OnCreate(hwnd,reinterpret_cast<CREATESTRUCT*>(lParam));
    case WM_COMMAND:
        switch(LOWORD(wParam)) {
            case IDBC_DEFPUSHBUTTON: {
                PostQuitMessage(0);
                return 0;
            }
        }
        break;
    case WM_DESTROY: //APP-END
        PostQuitMessage(0);
        return 0;
    default:
       return DefWindowProc(hwnd,uMsg,wParam,lParam);  
    }
} 
```

onCreate 函数创建所有按钮并与 CALLBACK 一起工作（当我单击按钮时应用程序实际上退出了！（测试目的））。而是拥有

> PostQuitMessage(0)

我想要类似的东西：

> IDBC_DEFPUSHBUTTON.Visible = 假；

以下代码是 OnCreate 函数和 CreateButton 函数：

```
int OnCreate(const HWND hwnd,CREATESTRUCT *cs) {
    RECT rc={10,10,200,40}; //Position Rectangle
    CreateButton(hwnd,cs->hInstance,BS_DEFPUSHBUTTON,rc,IDBC_DEFPUSHBUTTON,_T("DEFAULT PUSH BUTTON"));
    return 0;
}

//Button creation function
HWND CreateButton(const HWND hParent,const HINSTANCE hInst,DWORD dwStyle,const RECT& rc,const int id,const ustring& caption) {
    dwStyle|=WS_CHILD|WS_VISIBLE;
    return CreateWindowEx(0,_T("button"),caption.c_str(),dwStyle,rc.left,rc.top,rc.right,rc.bottom,hParent,reinterpret_cast<HMENU>(static_cast<INT_PTR>(id)),hInst,0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:07:51.820

有两种方法可以访问控制窗口。一种是保存`HWND`CreateWindowEx 返回的，每次需要访问控件时使用。另一种是[`GetDlgItem`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645481%28v=vs.85%29.aspx)如果知道`HWND`父窗口的ID和创建控件时分配的ID，则调用，返回控件的ID `HWND`。显然，保存原始值更容易，因为它不会改变。

# c++ - 从数组中获取值的“过程”是否有名称？

> ID：15011011
> 
> 赞同：3
> 
> 时间：2013-02-21T19:52:56.557
> 
> 标签：c++, arrays, call, procedure

我想知道从数组中获取值的“过程”是否有名称（例如，当你这样做时：

```
array[3] // this will get the value from index '4' 
```

（在 C++ 中），获取值的过程是否有名称？）

如果解释得很好，我很抱歉。我试图在谷歌中搜索一些东西，但我无法用我的话找到任何东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T19:58:40.187

它被称为*下标运算符*。它是可重载的，但在数组或指针上使用时，`a[n]`其含义与`*(a + n)`.

该名称可能来自数学，其中向量* 写为*v*  = ( *v* [1] , ..., *v* [*n*] )，因此*v* [*i*]表示第*i*^个元素。

[*) 除非你是一个相对主义者，但那些在电脑附近是不允许的。如果是的话，他们会朝你大喊“1-form”。]

# google-app-engine - 部署后的 Google Cloud Endpoint 404

> ID：15011014
> 
> 赞同：6
> 
> 时间：2013-02-21T19:53:05.110
> 
> 标签：google-app-engine, http-status-code-404, google-cloud-endpoints

现在 Google Cloud Endpoints 已向所有开发人员开放，我创建了一个 Google Cloud Endpoint，它可以在 Eclipse 调试中本地运行。但是当我部署时，实时端点只返回一个 HTTP 404。我的项目的 JSP 页面在本地运行和部署。这只是一旦部署就不起作用的端点。

有人知道我需要做什么来部署云端点吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-23T21:01:34.663

我发现即使我只部署了一个版本 (v1) 并且该版本在应用引擎管理控制台中被指示为“默认”版本，但在访问 API 之前，我仍然必须将 v1“设置”为默认版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T18:21:56.423

Endpoints 目前仅在默认应用版本上支持 API。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T20:34:56.147

我注意到您必须通过将您部署的版本设置为默认版本来访问您的端点。例如[https://yourappid.appspot.com/_ah/api/path/v2/methodname](https://yourappid.appspot.com/_ah/api/path/v2/methodname)。如果您使用[https://someappversion.yourappid.appspot.com/_ah/api/path/v2/methodnamel](https://someappversion.yourappid.appspot.com/_ah/api/path/v2/methodnamel)，根据我的经验它将无法工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T20:23:50.623

您是否尝试过通过 API 资源管理器访问它们？

我昨天遇到了同样的问题...只是碰巧使用了错误的地址。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-23T10:38:21.843

错误的是V2。API版本不随Appengine版本增加！这是两个不同的版本。尝试使用版本 1。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T16:20:16.327

我遇到了这个问题，我的问题是我没有在 Eclipse 中生成“Cloud Endpoint Cloud Library”。

一旦我做到了，一切都完美无缺。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-21T13:53:58.267

从 App Engine 1.7.7 及更早版本开始，这也可能是由于忘记将 Endpoint 类添加到 web.xml 造成的，如下所示：

```
<servlet>
    <servlet-name>SystemServiceServlet</servlet-name>
    <servlet-class>com.google.api.server.spi.SystemServiceServlet</servlet-class>
    <init-param>
        <param-name>services</param-name>
        <!-- Careful! No whitespace but commas between class names. -->
        <param-value>ditto.api.CategoryEndpoint,ditto.api.PostEndpoint</param-value>
    </init-param>
</servlet> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-13T05:52:51.023

要添加到已接受的答案，如果您的 API 是用 Java 编写的，并且您使用的是 Maven，则可以通过将其添加到`appengine-maven-plugin`. 部署时，版本号会自动更新，部署的版本会被设置为你的 API 当前运行的唯一版本：

```
 <plugin>
    <groupId>com.google.cloud.tools</groupId>
    <artifactId>appengine-maven-plugin</artifactId>
    <version>${appengine.maven.plugin.version}</version>
    <configuration>
      <deploy.projectId>my-gcp-project-name</deploy.projectId>
      <deploy.version>GCLOUD_CONFIG</deploy.version>
    </configuration>
  </plugin> 
```

相关行是`<deploy.version>GCLOUD_CONFIG</deploy.version>`(`GCLOUD_CONFIG`是您需要的实际值 - 在部署时它被识别为特殊变量)

* * *

# c++ - C++中的C字符串删除

> ID：15011015
> 
> 赞同：-3
> 
> 时间：2013-02-21T19:53:06.543
> 
> 标签：c++, c, string

什么是好的，什么是错的？在这种情况下，我必须调用 delete 以防止内存泄漏？此外，C 和 C++ 中的行为是否完全相同？有什么不同吗？

```
const char* a = "blahblah";
...
delete a;

char b* = new char('a');
...
delete b;

char c[100] = "blahblah";
...
delete c;

char d* = new char[40];
...
delete d;

char e* = new char[40];
...
delete[] e; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T19:54:10.163

> 在这种情况下，我必须调用 delete 以防止内存泄漏

只有`delete`你得到了什么`new`，`delete []`你得到了什么`new []`。其他所有删除都是错误的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T19:55:48.710

规则很简单：

*   不要`delete`任何你没有调用的指针`new`
*   用于`delete[]`您分配的所有内容`new[]`
*   使用`delete`（无括号）分配的所有内容`new`（无括号）

通过遵循这些规则，您可以看到只有 和 的删除`b`是`e`有效的：

*   `a`并且`c`没有被分配一个`new`
*   `d`需要一个`delete[]`
*   `b`并且`e`是正确的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-21T19:58:51.943

他们都错了。永远不要调用`delete`C++ 程序（除非您直接实现内存管理原语，如智能指针） - 始终使用智能指针来处理资源破坏。对于数组，使用像`std::vector<T>`. 对于字符串，有一个专门的`std::string`类。最后，除了直接或正确地（通过智能指针）创建`new`适用于)，那么你肯定做错了。`delete``new`

1.  错误，因为没有要删除的动态内存。
2.  错了，因为你应该使用智能指针（`unique_ptr`在这里看起来不错）。
3.  同 1。
4.  错误，因为您需要`std::vector`动态分配的数组。
5.  同4。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-21T20:07:55.537

> 此外，C 和 C++ 中的行为是否完全相同？有什么不同吗？

C中没有`delete`，C也没有`new`。只有`free`，对应于`malloc`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-21T20:18:52.700

遵守三个规则：

1.  `new`搭配`delete`;
2.  `new[]`搭配`delete[]`;
3.  如果您想在 2013 年及以后编写安全、健壮、惯用的代码，请*使用智能指针实现*（其结果是您将`new`在智能指针构造函数参数中使用，然后*不*使用`delete`）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-21T19:55:24.923

规则是，如果你`new/new[]`那么你必须使用相应`delete/delete[]`的 .

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-21T19:55:48.940

```
delete b;
delete[] e; 
```

这些是唯一正确的删除。

根据经验：

*   每一个都`new`应该有一个对应的`delete`
*   每一个都`new … []`应该有一个对应的`delete []`

这些规则不考虑异常处理。为了保证您的代码异常安全，请使用智能指针。`std::string`当你的意思是“字符串”时使用。

# c++ - 寻找混合颜色的起源作为波长

> ID：15011016
> 
> 赞同：1
> 
> 时间：2013-02-21T19:53:16.683
> 
> 标签：c++, algorithm, colors

所以我想把我的网络摄像头变成一个简单的光谱仪。因为整个过程不仅在相机芯片之后，而且在获得我必须使用 RGB 的值的框架之后。这让我问自己一个问题：我能猜出每种光的主要波长吗？
在光束到达相机之前，会有一张 CD 或一块水晶将光束分解成碎片，但我仍然需要进行一些自我校准。而且，我喜欢漂亮的图表。
除了转换 RGB 之外，另一种解决方案可能是将全光谱生成为彩虹并将 RGB 与光谱进行比较。那可能吗？
问题摘要（让我明确表示反对者）：

1.  如何不仅猜测 RGB 中的主色，还尝试猜测一些复合值（例如洋红色）？
2.  如何生成彩虹以便我可以使用它与 RGB 进行比较？

对于那些需要源代码示例的人，我正在寻找功能：

```
int rgb2wave(int r, int g, int b) {
    /*some code*/
    return wavelength;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T20:31:12.920

如果您使用的是衍射光栅或色散棱镜，那么决定波长的是像素*位置。*

RGB 滤光片的问题在于它们会影响像素对给定波长的*灵敏度*。如果您想要对光谱进行良好估计，则需要分别校准红色、绿色和蓝色像素的响应。

您可以通过比较附近红色、绿色和蓝色像素的响应来做到这一点。由于附近的像素将看到几乎相同频率的光，因此您可以通过观察一个简单的近黑体光源（如白炽灯泡）来提取这种校准。

# android - 来自Android小部件远程视图上的URL的setImageViewUri

> ID：15011017
> 
> 赞同：3
> 
> 时间：2013-02-21T19:53:17.943
> 
> 标签：android, imageview, remoteview, appwidgetprovider

我尝试使用远程视图从 url 设置图像。这是我使用的代码：

```
 rv = new RemoteViews(mContext.getPackageName(), R.layout.widget_item_default);
    WidgetItem item = mWidgetItems.get(position);
    rv.setImageViewUri(R.id.imageDeal, Uri.parse(item.urlImage)); 
```

和布局的代码：

```
 <ImageView
     android:id="@+id/imageDeal"
     android:layout_width="fill_parent"
     android:layout_height="80dp"
     android:layout_marginBottom="2dp"
     android:layout_marginLeft="4dp"
     android:layout_marginRight="4dp"
     android:adjustViewBounds="true"
     android:scaleType="centerCrop"
     android:src="@drawable/mem" /> 
```

小部件已启动，但 imageView 中没有打印图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T05:41:59.853

您的问题在这里得到解答：[https ://groups.google.com/forum/?fromgroups=#!topic/android-developers/jupslaeAEuo](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/jupslaeAEuo)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-01T01:47:26.130

```
FutureTarget<Bitmap> futureTarget = Glide.with(mContext)
                            .load(resizedImageUrl)
                            .asBitmap()
                            .into(Target.SIZE_ORIGINAL, Target.SIZE_ORIGINAL);
                    try
                    {
                        rv.setImageViewBitmap(R.id.icon, futureTarget.get());
                    } catch (InterruptedException | ExecutionException e)
                    {
                        e.printStackTrace();
                    }
                    Glide.clear(futureTarget); 
```

# c++ - 在opengl中使用GLX_EXT_texture_from_pixmap将窗口像素图绑定到纹理

> ID：15011020
> 
> 赞同：1
> 
> 时间：2013-02-21T19:53:45.410
> 
> 标签：c++, opengl, xlib, glx

我想知道如何使用 GLX_EXT_texture_from_pixmap 扩展将窗口像素图绑定到 OpenGL 纹理，但我不让它工作，这是我的代码：

```
 const int pixmap_config[] = {
        GLX_BIND_TO_TEXTURE_RGBA_EXT, True,
        GLX_DRAWABLE_TYPE, GLX_PIXMAP_BIT,
        GLX_BIND_TO_TEXTURE_TARGETS_EXT, GLX_TEXTURE_2D_BIT_EXT,
        GLX_DOUBLEBUFFER, False,
        GLX_Y_INVERTED_EXT, GLX_DONT_CARE,
        None
    };

    const int pixmap_attribs[] = {
        GLX_TEXTURE_TARGET_EXT, GLX_TEXTURE_2D_EXT,
        GLX_TEXTURE_FORMAT_EXT, GLX_TEXTURE_FORMAT_RGB_EXT,
        None
    };

    GLXFBConfig * configs = 0;
    GLXPixmap glxpixmap = 0;
    Pixmap pixmap;
    GLuint texture_id;

    int c=0;
    configs = glXChooseFBConfig(display, 0, pixmap_config, &c);

    pixmap = XCompositeNameWindowPixmap (display, desktop);

    cout<<"Pixmap id"<<pixmap<<endl;

    glxpixmap = glXCreatePixmap(display, configs[0], pixmap, pixmap_attribs);

    cout <<"glxpixmap id"<<glxpixmap<<endl;
    if(glxpixmap){
        glEnable(GL_TEXTURE_2D);
        glGenTextures(1, &texture_id);
        glBindTexture(GL_TEXTURE_2D, texture_id);
        glXBindTexImageEXT(display, glxpixmap, GLX_FRONT_EXT, NULL);
        glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
        glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
        glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);
    } 
```

这给我一个 X 错误：

```
X Error of failed request:  BadMatch (invalid parameter attributes)
  Major opcode of failed request:  152 (Composite)
  Minor opcode of failed request:  6 ()
  Serial number of failed request:  27
  Current serial number in output stream:  30 
```

这发生在`glXBindTexImageEXT(display, glxpixmap, GLX_FRONT_EXT, NULL);`. 我使用空的像素图对其进行了测试并且可以正常工作，但是当我使用`XCompositeNameWindowPixmap`它时会出现该错误，¿我的代码可能有什么问题？

**编辑：**

我发现使用另一个代码，使用 XCompositeNameWindowPixmap 总是返回黑色图像，也许这可能是因为我在 vmware 播放器上使用 ubuntu？我使用这个条目的代码：

[Qt 与 XComposite 问题](https://stackoverflow.com/questions/7252179/qt-with-xcomposite-problem)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-18T00:23:58.573

快速且不完整的清单：

*   您要使其像素图可见的窗口是否可见？
    *   换句话说，它被映射了吗？
*   您要获取的像素图是 window 类型`InputOutput`吗？
*   `xcb_composite_redirect_subwindows(..., XCB_COMPOSITE_REDIRECT_MANUAL);`您是否使用（或 Xlib 等价物？） 重定向了根窗口
    *   仅仅创建一个叠加层是不够的。
    *   请注意，我没有尝试重定向单个窗口，也没有尝试使用`_AUTOMATIC`.
    *   需要做的事情`xcb_composite_redirect_...`隐藏在`GLX_EXT_texture_from_pixmap`规范中。

请记住：您*不*希望运行另一个合成器，甚至*可能*不希望运行另一个窗口管理器。即使禁用了合成，KWin 也会破坏我的玩具合成器的当前迭代。

* * *

与您的特定错误消息无关，但可能是绊脚石：根据您的 GPU 的功能，您可能必须将`GL_NEAREST`纹理过滤器用于 min 和 mag 过滤器。

设置的额外注意事项：覆盖窗口不会让您与桌面交互，因为它是一个实际的覆盖。解决这个问题的常用方法是使用 XFixes 在窗口和覆盖窗口中打一个洞（就输入/事件系统而言）。

# jquery - jQuery `find` 同时匹配一个类或两个类

> ID：15011021
> 
> 赞同：0
> 
> 时间：2013-02-21T19:53:54.627
> 
> 标签：jquery

我的站点中有一个表，在某些页面上，它有两个类，而在其他页面上，它有一个类。我想`find`在那张桌子上做一个，但在这两种情况下都需要找到，但我不想做搜索来发现元素。

我怎么写这个？（我不是 js 和 jquery 方面的专家；感谢您的帮助）这是我到目前为止提出的，但它似乎在两个页面上都不起作用：

```
var tablerow1 = $('table [class="firstclass"]');
var tablerow2 = $('table [class="firstclass secondclass"]');

if(tablerow2){
    var tablerow = tablerow2;
}else{
    var tablerow = tablerow1;
};  

tablerow.find('tr').each(function(index, thiselement){
    ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:58:22.103

改变

```
var tablerow1 = $('table [class="firstclass"]');
var tablerow2 = $('table [class="firstclass secondclass"]'); 
```

到

```
var tablerow1 = $('table.firstclass');
var tablerow2 = $('table.firstclass.secondclass'); 
```

但你也可以只选择`firstclass`. 它将选择具有此类的表，如果它还有更多其他类，因此在您的情况下，您的表将在两种情况下都被选中。

# objective-c - 如何在编辑时使单元格淡出

> ID：15011025
> 
> 赞同：0
> 
> 时间：2013-02-21T19:54:01.933
> 
> 标签：objective-c, uitableview

我有一个包含许多单元格的 Tableview。我实现了以下代码以允许用户编辑表格。

当用户开始编辑时，如何使单元格淡出？

```
- (BOOL) tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
return YES;
}

-(void) tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {

UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];
selectedCell.alpha = 0.1;

if ( editingStyle == UITableViewCellEditingStyleDelete)
{[XC1 removeObjectAtIndex:indexPath.row];
    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade]; 
```

}

```
} 
```

我添加的试图使单元格褪色的当前代码不起作用！

```
UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];
selectedCell.alpha = 0.1; 
```

我希望有一个人可以帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T00:20:51.617

首先，我不确定您是否可以像这样设置单元格的 alpha。请记住，单元格被回收并且不“属于”一个特定的索引路径。也许您应该首先在编辑模式之外进行一些实验。

`commitEditingStyle`其次，在调用之前更改方法中的单元格`deleteRowsAtIndexPaths:`几乎肯定不会做任何事情。此方法仅在确认编辑模式下的表格视图更改时调用，而不仅仅是在选择单元格时调用。

另外，请注意，设置视图的 alpha 不会动画此更改。您可以尝试在调用之前添加动画`deleteRowsAtIndexPaths`。

```
[UIView animateWithDuration:0.25 animations:^{
   cell.alpha = 0.0; 
} completion:^(BOOL finished) {
   // remove the cell
}]; 
```

也许您想将效果链接到选择单元格。这最好通过覆盖来完成`setSelected:animated:`。

# c++ - 清除链表时出现问题，段错误删除

> ID：15011027
> 
> 赞同：-2
> 
> 时间：2013-02-21T19:54:04.510
> 
> 标签：c++

```
template <typename T>
void LinkedList<T>::clear()
{
  LinkedList* p = this;
  LinkedList* q = this;
  while(p->m_next != NULL)
  {
    p = p->m_next;
    delete q;
    q = p;
  }
  return;
}

class LinkedList
{
public:
  T m_data;                  // Data to be stored
  LinkedList<T>* m_next;     // Pointer to the next element in the list
 //Continues into function declarations.
 // . . .
}; 
```

这些是我认为相关的代码片段，如果您需要更多信息，请告诉我。

问题：一旦我击中删除 q 的行，我就会出现段错误

```
delete q; 
```

我插了一些

```
cerr << "msg" << endl; 
```

只是为了检查。关于如何更改此代码以停止段错误的任何想法？显然我正在删除我不应该删除的内容，但我不知道如何删除。clear 函数的要点是把单链表除结束哨兵外完全删除。这个 while 循环总是在第一次运行时出现故障。

这是测试这个的代码。

```
void test01() {

  LinkedList < int > A;

  cout << endl << endl; 
  cout << " ***************** " << endl;
  cout << " *  TEST SET #1  * " << endl;
  cout << " ***************** " << endl;

  cout << "Is the list empty? " << boolalpha << A.isEmpty() <<endl; 
  cout << A << endl;
  cout << "Size of A = " << A.size() << endl;

  //TEST : Inserting 10 numbers to a
  cout << endl << "TEST : Inserting 10 numbers to A" << endl;
  for (int k=0; k<10; k++){
        A.insert_front(k+1);
  } 
  cout << A << endl;
  cout << "Size of a = " << A.size() << endl;

  //TEST : Clearing A
  cout << endl << "TEST : Clearing A" << endl;
  A.clear();
  cout << A << endl;
  cout << "Size of A = " << A.size() << endl << endl;

  cout << "Test 01 - Done!" << endl;
} // Destructor Called Here!! 
```

我只是将功能更改为

```
template <typename T>
void LinkedList<T>::clear()
{
  LinkedList* p = this;
  LinkedList* q = this;
  if(p->m_next != NULL)
  {
    p = p->m_next;
    q = q->m_next;
  }
  while(p->m_next != NULL)
  {
    q = p;
    p = p->m_next;
    delete q;
  }
  m_next = NULL;
  return;
} 
```

现在工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:04:30.003

您的问题是您正在分配`LinkedList`自动存储但`delete`在其上使用。那是UB。

但是，您选择的设计会产生其他错误，即使我只指出了与您的段错误直接相关的错误。大多数链表被设计为管理节点列表的类，它们不会将节点类暴露给客户端。我建议你按照那个方法。

# vba - 在 Excel 电子表格（VBA）中，我需要在某些地方合并的列中搜索特定单词并复制也合并的 ROW

> ID：15011032
> 
> 赞同：0
> 
> 时间：2013-02-21T19:54:32.907
> 
> 标签：vba

我需要在某些地方合并的列中搜索特定单词，如果存在，我需要复制也合并的行并将其粘贴到不同的工作表上。
下面的代码我只使用复制和粘贴包含单词的第一个合并行，然后它给我一个错误。它应该遍历整个工作表并复制包含该单词的所有行。

我已经评论了我的代码，所以它更容易理解。

```
Sub SearchForString()
    Dim LSearchRow As Integer
    Dim LCopyToRow As Integer

    On Error GoTo Err_Execute
    'Start search in row 10
    LSearchRow = 11
    'Start copying data to row 1 in Sheet12 (row counter variable)
    LCopyToRow = 1
    While Len(Range("A" & CStr(LSearchRow)).Value) <> Null
        'If value in column E = "ENGINE AUXILIARY PANEL (EAP 1)", copy entire row to Sheet12
        If Range("E" & CStr(LSearchRow)).Value = "13.8kV SWITCHGEAR METERING CELL #A1 (+06)" Then
            'Select row in Sheet1 to copy
            Rows(CStr(LSearchRow) & ":" & CStr(LSearchRow)).Select
            Selection.Copy
            'Paste row into Sheet2 in next row
            Sheets("Sheet14").Select
            Rows(CStr(LCopyToRow) & ":" & CStr(LCopyToRow)).Select
            ActiveSheet.Paste
            'Move counter to next row
            LCopyToRow = LCopyToRow + 1
            'Go back to Sheet1 to continue searching
            Sheets("Sheet11").Select
        End If
        LSearchRow = LSearchRow + 1
    Wend
Exit Sub

Err_Execute: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:14:04.533

查看您的代码，我看不出为什么会产生错误。但是，您绝对应该替换`<> Null`为`<> 0`，否则您将永远不会进入循环（因为`Len`将始终返回一个数字，因此永远不会为 NULL）。

但是，我认为您可以使用另一种方法显着优化您的代码 - 只需使用自动过滤器来过滤您的搜索词，然后复制所有可见的行。这样做（并使用一些其他 VBA 快捷方式），我最终得到了 4 条指令：

```
Sub nextVersion()
    Dim rngAll As Range

    With Worksheets("Sheet11")
        Set rngAll = .Range("A1").Resize( _
            .Cells(Rows.Count, 1).End(xlUp).Row, 5)
        rngAll.AutoFilter Field:=5, Criteria1:= _
            "13.8kV SWITCHGEAR METERING CELL #A1 (+06)"
        If rngAll.SpecialCells(xlCellTypeVisible).Columns.Count > 1 Then
            rngAll.Offset(1).Resize(rngAll.Rows.Count - 1). _
                SpecialCells(xlCellTypeVisible).EntireRow.Copy _
                Worksheets("Sheet14").Range("1:1")
        End If
        rngAll.AutoFilter
    End With
End Sub 
```

**更新** 鉴于您已合并数据中的单元格，自动筛选解决方案将不起作用。这应该做的工作：

```
Sub CopyRows()
    Dim rng As Range
    Dim lngRows As Long
    Dim lngTargetRow As Long
    Dim lngRowsToCopy As Long

    Set rng = Sheet11.Range("E11")
    lngTargetRow = 0
    lngRows = Sheet11.Cells.Find("*", SearchOrder:=xlByRows, SearchDirection:=xlPrevious).Row

    Worksheets("Sheet14").UsedRange.Clear

    While rng.Row < lngRows
        lngRowsToCopy = rng.MergeArea.Rows.Count
        If rng.Value = "13.8kV SWITCHGEAR METERING CELL #A1 (+06)" Then
            rng.MergeArea.EntireRow.Copy _
                Worksheets("Sheet14").Range("A1").Resize(lngRowsToCopy).Offset(lngTargetRow).EntireRow
            lngTargetRow = lngTargetRow + lngRowsToCopy
        End If
        Set rng = rng.Offset(1)
    Wend

End Sub 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-30T15:44:16.483

```
{
Sub FindTheFeret()
With Worksheets(1).Cells
Set c = .Find("Feret", LookIn:=xlValues)
i = 1
If Not c Is Nothing Then
    firstAddress = c.Address
    Do
        c.EntireRow.Copy
        Worksheets(2).Rows(i).EntireRow.PasteSpecial
        i = i + 1
        Set c = .FindNext(c)
    Loop While Not c Is Nothing And c.Address <> firstAddress
End If
End With
End Sub
} 
```

# vba - 如何使用 vba 永久更改新传入 Outlook 电子邮件的类别？

> ID：15011034
> 
> 赞同：1
> 
> 时间：2013-02-21T19:54:37.223
> 
> 标签：vba, outlook, outlook-2007

当我收到新电子邮件时，我正在尝试执行以下操作：

> Sub CheckReadReceipt(myMail As Outlook.MailItem)
> 
> ```
> If (myMail.ReadReceiptRequested = True) Then
>     myMail.Categories = "Read Receipt Requested"
>     myMail.Save
>     'MsgBox "Read receipt for " & myMail.Subject & " found!"
>     'eventually do something more creative..
> End If
> 
>  End Sub 
> ```

不幸的是，它实际上并没有保存新收到的电子邮件的类别——我显然在这里遗漏了一些东西。

我通过所有传入电子邮件的规则调用它（通过正确查看 MsgBox 成功处理）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-05T10:06:32.457

我也遇到了这个，这让我很沮丧，奇怪的解决方案是改变你的函数调用：

```
myMail.Save 
```

至

```
myMail.Save() 
```

我认为visual basic认为`Save`是一种属性而不是一种方法。

# html - JSON 格式的邮寄地址和电话的特定国家/地区表单字段

> ID：15011035
> 
> 赞同：0
> 
> 时间：2013-02-21T19:54:38.697
> 
> 标签：html, json

大家，是否有一个最新的站点，它在 JSON 中公开特定国家/地区的邮寄地址和电话号码的表单字段，这样我就可以迭代 JSON，创建 HTML 并始终在我的网站上显示我的地址和电话号码字段-迄今为止？理想情况下，每个字段都可以映射到每个国家/地区的相似字段，以鼓励适当的数据结构。

谢谢！布赖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:09:41.263

我认为这就是您正在寻找的[http://weblogs.asp.net/awilinsk/archive/2009/08/13/jquery-amp-international-address-data-collecting-and-storing.aspx](http://weblogs.asp.net/awilinsk/archive/2009/08/13/jquery-amp-international-address-data-collecting-and-storing.aspx)

取自以上来源：

```
(function($) {
    var _fields = {
        address1: { id: "address1", name: "address1" },
        address2: { id: "address2", name: "address2" },
        address3: { id: "address3", name: "address3" },
        locality: { id: "locality", name: "locality" },
        region: { id: "region", name: "region" },
        postCode: { id: "postCode", name: "postCode" }
    };
    var _labels = {
        address1: "Address:",
        address2: "",
        address3: "",
        area: "Area:",
        city: "City:",
        county: "County:",
        department: "Department:",
        district: "District:",
        emirate: "Emirate:",
        island: "Island:",
        locality: "City/Town:",
        metroProvince: "Metro/Province:",
        region: "State/Province/Region:",
        postalCode: "Postal Code:",
        postCode: "Zip/Postal Code:",
        prefecture: "Prefecture:",
        province: "Province:",
        state: "State:",
        zip: "Zip:"
    };
    var _layouts = {};
    var _templates = {
        text: function(data) {
            return "<label for=\"" + data.id + "\">" + data.label + "</label><input id=\"" + data.id + "\" name=\"" + data.name + "\" type=\"text\"/>";
        },
        select: function(data) {
            var html = "<label for=\"" + data.id + "\">" + data.label + "</label><select id=\"" + data.id + "\" name=\"" + data.name + "\" disabled=\"disabled\"><option selected=\"selected\">Loading...</option></select>";
            data.source(function(regions) {
                var html2 = "";
                $.each(regions, function(i, item) {
                    html2 += "<option value=\"" + item.value + "\">" + item.text + "</option>";
                });
                $("#" + data.id).removeAttr("disabled").html(html2);
            });
            return html;
        }
    };
    var _defaultLayout = [
        { fieldName: "address1", templateName: "text", labelName: "address1" },
        { fieldName: "address2", templateName: "text", labelName: "address2" },
        { fieldName: "address3", templateName: "text", labelName: "address3" },
        { fieldName: "locality", templateName: "text", labelName: "locality" },
        { fieldName: "region", templateName: "text", labelName: "region" },
        { fieldName: "postCode", templateName: "text", labelName: "postCode" }
    ];
    $.fn.globalAddress = function(countrySelect, settings) {
        settings = $.extend(true, {}, {
            labels: _labels,
            fields: _fields,
            templates: _templates
        }, settings);
        var addressContainer = $(this);
        $(countrySelect).change(function(e) {
            var country = $(this).val();
            var layout = _layouts[country] ? _layouts[country] : _defaultLayout;
            var html = "";
            $.each(layout, function(i, l) {
                var data = $.extend(true, { label: _labels[l.labelName] }, settings.fields[l.fieldName], l.data);
                html += settings.templates[l.templateName](data);
            });
            $(addressContainer).html($(html));
        }).trigger("change");
        return this;
    };
    $.globalAddressExtend = function(key, layout) {
        _layouts[key] = layout;
    };
})(jQuery) 
```

用法：

```
(function($) {
    $.globalAddressExtend("US", [
        { fieldName: "address1", templateName: "text", labelName: "address1" },
        { fieldName: "address2", templateName: "text", labelName: "address2" },
        { fieldName: "address3", templateName: "text", labelName: "address3" },
        { fieldName: "locality", templateName: "text", labelName: "city" },
        { fieldName: "region", templateName: "text", labelName: "state", source: function(callback) {
            //get data here and call the callback function
        } },
        { fieldName: "postCode", templateName: "text", labelName: "zip" }
    ]);
    $.globalAddressExtend("CA", [
        { fieldName: "address1", templateName: "text", labelName: "address1" },
        { fieldName: "address2", templateName: "text", labelName: "address2" },
        { fieldName: "address3", templateName: "text", labelName: "address3" },
        { fieldName: "locality", templateName: "text", labelName: "city" },
        { fieldName: "region", templateName: "text", labelName: "province", source: function(callback) {
            //get data here and call the callback function
        } },
        { fieldName: "postCode", templateName: "text", labelName: "postalCode" }
    ]);
}); 
```

# math - 解释的数学

> ID：15011036
> 
> 赞同：2
> 
> 时间：2013-02-21T19:54:38.593
> 
> 标签：math, programming-languages, functional-programming, interpreter

我的编程语言教科书通过提供 Scheme 程序来解释解释器是如何工作的。例如，有一个过程可以确定变量是否属于表达式的范围，有一个过程可以定义数据类型，等等。这些功能是解释器的“部分”。

我想了解解释是如何通过形式数学进行的。解释器查看一些输入并确定接下来要调用哪个函数（子程序）。似乎函数的这种处理可以用数学方式表示，因为函数只是相互执行或执行操作。是否有一个数学分支可以处理这种抽象函数的表示？

# javascript - 我对数字功能的 javascript 验证无法正常工作

> ID：15011038
> 
> 赞同：1
> 
> 时间：2013-02-21T19:54:54.207
> 
> 标签：javascript, jquery, asp.net, html, validation

```
function ValidateShippedQuantity() {
    var shippedQty = jQuery("#txtShippedQuantity").val();
    shippedQty = shippedQty.toString();
    for (i = 0; i < shippedQty.length; i++) {
        var c = shippedQty.charAt(i);
        if (isNaN(c)) //(!(/^\d+$/.test(shippedQty))) 
        {
            alert("Only Numeric Values Allowed");
            //x.focus();
            return false;
        }
    }
    return true;
} 
```

我想要的是检查仅包含数值的文本框。上面的函数 isNaN 或 /^\d+$/.test() 不起作用，因为无论我输入什么，例如“1”或“10”，它总是返回 false。更奇怪的是，isNaN 曾经工作了一段时间。然后无论我做什么，它都不起作用。

调用验证功能的按钮位于 Gridview 中。

```
<EditItemTemplate>
 <asp:LinkButton ID="btnUpdTrk" runat="server" Text="Update" CommandName="Update"
    OnClientClick="javascript:return ValidateShippedQuantity();" CausesValidation="false" />
</EditItemTemplate> 
```

txtShippedQuantity 的文本框，

```
<asp:TemplateField HeaderText="Shipped&nbsp;Qty">
   <ItemTemplate>
     <asp:Label ID="lblShippedQuantity" runat="server" Text='<%#Eval("ShippedQuantity")%>'></asp:Label>
   </ItemTemplate>
   <EditItemTemplate>
     <asp:TextBox runat="server" ID="txtShippedQuantity" Width="50px" Text='<%#Eval("ShippedQuantity")%>' />
   </EditItemTemplate>
</asp:TemplateField> 
```

**对于那些有同样问题的人，答案或解决方案如下。** 这是在令人失望的过程之后自己解决问题的真正快乐。@cymen 给了我一点帮助。我将一行代码更改为他的代码。

```
 $(document).ready(function () {
        $('#btnUpdTrk').on('click', ValidateShippedQuantity);
        });
        function ValidateShippedQuantity() {
        var shippedQty = document.getElementById('ContentPlaceHolder1_gvTrkInfo_txtShippedQuantity_0').value;
        var shippedQtyNumber = parseInt(shippedQty, 10);
        if (shippedQtyNumber.toString() !== shippedQty) {
            alert("Only Numeric Values Allowed for Tracking #.");
            return false;
        }
        return true;
    } 
```

**@cymen 代码的第二行是我的 aspx 页面出现问题的原因，至少在编辑后我得到了我想要的。我认为这是 getTlementById 部分。从谷歌浏览器开发者工具中找到正确的 txtbox txtShippedQuantity ID 后。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:58:44.877

您可以使用[parseInt](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)将输入字符串解析为数字，然后将数字与原始字符串进行比较：

```
var input = '5';
var number = parseInt(input, 10);
if (number.toString() === input) {
    // valid
} else {
    // invalid
} 
```

所以我会把你写成：

```
function ValidateShippedQuantity() {
    var shippedQty = jQuery("#txtShippedQuantity").val();
    var shippedQtyNumber = parseInt(shippedQty, 10);
    if (shippedQtyNumber.toString() !== shippedQty) {
        alert("Only Numeric Values Allowed");
        return false;
    }
    return true;
} 
```

这是一个功能演示（有效时附加警报）：http: [//jsfiddle.net/S4CQT/](http://jsfiddle.net/S4CQT/)

请注意，如果他们输入 1,000，这将失败，因为它将检查“1000”是否等于“1,000”。因此，如果您想支持逗号，您有几个选择，但一种快速的方法（认为 10,00 是有效的）是将 if 中的语句更改为：

```
shippedQtyNumber.toString() !== shippedQty.replace(',', '') 
```

另一个潜在的失败是如果您允许非整数（如 10.5）。在这种情况下，请查看[parseFloat](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseFloat)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:57:13.303

使用 ASP.NET 验证器

```
<asp:RegularExpressionValidator ValidationExpression="^\d+$" 
    ControlToValidate="txtShippedQuantity" runat="server" 
    Text="Must be a number" Color="Red" Display="Dynamic" /> 
```

如果它与指定的正则表达式不匹配，这将阻止回发客户端。

或者，您可以使用 RangeValidator

```
<asp:RangeValidator 
    MinimumValue='<%# Int32.MinValue %>' 
    MaximumValue='<%# Int32.MaxValue %>' 
    ControlToValidate="txtShippedQuantity" 
    runat="server" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T19:59:45.150

嗯，不应该

```
if (isNaN(shippedQty)) 
```

是

```
if (isNaN(c)) 
```

当正则表达式可以检查数字时，为什么要循环？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T20:03:08.493

[http://jsfiddle.net/4nXT3/](http://jsfiddle.net/4nXT3/)

```
function ValidateShippedQuantity() {
    var shippedQty = jQuery("#txtShippedQuantity").val();
    if (isNaN(shippedQty)) {
        alert('Only Numeric Values Allowed');
        return false;
    }
    return true;
} 
```

**更新**：阅读评论以了解为什么这很糟糕。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T20:17:06.010

您可以使用以下方法，也就是说我认为您的验证方法没有任何问题。

```
<html>
<head>
    <title></title>
    <meta charset="UTF-8" />
        <script type="text/javascript">
        function ValidateShippedQuantity() { 
    var shippedQty = jQuery("#txtShippedQuantity").val(); //alert(shippedQty);
    shippedQty = shippedQty.toString();
    for (i = 0; i < shippedQty.length; i++) {
        var c = shippedQty.charAt(i);
        if (isNaN(c))         {
            alert("Only Numeric Values Allowed");
            //x.focus();
            return false;
        }

    }
    if(shippedQty.length == 0)
        {
            alert("Field can't be blank");
        }
    return true;
    $("form").submit();
}
    </script>
</head>
<body>
    <form method="GET">
    <input type="text" id="txtShippedQuantity" /><br /><br />
    <input type="submit" value="Validate" onclick="ValidateShippedQuantity()" />
</form>
</body>
</html> 
```

我认为您因无法正确调用该函数而犯了错误。

我也在[**JSFIDDLE添加了一个演示**](http://jsfiddle.net/Prfec/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T20:23:09.063

```
function ValidateShippedQuantity() {
    var reg = new RegExp("^[0-9]+$");
    return reg.test(jQuery("#txtShippedQuantity").val());
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-21T20:31:49.190

您所需要的只是测试所有字符是否都是数字。无需遍历每个字符，只需使用正则表达式[http://jsfiddle.net/4nXT3/](http://jsfiddle.net/4nXT3/)如果您需要支持浮点数或其他输入格式，这将不那么容易，在这种情况下，您需要更复杂[的东西Cymen 建议](https://stackoverflow.com/questions/15011038/my-javascript-validation-of-number-function-does-not-work-correctly/15011645#answer-15011105)

```
function ValidateShippedQuantity() 
    var input = jQuery("#txtShippedQuantity").val();
    if ( !/^\d+$/.test(input) )  {
        alert('Only Numeric Values allowed')
        return false;
    }
    return true
} 
```

# javascript - 节点流错误

> ID：15011055
> 
> 赞同：0
> 
> 时间：2013-02-21T19:55:53.380
> 
> 标签：javascript, node.js

嗨，我目前正在玩 node，但出现了一个错误，我不知道如何解决：

```
stream.js:81
throw er; // Unhandled stream error in pipe.

Error: socket hang up
    at createHangUpError (http.js:1344:15)
    at Socket.socketOnEnd [as onend] (http.js:1432:23)
    at TCP.onread (net.js:419:26) 
```

我的脚本读取了一个文件，其中包含一个页面的 url，该页面本身包含我下载并保存的图像的 url。你能解释一下如何解决这个问题吗？对不起我的英语不好...

```
var fs = require('fs');
var request = require('request');
var lazy = require('lazy');

var lines = new lazy(fs.createReadStream('./' + dir + '/links.txt'))
    .lines
    .forEach(function (line) {

        var req = request(line, function (error, res, body) {

            if(res.statusCode == 200) {
                var urlImg = body.match(/<img id="img".+?src="(.+?)"/)[1];
                var stream = fs.createWriteStream(urlImg);
                var req2 = request(urlImg).pipe(stream);
            };
        });

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:40:03.490

可能是您同时发出了太多请求。

`request(..)`立即返回，因此您有可能执行大量 http 请求。尝试分批发送（即发送 100 个，然后等待所有人返回，再发送 100 个）等。

# c# - “此流不支持查找操作”

> ID：15011059
> 
> 赞同：2
> 
> 时间：2013-02-21T19:56:04.470
> 
> 标签：c#, asp.net, arrays, stream, byte

我从网络服务中得到一个流：

```
Stream resultStream = WebServiceEntities.GetAttachment(attachmentId); 
```

![在此处输入图像描述](../Images/5f3c7955ff4bc88201b51b64d2d466ac.png)

我需要将此流转换为字节数组，但是

尝试#1

```
byte[] resultBytes = null;
using (Stream stream = resultStream)
{
    using (MemoryStream ms = new MemoryStream())
    {
        int count = 0;
        do
        {
            byte[] buf = new byte[1024];
            count = stream.Read(buf, 0, 1024);
            ms.Write(buf, 0, count);
        } while (stream.CanRead && count > 0);
        resultBytes = ms.ToArray();
    }
} 
```

尝试#2：

```
var memoryStream = new MemoryStream();
resultStream.CopyTo(memoryStream);
byte[] resultBytes = memoryStream.ToArray(); 
```

在这两种情况下， (byte[] resultBytes) 总是返回一个空字节数组，有谁知道是什么导致了这种情况发生？Web 服务返回的 Stream 有问题吗？

# mysql - 如何从 MySQL 表中删除重复记录？

> ID：15011062
> 
> 赞同：4
> 
> 时间：2013-02-21T19:56:13.753
> 
> 标签：mysql

如果您能帮我解决这个 sql 问题，我将不胜感激。

我有一个包含两列的表。在本例中将它们命名为 UserID 和 LocationID。

我想清理这个表，所以我想保留每对唯一的 UserID 和 LocationID 的第一次出现，并删除包含相同对的其他行。换句话说，我想知道他去过的每个用户的每个位置。如果他一次又一次地访问同一个地方并被记录，我想删除那些记录。例如，这是原始表：

```
ID UserID  LocationID
1\. "user1" "location1"
2\. "user1" "location2"
3\. "user2" "location3"
4\. "user1" "location1"
5\. "user2" "location3"
6\. "user2" "location3" 
```

我想删除 4.、5\. 和 6\. 行。

是否可以在一个mysql命令中解决它？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T20:01:02.393

使用自联接删除：

```
DELETE t2.*
FROM tablename AS t1
INNER JOIN tablename AS t2
    ON t1.UserID = t2.UserID
    AND t1.LocationID = t2.LocationID
WHERE t1.ID < t2.ID 
```

`tablename`应替换为您的表的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T20:11:16.767

要添加到 Oswald 的答案，以防止将来出现重复，您可以使用 INSERT...ON DUPLICATE UPDATE：

```
INSERT INTO table (a,b,c) VALUES (1,2,3)
ON DUPLICATE KEY UPDATE c=c+1;

UPDATE table SET c=c+1 WHERE a=1; 
```

# c# - 实体框架更改值

> ID：15011063
> 
> 赞同：0
> 
> 时间：2013-02-21T19:56:13.740
> 
> 标签：c#, asp.net-mvc-4, entity-framework-5

我在数据库中有一个值

```
public int Rev { get; set; } 
```

我想在每行更新时将其更改为 Rev+1，但由于我是实体框架的新手，我不知道如何编程。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:40:35.097

您可以创建一个新的分部类来覆盖 EF 对象上的 SaveChanges() 方法。在 SaveChanges() 方法中，您可以检查每个条目`YourTableEntity`以查看它是否被修改，如果是，则增加 Rev 属性。

```
public partial class YourDBNameDBEntities : DbContext
{
    public override int SaveChanges()
    {
        foreach (var entry in this.ChangeTracker.Entries<YourTableEntity>().ToList())
        {
            if (entry.State == System.Data.EntityState.Modified)
            {
                entry.Entity.Rev++;
            }
        }
        return base.SaveChanges();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:33:25.623

您可以创建触发器，它会在您更新表格时增加您的字段。

您可以通过创建一个继承自 CreateDatabaseIfNotExists 的类或其他实现[IDatabaseInitializer](http://msdn.microsoft.com/en-us/library/gg696323%28v=vs.103%29.aspx)并覆盖方法 Seed 的类来实现。

这是一个简短的例子：

```
class CdineWithTrigger : CreateDatabaseIfNotExists<RepositoryContext>
{
   protected override void Seed(RepositoryContext context)
   {
      context.Database.ExecuteSqlCommand("YOUR SQL CORE FOR ADDING A TRIGGER");
   }
} 
```

# r - grid.draw 继续打印表格到下一页

> ID：15011066
> 
> 赞同：1
> 
> 时间：2013-02-21T19:56:20.663
> 
> 标签：r, gridextra

我有`data.frame`60 行。我无法在一个 pdf 页面上打印它。我怎样才能继续打印到下一页？

```
nr=2
nc=1
h=c(0.155,1)
Layout <- grid.layout(nrow=nr,ncol=nc,heights=unit(h, c("null")))
grid.newpage()
pushViewport(viewport(layout = Layout))

print(Empty, vp = subplot(1, 1))

grid.draw(tableGrob(head(display_retail,15),
          show.rownames=F,cols=names,show.box=T,
          separator="black", gp=gpar(fontsize=6, lwd=2),
          vp = subplot(2, 1))) 
```

# powershell - PowerShell 的 String.Replace 的返回值

> ID：15011067
> 
> 赞同：0
> 
> 时间：2013-02-21T19:56:21.293
> 
> 标签：powershell, return-value

考虑：

```
$str = 'My {token} string'

$newStr = $str.Replace('{token}', 'value')
$newStr
My value string

function strReplace ($str, $rval) { $str.Replace('{token}', $rval) }
$newStr = strReplace($str, 'value')
$newStr
My  string
value 
```

即使`string.Replace`返回单个字符串，`object[]`返回管道中也会显示一个。为什么？有没有办法获得明显的返回值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T20:05:50.440

这是因为您在`$str`函数中传递了一个数组作为参数。您需要像这样调用 PowerShell 函数（没有括号，没有逗号分隔参数）：

```
$newStr = strReplace $str 'value' 
```

# java - 我们可以一起选择和更新数据库吗？

> ID：15011069
> 
> 赞同：5
> 
> 时间：2013-02-21T19:56:27.567
> 
> 标签：java, postgresql

我有逻辑从数据库中选择一些状态为“就绪”的行，一旦我得到结果集，我需要将状态更新为“处理”，因此没有其他线程可以访问这些行。然后我必须对结果集中的记录执行一些逻辑，并且处理完成我需要再次将记录状态更新为已完成。

问题：当我执行 select 语句时，有没有一种方法 - 那时只有我可以同时更改结果集中返回的行的状态。

有人可以建议是否有在java中实现它的好方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:17:55.807

您可以`SELECT ... FOR UPDATE NOWAIT`在事务中更新要处理的行，然后再更新它们。`SELECT ... FOR SHARE NOWAIT`如果有人正在更新选定的行或有人已经`SELECT ... FOR SHARE NOWAIT`对其进行了更新，则会失败并出现错误。

详情[`here`](http://www.postgresql.org/docs/current/static/sql-select.html#SQL-FOR-UPDATE-SHARE)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T20:48:15.127

回答你的主要问题：是的，你可以做到！

1.  正如其他人所提到的，[`SELECT … FOR UPDATE`](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-FOR-UPDATE-SHARE)这是您的选择之一。

2.  另一个是增加序列化级别。请看一下[这个相关的答案](https://stackoverflow.com/questions/14914195/can-multiple-select-for-updates-in-a-single-transaction-cause-a-race-condition/14914456#14914456)并点击那里的链接。

    值得一提的是，达到[`REPEATABLE READ`](http://www.postgresql.org/docs/current/interactive/transaction-iso.html#XACT-REPEATABLE-READ)甚至是`SERIALIZABLE`事务都需要在应用程序端进行更改，因为这些隔离级别假定一定数量的事务将因序列化错误而回滚，这是正常且预期的行为。

    此外，更严格的隔离级别（以及更多`SELECT … FOR UPDATE`查询）将导致性能下降，并可能导致竞争条件，具体取决于设计。

3.  请查看[depesz.com 上的这篇文章](http://www.depesz.com/2012/06/10/why-is-upsert-so-complicated/)，它很好地概述了相关领域可能存在的缺陷。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T20:02:29.317

您可能正在寻找允许您锁定表/行（为自己）的“锁”。可以在 PostgreSQL 网站上找到一个很好的示例：

[http://www.postgresql.org/docs/current/static/sql-lock.html](http://www.postgresql.org/docs/current/static/sql-lock.html)

使用锁将确保只有您可以访问表/行，而其他人在您完成之前无法访问。

# ios - 比传递 NSDictionaries 作为参数更好的模式？

> ID：15011074
> 
> 赞同：6
> 
> 时间：2013-02-21T19:56:44.400
> 
> 标签：ios, objective-c, macos, model-view-controller, design-patterns

随着我们的代码库的成熟，我开始不喜欢传递字典的模式来打包消息传递的信息，或者更糟糕的是，函数参数。它需要发送和接收函数都具有未记录的字符串文字 API。

```
..in some function..
NSDictionary *info = [NSDictionary dictionaryWithObjectsAndKeys:
                         thisObject, @"thisKey",
                         thatObject, @"thatKey",
                         nil];

[[NSNotificationCenter defaultCenter] postNotificationName:@"MY_NOTIFICATION" object:nil userInfo:info];
.... 
```

然后 in`someClass`的听众

```
- (void)someClassListener:(NSNotification *)notification {
    NSDictionary *info = [notification userInfo];

    ThisObject *ob1 = [info objectForKey:@"thisKey"];
    ThatObject *ob2 = [info objectForKey:@"thatKey"];
} 
```

您必须记住，`thisKey`并且`thatKey`是类型的键，`ThisObject`并且`ThatObject`对于该通知，确保您可以在某处为这些键创建一些常量，但这并不能真正解决问题。

假设你有一个需要 15 个参数的函数，你不会创建一个有 15 个参数的函数，只传递一个字典会容易得多（虽然可读性较差），但现在你遇到了与上面相同的问题.

我尝试在这些类的头文件中创建存根的“消息类”（即一个头文件中的两个接口），而消息类只是您定义并发送到创建更强大合同的方法的对象列表，但这感觉错误的。

如果我可以`typeDef`在标头中执行诸如参数对象之类的操作，但它不支持`NSObject`仅诸如`int`or之类的东西，那就太好了`float`。

**本质上，我试图在消息发送者和消息接收者之间创建一个更强大的合同，无论是功能还是通知。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T20:06:33.500

您可以为键定义常量。作为示例，请参阅文档以`UIKeyboardDidShowNotification`获取示例。有一个指向所有键的链接，可用于获取有关通知的信息。

更好的方法是将数据封装到类而不是字典中。创建一个带有属性的简单类。这将比字典更能自我记录。您可以在 .h 文件中查看属性名称和属性类型。

如果您发现您有需要 15 个参数的方法，则需要退后一步并将这些参数封装到适当的类中。也许该方法正确地简化为几个参数和一个类或类似的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T20:07:24.597

你想要的是一个**参数对象**，一个封装了一堆字段以便与其他类进行通信的小对象。在内部，参数对象可能包含一个字典，或者只是一组指定字段。

为参数对象提供一个简单的 API，让两个类都可以设置和获取您使用的特定字段 -- setThisKey: 和 getThisKey。从本质上讲，它记录了方法和类之间的 API。

接下来，寻找机会将功能移动到参数对象中。例如，如果你有这样的事情：

```
 param.fieldSize=[self.data size];
 param.fieldColor=[self.data color];
 param.flavor=[self.data lookUpTheRecipe] 
```

你可以用

```
 [param withField: self.data]; 
```

通过工作，您通常可以使参数对象做很多有用的工作；这可以分解长方法并帮助大类摆脱多余的责任。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T22:23:12.113

起初，有 15 个参数并不好，在这种情况下，您应该考虑不进行此类回调或尝试减少数量。

* * *

那么使用通知的发送者呢？例如，您的对象`Task`完成并发送通知。接收方使用发送方访问`sender.result`, `sender.error`, `sender.anything`.

* * *

如果您希望这些对象（发送者/接收者）之间的联系更紧密，也许您应该使用其他通信方式而不是`NSNotifications`.

一些替代方案：

*   委托（或其他类型的直接方法调用）
*   块
*   目标+行动

通过将它们存储在数组中，它们都可以用作多个回调，并且它们不`NSDictionaries`用于值传递。

# batch-file - 用“上一个工作日”重命名文件

> ID：15011081
> 
> 赞同：0
> 
> 时间：2013-02-21T19:57:17.230
> 
> 标签：batch-file

批处理文件是否可以通过将上一个工作日的日期附加到文件名的末尾来重命名目录中的所有文件？

例如，如果我在 2012 年 2 月 25 日星期一运行它，它会将“_022213”添加到目录中文件名的末尾。

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:37:06.630

干得好。

```
@echo off
setlocal enabledelayedexpansion
echo wd = Weekday^(Date^(^), vbSunday^)>yesterday.vbs
echo if wd ^< 3 then dif = -1 - wd else dif = -1 >>yesterday.vbs
echo d = dateadd^("d", dif, Date^(^)^)>>yesterday.vbs
echo wscript.echo DatePart^("yyyy",d^) ^& " " ^& DatePart^("m", d^) ^& " " ^& DatePart^("d", d^) >>yesterday.vbs
for /f "tokens=1-3" %%I in ('cscript /nologo yesterday.vbs') do (
    set year=%%I
    if %%J leq 9 (set month=0%%J) else set month=%%J
    if %%K leq 9 (set day=0%%K) else set day=%%K
)
del yesterday.vbs
set yesterday=%month%%day%%year:~-2%
for %%I in (*) do (
    set base=%%~nI
    echo !base:~-7!| findstr "^_[0-9]*$" >NUL && set base=!base:~0,-7!
    ren "%%I" "!base!_!yesterday!%%~xI"
) 
```

Windows 批处理脚本中没有可以让您对日期执行数学运算的本机函数。VBscript 虽然有一些漂亮的日期数学函数。DateAdd 将允许您按年、季度、月或其他几个间隔进行加减。“w”指定工作日。 [更多信息](http://ss64.com/vb/dateadd.html)。 *更新：显然“w”并不意味着它应该意味着什么。脚本已更新以手动执行数学运算。*

您可以通过将 vbscript 回显到 .vbs 文件来借用 vbscript，然后`cscript /nologo vbsfile`使用`for`循环捕获 的输出。看看它是如何工作的？

然后拼凑起来`[basename]_[yesterday with slashes stripped][extension]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:45:59.143

对于仅批处理解决方案，请参阅 [https://gist.github.com/DavidRuhmann/4666270](https://gist.github.com/DavidRuhmann/4666270)

以下是如何使用链接中的批处理脚本方法。

```
@echo off
if /i "%Date:~0,3%"=="Sun" ( call :DaysAgo 2 ) else (
    if /i "%Date:~0,3%"=="Mon" ( call :DaysAgo 3 ) else ( call :DaysAgo 1 )
)
echo %Year% %Month% %Day% 
```

# javascript - 根据文本更改 textarea 字体颜色。在页面加载时和内容更改后

> ID：15011084
> 
> 赞同：0
> 
> 时间：2013-02-21T19:57:25.217
> 
> 标签：javascript, jquery

这是我所拥有的
`<textarea onblur="this.value='Enter a new task...')?'#A7A7A7':'initial'" rows="4" cols="50" id="position'.$i.'" class="taskbox">'.$task.'</textarea>`

那对我不起作用。反正是错的。我正在使用 jquery。基本上，如果该字段为空白或等于“输入新任务...”，那么我希望字体颜色为#A7A7A7，否则将其保留为默认颜色。

这需要在初始页面加载以及 onblur 时发生。当它在焦点上时，颜色应该始终是初始的。

编辑这是从一些 PHP 中删除的，所以你会注意到那里的 PHP 代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:41:36.443

我会做这样的事情：

[http://jsfiddle.net/eVRQD/](http://jsfiddle.net/eVRQD/)

HTML

```
<textarea id="mytxt" rows="4" cols="50">Enter a new task...</textarea> 
```

JS

```
determineColor();

$('#mytxt').blur(function() {
  determineColor();
});

function determineColor(){
    var mytxtval = $('#mytxt').val();
    if( mytxtval === 'Enter a new task...' || mytxtval === '' ){
        $('#mytxt').css('color', 'red');
    } else {
         $('#mytxt').css('color', 'green');
    }
} 
```

# .net-micro-framework - 如何在 USBizi 上使用 RLP

> ID：15011088
> 
> 赞同：0
> 
> 时间：2013-02-21T19:57:43.267
> 
> 标签：.net-micro-framework

我想`Runtime Loadable Procedures`在 Fez Panda II 板的 USBizi 芯片上使用 .Net 微框架。RLP 用于在运行时在托管代码中执行 C 或汇编代码（例如来自 en elf 文件）。对于 CPU 密集型或时间关键型操作很有用。

我对 PIC32 和 Atmega 芯片有一些经验，所以我对芯片的本机代码有一些经验。托管代码很棒，我相信将它与本机代码混合是一项强大的功能（以充分利用芯片本身的潜力，如 DMA 或 ISR）。所以我肯定想使用RLP。

现在我找到了这些资源：[http ://www.ghielectronics.com/downloads/NETMF/Library%20Documentation%20v4.1/html/f608e398-6573-8adc-5d59-b904dfa3fcee.htm](http://www.ghielectronics.com/downloads/NETMF/Library%20Documentation%20v4.1/html/f608e398-6573-8adc-5d59-b904dfa3fcee.htm)

示例仅适用于 GHI 的 EMX 平台（GHI 制造的另一种微控制器/板/平台），Fez Panda II 是 GHI 的产品。所以这并不像下面给出的例子那么简单，因为 Fez Panda II 是在 USBizi 上运行的，而不是在 EMX 上。Fez Panda II 的用户手册说可以使用 RLP。

我知道我必须根据 RLP.h 文件中的平台设置 RLP 的地址和大小。我为 USBizi 平台找到了这些设置：`RLP Address: 0x40000440\. RLP Size: 0x000027FC.`到目前为止一切顺利。

现在我遇到以下问题： `USBizi: by default, RLP is not enabled and locked.`文档说，再多几行：`To enable RLP call RLP.Enable()`. 一个下来，一个去。

现在如何解锁 RLP？

USBizi 的示例代码给出，见下文

```
public static void Main()
{
    // Program start up on USBizi

    // Unlock RLP if needed

    // Load ELF file first because it might be large
    byte[] elf_file = Resources.GetBytes(Resources.BinaryResources.RLP_test);
    RLP.LoadELF(elf_file);
    // now load all RLP.Procedure(s)
    // ......

    // dispose of the elf file to reclaim memory
    elf_file = null;
    Debug.GC(true);

    // start the application
    // ... 
```

现在方法在`// Unlock RLP if needed`哪里？那就是我卡住的地方。

在托管代码中，我可以在上升沿 @ ~3.6kHz 使用中断。对于按下按钮的用户，< 1 ms 的响应非常好。但是对于计算频率@~50kHz 来说太慢了。好的，我可以使用（7 位？）数字分频器（触发器 IC），但这会降低分辨率。

关于如何在 USBizi 上实现 RLP 的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:53:24.870

首先您必须下载示例代码：[http ://www.ghielectronics.com/downloads/NETMF/Library%20Documentation%20v4.1/RLP_User.zip](http://www.ghielectronics.com/downloads/NETMF/Library%20Documentation%20v4.1/RLP_User.zip)

上面的包确实包含 USBizi 的示例。有 RLP_user.zip 包没有。因此，请确保您已下载正确的软件包。

然后在您的代码中，您必须调用[RLP.Enable()](http://www.ghielectronics.com/downloads/NETMF/Library%20Documentation%20v4.1/html/9d07b718-abf8-8819-38ea-a68941a534ae.htm) 设备将重新启动。那么你不应该再次调用它，除非你进行固件升级/修复。不，如果您还没有 GHI 帐户，接下来您将不得不在 GHI 上创建一个帐户：[http](http://www.ghielectronics.com/) ://www.ghielectronics.com/ 然后转到[您的帐户](http://www.ghielectronics.com/account)并单击[此选项卡](http://www.ghielectronics.com/account/rlp)，同意您拥有的 RLP.Unlock() 方法在您的代码中实施是通过电子邮件发送给您的。

您可以实现以下代码（请注意，您的电子邮件地址的解锁参数不同）：

```
try
{
            //If unlocking succeeds, RLP is enable.d
    RLP.Unlock("YOUR@EMILADDRESS.COMSOMEMOREBOGUS", new byte[] { 0xB7, 0xE0, some more bytes });
}
catch (Exception ex)
{
            //If unlocking fails, it means RLP is not enabled yet, do so now, assuming your unlock credentials are correct.
    RLP.Enable();
} 
```

现在继续使用您从下载包中获得的 USBizi 平台的示例解决方案。

我一直在解锁 RLP，希望有人觉得这个问答很有用。

# php - 通过客户粉丝页面上的 Facebook 选项卡点赞的数量

> ID：15011089
> 
> 赞同：0
> 
> 时间：2013-02-21T19:57:46.497
> 
> 标签：php, facebook, facebook-like, fan-page

我想知道是否有任何方法可以准确地获得由于在客户的粉丝页面上安装（编码）了类似门的 Facebook 选项卡而获得的新喜欢的数量。

作为分析的一部分，我想显示以下是用户通过点击 facebook.com 上粉丝页面顶部的“Like”按钮访问此选项卡时产生的喜欢的数量。

在我的选项卡上拥有类似 iframe 的小部件不是一种选择......我知道这可以被跟踪。他们需要点击粉丝页面本身的“赞”按钮。我用 PHP 编码。

**更新**

我不想在我的选项卡上使用会话。这是一个简单的号召性用语标签，Safari 存在 3rd 方 cookie 的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T09:44:00.027

您可以在页面中使用 facebook javascript SDK 来检测用户在浏览粉丝页面时是否喜欢该页面。然后您可以使用 AJAX 存储到文件/数据库中

```
<div id="fb-root"></div>
<script src="http://connect.facebook.net/en_US/all.js#xfbml=1"></script>
<script>
    window.fbAsyncInit = function () {
        FB.init({
            appId: 'INSERT APP ID',
            status: true, // check login status
            cookie: true, // enable cookies to allow the server to access the session
            oauth: true // enable OAuth 2.0
        });

        //Additional
        FB.Event.subscribe('edge.create', function (response) {
           alert('Put AJAX Code Here');
        });
    };
    // Load the SDK Asynchronously
    (function (d) {
        var js, id = 'facebook-jssdk',
            ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) {
            return;
        }
        js = d.createElement('script');
        js.id = id;
        js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        ref.parentNode.insertBefore(js, ref);
    }(document));
</script> 
```

希望这会有所帮助... [http://www.skruffymedia.com/blog/creating-a-facebook-like-gate-competition/](http://www.skruffymedia.com/blog/creating-a-facebook-like-gate-competition/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:06:06.180

通过`signed_request`您可以访问访问页面选项卡的用户是否喜欢该页面。

并且由于喜欢页面会重新加载页面选项卡，因此您应该能够轻松地跟踪会话*中从不喜欢*页面到*喜欢页面*的转换，然后采取适当的措施在任何您喜欢的地方记录此“事件”。

# javascript - 如何在Jquery中调用属性值的onChange函数

> ID：15011090
> 
> 赞同：2
> 
> 时间：2013-02-21T19:57:51.697
> 
> 标签：javascript, jquery

我正在尝试调用`onChange`属性值的函数。我正在尝试的是，当用户单击以下 div 之一时

```
 <div id="selected" class="vblock">
 <div class="vblock">
 <div class="vblock">
 <div class="vblock">
 <div class="vblock"> 
```

标签的`src`属性值将被更改。`embed`

```
<embed id="vplayer" width="100%" height="100%" name="plugin" src="resources/videos/xyz21.mp4" type="video/mp4"> 
```

我需要在值更改期间调用一个函数`src`。

或者

`<div class="vblock">`我需要在修改to期间调用该函数`<div id="selected" class="vblock">`

我尝试的是：

```
$('embed[src=#]').change(function(e){
 // code 
```

请任何人帮我做这件事......谢谢......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T20:04:13.823

我对这个问题的想法：

1）。你最好关闭你`div`的s。

2）。而不是`<div id="selected" class="vblock">`你应该使用`<div class="vblock selected">`这是什么类。

3）。您不能监听属性更改（当然可以，但无论如何不推荐使用突变事件..），但您可以手动触发事件处理程序：

```
$('.vblock').on('click', function() {
    // do something, set new src
    $('#vplayer').trigger('src:changed');
});

$('#vplayer').on('src:changed', function () {
    // src changed, do something
}); 
```

# html - 使用具有 Css Pie 元素的子级滚动父级 div

> ID：15011093
> 
> 赞同：1
> 
> 时间：2013-02-21T19:57:57.297
> 
> 标签：html, css, css3pie

我有一个问题，即围绕表格的父 div 可以水平滚动。但是该表使用 CSS 饼图渐变作为其中的标题和按钮。问题是当我滚动时，按钮样式也会随着滚动而移动，并且标题也是如此。有什么办法可以解决这个问题

```
<div id="ListTab" class="data" style="padding-left: 5px; overflow: auto;overflow-y:hidden;">
    <input type="hidden" name="colLength"  id="colLength"value="${fn:length(listViewColumns)+fn:length(listViewFedbackColumns)+1}" />

     <table id="Table1" class="cw4" border="1" width="100%" style="z-index:1">
     <thead id="head1">                 <tr>

      <th></th>
      </tr> 
```

div 有水平滚动条，但问题是当我滚动表格上的标题标签时，应用了 CSS pie 渐变，结果它在滚动时移出表格

# python-2.7 - Windmill 好像安装成功了，但是没有启动

> ID：15011104
> 
> 赞同：0
> 
> 时间：2013-02-21T19:58:44.913
> 
> 标签：python-2.7, osx-mountain-lion, pip, windmill

我用pip在mac（山狮）上安装了windmill，好像成功了：

```
MacBook-Pro:~ kyskmt$ pip-2.7 install windmill
Requirement already satisfied (use --upgrade to upgrade): windmill in /opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages
Cleaning up... 
```

但是风车没有启动：

```
MacBook-Pro:site-packages kyskmt$ windmill firefox
-bash: windmill: command not found 
```

我的问题：我应该按照此链接上的说明进行操作吗？ [https://github.com/windmill/windmill/wiki/installing](https://github.com/windmill/windmill/wiki/installing) 我真的不想遵循这个，因为它会创建另一个 Python 安装文件夹，即“/usr/local/bin/python”。我已经使用 MacPorts 安装了 Python2.7 和 pip 以及许多其他库（因此，位置是：“/opt/local/bin/python”）。

我应该安装另一个 python 和 easy_install 吗？或任何其他启动风车的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T09:23:21.733

与 OS X 10.8 上的默认 Python 一起工作得很好，甚至可能与旧版本一起工作。

遵循以用户而不是 root 身份安装 python 模块的良好做法，我安装了 windmill`pip install --user windmill`

显然，您需要确保自己`~/Library/Python/2.7/bin/`在 PATH 中，但这超出了问题的范围。

如果您以 root 身份安装它，它将位于不同的目录中，找到它并将其添加到 bash_profile 中的 PATH 中。

# c# - 通过 IPAddress 进行 FTP 连接

> ID：15011107
> 
> 赞同：2
> 
> 时间：2013-02-21T19:58:46.530
> 
> 标签：c#, ftpwebrequest

我正在尝试打开以 IPAddress 而不是 url 作为参数的 FTP 连接。

这是我的代码：

我使用的地址是有效的，在 IExplorer 中我可以访问 ftp 服务器，而在我的程序中，我输入了错误无效 URI 的异常。

```
 public bool TestConnection(IResult result)
    {
        FtpWebRequest request = (FtpWebRequest)WebRequest.Create("ftp://1.1.1.1");
        if (request == null)
        {
            result.SetError(Translate.InvalidUrl);
            return false;
        }
        request.Credentials = new NetworkCredential(username, password);
        try
        {
            WebResponse response = request.GetResponse();
        }
        catch (Exception e)
        {
            return false;
        }
        return true;
    } 
```

我怎么解决这个问题？有没有办法用 IPAddress 而不是用 Url 打开 ftp 连接？

先感谢您

# php - PHP foreach循环插入数据库

> ID：15011108
> 
> 赞同：0
> 
> 时间：2013-02-21T19:58:47.103
> 
> 标签：php, mysql, forms, foreach, checkbox

我正在尝试使用 php 将复选框的选定值插入到 mysql 数据库中。我只是不明白为什么它不起作用，因为它可以很好地回显所有值，但它只会将第一个选择的值插入数据库。

HTML：

```
<b>Injury type:</b>
Bruise <input type='checkbox' name='InjuryType[]' value='1'><br>
Cut <input type='checkbox' name='InjuryType[]' value='2'><br>
Graze <input type='checkbox' name='InjuryType[]' value='3'><br>
Break <input type='checkbox' name='InjuryType[]' value='4'><br>
Bump <input type='checkbox' name='InjuryType[]' value='5'><br> 
```

PHP：

```
foreach($_POST['InjuryType'] as $value) {
$insert = mysql_query("INSERT INTO AccidentInjuryLink(InjuryID) VALUES ('$value')");
echo $value; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:04:58.200

也许该列有一个主索引，这意味着所有数字都必须是唯一的，因此只插入第一个值。

# facebook - 如何将我的 url 之类的东西传递给 facebook 页面？

> ID：15011114
> 
> 赞同：-2
> 
> 时间：2013-02-21T19:59:01.257
> 
> 标签：facebook, facebook-like

为 data-href = "myurl.com" 放置 Like 按钮代码已经有 3,000 个赞，今天我们在 facebook www.facebook.com / MyURL 上有一个页面，想知道是否可以将这 3,000 个赞迁移到 myurl.com facebook。 com / MyURL 不必从头开始！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:06:27.117

不，你不能那样做。这就像我喜欢一个页面，然后你将这些喜欢移动到我没有手动喜欢的其他页面。

最好的办法是发布一条消息并说这是​​新页面并请人们去喜欢它。

对不起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:32:28.070

如果这是可能的，那就是......

好的，所以这实际上只是基于 Facebook 'SQL' 的黑暗中的一枪，我仍在学习 facebook 查询语言，我不知道这是否会违反我不知道的法律或参数，但如果你尝试类似 FQL 会怎样GET 但称为转置对象（链接和页面）与用户 ID。示例：`SELECT ... FROM like WHERE object_id = A`SELECT ... FROM like WHERE post_id = B SELECT ... FROM like WHERE user_id = C`

> SELECT user_id FROM like WHERE object_id="XXXXXXXXXXXXXXXX"
> 
> SELECT user_id, object_id, post_id FROM like WHERE user_id=mine() -> 重定向链接或将您的网址放在页面上并遵守 TOS（我的个人建议）

[单击此处获取 FB DEV 博客参考](https://developers.facebook.com/docs/reference/fql/like/)

希望有帮助

我很确定 TOS 之外还有其他内容，但我可能错了。

# sql - 如何在 Oracle SQL 中编写一条 SQL 语句，其中两个 AND 条件应用于同一表中的同一列？

> ID：15011119
> 
> 赞同：0
> 
> 时间：2013-02-21T19:59:22.840
> 
> 标签：sql, oracle

我需要帮助来编写一个 Oracle SQL 查询，详细信息如下：

我有一个表`offender_gang_affiliations`，其中包含两个不同的列，名为`offender_id`和`dept_dvsn_code`。

我想要一个所有罪犯 id 的列表，其中表中的行具有`dept_dvsn_code`“A”和`dept_dvsn_code`“J”。我尝试过应用各种条件`AND`，`OR`但我无法想出任何有效的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T20:04:22.290

听起来你想要类似的东西

```
SELECT offender_id
  FROM offender_gang_affiliations
 WHERE dept_dvsn_code IN ('A','J')
 GROUP BY offender_id
HAVING COUNT(DISTINCT dept_dvsn_code) = 2 
```

制定查询的另一种方法是

```
SELECT offender_id
  FROM offender_gang_affiliations
 WHERE dept_dvsn_code = 'A'
INTERSECT
SELECT offender_id
  FROM offender_gang_affiliations
 WHERE dept_dvsn_code = 'J' 
```

一般来说，我希望第一个选项更有效。根据开发人员的不同，第二个选项最终可能会更清晰。

# javascript - Jquery Slide Effect At The Same Time as the div is next

> ID：15011124
> 
> 赞同：0
> 
> 时间：2013-02-21T19:59:52.237
> 
> 标签：javascript, jquery, css, jquery-ui, animation

我有这个例子：

[例子](http://jsfiddle.net/tinchoel10/RNAuF/2/)

当您单击按钮时，红色文本会向左滑出，但问题是动画完成后黄色文本会跳到新位置。红色文字滑出时，黄色文字如何实时“动画化”到新位置？

HTML：

```
<div id="1" style="float:left; color:blue">
    <a>THIS IS NUMBER 1</a>
</div>

<div id="2" style="float:left; color:red">
    <a>THIS IS NUMBER 2</a>
</div>

<div id="3" style="float:left; color:yellow">
    <a>THIS IS NUMBER 3</a>
</div>

<br/>
<button id="btn">GO!</button> 
```

JS：

```
$("#btn").click(function()
{
   $("#2").hide("slide", { direction: "left" }, 700);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:11:10.710

黄色文本是跳跃的，因为 jQuery 正在移除它上面的元素，并且页面也相应地进行了调整。你可以尝试这样的事情来使它更流畅：

```
$("#btn").click(function()
{
   $("#2").hide("slide", { direction: "left" }, 700);
   $("#3").slideUp('slow', function() {
    // add anything else you want to do here for when this animation completes.
    // if not, just use .slideUp('slow');
  });
}); 
```

这是未经测试的，在我的脑海中，但它应该让你接近，

或者尝试使用 .animate() 方法：

```
$("#btn").click(function()
{
    $('#2').animate({"width": "toggle", "height":"toggle", "opacity": "toggle" }, "slow");
}); 
```

示例：http: [//jsfiddle.net/YG5rh/2/](http://jsfiddle.net/YG5rh/2/)

# c++ - 当包含在头文件中时，结构将不起作用

> ID：15011127
> 
> 赞同：3
> 
> 时间：2013-02-21T20:00:02.640
> 
> 标签：c++, visual-c++, struct, directx, header-files

所以我有三个有关文件：

```
MyGame.cpp        //Where all my codeing takes place
MyDirectX.h       //Where I declare prototypes
MyDirectX.cpp     //where I define functions/structs 
```

我有一个不错的小结构，看起来像这样：

```
struct Sprite
{
LPDIRECT3DTEXTURE9 texture;

int frame;
int starttime;

    Sprite()
    {
        texture = NULL;
        texture = LoadTexture("explosion_30_128.tga");
        frame = 0;
        starttime = 0;
    }
}; 
```

所以这里的问题是：

当我在 MyGame.cpp 中声明该结构时，它工作得很好。但是，我需要在我的头文件中使用它，因为其他功能依赖于它（并且为了整洁）。我在 MyDirectX.h 中这样声明它：

```
struct Sprite; 
```

并在 MyDirectX.cpp 中定义：

```
struct Sprite
{...code...}; 
```

我可以在 MyGame.cpp 中创建一个全局 Sprite

```
Sprite explosion; 
```

所有检查。但是当我尝试explosion.frame = 或explosion->frame =（或任何其他成员）时，我收到错误“表达式必须是指向完整对象类型的指针”。

如果我在 MyDirectX.h 而不是 MyDirectX.cpp 中定义整个结构，我会得到一个未解析的外部符号。如果我在两者中都进行了定义，则会出现重新定义错误。

我已经做了几个小时的测试和研究，但我无法弄清楚这一点。对我来说，为什么该结构可以在 MyGame.cpp 中工作但在我的头文件中使用它时不起作用，这对我来说毫无意义。我应该注意，我已经在这些文件中声明并定义了许多函数，它们都工作得很好。

任何帮助将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T20:01:59.843

`Sprite sprite;`是**定义**，而不是声明。它尝试创建该对象。要声明类，只需添加`struct Sprite;`.

要拥有全局，您需要使用`extern Sprite sprite`，否则，在多个翻译单元中包含该标题时，您将收到多重定义错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T20:02:18.537

您需要将完整的定义放在`struct`标头中，以便可以通过完整类型的任何代码访问它：

```
struct Sprite
{
  LPDIRECT3DTEXTURE9 texture;

  int frame;
  int starttime;

  Sprite();

}; 
```

然后，您可以将实现代码放在单独的`.cpp`文件中。对于不需要完整类型的代码，可以继续使用前向声明

```
struct Sprite; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T23:26:37.520

错误“表达式必须是指向完整对象类型的指针。” 意味着您只转发声明了一个对象，但没有提供定义，因此“不完整”。

前向声明，即

```
struct Sprite; 
```

让您：
1) 将变量存储/传递为 Sprite*
2) 将变量存储/传递为 Sprite&

您不能做任何其他事情，即调用函数或访问 Sprite 的成员。

要完成这些事情，您需要定义，即

```
struct Sprite
{
  LPDIRECT3DTEXTURE9 texture;

  int frame;
  int starttime;

  Sprite(); 
```

};

因此，如果另一个 .cpp 文件正在使用 Sprite，则必须将定义放在一个标头中，并使用 sprite 将该标头包含在 .cpp 中。

# asterisk - 比较 GotoIf() 应用程序中的两个值

> ID：15011129
> 
> 赞同：0
> 
> 时间：2013-02-21T20:00:11.083
> 
> 标签：asterisk

以下陈述有什么问题。

```
 exten => _xxx,n,GotoIf($[${countApp} > 1]?yes,1:not,1) 
```

给出的错误是。

[2 月 22 日 00:51:25] 警告 [1561]：ast_expr2.fl:468 ast_yyerror：ast_yyerror()：语法错误：语法错误，意外“>”，期待 $end；输入：> 1 ^

我该如何解决这个问题，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:47:21.373

这通常发生在变量（`${countApp}`在这种情况下）为空白/未设置时

# mysql - Concat column value and variable with specific length in MySQL

> ID：15011130
> 
> 赞同：0
> 
> 时间：2013-02-21T20:00:15.733
> 
> 标签：mysql

I have a table products and another table categories.
Here is some sample data
Products

```
id    |  product_name      |  category_id
1     |  Leath Machine     |  1
2     |  Drilling Machine  |  1
3     |  Boring Machine    |  1 
```

And here is category table

```
id    |   name           | symbol
1     |   SMT Equipment  | SMT 
```

I want to do a select which will display me results like this

```
id    |  product_name      |  category_id  |  code
1     |  Leath Machine     |  1            |  SMT00001
2     |  Drilling Machine  |  1            |  SMT00002
3     |  Boring Machine    |  1            |  SMT00003 
```

How cai do that.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T20:11:31.717

```
SELECT
  `products`.`id`,
  `product_name`,
  `category_id`,
  CONCAT(symbol, LPAD(products.id,5,'0')) AS code
FROM products
  INNER JOIN categories
    ON products.category_id = categories.id; 
```

Here is the SQLFiddle results.

[SQL Fiddle Demo](http://www.sqlfiddle.com/#!2/d3b05/5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T20:07:28.797

try this

```
 select p.id,p.product_name,p.category_id,concat(symbol ,'0000',p.id) code from Products p
   inner join category c
   on p.category_id = c.id 
```

[**DEMO SQLFIDDLE HERE**](http://www.sqlfiddle.com/#!2/5ab2b/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T20:09:53.207

`SELECT p.*, CONCAT(c.symbol, LPAD(p.id, 5, '0')) FROM products p INNER JOIN category c ON p.category_id=c.id;`

# r - 使用两个因子重新排列 R 中的矩阵

> ID：15011131
> 
> 赞同：3
> 
> 时间：2013-02-21T20:00:18.493
> 
> 标签：r, matrix, reshape, reshape2

这是问题所在。有一个 N 行 C 列的矩阵，以及两个因子：`ids`和`group`，长度均为 N。例如：

```
m <- matrix( 1:25, nrow= 5, byrow= T )
id <- factor( c( "A", "A", "A", "B", "B" ) )
group <- factor( c( "a", "b", "c", "a", "c" ) ) 
```

并非所有因素组合都存在，但每个因素组合仅存在一次。任务是转换矩阵`m`，使其具有`length( levels( id ) )`行和`length( levels( group ) ) * C`列。换句话说，创建一个矩阵，其中每个变量对应于原始列和所有可能的因子水平之间的组合`group`。缺失值（对于不存在的 id 和 group 组合）由 NA 替换。这是上述示例的所需输出：

```
 a.1 a.2 a.3 a.4 a.5 b.1 b.2 b.3 b.4 b.5 c.1 c.2 c.3 c.4 c.5
A   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15
B  16  17  18  19  20  NA  NA  NA  NA  NA  21  22  23  24  25 
```

我编写了自己的函数，但它非常无效，而且我确信它复制了一些极其简单的功能。

```
matrixReshuffle <- function( m, ids.row, factor.group ) {

  nr <- nrow( m )
  nc <- ncol( m )
  if( is.null( colnames( m ) ) ) colnames( m ) <- 1:nc

  ret <- NULL
  for( id in levels( ids.row ) ) {

    r <- c()

    for( fg in levels( factor.group ) ) {

      d <- m[ ids.row == id & factor.group == fg,, drop= F ]
      if( nrow( d ) > 1 )
        stop( sprintf( "Too many matches for ids.row= %s and factor.group= %s", id, fg ) )
      else if( nrow( d ) < 1 ) {
        r <- c( r, rep( NA, nc ) )
      } else {
        r <- c( r, d[1,] )
      }

    }

    ret <- rbind( ret, r )

  }

  colnames( ret ) <- paste( rep( levels( factor.group ), each= nc ), rep( colnames( m ), length( levels( factor.group ) ) ), sep= "." )
  rownames( ret ) <- levels( ids.row )

  return( ret )
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:10:24.717

遵循@Aaron 的建议：

使用`melt`和`acast`来自`reshape2`：

```
require(reshape2)
df <- as.data.frame(m)
names(df) <- seq_len(ncol(df))
df.m <- melt(df)
df.m$id <- rep(id, nrow(df.m)/length(id))
df.m$group <- rep(group, nrow(df.m)/length(group))

o <- acast(df.m, id ~ group+variable, value.var="value")
colnames(o) <- sub("_", ".", colnames(o))

#   a.1 a.2 a.3 a.4 a.5 b.1 b.2 b.3 b.4 b.5 c.1 c.2 c.3 c.4 c.5
# A   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15
# B  16  17  18  19  20  NA  NA  NA  NA  NA  21  22  23  24  25 
```

您可以将其转换回矩阵。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T21:17:36.550

对于那里的所有矩阵索引粉丝......

```
C <- ncol(m)
to.row <- matrix(rep(as.numeric(id), C), ncol=C)
to.col <- sweep(col(m),1,(as.numeric(group)-1)*C,`+`)
out <- array(dim=c(nlevels(id), nlevels(group)*C),
             dimnames=list(levels(id), as.vector(t(outer(levels(group), 1:C, paste, sep=".")))))
out[cbind(as.vector(to.row), as.vector(to.col))] <- m
out
#   a.1 a.2 a.3 a.4 a.5 b.1 b.2 b.3 b.4 b.5 c.1 c.2 c.3 c.4 c.5
# A   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15
# B  16  17  18  19  20  NA  NA  NA  NA  NA  21  22  23  24  25 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T08:57:05.557

这是@Arun 回复的一个版本，稍作修改以便（对我而言）更容易理解。另外，我总是对复制群体因素持谨慎态度。我发现在实践中，这是系统错误的潜在来源之一。最好直接接管 id 和 group 并让 melt() 完成复制因子的工作。但这些都只是小事。

```
# add the aggregating variables to the matrix, converted to data frame
df <- data.frame( m )
df$id <- id
df$group <- group

# reshape the data frame
require( reshape2 )
df.m <- melt( df, c( "id", "group" ) )
df <- dcast( df.m, id ~ group + variable )

# df has the required shape, but convert it back to a matrix
rownames( df ) <- df$id
df$id <- NULL
m.reshaped <- as.matrix( df ) 
```

# ios - FBRequestConnection 不工作

> ID：15011138
> 
> 赞同：0
> 
> 时间：2013-02-21T20:00:38.197
> 
> 标签：ios, objective-c, facebook, cocoa, facebook-ios-sdk

控制台中没有打印任何内容，并且在`- (void)request:(FBRequest *)request didLoad:(id)result`使用

基本上我想要**用户名、FB 用户名和 FB id**。有没有其他方法可以获取此信息，因为此方法似乎不起作用。

```
- (IBAction)performLogin:(id)sender
{
    [self.spinner startAnimating];

    GIFAppDelegate* appDelegate = [UIApplication sharedApplication].delegate;
    [appDelegate openSession];
    FBRequestConnection* conn = [[FBRequestConnection alloc] init];
    [conn addRequest:[FBRequest requestForMe] completionHandler:^(FBRequestConnection *connection, NSDictionary<FBGraphUser> *me, NSError *error) {
        if(error) {
            NSLog(@"Error requesting user info");
            return;
        }

        NSLog(@"User's name is %@", me.name);
    }];
} 
```

请注意，该方法的其余部分有效，只是它的 FBRequestConnection 部分无效。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T20:12:13.430

我相信您刚刚开始使用新的图形 SDK：

以下是您可以提取一些信息的方法：

// 您的信息：

```
[FBRequestConnection startWithGraphPath:@"/me" parameters:nil HTTPMethod:@"GET" completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
    NSLog(@"result %@",result);
}]; 
```

// 你的朋友信息

```
 [FBRequestConnection startWithGraphPath:@"me/friends" parameters:nil HTTPMethod:@"GET" completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
        NSLog(@"result %@",result);
    }]; 
```

同样，您可以提取更多信息。您应该阅读更多图表对象 -[此处](https://developers.facebook.com/docs/reference/api/)。这就是您将了解的方式，您可以取出所有东西。您也可以使用 FQL 在 facebook 上查询。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-16T01:22:15.710

添加请求后添加以下行：

```
[conn start]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-04T11:59:29.040

```
NSMutableDictionary* params =   [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                 [NSString stringWithFormat:@"%ld", (long)10], @"score",
                                 nil];

dispatch_queue_t some_queue = dispatch_queue_create("some.queue.name", NULL);

dispatch_async(some_queue, ^{

    // [NSString stringWithFormat:@"%llu/scores", lintFBFriendId]

    [FBRequestConnection startWithGraphPath:@"APP_ID/scores"
                                 parameters:params
                                 HTTPMethod:@"GET"
                          completionHandler:^(FBRequestConnection *connection, id result,     NSError *error)
     {
         NSLog(@"result->%@");
     }
     }]; 
```

我想获取分数但是当我放入`[FBRequestConnection startWithGraphPath:`队列但如果我删除队列它不会响应或打印数据它可以工作

代码->

# android - 如何在android中制作自定义搜索栏？

> ID：15011144
> 
> 赞同：11
> 
> 时间：2013-02-21T20:01:04.030
> 
> 标签：android, seekbar

我想让客户搜索栏像这样的图像：

![在此处输入图像描述](../Images/48ac23d5d2de96afd0dba0c78583566c.png)

我检查了[这个](http://javandroidevelop.blogspot.in/2012/09/cool-seekbar-custom-made-by-me.html)和[这个](http://www.techrepublic.com/blog/app-builder/androids-seekbar-your-way/943)。如果有人对此有任何想法..请分享。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T20:21:54.643

如果我理解正确，您想在沿球体移动的实际滑块上方创建一个数值。

您可以做的一件事是通过将文本直接“合并”到球体图像的可绘制文件上，在滑块的实际图像上方写入文本。

我假设您正在使用您在原始问题中提供的[第一个教程](http://javandroidevelop.blogspot.in/2012/09/cool-seekbar-custom-made-by-me.html)

```
public class CustomSeekBar extends Activity {
  SeekBar mybar;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_custom_seek_bar);
        mybar = (SeekBar) findViewById(R.id.seekBar1);

        mybar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

      @Override
      public void onStopTrackingTouch(SeekBar seekBar) {

        //add here your implementation
      }

      @Override
      public void onStartTrackingTouch(SeekBar seekBar) {

        //add here your implementation
      }

      @Override
      public void onProgressChanged(SeekBar seekBar, int progress,
          boolean fromUser) {
            int value = seekBar.getProgress(); //this is the value of the progress bar (1-100)
            //value = progress; //this should also work
            String valueString = value + ""; //this is the string that will be put above the slider
            seekBar.setThumb(writeOnDrawable(R.drawable.thumbler_small, value));        
      }
    });
    }

    public BitmapDrawable writeOnDrawable(int drawableId, String text){

    Bitmap bm = BitmapFactory.decodeResource(getResources(), drawableId).copy(Bitmap.Config.ARGB_8888, true);

    Paint paint = new Paint(); 
    paint.setStyle(Style.FILL);  
    paint.setColor(Color.BLACK); //Change this if you want other color of text
    paint.setTextSize(20); //Change this if you want bigger/smaller font

    Canvas canvas = new Canvas(bm);
    canvas.drawText(text, 0, bm.getHeight()/2, paint); //Change the position of the text here

    return new BitmapDrawable(bm);
}
} 
```

这会从您的资源中获取一个可绘制对象，并在其上绘制一些文本并返回新的可绘制对象。用于`seekBar.getProgress();`从搜索栏获取所需的值。

**我建议稍微清理一下代码，因为现在每次触摸搜索栏时它都会创建一个新的绘制对象，这真的很糟糕。**

您需要做更多的事情才能使其**仅**在单击球体时才起作用...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-17T17:28:05.790

为什么不编写自定义搜索栏视图。

这是一些示例代码，用于将文本放在搜索栏拇指滑块的中间，并且文本随滑块移动。应该很容易适应滑块顶部的打印文本。

```
public class CustomSeekBar extends SeekBar {

private Paint textPaint;

private Rect textBounds = new Rect();

private String text = "";

public CustomSeekBar(Context context) {
    super(context);
    textPaint = new Paint();
    textPaint.setColor(Color.WHITE);

}

public CustomSeekBar(Context context, AttributeSet attrs) {
    super(context, attrs);
    textPaint = new Paint();
    textPaint.setColor(Color.WHITE);

}

public CustomSeekBar(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);

    textPaint = new Paint();
    textPaint.setColor(Color.WHITE);
        }

@Override
protected synchronized void onDraw(Canvas canvas) {
    // First draw the regular progress bar, then custom draw our text
    super.onDraw(canvas);

    // Now progress position and convert to text.
    text = Integer.toString(getProgress());

    // Now get size of seek bar.
    float width = getWidth();
    float height = getHeight();

    // Set text size.
    textPaint.setTextSize((height * 3) / 4);
    // Get size of text.
    textPaint.getTextBounds(text, 0, text.length(), textBounds);

    // Calculate where to start printing text.
    float position = (width / getMax()) * getProgress();

    // Get start and end points of where text will be printed.
    float textXStart = position - textBounds.centerX();
    float textXEnd = position + textBounds.centerX();

    // Check does not start drawing outside seek bar.
    if(textXStart < 0) textXStart = 0; 

    if(textXEnd > width)
        textXStart -= (textXEnd - width);

    // Calculate y text print position.
    float yPosition = (height / 2) - textBounds.centerY(); //- (textBounds.bottom / 2);

    canvas.drawText(text, textXStart, yPosition, textPaint);
}

public synchronized void setTextColor(int color) {
    super.drawableStateChanged();
    textPaint.setColor(color);
    drawableStateChanged();
} 
```

}

我希望这对你有用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-05-16T11:55:23.590

**XML 代码**

```
 <SeekBar
    android:id="@+id/seekBar1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:progressDrawable="@drawable/seek_bar"
    android:paddingLeft="15dp"
    android:paddingRight="15dp"
    android:thumb="@drawable/thumbler_small"
    android:indeterminate="false" /> 
```

**seek_bar.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:id="@+android:id/SecondaryProgress"
        android:drawable="@drawable/first"/>
    <item
        android:id="@+android:id/progress"
        android:drawable="@drawable/second"/>
</layer-list> 
```

**第一个可绘制对象为空或未显示完整区域。**

**第二个drawable是填充或着色整个区域。**

[此](http://custom-android-dn.blogspot.in/2012/12/how-to-use-and-custom-seekbar-in-android.html)链接对您有更多帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-09T10:30:59.063

如果您想要与图像中显示的外观相同，则必须在 xml 文件中为 seekbar 提供 minHeight 和 maxHeight 两个属性。例如：

```
<SeekBar
    android:id="@+id/seekBar1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:progressDrawable="@drawable/seek_bar"
    android:paddingLeft="15dp"
    android:paddingRight="15dp"
    android:thumb="@drawable/thumbler_small"
    **android:minHeight = "20dp"
    android:maxHeight = "20dp"**   
    android:indeterminate="false" /> 
```

请检查上面突出显示的代码中的属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-09T08:29:15.610

您好，首先在您的可绘制文件夹中创建一个 xml 文件（如果没有创建一个新文件夹）
并粘贴此代码或按照[教程](http://programondaspot.blogspot.com/2015/07/create-custom-seekbar-in-android.html)尽快完成此操作

重复底部背景.xml

```
 <bitmap android:dither="true" android:src="@drawable/bottom_bar_repeat" android:tilemode="repeat"      xmlns:android="http://schemas.android.com/apk/res/android">

    </bitmap> 
```

seek_thumb.xml

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
      <item android:drawable="@drawable/seek_thumb_pressed" android:state_pressed="true" android:state_window_focused="true">

<item android:drawable="@drawable/seek_thumb_pressed" android:state_focused="true" android:state_window_focused="true">
<item android:drawable="@drawable/seek_thumb_pressed" android:state_selected="true" android:state_window_focused="true">
<item android:drawable="@drawable/seek_thumb_normal">
 </item></item></item></item></selector> 
```

我给你一个[链接](http://programondaspot.blogspot.com/2015/07/create-custom-seekbar-in-android.html)我希望它可以帮助你

对不起，我不必解释更多，只需按照教程进行操作即可：）

问候，

# ruby - Ruby：数组到字符串的条件

> ID：15011150
> 
> 赞同：0
> 
> 时间：2013-02-21T20:01:36.337
> 
> 标签：ruby

我需要生成一个数组来检查一些条件。这是场景。

我有 3 个包含这样的字符串的变量：

```
client1 = "Google"
client2 = "Apple"
client3 = "Microsoft"

category1 = "sales"
category2 = "software"
category3 = "hardware" 
```

我需要生成的输出是一个数组，它应该将所有客户端和类别附加在一起，并用下划线“_”附加。

**期望的输出：** `array = ["Google_sales", "Apple_software", "Microsoft_hardware"]`

到目前为止我已经尝试过：

```
array = [client1+"_"+category1, client2+"_"+category2, client3+"_"+category3] 
```

现在，这工作正常，我得到了我想要的。但是当变量为空时，复杂性就开始了。考虑有另一个变量叫做`client4="" and category4=""`。现在这些都是空的，当我尝试完成我的数组时，我得到了混乱的数组值。

前任：`array = [client1+"_"+category4, client4+"_"+category2]`

这会给我这样的输出：`array = ["Google_", "_software"]`

问题：

用户填写客户和客户类别。用户可能无法输入客户或类别。目前我有client1、client2、client3、client4和cat1、cat2、cat3、cat4。Client1 与 cat1 相关联，依此类推。现在我只需要获取一个包含有效条目的数组，如果其中一个为空，那么我们跳到下一个。

因此，仅当两者都存在时，我们才在 client1 和 cat1 之间插入“_”。否则我们移动到 client2 和 cat2 等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:26:59.153

## 使用 Array#zip 和 Array#join

最简单的方法是使用[Array#zip](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-zip)和[Array#join](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-join)。例如：

```
companies  = %w[Google Apple Microsoft]
categories = %w[sales software hardware]
companies.zip(categories).map { |array_pair| array_pair.join '_' }
# => ["Google_sales", "Apple_software", "Microsoft_hardware"] 
```

如果你愿意，你可以让它变得更复杂，但只要你在每个数组中有相同数量的项目，这就是尽可能简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T20:17:30.050

我将在这里做一些假设：

1）您的方法将两个数组作为输入：一个 cliens 数组和一个 categories 数组。

2）如果用户忘记输入一个值，一个空字符串将被保存在它的位置。

3）如您的评论中所述，您所需的最终输出是一个逗号分隔的字符串。

```
def collect_clients_and_customers(clients, categories)
   returnable = ""
   if clients.size != categories.size
      puts "O MY GOD! SOMETHING HAS GONE TERRIBLY WRONG"
      nil
   else
      clients.each_with_index do |client, index|
          unless client[index].empty? or categories[index].empty?
               returnable = returnable+client[index]+"_"+categories[index]+","
          end
          if index == clients.size-1
               returnable = returnable[0..index-1]
          end
      end
   end
   returnable
 end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T20:19:06.330

```
array = [
  [client1, category1], [client2, category2], [client3, category3],
  [client1, category4], [client4, category2],
]
.map{|a| a.join("_") unless a.any?(&:empty)}.compact 
```

# html - 内部元素具有绝对位置时的CSS边距

> ID：15011153
> 
> 赞同：1
> 
> 时间：2013-02-21T20:01:49.350
> 
> 标签：html, twitter-bootstrap, css

我处于一个非常烦人的境地......我认为最好只是展示我所做的并告诉你问题是什么，而不是解释一切。

我一直在寻找解决方案很长一段时间，但我找不到它。

如果您访问[http://jsfiddle.net/bd3Ms/](http://jsfiddle.net/bd3Ms/)，您会看到三个带有 h1 标签和内部图像的框。我已经用 CSS 剪辑了图像（必须以这种方式完成，无法绕过）。我正在尝试将图像居中放在框中，但我无法做到这一点。我认为这是因为 img 元素的绝对定位。

代码：

```
<html>
<head>
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/css/bootstrap-combined.min.css" rel="stylesheet">

    <style type="text/css">
        .photo-div {
            overflow:auto;
            height:250px;
            border: 1px solid #000;
        }

        .photo-div-content {
            width:100%;
            margin:0 auto;
        }

        img.clipped {
            position:absolute;
            clip:rect(0px,200px,200px,0px);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="row">
            <div id="div-1" class="photo-div span4">
                <div class="photo-div-content">
                    <h1>Logitech Mouse</h1>
                    <img class="clipped" src="https://www.google.nl/images/srpr/logo3w.png">
                </div>
            </div>
                <div id="div-2" class="photo-div span4">
                <div class="photo-div-content">
                    <h1>Logitech Mouse</h1>
                    <img class="clipped" src="https://www.google.nl/images/srpr/logo3w.png">
                </div>
            </div>
            <div id="div-3" class="photo-div span4">
                <div class="photo-div-content">
                    <h1>Logitech Mouse</h1>
                    <img class="clipped" src="https://www.google.nl/images/srpr/logo3w.png">
                </div>
            </div>
        </div>
    </div>
</body> 
```

我正在使用 Twitter Bootstrap，并且我正在构建的网站将完全响应，所以只添加一个 margin-left 对我来说是行不通的。

我希望我设法弄清楚问题所在。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:06:19.317

不裁剪和居中图像怎么办？

```
img.clipped {
    background:url(https://www.google.nl/images/srpr/logo3w.png) center center no-repeat;
} 
```

**现场示例：http:** [//jsfiddle.net/bd3Ms/1/](http://jsfiddle.net/bd3Ms/1/)

这里有更多选择：

*   绝对中心（垂直和水平）图像
    [http://css-tricks.com/snippets/css/absolute-center-vertical-horizo​​ntal -an-image/](http://css-tricks.com/snippets/css/absolute-center-vertical-horizontal-an-image/)
*   使用 CSS Clip 属性创建缩略图：
    [http ://www.seifi.org/css/creating-thumbnails-using-the-css-clip-property.html](http://www.seifi.org/css/creating-thumbnails-using-the-css-clip-property.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T20:45:36.473

如果我正确理解您的问题，您希望将文本和剪切的图像居中。看看这是否有帮助：http: [//jsfiddle.net/panchroma/7Lq6B/](http://jsfiddle.net/panchroma/7Lq6B/)

重要的是我已经将图像包裹在一个居中的 div 中，该 div 的大小与您的剪切尺寸相同。

**CSS**

```
.img-wrap{ /* dimensions should match clipping size */
width:200px;
height:200px;
margin:0 auto;
} 
```

**HTML**

```
<div id="div-2" class="photo-div span4">
<div class="photo-div-content">
<h1>Logitech Mouse</h1>
<div class="img-wrap">
<img class="clipped" src="https://www.google.nl/images/srpr/logo3w.png"></div>
</div>
</div> 
```

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T20:59:05.030

由于图像是绝对定位的，因此您可以使用更多选项。试试这个：

```
img.clipped {
    position: absolute;
    left: 50%;
    margin-left: -25%;
    clip:rect(0px,200px,200px,0px);
} 
```

这不是漂亮的代码，但它位于父 div 的中间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T22:05:15.077

我使用与 CSS sprites 相同的技术来做到这一点。

```
.photo-div-content{
    background: 'url('IMG URL') repeat scroll -0px -0px transparent');
    height: 200px;
    width: 200px;
    margin: 0 auto;
} 
```

现在我认为这是实现我的目标的最佳方式：使用 CSS 在 div 中间显示图像的一部分。

# linux - X10 - 多地点的分段错误

> ID：15011158
> 
> 赞同：1
> 
> 时间：2013-02-21T20:02:15.340
> 
> 标签：linux, segmentation-fault, x10-language

我对 X10 语言完全陌生，我尝试了以下代码，但在使用多个 Place 时出现分段错误。运行 X10 的 Monte Carlo 样本时，我遇到了同样的错误。我在 Core i7 2Ghz 处理器上的 64 位 Debian Linux 上使用 X10 版本 2.3。

```
import x10.util.Timer;
public class placetest{
        public static def main(args: Array[String](1)){
                finish for(var i:Int=1;i<=4;i++){
                      val ii = i;
                      val pk = Place.place(ii);
                      val k = 1;
                      async at(pk) count(k);
                }
                Console.OUT.println("Finished");
        }
        public static def count(i:Int){
                Console.OUT.println("Test" + i);
        }
} 
```

这只发生在我向 count 函数发送参数时。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T06:40:57.900

X10 中的位置编号从 0 到 Place.MAX_PLACES，因此 for 循环应索引为

```
finish for(var i:Int=0;i<4;i++){ 
```

但是，编写取决于特定数量的位置的代码通常是一个坏主意。更好的是：

```
finish for (place in Place.places()) {
    val k = 1;
    at(place) async count(k);
} 
```

这适用于任何数量的地方。

请注意，我还切换了顺序`async at`- 使用它更有效，`at(p) async`因为它不会在当前位置创建单独的活动。

您确定在蒙特卡洛积分示例中出现同样的错误吗？Seg故障有很多原因...

# javascript - ColorBox：Box Sizing 太小，仍有内容要显示

> ID：15011161
> 
> 赞同：0
> 
> 时间：2013-02-21T20:02:22.673
> 
> 标签：javascript, jquery, css, colorbox

当我的 ColorBox 出现在屏幕上时，它的尺寸太小了，即使它还有内容可以显示。任何想法为什么？

链接是：（我认为它可以在外部工作......如果不让我知道......） [http://rsatestamle.dminsite.com/](http://rsatestamle.dminsite.com/)

首次加载网站时会弹出该框。cookie 设置为在 30 天后过期。

我只需要该框来实际显示其内容，而不是在侧面给我滚动条。我正在查看 CSS，但找不到任何这样做的东西。

正如你在我的图片中看到的：

![在此处输入图像描述](../Images/5f3b286d3e1bbd6c0ddbee490c060f22.png)

它只是在右侧显示滚动条，而不是显示我的内容。对我来说没有多大意义。

HTML/JavaScript：

```
<script>

$("document").ready(function (){ 

   // load the overlay

    if (document.cookie.indexOf('visited=true') == -1) {
        var thirtyDays = 1000*60*60*24*30;
        var expires = new Date((new Date()).valueOf() + thirtyDays);
        document.cookie = "visited=true;expires=" + expires.toUTCString();
        $.colorbox({width:"580px", inline:true, href:"#subscribe_popup"});
    }

    $(".open_popup").colorbox({width:"580px", inline:true, href:"#subscribe_popup"});

 });

</script>

<!-- This contains the hidden content for inline calls for the subscribe box -->
<div style='display:none'>
  <div id='subscribe_popup' style='padding:10px;'>
    <div align="center" style="width:525px"><img src="http://www.amleo.com/images/art/Survey_ad.jpg" style="width:525px"/></div>
    <div align="center">Please enter your e-mail address below to sign up.</div>
    <!-- BEGIN #subs-container -->
    <div id="subs-container" class="clearfix">
      <!-- BEGIN .box-side -->
      <div>
            <form name="box-form" id="box-form" method="post" action="http://www.gliq.com/cgi-bin/subunsub" style="margin-top: -9px; margin-right:auto;margin-left:auto;width:177px;">
            <input name="email" size=20>
            <input type="hidden" name="acctname" value="amleo">
            <input type="hidden" name="action" value="subscribe">
            <input type="hidden" name="url" value="http://www.amleo.com/subscribesuccessful/a/47/">
            <input type="submit" value="Sign Up" style="margin-left:45px;">
        </form>
        <!-- END .box-side -->
      </div>
      <!-- BEGIN #subs-container -->
    </div>
  </div>
</div>
<!-- END subscribe popup--> 
```

CSS：

```
/*
    ColorBox Core Style:
    The following CSS is consistent between example themes and should not be altered.
*/
#colorbox, #cboxOverlay, #cboxWrapper{position:absolute; top:0; left:0; z-index:9999; overflow:visible;}
#cboxOverlay{position:fixed; width:100%; height:100%;}
#cboxMiddleLeft, #cboxBottomLeft{clear:left;}
#cboxContent{position:relative;}
#cboxLoadedContent{overflow:auto;}
#cboxTitle{margin:0;}
#cboxLoadingOverlay, #cboxLoadingGraphic{position:absolute; top:0; left:0; width:100%;}
#cboxPrevious, #cboxNext, #cboxClose, #cboxSlideshow{cursor:pointer;}
.cboxPhoto{float:left; margin:auto; border:0; display:block;}
.cboxIframe{width:100%; height:100%; display:block; border:0;}

/* 
    User Style:
    Change the following styles to modify the appearance of ColorBox.  They are
    ordered & tabbed in a way that represents the nesting of the generated HTML.
*/
#cboxOverlay{background:#000;opacity:0.3 !important;}
#colorbox{
background-color:#333;
-moz-border-radius:5px;
-webkit-border-radius:5px;
border-radius:5px;
        }

    #cboxTopLeft{width:14px; height:14px;}
    #cboxTopCenter{height:14px;}
    #cboxTopRight{width:14px; height:14px;}
    #cboxBottomLeft{width:14px; height:43px;}
    #cboxBottomCenter{height:43px;}
    #cboxBottomRight{width:14px; height:43px; }
    #cboxMiddleLeft{width:14px;}
    #cboxMiddleRight{width:14px;}
    #cboxContent{overflow:visible;}
    #cboxLoadedContent{margin-bottom:5px;}
    #cboxLoadingOverlay{background:url(http://www.amleo.com/images/art/boxloading_background.png) no-repeat center center;}
    #cboxLoadingGraphic{background:url(http://www.amleo.com/images/art/boxloading.gif) no-repeat center center;}
    #cboxTitle{position:absolute; bottom:-25px; left:0; text-align:center; width:100%; font-weight:bold; color:#7C7C7C;}
    #cboxCurrent{position:absolute; bottom:-25px; left:58px; font-weight:bold; color:#7C7C7C;}

    #cboxPrevious, #cboxNext, #cboxClose, #cboxSlideshow{position:absolute; bottom:-29px; background:url(http://www.amleo.com/images/art/boxcontrols.png) no-repeat 0px 0px; width:23px; height:23px; text-indent:-9999px;}
    #cboxPrevious{left:0px; background-position: -51px -25px;}
    #cboxPrevious.hover{background-position:-51px 0px;}
    #cboxNext{left:27px; background-position:-75px -25px;}
    #cboxNext.hover{background-position:-75px 0px;}
    #cboxClose{right:0; background-position:-100px -25px; border:0;}
    #cboxClose.hover{background-position:-100px 0px;border:0;}

    .cboxSlideshow_on #cboxSlideshow{background-position:-125px 0px; right:27px;}
    .cboxSlideshow_on #cboxSlideshow.hover{background-position:-150px 0px;}
    .cboxSlideshow_off #cboxSlideshow{background-position:-150px -25px; right:27px;}
    .cboxSlideshow_off #cboxSlideshow.hover{background-position:-125px 0px;} 
```

使用最新版本的 ColorBox & jQuery 1.8.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T07:55:31.653

> 这可能是由于加载的标记中的 IMG 元素在 ColorBox 测量内容以确定它应该使用的宽度和高度之前尚未完全完成下载。第二次打开 ColorBox 时，图像已被缓存，并将在文档中占据正确的宽度和高度。这可以通过向 IMG 元素添加宽度和高度尺寸（推荐做法）或通过在 CSS 中设置指定图像宽度和高度的样式来轻松解决。

[http://www.jacklmoore.com/colorbox/faq#faq-img](http://www.jacklmoore.com/colorbox/faq#faq-img)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:18:16.120

我了解您想要摆脱滚动条并希望在弹出窗口中显示您的所有内容。

我的建议

1.  在 CSS 中增加 #subscribe_popup 的高度/宽度可能会有所帮助

2.  在 CSS 中为#subscribe_popup 使用“溢出：隐藏”可能会有所帮助

希望能帮助到你。

# jmeter - 打开脚本时出现jmeter错误

> ID：15011162
> 
> 赞同：9
> 
> 时间：2013-02-21T20:02:25.090
> 
> 标签：jmeter

好的 - 我还没有把这个测试从一台机器移到另一台机器上。这个测试是在我今天试图打开它的地方创建并保存的。昨天 - 我做了一些更改并保存了它。现在，我打开并收到错误 - 请参阅日志文件。

我一直在寻找答案，但我发现的唯一一件事与将测试从一台机器移动到另一台机器有关。这看起来只是简单的损坏。两个问题 - 1\. 任何人以前见过这个并知道是什么原因造成的吗？2.我搞砸了吗？我必须完全重做这个测试吗？

不确定这在这种情况下是否重要，但是：
Windows 7 Jmeter 2.9

这是日志信息：

```
2013/02/21 14:54:53 INFO  - jmeter.gui.action.Load: Loading file: C:\Users\jcraig\Desktop\Tools\jmeter\apache-jmeter-2.9\apache-jmeter-2.9\bin\MC_multi_thread.jmx 
2013/02/21 14:54:53 INFO  - jmeter.services.FileServer: Set new base='C:\Users\jcraig\Desktop\Tools\jmeter\apache-jmeter-2.9\apache-jmeter-2.9\bin' 
2013/02/21 14:54:53 INFO  - jmeter.services.FileServer: Set new base='C:\Users\jcraig\Desktop\Tools\jmeter\apache-jmeter-2.9\apache-jmeter-2.9\bin' 
2013/02/21 14:55:40 INFO  - jmeter.gui.action.Load: Loading file: C:\Users\jcraig\Desktop\Tools\jmeter\apache-jmeter-2.9\apache-jmeter-2.9\bin\MC_Multi_Thread02.jmx 
2013/02/21 14:55:40 INFO  - jmeter.services.FileServer: Set new base='C:\Users\jcraig\Desktop\Tools\jmeter\apache-jmeter-2.9\apache-jmeter-2.9\bin' 
2013/02/21 14:55:40 ERROR - jmeter.save.SaveService: Conversion error com.thoughtworks.xstream.converters.ConversionException:  : no more data available - expected end tags </stringProp></HTTPSamplerProxy></hashTree></hashTree></hashTree></hashTree></jmeterTestPlan> to close start tag <stringProp> from line 7281 and start tag <HTTPSamplerProxy> from line 7257 and start tag <hashTree> from line 6253 and start tag <hashTree> from line 6191 and start tag <hashTree> from line 13 and start tag <hashTree> from line 3 and start tag <jmeterTestPlan> from line 2, parser stopped on TEXT seen ...</stringProp>\n            <stringProp... @7282:24 :  : no more data available - expected end tags </stringProp></HTTPSamplerProxy></hashTree></hashTree></hashTree></hashTree></jmeterTestPlan> to close start tag <stringProp> from line 7281 and start tag <HTTPSamplerProxy> from line 7257 and start tag <hashTree> from line 6253 and start tag <hashTree> from line 6191 and start tag <hashTree> from line 13 and start tag <hashTree> from line 3 and start tag <jmeterTestPlan> from line 2, parser stopped on TEXT seen ...</stringProp>\n            <stringProp... @7282:24
---- Debugging information ----
message             :  : no more data available - expected end tags </stringProp></HTTPSamplerProxy></hashTree></hashTree></hashTree></hashTree></jmeterTestPlan> to close start tag <stringProp> from line 7281 and start tag <HTTPSamplerProxy> from line 7257 and start tag <hashTree> from line 6253 and start tag <hashTree> from line 6191 and start tag <hashTree> from line 13 and start tag <hashTree> from line 3 and start tag <jmeterTestPlan> from line 2, parser stopped on TEXT seen ...</stringProp>\n            <stringProp... @7282:24
cause-exception     : com.thoughtworks.xstream.io.StreamException
cause-message       :  : no more data available - expected end tags </stringProp></HTTPSamplerProxy></hashTree></hashTree></hashTree></hashTree></jmeterTestPlan> to close start tag <stringProp> from line 7281 and start tag <HTTPSamplerProxy> from line 7257 and start tag <hashTree> from line 6253 and start tag <hashTree> from line 6191 and start tag <hashTree> from line 13 and start tag <hashTree> from line 3 and start tag <jmeterTestPlan> from line 2, parser stopped on TEXT seen ...</stringProp>\n            <stringProp... @7282:24
class               : org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy
required-type       : org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy
converter-type      : org.apache.jmeter.protocol.http.sampler.HTTPSamplerBaseConverter
path                : /jmeterTestPlan/hashTree/hashTree/hashTree[5]/hashTree[4]/HTTPSamplerProxy[16]
line number         : 7282
class[1]            : org.apache.jorphan.collections.ListedHashTree
converter-type[1]   : org.apache.jmeter.save.converters.HashTreeConverter
------------------------------- :  : no more data available - expected end tags </stringProp></HTTPSamplerProxy></hashTree></hashTree></hashTree></hashTree></jmeterTestPlan> to close start tag <stringProp> from line 7281 and start tag <HTTPSamplerProxy> from line 7257 and start tag <hashTree> from line 6253 and start tag <hashTree> from line 6191 and start tag <hashTree> from line 13 and start tag <hashTree> from line 3 and start tag <jmeterTestPlan> from line 2, parser stopped on TEXT seen ...</stringProp>\n            <stringProp... @7282:24 :  : no more data available - expected end tags </stringProp></HTTPSamplerProxy></hashTree></hashTree></hashTree></hashTree></jmeterTestPlan> to close start tag <stringProp> from line 7281 and start tag <HTTPSamplerProxy> from line 7257 and start tag <hashTree> from line 6253 and start tag <hashTree> from line 6191 and start tag <hashTree> from line 13 and start tag <hashTree> from line 3 and start tag <jmeterTestPlan> from line 2, parser stopped on TEXT seen ...</stringProp>\n            <stringProp... @7282:24
---- Debugging information ----
message             :  : no more data available - expected end tags </stringProp></HTTPSamplerProxy></hashTree></hashTree></hashTree></hashTree></jmeterTestPlan> to close start tag <stringProp> from line 7281 and start tag <HTTPSamplerProxy> from line 7257 and start tag <hashTree> from line 6253 and start tag <hashTree> from line 6191 and start tag <hashTree> from line 13 and start tag <hashTree> from line 3 and start tag <jmeterTestPlan> from line 2, parser stopped on TEXT seen ...</stringProp>\n            <stringProp... @7282:24
cause-exception     : com.thoughtworks.xstream.io.StreamException
cause-message       :  : no more data available - expected end tags </stringProp></HTTPSamplerProxy></hashTree></hashTree></hashTree></hashTree></jmeterTestPlan> to close start tag <stringProp> from line 7281 and start tag <HTTPSamplerProxy> from line 7257 and start tag <hashTree> from line 6253 and start tag <hashTree> from line 6191 and start tag <hashTree> from line 13 and start tag <hashTree> from line 3 and start tag <jmeterTestPlan> from line 2, parser stopped on TEXT seen ...</stringProp>\n            <stringProp... @7282:24
class               : org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy
required-type       : org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy
converter-type      : org.apache.jmeter.protocol.http.sampler.HTTPSamplerBaseConverter
path                : /jmeterTestPlan/hashTree/hashTree/hashTree[5]/hashTree[4]/HTTPSamplerProxy[16]
line number         : 7282
class[1]            : org.apache.jorphan.collections.ListedHashTree
converter-type[1]   : org.apache.jmeter.save.converters.HashTreeConverter
-------------------------------
message             :  : no more data available - expected end tags </stringProp></HTTPSamplerProxy></hashTree></hashTree></hashTree></hashTree></jmeterTestPlan> to close start tag <stringProp> from line 7281 and start tag <HTTPSamplerProxy> from line 7257 and start tag <hashTree> from line 6253 and start tag <hashTree> from line 6191 and start tag <hashTree> from line 13 and start tag <hashTree> from line 3 and start tag <jmeterTestPlan> from line 2, parser stopped on TEXT seen ...</stringProp>\n            <stringProp... @7282:24 :  : no more data available - expected end tags </stringProp></HTTPSamplerProxy></hashTree></hashTree></hashTree></hashTree></jmeterTestPlan> to close start tag <stringProp> from line 7281 and start tag <HTTPSamplerProxy> from line 7257 and start tag <hashTree> from line 6253 and start tag <hashTree> from line 6191 and start tag <hashTree> from line 13 and start tag <hashTree> from line 3 and start tag <jmeterTestPlan> from line 2, parser stopped on TEXT seen ...</stringProp>\n            <stringProp... @7282:24
---- Debugging information ----
message             :  : no more data available - expected end tags </stringProp></HTTPSamplerProxy></hashTree></hashTree></hashTree></hashTree></jmeterTestPlan> to close start tag <stringProp> from line 7281 and start tag <HTTPSamplerProxy> from line 7257 and start tag <hashTree> from line 6253 and start tag <hashTree> from line 6191 and start tag <hashTree> from line 13 and start tag <hashTree> from line 3 and start tag <jmeterTestPlan> from line 2, parser stopped on TEXT seen ...</stringProp>\n            <stringProp... @7282:24
cause-exception     : com.thoughtworks.xstream.io.StreamException
cause-message       :  : no more data available - expected end tags </stringProp></HTTPSamplerProxy></hashTree></hashTree></hashTree></hashTree></jmeterTestPlan> to close start tag <stringProp> from line 7281 and start tag <HTTPSamplerProxy> from line 7257 and start tag <hashTree> from line 6253 and start tag <hashTree> from line 6191 and start tag <hashTree> from line 13 and start tag <hashTree> from line 3 and start tag <jmeterTestPlan> from line 2, parser stopped on TEXT seen ...</stringProp>\n            <stringProp... @7282:24
class               : org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy
required-type       : org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy
converter-type      : org.apache.jmeter.protocol.http.sampler.HTTPSamplerBaseConverter
path                : /jmeterTestPlan/hashTree/hashTree/hashTree[5]/hashTree[4]/HTTPSamplerProxy[16]
line number         : 7282
class[1]            : org.apache.jorphan.collections.ListedHashTree
converter-type[1]   : org.apache.jmeter.save.converters.HashTreeConverter
-------------------------------
cause-exception     : com.thoughtworks.xstream.converters.ConversionException
cause-message       :  : no more data available - expected end tags </stringProp></HTTPSamplerProxy></hashTree></hashTree></hashTree></hashTree></jmeterTestPlan> to close start tag <stringProp> from line 7281 and start tag <HTTPSamplerProxy> from line 7257 and start tag <hashTree> from line 6253 and start tag <hashTree> from line 6191 and start tag <hashTree> from line 13 and start tag <hashTree> from line 3 and start tag <jmeterTestPlan> from line 2, parser stopped on TEXT seen ...</stringProp>\n            <stringProp... @7282:24 :  : no more data available - expected end tags </stringProp></HTTPSamplerProxy></hashTree></hashTree></hashTree></hashTree></jmeterTestPlan> to close start tag <stringProp> from line 7281 and start tag <HTTPSamplerProxy> from line 7257 and start tag <hashTree> from line 6253 and start tag <hashTree> from line 6191 and start tag <hashTree> from line 13 and start tag <hashTree> from line 3 and start tag <jmeterTestPlan> from line 2, parser stopped on TEXT seen ...</stringProp>\n            <stringProp... @7282:24
first-jmeter-class  : org.apache.jmeter.save.converters.HashTreeConverter.unmarshal(HashTreeConverter.java:65)
class               : org.apache.jmeter.save.ScriptWrapper
required-type       : org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy
converter-type      : org.apache.jmeter.save.ScriptWrapperConverter
path                : /jmeterTestPlan/hashTree/hashTree/hashTree[5]/hashTree[4]/HTTPSamplerProxy[16]
line number         : 7282
version             : 2.9 r1437961
------------------------------- 
2013/02/21 14:55:40 WARN  - jmeter.gui.action.Load: Unexpected error java.lang.Exception: Error in TestPlan - see log file
    at org.apache.jmeter.gui.action.Load.insertLoadedTree(Load.java:158)
    at org.apache.jmeter.gui.action.Load.loadProjectFile(Load.java:113)
    at org.apache.jmeter.gui.action.LoadRecentProject.doAction(LoadRecentProject.java:68)
    at org.apache.jmeter.gui.action.ActionRouter.performAction(ActionRouter.java:81)
    at org.apache.jmeter.gui.action.ActionRouter.access$000(ActionRouter.java:40)
    at org.apache.jmeter.gui.action.ActionRouter$1.run(ActionRouter.java:63)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:705)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:675)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

感谢您提供有关此的任何信息！

杰米

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-06T22:11:44.287

这是一种修复损坏的测试 jmx 文件的快速方法。

1.  转到您的 jmeter 目录并打开 jmeter.log 文件
2.  最新的行表示 jmeter 记录的最后一个错误，您必须找到这样的块：

    ---- 调试信息 ---- 消息：com.atlantbh.jmeter.plugins.rest.RestSampler 原因异常：com.thoughtworks.xstream.mapper.CannotResolveClassException 原因消息：com.atlantbh.jmeter.plugins.rest。 RestSampler 类：org.apache.jorphan.collections.ListedHashTree 所需类型：org.apache.jorphan.collections.ListedHashTree 转换器类型：org.apache.jmeter.save.converters.HashTreeConverter 路径：/jmeterTestPlan/hashTree/hashTree/hashTree [3]/hashTree[3]/com.atlantbh.jmeter.plugins.rest.RestSampler **行号：950**

3.  使用文本编辑器打开您的 jmx 损坏文件并找到损坏的代码行（在上面的示例中损坏的行是 950）

4.  `<tag.name>`从to删除整个标签`</tag.name>`（或者如果您足够熟练，请尝试浏览子标签，找到错误并修复它）
5.  用不同的名称保存您编辑的文件
6.  加载到 jmeter
7.  如果错误仍然存​​在，请从第 1 步开始重复（您会找到要删除的新标签）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-23T22:26:19.003

按着这些次序

1.  转到以下链接 [https://jmeter-plugins.org/downloads/all/](https://jmeter-plugins.org/downloads/all/) 并将插件管理器添加到您的 Jmeter

2.  重启Jmeter

3.  通过单击“选项->插件管理器”添加所需的插件
4.  重启Jmeter

我认为它可以解决您的问题

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-05T15:30:36.590

我们在尝试使用 JMeter 2.13 打开测试时遇到了类似的问题。通过添加一些 JMeter 插件解决了这个问题。

在我们的例子中，我们需要在 lib/ext 文件夹中添加“JMeterPlugins-Standard”jar，以便在测试中使用`kg.apc.jmeter.vizualizers.ResponseTimesOverTimeGui`（或）。`kg.apc.jmeter.vizualizers.CorrectedResultCollector`

我们还需要`jmeter-plugins-1.0.0`在 lib/junit 文件夹中添加 jar 以供`com.atlantbh.jmeter.plugins.rest.gui.RestGui`（或`com.atlantbh.jmeter.plugins.rest.RestSampler`）使用。

在这种情况下，您需要在测试中查找第 7282 行以查看缺少的内容并为其添加相关插件。

由于某种原因，这些 jar 文件不包含在默认的 jmeter 下载中。

希望有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T22:39:36.550

您的文件似乎已损坏。

尝试在 xml 编辑器中打开它，看看它是否正确。

检查磁盘空间或磁盘问题。你在存档的时候有没有崩溃？

您可以尝试手动添加标签结尾以取回其中的一部分，也许您需要删除最后一个 xml 节点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-30T15:44:59.690

我有同样的情况，jmx不会加载。只有错误不同，我得到：java.lang.ArrayIndexOutOfBoundsException

通过安装 Java SE 1.7.0.67 已解决此问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-09T07:36:40.773

请检查您的 .jmx 文件，可能有一些代码被删除......我遇到了同样的问题......但是在查看我的 .jmx 文件后，我看到我的团队成员删除了一些代码......

# php - 使用 curl 向 bitbucket-api 发出 GET 请求

> ID：15011169
> 
> 赞同：3
> 
> 时间：2013-02-21T20:02:58.617
> 
> 标签：php, bitbucket-api

我正在尝试做一个简单的 GET 请求并返回屏幕上的任何响应。当我加载页面时，我得到一个空白页面。我觉得我很接近，但我不确定我哪里出错了。

我假设如果它成功工作，我应该得到某种回应。

```
 $url='https://api.bitbucket.org/1.0/user/';

    $curl = curl_init();

    curl_setopt($curl, CURLOPT_HTTPAUTH, CURLAUTH_BASIC ); 
    curl_setopt($curl, CURLOPT_USERPWD, "username:password");
    curl_setopt($curl, CURLOPT_HEADER, true); 
    curl_setopt($curl, CURLOPT_HTTPHEADER, array('Content-Type: application/json'));
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($curl, CURLOPT_URL, $url);

    curl_exec($curl); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T20:08:49.370

要不返回空白页，您需要编写

```
echo curl_exec($curl); 
```

或删除此行：

```
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true); 
```

# sqlite - phonegap 中 sqllite 数据库表的非唯一索引

> ID：15011172
> 
> 赞同：0
> 
> 时间：2013-02-21T20:03:06.930
> 
> 标签：sqlite, cordova

我将 phonegap 与默认数据库一起使用。阅读此文档时，它没有提及有关数据库表（又名 PRIMARY KEY、UNIQUE INDEX 或 INDEX）上的索引的任何内容。 [http://docs.phonegap.com/en/1.2.0/phonegap_storage_storage.md.html](http://docs.phonegap.com/en/1.2.0/phonegap_storage_storage.md.html)

但是当我查看示例代码时： [http ://www.raymondcamden.com/index.cfm/2011/10/20/Example-of-PhoneGaps-Database-Support](http://www.raymondcamden.com/index.cfm/2011/10/20/Example-of-PhoneGaps-Database-Support)

我可以看到 Ray 使用“PRIMARY KEY”。

我的三个问题是：

1.  是否有关于 phonegap 支持的所有 sql 语法的权威指南？
2.  phonegap 是否支持非主键索引？
3.  假设＃2，适当放置的索引是否加快了代码速度（或者关键字是否被读取和忽略）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T08:53:45.480

出于实际目的，所有 PhoneGap 实现都使用 SQLite，因此您可以使用[SQLite 支持的所有内容](http://www.sqlite.org/lang.html)。

# javascript - GmapPanel 在点击时添加标记 - EXTJS

> ID：15011182
> 
> 赞同：1
> 
> 时间：2013-02-21T20:04:01.340
> 
> 标签：javascript, ajax, google-maps, extjs, extjs4

```
function addDoctorLocation(lat,longt) 
    {
      var myLatlng = new google.maps.LatLng(parseFloat(lat), parseFloat(longt));
      var myOptions = {
        zoom: 10,
        center: myLatlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      }
     //var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

     var marker = new google.maps.Marker({
          position: myLatlng,
          title:"Hello World!"
      });

      // To add the marker to the map, call setMap();
      var map = Ext.getCmp('mygooglemap');
      marker.setMap(map); 
    }

var btn= Ext.getCmp('button');
btn.on('onclick', function(){
            addDoctorLocation(3.951941,102.052002);
    }) 
```

mygooglemap 是一个 GMappanel
如何单击按钮，然后 gmappanel 将添加一个带有坐标的标记`3.951941,102.052002`？我已经尝试过这段代码，但仍然无法工作？

## 更新

在复选框上怎么样？

```
tree.on('checkchange', function(node){
  var data = node.data;
  if (data.checked = true){
     var options = {
       lat:3.951941,
       lng:-102.052002,
       marker: {title:"Hello World!"},
       listeners: {
         click: function(e){
         }
       }     
     }
     addDoctorLocation(options);
  }     
}) 
```

## 地图创作

```
var layout = Ext.create('Ext.panel.Panel', {
            //renderTo: 'layout',
            width: window.innerWidth,
            height: window.innerHeight,
            //title: 'Border Layout', //no title will be blank
            layout: 'border',
            items: [{
                title: 'Message List',
                region: 'south',     // position for region
                xtype: 'panel',
                height: 100,
                split: true,         // enable resizing
                collapsible: true,
                margins: '0 5 5 5',
                collapsed: true
            },tree,{
                    xtype: 'gmappanel',
                    id : 'mygooglemap',
                    gmapType: 'map',
                    zoomLevel: 7,
                    mapConfOpts: ['enableScrollWheelZoom','enableDoubleClickZoom','enableDragging'],
                    mapControls: ['GSmallMapControl','GMapTypeControl','NonExistantControl'],  
                    setCenter: {
                        lat: 3.951941,
                        lng: 102.052002,
                    }
                }],
            renderTo: Ext.getBody() //get the body and display Layout at there
        });
    }); 
```

在我检查了 fireBug 之后，错误是：

```
ReferenceError: GLatLng is not defined
[Break On This Error]   
var mpoint = new GLatLng(options.lat,options.lng); 
```

我已经编辑了如下代码，工作正常

```
function addDoctorLocation(options) 
{
 var gm = Ext.getCmp('mygooglemap');
 var mpoint = new google.maps.LatLng(options.lat,options.lng);
 gm.addMarker(mpoint,options.marker,false,false, options.listeners);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T21:54:35.187

```
var btn= Ext.getCmp('button');
btn.on('onclick', function(){
  var options = {
    lat:3.951941,
    lng:-102.052002,
    marker: {title:"Hello World!"},
    listeners: {
     click: function(e){

     }
    }                
   }     
   addDoctorLocation(options);
})

function addDoctorLocation(options) 
{

 var gm = Ext.getCmp('mygooglemap');
 var mpoint = new GLatLng(options.lat,options.lng);
 gm.addMarker(mpoint,options.marker,false,false, options.listeners);
} 
```

注意：- 此代码仅添加中心点以外的标记。此时您应该使用“id:mygooglemap”创建地图。查看您的代码，您似乎正在尝试创建新地图，而不是在现有地图上添加标记。

您可以随时参考 GMapPanel.js 文件以获取 extjs 包附带的 addMarker 函数。我有旧版本，所以 addMarker 调用是相应的。

# ajax - AngularJS 结合 Web 服务响应

> ID：15011186
> 
> 赞同：5
> 
> 时间：2013-02-21T20:04:16.233
> 
> 标签：ajax, angularjs, angularjs-service

我有两个网络服务：

一个返回“文章”是这样的：

```
[   
    {
        "id": "1",
        "headline": "some text",
        "body": "some text",
        "authorId": "2"
    },
    {
        "id": "2",
        "headline": "some text",
        "body": "some text",
        "authorId": "1"
    }
] 
```

另一个返回一个像这样的“作者”，给定一个 id：

```
{
    "id": "1",
    "name": "Test Name",
    "email": "test@test.com",
    "photo": "path/to/img"
} 
```

我想将两者结合起来，这样我就可以在文章概述列表中显示作者姓名和照片。

像这样：

```
[   
    {
        "id": "1",
        "headline": "some text",
        "body": "some text",
        "authorId": "2",
        "author_info": {
            "id": "2",
            "name": "Another Test Name",
            "email": "test2@test.com",
            "photo": "path/to/img"
        }
    },
    {
        "id": "2",
        "headline": "some text",
        "body": "some text",
        "authorId": "1"
        "author_info": {
            "id": "1",
            "name": "Test Name",
            "email": "test@test.com",
            "photo": "path/to/img"
        }
    }
] 
```

我有一个获取文章的“文章”服务，但是在返回“文章”服务输出之前，使用类似“作者”服务中的作者信息丰富返回的 JSON 的最佳方法是什么？

```
factory('Authors', ['$http', function($http){
    var Authors = {

        data: {},

        get: function(id){
            return $http.get('/api/authors/' + id + '.json')
                .success(function(data) {
                    Authors.data = data;
                })
                .error(function() {
                    return {};
                });
        }
    };

    return Authors;
}]).

factory('Articles', ['$http', 'Authors', function($http, Authors){
    var Articles = {

        data: {},

        query: function(){
            return $http.get('/api/articles.json')
                .success(function(result) {
                    Articles.data = result; // How to get the author info into this JSON object???
                })
                .error(function() {
                    Articles.data = [];
                });
        }
    };
    return Articles;
}]) 
```

还请告诉我这是否是完全错误的方法。:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T20:33:44.603

在与 API 通信时，我会推荐以下方法来构建您的服务（如[Misko Hevery 所建议的](https://stackoverflow.com/a/11850027/1095616)）：

```
 // Author model/service
    angular.module('myApp').factory('Author', function($http) {
      var Author = function(data) {
        angular.extend(this, data);
      };

      Author.get = function(id) {
        return $http.get('/authors/' + id).then(function(response) {
          return new Author(response.data);
        });
      };

      return Author;
    });

    // Article model/service
    angular.module('myApp').factory('Article', function($http) {
      var Article = function(data) {
        angular.extend(this, data);
      };

      Article.query = function() {
        return $http.get('/articles/').then(function(response) {
          var articles = [];
          angular.forEach(response.data, function(data){
            articles.push(new Article(data));
          });
          return articles;
        });
      };

      return Article;
    });

    // Your controller
    angular.module('myApp')
      .controller('Ctrl'
        ,[
          '$scope'
          ,'Article'
          ,'Author'
          ,function($scope, Article, Author){
            Article.query()
              .then(function(articles){
                $scope.articles = articles;
                attachAuthors(articles);
              });

            function attachAuthors(articles){
              angular.forEach(articles, function(article){
                Author.get(article.authorId)
                  .then(function(author){
                    article.author = author;
                  });
              });
            }

          }
        ]
      ); 
```

但可以肯定的是，我也建议不要在单独的调用中获取所有这些数据。相反，如果可能，您应该让 API 返回组合的 JSON。服务器端组合会快很多倍。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-22T17:12:32.113

看看 JSOG。它非常适合做这类事情。目前有 Java、Python、Javascript 和 Ruby 的服务器实现。在客户端 JavaScript 端，您只需调用 JSOG.decode(object)。我在 Angular 中大量使用它。

[https://github.com/jsog/jsog](https://github.com/jsog/jsog)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T20:18:50.720

一种选择是在服务器上合并所有这些数据，可能会创建一个单独的 json 文件。这将简化客户端并且只需要一个 HTTP 请求而不是两个。

如果您同时保留这两种服务（这不是一个坏方法），您可以启动一个，等待答案并启动第二个。也许先做`Articles`然后`Authors`：

```
Articles.get(function (articles) {                
            $scope.articles = articles;
            //fire query for Authors
            Authors.query(function (authors) {
              $scope.authors= authors;
              //combine both articles and authors
              combineData(articles, authors);                    
           }) 
}); 
```

这是**组合数据**的函数：

```
function combineData(articles, authors){
  $.each(articles, function (i, article) {
      //find author
      var author = $.grep(authors, function(a, j){
                     return a.id == article.authorId;
                   });
      //set article's author
      article.author_info = author;
    });
} 
```

请注意，使用此配置，您的文章`$scope.articles`甚至会在调用之前呈现（通过设置）`Authors.query`

# android - Android SDK 尚未在首选项中设置

> ID：15011189
> 
> 赞同：1
> 
> 时间：2013-02-21T20:04:28.873
> 
> 标签：android

我有 adt-bundle-linux-x86 包并工作了一个月，它的工作正常到昨天。但是今天 eclipse 向我显示了 ADT 更新屏幕，如下所示：![在此处输入图像描述](../Images/cf954868a26e296005fbebd6813a8284.png)

在检查更新时我得到“**没有找到更新**”

但我无法创建新项目，使用现有项目，甚至无法打开 AVD。AVD 管理器抛出“ **Android SDK 的位置尚未在首选项中设置**。”

Window->Preference->Android 窗口不加载任何 Android SDK（在它出现前几天）。但在以下路径“ **/home/murali/adt-bundle-linux-x86/sdk** ”中仍然存在**Android-8、Android-14、Android-16 和 17文件夹。**

 **我花了几个小时来解决问题，但我无法找到解决方案并找出问题发生的原因。我一直在努力工作，请帮助我。

这是我的首选项窗口（特此附上以便更好地理解） ![出现错误的首选项窗口](../Images/470421fede953b5f5b987b2b851b4b32.png)

请帮我解决SDK和ADT问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T10:37:53.190

我已经下载了新的 SDK 包，而不是花时间找出原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T20:19:26.340

为什么不尝试重新安装 ADT/SDK？全新安装可能是最好的。如果您还不知道，这里是下载[链接。](http://developer.android.com/sdk/index.html)希望我有所帮助**

# xml - sed：在许多 XML 文件中使用正则表达式将 '<' char 替换为 '<'

> ID：15011192
> 
> 赞同：0
> 
> 时间：2013-02-21T20:04:29.670
> 
> 标签：xml, regex, sed, well-formed

我有数千个格式不正确的 XML 文件要修补。

其中许多包含以下问题：（`<someTag attr='text [< 99]'/>`注意方括号中的左角）。

我想写一个 sed 表达式来替换 *.xml 的所有`[<`实例`[&lt;`。

`sed -n 19p myFile.xml``<someTag attr='text [<99]'/>`按预期返回。

`echo '[<45' | sed -n '/\[</p'``[<45`按预期返回。

但是，`sed -n '/\[</p' myFile.xml`当对文件使用该表达式而不是回显时，显然我需要不同的语法。我需要使用什么语法？

另外，一旦我完成了这件事，我的计划就是做类似的事情

`sed -i -n 's/correct expression/\[&lt;/g/p' *.xml`针对所有文件中的所有匹配项运行它并输出新版本以帮助我调试。这看起来合理吗？

顺便说一句，sed 似乎是可以使用的工具，但我完全可以使用在 Linux 上运行的任何其他解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:12:57.907

> 但是，`sed -n '/\[</p' myFile.xml`当对文件使用该表达式而不是回显时，显然我需要不同的语法。

嗯，对我有用：

```
echo '[<45' > test.xml
sed -n '/\[</p' test.xml 
```

返回`[<45`。

也就是说，如果你想更换，做类似的事情

```
sed 's/\[</[\&lt;/g' 
```

例如，要直接修改所有 xml 文件，请执行

```
sed -i 's/\[</[\&lt;/g' *.xml 
```

（-i 开关用于直接修改文件；否则，它们的内容将被发送到标准输出）

> 这看起来合理吗？

当然，这就是 sed 的用途。

# sql-server - 使用 % 通配符匹配 SMALLMONEY

> ID：15011193
> 
> 赞同：1
> 
> 时间：2013-02-21T20:04:31.907
> 
> 标签：sql-server, tsql

我已经用 SQL 编写了这段代码：

```
alter proc verfinanfiltrado(@valor smallmoney) as
select idconta,vencimento,historico,original,formpagto,planoconta,clifor
from financeiro where original like @valor 
```

这个过程有效，我想写一些类似的东西：

```
alter proc verfinanfiltrado(@valor smallmoney) as
select idconta,vencimento,historico,original,formpagto,planoconta,clifor
from financeiro where original like  % @valor % 
```

例如，该过程与 746.06 一起使用，但我想显示以 746 开头的所有值，例如 746.06、746.10、748.12

在 nvarchar 的情况下？

```
 alter proc verfinanfiltrado(@histo smallmoney) as
select idconta,vencimento,historico,original,formpagto,planoconta,clifor
from financeiro where historico  like  % @histo % 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:09:55.967

转换列（通过字符串转换或舍入）将阻止使用索引。不要这样做。反而...

```
from financeiro where @value <= original and original < @value + 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T20:23:57.607

```
WHERE original >= ROUND(@valor,0,1) AND original < ROUND(@valor,0,1) + 1 
```

顺便说一句，对原始问题的评论中的 xQberts 解决方案也将起作用，但这是可悲的，因此您将从原始问题的任何不雅中受益

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T20:27:27.757

我已经解决了这个过程

```
alter proc vencevalor (@valor smallmoney)as
select idconta,vencimento,pagamento,historico,original,formpagto,planoconta,clifor
from financeiro where round(original,0,1) = round (@valor,0,1)  
order by idconta desc 
```

谢谢大家

# php - Foreach 数字列表（作为数组） javascript/jquery 替代 PHP？

> ID：15011197
> 
> 赞同：-3
> 
> 时间：2013-02-21T20:04:39.097
> 
> 标签：php, javascript, arrays

我有这段代码用于生成从 1 到 20 混合的数字列表：

```
var cells = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20];
cells.sort(function(a,b){
    return Math.floor(Math.random()*3 - 1);
}); 
```

现在我需要解析数组以对每个数字执行操作。在 PHP 中，我会这样做：

```
// PHP loop that I know... I need a javascript equivalent..
foreach($cells as &$cell) {

  // Javascript code, that I need to run
  $(".grid .cell:nth-child(" + $cell + ")").doAction();

} 
```

有人知道如何在 JS 中转换 PHP foreach 循环吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T20:12:18.180

这真的是你最好的方法：

```
var cellElements = $('.grid').find('.cell'); // Run the selector once, and get all cells

for (var i = 0; i < cells.length; i++) {
    cellElements.eq(cells[i]).doAction(); // Now just pick from the subset (this is a quick array access)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T20:18:37.167

据我了解`$(".grid .cell:nth-child(" + $cell + ")").doAction();`，您正在使用 jQuery。如果是这样，您可以使用`$.each`jQuery 公开的迭代器。例如，您可以执行以下操作：

```
 $.each(cells, function(index, value){
        $(".grid .cell:nth-child(" + value + ")").doAction();
    }); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T20:08:28.807

与 php 代码相比，for 循环的标准可以正常工作，尽管效率低下。

```
for(i=0; i<cells.count; i++) $(".grid .cell:nth-child(" + i.toString() + ")").doAction(); 
```

# python - 正则表达式 - 修改 python 列表

> ID：15011198
> 
> 赞同：1
> 
> 时间：2013-02-21T20:04:42.917
> 
> 标签：python, regex, list, tuples, replace

我在 python 中有一个巨大的列表，看起来像这样：

```
('foo','bar','foo/bar','foo1','bar/1') 
```

上面的每个值都说明了列表包含的字符种类 - aplhanumeric 加斜线。我需要一种方法将该列表转换为元组列表，如下所示：

```
(('foo','foo'),('bar','bar'),('foo/bar','foo/bar'),('foo1','foo1'),('bar/1','bar/1')) 
```

那么有什么比正则表达式搜索和替换更好的方法来做到这一点，对吧？（如我错了请纠正我）。

因此，我试图匹配引号之间的任何内容，但逗号除外，因为从技术上讲，它们也在引号之间。我使用lookahead 和lookbehind 来匹配任何东西：

```
(?<=')(.*?)(?=') 
```

但这仅匹配引号和逗号中的值。我需要的是匹配值加上除逗号之外的引号，并使用替换正则表达式使列表看起来像上面的元组。

我不能手动执行此操作，因为列表很大。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:10:41.463

好的，你有很多`list`字符串。你想要一个`tuple`，对于 的每个元素`list`，你都有一对`(element, element)`。

这正是`zip`它所做的，除了它`list`在 2.x 中返回一个这样的对，或者在 3.x 中返回一个迭代器。无论哪种方式，您都可以`tuple`通过调用将其转换为`tuple`. 所以：

```
tuple(zip(huge_list, huge_list)) 
```

更一般地，如果您想逐个元素地转换序列，您可以使用推导式或生成器表达式。没有“元组推导”，但只需将生成器表达式传递给`tuple`函数即可。所以：

```
tuple((element, element) for element in huge_list) 
```

或者，如果您想要一`tuple`对`(s[0], s[1:])`而不是`(s, s)`对：

```
tuple((element[0], element[1:]) for element in huge_list) 
```

等等。

同时，我想不出任何将对象转换为对象以在其`repr`上运行正则表达式转换并重新解析它的任何情况在 Python 中都是一个好主意。这不仅仅是[“现在他们有两个问题”](http://regex.info/blog/2006-09-15/247)的问题；解析生成的字符串（并且，即使您不关心安全性，弄清楚如何处理 where 的事情`eval(repr(x)) != x`）将比您开始的任何事情都更难。所以，如果你发现自己试图完成这项工作，请退后一步。

# iphone - Xcode 视图控制器

> ID：15011199
> 
> 赞同：1
> 
> 时间：2013-02-21T20:04:45.790
> 
> 标签：iphone, objective-c, xcode, view, controller

这可能是一个新的菜鸟问题，但 Objective-C 中的视图控制器是什么？UIView 与 UIViewController 有何不同？非常感谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T20:11:12.517

有一种称为 MVC（模式、视图、控制器）的设计模式，您创建的每个类都需要整齐地适合这些类别中的一个且只有一个。

模型对象保存数据。

视图对象对用户可见，并接受用户的输入。（输入是按下按钮或在屏幕上滑动手指）

控制器负责编排模型和视图之间的对话。

老实说，这是一个相当基本的概念。如果您不熟悉它，我建议您查看其他一些资源。如果您对这些基本原理有深入的了解，您将对您的编程体验感到更加满意。

[http://www.bignerdranch.com/book/ios_programming_the_big_nerd_ranch_guide_rd_edition_](http://www.bignerdranch.com/book/ios_programming_the_big_nerd_ranch_guide_rd_edition_)是一本很棒的书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:07:40.283

视图控制器是显示内容和支持应用程序的数据模型之间的一种中间人。

[这是一个完整的描述](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)。

# python-2.7 - 由于“ImportError: No module named parse”而无法安装 pip

> ID：15011205
> 
> 赞同：2
> 
> 时间：2013-02-21T20:05:17.237
> 
> 标签：python-2.7, pip

我一直在尝试为 python 2.7 导入 pip，但似乎我缺少 parse 模块。我已经安装了easy_install，我正在尝试使用pip 安装noise-1.1.1。但是 pip 不想安装。

这就是它的样子。

```
c:\Python27>python setup.py install
Traceback (most recent call last):
  File "setup.py", line 5, in <module>
    from setuptools import setup
  File "c:\Python27\lib\site-packages\distribute-0.6.35-py2.7.egg\setuptools\__i
nit__.py", line 2, in <module>
    from setuptools.extension import Extension, Library
  File "c:\Python27\lib\site-packages\distribute-0.6.35-py2.7.egg\setuptools\ext
ension.py", line 5, in <module>
    from setuptools.dist import _get_unpatched
  File "c:\Python27\lib\site-packages\distribute-0.6.35-py2.7.egg\setuptools\dis
t.py", line 6, in <module>
    from setuptools.command.install import install
  File "c:\Python27\lib\site-packages\distribute-0.6.35-py2.7.egg\setuptools\com
mand\__init__.py", line 8, in <module>
    from setuptools.command import install_scripts
  File "c:\Python27\lib\site-packages\distribute-0.6.35-py2.7.egg\setuptools\com
mand\install_scripts.py", line 3, in <module>
    from pkg_resources import Distribution, PathMetadata, ensure_directory
  File "c:\Python27\lib\site-packages\distribute-0.6.35-py2.7.egg\pkg_resources.
py", line 17, in <module>
    from urllib.parse import urlparse, urlunparse
ImportError: No module named parse 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T20:20:43.533

您的`distribute`安装不正确；出于某种原因，python 2to3 翻译已在其上运行（仅在使用 Python 3 安装时应该自动发生）。

该`urllib.parse`库是 Python 2 中使用的库的 Python 3 等效项`urlparse`。

最好的办法是删除错误安装的版本（按照[卸载说明](https://pypi.python.org/pypi/distribute#uninstallation-instructions)），然后运行[`distribute_setup.py`脚本](https://pypi.python.org/pypi/distribute#distribute-setup-py)。

# java - 如何验证两种账户？

> ID：15011206
> 
> 赞同：0
> 
> 时间：2013-02-21T20:05:22.353
> 
> 标签：java

程序是否可以验证用户输入的帐户凭据是否属于某种帐户？如果是，如何？例如：

数据库

```
username                      password
jake (admin)                   qwerty
anna (student)                 asdf 
```

如果用户输入 jake 和 qwerty 作为登录凭据，那么他将能够访问管理菜单，并且当他使用学生帐户 anna 和 asdf 时，他将能够访问学生菜单。

登录按钮：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
    // TODO add your handling code here:
    //str = JOptionPane.showInputDialog(this, "Enter id number: ");
    user = jTextField1.getText();
    pass = jPasswordField1.getPassword();
    login();
} 
```

功能

```
private void login() {

    try {
        if ((user != null)&&(pass != null)) {
            sql = "Select * from users_table Where username='" + user + "' and password='" + pass + "'";
            ResultSet rs = stmt.executeQuery(sql);
            if( rs.next()) {
                JOptionPane.showMessageDialog(null, "A basic JOptionPane message dialog");
            } else {
                //in this case enter when  result size is zero  it means user is invalid
            }
        }
    } catch (SQLException err) {
        JOptionPane.showMessageDialog(this, err.getMessage());
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:08:29.273

Gian，通常在您的用户数据库中有某种“角色”列。

例如：

```
username      password       role
jake          qwerty         admin
anna          asdf           student 
```

当您在结果集中获得结果时，请从表中读取“角色”字段并根据该字段进行功能差异。

```
 ResultSet rs = stmt.executeQuery(sql);
        if( rs.next()) {
            if ("admin".equals(rs.getString("role")) {
                 // ...
            } else { 
                 // ...
            }
            JOptionPane.showMessageDialog(null, "A basic JOptionPane message dialog");
        } else {
            //in this case enter when  result size is zero  it means user is invalid
        } 
```

祝你好运！

PS注意SQL注入攻击！！如果我按如下方式输入用户名会发生什么？你怎么能防止它呢？

```
'; delete from users_table; 
```

# sql - Sybase - 使用 IN 子句的参数

> ID：15011207
> 
> 赞同：2
> 
> 时间：2013-02-21T20:05:23.280
> 
> 标签：sql, stored-procedures, parameters, sybase, optional-parameters

我需要一种在 Sybase 中执行以下模式的方法：

SELECT * FROM tbl WHERE x IN (@list)

选择将是从 Web 表单传递值的存储过程的一部分。我想允许用户为每个字段输入 0 到多个搜索键，其中输入的多个值由某个分隔符分隔。目前我可以处理 0 到 1 个键，但不能处理 >1。

我一直在尝试为此找到一个类似于上面伪 SQL 的优雅解决方案，虽然我发现其他 DB 似乎有内置的支持方式（例如数组），但它似乎没有一个简单的Sybase 的答案。

任何帮助，将不胜感激。如果更多细节有帮助，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T07:55:38.890

试试这个方法：

```
declare @list varchar(100)

select @list = '1,2,3,4,5'

exec('SELECT * FROM tbl WHERE x IN ('+@list+')') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T20:07:06.283

您不能在 SQL 中真正做到这一点。最好的选择是进行字符串比较：

```
select *
from tbl
where ','+@list+',' like '%,'+x+',%' 
```

或者，如果您将语句创建为动态 SQL，则可以将该列表合并到 SQL 查询字符串中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-28T19:18:08.177

您可以使用子选择和`sa_split_list`系统过程将列表拆分为单独的值。

[文档](http://dcx.sybase.com/1200/en/dbreference/sa-split-list-sysproc.html)摘录：

```
CREATE PROCEDURE ProductsWithColor( IN color_list LONG VARCHAR )
BEGIN
  SELECT Name, Description, Size, Color
  FROM Products
  WHERE Color IN ( SELECT row_value FROM sa_split_list( color_list ) )
END;
go

SELECT * from ProductsWithColor( 'white,black' ); 
```

或使用`INNER JOIN`代替`WHERE`过滤

```
 SELECT Name, Description, Size, Color
  FROM Products
  INNER JOIN sa_split_list( color_list ) FILTER ON FILTER.row_value = Products.Color 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T20:11:38.623

我刚刚用 php 和 mysql 回答了一个非常相似的问题，但我觉得答案在这里同样适用，所以我将其复制/粘贴。

我只是在 Visual Studio 中处理了同样的问题。首先，我创建了一串参数以添加到 SQL 语句中。您只需要处理问号 (?)，我所做的很多事情都超出了您的需要：

```
string[] inClause = new string[keywordTerms.Length];

for (int i = 0; i < keywordTerms.Length; i++)
    inClause[i] = ":keyword" + i.ToString("00"); 
```

然后在创建我的选择时，我输入以下内容：

```
sqlStatement += "WHERE kw.keyword IN (" + String.Join(", ", inClause) + ")" 
```

最后，我在这段代码中添加了参数：

```
for (int i = 0; i < keywordTerms.Length; i++)
    cmd.Parameters.Add(inClause[i], OracleDbType.Varchar2, 20, "keyword").Value = keywordTerms[i]; 
```

希望有帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-26T07:16:01.093

不确定是否为时已晚，但这是我在遇到类似用例时发现的，它确实对我有帮助。

[[1]：https://stackoverflow.com/questions/11101106/sybase-use-parameter-as-where-clause](https://stackoverflow.com/questions/11101106/sybase-use-parameter-as-where-clause)

干杯

# http - POST 时无法解析主机

> ID：15011211
> 
> 赞同：0
> 
> 时间：2013-02-21T20:05:36.773
> 
> 标签：http, tcp, unreal-development-kit, unrealscript

我在尝试发布到服务器时遇到了障碍。我什至使用以下 Opened() 创建了 TCPLink 类的子类（GET 函数有效）

```
event Opened()
{  
    //let the php file know what's coming
    WorldInfo.Game.Broadcast(self, "REQUEST TEXT: " $ RequestText);
    if(bGetData){
        SendText("GET /"$TargetPath$"?"$RequestText$" HTTP/1.0"$chr(13)$chr(10));
    }else{
        SendText("POST /"$TargetPath$" HTTP/1.0"$chr(13)$chr(10));
        WorldInfo.Game.Broadcast(self, "SENDING POST");
        `log("---------------------------SENDING POST-------------------------");
    }
    SendText("Host: "$TargetHost$chr(13)$chr(10));
    SendText("User-Agent: HTTPTool/1.0"$Chr(13)$Chr(10));
    SendText("Content-Type: application/x-www-form-urlencoded"$chr(13)$chr(10));
    SendText("Content-Length: "$len(RequestText)$Chr(13)$Chr(10));
    SendText(chr(13)$chr(10));
    //send securitykey, command and params for php to use
    SendText(RequestText);
    SendText(chr(13)$chr(10));
    SendText("Connection: Close");
    SendText(chr(13)$chr(10)$chr(13)$chr(10));
} 
```

我知道它尝试发送帖子（我看到广播和日志消息），但日志显示此错误：

```
[0042.56] ScriptLog: <!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>301 Moved Permanently</title>
</head><body>
<h1>Moved Permanently</h1>
<p>The document has moved <a href="http://hosting.zymic.com/forum-spam">here</a>.</p>
</body></html> 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T08:51:03.200

由于垃圾邮件问题，您的托管公司似乎关闭了您的网站？多次发送这样的请求可能会将您标记为垃圾邮件发送者。

# php - yammer 消息 json 格式

> ID：15011219
> 
> 赞同：0
> 
> 时间：2013-02-21T20:06:12.403
> 
> 标签：php, message, yammer

我正在尝试使用 PHP 向 Yammer 发布消息。但是，我找不到所需的消息 JSON 格式。当我使用这段代码时

```
$data=array('body'=>'test from API','group_id'=>'xyz');
$json=json_encode($data); 
```

它说`{"body":["Please include a message"]}`

'body' 和 'message' 有什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-24T16:57:13.397

以下函数是一个示例，展示了如何将组 id 添加到 json 有效负载以发送到 yammer。

```
function postMessage($token_, $message_, $group_id_) {

          $result_ = array() ;
          $result_['token'] = $token_ ;
          $result_['message'] = $message_ ;
          $associativeArray = true ;

          $payloadArray_ = array() ;
          $payloadArray_['body'] = $message_ ;
          if ( $group_id_ > 0 ) {
                  $payloadArray_['group_id'] = $group_id_ ;
          }
          try {
                  $curl_ = curl_init() ;
                  $headers = array() ;
                  $headers[] = "Authorization: Bearer " . $token_ ;
                  $headers[]='Content-Type: application/json' ;
                  $url = 'https://www.yammer.com/api/v1/messages.json' ;
                  curl_setopt($curl_, CURLOPT_URL, $url);
                  curl_setopt($curl_, CURLOPT_POST, true);
                  curl_setopt($curl_, CURLOPT_POSTFIELDS, json_encode( $payloadArray_));
                  curl_setopt($curl_, CURLOPT_RETURNTRANSFER, 1);
                  curl_setopt($curl_, CURLOPT_HTTPHEADER, $headers);
                  $response = curl_exec($curl_);
                  $result_['response'] = json_decode($response,$associativeArray) ;
          } catch ( Exception $exception ) {
                  error_log ( $exception->getMessage() ) ;
                  $result_['exception'] = $exception->getMessage() ;
          }
          return $result_ ;
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-18T01:17:57.070

您收到错误是因为您没有指定有效负载是 JSON。您需要添加以下标头： Content-Type: application/json

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T00:07:03.940

看看这个示例 - 很容易实现 [https://gist.github.com/aaronroe/3064754](https://gist.github.com/aaronroe/3064754)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T14:36:16.903

我能够通过将主体包含在卷曲手柄本身中来解决这个问题。这对我有用

```
 $curl_handle2="https://www.yammer.com/api/v1/messages.json?access_token=<<accesstoken>>&body=TestingfromAPI&group_id=<<groupid>>";
    $ch2 = curl_init();
    curl_setopt($ch2, CURLOPT_URL, $curl_handle2);
    curl_setopt($ch2, CURLOPT_POST, true);
    $response2 = curl_exec($ch2); 
```

# arrays - c#“索引超出了数组的范围。”

> ID：15011223
> 
> 赞同：0
> 
> 时间：2013-02-21T20:06:20.923
> 
> 标签：arrays, indexing

试图解决我在请求中使用数组信息时遇到的这个问题。

这是我写的代码：

```
public int[] custid = new int[] {};

_request2.CustID = custid[_response.Customers[3].CustID]; 
```

现在在调试程序并遍历上述行的每个部分之后，一切都是正确的，但是当我尝试运行程序时，它给了我错误“索引超出了数组的范围”。

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:07:25.877

您分配了一个空数组。然后您尝试访问空数组的元素。

您需要在数组中有元素，例如：

```
public int[] custid = new int[10]; 
```

或者

```
public int[] custid = new int[] { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 }; 
```

如果您正在寻找更灵活的东西（例如能够添加和删除元素），我建议您列出一个列表。

# javascript - 选中下拉选择中的复选框

> ID：15011227
> 
> 赞同：0
> 
> 时间：2013-02-21T20:06:31.983
> 
> 标签：javascript, html

我正在寻找一种在从下拉列表中进行选择时自动检查复选框的方法。HTML 代码如下所示：

```
<table>
    <tr>
        <td>
            <input type="checkbox" name="check1" />Process 1:</td>
        <td>
            <select id="process1" name="process1">
                <option value="null">--Select Process--</option>
                <option value="NameA">NameA</option>
                <option value="NameB">NameB</option>
                <option value="NameC">NameC</option>
            </select>
        </td>
    </tr>
</table> 
```

如果可能，如果用户返回并选择`--Select Process--`，复选框将取消选中

Javascript 代码会是什么样子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:12:20.980

```
$(function(){
    $('#process1').change(function() {
        var selected = $('#process1 option:selected');
        if (selected.val() == "null") {
            $('input[name="check1"]').prop('checked', false);
        }
        else {
            $('input[name="check1"]').prop('checked', true);
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T20:16:39.363

尝试这个：

[演示](http://jsfiddle.net/edz8B/1/)

JS

```
function setChk(value){
    var chk = document.getElementById('check1');
    chk.checked = (value != 'null');
} 
```

HTML

```
<table>
    <tr>
        <td>
            <input type="checkbox" name="check1" id="check1"/>Process 1:</td>
        <td>
            <select id="process1" name="process1" onchange="setChk(this.value);">
                <option value="null">--Select Process--</option>
                <option value="NameA">NameA</option>
                <option value="NameB">NameB</option>
                <option value="NameC">NameC</option>
            </select>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T20:20:09.897

jQuery 会更简单，但在 Javascript 中，请尝试在选择中添加 onchange 属性：

```
onchange="checkValue()" 
```

然后在javascript中：

```
function checkValue() {
   var e = document.getElementById("process1");
   var value = e.options[e.selectedIndex].value;
   if (value == "null") {
      document.getElementById("check1").checked=false;
   } else {
      document.getElementById("check1").checked=true;
   }
} 
```

只需在复选框 id="check1" 中添加一个 id

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T20:20:32.153

[这个](https://stackoverflow.com/a/15011401/1292492)答案真的很酷！

但如果你打开它会使用 jQuery，那么代码将如下所示：

```
jQuery(document).ready( function() {
    jQuery('#process1').on('change', function() {
        var selectedVal = jQuery(this).find('option:selected').val(),
            checkbox = jQuery('input[name="check1"]');
        if (selectedVal !== 'null') {
            checkbox.attr('checked', 'checked');
        } else {
            checkbox.removeAttr('checked');
        }
    });
}); 
```

[演示](http://jsfiddle.net/NhGr5/1/)

# html - 如何从 iframe 内部删除多余的边距？

> ID：15011230
> 
> 赞同：10
> 
> 时间：2013-02-21T20:06:37.370
> 
> 标签：html, internet-explorer, firefox, iframe

我目前正在网站上开发混合媒体的旋转蒙太奇。大约有 5 个图像/视频将在网站上轮流出现。该站点还使用 Ektron CMS，因此我无法确定蒙太奇中的哪些位置是图像，哪些是视频。（视频托管在 YouTube 上。）

所以，我的问题是视频加载时与 iframe 的内边缘完全对齐，但图像在 iframe 内以大约 10px 的微小边距加载，这*非常*糟糕，因为我们的网站布局非常精确，并且略有不同即使是**一个**像素也会把它搞砸。这仅出现在 FireFox 和 IE 中。我已经在 Chrome 和 Safari 中进行了测试，并且效果很好。这 4 款浏览器是我们官方支持的仅有的 4 款。

这是我的 HTML：

```
<head>
    <body>
      <div id="mainImage">
        <iframe scrolling="no" frameborder="0" runat="server" id="MainImage1"
        src="http://www.youtube.com/embed/u1zgFlCw8Aw?wmode=transparent">
        IFRAMES do not work in your browser</iframe>
        <iframe scrolling="no" frameborder="0" runat="server" id="MainImage2"
        src="images/default/mainImage/mainImage_02.jpg">
        IFRAMES do not work in your browser</iframe>
      </div>
    </body>
</head 
```

CSS如下：

```
#mainImage iframe{position:absolute; top:0; left: 0; padding:12px 0 0 12px; display:block;}
#mainImage iframe html, body{ margin:0px; padding:0px; border:0px;} 
```

这是网站上唯一会积极影响 iframe 显示方式的代码。

所以，我的问题是，我怎样才能摆脱 iframe 内的那个边距，为什么它只显示在 FireFox 和 IE 中？？？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-06-26T08:48:54.653

它似乎`marginheight`也`marginwidth`能完成这项工作。请参阅[https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe)。

我经常使用：

```
<iframe src="..."
 marginwidth="0"
 marginheight="0"
 hspace="0"
 vspace="0"
 frameborder="0"
 scrolling="no"></iframe> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T20:09:47.583

控制它的是 Iframe 内容的主体，而不是 Iframe 本身。

在 iframe 页面上使用[CSS 重置](http://developer.yahoo.com/yui/reset/)（它也不会对父页面造成伤害），一切都会好起来的。

# networking - 路由器可以作为“纯”交换机运行吗？

> ID：15011232
> 
> 赞同：-1
> 
> 时间：2013-02-21T20:06:50.423
> 
> 标签：networking

最近，我通过执行以下操作将备用 Lynksys 路由器配置为像交换机一样工作：

1.  在与 DHCP 服务器（路由器）相同的网络上为无线路由器（接入点/交换机）提供一个 IP 地址。
2.  禁用 DHCP、DNS 和防火墙。
3.  插入 4 个 LAN 端口之一（不是 WAN 或 Internet 端口）。

使用此配置，Linksys 路由器的工作方式类似于交换机。那么路由器=具有额外功能的交换机吗？

由于路由器和交换机在不同的层上运行，即使采用上述配置，假设路由器仍在处理数据包和 IP 路由，而交换机处理 MAC 地址/帧，是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:14:35.370

是的，典型的 SoHo“无线路由器”是具有附加功能的交换机。在典型的 SoHo 路由器内部，您会发现一个以太网交换芯片连接它们的 LAN 端口。切换通常在软件中为其无线接口完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:24:15.157

我的理解是，交换机通常连接网络内的单元，而路由器连接网络。因此，您无法将集线器/交换机连接到宽带调制解调器，因为调制解调器位于外部网络上，因此需要可以进行 NAT 的路由器。

关于堆栈交换机在哪些层工作，传统上您是正确的，因此路由器和交换机之间存在部分差异。然而，像往常一样，事情变得复杂了。维基百科说，更复杂的交换机会在不同级别打开数据包。[http://en.wikipedia.org/wiki/Network_switch](http://en.wikipedia.org/wiki/Network_switch)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-12T13:58:55.117

“无线路由器”实际上是多个设备：以太网交换机、路由器、无线接入点 (WAP)，也许还有防火墙（我不确定防火墙。）。

# ant - ant 的“修改”选择器默认将其缓存写入哪里？

> ID：15011233
> 
> 赞同：1
> 
> 时间：2013-02-21T20:06:53.437
> 
> 标签：ant

我想用 Ant 1.8.2 中的“修改”选择器调试一些行为。

[这个页面](http://ant.apache.org/manual/Types/selectors.html#modified)描述了大量的垃圾，但没有描述它存储缓存的位置。在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:53:10.503

该文档指出默认缓存是“propertyfile”。它还指出缓存文件的默认名称是**cache.properties**。

最后，它还提供了一个示例，概述了所有默认设置，演示了如何更改这些设置。

```
<copy todir="dest">
    <fileset dir="src">
        <modified update="true"
                  seldirs="true"
                  cache="propertyfile"
                  algorithm="digest"
                  comparator="equal">
            <param name="cache.cachefile"     value="cache.properties"/>
            <param name="algorithm.algorithm" value="MD5"/>
        </modified>
    </fileset>
</copy> 
```

# objective-c - 目标 C @interface ... {...}

> ID：15011234
> 
> 赞同：0
> 
> 时间：2013-02-21T20:06:57.363
> 
> 标签：objective-c

问题在标题中，但我不知道是否清楚。我必须做一份报告，我想知道如何`@interface`在 .h 文件中调用声明的那一部分：

```
@interface NameOfTheObject ; TYPE < ??? > { instance variables } 
```

我不知道如何命名`???`。我希望它更容易理解，我希望你能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:09:40.580

它被称为协议。你的类在这样声明时所做的称为*采用*或*遵守*协议。

# email - 与 MS Exchange 同步邮件

> ID：15011235
> 
> 赞同：0
> 
> 时间：2013-02-21T20:06:59.063
> 
> 标签：email, synchronization, exchange-server

这里有没有人有使用 Microsoft Exchange 的经验？

我有一台 PC、MAC、iPhone 和 iPad。我有一个工作帐户和两个个人帐户。

使用 MS Exchange 是否允许我在所有设备之间同步所有内容？

如果我打开一个 MS Exchange 帐户，我可以同步现有的电子邮件吗？

我试图在网上找到这些信息，但比预期的要难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T08:35:52.960

是的，我自己正在使用三种不同的设备通过 microsoft exchange 访问电子邮件、联系人、日历。

也可在 [http://social.technet.microsoft.com/wiki/contents/articles/1151.exchange-activesync-overview.aspx获得参考](http://social.technet.microsoft.com/wiki/contents/articles/1151.exchange-activesync-overview.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:33:01.023

是的，您可以通过 Exchange 跨设备同步所有邮件、联系人和日历。iPhone 和 iPad（以及 Android 设备）支持 ActiveSync（这是一种支持移动同步的 Microsoft 技术）。

当您创建 Exchange 帐户时，现有电子邮件不会自动转移到其中（即，您的邮件应用程序中已有的任何内容都不会自动转移到 Exchange 帐户中）。相反，您需要迁移消息。一些提供商会为您提供服务，或者您可以通过在您的电子邮件应用程序中导出重要邮箱来手动完成此操作。

# node.js - 当 HTTP 在运行一段时间后连接到其他站点时，Node.js 应用程序开始超时 (ETIMEDOUT)

> ID：15011239
> 
> 赞同：7
> 
> 时间：2013-02-21T20:07:17.083
> 
> 标签：node.js, request

我以非常标准的方式使用请求模块连接到我的 node.js 应用程序中的其他网站：

```
Network.prototype.httpRequest = function(url, method, params, headers, callback)
{
    var qs = typeof params === 'string' ? params : querystring.stringify(params || {}),
        config = {
            'method': (method || 'get').toUpperCase(),
            'url': url,
            'timeout': this.app.api.settings.http.timeout_outbound
        };
    if(config.method === 'GET')
    {
        config.url += '?' + qs;
    }
    else
    {
        config.body = qs;
    }

    request(config, callback);
}; 
```

在我的应用程序运行几个小时后，此功能开始超时 - 而不仅仅是一个网站。它开始无法`ETIMEDOUT`随机连接 ( )，没有任何可辨别的模式。

我的第一个显而易见的猜测是，一定有某种东西以某种方式阻塞/干扰了网络连接。我的应用程序中还有很多其他“移动部件”（例如，通过 Mongoose 连接到 Mongo，通过 Elastical 连接到 ElasticSearch 等），所以可以想象其中一个是原因……但显然，它是选择性地禁用其他模块并等待 6 小时以查看问题是否消失，这并不是一个真正的选择...

我正在监视网络流量（通过 OSX、FWIW 上的 iStatMenus pro）并且没有看到来自节点的任何异常/持久流量。

有没有其他方法可以深入研究可能阻碍/干扰我的流量的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:04:04.633

您是否尝试过[将keep-alive设置](http://nodejs.org/api/http.html#http_request_setsocketkeepalive_enable_initialdelay)为true？当没有接收到数据时，听起来连接超时（因为您已明确设置超时）。我在创建套接字服务器/客户端解决方案时遇到了类似的问题，这就是修复。

（另外，我可能误解了这个问题）

# python - 是否可以替换 Suds/python 中的模式位置？

> ID：15011240
> 
> 赞同：2
> 
> 时间：2013-02-21T20:07:21.667
> 
> 标签：python, wcf, soap, wsdl

我正在尝试访问在反向代理/重定向后面托管的 WCF 服务。WCF 服务报告错误`schemaLocation`，具体取决于它实际上是从哪台机器提供服务的。例如，我得到这样的东西：

```
<wsdl:types>
<xsd:schema targetNamespace="http://tempuri.org/Imports">
<xsd:import schemaLocation="http://badhost1.com/service.svc?xsd=xsd0" namespace="http://tempuri.org/"/>
<xsd:import schemaLocation="http://badhost1.com/service.svc?xsd=xsd1" namespace="http://schemas.microsoft.com/2003/10/Serialization/"/>
</xsd:schema>
</wsdl:types> 
```

现在，它不应该`http://badhost1.com`，它应该是`http://goodhost.com`。如果我将 xsd 指向 goodhost 版本，我可以在浏览器中打开它——显然 badhost 版本不起作用。

有没有办法用正确的端点替换这些坏端点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:21:24.640

事实证明可以创建[插件](https://fedorahosted.org/suds/wiki/Documentation#PLUGINS)。这个很简单：

```
import re
from suds.plugin import DocumentPlugin

class FixUrls(DocumentPlugin):
    def loaded(self, context):
        context.document = re.sub(r'badhost\d', 'goodhost', context.document) 
```

然后它被称为la：

```
client = Client(url, plugins=[plugin]) 
```

仅此而已！

# python - 使用“by”参数为 pandas 直方图添加标题

> ID：15011245
> 
> 赞同：0
> 
> 时间：2013-02-21T20:07:30.767
> 
> 标签：python, pandas

如果使用“by”参数，如何在 Series 上使用 pandas hist 函数创建的直方图添加标题？

对于简单的直方图，不存在任何问题。因此，以下工作完美：

```
In [115]: runELMLearning.utime.hist()
Out[115]: <matplotlib.axes.AxesSubplot at 0x20aaa590>

In [116]: plt.title("fooo")
Out[116]: <matplotlib.text.Text at 0x228b8550> 
```

但是，当使用 by 子句时，这不再起作用：

```
In [117]: runELMLearning.utime.hist(by=runELMLearning.state)
Out[117]: 
array([[Axes(0.1,0.763636;0.222222x0.136364),
        Axes(0.388889,0.763636;0.222222x0.136364),
        Axes(0.677778,0.763636;0.222222x0.136364)],
       [Axes(0.1,0.559091;0.222222x0.136364),
        Axes(0.388889,0.559091;0.222222x0.136364),
        Axes(0.677778,0.559091;0.222222x0.136364)],
       [Axes(0.1,0.354545;0.222222x0.136364),
        Axes(0.388889,0.354545;0.222222x0.136364),
        Axes(0.677778,0.354545;0.222222x0.136364)],
       [Axes(0.1,0.15;0.222222x0.136364),
        Axes(0.388889,0.15;0.222222x0.136364),
        Axes(0.677778,0.15;0.222222x0.136364)]], dtype=object)

In [118]: plt.title("fooo")
Out[118]: <matplotlib.text.Text at 0x13612b10> 
```

即使它没有表示任何错误，标题也会被默默地忽略。

我做的另一个奇怪的观察是，当我先创建一个图形，然后使用 hist 函数时，在 by 参数的情况下，第一个图形被忽略并且 hist 函数创建一个新的图形，我找不到的 gca matplotlib。对于简单的直方图再次没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T08:02:06.910

好的，我自己找到了这个：我需要使用 pyplot 中的 suptitle 为整个图形而不是单个轴添加标题，子图中的不同直方图就是这种情况。

[http://matplotlib.1069221.n5.nabble.com/title-when-using-subplot-td22151.html](http://matplotlib.1069221.n5.nabble.com/title-when-using-subplot-td22151.html)

# maven - Maven：存储库 ID 的含义

> ID：15011250
> 
> 赞同：16
> 
> 时间：2013-02-21T20:07:46.863
> 
> 标签：maven

在我的 POM 文件中，我指定了两个存储库：

```
<repositories>
    <repository>
        <id>myid</id>
        <url>http://url1</url>
    </repository>
    <repository>
        <id>myid</id>
        <url>http://url2</url>
    </repository>
</repositories> 
```

因此，从 Maven 文档中，我得到的印象是元素应该与条目`id`交叉引用，以指定身份验证信息。就我而言，两者都需要相同的身份验证数据`settings.xml` `server`；这就是为什么我对两者都使用相同的原因。`http://url1``http://url2``id`

尽管如此，Maven 还是抱怨说`id`元素必须是唯一的。

是什么赋予了？`id`该元素的确切用途是什么？我（肯定）知道 Maven 使用它来获取身份验证数据——这就是为什么当我只指定一个存储库时一切正常的原因。为什么我必须复制我的身份验证数据？我错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T04:56:10.370

ID 必须是唯一的。在您的 settings.xml 中使用 2 个登录配置。

# jquery - 平稳运动

> ID：15011253
> 
> 赞同：1
> 
> 时间：2013-02-21T20:08:02.547
> 
> 标签：jquery, jquery-animate, game-physics

我正在尝试使用 jQuery 和 d pad 重新创建旧的马里奥游戏，我在让他跳起来和跌落一定量时遇到了麻烦，而右/左仍然平稳移动。到目前为止，这是我的项目：http: [//jsfiddle.net/Zeaklous/NpKgc/1/](http://jsfiddle.net/Zeaklous/NpKgc/1/)

```
$(document).ready(function () {
$(document).keydown(function (key) {
    switch (parseInt(key.which, 10)) {
        case 38:
            $(".mario").animate({
                top: "-=50px"
            });
            $(".mario").animate({
                top: "+=50px"
            });
            break;
        default:
            break;
        case 83:
            $(".mario").addClass("crouching");
            $('.mario').attr('src', 'https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcSstp0TMfI46ImPw3Ynoq8N64Trn9ew70Dzh8NR4u4VLm40nccV');
            break;
    }
    });
});
setInterval(movePlane, 20);
var keys = {};
$(document).keydown(function (e) {
    keys[e.keyCode] = true;
});
$(document).keyup(function (e) {
    delete keys[e.keyCode];
});
function movePlane() {
    for (var direction in keys) {
        if (!keys.hasOwnProperty(direction)) continue;
        if (direction == 37) { //left
            $(".mario").animate({
                left: "-=5"
            }, 0);
            if (!$('.mario').hasClass('flipped')) {
                $(".mario").toggleClass("flipped");
            }
        }
        if (direction == 39) { //right
            $(".mario").animate({
                left: "+=5"
            }, 0);
            if ($('.mario').hasClass('flipped')) {
                $(".mario").toggleClass("flipped");
            }
        }
        if (direction == 40) { //down 
            if (!$(".mario").hasClass(!"crouching")) {
                $(".mario").toggleClass("crouching");
                $('.mario').attr('src', 'https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcSstp0TMfI46ImPw3Ynoq8N64Trn9ew70Dzh8NR4u4VLm40nccV');
            }
        }
    }
} 
```

关于我如何做到这一点的任何想法？如图所示，它在跳跃动作完成后向侧面移动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:17:45.217

你的动画语句正在发生冲突。并且由于您已经在使用间隔，因此无需对左右使用 animate ：

[http://jsfiddle.net/NpKgc/3/](http://jsfiddle.net/NpKgc/3/)

```
 if (direction == 37) { //left
        $(".mario").css({
            left: "-=2"
        });
        if (!$('.mario').hasClass('flipped')) {
            $(".mario").toggleClass("flipped");
        }
    }
    /*if (direction == 38) {//up
        $(".mario").animate({top: "-=5"}, 0);
    }*/
    if (direction == 39) { //right
        $(".mario").css({
            left: "+=2"
        });
        if ($('.mario').hasClass('flipped')) {
            $(".mario").toggleClass("flipped");
        }
    } 
```

# bash - 是否可以使用 bash 或期望脚本同时或一个接一个地运行两个程序？

> ID：15011254
> 
> 赞同：0
> 
> 时间：2013-02-21T20:08:03.947
> 
> 标签：bash, scripting, expect, wireshark, tcpdump

我基本上有两行代码，它们是：

```
tcpdump -i eth0 -s 65535 -w - >/tmp/Captures

tshark -i /tmp/Captures -T pdml >results.xml 
```

如果我在单独的终端中运行它们，它工作正常。

但是我一直在尝试创建一个简单的 bash 脚本来同时执行它们，但是没有运气。Bash 脚本如下：

```
#! /bin/bash
tcpdump -i eth0 -s 65535 -w - >/tmp/Captures &

tshark -i /tmp/Captures -T pdml >results.xml & 
```

如果有人可以帮助让它工作或让它“运行 tcpdump 直到按下一个键，然后运行 ​​tshark。然后当再次按下一个键时关闭。”

我只有一点 bash 脚本编写经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:35:21.440

需要分别运行 tcpdump 和 tshark 吗？使用管道命令会将 tcpdump 的输出馈送到 tshark 的输入。

```
tcpdump -i eth0 -s 65535 | tshark -T -pdml > results.xml 
```

# javascript - d3条形图倒置

> ID：15011256
> 
> 赞同：11
> 
> 时间：2013-02-21T20:08:18.563
> 
> 标签：javascript, d3.js

我在 d3 中绘制了一个简单的条形图，带有垂直条：http: [//jsfiddle.net/philgyford/LjxaV/2/](http://jsfiddle.net/philgyford/LjxaV/2/)

但是，它正在向下绘制条形图，基线位于图表顶部。

我已经读过要反转它，从底部向上绘制，我应该更改`range()`y 轴上的。所以，改变这个：

```
 .range([0, chart.style('height')]); 
```

对此：

```
 .range([chart.style('height'), 0]); 
```

但是，这看起来像是在绘制图表的倒数 - 在每个条形*上方*的空间中绘制，并使条形本身（从底部绘制）透明。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-21T21:15:06.557

根据 d3 基本条形图： [http ://bl.ocks.org/mbostock/3885304](http://bl.ocks.org/mbostock/3885304)

您在反转范围方面是正确的。

此外，您的矩形应该像这样添加：

```
 .attr('y', function(d) { return y(d.percent); } )
    .attr('height', function(d,i){ return height - y(d.percent); }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-08T05:10:20.720

`svg`左上角开始的 x 和 y 坐标。您希望 y 从底部开始。下面的代码假设您要附加到一些函数，如下所示：

```
svg.selectAll('rect')
    .data(dataset)
    .enter()
    .append('rect') 
```

要使条形图按您的意愿运行，请将 y 属性设置为从`data[i]`轴上方的距离开始：

```
.attr('y', function(d) { return height - d; }) 
```

然后，您必须使距离延伸`data[i]`到轴的剩余部分。

```
.attr('height', function(d) { return d; }) 
```

就是这样！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T21:14:26.673

设置 y 属性似乎有效：

```
.attr('y', function(d){ return (height - parseInt(y(d.percent))); }) 
```

[jsfiddle在这里](http://jsfiddle.net/LjxaV/4/)

# post - 错误的按钮执行method="post"

> ID：15011259
> 
> 赞同：0
> 
> 时间：2013-02-21T20:08:22.423
> 
> 标签：post

如何防止“button1”执行 emailform.php 操作？

我的页面上有三个按钮；其中两个应该只是确保文本框不是空白的，第三个是一个“提交”按钮，应该通过 emailform.php 操作将表单结果通过电子邮件发送给我。问题是，当我单击按钮 1 以验证文本框时，它会正确执行此操作，但随后会尝试通过电子邮件发送表单。

```
<form name="surveyform" action="/emailform.php" method="post">
<button id="button1" onclick="return validate_question1()">Go to question 2</button>
<button id="button2" onclick="return validate_question2()">Go to question 3</button>
<input  name="submit" value="submit" class="submit" type="submit" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:11:49.073

试试这个——设置类型：

```
 <button type ="button" id="button1" onclick="return validate_question1()"> 
```

可能需要查看 onclick 功能。

# sql - SQL 查询（和 NSPredicate）帮助：Group By 的最小值

> ID：15011262
> 
> 赞同：0
> 
> 时间：2013-02-21T20:08:36.073
> 
> 标签：sql, sqlite, core-data, nspredicate

这可能是一个非常初学者的 sql 语句，但由于某种原因，我在为这个简单的表编写查询时遇到了困难：

```
id  name    value
1   Felix   1
2   Bob     2
3   Charles 3
4   Mike    4
5   John    4
6   Peter   2
7   Felix   2
8   Felix   3 
```

这是一个简单的表格。我想按名称分组，每个组都有一个最小值。例如查询应该返回：

```
1 Felix 1
2 Bob 2
3 Charles 3
4 Mike 4
5 John 4 
6 Peter 2 
```

我试过：

`SELECT * FROM TABLE GROUP BY name HAVING min(value);`

但它不起作用。

如果您可以在 CoreData 中给我一个 NSPredicate 也可以完成此操作，则可以加分。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:14:07.607

```
Select min(ID), Name, min(value)
From yourtable
Group by  name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T20:19:12.950

您还可以使用子查询和`JOIN`. 子查询获取`min(value)`for each`name`然后将其加入表中：

```
select t1.id,
  t1.name,
  t1.value
from yourtable t1
inner join
(
  select name, min(value) MinVal
  from yourtable
  group by name
) t2
  on t1.name = t2.name
  and t1.value = t2.minval
order by t1.id 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/c6f04/4)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T10:12:10.853

这是一个 NSFetchRequest 版本

```
NSFetchRequest* request = [NSFetchRequest fetchRequestWithEntityName:@"Table"];
[request setResultType:NSDictionaryResultType];
[request setReturnsDistinctResults:YES];
NSExpression *keyPathExpression = [NSExpression expressionForKeyPath:@"value"];
NSExpression* expr = [NSExpression expressionForFunction:@"min:" arguments:@[keyPathExpression]];
NSExpressionDescription *expressionDescription = [[NSExpressionDescription alloc] init];
[expressionDescription setName:@"value"];
[expressionDescription setExpression:expr];
[expressionDescription setExpressionResultType:NSInteger32AttributeType];
[request setPropertiesToGroupBy:@[@"name"]];
[request setPropertiesToFetch:@[@"name",expressionDescription]];
NSError* error = nil;
NSArray* rez = [managedObjectContext executeFetchRequest:request error:&error]; 
```

# jquery - 如何显示隐藏动态解析 div？

> ID：15011270
> 
> 赞同：0
> 
> 时间：2013-02-21T20:09:04.890
> 
> 标签：jquery, for-loop

我有一个带有值 1、2、3、4 的选择菜单的表单。When 3 is selected 3 sub div's are visible, but with 1 select just 1 is visible.

我创建了一些简单的 span div，其中包含每个用户的输入字段

```
<span id="ticketuser1">....</span><span id="ticketuser2">....etc

$('#numOfTickets').change(function() {
                var num= $("#numOfTickets").val();

                for (var i=0;i<num;i++){ 
                    if(i>num){
                        $('#ticketuser'+i).hide();
                    } else {
                        $('#ticketuser'+i).show();
                    }
                }

        }); 
```

现在从 2 到 3 到 4 符合预期，但选择较低的数字并不能解决问题。

有小费吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T21:27:47.920

问题是您的循环永远不会到达隐藏条件，因为隐藏条件也是结束条件。

```
$('#numOfTickets').change(function() {
        var num= $("#numOfTickets").val();

        for (var i=0;i<num;i++){ 
            if(i>num){
                $('#ticketuser'+i).hide();
            } else {
                $('#ticketuser'+i).show();
            }
        }

}); 
```

您需要有两个循环和一个可以是静态或动态的变量。

在我的简单示例中，我选择将其设为静态：

```
var maxUser = 5;

$(function () {
    $('#numOfTickets').change(function () {
        var num = parseInt($(this).val())+1;
        for (var i = 1; i < num; i++) {
            $('#ticketUser' + i).show();            
        }    
        for (var j = num ; j <= maxUser; j++){
            $('#ticketUser' + j).hide();            
        }                                
    });
}); 
```

因此，如果 div 小于`maxUser`但大于`num`，则显示。

在第二个循环中，我们将所有内容隐藏在`num`.

`num`是您的值 +1，以便您的循环将抓取您打算显示的最后一个项目。

[这是一个有效的小提琴](http://jsfiddle.net/ELpuV/) 如果您希望变量是动态的并且基于页面加载时可用的选项，[那么这里是另一个示例](http://jsfiddle.net/ELpuV/1/)。如果选项是动态的，您可以轻松地从加载中添加代码以初始化`maxUser`第二个示例中的变量并将其放置在更改函数中。

# python - 使用 Python 进行 CRUD ... IndexError：元组索引超出范围

> ID：15011271
> 
> 赞同：0
> 
> 时间：2013-02-21T20:09:05.173
> 
> 标签：python, crud

我必须使用 Python 进行几次选择和更新。这种语言完全是新的，在执行以下（简单）查询时，我在语法上遇到了一些问题：

```
SELECT A.CUSTOMER_NAME,
A.CUSTOMER_CITY,
B.POPULATION
FROM
CONTRACTS AS A
JOIN CITIES AS B ON
A.CUSTOMER_CITY = B.IDENT
WHERE B.POPULATION <=500000

SELECT A.IDENT,
A.MAKE,
A.MODEL,
A.LUXURY,
B.CAR_IDENT
FROM CARS AS A
JOIN CONTRACTS AS B ON
A.IDENT = B.CAR_IDENT
WHERE LUXURY = 'Y'

UPDATE CONTRACTS
SET BASE_PRICE=1000
WHERE CONTRACT_CLASS >=10 
```

我从更新开始......我认为它的代码更短......当我执行更新语句时，我收到以下错误：

```
>'update {} set BASE_PRICE = ? where {}'.format(self._table), (row['BASE_PRICE'], >row['where']))
>IndexError: tuple index out of range 
```

这是我的方法

```
 def retrieve(self, key):
        cursor = self._db.execute('select  from {}'.format(self._table))
        return dict(cursor.fetchone())

    def update(self, row):
        self._db.execute(
            'update {} set BASE_PRICE = ? where {}'.format(self._table), 
            (row['BASE_PRICE'], row['where']))
        self._db.commit()

    def disp_rows(self):
        cursor = self._db.execute('select IDENT, CONTRACT_CLASS, BASE_PRICE from {} order 
        by BASE_PRICE'.format(self._table))
        for row in cursor:
            print('  {}: {}: {}'.format(row['IDENT'], row['CONTRACT_CLASS'], 
            row['BASE_PRICE']))

    def __iter__(self):
        cursor = self._db.execute('select * from {} order by  
        BASE_PRICE'.format(self._table))
        for row in cursor:
            yield dict(row)

    def main():
    db_cities = database(filename = 'insurance.sqlite', table = 'CITIES')
    db= database(filename = 'insurance.sqlite', table = 'CONTRACTS')
    db_cars = database(filename = 'insurance.sqlite', table = 'CARS')

    print('Retrieve rows')
    for row in db: print(row)

    print('Update rows')
    db.update({'where': 'CONTRACT_CLASS' >= 10', 'BASE_PRICE'= 1000})
    for row in db: print(row)

    print('Retrieve rows after update')
    for row in db: print(row)

Thanks in advance for your help! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:14:15.567

您在 . 之后放错了一个括号`self._table`。

```
'UPDATE {table_name} SET BASE_PRICE = {base_price} WHERE {condition}'.format(
     table_name=self._table,
     base_price=row['BASE_PRICE'],
     condition=row['where']
 ) 
```

我还做了一些代码清理。

另一个问题：你为什么不使用 ORM？

# domain-driven-design - Translation 和 AntiCorruption 层之间的实现差异

> ID：15011274
> 
> 赞同：3
> 
> 时间：2013-02-21T20:09:21.653
> 
> 标签：domain-driven-design

1.  *从概念上讲，我理解Translation*和*AntiCorruption 层*之间的区别，但就实现而言，两者之间的区别在于*Translation 层*我们没有*Facade*，也没有位于*Translation 层内**的 Service(s)*，我们也没有有一个*适配器*，而是*域代码本身*（驻留在*有界上下文*中）调用一个*翻译器*？

****   一个。如果*外部系统* **ES**实际上*是另一个应用程序的一部分，并通过**其应用程序层*并直接*从其域层*提供功能（我们的*有界上下文* **BC**需要），那么我们的**BC**应该如何请求*它需要的服务*？通过与**ES 的***应用层*通信还是通过（通过*翻译/反腐败层*）与**ES 的***域层*通信？

     *********湾。为什么当我们的**BC通过****ES 的***应用层*请求功能时，不需要*Translation/AntiCorruption 层*，因为它通过**ES 的***应用层**接收到的数据*仍然需要翻译成*领域概念*？

     *********C。如果**ES**实际上是*我们自己的应用程序的*一部分，那么我认为唯一的选择是让*我们的* **BC**通过*翻译/反腐败层*“直接”与**ES 的** *域层*通信来请求功能？********************* 

 ******** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T23:38:20.303

1.  翻译是 ACL 所做的。这些不是单独的概念。可以通过多种方式实现。重点是保护您的域免受外部系统的影响。ACL 通过将外部系统的模型转换为您的本地域模型来实现这一点。

2a. 本地 BC 应该通过应用程序服务或通过开放主机服务（基本上是一种 Web 服务）与外部 BC 通信。前一种方法只有在您同时开发两个 BC 并且您拥有实现两者的直接库时才可行。后者适用于 3rd 方 BC 或完全被服务封装的 BC。

2b。这仍然需要发生，除非两个 BC 是串联开发的并且具有共享内核。但是，我不是共享内核的忠实拥护者。

2c。你的 BC 仍然需要通过 ES 的应用服务与 ES 进行通信。它永远不应该直接进入域对象。更好的是，让 BC 调用的 Web 服务公开 ES 功能。*******

# actionscript-3 - 将燧石粒子与 AIR 一起使用。Kindle Fire (20fps) 与 iPad 2 (6fps)

> ID：15011282
> 
> 赞同：0
> 
> 时间：2013-02-21T20:09:45.660
> 
> 标签：actionscript-3, flash, mobile, air, particle-system

这是指 AS3 的燧石粒子系统。

我正在使用 AIR3.5 进行移动开发，因此我采用了 Pachinko 示例 ( [http://flintparticles.org/examples/pachinko](http://flintparticles.org/examples/pachinko) ) 并在多个设备上进行了尝试。令人惊讶的是，第一代 Kindle Fire (20fps) 比 iPad 2 (仅 6fps) 快得多。这是我第一次看到 iPad 2 输给 Kindle Fire，更不用说如此大的差距了。

知道为什么会发生这种情况吗？总体而言，使用 Flint 进行移动开发是否有任何陷阱？任何关于其他可行选择的建议将不胜感激。

谢谢你。

# jquery - 如何在弹出框自动完成中输入文本

> ID：15011289
> 
> 赞同：1
> 
> 时间：2013-02-21T20:10:05.133
> 
> 标签：jquery, twitter-bootstrap, jquery-autocomplete, textinput, popover

我有一个弹出框，它有一个按钮和一个输入文本。每当我单击特定图像时，此弹出窗口就会打开。我想让弹出框内的输入文本自动完成。

这是我现在得到的：http: [//jsfiddle.net/HhpnN/](http://jsfiddle.net/HhpnN/)

我认为我的 jQuery 函数无法识别我的 .textData 类，因为我在 img 属性（数据内容）中创建了这个输入文本。这是输入文本的创建：

```
data-content="<input type='text' class='textData' /> <input type='button' class='btn' value='Save' />" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T21:04:41.330

当您说“自动完成”时，您的意思是您希望结果在您键入时开始填充？这就是所谓的 Typeahead。您将需要使用适当的数据元素更新您的输入标签：

```
<input type='text' data-provide='typeahead' data-items='4' data-source='[&quot;thisquot;,&quot;is&quot;,&quot;an&quot;,&quot;array&quot;,&quot;or&quot;,&quot;data&quot;]'> 
```

您还需要提供用于搜索的数据集。您可以内联执行此操作，就像我在下面的示例中一样，或者通过定义源来执行此操作。

这是您的示例的更新，预先输入美国各州的名称：

[http://jsfiddle.net/dusthaines/HhpnN/3/](http://jsfiddle.net/dusthaines/HhpnN/3/)

更多详情请访问他们的网站：http: [//twitter.github.com/bootstrap/javascript.html#typeahead](http://twitter.github.com/bootstrap/javascript.html#typeahead)

# asp.net-mvc-4 - ASP.NET 活动目录搜索

> ID：15011291
> 
> 赞同：9
> 
> 时间：2013-02-21T20:10:06.533
> 
> 标签：asp.net-mvc-4, active-directory, windows-authentication, asp.net-4.5

我正在尝试使用 Windows 登录在 ASP.NET MVC 4 上创建一个 Intranet 网站。我已经成功完成了windows登录。我唯一坚持的是使用部分用户名搜索活动目录。我尝试搜索 web 和 stackoverflow 网站，但仍然找不到答案。

```
 DirectoryEntry directory = new DirectoryEntry("LDAP://DC=NUAXIS");
   string filter = "(&(cn=jinal*))";
   string[] strCats = { "cn" };
   List<string> items = new List<string>();
   DirectorySearcher dirComp = new DirectorySearcher(directory, filter, strCats,     SearchScope.Subtree);
   SearchResultCollection results = dirComp.FindAll(); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-21T20:50:05.900

您可以使用 a`PrincipalSearcher`和“按示例查询”主体进行搜索：

```
// create your domain context
using (PrincipalContext ctx = new PrincipalContext(ContextType.Domain))
{
   // define a "query-by-example" principal - here, we search for a UserPrincipal 
   // and with the first name (GivenName) of "Jinal*" 
   UserPrincipal qbeUser = new UserPrincipal(ctx);
   qbeUser.GivenName = "Jinal*";

   // create your principal searcher passing in the QBE principal    
   using (PrincipalSearcher srch = new PrincipalSearcher(qbeUser))
   { 
      // find all matches
      foreach(var found in srch.FindAll())
      {
         // do whatever here - "found" is of type "Principal" - 
         // it could be user, group, computer.....          
      }
   }
} 
```

如果您还没有 - 绝对阅读 MSDN 文章[Managing Directory Security Principals in the .NET Framework 3.5](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)，它很好地展示了如何充分利用 .NET Framework 中的新功能`System.DirectoryServices.AccountManagement`。或查看[System.DirectoryServices.AccountManagement](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)命名空间上的 MSDN 文档。

当然，根据您的需要，您可能希望在您创建的“示例查询”用户主体上指定其他属性：

*   `DisplayName`（通常：名字 + 空格 + 姓氏）
*   `SAM Account Name`- 您的 Windows/AD 帐户名称
*   `User Principal Name`- 您的“username@yourcompany.com”样式名称

您可以在 上指定任何属性`UserPrincipal`并将其用作`PrincipalSearcher`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T19:56:57.963

您当前的代码在正确的轨道上。我认为您的通配符倒置了。

考虑一下：

```
search.Filter = string.Format("(&(sn={0}*)(givenName={1}*)(objectSid=*))", lastName, firstName); 
```

# ios - internetStatus 和 hostStatus 之间的区别

> ID：15011293
> 
> 赞同：0
> 
> 时间：2013-02-21T20:10:13.420
> 
> 标签：ios, ipad, connection

我想在我的应用程序中检查互联网连接。在这样做时，我使用以下代码。internetStatus 和主机状态有什么区别。我应该使用哪个来检查 ipad 是否有互联网连接。

```
-(void) checkNetworkStatus:(NSNotification *)notice
{
    // called after network status changes
    NetworkStatus internetStatus = [internetReachable currentReachabilityStatus];
    switch (internetStatus)
    {
        case NotReachable:
        {
            //NSLog(@"The internet is down.");
            //self.internetActive = NO;
            //NSLog(@"A gateway to the host server is down.");
            //self.hostActive = NO;
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Connection Failed"
                                                            message:@"No internet connection"
                                                           delegate:nil
                                                  cancelButtonTitle:@"Exit"
                                                  otherButtonTitles:nil];
            [alert setDelegate:self];
            [alert show];
            [alert release];

            break;
        }
        case ReachableViaWiFi:
        {
            //NSLog(@"The internet is working via WIFI.");
            //self.internetActive = YES;

            break;
        }
        case ReachableViaWWAN:
        {
            //NSLog(@"The internet is working via WWAN.");
            //self.internetActive = YES;

            break;
        }
    }

    NetworkStatus hostStatus = [hostReachable currentReachabilityStatus];
    switch (hostStatus)
    {
        case NotReachable:
        {
            //NSLog(@"A gateway to the host server is down.");
            //self.hostActive = NO;
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Connection Failed"
                                                              message:@"No internet connection"
                                                             delegate:nil
                                                    cancelButtonTitle:@"Exit"
                                                    otherButtonTitles:nil];
            [alert setDelegate:self];
            [alert show];
            [alert release];

            break;
        }
        case ReachableViaWiFi:
        {
            //NSLog(@"A gateway to the host server is working via WIFI.");
            //self.hostActive = YES;

            break;
        }
        case ReachableViaWWAN:
        {
            //NSLog(@"A gateway to the host server is working via WWAN.");
            //self.hostActive = YES;

            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:16:40.663

`internetStatus`或者`hostStatus`只是实例名称，您可以使用任何名称来表示状态。但特别是如果您没有设置主机，那么您可以使用`internetStatus`它来访问互联网（如果它可以访问），默认情况下，苹果会检查互联网网关或互联网连接的互联网可用性，在这种情况下，我们不知道主机名检查互联网连接，但是您可以使用`hostStatus`特定主机的任何实例名称，您可以自己设置随机主机，例如[www.google.com](http://www.google.com)并检查它是否可访问。程序类似。

基本上状态取决于您的主机名，可以是默认的，也可以像这样自己设置；

```
hostReachable = [Reachability reachabilityWithHostName: @"www.google.com"];
[hostReachable startNotifier]; 
```

# jquery - jQuery 语法问题 - css 和多个背景定位

> ID：15011294
> 
> 赞同：0
> 
> 时间：2013-02-21T20:10:17.003
> 
> 标签：jquery, css, background

我正在尝试`<body>`使用 CSS3 的多背景属性调整两个背景之一的背景位置。我需要用 jQuery 更新一个位置，我非常卡住！我在变量中有整数，但它不起作用，我认为我的连接是错误的......

```
$('body.home').css( "background-position" , 
                    "top center, center" + bottomBackgroundOffset  ); 
```

我还需要某种侦听器（我认为这是正确的术语），以便如果窗口大小发生变化，它会触发此代码，这是因为背景图像需要更新它的位置。不要问我为什么要这样做，这是不得已而为之..！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:16:22.953

对于`resize()`做：

```
$(window).resize(function() { 
     $('body.home').css( "background-position" , "top center, center " + bottomBackgroundOffset + "px" );
}); 
```

当然你需要设置你的`var bottomBackgroundOffset;`第一个，我假设你已经在做。

有关更多信息，请参阅[API 文档](http://api.jquery.com/resize/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-12T12:23:05.483

JQuery 1.11.1 min 中的语法略有不同。它需要一个引号之间的两个 URL。backgroundSize 和 backgroundPosition 相同：

```
.css('backgroundImage', 'url(fileadmin/creusen/Creusen-Hintergrund4-L.jpg) ,       
                         url(fileadmin/creusen/Creusen-Hintergrund4-R.jpg)'); 
```

# python - 生产者和消费者如何优雅退出？

> ID：15011295
> 
> 赞同：0
> 
> 时间：2013-02-21T20:10:19.340
> 
> 标签：python, multithreading, producer-consumer

我的任务是提高进行 rpc 调用的效率。我相信我可以使用生产者和消费者的例子。生产者将得到响应，而消费者将收到的对象写入文件。

我为生产者和消费者问题编写了一个示例程序。这看起来不错的样子。但是，我的问题是消费者如何知道何时退出？

这是我的代码：

```
 5 is_exit = False
  6 product = []
  7
  8 def consumer(cond):
  9     global product
 10     global is_exit
 11
 12     while True:
 13         cond.acquire()
 14         while len(product) == 0:
 15             cond.wait()
 16         product = product[1:]
 17         print 'consume one product'
 18         cond.release()
 19
 20 def producer(cond):
 21     global product
 22     global is_exit
 23
 24     for i in range(10):
 25         cond.acquire()
 26         print 'produce one good'
 27         product.append(199)
 28         cond.notify()
 29         cond.release()
  /// I use .join() to wait all threads to finish. 
```

由于生产者只会生产 10 件商品，因此必须有某种方式通知消费者生产者不会生产任何东西，您应该退出。

任何建议都会有所帮助。非常感谢。

PS。我“优雅地”的意思是，一旦生产者告诉他没有更多的商品要生产，我希望消费者不会做任何额外的工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T20:24:57.433

生产者可以在队列中发送一个特殊的“毒丸”对象，作为没有更多数据到来并且消费者应该关闭的信号。显然，消费者必须了解毒丸（使其成为全球不变的事物）并注意它并正确处理它。

这是处理这种情况的常见模式。

# php - php限制'while'循环中发生的事情

> ID：15011306
> 
> 赞同：0
> 
> 时间：2013-02-21T20:10:59.023
> 
> 标签：php, while-loop

我有一些代码为查询的每个结果创建一个 div。我的问题是，我只希望为我限制的结果集创建相同数量的 div。

例如，这个查询产生大约 8-9 行但是，在这种情况下，如果 $busroute==2，并且只有 2 个结果匹配这个，我只想创建 2 个 div 并关闭它们。现在，正如我所拥有的，它正在为“while”循环的每次迭代创建一个 div - /div 集。

```
 <?php 

    mysql_data_seek( $result,0);
    while ($i2=mysql_fetch_array($result)) {
    $busnumber=$i2['NAME'];
    $busroute=$i2['route'];
    $busdirection=$i2['direction'];
    $timediff=$i2['TimeDiff'];
    $timestamp=$i2['TIMESTAMP'];        
    if ($busroute=='2'){
    echo "<div class='businfo'>";
    echo "<p>Bus #: ".$busnumber."<br>Direction: ".$busdirection."<br>Bus Route : ".$busroute."<br>"; 
    echo "Timestamp : $timestamp</p>";
    }
    echo "</div>";
    } 
```

?>

所以，如果$busroute==2，并且$busroute==2有两个结果，那么下面应该只输出两次。

```
 echo "<div class='businfo'>";
    echo "<p>Bus #: ".$busnumber."<br>Direction: ".$busdirection."<br>Bus Route : ".$busroute."<br>"; 
    echo "Timestamp : $timestamp</p>";
    }
    echo "</div>"; 
```

提前感谢您的帮助。

*   d -

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:26:10.933

您的代码已经符合您的要求。我认为“</div>”应该在你的 IF 里面。

代替

```
if ($busroute=='2'){
echo "<div class='businfo'>";
echo "<p>Bus #: ".$busnumber."<br>Direction: ".$busdirection."<br>Bus Route : ".$busroute."<br>"; 
echo "Timestamp : $timestamp</p>";
}
echo "</div>"; 
```

和

```
if ($busroute=='2'){
echo "<div class='businfo'>";
echo "<p>Bus #: ".$busnumber."<br>Direction: ".$busdirection."<br>Bus Route : ".$busroute."<br>"; 
echo "Timestamp : $timestamp</p>";
echo "</div>";  
} 
```

# php - 这是哪种日期格式以及如何将其转换为 JavaScript 日期？

> ID：15011307
> 
> 赞同：1
> 
> 时间：2013-02-21T20:10:59.557
> 
> 标签：php, javascript, date

这种日期格式是否有任何特定的名称和/或是否用于任何特定的编程语言？

```
2012-11-28T12:52:22+0000 
```

我需要将其转换为 JavaScript 或 PHP 日期，可能不使用字符串连接。

有人在这里做了什么：[将 Unix 时间戳转换为 JavaScript 中的时间](https://stackoverflow.com/questions/847185/convert-a-unix-timestamp-to-time-in-javascript)

这两种编程语言中的任何一种都具有这样做的预制功能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T20:16:51.200

PHP 使用 DateTime 类轻松处理这个问题：

```
$dt = new DateTime('2012-11-28T12:52:22+0000');
echo $dt->format('Y-m-d'); 
```

[看到它在行动](http://codepad.viper-7.com/rGdCfI)

[`format()`](http://www.php.net/manual/en/datetime.format.php)接受相同的参数，[`date()`](http://www.php.net/manual/en/function.date.php)因此您可以将其格式化为您需要的任何格式。

**参考**

*   [约会时间](http://www.php.net/manual/en/class.datetime.php)
*   [`date()`](http://www.php.net/manual/en/function.date.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T20:15:40.433

这是一个[ISO-8601](http://en.wikipedia.org/wiki/Iso8601)日期，在网络上变得非常普遍。

它是一种互操作性格式，受到许多框架的支持，并[在 5.1.0 版本中添加到 PHP 中](http://php.net/manual/en/function.date.php)。

在 JavaScript 中，它由[Date.toISOString()](http://www.w3schools.com/jsref/jsref_toisostring.asp)方法和[Moment.js](http://momentjs.com/)等库支持。

`Date`您可以使用其构造函数从 ISO 字符串构造 JavaScript ：

```
var date = new Date('2012-11-28T12:52:22+0000'); 
```

请注意，JavaScript 在日期方面是出了名的糟糕。它仅从本地角度或 UTC 理解日期。您提供的任何偏移量都将合并到日期中。Moment.js 正在对此进行处理。[看这里](https://github.com/timrwood/moment/issues/611)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T20:16:44.450

是的，它被称为 ISO-8601 日期。使用 PHP，您可以`date('c')`使用 JavaScript 生成它：

```
var date = new Date('2012-11-28T12:52:22+0000');
date.toISOString(); 
```

如您所见， Date() 的参数可以是这样一个字符串。

# regex - Notepad++ 可以将搜索结果保存到文本文件中吗？

> ID：15011308
> 
> 赞同：3
> 
> 时间：2013-02-21T20:11:05.190
> 
> 标签：regex, file, text, export, notepad++

我需要在成百上千的静态文件中进行相当多的正则表达式搜索/替换。我正在寻找建立一个审计跟踪，所以我至少知道哪些文件被哪些搜索/替换所触及。

我可以在 Notepad++ 中进行正则表达式搜索，它会为我提供文件名/路径和每个文件中的命中数。它还为我提供了我不太关心的#s 行。

我真正想要的是文件名/路径的单独文本文件。每个文件中的命中数将是一个很好的补充，但实际上它只是我所追求的文件名/路径的列表。

在 Notepad++ 的搜索结果窗格中，我可以右键单击并复制，但这包括所有的行#s 和代码，这太吵了，尤其是当你得到数百个匹配项时。

任何人都知道如何将这些结果仅用于文件名/路径？我追求的是：

```
/about/foo.html
/about/bar.html
/faq/2012/awesome.html
/faq/2013/awesomer.html
/foo/bar/baz/wee.html
etc. 
```

然后我可以将该文件命名为 regex_whatever_search.txt，并在其顶部包含用于搜索和替换的正则表达式。在此之下，我列出了它所触及的文件列表。

**更新**看起来最简单的事情（至少我发现）是将所有搜索结果复制到一个新的文本文件中并运行以下正则表达式：

^\t线。+$

并将其替换为空字符串。这将为您提供文件路径和命中计数，每个条目之间有很多空白空间。然后运行以下正则表达式：

\s+\n

并替换为：

\n

这将去除所有不需要的空白空间，您将得到一个不错的列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-29T08:02:27.860

The regulat expression I use for this kind of problem is

```
 ^\tLine.[0-9]*:. 
```

And it works for me

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T21:17:10.303

也许您需要强大的 unix 工具

假设您在 c:\tools\ [gnuwin32中安装了 GNUWin32](http://en.wikipedia.org/wiki/GnuWin32)

比如果您有包含该内容的 replace.bat 文件：

```
@echo off
set BIN=c:\tools\gnuwin32\bin
set WHAT=%1
set TOWHAT=%2
set MASK=%3

rem Removing quotes
SET WHAT=###%WHAT%###
SET WHAT=%WHAT:"###=%
SET WHAT=%WHAT:###"=%
SET WHAT=%WHAT:###=%

SET TOWHAT=###%TOWHAT%###
SET TOWHAT=%TOWHAT:"###=%
SET TOWHAT=%TOWHAT:###"=%
SET TOWHAT=%TOWHAT:###=%

SET MASK=###%MASK%###
SET MASK=%MASK:"###=%
SET MASK=%MASK:###"=%
SET MASK=%MASK:###=%

echo %WHAT% replaces to %TOWHAT%

rem printing matching files
%BIN%\grep -r -c "%WHAT%" %MASK%

rem actual replace
%BIN%\find %MASK% -type f -exec %BIN%\sed -i "s/%WHAT%/%TOWHAT%/g" {} + 
```

您可以使用所需的输出递归地在屏蔽文件中进行正则表达式替换

```
replace "using System.Windows" "using Nothing" *.cs 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-10T18:35:06.317

如果您有可用的 Excel 并希望避免使用正则表达式，则此方法效果很好：

1.  Ctrl+A 选择所有结果
2.  将选定的结果拖放到 Excel
3.  在第一行创建过滤器
4.  过滤掉第一列有“（空白）”的行
5.  选择剩余的行（即带有文件名的行）并将它们复制/粘贴到另一张纸或任何想要的目的地

您也可以 Ctrl+A、Ctrl+C 搜索结果，然后在 Excel 中使用粘贴选项“使用文本导入向导”，说数据是“固定宽度”并在第二个字符后放置一个换行符（删除导入期间文件名中的两个前导空格），并使用过滤器过滤掉不需要的行。

# php - 迭代对象

> ID：15011309
> 
> 赞同：0
> 
> 时间：2013-02-21T20:11:07.260
> 
> 标签：php

*   我需要一些关于 PDOStatement::commit 的帮助（来自 phpnet 手册）
*   我不明白示例 #1，因为这部分代码：

    ```
    foreach ($fruits as $fruit) {  
        $sth->execute(array(  
            $fruit->name,  
            $fruit->colour,  
            $fruit->calories,  
        )
    ); 
    ```

1#
- 它是遍历一个对象、数组还是什么？
- 我都试过了......当然，两者都会出错
- 当然， -> 运算符告诉我它是一个对象，但我仍然不明白语法。- 可以同时迭代/访问一个对象的多个属性吗？
2#
- 当说“插入多条记录...”时，我理解“不止一行”，我错了吗？

*   谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:14:45.270

`$fruits`他们显然迭代了数组。它被声明并填写在给定代码片段的范围之外。具有给定字段的`$fruits`包含对象。创建一个类，然后填充`$fruits`. “当说“插入多条记录......”时，我理解“不止一行”，我错了吗？- 这意味着从 0 到 N 行。

# git - “git add -u”和“git add -A”有什么区别？

> ID：15011311
> 
> 赞同：32
> 
> 时间：2013-02-21T20:11:10.763
> 
> 标签：git, git-add

好的，所以当我遇到“[从已从磁盘中删除的 Git 存储库中删除多个文件”时，我正在搜索](https://stackoverflow.com/questions/492558/removing-multiple-files-from-a-git-repo-that-have-already-been-deleted-from-disk)**“如何从 Git 中删除手动删除的文件”**，而实际上并没有为每个文件做任何事情。`git rm file.txt`

投票最多的两个命令是：

*   `git add -u`
*   `git add -A`

尽管它们都对我有用，但我仍然无法理解其中的区别，并且页面上的解决方案也没有解释。我的问题是，它们有何不同，还有哪些其他 git 命令可用于删除已从磁盘手动删除的文件？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-21T20:11:10.763

### 简要回答：

`git add -A` **等于** `git add .` **+** `git add -u`

* * *

### 解释：

当您执行“ `git add .`”时，它**会将所有文件**（现有的、修改的和新的）添加到暂存区，但不会删除已从磁盘中删除的文件。

" `git add -u`" 仅将当前跟踪的文件（已修改）添加到暂存区，并检查它们是否已被删除（如果是，则将它们从暂存区中删除）。这意味着它不会暂存新文件。

执行“ `git add -A`”会执行这两个步骤，即按原样暂存整个目录。

* * *

### 概括：

*   **`git add -A`**: 舞台**一切**
*   **`git add -u`**：仅阶段**修改的文件**
*   **`git add .`**: 暂存所有内容，不**删除文件**

阅读[文档](http://www.kernel.org/pub/software/scm/git/docs/git-add.html)以获取更多信息。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-01-09T04:53:14.993

`git add -A`将跟踪新的、修改的和删除的文件

`git add -u`将跟踪修改和删除的文件

# html - 仅在其直接父 div 左侧对齐或展平图像

> ID：15011322
> 
> 赞同：0
> 
> 时间：2013-02-21T20:11:38.903
> 
> 标签：html, css

我有一个 div 'container' ，它包含我所有的内容并设置为 80% 宽度。在那个 div 里面，我有 div 'tophead'，它包含一个 100% 的徽标和一个导航栏（但它只到达父级 80%）。然后我有'maincont'，它位于'container' div 内并有一个图像。我希望此图像与“容器”div 的一侧对齐，以便仍有 20% 的空间保持打开状态。如果我向左浮动或向左对齐，它会一直显示在屏幕左侧，超过 20% id，就像空白一样。任何想法如何解决这个问题将不胜感激。

如果有人能弄清楚为什么图像与我的导航栏重叠，则非常感谢。

jsFiddle：http: [//jsfiddle.net/4JKus/4/](http://jsfiddle.net/4JKus/4/)

代码：

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="ccoheader.css">
    <title>Hello World</title>
  </head>
  <body>
    <div id="container">
        <div align="center" id="tophead">
        <img src="images/logo.png" alt="logo">
        <ul>
            <li><a href="#" title="About Us">About Us</a></li>
            <li><a href="#" title="Biographies">Biographies</a></li>
            <li><a href="#" title="Services">Services</a></li>
            <li><a href="#" title="Careers">Careers</a></li>
            <li><a href="#" title="Contact">Contact</a></li>
        </ul>
        </div>
        <div align="center" id="maincont">
        <img src="images/secondimage.png" alt="image">
        </div>
    </div>
    </div>
  </body> 
```

CSS：

```
html, body, #container {
    height: 100%;
    width: 100%;
    margin: 0;

}

#tophead {
    height: 20%;
    width: 80%;
    margin: auto;

}

#tophead img {
    height: 100%;
    width: auto%;
}
#tophead ul {
    list-style: none;
    display: inline-block;
    font-size: 0;

}
#tophead li {
    display: inline-block;

    }
#tophead a {
  background: #2dbaf0;
  color: #fff;
  display: block;
  font-size: 16px;
  font-family: "arial";
  font-weight: bold;
  padding: 0 20px;
  line-height: 38px;
  text-transform: uppercase;
  text-decoration: none;
  -webkit-transition-property: background;
  -webkit-transition-duration: .2s;
  -webkit-transition-timing-function: linear;

}
#tophead a:hover {
  background: #f8a52b;
  color: #fff;
}
#tophead li:first-child a {
  border-left: none;
  border-radius: 5px 0 0 5px;
}
#tophead li:last-child a {
  border-right: none;
  border-radius: 0 5px 5px 0;
}

#maincont {
    height: 68%;
    width: 80%;
    padding-top: 2%;

    }
#maincont img{
    height: 100%;
    width: auto;
    border-radius: 30px;
    float: left;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:39:47.290

Getting rid of `float:left` in your `#maincont img` selector solves the first problem.

Problem 2 is down to the fact that you have a topheader of 20% and the nav bar overlaps this.. You can fix this by removing the stipulation that the top and bottom are fixed in size.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:23:00.820

不确定这对解决您的问题有多远，但它是一个开始：

[http://jsfiddle.net/4JKus/5/](http://jsfiddle.net/4JKus/5/)

在 div 声明中使用 align 属性被认为是错误的形式。你有一个流浪的 /div 闲逛。不知道为什么要强制图像和主容器达到 100% 高度。

HTML

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="ccoheader.css">
    <title>Hello World</title>
  </head>
  <body>
    <div id="container">
        <div id="tophead">
            <img class="logo" src="images/logo.png" alt="logo">
            <ul>
                <li><a href="#" title="About Us">About Us</a></li>
                <li><a href="#" title="Biographies">Biographies</a></li>
                <li><a href="#" title="Services">Services</a></li>
                <li><a href="#" title="Careers">Careers</a></li>
                <li><a href="#" title="Contact">Contact</a></li>
            </ul>
        </div>
        <div id="maincont">
            <div class="maincont_col1">
                &nbsp;
            </div>
            <div class="maincont_col2">
                <img src="images/secondimage.png" alt="image">
            </div>
        </div>
    </div>
  </body> 
```

CSS

```
html, body, #container {
    width: 100%;
    margin: 0;
}

#tophead {
    height: 20%;
    width: 80%;
    margin: auto;

}

#tophead img {
    width: auto%;
}
#tophead ul {
    list-style: none;
    display: inline-block;
    font-size: 0;

}
#tophead li {
    display: inline-block;

    }
#tophead a {
  background: #2dbaf0;
  color: #fff;
  display: block;
  font-size: 16px;
  font-family: "arial";
  font-weight: bold;
  padding: 0 20px;
  line-height: 38px;
  text-transform: uppercase;
  text-decoration: none;
  -webkit-transition-property: background;
  -webkit-transition-duration: .2s;
  -webkit-transition-timing-function: linear;

}
#tophead a:hover {
  background: #f8a52b;
  color: #fff;
}
#tophead li:first-child a {
  border-left: none;
  border-radius: 5px 0 0 5px;
}
#tophead li:last-child a {
  border-right: none;
  border-radius: 0 5px 5px 0;
}

#maincont {
    width: 100%;
    padding-top: 2%;
    overflow: hidden;

    }
.maincont_col1{ width:20%; float:left; }
.maincont_col2{ width:80%; float:left; }

#maincont img{
    border-radius: 30px;
} 
```

# jquery - 你能像在jQuery中指定'this''index''element'一样指定父div吗

> ID：15011326
> 
> 赞同：0
> 
> 时间：2013-02-21T20:11:53.203
> 
> 标签：jquery, function, parent

`div`影响函数中使用的元素的各自父级？我希望这是有道理的。我一直试图在 DOC 中找到答案，但不熟悉术语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:20:19.913

首先，您可以通过

```
$('#yourelement').parent(); 
```

根据您的说法，我正在通过将其更改`background colour`如下来影响父级。

```
$('#yourelement').parent().css('background-color', 'blue'); 
```

得到所有的父母；

```
var parents= $("#yourElement").parents("*"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:20:43.040

要在 jQuery 中指定父 div，请执行以下操作：

```
$('#div1').parent().doSomethingHere 
```

这将遍历 div 的父元素。通过 id 指定父级：

```
$('#div1').parent('#parent1').doSomethingHere 
```

您还可以使用“this”访问函数中当前元素的父元素：

```
$(this).parent().doSomethingHere 
```

# java - 将 Web 应用程序转换为 Android 应用程序

> ID：15011330
> 
> 赞同：0
> 
> 时间：2013-02-21T20:11:56.290
> 
> 标签：java, android, mysql, web

我有一个在线商店（如[PC WORLD](http://www.pcworld.co.uk/gbuk/index.html)），我也想创建这个商店的 Android 应用程序。

这个在线商店的后端是由 PHP & MySQL 数据库编写的。所以所有的数据都存储在 MySQL 数据库中。

那么从远程 MySQL 服务器检索信息到我的 Android 应用程序的最佳方法是什么？

最好的问候，朱利叶斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:09:10.283

您是否考虑过使用您当前的网站并创建一个 Web 视图应用程序？换句话说，只是创建一个 Web 浏览器窗口减去地址栏和其他控件？您可以创建一个自定义网页，然后您在本机应用程序语言中所做的就是浏览器窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-17T08:56:47.313

要从 mysql 中检索数据，最好的方法是将您的 web 创建为 android 应用程序，或者只需使用 www.web2apk.com 将此 web 应用程序转换为 android 应用程序。该站点将为您的 Web 应用程序创建一个 apk 文件。所以你不需要为android创建任何新的数据库，它会自动从同一个数据库中检索。您不需要为此提供任何服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T20:13:55.407

为您的站点创建 Web 服务或某种 API。

# c - Windows 上的定时器和睡眠

> ID：15011333
> 
> 赞同：2
> 
> 时间：2013-02-21T20:12:15.407
> 
> 标签：c, windows, bandwidth, throttling

我正在尝试将一些使用`nanosleep()`和`get_clocktime()`Windows 的 linux 代码移植。据我所知，Windows 上确实没有那么多性能计时器，并且除了`Sleep()`. 我在 Windows 上找到了`QueryPerformanceCounter`和`QueryPerformanceFrequency`，但我将如何调整它们以使用快速睡眠功能。我尝试移植的代码位于此 StackOverflow 帖子中：[https ://stackoverflow.com/a/13559213/1161270](https://stackoverflow.com/a/13559213/1161270)

总的来说，我正在尝试将 linux 代码移植到使用`nanosleep()`,`get_clocktime()`和的 Windows 上`struct timespec`，但似乎没有真正的等价物。我也对如何添加油门延迟的其他想法持开放态度。我已经阅读了这些`PdhGetFormattedCounterArray()`函数，并且我有工作代码来监控计算机的输出带宽（以字节为单位），但我不确定如何使用这些数据来创建延迟以将数据发送到特定的 kb/s 速度，并且更愿意使用链接帖子中提供的其他方法。

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:46:09.360

请记住，大多数操作系统睡眠类型的实际精度通常以毫秒为单位（甚至是毫秒数）。看起来你可以睡眠更短的时间，但实际上，操作系统实际上并没有让进程进入睡眠状态，或者睡眠时间是“滴答”。对于 Linux（取决于内核配置）和 Windows 都是如此。

微软在这里解释了超时（而睡眠只是等待什么都不发生的超时）：http: [//msdn.microsoft.com/en-gb/library/windows/desktop/ms687069%28v=vs.85%29.aspx#等待函数和超时间隔](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms687069%28v=vs.85%29.aspx#waitfunctionsandtime-outintervals)

# excel - 带有条件的 Excel sumif

> ID：15011338
> 
> 赞同：2
> 
> 时间：2013-02-21T20:12:30.817
> 
> 标签：excel, sumifs

我有一个 last_name、first_name、salary 和 total_salary 列。销售人员在整个电子表格中多次出现。我想做的是编写一个函数，仅在销售人员出现的地方汇总 total_salary 列中的薪水列。

示例输出：
![在此处输入图像描述](../Images/90eef28d64e1ca2b78caa8a4486a4666.png)

期望的输出：
![在此处输入图像描述](../Images/1edd8a0748d6a94b7477c18a35bb86a8.png)

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T20:29:16.167

试试这个（假设您的数据在`A:C`从第 1 行开始的列中）：

```
=SUMPRODUCT(--(A1=A:A),--(B1=B:B),C:C) 
```

根据需要自动调整列表。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T20:30:00.067

使用该`SumIfs`功能。

假设您的数据从单元格 A1 开始

你将会拥有：

```
A        B       C       D
Brian    Adam    3000    =SUMIFS($C$1:$C$8,$A$1:$A$8,A1,$B$1:$B$8,B1) 
```

然后只需向下拖动 D 列

显然`$8`将函数的一部分更改为工作表的正确行数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T20:32:30.850

使您的`fname`,`lname`和`sal`列命名为范围

在任何你想要的地方使用这个公式。

```
=SUMIFS(Sal,Fname,"Brian",Lname,"Adam") 
```

或者

```
=SUMIFS(Sal,Fname,"A2",Lname,"B2") 
```

您也可以用范围引用替换`"Brian"`和。`"Adam"`

我想你不熟悉：制作一个命名范围

![在此处输入图像描述](../Images/02aa06f63898d5566c70dfa9781b27e7.png)

编辑命名范围

![在此处输入图像描述](../Images/fbe30d1b19ad8fa37304b02d8113d243.png)

# eclipse - 无法在 spring STS 上运行示例项目

> ID：15011339
> 
> 赞同：0
> 
> 时间：2013-02-21T20:12:32.067
> 
> 标签：eclipse, spring

在 Juno 上成功安装 STS 后，我打开了一个新的 MVC 项目，通过添加所有必需的 spring jar 来修复示例 STS 项目中的错误，现在有两个问题：

1.  我无法选择：“在服务器上运行”（尽管我确实在工作区中设置了一个 tomcat 的服务器）。

2.  我所做的每一步（清理、删除等）都会出现以下错误：

构建过程中发生错误。在项目“First_STS_Project”上运行构建器“Faceted Project Validation Builder”时出错。无法初始化类 org.eclipse.jst.j2ee.project.facet.IJ2EEFacetConstants 在项目“First_STS_Project”上运行构建器“Validation”时出错。org.eclipse.jst.j2ee.project.facet.IJ2EEFacetConstants

这不是我特定工作区的本地问题，因为我在第二台 PC 上也遇到了同样的错误。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-21T21:22:10.340

我不推荐 JUNO，因为它有很多错误并且对性能也有不良影响。如果您使用的是 Windows，请在安装插件或选择工作区时尝试使用短路径。在 Windows 中工作时，我遇到了类似的问题。如果我在 c:/users/Marcelo/Documents/java/workspaces 中创建一个工作区，我总是会遇到问题，但是每当我直接更改为“c:/workspaces”时，它都能完美运行。请尝试使用 Eclipse Indigo。也尝试使用最新版本的tomcat。如果之前的任何建议解决了问题（这可能很奇怪），请尝试再次安装 STS 插件，但检查所有功能，可能缺少组件。

# c# - 如何使用方向键盘移动面板

> ID：15011340
> 
> 赞同：0
> 
> 时间：2013-02-21T20:12:39.167
> 
> 标签：c#, winforms, controls

在面板控件上的标签停靠中，我使用了以下代码：（这是用鼠标指针移动我的面板）

```
Point m_pntPosPanel = new Point();

private void lblMove_MouseUp(object sender, MouseEventArgs e)
{
    pnlCost.Location = new Point(e.X - m_pntPosPanel.X + pnlCosto.Location.X, e.Y - m_pntPosPanel.Y + pnlCosto.Location.Y);
    Cursor.Current = Cursors.Default;
    m_blnMouseDown = false;
}

private void lblMove_MouseDown(object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.Right)
    {
        m_pntPosPanel.X = e.X;
        m_pntPosPanel.Y = e.Y;

        Cursor.Current = Cursors.Hand;
        m_blnMouseDown = true;
    }
} 
```

我该如何移动该面板`directional keyboard`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:16:16.940

我将在控件上注册 KeyUp 事件，并按如下方式处理：

```
 private void lblMove_KeyUp(object server, KeyEventArgs e)
    {
          Point location = button1.Location;
          switch(e.KeyCode)
          {
            case Keys.Up: 
                location.Y = location.Y -1;
                break;
            case Keys.Down:
                location.Y = location.Y + 1;
                break;
            case Keys.Right:
                location.X = location.X + 1;
                break;
            case Keys.Left:
                location.X = location.X - 1;
                break;
          }

          button1.Location = location;
    } 
```

# jquery - 使用 jQuery 按类过滤列表项

> ID：15011341
> 
> 赞同：0
> 
> 时间：2013-02-21T20:12:47.260
> 
> 标签：jquery, css, filtering

我正在修改现有网站的 AZ 目录，它是使用 jQuery 过滤的列表。单击**全部**显示所有部门。每个 AZ 部分都在自己的 div 中分组，并带有一个匹配的类，例如，所有以**A**开头的部门都有一个带有“A”类的 div。

单击**GILROY**时，我需要以相同的方式过滤掉列表中的另一组项目。我已将“gilroy”类添加到这些列表项中。

在花了几个小时尝试使用过滤来破译类似的例子后，我意识到我只是不明白如何正确编码，这是一个时间敏感的项目。任何帮助或指出正确的方向将不胜感激。

我正在修改的现有代码如下，请参阅 css & html 的 jsfiddle 链接。

```
$(document).ready(function() {
    $('ul#letterlist a').click(function() {
        $(this).css('outline','none');
        $('ul#letterlist .current').removeClass('current');
        $(this).parent().addClass('current');

        var filterVal = $(this).text().toUpperCase().replace(' ','-');

        if(filterVal == 'ALL') {
            $('div#departments div').addClass('column');
            $('div#departments div div.hidden').fadeIn('fast').removeClass('hidden');
        } else {
            $('div#departments div.column').fadeIn('fast').removeClass('column');

            $('div#departments div div').each(function() {
                if(!$(this).hasClass(filterVal)) {
                    $(this).fadeOut('fast').addClass('hidden');
                } else {
                    $(this).fadeIn('fast').removeClass('hidden');
                }
            });
        } 

        return false;
    });
}); 
```

[jsfiddle](http://jsfiddle.net/kaemak/RSpP9/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:29:59.430

`if-then-else`在您的for中添加另一个案例`GILROY`。在这种情况下，显示所有内容，就像`ALL`案例一样，但隐藏除了`.gilroy`类`li`元素之外的所有内容，使用`.not('.gilroy')`. 确保每次更改`show()`的所有元素都重置过滤器：`li`

```
$('div#departments li').show();
if(filterVal == 'GILROY') {
    $('div#departments div').addClass('column');
    $('div#departments li').not('.gilroy').hide();
    $('div#departments div div.hidden').fadeIn('fast').removeClass('hidden');
} else if(filterVal == 'ALL') {
    $('div#departments div').addClass('column');
    $('div#departments div div.hidden').fadeIn('fast').removeClass('hidden');
} else {
    ...
} 
```

演示：http: [//jsfiddle.net/8u26c/](http://jsfiddle.net/8u26c/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:45:08.790

这个应该与“Gilroy”和您可能决定添加的任何其他类似过滤器一起使用。你可以有一个空`div`的类`GILROY`和一个空的`ul`（这似乎已经存在于你的 jsfiddle 的早期版本中），然后在你的`else`块中添加以下代码段：

```
if (filterVal.length > 1) { //can hard-code this to check for "GILROY" instead, if you want
    var targetList = $('div.' + filterVal + ' ul');
    $('li.' + filterVal.toLowerCase()).each(function() {
        targetList.append($(this));
    });                
} 
```

演示：http: [//jsfiddle.net/82Vmw/](http://jsfiddle.net/82Vmw/)

# java - 在 Linux 上使用 Runtime.getRuntime() 执行 ls star

> ID：15011344
> 
> 赞同：0
> 
> 时间：2013-02-21T20:12:55.933
> 
> 标签：java, linux, shell, runtime.exec

我想执行 Runtime.getRuntime().exec(); 在 Java 上列出某个目录上的文件。

所以我想通过这个命令“ls /mnt/drbd7/i* | tail -1”，但是因为星号命令返回null。我真的需要这颗星。我需要选择目录上最后修改的文件。我尝试使用 java.io.File 但它无法获取最后一个文件。

有人有提示吗？提前致谢！费利佩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:18:24.357

您需要通过`bash`shell 传递命令，以便它可以`glob`将通配符转换为文件列表：

```
Runtime.getRuntime().exec(new String[]{ "/bin/bash", "-c", "ls", "/mnt/drbd7/i*", "|", "tail", "-1"}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T20:18:12.623

您需要将该命令传递给一个 shell，该 shell 将展开星号并解释管道符号。你开始的不是一个，而是两个过程。

```
bash -c ls /mnt/drbd7/i* | tail -1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T20:31:07.547

该命令`ls /mnt/drbd7/i* | tail -1`不会显示最后修改的文件，因为`ls`默认情况下该命令按名称对结果进行排序。你可以这样做`ls -t /mnt/drbd7/i* | head -1`。

你可以使用这个问题的答案：

[如何在 Java 目录中找到最后修改的文件？](https://stackoverflow.com/questions/2064694/how-do-i-find-the-last-modified-file-in-a-directory-in-java)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T20:51:55.750

在 Unix 下，命令行参数中的`*`和之类的模式由命令 shell 扩展，而不是由单个程序扩展。`?`知道如何处理通配符的程序有一些例外，但`ls`不是其中之一。管道也是如此：shell 知道如何处理它们，`java.lang.Runtime`但不知道。

因此，如果您想使用这些功能，则必须执行以下操作：

```
Runtime.getRuntime().exec("/bin/sh -c 'ls /mnt/drbd7/i* | tail -1'") 
```

但请注意，这是一个非常特定于系统的解决方案（它甚至取决于当前用户的配置），可以通过纯 Java 解决问题（请参阅`java.io.File.listFiles`、`java.nio.file.DirectoryStream`等）。

# asp.net - 背景图像评估

> ID：15011347
> 
> 赞同：0
> 
> 时间：2013-02-21T20:13:07.150
> 
> 标签：asp.net, background-image, eval

我`DataList`用来显示缩略图，如何使用背景图片 url`eval`

这段代码给了我服务器标签格式不正确的错误。

```
<asp:DataList ID="DataListPortfolio" runat="server" RepeatColumns="3">
        <ItemTemplate>

<asp:Image ID="ImageButton1" runat="server" 
           style="background-image: url('<%#Eval("featuredImagesSmall")%>');" />

        </ItemTemplate>
</asp:DataList> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:49:20.557

根据您的评论，您可能只想使用 a`div`而不是`<asp:Image`（呈现为 a `img`），以实现无论图像大小如何都大小相同的缩略图：

```
<asp:DataList ID="DataListPortfolio" runat="server" RepeatColumns="3">
    <ItemTemplate>
        <div style='width:100px;height:100px;background-position:center;background-image:url(<%# Eval("featuredImagesSmall") %>)'></div>
    </ItemTemplate>
</asp:DataList> 
```

我只是在 div 上放置了任意高度和宽度，但这将确保所有缩略图的大小相同。您可以使用 CSS 将图像定位在 div 内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:20:26.180

为什么不使用 ASP.NET Image 控件的 ImageUrl 属性？像这样的东西：

```
<asp:DataList ID="DataListPortfolio" runat="server" RepeatColumns="3">
        <ItemTemplate>

<asp:Image ID="ImageButton1" runat="server" ImageUrl='<%# Eval("featuredImagesSmall")%>' />

        </ItemTemplate>
</asp:DataList> 
```

# ios - 修改二进制保存游戏数据 (iPhone)

> ID：15011352
> 
> 赞同：0
> 
> 时间：2013-02-21T20:13:30.847
> 
> 标签：ios, iphone, binaryfiles

只是为了好玩，我正在尝试破解我保存的 Ghostbusters iPhone 应用程序的游戏数据（[AppStore 链接](https://itunes.apple.com/us/app/ghostbusters/id583354857?mt=8&uo=4)）。

以下网站描述了用`Documents/save.dat`预先破解的版本替换：

*   [http://www.iapphacks.com/ios-free-hacks-f3/ghostbusters-v1-0-1-t8597.html](http://www.iapphacks.com/ios-free-hacks-f3/ghostbusters-v1-0-1-t8597.html)
*   [http://mobilegamingsquad.wordpress.com/2013/01/24/ghostbusters-hack/](http://mobilegamingsquad.wordpress.com/2013/01/24/ghostbusters-hack/)

但是，我想自己修改数据。使用我的十六进制编辑器`save.dat`揭示了以下死胡同：

1.  我找不到以下任何组合的金额值：（小端，大端），（无符号，有符号），（整数，浮点），（4、6、8、16字节值）， （1 到 15 字节偏移）
2.  任何小的变化（即：物品购买）似乎都会完全重写和更改数据文件。
3.  以 ASCII 格式快速扫描文件不会发现文件格式的文本线索。 *ADD：*事实上，文件中的所有 ASCII 字符串看起来都是完全随机的。
4.  linux 命令`file`只是将文件标识为`data`.
5.  *新*压缩文件会放大它，因此文件可能已被压缩或加密。
6.  *新*我既不是越狱者也不是 iOS 开发者，所以我无法访问应用程序的内部存储器。

该文件如何编码？关于如何手动修改它的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:31:05.883

我做了类似的事情只是为了好玩。在我的例子中，该文件被压缩并包含一个哈希签名和一个由游戏可执行文件生成的盐值。在这种情况下，我使用`gdb`, 在所有散列函数上设置断点并检查它们的参数。我实际上不确定如何调试 iPhone 应用程序，但我怀疑除非你越狱设备，否则这是不可能的，所以你可能会被困在试图分析文件的过程中。

从下载 HexField（或类似工具）开始，它非常适合这种类型的工作。尝试根据非常小的变化找到一种模式（尽可能少地改变，并确保在改变某些东西后终止游戏）。如果你幸运的话，分数、金钱和诸如此类的东西就会被混淆。

如果不容易在文件中看到模式，我会首先调查已知的压缩，例如 gzip（无标题）、deflate、lzma 等（首先查看符号表并在游戏二进制文件中使用 class-dump 以获得一些想法）。由于该`file`命令没有给出任何内容，我认为该文件不是简单的 gzip 压缩文件。

否则，您可能会开始怀疑文件已加密（再次查看符号表）。确定文件是压缩还是加密的一个好方法是尝试压缩它。如果没有算法能够进一步压缩它，则很可能该文件已被压缩或加密。

快乐黑客！:)

# emacs - org-mode：项目计数器，在导出中可见

> ID：15011355
> 
> 赞同：4
> 
> 时间：2013-02-21T20:13:58.123
> 
> 标签：emacs, org-mode

我正在以 org 模式编写文档。是否可以对分布在文档中的练习使用计数器而不是自己编号？我将其导出为 HTML 和 PDF（通过 LaTeX）。例子：

```
* First chapter
Blabla.

Exercise 1.

* Second chapter.

Blabla

Exercise 2.

* Third chapter.

Exercise 3.

Exercise 4. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T20:59:56.403

我在 org-mode 中使用动态块解决了这个问题。

在我的 init.el 中，我定义了以下内容：

```
(setf exercise-counter 0)
(defun org-dblock-write:reset-exercise-counter (params)
  (setf exercise-counter 0))
(defun org-dblock-write:exercise (params)
  (incf exercise-counter)
  (insert (concat "Exercise " (int-to-string exercise-counter) "."))) 
```

在我的文档顶部，我重置了计数器：

```
#+BEGIN: reset-counter

#+END 
```

在文档中展开，我现在可以这样说：

```
#+BEGIN: exercise
#+END
Blablabla.

#+BEGIN: exercise
#+END
Blablabla. 
```

拨打`org-update-all-dblocks`正确的号码后将插入。

![之前的文字](../Images/88c8b9f8103cea04db76ace72483f0f1.png)

![后](../Images/b5dfe53e131dc2fb9a15203e54281b25.png)

如果有什么可以改进的，欢迎提出建议。

`org-update-all-dblocks`导出时 如何自动调用？**答案**：像这样：`(add-hook 'org-export-first-hook 'org-update-all-dblocks)`

# jquery - WCF AJAX，jQuery - 返回的 JSON 数据为空

> ID：15011356
> 
> 赞同：1
> 
> 时间：2013-02-21T20:14:01.270
> 
> 标签：jquery, ajax, json, wcf, web-services

我遇到了一个错误，我希望这里有人可以帮助我，因为我一直在试图找出问题所在，好吧，太久了！

好的，我正在使用 WCF 以及 AJAX 和 jQuery 来访问一个名为`Player`

这是相关的 WCF 接口`OperationContract`

```
 [OperationContract]
[WebInvoke(Method = "POST",
        BodyStyle = WebMessageBodyStyle.Wrapped,
        RequestFormat = WebMessageFormat.Json,
        ResponseFormat = WebMessageFormat.Json,
        UriTemplate = "/getplayers")]
[return: MessageParameter(Name = "Players")]
Player[] GetPlayersInTeam(int TeamId); 
```

这是实际的休息服务方法：

```
 public Player[] GetPlayersInTeam(int teamId)
    {
        string connString = ConfigurationManager.ConnectionStrings["conn"].ConnectionString;

        SqlConnection conn = new SqlConnection(connString);

        try
        {
            conn.Open();
        }
        catch
        {

        }

        List<Player> Players = new List<Player>();

        string query = "SELECT * FROM Player WHERE TeamId = @TeamId";

        SqlCommand command = new SqlCommand(query, conn);
        command.Parameters.AddWithValue("@TeamId", teamId);

        SqlDataReader reader = command.ExecuteReader();

        if (reader.HasRows)
        {
            while (reader.Read())
            {
                Player player = new Player(teamId, Convert.ToString(reader[2]), 
                                            Convert.ToString(reader[3]));

                Players.Add(player);
            }

            return Players.ToArray();
        }

        return null;
    }
} 
```

这是播放器类：

```
[DataContract(Name = "Player", Namespace = "")]
    public class Player
    {
        // attributes

        private int _teamId;
        private string _playerName;
        private string _position;

        public Player() { }

        public Player(int teamId, string playerName, string position)
        {
            _teamId = teamId;
            _playerName = playerName;
            _position = position;
        }

        [DataMember(Name = "teamId", Order = 1)]
        public int TeamId
        {
            get { return _teamId; }
            set { _teamId = value; }
        }

        [DataMember(Name = "playerName", Order = 2)]
        public string PlayerName
        {
            get { return _playerName; }
            set { _playerName = value; }
        }

        [DataMember(Name = "position", Order = 3)]
        public string Position
        {
            get { return _position; }
            set { _position = value; }
        }
    } 
```

这是 jQuery-Ajax 请求：

```
<script type="text/javascript" language="javascript">
    $(document).ready(function () {

        var teamId = $.session.get("teamId");

        $.ajax({
            cache: false,
            type: "POST",
            url: "RestService.svc/getplayers",
            data: '{ "teamId":"' + teamId + '"}',
            contentType: "application/json; charset=utf-8",
            success: function (json, status, req) {
                var JSONReturn = json.Players;

                if (JSONReturn != null) {
                    alert("picked up players");
                }
                else {
                    alert("error");
                }
            },
            error: AjaxError
        }); 
```

成功函数似乎总是返回`null`，我不知道为什么。我基本上想用相关的 抓住所有玩家`teamId`，其中`teamId`是一个会话字段。该`teamId`字段工作得很好，并`teamId`完美地返回了电流，因此与此无关。

但无论如何，任何帮助将不胜感激。我只是希望这是一个简单的错误，因为我快疯了。（这样的菜鸟程序员）。

编辑：控制台日志函数显示 ajax 请求的成功函数中的 json 包含来自 Player 类的 Players 列表，但该列表设置为 null。

```
CONSOLE.LOG
XHR finished loading: "http://localhost:54033/RestService.svc/getplayers". jquery.js:18
send jquery.js:18
b.extend.ajax jquery.js:18
(anonymous function) TeamSelection.aspx:24
c jquery.js:5
p.fireWith jquery.js:5
b.extend.ready jquery.js:5
H jquery.js:5
Object {Players: null} 
```

（TeamSelection.aspx匿名函数就是上面贴的ajax调用。正如你在底部看到的那样，json显然包含一个名为Players的Object，但等于null。

我不明白为什么会这样。我还添加了 dataType 但这没有任何效果。我很难过:(

谢谢

# android - 在 Android 中膨胀类片段时出错

> ID：15011359
> 
> 赞同：0
> 
> 时间：2013-02-21T20:14:12.500
> 
> 标签：android

我是开发 Android 程序的新手，一直坚持尝试完成介绍片段的 Professional Android 4 书中的练习。我收到以下错误：

```
InflateException: Binary XML file line #6: Error inflating class fragment 
```

以下是我的主要活动 java 程序：

```
package com.example.todolist;
import java.util.ArrayList;
import android.app.Activity;
import android.app.FragmentManager;
import android.os.Bundle;
import android.widget.ArrayAdapter;

public class MainActivity extends Activity 
implements NewItemFragment.OnNewItemAddedListener {
private ArrayAdapter<String> aa;
private ArrayList<String> todoItems;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Get references to the Fragments

    FragmentManager fm = getFragmentManager();
    ToDoListFragment todoListFragment =                        
    (ToDoListFragment)fm.findFragmentById(R.id.ToDoListFragment);
  aa = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, todoItems);
  todoListFragment.setListAdapter(aa);
  @Override
public void onNewItemAdded(String newItem) {
    // TODO Auto-generated method stub
    todoItems.add(newItem);
    aa.notifyDataSetChanged();
} 
```

}

ToDoListFragment 类如下所示：

```
package com.example.todolist;
import android.app.ListFragment;

public class ToDoListFragment extends ListFragment{

} 
```

下面是我的 NewItemFragment 类。

```
package com.example.todolist;

import android.app.Activity;
import android.support.v4.app.Fragment;
import android.view.KeyEvent;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.EditText;

public class NewItemFragment extends Fragment{

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.new_item_fragment, container, false);

    final EditText myEditText = (EditText)view.findViewById(R.id.myEditText);

    myEditText.setOnKeyListener(new View.OnKeyListener() {
        public boolean onKey(View v, int keyCode, KeyEvent event) {
          if(event.getAction() == KeyEvent.ACTION_DOWN)
              if((keyCode == KeyEvent.KEYCODE_DPAD_CENTER) ||  
                  (keyCode == KeyEvent.KEYCODE_ENTER)) {
                  String newItem = myEditText.getText().toString();
                  onNewItemAddedListener.onNewItemAdded(newItem);
                  myEditText.setText("");
                  return true;
        } 
      return false;

}
    });
    return view;
}

public interface OnNewItemAddedListener {
    public void onNewItemAdded(String newItem);

}

private OnNewItemAddedListener onNewItemAddedListener;

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);

    try {
        onNewItemAddedListener = (OnNewItemAddedListener)activity;
    } catch (ClassCastException e) {
        throw new ClassCastException(activity.toString());
    }
}

} 
```

下面是我的 activity_main.xml 文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:orientation="vertical"
android:layout_width="match_parent"
android:layout_height="match_parent">
<fragment android:name="com.paad.todolist.NewItemFragment"
    android:id="@+id/NewItemFragment" 
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:hint="@string/addItemHint"

    />
<fragment android:name="com.paad.todolist.ToDoListFragment" 
   android:id="@+id/ToDoListFragment"
   android:layout_width="match_parent"
   android:layout_height="wrap_content"

   />
  </LinearLayout> 
```

最后，这是我的 new_itemFragment xml 文件：

```
<EditText xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/myEditText" 
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:hint="@string/addItemHint"
    /> 
```

如果有人能告诉我为什么会出现膨胀片段错误，我将不胜感激。我尝试使用 import android.support.v4.app.FragmentManager 但没有奏效并尝试使用 android.support.v4.app.ListFragment 也没有奏效。多年来我一直在使用其他语言进行编程，但到目前为止，使用 Eclipse 对我来说，Android 确实是一个挑战。他们有更好的 IDE 来开发 Android 项目吗？

我尝试导入 android.support.v4.app 片段类，但是当我这样做时 getFragmentManager 函数未解决。下面是 logcat 的转储。

```
 02-21 20:53:27.769: E/AndroidRuntime(1280): java.lang.RuntimeException: Unable to     start activity    ComponentInfo{com.example.todolist/com.example.todolist.MainActivity}: android.view.InflateException: Binary XML file line #6: Error inflating class fragment
  02-21 20:53:27.769: E/AndroidRuntime(1280): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
 02-21 20:53:27.769: E/AndroidRuntime(1280):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
 02-21 20:53:27.769: E/AndroidRuntime(1280):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
 02-21 20:53:27.769: E/AndroidRuntime(1280):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
 02-21 20:53:27.769: E/AndroidRuntime(1280):    at android.os.Handler.dispatchMessage(Handler.java:99)
 02-21 20:53:27.769: E/AndroidRuntime(1280):    at android.os.Looper.loop(Looper.java:137)
 02-21 20:53:27.769: E/AndroidRuntime(1280):    at android.app.ActivityThread.main(ActivityThread.java:5039)
 02-21 20:53:27.769: E/AndroidRuntime(1280):    at java.lang.reflect.Method.invokeNative(Native Method)
 02-21 20:53:27.769: E/AndroidRuntime(1280):    at java.lang.reflect.Method.invoke(Method.java:511)
 02-21 20:53:27.769: E/AndroidRuntime(1280):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
 02-21 20:53:27.769: E/AndroidRuntime(1280):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
 02-21 20:53:27.769: E/AndroidRuntime(1280):    at dalvik.system.NativeStart.main(Native Method)
 02-21 20:53:27.769: E/AndroidRuntime(1280): Caused by: android.view.InflateException: Binary XML file line #6: Error inflating class fragment
 02-21 20:53:27.769: E/AndroidRuntime(1280):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
 02-21 20:53:27.769: E/AndroidRuntime(1280):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
 02-21 20:53:27.769: E/AndroidRuntime(1280):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
 02-21 20:53:27.769: E/AndroidRuntime(1280):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
 02-21 20:53:27.769: E/AndroidRuntime(1280):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
 02-21 20:53:27.769: E/AndroidRuntime(1280):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
 02-21 20:53:27.769: E/AndroidRuntime(1280):    at android.app.Activity.setContentView(Activity.java:1881)
 02-21 20:53:27.769: E/AndroidRuntime(1280):    at com.example.todolist.MainActivity.onCreate(MainActivity.java:20)
 02-21 20:53:27.769: E/AndroidRuntime(1280):    at android.app.Activity.performCreate(Activity.java:5104)
 02-21 20:53:27.769: E/AndroidRuntime(1280):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
 02-21 20:53:27.769: E/AndroidRuntime(1280):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
 02-21 20:53:27.769: E/AndroidRuntime(1280):    ... 11 more
 02-21 20:53:27.769: E/AndroidRuntime(1280): Caused by: android.app.Fragment$InstantiationException: Unable to instantiate fragment com.paad.todolist.NewItemFragment: make sure class name exists, is public, and has an empty constructor that is public
 02-21 20:53:27.769: E/AndroidRuntime(1280):    at android.app.Fragment.instantiate(Fragment.java:592)
 02-21 20:53:27.769: E/AndroidRuntime(1280):    at android.app.Fragment.instantiate(Fragment.java:560)
 02-21 20:53:27.769: E/AndroidRuntime(1280):    at android.app.Activity.onCreateView(Activity.java:4709)
 02-21 20:53:27.769: E/AndroidRuntime(1280):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
 02-21 20:53:27.769: E/AndroidRuntime(1280):    ... 21 more
 02-21 20:53:27.769: E/AndroidRuntime(1280): Caused by:        java.lang.ClassNotFoundException: Didn't find class "com.paad.todolist.NewItemFragment" on  path: /data/app/com.example.todolist-1.apk
 02-21 20:53:27.769: E/AndroidRuntime(1280):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
 02-21 20:53:27.769: E/AndroidRuntime(1280):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
 02-21 20:53:27.769: E/AndroidRuntime(1280):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461) 
```

运行调试器，我发现在这些指令中抛出了异常：
aa = new ArrayAdapter(this, android.R.layout.simple_list_item_1, todoItems);
todoListFragment.setListAdapter(aa);

我注意到 todoItems 的值为 null 所以我想知道该元素是否必须用一个值初始化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:18:40.447

它在这里寻找一个片段：`com.paad.todolist.NewItemFragment`

这就是您的 xml 文件中的内容。

但是，实际执行的包在这里：

```
package com.example.todolist; 
```

因此，您需要将 xml 文件更改为：

```
<fragment android:name="com.example.todolist.NewItemFragment" 
```

也检查一下`ToDoListFragment`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T11:13:53.513

使用新的片段类，将导入的包 android.app.Fragment\ 替换为 android.support.v4.app.Fragment 它会帮助你。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-05-08T12:40:23.280

MainActivity 必须扩展 FragmentActivity 类

# ruby-on-rails - ActionMailer 渲染视图不发送邮件

> ID：15011361
> 
> 赞同：1
> 
> 时间：2013-02-21T20:14:17.817
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, sendmail, actionmailer

我对 ActionMailer 有一个奇怪的问题。它正在发送一些邮件，但不发送其他邮件。我们最近升级到 3.2.12，这就是麻烦开始的时候。

这是我的配置：

```
# Disable delivery errors, bad email addresses will be ignored
config.action_mailer.raise_delivery_errors = true
# config.action_mailer.perform_deliveries = false
config.action_mailer.default_url_options = { :host => "ruby.ourdomain.com/app" }
config.action_mailer.asset_host = "http://ruby.ourdomain.com/app"
config.action_mailer.delivery_method = :smtp
config.action_mailer.smtp_settings = {
  :address                => "pop.ourdomain.com"
} 
```

此邮件有效：

在模型中：

```
def alertStudent
  AbsenceMailer.StudentAbsenceAlert(self).deliver
end 
```

邮寄者：

```
def StudentAbsenceAlert(alert)
  @alert = alert
  @student = studentInfo(@alert.student_id)
  @advisor = staffInfo(@alert.advisor)
  @instructor = @alert.polling.instructor
  studentAddr = @student['STUDENT_EMAIL']

  mail to: studentAddr, cc: @advisor['STAFF_EMAIL'], from: @advisor['STAFF_EMAIL'], subject: "[#{@alert.polling.course}] You have been marked absent #{Time.now.strftime('%m-%e-%Y')}"
end 
```

此邮件程序不起作用并且不会引发错误：

该模型：

```
def self.advisorDigest
  AbsenceAlert.current_status('active').advisor_day.group_by{|r| r.advisor }.each do |id, alerts|
    AbsenceMailer.AdvisorAbsenceDigest(id, alerts).deliver
  end
end 
```

邮寄者：

```
def AdvisorAbsenceDigest(id, alerts)
  @alerts = alerts
  @staff = staffInfo(id)
  mail to: @staff['STAFF_EMAIL'], subject: "Student Absence Report #{Time.now.strftime('%m-%e-%Y')}"
  puts "[#{Time.now.strftime('%c')}] Sent Advisor Digest: #{alerts.count} alerts to #{@staff['STAFF_EMAIL']}"
end 
```

在日志中，我看到以下内容

```
 Rendered absence_mailer/AdvisorAbsenceDigest.html.haml within layouts/app (31.6ms) 
```

但是它实际上并没有发送邮件。

对于成功的通话，我通常会看到

```
Sent mail to email@ourdomain.com (193ms) 
```

立即在视图渲染之后，并且在我看到失败的情况下我没有得到。

我启用了交付错误，并且没有收到任何错误。我们的应用没有改变，我们的配置没有改变。我们唯一做的就是升级到 rails 3.2.12 并且第二个邮件程序已经开始失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:38:19.337

Still unsure why one was working and another wasn't, but I was able to rectify the issue by moving `.deliver` out of the model and into the mailer itself, such as this:

the model:

```
def self.advisorDigest
  AbsenceAlert.current_status('active').advisor_day.group_by{|r| r.advisor }.each do |id, alerts|
    AbsenceMailer.AdvisorAbsenceDigest(id, alerts)
  end
end 
```

the mailer:

```
def AdvisorAbsenceDigest(id, alerts)
  @alerts = alerts
  @staff = staffInfo(id)
  mail(to: @staff['STAFF_EMAIL'], subject: "Student Absence Report #{Time.now.strftime('%m-%e-%Y')}").deliver
  puts "[#{Time.now.strftime('%c')}] Sent Advisor Digest: #{alerts.count} alerts to #{@staff['STAFF_EMAIL']}"
end 
```

# python - Python 模块导入：单行 vs 多行

> ID：15011367
> 
> 赞同：84
> 
> 时间：2013-02-21T20:14:38.937
> 
> 标签：python, module

在 Python 中导入模块时，这有什么区别：

```
from module import a, b, c, d 
```

和这个

```
from module import a
from module import b
from module import c
from module import d 
```

对我来说，压缩代码并使用第一个示例总是有意义的，但是我已经看到了一些代码示例和第二个示例。有什么区别，还是程序员的偏好？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-02-21T20:20:09.833

完全没有区别。它们的功能完全相同。

然而，从风格的角度来看，一个可能比另一个更可取。在那一点上，[用于导入的 PEP-8](http://www.python.org/dev/peps/pep-0008/#imports)表示您应该压缩`from module import name1, name2`到单行并保留`import module1`多行：

```
Yes: import os
     import sys

No:  import sys, os

Ok: from subprocess import Popen, PIPE 
```

回应@teewuane 的评论（在此重复，以防评论被删除）：

> @inspectorG4dget 如果您必须从一个模块导入多个函数并且最终使该行超过 80 个字符怎么办？我知道 80 char 是“当它使代码更具可读性时”，但我仍然想知道是否有更整洁的方法来做到这一点。而且我不想从 foo import * 做，即使我基本上是在导入所有东西。

这里的问题是，执行以下操作可能会超过 80 个字符的限制：

```
from module import func1, func2, func3, func4, func5 
```

对此，我有两个回应（我没有看到 PEP8 对此过于清楚）：

**将其分解为两个导入**：

```
from module import func1, func2, func3
from module import func4, func5 
```

这样做的缺点是如果`module`从代码库中删除或以其他方式重构，则需要删除两个导入行。这可能会很痛苦

**分割线**：

为了减轻上述担忧，这样做可能更明智

```
from module import func1, func2, func3, \
     func4, func5 
```

如果第二行没有与第一行一起删除，这将导致错误，同时仍保留单数 import 语句

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2016-07-18T02:30:59.540

要添加从[inspectorG4dget 的回答](https://stackoverflow.com/a/15011456/4574434)中提出的一些问题，您还可以在文件夹结构开始深度嵌套或您的模块具有钝名称时使用元组进行多行导入。

```
from some.module.submodule.that_has_long_names import (
    first_item,
    second_item,
    more_imported_items_with_really_enormously_long_names_that_might_be_too_descriptive,
    that_would_certainly_not_fit,
    on_one_line,
) 
```

这也有效，虽然我不喜欢这种风格：

```
from module import (a_ton, of, modules, that_seem, to_keep, needing,
                    to_be, added, to_the_list, of_required_items) 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-04-13T04:26:32.597

我建议不要盲目遵循 PEP-8。当你有大约一半屏幕的导入时，事情开始变得不舒服，然后 PEP-8 与 PEP-20 可读性指南发生冲突。

我的偏好是，

1.  将所有内置导入放在一行中，例如 sys、os、time 等。
2.  对于其他导入，每个包使用一行（不是模块）

上面给了你很好的平衡，因为读者仍然可以快速浏览依赖关系，同时实现合理的紧凑性。

例如，

**我的偏好**

```
# one line per package

import os, json, time, sys, math
import numpy as np
import torch, torch.nn as nn, torch.autograd, torch.nn.functional as F
from torchvision models, transforms 
```

**PEP-8 推荐**

```
# one line per module or from ... import statement

import os
import json
import time
import sys
import math

import numpy as np

import torch
from torch import nn as nn, autograd, nn.functional as F
from torchvision import models, transforms 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2022-02-15T23:24:03.513

其他答案未提及的一个问题是 git merge 冲突。

假设您从这个 import 语句开始：

```
import os 
```

如果将此行更改为`import os, sys`在一个分支和`import json, os`另一个分支中，则在尝试合并它们时会出现此冲突：

```
<<<<<<< HEAD
import os, sys
=======
import json, os
>>>>>>> branch 
```

但是如果你在单独的行上添加`import sys`和`import json`，你会得到一个没有冲突的很好的合并提交：

```
--- a/foo.py
+++ b/foo.py
@@@ -1,2 -1,2 +1,3 @@@
+ import json
  import os
 +import sys 
```

如果将两个导入添加到同一位置，您仍然会遇到冲突，因为 git 不知道它们应该出现在哪个顺序中。因此，如果您使用 import`time`而不是`json`，例如：

```
import os
<<<<<<< HEAD
import sys
=======
import time
>>>>>>> branch 
```

尽管如此，在确实避免合并冲突的情况下，仍然值得坚持这种风格。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-13T05:36:35.087

根据 PEP 8 指南，导入通常应该在单独的行上。

```
# Wrong Use
import os, sys
# Correct Use
import os
import sys 
```

有关更多基于导入的 PEP 8 违规和修复，请查看[https://ayush-raj-blogs.hashnode.dev/making-clean-pr-for-open-source-contributors-pep-8-style](https://ayush-raj-blogs.hashnode.dev/making-clean-pr-for-open-source-contributors-pep-8-style)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-15T15:23:05.557

两者都是一样的。使用`from module import a, b, c, d`.

如果您只想导入模块的一部分，请使用：

```
from module import a 
```

如果您想从同一模块导入多个代码，请使用：

```
from module import a,b,c,d 
```

当两者相同时，无需将所有内容都写在单独的行中。

# datetime - 在谷歌电子表格中重新格式化日期

> ID：15011382
> 
> 赞同：0
> 
> 时间：2013-02-21T20:15:31.257
> 
> 标签：datetime, google-apps-script, google-sheets

我正在使用表格为其他人设置电子表格以输入数据。其中一列应该包含一个日期。输入日期格式如以下示例：“2013 年 1 月 26 日”（收集数据会涉及大量复制和粘贴，因此在输入步骤更改格式不是真正的选择）。

我需要这个日期列是可排序的，但电子表格不会将其识别为日期，而只是将其识别为字符串。（它会识别“Jan-26-2013”​​，我试过了。）所以我需要重新格式化输入日期。

我的问题是：我该怎么做？我环顾四周，谷歌应用程序脚本看起来像是要走的路（尽管我还没有找到重新格式化的好例子）。不幸的是，我唯一的编程经验是 Python，而且是中级水平。我可以在 Python 中毫无问题地做到这一点，但我不知道任何 JavaScript。（我的 Python 方法是：

```
splitted = date.split()
newdate = "-".join([splitted[0], splitted[1][:-1], splitted[2]])
return newdate 
```

)

我也不知道如何将脚本链接到电子表格 - 我会将其附加到单元格、表单或哪里？如何？在这一点上，任何指向有用的、易于理解的教程等的链接都会有很大帮助。

非常感谢任何帮助！

**编辑：这是我最终得到的代码：**

```
//Function to filter unwanted " chars from date entries
function reformatDate() {
  var sheet = SpreadsheetApp.getActiveSheet();
  var startrow = 2;
  var firstcolumn = 6;
  var columnspan = 1;
  var lastrow = sheet.getLastRow();
  var dates = sheet.getRange(startrow, firstcolumn, lastrow, columnspan).getValues();
  newdates = []
  for(var i in dates){
    var mydate = dates[i][0];
    try
      {
      var newdate = mydate.replace(/"/g,'');
      }
    catch(err)
      {
      var newdate = mydate
      }
     newdates.push([newdate]);
  }
  sheet.getRange(startrow, firstcolumn, lastrow, columnspan).setValues(newdates)
} 
```

对于像我这样困惑的谷歌脚本新手：

*   通过在电子表格中创建脚本（工具 => 脚本编辑器），将脚本附加到电子表格中。只需将函数放在那里就足够了，您似乎不需要函数调用等。

*   您从脚本编辑器中选择脚本的触发器（资源 => 此项目的触发器）。

**重要提示：**脚本仅在相关工作表底部有空行时才有效！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T21:18:45.707

只是一个想法：

如果您双击电子表格中的日期字符串，您将看到使其成为字符串而不是日期对象的真正值是在我没有在此处添加的字符串前面...（`'Jan 26, 2013` 表格`'`这样做是为了让您在文本区域中输入您想要的内容，包括 +322475... 例如，如果它是一个电话号码，这是电子表格单元格中的一个已知技巧）您可以简单地制作一个[在表单提交](https://developers.google.com/apps-script/understanding_triggers?hl=en)和删除`'`单元格中的，我想电子表格会完成剩下的工作......（我没有测试过，所以试一试并将其视为建议）。

要删除，`'`您可以简单地使用`.replace()` [方法**](http://www.w3schools.com/jsref/jsref_replace.asp)

```
var newValue = value.replace(/'/g,''); 
```

以下是相关文档的一些链接：[link1](https://developers.google.com/apps-script/understanding_events) [link2](https://developers.google.com/apps-script/understanding_triggers#ActionTriggers)

* * *

**根据您的评论进行编辑：**

它可能更简单，因为`replace`如果找不到匹配项，则不会生成错误。所以你可以这样：

```
function reformatDate() {
  var sheet = SpreadsheetApp.getActiveSheet();
  var dates = sheet.getRange(2, 6, sheet.getLastRow(), 1).getValues();
  newdates = []
  for(var i in dates){
    var mydate = dates[i][0];
      var newdate = mydate.replace(/"/g,'');
     newdates.push([newdate]);
  }
  sheet.getRange(2, 6, sheet.getLastRow(), 1).setValues(newdates)
} 
```

另外，您`"`在代码中使用了，大概是故意的……我的测试显示`'`了。是什么让你做出这个选择？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-04T10:30:13.503

解决了，我只需要将逗号更改为点就可以了

# android - OpenGL ES 2 中 Android 上的黑色伪影

> ID：15011389
> 
> 赞同：1
> 
> 时间：2013-02-21T20:16:07.803
> 
> 标签：android, opengl-es-2.0, lg

我有一个通过 PowerVR 仿真库在 iOS、Android 和 PC 上运行的 OpenGL ES 2 代码库。

当我在 LG Optimus G LGE971 上运行此代码时，我看到我的模型上有黑色伪影：

[http://imageshack.us/photo/my-images/594/renderartifacts.png/](http://imageshack.us/photo/my-images/594/renderartifacts.png/)

我的第一反应是近剪裁平面可能是问题所在，但由于这些伪影仅出现在选定的设备上，我不认为这是问题所在。关于可能导致这种情况的任何其他想法？

此外，上图中没有很好地捕捉到这一点，但工件不是静态的——它们会随着模型的旋转而移动，等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T23:11:01.657

我认为着色器代码中的光照计算可能是错误的。

这看起来就像只使用环境光而没有漫反射和镜面反射。

我还希望您检查是否将纹理从 BGRA 转换为 RGBA。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T19:10:04.017

该问题已得到修复。我通过使用解决了这个问题

```
glTexImage2D() 
```

当我设置我的 mipmap 级别时，缓冲区为 NULL，然后使用

```
glTexSubImage2D() 
```

将纹理数据上传到每个级别时。

# eclipse - 在我的系统上安装较新版本的 JDK 后出现 ANT 脚本错误

> ID：15011390
> 
> 赞同：12
> 
> 时间：2013-02-21T20:16:12.533
> 
> 标签：eclipse, ant, jdk1.6

从 1.6.0_37 安装更新版本的 JDK 6 (1.6.0_41) 后，我进入 Eclipse 并更新了首选项菜单下 Java 部分中的已安装 JRE。然后我进入我的 ANT 脚本来测试我所做的一些更改，当我尝试运行 ANT 脚本时，我得到了这个错误：

未找到指定的 VM 安装：键入标准 VM，名称为 jdk1.6.0_37

指定的 VM 不是 jdk1.6.0_41。这也已在 PATH 和 JAVA_HOME 环境变量中更新。

关于在其他地方进行更改以便 ANT 看到这一点的任何建议？

这是我得到的错误：

![在此处输入图像描述](../Images/4326b94097cf970075577c19e8c4300c.png)

谢谢。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-21T21:01:46.130

在 Eclipse 中进行了额外的搜索之后，我在 ANT 视图中发现了一个外部配置工具选项，当右键单击我的 Ant 脚本名称时，在 JRE 选项卡下是设置所在的位置。我将设置更改为使用与工作区相同的 JRE，然后一切都很好。

以防万一其他人遇到同样的问题，我认为发布我的发现可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-26T09:48:17.907

Ant 不会介意新的 jdk 版本，只要它的名称在 Preferences / Java / Installed JREs 下保持不变。

# javascript - 我们如何使用 `mouseover` 和 `mouseout` 事件？

> ID：15011391
> 
> 赞同：2
> 
> 时间：2013-02-21T20:16:12.690
> 
> 标签：javascript, jquery, mouseover

正如 JQuery 文档所说，我已经将许多行 mouseover 转换为 mouseenter 因为它不会多次触发。

[http://api.jquery.com/mouseover/](http://api.jquery.com/mouseover/)

> **`mouseover`**当指针也移动到子元素时触发
> 
> **`mouseenter`**仅当指针移入绑定元素时触发。

甚至`hover`事件也可以作为 mouseenter 和 mouseleave，而不是作为 mouseover 和 mouseout。

这让我想知道为什么会有`mouseover`事件如果`mouseenter`可以做到这一切。

对我来说，`mouseover`当您在元素上移动鼠标时会意外触发。它似乎真的取决于子元素的深度。

是否有一个好的用例`mouseover`and`mouseout`需要多次触发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:27:08.420

`mouseover`据我所知， /根本没有用例`mouseout`。它们存在的唯一原因是因为这些事件是由浏览器触发的，因为[它们位于标准 DOM 事件列表中](http://en.wikipedia.org/wiki/DOM_events)。 `mouseenter`并且`mouseleave`不是标准事件，*但*它们是特定于 jQuery 的构造。

我想一个用例是，如果您希望在将鼠标移出和移出事件绑定到的元素的子元素上时触发事件。我想不出任何具体的东西，但至少这个功能是可用的。如果只有`mouseenter`/`mouseleave`存在，你就没有选择的余地了。

来自[http://code.jquery.com/jquery-1.9.1.js](http://code.jquery.com/jquery-1.9.1.js)：

```
jQuery.each({
    mouseenter: "mouseover",
    mouseleave: "mouseout"
}, function( orig, fix ) {
    /* content snipped */ 
```

推测：jQuery 的创建者创建`mouseenter`非标准`mouseleave`事件的原因是因为它们的行为与您期望的`mouseover`/`mouseout`事件一样工作（即不考虑后代）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T20:22:54.597

因为事件包含光标的坐标。所以如果你需要跟踪目标下的鼠标坐标，你必须使用'mouseover'

# sql - 用于识别“最佳执行者”的 SQL 查询 [?]

> ID：15011395
> 
> 赞同：4
> 
> 时间：2013-02-21T20:16:26.047
> 
> 标签：sql, oracle11g

我仍在学习 Oracle SQL，希望得到您的指导。

假设，我们有 MONTHLY_SALES_TOTALS 表，它有 3 个字段：`name`、`region`、`amount`。我们需要确定每个地区的最佳销售人员。最佳意味着它们的数量等于该地区的最大值。

```
CREATE TABLE montly_sales_totals
(
 name varchar(20), 
 amount numeric(9), 
 region varchar(30)
);

INSERT ALL
 INTO montly_sales_totals (name, amount, region) VALUES ('Peter', 55555,  'east')
 INTO montly_sales_totals (name, amount, region) VALUES ('Susan', 55555, 'east')
 INTO montly_sales_totals (name, amount, region) VALUES ('Mark', 1000000, 'south')
 INTO montly_sales_totals (name, amount, region) VALUES ('Glenn', 50000, 'east')
 INTO montly_sales_totals (name, amount, region) VALUES ('Paul', 500000, 'south')
SELECT * from dual; 
```

可能的解决方案：

```
SELECT m1.name, m1.region, m1.amount 
FROM montly_sales_totals m1
JOIN 
 (SELECT MAX(amount) max_amount, region FROM montly_sales_totals GROUP BY region) m2
 ON (m1.region = m2.region)
WHERE m1.amount = m2.max_amount
ORDER by 2,1; 
```

*SQL小提琴*：[http ://sqlfiddle.com/#!4/6a2d8/6](http://sqlfiddle.com/#!4/6a2d8/6)

现在我的问题：

1.  这样的查询效率如何？
2.  如何/应该如何简化和/或改进它？
3.  我无法使用**Top**，因为“最大”行数因地区而异。它是我可以使用的另一个直接功能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T20:18:42.887

我会使用 RANK()：

```
SELECT * 
FROM (
   SELECT name, amount, region,
       RANK() OVER (PARTITION BY region ORDER BY amount DESC) rnk
   FROM montly_sales_totals
  ) t
WHERE t.rnk = 1 
```

这是[SQL Fiddle的修改版本](http://sqlfiddle.com/#!4/6a2d8/8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T20:40:13.190

There are a number of ways one can go about this. Here's another:

```
 select S.region, S.name, V.regionmax
       from sales as S
       inner join
       (
        select region, max(amount) as regionmax
       from sales group by region 
       ) as V
       on S.region = V.region and S.amount = regionmax 
```

As to efficiency, the main factor is the use of the proper index(es). Inline views can perform very well.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T21:25:32.850

我喜欢 CTE 语法，但使用该网站所花费的时间是相同的 2 毫秒，所以我无法击败你的 :)

```
with Maximums as (
  SELECT region,
    MAX(amount) max_amount
  FROM montly_sales_totals GROUP BY region
)
SELECT m1.name, m1.region, m1.amount 
FROM montly_sales_totals m1, Maximums 
WHERE (m1.amount = Maximums.max_amount)
  and (m1.region = Maximums.region)
ORDER by 2,1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T14:26:02.283

你也可以通过使用该功能来做到这一点......

```
select * from (select m1.*, row_number( ) over (partition by m1.region order by m1.amount desc,m1.name  desc ) max_sal from montly_sales_totals m1 ) where max_sal =1 ; 
```

如果两个员工 sal 相同，则此查询可以做一件额外的事情！

# c++ - 带有 Eclipse CDT 的 GTest - 添加库后无法解析函数

> ID：15011396
> 
> 赞同：2
> 
> 时间：2013-02-21T20:16:26.557
> 
> 标签：c++, linux, compiler-errors, eclipse-cdt, googletest

我在让 Google 测试框架在 Fedora 18 上运行的 Eclipse CDT 中工作时遇到问题。

*   fuse_gtest_files.py 用于在单独的目录 (gtest_lib) 中创建 gtest.h 和 gtest-all.cc 文件，这些文件已添加到项目中并从发布/调试版本中排除
*   进行了新的构建配置（UnitTests），并排除了我的 src 文件中带有 main() 的 .cpp
*   使用 gtest main() 制作了一个文件夹（测试）来保存我的单元测试和 .cpp，也从发布/调试版本中排除
*   GCC 编译器的包含路径 (-l) 已更新为包含工作区文件夹 gtest_lib，用于 test 和 gtest_lib 文件夹。test 文件夹还包括 src 文件夹。
*   pthread 库已添加到 GCC 编译器中。

Eclipse 现在显示它能够找到头文件 gtest/gtest.h，但是应该包含在 gtest-all.cc 中的所有函数都显示为“无法解决”。主要是 InitGoogleTest 和 RUN_ALL_TEST()。有什么建议么？

# visual-studio-lightswitch - WCF 查询返回 null

> ID：15011397
> 
> 赞同：0
> 
> 时间：2013-02-21T20:16:27.150
> 
> 标签：visual-studio-lightswitch

我一直在阅读这篇文章[http://traf-o-data.blogspot.com/2011/08/linking-lightswitch-data-to-logged-in.html](http://traf-o-data.blogspot.com/2011/08/linking-lightswitch-data-to-logged-in.html)并且我创建了一个屏幕来将数据添加到表销售人员。

当 Lightswitch 创建屏幕时，它会添加一个 AutocompleteBox 来选择用户。当我运行应用程序时，它按预期工作，我可以在 AutocompleteBox 中看到用户列表。

现在我想在另一个屏幕中查询用户表，编写以下语句

```
var query =
  from u in this.DataWorkspace.UsersDomainServiceData.Users
  select u; 
```

并且查询什么也不返回。

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:06:22.813

您是否已将*Key()*属性/注释添加到将用作实体*ID的属性？*

```
<Key()>
Public Property ID As Integer 
```

没有一个，您将无法获得任何记录。您还需要确保实体的*ID*属性具有值，并且 & 是唯一的。

# html - 单击按钮时出现“弹出窗口” - 如何使用 CSS 定位它？

> ID：15011398
> 
> 赞同：0
> 
> 时间：2013-02-21T20:16:27.307
> 
> 标签：html, css

我希望它被定位在内容之上，所以我认为绝对定位是要走的路，所以它不会把其他东西推开。

但是，我想确保它位于单击它的按钮下方。如果我使用绝对位置并将右侧设置为 0（按钮位于页面的右侧，因此我将弹出框定位在那里）它可以工作，但是如果我使页面更宽或更窄，它会相应地移动。

如何让它粘在按钮下方的区域但不推开任何内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:19:37.470

使用绝对位置和 z-index。

这`popup`在窗口中居中：

```
.popup {
    position:absolute;
    display:block;
    width:200px;
    left:50%;
    margin-left:-100px; //half of the width
    top:50px;
    z-index:9;
} 
```

# java - Java 类的外部属性

> ID：15011403
> 
> 赞同：1
> 
> 时间：2013-02-21T20:16:42.740
> 
> 标签：java, eclipse, properties

我有一个类文件，它需要一个`.properties`带有配置的外部文件才能运行。我可以通过终端运行它。但是，我想使用 eclipse 来实现这一点。

```
java path/to/class --properties path/to/properties.properties 
```

有谁知道我需要在哪里设置什么才能实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T20:19:49.877

运行->运行配置->Java 应用程序->[右键单击] 新建并在参数部分提供您的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T20:21:04.927

*   eclipse 将从源目录的根目录加载属性或
*   eclipse runner（即运行任何类）有一个选项卡，允许您手动指定jvm args。

# restkit - 如何防止多个 RKResponseDescriptor 匹配？

> ID：15011404
> 
> 赞同：4
> 
> 时间：2013-02-21T20:16:43.317
> 
> 标签：restkit

我在使用 2 个实体的应用程序中使用 RestKit 0.20.0rc1：

1.  一个“笔记”（NoteClass）。
2.  一个“集合”（SetClass），其中包含一组音符。

我有以下 2 个响应描述符（其中包括）：

```
// GET /sets/:setID/notes
// Get a set's notes. Response looks like this:
//   {"notes": [ (array of NoteClass dictionaries) ],
//               ...more stuff...
//   }
RKResponseDescriptor *noteResponseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:[NoteClass rkEntityMapping]
                                                             pathPattern:@"/sets/:setID/notes"
                                                                 keyPath:@"notes"
                                                             statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];
[objectManager addResponseDescriptor:noteResponseDescriptor];

// GET /sets/:setID
// Get information about a set. Response looks like this:
//   {"name": "My Set",
//    "numNotes": 3,
//    ...more stuff...
//   }
RKResponseDescriptor *setResponseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:[SetClass rkEntityMapping]
                                                             pathPattern:@"/sets/:setID"
                                                                 keyPath:nil
                                                             statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];
[objectManager addResponseDescriptor:setResponseDescriptor]; 
```

当我请求“/sets/:setID/notes”时，noteResponseDescriptor 匹配（预期）。但是，setResponseDescriptor 也匹配（意外）。我相信这是因为响应描述符的路径模式与子字符串“/sets/:setID”匹配，并且因为键路径为零。结果，当我发出请求时，我得到的 RKMappingResult 包含一个 NoteClass 对象数组（预期）和一个空的 SetClass 对象（意外）。

如何防止 setResponseDescriptor 匹配此注释端点？我还不能向 setResponseDescriptor 添加关键路径，所以我更喜欢这样的解决方案，它允许我说“match /sets/:setID$”之类的内容，其中“$”表示 URL 的结尾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:36:43.217

事实证明，现在有一种方法可以防止您的示例出现多次匹配（请参阅[此处](https://github.com/RestKit/RestKit/issues/1192)的讨论）。

虽然正在寻找解决方案，但您有几个选项可以解决此问题：

1.  更改您的 API 网址，以免导致歧义
2.  检查映射结果对象的类型并丢弃任何意外对象
3.  按照讨论线程中的建议修改 [RKResponseDescriptor matchesPath:]。

但是，每种解决方案都以自己的方式存在缺陷。

# php - Kohana验证码模块

> ID：15011408
> 
> 赞同：0
> 
> 时间：2013-02-21T20:17:13.787
> 
> 标签：php, frameworks, kohana, captcha

我正在尝试将[kohana-captcha 模块](https://github.com/kolanos/kohana-captcha)用于 Kohana 3.3 项目。在验证之前一切正常。

问题是无论生成什么图像，验证码模块总是显示不同的答案。这是我的代码示例：

```
<?php defined('SYSPATH') or die('No direct script access.');

class Controller_User extends Controller_Template {

    public $template = "template";

    public function action_create()
    {
            if (isset($_POST['captcha']))
            {
                print $_POST['captcha'];
                print ">>>".Captcha::valid($_POST['captcha'])."<<<";
            }

            $captcha = Captcha::instance();

            $this->template->content = View::factory('user/create')
                ->bind('captcha', $captcha);
    }
}

?> 
```

查看代码：

```
<form method="post" action="/user/create/" class="form-horizontal" id="form">
    <div class="control-group">
        <label class="control-label" for="inputCaptcha">
            <?=$captcha?>
        </label>
        <div class="controls">
          <input type="text" id="inputCaptcha" placeholder="Код с картинки" name="captcha">
          <span class="help-inline"></span>
        </div>
    </div>    
</form> 
```

`$_SESSION and $_COOKIE`数组也是空的。关键是我看到验证码图像，输入代码，提交表单，然后什么也没收到。`Captcha::valid($_POST['captcha'])`什么都没有告诉我。当我尝试制作`print_r($captcha)`后`Captcha::instance()`，它向我展示了一个具有受保护的“响应”属性但它包含完全不同的字母和数字的对象。

例如，我看到一张带有“KX5R”验证码的图像，这是 print_r($captcha) 的结果：

```
Captcha_Alpha Object ( [driver:protected] => [response:protected] => MWXF [image:protected] => [image_type:protected] => png ) 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:21:37.750

您应该检查您的`POST`变量（在本例中为“验证码”）是否等于验证码的实例。因此，您应该在您正在验证的语句之前启动`Captcha`对象。`if``post`

像这样的东西：

```
$captcha = Captcha::instance();

$this->template->content = View::factory('user/create')
    ->set('captcha', $captcha);

if ($this->request->method() === Request::POST)
{
    if (Captcha::valid($_POST['captcha']))
        .. do something if captcha is OK
    else 
        ..do something if captcha is not OK 
} 
```

# c# - LINQ to SQL 中的堆栈溢出异常

> ID：15011413
> 
> 赞同：5
> 
> 时间：2013-02-21T20:17:25.383
> 
> 标签：c#, entity-framework, linq-to-sql, stack-overflow

我有一种方法，它基于一些参数在给定字符串列表的两个日期之间找到“交易”。当列表大于 1000 时，我得到一个堆栈溢出异常，试图在列表上进行迭代。

这是我的代码

```
public List<string> CodesWithTransactionsBetweenDates(DateTime startInclusive, DateTime endExclusive, List<string> associatedCodes, int marketId)
    {
        List<string> codesWithTransactionsInPeriod = new List<string>();
        using (var context = new MarketPlaceEntities())
        {
            var transactionList = (from transactions in context.Transactions
                                   where
                                    associatedCodes.Contains(transactions.User.Code) &&
                                    transactions.MarketId == marketId &&
                                    transactions.Date >= startInclusive &&
                                    transactions.Date < endExclusive
                                   group transactions by transactions.User.Code into uniqueIds
                                   select new { UserCode = uniqueIds.Key });
            foreach (var transaction in transactionList)
            {
                codesWithTransactionsInPeriod.Add(transaction.UserCode);
            }
            return codesWithTransactionsInPeriod;
        }
    } 
```

这是堆栈跟踪......它超出了视觉工作室可以处理的点。

```
System.Data.Entity.dll!System.Data.Query.InternalTrees.BasicOpVisitor.VisitChildren(System.Data.Query.InternalTrees.Node n) + 0x3 bytes 
System.Data.Entity.dll!System.Data.Query.PlanCompiler.GroupAggregateRefComputingVisitor.VisitDefault(System.Data.Query.InternalTrees.Node n) + 0x2b bytes   
System.Data.Entity.dll!System.Data.Query.InternalTrees.BasicOpVisitor.VisitRelOpDefault(System.Data.Query.InternalTrees.RelOp op, System.Data.Query.InternalTrees.Node n) + 0xe bytes   
System.Data.Entity.dll!System.Data.Query.InternalTrees.BasicOpVisitor.VisitApplyOp(System.Data.Query.InternalTrees.ApplyBaseOp op, System.Data.Query.InternalTrees.Node n) + 0xe bytes  
System.Data.Entity.dll!System.Data.Query.InternalTrees.BasicOpVisitor.Visit(System.Data.Query.InternalTrees.OuterApplyOp op, System.Data.Query.InternalTrees.Node n) + 0xe bytes    
System.Data.Entity.dll!System.Data.Query.InternalTrees.OuterApplyOp.Accept(System.Data.Query.InternalTrees.BasicOpVisitor v, System.Data.Query.InternalTrees.Node n) + 0x10 bytes   
System.Data.Entity.dll!System.Data.Query.InternalTrees.BasicOpVisitor.VisitNode(System.Data.Query.InternalTrees.Node n) + 0x14 bytes    
System.Data.Entity.dll!System.Data.Query.InternalTrees.BasicOpVisitor.VisitChildren(System.Data.Query.InternalTrees.Node n) + 0x60 bytes 
```

我的问题是有什么方法可以处理这个查询，这样我就不必担心堆栈溢出异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:28:15.687

似乎您通过迭代大型集合来炸毁堆栈，但同时还将这些对象添加到列表中，这会产生两个大但基本相同的集合。相反，只需将 AddRange 用于接受任何 IEnumerable 的列表。

```
List<string> codesWithTransactionsInPeriod = new List<string>();
using (var context = new MarketPlaceEntities())
    {
        return codesWithTransactionsInPeriod.AddRange((from transactions in context.Transactions
                               where
                                associatedCodes.Contains(transactions.User.Code) &&
                                transactions.MarketId == marketId &&
                                transactions.Date >= startInclusive &&
                                transactions.Date < endExclusive
                               group transactions by transactions.User.Code into uniqueIds
                               select uniqueIds.Key));
    } 
```

或者没有实例化一个空列表......

```
using (var context = new MarketPlaceEntities())
    {
        return (from transactions in context.Transactions
                               where
                                associatedCodes.Contains(transactions.User.Code) &&
                                transactions.MarketId == marketId &&
                                transactions.Date >= startInclusive &&
                                transactions.Date < endExclusive
                               group transactions by transactions.User.Code into uniqueIds
                               select uniqueIds.Key).ToList<string>();
    } 
```

或保持懒惰......（编辑为使用懒惰）

```
public Lazy<List<string>> LazyCodesWithTransactionsBetweenDates((DateTime startInclusive, DateTime endExclusive, List<string> associatedCodes, int marketId)
{
    return new Lazy<List<string>>(CodesWithTransactionsBetweenDates(startInclusive, endExclusive, associatedCodes, marketId));
}

private List<string> CodesWithTransactionsBetweenDates(DateTime startInclusive, DateTime endExclusive, List<string> associatedCodes, int marketId)
{
    using (var context = new MarketPlaceEntities())
    {
        return (from transactions in context.Transactions
                           where
                            associatedCodes.Contains(transactions.User.Code) &&
                            transactions.MarketId == marketId &&
                            transactions.Date >= startInclusive &&
                            transactions.Date < endExclusive
                           group transactions by transactions.User.Code into uniqueIds
                           select uniqueIds.Key).ToList<string>();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T20:50:34.363

您在这里有两个大问题 - 对于每个唯一的 id 键，您正在使用单个属性在内存中创建新对象。此外，您还有无用的本地列表，您可以在其中复制所有这些对象。每次当列表的容量被填满时，都会创建新的内部数组并将所有对象复制到那里。

您可以将流处理与 IEnumerable 一起使用。在这种情况下，您不需要将所有数据保存在内存中：

```
public IEnumerable<string> CodesWithTransactionsBetweenDates(
         DateTime startInclusive, DateTime endExclusive, 
         List<string> associatedCodes, int marketId)
{
    // do not use local list

    using (var context = new MarketPlaceEntities())
    {
        return from transactions in context.Transactions
                where associatedCodes.Contains(transactions.User.Code) &&
                      transactions.MarketId == marketId &&
                      transactions.Date >= startInclusive &&
                      transactions.Date < endExclusive
                      group transactions by transactions.User.Code into uniqueIds
                      select uniqueIds.Key; // do not create anonymous object
    }
} 
```

如果您需要列表，您可以申请`ToList()`此查询。但是您绝对不需要创建匿名对象并将它们复制到本地列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T22:41:16.687

好的，经过一些试验和错误并查看了一些替代方案，我想出了一个似乎效果很好的解决方案。

```
public List<string> CodesWithTransactionsBetweenDates(DateTime startInclusive, DateTime endExclusive, List<string> associatedCodes, int marketId)
{
    using (var context = new MarketPlaceEntities())
    {
        var list = (from transactions in context.Transactions                            
                where
                    transactions.MarketId == marketId &&
                    transactions.Date >= startInclusive &&
                    transactions.Date < endExclusive                            
                select transactions.User.Code).Distinct().ToList<string>();

        return list.Where(c => associatedCodes.Contains(c)).ToList();
    }            
} 
```

我想在 where 子句中使用的列表存在某种限制，这最终成为了一个更好的解决方案，因为我限制了用户代码，然后做一个简单的过滤器来只获取相关代码列表中的那些.

# javascript - JSON - 根据 json 的索引显示数据

> ID：15011415
> 
> 赞同：4
> 
> 时间：2013-02-21T20:17:31.073
> 
> 标签：javascript, jquery, json, indexing

我正在尝试以**Bullets**的形式显示特定的 json 数据。将每***章***资料放入`<li>`，将每篇***标题***放入`<p>`，并使那些标题成为一个`link`。最后，考虑一下点击***标题***显示相关***内容*** 的索引`<div>`。我已经在下面有一些代码（还没有工作）。

**网页**：

```
<div id="page1">
    <ul id="courses"></ul>
</div>
<div id="page2">
    <p id="content"></p>
</div> 
```

**JS代码**：

```
var jsonString = '[{"chapter":"General","title":"News forum","content":"Text1"},
{"chapter":"CHAPTER 1","title":"1.1 Introduction","content":"Text2"},
{"chapter":"CHAPTER 1","title":"1.2 Main Idea","content":"Text3"},
{"chapter":"CHAPTER 2","title":"2.1 Architecture","content":"Text4"},
{"chapter":"CHAPTER 3","title":"3.1 Liter.overview","content":"Text5"}]';

var myData = JSON.parse(jsonString);

$(document).ready(function() {
    var $clist = $('#courses');
    for(var i in myData) {
        $('<li><h3>' +this.[i].chapter+ '</h3><p><a href="#page2" onclick="dContent(i)">' +this.title+ '</a></p></li>').appendTo($clist);
    }

    function dContent() {
        var $ccontent = $('#content');
        $(this.[i].content).appendTo($ccontent);
    }
}); 
```

预期结果：

```
- General
    News forum          // onclick display 'Text1' in <p id="content">
- CHAPTER 1
    1.1 Introduction    // onclick display 'Text2' in <p id="content">
    1.2 Main Idea       // onclick display 'Text3' in <p id="content">
- CHAPTER 2
    2.1 Architecture    // onclick display 'Text4' in <p id="content">
- CHAPTER 3
    3.1 Liter.overview  // onclick display 'Text5' in <p id="content"> 
```

任何帮助，将不胜感激。

**更新**：这是[JSFIDDLE](http://jsfiddle.net/rutZA/)项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:20:59.013

```
var jsonString = '[{"chapter":"General","title":"News forum","content":"Text1"},{"chapter":"CHAPTER 1","title":"1.1 Introduction","content":"Text2"},{"chapter":"CHAPTER 1","title":"1.2 Main Idea","content":"Text3"},{"chapter":"CHAPTER 2","title":"2.1 Architecture","content":"Text4"},{"chapter":"CHAPTER 3","title":"3.1 Liter.overview","content":"Text5"}]';
var myData = JSON.parse(jsonString);

var dContent = function(event) {
    $ccontent.html($(this).data('content'));
}

var $clist = $('#courses');
var $ccontent = $("#content");
var html = '';
var chapterList = [];

$clist.on('click', 'li', dContent);

$.each(myData, function(index, item) {
    if ($.inArray(item.chapter, chapterList) === -1) {
        chapterList.push(item.chapter);
        html += '<li data-content="'+ item.content +'"><h3>' + item.chapter + '</h3><p><a href="#page2">' + item.title + '</a></p></li>';
    }
    else {
        html += '<li data-content="'+ item.content +'"><p><a href="#page2">' + item.title + '</a></p></li>'
    }
});
$clist.html(html); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T12:24:42.303

我已经编写了一个脚本来执行此操作，包括将同一章节中的项目放在一起。你可以在这里看到一个[**演示小提琴**](http://jsfiddle.net/qWT4L/)。

我大部分都使用原生 JavaScript，除了 jQuery`$(a).on('click', ..`和`$(document).ready`确保兼容性。为什么这么长？因为我`<ul>`用 DOM 方法构建了，而不是 html 字符串。这使得缓存和附加元素变得容易。最后，通过生成器函数添加内容。我这样做的方式意味着页面将使用更多的内存，但你可以拥有**在内容部分显示任何**在 JavaScript 中有效的字符串。您可能希望对其进行样式设置`whitespace: pre-wrap;`以按预期显示新行。

无论如何，这是代码

```
var jsonString = '[{"chapter":"General","title":"News forum","content":"Text1"},\
{"chapter":"CHAPTER 1","title":"1.1 Introduction","content":"Text2"},\
{"chapter":"CHAPTER 1","title":"1.2 Main Idea","content":"Text3"},\
{"chapter":"CHAPTER 2","title":"2.1 Architecture","content":"Text4"},\
{"chapter":"CHAPTER 3","title":"3.1 Liter.overview","content":"Text5"}]';
// the \ at line ends is to escape the new line in the string literal

var myData = JSON.parse(jsonString);

$(document).ready(function() {
    var courses_ul = document.getElementById('courses'), // cache elements
        content_elm = document.getElementById('content'),
        i, li, h3, p, a, // vars for loop
        chapters = {}, chap; // cache chapters
    for (i = 0; i < myData.length; ++i) {
        chap = myData[i].chapter; // shorthand since we'll use it a few times
        // make <p>, <a>
        p = document.createElement('p');
        a = document.createElement('a'); // could append <a> to <p> here if you want
        a.setAttribute('href', '#page2');
        a.appendChild(document.createTextNode(myData[i].title));
        // set up click
        $(a).on('click', (function (content) { // generator - will give scope to
            return function () { // this returned event listener.
                content_elm.innerHTML = '';
                content_elm.appendChild(document.createTextNode(content));
            };
        }(myData[i].content))); // chose `content` not `i` so no reliance on `myData`
        // now check cache if chapter exists -
        if (chap in chapters) { // retreive <li> for chapter from cache
            li = chapters[chap]; // from cache
            // append <p>, <a>
            li.appendChild(p).appendChild(a);
        } else { // if not in cache
            li = document.createElement('li'); // make a new <li>
            chapters[chap] = li; // and cache
            // make & append <h3>
            h3 = document.createElement('h3');
            h3.appendChild(document.createTextNode(chap));
            li.appendChild(h3);
            // append <p>, <a> and to <ul>
            courses_ul.appendChild(li).appendChild(p).appendChild(a);
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T20:22:18.467

您的 JSON 结构无效。正确的结构如下：

```
[
    {
        "chapter": "General",
        "title": "News forum",
        "content": "Text1"
    },
    {
        "chapter": "CHAPTER 1",
        "title": "1.1 Introduction",
        "content": "Text2"
    },
    {
        "chapter": "CHAPTER 1",
        "title": "1.2 Main Idea",
        "content": "Text3"
    },
    {
        "chapter": "CHAPTER 2",
        "title": "2.1 Architecture",
        "content": "Text4"
    },
    {
        "chapter": "CHAPTER 3",
        "title": "3.1 Liter.overview",
        "content": "Text5"
    }
] 
```

请注意，`3.1 Liter.overview","content":"Text5"},`您的 JSON 结构中的逗号在这里，它在这里失败

**用代码更新答案**

```
var jsonString = '[{"chapter": "General","title": "News forum","content": "Text1"},{"chapter": "CHAPTER 1","title": "1.1 Introduction","content": "Text2"},{"chapter": "CHAPTER 1","title": "1.2 Main Idea", "content": "Text3"},{"chapter": "CHAPTER 2","title": "2.1 Architecture","content": "Text4"},{"chapter": "CHAPTER 3","title": "3.1 Liter.overview","content": "Text5"}]';

var myData = JSON.parse(jsonString);
$(document).ready(function() {
    function dContent() {
       $("#content").css("border","2px solid red").css("height","100px");
       $("#content").html($(this).data('value'));
    }
     $("#courses").on('click','li', dContent) 
    $.each(myData, function(index,item) { 
    $("#courses").append("<li class='li' data-value="+item.content+">"+item.chapter+"  <p>"+item.title+"</p></li>");

    })

}); 
```

[**JSFIDDLE 上的演示**](http://jsfiddle.net/refhat/Yfdcx/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T23:22:54.763

`this.[i].chapter`应该是`myData[i].chapter`。事实上，这是一个语法错误。

然后你应该重新考虑你的其他用法`this`是否正确。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T23:39:02.350

将其复制到您的 JSFiddle 并检查 jQuery，将使其工作。

```
var jsonString = '[{"chapter":"General","title":"News forum","content":"Text1"},{"chapter":"CHAPTER 1","title":"1.1 Introduction","content":"Text2"},{"chapter":"CHAPTER 1","title":"1.2 Main Idea","content":"Text3"},{"chapter":"CHAPTER 2","title":"2.1 Architecture","content":"Text4"},{"chapter":"CHAPTER 3","title":"3.1 Liter.overview","content":"Text5"}]';

var myData = JSON.parse(jsonString);

$(document).ready(function() {
    var $clist = $('#courses');

    $.each(myData, function(i,o){
        $('<li><h3>' +o.chapter+ '</h3><p>' +
          '<a href="#page2" onclick="dContent(\''+o.content+'\')">' +
          o.title + '</a></p></li>').appendTo($clist);
    });

    window.dContent = function(content) {
        var $ccontent = $('#content');
        $ccontent.append(content);

    } 
}); 
```

# prolog - 如何在 swipl 上运行 prolog 并一次性返回所有痕迹

> ID：15011417
> 
> 赞同：1
> 
> 时间：2013-02-21T20:17:40.257
> 
> 标签：prolog, swi-prolog

1：如果一个查询即。`a(X).`返回多个答案，如何让程序一次性返回所有答案和跟踪。

2：如何自动运行程序，即`a(X).`在我将`.pl`文件加载到 swipl 时打印所有答案，即在命令之后

```
% swipl -f foo.pl 
```

然后它返回所有答案`X`

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T00:24:28.687

你需要[皮带](http://www.swi-prolog.org/pldoc/doc_for?object=leash/1)和跟踪

```
swipl -s f.pl -g "leash(-all),trace,numbers(X),print(X),nl,fail." -t halt
% /home/carlo/.plrc compiled 0.04 sec, 1,439 clauses
% /home/carlo/prolog/f.pl compiled 0.00 sec, 2 clauses
   Call: (6) numbers(_G1453)
   Call: (7) between(1, 10, _G1453)
   Exit: (7) between(1, 10, 1)
   Exit: (6) numbers(1)
   Call: (6) print(1)
1
   Exit: (6) print(1)
   Call: (6) nl

   Exit: (6) nl
   Call: (6) fail
   Fail: (6) fail
   Redo: (7) between(1, 10, _G1453)
   Exit: (7) between(1, 10, 2)
   Exit: (6) numbers(2)
   Call: (6) print(2)
2
   Exit: (6) print(2)
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T20:29:55.463

这是一个带有简单子句的简单文件：

```
$> cat f.pl
numbers(X) :-
  between(1,10,X). 
```

您可以使用`-g`选项来设定目标：

```
$> swipl -s f.pl -g "numbers(X),print(X),nl,fail." -t halt.
% .../f.pl compiled 0.00 sec, 2 clauses
1
2
3
4
5
6
7
8
9
10 
```

# html - 未设置边框时出现白色边框

> ID：15011419
> 
> 赞同：-1
> 
> 时间：2013-02-21T20:17:55.167
> 
> 标签：html, css

我的索引页上出现了一条奇怪的 1px 白线。我搜索了代码，但似乎在任何地方都找不到。

你可以在这里看到它[http://talkyoudown.net/](http://talkyoudown.net/) - 在文本开始之前的右下角。我可以发布 CSS 源代码，但这会占用太多空间。

如果您查看源代码，您可以看到它在 body 类中（我认为），但我没有在 CSS 中设置任何边框。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T20:20:13.300

这是因为

```
.body{
    background: "url("../images/bg-content.png") repeat-x scroll left top transparent";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T20:22:02.093

它是您的背景图像，特别是您仅在 x 轴上重复的事实。如果您在以下位置设置背景`div.body`：

```
div.body {
    background: url(../images/bg-content.png) repeat left top;
} 
```

它显示了完整的东西，因为它在 x 和 y 轴上重复。如果你真的想让它有一个白色的背景，那就填满它。否则……为什么是背景？

# r - ggplot2 - 对重叠图使用两种不同的色标

> ID：15011422
> 
> 赞同：12
> 
> 时间：2013-02-21T20:17:59.533
> 
> 标签：r, ggplot2, color-scheme

我试图覆盖两个不同的图。一个是`geom_boxplot`，另一个`geom_jitter`。我希望每个都有自己的色标。但是当我添加第二个色阶时，我得到了错误

```
 "Scale for 'fill' is already present. Adding another scale for 'fill', 
  which will replace the existing scale." 
```

我假设我做错了什么。任何建议将不胜感激

这是我的工作代码的粗略示例：

```
P <-  ggplot(dat) + 
          geom_boxplot(aes(x=ve, y=metValue, fill=metric), alpha=.35, w=0.6, notch=FALSE, na.rm = TRUE) + 
          scale_fill_manual(values=cpalette1) + 
          geom_hline(yintercept=0, colour="#DD4466", linetype = "longdash") +
          theme(legend.position="none")

P + geom_jitter(dat2, aes(x=ve, y=metValue, fill=atd), 
                size=2, shape=4, alpha = 0.4, 
                position = position_jitter(width = .03, height=0.03), na.rm = TRUE) + 
              scale_fill_manual(values=cpalette2) 
```

`dat`并`dat2`具有相同的架构，但不同的值。

我发现了几个解决重叠图的例子，但没有一个似乎解决了这个特定问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-21T20:39:33.240

First, made two sample data frames with the same names as in example.

```
dat<-data.frame(ve=rep(c("FF","GG"),times=50),
                metValue=rnorm(100),metric=rep(c("A","B","D","C"),each=25),
                atd=rep(c("HH","GG"),times=50))
dat2<-data.frame(ve=rep(c("FF","GG"),times=50),
                metValue=rnorm(100),metric=rep(c("A","B","D","C"),each=25),
                atd=rep(c("HH","GG"),times=50)) 
```

I assume that you do not need to use argument `fill=` in the `geom_jitter()` because color for `shape=4` can be set also with `colour=` argument. Then you can use `scale_colour_manual()` to set your values. Instead of `cpallete` just used names of colors.

```
P <-  ggplot(dat) + 
  geom_boxplot(aes(x=ve, y=metValue, fill=metric), alpha=.35, w=0.6, notch=FALSE, na.rm = TRUE) +  
  geom_hline(yintercept=0, colour="#DD4466", linetype = "longdash") +
  scale_fill_manual(values=c("red","blue","green","yellow"))+
  theme(legend.position="none")

P + geom_jitter(data=dat2, aes(x=ve, y=metValue, colour=atd), 
                size=2, shape=4, alpha = 0.4, 
                position = position_jitter(width = .03, height=0.03), na.rm = TRUE) + 
                scale_colour_manual(values=c("red","blue")) 
```

![enter image description here](../Images/36066c46e2000c919217b769c051b627.png)

# java - 如何使用 java 在 alfresco 中以编程方式获取相关（对等关联）节点？

> ID：15011423
> 
> 赞同：0
> 
> 时间：2013-02-21T20:18:00.080
> 
> 标签：java, alfresco

所以我目前有一个节点，活动，它有一个引用名为 authorised_by 的用户表的字段/关联。

在代码中，我可以像这样设置关联：

```
nodeService.createAssociation(mcdNodeRef, newAuthority, CustomContentModel.ASSOC_MCD_CAMP_AUTHORITY); 
```

现在我需要基本上对这个过程进行逆向工程，并从露天数据库中获取关联的值，但是没有 getAssociation 方法，似乎无法解决。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:38:29.993

Solved it myself, here is solution:

```
 final NodeRef oldCampaignAuthority = NodeUtils.getTargetAssociatedNodeRef(mcdNodeRef, CustomContentModel.ASSOC_MCD_CAMP_AUTHORITY, nodeService);
    String oldAuthorityID = oldCampaignAuthority.getId();
    String oldAuthorityUsername = new Node(new NodeRef(StoreRef.STORE_REF_WORKSPACE_SPACESSTORE, oldAuthorityID)).getProperties().get(ContentModel.PROP_USERNAME).toString(); 
```

# static - 如何在我的 UIViewController 中使用静态变量

> ID：15011424
> 
> 赞同：0
> 
> 时间：2013-02-21T20:18:06.390
> 
> 标签：static, singleton, uipageviewcontroller

我在一个问题上停留了 2 周。
我有一个 UILabel，它在我看来显示 soundPlayer 当前持续时间。我使用 UIPageViewController 让用户像一本真正的书一样浏览页面（我的视图）。但是当另一个视图控制器的一部分出现时，标签不会显示当前进度。（因为这是视图控制器的新实例）。
我怎样才能使这个 UILabel 是静态的？我的意思是 ViewController 的所有实例都可以访问一个 UIlabel，所以它们都只更新一个标签。
我不能使用单例设计模式，因为 UIPageViewController 至少需要我的视图控制器的 2 个实例。
每次创建视图控制器的新实例时，不应分配 soundPlayer。我应该如何解决这个困境？

您可以在天气实时应用程序中看到我的问题示例。见下图： ![在此处输入图像描述](../Images/fda0b411baf86cf357675fb8efe5d403.png)

下载示例代码：http: [//upload.ugm.ac.id/300paging.zip](http://upload.ugm.ac.id/300paging.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:07:36.550

the only change should I did is to create an static AVAudioPlayer

static AVAudioPlayer *soundPlayer;

soundPalyer is Static so there is one for all of instance objects of this class.

and in ViewDidLoad method:

```
 if (!soundPlayer) {
        soundPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:soundURL error:&error];
    } 
```

so when you navigating from one viewController to another viewController, soundPlayer wont initialized again and continue its playing.
thats all.

# colors - 计算机如何以不同的方式处理 ascii/文本和图像/颜色？

> ID：15011434
> 
> 赞同：7
> 
> 时间：2013-02-21T20:18:32.887
> 
> 标签：colors, binary, ascii

我最近一直在思考计算机硬件必须做什么样的工作才能产生我们期望的东西。

比较文本和颜色，似乎两者都依赖于 1 和 0 的组合，每个字节有 256 种可能的组合。ASCII 可以将诸如 (01100001) 之类的字母表示为字母“A”。但是可能会有颜色 R(01100001)、G(01100001)、B(01100001) 代表某种随机颜色。考虑到低层次，计算机只是读取这些 1 和 0 的集合，需要发生什么来确保计算机渲染颜色 R(01100001)、G(01100001)、B(01100001) 而不是字母 A 三遍在我的屏幕上？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T20:35:23.103

我不完全确定这个问题是否适合 Stack Overflow，但无论如何我都会继续给出一个基本的答案。尽管这实际上是一个非常复杂的问题，因为根据您想要回答的深度，我可以为此编写一整本有关计算机体系结构的书。

所以为了简单起见，我只想告诉你：这都是上下文问题。首先让我们处理文本：

例如，当您打开文本编辑器时，隐含的假设是要在其中显示的数据本质上是文本的。要显示的文本是内存中的一些字节（可能是从磁盘上的一些字节中复制出来的）。从内存的角度来看，这些字节是文本并没有神奇的内部上下文。相反，文本编辑器的源代码包含一些指向这些字节的命令，例如“这些字节代表 300 个文本字符”。然后是一系列复杂的步骤，涉及库代码一直到硬件，硬件根据 ASCII 之类的编码（还有许多其他编码文本的方式）将这些字节映射到字符，在字体中找到这些字符，将该字体写入屏幕等

关键是它不必*将*这些字节解释为文本。它只是因为这就是文本编辑器所做的。您可以假设在图像程序中打开它，并告诉它将相同的 300 个字节解释为 RGB 值的 10x10 数组（或图像）。

至于颜色，同样的逻辑适用。它们只是内存中的字节。但是当在屏幕上绘制东西的代码决定了它想用什么颜色写入什么像素时，它将通过内存映射将这些字节传输到视频卡，然后将它们转换为发送到监视器的命令（仍然以某种二进制格式表示像素和颜色，尽管现实要复杂得多），显示器本身包含固件，然后处理将这些颜色映射到物理像素的细节。代表颜色本身的数字将在某个时候转换为每个 R/G/B 通道的特定电流，以提高或降低其强度。

这就是我现在所有的时间，但这是一个开始。

**更新：**为了说明我的观点，我从[这里](http://www.gutenberg.org/files/97/97.txt)获取了 Flatland 的文本。这只是 216624 字节的 ASCII 文本（由您的 Web 浏览器根据上下文解释：.txt 扩展名有帮助，​​但 Web 服务器还提供一个 MIME 类型标头，通知浏览器它应该被解释为纯文本。您的浏览器也可能会分析字节以确定它们的模式确实看起来像纯文本的模式（并且没有大量不代表 ASCII 字符的字节）。我在文本的末尾附加了一些空格，所以它的长度是 217083，即 269 * 269 * 3，然后将其绘制为 269 x 269 RGB 图像：

![](../Images/aea5a31fccd1deefc7a7d45b06a65737.png)

看起来不是很有趣。但关键是我只是拿了那些完全相同的字节并告诉软件，“好的，现在这些是 RGB 值”。这并不是说将纯文本字节视为图像没有用。例如，它可能是一种可视化加密算法的有用方法。 [这](http://en.wikipedia.org/wiki/File:Tux_ecb.jpg)显示了使用非常不安全的算法加密的图像 - 您仍然可以很好地了解原始未加密文件中的字节模式。如果它是文本而不是图像，这将没有什么不同，因为特定语言（如英语）的文本也具有已知的统计模式。一个好的加密算法看起来会使加密的图像看起来更像随机噪声。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T20:37:44.273

Zero and one are just zero and one, nothing more. A byte is just a collection of 8 bit. The meaning you assign to information depends on what you need at the moment, what "language" you use to interpret your information. 65 is either letter A in ASCII or number 65 if you're using it in, say, `int a = 65 + 3`. At low level, different (thousands of) machine instructions are executed to ensure that your data is treated properly, depending for example on the type of file you're reading, its headers, which process requests the data, and so on. The different high-level functions you use to treat different information expand to very different machine code.

# javascript - jQuery调整图像大小

> ID：15011442
> 
> 赞同：1
> 
> 时间：2013-02-21T20:19:05.323
> 
> 标签：javascript, jquery, html, image, jquery-effects

我已经设法自动适应每行画廊的图像，具体取决于它是水平的（每行一个图像）还是垂直的（每行两个图像）。

现在的问题是我希望图像是可缩放的（在窗口调整大小时调整大小），但我不知道如何实现它。我应该怎么做？**（我正在寻找一个 javascript/jquery 解决方案来避免高度：自动问题......）**

这是网络： http: [//ldlocal.web44.net/test2/gallery.html](http://ldlocal.web44.net/test2/gallery.html)

可以在这里下载：http: [//ldlocal.web44.net/test2/test.zip](http://ldlocal.web44.net/test2/test.zip)

这是我的代码：

```
var gallery = new Gallery($('#gallery_images_inner'));

function Gallery(selector){

this.add_module = function(type, image){
    var container = $('<div />' , {
        'class' : 'gallery_container'
    }).append(image);
    if(type == 'horizontal'){
        var h_ar = image.attr('height') / image.attr('width');
        container.css({
            'width' : selector.width(),
            'height' : selector.width()*h_ar
        })
    }
    if(type == 'vertical'){
        container.css({
            'width' : v_width,
            'height' : v_height
        })
    }
    container.appendTo(selector);
    container.children('img').fitToBox();
}
var _this = this;
var gutter = 0;
// start vars for counting on vertical images
var v_counter = 0;
var w_pxls = 0;
var h_pxls = 0;
// iterates through images looking for verticals
selector.children('img').each(function(){
    if($(this).attr('width') < $(this).attr('height')){
        v_counter++;
        h_pxls += $(this).attr('height');
        w_pxls += $(this).attr('width');
    }
})
// calculates average ar for vertical images (anything outside from aspect ratio will be croped)
var h_avrg = Math.floor(h_pxls/v_counter);
var w_avrg = Math.floor(w_pxls/v_counter);
var v_ar = h_avrg/w_avrg;
var v_width = (selector.width())/2;
var v_height = v_width*v_ar;
selector.children('img').each(function(){
    if(parseInt($(this).attr('width')) > parseInt($(this).attr('height'))){
        _this.add_module('horizontal', $(this));
    }else{
        _this.add_module('vertical', $(this));
    }
})
selector.isotope({
    masonry: {
        columnWidth: selector.width() / 2
    }
});

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:27:19.070

更新所有新代码：

[http://jsfiddle.net/vYGGN/](http://jsfiddle.net/vYGGN/)

HTML：

```
<div id="content">
    <img class="fluidimage" src="http://thedoghousediaries.com/comics/uncategorized/2011-04-06-1b32832.png"
    />
</div> 
```

CSS：

```
 body {
            text-align:center;
        }
        img {
            float: right;
            margin: 0px 10px 10px 10px;
        }
        #content {
            width:70%;
            margin: 0px auto;
            text-align: left;
        } 
```

JS：

```
 $(document).ready(function () {
            function imageresize() {
                var contentwidth = $('#content').width();
                if ((contentwidth) < '300') {
                    $('.fluidimage').attr('height', '300px');
                } else {
                    $('.fluidimage').attr('height', '600px');
                }
            }

            imageresize(); //Triggers when document first loads      

            $(window).bind("resize", function () { //Adjusts image when browser resized  
                imageresize();
            });

        }); 
```

在这篇文章中找到了这个：

[http://buildinternet.com/2009/07/quick-tip-resizing-images-based-on-browser-window-size/](http://buildinternet.com/2009/07/quick-tip-resizing-images-based-on-browser-window-size/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:45:33.320

如果您想自动调整图像大小并按比例缩小它们，您所要做的就是`max-width`在`<img>`标签上设置一个 css。`$(window)`您可以根据文档中的或任何元素使用百分比值自动缩小它。下面是一个示例，说明如何使用`$(window)`到窗口的百分比按比例缩放它：

```
$(document).ready(function() {
    $(window).resize(function() {
        var xWidth = $(window).width();
        $('.[img class]').each(function() {
            $(this).css({maxWidth: xWidth * ([your percentage value of window] / 100)});
        });
    }).trigger('resize');
}); 
```

更改`[img class]`为图像的类别。更改`[your percentage value of window]`为要缩放图像宽度的窗口元素的百分比。因此，如果您想要 90%，请将其更改为 90。当用户调整浏览器窗口大小时，它也会相应地自动调整图像大小。

# oracle - oracle - 没有序列的序列

> ID：15011444
> 
> 赞同：0
> 
> 时间：2013-02-21T20:19:11.580
> 
> 标签：oracle, sequence

我想用序列号填充一列，但单个序列是不够的。如果您愿意，此列的行为会有点像“子 ID”；表中记录组的递增 id。

计划是在使用触发器插入时获取“序列中的下一个数字”，就像正常情况一样`sequence`可以使用正常一样。但是，不仅仅是“下一个数字”，它还需要是给定结果集中的“下一个数字”。

考虑以下示例数据，其中`display_id`列是我需要帮助管理的序列，它取决于记录的值`group_name`..的记录值

```
编号 | 组名 | display_id
------------------------------
  5 | 甲组 | 3
  4 | 甲组 | 2
  3 | 甲组 | 1
  2 | B组 | 2
  1 | B组 | 1

```

我正在考虑像这样的查询来获取“下一个数字” `GroupA`：

```
select max(record_id) + 1
from my_records
where group_name = 'GroupA' 
```

因为`GroupA`它返回 4，但`GroupB`它返回 3。

当然，我们可以使用上述查询，但会失去 a 的原子优势`sequence`。有什么方法可以自信地管理这样的序列吗？

~~我们并不担心可能会跳过数字（因为序列可能）。~~

**编辑：**
我们对由于回滚等（与序列一样）而错过一两个数字感到满意。但是，我们的要求仍然是该`display_id`列保持多个序列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T22:00:14.387

虽然我强烈建议不要这样做（更喜欢使用单个序列并且只是接受会有比预期更大的间隙），但您可以构建自己的伪序列表

```
CREATE TABLE my_sequences (
  sequence_name VARCHAR2(30) PRIMARY KEY,
  sequence_val  NUMBER
); 
```

插入几行

```
INSERT INTO my_sequences( sequence_name, sequence_val )
  VALUES( 'GroupA', 1 );
INSERT INTO my_sequences( sequence_name, sequence_val )
  VALUES( 'GroupB', 1 ); 
```

然后写一个函数来获取下一个序列值

```
CREATE FUNCTION get_nextval( p_sequence_name IN VARCHAR2 )
  RETURN NUMBER
IS
  l_val NUMBER;
BEGIN
  SELECT sequence_val
    INTO l_val
    FROM my_sequences
   WHERE sequence_name = p_sequence_name
     FOR UPDATE;

  UPDATE my_sequences
     SET sequence_val = sequence_val + 1
   WHERE sequence_name = p_sequence_name;

  RETURN l_val;
END; 
```

这将为特定序列锁定表中的行，直到检索下一行的事务提交或回滚。与使用 Oracle 序列相比，这会从根本上降低应用程序的可伸缩性，方法是确保一次只有一个会话可以为特定的特定会话插入一行`group_name`——其他会话将阻塞等待序列。如果您的系统具有相对较少的并发用户（或相对较多的`group_name`值），这可能是您可以接受的。但总的来说，这是一种糟糕的做法。根据 Oracle 版本，您可能能够使用自治事务来增加并发性，但这只会给解决方案增加一点复杂性。当您真正担心可伸缩性时，您真的想推迟整个设计并只使用 Oracle 序列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T21:42:17.140

在列上创建唯一的复合索引`group_name + display_id`。

然后使用您的代码，以防引发异常 - 重新运行下一个值生成。

PS：我个人不喜欢它，但在这种情况下可能没有好的选择

# c# - LINQ 从数据表中选择

> ID：15011453
> 
> 赞同：5
> 
> 时间：2013-02-21T20:19:54.870
> 
> 标签：c#, linq, ado.net

今天才开始玩数据表和 LINQ。我有一个从 SQL 数据库获取名称列表的数据表。我希望使用 LINQ 从 dt 返回特定名称。

我已经尝试了以下代码但没有成功。有什么我做错了代码。

dt 返回完整的名称列表，我只是希望将名称减少到一个名称。在 Adventureworks 数据库中有一个名为 Blade 的名称，我只想显示它。

```
 DataTable dt =  DAL.GetNames();
      try
      {
          var q = from myrow in dt.AsEnumerable()
                  where myrow.Field<string>("Name") =="Blade"
                  select myrow;
          dataGridView1.DataSource = q;
      } 
```

我试图用 .equals 替换 ==。我对使用语言集成查询的概念完全陌生。

当我运行代码注意发生时，我没有收到任何错误，只是没有返回数据。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T21:13:55.293

您正在定义您的查询，但并未实际运行它。

您的线路：

```
dataGridView1.DataSource = q; 
```

需要是：

```
dataGridView1.DataSource = q.AsDataView(); 
```

# android - 半透明主题的问题

> ID：15011454
> 
> 赞同：9
> 
> 时间：2013-02-21T20:20:01.257
> 
> 标签：android, android-theme

我有一个有两个活动的应用程序。第一个显示有一个按钮，可以打开第二个。

这是第一个的清单定义：

```
<activity
    android:name="com.example.buttonexample.MainActivity">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

第二个活动：

```
<activity
    android:name="com.example.buttonexample.MainActivity2"
    android:label="@string/title_activity_main_activity2" android:theme="@android:style/Theme.Translucent">
</activity> 
```

这是我启动第二个活动的方式（通过 OnClickListener 获取第一个活动上的按钮）：

```
public void startSecondActivityClick(View v) {
   Intent startActivity2 = new Intent(this, MainActivity2.class);
   startActivity(startActivity2);
} 
```

这很好用，但是当我通过点击主页和前台应用程序来后台应用程序时。我注意到第一个活动是不断地创建/破坏自己。我通过在 onDestory 方法中添加一些代码来增加静态 int 来验证这一点：

```
private static int count = 0;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    count++;

}

protected void onDestroy() {
    super.onDestroy();
    Log.i("MainActivity", String.format("Destroyed, %d", count));
} 
```

我还注意到删除半透明主题似乎可以解决此问题。我的问题是有没有办法半透明或类似的东西，但也不能重新启动？另外，我很好奇为什么会发生这种情况。我正在 Galaxy SIII 上的 4.0.1 ICS 上对此进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:42:49.660

好的，经过一番挖掘，我能够弄清楚为什么会这样。有人打开了开发者选项之一，“不保留活动”。关闭此功能后，这种情况就停止了。我怀疑这在生产中不会经常发生，因为大多数人可能没有这种设置。您可以在大多数手机的设置 ->“开发者选项”下找到它。

# php - For-each 循环遍历 XSL 中的单选按钮

> ID：15011468
> 
> 赞同：1
> 
> 时间：2013-02-21T20:20:45.900
> 
> 标签：php, html, xml, xslt, radio-button

我遇到了以下问题：我有一个 XML 文件，我正在使用 XSL 创建一个 HTML 文件。在 XSL 文件中，我有一个 for-each 循环，它创建了几个单选按钮，当然我只需要选中一个按钮，但是`index.php`在我的项目文件夹中打开文件后，可以检查所有单选按钮。我怎样才能实现，循环后只能选择一个单选按钮？先感谢您！

这是循环内的代码片段：

```
<div data-role="fieldcontain">
    <fieldset data-role="controlgroup">
        <input type="radio" name="radio-choice" id="radio-choice-3"  />
        <label for="radio-choice-3"><xsl:value-of select="text"/></label>
    </fieldset>
</div> 
```

PS我想它是没有改变的ID，每次循环通过代码时都会创建一个独立的单选按钮，显然该属性`controlgroup`不会对按钮进行分组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:36:41.100

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="x">
    <div data-role="fieldcontain">
        <fieldset data-role="controlgroup">
            <input type="radio" name="radio-choice" id="radio-choice-{position()}"  />
            <label for="radio-choice-{position()}"><xsl:value-of select="text"/></label>
        </fieldset>
    </div>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于以下 XML 文档时**（没有提供！！！）：

```
<t>
 <x>
  <text>Choice one</text>
 </x>
 <x>
  <text>Choice two</text>
 </x>
 <x>
  <text>Choice three</text>
 </x>
</t> 
```

**产生想要的正确结果：**

```
<div data-role="fieldcontain">
   <fieldset data-role="controlgroup">
      <input type="radio" name="radio-choice" id="radio-choice-1"/>
      <label for="radio-choice-1">Choice one</label>
   </fieldset>
</div>
<div data-role="fieldcontain">
   <fieldset data-role="controlgroup">
      <input type="radio" name="radio-choice" id="radio-choice-2"/>
      <label for="radio-choice-2">Choice two</label>
   </fieldset>
</div>
<div data-role="fieldcontain">
   <fieldset data-role="controlgroup">
      <input type="radio" name="radio-choice" id="radio-choice-3"/>
      <label for="radio-choice-3">Choice three</label>
   </fieldset>
</div> 
```

**并且在浏览器中显示时，任何时候只能有一个单选按钮处于选中状态。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T21:00:01.070

为了可以只选中一个单选按钮，所有`<input type="radio"/>`元素必须具有相同的`@name`属性。例如：

```
<input type="radio" name="radio-choice" id="radio-choice-3"/>
<input type="radio" name="radio-choice" id="radio-choice-4"/> 
```

# ruby-on-rails - 如何正确使用序列化将数组和哈希保存到数据库？

> ID：15011472
> 
> 赞同：1
> 
> 时间：2013-02-21T20:21:17.293
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

在我使用序列化的过程中，我显然遗漏了一些相当基本的东西。我正在尝试将几个数组和哈希保存到数据库记录中，这些记录是从控制器中的各种其他记录中提取的。我在页面上列出它们以在保存之前检查它们，并将它们张贴在隐藏字段中以进行我的创建操作。当我在页面视图中使用它们时，它们肯定是哈希和数组。但是由于某种原因，它们被保存为转义字符串。这是示例代码：

模型：

```
class Bulletin < ActiveRecord::Base
  serialize :news
  attr_accessible :news
end 
```

看法：

```
<%= form_for(@bulletin) do |f| %>
  <%= f.hidden_field :news %>
  <%= f.submit "Create bulletin", class: "btn btn-large btn-primary" %>
<% end %> 
```

控制器：

```
...
def new
  @bulletin = Bulletin.new
  create_news
  ...
end
def create
  @bulletin = Bulletin.new(params[:bulletin])
  ...
end
...
private
  def create_news
  ...
  if @bulletin.news == []
    @bulletin.news = [["No news", "No news submitted this week."]]
  end
end 
```

我已经在其中包含了最少的代码供您获取。例如，create news 函数中有更多代码，如果存在，它实际上会生成一个嵌套的新闻数组。

我还应该注意，我确实有`serialize :news, Array`，但它抛出了一个错误“属性应该是一个数组，但是是一个字符串”。

编辑添加 -

生成的 HTML（即输入）：

```
<input id="bulletin_news" name="bulletin[news]" type="hidden" value="[[&quot;Bulletin User&quot;, &quot;A whole lot of news.&quot;], [&quot;Bulletin User&quot;, &quot;A whole lot of news.&quot;]]" /> 
```

这些是从测试数据库中提取并连接到嵌套数组中的值对。还有很多，为了便于阅读，我把它缩短了。

从控制台查询记录时的输出：

```
"[[\"Bulletin User\", \"A whole lot of news.\"], [\"Bulletin User\", \"A whole lot of news.\"], [\"Another User\", \"A whole lot of news.\"], [\"Mr. Jovany Murazik\", \"A whole lot of news.\"]]" 
```

# bash - ANSI 问题：“\x1B[?25h”和“\x1BE”

> ID：15011478
> 
> 赞同：12
> 
> 时间：2013-02-21T20:21:30.227
> 
> 标签：bash, shell, terminal, ansi-escape

1.  做什么`"\x1B[?25h"`？

2.  有什么`"\x1BE"`不同`"\n"`？根据[http://ascii-table.com/ansi-escape-sequences-vt-100.php](http://ascii-table.com/ansi-escape-sequences-vt-100.php)它“*移动到下一行*”？好像是这样的`"\n"`？

    我在 PHP 中尝试过`echo "xxx\nxxx\n"`，它们都输出相同的东西。`echo "xxx\x1BExxx\n"`

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-21T20:34:13.950

这些是 ANSI 转义序列（也称为 VT100 代码）是早于 ASCII 的控制代码的早期标准化。

转义序列`\x1BE`或`Esc`+`E`是 NEL 或“下一行”，在较旧的终端和大型机上用于表示 CR+LF 或`\r\n`.

转义序列`\x1B[`( `Esc`+ `[`) 是控制序列引入器的一个示例。（`\x9B`是另一个单字符 CSI。）`?25h`它后面的控制序列用于显示光标。

大多数终端将支持这些控制代码；要输入转义序列，您可以键入`Ctrl`+ `V`，`Ctrl`+`[`应呈现为`^[`（ESC 的 C0 代码），然后是转义代码。

参考：

*   [ANSI 转义码](http://en.wikipedia.org/wiki/ANSI_escape_code)
*   [C0 和 C1 控制代码](http://en.wikipedia.org/wiki/C0_and_C1_control_codes)

# excel - 使用 SUMIF 进行图表和分组？

> ID：15011480
> 
> 赞同：1
> 
> 时间：2013-02-21T20:21:34.767
> 
> 标签：excel, graph, grouping, spreadsheet

在一个专栏中，我有一个日专栏，例如。星期一、星期二、星期三 在它旁边的另一列中，我有一个数值。（例如 2000 美元、5000 美元、6000 美元）

```
__DATE__________VALUE____
Monday      |  $5000
Monday      |  $9000
Tuesday     |  $2000
Wednesday   |  $6000
Wednesday   |  $6000 
```

这些值会***定期更改***。

我需要插入一个显示分组值的图表。例如。在当前点，图表显示：

```
Monday       $5000
Monday       $9000
Tuesday      $2000
Wednesday    $6000
Wednesday    $15000 
```

我需要图表来显示相同​​的值，但按 DAY 分组：

```
Monday    $14000
Tuesday   $2000
Wednesday $21000 
```

正如我所说，日期和它旁边的值都会在需要时改变，所以我希望它与某种论坛自动分组。

有没有办法做到这一点？

我已经阅读了 SUMIF 函数，但似乎无法使其与此一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:31:20.663

你想要的是一个**数据透视图**。这很容易创建，但会因您的 Excel 版本而异。

![数据透视图！](../Images/4e7a4a1919974018dcee4bc3b2c45709.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-02T17:10:12.583

如果您希望在添加更多信息时使某些内容保持最新，另一种选择是将 SUMIF 公式放在工作簿的一部分中，例如另一个选项卡或隐藏的列/行，并让图表看起来不一样。

[示例图像](https://i.stack.imgur.com/wkC4f.png)

# c++ - 检查几个组合框的索引是否唯一

> ID：15011484
> 
> 赞同：2
> 
> 时间：2013-02-21T20:21:48.073
> 
> 标签：c++, winapi

我有六个组合框，它们都包含相同的值。我希望用户被迫为每一个选择一个唯一的值。有没有一种有效的方法来做到这一点，而不是单独比较每一对？此外，是否有一种更有效的方法可以为它们分配相同的值，而不仅仅是单独分配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:30:36.137

如果我正确理解这一点，您希望用户从 6 个组合框中选择值，并被迫从用户选择的先前框中选择不同的值。

在这种情况下，您可以添加一个布尔值数组，该数组等于可以从您的组合框中选择的值的数量，并将它们初始化为 false，并且每次用户选择一个值时，检查该值是什么，检查相应的数组中的元素，如果为真，则出错。如果为假，则将其从假翻转为真并继续。

您本质上是在寻找一个包含特定信息的数据结构：是否选择了一个值。这可以使用一个数组或布尔值向量来实现，或者整数，或者你有什么。

编辑：该数组必须可以被用于从 UI 获取输入的函数访问。在 MFC 对话框应用程序中，这将位于 YourProjectNameDlg.h 中的某个位置。

# android - Android - OpenGL ES 的 Tracer 抛出“Broken pipe”

> ID：15011487
> 
> 赞同：3
> 
> 时间：2013-02-21T20:21:54.907
> 
> 标签：android, opengl-es

我无法从 Tracer for OpenGL ES 获取跟踪。

每次我尝试启用这两个选项时：

`Collect Framebuffer contents on eglSwapBuffers()`

和

`Collect Framebuffer contents on glDraw()`

我收到错误：**设置跟踪选项时出错：管道损坏**

有人可以帮我解决这个问题吗？我真的很想得到这份工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T14:18:43.707

我在运行 Android 4.2.2 的 Galaxy Nexus 和 Nexus 7 上发现了这个错误。通过将 Galaxy Nexus 降级到 4.1.2，我能够让它工作。我在这里打开了一个错误报告：[https ://code.google.com/p/android/issues/detail?id=53426](https://code.google.com/p/android/issues/detail?id=53426)

# android - 如何从 ArrayAdapter 注册ForContextMenu

> ID：15011488
> 
> 赞同：1
> 
> 时间：2013-02-21T20:21:56.203
> 
> 标签：android

我正在显示消息列表，使用显示来自 Adaptar 的 ListView 的 Activity，如下所示。

我需要在下面的`DiscussArrayAdapter`类中的 ImageView 中注册 ContextMenu 菜单。

如果我只是`registerForContextMenu(arrowImage);`从`DiscussArrayAdapter`它打电话不会接受它。

另外，我不知道在哪里覆盖该方法`onCreateContextMenu`

我的 messageActivity 如下：

```
public class MessagesActivity extends Activity  {
        private ListView listView = null;

        /** Called when the activity is first created. */
        private DiscussArrayAdapter adapter;
        private ListView lv;
@Override
       public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            setContentView(R.layout.activity_discuss);

            registerReceiver(mHandleMessageReceiver, new IntentFilter(
                            DISPLAY_MESSAGE_ACTION));

            adapter = new DiscussArrayAdapter(getApplicationContext(), R.layout.listitem_discuss);

            lv.setAdapter(adapter); 
```

我有`DiscussArrayAdapter`课：

```
public class DiscussArrayAdapter extends ArrayAdapter<OneMessage>{

    private /*TextView*/EditText msgTextView;
    private  TextView sender;

    private LinearLayout wrapper;

    private SqlHelper dbHelper = null;
    private Context context;
    @Override
    public void add(OneMessage object) {

        dbHelper.addNewMessage(object);
        super.add(object);
    }

    public DiscussArrayAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
        this.context=context;

        if (dbHelper == null) {
            dbHelper = new SqlHelper(context);

        }

    }

    public int getCount() {

        return  dbHelper.getContactsCount();
    }

    public OneMessage getItem(int index) {

        return dbHelper.getOneComment(index+dbHelper.lastRawID());
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        if (row == null) {
            LayoutInflater inflater = (LayoutInflater) this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            row = inflater.inflate(R.layout.listitem_discuss, parent, false);
        }

        wrapper = (LinearLayout) row.findViewById(R.id.wrapper);

        ImageView arrowImage = (ImageView) row.findViewById(R.id.aquaplayicon);
    //  this .registerForContextMenu(arrowImage);
        OneMessage coment = getItem(position);

        msgTextView =/*(TextView)*/(EditText) row.findViewById(R.id.comment); 
```

为简洁起见，我省略了其余代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T20:23:46.093

`context`菜单功能都是为 class 定义的，`Activity`它们不存在于`Adapter`class 中。

所以要么你需要让你`adapter`的子类`activity`，或者你需要传递`activity`给它`adapter`以便它可以调用注册函数，并且活动将需要处理`context`菜单（或将事件传递给适配器来处理它） .

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-16T22:56:37.637

您必须使用 Activity 类强制转换上下文变量：

```
private Context context;

public ExpandibleListViewAdapter(Context context) {
        this.context = context;
    }

@Override
public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parentView) {

    if (convertView == null) {
       ......
    }

    .........

    ((Activity)context).registerForContextMenu(convertView);

    return convertView;
} 
```

# wordpress - Wordpress - footer.php 未加载

> ID：15011492
> 
> 赞同：1
> 
> 时间：2013-02-21T20:22:06.530
> 
> 标签：wordpress, footer

我已经尝试了无数次搜索，但没有任何运气找到解决方案。我目前正试图让我的 footer.php 从我的 index.php 文件中正确调用，但我似乎没有做任何修复它。我试图在今晚启动它，让客户在早上看到，当绑定最后一点代码时，出现了这个问题。

这是我用来从我的 index.php 文件中调用 footer.php 的代码：

```
<?php get_sidebar(); ?>
<?php get_footer(); ?> 
```

这是目前的页脚代码（仅用于测试）：

```
Testing footer.
<?php wp_footer(); ?>
</body>
</html> 
```

附带说明一下，如果有什么不同，我将 wordpress 安装在子目录“wordpress”中，并且我正在使用 .htaccess 文件将域重定向到该目录。这是我的 .htaccess 文件的代码（将域替换为“DOMAINNAME”）：

```
# Use PHP5 Single php.ini as default
AddHandler application/x-httpd-php5s .php
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www.)?DOMAINNAME.org$
RewriteRule ^(/)?$ wordpress [L] 
```

提前感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:30:24.560

试试这个而不是使用 htaccess 规则进行重定向，这可能会解决您的页脚问题[安装 WordPress 时考虑到安全性](http://tentblogger.com/installing-wordpress/)

# php - 基于日期的 MySQL 查询

> ID：15011494
> 
> 赞同：-2
> 
> 时间：2013-02-21T20:22:10.013
> 
> 标签：php, mysqli

我需要有关 sql 语句的帮助。我有一个基于“喜欢”的精选用户系统，但是一旦用户被“精选”，他们将无法在接下来的 30 天内成为精选用户。这已经完全用 php/mysql 编写了。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:35:07.890

php端的伪代码：

```
 $new_date = new DateTime;         
     $new_date->modify('30 day'); //set the next time they can be featured to 30 days in the future   

     while ($row = $qryResult ->fetch_assoc()) { //query table containing user, featured yes/no, date, etc
        $featured_date = new DateTime($row['featuredDate']);

     if ($featured date < $new_date) {
         echo $row['user'];
    }
  } 
```

# ios - 需要 UITableView 的 cellForRowAtIndexPath: 对某些行不返回任何内容

> ID：15011495
> 
> 赞同：1
> 
> 时间：2013-02-21T20:22:11.940
> 
> 标签：ios, objective-c, cocoa-touch

在我的代码中，某些单元格不应在 UITableView 上显示给用户。
所以我的 dataSource 将提供对象，但我想检查我`cellForRowAtIndexPaht`的单元格是否隐藏，如果是，实际上什么都不返回。这样单元格的高度将为零，但更重要的是，我想将我的函数保存为整个单元格的构建。

我试图返回 nil，但是，它崩溃了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:25:30.310

数据源应该返回表中的实际内容。

您可以轻松地创建一个新数组来保存您想要显示的数据，并省略您不想看到的数据（将其保存在主数据源中）。然后，当表格视图中的某些行可以看到时，将它们添加到表格数据数组中，并使用 UITableView 的 insertRows 方法以动画方式查看新显示的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T20:39:00.373

Could you move the logic up into the `numberOfSections` or `numberOfRowsInSection` methods used to create your UITableView? Basically, whatever logic you are using to try and return null for those cells could move into the `numberOfRowsInSection` method in the UITableView class and return only the number of visible (not hidden) cells.

Then you would have to configure your `cellForRowAtIndexPath` method to hand out the cells from your data source in order by counting up through your visible rows instead of just pulling them out the array.

I wouldn't think you would want to return 'nothing' to a program expecting an object.

Link to Apple Reference Docs for UITableView, the numberOfSections and numberOfRowsInSections can easily be used to logically modify the amount of data being shown in a table view.

# java - 超过此主体的最大会话时的 Spring 安全重定向

> ID：15011498
> 
> 赞同：1
> 
> 时间：2013-02-21T20:22:22.437
> 
> 标签：java, spring, spring-security

所以用户登录**->**关闭浏览器**->**再次打开浏览器**->**出现错误：

```
HTTP Status 401 - Authentication Failed: Maximum sessions of 1 for this principal exceeded 
```

我需要的是捕获此会话无效的事件，删除该用户的所有会话并重定向到正常登录页面

弹簧安全配置：

```
 <http auto-config="true" use-expressions="true">
                <session-management session-fixation-protection="migrateSession">
                    <concurrency-control max-sessions="1" error-if-maximum-exceeded="true"/>
                </session-management>   
                <intercept-url pattern="/login" access="hasRole('ROLE_ANONYMOUS')" requires-channel="any"/> 

    <!--<custom-filter after="CONCURRENT_SESSION_FILTER" ref="sessionExpiration" /> -->
    <!-- .... -->

        </http>

<beans:bean id="sessionExpiration" class="com.test.security.SessionExpirationFilter">
    <beans:property name="expiredUrl">
            <beans:value>/login</beans:value>
        </beans:property>
 </beans:bean> 
```

我试图实现一些过滤器，但它总是显示会话为空：

```
public class SessionExpirationFilter implements Filter, InitializingBean {
    private String expiredUrl;

    public void destroy() {
    }

    public void doFilter(ServletRequest request, ServletResponse response,
        FilterChain chain) throws IOException, ServletException {

        HttpServletRequest httpRequest = (HttpServletRequest) request;
        HttpServletResponse httpResponse = (HttpServletResponse) response;

        String path = httpRequest.getServletPath();
        HttpSession session = httpRequest.getSession(false);

        System.out.println(session);
        if (session == null && !httpRequest.isRequestedSessionIdValid()) {              
            SecurityContextHolder.getContext().setAuthentication(null);
            String targetUrl = httpRequest.getContextPath()
                    + expiredUrl;
            httpResponse.sendRedirect(httpResponse.encodeRedirectURL(targetUrl));
            return;
        }
        chain.doFilter(request, response);
    }

    public void setExpiredUrl(String expiredUrl) {
        this.expiredUrl = expiredUrl;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T21:16:20.710

据我了解，如果用户的会话超过“最大会话”，则您希望使上一个会话无效。将属性 'error-if-maximum-exceeded' 设置为 false。Spring 安全性自动使先前的会话无效。

如果你想做一些不同的事情，

1.  扩展 ConcurrentSessionControlStrategy 类，并覆盖“allowableSessionsExceeded”方法。
2.  指定上面的bean引用为'session-management'的'session-authentication-strategy-ref'属性值

.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-28T07:13:07.123

设置`error-if-maximum-exceeded="false"`将允许第二个会话并使第一个会话无效`max-sessions="1"`

如果你有，`max-sessions="2"`那么它也将允许会话并使所有会话`Nth`无效`N-2`

```
<session-management session-fixation-protection="migrateSession">
    <concurrency-control max-sessions="1" error-if-maximum-exceeded="false"/>
</session-management> 
```

设置`error-if-maximum-exceeded="true"`将`NOT`允许第二个会话并使第二个会话无效`max-sessions="1"`

如果您有`max-sessions="2"`，那么它将不允许`2+`会话并使其无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-28T14:28:57.890

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-04-04T15:34:08.217

```
<session-management session-authentication-strategy-ref="sas"/>
<beans:bean id="sas" class="org.springframework.security.web.authentication.session.ConcurrentSessionControlStrategy">
        <beans:property name="maximumSessions" value="1"/>
        <beans:property name="exceptionIfMaximumExceeded" value="true"/>
        <beans:constructor-arg name="sessionRegistry" ref="sessionRegistry"/>
    </beans:bean>
    <beans:bean id="sessionRegistry" class="org.springframework.security.core.session.SessionRegistryImpl"/>
```

# php - 创建一个 efront 模块

> ID：15011500
> 
> 赞同：0
> 
> 时间：2013-02-21T20:22:37.483
> 
> 标签：php, mysql, module, smarty

网上没有教程。只有[文档](http://wiki.efrontlearning.net/How_to_build_a_module)。

我要做的就是将此代码传递给模块

```
<!-- 
  - paymentTestForm.php
  -     Description: 

<?
    $SECURE_SECRET = "";

    if (isset($_POST['accessCode']))
    {
        ksort($_POST);
        $md5HashData = $SECURE_SECRET;

        foreach($_POST as $key => $value) 
        {

            if (strlen($value) > 0 && ($key == 'accessCode' || $key == 'merchTxnRef' || $key == 'merchant' || $key == 'orderInfo' || $key == 'amount' || $key == 'returnURL')) {
                print 'Key: '.$key.'  Value: '.$value."<br>";

                if ($appendAmp == 0) 
                {
                    $vpcURL .= urlencode($key) . '=' . urlencode($value);
                    $appendAmp = 1;
                } else {
                    $vpcURL .= '&' . urlencode($key) . "=" . urlencode($value);
                }
                $md5HashData .= $value;
            }
        }   
        $newHash .= $vpcURL."&vpc_SecureHash=" . strtoupper(md5($md5HashData));
        echo "<script>location.href='https://gw1.audicards.com/TPGWeb/payment/prepayment.action?$newHash'</script>";
        exit;

    }

?>

<table border="0" cellpadding='0' cellspacing='0' align="center">
    <tr>
        <td align="right"><strong><em>Merchant AccessCode: </em></strong></td>
        <td><input name="accessCode" value="" size="20" maxlength="8"/></td>
    </tr>
    <tr class="shade">
        <td align="right"><strong><em>Merchant Transaction Reference: </em></strong></td>
        <td><input name="merchTxnRef" value="" size="20" maxlength="40"/></td>
    </tr>
    <tr>
        <td align="right"><strong><em>MerchantID: </em></strong></td>
        <td><input name="merchant" value="" size="20" maxlength="16"/></td>
    </tr>
    <tr class="shade">
        <td align="right"><strong><em>Transaction OrderInfo: </em></strong></td>
        <td><input name="orderInfo" value="" size="20" maxlength="34"/></td>
    </tr>
    <tr>
        <td align="right"><strong><em>Purchase Amount: </em></strong></td>
        <td><input name="amount" value="500" maxlength="10"/></td>
    </tr>
    <tr class="shade">
        <td align="right"><strong><em>Receipt ReturnURL: </em></strong></td>
        <td><input name="returnURL" size="65" value="http://localhost/audiPayment/paymentTestForm.php?action=py" maxlength="250"/></td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td><input type="submit" NAME="SubButL" value="Pay Now!"></td>
    </tr>  
</table>
<?
//check if this page is being redirected from payment client thus carrying the field vpc_TxnResponseCode
if (isset($_GET['vpc_TxnResponseCode']))
{
    function getResponseDescription($responseCode) 
    {
        switch ($responseCode) {
            case "0" : $result = "Transaction Successful"; break;
            case "?" : $result = "Transaction status is unknown"; break;
            case "1" : $result = "Unknown Error"; break;
            case "2" : $result = "Bank Declined Transaction"; break;
            case "3" : $result = "No Reply from Bank"; break;
            case "4" : $result = "Expired Card"; break;
            case "5" : $result = "Insufficient funds"; break;
            case "6" : $result = "Error Communicating with Bank"; break;
            case "7" : $result = "Payment Server System Error"; break;
            case "8" : $result = "Transaction Type Not Supported"; break;
            case "9" : $result = "Bank declined transaction (Do not contact Bank)"; break;
            case "A" : $result = "Transaction Aborted"; break;
            case "C" : $result = "Transaction Cancelled"; break;
            case "D" : $result = "Deferred transaction has been received and is awaiting processing"; break;
            case "E" : $result = "Invalid Credit Card"; break;
            case "F" : $result = "3D Secure Authentication failed"; break;
            case "I" : $result = "Card Security Code verification failed"; break;
            case "G" : $result = "Invalid Merchant"; break;
            case "L" : $result = "Shopping Transaction Locked (Please try the transaction again later)"; break;
            case "N" : $result = "Cardholder is not enrolled in Authentication scheme"; break;
            case "P" : $result = "Transaction has been received by the Payment Adaptor and is being processed"; break;
            case "R" : $result = "Transaction was not processed - Reached limit of retry attempts allowed"; break;
            case "S" : $result = "Duplicate SessionID (OrderInfo)"; break;
            case "T" : $result = "Address Verification Failed"; break;
            case "U" : $result = "Card Security Code Failed"; break;

            default  : $result = "Unable to be determined"; 
        }
        return $result;
    }

    function null2unknown($data) 
    {
        if ($data == "") 
            return "No Value Returned";
         else 
            return $data;
    }       

    $vpc_Txn_Secure_Hash = addslashes($_GET["vpc_SecureHash"]);
    unset($_GET["vpc_SecureHash"]); 
    ksort($_GET);

    $errorExists = false;

    if (strlen($SECURE_SECRET) > 0 && addslashes($_GET["vpc_TxnResponseCode"]) != "7" && addslashes($_GET["vpc_TxnResponseCode"]) != "No Value Returned") 
    {

        $md5HashData = $SECURE_SECRET;

        foreach($_GET as $key => $value) 
        {
            if ($key != "vpc_SecureHash" && strlen($value) > 0 && $key != 'action' ) 
            {
                $hash_value = str_replace(" ",'+',$value);
                $hash_value = str_replace("%20",'+',$hash_value);

                $md5HashData .= $hash_value;

            }
        }

        if (strtoupper($vpc_Txn_Secure_Hash) == strtoupper(md5($md5HashData))) 
        {
            $hashValidated = "<b>CORRECT</b>";
        } 
        else 
        {
            $hashValidated = "<b>INVALID HASH</b>";
            $errorExists = true;
        }
    } 
    else 
    {
        $hashValidated = "<FONT color='orange'><b>Not Calculated - No 'SECURE_SECRET' present.</b></FONT>";
    }

    $amount          = null2unknown(addslashes($_GET["vpc_Amount"])/100);
    $locale          = null2unknown(addslashes($_GET["vpc_Locale"]));
    $batchNo         = null2unknown(addslashes($_GET["vpc_BatchNo"]));
    $command         = null2unknown(addslashes($_GET["vpc_Command"]));
    $message         = null2unknown(addslashes($_GET["vpc_Message"]));
    $version         = null2unknown(addslashes($_GET["vpc_Version"]));
    $cardType        = null2unknown(addslashes($_GET["vpc_Card"]));
    $orderInfo       = null2unknown(addslashes($_GET["vpc_OrderInfo"]));
    $receiptNo       = null2unknown(addslashes($_GET["vpc_ReceiptNo"]));

    $errorTxt = "";

    if ($txnResponseCode == "7" || $txnResponseCode == "No Value Returned" || $errorExists) {
        $errorTxt = "Error ";
    }

    ?>

            <table width="85%" align="center" cellpadding="5" border="0">
                <tr>
                    <td align="right"><b>Hash Validity:</b></td>
                    <td class="errorMsg"><?=$hashValidated?></td>
                </tr>

                <tr>
                    <td align="right"><b>Merchant Transaction Reference: </b></td>
                    <td><?=$merchTxnRef?></td>
                </tr>
                <tr>
                    <td align="right"><b>Merchant ID: </b></td>
                    <td><?=$merchantID?></td>
                </tr>
                <tr>
                    <td align="right"><b>Order Information: </b></td>
                    <td><?=$orderInfo?></td>
                </tr>
                <tr>
                    <td align="right"><b>Purchase Amount: </b></td>
                    <td><?=$amount?></td>
                </tr>
                <tr>
                    <td colspan="2" align="center">
                    <hr />
                    </td>
                </tr>

                <tr>
                    <td colspan="2" align="center">
                        Fields above are the request values returned.<br>
                        Fields below are the response fields for a Standard Transaction.<br>
                    </td>
                </tr>
                <tr>
                    <td colspan="2" align="center">
                    <hr />
                    </td>
                </tr>            
                <tr>
                    <td align="right"><b>VPC Transaction Response Code: </b></td>
                    <td><?=$txnResponseCode?></td>
                </tr>
                <tr>
                    <td align="right"><b>Transaction Response Code Description:</b></td>
                    <td class="errorMsg"><?=getResponseDescription($txnResponseCode)?></td>
                </tr>
                <tr>
                    <td align="right"><b>Message: </b></td>
                    <td><?=$message?></td>
                </tr>
    <?

        if ($txnResponseCode != "7" && $txnResponseCode != "No Value Returned") 
        { 
    ?>
                <tr>
                    <td align="right"><b>Receipt Number: </b></td>
                    <td><?=$receiptNo?></td>
                </tr>
                <tr>
                    <td align="right"><b>Transaction Number: </b></td>
                    <td><?=$transactionNo?></td>
                </tr>
                <tr>
                    <td align="right"><b>Acquirer Response Code: </b></td>
                    <td><?=$acqResponseCode?></td>
                </tr>
                <tr>
                    <td align="right"><b>Bank Authorization ID: </b></td>
                    <td><?=$authorizeID?></td>
                </tr>
                <tr>
                    <td align="right"><b>Batch Number: </b></td>
                    <td><?=$batchNo?></td>
                </tr>
                <tr>
                    <td align="right"><b>Card Type: </b></td>
                    <td><?=$cardType?></td>
                </tr>   
                <tr>
                    <td colspan="2"><HR /></td>
                </tr>
    <? 
    } 
    ?>    
            </table>
<?
}
?> 
```

它是一个类似于 paypal 的支付模块，我的 php 代码可以工作，我只想从中创建一个模块。管理员为每门课程设置价格。Paypal 的 efront 模块不是开源的，所以我看不出它是如何工作的。谁能告诉我如何创建一个模块来调用我的代码？

# c# - 更新命令 Executenonquery - 语法错误

> ID：15011501
> 
> 赞同：2
> 
> 时间：2013-02-21T20:22:44.410
> 
> 标签：c#, sql-server, sql-update, executenonquery

我试图在 C# 中更新我得到的一些数据

> “')' 附近的语法不正确。” 在“da.UpdateCommand.ExecuteNonQuery();”行中。

我浏览代码很多时间，我再也看不到错误了。所以在我看来应该没问题，但不是。你能看看下面的代码吗？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.SqlClient;

namespace klinika
{
    public partial class frModWla : Form
    {
        DataSet ds = new DataSet();
        SqlConnection cs = new SqlConnection("Data Source=.\\SQLEXPRESS; Initial Catalog=Klinika; Integrated security=TRUE");
        SqlDataAdapter da = new SqlDataAdapter();
        BindingSource bs = new BindingSource();

        public frModWla()
        {
            InitializeComponent();
        }

        private void btnWyswietl_Click(object sender, EventArgs e)
        {
            bindingClear();
            da.SelectCommand = new SqlCommand("SELECT * FROM tbWlasciciel", cs);
            ds.Clear();
            da.Fill(ds);
            dg.DataSource = ds.Tables[0];

            bs.DataSource = ds.Tables[0];

            tbxImie.DataBindings.Add(new Binding("Text", bs, "Imie"));
            tbxNazwisko.DataBindings.Add(new Binding("Text", bs, "Nazwisko"));
            tbxMiejscowosc.DataBindings.Add(new Binding("Text", bs, "Miejscowosc"));
            tbxKodPocztowy.DataBindings.Add(new Binding("Text", bs, "Kod_pocztowy"));
            tbxAdres.DataBindings.Add(new Binding("Text", bs, "Adres"));
            tbxTelefon.DataBindings.Add(new Binding("Text", bs, "Telefon"));
            tbxEmail.DataBindings.Add(new Binding("Text", bs, "Email"));

            rekord();

        }

        private void bindingClear()
        {
            tbxImie.DataBindings.Clear();
            tbxNazwisko.DataBindings.Clear();
            tbxMiejscowosc.DataBindings.Clear();
            tbxKodPocztowy.DataBindings.Clear();
            tbxAdres.DataBindings.Clear();
            tbxTelefon.DataBindings.Clear();
            tbxEmail.DataBindings.Clear();
        }

        private void btnPoprzedni_Click(object sender, EventArgs e)
        {
            bs.MovePrevious();
            dgUpdate();
            rekord();
        }

        private void btnNastepny_Click(object sender, EventArgs e)
        {
            bs.MoveNext();
            dgUpdate();
            rekord();
        }

        private void btnPierwszy_Click(object sender, EventArgs e)
        {
            bs.MoveFirst();
            dgUpdate();
            rekord();
        }

        private void btnOstatni_Click(object sender, EventArgs e)
        {
            bs.MoveLast();
            dgUpdate();
            rekord();
        }

        private void dgUpdate()
        {
            dg.ClearSelection();
            dg.Rows[bs.Position].Selected = true;
            rekord();
        }

        private void rekord()
        {
            lblRecords.Text = "Rekord " + bs.Position + " z " + (bs.Count - 1);
        }

        private void btnUaktualnij_Click(object sender, EventArgs e)
        {
            da.UpdateCommand = new SqlCommand("UPDATE tbWlasciciel SET NAZWISKO = @NAZWISKO, IMIE = @IMIE, MIEJSCOWOSC = @MIEJSCOWOSC, KOD_POCZTOWY = @KOD_POCZTOWY, ADRES = @ADRES, TELEFON = @TELEFON, EMAIL = @EMAIL WHERE ID_WLASCICIELA = @ID_WLASCICIELA)", cs);
            da.UpdateCommand.Parameters.Add("@IMIE", SqlDbType.VarChar).Value = tbxImie.Text;
            da.UpdateCommand.Parameters.Add("@NAZWISKO", SqlDbType.VarChar).Value = tbxNazwisko.Text;
            da.UpdateCommand.Parameters.Add("@MIEJSCOWOSC", SqlDbType.VarChar).Value = tbxMiejscowosc.Text;
            da.UpdateCommand.Parameters.Add("@KOD_POCZTOWY", SqlDbType.VarChar).Value = tbxKodPocztowy.Text;
            da.UpdateCommand.Parameters.Add("@ADRES", SqlDbType.VarChar).Value = tbxAdres.Text;
            da.UpdateCommand.Parameters.Add("@TELEFON", SqlDbType.VarChar).Value = tbxTelefon.Text;
            da.UpdateCommand.Parameters.Add("@EMAIL", SqlDbType.VarChar).Value = tbxEmail.Text;
            da.UpdateCommand.Parameters.Add("@ID_WLASCICIELA", SqlDbType.Int).Value = ds.Tables[0].Rows[bs.Position][0];
            cs.Open();
            da.UpdateCommand.ExecuteNonQuery();
            MessageBox.Show("Dane w bazie danych zostały zaktualizowane!", "Aktualizacja danych");
            cs.Close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T20:25:16.833

您需要删除 SqlCommand 末尾的“)”。你没有开始`(`，所以它告诉你`)`最后的语法是无效的，它就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:25:05.103

只需删除`)`您的`SqlCommand`. 它在`@ID_WLASCICIELA`参数的右边。您打开了一次括号，但您关闭了两次括号。

用这个：

```
da.UpdateCommand = new SqlCommand("UPDATE tbWlasciciel SET NAZWISKO = @NAZWISKO, IMIE = @IMIE, MIEJSCOWOSC = @MIEJSCOWOSC, KOD_POCZTOWY = @KOD_POCZTOWY, ADRES = @ADRES, TELEFON = @TELEFON, EMAIL = @EMAIL WHERE ID_WLASCICIELA = @ID_WLASCICIELA", cs); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T20:25:08.200

在您的 WHERE 子句中看起来像一个额外的“）”：

```
...@EMAIL WHERE ID_WLASCICIELA = @ID_WLASCICIELA)", cs) 
```

它应该在哪里：

```
...@EMAIL WHERE ID_WLASCICIELA = @ID_WLASCICIELA", cs) 
```

# firefox - Firefox 的新内置 PDF 查看器中不显示 FREE3OF9 条码字体

> ID：15011507
> 
> 赞同：1
> 
> 时间：2013-02-21T20:23:04.213
> 
> 标签：firefox, pdf, fpdf

我有一个 PHP Web 应用程序，它使用 FPDF (v1.53) 和 FREE3OF9 条形码字体来动态生成包含条形码字符串的 PDF。在 19 之前的 Firefox 版本中，PDF 在新选项卡中打开，由 Adob​​e Acrobat 插件显示，并且条形码显示得非常好。

现在 Firefox 19.0 使用自己的内置 PDF 查看器，条形码不再显示。它继续在 IE 和 Chrome 中正常显示。如何让条形码在最新版本的 Firefox 中正确显示？

# php - 检查字符串是否只包含 PHP 中的 URL

> ID：15011508
> 
> 赞同：52
> 
> 时间：2013-02-21T20:23:07.280
> 
> 标签：php, url, validation

我想知道这是否是检查字符串是否只包含 URL 的正确方法：

```
if (stripos($string, 'http') == 0 && !preg_match('/\s/',$string)) {
  do_something();
} 
```

stripos() 检查字符串是否以“http”开头
preg_match() 检查字符串是否包含空格

如果不是这样，我假设该字符串只不过是一个 URL - 但该假设是否有效？有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2013-02-21T20:24:26.300

采用[`filter_var()`](http://www.php.net/manual/en/function.filter-var.php)

```
if (filter_var($string, FILTER_VALIDATE_URL)) { 
  // you're good
} 
```

过滤器可以更加精细。[有关更多信息，请参阅手册](http://www.php.net/manual/en/filter.filters.validate.php)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-21T20:25:55.360

在 PHP 中有一种更好的方法来验证 URL [http://www.php.net/manual/en/function.filter-var.php](http://www.php.net/manual/en/function.filter-var.php)

```
if(filter_var('http://example.com', FILTER_VALIDATE_URL)))
    echo 'this is URL'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-23T13:26:56.113

为了更安全地验证 URL（以及那些“非 ascii”），您可以

1.  检查过滤器（请务必查看适合您情况的过滤器的[手册）](http://www.php.net/manual/en/function.filter-var.php)

2.  检查是否有DNS记录

    ```
    $string = idn_to_ascii($URL);
    if(filter_var($string, FILTER_VALIDATE_URL) && checkdnsrr($string, "A")){
        // you have a valid URL
    } 
    ```

# javascript - 在 ajax 事件上重新初始化 jquery 插件

> ID：15011511
> 
> 赞同：2
> 
> 时间：2013-02-21T20:23:16.767
> 
> 标签：javascript, jquery, jqtransform

我正在尝试使用[这个插件](http://www.dfc-e.com/metiers/multimedia/opensource/jqtransform/)（jqtransform）来制作一些看起来更好看的复选框。但是，我尝试将其应用到的复选框通过 ajax`get()`请求放在页面上，其中 html 是从远程文件中提取的。

```
//apply custom styles to checkboxes
$(document).ajaxComplete(function(){
    console.log('ajax complete');
    //find all form with class jqtransform and apply the plugin
    $("form").jqTransform();
}); 
```

不会初始化这些新的复选框。还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:26:42.607

尝试在 $.get() 的“成功”函数中调用您的插件，例如

```
$.get(myurl, {
    success: function() { 
        $("form").jqTransform();
    }
}); 
```

# php - 您可以使用不同但“兼容”的签名覆盖接口方法吗？

> ID：15011512
> 
> 赞同：22
> 
> 时间：2013-02-21T20:23:34.463
> 
> 标签：php, interface, phpstorm

考虑以下 PHP 接口：

```
interface Item {
    // some methods here
}

interface SuperItem extends Item {
    // some extra methods here, not defined in Item
}

interface Collection {
    public function add(Item $item);
    // more methods here
}

interface SuperCollection extends Collection {
    public function add(SuperItem $item);
    // more methods here that "override" the Collection methods like "add()" does
} 
```

我正在使用 PHPStorm，当我这样做时，我在 IDE 中收到一个错误，基本上说明`add()`in`SuperCollection`的定义与它扩展的接口中的定义不兼容，`Collection`.

在某种程度上，我可以看到这是一个问题，因为该方法的签名与它“覆盖”的签名不完全*匹配*。但是，我确实觉得这与`SuperItem`extends是兼容的`Item`，所以我认为`add(SuperItem)`与`add(Item)`.

我很好奇 PHP（版本 5.4 或更高版本）是否支持此功能，也许 IDE 存在无法正确捕获此问题的错误。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-21T20:44:26.413

不，我很确定 PHP 在任何版本中都不支持这一点，而且它宁愿破坏接口的意义。

接口的意义在于它为您提供了与引用相同接口的其他代码的固定合同。

例如，考虑这样的函数：

```
function doSomething(Collection $loopMe) { ..... } 
```

这个函数期望接收一个实现`Collection`接口的对象。

在函数中，程序员将能够编写对定义在 中的方法的调用`Collection`，因为他们知道对象将实现这些方法。

如果你有一个像这样被覆盖的接口，那么你就会遇到问题，因为`SuperCollection`可以将一个对象传递给函数。`Collection`它会起作用，因为由于继承它也是一个对象。但随后函数中的代码不再确定它知道`add()`方法的定义是什么。

根据定义，接口是一个固定的合同。它是不可变的。

作为替代方案，您可以考虑使用抽象类而不是接口。这将允许您在非严格模式下进行覆盖，尽管出于同样的原因，如果您使用严格模式，您仍然会收到错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-07-06T17:05:47.803

2014 年 11 月发布的 PHP 7.4[改进了类型变化](https://stitcher.io/blog/new-in-php-74#improved-type-variance-rfc)。

问题中的代码仍然无效：

```
interface Item {
    // some methods here
}

interface SuperItem extends Item {
    // some extra methods here, not defined in Item
}

interface Collection {
    public function add(Item $item);
    // more methods here
}

interface SuperCollection extends Collection {
    public function add(SuperItem $item); // This will still be a compile error
    // more methods here that "override" the Collection methods like "add()" does
} 
```

因为`Collection`接口保证任何实现它的东西都可以接受任何类型`Item`的对象作为`add`.

但是，以下代码在 PHP 7.4 中有效：

```
interface Item {
    // some methods here
}

interface SuperItem extends Item {
    // some extra methods here, not defined in Item
}

interface Collection {
    public function add(SuperItem $item);
    // more methods here
}

interface SuperCollection extends Collection {
    public function add(Item $item); // no problem
    // more methods here that "override" the Collection methods like "add()" does
} 
```

在这种情况下`Collection`保证它可以接受任何`SuperItem`. 由于所有`SuperItem`的 s 都是`Item`s，`SuperCollection`所以也做了这个保证，同时也保证它可以接受任何其他类型的`Item`. 这称为[逆变方法参数类型](https://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science)#Contravariant_method_parameter_type)。

在早期版本的 PHP 中存在有限的类型变化形式。假设其他接口与问题中的一样，则`SuperCollection`可以定义为：

```
interface SuperCollection extends Collection {
    public function add($item); // no problem
    // more methods here that "override" the Collection methods like "add()" does
} 
```

这可以解释为意味着任何值都可以传递给该`add`方法。这当然包括所有`Item`的 s，所以这仍然是类型安全的，或者它可以解释为意味着一个未指定的值类，通常记录为`mixed`可以传递，程序员需要使用其他知识来确切地知道什么可以使用该函数.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-09T14:33:36.010

作为一种解决方法，我在接口中使用 PHPDoc 块。

```
interface Collection {
   /**
    * @param Item $item
    */
    public function add($item);
    // more methods here
}

interface SuperCollection extends Collection {
    /**
    * @param SuperItem $item
    */
    public function add($item);
    // more methods here that "override" the Collection methods like "add()" does
} 
```

这样，如果您正确使用接口，IDE 应该可以帮助您捕获一些错误。您也可以使用[类似的技术](https://stackoverflow.com/questions/20422601/override-return-type-in-phpdoc/36517944#36517944)来覆盖返回值类型。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-21T20:38:40.657

You cannot change the methods arguments.

[http://php.net/manual/en/language.oop5.interfaces.php](http://php.net/manual/en/language.oop5.interfaces.php)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-06T10:55:26.570

扩展接口不允许更改方法定义。如果您的 SuperItem 正在扩展 Item，它应该毫无问题地通过实现 Collection 接口的类。

但是根据您真正想做的事情，您可以尝试：

*   使用稍微不同的方法为 SuperItem 创建接口并实现：

    ```
    interface SuperCollection extends Collection {
        public function addSuper(SuperItem $superItem);
    } 
    ```

*   使用装饰器模式无需扩展即可创建几乎相同的界面：

    ```
    interface Collection {
        public function add(Item $item);
        // more methods here
    }

    interface SuperCollection {
        public function add(SuperItem $item);
        // more methods here that "override" the Collection methods like "add()" does
    } 
    ```

    然后是装饰器（抽象）类，它将使用这个接口：

    ```
    class BasicCollection implements Collection {
        public function add(Item $item)
        {
        }
    }

    class DecoratingBasicCollection implements SuperCollection {
        protected $collection;

        public function __construct(Collection $collection)
        {
            $this->collection = $collection;
        }

        public function add(SuperItem $item)
        {
            $this->collection->add($item);
        }
    } 
    ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T20:38:51.673

The problem is not in the IDE. In PHP you cannot override a method. And the compatibility is only in the opposite direction - you can safely expect an instance of the parent class and receive a subclass. But when you expect a subclass, you cannot be safe if you receive the parent class - the subclass may define methods that do not exist in the parent. But still, you can't override the method

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-12-11T22:11:58.050

当我有一个可能需要重载的方法（PHP 不支持该方法）时，我确保方法参数之一（通常是最后一个）是一个数组。通过这种方式，我可以通过任何我需要的东西。然后我可以在函数中测试各种数组元素，以告诉我我需要执行的方法中的例程，通常是在选择/案例中。

# javascript - 其中之一的单选按钮 + 输入字段

> ID：15011513
> 
> 赞同：0
> 
> 时间：2013-02-21T20:23:37.750
> 
> 标签：javascript

我尝试了以下操作，但它向服务器返回了两条数据。这是我的网关的问题，我收到错误消息。

我将其用于我的一项尝试：

```
 <script type="text/javascript">
 if( $('#other).is('):selected') ) 
 {
   // user wants to enter own value
 $('[name="installments"]").not('[type="text"]').attr('name', '') // remove all      
  values apart from the entered text.
 }
 </script>

<body>
<FORM ACTION="http://www.cs.tut.fi/cgi-bin/run/~jkorpela/echo.cgi" METHOD="POST">
<br><br>
<input type="radio" name="installments" id="r1" checked="checked" value="99">
&nbsp;Open-Ended - I can stop them via email at any time.<br>
<label for="installments">number of payments</label><br>
<input type="radio" name="installments" id="other" value="Enter Custom.."><br>
<input type="text" name="installments" value="" maxlength="4" size="4">
 <br><br><br>
<input type="submit" name="btnSubmit" value="Submit" />
</form> 
```

这将返回 -

```
installments 99 
installments (empty) 
```

或者

```
installments Enter Custom.. 
installments 5 
```

对于 var '分期付款'，我只能得到一个回报，要么是 99，要么是他们估算的数字。我已经尝试了使用 JS 执行此操作的各种方法，并允许用户做出具有相同结果的选择 - 发送了 var 'installments' 的两个实例。

是否有一种 javascript 方法来测试输入字段，如果输入了一个数字，则使用 id(s) 禁用额外的单选按钮，使其无法发送任何数据？还是有更好的方法来做到这一点？

* * *

### 解决了

我找到了答案&在这里

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
 $(function() {
  $('#user_input').change(function() {
  $('#use_user_input').val($(this).val());
  });
 });
</script> 
```

和这里的HTML：

```
 Total number of payments...</span><br>
 <input type="radio" name="installments" checked value="99"> &nbsp;
        Open-Ended -
 <input id="use_user_input" type="radio" name="installments" value=""> &nbsp;
        limited number of payments - &nbsp;
<input id="user_input" type="text" value="" maxlength="4" size="4"></span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:32:25.363

您可能希望为输入文本字段提供与单选输入不同的名称，然后将文本字段的 POST 作为与 HTTP 请求中的单选按钮分开的变量处理。此外，给第二个单选输入一个值，例如“其他”，以便您知道处理相关的文本输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T22:30:20.080

如果您只能从表单中接收一个字段，您将需要在用户填写表单时更改表单。目前，如果用户选择由单选按钮分隔的值之一，则表单可以工作。我认为，问题在于单选按钮的状态会覆盖文本字段的值，即使用户选择了填写文本框的“其他”选项。

解决方案是使用在用户更改文本框内容时触发的脚本。此脚本将读取文本框的值并将该值分配给“其他”单选按钮。

我们可以使用`onchange`事件来做到这一点：

```
<input id="otherRadio" type="radio" name="installments" value="" /><br />
<input id="otherText" type="text" value="" maxlength="4" size="4" onchange="applyOtherOption()" /> 
```

如果您现在尝试此操作，当您更改文本字段的值时，它会在您的页面上导致 javascript 错误。这是因为浏览器无法找到名为 的 javascript 函数`applyOtherOption`。现在让我们改变它：

```
<script type="text/javascript">
    function applyOtherOption() {
        var textField = document.getElementById("otherText");
        var radioField = document.getElementById("otherRadio");

        radioField.value = textField.value;
    }
</script> 
```

结果是“其他”单选按钮的值始终更改为用户在文本字段中输入的任何内容，如果选择了此单选，这就是随表单发送的内容。

**重要** 我在这里有点懒惰并输入了访问表单元素内容的最简单方法。这将适用于大多数（可能是所有主要的）浏览器，但这不是应该的方式。正确的方法是先访问表单，然后从表单元素访问字段。要做到这一点，您应该阅读这篇[关于设置表单元素值的](http://www.javascript-coder.com/javascript-form/javascript-form-value.phtml)文章。

我希望这很有用。

# jquery - 在窗口调整大小时为元素设置动画会延迟触发

> ID：15011517
> 
> 赞同：0
> 
> 时间：2013-02-21T20:23:53.707
> 
> 标签：jquery

我正在检查调整大小时的窗口高度，如果元素在某个高度内，则为它设置动画。但是，该函数触发较晚，通常是在我完成调整浏览器窗口大小后 4 或 5 秒。我需要在完成调整大小后立即启动它。虽然我正在调整大小会更好。任何帮助，将不胜感激。谢谢。

代码是：

```
$(window).resize(function() {
    adjustPanel();
});

adjustPanel = function() {
    if ($(window).height() > 920) {
        $('#search-board-wrap').animate({
            height: 795,
            marginTop: 795
        });
    } else {
        $('#search-board-wrap').animate({
            height: 650,
            marginTop: 650
        });
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:27:16.417

之前的动画会随着新动画的触发而继续运行，因此您的动画队列可能会随着 resize 事件的反复触发而填满。

用于[`.stop()`](http://api.jquery.com/stop/)停止当前动画并清除队列：

```
$('#search-board-wrap').stop(true, true).animate(... 
```

老实说，我只会使用 CSS 媒体查询并摆脱所有这些 JS：

```
#search-board-wrap {
    height: 795px;
    width: 795px;
}

@media all and (max-height: 920px) {
    #search-board-wrap {
        height: 650px;
        width: 650px;
    }
} 
```

# javascript - 在按钮点击链中执行 javascript 函数

> ID：15011520
> 
> 赞同：-4
> 
> 时间：2013-02-21T20:23:59.037
> 
> 标签：javascript, html, button

在我原来的帖子中，我不确定我应该去的深度。这是自从发布 jQuery 答案以来我一直在做的事情：

我正在尝试执行一项任务，该任务要求用户从一系列按钮中选择并单击一个 html 按钮，然后需要从一系列按钮中选择另一个 html 按钮。

本质上，我希望将第一个按钮选择的值作为参数传递给将在用户单击第二个按钮时运行的函数。我只是在学习 javascript，我迷路了。

谢谢

HTML：

```
<form id="scoreboard">
<div>
<input type="text" name="homeTeam" value="00" size="2"  "readonly" id="homeTeamScore"/>
<input type="button" value="+1" name="add1" id="homeAdd1" class="homeScore" onClick="calcScore(1)"/>
<input type="button" value="-1" name="neg1" id="homeNeg1" class="homeScore" onClick="calcScore(4)"/>
</div>
<div>
<input type="button" name="homeP1" id="homeP1" class="player" value="24" style="text-align:center;"/>
<input type="text" name="homeP1Score" value="0" size="2" style="text-align:center;"/>
</div>
<div>
<input type="button" name="homeP2" id="homeP2" class="player" value="44" style="text-align:center;"/>
<input type="text" name="homeP2Score" value="0" size="2" style="text-align:center;"/>
</div>
</form> 
```

Javascript：

```
function calcScore(amount) {
if(amount==1) {scoreboard.homeP1Score.value++;scoreboard.homeTeam.value++;}
else if(amount==4) {scoreboard.homeP1Score.value--;scoreboard.homeTeam.value--;}
}

$('.player').click(function() {
//initialize the second button listener
var data = $(this).attr('data');
$('.homeScore').click(function() {
    function addHomeScore(data)
});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:29:45.793

使用 jQuery：

```
$('#buttonId').click(function() {
    //initialize the second button listener
    var data = $(this).attr('data');
    $('#button2Id').click(function() {
        yourFunction(data);
    });
 }); 
```

这种方法更好，因为它使用 JavaScript 作用域来避免全局变量。由于 JavaScript（尤其是 jQuery）有时会同时执行多个线程/函数，因此很容易遇到全局问题。它们也很难测试且不安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T20:28:31.190

### 在原始 JavaScript 中：

***HTML：***

```
 <button class="button1" onclick="saveValue()" />
 <button class="button2" onclick="callMethod()" /> 
```

***JavaScript：***

```
 myGlobalVariable = null;
 function saveValue(){
       myGlobalVariable = "Value That Was Selected";
 }

 function callMethod(){
       alert(myGlobalVariable + "I HAZ ACCESS TO GLOBALS!!!!");
 } 
```

* * *

### 在 jQuery 中：

***HTML：***

```
 <button class="button1" />
     <button class="button2" /> 
```

***JavaScript：***

```
 myGlobalVariable = null;
     $('button.button1').click(function(){
             myGlobalVariable = "Value That Was Selected";
     });
     $('button.button2').click(function(){
            alert(myGlobalVariable + "I HAZ ACCESS TO GLOBALS!!!!");
     }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T20:27:42.683

在js中设置一些全局变量。然后在每个按钮上设置一些 onClick 事件来改变全局变量。然后单击下一步按钮可以检查以查看全局变量中的值

```
<button onclick="myFunction()">Click me</button> 
```

# sql-server - 比较第四季度至第一季度的季度销售额

> ID：15011521
> 
> 赞同：1
> 
> 时间：2013-02-21T20:24:00.447
> 
> 标签：sql-server, sql-server-2008

假设我有一个名为 Sales 的表，如下所示：

```
 Year Quarter Sales
 2012    4     5000
 2013    1     6111
 2013    2     7222 
```

我试图比较每个季度的销售额增长，所以我想得到这样的结果：

```
Q1 Q2 Sales Difference
 4  1      1111
 1  2      1111 
```

我很难想出一种方法来比较上一年的第四季度和明年的第一季度。

我在这里设置了一个带有类似表的 SQLFiddle [，](http://sqlfiddle.com/#!3/a6913/9/0)以及适用于同一年各季度的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:44:48.720

怎么样：

```
select a.Year, a.Quarter as Q1, ISNULL(b.Quarter, c.Quarter) as Q2, ISNULL(b.Sales, c.Sales) - a.Sales AS [Sales Increase]
from Sales a
left join Sales b on a.Quarter = b.Quarter - 1 and a.Year = b.Year
left join Sales c on a.Quarter = 4 and c.Quarter = 1 and a.Year = c.Year - 1 
```

[SQL Fiddle](http://sqlfiddle.com/#!3/62879/2)（尽管将 2014 Q5 更改为 Q1 ......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T20:49:19.717

另外的选择

```
WITH QuarterlySales AS (
    SELECT Sales.Quarter, Sales.Year, DateAdd(q,Sales.Quarter,CAST('01/01/'+CAST(YEAR AS CHAR(4)) AS DATE)) AS QDate
        , Sales
    FROM Sales)
SELECT b.[Quarter] as [Q1], a.[Quarter] AS [Q2], 
        a.Sales - b.Sales AS [Sales Increase]
FROM QuarterlySales a 
LEFT JOIN QuarterlySales b 
    ON a.[QDate] = DateAdd(q,1,b.[QDate]) 
```

不确定这方面的表现是比@chrisb 好还是差。它对表进行的扫描少了一次，但对索引的扫描可能不会那么好。我很想知道它在一个更大的例子中是如何做的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T22:35:06.680

我发现使用 CTE 有助于保持代码的组织和整洁。您需要重新格式化数字并将 Q4 与明年的 Q1 匹配的混乱部分可以在那里处理，并且您的主要查询很简单。

```
with NewSales (QtrDate, DisplayDate, Year, Quarter, Sales) as (
    select
      Year - 0.25 + (Quarter / 4.0) as QtrDate,
      cast(Year as varchar(10)) + '-Q' + cast(Quarter as varchar(10)) as DisplayDate,
      Year, Quarter, Sales
    from
      @sales
)

select
  a.DisplayDate, a.Sales, 
  b.DisplayDate, b.Sales,
  b.Sales - a.Sales as SalesIncrease,
  (b.Sales / (a.Sales * 1.0)) - 1 as SalesPctIncrease

from
  NewSales a left outer join
    NewSales b on a.QtrDate + 0.25 = b.QtrDate

where
    a.Sales is not null and b.Sales is not null 
```

我在季度格式和百分比计算方面添加了一点天赋（最低限度:)，您可以使用这些示例来帮助自定义输出。

# c# - 为什么杂音比内置的 MD5/SHA1 方法慢

> ID：15011523
> 
> 赞同：4
> 
> 时间：2013-02-21T20:24:15.937
> 
> 标签：c#, hash

我刚刚尝试了杂音哈希 C# 端口...

然而，我对它的表现感到非常失望。它似乎比内置的 C# MD5/SHA1 computeHash 方法慢。

调试模式很好，这种模式下杂音更快。如果切换到 Release 模式，它会比 SHA1 或 MD5 哈希方法慢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:15:27.783

我找到了原因，它应该设置为 x64 或 anycpu 而不是 x86

这是测试结果。

```
Release - Target AnyCPU

Murmur Hash profile...
 test Bytes     :2621440000
 iterations     :10000
 totalSeconds   :**1.787**
 bytesPerSecond :1466950195.85898
 mbitsPerSecond :1398.99272523783

BuildinSHA Hash profile...
 test Bytes     :2621440000
 iterations     :10000
 totalSeconds   :**5.956**
 bytesPerSecond :440134318.334453
 mbitsPerSecond :419.74479516454

Release - Target X86

Murmur Hash profile...
 test Bytes     :2621440000
 iterations     :10000
 totalSeconds   :10.612
 bytesPerSecond :247026008.292499
 mbitsPerSecond :235.582359592914

BuildinSHA Hash profile...
 test Bytes     :2621440000
 iterations     :10000
 totalSeconds   :5.987
 bytesPerSecond :437855353.265408
 mbitsPerSecond :417.571404710205

Release - Target X64

Murmur Hash profile...
 test Bytes     :2621440000
 iterations     :10000
 totalSeconds   :1.732
 bytesPerSecond :1513533487.29792
 mbitsPerSecond :1443.41801385681

BuildinSHA Hash profile...
 test Bytes     :2621440000
 iterations     :10000
 totalSeconds   :5.968
 bytesPerSecond :439249329.758713
 mbitsPerSecond :418.900804289544 
```

源代码：

[https://github.com/arisoyang/Murmur3Hash](https://github.com/arisoyang/Murmur3Hash)

# sass - 在现有的 Mixin 上使用 SASS 函数？

> ID：15011527
> 
> 赞同：0
> 
> 时间：2013-02-21T20:24:20.743
> 
> 标签：sass, mixins

我有一个现有的 mixin，它创建了一个背景渐变：

```
@include bg_gradient($dark:#292446, $light:#3e395b, $highlight:#65617d); 
```

我想让悬停使它变亮，我似乎无法弄清楚如何将其交给函数：

```
lighten(@include bg_gradient($dark:#292446, $light:#3e395b, $highlight:#65617d), 10%); 
```

不起作用，我也尝试过像其他 CSS attrs 一样滚动到最后：

```
@include bg_gradient($dark:#292446, $light:#3e395b, $highlight:#65617d, lighten ($dark, 10%)); 
```

此外，尝试将 mixin 分配给变量并将其传递如下：

```
lighten($gradient-value, 10%); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:50:07.093

Mixins 不返回值，因此您不能在它们上使用函数。在您的第二个示例中，您需要能够将函数本身作为参数传递，这目前是不可能的。您唯一的选择是这个（假设您想将该函数应用于所有 3 个参数）：

```
@include bg_gradient($dark: lighten(#292446, 10%), $light: lighten(#3e395b, 10%), $highlight: lighten(#65617d, 10%)); 
```

# c++ - 模板中的异常

> ID：15011529
> 
> 赞同：0
> 
> 时间：2013-02-21T20:24:45.927
> 
> 标签：c++, templates, exception

我试图编译这段代码，我没有收到任何抱怨。但是，当我运行它时，它给了我最后一行的异常错误，即 cout<<"Norm:"<

你能指导我如何解决这个问题。先感谢您

```
#include <stdafx.h>
#include <iostream>
#include <string>
#include <boost/function.hpp>
#include <boost/array.hpp>

using namespace std;

template<typename R,typename D> 
class GenericFunction
{
private:
    boost::function<R (D)> f;
protected:
    GenericFunction(){};
public:
    GenericFunction(const boost::function<R (D)>& myFunction){f=myFunction;};
    R evaluate(const D& value) const{cout<<"Good Job"<<endl;} ;
    R operator ()(const D& value);// const{ return f(value); };
}; 
template <typename R, typename D, int N>
class ScalarValuedFunction:public GenericFunction<R,boost::array<D, N>>
{
public:
    ScalarValuedFunction(const boost::function<R (const boost::array<D, N>)> &myF){};
};

template<typename Numeric, std::size_t N>
Numeric Norm(const boost::array<Numeric , N>& Vec)
{
    Numeric Result=Vec[0]*Vec[0];
    for (std::size_t i=1; i<Vec.size();i++)
    {
        Result+=Vec[i]*Vec[i];
    }
    return Result;
} 

double test(double t)
{
    return t;
}

int main ()
{
    const int N=4;
    boost::array<double, N> arr={0.2,  .3,  1.1,  4};
    ScalarValuedFunction<double, double, N> myfun(Norm<double,N>);  

    cout<<"Norm:"<<myfun(arr)<<endl;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T20:30:32.117

您没有将函数参数转发给基类的构造函数：

```
ScalarValuedFunction(const boost::function<R (const boost::array<D, N>)> &myF)
    : GenericFunction<R, boost::array<D, N>>(myF) // <=== ADD THIS
{
} //; <== SEMICOLON NOT NEEDED AFTER A FUNCTION DEFINITION! 
```

如果不这样做，`GenericFunction`子对象将被初始化为默认构造函数（派生类可以访问它，因为它被声明为`protected`），并且它的成员变量`f`也将被默认初始化。

然后，当试图在内部调用它时`operator ()`（我想它的定义是你在评论中显示的那个），Ka-Boom。

# java - 扩展泛型类

> ID：15011533
> 
> 赞同：1
> 
> 时间：2013-02-21T20:25:03.090
> 
> 标签：java, generics, inheritance

我有三个 Java 类。前两个类扩展`ClassA`，最后一个扩展`ClassB`。

```
Class1  extends ClassA

Class2  extends ClassA

Class3  extends ClassB 
```

我在三个类（Class1-3）中有一些重复的方法。为了避免它们重复，我添加了一个`ClassCommon`这样的：

```
Class1  extends ( ClassCommon extends ClassA )

Class2  extends ( ClassCommon extends ClassA )

Class3  extends ClassB 
```

所以我的重复方法现在在`ClassCommon`，但我仍然在`Class3`and之间有重复的方法`ClassCommon`。

我希望到目前为止我是有道理的。

**我的问题是：**无论如何，使用泛型类型，有这种配置：

```
Class1  extends ClassCommon<ClassA>

Class2  extends ClassCommon<ClassA>

Class3  extends ClassCommon<ClassB>

ClassCommon<E> extends E 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T20:37:36.957

怎么样

```
Class1 extends ClassA
Class2 extends ClassA
Class3 extends ClassB
ClassA extends ClassCommon
ClassB extends ClassCommon 
```

或者，使用接口：

```
Class1 extends ClassCommon implements ClassA
Class2 extends ClassCommon implements ClassA
Class3 extends ClassCommon implements ClassB 
```

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T20:48:17.377

用作`ClassCommon`层次结构的根。

```
public abstract class ClassCommon {

    /*
     * Your methods here.
     */
} 
```

然后 ...

```
public class ClassA extends ClassCommon
public class ClassB extends ClassCommon 
```

... 和 ...

```
public class Class1 extends ClassA
public class Class2 extends ClassA
public class Class3 extends ClassB 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T20:37:50.413

我不知道您有什么常见功能，但请尝试`ClassCommon`作为类层次结构的根：

```
class ClassCommon<E extends ClassCommon<E>>

class ClassA extends ClassCommon<ClassA>

class ClassB extends ClassCommon<ClassB>

class Class1 extends ClassA

class Class2 extends ClassA

class Class3 extends ClassB 
```

# python - 迭代字符串并替换python中的元素

> ID：15011542
> 
> 赞同：0
> 
> 时间：2013-02-21T20:25:43.897
> 
> 标签：python, string, replace, indexing

我正在尝试搜索两个字符串以寻找匹配的元素。如果字符串有两个位于不同位置的共同元素，我想让“猜测”字符串中的那个元素成为牛。如果字符串在同一位置有两个元素，则该元素为 BULL。

这是我所拥有的：

```
 if index(number,i) in guess and not index(guess,i) == index(guess,i):
            replace(index(guess,i),'COW')

        if index(guess,i) == index(number,i):
            replace(index(guess,i),'BULL') 
```

我不确定我是否正确使用索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:44:12.380

首先，您需要使用`index()`and`replace()`作为字符串方法，就像 Martijn 在评论中所说的那样。

就像这样：在字符串`guess.index(i)`中找到 的索引。`i``guess`

您可能想查看[find()](http://docs.python.org/3/library/stdtypes.html?highlight=index#str.find)，它的作用与未找到子字符串时相同`index()`但不会引发异常。

另请注意，您正在查看的结果`index()`是否在 string 中`guess`。这是一个错误，因为整数不能在字符串中！ `index()`返回一个整数！

然后考虑你在说`... and not guess.index(i) == guess.index(i):`（我修复了`index`代码）这是没有意义的，因为它们当然是平等的！他们是一样的东西！

最后，您使用`replace`不正确。从[文档](http://docs.python.org/3/library/stdtypes.html?highlight=index#str.replace)中，`replace`将字符串作为第一个参数 - 而不是索引！尝试像这样使用它：`guess = guess.replace(i, 'BULL')`. 这将更改为`guess`将*所有*出现的`i`替换为 string `'BULL'`。

我不关心你这里的实际算法，而只是你的基本错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:50:28.343

我不会使用这种`index()`方法。相反，我会将字符串的元素变成一个列表，然后说：

```
listOne = [hello,goodbye,adios, shalom]
listTwo = [hello,adios,arrivaderci]

def cowbull(L1, L2):
    for i in range(len(L1)):
        if L1[i] in L2:
            if L1[i] == L2[i]:
                L1[i] = 'BULL'
                L2[i] = 'BULL'
            else:
                L1[i] = 'COW'
                L2[L1[i]] = 'COW' 
```

我就是这样做的，但是使用你和威廉的代码的方式也可以很好地工作。我只是习惯了这种方式，它可能没有他的效率那么高，但它通常效果很好。

# perl - perl多行查找和替换，无法换行

> ID：15011551
> 
> 赞同：0
> 
> 时间：2013-02-21T20:26:06.880
> 
> 标签：perl

我在 Linux 主机上有一个目录，其中包含几个属性文件，我想通过用占位符标记替换硬编码值来编辑这些文件。我的目标是有一个 perl 脚本，它读取一个分隔文件，其中包含每个属性文件的条目，其中列出了硬编码值、占位符值和要编辑的文件的名称。

例如，在 file.prop 我设置了这些值

```
 <connection targetHostUrl="99.99.99.99"
                        targetHostPort="9999" 
```

我想用标签替换值，如下所示

```
 <connection targetHostUrl="TARGETHOST"
                        targetHostPort="PORT" 
```

会有几个类似的条目，所以我必须匹配 IP 和 PORT 的唯一组合，所以我需要多行匹配。

为此，我编写了以下脚本来获取分隔文件名的输入，该文件名由 || 分隔。我从 config 目录中获取该文件并读取值以获取硬编码的值、标记和文件名以进行编辑。然后我读入该属性文件，进行替换，然后再次将其写出。

```
#!/usr/bin/perl
my $config = $ARGV[0];
chomp $config;
my $filename = '/config/' . $config;
my ($hard,$tagg,$prop);
open(DATAFILE, $filename) or die "Could not open DATAFILE $filename.";
while(<DATAFILE>)
{
  chomp $_;
  ($hard,$tagg,$prop) = split('\|\|', $_);
$*=1;
open(INPUT,"</properties/$prop") or die "Could not open INPUT $prop.";
@input_array=<INPUT>;
close(INPUT);
$input_scalar=join("",@input_array);
$input_scalar =~ s/$hard/$tagg/;
open(OUTPUT,">/properties/$prop") or die "Could not open OUTPUT $prop.";
print(OUTPUT $input_scalar);
close(OUTPUT);
}
close DATAFILE; 
```

在配置文件中，我有以下条目

```
<connection targetHostUrl="99.99.999.99"(.|\n)*?targetHostPort="9999"||<connection targetHostUrl="TARGETHOST1"\n targetHostPort="PORT"||file.prop 
```

我的输出如下图所示。它将我希望成为换行符的内容作为文字 \n

```
<connection targetHostUrl="TARGETHOST"\n targetHostPort="PORT" 
```

我找不到将 \n 作为换行符的方法。起初我想，没问题，我会做第二次替换，比如

```
perl -i -pe 's/\\n/\n/o' $prop 
```

尽管这可行，但由于某种原因，它会将 ^M 字符放在每一行的末尾，除了我进行替换的那一行。我不想进行第三次替换以去除它们。

我已经搜索并找到了其他进行多行搜索/替换的方法，但它们都从字面上解释了 \n。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:08:07.043

> 我的输出如下图所示。它将我希望成为换行符的内容作为文字 \n

当字符串不包含换行符时，为什么要插入换行符？

> 我找不到将 \n 作为换行符的方法。

没有。如果要替换换行符，则需要提供换行符。

如果您使用了适当的 CSV 解析器，例如 Text::CSV_XS，您可以在数据文件中添加换行符。

否则，您将不得不编写一些代码来处理您希望代码处理的转义序列。

> 出于某种原因，它会将 ^M 字符放在每一行的末尾，除了我进行替换的那一行。

恰恰相反。它将它从您进行替换的一行中删除。

这就是家，一些程序代表回车。您有一个以 CR LF 行结尾的文件。您可以使用`dos2unix`它来转换它，或者您可以保留它，因为 XML 不在乎。

# jquery - jQuery关于“选定的选项”选择

> ID：15011554
> 
> 赞同：1
> 
> 时间：2013-02-21T20:26:11.677
> 
> 标签：jquery, events

很容易听到 select 的变化：

```
var redirect = function() {
    return window.location = $(this).val();
};

$('body').on('change', '#nav-select', redirect); 
```

但是如何捕捉已经选择的选项的选择（`change`对我们来说没有事件）？

试过：

```
$('body').on('click', '#nav-select option', redirect); 
```

不工作...

编辑：要清楚：

我有一个带有默认选定选项的选择`foo`。我想抓住这个：

1.  用户点击选择
2.  选择`foo`已被选中的选项（无更改事件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:57:33.013

所以我把你的问题解释为：

*“单击选项但选择元素的值未更改时如何运行代码”*

我的解决方案是从选择加载的选项中存储初始值。然后将旋转锁附加到选择元素。然后附加一个由旋转锁控制的点击事件。然后查看单击是否在最初加载的选项上。结果如下：

工作演示：http: [//jsfiddle.net/NS4qr/3/](http://jsfiddle.net/NS4qr/3/)

html

```
<select id="s1">
  <option value="1">1</option>
  <option value="3">2</option>
  <option value="3">3</option>
</select> 
```

js

```
$(function(){
    (function(){
        var loadedOption = $("#s1 option:selected").val();
        var isOpen = false;

        $("#s1").blur(function(){
            isOpen = false;
        });

        $("#s1").click(function(){
            isOpen = !isOpen;
            if(isOpen)return;
            if(this.value == loadedOption){
             //window.location = $(this).val();
             alert($(this).val());
            }
        });
    })();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:56:32.180

您可以在 jQuery 中为选项元素指定“单击”处理程序，并且您可以在选项元素上触发“单击”事件，也可以使用 jQuery，然后调用您的“单击”处理程序。

但是，选项元素上没有“单击”事件，因此实际单击它（用鼠标）不会创建单击事件。它将在选择元素上创建“更改”事件，但前提是您单击了未选择的选项。

例子：

```
<select id="testSelect">
    <option value="1">1</option>
    <option value="2" selected="selected">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
</select>
<script type="text/javascript">
    $("#testSelect option").click(function (event) {
        console.log("option clicked");
    });

    $("#testSelect option[value='2']").click(); // console outputs "option clicked"
</script> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-21T20:31:11.657

尝试同时使用“选择”和“点击”。就像是

```
$('body').on('change', '#nav-select', redirect);

$('body').on('click', '#nav-select option', redirect); 
```

# python - Python 代码永远不会达到它应该达到的某个部分

> ID：15011555
> 
> 赞同：0
> 
> 时间：2013-02-21T20:26:19.103
> 
> 标签：python

嘿，我正在使用 Libtcod 使用 python 创建一个 roguelike 游戏。我有游戏生成随机房间的代码。它应该制作多个房间，直到一个交叉然后停止制作房间。问题是它总是只创建 1 个房间。这是孔代码：

```
import libtcodpy as libtcod;

SCREEN_WIDTH = 80;
SCREEN_HEIGHT = 50;

MAP_WIDTH = 80
MAP_HEIGHT = 45

ROOM_MAX_SIZE = 10
ROOM_MIN_SIZE = 6
MAX_ROOMS = 30

LIMIT_FPS = 20;

color_dark_wall = libtcod.Color(0, 0, 100)
color_dark_ground = libtcod.Color(50, 50, 150)

class Tile:
    def __init__(self, blocked, block_sight = None):
        self.blocked = blocked

        if block_sight is None: block_sight = blocked
        self.block_sight = block_sight

class Rect:
    def __init__(self, x, y , w, h):
        self.x1 = x
        self.y1 = y
        self.x2 = x + w
        self.y2 = y + h

    def center(self):
        center_x = (self.x1 + self.x2) / 2
        center_y = (self.y1 + self.y2) / 2
        return (center_x, center_y)

    def intersect(self, other):
        return (self.x1 <= other.x2 and self.x2 >= other.x1 and
                self.y1 <= other.y2 and self.y2 >= other.y1)

class Object:
    def __init__(self, x, y, char, color):
        self.x = x
        self.y = y
        self.char = char
        self.color = color

    def move(self, dx, dy):
        if not map[self.x + dx][self.y + dy].blocked:
            self.x += dx
            self.y += dy

    def draw(self):
        libtcod.console_set_default_foreground(con, self.color)
        libtcod.console_put_char(con, self.x, self.y, self.char, libtcod.BKGND_NONE)

    def clear(self):
        libtcod.console_put_char(con, self.x, self.y, ' ', libtcod.BKGND_NONE)

def create_room(room):
    global map

    for x in range(room.x1 + 1, room.x2):
        for y in range(room.y1 + 1, room.y2):
            map[x][y].blocked = False
            map[x][y].block_sight = False

def create_h_tunnel(x1, x2, y):
    global map

    for x in range(min(x1, x2), max(x1, x2) + 1):
        map[x][y].blocked = False
        map[x][y].block_sight = False

def create_v_tunnel(y1, y2, x):
    global map

    print("Hello")

    for y in range(min(y1, y2), max(y1, y2) + 1):
        map[x][y].blocked = False
        map[x][y].block_sight = False

def make_map():
    global map

    map = [[ Tile(True)
        for y in range(MAP_HEIGHT) ]
            for x in range(MAP_WIDTH) ]

    rooms = []
    num_rooms = 0

    for r in range(MAX_ROOMS):
        w = libtcod.random_get_int(0, ROOM_MIN_SIZE, ROOM_MAX_SIZE)
        h = libtcod.random_get_int(0, ROOM_MIN_SIZE, ROOM_MAX_SIZE)
        x = libtcod.random_get_int(0, 0, MAP_WIDTH - w - 1)
        y = libtcod.random_get_int(0, 0, MAP_HEIGHT - h -1)

    new_room = Rect(x, y, w, h)

    failed = False

    for other_room in rooms:
        if new_room.intersect(other_room):
            failed = True
            break

    if not failed:
        create_room(new_room)

        (new_x, new_y) = new_room.center()

        if num_rooms == 0:
            player.x = new_x
            player.y = new_y

        else:
            (prev_x, prev_y) = rooms[num_rooms-1].center()

            if libtcod.random_get_int(0, 0, 1) == 1:
                create_h_tunnel(prev_x, new_x, prev_y)
                create_v_tunnel(prev_y, new_y, new_x)
            else:
                create_v_tunnel(prev_y, new_y, prev_x)
                create_h_tunnel(prev_x, new_x, new_y)

        rooms.append(new_room)
        num_rooms += 1

def render_all():
    global color_dark_wall, color_light_wall
    global color_dark_ground, color_light_ground

    for y in range(MAP_HEIGHT):
        for x in range (MAP_WIDTH):
            wall = map[x][y].block_sight
            if wall:
                libtcod.console_set_char_background(con, x, y, color_dark_wall, libtcod.BKGND_SET)
            else:
                libtcod.console_set_char_background(con, x, y, color_dark_ground, libtcod.BKGND_SET)

    for object in objects:
        object.draw()

    libtcod.console_blit(con, 0, 0, SCREEN_WIDTH, SCREEN_HEIGHT, 0, 0, 0)

def handle_keys():
    key = libtcod.console_check_for_keypress()
    if key.vk == libtcod.KEY_ENTER and key.lalt:
        libtcod.console_set_fullscreen(not libtcod.console_is_fullscreen())

    elif key.vk == libtcod.KEY_ESCAPE:
        return True  #exit game

    if libtcod.console_is_key_pressed(libtcod.KEY_UP):
        player.move(0, -1)

    elif libtcod.console_is_key_pressed(libtcod.KEY_DOWN):
        player.move(0, 1)

    elif libtcod.console_is_key_pressed(libtcod.KEY_LEFT):
        player.move(-1, 0)

    elif libtcod.console_is_key_pressed(libtcod.KEY_RIGHT):
        player.move(1, 0)

libtcod.console_set_custom_font('terminal10x10_gs_tc.png', libtcod.FONT_TYPE_GREYSCALE | libtcod.FONT_LAYOUT_TCOD);
libtcod.console_init_root(SCREEN_WIDTH, SCREEN_HEIGHT, 'Lets Crawl', False);
libtcod.sys_set_fps(LIMIT_FPS);
con = libtcod.console_new(SCREEN_WIDTH, SCREEN_HEIGHT)

player = Object(SCREEN_WIDTH/2, SCREEN_HEIGHT/2, '@', libtcod.green)
npc = Object(SCREEN_WIDTH/2 - 5, SCREEN_HEIGHT/2, '@', libtcod.yellow)
objects = [npc, player]

#makes the map
make_map()

while not libtcod.console_is_window_closed():

    render_all()

    #libtcod.console_check_for_keypress()

    libtcod.console_flush();

    for object in objects:
        object.clear()

    exit = handle_keys()
    if exit:
        break 
```

这是我怀疑问题所在的 make_map() 函数：

```
def make_map():
    global map

    map = [[ Tile(True)
        for y in range(MAP_HEIGHT) ]
            for x in range(MAP_WIDTH) ]

    rooms = []
    num_rooms = 0

    for r in range(MAX_ROOMS):
        w = libtcod.random_get_int(0, ROOM_MIN_SIZE, ROOM_MAX_SIZE)
        h = libtcod.random_get_int(0, ROOM_MIN_SIZE, ROOM_MAX_SIZE)
        x = libtcod.random_get_int(0, 0, MAP_WIDTH - w - 1)
        y = libtcod.random_get_int(0, 0, MAP_HEIGHT - h -1)

    new_room = Rect(x, y, w, h)

    failed = False

    for other_room in rooms:
        if new_room.intersect(other_room):
            failed = True
            break

    if not failed:
        create_room(new_room)

        (new_x, new_y) = new_room.center()

        if num_rooms == 0:
            player.x = new_x
            player.y = new_y

        else:
            (prev_x, prev_y) = rooms[num_rooms-1].center()

            if libtcod.random_get_int(0, 0, 1) == 1:
                create_h_tunnel(prev_x, new_x, prev_y)
                create_v_tunnel(prev_y, new_y, new_x)
            else:
                create_v_tunnel(prev_y, new_y, prev_x)
                create_h_tunnel(prev_x, new_x, new_y)

        rooms.append(new_room)
        num_rooms += 1 
```

程序创建房间后，将房间添加到列表中，但它不继续​​制造房间吗？还是创建的每个房间的大小相同（即使我传递了随机数）并且它创建了第一个房间然后停止？我不明白...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:32:58.733

我怀疑你有一个缩进错误。看起来 w、h、x 和 y 定义之后的所有内容都应该是同一个 for 循环的一部分，因此应该缩进到同一级别。

# regex - 如何使用 ack 搜索（转义）美元符号？

> ID：15011562
> 
> 赞同：5
> 
> 时间：2013-02-21T20:26:48.863
> 
> 标签：regex, perl, unix, ack

我想`$$`在代码库中确认文字字符串：“”，但像这样转义美元符号：

```
ack \$\$ 
```

不起作用。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-21T20:47:47.860

您对 shell 引用感到困惑。当您键入：

```
ack "\\\$\\\$\(" 
```

shell 对双引号字符串进行插值，以便`\\`转换为`\`、`\$`转换为`$`并`\(`转换为`\(`ack 获取字符串`\$\$\(`作为其参数。通过使用单引号和调用来避免 shell 插值要简单得多：

```
ack '\$\$\(' 
```

替换`ack`为`echo`探索外壳如何扩展字符串。注意

```
ack "\\$\\$\(" 
```

也可以，但原因略有不同。在这里，前两个`\`被视为单个（转义）`\`，然后`$`被翻译为 a `$`，因为它后面跟着一个不是变量名中有效字符的字符。 `\(`扩展为`\(`而不是仅仅`(`因为`(`不受插值影响，因此不需要转义。但请注意，在双引号之外，`\(`将转换为`(`.

Shell 引用规则有时会令人困惑！

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-05-16T17:22:31.140

使用 ack's`-Q`进行转义。

```
ack -Q '$$' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T20:27:49.003

您可以使用三个反斜杠转义美元符号字符，如下所示：

```
ack "\\\$\\\$" 
```

或使用单引号，您只需将其转义一次：

```
ack '\$\$' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T20:54:25.937

您可以使用格式说明符`printf`为您处理引用。`%q`

```
$ printf %q '$$('
\$\$\( 
```

`help print`有以下要说的（我假设这里是 bash）`

```
 %q quote the argument in a way that can be reused as shell input 
```

# cocos2d-iphone - 通过获取 NSSting 的文本宽度来设置 CCLabelTTF 的宽度不能正常工作？

> ID：15011564
> 
> 赞同：1
> 
> 时间：2013-02-21T20:26:56.413
> 
> 标签：cocos2d-iphone

我是一名iphone游戏开发者。现在我正在为儿童开发一个图书应用程序。为此，我需要更改 cclabel 的颜色以逐字更改背景中的文本。使其作为初始过程工作

```
 NSString *pstring1 = @"The moon is a big eye";
    int ix = 600,iy = 300;
    NSArray *str1 = [pstring1 componentsSeparatedByString:@" "];
    NSLog(@"str1 %@",str1);

    for(NSString* st in str1)
    {
    CCLOG(@"STRING IS %@ POSITION IS %d",st,ix);
     CGFloat wid= 0;   
    CGFloat ss = [st sizeWithFont: [UIFont systemFontOfSize:25]].width;
    wid = ss+(ss/10);
    CCLabelTTF * labels = [CCLabelTTF labelWithString:st fontName:@"Marker Felt" fontSize:25 ];
    [labels setPosition:CGPointMake(ix, iy)];

    [labels setColor:ccBLUE];
    ix+=wid+5; 

    [self addChild:labels]; 
```

例如，我用空格分隔了一个字符串并将其添加到 NSArray。在 for 循环中，我使用 sizeWithFont 逐个获取数组中字符串的文本宽度，并将其添加为 CGFloat 值。我正在为数组中的每个单词创建 cclabel 并根据单词的增加宽度大小保存在 CGFloat 中的数组的宽度。问题是每个 cclabel 之间有更多的空白，或者它相互合并。我不知道我是对还是错输出看起来像这样[http://screencast.com/t/p8Rj8GKZ](http://screencast.com/t/p8Rj8GKZ)。请帮我解决这个问题。如果这个问题得到解决，意味着我将使用计时器并更改每个 cclabel 的颜色以显示单词到单词的颜色变化效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T06:13:06.233

最后我解决了我上面提到的问题

我刚刚将标签的内容大小设置为零，现在一个单词与另一个单词之间的所有不需要的空格都消失了

[标签 setContentSize:CGSizeZero];

# opencv - OpenCV - 寻找刚体点云的平移

> ID：15011568
> 
> 赞同：0
> 
> 时间：2013-02-21T20:27:02.177
> 
> 标签：opencv

我有 2 个图像 sourceImg，refImg。

我已经提取了这样的特征：

```
cv::GoodFeaturesToTrackDetector detector;
std::vector<cv::KeyPoint> sourceKeyPoints, refKeyPoints;
detector.detect(sourceImg, sourceKeyPoints);
detector.detect(refImg, refKeyPoints); 
```

我想找到一个对象从 refImg 到 sourceImg 的翻译。没有旋转或透视变化，只有简单的二维平移。可能会有一些噪音。

当两个集合提取的特征数量相同时，findHomography() 可以正常工作，甚至可以很好地处理噪声。

我的问题是，当功能数量不同时我该怎么办？

有人可以为我指出关于 DescriptorExtractor 和匹配的正确方向吗？

注意：出于专利原因，我不能使用 SURF/SIFT。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:53:10.003

你可以试试[OpenCV](http://docs.opencv.org/modules/features2d/doc/common_interfaces_of_descriptor_matchers.html?highlight=flannbasedmatcher#flannbasedmatcher)`FlannBasedMatcher`的课程。使用它来匹配描述符（任何类型），然后使用最佳匹配来查找您的单应性。

# database - 命名数据库表字段以指定关系？

> ID：15011569
> 
> 赞同：0
> 
> 时间：2013-02-21T20:27:04.780
> 
> 标签：database, naming-conventions

假设我有表学生和导师

有没有人使用如下关系的命名约定？我认为这种方式可以快速查看关系。有人会建议更好的方法吗？

 ``Student` 

`StudentID
StudentName
Student2MentorID` 

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:08:21.503

我认为：您可以根据模块代表（学者、销售、商店）在表中添加前缀（3 个字母）

模块：学者-> **sc**

表：**scStudent** (IdStudent,nameStudent..)

表：**scMentor** (IdMentor,nameMentor...)

关系

**scMentorStudent** ( **IdMentorStudent** pk..)

您可以使用 Microsoft 的 EF 表示法：
[http ://weblogs.asp.net/jamauss/pages/DatabaseNamingConventions.aspx](http://weblogs.asp.net/jamauss/pages/DatabaseNamingConventions.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T20:52:52.053

从头开始 - 你可能已经知道了 - 有几种方法可以表示你的数据库模式，我的意思是，通过使用图表，例如帮助你（和你的团队）与数据库设计保持[同步的 ER 图](http://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model#Diagramming_conventions)从而使其更易于理解。

现在，就个人而言，在实现方面，我确实使用了某种命名约定。例如：

*   对于大型项目，我使用双下划线来分隔表格类别（即`hr__personnel`、`hr__clocks`、`hr__timetable`、`vehicles__cars`、`vehicles__trips`）等。

*   现在，有了两个表之间的关系，我确实包含了两个（或全部）所涉及的表名。（即`hr__personnel_timetable`,`vehicles__cars_trips`等）

*   有时，（众所周知），我们不能严格遵循标准，所以在这些情况下，我在选择大型关系名称时会使用我自己的标准。

*   通常，我还使用三个字母的前缀来命名表属性。例如，在我的表中`trips`，我的字段将是`tri_id`, `tri_distance`,`tri_elapsed`

*   另请注意，在上述项目中，我没有包含外键。所以我就去吧。当谈到 FK 时，我（和我的团队）很容易意识到该领域是 FK。如果我们按照前面的例子，我想知道每次旅行都有谁开车（为了更容易，我们假设只有一个人开车一次）。所以我的桌子现在是这样的：`tri_id`, *`per_id`*, `tri_distance`, `tri_elapsed`. 现在您可以很容易地意识到 per_id 只是表的一个外部字段。只是，另一个提示帮助。

只需遵循这些简单的步骤，您就可以节省*几个小时*，而且可能还有些头疼。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T13:05:17.823

最好使用下划线...我建议简单地使用现有的命名约定规则，例如： [http ://www.oracle-base.com/articles/misc/naming-conventions.php](http://www.oracle-base.com/articles/misc/naming-conventions.php)`

# visual-studio - 对 T-SQL 感到困惑：当我在查询窗口中运行查询并作为标量函数的一部分时，输出不同

> ID：15011572
> 
> 赞同：0
> 
> 时间：2013-02-21T20:27:10.870
> 
> 标签：visual-studio, tsql

**注意：**下面显示的患者数据是我编造的“虚拟”数据。这不是实际患者的实际信息。

我有一个函数，其中包含以下转换：

```
Declare @bdate date 
set @bdate =  CONVERT ( date , left(@dob,8) , 112 ) 
```

如果我只是在查询窗口中运行它，它会很好地转换日期

```
select CONVERT(date, left('19900101', 8), 112)  //returns a good date 
```

但是，如果我在 Visual Studio 中单步执行具有相同代码的标量函数，则会出现错误...

```
Declare @bdate date 
set @bdate =  CONVERT ( date , left(@pidPatientDob,8) , 112 ) 
```

抛出...

> *运行 [dbo].[getAgeAtTestDate] (@obxTestDate = '20120101', @pidPatientDob = '19900101')。*
> 
> *从字符串转换日期和/或时间时转换失败。不存在数据时尝试读取无效。*

为什么它在查询窗口中起作用而在函数中不起作用？似乎参数在函数中被正确填充。

这是函数的全文，它返回null（我认为是因为错误）

```
ALTER FUNCTION [dbo].[getAgeAtTestDate] 
(
    -- Add the parameters for the function here
    @obxTestDate as nvarchar(50), @pidPatientDob as nvarchar(50)
)
RETURNS int
AS
BEGIN
    Declare @bdate date 
    set @bdate =  CONVERT ( date , left(@pidPatientDob,8) , 112 )

    Declare @testDate date 
    set @testDate =  CONVERT ( date , left(@testDate,8) , 112 )

    -- Return the result of the function
    RETURN datediff(mm,  @testDate, @bdate)
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:36:11.290

您的参数称为`obxTestDate`，而不是`testDate`，因此更改；

```
set @testDate =  CONVERT ( date , left(@testDate,8) , 112 ) 
```

进入

```
set @testDate =  CONVERT ( date , left(@obxTestDate,8) , 112 ) 
```

事情会变得更好。

作为旁注，我认为您也颠倒了`DATEDIFF`，开始日期应该在结束日期之前；

```
RETURN datediff(mm,  @bdate, @testDate) 
```

# android - Listview 顶部的引脚布局

> ID：15011581
> 
> 赞同：0
> 
> 时间：2013-02-21T20:27:38.710
> 
> 标签：android, xml, android-listview

我需要将布局filtering.xml固定到顶部`ListView`，但是这个布局仍然需要在这个列表的顶部，它应该被认为是的项目之一，`ListView`并且在向下滚动期间应该隐藏这个布局。

我尝试将此方法`addHeaderView`与此布局过滤.xml 一起使用，但后来它被认为是只有一个单一触摸侦听器的项目之一。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:39:33.113

不确定我是否理解您的问题，但也许您应该在滚动时使用*布局膨胀*来删除视图？

或者在彼此之上创建 2 个列表视图？

# php - krsort 用于以 INT 作为索引的数组

> ID：15011585
> 
> 赞同：0
> 
> 时间：2013-02-21T20:27:51.310
> 
> 标签：php, arrays

我有一个看起来像这样的数组：

```
 Array ( [2] => 2 [3] => 2 [1] => 1 ) 
```

我想对数组进行排序，以便整数按降序排列

```
 Array ( [3] => 2 [2] => 2 [1] => 1 ) 
```

有没有一个php函数可以做到这一点，我试过krsort，但我认为它只适用于字符串，因为它输出“1”。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:33:31.680

krsort 是对的，但它*会更改*数组（通过引用传递），而不是返回一个新数组。

```
krsort($a);
print_r($a); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:33:45.653

尝试：

```
print_r($arr);
krsort($arr, SORT_NUMERIC)
print_r($arr); 
```

希望能帮助到你 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T09:55:26.900

```
$age=array("35","37","43");
print_r($age); 

krsort($age,1);
print_r($age); 
```

访问此处获取更多帮助：- [http://www.w3schools.com/php/func_array_krsort.asp](http://www.w3schools.com/php/func_array_krsort.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T20:30:19.487

试试[`krsort()`](http://www.php.net/manual/en/function.krsort.php)。以相反的顺序按键对数组进行排序。

```
krsort($array); 
```

查看有关[排序数组的更多信息](http://php.net/manual/en/array.sorting.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T20:30:41.057

> 它全部输出“1”。

因为您将其称为：

```
$newarr = krsort($myarr); 
```

并`krsort()`在成功/失败时返回真/假。该数组是就地排序的，并且仍然由 $myarr 引用。

# ruby - 如何从 sinatra 的流块内部停止？

> ID：15011586
> 
> 赞同：3
> 
> 时间：2013-02-21T20:27:53.110
> 
> 标签：ruby, sinatra

我正在尝试使用流式传输块中的 HTTP 错误代码进行响应，但 Web 服务器引发异常。在这种情况下，正确的做法是什么？

```
/var/lib/gems/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:803:in `throw':
uncaught throw :halt (ArgumentError) 
```

我的代码：

```
require 'sinatra/base'
class App < Sinatra::Base
  get '/' do
    stream :keep_open do |out|
      error 401
    end
  end
  run! if app_file == $0
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T07:44:27.933

根据我对 的理解`#stream()`，响应标头已经发送。虽然您可以继续流式传输数据（正文），甚至关闭连接，但我认为您无法在已发送标头后修改标头。我正在挖掘 Sinatra YARD 文档以进行验证，但我很确定这是您的问题。

# css-float - 浮动 DIV 问题

> ID：15011589
> 
> 赞同：0
> 
> 时间：2013-02-21T20:28:24.267
> 
> 标签：css-float

这是我的代码演示[http://jsfiddle.net/mn7Ut/](http://jsfiddle.net/mn7Ut/) 我似乎找不到在 h1 下正确添加文本的方法。这就是我尝试添加一些文本时发生的情况[http://jsfiddle.net/uY3pQ/](http://jsfiddle.net/uY3pQ/) 这次我做错了什么？：C

```
div {margin:0; padding:0;}

#wrap {
    background-color:#000000; 
    width:auto;
    float:left;
    padding:50px;
    } 

.container {
    width:500px;
    background:#666666;
    color:#FFFFFF;
    float:left;
    margin-right:25px;
    }

.left {
    float:left;
    display:block;
    }

.padding {
    padding:30px;
    }

.list {
    background-color:#333;
    }

.box {
    background-color:#ccc;
    width:100px;
    }

h1 {
    color:#000;
    background:#ddd;
    } 
```

.

```
<div id="wrap">

    <div class="container">
        <div class="box-container">
            <h1 class="left padding">Some text here</h1>
                <ul class="list padding left">
                    <li>Some text here Some text here</li>
                    <li>Some text here Some text here</li>
                    <li>Some text here Some text here</li>
                    <li>Some text here Some text here</li>
                    <li>Some text here Some text here</li>
                    <li>Some text here Some text here</li>
                    <li>Some text here Some text here</li>
                    <li>Some text here Some text here</li>
                </ul>
        </div>
    </div>

    <div class="box padding left">
    Some text here Some text here Some text here
    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:37:02.533

您可以将 h1 和 text 包装在一个容器中，然后将其向左浮动：

html

```
<div class="left inner" >
     <h1 class="padding">Some text here</h1>
     text text text text text text text text
 </div> 
```

css

```
.inner{
    display:inline-block;
    width:200px;
} 
```

有关完整解决方案，请参见小提琴[http://jsfiddle.net/uY3pQ/5/](http://jsfiddle.net/uY3pQ/5/)

*   经过铬测试

# matlab - 数独求解器，检查每个 3x3 框

> ID：15011595
> 
> 赞同：0
> 
> 时间：2013-02-21T20:28:47.423
> 
> 标签：matlab

简而言之，我会检查每个 3x3 框是否有一个缺失值，如果有，它会计算该数字是多少，然后填写该数字。但是，它只检查左上角的 3x3 框，并停在那里。这是与我的问题相关的代码片段。如果您想查看其余代码，请询问，我将发布其余部分。

编辑：用户输入板。出于测试目的，我尝试输入一个完整的数独谜题，然后在每个框中取出右上角的值。它只填写了前 3x3，最后仍然输出了棋盘，但还有 8 个空白要填写（来自其他 8 个 3x3 框）

```
% Check each 3x3 box for one through nine, fill in
for i = 0:2
    for j = 0:2
        if sum(sum(board([1:3]+i*3,[1:3]+j*3)~=0))==8
            [row,col] = find(board([1:3]+i*3,[1:3]+j*3)==0);
            answer = 45 - sum(sum(board([1:3]+i*3,[1:3]+j*3)));
            board(row,col) = answer;
        end
    end
end
disp(board); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T05:55:36.693

你很亲密。问题是对于每个块，您都获得了**3x3**块的行和列索引。因此，对于每个块，以下是正确的：`row <= 3`并且`col <= 3`.

您可以通过在您使用的行之后添加这两行来轻松解决此问题`find`：

```
row = row + (3*i);
col = col + (3*j); 
```

通过这种方式，您可以将块相对索引转换回板相对索引。

# cocoa - NSTextView 中的 Shell 命令输出

> ID：15011598
> 
> 赞同：0
> 
> 时间：2013-02-21T20:29:03.123
> 
> 标签：cocoa, nstextview, nstask

谢谢您的帮助。这个执行命令的结果显示在我的 Xcode 控制台中。让命令结果显示在 NSTextView 中的最佳方法是什么？

```
NSString *commandToRun = @"~/Library/webREF/ffmpeg -nostats -i ~/Desktop/input.wav -  filter_complex ebur128 -f null -";

    NSTask *task;
    task = [[NSTask alloc] init];
    [task setLaunchPath: @"/bin/sh"];

    NSArray *arguments = [NSArray arrayWithObjects:
                          @"-c" ,
                          [NSString stringWithFormat:@"%@", commandToRun],
                          nil];
    NSLog(@"run command: %@",commandToRun);
    [task setArguments: arguments];

    NSPipe *pipe;
    pipe = [NSPipe pipe];
    [task setStandardOutput: pipe];

    NSFileHandle *file;
    file = [pipe fileHandleForReading];

    [task launch]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:50:33.390

添加类似：

```
…
NSFileHandle *file;
file = [pipe fileHandleForReading];
NSMutableData *data = [[NSMutableData alloc] init];
NSData *inData = nil;
[task setStandardOutput:pipe];
[task launch];
[task waitUntilExit];

while ((inData = [file availableData]) && [inData length]) {
    [data appendData:inData];
}

[file closeFile];
[task release];
[pipe release];

NSString *result = [[[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding] autorelease];
[data release];

// somewhere we have an NSTextView textView
[textView setString: result]; 
```

# objective-c - 格式化来自 NSArray 的值

> ID：15011599
> 
> 赞同：0
> 
> 时间：2013-02-21T20:29:09.977
> 
> 标签：objective-c, uitableview, nsarray, nsnumberformatter

我有一个 NSArray 包含几个看起来像这样的字符串：“291839.0930820”

我想格式化数组中的这些值，以便它们显示在 UITableView 的 detailTextLabel 中，只有 2 位小数：“291,839.09”

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:39:07.847

You could try something like this if your array has float values

```
cell.detailTextLabel.text=[NSString stringWithFormat:@"%.02f", [[array objectAtIndex:index]floatValue]]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T20:47:48.487

要正确格式化数字以使数字在给定用户的域中正确显示，请使用`NSNumberFormatter`. 您永远不应将 v`stringWithFormat:`用于此类目的。

```
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init]:
[formatter setNumberStyle:NSNumberFormatterDecimalStyle];
[formatter setMaximumFractionDigits:2];

NSNumber *val = array[indexPath.row];
NSString *text = [formatter stringFromNumber:val]; 
```

**更新**：

我从 Juan 那里得到的感觉是，数组实际上并不包含`NSNumber`数字的对象，但它实际上包含`NSString`数字的表示。如果是这种情况，那么我的答案中的一行需要更改。改变：

```
NSNumber *val = array[indexPath.row]; 
```

至：

```
NSNumber *val = @([array[indexPath.row] doubleValue]); 
```

这将从`NSString`数组中获取 ，然后将字符串的值作为 a 获取`double`，最后将 包装`double`在 a 中`NSNumber`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T20:41:05.190

可以说你的价值是`double value = 291839.0930820;`

你可以像这样构造一个字符串

```
 NSString *formattedValue = [NSString stringWithFormat:@"%0.2f",value]; 
```

将此 formattedValue 分配给您的文本字段/标签。

```
 cell.textLabel.text = formattedValue; 
```

# .htaccess - 如何在 Joomla 中使用 .htaccess 重写 URL

> ID：15011600
> 
> 赞同：0
> 
> 时间：2013-02-21T20:29:12.257
> 
> 标签：.htaccess, url, rewrite, joomla2.5

如何将给定的 URL /component/com_m2c/Itemid,667/view,m2c/ 重写为 Joomla 的画廊？！

我试图放入 .htaccess

```
RewriteEngine On  
RewriteRule ^component/com_m2c/Itemid,667/view,m2c galerry [NC,L] 
```

什么都没发生; 但如果我把完整的 URL 像

```
RewriteEngine On  
RewriteRule ^component/com_m2c/Itemid,667/view,m2c http://example.com/galerry [NC,L] 
```

它只是将我重定向到给定的 URL，但没有内容.....

我需要 URL 为 /gallery 并在那里显示 component/com_m2c/Itemid,667/view,m2c 的内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:37:24.523

您不应该为此创建重写。

要在 Joomla 中使用 SEF URL，您需要创建一个指向该组件中该视图的菜单项——该菜单项需要是具有别名“gallery”的 1 级菜单项。

如果组件为其定义了菜单项类型，则您只能为该组件创建菜单项。

# javascript - Magento 更改 div 的下拉可配置产品选项

> ID：15011604
> 
> 赞同：5
> 
> 时间：2013-02-21T20:29:16.197
> 
> 标签：javascript, magento, prototypejs, product, configurable

我需要将可配置产品的选项显示为带有“a”的 div，让用户在选项中单击并选择它，而不是下拉列表。就像一个菜单（目标是显示鞋码）。

众所周知，Magento 使用 Json 响应来填充下拉菜单的选项。(var spConfig = new Product.Config(getJsonConfig() ?>) 并且该类位于 js/varien/product.js (Product.Config = Class.create() )。

然后，我所做的就是编辑文件 template/catalog/product/view/type/options/configurable.phtml 并将原始行为替换为类似的内容。

```
'<?php
     echo ' 
                <ul class="super-attribute-select">';
         $resultado = json_decode($this->getJsonConfig(), true);
         $atributo=$resultado['attributes'][162]['options'];
         foreach($atributo as $att){
             echo '<li>';
             echo '<a value="'.$att['id'].'" price="'.$att['price'].'" href="javascript:void()" onclick="return assignValue()">'.$att['label'].'</a>';
             echo '</li>';
             }
     echo ' </ul>
            <div class="clear"></div>';
     ?>' 
```

这个简单的 mod 让我替换了由 div 组成的小网格的菜单。现在我正在尝试制作一个模拟本机行为的 Javascript 函数，但仅适用于选择的选项（在本例中为鞋码）。据我了解它通过表单发送选项值的代码，所以我的想法是创建一个隐藏输入，然后在用户执行点击时通过 Javascript 函数分配值，如下所示：

```
'<script>
  function assignValue(value){
   //assign the value       
      document.getElementById('super_attribute[162]').value = value;
   //mod the class of the selected item
      this.addClassName("selected");
</script>' 
```

我认为可能有必要创建一个函数或调用一个 magento 已经必须使所需值的方法。即使我不知道在隐藏输入上设置类“必填项”是否是个好主意。

请问你能帮帮我吗？任何形式的帮助或其他想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:45:39.283

这里有一个代码片段。太简单了=）！！

```
 <script type="text/javascript">
        function assignValue(idattribute,price,value){
            var sal = new String(value); //this value is what you are showing to the user in the div grid
            var disp = new String(idattribute);

            $('nameinputhidden').value=disp;
            $('advice-required-entry-attribute').fade();
                    $$('.nameinputhidden').each(
                     function(e){
                   e.removeClassName('active');
                      }
                      )
                    $(sal).addClassName('active');

    </script> 
```

并且不要忘记将输入值设为隐藏。此输入值必须是您在网格上显示的属性。

希望这可以帮助。无论如何，如果我能帮助你，请告诉我！

问候！

# heroku - Heroku 任务超过 24 小时

> ID：15011618
> 
> 赞同：2
> 
> 时间：2013-02-21T20:30:20.677
> 
> 标签：heroku, background-process

我有一个运行超过 24 小时的任务，并由 heroku 重新启动 - 因为它每天重新启动任务：

[https://devcenter.heroku.com/articles/dynos#the-dyno-manifold](https://devcenter.heroku.com/articles/dynos#the-dyno-manifold)

离开任务的长度，以及它是什么 - 是否可以离开它以便它运行到完成？还是我必须弄清楚如何保存任务状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T23:42:05.417

您将需要弄清楚如何保存进程的状态。Heroku 没有提供让测功机运行时间超过 24 小时的方法。

除此之外，无论如何，离域状态可能符合您的最大利益，这样做将帮助您提高可扩展性，帮助流程更具弹性，并在 heroku 上工作。您可能有兴趣查看[此文档](http://www.12factor.net/)以了解有关 heroku 的一些最佳实践

# php - PDO 插入多行，键和值作为数组

> ID：15011630
> 
> 赞同：-3
> 
> 时间：2013-02-21T20:30:45.750
> 
> 标签：php, mysql, pdo, hardcode

我的数组看起来像：

```
Array
(
    [name] => Array
        (
            [0] => Matrix
            [1] => Ryan 
        )

    [surname] => Array
        (
            [0] => Relaoded
            [1] => Lose
        )

) 
```

我的问题是，键和值与计数不匹配。

如何使用 PDO 将这个数组像精确结构一样插入到 mysql 中？

在 mysql 表中

```
 ----------------------------------
   |    id      name      surname    |
   |    1       Matrix    Relaoded   |
   |    2       Ryan      Lose       | 
    ---------------------------------- 
```

当然我需要以**编程**方式解决。

我花了几个小时去这个很棒的论坛，但我找不到解决方案:(

谢谢 ;）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:50:35.790

@Zerkms 是对的，你只需要学习如何处理这个数组。
最简单的方法是

```
foreach($array['name'] as $key => $name) {
    $surname = $array['surname'][$key];
    // now you can use the pair
    var_dump($name,$surname);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:35:19.947

这是SQL语句

```
INSERT INTO mytable (`id`,`name`,`surname`) VALUES(?,?,?); 
```

然后是以下伪代码：

```
for ($i = 0; $i < count($['name']); $i++) {
    $db->execute($i+1, $a['name'][$i], $a['surname'][$i]);
} 
```

# php - Dynamically Detect Custom Class With Aptana Studio 3

> ID：15011631
> 
> 赞同：0
> 
> 时间：2013-02-21T20:30:49.870
> 
> 标签：php, html, aptana, dreamweaver

I used to be on `Dreamweaver`, but I have since really gotten into `Aptana` Studio 3\. I have finally gotten the code coloring down correctly, but one thing I really miss from `Dreamweaver` is the dynamic discovery and completion using custom classes. I cannot figure out how to do that in `Aptana` Studio though. Here is what I mean:

With `Dreamweaver` I could create a file such as class.php

```
<?php 

class Test {

  function __construct(){
  }

  function something(){
    $var = "test";
    return $var;
  }

}

?> 
```

And then I could include it in say index.php

```
<?php 
include_once("class.php");

$test = new Test();
echo $test->something;

?> 
```

Once I included the class in my code and then typed "$test = new " `Dreamweaver` would then automatically popup "Test()" for me to chooose. And then of course any variables to pass along. Also, when I typed "$test->" `Dreamweaver` would also pop up a list of the functions within that class for me to choose from as well and it would do this dynamically.

So my question is "How do I get this same functionality with `Aptana` Studio 3?" I am currently using `Aptana` Studio with the remote explorer to open and edit files from a webserver. I have found a few suggestions via `Google` about using projects, but I am not really interested in projects right now. I just want to open the file and edit it and/or just create a new file directly on the server.

So, is there anyone out there who knows how to get `Aptana` Studio to dynamically detect custom classes and use them for code completion like `Dreamweaver` does?

Thanks to everyone in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:35:16.383

I'm putting this in as an answer because it is too long for a comment.

It is nice that Aptana can edit and save to the server, though I haven't found it to be nearly as reliable as local saving (I sure don't count on it).

To make a project from an existing site (which I do frequently), you just find a spot on your computer you want to keep your files, make a folder (name it after your site, probably), then go into Aptana and choose `File > Import`. Under 'General' there is an option for 'Existing Folder as New Project'. Choose that, click next, Browse to the folder you made, check the box next to the Project Type you want (PHP probably) and hit Finish. This will create a project (which is just an empty folder so far. Then you probably want to link the Project to the remote Connection you have been using(1). Now you can pull down the files you want to work from (grab your includes too, if you want them indexed) and edit them and upload them just like you have been (Ctrl + Shift + U FTW).

Added bonus: now you can do global search and replace on everything you've downloaded.

Projects are a huge part of Aptana, they are really worth the disk space (at least to me) - especially since you don't have to make a complete copy of your site to use them.

1.  Window > Show View > Project Explorer, expand the Project in this window and double click 'Connections' where you can show the Project which connection to use.

# git - Team Foundation Services (GIT) 和 CodePlex（或 Github 等）

> ID：15011632
> 
> 赞同：1
> 
> 时间：2013-02-21T20:30:57.047
> 
> 标签：git, appharbor

谁能告诉我是否可以将代码从 TFS 推送到另一个基于 GIT 的主机？原因是这样的：

我正在使用带有 GIT 存储库的 TFS 2012（服务，在线服务 -> [companyname].visualstudio.com）。我有一个 AppHarbor 帐户，它会在使用 CodePlex、GitHub 或 BitBucket 签入时自动发布我的代码。不幸的是，还没有对 TFS 的支持（希望它很快就会推出……谁知道呢）。有什么方法可以将我的代码提交到 TFS，然后将副本推送到上述任一提供程序？（很可能是 Codeplex，因为无论如何它都是后端的 TFS）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:05:55.340

您可以在不同的 git 服务器中拥有存储库的精确副本，您可以使用：

```
git push --mirror server 
```

样本

```
git push --mirror https://github.com/ghuser/repo.git 
```

我的意思是从一个 git 存储库中，您可以同时推送不同的服务器和多个服务器，因为 GIT 是一个分布式存储库。

更多参考：

[https://help.github.com/articles/importing-an-external-git-repo](https://help.github.com/articles/importing-an-external-git-repo)

[“git push --mirror”是否足以备份我的存储库？](https://stackoverflow.com/questions/3333102/is-git-push-mirror-sufficient-for-backing-up-my-repository)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-22T16:41:15.037

来自 Brian Harry 的关于 Git/TFS 解决方案的[博客文章：](http://blogs.msdn.com/b/bharry/archive/2013/01/30/git-init-vs.aspx)

> **VS 的 Git 集成是否仅适用于我们的 Git 服务器？**
> 
> 绝对不！客户端和服务器都是 Git 的标准实现。我们的客户端几乎可以使用任何 Git 存储库——本地、企业、Codeplex、GitHub、BitBucket 等。TFS 几乎可以与任何 Git 客户端一起使用——现有的 Git 命令行、XCode、Eclipse 的 Git 支持……。这是从第一天开始的核心原则。这不是关于锁定 - 它是关于提供良好且可互操作的 Git 功能。

# jquery - JQuery 自动完成组合框

> ID：15011633
> 
> 赞同：4
> 
> 时间：2013-02-21T20:31:01.393
> 
> 标签：jquery, autocomplete, combobox

我一直试图在短时间内了解自动完成功能，我只是把头撞在墙上试图让它工作。我已经尝试了很多例子，但没有一个对我来说足够有意义。

我创建了一个示例，希望能解释我正在尝试做的事情。这是一个 MVC 3 应用程序

我正在使用来自[http://jqueryui.com/autocomplete/#combobox](http://jqueryui.com/autocomplete/#combobox)的 jquery 站点的自动完成代码，并且我将它与所有其他必需的 js 和 css 文件一起链接到我的 _Layout.cshtml 文件的标题中。

我认为 Home/Index.cshtml 上的 Div 和用于执行操作的按钮。

```
<div id="SearchDiv"></div>
<button id="SearchBtn" type="button" style="float: right">Search</button> 
```

该视图包括我在其中创建 SELECT 元素并定义按钮单击的 js 文件。

```
<script src="@Url.Content("~/Scripts/combobox.js")" type="text/javascript"></script> 
```

JS文件内容如下。

```
 var theader = '<table class="tbl">\n';
        var tbody = '';

for (var i = 0; i < 10; i++) {
    if (i % 2 == 0)
        tbody += '<tr>';
    tbody += '<td><select class="SelectionControls"/><option value="0"></option>';
    tbody += '<option value="1">This is a test</option>';
    tbody += '<option value="2">This is a test 1</option>';
    tbody += '<option value="3">This is a test 2</option>';
    tbody += '<option value="4">This is a test 3</option>';
    tbody += '<option value="5">This is a test 4</option>';
    tbody += '<select></td>';

    if (i % 2 != 0)
        tbody += '</tr>\n';
}
var tfooter = '</table>';
document.getElementById('SearchDiv').innerHTML = theader + tbody + tfooter;

$(".SelectionControls").combobox();

$("#SearchBtn").click(function () {
    var readtheselectedvalue= $(".SelectionControls")[0].val();
}); 
```

当我运行代码时，除了将组合框放在屏幕上的表格中之外，什么都没有发生，但它们都是空的。我需要用上面的纹理值填充组合框，以便在选择项目时将所选文本显示在组合框文本字段中，但是当我读取 val() 时，我需要它返回与该选择关联的值 0 - 5。

我需要能够在 javascript 中读取值 0-5，因为一旦按下“搜索”按钮，我需要对值进行进一步处理。

如果有人能告诉我我是如何做到这一点的，我将非常感激，因为我多年来一直在努力解决这个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T20:45:46.120

在自己与这么多自动完成脚本苦苦挣扎之后，只是一个提示。

[Chosen](http://harvesthq.github.com/chosen/)是有史以来最好的自动完成插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T20:50:20.617

我的猜测是，由于您在创建组合框的同一 JavaScript 函数中创建选择列表，因此选择列表尚未在文档中，因此组合框插件无法找到它来构建您的自动完成列表。你可以尝试几件事：

1.  只需在视图的 HTML 中创建选择列表，而不是使用 JavaScript 构建它。我真的不明白为什么你需要用 JavaScript 来做这件事。然后，在 document.ready() 中调用 .combobox() 以便仅在文档完全加载后调用它。

    ```
     $(document).ready(function() {
         (".SelectionControls").combobox();
     }); 
    ```

2.  如果您必须构建它，请尝试将调用 .combobox 放在 setTimeout 中。这可能会在调用 .combox 函数之前给页面足够的时间进行更新，当 .combobox 正在寻找它时它会在那里。

    ```
     setTimeout(function(){$(".SelectionControls").combobox()}, 0); 
    ```

此外，在与自动完成组合框作斗争之后，我终于编写了自己的插件来满足我的一切需求。如果您想尝试一下，请访问[https://github.com/tmooney3979/jquery.ui.combify 。](https://github.com/tmooney3979/jquery.ui.combify)

# android - Android：通知不适用于 2.3.6（三星 Galaxy y）

> ID：15011638
> 
> 赞同：3
> 
> 时间：2013-02-21T20:31:14.037
> 
> 标签：android, notifications, fragmentation

已确认以下代码可在运行 HONEYCOMB+ 的设备上正常工作。然而，在三星 Galaxy Y 上，它不会产生任何通知。

```
 String tickerText = userString + " Download Queued";
        Notification notification =  new NotificationCompat.Builder(this).setAutoCancel(true)
                                                .setContentTitle(userString)
                                                .setContentText("Queued")
                                                .setSmallIcon(R.drawable.stat_sys_download_done)
                                                .setWhen(System.currentTimeMillis())
                                                .setTicker(tickerText)
                                                .build();
        if(DBG_ENABLE) {
            LogUtils.logD(TAG_LOG, "Posting queue notification : " + 0);
        }
        NotificationManager notificationManager =
                (NotificationManager) getApplicationContext().getSystemService(NOTIFICATION_SERVICE);
        notificationManager.notify(0, notification); 
```

笔记 ：

*   我在日志中看到“发布队列通知”。
*   我已将`stat_sys_download_done`android sdk 中的可绘制对象复制到我的项目中。

我想不出调试这个问题的方法。我不确定我是否缺少任何东西。任何解决此问题的建议表示赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T21:30:49.057

正如 CommonsWare 所建议的，我在 2.3 模拟器上运行了该应用程序，但它崩溃了。未设置 ContentIntent 的原因。**GingerBread 需要一个 ContentIntent**。所以我添加了一个虚拟的待处理意图，例如：

```
 PendingIntent pi = PendingIntent.getBroadcast(this, 0, new Intent(), PendingIntent.FLAG_UPDATE_CURRENT);
            Notification notification =  new NotificationCompat.Builder(this).setAutoCancel(true)
                                            .setContentTitle(userString)
                                            .setContentText("Queued")
                                            .setContentIntent(pi)
                                            .setSmallIcon(R.drawable.stat_sys_download_done)
                                            .setWhen(System.currentTimeMillis())
                                            .setTicker(tickerText)
                                            .build(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T09:38:44.233

你也可以这样做。它适用于 2.3 和 2.3+

```
 Notification notification = new NotificationCompat.Builder(this)
        .setTicker("new notification")
        .setContentTitle("title")
        .setContentText("hello").setSmallIcon(R.drawable.ic_launcher)
        .setContentIntent(pendingIntent)
    .addAction(android.R.drawable.ic_media_play, "play",pendingIntent).build(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-30T14:17:33.840

当我尝试上述解决方案时，它使应用程序崩溃，只是声明了空的 PendingIntent，如图所示。确定我遇到了范围问题，因为我在 BroadcastListener 中编写此通知，我将挂起的意图移动到侦听器的 onReceive 方法中，并使用传入的上下文和意图而不是虚拟对象。这在我的 2.3.6 Galaxy 手机中完美运行。这是我的代码：

```
BroadcastReceiver sitInReceiver = new BroadcastReceiver() {
        @Override
            public void onReceive(Context context, Intent intent) {
                String target = intent.getStringExtra("target");
                ....
PendingIntent pi = PendingIntent.getBroadcast(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
            notifB.setContentIntent(pi);

            NotificationManager mNotificationManager =
                    (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
            int nmId=1;
                // mId allows you to rewrite the same the notification or make a different one.
            mNotificationManager.notify(nmId, notifB.build());
        } 
```

请注意，我在声明所有非动态数据的侦听器之外声明了构建器 notifB：

```
NotificationCompat.Builder notifB = new NotificationCompat.Builder(this)
    .setSmallIcon(R.drawable.ic_launcher) 
    .setAutoCancel(true); 
```

# regex - 从格式不佳的 HTML 块中提取文本的正则表达式

> ID：15011639
> 
> 赞同：1
> 
> 时间：2013-02-21T20:31:13.827
> 
> 标签：regex, scrapy

我正在网页抓取一个页面，我被迫使用正则表达式（我不擅长）来提取我需要的信息，因为 HTML 的结构非常少。HTML 片段如下：

```
LEEDS TOWN HALL<br>
Wednesday, 15 May 2013, 6:30PM - 8:30PM<br>
Tickets £7/£5 for including a glass of wine available in store or via 01234 567 890 
```

我想先在 html break 标签处将块分成三部分，然后使用正则表达式提取我需要的信息。

我如何将块分成三个开始？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:40:40.653

您只需要*一个*包含 5 个组的正则表达式：

```
(?s)([^<]+).*?, (.*?) - (.*?)<br>(.*) 
```

由于您没有尝试创建正则表达式，因此我没有尝试解释我的:)

# meteor - 调试时如何让 WebStorm 自动检测 JavaScript 文件的远程 URL？

> ID：15011644
> 
> 赞同：0
> 
> 时间：2013-02-21T20:31:40.510
> 
> 标签：meteor, webstorm

现在，我需要为每个文件手动指定一个远程 URL - 见下文：

![调试配置的屏幕截图](../Images/944dd81c59b0494ce72567b1fc6e72d2.png)

我正在使用 Meteor，我怀疑这是因为 Meteor 在 URL 中附加了一个查询字符串，如下所示：

> [http://localhost.example.com:3000/client/templates/js/contextMenuBin.js?9cc0534f8fe5e349431ed0247e98967b42711dc2](http://localhost.example.com:3000/client/templates/js/contextMenuBin.js?9cc0534f8fe5e349431ed0247e98967b42711dc2)

有没有办法告诉 WebStorm 忽略查询字符串，或者告诉 Meteor 不要附加查询字符串？

我正在使用 WebStorm 6 的早期访问版本 - 见下文：

![在此处输入图像描述](../Images/f7000f3bcfa6eef2c782a4b66e7d16cb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T09:59:26.033

LazyOne 的建议有效 - 在文件夹级别指定 URL，让 WebStorm 找到它下面的任何 Javascript 文件：

![在此处输入图像描述](../Images/18ac0c7ea559e72690e8704470d4d51b.png)

很明显，但也不是很明显，特别是因为 WebStorm 会明确提示您输入文件的 URL：

![在此处输入图像描述](../Images/1aedfaa5ed212a11a05301f789be6c03.png)

# c# - 存储用于 SQL 和 C# 的常量

> ID：15011650
> 
> 赞同：2
> 
> 时间：2013-02-21T20:32:03.620
> 
> 标签：c#, sql-server, asp.net-mvc, entity-framework, code-first

我目前正处于创建 MVC 应用程序的早期阶段。我正在使用代码优先创建数据库，并且想知道推荐的协议是什么来存储常量值。为了提供一些上下文，我有一个名为 Appointments 的模型类，它映射到一个 SQL 表。约会可以处于多种状态之一，例如“就绪”、“等待”、“已取消”等。通常我会在 SQL 中创建一个状态表，并在约会和状态表之间有一个外键，并在我的代码中有一个枚举我用来分配状态，即

```
Appointment app = new Appointment()
{
    StatusID = (int)ExternalClass.Statuses.Waiting
}; 
```

这是推荐的最佳做法吗？我唯一担心的是我依赖于 SQL 中与枚举匹配的行的 id，并且不确定是否总是如此。任何更好的方法的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:35:58.420

假设您在部署应用程序时没有更新/插入/删除“状态”表中的记录，则此方法工作得非常好，并提供带有语法糖的精美软编码代码。

# javascript - 获取 dgrid byId 的实例

> ID：15011652
> 
> 赞同：2
> 
> 时间：2013-02-21T20:32:10.423
> 
> 标签：javascript, dojo, dgrid

如何获取对表示 dgrid 实例的 JavaScript 对象的引用。考虑这段代码：

```
var MyGrid = var EntityList = declare("ui.MyGrid", [List, Pagination], { ... });
var grid = new MyGrid();
domConstruct.place(grid.domNode, container);
grid.startup(); 
```

在这里访问很容易，`grid`因为它是通过编程方式创建的，但如果它是通过声明方式创建的，如下所示：

```
<div id="grid" data-dojo-type="ui.MyGrid" data-dojo-props="..."> 
```

*   `dojo.byId('grid')`返回 DOM 节点。
*   `dijit.byId('grid')`返回`undefined`。
*   添加`data-dojo-id`显然没有效果。

如何获得对背后实际 javascript 对象的引用`#grid`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T20:41:06.587

您的网格需要混合`dgrid/extensions/DijitRegistry`扩展。具有此扩展名的网格将在 dijit 注册表中注册自己，以便您可以使用`dijit.byId('grid')`.

有关详细信息，请参阅[https://github.com/SitePen/dgrid/wiki/DijitRegistry](https://github.com/SitePen/dgrid/wiki/DijitRegistry)。

# css - Internet Explorer 自动切换到兼容模式（IE9 和 IE10）

> ID：15011653
> 
> 赞同：7
> 
> 时间：2013-02-21T20:32:15.943
> 
> 标签：css, fonts, internet-explorer-9, internet-explorer-10, compatibility-mode

在我网站的某个页面上，Internet Explorer 会自动切换到兼容模式并尝试以兼容视图（IE7 模式）呈现页面。URL 也被添加到兼容性视图列表中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-21T20:32:15.943

**就我而言，这是由于某些 CSS 使用 Type 1 字体（*Helvetica*）。**

Internet Explorer 从不支持旧的 Type 1 字体的 IE9（也影响 IE10）更改了其字体渲染。但是仍然有一些用户手动安装字体（对我来说，它是 Helvetica，在 Windows 7、IE9 和 IE10 上都测试过）。

现在如果你使用 CSS 喜欢： `font-family: Helvetica, Arial, sans-serif;` 而不是回退到 Arial，IE9 和 IE10 切换到兼容模式。

更多详细信息，请访问：[http ://bobbyjoneswebdesign.blogspot.com/2011/12/internet-explorer-9-type-1-font-bug.html](http://bobbyjoneswebdesign.blogspot.com/2011/12/internet-explorer-9-type-1-font-bug.html)

根据提到的博客文章，以下方法将有助于为 Web 开发人员解决问题：

*   不要在 CSS 中使用 Helvetica 或其他非标准字体
*   使用具有 CSS @font-face 功能的替代网络字体来提供您想要的字体
*   使用 webfonts.fonts.com 等在线网络字体服务
*   使用条件注释来创建 IE9 特定的样式表。

# uikit - 如何使用 AutoLayout 使两个视图居中

> ID：15011655
> 
> 赞同：0
> 
> 时间：2013-02-21T20:32:22.007
> 
> 标签：uikit, autolayout

我有两个按钮，我想将它们作为一个组集中在他们的超级视图中。

以视觉格式表示，我想要类似`|-*-[button1]-5-[button2]-*-|`where`*`应该相等并由 AutoLayout 自动确定的内容。

我目前有三种解决方法，它们看起来都不是很优雅

1.  制作 UIView 的两个按钮子视图并将该视图居中

2.  手动计算值`*`并手动更新约束

3.  将两个按钮与超级视图的中心对齐，并使用从按钮宽度手动计算的偏移量

还有其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T06:51:39.180

我认为我过于关注将两个按钮的中心与它们的超级视图对齐。当我开始考虑边缘时，我想出了这个

```
[NSLayoutConstraint constraintWithItem:button1
                             attribute:NSLayoutAttributeRight
                             relatedBy:NSLayoutRelationEqual
                                toItem:superview
                             attribute:NSLayoutAttributeCenterX
                            multiplier:1
                              constant:-2.5]];

[NSLayoutConstraint constraintWithItem:button2
                             attribute:NSLayoutAttributeLeft
                             relatedBy:NSLayoutRelationEqual
                                toItem:superview
                             attribute:NSLayoutAttributeCenterX
                            multiplier:1
                              constant:2.5]]; 
```

这使两个按钮居中，`superview`中间间距为 5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T21:50:49.327

您可以居中一个虚拟元素（隐藏视图），然后将每个按钮向左和向右偏移。

![在此处输入图像描述](../Images/983bdb13eb1d1240b84d7b655701c81c.png)

# wordpress - 如何避免在 wordpress 的主登录表单上重定向？

> ID：15011661
> 
> 赞同：0
> 
> 时间：2013-02-21T20:32:34.197
> 
> 标签：wordpress

我在我的页面上添加**登录**表单，如果有人使用不完整的信息**登录**，我想添加**js验证。**但问题是当我登录并尝试将密码或用户名设为空时，**wordpress**在主**登录**表单上重定向页面。我想要的输出是留在当前页面上，以便我可以进行**js**验证。谢谢您的帮助。

 ******* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:48:33.320

在functions.php中添加这个

```
 add_action( 'wp_login_failed', 'my_front_end_login_fail' );  // hook failed login

    function my_front_end_login_fail( $username ) {
      $referrer = $_SERVER['HTTP_REFERER'];  // where did the post submission come from?
      // if there's a valid referrer, and it's not the default log-in screen
       if ( !empty($referrer) && !strstr($referrer,'wp-login') && !strstr($referrer,'wp-admin') ) {
             wp_redirect( $referrer . '?login=failed' );  // let's append some information (login=failed) to the URL for the theme to use
             exit;
      }
   } 
```

推荐网址： http: [//www.wpinsite.com/code-snippets/how-to-redirect-wordpress-failed-logins](http://www.wpinsite.com/code-snippets/how-to-redirect-wordpress-failed-logins)******

# asp.net-mvc - 无法点击表格行中的复选框

> ID：15011662
> 
> 赞同：0
> 
> 时间：2013-02-21T20:32:37.830
> 
> 标签：asp.net-mvc, razor, checkbox

我有一个包含警报列表的表。表中的每一行都是一个唯一的警报。最后一个单元格中每一行的末尾是一个复选框。

我们有一种机制来指示该项目是否已被读取（确认）。如果已读取，则选中复选框，否则未选中。用户可以通过单击复选框来切换它。与复选框的 onchange 事件关联的**ackCheckbox**方法确定复选框是否被选中，然后根据需要更新 rowId（作为参数传入）。剃刀标记如下：

```
<td style="text-align: center" width="50">
    @if (al.UserAcknowledged)
    {
       sCheck = "checked='checked'"; //sCheck is defined outside the row loop
    }
   <input id="cb@(iCount)" name="cb@(iCount)" type="checkbox" @sCheck onchange="ackCheckbox('@(al.ID)')" />
</td> 
```

当它呈现时，它呈现如下：

```
<td style="text-align: center" width="50">
     <input id="cb10" name="cb10" type="checkbox"  onchange="ackCheckbox('0c585aa0-bcd1-4eed-82a4-3fd4275eeffa')" />
</td> 
```

一切似乎都很好，但是我无法单击复选框来更改其状态。它几乎看起来好像被禁用了。有人对发生的事情有任何想法吗？提前致谢。

# ruby-on-rails - SASL LOGIN 身份验证失败：在 Ubuntu 12.10 上使用 Postfix 和 Dovecot 的 Rails 上的身份验证机制无效

> ID：15011663
> 
> 赞同：2
> 
> 时间：2013-02-21T20:32:42.417
> 
> 标签：ruby-on-rails, ubuntu, actionmailer, postfix-mta, dovecot

我已经用 Postfix 和 Dovecot 配置了一个 ubuntu 12.10 服务器。尽管如此，当我尝试使用 Rails Web 应用程序发送电子邮件时，我遇到了 SASL 登录身份验证问题。

使用 RoundCube Webmail，我在发送电子邮件时收到此日志：

```
Feb 21 21:09:01 ks400054 postfix/qmgr[17883]: 61D4E113: removed
Feb 21 21:16:34 ks400054 postfix/smtpd[19157]: connect from ks400054.kimsufi.com[37.59.38.218]
Feb 21 21:16:34 ks400054 postfix/smtpd[19157]: 9FA8419: client=ks400054.kimsufi.com[37.59.38.218], sasl_method=CRAM-MD5, sasl_username=noreply@stagingcrio.info
Feb 21 21:16:34 ks400054 postfix/cleanup[19161]: 9FA8419: message-id=<c6935772262cfaefe506d0d1e8f61cf7@stagingcrio.info>
Feb 21 21:16:34 ks400054 postfix/qmgr[17883]: 9FA8419: from=<noreply@stagingcrio.info>, size=723, nrcpt=1 (queue active)
Feb 21 21:16:34 ks400054 postfix/smtpd[19157]: disconnect from ks400054.kimsufi.com[37.59.38.218]
Feb 21 21:16:35 ks400054 postfix/smtp[19162]: 9FA8419: to=<guillem.hernandez.sola@gmail.com>, relay=gmail-smtp-in.l.google.com[2a00:1450:4013:c01::1b]:25, delay=0.91, delays=0.26/0.02/0.1/0.53, dsn=2.0.0, status=sent (250 2.0.0 OK 1361477795 w41si55958842eel.117 - gsmtp)
Feb 21 21:16:35 ks400054 postfix/qmgr[17883]: 9FA8419: removed 
```

但是，当我尝试使用 Rails webapp 发送电子邮件时，我得到了这个日志：

```
Feb 21 21:17:32 ks400054 postfix/smtpd[19157]: connect from ks400054.kimsufi.com[37.59.38.218]
Feb 21 21:17:32 ks400054 postfix/smtpd[19157]: warning: ks400054.kimsufi.com[37.59.38.218]: SASL LOGIN authentication failed: Invalid authentication mechanism
Feb 21 21:17:32 ks400054 postfix/smtpd[19157]: lost connection after AUTH from ks400054.kimsufi.com[37.59.38.218]
Feb 21 21:17:32 ks400054 postfix/smtpd[19157]: disconnect from ks400054.kimsufi.com[37.59.38.218]
Feb 21 21:17:33 ks400054 postfix/smtpd[19157]: connect from ks400054.kimsufi.com[37.59.38.218]
Feb 21 21:17:33 ks400054 postfix/smtpd[19157]: warning: ks400054.kimsufi.com[37.59.38.218]: SASL LOGIN authentication failed: Invalid authentication mechanism
Feb 21 21:17:33 ks400054 postfix/smtpd[19157]: lost connection after AUTH from ks400054.kimsufi.com[37.59.38.218]
Feb 21 21:17:33 ks400054 postfix/smtpd[19157]: disconnect from ks400054.kimsufi.com[37.59.38.218] 
```

我的 Postfix main.cf 文件如下：

```
smtpd_banner = $myhostname ESMTP $mail_name (Ubuntu/GNU)
biff = no

# appending .domain is the MUA's job.
append_dot_mydomain = no

# Uncomment the next line to generate "delayed mail" warnings
#delay_warning_time = 4h

myhostname = localhost
alias_maps = hash:/etc/aliases
alias_database = hash:/etc/aliases
myorigin = $myhostname
mynetworks = 127.0.0.0/8, 10.0.0.0/24
mailbox_size_limit = 0
home_mailbox = Maildir/
virtual_alias_maps = hash:/etc/postfix/virtual
virtual_mailbox_domains = /etc/postfix/vhosts
virtual_mailbox_base = /var/vmail
virtual_mailbox_maps = hash:/etc/postfix/vmaps
virtual_minimum_uid = 1000
virtual_uid_maps = static:5000
virtual_gid_maps = static:5000
recipient_bcc_maps = hash:/etc/postfix/recipient_bcc
recipient_delimiter = +
inet_interfaces = all
smtpd_sasl_auth_enable = yes
smtpd_sasl_security_options = noplaintext,noanonymous
smtpd_recipient_restrictions = permit_sasl_authenticated,permit_mynetworks,reject_unauth_destination
smtpd_sasl_type = dovecot
smtpd_sasl_path = private/auth-client
virtual_transport=dovecot
dovecot_destination_recipient_limit=1 
```

我的 Postfix master.cf 文件如下：

```
#
#
# Postfix master process configuration file.  For details on the format
# of the file, see the master(5) manual page (command: "man 5 master").
#
# Do not forget to execute "postfix reload" after editing this file.
#
# ==========================================================================
# service type  private unpriv  chroot  wakeup  maxproc command + args
#               (yes)   (yes)   (yes)   (never) (100)
# ==========================================================================
smtp      inet  n       -       -       -       -       smtpd
smtps     inet  n       -       -       -       -       smtpd
  -o smtpd_tls_wrappermode=yes
submission inet n       -       -       -       -       smtpd
pickup    fifo  n       -       -       60      1       pickup
  -o content_filter=
  -o receive_override_options=no_header_body_checks
cleanup   unix  n       -       -       -       0       cleanup
qmgr      fifo  n       -       n       300     1       qmgr
tlsmgr    unix  -       -       -       1000?   1       tlsmgr
rewrite   unix  -       -       -       -       -       trivial-rewrite
bounce    unix  -       -       -       -       0       bounce
defer     unix  -       -       -       -       0       bounce
trace     unix  -       -       -       -       0       bounce
verify    unix  -       -       -       -       1       verify
flush     unix  n       -       -       1000?   0       flush
proxymap  unix  -       -       n       -       -       proxymap
proxywrite unix -       -       n       -       1       proxymap
smtp      unix  -       -       -       -       -       smtp
# When relaying mail as backup MX, disable fallback_relay to avoid MX loops
relay     unix  -       -       -       -       -       smtp
    -o smtp_fallback_relay=
showq     unix  n       -       -       -       -       showq
error     unix  -       -       -       -       -       error
retry     unix  -       -       -       -       -       error
discard   unix  -       -       -       -       -       discard
local     unix  -       n       n       -       -       local
virtual   unix  -       n       n       -       -       virtual
lmtp      unix  -       -       -       -       -       lmtp
anvil     unix  -       -       -       -       1       anvil
scache    unix  -       -       -       -       1       scache
#
# ====================================================================
# Interfaces to non-Postfix software. Be sure to examine the manual
# pages of the non-Postfix software to find out what options it wants.
#
# Many of the following services use the Postfix pipe(8) delivery
# agent.  See the pipe(8) man page for information about ${recipient}
# and other message envelope options.
# ====================================================================
#
# maildrop. See the Postfix MAILDROP_README file for details.
# Also specify in main.cf: maildrop_destination_recipient_limit=1
#
maildrop  unix  -       n       n       -       -       pipe
  flags=DRhu user=vmail argv=/usr/bin/maildrop -d ${recipient}
#
# See the Postfix UUCP_README file for configuration details.
#
uucp      unix  -       n       n       -       -       pipe
  flags=Fqhu user=uucp argv=uux -r -n -z -a$sender - $nexthop!rmail ($recipient)
#
# Other external delivery methods.
#
ifmail    unix  -       n       n       -       -       pipe
  flags=F user=ftn argv=/usr/lib/ifmail/ifmail -r $nexthop ($recipient)
bsmtp     unix  -       n       n       -       -       pipe
  flags=Fq. user=bsmtp argv=/usr/lib/bsmtp/bsmtp -t$nexthop -f$sender $recipient
scalemail-backend unix  -   n   n   -   2   pipe
  flags=R user=scalemail argv=/usr/lib/scalemail/bin/scalemail-store ${nexthop} ${user} ${extension}
mailman   unix  -       n       n       -       -       pipe
  flags=FR user=list argv=/usr/lib/mailman/bin/postfix-to-mailman.py
  ${nexthop} ${user}
amavis    unix -        -       -       -       2       smtp
  -o smtp_data_done_timeout=1200
  -o smtp_send_xforward_command=yes
  -o disable_dns_lookups=yes
  -o max_use=20
127.0.0.1:10025 inet n  -       -       -       -       smtpd
  -o content_filter=
  -o local_recipient_maps=
  -o relay_recipient_maps=
  -o smtpd_restriction_classes=
  -o smtpd_delay_reject=no
  -o smtpd_client_restrictions=permit_mynetworks,reject
  -o smtpd_helo_restrictions=
  -o smtpd_sender_restrictions=
  -o smtpd_recipient_restrictions=permit_mynetworks,reject
  -o smtpd_data_restrictions=reject_unauth_pipelining
  -o smtpd_end_of_data_restrictions=
  -o mynetworks=127.0.0.0/8
  -o smtpd_error_sleep_time=0
  -o smtpd_soft_error_limit=1001
  -o smtpd_hard_error_limit=1000
  -o smtpd_client_connection_count_limit=0
  -o smtpd_client_connection_rate_limit=0
  -o receive_override_options=no_header_body_checks,no_unknown_recipient_checks
# AV scan filter (used by content_filter)
scan      unix  -       -       n       -       16      smtp
        -o smtp_send_xforward_command=yes
# For injecting mail back into postfix from the filter
127.0.0.1:10025 inet  n -       n       -       16      smtpd
        -o content_filter=
        -o receive_override_options=no_unknown_recipient_checks,no_header_body_checks
        -o smtpd_helo_restrictions=
        -o smtpd_client_restrictions=
        -o smtpd_sender_restrictions=
        -o smtpd_recipient_restrictions=permit_mynetworks,reject
        -o mynetworks_style=host
        -o smtpd_authorized_xforward_hosts=127.0.0.0/8
dovecot unix - n n - - pipe
 flags=DRhu user=vmail:vmail argv=/usr/lib/dovecot/deliver -f ${sender} -d ${recipient} 
```

而我的Dovecot配置文件，我的dovecot.conf如下：

```
auth_mechanisms = plain cram-md5
auth_verbose = yes
base_dir = /var/run/dovecot/
info_log_path = /var/log/dovecot.info
log_path = /var/log/dovecot
log_timestamp = "%Y-%m-%d %H:%M:%S "
mail_location = maildir:/var/vmail/%d/%n
passdb {
  args = /etc/dovecot/passwd
  driver = passwd-file
}
protocols = imap pop3
service auth {
  executable = /usr/lib/dovecot/auth
  user = root
}
service imap-login {
  chroot = login
  executable = /usr/lib/dovecot/imap-login
  user = dovecot
}
service imap {
  executable = /usr/lib/dovecot/imap
}
service pop3-login {
  chroot = login
  executable = /usr/lib/dovecot/pop3-login
  user = dovecot
}
service pop3 {
  executable = /usr/lib/dovecot/pop3
}
ssl = no
userdb {
  args = /etc/dovecot/users
  driver = passwd-file
}
valid_chroot_dirs = /var/spool/vmail
protocol pop3 {
  pop3_uidl_format = %08Xu%08Xv
}

auth default {
  mechanisms = plain cram-md5
  passdb passwd-file {
    args = /etc/dovecot/passwd
  }
  userdb passwd-file {
    args = /etc/dovecot/users
  }
  user = root
  socket listen {
    client {
      # The client socket is generally safe to export to everyone. Typical use
      # is to export it to your SMTP server so it can do SMTP AUTH lookups
      # using it.
      path = /var/spool/postfix/private/auth-client
      mode = 0660
      user = postfix
      group = postfix
    }
  }
} 
```

然后，Rails 应用上的邮件配置如下：

```
config.action_mailer.smtp_settings = {
  :address => "ks400054.kimsufi.com" ,
  :port => 25,
  :domain => "ks400054.kimsufi.com" ,
  :user_name => "noreply@stagingcrio.info" ,
  :password  => "THE_CORRECT_PASSWORD",
  :authentication => :cram_md5,
  :enable_starttls_auto => true,
  :tls => true
} 
```

我不知道为什么我不能使用 Rails webapp 登录。

我错过了什么？是配置上的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:44:49.253

我从鸽舍迁移到经典配置。

当我的意思是古典时，我的意思是我遵循了这个 2010 年的操作指南

[http://www.pixelinx.com/2010/10/creating-a-mail-server-on-ubuntu-using-postfix-courier-ssltls-spamassassin-clamav-and-amavis/](http://www.pixelinx.com/2010/10/creating-a-mail-server-on-ubuntu-using-postfix-courier-ssltls-spamassassin-clamav-and-amavis/)

在 Ubuntu 12.10 上，您必须更改`/etc/postfix/main.cf`为这个：

```
myorigin = /etc/mailname
smtpd_banner = $myhostname ESMTP $mail_name
biff = no
append_dot_mydomain = no
readme_directory = no
mydestination =
relayhost =
mynetworks = 127.0.0.0/8 [::ffff:127.0.0.0]/104 [::1]/128
mynetworks_style = host
mailbox_size_limit = 0
virtual_mailbox_limit = 0
recipient_delimiter = +
inet_interfaces = all
message_size_limit = 0

# SMTP Authentication (SASL)

smtpd_sasl_auth_enable = yes
broken_sasl_auth_clients = yes
smtpd_sasl_security_options = noanonymous
smtpd_sasl_local_domain =

# Encrypted transfer (SSL/TLS)

smtp_use_tls = yes
smtpd_use_tls = yes
smtpd_tls_cert_file=/etc/apache2/ssl/mail.crt
smtpd_tls_key_file=/etc/apache2/ssl/mail.key
smtpd_tls_session_cache_database = btree:${data_directory}/smtpd_scache
smtp_tls_session_cache_database = btree:${data_directory}/smtp_scache

# Basic SPAM prevention

smtpd_helo_required = yes
smtpd_delay_reject = yes
disable_vrfy_command = yes
smtpd_sender_restrictions = permit_sasl_authenticated, permit_mynetworks,permit
smtpd_recipient_restrictions = permit_sasl_authenticated, permit_mynetworks, reject_unauth_destination

# Force incoming mail to go through Amavis

content_filter = amavis:[127.0.0.1]:10024
receive_override_options = no_address_mappings

# Virtual user mappings

alias_maps = hash:/etc/aliases
alias_database = hash:/etc/aliases
virtual_mailbox_base = /var/spool/mail/virtual
virtual_mailbox_maps = mysql:/etc/postfix/maps/user.cf
virtual_uid_maps = static:5000
virtual_gid_maps =  static:5000
virtual_alias_maps = mysql:/etc/postfix/maps/alias.cf
virtual_mailbox_domains = mysql:/etc/postfix/maps/domain.cf 
```

它有效。

# windows - ORA-01019 从 Excel Windows 7 连接到 Oracle

> ID：15011665
> 
> 赞同：0
> 
> 时间：2013-02-21T20:32:48.053
> 
> 标签：windows, oracle, excel, odbc, ole

我昨天能够在 Windows 7 上的 Excel 中成功连接和查询，但我不知道发生了什么，现在它向我抛出错误
。

```
ORA-01019: unable to allocate memory in the user side 
```

我重新启动 PC，清理缓存，尝试通过 Crystal 报表连接到数据库，它可以工作，尝试通过 SQLPlus 连接到数据库，它也可以在那里工作。

无论我尝试做什么，即使在设置新连接时，我也无法在用户端分配内存。

只在excel中给我这个错误。我没有对 PC 或 Oracle 进行任何更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:25:09.870

Windows 7 是有史以来最糟糕的操作系统。

我浪费了一整天的时间来解决这个问题，而事实就是这样。

```
I have to right click on excel and Run as Administrator. (from program files/....) 
```

祝你好运。

# php - 如何在 PHP 中为表创建动态标题

> ID：15011671
> 
> 赞同：2
> 
> 时间：2013-02-21T20:33:15.617
> 
> 标签：php, arrays, loops, logic, html-table

我的阵列 -

```
$myfinal = Array(
        13 => Array
            (
            5 => 85,
            4 => 75,
            3 => 65,
            2 => 55 
            ),
        12 => 11,
        7  => 100
        ); 
```

这就是我想要动态生成（表）的 -

所需输出 - [http://jsfiddle.net/LCKW6/](http://jsfiddle.net/LCKW6/)

```
<table cellspacing="1" cellpadding="4" border="3" bgcolor="#f5f5f5">
<tbody>

    <tr bgcolor="#99cccc">
    <th colspan="4">13</th>
    <th colspan="0">12</th>
    <th colspan="0">7</th>
    </tr>

    <tr bgcolor="#99cccc">
    <th width="70">5</th>
    <th width="70">4</th>
    <th width="70">3</th>
    <th width="70">2</th>
    <th width="70">No subcat</th>
    <th width="70">No subcat</th>
    </tr>

    <tr align="right">
    <td>85</td>
    <td>75</td>
    <td>65</td>
    <td>55</td>
    <td>11</td>
    <td>100</td>
    </tr>
</tbody></table> 
```

我的代码尝试，我尝试了第一个 tr 和 th 但其余的我对循环感到困惑：

```
<?php
$myfinal = Array(
                13 => Array
                        (
                        5 => 85,
                        4 => 75,
                        3 => 65,
                        2 => 55 
                        ),
                12 => 11,
                7  => 100
             );

?>
<table cellspacing="1" cellpadding="4" border="3" bgcolor="#c3cece">
<tbody>
<tr bgcolor="#99cccc">
<?php
foreach( $myfinal as $key => $value )
{
    if( is_array($value) )
    {
    echo '<th colspan="'.sizeof($value).'">'.$key.'</th>';
    }
    else 
    {
    echo '<th colspan="0">'.$key.'</th>';
    }
}

?>
</tr>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:51:02.163

适用于两层......任意层可能是可能的，但要复杂得多。

```
// Top row
echo '<tr>';
foreach( $myfinal as $key => $value )
{
    if( is_array($value) )
    {
        echo '<th colspan="'.sizeof($value).'">'.$key.'</th>';
    }
    else 
    {
        echo '<th colspan="1">'.$key.'</th>';
    }
}
echo '</tr>';
//Middle row
echo '<tr>';
foreach( $myfinal as $key => $value )
{
    if( is_array($value) ) 
    { 
        foreach($value as $key => $column) {
            echo '<th colspan="1">'.$key.'</th>';
        }
    }
    else 
    {
        echo '<th colspan="1">No subcat</th>';
    }
}
echo '</tr>';
//Data
echo '<tr>';
foreach( $myfinal as $key => $value )
{
    if( is_array($value) ) 
    { 
        foreach($value as $key => $column) {
            echo '<td>'.$column.'</td>';
        }
    }
    else 
    {
        echo '<td>'.$value.'</td>';
    }
}
echo '</tr>'; 
```

# iphone - 如何解决内存iOS App崩溃？

> ID：15011672
> 
> 赞同：1
> 
> 时间：2013-02-21T20:33:17.620
> 
> 标签：iphone, xcode, memory, memory-management, crash

上周我向 iTunes Connect 发送了一个应用程序。一切似乎都运行良好，该应用程序在归档后通过了 Xcode 验证，在我测试的任何一点上都没有（现在也没有）崩溃。

令我惊讶的是，这个应用程序昨天被苹果拒绝了，并在解决中心留下了这条消息：我们发现您的应用程序在运行 iOS 6.1 的 iPhone 5 上崩溃，这不符合 App Store 审查指南。

> 我们发现您的应用在 Wi-Fi 和蜂窝网络上启动时都崩溃了。
> 
> 如果您的应用使用太多内存，它可能会遇到此问题。要了解有关 iOS 内存使用情况以及如何跟踪内存使用和泄漏的更多信息，请参阅内存使用性能指南。

立即，我在模拟器上测试了该应用程序，因为我没有 iPhone 5，它可以正确启动（它不会崩溃）。唯一的问题是我发现了 3 个内存泄漏，我纠正了它们，但它们是这次崩溃的问题吗？

所以这是我的问题：

*   当他们说“如果 IT 使用太多内存”时，他们指的是什么？（应用程序还是设备？）

*   如何测试模拟内存“过度使用”的应用程序？我想这样做只是为了查看 Xcode 上的崩溃日志，并查看泄漏纠正是否解决了这个问题。

# python - 是否可以取消引用变量 id？

> ID：15011674
> 
> 赞同：34
> 
> 时间：2013-02-21T20:33:22.187
> 
> 标签：python, memory, dereference

[`id`](https://docs.python.org/library/functions.html#id)您可以取消引用从Python中的函数检索到的变量 id吗？例如：

```
dereference(id(a)) == a 
```

我想从学术的角度来了解；我知道还有更实用的方法。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-21T21:44:35.133

[这是一个基于“Tiran”在博客讨论](https://web.archive.org/web/20070830142010/http://www.friday.com/bbum/)@Hophat Abc 在[他自己的答案](https://stackoverflow.com/a/15012076/355230)中引用的（现已删除的）评论的实用函数，该函数在 Python 2 和 3 中都可以使用。

**免责声明：**如果您阅读链接的讨论，您会发现有些人认为这是非常不安全的，因此*不*应该使用它（正如下面的一些评论中所提到的）。我不同意这种评估，但我觉得我至少应该提一下关于使用它的一些争论。

```
import _ctypes

def di(obj_id):
    """ Inverse of id() function. """
    return _ctypes.PyObj_FromPtr(obj_id)

if __name__ == '__main__':
    a = 42
    b = 'answer'
    print(di(id(a)))  # -> 42
    print(di(id(b)))  # -> answer 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-21T20:38:10.793

不容易。

您可以通过[`gc.get_objects()`](http://docs.python.org/2/library/gc.html#gc.get_objects)列表递归，测试每个对象（如果它具有相同的） `id()`，但这不是很实用。

该`id()`函数*不是*可取消引用的；它基于内存地址的事实是 CPython 实现的细节，其他 Python 实现不遵循。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-21T20:51:26.960

有几种方法，不难做到：

在 O(n)

```
In [1]: def deref(id_):
   ....:     f = {id(x):x for x in gc.get_objects()}
   ....:     return f[id_]

In [2]: foo = [1,2,3]

In [3]: bar = id(foo)

In [4]: deref(bar)
Out[4]: [1, 2, 3] 
```

平均而言，更快的方式来自评论（感谢@Martijn Pieters）：

```
def deref_fast(id_):
    return next(ob for ob in gc.get_objects() if id(ob) == id_) 
```

最快的解决方案是@martineau 的答案，但确实需要暴露python 内部。上面的解决方案使用标准的 python 结构。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-21T22:31:41.817

**注意：**更新到 Python 3。

这是另一个答案改编自另一条[评论](https://web.archive.org/web/20070905071909/http://www.friday.com/bbum/2007/08/24/python-di/#comment-145316)，这是“Peter Fein”的评论，在@Hophat Abc 在他自己对自己问题的回答中引用的讨论中。

虽然不是一个普遍的答案，但在您了解要查找其 id 的对象的类的情况下仍然很有用 - 而不是它们是*任何*id 的 id 。我觉得这可能是一种值得的技术，即使有这个限制（并且没有我的[其他答案](https://stackoverflow.com/a/15012814/355230)的安全问题）。基本思想是创建一个跟踪自身实例和子类的类。

```
#!/usr/bin/env python3
import weakref

class MetaInstanceTracker(type):
    """ Metaclass for InstanceTracker. """

    def __new__(cls, name, bases, dic):
        cls = super().__new__(cls, name, bases, dic)
        cls.__instances__ = weakref.WeakValueDictionary()
        return cls

class InstanceTracker(object, metaclass=MetaInstanceTracker):
    """ Base class that tracks instances of its subclasses using weakreferences. """

    def __init__(self, *args, **kwargs):
        self.__instances__[id(self)]=self
        super().__init__(*args, **kwargs)

    @classmethod
    def find_instance(cls, obj_id):
        return cls.__instances__.get(obj_id, None)

if __name__ == '__main__':

    class MyClass(InstanceTracker):
        def __init__(self, name):
            super(MyClass, self).__init__()
            self.name = name
        def __repr__(self):
            return '{}({!r})'.format(self.__class__.__name__, self.name)

    obj1 = MyClass('Bob')
    obj2 = MyClass('Sue')

    print(MyClass.find_instance(id(obj1)))  # -> MyClass('Bob')
    print(MyClass.find_instance(id(obj2)))  # -> MyClass('Sue')
    print(MyClass.find_instance(42))        # -> None 
```

# android - XML - 解析 XML 时出错 - Eclipse Android 项目

> ID：15011679
> 
> 赞同：0
> 
> 时间：2013-02-21T20:33:33.853
> 
> 标签：android, xml, eclipse

在 Android 项目中，我的 XML 文档总是收到相同的错误消息。

我的代码：（错误发生在最后一行）

```
<TableLayout
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context = ".SelectActivity" > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:40:24.747

You don't have closing tag for your TableLayout which is

```
</TableLayout> 
```

Also this @dimen is this a resource or an id?

```
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin" 
```

# php - PHP 中有没有办法对特殊字符进行编码，以便它们可以在 URL 中使用？

> ID：15011680
> 
> 赞同：0
> 
> 时间：2013-02-21T20:33:35.117
> 
> 标签：php, url, aes, encode

我有一个来自这样的 AES 加密的字符串 -> "‚±«~—ÄÔý 3ƒÛœÛ" 有没有办法对这个字符串进行编码，以便它可以通过 URL 传输到脚本？

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:35:32.947

是的！

使用全局函数

```
urlencode($string) 
```

如果您想获取原始参数，可以使用以下方法解码 URL-Parameters：

```
urldecode($string) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T20:36:10.433

您可以为该任务使用 urlencode 或 base64_encode，两者都会生成 url 安全字符串

# java - 如何在 MVN 项目中访问磁盘上的资源？

> ID：15011681
> 
> 赞同：0
> 
> 时间：2013-02-21T20:33:38.087
> 
> 标签：java, maven

给定文件的位置

```
 /Users/me/repo/project_name/src/test/resources/some_dir/some_file 
```

从项目本身，我想引用相对于`resource`目录的文件。

换句话说，我想说的话

```
 sourceFile = Utils.readFileAsList("resources/some_dir/some_file"); 
```

我怎样才能弄清楚我的项目的家，这样我就可以在上面的路径前面加上它，使它`/Users/me/repo/project_name/src/test/resources/some_dir/some_file`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:39:36.787

不。使用类似`getResource`or的东西`getResourceAsStream`- 这就是它们的用途。

例如，

```
InputStream is = this.getClass().getResourceAsStream("some_dir/some_file");
//Read character data from the file
BufferedInputStream bis = new BufferedInputStream(is);
String first = bis.readLine(); 
```

请参阅[http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getResourceAsStream(java.lang.String)](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getResourceAsStream(java.lang.String))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:40:53.383

尝试使用 getClass().getClassLoader().getResourceAsStream("/some_dir/some_file")

# c++ - C ++如何从异构集合中区分特定的对象类型？

> ID：15011686
> 
> 赞同：0
> 
> 时间：2013-02-21T20:33:54.303
> 
> 标签：c++, object, collections, polymorphism, heterogeneous

因此，如果我有 Car 对象的异构集合

汽车* c = {卡车、厢式货车、敞篷车}

如果对象的集合是随机的，并且我想使用 for 循环遍历集合，我该如何测试特定的对象类型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T20:36:13.577

你会使用一个`dynamic_cast`：

```
if (truck* truck_p = dynamic_cast<truck*>(car_p)) {
  // car_p points at a truck
} 
```

`dynamic_cast`将检查所指向对象的动态类型，`car_p`并且仅在它是`truck`. 如果它不是 a `truck`，它将给出空指针值，因此`if`条件将失败。

但是，需要测试这样的动态类型表明代码设计不佳。多态性的全部意义在于您可以将任何派生对象视为基础对象 - 无需准确测试它是哪种派生类型。如果您需要检查 a 的动态类型`Car`以便可以对其进行一些`truck`特定的操作，那么您不应该将其`truck`扔到`Car*`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T20:50:31.587

如果您必须知道派生类型，那么多态性就不是适合这项工作的工具。我建议使用[boost::variant](http://www.boost.org/doc/libs/1_53_0/doc/html/variant.html)或等效的来实现[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T20:39:35.527

尝试查看 RTTI：

[http://en.wikipedia.org/wiki/Run-time_type_information](http://en.wikipedia.org/wiki/Run-time_type_information)

它是运行时类型信息。您还可以在每个派生类型中添加一个成员变量，说明它是什么类型，并使用它来检查。

# networking - wireshark 文件导出对象变灰 ver1.8.5

> ID：15011687
> 
> 赞同：1
> 
> 时间：2013-02-21T20:33:55.120
> 
> 标签：networking, wireshark

我尝试通过选择 [File>export objects>HTML] 来保存所有捕获的数据包

但在我使用的版本[1.8.5] 中，它被禁用（灰显）。

我想启用它。

任何帮助，将不胜感激。

![变灰的图像](../Images/d17dbe2d950ba972b120f2b73468ce01.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:58:20.047

> 我尝试通过选择 [File>export objects>HTML] 来保存所有捕获的数据包

“导出对象”下没有“保存所有捕获的数据包”；他们所做的是导出以特定数据包序列传输的对象。即，它们不保存原始数据包，它们保存实际文件/图像/在特定数据包序列中传输的任何内容。

这意味着您必须选择一个数据包，该数据包是传输对象的序列的一部分，以便不禁用 File -> Export Objects。

如果要将原始数据包保存到新文件，在 1.8.x 及更高版本中，您需要：

*   文件 -> 保存，如果您有一个尚未保存到文件的实时捕获，或者您已经编辑了评论但尚未保存更改的捕获文件；
*   文件 -> 另存为，如果您想将所有数据包保存到一个新文件并让该文件成为当前文件；
*   文件 -> 导出指定数据包，如果您想将所有数据包保存到一个新文件并且*不让*该文件成为当前文件，或者如果您想保存一些（但不是全部）数据包。

# r - 逐行分配到数据框

> ID：15011688
> 
> 赞同：0
> 
> 时间：2013-02-21T20:33:56.853
> 
> 标签：r

如何按行分配给数据框？这些是我尝试过的事情：

```
df <- data.frame(id=1:5)
df[c('x1','x2')] <- c(1,2)
df[c('x1','x2')] <- matrix(c(1,2),nrow=1)
df[c('x1','x2')] <- matrix(c(1,2),nrow=1,byrow=T) 
```

我想这样做的原因是我从每行的多元正态分布中生成一个点。

谢谢！

编辑：我希望输出看起来像：

```
id x1 x2
1  1  1  2
2  2  1  2
3  3  1  2
4  4  1  2
5  5  1  2 
```

但我得到的是：

```
 id x1 x2
1  1  1  2
2  2  2  1
3  3  1  2
4  4  2  1
5  5  1  2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:07:46.373

您的函数返回一个向量`c(1,2)`。假设它在`x`.

```
df <- data.frame(id=1:5)
x <- 1:2 # function output.

df <- cbind(df, t(replicate(nrow(df), x)))
names(df) <- c("id", "x1", "x2")

> df

#   id x1 x2
# 1  1  1  2
# 2  2  1  2
# 3  3  1  2
# 4  4  1  2
# 5  5  1  2 
```

如果您的函数返回了一堆 1*2 维度向量，那么您必须首先创建一个 5*2 的矩阵，然后再创建`cbind`.

这是你所期待的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:39:20.853

you are almost there! put a comma after your expression inside of the `[ ]`

```
 df[c('x1','x2'),  ]  <-  <what you would like to assign> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T19:26:01.253

这就是 Arun 的答案有效的原因，以及另一种选择：

您应该避免将向量分配给数据框行，因为 R 数据框在每一列中可以有不同的变量类型。想象一下，您的列包含数字、字符串和因子；那么该数据框的一行不是**向量**（因为向量必须都是一种类型，即所有数字或所有因子），而是一个**列表**。如果您尝试在 R 期望列表的位置分配一个向量，则可能会发生不好的事情。

但是您可以将列表分配到数据框行中。例如：

```
> df <- data.frame(id=1:5, x1=1, x2=2)
> df
  id x1 x2
1  1  1  2
2  2  1  2
3  3  1  2
4  4  1  2
5  5  1  2
> row2 <- list(x1=3, x2=4)
> df[2, c('x1','x2')] <- row2
> df
  id x1 x2
1  1  1  2
2  2  3  4
3  3  1  2
4  4  1  2
5  5  1  2 
```

或者，如果您知道（如您的示例中）一切都是数字的，只需构建一个矩阵而不是数据框。然后你可以将向量分配到矩阵行中，没问题。

```
> mat <- matrix(c(1:5, rep(1,5), rep(2,5)), 5, 3)
> colnames(mat) <- c("id","x1","x2")
> mat
     id x1 x2
[1,]  1  1  2
[2,]  2  1  2
[3,]  3  1  2
[4,]  4  1  2
[5,]  5  1  2
> row2 <- c(3,4)
> mat[2, c("x1","x2")] <- row2
> mat
     id x1 x2
[1,]  1  1  2
[2,]  2  3  4
[3,]  3  1  2
[4,]  4  1  2
[5,]  5  1  2 
```

# css - twitter 引导弹出框标题

> ID：15011689
> 
> 赞同：0
> 
> 时间：2013-02-21T20:34:11.730
> 
> 标签：css, twitter-bootstrap, popover

在构建 twitter bootstrap 弹出窗口时，您通常会将标题放在使用中`data-original-title`，但是我很好奇标题 css 类是什么，如果有的话。

原因是，我需要更改标题在弹出框标题内的位置。我已经尝试过`.popover-title`，但它移动了标题和灰色标题背景，我只想移动标题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:00:57.003

以什么方式改变位置？

只需覆盖此声明

```
.popover-title {
  background-color: #F7F7F7;
  border-bottom: 1px solid #EBEBEB;
  border-radius: 5px 5px 0 0;
  font-size: 14px;
  font-weight: normal;
  line-height: 18px;
  margin: 0;
  padding: 8px 14px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:44:32.933

你是对的，弹出框的标题有 class `popover-title`。因此，您要进行的任何更改都必须存在。

但是，灰色背景也是 popover-title 类的一部分，因此任何更改都必须考虑到这一点。例如添加`text-align:right`到类工作正常。

你是如何改变立场的？你想达到什么目的？如果您真的想发疯，您可以更改 bootstrap-popover.js 中的弹出框模板以添加另一个类或其他内容，但这取决于您要执行的操作。

# ruby-on-rails - 导轨中的 Fancybox 错误

> ID：15011694
> 
> 赞同：0
> 
> 时间：2013-02-21T20:34:23.057
> 
> 标签：ruby-on-rails, ruby, fancybox

我已经制作了一个带有图片上传的帖子模型并附加了fancybox来显示这些图片，这一切都很好。

例子：

```
<div id="pictures_in_form"><%= link_to image_tag(asset.object.image.url(:thumb)), asset.object.image.url(:big), :class => "fancybox", :rel => "gallery" if asset.object.image? %></div> 
```

但是，当我想将花式框附加到单个图像时，出现错误：

```
The requested content cannot be loaded.
Please try again later. 
```

例子：

```
<%= link_to (image_tag 'about_school/par_livu_skolu_1.jpg'), '/about_school/par_livu_skolu_1.jpg', :class => "fancybox"%> 
```

那么有人能指出问题所在吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:45:30.230

第一个图像路径开始时**没有**斜线`/`，例如：

```
about_school/par_livu_skolu_1.jpg 
```

...所以它表示*相对*路径。例如，如果调用页面位于以下子目录中：

```
/mysubdir/page.html 
```

...然后图像路径将是

```
/mysubdir/about_school/par_livu_skolu_1.jpg 
```

另一方面，第二个图像路径**确实**以斜杠开头，`/`例如：

```
/about_school/par_livu_skolu_1.jpg 
```

...这意味着图像路径从`root`调用页面所在的位置开始。

我想您需要更正任一路径，否则fancybox将找不到图像并显示消息

```
The requested content cannot be loaded.
Please try again later. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T20:43:30.827

尝试像这样移动你的左括号：

```
<%= link_to (image_tag ('about_school/par_livu_skolu_1.jpg'), '/about_school/par_livu_skolu_1.jpg', :class => "fancybox") %> 
```

那可能会解决它。

# ruby - 在 Kramdown 中启用脚注

> ID：15011695
> 
> 赞同：1
> 
> 时间：2013-02-21T20:34:23.683
> 
> 标签：ruby, markdown

以[http://kramdown.rubyforge.org/syntax.html#footnotes](http://kramdown.rubyforge.org/syntax.html#footnotes)中的逐字示例为例，我在 IRB 中运行以下命令：

```
Kramdown::Document.new('This is some text.[^1]. Other text.[^footnote].').to_html 
```

返回：

```
"<p>This is some text.[^1]. Other text.[^footnote].</p>\n" 
```

这似乎表明默认情况下在 Kramdown 中禁用脚注。如何启用它们？我查看了 [选项文档] ( [http://kramdown.rubyforge.org/options.html](http://kramdown.rubyforge.org/options.html) )，但我没有看到那里列出的启用/禁用脚注的选项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T20:57:35.560

从[您链接到的文档中](http://kramdown.rubyforge.org/syntax.html#footnotes)：

> 如果找到标识符的脚注定义，将创建一个脚注。否则脚注标记不会转换为脚注链接。

因此，您需要包含脚注定义，例如（在文档页面的下方有一个更完整的示例）：

```
This is some text.[^1]. Other text.[^footnote].

[^1]:A footnote. 
```

这会产生：

```
<p>This is some text.<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>. Other text.[^footnote].</p>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>A footnote.<a href="#fnref:1" rel="reference">&#8617;</a></p>
    </li>
  </ol>
</div> 
```

请注意，脚注 for`[^1]`是在定义后生成的，但`[^footnote]`保持原样。

# php - 需要在没有用户登录的情况下获取 Facebook 提要

> ID：15011697
> 
> 赞同：2
> 
> 时间：2013-02-21T20:34:35.290
> 
> 标签：php, facebook, facebook-graph-api

我的公司想在我们的 Intranet 上发布我们公司的 Facebook 新闻源；但是，有一些警告。我们阻止员工通过浏览器访问 facebook，使他们无法登录并获取用户访问令牌。

*[编辑：我们确实允许我们的网络服务器通过 Facebook，这就是我与图形 API 交谈的方式。我正在使用 PHP（请参阅下面的代码示例）]*。

我需要一种方法来让这个工作或具体的证据证明它不会。

我可以获得生成的应用令牌，并且服务器可以访问 facebook。我试图扩展我在探索中生成的访问令牌，但我收到一条错误消息，指出该令牌不属于我的应用程序。无论如何，这是我所做的：

1.  创建的应用程序（工作）
2.  使用 PHP，我能够生成应用程序令牌并获取我的基本数据，但不能获取提要

    `$authToken = file_get_contents("https://graph.facebook.com/oauth/access_token?type=client_cred&client_id={$app_id}&client_secret={$app_secret}");`

    `$data['feed_data'] = file_get_contents("https://graph.facebook.com/{$profile_id}?fields=id,name,feed&{$authToken}");`

让我再说一遍，我只需要我们的 facebook 页面上的 feed 就可以显示在我们的网站上。此外，like 插件将无法工作，因为它被防火墙阻止。

# c++ - 从哪里开始使用计算机视觉

> ID：15011698
> 
> 赞同：8
> 
> 时间：2013-02-21T20:34:39.273
> 
> 标签：c++, opencv, image-processing, computer-vision, image-recognition

在计算机视觉方面，我是一个完全的新手。
请记住，我擅长 C++，有人可以推荐我一本关于计算机视觉的好书吗？

我设计的软件将非常高效和快速，因为我需要连续扫描神经元图片，从而虚拟地创建神经元之间的连接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T20:39:23.283

Take a look at these libraries:

*   [http://opencv.org/](http://opencv.org/)
*   [http://www.vlfeat.org/](http://www.vlfeat.org/)
*   [http://libccv.org/](http://libccv.org/)

The OpenCV C++ API looks great, and libccv looks promising (they have a cool HTTP API feature). Currently my favorite "book" is the OpenCV documentation: [http://docs.opencv.org](http://docs.opencv.org)

Greetings!

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T21:01:59.163

不错的关于一般简历主题的免费赠品：[http](http://szeliski.org/Book/) ://szeliski.org/Book/ （那里的人喜欢听自己说话，但还是一本好书！！）

如果你选择 opencv，这里有 Gary Bradsky 的《Learning Opencv》一书， [http://www.cse.iitk.ac.in/users/vision/dipakmj/papers/OReilly%20Learning%20OpenCV.pdf](http://www.cse.iitk.ac.in/users/vision/dipakmj/papers/OReilly%20Learning%20OpenCV.pdf) （对几乎所有内容都有很好的解释） ，但相当过时的代码示例）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T21:04:23.860

好书[计算机视觉](https://rads.stackoverflow.com/amzn/click/com/013608592X)。这是关于简历的数学基础。

# emacs - 是否有 Emacs 组织模式命令可以跳转到组织标题？

> ID：15011703
> 
> 赞同：19
> 
> 时间：2013-02-21T20:35:02.183
> 
> 标签：emacs, org-mode

在 Emacs org-mode 中，有没有类似 org-goto-heading 的命令？

在一个长的 org-mode 文件中，我有一个朝向底部的标题，如下所示：

```
* questions 
```

我想跳到那个标题，而不必费力地浏览这个词的所有其他实例`questions`。

有没有类似的命令：

基本上，我想使用以下内容导航到该标题：`M-x org-goto-heading questions <RET>`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-22T01:10:22.150

这是 org 邮件列表中[讨论导航](http://comments.gmane.org/gmane.emacs.orgmode/47452)的有趣线程。

本质上，将其添加到您的 init 文件中：

```
(setq org-goto-interface 'outline-path-completion
      org-goto-max-level 10) 
```

`org-goto`您可以使用命令跳转到标题`C-c C-j`。您也可以`C-u C-c C-w` `org-refile`通过将其添加到您的 init 文件中来使用：

```
(setq org-outline-path-complete-in-steps nil) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-21T20:46:02.480

不确定这是否适合您，但有一个`org-goto`功能`C-c C-j`。

调用它后，您可以使用向上和向下键或使用搜索来滚动树`C-s`。

[这是docs](http://orgmode.org/org.html)中的一个片段。

```
C-c C-j     (org-goto)

Jump to a different place without changing the current outline visibility.
Shows the document structure in a temporary buffer, where you can use the
following keys to find your destination:

          <TAB>         Cycle visibility.
          <down> / <up>   Next/previous visible headline.
          <RET>         Select this location.
          /           Do a Sparse-tree search
          The following keys work if you turn off org-goto-auto-isearch
          n / p        Next/previous visible headline.
          f / b        Next/previous headline same level.
          u            One level up.
          0-9          Digit argument.
          q            Quit 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-21T21:36:02.010

我将此命令绑定到`M-o`: `(imenu-anywhere)`。

它允许您快速跳转到部分（从所有部分的列表中选择）。它不仅适用于 org-mode，而且适用于许多其他模式。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-02-22T01:29:05.227

然后是[org-occur-goto](https://github.com/suvayu/.emacs.d/blob/master/lisp/org-occur-goto.el)，它对所有 org-mode 缓冲区进行多次搜索，并在您键入时动态显示结果。

适用于任何文本（不仅是标题）。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-10-18T10:12:40.750

如果您正在寻找议程文件中的标题，`helm-org-agenda-files-headings`这是一个非常有用的命令。它是[`helm`](https://github.com/emacs-helm/helm)软件包的一部分，可通过 MELPA 获得。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-23T03:35:41.857

您还可以`isearch-forward-regexp`对`"^* questions"`.

即类型

> Mx isearch-forward-正则表达式

然后，Emacs 会提示您输入要搜索的字符串（迷你缓冲区会提示：“I-search”）。然后，您只需键入：

> ^* 问题

# jquery - jquery 中的多个 done() 被延迟——它是如何工作的？

> ID：15011709
> 
> 赞同：3
> 
> 时间：2013-02-21T20:35:24.553
> 
> 标签：jquery, jquery-deferred

[最近](https://stackoverflow.com/q/14989628/1252748)我问我如何触发可变数量的 jquery`get()`请求，我收到了这个代码作为一个非常有效的工作解决方案：

```
var d = new $.Deferred();
var promise = d.promise();
var results = [];
for (var i = 0; i < 5; i++) {
    (function(i) {
        promise = promise.then(function() {
            return $.ajax('/echo/json/', {
                data: {
                    json: JSON.stringify({foo: i})
                }
            }).done(function(data) {
                results[i] = data;
            });
        });
    }(i));
}

promise.done(function() {
    console.log(results);
});

d.resolve(); 
```

[小提琴](http://jsfiddle.net/ym4c6/4/)

我正在寻找一个解释，说明这与`done()`附加到 each 的多个 s`promise.then()`以及最后`done()`附加到 promise 本身的情况到底是如何工作的。是不是一个承诺（据我所知是一种特殊类型的 deferred 本身）可以完成，那么 deferred 本身也可以完成？如果它不在循环中，那么对于连续三个 ajax 请求，这种语法会是什么样子？只是想绕开它。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T21:52:57.497

如果你有一个延迟对象数组，你实际上可以使用`when`和`apply`获取承诺来处理它们，然后`$.done()`在它们上使用：

```
$.when.apply($, deferredArray).done(function() {
   for (var i = 0; i < arguments.length; i++) {
      //arguments[i] is the return of the singular done() statement    
   }
}); 
```

当您不知道您正在使用多少延迟对象时，这非常有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T21:15:53.810

promise 是 deferred 的包装器，它隐藏了`resolve`和`reject`方法，是 deferred 的公共接口的一种。因为`then()`，`done()`如果你在延迟或承诺上使用它们并没有什么区别。从现在开始，我将使用延迟一词来表示两者。

话虽如此，`done()`返回允许链接的延迟本身。您可以像这样添加尽可能多的完成（和失败）处理程序。他们将被一一召唤。

`then()`返回一个*新*的deferred*，它可以有自己的完成和失败处理程序。

请注意，在您的代码中，您`promise`在每次循环迭代时替换变量中的 deferred ，因此 final`done()`不会在原始 deferred 上调用，而是在最新的上调用，由 last 返回`then()`。

链接在一行中的所有调用看起来像这样（每个都`then()`返回一个新的承诺。我标记了，在其`done()`上调用了方法）：

```
d.then().done().then().done().then().done().then().done().done();
         ^^^^^^        ^^^^^^        ^^^^^^        ^^^^^^^^^^^^^
        promise 1     promise 2     promise 3       promise 4 
```

*) 实际上是它的承诺

# python - Python整数分区

> ID：15011712
> 
> 赞同：-1
> 
> 时间：2013-02-21T20:35:40.320
> 
> 标签：python, numbers

我正在尝试编写一段代码，它将给我一个数字的分区。到目前为止，我想出了这个（在谷歌上找到）。

```
def gen(n):
           # tuple version
           if n == 0:
               yield ()
               return

           for p in gen(n-1):
               yield (1, ) + p
               if p and (len(p)<2 or p[1] > p[0]):
                   yield (p[0] + 1, ) + p[1:]

print(list(gen(5))) 
```

如果有人能帮助我理解这个递归函数是如何工作的，我将不胜感激。请帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T23:32:34.650

为了理解发生了什么，它有助于打印生成器的输出，以获得几个顺序增加的值`n`：

```
>>> for i in range(5):
        print(list(gen(i)))

[()]
[(1,)]
[(1, 1), (2,)]
[(1, 1, 1), (1, 2), (3,)]
[(1, 1, 1, 1), (1, 1, 2), (2, 2), (1, 3), (4,)] 
```

每个序列的计算都基于它之前的序列。这是它如何工作的逐行解释：

```
if n == 0:
    yield ()
    return 
```

生成器的前几行用于基本情况，其中`n`0。该`return`语句在产生一个空元组后使其退出，而不是继续执行其余代码。

```
for p in gen(n-1): 
```

这是函数的递归步骤。由于`gen`是一个生成器，它是通过循环完成的，因此其余代码将重复运行，并`p`从递归结果中获取不同的值。

```
 yield (1, ) + p 
```

这是一条重要的线。这样做是从生成器中产生一个新的元组，该元组通过将 a 连接`1`到 value 的前面而形成`p`。如果`p`是空元组，这将是一个 1 元组。如果`p`已经有一些值，则元组将变得更长。

```
 if p and (len(p)<2 or p[1] > p[0]): 
```

这是一个复杂的条件。第二次检查，`len(p)<2`真的可以写`len(p)==1`，因为`p and`开头的部分已经排除了`p`为空。

`p`为了通过，可以有两种值。要么`p`只有一个值，要么有更多的值，并且它的第一个值小于它的第二个值。所以`(3,)`会过去，也会过去，`(1,2)`但`(1,1,1)`不会。

```
 yield (p[0] + 1, ) + p[1:] 
```

这是另一个元组连接。它将第一个值增加`p`一个，然后将其与其余部分连接起来`p`（使用切片）。So `(3,)`will become `(4,)`(切片为空), `(1,2)`become`(2,2)`等。

所以，现在让我们来看看我们上面看到的结果。

```
[()] 
```

等于 0 时，基本情况被击中，你会得到`n`一个空元组。

```
[(1,)] 
```

等于 1 时，`n`循环运行一次，并连接`(1,)`到空元组，产生 1-tuple `(1,)`。条件的第一部分`if`没有通过，因为`p`它是空的。

```
[(1,1), (2,)] 
```

`n`等于 2，循环仍然只运行一次。首先，它`(1,1)`通过`(1,)`与自身连接得到 get `(1,1)`。但是这一次，该`if`块运行，因为`p`只有一个值。所以它也产生了`(p[0]+1,) + p[1:]`。其中的切片部分是空元组，但第一部分是`(2,)`.

```
[(1,1,1), (1,2), (3,)] 
```

现在终于循环运行不止一次了！虽然第一次，它将另一个连接`(1,)`到前面`(1,1)`，并且由于`if`不满足语句的条件，这就是它所做的一切。然而，在第二次通过时，它会产生两个值，一次连接`(1,)`，`(2,)`然后递增`(2,)`到`(3,)`.

```
[(1, 1, 1, 1), (1, 1, 2), (2, 2), (1, 3), (4,)] 
```

这个我会留给你，让你走过。与上述情况一样，`p`它将采用上一级调用 ( `(1,1,1), (1,2), (3,)`) 中的每个值，并且对于每个值，它将产生一个或两个新结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:52:21.570

[`yield`](https://stackoverflow.com/questions/231767/the-python-yield-keyword-explained)把你的函数变成一个生成器。阅读[此答案](https://stackoverflow.com/questions/231767/the-python-yield-keyword-explained)以获得很好的解释。

基本上，不是一次创建结果列表然后返回它：

```
def f():
    output = []

    for i in range(10):
        output.append(i + 3)

    return output 
```

您可以创建一个生成器，`yield`仅当您请求一个项目时：

```
def f():
    for i in range(10):
        yield i + 3 
```

也可以制作无限生成器：

```
def f():
    a = 0
    b = 1

    while True:
        yield b

        a, b = b, a + b 
```

迭代`f()`只会不断吐出斐波那契数列的术语。

# trigger.io - forge.topbar 文本颜色

> ID：15011713
> 
> 赞同：1
> 
> 时间：2013-02-21T20:35:46.060
> 
> 标签：trigger.io

如何在 Trigger.io 中设置 forge.topbar 原生顶栏的文本颜色？

我看到`setTint`哪个改变了背景，但没有改变标题和按钮中文本的颜色。

我们希望背景颜色为浅色，文本为深色。但据我所知，除非您使用图标而不是文本，否则文本只能是白色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T17:30:15.680

从 v1.4.31 开始，目前不支持该功能 - 如果需要，您可以使用标题图像 ( [http://docs.trigger.io/en/v1.4/modules/topbar.html#settitleimage](http://docs.trigger.io/en/v1.4/modules/topbar.html#settitleimage) )？

# sql-server-2008 - SQL Server 日期查询，年月作为单独的列

> ID：15011714
> 
> 赞同：0
> 
> 时间：2013-02-21T20:35:47.397
> 
> 标签：sql-server-2008

我有表，其中年和月作为整数存储在单独的列中。我的问题是如何从当前日期（即查询运行的日期）检索前 12 个月。因此，如果日期是 2013 年 2 月 15 日，那么我只想获取 2013 年 2 月 15 日到 2012 年 2 月 14 日的记录，而不返回任何其他年份和月份。

有没有简单的方法来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:40:43.480

用于[`DATEADD()`](http://msdn.microsoft.com/en-us/library/ms186819%28v=sql.100%29.aspx)查找 1 年前的日期：

```
SELECT *
FROM myTable
WHERE DATEADD(year, -1, GETDATE()) >= 
      CONCAT(CAST(year AS varchar), CAST(month AS varchar), CAST(date AS varchar)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:40:00.300

只是给你一个想法，也许这样的事情会有所帮助：

```
select CONVERT(datetime, CONCAT ( year, month, date ))
from your_table 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T21:03:00.660

我强烈建议您更改该数据库的设计。正如 Edgar Frank Codd 所说，日期是原子的，也就是说，它不能（或不应该）分成更小的部分。如果还不算太晚，请更改您的设计，将日期设置为日期时间格式，这将消除检索日期的任何问题。您有数百个日期和时间函数可以轻松检索日期，否则您将无脑思考查询。

在 current_date() 和 Dateadd(yy,-1,current_date()) 之间选择（随便）从（表）哪里（表的日期列）；

如果您更改设计，这将是您查询的代码。否则，您可以执行以下操作：

Select (whatever) From (table) where (table.year between (Select MAX(table.year) From table) AND (Select MAX(table.year)-1 From table)) AND table.month = (尝试获取实际月份）AND table.day =（尝试获取实际日期）；

如您所见，很难确定查询是在哪一天和哪一个月执行的。我假设最大年份是实际年份……这不是做事的方式，我强烈建议您更改设计。希望能帮助到你。

# javascript - 为什么在提交我的 FireFox 附加组件时出现此警告？

> ID：15011715
> 
> 赞同：1
> 
> 时间：2013-02-21T20:35:49.830
> 
> 标签：javascript, firefox, firefox-addon

这是我收到的消息：

```
Usage of non-SDK interface

Warning: This SDK-based add-on uses interfaces that aren't part of the SDK.
resources/lib/main.js
8
9
var {Cc, Ci, Cr} = require("chrome");
var data = require('sdk/self').data; 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:02:47.117

这意味着您在代码中使用了一个可用但不属于公共 API 的方法。

这意味着您的代码可以工作，但长期不受支持；在任何给定的 Firefox 更新中，您所依赖的方法可能会在没有警告的情况下更改，而公共 API 中的方法将得到更长时间的完全支持（如果他们确实想弃用某些东西，在公共 API 中你会得到很多在实际删除之前发出警告）。

至于你究竟做了什么来触发它，我不看你的代码就无法判断。

# sql-server - ASP.Net Gaming 网站表的 SQL DB 设计

> ID：15011716
> 
> 赞同：1
> 
> 时间：2013-02-21T20:35:49.847
> 
> 标签：sql-server, database-design, asp.net-4.5

我正在使用 ASP.NET 和 SQL 创建一个游戏信息站点，需要一些帮助来确定设计保存发布日期的表的最佳方式。我在想一个两列设计（`ExactDate`, `RoughDate`），每列都可以为空，但它似乎并不正确。该表需要能够保存以下日期格式，并且我想在最接近当前日期的日期之前订购（因此，较早推出的游戏首先列出）：

```
DD-MM-YYYY
(Q1/Q2/Q3/Q4)-YYYY
(Early/Mid/Late)-YYYY
(Spring/Summer/Fall/Winter)-YYYY
TBA 
```

关于如何最好地处理不同日期的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:40:59.340

根据我上面的评论，我认为它可能值得考虑您是否需要超过 2 列显示日期/排序日期系统 - 我倾向于使用这个简单的选项，直到它增加太多摩擦，此时你可以重新考虑...

就一个不太简单的模型而言；如果发布日期（及其相关顺序）足够重要，以至于您希望确保 Early-2013 出现在 2013 年 2 月 21 日之前（反之亦然），那么您可以建立一个“发布日期”表。

```
DisplayText | Type | Start      | End
01/01/2013  | 1    | 2013-01-01 | 2013-01-01
Q1-2013     | 2    | 2013-01-01 | 2013-03-31
Early-2013  | 3    | 2013-01-01 | 2013-06-30 
```

这将在未来 20 年或其他任何时间（仍然只有几千行..）的每个组合中预加载，您只需将其视为 FK 并使用通常的连接语法来使用它。可以通过“开始/结束”列进行排序，并且您也可以将搜索限制在这些范围内（也许只有可能在未来 6 周或其他时间发布的游戏）

正如我所说，我真的不建议直接走这条路，因为它的主要好处是易于与 ui 设计器集成和一致性（因为除了选择选项之外没有人为决策）所以直到你完成建立您的网站我绝对不会打扰:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:06:33.553

我会采用两列设计（DisplayText nvarchar，RelaseDate 日期）

ReleaseDate 将是一个计算列，它将根据存储在 DisplayText 列中的数据计算其日期。只需创建 UDF，它会根据 DisplayText 列中存储的内容计算日期，你应该会很好。这个UDF会有点复杂但不会太多。

如果您想让它的性能强度降低一点，则将 ReleaseDate 创建为非计算列，但每次插入或更新 DisplayText 中的值时使用触发器更新其值。

# vb.net - 使用代码片段在 VB.net 中创建类属性。prop 只给出“property () as” 怎么了？

> ID：15011720
> 
> 赞同：1
> 
> 时间：2013-02-21T20:36:09.843
> 
> 标签：vb.net, class, properties

正如标题所说，当我输入 prop 时，我只会得到一个非常短的版本“property () as”，而没有 get 或 set。它曾经在 vb.net 中工作，但该片段似乎已完全被这个简短的片段所取代。使用 VS Ultimate 2012。

它曾经在 VS 2010 上工作，但在 VS2012 和 Win 8 上，我不再拥有我以前拥有的道具片段的两台机器。我的设置完全是库存，除了 resharper。有谁知道它的 resharper 还是 vb.net 中的新东西？

这似乎是 VB.net 的新事物

[http://msdn.microsoft.com/en-us/library/dd293589.aspx](http://msdn.microsoft.com/en-us/library/dd293589.aspx)

我仍然有旧的片段，我可以通过单击代码窗口上下文菜单上的插入片段，然后是代码模式，然后是属性、过程、事件，然后是定义一个属性来查看它。（来自： http: [//msdn.microsoft.com/en-us/library/ms165392.aspx](http://msdn.microsoft.com/en-us/library/ms165392.aspx)）它只是不再显示在道具上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:41:38.160

如果您`get`在下一行输入并按 Enter，您将获得 get 和 set 部分。我认为这是因为自动属性。

编辑：键入`prop`然后快速按两次 TAB 以获得完整扩展。

# mysql - mysql_num_rows() 期望参数 1 是资源，给定的布尔值

> ID：15011722
> 
> 赞同：0
> 
> 时间：2013-02-21T20:36:10.860
> 
> 标签：mysql

我刚刚更改了一个 MySQL，我只需要将具有 Broadcast_To_Home 的那些显示为 (1) 它只能是 1 或 0，所以我将它用作布尔值。我的查询如下所示

```
SELECT * FROM blog WHERE Broadcast_To_Home IN(1) ORDERBY ID DESC LIMIT 3 
```

那么使用它作为我的查询我得到标题中显示的错误有人可以帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:36:59.053

`ORDERBY`必须像那样分开`ORDER BY` 并且

如果您只有一个值`1`，为什么不这样使用`Broadcast_To_Home =1`。？

尝试这个

```
SELECT * FROM blog WHERE Broadcast_To_Home =1 ORDER BY ID DESC LIMIT 3 
```

# php - symfony2 第一个学说查询

> ID：15011724
> 
> 赞同：1
> 
> 时间：2013-02-21T20:36:11.940
> 
> 标签：php, symfony, doctrine, query-builder

我正在尝试对 symfony2 进行第一次查询，所以这个问题可能很愚蠢。

我有我的用户表和（朋友）请求表。在我存储的请求表中

id,nick(id),odobera(我关注的另一个用户 ID),时间

nick 属性看起来：

```
/**
 * @ORM\ManyToOne(targetEntity="TB\UserBundle\Entity\User", inversedBy="Requests")
 * @ORM\JoinColumn(name="nick", referencedColumnName="id")
 */ 
```

现在我想将旧的功能查询重建为新的 symfony 查询：

```
 $select_all=mysql_query("SELECT re.*,tb.rank,tb.profile_picture_ultra_small,tb.country,tb.typ_hraca,tb.rank 
                            FROM requests as re
                            INNER JOIN tb_users as tb
                            ON re.nick=tb.nick
                            WHERE re.odobera='$nick' AND re.nick<>'$nick' ORDER BY re.id DESC LIMIT 50"); 
```

我只是简单地开始：

```
public function getMyFollowers($my_id)
{
    $qb = $this->createQueryBuilder('mf')
               ->select('mf')
               ->where('mf.odobera = :my_id')
               ->addOrderBy('mf.time','DESC')
               ->setParameter('my_id', $my_id)
               ->setMaxResults(50);

    return $qb->getQuery()
              ->getResult();
} 
```

我没有用于选择关注我的用户的 profile_picture 的内部连接 ​​+ 当我现在转储它时，我的结果看起来很奇怪：（如您所见，没有关注我的用户的 ID（昵称））

```
"Proxies\__CG__\TB\UserBundle\Entity\User" ["odobera"]=> int(25) ["time"]=> int(1359128544) ["viewed"]=> bool(true) } [6]=> object(stdClass)#624 (6) { ["__CLASS__"]=> string(33) "TB\RequestsBundle\Entity\Requests" ["id"]=> int(57443) ["nick"]=> string(40) "Proxies\__CG__\TB\UserBundle\Entity\User" ["odobera"]=> int(25) ["time"]=> int(1359124714) ["viewed"]=> bool(true) } [7]=> object(stdClass)#625 (6) { ["__CLASS__"]=> string(33) "TB\RequestsBundle\Entity\Requests" ["id"]=> int(57013) ["nick"]=> string(40) "Proxies\__CG__\TB\UserBundle\Entity\User" ["odobera"]=> int(25) ["time"]=> int(1359047459) ["viewed"]=> bool(true) } [8]=> object(stdClass)#626 (6) { ["__CLASS__"]=> string(33) "TB\RequestsBundle\Entity\Requests" ["id"]=> int(56766) ["nick"]=> string(40) 
```

请问有什么想法吗？:P 谢谢！

我尝试按照您所说的将其添加到我的实体中，但更改了名称，但我认为它根本没有意义，我的查询一次加载 9s 并且只撤回了一个用户 + 我现在无法加载页面......用户：

```
/**
 * @ORM\OneToMany(targetEntity="TB\RequestsBundle\Entity\Requests", mappedBy="following")
 *
 **/
private $followers; 
```

要求：

```
/**
* @ORM\ManyToOne(targetEntity="TB\UserBundle\Entity\User", inversedBy="followers")
* @ORM\JoinColumn(name="nick", referencedColumnName="id")
**/ 
```

私人 $following;

但是……这没有任何意义……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:51:24.893

您可以为用户类定义一个存储库，将注释添加到用户类。

```
@ORM\Entity(repositoryClass="Acme\YourBundle\Entity\UserRepository") 
```

在存储库中，您将拥有：

```
public function getFollowers($id)
{
    $qb = $this->getEntityManager()->createQueryBuilder();
    $qb
        ->select('user')
        ->from('YourBundle:User', 'user')
        ->leftJoin('user.requests', 'friends')
        ->where('friends.odobera = :id')
        ->setParameter('id', $id)
        ->orderBy('friends.time', 'DESC')
        ->setMaxResults(50);

    return $qb->getQuery()->getResult();
} 
```

检查此[自定义存储库](http://docs.doctrine-project.org/en/2.0.x/reference/working-with-objects.html#custom-repositories)

在您的控制器上

```
$em = $this->getDoctrine()->getManager();
$entity = $em->getRepository('YourBundle:User')->getFollowers($id); 
```

映射信息示例

关于用户

```
/**
 * @ORM\OneToMany(targetEntity="Followers", mappedBy="following")
 *
 **/
private $followers; 
```

在追随者上（表格是您定义的追随者）

```
/**
 * @ORM\ManyToOne(targetEntity="Users", inversedBy="followers")
 * @ORM\JoinColumn(name="company_id", referencedColumnName="id")
 **/
private $following; 
```

# javascript - 未捕获的类型错误：无法读取未定义的属性“safari”

> ID：15011729
> 
> 赞同：7
> 
> 时间：2013-02-21T20:36:17.143
> 
> 标签：javascript, jquery

我有这个 jjavascript 来调整 iframe 的大小：

```
 $(function () {

            var iFrames = $('iframe');

            function iResize() {

                for (var i = 0, j = iFrames.length; i < j; i++) {
                    iFrames[i].style.height = iFrames[i].contentWindow.document.body.offsetHeight + 'px';
                }
            }

            if ($.browser.safari || $.browser.opera) {

                iFrames.load(function () {
                    setTimeout(iResize, 0);
                });

                for (var i = 0, j = iFrames.length; i < j; i++) {
                    var iSource = iFrames[i].src;
                    iFrames[i].src = '';
                    iFrames[i].src = iSource;
                }

            } else {
                iFrames.load(function () {
                    this.style.height = this.contentWindow.document.body.offsetHeight + 'px';
                });
            }

        }); 
```

在 chrome 中，这里有问题：

```
 if ($.browser.safari || $.browser.opera) { 
```

我收到这个错误有什么原因吗？我正在使用最新的 JQuery？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-21T20:40:41.307

您可能正在使用 jQuery 1.9 或更高版本，在这种情况下[`$.browser`](http://api.jquery.com/jQuery.browser/)，自 1.3 起已被弃用后被正式删除。

您可以使用[jQuery migrate](http://blog.jquery.com/2013/01/31/jquery-migrate-1-1-0-released/)来修补它，但最好使用特定于功能的方法而不是特定于浏览器的方法。[Modernizr](http://modernizr.com/)非常适合这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T20:41:57.737

jquery 建议不要`$.browser`...`$.support`改用 ...

如果`$.browser.safari`（或歌剧或您尝试访问的任何内容）不存在，则会引发错误。检查它是否`undefined`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-10T22:15:45.037

我今天注意到一个客户在没有告诉我的情况下升级了这个问题。

我发布的快速修复（不使用 Modernizr 这可能是更好的方法）

在 scrollTo.js 文件中，转到第 85 行并将其设为：

```
 var is_safari = navigator.userAgent.indexOf("Safari") > -1;

        return is_safari || doc.compatMode == 'BackCompat' ? 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T20:43:47.320

您可以尝试检查 userAgent 字符串：

> Chrome 在 userAgent 字符串中同时具有“Chrome”和“Safari”。Safari 只有“Safari”。

[使用 jQuery 检测 Safari](https://stackoverflow.com/questions/5899783/detect-safari-using-jquery)

# node.js - 如何正确创建 Javascript 半动态 javascript 代码生成器

> ID：15011730
> 
> 赞同：1
> 
> 时间：2013-02-21T20:36:19.203
> 
> 标签：node.js

我有一个需要实现的 REST API 层。好消息是该层定义良好，因此使用 JSON 数据集并将其转换为相应的 API 文档很容易使用把手或 Mustache，但是，我还需要生成实际的处理程序并使用 expressjs 注册处理程序。

**是的，我知道这对客户端代码不利。**

*这是 100% 正确的，但证明了挑战*

```
var tmpl = "app.get({{path}}, function(req, res) { ... and some work ...} )";
var all_path = [{path:'/hello',body:"function(msg) {return pub(msg);}"},{path:'/world'},];
for(var i=all_path.length()-1; i>=0; i--) {
    task = mustache.Render(tmpl, all_path[i]);
    eval(task);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:19:09.057

如果`... and some work ...`每个都基本相同，只是`path`值不同，您可以使用另一个函数来完成此操作：

```
function addGenericGetHandler(path) {
    app.get(path, function (req, res) {
        // ... and some work ...
    });
}

[ '/hello', '/world' ].forEach(addGenericGetHandler); 
```

# php - 是否可以 str_replace 或 preg_replace javascript调用的输出？

> ID：15011731
> 
> 赞同：0
> 
> 时间：2013-02-21T20:36:22.347
> 
> 标签：php, javascript, preg-replace, str-replace

我有一个页面，它使用 javascript 从第三方调用内容到页面中。我需要做的是 preg_replace 或 str_replace 输出以翻译几个单词（即一周中的几天从英语到西班牙语）。以下是 javascript 调用的示例：

```
<script language="javascript" src="http://www.example.com/?id=100&amp;site=1&amp;plugin=result_type1&amp;<?= $queryParams ?>">
</script> 
```

js 将结果输出到 html 表中。这甚至是可能的吗？我没有更多代码，因为我不知道如何开始这样的事情。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:44:53.867

大概您正在加载的脚本会将 HTML 元素注入您的页面。页面加载后，使用浏览器查看源代码以查看这些元素是哪些元素以及它们具有哪些属性。

实现您想要的一种方法是在您想要的元素的 innerHTML 属性上执行 str_replace 。您可以使用类似于`<body onload="doReplace()">`doReplace 是您编写的用于处理 str_replace 的函数来触发事件。

我假设您无法控制要注入的资源。如果这样做，最好在注入之前进行翻译，而不是在页面上进行。如果你不这样做，你也会冒着更改注入代码的风险，在没有通知的情况下破坏你的 doReplace 函数。

否则，您可以尝试仅下载脚本并根据需要进行更改。然后，您可以在需要自定义输出的页面上使用自定义脚本。

# java - 小程序 + Html5 视频标签

> ID：15011733
> 
> 赞同：1
> 
> 时间：2013-02-21T20:36:32.337
> 
> 标签：java, html, video, applet, video-streaming

我有下一个问题 我有一个 html 页面，它运行一个 applet 方法，然后恢复 applet 的结果 (byte[]) 并尝试将其放入 html5 视频标签中。小程序的任务是生成带有一些图像的视频文件（mp4）。然后，它将文件转换为 byte[] 并调用 javascript 方法发送数据：

```
File file = new File(path);

 FileInputStream fis = new FileInputStream(file);

        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        byte[] buf = new byte[1024];
        try {
            for (int readNum; (readNum = fis.read(buf)) != -1;) {
                bos.write(buf, 0, readNum); //no doubt here is 0
                //Writes len bytes from the specified byte array starting at offset off to this byte array output stream.

            }
        } catch (IOException ex) {
            JOptionPane.showMessageDialog(null,
                    "EXCEPTION SEND FILE :" + ex.toString());

        }
        data = bos.toByteArray();
        JSObject win = JSObject.getWindow(this);
        win.call("readFile", new Object[]{data}); 
```

javascript方法的代码是下一个：

```
function readFile(file_data)
    {
      var video = document.getElementById('localVideoPreview');
      video.src = window.URL.createObjectURL(file_data);
      video.play();
     } 
```

但是当我尝试从 file_data 生成 URL 时出现错误。似乎 file_data 的类型不正确。我不知道我做错了什么。有什么帮助吗？提前致谢

# android - 在 Eclipse 中调试时，Android 应用程序中出现 x509 nullpointerexception

> ID：15011735
> 
> 赞同：0
> 
> 时间：2013-02-21T20:36:34.607
> 
> 标签：android, eclipse

我一直在稳步调试应用程序时，突然在联系服务器登录时开始收到空指针异常。如果我在设备上独立运行应用程序，则不会出现此问题。堆栈跟踪如下。似乎有一些迹象表明这是 Eclipse 的一个问题，但我对它为什么突然开始发生感到困惑。其他人正在成功联系此服务器。我已经尝试从问题之前恢复到代码库。我已经重新启动了我的机器，我的设备。尝试了 Eclipse 3.7 和 3.8。似乎没有任何效果。除了在 IntelliJ 上旋转之外，我可以在 Eclipse 上尝试什么吗？

我在 LG Revolution 2.3.4 上看到了这个问题。在 Droid 2.2 或 HDMaxx 4.0.4 上没有问题

```
Thread [<11> pool-2-thread-1] (Suspended (exception NullPointerException))  
<VM does not provide monitor information>   
Class.forName(String, boolean, ClassLoader) line: 234   
Class.forName(String) line: 181 
X509Certificate.<clinit>() line: 60 
OpenSSLSocketImplWrapper(OpenSSLSocketImpl).verifyCertificateChain(byte[][], String) line: 658  
NativeCrypto.SSL_do_handshake(int, FileDescriptor, NativeCrypto$SSLHandshakeCallbacks, int, boolean) line: not available [native method]    
OpenSSLSocketImplWrapper(OpenSSLSocketImpl).startHandshake(boolean) line: 474   
OpenSSLSocketImplWrapper(OpenSSLSocketImpl).startHandshake() line: 328  
HttpConnection.setupSecureSocket(SSLSocketFactory, boolean) line: 185   
HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(boolean) line: 433 
HttpsURLConnectionImpl$HttpsEngine.makeConnection() line: 378   
HttpsURLConnectionImpl$HttpsEngine(HttpURLConnectionImpl).connect() line: 205   
HttpsURLConnectionImpl$HttpsEngine(HttpURLConnectionImpl).getOutputStream() line: 614   
HttpsURLConnectionImpl.getOutputStream() line: 268  
LoginRequest.performNetworkCall() line: 52  
LoginRequest(RevelationRequest).loadDataFromNetwork() line: 28  
LoginRequest(RevelationRequest).loadDataFromNetwork() line: 1   
CachedSpiceRequest.loadDataFromNetwork() line: 28   
RequestProcessor.processRequest(CachedSpiceRequest) line: 247   
RequestProcessor$2.run() line: 172  
Executors$RunnableAdapter.call() line: 444  
FutureTask$Sync.innerRun() line: 306    
FutureTask.run() line: 138  
ThreadPoolExecutor.runWorker(ThreadPoolExecutor$Worker) line: 1088  
ThreadPoolExecutor$Worker.run() line: 581   
Thread.run() line: 1019 
```

# string - DOS命令中的左字符串变量匹配？

> ID：15011740
> 
> 赞同：2
> 
> 时间：2013-02-21T20:37:23.000
> 
> 标签：string, batch-file, pattern-matching, dos

是否可以在 DOS 中进行字符串模式匹配？例如，我想做以下事情：

```
if "%USERNAME" == "abc*" (echo 1) 
```

我知道星号在这里不起作用，我找不到替代方法。有人有想法么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:55:34.530

尝试

```
if "%USERNAME:~0,3%" == "abc" (echo 1) 
```

这将`%USERNAME`从头开始为您的 3 个字符子串

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:42:54.853

如果字符串的其余部分无关紧要，您可以使用它：

```
set str=politic
echo.%str%
set str=%str:~0,4%
echo.%str% 
```

两个部分都留下了类似绳子的东西。

# ios - Facebook 和 Twitter 分享按钮停止工作

> ID：15011741
> 
> 赞同：0
> 
> 时间：2013-02-21T20:37:24.527
> 
> 标签：ios, xcode, facebook, button, share

最近我让它工作了，但现在它突然停止了。按钮被按下时什么都不做。代码甚至没有给出断点或错误。怎么了？

[下载项目 (3.2mb)](http://www.mediafire.com/?n5bj8npl8y369nr)

```
- (IBAction)ShareFB
{
    if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook])
    {
        slComposeViewController = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];
        [slComposeViewController addImage:[UIImage imageNamed:@"logo-carrito.png"]];
        [slComposeViewController addURL:[NSURL URLWithString:@"http://www.google.com"]];
        [self presentViewController:slComposeViewController animated:YES completion:NULL];
    }
    else {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"No FB Account" message:@"There are no FB account registered. Configure one" delegate:nil cancelButtonTitle:@"Dissmiss" otherButtonTitles:nil];
        [alert show];
    }
}

- (IBAction)ShareTW
{
    if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter])
    {
        slComposeViewController = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];
        [slComposeViewController addImage:[UIImage imageNamed:@"logo-carito.png"]];
        [slComposeViewController addURL:[NSURL URLWithString:@"http://www.google.com"]];
        [self presentViewController:slComposeViewController animated:YES completion:NULL];
    }
    else {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"No TW Account" message:@"There are no TW accounts registered. Configure one." delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
        [alert show];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:16:19.267

在您的故事板中，您的第一个场景的类设置为`ViewController`，但实际上它显然应该是您项目中包含的类之一，例如`Tab1_ViewController`。

# function - 将像素设置为特定值

> ID：15011743
> 
> 赞同：0
> 
> 时间：2013-02-21T20:37:29.237
> 
> 标签：function, matlab, call

我编写了这个函数，它将具有隶属度=`matlab`的像素的值设置为如下：`x``y``1``1`

```
function c = core(x, y)
        tolerance = 0.01;
        pixels = [];
        index = 1;
        for i=1:length(y)
            for j=1:length(y)
                if abs(y(i,j)-1) <= tolerance
                x(i,j) = 1;
                pixels(index) = x(i,j);
                end
            end
            end
            c = pixels;
       end 
```

由于我是从脚本调用这个函数，我怎样才能返回那些被设置为的像素`1`？或者，这里是否会以正确的方式返回原始图像，其中符合标准的像素设置为`1`.

Bur，在我继续之前，我没有看到图像中符合标准的像素设置为`1`. 不是我的像素设置`1`正确吗？

底线是我假设`core`代表那些隶属度等于 的像素`1`。而且，在我试图实现的算法中，我有以下行：

```
C1 = core(F) 
```

where`F`代表图像。

基于此，在`matlab`. 嗯，是的，在`matlab`这一行中可以简单地写成：

```
C.('C1') = core(x,y); 
```

但是，问题是，根据上面的信息，我的调用脚本会返回什么以及如何返回？

而且，是的，作为输出，我总是`1`进入`ans`. 这是为什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T20:56:44.033

首先，您在函数右侧传递的所有参数都被视为函数的本地参数，不会在外部更新。因此，要获取更新的图像，请将其返回到左侧。

其次，您的算法存在错误：

1-`for`循环不会扫描所有图像。

2-`index`变量永远不会更新。

下面的这个函数应该可以实现你想要的：

```
function [x,pixels] = core(y)
    tolerance = 0.01;
    pixels = [];
    index = 1;
    for i=1:size(y,1)
        for j=1:size(y,2)
            index = j+i*size(y,2);
            if abs(y(i,j)-1) <= tolerance
            x(i,j) = 1;
            pixels = [pixels index];
            end
        end
    end
end 
```

编辑：

一个更简单的方法来做到这一点，而无需循环：

```
tolerance = 0.01;
x = zeros(size(y));
x((abs(y)-1) <= tolerance) = 1;
pixels = find(x==1); 
```

# android - 3 ImageButtons onClick 打开相同的活动

> ID：15011744
> 
> 赞同：0
> 
> 时间：2013-02-21T20:37:31.120
> 
> 标签：android, android-activity, imagebutton

我有 3`ImageButton`应该打开不同的活动，但每次都会打开相同的活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:51:22.590

你为什么使用

```
BaseTabGroup parentActivity = (BaseTabGroup)getParent();
            parentActivity.startChildActivity("Engines", edit); 
```

只需使用

```
startActivity(intent); 
```

请参阅：http: [//developer.android.com/training/basics/firstapp/starting-activity.html](http://developer.android.com/training/basics/firstapp/starting-activity.html)

不过，您的问题也可能在布局内部。

# c++ - Eclipse (c++) 不运行程序

> ID：15011746
> 
> 赞同：1
> 
> 时间：2013-02-21T20:37:41.367
> 
> 标签：c++, eclipse, console, return

我正在尝试在 Eclipse 上使用 c++，我什至无法运行默认提供的 hello world 程序。

我正在使用 mingw g++ 编译器，该文件显然已成功编译。

但是当我尝试运行它（调试或发布版本）时，它只会在控制台上显示任何内容。在互联网上发现 eclipse 中有一个错误，在控制台上没有显示输出流。我决定重定向文件上的流。

该文件也是空的。

我在调试选项卡中注意到程序正在返回`-1073741515.`

难道我做错了什么？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-21T21:35:55.257

作为一般和不相关的建议。不要使用日食。使用 Emacs 作为编辑器并在其上找到 c++ 模式。一开始你会感到疲倦，但之后你会幸福地生活。

# android - 在整个地图上绘制多边形

> ID：15011748
> 
> 赞同：3
> 
> 时间：2013-02-21T20:37:49.483
> 
> 标签：android, google-maps, google-maps-android-api-2

我正在使用适用于 Android 的 Google Maps V2，我需要在整个地图上绘制一个多边形，然后在选定的城镇中添加一个洞。根据某些选项，这样做的目的是突出地图的特定区域。

我尝试在整个地图上绘制一个多边形，其边界如下：

```
 Arrays.asList(new LatLng(90, -180),
   new LatLng(-90, -180),
   new LatLng(-90, 180),
   new LatLng(90, 180),
   new LatLng(90, -180)); 
```

但是多边形不会被绘制到地图中。我尝试将边界缩小到较小的区域，并且多边形看起来没有问题。

如何用多边形覆盖整个地图？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T20:39:58.960

我应该与：

```
float delta = 0.1f;

List points = Arrays.asList(new LatLng(90, -180),

new LatLng(-90+delta, -180+delta),

new LatLng(-90+delta, 0),

new LatLng(-90+delta, 180-delta),

new LatLng(0, 180-delta),

new LatLng(90-delta, 180-delta),

new LatLng(90-delta, 0),

new LatLng(90-delta, -180+delta),

new LatLng(0,-180+delta));

PolygonOptions options = new PolygonOptions();

options.addAll(points);

options.fillColor(R.color.red_half_alpha); // 50% opacity red, for example #80FF0000

map.addPolygon(options); 
```

我希望你能看到这段代码的去向。它适用于 android v2 地图。

我认为浮点计算存在一些问题。另一点是，如果您非常仔细地观察俄罗斯和美国之间的关系（例如 LatLng(0,180)、LatLng(0,-180)），您很可能会看到一条非常细的线。

这是你的多边形。

PS：如果您在地图上看到漏洞，请提醒一下，它是如何为您服务的。我想很多人都有同样的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-19T09:22:07.330

试试用这个

```
 new PolygonOptions()
        .add(new LatLng(85,90), new LatLng(85,0.1),
             new LatLng(85,-90), new LatLng(85,-179.9),
             new LatLng(0,-179.9), new LatLng(-85,-179.9),
             new LatLng(-85,-90), new LatLng(-85,0.1),
             new LatLng(-85,90), new LatLng(-85,179.9),
             new LatLng(0,179.9), new LatLng(85,179.9)) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-21T20:41:35.720

阅读[PolygonOptions](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/PolygonOptions)，我认为您应该能够通过以下方式做到这一点：

```
List points = Arrays.asList(new LatLng(90, -180),
   new LatLng(-90, -180),
   new LatLng(-90, 180),
   new LatLng(90, 180),
   new LatLng(90, 180));
PolygonOptions options = new PolygonOptions();
options.addAll(points)
options.fillColor(#80FF0000); // 50% opacity red, for example
map.addPolygon(options); 
```

如果您没有这样做，则必须指定填充颜色。如果你这样做了，对不起，但我猜不出你没有发布的代码:)

# ibm-connections - Lotus Connections 3 SPI 文档对 IBM Connections 4 是否仍然有效？

> ID：15011750
> 
> 赞同：0
> 
> 时间：2013-02-21T20:37:59.570
> 
> 标签：ibm-connections, ibm-sbt

我注意到 Lotus Connections 3 wiki 中的产品文档比 Connections 4 wiki 中的更完整。例如，对于 Connections 4，Lotus Connections 3 中的[SPI 文档](http://www-10.lotus.com/ldd/lcwiki.nsf/xpDocViewer.xsp?lookupName=Lotus+Connections+3+documentation#action=openDocument&res_title=Lotus_Connections_SPIs_lc3&content=pdcontent)似乎完全缺失。

*   旧文件是否仍然有效？
*   是否有计划的文档更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:45:30.983

大卫，您在查看社交业务开发 wiki 上的文档吗？ [http://www-10.lotus.com/ldd/appdevwiki.nsf/xpDocViewer.xsp?lookupName=IBM+Connections+4.0+API+Documentation#action=openDocument&content=catcontent&ct=prodDoc](http://www-10.lotus.com/ldd/appdevwiki.nsf/xpDocViewer.xsp?lookupName=IBM+Connections+4.0+API+Documentation#action=openDocument&content=catcontent&ct=prodDoc)

# ruby-on-rails - jasmine not loading asset pipeline

> ID：15011751
> 
> 赞同：6
> 
> 时间：2013-02-21T20:38:03.817
> 
> 标签：ruby-on-rails, asset-pipeline, jasmine

I have a jasmine spec set that worked at some point in time for people that are not at my company anymore. I am trying to run

```
rake jasmine 
```

however, when the specs run they all fail. I am sure that the asset pipeline is not loading because I get errors like:

```
ReferenceError: jQuery is not defined 
```

this is my jasmine.yml

```
src_files:
  - 'app/assets/javascripts/application.js'

stylesheets:
  - 'app/assets/stylesheets/application.css'
  # - assets/application.css
  # - stylesheets/**/*.css

helpers:
  - 'helpers/**/*.js'

spec_files:
  - '**/*[sS]pec.js'

# src_dir
#
# Source directory path. Your src_files must be returned relative to this path. Will use root if left blank.
# Default: project root
#
# EXAMPLE:
#
# src_dir: public
#
# src_dir: app/assets

spec_dir: spec/javascripts 
```

This is my application.js

```
// This is a manifest file that'll be compiled into including all the files listed below.
// Add new JavaScript/Coffee code in separate files in this directory and they'll automatically
// be included in the compiled file accessible from http://example.com/assets/application.js
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
//= require jquery
//= require jquery-ui
//= require jquery_ujs
//= require jquery.tipTip
//= require jquery.endless-scroll
//= require jquery.groupedautocomplete
//= require jquery.waituntilexists
//= require jquery-ui-timepicker-addon
//= require vendor/jquery.tagsinput
//= require jquery.contextMenu
//= require moment
//= require application_init
//= require lib/behavior
//= require tooltip

//= require underscore
//= require backbone
//= require tent
//= require lib/backbone.store
//= require backbone_rails_sync
//= require backbone_datalink
//= require inflection
//= require haml
//= require jquery.toObject
//= require js2form
//= require form2js
//= require_tree ./backbone/models
//= require_tree ../templates
//= require ./lib/presenters/presenter
//= require table-fixed-header
//= require_tree . 
```

Does anyone have any suggestions

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-07T06:37:21.553

这有点像在黑暗中拍摄，但我在使用 Ruby 2.0 的 rails 3.2 应用程序时遇到了同样的问题。显然 Sprockets 没有解析 js/css 要求语句存在问题：

[https://github.com/sstephenson/sprockets/issues/352](https://github.com/sstephenson/sprockets/issues/352)

# github - 如何注销 github 网站？

> ID：15011758
> 
> 赞同：2
> 
> 时间：2013-02-21T20:38:45.733
> 
> 标签：github

这听起来像是一个荒谬的问题，但是我如何注销 github 网站呢？

除了删除 cookie。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:40:20.847

菜单栏右侧有一个小门图标，指向[https://github.com/logout](https://github.com/logout)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-08T18:32:53.347

点击有箭头的门。它在右上角。

![在此处输入图像描述](../Images/833e2ec769a28462919209ae0ce6430a.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-21T03:12:44.803

IE 浏览器不显示注销图形，但显示 LOGOUT 的 HOVER TEXT 在那里。尝试在顶部菜单栏上移动鼠标，在顶部什么都看不到的地方，你会看到注销悬停文本出现。
IE 不像其他浏览器那样做 BUTTON 元素。

# python - 将 Django 模板变量与模板标签进行比较

> ID：15011767
> 
> 赞同：0
> 
> 时间：2013-02-21T20:39:23.703
> 
> 标签：python, django, django-templates

我想比较 with 的结果，`{{ request.get_full_path }}`但`{% url "admin:index" %}` 我不知道它的语法。我试过

```
{% if request.get_full_path == {% url "admin:index" %} %}
{% if request.get_full_path == url "admin:index" %} 
```

但在这两种情况下我都明白了`TemplateSyntaxError`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:06:59.047

您可以使用此[模板标签片段](http://djangosnippets.org/snippets/545/)来捕获任何标签的输出。

将上述内容添加到您的一个应用程序中的模板标签库并加载后，您可以执行以下操作：

```
{% captureas admin_url %}{% url "admin:index" %}{% endcaptureas %}
{% if request.get_full_path == admin_url %} 
```

# jmeter - JMeter idle Threads/Users

> ID：15011768
> 
> 赞同：0
> 
> 时间：2013-02-21T20:39:26.133
> 
> 标签：jmeter

I have a practical Challenge:

I need to validate that a server-timeout appears after 5 seconds (as in a 400/500 response-code) under a JMeter loadtest with 100 threads running constantly and requesting a url simulataniously.

Is it possible to configure JMeter to idle/delay/keep running each thread/user for a custom period of time?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-26T08:45:30.660

您可以添加[运行时控制器](http://jmeter.apache.org/usermanual/component_reference.html#Runtime_Controller)，它实际上可以让您运行尽可能多的定义它：

> 所需的运行时间（以秒为单位）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-21T13:20:02.263

我认为您需要的是 Constant Timer 。阅读以下链接以了解更多信息。

[http://jmeter.apache.org/usermanual/component_reference.html#Constant_Timer](http://jmeter.apache.org/usermanual/component_reference.html#Constant_Timer)

这将帮助您暂停线程一段恒定的时间，然后再释放它以继续进行

# php - PHP 属性存在于类中

> ID：15011769
> 
> 赞同：1
> 
> 时间：2013-02-21T20:39:26.553
> 
> 标签：php, properties, static-members

嘿伙计们，我有一个奇怪的问题，`$this`我的代码没有被传递，我希望有人可以帮助我，结构如下：

```
Class 
{
    protected _foo = '';

    .........

    self::_setSessionsToProperties('_foo', array('access_token','instance_url'));

    ..........

    protected static function _setSessionsToProperties($property, $setter)
    {
        self::_validateApprovedSessions($setter);

        if (isset($this->$property) || property_exists($this, $property)) 
        {
            foreach ($setter as $set) { $this->$property->$set; }
        }

        return $this;
    } 
```

`Undefined variable: this`

为了让这个工作，虽然我必须实际**传递** `$this`一个参数字符串，这似乎非常违反直觉？

```
 self::_setSessionsToProperties($this, '_foo', array('access_token','instance_url'));

    ..........

    protected static function _setSessionsToProperties($this, $property, $setter) 
```

这里发生了什么？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:40:52.357

`$this`只存在于*对象上下文中*。由于您的类方法是`static`您没有对象。因此没有`$this`。使您的方法不是静态的并实例化一个对象。

另请参阅[如何不使用静力学破坏您的可测试性](http://kunststube.net/static/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T20:42:07.520

在几乎所有 OO 语言中，静态方法都存在于 $this 范围之外，这就是为什么无需初始化类的实例即可调用它们的原因。您要么必须传递它，要么将其作为静态变量存储在其他地方以便能够引用它。

# string - Mathematica Style Solution to String Parsing

> ID：15011770
> 
> 赞同：-2
> 
> 时间：2013-02-21T20:39:29.097
> 
> 标签：string, parsing, styles, wolfram-mathematica, cycle

I want to take a string of the form "(ABC)(DEF)" and translate adjacent pairs of letters into numbers, interpreting the letters inside parenthesis as cycles. From my example I would want to generate the table:

{{"AB", 1}, {"BC", 2}, {"CA", 3}, {"DE", 4}, {"EF", 5}, {"FD", 6}}

I could do this with a loop, but my limited knowledge of the 'Mathematica Style' of coding suggests that there is a better way to do this in Mathematica. How do I do this the Mathematica way? In general where can I learn about Mathematica style coding?

Edit: Changed my mind. I want to create a function, f, such that f["AB"] = 1, etc. but I don't think this will change the problem much.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:58:57.310

`1`给定输入“ab” ，这是一个返回的函数：

```
f["ab"] = 1 
```

在哪里可以了解 Mathematica 的编程方式？从文档、许多参考书、[Mathematica 堆栈交换站点](https://mathematica.stackexchange.com/?as=1)、Leonid Shifrin[对 Mathematica 编程的高级介绍](http://www.mathprogramming-intro.org)，还有许多其他地方。但最好的地方是你的键盘，你的手指和思想完全投入。

# c# - 从 WPF 中的不同类更改 XAML 对象的内容

> ID：15011772
> 
> 赞同：1
> 
> 时间：2013-02-21T20:39:32.603
> 
> 标签：c#, wpf, xaml

我需要在类中调用非静态函数，但问题是当我在另一个类中`MainWindow`创建该类的实例时，应用程序窗口停止启动。`MainWindow`

那么如何在不创建实例的情况下调用函数`MainWindow`呢？编辑标签的内容或 XAML 对象的任何其他属性。

一些例子会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:46:23.120

如果您的目标是更改 XAML 对象的内容或属性值，那么我建议您查看`DataBinding`MVVM。如果您使用`DataBinding`，则根本不需要关心 XAML 或`MainWindow`——您只需更改`DataContext`或 ViewModel 上的属性值，更改会自动反映在视图中（在本例中为`MainWindow`）。

多个类可以引用此对象（您的 ViewModel 或`DataContext`对象），并且可以更改属性并将这些更改反映在视图中。如果没有更清楚地了解您正在尝试做什么，就很难举出例子。也许如果您提供一些示例代码或展示您尝试过的内容，我可以使用它来创建一个示例。

有关 MVVM 和 DataBinding 的更多信息，您可以从[这里](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)开始，但那里有大量资源。

# php - 想要在动态生成的类别上创建切换效果

> ID：15011774
> 
> 赞同：1
> 
> 时间：2013-02-21T20:39:35.050
> 
> 标签：php, javascript, toggle

我一直在尝试在类别上创建切换效果，但它不起作用

有什么方法可以在动态生成 id 上创建切换效果...

我的代码是

```
 <!-- CATEGORIES -->
      <div id="tree_categories"> 

        <table cellpadding="0" cellspacing="0" width="100%">
          <tr> 
            <td width="{$width}%" valign="top">
        {foreach from=$array_categories item=v name=cat}
        {if !$v.parent_id}
        <a href="{if $seo_settings.enable_mod_rewrite}{seo->makeSearchCategoryLink p1=`$v.id` p2=`$v.name`}{else}{$live_site}/listings.php?category={$v.id}{/if}">
        <span class="catwrapper">
        {if $v.icon}<img src="{$live_site}/images/categories/{$v.icon}" alt="{$v.name}" />{/if}
        <span class="parent-left"><span class="parent-right" {if $v.icon}style="padding-left: 40px;"{/if}>
        {$v.name|escape:"html"}
        {if $v.ads && $appearance.categ_count_ads}({$v.ads}){/if}
        </span></span></span>
        </a>
        {if $smarty.foreach.cat.index!=$categories|@count-1}<ul>{/if}
        {else}
        <li {if $v.level}class="level{$v.level}"{/if}><a href="{if $seo_settings.enable_mod_rewrite}{seo->makeSearchCategoryLink p1=`$v.id` p2=`$v.name`}{else}{$live_site}/listings.php?category={$v.id}{/if}">{$v.name|escape:"html"} {if $v.ads && $appearance.categ_count_ads}({$v.ads}){/if}</a></li>
        {/if}
        {capture name=some_content assign=next_index}{$smarty.foreach.cat.index+1}{/capture}
        {if !$array_categories.$next_index.parent_id && $smarty.foreach.cat.index!=0 && $smarty.foreach.cat.index!=$categories|@count-1}</ul>{/if}

        {if $smarty.foreach.cat.index==$categories|@count-1 && $v.parent_id}
        </ul>
        {/if}

        {if $v.last && $smarty.foreach.cat.index!=$categories|@count-1}
        </td><td valign="top" width="{$width}%" align="left">
        {/if}
        {/foreach}
        </td>
          </tr>
        </table>
      </div>
      <!-- end CATEGORIES --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:47:56.193

一般来说，我会这样切换：

**CSS**：

```
ul.collapsible-list > li {
    /* put all of the styling for your expanded list items here. */
    display: block;
}
.collapsed { display: none; } 
```

**HTML**：

```
<ul class="collapsible-list">
  <li><!-- your content to toggle goes here --></li>
  <li class="collapsed">
     <!-- your content to toggle goes here -->
  </li>
  <li class="collapsed">
     <!-- your content to toggle goes here -->
  </li>
  <li class="collapsed">
     <!-- your content to toggle goes here -->
  </li>
</ul> 
```

**jQuery** :

```
$('.collapsible-list > li').on('click', function(ev) {
    var $el = $(el.target);
    $el.toggleClass('collapsed');
}); 
```

它变得非常流畅的原因是您允许 CSS（浏览器在内部优化渲染）进行所有切换。jQuery 非常简单——它只是在您单击其`LI`自身时添加或删除该类。

当然，这不是一个完整的解决方案——但它会给你一个例子来说明它是如何完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:54:03.053

您只需要为切换元素设置事件处理程序，如下所示：

```
$('.toggled_elements_class').on('click', function(){
  //some code that change class names, or other attributes on target elements, to realize needed visual effect
}); 
```

# rest - attribute added to MessageContext in request don't show up in exception chain

> ID：15011779
> 
> 赞同：1
> 
> 时间：2013-02-21T20:39:55.517
> 
> 标签：rest, jax-rs, apache-wink

I have a custom `RequestHandler` where I do some logic, and then add an attribute to the `MessageContext` so that I can retrieve it in all my `Resource`s (via the @Context annotation). This works great. On the response, I need to access this same attribute. I am able to retrieve it if my `Resource` method returns successfully, but not if an exception is thrown. Is it possible to get this same attributes on the `MessageContext` somehow, even when an exception is thrown? I use a custom `ExceptionMapper`, so I need to throw an exception if it doesn't complete properly.

# linux - 具有多个子目录的 Linux 内核模块的 Makefile

> ID：15011787
> 
> 赞同：3
> 
> 时间：2013-02-21T20:40:28.913
> 
> 标签：linux, makefile, linux-kernel

我需要有关内核模块的 Makefile 的帮助。即使是例子也会有很大帮助。

目前我的模块代码在多个目录下。让我们说

```
<MAIN-DIR> --- l2.c 
    <SUB-DIR1> --- hello.c
    <SUB-DIR2> --- bye.c 
```

对于上述情况，我如何编写我的 makefile。因为要构建 l2 模块，我需要 l2.o hello.o 和 bye.o。目前它们位于多个目录中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T01:00:16.627

如果你从内核树中构建一个模块，一个像下面这样的简单的 makefile 应该可以工作：

```
MODULE_NAME = mymodule

SRC     := foo.c src/bar.c

# Path to target Linux Kernel
KDIR        := $(shell pwd) # <--- Fill in with path to kernel you're compiling against

$(MODULE_NAME)-objs = $(SRC:.c=.o)

obj-m       := $(MODULE_NAME).o
PWD     := $(shell pwd)

EXTRA_CFLAGS := -I$(PWD)/src -I$(PWD)/include

all:
    $(MAKE) -C $(KDIR) M=$(PWD) modules 
```

从该行中可以看出`SRC :=`，您只需指定所有源文件的路径，包括子目录中的路径。顶层内核 makefile`KDIR`将负责编译。

关于内核构建系统和树外构建的更多信息可以在内核源文档中找到`Documentation/kbuild/modules.txt`。

# .net - System.Globalization.CultureInfo（反）序列化

> ID：15011788
> 
> 赞同：2
> 
> 时间：2013-02-21T20:40:32.230
> 
> 标签：.net, serialization, deserialization, cultureinfo, lcid

我需要将特定文化存储在文件中。序列化 LCID 整数是否足够，还是有损转换？Name、NativeName 还是 EnglishName 是首选？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T23:30:22.707

是的，这`LCID`足以重新创建`CultureInfo`.

例如：

```
new System.Globalization.CultureInfo(System.Globalization.CultureInfo.CurrentCulture.LCID) 
```

...将创建一个`CultureInfo`与当前相同的新...

您也可以使用该`Name`属性：

```
new System.Globalization.CultureInfo(System.Globalization.CultureInfo.CurrentCulture.Name) 
```

# javascript - Firefox 19 从 JavaScript 打印 PDF

> ID：15011799
> 
> 赞同：16
> 
> 时间：2013-02-21T20:40:55.330
> 
> 标签：javascript, firefox, pdf

我有一个“打印”按钮，它调用以下 JavaScript

```
window.frames.myPdfFrame.print(); 
```

其中“myPdfFrame”指的是带有 PDF 的 iframe。

在 Chrome 和 Firefox 18（及更低版本）中，这会按预期打开打印对话框，但从 Firefox 19 开始，我收到以下错误

```
Error: Permission denied to access property 'print' 
```

我认为这与使用[Firefox 19 发布的嵌入式 PDF 查看器](http://www.mozilla.org/en-US/firefox/19.0/releasenotes/)有关，而不是与 Adob​​e 插件有关。使用 PDF 插件工具栏中的打印图标可以按预期工作。

有没有办法从 Javascript 调用 Firefox 19 中的内联 PDF 上的打印对话框？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-30T08:54:11.753

我尝试了使用 Firefox 22**和 NoScript提供的**[JSFiddle 演示](http://jsfiddle.net/hytcX/3/)。有趣的是，当我第一次打开 fiddle 时，iframe 的内容被 NoScript 阻止了，但打印对话框却很容易弹出！我单击“确定”，然后我得到一个任务栏吐司，说文档*about.blank*已发送到打印机。果然，我检查了打印机，它吐出了一张漂亮的白页。没用...

 ***现在，在告诉 NoScript“暂时允许”PDF (irs.gov) 的域之后，我重现了这个错误：

```
Error: Permission denied to access property 'print' 
```

[这个另一个问题](https://stackoverflow.com/questions/6690598/permission-denied-to-access-property-in-iframe)让我想知道这是否是[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)的问题。所以我在我自己的网络服务器上测试了它，在同一台机器上托管了一个 PDF 文档。而且......没有骰子！

然后我在 IE 9 和 Chrome 中尝试了我的测试页面。它们*都显示*了打印对话框，但是当我打印文档时，在 IE 9 的情况下，它实际上是在打印 about:blank，而 Chrome 打印一个灰色的矩形，上面写着“正在加载”......看起来它正在打印整个页面，而不仅仅是 iframe 中的文档。

所以，我同意 Jason Sperske 的观点，这似乎是不可能的。

**更新**：[这个答案](https://stackoverflow.com/a/2495430/2067786)提供了一个“正常工作”的解决方案，但仅适用于[Fpdf 库](http://www.fpdf.org/)生成的 PHP 文件......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-01T17:11:46.460

在最新版本的 Firefox（自 19 起）上，您必须在`about:config`. 将`pdfjs.disabled`属性设置为`true`，您将看到使用您的脚本出现的打印窗口。

如果开始下载，请将`plugin.disable_full_page_plugin_for_types`属性设置为`application/pdf`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-06T06:12:44.143

请尝试以下代码，它正在工作：

```
window.frames.myPdfFrame.focus();
window.print(); 
```***

# node.js - 将 google-api-javascript-client 与 node.js 一起使用

> ID：15011803
> 
> 赞同：1
> 
> 时间：2013-02-21T20:41:12.963
> 
> 标签：node.js, google-api, google-api-client

Google 的 API 客户端 JS 库是：[https ://code.google.com/p/google-api-javascript-client/wiki/GettingStarted](https://code.google.com/p/google-api-javascript-client/wiki/GettingStarted)

我想知道是否有任何方法可以将它与 node.js 一起使用

（我正在编写一个使用谷歌日历 api 的小应用程序。我对 node.js 很陌生）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T14:23:37.297

Google 为其 API 提供了一个 node.js 客户端库：[https ://github.com/google/google-api-nodejs-client](https://github.com/google/google-api-nodejs-client)

```
var googleapis = require('googleapis');
googleapis.discover('calendar', 'v3').execute(function(err, client) {
  // authenticate and make requests here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-22T09:02:42.777

js 客户端支持[promise](http://googledevelopers.blogspot.com/2014/10/promises-in-google-apis-javascript.html)。虽然节点客户端没有，但[不会修复](https://github.com/google/google-api-nodejs-client/issues/197).

对我来说，这是一个很大的功能差异。有了 Promise，代码可以用生成器的方式编写，以避免回调地狱。

# unit-testing - 如何在 @component 对象中模拟 GrailsApplication 以进行单元测试

> ID：15011812
> 
> 赞同：0
> 
> 时间：2013-02-21T20:42:15.883
> 
> 标签：unit-testing, grails, groovy, grails-2.2

我有一个组件

```
@Component
class SomeComponent {

    @Autowired
    GrailsApplication grailsApplication

    String buildString(String someInfo) {
       return "${grailsApplication.config.my.string}${someInfo}"
    } 
} 
```

和一个单元测试

```
@TestMixin(ControllerUnitTestMixin)
class SomeComponent Tests {

@Test
void test() {
   SomeComponent component = new SomeComponent()

   component.grailsApplication = new Expando()
   component.grailsApplication.config = [config: [my: [string: 'FOO']]]

    assert component.buildString('BAR') == 'FOOBAR'
    }
} 
```

当我执行我的测试时，我得到了这个错误：

```
org.codehaus.groovy.runtime.typehandling.GroovyCastException: Cannot cast object '{}' with class 'groovy.util.Expando' to class 'org.codehaus.groovy.grails.commons.GrailsApplication' 
```

那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:54:04.703

这是我如何在不使用 def 的情况下修复它：

```
SomeComponent component = new SomeComponent(grailsApplication: grailsApplication)
component.grailsApplication.config.my.string = 'FOO' 
```

# c# - 我需要开发敏感数据传输/存储/加密系统的建议

> ID：15011814
> 
> 赞同：5
> 
> 时间：2013-02-21T20:42:26.130
> 
> 标签：c#, php, mysql, encryption, security

## 介绍

我目前正在从事一个项目，该项目涉及每天从 VisualFox Pro 数据库中提取数据（药房记录），并将其中的一些上传到 WordPress 网站，药房的客户可以安全地查看它。我想就我的软件的一般方法获得一些建议——我可以编写代码，但需要知道我是否走对了路。我正在编写 PC 软件（在 C#/.NET 4.5 中）和 PHP WordPress 插件。

## 问题一：加密

我打算使用的当前加密数据服务器端的过程是基于[这篇文章](http://i.amniels.com/mysql-database-encryption-using-public-private-keys)。总而言之，它提倡使用存储在服务器上的自己的公钥对每个单独用户的数据进行非对称加密。然后，用于解密此数据的私钥本身使用用户的密码进行对称加密并存储。这样，即使数据库被盗，也需要破解用户的密码哈希，甚至需要对每个用户的数据重复该过程。

作者自己指出的唯一弱点，也是我问题的重点，是当用户登录时，解密的密钥存储在会话存储中。文章建议的处理方式是限制用户登录的时间。我认为更好的解决方案是将该密钥存储在一个短暂的安全 cookie 中（当然整个过程是通过 HTTPS 进行的） . 这样，如果攻击者控制了用户的计算机并且可以读取他们的cookie，他们可能只需要输入密码并登录，而无需窃取数据库，而即使攻击者获得了对服务器的访问权限，他们也无法解密HTTPS 流量（或者可以吗？我不确定。）

**我应该使用安全 cookie 还是会话存储来临时存储解密的密钥？**

## 问题 2：存储

我还想解决的第二件事是如何存储数据——这更像是一个效率问题。由于每个用户都有自己的加密密钥，因此每个用户的记录必须单独存储。我不知道我是否应该为每个用户存储一个“块”数据，其中包含带有表示记录的对象数组的加密 JSON，或者我是否应该将记录存储在具有实际数据结构的表中，并加密每个数据字段与钥匙分开。

我倾向于将数据存储为一个块 - 在我看来，一次解密一大块数据似乎比数千个单独的字段更有效。此外，即使我以正确的结构存储数据，我仍然无法使用 MySQL 的 WHERE、ORDERBY 等，因为数据都是 BLOB。

**我应该将数据存储为每个用户的大块，还是分成不同的字段？**

## 问题3：转移

我从 DBF 文件中提取数据，本质上是做一个“差异”，我比较从前一天的数据中提取的当前数据，只上传已经改变的用户块（我不能只上传记录，因为我可能最终会将用户的数据存储在块中）。我还包括已删除用户的“删除”说明。这是因为数据库中有数十万条记录，总计超过 200mb，并且大小每天都在增加。

我目前的计划是将所有这些数据写入一个 JSON 文件，gzip 并将其上传到服务器。我的问题是，如何在确保数据安全的同时做到这一点？自然，上传将通过 HTTPS 进行，并且我有一个 API 密码，仅允许授权上传，但我主要关心的是如果服务器受到破坏，如何保护数据。我不希望攻击者在处理 JSON 文件时从服务器中获取它。我的一个想法是让服务器向我发送用户的公钥列表，并在上传之前在我的软件中执行加密。在我看来，这是保护这些数据的唯一方法。我可以加密整个 JSON 文件，可能使用 API 密钥或特殊密码，但如果攻击者可以直接访问解密文件，那就没有意义了 s 在服务器上处理。这是一个好的解决方案吗？

**我应该在客户端单独加密数据，还是有办法将其安全地传输到服务器并在那里加密？**

提前感谢您的任何答案，我很想听听以前处理过此类问题的人的意见。

注意：[交叉发布给*程序员*](https://softwareengineering.stackexchange.com/questions/187947/i-need-advice-developing-a-sensitive-data-transfer-storage-encryption-system)，请参阅评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T20:53:31.533

# 问题 1

## 加密

碰巧的是，我正在开发一个类似的系统来加密 Wordpress 评论中的个人详细信息（电子邮件、IP），这样如果服务器遭到入侵，数据库中的敏感数据仍然会被加密。在会话中存储非对称解密密钥对我来说是不可能的，因为这可能会将密钥留在服务器上，让攻击者在破坏它的同时获取。

因此，基于 SSL 证书的 cookie 是一种更好的方法——至少攻击者必须等待用户登录才能窃取他们的密钥。与此同时，某种绊线系统将是一个好主意，这样一旦系统受到破坏，用户就无法登录系统（从而将他们的密钥提供给等待的攻击者）。

正如您所说，加密记录（根据我的设计使用一个密钥，或者根据您的设计使用多个密钥）意味着搜索记录成为您必须远离数据库服务器的过程，这反过来意味着它将显着慢点。

您可以通过在速度和安全性之间进行权衡来缓解这种情况：某些字段可以被模糊化，然后不加密地存储。例如，如果您想搜索您的患者所在的位置，从他们的地址获取他们的（纬度，经度），对其应用随机偏移（例如在任一方向上的两个轴上最多 3 英里），然后存储结果坐标纯文本。然后可以在不解密的情况下完成与位置相关的近似计数查询。

## 缓解对客户端计算机的攻击

上面介绍了如何减轻对服务器的攻击，这是您面临的最大风险，因为您的所有记录都存储在那里。正如您正确指出的那样，对客户端计算机的攻击也是一个问题，如果他们是公众成员，那么可以假设他们的安全过程不存在。

在此基础上，您可以使用密码短语强化单个密码（完整给出），客户端需要从中选择三个随机字母（即特别没有完整给出）。这以两种方式优雅地抵御键盘记录器：首先使用下拉菜单，这更难窃听，即使用户使用键盘快捷键，他们也没有提供完整的短语。每次成功登录时，随机字母（如1、4、5）的索引都会被记录下来，并且很长一段时间内不再询问。显然，太多错误的答案会导致帐户被锁定，并需要通过电话或蜗牛邮件重置代码重新授权。

您可以使用的其他身份验证方法：每次输入正确密码时向用户发送一个额外的密码，或者（可能非常昂贵）根据网上银行使用身份验证设备。

## 存储很少/不存储识别信息

另一个安全提示是尽可能少地存储个人信息。如果您无法通过电子邮件立即重置密码，那么姓名、地址、电话号码和电子邮件——所有个人识别数据——可能都是不必要的。该个人信息可以单独存储在另一台服务器上的断开连接的数据库中，使用公共主键将它们链接在一起。（事实上​​，如果用户希望重置他们的密码，您可以简单地在他们的匿名用户记录中存储一个标志，并且药剂师可以在他们下次访问管理面板时在他们的防火墙机器上手动运行重置过程）。

# 问题2

您应该在一个 blob 中加密表格数据还是将其保留在每一列中？我在我的应用程序中也看过这个。对我来说，我将它存储在一个 blob 中，因为我的用例是搜索密集型的，并且每行有 N 个解密而不是一个解密使决策变得容易。也就是说，您可能更喜欢单独加密列的整洁性，并且有人可能会争辩说，如果腐败蔓延，将它们分开会给您更好的机会使某些行能够存活。

如果您决定存储在单个 blob 中，我将使用与此类似的格式（在非对称加密之前用换行符分隔的行）：

```
1.2      <-- version of this format, so I can add things in the future
key1=value1
key2=value2
... 
```

如果您有多个进程写入列，请确保在读取和写入之间锁定行，否则（如上所述）您可能会丢失一些数据。

正如您所说，这同样可以是 JSON，如果该格式更适合您。

# 问题 3

我对这个问题的理解是：鉴于您自己无法解密用户记录，您如何复制到未加密的离线副本？我在这里想知道您是否可以稍微放松一下安全限制，并在服务器上存储一个公共公钥，并单独记录使用该公共密钥加密的更改。这将填充一个应该定期清空的表（通过在远程安全机器上运行同步例程）；因此，与获取未加密的整个数据库相比，更改表对攻击者的价值将很小。

当然，相应的私钥应该在药剂师的计算机上，再次安全地从互联网防火墙。

这种设计的风险是攻击者用他/她自己的公钥替换服务器公钥，以便他们以后可以收集已经为他们有效加密的信息！然而，只要你在服务器上安装了trip-wire，就可以合理防御：如果触发了这个，web应用程序的动态部分不会写任何新的变化（实际上不会工作）完全），直到系统被扫描并确定是安全的。

# codeigniter - codeigniter 中的复杂连接

> ID：15011820
> 
> 赞同：0
> 
> 时间：2013-02-21T20:42:41.483
> 
> 标签：codeigniter, join

我希望你能帮助我，因为我的大脑现在正在流血：

具体解释一下：

在我的网站上，我有一个表格与。对决是两个图像之间的投票。

该表与包含 2 个字段：第一张图片为**id_pic1 ，第二张图片为****id_pic2**。

每个 vs 都链接到一个**评论**表（**id_versus**）和一个用户表（**id_versus**）。

最后一件事是：**每个 vs 上的每张图片都链接到表投票 (id_pic,id_versus)**。

我曾经使用 cakePhP，所以 contains 使查询变得容易，但现在，使用 CI，我的大脑卡在了冻结状态。

如果有人可以帮助我解决我应该提出的一般性问题，我将不胜感激。

提前致谢

编辑：这是 db 的简化视图：

**与** id_pic1 id_pic2 id_author

**用户** 编号

**图片** 编号

**评论** id_与 id_author

**投票** id_与 id_pic

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T07:01:14.277

这就是在 CI 中完成多个连接的方式，根据这个进行

```
 $this->db->select('aw.id,awt.title,aw.price,aw.email,aw.is_shop as star_shop,aw.video');
        $this->db->from('artworks aw');
        $this->db->join('artwork_translations awt', 'aw.id = awt.artwork_id');
        $this->db->join('languages l', 'l.id = awt.language_id');
        $this->db->where('l.code', $language_code);
        $this->db->where('awt.status', 1);
        $this->db->where('aw.artist_id', $artist_id);
        $this->db->order_by('aw.id DESC');

        $sub_categories = $this->db->get();

        return $sub_categories->result(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-18T17:45:21.817

您的表格布局似乎不完整或缺少信息。
这些表是如何相互连接的？

另外，您要选择哪些数据以及使用哪些参数？
a 的作者是否也是可以在用户表中找到的用户？

您想选择一个 vs (parameter = id_versus) 并从中选择所有数据吗？

```
function showDataFromVersus($versusToShow) {
    $this->db->select('*');                                  // select all data
    $this->db->from('versus');                               // get data from table versus
    $this->db->join('pics', 'pics.id = versus.id_pic1');     // get data pic2
    $this->db->join('pics', 'pics.id = versus.id.pic2');     // get data pic1
    $this->db->join('users', 'users.id = versus.id_author'); // get data versus author
    $this->db->join('comments', 'comments.id_versus = versus.id');  // select comments
    $this->db->join('users', 'users.id = comments.id_author');  // get data comment author
    $this->db->join('vote', 'vote.id_versus = versus.id');   // get votes
    $this->db->where('versus.id', $versusToShow);
} 
```

这个函数接受一个 vs id 并返回所有链接到它的数据。

对此的 MySQL 查询将是

```
SELECT *
    FROM versus
        JOIN pics ON pics.id = versus.id_pic1
        JOIN pics ON pics.id = versus.id_pic2
        JOIN users ON users.id = versus.id_author
        JOIN comments ON comment.id_versus = versus.id
        JOIN users ON users.id = comments.id_author
        JOIN vote ON vote.id_versus = versus.id
    WHERE versus.id = 1 
```

结果将包含很多列，我还没有测试 CodeIgniter 是否可以使用双列名称。
还会有很多“双”行。对于每条评论和每条投票，都会有一个具有相同 vs-data 的新行

```
| ------------- VERSUS --------------| - PIC1 - | - PIC2 - | - USERS - | --------- COMMENT --------- | ------ VOTE ------ |
| id | id_pic1 | id_pic2 | id_author | id | ... | id | ... | id | .... | id_versus | id_author | ... | id_versus | id_pic | 
```

# asp.net - 通过属性将对象公开给用户控件

> ID：15011821
> 
> 赞同：0
> 
> 时间：2013-02-21T20:42:44.760
> 
> 标签：asp.net, .net, vb.net

我正在尝试将页面中的标签公开给用户控件。所以我决定在我的用户控件中创建一个公共属性，然后在页面中设置该属性。

在我的用户控件中，我有这个公共属性：

```
Public Property lblTestLabel As Label 
```

然后我这样做：

```
lblTestLabel.Attributes.CssStyle.Add("Display", "inline") 
```

在包含用户控件的页面中，我这样做：

```
ucTestUserControl.lblTestLabel = lblRealLabel 
```

但我不断收到此错误：

```
Object reference not set to an instance of an object. 
```

在我尝试设置 CssStyle 的那一行。我知道该对象存在于页面中，但我认为该对象没有正确地暴露给用户控件。

关于如何正确执行此操作的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:27:52.447

您不能以这种方式调用方法。属性不是变量，它只是一个数据元素。

`lblTestLabel`不是标签的实例。您需要为属性定义一个底层变量来对应，然后调用该变量的 Add() 方法，而不是属性本身。

```
Dim _lblTestLabel As Label
_lblTestLabel = New Label   ' This goes in your constructor, not here
Public Property lblTestLabel As Label
    Get          
        _lblTestLabel.Attributes.CssStyle.Add("Display", "inline")
        return _lblTestLabel
    End Get
    Set (value As Label)
        _lblTestLabel = value
    End Set
End Property 
```

也就是说，该语句`ucTestUserControl.lblTestLabel = lblRealLabel`无论如何都会覆盖属性底层的标签，因此您的调用`.Add()`甚至无关紧要。

不过，这几乎都无关紧要，因为这里的主要问题是这是处理这种行为的一种*非常糟糕的方式。*您应该在这里使用事件和事件处理程序：让 UserControl 触发一个事件，让页面处理该事件并更新标签本身。

# ios - NSNetService 是否仅适用于 .local 域？

> ID：15011823
> 
> 赞同：2
> 
> 时间：2013-02-21T20:43:02.100
> 
> 标签：ios, macos, bonjour

我有一个代码[CocoaHTTPServer](https://github.com/robbiehanson/CocoaHTTPServer/blob/master/Core/HTTPServer.m)，它使用 Bonjour 发布服务。并且 tt 为此使用 NSNetService。

如果您定义域“.local”，它可以正常工作（在 OS X 和 iOS 上）。但是，如果您定义其他任何内容，它不会发布服务，也不会调用未发布服务器的委托。

我对此进行了调查并发现了以下信息。

来自[NSNetService 类](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNetService_Class/Reference/Reference.html)的文档：

> 此类和 NSNetServiceBrowser 类使用多播 DNS 将有关网络服务的信息传送到应用程序和从应用程序传出。

[来自Bonjour 域名](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/NetServices/Articles/domainnames.html)的文档

> 在 Bonjour 系统上，本地。用于指示应在本地 IP 网络上使用 IP 多播查询查找的名称。

我是否正确理解 NSNetService 类只能与 .local 域一起使用，而不能与广域 bonjour（不同的域）一起使用？

PS 如果我没有遗漏任何内容，我打算联系 Apple，因为只有一个正确值而其他所有值都不正确的参数很奇怪（并且没有通过任何错误报告）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-19T11:04:41.520

`NSNetService`确实适用于 . 以外的域`local.`。

在发布您的服务之前，请使用[NSNetServiceBrowser](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSNetServiceBrowser_Class/Reference/Reference.html#//apple_ref/occ/cl/NSNetServiceBrowser)并`- (void)searchForRegistrationDomains`找到合适的注册域。

Apple 的**NSNetServices 和 CFNetServices 编程指南**包含一个关于此的部分，包括示例代码：[Browsing for Domains](https://developer.apple.com/library/mac/documentation/Networking/Conceptual/NSNetServiceProgGuide/Articles/BrowsingForDomains.html#//apple_ref/doc/uid/TP30001275-SW7)。

# linux - 如何在bash中打印感叹号？

> ID：15011824
> 
> 赞同：10
> 
> 时间：2013-02-21T20:43:02.373
> 
> 标签：linux, bash, unix, scripting

我需要打印一个简单的脚本并将输出重定向到一个文件，但是当我这样做时：

```
printf "#!/bin/bash\ntouch /tmp/1234567890_$RUN" > /tmp/password-change-script_$RUN.sh 
```

我收到此错误：

bash: !/bin/bash\ntouch: 找不到事件

如果我避开感叹号：

```
printf "#\!/bin/bash\ntouch /tmp/1234567890_$RUN" > /tmp/password-change-script_$RUN.sh 
```

然后转义字符仍然存在于文件中。

```
cat /tmp/password-change-script_$RUN.sh
#\!/bin/bash
touch /tmp/1234567890_111 
```

顺便说一句，在这种特殊情况下，#!/bin/bash 必须在文件中。由于某种原因，执行脚本的二进制文件不会读取该文件。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-21T20:48:18.440

该`!`字符在双引号字符串中展开，但在单引号字符串中不展开。

```
printf '#!/bin/bash\ntouch /tmp/1234567890_'"$RUN" 
```

当它单独出现或出现在词尾时，它也不会被扩展；这不是那么干净，但是：

```
printf "#%c/bin/bash\ntouch /tmp/1234567890_$RUN" ! 
```

`$histchars`您还可以通过（临时）设置为空字符串来临时关闭历史记录替换；这将关闭特殊处理`!`：

```
histchars=
printf "#!/bin/bash\ntouch /tmp/1234567890_$RUN"
unset histchars 
```

或者您可以`printf`在脚本中执行命令，而不是以交互方式执行（默认情况下，历史替换仅对交互式 shell 启用）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-21T20:44:34.697

尝试这样做：

```
printf "\041" 
```

这是`!`字符的八进制 ASCII 表示

看

```
man ascii 
```

* * *

另一个解决方案：

```
(
    set +o histexpand 
    printf "!"
) 
```

（括号用于更改*子shell*中的终端设置，因此更改是临时的）

看

```
help set
set -o 
```

# php - 使用 PHP 设置表中的列数

> ID：15011825
> 
> 赞同：0
> 
> 时间：2013-02-21T20:43:05.350
> 
> 标签：php, html, html-table

我有一段代码使用 SimpleXMLElement 读取 XML 目录文件，并将该目录的包含产品打印到网站上的 css 样式表中。

该代码将每个产品彼此相邻输出。但是我只想连续展示 4 个产品。

因此我需要插入一些

```
<tr> </tr> 
```

数组中每 4（或 x）个产品后面的标签。

我该怎么做？我的代码如下：

```
echo '<table class="products">';

foreach (getProdutcsFromCatalog($grpName) as $product) {

                        $output = '

                        <td>
                            <h2>' .$product->title .'</h2>
                            <div class="img">
                                <img src="' .$product->img . '" height="150" width="100" class =""/>
                            </div>  
                            <div>
                                '.$product->description.'
                            </div>
                            </div>
                            <div class="price">
                                <b>
                                    '.$product->price . ' DKK' . ' 
                                </b>
                            </div>
                            <div class="addToCart">
                                <a href="#">Læg i kurv</a>
                            </div>
                        </td>   

                        ';

                        echo $output;
                    }

                echo '</table>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:47:31.570

`$i = 0;`在开始`foreach`循环之前初始化。然后改变你的

```
 echo $output;
} 
```

到：

```
 if( $i % 4 == 0 ) echo "<tr>";
    echo $output;
    if( $i % 4 == 3 ) echo "</tr>";
    $i++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:46:47.113

如果您只想要每行 4 个项目，我建议您首先循环遍历 XML 结构并将所有项目保存在一个数组中，然后保存到`array_chunk($items, 4)`数组中，然后循环遍历它并生成表。

# sql - DB2 SQL 计入多列

> ID：15011828
> 
> 赞同：0
> 
> 时间：2013-02-21T20:43:15.053
> 
> 标签：sql, db2

我有类似的情况：[Sql - count into multiple columns](https://stackoverflow.com/questions/11240357)

我会在这里再次分解

我有一个包含这些值的表：

```
 num | type
-----+------
 123 | 3
 123 | 2
 123 | 3
 123 | 2
 124 | 3
 124 | 1
 124 | 3
 124 | 3 
```

我想按`num`列分组，并有一列计算每种不同的类型。所以我会得到：

```
 num | 1 | 2 | 3
-----+---+---+---
 123 | 0 | 2 | 2
 124 | 1 | 0 | 3 
```

该问题的最佳解决方案是：

```
SELECT `num`,
    SUM(type = 1) as `1`, 
    SUM(type = 2) as `2`, 
    SUM(type = 3) as `3`
FROM `your_table`
GROUP BY `num` 
```

当我尝试这个时，我收到一条错误消息

> 在“LECT NUM, SUM(type”) 之后发现了意外的标记“=”。预期的标记可能包括：“CONCAT”。SQLSTATE=42601

有人可以指出我对 db2 的可行 sql 查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:47:41.607

另一个答案中的语法适用于 MySQL，您应该尝试以下使用该`CASE`语法的方法：

```
select num,
  sum(case when type = 1 then 1 else 0 end) Type1,
  sum(case when type = 2 then 1 else 0 end) Type2,
  sum(case when type = 3 then 1 else 0 end) Type3
from yourtable
group by num 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/8c38c/1)（SQL Server 演示）

# .net - 为什么将日期转换为字符串时会更改日期格式？

> ID：15011830
> 
> 赞同：0
> 
> 时间：2013-02-21T20:43:26.617
> 
> 标签：.net, sql, vb.net, date, .net-2.0

我正在使用 VB.net 构建 SQL 查询

```
dateFrom As Date ... '02/21/2013
sqlQuery.add(“ HAVING MIN(DATEADD(HOUR, 2, columnDate)) >= ” + myDate) 
```

MyDate 格式是“MM/dd/YYYY”（2013 年 2 月 21 日），但是当我添加到 sqlQuery 字符串时，我得到了这种格式“dd/MM/YYYY”（2013 年 2 月 21 日）。这会导致 SQL 查询失败

为什么日期转换为“ToString”时会改变日期格式？

注意事项

*   我不能在查询中使用参数
*   框架 2.0
*   SQL 服务器

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T20:47:13.493

> MyDate 格式为“dd/MM/YYYY”</p>

目前尚不清楚你的意思是什么，但我怀疑你`DateTime`总体上有点困惑。A`DateTime`没有格式，就像（说）an*一样*`int`。如果您`int`从十六进制解析然后将其转换为字符串，则默认情况下它将被格式化为十进制 - 该值*只是*一个数字。日期和时间的工作方式相同。

> 为什么日期转换为“ToString”时会更改日期格式？

它没有“改变”——它事先并不存在。

幸运的是，无论如何你都不应该这样做。相反，您应该使用参数化 SQL，并设置`myDate`成命令参数。您应该对SQL 命令中的*所有值执行此操作。*那样：

*   您无需担心这样的文本转换。
*   保护您免受[SQL 注入攻击](http://bobby-tables.com)
*   您将代码（SQL）与数据（值）分开

# wpf - 为什么切换到另一个 TabItem 后 ComboBox 的第一项被选中？

> ID：15011831
> 
> 赞同：0
> 
> 时间：2013-02-21T20:43:29.337
> 
> 标签：wpf, combobox, selection, tabcontrol, tabitem

我有一个`TabControl`与三个`TabItems`。在每一个`TabItems`都是一个`ComboBox`。`TabItems`如果我通过第一个条目切换`ComboBoxes`被选中。但我希望没有选择任何内容。怎么做？

以下是一些截图：

第一次调用表单后，没有选择任何内容 ![在此处输入图像描述](../Images/13692f157652bbd8519942e1a05b9e95.png)

切换到第二个选项卡后，组合框的第一个元素被选中 ![在此处输入图像描述](../Images/9a68f56e2191b6e0825808a753304d93.png)

更新：这是此示例的代码

```
 <Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Width="525" SizeToContent="Height">
<Grid>
    <TabControl>
        <TabItem Header="Test 1">
            <ComboBox>
                <ComboBoxItem>Test 1</ComboBoxItem>
                <ComboBoxItem>Test 2</ComboBoxItem>
            </ComboBox>
        </TabItem>
        <TabItem Header="Test 2">
            <ComboBox>
                <ComboBoxItem>Test 1</ComboBoxItem>
                <ComboBoxItem>Test 2</ComboBoxItem>
            </ComboBox>
        </TabItem>
        <TabItem Header="Test 3">
            <ComboBox>
                <ComboBoxItem>Test 1</ComboBoxItem>
                <ComboBoxItem>Test 2</ComboBoxItem>
            </ComboBox>
        </TabItem>
    </TabControl>
</Grid> 
```

没有约束力。Visual Studio Express 2010 中的一个全新项目。

这是背后的代码：

```
using System.Windows;
namespace WpfApplication1
{
   public partial class MainWindow : Window
   {
      public MainWindow()
      {
        InitializeComponent();
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:05:39.223

那么示例代码中没有错误。

这是代码吗？

尝试删除任何被选中的项目，或者如果有绑定说它给你一个答案。

![没有错误](../Images/d71f5dcadec2f78419feee74c567087b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T23:36:52.937

在您的帮助和漫长的网络之旅中，我现在知道，没有办法避免这种行为，tabitem 上的第一个可聚焦的孩子变得专注，而背后没有一些代码:(

谢谢大家的回答，特别是@makc 的建议，蓝色背景意味着组合框是集中的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T16:42:57.453

尝试将组合框设置`FocusVisualStyle`为`null`-

```
 <ComboBox FocusVisualStyle="{x:Null}">
                <ComboBoxItem>Test 1</ComboBoxItem>
                <ComboBoxItem>Test 2</ComboBoxItem>
            </ComboBox> 
```

# php - 更新重复密钥问题

> ID：15011833
> 
> 赞同：-1
> 
> 时间：2013-02-21T20:43:33.573
> 
> 标签：php, mysql, query-optimization

我正在努力做到这一点：

```
$sql = mysql_query("SELECT COUNT(fk_player_id) count FROM wr_year WHERE fk_player_id=$currplayer AND year=2013");
$row = mysql_fetch_assoc($sql);

if($row['count'] == 0){
   mysql_query("INSERT INTO wr_year (fk_player_id, year, points) VALUES ($currplayer, 2013, $points)");
} else {
   mysql_query("UPDATE wr_year SET points=points+$points WHERE fk_player_id=$currplayer AND year=2013");
} 
```

进入这个：

```
mysql_query("INSERT INTO wr_year (fk_player_id, year, points) VALUES ($currplayer, 2013, $points)
ON DUPLICATE KEY UPDATE points=points+$points"); 
```

但这行得通吗？我如何确保它仅在 fk_player_id 和 year 上检查 ON DUPLICATE，并且可以完成吗？

提前致谢 ;-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:46:51.100

`ON DUPLICATE KEY`检查索引违规以查看它是否应该插入或更新，因此您需要首先在要检查的两列上创建唯一索引；

```
CREATE UNIQUE INDEX uix_wr_year ON wr_year (fk_player_id, year); 
```

之后，如果表中已经存在相同的 fk_player_id/year 组合，它将改为更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:56:33.637

使用该`VALUES`功能。

试试这个

```
 INSERT INTO wr_year (fk_player_id, year, points) VALUES ($currplayer, 2013, $points)
     ON DUPLICATE KEY UPDATE points= VALUES(points+$points) 
```

见[http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

# java - 如果集合中的元素类型是接口类型，如何填充集合？（爪哇）

> ID：15011846
> 
> 赞同：0
> 
> 时间：2013-02-21T20:44:31.297
> 
> 标签：java, collections, interface

这是我之前参加的工作面试测试中的一个问题。我不知道为什么有人会想要这样做，或者是否有可能，但有人会如何填充这个集合？

```
Collection<MyLinks> links = null;    //Populate this variable

public interface MyLinks() {
    //Method headers only
} 
```

如果无法实例化 MyLinks 对象，如何填充此集合？这是一个技巧问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:48:00.917

*用实现*接口的对象填充集合。

```
public interface MyInterface {
  int getANumber();
}

public class RandomNumberGenerator implements MyInterface {
  public int getANumber() {
    return 4; // choosen by a fair dice roll
  }
}

Collection<MyInterface> collection = new ArrayList<MyInterface>();
collection.add(new RandomNumberGenerator()); 
```

提示：如果您需要随机数生成器，请不要复制代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T20:46:44.057

这样的集合可以填充其类实现该接口的任何对象。对象可以是不同的类（甚至是匿名类），只要这些类实现了该接口。

```
class ConcreteMyLinks implements MyLinks...
class ConcreteMyLinks2 implements MyLinks...

ConcreteMyLinks obj = new ConcreteMyLinks();
ConcreteMyLinks2 obj2 = new ConcreteMyLinks2();
collection.add(obj);
collection.add(obj2);
collection.add(new MyLinks() {  /* implement interface here */ }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T20:47:06.660

您创建一个实现接口的类，并用它填充它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T20:48:42.810

试试这个伙伴：

```
 links = new ArrayList<MyLinks>();
    links.add(new MyLinks() { }); 
```

祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T20:51:47.653

上面的解决方案都是正确的，你也可以使用匿名类：

```
MyInterface object = new MyInterface() {
   //here override interfaces' methods
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T20:52:11.100

1.  您可以创建实现该接口的具体类的实例并将其添加到集合中。

    ```
    collection.add(new MyConcreteLinks()); 
    ```

2.  您可以创建匿名类实例，例如：

    ```
    collection.add(new MyLinks() { /*overide mylinks method*/}); 
    ```

# javascript - 脚本仅在刷新后运行！有任何想法吗？

> ID：15011850
> 
> 赞同：0
> 
> 时间：2013-02-21T20:44:37.880
> 
> 标签：javascript, jquery, html

我有一个带有图像的页面。当有人单击图像时，我想打开此页面并显示单击的图像。但似乎脚本只在刷新后运行！

```
<body>
<img src="whatImg()" id="image"/> 
```

// 这是脚本

```
function whatImg(){
        var str = getUrlVars()["obj"];
        document.getElementById('image').src = str;}

function getUrlVars() {
        var vars = {};
        var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(m, key, value) {vars[key] = value;});
        return vars;
        }
            whatImg();

 </script> 
  </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:06:01.573

您要做的是`src`从脚本中更改属性。

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>
<img src="blank.gif" id="image"/>

<script>
    function whatImg(){
        var str = getUrlVars()["obj"];
        document.getElementById('image').src = str;
    }
    function getUrlVars() {
        var vars = {};
        var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(m, key, value) {vars[key] = value;});
        return vars;
    }
    whatImg();
</script>
</body>
</html> 
```

# android - 绘制到屏幕 - 需要能够缩放和捏合

> ID：15011851
> 
> 赞同：0
> 
> 时间：2013-02-21T20:44:44.980
> 
> 标签：android, scroll, android-view

我目前正在我的应用程序中绘制到屏幕上。用户可以绘制一个代表他们家的房间的矩形，但目前它们仅限于初始空间。

使屏幕简单地成为更大画布上的“窗口”的最佳方法是什么，用户可以在绘图时滚动、缩放等？（我很欣赏必须有一个“绘图”触摸模式和一个“移动”触摸模式）

此外，画布是一个自定义视图类：

```
class HomerView extends View { // the custom View for drawing on
    // set up Bitmap, canvas, path and paint
    private Bitmap myBitmap; // the initial image we turn into our canvas
    private Canvas myCanvas; // the canvas we are drawing on
    private Rect myRect; // the mathematical path of the lines we draw
    private Paint myBitmapPaint; // the paint we use to draw the bitmap

    // get the width of the entire tablet screen
    private int screenWidth = getContext().getResources()
            .getDisplayMetrics().widthPixels;
    // get the height of the entire tablet screen
    private int screenHeight = getContext().getResources()
            .getDisplayMetrics().heightPixels;

    public HomerView(Context context) { // constructor of HomerView
        super(context);
        myBitmap = Bitmap.createBitmap(screenWidth, screenHeight,
                Bitmap.Config.ARGB_8888); // set our drawable space - the bitmap which becomes the canvas we draw on
        myCanvas = new Canvas(myBitmap); // set our canvas to our bitmap which we just set up
        myRect = new Rect(); // make a new rect
        myBitmapPaint = new Paint(Paint.DITHER_FLAG); // set dither to ON in our saved drawing - gives better color interaction
    }

    protected void onDraw(Canvas canvas) { // method used when we want to draw something to our canvas
        canvas.drawColor(Color.TRANSPARENT); // sets canvas colour
        canvas.drawBitmap(myBitmap, 0, 0, myBitmapPaint); // save the canvas to bitmap - the numbers are the x, y coords we are drawing from
        canvas.drawRect(myRect, myPaint); // draw the rectangle that the user has drawn using the paint we set up
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) { // if screen size changes, alter the bitmap size
        super.onSizeChanged(w, h, oldw, oldh);
        /*myBitmap = Bitmap.createBitmap(screenWidth, screenHeight,
                Bitmap.Config.ARGB_8888);
        myCanvas = new Canvas(myBitmap);*/
    }

            public void drawApplianceIcon() {
        myCanvas.drawBitmap(bmp, iX - 50, iY - 50, myBitmapPaint);
        makeToast("Lamp Drawn To Canvas");
    }

    // these variables are needed in touch listening
    private int mX, mY, iX, iY; // current x,y and initial x,y
    private static final float TOUCH_TOLERANCE = 4;

private void touch_start {} // touch methods
private void touch_move {}
private void touch_up {} 
```

这在 onCreate 中声明如下：

```
 View drawingAreaView = new HomerView(this);
 setContentView(drawingAreaView); 
```

如何调整我的代码以使其成为可滚动窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:05:07.887

在视图初始化期间试试这个？

```
setHorizontalScrollBarEnabled(true);
setVerticalScrollBarEnabled(true); 
```

我猜你还需要[http://developer.android.com/reference/android/view/ScaleGestureDetector.html](http://developer.android.com/reference/android/view/ScaleGestureDetector.html)

And some kind of Viewport logic that holds all the locations.

Also found this.

[Android: Enable Scrollbars on Canvas-Based View](https://stackoverflow.com/questions/4869276/android-enable-scrollbars-on-canvas-based-view)

# javascript - 仅在窗口调整大小时绘制文本

> ID：15011857
> 
> 赞同：0
> 
> 时间：2013-02-21T20:44:55.263
> 
> 标签：javascript, css, html, html5-canvas

我有这段代码来创建我的 html 画布标题：

```
<script type="text/javascript">
    (function () {
        var canvas = document.getElementById('header-canvas'),
            context = canvas.getContext('2d');

        // resize the canvas to fill browser window dynamically
        window.addEventListener('resize', resizeCanvas, false);

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = 120;

            drawStuff();
        }
        resizeCanvas();

        function drawStuff() {
            var c = document.getElementById("header-canvas"),
                ctx = c.getContext("2d"),
                grd = ctx.createLinearGradient(0, 0, 0, c.height),
                x = c.width / 2;
            y = c.height / 2;

            grd.addColorStop(0, "#0ac5f4");
            grd.addColorStop(1, "#7ae0fa");

            ctx.fillStyle = grd;
            ctx.fillRect(0, 0, c.width, c.height);

            ctx.font = '30px LatoHL';
            ctx.textAlign = 'center';
            ctx.fillStyle = 'white';
            ctx.fillText('MACKENZIE GRAY', x, y);
        }
    })();
</script> 
```

但是我的文字只有在我重新调整窗口大小时才会出现......这个功能有什么问题？

编辑：我应该补充一点，渐变确实出现了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:49:43.630

这是因为`drawStuff()`仅在调用您的函数时才调用该函数`resizeCanvas`。 `resizeCanvas`当您的窗口中发生调整大小事件时正在运行（请参见行`window.addEventListener`：）

要解决此问题，只需`drawStuff()`在文档加载时运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:12:57.287

正如 Taylor Hayward 评论的那样，您可能正试图在画布完全初始化之前渲染文本。放置和`alert();`/或`console.log()`调用`drawStuff()`以查看确切的调用时间。

如果您发现它被提前调用，请尝试使用 jQuery `$(document).ready(...)`。

# php - php从表中选择错误

> ID：15011860
> 
> 赞同：0
> 
> 时间：2013-02-21T20:45:18.300
> 
> 标签：php, sql, message

我有个问题。

当我尝试使用此代码从表中选择数据时：

```
$sql = "SELECT * FROM users";
$result = mysql_query($sql);

while($rad = mysql_fetch_array($result))
{
    echo $rad['user'];
} 
```

有用。

当我使用基本相同的代码从另一个表中选择数据时，我得到一个错误。

```
$sql = "SELECT * FROM order";
$result = mysql_query($sql);

while($rad = mysql_fetch_array($result))
{
    echo $rad['url'];
} 
```

有人可以告诉我我在这里做错了什么。

这是我在运行第二个代码时收到的错误消息：

> 警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:47:20.570

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:48:00.480

# d3.js - 在 D3.js 中嵌套数据

> ID：15011865
> 
> 赞同：2
> 
> 时间：2013-02-21T20:45:39.393
> 
> 标签：d3.js

我正在尝试让自己熟悉 D3，并且很难以正确的格式获取数据。我有一个对象数组，每个对象中都有一个“日期”键，我正在尝试使用 d3.nest 按日期对它们进行分组，但甚至无法使示例正常工作（取自[https://github .com/mbostock/d3/wiki/Arrays](https://github.com/mbostock/d3/wiki/Arrays)）。我已将其淡化为基本要素，但代码直接取自 d3 wiki。

```
var yields = [{yield: 27.00, variety: "Manchuria", year: 1931, site: "University Farm"},
              {yield: 48.87, variety: "Manchuria", year: 1931, site: "Waseca"},
              {yield: 27.43, variety: "Manchuria", year: 1932, site: "Morris"}]

var nest = d3.nest()
    .key(function(d) { return d.year; })
    .entries(yields); 
```

根据 wiki，这应该按以下结构组织数据：

```
[{key: 1931, values: [
    {yield: 27.00, variety: "Manchuria", year: 1931, site: "University Farm"},
    {yield: 48.87, variety: "Manchuria", year: 1931, site: "Waseca"}]},
 {key: 1932, values: [
    {yield: 27.43, variety: "Manchuria", year: 1932, site: "Morris"}]}
] 
```

但是当使用 d3.nest 检查时，`console.dir(yields)`我得到了与使用 d3.nest 之前相同的平面结构。由于我什至无法从文档中获取示例，因此我不知道接下来要尝试什么。帮助一个菜鸟？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T20:56:48.663

你想看看`nest`，没有`yields`。`yields`是你传入的，`nest`也是你输出的。`yields`没有改变。

d3 wiki 可以以更易读的方式编写内容：

```
var nest = d3.nest()
    .key(function(d) { return d.year; })

var nested = nest.entries(yields); 
```

现在，`nest`是一个对象，您可以将其用于具有年份键的类似数据，并且`nested`是 one 的输出`yields`。该`key`函数返回嵌套对象本身，但`entries`返回新的嵌套数据。

# php - PHP日历问题

> ID：15011867
> 
> 赞同：0
> 
> 时间：2013-02-21T20:45:46.287
> 
> 标签：php, object

我尝试创建的日历有一个小问题。它没有正确输出我的数组，有什么想法吗？这些数字没有出现在日期上。

这是我的主要输出文件：

```
<?php 

require('date_class.php');

?>

<!DOCTYPE html>
<html>
    <head>
        <title>Calendar || That sorta works</title>
    </head>
    <body>
        <h1>Calendar</h1>

        <?php echo $date_class->get_day(); ?>
        <?php echo $date_class->get_month(); ?>
        <?php echo $date_class->get_year(); ?>

        <?php
            $weekdays = array('Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun');
        ?>

        <?php foreach($dates as $month => $weeks) { ?>
        <table>
            <tr>
                <th><?php echo implode('</th><th>', $weekdays); ?></th>
            </tr>
            <?php foreach($weeks as $week => $days){ ?>
            <tr>
                <?php foreach($weekdays as $day){ ?>
                <td>
                    <?php echo isset($days[$day]) ? $days[$day] : '&nbsp'; ?>
                </td>               
                <?php } ?>
            </tr>
            <?php } ?>
        </table>
        <?php } ?>
    </body>
</html> 
```

这是我的类文件：

```
<?php

class Date_class{

    /* Sets our vars within the class */
    public $day;
    public $month;
    public $year;
    public $dates;
    public $syear;

    /* Sets day */
    public function set_day($day){
        $this->day = $day;
    }

    /* Sets month */
    public function set_month($month){
        $this->month = $month;
    }

    /* Sets year */
    public function set_year($year){
        $this->year = $year;
    }

    /* Sets date */
    public function set_date($month, $year){
        $this->date = $day . $month . $year;
    }

    /* Sets dates for set year */
    public function set_all_dates(){
        $this->dates = $dates;
    }

    /* Gets day */
    public function get_day(){
        return $this->day;
    }

    /* Gets month */
    public function get_month(){
        return $this->month;
    }

    /* Gets year */
    public function get_year(){
        return $this->year;
    }

    /* Returns dates for year */
    public function get_all_dates($year){

        $dates = array();

        for($i = 1; $i <= 366; $i++){
            $month = date('m', mktime(0,0,0,0,$i,$year));
            $wk = date('W', mktime(0,0,0,0,$i,$year));
            $wkDay = date('D', mktime(0,0,0,0,$i,$year));
            $day = date('d', mktime(0,0,0,0,$i,$year));

            $dates[$month][$wk][$day] = $wkDay;
        }

        return $dates;
    }

}

/* Sets current day as var */
$day = date("d");

/* Sets current month as var */
$month = date("m");

/* Sets current year as var */
$year = date("Y");

/* Creates class as object */
$date_class = new Date_class();

/* Passes our gregorian variables \m/ into our calendar object */
$date_class->set_day($day);
$date_class->set_month($month);
$date_class->set_year($year);

/* Sets calendar year */
$dates = $date_class->get_all_dates($year); 
```

# python - 使用 str.index() 时在 python 中出现“字符缓冲区对象”错误

> ID：15011868
> 
> 赞同：0
> 
> 时间：2013-02-21T20:45:46.983
> 
> 标签：python, string, indexing

我正在尝试对字符串进行排序，但我不断收到错误消息：

TypeError：期望一个字符缓冲区对象

这是我的代码：

```
 if number.index(i) in guess and not number.index(i) == guess.index(i):
            replace(guess.index(i),'COW')

        if number.index(i) == guess.index(i):
            replace(guess.index(i),'BULL') 
```

我该如何解决？

# c++ - 使用 gnu coreutils 在 C++ 中查找包含警卫错别字

> ID：15011869
> 
> 赞同：0
> 
> 时间：2013-02-21T20:45:52.850
> 
> 标签：c++, grep, include-guards, gnu-coreutils

下面是一个 C++ 包含保护的错字。两者都应该阅读`_MYFILE_H_`。

```
#ifndef _MYFILE_H_
#define _MYFLIE_H_ 
```

您如何建议使用 GNU coreutils（例如 grep、awk）在一堆头文件中搜索这样的错字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T21:14:26.997

你可以使用`awk`：

```
{
  if ($1 == "#ifndef") { was_ifdef = 1; def = $2 }
  else if ($1 == "#define" && was_ifdef) 
    { 
      if ($2 != def)   printf("Mismatch in %s: expected %s found %s\n", FILENAME, def, $2);
    }
  else was_ifdef = 0;
} 
```

可能有更聪明的方法可以做到这一点，但这（对我来说）非常清楚和容易。

注意：如果文件包含类似的内容，这将显示“误报”

```
#ifndef FOO_DEFINED
typedef int foo;
#define FOO_DEFINED 
#endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T21:03:19.173

`grep`本身在这里不起作用，因为正则表达式的功能不足以匹配您描述的字符串集。

具体来说，表单的所有字符串的语言

```
#ifndef X
#define Y 
```

其中`X`≠`Y`不是常规语言。您可以通过使用 Myhill-Nerode 定理来证明这一点（因为`#ifndef X`用于不同选择的任何两个形式的字符串都`X`属于可区分关系的不同等价类）。结果，没有办法写出可以匹配这种形式的字符串的正则表达式，而且由于`grep`使用的是纯数学正则表达式，所以没有办法用它`grep`来解决这个问题。

抱歉，结果为阴性，但我希望这会有所帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T21:05:53.797

多个 sed 命令可以解决问题。

```
for FILENAME in ./*.h; do
     [[ $(sed -n '1p' "$FILENAME" | sed -e 's/#ifndef //') != $(sed -n '2p' "$FILENAME" | sed -e 's/#define //') ]] && echo "$FILENAME"
end 
```

该实现的问题在于，防护上方可能没有版权标头。

而且我很确定这可以写得更简洁。

# coq - Coq - 如何显示函数的第一个参数正在减少？

> ID：15011870
> 
> 赞同：2
> 
> 时间：2013-02-21T20:45:56.660
> 
> 标签：coq

我正在学习[这个](http://www.cis.upenn.edu/~bcpierce/sf/Basics.html#lab39)Coq 教程，但我坚持最后的练习之一。我为自然数的二进制表示定义了一个数据类型，现在我想将自然数转换为这种表示：

```
Inductive bin : Type :=
  | BO : bin
  | TO : bin -> bin
  | T1 : bin -> bin. 
```

我的第一个天真的方法是这样的：

```
Fixpoint divmod_2 (n : nat) :=
  match n with
  | O => (O, 0)
  | S O => (O, 1)
  | S (S n') => match (divmod_2 n') with
                | (q, u') => ((S q), u')
                end
  end.

Fixpoint to_bin (n : nat) : bin :=
  match n with
  | O => BO
  | S n' => match divmod_2 n' with
            | (q, 0) => TO (to_bin q)
            | (q, 1) => T1 (to_bin q)
            | (_, _) => BO
            end
  end. 
```

Coq 停留在`to_bin`说的定义上：

```
Error:
Recursive definition of to_bin is ill-formed.
In environment
to_bin : nat -> bin
n : nat
n' : nat
q : nat
n0 : nat
Recursive call to to_bin has principal argument equal to "q" instead of
"n'". 
```

**所以这里的问题是：我该如何修复这个`to_bin`功能？
我是否必须为[这里](http://adam.chlipala.net/cpdt/html/GeneralRec.html)描述的有根据的递归提供证明？
我认为有一个更简单的解决方案，因为它是一个新手教程？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T21:45:46.290

我认为最简单的解决方案是首先为二元自然数定义一个后继函数，然后使用它来转换一元自然数的后继函数。

# java - eclipse - 当 EditText 为空时，android 应用程序崩溃

> ID：15011876
> 
> 赞同：0
> 
> 时间：2013-02-21T20:46:15.263
> 
> 标签：java, android, android-edittext

再会。我在 Eclipse 中为 android 编写了应用程序，当 EditText 为空时应用程序崩溃。我尝试了很多方法，但它不起作用。当我输入它并且 EditText 是空的时，它会崩溃。对不起我的英语不好。这是我的代码的一部分：

```
public class MainActivity extends Activity implements OnClickListener {

TextView mnozstvo;
TextView percento;
TextView hmotnost;
TextView vysledok1;
TextView vysledok2;
TextView text;
RadioButton muz1;
RadioButton zena1;
Button vysledok;
EditText coo;
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

text = (TextView)this.findViewById(R.id.text);

mnozstvo = (TextView)this.findViewById(R.id.dl);

percento = (TextView)this.findViewById(R.id.per);

hmotnost = (TextView)this.findViewById(R.id.kg);

vysledok1 = (TextView)this.findViewById(R.id.krv);

vysledok2 = (TextView)this.findViewById(R.id.dych);

muz1 = (RadioButton)this.findViewById(R.id.muz);

zena1 = (RadioButton)this.findViewById(R.id.zena);

vysledok = (Button)this.findViewById(R.id.vysledok);

vysledok.setOnClickListener(this);

}
.................
public void convertDollarsToEuros() {
double val = Double.parseDouble(mnozstvo.getText().toString());
double val1 = Double.parseDouble(percento.getText().toString());
double val2 = Double.parseDouble(hmotnost.getText().toString());

vysledok1.setText(Double.toString((val*val1*0.8)/(val2*0.68)));
vysledok2.setText(Double.toString(((val*val1*0.8)/(val2*0.68))/(2.1)));

text.setText(Double.toString(((val*val1*0.8)/(val2*0.68))*6.6164));

}

public void convertEurosToDollars() {

double val = Double.parseDouble(mnozstvo.getText().toString());
double val1 = Double.parseDouble(percento.getText().toString());
double val2 = Double.parseDouble(hmotnost.getText().toString());

vysledok1.setText(Double.toString((val*val1*0.8)/(val2*0.55)));
vysledok2.setText(Double.toString(((val*val1*0.8)/(val2*0.55))/(2.1)));
text.setText(Double.toString(((val*val1*0.8)/(val2*0.55))*6.6164)); 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:58:14.903

`Double.parseDouble()`将引发 NumberFormatException。

但是，您可以在尝试解析字符串之前检查字符串的长度，而不是等待异常发生然后处理它。

您的代码应如下所示：

```
public void convertEurosToDollars() {
    double val = 0;
    double val1= 0;
    double val2= 0;
    if (mnozstvo.getText().length() > 0 ) {
        val = Double.parseDouble(mnozstvo.getText().toString());
    }
    if (percento.getText().length() > 0 ) {
        val2 = Double.parseDouble(percento.getText().toString());
    }
    if (hmotnost.getText().length() > 0 ) {
        val3 = Double.parseDouble(hmotnost.getText().toString());
    }       

    vysledok1.setText(Double.toString((val*val1*0.8)/(val2*0.55)));
    vysledok2.setText(Double.toString(((val*val1*0.8)/(val2*0.55))/(2.1)));
    text.setText(Double.toString(((val*val1*0.8)/(val2*0.55))*6.6164));
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:52:48.420

[http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html#parseDouble(java.lang.String)](http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html#parseDouble(java.lang.String))

parseDouble 将不高兴给出*null*或*""*

# jquery-ui - jQuery UI Sortable 在 IE 中有点古怪。jQuery UI 的演示在 Chrome 中运行良好，但在 IE 中却很古怪。有任何想法吗？

> ID：15011878
> 
> 赞同：1
> 
> 时间：2013-02-21T20:46:16.443
> 
> 标签：jquery-ui, internet-explorer, jquery-ui-sortable

这是我的脚本...这在 Chrome 中运行良好，但是当我尝试在 IE 中移动可排序项目时，它会跳到屏幕顶部。

```
<script type="text/javascript" language="javascript">
$(function() 
{
   $("#sortable tbody.content").sortable({ 
      handle: ".sortablehandle", 
      placeholder: "ui-state-highlight" 
   });
   $("#sortable tbody.content").disableSelection();
});

function chkTForm() 
{
   var tString = " ";
   var tArray = $("#sortable tbody.content").sortable("toArray");

   for (var i = 0; i < tArray.length; i++) {
      tString += tArray[i] + " ";
   }
} 
</script> 
```

这是我的 HTML。这是我的代码的简单摘要。代码实际上是动态的。

```
<table bgcolor='#FFFFFF' width='100%' id='sortable' cellpadding='5' cellspacing='3'  border='1'>
<tbody class='content'>
<tr id='1'>
   <td class='sortablehandle'>
      <strong>Song 1 Title</strong>
      <blockquote>Song 1 Description</blockquote>
   </td>
</tr>
<tr id='2'>
   <td class='sortablehandle'>
      <strong>Song 2 Title</strong>
      <blockquote>Song 2 Description</blockquote>
   </td>
</tr>
<tr id='3'>
   <td class='sortablehandle'>
      <strong>Song 3 Title</strong>
      <blockquote>Song 3 Description</blockquote>
   </td>
</tr>
</tbody>
</table> 
```

# c++ - 如何将指针从一个程序发送到另一个程序？

> ID：15011882
> 
> 赞同：-1
> 
> 时间：2013-02-21T20:46:28.047
> 
> 标签：c++, c, windows

我有一个程序可以创建对象“图表”并用数据填充它们。之后，我尝试将指向这些对象的指针发送到 diagram.exe，以便它绘制图表。我使用 _spawnv，并且 diagram.exe 获得的指针与我发送的指针不同。我做错了什么？有没有更合适的方法呢？提前致谢。

//这是调用diagram.exe的程序

```
#include<conio.h>
#include<math.h>
#include<process.h>
#include<iostream>
using std::cout;
using std::endl;

int main()
{
    Diagram** diagrams = new Diagram*[2];
    diagrams[0] = new Diagram(1001, "sin(x)");
    diagrams[1] = new Diagram(150, "atan(x)");
    diagrams[2] = NULL;

    double x = -2.0;
    for(int i = 0; i < 1001; i++)
    {
        diagrams[0]->points[i].x = x;
        diagrams[0]->points[i].y = sin(x);
        diagrams[0]->points[i].flag = true;
        diagrams[0]->points[i].radius = 4;

        diagrams[1]->points[i].x = x;
        diagrams[1]->points[i].y = atan(x);
        diagrams[1]->points[i].flag = true;
        diagrams[1]->points[i].radius = 5;

        x += 0.004;
    }

    cout << "CallDiagram.exe: diagrams: " << (void*)diagrams << endl;

    char* args[3] = {"diagram.exe", (char*)diagrams, NULL};
    _spawnv(_P_WAIT, "..\\..\\diagram\\Debug\\diagram.exe", args);

    _getch();

    delete diagrams[0];
    delete diagrams[1];
    delete [] diagrams;

    return 0;
} 
```

//图表.cpp

```
#include "diagram.h"
#include "DrawDiagram.h"

int main(int argc, char* argv[])
{
    if(argc <= 1)
    {
        cout << "\ndiagram.exe: No arguments!" << endl;
        return 1;
    }

    Diagram** diagrams = (Diagram**)argv[1];//NULL;
    cout << "diagram.exe: diagrams: " << (void*)diagrams << endl; 
```

![在此处输入图像描述](../Images/d6594b6b408fbf0dbee6c525cf3c44e8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:55:03.977

您不能将指针从一个程序发送到另一个程序。您可以创建一些共享内存，您的两个应用程序都可以打开它，并使用它来存储您想要共享的数据。

在 Windows 上，你可以[`CreateFileMapping`](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa366537%28v=vs.85%29.aspx)用来创建这样一个共享内存，而第二个应用程序用来[`OpenFileMapping`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366791%28v=vs.85%29.aspx)在另一端获取它。

请注意，这并不比在文件中发送数据更容易，因为在另一部分尝试使用它之前，您需要确保数据已同步并完全写入共享内存。

# razor - 如何在 servicestack razor MVC 中使用 DELETE 动词

> ID：15011884
> 
> 赞同：1
> 
> 时间：2013-02-21T20:46:46.487
> 
> 标签：razor, servicestack, http-delete

我想将 DELETE HTTP 动词与 MVC 剃须刀一起使用，但找不到这样做的方法。我尝试使用表单

```
@foreach (var result in Model.Results)
{
  <li>
    <form action="@result.DeleteUrl" method="POST">
      <input name="X-HTTP-Method-Override" type="hidden" value="DELETE" />
      <input type="submit" value="Delete"/>
    </form>)
  </li>
}

[Route("/results/{Id}", "POST,DELETE")]
  public class Result
  {
    public string Id { get; set; }

    public string DeleteUrl
    {
      get
      {
        return "/results/{0}".Fmt(Id);
      }
    }

    public Result() { }
    public Result(string id)
    {
      Id = id;
    }
  }

  public class ResultsService : Service
  {
    public object Delete(Result request)
    {
      // TODO: Never called!
      return null;
    }
  } 
```

这仍然不会在我的服务上调用我的 Delete 回调。我已经看到[http://razor-console.servicestack.net/rockstars](http://razor-console.servicestack.net/rockstars)示例使用带有删除 url 的 GET 来删除其项目！POST 工作正常，但我想使用 DELETE。

谢谢，

马丁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:41:45.080

我在 ServiceStack Google Group 中询问过这个问题。[https://groups.google.com/forum/?fromgroups=#!topic/servicestack/HY-dCjgq2Pw](https://groups.google.com/forum/?fromgroups=#!topic/servicestack/HY-dCjgq2Pw)

ServiceStack 目前似乎不支持您在表单中尝试执行的操作。

# html - 记住砖块放在 html 5 画布上的位置

> ID：15011886
> 
> 赞同：0
> 
> 时间：2013-02-21T20:46:47.300
> 
> 标签：html, canvas, collision-detection

我正在尝试制作我的第一个 html5 画布游戏，到目前为止已经想出了这个，您可以使用左、右和下箭头键。

你可以在这里看到代码，

[http://jsfiddle.net/ShaShads/EWC5B/](http://jsfiddle.net/ShaShads/EWC5B/)

我考虑过使用某种数组和网格，但我真的不知道它是否可行？

```
var someArray = []; 
```

然后使用数组来存储块，但对于碰撞检测我真的不知道！

我碰到了一个颠簸，不知道如何开始让砖块到达底部后留在屏幕上，然后记住砖块的碰撞以便砖块可以堆叠？我不是要求给我所有的答案，我可以研究什么来帮助我到达那里就足够了，谢谢。

这是我的第一次游戏，如果有很多错误，请告诉我，以便我改进，再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:28:23.243

## 屏幕底部

要测试对象是否在屏幕底部，只需简单测试：

```
If obj.y >= (canvas.height - object.height) then don't increase obj y position. 
```

## 盒子堆叠

为了让你的盒子堆叠起来，在每个循环中，你需要检查一个特定的盒子是否与另一个盒子碰撞：

```
for (var i=0; i<boxes.length; i++) {
    var boxA = boxes[i];

    for (var j=0; j<boxes.length; j++) {
        var boxB = boxes[j];

        if (boxA collides with boxB) don't increase boxA y position 
    }
} 
```

请注意，这是非常低效的，但对于您的第一场比赛就足够了。如需更有效的方法，请尝试此[链接](http://buildnewgames.com/broad-phase-collision-detection/)。

* * *

这就是它背后的理论。这该怎么做？好吧，如果您有管理盒子的好方法，您可以让您的生活更轻松。

例如，您可以有一个具有 x 和 y 位置以及高度和宽度的框对象。您还可以给它一个 isMoving 属性，该属性将用于确定盒子是堆叠/在地板上还是仍在运动中。

这种方法几乎等同于“记住”，因为每个盒子对象都会跟踪它自己的位置。

将这些框对象存储在一个数组中，以便您可以轻松地遍历您的框。

# dojo - mvc.dojox.repeat

> ID：15011891
> 
> 赞同：2
> 
> 时间：2013-02-21T20:47:03.083
> 
> 标签：dojo

使用 dojox.mvc.Repeat 时，如何使用索引值？

如果我使用#{this.index}，它将在该索引位置提供对子对象的引用。我不需要对子对象的引用，但我想使用索引值。

在下面的示例中，我需要将序列号显示为索引值。

```
 <div data-dojo-type="dojox/mvc/Repeat" 
         data-dojo-props="exprchar: '#' children: accountsList">
        <div data-dojo-type="dojox.mvc.Group" data-dojo-props="target: dojox.mvc.at('rel:', '#{this.index}')">  
          <div>Serial No: </div><div data-dojo-type="dojox.mvc.Output" data-dojo-props="value: at('rel:', this.index)"></div>
          <div>Account type: </div><div data-dojo-type="dojox.mvc.Output" data-dojo-props="value: at('rel:','accountType')"></div>
          <div>Account number: </div><div data-dojo-type="dojox.mvc.Output" data-dojo-props="value: at('rel:','accountNumber')"></div>
        </div>
    </div> 
```

# c - 试图从二进制文件中读取数字（fread，fwrite）

> ID：15011892
> 
> 赞同：0
> 
> 时间：2013-02-21T20:47:06.310
> 
> 标签：c, fwrite, fread

我正在尝试将数字写入二进制文件，然后将它们读回。

但是当我输入超过 13 个数字时，程序卡住并且不显示结果。

这是我的代码：

```
#include<stdio.h>
#include<stdlib.h>

int main()
{
FILE *fp;

int  a[100],
     b[100],
     i,n;

fp=fopen("temp.dat", "w+b");

printf("Enter N: \n");
scanf("%d",&n);

for(i=0;i<n;i++){
    printf("Enter (%d) number \n",i+1);
    scanf("%d",&a[i]);
}

    fwrite(a, sizeof(a), n , fp);
    rewind(fp);
    fread(b, sizeof(b), n , fp);

printf("Results \n");
for (i = 0; i < n; i++)
    printf("%d \n", b[i]);

fclose(fp);
system("pause");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:49:13.990

这：

```
fread(b, sizeof(b), n , fp); 
```

读取 数组中`sizeof(b) * n` 的字节，但只有字节。`b``b``sizeof b`

你的`fwrite`电话也有类似的问题。

建议你再看一遍`fread`和`fwrite`函数的手册。

# php - 显示多级递归创建的数组

> ID：15011894
> 
> 赞同：0
> 
> 时间：2013-02-21T20:47:06.363
> 
> 标签：php, arrays, recursion

我创建了一个数组，它包含多个级别的“子”数组。

```
$this->project_tasks: Array
(
[0] => Array
    (
        [person_name] => User 1
        [reports_to_id] => 
        [task_id] => 1123
        [task_name] => Main Task
        [sub_task_id] => Array
            (
                [0] => Array
                    (
                        [person_name] => User 1
                        [reports_to_id] => 1123
                        [task_id] => 1124
                        [task_name] => sub Task 1-1
                        [sub_task_id] => Array
                            (
                                [0] => Array
                                    (
                                        [person_name] => User 1
                                        [reports_to_id] => 1124
                                        [task_id] => 1125
                                        [task_name] => sub Task 1-1-1

                                    )

                            )

                    )

                [1] => Array
                    (
                        [person_name] => User 1
                        [reports_to_id] => 1123
                        [task_id] => 1127
                        [task_name] => sub Task 1-2
                    )

            )

    )

[1] => Array
    (
        [person_name] => User 1
        [reports_to_id] => 
        [task_id] => 1126
        [task_name] => Main Task 2
    )

) 
```

创建数组没有问题，当前的问题是我如何迭代整个数据集以使其显示如下：

```
1123 - Main Task
  1124 - sub Task 1-1
    1125 - sub Task 1-1-1
  1127 - sub Task 1-2
  ...
1126 - Main Task 2
  ...
etc... 
```

我找到了 array_walk_recursive() 但它不会做包含数组的键。此外，数组结构必须不关心递归的“深度”。可能是10+级，没关系。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:50:28.867

试试这个代码：

```
function customRecursiveWalk($array,$level){
    $size = count($array);

    for ($i=0;$i<$size;$i++) {

        for ($j=0;$j<$level;$j++)
            echo "&nbsp;&nbsp;"; //Print the indentation level

        //Print the current task id and the task name
        echo($array[$i]['task_id'] ." - ".$array[$i]['task_name']);
        echo '<br/>';

        //Call the recursive walk for the child
        customRecursiveWalk($array[$i]['sub_task_id'],$level+1);
    }
}

customRecursiveWalk($this->project_tasks,0); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-22T20:04:21.343

我不知道完整的用例，但似乎一个简单的递归函数就可以解决问题。我已经使用 ul/li 来建立多个级别，但这当然不是必需的——例如，我还包含了一个函数，该函数将为您提供按顺序列出的任务的平面数组。

一、HTML版本：

```
function listTasks($list, $level=0) {
    print '<li>'.$list['task_id'].' - '.$list['task_name'];
    if (array_key_exists('sub_task_id', $list)) {
        print '<br><ul>';
        foreach ($list['sub_task_id'] as $subtasks) {
            listTasks($subtasks, $level+1);
        }
        print '</ul>';
    }
    print '</li>';
}
print '<ul>';
foreach ($a as $tasks) {
    listTasks($tasks, 1);
}
print '</ul>'; 
```

样本输出：

```
1123 - Main Task
    1124 - sub Task 1-1
        1125 - sub Task 1-1-1
    1127 - sub Task 1-2
1126 - Main Task 2 
```

生成一个平面数组：

```
function listTasks($list, &$output, $level=0) {
    $output[] = array(
        'id'=>$list['task_id'],
        'name'=>$list['task_name'],
        'level'=>$level
    );
    if (array_key_exists('sub_task_id', $list)) {
        foreach ($list['sub_task_id'] as $subtasks) {
            listTasks($subtasks, $output, $level+1);
        }
    }
}
$output = array();
foreach ($a as $tasks) {
    listTasks($tasks, $output);
} 
```

输出：

```
Array
(
    [0] => Array
        (
            [id] => 1123
            [name] => Main Task
            [level] => 0
        )    
    [1] => Array
        (
            [id] => 1124
            [name] => sub Task 1-1
            [level] => 1
        )    
    [2] => Array
        (
            [id] => 1125
            [name] => sub Task 1-1-1
            [level] => 2
        )    
    [3] => Array
        (
            [id] => 1127
            [name] => sub Task 1-2
            [level] => 1
        )    
    [4] => Array
        (
            [id] => 1126
            [name] => Main Task 2
            [level] => 0
        )    
) 
```

# delphi - 如何知道我是否引用了正确的组件？

> ID：15011897
> 
> 赞同：3
> 
> 时间：2013-02-21T20:47:16.577
> 
> 标签：delphi, custom-component

**概述**

我重写了一些从 TXPStyleMenuItem 继承的过程，这样我可以在使用 TActionMainMenuBar 时更改菜单的外观。

例子：

```
 TMyXPStyleMenuItem = class(TXPStyleMenuItem)
  protected
    procedure DrawBackground(var PaintRect: TRect); override;
  end; 
```

我创建了自己的组件，该组件派生自 TActionMainMenuBar，并在 GetControlClass 方法中将其设置`var ControlClass: TCustomActionControlClass`为 TMyXPStyleMenuItem。

到目前为止，我所拥有的一切运行良好，尽管显然比上面的例子更完整——为了问题的目的，我尽可能地简短和简单。

**样式器组件**

我创建了一个非可视样式器组件，它基本上只是一堆已发布的属性，这个样式器组件可以分配给我的一些控件，在本例中是我的下降 TActionMainMenuBar。

当我的控件分配了样式器组件时，它会读取属性的值，然后根据这些值进行绘制。如果未分配样式器组件，那么我只需使用默认值来决定控件的绘制方式。

一个简单的示例来自我的一个自定义 TEdit，我可以根据分配的样式器值更改颜色：

```
TMyEdit = class(TCustomEdit)
private
  FStyler: TMyStyler;
public
  constructor Create(AOwner: TComponent); override;
  destructor Destroy; override;
end;

if Assigned(FStyler) then
begin
  Color := FStyler.Color;
end; 
```

**问题**

我面临的问题是`TMyXPStyleMenuItem = class(TXPStyleMenuItem)`.

我需要读取我的样式器组件的值，但是因为 TMyXPStyleMenuItem 实际上不是我的菜单组件的一部分，所以我无法知道从哪里来`FStyler`，例如它被分配给我的 TActionMainMenuBar 的哪个实例？

通常 FStyler 从我的菜单类中设置如下：

```
private
  FStyler: TMyStyler;
  procedure SetStyler(const Value: TMyStyler);
published
  property Styler: TMyStyler read FStyler write SetStyler;

..

procedure TMyMenu.SetStyler(const Value: TMyStyler);
begin
  if Value <> FStyler  then
  begin
    FStyler := Value;
  end;
end; 
```

但是那些程序`TMyXPStyleMenuItem`从不知道上述内容。

我不能在覆盖的过程中包含一个新参数，因为它不会工作，因为声明与基类不同，例如：

```
procedure DrawBackground(var PaintRect: TRect; AStyler: TMyStyler); override; 
```

**几乎拥有它**

我得到的最接近的是在我的菜单组件的单元中，我在实现部分上方创建了一个全局变量：

```
var
  FStyler: TMyStyler;

implementation 
```

然后在 overidded DrawBackground 过程中我这样做了：

```
procedure TMyXPStyleMenuItem.DrawBackground(var PaintRect: TRect);

  procedure _DrawBackground(AStyler: TMyStyler);
  begin
    // handle all the painting from here
    // using the values from AStyler.
  end;

begin
  if Assigned(FStyler) then
    _DrawBackground(FStyler);
end; 
```

就像我以为我可以正常工作一样，我很快发现它不是。一旦我有一个二级菜单，或者另一个表单上的菜单，它就会混淆应该使用哪些样式器值绘制哪个菜单。这是因为理论上我的菜单组件的任何实例都将使用全局 FStyler 变量。

我认为我可以做的另一件事是使用重载指令标记过程，这可以让我添加额外的参数，但是我仍然不知道我是否引用了正确的菜单组件。

因为我基本上仍然熟悉组件编写等，如果我忽略了一些完全明显的东西，请原谅我。如果它很简单，那么我完全错过了它 - 老实说，这让我现在有点困惑！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T22:01:30.227

使用该`Menu`属性（在 中声明`TCustomMenuItem`，它是您班级的祖父母）来访问菜单样式器，如下所示：

```
procedure TMyXPStyleMenuItem.DrawBackground(var PaintRect: TRect);
var
  Styler: TMyStyler;
begin
  if Menu is TMyActionMainMenuBar then
    Styler := TMyActionMainMenuBar(Menu).Styler
  else
    Styler := nil;
  if Assigned(Styler) then
    DrawStyledBackground
  else
    DrawDefaultBackground;
end; 
```

您可以重构代码以添加 GetMenuStyler 方法：

```
function TMyXPStyleMenuItem.GetMenuStyler: TMyStyler;
begin
  if Menu is TMyActionMainMenuBar then
    Result := TMyActionMainMenuBar(Menu).Styler
  else
    Result := nil;
end;

procedure TMyXPStyleMenuItem.DrawBackground(var PaintRect: TRect);
var
  Styler: TMyStyler;
begin
  Styler := GetMenuStyler;
  if Assigned(Styler) then
    DrawStyledBackground
  else
    DrawDefaultBackground;
end;

procedure TMyXPStyleMenuItem.OtherDrawMethod(var PaintRect: TRect);
var
  Styler: TMyStyler;
begin
  Styler := GetMenuStyler;
  if Assigned(Styler) then
   ...;
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T10:39:16.500

我在使用 jachguate 的答案时遇到了问题，其中`GetStyler`方法中的以下行从未被触发：

```
function TMyXPStyleMenuItem.GetMenuStyler: TMyStyler;
begin
  if Menu is TMyActionMainMenuBar then //< never hit
    Result := TMyActionMainMenuBar(Menu).Styler
  else
    Result := nil;
end; 
```

这显然会导致其余代码出现问题，因为从未找到我的自定义派生菜单。

`Menu`正如 jachguate 的回答中所指出的，我对属性进行了一些测试和调试，以确定类名以查看它是否是`TMyActionMainMenuBar`，但它不是 - 它是`TXPStylePopupMenu`。

所以我需要找出我怎样才能让这门课成为`TMyActionMainMenuBar`.

我通过尝试一些不同的事情找到了解决方案，这就是我发现的：

```
function TMyXPStyleMenuItem.GetStyler: TMyStyler;
begin
  if Menu.RootMenu is TMyActionMainMenuBar then
    Result := TMyActionMainMenuBar(Menu.RootMenu).Styler
  else
    Result := nil;
end; 
```

它的关键是`Menu.RootMenu`，它告诉我们使用了自定义菜单栏。

# sql-server-2008 - 将列名发送到过程并将值减一

> ID：15011898
> 
> 赞同：0
> 
> 时间：2013-02-21T20:47:16.133
> 
> 标签：sql-server-2008, stored-procedures

我需要制定一个程序，每次执行某个项目时将其库存减少一个。问题来自于想用旧的方式来做，似乎想不出任何其他的方法。这是我现在写的代码：

```
CREATE PROCEDURE REDUCESTOCK
@cod_ag numeric(3), //Agency code
@tipo_stock char(1), //Stock to be altered (Merchandising or Artifact)
@producto varchar(5) //Name of the product (Column name)
AS
BEGIN
IF(@tipo_stock='A')
    UPDATE JS_ELECTRODOMESTICO
    SET @producto=@producto-1
    WHERE cod_ag=@cod_ag
ELSE
    PRINT 'error'
END
GO 
```

我收到一个错误，因为我当然无法将 varchar 转换为 int。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:09:39.360

您是否尝试在“producto”参数中指定列名？如果是这样，您将需要构建一个“动态 SQL”字符串并执行它...

```
IF(@tipo_stock='A')
  declare @sqlcmd varchar(max);
  set @sqlcmd = 'UPDATE JS_ELECTRODOMESTICO SET '
    +@producto+'='+@producto+'-1 WHERE cod_ag='+@cod_ag;
  exec (@sqlcmd); 
```

# ios - 改变框架的背景

> ID：15011902
> 
> 赞同：0
> 
> 时间：2013-02-21T20:47:37.577
> 
> 标签：ios, objective-c, uiview, frame

我有一个“框架中的框架”场景。主屏幕内部有一个 600x600 的区域。我想做的只是为 600x600 区域着色，这样我就可以看到我在哪里工作。我尝试过使用`self.backgroundColor = [UIColor whiteColor];`，但它会为整个屏幕着色，而不仅仅是 600x600 区域。

为 600x600 区域的背景着色的最佳方法是什么？

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame: CGRectMake(84, 0, 600, 600)];
    if (self) {
        //initialization code
        tileArray = [[NSMutableArray alloc]initWithCapacity: 9];

        tile1 = [[TileView alloc]
                 initWithFrame:CGRectMake(100, 100, 128, 128)
                 withImageNamed:@"Yellow1.png"];

        [self addSubview:tile1];

        int x = [self frame].size.width;
        int y = [self frame].size.width;
        NSLog(@" Width: %i. Height: %i.", x,y);
    }
    return self;
} 
```

# php - 将常用功能分组到一个类中是一种好习惯吗？

> ID：15011904
> 
> 赞同：1
> 
> 时间：2013-02-21T20:47:44.457
> 
> 标签：php, static

我正在开发一个系统，我必须重新设计一次，从程序 ajax 文件到调用 OOP 类的 ajax 文件。

在我第一次开发类时，每个类都有一个方法，这些方法与 ajax 文件以程序方式执行的操作相同，但在我只想重新调用它们时使用其他可能有用的方法。

然后我遇到了一个问题：我开始使用继承，直到我意识到如果我需要两个或更多类，那将是一场彻底的灾难。我怎么修？我正在创建包含我可能需要的常用函数的静态类，然后我从 ajax 类中以静态方式使用单个方法调用它们。这是我刚刚创建的静态类的示例：

静态类：

```
<?php

    class InstitutionFunctions
    {
        public static $Statement;

        public static function InstitutionExists($InstitutionId = -1)
        {
            self :: $Statement->prepare('SELECT COUNT(Id) FROM institutions WHERE Id = ?');
            self :: $Statement->bind_param('i', $InstitutionId);
            self :: $Statement->bind_result($InstitutionCount);
            self :: $Statement->execute();
            self :: $Statement->fetch();

            if($InstitutionCount > 0)
                return true;

            return false;
        }

        public static function BlockInstitutionOnly($InstitutionId = -1, $BlockValue = 1)
        {
            self :: $Statement->prepare('UPDATE institutions SET Blocked = ? WHERE Id = ?');
            self :: $Statement->bind_param('ii', $BlockValue, $InstitutionId);
            self :: $Statement->execute();
        }

        public static function BlockInstitutionStudents($InstitutionId = -1, $BlockValue = 1)
        {
            self :: $Statement->prepare('UPDATE classroom SET Blocked = ? WHERE Institution = ? AND Rank = '. STUDENT);
            self :: $Statement->bind_param('ii', $BlockValue, $InstitutionId);
            self :: $Statement->execute();
        }

        public static function Create($InstitutionName = '')
        {
            self :: $Statement->prepare('INSERT INTO institutions (Name) VALUES (?)');
            self :: $Statement->bind_param('s', $InstitutionName);
            self :: $Statement->execute();
        }

        public static function GetInstitutionIdByName($InstitutionName = '')
        {
            self :: $Statement->prepare('SELECT Id FROM institutions WHERE Name = ?');
            self :: $Statement->bind_param('s', $InstitutionName);
            self :: $Statement->bind_result($InstitutionId);
            self :: $Statement->execute();
            self :: $Statement->fetch();

            return $InstitutionId;
        }

        public static function InstitutionHasAssignments($InstitutionId = -1)
        {
            self :: $Statement->prepare('SELECT COUNT(Institution) FROM assignments WHERE Institution = ?');
            self :: $Statement->bind_param('i', $InstitutionId);
            self :: $Statement->bind_result($AssignmentCount);
            self :: $Statement->execute();
            self :: $Statement->fetch();

            if($AssignmentCount > 0)
                return true;

            return false;
        }

        public static function Delete($InstitutionId = -1)
        {
            self :: $Statement->prepare('DELETE FROM institutions WHERE Id = ?');
            self :: $Statement->bind_param('i', $InstitutionId);
            self :: $Statement->execute();
        }

        public static function GetInstitutionBlockValue($InstitutionId = -1)
        {
            self :: $Statement->prepare('SELECT Blocked FROM institutions WHERE Id = ?');
            self :: $Statement->bind_param('i', $InstitutionId);
            self :: $Statement->bind_result($BlockValue);
            self :: $Statement->execute();
            self :: $Statement->fetch();

            return $BlockValue;
        }
    }

?> 
```

然后 ajax 类这样调用它：

```
<?php

    class BlockInstitution
    {
        public $User;
        public $InstitutionId;
        public $BlockValue;
        public $Error;
        public $ErrorN;

        public function __construct($User, $InstitutionId = -1, $BlockValue = '1')
        {
            $this->User = $User;
            $this->InstitutionId = $InstitutionId;
            $this->BlockValue = $BlockValue;
        }

        public function ValidateAndBlock()
        {
            if(!$this->User->SessionExist)
            {
                $this->Error = 'El proceso se cancel&oacute; porque tu sesi&oacute;n ha sido cerrada.';
                $this->ErrorN = 1;

                return false;
            }

            if($this->User->Session['Rank'] != ADMIN)
            {
                $this->Error = 'No est&aacute;s autorizado para realizar esta acci&oacute;n.';
                $this->ErrorN = 2;

                return false;
            }

            if(!InstitutionFunctions :: InstitutionExists($this->InstitutionId))
            {
                $this->Error = 'Esta instituci&oacute;n no existe.';
                $this->ErrorN = 3;

                return false;
            }

            InstitutionFunctions :: BlockInstitutionOnly($this->InstitutionId, $this->BlockValue);
            InstitutionFunctions :: BlockInstitutionStudents($this->InstitutionId, $this->BlockValue);

            $this->Error = '';
            $this->ErrorN = -1;

            return true;
        }
    }

?> 
```

我想知道我这样做是否正确，我在某处读到不推荐使用静态方法，因为它们很难测试，我想知道这是否也是我的情况。

否则，如果我只是将它们分成单个函数会更好吗？我知道当我包含静态类时会使用更多的 CPU，但我正在节省内存，因为我没有创建任何实例。

我只是想寻找一种更有条理的工作方式，这就是为什么我喜欢使用 OOP 而不是使用程序的原因之一，但众所周知，OOP 可以占用更多的 CPU / 内存。谢谢，我会等待你的意见！

# vector - 向量的 Clojure 通用“替换”函数

> ID：15011907
> 
> 赞同：0
> 
> 时间：2013-02-21T20:47:48.323
> 
> 标签：vector, clojure, replace

我想知道如何在**Clojure**中，如果传递一个**符号名称**和一个**向量**，来替换所述项目。

例如，我想替换以下任何实例：

```
[:not :symbolName] 
```

和

```
(not symbolName) 
```

所以：

```
[ [:p] [:not :q] [:not :r] [r] ] 
```

会成为：

```
[ [:p] (not q) (not r) [r] ] 
```

任何帮助将**不胜**感激，提前多多关爱^_^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T22:12:00.993

这*很*笼统。

```
(defn sym-replace [[x y] & syms]
  (cond 
    (and x y (some #{x} syms)) (list (-> x name symbol) (-> y name symbol))
    (and x y) [x y]
    :else [x])) 
```

例子：

```
(def my-vec [[:p] [:not :q] [:not :r] ['r] [:foo :bar]])

(map #(sym-replace % :not) my-vec)
;; ([:p] (not q) (not r) [r] [:foo :bar])

(map #(sym-replace % :foo) my-vec)
;; ([:p] [:not :q] [:not :r] [r] (foo bar))

(map #(sym-replace % :not :foo) my-vec)
;; ([:p] (not q) (not r) [r] (foo bar)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T01:30:00.343

```
(use '[clojure.walk :only (prewalk)])

(defn match? [x]
  (and (vector? x)
       (= (first x) :not)
       (keyword? (second x))))

(defn transform [x]
  (map (comp symbol name) x))

(defn replac [p t x]
 (prewalk #(if (p %) (t %) %) x))

(replac match? transform [[:p] [:not :q] [:not :r] '[r]])
=> [[:p] (not q) (not r) [r]] 
```

# matlab - 矩阵matlab中的阈值

> ID：15011911
> 
> 赞同：0
> 
> 时间：2013-02-21T20:48:07.157
> 
> 标签：matlab, image-processing, computer-vision

我需要一种快速的方法来对图像（矩阵）区域执行阈值。输入是矩阵（图像）、阈值和半径，对于每个像素，我需要检查给定半径内的所有值是否小于阈值，如果是，我需要保存该值的（像素）坐标。我不想用双循环来做，因为我需要用几个半径多次执行这个任务。我不关心最小值或最大值，只是像素周围的所有值都低于某个阈值。任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:01:22.753

我不知道任何用于圆形邻域的快速算法。但是，如果您有矩形邻域，您可以在此处快速执行检查以获取更多详细信息：http: [//leetcode.com/2011/01/sliding-window-maximum.html](http://leetcode.com/2011/01/sliding-window-maximum.html)

此外，当您有多个半径值时，您可以提高速度。只需从最小值开始并计算结果。对于未来的半径值，如果一个点没有从前面的步骤之一通过，则不处理它，存在一个小于阈值的较小半径（因此在当前半径）中的点。

# php - 无法从 mysql 获取值并将其放在 html 标题中

> ID：15011919
> 
> 赞同：-4
> 
> 时间：2013-02-21T20:48:27.467
> 
> 标签：php

我在名为“DSPixels Design”的列“PageTopTitle”中的表“genset”中的数据库“dsaidovsite”中有一个值；我想在 html`<title>...</title>`标记中获取该值。

我希望这是可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T21:14:21.653

最好的方法就是运行数据库查询：

```
$result = mysql_query("SELECT PageTopTitle FROM genset WHERE someUniqueRowSelector"); 
```

然后只需将其声明为变量并回显它，即可将其输出到标题标签中：

```
$row = mysql_fetch_array($result);

$pageTitle = $row['PageTopTitle'] 
```

您现在已经定义了值，接下来您只需将一些 php 添加到您的标题标签中 - 无论它可能已经是什么（拥有类似格式的标题标签总是好的 - 但永远不会相同 - 改变开始或类似的）

```
<html>
<head>
<title><?php echo $pageTitle ?> | Random Header info | Example.com </title> 
```

那应该这样做。

最好在表中添加一个名为“page”的列，这样对于每个标题，您可以简单地声明 php 中的页面并在 WHERE 中将其用于 SQL 语句，这样您就可以拥有唯一的页面标题很容易定义。

那是我的 0.02 美元

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T20:51:05.347

有可能的。php 在呈现 html 之前执行。阅读并在页面中输出。

# php - PDO 相关的数据库错误

> ID：15011922
> 
> 赞同：0
> 
> 时间：2013-02-21T20:48:36.253
> 
> 标签：php, mysql, linux, pdo

更改服务器配置后。更新了 MYSQL 和 PHP 。我收到了类似这样的不同 SQL 错误：

> SQLSTATE[42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'WHERE id = '759'' 附近使用正确的语法
> 
> SQLSTATE[HY000]：一般错误：2014 在其他无缓冲查询处于活动状态时无法执行查询。考虑使用 PDOStatement::fetchAll()。或者，如果您的代码只针对 mysql 运行，您可以通过设置 PDO::MYSQL_ATTR_USE_BUFFERED_QUERY 属性来启用查询缓冲。

我添加了`$this->dbo->setAttribute(PDO::MYSQL_ATTR_USE_BUFFERED_QUERY, true);`，这会导致代码错误。

我没有更改代码中的任何内容，所以它不能是合成错误？

更新：函数 loadAssoc($values = false) {

```
 // Execute statement
            ($values) ? $this->statement->execute($values) : $this->statement->execute();

            // Return associative array
            return $this->statement->fetch(PDO::FETCH_ASSOC);
        } 
```

我收到错误 PHP Fatal error: Call to a member function execute() 在使用执行的行上。

在我的 cpanel 中它说：linux，php 5.3.21，mysql 5.5.28（刚刚升级到这个）认为可以解决问题

就像我之前所说的，在我的服务器更新之前一切正常：S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:19:49.743

从[PHP 文档](http://php.net/manual/de/ref.pdo-mysql.php)：

> 如果在 PDOStatement 上将此属性设置为 TRUE，则 MySQL 驱动程序将使用 MySQL API 的缓冲版本。如果你正在编写可移植的代码，你应该使用 PDOStatement::fetchAll() 代替。

似乎 - 无论出于何种原因 - 您更新的 PDO 扩展与不支持缓冲查询的 mysql api 相关联。

您现有的代码正在使用缓冲查询，因此它将失败。不更改代码本身的唯一解决方案是：

*   安装支持缓冲查询的mysql客户端库
*   将 PDO 链接到此库

* * *

为了进一步帮助您，我需要有关您正在使用的操作系统以及 MySQL、PDO、PHP 的哪些版本的更多信息......

# bitmap - 有没有办法从 For Loop 中的 URL 下载图像添加到 Hashmap 数组？

> ID：15011923
> 
> 赞同：1
> 
> 时间：2013-02-21T20:48:37.757
> 
> 标签：bitmap, android-listview, hashmap

我有一个哈希图数组，我将信息从 XML 文件中放入。我应该如何下载图像以使其在我的列表视图中可用？

这是我的代码：

```
public void dealsCb(String url, XmlDom xml, AjaxStatus status) {

        List<XmlDom> products = xml.tags("Product");
        List<HashMap<String, String>> titles = new ArrayList<HashMap<String, String>>();

        for (XmlDom product : products) {
            HashMap<String, String> hmdata = new HashMap<String, String>();
            hmdata.put("title", product.text("Product_Name"));
            hmdata.put("desc", product.text("Sale_Price"));

            //NEED TO DOWNLOAD IMAGE FROM THIS URL AND THEN ADD TO ARRAY....
            hmdata.put("thumb", product.text("Image_URL"));

            titles.add(hmdata);
        }

        String[] from = { "thumb", "title", "desc" };

        int[] to = { R.id.icon, R.id.title, R.id.desc };

        SimpleAdapter adapter = new SimpleAdapter(getBaseContext(), titles,
                R.layout.activity_deals_item, from, to);

        ListView listView = (ListView) findViewById(R.id.list);

        listView.setAdapter(adapter);

    } 
```

我尝试了一种获取图像的方法，使其成为位图，然后将其转换为可绘制对象，但是由于 hmdata.put 需要一个字符串，因此无法将其添加到数组中...我在加载图像时缺少什么?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:55:33.410

我认为您最好的选择是创建一个新对象，该对象可以包含您有兴趣使用的所有元素。

您应该创建一个名为“Product”的新对象，该对象采用 XmlDom 作为其构造函数，并具有用于“title”、“desc”和“thumbnail”的 getter。这些 getter 将分别返回 String、String 和 Bitmap。

您应该能够使用 HttpClient 或一些类似的 android 网络客户端下载图像：[HttpClient](http://developer.android.com/reference/org/apache/http/client/HttpClient.html)

下载图像后，您可以使用[BitmapFactory](http://developer.android.com/reference/android/graphics/BitmapFactory.html)将其转换为用于 ImageView 的位图。

然后，您可以将自定义“产品”对象添加到列表中以供以后使用。

例子：

```
public class Product{

   String title;
   String desc;
   Bitmap image;

   public Product(XmlDom x){ 
        ... download image, and assign to instance variables ... 
   }

   public String getTitle(){ return this.title; }

   ... more getters ...
} 
```

# wordpress - WooCommerce - 将产品添加到购物车后没有确认

> ID：15011925
> 
> 赞同：0
> 
> 时间：2013-02-21T20:48:40.497
> 
> 标签：wordpress, callback, cart, woocommerce, confirmation

我不确定它是不是这样，但是当我单击产品上的“添加到购物车”按钮时（查看产品页面时），没有给用户视觉确认。

我缺少一个 JS 文件吗？或者也许我需要一个在我的 HTML 中具有特定 ID 的 div 才能显示消息？还是我需要创建自己的 JS 回调方法来处理添加产品时的处理？

我已经对此进行了研究，但关于它的信息却很少（所以也许我弄坏了一些东西？）。

我勾选了 WC 的“在产品档案中启用 AJAX 添加到购物车按钮”选项，我可以确认产品实际上已添加到购物车 - 用户对此一无所知！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:07:24.047

问题已解决 - 我取消了 WC 的“启用 WooCommerce CSS 样式”。在我看来，它应该带有警告！:)

# r - R中使用CARET包的并行随机森林

> ID：15011928
> 
> 赞同：0
> 
> 时间：2013-02-21T20:48:51.700
> 
> 标签：r, r-caret

我正在使用包`method="parRF"`下的 R 中命名的回归技术并行随机森林之一`caret`；它似乎比普通的随机森林工作得更快。我是否可以请求加快流程的实施细节的差异。

任何解释并行随机森林算法和实现的文档链接都会有很大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T14:41:38.180

它是使用您机器的多个内核和一个 MPI 包的并行实现。
查看[http://caret.r-forge.r-project.org/parallel.html](http://caret.r-forge.r-project.org/parallel.html)上的并行实现页面，当然还有包的 CRAN 页面。我希望这些对你来说足够详细。

# ios - 如何将 SQLite 数据库添加到 iOS (CoreData) 应用程序？

> ID：15011934
> 
> 赞同：1
> 
> 时间：2013-02-21T20:49:05.927
> 
> 标签：ios, sqlite, core-data

我有一个使用 CoreData 的 iPhone 应用程序。

我想向它添加一个预填充的 SQLite 数据库。该数据库有 1 个表（地理位置，其中大约 50K）..ities.sql 我有点困惑添加这个数据库的最佳方法是什么？

我看到了几种方法（例如在 /Users/user/Library/... 中找到 app 文件夹），但我的外部数据库与应用程序数据库的结构并不相同（没有“用户”表等）。

我只是想把这个 citys.sqlite 当作一些数据源。如果有必要，我不介意将它与应用程序 appname.sqlite 合并...

我还使用 RestKit 来管理 CoreData / API 集成。

问题 - 如何将此 city.sqlite 添加到应用程序，以便我可以使用该数据库中的预填充数据发送应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T21:01:35.937

行，

我创建预填充数据库的方法是创建一个虚拟应用程序，其目标是仅填充您要创建的数据库。这让我可以在不使用真实应用程序的情况下对数据库进行一些测试。显然，模型应该是相同的。

然后，您可以将它放到您的真实应用程序的主包中。执行后，应用程序将检查您的文档文件夹中是否存在数据库（例如），如果不存在，它会将数据库从捆绑包复制到文档文件夹。

```
NSString *storePath = [[self applicationDocumentsDirectory] 
    stringByAppendingPathComponent: @"yourStore.sqlite"];
NSURL *storeUrl = [NSURL fileURLWithPath:storePath];

NSFileManager *fileManager = [NSFileManager defaultManager];
if (![fileManager fileExistsAtPath:storePath]) {
    NSString *defaultStorePath = [[NSBundle mainBundle] 
        pathForResource:@"yourStore" ofType:@"sqlite"];
    if (defaultStorePath) {
        [fileManager copyItemAtPath:defaultStorePath toPath:storePath error:NULL];
    }
} 
```

在[Core Data Import](http://www.raywenderlich.com/980/core-data-tutorial-how-to-preloadimport-existing-data)中，您可以找到我的意思（对于第二部分，但您也可以自由地遵循填充数据库的方法）。

希望有帮助。

**编辑**

我会尽力解释得更好。

您创建一个虚拟项目。

在这里，您可以使用您在主应用程序中创建的模型（及其实体）。只需将其复制到您的虚拟项目中即可。创建一些代码来通过`NSManagedObjectContext`东西填充 sql 存储。结果将包含在已填充的 sql 存储中。您不需要接触任何 sql 存储（仅通过 Core Data）。将应用程序文件夹目录移动到 App Simulator 中，复制商店并将其放入主应用程序包中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T21:55:18.120

**编辑：**如果您使用的是普通 SQLite 数据库，则需要将数据迁移到对 CoreData 友好的持久存储。为此，您可以使用`sqlite`库来读取数据。您可以直接在应用程序中执行此操作，或者为此编写一些实用程序应用程序。获得 SQLite Core Data 持久存储后，请关注我的原始帖子：

* * *

使用 Core Data，您可以将**多个 SQLite 存储组合到一个上下文中**。只需将两个持久存储添加到您的`NSPersistentStoreCoordinator`.

```
[coordinator addPersistentStoreWithType:NSSQLiteStoreType
                          configuration:nil
                                    URL:mainSQLiteURL // URL for your main DB
                                options:nil
                                  error:nil];
[coordinator addPersistentStoreWithType:NSSQLiteStoreType
                          configuration:nil
                                    URL:citiesSQLiteURL // URL for the additional DB
                                options:nil
                                  error:nil]; 
```

在此之后，当您`NSFetchRequest`使用实体创建时`City`（我不知道您的实体名称），它将从两个 SQLite 文件中返回城市。

如果您只想搜索其中一个商店，您可以设置`-setAffectedStores:`获取请求。此外，当您插入新`City`对象时，您需要通过调用`-assignObject:toPersistentStore:`上下文来指定持久存储。否则它将对保存新城市的位置感到困惑。

或者只是将这两个商店合并到一个文件中。

# python - ConfigNumParser ValueError: int() 以 10 为基数的无效文字：''

> ID：15011935
> 
> 赞同：1
> 
> 时间：2013-02-21T20:49:09.123
> 
> 标签：python, parsing, numpy, scipy, pyparsing

这段代码几乎完全是从[scipy.org 食谱](http://www.scipy.org/Cookbook/Reading_Custom_Text_Files_with_Pyparsing)中输入的，我还没有注意到任何拼写错误，所以代码可能已经过时了？为什么此代码正确解析数字但在 KeyWord() 和 QuotedString() 方法上失败？

```
 #use the Regex element to rapidly detect strings representing numbers:
from re import VERBOSE
number = Regex(r"""
               [+-]?    #optional sign
               (
                    (?:\d+(?P<float1>\.\d*)?)    # match 2 or 2.02
                  |                              # or
                    (?P<float2>\.\d+)?            # match .02
               )
               (?P<float3>[Ee][+-]?\d+)?         #optional exponent
               """, flags=VERBOSE
               )
# a function to convert this string into python float or integer and set a
# parseAction to tell pyparsing to automatically convert a number when it finds
# one:
def convert_number(t):
        """Convert a string matching a number to a python number"""
        print "Converting " + str(t)

        if t.float1 or t.float2 or t.float3:
            return [float(t[0])]
        else:
            return [int(t[0])]
            #try:
            #    return [int(t[0])]
            #except:
            #    return t

number.setParseAction(convert_number)

#  create a list of element converting strings to python objects:
from numpy import NAN
pyvalue_list = [
                number,
                Keyword('True').setParseAction(replaceWith(True)),
                Keyword('False').setParseAction(replaceWith(False)),
                Keyword('NAN', caseless=True).setParseAction(replaceWith(NAN)),
                Keyword('None').setParseAction(replaceWith(None)),
                QuotedString('"""', multiline=True),
                QuotedString("'''", multiline=True),
                QuotedString('"'),
                QuotedString("'"),
                ]

pyvalue = MatchFirst( e.setWhitespaceChars(' \t\r') for e in pyvalue_list) 
```

根据配方，我的输出应该是：

```
>>> test2 = '''
>>>     1   2   3.0  0.3 .3  2e2  -.2e+2 +2.2256E-2
>>>     True False nan NAN None
>>>     "word" "two words"
>>>     """'more words', he said"""
>>> '''
>>> print pyValue.searchString(test2)
[[1], [2], [3.0], [0.29999999999999999], [0.29999999999999999], [200.0], [-20.0], [0.022256000000000001],
[True], [False], [nan], [nan], [None], ['word'], ['two words'], ["'more words', he said"]] 
```

但是我得到 ValueError: invalid literal for int() with base 10: '' 所以我添加了一个打印语句来帮助调试，这里是终端会话：

```
 Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import ConfigNumParser as parser
>>> test2 = '''
...     1 2 3.0 0.3 .3 2e3 -.2e+2 +2.2256E-2
...     True False nan NAN None
...     "word" "two words"
...     """'more words', he daid"""
... '''
>>> print parser.pyvalue.searchString(test2)
Converting ['1']
Converting ['2']
Converting ['3.0']
Converting ['0.3']
Converting ['.3']
Converting ['2e3']
Converting ['-.2e+2']
Converting ['+2.2256E-2']
Converting ['']
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Python27\Lib\site-packages\pyparsing.py", line 1099, in searchString
    return ParseResults([ t for t,s,e in self.scanString( instring, maxMatches ) ])
  File "C:\Python27\Lib\site-packages\pyparsing.py", line 1036, in scanString
    nextLoc,tokens = parseFn( instring, preloc, callPreParse=False )
  File "C:\Python27\Lib\site-packages\pyparsing.py", line 871, in _parseNoCache
    loc,tokens = self.parseImpl( instring, preloc, doActions )
  File "C:\Python27\Lib\site-packages\pyparsing.py", line 2451, in parseImpl
    ret = e._parse( instring, loc, doActions )
  File "C:\Python27\Lib\site-packages\pyparsing.py", line 897, in _parseNoCache
    tokens = fn( instring, tokensStart, retTokens )
  File "C:\Python27\Lib\site-packages\pyparsing.py", line 660, in wrapper
    ret = func(*args[limit[0]:])
  File "ConfigNumParser.py", line 33, in convert_number
    return [int(t[0])]
ValueError: invalid literal for int() with base 10: '' 
```

所以在这里搜索了几个建议后，我添加了你在上面的评论区看到的 try-catch。现在的结果是：

```
 Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import ConfigNumParser as parser
>>> test2 = '''
...     1 2 3.0 0.3 .3 2e3 -.2e+2 +2.2256E-2
...     True False nan NAN None
...     "word" "two words"
...     """'more words', he daid"""
... '''
>>> print parser.pyvalue.searchString(test2)
Converting ['1']
Converting ['2']
Converting ['3.0']
Converting ['0.3']
Converting ['.3']
Converting ['2e3']
Converting ['-.2e+2']
Converting ['+2.2256E-2']
Converting ['']
Converting ['']
Converting ['']
<deleted 65+ more of these>
Converting ['']
Converting ['']
Converting ['']
[[1], [2], [3.0], [0.3], [0.3], [2000.0], [-20.0], [0.022256], [''], [''], [''], [''], [''], [''], [''], [''], [''], [''], [''], [''], ['']]
>>> 
```

在我继续搜索和学习的同时，我认为将问题发布给专业人士会对我和其他人有所帮助。

问候，比尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T21:01:45.233

> 我还没有注意到任何错字所以

...哎呀...

```
(?P<float2>\.\d+)? 
```

应该

```
(?P<float2>\.\d+) 
```

那解决了它。

# racket - Racket - 如何在 bash 脚本中获取“先前执行的命令”？

> ID：15011939
> 
> 赞同：5
> 
> 时间：2013-02-21T20:49:25.143
> 
> 标签：racket

是否有任何键盘可以在屏幕上回显“先前执行的命令”？类似于 Linux bash 中的向上箭头键...

[这与如何在 bash 脚本中获取“先前执行的命令”](https://stackoverflow.com/questions/6756360/how-do-i-get-previous-executed-command-in-a-bash-script)不重复？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T21:15:18.003

加载[XREPL](http://docs.racket-lang.org/xrepl/index.html)，您将获得 readline 样式的输入编辑，其中应该包括使用向上箭头键加载先前行的能力。

```
(require xrepl) 
```

# javascript - 验证用 javascript 勾选的复选框

> ID：15011940
> 
> 赞同：0
> 
> 时间：2013-02-21T20:49:30.060
> 
> 标签：javascript, forms, validation, checkbox

我有一些 javascript im 用来验证一个工作正常的表单，但我现在需要添加一个复选框，在表单提交之前需要检查它。复选框的名称是 html 中的术语，我设法让它不使用下面的代码提交表单。

```
$(document).ready(function(){
$("#sendmail").click(function(){
    var valid = '';
    var isr = ' is required.';
    var name = $("#name").val();
    var mail = $("#mail").val();
    var subject = $("#subject").val();
    var country = $("#country").val();

            if( !$("#terms").is(":checked") ){
        valid += '<br />Please accept the terms and conditions.';
    }
    if (name.length<1) {
        valid += '<br />Name'+isr;
    }
    if (!mail.match(/^([a-z0-9._-]+@[a-z0-9._-]+\.[a-z]{2,4}$)/i)) {
        valid += '<br />A valid Email'+isr;
    }
    if (subject.length<1) {
        valid += '<br />Website Link'+isr;
    }
    if (country.length<1) {
        valid += '<br />Country'+isr;
    }
    if (valid!='') {
        $("#response").fadeIn("slow");
        $("#response").html("Error:"+valid);
                    setTimeout('$("#response").fadeOut("slow")',4000);
    }
    else {
        var datastr ='name=' + name + '&mail=' + mail + '&subject=' + subject + '&country=' + country;
        $("#response").css("display", "block");
        $("#response").html("<img src='http://infashionation.com/female/images/response.jpg'>");
        $("#response").fadeIn("slow");
        setTimeout("send('"+datastr+"')",2000);
    }
    return false;
}); 
```

问题是无论是否选中框，它现在都不会提交。

我已经搜索了一些信息来帮助我解决这个问题，但没有运气，所以我想我会在这里问是否有人可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:05:59.293

您似乎没有关闭 $(document).ready() 函数。您关闭了 sendmail 单击功能，但没有关闭主要功能。我认为你的代码的尾部应该是这样的： } return false; }); // 关闭发送邮件功能 }); // 关闭 document.ready

如果发生这种情况是因为将其复制到 SO，请忽略这一点，但如果这是在您的代码中，您的浏览器可能不会做任何事情并且似乎对 JavaScript 没有反应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T21:03:43.057

您的 .ready 函数缺少右花括号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T20:51:43.880

在有效变量之后似乎有一个额外的感叹号。我建议还使用 javascript 调试器。

```
if (valid!='') { 
```

# android - android中的Jexcel产生空文件

> ID：15011941
> 
> 赞同：0
> 
> 时间：2013-02-21T20:49:35.587
> 
> 标签：android, jexcelapi

我正在尝试在我的 Android 应用程序中使用 jexcel 来编写 excel 文件。我打开了工作簿，创建了一个工作表，写了一个标签，仅此而已

创建了一个 xls 文件，但它是空的。我没有收到任何错误。任何人都可以正常工作或知道原因

编辑：这是代码

```
wbSettings.setUseTemporaryFileDuringWrite(true);   
File wbfile = new File("try.xls");
WritableWorkbook wb = null;

try{
wb = Workbook.createWorkbook(wbfile,wbSettings); 
WritableSheet sheet = wb.createSheet("hello", 0);
Label newCell = new Label(0,3,"testtt");
sheet.addCell(newCell);
}catch(Exception ex){
    ex.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T01:21:15.303

弄清楚了。最后我做了 wb.write() 和 wb.close() 。

# mysql - preg_capture 捕获多个正则表达式匹配

> ID：15011960
> 
> 赞同：0
> 
> 时间：2013-02-21T20:50:43.680
> 
> 标签：mysql, regex, blob, user-defined-functions

[我对 UDF 函数PREG_CAPTURE](http://www.mysqludf.org/lib_mysqludf_preg/index.php#PREG_CAPTURE_SECTION)有一点问题：

```
SELECT id_prod, id_lang, description, preg_capture('/D[[:digit:]]{4}/', description) AS Dxxxx FROM works 
```

有了这个查询，我得到了`[BLOB - 5 B]`

但是当我在查询中使用参数时：

```
SELECT id_prod, id_lang, description, preg_capture('/D[[:digit:]]{4}/', description, 2) AS Dxxxx FROM 
```

我得到了 NULL 值。 [这是我的表的示例](http://sqlfiddle.com/#!2/68670/1) 如何从描述中获取所有匹配项，例如：D0313、D0320 并通过 BLOB？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-28T06:45:56.023

Try with conversion to char:

```
SELECT id_prod, id_lang, description, CAST(preg_capture('/D[[:digit:]]{4}/', description)  AS CHAR(10000)) AS Dxxxx FROM works; 
```

# javascript - 在吃豆人游戏中运行彩票

> ID：15011961
> 
> 赞同：-3
> 
> 时间：2013-02-21T20:50:49.850
> 
> 标签：javascript, pacman

我想找到一个用 javascript 编写的 pacman 游戏并找到它检测到获胜的位置。然后我可以在下面编写自己的代码来运行一个简单的彩票。我检查了一些样本，但找不到用户获胜的地方。我需要类似 google;s 的东西。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:54:12.113

当你吃掉所有的点时，你会在 pacman 中清除一个级别。

```
if(remainingDots == 0) {
    // you beat the level
} 
```

# winapi - Win32 如何检测用户选择了任务栏的小图标？

> ID：15011962
> 
> 赞同：1
> 
> 时间：2013-02-21T20:50:58.660
> 
> 标签：winapi, hook, taskbar

我正在用 C# 开发一个应用程序，它需要检测何时在任务栏上使用更改的图标大小。我知道如何检查是否为用户启用/禁用了小图标（在注册表中），但如何检测用户实际更改它们的时刻？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:03:54.433

这不是 100%，但处理[`WM_SETTINGCHANGE`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms725497%28v=vs.85%29.aspx)可能会在这里解决问题。

# java - 按照它们在类中出现的顺序将 bean 字段映射到 CSV

> ID：15011964
> 
> 赞同：0
> 
> 时间：2013-02-21T20:51:02.627
> 
> 标签：java

我想将给定 bean 中的每个字段映射到 CSV，其顺序与它们在类定义中声明的顺序相同。

到目前为止，我唯一考虑的是使用`.class.getDeclaredFields()`，因为它以正确的顺序返回它们，然后使用 OpenCSV 之类的东西映射它们。

有没有更快的方法来做到这一点？

# python - 我无法更改从文本文件生成的列表，我该怎么做呢？Python 3.xx

> ID：15011965
> 
> 赞同：0
> 
> 时间：2013-02-21T20:51:04.390
> 
> 标签：python, python-3.x

```
file = open('Names.txt', 'r')
for lines in file:
    names = lines.split()
    names_list = [item.strip(',') for item in names]
    reformattedName = (names_list[1:]+names_list[0])
    print(reformattedName) 
```

这就是我到目前为止所拥有的。

文本文件为：

```
Neuman,     Alfred E.
Stevenson, Robert Lewis     
Lewis, C.S.   
Doe, Jane   
Bush, George Herbert   Walker 
```

我试图重新排列它看起来像：

```
Alfred E. Nueman
Robert Lewis Stevenson
C.S. Lewis
Jane Doe
George Herbert Walker Bush 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:55:15.247

您想将列表与列表连接，而不是字符串与列表：

```
reformattedName = names_list[1:] + names_list[:1] 
```

或者您可能想再次将元素重新加入字符串：

```
reformattedName = ' '.join(names_list[1:] + names_list[:1]) 
```

# jquery - 如何通过ajax提交一千个选中的复选框？

> ID：15011974
> 
> 赞同：2
> 
> 时间：2013-02-21T20:51:34.627
> 
> 标签：jquery, coldfusion, coldfusion-8, cfajaxproxy

我正在使用 ColdFusion 8 和 jQuery 1.7.2。

我在我的网站中使用了大量的 ajax。通常，我会使用 CFAJAXPROXY，但这有一个限制：它将所有值放入 URL，限制为大约 1250 个字符。我的数据会超过这个值（1000 个值，每个值 4 位）。

我通常不会一次提交整个表格。我通常会根据需要提交少量信息，例如选中或未选中某个框。这在使用 CFAJAXPROXY 时效果很好。现在我需要同时提交一千个（或更多）复选框，这给我的系统带来了麻烦。

如何在不刷新整个页面的情况下将此 FORM 作为 FORM POST 提交，就像普通的表单帖子一样？

```
// I WANT TO REFRESH THIS DIV ON FORM SUBMISSION
<div>
<fieldset>
<form method='post' action='?' id='jsSaveAllManufacturersForm'>
<input type='button' value='Select All ' id='jsSelectAll'>
<input type='button' value='Deselect All ' id='jsDeselectAll'> 
<input type='button' value='Save Changes' id='jsSaveChanges'>
<input type='checkbox' value='1'> 1
<input type='checkbox' value='2'> 2
<input type='checkbox' value='3'> 3
</form> 
</fieldset>
<div>

// SET VARS 
var $SaveAllManufacturersForm = $('#jsSaveAllManufacturersForm'),
$SelectAll = $('#jsSelectAll'),
$DeselectAll = $('#jsDeselectAll'),
$SaveChanges = $("#jsSaveChanges");

// MY FUNCTION WHEN FORM IS SUBMITTED
var saveChanges = function(e) {
e.preventDefault();
$SaveAllManufacturersForm.submit();
    jroDash.saveAllManufacturers($SaveAllManufacturersForm);
}

// ACTION THAT LAUNCHES THE FORM SUBMISSION
$SaveChanges.click(saveChanges); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T21:38:54.593

CFAJAXPROXY 可以很容易地设置为使用 POST 而不是 GET。

```
<cfajaxproxy cfc="CFCName" jsclassname="CFProxy"> 

<script>
    myProxy = new CFProxy();
    myProxy.setHTTPMethod('POST');
    myProxy.doMyAjaxMethod();
</script>` 
```

[http://forta.com/blog/index.cfm/2007/10/15/Using-POST-For-ColdFusion-Ajax-Calls](http://forta.com/blog/index.cfm/2007/10/15/Using-POST-For-ColdFusion-Ajax-Calls)

# php - 验证正则表达式而不发出警告

> ID：15011975
> 
> 赞同：0
> 
> 时间：2013-02-21T20:51:34.707
> 
> 标签：php, regex, validation, warnings

我正在尝试验证一个字符串是否包含正则表达式，并且它在 PHP 中是有效的。通常，我会通过以下方式执行此操作

```
<?php
@preg_match($string, '') !== false; 
```

这会产生一个警告，这很好，因为我们`@`用来抑制它。但是，当我们使用`set_error_handler`捕获错误时会出现问题，因为尽管有抑制器，但仍会触发处理程序`@`。

我想做一些与提供的代码类似的事情，而不会引发警告。

**抛出的警告是：**

```
preg_match(): Delimiter must not be alphanumeric or backslash 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T20:54:50.557

只需将其添加到您的错误处理程序中：

```
function user_error_handler($severity, $msg, $filename, $linenum, $content) {
    if (0 == (error_reporting() & $severity)) return;
    ...
} 
```

在这种情况下，由于`@`运算符，`error_reporting()`将返回 0。

# raphael - 无法使用 Raphael.js 获取更新的圆圈位置

> ID：15011984
> 
> 赞同：0
> 
> 时间：2013-02-21T20:52:06.313
> 
> 标签：raphael

我试图用 拖动一个圆圈`raphael.js`，但似乎`cx`并`cy`没有为圆圈更新，以便设置圆圈的正确新位置。

代码可以在这里查看和测试：http: [//jsfiddle.net/MXFWW/](http://jsfiddle.net/MXFWW/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T21:15:15.993

正如您所发现的，对 Raphael 对象应用变换不会改变其位置属性。

查看[transform 方法](http://raphaeljs.com/reference.html#Element.transform)中的省略号语法。因为转换是如此令人头疼，所以我更喜欢在简单的情况下直接更改属性。您只需要记住使用 .data() 方法在 dragStart 函数中开始存储任意数据的位置。

```
var paper = Raphael(0, 0, 320, 320);
var innerC = paper.circle(320 / 2, 320 / 2, 20);
innerC.attr("stroke", "#000");
innerC.attr("fill", "#000");

var dragMove = function (dx, dy, x, y, e) {
    console.log(innerC.attr('cx'));
    this.attr("cx", this.data("ox") + dx);
    this.attr("cy", this.data("oy") + dy);
    this.animate({
        "fill-opacity": 1
    }, 500);
},
dragStart = function (x, y) {
     this.data("ox", this.attr("cx"));
     this.data("oy", this.attr("cy"));
},

dragEnd = function () {
    this.animate({
        "fill-opacity": 1
    }, 500);
};

innerC.drag(dragMove, dragStart, dragEnd); 
```

[jsFiddle](http://jsfiddle.net/MXFWW/4/)

# r - R：跨多个文件对因子的级别进行分组

> ID：15011986
> 
> 赞同：3
> 
> 时间：2013-02-21T20:52:10.427
> 
> 标签：r, aggregate, plyr

我是 R 新手，在计算平均值之前努力对因子的多个级别进行分组。这个问题很复杂，因为我在数百个文件中执行此操作，这些文件具有需要分组的不同级别的因素。我从以前的帖子中看到如何使用级别（）解决单个级别的分组问题，但是我的数据对于这种方法来说太可变了。

基本上，我想计算单个因素，然后计算一个因素的多个水平的总体平均值。例如，我想计算状态列中存在的以下每个因素的每个物种的平均值：Crypt1、Crypt2、Crypt3、Native、Intro，然后还计算 Crypt 物种的总体平均值（包括 Crypt1、Crypt2、和 Crypt3，但不是 Native 或 Intro）。但是，一个物种要么具有多个级别的 Crypt（可变，最高 Crypt8），要么具有 Native 和 Intro，并且每个级别的所有物种的平均值最终都会被平均到同一个汇总表中。

例如：

```
Species  Status  Value
A        Crypt1    5 
A        Crypt1    6
A        Crypt2    4
A        Crypt2    8
A        Crypt3    10
A        Crypt3    50
B        Native    2
B        Native    9
B        Intro     9
B        Intro     10 
```

我在想我可以使用每个因子的第一个字母将 Crypt 因子组合在一起，但我正在努力定位第一个字母，因为它们是因子，而不是字符串，我不知道如何在它们之间进行转换。我最终使用聚合（）计算均值，并且我可以获得每个因子的单独均值，但不能获得分组因子。任何想法将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:58:00.050

对于个人意味着：

```
# assuming your data is in data.frame = df
require(plyr)
df.1 <- ddply(df, .(Species, Status), summarise, ind.m.Value = mean(Value))

> df.1
#   Species Status ind.m.Value
# 1       A Crypt1     5.5
# 2       A Crypt2     6.0
# 3       A Crypt3    30.0
# 4       B  Intro     9.5
# 5       B Native     5.5 
```

`Status`对于整体平均值，我们的想法是删除using中每个条目末尾的数字`sub/gsub`。

```
df.1$Status2 <- gsub("[0-9]+$", "", df.1$Status)
df.2 <- ddply(df.1, .(Species, Status2), summarise, oall.m.Value = mean(ind.m.Value))

> df.2
#   Species Status2 oall.m.Value
# 1       A   Crypt     13.83333
# 2       B   Intro      9.50000
# 3       B  Native      5.50000 
```

这是你所期待的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:10:14.123

这是一个替代方案。从概念上讲，它与 Arun 的答案相同，但它坚持使用基础 R 中的函数，并且在某种程度上使您的工作区和原始数据保持整洁。

我假设我们从一个`data.frame`名为“temp”的开始，并且我们想要创建两个新`data.frame`的 s，“T1”和“T2”用于单独和分组的手段。

```
# Verify that you don't have T1 and T2 in your workspace
ls(pattern = "T[1|2]") 
# character(0)

# Use `with` to generate T1 (individual means)
#   and to generate T2 (group means)
with(temp, {
  T1 <<- aggregate(Value ~ Species + Status, temp, mean)
  temp$Status <- gsub("\\d+$", "", Status)
  T2 <<- aggregate(Value ~ Species + Status, temp, mean)
})

# Now they're there!
ls(pattern = "T[1|2]") 
# [1] "T1" "T2" 
```

请注意，我们曾经`<<-`将结果从内部分配给`with`全局环境。不是每个人都喜欢使用它，但我认为在这种特殊情况下它是可以的。这是“T1”和“T2”的样子。

```
T1
#   Species Status Value
# 1       A Crypt1   5.5
# 2       A Crypt2   6.0
# 3       A Crypt3  30.0
# 4       B  Intro   9.5
# 5       B Native   5.5

T2
#   Species Status    Value
# 1       A  Crypt 13.83333
# 2       B  Intro  9.50000
# 3       B Native  5.50000 
```

回头看看这个`with`命令，看起来我们好像改变了“状态”列的值。但是，这仅在使用`with`. 您的原件`data.frame`与您开始时的原件相同。

```
temp
#    Species Status Value
# 1        A Crypt1     5
# 2        A Crypt1     6
# 3        A Crypt2     4
# 4        A Crypt2     8
# 5        A Crypt3    10
# 6        A Crypt3    50
# 7        B Native     2
# 8        B Native     9
# 9        B  Intro     9
# 10       B  Intro    10 
```

# iis - IIS 7“HTTP 错误 404。未找到请求的资源”在 php、asp.net 上运行良好

> ID：15011995
> 
> 赞同：0
> 
> 时间：2013-02-21T20:52:36.353
> 
> 标签：iis

一切正常，直到我尝试为 https 绑定。之后，之前提供的每个资源都返回：HTTP 错误 404。未找到请求的资源

我恢复了设置，但无济于事！有任何想法吗？系统还原？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-29T23:51:17.540

我认为您需要启动应用程序

[https://www.znetlive.com/kb/2454A/technical-support/webserver-related-issues/i-am-getting-http-error-404-the-requested-resource-is-not-found-what-我应该做的.html](https://www.znetlive.com/kb/2454A/technical-support/webserver-related-issues/i-am-getting-http-error-404-the-requested-resource-is-not-found-what-should-i-do.html)