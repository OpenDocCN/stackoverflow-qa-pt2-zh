# StackOverflow 问答 15674000-15674999

# wordpress - WP_Query 订单 ASC 的奇怪行为

> ID：15674015
> 
> 赞同：0
> 
> 时间：2013-03-28T03:56:46.240
> 
> 标签：wordpress, responsive-design

我有一个响应式子主题，我正在编写一个插件，使用响应式网格列出帖子。

如果我将 order 设置为 DESC（在 WP_Query 中），一切正常，但是使用 ASC 我遇到了一个非常奇怪的行为。帖子可以按升序排列，但我的帖子缩略图功能不再起作用。它适用于 DESC ... wp 查询如何影响我的功能？！？！？！

这些是有效的简码：

```
[myplugin category="0" order="DESC" orderby="date" limit="4"]
[myplugin category="0" orderby="date" limit="4"] 
```

而这个没有：

```
[myplugin category="0" order="ASC" orderby="date" post_not_in="233" limit="4"] 
```

这是我用来获取帖子中第一张图片的功能：

```
function my_get_first_image( $postID ) {
    $args = array(
        'numberposts' => 1,
        'post_mime_type' => 'image',
        'post_parent' => $postID,
        'post_status' => null,
        'post_type' => 'attachment',
    );
    $attachments = get_children( $args );
    if ( $attachments ) {
       foreach ( $attachments as $attachment ) {
        $fullImg = wp_get_attachment_url( $attachment->ID, 'full' );
        $image_attributes = wp_get_attachment_image_src( $attachment->ID, 'big' )  ? wp_get_attachment_image_src( $attachment->ID, 'big' ) : $fullImg;
         return '<a rel="shadowbox" href="'.$fullImg.'"><img class="nw_front_thumb" src="' . wp_get_attachment_thumb_url( $attachment->ID ) . '" class="current"></a>';
       }
    }
    return '';
} 
```

循环有点长，所以我把它贴在粘贴箱上。您可能会发现这段代码在我的插件中：

[http://pastebin.com/cYrag67Y](http://pastebin.com/cYrag67Y)

编辑： http: [//pastebin.com/rw6NWEeV](http://pastebin.com/rw6NWEeV)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:46:24.143

您可以尝试使用：

```
 the_post_thumbnail() 
```

而不是 wp_get_attachment_url()

[http://codex.wordpress.org/Function_Reference/the_post_thumbnail](http://codex.wordpress.org/Function_Reference/the_post_thumbnail)

我曾经遇到过一些类似的问题。与 the_post_thumbnail() 完美配合。

一个工作示例：

```
$myimage_html = '';
$large_image_url = wp_get_attachment_image_src( get_post_thumbnail_id(), 'large');
$myimage_html .= '<a rel="shadowbox" href="' . $large_image_url[0] . '" title="'.the_title_attribute('echo=0').'" >';
$myimage_html .=  '<img src="'.wp_get_attachment_url( get_post_thumbnail_id($id)).'">';
$myimage_html .= '</a>'; 
```

# iphone - 如何在 iphone 应用程序中的两个 UITextfields 上调用不同的方法

> ID：15674019
> 
> 赞同：0
> 
> 时间：2013-03-28T03:56:58.030
> 
> 标签：iphone, uitextfield

我有一个 iphone 应用程序，其中我有两个文本字段，并且我有四种方法可以调用这些文本字段，但问题是当我在第二种方法中更改文本字段的值时，加载时第一种方法中会显示相同的值。

```
 -(void)textFieldTextDidChangeOneF:(UITextField*)tf{

        NSLog(@"Testing Successful Fatal One");

        appDelegate.p_Fatal_Yes_NV_InModel  = [[textFieldOne text] floatValue];
        appDelegate.p_Fatal_No_NV_InModel=100-appDelegate.p_Fatal_Yes_NV_InModel;

        textFieldTwo.text=[NSString stringWithFormat:@"%.2f",appDelegate.p_Fatal_No_NV_InModel];

        NSCharacterSet * set = [[NSCharacterSet characterSetWithCharactersInString:@"0123456789."] invertedSet];
        NSString*string=textFieldOne.text;
        if ([string rangeOfCharacterFromSet:set].location != NSNotFound) {
            UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"Warning" message:@"Only a number can be entered into this input field " delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [alert show];
            [alert release];
            textFieldOne.text=@"";
        }

        NSLog(@"Fata Data %.2f",appDelegate.p_Fatal_Yes_NV_InModel);
    } 
```

我正在更改此方法中的值，但也更改了值，我认为问题可能会在同一文本字段上调用不同的方法。

这是完整代码的代码链接

我有两个文本字段，但我在它们上调用了四种方法

[http://paste.bradleygill.com/index.php?paste_id=4011](http://paste.bradleygill.com/index.php?paste_id=4011)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T04:09:14.277

尝试`tag`在`UITextField`.

首先以编程方式或在 xib 中为您的 TextFields 分配标签（如果有）。例子

```
[txtFieldOne setTag:100];
[txtFieldTwo setTag:101]; 
```

然后使用标签区分您的文本字段上的操作

```
-(void)textFieldTextDidChangeOneF:(UITextField*)tf
{
    switch (tf.tag) {
        case 100:
            NSLog(@"action on text field one"); 
        break;

        case 101:
            NSLog(@"action on text field two");
        break;

        default:
        break;
    }
} 
```

# iphone - 为什么supportedInterfaceOrientations在ios6中多次调用

> ID：15674021
> 
> 赞同：1
> 
> 时间：2013-03-28T03:57:10.937
> 
> 标签：iphone, uiinterfaceorientation

在我的 ios6 应用程序中，supportedInterface 定向方法调用了 2 次。如何防止这种情况以及如何使其在 ios6 中只调用一次。请让我知道解决此问题的方法。提前致谢。

```
-(BOOL)shouldAutorotate
{
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
    orientationControlString=@"thumbnailNotSelected";
    NSLog(@"appdelegate.previewImageScallingmethodCallControlValue value is %d",appdelegate.previewImageScallingmethodCallControlValue); //Gestures settings
    viewsHiddingGesture=[[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(operationsOnViews:)];
    viewsHiddingGesture.cancelsTouchesInView=NO;
    [self.view addGestureRecognizer:viewsHiddingGesture];

    launchPopOverGesture=[[UILongPressGestureRecognizer alloc]initWithTarget:self action:@selector(annotationsPopOver:)];
    launchPopOverGesture.minimumPressDuration=0.8;
    launchPopOverGesture.allowableMovement=NO;
    launchPopOverGesture.cancelsTouchesInView=NO;
    [tiledView addGestureRecognizer:launchPopOverGesture];
    addAnnotationsGesture=[[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(addPinAnnotation:)];
    annotationScroller.contentSize=CGSizeMake(258, 700);

    appdelegate =(AppDelegate *)[[UIApplication sharedApplication]delegate];

    UIInterfaceOrientation statusBarOrientation =[UIApplication sharedApplication].statusBarOrientation;

    NSLog(@"statusBarOrientation in supported interface orientations is %d",statusBarOrientation);

    NSLog(@"PREVIEWIMAGESCALLING VALUE IS %d",appdelegate.previewImageScallingmethodCallControlValue);

    if(statusBarOrientation == UIInterfaceOrientationLandscapeLeft  || statusBarOrientation == UIInterfaceOrientationLandscapeRight)
    {
        // code for landscape orientation
        patternRemovalValue=0;

        [self landscapeOrientation];

        if(appdelegate.previewImageScallingmethodCallControlValue==1)
        {
            [self previewImageScallingInLandscape];
            firstOrientationChange=YES;
            appdelegate.getImagesResponseArrayObjectNumber=0;

        }

        else if(((appdelegate.previewImageScallingmethodCallControlValue%2)==0) && (appdelegate.previewImageScallingmethodCallControlValue > 1))
        {
            [self previewImageScallingInLandscape];
            firstOrientationChange=NO;

        }

        appdelegate.orientationChangesCount++;
        patternRemovalValue++;
        appdelegate.previewImageScallingmethodCallControlValue++;

    }
    else if(statusBarOrientation == UIInterfaceOrientationPortraitUpsideDown || statusBarOrientation == UIInterfaceOrientationPortrait)

    {
        // code for Portrait orientation
        patternRemovalValue=0;

        [self potraitOrientation];

        if(appdelegate.previewImageScallingmethodCallControlValue==1)
        {
            [self previewImageScallingInPotrait];
            firstOrientationChange=YES;
            appdelegate.getImagesResponseArrayObjectNumber=0;

        }

        else if(((appdelegate.previewImageScallingmethodCallControlValue%2)==0) && (appdelegate.previewImageScallingmethodCallControlValue > 1))
        {
            [self previewImageScallingInPotrait];
            firstOrientationChange=NO;

        }

        patternRemovalValue++;
        appdelegate.previewImageScallingmethodCallControlValue++;

    }

return UIInterfaceOrientationMaskAll;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T14:25:23.343

我不知道为什么会发生这种情况，但根据我的经验，您必须假设 supportedInterfaceOrientations 将被多次调用，并让您的逻辑处理它。您应该将大部分代码从那里移到其他地方，也许是 loadView 或您的 init 函数。标准做法是仅在supportedInterfaceOrientations 中有代码，该代码会立即报告您支持的方向。

# javascript - 将 javascript 移动到标记 div id

> ID：15674025
> 
> 赞同：0
> 
> 时间：2013-03-28T03:58:02.643
> 
> 标签：javascript

我正在播放嵌入的 javascript，我从我的服务器获取的代码 javascript，代码 javascript 将生成横幅。

我的服务器中的示例 javascript 是：

```
<script type='text/javascript'>
    <!--//<![CDATA[
    var m3_u = (location.protocol=='https:'?'https://203.130.226.231/advediax/www/delivery/ajs.php':'http://203.130.226.231/advediax/www/delivery/ajs.php');
    var m3_r = Math.floor(Math.random()*99999999999);
    if (!document.MAX_used) document.MAX_used = ',';
    document.write ("<scr"+"ipt type='text/javascript' src='"+m3_u);
    document.write ("?zoneid=1");
    document.write ('&amp;cb=' + m3_r);
    if (document.MAX_used != ',') document.write ("&amp;exclude=" + document.MAX_used);
    document.write (document.charset ? '&amp;charset='+document.charset : (document.characterSet ? '&amp;charset='+document.characterSet : ''));
    document.write ("&amp;loc=" + escape(window.location));
    if (document.referrer) document.write ("&amp;referer=" + escape(document.referrer));
    if (document.context) document.write ("&context=" + escape(document.context));
    if (document.mmm_fo) document.write ("&amp;mmm_fo=1");
    document.write ("'><\/scr"+"ipt>");
    //]]>-->
</script> 
```

在下面有标签 div id 横幅。

```
<div id="banner">For banner</div>

<script>
// Possible to move script from my server into tag banner?
// If yes, how to do it?
</script> 
```

现在的条件html大致如下：

```
 <!DOCTYPE html>
<html>
    <head>
    </head>
    <body>
        <script type='text/javascript'>
            <!--//<![CDATA[
            var m3_u = (location.protocol=='https:'?'https://203.130.226.231/advediax/www/delivery/ajs.php':'http://203.130.226.231/advediax/www/delivery/ajs.php');
            var m3_r = Math.floor(Math.random()*99999999999);
            if (!document.MAX_used) document.MAX_used = ',';
            document.write ("<scr"+"ipt type='text/javascript' src='"+m3_u);
            document.write ("?zoneid=1");
            document.write ('&amp;cb=' + m3_r);
            if (document.MAX_used != ',') document.write ("&amp;exclude=" + document.MAX_used);
            document.write (document.charset ? '&amp;charset='+document.charset : (document.characterSet ? '&amp;charset='+document.characterSet : ''));
            document.write ("&amp;loc=" + escape(window.location));
            if (document.referrer) document.write ("&amp;referer=" + escape(document.referrer));
            if (document.context) document.write ("&context=" + escape(document.context));
            if (document.mmm_fo) document.write ("&amp;mmm_fo=1");
            document.write ("'><\/scr"+"ipt>");
            //]]>-->
        </script>
        <div id="banner"> </div>
    </body>
</html> 
```

我想如下：

```
<!DOCTYPE html>
<html>
    <head>
    </head>
    <body>
        <div id="banner">
            <script type='text/javascript'>
            <!--//<![CDATA[
            var m3_u = (location.protocol=='https:'?'https://203.130.226.231/advediax/www/delivery/ajs.php':'http://203.130.226.231/advediax/www/delivery/ajs.php');
            var m3_r = Math.floor(Math.random()*99999999999);
            if (!document.MAX_used) document.MAX_used = ',';
            document.write ("<scr"+"ipt type='text/javascript' src='"+m3_u);
            document.write ("?zoneid=1");
            document.write ('&amp;cb=' + m3_r);
            if (document.MAX_used != ',') document.write ("&amp;exclude=" + document.MAX_used);
            document.write (document.charset ? '&amp;charset='+document.charset : (document.characterSet ? '&amp;charset='+document.characterSet : ''));
            document.write ("&amp;loc=" + escape(window.location));
            if (document.referrer) document.write ("&amp;referer=" + escape(document.referrer));
            if (document.context) document.write ("&context=" + escape(document.context));
            if (document.mmm_fo) document.write ("&amp;mmm_fo=1");
            document.write ("'><\/scr"+"ipt>");
            //]]>-->
        </script>
        </div>
    </body>
</html> 
```

在问题中，我无法将我的脚本插入并粘贴到 div id 横幅中，因为内容属于其他人。所以我只拥有mainpulation javascript。我的问题，可以将 javascript 从我的服务器移动到标签 div id 横幅中吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:01:26.990

```
document.getElementById('banner').innerHTML = 'script string (including tags)'; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T04:02:12.527

如果您使用 jQuery，则可以使用：

```
jQuery.getElementByID("banner").text(*Insert your code here*); 
```

# python - 在列表中查找特定模式

> ID：15674026
> 
> 赞同：2
> 
> 时间：2013-03-28T03:58:09.827
> 
> 标签：python

我正在尝试制定一个函数来查找列表中的特定模式。例如，如果我们取列表

```
x = [1,1,2,3,54,3,1] 
```

然后我想检查模式 y 是否出现在列表 x 中：

```
y = [1,1,n,n,n,n,1] 
```

其中 n 代表*任意*数字。所以在我的例子中它会返回*True*。

我已经研究了 any() 函数，但我无法解决很多问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T04:15:32.990

```
>>> from operator import itemgetter
>>> x = [1, 1, 2, 3, 54, 3, 1]
>>> itemgetter(0,1,6)(x) == (1, 1, 1)
True 
```

How is `y` *really* defined. Obviously you can't have `n` in there as a placeholder? Could your use `None` perhaps?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T04:16:39.173

```
from itertools import izip, islice
x = [2,1,3,1,1,2,3,54,3,1,5,6,7,1,1,0,0,0,0,1]
y = [1,1,None,None,None,None,1]

print [i for i in xrange(len(x)-len(y)+1) 
         if all(b is None or a==b for a,b in izip(islice(x, i, i+len(y)), y))] 
```

Or more code for easy to understand:

```
def nwise(x, n):
    for i in xrange(len(x)-n+1):
        yield i, islice(x, i, i+n)

def match(x, y):
    return all(b is None or a==b for a,b in izip(x, y))

print [i for i, xs in nwise(x, len(y)) if match(xs, y)] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T04:21:16.520

我想你对什么`any`意思感到困惑。它用于检查一系列值，并查看它们中的任何一个是否为“真”。这与找出一个值是“任何数字”还是“任何这些可能性”无关。

如果您`set`想考虑一个固定的、有限的可能性，那么您真正想知道的是您的候选值是否是`in`该集合：

```
x in {1, 2, 3, 4, "hi mom"} # returns whether x is any of those values 
```

但是“任意数”不是有限集。首先，您需要定义*数字*的含义；然后您需要执行适当的测试。听起来您要做的是检查该值是否为整数。换句话说，您关心列表中值的*类型*。

如果您已经**知道**它们都是整数，那么就没有什么可测试的了；如果您不在乎价值是多少，那么在进行检查时就不要考虑它。但是如果你需要确定它是一个整数，那么做到这一点的方法是

```
isinstance(x, int) # returns whether x is an `int` 
```

* * *

但是，当您实际上想在更长的列表中的任何位置查找模式时，您可能通过给出一个恰好与您的“模式”长度相同的示例“搜索列表”让**我**感到困惑。

在这种情况下，您可以创建一个函数，将模式与相同长度的列表进行完全匹配；然后用于`any`检查是否有任何模式长度的子列表匹配。`any`旨在与生成器表达式一起使用，它看起来像这样：

```
def match(a_sublist, the_pattern):
    # put your logic here

def search(the_full_list, the_pattern):
    pattern_length, full_length = len(the_pattern), len(the_full_list)
    return any(
        match(the_full_list[i:i+pattern_length], the_pattern)
        for i in range(full_length - pattern_length)
    ) 
```

根据模式的细节，有更有效的匹配方法，这将受到字符串搜索算法和正则表达式引擎的启发。但这涉及到更加困难的材料-以上内容应该可以帮助您入门。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T04:32:06.640

我想你想搜索一个模式匹配的列表......

```
x = [[1,1,2,3,54,3,1],[1,2,3,4,5,6,7],[2,4,6,8,10,12,14]]
y = [1,1,None,None,None,None,1] ## or [1,1,'n','n','n','n',1]

for l in x:
    if all(map(lambda x:x[0]==x[1],[x for x in zip(l,y) if x[1] and x[1]!='n'])):
        print l 
```

输出：

```
[1,1,2,3,54,3,1] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T05:16:08.417

```
x = [1,1,2,3,54,3,1]
y = [1,1,0,0,0,0,1]
any([i[0]==i[1] for i in zip(x,y)]) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T04:55:35.850

这种类型的问题非常适合[Numpy](http://www.numpy.org/) [掩码数组](http://docs.scipy.org/doc/numpy/reference/maskedarray.html)：

```
import numpy.ma as ma

x = ma.array([1,1,2,3,54,3,1])
y = ma.array([1,1,1,1,1,1,1], mask=[0,0,1,1,1,1,0])

print x==y           # [True True -- -- -- -- True]
print ma.all(x==y)   # True 
```

当然，这里的使用可能不值得安装和导入 numpy，但在某些情况下它有优势。

# slim-lang - slim - 文本未被识别为标签

> ID：15674027
> 
> 赞同：4
> 
> 时间：2013-03-28T03:58:20.340
> 
> 标签：slim-lang

Slim 的一个新问题

我期待以下 Slim 模板

```
div class="header"
h2  slim head 
p a test example of 
    span Slim 
span a new line with span
p 
    | expected a test example of <span>Slim</span> 
```

生成：

```
<div class="header">
<h2> slim head </h2>
    <p>a test example of <span>Slim</span></p>
    <span>a new line with span</span>
    <p>expected a test example of <span>Slim</span></p>
</div> 
```

但取而代之的是 span 标签未被识别并生成：

```
<div class="header">
  <h2> slim head </h2>
  <p>a test example of 
         span Slim </p>
  <span>a new line with span</span>
  <p>expected a test example of <span>Slim</span></p>
</div> 
```

为什么跨度被视为文本而不是标签？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-11T07:54:16.237

Slim 将您`span`视为文本，因为您在同一行中开始了段落的实际内容。您应该使用管道 ( `|`) 嵌套文本并在其后添加跨度，如下所示：

```
div class="header"
h2  slim head 
p 
    | a test example of 
    span Slim 
span a new line with span
p 
    | expected a test example of <span>Slim</span> 
```

这应该正确编译为：

```
<div class="header">
  <h2> slim head </h2>
  <p>a test example of <span> Slim</span></p>
  <span>a new line with span</span>
  <p>expected a test example of <span>Slim</span></p>
</div> 
```

# php - 循环播放来自 YouTube 上一个非常大的频道的视频？

> ID：15674028
> 
> 赞同：1
> 
> 时间：2013-03-28T03:58:22.053
> 
> 标签：php, youtube, zend-gdata

我目前正在使用**ZendGData从****youtube**上的频道获取**视频 ID**。但是，当频道非常**大**时，我收到此错误：

 ****```
Fatal error: Allowed memory size of 134217728 bytes exhausted (tried to allocate 
46 bytes) 
```

如果可以的话，我不会使用该库，但我找不到在**单个页面**上显示来自频道的**所有视频**的方法（当您通过按钮请求时，他们使用 Ajax 加载更多视频）。这将是最好的，因为我可以简单地剥离一些标签来获取 ID。

 **有没有人有办法解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-29T17:47:04.177

由于您正在创建负载和对象负载，因此您的 PHP 内存不足。对我有用的是将 PHP 内存限制设置为无限。您可以在 php.ini 或使用 ini_set('memory_limit', '-1');******

# c# - Royal Slider 中仅显示一个缩略图

> ID：15674031
> 
> 赞同：2
> 
> 时间：2013-03-28T03:58:48.443
> 
> 标签：c#, asp.net-mvc, image, slider

我最近购买了 Royal Slider 的许可证，并开始使用提供的文档在我们的 ASP.NET 网站中实现它：TheFullertonian.com。除了缩略图问题，我已经设法让滑块进入并工作。

我试图让我们的查看器像此链接中的那样工作：http: [//dimsemenov.com/plugins/royal-slider/gallery/](http://dimsemenov.com/plugins/royal-slider/gallery/)

我得到了使用 div 标签的链接示例。要查看多张照片，您只需在 (div class="col span_4 fwImage") 中添加更多“div id='imageId[####]”。代码中的锚标记显示图像最初在 dimsemenov.com 链接中的显示方式。

```
<div class="col span_4 fwImage">
<div id="gallery-1" class="royalSlider rsDefault">
<div id="imageId1108">
<a class="rsImg"
href="http://thefullertonian.com/Content/Article/2013.03.17_16.28.20_IMG_2664.JPG">
    </a>
        <div>
<a class="deleteLink" href="http://thefullertonian.com/Image/Delete/1108">Delete</a>
        </div>
<img width="96" height="72" class="rsTmb"                                                        
src="http://thefullertonian.com/Content/Article/2013.03.17_16.28.20_IMG_2664.JPG" /> 
</a>
</div>
<div id="imageId1105">
    <a class="rsImg"    
href="http://thefullertonian.com/Content/Article/2013.03.17_16.27.00_IMG_2660.JPG">
    </a>
        <div>
            <a class="deleteLink"  
href="http://thefullertonian.com/Image/Delete/1105">Delete</a>
        </div>
<img width="96" height="72" class="rsTmb"  
src="http://thefullertonian.com/Content/Article/2013.03.17_16.27.00_IMG_2660.JPG" />  
</a>
</div>
<div id="imageId1106">
    <a class="rsImg" 
href="http://thefullertonian.com/Content/Article/2013.03.17_16.27.03_IMG_2661.JPG">
    </a>
        <div>
            <a class="deleteLink" 
href="http://thefullertonian.com/Image/Delete/1106">Delete</a>
        </div>
    <img width="96" height="72" class="rsTmb"   
src="http://thefullertonian.com/Content/Article/2013.03.17_16.27.03_IMG_2661.JPG" /> 
</a>
</div>
<div id="imageId1107">
    <a class="rsImg"  
href="http://thefullertonian.com/Content/Article/2013.03.17_16.27.06_IMG_2662.JPG">
    </a>
        <div>
            <a class="deleteLink" 
href="http://thefullertonian.com/Image/Delete/1107">Delete</a>
        </div>
    <img width="96" height="72" class="rsTmb"  
src="http://thefullertonian.com/Content/Article/2013.03.17_16.27.06_IMG_2662.JPG" /> 
</a>
</div>
<div id="imageId1109">
    <a class="rsImg"  

href="http://thefullertonian.com/Content/Article/2013.03.17_16.38.01_IMG_2666.JPG">
    </a>
        <div>
            <a class="deleteLink"  
href="http://thefullertonian.com/Image/Delete/1109">Delete</a>
        </div>
    <img width="96" height="72" class="rsTmb"  
src="http://thefullertonian.com/Content/Article/2013.03.17_16.38.01_IMG_2666.JPG" /> 
</a>
</div>
<div id="imageId1110">
    <a class="rsImg"  
href="http://thefullertonian.com/Content/Article/2013.03.20_16.30.42_new-red-clown-wig- 
zoom.jpg">
    </a>
        <div>
            <a class="deleteLink"  
href="http://thefullertonian.com/Image/Delete/1110">Delete</a>
        </div>
    <img width="40" height="72" class="rsTmb"  
src="http://thefullertonian.com/Content/Article/2013.03.20_16.30.42_new-red-clown-wig- 
zoom.jpg" /></a>
</div>

<a class="rsImg" data-rsw="632" data-rsh="500" data- 
rsBigImg="http://dimsemenov.com/plugins/royal-slider/img/paintings/2.jpg"  
href="http://dimsemenov.com/plugins/royal-slider/img/paintings/700x500/2.jpg">Vincent 
van Gogh - The Starry Night<img width="96" height="72" class="rsTmb"  
src="http://dimsemenov.com/plugins/royal-slider/img/paintings/t/2.jpg" /></a>
<a class="rsImg"  data-
rsBigImg="http://thefullertonian.com/Content/Article/2013.03.20_16.30.42_new-red-clown-
wig-zoom.jpg" href="http://thefullertonian.com/Content/Article/2013.03.20_16.30.42_new- 
red-clown-wig-zoom.jpg">Leonardo da Vinci - Mona Lisa<img width="96" height="72" 
class="rsTmb" src="http://thefullertonian.com/Content/Article/2013.03.20_16.30.42_new-
red-clown-wig-zoom.jpg" /></a>
<a class="rsImg" data-rsw="417" data-rsh="500" data- 
rsBigImg="http://dimsemenov.com/plugins/royal-slider/img/paintings/4.jpg"  
href="http://dimsemenov.com/plugins/royal-slider/img/paintings/700x500/4.jpg">Grant 
DeVolson Wood - American Gothic<img width="96" height="72" class="rsTmb" 
src="http://dimsemenov.com/plugins/royal-slider/img/paintings/t/4.jpg" /></a>
<a class="rsImg" data-rsw="601" data-rsh="500" data-
rsBigImg="http://dimsemenov.com/plugins/royal-slider/img/paintings/5.jpg" 
href="http://dimsemenov.com/plugins/royal-slider/img/paintings/700x500/5.jpg">Rembrandt 
- The Night Watch<img width="96" height="72" class="rsTmb" 
src="http://dimsemenov.com/plugins/royal-slider/img/paintings/t/5.jpg" /></a>
<a class="rsImg" data-rsw="350" data-rsh="500" data-
rsBigImg="http://dimsemenov.com/plugins/royal-slider/img/paintings/6.jpg" 
href="http://dimsemenov.com/plugins/royal-slider/img/paintings/700x500/6.jpg">Johannes 
Vermeer - Girl with a Pearl Earring<img width="96" height="72" class="rsTmb" 
src="http://dimsemenov.com/plugins/royal-slider/img/paintings/t/6.jpg" /></a>
<a class="rsImg" data-rsw="596" data-rsh="500" data-
rsBigImg="http://dimsemenov.com/plugins/royal-slider/img/paintings/7.jpg" 
href="http://dimsemenov.com/plugins/royal-slider/img/paintings/700x500/7.jpg">Paul 
Cezanne - Card Players<img width="96" height="72" class="rsTmb" 
src="http://dimsemenov.com/plugins/royal-slider/img/paintings/t/7.jpg" /></a>
<a class="rsImg" data-rsw="700" data-rsh="414" data-
rsBigImg="http://dimsemenov.com/plugins/royal-slider/img/paintings/8.jpg" 
href="http://dimsemenov.com/plugins/royal-slider/img/paintings/700x500/8.jpg">Ilya 
Repin - Reply of the Zaporozhian Cossacks<img width="96" height="72" class="rsTmb" 
src="http://dimsemenov.com/plugins/royal-slider/img/paintings/t/8.jpg" /></a>
<a class="rsImg" data-rsw="470" data-rsh="500" data-
rsBigImg="http://dimsemenov.com/plugins/royal-slider/img/paintings/9.jpg"  
href="http://dimsemenov.com/plugins/royal-slider/img/paintings/700x500/9.jpg">Ivan 
Aivazovsky - Chesmabattle<img width="96" height="72" class="rsTmb" 
src="http://dimsemenov.com/plugins/royal-slider/img/paintings/t/9.jpg" /></a>
<a class="rsImg" data-rsw="500" data-rsh="500" data-
rsBigImg="http://dimsemenov.com/plugins/royal-slider/img/paintings/10.jpg" 
href="http://dimsemenov.com/plugins/royal-slider/img/paintings/700x500/10.jpg">Gustav 
Klimt - The Kiss<img width="96" height="72" class="rsTmb" 
src="http://dimsemenov.com/plugins/royal-slider/img/paintings/t/10.jpg" /></a>
 <a class="rsImg" data-rsw="700" data-rsh="475" data-
rsBigImg="http://dimsemenov.com/plugins/royal-slider/img/paintings/11.jpg" 
href="http://dimsemenov.com/plugins/royal-slider/img/paintings/700x500/11.jpg">Ivan 
Shishkin - Morning in a Pine Forest<img width="96" height="72" class="rsTmb" 
src="http://dimsemenov.com/plugins/royal-slider/img/paintings/t/11.jpg" /></a>
</div>
</div>
</div>
</div> 
```

我已经能够复制出画廊模板的纯 HTML 版本。缩略图就像在 dimseminov.com 链接中一样工作，但是实现 C# Razor 增加了一层难度。必须将脚本添加到滑块中，并且我们已将我们的脚本放在一个部分中，该部分还包含我们当前的 Royal Slider 实现。

```
<script>
$(function () {
    var bar = $('.bar');
    var percent = $('.percent');
    var status = $('#status');
    $('.royalSlider').royalSlider({
        fullscreen: {
            enabled: true,
            nativeFS: true
        },
        arrowsNav: true,
        imageAlignCenter: true,
        controlNavigation: 'thumbnails',
        loop: true,
        navigateByClick: true,
        autoScaleSlider: true,
        autoScaleSliderWidth: 42.5,
        autoScaleSliderHeight: 35,
        numImagesToPreload: 2,
        keyboardNavEnabled: true,
        fadeinLoadedSlide: true,
        thumbs: {
            fitInViewport: true,
            appendSpan: false,
            firstMargin: true,
            arrows: true,
            paddingBottom: 4,

        }
    });
    $('form').ajaxForm({
        beforeSend: function () {
            status.empty();
            var percentVal = '0%';
            bar.width(percentVal);
            percent.html(percentVal);
        },
        uploadProgress: function (event, position, total, percentComplete) {
            var percentVal = percentComplete + '%';
            bar.width(percentVal);
            percent.html(percentVal);
        },
        complete: function (xhr) {
            status.html(xhr.responseText);
        }
    });
});
</script> 
```

下面是 TheFullertonian 滑块的代码。出于某种原因，较大的图像会显示得很好，但在任何给定时间，查看器中只会显示一个缩略图。请将此代码与第一个 html 示例中列出的代码进行比较。

```
@if (Model != null)
{
<div class="royalSlider reDefault">
    @foreach (var item in Model)
    {
        <div id="imageId@(item.ImageId)">
            <a href="/Image/Details/@item.ImageId">
                <img src="@(item.FullPath)?width=650&height=431&mode=max&scale=canvas"
        alt="@item.Title" />
                <div>@item.Title</div>
            </a>
            <img height="72" class="rsTmb" src="@(item.FullPath)" />
        </div>
    }
    <div class="rsTmb"></div>
</div>
} 
```

我如何才能在一张照片下查看多个缩略图？到目前为止，我只看到一个与滑块上部显示的较大照片相关的缩略图。

如果您想查看滑块现在的外观，请点击以下链接： [http ://thefullertonian.com/Article/Details/739](http://thefullertonian.com/Article/Details/739)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:02:40.190

您只包含了核心 RoyalSlider JS 文件，没有模块。您需要包含缩略图模块才能使它们工作。

德米特里

# php - 允许登录表单在同一页面上处理 php 脚本而不刷新页面

> ID：15674032
> 
> 赞同：1
> 
> 时间：2013-03-28T03:59:01.467
> 
> 标签：php, html

**编辑**
感谢，Wes CI 现在有这个 AJAX 代码：

```
 <script type="text/javascript"> 
$(document).ready(function(){
    $("form[name^='login']").submit(function(event) {
        event.preventDefault();

        var dataToSend = 'username='+$("input[name^='username']").val()+'&password='+$("input[name^='password']").val();

        $.ajax({
            type: "POST",
            url: "index.php",
            data: dataToSend,
            success: function(response){
                if(response == "REDIRECT")
                {
                    window.location = "business_profiles/myReviews.php";
                else
                {
                    $("#my_error_div").html(response);
                }
            }
        });
    });
});
</script> 
```

但是现在，当您输入密码框时，而不是显示错误消息。我收到的只是一个警告框，上面写着“成功”，无论表单输入是什么。

好的，我已经尝试并尝试自己解决这个问题。除了联系其他编码人员，当然还搜索了 stackoverflow 以寻找答案。似乎没有一个真正符合我的情况。

我有一个简单的登录表单，如下所示：

```
<form name="login" action="index.php" method="post">

        <ul>

            <li>
                <input type="text" name="username" autocomplete="off" placeholder="Username" autofocus="true"></li>

            <li>
                <input type="password" name="password" autocomplete="off" placeholder="Password"></li>
            <li>

                <input type="submit" name="submit" value="Login"> <a href="register.php" id="button">Register</a> <a href="forgot.php" id="button">Forgot Password</a> <a href = "javascript:void(0)" onclick = "document.getElementById('light').style.display='none';document.getElementById('fade').style.display='none'" id="button">Close</a>

            </li>
        </ul>
    </form> 
```

此表单提交到它所在的同一页面。（php脚本就在登录表单的正上方。）如下：

```
 <?php

//If the user has submitted the form
if($_POST['username']){
    //protect the posted value then store them to variables
    $username = protect($_POST['username']);
    $password = protect($_POST['password']);

    //Check if the username or password boxes were not filled in
    if(!$username || !$password){
        //if not display an error message
        echo "<center>You need to fill in a <b>Username</b> and a <b>Password</b>!</center>";
    }else{
        //if the were continue checking

        //select all rows from the table where the username matches the one entered by the user
        $res = mysql_query("SELECT * FROM `users` WHERE `username` = '".$username."'");
        $num = mysql_num_rows($res);

        //check if there was not a match
        if($num == 0){
            //if not display an error message
            echo "<center>The <b>Username</b> you supplied does not exist!</center>";
        }else{
            //if there was a match continue checking

            //select all rows where the username and password match the ones submitted by the user
            $res = mysql_query("SELECT * FROM `users` WHERE `username` = '".$username."' AND `password` = '".$password."'");
            $num = mysql_num_rows($res);

            //check if there was not a match
            if($num == 0){
                //if not display error message
                echo "<center>The <b>Password</b> you supplied does not match the one for that username!</center>";
            }else{
                //if there was continue checking

                //split all fields fom the correct row into an associative array
                $row = mysql_fetch_assoc($res);

                //check to see if the user has not activated their account yet
                if($row['active'] != 1){
                    //if not display error message
                    echo "<center>You have not yet <b>Activated</b> your account!</center>";
                }else{
                    //if they have log them in

                    //set the login session storing there id - we use this to see if they are logged in or not
                    $_SESSION['uid'] = $row['id'];
                    //show message
                    echo "<center>You have successfully logged in!</center>";

                    //update the online field to 50 seconds into the future
                    $time = date('U')+50;
                    mysql_query("UPDATE `users` SET `online` = '".$time."' WHERE `id` = '".$_SESSION['uid']."'");

                    //redirect them to the usersonline page
                    echo 'REDIRECT';

                    exit;
                }
            }
        }
    }
}

?> 
```

我需要表单来处理脚本而不刷新页面。我的登录表单位于灯箱内，因此如果在页面刷新时出现密码无效等错误，灯箱会再次隐藏，您必须再次单击登录以找出您做错了什么。我只希望表单在不刷新页面的情况下处理 php 脚本，因此在用户成功登录之前，灯箱永远不会隐藏。然后用户被重定向到他们的个人资料。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:38:45.137

使用 jQuery，您可以使用以下 AJAX 函数将登录表单中的数据发布到同一页面：

```
<script type="text/javascript"> 
$(document).ready(function(){
    $("form[name^='login']").submit(function(event) {
        event.preventDefault();

        var dataToSend = 'username='+$("input[name^='username']").val()+'&password='+$("input[name^='password']").val();

        $.ajax({
            type: "POST",
            url: "index.php",
            data: dataToSend,
            success: function(response){
                if(response == "REDIRECT")
                {
                    window.location = "business_profiles/myReviews.php";
                }
                else
                {
                    alert("Error: "+response);
                    $("#my_error_div").html(response);
                }
            }
        });
    });
});
</script> 
```

此外，将您的 PHP 更改为：

```
<?php

//If the user has submitted the form
if(isset($_REQUEST['username'])){
    //protect the posted value then store them to variables
    $username = protect($_POST['username']);
    $password = protect($_POST['password']);

    //Check if the username or password boxes were not filled in
    if(!$username || !$password){
        //if not display an error message
        echo "<center>You need to fill in a <b>Username</b> and a <b>Password</b>!</center>";
    }else{
        //if the were continue checking

        //select all rows from the table where the username matches the one entered by the user
        $res = mysql_query("SELECT * FROM `users` WHERE `username` = '".$username."'");
        $num = mysql_num_rows($res);

        //check if there was not a match
        if($num == 0){
            //if not display an error message
            echo "<center>The <b>Username</b> you supplied does not exist!</center>";
        }else{
            //if there was a match continue checking

            //select all rows where the username and password match the ones submitted by the user
            $res = mysql_query("SELECT * FROM `users` WHERE `username` = '".$username."' AND `password` = '".$password."'");
            $num = mysql_num_rows($res);

            //check if there was not a match
            if($num == 0){
                //if not display error message
                echo "<center>The <b>Password</b> you supplied does not match the one for that username!</center>";
            }else{
                //if there was continue checking

                //split all fields fom the correct row into an associative array
                $row = mysql_fetch_assoc($res);

                //check to see if the user has not activated their account yet
                if($row['active'] != 1){
                    //if not display error message
                    echo "<center>You have not yet <b>Activated</b> your account!</center>";
                }else{
                    //if they have log them in

                    //set the login session storing there id - we use this to see if they are logged in or not
                    $_SESSION['uid'] = $row['id'];

                    //update the online field to 50 seconds into the future
                    $time = date('U')+50;
                    mysql_query("UPDATE `users` SET `online` = '".$time."' WHERE `id` = '".$_SESSION['uid']."'");

                    //redirect them to the usersonline page
                    echo 'REDIRECT';
                }
            }
        }
    }

    exit;
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T04:54:40.677

step1：在您的登录表单中添加一个 div。

step2：验证用户控件，然后在ajax调用中加载页面

step3：在 ajax 成功事件中附加要使用的页面`.html()`

# python - 如何在 Python 中递归地添加整数？

> ID：15674037
> 
> 赞同：-1
> 
> 时间：2013-03-28T03:59:28.000
> 
> 标签：python, recursion, add

所以我不久前写了这段代码，但现在我必须递归地写它。该程序接受输入并将其相加。

例如`input=55`答案应该是`10`。如果`input=2645`答案应该是`17`

```
def sumD(num):
    sumofdigits=0
    while num !=0:
        sumofdigits+=num%10
        num=num//10
    return sumofdigits

def main():
    num=int(input("Enter number : "))
    print(sumD(num))

main() 
```

该`def sumD(num)`函数必须调用自身。我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T04:01:22.587

```
def sumD(num):
    if num == 0: return 0
    return (num % 10) + sumD(num // 10) 
```

# java - tomcat + Jenkins + Java EE 源 = 编译失败

> ID：15674040
> 
> 赞同：0
> 
> 时间：2013-03-28T03:59:48.403
> 
> 标签：java, jakarta-ee, ant, jboss, jenkins

我很难让我非常简单的 Java EE 源代码在运行在 tomcat6（在 Centos 6.x 上）上的 Jenkins 中编译。我尝试下载 JBoss，但找不到 Java EE jar 文件，因此我可以将它们包含在我的 ANT 脚本中。我从 Oracle 下载了 JavaEE，它是 .sh shell 脚本（80mb），我猜想通过提取或编译各种 jar 来“安装”java ee。问题是它不会运行，因为 Oracle shell 脚本需要运行 X11 实例（GUI）......但这是一个无头服务器。

目标是让一个使用 JavaEE 的项目在夜间工作。

我需要以某种方式找到如何仅将 JBoss 用于它的 java ee 库（以便我可以编译我的代码），或者需要以某种方式让 oracle 的产品工作？或者我的设置还有其他选择吗？

这是我的 Jenkins/Ant 日志输出：

```
build-project:
 [echo] JUtils: /usr/share/tomcat6/.jenkins/jobs/JUtils-Nightly/workspace/build.xml
[javac] Compiling 27 source files to /usr/share/tomcat6/.jenkins/jobs/JUtils-Nightly/workspace/target/tmp
[javac] /usr/share/tomcat6/.jenkins/jobs/JUtils-Nightly/workspace/src/net/snakedoc/jutils/SendEmail.java:21: error: package javax.mail does not exist
[javac] import javax.mail.Message;
[javac]                  ^
[javac] /usr/share/tomcat6/.jenkins/jobs/JUtils-Nightly/workspace/src/net/snakedoc/jutils/SendEmail.java:22: error: package javax.mail does not exist
[javac] import javax.mail.MessagingException;
[javac]                  ^
[javac] /usr/share/tomcat6/.jenkins/jobs/JUtils-Nightly/workspace/src/net/snakedoc/jutils/SendEmail.java:23: error: package javax.mail does not exist
[javac] import javax.mail.Session;
[javac]                  ^
[javac] /usr/share/tomcat6/.jenkins/jobs/JUtils-Nightly/workspace/src/net/snakedoc/jutils/SendEmail.java:24: error: package javax.mail does not exist
[javac] import javax.mail.Transport;
[javac]                  ^
[javac] /usr/share/tomcat6/.jenkins/jobs/JUtils-Nightly/workspace/src/net/snakedoc/jutils/SendEmail.java:25: error: package javax.mail.internet does not exist
[javac] import javax.mail.internet.AddressException;
[javac]                           ^
[javac] /usr/share/tomcat6/.jenkins/jobs/JUtils-Nightly/workspace/src/net/snakedoc/jutils/SendEmail.java:26: error: package javax.mail.internet does not exist
[javac] import javax.mail.internet.InternetAddress;
[javac]                           ^
[javac] /usr/share/tomcat6/.jenkins/jobs/JUtils-Nightly/workspace/src/net/snakedoc/jutils/SendEmail.java:27: error: package javax.mail.internet does not exist
[javac] import javax.mail.internet.MimeMessage;
[javac]                           ^
[javac] /usr/share/tomcat6/.jenkins/jobs/JUtils-Nightly/workspace/src/net/snakedoc/jutils/SendEmail.java:51: error: cannot find symbol
[javac]             throws AddressException, MessagingException {
[javac]                    ^
[javac]   symbol:   class AddressException
[javac]   location: class SendEmail
[javac] /usr/share/tomcat6/.jenkins/jobs/JUtils-Nightly/workspace/src/net/snakedoc/jutils/SendEmail.java:51: error: cannot find symbol
[javac]             throws AddressException, MessagingException {
[javac]                                      ^
[javac]   symbol:   class MessagingException
[javac]   location: class SendEmail
[javac] /usr/share/tomcat6/.jenkins/jobs/JUtils-Nightly/workspace/src/net/snakedoc/jutils/SendEmail.java:63: error: cannot find symbol
[javac]         Session session = Session.getDefaultInstance(props, null);
[javac]         ^
[javac]   symbol:   class Session
[javac]   location: class SendEmail
[javac] /usr/share/tomcat6/.jenkins/jobs/JUtils-Nightly/workspace/src/net/snakedoc/jutils/SendEmail.java:63: error: cannot find symbol
[javac]         Session session = Session.getDefaultInstance(props, null);
[javac]                           ^
[javac]   symbol:   variable Session
[javac]   location: class SendEmail
[javac] /usr/share/tomcat6/.jenkins/jobs/JUtils-Nightly/workspace/src/net/snakedoc/jutils/SendEmail.java:64: error: cannot find symbol
[javac]         MimeMessage message = new MimeMessage(session);
[javac]         ^
[javac]   symbol:   class MimeMessage
[javac]   location: class SendEmail
[javac] /usr/share/tomcat6/.jenkins/jobs/JUtils-Nightly/workspace/src/net/snakedoc/jutils/SendEmail.java:64: error: cannot find symbol
[javac]         MimeMessage message = new MimeMessage(session);
[javac]                                   ^
[javac]   symbol:   class MimeMessage
[javac]   location: class SendEmail
[javac] /usr/share/tomcat6/.jenkins/jobs/JUtils-Nightly/workspace/src/net/snakedoc/jutils/SendEmail.java:65: error: cannot find symbol
[javac]         message.setFrom(new InternetAddress(from));
[javac]                             ^
[javac]   symbol:   class InternetAddress
[javac]   location: class SendEmail
[javac] /usr/share/tomcat6/.jenkins/jobs/JUtils-Nightly/workspace/src/net/snakedoc/jutils/SendEmail.java:67: error: cannot find symbol
[javac]         InternetAddress[] toAddress = new InternetAddress[to.length];
[javac]         ^
[javac]   symbol:   class InternetAddress
[javac]   location: class SendEmail
[javac] /usr/share/tomcat6/.jenkins/jobs/JUtils-Nightly/workspace/src/net/snakedoc/jutils/SendEmail.java:67: error: cannot find symbol
[javac]         InternetAddress[] toAddress = new InternetAddress[to.length];
[javac]                                           ^
[javac]   symbol:   class InternetAddress
[javac]   location: class SendEmail
[javac] /usr/share/tomcat6/.jenkins/jobs/JUtils-Nightly/workspace/src/net/snakedoc/jutils/SendEmail.java:71: error: cannot find symbol
[javac]             toAddress[i] = new InternetAddress(to[i]);
[javac]                                ^
[javac]   symbol:   class InternetAddress
[javac]   location: class SendEmail
[javac] /usr/share/tomcat6/.jenkins/jobs/JUtils-Nightly/workspace/src/net/snakedoc/jutils/SendEmail.java:76: error: package Message does not exist
[javac]             message.addRecipient(Message.RecipientType.TO, toAddress[i]);
[javac]                                         ^
[javac] /usr/share/tomcat6/.jenkins/jobs/JUtils-Nightly/workspace/src/net/snakedoc/jutils/SendEmail.java:82: error: cannot find symbol
[javac]         Transport transport = session.getTransport("smtp");
[javac]         ^
[javac]   symbol:   class Transport
[javac]   location: class SendEmail
[javac] 19 errors

BUILD FAILED
/usr/share/tomcat6/.jenkins/jobs/JUtils-Nightly/workspace/build.xml:54: Compile failed; see the compiler error output for details.

Total time: 4 seconds
Build step 'Invoke Ant' marked build as failure
Finished: FAILURE 
```

编辑：（蚂蚁构建脚本）

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project basedir="." default="build" name="JUtils">
<property environment="env"/>
<property name="ECLIPSE_HOME" value="../../../../../Program Files/eclipse-jee-juno-SR1-win32-x86_64/eclipse"/>
<property name="JAVAEE_HOME" value="/opt/jboss/modules/**"/>
<property name="debuglevel" value="source,lines,vars"/>
<property name="target" value="1.7"/>
<property name="source" value="1.7"/>
<property name="dest_dir" value="target"/>
<property name="tmp_dir" value="tmp"/>
<property name="jar_name" value="JUtils"/>
<path id="javaee.libraryclasspath">
        <pathelement location="${JAVAEE_HOME}"/>
    </path>
<tstamp>
    <format property="build.datestamp" pattern="yyyy-MM-dd" locale="en,US"/>
</tstamp>
<path id="JUtils.classpath">
    <pathelement location="bin"/>
    <pathelement location="lib/h2-1.3.170.jar"/>
    <pathelement location="lib/hsqldb.jar"/>
    <pathelement location="lib/jt400.jar"/>
    <pathelement location="lib/log4j-1.2.17.jar"/>
    <pathelement location="lib/mariadb-java-client-1.1.1.jar"/>
    <pathelement location="lib/mysql-connector-java-5.1.23-bin.jar"/>
    <pathelement location="lib/postgresql-9.2-1002.jdbc4.jar"/>
    <pathelement location="lib/sqlite-jdbc-3.7.2.jar"/>
    <path refid="javaee.libraryclasspath"/>
</path>
<target name="init">
    <mkdir dir="${dest_dir}"/>
    <mkdir dir="${dest_dir}/${tmp_dir}"/>
    <mkdir dir="${dest_dir}/${tmp_dir}/src"/>
    <mkdir dir="${dest_dir}/${tmp_dir}/doc"/>
    <mkdir dir="${dest_dir}/${tmp_dir}/lib"/>
    <mkdir dir="${dest_dir}/${tmp_dir}/META-INF"/>
    <copy includeemptydirs="false" todir="${dest_dir}">
        <fileset dir="src">
            <exclude name="**/*.java"/>
        </fileset>
    </copy>
    <copy includeemptydirs="false" todir="${dest_dir}/${tmp_dir}">
        <fileset dir=".">
            <include name="**/*"/>
            <exclude name="target/**"/>
            <exclude name="logs/**"/>
            <exclude name="bin/**"/>
        </fileset>
    </copy>
</target>
<target name="clean">
    <delete dir="${dest_dir}"/>
</target>
<target depends="clean" name="cleanall"/>
<target depends="build-subprojects,build-project,jar" name="build"/>
<target name="build-subprojects"/>
<target depends="init" name="build-project">
    <echo message="${ant.project.name}: ${ant.file}"/>
    <javac debug="true" debuglevel="${debuglevel}" destdir="${dest_dir}/${tmp_dir}" includeantruntime="false" source="${source}" target="${target}">
        <src path="src"/>
        <classpath refid="JUtils.classpath"/>
    </javac>
</target>
<target name="create_manifest">
    <manifest file="${dest_dir}/${tmp_dir}/META-INF/MANIFEST.MF">
        <attribute name="Manifest-Version" value="1.0"/>
        <attribute name="Website" value="www.snakedoc.net"/>
        <attribute name="Project" value="JUtils-${build.datestamp}"/>
    </manifest>
</target>
<target depends="create_manifest" name="jar">
    <jar destfile="${dest_dir}/${jar_name}-${build.datestamp}.jar" basedir="${dest_dir}/${tmp_dir}"/>
</target>
<target description="Build all projects which reference this project. Useful to propagate changes." name="build-refprojects"/>
<target description="copy Eclipse compiler jars to ant lib directory" name="init-eclipse-compiler">
    <copy todir="${ant.library.dir}">
        <fileset dir="${ECLIPSE_HOME}/plugins" includes="org.eclipse.jdt.core_*.jar"/>
    </copy>
    <unzip dest="${ant.library.dir}">
        <patternset includes="jdtCompilerAdapter.jar"/>
        <fileset dir="${ECLIPSE_HOME}/plugins" includes="org.eclipse.jdt.core_*.jar"/>
    </unzip>
</target>
<target description="compile project with Eclipse compiler" name="build-eclipse-compiler">
    <property name="build.compiler" value="org.eclipse.jdt.core.JDTCompilerAdapter"/>
    <antcall target="build"/>
</target>
<target name="DBTest">
    <java classname="net.snakedoc.jutils.testsuite.DBTest" failonerror="true" fork="yes">
        <classpath refid="JUtils.classpath"/>
    </java>
</target> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:11:21.690

您当前的所有错误都与 Java Mail 有关。

*   您可以从[Oracle JavaMail](http://www.oracle.com/technetwork/java/index-138643.html)页面下载 JavaMail API 库。
*   [您可以从Oracle Java EE 6 SDK 下载](http://www.oracle.com/technetwork/java/javaee/downloads/index.html)页面下载 JEE6 SDK

附带说明一下，使用 Maven 会使这些依赖问题变得微不足道。

```
<dependency>
    <groupId>javax</groupId>
    <artifactId>javaee-web-api</artifactId>
    <version>6.0</version>
    <scope>provided</scope>
</dependency>

<dependency>
    <groupId>javax.mail</groupId>
    <artifactId>mail</artifactId>
    <version>1.4.6</version>
</dependency> 
```

# c++ - 使用 Libcurl 将非常大的字符串发送到使用 REST API 的服务器？

> ID：15674042
> 
> 赞同：4
> 
> 时间：2013-03-28T03:59:49.353
> 
> 标签：c++, http, rest, networking, libcurl

我正在尝试将非常大的字符串（价值高达 16GB）发送到云服务器（类似于 AWS），以便使用 REST API 作为文件存储。我想以较小的块将字符串流式传输到服务器，并且字符串块将即时生成。据我所知，将传输编码设置为“分块”将帮助我做到这一点。我已经开始使用 libcurl 库编写一个 C++ 程序来执行此操作。这是一个带有简化测试字符串的相关片段：

```
headers = curl_slist_append(headers, "Accept: text/plain");
headers = curl_slist_append(headers, "Content-Type: binary/octet-stream");
headers = curl_slist_append(headers, "Transfer-Encoding: chunked");

curl_easy_setopt(curl, CURLOPT_VERBOSE, true);
curl_easy_setopt(curl, CURLOPT_CUSTOMREQUEST, "PUT");
curl_easy_setopt(curl, CURLOPT_HTTPHEADER, headers);
curl_easy_setopt(curl, CURLOPT_URL, "http://192.168.0.1:8080/namespace/test/test");

curl_easy_setopt(curl, CURLOPT_POSTFIELDS, "5/r/nHELLO/r/n");
curl_res = curl_easy_perform(curl);

curl_easy_setopt(curl, CURLOPT_POSTFIELDS, "3/r/nBYE/r/n");
curl_res = curl_easy_perform(curl);

curl_easy_setopt(curl, CURLOPT_POSTFIELDS, "0/r/n");
curl_res = curl_easy_perform(curl); 
```

根据我对分块传输的理解，每个块应该以十六进制数字表示的字符串大小开头，然后是实际字符串。当大小遇到零时，服务器知道传输已完成（[http://en.wikipedia.org/wiki/Chunked_transfer_encoding](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)）。但是，当我在执行上述操作后查看文件的内容时，我看到的只是“0”而不是“HELLOBYE”。因此，它不仅在每次块传输时覆盖文件，而且还将字符串的大小解释为字符串的一部分。

所以我的问题归结为：

1.  如何让它将我的块传输的第一部分解释为字符串的大小？
2.  我怎样才能让它“连接”顺序块传输？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T09:45:10.993

这很容易用 libcurl 完成，但你应该让 libcurl 完成整个请求，你应该只向它提供数据以一点一点地发送。curl 网站上的[post-callback.c](http://curl.haxx.se/libcurl/c/post-callback.html)示例几乎正是您所要求的。

关键是设置正确的标头，然后使用读取回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T04:13:37.203

稀薄。不知道我的回答能不能解决你的问题。但是请尝试一下并分享更改后的结果。

将以下配置添加到 curl：

```
curl_easy_setopt(curl, CURLOPT_HTTP_TRANSFER_DECODING, 0); 
```

这样做的原因是 libcurl 默认会为您解码块。

也许让我为您提供更多帮助的更好方法是发布您的网络标头和由wireshark捕获的数据？否则真的很难调试网络编程。

另一方面，我认为主要问题在于 libcurl。[因此，我强烈建议您在curl 库邮件](http://cool.haxx.se/mailman/listinfo/curl-library)列表下注册一个 curl 邮件列表，以便您可以向这些专家广播您的查询。它会让你受益匪浅。

# javascript - 如何用 CSS 制作动画？

> ID：15674044
> 
> 赞同：0
> 
> 时间：2013-03-28T04:00:00.643
> 
> 标签：javascript, jquery, css, html

我正在从事音频会议项目，以在所有最新的浏览器上工作。谁在麦克风上讲话，将在服务器上生成一个事件并在 javascripts 中调用一个函数（whoIsTalking()）。我正在替换 CSS 以进行动画处理，以便通过根据需要切换 CSS（进而切换背景图片）来提高音量。但是 javascript 运行得如此之快，以至于我看不到 css 的任何变化。我需要在演讲者讲话时提高和降低音量。谁可以帮我这个事？

```
this.whoIsTalking = function (action, id, type) {
    if(_selfM.logging) {
        log.info("The current user who is " + action + " with id " + id + " , recieved from :" + type);
    }
    talker(id);
}
/**
 * Change class for talker
 *
 */
function talker(id) {
    if(_selfM.logging) log.debug('Now in the "talker" function');
    var talker = "talker_" + id;
    $('span#' + talker).alterClass('btn-volum*', 'btn-volume_low');
    console.log($('span#' + talker));
    $('span#' + talker).alterClass('btn-volum*', 'btn-volume_medium');
    $('span#' + talker).alterClass('btn-volum*', 'btn-volume_high');
    $('span#' + talker).alterClass('btn-volum*', 'btn-volume_medium');
    $('span#' + talker).alterClass('btn-volum*', 'btn-volume_low');
    $('span#' + talker).alterClass('btn-volum*', 'btn-volume');
} 
```

注：`alterClass('x','y')`同`removeClass('x').addClass('y')`；参考：[alterClass](https://gist.github.com/peteboere/1517285)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:53:36.747

您可以使用计时器来调整班级更改的时间，以便它们间隔出可预测的时间量：

```
function talker(id) {
    if(_selfM.logging) log.debug('Now in the "talker" function');
    var volumes = ["_low", "_medium", "_high", "_medium", "_low", ""];
    var item = $('#talker_' + id);
    var index = 0;
    function next() {
        var cls = item.attr("class");
        var match = cls.match(/(btn-volume.*?)[\s$]/);
        if (match) {
            item.removeClass(match[1]);
        }
        item.addClass("btn-volume" + volumes[index]);
        index++;
        // if still more to go, set timer for next class change
        if (index < volumes.length) {
            setTimeout(next, 500);
        }
    }
    // start the process
    next();
} 
```

这也使用了一个卷名数组来避免重复大量的代码和名称。

# javascript - 如何垂直显示一组动态生成的按钮

> ID：15674059
> 
> 赞同：0
> 
> 时间：2013-03-28T04:01:31.210
> 
> 标签：javascript, jquery, css

所以我正在使用 jQuery 循环插件制作一个 jQuery 幻灯片。

部分代码生成了一些`<input type="button">`带有`value`from `1`to的元素`i`（其中`i`等于幻灯片的总数）

我正在尝试设置这些按钮的样式，以便它们出现在幻灯片中的图像顶部。我有那部分还可以。但是它们在图像上水平排列，我想在图像顶部垂直显示它们。

我该怎么做呢？

这是目前我的 CSS 的样子：

```
input[type=button] {
    position: relative;
    float: center;
    padding: 10px;
    left: 750px;
    z-index: 1000;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T04:03:17.500

**替换这个**

```
input[type=button] {
    position: relative;
    float: center;
    padding: 10px;
    left: 750px;
    z-index: 1000;
} 
```

**进入这个**

```
input[type=button] {
    position: relative;
    padding: 10px;
    left: 750px;
    z-index: 1000;
} 
```

不习惯`float: center`这是`wrong property`

过去只`float: left`和`float: right;`

更多关于**[浮动](http://css-tricks.com/all-about-floats/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T04:08:11.767

您可以通过添加`display:block`到您的输入来实现效果.. [http://jsfiddle.net/NqN5y/6/](http://jsfiddle.net/NqN5y/6/)

```
input[type=button] {
    padding: 10px;
    position: relative;    
    left: 350px;
    z-index: 1000;
    display:block;
} 
```

另一个简单的解决方案是将按钮包含在 div 中。为 div 和 bingo 设置固定宽度。

[http://jsfiddle.net/NqN5y/1/](http://jsfiddle.net/NqN5y/1/)

```
<div id="buttons">
<input type="button" value="1"/>
<input type="button" value="2"/>
<input type="button" value="3"/>
<input type="button" value="4"/>
</div> 
```

```
input[type=button] {
    position: relative;
    float: center;
    padding: 10px;
    left: 350px;
    z-index: 1000;
}

#buttons{width:50px;} 
```

然后，您可以将您的位置样式移动到容器 div.. [http://jsfiddle.net/NqN5y/5/](http://jsfiddle.net/NqN5y/5/)

```
input[type=button] {
    padding:10px;
}

#buttons{width:50px;background-color:#afa;
    position: relative;
    left: 350px;
    z-index: 1000;
} 
```

# html - 水平调整窗口大小时如何缩小图像宽度（同时保持居中）？

> ID：15674061
> 
> 赞同：0
> 
> 时间：2013-03-28T04:01:42.927
> 
> 标签：html, css, resize

我想知道当页面水平调整大小时如何缩小图像。我试图隐藏 HEADERLINE div 的溢出，但它只是隐藏了整个事情。

到目前为止，这是我的代码：http: [//jsfiddle.net/5W2C2/4/](http://jsfiddle.net/5W2C2/4/)

## HTML

```
<div id="headerline">
<img src="http://s21.postimg.org/l6t6akypj/line.jpg"/>
</div>

<div id="menu">
<img class ="blog" src="http://s18.postimg.org/il7hbk7i1/image.png">
<img class ="music" src="http://s18.postimg.org/4st2fxgqh/image.png">
<img class ="projects" src="http://s18.postimg.org/sxtrxn115/image.png">
<img class ="bio" src="http://s18.postimg.org/5xn4lb37d/image.png">
</div> 
```

## CSS

```
#headerline {
    height: 1px;
    width: 980px;
    margin: -10px auto 20px auto;
}

#menu {
    max-width: 700px;
    text-align: center;
    margin: auto;
}
#menu img {
    width: 150px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:24:59.710

所以我`overflow: hidden`重新添加，制作`width: 100%`并删除了指定的高度。这是你的目标吗？

**演示：http:** [//jsfiddle.net/Marcel/5W2C2/5/](http://jsfiddle.net/Marcel/5W2C2/5/)

# logic - RTL 中未连接电线

> ID：15674062
> 
> 赞同：0
> 
> 时间：2013-03-28T04:01:45.477
> 
> 标签：logic, hardware, vhdl, xilinx, digital-design

我有一些奇怪的问题，我的设计中没有连接一些电线。

我正在尝试制作一个简单的寄存器文件（我正在使用 Xilinx ISE）。这个寄存器文件包含 32 个寄存器，每个都是 32 位大小。寄存器文件有两个用于读取选择的 MUX（2 个并行读取）和一个用于写入选择的解码器。当我尝试将来自每个寄存器的信号连接到 2 个 MUX 时，信号出现在仅连接到一个 MUX 的 RTL 中。例如，设信号`reg2out`为 的输出`reg2`。我连接`reg2out`到 的引脚`I1`，`mux1`然后再次连接到的`reg2out`引脚`I1`。`mux2`然后 RTL 显示第二个多路复用器连接正确，但第一个多路复用器显示没有输入，没有选择器，也没有连接到它的输出。下图显示了 RTL。 ![问题](../Images/a20fa0f135ef090ac38bae6a63bbad60.png)

注意：ISE 在合成时会生成以下警告

> “警告：Xst:1348 - 单元多路复用器已合并（输出接口具有三态）”

我不明白。

主模块源“RegisterFile.vhd”可以在[这里](http://ideone.com/Rq9PqB)找到。我尝试了十几种修改来纠正，包括添加新信号，将寄存器输出存储在 D-FF 中，以及将寄存器输出存储在过程变量中；并且问题仍然存在。该设计包含另外两个文件：“dec.vhd”和“mux.vhd”。我相信这些模块的设计是正确的。

我该如何纠正这个问题？它是 ISE 中的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T06:07:16.483

这是 ISE 12.1 中的错误。然而，这似乎只是 RTL 示意图可视化中的一个错误，因为综合报告正确地提到了使用的组件。使用 ISE 版本 12.2，该问题不再重现。

# c# - 编写动态 Sql 时防止 Sql 注入

> ID：15674063
> 
> 赞同：0
> 
> 时间：2013-03-28T04:01:54.740
> 
> 标签：c#, sql, sql-server, sql-server-2008

由于遗留数据库访问层，我不得不为存储过程的参数动态创建 Sql 语句。

```
var p1 = Encoding.ASCII.GetString(p1).Replace("'", "''").Replace("\n", " ");
var p2 = Encoding.ASCII.GetString(p2).Replace("'", "''").Replace("\n", " ");
.....
var sql = string.Format("exec storedprocedure @p1='{0}', @p2='{1}', @p3='{2}', ....", 
    p1, p2, p3, ...); 
```

现在，在将字符串转换为 ascii 字符串后，我将替换`'`为`''`和替换为一个空白空间。`\n'`我还需要做什么？由于某些事实，我无法使用`SqlParamter`并且不得不连接字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T04:17:14.453

Dont.

Use [typed parameters](http://msdn.microsoft.com/en-us/library/yy6y35y8.aspx) on all of your queries that have dynamic inputs. All of the flavors of ADO have typed parameters, as well as ADO.NET providers for every database under the sun. If you try to roll your own SQL injection prevention, you're gonna have a bad time.

# git - 如何修复 Github Travis CI 构建中 git 子模块更新的权限被拒绝（公钥）错误？

> ID：15674064
> 
> 赞同：47
> 
> 时间：2013-03-28T04:01:58.473
> 
> 标签：git, github, git-submodules, travis-ci

我无法更新 git 子模块，出现错误：

```
$ git submodule init
Submodule 'build/html' (git@github.com:quadroid/clonejs.git) registered for path 'build/html'
...
$ git submodule update
Cloning into 'build/html'...
Warning: Permanently added 'github.com,207.97.227.239' (RSA) to the list of known hosts.
Permission denied (publickey).
fatal: Could not read from remote repository. 
```

但是当我在本地执行相同的任务时，一切正常。

我该如何解决这个问题，以便 Travis CI 构建通过并且我仍然可以单击 repo 中的子模块以定向到它？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2014-07-06T20:49:32.043

这可以（谢天谢地）通过在 Travis 上即时修改 .gitmodules 文件来轻松解决，以便在初始化子模块之前将 SSH URL 替换为公共 URL。为此，请将以下内容添加到 .travis.yml：

```
# Handle git submodules yourself
git:
    submodules: false
# Use sed to replace the SSH URL with the public URL, then initialize submodules
before_install:
    - sed -i 's/git@github.com:/https:\/\/github.com\//' .gitmodules
    - git submodule update --init --recursive 
```

感谢 Michael Iedema 的[要点](https://gist.github.com/iedemam/9830045)，我从中得出了这个解决方案。

如果您的子模块是私有存储库，它应该可以在 https URL 中包含凭据，我建议为此目的制作一个具有受限权限的[GitHub 访问令牌：](https://help.github.com/articles/creating-an-access-token-for-command-line-use)

```
# Replace <user> and <token> with your GitHub username and access token respectively
- sed -i 's/git@github.com:/https:\/\/<user>:<token>@github.com\//' .gitmodules 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-06-16T13:30:56.533

我建议`https`对子模块使用该方案，因为这将允许您使用 Travis 并在本地推送：`https://github.com/quadroid/clonejs.git`.

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-08-25T19:01:21.273

Travis 现在支持使用 ssh 访问子模块，这是迄今为止最简单的解决方案。您只需要将您的 ssh 密钥（或专用 CI 用户的 ssh 密钥）与您正在构建的 Github 项目相关联，如[私有依赖项文档](http://docs.travis-ci.com/user/private-dependencies/)中所述。

`$ travis sshkey --upload ~/.ssh/id_rsa -r myorg/main`

请注意，Travis 建议创建一个专用用户，这样您就不必使用自己的 ssh 密钥。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-04-23T22:22:44.347

您收到此错误是因为您通过 ssh-urls 指定了子模块。要从 travis-ci 环境进行 ssh 访问，您需要[配置一个密钥](http://docs.travis-ci.com/user/private-dependencies/)。

或者，你可以只为你的 git 子模块使用相对 URL，因为你的项目和你的子模块都在 Github 上可用。

Git 根据`ORIGIN`.

例子：

使用您的前 2 个条目`.gitmodules`：

```
[submodule "lib/es5-shim"]
        path = lib/es5-shim
        url = git@github.com:kriskowal/es5-shim.git
[submodule "build/html"]
        path = build/html
        url = git@github.com:quadroid/clonejs.git 
```

替换为相对 URL：

```
[submodule "lib/es5-shim"]
        path = lib/es5-shim
        url = ../../kriskowal/es5-shim.git
[submodule "build/html"]
        path = build/html
        url = ../clonejs.git 
```

然后当通过 https 克隆时 - 比如说 - 原点设置如下：

```
$ git clone https://github.com/quadroid/clonejs.git
$ cd clonejs
$ git remote -v
origin  https://github.com/quadroid/clonejs.git (fetch)
origin  https://github.com/quadroid/clonejs.git (push) 
```

通过 ssh 克隆时：

```
$ git clone git@github.com:quadroid/clonejs.git
$ cd clonejs
$ git remote -v                                
origin  git@github.com:quadroid/clonejs.git (fetch)
origin  git@github.com:quadroid/clonejs.git (push) 
```

使用相对 url，通常的子模块序列独立于原点工作：

```
$ git submodule init
$ git submodule update 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-14T15:11:27.053

您也可以通过 .gitmodules 直接操作您的 .gitmodules 文件`git`。（受此[答案](https://stackoverflow.com/a/30675130/4068264)的启发）。

```
git config --file=.gitmodules submodule.SUBMODULE_PATH.url https://github.com/ORG/REPO.git 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2022-01-17T14:54:30.043

**2022 年实际**：

1.  转到 travis-ci 中的 repo 设置并启用`Clone or Import`用作子模块的 repos 选项 [![克隆或导入](../Images/8598f169e47607ea5d376ee166dd291c.png)](https://i.stack.imgur.com/h5tJl.png)

2.  在你的使用`https`协议`.gitmodules`（但最好使用没有协议的相对路径）

3.  享受。我只花了3个小时搞清楚

# c# - 如何在 XML 文件中获取所有 subNode 的值

> ID：15674065
> 
> 赞同：1
> 
> 时间：2013-03-28T04:02:06.617
> 
> 标签：c#

我的 XML 是这种形式

```
<formatlist>
<format>
    <formatName>WHC format</formatName>
    <delCol>ID</delCol>
    <delCol>CDRID</delCol>
    <delCol>TGIN</delCol>
    <delCol>IPIn</delCol>
    <delCol>TGOUT</delCol>
    <delCol>IPOut</delCol>
</format>
<format>
    <formatName>Umobile format</formatName>
    <delCol>aaa</delCol>
    <delCol>bbb</delCol>
</format>
</formatlist> 
```

如果我只知道 formatName = WHC 格式并且想查找所有包含此格式的 delCol，即 ID、CDRID、.... 如何使用 c# 执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T04:09:15.010

这是我的方法：

```
var doc = XDocument.Parse("<formatList>...</formatList>");

var delCols = doc.Root
    .Elements("format")
    .First(e => e.Element("formatName").Value == "WHC format")
    .Elements("delCol")
    .Select(v => v.Value); 
```

`delCols`将是一个`IEnumerable<string>`你可以用来获取你的价值观。

# jquery - Jquery用变量动画高度？

> ID：15674068
> 
> 赞同：0
> 
> 时间：2013-03-28T04:02:19.443
> 
> 标签：jquery, html, css, jquery-animate

这是评论的 JSfiddle。我正在尝试使用修改 css 的 jquery 为 div 的高度设置动画。然而，由于这个项目的动态特性，高度将是未知的，并且是通过变量找到的。

[http://jsfiddle.net/8JwE9/6/](http://jsfiddle.net/8JwE9/6/)

```
$('span').hide();

  $('.span3').click(function() {

    var pollheight = $(this).find('span').height().toString(); //Trying to increase the DIV += this height (actually trying to toggle it but i'll hit that bridge later.

      //$(this).find('span').append(pollheight);

    $(this).animate({height: '+=80'},1000); //Trying to replace +=80 with a variable

        $(this).find('span').toggle(1000);
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:06:17.947

```
$(this).animate({height: '+=' + pollHeight},1000); 
```

这应该可以解决问题。

# javascript - 单击时如何更改文本的颜色

> ID：15674071
> 
> 赞同：0
> 
> 时间：2013-03-28T04:02:38.977
> 
> 标签：javascript, html

我想在单击它时更改文本的颜色。谁能让我知道为什么这段代码不起作用？

```
<html>
<body>
 <center>
  <div id="web" style="color:black" onclick="changeformat(this.id)"> Web </div>
  <div id="img" style="color:blue" onclick="changeformat(this.id)"> Images </div>
  <div id="news" style="color:blue" onclick="changeformat(this.id)"> News </div>
 </center>
</body>
</html>

<script>
function changeformat(type)
    {
    document.getElementById('web').style = "color:blue;";
    document.getElementById('img').style = "color:blue";
    document.getElementById('news').style = "color:blue";  
    document.getElementById(type).style = "color:black";
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:05:41.623

你几乎拥有它，使用`element.style.color`

[jsFiddle](http://jsfiddle.net/vWE6v/)

```
function changeformat(type) {
    document.getElementById('web').style.color = "blue;";
    document.getElementById('img').style.color = "blue";
    document.getElementById('news').style.color = "blue";  
    document.getElementById(type).style.color = "black";
} 
```

* * *

正如 Derek 指出的那样，您也可以使用`element.setAttribute()`，这将覆盖已经在元素上设置的其他内联样式。

[jsFiddle](http://jsfiddle.net/DerekL/V378R/)

```
function changeformat(type) {
    document.getElementById('web').setAttribute("style", "color:blue;");
    document.getElementById('img').setAttribute("style", "color:blue");
    document.getElementById('news').setAttribute("style", "color:blue");
    document.getElementById(type).setAttribute("style", "color:black");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T04:10:24.423

试试这个，它会工作。更改颜色的正确方法是使用： document.getElementById(id).style.color

```
<html>
<body>
 <center>
   <div id="web" style="color:black" onclick="changeformat(this.id)"> Web </div>
   <div id="img" style="color:blue" onclick="changeformat(this.id)"> Images </div>
   <div id="news" style="color:blue" onclick="changeformat(this.id)"> News </div>
 </center>
</body>
</html>

<script>
function changeformat(type)
{
document.getElementById('web').style.color = "blue";
    document.getElementById('img').style.color = "blue";
    document.getElementById('news').style.color = "blue";  
    document.getElementById(type).style.color = "black";
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T04:11:22.833

```
<div id="web" style="color:black" onclick="changeformat(this)"> Web </div>
<div id="img" style="color:blue" onclick="changeformat(this)"> Images </div>
<div id="news" style="color:blue" onclick="changeformat(this)"> News </div>

function changeformat(element) {
    var elements = ['web', 'img', 'news'];
    for( var i = 0, length = elements.length; i < length; i++  ) {
        document.getElementById( elements[i] ).style.color = 'blue';
    }
    element.style.color = "black";
} 
```

[演示](http://jsfiddle.net/KqNts/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T04:11:58.693

您必须以这种方式设置颜色：

```
//element.style.CSSProperty = Value;
  ele.style.color = "blue"; 
```

优化版：

```
<div id="web" style="color:black" onclick="changeformat(event)"> Web </div>

function changeformat(e){
    var eles = document.querySelectorAll("div");
    for(var i = 0 ; i < eles.length; i++){
        eles[i].style.color = "blue";
    }
    e.target.style.color = "black";
} 
```

演示：http: [//jsfiddle.net/DerekL/V378R/2/](http://jsfiddle.net/DerekL/V378R/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T04:24:45.817

试试这个代码

```
function changeformat(type)
    {
    document.getElementById('web').style.color = 'green'; 
    document.getElementById('img').style.color = 'pink'; 
    document.getElementById('news').style.color = 'red'; 
    document.getElementById(type).style.color = "black";
    } 
```

# cocoa - 可可控件，如智能邮箱以附加多个选项

> ID：15674074
> 
> 赞同：0
> 
> 时间：2013-03-28T04:02:53.877
> 
> 标签：cocoa

我喜欢苹果邮件的智能邮箱来附加多个选项。

图片参考：[http ://dl.dropbox.com/u/50660501/smart-mailbox.png](http://dl.dropbox.com/u/50660501/smart-mailbox.png)

它是 xcode 中的内置控件还是第三方控件？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:14:06.850

查看[NSRuleEditor](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSRuleEditor_class/Reference/Reference.html#//apple_ref/occ/cl/NSRuleEditor)及其更具体的子类[NSPredicateEditor](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSPredicateEditor_class/Reference/NSPredicateEditor.html)。这个想法是你向用户展示这个控件（你可以配置它使用你想要的模型的任何可搜索/可过滤属性），然后使用生成的[NSPredicate](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPredicate_Class/Reference/NSPredicate.html)作为某个集合的过滤器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T06:36:23.770

它是内置控制 ：`NSPopupButton`，，，`NSButton``NSBox`

![在此处输入图像描述](../Images/a20557fcecd082711f2f73a62bc66470.png)

# c# - Json控件发送数据的结构？

> ID：15674082
> 
> 赞同：0
> 
> 时间：2013-03-28T04:03:46.160
> 
> 标签：c#, asp.net, json, jquery

嗨，我将 JSON 用于 ASP.Net，并通过 WebMethods 进行。

这是我对那个 webmethod 的 Ajax 调用。

```
 $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "Voyage.aspx/V_Set",
            data: { 'Action': $('#txtNumber').val(), 'ID': $('#txtTag').val(), 'StartlID': $('#txtTag').val()},
            async: true,
            dataType: "json",
            success: function (data) {                  
                try {
                    alert("Record Inserted Successfully");
                } catch (ex) {
                    alert(ex);
                }
            },
            error: function (msg) {
                alert(error);
            }
        }); 
```

这里我首先尝试的数据格式是我的静态数据，格式是

```
 data: "{'Action':'Set','VID':'3','MasterID':'52','StartID':'1','LastID':'1'}" 
```

这绝对可以正常工作，我调用了那个 web 方法并完成了操作。

但现在我必须通过控件动态地给出这些值。因此，当我尝试将我的控件 ID 分配给数据时，Web 方法不会被触发。

任何人都可以通过发送控制来帮助数据结构吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T04:06:26.057

尝试在该行中使用客户端 ID

```
data: { 'Action': $('#txtVoyageNumber').val(), 'VoyageMasterID': $('#txtVesselTag').val(), 'StartTerminalID': $('#txtVesselTag').val()} 
```

如下

```
 "<%= someObject.ClientID %>" 

data: { 'Action': $('#<%=txtVoyageNumber.ClientID %>').val(), 'VoyageMasterID': $('#<%=txtTag.ClientID %>').val(), 'StartTerminalID': $('#<%=txtTag.ClientID %>').val()} 
```

## 编辑 1

现在你的函数看起来很整齐

```
 $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "Voyage.aspx/V_Set",
            data: { 'Action': $('#<%=txtNumber.ClientID %>').val(), 'VoyageMasterID': $('#<%=txtVesselTag.ClientID %>').val(), 'StartTerminalID': $('#<%=txtTag.ClientID %>').val()},
            async: true,
            dataType: "json",
            success: function (data) {                  
                try {
                    alert("Record Inserted Successfully");
                } catch (ex) {
                    alert(ex);
                }
            },
            error: function (msg) {
                alert(error);
            }
        }); 
```

# matlab - Matlab 错误：GROUP 必须是与 Y 长度相同的分组变量的元胞数组或矩阵

> ID：15674089
> 
> 赞同：0
> 
> 时间：2013-03-28T04:04:49.130
> 
> 标签：matlab, variables, grouping

这是我收到的错误：

* * *

```
Error using maineffectsplot (line 99)
GROUP must be a cell array or matrix of grouping variables with the same length as Y. 
```

* * *

这是我的代码：

```
%% main effect plot

data = [0.9000    1.0000    1.0000;    1.1000    1.1000    1.2000;    1.2000    1.1000    1.1000;    1.4000    1.4000    1.4000;
    1.0000    1.0000    0.9000;    1.1000    1.2000    1.1000;    0.9000    0.8000    0.8000;    0.9000    1.0000    0.9000;
    0.7000    0.8000    0.7000;    1.1000    1.2000    1.2000;    1.1000    1.0000    1.1000;    1.1000    1.1000    0.9000;
    0.8000    0.8000    0.7000;    0.9000    1.1000    1.0000;    0.8000    0.9000    0.8000;    1.1000    1.1000    1.0000];

    data = data';

    g1 = {'(1)', 'A', 'B' ,'C', 'D', 'AB', 'AC', 'AD', 'BC', 'BD', 'CD', 'ABC', 'BCD', 'ABD', 'ACD', 'ABCD'};
maineffectsplot(data, g1) 
```

帮助 maineffectsplot 说“每个分组变量必须具有与 Y 相同的行数” Y 有 16 行，g1 也有 16 行，我不明白为什么会收到此错误

我尝试了不同的数据组合 g1 ；数据，g1'等这些都不起作用

这张照片证实我以某种方式设法让它们都有 16 行

[屏幕截图](http://sphotos-g.ak.fbcdn.net/hphotos-ak-ash3/599793_620559034625330_513091458_n.jpg)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:18:28.283

g1 中只需要一个单元格，但它必须包含 16 行。尝试使用

```
g1 = {['(1)';'A';...;'ABCD']} 
```

# javascript - 如何使用箭头键从选择框中选择一个选项？

> ID：15674092
> 
> 赞同：1
> 
> 时间：2013-03-28T04:05:00.120
> 
> 标签：javascript, jquery, events, drop-down-menu

我尝试过使用`.change()`和/或使用`.select()`，甚至使用`.click()`，但没有希望。

当我停在带有选项卡焦点的选择框字段上时，并且当我按下向上或向下时，我希望立即选择当前聚焦的选项项。

是否可以使用 jQuery/JavaScript 实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:19:43.260

这比我想的要容易，当然是 jQuery：

```
$('#year').on('keyup', function() {
    $(this).change();
}); 
```

正如[Xander](https://stackoverflow.com/users/88932/xander)`.on('keyup')`所建议的那样，我只是在选择框字段顶部触发了事件，并且每次更改选择框的选定值时，它都会自动选择它并且我让事件正常工作！

感谢所有其他提供帮助的人。

# javascript - javascript日期时间_t转换

> ID：15674093
> 
> 赞同：0
> 
> 时间：2013-03-28T04:05:08.170
> 
> 标签：javascript, date, format, time-t

我在javascript中的日期格式有问题。我从数据库（例如 1364565600）中获取以秒为单位的日期（以 time_t 格式）现在我想将此日期转换为日、月、日（例如，3 月 18 日星期二）。

我希望这是可能的。

```
 timestart: function (time_start) {
                ///////////////////////////////
                //////code for conversion//////
                return  time_start;
             } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:09:21.527

将你得到的秒数乘以 1000 并使用一个新的 Date() 对象，它以毫秒为参数（基于与 time_t 相同的想法，即自纪元以来的秒数，但 Date() 基于毫秒） ：

```
 timestart: function (time_start) {

            return new Date(1000 * time_start);
         } 
```

要从中获取日期字符串，请使用 .toDateString()。您可以使用其他一些方法来获取日期信息并将其转换为您想要的类型，您可以在此处找到它们：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects /日期](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:28:48.063

javascript 日期对象中的[时间值是自 1970-01-01T00:00:00Z 以来的毫秒数（注意 UTC）。](http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.1.1)正如 Rob G 所说，您可以将该值传递给 Date 构造函数以获取日期对象，然后使用 Date 方法来获取您想要的内容。

如果您有来自同一纪元的 UTC 时间值（以秒为单位），请将其乘以 1,000 以获得毫秒并传递给日期构造函数：

```
var date = new Date(timeValue); 
```

您现在可以使用[toString](http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.5.2)、[toLocaleString](http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.5.5)、[toISOString](http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.5.43)等方法从对象中获取本地或 UTC 日期和时间字符串。您还可以使用标准 Date 方法来获取本地时间和日期值，或使用 UTC 方法（例如[getUTCFullYear](http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.5.11)）来获取 UTC 值，以构建您自己格式的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T04:27:20.030

对于 JavaScript 中的详细日期操作，如果您的部署/优化要求允许，使用库是最简单的。我发现[Moment JS](http://momentjs.com/)是一个很好的解决方案。

# c++ - 输出对齐的列

> ID：15674097
> 
> 赞同：8
> 
> 时间：2013-03-28T04:05:31.560
> 
> 标签：c++, cout

我正在学习 C++。我在格式化程序的输出时遇到问题。我想在那里打印完全对齐的列，但到目前为止我做不到，这是我的代码：

```
int main()
{
    employee employees[5];

    employees[0].setEmployee("Stone", 35.75, 053);
    employees[1].setEmployee("Rubble", 12, 163);
    employees[2].setEmployee("Flintstone", 15.75, 97);
    employees[3].setEmployee("Pebble", 10.25, 104);
    employees[4].setEmployee("Rockwall", 22.75, 15);

    printEmployees(employees, 5);

    return 0;
}

// print the employees in my array
void printEmployees(employee employees[], int number)
{
    int i;

    for (i=0; i<number; i++) {
        employees[i].printEmployee();// this is the method that give me problems
    }
    cout << "\n";
} 
```

在类员工中，我有打印员工方法：

```
void printEmployee() const
{
    cout << fixed;
    cout << surname << setw(10) << empNumber << "\t" << setw(4) << hourlyRate << "\n";
} 
```

问题是当我打印“flinstones”行时，emp 编号和 rate 没有对齐。发生这样的事情：

```
斯通 43 35.750000
碎石 163 12.000000
燧石 97 15.750000
鹅卵石 104 10.250000
罗克沃尔 15 22.750000

```

有谁能够帮助我？（我试图添加标签..但它没有帮助）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-28T04:24:32.197

在 print employee 方法的类employee 中： 使用此行进行打印。

```
cout << setw(20) << left << surname << setw(10) << left << empNumber << setw(4) << hourlyRate << endl; 
```

你忘了加“ `<< left`”。如果您想左对齐，这是必需的。

希望它会有用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-28T04:15:27.337

您需要在打印名称*之前设置一个宽度，以便在此之后排列其他内容。*这个一般顺序的东西：

```
cout << left << setw(15) << surname 
     << setw(10) << empNumber << "\t" 
     << setw(4) << hourlyRate << "\n"; 
```

我（至少通常）会避免尝试将固定宽度的字段与选项卡混合使用。通常只使用宽度来对齐事物更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-10T18:10:31.450

C++ 支持许多可用于格式化输出的特性。这些功能包括：

1.  ios 类函数和标志
2.  机械手

使用 ios 类函数，我们可以使用 ios 类的 width() 方法，如下所示：

![图像](../Images/66bd5de335f46d15dfbf21f37ec20c0c.png)

或者我们可以使用操纵器来格式化输出。要打印上述输出，我们可以使用：

```
cout << right << setw(5) << 543 << right << setw(5) << 12 << endl; 
```

它将为第一个参数分配 5 个字符宽度（这里是 543）并通过在右侧填充它来格式化它。同样，它将为第二个参数分配一个 5 个字符的字段。

# entity-framework-4 - 实体框架未对每个属性执行 Get

> ID：15674105
> 
> 赞同：0
> 
> 时间：2013-03-28T04:07:13.830
> 
> 标签：entity-framework-4

我正在使用实体框架 4.1。一个没有外键的简单表被映射到一个对象（TransmissionHistory 表和对象）。然而，当我保存时，其中一个字段为 NULL，尽管该值已明确设置，并且在浏览代码和编写时我可以看到它到日志。（字段名称是 WhoDidIt。）

在进一步调查中，我将对象中的自动属性替换为 Get 和 Set 以及私有支持属性。事实证明，当执行数据库 Save 时，执行了其他属性的“Get”，但不是我的问题 WhoDidIt 属性。

这是类定义的一部分：

```
 public partial class TransmissionHistory
{
    private string _id;
    private string _transmissonTable;
    private string _whoDidIt;

    public string Id
    {
        get { return _id; }
        set { _id = value;  }
    }
    public string TransmissionTable
    {
        get { return _transmissonTable; }
        set { _transmissonTable = value;  }
    }

    public string WhoDidIt
    {
        get { return _whoDidIt; }
        set { _whoDidIt = value;  }
    } 
```

这是创建和保存对象的代码。

```
 TransmissionHistory trxHist =  new TransmissionHistory();
        trxHist.Id = guid.ToString();
        trxHist.TransmissionTable = "MyTransmission";
        trxHist.WhoDidIt = "Me";
        _db.TransmissionHistories.Add(trxHist);
        _db.SaveChanges(); 
```

当我在其中设置断点时，很明显数据库 SaveChanges 正在访问其他两个属性的 Get 方法，而不是 WhoDidIt。所以即使 trxHist 对象在 WhoDidIt 中有一个值，它也总是作为 NULL 保存到数据库中。这是作为“数据库优先”构建的，Visual Studio 构建了该对象。我还尝试删除和重建表并重新生成代码，并更改了字段名称。这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T17:28:23.083

这个问题自行消失了，但我认为这是造成它的原因：

我们使用的是数据库优先方法。数据库中的基础表已更改，但 EDMX 模型未刷新。尽管这个特定字段没有改变，但在我们从数据库中刷新我们的模型之前，它似乎给出了这种奇怪的行为。

# c - 确定输入是否是C中的回文

> ID：15674110
> 
> 赞同：3
> 
> 时间：2013-03-28T04:07:31.487
> 
> 标签：c, palindrome

我对C相当陌生，我遇到了一些问题。我必须编写一个程序来接受用户输入并确定输入是否是回文。我有程序来反转输入，但我无法让字符串进行比较。所有输入都不是回文。我想使用整数下标索引来比较输入。另外我想忽略所有非字母字符，我认为这是一个 c.type 函数。

```
#include <stdio.h>
#include <string.h>
#define N 50

main()
{
    char array[N] = {0};
    char front;
    char end;
    char x;
    char w =0;
    char i;
    char forward;
    char reverse;

    printf("Enter Message: ");
    gets(array);

    front = sizeof(array);
    end = sizeof(array) - 1; 

    for( i = 0; i <= front; i++){      
       forward = array[i];

    } 
    for( x = end; x >= 0; x--){
       reverse = array[x];
    }

    if (forward != reverse){
       w = 1;
    }

    if(w == 1){
      printf("Not a Palindrome");
    } 
    else{
        printf("Palindrome");
    }

    printf("\n");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T04:27:00.283

我的 C 有点生疏，但你最多只需要搜索字符串长度的一半（减 1）。

```
int isPalindrome(char *str)
{
      char *p1 = str
      char *p2 = str + strlen(str) - 1;

      while(p2 > p1) {
          if (*p1 != *p2) return 0;
          p1++; p2--;
      }
      return 1;
} 
```

我们可以在相等检查中使用自动递增和递减，但它有点难以阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T04:22:24.047

您的代码中有很多错误。

首先**reverse**和**forward**应该是 type `char[]`， not `char`。使用**strlen**查找字符串的长度。 **sizeof**不起作用。`sizeof(array)`总会回来的`(sizeof(char)*50)`

**反转字符串**时出错。应该是`reverse[i]=array[x]`。

为了比较原始字符串和反向字符串是否相等，您只比较一个字符，因为变量 reverse 和 forward 在您的代码中属于 char 类型。您应该使用函数**比较**原始（正向）和反向字符串（字符数组）`strcmp`。

我已经纠正了它。这应该适用于每个测试用例。

```
#include <stdio.h>
#include <string.h>
#define N 50
int main()
{
    char array[N] = {0};
    char front;
    char end;
    char x;
    char i;
    char forward[N];
    char reverse[N];

    printf("Enter Message: ");
    gets(array);

    front = strlen(array);
    end = strlen(array) - 1; 
    for( i = 0; i <= front; i++)
    {      
        forward[i]= array[i];

    } 
    for( i=0,x = end; x >= 0; i++,x--)
    {
        reverse[i]= array[x];
    }
    reverse[i]=0;
    if (strcmp(forward,reverse)!=0)
    {
        printf("Not a Palindrome");
    } 
    else{
        printf("Palindrome");
    }

    printf("\n");
    return 0;
} 
```

**在 IDEONE查看[演示](http://ideone.com/SY5xrx)**

# jquery - Jquery删除第二个框上的选定文本

> ID：15674121
> 
> 赞同：0
> 
> 时间：2013-03-28T04:09:04.457
> 
> 标签：jquery, multi-select, optgroup

我使用[erichynds 的 jquery MultiSelect Plugin](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)更改为 2 级链式选择框，但它工作得很好，但到目前为止还有一个小缺陷需要修复。

[请在此处](http://jsfiddle.net/hsQjh/10/)查找工作示例。

例如，我在第一个框中选择了选项“2”，第二个框也将填充 optgroup 为“2”，然后我选择了“2B”，文本在第二个框中。好的，现在我在第一个框中取消选择“2”，“2”的 optgroup 消失了，但是文本仍然显示在第二个框中，当我在第一个框上取消选择相关选项时，如何与文本一起删除？

```
function filterActivityTrigger(e){
     var ids = $('#filterActivity + div input:checked').map(function(i) {
        return $(this).val().replace(/ .*/, '');
     }).get(); // Retrieve checked IDs

     $('#filterSubActivity + div div label').each(function() { // Show matching options
        $(this).toggle($.inArray($('input', this).val().replace(/(\d+).*/, '$1'), ids) > -1);
     });

     $('#filterSubActivity + div label.optGroup').each(function() { // Show matching groups
        $(this).toggle($(this).next().find('label:visible').length > 0);
     });
} 
```

请指教，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:09:49.940

您可以在第一个框中检查选中元素的长度，然后进行相应操作。请参考以下脚本：

```
function filterActivityTriggeredUser(e){
   var ids = $('#filterActivity + div input:checked').map(function(i) {
        return $(this).val().replace(/ .*/, '');
    }).get(); // Retrieve checked IDs
    var len = ids.length;

    $('#filterSubActivity + div div label').each(function() { // Show matching options
        $(this).toggle($.inArray($('input', this).val().replace(/(\d+).*/, '$1'), ids) > -1);
      if(len == 0)
            $('#filterSubActivity span').text('All');
             $(this).removeAttr('checked');
    });

    $('#filterSubActivity + div label.optGroup').each(function() { // Show matching groups
        $(this).toggle($(this).next().find('label:visible').length > 0);
    });
}

function filterSubActivityTriggeredUser(e){ 
    if($(e).attr('checked')=='checked') {

    }
}

$(document).ready(function() {

    $("#filterActivity").multiSelect({
        selectAll: false,
        noneSelected: 'All',
        oneOrMoreSelected: '*'
    },
    filterActivityTriggeredUser);

    $("#filterSubActivity").multiSelect({
        selectAll: false,
        noneSelected: 'All',
        noneSelectedText : 'All',
        oneOrMoreSelected: '*'
    },
    filterSubActivityTriggeredUser);

}); 
```

这是工作示例：http: [//jsfiddle.net/G2kXg/1/](http://jsfiddle.net/G2kXg/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T23:27:30.517

试试我的版本

```
function filterActivityTriggeredUser(e){
    var ids = $('#filterActivity + div input:checked').map(function(i) {
        return $(this).val().replace(/ .*/, '');
    }).get(); // Retrieve checked IDs
    $('#filterSubActivity + div div label').each(function() { // Show matching options
        $(this).toggle($.inArray($('input', this).val().replace(/(\d+).*/, '$1'), ids) > -1);
    });
    $('#filterSubActivity + div label.optGroup').each(function() { // Show matching groups
        $(this).toggle($(this).next().find('label:visible').length > 0);
    });

    var ids1 = [];
        $('#filterSubActivity + div div label:visible').each(function(i) {
             if($(this).find('input:checked').length>0)
                ids1.push($(this).text());
    });

    $('#filterSubActivity span').text(ids1.join(" ,"));  
    if(ids1.length==0)
        $('#filterSubActivity span').text('All');

} 
```

每次更改 filterActivity 时，我都会设置“filterSubActivity”

这是工作示例[http://jsfiddle.net/hsQjh/17/](http://jsfiddle.net/hsQjh/17/)

我希望这会有所帮助。

# actionscript-3 - 如何在 Scroller 中显示具有动态大小的标签

> ID：15674122
> 
> 赞同：1
> 
> 时间：2013-03-28T04:09:05.733
> 
> 标签：actionscript-3, apache-flex, scroller

我在我的一个应用程序中显示标签时遇到问题。

我有一个显示标签的视图。此标签的文本可以随时更新，并且此文本可以由一个单词组成，因为它可以是带有一些换行符的长文本。

如果整个文本可以适合父视图，我希望它垂直居中。如果太长不适合，我想显示一个滚动条。

所以我正在使用`Scroller`：

```
<s:Scroller left="5" top="50" right="5" bottom="5">
    <s:Group> 
        <s:Label id="description" text="{hostComponent.description}"
                 width="100%" verticalCenter="0"/>
    </s:Group>        
</s:Scroller> 
```

如果文本很短，则标签按预期居中，但是当文本足够长以显示 scollbar 时，我看不到第一行 (9)

如果我遗漏了，`verticalCenter="0"`那么长文本将显示正常，但短文本不再垂直居中。

有人对此有解释和/或我的问题的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:04:02.090

尝试使用 HGroup：

```
<s:Scroller id="scroller" left="5" top="50" right="5" bottom="5">
    <s:HGroup verticalAlign="middle" width="100%" height="100%"> 
        <s:Label id="description" text="{hostComponent.description}"
                 width="100%"/>
    </s:HGroup>        
</s:Scroller> 
```

# java - 我正在制作一个 Spring MVC Web 项目，我必须有一个恒定的标题。 我的基本要求是“我们希望在所有屏幕上都有一个标题，以显示谁登录了 ProjectA。” 我从这里查看了 jsp:include 或 %@include 问问题

> ID：15674125
> 
> 赞同：3
> 
> 时间：2013-03-28T04:09:15.507
> 
> 标签：java, spring-mvc, tiles, jspinclude

我正在制作一个 Spring MVC Web 项目，我必须有一个恒定的标题。

我的基本要求是“我们希望在所有屏幕上都有一个标题，以显示谁登录了 ProjectA。”

我从这里查看了 jsp:include 或 %@include[之间的区别“<jsp:include page = ... > 和 <%@ include file = ... > 之间有什么区别？](https://stackoverflow.com/questions/7879906/what-is-the-difference-between-jspinclude-page-and-include-file) ”但后来我有了根据这个例子也遇到瓷砖“ [http://viralpatel.net/blogs/spring-3-mvc-tiles-plugin-tutorial-example-eclipse/](http://viralpatel.net/blogs/spring-3-mvc-tiles-plugin-tutorial-example-eclipse/) ”

我的问题是……您对哪种方法更好地实现这一点有何看法。

旁注：我习惯于在 asp.net 中掌握页面，但似乎在 Java / Spring 中找不到类似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T04:40:21.977

当您需要在页面中包含静态内容时使用`@include`，即在运行时不会更改的内容。当您需要动态行为时，就像您上面提到的方式一样，您可能需要`jsp:include`，因为您包含的部分将根据谁登录到哪个项目而有所不同。

如果需要，您可以查看[此答案](https://stackoverflow.com/questions/7220275/can-i-import-my-own-jsp-page-into-another-jsp-page/7222401#7222401)以获得更多说明。

# css - 三列具有 33% 的宽度和边距/填充。为什么最后一列中断？

> ID：15674131
> 
> 赞同：1
> 
> 时间：2013-03-28T04:10:04.780
> 
> 标签：css, html

我试图以 % 为单位给出页面宽度。

所以我尝试了以下代码

```
<div id="mainContent" style="height: 350px">
               <div class="grid4">

                </div>
                <div class="grid4">

                </div>
                <div class="grid4">

                </div>

            </div> 
```

和下面的Grid4 css

```
.grid4
{
    Width: 33%;
    float:left;
} 
```

和主要内容宽度`100%.`

现在我试图放弃`padding or margin in percentage`任何`grid4`它正在推动下一个 Div 下降。

我应该使用什么属性来为 Width 提供内部填充？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T04:13:35.063

如果对`.grid4`列应用填充或边距，则它们的大小将添加到列的宽度：33% + 33% + 33% +（无论填充和边距的组合是什么）= ?? （很可能大于 100%）。这就是柱子断裂的原因。

如果将填充或边距应用于每列的子元素，则不会将大小添加到列的宽度中。33% + 33% + 33% = 99%。

如果您确实需要对列应用填充或边距，那么当与填充或边距结合使用时，您必须将宽度减小到加起来不超过 100% 的量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T04:18:07.940

在标准 CSS 盒子模型中，填充将其值添加到容器的宽度中。（宽度 + 填充 + 边框 = 盒子的实际可见/渲染宽度）

所以你的 grid4 宽度 = 33% + padding。这就是为什么它把它往下推。

您可以使用 CSS Box Sizing - 它允许您将填充添加到容器中，并且仍然将其实际宽度更改为您指定的宽度。

```
#mainContent{
    -webkit-box-sizing: border-box; 
       -moz-box-sizing: border-box;   
            box-sizing: border-box;     
} 
```

然后它应该像你希望的那样工作。

否则，您需要计算每个 grid4 的填充和宽度总计为 33%。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-30T18:59:58.650

我发现最简单的方法是将 3-up div 分别包装在第二个 div 中。包装器设置为 33% 宽度，然后容器应用边距。

像这样的CSS：

```
.one_third {
    width: 33%;
    float: left;
    text-align: center;
}
.boxes {
    background: #8888ff;
    margin: 3px;
    padding: 10px;
} 
```

和这样的HTML。

```
<div class="one_third">
    <div class="boxes">
        Hi there!
    </div>
</div>
<div class="one_third">
    <div class="boxes">
        Hi there!
    </div>
</div>
<div class="one_third">
    <div class="boxes">
        Hi there!
    </div>
</div> 
```

在此处查看实际操作：http: [//jsfiddle.net/rkmh56uy/](http://jsfiddle.net/rkmh56uy/)

# java - 尝试在正则表达式中使用 \w、\s 等时出现“无效的转义序列”

> ID：15674133
> 
> 赞同：-3
> 
> 时间：2013-03-28T04:10:11.873
> 
> 标签：java, regex

所以这个正则表达式是为了让我可以找到声明 java 文件的每种方法。我相信这应该得到我正在使用它的java文件的每个实例，但问题是我不断得到无效的转义序列（有效的是 \b \t \n \f \r \" \' \ ）。

这是字符串。

```
private String map = "(public|final|protected|private|static|\s) (final|static)* +[\w\<\>\[\]]+\s+(\w+) *\([^\)]*\) *(\{?|[^;]) {"; 
```

这是 Eclipse IDE 出错的部分。

```
(public|final|protected|private|static|\s) 
```

我知道在这方面还有很多其他类似的帖子，但是在搜索了大约 10 个之后，我仍然无法找出问题所在。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T04:12:18.930

您需要将 Java 字符串文字中的转义字符加倍：

```
private String map = "(public|final|protected|private|static|\\s) (final|static)* +[\\w\\<\\>\[\\]]+\\s+(\\w+) *\\([^\\)]*\\) *(\\{?|[^;]) {"; 
```

`\\`Java 字符串文字中的每一个都成为`\`字符串本身中的一个。

# marketplace - how to notify user about update available for my application in windows phone marketplace for OS 7.1

> ID：15674140
> 
> 赞同：0
> 
> 时间：2013-03-28T04:10:44.950
> 
> 标签：marketplace

Can any one tell me the steps to be followed to notify users that there is an update for my windows phone 7.1 application at market place so that he can go any update it ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T04:55:27.443

如果您在市场上发布更新，那么平台将自动提示用户。如果您想强制更新，那么旧版本将需要在启动时轮询服务并提醒用户他们应该去市场并获取新版本

# css - 样式融合表层多边形

> ID：15674143
> 
> 赞同：0
> 
> 时间：2013-03-28T04:11:09.440
> 
> 标签：css, google-fusion-tables, layer

我有一个包含 5 个人口（列）的融合表，对于每一个我想以不同的颜色显示人口集中度最高的多边形。

在样式融合表图层的示例中，定义了“polygonOptions”，但我不希望多边形具有任何样式，除非其中一个人口集中，而且因为这会使 1 样式远离限制5。

我不确定要更改什么或缺少什么才能正确显示这些样式。

我的地图：[http ://seflculturemap.com/miami-test.html](http://seflculturemap.com/miami-test.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:14:43.367

您遇到的第一个问题是列名，当它们包含空格时，您必须将它们包装在查询内的单引号中。

另一个问题（您需要应用 6 种样式，但限制为 5 种）。您也可以直接为地图创建样式，因此您可以创建一个虚拟样式，将所有多边形的不透明度设置为 0。

要应用此样式，请使用样式的 ID 并将其与选项参数一起传递给图层。我为您的地图创建了这样一个虚拟样式，它确实有 ID`4`

图层创建现在应该如下所示： var layer1 = new google.maps.FusionTablesLayer({

```
 query: {
    select: 'geometry',
    from:   '1PM3_L795Eus1HXCylF6UM0tLqXarnkNZeB_LmM8'

  },
  options: {
        styleId: 4
      },
  styles: [
     {
        where: "'Puerto Rican Population' > 500",
    polygonOptions: {
     fillColor: "#46A2D1", //blue
     fillOpacity: 0.7}  
     },
   {
        where: "'Cuban Population' > 500",
    polygonOptions: {
     fillColor: "#F29400", //orange
     fillOpacity: 0.7 }   
     }, 
     {
        where: "'Bahaman Population' > 100",
    polygonOptions: {
     fillColor: "#BAC200", //yellow
     fillOpacity: 0.7}  
     },  
     {
        where: "'Dominican Population' >200",
    polygonOptions: {
     fillColor: "#E068A0", //pink
     fillOpacity: 0.7 }   
     },
     {
        where: "'Haitian Population' > 500",
    polygonOptions: {
     fillColor: "#66A919", //green
     fillOpactity: 0.7}
   }
    ]
}); 
```

测试：http: [**//jsfiddle.net/doktormolle/8mZuB/**](http://jsfiddle.net/doktormolle/8mZuB/)

* * *

**相关评论：**

您使用了错误的列名。

对于[http://www.seflculturemap.com/maps/central-american-populations.html](http://www.seflculturemap.com/maps/central-american-populations.html)：

```
'Nicaraguan' -> 'Nicaraguan Population' 
```

对于[http://www.seflculturemap.com/maps/south-american-populations.html](http://www.seflculturemap.com/maps/south-american-populations.html)：

```
'Venezuelan Population'  ->'Venzuelan Population
'Peruvian'               ->'Peruvian Population'
'Argentinian Population' ->'Argentinean Population' 
```

# javascript - Failed to load json resource - Need Assistance

> ID：15674151
> 
> 赞同：0
> 
> 时间：2013-03-28T04:11:53.867
> 
> 标签：javascript, html, json

Hey Im a begginer when it comes to new age html code (i consider json and javascript code new age, because i learned on just straight html code). Well What im doing is trying to get all the data from my .json file and put in a table, but it keeps saying i cannot load resource and it says the .json file.

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" charset="text">       </meta>
  <title> - Jason Onto HTML Displayed</title>

  <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.js"></script>

<script type="text/javascript">
  $(document).ready(function(){
      $("#DisplyEmp").click(function() {
          $.getJSON("Localhost/Homework_1_second_attempt.json", function(data) {
              for(emp in data.albums) {
                  console.log(data.albums[emp]);
                  var newRow = "<tr>"+
                                  "<td>"+data.albums[emp].title+"</td>"+
                                  "<td>"+data.albums[emp].artist+"</td>"+
                                  "<td>"+data.albums[emp].songs+"</td>"+
                               "</tr>";
                  $("#EmpNewTable").append(newRow);
              } 
          });
      });
  });
</script>

</head>
<body>
<table id="EmpNewTable" border="2"> 
<tr> 
  <th>Artist</th>
  <th>Title</th>
  <th>Songs</th>
</tr> 
</table><br /><br /> 
<input type="button" id="DisplyEmp" value="Display" />

</body></html> 
```

thank you everyone for helping me with my problem

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T04:16:27.493

Due to security concerns, browsers will not allow you to ever load resources from any domain other than your own. That includes the `file:///` "protocol".

To do this, you will need to run a server. From the looks of it, maybe you are running this on `http://localhost`. Then change your ajax url to

```
$.getJSON("/Homework_1_second_attempt.json... 
```

The relative path will start at the same location as the file you are viewing.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T04:22:35.173

尝试以下操作：

```
var rows = '';
for(emp in data.albums) {
    rows += "<tr>"+
                "<td>"+emp.title+"</td>"+
                "<td>"+emp.artist+"</td>"+
                "<td>"+emp.songs+"</td>"+
            "</tr>";
}
$("#EmpNewTable").append(rows); 
```

# iphone - uitableviewcell 中的多个按钮

> ID：15674152
> 
> 赞同：0
> 
> 时间：2013-03-28T04:11:54.530
> 
> 标签：iphone, uitableview, ios6, uibutton

我必须创建一个包含多个按钮的单元格。这里的tableview是可展开和折叠的，节数和节中的行数是动态的。

我想要以这种方式完成任务![在此处输入图像描述](../Images/75195c396c0e988102d3382ea204ecc4.png)

也就是说，在每一行中，我只想要 4 个任务 n 剩余任务将显示在下一行。但我的问题是，如果我只有 13 个任务而不是它包含 4 行，那么在第 1 行和第 2 行和第 3 行它包含 4 个任务，在最后一行它只包含 1 个任务，但我无法做到这一点，它的文本也不会按照任务。

这是我的代码。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if ([self tableView:tableView canCollapseSection:section])
    {
        if ([expandedSections containsIndex:section])
        {
            objePro = [appDelegate.array_proj objectAtIndex:section];

            rowcount = [objePro.arr_task count] + 1;
            NSLog(@"rowcount %d",rowcount);
            if (rowcount < 4)
                return 2;
            else
            {
                if (rowcount % 4)
                {
                    NSLog(@"odd: %d",rowcount/4 + 2);
                    return rowcount/4 + 2;
                }
                else
                {
                    NSLog(@"even: %d",rowcount/4);
                    return rowcount/4;
                }
            }
        }
    }
    return 1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] ;
    }
    cell.backgroundColor = [UIColor clearColor];

    if ([self tableView:tableView canCollapseSection:indexPath.section])
    {
        if (!indexPath.row)
        {
            cell.textLabel.textColor = [UIColor whiteColor];
            UIImageView *backgroundView = [[UIImageView alloc] initWithFrame:CGRectZero];
            cell.backgroundView = backgroundView;
            backgroundView.image = [UIImage imageNamed:@"prjctcell_bg.png"];

            objePro = [appDelegate.array_proj objectAtIndex:indexPath.section];

            cell.textLabel.text = objePro.projctname;
            if ([expandedSections containsIndex:indexPath.section])
                cell.accessoryView = [DTCustomColoredAccessory accessoryWithColor:[UIColor blackColor] type:DTCustomColoredAccessoryTypeUp];
            else
                cell.accessoryView = [DTCustomColoredAccessory accessoryWithColor:[UIColor blackColor] type:DTCustomColoredAccessoryTypeDown];
        }
        else
        {
            // all other rows
            cell.accessoryView = nil;

            j=4;

                for (k = 0; k<4; k++)
                {
                    NSLog(@"k %d",k);

                    btnexpand = [[UIButton alloc] init];
                    btnexpand = [UIButton buttonWithType:UIButtonTypeCustom];
                    btnexpand.frame = CGRectMake(j, 5, 80, 40);
                    btnexpand.backgroundColor = [UIColor clearColor];
                    [btnexpand setTitleColor:[UIColor colorWithRed:53.0/255 green:53.0/255 blue:53.0/255 alpha:1.0] forState:UIControlStateNormal];
                    btnexpand.titleLabel.font = [UIFont boldSystemFontOfSize:14];

                    [btnexpand setTitle:[NSString stringWithFormat:@"Step %d",[[[[appDelegate.array_proj objectAtIndex:indexPath.section] arr_task] objectAtIndex:indexPath.row - 1] taskid]] forState:UIControlStateNormal];
                    NSLog(@"btn title: %@",btnexpand.titleLabel.text);

                    [btnexpand setBackgroundImage:[UIImage imageNamed:@"greenarrow.png"] forState:UIControlStateNormal];
                    [cell.contentView addSubview:btnexpand];

                    j= j+65;
                }

        }
    }
    return cell;
} 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:34:43.883

在`numberOfRowsInSection`

```
rowcount = [objePro.arr_task count]; // Keep original count
if (rowcount % 4) // This means its not exact multiple of four
    return rowcount/4 + 2;
else
    return rowcount + 1; 
```

在 cellForRowAtIndexPath 中

```
if(indexpath.row == 0){
    Your code for header line
}
else{
    objePro = [appDelegate.array_proj objectAtIndex:section];
    int rowcount = [objePro.arr_task count];
    if(rowcount < 4){
         for(int i = 0; i < 4; i++){
                 NSLog (@"%d", i+1);
         }
    }
    else{
         int iRow = rowcount / 4;
         if (rowcount % 4){
              for(int i = 0; i < 4; i++)
                   NSLog(@"Current Step %d", indexpath.row-1 + i);
         }
         else{
              for(int i = 0; i < rowcount % 4; i++)
                   NSLog(@"Current Step %d", indexpath.row-1 + i);
         }

    }

} 
```

这都是套路，你需要付出一些努力。希望我已经向您展示了一些方向。

# javascript - Calling javascript function in a JS file from a JSP

> ID：15674162
> 
> 赞同：0
> 
> 时间：2013-03-28T04:12:59.430
> 
> 标签：javascript, jsp

Below is a JSP that handle the uploading of a file. I would like to call upon a js function in a JS file such that if a file is successfully uploaded it will call it. How can I make it happen??

JS:

```
function uploadsuccess(){
         alert("You've successfully uploaded a file!");
} 
```

JSP:

```
<%@ page import="java.io.*,java.util.*, javax.servlet.*" %>
<%@ page import="javax.servlet.http.*" %>
<%@ page import="org.apache.commons.fileupload.*" %>
<%@ page import="org.apache.commons.fileupload.disk.*" %>
<%@ page import="org.apache.commons.fileupload.servlet.*" %>
<%@ page import="org.apache.commons.io.output.*" %>

<%
   File file ;
   int maxFileSize = 5000 * 1024;
   int maxMemSize = 5000 * 1024;
   ServletContext context = pageContext.getServletContext();
   String filePath = context.getInitParameter("file-upload");

   // Verify the content type
   String contentType = request.getContentType();
   if ((contentType.indexOf("multipart/form-data") >= 0)) {

      DiskFileItemFactory factory = new DiskFileItemFactory();
      // maximum size that will be stored in memory
      factory.setSizeThreshold(maxMemSize);
      // Location to save data that is larger than maxMemSize.
      factory.setRepository(new File("c:\\temp"));

      // Create a new file upload handler
      ServletFileUpload upload = new ServletFileUpload(factory);
      // maximum file size to be uploaded.
      upload.setSizeMax( maxFileSize );
      try{ 
         // Parse the request to get file items.
         List fileItems = upload.parseRequest(request);

         // Process the uploaded file items
         Iterator i = fileItems.iterator();

         out.println("<html>");
         out.println("<head>");
         out.println("<title>JSP File upload</title>");  
         out.println("</head>");
         out.println("<body>");
         while ( i.hasNext () ) 
         {

            FileItem fi = (FileItem)i.next();
            if ( !fi.isFormField () )   
            {
            // Get the uploaded file parameters
            String fieldName = fi.getFieldName();
            String fileName = fi.getName();
            boolean isInMemory = fi.isInMemory();
            long sizeInBytes = fi.getSize();
            // Write the file
            if( fileName.lastIndexOf("\\") >= 0 ){
            file = new File( filePath + 
            fileName.substring( fileName.lastIndexOf("\\"))) ;
            }else{
            file = new File( filePath + 
            fileName.substring(fileName.lastIndexOf("\\")+1)) ;
            }
            fi.write( file ) ;
            out.println("Uploaded Filename: " + filePath + 
            fileName + "<br>");
            }
         }
         out.println("</body>");
         out.println("</html>");
      }catch(Exception ex) {
         System.out.println(ex);
      }
   }else{
      out.println("<html>");
      out.println("<head>");
      out.println("<title>Servlet upload</title>");  
      out.println("</head>");
      out.println("<body>");
      out.println("<p>No file uploaded</p>"); 
      out.println("</body>");
      out.println("</html>");
   }
%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T04:24:26.010

不要认为这是一个好的做法，但你可以这样做：

```
...
out.println('<script src="path_to_your_script.js"></script>');
out.println('<script>uploadsuccess();</script>');
out.println("</body>");
out.println("</html>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T04:30:59.343

前

```
out.println("</head>"); 
```

放：

```
out.println("<script type='text/javascript' src='javascript_path_file'></script>"); 
```

并更换

```
out.println("<body>"); 
```

通过这个：

```
out.println("<body onload='uploadsuccess();'>"); 
```

# git - 每当我创建新目录时，git 分支都会跟随我

> ID：15674163
> 
> 赞同：1
> 
> 时间：2013-03-28T04:13:00.837
> 
> 标签：git

在尝试将新项目（只有一个测试文件）推送到 github 上的新存储库时遇到了一些问题后，我发现我似乎在 git 上犯了一个巨大的错误，因为我有一个项目和分支跟随我每当我在我的 Mac 上创建新目录时。

例如，我在我的 mac 的站点文件夹中创建一个新目录

```
cd sites
me$ mkdir mynewdirectory 
```

如果我从站点目录执行“git branch”，它会显示这个

```
* master
  refactor 
```

如果我没记错的话，这个主和重构分支似乎来自我几周前工作的一个项目。如果我 cd 进入 mynewdirectory 并执行 'git branch' 我会得到相同的结果

```
 git branch
* master
  refactor 
```

然后我做了'git status'并得到了一个很长的列表

```
a) Changes not staged for commit; and 
b) Untracked files 
```

这些显然都与我想开始的新项目无关，我猜这是我在推到新的远程来源时遇到困难的部分原因。

有没有一种方法可以让我在伤害最小的同时摆脱这一切？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:23:14.327

听起来您已经在您的主目录`~`（回购使用

```
$ git rev-parse --show-toplevel 
```

您可能不希望在 Git 存储库中跟踪整个主目录和所有文件，因此我建议`mv ~/.git ~/.git.old`暂时将该目录移到一边（例如，如果存储库在您的主目录中）并创建更多您希望存储在 Git 中的每个项目的重点存储库。一旦你重命名了旧的仓库，你就不应该再让它干扰你的子目录，你可以`git init`照常使用来创建每个项目的仓库。

我在上面说“暂时”是因为，如果您*向该*仓库提交了您不想永久删除的任何内容，您可能希望将其复制到新的仓库或其他地方，这样您就不会丢失它。一种方法是将旧`.git`目录移动到一个新的子目录中，您可以从中提取要存储在其他地方的内容，一旦将所有内容移出，您就可以删除该子目录。例如：

```
mkdir old_home_repo
mv ~/.git ~/old_home_repo
cd old_home_repo
git checkout -- .   # this will bring the files that were in the repo back into this directory
# copy files out of this dir, into new places you want to keep them permanently
cd ..
rm -rf old_home_repo 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T04:23:58.313

如果您在站点文件夹中启动了 git，那么您将在所有子目录中获得该重构分支。

# asp.net - Visual Studio 2012 中的 DotNetNuke 网站项目

> ID：15674164
> 
> 赞同：2
> 
> 时间：2013-03-28T04:13:01.390
> 
> 标签：asp.net, visual-studio-2010, web, dotnetnuke, web-deployment

我创建了一个基本的 DNN 网站并有以下问题：

有没有办法将整个站点（包括所有组件）加载到 Visual Studio 中并基本上将其作为 ASP.NET 项目/解决方案运行？我严格来说不是在寻找在 Visual Studio 中开发 DNN 模块的方法，但我想知道我是否可以在最初通过浏览器界面开发的 DNN 站点上使用，并在 ASP.NET 中的 Visual Studio 中继续该项目而无需任何未来对浏览器或 WebMatrix 开发的依赖使其本质上成为一个 ASP.NET 项目。

我正在决定是否应该使用 DNN 开发网站还是使用 ASP.NET 从头开始​​开发网站，我只是不喜欢依赖明天可能从开源转向专有的商业模式，我也更喜欢拥有所有在 VS 环境中进行微调。

抱歉，如果这似乎是一个基本问题，可能表明我缺乏 Web 开发知识，我实际上从未编写过一行代码来创建网站。所以 Web 开发，尤其是 DNN 对我来说是相当新的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T05:15:13.177

您可以做的是下载 DotNetNuke 源代码，其中包括用 C# 编写的整个 DotNetNuke 社区项目，然后自己构建项目。

[DotNetNuke® 社区版 CMS](http://dotnetnuke.codeplex.com/releases/view/102566)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T12:56:27.443

您可以在 Visual Studio 中打开 DotNetNuke 源代码。但是，强烈建议您不要这样做，这样您就可以享受无忧升级（如果业务模式发生变化，那么您可以自由地进行所需的任何更改）。

也就是说，当您通过浏览器进行更改时，这些更改主要是数据库更改，而不是您可以通过 Visual Studio 调整的内容。它们仅作为您通过模块访问的内容存在。

DNN 确实能够通过在本地运行的 DNN 站点编辑模块控件的实际代码，但我认为没有人会建议您使用它来开发重要的扩展。要创建扩展，您将在 Visual Studio 中编写代码（不对核心 DNN 代码进行任何更改）。您可能会使用[Christoc 的 DNN 模块模板](https://christoctemplate.codeplex.com/)作为起点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T10:41:50.523

弗雷迪，

由于您没有提到您计划开发哪种解决方案，因此很难建议哪种解决方案最适合您。确定这一点的好方法是检查您的解决方案是否具有多少 CMS 相关功能。

关于 Visual Studio 网站项目，目前 dotnetnuke 是源代码，安装版本仅适用于 Visual Studio 2010 解决方案。但是，如果您在 Visual Studio 2012 中打开它们中的任何一个，它将自动转换它。

DotNetNuke 带有许多可以免费使用的 CMS 功能。示例包括身份验证和许可、用户管理、角色管理、博客、论坛、为 SEO 做好准备等等等等。有关更多详细信息，您可以查看 dotnetnuke 站点视频库、文档等。

如果您有更多问题，请告诉我。

# android - android上的ffmpeg命令行问题

> ID：15674165
> 
> 赞同：6
> 
> 时间：2013-03-28T04:13:07.983
> 
> 标签：android, ffmpeg

我设法编译了 ffmpeg 静态版本。但是当我试图调用 ffmpeg 命令行时，我得到一个 Java IOException：没有这样的文件或目录。

我的代码如下：

```
public void merge_video(View view){

    if(ffmpeg_file.exists()){
          Log.d(null, "ffmpeg exists");
      }else{
          Log.d(null, "Could not locate ffmpeg in the folder");
      }

      File file1 = new File("/mnt/sdcard/com.ffmpeg_test/VID_3_25_2013_12_22.mp4");
      if(file1.exists()){
          Log.d(null,"File 1 exists");
      }
      File file2 = new File("/mnt/sdcard/com.ffmpeg_test/VID_3_25_2013_12_28.mp4");
      if(file2.exists()){
          Log.d(null,"File 2 exists");
      }

      String[] ffmpegCommand = new String[5];
      ffmpegCommand[0] = "/mnt/sdcard/com.ffmpeg_test/ffmpeg";
      ffmpegCommand[1] = "-i";
      ffmpegCommand[2] = "concat:/mnt/sdcard/com.ffmpeg_test/VID_3_25_2013_12_22.mp4|/mnt/sdcard/com.ffmpeg_test/VID_3_25_2013_12_28.mp4";
      ffmpegCommand[3] = "copy";
      ffmpegCommand[4] = "/mnt/sdcard/com.ffmpeg_test/output.mp4";  

      try {
          Process ffmpegProcess = new ProcessBuilder(ffmpegCommand).redirectErrorStream(true).start();

          String line;
          BufferedReader reader = new BufferedReader(new InputStreamReader(ffmpegProcess.getInputStream()));
          Log.d(null, "*******Starting FFMPEG");

          while((line = reader.readLine())!=null){

              Log.d(null, "***"+line+"***"); 
          }
          Log.d(null,"****ending FFMPEG****");

    } catch (IOException e) {
        e.printStackTrace();
    }
  } 
```

LogCat 打印如下：

```
03-27 20:41:10.522: W/System.err(24709): java.io.IOException: Error running exec(). Command: [/mnt/sdcard/com.ffmpeg_test/ffmpeg, -i, concat:/mnt/sdcard/com.ffmpeg_test/VID_3_25_2013_12_22.mp4|/mnt/sdcard/com.ffmpeg_test/VID_3_25_2013_12_28.mp4, copy, /mnt/sdcard/com.ffmpeg_test/output.mp4] Working Directory: null Environment: [ANDROID_SOCKET_zygote=13, TMPDIR=/data/local/tmp, ANDROID_BOOTLOGO=1, EXTERNAL_STORAGE=/mnt/sdcard, ANDROID_ASSETS=/system/app, PATH=/sbin:/vendor/bin:/system/sbin:/system/bin:/system/xbin, ASEC_MOUNTPOINT=/mnt/asec, LOOP_MOUNTPOINT=/mnt/obb, BOOTCLASSPATH=/system/framework/core.jar:/system/framework/bouncycastle.jar:/system/framework/ext.jar:/system/framework/framework.jar:/system/framework/android.policy.jar:/system/framework/services.jar:/system/framework/core-junit.jar, USBHOST_STORAGE=/mnt/sdcard/usbStorage, ANDROID_DATA=/data, LD_LIBRARY_PATH=/vendor/lib:/system/lib, ANDROID_ROOT=/system, ANDROID_PROPERTY_WORKSPACE=12,32768, EXTERNAL_STORAGE2=/mnt/sdcard/external_sd]
03-27 20:41:10.522: W/System.err(24709):    at java.lang.ProcessManager.exec(ProcessManager.java:224)
03-27 20:41:10.522: W/System.err(24709):    at java.lang.ProcessBuilder.start(ProcessBuilder.java:202)
03-27 20:41:10.522: W/System.err(24709):    at com.example.ffmpeg_test.MainActivity.merge_video(MainActivity.java:106)
03-27 20:41:10.522: W/System.err(24709):    at java.lang.reflect.Method.invokeNative(Native Method)
03-27 20:41:10.522: W/System.err(24709):    at java.lang.reflect.Method.invoke(Method.java:507)
03-27 20:41:10.527: W/System.err(24709):    at android.view.View$1.onClick(View.java:2149)
03-27 20:41:10.527: W/System.err(24709):    at android.view.View.performClick(View.java:2538)
03-27 20:41:10.527: W/System.err(24709):    at android.view.View$PerformClick.run(View.java:9152)
03-27 20:41:10.527: W/System.err(24709):    at android.os.Handler.handleCallback(Handler.java:587)
03-27 20:41:10.527: W/System.err(24709):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-27 20:41:10.527: W/System.err(24709):    at android.os.Looper.loop(Looper.java:123)
03-27 20:41:10.527: W/System.err(24709):    at android.app.ActivityThread.main(ActivityThread.java:3691)
03-27 20:41:10.527: W/System.err(24709):    at java.lang.reflect.Method.invokeNative(Native Method)
03-27 20:41:10.527: W/System.err(24709):    at java.lang.reflect.Method.invoke(Method.java:507)
03-27 20:41:10.532: W/System.err(24709):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
03-27 20:41:10.532: W/System.err(24709):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
03-27 20:41:10.537: W/System.err(24709):    at dalvik.system.NativeStart.main(Native Method)
03-27 20:41:10.537: W/System.err(24709): Caused by: java.io.IOException: No such file or directory
03-27 20:41:10.537: W/System.err(24709):    at java.lang.ProcessManager.exec(Native Method)
03-27 20:41:10.537: W/System.err(24709):    at java.lang.ProcessManager.exec(ProcessManager.java:222)
03-27 20:41:10.537: W/System.err(24709):    ... 16 more
03-27 20:41:36.057: W/KeyCharacterMap(24709): No keyboard for id 0
03-27 20:41:36.057: W/KeyCharacterMap(24709): Using default keymap: /system/usr/keychars/qwerty.kcm.bin 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T06:01:54.790

Android 有一个特殊的安全特性：/mnt/sdcard 文件系统是受执行保护的。您无法运行位于外部存储（也称为 USB 存储）上的可执行文件。如果要在设备上运行 ffmpeg 二进制文件，则必须将其加载到内部目录之一。例如，您可以将其打包到您的 Java 项目的**libs/armeabi**中，这样安装程序会自动将其解包到设备上的**/data/data/<your package>/lib**目录中。或者您可以找到另一个目录，例如**/data/local**，您可以在其中使用**adb push放置可执行二进制文件**

# android - 我无法在对话框中获取 textview 值

> ID：15674171
> 
> 赞同：0
> 
> 时间：2013-03-28T04:13:43.307
> 
> 标签：android, android-listview

`TextViews`通过`BaseAdapter`类绑定动态时，我在对话框中遇到异常

我可以得到对话框，但它没有绑定`TextView`值地狱..

## Train_Origin_Destination.java

```
public void loadAutocomplete1(String strCmdTrain) {

c.moveToFirst();
    if (c.isAfterLast() == false) {

        do {            

            listFrom1 = new ArrayList<String>(Arrays.asList(strComments));
            listTo1 = new ArrayList<String>(Arrays.asList(strComments));

            listFrom1.removeAll(Collections.singleton(null));

            HashMap<String, String> map = new HashMap<String, String>();
            map.put(KEY_Start, "Hello");

            listData.add(map);
            Log.e("map", map.toString());
            Log.e("list4", listData.toString());

            customAdapter = new MyCustomAdapter2(
                    Train_Origin_Destination.this, listData);
            lvTrainTime1.setAdapter(customAdapter);

        } while (c.moveToNext());

    } 
```

## onButtonClick 事件

```
public void onClick(View arg0) {

    Log.d("Dialog", "Dialog");
    dialog = new Dialog(context1);
    //dialog.setContentView(R.layout.traintimings_dialog);
    //dialog.getWindow().getAttributes().windowAnimations = R.style.Animations_SmileWindow;
    dialog.setTitle("Train Timings");
    //dialog.setContentView(R.id.lvTrainTimings1);

if (chkSunday.isChecked()) {
        if (Area_Index < Area_Index1) {
            Log.d("Sunday", "Sunday");
        } else if (Area_Index > Area_Index1) {
            Log.d("SundayReverse", "SundayReverse");
        }
    } else {
        if (Area_Index < Area_Index1) {
            Log.d("Normal", "Normal");

            if (strSpSelectedItem.contentEquals("Beach - Tambaram")) {
                int id = Area_Index + 1;
                int id1 = Area_Index1 + 1;
                /*
                 * strCmdTrainFrom =
                 * "Beach_Thirumalpur_WeekD ays where _id='" + id +
                 * "' or _id='" + id1 + "'";
                 */
                strCmdTrainFrom = "Beach_Thirumalpur_WeekDays where _id='"
                        + id + "'";
                loadAutocomplete1(strCmdTrainFrom);

            }
        } else if (Area_Index > Area_Index1) {
            Log.d("NormalReverse", "NormalReverse");
        }
    }

    Log.d("DialogEndB4", listData.toString());
    dialog.show(); 
    Log.d("DialogEnd", "DialogEnd");
} 
```

## MyCustomAdapter2.java

```
 public class MyCustomAdapter2 extends BaseAdapter {

    private String[] strKeys;
    private ArrayList<HashMap<String, String>> alData;
    private Context context;
    TextView txtBusNo, txtBusVia, txtBusServiceType, txtBusJourneyTime;
    TextView[] tvStart;
    ListView lvTrainTime1;
    View rowView2;

    public MyCustomAdapter2(Context context,
            ArrayList<HashMap<String, String>> listData) {

        super();
        Log.d("Custom", "Custom");
        this.alData = listData;
        this.context = context;
        Log.d("alData", alData.toString());
        Log.d("Custom1", "Custom1");

    }

    public int getCount() {
        // TODO Auto-generated method stub
        Log.d("alData.size()", String.valueOf(alData.size()));
        return alData.size();
    }

    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        Log.d("View", "View");
        rowView2 = convertView;
        if (rowView2 == null) {

            Log.d("View1", "View1");
            Train_Origin_Destination trDetails = new Train_Origin_Destination();
            // Inflate the layout, list_view.xml, in each row.
            LayoutInflater inflater = (LayoutInflater) context
                    .getSystemService(context.LAYOUT_INFLATER_SERVICE);
            Log.d("View2", "View2");
            rowView2 = inflater
                    .inflate(R.layout.textview_autofrom, null, false);
}

            txtBusNo = (TextView) rowView2.findViewById(R.id.idTvAutoFrom1);

            Log.d("View3", "View3");
            HashMap<String, String> hashmap = new HashMap<String, String>();

            txtBusNo.setText("Bus No : Hello");

            Log.d("View30", "View30");

            Log.d("View5", String.valueOf(rowView2));
        } else {

        }
        return rowView2;
    } 
```

请帮助我..我做错了什么:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:01:53.603

首先，为您的 customArray 创建一个构造函数，该构造函数引用对话框：

```
Dialog _dialog;

public MyCustomAdapter2(Context context,
            ArrayList<HashMap<String, String>> listData,Dialog dog) {
//put all the code you have here and add this:
_dialog=dog;
} 
```

并在此处传递对话框的引用：

```
 customAdapter = new MyCustomAdapter2(
                    Train_Origin_Destination.this, listData,dialog); 
```

接下来，`getView`将此代码放在您要获取的位置`TextView`：

```
txtBusNo = (TextView) _dialog.findViewById(R.id.idTvAutoFrom1); 
```

每当您完成对话框中的文本时，只需调用

```
 lvTrainTime1.setAdapter(customAdapter); 
```

或者如果这不起作用，那么你可以尝试打电话`customAdapter.notifyDataSetChanged();`

# c# - 在具有中等大小数据库（~100 个表，~300sp's）的现有应用程序中实现实体框架的最佳实践

> ID：15674176
> 
> 赞同：0
> 
> 时间：2013-03-28T04:14:35.317
> 
> 标签：c#, sql-server, visual-studio-2010, entity-framework

我正在努力将现有的 asp.net 应用程序扩展/转换为使用 EF4.0/5.0，但我似乎无法在网上找到对布局设计的最佳实践的共识。我目前的解决方案有超过 100 万行代码，并且目前使用的是笨拙的自定义数据框架。我的数据库有大约 100 个表，大约 300 个存储过程，有些表可能需要多达 1000 万行，但其中只有一小部分用于实体等。典型的页面加载从数据库中恢复以网格形式呈现的实体，然后用户编辑该网格，然后通过首先再次恢复实体然后保存它来保存它。大多数数据不会经常更改，但可能会同时被多人使用。存储过程用于对表等进行分页操作。

所以我的问题是关于如何最好地设置新的 EF 框架来满足我未来编程的需求。到目前为止，我已经看到了以下方法：

1.  在包含您需要的每个实体/存储过程的 EDMX 上创建。
2.  拆分 EDMX，以便每个都有特定的表/存储过程子集。

我看到的#1 的好处是实体之间的链接数据将很容易，并且实体可以在数据库范围内有效地缓存。缺点是最初加载模型的成本。成本会这么高吗？如果我实例化整个模型只使用一个实体进行 3-5 次查询，这会是一个大问题吗？

#2 似乎解决了 #1 的一些问题，但由于不想跨模型重复实体，我可能必须实例化 2-3 个模型才能完成工作。这值得吗？

关于如何使用这些模型，我看到了以下内容。

1.  每次你需要使用一个实体时，你将它与 using 块一起使用，并在块的末尾保存或丢弃更改。
2.  将模型留在会话中并仅实例化一次，并在需要时重用它。

我可以看到这两者都有其优点和问题。主要是＃1意味着数据将始终与数据库同步，但缓存几乎不存在。#2 允许应用程序几乎拥有数据库的内存副本，但有可能不同步。

我一直在进行的方法是为每个组件创建单独的模型，并使用 using 块立即使用和处理它们。我也有使用相同命名空间的模型。一个典型的代码块是这样的。

```
Using(CommonType common = new CommonType()){
Using(mytype type = new mytyp()){
  // execute query on mytype
  // manipulate data using common type 
```

} }

所以我该怎么做？我的假设完全偏离了这里吗？

我一直在使用一些资源来提供此信息：http: [//msdn.microsoft.com/en-us/data/hh949853](http://msdn.microsoft.com/en-us/data/hh949853) [https://blogs.msdn.com/b/adonet/archive/2008/ 11/24/working-with-large-models-in-entity-framework-part-1.aspx?Redirected=true](https://blogs.msdn.com/b/adonet/archive/2008/11/24/working-with-large-models-in-entity-framework-part-1.aspx?Redirected=true)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:21:24.130

启用延迟加载后，从统一模型构建实体不应该占用太多资源，使用您需要的少数位，并在使用完实体后丢弃其余部分。

如果您的实体与支持模式相比特别简单，您可以使用一些 SQL 视图来简化由 EF 创建的实体，或者您可以自己在设计器中修剪它们，无论哪种方式都可能会给您所需的性能。

# c++ - 仅通过 istream 函数从输入流中删除空格

> ID：15674177
> 
> 赞同：0
> 
> 时间：2013-03-28T04:14:38.440
> 
> 标签：c++, whitespace, istream, trailing

输入小数后有没有办法删除尾随空格？例如：

```
10        A 
```

我想在空格结束后捕捉第一个字符。（必须是 \n 才能为真。如果不是，则为假

到目前为止我的尝试：

```
cout << "Please enter a number: ";
cin >> n;

if (cin.peek() == ' ')
    //Something to catch the whitespaces

if(cin.fail() || cin.peek() != '\n')
    cout << "Not a number." << endl;

else
    cout << "A number." << endl; 
```

可以通过 istream 中的函数来做到这一点吗？

（我知道 cin.fail 可以做好事，但它仍然不认为输入 10A 为失败）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:34:05.310

正如@chris 所说，您真的想从阅读整行开始，然后从那里进行其余的阅读。

```
std::string line;
std::getline(cin, line);

std::stringstream buffer(line);

buffer >> n;

char ch;
if (buffer >> ch) 
    cout << "Not a number"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T05:17:18.890

我对您的尝试感到有些困惑。你是说你试图避免空白？

cin 跳过那些......它是一个有效的空白分隔符，如制表符或换行符。如果你这样做：

```
int A(0), B(0);

std::cin >> A >> B; 
```

输入的数字将进入 A，直到您输入空格，然后它们将进入 B。

如果您正在使用字符串并希望将它们连接成一个没有空格的字符串；

```
std::string A, B, C;
std::string final;

std::cin >> A >> B >> C;

std::stringstream ss;
ss << A << B << C;
final = ss.str(); 
```

但是，就像 Jerry 提到的那样，如果您处理字符串，您可以只执行 std::getline() ，这可能会减少您的头痛。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T10:00:49.343

谢谢你的帮助。使用字符串确实很容易，是的。虽然不允许使用它。

可以通过这个简单的方法来完成：

```
cout << "Please enter a number: ";
cin >> n;

while (cin.peek() == ' ')
   cin.ignore(1,' ');

if(cin.fail() || cin.peek() != '\n')
   cout << "Not a number." << endl;

else
   cout << "A number." << endl; 
```

# unix - Any way to get timestamp on history command result without exporting any variable?

> ID：15674180
> 
> 赞同：0
> 
> 时间：2013-03-28T04:14:58.033
> 
> 标签：unix, history, unix-timestamp

I want to display timestamp on history command result, on googling I found that by using export HISTTIMEFORMAT=' %F %T ' , I can get the timestamp but in my environment exporting anything is not allowed.

Is there any alternate way to get history results with timestamp..?

# php - preg_match_all html 文本之间的文本的多个匹配项和模式

> ID：15674183
> 
> 赞同：1
> 
> 时间：2013-03-28T04:15:26.943
> 
> 标签：php, parsing, preg-match-all, multiple-matches

我在用：

```
 preg_match_all("/(.*):\s(.*)\n/i", $email, $matches); 
```

获取任何“发件人：”或“主题：”等。这一切都很好，只是我的消息没有以“消息：”的形式出现。它以 [1][18] 的形式出现在 $matches 数组中，如下所示：

```
< HTML>
    < HEAD></ HEAD>
    < BODY style="background-color:#ffffff">
        **MY MESSAGE IS HERE**< br> 
```

因此，我需要一个 preg_match_all ： 1\. 给我所有来自、主题或你有什么（我可以保持当前模式，除非你知道更好的模式）。2\. 给我html标签之间的文本内容。** 无论如何我可以只使用一个同时使用两种模式搜索的 preg_match_all 来做到这一点？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:33:32.807

如果消息每次都可靠地看起来像那样，只需`strip_tags($message);`或删除`< HTML>< HEAD>< BODY style="background-color:#ffffff">`and `< br>`。和`str_replace`

需要注意的是，这不一定是个好主意，尤其是如果开头和结尾的 html 发生了变化。

编辑：如果您的信息每次都相同，则稍微优雅一些​​；

```
$message = substr($message, 54);
$message = substr($message, 0, strpos($message, "< br>---"));

var_dump($message); 
```

# jqgrid - jqgrid 向服务器发送数据，数据类型为本地

> ID：15674188
> 
> 赞同：0
> 
> 时间：2013-03-28T04:15:50.823
> 
> 标签：jqgrid

我想发送要更新的行数据，但是当创建 jqgrid 时，数据类型设置为“本地”。我正在尝试在 onSubmiClick 中设置 dataType : "json" 并希望发送行数据（要发布到 REST 方法的数据）。这是我的 JqGrid 代码块。任何帮助表示赞赏。

```
var editSettings = {
recreateForm:true,
jqModal:false,
reloadAfterSubmit:true,
closeOnEscape:true,
closeAfterEdit:true,
addCaption: "Edit Scripts",
onclickSubmit: function(params,postdata) {
    $.ajax({ 
    type : "POST",
    url : "/fnol-maintenance/reports/update",
    contentType : "application/json; charset=utf-8",
    data : {
         jqGridData : postdata    //I'm trying to figure out how to pass the row data being edited using jQgrid Form Edit.
       },
    dataType : "json",
    asynch : false
    });
    return{};
}};

myGrid = $("#mygrid").jqGrid({
caption: "FNOL Maintenance Report",
datatype: "local",
colNames: myColNames,
colModel: myColModel,
pager: '#mypager',
//rowNum: 10000,
rowList: [10, 20, 50, 100],
viewrecords: true,
autowidth: true,
gridview: true,
ignorecase: true,
altRows: true,
altclass: 'myAltRowClass',
height: gridHeight, //commented to use browser vertical scrollbar
//height: "100%",   //un-commented to use browser vertical scrollbar
loadtext: "Loading data...",
//forceFit: true
//headertitles: true,
footerrow: true,
userDataOnFooter: true,
editUrl: '/fnol-maintenance/reports/update'
});
myGrid.jqGrid('navGrid','#mypager',{edit:true,add:false,del:false,search:false}, editSettings );
jQuery("#mygrid").jqGrid('setCaption', (myjsongrid.reportTitle==""?'Maintenance Report':myjsongrid.reportTitle));
myGrid.setGridParam({datatype: "local"});
myGrid.setGridParam({data: mydata}).trigger("reloadGrid");
//jQuery("#mygrid").jqGrid('navGrid','#mypager',{del:false,add:false,edit:true,search:false});
//alert("after ajax"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:41:07.500

您发布的代码很奇怪。首先，您使用未定义的变量`editSettings`。该值将在`editSettings`稍后分配。不应该奇怪回调`onclickSubmit`不会被调用。

同样，我看不到您在哪里定义`myGrid`等`mydata`。您使用的是真实代码吗？

顺便说一句，我认为在不指定`data`参数的情况下创建 jqGrid 然后用于`setGridParam`设置`datatype`为“本地”（它已经是“本地”）、更改`data`参数并重新加载网格是没有意义的。`data: mydata`在创建网格时可以直接使用参数。

`$.ajax`我认为使用inside`onclickSubmit`手动将数据发布到服务器没有任何意义，因为 jqGrid 在内部执行相同的操作。如果您需要一些将发送到服务器的自定义数据序列化，您可以使用[serializeEditData](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aform_editing#events)回调。如果您只需要设置一些附加选项`$.ajax`（如`contentType`），您可以使用[ajaxEditOptions](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aform_editing#properties)选项。

# php - 为什么我的 JS 功能在页面动态添加内容后不起作用？

> ID：15674189
> 
> 赞同：2
> 
> 时间：2013-03-28T04:15:55.063
> 
> 标签：php, javascript, html

我有一个在网页开头定义的 javascript 函数。在我的表中单击一行时调用它。

这是我的功能：

```
 $(".info").click(function(){
        alert($(this).attr('movieid'));
    }); 
```

这是我的表格行的样子：

```
<tr class="info" movieid="123"><td>movie title</td></tr> 
```

现在当我第一次加载页面时显示了该表，我可以单击该行，它将正确调用该函数。我正在尝试为表实现搜索功能。我有 php 脚本返回表行，就像上面的一样，我将它们添加到表中，但是当我单击从 php 脚本返回的行时，不调用 javascript 函数。有谁知道我怎么能做到这一点？我没有运气。

**编辑**

这是我获取搜索结果的功能：

```
$.ajax({
        type: "POST",
        url: "www.mysite.com/core/search.php",
        data: { q: search_string},
        cache: false,
        success: function(html){
            $("table#movies").fadeOut();
            $("div#results-container").fadeIn();
            $("div#results").fadeIn();
            $("div#results").html(html);
        }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T04:31:00.607

您正在动态添加元素，因此在设置点击处理程序时它不会被注册。

```
$("body").on("click", ".info", function(e) {
   ...
}); 
```

`body`通常可以，但理想情况下，您希望 DOM 元素尽可能靠近您的选择器`.info`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T04:21:43.363

你必须这样做：

```
$("body").on("click", "tr", function(event){
    alert($(this).attr('movieid'));
}); 
```

通过添加一个“容器”，它会产生类似`.live()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T04:27:27.263

使用 jQuery 就绪事件

```
$(document).ready(function() {    
    $(".info").on("click", "tr", function(event){
       alert($(this).attr('movieid'));
   });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T04:33:10.060

添加`.on`，`document`因为您要添加`DOM`到文档中。

**例子**

```
$(document).on('click',".info",function(){
       alert($(this).attr('movieid'));
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T04:17:43.983

您的 php 脚本很可能不会将该类添加到表行中。更改它以添加该类。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T04:32:47.923

感谢大家的帮助。我能够弄清楚.. @jasen 提到您将其声明为身体标签。这是我能够使用的解决方案：

```
$("body").on("click", ".info", function(event){
   alert($(this).attr('movieid'));
}); 
```

也谢谢你 Derek.. 你为未来提供了一些有用的例子。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-28T04:34:12.530

首先，指定一个选择器`tr.info`，现在和将来都将包含所有节点。根据您对帖子的最新编辑，我相信这是`table#movies`.

然后附加事件`on`并指定子选择器`tr.info`：

```
$('table#movies').on('click', 'tr.info', function () {
    alert($(this).attr('movie'));
}); 
```

请参阅[jsFiddle上的示例](http://jsfiddle.net/82tku/)

# php - Doctrine ORM 2 - Generate Entities from database without sequences

> ID：15674190
> 
> 赞同：0
> 
> 时间：2013-03-28T04:16:02.073
> 
> 标签：php, postgresql, doctrine-orm, annotations

I need to generate all the entities relationship in a database using postgresql. I can generate them using the script below. However, not all tables are generated, only those having SEQUENCES. You'd know tell me how to properly generate all tables, not just those with limited SEQUENCES?

```
[php]

[...]
$em->getConfiguration()->setMetadataDriverImpl(
    new \Doctrine\ORM\Mapping\Driver\DatabaseDriver(
        $em->getConnection()->getSchemaManager()
    )
);
$cmf = new Doctrine\ORM\Tools\DisconnectedClassMetadataFactory();
$cmf->setEntityManager($em);
$metadata = $cmf->getAllMetadata();

$cme = new \Doctrine\ORM\Tools\Export\ClassMetadataExporter();

$entityGenerator = new \Doctrine\ORM\Tools\EntityGenerator();
$entityGenerator->setAnnotationPrefix("");
$exporter = $cme->getExporter('annotation',  __DIR__ . '/entities');
$exporter->setEntityGenerator($entityGenerator);
$exporter->setMetadata($metadata);
$etg = new \Doctrine\ORM\Tools\EntityGenerator;
$exporter->setEntityGenerator($etg);
$exporter->export(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:40:11.857

Doctrine 不仅生成具有表 SEQUENCES 的实体。事实上，Doctrine 的行为是不同的，因为是否生成了 SEQUENCES 实体。

不一定每个表都是一个实体，因为一个实体可以具有可能不代表新实体的关系。

那么如何已经被使用了！

# c# - LINQ 选择多个值

> ID：15674196
> 
> 赞同：6
> 
> 时间：2013-03-28T04:16:44.390
> 
> 标签：c#, linq

我的代码如下，这段代码的用途是将2个列表合并在一起。并将其值从一个替换为另一个。

```
(from L1 in List1
         join L2 in List2
         on L1.itemID equals L2.itemID
         select  L1.itemName= L2.itemName).ToArray(); 
```

上面的代码完美运行，但仅用于选择单个属性 itemName ，如果我想选择超过 1 个值，我应该如何编写代码，

例如

```
(from L1 in List1
     join L2 in List2
     on L1.itemID equals L2.itemID
     select  {L1.itemName= L2.itemName , L1.ItemQuantity = L2.Quatity}).ToArray(); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-28T04:31:34.577

您可以直接使用属性名称，如下所示。

返回的数组将包含具有相同 Properties`itemID`和`itemName`.

```
 var outp = (from L1 in List1
                    join L2 in List2
                    on L1.itemID equals L2.itemID
                    select new { L1.itemID, L2.itemName }).ToArray(); 
```

样本输出：

![在此处输入图像描述](../Images/d0dbebbf3b5c5df2c818226be3c3d96b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T04:18:33.960

```
(from L1 in List1
         join L2 in List2
         on L1.itemID equals L2.itemID
         select  new{Prop1 = L1.SomePropery,Prop2 = L1.SomeOtherProperty).ToArray(); 
```

或未命名 - 使用默认名称

```
(from L1 in List1
         join L2 in List2
         on L1.itemID equals L2.itemID
         select  new{L1.SomePropery,L1.SomeOtherProperty).ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T04:57:16.647

如果你想合并两个对象，你应该首先匹配要连接的相应对象，然后遍历匹配的对象并将属性复制过来。不要使用这样的 LINQ 查询，这不是它的设计目的。

```
// pair off all the items in both lists
var matches =
    from item1 in List1
    join item2 in List2 on item1.ItemID equals item2.ItemID
    select new { item1, item2 };
foreach (var match in matches)
{
    // copy the properties over for each corresponding match
    match.item1.ItemName = match.item2.ItemName;
    match.item1.ItemQuantity = match.item2.Quantity;
} 
```

# string - How to manage intermediate outputs efficiently?

> ID：15674200
> 
> 赞同：0
> 
> 时间：2013-03-28T04:16:56.113
> 
> 标签：string, pipe, pipeline, c-preprocessor, temporary-files

I am implementing a C preprocessor in C...

I have the three functions:

1.  trigraph replacing function
2.  Line splicing function
3.  comment removing function

However these functions work separately on files i.e.

First function will take a file and replace the trigraphs producing a temp-file1 as output

Second function will take temp-file1 as input and splice the lines and produce another temp-file2.

Third function will take temp-file2 as input and remove comment and produce yet another temp-file3.

And now the main preprocessing tasks will be performed on temp-file3 and a .i file will be produced as final output.

Now, I have 3 options :

1.  Use temp files
2.  use pipes
3.  instead of intermediate temp-files or pipes use strings(i.e. whole temp-file1, 2 and 3 will be three big strings!!)

I have three doubts...

1.  Option 1 seems less efficient than option2
2.  option 2 seems to be perfect but will I be limited by size of that unnamed pipe? (since I have ***single process*** i.e. function 1 2 & 3 will be called one after another) What if temp output size > pipe's total capacity?
3.  option 3... Is it efficient, easy over previous two?

Please tell me, Which option should I choose?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T04:34:33.360

我相信选项 2 是一些 C 编译器的实现方式：C 预处理器通过管道连接到 C 编译器，后者通过管道连接到汇编器。管道缓冲区的大小不是问题，因为进程是并发运行的，而不是顺序运行的。管道在生产者-消费者关系中实现了传统的 FIFO 队列。

# android - How to delete selected items from listview in android clicking on delete context menu item?

> ID：15674204
> 
> 赞同：1
> 
> 时间：2013-03-28T04:17:44.547
> 
> 标签：android

I want to create a multiple-choice listview; associate the listview to a contextual menu. The menu has a delete item. When I choose the delete item on the menu, the selected items in the listview must be deleted; of course the listview will appear without the deleted items, but I have problem when selecting delete item. This is my code

```
 String[] mycolors;
ListView myLis;
ArrayAdapter<String> dataAdapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    myLis = (ListView) findViewById(R.id.colorList);
    mycolors = getResources().getStringArray(R.array.colors_array);

    dataAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_multiple_choice, mycolors);

    myLis.setChoiceMode(2);
    myLis.setAdapter(dataAdapter);
    myLis.setOnCreateContextMenuListener(this);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

private void CreateMenu(Menu menu) {
    MenuItem mnu1 = menu.add(0, 0, 0, "Delete");
    MenuItem mnu2 = menu.add(0, 1, 1, "Item 2");

}

private boolean MenuChoice(MenuItem item) {
    switch (item.getItemId()) {
    case 0:
        deleteSelectedItems();
        return true;
    case 1:
        Toast.makeText(this, "You clicked on Item 2", Toast.LENGTH_LONG)
                .show();
        return true;

    }
    return false;
}

@Override
public void onCreateContextMenu(ContextMenu menu, View view,
        ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, view, menuInfo);
    CreateMenu(menu);
}

@Override
public boolean onContextItemSelected(MenuItem item) {
    return MenuChoice(item);

}

public void deleteSelectedItems(){
    SparseBooleanArray checkedItemPositions = new SparseBooleanArray();
    checkedItemPositions.clear();
    checkedItemPositions = myLis.getCheckedItemPositions();
    int itemCount = checkedItemPositions.size();

    for(int i=itemCount-1; i >= 0; i--){
        if(checkedItemPositions.get(i)){
            Object toRemove = dataAdapter.getItem(i);
            dataAdapter.remove((String)toRemove);
        }
    }
    checkedItemPositions.clear();
    dataAdapter.notifyDataSetChanged();
} 
```

}

# c# - .NET Web API 异常错误详细信息

> ID：15674211
> 
> 赞同：2
> 
> 时间：2013-03-28T04:18:21.943
> 
> 标签：c#, entity-framework, serialization, asp.net-web-api, json.net

我对 Web API 非常陌生，并且正在尝试一些 API 控制器异常。我的问题是当抛出异常时，应用程序将返回太多信息，其中包括堆栈跟踪和正在返回的模型的一些属性。我想知道返回的异常是否可以仅限于一条消息？

这是一个例子：

```
public IEnumerable<Appointments> GetAll(int id)
{
    IEnumerable<Appointments> appointments = icdb.Appointments.Where(m => m.Id== id).AsEnumerable();
    return appointments;
} 
```

如果这会返回异常（差异问题），它将返回如下内容：

> {"Message":"发生错误。","ExceptionMessage":"'ObjectContent`1' 类型未能序列化内容类型 'application/json; charset=utf-8' 的响应正文。","ExceptionType ":"System.InvalidOperationException","StackTrace":null,"InnerException":{"Message":"发生错误。","ExceptionMessage":"检测到属性 'UpdateBy' 类型为 'System. Data.Entity.DynamicProxies.User_B23589FF57A33929EC37BAD9B6F0A5845239E9CDCEEEA24AECD060E17FB7F44C'。路径'[0].UpdateBy.UserProfile.UpdateBy.UserProfile'。","ExceptionType":"Newtonsoft.Json.JsonSerializationException","StackTrace":........ …………………………………………………………………………………………: : : }

正如您所注意到的，它会返回一个堆栈跟踪，其中包含我模型的大部分属性。有没有一种方法可以在抛出异常时返回一条消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T04:23:38.687

你提到你有一个 API 控制器。如果遇到错误，您应该这样做：

```
// A handled exception has occurred so return an HTTP status code
return Request.CreateResponse<string>(HttpStatusCode.BadRequest, your_message); 
```

因此，对于您给定的示例代码，您可以使用以下内容：

```
public IEnumerable<Appointments> GetAll(int id)
{
    IEnumerable<Appointments> appointments= null;
    try {
        icdb.Appointments.Where(m => m.Id== id).AsEnumerable();
    }
    catch {
        var message = new HttpResponseMessage(HttpStatusCode.BadRequest);
        message.Content = new StringContent("some custom message you want to return");
        throw new HttpResponseException(message);
    }
    return appointments;
} 
```

如果您的控制器遇到未处理的异常，则调用代码将收到 500 状态。

# java - MapReduce 单元测试无法模拟 DistributedCache.getLocalCacheFiles

> ID：15674229
> 
> 赞同：2
> 
> 时间：2013-03-28T04:20:49.777
> 
> 标签：java, junit, mapreduce, mockito, mrunit

使用[Apache MRUnit](http://mrunit.apache.org/)，我可以在本地对我的 MapReduce 程序进行单元测试，然后再在集群上运行它。

我的程序需要从[DistributedCache](http://hadoop.apache.org/docs/stable/api/org/apache/hadoop/filecache/DistributedCache.html)中读取，所以我封装了一个在单元测试中[模拟](https://code.google.com/p/mockito/)`DistributedCache.getLocalCacheFiles`的类。我设置了一个存根，以便在不调用该方法时将返回本地路径。但事实证明，该方法被调用并抛出。 `FileNotFoundException`

这是我的 MapReduce 程序的样子

```
public class TopicByTime implements Tool {
  private static Map<String, String> topicList = null;

  public static void main(String[] args) throws Exception {
   System.exit(ToolRunner.run(new TopicByTime(), args));    
  }

  @Override
  public int run(String[] args) throws Exception {
    Job job = new Job();
    /* Job setup */
    DistributedCache.addCacheFile(new URI(/* path on hdfs */), conf);
    job.waitForCompletion(true);
    return 0;
  }

 protected static class TimeMapper extends Mapper<LongWritable, Text, Text, Text> {    
   @Override
   public void setup(Context context) throws IOException, InterruptedException {
     DistributedCacheClass cache = new DistributedCacheClass();
     Path[] localPaths = cache.getLocalCacheFiles(context.getConfiguration());
     if (null == localPaths || 0 == localPaths.length) {
       throw new FileNotFoundException("Distributed cached file not found");
     }
     topicList = Utils.loadTopics(localPaths[0].toString());

   }

   @Override
   public void map(LongWritable key, Text value, Context context) 
      throws IOException, InterruptedException {
      /* do map */
   }
  }

  /* Reducer and overriding methods */
} 
```

还有我的测试程序

```
public class TestTopicByTime {

  @Before
  public void setUp() throws IOException {
    Path[] localPaths = { new Path("resource/test/topic_by_time.txt")};
    Configuration conf = Mockito.mock(Configuration.class);
    DistributedCacheClass cache = Mockito.mock(DistributedCacheClass.class);
    when(cache.getLocalCacheFiles(conf)).thenReturn(localPaths); 
   }

  @Test
  public void testMapper() {
  }

  @Test
  public void testReducer() {
  }

  @Test
  public void testMapReduce() {
  }
} 
```

`DistributedCacheClass`是一个简单的包装器

```
public class DistributedCacheClass {
  public Path[] getLocalCacheFiles(Configuration conf) throws IOException {
    return DistributedCache.getLocalCacheFiles(conf);
  }
} 
```

我可以在 Mapper 的设置方法中添加一个标志，以便在测试时读取本地路径，但我确实想从我的 MapReduce 程序中拆分测试代码。

我是模拟测试和 MRUnit 的新手，所以我的程序中可能存在新手错误。请指出错误，我将修复它们并在下面发布我的更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T04:56:36.673

在你的`TestTopicByTime.setUp()`改变行

```
when(cache.getLocalCacheFiles(conf)).thenReturn(localPaths); 
```

至

```
when(cache.getLocalCacheFiles(any(Configuration.class))).thenReturn(localPaths); 
```

在模拟时，参数匹配为相等。在您的情况下它们不相等，因为您在代码中传递的实际上下文与您在测试中创建的模拟配置不匹配。因此，您需要使用*参数匹配器 any()*来避免精确的对象比较。

**编辑：** 另外，在你的 TimeMapper.setup() 你正在创建一个新的缓存， *`DistributedCacheClass cache = new DistributedCacheClass();`*

所以你根本没有使用你创建的模拟对象。您必须能够将模拟缓存注入 TimeMapper。您可以将缓存对象从外部传递给 TimeMapper，最好是通过构造函数。因此，在您的测试中，您可以向它传递一个模拟缓存对象。

# sql - 如何在sql server中将数字转换为前缀为0的字符串

> ID：15674236
> 
> 赞同：3
> 
> 时间：2013-03-28T04:21:17.797
> 
> 标签：sql, sql-server

在sql server中，如果我有一个数字`n`，并且`n>=0 and n<=100`，如何用sql将它转换成一个字符串？

```
1 => '01'
2 => '02'
...
10 => '10'
99 => '99' 
```

它类似于 printf。

```
printf ('%2d", n); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-28T04:30:09.843

只要 n 严格*小于*100，就可以使用

```
 RIGHT(100+n,2) 
```

在 SQL Server 2012 中，您还可以使用 FORMAT，以下将起作用，并且还为 100 提供“100”。

```
 FORMAT(n,'00','en-US') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T04:30:50.110

另一种方法（不知道你想如何处理大于 99 的数字）：

```
DECLARE @numbers AS TABLE(Val INT)
INSERT INTO @numbers VALUES(1)
INSERT INTO @numbers VALUES(2)
INSERT INTO @numbers VALUES(10)
INSERT INTO @numbers VALUES(11)
INSERT INTO @numbers VALUES(98)
INSERT INTO @numbers VALUES(99)
INSERT INTO @numbers VALUES(100)
SELECT REPLACE(STR(Val, 2), ' ', '0') FROM @numbers 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T04:29:06.520

`%2d`需要翻译成`2 digit`sql server中的格式

试试这个

```
Declare @val int
set @val=1
SELECT RIGHT('0' + CAST(@val AS VARCHAR(2)), 2) 
```

结果 ：-

```
01 
```

为了检查`0 to 100`使用`case`语句之间的数字

```
SELECT  case when @val>0 and @val<100 then 
               RIGHT('0' + CAST(@val AS VARCHAR), 2)
               else 
               NULL
               END 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T04:29:12.760

```
select RIGHT('00'+ convert(varchar, @val), 3) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T04:38:54.053

做这个：

```
DECLARE @table AS TABLE(n INT)
INSERT INTO @table 
VALUES(1),(3),(5),(9),(10),(50),(99),(100)

Select Case When n<10 Then '0'+Cast(n as varchar(10)) Else Cast(n as varchar(10)) End From @table 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-15T07:48:17.443

```
SELECT REPLACE(STR(id, 4), SPACE(1), '0') AS YY FROM tableA 
```

这将是解决您的问题的聪明方法...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-03T14:41:48.140

你可以使用sql的LPAD函数

**试试这个**

```
SELECT LPAD(n, 2, 0);

Result
01
02
....
10 
```

解释：LPAD 函数用第三个参数左填充字符串（即给定示例中的 0），直到第二个参数中给定的长度（即给定示例中的 2）

**更多示例**

```
SELECT LPAD('hello', 10, '*');
Result :  *****hello 
```

# html - 将文件放入 div 并将其放入文件输入中

> ID：15674239
> 
> 赞同：1
> 
> 时间：2013-03-28T04:21:25.427
> 
> 标签：html, file, drag-and-drop

我在 div 中删除的文件有问题我想把它放在文件输入中

我有这个代码

```
document.getElementById('drop_div').addEventListener('drop', function(e){
    e.preventDefault();
    var files = e.target.files || (e.dataTransfer && e.dataTransfer.files);
    document.getElementById('file_input').files = files;
}); 
```

此代码在“Google Chrome”中完美运行，但在其他浏览器中没有机会

*所有这一切的基础是使用拖放上传文件而不使用ajax，如果你有任何其他好的方法告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T04:30:02.967

我将通过将文件输入设置为 0 不透明度来实现。

```
<div style='position: relative' id='drop_div'>
    <input type='file' style='position: absolute; opacity: 0; filter: alpha(opacity = 0);'/>
    <span style='position: absolute'>Drop Here</span>
</div> 
```

然后在文件输入上添加一个 onchange 监听器。

# php - Google Geocoding API 有时我永远无法得到结果，只能得到“REQUEST_DENIED”

> ID：15674243
> 
> 赞同：1
> 
> 时间：2013-03-28T04:22:06.223
> 
> 标签：php, google-geocoding-api

我在我的网站上开发了与地理编码 API 相关的功能。我的网站有很多客户，所以他们每天都会多次访问 Geocoding API。（比如这个 url-“ [http://maps.googleapis.com/maps/api/geocode/json?address=mount+waverley+australia&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?address=mount+waverley+australia&sensor=false) ” )

通常，此功能会获得出色的效果。但我现在从不更改代码，有时它会得到“REQUEST_DENIED”。

我认为这个问题与地理编码 API 的限制（每天 2500 个）有关，所以我将我的 API 密钥插入到上面的 url。（像这样-" [http://maps.googleapis.com/maps/api/geocode/json?地址=mount+waverley+australia&sensor=false&key=XXXXXXXXXXX](http://maps.googleapis.com/maps/api/geocode/json?address=mount+waverley+australia&sensor=false&key=XXXXXXXXXXX) ")

但是我得到了相同的结果-“REQUEST_DENIED”。

为什么我会得到这样的结果？我该如何解决这个问题？

欢迎任何帮助，非常感谢您的阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:50:27.947

通过在 URL 中插入您的密钥，您仍然可以访问 API，因此具有相同的限制。如果您有一个繁忙的站点，那么您很可能已经达到了极限。

我建议尝试在另一个帐户下获取一个新的 API 密钥，然后看看该帐户会发生什么。

如果这工作正常，您可能必须考虑购买访问权限（可能很昂贵）或（如果可能在您的应用程序中）在本地缓存 API 结果。

# jsf - 使用动态页面加载 只初始化一次 bean

> ID：15674244
> 
> 赞同：0
> 
> 时间：2013-03-28T04:22:18.823
> 
> 标签：jsf, primefaces

我正在使用 ajax 和 primefaces 布局动态加载页面。这是我的页面。

索引.xhtml

```
<p:layout fullPage="true">
            <p:layoutUnit position="north">
                <h1>Header</h1>
            </p:layoutUnit>

            <p:layoutUnit position="south">
                <h1>Footer</h1>
            </p:layoutUnit>

            <p:layoutUnit position="west">
                <h:form>

                    <p:menu>
                        <p:menuitem value="Page1" action="#{navigationBean.method('page1')}"
                                    ajax="true" update=":main-content"/>
                        <p:menuitem value="Page2" action="#{navigationBean.method('page2')}"
                                    ajax="true" update=":main-content"/>
                    </p:menu>
                </h:form>
            </p:layoutUnit>

            <p:layoutUnit position="center" >

                <h:panelGroup id="main-content">
                    <ui:include src="#{navigationBean.page}.xhtml" />
                </h:panelGroup>

            </p:layoutUnit>
        </p:layout> 
```

NavigationBean.java

```
@ManagedBean
@SessionScoped
public class NavigationBean {

    @ManagedProperty(value="page1")
    private String page;

public String getPage() {
        return page;
    }

    public void setPage(String page) {
        this.page = page;
    }

    public void method(String page){
        this.page = page;
    }
} 
```

page1.xhtml

```
<h:outputText value="#{page1Bean.text}"/> 
```

page2.xhtml

```
<h:outputText value="#{page2Bean.text}"/> 
```

Page1Bean.java

```
@ManagedBean
@SessionScoped
public class Page1Bean {

    private String text;

    @PostConstruct
    public void init()
    {
        System.out.println("\nPage1Bean @PostConstruct");;
    }

    public Page1Bean() {
        text = "Page 1 BEan Text Variable";
        System.out.println("Page1Bean Constructor");
    }

    public String getText() {
        return text;
    }

    public void setText(String text) {
        this.text = text;
    }

} 
```

Page2Bean.java 类似于 Page1Bean.java。该代码工作正常，可以动态加载页面并使用 ajax。但问题是**@PostConstruct 和 Page1Bean 和 Page2Bean 的构造函数只被调用一次。** 我的意思是第一次加载页面时会调用这些方法。但是第二次加载页面时不会再次调用它们。因此，如果有人以前做过或看过它，请帮助我如何处理这种情况。

**编辑：**我已经根据 Luiggi Mendoza 的想法在 Page1Bean 和 Page2Bean 上尝试了@Viewscope，但仍然没有运气。它适用**于@REQUESTSCOPE**（感谢Luiggi Mendoza），但是如果将来**我得到一些@SESSIONSCOPE bean怎么办？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:26:35.797

将范围从 更改`@SessionScoped`为更窄的范围，例如`@ViewScoped`或`@RequestScoped`。对于这种情况，它似乎`@ViewScoped`符合您的目的。

BalusC 在他的博客文章[JSF 2 中的通信：托管 Bean 范围](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ManagedBeanScopes)中解释了每个 JSF 托管 bean 范围的详细信息。

# asp.net-mvc - 如何处理使用 ASP.NET MVC 和 SQL Server 2008 开发的网站中的图像？

> ID：15674246
> 
> 赞同：0
> 
> 时间：2013-03-28T04:22:33.787
> 
> 标签：asp.net-mvc, image, filestream

我目前正在编写一个使用 SQL Server 2008 数据库作为其后端的 ASP.NET MVC 网站。很少有表格（如产品目录等）应该有缩略图和完整图像，以显示在网站上以供最终用户使用。我很困惑是否应该使用 - A) FILESTREAM 列用于将图像存储在数据库本身 B) 或包含图像的路径和文件名（或 URL）的简单 varchar 列

一般的做法是什么？我知道 FILESTREAM 会带来很多代码和 DBA 开销，但如果它是一般做法，我可以灵活地使用它。否则，存储 URL 绝对是最简单的选择。但是应该遵循推荐的那个。

对此的任何建议，非常感谢。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T23:35:20.403

我从来没有真正理解将图像存储为数据库中的二进制 blob 的炒作。请记住，您的文件系统**是**为存储二进制 blob（称为文件）而设计的数据库。

这个问题提供了对该主题的很多见解。我建议大家阅读它及其答案。

*   [在 DB 中存储图像 - 是还是不是？](https://stackoverflow.com/questions/3748/storing-images-in-db-yea-or-nay)

就个人而言，我一直将图像存储在文件系统中（毕竟图像**就是文件！），并且只在数据库中存储运行时生成 URL 所需的信息。**

我见过的一种方案是使用图像的 MD5 作为其文件名，并将该 MD5 与图像 ID 一起存储在数据库中。然后您可以将 MD5 十六进制数字分解为几个组件以构建目录结构。这限制了单个目录中的文件数量。

例如，图像的 MD5 可能为`d41d8cd98f00b204e9800998ecf8427e`. 它在数据库中的条目如下所示：

```
 id | md5                              | upload_date | ...
 ----------------------------------------------------------
 42 | d41d8cd98f00b204e9800998ecf8427e | 2013-04-01  | ... 
```

此文件可能存储在`images/d4/1d8/cd98f00b204e9800998ecf8427e.jpg`. 您放置路径分隔符的位置以及您拥有的路径分隔符的数量决定了目录数和每个目录中的文件数之间的平衡。

# clojure - 为什么 clojure 协议方法经常被函数包装？

> ID：15674252
> 
> 赞同：15
> 
> 时间：2013-03-28T04:23:28.677
> 
> 标签：clojure, protocols, clojurescript

通常，当我在库中看到 clojure 协议时，协议方法将被包装在一个函数中，通常几乎没有添加功能。例如：

```
(defprotocol Pfoo
    (foo-method [this]))

(deftype Atype [x y]
    Pfoo
    (foo-method [this] (do-something)))

(defn foo [arg] (foo-method arg)) 
```

并且通常期望客户端调用函数 foo，而不是协议中的 foo 方法。（有关此类事情的具体示例，请参阅[clojurescript 核心](http://github.com/clojure/clojurescript/blob/master/src/cljs/cljs/core.cljs)顶部的协议。

那么为什么协议经常被隐藏在函数后面呢？协议方法不能成为面向客户端的部分，而不是包装功能吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-28T05:11:02.163

协议代表两种具体实体之间的接口点。一个是调用协议的代码（`foo`在您的示例中调用的任何内容），另一个是实现它的代码（`Atype` `foo-method`）。对一个人方便的事情可能对另一个人不方便。实现者希望提供完整的最小接口，而调用者希望能够支持最丰富的 API。

您提到了 ClojureScript 核心；看看`ISeq`那里的协议。它由几种类型实现，每种类型都必须实现`-first`和`-rest`。为了使这些尽可能容易*实现*，都不需要在其 arg 上调用 seq。但是，相关函数`first`和`rest`面向调用者支持传入非序列，如字符串、向量等，因此该通用功能由非协议函数提供。当然面向调用者的 API 比带有`next`, `map`,的 API 更丰富`filter`, 顺序解构等都建立在`-first`and之上`-rest`。

fns 提供的封装协议方法的其他常见功能包括参数验证（如断言）、默认参数和对 var-args 的支持。

# html - 显示简单的 html 页面 DJango

> ID：15674257
> 
> 赞同：6
> 
> 时间：2013-03-28T04:24:14.497
> 
> 标签：html, django, web

我目前正在使用 Django 1.5，但不知道如何显示一个简单的 html 页面。我一直在阅读有关基于类的视图，但不确定这是我想要做的。

我正在尝试显示一个简单的 index.html 页面，但根据我看到的一些示例，我需要将此代码放在 app/views.py 中：

```
 def index(request):
        template = loader.get_template("app/index.html")
        return HttpResponse(template.render) 
```

为什么我的 index.html 页面必须与与我的 django 项目关联的应用程序相关联？对我来说，让 index.html 页面与整个项目相对应似乎更有意义。

更重要的是，在我的views.py 文件中使用此代码，我需要在我的urls.py 中放入什么才能真正索引.html？

编辑：

Django项目的结构：

```
webapp/
    myapp/
        __init__.py
        models.py
        tests.py
        views.py
    manage.py
    project/
        __init__.py
        settings.py
        templates/
            index.html
        urls.py
        wsgi.py 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T05:00:20.200

**网址.py**

```
from django.conf.urls import patterns, url
from app_name.views import *

urlpatterns = patterns('',
    url(r'^$', IndexView.as_view()),
) 
```

**视图.py**

```
from django.views.generic import TemplateView

class IndexView(TemplateView):
    template_name = 'index.html' 
```

基于@Ezequiel Bertti 的回答，删除`app`

```
from django.conf.urls import patterns
from django.views.generic import TemplateView

urlpatterns = patterns('',
    (r'^index.html', TemplateView.as_view(template_name="index.html")),
) 
```

您的 index.html 必须存储在模板文件夹中

```
webapp/
    myapp/
        __init__.py
        models.py
        tests.py
        views.py
        templates/      <---add
            index.html  <---add
    manage.py
    project/
        __init__.py
        settings.py
        templates/      <---remove
            index.html  <---remove
        urls.py
        wsgi.py 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T04:44:14.977

您可以使用 django 核心的 GenericView：

```
from django.conf.urls import patterns
from django.views.generic import TemplateView

urlpatterns = patterns('',
    (r'^index.html', TemplateView.as_view(template_name="index.html")),
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-25T06:49:39.300

确保您已在 setting.py 中配置了路径。可能它会解决 TemplateDoesNoteExist 错误。

您可以将以下内容放在 settings.py 中。

SETTINGS_PATH = os.path.normpath(os.path.dirname( **file** ))

TEMPLATE_DIRS = ( os.path.join(SETTINGS_PATH, 'templates'), )

# r - 特定于变量转换的逐步回归

> ID：15674271
> 
> 赞同：0
> 
> 时间：2013-03-28T04:26:22.543
> 
> 标签：r, regression

我有一个我很满意的（线性）回归模型。但是，我想为预测变量自动添加一些转换，并根据调整后的 R^2 自动选择具有转换变量的最佳模型。

有没有类似的功能`step`可以`leap`做到这一点？这是使用内置`state.x77`数据集的示例：

```
st = as.data.frame(state.x77)     
names(st)[c(4,6)] <- c("Life.Exp","HS.Grad")
fm = lm(formula = Life.Exp ~ Murder + HS.Grad + Frost, data = st)

transformations = list(function(x) sqrt(x), function(x) log(x)) 
```

现在我想逐步考虑模型中预测变量的所有转换`fm`并选择最佳模型。例如，在第一次交互中，比较

```
fm_sqrt_1 = lm(formula = Life.Exp ~ sqrt(Murder) + HS.Grad + Frost, data = st) 
```

到 fm_log_1 = lm(公式 = Life.Exp ~ log(Murder) + HS.Grad + Frost，数据 = st) 到 fm_sqrt_2 = lm(formula = Life.Exp ~ Murder + sqrt(HS.Grad) + Frost，数据 = st) to fm_log_2 = lm(formula = Life.Exp ~ Murder + log(HS.Grad) + Frost, data = st) to ...

从这些模型中挑选出最好的模型，然后在迭代 2 中再次执行相同的操作。

# ruby-on-rails - 如何处理 Omniauth 中的访问令牌（来自 Auth Hash）？

> ID：15674278
> 
> 赞同：1
> 
> 时间：2013-03-28T04:27:18.057
> 
> 标签：ruby-on-rails, oauth, oauth-2.0, omniauth

我正在使用 Devise 和 Omniauth，并遵循关于它的 railscast（[http://railscasts.com/episodes/235-devise-and-omniauth-revised](http://railscasts.com/episodes/235-devise-and-omniauth-revised)）。它只处理了:uid、:provider。没有涉及**令牌**（来自 Oauth2）？( [https://github.com/intridea/omniauth/wiki/Auth-Hash-Schema](https://github.com/intridea/omniauth/wiki/Auth-Hash-Schema) )

那么，问题是如何处理访问令牌？例如，我使用omniauth-qq（[https://github.com/beenhero/omniauth-qq](https://github.com/beenhero/omniauth-qq)）。你可以看到 Auth Hash 中有 [:credentials][:token]

顺便说一句，我只使用omniauth 来登录用户。

更新：我的意思是我不知道如何处理 Rails 中的令牌。例如，将其存储在会话或其他内容中？这是我的代码，我根本没有处理令牌。是否有任何示例可以查看如何使用令牌？

```
 def self.from_omniauth(auth)
      where(auth.slice(:provider, :uid)).first_or_create do |user|
        user.provider = auth.provider
        user.uid = auth.uid
        user.name = auth.info.nickname
        user.image = auth.info.image
      end
    end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:14:49.597

我遵循了相同的截屏视频，它可以正常工作，无需对令牌进行任何操作。

如果您仅将其用于登录，则无需对其进行任何操作。

您将需要令牌来执行其他操作，例如对好友列表执行请求等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:42:38.467

取决于你想做什么......例如，如果你使用 ominiauth-twitter 或 facebook，这些令牌对于验证你自己很有用，你可以使用令牌来获取额外的信息，例如图片、昵称等等。

# java - 在 Eclipse 中集成 Tomcat - 服务器无法启动

> ID：15674281
> 
> 赞同：0
> 
> 时间：2013-03-28T04:27:25.437
> 
> 标签：java, eclipse, tomcat

我在Eclipse中成功添加了tomcat 6

但是，当我运行我的项目时，错误弹出如下：

本地主机上的 apache-tomcat-6.0.36 所需的端口 8080 已在使用中。服务器可能已经在另一个进程中运行，或者系统进程可能正在使用该端口。要启动此服务器，您需要停止其他进程或更改端口号。

当我打开 localhost:8080 时，glassfish 服务器正在打开

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:29:22.850

这里两个 glassfish 服务都在同一个端口 8080 上运行。Tomcat 默认端口是 8080。所以更改为另一个端口。

```
 <Connector port="8080" protocol=".....
 change it to
  <Connector port="8888" protocol="..... 
```

你可以看到这个文件`Tomcat 6.0\conf`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T04:29:38.993

要么杀死`GlassFish`正在运行的服务器，要么更好地将`port`数字从`8080`tomcat 中的其他值更改为其他值`server.xml`。

在您的安装目录`server.xml`的`conf`文件夹中类似这样的东西。`tomcat`

```
<Connector port="8100" protocol="HTTP/1.1" ... />
                 ^^^^ --> Changed from 8080 to another port number. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T04:35:52.133

在服务器视图 (Window--> Show view --> Server) 中，您可以更改 eclipse 正在使用的 tomcat 的端口：

![在此处输入图像描述](../Images/939632fffcc9d050926b24db812c9edf.png)

# c# - 将 uri 构建为 web api 的灵活方式

> ID：15674286
> 
> 赞同：0
> 
> 时间：2013-03-28T04:28:13.037
> 
> 标签：c#, asp.net-mvc, asp.net-web-api

我是 ASP.NET Web API 的新手，我有一个问题。我通过以下方式调用 API：

```
 Uri uri = new Uri(ConfigurationManager.AppSettings["ServiceUrl"] + "/api/document/GetByDate?date=" + date;
 HttpClient client = new HttpClient();

var response =  client.GetAsync(uri).Result;
var documents =  response.Content.ReadAsAsync<IEnumerable<DocumentDto>>().Result; 
```

我不喜欢这条线：

```
 Uri uri = new Uri(ConfigurationManager.AppSettings["ServiceUrl"] + "/api/document/GetByDate?date=" + date; 
```

如果我明天将方法的名称更改为`GetDocByDate`，那么我将不得不回忆我在哪里使用过该方法并进行更改。你怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:15:04.623

我有一个更好的方法IMO。使用此[WebApiDoodle.Net.Http.Client](http://nuget.org/packages/WebApiDoodle.Net.Http.Client) NuGet 包，您可以执行以下操作：

```
public class ShipmentsClient : HttpApiClient<ShipmentDto>, IShipmentsClient {

      private const string BaseUriTemplateForSingle = "api/affiliates/{key}/shipments/{shipmentKey}";
      private readonly string _affiliateKey;

      public ShipmentsClient(HttpClient httpClient, string affiliateKey)
          : base(httpClient, MediaTypeFormatterCollection.Instance) {

          if (string.IsNullOrEmpty(affiliateKey)) {

              throw new ArgumentException("The argument 'affiliateKey' is null or empty.", "affiliateKey");
          }

          _affiliateKey = affiliateKey;
      }

      public async Task<ShipmentDto> GetShipmentAsync(Guid shipmentKey, string foo) {

          // this will build you the following URI:
          // HttpClient.BaseAddress + api/affiliates/" + _affiliateKey + "/shipments/" + shipmentKey + "?=foo" + foo
          var parameters = new { key = _affiliateKey, shipmentKey = shipmentKey, foo = foo };
          var responseTask = base.GetSingleAsync(BaseUriTemplateForSingle, parameters);
          var shipment = await HandleResponseAsync(responseTask);
          return shipment;
      }

      // Lines removed for brevity
} 
```

此处提供了一个示例用例：[https ://github.com/tugberkugurlu/PingYourPackage](https://github.com/tugberkugurlu/PingYourPackage)

对于您的其他问题（我假设您正在公开 RPC 样式 API），您可以使用以下命令设置方法的操作名称`System.Web.Http.ActionNameAttribute`：

```
[ActionName("GetDocByDate")]
public IEnumerable<Car> Get() {

    IEnumerable<Car> cars = _carRepository.GetAll().ToList();
    return cars;
} 
```

# email - 如何解决无法在 Redmine 中发送的电子邮件？

> ID：15674288
> 
> 赞同：3
> 
> 时间：2013-03-28T04:28:34.663
> 
> 标签：email, redmine

我试图弄清楚为什么我的 Redmine 安装没有发送电子邮件（例如问题更新通知等）。我的 configuration.yml 文件是这样配置的：

```
生产：
  email_delivery:
    交付方法：：发送邮件

```

我也尝试过为 SMTP 配置相同的非结果：

```
生产：
   email_delivery:
     交付方式：：smtp
     smtp_settings：
       enable_starttls_auto：真
       地址：“smtp.gmail.com”
       港口：587
       域：“smtp.gmail.com”
       身份验证: :plain
       用户名：“xxxxxxxx@gmail.com”
       密码：“xxx”

```

我不知道如何解决这个问题。是否有写入错误的日志？我已经检查了 production.log，但没有任何有用的提示。谢谢你的帮助。

```
RAILS_ENV=production script/about
/home/ootbdv/.gems/gems/coderay-1.0.9/lib/coderay/helpers/file_type.rb:19: warning: already initialized constant UnknownFileType
/home/ootbdv/.gems/gems/coderay-1.0.9/lib/coderay/helpers/file_type.rb:126: warning: already initialized constant TypeFromExt
/home/ootbdv/.gems/gems/coderay-1.0.9/lib/coderay/helpers/file_type.rb:132: warning: already initialized constant TypeFromShebang
/home/ootbdv/.gems/gems/coderay-1.0.9/lib/coderay/helpers/file_type.rb:138: warning: already initialized constant TypeFromName

Environment:
  Redmine version                          2.3.0.stable.11680
  Ruby version                             1.8.7 (x86_64-linux)
  Rails version                            3.2.13
  Environment                              production
  Database adapter                         MySQL
Redmine plugins:
  no plugin installed 
```

（我不知道为什么会收到这些警告。如果有人知道如何摆脱它们，请告诉我。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:53:28.647

我仍然不知道问题的答案，但我通过切换回`sendmail`. 如果您遇到此问题，您可能只想尝试返回`sendmail`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T20:32:28.240

首先你是问一两个问题吗？想要多个答案吗？

我认为建议不要将密码放在引号中。除此之外，您的 smtp 配置看起来不错。您应该在 /var/log/email.log 中看到条目

对你问题的最后一部分一无所知，它甚至相关吗？我对此表示怀疑。

# css - 视差站点上固定导航栏顶部的图像库的位置问题

> ID：15674292
> 
> 赞同：-1
> 
> 时间：2013-03-28T04:29:00.103
> 
> 标签：css, positioning, fixed, image-gallery, navbar

这是我第一次使用这个网站，我听说你们很棒。

我是一个相当新的网页设计师/开发人员。

这是我在网站上用于图片库的插件。 [http://tympanus.net/codrops/2011/09/20/responsive-image-gallery/](http://tympanus.net/codrops/2011/09/20/responsive-image-gallery/)

我在我的视差滚动网站的一部分上有这个图片库。

导航栏固定在顶部和向上滚动时。SELECTED 缩略图位于固定导航栏下就好了。但其他一切都在它之上。

我尝试过调整各种 CSS 定位。

老实说，我在表达这个问题时遇到了麻烦。

任何人都可以提出任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T04:35:17.230

我假设您的导航栏设置为

```
postion:fixed 
```

这意味着它相对于浏览器而不是页面定位。在这种情况下，您还应该设置：

```
z-index: 2 
```

... 或 4、5 或其他任何值，只要它高于滚动时您想要“低于”它的所有内容的 z-index。

# java - 如何修改 JComboBox 值中的字体系列？

> ID：15674294
> 
> 赞同：0
> 
> 时间：2013-03-28T04:29:01.320
> 
> 标签：java, swing, fonts, jcombobox

我有一个`JComboBox`填充字体名称。像这张图片：

![在此处输入图像描述](../Images/f822bc0e3f9c328529a70980f5325d32.png)

如何`JComboBox`根据字体名称更改字体系列的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T04:34:57.800

您可以[为 ComboBox 使用自定义单元格渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html#renderer)，您可以在其中返回要在 JComboBox 中显示的 JLabel，并且在渲染器的方法中，您可以根据其值更改特定标签的字体，在您的情况下，字体名称将是值。

# java - 仅基于某些键使两个 HashMap 相等

> ID：15674300
> 
> 赞同：2
> 
> 时间：2013-03-28T04:29:23.100
> 
> 标签：java, hashmap, equals, field, selected

我需要仅根据几个键（不是全部）确定两个 HashMap 的相等性

除了单独访问每个字段并比较是否相等之外，是否有任何时间有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:42:57.047

我能想到的一种方法是在 HashMap 上存储某种“压缩标签”，每次添加新项目/修改/删除现有项目时都会更新该标签。每当您需要进行比较时，您只需比较这个“压缩标签”。

我不确定该“压缩标签”使用哪种算法。如果您的所有 HashMap 项目都可以转换为字符串，您可以尝试 MD5 散列字符串的所有连接吗？

当然，这样做的缺点是每次修改 HashMap 元素时都必须计算“压缩标签”的负担。

这个想法类似于您如何使用 .md5 文件来验证下载的文件是否一致（不会因网络传输而损坏）。我不确定它是否适用于您的情况/不

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T04:58:10.917

您是否有任何方法可以预测您需要比较相等性的键集将如何组成？如果是这样，您可以构建与这些键组中的每一个相对应的子图，然后在这些子图上使用简单的 .equals() ，如果您进行的相等比较比放入主图更多，这可能是值得的。否则，我不确定是否有比蛮力检查更快的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T04:51:53.990

如果你有一个键列表，这应该足够有效。因为`hashmap.get()`已经在内部进行了优化

```
public boolean isNotEqual(){
boolean unequal = false;
for(int i=0;i<list.size();i++){
if(ob1.containsKey(list.elementAt(i)) && ob2.containsKey(list.elementAt(i))){
    if(!ob1.equals(ob2)) {
        unequal = true;
        break;
}else{
    unequal = true;
    break;
}
return unequal;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T04:48:40.343

```
so far my attempt has been extract my required fields and compare each of them 
```

据我所知，这是最好的方法

# ruby-on-rails - 检查邮件地址是否在gmail客户端下

> ID：15674307
> 
> 赞同：-1
> 
> 时间：2013-03-28T04:30:21.540
> 
> 标签：ruby-on-rails, ruby, gmail, email-client

Gmail 能够让用户创建任何电子邮件样式，例如 account1@gmail.com account2@company.com account3@university.com

还有很多。目前，我正在使用来自[https://github.com/liangzan/contacts](https://github.com/liangzan/contacts)的联系人 gem ，但是当我使用 account2@company.com 之类的帐户登录时，它无法获取我的联系人，因为电子邮件地址不是 @gmail或@googlemail 在我阅读代码时。

那么，如何查看邮箱地址是否在gmail地址下呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T04:48:09.993

您可以检查他们的 MX 记录以查看它们是否由 googlemail 服务器托管。

如果在域的 mx 记录中找到 googlemail 服务器，此方法将返回 true。它使用谷歌的 dns 服务器 (8.8.8.8)

```
require 'resolv'

def isGmailAddress?(address)
  domain = address.split("@").last
  Resolv::DNS.open({:nameserver=>["8.8.8.8"]}) do |r|
    mx = r.getresources(domain,Resolv::DNS::Resource::IN::MX)
    if mx.any? {|server| server.exchange.to_s.include? "googlemail" or server.exchange.to_s.include? "gmail-smtp-in.l.google.com"} then
      return true
    end
    return false
  end
end

p isGmailAddress?("emailaddress@gmail.com") 
```

看看[http://ruby-doc.org/stdlib-1.9.2/libdoc/resolv/rdoc/Resolv.html](http://ruby-doc.org/stdlib-1.9.2/libdoc/resolv/rdoc/Resolv.html)

# scala - 如何在 scala 更改中创建变量？

> ID：15674310
> 
> 赞同：0
> 
> 时间：2013-03-28T04:30:46.423
> 
> 标签：scala, variables, scope

所以我有这个变量，currentPartNumber，它开始等于 0。我想要发生的是在我的函数中，如果变量等于 0，则将其更改为 1 并打印出文本。我的第二个函数也是如此 - 如果变量在我的第一个函数中更改为 1 并且等于 1，我希望变量更改为 2 并打印出文本。

问题是：如何让变量像我想要的那样随着每个函数调用而改变？

```
var currentPartNumber = 0

def roomOne():Unit = {
   if (currentPartNumber < 1) {
      var currentPartNumber = 1
      println("You now have parts 1 of 4.")
     } else {
      println("This part cannot be collected yet.")
   {
   }

def roomTwo():Unit = {
   if (currentPartNumber = 1) {
      var currentPartNumber = 2
      println("You now have parts 2 of 4.")
     } else {
      println("This part cannot be collected yet.")
   {
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T04:36:09.243

不要隐藏变量：`var`从函数内部删除。

`var`关键字*声明*了一个*新*成员/变量。在这种情况下，名称与从外部范围*隐藏*变量的名称相同。因此赋值（作为声明的一部分）对外部变量没有影响。

```
// no var/val - assignment without declaration
currentPartNumber = 2 
```

也可以看看：

*   [为什么scala try 块允许重新定义封闭范围内的变量？](https://stackoverflow.com/questions/14979813/why-does-a-scala-try-block-allow-variables-from-the-enclosing-scope-to-be-redefi)
*   [为什么 Scala 支持影子变量？](https://stackoverflow.com/questions/7031106/why-does-scala-support-shadow-variables)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T04:39:17.540

在一个可以访问和修改它`currentPartNumber`的类中声明。`roomOne()``roomTwo()`

```
class Parts{
  var currentPartNumber = 0

  def roomOne():Unit = {
    if (currentPartNumber < 1) {
      currentPartNumber = 1
      println("You now have parts 1 of 4.")
    } else {
      println("This part cannot be collected yet.")
    } 
  }  

  def roomTwo():Unit = {
    if (currentPartNumber == 1) {
       currentPartNumber = 2
       println("You now have parts 2 of 4.")
     } else {
      println("This part cannot be collected yet.")
     }
   }
}

scala> :load Parts.scala
Loading Parts.scala...
defined class Parts
scala> var parts = new Parts
parts: Parts = Parts@5636a67c
scala> parts.currentPartNumber
res0: Int = 0
scala> parts.roomOne
You now have parts 1 of 4.
scala> parts.roomTwo
You now have parts 2 of 4. 
```

# c# - OpenNI 中的黑色列

> ID：15674312
> 
> 赞同：1
> 
> 时间：2013-03-28T04:30:55.970
> 
> 标签：c#, c++, wpf, kinect, openni

我正在研究一个 OpenNI 示例，在分析深度数据时，我发现前 7 列始终为零！所以我想弄清楚为什么会这样？我附上了一张描述该问题的照片，并在红色框中标记了![黑柱](../Images/c43bd0a85570901ab68fdd9c3c20b3ee.png)。

非常感谢

# jsf-2 - 无需 Servlet API 即可使用 JSF API 获取用户 IP 地址

> ID：15674315
> 
> 赞同：4
> 
> 时间：2013-03-28T04:31:00.563
> 
> 标签：jsf-2, ip-address

我通过一个简单的表格获得了一些用户数据。在处理相应 backing bean 的 action 方法中的数据时，我目前正在通过这种方式获取用户的 IP 地址：

```
HttpServletRequest request = (HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();
String ipAddress = request.getHeader( "X-FORWARDED-FOR" );
if ( ipAddress == null ) {
    ipAddress = request.getRemoteAddr();
} 
```

还有另一种方式，一种更“JSF”的方式，我不需要挂钩`HttpServletRequest`吗？我读了很多次，不得不`javax.servlet.*`在 a`@ManagedBean`中使用不是一个好的设计，但我找不到其他任何东西。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-28T10:46:11.810

不，没有。[`ExternalContext`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html)没有委托[`ServletRequest#getRemoteAddr()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getRemoteAddr%28%29)给.

最好的办法是用实用方法将其隐藏起来。JSF 实用程序库[OmniFaces](http://omnifaces.org)在实用程序类中有许多其他有用的方法，正是这种方法[`Faces`](http://omnifaces.org/docs/javadoc/current/org/omnifaces/util/Faces.html)：[`Faces#getRemoteAddr()`](http://omnifaces.org/docs/javadoc/current/org/omnifaces/util/Faces.html#getRemoteAddr%28%29)它还考虑了转发地址。

[源代码](https://github.com/omnifaces/omnifaces/blob/master/src/main/java/org/omnifaces/util/Faces.java)在这里：

```
/**
 * Returns the Internet Protocol (IP) address of the client that sent the request. This will first check the
 * <code>X-Forwarded-For</code> request header and if it's present, then return its first IP address, else just
 * return {@link HttpServletRequest#getRemoteAddr()} unmodified.
 * @return The IP address of the client.
 * @see HttpServletRequest#getRemoteAddr()
 * @since 1.2
 */
public static String getRemoteAddr() {
    String forwardedFor = getRequestHeader("X-Forwarded-For");

    if (!Utils.isEmpty(forwardedFor)) {
        return forwardedFor.split("\\s*,\\s*", 2)[0]; // It's a comma separated string: client,proxy1,proxy2,...
    }

    return getRequest().getRemoteAddr();
} 
```

请注意，`X-Forwarded-For`标头代表一个逗号分隔的字符串，您自己的代码没有考虑到这一点。

# android - 当有人点击广告后返回时，Android 应用程序不会恢复

> ID：15674317
> 
> 赞同：1
> 
> 时间：2013-03-28T04:31:10.877
> 
> 标签：android, admob

当有人点击广告并返回应用程序时，应用程序不会恢复。我已`android:launchMode="singleInstance"`在 mainfest 和`android:alwaysRetainTaskState="true"`清单中的活动声明中添加。

我不知道我要去哪里错了。

我的 .java 文件代码如下：

```
 public class MainActivity extends Activity implements AdListener{

 public static int count=0,dispad=0;
 public static LinearLayout lay1;
 private static final Class<?>[] NUMBERS = {First.class};
  protected AdView adView;
    View admobAds;

   @Override
    protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
adView = (AdView)findViewById(R.id.ad);

Toast toast = Toast.makeText(getApplicationContext(), "Click on the ad to      
       make        it     disappear" +
            "", Toast.LENGTH_LONG);
    toast.show();

 adView.loadAd(new AdRequest());

 lay1=(LinearLayout)this.findViewById(R.id.mainlay);

 admobAds = (View) findViewById(R.id.ad);

   //More code 

    public void onDismissScreen(Ad arg0) {

    lay1.removeView(admobAds);
    dispad=1;
    // TODO Auto-generated method stub

}
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:40:22.497

你应该通过这个..... [http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T04:47:36.653

有一个问题，`android:alwaysRetainTaskState="true"`因为我没有在每项活动中都包含它。

当我在活动中添加此代码时，我的应用程序现在没有重新启动，但广告仍然显示。

# objective-c - 理解弱引用

> ID：15674320
> 
> 赞同：5
> 
> 时间：2013-03-28T04:31:39.413
> 
> 标签：objective-c, automatic-ref-counting

我有以下启用 ARC 的代码

```
@property (nonatomic, weak) NSArray *a;
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.a = @[@1, @2];
    NSLog(@"ab is %@", self.a); //prints details of array
    // Do any additional setup after loading the view, typically from a nib.
}
- (void)didReceiveMemoryWarning
{

    [super didReceiveMemoryWarning];
    for (id element in self.a) { //empty here
        NSLog(@"blah");
    }
    // Dispose of any resources that can be recreated.
} 
```

这是我唯一用过的地方`self.a`。这是我为调试我的一个问题而编写的测试程序。

当我模拟内存警告`self.a`消失？为什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-28T04:43:00.213

为了理解这一点，您必须了解引用计数。在Objective-C 中，每个对象都有一个引用计数（即对该对象的强引用数）。如果没有强引用，则引用计数为`0`并且对象被释放。

`self.a = @[@1, @2];`创建一个 autoreleased `NSArray`（意味着它将在稍后阶段自动释放）并将其分配给`self.a`. 一旦 autoreleasepool 耗尽，该数组的引用计数为`0`（假设没有其他强引用）并且它被释放。`self.a`作为一个弱变量会自动设置为零。

如果您使用`[[NSArray alloc] init]`初始化数组并将其分配给弱指针，则该对象将在分配后立即释放。中`NSLog`，`a`会`nil`。

```
__weak NSArray* a = [[NSArray alloc] initWithObjects:@"foo", @"bar", nil];
NSLog(@"%@", a); 
```

在 Xcode 4.6 中，编译器会警告你后一种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T04:45:19.460

> 弱引用不会延长它指向的对象的生命周期，并且会自动变为 nil

[ARC 推出新的终身资格赛](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)

它不会将引用计数增加 1。它不会成为该对象的所有者，而只是持有对它的引用。如果对象的引用计数下降到 0，即使您可能仍然在此处指向它，它也会从内存中释放。

[（非原子，复制，强，弱）](https://stackoverflow.com/questions/9859719/xcode-property-attributes-nonatomic-copy-strong-weak)

所以这里给你的弱对象，它将传入的值分配给它而不保留它。而且由于您无法控制对象的生命周期，因此您弱引用的对象只会继续存在，因为至少有一个其他对象持有对它的强引用。一旦不再是这种情况，对象就会被销毁，并且您的弱属性在使用一次后将自动设置为 nil。

# c++ - C中的字符串连接问题

> ID：15674325
> 
> 赞同：2
> 
> 时间：2013-03-28T04:32:15.120
> 
> 标签：c++, arrays, pointers, multidimensional-array

这是关于`C`编程语言的。

我有大量的二维数组（`sizes are not fixed`）。考虑以下示例。

```
bool sym_a[][]={{...},{...},...};  //consider these are initialized properly
bool sym_b[][]={{...},{...},...};
...
bool sym_z[][]={{...},{...},...};
bool sym_0[][]={{...},{...},...};
bool sym_1[][]={{...},{...},...};
...
bool sym_9[][]={{...},{...},...};
... 
```

注意命名约定，所有的名字都是一样的。只有数组名称的最后一个字符会改变（如果它可以超过一个字符会更好，但这并不重要）。

好的，现在我有一个功能。它根据传递的参数选择其中一个二维数组。然后对选定的数组执行一些任务。请注意，任务是一个常见的任务，只有选定的数组被更改。

例如，根据我目前能想到的，是的switch-case，我可以实现如下功能。

```
void doStuff(char letter){
    switch(letter){
        case 'a':
            sym_a[0][0]=1;  //just for demonstration :D
        break;
        case 'b':
            sym_b[0][0]=1;  //same thing, only the character 'a' changed to 'b'
        break;
        ...
        case 'z':
            sym_z[0][0]=1;
        break;
        case '0':
            sym_0[0][0]=1;
        break;
        case '1':
            sym_1[0][0]=1;
        break;
        ...
        ...
    }    
} 
```

但必须有更好的方法。如果我有 1000 个这样的数组，那么我是否必须编写 1000 个这样的案例？对于所有情况，内容完全相同。只有变量名的一个字符被更改。

如果有类似字符串连接的东西会很好。

```
#define conc(a,b) a ## b 
```

然后`conc(sym_,a)`将代表`sym_a`。但这不能直接应用在这里。因为我不能将确切的字母传递给 的右侧参数`conc(a,b)`，所以只能传递包含所需字母的变量。

```
void doStuff(char letter){
    conc(sym_,letter)[0][0]=1;
} 
```

`conc(sym_,letter)`给`sym_letter`. 但我需要`sym_`与字符变量的内容连接`letter`。

例如，如果我打电话给`doStuff('b');`他们`sym_b`，应该给出，而不是`sym_letter`.

希望我的要求清楚。这件事看起来很简单，但我想不出办法摆脱它。请注意，二维数组的大小（行数/列数）不是固定的。否则我可以使用 3D 数组。

任何想法都值得赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T05:08:19.963

你有大量的静态数组，所以它可能是一个自然的扩展，你最终会有大量的条件来访问它们。

您可以定义一个额外的静态数组，将字符代码映射到一个数组。

```
static const struct {
  char* lookup_code;
  bool **array;
} char_code_lookup[] = {
    { .lookup_code = "a", sym_a },
    { .lookup_code = "b", sym_b },
    /* ... */
    { .lookup_code = NULL, NULL }, /* Terminator */
}; 
```

然后，您的`doStuff`函数可以扫描数组以查找适当的查找代码以匹配静态定义的数组。

使用一点宏魔法，您可以同时生成静态数组和静态查找数组以减少重复，但上面列出的方法可能更易于阅读。

或者，您可以使用 动态分配数组`malloc`，同时在运行时创建数组时关联查找代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T05:31:01.563

Does something like this help? [ Apologies if there's some C++ here. ]

```
bool** sym_a;
bool** sym_b ;
bool** sym_z;
bool** sym_0;
bool** sym_1;
bool** sym_9 ;

unsigned lowestEntry = 'a';
unsigned highestEntry = '9';
const unsigned numEntries = highestEntry - lowestEntry;

size_t size = sizeof(bool**)* numEntries;

bool*** lookup = (bool***)malloc(size); 

#define conc(a,b) a ## b
#define index(a) #a[0]-'a'
#define add(a) lookup[index(a)] = conc(sym_,a)

void init()
{
    memset(lookup, 0, size);
     add(a);
     add(b);
     add(z);
     add(9);
     add(k); // does not compile, sym_k not defined.
}

bool** findSymbolTable(char val)
{
    return lookup[val - lowestEntry];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T05:48:16.197

分配一个大的 int 数组并将其分区为您的其他变量。

例如。

整数数据[2600]；

sym_a 将有前 100 个整数，sym_b 将有前 100 个整数，依此类推。您将能够在这些数组中存储 8 * 100* 4 个布尔值。

现在访问 sym_p[x][y] 你会说你总共有 R 行和 C 列：

int * 开始 = 数据 + (ASCIValue(p) - ASCIValue(a)) * 100；

您必须从头开始读/写位号（C * x + y）。

# hadoop - HiveQL 查询性能优化

> ID：15674326
> 
> 赞同：2
> 
> 时间：2013-03-28T04:32:27.447
> 
> 标签：hadoop, hive, sqoop, hiveql

随着 Hive 查询中 JOINS 数量的增加，查询分多个阶段运行，需要大量执行时间。如何提高查询性能。有需要设置的参数吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T14:55:30.510

First of all large tables should be placed as last one in join order: SELECT small.*, large.* FROM small JOIN large ON small.joinkey=large.joinkey; You can use a hint to tell optimazier which table is biggest:

```
SELECT/*+ STREAMTABLE(large) */ small.*, large.* FROM large
JOIN small ON small.joinkey=large.joinkey; 
```

Second the small tables could be cached in memory on join by Map-side join:

```
set hive.auto.convert.join = true;
SELECT a.*, b.* FROM a
JOIN b ON a.joinkey=b.joinkey; 
```

Size of map-join table is set by:

```
set hive.mapjoin.smalltable.filesize = 1000000; 
```

I hope it helps a bit. GL!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T10:33:59.780

除了上述当查询的 SELECT 或 WHERE 子句没有引用右表时，总是最好使用左半连接。

半连接比更一般的内连接更有效的原因如下。对于左侧表中的给定记录，一旦找到任何匹配项，Hive 就可以停止在右侧表中查找匹配记录。此时，可以投影左侧表记录中的选定列

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-14T11:43:03.873

```
set hive.exec.parallel = True 
```

这是通用的，使用适当的设置命令，我们可以根据您的集群配置优化更重要的查询。

# php - PHP中的命令相当于javascript中的警报

> ID：15674327
> 
> 赞同：2
> 
> 时间：2013-03-28T04:32:27.783
> 
> 标签：php, javascript, debugging, alert

我在javascript中使用'alert'命令来检查变量的值，以便调试我的代码。但我在 PHP 中找不到任何这样的命令，它显示一个简单的弹出框，如警报命令。我是 PHP 新手。
有什么我不知道的吗？

前任：

```
$username=$_REQUEST["username"];
$password=$_REQUEST["password"]; 
```

在这里，我只想找出这些变量中的值。如果是javascript，我会简单地使用alert（用户名）和alert（密码）。如何在php中做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T04:37:11.740

PHP没有任何显示弹出窗口的功能..

但是你可以通过像这样在php中编写javascript来实现这一点

```
 echo "<script type='text/javascript'>alert('Username'".$username.");</script>";
 echo "<script type='text/javascript'>alert('Password' ".$password.");</script>"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T04:36:37.657

您可以使用`echo`、`var_dump`或。`print_r``error_log`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T04:33:58.343

只是回应他们

```
echo "Username:".$username;
echo "<br>";
echo "Password:".$password; 
```

您也可以使用[var_dump](http://www.php.net/var_dump)

PHP 是一种服务器端语言，不提供 JavaScript 等客户端功能`alert()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T04:39:18.923

PHP 是服务器端的，而不是客户端的，所以期望它表现得像 JavaScript 有点奇怪。

[`var_dump`](http://php.net/manual/en/function.var-dump.php)改为退房。

如果你真的想要一个 JS 警报，你总是可以按照以下方式创建一个 PHP 函数：

```
function debugAlert($var)
{
    echo '<script type="text/javascript">';
    echo 'alert("'.$var.'")'; 
    echo '</script>';
} 
```

然后输出您的数据，只需调用`debugAlert($username)`等。

这是一个非常简单的版本 - 实际上，您需要在变量值中转义引号，并且如果变量是数组或对象，还需要包含一些逻辑来处理，但它应该让您朝着正确的方向前进。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-28T04:43:40.340

只需使用`print_r($_REQUEST)`. 它显示所有值`array('username'=>'','password'=>'');`

或回显值 echo $username; 并回显$密码；

```
echo "<script type='text/javascript'>alert('username and password'+$username+' & '+$password)"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-02T20:47:30.717

用这个：

```
echo '<script language="javascript">';
echo 'alert("message successfully sent")';
echo '</script>'; 
```

# ruby-on-rails - Rails 和 BackboneJS 破坏模型主干曲解响应

> ID：15674328
> 
> 赞同：2
> 
> 时间：2013-03-28T04:32:38.650
> 
> 标签：ruby-on-rails, rest, backbone.js

我正在破坏骨干网中的模型，它会发送正确的 DELETE 请求。请求一切正常；我什至检查了 chrome 调试器，在网络下它说请求`status 200`尚未主干出于某种原因调用我的错误函数。这是代码：

```
destroy : function() {
    new App.Views.Notice({ message: "Removing reminder...", type: "message"});
    this.model.destroy({
        success: function(model, response){
            this.close();
            new App.Views.Notice({message: "Successfully remove reminder", type:"success"});
        },

        error: function() {
            new App.Views.Notice({message: "Could not remove reminder", type:"error"});
        }
    });
}, 
```

在我的 Rails 模型中：

```
def destroy
    note = Note.find_by_id(params[:id])
    note.destroy
end 
```

（我应该在这里渲染一些 json 吗？）

这是请求信息：

```
DELETE /notes/41 HTTP/1.1
Host: 127.0.0.1:3000
Connection: keep-alive
Accept: application/json, text/javascript, */*; q=0.01
Origin: http://127.0.0.1:3000
X-Requested-With: XMLHttpRequest
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.43 Safari/537.31
Referer: http://127.0.0.1:3000/
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: _Notely_session=BAh7B0kiD3Nlc3Npb25faWQGOgZFRkkiJTc1MTk3OGRkYzNiZGUzODY1YjYyYWM2MmNjOWZjZDViBjsAVEkiEF9jc3JmX3Rva2VuBjsARkkiMXNUWGZDUkpHL1F2Um52NXB0emNsNnpmWDVVS1dmZ1RLOUtkQk9STXA2UjA9BjsARg%3D%3D--b186601186315cb3cc7aee51b92d1e2a76a8279e 
```

回复信息：

```
HTTP/1.1 200 OK
Content-Type: text/html; charset=utf-8
X-Ua-Compatible: IE=Edge
Cache-Control: no-cache
X-Request-Id: 94ab62df5f0b462901174ae329d37e1f
X-Runtime: 0.088005
Server: WEBrick/1.3.1 (Ruby/1.9.3/2013-01-15)
Date: Thu, 28 Mar 2013 04:25:34 GMT
Content-Length: 0
Connection: Keep-Alive
Set-Cookie: _Notely_session=BAh7BkkiD3Nlc3Npb25faWQGOgZFRkkiJTA1YWViMDI2NmZjMjI3NDM4ZDcwZjBkZjhjNWVjYzFiBjsAVA%3D%3D--507388d81c70eb937fe521749b60e7f170d15671; path=/; HttpOnly 
```

在 Chrome 调试器的响应选项卡下，它还显示“此请求没有可用的响应数据”我应该在 Rails 中发送一些东西吗？如果是这样，是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:17:41.037

目前我正在使用 BackboneJS。在正常情况下，当我们在 Backbone Model 中调用 REST 方法时，它会发送 JSON 请求（您可以在服务器控制台中看到`as JSON`）。我更喜欢使用这样的 JSON 响应：

```
respond_to do |format|
  format.json {render :json => {:msg => "item deleted!"},:status => 200}
end 
```

我真的不知道问题出在哪里，因为它的响应状态为 200。但是为了解决这个问题，我将我的销毁代码粘贴到 Backbone（在咖啡脚本中）

```
model.destroy(
  success: (model, response, options) =>
    #do other stuff
  error: (model, response, options) =>
    #do stuff for error
) 
```

# ios - ssl 中客户端 Hello 数据包中 mshkg000019.blob.core.windows.net 的含义

> ID：15674333
> 
> 赞同：0
> 
> 时间：2013-03-28T04:32:54.103
> 
> 标签：ios, ssl, azure-storage, icloud, azure-blob-storage

我已经为 icloud 流量捕获了一些 pcap 文件。我已经看到一些 ssl 流在客户端 Hello 数据包中具有以下服务器名称之一

```
mshkg000019.blob.core.windows.net
mshkg000018.blob.core.windows.net
mshkg000015.blob.core.windows.net 
```

谁能在这里告诉我“mshkg000019”的含义？“mshkg”在这里是什么意思，19、18、15 等不同的数字在这里意味着什么？任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T04:44:18.450

看起来这些是作为 TLS 服务器名称扩展的一部分发送的服务器名称。

“mskhg”没有任何意义，它只是您的客户端尝试连接的服务器名称。您应该阅读有关服务器名称指示 TLS 扩展的更多信息[http://en.wikipedia.org/wiki/Server_Name_Indication](http://en.wikipedia.org/wiki/Server_Name_Indication)

# emacs - 更改为 DONE 后，如何将 TODO 重新归档到给定位置？

> ID：15674334
> 
> 赞同：2
> 
> 时间：2013-03-28T04:32:57.307
> 
> 标签：emacs, org-mode

我如何在 Emacs org-mode 中实现这一点？我需要写一些elisp代码吗？我想将我的 DONE 任务重新归档到同一组织文件上的 Anti-todo 标题。事情是想轻松地了解我在白天完成的事情。如果我存档，那么在运动中，我会忘记白天完成的工作。例如：

```
* Projects
** TODO Task 1
* Anti-todo
** DONE DId some stuff
** DONE Did some other stuff 
```

当我将 Task 1 切换到 DONE 时，我希望它重新归档到 Anti-todo

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T13:40:32.673

org-mode 有一个功能可以做到这一点，它被称为 org-sort-entries。命令提示排序类型，在您的情况下为“o”。

要让它自动执行上述操作，请将其添加到您的配置文件中：

```
(defun xmonk/org-sort-todo-list ()
  "Sort buffer in todo order."
  (interactive)
  (save-excursion
    (mark-whole-buffer)
    (org-sort-entries nil ?o))
  (org-overview))

(add-hook 'org-after-todo-state-change-hook 'xmonk/org-sort-todo-list) 
```

将状态从 Todo 更改为 Done 时的自动重新归档有点棘手并会导致错误，但执行此操作的代码将是这样的：

```
(setq org-refile-use-outline-path "Anti-todo")

(defun xmonk/org-refile-done()
  (interactive)
  (beginning-of-buffer)
  (re-search-forward "DONE")
  (if (match-beginning 0)
    (let ((org-refile-targets '((nil :maxlevel . 5))))
      (org-refile nil (current-buffer))))) 
```

然后你可以像这样从上面的钩子中调用它：

```
(add-hook 'org-after-todo-state-change-hook 'xmonk/org-refile-done) 
```

它仍然会要求您确认是否要在 Anti-todo 标题下重新提交。

# clojure - 使用 enlive，您如何根据其内容获取链接的标签？

> ID：15674335
> 
> 赞同：5
> 
> 时间：2013-03-28T04:32:57.593
> 
> 标签：clojure, enlive

我有一些看起来像这样的html：

```
<html>
<body>
<a href="www.google.com">text</a>
</body>
</html> 
```

如何`a`通过使用显示“查找包含文本内容的任何链接”的选择器来获得？我已经了解了`text-pred`，但这只是返回文本，而不是带有文本的标签。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T17:00:08.120

[我在 Enlive 论坛上找到了这个答案](https://groups.google.com/forum/?fromgroups=#!searchin/enlive-clj/text-pred/enlive-clj/thlhc5zBRUw/IUyVzpNwgnUJ)。为方便起见，我将其内联：

# 问题

```
I'm trying to extract the :href attribute from a link which has the
anchor text "Next".  So far I have the following selector worked up.

(html/select tree [:div#nav :span.b :a])

<div id="nav">
<span class="b"><a href="...">Back</a></span>
<span><a href="...">1</a></span>
<span><a href="...">2</a></span>
<span><a href="...">3</a></span>
<span class="b"><a href="...">Next</a></span>
</div>

The problem is that this gives several results (both "Back" and
"Next").  How can I filter this by the text above so I just get the
element I want?  I'd prefer to keep the logic in the css selector
instead of looping through the results if possible... 
```

# 回答

```
You have different options:
  [:div#nav :span.b [:a (html/has [(html/re-pred #"Next")])]]
  [:div#nav :span.b [:a (html/has [(html/text-pred #(= % "Next"))])]]
but the simplest is:
  [:div#nav :span.b [:a (html/pred #(= (html/text %) "Next"))]]
and you can make it clearre by rolling your own predicate:
  (defn text= [s] (html/pred #(= s (html/text %))))
  [:div#nav :span.b [:a (text= "Next")]]

#'text works like innerText in browsers so this selector would match <a href='#'><b>Ne<!-- boo -->xt</b></a> too/ 
```

# java - 休眠：从 3.6.9 迁移到 4.2

> ID：15674338
> 
> 赞同：1
> 
> 时间：2013-03-28T04:33:25.623
> 
> 标签：java, spring, hibernate

我正在使用弹簧和休眠。Hibernate 4.2`Ejb3Configuration`将类声明为已弃用，并且它没有允许设置侦听器的方法**getEventListeners 。**这个类用来搞定`EntityManagerFactory`。

我用它来进行数据库试听（更新、插入、删除事件的记录）。我应该如何获得带有试听配置的 EntityManagerFactory？

```
public class HibernateExtendedPersistenceProvider extends HibernatePersistence {

    private PostInsertEventListener[] postInsertEventListeners;
    private PostUpdateEventListener[] postUpdateEventListeners;
    private PostDeleteEventListener[] postDeleteEventListeners;

    @SuppressWarnings("rawtypes")
    @Override
    public EntityManagerFactory createEntityManagerFactory(String persistenceUnitName, Map properties) {
        Ejb3Configuration cfg = new Ejb3Configuration();
        setupConfiguration(cfg);
        Ejb3Configuration configured = cfg.configure( persistenceUnitName, properties );
        return configured != null ? configured.buildEntityManagerFactory() : null;
    }

    @SuppressWarnings("rawtypes")
    @Override
    public EntityManagerFactory createContainerEntityManagerFactory(PersistenceUnitInfo info, Map properties) {
        Ejb3Configuration cfg = new Ejb3Configuration();
        setupConfiguration(cfg);
        Ejb3Configuration configured = cfg.configure( info, properties );
        return configured != null ? configured.buildEntityManagerFactory() : null;
    }

    private void setupConfiguration(Ejb3Configuration cfg) {
        // 4.2: Ejb3Configuration deprecated and has no method getEventListeners
        cfg.getEventListeners().setPostInsertEventListeners(postInsertEventListeners); 
        cfg.getEventListeners().setPostDeleteEventListeners(postDeleteEventListeners);
        cfg.getEventListeners().setPostUpdateEventListeners(postUpdateEventListeners);
    }

    public void setPostInsertEventListeners(PostInsertEventListener[] postInsertEventListeners) {
        this.postInsertEventListeners = postInsertEventListeners;
    }

    public void setPostUpdateEventListeners(PostUpdateEventListener[] postUpdateEventListeners) {
        this.postUpdateEventListeners = postUpdateEventListeners;
    }

    public void setPostDeleteEventListeners(PostDeleteEventListener[] postDeleteEventListeners) {
        this.postDeleteEventListeners = postDeleteEventListeners;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:20:14.773

如果您可以控制源代码，我会看看 hibernate envers。它在版本控制方面做得很好。它不仅像更新的审计跟踪，而且跟踪旧的实体版本。

JPA 实体侦听器 api 的缺点是您无法轻松访问更改之前的原始值。您必须从某个地方获取这些值才能创建增量。

您仍然可以注册您的休眠事件侦听器，但现在推荐的方法是使用 SPI。查看 Hibernate Integrator 以了解它是如何完成的。

# javascript - 从内容脚本同步获取存储的数据

> ID：15674342
> 
> 赞同：8
> 
> 时间：2013-03-28T04:33:53.127
> 
> 标签：javascript, jquery, google-chrome, google-chrome-extension

我目前正在开发 chrome 扩展程序，源代码[可在 Github 上找到](https://github.com/shahverdy/JS-Injector)。目标是将自定义 Javascript 注入网页。

目前，我将每个*自定义 Javascript Inject*存储在*localStorage并从**content scipts*调用它们。我已将**run_at**设置为**document_start**。

我使用它来从后台脚本获取*存储的注入：*

```
chrome.extension.sendMessage({method:"get_injects"},function(injects){
    for(index in injects){
        if(/^items\./.test(index)){
            itemJSON = injects[index];
            //if(window.location.host.toString().indexOf(itemJSON.url)){
            if(window.location.host.toString().match(itemJSON.url + '$')){
                var js = itemJSON.js.toString();
                eval(js);
            }
        }
    }
}); 
```

### 问题

我想在文档加载之前**运行***注入脚本。* 但是使用提出的方法，控制将通过并且不会等待得到响应。因此，将在页面加载的中间执行。我该如何解决这个问题，以便我能够在页面加载之前注入？**`chrome.extension.sendMessage``injects``eval(js);`**

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T09:18:18.017

在 Chrome 中，每个选项卡都在自己的进程中运行。后台页面在扩展过程中运行，这与您要挂接的选项卡之一不同。所以恐怕没有真正同步的解决方案。

即使使用[chrome.storage](https://developer.chrome.com/extensions/storage.html)（没有来源限制，因此不需要背景页面）也是异步的。

但这里有一个适用于大多数页面的解决方案：

1.  如果你需要的数据在页面的localStorage中，执行6
2.  从页面中删除所有内容
3.  对数据进行异步请求
4.  当您有数据时，将其存储在页面的 localStorage 中（不是后台）
5.  用相同的 URL 刷新页面
6.  利润

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-10T21:01:10.010

有*一种*方法可以从后台页面同步获取任意数量的数据到当前内容脚本。你应该避免在你的扩展中同步阻塞代码，所以我不会提供示例代码，以阻止在生产代码中复制粘贴。

流程是：

1.  在内容脚本中使用同步`XMLHttpRequest`（到虚假 URL）来启动这些步骤。
2.  在后台页面，使用[`chrome.webRequest.onBeforeRequest`](https://developer.chrome.com/extensions/webRequest#event-onBeforeRequest)事件拦截这个请求。
3.  同步获取数据，例如从`localStorage`后台页面或本地变量中获取数据，将其转换为 blob，然后使用`var url = URL.createObjectURL(new Blob([ 'data chunks here' ]));`.
4.  `return {redirectUrl: url};`在事件中使用`onBeforeRequest`以发回数据。
5.  确保您最终用于`URL.revokeObjectURL(url);`释放数据所使用的资源。

最后，**尽可能避免同步、阻塞代码！****

# c# - WCF 4.0 开发

> ID：15674346
> 
> 赞同：1
> 
> 时间：2013-03-28T04:34:05.547
> 
> 标签：c#, wcf, iis, iis-7, iis-6

我在 4.0 中开发了我的 WCF，但它仍然托管在 IIS 7 中。

突然，客户端需求发生了变化，现在想要在 IIS 6 中托管。

我会面临一些托管问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:12:41.567

如果它是一个正常的`HTTP`绑定完整的详细说明，你可以做到这[一点](http://forums.iis.net/t/1163873.aspx/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T04:41:08.003

据我所知，您可以在 IIS6 中托管 .NET 4 WCF 应用程序，但仅限于 HTTP 绑定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T05:29:56.230

我不确定这一点，但对于 .NET 4.0，您在运行 IIS 6 时可能会遇到一些问题，因为单个应用程序池不能用于两个不同的框架，而 IIS7 可以创建针对不同框架的应用程序池。

# ruby-on-rails - 在主干中，不同集合中的相同视图可以合并吗？

> ID：15674347
> 
> 赞同：0
> 
> 时间：2013-03-28T04:34:08.110
> 
> 标签：ruby-on-rails, backbone.js

我有三个具有相同索引视图的集合，使用相同的意思是它们在不同的文件夹中具有相同的模板内容、相同的事件、相同的初始化参数和渲染方法，只是索引视图是使用不同的集合加载的。那么有没有办法合并它们呢？

# c++ - c++模板C字符串参数

> ID：15674352
> 
> 赞同：3
> 
> 时间：2013-03-28T04:34:48.270
> 
> 标签：c++, templates, c-strings

我正在研究一个函数的模板。为了简化，假设它看起来像这样：

```
template < typename T >
void f(const T & x)
{
    cout << "generic case" << endl;
    cout << x << endl;
} 
```

我一直认为 C 字符串不能用作模板参数参数。但以下实际上有效（使用 g++ 4.5.1）：

```
f("hello world"); 
```

所以我的问题是：我什么`T`时候打电话`f("hello world")`？

我试图专注于看看到底发生了什么。例如，因为`char[]`我`const char*`看了这个（这显然不起作用）：

```
template < typename T >
void f(const T & x)
{
    cout << "generic case" << endl;
    cout << x << endl;
}
template <>
void f(const const char * T & x)
{
    cout << "char[] case" << endl;
    cout << x << endl;
} 
```

并尝试了几种变体。它们都不起作用。

旁白：我的工作并不需要这个。我需要专门针对 T = "C-string" 的情况，所以我只写了另一个模板函数：

```
template < typename T >
void f(const T & x)
{
    cout << "generic case" << endl;
    cout << x << endl;
}
template < typename T >
void f(T x[])
{
    cout << "T[] case" << endl;
    cout << x << endl;
} 
```

我只是在问，因为我很好奇到底发生了什么，为什么当我读到的内容说*不能*时，为什么允许 C 字符串作为模板参数。我一定误读/误解了一些关于模板的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T04:37:31.203

没有 C 字符串类型。术语 C-string 定义内容，而不是类型。它指的是字符数组的一部分，其中某处有一个空字符，某些函数将其解释为字符串的结尾。

不过，您真正感兴趣的是字符串文字。字符串文字具有 type `const char[N]`，其中 N 是字符串中的字符数，包括隐式空终止符。`"hello world"`类型也是如此`const char[12]`。您可以像这样专门针对它：

```
template<>
void f(const char(&x)[12])
{
   cout << "const char[12] case" << endl;
   cout << x << endl;
} 
```

请注意，这仅涵盖大小为 12 的数组。但是，您可以重载（而不是专门化）*所有*`f()`大小的数组，如下所示：

 *```
template<size_t N>
void f(const char(&x)[N])
{
    cout << "const char[" << N << "] case" << endl;
    cout << x << endl;
} 
```

另请注意，这些方法也将涵盖普通的命名数组。没有办法区分它们和字符串文字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:48:55.910

请注意，这也将作为 const char[N] 和 const char* 都可以推断，

```
template < typename T >
void f(const T* x)
{
    cout << "const char* case" << endl;
    cout << x << endl;
} 
```

这里的特化是常量指针类型。

如果您需要基于 char 数组类型或指针类型的特化，您还可以使用简单的函数重载。*

# android - 如何根据图像尺寸显示来自厨房的图像？

> ID：15674353
> 
> 赞同：0
> 
> 时间：2013-03-28T04:34:57.457
> 
> 标签：android, image

我可以从我的应用程序内部打开图库中的图像/图片。但是我在获取大图像时遇到了内存问题。

有没有办法根据图像尺寸显示来自厨房的图像？

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:39:31.380

[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

该链接将指导您如何有效地加载位图，特别是在**将缩小版本加载到内存中的主题下**

您应该在不使用时回收位图。

```
 bitmaps.recycle(); 
```

位图也存储在从蜂窝开始的堆上。所以在不使用时回收位图。

[http://www.youtube.com/watch?v=_CruQY55HOk](http://www.youtube.com/watch?v=_CruQY55HOk)。如果您遇到内存泄漏，请使用 MAT Analyzer 查找并修复它。该视频有一个关于这个话题的谈话。它还解释了如何管理内存。

如果要显示大量位图，请使用通用图像加载器。使用 listview 或 grdiview 来显示图像。

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)。

它基于惰性列表（工作原理相同）。但它还有很多其他配置。我更喜欢使用*Universal Image Loader*，因为它为您提供了更多配置选项。如果下载失败，您可以显示错误图像。可以显示带圆角的图像。可以缓存在磁盘或内存上。可以压缩图像。

在您的自定义适配器构造函数中

```
 File cacheDir = StorageUtils.getOwnCacheDirectory(a, "your folder");

 // Get singletone instance of ImageLoader
 imageLoader = ImageLoader.getInstance();
 // Create configuration for ImageLoader (all options are optional)
 ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(a)
      // You can pass your own memory cache implementation
     .discCache(new UnlimitedDiscCache(cacheDir)) // You can pass your own disc cache implementation
     .discCacheFileNameGenerator(new HashCodeFileNameGenerator())
     .enableLogging()
     .build();
 // Initialize ImageLoader with created configuration. Do it once.
 imageLoader.init(config);
  options = new DisplayImageOptions.Builder()
  .showStubImage(R.drawable.stub_id)//display stub image
  .cacheInMemory()
  .cacheOnDisc()
  .displayer(new RoundedBitmapDisplayer(20))
  .build(); 
```

在你的 getView()

```
 ImageView image=(ImageView)vi.findViewById(R.id.imageview); 
   imageLoader.displayImage(imageurl, image,options);//provide imageurl, imageview and options. 
```

您可以配置其他选项以满足您的需求。

与延迟加载/通用图像加载器一起，您可以查看持有者以实现平滑滚动和性能。[http://developer.android.com/training/improving-layouts/smooth-scrolling.html](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)。

# iphone - 使用 IP 连接手机

> ID：15674355
> 
> 赞同：0
> 
> 时间：2013-03-28T04:35:13.127
> 
> 标签：iphone, ip, lte

几天来我一直在用 Asterisk 搞砸，我很享受，但最近我只是想到了一种可能更简单的方法来实现我想要的，但我真的不知道这是否可能。

是否可以使用它们的 IP 通过 LTE 匹配两部智能手机？

因此，您只需以编程方式获取他们的 IP，将这些 IP 发送到服务器，然后让服务器连接它们。这可能吗？

任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T02:52:33.010

与电信中的任何事情一样，这取决于您的运营商:-)

一些运营商提供本地 IPv4 地址并且不对它们进行 NAT。在这种情况下，您的服务器可以使用 IP 来确定节点端点。但是，鉴于 IPv4 短缺，您的运营商很可能与许多 ISP 一样，既要对 IP 进行 NAT，又可能对未经请求的入站流量进行防火墙保护。这使您在两个方面变得困难。首先，不能保证您拥有的 IP/端口组合对于连接来说是唯一的——它可以在“流之间”发生变化。其次，即使您确实知道 IP，也不太可能直接访问移动设备。

这样的事情可能是一个更好的主意：

1.  移动 A 建立一个会话，我们假设它有一个 NATed、防火墙、IPv4 地址
2.  移动设备 B 执行相同的操作 移动设备 A 打开与服务器的 TCP 会话——它必须是 TCP，因为防火墙对此更宽容。
3.  手机 B 向服务器打开 TCP 会话
4.  服务器现在有两个活动套接字，无论它们的地址如何，都可以将用户绑定到。

一些运营商提供“唤醒”机制来提升移动设备以使其“回叫服务器”，从而无需服务器为移动设备提供固定地址。可能是短信，也可能是通过一些集成的解决方案。请记住，运营商确切地知道移动设备的位置以及当前的 IP 安排——它将这种安排提供给移动设备。如果您可以询问运营商，服务器就会得到它需要的东西。

# javascript - javascript（在帖子中发布）

> ID：15674356
> 
> 赞同：-1
> 
> 时间：2013-03-28T04:35:14.530
> 
> 标签：javascript, asp.net

我的代码：

```
 <script type="text/javascript">
            window.onload = function () {
                  $.post("/Game/GetPlayers", function (data) {
                    for (var i = 0; i < data.player.length; i++) {
                        if ("@Session.SessionID" == data.player[i].AgainstId);
                        {
                           //some code
                        }
                        $("<li></li>").text(data.player[i].Name).on("click", function () {
\*when i click - field hide */            $(this).hide();
                      $.post("/Game/SetId", { name: data.player[i].Name },function(data2) {
                                alert(data2);
                            });
                        }).prependTo("ol");
                    }
                });
            }
        </script> 
```

为什么我点击时标签（li）消失但第二个帖子请求不起作用？有可能（请求中的请求）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:39:35.370

我认为`li`单击导致错误`data.player[i] is undefined`。

这是因为使用了闭包变量`i`。然后发生的点击事件`i`将具有该值`data.player.length`但`data.player[data.player.length]`未定义。

```
$(function() {
    $.post("/Game/GetPlayers", function(data) {
        $.each(data.player, function(i, v) {
            if ("@Session.SessionID" == v.AgainstId) {
                // some code
            }
            $("<li></li>").text(v.Name).on("click", function() {
                // when i click - field hide
                // $(this).hide();
                $.post("/Game/SetId", {
                            name : v.Name
                        }, function(data2) {
                            alert(data2);
                        });
            }).prependTo("ol");
        });
    });
}) 
```

另一种选择是使用事件委托

```
$(function() {
    $.post("/Game/GetPlayers", function(data) {
        $.each(data.player, function(i, v) {
            if ("@Session.SessionID" == v.AgainstId) {
                // some code
            }
            $("<li></li>").text(v.Name).data("player",
                    v.name).prependTo("ol");
        });
    });

    $('ol').on('click', 'li', function() {
        var $this = $(this);
        // when i click - field hide
        // $(this).hide();
        $.post("/Game/SetId", {
            name : $this.data('player')
        }, function(data2) {
            alert(data2);
        });
    });
}); 
```

# notifications - 有什么方法可以从通知/应用中心获取邀请回调中包含的 Facebook 用户 ID？

> ID：15674358
> 
> 赞同：0
> 
> 时间：2013-03-28T04:35:21.323
> 
> 标签：notifications, invite, facebook-requests

当 facebook 用户从通知列表或应用程序中心单击我的应用程序的邀请时，他们将被重定向到我的主页，并且正如预期的那样，该链接包含应用程序请求 ID。但是，在发送邀请的用户一次选择多个朋友的情况下，该请求 id 会映射到我的邀请记录中的多个 facebook 用户。在这种情况下，我不知道用户是谁，因为链接不包含 facebook 用户 ID。

当然，如果受邀者使用他们的 Facebook 帐户注册，我将能够检索用户 ID。但是，如果他们使用他们的电子邮件地址注册，我将无法：

a) 删除 Facebook 请求 b) 通知发件人受邀者已加入

简而言之，我需要邀请链接中包含的 facebook 用户 ID - 有什么办法可以做到这一点？

# c# - 圈复杂度

> ID：15674359
> 
> 赞同：-4
> 
> 时间：2013-03-28T04:35:37.893
> 
> 标签：c#, .net

## **编程还是新手希望你们帮我解决下面提到的问题。**

我有一个程序，由用于代码视图的文本框和用于查看下面每个问题的结果的标签和执行功能的按钮组成。这是项目的简单视图。

## **要解决的问题：**

1.  当我按下读取文本框中代码并计算代码复杂度的按钮时，我想要函数。

2.  我需要知道代码中有多少属性和对象。

3.  继承类在哪里。

4.  什么是远耦合类。

* * *

## 实际上我一直在尝试编写代码很长时间，但我没有得到正确的结果。我完成了什么：

1.  从 .Cs 文件中打开示例代码。
2.  将代码读取到字符串生成器。
3.  使用下面的代码获得复杂性，但结果完全错误。

**这是我的代码（我让它取决于数组中的匹配）：**

```
 public int Get_complexity(string SourceCode)
    {
        int result = 0;
        try
        {
            StringBuilder sb = new StringBuilder();
            sb.Append(SourceCode);

            char[] delimiterChars = { ' ', '.', '{', '}', '(', ')', ';' };

            string SourceCodeText = sb.ToString();

            string[] words = SourceCodeText.Split(delimiterChars, StringSplitOptions.RemoveEmptyEntries);

            int No_if = FindMatchesInStringArray("if", words);
            int No_elseIf  = FindMatchesInStringArray("elseIf", words);
            int No_while = FindMatchesInStringArray("while", words);
            int No_for = FindMatchesInStringArray("for", words);
            int No_foreach = FindMatchesInStringArray("foreach", words);
            int No_case = FindMatchesInStringArray("case", words);

            int No_default = FindMatchesInStringArray("default", words);
            int No_finaly = FindMatchesInStringArray("finaly", words);
            int No_continue = FindMatchesInStringArray("continue", words);
            int No_continues = FindMatchesInStringArray("continues", words);

            int No_try = FindMatchesInStringArray("try", words);
            int No_catch = FindMatchesInStringArray("catch", words);
            int No_and_op = FindMatchesInStringArray("&", words);
            int No_or_op = FindMatchesInStringArray("||", words);
            int No_words = words.Length;

            result = No_if + No_elseIf + No_while + No_for + No_foreach + No_case + No_default + No_finaly + No_continue + No_continues + No_try + No_catch + No_and_op + No_or_op;
        }
        catch { throw; }
        return result;
    }

    public int FindMatchesInStringArray(string markup, string[] strArray)
    {
        int result = 0;
        try
        {
            for (int i = 0; i < strArray.Length; i++)
            {
                if (markup.ToLower() == strArray[i].ToLower())
                {
                    result += 1;
                }
            }
        }
        catch
        {
            throw;
        }
        return result;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:04:33.087

检查 NDepend 站点定义并尝试模仿他们在做什么：

[http://www.ndepend.com/Metrics.aspx#CC](http://www.ndepend.com/Metrics.aspx#CC)

> 圈复杂度 (CC)：（为类型、方法定义）（仅适用于 C# 代码，VB.NET 版本目前正在开发中）圈复杂度是一种流行的程序软件度量，等于可以在一个程序中做出的决策数量程序。具体来说，在 C# 中，方法的 CC 是 1 + {在方法主体中找到的以下表达式的数量}：
> 
> 如果 | 而| 为| 前锋 | 案例 | 默认 | 继续 | 转到 | && | || | 抓住| 三元运算符 ?: | ??
> 
> 以下表达式不计入 CC 计算：
> 
> 否则 | 做 | 开关 | 试试 | 使用 | 扔| 最后 | 返回 | 对象创建 | 方法调用 | 现场访问
> 
> 圈复杂度度量是在方法上定义的。适应 OO 世界，这个度量也被定义为类和结构作为其方法 CC 的总和。请注意，匿名方法的 CC 在计算其外部方法的 CC 时不计算在内。

# custom-url - 将文件同步到网络，并通过“自定义”网址访问

> ID：15674360
> 
> 赞同：0
> 
> 时间：2013-03-28T04:35:41.150
> 
> 标签：custom-url, public-folders

是否有任何网站允许文件**同步**到文件夹，并且可以通过 http 通过文件夹访问文件夹中的文件？即我要同步的文件夹可以称为“共享”。一个文件可以是“file.txt”。我想通过...访问它... *[http://whicheverDomain.com/IDontCareWhatThisIs/share/file.txt](http://whicheverDomain.com/IDontCareWhatThisIs/share/file.txt)*

此外，我希望文件本身能够直接访问，以便我可以将其发送到谷歌文档查看器。即（[http://docs.google.com/viewer?url=http%3A%2F%2FwhicheverDomain.com%2FIDontCareWhatThisIs%2Fshare%2Ffile.txt](http://docs.google.com/viewer?url=http%3A%2F%2FwhicheverDomain.com%2FIDontCareWhatThisIs%2Fshare%2Ffile.txt)）。如果这不起作用，那么如果网站以体面的方式显示它，那就没问题了。

我已经找了一段时间了。Box 似乎可以做到这一点，但它需要一个企业帐户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-30T05:42:14.393

我找到了解决方案。Dropbox 没有“自定义 url”。但是，它确实有我想要的东西。添加他们的旧公共文件夹就可以了。您可以在页面底部找到它。[https://www.dropbox.com/help/16/en](https://www.dropbox.com/help/16/en)

# android - 如果数据库中没有记录，SQLiteDatabase.query(...) 会返回什么？

> ID：15674363
> 
> 赞同：1
> 
> 时间：2013-03-28T04:36:03.870
> 
> 标签：android, android-sqlite

来自 Android**文档**：

> 退货
> 
> 一个 Cursor 对象，位于第一个条目之前。请注意，游标是不同步的，有关更多详细信息，请参阅文档。

如果我的表有零记录怎么办？

它是否返回null。还是返回一个空的光标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T04:44:48.870

空光标。您可以使用它`getCount()`来确认是否`Cursor`为空或检查是否`moveToFirst()`返回 false（即，它无法移动到第一行）。

# java - 为什么 maven 不在我的 jar 中包含 JSP 文件？

> ID：15674366
> 
> 赞同：8
> 
> 时间：2013-03-28T04:36:38.043
> 
> 标签：java, jsp, maven, web-applications, jetty

我有一个嵌入式码头（版本 8.1.8）网络应用程序，我将其打包为 jar，并使用 JSP 作为其前端。它是用 Maven 版本 3.0.3 构建的。问题是当我这样做时：`mvn package`它包括除了我的 *.jsp 文件之外的所有内容。我试图将它们重新安置在许多不同的地方，但没有运气。

我试图添加`<include>src/main/java/**/*.jsp</include>`到`maven-compiler-plugin`我的 pom.xml 的部分。但这也没有效果。

有没有办法确定 jsp 文件被包含在内？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-23T22:46:09.690

我的解决方案是将 jsp 文件添加到 src/main/webapp 并在 pom 文件中添加以下代码段：

```
<build>
    <resources>
      ...
      <resource>
        <directory>src/main/webapp</directory>
      </resource>
      ...
    </resources>
    ...
</build> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T04:42:32.347

尝试将 .jsp 放入 src/main/resources，Maven 会忽略 src/main/java 中除 .java 之外的所有文件

# html - 防止文本自动换行，最小宽度？

> ID：15674369
> 
> 赞同：0
> 
> 时间：2013-03-28T04:37:04.000
> 
> 标签：html, css

我刚刚开始使用网络，我的首要任务之一是修复一些跨浏览器 UI 问题。在 Firefox 和 Internet Explorer 中，这段代码看起来不错：

```
<div id="readTypeBtns" style="text-align: left;margin-left: -30px">
    <label class="radio inline">
    <input value="First Read" id="firstread" type="radio">First Read</label>
    <label class="radio inline">
    <input value="Second Read" id="secondread" type="radio">Second End</label>
</div> 
```

当我在 Chrome 中查看此内容时，文本 First Read 和 Second Read 自动换行，这使得单选按钮和文本不在同一行。我想知道为什么会这样。我玩了一会儿，发现我可以为每个硬编码一些最小宽度，但这对我来说似乎不是一个“最佳”的解决方案。有什么想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:42:15.700

使用 CSS [white-space](http://www.w3.org/wiki/CSS/Properties/white-space)属性：

```
label {
    white-space: nowrap;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:33:52.083

can you put your style details? wrapping is not automatic other than if you had some other element or style rule that forces it to wrap

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-28T04:41:44.370

尝试将代码更改为：

```
<div id="readTypeBtns" style="text-align: left;margin-left: -30px">
    <label class="radio inline" for="firstread">First Read</label>
    <input value="First Read" id="firstread" type="radio">
    <label class="radio inline" for="secondread">Second End</label>
    <input value="Second Read" id="secondread" type="radio">
</div> 
```

基本上，`<label></label>`不应该包含输入，但应该包含一个`for=""`属性，该属性包含`id`输入的标签。

# android - 如何在 HttpURLConnection 中为 ANDROID 使用 Cookie？

> ID：15674371
> 
> 赞同：1
> 
> 时间：2013-03-28T04:37:14.450
> 
> 标签：android, session-cookies, httpurlconnection, httpcookie, asteriskami

我正在尝试为 Asterisk 接口创建一个应用程序，配置设置已经正确完成，因为我已经仔细检查了它。

我无法从 Asterisk 服务器访问配置文件的原因似乎与连接有关。我需要使用 cookie 连接到登录会话的同一实例。

但到目前为止我无法正确使用 Cookie 需要一点帮助。

我应该通过按button1（bt1）登录并通过按button2（btn2）获取配置文件。

```
public class AsteriskInterface extends Activity {

    private static final String TAG = " AsteriskInterface";

    EditText ed1;
    Button bt1,bt2;
    static String url ="http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=";
    static String logincmd ="http://192.168.8.2:8088/asterisk/rawman?action=login&username=admin&secret=admin123";
    static String getfilecmd = "http://192.168.8.2:8088/asterisk/rawman?action=getconfig&filename=sip.conf";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ed1 = (EditText) this.findViewById(R.id.editText);
        bt1 = (Button) this.findViewById(R.id.submit);
        bt2 = (Button) this.findViewById(R.id.config);
        final WebView myWebView = (WebView) findViewById(R.id.webView);

        bt1.setOnClickListener(new OnClickListener() {
            public void onClick(View view) {
                try{
                    new Execute().execute(logincmd);
                } catch(Exception e) {
                    Log.v("Exception execute", "Exception:"+e.getMessage());
                }           
            }
        });

        bt2.setOnClickListener(new OnClickListener() {
            public void onClick(View view) {    
                try{
                    new Execute().execute(getfilecmd);
                } catch(Exception e) {
                    Log.v("Exception execute", "Exception:"+e.getMessage());
                }
                //myWebView.loadUrl(cmd2);
            }
        });
    }

    public static void Response(String result) {
        Log.e(TAG,result);  
    }
}

class Execute extends AsyncTask<String, Integer, String> {

    List<String> cookies = null;

    protected String doInBackground(String... searchKey) {

        String cmd = searchKey[0];
        try {
            return  action2(cmd);
        } catch(Exception e) {
            Log.v("Exception execute do back ground", "Exception:"+e.getMessage());
            return "";
        }
    }

    protected void onPostExecute(String result) {
        try {
            AsteriskInterface.Response(result);
        } catch(Exception e) {
            Log.v("Exception excecute onPost Execute",
                    "Exception:"+e.getMessage());
        }
    }

    private String action2(String uRL) throws MalformedURLException, IOException {

        StringBuilder response = new StringBuilder();
        Log.v("Execute","execute url:"+uRL);
        URL url = new URL(uRL);
        HttpURLConnection httpconn  = (HttpURLConnection) url.openConnection();

        DataOutputStream out;
        DataInputStream in;

        if(cookies==null){
            httpconn.getHeaderField("Set-Cookie");
        }
        if(cookies!=null){
            for(String cookie : cookies){
                httpconn.setRequestProperty("Cookie", cookie);
            }
        }
        httpconn.setDoOutput(true);
        String post = "mobile_app="+URLEncoder.encode("1","UTF-8");
        out = new DataOutputStream(httpconn.getOutputStream());
        out.writeBytes(post);
        out.flush();
        out.close();
        in = new DataInputStream(httpconn.getInputStream());
        String line = "";
        String data = "";
        while((line=in.readLine())!=null){
            data+=line;
        }

        if(httpconn.getResponseCode()==HttpURLConnection.HTTP_OK) {
            BufferedReader input = new BufferedReader(
                    new InputStreamReader(httpconn.getInputStream()),
                    8192);
            String strLine = null;
            while ((strLine = input.readLine()) != null) {
                response.append(strLine);
            }
            input.close();
        }
        return response.toString();
    }
} 
```

我可以确定我正在连接到以前的登录会话。但是现在如何发出新的命令呢？

> 03-28 10:02:15.861: V/Execute(4261): 执行 url: [http://192.168.8.x:8088/asterisk/rawman?action=login&username=admin&secret=admin123](http://192.168.8.x:8088/asterisk/rawman?action=login&username=admin&secret=admin123) 03-28 10:02:18.871 ：V/异常执行后台（4261）：异常：已连接 03-28 10:02:23.651：V/执行（4261）：执行 url：[http://192.168.8.x:8088/asterisk/rawman ?action=getconfig&filename=sip.conf](http://192.168.8.x:8088/asterisk/rawman?action=getconfig&filename=sip.conf) 03-28 10:02:26.691：V/异常执行做后台（4261）：异常：已连接 03-28 10：02：26.721：D/dalvikvm（4261）：GC_CONCURRENT 已释放226K，8%免费7430K/8007K，暂停24ms+3ms，共61ms

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T08:25:30.593

```
private String action(String uRL)
            throws MalformedURLException, IOException {

        StringBuilder response = new StringBuilder();
        Log.v("Execute","execute url:"+uRL);
        URL url = new URL(uRL);
        HttpURLConnection httpconn  = (HttpURLConnection) url.openConnection();

        if(sCookie!=null && sCookie.length()>0){
            httpconn.setRequestProperty("Cookie", sCookie);
        }

        if(httpconn.getResponseCode()==HttpURLConnection.HTTP_OK) {
            BufferedReader input = new BufferedReader(
                    new InputStreamReader(httpconn.getInputStream()),
                    8192);
            String strLine = null;
            while ((strLine = input.readLine()) != null) {
                response.append(strLine);
            }
            input.close();
        }

        String cookie = httpconn.getHeaderField("set-cookie");
        if(cookie!=null && cookie.length()>0){
            sCookie = cookie;
        }
        return response.toString();

    } 
```

# sql - 将行透视到没有聚合的列

> ID：15674373
> 
> 赞同：31
> 
> 时间：2013-03-28T04:37:22.210
> 
> 标签：sql, pivot

试图弄清楚如何编写动态数据透视 sql 语句。Where`TEST_NAME`最多可以有 12 个不同的值（因此有 12 列）。一些 VAL 将是 Int、Decimal 或 Varchar 数据类型。我见过的大多数示例都包含一些 from of aggregate 。我正在寻找一个直接的价值支点。

```
Source Table 

╔═══════════╦══════╦═══════╗
║ TEST_NAME ║ SBNO ║  VAL  ║
╠═══════════╬══════╬═══════╣
║ Test1     ║    1 ║ 0.304 ║
║ Test1     ║    2 ║ 0.31  ║
║ Test1     ║    3 ║ 0.306 ║
║ Test2     ║    1 ║ 2.3   ║
║ Test2     ║    2 ║ 2.5   ║
║ Test2     ║    3 ║ 2.4   ║
║ Test3     ║    1 ║ PASS  ║
║ Test3     ║    2 ║ PASS  ║
╚═══════════╩══════╩═══════╝

Desired Output 
╔══════════════════════════╗
║ SBNO Test1 Test2   Test3 ║
╠══════════════════════════╣
║ 1    0.304  2.3    PASS  ║
║ 2    0.31   2.5    PASS  ║
║ 3    0.306  2.4    NULL  ║
╚══════════════════════════╝ 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-28T09:42:02.450

该`PIVOT`函数需要聚合才能使其工作。看来您的`VAL`列是 a`varchar`所以您将不得不使用`MAX`或`MIN`聚合函数。

如果测试的数量有限，那么您可以对这些值进行硬编码：

```
select sbno, Test1, Test2, Test3
from
(
  select test_name, sbno, val
  from yourtable
) d
pivot
(
  max(val)
  for test_name in (Test1, Test2, Test3)
) piv; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/6df9f/1)。

在您的 OP 中，您声明您将有更多的行变成列。如果是这种情况，那么您可以使用动态 SQL：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(TEST_NAME) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT sbno,' + @cols + '
             from 
             (
                select test_name, sbno, val
                from yourtable
            ) x
            pivot 
            (
                max(val)
                for test_name in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/aa69c/3)。

两个版本都会给出相同的结果：

```
| SBNO | TEST1 | TEST2 |  TEST3 |
---------------------------------
|    1 | 0.304 |   2.3 |   PASS |
|    2 |  0.31 |   2.5 |   PASS |
|    3 | 0.306 |   2.4 | (null) | 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T05:11:44.660

没有聚合就没有任何方法可以 PIVOT。

```
CREATE TABLE #table1
(
    TEST_NAME VARCHAR(10),
    SBNO VARCHAR(10),
    VAL VARCHAR(10)
);

INSERT INTO #table1 (TEST_NAME, SBNO, VAL)
VALUES ('Test1' ,'1', '0.304'),
       ('Test1' ,'2', '0.31'),
       ('Test1' ,'3', '0.306'),
       ('Test2' ,'1', '2.3'),
       ('Test2' ,'2', '2.5'),
       ('Test2' ,'3', '2.4'),
       ('Test3' ,'1', 'PASS'),
       ('Test3' ,'2', 'PASS')

WITH T AS
(
    SELECT SBNO, VAL, TEST_NAME    
      FROM #table1
) 
SELECT *
  FROM T
 PIVOT (MAX(VAL) FOR TEST_NAME IN([Test1], [Test2], [Test3])) P 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-31T23:26:33.453

一种解决方法可能是确保强制聚合只应用于单个记录。例如，在 Excel 中，输出可能是：

![SO15674373 示例](../Images/6390ec55dc34a2d8b88e314401675e5f.png)

其中行标签在底部包含一列具有唯一索引号的单元格。

# database - 根据程序的用户更改数据源

> ID：15674374
> 
> 赞同：0
> 
> 时间：2013-03-28T04:37:25.847
> 
> 标签：database, vb.net, tsql, installation, connection-string

sql连接中的“数据源”是根据用户在安装时指定的吧？我想要的是将在我的情况下为“ACE-DUO”的数据源更改为不同的源。例如，在部署我的程序时，新用户的服务器名称是“Jill”，我希望我的数据源更改如下：

从：

DbConn = New SqlConnection("数据源=ACE-DUO;AttachDbFilename=C:\Database\db_CVSO.mdf;集成安全=True")

进入

DbConn = New SqlConnection("Data Source=Jill;AttachDbFilename=C:\Database\db_CVSO.mdf;Integrated Security=True")

提前感谢您的回答。我还是 sql 的新手，所以如果你觉得这个问题很愚蠢，我很抱歉。我正在尝试为我的 vb.net 程序制作安装程序，但是当我在朋友的计算机上安装程序时，我的连接字符串出现了这个问题。我希望连接字符串在运行时根据我之前所说的进行更改。

我将发布用于安装程序。我还不知道如何为我的 vb.net 应用程序创建一个基本的安装程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:22:10.743

如果服务器始终是部署程序的同一台计算机，则可以使用 Data Source=localhost。

否则，您可能会在部署后首次运行程序时提示您输入服务器名称，并将其保存在用户设置中。从那时起，当您的程序启动时，它可以从用户设置中获取服务器名称，并在连接字符串中使用它。

# java - highcharts 中的数组

> ID：15674383
> 
> 赞同：0
> 
> 时间：2013-03-28T04:38:09.547
> 
> 标签：java, javascript, arrays, highcharts

我正在使用 highcharts 为我的网站绘制一些图表。我下载了一个简单的例子，想要做一些修改。计划是将 postgreSql 数据库中的数据加载到声明的数组中，并将其插入数据中（在 highcharts 中串联）。但是我马上就遇到了问题，我声明了一个名为 arr1 的数组，并将其放在数据所在的位置：

var arr1 = [-2, 8, 5, 11, 17, 22, 24, 24, 20, 14, 8, 2];

数据：arr1

但是它会返回空白页： data: [-2, 8, 5, 11, 17, 22, 24, 24, 20, 14, 8, 2]

工作正常...我没有使用 php 或 JSON，数组有问题吗？任何帮助都非常感谢！！！

```
$(function () {
var chart;
var arr1 = [-2, 8, 5, 11, 17, 22, 24, 24, 20, 14, 8, 2];
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'line',
            marginRight: 130,
            marginBottom: 25
        },
        title: {
            text: 'Monthly Average Temperature',
            x: -20 //center
        },
        subtitle: {
            text: 'Source: WorldClimate.com',
            x: -20
        },
        xAxis: {
            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        },
        yAxis: {
            title: {
                text: 'Temperature (°C)'
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }]
        },
        tooltip: {
            formatter: function() {
                    return '<b>'+ this.series.name +'</b><br/>'+
                    this.x +': '+ this.y +'°C';
            }
        },
        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'top',
            x: -10,
            y: 100,
            borderWidth: 0
        },
        series: [{
            name: 'Tokyo'
            data: arr1
        }, {
            name: 'New York',
            data: [-0.2, 0.8, 5.7, 11.3, 17.0, 22.0, 24.8, 24.1, 20.1, 14.1, 8.6, 2.5]
        }, {
            name: 'Berlin',
            data: [-0.9, 0.6, 3.5, 8.4, 13.5, 17.0, 18.6, 17.9, 14.3, 9.0, 3.9, 1.0]
        }, {
            name: 'London',
            data: [3.9, 4.2, 5.7, 8.5, 11.9, 15.2, 17.0, 16.6, 14.2, 10.3, 6.6, 4.8]
        }]
    });
}); 
```

});

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T04:42:27.740

缺少`,`以下行：

```
series: [{
    name: 'Tokyo',
                 ^ 
```

# linux - CLONE_NEWNS 和挂载传播

> ID：15674385
> 
> 赞同：0
> 
> 时间：2013-03-28T04:38:16.333
> 
> 标签：linux, filesystems, kernel, linux-namespaces

我目前正在寻找一些示例来理解 linux 中的 CLONE_NEWNS，所以我做了以下实验：

在 shell1 中：

```
$ mkdir mnt
$ sudo unshare -m /bin/bash
# mount /dev/sda5 mnt/
# ls mnt
lost+found 
```

如在 shell2 中：

```
$ ls mnt
lost+found 
```

我期望 shell2 中的输出应该是空的，因为 CLONE_NEWNS 将创建一个新的挂载命名空间，如文档所述。

首先，我认为孩子的命名空间挂载会传播到父母的，所以我在父母身上挂载，孩子也**看到**了挂载！

然后，我从同一个父级创建两个单独的子命名空间，安装在一个子级中也会影响另一个子级。

我很困惑。

附言。在我在 shell1 中的第一个实验中：

```
# readlink /proc/$$/ns/mnt
mnt:[4026532353] 
```

在 shell2 中：

```
$ readlink /proc/$$/ns/mnt
mnt:[4026531840] 
```

显然，它们位于不同的挂载命名空间中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:51:17.377

不同的挂载命名空间仅意味着子命名空间中的 [u] 挂载操作在父命名空间中不可见。这并不意味着，父项中的挂载在子项中不可见，也不意味着所有挂载都消失了。

要尝试它，您可以 [un] 在子命名空间中挂载一些东西，看看它是否 [仍然] 存在于父命名空间中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-06T07:23:31.253

Linux 似乎完全倒退了，我不完全确定为什么。

但是如果你`mount /dev/sda5 mnt/`在 shell2 中，那么`ls mnt`在 shell1 中应该不会显示 LOST+FOUND。shell1 中的子命名空间有效地保护它免受其父命名空间的任何更改，但父命名空间由子命名空间更改。有点像反向沙盒，其中父命名空间是可以被子命名空间更改的命名空间，反之则不行。

我不知道为什么会这样，并且可能在某些情况下会有所不同，但我不知道。我对此可能大错特错，但我测试了上述操作，它似乎确实阻止了 mnt/ 安装在 shell2 中。

您的问题的一个可能解决方案可能是使用 unshare 创建一种特权挂载命名空间，您可以在其中执行所有根操作，并且它是您用于正常非特权帐户和操作的父命名空间。所以，就像...

```
[shell1] # unshare -m bash
[shell2] # sudo -u normal-user startx
[shell1] # mount /dev/privatesecret /mnt/secretplace 
```

……类似的东西。显然，如果有人获得 root 权限，他们可以 ptrace 您的进程，但子命名空间将使 [shell1] 中的私有挂载对 [shell2] 或其他任何地方的任何操作完全隐藏，前提是您在执行任何操作之前降低到正常用户权限可以弄乱它。

我很确定，反向沙箱仅适用于挂载命名空间。PID 命名空间将被正确沙盒化，这样子级就看不到父级的 PID，并且内存命名空间的子级在内存中的限制比父级更大。

# android - 在 Netbeans 7.1.1 中下载 android sdk 插件时出错

> ID：15674388
> 
> 赞同：0
> 
> 时间：2013-03-28T04:38:39.747
> 
> 标签：android, netbeans-7

尝试在 Netbeans 7.1.1 上安装 android sdk 时，它显示以下错误消息：链接 Unable to connect to the Android development kit provider because of Zero sized file reported at [http://kenai.com/downloads/nbandroid/updatecenter /updates.xml](http://kenai.com/downloads/nbandroid/updatecenter/updates.xml)，我该如何解决？我在哪里可以得到源文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:17:35.070

您需要使用 Netbeans 7.2 。我想正在使用 7.1.1 ：

[http://nbandroid.org/release72/updates/updates.xml](http://nbandroid.org/release72/updates/updates.xml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:08:09.200

您为什么不尝试开发者网站中提供的 SDK 包？然后你不想将Android安装到Eclipse。

在这种情况下，您是否成功地将 ADT 连接到 Eclipse？

# html - 在 Safari 中聚集的链接

> ID：15674393
> 
> 赞同：0
> 
> 时间：2013-03-28T04:39:12.753
> 
> 标签：html, css, cross-browser

我正在制作一个新网站，并且正在使用 Dreamweaver。我遇到的一个问题是我的链接在 safari 中堆积。**这是它在Firefox**中的样子

 **## ![在 Firefox 中查看](../Images/ac9fd7f7dff51facaf2d98bc07847db9.png)

**它很好，但不幸的是，这就是它在Safari**中的样子

 **![在 Safari 中查看](../Images/810a83f08e7733d4a84b6e0a622d5539.png)

我正在使用 Dreamweaver 开发网站，上面页面的 CSS 看起来像这样

```
#header {
    background-image: url(bg02.jpg);
    height: 10em;
    color: #FFF;
    font-size: 1em;
    text-align: center;
    padding: 0em;
    margin-top: -2em;
    margin-right: 0em;
    margin-bottom: 0em;
    margin-left: 0em;
    width: auto;
}

#header h1 {
    font-size: 4em;
    letter-spacing: 0.1em;
    padding-top: 0.4em;
    padding-right: 0em;
    padding-bottom: 0em;
    padding-left: 0.8em;
    text-align: center;
    display: block;
}

#header a {
    color: #468CEA;
    text-decoration: none;
    display: compact;
    font-size: 1em;
    margin-top: -2em;
    text-align: center;
} 
```

无论如何希望有人可以帮助我。非常感谢你看这个！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T04:50:19.827

而不是使用`display: compact`（几乎不支持），尝试`display: inline-block`然后使用填充：

```
#header a {
    color: #468CEA;
    text-decoration: none;
    display: inline-block;
    padding: 0 5px; /* Change this to whatever suits your needs */
    font-size: 1em;
    margin-top: -2em;
    text-align: center;
} 
```****

# javascript - 单像素 CSS 错误？

> ID：15674399
> 
> 赞同：0
> 
> 时间：2013-03-28T04:39:50.643
> 
> 标签：javascript, jquery, ios, css

在我之前的问题[CSS Hardware Accelerated Width](https://stackoverflow.com/questions/15670303/css-hardware-accelerated-width)中，我提到我正在创建一个 Phonegap 应用程序，其中包含一项功能，该功能允许您通过移动中间分隔线来更改两列布局的大小。

我正在让它工作，但我遇到了一些 CSS 定位问题。这些问题通常会偏离一个像素，但我确信这只是我的数学结果。基本上，两列布局通常设置为使每一边都是均匀的。然后，如果您移动滑块，它将更改列的`left`和`right`值以增加或减少它们的宽度。调整大小图标位于这两列之间，并随着它们的宽度变化而移动。

然而，问题在于，当您旋转设备时，中间分隔线会改变几个像素的位置。要复制问题，您可以：

1.  打开页面
2.  旋转应用
3.  将应用旋转回原始位置

或者：

1.  打开应用
2.  移动滑块
3.  旋转应用
4.  将应用旋转回原始位置
5.  旋转应用

在每种情况下，中间分隔线都会偏离几个像素，导致它无法与分隔线正确对齐。

运行其中大部分的 JS 如下所示：

```
$(window).on('orientationchange', function (e) {
    var page = $("#columnContainer").width();
    var totalWidth = $("#leftColumn").width() + $("#rightColumn").width() + 2;
    var left = $("#leftColumn").width();
    var test = page - ((parseInt($("#leftColumn").css("right")) * page) / 100);
    $("#columnResizeIcon").css({
        "-webkit-transform": "translate3d(" + (left) + "px, 0, 0)",
        "left": "auto",
    });
    if (totalWidth > page) {
        $("#leftColumn").css("margin-right", "2px");
    } else if (totalWidth < page) {
        $("#leftColumn").css("margin-right", "1px");
    }
    if ($("#leftColumn").width() < 100) {
        $("#leftColumn").css({
            "right": 100 - ((100 / page) * 100) + "%",
            "margin-right": "1px"
        });
        $("#rightColumn").css({
            "left": (100 / page) * 100 + "%",
        });
        $("#columnResizeIcon").css({
            "-webkit-transform": "translate3d(100px, 0, 0)",
        });
    }
    if ($("#rightColumn").width() < 100) {
        $("#leftColumn").css({
            "right": (100 / page) * 100 + "%",
            "margin-right": "1px"
        });
        $("#rightColumn").css({
            "left": 100 - ((100 / page) * 100) + "%",
        });
        $("#columnResizeIcon").css({
            "-webkit-transform": "translate3d(" + (page - 100) + "px, 0, 0)",
        });
    }
});
$("div").on("touchmove", "#columnResizeIcon", function (e) {
    e.preventDefault();
    var page = $("#columnContainer").width();
    var left = e.originalEvent.touches[0].pageX;
    var right = page - left;
    if (left > 100 && left < page - 100) {
        $("#leftColumn").css({
            "right": ((right) / page) * 100 + "%",
            "margin-right": "1px",
        });
        $("#rightColumn").css({
            "left": ((left) / page) * 100 + "%",
            "margin-left": "1px",
        });
        $("#columnResizeIcon").css({
            "-webkit-transform": "translate3d(" + left + "px" + ", 0, 0)",
            "left": "auto",
        });
    } else {}
}); 
```

CSS：

```
body{
    background-color:#000;
}

#columnContainer{
    position: absolute;
    bottom:0;
    top:0;
    right:0;
    left:0;
    background-color:#000;
}

#leftColumn{
    position: absolute;
    top:0;
    left:0;
    right:50%;
    bottom:0;
    -webkit-overflow-scrolling: touch;
    z-index: 1;
    margin-right: 1px;
}

#rightColumn{
    position: absolute;
    top:0;
    left:50%;
    right:0;
    bottom:0;
    -webkit-overflow-scrolling: touch;
    z-index: 1;
    margin-left: 1px;
}

.header{
    position: absolute;
    left:0;
    right:0;
    height:33px;
    z-index: 5;
    background: -webkit-linear-gradient(top, #f4f5f7 0%,#a7abb7 100%);
    box-shadow: inset 0 1px 0 #fff, inset 0 -1px 0 #7A8090, 3px 0 2px rgba(0,0,0,.3);
    border-top-left-radius: 5px;
    border-top-right-radius: 5px;
    font-size: 17px;
    font-family: Helvetica;
    font-weight: bold;
    letter-spacing: .2px;
    text-align: center;
    padding-top:9px;
    color:#71787F;
    text-shadow: 0 1px 0 #E3E5E9;
    word-break: break-all;
}

.content{
    position: absolute;
    left:0;
    right: 0;
    top:42px;
    bottom: 0;
}

#leftColumn .content{
    background-color:#F5F5F5;
}

#rightColumn .content{
    background-color:#fff;
}

#columnResize{
    position: absolute;
    width:2px;
    top:0;
    bottom: 0;
    left:50%;
    margin-left:-1px;
    background-color:#000;
    z-index: 2;
    display: none;
}

#columnResizeIcon{
    position: absolute;
    z-index: 3;
    width:10px;
    height:30px;
    top:50%;
    bottom:50%;
    margin-top:-15px;
    left:50%;
    margin-left:-7px;
    border-left:2px solid #000;
    border-right:2px solid #000;
}

#leftColumn,
#rightColumn {
  -webkit-transform: translate3d(0,0,0);
} 
```

HTML：

```
<div id="columnContainer">

    <div id="columnResizeIcon"></div>

    <div id="leftColumn">
        <div class="header">Left Header</div>
        <div class="content"></div>

    </div>
    <div id="rightColumn">
        <div class="header">Right Header</div>
        <div class="content"></div>
    </div>
</div> 
```

我会发布一个小提琴，但代码需要从 iOS 模拟器或实际的 iOS 设备运行，而 jsFiddle 不能很好地与 Apple 配合使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:10:51.130

我会说问题出在边缘。我会摆脱他们（听我说完！）。

```
#leftColumn, #rightColumn, #columnResize{
    position: absolute;
    top: 0px;
    bottom: 0px;
    etc...
}
#leftColumn{
    left: 0%;
    width: 50%;
}
#rightColumn{
    left: 50%;
    width:50%;
}
#columnResize{
    left: 50%;
    width: 2px;
    z-index:2;
} 
```

这是一个便宜的技巧，但由于您的调整大小栏只有 2px 宽，它可能与右列具有相同的左 pos。用户将无法判断它实际上应该在左侧 1px 处。例如，根据两列的内容，您可能希望在右列内的任何内容的左侧留出一个边距。

# ruby-on-rails - 载波操作，图像上传器中的 model.attribute nil

> ID：15674400
> 
> 赞同：1
> 
> 时间：2013-03-28T04:40:06.650
> 
> 标签：ruby-on-rails, ruby-on-rails-3, image-processing, imagemagick, carrierwave

我正在根据 usage_tag 字段操作图像的调整大小/填充。一个位置可以有许多图像。问题是图像没有调整大小。当我将模型提升到 yaml 时，每个字段都显示为零。

尽快回答:(。

在我的 ImageUploader

```
process :scale

  def scale
    manipulate! do |img|
      raise model.to_yaml
      if model.usage_tag == "logo"
        #raise model.to_yaml
        img.resize_to_fill!(320,320)
      elsif model.usage_tag == "thumbnail"
        img.resize_to_fill!(200,200)
      else
        img.resize_to_fill!(640,720)
      end
      img
    end
  end 
```

以下是表格：

```
 <%= form_for([:admin,@location]) do |f| %>

    <div class="field">
      <%= f.label :state %><br />
      <%= f.text_field :state %>
    </div>
    <div class="field">
      <%= f.label :country %><br />
      <%= f.text_field :country %>
    </div>
    <div class="images">
      <%= f.fields_for :location_images do |f2| %>
          <div class="field">
            <%= f2.file_field :image %>

            <%= f2.object.usage_tag if f2.object.usage_tag %>
            <%= f2.text_field :usage_tag %>
            <%#= deal_image.check_box :_destroy %>
          </div>
      <% end %>
    </div>
  <div class="actions">
    <%= f.submit %>
  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:20:44.300

您可以为每种类型创建版本并使用版本 :if 选项来执行条件，而不是将条件放在流程块中。

[https://github.com/jnicklas/carrierwave/wiki/How-to%3A-Do-conditional-processing](https://github.com/jnicklas/carrierwave/wiki/How-to%3A-Do-conditional-processing)

# scala - 如何更改 Play、SBT 及其插件使用的 Scala 版本？

> ID：15674406
> 
> 赞同：13
> 
> 时间：2013-03-28T04:40:32.670
> 
> 标签：scala, playframework, intellij-idea, sbt

是否有必要更改 SBT 及其插件使用的 Scala 版本？

我正在使用 Play Framework 2.1.1-RC2。我想创建将使用 Scala 2.10.1 的新项目。为了实现这一点，我做了以下

*   `"org.scala-lang" % "scala-compiler" % "2.10.1"`增加了依赖`Build.scala`
*   将变量初始化`scalaVersion`为 2.10.1 in`Build.scala`

然后我运行`play about`命令并得到以下输出

```
[test2] $ about
Getting Scala 2.10.1 ...
downloading http://repo1.maven.org/maven2/org/scala-lang/scala-compiler/2.10.1/scala-compiler-2.10.1.jar ...
        [SUCCESSFUL ] org.scala-lang#scala-compiler;2.10.1!scala-compiler.jar (7401ms)
downloading http://repo1.maven.org/maven2/org/scala-lang/scala-library/2.10.1/scala-library-2.10.1.jar ...
        [SUCCESSFUL ] org.scala-lang#scala-library;2.10.1!scala-library.jar (4309ms)
downloading http://repo1.maven.org/maven2/org/scala-lang/scala-reflect/2.10.1/scala-reflect-2.10.1.jar ...
        [SUCCESSFUL ] org.scala-lang#scala-reflect;2.10.1!scala-reflect.jar (2144ms)
downloading http://repo1.maven.org/maven2/org/scala-lang/jline/2.10.1/jline-2.10.1.jar ...
        [SUCCESSFUL ] org.scala-lang#jline;2.10.1!jline.jar (201ms)
:: retrieving :: org.scala-sbt#boot-scala
        confs: [default]
        5 artifacts copied, 0 already retrieved (24386kB/58ms)
[info] This is sbt 0.12.2
[info] The current project is {file:/C:/work/test_projects/test2/}test2
[info] The current project is built against Scala 2.10.1
[info] Available Plugins: play.Project, sbt.PlayProject, com.typesafe.sbteclipse.plugin.EclipsePlugin, com.typesafe.sbtidea.SbtIdeaPlugin
[info] sbt, sbt plugins, and build definitions are using Scala 2.9.2 
```

最后一行是我所关心的。它说使用了 Scala 2.9.2。我该如何改变呢？它会影响将用于编译**我的**代码的版本吗？

**更新：**看起来这种更改编译器版本的方式无法正常工作。运行我的应用程序后，我在游戏控制台中收到以下警告：

```
[warn] Potentially incompatible versions of dependencies of {file:/C:/work/test_projects/test2/}test2:
[warn]    org.scala-lang: 2.10.1, 2.10.0
[info] Compiling 5 Scala sources and 1 Java source to C:\work\test_projects\test2\target\scala-2.10\classes...
[info] 'compiler-interface' not yet compiled for Scala 2.10.1\. Compiling...
[info]   Compilation completed in 8.608 s
[warn] Potentially incompatible versions of dependencies of {file:/C:/work/test_projects/test2/}test2:
[warn]    org.scala-lang: 2.10.1, 2.10.0
[info] play - Application started (Dev)
[warn] Potentially incompatible versions of dependencies of {file:/C:/work/test_projects/test2/}test2:
[warn]    org.scala-lang: 2.10.1, 2.10.0 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-28T05:18:31.300

SBT 是一个 Scala 应用程序，和所有 Scala 应用程序一样，它需要遵守 Scala 的二进制兼容性规则。具体来说，版本 2.8、2.9 和 2.10 彼此不兼容。

这意味着，因为 Play 使用的 SBT 版本是使用 Scala 2.9.2 编译的，所以所有插件和所有项目*定义*都必须使用另一个 2.9.x 版本编译。这是因为你`Build.scala`不是简单地由 SBT 执行的东西，它*成为*SBT 执行的一部分。

但是，这与您的应用程序应该使用什么版本的 Scala 编译有关。SBT 可以使用任何 Scala 版本，甚至可以同时生成多个 Scala 版本——这就是 Scala 库设法为多个 Scala 版本提供二进制文件的方式。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-28T05:43:13.963

我实验的最终目标是更改用于构建我的项目的 Scala 编译器的版本。

经过多次尝试，我得出结论，实现它是不可能的。我认为这是 Play Framework 的创建者应该解决的问题。

`scalaVersion`在 Build.scala中设置`2.10.1-local`并没有多大帮助。SBT 似乎要去 Maven/Ivy 并下载我不想要的 2.10.0 片段。编译应用程序后，我收到一堆关于不兼容依赖项的警告。

我认为这是因为`{PLAY_HOME}\framework\project\Build.scala`将一堆变量设置为 2.10.0。

“优雅”的解决方案是告诉 SBT 我将通过在 Build.scala 中设置以下变量来使用 Scala 的本地副本

```
scalaVersion := "2.10.1-local",
autoScalaLibrary := false,
scalaHome := Some(file("/Program Files (x86)/scala/")) 
```

但是，如果我使用`play idea`命令创建 IntelliJ IDEA 配置，则结果项目需要一些清理，特别是：

*   Scala 方面引用缺少`Scala 2.10.0`的库。
*   模块 test3-build 依赖于缺少的`Scala 2.9.2`库

我希望我的实验其他也在学习 Play 和 Scala 的人。

详细信息在这里：[http ://www.scala-sbt.org/release/docs/Howto/scala.html](http://www.scala-sbt.org/release/docs/Howto/scala.html)

# android - 我可以像使用动态标签一样使用 NFC 阅读器吗？

> ID：15674409
> 
> 赞同：1
> 
> 时间：2013-03-28T04:40:43.760
> 
> 标签：android, nfc

例如，如果我将阅读器连接到 PC，在 PC 屏幕上选择“打开 url 1”，将我的 NFC 手机轻触阅读器，它将打开 url 1。我在屏幕上选择“打开 url 2”，点击我的手机给读者，它会打开 url 2？

我认为点对点模式可以启用这样的功能，但我找不到太多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:31:58.940

我还没有尝试过，但我认为[这个网站](http://www.grundid.de/nfc/)会帮助你。我唯一知道的是这是可能的，而且并不难。

# python - 无尽的while循环混乱

> ID：15674410
> 
> 赞同：1
> 
> 时间：2013-03-28T04:40:45.673
> 
> 标签：python, while-loop, infinite-loop

所以我试图在 9x9 网格上规划一条路径，所以 boardSize 为 9。while 循环应该停止路径列表的长度为 81 或更多，所以为什么当生物在时它可以达到 3531 的长度7,5，目标是 5,2，海拔是 0？我的 while 循环是错误的还是您认为它可能在其他地方？

```
def planPath(self, creature, goal, board):
        print("in the path")      
        path = [board[creature.x][creature.y]]       
        while goal not in path or len(path) < self.boardSize ** 2:
            print("path length")
            print(len(path))
            nextPossible = {}
            for neighbor in path[-1].neighbors:
                if type(neighbor) is not Land.Water:
                    nextPossible[neighbor] = abs(neighbor.location[0] - goal.location[0]) + abs(neighbor.location[1] - goal.location[1]) + abs(neighbor.elevation - goal.elevation)      
            path.append(min(nextPossible, key=nextPossible.get))
        return path 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:32:55.377

`while`当路径长度达到棋盘上的方块数时，您希望循环结束 - 使用`and`而不是`or`在您的 while 循环中，它将在以下任一表达式结束时结束：

```
goal not in path 
```

或这个表达式：

```
len(path) < self.boardSize ** 2 
```

评估为`False`。使用`or`，只要其中一个表达式为真，循环就会继续运行。所以你的固定代码是：

```
def planPath(self, creature, goal, board):
        print("in the path")      
        path = [board[creature.x][creature.y]]       
        while goal not in path and len(path) < self.boardSize ** 2:
            print("path length")
            print(len(path))
            nextPossible = {}
            for neighbor in path[-1].neighbors:
                if type(neighbor) is not Land.Water:
                    nextPossible[neighbor] = abs(neighbor.location[0] - goal.location[0]) + abs(neighbor.location[1] - goal.location[1]) + abs(neighbor.elevation - goal.elevation)      
            path.append(min(nextPossible, key=nextPossible.get))
        return path 
```

# python - Python 3.3，全局响应一个字符串但不响应另一个

> ID：15674412
> 
> 赞同：-1
> 
> 时间：2013-03-28T04:41:05.923
> 
> 标签：python, string, global

当我运行此代码时，它会响应 UnboundLocalError: local variable 'hhh' referenced before assignment。但是，尽管以类似的方式定义了全局字符串“temp”，但它不会以此类错误响应。任何帮助都会很棒，谢谢。

```
 import random, os
def start():
    global level
    global hhh
    global temp
    level=1
    temp='     +-!'
    hhh='[X'
    os.system('CLS')
    actualcrawl()
def actualcrawl():
    print (temp)
    for a in range(2,128):
        hhh=hhh+temp[random.randrange(1,8)]
    hhh=hhh[:79]+'>'+hhh[80:]
    for i in range(1,3):
        a=random.randrange(3,8)
        b=random.randrange(6,15)
        hhh=hhh[:16*a+b-1]+'='+hhh[16*a+b:]
    for i in range(1,9):
        print (hhh[16*i-16:16*i]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:20:03.013

是的，你应该看看这个问题[Using global variables in a function 而不是创建它们的函数](https://stackoverflow.com/questions/423379/using-global-variables-in-a-function-other-than-the-one-that-created-them)

简而言之，如果它只是从一个名称中读取，并且该名称在本地不存在，它将尝试在任何包含范围内查找该名称。这就是发生的事情`temp`，它将在全局范围内找到。但是`hhh`，你写，这会让 Python 相信它`hhh`是一个局部变量。

还有一件事，但更重要的是，不建议使用它`global`。您可以调用`actualcrawl()`in`start()`并传入`hhh,temp`，这是大多数人的做法。

编辑

很简单：

```
import random,os
def start():
    level=1
    temp='     +-!'
    hhh='[X'
    os.system('CLS')
    actualcrawl(temp,hhh)

def actualcrawl(temp,hhh):
    print (temp)
    for a in range(2,128):
        hhh=hhh+temp[random.randrange(1,8)]
    hhh=hhh[:79]+'>'+hhh[80:]
    for i in range(1,3):
        a=random.randrange(3,8)
        b=random.randrange(6,15)
        hhh=hhh[:16*a+b-1]+'='+hhh[16*a+b:]
    for i in range(1,9):
        print (hhh[16*i-16:16*i]) 
```

我不知道你在 Python 之前使用什么语言，但是你真的不需要像在 C/C++ 中那样声明一个变量。因为当你分配给一个变量时，你只是将名称绑定到一个对象。参见这个[python变量是指针？](https://stackoverflow.com/questions/13530998/python-variables-are-pointers)

# weka - 为什么我的 weka 输出中会出现浮点值？

> ID：15674417
> 
> 赞同：0
> 
> 时间：2013-03-28T04:41:23.603
> 
> 标签：weka

我在数据集上运行 J48 算法，在输出中我得到如下内容：

```
J48 pruned tree
------------------

attribute1 = n: class1 (253.41/3.75)
attribute1 = y
|   attribute2 = n: class2 (145.71/4.0)
|   attribute2 = n: class1 (40.68/3.0) 
```

我想知道括号中的内容是什么意思。我在某处读到，由于该选择，第一个值是正确分类的实例，第二个值是多少错误。但这怎么可能是十进制数呢？你如何正确分类 0.41 的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:19:08.163

我在这里找到了答案： [http ://weka.wikispaces.com/What+do+those+numbers+mean+in+a+J48+tree%3F](http://weka.wikispaces.com/What+do+those+numbers+mean+in+a+J48+tree%3F)

基本上，它将具有缺失值的实例划分为所有树中的小数实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-17T01:57:49.573

对于示例数据集：[https:](https://www.cs.vassar.edu/~cs366/data/weka_files/vote.arff) //www.cs.vassar.edu/~cs366/data/weka_files/vote.arff Vote.arff in Weka

决策树结果：医生费用冻结 = n：民主党 (253.41/3.75)。

第一个数字表示到达该节点的正确事物的数量。（在这个民主党人中），“/”之后的第二个数字显示到达该节点的不正确事物的数量（在这种情况下是共和党人）

实例总数：435 没有的总数（也是正确事物的整数）：253 没有的概率：253/435 = 0.58

缺失数据总数：11 出现“否”的总次数：8 概率：8/11 = 0.72

缺失数据可能为否的总概率：0.58 X 0.72 = 0.42

正确事物总数：253+0.42 = 253.42 ~ 253.41

“/”后面的数字表示到达该节点的不正确事物的数量。现在，如果您看到此数据，它有五个不正确的实例，其中“共和党”是结果，而“医生费用冻结”是“n”（或“？”）

这五个可以拆分如下： 带有“n”的错误实例总数：2 带有“？”的错误实例总数：3

类似的公式：

2+(253/435)*3=3.75

# qt - 无法检测到 QDialog 内存泄漏的原因

> ID：15674422
> 
> 赞同：3
> 
> 时间：2013-03-28T04:41:54.590
> 
> 标签：qt, memory-leaks, qdialog, application-verifier

我正在做一个项目，使用 Qt 和一些定制的 QDialogs 供用户输入。由于我的开发盒的硬件限制，我想监控我的应用程序的内存使用情况。我如何执行对话框。

```
1 void MainWindow::callDialog() {
2     DlgPopConfig dialog(&theApp->cfgPop, m_fnPopCfg, this);
3     dialog.exec();
4     m_fnPopCfg = dialog.fileName();
5     lbl_fnPopCfg->setText(m_fnPopCfg);
6 } 
```

由于对话框是一个局部变量，我希望它在堆栈上创建并在函数结束后立即销毁（在第 5 行之后）。当应用程序反复打开和关闭对话框时，它的内存使用量会上升，并且它永远不会返回初始值 [`'Memory (Working Set)' and 'Memory (Private Working Set)'`任务管理器的列]。我使用了**Application Verifier**，启用了所有基本测试，并且没有显示错误。内存模式如下所示（数值仅由说明组成）：

*   应用程序启动（工作集 = 12000K，私有集 = 6000K）
*   打开 Dialog-1（工作集 = 14000K，私有集 = 7000K）
*   关闭对话框（工作集 = 12010K，私有集 = 6005K）
*   打开 Dialog-2（工作集 = 14020K，私有集 = 7000K）
*   关闭对话框（工作集 = 12010K，私有集 = 6008K）
*   打开 Dialog-3（工作集 = 14080K，私有集 = 7010K）
*   关闭对话框（工作集 = 12040K，私有集 = 6008K）
*   ...

那么，有什么想法可以追踪问题的根本原因吗？（实际上，我在使用 QFileDialog 的静态方法时也遇到了类似的问题`getOpenFileName`，并且在[这里](http://qt-project.org/forums/viewthread/23421)`getSaveFileName`找到了一些讨论，但似乎没有解决）

**编辑**我在我的对话框中使用 QFormLayout，并通过添加小部件`layout->addRow("label text", mywidget);`，我怀疑对象销毁是否无法干净地删除标签。

**编辑**我用 QDialog 创建了一个测试程序，有十个 QLineEdits，使用相同的添加小部件策略。问题依然存在。（如果我经常创建和关闭对话框，这个测试程序会出现问题，每秒说 10 次）

主窗口.h

```
#include <QMainWindow>
#include <QPushButton>
#include <QDialog>
class MainWindow : public QMainWindow
{
    Q_OBJECT
public:
    explicit MainWindow(QWidget *parent = 0);
private:
    QPushButton * button;
private slots:
    void button_click();
};
class Dialog : public QDialog
{
    Q_OBJECT
public:
    explicit Dialog(QWidget *parent = 0);
}; 
```

主窗口.cpp

```
#include "mainwindow.h"
#include <QApplication>
#include <QFormLayout>
#include <QLineEdit>
#include <QLabel>

MainWindow::MainWindow(QWidget *parent):QMainWindow(parent)
{
    button=new QPushButton(this);setCentralWidget(button);
    connect(button,SIGNAL(clicked()),SLOT(button_click()));
}
void MainWindow::button_click()
{
    Dialog d(this);
    d.exec();
}
Dialog::Dialog(QWidget *parent):QDialog(parent)
{
   QFormLayout*layout=new QFormLayout(this);
   setLayout(layout);
   for (int i = 0; i < 10; i++)
   {
       layout->addRow(QString("%1").arg(i+1), new QLineEdit(this));
   }
}
int main(int c,char *argv[])
{
    QApplication a(c,argv);
    MainWindow w;
    w.show();
    return a.exec();
} 
```

**平台**

*   Win 7 x64, MinGW 4.7.2 x64 (rubenvb-build), 4GB 内存
*   Qt 4.8.5（使用上述工具链本地构建）
*   Qt-Creator 2.6.1（使用上述工具链本地构建）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-12T18:25:11.787

晚了几个月，但这可能会帮助下一个遇到这个问题的人。我正在使用 PySide，但有相同的内存泄漏。结果有两个选项，具体取决于您需要从对话框中返回的信息：

1) 完成后安排删除对话框。

在 Python 中，这看起来像：

```
dialog = MyDialog(self)
dialog.exec_()
# Do other things with dialog
dialog.deleteLater() 
```

它在您的 C++ 代码中应该看起来相似：

```
void MainWindow::button_click()
{
    Dialog d(this);
    d.exec();
    // Do other things with d
    d.deleteLater()
} 
```

2) 设置 WA_DeleteOnClose 属性。

我最终将其包含在自定义对话框的构造函数中：

```
 self.setAttribute(PySide.QtCore.Qt.WA_DeleteOnClose) 
```

在您的 C++ 代码中应该如下所示：

```
Dialog::Dialog(QWidget *parent):QDialog(parent)
{
   QFormLayout*layout=new QFormLayout(this);
   setLayout(layout);
   setAttribute(Qt::WA_DeleteOnClose);
   for (int i = 0; i < 10; i++)
   {
       layout->addRow(QString("%1").arg(i+1), new QLineEdit(this));
   }
} 
```

这两个都为我修复了内存泄漏，除了如果我连续多次快速打开/关闭对话框，它偶尔会泄漏 4kb。很抱歉以 Python 为中心的答案——希望这能将人们引向正确的方向。

# google-visualization - 谷歌图表垂直轴上的重复数字

> ID：15674426
> 
> 赞同：3
> 
> 时间：2013-03-28T04:42:12.710
> 
> 标签：google-visualization

当其中一个轴变得奇怪并开始重复数字（即：1、1、2、2 而不是 1、2、3、4）时，我正在使用 Google 可视化的组合（列/折线）图表进行错误修复。请看下面的图片

[![重复轴](../Images/254df0e9de9187d90e555e109b51dedb.png)](https://i.stack.imgur.com/rmfpt.png)
[（来源：[rackcdn.com](http://913a0d0e6c09b4bcc628-22cb2ea15f760b88c7ec5dccd300db1d.r25.cf1.rackcdn.com/duplicate_axes.png)）]

以下是图表选项设置：

```
// Instantiate and draw our chart, passing in some options. 
var frequency_by_day_options = {
    vAxes: [
        {format:'#,###', title:"Call Volume"}, 
        {format: '#%', title:'Missed Call Rate',
          viewWindow:{
            max:1,
          }}
        ],      
    legend: {position: 'none'},
    chartArea: { height:'60%', width:'60%'},
    width: 800,
    height: 350,
    backgroundColor: 'transparent',
    bar: { groupWidth: '90%'},
    isStacked: true,
    seriesType: 'bars',
    series: {0: {type:'bar', targetAxisIndex:0}, 1: {type:'line', targetAxisIndex:1},},
    colors: ['blue', 'green'],
    animation:{
        duration: 1000,
        easing: 'out',},
    }; 
```

我不知道这里发生了什么。即使我注释掉所有的 vAxis 选项，我仍然会观察到这种行为。关于我做错了什么的任何想法？这让我发疯:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-13T00:03:20.560

当我们的盒子数量较少时（比如说 1 个或 2 个），我也面临同样的问题。我用 maxValue 选项解决了它。只需在您的 vaxis 中添加 maxValue = 4 选项。它将始终添加 5 条（0 到 4 条）网格线。如果您的 maxValue 大于 4，它将自动调整。我的选项工作正常（标题：'No of box'，格式：'#'，minValue：0，maxValue：4）。minValue = 0 将不允许负数作为其框数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T04:58:30.697

我猜左边的 vAxis**不是**4，实际上是 2。这 5 个标签分别是 0、0.5、1、1.5、2。

由于您将格式设置为“#,###”，因此它不会显示小数。如果将其更改为“#,###.#”，则它将显示 0、0.5、1、1.5、2。

有十几种方法可以解决这个问题，但最简单的方法可能是确保您的轴值只是整数值，使用这样的 javascript 函数：

```
// Take the Max/Min of all data values in all graphs
var totalMax = 3;
var totalMin = -1;

// Figure out the largest number (positive or negative)
var biggestNumber = Math.max(Math.abs(totalMax),Math.abs(totalMin));

// Round to an exponent of 10 appropriate for the biggest number
var roundingExp = Math.floor(Math.log(biggestNumber) / Math.LN10);
var roundingDec = Math.pow(10,roundingExp);

// Round your max and min to the nearest exponent of 10
var newMax = Math.ceil(totalMax/roundingDec)*roundingDec;
var newMin = Math.floor(totalMin/roundingDec)*roundingDec;

// Determine the range of your values
var range = newMax - newMin;

// Calculate the best factor for number of gridlines (2-5 gridlines)
// If the range of numbers divided by 2 or 5 is a whole number, use it
for (var i = 2; i <= 5; ++i) {
    if ( Math.round(range/i) = range/i) {
        var gridlines = i
    }
} 
```

# java - 从另一个 Maven 模块扩展 junit 测试用例

> ID：15674428
> 
> 赞同：0
> 
> 时间：2013-03-28T04:42:17.700
> 
> 标签：java, maven, junit

在我的 maven 项目中，我有依赖于模块 B 的模块 A。在我的模块 A 测试用例中，我试图扩展模块 B 的测试用例之一，但是我遇到了以下问题`Caused by: java.lang.ClassNotFoundException: module-B.TestCase`。

是因为测试本身没有打包到 jar 中的原因吗？知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T04:52:14.010

正确，默认情况下，maven 不会将 src/test 下的任何内容打包到最终工件中。单元测试的目的是作为编译时检查，确保代码按预期运行。单元测试不是为其他模块导出和使用而设计的。

如果您发现自己想要导入另一个模块的单元测试，也许值得重组您的代码，以便单元测试的可重用部分在他们自己的模块中（例如：在自己的 jar 中创建一个 GenericUnitTest 类，该类由模块 A 和模块 B 单元测试）

# java - 继承，派生自派生类

> ID：15674432
> 
> 赞同：0
> 
> 时间：2013-03-28T04:42:38.827
> 
> 标签：java, inheritance

我正在尝试从已经从另一个类派生的类创建一个类。（有点混乱）它在最新的“PricedApt”类中添加了一个额外的属性，即“price”。所需的构造函数调用如下

```
 PricedApt p = new PricedApt("jill", 900, true, "jack", 1050.00); 
```

该类缺少其构造函数，我试图创建它但不确定出了什么问题。

这是（已经派生的（2nd）类）

```
public class RentalApt extends Apartment{

      private String tenant;
      private boolean rented;

      public RentalApt(String owner, int size, boolean rented, String who){
        super(owner,size);
        tenant = who;
        this.rented = rented;
      } 
```

我尝试的（第三）类代码是

```
public class PricedApt extends RentalApt {

private double price;

public PricedApt(String owner, int size, boolean rented, String who, double priceTag) {
  super(owner,size,who);
  price = priceTag;
}

} 
```

谁能指出我做错了什么的正确方向？我收到的编译错误是找不到符号（第 2 行第 3 列）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T04:44:27.497

一方面，RentalApt 有一个四参数构造函数，但它的子类 PricedApt 调用 super() 时只有三个参数。

尝试改变

```
super(owner,size,who); 
```

到：

```
super(owner,size,rented,who); 
```

# ruby-on-rails-3 - 熊猫错误 - 文件未上传

> ID：15674434
> 
> 赞同：1
> 
> 时间：2013-03-28T04:42:57.510
> 
> 标签：ruby-on-rails-3, pandastream

我正在尝试在我的应用程序中嵌入视频，并为此使用 gem panda '1.6.0'。我遵循 pandastream 与 rails 指南集成并具有以下代码：

```
 controllers:
  -------------

  class BoothVideosController < ApplicationController
     before_filter :init_booth_video

   def show
    @original_video = @video.panda_video
    @h264_encoding = @original_video.encodings["h264"]
    render :template => 'booth_video/booth_video', :layout => 
                        'sponsored_group_manage_sub_menu'
   end

   def new
     @video = BoothVideo.new
     render :layout => 'sponsored_group_manage_sub_menu'
   end

   def create
     @video = BoothVideo.create!(params[:video])
     redirect_to :action => :show, :id => @video.id 
   end

   def init_booth_video
     @group = Group.find(params[:group_id])
     @video=@group.booth_video
   end
 end

   class PandaController < ApplicationController
       def authorize_upload
         payload = JSON.parse(params['payload'])
         upload = Panda.post('/videos/upload.json', {
         file_name: payload['filename'],
         file_size: payload['filesize'],
        profiles: "h264",
       })
        render :json => {:upload_url => upload['location']}
      end
   end

 model:
 ------
 class BoothVideo < ActiveRecord::Base
   belongs_to :group
   validates_presence_of :panda_video_id

   def panda_video
      @panda_video ||= Panda::Video.find(panda_video_id)
   end
  end

 View
 -----

  <% content_for(:page_title, "Create a New Booth Video") -%>
  <% form_for(:booth_video,:url => group_booth_video_path, :html => {:id => 
                                  "new_booth_video", :multipart => true}) do |f| %>
  <h5>New Booth Video</h5>
  <fieldset>
 <input type="hidden" name="panda_video_id"/>
     <label for="title">Title</label><br />
     <%= f.text_field :title, :size => 32, :placeholder => "Title for the new booth 
                           video" %><br /><br />
    <div class='progress'>
            <span id="progress-bar" class='bar'></span>
    </div>
    <div id="browse">Choose file</div>
    <%=f.submit "Upload video" %>
   <% end %> 
```

我还在 application.js 文件中包含了熊猫上传器的 js。我可以看到我的文件上传器，但是当我实际浏览并选择一个文件时，它实际上并没有被加载 - 进度条中也没有显示任何进度。

1.  为什么视频上传不了？
2.  create 操作在教程中提到了 params[:video] 但上传视频的“新”表单中没有参数 - 它如何识别这一点？

请帮忙！提前致谢...

# perl - 在perl中调节函数的执行时间

> ID：15674437
> 
> 赞同：1
> 
> 时间：2013-03-28T04:43:11.597
> 
> 标签：perl

我有一个想在 Perl 中执行的命令行函数。但是，我只希望它最多运行 X 秒。如果在 X 秒内没有返回结果，我想继续。例如，如果我想做类似的事情

```
sub timedFunction {
 my $result = `df -h`;
 return $result;
} 
```

如果 3 秒后没有返回任何值，我怎么能终止等待命令行命令完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:35:16.540

你想使用闹钟。

```
local $SIG{ALRM} = sub { die "Alarm caught. Do stuff\n" };

#set timeout
my $timeout = 5;
alarm($timeout);

# some command that might take time to finish, 
system("sleep", "6");
# You may or may not want to turn the alarm off
# I'm canceling the alarm here
alarm(0);   
print "See ya\n"; 
```

当警报信号被捕获时，您显然不必在这里“死”。说获取您调用的命令的pid并杀死它。

这是上面示例的输出：

```
$ perl test.pl 
Alarm caught. Do stuff
$ 
```

注意 print 语句在系统调用之后没有执行。

值得注意的是，不建议使用 alarm 来使系统调用超时，除非根据[perldoc](http://perldoc.perl.org/functions/alarm.html)它是“eval/die”对。

# reporting-services - ssrs 报告中的 if 语句错误

> ID：15674439
> 
> 赞同：0
> 
> 时间：2013-03-28T04:43:33.390
> 
> 标签：reporting-services, iif

我有一个本地化的 ssrs 报告，我必须检查一些条件并将表达式的结果与一些本地化的字符串连接起来，这是我所做的代码

```
 =IIF(Parameters!PledgeTerm1.Value MOD 30,Parameters!PledgeTerm1.Value & "Days",Parameters!PledgeTerm1.Value/30 & "Month(s)") 
```

在我希望本地化几天和几个月的地方，我编写了下面的代码

```
=IIF(Parameters!PledgeTerm1.Value MOD 30,Parameters!PledgeTerm1.Value &  Code.LocalizedValue("DAYS", Parameters!Culture.Value) ,Parameters!PledgeTerm1.Value/30 & Code.LocalizedValue("MONTHS", Parameters!Culture.Value) ) 
```

这是行不通的.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T00:55:54.337

解决此类问题的一个好方法是设置调试会话。

*   打开引用本地化项目程序集的报表项目。
*   打开本地化项目并选择菜单选项 Debug -> Attach to Process，然后向下滚动 Processes 列表，直到找到报表项目的 devenv.exe 实例（如果从报表服务器运行，则为浏览器进程。）
*   附加到报表项目流程后，在LocalizedValue方法的开头设置一些断点，然后在检查相关值的同时单步执行代码。

这将在开发自定义程序集时为您节省大量时间。我认为在本地化项目的解决方案中添加一个单元测试项目也是一个好主意，它可以运行任何/所有本地化方法的测试。请务必将单元测试项目设置为解决方案的启动项目。然后，您可以随时在 Debug 中运行解决方案。这将帮助您在部署之前发现并解决很多问题。希望有帮助！

# r - 使用 R 3D 图可视化以下内容是否明智

> ID：15674447
> 
> 赞同：1
> 
> 时间：2013-03-28T04:44:04.477
> 
> 标签：r, 3d

在创建 JSON 数据结构并迭代该 JSON 结构后，我想出了以下数据表示。第 1 列和第 2 列是字符串数据类型第 4 列表示第 3 列中解释的类型的总和。示例：

```
A | B | Level1 | 10
A | C | Level2 | 1 
```

为了对此进行口头解释，我会假设 A 国的国家中有可以说 B 国语言的人具有 1 级专业知识，他们的总数等于 10。

我想在 3 Axis 中表示这一点，X = Country1，Y = Country2，Z 表示级别。如果是这样，这是否明智我该如何做到这一点？我之前没有使用 R 3D 图形的经验。

这是我的实际数据的样子：它们在 CSV 文件中。

这是数据框中的数据：

```
 country1 country2 langLevel frequency
1       gv       ca    level1         2
2       gv       bg    level1         1
3      zea       li    level1         1
4      zea       li    level3         1 
```

我希望我用我想要完成的事情清楚地解释了这个问题。我在想，似乎 3D 是代表这一点的最佳方式，但我可能是错的。

CSV 格式的数据：

```
country1,country2,langLevel,frequency
gv,ca,level1,2
gv,bg,level1,1
zea,li,level1,1
zea,li,level3,1
zea,de,level1,26
zea,de,level3,5
zea,el,level1,1
zea,eo,level1,3
zea,en,level1,5
zea,en,level2,34
zea,en,level3,38
zea,en,level4,12
zea,es,level1,7
zea,la,level1,7
zea,zea,level1,5
zea,zea,level3,4
zea,stq,level1,1
zea,sk,level2,1
zea,nl,level4,4
zea,fr,level2,9
zea,fy,level2,1
cdo,cdo,level3,1
cdo,de,level1,23
cdo,de,level2,4
cdo,de,level3,4
cdo,eo,level1,1
cdo,eo,level2,1
cdo,eo,level3,3
cdo,en,level1,6
cdo,en,level2,31
cdo,en,level3,38
cdo,en,level4,17
cdo,es,level1,8
cdo,es,level2,6
cdo,es,level3,3
cdo,fr,level1,14
cdo,fr,level2,11
cdo,fr,level3,6
gd,als,level1,1
gd,af,level1,2
vls,de,level1,32
vls,de,level2,7
vls,de,level3,6
vls,de,level4,3
vls,eo,level1,2
vls,eo,level2,3
vls,eo,level3,3
vls,en,level1,7
vls,en,level2,38
vls,en,level3,53
vls,en,level4,16
vls,es,level1,15
vls,es,level2,4
vls,es,level3,1
vls,es,level4,1
vls,ru,level2,8
vls,ru,level3,1
vls,ja,level1,2 
```

这是我尝试过的，但是，它真的必须在这个情节中看到任何清晰的东西：

```
library("rgl")
plot3d(template_levels$country1, template_levels$country2, template_levels$frequency, col=template_levels$langLevel) 
```

这是情节： ![在此处输入图像描述](../Images/fd31a801a0a5bc80626bc0eee2e7849b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T07:15:46.747

一种可能性是使用不同颜色的条形图。这是一个使用包的解决方案`ggplot2`，并假设您的数据框名为`df`.

在 x 轴上，我们看到`country2`值，然后对于每个`country1`我们都有单独的方面。每个条都根据 着色`langLevel`。`scales="free_y"`in`facet_grid()`确保我们在每个方面都有不同的 y 比例（因为值完全不同）。

```
library(ggplot2)
ggplot(df,aes(country2,frequency,fill=langLevel))+geom_bar(stat="identity")+
  facet_grid(country1~.,scales="free_y") 
```

![在此处输入图像描述](../Images/75e44bfa968bfbb049bcdc30a902a661.png)

# ios - 如何在电子邮件正文上显示图像 - 使用 sksmtplibrary

> ID：15674454
> 
> 赞同：1
> 
> 时间：2013-03-28T04:44:49.980
> 
> 标签：ios, email, smtp

我有一个 html 内容作为我的电子邮件正文。我需要在我的 html 正文上显示图像。我尝试将图像附加到电子邮件并在 html 图像标记中使用文件名。但是图像没有显示。我也尝试过使用 dataUri，它在某些电子邮件客户端中不起作用。

这是我的代码。

```
NSData * imageData = [[NSDataalloc] initWithContentsOfURL: [NSURLURLWithString: @"http://wf.vanillicon.com/f6f63a5a0d149275772ff1cf22595988_100.png"]];
NSString *strFileName = [NSStringWithFormat:@"MyPicture.png"];

NSString *strFormat = [NSStringWithFormat:@"image/png;\r\n\tx-unix-mode=0644;\r\n\tname=\"%@\"",strFileName];
NSString *strFormat2 = [NSStringWithFormat:@"attachment;\r\n\tfilename=\"%@\"",strFileName];
NSDictionary *vcfPart = [NSDictionarydictionaryWithObjectsAndKeys:strFormat,kSKPSMTPPartContentTypeKey,
                         strFormat2,kSKPSMTPPartContentDispositionKey,[imageData encodeBase64ForData],kSKPSMTPPartMessageKey,@"base64",kSKPSMTPPartContentTransferEncodingKey,nil];
testMsg.parts = [NSArrayarrayWithObject:vcfPart];

NSDictionary *plainPart = [NSDictionarydictionaryWithObjectsAndKeys:@"text/html",kSKPSMTPPartContentTypeKey,
                           @"<img src=\"MyPicture.png\" width=\"100px\" height=\"100px\" /><h1>Tui</h1>",kSKPSMTPPartMessageKey,
                          @"8bit",kSKPSMTPPartContentTransferEncodingKey,nil];
testMsg.parts = [NSArrayarrayWithObjects:plainPart,vcfPart,nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T19:38:26.757

有时，当您发送 HTML 电子邮件，并且该 HTML 的标签中有图像时，接收方的电子邮件客户端不会自动显示图像。您可能需要单击电子邮件上的“显示图像”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:01:05.237

从下面的链接中找出通过 SMPT 发送电子邮件的演示代码

[https://code.google.com/p/skpsmtpmessage/source/browse/trunk/SMTPSender/Classes/SMTPSenderAppDelegate.m](https://code.google.com/p/skpsmtpmessage/source/browse/trunk/SMTPSender/Classes/SMTPSenderAppDelegate.m)

或者

[https://github.com/kailoa/iphone-smtp](https://github.com/kailoa/iphone-smtp)

或者

[http://iphonesdksnippets.com/post/2009/04/15/Send-email-with-attachments-on-iPhone.aspx](http://iphonesdksnippets.com/post/2009/04/15/Send-email-with-attachments-on-iPhone.aspx)

你可能会成功

# php - 会话在php中的ajax请求期间过期

> ID：15674455
> 
> 赞同：1
> 
> 时间：2013-03-28T04:45:03.703
> 
> 标签：php, ajax

我有一个问题，即会话已过期，然后我单击了一个发出 ajax 请求的按钮，然后在它持有 & 什么也不做，在控制台中它显示为错误，如果它是任何其他操作，那么它重定向到登录页面，但对于 ajax 它什么也不做。现在我需要的是，即使在 ajax 请求中，如果会话过期，它也应该重定向到登录页面。主要的是我的应用程序中有很多 ajax 调用，我需要为所有 ajax 请求创建一个通用脚本以重定向到登录页面。请帮我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T04:53:51.593

1.  通过ajax调用服务器端文件
2.  检查服务器端的会话。
3.  如果会话过期发送响应为会话过期。
4.  在 ajax 成功回调中始终检查会话过期数据。
5.  如果您发现会话过期值重定向到使用 location.href 登录。下面只是一个骨架代码。

    ```
    $.post('URL',{},
    function (data) {
      if (data.sessionexpired) {
       location.href = 'login.php';
      } else {
      //Normal process
    } 
    ```

    });

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T04:52:08.397

让 ajax 请求返回错误代码或字符串`error_go_home`或其他内容。

如果接收该消息的 javascript 获得该字符串，则让 javascript 将它们重定向回家。

# mysql - mySQL 在构建具有多个限制的查询时遇到问题

> ID：15674459
> 
> 赞同：0
> 
> 时间：2013-03-28T04:45:33.727
> 
> 标签：mysql, sql

我有这个查询，它适用于最后施加的单一限制。

```
select distinct
    loc.mID,
    loc.city,
    loc.state,
    loc.zip,
    loc.country,
    loc.latitude,
    loc.longitude,
    baseInfo.firstname,
    baseInfo.lastname,
    baseInfo.profileimg,
    baseInfo.facebookID,
    (((acos(sin(('37.816876'*pi()/180)) * sin((`latitude`*pi()/180))+cos(('37.816876'*pi()/180)) * cos((`latitude`*pi()/180)) * cos((('-121.285410' - `longitude`)*pi()/180))))*180/pi())*60*1.1515) AS `distance`,
    teams.teamName,
    teams.leagueType,
    teams.teamType,
    teams.subcat
FROM memb_geo_locations loc
left join memb_friends friends on (friends.mID = loc.mID or friends.friendID = loc.mID) and (friends.mID = '100018' or friends.friendID = '100018')
join memb_baseInfo baseInfo on baseInfo.mID = loc.mID 
join memb_teams teams on teams.mID = loc.mID 
where 
    loc.primaryAddress = '1'
    and ((friends.mID is null or friends.friendID is null)
    or (friends.isactive = 2))
    and (
        teams.teamName like '%Anaheim Ducks%' 
        or teams.teamName like '%San Jose Sharks%' 
        or teams.teamName like '%New England Patriots%' 
        or teams.teamName like '%New York Yankees%' 
        or teams.teamName like '%Orlando Magic%'
        )
    and loc.mID != 100018 
    having `distance` < 50 
    order by baseInfo.firstname 
    asc limit 30 
```

但是，我希望我的结果被 teamName 限制为最多 3 个结果，而且我已经尝试了一些东西

```
select distinct
    loc.mID,
    loc.city,
    loc.state,
    loc.zip,
    loc.country,
    loc.latitude,
    loc.longitude,
    baseInfo.firstname,
    baseInfo.lastname,
    baseInfo.profileimg,
    baseInfo.facebookID,
    (((acos(sin(('37.816876'*pi()/180)) * sin((`latitude`*pi()/180))+cos(('37.816876'*pi()/180)) * cos((`latitude`*pi()/180)) * cos((('-121.285410' - `longitude`)*pi()/180))))*180/pi())*60*1.1515) AS `distance`,
    teams.teamName,
    teams.leagueType,
    teams.teamType,
    teams.subcat
FROM memb_geo_locations loc
left join memb_friends friends on (friends.mID = loc.mID or friends.friendID = loc.mID) and (friends.mID = '100018' or friends.friendID = '100018')
join memb_baseInfo baseInfo on baseInfo.mID = loc.mID 
join memb_teams teams on teams.mID = loc.mID 
where 

    loc.primaryAddress = '1'
    and ((friends.mID is null or friends.friendID is null)
    or (friends.isactive = 2))

    and (
        (select * from memb_teams where teamName like '%Buffalo Bills%' limit 2),
        (select * from memb_teams where teamName like '%San Jose Sharks%' limit 2),
        (select * from memb_teams where teamName like '%New England Patriots%' limit 2)
        )

    and loc.mID != 100018 

having `distance` < 150 
order by baseInfo.firstname 
asc limit 30 
```

没有成功，通常只是语法错误.. 或者`Operand Should 1 Column(s)`我在这里联系，希望有人能给我一些想法如何改进我的查询，这样我就可以将结果限制为每个 teamName 3.. 而不是在我交错的结果可以有 20 个一个和 4 个另一个 2 个另一个和 1 个和 1 个（这是不希望的）。每个团队需要3个或更少，只是不知道如何。不涉及从查询中处理大量数据集并通过服务器端代码循环以输出我想要的结果的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:59:32.500

在 MSSQL 中，我使用 ROW_NUMBER 函数，它会是这样的：

SELECT * FROM dbo.MyTable WHERE recno IN (SELECT recno FROM (SELECT Teamname, ROW_NUMBER() OVER (PARTITION BY Teamname ORDER BY recno DESC) AS intRow FROM dbo.MyTable) AS T WHERE intRow IN (1,2,3))

recno=您的唯一记录号

基本上，您的子查询选择前 3 条记录，添加一个新的“ROW NUMBER”列。Top Query 选择行号在 1 到 3 之间的所有记录。

我知道 MYSQL 中没有 ROW_NUMBER() 本机函数，因此您可以改用它：

[MySQL - 在选择时获取行号](https://stackoverflow.com/questions/2520357/mysql-get-row-number-on-select)

# iphone - 如何做双圆形滑块（类似时钟的功能）

> ID：15674462
> 
> 赞同：3
> 
> 时间：2013-03-28T04:45:59.880
> 
> 标签：iphone, ios, xcode, uislider

我想知道如何在附图中做一个双滑块。

我正在查看此代码以对其进行修改。我想知道如何让 2 个滑块让用户选择所需的时间。

我遇到的问题是我如何有 2 个滑块来显示类似图像的内容？

[http://www.cocoacontrols.com/controls/tb_circularslider](http://www.cocoacontrols.com/controls/tb_circularslider)

任何评论都非常感谢这里。

![在此处输入图像描述](../Images/6354d5da590114662490bc46d83e5810.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T10:14:30.313

对于双滑块位置，您在代码中有此摘录

```
CGContextAddArc(imageCtx, self.frame.size.width/2  , self.frame.size.height/2, radius, 0, ToRad(self.angle), 0); 
```

第一个零 ( `0`) 是起点，因此您想在此处使用不同的角度

```
CGContextAddArc(imageCtx, self.frame.size.width/2  , self.frame.size.height/2, radius, ToRad(self.startAngle), ToRad(self.endAngle), 0); 
```

（当然，您的标题中需要这两个 ivar）

编辑：这是找到最近的旋钮并将其锁定以进行修改的编辑代码。旧代码没有锁定它，所以它会在从一个旋钮悬停到另一个旋钮时改变。
首先添加`enum`上面你的实现：

```
enum SliderLockType {
    SliderLockedNone = 0,
    SliderLockedStart,
    SliderLockedEnd
};

#pragma mark - Implementation -

@implementation TBCircularSlider
enum SliderLockType sliderLock;

// … some code here …
   //Initialize the Angle at 0
   //self.startAngle = 0;
   //self.endAngle = 270;

/** Tracking is started **/
-(BOOL)beginTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event{
    [super beginTrackingWithTouch:touch withEvent:event];

    // find nearest knob …
    CGPoint lastPoint = [touch locationInView:self];
    CGPoint pStart = [self centerPointFromAngel:self.startAngle];
    CGPoint pEnd   = [self centerPointFromAngel:self.endAngle];
    float diffA = [self distanceBetween:lastPoint and:pStart];
    float diffB = [self distanceBetween:lastPoint and:pEnd];

    // … and lock it
    if (diffA <= TB_LINE_WIDTH) { // the tolerance is the width of the circle
        sliderLock = SliderLockedStart;
    } else if (diffB <= TB_LINE_WIDTH) {
        sliderLock = SliderLockedEnd;
    }

    //We need to track continuously
    return YES;
}

// continueTrackingWithTouch:withEvent: stays unchanged

/** Track is finished **/
-(void)endTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event{
    [super endTrackingWithTouch:touch withEvent:event];

    // reset the lock before starting a new touch event
    sliderLock = SliderLockedNone;
}

- (CGPoint)centerPointFromAngel:(int)angleInt {
    CGPoint point = [self pointFromAngle:angleInt];
    point.x += TB_LINE_WIDTH/2;
    point.y += TB_LINE_WIDTH/2;
    return point;
}

- (CGFloat)distanceBetween:(CGPoint)p1 and:(CGPoint)p2 {
    CGFloat xDist = (p2.x - p1.x);
    CGFloat yDist = (p2.y - p1.y);
    return sqrt((xDist * xDist) + (yDist * yDist));
}

// … some more code …

- (void)drawTheHandle:(CGContextRef)ctx {

    CGContextSaveGState(ctx);

    //I Love shadows
    CGContextSetShadowWithColor(ctx, CGSizeMake(0, 0), 3, [UIColor blackColor].CGColor);

    //Get the handle position!
    CGPoint handleCenterA =  [self pointFromAngle: self.startAngle];
    CGPoint handleCenterB =  [self pointFromAngle: self.endAngle];

    //Draw It!
    [[UIColor colorWithWhite:1.0 alpha:0.7]set];
    CGContextFillEllipseInRect(ctx, CGRectMake(handleCenterA.x, handleCenterA.y, TB_LINE_WIDTH, TB_LINE_WIDTH));
    CGContextFillEllipseInRect(ctx, CGRectMake(handleCenterB.x, handleCenterB.y, TB_LINE_WIDTH, TB_LINE_WIDTH));

    CGContextRestoreGState(ctx);
}

- (void)movehandle:(CGPoint)lastPoint {

    //Get the center
    CGPoint centerPoint = CGPointMake(self.frame.size.width/2, self.frame.size.height/2);

    //Calculate the direction from the center point to an arbitrary position.
    float currentAngle = AngleFromNorth(centerPoint, lastPoint, NO);
    int angleInt = 360 - floor(currentAngle);

    if (sliderLock == SliderLockedStart) {
        self.startAngle = angleInt;
    } else if (sliderLock == SliderLockedEnd) {
        self.endAngle = angleInt;
    }

    //Redraw
    [self setNeedsDisplay];
} 
```

结果：
![修改后的 TBCircularSlider Lib](../Images/3f32e24f1b74b0e5607c4b58ee9715dd.png)

EDIT2：如果您想让滑块从一个小时切换到另一个小时，您可以修改`movehandle:`方法如下：

```
int angleInt = (int)(360 - floor(currentAngle)) / 30 * 30; // 360/30 = 12 -> hours

if (sliderLock == SliderLockedStart && angleInt%360 != self.endAngle%360) {
    self.startAngle = angleInt;
} else if (sliderLock == SliderLockedEnd && angleInt%360 != self.startAngle%360) {
    self.endAngle = angleInt;
} 
```

# android - Android：Twitpic 上传错误

> ID：15674464
> 
> 赞同：1
> 
> 时间：2013-03-28T04:46:25.430
> 
> 标签：android, twitpic

在我的 Android 应用程序中，我需要将图像上传到 twitpic。但是我的代码中出现了运行时异常。这是我的代码：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    uploadImage = (Button) findViewById(R.id.uploadImage);
    uploadImage.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) 
        {
            new ImageSender().execute();
        }
    });
}

private class ImageSender extends AsyncTask<URL, Integer, Long> {
    private String url;

    protected void onPreExecute() {
        mProgressDialog = ProgressDialog.show(MainActivity.this, "", "Sending image...", true);

        mProgressDialog.setCancelable(false);
        mProgressDialog.show();
    }

    protected Long doInBackground(URL... urls) {
        long result = 0;

        TwitterSession twitterSession = new TwitterSession(MainActivity.this);
        AccessToken accessToken = twitterSession.getAccessToken();

        Configuration conf = new ConfigurationBuilder()
                .setOAuthConsumerKey(twitter_consumer_key)
                .setOAuthConsumerSecret(twitter_secret_key)
                .setOAuthAccessToken(accessToken.getToken())
                .setOAuthAccessTokenSecret(accessToken.getTokenSecret())
                .build();

        OAuthAuthorization auth = new OAuthAuthorization (conf, conf.getOAuthConsumerKey(), conf.getOAuthConsumerSecret(), new AccessToken (conf.getOAuthAccessToken(), conf.getOAuthAccessTokenSecret()));

        ImageUpload upload = ImageUpload.getTwitpicUploader (twitpic_api_key, auth);

        Log.d(TAG, "Start sending image...");

        try {
            String ExternalStorageDirectoryPath = Environment
                    .getExternalStorageDirectory()
                    .getAbsolutePath();

            String targetPath = ExternalStorageDirectoryPath + "/Friends/"+"/image2.jpg";     

            File targetDirector = new File(targetPath);
            url = upload.upload(new File(targetDirector.getAbsolutePath()));
            result = 1;

            Log.d(TAG, "Image uploaded, Twitpic url is " + url);    
        } catch (Exception e) { 
            Log.e(TAG, "Failed to send image");

            e.printStackTrace();
        }

        return result;
    }

    protected void onProgressUpdate(Integer... progress) {
    }

    protected void onPostExecute(Long result) {
        mProgressDialog.cancel();

        String text = (result == 1) ? "Image sent successfully.\n Twitpic url is: " + url : "Failed to send image";

        Toast.makeText(getApplicationContext(), text, Toast.LENGTH_LONG).show();
    }
} 
```

在我的代码中有一个空指针在行

```
.setOAuthAccessToken(accessToken.getToken()) 
```

这是我的 TwitterSession 类：

```
public class TwitterSession {
    private SharedPreferences sharedPref;
    private Editor editor;

    private static final String TWEET_AUTH_KEY = "auth_key";
    private static final String TWEET_AUTH_SECRET_KEY = "auth_secret_key";
    private static final String TWEET_USER_NAME = "user_name";
    private static final String SHARED = "Twitter_Preferences";

    public TwitterSession(Context context) {
        sharedPref = context.getSharedPreferences(SHARED, Context.MODE_PRIVATE);

        editor = sharedPref.edit();
    }

    public void storeAccessToken(AccessToken accessToken, String username) {
        editor.putString(TWEET_AUTH_KEY, accessToken.getToken());
        editor.putString(TWEET_AUTH_SECRET_KEY, accessToken.getTokenSecret());
        editor.putString(TWEET_USER_NAME, username);

        editor.commit();
    }

    public void resetAccessToken() {
        editor.putString(TWEET_AUTH_KEY, null);
        editor.putString(TWEET_AUTH_SECRET_KEY, null);
        editor.putString(TWEET_USER_NAME, null);

        editor.commit();
    }

    public String getUsername() {
        return sharedPref.getString(TWEET_USER_NAME, "");
    }

    public AccessToken getAccessToken() {
        String token = sharedPref.getString(TWEET_AUTH_KEY, null);
        String tokenSecret = sharedPref.getString(TWEET_AUTH_SECRET_KEY, null);

        if (token != null && tokenSecret != null) 
            return new AccessToken(token, tokenSecret);
        else
            return null;
    }
} 
```

我的日志是

> 03-27 11:47:34.427：E/AndroidRuntime(2676)：致命异常：AsyncTask #1 03-27 11:47:34.427：E/AndroidRuntime(2676)：java.lang.RuntimeException：执行 doInBackground 时发生错误() 03-27 11:47:34.427: E/AndroidRuntime(2676): 在 android.os.AsyncTask$3.done(AsyncTask.java:299) 03-27 11:47:34.427: E/AndroidRuntime(2676):在 java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352) 03-27 11:47:34.427: E/AndroidRuntime(2676): 在 java.util.concurrent.FutureTask.setException(FutureTask.java:219) 03-27 11:47:34.427: E/AndroidRuntime(2676): 在 java.util.concurrent.FutureTask.run(FutureTask.java:239) 03-27 11:47:34.427: E/AndroidRuntime(2676): 在android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230) 03-27 11:47:34.427: E/AndroidRuntime(2676): at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080) 03-27 11:47:34.427: E/AndroidRuntime(2676): 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573) 03-27 11:47:34.427: E/AndroidRuntime( 2676): 在 java.lang.Thread.run(Thread.java:856) 03-27 11:47:34.427: E/AndroidRuntime(2676): 引起：java.lang.NullPointerException 03-27 11:47:34.427 : E/AndroidRuntime(2676): at com.my.androidtwitpicapplication.MainActivity$ImageSender.doInBackground(MainActivity.java:78) 03-27 11:47:34.427: E/AndroidRuntime(2676): at com.my.androidtwitpicapplication。 MainActivity$ImageSender.doInBackground(MainActivity.java:1) 03-27 11:47:34.427: E/AndroidRuntime(2676): 在 android.os.AsyncTask$2.call(AsyncTask.java:287) 03-27 11:47 :34.427: E/AndroidRuntime(2676): at java.util.concurrent.FutureTask.run(FutureTask.java:234) 03-27 11:47:34.427: E/AndroidRuntime(2676): ... 4 更多E/AndroidRuntime(2676): 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573) 03-27 11:47:34.427: E/AndroidRuntime(2676): 在 java.lang.Thread.run (Thread.java:856) 03-27 11:47:34.427: E/AndroidRuntime(2676): 由: java.lang.NullPointerException 03-27 11:47:34.427: E/AndroidRuntime(2676): at com. my.androidtwitpicapplication.MainActivity$ImageSender.doInBackground(MainActivity.java:78) 03-27 11:47:34.427: E/AndroidRuntime(2676): at com.my.androidtwitpicapplication.MainActivity$ImageSender.doInBackground(MainActivity.java:1 ) 03-27 11:47:34.427: E/AndroidRuntime(2676): 在 android.os.AsyncTask$2.call(AsyncTask.java:287) 03-27 11:47:34.427: E/AndroidRuntime(2676): 在java.util.concurrent.FutureTask.run(FutureTask.java:234) 03-27 11:47:34.427: E/AndroidRuntime(2676): ... 4 更多E/AndroidRuntime(2676): 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573) 03-27 11:47:34.427: E/AndroidRuntime(2676): 在 java.lang.Thread.run (Thread.java:856) 03-27 11:47:34.427: E/AndroidRuntime(2676): 由: java.lang.NullPointerException 03-27 11:47:34.427: E/AndroidRuntime(2676): at com. my.androidtwitpicapplication.MainActivity$ImageSender.doInBackground(MainActivity.java:78) 03-27 11:47:34.427: E/AndroidRuntime(2676): at com.my.androidtwitpicapplication.MainActivity$ImageSender.doInBackground(MainActivity.java:1 ) 03-27 11:47:34.427: E/AndroidRuntime(2676): 在 android.os.AsyncTask$2.call(AsyncTask.java:287) 03-27 11:47:34.427: E/AndroidRuntime(2676): 在java.util.concurrent.FutureTask.run(FutureTask.java:234) 03-27 11:47:34.427: E/AndroidRuntime(2676): ... 4 更多concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573) 03-27 11:47:34.427: E/AndroidRuntime(2676): 在 java.lang.Thread.run(Thread.java:856) 03-27 11: 47:34.427: E/AndroidRuntime(2676): 引起: java.lang.NullPointerException 03-27 11:47:34.427: E/AndroidRuntime(2676): at com.my.androidtwitpicapplication.MainActivity$ImageSender.doInBackground(MainActivity. java:78) 03-27 11:47:34.427: E/AndroidRuntime(2676): at com.my.androidtwitpicapplication.MainActivity$ImageSender.doInBackground(MainActivity.java:1) 03-27 11:47:34.427: E/ AndroidRuntime(2676): 在 android.os.AsyncTask$2.call(AsyncTask.java:287) 03-27 11:47:34.427: E/AndroidRuntime(2676): 在 java.util.concurrent.FutureTask.run(FutureTask. java:234) 03-27 11:47:34.427: E/AndroidRuntime(2676): ... 4 更多concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573) 03-27 11:47:34.427: E/AndroidRuntime(2676): 在 java.lang.Thread.run(Thread.java:856) 03-27 11: 47:34.427: E/AndroidRuntime(2676): 引起: java.lang.NullPointerException 03-27 11:47:34.427: E/AndroidRuntime(2676): at com.my.androidtwitpicapplication.MainActivity$ImageSender.doInBackground(MainActivity. java:78) 03-27 11:47:34.427: E/AndroidRuntime(2676): at com.my.androidtwitpicapplication.MainActivity$ImageSender.doInBackground(MainActivity.java:1) 03-27 11:47:34.427: E/ AndroidRuntime(2676): 在 android.os.AsyncTask$2.call(AsyncTask.java:287) 03-27 11:47:34.427: E/AndroidRuntime(2676): 在 java.util.concurrent.FutureTask.run(FutureTask. java:234) 03-27 11:47:34.427: E/AndroidRuntime(2676): ... 4 更多E/AndroidRuntime(2676): at java.lang.Thread.run(Thread.java:856) 03-27 11:47:34.427: E/AndroidRuntime(2676): 引起：java.lang.NullPointerException 03-27 11 :47:34.427: E/AndroidRuntime(2676): at com.my.androidtwitpicapplication.MainActivity$ImageSender.doInBackground(MainActivity.java:78) 03-27 11:47:34.427: E/AndroidRuntime(2676): at com. my.androidtwitpicapplication.MainActivity$ImageSender.doInBackground(MainActivity.java:1) 03-27 11:47:34.427: E/AndroidRuntime(2676): at android.os.AsyncTask$2.call(AsyncTask.java:287) 03- 27 11:47:34.427: E/AndroidRuntime(2676): 在 java.util.concurrent.FutureTask.run(FutureTask.java:234) 03-27 11:47:34.427: E/AndroidRuntime(2676): ...还有 4 个E/AndroidRuntime(2676): at java.lang.Thread.run(Thread.java:856) 03-27 11:47:34.427: E/AndroidRuntime(2676): 引起：java.lang.NullPointerException 03-27 11 :47:34.427: E/AndroidRuntime(2676): at com.my.androidtwitpicapplication.MainActivity$ImageSender.doInBackground(MainActivity.java:78) 03-27 11:47:34.427: E/AndroidRuntime(2676): at com. my.androidtwitpicapplication.MainActivity$ImageSender.doInBackground(MainActivity.java:1) 03-27 11:47:34.427: E/AndroidRuntime(2676): at android.os.AsyncTask$2.call(AsyncTask.java:287) 03- 27 11:47:34.427: E/AndroidRuntime(2676): 在 java.util.concurrent.FutureTask.run(FutureTask.java:234) 03-27 11:47:34.427: E/AndroidRuntime(2676): ...还有 4 个E/AndroidRuntime(2676): 在 com.my.androidtwitpicapplication.MainActivity$ImageSender.doInBackground(MainActivity.java:78) 03-27 11:47:34.427: E/AndroidRuntime(2676): 在 com.my.androidtwitpicapplication.MainActivity $ImageSender.doInBackground(MainActivity.java:1) 03-27 11:47:34.427: E/AndroidRuntime(2676): 在 android.os.AsyncTask$2.call(AsyncTask.java:287) 03-27 11:47: 34.427: E/AndroidRuntime(2676): at java.util.concurrent.FutureTask.run(FutureTask.java:234) 03-27 11:47:34.427: E/AndroidRuntime(2676): ... 4 更多E/AndroidRuntime(2676): 在 com.my.androidtwitpicapplication.MainActivity$ImageSender.doInBackground(MainActivity.java:78) 03-27 11:47:34.427: E/AndroidRuntime(2676): 在 com.my.androidtwitpicapplication.MainActivity $ImageSender.doInBackground(MainActivity.java:1) 03-27 11:47:34.427: E/AndroidRuntime(2676): 在 android.os.AsyncTask$2.call(AsyncTask.java:287) 03-27 11:47: 34.427: E/AndroidRuntime(2676): at java.util.concurrent.FutureTask.run(FutureTask.java:234) 03-27 11:47:34.427: E/AndroidRuntime(2676): ... 4 更多调用（AsyncTask.java:287）03-27 11:47:34.427：E/AndroidRuntime（2676）：在 java.util.concurrent.FutureTask.run（FutureTask.java:234）03-27 11:47:34.427： E/AndroidRuntime(2676): ... 4 更多调用（AsyncTask.java:287）03-27 11:47:34.427：E/AndroidRuntime（2676）：在 java.util.concurrent.FutureTask.run（FutureTask.java:234）03-27 11:47:34.427： E/AndroidRuntime(2676): ... 4 更多

我该如何解决这个问题？谢谢。

# jquery - 如何用 html 标签替换字符串的一部分？

> ID：15674472
> 
> 赞同：4
> 
> 时间：2013-03-28T04:47:15.777
> 
> 标签：jquery

如何在jQuery中用html标签替换字符串的一部分？
说例如`<div>Who am i</div>`应该是`<div><b>Who</b> am i</div>`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T04:51:26.123

您可以使用`html`方法的回调函数和`replace`方法。

```
$('div').html(function(_, oldHTML){
   return oldHTML.replace(/(\w+)/, '<b>$1</b>');
   // return oldHTML.replace('Who', '<b>Who</b>');
}) 
```

[http://jsfiddle.net/3rAMP/](http://jsfiddle.net/3rAMp/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T04:48:56.340

`.html()`jquery的使用

```
$("div").html("<b>Who</b> am i") 
```

# database - 有没有办法查询特定表或列在 sqlite 中存储了多少数据？

> ID：15674480
> 
> 赞同：1
> 
> 时间：2013-03-28T04:48:31.323
> 
> 标签：database, sqlite, database-performance

我有一个 50mb 的 sqlite 数据库。我想运行查询或报告以指示哪些表/列/行存储了多少数据。

我的目的是优化我存储数据的方式以减少数据库占用。

我熟悉清理数据库的真空命令。但我有兴趣改进我存储的图像和其他数据的压缩，并希望能够在前后测量结果，并将我的工作目标放在最有成效的地方。

可以完成此操作的任何查询或工具（免费或其他）都可以满足该问题。

我正在使用 sqlite3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T08:18:09.593

[`sqlite3_analyzer`](http://www.sqlite.org/download.html)显示表和索引占用了多少空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T04:57:58.647

这应该有效。

```
SELECT SUM(len) FROM (
    SELECT length(column_name) AS len FROM table_name); 
```

# kendo-ui - 我的剑道图表没有更新

> ID：15674481
> 
> 赞同：2
> 
> 时间：2013-03-28T04:48:32.577
> 
> 标签：kendo-ui, kendo-treeview

我的应用程序中有剑道图表和树视图。我想在复选框选中事件上动态更改值轴，例如当我们检查树视图中的“KM”复选框时，Km 和数据的值轴将是显示在图表中。

所以我尝试了一些代码然后我的图表没有显示。我检查的事件代码是

```
$("#treeview").on("change", function (e) {
    var chart = $("#chart").data("kendoChart");

    var checkedSeries = [];

    $("#treeview").find(":checked").each(function() {
        var nodeText = $(this).parent().parent().text();

        $.each(valueAxes, function(index, valueAxes) {
            if (valueAxes.field == nodeText) {
                checkedSeries.push(valueAxes);
            }
        });
    });

    chart.options.valueAxes = checkedSeries;
    chart.refresh();
}); 
```

我的代码有什么问题请帮助我。这是我的 jsbin [http://jsbin.com/eyibar/11/edit](http://jsbin.com/eyibar/11/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:33:33.003

首先，您需要将图表分配给树视图的 on-change 事件事件中的变量，否则树视图无法识别图表及其值轴，并且在您的 valueAxes 代码中没有字段属性，因此通过您需要检查树视图节点然后推送 valueAxes 的 valueAxes 的名称。

```
$("#treview").on("change", function (e) {
                var chart = $("#chart").data("kendoChart");
                var checkedSeries = [];
                if ($("#treeview").find(":checked").length !== 0) {
                    $("#treeview").find(":checked").each(function () {
                        var nodeText = $(this).parent().parent().text();
                        $.each(valueAxes, function (index, valueAxes) {
                            if (valueAxes.name == nodeText) {
                                checkedSeries.push(valueAxes);
                                checkedSeries.visible = true;
                            }
                        });
                    });
                    createChart(checkedSeries);
                }
                else {
                    createChart(checkedSeries);
                }
            }); 
```

# android - 签名的 apk 在我的设备上不起作用

> ID：15674485
> 
> 赞同：5
> 
> 时间：2013-03-28T04:49:05.347
> 
> 标签：android, apk, signed, xamarin

我已经使用 Xamarin 开发了一个 android 应用程序。它在模拟器上运行良好，但在真实设备上崩溃。apk 安装在设备上并在打开应用程序时显示“应用程序已意外停止。请重试”并强制关闭应用程序。目标框架，最低 sdk 版本等一切都很好，但仍然无法正常工作。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-06T09:48:06.933

当您使用 Xamarin Studio（或 Visual Studio）进行调试时，Xamarin.Android 将分别安装 Mono 运行时和支持文件。如果您的应用程序是调试构建的应用程序，那么问题将是共享运行时不存在。因此，在“发布”模式下，请确保您取消选中项目选项中的“使用共享单声道运行时”。我已附上截图，请通过。![在此处输入图像描述](../Images/aa4d76481eba83b1313402d2c0431efd.png)

# android - 如何在 Android Native Facebook 登录中指定隐私设置（公开、朋友或只有我）？

> ID：15674487
> 
> 赞同：1
> 
> 时间：2013-03-28T04:49:07.400
> 
> 标签：android, facebook, privacy

我正在寻找很长时间，但我还没有成功。

是否有任何方法可以在通过本机登录登录到 facebook 本身时指定隐私设置，以便我通过应用程序在 facebook 上执行的任何活动，在 facebook 上发布具有指定隐私设置的帖子。

我正在关注以下链接[http://developers.facebook.com/docs/tutorials/androidsdk/3.0/scrumptious/authenticate/](http://developers.facebook.com/docs/tutorials/androidsdk/3.0/scrumptious/authenticate/)来设置 facebook 本机登录。

在搜索时我发现了一些 ios 代码，它们有类似的东西

*   FBSessionDefaultAudienceEveryone

*   FBSessionDefaultAudienceALL_FRIENDS

*   FBSessionDefaultAudienceSELF

用于隐私设置。但是有什么适用于安卓的吗？

我已经添加了我的代码，

```
public class SplashFragment extends Fragment
{
    LoginButton authButton;
    //private static final List<String> PERMISSIONS = Arrays.asList("user_photos","email","user_status","friends_status","user_videos","user_checkins","friends_checkins","offline_access","user_actions.news","user_actions:parii_apps","user_events","friends_events");
    //private static final List<String> PERMISSION = Arrays.asList("publish_actions","publish_stream","publish_checkins","manage_pages","create_event","rsvp_event");

    @Override
    public View onCreateView(LayoutInflater inflater,ViewGroup container,Bundle savedInstanceState) 
    {
        View view = inflater.inflate(R.layout.splash, container, false);

        authButton = (LoginButton) view.findViewById(R.id.fb_logIn_btn);
        authButton.setDefaultAudience(SessionDefaultAudience.ONLY_ME);
        Log.e(" setDefaultAudience ", " is "+authButton.getDefaultAudience());

        return view;
    }

} 
```

这对我不起作用

欢迎任何相关答案。提前致谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:47:41.413

是的。

默认受众仅在您请求发布权限时发挥作用，您需要通过带有 NewPermissionsRequest 对象的 session.requestForNewPublishPermissions() 调用来完成。

您可以在 NewPermissionsRequest 对象上设置默认受众，请参阅此处的 javadocs：[https ://developers.facebook.com/docs/reference/android/3.0/Session.NewPermissionsRequest](https://developers.facebook.com/docs/reference/android/3.0/Session.NewPermissionsRequest)

# c# - 在 asp.net 中显示时间跨度喜欢 facebook

> ID：15674488
> 
> 赞同：-1
> 
> 时间：2013-03-28T04:49:24.237
> 
> 标签：c#, asp.net

我有发布时间的内容数据库！我在 C#(short Date String,long Date String,...) 中找到了一些日期时间格式

但我想在我的 asp.net 页面中显示我的时间跨度，喜欢
2 天前、3 天前、25 分钟前（就像脸书一样）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T04:55:27.890

我会在返回枚举项或字符串的时间跨度上创建一个扩展方法

我不会为您编写代码，因为您实际上并没有给我们任何代码来查看/纠正。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:16:44.230

以下 jQuery 插件正是为此目的而制作的：

*   [可爱时间 jQuery](http://tpgblog.com/cutetime/)
*   [过去](http://timeago.yarp.com/)

使用像 CuteTime 这样的客户端解决方案将

*   允许您在不从服务器刷新页面的情况下更新文本，并且
*   允许您使用输出缓存，同时仍然获得准确的时间信息。

# batch-file - 检查网络上另一台计算机的域

> ID：15674489
> 
> 赞同：0
> 
> 时间：2013-03-28T04:49:26.503
> 
> 标签：batch-file

我有两台电脑，`pcA`和`pcB`. 我需要运行一个批处理文件`pcA`来检查是否`pcB`在正确的域上（EEP202）如果是，它应该返回 PASS，如果不是，它应该返回 FAIL。

我不太擅长网络，但我猜我可以先 ping `pcB`。如果它没有通过，那么它肯定不在正确的域上。

如果确实通过了，那么我假设您可以从 ping 中提取域？

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:58:53.577

假设您在谈论 Windows 域，您可以使用 nbtstat 来查询计算机的名称、域和其他一些属性：

```
nbtstat -A x.x.x.x 
```

这是[来自 Microsoft 的链接，](http://technet.microsoft.com/en-us/library/cc961857.aspx)其中包含选项和输出格式的说明。

如果您特别想要域，您可以使用：

```
nbtstat -A x.x.x.x | find "<00>" | find "GROUP" 
```

Ping 不会返回计算机加入的域。

您可以使用以下单行获取域 eep202 的 0 或 1：

```
nbtstat -A x.x.x.x | find "<00>" | find "GROUP" | find /c /i "eep202" 
```

如果您真的只想在成功时回显“通过”，那么您需要编写一个批处理文件。我们称之为 verify_eep202.bat：

```
@echo off
for /f "delims=" %%a in ('nbtstat -A %1 ^| find "<00>" ^| find "GROUP" ^| find /c /i "eep202"') do set found=%%a
if %found%==1 echo pass 
```

然后你可以运行`verify_eep202.bat x.x.x.x`

# javascript - JavaScript+HTML5 中的简单登录表单不起作用

> ID：15674494
> 
> 赞同：0
> 
> 时间：2013-03-28T04:50:21.647
> 
> 标签：javascript, html, forms, validation

我正在为我的网站制作一个基本的登录页面（这样人们只能访问他们需要的东西）。问题是，我检查了很多次代码，似乎没有问题。但是，身份验证不起作用。代码：
HTML5：

```
<!DOCTYPE html>
<html>
<head>
<title>NSDCars5: Login</title>
<script src="script123.js"></script>
<link rel="stylesheet" type="text/css" href="style123.css" />
</head>
<body>
<div id="title">
<h1>Hey, there! Ready for some client-side scripting?</h1>
<h2>So am I! Login here to continue.</h2>
<h4>Or if you're a hacker kind, I'm using JavaScript to validate the form.</h4>
</div>
<div id="content">
<input type="text" id="username" />&nbsp;
<input type="password" id="password" /><br />
<button onclick="checkForPassw()"><img src="icon.png" /></button><br />
</div>
<div id="footer"></div>
</body>
</html> 
```

JavaScript：

```
function checkForUname() {
    var z = document.getElementById("password");
    if (z = "Gryffindor") {
        var z = "dxoincu3rhi"
        self.location = "\hiddencontent.html";
    } else {
        document.getElementById("result").innerHTML = "You think I'm that stupid!?";
    }
}

function checkForPassw() {
    var x = document.getElementById("username");
    if (x = "NSDCars5") {
        var x = "3d3huiun";
        checkForUname();
    } else {
        document.getElementById("result").innerHTML = "You think I'm that stupid!?";
    }
} 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:01:05.480

当您检查密码和用户名及其相等时，您的问题出在 if 语句中。if 语句应该是`if(z=="Gryffindor")`and`if(x=="NSDCars5")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:07:41.737

您可能需要更改函数的范围。将“函数 checkForPassw() {”替换为

```
this.checkForPassw = function() { 
```

user2218363 也是正确的 - 您需要添加 == 运算符来比较两个值。

# javascript - CKEditor 平滑 setData

> ID：15674496
> 
> 赞同：4
> 
> 时间：2013-03-28T04:50:34.050
> 
> 标签：javascript, jquery, ckeditor, lag

我目前正在使用 CKEditor 来编辑和查看我的 SQL 数据库中的文档。如果我更改 sql 数据库中文档的内容，它应该会自动使用新文本更新 CKEditor 实例。我唯一的问题是它在更新时会闪烁（即：它变为空白，然后更新为新文本）。有谁知道如何让它成为一个令人窒息的过渡。我也在使用 JQuery，所以我不确定是否有任何东西可以用来平滑过渡到新文本。

```
CKEDITOR.instances.content.setData("data");
CKEDITOR.instance.content.setData("new data"); 
```

从数据到新数据的变化会有一点滞后。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T15:31:47.660

在框架（基于`wysiwygarea`插件）编辑器实例中设置数据时，无法避免一些轻微的闪烁。这是因为`iframe`必须重新创建包含您的作品的全部内容。这一点[也不像小菜一碟](https://github.com/ckeditor/ckeditor-dev/blob/master/plugins/wysiwygarea/plugin.js#L318-L453)，我认为我们很难绕过这件事。

我建议您在可编辑的情况下使用[element.setHtml( html ) ：](http://docs.ckeditor.com/#!/api/CKEDITOR.dom.element-method-setHtml)

```
CKEDITOR.instances.editor1.editable().setHtml( '<p>FooBar</p>' ); 
```

这**不是**以任何方式设置编辑器内容的有效方法，因为它绕过了内部过滤、处理和其他东西。然而，如果你小心的话，它**可能对你有用。**

PS您可能还想缓存`editor1.editable()`对象以加快速度。

* * *

> CKEditor 的一些核心开发人员在堆栈溢出时处于活跃状态。

是的。我们是 ;）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T06:30:12.200

似乎屏幕闪烁是因为页面正在编辑器中重新加载 iframe。通过使用 CKEditor 的 divarea 插件，我可以摆脱闪烁。现在唯一的问题是 CKEditor.readOnly 属性不再起作用......

# html - clearfix 技术增加了一些额外的填充

> ID：15674497
> 
> 赞同：7
> 
> 时间：2013-03-28T04:50:43.463
> 
> 标签：html, css

**[演示](http://jsfiddle.net/Y7PhV/119/)**

使用`clearfix technique`非常有用，但任何人都表示使用此方法的问题是增加了额外的填充值，如演示中所示。

**两者的高度相等。**

CSS：

```
body{margin: 0; padding: 0;}
#wrap{width: 900px; height: 250px; background: red; margin: 0 auto;}
.clearfix:before, .clearfix:after{content: "."; display: table;}
.clearfix:after{clear: both;}
.clearfix{zoom: 1;}
#box{float: left; width: 200px; height: 250px; background: blue;} 
```

HTML：

```
<div id="wrap" class="clearfix">
<div id="box"><h1>some heading text here</h1></div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T04:56:21.027

只是一个雅库布说。 `.clearfix:before, .clearfix:after{content: "."; display: table;}`在元素之前和之后添加一个句点。而是使用以下代码：

```
.clearfix:before, .clearfix:after{content: " "; display: table;} 
```

或者，另一种方法是仅使用此代码：

```
.clearfix:after {
  visibility: hidden;
  display: block;
  font-size: 0;
  content: " ";
  clear: both;
  height: 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T04:53:41.897

你的问题很简单：

```
.clearfix:before 
```

如果您添加它会`.`像您在 CSS 中设置 a 一样将其粘贴在前面，请`.` 删除它，它可以正常工作`clearfix:after`

# matlab - 将 3D 点云转换为范围图像

> ID：15674500
> 
> 赞同：0
> 
> 时间：2013-03-28T04:51:07.940
> 
> 标签：matlab, 3d, 2d, projection, point-clouds

我有许多 velodyne 传感器收集的 3D 点云。例如（x，y，z），以米为单位。

我想将 3D 点云转换为范围图像。

首先，我已经从卡氏坐标转换为球坐标。

```
r = sqrt(x*x + y*y + z*z)
azimuth angle = atan2(x, z)
elevation angle = asin(y/r) 
```

现在。如何在 matlab 中使用这些转换将 3D 点转换为范围图像？

整点约为 180,000，我想要 870*64 范围的图像。

方位角范围（-180~180），仰角范围（-15~15）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:41:31.157

将您的方位角和仰角分别划分为 M 和 N 范围。现在你有 M*N 个“箱子”（M = 870，N = 64）。

然后（每个 bin）累积投影到该 bin 的点的直方图。

最后，从每个 bin 中为最终范围图像选择一个代表值。您可以选择平均值（嘈杂，快速）或拟合一些分布，然后使用它来选择值（更精确，慢）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-01-22T19:25:49.190

[Matlab File Exchange](http://www.mathworks.com/matlabcentral/fileexchange/55031-pointcloud2image--x-y-z-numr-numc--)提供的`pointcloud2image`代码可以帮助您直接将点云（格式）转换为 2D 光栅图像。`x,y,z`

# c# - Trace.Warn(ex.Message.ToString(CultureInfo.InvariantCulture)); 有什么区别？和 Trace.Warn(ex.Message.ToString());

> ID：15674501
> 
> 赞同：0
> 
> 时间：2013-03-28T04:51:08.013
> 
> 标签：c#, asp.net, .net

```
catch(Exception ex)
        {
            Trace.Warn(ex.Message.ToString(CultureInfo.InvariantCulture));

        } 
```

如果我使用下面的代码会发生什么，我的意思是不写 CultureInfo.InvariantCulture

```
catch(Exception ex)
        {
            Trace.Warn(ex.Message.ToString());

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:17:55.470

根据[String.ToString(IFormatProvider) 的 MSDN 文档](http://msdn.microsoft.com/en-us/library/29dxe1x2.aspx)：

> 返回此 String 实例；不执行实际转换。

所以，这两种说法没有区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T04:52:51.820

不变的文化是文化不敏感的；它与英语相关，但与任何国家/地区无关。

文化并不特定于诸如`Trace`. 它特定于当前线程。换句话说，理想情况下，上述两个陈述应该没有区别。

更多信息和示例代码可在此处获得：[CultureInfo.InvariantCulture 属性](http://msdn.microsoft.com/en-IN/library/system.globalization.cultureinfo.invariantculture.aspx)

# android - 显示多张图片并允许用户使用 Android 在 Facebook Wall 上发布其中一张

> ID：15674504
> 
> 赞同：1
> 
> 时间：2013-03-28T04:51:28.363
> 
> 标签：android, facebook, facebook-graph-api

显示多张图片并允许用户使用选择将其中一张张贴到 Facebook Friend's Wall 上。

我仍然允许用户将静态图像发布到 Facebook Wall，但现在我想允许用户从多个图像中选择一个图像，然后发布到墙上。

我正在使用以下**代码将特定图像发布到墙上**，使用此代码：

```
params.putString("picture", FacebookUtility.STATIC_IMAGE_URL); 
```

*发布静态图像的代码*：

```
 public void onItemClick(AdapterView<?> adapterView, View view,
        int position, long id) {
            try {
            final long friendId;
            friendId = jsonArray.getJSONObject(position).getLong("uid");
            String name = jsonArray.getJSONObject(position).getString("name");
            new AlertDialog.Builder(this)
                    .setTitle(R.string.post_on_wall_title)
                    .setMessage(
                            String.format(getString(R.string.post_on_wall),
                                    name))
                    .setPositiveButton(R.string.yes,
                            new DialogInterface.OnClickListener() {
                                @Override
                                public void onClick(DialogInterface dialog,
                                        int which) {
                                    Bundle params = new Bundle();

                                    params.putString("to",
                                            String.valueOf(friendId));
                                    params.putString("caption",
                                            getString(R.string.app_name));
                                    params.putString("description",
                                            getString(R.string.app_desc));
                                    params.putString("link", 
                                            "http://www.google.com");
                                    params.putString("picture", 
                                            FacebookUtility.STATIC_IMAGE_URL);                          
                                    params.putString("name",
                                            getString(R.string.app_action));
                                    FacebookUtility.facebook
                                            .dialog(FriendsList.this,
                                                    "feed",
                                                    params,
                                                    (DialogListener) new PostDialogListener());
                                }

                            }).setNegativeButton(R.string.no, null).show();
        } catch (JSONException e) {
            showToast("Error: " + e.getMessage());
        }
    }

    public class PostDialogListener extends BaseDialogListener {
        @Override
        public void onComplete(Bundle values) {
            final String postId = values.getString("post_id");
            if (postId != null) {
                showToast("Message posted on the wall.");
            } else {
                showToast("No message posted on the wall.");
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:53:06.373

您使用什么 SDK 访问 Facebook？

[您应该直接使用 Facebook](https://developers.facebook.com/android/)提供的最新 SDK (3.0) （或其他包含它的 SDK），并使用其 Session 管理和 Request 类。

在你的情况下，如果你想发布到用户的墙上，你可以使用[Request.newPhotoUploadRequest](https://developers.facebook.com/docs/reference/android/3.0/Request#newUploadPhotoRequest%28Session,%20Bitmap,%20Callback%29)方法，它需要一个位图。正如其他人已经提到的那样，您不能再发布到朋友的墙上了。

# ios - 在 App Store 中允许的视频上复制 iOS 库音乐？

> ID：15674505
> 
> 赞同：1
> 
> 时间：2013-03-28T04:51:42.930
> 
> 标签：ios, app-store, itunes, audio

我正在开发一个 iOS 视频编辑应用程序，并研究将音频放在视频上的任何限制。所以我的问题是，如果可能（我们是否允许）使用音乐库中歌曲的歌曲或剪辑？这种功能在提交到应用商店时会被拒绝吗？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T01:53:24.473

我看不出这有什么问题——这与 App Store 上的 DJ 应用程序读取音乐并允许用户编辑它们没有什么不同。唯一的问题是，如果用户要推送到 YouTube 等，则可能会出现问题

# css - 结合两个 CSS 规则的最佳方式

> ID：15674506
> 
> 赞同：1
> 
> 时间：2013-03-28T04:51:53.500
> 
> 标签：css

我正在尝试组合下面显示的 2 个代码块，但它似乎不起作用。关于如何最好地做到这一点的任何想法？

分离：

```
#rack #main #intro #nav-bar ul li:nth-of-type(8):hover {
    background-position: -290px -470px;
}
#rack #main #intro #nav-bar ul li.current-menu-item:nth-of-type(8) {
    background-position: -290px -470px;
} 
```

结合：

```
#rack #main #intro #nav-bar ul li:nth-of-type(8):hover,
#rack #main #intro #nav-bar ul li.current-menu-item:nth-of-type(8) {
    background-position: -290px -470px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:34:48.117

这应该可以，但我不知道为什么这不起作用，我认为**`li`**有一个类，所以我们必须先定义它，如下所示：

```
#rack #main #intro #nav-bar ul li.current-menu-item:nth-of-type(8),
#rack #main #intro #nav-bar ul li:nth-of-type(8):hover {
    background-position: -290px -470px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T04:56:58.247

这是组合 2 个 css 样式的正确方法，在它们之间加逗号。如果您可以发布您的代码，我可以查看一下可能导致问题的原因。

# ruby-on-rails - 在某些 DOM 层次结构中防止 AngularJS 插值

> ID：15674508
> 
> 赞同：2
> 
> 时间：2013-03-28T04:52:07.903
> 
> 标签：ruby-on-rails, angularjs

我使用 AngularJS 并且有一些我不想插入的 HTML 部分，因为它包含用户输入的数据。因此，可能`{{asdf}}`存在我不希望 AngularJS 解析的数据。这是因为如果用户输入`{{{}, {}}`这可能会破坏编译过程并阻止任何 Angular 代码运行。

有没有办法通过指定Angular不编译DOM树的这一部分来解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T04:56:01.123

[我相信Non Bindable 指令](http://docs.angularjs.org/api/ng.directive:ngNonBindable)就是您要寻找的。

因此，您可以在任何元素上执行以下操作：

```
<div ng-non-bindable> Some {{1+2}} expressions</div> 
```

这将显示：

```
Some {{1+2}} expressions 
```

# iphone - 将多个 iOS 应用程序与菜单系统合并

> ID：15674514
> 
> 赞同：0
> 
> 时间：2013-03-28T04:53:20.783
> 
> 标签：iphone, ios, objective-c, ipad, core-data

我有几个适用于 iOS 的小型实用程序。我想将这些组合到一个应用程序中，每个实用程序都可以从菜单访问。我试图找出最好的方法来做到这一点。这些应用程序使用 Core Data，这使事情变得稍微复杂一些。是否有任何标准方法可以做到这一点，或者只是将零件粘合在一起直到我让它工作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:53:08.553

我最近研究了一个这样的应用程序。设计如下

-> 每个子应用程序通过提供其应用程序委托的名称向容器应用程序注册。为此，我维护了一个 plist，其中包含应用程序名称和 appDelegate 类的映射。

-> 每当用户选择一个应用程序时，容器应用程序将实例化应用程序委托并将其返回的主视图控制器添加为根视图控制器。

这种设计有助于解决问题的逻辑部分。在将所有源代码编译为单个项目之前，您仍然会遇到困难。

就核心数据而言，如果您的每个子应用程序使用不同的对象存储，您一定不会很难处理它。

# c# - 用密码保护word文档

> ID：15674515
> 
> 赞同：0
> 
> 时间：2013-03-28T04:53:25.887
> 
> 标签：c#, asp.net, ms-word, export, password-protection

我创建了一个 asp.net 应用程序，它具有将 Html 表转换为 Word 文档的一项功能。我已经成功地做到了这一点。但现在我需要用密码保护我的文件。是否可以通过添加密码使文件安全。我的转换代码如下所示。

```
Response.ClearContent();
        Response.Buffer = true;
        Response.AddHeader("content-disposition", string.Format("attachment; filename={0}", DateTime.Today.ToShortDateString().Replace("/", "").Replace("-", "") + "_" + DateTime.Now.ToShortDateString() + ".doc"));
        Response.ContentType = "application/ms-word";
        StringWriter sw = new StringWriter();
        HtmlTextWriter htw = new HtmlTextWriter(sw);

        tblMain.RenderControl(htw);

        string strPath = Request.PhysicalApplicationPath + "Test.doc";
        StreamWriter sWriter = new StreamWriter(strPath);
        sWriter.Write(sw.ToString());
        sWriter.Close(); 
```

如果有任何方法可以为保存文件添加密码，请帮助我。提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:06:09.813

这是 C#，但看起来是您正在寻找的属性。

```
ThisDocument.SaveAs("c:\test\MyNewDocument.doc")

// C#
Object fileName = @"C:\Test\MyNewDocument.doc";
Object password = Type.Missing;
Object writePassword = Type.Missing;

ThisDocument.SaveAs(ref fileName, ref password, ref writePassword); 
```

[http://msdn.microsoft.com/en-us/library/office/aa192495(v=office.11​​).aspx](http://msdn.microsoft.com/en-us/library/office/aa192495%28v=office.11%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T05:01:47.077

Word.Document 允许您通过将密码作为参数传递来保存文档。看到[这个](http://www.dotnetspider.com/resources/41046-Password-protection-word-document-using-C.aspx)。

# android - android线与自身相交

> ID：15674519
> 
> 赞同：1
> 
> 时间：2013-03-28T04:53:36.637
> 
> 标签：android, line, draw

![在此处输入图像描述](../Images/cd4b0413e421a868f15276fb2669b6c2.png)

大家好，

我使用**canvas.drawPath(mPath, mPaint);画一条线** 方法。但是有一些问题，我想知道线是否与自身相交。所以请帮忙。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T04:40:59.080

为了获得更好的性能和 UI 响应，请创建一个带有 Handler 和 Looper 的单独线程。还使用 HashSet 存储路径，当您添加位置时，该路径会告诉您相交，因为 add() 返回一个布尔值。

这是一些希望能提供更好性能的代码。

```
public class MainActivity extends Activity {

    private Handler mHandler;
    private String position, lastPosition;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    @Override
    protected void onResume() {
        super.onResume();
        Tracker t = new Tracker();
        t.start();
    }

    @Override
    protected void onPause() {
        if (mHandler != null) 
            mHandler.getLooper().quit();
        super.onPause();
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        switch(event.getAction()) {
        case MotionEvent.ACTION_MOVE:
            position = event.getX()+","+event.getY();
            if (position.equals(lastPosition)) break; 

            if (mHandler != null) {
                Message msg = Message.obtain();
                msg.obj = position;
                mHandler.sendMessage(msg);
            }

            lastPosition = position;
            break;
        }
        return true;
    }

    private class Tracker extends Thread {
        HashSet<String> path = new HashSet<String>(); 

        @Override
        public void run() {
            Looper.prepare();
            mHandler = new Handler() {
                public void handleMessage(Message msg) {
                    String position = String.valueOf(msg.obj);
                    if (!path.add(position)) 
                        Log.w("Intersection", position);//Handle the intersection
                }
            };          
            Looper.loop();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T05:08:13.620

保存事件中的坐标

```
 @Override 
```

`public boolean onTouchEvent(MotionEvent event) {` event.getX();event.getY()`

}

到 Hashmap 并进行比较

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T21:09:06.797

我认为你最好的选择是：

1）保留一个代表画布上当前内容的路径，每次使用时`canvas.drawPath(nextPath)`，还将其添加到全局路径并执行类似的操作`globalPath.addPath(nextPath)`

2) 看看这篇文章：[Collision detection with bitmaps on SurfaceView's canvas in Android](https://stackoverflow.com/questions/9843578/collision-detection-with-bitmaps-on-surfaceviews-canvas-in-android/9918830#9918830)。看来您应该能够将 globalPath 与 nextPath 进行比较，并判断它们是否发生碰撞。

3) 如果您只想知道单个路径是否与自身发生冲突，而不关心添加新路径或其他任何内容，我们需要有关您如何绘制此路径的更多信息。用线、弧、圆？？

# java - 如何使用正则表达式替换java中的特殊字符

> ID：15674524
> 
> 赞同：-4
> 
> 时间：2013-03-28T04:53:46.500
> 
> 标签：java, regex

人物：

```
 + – && || ! ( ) { } [ ] ^ ” ~ * ? : \ 
```

现在我想用 \ 替换字符例如：

```
String s ="content:you&&me"; 
```

更换后：

```
s--> content\:you\&&me 
```

有人帮我谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T05:19:31.337

如果我正确理解了您的问题，那么这个问题似乎很棘手。您可以尝试使用此代码来解决您的任务：

```
// your special characters
String regex = "+ – && || ! ( ) { } [ ] ^ ” ~ * ? : \\";
// building a valid regex out of above
regex = '(' + regex.replaceAll("([^\\s]{1,2})(?=(?:\\s+|$))",
                               "\\\\Q$1\\\\E").replace(' ', '|') + ')';

// your string to be replaced
String str = "content:you&&me";
// actual replacement
str = str.replaceAll(regex, "\\\\$1");

// printing the result
System.out.printf("********* replaced: [%s]%n", str); 
```

### 现场演示：http: [//ideone.com/onmcMy](http://ideone.com/onmcMy)

# solr - solrcloud副本等待时间配置

> ID：15674529
> 
> 赞同：3
> 
> 时间：2013-03-28T04:54:13.580
> 
> 标签：solr, solrcloud

我已经设置了具有 2 个分片 2 副本配置的 solrcloud 集群。但是当我启动我的分片节点并且每个分片只有一个副本节点时，分片领导节点不断打印一条消息：`waiting until we see more replicas up,total 3 found 2 timeoutin 175000`，其他副本到这里的等待时间大约是 3 分钟。

我的问题是如何减少等待时间，加快开发速度？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T01:45:13.867

在 solr.xml 中，添加 cores 属性 leaderVoteWait=0。默认为 180000（3 分钟）。

这只是为了防止使用旧节点启动集群——你不希望它在其他节点参与选举之前成为领导者——所以我们等到已知副本启动以确保它们可以参与选举。

如果您小心不要以在最新节点之前出现数据不足节点的方式启动集群，则没有必要。

*   标记

# c# - 如何在不使用绑定路径的情况下对必填字段进行验证

> ID：15674533
> 
> 赞同：1
> 
> 时间：2013-03-28T04:54:33.877
> 
> 标签：c#, wpf, xaml

我现在遇到的问题是，对于我目前拥有的每个文本框，我必须指定一个绑定路径以验证文本框是否为空。但是，如果碰巧我有一百个文本框，我不可能为所有 100 个文本框单独创建一个获取和设置方法。那么有没有更好的方法来进行我现在拥有的当前验证？

以下是我目前拥有的代码，

在 XAML 中

```
 <Grid.BindingGroup>
            <BindingGroup Name="RequiredFields">
                <BindingGroup.ValidationRules>
                    <local:MandatoryFieldRule ValidationStep ="CommittedValue"/>
                </BindingGroup.ValidationRules>
            </BindingGroup>
        </Grid.BindingGroup>
            <TextBox x:Name="ds_instruct" HorizontalAlignment="Left" Height="30"
               Margin="286,186,0,0" TextWrapping="Wrap" VerticalAlignment="Top"    
               Width="275" FontSize="11" GotFocus="textBox_Expand"                                                     
               LostFocus="textBox_Expand" Tag="Default Special Instruction" 
               SpellCheck.IsEnabled="True" 
               Text="{Binding  Path=Text, BindingGroupName=RequiredFields,ValidatesOnDataErrors=true}"/> 
```

在验证文件中：

```
public String Text { get; set; }
public String Text1 { get; set; }

 #region IDataErrorInfo Members
   public string Error
    {
        get {throw new NotImplementedException(); }
    }

    public string this[string columnName]
    {
        get 
        {
            string result = null;
            if (columnName == "Text")
            {
                if (string.IsNullOrEmpty(Text))
                {result = "Mandatory field required"; }
            }
            if (columnName == "Text1")
            {
                if (string.IsNullOrEmpty(Text1))
                { result = "Mandatory field required"; }
            }
            return result;

        }

    }

    #endregion 
```

所以我的问题是，如何在不指定一对一绑定的情况下验证多个文本框的必填字段（文本框到 getter 和 setter 方法）？

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T00:00:51.467

也许你可以`Reflection`用来检查字符串的值

```
public string this[string columnName]
{
    get 
    {
        string result = null;
        if (string.IsNullOrEmpty(this.GetType().GetProperty(columnName).GetValue(this) as string))
        {
            result = "Mandatory field required";
        }
        return result;
    }
} 
```

# php - 在 php 中，如何从末尾开始将字符串截断 x 个字符？

> ID：15674534
> 
> 赞同：-3
> 
> 时间：2013-03-28T04:54:38.407
> 
> 标签：php, string, truncate

如何将 120 个字符的字符串截断为 100 个字符，但长度的计数从字符串的末尾开始？以便从字符串的开头而不是结尾删除 20 个字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T04:58:45.100

`$newString = substr($oldString, -100)` 将返回字符串的最后 100 个字符（或者`false`如果字符串较短）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T04:56:44.933

使用子[字符串](http://php.net/manual/en/function.substr.php)

```
$newline = substr($oldline, 20); 
```

或者

```
$newline = substr($oldline, -100); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T04:57:53.210

[`substr()`](http://php.net/manual/en/function.substr.php)

```
$shortString = substr($string, 20); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T04:59:40.537

让我建议从头开始。如果您已经知道这将是 100 个字符：

```
 $string=substr($yourstring,-100); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T04:57:27.863

你可以使用[substr](http://php.net/manual/en/function.substr.php)函数

```
$str = "Hello How are you?"
$str2 = substr($str, 5); // "How are you?" 
```

前 20 个字符

```
$string = substr($str,20); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T04:57:36.507

只需`substr`在 PHP
[http://php.net/manual/en/function.substr.php中使用](http://php.net/manual/en/function.substr.php)

```
substr("abcdef", 20); // "abc.." is of course an example string. 
                      // this sets it to position start of 20 from left. 
```

# sql-server - 如果 mssql 2008 中已经存在用户名，则增加 1

> ID：15674537
> 
> 赞同：1
> 
> 时间：2013-03-28T04:55:24.553
> 
> 标签：sql-server, sql-server-2008

```
Create table  TEMP_USER
( 
USERNAME  nvarchar(50) ,
ID  int,
Phone nvarchar(30)
); 
```

如果用户名已经存在于 temp_user 中，它应该在通过 SP 插入时增加 1。示例：RAM .Narayan 如果有人尝试再次插入 ram.narayan 它应该插入为 ram.narayan1 下次有人尝试插入 ram.narayan 它应该插入 ram.narayan2 ..如何在 MSSQL 2008 中执行此操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:15:39.977

尝试以下类似的方法（未经测试，但它应该会给你一个好的开始）。它假定变量`@username`、`@id`和`@phone`已作为参数声明或传递。

```
DECLARE @curr_uname nvarchar(50) = @username
DECLARE @i INT = 0

WHILE EXISTS (SELECT 1 FROM TEMP_USER WHERE USERNAME = @curr_uname)
BEGIN
    SET @i += 1
    SET @curr_uname = @username + CAST(@i AS NVARCHAR(7))
END

INSERT INTO TEMP_USER (USERNAME, ID, Phone)
VALUES (@curr_uname, @id, @phone) 
```

# c# - linq to entity 返回重复的输出

> ID：15674544
> 
> 赞同：0
> 
> 时间：2013-03-28T04:55:42.003
> 
> 标签：c#, linq

我正在尝试将我的 SQL 查询转换为 linq 到实体。

这是我的 SQL 查询

```
SELECT DISTINCT 
    voidSEVT.RESTYPE, voidSEVT.SESID, voidWO.WONUM, voidSEVT.T_START,
    voidSEVT.USER3
FROM
    VOIDWO AS voidWO 
JOIN 
    voidSEVT ON voidWO.SEQNUM = voidSEVT.SEQNUM 
LEFT OUTER JOIN 
    PROJECTS AS prj ON voidWO.PRJ_ID = prj.PRJ_ID 
LEFT OUTER JOIN
    RESTYPE ON voidSEVT.RTYPE = RESTYPE.CODE 
JOIN
    RSRCE as resource on voidSEVT.RESID = resource.RESID
WHERE
    (voidSEVT.USERFLAG4 != 1) 
    AND (LRTRIM(RTRIM(voidSEVT.USER3)) <> '') 
```

我的 sql 查询输出是

```
 RESTYPE   SESID   WONUM            T_START    USER3     
0                   7245100 1477491          1352239200 0030\r\n0060\r\n
4                   7245098 1477491          1352239200 0030\r\n0060\r\n
4                   7245099 1477491          1352239200 0030\r\n0060\r\n
5                   7245097 1477491          1352239200 0030\r\n0060\r\n
5                   7245101 1477491          1352239200 0030\r\n0060\r\n 
```

这是我对实体的 linq

```
public List<ReversalEntity> ReversalList()
{
   var db = new SchedwinEntities();
   var query = 
                ( from voidWO in db.VOIDWOes
                  join voidSEVT in db.VOIDSEVTs on voidWO.SEQNUM equals voidSEVT.SEQNUM into voidSEVT_join
                  from voidSEVT in voidSEVT_join.DefaultIfEmpty()
                  join prj in db.PROJECTS on voidWO.PRJ_ID equals prj.PRJ_ID into prj_join
                  from prj in prj_join.DefaultIfEmpty()
                  from voidSevtJoin in voidSEVT_join.DefaultIfEmpty()
                  join restype in db.RESTYPEs on voidSevtJoin.RTYPE equals restype.CODE into RESTYPEs_join
                  from restypes in RESTYPEs_join.DefaultIfEmpty()
                  join resource in db.RSRCEs on voidSEVT.RESID equals resource.RESID into RSRCS_join
                  where
                    (voidSEVT.USERFLAG4.value != 1) &&
                    (voidSEVT.USER3.Trim().Length > 0)

   select new
   {
       resourceType = voidSEVT.RESTYPE,
       voidSEVT.SESID,
       wonum = voidWO.WONUM,
       start = voidSEVT.T_START,
       usage = voidSEVT.USER3,
       SAPCCr = ((voidSEVT.RESTYPE == 5 || voidSEVT.RESTYPE == 0)?prj.USER3:prj.USER9),
       activity = restypes.USER2,
       sendercc = restypes.USER1,
       resdesc = RSRCS_join.FirstOrDefault().DES,
       Type=voidSEVT.RESTYPE,
       jobdesc = voidWO.JOBDESC,
   }).Distinct(); 
```

我的 sql 查询返回 20 条记录，如下所示

```
 RESTYPE   SESID   WONUM            T_START    USER3     
0                   7245100 1477491          1352239200 0030\r\n0060\r\n
0                   7245100 1477491          1352239200 0030\r\n0060\r\n
0                   7245100 1477491          1352239200 0030\r\n0060\r\n
0                   7245100 1477491          1352239200 0030\r\n0060\r\n
4                   7245098 1477491          1352239200 0030\r\n0060\r\n
4                   7245098 1477491          1352239200 0030\r\n0060\r\n
4                   7245098 1477491          1352239200 0030\r\n0060\r\n
4                   7245098 1477491          1352239200 0030\r\n0060\r\n
etc... 
```

基本上每条记录每条记录都有 3 个重复项，因此我的输出总数为 20。看起来有些连接在这里不合适但不确定。

有人告诉我这里缺少什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:08:47.653

一些示例输出数据可能有助于排除故障。

我的第一个怀疑是某种大写或其他东西。SQL 通常不区分大小写（除非有人设置它），并且过去给我带来了一些类似的结果。

# java - 将参数传递给测试用例

> ID：15674545
> 
> 赞同：1
> 
> 时间：2013-03-28T04:55:47.337
> 
> 标签：java, junit, junit4

我有一个如下的测试用例：

```
@RunWith(Categories.class)
@IncludeCategory(UsageCollectiontNecessaryCategory.class)
@SuiteClasses({
    SampleTest1.class,
    SampleTest2.class,
    SampleTest3.class
})
public class AllTest {

} 
```

这三个测试（SampleTest1、SampleTest2 和 SampleTest3）将基于相同的数据运行。我想在一个地方初始化参数并将其传递给三个测试类。参数是一个复杂的对象（不是字符串或 int 等）包含许多数据，我该怎么做？或者有什么其他好的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:28:31.910

在不知道您的对象的情况下，我将通过一个字符串示例进行演示。

```
package com.yang;

public class ObjectData{

    public String object = "I will be used very often";

} 
```

你的测试类：

```
package com.yang;

import com.yang.ObjectData;

public class TestOne{

private ObjectData data= new ObjectData();
private String objectInTestClass = new String(data.object);
} 
```

# jquery - jQuery：FineUploader 回调中的动画旋钮

> ID：15674547
> 
> 赞同：0
> 
> 时间：2013-03-28T04:55:56.477
> 
> 标签：jquery, callback, jquery-animate, fine-uploader, jquery-knob

我正在使用 jQuery 库 FineUploader & Knob 来实现人造循环加载效果。

我目前的代码是：

```
 $('.dial').val(0).trigger('change').delay(2000);
    var myKnob = $(".dial").knob({
        'min': 0,
        'max': 100,
        'readOnly': true,
        'width': 90,
        'height': 90,
        'fgColor': "47CBFF",
        'dynamicDraw': true,
        'thickness': 0.3,
        'tickColorizeValues': true,
        'skin': 'tron'
    })
     $('.dial').knob();
    $('#uploader-div').fineUploader({
        request: {
            endpoint: "/updateavatar",
            paramsInBody: true
        },
        debug: true,
        template: '<div class="qq-uploader">' + '<pre class="qq-upload-drop-area"><span>{dragZoneText}</span></pre>' + '<div class="qq-upload-button btn btn-success">{uploadButtonText}</div>' + '<span class="qq-drop-processing"><span>{dropProcessingText}</span><span class="qq-drop-processing-spinner"></span></span>' + '<ul class="qq-upload-list"></ul>' + '</div>',
    }).on('submit', function (event, id, name, responseJSON) {
        $('.qq-uploader').css({
            'background': 'rgba(0,0,0,.3'
        });
        $('canvas').fadeIn();
        $({
            value: 0
        }).animate({
            value: 75
        }, {
            duration: 3000,
            easing: 'swing',
            step: function () {
                $('.dial').val(Math.ceil(this.value)).trigger('change');
            }
        });
    }).on('complete', function (event, id, name, responseJSON) {
        $({
            value: 75
        }).animate({
            value: 100
        }, {
            duration: 1000,
            easing: 'swing',
            step: function () {
                $('.dial').val(Math.ceil(this.value)).trigger('change');
            }
        });
        $('canvas').fadeOut();
        var image = $('#profile-pic img').attr('src');
        $('#profile-pic img').fadeOut(function () {
            $(this).attr('src', image).fadeIn('slow')
        });
    }); 
```

**问题**是“完成”功能将在“加载器”完成 75% 的动画之前运行。

**我希望**“完成”回调等到动画完成......

*作为奖励*，我希望动画能够实际采用正确的值 Fineuploader 百分比，所以我不必伪造它！

我可以帮助您更好地理解吗？让我知道！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:31:49.847

我不知道这是否可能是一个问题，你`jquery css function`在`submit function`这里有错误：

```
.on('submit', function (event, id, name, responseJSON) {
    $('.qq-uploader').css({
        'background': 'rgba(0,0,0,.3)'
    });  //-------------------------^--------missing ')' closing here

    .....// all other stuff

}).promise().done(function(){
    $({
        value: 75
    }).animate({
        value: 100
    }, {
        duration: 1000,
        easing: 'swing',
        step: function () {
            $('.dial').val(Math.ceil(this.value)).trigger('change');
        }
    });
    $('canvas').fadeOut();
    var image = $('#profile-pic img').attr('src');
    $('#profile-pic img').fadeOut(function () {
        $(this).attr('src', image).fadeIn('slow')
    });
}); 
```

您可以尝试使用`.promise()`和`.done()`功能。

### 从文档：

## 完毕：

> 类型：Function(Promise animation, Boolean jumpedToEnd) 动画完成时调用的函数（它的 Promise 对象被解析）。（添加的版本：1.8）

### [更多在这里得到](http://api.jquery.com/animate/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:18:14.987

没有办法让完整的回调“等待”你。在 Fine Uploader 解析来自服务器的响应后，将执行完整的回调。时期。

如果您尝试编写自己的进度条，那么您可以并且应该使用进度回调。在内部，这是 Fine Uploader 使用的。

# vba - 使用 sub var 进入其他 sub visual basic

> ID：15674550
> 
> 赞同：0
> 
> 时间：2013-03-28T04:56:08.153
> 
> 标签：vba, variables

如何通过在其他 sub 中调用 sub 从 sub 中获取 var 值？像

```
 Sub test()
    Dim a As Integer
    a = 1
  End Sub
  Sub testshow()
    MessageBox.Show(test.a)
  End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:36:09.360

在 VBA（您的标签状态）中，您需要更改`Sub`为`Function`：

```
Function test()
    Dim a As Integer
    a = 1
    test = a
End Function

Sub testshow()
   MsgBox test
End Sub 
```

评论后编辑：如果您使用多个变量，则：

```
Function test(whichVar)
    Dim a As Integer
    If whichVar = 1 then
        a = 100
    ElseIf whichVar = 2 Then
        a = 200
    'etc...
    End if

    test = a
End Function

Sub testshow()
   MsgBox test(2)    'will give you 200
End Sub 
```

# ruby-on-rails - 创建一个显示所有博客的表

> ID：15674551
> 
> 赞同：0
> 
> 时间：2013-03-28T04:56:08.807
> 
> 标签：ruby-on-rails, ruby

面试问题：-

嗨，我是 Rails 的初学者。我去面试了，被问到以下问题：-

假设您有以下一组模型和关系

```
class Author < ActiveRecord::Base
   has_many :blogs
   # Properties:  name
end

class Blog << ActiveRecord::Base
  belongs_to :author
  has_one :image
  # Properties:  title, body
end

class Image << ActiveRecord::Base
  belongs_to :blog
  # Properties:  image_file_path
end 
```

假设您要创建一个显示所有博客的表。该表的列是博客标题、作者姓名和博客图片。

编写一个 ActiveRecord 查询，该查询将拉取显示此表所需的@blogs 列表。你能做到这一点，以便在幕后`no more then 3 SQL statements`生成吗？不超过1个怎么样？

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T05:19:27.230

您可以使用以下查询来获取所有博客。

@blogs = Blog.find(:all, include: :project, include: :image)

在视图中..
@blogs.each 做 |blog|
blog.title
blog.author.name
blog.image.image_path

结尾

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T05:08:56.620

希望我正确理解了您的问题，但是要获取所有博客的列表，您只需执行以下操作：

```
@blogs = Blog.all 
```

您可以在 Rails 控制台上尝试类似的操作，它会显示相应的 SQL 查询，这很简单

```
SELECT "blogs".* FROM "blogs" 
```

Rails 网站上有一个指南，如果您想查看 Active Record 查询，请参阅：http: [//guides.rubyonrails.org/active_record_querying.html#retrieving-multiple-objects](http://guides.rubyonrails.org/active_record_querying.html#retrieving-multiple-objects)

# javascript - 清除气球谷歌地图：未捕获的参考错误：未定义标记

> ID：15674557
> 
> 赞同：3
> 
> 时间：2013-03-28T04:57:16.583
> 
> 标签：javascript, ajax, google-maps, google-maps-api-3

我创建了一个切换来清除所有标记的地图。单击切换时，它会调用 getMapVisit()

单击切换时出现此错误：

```
Uncaught ReferenceError: markers is not defined 
```

在下面用星号标记的行上的这个javascript代码中：

```
function load() {
      var map = new google.maps.Map(document.getElementById("map"), {

        zoom: 13,
        mapTypeId: 'roadmap'
      });
      var infoWindow = new google.maps.InfoWindow;

      // Change this depending on the name of your PHP file
      downloadUrl("getMapMarkers.php", function(data) {
        var bounds = new google.maps.LatLngBounds();
        var xml = data.responseXML;
        var markers = xml.documentElement.getElementsByTagName("marker");
        for (var i = 0; i < markers.length; i++) {
          var name = markers[i].getAttribute("name");
          var type = markers[i].getAttribute("type");
          var point = new google.maps.LatLng(
              parseFloat(markers[i].getAttribute("lat")),
              parseFloat(markers[i].getAttribute("lng")));
          var html = "<b>" + name + "</b> <br/>" ;
          var icon = customIcons[type] || {};
          var marker = new google.maps.Marker({
            map: map,
            position: point,
            icon: icon.icon,
            shadow: icon.shadow
          });
          bindInfoWindow(marker, map, infoWindow, html);
          bounds.extend(point);

        }
        map.fitBounds(bounds);
      });

    }

    function bindInfoWindow(marker, map, infoWindow, html) {
      google.maps.event.addListener(marker, 'click', function() {
        infoWindow.setContent(html);
        infoWindow.open(map, marker);
      });
    }

    function downloadUrl(url, callback) {
      var request = window.ActiveXObject ?
          new ActiveXObject('Microsoft.XMLHTTP') :
          new XMLHttpRequest;

      request.onreadystatechange = function() {
        if (request.readyState == 4) {
          request.onreadystatechange = doNothing;
          callback(request, request.status);
        }
      };

      request.open('GET', url, true);
      request.send(null);
    }

    function getMapVisit()
    {
        alert("in clear new clear al lmarkers");
        //clear markers
        clearOverlays();
        markers = [];

        return false;
    }

function clearOverlays() {
        setAllMap(null);
      }

function setAllMap(map) {
    for (var i = 0; i < markers.length; i++) {  **************
        markers[i].setMap(map);
    }
}

    function doNothing() {} 
```

我正在显示地图和切换的 php 是：

```
$page->content .= '<p> <h3> Your Beer Map 
<form class="form-horizontal pull-right" style="width: 400px !important; padding-right: 20px !important;">
    <div class="control-group">
        <div class="controls btn disabled switch switch-two">
            <input id="week9" name="view" type="radio" checked>
            <label for="week9" onclick="getMapDrank()">Drank Beer From</label>

            <input id="month10" name="view" type="radio">   
            <label for="month10" onclick="getMapVisit()">Visited</label>

            <span class="slide-button btn btn-warning"></span>
        </div>
    </div>
</form>
</h3> 

</p>';  

$page->content .= '<div id="map" style="width: 700px; height: 500px"></div>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:36:07.623

`markers`是`downloadUrl()`回调函数内部的局部变量。看起来您希望它成为全局变量。您可以尝试在任何函数之外的最顶部添加此行：

```
var markers = []; 
```

并在`downloadUrl()`回调中更改此行：

```
var markers = xml.documentElement.getElementsByTagName("marker"); 
```

至：

```
markers = xml.documentElement.getElementsByTagName("marker"); 
```

这可能不是代码中唯一的问题，但无论如何这是一个问题。

# assembly - 6502 相对地址模式换行

> ID：15674560
> 
> 赞同：4
> 
> 时间：2013-03-28T04:57:26.633
> 
> 标签：assembly, 6502

阅读 6502 上的文档，我无法在任何地方找到答案。使用相对寻址时可以换行。但是有可能环绕两端吗？我猜这是可能的，但不太可能。

当我的意思是两端时，我的意思是我知道你可以从高 PC 换到低 PC。但是您也可以从低 PC 包装到高 PC 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T09:12:57.710

用相对分支跨越页面边界会产生一个额外的循环，但是页面跨越分支是向前分支还是向后分支都没有任何区别。

您可以在[Visual6502](http://visual6502.org/JSSim/expert.html)中尝试一下。在地址 0000 处输入程序`A9 00 F0 EC`( `LDA #00`/ `BEQ $FFF0`)，单步执行代码并查看`BEQ`. 如果您只信任真正的硬件，您可以轻松地在任天堂娱乐系统之类的设备上验证这一点。

显然，为了能够使用相对分支到达页面 FF，您必须在零页 RAM 之外执行，并且您可能不想在代码上浪费 ZP RAM，因为它需要适合您最常访问的数据。因此，这将使这种特殊情况不太可能发生。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T13:41:58.157

是的，它也可以向后工作。但是许多汇编程序不支持这一点。当您尝试将分支运算符放在零页寻址 >$ff80 区域的开头时，汇编程序通常会抛出诸如“偏移量太大”之类的错误。但是，当您尝试使用字节值放置操作码时，`> 0002 f0 e0`您会得到结果`beq $ffe4`。我使用`0002`了第一个可用的内存地址，因为我使用了 Commodore 64 来尝试它，并且 $0001 不适用于该机器。对于其他基于 6502 的机器，0000 美元也应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T05:01:43.280

一般来说，您可以使用模运算执行自己的地址计算，然后将结果用于绝对寻址。

# tiff - graphicsmagick 将多页 tiff 爆裂为 2 页 tiff

> ID：15674564
> 
> 赞同：0
> 
> 时间：2013-03-28T04:57:47.517
> 
> 标签：tiff, graphicsmagick, multipage

我有一个包含数百页的 tiff 文件。我的目标是将它分成许多文件，每个文件包含两页。即每两页保存一个新文件。它基本上是一叠正反面扫描的单页文档。

我正在开发一个 C# Forms (visual studio 2008) 应用程序来自动化该过程。

我最初的想法是使用 Graphicsmagick 将每个页面拆分为一个单独的文件，然后逐步浏览这些文件以将它们重新连接起来，一次重新组合两页。

我通过调用这样的命令来进行拆分过程。

```
gm convert largeinputfile.tif +adjoin singlepageoutput%d.tif 
```

当我尝试使用这样的命令再次将两个页面重新组合在一起时

```
gm convert -page A4 -append singlepageoutput0.tif singlepageoutput1.tif New2pageImage.tif 
```

这将创建一个包含两页但没有分页符的长文档。我已经用这个选项尝试了几件事，`-page`但我只是在猜测，它没有太大的效果。

我非常接近一个可行的解决方案，但停留在最后一点。有任何想法吗？

提前感谢大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-06T17:02:09.277

以为我会回答这个问题，因为我遇到了类似的问题，这是我遇到的第一个 SO 问题。

这将获取前两页并创建一个新的多页 tiff 文件。

```
gm convert -page A4 page0.tif page1.tif -adjoin output.tif 
```

然后您获取您创建的文件并向其中添加一个新页面。

```
gm convert output.tif page2.tif -adjoin output.tif
gm convert output.tif page3.tif -adjoin output.tif
.... and so on .... 
```

这还将具有不消耗 CPU 和 RAM 的额外好处，因为图形魔术师将尝试在 RAM 中完成所有事情，如果一次性完成，10MB 500 页的 tiff 将占用大约 24GB 的 RAM。

# highcharts - Highcharts - 具有 tickPositioner 的 X 轴值之间的间距相等

> ID：15674567
> 
> 赞同：2
> 
> 时间：2013-03-28T04:57:59.317
> 
> 标签：highcharts

我通过 tickPositioner 属性为 x 轴传递了一些值。这些值彼此之间的间距不相等。我的要求是我希望这些值彼此等距，即使它们彼此之间的差异不相等。请在下面查看我的代码：

```
var chart = new Highcharts.Chart({
chart: {
     renderTo: 'container'
 },
 credits: {
     enabled: false
 },
 title: {
     text: 'Duration vs Productive Hours'
 },
 xAxis: [{
     allowDecimals: false,
     title: {
         text: 'Hours'
     },
     labels: {
         rotation: -90,
         align: 'right',
         style: {
             fontSize: '10px'
         }
     },
     tickPositioner: function () {
         var pos;
         tickPositions = [];
         tickStart = 100000;
         for (pos = tickStart; pos <= 1000000000; pos *= 10) {
             tickPositions.push(pos);
         }
         return tickPositions;
     }
 }],
 exporting: {
     width: 1024,
     filename: 'Duration_vs_Productive_Hours',
     buttons: {
         exportButton: {
             menuItems: [{
                 text: 'Export to PNG image',
                 onclick: function () {
                     this.exportChart();
                 }
             }, {
                 text: 'Export to JPEG image',
                 onclick: function () {
                     this.exportChart({
                         type: 'image/jpeg'
                     });
                 }
             }, {
                 text: 'Export to PDF file',
                 onclick: function () {
                     this.exportChart({
                         type: 'application/pdf'
                     });
                 }
             },
             null]
         }
     }
 },
 yAxis: [{
     min: 0,
     tickInterval: 10,
     max: 60,
     labels: {
         formatter: function () {
             return this.value;
         },
         style: {}
     },
     showEmpty: true,
     alternateGridColor: '#f7f7f7',
     gridLineColor: '#e7e7e7',
     allowDecimals: false,
     title: {
         text: 'Duration (Months)',
         style: {}
     }
 }],
 tooltip: {
     crosshairs: true,
     formatter: function () {
         if (this.series.type == 'line') {
             return '' + this.x;
         } else {
             return '' + this.x + ': ' + this.y;
         }
     }
 },
 legend: {
     layout: 'horizontal',
     align: 'center',
     verticalAlign: 'bottom',
     backgroundColor: '#FFFFFF'
 },
 series: [{
     name: 'Other Projects',
     type: 'scatter',
     data: [
         [560000, 13],
         [185250, 11],
         [3625788, 23],
         [1648510, 21],
         [265000, 14],
         [13000000, 43],
         [28000000, 34],
         [1567000, 19],
         [1190000, 20],
         [21000000, 31],
         [7000000, 33],
         [3805200, 30],
         [17000000, 29],
         [1503267, 21],
         [11332332, 29],
         [1485067, 20],
         [5000000, 30],
         [5400000, 22],
         [13000000, 23],
         [3810000, 26],
         [810000, 18],
         [27528218, 26],
         [377319, 14],
         [840000, 22],
         [550000, 13],
         [2643142, 26],
         [412800, 13],
         [2500000, 22],
         [4510000, 19],
         [523116, 15],
         [17600000, 28],
         [2500000, 21],
         [21000000, 29],
         [3500000, 17],
         [620000, 15],
         [163000000, 46],
         [134000000, 41],
         [45000000, 39],
         [13677454, 31],
         [167000000, 52],
         [47000000, 33],
         [49000000, 38],
         [31000000, 38]
     ]
 }, {
     name: 'User Data',
     type: 'line',
     data: [
         [4050000, 0],
         [4050000, 60]
     ]
 }] }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:39:40.410

听起来您正在尝试使轴对数。尝试设置

```
xAxis:{
    type:"logarithmic" 
```

并删除。定位器。 [http://api.highcharts.com/highcharts#xAxis.type](http://api.highcharts.com/highcharts#xAxis.type)

如果你这样做，你会得到这个：http: [//jsfiddle.net/TsaMA/](http://jsfiddle.net/TsaMA/) xAxis 刻度在 1M、10M 和 100M 处等距分布。

有两个 xAxis 设置可能：tickInterval 和 tickPixelInterval。 [http://api.highcharts.com/highcharts#xAxis.tickInterval](http://api.highcharts.com/highcharts#xAxis.tickInterval)

如果你设置

```
tickInterval:1 
```

你得到 1M、10M 和 100M，这是我能得到的最接近你想要的。

如果您知道图表的宽度，则 tickPixelInterval 很有用。如果您的图表是 1000 像素宽，您可以设置 tickPixelInterval:250。

# mysql - mysql php查询：为什么包含不等于会影响结果

> ID：15674571
> 
> 赞同：1
> 
> 时间：2013-03-28T04:58:21.973
> 
> 标签：mysql, sql, select

在具有 5000 条记录的 mysql 查询中，在表中：subscriptions [id autoincrement int, name varchar64, archive tinyint4]

我正在传递以下 sql

```
$sqlg = "SELECT * FROM subscriptions where archive != 1  order by id desc limit 0,24"; 
```

以上返回 3061 - 3012 之间的记录

如果我删除 where 子句，

```
SELECT * FROM subscriptions order by id desc 
```

它返回 5066 - 5037 之间的记录，这是我正在寻找的正确结果，存档的值为 NULL 或 0。任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:00:07.317

`NULL`不一样`0`。它根本是未知的，所以如果你也想检查`NULL`，请使用`IS NULL`

```
SELECT * 
FROM subscriptions 
where archive = 0 OR archive IS NULL 
order by id desc 
limit 0, 24 
```

# python - Python：httplib2 和 urllib2 有什么区别？

> ID：15674576
> 
> 赞同：0
> 
> 时间：2013-03-28T04:58:54.017
> 
> 标签：python, django, oauth-2.0, urllib2, httplib2

我正在尝试实现一个*OAuth2*身份验证服务器，对于客户端部分，我想向服务器发送一个 json 请求（从 Django 视图），我找到了几个库来做到这一点，最常见的是**httplib2**和**urllib2**我是想知道它们之间的区别是什么，哪个是用于此目的的最佳库。

提前致谢。

**编辑**：搜索后，我发现了一个非常有用的库，叫做*Requests*，从那时起我就使用这个库。( [http://docs.python-requests.org/en/latest/](http://docs.python-requests.org/en/latest/) )

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T05:08:06.507

[urllib2](http://docs.python.org/2/library/urllib2.html)处理打开和读取 URL。它还处理额外的东西，比如存储 cookie。

[httplib](http://docs.python.org/2/library/httplib.html?highlight=httplib#httplib)处理 http 请求，当你打开一个 url 时，它会在幕后发生。

您可以使用 urllib2 发送 json 请求，因此您应该使用它。 [看到这个](https://stackoverflow.com/questions/3290522/urllib2-and-json)。

# asp.net - 远程 Web 服务器无法通过我的 ASP.NET 4 应用程序发送电子邮件

> ID：15674578
> 
> 赞同：0
> 
> 时间：2013-03-28T04:59:31.217
> 
> 标签：asp.net, smtpclient

我的网站有一些功能可以从某些角度向用户发送电子邮件。我已经做到了。当我从 Visual Studio 或我的本地 IIS 7 服务器（我配置了我的 PC）运行此应用程序时，我的方法可以成功发送电子邮件。但远程在线网络服务器无法发送电子邮件。请给我一些提示，我该如何解决这个问题。我已经给了谷歌很多时间，但没有找到这个解决方案。我的代码

```
const string fromAddress = "ejobsbdinfo@gmail.com";
const string fromPassword = "password";
string toAddress = account.Email;
string subject = "subject";
string body = "mail Body";
var smtp = new System.Net.Mail.SmtpClient();
{
    smtp.Host = "smtp.gmail.com";
    smtp.Port = 587;
    smtp.EnableSsl = true;
    smtp.DeliveryMethod = System.Net.Mail.SmtpDeliveryMethod.Network;
    smtp.Credentials = new NetworkCredential(fromAddress, fromPassword);
    smtp.Timeout = 20000;
}
smtp.Send(fromAddress, toAddress, subject, body); 
```

给我一些指导，我该如何解决这个问题。

# javascript - Javascript 变量在 Backbone 中显示为未定义

> ID：15674583
> 
> 赞同：1
> 
> 时间：2013-03-28T05:00:07.087
> 
> 标签：javascript, backbone.js

在我的页面顶部，我获取了一个隐藏输入字段的值，将其存储为一个变量，然后尝试在我的 Backbone 代码中使用它。但是，该值显示为未定义。如何先获取字段的值，然后初始化我的主干应用程序？

```
<script>
$(document).ready(function(){

    var whitedealsToken = $('#usertoken').val();
    console.log(whitedealsToken)

    WhiteDeals.initialize();

});
</script> 
```

**编辑：下面的完整骨干代码**

```
window.WhiteDeals = {
  Models: {},
  Collections: {},
  Views: {},
  Routers: {},
  initialize: function() {
    new WhiteDeals.Routers.Deals();
    if (!Backbone.history.started) {
        Backbone.history.start();
        Backbone.history.started = true;
    }
  }
};

WhiteDeals.Routers.Deals = Backbone.Router.extend({

 routes: {
            "":   "index"
     },

     index: function() {
       var deals = new WhiteDeals.Collections.Deals();
       var dealsview = new WhiteDeals.Views.DealsIndex({
        el: $('#container')
       });
     }

});

WhiteDeals.Collections.Deals = Backbone.Collection.extend({

  model: WhiteDeals.Models.Deal,
  url: 'http://lvh.me:3000/api/v1/special_deals?access_token=' + whitedealsToken,
  parse: function(response) {
  return response.results;
  },
  // Overwrite the sync method to pass over the Same Origin Policy
  sync: function(method, model, options) {
     var that = this;
     var params = _.extend({
         type: 'GET',
         dataType: 'jsonp',
         url: that.url,
         processData: false
     }, options);

    return $.ajax(params);
  }

 }); // End Collection 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:12:12.227

在函数中声明变量时，它仅在本地范围内可用。因此，在该功能之外它不存在。

查看此链接： http: [//msdn.microsoft.com/en-us/library/ie/bzt2dkta (v=vs.94).aspx](http://msdn.microsoft.com/en-us/library/ie/bzt2dkta(v=vs.94).aspx)

您可以改为将其设为全局：

```
whitedealsToken = $('#usertoken').val();  // no var keyword 
```

或者使它成为其他一些全局对象的属性：

```
WhiteDeals.whitedealsToken = $('#usertoken').val(); 
```

或者将它传递到您的`initialize`方法中并执行以下操作：

```
var whitedealsToken = $('#usertoken').val();
console.log(whitedealsToken)

WhiteDeals.initialize(whitedealsToken); 
```

最后一个本身并不能解决它，您必须做一些更多的工作才能在某个时候将令牌传递到实例化的集合中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T07:02:25.690

您`whitedealsToken`在扩展调用中引用，该调用基本上在脚本运行后立即执行。因为`whitedealsToken`直到 $(document).ready 才真正被赋值，所以它在你试图使用它的地方是未定义的。在为相关变量赋值*后，*您需要将 .extend 调用*放在*同一个 $(document).ready 块中。

# c - 用于高级三角函数的 C 库？

> ID：15674589
> 
> 赞同：2
> 
> 时间：2013-03-28T05:00:36.447
> 
> 标签：c, static-libraries, trigonometry

我正在寻找一个包含以下内容的库：

*   找到两个圆之间的交点
*   找到点和圆之间的切线
*   找到两个圆之间的切线

像这样的东西。我已经完成了研究并找到了答案，但是这些东西必须有一个库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:34:44.177

**C89**包含一个名为的头文件`<math.h>`，其中包含计算三角函数（`sin()`、`cos()`、`tan()`、`asin()`、和）和双曲函数（、、`acos()`、和）的库函数，这可能对您有所帮助。但据我所知，没有标准的 C 函数可以直接满足您的需求。您要么必须借助上述函数创建自己的函数，要么依赖 Python、MATLAB 或 Mathematica 等语言，其中大多数数学函数已经在标准库中实现。`atan()``atan2()``sinh()``cosh()``tanh()``asinh()``acosh()``atanh()`

**C99**还在头文件`<complex.h>`中添加了函数，通过引入新关键字 对复数（`csin()`、`ccos()`、`ctan()`等）执行三角函数`_Complex`。

**GNU 科学库 (GSL)**是 C 的数值库，其中包含执行各种数学运算的函数 。

# java - 以随机的唯一顺序调用方法？

> ID：15674592
> 
> 赞同：0
> 
> 时间：2013-03-28T05:01:17.730
> 
> 标签：java, random, unique, method-call

所以我希望随机化调用某些方法的方式，以便每个实例只调用一次，并且调用每个方法。

所以说一个实例，它们按顺序调用：

方法2 方法4 方法3 方法1

但在下一个实例中，它们以不同的顺序调用：

方法3 方法2 方法1 方法4

我必须随机化顺序的代码如下所示：

```
public void randomCalls(){
    int[] order = new int[4];

    for(int i=0; i<order.length; i++){
        order[i]=nextNumber(order);
    }
}

public int nextNumber(int[] array){
    Random r = new Random();
    int x = r.nextInt();
    for(int i=0; i<array.length; i++){
        if(arrayHasNumber(array,x)){
            x = nextNumber(array);
        }
    }
    return x;
}

public boolean arrayHasNumber(int[] array, int x){
    for(int i=0;i<array.length;i++){
        if(array[i]==x){
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T05:08:28.673

根据@Aurand 的建议，您可以有一个将调用您的方法的开关和一个`List<Integer>`包含您要调用的方法的索引的开关，然后使用[`Collections.shuffle`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)并调用`switch`您的方法来打乱列表元素。代码示例：

```
final int METHODS_QUANTITY = 4;
List<Integer> lstIndexes = new ArrayList<Integer>();
for(int i = 1; i <= METHODS_QUANTITY; i++) {
    lstIndexes.add(i);
}
//you can change the condition for the number of times you want to execute it
while(true) {
    Collections.shuffle(lstIndexes);
    for(Integer index : lstIndexes) {
        switch(index) {
            case 1: method1(); break;
            case 2: method2(); break;
            case 3: method3(); break;
            case 4: method4(); break;
        }
    }
} 
```

尽管如此，问题仍然存在：为什么在现实世界的应用程序中需要这个？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T05:06:04.323

就像是

```
LinkedList methods
methods.add(1)
methods.add(2)
....

for(i=0; i<methods.size;i++)
r = random.next(methods.size)
switch(methods.get(r)) {
case 1: method1()
case 2: method2()
...
methods.remove(methods.get(r) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T05:06:20.793

我的建议是在**初始化**`ArrayList`期间在所有方法名称中添加一个 & 。

 **然后使用获取一个随机数`random(list.size())`并将该元素从`ArrayList`.

使用一个`switch`案例，无论弹出什么方法名称，调用该方法。

继续这样做，直到列表变空。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T05:05:37.183

可能您必须将状态（进行调用的顺序）保留在内部变量或数组中（以防您想拥有所有这些状态）。然后调整您的呼叫站点以使用此状态变量。**

# python - 使用 django 表单从 url 上传 csv 文件

> ID：15674601
> 
> 赞同：0
> 
> 时间：2013-03-28T05:02:35.870
> 
> 标签：python, django, post, file-upload

所以我正在尝试通过 POST 上传 csv 文件并将其保存到变量中。我已经查看了关于文件上传的 django[文档](https://docs.djangoproject.com/en/dev/topics/http/file-uploads/)。我只是不明白表格的用途？在这种情况下的目的是什么？

他们使用带有表单的示例：

```
from django import forms
from django.http import HttpResponseRedirect
from django.shortcuts import render_to_response

# Imaginary function to handle an uploaded file.
from somewhere import handle_uploaded_file

class UploadFileForm(forms.Form):
    title = forms.CharField(max_length=50)
    file  = forms.FileField()

def upload_file(request):
    if request.method == 'POST':
        form = UploadFileForm(request.POST, request.FILES)
        if form.is_valid():
            handle_uploaded_file(request.FILES['file'])
            return HttpResponseRedirect('/success/url/')
    else:
        form = UploadFileForm()
    return render_to_response('upload.html', {'form': form}) 
```

上传html：

```
<form enctype="multipart/form-data" action="/upload/" name="test" method="post">
    <input id="file" type="file" name="test" />
    <input id="signUpSubmit" type="submit" value="Submit">
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T07:19:24.983

模型.py

```
from django.db import models

class Upload(models.Model):
    name = models.CharField(max_length=100)
    file = models.FileField(upload_to="images") 
```

表格.py

```
from django import forms
from app_name.models import Upload

class UploadForm(forms.ModelForm):
    class Meta:
        model = Upload 
```

视图.py

```
def upload_file(request):
    if request.method == 'POST':
        form = UploadForm(request.POST, request.FILES)
        if form.is_valid():
            form.save()
            return HttpResponseRedirect('/success/url/')
    else:
        form = UploadFileForm()
    return render_to_response('upload.html', {'form': form}) 
```

上传.html

```
<form enctype="multipart/form-data" action="/upload/" name="test" method="post">
    {% csrf_token %}
    {{form.as_p}}
    <input id="signUpSubmit" type="submit" value="Submit">
</form> 
```

# mysql-python - 无法在 Python 3.2.3 中使用 MySQLdb 运行单个 MySQLdb 执行

> ID：15674602
> 
> 赞同：0
> 
> 时间：2013-03-28T05:02:40.633
> 
> 标签：mysql-python

我要对 python 3.2.3 发疯了

你觉得下面的陈述有问题吗？

```
cur.execute('''SELECT hits FROM counters WHERE url = ?''', (page,)) 
data = cur.fetchone() 
```

因为正如您通过访问我的网页[http://superhost.gr](http://superhost.gr)所看到的，它会产生错误，我不知道为什么。

我正在使用 MySQLdb。

我正在使用“？” 或“%s”；后者曾经在 python 2.6 中完美地工作，但在 python 3.2.3 中却没有

这两个命令在 python 3.2.3 中都失败了

```
cur.execute('''SELECT hits FROM counters WHERE url = ?''', (page,)) 

cur.execute('''SELECT hits FROM counters WHERE url = %s''', (page,)) 
```

知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T04:24:21.133

我从未在 python 3k 上尝试过 MySQLdb。您可以阅读[开发博客](http://mysql-python.blogspot.com/2012/09/a-brief-history-of-mysqldb.html)：

> 现在比以往任何时候都更需要 Python 3 兼容性。我以为我可以在 1.2.4 中做到这一点，但我不得不牺牲对 Python < 2.7 的兼容性。所以 MySQLdb-1.2.4 将是一个错误修复版本并且完全兼容 Python 2.7（并且应该兼容 Python 2.8），并且很快就会有一个需要 Python 2.7 或更新版本并与 Python 3 兼容的 1.3.0。

# javascript - 递归 JavaScript 函数正在丢失返回值

> ID：15674603
> 
> 赞同：6
> 
> 时间：2013-03-28T05:02:50.093
> 
> 标签：javascript, json, recursion, nested

我想在嵌套的 JSON 对象中搜索字符串。如果在对象中找到字符串，我需要返回该对象。

我正在使用递归函数来实现这一点。问题是，该函数一直递归到结束并且不返回找到的对象。

[请在 jsfiddle 中查看整个代码](http://jsfiddle.net/Xh6FE/)

```
function search(obj, name) {
    console.log(obj["name"], ",", name, obj["name"] == name);

    if (obj["name"] == name) {
        return obj; //NOT RETURNING HERE
    } 
    if (obj.children || obj._children) {
        var ch = obj.children || obj._children;
        //console.log(ch);
        ch.forEach(function(val) {
            search(val, name)
        });
    }
    return -1;
}

search(myJson, "VM10-Proc4") 
```

我不确定出了什么问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T05:15:46.803

当它找到匹配的孩子时，您需要停止循环遍历孩子。

```
function search(obj, name) {

    console.log(obj.name, ",", name, obj.name == name);

    if (obj.name == name) {
        return obj;
    }
    if (obj.children || obj._children) {
        var ch = obj.children || obj._children;
        for (var i = 0; i < ch.length; i++) {
            var found = search(ch[i], name);
            if (found) {
                return found;
            }
        }
    }
    return false;
} 
```

[小提琴演示](http://jsfiddle.net/Xh6FE/2/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T05:14:57.100

正确的返回值在递归函数调用链中丢失了。找到正确的值后，从该点开始进行的任何其他搜索都将返回不正确的值。

处理此问题的几种方法：

**1.取消搜索**

当找到正确的值时，立即将其返回到递归堆栈，不再搜索当前数组或嵌套数组。换句话说，取消其余的搜索。

@Barmer 的回答就是一个例子。他的代码的关键部分是使用`for`循环而不是`each`遍历数组的方法，因为中断循环要容易得多`for`。

**2\. 将值存储在安全的地方**

找到正确的值后，将其存储在安全的地方，让其余的搜索继续，并在初始函数调用完成后访问该值。最简单的方法是将正确的值存储在全局变量中，但这不是一个好习惯，因为它违反了函数的封装。

@shyam 的回答提供了一个更简洁的解决方案：将对全局变量的引用作为函数参数传递，在找到正确值时设置参数，然后在初始函数调用完成后访问全局变量。

**在两者之间进行选择**

通俗地说，该函数的预期逻辑可以总结如下：当你找到你要找的东西时，停下来，并立即告诉我它是什么。继续搜索的唯一原因是需要找到多条数据。我假设这里不是这种情况。

在这两种方法中，#2 是一种快速修复的解决方法，应该可以正常工作，但会进一步混淆任何试图理解函数预期逻辑的人。如果只寻找已经找到的单条数据，为什么还要继续搜索呢？

#1 是对函数的重构，使其行为与预期逻辑更加一致，这将使函数更易于理解。该函数在找到所需内容时停止搜索。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-14T19:59:40.243

我知道这是一篇旧帖子，但我可以看到 2 个问题：

1）递归调用没有返回调用堆栈的结果，即

```
search(val, name) 
```

应该

```
return search(val, name) 
```

2) 看起来您正在使用[array.forEach()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)。该文档指出：

> 除了抛出异常之外，没有其他方法可以停止或中断 forEach() 循环。如果您需要这种行为，那么 forEach() 方法是错误的工具。请改用普通循环。如果您正在测试谓词的数组元素并且需要布尔返回值，则可以使用 every() 或 some() 代替。如果可用，新方法 find() 或 findIndex() 也可用于在真谓词上提前终止。

这意味着，实际上，当您找到要查找的结果时，您希望将其发送回调用堆栈。使用 array.forEach 将继续递归地查看层次结构并返回所有值，而不仅仅是您感兴趣的值。因此最后返回的值可能是您不期望的值，例如 undefined！因此使用不同的迭代方法，即

```
 for (var i = 0; i < ch.length; i++) {
        var val = ch[i];
        return search(val, name, ret);
    } 
```

接受的答案确实会为您提供部分答案，但没有解释原因。因此这个答案

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T05:19:02.977

由于您正在递归，因此返回可能嵌套得太深而无法获得有意义的结果。相反，您可以尝试传递一个额外的参数来收集结果。

```
function search(obj, name, ret) {
  console.log(obj["name"], ",", name, obj["name"] == name);

  if (obj["name"] == name) {
    ret.push(obj);
    return
  }
  if (obj.children || obj._children) {
    var ch = obj.children || obj._children;
    ch.forEach(function(val) {
      search(val, name, ret);
    });
  }
}

var result = [];
search(myJson, "VM10-Proc4", result) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-27T06:02:50.097

这是使用[对象扫描的解决方案](https://github.com/blackflux/object-scan)

```
// const objectScan = require('object-scan');

const myJson = {"name":"UCS - San Jose","type":"Minor","children":[{"name":"VM1","type":"Clear","children":[{"name":"VM1-Proc1","type":"Clear","children":[{"name":"VM1-Proc1-child1","type":"Clear"}]},{"name":"VM1-Proc2","type":"Clear"},{"name":"VM1-Proc3","type":"Clear"},{"name":"VM1-Proc4","type":"Clear"},{"name":"VM1-Proc5","type":"Clear"},{"name":"VM1-Proc6","type":"Clear"},{"name":"VM1-Proc7","type":"Clear"},{"name":"VM1-Proc8","type":"Clear"},{"name":"VM1-Proc9","type":"Clear"},{"name":"VM1-Proc10","type":"Clear"}]},{"name":"VM2","type":"Clear","children":[{"name":"VM2-Proc1","type":"Clear"},{"name":"VM2-Proc2","type":"Clear"},{"name":"VM2-Proc3","type":"Clear"},{"name":"VM2-Proc4","type":"Clear"},{"name":"VM2-Proc5","type":"Clear"},{"name":"VM2-Proc6","type":"Clear"},{"name":"VM2-Proc7","type":"Clear"},{"name":"VM2-Proc8","type":"Clear"},{"name":"VM2-Proc9","type":"Clear"},{"name":"VM2-Proc10","type":"Clear"}]},{"name":"VM3","type":"Clear","children":[{"name":"VM3-Proc1","type":"Clear"},{"name":"VM3-Proc2","type":"Clear"},{"name":"VM3-Proc3","type":"Clear"},{"name":"VM3-Proc4","type":"Clear"},{"name":"VM3-Proc5","type":"Clear"},{"name":"VM3-Proc6","type":"Clear"},{"name":"VM3-Proc7","type":"Clear"},{"name":"VM3-Proc8","type":"Clear"},{"name":"VM3-Proc9","type":"Clear"},{"name":"VM3-Proc10","type":"Clear"}]},{"name":"VM4","type":"Minor","children":[{"name":"VM4-Proc1","type":"Clear"},{"name":"VM4-Proc2","type":"Clear"},{"name":"VM4-Proc3","type":"Minor"},{"name":"VM4-Proc4","type":"Clear"},{"name":"VM4-Proc5","type":"Clear"},{"name":"VM4-Proc6","type":"Minor"},{"name":"VM4-Proc7","type":"Clear"},{"name":"VM4-Proc8","type":"Clear"},{"name":"VM4-Proc9","type":"Clear"},{"name":"VM4-Proc10","type":"Clear"}]},{"name":"VM5","type":"Clear","children":[{"name":"VM5-Proc1","type":"Clear"},{"name":"VM5-Proc2","type":"Clear"},{"name":"VM5-Proc3","type":"Clear"},{"name":"VM5-Proc4","type":"Clear"},{"name":"VM5-Proc5","type":"Clear"},{"name":"VM5-Proc6","type":"Clear"},{"name":"VM5-Proc7","type":"Clear"},{"name":"VM5-Proc8","type":"Clear"},{"name":"VM5-Proc9","type":"Clear"},{"name":"VM5-Proc10","type":"Clear"}]},{"name":"VM6","type":"Minor","children":[{"name":"VM6-Proc1","type":"Clear"},{"name":"VM6-Proc2","type":"Clear"},{"name":"VM6-Proc3","type":"Minor"},{"name":"VM6-Proc4","type":"Clear"},{"name":"VM6-Proc5","type":"Clear"},{"name":"VM6-Proc6","type":"Clear"},{"name":"VM6-Proc7","type":"Minor"},{"name":"VM6-Proc8","type":"Clear"},{"name":"VM6-Proc9","type":"Clear"},{"name":"VM6-Proc10","type":"Clear"}]},{"name":"VM7","type":"Clear","children":[{"name":"VM7-Proc1","type":"Clear"},{"name":"VM7-Proc2","type":"Clear"},{"name":"VM7-Proc3","type":"Clear"},{"name":"VM7-Proc4","type":"Clear"},{"name":"VM7-Proc5","type":"Clear"},{"name":"VM7-Proc6","type":"Clear"},{"name":"VM7-Proc7","type":"Clear"},{"name":"VM7-Proc8","type":"Clear"},{"name":"VM7-Proc9","type":"Clear"},{"name":"VM7-Proc10","type":"Clear"}]},{"name":"VM8","type":"Clear","children":[{"name":"VM8-Proc1","type":"Clear"},{"name":"VM8-Proc2","type":"Clear"},{"name":"VM8-Proc3","type":"Clear"},{"name":"VM8-Proc4","type":"Clear"},{"name":"VM8-Proc5","type":"Clear"},{"name":"VM8-Proc6","type":"Clear"},{"name":"VM8-Proc7","type":"Clear"},{"name":"VM8-Proc8","type":"Clear"},{"name":"VM8-Proc9","type":"Clear"},{"name":"VM8-Proc10","type":"Clear"}]},{"name":"VM9","type":"Clear","children":[{"name":"VM9-Proc1","type":"Clear"},{"name":"VM9-Proc2","type":"Clear"},{"name":"VM9-Proc3","type":"Clear"},{"name":"VM9-Proc4","type":"Clear"},{"name":"VM9-Proc5","type":"Clear"},{"name":"VM9-Proc6","type":"Clear"},{"name":"VM9-Proc7","type":"Clear"},{"name":"VM9-Proc8","type":"Clear"},{"name":"VM9-Proc9","type":"Clear"},{"name":"VM9-Proc10","type":"Clear"}]},{"name":"VM10","type":"Clear","children":[{"name":"VM10-Proc1","type":"Clear"},{"name":"VM10-Proc2","type":"Clear"},{"name":"VM10-Proc3","type":"Clear"},{"name":"VM10-Proc4","type":"Clear"},{"name":"VM10-Proc5","type":"Clear"},{"name":"VM10-Proc6","type":"Clear"},{"name":"VM10-Proc7","type":"Clear"},{"name":"VM10-Proc8","type":"Clear"},{"name":"VM10-Proc9","type":"Clear"},{"name":"VM10-Proc10","type":"Clear"}]}]};

const search = (obj, name) => objectScan(['**.name'], {
  rtn: 'parent',
  abort: true,
  filterFn: ({ value }) => value === name
})(obj);

console.log(search(myJson, 'VM10-Proc4'));
// => { name: 'VM10-Proc4', type: 'Clear' }
```

```
.as-console-wrapper {max-height: 100% !important; top: 0}
```

```
<script src="https://bundle.run/object-scan@13.7.1"></script>
```

*免责声明*：我是[对象扫描的作者](https://www.npmjs.com/package/object-scan)

# java - 计算斐波那契算法中的加法

> ID：15674604
> 
> 赞同：0
> 
> 时间：2013-03-28T05:02:56.133
> 
> 标签：java, algorithm

我有两种算法都能正常工作。这两种算法都是斐波那契算法，它将在 n 处找到斐波那契数，用户指定 n。我有三个方法：其中两个返回 n 处的斐波那契数，最后一个方法执行这两个方法，同时以表格形式显示所有斐波那契数，一列对应于代码中执行了多少次 ADDITION。

我已经声明了全局计数器 recAdd 和 itAdd，它们分别表示在每个算法中添加的行。这些值会在每次执行后重置我的测试工具，但我没有在这里展示。

```
public static long recFib(int n){ //Recursive Fibonacci Algorithm
    if( n <= 0){
        return 0;
    }
    if(n == 1){
        return 1;
    }
    else if(n == 2){
        return 1;
    }
    else{
        recAdd++;                               //Counts number of lines added.
        return recFib(n-1) + recFib(n-2);   //Recurisvely adds fibonnachi numbers. Starts with user's input n. Method is called repeatedly until n is less than 2.
    }
}

public static long itFib(int n){ //Iterative Fibonacci Algorithm
    long x, y, z;

    if(n == 0){
        return 0;
    }
    else{
        x = 1;
        y = 1;

        for(int i = 3; i <=n; i++){
            z = x+y;        //z is equal to the addition of x and y, which serve as f(n-1) + f(n-2).
            x = y;      //x is shifted to the next fibonacci number, previously known as y.
            y = z;      //y is set equal to z, which was the new value created by the old y and the old x.
            itAdd++;        //counts how many times addition has occured.
        }
    }
    return y;
}   

public static void doTheyMatch(int n){

    System.out.printf("%s %15s %15s %15s %15s", "i", "Recursive", "recAddCount", "Iterative", "itAddCount\n\n"); //Tab header

    for(int i = 0; i <= n; i++){
    System.out.printf("%d %12d %12d %12d %12d\n", i, recFib(i), recAdd, itFib(i), itAdd);       
    }

    System.out.printf("%s %15s %15s %15s %15s", "\ni", "Recursive", "recAddCount", "Iterative", "itAddCount\n"); //Repeat for quick referencing
} 
```

输出在这里（我在这些文本框中发布输出时遇到问题=/）：http: [//i.imgur.com/HGlcZSn.png](http://i.imgur.com/HGlcZSn.png)

我相信我的加法计数器在“doTheyMatch()”方法期间关闭这么多的原因是因为执行此方法的循环。（该方法循环 n 次，当它循环时，Iterative 和 Recursion 方法在它们自己的方法中进行迭代）。我想不出另一种方法来计算添加的行数。有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:15:01.940

那是因为你没有在 doTheyMatch 函数上重置你的加法计数器

应该做类似的事情：

```
System.out.printf("%d %12d %12d %12d %12d\n", i, recFib(i), recAdd, itFib(i), itAdd);

// reset counters
recAdd = 0;
itAdd = 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:16:51.453

您在这里尝试做的问题是，当您递归调用函数时，数字越大，调用函数的次数就越多。您的数字为 0 或 1 的可能性仅为 1，因此该函数被多次调用。您需要做的是将`recAdd++;`语句放在这些 if 块中：

```
if( n <= 0){
    return 0;
}
if(n == 1){
    return 1;
}
else if(n == 2){
    return 1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T05:17:22.980

这是因为使用递归，方法调用分支，并且在递归过程中您多次调用该方法。这意味着它以比迭代更快的速度累加。尝试在纸上为较小的数字绘制一些方法调用并跟踪您的 itAdd 和 recAdd 变量，您将明白我的意思。希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T05:39:50.500

不确定这是否对您有用，但如果您试图找到某个数字的斐波那契，`n`您可以使用公式`F(n) = (k^n-p^n)/sqrt(5)`，其中`n`是迭代次数或序列中的特定数字，`k = (1+sqrt(5))/2`并且`p = (1-sqrt(5))/2`

# spring - bean创建后spring bean的生命周期方法

> ID：15674605
> 
> 赞同：0
> 
> 时间：2013-03-28T05:03:03.560
> 
> 标签：spring

是否有任何 bean 的生命周期方法在创建 bean 后被调用。

我不想使用初始化或销毁bean的回调方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:06:55.437

如果您`@PostConstruct`在 bean 类的任何公共方法上添加注释，Spring 将在创建 bean 并注入其所有依赖项后调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T10:39:07.263

是的！有

```
<bean id="personDet" class="com.beans.PersonDet" init-method="yourInitMyBean()"> 
```

每个 bean 定义都有一个属性，即 init-method

PersonDet 类中的方法 yourInitMyBean() 将在创建 bean 时首次加载，并且永远不会再次调用

同样，bean定义也有destroy-method属性

```
<bean id="personDet" class="com.beans.PersonDet" destroy-method="destroyBean()"> 
```

只有当您尝试关闭应用程序或关闭 beanFactory 时，ApplicationContext 调用 close() 方法时才会调用方法 destroyBean()。

您可以将两个属性按顺序测试..

希望能帮助到你。

# c# - 将列添加到 DataTable 并将列向右移动

> ID：15674607
> 
> 赞同：1
> 
> 时间：2013-03-28T05:03:18.577
> 
> 标签：c#, asp.net, datatable

我有一个包含 2 列的数据表。我想在开头插入另一列，并将这两列向右移动 1。

```
 DataTable dtCurrentTable = (DataTable)ViewState["CurrentTable"]; 
```

任何想法我怎么能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T05:06:10.547

试试这个。

```
DataColumn column = dtCurrentTable.Columns.Add("Column Name", typeof(<<The data type of your column>>));
column.SetOrdinal(0);// to put the column in position 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T05:08:06.650

做这样的事>>

```
DataTable workTable = new DataTable("Customers");

    DataColumn workCol = workTable.Columns.Add("CustID", typeof(Int32));
    workCol.AllowDBNull = false;
    workCol.Unique = true;

    workTable.Columns.Add("CustLName", typeof(String));
    workTable.Columns.Add("CustFName", typeof(String));
    workTable.Columns.Add("Purchases", typeof(Double)); 
```

希望它有帮助。

# c++ - 在 C++ 中将长字符串输出到文件

> ID：15674610
> 
> 赞同：0
> 
> 时间：2013-03-28T05:03:28.437
> 
> 标签：c++, file-io

我觉得这是一个非常简单的问题，并且想知道是否有我不知道的干净解决方案。我基本上有一些输出，我想将它嵌套到我生成的 html 文件中。html 文件有静态标题，所以我只是要把那个 html 代码变成一个字符串并首先输出标题，然后是数据。

问题是标题有点长，我必须删除所有间距才能将其放入字符串中而不会出错。有没有一种简单的方法可以做到这一点，我没有看到？

例子：

```
ofstream write;
write.open("myHTML.html");
//errors below because there is spacing in the string
string header = "<html>
                 <HEAD><TITLE>Shortest path from Panama to Guatemala</TITLE></HEAD>
                 etc... alot more heading stuff";
write << header;
//data is written after this 
```

我能想到的唯一解决方案是将标题放在另一个文件中，将所有内容读入字符串，然后在添加输出之前将其写回 html 文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T05:12:18.180

只需将多个引号括起来的字符串一个接一个地放置。编译器将为您连接它们。

```
string header = "<html>"
                "<HEAD><TITLE>Shortest path from Panama to Guatemala</TITLE></HEAD>"
                "etc... alot more heading stuff"; 
```

如果你想要换行符，那么将它们嵌入到字符串中。

```
string header = "<html>\n"
                "<HEAD><TITLE>Shortest path from Panama to Guatemala</TITLE></HEAD>\n"
                "etc... alot more heading stuff\n"; 
```

# html - 简单的 CSS 技巧 - 有可能吗？

> ID：15674611
> 
> 赞同：4
> 
> 时间：2013-03-28T05:03:29.050
> 
> 标签：html, css

我想知道这是否可能：我`id`在 css 中以这种形式定义。

```
#close{
  font-size:11px;
  text-decoration: underline;
}

#close:hover{
  cursor: pointer;
} 
```

但在这里我必须重复这个 id 的定义只是为了添加`hover`事件。有没有可能做这样的事情？

```
#close{
  font-size:11px;
  text-decoration: underline;
}:hover{cursor: pointer;} 
```

这将节省一些额外的打字..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T05:09:39.733

你不能在 CSS 中做到这一点，但是你可能会发现像[SASS](http://sass-lang.com/)或[LESS](http://lesscss.org/)这样的 CSS 预处理器很有趣。它们允许您使用下一个选择器，请参见 SASS 中的此示例：

```
.some-div {
    #close {
        font-size:11px;
        text-decoration: underline;

        &:hover {
            cursor: pointer;
        }
    }
} 
```

这编译为：

```
.some-div #close {
    font-size:11px;
    text-decoration: underline;
}
.some-div #close:hover {
    cursor: pointer;
} 
```

请注意，浏览器不支持这些，您可以使用程序来编译它们，从而输出 CSS 以包含在您的网页中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T05:10:59.080

好吧，在这种特殊情况下，您可以

```
#close{
    font-size:11px;
    text-decoration: underline;
    cursor: pointer;
} 
```

因为指针仅在您悬停时才会显示；）

否则我不相信有任何语法技巧，但你可以使用像 SASS 这样的预编译器

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T05:35:32.647

据我所知，没有人在 W3C CSS 工作组从事此工作 (*)

有：

*   预处理器，（见其他答案），
*   有复制粘贴，
*   也许是一个 CSS ZenCoding/Emmett 插件（虽然从未听说过它，而且它不像 Emmett 对于 HTML 那样需要它），
*   可能是一个宏，比如“*去复制我的 CSS 文件的最后一行，结尾是 a `{`，如果前面的行以逗号结尾*”
*   并且有诸如[OOCSS](http://coding.smashingmagazine.com/2011/12/12/an-introduction-to-object-oriented-css-oocss/)、[BEM](http://bem.info/method/)等方法将嵌套选择器的需求降低到 1 或 2 级，这只是伪类，有时还有第二个类（几乎没有 id，只使用类）

(*) 在浏览器 imo 中几乎不需要它。我能想到的 CSS 中的 DRY 东西是类、[:matches() （以前称为 :-vendor-any() ）](https://developer.mozilla.org/en-US/docs/CSS/%3aany)和继承、初始值、“变量”和一个新的[all](http://www.w3.org/TR/css3-cascade/#all-shorthand)属性（所有这些东西只与事实上他们避免了更长的任务，这与你的问题完全无关；））

# javascript - 元素上的 ajax 不适用于附加内容

> ID：15674612
> 
> 赞同：0
> 
> 时间：2013-03-28T05:03:37.453
> 
> 标签：javascript, jquery, ajax, append

我有以下 javascript：

```
<script>
  $(document).ready(function() {
    $('[class^="commentbubble_"]').click(function () { 
      var ID = $(this).attr('class').replace('commentbubble_', '');
        $('.commentform_'+ID).toggle();
        $('#commentsection').masonry( 'reload' );
    });
  });
</script> 
```

它适用于结果的第一页......但对于新附加的，它不起作用。有没有办法确保此功能适用于新附加的内容？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T05:07:54.430

您可以尝试将事件委托给其父级，该父级在页面加载时可用，或者`$(document)`本身带有`.on()`处理程序：

```
$(document).ready(function() {
  $(document).on('click', '[class^="commentbubble_"]', function () { 
      var ID = $(this).attr('class').replace('commentbubble_', '');
      $('.commentform_'+ID).toggle();
      $('#commentsection').masonry( 'reload' );
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:18:52.587

$().ready 仅适用于当前元素

当您附加一个元素时，您需要绑定的是点击事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T05:20:16.887

由于您在加载页面后在 ajax 加载上附加数据，因此您需要使用[.on](http://api.jquery.com/on/)事件处理程序来绑定元素上的任何事件而不是 .click 事件。

语法是：

```
.on( events [, selector ] [, data ], handler(eventObject) ) 
```

所以你的脚本会是这样的：

```
<script>
  $(document).ready(function() {
    $('document).on('click','[class^="commentbubble_"]',function () { 
      var ID = $(this).attr('class').replace('commentbubble_', '');
        $('.commentform_'+ID).toggle();
        $('#commentsection').masonry( 'reload' );
    });
  });
</script> 
```

如需更多参考，请参阅[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-28T05:09:17.213

使用[现场](http://api.jquery.com/live/)

`('[class^="commentbubble_"]').live ('click', function () {`

注意： `live`已弃用，请`on`按照@Jai 的建议使用

# php - 使用 Swift Mailer 时，如何控制文本/纯文本版本中的换行符？

> ID：15674614
> 
> 赞同：3
> 
> 时间：2013-03-28T05:03:58.830
> 
> 标签：php, line-breaks, swiftmailer

我正在使用 Swift Mailer（版本 4.1.7，这对本主题来说无关紧要），我有一个非常基本的问题。

一封“现代”电子邮件通常会重复两次内容——一次是 HTML，大多数人在他们喜欢的基于浏览器的邮件阅读应用程序中阅读，一次是纯文本，供那些使用旧阅读器或简单阅读器的人阅读。在 Swift 中，很容易创建两个版本，如下所示：

```
$message->setBody($plaintextMessage, 'text/plain');
$message->addPart($htmlMessage, 'text/html'); 
```

我遇到的问题是我的纯文本消息（`$plaintextMessage`上面）被分成几行，而忽略`$plaintextMessage`. 如果消息中没有换行符，这是合适的。例如，如果我喂它：

```
$plaintextMessage = 'This is a long-ish line, which we expect to be broken after about 72 characters.  It is a good behavior, appropriate in most instances.'; 
```

然后我得到这个：

```
This is a long-ish line, which we expect to be broken after about 72 cha=
racters.  It is a good behavior, appropriate in most instances. 
```

这很好，可以预期，等等。 *但是*，如果我这样做：

```
$plaintextMessage = implode("\n", array('This is a series',
                                        'of short lines',
                                        'which should not be broken.',
                                        'They include their own',
                                        'newlines, which should be respected',
                                        'and preserved')); 
```

那么消息中已经有完美的换行符了。不幸的是，Swift 似乎忽略了它们并输出：

```
This is a series
of short lines
which should not be broke=
n.
They include their own
newlines, which should be respecte=
d
and preserved 
```

当然，我意识到现代邮件程序会删除额外的换行符和等号，但是拥有纯文本版本的消息的全部意义在于，使用不理解这种语法的旧邮件程序的人应该仍然能够阅读消息没有太多丑陋。

这是 Swift 中的设置吗？到目前为止，我唯一想做的就是将行长设置为非常高的字符数（比我的消息长）作为一种解决方法，从而防止 Swift 进行任何类型的换行。然而，在我看来，Swift 应该在每次发现消息中已经存在换行符时将其字符数重置为零。是否有可能诱发这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-30T21:02:08.820

在计算软包装的行长时，它不尊重文本中现有的硬包装。[去年 Swiftmailer 5.x 上](https://github.com/swiftmailer/swiftmailer/pull/627)的 pull request 改变了这种情况。

# android - 谷歌地图不适用于签名的 APK

> ID：15674619
> 
> 赞同：4
> 
> 时间：2013-03-28T05:04:33.807
> 
> 标签：android, google-maps

好吧，我正在开发一个使用 Google Maps 的 Android 项目。该应用程序使用 Eclipse（调试）运行良好，但是当我在市场上发布该应用程序时，它显示了灰色瓷砖。经过几次搜索，我知道我必须得到使用我用来签署 APK 文件的相同密钥库的地图发布 API KEY。

我做到了，现在地图出现了，但似乎还有另一个问题，我用来获取特定位置地址的功能（通过单击地图）在签名 APK 中不起作用，但它们在调试中运行良好

我应该如何解决这个问题？

注意：我使用的是 Google Maps Android API v1

# mysql - mysql-update 来自另一个表的表

> ID：15674621
> 
> 赞同：1
> 
> 时间：2013-03-28T05:05:02.847
> 
> 标签：mysql, sql, join, sql-update

如果另一个表中的值，我如何更新表。一个说明是这样的

餐桌用品

```
product_name | cat_name | id_cat
Item 1       |  sport   |   
Item 2       |  food    |
Item 3       |  fashion | 
```

表类别

```
id_cat | cat_name  
 1     | sport
 2     | food
 3     | fashion 
```

请给我一个查询或函数如何更新表产品中的字段 id_cat 表类别中的哪个值？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:06:10.273

你可以简单地加入两个表，

```
UPDATE  products a
        INNER JOIN category b
            ON a.cat_name = b.cat_name
SET     a.id_cat = b.id_cat 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/e45ba/1)

`cat_name`为了获得更快的性能，请在两个表的列上添加索引。

# android - 安卓SD卡读取

> ID：15674623
> 
> 赞同：0
> 
> 时间：2013-03-28T05:05:22.653
> 
> 标签：android, textview, sd-card

我在 Android 上有一个应用程序，它在系统启动时启动。有时互联网连接处于搜索模式，我设置了一个计时器来检查连接，如果找到则连接。我为 sd 卡做了同样的事情，因为它也处于准备模式。当系统启动和应用程序启动时，我在从 sd 卡读取文本文件时遇到问题，它从不从 sd 卡读取文本。当我稍后手动启动该应用程序时，它可以工作。这是我读取 sd 卡文件的代码。

```
 if (isSDCardAvailable())
            {
                setTickerText();
            }

    else if(!isSDCardAvailable())
            {
                //pop up message
                Toast toast=Toast.makeText(this, "Preparing SD card..", Toast.LENGTH_LONG);
                toast.show();

                //Run the sd card read process after 30 seconds
                Handler handler = new Handler(); 
                handler.postDelayed(new Runnable() { 
                     public void run() 
                     { 
                         setTickerText();
                     } 
                }, 30000);
            }

 public void setTickerText()
{
    File sdcard = Environment.getExternalStorageDirectory();

    //Get the text file
    File file = new File(sdcard,"TickerText.txt");

    //Read text from file
    StringBuilder text = new StringBuilder();

    try {
        BufferedReader br = new BufferedReader(new FileReader(file));
        String line;

        while ((line = br.readLine()) != null) {
            text.append(line);
            //text.append('\n');
        }
    }
    catch (IOException e) {
        //You'll need to add proper error handling here
    }
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:23:36.497

编译系统启动后，您的应用程序开始读取文件。

所以在此之前你可以这样检查：

```
static public boolean hasStorage(boolean requireWriteAccess) {
    //TODO: After fix the bug,  add "if (VERBOSE)" before logging errors.
    String state = Environment.getExternalStorageState();
    Log.v(TAG, "storage state is " + state);

    if (Environment.MEDIA_MOUNTED.equals(state)) {
        if (requireWriteAccess) {
            boolean writable = checkFsWritable();
            Log.v(TAG, "storage writable is " + writable);
            return writable;
        } else {
            return true;
        }
    } else if (!requireWriteAccess && Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
        return true;
    }
    return false;
} 
```

# c# - C#位图从像素中读取不正确的颜色

> ID：15674626
> 
> 赞同：2
> 
> 时间：2013-03-28T05:05:40.607
> 
> 标签：c#, .net, bitmap, pixel

我正在将 8 位 png 文件读入 C# .net 3.5 中的位图中。当通过诸如paint.net之类的任何普通程序读取时，我的目标是图像上的一个特定像素，该像素是RGB值255,255,255，即白色。但是，当我通过 GetPixel 方法或通过锁定位读取它并以指针方式访问它时，都会产生 62、62、62 或单字节颜色值 62 的结果。所以，我的问题是，为什么我得到 62 而不是 255 的值？

任何见解都会很棒：D。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T08:28:32.703

听起来您的屏幕设置为 16 位色深。这意味着每个像素由 16 位描述：5 个红色，6 个绿色，5 个蓝色，每个通道值的范围从 0 到 31 (2^5-1) 或 63 (2^6-1)。您的白色像素表示为 (31,63,31)，大概会调整为 (62,62,62)。

像 Paint.Net 这样的程序会进行自己的位图处理，并且不依赖于系统的 Bitmap 类，因此它们不依赖于屏幕的颜色深度。

因此，尝试将您的屏幕设置为 32 位色深 - 您的像素将表示为 (255,255,255)。请注意，在 32 位颜色深度中，通常只有 24 位用于颜色通道 - 最后 8 位是 Alpha（透明度）或未使用。

# linq - 如何在 Linq 扩展中对孩子的孩子的值求和

> ID：15674627
> 
> 赞同：1
> 
> 时间：2013-03-28T05:05:43.873
> 
> 标签：linq, c#-4.0, entity-framework-5

我有一个相关表的结构，如下所示：

![在此处输入图像描述](../Images/3f7939af4f45c873d35fa319af313eae.png)

给定 WorkReleaseDetail.WorkReleaseHeaderId，我想使用 Linq 扩展获取按 WorkOrderDetail.ItemId 分组的 WorkOrderDetail.EstimatedQty 的总和。

因为我需要对最低的表进行分组，所以我想我可以。像这样的地方：

`WorkOrderDetail.WorkOrderHeader.WorkReleaseDetail.WorkReleaseHeaderId == id`

但是没有骰子，因为您在 OrderGroupDetails 处停下来，因为它是一个聚合，您过去的唯一选择是 .Sum 等，这是有道理的。

然后我想这样做（应该可以）：

```
var woDtlRepos = new Repository<WorkOrderDetail>();
var workOrdDtl = woDtlRepos.SearchFor(
x => x.WorkOrderHeader.FacilityId == intFacilityId
&& x.WorkOrderHeader.WorkReleaseDetails.WorkOrderHeaderId == intWorkReleaseId);

var workRlsNeeds = workOrdDtl
.GroupBy(group => new
    {
        group.ItemId
    }
)
.Select(result => new 
    { 
        ItemId = result.Key.ItemId,
        TotalQty = result.Sum(a => a.EstimatedQuantity)
    }
); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:26:09.187

啊……顿悟了……使用 .Any()

```
var workOrdDtl = woDtlRepos.SearchFor(
x => x.WorkOrderHeader.FacilityId == intFacilityId
&& x.WorkOrderHeader.WorkReleaseDetails.Any(woRlsHdr => woRlsHdr.WorkReleaseHeaderId ==      intWorkReleaseId)); 
```

# android - 如何在android的布局中制作带圆角的背景图像？

> ID：15674633
> 
> 赞同：2
> 
> 时间：2013-03-28T05:06:10.407
> 
> 标签：android, layout

我正在尝试制作带有圆角的背景图像，以便在布局中进行设置。问题是如何在可绘制 XML 中为圆角设置图像，而不是使用纯色。

```
 <?xml version="1.0" encoding="utf-8"?>
     <shape xmlns:android="http://schemas.android.com/apk/res/android"
      android:shape="rectangle" android:padding="10dp">
      <!-- you can use any color you want I used here gray color-->
      <solid android:color="#ffffff"/> 
       <corners
     android:bottomRightRadius="10dp"
      android:bottomLeftRadius="10dp"
      android:topLeftRadius="10dp"
   android:topRightRadius="10dp"/>
   </shape> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:18:13.683

这对我有用：只需将文件名**round_corners.xml**添加到***drawable***

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
       android:shape="rectangle">
    <gradient android:startColor="@color/lemon" android:endColor="@color/lemon_cream" android:angle="90" />
    <corners android:radius="30dp" />
</shape> 
```

将此添加`XML`到文件中并享受圆角。

# node.js - node-sass 不使用 node / express 编译

> ID：15674639
> 
> 赞同：8
> 
> 时间：2013-03-28T05:06:24.597
> 
> 标签：node.js, express, sass

我正在尝试让 node-sass 与 express 一起工作，但我根本无法让它进行任何编译。这是我的 app.js 文件：

```
var express = require('express')
  , sass = require('node-sass')
  , routes = require('./routes')
  , user = require('./routes/user')
  , http = require('http')
  , path = require('path');

var app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'ejs');
  app.use(sass.middleware({
     src: __dirname + '/public/sass',
     dest: __dirname + '/public/stylesheets', 
     debug: true
  }));
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.cookieParser('your secret here'));
  app.use(express.session());
  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
  app.use(express.errorHandler());
});

app.get('/', routes.index);
app.get('/users', user.list);

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

我有`public/sass`and `public/stylesheets`，但无论`.scss`我在 sass 目录中放置什么文件，都没有编译任何文件。还有什么我需要超越的`node app.js`吗？

我真的快要放弃了，只需安装 sass gem 并保持一个额外的选项卡打开以查看目录。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T06:57:25.977

它和 Stylus 中间件一样令人困惑（它说它的灵感来自于它）。

的文件夹结构`src`应该模仿目标的最终结构*以及*您用来请求 CSS 文件的路径。如果您希望您的 CSS 文件像这样存储：

```
./public/stylesheets/app.css 
```

访问文件的 URL 将是：

```
http://.../stylesheets/app.css 
```

您需要像这样配置中间件：

```
app.use(sass.middleware({
   src:   __dirname + '/public/sass',
   dest:  __dirname + '/public',
   debug: true
})); 
```

您的 SASS 文件夹结构如下：

```
./public/sass/stylesheets/app.scss 
```

我相信它是这样工作的：

*   取 HTTP 请求的路径：`/stylesheets/app.css`
*   要查找 SCSS 文件，请将 URL 路径连接到`src`并替换扩展名：`./public/sass/stylesheets/app.scss`
*   对于目的地，将 URL 路径连接到`dest`：`./public/stylesheets/app.css`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-14T20:13:05.920

尝试使用前缀选项：

```
app.use(sass.middleware({
    src: __dirname + '/public/sass',
    dest: __dirname + '/public', 
    prefix:  '/stylesheets'
    debug: true
})); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-07T18:58:08.867

我在让 node-sass 中间件工作时遇到了类似的问题。我最终放弃并尝试了 [asset-rack](https://github.com/techpines/asset-rack)，直到我开始使用这个fork，我也无法开始工作：[https ://github.com/techpines/asset-rack/pull/76](https://github.com/techpines/asset-rack/pull/76)

对资产机架分支的拉取请求已经存在 11 个月感到沮丧，我最终只编写了自己的名为[Electricity](https://www.npmjs.org/package/electricity)的静态文件中间件，它支持 Sass 以及其他一些不错的功能。

# java - 使用 Java 创建 Android 应用程序的困难

> ID：15674640
> 
> 赞同：0
> 
> 时间：2013-03-28T05:06:27.513
> 
> 标签：java, android, eclipse

我正在学习一些 java 来编写简单的 android 应用程序。目前我正在研究一个温度转换器，如果我没有为我的输入输入一个值，就会遇到问题。

```
else if(tempfrom.equals("Rankine")){

        if(tempto.equals("Fahrenheit")){
            degreesout = degreesin - 459.67;
        }
        else if(tempto.equals("Celsius")){
            degreesout = (degreesin - 491.67)*(5./9.);
        }
        else if(tempto.equals("Kelvin")){
            degreesout = degreesin*(5./9.);
        }
        else{
            degreesout = degreesin;
        }
    }

    else if(degreesin.equals(null)){
        tempto = "Please Enter a Value.";
    }

    TextView answer = (TextView) findViewById(R.id.tvdegreesout);
    TextView units = (TextView)findViewById(R.id.tvUnit);
    units.setText(tempto);
    answer.setText(degreesout.toString() + " degrees"); 
```

Where`tempfrom`和`tempto`是对应于用于转换的温度单位的字符串。基本上，我正在检查 if `degreesin.equals(null)`，其中 degreein 是输入值，然后将字符串设置`tempto`为“请输入值”。然后底部的文本视图将变为“请输入值”。

我不知道我做错了什么，大约两天前我才开始使用java，所以这可能是一些愚蠢的事情：P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:36:12.173

试试这个：

```
Double degreesin = null

if(ettemp != null && ettemp.getText() != null && !ettemp.getText().equals("")){
    degreesin = Double.parseDouble(ettem.getText());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T07:41:34.707

假设您正在像这样设置degreesin值

```
String degreesin = txtDegreesIn.getText().toString(); 
```

你必须检查一个空值，如下所示：

```
if (degreesin.trim().length() == 0){
     // handle an empty input
} 
```

这也将禁止像“”这样的输入。

回答您的评论：

```
Double degreesin = null;
try {
    degreesin = Double.parseDouble(ettemp.getText().toString());
} catch (NumberFormatException nfe){
    // empty/invalid input
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T04:32:33.913

改变你的

`Double degreesin = Double.parseDouble(ettemp.getText().toString());`

到

```
Double degreesin = 0;

if(!ettemp.getText().toString().equals("")){
    degreesin = Double.parseDouble(ettemp.getText().toString());
} 
```

您得到的错误是由将空解析`String`为`Double`. 上面将检查是否为空`String`，并且仅在它不为空时才解析该值。

# iphone - Tapku 日历上标记的日期错误

> ID：15674641
> 
> 赞同：0
> 
> 时间：2013-03-28T05:06:28.097
> 
> 标签：iphone, ios, objective-c, ios4, tapku

我在我的应用程序中使用 Tapku 日历控件。到目前为止，我能够正确使用它。当我尝试在日历上标记日期时出现问题。我有以下需要在日历上标记的日期 - 月份是三月，日期是 26、27、28、30。

现在日历开始显示是从 2 月 26 日到 4 月 4 日，其中 2 月 24 日到 2 月 28 日是上个月的日期，现在说到日历上的标记日期，日期 26、27、28 出现在 2 月以及日历控制框架中的三月。在尝试绘制日历数据时，2 月的 26、27、28 日期首先出现并被标记。这是错误的。我想标记三月的日期。

我尝试更改日历控件的开始日期并将其设置为 3 月开始，但未显示标记。

以下是我正在使用的代码：

```
 NSDate *date = startDate;

int r ;
int i =0;

if([sortedDatesArray count] > 0){  // check if array is not blank

while(YES){

    // int dt = 9;

    NSString *dtStr = [sortedDatesArray objectAtIndex:i];

    r = [dtStr intValue];

    TKDateInformation info = [date dateInformationWithTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
    info.day++;

    if(r + 1 == info.day){

        [dataArray addObject:[NSNumber numberWithBool:YES]];  // stores bool for date value

        if(i < [sortedDatesArray count] - 1)
            i++;
    }
    else{
        [dataArray addObject:[NSNumber numberWithBool:NO]];

    }

    date = [NSDate dateFromDateInformation:info timeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
    if([date compare:end]==NSOrderedDescending) break;

}//while

}//if 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:13:03.793

谢谢Harish，这个问题的解决方案也是检查月份。

# perl - 使用 perl 连接到数据库

> ID：15674642
> 
> 赞同：4
> 
> 时间：2013-03-28T05:06:50.003
> 
> 标签：perl, dbi

我有一个脚本，我在其中连接到数据库并尝试执行 sql 查询。我的代码是这样的

```
use DBI;
$dbh = DBI->connect('Databasename', 'uid','pswd');
my $sth = $dbh->prepare ("select * from Tablename");
$sth->execute();
my @row_ary = $sth->hetshrow_array;
foreach $item (@row_ary)
{
print "$item\n";
} 
```

当我尝试执行此代码时，我收到以下错误消息

```
Can't connect to data source 'Databasename' because I can't work out what driver to use (it doesn't seem to contain a 'dbi:driver:' prefix and the DBI_DRIVER env var is not set) at demo.pl line 2 
```

任何人都可以建议我为什么收到此消息。执行 sql 查询需要做哪些配置。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T05:10:06.297

DBI 很灵活，因为它支持多个数据库服务器（MySQL、Sybase、Oracle 等）。您传递给 DBI->connect 的第一个参数是 DSN（数据源名称），而不是数据库名称。DSN 的格式为：

`dbi:Driver:databasename`

如果您的数据库是 MySQL，您将使用`mysql`驱动程序：

`dbi:mysql:databasename`

这是[有关 DBI 的更多信息](http://search.cpan.org/~timb/DBI/DBI.pm)。

# android - Admob AdListner 无法正常工作

> ID：15674643
> 
> 赞同：0
> 
> 时间：2013-03-28T05:06:54.120
> 
> 标签：android, admob

我正在编写一个代码，其中有人点击广告并返回应用程序，广告应该消失。但广告仍然出现。

我的应用程序没有恢复并再次启动，一次又一次地给 toast msg。

我已经 `android:launchMode="singleInstance"`在清单和
`android:alwaysRetainTaskState="true"`活动部分添加了。

这是我的 mainactivity .java 文件的代码：

```
 public class MainActivity extends Activity implements AdListener{

public static int count=0,dispad=0;
public static LinearLayout lay1;
private static final Class<?>[] NUMBERS = {First.class};
 protected AdView adView;
 View admobAds;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    adView = (AdView)findViewById(R.id.ad);

    Toast toast = Toast.makeText(getApplicationContext(), "Click on the ad 
      to    make it disappear" +
                "", Toast.LENGTH_LONG);
        toast.show();

     adView.loadAd(new AdRequest());
         adView.setAdListener(this);

     lay1=(LinearLayout)this.findViewById(R.id.mainlay);

     admobAds = (View) findViewById(R.id.ad);
     //more code..

    public void onDismissScreen(Ad arg0) {

    lay1.removeView(admobAds);
    dispad=1;
    // TODO Auto-generated method stub

}
    } 
```

xml文件如下：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:tools="http://schemas.android.com/tools"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
  android:orientation="vertical"
   tools:context=".MainActivity"
  android:id="@+id/mainlay" 
   >

   <com.google.ads.AdView

     xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"

    android:id="@+id/ad"
   android:layout_width="fill_parent"
       android:layout_height="wrap_content"

     ads:adUnitId="a1512c9e4ddb675"
     ads:adSize="SMART_BANNER"

   ads:loadAdOnCreate="true"
 />

        // more linear layouts. 
```

显现 ：

```
 <?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.ash"
 android:launchMode="singleInstance"
android:versionCode="2"
android:versionName="1.1" 
android:installLocation="auto"

>

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />
<uses-permission android:name="android.permission.INTERNET"/>
  <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <meta-data android:value="true" android:name="ADMOB_ALLOW_LOCATION_FOR_ADS" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.ashsoft.basiccprogram.MainActivity"
        android:label="@string/app_name" 
         android:alwaysRetainTaskState="true"
        >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

     <activity
        android:name="com.ashsoft.basiccprogram.First"
        android:label="Program code"
    >
        <intent-filter>
            <action android:name="android.intent.action.FIRST" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

<activity android:name="com.google.ads.AdActivity"

   android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|s        mallestScreenSize"/>

</application>

   </manifest> 
```

我不知道我要去哪里错了。

# ios - 您如何确定用户是否偏离了路线？

> ID：15674665
> 
> 赞同：1
> 
> 时间：2013-03-28T05:09:29.840
> 
> 标签：ios, algorithm, map

我正在尝试确定用户是否偏离了给定的路线。例如，在许多 GPS 路线应用模式中，如果您与当前路线偏离太远，应用程序将重新计算路线。

更具体地说，我试图找出给定坐标是否偏离给定一组折线的阈值。

确定这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:30:28.560

Calculate the closest line of that polylines set to the current point, then get distance, that's all. There's only one way, and no "best" way.

# prolog - 堆栈在不应该时自动修改

> ID：15674669
> 
> 赞同：0
> 
> 时间：2013-03-28T05:09:40.887
> 
> 标签：prolog, stack, ocaml, interpreter

我在 OCaml 中实现了一个 Prolog 解释器。我遇到的问题在于主要功能。我实际上是在尝试将我的解释器堆栈存储在函数调用中，并修改此堆栈的副本，​​然后将其传递给来自此特定函数调用的递归调用。当该递归调用报告失败时，该原始函数调用应使用我保持未修改的原始堆栈并进行不同的递归调用（以实现回溯）。

现在，问题来了。当我的意图只是修改临时堆栈时，堆栈和临时堆栈（tempstack）都被修改了。我花了几个小时试图找出问题所在，我很确定就是这样。这是主要功能片段..

```
let rec main stack clauselist counter substitutions variablesinquery answers = 
try
    let currentsubgoal = Queue.top (Stack.top stack) in
     if counter <> List.length clauselist
     then
        let tempstack = Stack.copy stack in
        try
            let unifier = mgu1 currentsubgoal (List.nth clauselist counter) in
            let newsubgoals = 
              match List.nth clauselist counter with
                  Fact(a) -> []
                | Rule(Headbody(a,b)) -> b
            in
            let tempstack = stacknewsubgoals tempstack unifier newsubgoals in
            let tempsubs = match substitutions with
                S(m) -> match unifier with S(n) -> S(m @ n) in
            try
                main tempstack clauselist 0 tempsubs variablesinquery answers
             with BackTrack ->  main stack clauselist (counter + 1) substitutions 
                                               variablesinquery answers
         with NoUnifier -> main stack clauselist (counter + 1) substitutions 
                                        variablesinquery answers
      else raise BackTrack
with Queue.Empty -> 
    let answers = buildanswer substitutions variablesinquery :: answers in 
    raise BackTrack 
```

在 tempstack 上发生的唯一计算是使用另一个函数 (stacknewsubgoals) 将新目标插入其中（注意：堆栈是队列堆栈）。

我尝试将最里面的 try 循环中的 tempstack 替换为堆栈（正在进行主递归调用）。它没有进入无限循环（因为应该一次又一次地未经修改地传递相同的堆栈），而是以 Not_Found 异常终止，该异常又由底部的 Queue.Empty 异常生成。本质上，堆栈底部的队列在绝对不应该为空时会以某种方式变为空。

```
let stacknewsubgoals tempstack unifier newsubgoals =
let tempq = Stack.pop tempstack in
    let subbedq = substituteinqueue tempq unifier (Queue.create()) in
        if (newsubgoals <> []) then
            (Stack.push subbedq tempstack;
            Stack.push (Queue.create()) tempstack;
            initialize (Stack.top tempstack) (substpredicatelist newsubgoals unifier);
            tempstack)
        else
            (Stack.push subbedq tempstack;
            ignore (Queue.pop (Stack.top tempstack));
            tempstack) 
```

您可以在这里清楚地看到，该函数唯一修改的是 tempstack。任何帮助确定为什么作为函数中的参数传递的原始堆栈不会保持不变，我们将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T05:27:21.360

这是需要阅读的大量代码。想到的主要事情是您正在使用两个可变数据结构，一个在另一个内部。你这样做`Stack.copy`，它不会复制里面的队列。因此，如果您在此副本中修改队列，它们也会在原始副本中被修改。

这类问题正是使用不可变数据结构如此令人愉快的原因。

这可能是一个太简单的答案，但也许会有所帮助。

# uml - UML 图——用例图

> ID：15674672
> 
> 赞同：2
> 
> 时间：2013-03-28T05:09:52.687
> 
> 标签：uml, modeling, diagrams

场景：客户走到柜台，让员工选择特定的电影

以下哪一项是正确的？

![http://i.stack.imgur.com/t7G8c.png](../Images/84b0a553fad4b19ffb89de9001bfeaba.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:06:23.230

图 1 和图 3 在语法上不正确（甚至不需要阅读您的案例研究）。您使用的箭头是泛化箭头（即或多或少的继承）。你不能在参与者和用例之间有这个箭头，只能在两个参与者之间或两个用例之间。

图 2 似乎是正确的。用例通过链接与两个参与者相关联。通常，将一名演员设置在左侧，另一名设置在右侧可能意味着左侧的演员是主要的，右侧的演员是次要的。

主要参与者是执行用例的人，而次要参与者参与用例但不执行。因此这里看起来没问题：员工根据客户提供的信息选择电影。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T06:42:54.943

1] 假设：客户和员工作为参与者。电影选择系统 (MSS) 作为外部系统

然后外部系统是电影选择系统，演员要么是客户要么是员工。用例是“选择电影”或“选择电影座位”。演员与用例之间存在一对一的关系，因为演员一次可以选择一部电影，并且在任何给定时间，用例将有一个 MSS 和一个演员。但多名员工可以同时向 MSS 询问多部电影。

客户/员工 (1) -------- (1) [用例：选择电影] (*) ---------> MSS (1)

2] 假设：1 位客户和 1 位员工在场。如果您将员工视为系统本身，那么图表应该是从客户到员工的方向箭头。所以也许它看起来像下面

客户 (1) -------- (1) [用例：选择电影] (1) ---------> 员工 (1) 。

由于客户一次可以选择一部电影。在任何时候，每个用例都可以由一位客户询问任何一位员工来调用。此外，可以要求员工在任何给定时间只选择一部电影。第二张图接近我理解的正确

# php - 如何将 csv 文件从 sql 数据库显示到 php 网页？

> ID：15674674
> 
> 赞同：0
> 
> 时间：2013-03-28T05:10:10.977
> 
> 标签：php, sql-server-2008, opencsv

我正在使用 sql server 2008 开发一个 php 网站。

我有一个附加文档并显示它的功能。

我将附件存储在数据库中。因为我的表格字段是“图像”。

这适用于所有文档。但它不适用于 .csv 文件。

谁能帮我在我的 php 网页上显示 csv 文件？

我在 php 中显示文档的代码如下：

```
 $filename=$doc["DocumentName"];
    $file= $doc["data"];
    if($doc["OLEClassName"]=="image")
    {
     $im = imagecreatefromstring(base64_decode($file));
        if ($im !== false) {
        header('Content-Type: image/jpeg');
        header("Content-Length: ".strlen($file)); 
        imagejpeg($im);
        //imagedestroy($im);
        }
        else {
            echo 'An error occurred.';
        }
    }
    else if($doc["OLEClassName"]=="txt")
    {
        header('Content-Type: text/plain');
        echo base64_decode($file);
    }
    else if($doc["OLEClassName"]=="P" || $doc["OLEClassName"]=="pdf")
    {
        header('Content-Type: application/pdf');
        echo base64_decode($file);
    }
    else if($doc["OLEClassName"]=="docx")
    {
        header('Content-Type:application/vnd.openxmlformats-officedocument.wordprocessingml.document');
        //header('Content-Type: application/octet-stream');
        echo base64_decode($file);
    }
    else if($doc["OLEClassName"]=="xlsx")
    {
        header('Content-Type:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');
        echo base64_decode($file);
    }
    else if($doc["OLEClassName"]=="csv")
    {
        header('Content-Type: text/csv');
        echo base64_decode($file);
    } 
```

此代码适用于其他文档，但不适用于 csv 文件。

谁能帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:21:36.440

如果可能，将其存储在其中一个文件夹中，并将其路径保存在字符串类型字段中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:21:42.567

试试`header('Content-Type: application/csv');`吧。

**编辑**它也可能有助于在标题中包含 Content-Disposition 。

这是我过去使用的一个示例

```
header('Content-Disposition: inline; filename= ' . basename($str_filename)); 
```

# solr - 获取列的每个值的一个结果

> ID：15674675
> 
> 赞同：1
> 
> 时间：2013-03-28T05:10:13.153
> 
> 标签：solr

我想执行搜索，以便对于列的最高值，我可以获得“n”个结果。

例如，将国家视为一个选项，其可能值为 1\. 美国（200 个输入） 2\. 英国（180 个输入） 3\. 加拿大（160 个输入） 4\. 阿根廷（140 个输入） 5\. 巴西（120 个输入）

我想要前 3 个国家，即美国、英国、加拿大，我可以只使用单个查询为每个国家/地区获得一行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T08:22:17.567

检查[Solr 字段折叠](http://wiki.apache.org/solr/FieldCollapsing)（分组）。

用于`group=true&group.field=country`在国家/地区字段上启用分组

这将帮助您在单个值字段（例如国家/地区）上进行分组，并限制组数 ( `rows`) 以及每组 ( ) 的结果数，`group.limit`从而允许扩展。

完整的[参数列表](http://wiki.apache.org/solr/FieldCollapsing#Request_Parameters)

# compilation - 如何使用 DDK 编译原生应用程序？

> ID：15674677
> 
> 赞同：-1
> 
> 时间：2013-03-28T05:10:35.767
> 
> 标签：compilation, native, wdk

我尝试使用 DDK 编译本机应用程序，但出现“不知道如何制作 '\nt.lib'”错误。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:27:36.107

不要这样做，不要尝试。结果将是未定义的。DDK 是针对驱动程序的，而不是针对应用程序的。

# r - 与稳定版本一起运行 R 的开发版本

> ID：15674683
> 
> 赞同：7
> 
> 时间：2013-03-28T05:11:13.063
> 
> 标签：r, ubuntu

我想在 Ubuntu 下用 R-devel 检查一个 R 包。

我根据 [http://www.personal.psu.edu/mar36/blogs/the_ubuntu_r_blog/2012/08/installing-the-development-version-of-r-on-ubuntu-alongside-the-current安装了 R-devel -version-of-r.html](http://www.personal.psu.edu/mar36/blogs/the_ubuntu_r_blog/2012/08/installing-the-development-version-of-r-on-ubuntu-alongside-the-current-version-of-r.html)

我找到了 Mac OS 的指南。 [http://www.nicebread.de/how-to-check-your-package-with-r-devel/](http://www.nicebread.de/how-to-check-your-package-with-r-devel/)

我试过`R CMD check pkg --as-cran`了，但它仍然是用于检查的稳定 R 版本。如何让R-devel用来检查？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T06:21:06.120

可能您忽略了链接到的博客文章中提到的最后一步。您需要更改一些环境变量以指向新的 R 开发版本。帖子建议创建一个脚本来运行 R 的开发版本：

```
#!/bin/bash
# This assmues the dev version of R is installed in /usr/local/

export R_LIBS_SITE=${R_LIBS_SITE-'/usr/lib/R-devel/lib/R/library:/usr/local/lib/R/site-library:/usr/lib/R/site-library::/usr/lib/R/library'}
export PATH="/usr/local/lib/R-devel/bin:$PATH"
R "$@" 
```

您可以将其保存在您的某个位置`$PATH`，并为其命名，例如`R-devel`. 确保使用 . 使脚本可执行`chmod`。然后你可以像这样启动 R-devel：

```
R-devel CMD check pkg --as-cran 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-02T09:40:31.943

根据 bioc-devel 邮件列表中的建议，我有[另一种方法。](https://logfc.wordpress.com/2015/07/01/r-devel-in-parallel-to-regular-r-installation/)假设你想在你的主目录中安装 r-devel，比如说 in `~/R-devel/`，你可以这样做：

首先，设置环境变量，这样我们就不需要重复目录的名称了。源目录和已编译发行版的目录。当然，它们可以在任何地方，无论您喜欢它们在哪里：

```
export RSOURCES=~/src
export RDEVEL=~/R-devel 
```

现在，获取源 + 推荐包：

```
mkdir -p $RSOURCES
cd $RSOURCES
svn co https://svn.r-project.org/R/trunk R-devel
R-devel/tools/rsync-recommended 
```

接下来，构建 R 和包：

```
mkdir -p $RDEVEL
cd $RDEVEL
$RSOURCES/R-devel/configure && make -j 
```

就是这样，你完成了。只需将以下内容保存在某个可执行脚本中即可运行开发版本：

```
#!/bin/bash
export R_LIBS=~/R-devel/library
R "$@" 
```

这是一个自动将脚本保存到您的 ~/bin/ 目录的脚本：

```
cat <<EOF>~/bin/Rdev;
#!/bin/bash

export R_LIBS=$RDEVEL/library
export PATH="$RDEVEL/bin/:\$PATH"
R "\$@"
EOF
chmod a+x ~/bin/Rdev 
```

现在您可以像在运行`Rdev`一样简单地运行`R`，您将拥有 R 的开发版本，它将在`$RDEVEL/library`.

# javascript - 如何使用 css 或 javascript 创建新行？

> ID：15674686
> 
> 赞同：0
> 
> 时间：2013-03-28T05:11:37.253
> 
> 标签：javascript, css, html

例如，如果我有 n 张图片，并且我想将每 4 张图片连续排列，有没有办法在 CSS 或 js 中做到这一点？因为图片是用 AJAX 动态上传的，所以我想我需要一种动态的方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T05:29:39.043

使用 CSS3 的更复杂的答案

HTML

```
<div class="image_row">
    <img class="image_item" src="http://challenge.roadef.org/2012/img/google_logo.jpg" />
    <img class="image_item" src="http://challenge.roadef.org/2012/img/google_logo.jpg" />
    <img class="image_item" src="http://challenge.roadef.org/2012/img/google_logo.jpg" />
    <img class="image_item" src="http://challenge.roadef.org/2012/img/google_logo.jpg" />
</div> 
```

样式 .image_row { 宽度：400px; }

```
.image_item
{
    max-width : calc(100% / 4 );
    max-width : -moz-calc(100% / 4 );
    max-width : -webkit-calc(100% / 4 );
    float:left;
} 
```

解决您的动态宽度/高度，并将所有 4 个图像排成一行。

[http://jsfiddle.net/gAWyU/](http://jsfiddle.net/gAWyU/)

编辑：根据要求，添加了 mozilla 和标准代码。

**更新** 只是对这个答案的一点更新。css3`calc`函数的神奇之处在于您的容器 div 可以是任意大小。我在这个例子中使用了 400px，但是如果你想让它变得流畅，使用我的解决方案，它也可以。

这是因为，在我的解决方案中，图像的宽度将始终是父 div 宽度的 1/4。

如果你担心你的图片太宽，你可以做的是设置一个固定的最小宽度，并设置最大宽度以匹配父 div。这是一个工作示例：

[小提琴](http://jsfiddle.net/gAWyU/4/)

请注意，您只需要为父 div 设置最小宽度；因为图像始终是父 div 宽度的 1/4。

这是CSS：

```
.image_row
{
    width:100%;
    min-width:400px;
}

.image_item
{
    max-width : calc(100% / 4 );
    max-width : -moz-calc(100% / 4 );
    max-width : -webkit-calc(100% / 4 );
    float:left;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T05:42:14.720

您可以在不更改 HTML 或 JS 的情况下执行此操作。

```
#myDiv img{
    display:block;
    float:left;
    width: 100px;
    height: 100px;
    border: 1px solid white;
}
#myDiv img:nth-child(4n+1){
    clear:left;
} 
```

nth-child(4n+1) 意味着将这些规则（clear:left）应用于每四个图像，但从位置 1 开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T05:13:14.553

添加一个`div`，并设置它`width`（在 CSS 中）以适合该行中的 4 个图像。它们会自动堆叠。像这样的东西：

```
<div style="width: 400px">
    <img style="width: 100px;" src="http://media.au.timeout.com/contentFiles/image/syd-venues/theatre/sydney-opera-house-482x298.jpg" />
    <img style="width: 100px;" src="http://media.au.timeout.com/contentFiles/image/syd-venues/theatre/sydney-opera-house-482x298.jpg" />
    <img style="width: 100px;" src="http://media.au.timeout.com/contentFiles/image/syd-venues/theatre/sydney-opera-house-482x298.jpg" />
    <img style="width: 100px;" src="http://media.au.timeout.com/contentFiles/image/syd-venues/theatre/sydney-opera-house-482x298.jpg" />
    <img style="width: 100px;" src="http://media.au.timeout.com/contentFiles/image/syd-venues/theatre/sydney-opera-house-482x298.jpg" />
    <img style="width: 100px;" src="http://media.au.timeout.com/contentFiles/image/syd-venues/theatre/sydney-opera-house-482x298.jpg" />
    <img style="width: 100px;" src="http://media.au.timeout.com/contentFiles/image/syd-venues/theatre/sydney-opera-house-482x298.jpg" />
    <img style="width: 100px;" src="http://media.au.timeout.com/contentFiles/image/syd-venues/theatre/sydney-opera-house-482x298.jpg" />
    <img style="width: 100px;" src="http://media.au.timeout.com/contentFiles/image/syd-venues/theatre/sydney-opera-house-482x298.jpg" />
    <img style="width: 100px;" src="http://media.au.timeout.com/contentFiles/image/syd-venues/theatre/sydney-opera-house-482x298.jpg" />
    <img style="width: 100px;" src="http://media.au.timeout.com/contentFiles/image/syd-venues/theatre/sydney-opera-house-482x298.jpg" />
    <img style="width: 100px;" src="http://media.au.timeout.com/contentFiles/image/syd-venues/theatre/sydney-opera-house-482x298.jpg" />
    <img style="width: 100px;" src="http://media.au.timeout.com/contentFiles/image/syd-venues/theatre/sydney-opera-house-482x298.jpg" />
    <img style="width: 100px;" src="http://media.au.timeout.com/contentFiles/image/syd-venues/theatre/sydney-opera-house-482x298.jpg" />
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T05:21:54.967

定义一个新的 div 块，在其中定义另外 4 个固定宽度的 div 块

```
<div class="image-container">
      <div style="width:100px" id="1"></div>
      <div style="width:100px" id="2"></div>
      <div style="width:100px" id="3"></div>
      <div style="width:100px" id="4"></div>
</div> 
```

现在将您的图像附加到每个 div 中，因此无论图像的宽度如何，每行只有 4 个图像

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T05:32:34.557

您可以通过 css 的 float 属性轻松完成

```
<div style="/*total width of your 4 images placed side by side*/">
    <img style="float:left" src="" />
    <img style="float:left" src="" />
    <img style="float:left" src="" />
    <img style="float:left" src="" />
    <img style="float:left" src="" />
    <img style="float:left" src="" />
    <img style="float:left" src="" />
    <img style="float:left" src="" />
    <img style="float:left" src="" />
    <img style="float:left" src="" />
    <img style="float:left" src="" />
    <img style="float:left" src="" />
</div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T05:36:38.507

您可以使用 javascript 来完成。将图像添加到 N*4 矩阵或表格中。

```
<html>
<body>
<script type="text/javascript">
function myFunction(imgno)
{
    if(imgno%4==0)
    {
      document.write("</td></tr>");
    }
    else
    {
      document.write("<td><img src=\"" + imgno + ".jpg\"/> </td>");
    }
}
document.write("<table><tr>");

var i=0;
for (i=0;i<=20;i++)
{
    myFunction(i);
}
document.write("</table>");
</script>
</body>
</html> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-28T07:00:10.337

只有简单的 CSS 才能做到这一点，

```
img{margin-bottom:5px;display:block; clear:both;} 
```

明确：两者；将图像发送到新行，通过清除浮动继承，然后它会自动排列在前一个元素的下方，

您可以在其中添加其他样式，但请确保您没有使用`float`效果覆盖它:)

链接到工作小提琴：`http://jsfiddle.net/MarmeeK/W3bsH/`

这将在一行中完成您的工作:)

# ruby-on-rails - 如何获得特定 rake 任务的帮助？

> ID：15674694
> 
> 赞同：8
> 
> 时间：2013-03-28T05:12:17.987
> 
> 标签：ruby-on-rails, ruby, rake, rake-task

是否有针对单个 rake 任务的标准帮助命令？

`rake -h`显示 rake 的选项。

`rake -D`描述 rake 任务。

`rake mytask`运行我的任务。

是否有类似的东西`rake -h mytask`可以描述 mytask，并列出其可选和/或必需的参数？

例如，以下代码将在 rails 中运行单独的测试：

```
rake test TEST=path_to_test 
```

我如何发现 TEST=path_to_test 是 rake test 的可选参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T05:55:54.867

该命令`rake -D test`不在我的系统上。相反，您可以使用

```
# list test command with details
rake test -D 

# list all test tasks with description
rake test -T

# list all test tasks even without description(Recommened)
rake test -T -A 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T05:25:44.937

`-D`接受一个模式。所以你可以使用它。

例子：

```
rake -D db

rake -D db:migrate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-24T20:21:39.333

`TEST=path_to_test`正在设置环境变量。因此，如果`rake -D test`没有为您提供有关如何在 rake 任务中使用环境变量的任何信息，那么您必须求助于查看源代码或替代文档。并且查看源代码，在 Rails rake test 中只检查了两个环境变量：`TEST`和`TESTOPTS`，后者用于与 Ruby 打包并用于 Rails 测试的 Minitest 中。

Rails 中的文档给出了一个示例： `rake test TEST=path/to/test.rb TESTOPTS="--name=test_something"`

其他选项包括`--color`和`--fail-fast` （参考：[https](https://github.com/rails/rails/blob/df74da026b9210a9cb6258e7029cafcc02aa6d15/guides/source/testing.md) ://github.com/rails/rails/blob/df74da026b9210a9cb6258e7029cafcc02aa6d15/guides/source/testing.md ）

（我已经为将来研究这个问题的任何人添加了这个答案，比如我。）

或者，您可以在 rake 之外运行测试。不确定这是否会使其更快。

例如，在 MailLayoutTest 中运行“显式类布局”测试可以通过以下方式完成： `ruby -Itest test/mail_layout_test.rb -n test_explicit_class_layout`

（参考： [https](https://github.com/rails/rails/blob/2f1fefe456932a6d7d2b155d27b5315c33f3daa1/guides/source/contributing_to_ruby_on_rails.md) ://github.com/rails/rails/blob/2f1fefe456932a6d7d2b155d27b5315c33f3daa1/guides/source/contributing_to_ruby_on_rails.md ）

# c++ - 找出两个嘈杂的照明变体图像之间的差异（直方图对齐等）

> ID：15674699
> 
> 赞同：3
> 
> 时间：2013-03-28T05:12:57.670
> 
> 标签：c++, opencv, image-processing, computer-vision

我正在尝试从相机拍摄的照片中提取单个对象。存在没有对象的相机视图的图片。相机的焦点不会改变，但是当物体在视野中​​时，光照会改变。该物体是实心的，但不是恒定的灰色阴影。[这](http://i.stack.imgur.com/TVWWr.png)是右侧参考图像的图片和左侧带有对象的另一张图像。图片是单色的。

所有的处理都是在图像采集和计算时间之后发生的，这不是一个大问题。算法的精度更重要。

我在这里找到的大多数问题都涉及两张图片是否相似的问题，但我有兴趣找到对象在图像中占据的区域以进​​行后续测量。

到目前为止，我已经尝试过用阈值对模糊图像进行减法然后二值化的不同组合，但这并不是光照不变的。预先将参考图像乘以相对照明差异也不会产生令人满意的结果。如果使用更好的方法来模拟不同的曝光，也许它会起作用。

我还尝试减去 LoG 过滤图像和一些粗略的邻域像素比较，但没有成功。

感觉像是一个非常直观的任务，某种描述符比较应该能够处理，但我正在努力寻找一个好的解决方案。有谁知道我一直失踪的好方法？

提前致谢。

* * *

感谢 Franco Callari 的回答，我偶然发现了[直方图匹配](http://en.wikipedia.org/wiki/Histogram_matching)，令我惊讶的是，现成的 OpenCV 函数并未涵盖该匹配。由于这似乎是一个常见问题，我不妨在这里发布我的低效破解，以防有人想使用它。

```
// Aligns the histogram of the source image to match that of the target image. 
// Both are evaluated in a ROI, not across the whole picture.
// The function assumes 8-bit grayscale images.
static void alignHistogram(Mat alignsource, const Mat& aligntarget, 
    const int rowstart = 500, const int rowend = 700, 
    const int colstart = 0, const int colend = 1000)    
{   
    // 1) Calculate target and source histogram in region of interest
    // 2) Compute the integral of each histogram (cumulative distribution function)
    // 3) Set brightness of each pixel in the source image to the brightness of the target where the CDF values are equal

    Mat ROIsource = alignsource(Range(rowstart, rowend), Range(colstart, colend));
    Mat ROItarget = aligntarget(Range(rowstart, rowend), Range(colstart, colend));
    MatND hist_source, hist_target;

    int bins = 256, int histSize[] = {bins};
    float sranges[] = { 0, 256 };        const float* ranges[] = { sranges };
    int channels[] = {0};
    calcHist( &ROItarget, 1, channels, Mat(), hist_target, 1, histSize, ranges, true, false );
    calcHist( &ROItarget, 1, channels, Mat(), hist_source, 1, histSize, ranges, true, false );

    Mat CDF_target_2d, CDF_source_2d; 
    integral(hist_target, CDF_target_2d);
    integral(hist_source, CDF_source_2d);
    Mat CDF_target = CDF_target_2d.col(1),  CDF_source = CDF_source_2d.col(1);

    // Cycle through source image inefficiently and adjust brightness
    for (int i = 0; i < alignsource.rows; i++)
    {
        for (int j = 0; j < alignsource.cols; j++)
        {
            int source_brightness = alignsource.at<unsigned char>(i, j);
            double cdf_source_value = CDF_source.at<double>(source_brightness);

            int target_brightness = 0;
            while (target_brightness < 256) {
                if (CDF_target.at<double>(target_brightness) > cdf_source_value)
                    break;
                target_brightness++;
            }
            alignsource.at<unsigned char>(i, j) = target_brightness;
        }
    }
} 
```

调整照明有助于更好地初步猜测物体，但不足以获得精确的轮廓，尤其是在背景与物体差别不大或特征丰富的情况下。就我所知片刻。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:13:34.867

如果相机没有移动也没有改变背景（从示例照片中显示），全局照明的差异可能是由于（大部分）两个因素之一 - 具有自动曝光的相机做出不同的选择拍摄对象在场景中时的 f/stop 或曝光时间，或曝光时间窗口内的时变光源（例如灯中的 60Hz 线路嗡嗡声）。如果照明器是闪光灯，则后者将被排除在外（并且两次拍摄之间有足够的时间让闪光灯充电）。

我在上面说“大部分”是因为，由于主体占据了画面的大部分，从主体反射的光也会影响全局照明，但在您的情况下，这可能是二阶效应。

您最好的方法可能是更好地控制捕获 - 至少禁用相机中的自动曝光，使用镇流灯（如果它不是闪光灯）。

如果你不能（或另外），你应该从全局直方图对齐开始，而不是均衡化。正如其他海报所建议的那样，全局直方图均衡可能会受到伤害，因为对象的像素值将成为直方图的一部分，而不仅仅是背景。但是，如果相机没有移动，您可以在图像帧中预先识别已知为背景的区域，并在“仅背景”和“有主题”图像中仅从它们中采样直方图。然后，您可以在动态范围的顶部和底部 5% 处找到值，并应用全局缩放来匹配它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T08:21:39.800

1) 使用直方图均衡化（OpenCV 中的 cvEqualizeHist() 函数）。它将帮助您消除照明的差异。

2）您将有两个几乎相同的图像（没有物体和有物体的图像，其他部分必须相同，因为相机是静态的）。按功能区分

```
void cvSub(
    const CvArr* src1,
    const CvArr* src2,
    CvArr*       dst,
    const CvArr* mask  = NULL) 
```

3）结果必须是：物体所在的地方几乎是白色的，图像的其余部分不会那么亮。采用

```
void cvInRangeS(
    const CvArr* src,
    CvScalar     lower,
    CvScalar     upper,
    CvArr*       dst
); 
```

此功能可用于检查图像中的像素是否在特定指定范围内。所以取一个接近白色的范围（例如 (200, 255)）。

4）找到图像中剩余物体的边缘

```
int cvFindContours(
  IplImage*              img,
  CvMemStorage*          storage,
  CvSeq**                firstContour,
  int                    headerSize  = sizeof(CvContour),
  CvContourRetrievalMode mode        = CV_RETR_LIST,
  CvChainApproxMethod    method      = CV_CHAIN_APPROX_SIMPLE
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T06:02:25.580

如果光照是时变的，您可以利用 HSV 或 HSI 空间中的色调信息，色调可能被证明对光照具有很强的不变性。如果您的图像是灰度的，那么您可以尝试一些直方图均衡

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T09:08:21.450

我将从：

(i) 直方图均衡化 (ii) 两幅图像相减（如果参考对象确实没有改变其位置 (iii) 开口（侵蚀、膨胀），尝试不同的蒙版尺寸（3x3、5x5）

然后看看生成的图像。还剩多少“垃圾”。如果在您感兴趣的区域之外有太多连接的像素，您可能需要增加开口的遮罩（或者可能仅用于腐蚀）。您可以对图像进行二值化并将二进制作为掩码过滤掉原始图像中的感兴趣区域。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T12:15:22.330

另一种选择是使用背景减法算法。虽然主要用于视频序列，但应该没问题。我建议你使用opencv的[Code Book Method](http://books.google.com.pk/books?id=seAgiOfu2EIC&pg=PA280&lpg=PA280&dq=OPencv%20codebook%20method&source=bl&ots=hSJ4egkDOd&sig=V7pHt9Z25HfYePHO1mmWB-mfsbg&hl=en&sa=X&ei=MARbUeCeBImRswbYlICIDA&ved=0CC8Q6AEwAA#v=onepage&q=OPencv%20codebook%20method&f=false)

1.  给密码本方法你的输入图像
2.  您有变量要调整，告诉码本方法它必须以多少帧作为背景，在您的情况下，这将是一个。
3.  结果是前景图像和背景图像。
4.  然后，您可以使用平滑来清除一些噪音。
5.  使用应该包含您的对象的前景图像（假设手指是您想要找到的）
6.  使用 opencv 方法查找轮廓。

希望这可以帮助

# python - 如何在python中迭代字典？

> ID：15674701
> 
> 赞同：-2
> 
> 时间：2013-03-28T05:13:07.093
> 
> 标签：python, dictionary, python-2.7

我正在尝试一一阅读字典中的所有元素。我的字典如下“测试”所示。

```
test ={'line4': (4, 2), 'line3': (3, 2), 'line2': (2, 2), 'line1': (1, 2), 'line10': (10, 2)} 
```

我想按照下面的示例代码进行操作。

```
for i in range(1,len(test)+1):
    print test(1) # should print all the values one by one 
```

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T05:15:29.943

```
#Given a dictionary
>>> test ={'line4': (4, 2), 'line3': (3, 2), 'line2': (2, 2), 'line1': (1, 2), 'line10': (10, 2)}

#And if you want a list of tuples, what you need actually is the values of the dictionary
>>> test.values()
[(4, 2), (3, 2), (2, 2), (1, 2), (10, 2)]

#Instead if you want a flat list of values, you can flatten using chain/chain.from_iterable
>>> list(chain(*test.values()))
[4, 2, 3, 2, 2, 2, 1, 2, 10, 2]
#And to print the list 
>>> for v in chain.from_iterable(test.values()):
    print v

4
2
3
2
2
2
1
2
10
2 
```

分析你的代码

```
for i in range(1,len(test)+1):
    print test(1) # should print all the values one by one 
```

1.  你不能索引字典。字典不是像列表那样的序列
2.  您不使用括号来索引。它变成了一个函数调用
3.  要迭代字典，您可以迭代键或值。
    1.  `for key in test`按键迭代字典
    2.  `for key in test.values()`按值迭代字典

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T05:32:15.077

这里有几种可能性。你的问题很模糊，你的代码甚至还没有接近工作，所以很难理解这个问题

```
>>> test ={'line4': (4, 2), 'line3': (3, 2), 'line2': (2, 2), 'line1': (1, 2), 'line10': (10, 2)}
>>> for i in test.items():
...     print i
... 
('line4', (4, 2))
('line3', (3, 2))
('line2', (2, 2))
('line1', (1, 2))
('line10', (10, 2))
>>> for i in test:
...     print i
... 
line4
line3
line2
line1
line10
>>> for i in test.values():
...     print i
... 
(4, 2)
(3, 2)
(2, 2)
(1, 2)
(10, 2)
>>> for i in test.values():
...     for j in i:
...         print j
... 
4
2
3
2
2
2
1
2
10
2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T05:14:57.140

试试这个：

```
for v in test.values():
    for val in v:
        print val 
```

如果您需要一份清单：

```
print [val for v in test.values() for val in v ] 
```

如果要从 dict 打印每条记录：

```
for k, v in test.iteritems():
    print k, v 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T05:20:23.103

您可以使用嵌套理解：

```
>>> test ={'line4': (4, 2), 'line3': (3, 2), 'line2': (2, 2), 'line1': (1, 2), 'line10': (10, 2)}
>>> print '\n'.join(str(e) for t in test.values() for e in t)
4
2
3
2
2
2
1
2
10
2 
```

由于字典在 Python 中是未排序的，因此您的元组也将是未排序的。

# mysql - 如何了解更多关于 MySQL、Apache 和 .htaccess 的信息？

> ID：15674703
> 
> 赞同：0
> 
> 时间：2013-03-28T05:13:13.980
> 
> 标签：mysql, linux, apache, .htaccess

我是一个青少年，我只是喜欢计算机编程，并且总是喜欢最大限度地自学各种东西。比如学了HTML之后就跳槽学了HTML5，学了JavaScript之后就开始学闭包、DOM等。

最近，我在看一些流行网站（tumblr、vimeo）上发布的一些工作，我发现列出了**数据库工程**，他们正在寻找一个**最大程度地了解 MySQL 的人**。他们这是什么意思？我只知道数据库是用来存储信息的，因为我知道 PHP，所以我只用来查询数据库，仅此而已。那么，我如何学习这些人在他们的网站上提到的很酷的东西。

其次，我还想了解**apache 的工作原理**（如果有类似的东西，甚至可以在上面开发）和掌握**.htaccess**（htaccess 是我完全不知道的东西）。

最后，这些网站（上述）还提到他们正在寻找**linux 开发人员**。他们这是什么意思？

所以，直截了当，我想掌握 LAMP 堆栈，甚至超越基础知识，这样我就有权利真正称自己为程序员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:19:42.253

是的，数据库主要用于存储信息。但是与数据库设计、开发、管理、报告、集成服务、分析服务和商业智能相关的各个方面都属于数据库工程。

您可以先从 Headfirst SQL 电子书开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T05:21:45.963

Linux 开发人员是在 Linux 操作系统上工作的人。（如 windows 或 osx）。

您应该设置[双引导环境](https://help.ubuntu.com/community/WindowsDualBoot)或设置 Ubuntu（Linux 版本）VM 并在此基础上进行练习。学习命令行的方式。

从这里获取 ubuntu：

[http://www.ubuntu.com/download/desktop](http://www.ubuntu.com/download/desktop)

以下是设置虚拟机的指南：

[http://www.howtogeek.com/howto/11287/how-to-run-ubuntu-in-windows-7-with-vmware-player/](http://www.howtogeek.com/howto/11287/how-to-run-ubuntu-in-windows-7-with-vmware-player/)

运行后，您可以设置 LAMP，请参阅本指南：

[https://help.ubuntu.com/community/ApacheMySQLPHP](https://help.ubuntu.com/community/ApacheMySQLPHP)

要了解 apache，最好专门搜索一下您要完成的工作。apache.org 页面很好。

这是他们对 .htaccess 文件的细分：

[http://httpd.apache.org/docs/2.2/howto/htaccess.html](http://httpd.apache.org/docs/2.2/howto/htaccess.html)

最后，要了解 MySQL，您可以查看以下内容：

[http://dev.mysql.com/doc/refman/5.5/en/tutorial.html](http://dev.mysql.com/doc/refman/5.5/en/tutorial.html)

# c# - 框架 2.0 中的 LINQ

> ID：15674706
> 
> 赞同：1
> 
> 时间：2013-03-28T05:13:28.450
> 
> 标签：c#

我想在 Framework 2.0 中使用 LINQ。可能吗？

我还从某人那里听说微软将停止对 Framework 2.0 及以下版本的支持。

这样对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:17:07.713

尝试参考此链接>>

[http://weblogs.asp.net/fmarguerie/archive/2007/09/05/linq-support-on-net-2-0.aspx](http://weblogs.asp.net/fmarguerie/archive/2007/09/05/linq-support-on-net-2-0.aspx)

你会在这里得到所有的东西。

我们可以使用来自 mono（.NET for Linux）的 LINQ 源来让 LINQ 在 .NET 2.0 上运行。

也可以参考这个>>

[http://linq4you.codeplex.com/](http://linq4you.codeplex.com/)

# memory-leaks - Golang程序内存泄漏？

> ID：15674709
> 
> 赞同：9
> 
> 时间：2013-03-28T05:13:47.323
> 
> 标签：memory-leaks, go

我的 golang 程序（url 监视器）有内存泄漏，它最终被内核（oom）杀死。环境：

```
$ go version
go version go1.0.3

$ go env
GOARCH="amd64"
GOBIN=""
GOCHAR="6"
GOEXE=""
GOGCCFLAGS="-g -O2 -fPIC -m64 -pthread"
GOHOSTARCH="amd64"
GOHOSTOS="linux"
GOOS="linux"
GOPATH="/data/apps/go"
GOROOT="/usr/local/go"
GOTOOLDIR="/usr/local/go/pkg/tool/linux_amd64"
CGO_ENABLED="1" 
```

代码：

```
package main

import (
    "bytes"
    "database/sql"
    "flag"
    "fmt"
    _ "github.com/Go-SQL-Driver/MySQL"
    "ijinshan.com/cfg"
    "log"
    "net"
    "net/http"
    "net/smtp"
    "os"
    "strconv"
    "strings"
    "sync"
    "time"
)

var (
    Log           *log.Logger
    Conf          cfg.KVConfig
    Debug         bool
    CpuCore       int
    HttpTransport = &http.Transport{
        Dial: func(netw, addr string) (net.Conn, error) {
            deadline := time.Now().Add(30 * time.Second)
            c, err := net.DialTimeout(netw, addr, 20*time.Second)
            if err != nil {
                return nil, err
            }

            c.SetDeadline(deadline)
            return c, nil
        },
        DisableKeepAlives: true,
    }
    HttpClient = &http.Client{
        Transport: HttpTransport,
    }
    WG            sync.WaitGroup
)

const (
    LogFileFlag   = os.O_WRONLY | os.O_CREATE | os.O_APPEND
    LogFileMode   = 0644
    LogFlag       = log.LstdFlags | log.Lshortfile
    GET_VIDEO_SQL = `SELECT B.Name, A.TSID, A.Chapter, A.ChapterNum, 
    IFNULL(A.Website, ''), IFNULL(A.Descr, ''), 
    IFNULL(A.VideoId, ''), IFNULL(AndroidWebURL, ''), IFNULL(IOSWebURL, ''), 
    IFNULL(AndroidURL, ''), IFNULL(AndroidURL2, ''), IFNULL(IOSURL, '')
    FROM Video A INNER JOIN TVS B ON A.TSID = B.ID LIMIT 200`

    HtmlHead = `<table border=1 width=100% height=100%><tr><td>节目名
    </td><td>tsid</td><td>章节</td><td>章节号&lt;/td><td>描述
    </td><td>videoid</td><td>网站</td><td>地址</td></tr>`
    HtmlTail = "</table>"
)

type videoInfo struct {
    name          string
    tsid          uint
    chapter       string
    chapterNum    uint
    descr         string
    videoId       string
    website       string
    androidWebUrl string
    iosWebUrl     string
    androidUrl    string
    androidUrl2   string
    iosUrl        string
}

func init() {
    var (
        confFile string
        err      error
    )

    // parse command argument:w
    flag.StringVar(&confFile, "c", "./vsmonitor.conf", " set config file path")
    flag.Parse()
    // read config
    if Conf, err = cfg.Read(confFile); err != nil {
        panic(fmt.Sprintf("Read config file \"%s\" failed (%s)",
            confFile, err.Error()))
    }
    // open log file
    file, err := os.OpenFile(Conf["log.file"], LogFileFlag, LogFileMode)
    if err != nil {
        panic(fmt.Sprintf("OpenFile \"%s\" failed (%s)", Conf["log.file"],
            err.Error()))
    }
    // init LOG
    Log = log.New(file, "", LogFlag)
    Debug = false
    i, err := strconv.ParseInt(Conf["cpucore.num"], 10, 32)
    if err != nil {
        panic(fmt.Sprintf("ParseInt \"%s\" failed (%s)", Conf["cpucore.num"],
            err.Error()))
    }

    CpuCore = int(i)
}

func getHttpStatusCode(url string) int {
    if url == "" {
        return 200
    }

    req, err := http.NewRequest("GET", url, nil)
    if err != nil {
        return 0
    }

    req.Header.Add("User-Agent", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_3) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.57 Safari/537.17")
    req.Header.Add("Connection", "close")
    resp, err := HttpClient.Do(req)
    if err != nil {
        return 0
    }

    defer resp.Body.Close()
    return resp.StatusCode
}

func sendMail(host, user, pwd, from, to, subject, body, mailType string) error {
    auth := smtp.PlainAuth("", user, pwd, strings.Split(host, ":")[0])
    cntType := fmt.Sprintf("Content-Type: text/%s;charset=UTF-8", mailType)
    msg := fmt.Sprintf("To: %s\r\nFrom: %s<%s>\r\nSubject: %s\r\n%s\r\n\r\n%s",
        to, from, user, subject, cntType, body)

    return smtp.SendMail(host, auth, user, strings.Split(to, ","), []byte(msg))
}

func getVideos(videoChan chan *videoInfo, htmlBuf *bytes.Buffer) error {
    defer HttpTransport.CloseIdleConnections()
    db, err := sql.Open("mysql", Conf["weikan.mysql"])
    if err != nil {
        return err
    }

    rows, err := db.Query(GET_VIDEO_SQL)
    if err != nil {
        db.Close()
        return err
    }

    for rows.Next() {
        video := &videoInfo{}
        err = rows.Scan(&video.name, &video.tsid, &video.chapter,
            &video.chapterNum,
            &video.website, &video.descr, &video.videoId, &video.androidWebUrl,
            &video.iosWebUrl, &video.androidUrl, &video.androidUrl2,
            &video.iosUrl)
        if err != nil {
            db.Close()
            return err
        }

        videoChan <- video
        WG.Add(1)
    }

    db.Close()
    // wait check url finish
    WG.Wait()
    // send mail
    for {
        if htmlBuf.Len() == 0 {
            Log.Print("no error found!!!!!!!!")
            break
        }

        Log.Print("found error !!!!!!!!")
        /*
        err := sendMail("smtp.gmail.com:587", "xxxx",
            "xxx", "xxx <xxx>",
            Conf["mail.to"], "xxxxx",
            HtmlHead+htmlBuf.String()+HtmlTail, "html")
        if err != nil {
            Log.Printf("sendMail failed (%s)", err.Error())
            time.Sleep(10 * time.Second)
            continue
        }
        */

        Log.Print("send mail")
        break
    }

    Log.Print("reset buf")
    htmlBuf.Reset()
    return nil
}

func checkUrl(videoChan chan *videoInfo, errChan chan string) {
    defer func() {
        if err := recover(); err != nil {
            Log.Print("rouintes failed : ", err)
        }
    }()

    for {
        video := <-videoChan
        ok := true
        errUrl := ""

        if code := getHttpStatusCode(video.androidWebUrl); code >= 400 {
            errUrl += fmt.Sprintf("%s (%d)<br />",
                video.androidWebUrl, code)
            ok = false
        }

        if code := getHttpStatusCode(video.iosWebUrl); code >= 400 {
            errUrl += fmt.Sprintf("%s (%d)<br />",
                video.iosWebUrl, code)
            ok = false
        }

        if code := getHttpStatusCode(video.androidUrl); code >= 400 {
            errUrl += fmt.Sprintf("%s (%d)<br />",
                video.androidUrl, code)
            ok = false
        }

        if code := getHttpStatusCode(video.androidUrl2); code >= 400 {
            errUrl += fmt.Sprintf("%s (%d)<br />",
                video.androidUrl2, code)
            ok = false
        }

        if code := getHttpStatusCode(video.iosUrl); code >= 400 {
            errUrl += fmt.Sprintf("%s (%d)<br />",
                video.iosUrl, code)
            ok = false
        }

        if !ok {
            errChan <- fmt.Sprintf(`<tr><td>%s</td><td>%d</td><td>%s</td>
            <td>%d</td><td>%s</td><td>%s</td><td>%s</td><td>%s</td></tr>`,
                video.name, video.tsid, video.chapter, video.chapterNum,
                video.descr, video.videoId,
                video.website, errUrl)
            Log.Printf("\"%s\" (%s) —— \"%s\" checkurl err", video.name,
                video.chapter, video.descr)
        } else {
            Log.Printf("\"%s\" (%s) —— \"%s\" checkurl ok", video.name,
                video.chapter, video.descr)
            WG.Done()
        }
    }
}

func mergeErr(errChan chan string, htmlBuf *bytes.Buffer) {
    defer func() {
        if err := recover(); err != nil {
            Log.Print("rouintes failed : ", err)
        }
    }()

    for {
        html := <-errChan
        _, err := htmlBuf.WriteString(html)
        if err != nil {
            Log.Printf("htmlBuf WriteString \"%s\" failed (%s)", html,
                err.Error())
            panic(err)
        }

        WG.Done()
    }
}

func main() {
    videoChan := make(chan *videoInfo, 100000)
    errChan := make(chan string, 100000)
    htmlBuf := &bytes.Buffer{}
    defer func() {
        if err := recover(); err != nil {
            Log.Print("rouintes failed : ", err)
        }
    }()

    // check url
    for i := 0; i < CpuCore; i++ {
        go checkUrl(videoChan, errChan)
    }
    // merge error string then send mail
    go mergeErr(errChan, htmlBuf)

    for {
        // get Video and LiveSrc video source
        if err := getVideos(videoChan, htmlBuf); err != nil {
            Log.Printf("getVideos failed (%s)", err.Error())
            time.Sleep(10 * time.Second)
            continue
        }

        // time.Sleep(1 * time.Hour)
    }

    Log.Print("exit...")
} 
```

代码有四个`funcs`：

> 获取HttpStatusCode

免费资源使用 resp.Body.Close()

> 发邮件

我不需要手动释放资源

> 合并错误

使用 htmlBuf(*bytes.Buffer) 连接错误字符串

> 获取视频

首先它获取视频 url，然后将它们发送到 videoChan，然后它等待所有例程完成它们的检查工作。然后发送邮件并重置 htmlBuf。

我没有找到任何需要免费的资源，但是。

> $顶部

显示：

```
PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                                                                                                                      
6451 root      20   0 3946m 115m 2808 S  0.7  0.2   6:11.20 vsmonitor 
```

VIRT 和 RES 将增长...

内存分析：

```
(pprof) top
Total: 10.8 MB
2.3  21.2%  21.2%      2.3  21.2% main.main
2.0  18.5%  39.8%      2.0  18.5% bufio.NewWriterSize
1.5  13.9%  53.7%      1.5  13.9% bufio.NewReaderSize
1.5  13.9%  67.6%      1.5  13.9% compress/flate.NewReader
0.5   4.6%  72.2%      0.5   4.6% net.newFD
0.5   4.6%  76.8%      0.5   4.6% net.sockaddrToTCP
0.5   4.6%  81.5%      4.5  41.7% net/http.(*Transport).getConn
0.5   4.6%  86.1%      2.5  23.2% net/http.(*persistConn).readLoop
0.5   4.6%  90.7%      0.5   4.6% net/textproto.(*Reader).ReadMIMEHeader
0.5   4.6%  95.4%      0.5   4.6% net/url.(*URL).ResolveReference 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T06:58:41.010

向您的程序添加一个选项非常容易，因此它会记录内存的使用位置。在你的程序中没有什么对我来说是非常错误的。你下载的文件很大吗？你可以做一个 HEAD 请求吗？我不知道这是否有帮助；如果您有大量请求，也许会。

Go 博客上有一篇（旧式）文章，关于[http://blog.golang.org/2011/06/profiling-go-programs.html上的内存分析和](http://blog.golang.org/2011/06/profiling-go-programs.html)[http://golang.org/](http://golang.org/pkg/runtime/pprof/)上的文档[pkg/runtime/pprof/](http://golang.org/pkg/runtime/pprof/)和[http://golang.org/pkg/net/http/pprof/](http://golang.org/pkg/net/http/pprof/)

# sql - 根据 SQL 中另一个表中的值更新不同的列

> ID：15674711
> 
> 赞同：1
> 
> 时间：2013-03-28T05:13:57.047
> 
> 标签：sql

我有如下要求。

我有一张表，所有字符都放在一列中，我需要使用这些信息创建一个表，每个字符都有一个 olumn。

示例： **源表：**

```
article id | char id | char value
1          | 1       | book
1          | 2       | yes
1          | 3       | 100
2          | 1       | cd
2          | 2       | No 
```

**目的地表**

```
article id | type | lendable | number of pages 
1          | book | yes      | 100
2          | cd   | no       | NULL 
```

我们可以用两个内部连接来做到这一点，但如果有更多的列，那么我会很困难。有没有直接的方法来做到这一点？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:19:40.450

这可以简单地使用`INSERT INTO..SELECT`.

```
INSERT INTO destinationTable(articleid, type, lendable, NumberOfPages)
SELECT  ArticleID,
        MAX(CASE WHEN charID = 1 THEN charValue END) type,
        MAX(CASE WHEN charID = 2 THEN charValue END) lendable,
        MAX(CASE WHEN charID = 3 THEN charValue END) NumberOfPages
FROM    SourceTable 
GROUP   BY ArticleID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:21:42.910

与其构建一个“完成所有工作”的单一查询，不如创建单独的小查询更简单、更清晰——每种类型的更新一个查询。

这样做有以下好处：

*   更好的维护 - 添加另一种新类型的自定义映射或更改现有映射很容易
*   它更清晰易懂 - 清晰是良好编程的基石
*   测试更容易，因为您的变更集更小且具有凝聚力

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T07:17:30.413

您可以使用**pivot**或**Max(value)..Group by**来“透视”您的表，然后使用**Insert into select..**或**Select * into...**
**[PIVOT SQL FIDDLE DEMO](http://sqlfiddle.com/#!6/75b89/3)**

```
 with CTE_SourceTable
as 
(
  select article_id, [1] as type, [2] as lendable, [3] as [number of pages]
  from SourceTable
  pivot
  (
    max(char_value)
    for char_id in ([1],[2],[3])
   ) as PVT
)
select * 
into DestinationTable 
from CTE_SourceTable 
```

**[Max(value)..Group By SQL FIDDLE DEMO](http://sqlfiddle.com/#!6/7877f/2)**

```
 with CTE_SourceTable
as 
(
  select article_id, [1] as type, [2] as lendable, [3] as [number of pages]
  from SourceTable
  pivot
  (
    max(char_value)
    for char_id in ([1],[2],[3])
   ) as PVT
)
select *
into DestinationTable
from CTE_SourceTable 
```

# android - 如何在 android 的 aChartEngine 中设置初始缩放率？

> ID：15674715
> 
> 赞同：0
> 
> 时间：2013-03-28T05:15:04.910
> 
> 标签：android, achartengine

最近我在 android 中使用 aChartEngine 库。当我在实例上设置属性时`XYMultipleSeriesRenderer`，我发现只有这些方法关于`zoom rate`

```
renderer.setZoomButtonsVisible(visible)
renderer.setZoomEnabled(enabled);
renderer.setZoomRate(rate); 
```

我想要的是在我的折线图首次出现在屏幕上时为其设置初始缩放率。我怎样才能做到这一点？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:50:11.387

我猜你的意思是可见区域，因为你真的不关心显示的缩放率。

您可以使用这些 API 修改初始可见区域：

```
renderer.setXAxisMin(minX);
renderer.setXAxisMax(maxX); 
```

Where`minX`和`maxX`will 是定义 X 轴上可见点的数据范围。Y轴也有类似的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-10T10:27:25.113

使用这些修改初始可见区域：

```
mRenderer.setXAxisMin(0);
mRenderer.setXAxisMax(mCurrentSeries.getMaxX());
mRenderer.setYAxisMin(0);
mRenderer.setYAxisMax(mCurrentSeries.getMaxY());
mChartView.repaint();  // this line is sometimes required, depending how you are implementing the above 4 lines 
```

# mongodb - 在 mongodb 崩溃的 centos 上创建复合索引

> ID：15674722
> 
> 赞同：1
> 
> 时间：2013-03-28T05:15:50.557
> 
> 标签：mongodb, crash, indexing, centos

我在*Centos 6.2*上安装了一个*MongoDB 版本 2.2.2-rc0*，MongoDB 中有 2.18 亿条记录。我想在这些记录上创建一个复合索引来优化查询。

 *但是在为集合创建索引的过程中，我经历了几次系统崩溃，所以我不得不重新启动 Centos。我只是忽略了系统崩溃并使用我的 java 代码访问数据，不幸的是它不起作用，我在 MongoDB 上收到以下错误：

```
Tue Mar 26 16:33:09 [conn4] error: getFile() called in a read lock, yet file to return is not yet open 
```

我的java程序出现以下错误：

```
assertion src/mongo/db/database.cpp:257 
```

我检查了**database.cpp**的第 257 行，似乎它与读锁有关。但我不是 cpp 程序员，所以我很难深入研究。我正在检查 Centos 的系统日志以找出操作系统崩溃的原因。

关于该错误的任何想法以及该怎么做？*

# java - java webapp，getContext总是返回同一个对象

> ID：15674725
> 
> 赞同：1
> 
> 时间：2013-03-28T05:16:02.053
> 
> 标签：java, tomcat, web-applications

注意：这不是交叉发布，提出不同的问题（[在 webapp 之间共享对象时相关的 ClassCastError](https://stackoverflow.com/questions/15426335/classcasterror-when-share-objects-between-webapp/15426723?noredirect=1#15426723)）

我有两个 webapps 在同一个 tomcat 实例上的两个不同上下文中运行，当第二个应用程序试图获取第一个应用程序上下文时，无论我输入的名称是什么，对象都是相同的上下文，这是错误的。

```
public void contextInitialized(ServletContextEvent sce) {
       ServletContext context= sce.getServletContext().getContext("/bling");
       ServletContext context2= sce.getServletContext().getContext("/bla"); 
```

对象 context 和 context2 都有这个对象 id org.apache.catalina.core.ApplicationContextFacade@4376。

我正在使用tomcat7。有小费吗？tks

**更新：** 感谢所有好的建议。如果第二个 webapps（上面的代码片段所在的位置）部署在服务器的 ROOT（我的结构中必须，不能更改），就会出现问题。还有什么提示。谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T05:19:56.380

我猜是时间问题。也许在初始化 ServletContext A 并尝试获取 ServletContext B 时，ServletContext B 尚未初始化/部署。

为了证明这一点，请在 servlet doGet 中尝试另一个测试，并在您确定两个 webapp 都正确部署时调用它

# jquery - 有没有办法用Jquery按顺序加载页面？

> ID：15674733
> 
> 赞同：2
> 
> 时间：2013-03-28T05:16:57.557
> 
> 标签：jquery, load, loading, sequence

我有一个长滚动页面，所以我想按顺序加载页面的内容。

```
<div id="one">one.php</div>
<div id="two">two.php</div>
<div id="three">three.php</div> 
```

在页面加载时，我只想加载 DIV id ONE 的内容，然后是 DIV id TWO 然后是 DIV id THREE .. 等等..

我如何做到这一点？我创建了 3 个文件（one.php、two.php、three.php）尝试了 .load() 但我无法创建序列。请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T05:22:16.503

尝试使用[jQuery.load();](http://api.jquery.com/load/) ,

```
$("#one").load("../content1.php", function() {
  $("#two").load("../content2.php", function() {
    // likewise
  });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T05:20:59.453

您需要使用[ajax](http://api.jquery.com/jQuery.ajax/)。此方法允许您指定成功时会发生什么。因此，一旦您将加载第一个 div 的内容，在成功处理程序中加载第二个 div 的内容，依此类推。像这样的东西：

```
<div id="div1"></div>
<div id="div2"></div>
<div id="div3"></div>

$.ajax({
    url: 'div1.html',
    type: "GET",
    dataType: "html",
    success: function (response) {

        $("#div1").html(response);

        $.ajax({
            url: 'div2.html',
            type: "GET",
            dataType: "html",
            success: function (response) {

                $("#div2").html(response);

                $.ajax({
                    url: 'div3.html',
                    type: "GET",
                    dataType: "html",
                    success: function (response) {
                        $("#div3").html(response);
                    }
                });

            }
        });

    }
}); 
```

但请记住 - 它不适用于本地文件 - 您需要设置一些 Web 服务器，因为至少`Chrome`不想通过`ajax`. 当然有一种方法可以改变`Chrome`选项，但我不会玩它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T05:23:16.897

你可以这样做 ：

```
$('#one').load("one.php", function() {  // first div loaded
    $('#two').load("two.php", function() { // second div loaded
        $('#three').load("three.php", function() { // third div loaded  });
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T05:24:01.290

如果您的意思是使用 jQuery.load 将内容加载到您的 div 中，则 .load 函数有一个回调函数参数（即在内容加载完成后调用的函数）。有了这个，您可以确保您可以按您需要的顺序加载它们（请参阅[http://api.jquery.com/load/](http://api.jquery.com/load/)）

例如：

```
$("#one").load(url, function(response, status, xhr) {
     $("#two").load( ... etc )
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T05:26:32.850

2种方式：

1) 使用计时器每 2000 毫秒加载一次页面内容，等等。 2) 应该触发一个事件来告诉 JS 应该加载下一部分]

加载可以简单地通过 $('#one').load("one.html");

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T05:30:14.937

**选项 1**
使用 setTimeout

```
setTimeout(function() {
        $("#one").show();
    }, 1000);
setTimeout(function() {
        $("#two").show();
    }, 2000);
setTimeout(function() {
        $("#three").show();
    }, 3000); 
```

**选项 2**
功能 2 功能转换。

```
$(document).ready(function() {
$("#one").show();
showTwo()
});

function showTwo()
{
$("#two").show();
showThree()
}

function showThree()
{
$("#Three").show();
} 
```

**注意**：对于两者，您需要先在加载时隐藏它们。为此，请使用以下功能

```
$(document).ready(function() {
$("#one").hide();
$("#two").hide();
$("#three").hide();
    }); 
```

# websocket - dart 聊天服务器示例，从另一台机器连接

> ID：15674739
> 
> 赞同：1
> 
> 时间：2013-03-28T05:18:01.553
> 
> 标签：websocket, dart, dart-io

如何从另一台物理机连接到聊天服务器示例？

在
[https://www.dartlang.org/slides/2012/06/io12/Bullseye-Your-first-Dart-app-Codelab-googleIO2012.pdf](https://www.dartlang.org/slides/2012/06/io12/Bullseye-Your-first-Dart-app-Codelab-) _

我修改聊天服务器，绑定 192.168.1.5 而不是 127.0.0.1。
我从命令行运行服务器。
从 192.168.1.9 在 chrome 中，我连接到 192.168.1.5:1337/index.html。
在客户端，我得到了聊天客户端页面，但是在状态窗口中，我得到：
[系统]：连接到 Web 套接字
[系统]：Web 套接字关闭，2 秒后重试
[系统]：连接到 Web 套接字
[系统]: web socket关闭，4秒后重试
等

在 192.168.1.5 上使用 chrome 可以正常工作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T07:02:50.693

您可能在其中一台机器（或两台机器）上运行了防火墙，该端口被阻止。

# c# - 如何使用c#从用户控件调用类文件的点击事件

> ID：15674742
> 
> 赞同：-1
> 
> 时间：2013-03-28T05:18:15.193
> 
> 标签：c#

我创建了一个用户控件和一个类文件，用户控件包含保存按钮。当用户单击保存按钮时，我想使用 infocore 类文件中的 ItemClickedEventHandler 调用 Insert() 请帮助我。

C#：用户控制

```
public partial class toolbar : UserControl
{
    public delegate void ItemClickedEventHandler(System.Object sender, ItemClickEventArgs     e);
    public toolbar()
    {
        InitializeComponent();
        inf = new IAToolBar.infocore();
    }
    public event ItemClickedEventHandler ItemClicked;

    public class ItemClickEventArgs
    {
        public string flag;
        public ItemClickEventArgs(string flg)
        {
            flag = flg;
        }
    }

    private void btnsave_Click(object sender, EventArgs e)
    {
        if (ItemClicked != null)
        {
            ItemClicked(sender, new ItemClickEventArgs("Save"));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:25:46.983

`ItemClicked`您需要在创建类实例时订阅该事件`toolbar`。

我没有看到你完整的代码，这里有一个示例：

C#：infocore.cs - 假设您在此处创建工具栏实例

```
 //Creating toolbar object
            toolbar objToolBar = new toolbar();
            objToolBar.ItemClicked += new toolbar.ItemClickedEventHandler(objToolBar_ItemClicked);

            //Handler to ItemClicked Event 
            void objToolBar_ItemClicked(object sender, MainWindow.toolbar.ItemClickEventArgs e)
            {
                 //Call Insert Method From here
            } 
```

# javascript - 使用javascript计算两个日期之间的天数

> ID：15674747
> 
> 赞同：2
> 
> 时间：2013-03-28T05:18:50.000
> 
> 标签：javascript, html, forms

我想要这段代码来计算两个日期之间的天数。但它不起作用。我尝试了很多寻找错误但失败了。任何人都可以请帮忙。我浏览了代码，但没有发现任何问题。计算器还是不行！！！

```
 <!DOCTYPE html>
    <html><head>
     <meta charset="utf-8" />
    <title>jQuery UI Datepicker - Default functionality</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <style>
    .ui-datepicker {font-size:11px;}
    </style>
    <script>
    $(function() {
    $( "#from" ).datepicker();
    });
    $(function() {
    $( "#to" ).datepicker();
    });
    </script>
    </head><body>
    <form class="formwhite">
    <table><tr><td>From:</td><td><input type="text" id="from" onKeyUp="calculate();" />&nbsp;
    </td></tr>
    <tr><td>To:</td><td><input type="text" id="to" onKeyUp="calculate();" /></td></tr>
    </table>
    </form>
    <span id="result"></span>
    <script>
    var calculate = function() {
    var from = document.getElementById("from").value;
    var fromdate = from.slice(3, 5);
    fromdate = parseInt(fromdate);
    var frommonth = from.slice(0, 2); 
    frommonth = parseInt(frommonth);
    var fromyear = from.slice(6, 10); 
    fromyear = parseInt(fromyear);
    var to = document.getElementById("to").value;
    var todate = to.slice(3, 5); 
    todate = parseInt(todate);
    var tomonth = to.slice(0, 2); 
    tomonth = parseInt(tomonth);
    var toyear = to.slice(6, 10); 
    toyear = parseInt(toyear);
    var oneDay = 24*60*60*1000;
    var firstDate = new Date(fromyear,frommonth,fromdate);
    var secondDate = new Date(toyear,tomonth,todate);

    var diffDays = Math.round(Math.abs((firstDate.getTime() - secondDate.getTime())/(oneDay)));
    document.getElementById("result").innerHTML=diffDays;
    }
    </script></body></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:28:12.180

把这两行的连字符去掉，改成我这里的。它现在完美运行：

```
var firstDate = new Date(fromyear,frommonth,fromdate);
var secondDate = new Date(toyear,tomonth,todate); 
```

这是一个链接：[http ://dropoff.us/private/1364450059-1-answer1.html](http://dropoff.us/private/1364450059-1-answer1.html)

更新：更正了删除按钮的链接并将 onchange 处理程序添加到日期选择器：[http ://dropoff.us/private/1364450310-1-answer2.html](http://dropoff.us/private/1364450310-1-answer2.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:29:58.427

由于您使用的是 jquery [datepicker](http://jqueryui.com/datepicker/)，您可以这样做：

```
$('#to').datepicker({
   onSelect: function(dateText, inst) { 
       var d1=new Date(dateText);
       var d2=new Date($('#from').val());       
       var diff = (Math.abs((d2-d1)/86400000)); //days between 2 dates
       $("#result").html(diff);
   }
}); 
```

# c# - 在 c# 中使用来自不同 .cs 文件的变量和方法

> ID：15674752
> 
> 赞同：1
> 
> 时间：2013-03-28T05:19:20.727
> 
> 标签：c#

我对 c# 非常陌生，我正在尝试构建一个小应用程序来帮助一些朋友玩游戏。我认为这将是一个学习语言的好项目。

我正在构建一个表单以允许玩家为 MWO 配置机甲，并且进展顺利，但我的代码变得越来越混乱，因为我将所有内容都放在一个文件中。我想做的是将我的变量分离到它们自己的 .cs 文件中，并将不同的机甲也分离到它们自己的文件中。

我遇到的问题是，当我将变量移动到其自己文件中的新类时，即使我将类和所有变量设置为公共，其余代码也无法再看到变量。我不确定我做错了什么，我确定这是我忘记的相当简单的事情，但对于我的生活，我无法弄清楚我做错了什么。

```
public static class MechCommon_Fields
{
    public const int NUMBER_OF_EQUIPABLE_SECTIONS = 6;
    public const int NUMBER_OF_CRITICAL_SECTIONS = 8;
    public const int NUMBER_OF_SECTIONS = 11;
    public const int UNKNOWN_LOCATION = -1;
    public const int RIGHT_ARM = 0;
    public const int LEFT_ARM = 1;
    public const int RIGHT_TORSO = 2;
    public const int LEFT_TORSO = 3;
    public const int CENTER_TORSO = 4;
    public const int HEAD = 5;
    public const int RIGHT_LEG = 6;
    public const int LEFT_LEG = 7;
    public const int RIGHT_REAR_TORSO = 8;
    public const int LEFT_REAR_TORSO = 9;
    public const int CENTER_REAR_TORSO = 10;
    public const int BOTH_SIDE_TORSOS = 11;
    public const int BOTH_ARMS = 12;
    public const int NUMBER_OF_HARDPOINT_TYPES = 4;
    public const int BALLISTIC = 0;
    public const int ENERGY = 1;
    public const int MISSILE = 2;
    public const int AMS = 3;
    public const int OMNI = 4;
    public const int AMMO = 3;
    public const int OTHER = 4;
    public const int SELECTED = 5;
    public const double SRM_DAMAGE = 2.5;
    public const double LRM_DAMAGE = 1.8;
    public const double SRM_RECYCLE = 3.5;
    public const double LRM_RECYCLE = 3.25;
    public const double SRM_DELAY = 0.25;
    public const double LRM_DELAY = 0.5;
    public const double LRM_IMPULSE = 0.8;
    public const int SRM_RANGE = 270;
    public const int MRM_RANGE = 450;
    public const int LRM_MIN_RANGE = 180;
    public const int ENHANCED_LRM_MIN_RANGE = 90;
    public const int LRM_RANGE = 630;
    public const int LRM_MAX_RANGE = 1000;
    public const int EXTENDED_LRM_MIN_RANGE = 300;
    public const int EXTENDED_LRM_RANGE = 1140;
    public const int EXTENDED_LRM_MAX_RANGE = 1140;
    public const int SRM_SPEED = 300;
    public const int STREAK_SRM_SPEED = 200;
    public const int LRM_SPEED = 100;
    public const int ARTEMIS_IV_CRITICALS = 1;
    public const int ARTEMIS_IV_COST = 1;
    public const double ARTEMIS_IV_TONNAGE = 1.0;
    public const int LASER_RANGE_MODIFIER = 2;
    public const int PROJECTILE_RANGE_MODIFIER = 3;
    public const int INTERNALS = 0;
    public const int ARMOR = 1;
    public const int INTERNALS_TOTAL = 8;
    public const int ARMOR_TOTAL = 8;
    public const int NUMBER_OF_MAIN_SECTION = 6;
    public const int NUMBER_OF_LESSER_SECTION = 3;
    public const int NUMBER_OF_MAIN_SECTION_CRITICALS = 12;
    public const int NUMBER_OF_LESSER_SECTION_CRITICALS = 6;
    public const int BALLISTIC_MAX_RANGE_MODIFIER = 3;
    public const int ENERGY_MAX_RANGE_MODIFIER = 2;
    public const int LOWER_ARM_ACTUATOR = 0;
    public const int HAND_ACTUATOR = 1;
    public const int UNKNOWN_ITEM_TYPE = 0;
    public const int COMPONENT_ITEM_TYPE = 1;
    public const int WEAPON_ITEM_TYPE = 2;
    public const int AMMO_ITEM_TYPE = 3;
    public const int EQUIPMENT_ITEM_TYPE = 4;
    public const int HEAT_SINK_ITEM_TYPE = 5;
    public const int JUMP_JET_ITEM_TYPE = 6;
    public const int ARMOR_ITEM_TYPE = 7;
    public const int INTERNAL_ITEM_TYPE = 8;
    public const int CASE_ITEM_TYPE = 9;
    public const int ENGINE_ITEM_TYPE = 10;
    public const int OTHER_ITEM_TYPE = 11;
    public const int TORSO = 0;
    public const int ARM = 1;
    public const int NUMBER_OF_MOVING_SECTIONS = 2;
    public const int YAW = 0;
    public const int PITCH = 1;
    public const int AXIS_OF_MOVEMENT = 2;
    public const double DOUBLE_HEAT_SINK_DISSIPATION = 1.4;
} 
```

}

我试过这样调用变量：NUMBER_OF_EQUIPABLE_SECTIONS = 10;

和：

```
MechCommon_Fields.NUMBER_OF_EQUIPABLE_SECTIONS = 10; 
```

两者都不起作用，我非常难过。

感谢您能给我的任何见解。

好的，这是我遇到的问题的更好和更新的示例。

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace MechLab
{
    public class Mechs
    {
        public int enginePower;
        public int tonnage;
        public double maxEngineRating;
        public int stockEngineRating;
        public string weightClass;
        public double maxSpeed;

        public string mechChassis;
        public string mechVariant;
        public double speed;
        public long basecost;

        public int ballisticHP;
        public int missileHP;
        public int energyHP;
        public int amsHP;
        public int omniHP;

        public int armorHead;
        public int armorCT;
        public int armorRT;
        public int armorLT;
        public int armorRCT;
        public int armorRRT;
        public int armorRLT;
        public int armorRA;
        public int armorLA;
        public int armorRL;
        public int armorLL;
        public int totalArmor;
    }
} 
```

现在，我在另一个文件中有一个方法，它将引用其中一些变量以将它们显示在表单中。

```
public void loadMech()
        {
            maxSpeed = ((stockEngineRating / tonnage) * 16.2);

            txtMechChassis.Text = mechChassis;
            txtMechVariant.Text = mechVariant;
            txtSpeed.Text = maxSpeed.ToString();
            txtTonnage.Text = tonnage.ToString();

        } 
```

我得到每个变量的“在当前上下文中不存在”错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:21:33.757

您可以使用部分类。更多细节[在这里](http://msdn.microsoft.com/en-us/library/wa80x488.aspx)。

使用部分类，您可以像往常一样使用您的变量、常量等，即使它在单独的文件中定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T05:26:26.017

如果`Mech_CommonFields`在与您尝试使用它的类不同的命名空间中定义，则需要在文件[`using`](http://msdn.microsoft.com/en-US/library/sf0df423%28v=vs.80%29.aspx)顶部添加指令`.cs`。

```
using MyProject.Namespace; // replace with your namespace 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T05:45:16.820

如果您发布的类`Mech_CommonFields`（

```
public class Mech_CommonFields
{

    public int NumberOfEquipableSections { get; set; }
    public int NumberOfSections { get; set; }
    public int UnknownLocation { get; set; }
    public int RightArm { get; set; }
    public int LeftArm { get; set; }
    public int RightTorso { get; set; }
    public int LeftTorso { get; set; }
    public int CenterTorso { get; set; }
    // etc.
} 
```

然后你可以创建一个具有特定类型属性的新机甲，如下所示：

```
Mech_CommonFields myMech = new Mech_CommonFields() { 
                               NumberOfEquipableSections = 6,
                               NumberOfSections = 11,
                               UnknownLocation = -1 }; 
```

自动属性（如上所示）允许您在实例化它时使用您想要的值初始化类，只需在实例化对象时将值分配给您想要的属性（如第二个代码示例中所示）。这具有与 IntelliSense 良好配合的额外好处 - 当您在花括号内时，它将弹出一个属性列表供您使用，并且只会显示您尚未用于该实例的属性）。

如果您需要在运行时为字段分配值，则使用`const`没有任何意义，因为无法修改常量。

同样，虽然静态允许您在程序运行期间随时更改值，但它会更改引用它们的所有对象的值。换句话说，如果您有 3 个机甲，并将其中一个的 NUMBER_OF_EQUIPABLE_SECTIONS 的值设置为 12，那么所有机甲的值都将设置为 12（如果字段/属性被标记为静态）。

同样，不确切地知道你是如何使用你的课程的，以及程序的其余部分是什么样子的，很难给出一个好的答案，但这有望让你朝着正确的方向前进。

有关更多信息，请参阅这些链接：

[自动实现的属性](http://msdn.microsoft.com/en-us/library/bb384054.aspx)

[如何：使用对象初始化器初始化对象](http://msdn.microsoft.com/en-us/library/vstudio/bb397680.aspx)

[常量](http://msdn.microsoft.com/en-us/library/e6w8fe1b%28v=vs.110%29.aspx)

[静止的](http://msdn.microsoft.com/en-us/library/98f28cdx.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T05:34:41.973

You cant assign values to constants:

```
MechCommon_Fields.NUMBER_OF_EQUIPABLE_SECTIONS = 10; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T05:27:13.520

您可以将静态放在每个变量之前。

有点像这样：

```
public static int AMMO = 3; 
```

这应该有助于解决问题。

# javascript - Chrome 扩展 - 内容脚本 - 获取当前选项卡的内部文本 - 不起作用

> ID：15674755
> 
> 赞同：1
> 
> 时间：2013-03-28T05:19:32.050
> 
> 标签：javascript, jquery, json, google-chrome, google-chrome-extension

我正在尝试`innerText`在 chrome 扩展中获取当前打开的选项卡。

这是我的**manifest.json**：

```
{
  "manifest_version": 2,

  "name": "meow",
  "description": "meow-meow-meow",
  "version": "1.0",

  "browser_action": {
  "default_icon": "icon2.png",
  "default_popup": "popup.html"
  },

  "background": {
  "scripts": ["background.js"]
  },

  "content_scripts": [
   {
     "matches": ["<all_urls>"],
     "js": ["contentscript.js"]
   }
  ],

  "permissions": [
  "http://*/*",
  "https://*/*",
  "contextMenus",
  "tabs"
  ]

} 
```

这是我的**contentscript.js**：

```
function getText(){
return document.body.innerText
}

console.log(getText()); 
```

但它没有在控制台上记录任何内容！我错过了什么？

**编辑**：有没有更好的方法从当前选项卡获取 HTML 内容？

**更新编辑**：

**这在我朋友的 chrome 上运行良好，但在我的 chrome 上运行良好，两个 Chrome 版本都是 26。**

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T10:12:44.983

### 在我的浏览器上运行良好

重新加载扩展。

如果仍然无法正常工作，请退出 Google Chrome 并重新登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:00:30.513

它适用于我的 chrome 浏览器。

打开 url `chrome://extensions/`，加载插件目录。并确保它正确加载，并将其标记为启用。

# sql - 确定字符串在 SQL 的列中是否可用

> ID：15674756
> 
> 赞同：1
> 
> 时间：2013-03-28T05:19:33.700
> 
> 标签：sql, sql-server, sql-server-2008, select

我有一个包含字段 ID、名称和主题 ID 的表。

其中 SubjectID 有许多带有逗号分隔符的值，例如。1,5,6,8

现在如果传递参数 5，那么我想找到 SubjectID 中有 5 的所有行。

我使用了 findstring 但它不起作用。

那么如何在 Sql server 2008 中实现这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T05:21:36.287

```
SELECT  *
FROM    TableName
WHERE   ',' + csvValue + ',' LIKE '%,' + @value + ',%' 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!6/e4c81/2)

作为建议，您需要将表构造为 3 表设计，假设您喜欢将 a 映射`Student`到`Subject`. 这似乎是`Many-to-Many`一种关系。

**学生桌**

*   **学生证 (PK)**
*   学生姓名
*   *其他栏目...*

**主题表**

*   **主题ID**
*   主题名称
*   *其他栏目...*

**Student_Subject 表**

*   StudentID (FK) 和 SubjectID 的复合主键
*   主题 ID (FK)

# java - java - 创建 Web 服务器 - 处理传入的 http 请求

> ID：15674757
> 
> 赞同：1
> 
> 时间：2013-03-28T05:19:38.363
> 
> 标签：java, http, servlets

我正在尝试用 Java 编写一个 Web 服务器（这是我第一次这么简单的 Web 服务器）。我不确定如何处理 http get 和 post 请求。

现在写我所拥有的只是一个带有服务器套接字的循环，连接除外，并使用 BufferedReader 接收传入消息（作为文本）。

我知道你可以扩展一个 Servlet 类并使用

*   `protected void doGet(HttpServletRequest servlet_request, HttpServletResponse servlet_response)`， 和
*   `protected void doPost(HttpServletRequest servlet_request, HttpServletResponse servlet_response)`

但我不知道如何将原始传入消息从套接字转换/提取为 doGet() 和 doPost() 所需的参数。

有人能给出一个基本的例子和/或解释该怎么做吗？

非常感谢

另外，作为事后的想法，扩展 Web 服务器来处理 JSP 页面会不会很简单？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T05:24:37.143

为此，您首先需要了解`http`数据包格式。[这个链接](http://www.tutorialspoint.com/http/http_messages.htm)会有所帮助

一旦您知道数据包的格式，您就可以提取方法`(GET/POST/...)`和其他所需信息以继续。

# jquery - 如何使用 jquery 更改文本框的背景颜色 3 秒？

> ID：15674762
> 
> 赞同：3
> 
> 时间：2013-03-28T05:20:06.513
> 
> 标签：jquery, forms, time, submit

我正在做一个文本框，如果不符合要求，那么背景将变为黄色，但我只希望背景保持黄色 3 秒....我该怎么做？

这是我目前拥有的，但黄色的bg仍然存在......

```
$("#form").on("submit",function(){

user = $("#username").val().length;
userErrorBg = $('#username').css('background','yellow');

if(user < 3 || user > 6)
{

    setInterval("userErrorBg",0);

}

}) 
```

我正在考虑在某处放置一个 clearInterval 但我需要一个时间计数，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T05:50:43.887

`setTimeout(function(){},time)`如果您认为它在特定时间段内仅工作一次而不是在`setInterval(function(){}, time)`给定特定时间段后重复该功能，则最好使用它。

试试这个：

```
$("#form").on("submit", function () {
    user = $("#username").val().length;
    if (user < 3 || user > 6) {
       $('#username').css('background', 'yellow'); //<---need to put it here
       setTimeout(function () {
           $('#username').css('background', 'white').focus(); //<--add focus too
       }, 3000);
       return false;
    } 
}); 
```

### [查看演示小提琴](http://jsfiddle.net/VSPep/)

### [这篇文章可以帮助你](https://stackoverflow.com/questions/729921/settimeout-or-setinterval)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T05:21:19.997

您应该尝试使用[setTimout()](http://www.w3schools.com/jsref/met_win_settimeout.asp)而不是[setInterval()](http://www.w3schools.com/jsref/met_win_setinterval.asp)。setTimeout 被触发一次并且不会自我重复，并且您不需要清除间隔，因为您必须这样做`setInterval`。

```
setTimout(function(){
    $('#username').css('background','white');
},3000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T05:25:19.117

```
$("#form").on("submit",function(){ 
```

试试这个-

```
user = $("#username").val().length;
userErrorBg = $('#username').css('background','yellow').delay(3000).css('background','white');

if(user < 3 || user > 6)
{

    setInterval("userErrorBg",0);

}

}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T05:51:34.857

试试这个..

```
$("#form").on("submit",function(){

user = $("#username").val().length; 

if(user < 3 || user > 6)
{

    setTimeout(function(){
        $('#username').css('background','yellow');
    },0);

    setTimeout(function(){
        $('#username').css('background','white');
    },3000);
}

}); 
```

# php - 尝试获取墙 xml 相同的元素值，然后应用于其他 xml

> ID：15674764
> 
> 赞同：2
> 
> 时间：2013-03-28T05:20:13.183
> 
> 标签：php, xml, xpath

这是我的 general.xml 文件：-

```
<?xml version="1.0" encoding="UTF-8"?>
<results>
    <numFound>10</numFound>
    <QTime>4</QTime>
    <result>
        <distance>1071.59873299109</distance>
        <name>Irungattukottai</name>
    </result>
    <result>
            <distance>1892.33578431928</distance>
            <name>Valapuram</name>
       </result>
</results> 
```

region.xml:-

```
<childrens>
    <child_5068 entity_id="5069" value="Irungattukottai" parent_id="4068"/>
    <child_5068 entity_id="7140" value="Valapuram" parent_id="4068"/>
</childrens> 
```

产品.xml：-

```
<products>
  <product_id value="1">
    <tab_id value="351">
      <tab_name value="test1"/>
      <dist_region value="5069"/>
      <dist_region value="5069"/>
      <dist_region value="5069"/>
    </tab_id>
  </product_id>
  <product_id value="2">
    <tab_id value="352">
      <tab_name value="test2"/>
      <dist_region value="4457"/>
      <dist_region value="7140"/>
      <dist_region value="5069"/>
    </tab_id>
  </product_id>
</products> 
```

我有这三个 xml 文件，我想尝试这样的事情。
一般来说.xml文件元素`<name>Irungattukottai</name>`
如果这个名字是exit in`region.xml`然后到达那里`entity_id`
如果entity_id是exit in`product.xml`然后返回那里`product_id`元素属性值...

我正在尝试这段代码：-

```
<?php
$g = file_get_contents('general.xml');
$r = file_get_contents('region.xml');
$p = file_get_contents('product.xml');

$general = simplexml_load_string($g);
$region = simplexml_load_string($r);
$product = simplexml_load_string($p);

$name = (string)$general->result->name;

if (strlen(trim($name))==0) exit('name not found');

list($entity) = $region->xpath("//*[@value='$name']/@entity_id");
$entity=(string)$entity;

if (strlen(trim($entity))==0) exit('entity_id not found');

list($prid) = $product->xpath("//dist_region[@value='$entity']/ancestor::product_id/@value");
$prid=(string)$prid;

echo "City Name:- $name, Entity_id:- $entity, Product_id:- $prid";
?> 
```

这段代码可以正常工作，但只有一个值，例如：-在第一个和第二个根`general.xml`中有两个根， 但我的代码只能获取第一个元素，而不是尝试获取墙 xml 文件...`<name>Irungattukottai</name>``<name>Valapuram</name>`

这是我的正确输出：-

```
city Name:- Irungattukottai, Entity_id:- 5079, Product_id:- 1 
```

但我想要这种类型的输出： -

```
city Name:- Irungattukottai, Entity_id:- 5079, Product_id:- 1
city Name:- Valapuram , Entity_id:- 7140, Product_id:- 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:24:39.697

您需要迭代 $general 的数组。

**试着做 ：**

```
echo '<pre>';
print_r($general);
echo '</pre>'; 
```

检查您是否获得了一个包含 xml 文件中所有元素的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:37:30.083

您获取 general.xml 提要的代码是可以的。

你可以得到这个名字

```
$name1 = (string)$general->result[0]->name;
$name2 = (string)$general->result[1]->name;
or you can use loop to get name one by one.

<?php
foreach($general->result as $row){
if(isset($row->name)){
  // do your logic here for region.xml and then for product.xml
}
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T06:02:17.833

试试这个：

```
$xml = simplexml_load_file( 'general.xml' );
$cities = $xml->xpath( '//result/name' );

$cityCount = count( $cities );
if( $cityCount ) {
    $region = simplexml_load_file( 'region.xml' );
    foreach( $cities as $city ) {
        $regions = $region->xpath( '//*[@value="'. ( string ) $city . '"]/@entity_id' );
        if( count ( $regions ) ) {
            $product = simplexml_load_file( 'products.xml' );
            $products = $product->xpath( '//dist_region[@value="' . ( string ) $regions[ 0 ][ 'entity_id' ] . '"]/ancestor::product_id/@value' );
            if( count( $products ) ) {
                foreach( $products as $p ) {
                    echo 'city Name:- ' . ( string ) $city . ', Entity_id:- ' . ( string ) $regions[ 0 ][ 'entity_id' ] . ', Product_id:- ' . $p[ 'value' ] . "\n";
                }
            }
        }
    }
} 
```

**输出**

```
city Name:- Irungattukottai, Entity_id:- 5069, Product_id:- 1
city Name:- Irungattukottai, Entity_id:- 5069, Product_id:- 2
city Name:- Valapuram, Entity_id:- 7140, Product_id:- 2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T07:41:49.797

使用以上两个答案，可以试试这个：-

```
 <?php
    foreach($general->result as $row){
    if(isset($row->name)){
    //create one variable and store in value.
    $name = $row->name;
     //all you code for region.xml and then for product.xml

    }
    echo "name:- $name,Entity:- $entity, product:- $prid"."<br>";
    }

?> 
```

# javascript - Javascript oops：使用或不使用原型定义函数

> ID：15674766
> 
> 赞同：1
> 
> 时间：2013-03-28T05:20:19.683
> 
> 标签：javascript, oop

下面是我的课：

```
function myfunc(){
    // some code
} 
```

1) 声明一个类的方法/函数

```
myfunc.getInstance = function(){
          // some code
}; 
```

或者，我可以定义如下：

```
myfunc.prototype.getInstance = function(){
    // some code
}; 
```

请告诉我使用或不使用原型定义方法/函数有什么区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-11-11T13:53:23.170

和

`myfunc.prototype.getInstance = function(){ // some code };`

如果您创建任何继承 myfunc 的对象，它将能够使用原型链访问 getInstance 方法。新对象的 __ proto __ 将指向其父对象的原型，即 myfunc 的

和

```
myfunc.getInstance = function(){
      // some code}; 
```

getInstance 方法不能被继承，因此只有 myfunc 能够调用它而不是继承它的对象。

例子

```
function myfunc(){

}

myfunc.getInstance = function(){
    console.log("I can be invoked only by myfunc")
}

myfunc.prototype.getInstance2 = function(){
    console.log("I can be inherited and called by other objects too")
}

let newobj = new myfunc();

newobj.getInstance2();

// I can be inherited and called by other objects too

newobj.getInstance();
// Uncaught TypeError: newobj.getInstance is not a function

myfunc.getInstance();
// I can be invoked only by myfunc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:25:55.630

原型函数旨在在类的对象上调用（就像 OOP 中的普通类）。可以直接在类上调用普通函数（如 OOP 中的静态类）。

```
function Foo ()
{
}

//Should be called through Foo.SayHello()
Foo.SayHello = function ()
{

}

/*
Should be called on the object of Foo
var MyObject = new Foo();
MyObject.SayHello();
*/

Foo.prototype.SayHello = function ()
{
} 
```

# c - 使用堆栈跟踪在 GDB (Eclipse) 中的 Coldfire MCF5235 上调试未知程序异常

> ID：15674768
> 
> 赞同：3
> 
> 时间：2013-03-28T05:20:24.453
> 
> 标签：c, gdb, embedded, callstack, coldfire

在通过第三方库使用 CAN 控制器时，在我的 C 应用程序中的某个时刻（运行裸机，监督模式），发生了非法指令错误，该错误被 ISR 捕获；到那时，ISR可用的异常堆栈帧中的程序计数器，故障和返回地址已经为0。当我第一次遇到它时，我能够备份堆栈，看到这样的堆栈跟踪：

```
Thread [1] <main> (Suspended : Step)    
    0x0    
    0x41f42200    
    ... 
    timerInterrupt() at timer.c:1,175 0x2432ec    
    0x41902210
    ...
    main() at main.c:1,433 0x211a44 
```

其中 0x40000000 是此处理器的 IPSBAR。

我以可以快速重现此问题的已知状态多次运行该应用程序，通常在跳转到 0x0 之前的中断/异常时下降到完全相同的堆栈跟踪/保存的指令。通过测试，我注意到跳转只会发生在中断被禁用后重新启用之后的指令上，或者发生在没有屏蔽中断的代码段中。因此，我认为这一定是导致问题的用户中断，尽管我不确定为什么它似乎会尝试调用在掩码中未启用中断时未设置的处理程序。我不是 100% 确定 IPSBAR 范围内地址的含义，之前和 ISR 被调用，但因为它们对于该 ISR 的每次调用都是相同的，

因此，在添加正常处理程序并再次运行应用程序之前，我向中断控制器 0 上的所有中断向量添加了一个默认中断处理程序 - 你瞧，当该可疑中断被触发时，默认处理程序中设置的断点被命中（例如，堆栈看起来像这样）：

```
Thread [1] <main> (Suspended : Step)    
    __DefaultInterrupt() at interrupts.c    
    0x41f42200    
    ...
    timerInterrupt() at timer.c:1,175 0x2432ec    
    0x41902210       
    ...
    main() at main.c:1,433 0x211a44 
```

观察那个函数中SWIACK0的值，我看到中断源是100（用户中断36，PIT0中断）。好吧，它已经有一个 ISR（上面的堆栈中的 timerInterrupt() ）。接下来，我检查了保存 ISR 函数指针的 RAM 区域，以查看定时器中断处理程序函数指针是否已损坏，但在设置所有中断处理程序的时间与默认处理程序中的断点被命中之间没有变化。

我还注意到，如果我将 CAN 控制器的中断处理程序的中断级别设置为 7（同一个中断处理所有 18 个 FlexCAN 中断源），则不会出现问题。我还不确定该怎么做，但这个问题确实表明 CAN 库或控制器存在问题。

**编辑-此时我不确定哪个 ISR 正在处理中断，但我已将单独的处理程序添加到最初怀疑的中断源中，并且它始终是中断源 63-根据文档，这是一个未使用的中断，最后一个在中断控制器 0 上。**

**编辑 2：我想到 SWIACK0 中的活动中断源实际上是正确的，但可能还有另一个问题，比如向量基地址可能被重写。不幸的是，我不确定如何将其读回，因为它是只写值。我最初认为 PIT0 的中断源在该寄存器中，因为默认中断处理程序是从定时器中断处理程序中调用的，但如果定时器中断不在堆栈中，它*也会被指示。*参考手册表明片上调试设备可用于回读控制寄存器和 VBR，但我在调试手册中没有看到任何信息来执行此操作。**

长话短说，我想找出跳转到超空间的来源，或者我可以使用什么信息来获取它。

*   IPSBAR 范围内的地址被推入堆栈是什么意思？

*   由于那些寻址似乎完全与它们的源相关联，有没有办法使用堆栈中的值（例如，第一个示例中的 0x41f42200）来确定将
    其推入堆栈的中断/异常的源？

*   我会完全错了吗？我非常乐意
    放弃所有这些想法。

感谢您提供任何帮助或见解，当我可以将两个脑细胞揉在一起时，我会用更多（简洁的）信息来更新它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:20:28.573

解决了这个问题——原来是在 CPU 的勘误表中处理的。

# ios - 从替换细节控制器的表格视图单元格中转出不会触发

> ID：15674769
> 
> 赞同：0
> 
> 时间：2013-03-28T05:20:26.307
> 
> 标签：ios, xcode

我正在使用一个`UISplitViewController`主/详细应用程序。主控制器提供了一个具有不同单元格的表视图，以替换细节视图控制器。*选择单元格时，不会*触发相应的替换序列。

您可以在下图中看到，我有一个替换 segue 连接到标有“省名”的表格视图单元格。

![带有替换序列的主控制器表视图单元](../Images/73089cdab7022066f46996fd15df7a6b.png) ![在此处输入图像描述](../Images/1a9ecbec2e695908f1c2196e66f0ed5e.png)

该`tableView:didSelectRowAtIndexPath:`方法被调用，我可以通过编程方式生成 segue `performSegueWithIdentifier:sender:`，但我*不*应该这样做！我经常从表格视图单元格中使用 push segue，没有问题。

有趣的是，如果我将一个替换转场连接到一个`UIBarButtonItem`它就可以正常工作（即，我不必*以*编程方式执行转场）。这个问题特别是要替换连接到表格视图单元格的 segues。

这是一个错误还是我在这里忽略了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:16:38.660

可能您在创建转场时选择了“附件动作”而不是“选择转场”？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:42:07.833

在处理了一段时间之后，我想我知道为什么替换segues对于表格视图单元格*不是自动的。*很多时候，当前的细节视图控制器是正确的——你只是想改变它的“细节项”。只有当您需要不同类型的细节控制器时，然后（并且仅在那时）您才想要执行 segue 以替换当前的细节视图控制器。因此，我将替换转场与主视图控制器（而不是表格单元格）链接起来，并使用以下逻辑，仅在真正需要新控制器时才执行转场：

```
- (void)tableView:(UITableView *)tv  didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    // ...

    if (indexPath.section == 0) {  // Canadian Province
        if ([self.detailViewController isKindOfClass:[ProvinceDetailViewController class]]) {
            self.detailViewController.detailItem = 
                          [appDelegate.provincesDictionary objectForKey:place];
            self.detailViewController.title = place;
        } else {
            [self performSegueWithIdentifier:@"ProvinceSegue" sender:self];
        }
    }

    // ...
} 
```

PS 如果您对拆分视图控制器使用替换转场，请确保拆分视图委托*不是*详细视图控制器（这是 Xcode 模板安排事物的方式）。我创建了一个独立的委托对象，它在调用关联的委托方法时发送通知。这似乎工作得很好。

# android - 我什么时候应该在片段中获得宽度视图

> ID：15674770
> 
> 赞同：9
> 
> 时间：2013-03-28T05:20:53.110
> 
> 标签：android, android-layout, android-fragments

我在 Linearlayout 中以编程方式添加 View（按钮）。LinearLayout 在 Fragment 中由 XML 布局。

我想获得按钮宽度，但总是返回 0。

我用谷歌搜索了这个问题，

getWidth 仅适用于WindowFocusChanged。

```
 public void onWindowFocusChanged(boolean hasFocus) { } 
```

但是 Fragment 没有这个方法。

如何在片段中获取视图宽度？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-02-15T18:37:37.823

我遇到了类似的问题，并在 Fragment 回调 onViewCreated() 中解决了它，如下所示：

```
@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);
    view.post(new Runnable() {
        @Override
        public void run() {
            // do operations or methods involved
            // View.getWidth(); or View.getHeight();
            // here
        }
    });
} 
```

run() 在渲染所有视图后运行...

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-28T06:07:17.540

查看帖子[GlobalLayoutListener](https://stackoverflow.com/questions/4142090/how-do-you-to-retrieve-dimensions-of-a-view-getheight-and-getwidth-always-r)。您可以像使用过的那样在您的`Button`in上使用侦听器。它也比.`onCreateView()``onWindowFocusChanged``onWindowFocusChanged()`

尝试如下：

> ```
>  final View myView = profileContainer.findViewById(R.id.sub_page_padding);
>   ViewTreeObserver vto = profilePadding.getViewTreeObserver();
>   vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
>     @Override
>     public void onGlobalLayout() {
>       Log.d("TEST", "Height = " + myView.getHeight() + " Width = " + myView.getWidth());
>       ViewTreeObserver obs = profilePadding.getViewTreeObserver();
>       obs.removeGlobalOnLayoutListener(this);
>     }
>   }); 
> ```

# c++ - C++ - 成员对象中枚举的行为

> ID：15674772
> 
> 赞同：2
> 
> 时间：2013-03-28T05:21:02.893
> 
> 标签：c++, qt, class, pointers, member

我在 C++ 中使用 Qt 并且正在努力解决枚举问题。考虑一个类似下面的案例：

在 GitHub 上克隆：[https ://github.com/jif/enum](https://github.com/jif/enum)

```
// memberclass.h =======================================================
#ifndef MEMBERCLASS_H
#define MEMBERCLASS_H

#include <QObject>

class MemberClass : public QObject
{
    Q_OBJECT
public:
    enum ErrorType {
        NoError,
        IsError
    };
    explicit MemberClass(QObject *parent = 0);
    void setError(ErrorType errorType);
    MemberClass::ErrorType error() const;
    void otherMethod();
private:
    MemberClass::ErrorType mError;
};

#endif // MEMBERCLASS_H

// memberclass.cpp =======================================================
#include "memberclass.h"
#include <QDebug>

MemberClass::MemberClass(QObject *parent) :
    QObject(parent)
{
    mError = NoError;
    qDebug() << "mError initialized.";
}
MemberClass::ErrorType MemberClass::error() const {
    return mError;
}
void MemberClass::setError(ErrorType errorType) {
    mError = errorType;
}
void MemberClass::otherMethod() {
    qDebug() << "    In otherMethod()...";
    qDebug() << "      mError = " << mError;
    qDebug() << "      NoError = " << NoError;
    qDebug() << "      IsError = " << IsError;
    qDebug() << "    End otherMethod()";
}

// parentclass.h =======================================================
#ifndef PARENTCLASS_H
#define PARENTCLASS_H

#include <QObject>
#include "memberclass.h"

class ParentClass : public QObject
{
    Q_OBJECT
public:
    explicit ParentClass(QObject *parent = 0);
    void testEnumStuff();
private:
    MemberClass objectMember;
    MemberClass *pointerMember;
};

#endif // PARENTCLASS_H

// parentclass.cpp =======================================================
#include "parentclass.h"
#include <QDebug>

ParentClass::ParentClass(QObject *parent) :
    QObject(parent)
{
    pointerMember = new MemberClass(this);
}
void ParentClass::testEnumStuff() {
    qDebug() << "Just initialized...";
    qDebug() << "  pointerMember::mError = " << pointerMember->error();
    qDebug() << "  objectMember::mError =  " << objectMember.error();
    qDebug() << "Calling otherMethod() on each member...";
    qDebug() << "  In pointerMember...";
    pointerMember->otherMethod();
    qDebug() << "  In objectMember...";
    objectMember.otherMethod();
    qDebug() << "  pointerMember::mError = " << pointerMember->error();
    qDebug() << "  objectMember::mError =  " << objectMember.error();
    qDebug() << "Done.";
}

// main.cpp =======================================================
#include <QCoreApplication>
#include "parentclass.h"

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);
    ParentClass parent;
    parent.testEnumStuff();
    return a.exec();
}

// enum.pro =======================================================
QT       += core

QT       -= gui

TARGET = enum
CONFIG   += console
CONFIG   -= app_bundle

TEMPLATE = app

SOURCES += main.cpp \
    parentclass.cpp \
    memberclass.cpp

HEADERS += \
    parentclass.h \
    memberclass.h 
```

`mError`使用类型变量`ErrorType`不能按预期工作（它在执行过程中会出现奇怪且不一致的值）。

我得到这样的输出：

```
mError initialized.
mError initialized.    
Just initialized... 
  pointerMember::mError =  0 
  objectMember::mError =   0 
Calling otherMethod() on each member... 
  In pointerMember... 
    In otherMethod()... 
      mError =  0 
      NoError =  0 
      IsError =  1 
    End otherMethod() 
  In objectMember... 
    In otherMethod()... 
      mError =  13498688 
      NoError =  0 
      IsError =  1 
    End otherMethod() 
  pointerMember::mError =  0 
  objectMember::mError =   13498688 
Done. 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T03:48:05.743

您没有定义默认构造函数，`MemberClass`编译器提供的隐式构造函数用于`objectMember`在`ParentClass`. 隐式构造函数不会`mError`为您初始化，因此您获得的随机值。

将显式默认构造函数添加到`MemberClass`：

```
MemberClass::MemberClass() :
    QObject(NULL), mError(NoError)
{
} 
```

或成员初始化`ParentClass`：

```
ParentClass::ParentClass(QObject *parent) :
    QObject(parent), objectMember(NULL)
{
    pointerMember = new MemberClass(this);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:35:42.413

在您的成员声明中

```
private:
    MemberClass objectMember; 
```

您没有为构造函数提供参数。它正在调用 QObject 的默认构造函数（不在您的代码中）并且不会初始化枚举。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T20:15:30.683

我只是将您的代码复制并粘贴到一个干净的项目中。当使用 MSVC2010 使用 Qt 4.8.0 编译时，我觉得一切正常。您是否重建了项目并重新运行了 qmake？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-07T18:42:36.387

我克隆了你的代码运行它，没有问题。
我建议你清理你的项目并重新构建它。代码看起来也不错。我认为编译器缓存在代码修改期间被损坏（有时会发生）并且生成了错误的代码，干净的项目应该修复它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-08T12:58:38.943

实际上，您并没有获得自动生成的构造函数。这样做的原因是，您只会在一个根本没有定义构造函数的类中获得这样的构造函数。您为 MemberClass(QObject *parent = 0) 定义了一个构造函数，但是因为它存在，所以没有为您分配一个自动生成的 noargs 构造函数。

一个类似但相关的例子可以说明问题的类别：

```
class Base
{
    /*Has a constructor therefore does not get a free 
     noargs constructor*/
    Base(int i) {}; 
};

class Derived : public Base
{
};

int main()
{
     /*Not actually possible because Derived will get a free noargs constructor
       which will attempt to invoke the non existant no args constructor of Base.
     */
     Derived d; 

     return 0;
} 
```

你可以在[这里看到结果](http://ideone.com/Cf7dyR)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T05:45:05.447

如果您在堆栈上定义对象，例如：

```
MemberOfMyClass member; 
```

当您超出范围时，您的对象信息将丢失

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-02T19:15:18.610

MemberClass 单参数构造函数具有行 << "mError initialized."; 输出中没有。编译器生成的默认构造函数对成员变量的期望值一无所知，所以如果为这些分配的内存有垃圾，这个垃圾就会泄露。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-08T05:09:20.643

您永远不会在 ParentClass 的构造函数中初始化“objectMember”值，但您确实初始化了“pointerMember”。我敢打赌，“objectMember”也是在测试中给您带来问题的价值，这不是巧合。我没有 QT，但是如果你添加会发生什么

```
objectmember = *pointerMember; 
```

初始化指针成员后到构造函数？自从我玩过 C++ 以来已经有一段时间了，所以我可能遗漏了一些明显的东西，但我敢打赌这是你的问题。

另请注意，上次我使用它时，Visual Studio 的调试器倾向于为程序员将所有未初始化的值设置为 0。一旦实际编译了代码，就不会发生这种情况（尽管我相信某些编译器可能会这样做，例如 GCC），因此这可能就是您看到此错误而其他人没有看到的原因。因此，将您要查找的值设为“IsError”可能会有所帮助 - 这样，您要查找的值将是 1，而不是默认的未初始化值。

# javascript - 打印[[对象对象]，[对象对象]]到json数组

> ID：15674773
> 
> 赞同：1
> 
> 时间：2013-03-28T05:21:09.033
> 
> 标签：javascript, json

我想以同样的`[object Object],[object Object]`方式打印`"[[{ 'x': '1', 'y': '0' }, { 'x': '2', 'y': '1' }]]";`
它是如何在 javascript 中实现的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T05:24:05.017

如果您想要 JavaScript 对象的字符串表示，请使用[JSON.stringify()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)

# jquery - jquery 获取 IIS Web 应用程序名称？

> ID：15674784
> 
> 赞同：1
> 
> 时间：2013-03-28T05:21:49.977
> 
> 标签：jquery

我在 IIS 中部署了一个 mvc .net 应用程序，其中 web app = 'appTest'。是否可以在 jQuery 中获取 Web 应用程序名称？

在此先感谢，本

# ruby - Heroku 上未定义的方法字节大小

> ID：15674790
> 
> 赞同：1
> 
> 时间：2013-03-28T05:22:12.163
> 
> 标签：ruby, curl, heroku, icalendar

我有一个在我的电脑上运行良好的 heroku 应用程序，但是当它在 Heroku 上运行时它会抱怨

# 内部服务器错误

#<Icalendar::Calendar:0x00000000fe2c98> 的未定义方法 `bytesize'

* * *

WEBrick/1.3.1 (Ruby/1.9.2/2012-04-20) 在blooming-shore-6714.herokuapp.com:80

我使用命令 curl -v -H "Content-type: text/plain" --data-binary @invite.ics [http://blooming-shore-6714.herokuapp.com/ics2event发送数据](http://blooming-shore-6714.herokuapp.com/ics2event)

文件@invite.ics 可以是您身边的任何 ics 文件。

当我尝试在 stringio 实例而不是文件实例上使用 icalendar 的 parse() 时，错误来了（我认为）。当我阅读文档时，StringIO 的实例应该与文件兼容。

作为参考，这是我的 web.rb 文件。

```
require 'sinatra'
require 'rubygems'
require 'icalendar'

get '/' do
  "new version"
end

get '/test' do
  "You've found me!"
end

post '/ics2event' do
  request.body.string

  invite = StringIO.new(request.body.string)

  cals = Icalendar.parse(invite)

  for each in cals do
    for eachEvent in each.events do
      eachEvent.summary
      eachEvent.description
      eachEvent.location
      eachEvent.status
      eachEvent.dtstart
      eachEvent.dtend
      eachEvent.organizer
      for eachAttendee in eachEvent.attendees do
        eachAttendee.to
      end
    end
  end

end 
```

所以问题是，我如何让它消失？

# php - 满足本地 git 存储库问题

> ID：15674792
> 
> 赞同：1
> 
> 时间：2013-03-28T05:22:29.103
> 
> 标签：php, composer-php, satis

我已经阅读了[这篇](https://github.com/composer/composer/blob/master/doc/articles/handling-private-packages-with-satis.md)文章以设置本地 Satis 服务器，我已经设法做到了，并在我的虚拟主机上查看了 Web 视图。现在，我在那里列出了两个项目，一个需要另一个。在另一个项目中，我需要一个依赖于另一个的项目，然后运行 ​​php composer install 它说：

> 问题 1
> 
> ```
> - Installation request for my/project dev-master -> satisfiable by my/project dev-master.
> - my/project dev-master requires my/otherproject dev-master -> no matching package found. 
> ```

从之前的链接以及我读过的许多其他链接中，他们有这样的内容：

> {“类型”：“vcs”，“url”：“ [http://github.com/mycompany/privaterepo](http://github.com/mycompany/privaterepo) ”}

这很好，但是我的项目有一个 /home/me/some/path/to/repo 并且我不确定这是否是我无法让它工作的原因？

编辑：

好的，我找到[了这个](http://getcomposer.org/doc/articles/troubleshooting.md)

> 找不到包#
> 
> 仔细检查您的 composer.json 或存储库分支和标签名称中是否有拼写错误。
> 
> 请务必设置正确的最小稳定性。要开始或确保这没有问题，请将 minimum-stability 设置为“dev”。
> 
> **不是来自 Packagist 的包应始终在根包中定义（该包取决于所有供应商）。**
> 
> 在存储库的所有分支和标签中使用相同的供应商和包名称，尤其是在维护第三方分支和使用替换时。

但萨蒂斯不是当地的包装师吗？所以这行不通？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T09:55:57.007

您的问题的解决方案是`Be sure to set the right minimum-stability. To get started or be sure this is no issue, set minimum-stability to "dev".`由于 my/project 需要 my/otherproject dev-master，因此您的根包必须允许 my/otherproject 安装在 dev 版本中。

要么你设置`"minmum-stability":"dev"`，这将允许所有包安装在 dev 中，或者你可以添加一个类似的要求`"my/otherproject":"@dev"`，它只允许这个是 dev，而不是其他的。

显然，更好的解决方案是开始标记版本。这样 my/project 可以需要 1.* 或 my/otherproject 的某些内容，您就不会再遇到问题了。

# iphone - 纹理 id 没有使用相同的 id

> ID：15674797
> 
> 赞同：1
> 
> 时间：2013-03-28T05:22:56.197
> 
> 标签：iphone, ios, objective-c, cocos2d-iphone

```
 Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'CCSprite is not using the same texture id'
*** First throw call stack:
(0x321d22a3 0x39eef97f 0x321d215d 0x32aa7ab7 0x71afd 0x48b61 0xb41cd 0xb1f7d 0xb1e4f 0xb8913 0x4123f 0x40bf5 0x41661 0x3e27f 0x9cf8f 0x9d917 0x9b331 0x33fed5f1 0x33fda801 0x33fda11b 0x35cf05a3 0x35cf01d3 0x321a7173 0x321a7117 0x321a5f99 0x32118ebd 0x32118d49 0x35cef2eb 0x3402e301 0xb0fa3 0x20e8)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

上面是错误，下面是我的代码。我正在做的是我有两个不同的 plist 和 png 精灵表文件，它们都包含不同的图块，但有船和 ui。这是在我的加载场景层中，基本上在主菜单层中，它会推送一个 int，它是级别编号，然后加载场景层，它会根据级别数量打开精灵表文件。这只在我打开第 1 级然后第 2 级然后返回并打开第 1 级时崩溃，反之亦然。这已经引起了一段时间的头痛，并感谢有关我的问题的任何帮助。

```
 CGSize winSize = [CCDirector sharedDirector].winSize;
        [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:
         [NSString stringWithFormat:@"clonespritesheet%d.plist", loadlevel]];
        mainship = [Ship spriteWithSpriteFrameName:@"mainship.png"];
        mainship.position = startingshiplocation;
        mainship.speed = 10;
        [self addChild:mainship z:-4];

        joystickright = [Joystick spriteWithSpriteFrameName:@"uifirebutton.png"];
        joystickleft =  [Joystick spriteWithSpriteFrameName:@"uimovementbutton.png"];
        joystickleft.up = [[CCSpriteFrameCache sharedSpriteFrameCache]spriteFrameByName:@"uimovementbutton.png"];
        joystickleft.down = [[CCSpriteFrameCache sharedSpriteFrameCache]spriteFrameByName:@"uimovementbuttonactive.png"];
        joystickright.up = [[CCSpriteFrameCache sharedSpriteFrameCache]spriteFrameByName:@"uifirebutton.png"];
        joystickright.down = [[CCSpriteFrameCache sharedSpriteFrameCache]spriteFrameByName:@"uifirebuttonactive.png"];

        joystickright.position = startingjoystickrightlocation;
        joystickleft.position = startingjoystickleftlocation;
        [self addChild:joystickright z:1];
        [self addChild:joystickleft z:1];
        level1backdrop2.anchorPoint = ccp(0,0);
        level1backdrop1.anchorPoint = ccp(0,0);
        level1backdrop1 = [CCSprite spriteWithSpriteFrameName:@"backdrop.png"];
        level1backdrop1.position = ccp(0,190);
        level1backdrop2 = [CCSprite spriteWithSpriteFrameName:@"backdrop.png"];
        level1backdrop2.position = ccp(level1backdrop1.boundingBox.size.width-1,190);
        [self addChild:level1backdrop1 z: -5];
        [self addChild:level1backdrop2 z: -5];
        if(loadlevel == 1)
        {
        level2backdrop2.anchorPoint = ccp(0,0);
        level2backdrop1.anchorPoint = ccp(0,0);
        level2backdrop1 = [CCSprite spriteWithSpriteFrameName:@"backdrop2.png"];
        level2backdrop1.position = ccp(0,170);
        level2backdrop2 = [CCSprite spriteWithSpriteFrameName:@"backdrop2.png"];
        level2backdrop2.position = ccp(level2backdrop1.boundingBox.size.width-1,170);
        [self addChild:level2backdrop1 z: -5];
        [self addChild:level2backdrop2 z: -5];
        }

        CCSprite *uiscreenbotttom = [CCSprite spriteWithSpriteFrameName:@"uitemplate.png"];
        [self addChild:uiscreenbotttom z:0];
        uiscreenbotttom.position = ccp(winSize.width/2,43);

- (void) loadStartingTiles //16 by 24
{
    [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:
     [NSString stringWithFormat:@"clonespritesheet%d.plist", loadlevel]];
     for(int i = 0; i < amountblockslevel1; i++)
    {
        levelframes[i] =[[CCSpriteFrameCache sharedSpriteFrameCache]spriteFrameByName:
                             [NSString stringWithFormat:@"block%d.png", i]];
    }

    tiles = [CCSpriteBatchNode batchNodeWithFile:[NSString stringWithFormat:@"clonespritesheet%d.png", loadlevel]];
    [self addChild:tiles z:-3];

    CCSprite *tempsprite;
    for(int x = 0; x < 26; x++) //minus 1 for one at the begining
    {
        for(int y = 0; y < 16; y++)
        {
            tempsprite = [CCSprite spriteWithSpriteFrame:levelframes[currentscreen[y][x]]];
            tempsprite.position = ccp(x*20+10,(16-y)*20-10); //+10 for align for tile size
            [tiles addChild:tempsprite];
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:44:34.903

在将场景替换为负载级别之前添加以下代码可解决此问题

```
[[CCSpriteFrameCache sharedSpriteFrameCache] removeSpriteFrames];
 [[CCTextureCache sharedTextureCache] removeAllTextures]; 
```

希望它对某人有帮助！

# java - 在 selenium ide 中处理 javascript

> ID：15674798
> 
> 赞同：0
> 
> 时间：2013-03-28T05:23:00.010
> 
> 标签：java, javascript, eclipse, selenium, selenium-ide

以下是我点击提交按钮失败的示例：

```
package demo;

import static org.junit.Assert.assertEquals;

import org.junit.After;
import org.junit.Before;
import org.junit.Test;
import org.openqa.selenium.server.SeleniumServer;

import com.thoughtworks.selenium.DefaultSelenium;
import com.thoughtworks.selenium.Selenium;

public class leadtest 
        {
    private Selenium selenium;
    private SeleniumServer server;

    @Before
    public void setUp() throws Exception 
                {
        server = new SeleniumServer();
        server.start();
        selenium = new DefaultSelenium("localhost", 4444, "*firefox",
            "http://www.careerfundas.com/");
        selenium.start();
            }

    @Test
   public void testLeadtest() throws Exception
                {
        selenium.open("/");
        selenium.click("id=wrapper");
        selenium.click("css=a.active-home > span");
        selenium.waitForPageToLoad("30000");
        selenium.click("id=wrapper");
        selenium.click("css=li");
        selenium.waitForPageToLoad("30000");
        selenium.click("id=confused_name");
        selenium.type("id=confused_name", "Shalini test");
        selenium.type("id=confused_email", "Shalinitest@test.com");
        selenium.type("id=confused_phoneno", "9090909090");
        selenium.select("id=conf_course", "label=Shipping and Logistics");
        selenium.click("link=Ask Expert");
        assertEquals(
            "Thank You ! Someone from Career Fundas experts panel will    contact you shortly.", selenium.getAlert());

            }

    @After
    public void tearDown() throws Exception 
       {
        selenium.stop();
   }

      } 
```

注意：以下是我尝试在 java 脚本之上运行时遇到的错误。

```
com.thoughtworks.selenium.SeleniumException: ERROR: There were no alerts
at com.thoughtworks.selenium.HttpCommandProcessor.
throwAssertionFailureExceptionOrError (HttpCommandProcessor.java:112) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:31:37.650

1.  You may try setting the speed by `selenium.setSpeed("5000")` before you do a `geralert`.

2.  Maybe it is not alert. Maybe it is confirmation. Did you try `selenium.getConfirmation();`

[Here](https://groups.google.com/forum/#!msg/selenium-users/oLb9xO3mD_I/47-OXDJ0BjcJ) is some More information on it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:34:50.753

```
selenium.click("link=Ask Expert");
Thread.sleep(5000);
assertEquals("Thank You ! Someone from Career Fundas experts panel will contact you shortly.", selenium.getAlert()); 
```

使用此代码，它在我的最后工作

# iphone - 另一个 Xcode 项目中的未定义符号

> ID：15674799
> 
> 赞同：0
> 
> 时间：2013-03-28T05:23:08.577
> 
> 标签：iphone, ios, objective-c, xcode

我昨天在这里问了一个关于[如何在框架中调试](https://stackoverflow.com/q/15654493/889538)的问题。

我有一个`networkLib`，还有一个`usingLibDemo`项目。

答案建议我`networkLib`加入`usingLibDemo`，以便我可以在源代码中进行调试。

现在我试过了：

1.  从 中输出一个框架`networkLib`，并在 中使用该框架 `usingLibDemo`。有用。
2.  复制`networkLib`into的所有源代码`usingLibDemo`，它再次工作。
3.  将`networkLib`项目拖入`usingLibDemo`项目中，在 中设置 ，`Header Search Paths`在中`Build Settings`设置。它失败。`Target Dependencies``Build Phases`

在 #3 情况下，仅使用标头时项目构建成功。例如，我只使用协议：

```
@interface ViewController : UIViewController <LoginUIDelegate>

@property (retain, nonatomic) IBOutlet UITextField *usernameText;
@property (retain, nonatomic) IBOutlet UITextField *passwordText;
@property (retain, nonatomic) IBOutlet UIButton *loginButton;

- (IBAction)loginBtnDidClick:(id)sender;

@end 
```

但是当我使用`.m`文件中的代码时：

```
[[LoginBizLogic sharedInstance] loginWithUsername:username password:password tokenLogin:NO uiDelegate:self]; 
```

构建失败，如下所示：

![在此处输入图像描述](../Images/ab2d4f8368be12c95341b1099f60e09d.png)

LoginBizLogic的`@interface`以及`LoginUIDelegate`是在文件中定义的`LoginBizLogic.h`，但`@implementation`在“LoginBizLogic.m”文件中。

我认为`LoginBizLogic`没有正确链接，与其他类相同，但我无法弄清楚问题出在哪里，或者在哪里配置。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T05:30:18.860

阅读此[架构 i386 的未定义符号的答案：_OBJC_CLASS_$_SKPSMTPMessage”，引用自：错误](https://stackoverflow.com/questions/6984368/undefined-symbols-for-architecture-i386-objc-class-skpsmtpmessage-refere)

> 如果您的类的 .m 文件未在目标的“构建阶段”选项卡的“编译源”步骤下列出，则可能会出现此类错误。通常 Xcode 会为您执行此操作，但有时它会丢失绘图并且您需要手动添加 .m 文件。

**在你的情况下：**

```
TargetSettings -> Build Phases -> Compile Sources -> add your .m file  ->Build and Run 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T05:59:42.133

谢谢你，@iPatel

从你的回答我知道问题出在哪里：

![在此处输入图像描述](../Images/11ac9ab5b83ee26596207cd5d6e57e8c.png)

以及如何显式编译导入的文件，但`networkLib`要选择的文件太多：

![在此处输入图像描述](../Images/359b0bd91df5fd9c619f91d5fac7d4ed.png)

选择135个项目很烦人，我已经设置了依赖：

![在此处输入图像描述](../Images/6a5c24b41e33d102903882a5a8f2d92e.png)

![在此处输入图像描述](../Images/4ef69e179a7027af9c1ec6cc1ddcba0f.png)

所以我想在编译之前`usingLibDemo`，`networkLib`已经编译好了。

编译好了，为什么找不到符号？--------> 没有链接！我导入库进行链接：

![在此处输入图像描述](../Images/7c71c7a010c7c890f64c587416845d37.png)

就是这样！再次感谢。

# extjs4.1 - Extjs 4.1 Grid Store'sum'函数保持计算值

> ID：15674800
> 
> 赞同：2
> 
> 时间：2013-03-28T05:23:15.543
> 
> 标签：extjs4.1, jsonstore

我有一个网格，我需要在其中对列执行“求和”操作并将这些值显示在文本框中。我正在尝试使用 store 的“求和”功能。它工作正常，但是当我销毁这个商店时，它仍然在文本字段中保留计算值，但不在网格中。如果我再次摧毁这家商店，那么它就会干净。谁能指导一下可能出了什么问题？

提前致谢。

我的网格是给定的

```
Ext.define('${pkgName}.v01t007001.SV01T00700105' , {
extend    : 'Ext.grid.Panel',
alias     : 'widget.sv01t00700105',  
viewConfig: {
    stripeRows    : true,
    forceFit      : true,
    loading       : true,
    emptyText     : 'No Records to display',
    listeners     : {
        viewready : function(v) {               
          var store = Ext.data.StoreManager.get('S01T008003');
            store   = !store ? Ext.create("S01T008003") : store;   
            store.load();                
        }
    }
},
features  : [{
    ftype       : 'summary',       
}],
initComponent   : function() {
    this.store='S01T008003';            
    me        = this;        
    this.columns = [{
        header      : 'STotal',
        align       : 'right',
        width       : 80,
        dataIndex   : 'total',        
        renderer    : function(value, metaData, record, rowIdx, colIdx, store, view) {                
            var subtotal  = Ext.util.Format.number(value,'0.00');                
            var total     = view.getStore().sum('total');
            var t         = Ext.util.Format.number(total,'0.00');  
            Ext.getCmp('total-t00700106').setValue(t); // It is my Text field id
            return subtotal+'&nbsp' + '?';           
        }           
    }];       
    this.callParent(arguments);
} 
```

});

它是我的文本字段

```
{
                            xtype     : 'textfield',
                            fieldLabel: 'Total',
                            name      : 'total',
                            id        : 'total-t00700106',
                            width     : 200

                        } 
```

它是我的商店

```
Ext.define('${pkgName}.S01T008003', {
extend    : 'Ext.data.Store',
model     : '${appName}.model.M01T008002',
idProperty: 'id',
autoLoad  : false,
autoSync  : true,
proxy: {
    type    : 'ajax',
    noCache : true,  
    api: {
    read    : '${createLink(controller:'C01t008001', action: 'iItemStore')}',
    destroy : '${createLink(controller:'C01t008001', action: 'removeall')}'
    },
    actionMethods : {          
      read    : 'GET',
      update  : 'PUT',
      create  : 'POST',
      destroy : 'DELETE'
    },
    reader: {
        type            : 'json',
        root            : 'data',
        totalProperty   : 'total',
        successProperty : 'success',
        messageProperty : 'message',
        implicitIncludes: true
    },
    simpleSortMode  : true
},
sorters: [{
    property: 'id', 
    direction: 'asc'
}] 
```

});

我的控制器

```
invResetAll : function(button){        
  iItemStore.destroy({
    callback : function(records, options, success) {
         if(success){
            console.log('if destroy success!');
            iItemStore.removeAll(true);
         }
    }        
  });  

    iItemStore.reload();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T06:54:42.600

我是一个愚蠢的男孩它是如此简单

```
 {
        header      : 'STotal',
        align       : 'right',
        width       : 80,
        dataIndex   : 'total',        
        renderer    : function(value, metaData, record, rowIdx, colIdx, store, view)    {                
            var subtotal  = Ext.util.Format.number(value,'0.00');         
            return subtotal+'&nbsp' + '৳';           
        },
        summaryType: 'sum',
        summaryRenderer: function(value, summaryData, dataIndex) {
            Ext.getCmp('total-t00700106').setValue(value);
            return Ext.String.format('{0} Total{1}', value, value !== 1 ? 's' : ''); 
        }
    } 
```

# opencv - OpecnCV 的 filter2D 输出图像

> ID：15674810
> 
> 赞同：0
> 
> 时间：2013-03-28T05:24:11.547
> 
> 标签：opencv

我使用 OpenCV 的 filter2D API 来过滤带有黑色内核（尺寸 11 x 11）的中心图像（41 x 41）。过滤器输出图像是第一个带有 2 个点的图像。我期待像最后一张带有四个点的图像一样的图像。有什么问题？我的程序如下。

```
int imfilter(Mat &src, Mat &ker, Mat &dest)
{      
     Point anchor( -1,-1);    
     float delta = 0.0;    
     cv::filter2D(src, dest, CV_32FC1, ker, anchor, delta, BORDER_REPLICATE);    
     return 1;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:41:47.713

最有可能你想要多 2 个点的黑色区域实际上是负值像素，尝试通过调用来获取 dest 的绝对值

```
dest = cv::abs(dest); 
```

# c# - 跟踪 WCF 服务中的内存泄漏

> ID：15674811
> 
> 赞同：1
> 
> 时间：2013-03-28T05:24:35.513
> 
> 标签：c#, performance, wcf, iis-7, memory-leaks

我有一个 WCF 服务，目前在 IIS7 中使用 .NET 4.0 在经典模式下托管。该服务通常在 250 到 400mb 之间嗡嗡作响，这是合理的，因为它连接到的数据库的大小只有大约 300mb。除了内存使用，CPU 使用率保持在 0% 到 15% 之间。然后随机地 CPU 和内存使用量将大幅飙升。RAM 使用率将上升到物理内存限制（在此 EC2 实例上为 1.7GB），CPU 将在 100% 达到峰值，然后恢复到 25% 到 50% 之间。几分钟后，内存使用率和 CPU 使用率将恢复正常。

有谁知道可能是什么原因造成的？如果没有，有没有很好的方法来追踪问题？我已经使用 PerfMon 来查看使用情况，但我找不到一个好方法来跟踪 WCF 服务中实际使用的所有内存的位置。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T10:45:46.050

在我看来，您没有正确关闭连接。当您使用 WCF 时，请始终注意连接实现 IDisposable - 如果您不使用它，连接将持续存在并且数据将被存储。正确使用“使用”，您可能会解决问题。

其次，这可能只是意味着您正在使用 PerSession 模式。如果您正在使用会话，它们当然会被存储 :-) 此外，WCF 中有一些已知的错误可能会导致这种情况。最值得注意的是“单例”模式；将其更改为“PerCall”，它可能会完全解决您的问题。

我见过几个导致内存泄漏的情况。

至于分析，我是 Red-gate / ANTS 的忠实粉丝，但周围也有其他分析器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:57:56.953

按照你们的建议下载了一个分析器。事实证明这不是我在做的事情，但是 AE.Mail 库（我正在使用）中的搜索功能的工作方式存在一个错误，这导致每 5 分钟内存大量膨胀。我使用的是 Red-gate's，非常棒，感谢所有提供建议的人。

# git - 当多个客户端推送到同一个远程仓库时，git如何处理并发问题？

> ID：15674814
> 
> 赞同：5
> 
> 时间：2013-03-28T05:24:39.897
> 
> 标签：git, concurrency

`git-http-backend`对于每个 http 请求，在服务器端运行一个单独的进程。

当多个客户端推送到同一个远程存储库时，它如何处理并发问题？

例如，它是否创建锁定文件以及名称是什么？

注意：远程存储库是裸露的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:46:24.887

与通过 SSH 调用的方式相同 - 请参阅[refs.c 中的 update_ref 函数](https://git.kernel.org/cgit/git/git.git/tree/refs.c?id=v1.8.2.1#n2453)。锁定机制的实际实现存在于 lockfile.c 中的[lock_file 函数中](https://git.kernel.org/cgit/git/git.git/tree/lockfile.c?id=v1.8.2.1#n125)，是的，它在那里创建了一个`.lock`文件。在引擎盖下，它是通过`O_EXCL`选项来完成的`open()`。

# numpy - 如何为 numpy 和 pandas 设置默认数据类型为“float32”？

> ID：15674815
> 
> 赞同：9
> 
> 时间：2013-03-28T05:24:48.093
> 
> 标签：numpy, type-conversion, pandas

我的机器在 Windows XP 上的 RAM 为 3G，'float32' 数据的精度足以满足我当前的应用程序（基于 Pandas 0.10 + NumPy 1.6.2）。所以我想将默认的浮动数据类型重置为`'float32'`而不是`'float64'`减少内存使用量。怎么做 ？（我知道我可以明确地`dtype = 'float32'`输入函数，但我只想要一个全局设置）

如果我这样做有什么不好的副作用吗？（计算速度，与其他模块交互的兼容性，未来升级等。）

# iphone - IPA 文件安装问题

> ID：15674821
> 
> 赞同：0
> 
> 时间：2013-03-28T05:25:33.800
> 
> 标签：iphone, ipad

我在 iPad 上得到了两个应用程序图标。当我安装表单 web url 时。我在 iPad 上获得了另一个应用程序图标，而不是更新它创建另一个应用程序图标。为什么会发生或者我该如何解决这个问题，请尽快让我知道。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T05:27:58.407

1.  如果您的两个应用程序都使用不同的捆绑标识符，则可能会发生这种情况。这意味着 web url 上的版本正在使用不同的 Bundle Identifier，而目前您正在使用不同的 Bundle Identifier。
2.  这没有什么不妥。因此，您的设备将它们视为两个不同的应用程序。而不是替换旧的。
3.  只需删除两个应用程序并重新下载即可。

# c# - 编译和运行代码时的简单 C# 错误

> ID：15674822
> 
> 赞同：2
> 
> 时间：2013-03-28T05:25:33.960
> 
> 标签：c#, visual-studio

我正在尝试通过观看教程来学习 C#，当我尝试重命名我的课程时，它给了我这个

所以这个第一个错误基本上是当我创建一个新的控制台解决方案然后声明一个类并给它一个名字然后尝试写出到控制台它给了我两个错误。

> ![1ST:Error 1 Invalid token '(' in class, struct, or interface member declaration C:\Users\Alan\AppData\Local\Temporary Projects\ConsoleApplication1\Program.cs 10 23 ConsoleApplication1
> 
> 2ND：错误 2 类型名称“Writeline”不存在于类型“System.Console”C:\Users\Alan\AppData\Local\Temporary Projects\ConsoleApplication1\Program.cs 10 13 ConsoleApplication1

我单击“全部保存”并将其保存到桌面上的一个文件夹中，我打算在其中放置所有 C# 文件，但出现这些错误，当我开始一个新文档时，清理它并编写控制台命令并构建它并没有给我任何错误。

是我需要一个构造函数还是我需要按特定顺序保存文件还是什么？] [1](http://i.stack.imgur.com/vOtcl.jpg)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T05:27:55.690

看起来你有`System.Console.WriteLine`一个方法体外部的调用。编译器认为您正在尝试引用一个不存在的类型，并且它还告诉您`(`在代码文件中的特定位置这是不合法的。

您可能有一个看起来像这样的类定义

```
class Program
{
     System.Console.WriteLine("hello world");
} 
```

你需要的是一个看起来更像的类定义

```
class Program
{
     public static void Main(string[] args)
     {
          System.Console.WriteLine("hello world");
     }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-09T11:17:34.283

安东尼佩格拉姆的回答是正确的。`using System;`在任何相关 c# 文件的顶部添加指令，允许编译器省略**System.** 前面的方法命名空间的一部分`System.Console.WriteLine()`。

但是，如果控制台解决方案名为**TestSolution**并且控制台应用程序项目具有命名空间**TestSolution.Console**；系统**。**`System.Console.WriteLine()`仍然需要在调用前声明。

这是由于编译器对以命名空间结尾的**控制台部分存在歧义。****一个名为TestSolution.TestConsole**的控制台项目不会遇到命名空间冲突，除非正在编写的类的名称是**Console**。

在为 .NET 应用程序构建和命名库时，注意命名空间的潜在命名冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T05:29:04.760

你有几个问题。

首先，您试图在文件的无效部分调用 Console.WriteLine()。您需要声明一个`Method`or`Constructor`并将此调用放在其中。

构造函数示例：

```
public class Person
{
    public Person()
    {
        Console.WriteLine("Hello");
    }
} 
```

方法示例：

```
public class Person
{
    public void SayHello()
    {
        Console.WriteLine("Hello");
    }
} 
```

您的其他问题是您的“WriteLine”大写不正确。

代码应为：

`Console.WriteLine("Test");`

[http://msdn.microsoft.com/en-us/library/system.console.writeline.aspx](http://msdn.microsoft.com/en-us/library/system.console.writeline.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T05:29:07.947

看来你已经吹走了这个`Main()`方法。此外，您不应该（我猜不能）只是在类中浮动一个方法调用 - 它必须在方法或构造函数中。

尝试用以下内容替换其中的内容`namespace ConsoleApplication1`，让您开始：

```
class Program
{
    static void Main(string[] args)
    {
        Person alan = new Person();
        alan.PersonName = "Alan";

        Console.WriteLine("Hi " + alan.PersonName);
        Console.ReadLine();
    }
}

class Person
{
    public string PersonName { get; set; }
} 
```

**PS。**您可能应该将 Person 放在一个单独的文件中（例如 Person.cs），但是对于开始，这应该可以......虽然不是理想的最终状态。

# webview - 自动换行在 Web 视图中不起作用

> ID：15674826
> 
> 赞同：1
> 
> 时间：2013-03-28T05:25:55.520
> 
> 标签：webview, javafx-2, javafx

我正在尝试使用 JavaFX 中的 webview 打开一个 html 文件。当我调整窗口大小时，没有自动换行。这是我的代码：

```
 WebEngine xwebEngin=null;
 Dimension screenSize=Toolkit.getDefaultToolkit().getScreenSize();
 Group gp=new Group();
 Scene scn=new Scene(gp);
 fm1.setScene(scn);    
 WebView wb=new WebView();
 gp.getChildren().add(wb);

 wb.setMaxSize(screenSize.width-20,screenSize.height-70);
 wb.setMinSize(screenSize.width-20,screenSize.height-70);

 xwebEngin=wb.getEngine();
 File htmlFile = new File("d:/new folder/abc.htm)";

 try {
     xwebEngin.load(htmlFile.toURI().toURL().toString());
 }
 catch(Exception ex) {} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:12:11.313

WebView 默认支持自动换行。

但是您将固定的最小大小分配给`WebView`by

```
wb.setMinSize(screenSize.width-20, screenSize.height-70); 
```

因此 Group 不能缩小你的 WebView，然后 WebView 比窗口大，看起来像是被剪切了。

使用`setPrefSize()`而不是 min/max 或尝试下一个代码：

```
 WebView wb = new WebView();
    Scene scn = new Scene(wb);
    fm1.setFullScreen(true);
    WebEngine xwebEngin  = wb.getEngine();
    xwebEngin.load("d:/new folder/abc.htm");
    fm1.setScene(scn); 
```

# c# - 将 .ics 发送到 gmail 不会显示邀请中的详细信息

> ID：15674836
> 
> 赞同：3
> 
> 时间：2013-03-28T05:26:37.077
> 
> 标签：c#, asp.net, google-calendar-api

我正在使用 C# 在我的项目中发送带有 .ics 文件附件的 gmail 邀请。

.ics 文件包含 PRODID:-//Microsoft Corporation//Outlook 11.0 MIMEDIR//EN

并将其作为“文本/日历”发送，方法=请求。

**我面临的问题是** 当我在 gmail 中查看此内容时，我无法在 gmail 中看到完整的描述。我需要单击更多详细信息按钮才能查看完整的邀请详细信息。请找到屏幕截图[http://screencast.com/t/vl1egcf77ke](http://screencast.com/t/vl1egcf77ke)

但是，如果我从谷歌日历向另一个联系人发送邀请，我可以在下面看到所有详细信息 [http://screencast.com/t/6PgPdomt3F](http://screencast.com/t/6PgPdomt3F)

**需要修复什么？** 需要查看我发送的电子邮件中的描述。

让我知道您是否需要有关此内容的更多信息。

# ruby - 无法确定我的工厂与 rspec 中的工厂女孩 的问题

> ID：15674838
> 
> 赞同：0
> 
> 时间：2013-03-28T05:27:15.687
> 
> 标签：ruby, ruby-on-rails-3, factory-bot, rspec-rails

我已经为我的一个项目创建了几个工厂并为 rspec 创建了一些示例。我的一切都在我的本地工作。甚至，对于 ruby​​ 版本：1.9.2 和 1.9.3，我的本地规范都是绿色的。我只是不明白为什么 travis-ci 无法构建相同的提交。

这是 travis-ci 构建的链接：

工作 #1（构建 64）：[https ://travis-ci.org/suryart/spree_active_sale/builds/5850619](https://travis-ci.org/suryart/spree_active_sale/builds/5850619)

工作 #2（构建 65）：[https ://travis-ci.org/suryart/spree_active_sale/builds/5850754](https://travis-ci.org/suryart/spree_active_sale/builds/5850754)

我觉得这很奇怪的原因是，构建 64 未能针对 1.9.2 的 ruby​​ 版本运行规范，并通过了 1.9.3。但是，构建 65 无法针对 1.9.3 的 ruby​​ 版本运行规范，并且无法通过 1.9.2。两个版本的代码都没有变化。

但是，对于两个失败的构建都会抛出相同的错误：

```
/home/travis/.rvm/gems/ruby-1.9.2-p320/gems/factory_girl-4.2.0/lib/factory_girl/registry.rb:24:in `find': Factory not registered: active_sale (ArgumentError)
from /home/travis/.rvm/gems/ruby-1.9.2-p320/gems/factory_girl-4.2.0/lib/factory_girl/decorator.rb:10:in `method_missing' 
```

因为，代码很长。我将从 github 上的提交中引用它。

规格/工厂[/active_sale_factories.rb：https://github.com/suryart/spree_active_sale/blob/43cb160d0e4ea1ad694af3f1d848c22a3193cc2a/spec/factories/active_sale_factories.rb](https://github.com/suryart/spree_active_sale/blob/43cb160d0e4ea1ad694af3f1d848c22a3193cc2a/spec/factories/active_sale_factories.rb)

规格/工厂[/inactive_sale_factories.rb：https://github.com/suryart/spree_active_sale/blob/43cb160d0e4ea1ad694af3f1d848c22a3193cc2a/spec/factories/inactive_sale_factories.rb](https://github.com/suryart/spree_active_sale/blob/43cb160d0e4ea1ad694af3f1d848c22a3193cc2a/spec/factories/inactive_sale_factories.rb)

据我所知，问题来自第 5 行的 active_sale_factories.rb 中的这一行：

```
factory :active_sale, :class => Spree::ActiveSale do |f|
  name "Dummy Sale"
end 
```

无法从 inactive_sale_factories.rb 定义的工厂中确定。

我是 rspec 和工厂的新手，第一次做这一切。如果您能解释这种行为或指出我在这里做错了什么，将不胜感激？或者也许可以在这里帮助我解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T04:43:06.243

没关系，我通过将两个工厂合并到同一个文件而不是单独的文件来进行活动和非活动销售来解决它。

# asp.net - 限制数据列表中的行

> ID：15674842
> 
> 赞同：0
> 
> 时间：2013-03-28T05:27:54.783
> 
> 标签：asp.net, datalist

我有一个 DataList 并将其绑定到一个 DataTable。

我想为它设置 RowReapeat ，限制行。

我的 DataTable 有很多行。我想为 DataList 设置 3 行。

我计算 DataTable 的行数，然后将 ColumnRepeat 设置为 (Rows of DataTable/3)....

有没有其他方法可以限制 DataList 中的行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:42:47.233

您可以从 SQL 查询中限制它，即

```
select Top 3 Id  from table; 
```

如果您想在 datalist 中进行分页，请参考此链接[Datalist Paging?](https://stackoverflow.com/questions/7315575/datalist-paging/7315633#7315633)

# iphone - 将 NSString 的中间内容替换为其他内容

> ID：15674844
> 
> 赞同：0
> 
> 时间：2013-03-28T05:27:58.060
> 
> 标签：iphone, nsstring

我有一个字符串，例如 "a,b,c,d,e,f,g,h" ，现在我想替换从索引 4 开始并以索引 6 结束的内容。

因此，在示例中，结果字符串将是“a,b,c,d,f,e,g,h”。

仅供参考，只有动态的所有内容，包括要替换的索引。

我不知道如何做到这一点..任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:49:03.003

在这种情况下，最好是`NSMutableString`. 请参见以下示例：

```
int a = 6; // Assign your start index.
int b = 9; // Assign your end index.

NSMutableString *abcd = [NSMutableString stringWithString:@"abcdefghijklmano"]; // Init the NSMutableString with your string.
[abcd deleteCharactersInRange:NSMakeRange(a, b)]; //Now remove the charachter in your range.

[abcd insertString:@"new" atIndex:a]; //Insert your new string at your start index. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T06:03:11.650

从您的示例中可以看出您想要替换字符串中的组件（即索引 4 是第四个分隔字母 - 'e'）。如果是这样，那么解决方案在于 NSString componentsSeparatedByString: 和 componentsJoinedByString:

```
// string is a comma-separated set of characters.  replace the chars in string starting at index
// with chars in the passed array

- (NSString *)stringByReplacingDelimitedLettersInString:(NSString *)string withCharsInArray:(NSArray *)chars startingAtIndex:(NSInteger)index {

    NSMutableArray *components = [[string componentsSeparatedByString:@","] mutableCopy];

    // make sure we start at a valid position
    index = MIN(index, components.count-1);

    for (int i=0; i<chars.count; i++) {
        if (index+i < components.count)
            [components replaceObjectAtIndex:index+i withObject:chars[i]];
        else
            [components addObject:chars[i]];
    }
    return [components componentsJoinedByString:@","];
}

- (void)test {
    NSString *start = @"a,b,c,d,e,f,g";
    NSArray *newChars = [NSArray arrayWithObjects:@"x", @"y", @"y", nil];
    NSString *finish = [self stringByReplacingDelimitedLettersInString:start withCharsInArray:newChars startingAtIndex:3];
    NSLog(@"%@", finish);  // logs @"a,b,c,x,y,z,g"

    finish = [self stringByReplacingDelimitedLettersInString:start withCharsInArray:newChars startingAtIndex:7];
    NSLog(@"%@", finish);  // logs @"a,b,c,d,e,f,x,y,z"
} 
```

# iphone - 适用于 iOS6 的 OData 协议

> ID：15674849
> 
> 赞同：-1
> 
> 时间：2013-03-28T05:28:45.950
> 
> 标签：iphone, ios, xcode4.5, protocols, odata

我正在使用[**OData**协议](http://msopentech.azurewebsites.net/odataorg/libraries/ios/) 来生成统一且易于使用的数据 API。

我想知道，OData 协议可用于**iOS6**吗？

在构建当前版本时，我遇到了许多**Apple LLVM 编译器问题**（超过 300 个）。

我认为最新的 OData 框架是在**iOS 4.1**中编写的。

我使用启用了**iOS6 ARC 的****Xcode 版本 4.5.2 (4G2008a)**。

 **我附上了截图。

对此的任何帮助表示赞赏。

谢谢。

![在此处输入图像描述](../Images/c8a6e4920e13bed30bd706c37b02844b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:45:33.843

我下载并检查了问题。

他们正在为他们的属性使用自定义的 setter 和 getter。

在他们的代码中，他们写了如下内容：

```
@property(nonatomic,retain,getter=getEdmType,setter=setEdmType) NSString *m_EdmType; 
```

这会导致问题，因为对于 setter，我们需要传递一个参数。所以编译器期望**`:`**在自定义设置器名称之后有一个。

编译器显示错误：`ODataSDKV1-1.3/framework/src/MSODataLib/Interfaces/mProperties.h:39:67: Method name referenced in property setter attribute must end with ':'`

将其更改为：

```
@property(nonatomic,retain,getter=getEdmType,setter=setEdmType:) NSString *m_EdmType; 
```**

# c - 找到集合的交集

> ID：15674850
> 
> 赞同：3
> 
> 时间：2013-03-28T05:28:52.673
> 
> 标签：c, arrays, algorithm

我们有 n 组不同大小的整数。每个集合也可以包含重复项。我必须找到集合的交集。如果一个元素在所有集合中多次出现，则应将其添加到结果中。

例如，考虑有三个集合 {0,5,5,3,4} {5,2,3,5,6} {1,3,5,5,6}。给定集合的交集应该是 {3,5,5}

我的方法是：

1.对数组进行排序。

2.比较从最小数组开始的每个元素并更新计数。

有没有更有效的方法来找到交叉点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T08:11:47.043

如果你的“集合”只包含小整数，那么它们可以用一个计数数组来表示......例如，{5,2,3,5,6} 是

```
index 0 1 2 3 4 5 6
count 0 0 1 1 0 2 1 
```

这些集合的交集是计数的最小值：

```
 index 0 1 2 3 4 5 6
            -------------
{0,5,5,3,4} 1 0 0 1 1 2 0
{5,2,3,5,6} 0 0 1 1 0 2 1
{1,3,5,5,6} 0 1 0 1 0 2 1  
min         0 0 0 1 0 2 0 = {3,5,5} 
```

如果值不是小整数但它们很少，只需保留一个值数组 - 作为值和小整数之间的映射，小整数是数组的索引。

如果值太多以至于每个集合都有一个计数数组太昂贵，请使用从值到计数的映射来表示每个“集合”，以及值的数组......然后遍历数组以产生每个值，遍历地图以获取计数并计算它们的最小值。为此，您将需要一个哈希表或二叉树库来实现映射......或者使用比 C 更现代的语言中的任何一种，当然这些语言提供此类集合类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:38:01.920

例如，您可以为每个数组创建一个字典，遍历每个数组并将其添加到它们的计数器中，并添加到是否检测到新数字的“全局”字典中。然后，您从“全局”字典中选择下一个数字（保证至少存在于一个计数器字典中），然后您得到所有​​计数器中的最小值。当然，如果您在单个字典中遇到 null，则此数字不会添加到结果中。否则，将“数字”的“最小找到”数量添加到结果数组中。使用这样的字典结构，算法的完整复杂性大约是`O(n*m)`其中 M 是集合大小的最大值，N 是它们的数量，而如果对集合进行排序，`O(n*m*log(m))`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T05:59:59.820

这是我的代码，**用 C99 编译**（*别忘了先实现 get、insert、remove 函数*）：

```
struct MyNode { MyNode * next; int value; int frequency; }

// returns MyNode pointer when value exist
MyNode * get(MyNode * head, int val);

// insert a new value, with frequency = 1
void insert(MyNode * head, int val);

// remove an element from the linked-list
bool remove(MyNode * head, int val);

int * intersection (int ** set, int w, int * h)
{
    MyNode * head = 0;
    MyNode * temp = 0;
    int finalSize = 0;
    int k = 0;

    for (int i=0; i<w; i++)
    {
        for (int j=0; j<h[i]; j++)
        {
            temp = get(head, set[i][j]);

            if (temp == 0)
            {
                insert(head, set[i][j]);
                finalSize++;
            }
            else
            {
                temp->frequency++;
            }
        }
    }

    temp = head;
    while (temp != 0)
    {
        if (temp->frequency != w)
        {
            temp = temp->next;
            remove(head, temp->value);
            finalSize--;
        }
        else
            temp = temp->next;
    }

    int * intersection = (int*)malloc(finalSize*sizeof(int));

    temp = head;
    while (temp != 0)
    {
        intersection[k++] = temp->data;
        temp = temp->next;
    }

    return intersection;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T08:18:23.847

我建议您的解决方案的唯一优化是将您的数组（它们不是真正的集合，因为它们有重复项）转换为键值字典，以便键是数组的元素，值是数组的数量发生。对于您的测试示例： {0,5,5,3,4} {5,2,3,5,6} {1,3,5,5,6} 字典看起来像这样

```
{0 => 1, 3 => 1, 4 => 1, 5 => 2}
{2 => 1, 3 => 1, 5 => 2, 6 => 1}
{1 => 1, 3 => 1, 5 => 2, 6 => 1} 
```

然后你从最小的字典开始比较字典对，如果元素出现在两个字典中 - 你会选择较少的出现次数。这种优化将节省处理重复项所需的时间。

结果字典将是： {3 => 1, 5 => 2} - 您可以将其转换回数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-13T11:40:52.613

其他人已经涵盖了通过[计数数组或计数图来](https://stackoverflow.com/a/15676923/15472)表示每个“集合”（或更正式地，“袋子”）的想法。如果有很多重复，并且每个包没有那么多钥匙，这将特别有用。给定 N 个包，每个包有 M 个元素，其中 K 个是不同的，转换为数组/映射表示和生成结果的复杂度将是`O(N x M) + O(N x K)`. 请注意，重复寻找 B 袋的交叉点只需花费`O(B x K)`，因为您可以重用地图表示。

如果您正确地对成对的交叉点进行*排序，您还可以获得很多效率。*例如，如果其中一个袋子只包含一个元素，则只有两种可能的答案：或者所有其他袋子也包含该元素（结果是该元素本身），或者至少其中一个不包含。这将允许您完全忽略其他集合的其余内容。在这种极端情况下，实际交叉点的运行时间将下降到`O(N)`，提高了 K 倍。

一般来说，**如果包的唯一元素数量差异很大，则通过增加大小（唯一元素的数量）对它们的地图进行排序**会增加成本`O(N log N)`，但允许您在计算交叉点时跳过很多键，从而将交叉点**时间减少到`O(N x K_min)`**，其中`K_min`最小唯一元素计数的大小。

在数据库查询优化期间进行了类似的操作，以大大提高查询时间。

# php - 从美国东部时间上午 8 点到午夜将网站访问权限从每个人更改为从午夜到上午 8 点仅我的 IP

> ID：15674854
> 
> 赞同：2
> 
> 时间：2013-03-28T05:29:08.490
> 
> 标签：php, apache, cron

我有一个问题，因为我不知道从哪里开始寻找答案。Web 详细信息：Apache 5.3、Linux 3.2 内核、Ubuntu 12.04、Mysql 5.5、VPN 上的 PHP 5.3。

我目前正在通过 /etc/httpd.conf 文件控制对该网站的访问。（拒绝、允许、拒绝所有人，然后允许来自我的 IP）。此外，该站点具有商业 SSL 证书。

当网站“上线”时，我希望它在美国东部标准时间上午 8:00 自动切换为“允许所有人 - 公众”，然后在午夜切换为“只允许我”。

我不知道从哪里开始我的调查：cron？阿帕奇编码？php编码？什么？

建议任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:29:08.473

您可以在没有 cron 作业的情况下执行此操作，并且无需使用这些 .htaccess 代码使 .htaccess 可写。

```
 RewriteEngine On
    RewriteCond %{TIME_HOUR} >00
    RewriteCond %{TIME_HOUR} <08
    RewriteCond %{REMOTE_ADDR} !^123\.255\.123\.255 #replace this with your IP
    RewriteRule ^.* - [F,L] 
```

上面的代码将为您工作，并且向您的访问者显示一条消息是一个更好的主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T06:26:43.753

我建议不要修改 apache 配置，而是建议修改 ip 表规则的 cron 作业。这样用户就不会访问您的网站，您也不必担心人们可能会收到 404 或类似的问题。

当然，这也取决于您希望如何结束当前正在浏览的人的会话 - 即，使用 iptables 或 apache 配置更改将意味着某人可能在完成某事时突然得到 403。

如果您想提供友好的“停机维护”消息，您可能还需要考虑使用重写将访问者重定向到维护页面，从而在站点再次可用时通知用户。

将其编码到您的应用程序中可以让您给人们几分钟的时间来完成他们正在做的事情（例如，一个页面通知，告知用户他们在被强制删除之前在 x 分钟内完成他们正在做的事情）。

您可以将这两个选项结合起来：在 23:55，会显示一个横幅，告知人们该站点将在 00:00 - 08:00 期间不可用，然后使用 iptables/apache configs/rewrites 来限制访问。

另一个想法是，如果您有一个包含公共内容的网站，您可能会看到搜索爬虫的问题 - 即它们只能间歇性地访问该网站，这可能会以某种方式产生影响。（假设您想覆盖尽可能多的人，让您的网页被搜索引擎索引是很重要的）。

**编辑**@amit-该解决方案很棒，现在我知道了，我肯定会建议这是一个更好的选择。但是，除非您别无选择，否则我会避免放入 .htaccess（有关何时（不）使用 .htaccess 的更多详细信息，请参见[此处）](http://httpd.apache.org/docs/2.2/howto/htaccess.html#when)

# vb.net - 连接城市和地址字段的水晶公式

> ID：15674858
> 
> 赞同：0
> 
> 时间：2013-03-28T05:29:37.027
> 
> 标签：vb.net

我`{DataField1.City}&"-"&{DataField1.Pin}`在显示字符串属性中编写了一个公式，`{DataField1.City}`以便将它们连接到字段，但输出的格式显示为数量。例如`Mangalore-567,256.00`，但我想要`Mangalore-567256`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:46:29.653

如果`DataField1.Pin`是数字，那么您可以尝试[`ToText`](http://crystaltricks.com/wordpress/?p=149)控制其格式。

# java - 使用 Java 清除操作系统内存缓冲区

> ID：15674860
> 
> 赞同：0
> 
> 时间：2013-03-28T05:29:50.040
> 
> 标签：java, linux, winapi, operating-system, buffer

我很抱歉，因为我知道这个问题太笼统了，但我是新手，所以我很难让这个问题更具体。
我正在开发一个客户端存在一些安全问题的应用程序。他不希望用户能够打印屏幕或复制（ctrl+c 程序的数据。现在当我开始处理这个问题时，我发现当这些击键时，他的操作系统会复制其缓冲区中的数据。现在我试图检查每当用户击键`ctrl+c`或`printscreen`然后我的应用程序突然刷新缓冲区（或缓存我们所说的任何内容）。现在我的问题是

**1：**如何使用 Java 刷新窗口的缓冲区？我应该检查哪个类 API这个？（因为我搜索了很多，但我没有找到路：（所以现在是 SO 专家的时间）

**2：**这个 flushBuffer 代码是否适用于所有操作系统？或者我是否需要对 Windows/Linux/Mac 进行单独检查。
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T05:54:05.947

要禁用应用程序中任何组件的复制+粘贴，您可以执行（取自[Disabling 'paste' in a jTextfield](https://stackoverflow.com/questions/316673/disabling-paste-in-a-jtextfield)）

```
textComponent.setTransferHandler(null); 
```

但除此之外的任何事情都将成为黑客攻击。[您可以使用jnativehook](https://code.google.com/p/jnativehook/)全局收听打印屏幕，然后可能会以某种方式关闭您的窗口。我不知道，偏执狂是一件很棘手的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T05:51:54.563

您可以清除复制粘贴缓冲区，如下所述：

*   [http://docs.oracle.com/javase/tutorial/uiswing/dnd/textpaste.html](http://docs.oracle.com/javase/tutorial/uiswing/dnd/textpaste.html)
*   [http://docs.oracle.com/javase/tutorial/uiswing/dnd/listpaste.html](http://docs.oracle.com/javase/tutorial/uiswing/dnd/listpaste.html)

只是有空文本并将其复制到缓冲区。

除此之外，您可以做的可靠的事情并不多。

代码将类似于：

```
Action action = new DefaultEditorKit.CopyAction();
action.actionPerformed(
   new ActionEvent(this, ActionEvent.ACTION_PERFORMED, null)); 
```

* * *

编辑：对于网络应用程序，请参阅[此答案，以](https://stackoverflow.com/a/5579990/365237)[这种方式](http://forum.jquery.com/topic/relativity-copy-to-clipboard)使用[剪贴板 jquery 插件](http://archive.plugins.jquery.com/project/clipboard) 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T05:34:18.900

根据要求/安全问题，清除内存（在允许数据写入后）是错误的设计。最好覆盖击键。喜欢`ctrl/alt+(any key)`或`printscr`

要覆盖关键行为，您需要实现`KeyListener`. 一旦您为该键定义了自定义行为，它将不允许默认操作（如复制/剪切..）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T05:41:31.070

这种替代方法怎么样：

1.  假设您的程序使用 Swing UI，仅在用户关注窗口时显示敏感数据，当用户关注另一个窗口/程序时，使数据不可见
2.  假设您使用的是 Windows，您可以使用本文中提到的组策略禁用打印[屏幕](http://social.technet.microsoft.com/Forums/en-US/winserverGP/thread/03af5c6a-636a-43e4-95dd-183331c0d4ac/)
3.  使用其他海报建议的防止复制粘贴机制

老实说，我还没有尝试过，我不确定它是否会起作用。它也可能取决于操作系统

# actionscript-3 - 在flex中将负整数转换为HEX

> ID：15674868
> 
> 赞同：0
> 
> 时间：2013-03-28T05:30:21.127
> 
> 标签：actionscript-3, flash, apache-flex

如何在flex中将负数转换为十六进制？

例如：-73715 ...此数字的十六进制值为 FFFEE00D

我怎样才能在 flex 中得到这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T05:59:02.923

`uint(yourInt).toString(16)`

应该做。

# iphone - json返回格式

> ID：15674872
> 
> 赞同：1
> 
> 时间：2013-03-28T05:30:29.673
> 
> 标签：iphone, ios, json

接口地址： [http://suggest.taobao.com/sug?area=etao&code=utf-8&callback=KISSY.Suggest.callback&q=iphone](http://suggest.taobao.com/sug?area=etao&code=utf-8&callback=KISSY.Suggest.callback&q=iphone)

返回：</p>

```
KISSY.Suggest.callback({"result": [["iphone4s", "9809"], ["iphone5", "13312"], ["iphone4 手机", "69494400"], ["iphone5 港行", "14267"], ["iphone5三网", "2271160"], ["iphone4手机壳", "6199679"], ["iphone 5手机壳", "2527284"], ["iphone 5 保护壳", "5727586"], ["iphone 4贴膜", "147271"], ["iphone5壳", "2628540"]]})

NSURL * url = [NSURL URLWithString:@"http://suggest.taobao.com/sug?area=etao&code=utf-8&callback=KISSY.Suggest.callback&q=iphone"];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];

NSHTTPURLResponse* urlResponse = nil;

NSError * error = nil;

NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&urlResponse error:&error];

NSData *date = [NSData alloc]init

SBJsonParser *jsonParser = [[SBJsonParser alloc] init];

// NSMutableArray *array=[NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableLeaves error:&error];
    NSMutableArray *array = [jsonParser objectWithData:responseData];

    NSLog(@"%@",array); 
```

此数组为空。我不知道原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:39:27.747

当我提到你的请求 URL 时，它有回调，如果你保留它，它不会返回你的 json 作为响应，所以从你的 URL 中删除“&callback=KISSY.Suggest.callback”

```
// Make sure you have include SBJSON files in your Project, as well you have imported header in your View Controller
#import "JSON.h"

// your request URL
NSURL * url = [NSURL URLWithString:@"http://suggest.taobao.com/sug?area=etao&code=utf-8&q=iphone"];

// URL Request
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];

NSHTTPURLResponse* urlResponse = nil;

NSError * error = nil;

// initiate Request to get Data
NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&urlResponse error:&error];

// Encode your Response
NSString *content = [[NSString alloc] initWithBytes:[responseData bytes] length:[responseData length] encoding:NSUTF8StringEncoding];

// Now read a Dictionary from it using SBJSON Parser
NSDictionary *responseDict = [content JSONValue];

NSLog(@"Response [%@]",responseDict); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:43:56.283

我不熟悉 SBJsonParser，但返回字符串的格式看起来像 JSONP，而不是 JSON。我想简单地清理包装器调用会让你得到你想要的。

另外，请注意，您的响应的“根”是字典，而不是数组。

```
{"result": [[... 
```

意味着代码可能看起来像这样：

```
NSDictionary *response = //... decode
NSArray *results = [response objectForKey:@"result"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T06:08:10.843

**已编辑**

您只需要使用[http://suggest.taobao.com/sug?area=etao&code=utf-8&q=iphone](http://suggest.taobao.com/sug?area=etao&code=utf-8&q=iphone)而不是[http://suggest.taobao.com/sug?area=etao&code=utf-8&callback=KISSY。 Suggest.callback&q=iphone](http://suggest.taobao.com/sug?area=etao&code=utf-8&callback=KISSY.Suggest.callback&q=iphone)你自己的代码可以工作..

# compilation - 从 DOS 命令提示符运行 MAKE 实用程序的问题

> ID：15674873
> 
> 赞同：1
> 
> 时间：2013-03-28T05:30:33.170
> 
> 标签：compilation, makefile, utility

我有：
fileMainProgram.cpp
fileClassImplementation.cpp
fileClass.h
makefile

在一个目录中。
运行 cmd 并输入

```
 g++ -make -f makefile 
```

修改了一段时间后收到此消息（更改文件名/扩展名，尝试不使用 -f，使用 gcc 而不是 g++ 等）

* * *

C:\miscprograms\Dropbox\box\Dropbox\c++\etextbook\e12\progec12\pe1c12romanNumeral>g++ -make -f makefile

c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../../mingw32/bin/ld.exe:makefile.tx t：文件格式无法识别；视为链接器脚本 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../../mingw32/bin/ld.exe:makefile.tx t:1 : 语法错误 collect2: ld 返回 1 退出状态

* * *

这是makefile，（尝试删除目标和操作之间的行，尝试使用自动变量等，

我试图将程序编译为

```
 g++ -c fileClassImplementation.cpp

                           then

                                      g++ fileClassImplementation.o fileMain.cpp 
```

得到一个可执行文件，它工作正常。

* * *

```
 all: a

 a: romanNumeralMain.o romanNumeralImp.o
 [1 tab]g++ romanNumeralMain.o romanNumeralImp.o -o a

 romanNumeralMain.o: romanNumeralMain.cpp 
        g++ -c romanNumeralMain.cpp

 romanNumeralImp.o: romanNumeralImp.cpp
        g++ -c romanNumeralImp.cpp

 clean:
        rm romanNumeralImp.o romanNumeralMain.o a 
```

* * *

为我的三星手机在 C4droid 上运行了整个过程，并且运行良好。
不适用于我的 Windows7 笔记本电脑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:21:10.260

您似乎拥有的是一个 GNU Makefile，适合运行[GNU Make](http://www.gnu.org/software/make/)。Windows 不附带 GNU Make，因此您需要自己下载。

看来你已经下载了 MingW，尝试运行`mingw32-make`命令来执行你的 makefile。

# asp.net - 在 C# 后面的代码中实现 javascript 确认框

> ID：15674874
> 
> 赞同：5
> 
> 时间：2013-03-28T05:30:35.517
> 
> 标签：asp.net, c#-4.0

我想从后面的代码中实现 javascript 确认框。

我的要求是我需要提出一个确认框的方法，根据我需要实现差异功能的结果

例如;

如果确认框确定，则添加税

如果取消 则不加税

我正在尝试这样的事情，但它对我没有帮助

```
ScriptManager.RegisterStartupScript(Page, Page.GetType(), "confirm", "confirm('Add tax');", true); 
```

任何人都可以帮忙。

我的示例代码是

```
protected void Button1_Click(object sender, EventArgs e)
{
    Double mrp = 200.00;

    ScriptManager.RegisterStartupScript(Page, Page.GetType(), "confirm", "return confirm('Add Tax');", true);
    if (Confirm == "Ok")
    {
        //Add tax to mrp
    }
    else
    {
        //No tax for mrp
    }
} 
```

谢谢你..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T06:59:00.570

可以这样试试吗：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script type = "text/javascript">
        function Confirm() {
            var confirm_value = document.createElement("INPUT");
            confirm_value.type = "hidden";
            confirm_value.name = "confirm_value";
            if (confirm("Do you want to save data?")) {
                confirm_value.value = "Yes";
            } else {
                confirm_value.value = "No";
            }
            document.forms[0].appendChild(confirm_value);
        }
    </script>
</head>
<body>
    <form id="form1" runat="server">
      <asp:Button ID="btnConfirm" runat="server"
                  OnClientClick = "Confirm()"
                  OnClick="OnConfirm" 
                  Text="Raise Confirm"/>
    </form>
</body>
</html> 
```

## 获取用户输入服务器端

现在服务器端我们需要获取我们存储在动态隐藏字段中的用户输入，然后根据他是否选择了确定或取消，我们需要执行不同的代码。

```
public void OnConfirm(object sender, EventArgs e)
{
    string confirmValue = Request.Form["confirm_value"];
    if (confirmValue == "Yes")
    {
        //Your logic for OK button
    }
    else
    {
        //Your logic for cancel button
    }
} 
```

**从[服务器端（代码隐藏）是 ASP.Net 中的无确认消息框](http://aspsnippets.com/Articles/Server-Side-Code-Behind-Yes-No-Confirmation-Message-Box-in-ASPNet.aspx)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T05:45:01.953

你可以`ScrptManager` 像这样使用：

```
ScriptManager.RegisterStartupScript(Page, Page.GetType(), "confirm", "return confirm('Your massage to be Displayed.');", true); 
```

您可以参考此[链接](http://www.codeproject.com/Questions/414111/confirmation-message-in-asp-net)了解更多详情。

或者你可以像这样尝试。

```
ScriptManager.RegisterStartupScript(this, typeof(string), "Message", "if(confirm('Sorry, but there is already a Primary Stakeholder assigned to this ticket. Would you like to replace the existing data?')){alert('OK');}else{alert('cancel');}",true); 
```

在 adove 代码中，如果用户按下`OK`按钮，它将显示带有消息**OK**的警报框，否则它将显示带有消息**Cancel**的警报框。

```
ScriptManager.RegisterClientScriptBlock(this, GetType(), "__Mensagem", "if (confirm('" + CustomMessage+ "')){$(\"#" + btnSave.ClientID + "\").click();}", true); 
```

你能试试这个。在这种情况下，如果确认返回 true，则返回按钮的单击事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T06:13:11.330

**请尝试以下操作：**

```
Double mrp = 200.00;
System.Text.StringBuilder sb = new System.Text.StringBuilder();
sb.Append("var x=''; var r=confirm('Press a button!');");
sb.Append("if (r==true){alert('ok'); x='" + mrp + "';}");
sb.Append("else{ alert('cancel');}");
sb.Append("document.getElementById('demo').innerHTML=x;");
ScriptManager.RegisterStartupScript(Page, Page.GetType(), "confirm", sb.ToString(), true); 
```

页面：

```
<p id="demo"></p> 
```

# asp.net - 如何在 SQL 输出参数中打印消息

> ID：15674877
> 
> 赞同：0
> 
> 时间：2013-03-28T05:31:00.870
> 
> 标签：asp.net, sql, sql-server, stored-procedures, output-parameter

我有一个如下所示的存储过程。`@ErrorMsg`如何在我的 aspx 页面的输出参数中打印消息。

```
ALTER PROC [dbo].[ItemMasterIns]
(
    @ItemCode VARCHAR(30),
    @ItemDesc VARCHAR(100),
    @ErrorMsg VARCHAR(200) OUTPUT     
)
AS
BEGIN
     IF EXISTS ( SELECT 'X' FROM [DataBase].[dbo].[Table] WHERE Code= @Code )
     BEGIN
            SET @ErrorMsg = 'GIVEN CODE EXIST!'
            RETURN 0
     END
     ELSE
     BEGIN
            INSERT INTO [DataBase].[dbo].[Table]([Code], [Descr])
            VALUES (@Code, @Desc)
     END                   
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:51:46.437

如果要获取 [@errormessage] 并将其打印在 ASPX 页面上，则需要使用**ParameterDirection.Output**

根据您的评论，我编写了一个完整的代码并在我的本地进行了测试，它按预期工作。请再试一次。

```
 using System;
    using System.Data;
    using System.Data.SqlClient;

    namespace ConsoleApplication2
    {
        class Program
        {
            static void Main(string[] args)
            {
                Program.RunSPWithParameterOutput();
            }

            public static void RunSPWithParameterOutput()
            {
                string PredefinedConnectionString = "Data Source=localhost;Initial Catalog=Adventure;Integrated Security=SSPI";

                using (SqlConnection conn = new SqlConnection(PredefinedConnectionString))
                using (SqlCommand cmd = new SqlCommand("dbo.usp_ItemMasterIns", conn))
                {
                    cmd.CommandType = CommandType.StoredProcedure;

                    // set up the parameters
                    cmd.Parameters.Add("@ItemsCode", SqlDbType.VarChar, 30);
                    cmd.Parameters.Add("@ItemsDesc", SqlDbType.VarChar, 30);
                    cmd.Parameters.Add("@ErrorMessage", SqlDbType.VarChar, 200).Direction = ParameterDirection.Output;

                    // set parameter values
                    cmd.Parameters["@ItemsCode"].Value = "test";
                    cmd.Parameters["@ItemsDesc"].Value = "test";

                    // open connection and execute stored procedure
                    conn.Open();
                    cmd.ExecuteNonQuery();

                    // read output value from @ErrorMessage
                    string ErrorMessage = cmd.Parameters["@ErrorMessage"].Value.ToString();
                    Console.WriteLine(ErrorMessage);
                    conn.Close();
                }
            }
        }
    } 
```

测试部署在我本地的存储过程。

```
 create procedure usp_ItemMasterIns (@ItemsCode varchar(100),
                                        @ItemsDesc varchar(30),
                                        @ErrorMessage varchar(200) output
                                        )
    as 
    begin 
        set @ErrorMessage='test error message'
    end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:41:43.310

您可以按如下方式使用打印

```
select * from sysobjects
PRINT 'Just selected * from sysobjects' 
```

您可以在输出参数中设置值并在 C# 上获取它

像这样的东西：

```
SqlCommand cmd = new SqlCommand("ItemMasterIns", cn);
cmd.CommandType=CommandType.StoredProcedure;
SqlParameter parm=new SqlParameter("@ItemCode",SqlDbType.VarChar);
parm.Size=30; 
parm.Direction =ParameterDirection.Input ; 
cmd.Parameters.Add(parm); 

SqlParameter parm2=new SqlParameter("@ItemDesc",SqlDbType.VarChar); 
parm2.Size=100; 
parm2.Direction =ParameterDirection.Input ; 
cmd.Parameters.Add(parm2); 

SqlParameter parm3=new SqlParameter("@ErrorMsg",SqlDbType.VarChar); 
parm3.Size=200; 
parm3.Direction =ParameterDirection.Output; 
cmd.Parameters.Add(parm3); 

cn.Open(); 
cmd.ExecuteNonQuery();
cn.Close(); 

// Print the output value
Console.WriteLine(cmd.Parameters["@ErrorMsg"].Value); 
Console.ReadLine(); 
```

# image-processing - 除了标准/渐进式，第三种 JPEG 压缩：按通道加载？

> ID：15674880
> 
> 赞同：12
> 
> 时间：2013-03-28T05:31:28.130
> 
> 标签：image-processing, imagemagick, jpeg, python-imaging-library, image-compression

这个问题可能是一个“悬而未决的问题”，你们中的许多人可能急于结束它，但请不要。让我解释。

众所周知，JPEG有两种压缩方式（至少在Photoshop保存对话框中）

*   优化，图像加载有点像逐行
*   渐进式，其中图像首先像马赛克一样加载，逐渐变好，直到原始分辨率

我以前读过很多 PNG/JPEG 优化[文章](http://www.splashnology.com/article/how-to-optimize-png-and-jpeg-without-quality-loss-part-1/2071/)，但现在我遇到了这种很棒的第三种压缩，来自一个狂野的随机谷歌图片搜索。有问题的JPEG是这个

[http://storage.googleapis.com/marc-pres/boston-event-1012/images/google-data-center.jpg](http://storage.googleapis.com/marc-pres/boston-event-1012/images/google-data-center.jpg)

尝试在 Chrome/Firefox 中加载链接（仅在 IE/Safari 中，直到图像完全加载然后显示）

你可以观察到：

1.  图像首先以黑白方式加载
2.  然后看起来像加载了**红色通道**
3.  接下来加载**绿色通道**
4.  最后加载**蓝色**通道

我尝试使用模拟的非常慢的连接再次加载它，并观察到 ​​JPEG 不仅按通道顺序加载，而且以渐进方式加载。所以首先加载的图像是黑白马赛克然后是绿色马赛克然后逐渐全彩色马赛克最后是全分辨率和全彩色图像。

这是一项了不起的技术，假设您正在构建一个电子杂志，其中每个页面都有很多图片，您希望用户快速翻阅页面，而这种图片正是最好的。为了快速预览，加载空白-n-白色缩略图，如果用户停留，则完全加载原始图像。

所以我的问题是：如何使用 Python Pillow 或 ImageMagick 或任何类型的**开源**软件生成这样的图像？

如果您认为这个问题不合适，请发表评论，不要直接关闭它。

更新1：

事实证明，谷歌在其所有 JPEG 图片[1](http://storage.googleapis.com/marc-pres/boston-event-1012/index.html)、[2](http://www.google.com/about/datacenters/gallery/)中都使用了这项技术，例如[这个](http://www.google.com/about/datacenters/gallery/images/_2000/IDI_018.jpg)

更新2：我发现了另一个[线索](https://developers.google.com/speed/docs/mod_pagespeed/filter-image-optimize)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T17:53:38.243

JPEG 文件中的图像数据可以通过多种不同的方式进行切片，并且切片（或通常称为“扫描”）可以以多种不同的顺序存储在文件中。

在大多数 JPEG 文件中，文件中的第一次扫描包含图像的所有颜色分量，如果是彩色图像，则交错在一起。在非渐进式 JPEG 中，文件将仅包含一次扫描。在渐进式 JPEG 中，随后会进行其他扫描，每个扫描可能包含一个组件或多个组件。

但是没有什么需要这样做。如果文件中的第一次扫描不包含所有颜色分量，我们可以称这样的文件为“非交错”。

您的示例文件是非交错的，它们也是渐进的。渐进式非交错 JPEG 似乎比非渐进式非交错 JPEG 得到更广泛的支持。

标准的 IJG libjpeg 软件能够创建非交错文件。虽然这并不容易，但您可以使用它的`cjpeg`实用程序，`-scans`文件中记录了该选项`wizard.txt`。

# php - Prevent Double Quotes from being stripped

> ID：15674882
> 
> 赞同：0
> 
> 时间：2013-03-28T05:31:41.720
> 
> 标签：php

What's the best way to display a person's height with feet and inches as a string and also prevent sql injection as well as ensure proper input format? Ideally, I'd like to display it like 5'11" as an example.

```
$height = $_POST['height'];
$height = stripslashes($height); 
```

The problem with this is, although in MySQL its stored as 5'11", when it outputs on the page it displays it as 5'11 without the double quote at the end.

Is there a better way to do this? I am also considering trying to separate the height into two separate textfield inputs, one for feet and one for inches.. then combining the two to display as one.

Suggestions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:50:58.207

要显示您需要转义的引号：

```
echo "5\' 11\""; 
```

将输出：

```
5' 11" 
```

在插入数据库之前，您可以使用[addlashes](http://php.net/manual/en/function.addslashes.php)转义所有字符（需要转义的）。然后，为了增加安全性，您应该查看[准备好的语句](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:33:29.567

您可以用一点创意过滤内容，以使其保持一致。在此示例中，我将使用 htmlentities 转换所有内容，但没有必要以这种方式将它们存储在数据库中。您需要确保在数据库注入之前对 PDO 使用 mysqli_real_escape_string() 或 quote() 之类的东西。

```
<?php
    //$height = $_POST['height'];
    $heights = array('5\' 6"','5ft 6in','5 feet 6 inches','5.5\'','5\'6"','5 1/2\'','3 foot 5 inches','2ft 8in','3 1/4in','3 1/4ft');

    $patterns = array(
    //Double Quotes
    '!&#34;!',
    '!&ldquo;!',
    '!&rdquo;!',
    '!&#8220;!',
    '!&#8221;!',
    '!&Prime;!',
    '!&#8243;!',
    '!in(ch(es)?|\.)?!',

    //Single Quotes
    '!&acute;!',
    '!&lsquo;!',
    '!&#[0]?39;!',
    '!&rsquo;!',
    '!&#8216;!',
    '!&#8217;!',
    '!&#8242;!',
    '!&prime;!',
    '!f(oo|ee)?t\.?!',

    //Conversions
    '!( 1/2|\.5)&apos;!',
    '!( 1/4|\.25)&apos;!',
    '!( 1/3|\.3(3(3)?)?)&apos;!',
    '!( 3/4|\.75)&apos;!',

    //cleanup
    '! (&)!',
    '!;([0-9])!',

    //fraction to decimal inch conversions
    '! 1/2!','! 1/4!','! 1/3!','! 3/4!',

    );

    $replacements = array(
    '&quot;','&quot;','&quot;','&quot;','&quot;','&quot;','&quot;','&quot;',
    '&apos;','&apos;','&apos;','&apos;','&apos;','&apos;','&apos;','&apos;','&apos;',
    '&apos; 6&quot;','&apos; 3&quot;','&apos; 4&quot;','&apos; 9&quot;',"$1","; $1",
    '.5','.25','.33','.75',
    );
        echo "<pre>";
    foreach($heights as $value){
        $value = htmlentities($value,ENT_QUOTES);

        echo "$value becomes ".preg_replace($patterns,$replacements,$value)."\n";
    }
        echo "</pre>";
?> 
```

输出看起来像

```
5' 6" becomes 5' 6"
5ft 6in becomes 5' 6"
5 feet 6 inches becomes 5' 6"
5.5' becomes 5' 6"
5'6" becomes 5' 6"
5 1/2' becomes 5' 6"
3 foot 5 inches becomes 3' 5"
2ft 8in becomes 2' 8"
3 1/4in becomes 3.25"
3 1/4ft becomes 3' 3" 
```

# css - Same print CSS as screen

> ID：15674886
> 
> 赞同：5
> 
> 时间：2013-03-28T05:32:12.167
> 
> 标签：css, printing, zurb-foundation

It seems like there should really be an easy solution to this, but so far I've been unsuccessful in finding one.

I'm using Zurb Foundation and I'm basically creating a live form that takes inputs from a form (above), and fills in a content (below) using angular.js. Users will then print the page to a PDF. I'd like to maintain the layout I have for the content below, and I'd like to hide the form above when printing. Zurb has a fine "hide-for-print" css rule that seems like it should work just fine when applied to the form above, but when I toggle print stylesheets, it basically strips all CSS and goes back to ugly.

Suggestions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:35:00.090

您是否尝试过对媒体使用 CSS 媒体查询`print`？

```
.foo {
    height:150px;
    width:150px;
    background-color:#F00  // see what I did there?
}

.bar {
    height:10px;
    width:50%;
    border-radius:5px;
    background-color:#000
}

.baz {
    width:100px;
    height:150px;
    background-color:#FFF;
}

@media screen {
    .baz {
        display:block;
    }
}

@media print {
    .baz {
        display:none;
    }
} 
```

现在，只有一些`.baz`'s 属性是媒体查询的目标。您可以随意`.baz`在查询本身内部或外部放入任何 's 属性。同样，您可以将*所有*的`.baz`属性放在媒体查询中，但我认为这不是您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:21:43.340

我在这些类型的情况下所做的是为`print.css`.

```
<link rel="stylesheet" type="text/css" href="global.css" />
<link rel="stylesheet" type="text/css" media="print" href="print.css" /> 
```

如果浏览器正在打印，`global.css`将首先加载文件，然后`print.css`文件将覆盖任何内容。

但请记住，`background: *`默认情况下，打印时所有浏览器中的所有规则都将关闭，因此无论如何都会影响某些样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T07:08:44.557

关于 zurb 的打印样式表的 idk，没有示例，很难回答，但是您可以使用 weasyprint，开源库将 html/css 转换为 pdf [https://github.com/Kozea/WeasyPrint](https://github.com/Kozea/WeasyPrint)

# php - 检查 joomla 2.5 的首页

> ID：15674888
> 
> 赞同：2
> 
> 时间：2013-03-28T05:32:13.667
> 
> 标签：php, joomla

我阅读了 joomla 的说明，如果我想检查当前页面是否是首页，如下所示

```
 <?php
$app = JFactory::getApplication();
$menu = $app->getMenu();
if ($menu->getActive() == $menu->getDefault()) {
        echo 'This is the front page';
}
?> 
```

但是，当我练习这个指令时。文本“这是首页”始终显示在所有页面上。这怎么会发生在我的 joomla 上。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T08:04:59.303

您可以尝试使用以下代码检查首页：

```
if (JUri::getInstance()->toString() == JUri::base()) { ... } 
```

# objective-c - how to create image in cell table view

> ID：15674891
> 
> 赞同：0
> 
> 时间：2013-03-28T05:32:19.057
> 
> 标签：objective-c, uitableview, uiimageview

I want create one page in way table view. its display 4 cell that different image and name for any cell. (this information get url in loop)

first : I create one class that I can meaning 2 variable.

Recipe.h #import

```
 @interface Recipe : NSObject

 @property (nonatomic, strong) NSString *name; // name of recipe
 @property (nonatomic, strong) NSString *imageFile; // image filename of recipe

 @end so now in RecipeViewController (root) I write this code :
     #import "RecipeViewController.h"
     #import "Recipe.h"

     @interface RecipeViewController ()
     {
     IBOutlet UIImageView *ab;
     }

     @end

     @implementation RecipeViewController
     {
         NSMutableArray *recipes;
         NSInteger num;
     }
     @synthsize ab;

     - (id)initWithStyle:(UITableViewStyle)style
     {
         self = [super initWithStyle:style];
         if (self) {
             // Custom initialization
         }
         return self;
     }

     - (void)viewDidLoad
     {
         [super viewDidLoad];

         self.navigationItem.title = @"Recipe Book";
         UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStyleBordered target:nil
 action:nil];
         [[self navigationItem] setBackBarButtonItem:backButton];

         NSString *numberbook = [[NSString alloc]initWithContentsOfURL:[NSURL
 URLWithString:@"http://192.168.1.102/mamal/book.php?all"]];

         NSInteger numbook = [numberbook integerValue];

         NSMutableArray *b = [[NSMutableArray alloc]initWithCapacity:numbook];

         for (int i = 1; i <= numbook; i++)
         {
             Recipe *si = [Recipe new];
             NSLog(@"%d,%@",i,si);

             NSString *c = [[NSString alloc]initWithContentsOfURL:[NSURL URLWithString:[NSString
 stringWithFormat:@"http://192.168.1.102/mamal/book.php?info=1&b=%d",i]]];

             NSString *a = [NSString stringWithFormat:@"http://192.168.1.102/mamal/book.php?p=1&b=%d",i];

             [b addObject:a];

             UIImage *myImage = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:a]]];

             [ab setImage:myImage];

             NSLog(@"%@",a);

             NSLog(@"%@",c);

             si.name = [NSString stringWithString:c];
             si.imageFile =[];   //I so confused!!!

             if(!recipes){
                 recipes = [NSMutableArray array];
             }
             [recipes addObject:si];
         }

         num = numbook;

         // Remove table cell separator
         [self.tableView setSeparatorStyle:UITableViewCellSeparatorStyleNone];

         // Assign our own backgroud for the view
         self.parentViewController.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"common_bg"]];
         self.tableView.backgroundColor = [UIColor clearColor];

         // Add padding to the top of the table view
         UIEdgeInsets inset = UIEdgeInsetsMake(5, 0, 0, 0);
         self.tableView.contentInset = inset;

     }

     - (void)didReceiveMemoryWarning
     {
         [super didReceiveMemoryWarning];
         // Dispose of any resources that can be recreated.
     }

     #pragma mark - Table view data source

     - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
     {
         // Return the number of sections.
         return 1;
     }

     - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
     {
         // Return the number of rows in the section.
         return recipes.count;
     }

     - (UIImage *)cellBackgroundForRowAtIndexPath:(NSIndexPath *)indexPath
     {
         NSInteger rowCount = [self tableView:[self tableView] numberOfRowsInSection:0];
         NSInteger rowIndex = indexPath.row;
         UIImage *background = nil;

         if (rowIndex == 0) {
             background = [UIImage imageNamed:@"cell_top.png"];
         } else if (rowIndex == rowCount - 1) {
             background = [UIImage imageNamed:@"cell_bottom.png"];
         } else {
             background = [UIImage imageNamed:@"cell_middle.png"];
         }

         return background;
     }

     - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
     {
         static NSString *CellIdentifier = @"Cell";
         UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

         // Configure the cell...
         if (cell == nil) {
             cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
 reuseIdentifier:CellIdentifier];
         }

         // Display recipe in the table cell
         Recipe *recipe = [recipes objectAtIndex:indexPath.row];
         UIImageView *recipeImageView = (UIImageView *)[cell viewWithTag:100];
         recipeImageView.image = [UIImage imageNamed:recipe.imageFile];

         UILabel *recipeNameLabel = (UILabel *)[cell viewWithTag:101];
         recipeNameLabel.text = recipe.name;

         UILabel *recipeDetailLabel = (UILabel *)[cell viewWithTag:102];
         recipeDetailLabel.text = recipe.detail;

         // Assign our own background image for the cell
         UIImage *background = [self cellBackgroundForRowAtIndexPath:indexPath];

         UIImageView *cellBackgroundView = [[UIImageView alloc] initWithImage:background];
         cellBackgroundView.image = background;
         cell.backgroundView = cellBackgroundView;

         return cell;
     }

     #pragma mark - Table view delegate

     - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
     {
     }

     @end 
```

I so confused and get this error :

**"connection cannot have a prototype object as its destination"**

also I don't know one way for display image in cell!!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:37:58.690

```
cell.imageView.image = yourImage 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T09:22:56.817

尝试这个

```
cell.yourImage.image = [UIImage imageNamed:@"imageName"]; 
```

# mysql - 查询多个值

> ID：15674892
> 
> 赞同：1
> 
> 时间：2013-03-28T05:32:19.600
> 
> 标签：mysql, sql, select

我目前正在编写应该查询具有多个 ID 的多个不同记录的代码。我试过了：

```
SELECT * FROM Items WHERE ID = ( 1, 2 )

SELECT * FROM Items WHERE ID = 1, 2

SELECT * FROM Items WHERE ID = '1, 2' 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T05:34:50.933

用这个

```
SELECT * FROM Items WHERE ID = 1 or ID = 2; 
```

或使用速记法

```
SELECT * FROM Items WHERE ID IN (1,2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T05:35:22.630

`IN`如果您要与多个值进行比较，请使用。

```
SELECT * FROM Items WHERE ID IN (1, 2) 
```

这对于

```
SELECT * FROM Items WHERE ID = 1 OR ID = 2 
```

* * *

对于此语句：*“...查询具有多个 ID 的多个不同记录”*，我认为您想搜索具有多个 ID 的组，如果是这种情况，则称为问题`Relational Division`。

```
SELECT groupColumn
FROM   Items 
WHERE  ID IN (1, 2)
GROUP  BY groupColumn
HAVING COUNT(*) = 2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T05:35:31.973

你需要输入的是

```
SELECT * FROM Items WHERE ID IN (1,2) 
```

**注意**IN 括号内的字符串值使用单引号 ('1','2')

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-28T05:36:25.460

使用`IN`如下

```
SELECT * FROM Items WHERE ID IN (1, 2); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-28T05:37:32.183

句法：

```
SELECT * FROM TABLE WHERE ID IN (id1, id2, ..., idn) 
```

在你的情况下：

```
SELECT * FROM Items WHERE ID IN (1, 2); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-28T06:04:35.323

它也可以。您要查找的信息是大多数 SQL 语言的“IN”运算符（[此处为 MySQL 示例](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_in)）。

您正在做的是提供一系列值作为一个集合（IN 运算符的右侧），然后要求数据库带回您正在查询的列（IN 运算符的左侧）具有一个的记录集合中的值。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-28T07:03:23.733

采用

```
select * from items where id in (1,2); 
```

# python - now() 的较短版本

> ID：15674894
> 
> 赞同：0
> 
> 时间：2013-03-28T05:32:31.900
> 
> 标签：python, datetime

我想以某种格式获取当前日期时间。还有比这更短的吗。

```
>>> import datetime
>>> datetime.datetime.now().strftime('%Y-%m-%d %H:%M:%S')
'2013-03-28 08:29:41' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T05:34:49.113

不，没有。但是您不必总是重复整个调用。例如：

```
>>> import datetime
>>> now = datetime.datetime.now
>>> now().strftime('%Y-%m-%d %H:%M:%S')
'2013-03-28 08:29:41' 
```

如果你总是想要相同的格式，你也可以包装它：

```
import datetime
def now_string():
    return datetime.datetime.now().strftime('%Y-%m-%d %H:%M:%S') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T05:34:36.820

把它放在某个函数中

```
import datetime
def my_now():
    return datetime.datetime.now().strftime('%Y-%m-%d %H:%M:%S') 
```

您可以使用一些可选参数使其更灵活

```
import datetime
def my_now(the_time=None, fmt='%Y-%m-%d %H:%M:%S'):
    if the_time is None:
        the_time = datetime.datetime.now()
    return the_time.strftime(fmt) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T05:38:14.610

如果这就是你想要的，那就这样吧。但是请不要因为这样的黑客代码而责备我:-)

```
>>> import datetime
>>> str(datetime.datetime.now())[:19]
'2013-03-28 15:57:31' 
```

字符数 32 :-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T08:04:15.627

由于您的格式字符串接近默认格式，您只需要摆脱微秒：

```
import datetime
str(datetime.datetime.now().replace(microsecond = 0)) 
```

# selenium-webdriver - 我们可以使用 Selenium 自动安装软件吗

> ID：15674896
> 
> 赞同：2
> 
> 时间：2013-03-28T05:32:37.043
> 
> 标签：selenium-webdriver

据我所知，Selenium 只能自动化 Web 操作。我们可以使用 selenium 自动安装软件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-12T11:48:13.887

感谢大家的回复。如果软件的安装完全基于 Windows 并且不涉及基于浏览器的操作，我们无法自动安装软件。在这种情况下，我们需要使用 AutoIT 等工具。Selenium 仅自动执行浏览器操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:04:51.657

*“Selenium 是一个用于 Web 应用程序的可移植软件测试框架。”*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T15:41:04.277

不

只是为了确保我清楚（并达到最小字符限制）

**不！**

# android - 如何在 7" 两个不同的平板电脑上设置布局？

> ID：15674897
> 
> 赞同：4
> 
> 时间：2013-03-28T05:32:46.210
> 
> 标签：android, android-layout, android-resolution

我有两个 7 英寸平板电脑，一个平板电脑 (800*480) 和第二个平板电脑 (1024*600)。我面临以下问题：-

**1\. 两者都可以在 layout-mdpi 和 layout-large 上运行，所以我怎样才能创建不同的文件夹来运行我的应用程序这两种分辨率。**

应用程序在两个平板电脑中为 mdpi 布局运行 xml：-

```
layout-mdpi
layout-hdpi 
```

应用程序在两个平板电脑中为大型布局运行 xml：-

```
layout-large
layout-xlarge 
```

我可以实现[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)这但对我来说不能完全使用。

或者

尝试这么多链接，但两个平板电脑都以相同的布局运行，但仍然存在同样的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T05:51:36.750

尝试使用这个。它对我有用

```
layout-sw600dp 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T06:02:03.390

7 英寸平板电脑——Android 3.2 引入了一种新方法来为更离散的屏幕尺寸指定资源。这项新技术基于您的布局所需的空间量（例如**600dp 的宽度**），而不是试图让您的布局适合一般化大小组（例如 large 或 xlarge）。

```
res/layout-sw600dp/
res/layout-sw600dp-land
res/layout-sw600dp-port 
```

*   320dp：典型的手机屏幕（240x320 ldpi、320x480 mdpi、480x800 hdpi 等）。
*   480dp：像 Streak (480x800 mdpi) 这样的补间平板电脑。
*   600dp：7 英寸平板电脑 (600x1024 mdpi)。
*   720dp：10 英寸平板电脑（720x1280 mdpi、800x1280 mdpi 等）。

用于区分尺寸（例如 7 英寸和 10 英寸平板电脑）的 UI

1.  **res/layout/main_activity.xml # 用于手机（小于 600dp 可用宽度）**
2.  **res/layout-sw600dp/main_activity.xml # 适用于 7 英寸平板电脑（600dp 宽和更大）**
3.  **res/layout-sw720dp/main_activity.xml # 适用于 10” 平板电脑（720dp 宽和更大）**

***xlarge 是超大屏幕的配置限定符。********当您将此字符串附加到资源目录名称（例如 layout-xlarge）时，它向系统表明这些资源将用于具有超大屏幕的设备上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T06:15:40.723

> 我有两个 7 英寸平板电脑，一个平板电脑 (800*480) 和第二个平板电脑 (1024*600)。我面临以下问题：-

我遇到了同样的问题。作为一种解决方法，我在与默认相同的布局文件夹中制作了 (800*480) 的 xml 文件。

还为 GalaxyNexus 和 7'' 平板电脑等设备使用 layout-sw320dp，我为 7'' 屏幕平板电脑和 10'' 平板电脑制作 layout-sw600dp

例如：您有名为“activity_main.xml”的 xml 文件

> 1）内部`layout`文件夹->根据nexus one（480 * 800 hdpi）放置activity_main.xml布局
> 
> 2）内部`layout-sw320dp`文件夹 - >根据Galaxy Nexus（720 * 1280 xhdpi）放置activity_main_tab.xml和布局的设备应该从中获取布局`layout-600dp`但将从中获取布局 `layout-320dp`
> 
> 3）在`layout-600dp`文件夹内->根据平板电脑7''屏幕放置activity_main_tab.xml布局
> 
> 4）在`layout-700dp`文件夹内->根据平板电脑10''屏幕放置activity_main_tab.xml

使布局如上所示。我已经检查了设备的运行时宽度和高度。并相应地设置布局文件。

```
if (displayWidth >= 552 && displayHeight >= 976 || displayWidth >= 976
                && displayHeight >= 552) { 
   Log.i(TAG, "in tab xml");            
   setContentView(R.layout.activity_main_tab); 
}else{ 
Log.i(TAG, "in Simple xml");
    setContentView(R.layout.activity_main); 
} 
```

希望这会有所帮助。

# ios - Not Showing screenshots on iPad for the app store iphone app

> ID：15674898
> 
> 赞同：1
> 
> 时间：2013-03-28T05:32:58.933
> 
> 标签：ios, ipad, itunes, screenshot

I have recently submitted my iPhone app to app store , While submitting i have uploaded the screenshots of size 960x 640 . As for Mac and iPhone all the five screen are visible but for iPad two screen are missing .

But if we tab on the screen shots , all the five can be viewed while scrolling .

# windows - 修复多次鼠标中键点击

> ID：15674900
> 
> 赞同：1
> 
> 时间：2013-03-28T05:33:05.857
> 
> 标签：windows, autohotkey

基本上我有一个问题，即单击鼠标中键时会出现多个非常快速的中键。例如，如果我用鼠标中键在新选项卡中打开一个链接，它将打开大约 10 个该选项卡。我已经尝试了所有常规方法来修复它，即。驱动程序修复等。我现在想尝试的是用 AHK（自动热键）为 Windows 进行一些鼠标去抖动。

基本上我的想法是这样做：

```
while (forever)
    if( capture the middle mouse)
        sleep 500 ms
        mouse click
    end
end 
```

任何人都可以对这种方法提出一些建议吗？

或者我想过制作一个鼠标中键热键：

```
$MButton::  
Loop  
{
sleep 500
if not GetKeyState("MButton", "P") 
    break  ; Break out of the loop.
}
send {MButton}
return 
```

任何人都可以看到这有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:27:50.440

您可以毫不拖延地获得更简单的解决方案。如果最后一次点击是在 50 毫秒前，这将忽略中间点击。

```
#Persistent

global pressed_g := 0 
global delay_g := 50 ; delay in miliseconds, increase this value if your multiple click take longer than delay_g time

return

MButton::
    if( pressed_g = 0 )
    {
        Send, {MButton}
        tooltip,sent
        pressed_g := 1
    }
    SetTimer, Countdown , Off
    SetTimer, Countdown , -%delay_g%

return

Countdown:
    pressed_g := 0
return 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T11:24:47.720

会不会是你在找这个？您按下`MButton`并且在按住的同时`MButton`，脚本将继续触发`MButton`。

```
#Persistent
MButton::
while GetKeyState("MButton", "P")  ; While the Middle Mouse button key is being held down
{
    Send, {MButton}
}
return 
```

# android - How can we sync the payments from google checkout on website and android app?

> ID：15674901
> 
> 赞同：1
> 
> 时间：2013-03-28T05:33:22.120
> 
> 标签：android, in-app-billing, google-checkout

In my android app I have in app products which a user could buy using IAB 3 . And these products are available on website also. I want to know if there is a way that these two payments may be synced together. How would this be possible .Please help?

# html - 如何为每种字体样式定义单独的字体 - CSS

> ID：15674906
> 
> 赞同：2
> 
> 时间：2013-03-28T05:33:52.190
> 
> 标签：html, css

我有一个 HTML 页面，其中包含使用 CSS 定义的各种`font-style`s，如、`normal`、`bold`等。我想为每个 使用单独的字体，比如for ，for等。我使用导入字体，比如，`italics``oblique``font-style``myboldfont``bold``myitalicsfont``italics``@font-face`

```
@font-face {
    font-family: "MyNormal";
    font-style: normal;
    font-weight: normal;
    src: url("mynormalfont.woff") format("woff");
}
@font-face {
    font-family: "MyBold";
    font-style: normal;
    font-weight: normal;
    src: url("myboldfont.woff") format("woff");
}
@font-face {
    font-family: "MyItalics";
    font-style: normal;
    font-weight: normal;
    src: url("myitalicsfont.woff") format("woff");
}
@font-face {
    font-family: "MyOblique";
    font-style: normal;
    font-weight: normal;
    src: url("myobliquefont.woff") format("woff");
} 
```

并导入普通、斜体、粗体和斜体字体。我将`body`样式定义为；

```
body{
  font-family: MyNormal, MyBold, MyItalics, MyOblique;
} 
```

这足以定义`font-style`正文中所有 s 的样式吗？我的意思是如果我分配`font-style: italic`或分配`font-weight: bold`给一个元素，会使用斜体字体还是粗体字体？或者我应该怎么做才能实现这一点，这样如果我使用`font-weight: bold`任何元素，`myboldfont.woff`都应该使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T05:36:08.243

这应该有效：

```
@font-face {
    font-family: "MyFont";
    font-style: normal;
    font-weight: normal;
    src: url("mynormalfont.woff") format("woff");
}
@font-face {
    font-family: "MyFont";
    font-style: normal;
    font-weight: bold;
    src: url("myboldfont.woff") format("woff");
} 
```

还有这个：

```
...{
   font-family:"MyFont";
   font-weight:bold;
}... 
```

然后，您将始终为 使用相同的名称`font-family`，但您将更改不同的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T07:37:37.670

问题中列出的 CSS 是最安全的方法。当超过 1 个粗细或超过 4 个粗细或样式链接到字体系列名称时，IE8 会出现显示问题。为每个字体变体使用唯一的字体系列名称可以避免这个问题。

当每个字体变体使用唯一的字体系列名称时，没有必要在 @font-face 声明或使用该字体的 HTML 元素的 CSS 规则中标识粗细或样式。

此外，为了支持尽可能广泛的浏览器集，对嵌入字体使用 .woff、.ttf 和 .eot 的组合。这是 TypeKit 使用的方法：

```
@font-face {
    font-family: 'MyNormal';
    src: url('mynormalfont.eot');
    src: url('mynormalfont.eot?#iefix')
            format('embedded-opentype'),
         url('mynormalfont.woff') format('woff'),
         url('mynormalfont.ttf') format('truetype');
}
@font-face {
    font-family: 'MyBold';
    src: url('myboldfont.eot');
    src: url('myboldfont.eot?#iefix')
            format('embedded-opentype'),
         url('myboldfont.woff') format('woff'),
         url('myboldfont.ttf') format('truetype');
}
@font-face {
    font-family: 'MyItalics';
    src: url('myitalicsfont.eot');
    src: url('myitalicsfont.eot?#iefix')
            format('embedded-opentype'),
         url('myitalicsfont.woff') format('woff'),
         url('myitalicsfont.ttf') format('truetype');
}
@font-face {
    font-family: 'MyOblique';
    src: url('myobliquefont.eot');
    src: url('myobliquefont.eot?#iefix')
            format('embedded-opentype'),
         url('myobliquefont.woff') format('woff'),
         url('myobliquefont.ttf') format('truetype');
} 
```

字体变体的使用如下：

```
p {
    font-family: MyNormal, sans-serif;   /* Still useful to add fallback fonts */
    font-size: 12px;
}
h2 {
    font-family: MyBold, sans-serif;
    font-size: 20px;
} 
```

缺点是必须在使用其中一种字体变体的每个 CSS 规则中指定字体系列名称。但这可以被认为是目前广泛的跨浏览器支持必须付出的代价。

# asp.net-mvc-3 - 在 MVC3 中使用 AutoMapper 绑定自定义属性

> ID：15674907
> 
> 赞同：2
> 
> 时间：2013-03-28T05:33:57.203
> 
> 标签：asp.net-mvc-3, c#-4.0, automapper

我已经实现了简单的 MVC3 应用程序，其中我使用 AutoMapper 将我的数据库表绑定到 ViewMode，但我无法使用 automapper 绑定复杂的 ViewModel。

这是我的域类

```
namespace MCQ.Domain.Models
{
    public class City
    {
        public City()
        {
            this.AreaPincode = new List<AreaPincode>();
        }

        public long ID { get; set; }
        public string Name { get; set; }
        public int DistrictID { get; set; }
        public virtual ICollection<AreaPincode> AreaPincode { get; set; }
        public virtual District District { get; set; }
    }
} 
```

我的 ViewModel 类

```
 public class CityViewModel
    {
        public CityViewModel()
        {
            this.AreaPincode = new List<AreaPincodeViewModel>();
        }

        public long ID { get; set; }
        public string Name { get; set; }
        public int DistrictID { get; set; }
        public ICollection<AreaPincodeViewModel> AreaPincode { get; set; }

    } 
```

因为当我尝试映射此属性时，我有一个 ICollection 属性，它显示以下错误

```
The following property on MCQ.ViewModels.AreaPincodeViewModel cannot be mapped:
AreaPincode
Add a custom mapping expression, ignore, add a custom resolver, or modify the destination type MCQ.ViewModels.AreaPincodeViewModel.
Context:
Mapping to property AreaPincode from MCQ.Domain.Models.AreaPincode to MCQ.ViewModels.AreaPincodeViewModel
Mapping to property AreaPincode from System.Collections.Generic.ICollection`1[[MCQ.Domain.Models.AreaPincode, MCQ.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] to System.Collections.Generic.ICollection`1[[MCQ.ViewModels.AreaPincodeViewModel, MCQ, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
Mapping from type MCQ.Domain.Models.City to MCQ.ViewModels.CityViewModel
Exception of type 'AutoMapper.AutoMapperConfigurationException' was thrown. 
```

以下我在 Global.asax 中编写的代码内容

```
 Mapper.CreateMap<City, CityViewModel>()
           .ForMember(s => s.DistrictID, d => d.Ignore())
           .ForMember(s => s.AreaPincode, d => d.MapFrom(t => t.AreaPincode)); 
```

请让我知道我应该如何使用 automapper 绑定这个自定义集合属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T05:39:48.650

您需要在`AreaPincode`和之间创建自定义映射`AreaPincodeViewModel`：

```
Mapper.CreateMap<AreaPincode, AreaPincodeViewModel>()
  .ForMember(...) 
```

而且这一行不需要：`.ForMember(s => s.AreaPincode, d => d.MapFrom(t => t.AreaPincode))`会自动匹配

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T05:41:44.533

在映射到`AreaPincode`时，`CityViewModel`您需要从类型转换为，`ICollection<AreaPincode>`即将类型的`ICollection<AreaPincodeViewModel>`所有元素映射到类型`AreaPincode`的元素`AreaPincodeViewModel`。

为此，请创建一个从`AreaPincode`到的新映射`AreaPincodeViewModel`。

```
Mapper.CreateMap<AreaPincode, AreaPincodeViewModel>()
... 
```

一旦这到位，AutoMapper 应该负责其余的工作。你甚至不需要这条线

```
.ForMember(s => s.AreaPincode, d => d.MapFrom(t => t.AreaPincode)); 
```

因为 AutoMapper 会自动计算出这个映射，因为属性名称是相等的。

# android - 异步任务安卓

> ID：15674908
> 
> 赞同：2
> 
> 时间：2013-03-28T05:33:59.193
> 
> 标签：android, android-asynctask

我有一个登录页面，我想从网络上的数据库中验证用户名和密码。问题是在执行 AsyncTask 时我想返回用户名和密码值。但这并没有发生。

如何返回值？这是我的登录页面代码。

```
public class Login extends Activity {
Integer aaa=0;
Button b,b2;
RelativeLayout r;
TextView t, t2;
String str1, str2, username, password;
String A = null, B = null;
EditText et1, et2;
Dialog myDialog;
String FILENAME = "http://animsinc.com/query.php";
protected ProgressDialog dialog;
protected Handler h;
static InputStream in = null;
static JSONObject jObj = null;
static String json = "";
private static final String TAG_ID = "id";

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.sign_in);

    Display display = ((WindowManager)getSystemService(Context.WINDOW_SERVICE))
            .getDefaultDisplay();
    int width = display.getWidth();
    int height = display.getHeight() / 4;
    r = (RelativeLayout) findViewById(R.id.RL);
    RelativeLayout.LayoutParams r = new RelativeLayout.LayoutParams(width,
            height);
    t = (TextView) findViewById(R.id.textView1);
    t2 = (TextView) findViewById(R.id.textView2);
    t.setOnClickListener(link);
    t2.setOnClickListener(fgtpass);

    et1 = (EditText) findViewById(R.id.editText1);
    et2 = (EditText) findViewById(R.id.editText2);

    b2 = (Button) findViewById(R.id.button2);
    b2.setOnClickListener(temp);

    b = (Button) findViewById(R.id.button1);
    b.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            if ((et1.getText().length() == 0)
                    || (et2.getText().length() == 0))

            {

                Toast.makeText(getApplicationContext(),
                "Please enter correct details",Toast.LENGTH_LONG)
                        .show();

            } else {

                dialog = ProgressDialog.show(Login.this, "Loading",
                        "Please Wait...");

            /*  h = new Handler() {

                    @Override
                    public void handleMessage(Message msg) {
                        super.handleMessage(msg);
                        dialog.dismiss();
                    }
                };

                new Thread() {

                    @Override
                    public void run() {
                        super.run();

                        String st=startDownload();

                        try {
                            Thread.sleep(3000);
                            h.sendEmptyMessage(0);
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }

                    }

                }.start();*/

     Toast.makeText(getApplicationContext(),""+st,Toast.LENGTH_LONG).show();
        String st=startDownload();
 Toast.makeText(getApplicationContext(),"aaa="+aaa, Toast.LENGTH_LONG).show();
 Toast.makeText(getApplicationContext(),""+st, Toast.LENGTH_LONG).show();
            }
if ((et1.getText().toString().equals(username))&&           (et2.getText().toString().equals(password)))
           {
    Intent openStartingPoint = new Intent(Login.this,
                        UserActivity.class);
                startActivity(openStartingPoint);
            }

        }

    });

}

private 
String startDownload() {
    String C = null;
    new AppTask().execute(FILENAME);
    aaa++;
    return C;
}

private View.OnClickListener temp = new View.OnClickListener() {
    public void onClick(View V) {
        Intent openStartingPoint = new Intent(Login.this,
                UserActivity.class);
        startActivity(openStartingPoint);
    }
};

private View.OnClickListener link = new View.OnClickListener() {
    public void onClick(View V) {
        Intent openStartingPoint = new Intent(Login.this,
                ContactDetails.class);
        startActivity(openStartingPoint);
    }
};

private View.OnClickListener fgtpass = new View.OnClickListener() {
    public void onClick(View V) {
        myDialog = new Dialog(Login.this);
        myDialog.setContentView(R.layout.emailpop);
        myDialog.setTitle("Forgot Password");
        myDialog.setCancelable(true);

        // for save
        Button ok = (Button) myDialog.findViewById(R.id.button1);
        ok.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {

                myDialog.dismiss();

            }
        });
        myDialog.show();
    }
};

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();

}

public class AppTask extends AsyncTask<String, Integer, String> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();

    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        // TODO Auto-generated method stub
        super.onProgressUpdate(values);
    }

    @Override
    protected String doInBackground(String... params) {
        String is = null;
        str1 = et1.getText().toString();
        str2 = et2.getText().toString();

        if (str1.length() > 0 && str2.length() > 0) {
            A = str1;
            B = str2;
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(
                    "http://animsinc.com/query.php");
            try {
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(
                        2);
        nameValuePairs.add(new BasicNameValuePair("username", str1));
        nameValuePairs.add(new BasicNameValuePair("password", str2));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                httpclient.execute(httppost);

        HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = EntityUtils.toString(entity);

                JSONArray jArray = new JSONArray(is);

                for (int i = 0; i < jArray.length(); i++) {

            JSONObject jObject = jArray.getJSONObject(i);

                    username = jObject.getString("username");
                    password = jObject.getString("password");
                    aaa++;
                }

            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
            } catch (UnsupportedEncodingException e) {
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        } 

        return username;
    }

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T05:47:06.250

当一个异步任务被执行时，任务会经过 4 个步骤：

1.  onPreExecute()，在任务执行之前在 UI 线程上调用。此步骤通常用于设置任务，例如通过在用户界面中显示进度条。

2.  doInBackground(Params...)，在 onPreExecute() 完成执行后立即在后台线程上调用。此步骤用于执行可能需要很长时间的后台计算。异步任务的参数传递到这一步。计算的结果必须由这一步返回，并将传递回最后一步。此步骤还可以使用 publishProgress(Progress...) 来发布一个或多个进度单位。这些值在 UI 线程上的 onProgressUpdate(Progress...) 步骤中发布。

3.  onProgressUpdate(Progress...)，在调用 publishProgress(Progress...) 后在 UI 线程上调用。执行的时间是不确定的。此方法用于在后台计算仍在执行时在用户界面中显示任何形式的进度。例如，它可用于动画进度条或在文本字段中显示日志。

4.  onPostExecute(Result)，**在后台计算完成后在 UI 线程上调用。后台计算的结果作为参数传递给这一步**。

所以在 doInBackground() 中返回值，在 onPostExecute() 中接收它并相应地更新 ui。

```
 @Override
  protected void onPostExecute(String result) {
  super.onPostExecute(result);
  Toast.makeTest(MainActivity.this,result,1000).show();  
  //set result to textview   

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:41:08.367

```
@Override
protected void onPostExecute(String result) {
    super.onPostExecute(result);

// result is the value you return from doInBackground     
String username = result;
} 
```

# zmodem - Using sz (ZMODEM protocol file transfer) non-interactively

> ID：15674909
> 
> 赞同：2
> 
> 时间：2013-03-28T05:34:01.960
> 
> 标签：zmodem

How to use sz command (send files using ZMODEM) non-interactively. I want run a script to transfer a file from unix server to winodws from fixed source directory to fixed destination directory. The sz manual page says

`With ZMODEM AutoDownload enabled, Professional-YAM and ZCOMM will automatically recieve the files after performing a security check.`

But I'm not getting how to use it.

# c# - 尝试没有捕获 WebException

> ID：15674914
> 
> 赞同：2
> 
> 时间：2013-03-28T05:34:21.187
> 
> 标签：c#, httpwebrequest, try-catch, system.net.webexception

我有以下功能将通过代理获取某个网站的 html 源代码，它工作正常，除非服务器返回 503（服务器不可用）或任何其他异常，它永远不会进入 catch 语句。

在 catch 语句中，该函数应该递归调用自身，最多 4 次，如果请求在 4 次尝试后仍然失败，则返回 null。

```
private static string GetPageHTML(string link,bool useprx)
            {
                int tryCount = 0;
                WebClient client = new WebClient() { Proxy = new WebProxy(ProxyManager.GetProxy()) { Credentials = new NetworkCredential("xx", "xx") } };

                try
                {
                return client.DownloadString(link);
                }
                catch (WebException ex)
                {
                    var statuscode = ((HttpWebResponse)ex.Response).StatusCode;
                    {

                        if (tryCount == 3)
                        {
                            return null;
                        }

                        switch (statuscode)
                        {
                            case (HttpStatusCode.Forbidden):
                                tryCount++;
                                System.Threading.Thread.Sleep(5000); 
                                return GetPageHTML(link, useprx); 

                            case (HttpStatusCode.NotFound): 
                                return null; 

                            case (HttpStatusCode.GatewayTimeout):
                                tryCount++;
                                System.Threading.Thread.Sleep(5000); 
                                return GetPageHTML(link, useprx); 

                            case (HttpStatusCode.ServiceUnavailable) :
                                 tryCount++;
                                System.Threading.Thread.Sleep(5000); 
                                return GetPageHTML(link, useprx);

                            default: return null;

                        }
                    }
                }
            } 
```

那么为什么它从不进入 catch 语句呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T05:38:04.347

它可能返回一个不是 WebException 类型的异常。要在阳光下捕获所有异常，您必须包含“catch Exception”作为后备

在 WebException 捕获之后添加回退捕获，并对其进行调试以查看它真正返回的异常类型

# asp.net - Cookie path being rewritten

> ID：15674916
> 
> 赞同：4
> 
> 时间：2013-03-28T05:34:24.813
> 
> 标签：asp.net, cookies, asp-classic

Does anyone know why when I run a classic asp site and asp.net MVC side by side, that when I create cookies in classic asp, then .net integrated pipeline, adds path="/" to the end of each of them, hence creating duplicates.

eg. If I create two cookies with a path of "/test" then when I run this classic asp page, 2 extra cookies get created with path="/".

The raw headers look like so.

```
test1=aaa; path=/test
test2=bbb; path=/test 
test1=aaa; path=/test; path=/ 
test2=bbb; path=/test; path=/ 
```

however I only ever created a test1 and test2 cookie with the path set to /test.

If turn off integrated pipeline, I only get the two cookies with the correct path. If any further info is need please let me know.

**Update:** It seems that when classic asp writes the cookie, it puts everything into the value including the path, so when .NET reads the cookies it puts the whole lot into the value and then sets the path as '/' as the default. This seems to only be a problem when you access the cookies in the same request they were written. If you don't inspect the Response.Cookies or Request.Cookies this doesn't seem to happen. I believe this to be a bug, however I'm not sure what with.

**Update2:** I am setting the cookies like this in Classic Asp:

`Response.AddHeader("Set-Cookie", "test1=aaa; path=/test; HttpOnly;");`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T16:08:39.270

Are you sure that's your exact code, as classic ASP does not require the brackets or the semi-colon at the end, I'm wondering if you have On Error Resume Next set, which would skip over the line and be throwing you a herring of the red variety; you could give this a try:

```
Response.AddHeader "Set-Cookie", "test1=aaa; path=/test; HttpOnly" 
```

Just a thought, classic asp is an unusual creature sometimes.

Or do you need a trailing slash? ( i haven't access to a dev environment to test right now

```
Response.AddHeader "Set-Cookie", "test1=aaa; path=/test/; HttpOnly" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T16:41:32.463

你有没有尝试过：

```
Response.AddHeader("Set-Cookie", "test1=aaa; path=\"/test\"; HttpOnly;"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T08:34:45.343

只是一个疯狂的猜测，但也许空格是一个问题。您是否尝试使用正常的`Response.Cookies`基础架构[（请参阅 msdn）](http://msdn.microsoft.com/en-us/library/ms524757%28v=vs.90%29.aspx)？

```
Response.Cookies("Type") = "Chocolate Chip" 
Response.Cookies("Type").Expires = "July 31, 2001" 
Response.Cookies("Type").Path = "/" 
```

如果您必须启用 HttpOnly 选项，那么启用 HttpOnly 选项将是一个问题（请参阅[为 Classic Asp 会话 Cookie 设置 HTTPONLY](https://stackoverflow.com/questions/2990686/setting-httponly-for-classic-asp-session-cookie)）。

# c# - 是否可以将委托传递给控制器 操作？

> ID：15674927
> 
> 赞同：1
> 
> 时间：2013-03-28T05:35:11.080
> 
> 标签：c#, asp.net-mvc, linq, delegates, controller

我想将自定义过滤器传递给控制器​​中的操作方法。我试着这样定义它。

```
public ActionResult GetResult(Func<Fault,bool> filter)
{
    List<Fault> faultList;
    using (var _context = new myDB())
    {
        faultList = 
            from f in _context.Faults
            where filter(f)
            select f;
    }
    return Json(faultList);
} 
```

但是当我运行操作时出现错误

> 没有为此对象定义无参数构造函数。
> 
> 在 System.RuntimeTypeHandle.CreateInstance（RuntimeType 类型，Boolean publicOnly，Boolean noCheck，Boolean& canBeCached，RuntimeMethodHandleInternal& ctor，Boolean& bNeedSecurityCheck）在 System.RuntimeType.CreateInstanceSlow（Boolean publicOnly，Boolean skipCheckThis，Boolean fillCache，StackCrawlMark 和 stackMark）在 System.RuntimeType.CreateInstanceDefaultCtor (Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark & stackMark) at System.Activator.CreateInstance(Type type, Boolean nonPublic) at System.Activator.CreateInstance(Type type) at System.Web.Mvc.DefaultModelBinder.CreateModel(ControllerContext controllerContext, ModelBindingContext bindingContext，类型 modelType) 在 System.Web.Mvc.DefaultModelBinder.BindComplexModel(ControllerContext controllerContext，ModelBindingContext bindingContext) 在 System.Web.Mvc.DefaultModelBinder.BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext) 在 System.Web.Mvc.ControllerActionInvoker.GetParameterValue(ControllerContext controllerContext, ParameterDescriptor parameterDescriptor) 在 System.Web.Mvc.ControllerActionInvoker.GetParameterValues(ControllerContext controllerContext , ActionDescriptor actionDescriptor) 在 System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) 在 System.Web.Mvc.Controller.ExecuteCore() 在 System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) 在系统。 Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) 在 System.Web.Mvc.MvcHandler.<>c_BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext) 在 System.Web.Mvc.ControllerActionInvoker.GetParameterValue(ControllerContext controllerContext, ParameterDescriptor parameterDescriptor) 在 System.Web.Mvc.ControllerActionInvoker.GetParameterValues(ControllerContext controllerContext, ActionDescriptor actionDescriptor) 在 System.Web.Mvc.ControllerActionInvoker .InvokeAction(ControllerContext controllerContext, String actionName) 在 System.Web.Mvc.Controller.ExecuteCore() 在 System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) 在 System.Web.Mvc.ControllerBase.System.Web.Mvc。 IController.Execute(RequestContext requestContext) 在 System.Web.Mvc.MvcHandler.<>c_BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext) 在 System.Web.Mvc.ControllerActionInvoker.GetParameterValue(ControllerContext controllerContext, ParameterDescriptor parameterDescriptor) 在 System.Web.Mvc.ControllerActionInvoker.GetParameterValues(ControllerContext controllerContext, ActionDescriptor actionDescriptor) 在 System.Web.Mvc.ControllerActionInvoker .InvokeAction(ControllerContext controllerContext, String actionName) 在 System.Web.Mvc.Controller.ExecuteCore() 在 System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) 在 System.Web.Mvc.ControllerBase.System.Web.Mvc。 IController.Execute(RequestContext requestContext) 在 System.Web.Mvc.MvcHandler.<>c_GetParameterValue(ControllerContext controllerContext, ParameterDescriptor parameterDescriptor) 在 System.Web.Mvc.ControllerActionInvoker.GetParameterValues(ControllerContext controllerContext, ActionDescriptor actionDescriptor) 在 System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) 在 System.Web.Mvc.Controller .ExecuteCore() 在 System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) 在 System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) 在 System.Web.Mvc.MvcHandler。< >c_GetParameterValue(ControllerContext controllerContext, ParameterDescriptor parameterDescriptor) 在 System.Web.Mvc.ControllerActionInvoker.GetParameterValues(ControllerContext controllerContext, ActionDescriptor actionDescriptor) 在 System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) 在 System.Web.Mvc.Controller .ExecuteCore() 在 System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) 在 System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) 在 System.Web.Mvc.MvcHandler。< >c_InvokeAction(ControllerContext controllerContext, String actionName) 在 System.Web.Mvc.Controller.ExecuteCore() 在 System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) 在 System.Web.Mvc.ControllerBase.System.Web.Mvc.IController .Execute(RequestContext requestContext) 在 System.Web.Mvc.MvcHandler.<>c_InvokeAction(ControllerContext controllerContext, String actionName) 在 System.Web.Mvc.Controller.ExecuteCore() 在 System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) 在 System.Web.Mvc.ControllerBase.System.Web.Mvc.IController .Execute(RequestContext requestContext) 在 System.Web.Mvc.MvcHandler.<>c_*DisplayClass6.<>c* _DisplayClassb.b_ *5() 在 System.Web.Mvc.Async.AsyncResultWrapper.<>c* _DisplayClass1.b_ *0() 在 System.Web.Mvc.Async.AsyncResultWrapper.<>c* _DisplayClass8 `1.b__7(IAsyncResult _) at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End( ) 在 System.Web.Mvc.MvcHandler.<>c_DisplayClasse.b *_d* () 在 System.Web.Mvc.SecurityUtil.b__0(Action f) 在 System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) 在 System。 Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) 在 System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult 结果) 在 System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute( ) 在 System.Web.HttpApplication.ExecuteStep(IExecutionStep 步骤，Boolean& completedSynchronously)

是否有可能做这样的事情？

如果不是通过代表，你能建议另一种方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T00:23:12.567

据我了解您的问题，我会说这是不可能的。

Controller 中的 ASP NET MVC Action 方法是一种针对映射 http 请求（url 路由）的入口点，其中 Action 方法在收到 http 请求后被触发。因此，该方法的输入参数实际上是将 http 请求中的 Post 或 Get 参数反序列化（或映射）到强类型对象的结果。当 MVC 框架创建对象时，它会寻找无参数构造函数。它涉及引用类型的数据容器。

另一件事是通过 http 请求发送功能（逻辑）并将其映射到 NET 委托。由于 NET 是编译框架而不是解释器，因此无法将 NET 代码作为文本发送（例如 C# 代码）并将其映射到委托（例如，我们可以从 Action 方法返回 javascript 代码）。

最后一件事，即使可以在运行时编译 NET 代码（有一些方法），将 NET 代码注入 Action 方法的可能性也会导致安全问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:13:41.717

我不知道是否可以将委托传递给 Action，但我有一个替代方案的建议。您可以将参数传递给操作，并`filter`根据该值将适当的函数分配给委托。

这是一个示例控制台应用程序来说明我的想法：

```
public enum Cases { Case1, Case2, Case3 };

class Program
{
    private static bool Test1(int test) { return test == 1; }

    private static bool Test2(int test) { return test == 2; }

    private static bool Test3(int test) { return test == 3; }

    public static void Main()
    {
        RunTest(Cases.Case1);
        RunTest(Cases.Case2);
        RunTest(Cases.Case3);

        Console.ReadLine();
    }

    private static void RunTest(Cases testCase)
    {
        var list = new List<int> {1, 2, 3};
        Func<int, bool> del;

        switch (testCase)
        {
            case Cases.Case1:
                del = Test1;
                break;
            case Cases.Case2:
                del = Test2;
                break;
            case Cases.Case3:
                del = Test3;
                break;
            default:
                throw new InvalidDataException();
        }

        list.ForEach( i => Console.WriteLine(del(i) ? i.ToString() : "--")  );
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T10:05:28.180

绝对有可能通过委托。假设您有一个如下所示的命令类

```
public class MyCommand<T>{

Action myAction;
Func<T, bool> canExecute;

public MyCommand(Action<T> actionToBeExecuted, Func<T, bool> canExecute)
{
this.myAction = actionToBeExecuted;
this.canExecute = canExecute;
}

public void ExecuteMyCommand<T>(T param)
{
if(this.canExecute(param))
   this.myAction(param);
}
} 
```

我相信上面的代码给了你一个例子，你可以沿着这个方向前进。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-21T14:31:01.730

虽然您尝试做的事情并非绝对可行，但有一些方法可以做类似的事情。

我不是在 HTTP 请求中从用户那里传递 Func，而是在我的代码中使用 Func 作为接缝来进行测试和其他目的。我遇到了同样的问题，但通过重载具有不同参数的方法来解决它。

这是我所拥有的：

```
public class SomeController : Controller
{
    [HttpGet]
    public ActionResult SomeAction(string q, Func<string, SomeResultType> fn = null) 
    {
        fn = fn ?? SomeDefaultFn;
        ...

        return View(...);
    }
} 
```

正如@Bronek 在他的回答中所说的那样，这不起作用。但是，因为无论如何我都想提供一个默认值，所以重载我的方法签名只是一件简单的事情。

```
public class SomeController : Controller
{
   [HttpGet]
   public Action SomeAction(string q)
   {
       // mvc will execute this action and pass
       // my default off to the next method
       return SomeAction(q, SomeDefaultFn);
   }

   public ActionResult SomeAction(string q, Func<string, SomeResultType> fn)
   {
        ...
        return View(...);
   }
} 
```

在另一个地方，我有以下内容：

```
public class SomeController : Controller
{ 
    [HttpGet]
    public ActionResult SomeAction(string q, string filterType)
    {
        return SomeAction(q, FilterFactory.Build(filterType));
    }

    ...
} 
```

# quartz-scheduler - 播放框架的石英配置

> ID：15674928
> 
> 赞同：1
> 
> 时间：2013-03-28T05:35:16.160
> 
> 标签：quartz-scheduler, playframework-2.1

我目前在播放框架中遇到石英 JDBC 作业存储的问题。Quartz 读取它自己的属性文件（我假设是通过通用配置接口）。问题是我不确定如何在游戏框架中启用这种交互。

我想这个问题也适用于使用配置文件的所有其他第三方库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:58:47.177

解决方案只是将quartz.properties 文件添加到conf 文件夹中...quartz 将读取该文件以进行所有配置

# python - Django：测试管理员用户

> ID：15674931
> 
> 赞同：3
> 
> 时间：2013-03-28T05:35:29.360
> 
> 标签：python, django, unit-testing

我需要在 django 应用程序中测试我的一个视图，该应用程序需要`admin user`具有某些权限

如何创建 a`test user` 并设置它的一些权限，例如`staff status`or `group permissions`？

我可以使用工厂这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T09:17:36.013

要创建裸超级用户，请执行`python manage.py createsuperuser` [https://docs.djangoproject.com/en/dev/ref/django-admin/#createsuperuser](https://docs.djangoproject.com/en/dev/ref/django-admin/#createsuperuser)

要最初设置权限，请创建自定义 django-admin 命令 `app_name/commands/management/create_test_user.py`

```
from django.contrib.auth.models import User, Group, Permission
from django.core.management.base import BaseCommand

class Command( BaseCommand ):

    help = "Creates test user"
    args = '<username> <password>'

    def handle( self, username, password ):

        user, created = User.objects.get_or_create( username=username ) 
        user.set_password( password )
        user.is_staff = True
        user.save()

        custom_perm = Permission.objects.get( codename='custom_perm_name' )
        user.user_permissions.add( custom_perm )

        if created:
            print "%s created" % username
        else:
            print "%s updated" % username 
```

进而：

```
python manage.py create_test_user admin1 qwe123 
```

# web-services - 重写规则或任何其他错误

> ID：15674936
> 
> 赞同：1
> 
> 时间：2013-03-28T05:35:44.220
> 
> 标签：web-services, apache, mod-rewrite, passbook

我创建了一个通行证。当我将它添加到设备时，我需要将它注册到我的服务器。我将 .htaccess 与代码一起使用：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?url=$1 [L,QSA] 
```

我把这个文件放在`https://"myIP"/passesWebserver/`pass.json 中，我添加： `"webServiceURL" : "https://"myIP"/passesWebserver/"`

我不知道我对 .htaccess 文件有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:57:21.577

将以下内容`.htaccess`放在您的 passWebserver 文件夹中。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule ^(.*)$ passesWebserver/index.php [L] 
```

* * *

**更新**

要测试它是否正常工作，请创建一个简单的 index.php 文件，其中包含

```
<?php
$request = explode("/", substr(@$_SERVER['REQUEST_URI'], 1));
echo '<pre>' . print_r($request, true) . '</pre>'; 
```

然后，当您访问时，`http://"myIP"/passesWebserver/v1/devices/xxx/registrations/pass.abc.def.ghi/yyy`您应该会看到：

```
Array
(
    [0] => passesWebserver
    [1] => v1
    [2] => devices
    [3] => xxx
    [4] => registrations
    [5] => pass.abc.def.ghi
    [6] => yyy
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T08:43:24.750

这对我有用：
`RewriteEngine On RewriteRule ^(.+)/devices/(.+)/registrations/(.+)$ index.php?request=$1/devices/$2/registrations/$3 [L] RewriteRule ^(.+)/passes/(.+)$ index.php?request=$1/passes/$2[L] RewriteRule ^(.+)/log$ index.php?request=$1/log [L]`

# php - 使四舍五入的值相加到所需的产品

> ID：15674941
> 
> 赞同：1
> 
> 时间：2013-03-28T05:36:09.337
> 
> 标签：php, arrays

这是一个需要思考的编程问题，并且可以真正应用于任何编程语言。

假设您有数组：

```
$arr=array(10,7,4,4,3,2,1,1,1,1,1,1); 
```

这个数组是动态的，可以是任何一组数字。

你也有一个乘数，比方说`0.6`。

目标是逐个显示每个数字，使它们相加尽可能接近总乘数。在这种情况下，数字加到 36，*0.6 得到 21.6

这是问题所在：

1.  您必须对每个值进行四舍五入（仅限整数），因此您的真正目标是使数字加起来尽可能接近 22。
2.  您不能使用任何函数来求解数组的总和。您只能循环一次。

最基本的尝试是

```
$multiplier = 0.6;
$sum=0;
foreach($arr AS $value){
$sum+=round($multiplier * $value);
} 
```

但这不起作用，因为 1*0.6 总是四舍五入为 1。

我认为这样的事情是可能的：

```
$multiplier = 0.6;
$sum=0;
foreach($arr AS $value){
$real=$multiplier * $value;
$rounded=round($multiplier * $value);
$sum_rounded += $rounded;
$sum_real += $real;
//Somehow compare the two sums and break the foreach 
} 
```

我不知道从这里去哪里。你们有什么感想？

试过这个：

```
$sum_real=0;
$sum_round=0;
$count=0;

foreach($rows AS $arr){
    $count+=1;
    $real_val=$arr*$multiplier;

    $sum_round+=round($real_val);
    $sum_real+=$real_val;
    $avg_round=$sum_round/$count;
    $avg_real = $sum_real/$count;

    $val = ($avg_round>$avg_real) ? floor($real_val) : round($real_val);
} 
```

但是没有用......我认为它已经接近了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:45:50.160

我想我可以说服你循环两次。

```
$arr = array(10,7,4,4,3,2,1,1,1,1,1,1);
$out = [];
$multiplier = 0.6;

$sum = round(array_sum($arr) * $multiplier); // that's a loop!

foreach ($arr as $value) {
    $value = round($multiplier * $value);
    array_push($out, $value);
    $sum -= $value;
}

while ($sum > 0) {
    $sum --;
    $out[$sum] --;
}

while ($sum < 0) {
    $sum ++;
    $out[-$sum] ++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:54:18.620

这是一个 1-pass 方法：

```
$orig_sum = 0;
$rounded_sum = 0;
$new_arr = array();
for ($i = 0; $i < count($arr)-1; $i++) {
  $orig_sum += $arr[$i];
  $new_elt = round($arr[$i] * $multiplier);
  $rounded_sum += $new_elt;
  $new_arr[] = $new_elt;
}
$orig_sum += $arr[$i];
$expected_rounded_sum = round($orig_sum * $multiplier);
$new_arr[] = $expected_rounded_sum - $rounded_sum; 
```

[密码键盘](http://codepad.org/71ZmKS7K)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T05:55:13.687

在循环的每次迭代开始时计算两者的`$sum_rounded`平均值。如果平均值较大，请使用而不是。`$sum_real``foreach``$sum_rounded``floor()``round()`

**编辑：**您实际上根本不需要计算平均值，因为这些数字都将除以相同的数字，并且不会影响哪个更大。此外，将`$value`即将增加的值添加到比较中。

```
foreach($arr AS $value){
  $real=$multiplier * $value;
  $rounded=round($multiplier * $value);
  if($sum_rounded + $rounded > $sum_real + $real) {
    $sum_rounded += floor($multiplier * $value);
  }
  else {
    $sum_rounded += $rounded;
  }
  $sum_real += $real;
} 
```

# html - 图像压缩减速器

> ID：15674945
> 
> 赞同：-1
> 
> 时间：2013-03-28T05:36:51.137
> 
> 标签：html, compression, photoshop

我正在尝试在我的网站上提供高质量的图像，例如[http://www.viewbug.com/](http://www.viewbug.com/)滑块中的这些图像，但是当我拥有图片的实际图像时，由于尺寸太大，它加载速度不够快。我试图用 Photoshop 重新调整它的大小，但我的照片质量会下降很多。因此，例如，本网站[http://www.viewbug.com/media/featured/2892642_large.jpg](http://www.viewbug.com/media/featured/2892642_large.jpg)上的以下图片质量很高，但大小为 377 kb，然后他们使用 html 代码高度 = 900 和宽度 = 640 而不会影响配给尺寸，它在滑块内看起来还不错。我用谷歌搜索，我没有找到任何执行此操作的 javascript 或 html 代码。如何在不损失质量的情况下压缩图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:30:16.233

我是一名摄影师，所以我经常这样做。我使用眼睛看不见的压缩设置导出图像，但减少的图像远小于原始图像。不幸的是，Photoshop 使用的压缩比例与大多数 JPEG 程序不同（JPEG 是 Internet 上唯一有效且兼容的照片格式），因此对于 Photoshop，需要使用特定的说明。

试试这个教程：

[http://inobscuro.com/tutorials/optimizing-images-for-web-35/](http://inobscuro.com/tutorials/optimizing-images-for-web-35/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T06:03:42.073

因此，通过使用 punypng，您可以获得 dat 的解决方案。PunyPNG 是一款免费的网站优化工具，可显着减小图像的文件大小而不会降低质量。

# netstream - NetStream 错误回调，点对点

> ID：15674948
> 
> 赞同：1
> 
> 时间：2013-03-28T05:37:24.283
> 
> 标签：netstream, adobe-cirrus, stratus

我很新，我知道这个地方真的很严格，而且是为了论坛的好......

所以如果我的问题不合适，请原谅..

我有一个使用 node.js 的聊天应用程序，用户向合作伙伴请求 cam，这将使用他的 cam 创建一个 flash 对象并将他的 stratus id 发送给合作伙伴.. 到目前为止一切都很好，但是当发起请求的用户是 no在合作伙伴单击请求的发起者stratusid 的链接之前已连接更长的时间...

发起者不再传输他的 cam，因此 stratus id 不再有效..

但是接收者无论如何都会点击启动他的摄像头，但没有发起请求的合作伙伴..

```
receiveStream = new NetStream(netConnection,  hisStratusID); 
```

由于 hisStratusID 不再是有效的广播 ID，我认为 NetStream 会返回一个错误代码..但不，它没有..

此外，我尝试查看是否可以使用此函数捕获错误，以查看 Net_STATUS 会带来什么，但它没有触发......

```
receiveStream.addEventListener(NetStatusEvent.NET_STATUS, receiveHandler);

private function receiveHandler(event:NetStatusEvent):void  {
Alert.show(event.info.code);
} 
```

我正在学习，所以一定有什么我做错了..

问候并感谢您的帮助

# c++ - C++ 在该类的函数中使用该类的对象

> ID：15674950
> 
> 赞同：3
> 
> 时间：2013-03-28T05:37:30.393
> 
> 标签：c++, oop, class, constructor

假设我有一个看起来像这样的头文件：

```
# filename: header.h
class myclass
{
 public:
    int myVariable; # arbitrary member variable
    foo(); # arbitrary function
    myclass() # default constructor
} 
```

现在假设我想在一些 .cpp 文件中实现我的构造函数 [ myclass() ]：我可以做一些事情，比如创建一个数组，对象，整数，任何东西 - 只是一些数组。然后我可以遍历该数组并**从我的构造函数定义中将其全部填充吗？**

我问的原因是因为我希望我的任意成员函数 foo() 能够更改这个数组。这导致了问题 - 我是否将 myclass 的对象传递给 foo [ foo(myclass myclassObject) ？

或者我是否将这个对象的数组传递给 foo() ？

对此的任何澄清将不胜感激。我试图使示例尽可能不针对特定情况，但仍然足以让每个人都理解问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:46:09.920

您的构造函数确实可以创建一个数组 - 问题是构造函数返回后该数组会发生什么。

*   一种合理的方法是将其保存在堆上 - 即创建数组`new[]`- 但这意味着您需要保留指向数组的指针以便之后访问它。最简单的方法是将指针对象添加到您的类成员数据。 `foo()`然后可以使用该指针访问数组。不幸的是，您必须使用自定义复制构造函数、赋值运算符和析构函数（谷歌三法则）或智能指针来确保正确复制或共享和销毁数组。

*   您的问题对我来说意味着您不只是想要一个数组数据成员，这当然是最简单的解决方案。这样做的缺点是必须在编译时选择数组大小，而基于堆的数组可以在运行时调整大小。

*   如果您在堆栈上创建它，那么它将离开作用域并且之后无法访问（任何尝试通过在作用域内设置的指针或引用访问它都会导致未定义的行为）。

*   构造函数也可以在静态数组中填充数据，但显然数组的生命周期独立于类的任何单个对象实例。您已经谈到了创建数组的构造函数，所以大概不想这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T05:46:36.873

是的，您可以在构造函数中创建和“填充”一个数组，以便`foo`. 事实上，这就是构造函数的目的（为你设置一切）。

请注意，如果您希望`foo()`能够使用数组，则必须使数组成为类定义的一部分。

**我的班级.h**

```
class myclass {
    private:
        int* arr; // declared on the "heap"
    public:
        foo();
        myclass(int arraySize);
}; 
```

**我的类.cpp**

```
#include "myclass.h"
#include <stdio>

myclass::myclass(int arraySize) :arr(new int[arraySize]) {}

myclass::foo() {
    // prints the elements of the array we declared earlier
    for (int i = 0; i < 5; i++) {
        std::cout << arr[i] << std::endl;
    }
} 
```

# ios - 使用 CCCrypt 加密/解密文件

> ID：15674954
> 
> 赞同：1
> 
> 时间：2013-03-28T05:37:48.400
> 
> 标签：ios, encryption

我不知道为什么原始的mp3Data大小是4750347字节，而decryptData大小是4750344字节TripleDES方法中是否有任何实现错误？
感谢您的回复。

```
- (void) testTripleDESMp3
{
    NSString * mp3Path = [[self libraryPath]stringByAppendingPathComponent:@"A.mp3"];
    NSData *mp3Data = [[NSData alloc] initWithContentsOfFile:mp3Path] ;//4750347
    NSData *encryptData = [self TripleDES:mp3Data encryptOrDecrypt:kCCEncrypt key:@"12345"];//bufferPtrSize 4750352, plainTextBufferSize:4750347, movedBytes:47503520 ,NSData 6333804
    NSData *decryptData = [self TripleDES:encryptData encryptOrDecrypt:kCCDecrypt key:@"12345"];//bufferPtrSize 4750360, plainTextBufferSize:4750352, movedBytes:4750344,NSData 4750344
    //mp3Data 4750347 -> encryptData 6333804-> decryptData 4750344

    NSError* error;
    NSString * mp3Path2 = [[self libraryPath]stringByAppendingPathComponent:@"B.mp3"];
    [decryptData writeToFile:mp3Path2 options:NSDataWritingAtomic error:&error];

}

- (NSData*)TripleDES:(NSData*)plainData encryptOrDecrypt:(CCOperation)encryptOrDecrypt key:(NSString*)key {

    const void *vplainText;
    size_t plainTextBufferSize;

    if (encryptOrDecrypt == kCCDecrypt)
    {
        NSData *EncryptData = [GTMBase64 decodeData:plainData];
        plainTextBufferSize = [EncryptData length];
        vplainText = [EncryptData bytes];
    }
    else
    {
        plainTextBufferSize = [plainData length];
        vplainText = (const void *)[plainData bytes];
    }

    CCCryptorStatus ccStatus;

    //I am not sure use char*/void*/uint8_t
    uint8_t *bufferPtr = NULL;

    size_t bufferPtrSize = 0;
    size_t movedBytes = 0;

    bufferPtrSize = (plainTextBufferSize + kCCBlockSize3DES) & ~(kCCBlockSize3DES - 1);

    bufferPtr = static_cast<uint8_t *>(malloc( bufferPtrSize * sizeof(uint8_t)));
    //bufferPtr = (char *)malloc( bufferPtrSize * sizeof(char));

    memset((void *)bufferPtr, 0x0, bufferPtrSize);
    // memset((void *) iv, 0x0, (size_t) sizeof(iv));

    NSString *initVec = @"init Vec";
    const void *vkey = (const void *) [key UTF8String];
    const void *vinitVec = (const void *) [initVec UTF8String];

    ccStatus = CCCrypt(encryptOrDecrypt,
                       kCCAlgorithm3DES,
                       kCCOptionPKCS7Padding,//kCCOptionECBMode,
                       vkey, 
                       kCCKeySize3DES,
                       vinitVec, //"init Vec", //iv,
                       vplainText, //"Your Name", //plainText,
                       plainTextBufferSize,
                       (void *)bufferPtr,
                       bufferPtrSize,
                       &movedBytes);
    if (ccStatus == kCCSuccess) NSLog(@"SUCCESS");
    else if (ccStatus == kCCParamError) NSLog( @"PARAM ERROR");
    else if (ccStatus == kCCBufferTooSmall) NSLog( @"BUFFER TOO SMALL");
    else if (ccStatus == kCCMemoryFailure) NSLog( @"MEMORY FAILURE");
    else if (ccStatus == kCCAlignmentError) NSLog( @"ALIGNMENT");
    else if (ccStatus == kCCDecodeError) NSLog( @"DECODE ERROR");
    else if (ccStatus == kCCUnimplemented) NSLog( @"UNIMPLEMENTED");

    NSData *result;

    if (encryptOrDecrypt == kCCDecrypt)
    {
        result = [NSData dataWithBytes:(const void *)bufferPtr length:(NSUInteger)movedBytes];
    }
    else
    {
        NSData *myData = [NSData dataWithBytes:(const void *)bufferPtr length:(NSUInteger)movedBytes];
        result = [GTMBase64 encodeData:myData];
    }
    //bufferPtrSize 1931240, plainTextBufferSize:1931232, movedBytes:1931232
    NSLog(@"bufferPtrSize %d, plainTextBufferSize:%d, movedBytes:%d", (int)bufferPtrSize,(int)plainTextBufferSize, (int)movedBytes);//
    return result;
} 
```

# javascript - NodeJS 的 AJAX 助手，而不是 jQuery？

> ID：15674958
> 
> 赞同：4
> 
> 时间：2013-03-28T05:38:04.373
> 
> 标签：javascript, jquery, ajax, node.js

我只想`$.get/post`在服务器端脚本上做一些事情。有没有更好的方法而不是包括整个 jQuery？我也不喜欢手动使用凌乱的get xml http请求东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T05:55:27.823

node.js 中的 jquery.ajax 等价于[request](https://github.com/mikeal/request)

它位于节点核心 http 之上，使事情变得更好用。允许回调和流式请求。

例子：

```
var request = require('request');
request('http://www.google.com', function (error, response, body) {
  if (!error && response.statusCode == 200) {
    console.log(body) // Print the google web page.
  }
})

request.get('http://google.com/img.png').pipe(request.put('http://mysite.com/img.png')) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T05:43:50.610

需要[http](http://nodejs.org/api/http.html#http_http_request_options_callback)。如他们的文档中所述，您可以提出如下请求：

```
var options = {
  hostname: 'www.google.com',
  port: 80,
  path: '/upload',
  method: 'POST'
};

var req = http.request(options, function(res) {
  console.log('STATUS: ' + res.statusCode);
  console.log('HEADERS: ' + JSON.stringify(res.headers));
  res.setEncoding('utf8');
  res.on('data', function (chunk) {
    console.log('BODY: ' + chunk);
  });
});

req.on('error', function(e) {
  console.log('problem with request: ' + e.message);
});

// write data to request body
req.write('data\n');
req.write('data\n');
req.end(); 
```

还有一个简单的[GET](http://nodejs.org/api/http.html#http_http_get_options_callback)：

```
http.get("http://www.google.com/index.html", function(res) {
  console.log("Got response: " + res.statusCode);
}).on('error', function(e) {
  console.log("Got error: " + e.message);
}); 
```

您还可以查看[Express.js](http://expressjs.com/)和[request](https://github.com/mikeal/request)，除了 jquery 之外，您还可以使用许多选项。

# javascript - 使用 for 循环和 if 语句检查带有数字的 id 名称

> ID：15674959
> 
> 赞同：0
> 
> 时间：2013-03-28T05:38:09.530
> 
> 标签：javascript, jquery, if-statement, for-loop

```
 for (var i = 1; i < 81; i++){
            if($(this).hasClass('member-'+i)){
                ('promote'+i) = true;
            }
        } 
```

我有 80 个可丢弃的盒子。它们每个都有一个名为 member-1、member-2 等的 id，当有人将一个项目拖入盒子时，该变量将变为 true 并传递给另一个函数。

到目前为止，我发现这不起作用。我不确定为什么。它位于可放置的放置函数中。

因为我有 80 个盒子……我不想手动输入它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:44:10.287

制作`promote`一个数组，而不是 80 个不同的变量。然后你可以这样做：

```
 var promote = [];
   for (var i = 1; i < 81; i++){
        if($(this).hasClass('member-'+i)){
            promote[i] = true;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:08:09.980

更好的是只查看确实存在哪些类，而不是测试 81 个不同的类：

```
var matches, promotes = [], cls = this.className;
var regex = /member-(\d+)/g;
while (matches = regex.exec(cls)) {
    // matches[1] contains the number from the member-xx class name
    promotes.push(parseInt(matches[1], 10));
}
// promotes is an array that contain a list of the member-xx numbers that exist
// on this object 
```

# java - 迭代时从 ArrayList 中删除奇数元素

> ID：15674960
> 
> 赞同：4
> 
> 时间：2013-03-28T05:38:12.157
> 
> 标签：java

我有一个字符串的 ArrayList，我正在尝试删除 ArrayList 的奇数元素，即 list.remove(1)、list.remove(3)、list.remove(5) 等。

这是我尝试使用的代码，它会引发 IllegalStateException 错误：

```
int i = 0;
    for (Iterator<String> it = words.iterator(); it.hasNext(); )
    {
        if (i % 2 != 0 && it.hasNext())
        {
            it.remove();
        }
        i++;
    } 
```

有没有更好的（工作）方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T05:49:15.257

```
int i = 0;
    for (Iterator<String> it = words.iterator(); it.hasNext(); )
    {
        it.next(); // Add this line in your code
        if (i % 2 != 0)
        {
            it.remove();
        }
        i++;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T05:44:57.057

您可以尝试这样的方法来删除从`words[1]`. 无需检查索引是否为奇数，当我们删除一个元素时，我们只需递增`i`，这将是下一个奇数。

```
int i = 1;

while (i < words.size()) {
    words.remove(i++);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T05:45:29.977

您需要克隆此数组或将该奇数元素复制到另一个数组中。在迭代期间，它使用了相同的对象，因此如果您删除它的索引并且状态会发生变化。

```
int i = 0;
    List<String> list = new ArrayList<String>();
    List<String> words = new ArrayList<String>();
    for (String word:words)
    {
        if (i % 2 != 0)
        {

            //it.remove();
            list.add(word);
        }

        i++;
    }
    words.removeAll(list); 
```

现在只需将此列表传递给您的单词列表对象即可将其全部删除

```
words.removeAll(list); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T05:48:07.417

我不会使用迭代器，因为您不需要检查元素。只需使用[`List.remove(index)`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#remove%28int%29)：

```
for (int i = words.size() - 1; i >=0; i--) {
    if (i % 2 == 1) {
        words.remove(i);
    {
} 
```

请注意，您必须倒计时，而不是使用这种方法倒计时，因为删除一个元素会将 e 之后的所有内容移到左侧

如果您的列表是不可变的（解释了异常），请先复制一份：

```
words = new ArrayList(words); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T05:48:17.760

就用这个。

```
for (int i = 1; i < list.size(); i++) {
    list.remove(i);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T05:48:25.150

以下也可以正常工作

```
public static void main(String[] args) {
        ArrayList<Integer> list = new ArrayList<Integer>(Arrays.asList(1, 2, 3,
                4, 5, 6, 7, 8, 9));

        for (int i = 0; i < list.size(); i++) {
            System.out.println(i);
            list.remove(i);
        }
        System.out.println(list);
    } 
```

屈服

```
[2, 4, 6, 8] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-28T05:48:48.200

您需要使用 next() 然后调用 remove() ---

```
 int counter = 0;
    for (final Iterator<String> iterator = list.iterator(); iterator.hasNext();) {
        iterator.next();
        if (++counter % 2 != 0) {
            iterator.remove();
        }
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-10-11T22:18:07.337

```
public static List<Integer> removeImpairElements(List<Integer> integers){
int j = 0; 
for(int i = 0 ; i < integers.size(); i++){
  if( i % 2 == 0){
    integers.set(j, integers.get(i));
    j++;
  }
}
int half = integers.size()%2==0 ? integers.size()/2 : integers.size()/2 + 1;  
integers.subList(half , integers.size()).clear();
return integers; 
```

}

# database - 二进制矩阵 SQL

> ID：15674964
> 
> 赞同：1
> 
> 时间：2013-03-28T05:38:42.893
> 
> 标签：database, matrix, binary

我想将二进制矩阵存储到数据库中。

矩阵示例：

```
0 1 0 0 1 1 0 1
0 1 0 0 0 1 0 0
0 1 1 0 0 1 1 1
0 1 0 0 1 1 0 0
0 1 0 0 0 1 0 0
0 1 1 0 0 1 0 0
0 1 0 1 0 0 0 0
0 1 0 0 1 1 1 0 
```

最好的方法是什么？

OBS：我不太了解 db。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:49:29.620

或者如果您知道任何行和列中的位数，您可以将其保存为一位十进制（11135377233198751900）或十六进制（9A88CE9888C8A09C）数字

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:34:08.900

您可以将其存储为 varchar(n^2)。如果您不需要在数据库中处理它，您还可以将每一行作为其值存储在矩阵中 - 例如，您的第一行将是 77。

# php - 插件无法在实时站点上运行

> ID：15674965
> 
> 赞同：1
> 
> 时间：2013-03-28T05:38:59.893
> 
> 标签：php, wordpress

我正在为我的滑块使用 Estro WordPress 插件。当我让网站上线时，它会在我网站的每个页面中显示这条消息：

> “404 Not Found
> 在此服务器上找不到请求的资源！
> 由 Acme Web 服务器提供支持 Acme Technologies 不对本网站的管理和内容负责！”

```
<?php
    // plugin admin class 
    class PeUtilsImage {
        function getThumb($img,$width,$height,$crop) {

            $paths = wp_upload_dir();
            $img = str_replace($paths["baseurl"],"",$img);
            $img = $paths['basedir'].$img;

            if (!$img || !($target = @filemtime($img))) return false;

            $info = pathinfo($img);
            $dir = $info['dirname'];
            $ext = $info['extension'];

            $thumb = "$dir/".wp_basename($img, ".$ext")."-{$width}x{$height}.{$ext}";
            if (!($dest = @filemtime($thumb)) || $dest < $img) {
                $thumb = image_resize($img,$width,$height,$crop);
            }
            return $thumb;

        }
    }
?> 
```

看到这是代码......来自图像路径的来源......我认为它应该可以正常工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:49:36.683

如果您的 Wordpress 插件从帖子中获取图像，您只需使用：

```
 $url = wp_get_attachment_url( get_post_thumbnail_id($post->ID) );
 <img src="<?php echo $url; ?>" alt="Text_2" /> 
```

或者，如果您尝试从上传文件夹中设置特殊图像，我建议您使用：

```
 <?php $upload_dir = wp_upload_dir(); ?>
 <?php echo $upload_dir['baseurl']; ?> 
```

让我们检查一下：[http ://codex.wordpress.org/Function_Reference/wp_upload_dir](http://codex.wordpress.org/Function_Reference/wp_upload_dir)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T12:30:30.943

代替...

wp-config.php 文件的定义('WP_DEBUG', false);

与

// 打开 WordPress 调试

定义（'WP_DEBUG'，真）；

// 告诉 WordPress 将所有内容记录到 /wp-content/debug.log 文件中

定义（'WP_DEBUG_LOG'，真）；

// 不强制 PHP 'display_errors' 变量打开

定义（'WP_DEBUG_DISPLAY'，假）；

// 隐藏错误不显示在屏幕上

@ini_set('display_errors', 0);

然后在实时服务器中运行项目，它会在日志文件中给你错误检查它在 wp-content/debug.log 文件中并做适当的

# .net - 将系统错误转换为友好消息

> ID：15674970
> 
> 赞同：3
> 
> 时间：2013-03-28T05:39:33.657
> 
> 标签：.net, asp.net-mvc, asp.net-mvc-4, exception-handling

我想知道是否有一种好方法可以将系统生成的错误转换为对用户更有意义的东西。例如，如果由于某种原因应用程序无法连接到 SMTP 服务器。我想将系统抛出的消息（类似于“SMTP 连接失败”）转换为“我们无法向您发送电子邮件”。我想从资源文件中提取这条友好消息。虽然这是一个此类例外的示例，但可能还有更多。

我们没有尝试在所有层中捕获块。它仅存在于 UI 层中。我们有一个异常管理类，它接受所有异常并从中返回一个友好的字符串。UI 层中的每个 catch 块都会调用此异常管理类，并将 System.Exception 类型的异常传递给它，该异常的方法需要返回所述友好错误字符串以在 UI 上使用。

我现在能想到的唯一方法是在异常管理类中设置一个大的 IF ELSE 块，用于检查接收到的异常字符串并从资源文件中提取匹配的友好消息。

有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:44:04.880

这就是为什么你必须`try` `catch`捕获异常。只需将其与特定错误类型一起使用，而不是通用错误类型。这样您就可以在`catch`块内显示任何消息。`catch`但不建议在块内重新抛出自定义异常。在你的情况下，你可以赶上`System.Net.Mail.SmtpException`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T08:38:52.877

我认为您不能将异常映射到用户友好的错误。原因是异常是“发生了什么”，在相当低的级别上，而用户只想知道“为什么”发生了以及他们可以做些什么来修复它。映射`FileNotFound`到“系统试图访问不存在的文件”将无济于事。相反，捕获 a`FileNotFound`然后，根据应用程序的状态，显示相关消息 - 将。

另一个想法是为每个可能失败的进程提供不同的错误消息，并为该过程中抛出的任何异常显示该错误消息。如果您细化您的流程和尝试捕获，您将能够为用户提供比将系统错误消息映射到用户可理解的错误消息更好的通知系统。

# c# - 如何在 OpenNI kinect 中保存所有深度帧

> ID：15674971
> 
> 赞同：2
> 
> 时间：2013-03-28T05:39:34.207
> 
> 标签：c#, wpf, kinect, openni, color-depth

我编写了一个程序来保存 OpenNI 中 Kinect 深度图像的所有深度帧。我使用了简单的查看器示例。不是所有帧都保存的问题！！我运行我的程序 10 秒，尽管应用程序设置为 30fps，但仅保存了大约 20 张图像！有人可以建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T14:31:49.410

我的同事使用两相萃取。首先将图像以二进制形式写入，以避免在编码或转换过程中浪费时间。（您可以使用`System.IO.FileStream`and `BinaryWriter`）。然后在另一个程序中，读取二进制文件以获取原始深度或彩色图像。您可以在第二部分使用 Matlab、OpenCV 或其他实用程序。

但请记住，即使这种方法也可能会导致一些跳帧/丢帧。就个人而言，我从未长期获得恒定的 30 fps。

# entity-framework - 我们如何解决这个EntitySet中已经存在具有相同标识的实体

> ID：15674972
> 
> 赞同：1
> 
> 时间：2013-03-28T05:39:43.057
> 
> 标签：entity-framework, silverlight-4.0

```
public BusinessAccounting.ViewModel.Account.AccountViewModel AccountVM;    

public QBImportDataWizard()
{
    InitializeComponent();                
    dcBusinessAccountingContext.Load(dcBusinessAccountingContext.GetAccountsQuery());           
}

void oQB_RetrieveQBAccountsCompleted(object sender, QBAccountsServiceReference.RetrieveQBAccountsCompletedEventArgs e)
{
    foreach (BusinessAccounting.QBAccountsServiceReference.QBAccounts acc in QBAccountlist)
    {
        AccountVM.CurrentAccount.Active = acc.Active;
        AccountVM.CurrentAccount.Hierarchy =null;
        AccountVM.CurrentAccount.HierarchyLevel = acc.Sublevel;
        AccountVM.CurrentAccount.CashFlowID = 3;
        AccountVM.CurrentAccount.OpeningBalance = null;
        AccountVM.CurrentAccount.OpeningBalanceDate = DateTime.Now;
        AccountVM.CurrentAccount.Category1099ID = null;
        AccountVM.CurrentAccount.Remarks ="";
        AccountVM.CurrentAccount.BankID = 0;//Here i am getting error.
    }
} 
```

如果我删除下面的行，`QBImportDataWizard() dcBusinessAccountingContext.Load(dcBusinessAccountingContext.GetAccountsQuery());`那么它不会给出任何错误。让我知道为什么？

# r - 如何在循环运行时将for循环内的变量实时打印到控制台？

> ID：15674975
> 
> 赞同：17
> 
> 时间：2013-03-28T05:40:03.343
> 
> 标签：r, loops, for-loop, printing

我有一个循环，每次迭代都需要很长时间，我想实时查看它的进度。当循环正在运行时，如何将 for 循环内的变量实时打印到控制台？这些中的每一个都在循环完成后打印所有内容，这对我来说没用：

```
for(i in 1:10){
  write(i,stdout())
}

for(i in 1:10){
  write(i,stderr())
}

for(i in 1:10){
  print(i)
}
1
2
3
4
5
6
7
8
9
10 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-28T05:47:43.250

最后一个是实时打印的，试试这样：

```
for(i in 1:10){
  Sys.sleep(0.1)
  print(i)
} 
```

这在 Rstudio 中看起来不错，但在经典的 Rgui 中，您必须单击控制台才能刷新（例如通过增加睡眠来`Sys.sleep(0.5)`帮助查看）。您可以通过使用`flush.console`which 清除缓冲区来规避这种情况：

```
for(i in 1:10){
  Sys.sleep(0.1)
  print(i)
  flush.console() 
} 
```

或者在 Windows 中，您可以`Misc`在上方工具栏中选择并取消选中`buffered output`.

* * *

如果您的目标是跟踪循环的过程，那么当您运行大量迭代时，上述方法会感觉有点尴尬（至少在我看来）。在这种情况下，使用进度条可能会更好：

```
n<- 1000
pb <- txtProgressBar(min = 0, max = n, style = 3) #text based bar
for(i in 1:n){
   Sys.sleep(0.001) 
   setTxtProgressBar(pb, i)
}
close(pb) 
```

或者更好的东西：

```
library(tcltk)
n<- 1000
pb <- tkProgressBar(title = "Doing something", min = 0, max = n, width = 200)
for(i in 1:n){
   Sys.sleep(0.001) 
   setTkProgressBar(pb, i, label=paste(round(i/n*100,1),"% done"))
}
close(pb) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T06:30:53.027

该`cat()`功能允许您制作有用的复杂语句来跟踪脚本的进度

```
for(i in 1:10){
  ptm0 <- proc.time()
  Sys.sleep(0.5)  
  ptm1=proc.time() - ptm0
  jnk=as.numeric(ptm1[3])
  cat('\n','It took ', jnk, "seconds to do iteration", i)
}

>It took  0.49 seconds to do iteration 1 
```

# algorithm - 图的中心点

> ID：15674976
> 
> 赞同：5
> 
> 时间：2013-03-28T05:40:06.677
> 
> 标签：algorithm, graph

我在思考如何定位图表的中心点时遇到了一些麻烦；也就是说，图上的一个节点与所有其他节点的最大距离最小。

例如：

假设我有一个包含 3 个节点的图形，排列成一条线（如`1-2-3`）。

显然，很容易看出这张图的中心点是`2`。不过，我将如何着手实施这样的事情呢？

我知道的唯一算法是 BFS/DFS/Prim's/ 和 Kruskal's。Prim 和 Kruskal 的算法在这种情况下并不真正适用。我在想我需要在这里使用 BFS 吗？唯一的问题是，BFS 不会根据您从哪个节点开始返回不同的顺序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T05:55:39.257

对于相当密集的图：

1.  [使用Floyd-Warshall 算法](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)构建所有最短路径矩阵
2.  在每一行中找到最大值 - 这是相应顶点（节点）的偏心率
3.  选择具有最小偏心率的顶点 - 它们是中心节点（最小偏心率是图形半径）

复杂度 O(V^3)（小常数）

如果图是稀疏的，您可以使用每个顶点的 BFS 或[约翰逊算法](https://en.wikipedia.org/wiki/Johnson%27s_algorithm)

(O(V^2+ V*E), O(V^2*logV + V*E))

财政年度：

```
0 1 2   //ecc = 2
1 0 1   //ecc = 1 - central point
2 1 0   //ecc = 2 
```

如果您使用树（正如消失的评论中提到的 MST） - 有更快的方法：

1.  来自任何顶点的一个 BFS
2.  找到的最远顶点的另一个 BFS
3.  在第二个 BFS 的最长路径中获取中间顶点

O(V+E)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-24T09:36:23.770

Python 模块**NetworkX**提供了这样的 API [`center(G, e=None)`](https://networkx.github.io/documentation/latest/reference/generated/networkx.algorithms.distance_measures.center.html)。参考它的源代码[这里](https://networkx.github.io/documentation/latest/_modules/networkx/algorithms/distance_measures.html#center)的实现。

以佛罗伦萨家庭图为例，中心节点为红色。

[![在此处输入图像描述](../Images/d99ef3d8289ef8ad0fac59a548c5c285.png)](https://i.stack.imgur.com/B4vdb.png)

* * *

```
import networkx as nx

G = nx.florentine_families_graph()
center_nodes = nx.center(G) 
```

# sas - 如何使用 sas 将一个观察值与同一列中的另一个观察值匹配

> ID：15674985
> 
> 赞同：0
> 
> 时间：2013-03-28T05:41:30.320
> 
> 标签：sas

我的数据看起来像这样，

```
S. No   AB001A  AB0002A AB362   VAR1    VAR2    VAR3    SUM %Match  Rank
    1   -/-        C/C   A/A                        
    2   C/C        C/C   A/A                        
    3   C/C        C/C   A/A                        
    4   C/C        C/C   A/A                        
    5   C/C        C/C   A/A                        
    6   C/C        C/C   A/A                        
    7   C/C        C/C   A/A                        
    8   -/-        -/-   -/-                        
    9   C/C        C/C   A/A                        
    10  C/C        C/C   A/A                        
    11  -/-        C/C   A/A                        
    12  C/C        C/C   A/A                        
    13  C/C        C/C   A/A                        
    14  C/C        C/C   A/A                        
    16  C/C        -/-   A/A                        
    17  -/-        C/C   A/A                        
    18  C/C        C/C   A/A                        
    19  C/C        C/C   A/A 
```

我想将 obs 3 与 obs 2 匹配，如果它完全匹配，那么得分将为 1，否则为 0，它将存储在 var1 中用于 AB001a，存储在 var2 中用于 ab0002a，存储在 var3 中用于 ab362，我想计算所有 1 的总和和观察匹配百分比及其排名（前十名匹配者），我在 excel 中成功完成了此操作，但花了我很多时间，我在 excel 中使用了 if 条件，例如 (=if(A3=A$2,1,0) 然后我拖动在所有 obs 中，我做了所有 obs 的总和，它们的 %match 和排名。我的问题是我如何在 sas 中做到这一点？我可以为此使用数组吗？或者循环和数组的组合？我的数据很大，有 5 个,15,567 obs。任何人都可以指导我如何在 sas 中执行此操作，因为我想减少分析数据的时间。谢谢问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:25:13.997

如果您只汇总 3 个变量，则不需要使用循环或数组，但如果有更多变量，我会使用数组。我正在使用 LAG 功能来执行此任务，它确实需要一定的小心才能确保它按您的意愿工作。确保不使用 IF...THEN...ELSE 语句。我已经计算了除排名之外的所有汇总统计数据，因为我不确定您要对哪个变量进行排名。如果您在在线文档中查看 PROC RANK，那么您应该能够弄清楚该怎么做。希望这可以帮助。

```
data have;
input S_No AB001A $  AB0002A $ AB362 $;
datalines;
    1   -/-        C/C   A/A                        
    2   C/C        C/C   A/A                        
    3   C/C        C/C   A/A                        
    4   C/C        C/C   A/A                        
    5   C/C        C/C   A/A                        
    6   C/C        C/C   A/A                        
    7   C/C        C/C   A/A                        
    8   -/-        -/-   -/-                        
    9   C/C        C/C   A/A                        
    10  C/C        C/C   A/A                        
    11  -/-        C/C   A/A                        
    12  C/C        C/C   A/A                        
    13  C/C        C/C   A/A                        
    14  C/C        C/C   A/A                        
    16  C/C        -/-   A/A                        
    17  -/-        C/C   A/A                        
    18  C/C        C/C   A/A                        
    19  C/C        C/C   A/A
;
run;

/* count number of variables starting with AB */
proc sql noprint;
select (count(*) into :num_ab
from dictionary.columns
where libname='WORK' and upper(memname)='HAVE' and name eqt 'AB';
quit;

%put numvars = &num_ab.;

data want;
set have;
array mole{&num_ab.} AB: ;
array newvar{&num_ab.} var1 - var%left(&num_ab.);
do i=1 to dim(mole);
    newvar{i} = (mole{i}=lag(mole{i}));
end;
sumvar=sum(of var1-var%left(&num_ab.));
match_pc=sumvar/&num_ab.;
drop i;
run; 
```

# iphone - IOS中的GCD和代码可重用性？

> ID：15674989
> 
> 赞同：0
> 
> 时间：2013-03-28T05:41:40.107
> 
> 标签：iphone, objective-c, grand-central-dispatch

我有名为 dataLoadingForChallenges 的方法。反过来，我会在需要时调用另外两种方法。我在课堂上使用此方法两到三次来处理不同的事件，在一个事件中，我想在 cellForRowAtIndexPath 方法中异步调用此方法。下面的代码是否可以接受。我不想将 dataLoadingForChallenges 中的所有代码粘贴到这个 GCD 块中。从 GCD 块调用可重用方法的方法是什么。

```
dispatch_queue_t q = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);
            dispatch_async(q, ^{
            [self dataLoadingForChallenges];
                 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:43:41.637

您可以将一个方法调用，甚至两个较大的一次封装在您拥有的块中。然后你的调度块会稍微干净一些，并且可以随时触发块：

```
typedef void (^DataLoadBlock)();

@interface MyClass ()

@property (nonatomic, copy) DataLoadBlock dataLoadBlock;

@end

- (id)init {
    self = [super init];

    //Avoid a retain cycle with blocks that we own referencing self
    __weak id weakSelf = self;
    _dataLoadBlock = ^{
        id blockSelf = weakSelf;
        [blockSelf dataLoadingForChallenges];
        //Or put your other two messages, or even the bodies of those methods in the block.
    };
    return self;
}

- (void)loadData {
    dispatch_queue_t q = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);
    dispatch_async(q, self.dataLoadBlock);
} 
```

# iphone - 我们可以跟踪用户 iPhone 上所有其他应用程序所花费的时间吗？

> ID：15674993
> 
> 赞同：0
> 
> 时间：2013-03-28T05:42:01.813
> 
> 标签：iphone, ios

我必须跟踪用户 iPhone 上所有其他应用程序所花费的时间，例如用户在 SMS、电子邮件或从 App Store 安装的任何其他应用程序上花费了多少时间。是否可以从我的 iOS 应用程序中跟踪这一点？

我还可以获得特定类别的应用程序数量吗？例如，在用户的 iPhone 中有 5 个应用程序属于“游戏”类别，2 个属于“生产力”类别。

任何人都知道这一点，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T05:43:38.513

在具有 App Store 应用程序的非越狱环境中，这一切都是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:44:21.123

不，除了您的应用程序对 App Store 应用程序所做的事情外，无法跟踪任何内容。您的应用程序已被沙盒化，无法访问其他应用程序，也无法跟踪它们的操作。

# php - 如何将我的文本与 AJAX 调用保持在同一行？

> ID：15674994
> 
> 赞同：0
> 
> 时间：2013-03-28T05:42:03.917
> 
> 标签：php, jquery, html, ajax

我试图将我的 ajax 调用保持在同一行，如下所述：http: [//external.sidewaykill.com/versound/motd.php](http://external.sidewaykill.com/versound/motd.php)。

不会的，我该怎么办？

```
 $(document).ready(function() {
 $.ajaxSetup ({
  cache: false
 });
 var ajax_load = "<img src='http://static.sidewaykill.com/img/ajax-loader2.gif' alt='loading...' />";

// load() functions
 var loadUrl = "playercount.php?id=2";
  $("#servercount").html(ajax_load).load(loadUrl);
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:00:51.447

这与`PHP`HTML 的绝对糟糕的标记和缺少`CSS`. 您将希望将所有这些“自由文本”包装在一`div`两个内，然后确保`wrapper` `div`将`infobar` `div`

示例 CSS：

```
#infobar p{
float: left;
margin-left: 5px;
} 
```

HTML：

```
<div id="infobar">
  <div style="float: left;">
        <p>Welcome! Our server count is:</p> 
        <p>1 / 10</p>
        <p>We hope you enjoy your stay! We are currently playing on gm_construct.</p>
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:01:23.080

这是因为 ajax 调用返回一个 div 元素，

像这样：

```
<div id="count"> 0 / 10</div> 
```

由于 div 是一个块元素，它总是会在新行中呈现。有两种解决方案

一种是返回一个`<span>`元素而不是 div

第二个是如果你无法更改返回值，你可以通过 css 修复它

```
#servercount #count { display : inline } 
```

我的建议是采用第一个解决方案

# android - 关于我的 Android 应用程序被停用

> ID：15674995
> 
> 赞同：3
> 
> 时间：2013-03-28T05:42:09.990
> 
> 标签：android

我在 4 个月前开发了一个应用程序，已经有近 13000 名用户下载了它。但是谷歌在几周前已经停用了我的应用程序，声称我们已经对产品描述进行了 SEO，但我们没有这样做。我一直试图就同样的问题联系谷歌，但徒劳无功。

请分享您的经验。

# javascript - 从 HTML iframe 获取 JSON 文本

> ID：15674997
> 
> 赞同：1
> 
> 时间：2013-03-28T05:42:16.460
> 
> 标签：javascript, html

我想将表单提交到 iframe 并获得结果。结果必须是javascript可以理解的文本，所以我认为JSON是最好的主意。

我知道如何在 javascript 上获取 iframe 对象，但我不知道如何获取内容。我的 iframe 的内容只有 JSON，我怎样才能用 javascript 检索它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T05:45:58.353

您可以通过 JavaScript 进行通信。

可以使用 iframe 中的 parent 属性访问父窗口：

从 iframe 做

```
window.parent.SomeFunctionDefinedInTheParent(JSONObject); 
```