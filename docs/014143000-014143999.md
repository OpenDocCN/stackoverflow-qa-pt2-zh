# StackOverflow 问答 14143000-14143999

# c++ - 插件代码中的通用基类

> ID：14143002
> 
> 赞同：2
> 
> 时间：2013-01-03T16:29:42.477
> 
> 标签：c++, c++11

该应用程序定义了 3 个要在插件中实现的接口。`Widget`永远是基础。

```
// Application code...
class Widget {
    virtual void animate() = 0;
};

class BigWidget : public Widget {
};

class SmallWidget : public Widget {
}; 
```

每个接口实现都派生自`NiceWidget`其中，提供了一些插件内部的公共信息。

```
// Plug-in code...
class NiceWidget {
    // nice::Thing is only known in plug-in code.
    nice::Thing thing();
};

class NiceBigWidget : public NiceWidget, public BigWidget {
    void animate() override;
};

class NiceSmallWidget : public NiceWidget, public SmallWidget {
    void animate() override;
}; 
```

`func`从应用程序代码中调用。`wid`已知由该插件实现。因此 wid 也是一个`NiceWidget`. 的目标`func`是调用`thing`它的方法。

```
// Plugin-in code...
void func(Widget* wid) {
    // wid is either NiceBigWidget or NiceSmallWidget.
    auto castedBig = dynamic_cast<NiceBigWidget*>(wid);
    if (castedBig) {
        castedBig->thing().foo();
        return;
    }

    auto castedSmall = dynamic_cast<NiceSmallWidget*>(wid);
    if (castedSmall) {
        castedSmall->thing().foo();
        return;
    }

    assert(false);
} 
```

但是随着层次结构大小的增加，尝试对`wid`每个人都进行强制转换会变得非常糟糕。`Nice*`有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T16:41:35.753

第一：如果你知道那`wid`将永远是一个`NiceWidget*`，为什么不在 中这么说呢`func()`？而且您根本不需要演员表：

```
void func(NiceWidget* wid)
{
  wid->thing().foo();  // Done
} 
```

即使您出于某种原因无法更改函数签名，您也只需要一次强制转换：

```
void func(Widget* wid)
{
  NiceWidget* casted = dynamic_cast<NiceWidget*>(wid);
  if (casted)
    casted->thing().foo();
  else
    throw std::exception(); // Well, throw the right exception
} 
```

当然，如果您认为它更适合您的目的，您可以`assert()`代替抛出异常。

在任何情况下，您只需要一个指向定义您需要使用的函数的类的指针（在本例中为`thing()`），而不是指向最派生类的指针。如果您将在派生类中覆盖该函数，请将其设为虚拟，无论如何您都完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:42:15.350

如果您知道，every `NiceWidget`is `Widget`，您应该考虑`NiceWidget`从扩展`Widget`。

```
class Widget {
    virtual void animate() = 0;
};

class BigWidget : public Widget {
};

class SmallWidget : public Widget {
};

class NiceWidget : Widget{
    // nice::Thing is only known in plug-in code.
    nice::Thing thing();
};

class NiceBigWidget : public NiceWidget, public BigWidget {
    void animate() override;
};

class NiceSmallWidget : public NiceWidget, public SmallWidget {
    void animate() override;
}; 
```

还有一个问题叫做[菱形问题](http://en.wikipedia.org/wiki/Multiple_inheritance#The_diamond_problem)，可以用虚扩展来解决。

之后`dynamic_cast`从`Widget`到应该没问题`NiceWidget`

# javascript - 如何在标头中使用无缓存属性缓存 GWT 中的图像？

> ID：14143003
> 
> 赞同：0
> 
> 时间：2013-01-03T16:29:44.270
> 
> 标签：javascript, gwt, caching, web, client-side

**如何在标头中使用无缓存属性在 GWT 中缓存图像？我无法在服务器中进行更改，我需要在 GWT 端缓存图像。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:57:43.797

您通常需要混合搭配客户端和服务器端代码。一些客户端概念之前在这里解释过 - [GWT Caching Concept](https://stackoverflow.com/questions/5138767/gwt-caching-concept)

通过 ClienBundle 处理图像有助于缓存 - [https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle](https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle)

您可以从 pagespeed 中获取一些模式创意以优化图像处理/带宽使用 - [https://developers.google.com/speed/docs/best-practices/payload](https://developers.google.com/speed/docs/best-practices/payload)

# android - Android：手电筒在 Galaxy 10 英寸平板电脑上工作正常，但在 Galaxy 7 英寸平板电脑上却不行

> ID：14143008
> 
> 赞同：0
> 
> 时间：2013-01-03T16:30:04.157
> 
> 标签：android, android-camera, flashlight

我正在使用 android 的 Flash Light 从我的应用程序中打开手电筒，它适用于 1.Sony Xperia 2.Galaxy Tab 10 英寸但是，意外的是相同的代码不适用于三星 Galaxy Tab 7 英寸。

我写的方法是：

```
 private void toggleFlashlight() {
    Parameters p = mCamera.getParameters();
    if (!mToogleFlashlight) {
        mToogleFlashlight = true;
        p.setFlashMode(Parameters.FLASH_MODE_TORCH);
    } else {
        mToogleFlashlight = false;
        p.setFlashMode(Parameters.FLASH_MODE_OFF);
    }
    if (mCamera != null) {
        mCamera.setParameters(p);
    }
 } 
```

除此之外，我还包括了我必须的权限和功能列表，在`AndroidManifest.xml`

仅当清单中存在某些问题（缺少某些标签）时，它也不适用于其他设备。我的意思是我无法追踪这是什么令人难以置信的问题。请帮我解决一些问题，有截止日期，并且已经解决了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:23:03.117

我认为[这](https://stackoverflow.com/a/9379765/2025799)可以解决您的问题。
也许您还应该使用[此应用程序](https://play.google.com/store/apps/details?id=droid.pr.coolflashlightfree)测试行为。它有一个调试屏幕，按下“降低音量”按钮[（最初发布在这里）](https://stackoverflow.com/a/3939652/2025799)。

# objective-c - 如何在 XCode 中复制菜单项？

> ID：14143009
> 
> 赞同：1
> 
> 时间：2013-01-03T16:30:07.497
> 
> 标签：objective-c, macos, menuitem

我正在为 OS X 的 XCode 中制作一个网页浏览应用程序，目前我正在尝试处理历史。我有一个名为 history 的菜单`MainMenu.xib`，我想知道是否可以在每次用户加载新页面时添加一个菜单项（通过编码）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:39:08.160

`NSMenuItem`符合`NSCopying`协议，所以你可以用这个方法复制它：

```
- (id)copyWithZone:(NSZone *)zone; 
```

但考虑到菜单项的每个字段都被复制的事实，目标和操作也是如此。

**PS**：关于区域，传球`NULL`或指向一个`NSZone`得到的指针`NSDefaultMallocZone()`。

# java - 如何格式化十进制java

> ID：14143013
> 
> 赞同：-1
> 
> 时间：2013-01-03T16:30:25.950
> 
> 标签：java, custom-component, jformattedtextfield, formatted, custom-formatting

我想像这样格式化一个十进制数：

```
1234.5
   0.5 
```

这意味着最大数字为 9999.9（“.”前 4 个字符，后 1 个字符）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T16:32:31.580

使用`DecimalFormat`：

```
DecimalFormat df = new DecimalFormat("###0.0");
String str = df.format(yourDecimal); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:51:44.923

如果要打印结果，使用 printf 可能更简单

```
for (double d : new double[]{1234.51111, 0.501})
    System.out.printf("%6.1f%n", d); 
```

印刷

```
1234.5
   0.5 
```

# java - 在 netbeans 中创建的 jar 文件未执行

> ID：14143015
> 
> 赞同：4
> 
> 时间：2013-01-03T16:30:32.240
> 
> 标签：java, netbeans, jar, executable

我在netbeans中编写了一些使用swing的GUI程序，它工作正常。我通过右键单击项目>清理和构建创建了jar文件，所有资源都包含在项目属性中。dist文件夹中的jar文件正在通过命令行执行

```
java -jar mig_log.jar 
```

但是每当我双击 jar 文件时，它都会显示“找不到主类。程序将退出”。我引用了这些链接，但没有任何结果： [在 netbeans 中生成可执行 jar](https://stackoverflow.com/questions/602537/producing-executable-jar-in-netbeans)

[无法找到主类](https://stackoverflow.com/questions/3001497/java-could-not-find-the-main-class?lq=1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:52:28.110

在 Netbeans 中，转到项目的属性，然后在运行选项卡中浏览并选择具有启动 GUI 的 main() 方法的主类，然后清理并构建以创建 jar 文件。现在双击 JAR 文件，让我知道结果。

# ruby-on-rails-3 - 访问neo4j中的所有节点

> ID：14143018
> 
> 赞同：0
> 
> 时间：2013-01-03T16:30:40.930
> 
> 标签：ruby-on-rails-3, neo4j

在 Rails 控制台上，我正在尝试调用

`@invoice = Invoice.all`

它返回了一些对象，例如

`<Neo4j::Traversal::Traverser:0x817382>`

但是当我试图像这样循环对象时

`@invoice.each { |t| p t.number }`

我得到了零，但数据库包含发票数据。

**发票类**

`class Invoice < Searchable`

`include Neo4jrb::Paperclip`

`include LinkableEntity`

`include HeadsupNotify`

`enable_optimistic_locking`

`before_destroy :verify_links, :prepend => true`

`before_destroy :destroy_invoice_items`

`property :number, :type => :string`

`property :currency, :default => Money.default_currency.to_s`

`property :date, :pay_by_date, :type => :date`

`property :purchase_order_number`

`property :settle, :default => false`

`property :link_1, :link_2, :type => :string`

`index :number, :type => :fulltext`

`domain_property :details`

`money_property :total_cost, :receivable_amount`

`attr_protected :total_cost, :receivable_amount`

`attr_accessor :delink_receipt`

`validates :total_cost, :numericality => {:greater_than_or_equal_to => 0}`

`validates :receivable_amount, :numericality => {:greater_than_or_equal_to => 0}`

`validates :date,:number, :customer_id, :event_id, :project_id, :department_id, :brand_id, :premise_id, :user_id, :currency, :presence => true`

`validates :link_1, :length => { :maximum => 250 }`

`validates :link_2, :length => { :maximum => 250 }`

`validate :number_uniqueness`

`validate :invoice_items_present`

`validate :invoice_items_currency`

`validate :issue_credit_notes_valid`

`validate :pay_by_date_valid, :unless => "date.nil?"`

`validate :check_not_linked, :on => :update`

`has_one(:event).from(Event, :invoices_for_event)`

`has_one(:project).from(Project, :invoices_for_project)`

`has_one(:department).from(Department, :invoices_for_department)`

`has_one(:brand).from(Brand, :invoices_for_brand)`

`has_one(:premise).from(Premise, :invoices_for_premise)`

`has_one(:user).to(User)`

`has_one(:customer).from(Customer, :invoices_for_customer)`

`alias :party :customer`

`has_n(:invoice_items).to(InvoiceItem)`

`has_n(:receipts).from(Receipt, :paid_invoices)`

`has_n(:issue_credit_notes).from(IssueCreditNote, :credit_notes_for_invoice)`

`has_one(:invoices_for_settle).to(Settle)`

`links :receipts, :issue_credit_notes,:invoices_for_settle`

`has_neo4jrb_attached_file :photo`

`{:customer => :name, :event => :name, :department => :name, :project => :name, :brand => :name, :premise => :name, :user => :email}.each do |target, method| delegate method, :to => target, :prefix => true, :allow_nil => true end`

`accepts_id_for :customer, :event, :project, :department, :brand, :premise, :user`

`accepts_nested_attributes_for :invoice_items, :allow_destroy => true`

`validates_associated :invoice_items`

`validates :customer_name, :presence => true, :length => { :maximum => 100 }`

`validates :event_name, :presence => true, :length => { :maximum => 100 }`

`validates :premise_name, :presence => true, :length => { :maximum => 100 }`

`validates :project_name, :presence => true, :length => { :maximum => 100 }`

`validates :brand_name, :presence => true, :length => { :maximum => 100 }`

`validates :department_name, :presence => true, :length => { :maximum => 100 }`

`validates :link_1, :length => { :maximum => 250 }`

`validates :link_2, :length => { :maximum => 250 }`

`after_validation :set_total_cost`

`serialize :methods => :invoice_items`

`before_validation :delink`

谁能帮我解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T06:30:22.257

我不确定如何使用 Ruby On Rails 执行此操作，但如果您的 Invoice 对象（节点）位于 lucene 全文索引中，则可以使用 Cypher 查询来返回所有 Invoice。

就像是：
`START invoices=node:Invoices('name: *') RETURN invoices;`

# php - $_GET 未传递给 SELECT 查询

> ID：14143023
> 
> 赞同：1
> 
> 时间：2013-01-03T16:31:18.313
> 
> 标签：php, mysql, select, pdo, get

我有一个带有超链接的页面，如下所示：

![预览](../Images/d85a40f4c0535dacd99e8fa42de6b878.png)

单击 A0000000 时，它会将您重定向到 localhost/student.php?anum=A00000000

我已经检查了实际数字是否正在使用

```
$get = $_GET['anum'];
echo $get; 
```

这就是我得到的：![预览](../Images/d434c90031b22f8323b41e75d2597b98.png)

我之前已经多次这样做了，但改变的一件事是现在我使用内部连接和 WHERE 子句进行特定搜索。这个搜索必须做的是：

1.  列出辅导员姓名为 NOT NULL 的学生
2.  完成的地方= 1
3.  并且使用 $_GET['anum'] 的 anum 或学生 ID 号 = 到 url anum

这是选择语句：

```
$anum = filter_input(INPUT_GET, 'anum', FILTER_SANITIZE_STRING);
$anum = filter_var($anum, FILTER_SANITIZE_NUMBER_INT);

    try 
    {
    $query = $dbh->prepare("SELECT * FROM inoffice INNER JOIN comments ON 
                            inoffice.id = comments.id WHERE counselorname 
                            IS NOT NULL AND finished = '1' AND anum = :anum ");
    $query->bindParam(':anum', $anum);
    $query->execute();
    $result = $query->fetchall();
    }
        catch (PDOException $e) {
        error_log($e->getMessage());
        die($e->getMessage());
        } 
```

我只是通过输入 anum = A0000000 来尝试相同的查询，它可以完美地工作。

但是当我尝试执行上述代码时，我得到一个空的回显表。

任何帮助都是极好的！-ty

编辑 1：感谢您神秘地删除了过滤器代码的消毒部分，以及没有的东西，一切都很好。那是从实际数字部分中删除 A 。所以查询没有通过。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T16:34:28.733

```
$anum = filter_var($anum, FILTER_SANITIZE_NUMBER_INT); 
```

正在剥离字母`'A'`

根据[文档](http://us3.php.net/manual/en/filter.filters.sanitize.php#filter.filters.sanitize)：

> FILTER_SANITIZE_NUMBER_INT - 删除除数字、加号和减号之外的所有字符。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-03T16:34:25.247

$anum = filter_var($anum, FILTER_SANITIZE_NUMBER_INT);

您似乎正在过滤一个整数，这意味着 A0000000 将变为 0，在变量上使用 mysql_real_escape_string 以防止 sql 注入也是一个好主意

# java - Java：格式说明符 %x 和 %h 有什么区别？

> ID：14143024
> 
> 赞同：6
> 
> 时间：2013-01-03T16:31:18.420
> 
> 标签：java, format

查看[规范页面](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html#syntax)，我看到`%h`调用[Integer.toHexString()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html#toHexString%28int%29)，但我找不到两个说明符之间的任何实际区别。

你能举一个例子，在相同的输入上使用 to 说明符会产生不同的结果吗？

```
System.out.println(String.format("%1$h %1$x", 123)); 
```

这打印

```
7b 7b 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-03T16:34:42.670

说明符在其参数上`%h`调用`hashCode`（假设它不是`null`，当您获得“null”时），而说明`%x`符只是将其参数格式化为十六进制整数。如果被格式化的东西不是整数，这会产生很大的不同。请参阅此处的示例：

[http://developer.android.com/reference/java/util/Formatter.html](http://developer.android.com/reference/java/util/Formatter.html)

特别是，对于整数，您得到相同结果的事实是`Integer.hashCode`返回整数本身的结果：

[http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#hashCode%28%29](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#hashCode%28%29)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-03T16:36:16.597

[您提供](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html#syntax)的页面指出：

> 'h' 如果参数 arg 为 null，则结果为“null”。否则，通过调用 Integer.toHexString(arg.hashCode()) 获得结果。

和

> 'x' 结果被格式化为十六进制整数

所以`%h`打印`null`提供的对象是否为`null`，否则`%h`打印对象的哈希码。而`%x`打印提供值的十六进制 `int`值。

**编辑**：正如评论中所指出的：如果没有`%x`给出值，`IllegalFormatConversionException`则抛出一个，如此处所述：

> 如果格式说明符包含不适用于相应参数的转换字符，则会抛出 IllegalFormatConversionException。

所以基本上，你只需要阅读你提供的页面...... :)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-03T16:38:56.123

`%h`以十六进制打印对象的哈希码。

`%x`以十六进制打印一个数字。

因为`Integer`hashCode 和 value 是一样的。对于`Long`value 和 hashCode 可以不同。

```
System.out.printf("%h%n", "hello world");
System.out.printf("%h%n", 0x1234567890L);
System.out.printf("%x%n", 0x1234567890L); 
```

印刷

```
6aefe2c4
34567882
1234567890 
```

# css - CSS水平菜单未清除，因为我需要绝对位置

> ID：14143042
> 
> 赞同：1
> 
> 时间：2013-01-03T16:32:12.263
> 
> 标签：css, drop-down-menu

编辑：理论上我认为我可以通过在 2 级之间有一个虚拟 ul 然后定位'第二（现在是第 3）级来实现这一点。概念的粗略证明 > [http://jsfiddle.net/petergus/jk7vU/](http://jsfiddle.net/petergus/jk7vU/)

我有一个水平下拉菜单，我试图拉伸它的父 div 高度。我遇到的问题是孩子`ul`。为了让它位于主菜单下方的一行，我必须使用`position: absolute`它，但这会使其脱离流程。

甚至可以在没有设置容器高度的情况下拥有多级水平列表吗？

编辑：这是我想要完成的插图截图。除了内容（后面的黑色文本）应该向下滑动。

![在此处输入图像描述](../Images/a213196fc75b703ae2494cc89beb16fd.png)

这是内容向下滑动的方式>

![这显示了下面的内容如何向下滑动](../Images/aac2f051cb70f83b66361399cb0f8b84.png)

据我所知，这是一个简单的`position: relative`vs问题`absolute`

请参阅[http://jsfiddle.net/petergus/nC32t/上的示例设置](http://jsfiddle.net/petergus/nC32t/)

HTML：

```
<div class="mnavwrapper">

   <div id="mnav">

    <ul class="menu clearfix">
        <li class="first expanded">
            <span title="" class="nolink">Click me here</span>
            <ul class="submenu clearfix">
                <li class="first leaf"><a href="#" title="" class="active">consultancy</a></li>
                <li class="leaf"><a href="#" title="" class="active">daylight</a></li>
                <li class="leaf"><a href="#" title="" class="active">solutions</a></li>
                <li class="leaf"><a href="#" title="" class="active">design</a></li>
                <li class="leaf"><a href="#" title="" class="active">something</a></li>
                <li class="last leaf"><a href="#team" title="">team</a></li>
            </ul>
        </li>
        <li class="expanded"><span title="" class="nolink">portfolio</span>
            <ul class="submenu clearfix">
                <li class="first leaf"><a href="http://dev.manss.co#" title="">all projects</a></li>
                <li class="leaf"><a href="#" title="" class="active">commercial</a></li>
                <li class="leaf"><a href="#" title="" class="active">public</a></li>
                <li class="leaf"><a href="#" title="" class="active">private</a></li>
                <li class="leaf"><a href="#" title="" class="active">something</a></li>
            </ul>
        </li>

        <li class="expanded"><span title="" class="nolink">another</span>
            <ul class="submenu clearfix">
                <li class="first leaf"><a href="#" title="" class="active">techniques </a></li>
                <li class="last leaf"><a href="#" title="" class="active">influences</a></li>
            </ul>
        </li>

    </ul>                    

</div>
</div>

<div id="contentbody">
 <p>Hello text</p>
</div> 
```

​CSS：

```
.clearfix:after {
    content: ".";
    display: block;
    clear: both;
    visibility: hidden;
    line-height: 0;
    height: 0;
}

.clearfix {
    display: inline-block;
}

html[xmlns] .clearfix {
    display: block;
}

* html .clearfix {
    height: 1%;
}

ul.menu {
/*display: inline-block;*/
list-style: none;
clear: both;
width: 100%;
display: block;
    position:relative;
}
ul.menu li {
    /*float: left;*/
    padding: 0px 10px;
    display: inline;
}
ul.menu li {
float: left;
}
 ul.submenu {
list-style: none;
position: absolute;
width: 100%;
 }
 ul.submenu li {
     float: left;
 }

.mnavwrapper {
    /*clear: both;*/
}
#mnav {
    background: lightblue;
    /*float: left;*/
    width: 100%;

}
#contentbody {
    background: pink;
}
p {
    padding: 0px;
    margin: 0px;
} 
```

​jQuery：

```
$('.active-trail').addClass('selected');

$('ul.menu .nolink').click(function() {
    $(this).parent().toggleClass('selected').end().next('ul').slideToggle().parent().siblings('li').find('ul').slideUp(150).parent().removeClass('selected');
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T02:22:20.167

我认为这就是你想要的：

```
<!DOCTYPE html>
<html>
  <head>
    <meta content="text/html; charset=utf-8"
          http-equiv="Content-Type" />

    <title>test doc</title>

    <style type="text/css">

      ul {
      display: table;
      padding: 0;
      }

      li {
      display: inline-block;
      white-space: nowrap;
      width: 13em;
      }

      li li {
      display: none;
      width: auto;
      }

      li:hover li {
      display: inline-block;
      }

    </style>
  </head>

  <body>
    <p>dfhg</p>
    <ul>
      <li>Hover here for sub-menu
        <ul>
          <li><a href="#">daylight</a></li>
          <li><a href="#">solutions</a></li>
          <li><a href="#">design</a></li>
          <li><a href="#">something</a></li>
          <li><a href="#team">team</a></li>
        </ul>
      </li>

      <li>Yet another sub-menu
        <ul>
          <li><a href="#">daylight</a></li>
          <li><a href="#">solutions</a></li>
          <li><a href="#">design</a></li>
          <li><a href="#">something</a></li>
          <li><a href="#team">team</a></li>
    </ul>
      </li>
    </ul>

    <p>Hello text</p>
  </body>
</html> 
```

干杯，

加里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:47:04.047

像这样的东西？： http: [//jsfiddle.net/chanckjh/DDeRT/](http://jsfiddle.net/chanckjh/DDeRT/)

html:

```
<div class="nav">
<ul>
    <li class="nav1">nav
        <ul>
            <li>sub</li>
            <li>sub</li>
            <li>sub</li>
            <li>sub</li>
        </ul>
    </li>
    <li class="nav2">nav2
        <ul>
            <li>sub</li>
            <li>sub</li>
            <li>sub</li>
            <li>sub</li>
        </ul>
    </li>
</ul>
</div>​ 
```

CSS：

```
.nav > ul >li{
    display: inline;
    position: absolute;
}
.nav1{
    left: 50px;
}
.nav2{
    left: 100px;
}
.nav > ul >li > ul > li{
    display: none;
}
.nav > ul >li:hover > ul > li{
    display: inline;
}
​ 
```

# ruby-on-rails - Ruby on Rails 活动记录查询（.each、.collect、.map ...？）

> ID：14143044
> 
> 赞同：11
> 
> 时间：2013-01-03T16:32:22.127
> 
> 标签：ruby-on-rails, ruby, sqlite, activerecord, active-record-query

这是我的数据库中一项的示例：

```
Market id: 1, name: "Independence Park (Independently Run Farmers Market...", address: "3945 N. Springfield Ave., Chicago, IL", zipcode: "60618", created_at: "2013-01-01 21:22:24", updated_at: "2013-01-01 21:22:24" 
```

我要做的就是列出我数据库中所有条目的 43 个邮政编码。为什么这些查询不起作用？

1.  `Market.all.each { |m| m.zipcode }`
2.  `Market.all.zipcode`
3.  *   `m = Market.all`
    *   `m.each{ |m| m.zipcode }`

谢谢！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-03T16:39:42.643

如果你想要的只是一组邮政编码，我建议你试试这个：

```
Market.pluck(:zipcode) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-04-05T08:53:51.893

其他答案指出了做你想做的事情的正确方法，但没有解释为什么你的其他尝试不起作用（从技术上讲，这是你问的问题）。

尝试 1 和 3 不起作用的原因是它`each`不返回任何内容，它的唯一用途是遍历一组记录并对它们执行操作（例如更新它们或使用一些数据来调用外部服务） . 替换`each`为`map`将修复它们，因为 map 使用块的返回值来返回值数组。这有一个缺点，因为它`map`是一个 Array 方法，因此必须先将所有记录加载到内存中，然后才能找到值。

尝试 2 不起作用，因为您尝试调用 ActiveRecord::Relation ( `all`) 上的字段名称，因此您最终会引发 NoMethodError。

最简洁的解决方案，也是已经指出的一个，是使用`pluck`，它不仅返回请求字段的所有值，而且在数据库查询级别这样做，所以你调用应该更有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T17:01:10.337

您还可以执行以下操作，它会返回一个邮政编码数组：

```
Market.all.map(&:zipcode) 
```

使用基准来确定哪个更好。

# javascript - 是否可以使用自定义 soundcloud 播放器小部件 api 设置静音按钮？

> ID：14143050
> 
> 赞同：0
> 
> 时间：2013-01-03T16:32:48.737
> 
> 标签：javascript, jquery, soundcloud

我想在我的 soundcloud 播放器[http://developers.soundcloud.com/docs/custom-player](http://developers.soundcloud.com/docs/custom-player)中添加一个静音按钮，但我在脚本或文档中看不到任何可以执行此操作的内容。有没有办法实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:37:26.857

您可以使用此方法 api_getVolume() 保存当前音量，之后可以使用此方法 api_setVolume(0) 将其设置为零。

当您保存当前音量时，您可以在之后对其进行测试......所有方法都在这里：http: [//developers.soundcloud.com/docs/widget](http://developers.soundcloud.com/docs/widget)

如果你想要一些灵感，你可以看看这个网站：http: [//popcornjs.org/code/players/soundcloud/popcorn.soundcloud.html](http://popcornjs.org/code/players/soundcloud/popcorn.soundcloud.html)

# python - 在 sqlalchemy 上查询相关实体（多对多）

> ID：14143055
> 
> 赞同：0
> 
> 时间：2013-01-03T16:33:02.663
> 
> 标签：python, mysql, sqlalchemy, relationship, pyramid

我有用户和实体（多对多），并使用 sqlalchemy，这个模型：

```
from sqlalchemy import Table, Column, Unicode, Integer, ForeignKey
from sqlalchemy.orm import relationship
from sqlalchemy.ext.declarative import declarative_base

from sqlalchemy.orm import scoped_session, sessionmaker

from zope.sqlalchemy import ZopeTransactionExtension

DBSession = scoped_session(sessionmaker(extension=ZopeTransactionExtension()))
Base = declarative_base()
users_entities = Table('users_entities', Base.metadata,
    Column('userID', Integer, ForeignKey('users.id')),
    Column('entitieID', Integer, ForeignKey('entities.id'))
)

class User(Base):
    __tablename__ = 'users'
    id = Column(Integer, primary_key=True)
    username = Column(Unicode(20))
    password = Column(Unicode(101))
    entities = relationship("Entities", secondary=users_entities)

    def __init__(self, username, password):
        self.username = username
        self.password = password

class Entities(Base):
    __tablename__ = 'entities'
    id = Column(Integer, primary_key=True)
    name = Column(Unicode(20))
    descr = Column(Unicode(101))
    url = Column(Unicode(101))

    def __init__(self, name, descr, url):
        self.name = name
        self.descr = descr
        self.url = url 
```

所以，当我使用：

```
user = dbsession.query(User).filter_by(id=session["userID"]).first()
entities = user.entities 
```

我得到了`user`用户数据，以及所有用户实体的`entities`( )。`user.entities`

但是现在我需要从 id 为 = X 的用户那里获取一个实体，而不是获取所有实体，这将像这样工作：

```
user.query(Entities).filter_by(id=X) 
```

我找不到简单（“最佳”）的方法来做到这一点，我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:11:45.587

您正在寻找[Dynamic Relationship Loaders](http://docs.sqlalchemy.org/en/rel_0_7/orm/collections.html#dynamic-relationship-loaders)，它们正是您想要做的，并且使您能够编写：

```
user.entities.filter_by(id=X) 
```

顺便说一句，你可以写`user = dbsession.query(User).get(session["userID"])`。它执行相同的查询，但前提是对象尚未在会话缓存中（另外，它更短）。

# php - max() 的参数计数错误

> ID：14143064
> 
> 赞同：0
> 
> 时间：2013-01-03T16:33:30.747
> 
> 标签：php, while-loop, max

我正在尝试显示来自 mysql 的列团队的最大值。在 while 循环上方，我从我的 mysql 表中选择了团队，然后正如您在下面的代码中看到的那样，我已经包含了 max($teams) - 但它返回错误？我哪里错了。

```
while ($rows = mysql_fetch_assoc($result)) { 

$teams = $rows['teams'];

if($teams > "1") {

echo '<div class="bestbettor">'.'<span class="redtext">'."Bettor: ".'</span>'. $rows['username'].'</div>'; 
echo '<div class="bestbettor">'.'<span class="redtext">'."   Bet: ".'</span>'.max($teams). " team accumulator".'</span>'.'</div>'; 
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:35:37.417

如果给定一个参数，则`max()`它必须是一组值，其中`max()`将返回该数组中的最大值。好像你刚刚给了它一个字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T16:35:51.473

您必须将数组传递给[max()](http://php.net/manual/en/function.max.php)。

```
$teams = $rows['teams']; // saves as string. 
```

如果您的团队由逗号分隔，那么您可以执行以下操作：

```
$teams = explode(",",$rows['teams']); // saves as array 
```

那么你可以做 max()

# java - 如果没有关键字“implements”，如何使用接口？

> ID：14143070
> 
> 赞同：-2
> 
> 时间：2013-01-03T16:33:43.807
> 
> 标签：java

> **可能重复：**
> [为什么不使用接口类型的这些变量来实例化新对象？](https://stackoverflow.com/questions/14132849/why-are-these-variables-of-an-interface-type-not-being-used-to-instantiate-new-o)

在下面来自我正在使用的[API的代码示例中，有一个变量“audiodecoder”和“cc”的初始化。](http://javadoc.jlibav.googlecode.com/git/index.html)这两个变量是接口类型。但是，关键字**implements**在代码示例中的任何地方都没有使用，除了 actionlisteners。

这与我迄今为止所学到的有关 Java 的任何知识都背道而驰。我在下面列出了 import 语句，认为它们可能对为什么 IDecoder 和 ICodecContextWrapper 没有相应的**implements**语句有一些线索。我也试图找到一些关于以这种方式使用接口的文档，但没有成功。有人可以向我解释为什么不使用关键字**implements吗？**这个概念是否有名称，或者您所知道的有关该概念的一些文档？

**编辑：我还应该补充一点，示例代码中也没有使用关键字new**声明变量。

```
import org.libav.audio.Frame2AudioFrameAdapter;
import org.libav.audio.PlaybackMixer;
import org.libav.audio.SampleInputStream;
import org.libav.avcodec.ICodecContextWrapper;
import org.libav.avformat.IChapterWrapper;
import org.libav.avformat.IFormatContextWrapper;
import org.libav.avformat.IStreamWrapper;
import org.libav.avresample.bridge.AVResampleLibrary;
import org.libav.avutil.IDictionaryWrapper;
import org.libav.avutil.bridge.AVChannelLayout;
import org.libav.avutil.bridge.AVSampleFormat;
import org.libav.bridge.LibraryManager;
import org.libav.data.IFrameConsumer;
import org.libav.util.swing.VideoPane;

IDecoder audioDecoder = player.getAudioStreamDecoder(streamIndex);
ICodecContextWrapper cc = audioDecoder.getCodecContext(); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-03T16:35:07.227

这

```
IDecoder audioDecoder = player.getAudioStreamDecoder(streamIndex); 
```

意味着无论返回什么都*实现* `IDecoder`。

例如

```
public IDecoder getAudioStreamDecoder() {
   // constructs...
   return new IDecoderImplementation(); 
} 
```

请注意构造的内容和返回的引用之间的类型区别。

返回的对象将是一个具体的类，但由于它实现了该接口，因此该接口可以引用它。它*也可以*实现其他接口，并且可以公开功能，但您只能将其作为`IDecoder`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T16:41:09.880

### 仅供参考：

根据[jlibav API 文档](http://javadoc.jlibav.googlecode.com/git/index.html)，有两个类是具体实现`IDecoder`：

*   `AudioFrameDecoder`和
*   `VideoFrameDecoder`

你`IDecoder`是这两个类之一的实例。`IDecoder`还扩展了另外两个接口：

*   `IFrameProducer`和
*   `IPacketConsumer`

对于`ICodecContextWrapper`. 实现该接口的三个已知类：

*   `AbstractCodecContextWrapper`,
*   `CodecContextWrapper53`， 和
*   `CodecContextWrapper54`

你`ICodecContextWrapper`是这三个之一的一个实例。

这个概念称为[**多态性**](http://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29)。如果它令人困惑（而且它很可能适合初学者），您可能希望拿起一些学习材料。

# ios6 - 使用 MonoTouch 在 OxyPlot 2D 库中实现真正的捏合和缩放

> ID：14143071
> 
> 赞同：0
> 
> 时间：2013-01-03T16:33:59.900
> 
> 标签：ios6, xamarin.ios, plot, core-plot, pinchzoom

为了绘制图表，我在基于 MonoTouch 的 iPhone 应用程序中使用了一段时间的[coreplot 库](http://code.google.com/p/core-plot/)，但在 iOS 6.0 中，已经很烦人的绑定问题变得如此之多，以至于我决定放弃它，转而使用原生用 C# 编写的库。

环顾四周，我发现了出色的[OxyPlot 2D 库](http://oxyplot.codeplex.com/)，更具体地说，是[dvkwong](http://oxyplot.codeplex.com/SourceControl/network/forks/dvkwong/MonoTouchPinchZoom)制造的 MonoTouch 端口。

该库工作正常并且有大量有用的功能，但它的输出只是一个渲染的位图 UIImage。

这意味着我需要将捏合和缩放功能添加到库中。

当前的实现，基于 dvkwong 初步示例，使用 UIScrollView 来缩放和取消缩放添加到简单子视图的结果位图图像。

这不是一个好的解决方案，因为当缩放位图的锯齿是可见的，如果增加分辨率，文本字体变得不可读，因为没有针对当前缩放分辨率进行优化。

我需要每次以正确的分辨率渲染图像，而不使用 UIScrollView，而只是覆盖自定义 UIView 中的 DrawRect() 调用。

但是如何重现 Apple UIScrollView 的捏缩放手势并绘制 OxyPlot 绘图模型的正确子矩形？

我试图实现这里建议的这个方法：

[将捏合视图定位在两根手指之间](https://stackoverflow.com/questions/4947148/uipinchgesturerecognizer-position-the-pinched-view-between-the-two-fingers)

但这不起作用，因为我需要知道要绘制的子矩形，而不是应用变换矩阵。OxyPlot 库中也没有“draw sub rect”方法，所以我需要在图像上下文中设置一个 cliprect 并先绘制一个更大的图像，然后再对其进行裁剪。这显然太慢了，因为在某些缩放级别上，图像可能会变得很大（并且我需要用户能够在图形的任何部分上无限缩放）。

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:00:57.767

我自己解决了这个问题。我创建了 OxyPlot 2D 库的另一个 MonoTouch 端口，这次支持 Pan 和 Pinch-Zoom 手势。我还添加了 iPad 支持。现在我们有了一个用于 MonoTouch 的原生 C# 绘图库。

您可以在此处根据 MIT 许可证下载它：

[https://github.com/Emasoft/OxyPlot.2DGraphLib.MonoTouch](https://github.com/Emasoft/OxyPlot.2DGraphLib.MonoTouch)

# sql - 使用 Coldfusion 上传时存储文件名

> ID：14143076
> 
> 赞同：3
> 
> 时间：2013-01-03T16:34:16.197
> 
> 标签：sql, coldfusion, upload, filenames

我正在尝试将要上传的所选文件的文件名存储到表单上的隐藏输入字段中。我的表格看起来像这样

```
<form id="uploadattachment" enctype="multipart/form-data" 
       method="post" action="/governance/attachmentfilestore">

  <cfif isDefined("fileUpload")>
        <cffile action="upload"
                fileField="fileUpload"
                accept="application/pdf"
                nameconflict="makeunique"
                destination="#ExpandPath( '/files/governance/upr/' )#">

       <input type="hidden" name="filename" id="filename" value="">
       <input type="hidden" readonly id="uprUUID" name="uprUUID" 
               style="width: 400px" value="<cfoutput>#params.key#</cfoutput>"/>
       <input type="hidden" readonly id="status" name="status" 
               style="width: 400px" value="1"/>
       <input name="fileUpload" type="file" style="width: 200px;" />
       <button type="submit" name="action" 
               class="submitBtn primary rightSubmitBtnSpace">Upload</button>
</form> 
```

然后将其发送到将其写入数据库的控制器，但是我无法找到一种方法来获取要存储在“文件名”字段中的文件名。

有没有人有关于如何使用选择要上传的文件的名称填充字段的解决方案？

我已经添加了 CFFILE.serverFile 并且它工作了一次，但我猜那是因为它抓住了以前上传的文件名。

现在加载页面时，我得到的 Serverfile 在 CFFILE 中未定义，因此它不允许我使用文件名填充表单。

我的代码现在看起来像这样，可以尝试解决它，但它似乎也不起作用。

```
<cfif isDefined("CFFILE.serverFile")>
    <cfset form.filename = CFFILE.serverFile>
<cfelse>
     <cfset form.filename = "null">
</cfif>
<input type="hidden" name="filename" id="filename" 
        value="<cfoutput>#CFFILE.serverFile#</cfoutput>"/> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T16:51:17.533

在文件上传之前，文件名不可用。这发生在表单发布后。解决此问题的唯一方法是尝试通过 AJAX 发布文件上传，然后返回文件名。

否则，您可以在上传文件并发布表单后将值分配给该字段。

```
 <cfset form.filename = CFFILE.serverfile> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T19:48:14.753

您可以在保存前找到文件名。

雷洛：

```
GetPageContext().formScope().getUploadResource("myFormField").getName() 
```

土坯：

```
function getClientFileName(fieldName) {
var tmpPartsArray = Form.getPartsArray();
var clientFileName = "";

if (IsDefined("tmpPartsArray")) {
    for (local.tmpPart in tmpPartsArray) {
        if (local.tmpPart.isFile() AND local.tmpPart.getName() EQ arguments.fieldName) {
            return local.tmpPart.getFileName();
            }
        }
    }

return "";
} 
```

资料来源： http: [//www.stillnetstudios.com/get-filename-before-calling-cffile/](http://www.stillnetstudios.com/get-filename-before-calling-cffile/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-27T20:43:23.063

正如 lvmisooners 所说，

```
GetPageContext().formScope().getUploadResource("myFormField").getName() 
```

适用于 Railo（和 Lucee），但我注意到一个有趣的问题：如果浏览器是 IE，则返回完整的源路径，包括文件名。另一方面，Firefox 和 Chrome 只返回文件名。

对于我的应用程序，我需要完整路径，但无法找到浏览器是 FireFox 还是 Chrome。如果有人有任何想法，我将不胜感激！

（抱歉没有回复 lvmisooners 但我没有声望点可以回复。）

# matlab - 我可以及时向后运行 ode45 吗？

> ID：14143083
> 
> 赞同：5
> 
> 时间：2013-01-03T16:34:34.510
> 
> 标签：matlab, ode

我使用 ode45 来求解微分方程，但 tspan 始终必须使系统及时向前运行。我可以让 ode45 将系统向后运行到负 t 吗？

我遇到的具体问题使用了一个上升指数函数，即从 t=-infinity 到 t=0 的 a*exp(at)，对于所有 t>0，该函数为零。如您所见，在我的问题中不可能翻译此函数并使用区间 t=0 到 t=infinity。所以，我希望 ode45 在负 t 下工作。

谢谢！

编辑：经过一番思考，我意识到我的问题措辞很糟糕，而且我的理解也很差，所以让我在这里重申一下。

我的 ODE 的形式为 x'=f(t)x，其中 f(t)=a*exp(at) 从 -infinity 到 0。系统从 t=-infinity 的一些初始条件开始。另一方面，ode45 要求 tspan 为正，并且还需要 t=0 时的初始条件。那么我怎样才能改变这两个标准呢？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:37:30.250

使用向后的 linspace 生成您的 t。

对于正向 (t)，使用类似 t = 0:0.1:2 的值。对于反向 (rt)，使用类似 rt = 2:0-.1:0 的值。

# javascript - 使用jQuery动态添加onchange函数以下拉

> ID：14143084
> 
> 赞同：3
> 
> 时间：2013-01-03T16:34:34.777
> 
> 标签：javascript, jquery, onchange

我有几个下拉框，ID 为 country1，country2，... 当国家在下拉列表中更改时，国家的值应该显示在警报框中。

如果我为这样的一个盒子添加 onchange 处理程序，它可以正常工作：

```
 $('#country1') .live('change', function(e){
        var selectedCountry = e.target.options[e.target.selectedIndex].value;
        alert(selectedCountry);
 }); 
```

但是我需要为所有下拉框动态地执行此操作，所以我尝试了：

```
$(document).ready(function() {
  $('[id^=country]') .each(function(key,element){
    $(this).live('change', function(e){
      var selectedCountry = e.target.options[e.target.selectedIndex].value;
      alert(selectedCountry);
     });
  });               
}); 
```

这行不通。更改所选国家/地区时没有语法错误，但没有任何反应。我确信每个循环都执行了几次，并且数组包含选择框。

对此有任何想法吗？

谢谢，保罗

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T16:38:44.890

存在的原因`.live()`是考虑到调用选择器时不存在的元素。

`$('[id^=country]') .each(function(key,element){`迭代具有以`id`开头的元素`country`，但*仅迭代运行选择器时存在*的元素。它不适用于您在调用后创建的元素`.each()`，因此使用`.live()`不会对您有多大好处。

将新样式的事件委托语法与该选择器一起使用，它应该可以工作：

```
$(document).on('change', '[id^=country]', function(e) {
    // ...
}); 
```

替换`document`为不会动态生成的最近的父级。

此外，请考虑将类与`id`属性一起添加到这些元素中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-03T16:38:11.347

我会使用一个类，而不是增量 ID。然后该`live`方法被弃用，但您可以`on`在最近的静态父级或其他情况下使用委托`document`。

```
$('#closestStaticParent').on('change', '.country', function() {
  // this applies to all current and future .country elements
}); 
```

你不需要这样的 each 循环；plus 事件附加到jQuery 集合中的*所有*元素，在本例中是所有`.country`元素。

# c# - IVideoWindows 在使用 MDI 时显示外部格式

> ID：14143090
> 
> 赞同：0
> 
> 时间：2013-01-03T16:35:07.640
> 
> 标签：c#, winapi, directshow, mdi, video-conferencing

我正在使用 ConferenceXP 源代码，当我尝试使用 MDI 将视频窗口设置为我的表单内的子窗口时，IVideoWindows 在不同的 ActiveMovie 窗口中打开。我需要这个来进行高清视频会议，并将 C# 嵌入到我的解决方案中。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T09:27:23.507

视频渲染器在连接时会打开一个弹出窗口，但它没有正确初始化。反过来，这通常发生在整个过滤器图构建不正确或不准确时，尤其是。当应用程序的请求（例如`RenderFile`添加应用程序甚至不知道的新渲染器）时。

要解决此类问题，您首先需要找出应用程序中有效的图拓扑。

# python - 为什么 matplotlib fill_between 只在 PDF 上绘制边缘线？

> ID：14143092
> 
> 赞同：11
> 
> 时间：2013-01-03T16:35:18.640
> 
> 标签：python, pdf, matplotlib, png

在 python 的`matplotlib.fill_between`以下最小工作示例中，正确地绘制到屏幕，并绘制到`.png`. 然而，在结果`.pdf`中，边缘线仍然被绘制。我怎样才能解决这个问题？

```
from numpy import *
import pylab as plt

# Sample data
X  = linspace(0,2*pi,1000)
Y0 = sin(X)
Y1 = sin(X+.2)
Y2 = sin(X+.4)

# fill_kwargs (what am I missing?)
fbk = {'lw':0.0, 'edgecolor':None}

ax = plt.subplot(111)
ax.fill_between(X, 0, Y0 , facecolor = 'b', **fbk)
ax.fill_between(X, Y0, Y1, facecolor = 'g', **fbk)
ax.fill_between(X, Y1, Y2, facecolor = 'r', **fbk)
plt.xlim(pi-.8,pi+.5)
plt.ylim(-.5,.5)

plt.savefig('fA.png')  # No edge lines
plt.savefig('fA.pdf')  # Edge lines! 
```

# PNG结果

![在此处输入图像描述](../Images/40017f92df84b1449e560bc378aba5b3.png)

# PDF 结果

![在此处输入图像描述](../Images/ac7226b95a3cdf46db6c22c678517d83.png)

虽然看起来微不足道，但当你堆叠 200 个地块时，它变得*非常*`fill_between`有问题，你所看到的只是一团难看的黑色！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T17:04:39.473

这并不完美，但我找到了一个解决方案（如果有更好的解决方案，我会接受）。[显然](http://permalink.gmane.org/gmane.comp.python.matplotlib.general/996)后记可能是罪魁祸首：

> ...请注意，将零线宽解释为 1 像素宽的线是 PostScript 所做的。因此，为 PostScript 输出获得真正的零宽度的唯一方法是填充多边形而不抚摸它。

解决办法是让edgecolor和facecolor一样。这可行，但如果 facecolor 具有透明度，则 edgecolor 似乎没有获得相同的透明度值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-06T22:34:57.010

它一点也不漂亮，但如果你将它设置为 None，它会抛出这个错误：

> 回溯（最后一次调用）：文件“/usr/local/lib/python2.7/site-packages/matplotlib/artist.py”，第 59 行，>in draw_wrapper draw(artist, renderer, *args, **kwargs ) 文件“/usr/local/lib/python2.7/site-packages/matplotlib/figure.py”，第 1085 行，>in draw func(*args) 文件“/usr/local/lib/python2.7/site -packages/matplotlib/artist.py”，第 59 行，> 在 draw_wrapper 绘制（艺术家，渲染器，*args，**kwargs）文件“/usr/local/lib/python2.7/site-packages/matplotlib/axes/ _base.py”，行 > 2110，在 draw a.draw(renderer) 文件“/usr/local/lib/python2.7/site-packages/matplotlib/artist.py”，第 59 行，> 在 draw_wrapper draw(artist , 渲染器, *args, **kwargs) 文件“/usr/local/lib/python2.7/site-packages/matplotlib/lines.py”，第 694 行，>在 draw gc.set_linewidth(self._linewidth) TypeError: a float is required

并继续在没有线的情况下进行渲染。堆叠的小提琴图现在可以与 Seaborn 一起使用！

0.0 线宽：

![0.0 线宽](../Images/80a494f39815e6791888f144342d78dc.png)

无：

![使用无](../Images/3da4631760e7597b3ad076da66cad744.png)

# javascript - 使用 NodeJS 执行托管的 .JS 文件

> ID：14143093
> 
> 赞同：0
> 
> 时间：2013-01-03T16:35:19.250
> 
> 标签：javascript, node.js, cmd, socket.io

在命令提示符下执行 NodeJS 应用程序时，您通常会这样做：

```
node myscript.js 
```

有可能做这样的事情吗？

```
node http://www.myhostedsite.com/myscript.js 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T17:17:03.933

我会`wget http://www.myhostedsite.com/myscript.js && node myscript.js`用来避免 REPL 中的差异（例如作为`_`对最后一个返回值的引用，这可能会破坏像 underscore.js 这样的库）。

您还在问题中标记了 socket.io，这意味着您可能还需要一些可用的依赖项。在这种情况下，您可能需要全局安装这些依赖项`npm install -g <dependency name>`才能使脚本成功运行。

# iphone - 故事板 prepareForSegue

> ID：14143095
> 
> 赞同：2
> 
> 时间：2013-01-03T16:35:33.653
> 
> 标签：iphone, ios, xcode

我有一个关于故事板 segues 的问题。平台为 iOS 6.1。目标设备是 iPhone。IDE 是 Xcode 4.5.2。我拥有的是 2 个 TableViewController，它们都有一个到同一个 ViewController 的 segue（segOne 和 segTwo）。期望的结果是，当用户导航到此 ViewController 时，他们将返回到原始 TableViewController。为此，我需要某种方法将原始 segue（或 TableViewController）的 id 传递给目标 ViewController。过去，我通过在 NavigationItem 中设置“后退”按钮来完成此操作，该按钮始终运行良好。但是，现在我想将后退按钮编码为单独的控件。

我知道要做到这一点，我需要在我已经完成的源 TableViewControllers 中设置“prepareForSegue”方法。我遇到的问题是在destinationViewControllers 中编写代码以编程方式识别两个segue 中的哪一个是源segue、segOne 或segTwo？在 Storyboard Seque 中，这两个 segue 都被标识为“segOne”和“segTwo”。两者都是风格“推送”segues，都是目标“当前”segues。除了 segue id 之外，每个 TableViewController 实现文件都是相同的。这是我的代码：

头文件：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender; 
```

实现文件：

```
-(void)prepareForSegue:(UIStoryboardSegue*)segue sender:(id)sender
{
  if([[segue identifier] isEqualToString:@"segOne"])
  {
      NSLog (@"TableViewController1: segue.identifier %@", segue.identifier);
      NSLog (@"TableViewController1: self %@", self);
      NSLog (@"TableViewController1: sender %@", (id)sender);
  }
} 
```

输出正是我所期望的。这是 forTableViewController1：

```
TableViewController1: segue.identifier segOne
TableViewController1: self <TableViewController1: 0x928eb70>
TableViewController1: sender <UITableViewCell: 0x927a3e0; frame = (0 22; 768 44); text = '  1\. birth month and year...'; autoresize = W; layer = <CALayer: 0x928d380>> 
```

所以，我需要的是 ViewController 的代码，它标识两个 segue 中的哪一个， segOne 或 segTwo 是原始的 segue。我明白任何代码都需要进入目标 ViewController 的 viewDidAppear 方法。一旦我有了这个，在 ViewController 中编码 IBAction 以导航到原始 TableViewController 将是一件简单的事情。任何有关如何执行此操作的代码示例将不胜感激。谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T17:49:48.677

当您使用导航视图控制器推送视图控制器时，它将被推送到带有视图控制器的堆栈顶部。

所以你所要做的就是回到前一个视图控制器弹出被推送的那个。

把它放在你的 IBAction 方法中：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

现在，如果您真的想知道使用了什么 segue，您可以将 segue 标识符传递给目标控制器，并将其放入如下属性中：

```
 -(void)prepareForSegue:(UIStoryboardSegue*)segue sender:(id)sender
{
    if([[segue identifier] isEqualToString:@"segOne"])
    {
        MyOtherViewController *other = (MyOtherViewController *)segue.destinationViewController;
        other.theSegueIUsed = @"segOne";
    }
} 
```

您还需要将该属性添加到其他视图控制器头文件中：

```
@property (strong, nonatomic)NSString *theSegueIUsed; 
```

# jquery - Windows Phone 7 Jquery Mobile：输入元素上的 Keypress/Keydown 未触发

> ID：14143098
> 
> 赞同：0
> 
> 时间：2013-01-03T16:35:43.933
> 
> 标签：jquery, windows-phone-7, jquery-mobile

我有一个 javascript 来检测 IOS 和 Android 平台上特定输入上的按键事件，但它在 Windows Phone 7 中不起作用。

我已经尝试过 keypress 、 keydown 和 keyup ，但它们根本不触发。

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:12:07.667

似乎问题实际上是 IE9 不支持 localStorage，并且影响了应用程序的几个部分。对不起。它可以关闭。

# python - 将日期时间列表与 Python 中的日期时间进行比较

> ID：14143100
> 
> 赞同：8
> 
> 时间：2013-01-03T16:35:48.833
> 
> 标签：python, numpy

我有一个日期时间对象列表，并希望找到在特定时间范围内的对象：

```
import datetime

dates = [ datetime.datetime(2007, 1, 2, 0, 1),
          datetime.datetime(2007, 1, 3, 0, 2),
          datetime.datetime(2007, 1, 4, 0, 3),
          datetime.datetime(2007, 1, 5, 0, 4),
          datetime.datetime(2007, 1, 6, 0, 5),
          datetime.datetime(2007, 1, 7, 0, 6) ]
#in reality this is a list of over 25000 dates

mask = (dates>datetime.datetime(2007,1,3)) & \
       (dates<datetime.datetime(2007,1,6)) 
```

但是，这会导致以下错误：“TypeError: can't compare datetime.datetime to list”

如何修复我的代码？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-03T16:39:00.570

[`numpy.array`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.array.html)您可以在您描述的语法中屏蔽 a *（但不是列表）*：

```
import numpy as np

date1 = np.array(dates)
mask = (dates1 > datetime.datetime(2007,1,3)) & \
       (dates1 < datetime.datetime(2007,1,6))

In [14]: mask
Out[14]: array([False,  True,  True,  True, False, False], dtype=bool)

In [15]: dates1[mask]
Out[15]: array([2007-01-03 00:02:00, 2007-01-04 00:03:00, 2007-01-05 00:04:00], dtype=object) 
```

*（因为这个问题被标记为 numpy，大概这就是你想要的。）*

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-03T16:39:15.523

如果您的`dates`列表按排序顺序，您可以使用该[`bisect`模块](http://docs.python.org/2/library/bisect.html)：

```
>>> import bisect
>>> bisect.bisect_right(dates, datetime.datetime(2007,1,3))
1
>>> bisect.bisect_left(dates, datetime.datetime(2007,1,6))
4 
```

这些`.bisect_*`函数将索引返回到`dates`列表中：

```
>>> lower = bisect.bisect_right(dates, datetime.datetime(2007,1,3))
>>> upper = bisect.bisect_left(dates, datetime.datetime(2007,1,6))
>>> mask = dates[lower:upper]
>>> mask
[datetime.datetime(2007, 1, 3, 0, 2), datetime.datetime(2007, 1, 4, 0, 3), datetime.datetime(2007, 1, 5, 0, 4)] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-03T16:40:23.497

```
import datetime

dates = [ datetime.datetime(2007, 1, 2, 0, 1),
          datetime.datetime(2007, 1, 3, 0, 2),
          datetime.datetime(2007, 1, 4, 0, 3),
          datetime.datetime(2007, 1, 5, 0, 4),
          datetime.datetime(2007, 1, 6, 0, 5),
          datetime.datetime(2007, 1, 7, 0, 6) ]

within = [date for date in dates if datetime.datetime(2007,1,3) < date < datetime.datetime(2007,1,6)] 
```

产量：

```
[datetime.datetime(2007, 1, 3, 0, 2), 
 datetime.datetime(2007, 1, 4, 0, 3), 
 datetime.datetime(2007, 1, 5, 0, 4)] 
```

# db2 - DB2 和 Report Studio：将字符串日期转换为数字

> ID：14143103
> 
> 赞同：2
> 
> 时间：2013-01-03T16:35:56.893
> 
> 标签：db2, report, cognos

我有这样格式的日期：2013 年 1 月 1 日（取自 Report Studio 中的日期提示）

我想使用 sql(db2) 或 report studio 命令将其转换为时间戳，输出应如下所示：1130101000000000

感谢您的投入。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T18:49:59.653

看看[`VARCHAR_FORMAT()`标量函数](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0007110.html)。老实说，我不确定您的实际格式是什么（1 + 2 位数年份 + 2 位数月份 + 2 位数日期 + 小时/分钟/秒/微秒？），但我链接的信息中心页面应该为您提供足够的信息得到你想要的。也许像

```
SELECT VARCHAR_FORMAT(your_date, 'YYMMDDHHMISSFN3')
FROM your_table 
```

# ruby-on-rails - 回形针。处理具有相同文件名的文件

> ID：14143104
> 
> 赞同：1
> 
> 时间：2013-01-03T16:35:59.743
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, paperclip

如果我将两个文件名相似的文件保存到同一个目录中，一个会覆盖另一个。如何使按以下方式工作，假设目录中已经有picture.jpg，如果我回形针将另一张picture.jpg上传到同一目录中，它会自动将其重命名为picture-1.jpg等等. 提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:55:16.250

将附件配置为包含记录的主 ID，以确保不会有重复... 像这样：

```
:path => ':rails_root/public/system/assets/photos/:id/:style.:extension',
:url =>                    '/system/assets/photos/:id/:style.:extension' 
```

需要明确的是...上面还删除了原始文件名，但是还有一个扩展关键字也可以将其恢复...我只是从不使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T16:38:26.657

如果你愿意，你可以[随机化文件名。](http://trevorturk.com/2009/03/22/randomize-filename-in-paperclip/)

# javascript - 如何在jsp中的Javascript中访问映射键，值（java.util.Map）？

> ID：14143105
> 
> 赞同：0
> 
> 时间：2013-01-03T16:35:59.880
> 
> 标签：javascript, java, jsp, dom-events

问题是我无法在 Javascript 函数中获取映射键及其值（又是一个 Java ArrayList）

我的代码如下：

```
function myset() {
    var mymap="${range}";//range is a java map which is accessible here

// Here I need to display the mymap key and its value (which is an arraylist)
}

<select id="bn" name="bn" onchange="myset()">
</select> 
```

range 是一个 Java 映射，如下所示：

```
List<String> l=new ArrayList<String>();
l.add("123");
l.add("456");
l.add("789");
List<String> ls=new ArrayList<String>();
l.add("222");
l.add("456");
l.add("333");
Map<String,List<String>> m=new HashMap<String,List<String>>();
m.put("123", l);
m.put("456", ls); 
```

你能告诉我如何在上面的 Javascript 函数中显示地图键及其相关的数组列表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:44:10.080

```
var mymap="${range}";//range is a java map which is accessible here 
```

这样做，你只是在做

```
var mymap="#{range.toString()}" 
```

（或者，如果您定义了转换器，则为它返回的值）。

您将需要迭代 Java 代码以创建将填充地图的 JS 代码。

认为 JS 和 Java 在完全分离的 VM 中工作（很可能在不同的计算机上），所以你不能只传递对 Java 的引用并期望它在 JS 中“工作”。您必须复制所有数据。

# python - Scrapy返回项目以外的数据

> ID：14143113
> 
> 赞同：1
> 
> 时间：2013-01-03T16:36:33.243
> 
> 标签：python, web-crawler, scrapy

我写了一个蜘蛛来爬过一个网页（在我从这里得到的所有帮助下），它返回具有所有必需属性的项目。它返回格式为 {"count": 24, "Gender": "Female", "Age": "25-34", "Location": "Edinburgh", "Name": "abcde"} 的字典

我希望它只返回一个列表，如：[24, "Female", "25-34", "Edinburgh", "abcde"]

然后我可以将其存储在文件中。我怎样才能做到这一点 ？

编辑：但我无法返回字典值。如果我使用 return item.values() 我得到错误... Spider 必须返回 Request、BaseItem 或 None 得到 unicode

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T18:17:34.313

我可能误解了这个要求，但是如果你希望你的输出文件看起来更像一个列表而不是字典，那么也许你应该输出一个 csv 文件而不是 json 文件？csv 提要导出使用[CSVItemExporter](https://scrapy.readthedocs.org/en/latest/topics/exporters.html#csvitemexporter)类，并将生成以下形式的输出：

```
count,Gender,Age,Location,Name 
24,Female,25-34,Edinburgh,abcde 
```

应该可以通过运行以下命令来实现这一点：

```
scrapy crawl dmoz -o items.csv -t csv 
```

如果要生成不带标题的输出，则需要子类 CSVItemExporter 并将`include_headers_line`参数设置为 False，因为该参数的默认值为 True。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T16:43:52.687

您只能从字典中提取值并做任何您想做的事情：

```
>>> d = {"count": 24, "Gender": "Female ", "Age": "25-34", "Location": "Edinburgh", "Name": "abcde"}
>>>
>>> d.values()
[24, 'Female ', '25-34', 'Edinburgh', 'abcde'] 
```

# jquery - 使用 ScrollTo 将列表滚动到 div 的顶部

> ID：14143114
> 
> 赞同：1
> 
> 时间：2013-01-03T16:36:45.053
> 
> 标签：jquery, scrollto

我正在尝试获取一长串名称以使用导航（az）。单击导航上的字母会将正确的名称滚动到 div 的顶部。

我正在使用 ScrollTo 插件来完成这项工作。一切都很好，除了靠近列表底部的名称。它们不会滚动到 div 的顶部。

这是我的例子：jsfiddle.net/QMgMB/

如果您单击 d、e、f，您将看到它有效。但是点击Q按钮，Q名称部分并没有到顶部。

我似乎无法弄清楚为什么。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:39:53.593

因为它到达了 div 的末尾。你不能滚动更多。您可以添加一些额外的“行尾”来模拟您的行为`<br>`，如下所示：http: [//jsfiddle.net/QMgMB/1/](http://jsfiddle.net/QMgMB/1/)

# sql - 如何查询 SQL Server 2000 数据库中的数据库角色列表？

> ID：14143115
> 
> 赞同：16
> 
> 时间：2013-01-03T16:36:46.780
> 
> 标签：sql, sql-server-2000, sql-server-administration

在 Sql Server 2000 中，是否可以通过 SQL 查询返回给定数据库中存在的数据库角色的完整列表？

我知道可以通过扩展 SQL Server Management Studio 中的安全、角色和数据库角色节点来查看这些角色，但我想通过可以以编程方式解析的查询来获取它们。

![有问题的节点的屏幕截图](../Images/768558c6d35d5862f91f29b6c08e6d1e.png)

澄清一下，我不是在寻找具有角色的用户列表，而只是寻找角色本身的列表。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-03T16:51:32.410

SQL Server 2000 中的每个数据库都有一个[sysusers 系统表](http://msdn.microsoft.com/en-us/library/aa260592%28v=sql.80%29.aspx)

大概是这样的

```
Use <MyDatabase>

Select 
  [name]
From
  sysusers
Where
  issqlrole = 1 
```

会成功的

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-06-15T21:44:55.787

使用我们的 SQL Server 2016 这对我有用

```
Use Sandbox
Select
  name, principal_id
From
  sys.database_principals 
Where
  type = 'R' and principal < 16384 
```

其中 Sandbox 是我的数据库的名称。（我在 ESRI ArcGIS Enterprise 10.6 中使用 SQL。）

# c# - 如何修复“对象引用未设置为对象的实例。” 使用 WPF CR 查看器控件时

> ID：14143116
> 
> 赞同：0
> 
> 时间：2013-01-03T16:36:50.123
> 
> 标签：c#, wpf, crystal-reports

我正在按照 MVVM 模式制作 WPF 应用程序。

我有一个带有导航控件的窗口以及一个用于保存单个用户控件的占位符（内容控件）。主窗口的视图模型维护一个打开的子视图模型数组，并具有一个“当前视图”属性，该属性指向数组中的单个子视图模型。然后将此“CurrentView”属性绑定到主窗口上的 contentcontrol 占位符。视图模型都通过数据模板设置了特定的视图（用户控件）。

当“CurrentView”属性设置为子视图模型之一时，适当的用户控件视图将显示在主窗口的 contentcontrol 占位符中。一次只显示一个子视图模型，其余的只是放在数组中，等待通过设置为 CurrentView 属性来显示。

到目前为止，我对这种模式没有任何问题。它适用于所有标准 WPF 控件，没有任何问题。我的问题是只有当我的一个用户控件承载 WPF Crystal Report Viewer 时。

我可以将当​​前视图设置为具有水晶报表报告文档的视图模型。我加载报告文档并将其公开为公共依赖属性。此视图模型的数据模板化用户控件具有 WPF Crystal Report Viewer 控件。我已向报表查看器控件添加了一个附加属性，以允许我绑定到 .ViewerCore.ReportSource。我将视图模型中的报告文档绑定到附加属性，瞧！所有这些都按预期工作。我编译我的程序并导航到水晶报表查看器......它加载绑定的报表并正确显示它。

但是，现在，当我离开时（用不同的视图模型替换主窗口上的“CurrentView”属性）我得到一个错误。

起初，我得到“未设置属性：窗口”。经过一番搜索，我发现 Crystal Report Viewer 试图显示一个消息框，但不知道它的所有者窗口，所以它不能。为了解决这个问题，我将水晶报表查看器的所有者设置为用户控件加载事件中的主窗口。这摆脱了“属性未设置：窗口”错误。

我重新编译，导航到报告，它加载正常。我离开了，现在我得到一个弹出窗口，上面写着“对象引用未设置为对象的实例。”我点击了确定，弹出窗口消失了，我的程序继续运行，没有任何明显的问题。我可以导航回报告没有任何麻烦，但是每次我离开时都会显示此弹出窗口。

我无法调试弹出窗口的来源，因为如果我删除所有者，它会被查看者无法找到所有者以显示错误所吞噬。

对不起，冗长的描述。该项目非常大，因此尝试拟合源代码将比描述它占用更多的空间。如果您想查看我的代码的任何特定部分，只需发表评论，我会更新我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:30:00.393

我尝试了一堆不同的断点，并且能够将其缩小到我附加的依赖属性以绑定到 ViewerCore.ReportSource。当我更改为不同的视图时，此属性意外设置为 null，并且附加的属性没有考虑到这一点。如果将来有人遇到类似问题，您可以使用以下方法：

```
public static class DependencyPropertyHost
{
    public static readonly DependencyProperty ReportSourceProperty = DependencyProperty.RegisterAttached("ReportSource", typeof(ReportDocument), typeof(DependencyPropertyHost), new PropertyMetadata(ReportSourceChanged));

    public static ReportDocument GetReportSource(DependencyObject obj)
    {
        return obj.GetValue(ReportSourceProperty) as ReportDocument;
    }

    public static void SetReportSource(DependencyObject obj, ReportDocument value)
    {
        obj.SetValue(ReportSourceProperty, value);
    }

    private static void ReportSourceChanged(object sender, DependencyPropertyChangedEventArgs args)
    {
        var viewer = sender as CrystalReportsViewer;
        if (viewer != null && args.NewValue != null)
        {
            viewer.ViewerCore.ReportSource = args.NewValue;
        }
    }
} 
```

# javascript - 将 url 与 javascript 匹配

> ID：14143120
> 
> 赞同：0
> 
> 时间：2013-01-03T16:37:13.757
> 
> 标签：javascript, jquery

我有这样的东西。并使用它来匹配来自 url 的字符串并触发 jquery 以隐藏生成的 div。我究竟做错了什么？当我传递警报而不是 .hide() 时，它会触发。

```
if(window.location.href.indexOf("HairTransformation-Press") > -1) {
        $('.product').hide();
    } 
```

这是更新的代码

```
$(window).load(function (){
    var myString = "HairTransformation-Press";

if(window.location.href.toLowerCase().indexOf(myString.toLowerCase()) > -1) {
        $('.product').hide();
        }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:40:14.600

尝试这个

```
var myString = "HairTransformation-Press";

if(window.location.href.toLowerCase().indexOf(myString.toLowerCase()) > -1) {
        $('.product').hide();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:41:42.467

你有一个带有 classname 的元素`"product"`吗？如果是，那么我认为您的脚本是在实际加载 DOM 之前执行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T16:49:22.447

我认为匹配不是问题，因为正在显示您的警报。也许你使用了错误的类名（.product 可能是你的 ID，应该是#product），或者没有在你的 html 文件中对 jquery 库的引用之前放置对你的 .js 文件的引用。

如果您使用的是 firefox 或任何其他适合您的浏览器的开发工具，请安装 firebug，并检查 javascript 控制台的错误日志。

# php - 使用php从Android读取json数据

> ID：14143121
> 
> 赞同：0
> 
> 时间：2013-01-03T16:37:12.893
> 
> 标签：php, android, json

我正在尝试使用 php 服务器从反编译的 Android 应用程序中读取数据。我曾经`wireshark`了解应用程序发送哪些类型的数据，结果是：

> {"initType":"第一次","参数":true,"details":................}

我试图捕获这些数据并将它们插入到具有此 php 代码的文件中：

```
<?php  
$json = $_POST["initType"];  
$decoded = json_decode($json, TRUE);  
if ($decoded === FALSE) {  
    throw new Exception('Bad JSON format.');  
}  
$file_handle = fopen('tmp.json', 'w');  
fwrite($file_handle, $decoded);  
fclose($file_handle);  
?> 
```

该文件已正确生成，但为空。错误是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:45:56.390

因为`$decoded`是一个数组，所以使用循环将其写入文件或将编码后的 JSON 写入文件 ( `$json`)。尝试使用这个：

```
fwrite('tmp.json', print_r($decoded, TRUE)); 
```

或者：

```
file_put_contents('tmp.json', print_r($decoded, TRUE)); 
```

**更新（根据您的评论）：**

如果您运行 a`print_r($decoded)`并且它没有打印任何内容，则传入的 JSON 对象的解码过程存在问题。我建议检查此内容以确保其格式正确。JSON 格式化是一项严格的业务，如果您缺少双引号或括号，它将停止您的最终目标。首先回显`$json`( `$_POST["initType"]`) 并将格式与在线发布的示例进行比较（只是谷歌“json 格式”）。我可以告诉你，对我来说突出的一件事是：（`"parameters":true`从你上面的例子）。我强烈怀疑密钥`true`应该用双引号引起来。如果您肯定 JSON 变量在语法上是正确的，我想我不会再有任何帮助了。一旦`json_decode()`你做对了，用来产生一个非常直接的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:47:14.780

根本不要解码 json - 这只会带来尝试序列化 burmat 在他的回答中提到的数组的问题。

立即将 json 内容写入文件：

```
fwrite($file_handle, $json); 
```

此外，虽然我不是 PHP 专家，但您似乎错误地访问了 post 请求的正文。请参考[以下帖子](https://stackoverflow.com/a/8945912/1108032)。

# c#-4.0 - 不同的上下文可以创建相同的对象吗？

> ID：14143122
> 
> 赞同：0
> 
> 时间：2013-01-03T16:37:22.267
> 
> 标签：c#-4.0, entity-framework-4.1

我正在将 Entity Framework 4.4 用于现有的 .NET 4.0 应用程序。它有一些模块化，我需要`DbContext`每个模式都有一个。例如

```
public class AnimalContext : DbContext // animal schema
{
    public IDbSet<Dog> Dogs { get; set; }

    public IDbSet<Cat> Cats { get; set; }
} 
```

和

```
public class FruitContext : DbContext // fruit schema
{
    public IDbSet<Apple> Apples { get; set; }

    public IDbSet<Pear> Pears { get; set; }
} 
```

例如，某些实体引用不同模式中的实体

```
public class Dog
{
    public Apple Apple { get; set; }
} 
```

无论如何要确保由不同上下文创建的实体是相同的？IE

```
var animals = new AnimalContext()
var fruits = new FruitContext()

var dog = animals.Dogs.First();
var apple = fruits.Apples.First(x => x == apple)

// and object.ReferenceEquals(apple, dog.Apple) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:34:55.970

Entities created by different contexts (even different instances of the same context type) will not be same.

IMHO you must handle it yourselves by not allowing `AnimalContext` to create instances of objects defined in `FruitContext` - in your case `Apple` entity and assigning `Apple` to `Dog` after it is loaded by `FruitContext` - you will need to expose `AppleId` property on `Dog`. This could be probably somehow automated by handling the inter connection in `ObjectContext.ObjectMaterialized` event handler but it can slow down your object loading and it can make your contexts tightly coupled.

You can use either `NotMapped` attribute on `Apple` property or dog or use `Ignore` in fluent mapping for `Apple` class or `Apple` property in `AnimalContext`'s mapping definition. If `Apple` has inverse navigation property to `Dog`, you will also have to ignore `Dog` on `FruitContext`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:23:04.967

为了确保由不同`DbContext`的 s 创建的实体是相同的，它们必须共享一个`ObjectContext`可以通过`DbContext`构造函数传入的公共。

使用 Code First 方法创建公共`ObjectContext`的方法是通过`DbModelBuilder`- 推荐的访问其中之一的方法是通过覆盖[`OnModelCreating(DbModelBuilder)`](http://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext.onmodelcreating%28v=vs.103%29.aspx)继承自 的类上的方法`DbContext`。

例如：

```
public class MasterContext : DbContext
{
    public MasterContext(string nameOrConnectionString)
        : base(nameOrConnectionString)
    {
    }

    public static implicit operator ObjectContext(MasterContext obj)
    {
        if (obj == null)
        {
            throw new ArgumentNullException("obj");
        }

        var adapter = (IObjectContextAdapter)obj;

        return adapter.ObjectContext;
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);

        modelBuilder.Entity<Dog>();
        modelBuilder.Entity<Cat>();
        modelBuilder.Entity<Apple>();
        modelBuilder.Entity<Pear>();
    }
}

public class AnimalContext : DbContext
{
    public AnimalContext(ObjectContext context)
        : base(context, false)
    {
    }

    public IDbSet<Dog> Dogs { get; set; }

    public IDbSet<Cat> Cats { get; set; }
}

public class FruitContext : DbContext
{
    public FruitContext(ObjectContext context)
        : base(context, false)
    {
    }

    public IDbSet<Apple> Apples { get; set; }

    public IDbSet<Pear> Pears { get; set; }
}

//...
var master = new MasterContext("my connection")
var animals = new AnimalContext(master)
var fruits = new FruitContext(master)

var dog = animals.Dogs.First();
var apple = fruits.Apples.First(x => x == apple)

// Passes
Debug.Assert(object.ReferenceEquals(apple, dog.Apple)) 
```

这里要注意的重要一点是，`OnModelCreating`必须`MasterContext`注册所有从属服务器中使用的每种类型`DbContexts`（您显然可以对此进行简化以自动注册您需要的所有内容）。

# javascript - '@' 符号在 Javascript、Coffeescript 或 Jquery 中是否有特殊含义？

> ID：14143123
> 
> 赞同：40
> 
> 时间：2013-01-03T16:37:23.163
> 
> 标签：javascript, jquery, coffeescript, grammar

我有一些看起来像的代码

```
self = @ 
```

然后稍后它正在使用`@someMethodName`或`self.someMethodName`

`@`有什么特殊含义吗？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-01-03T16:40:13.700

`@`不是 javascript 标识符的有效字符。标识符只能包含`$`, `_`, 数字和字母。

在咖啡脚本中，[`@`表示`this`](https://engineering.linkedin.com/coffeescript-javascript-thats-easy-eyes-0).

> CoffeeScript 有一些与 this 关键字相关的不错的特性。首先，CoffeeScript 使用 @ 符号作为 this.. 的简写。例如，@foo 等价于 this.foo。其次，如果您在函数的参数中使用 @ 符号，CoffeeScript 会自动将这些值分配为对象的属性。

编辑：就 jQuery 而言，与 javascript 相同的标识符规则适用，因为 jQuery 只是 javascript。对于`@`jQuery 中的其他用途，请参阅[此问题](https://stackoverflow.com/questions/2635181/jquery-1-4-x-and-the-symbol)或[文档](http://api.jquery.com/category/selectors/attribute-selectors/)。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-03T16:40:20.257

`@``this`是咖啡脚本中的快捷方式

所以

```
self = @ 
```

是咖啡脚本：

```
var self = this; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-02T14:31:43.057

自从 CoffeeScript 的设计已经过去了几年，CoffeeScript 中提出的所有内容并没有成为 ECMA 脚本。`this`建议将其用于[装饰器](https://github.com/tc39/proposal-decorators)，而不是用作 的快捷方式。

# vhdl - 努力等待 VHDL 传输完成

> ID：14143127
> 
> 赞同：0
> 
> 时间：2013-01-03T16:37:36.853
> 
> 标签：vhdl, fpga, spi

我需要进行持续的 SPI 通信以从我拥有的双通道 ADC 读取值，并且为此编写了一个状态机。但是，它似乎没有进入读取第二个通道的状态，我不知道为什么。这是VHDL ...

```
SPI_read: process (mclk)
                                                        --command bits: Start.Single.Ch.MSBF....
    constant query_x: unsigned(ADC_datawidth-1 downto 0) := "11010000000000000";    -- Query ADC Ch0 ( inclinometer x-axis)
    constant query_y: unsigned(ADC_datawidth-1 downto 0) := "11110000000000000";    -- Query ADC Ch1 ( inclinometer y-axis)

begin

    if rising_edge(mclk) then

        -- when SPI is not busy, change state and latch Rx data from last communication
        if (SPI_busy = '0') then

            case SPI_action is
                when SETUP => 
                    SPI_pol <= '0'; -- Clk low when not active
                    SPI_pha <= 1;       -- First edge is half an SCLK period after CS activated
                    SPI_action <= READ_X;
                when READ_X =>
                    SPI_Tx_buf <= query_x; -- Load in command
                    y_data <= "00000" & SPI_Rx_buf(11 downto 1);
                    SPI_send <= '1';
                    SPI_action <= READ_Y;
                when READ_Y =>
                    SPI_Tx_buf <= query_y; -- Load in command
                    x_data <= "00000" & SPI_Rx_buf(11 downto 1);
                    SPI_send <= '1';
                    SPI_action <= READ_X;
            end case;

        else
            SPI_send <= '0'; -- Deassert send pin
        end if;

    end if;

end process SPI_read; 
```

该命令被发送到 Tx 缓冲区，最后接收到的数据的值被写入一个信号，该信号输出到一些七段显示器。需要来自 SPI_send 的脉冲来启动传输，启动时，SPI_busy 设置为高电平，直到传输完成。

现在它只会通过 SPI 发送 query_x，我可以知道这一点，因为我可以在示波器上看到它。然而，有趣的是，它向两个显示器输出相同的值，这让我认为它仍在进入它的 READ_Y 状态，但没有改变它输出的 Tx 数据。

我已经盯着这段代码好几个小时了，我想不通。有时一双新鲜的眼睛会让生活更轻松，所以如果你发现了什么，请告诉我。此外，我对处理这个问题的更好方法的建议非常开放，我只是在学习 VHDL，所以我什至不确定我是否以正确的方式做事！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T01:19:46.203

将我迄今为止的评论总结为答案。

使用您的 SPI 主组件模拟此过程/模块。

您的方法通常是正确的，但我建议您稍微重新构建您的状态机，以便在每个 spi 事务（wait_x，wait_y）之间放置明确的等待状态，并且可能在模块之间进行更强大的握手，即保持 read_x 直到忙碌高，然后留在 wait_x 直到忙变低。

看起来 send 被断言了两个周期，并且您在每个周期都通过 read_x 和 read_y 进行转换。 ![时序图](../Images/14be0a96b7bbfa257f594cc11b62b574.png)

来自这个程序 [http://wavedrom.googlecode.com/svn/trunk/editor.html](http://wavedrom.googlecode.com/svn/trunk/editor.html) 与此来源：

```
{ "signal" : [
  { "name": "clk",           "wave": "P........" },
  { "name": "busy",          "wave": "0..1.|0..1"},
  { "name": "SPI_Action",    "wave": "====.|.==.",   "data": ["SETUP", "READ_X", "READ_Y", "READ_X", "READ_Y", "READ_X", "READ_Y", ] },
  { "name": "SPI_send",      "wave": "0.1.0|.1.0",   "data": ["0", "1", "Load", "Start","WaitA"] },
  { "name": "SPI_Tx_buf",    "wave": "x.===|..==", "data": ["query_x","query_y","query_x","query_y","query_x"],},
]} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:23:48.857

我必须同意大卫提出的问题并添加一些注释。

您的代码有一些不太好的地方，首先，您的状态列表中必须有一个**“当其他人=>”**。除了 SPI_send，您的所有信号似乎都没有默认值。将状态机放在 if 语句中也不是一个好主意。如果你必须这样做，那么你必须在这两种情况下设置所有信号，否则你最终会得到锁存器而不是触发器。一种简单的方法是将代码请求时的所有信号设置为默认值，然后在需要时更改它们。

这样，综合工具就知道如何处理它们并且您得到正确的结果。

好吧，这是来自 Siemence 的 VHDL-for-synthesis 文档：

> **如果在 if 语句的所有可能的**分支中***没有为信号或变量赋值**，则推断为锁存器*。如果不打算推断锁存器，则必须**在语句的所有分支中**显式地为信号或变量赋值。**

 **您可以在以下网址找到 PDF 格式的指南：[http ://web.ewu.edu/groups/technology/Claudio/ee360/Lectures/vhdl-for-synthesis.pdf](http://web.ewu.edu/groups/technology/Claudio/ee360/Lectures/vhdl-for-synthesis.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T11:58:58.223

您正在按照正确的基本思路进行思考，但是您的状态机有很多不完全正确的事情 - 正如其他答案所说 - 这些在模拟中很容易发现。

例如

```
 when READ_X =>
            SPI_Tx_buf <= query_x; -- Load in command
            y_data <= "00000" & SPI_Rx_buf(11 downto 1);
            SPI_send <= '1';
            SPI_action <= READ_Y; 
```

现在，如果 SPI_Busy 在第二个周期内保持低电平，这显然不会停留在状态 READ_X，而是直接转换到 READ_Y，这可能不是您想要的。

更正常的状态机会将状态视为最外层，并对每个状态的输入信号进行不同的解释：

```
 case SPI_Action is             
      when READ_X => 
                     if SPI_Busy = '0' then    -- Wait here if busy
                        SPI_Tx_buf <= query_x; -- Load in command
                        y_data <= "00000" & SPI_Rx_buf(11 downto 1);
                        SPI_send <= '1';
                        SPI_action <= READING_X;
                     end if;
      when READING_X =>
                     if SPI_Busy = '1' then   -- command accepted
                        SPI_action <= READ_Y; -- ready to send next one
                     end if;
      when READ_Y => 
                     if SPI_Busy = '0' then    -- Wait here if busy 
```

可以看到，这个版本把 Busy 信号当作握手，只有在 Busy 改变状态时才会进行。我敢肯定，如果您愿意，您可以使您的方法（如果最外层）起作用，但是您必须自己弄清楚如何应用握手原则。

也没有读取 X 或 Y 的“空闲”状态；该 SM 将尽可能快地交替读取 X 和 Y。通常，您会同时读取它们，然后返回空闲状态，直到其他一些开始信号命令您离开空闲并执行一组新的读取。

您还可以使用“当其他人”子句使状态机更加健壮。如果您保证涵盖所有定义的状态，这不是必须的，但它可以使维护更容易。另一方面，如果没有这样的子句，编译器会让你知道任何未发现的状态，以防出错。

有一种说法是“当其他人”子句是必不可少的，综合工具从“当其他人”子句生成更安全但不太优化的状态机。然而，有合成属性或命令行选项来控制合成工具如何生成状态机。**

# php - 使用 PHP 获取 (mp4/flv) 视频的 (m:s) 持续时间？

> ID：14143133
> 
> 赞同：0
> 
> 时间：2013-01-03T16:37:49.013
> 
> 标签：php, mp4

任何想法如何做到这一点？我使用 flv 和 mp4 视频，所以欢迎这两种选择。

我有一个想法，根据视频的文件大小计算每秒比特率，这是我的最后一个选择，但希望有更好的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:40:57.337

听起来[http://code.google.com/p/php-mp4info/](http://code.google.com/p/php-mp4info/)可能是答案。它是一个简单的 PHP 类，用于从基于 MP4 的文件（例如 MP4、M4V 和 F4V）中读取 MP4 元数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:41:45.880

您很可能需要像[GetID3这样的第 3 方类或像](http://getid3.sourceforge.net/)[ffmpeg](http://ffmpeg-php.sourceforge.net/)这样的扩展。

```
$meta= new \getID3();
$file = $meta->analyze($filename);

echo("Duration: ".$file['playtime_string'].
" / Dimensions: ".$file['video']['resolution_x']." wide by ".$file['video']['resolution_y']." tall".
" / Filesize: ".$file['filesize']." bytes<br />"); 
```

请参阅[如何在 PHP 中获取视频时长、尺寸和大小？](https://stackoverflow.com/questions/4847752/how-to-get-video-duration-dimension-and-size-in-php)更多细节。

# ios - iOS MapKit 不要求位置权限

> ID：14143134
> 
> 赞同：-1
> 
> 时间：2013-01-03T16:37:53.593
> 
> 标签：ios, location, mapkit

似乎一旦用户拒绝了应用程序在地图上定位她的权限，任何后续调用`[locationManager startUpdatingLocation]`都会失败，但不会像 iPhone 地图应用程序那样自动提示用户在设置中设置正确的权限。

这种行为是针对 iOS6 的，还是有办法强制 MapKit 再次询问用户是否允许使用她的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:43:14.413

这种行为是有意的。一旦用户拒绝了该权限，那么您就不能在每次应用启动时都询问它，如果这样做的话，用户会非常恼火。

如果用户想稍后授予权限，他需要转到设置应用程序并设置必要的权限。

所有类型的权限都是一样的，比如位置服务、推送通知、联系权限、照片库等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T19:17:00.007

您应该使用委托方法 locationManager:didFailWithError: 并查找 kCLErrorDenied。

# objective-c - “加权”随机数生成器

> ID：14143135
> 
> 赞同：4
> 
> 时间：2013-01-03T16:37:57.573
> 
> 标签：objective-c, ios

我目前正在使用以下代码从数组中获取随机元素。我将如何更改代码，以便它返回一个按我希望它出现的百分比加权的元素？例如，我希望索引 0 处的元素出现 27.4% 的时间，但索引 7 处的元素仅出现 5.9% 的时间。

```
NSArray *quoteArray = @[    @"quote1",    @"quote2",    @"quote3",    @"quote4",    @"quote5",    @"quote6",    @"quote7",    @"quote8",    ];    

NSString *quoteString;

int r = arc4random() % [quoteArray count];
if(r<[rewardTypeArray count])
    quoteString = [quoteArray objectAtIndex:r]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T17:05:48.997

我会使用一个浮点数组（包裹在 NSNumber 中）对象。

每个对象代表一个百分比。在这种情况下，您将拥有一个包含 8 个对象的数组：

> 对象 1：@27.5；
> 
> ...
> 
> 对象 7：@5.9。

然后你得到一个从1到100的随机数。如果你想要更高的精度，你也可以得到一个小数部分的随机数，精度不影响效率，也不影响使用的内存。

然后，当您获得遍历所有数组的数字时，跟踪索引和您拥有的百分比。您使用浮点数来汇总所有满足的百分比，并且仅当总百分比大于等于您拥有的百分比时才停止。

**例子**

```
NSArray* percentages= @[ @27.4 , ... , @5.9];
float randomNumber= arc4random_uniform(100) + (float)arc4random_uniform(101)/100;  
NSUInteger n=0;
float totalPercentage= 0.0;
for(NSUInteger i=0; i<percentages.count; i++)
{
    totalPercentage+= [ percentages[i] floatValue ];
    if( totalPercentage >= randomNumber)  // This case we don't care about
                                          // the comparison precision
    {
        break;
    }
    n++;
}
// Now n is index that you want 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T16:42:00.753

最简单的方法是根据您希望百分比的细粒度生成一个随机数。要计算到百分之十分之一，您可以生成 0-1000 之间的值，并且您可以随机生成的 274 个值将是第一个元素。59 个值对应于元素 7。

例如：

```
0-273    = index 1 27.4%
274-301  = index 2 2.7%
302-503  = index 3 20.1%
504-550  = index 4 4.6%
551-700  = index 5 14.9%
701-941  = index 6 24%
942-1000 = index 7 5.9% 
```

百分比加起来不正确，所以我在某处做错了数学，但你明白了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T16:42:08.907

您可以使用计数器创建另一个数组，该数组将持续跟踪每个元素的生成次数。如果该计数器小于您的目标，则让该索引进入您的 r，否则重新生成。

# javascript - jQuery - 修复动画

> ID：14143136
> 
> 赞同：1
> 
> 时间：2013-01-03T16:38:08.717
> 
> 标签：javascript, jquery, jquery-animate

我正在创建一个新的“打地鼠”风格的游戏，孩子们必须根据问题打出正确的数字。

我让数字从一个设置的顶部位置动画到另一个具有随机宽度的位置，这样它们看起来就像像气泡一样漂浮起来。

我遇到的唯一问题是，有时数字会出现故障，并且它们的宽度会突然变化，使其看起来从容器的一侧跳到另一侧。

我能想到的唯一解释是宽度必须在我试图寻找的地方重置。

我是盲人还是其他原因，有人可以帮我找到问题的根源。

这是映射数字的代码...

```
function randomFromTo(from, to) {
    return Math.floor(Math.random() * (to - from + 1) + from);
}

function scramble() {
    var children = $('#container').children();
    var randomId = randomFromTo(1, children.length);
    moveRandom("char" + randomId);
}

function moveRandom(id) {
    var cPos = $('#container').offset();
    var cHeight = $('#container').height();
    var cWidth = $('#container').width();
    var bWidth = $('#' + id).width();

    var bHeight = $('#' + id).css(
        'top', '400px'
    ).fadeIn(1000).animate({
    '   top': '-100px'
    }, 10000).fadeOut(1000);

    maxWidth = cPos.left + cWidth - bWidth;
    minWidth = cPos.left;
    newWidth = randomFromTo(minWidth, maxWidth);

    $('#' + id).css({
        left: newWidth
    }).fadeIn(1000, function () {
        setTimeout(function () {
            $('#' + id).fadeOut(1000);
            window.cont++;
        }, 1000);
    }); 
```

这也是一个工作小提琴，所以你可以看到我正在谈论的问题：http: [//jsfiddle.net/pUwKb/26/](http://jsfiddle.net/pUwKb/26/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:50:14.180

问题是您正在为已经动画的 ID 重新输入 moveRandom 函数。新的宽度计算会导致在已经动画的移动过程中重新分配片段时似乎跳跃。解决此问题的一种方法是拒绝您已经制作动画的片段的新片段运动。我修改了您的 jsFiddle 并使用以下代码对其进行了修复：

```
// Keep track of the pieces actually moving
var currentMoving = [];

function moveRandom(id) {
    // If this one's already animating, skip it
    if ($.inArray(id, currentMoving) !== -1) {
        return;
    }

    // Mark this one as animating
    currentMoving.push(id);

    var cPos = $('#container').offset();
    var cHeight = $('#container').height();
    var cWidth = $('#container').width();
    var bWidth = $('#' + id).width();

    var bHeight = $('#' + id).css('top', '400px').fadeIn(1000).animate({
        'top': '-100px'
    }, 10000).fadeOut(1000);

    maxWidth = cPos.left + cWidth - bWidth;
    minWidth = cPos.left;
    newWidth = randomFromTo(minWidth, maxWidth);

    $('#' + id).css({
        left: newWidth
    }).fadeIn(1000, function () {
        setTimeout(function () {
            $('#' + id).fadeOut(1000);

            // Mark this as no longer animating                
            var ix = $.inArray(id, currentMoving);
            if (ix !== -1) {
                currentMoving.splice(ix, 1);
            }

            window.cont++;
        }, 1000);
    });
} 
```

[在这里](http://jsfiddle.net/GvNB8/)分叉 jsFiddle 。

**编辑**：OP想要一次显示更多的div而不加快动画速度。为此，我添加了 20 个字符 div（每一个都是前 10 个数字的副本），稍微修正了保护代码，更改了 CSS 以按类指定字符的图像，然后将 20 个动画的限制设置为给定的时间。我还围绕拒绝已经动画的作品设置了一个循环，以选择另一个。我做了一些其他的小改进。[在这里](http://jsfiddle.net/GvNB8/1/)更新了 JSFiddle 。

# perl - 在 perl 脚本中使用 CPAN

> ID：14143140
> 
> 赞同：0
> 
> 时间：2013-01-03T16:38:29.443
> 
> 标签：perl, cpan

我正在编写一个使用一些 CPAN 模块的脚本。我该怎么做才能让同事无需手动安装这些 CPAN 模块就可以使用我的脚本？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:59:06.880

只需将它们标记为脚本的依赖项。当他安装你的脚本时，如果需要，`cpan`/`cpanm`也会自动安装它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T23:30:24.433

如果要发货和安装，我绝对建议将其打包为 CPAN 风格的发行版，并以正常方式声明依赖项（注意模块：[Dist::Zilla](https://metacpan.org/module/Dist%3a%3aZilla)、[Module::Build](https://metacpan.org/module/Module%3a%3aBuild)、[ExtUtils::MakeMaker](https://metacpan.org/module/ExtUtils%3a%3aMakeMaker)。

*但是*，有时可能会需要将依赖项与脚本本身一起发送。对于纯 perl 依赖项并玩了一点，[App::FatPacker](https://metacpan.org/module/fatpack)似乎工作正常（[cpanm](https://metacpan.org/module/App%3a%3acpanminus)自己使用它[）](https://raw.github.com/miyagawa/cpanminus/master/cpanm)。

# magento - 在 magento 中删除最近查看的产品将不起作用

> ID：14143141
> 
> 赞同：1
> 
> 时间：2013-01-03T16:38:29.803
> 
> 标签：magento

您好，我尝试通过 local.xml 删除最近查看的产品，但它不起作用，我不知道为什么。这是我的代码：

```
<?xml version="1.0"?> 
```

```
 <reference name="right">
    <action method="unsetChild"><alias>right.reports.product.viewed</alias></action>
    <action method="unsetChild"><alias>right.reports.product.compared</alias></action>
</reference>

<default>
    <action method="unsetChild"><name>right.reports.product.viewed</name></action>
     <action method="unsetChild"><name>right.reports.product.compared</name></action>
    <remove name="right.reports.product.viewed"/>
    <remove name="right.reports.product.compared"/>
</default> 
```

# jquery - 从视图中发布 Jquery 后，模型属性不刷新

> ID：14143142
> 
> 赞同：0
> 
> 时间：2013-01-03T16:38:37.027
> 
> 标签：jquery, ajax, xmlhttprequest

我的视图中有一个对话框，其中有一个包含复选框列表的编辑器模板。

这个想法是，用户进行选择并从对话框中点击选择按钮，向控制器操作方法发出请求，该方法返回更新的模型。

所以发生的事情是它确实成功地击中了控制器，返回了具有新模型属性值的更新视图，但我相信由于我没有正确刷新 DOM，新模型值不会反映在页面上。

我应该只刷新包含模型属性的 div 吗？或者做 .LOAD 而不是 .Post

```
$('#main').load('@Url.Action("Create", "RunLogEntry")', { $("#form").serialize() });

var RunDialog;

$(document).ready(function () {

    RunDialog = $("#runDatestreeview").dialog({ closeOnEscape: true, stack: false, autoOpen: false, modal: false, resizable: false, draggable: true, title: 'Select Run Dates:', width: 600, height: 500,
        buttons: { Select: function () {

            $.post("/RunLogEntry/Create",
              $("#form").serialize(),
               function (data) {
                   $('main').html(data);
               }, "json");
        },
            Cancel: function () {
                $(this).dialog("close");
            }
        }
    });

    $('#RunDatesChildDialogLink').click(function () {
        RunDialog.dialog('open');
        $("#runDatestreeview").parent().appendTo("form");
    });
    //    $("#runDatesList").appendTo("#runDatestreeview");     
}); 
```

**编辑**

**看法：**

```
@model RunLog.Domain.Entities.RunLogEntry
@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";

}
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/errorCode.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/runDates.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/testexception.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/runLogEntry.js")" type="text/javascript"></script>
<script type="text/javascript">
    var runlogListErrorsUrl = '@Url.Action("ListErrorCodes", "RunLogEntry")';

</script>
<fieldset>
    <legend>Enter a new Run Log Entry</legend>
    <div id="main">
    @using (Html.BeginForm("Create", "RunLogEntry", FormMethod.Post, new { id = "form", enctype = "multipart/form-data" }))
    {

        @Html.ValidationSummary(true)
        <div class="exception">@(ViewBag.ErrorMessage)</div>
        <div class="bodyContent">
            <span class="leftContent">Load List File (Select): </span><span class="rightContent">
                <input type="file" name="file" id="file1" style="width: 500px" />
            </span>
        </div>
        if (Model.LoadListStoredFileName != null)
        {
            <div class="bodyContent"> <span class="leftContent">Attached Load List: </span><span
            class="rightContent">
            @Html.ActionLink(Model.LoadListFileName, "Download", new { @file = Model.LoadListStoredFileName })
        </span> </div>
        }
        <div class="bodyContent">
            <span class="leftContent">Output File (Select): </span><span class="rightContent">
                <input type="file" name="file" id="file2" style="width: 500px" />
            </span>
        </div>
        if (Model.OutputStoredFileName != null)
        {
            <div class="bodyContent"> <span class="leftContent">Attached Output: </span><span
            class="rightContent">
            @Html.ActionLink(Model.OutputFileName, "Download", new { @file = Model.OutputStoredFileName })
        </span> </div>
        }
        <div class="bodyContent">
            <span class="leftContent">.LOG File(s) -Zip: </span><span class="rightContent">
                <input type="file" name="file" id="file3" style="width: 500px" />
            </span>
        </div>
        if (Model.AttachedLogFileName != null)
        {
            <div class="bodyContent"> <span class="leftContent">Attached Log File(s): </span><span
            class="rightContent">
            @Html.ActionLink(Model.AttachedLogFileName, "Download", new { @file = Model.AttachedLogFileName })
        </span> </div>
        }
        <div class="bodyContent">
            <span class="leftContent">Import Files: </span>
            <button name="submit" class="art-button" type="submit" value="Upload" style="width: 100px">
                Upload</button>
            <button name="submit" class="art-button" type="submit" value="Remove" style="width: 100px">
                Remove</button>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Operator")
            </span><span class="rightContent">
                @Html.DropDownList("OperatorID", String.Empty)
            </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Run ID")
            </span><span class="rightContent">[Generated] </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Run Start Date / Time")
            </span><span class="rightContent">
                @Html.EditorFor(model => model.RunDate)
                &nbsp;
                @Html.DropDownList("Hour", ListHelpers.HourList())
                :
                @Html.DropDownList("Minute", ListHelpers.Minute15List())
                &nbsp;
                @Html.DropDownList("AMPM", ListHelpers.AMPMList())
            </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("System")
            </span><span class="rightContent">
                @Html.DropDownList("SystemID", String.Empty)
            </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Run Type")
            </span><span class="rightContent">
                @Html.DropDownList("RunTypeID", String.Empty)
            </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Run Description")
            </span><span class="rightContent">
                @Html.TextAreaFor(model => model.RunDescription, new { style = "width: 600px; height=30px" })
            </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Assay Performance Issues")
            </span><span class="rightContent">
                @Html.DropDownList("AssayPerformanceIssues1", ListHelpers.YesNoList())
            </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Tests/Cycles Requested")
            </span><span class="rightContent">
                @Html.EditorFor(model => model.SPTestsRequested)
            </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Tests/Cycles Completed")
            </span><span class="rightContent">
                @Html.EditorFor(model => model.SPTestsCompleted)
            </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Run Status")
            </span><span class="rightContent">
                @Html.DropDownList("RunStatusID", String.Empty)
            </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Assay")
            </span><span class="rightContent">
                @Html.ListBoxFor(model => model.SelectedAssayIDs, new MultiSelectList(RunLog.Domain.Lists.GlobalList.AssayListItems(), "ID", "Name", Model.SelectedAssayIDs))
            </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Run Dates")
            </span><span class="rightContent"><span id="RunDatesChildDialogLink" class="treeViewLink">
                Click here to Select Run Dates</span>
                <br />
                <span id="RunDatesDisplayy" style="cursor: pointer; text-decoration: underline;">
                </span></span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Error Code")
            </span><span class="rightContent"><span id="ChildDialogLink" class="treeViewLink">Click
                here to Select Error Codes</span>
                <br />
                <span id="ErrorCodeDisplay" style="cursor: pointer; text-decoration: underline;">@(Model.ErrorDescription)</span>
                @Html.HiddenFor(model => model.ErrorDescription)
            </span>
        </div>
        <div id="runDatestreeview" title="Dialog Title" style="font-size: 10px; font-weight: normal;
            overflow: scroll; width: 400px; height: 450px;">
            <table class="grid" style="width: 600px; margin: 3px 3px 3px 3px;">
                <thead>
                    <tr>
                        <th>
                            Run Dates:
                        </th>
                        <th>
                            Minimum Replicate:
                        </th>
                    </tr>
                </thead>
                <tbody>
                    @Html.EditorFor(x => x.RunDatesDisplay)
                </tbody>
            </table>
        </div>
        <div class="bodyContent">
            @if (Model.TestExceptionDisplay != null && Model.TestExceptionDisplay.Count() > 0)
            {
                <span class="leftContent">
                    @Html.Label("Test Exceptions")
                </span><span class="rightContent"><span id="TestExceptionChildDialogLink" class="treeViewLink">
                    Click here to View Test Exceptions</span>
                    <br />
                    <span id="TestExceptionDisplayy"></span></span>
            }
        </div>
        <div id="testExceptiontreeview" title="Dialog Title" style="font-size: 10px; font-weight: normal;
            overflow: scroll; width: 800px; height: 450px; display: none;">
            <table class="grid" style="width: 600px; margin: 3px 3px 3px 3px;">
                <thead>
                    <tr>
                        <th>
                            Exception
                        </th>
                        <th>
                            Frequency
                        </th>
                        <th>
                            Comment
                        </th>
                        <th>
                            Replicate Range
                        </th>
                    </tr>
                </thead>
                <tbody>
                    @if (Model.TestExceptionDisplay != null)
                    {
                        @Html.EditorFor(x => x.TestExceptionDisplay)
                    }
                </tbody>
            </table>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Service Entry Request")
            </span><span class="rightContent">
                @Html.DropDownList("ServiceRequest", ListHelpers.YesNoList())
            </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Problem Description")
            </span><span class="rightContent">
                @Html.TextArea("ProblemDescription", new { style = "width: 600px; height: 30px" })
            </span>
        </div>
           if (Model.UserRole == "Admin" || Model.UserRole == "SuperUser")
           {
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Active")
            </span><span class="rightContent">
                @Html.CheckBoxFor(model => model.Active)
            </span>
        </div>
           }
           else
           {
        @Html.HiddenFor(model => model.Active)
           }
        <p>
            <input id="LogType" type="hidden" value="Run" />
            <input id="ID" type="hidden" value="0" />
            @if (Model.ExitCode == "1")
            {
                @Html.Hidden("ExitCode", Model.ExitCode)
            }
            else
            {
                <input id="ExitCode" type="hidden" value='0' />
            }
        </p>
        @Html.HiddenFor(model => model.MaxReplicateId)
        @Html.HiddenFor(model => model.MinReplicateId)
        @Html.HiddenFor(model => model.OutputFileName)
        @Html.HiddenFor(model => model.OutputStoredFileName)
        @Html.HiddenFor(model => model.LoadListFileName)
        @Html.HiddenFor(model => model.LoadListStoredFileName)
        @Html.HiddenFor(model => model.AttachedLogFileName)
        @Html.HiddenFor(model => model.AttachedMultipleLogFileNames)
        @Html.HiddenFor(model => model.MinTestCompletionDate)
        @Html.HiddenFor(model => model.MaxTestCompletionDate)
        @Html.HiddenFor(model => model.UserRole)
        @Html.HiddenFor(model => model.Active)

        <div class="bodyContent">
            <span class="leftContent"></span><span class="rightContent">
                <button id="submit" name="submit" class="art-button" type="submit" value="Create">
                    Create</button></span>
        </div>

    }
</div>
</fieldset>
<script src="@Url.Content("~/Scripts/exitCode.js")" type="text/javascript"></script>
<div id="treeview" title="Dialog Title" style="font-size: 10px; font-weight: normal;
    overflow: scroll; width: 800px; height: 450px;">
    <div id="errorCodes">
        @Html.RenderTree(CacheHelper.ErrorCodes(), ec => ec.Name, ec => ec.Children.ToList(), ec => (ec.ID).ToString(), null, "e")

    </div>
    <div id="inputReps" style="display: none;">
    </div>
</div> 
```

**控制器动作**

```
 [HttpPost]
        [AcceptVerbs(HttpVerbs.Post)]
        public ActionResult Create(RunLogEntry runLogEntry, String ServiceRequest, string Hour, string Minute, string AMPM,
                                     string submit, IEnumerable<HttpPostedFileBase> file, String AssayPerformanceIssues1, List<string> Replicates)
        {

#region LogFile_UserConfrimation

            if (submit == null)
            {
                if (runLogEntry.RunDatesDisplay != null || runLogEntry.RunDatesDisplay.Count() > 0)
                {
                    //1\. Get The selected/Checked Run Dates    

                    //2\. Locate The Parsed File(s)

                    //3\. Parse the File Again and populate fields

                    List<string> fileNames = new List<string>();

                    if (runLogEntry.AttachedLogFileName != null || runLogEntry.AttachedLogFileName != string.Empty)
                    {
                        if (runLogEntry.AttachedLogFileName.Contains(".zip") || (runLogEntry.AttachedLogFileName.Contains(".ZIP")))
                        {
                            string[] splitData = runLogEntry.AttachedMultipleLogFileNames.Split(new char[] { '|' }, StringSplitOptions.RemoveEmptyEntries);

                            foreach (string s in splitData)
                            {
                                fileNames.Add(s);
                            }
                        }
                        else
                        {
                            fileNames.Add(runLogEntry.AttachedLogFileName);
                        }
                    }

                    foreach (var modelValue in ModelState.Values)
                    {
                        modelValue.Errors.Clear();
                    }

                    OutputResults or = FileImport.logfileOutput(fileNames, runLogEntry.RunDatesDisplay);
                    if (or != null && or.isValid == true)
                    {
                        ModelState.Remove("SPTestsCompleted");
                        ModelState.Remove("MinReplicateId");
                        ModelState.Remove("MaxReplicateId");
                        ModelState.Remove("OutputFileName");
                        ModelState.Remove("MinTestCompletionDate");
                        ModelState.Remove("MaxTestCompletionDate");
                        ModelState.Remove("SelectedAssayIDs");
                        ModelState.Remove("RunStatusID");
                        //ModelState.Remove("OutputStoredFileName");

                        runLogEntry.SPTestsCompleted = or.testsCompleted;
                        runLogEntry.MinReplicateId = or.minReplicateId;
                        runLogEntry.MaxReplicateId = or.maxReplicateId;
                        runLogEntry.MinTestCompletionDate = or.minCompletionDate;
                        runLogEntry.MaxTestCompletionDate = or.maxCompletionDate;
                        //runLogEntry.OutputFileName = file.ElementAt(1).FileName;
                        //runLogEntry.OutputStoredFileName = storedFileName;

                        //set run date
                        if (or.minimumDate.HasValue)
                        {
                            ModelState.Remove("Hour");
                            ModelState.Remove("Minute");
                            ModelState.Remove("AMPM");
                            ModelState.Remove("RunDate");

                            runLogEntry.RunDate = or.minimumDate.Value;
                            ViewBag.Hour = or.minimumDate.Value.ToString("%h");
                            ViewBag.Minute = or.minimumDate.Value.Minute;
                            ViewBag.AMPM = or.minimumDate.Value.ToString("tt");
                        }

                        if (or.testExceptions != null)
                        {
                            //ModelState.Remove("TestExceptionDisplay");
                            runLogEntry.TestExceptionDisplay = or.testExceptions;
                            //ViewBag.TestExceptions = or.testExceptions;
                        }

                        string moduleName = "";

                        //set module name
                        if (or.module != null)
                        {
                            ModelState.Remove("SystemID");
                            //string s = or.module.Trim('"', ' ', '\t');
                            switch (or.module.Trim('"', ' ', '\t'))
                            {
                                case "EP001":
                                    runLogEntry.SystemID = 1;
                                    moduleName = "EP001";
                                    break;
                                case "EP002":
                                    runLogEntry.SystemID = 2;
                                    moduleName = "EP002";
                                    break;
                                case "EP003":
                                    runLogEntry.SystemID = 3;
                                    moduleName = "EP003";
                                    break;
                                case "EP004":
                                    runLogEntry.SystemID = 4;
                                    moduleName = "EP004";
                                    break;
                                case "EP005":
                                    runLogEntry.SystemID = 5;
                                    moduleName = "EP005";
                                    break;
                                case "EP006":
                                    runLogEntry.SystemID = 6;
                                    moduleName = "EP006";
                                    break;
                                case "EP007":
                                    runLogEntry.SystemID = 7;
                                    moduleName = "EP007";
                                    break;
                            }

                            ViewBag.SystemID = new SelectList(db.System1, "ID", "SystemFullName", runLogEntry.SystemID).OrderBy(l => l.Text);

                        }
                        //fetch corresponding assay ids
                        if (or.assayList != null && or.assayList.Count() > 0)
                        {
                            runLogEntry.SelectedAssayIDs = (from assays in db.Assay
                                                            where or.assayList.Contains(assays.AssayKey ?? 0)
                                                            select assays.ID).ToArray();
                        }

                    }
                }
            }

            #endregion

 // set runstatus if tc = tr
            if (runLogEntry.SPTestsRequested != 0 && runLogEntry.SPTestsCompleted != 0 && runLogEntry.SPTestsRequested == runLogEntry.SPTestsCompleted)
            {
                runLogEntry.RunStatusID = 1;
                ViewBag.RunStatusID = new SelectList(db.RunStatus, "ID", "RunStatusName", runLogEntry.RunStatusID).OrderBy(l => l.Text);
            }
            else
            {
                ViewBag.RunStatusID = new SelectList(db.RunStatus, "ID", "RunStatusName").OrderBy(l => l.Text);
            }

            //if (runLogEntry.SystemID == 0)
            //{
            //    //viewbag.systemid = new selectlist((from asys in db.system1
            //    //                                   where asys.active == true
            //    //                                   select asys), "id", "systemfullname").orderby(l => l.text);
            ViewBag.SystemID = new SelectList(db.System1, "ID", "SystemFullName", runLogEntry.SystemID).OrderBy(l => l.Text);
            //}

            ViewBag.OperatorID = new SelectList(db.User, "ID", "FullName").OrderBy(l => l.Text);
            ViewBag.AssayID = new SelectList(db.Assay, "ID", "AssayFullName").OrderBy(l => l.Text);
            //ViewBag.SystemID = new SelectList(db.System1, "ID", "SystemFullName").OrderBy(l => l.Text);
            ViewBag.GroupID = new SelectList(db.Group1, "ID", "GroupName").OrderBy(l => l.Text);
            ViewBag.LocationID = new SelectList(db.Location, "ID", "LocationName").OrderBy(l => l.Text);
            ViewBag.RunTypeID = new SelectList(db.RunType, "ID", "RunTypeName").OrderBy(l => l.Text);

            List<SelectListItem> ServiceRequest1 = new List<SelectListItem>();
            ServiceRequest1.Add(new SelectListItem { Text = "No", Value = "N" });
            ServiceRequest1.Add(new SelectListItem { Text = "Yes", Value = "Y" });

            ViewData["ServiceRequest"] = (Object)ServiceRequest1;

            return View(runLogEntry); 
```

所以在上面的控制器动作中，#region LogFile_UserConfrimation 是确认步骤，当用户单击对话框时，该区域被执行，它从对话框中接收复选框列表，我只需处理这些选择并更新一些模型属性并返回视图

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:51:33.613

您正在通过刷新页面来破坏对服务器进行 ajax 调用的目的。如果页面刷新是可以接受的，您应该正常提交表单。否则，您应该使用从服务器返回的 json 并使用 jQuery 将结果添加到 DOM。

编辑：

假设服务器返回部分视图：

客户端javascript：

```
var RunDialog;

$(document).ready(function () {

    RunDialog = $("#runDatestreeview").dialog({ closeOnEscape: true, stack: false, autoOpen: false, modal: false, resizable: false, draggable: true, title: "Select Run Dates:", width: 600, height: 500,
        buttons: { Select: function () {

            $.post("/RunLogEntry/Create",
              $("#form").serialize(),
               function (data) {
                   $("#main").html(data);
               }, "html");
        },
            Cancel: function () {
                $(this).dialog("close");
            }
        }
    });

    RunDialog.closest("div.ui-dialog").appendTo("#form");

    $("#RunDatesChildDialogLink").click(function () {
        RunDialog.dialog("open");
    });   
}); 
```

通过 ajax 调用的服务器端控制器操作：

```
[HttpPost]
public ActionResult Create(MyEditModel model)
{
    // save edit model and create view model

    return PartialView("_RunLogEntryPartialView", viewModel);
} 
```

在原始视图中，#main 是：

```
<div id="main">
    @Html.Partial("_RunLogEntryPartialView", Model)
</div> 
```

然后在“_RunLogEntryPartialView”中，您只包含#main 中的 html。

您使用 json 作为数据类型而不是 html。您还需要在控制器操作方法中使用 PartialView() 返回局部视图，而不是使用 View() 返回常规视图。此外，您没有看到任何更改的原因很可能是因为您在设置 main 的 html 时使用了不正确的选择器语法。您使用的是 $('main') 而不是 $('#main')。

# php - 在 PHP 处理时显示 HTML

> ID：14143145
> 
> 赞同：0
> 
> 时间：2013-01-03T16:38:47.917
> 
> 标签：php, ajax, jquery

我有一个 PHP 脚本，它需要大约 1 分 20 秒才能加载，因为它从其他网站获取数据。但是我需要一些方法来向用户显示页面正在加载。带有 .gif 加载图像的类似“此页面正在加载，可能需要 2 分钟”之类的内容。

我试过jquery：

```
 <html>
    <head>
        <script src="http://code.jquery.com/jquery-latest.js"></script>
    </head>

    <body>
    <script>
      // Put an animated GIF image insight of content
      $("#content").empty().html('<img src="http://www.website.com/images/loading.gif" />');

      // Make AJAX call
      $("#content").load("http://website.com/page.php")
      </script>

<div id="content">
Content to load here!
</div>

    </body>
    </html> 
```

但是页面是空白的（不知道我是否执行错误）。

还有其他方法吗？

我查看了其他问题，但找不到任何符合我需要的东西，我可以开始工作。

谢谢，

杰克。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T16:40:27.610

在脚本完成加载之前，您不会得到服务器的响应。因此，您必须使用另一个页面“前置”该页面，该页面显示加载部分。该页面应该调用您要执行的脚本，例如通过 AJAX 调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T16:43:00.777

您可以将 AJAX 调用与`beforeSend`事件`success`一起使用：

```
$.ajax({
   url: "http://website.com/page.php", type: "POST",
   beforeSend: function() {
      $("#content").html('<img src="images/loading.gif" />');
   },
   success: function(data) {
      $("#content").html(data);
   }
}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T16:46:49.147

你`script`弄错了标签。您需要关闭调用，并为实际代码打开一个新`script`的`src`

此外，您需要在使用 JQuery 获取对象**之前加载 DOM。**您可以`$(document).ready()`在 DOM 元素之后使用或放置脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T16:42:38.827

您的 jquery 在文件中加载到哪里？如果它在顶部加载，您应该在执行其 JS 之前等待 dom 加载。

[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

# android - Android 搜索活动查询

> ID：14143151
> 
> 赞同：0
> 
> 时间：2013-01-03T16:39:12.317
> 
> 标签：android, search

是否可以在与用户类型*相同的活动*中创建建议列表（下拉列表） ？ListView 包含简单的文本，我希望用户仅从建议的列表中选择文本，但我想使用用户输入对其进行排序。

任何建议将不胜感激。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:40:58.210

尝试 AutoCompleteTextView 或 TextWatcher

# ios - 在一个 xcode 项目中未找到“矢量”文件，但在其他项目中未找到

> ID：14143155
> 
> 赞同：0
> 
> 时间：2013-01-03T16:39:17.387
> 
> 标签：ios, xcode, vector, stdvector

我正在尝试在 xcode 中使用向量，但它在我当前的项目中不起作用。我收到了 `'vector' file not found.`我已经添加`#include < vector >` 并将文件从 .m 更改为 .mm 的错误消息。“编译源为”设置为“根据文件类型”，我尝试了两个编译器（4.1 和 GCC 4.2）。我也清理了这个项目，但没有运气。

我做了一个新项目，并完成了这些步骤和矢量工作完全正常。我什至将相同的文件放入新项目中，并且可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:49:01.770

删除括号之间的空格。IE，

```
#include <vector> 
```

不是

```
#include < vector > 
```

# symfony - 在 symfony 2 学说可翻译中在哪里更改 translationFallback 为 true

> ID：14143158
> 
> 赞同：4
> 
> 时间：2013-01-03T16:39:29.933
> 
> 标签：symfony, doctrine, translation, listener

我需要打开“翻译后备”和“persistDefaultLocaleTranslation”。我知道如何更改它：[https](https://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/translatable.md#default-locale) ://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/translatable.md#default-locale 但不知道我应该在哪里访问该侦听器。也许在 config.yml ? 如何？？

我正在寻找这样的东西：（config.yml）

```
...
translatable-extension:
    translationFallback:true
    persistDefaultLocaleTranslation: true 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T16:24:36.073

如果您安装了 StofDoctrineExtensionsBundle ( [https://github.com/stof/StofDoctrineExtensionsBundle](https://github.com/stof/StofDoctrineExtensionsBundle) )，您可以在 config.yml 中为此配置默认值

```
stof_doctrine_extensions:
    default_locale: "%locale%"
    translation_fallback: true
    persist_default_translation: true 
```

没有发现这在任何文档中，但它在捆绑包的配置中[https://github.com/stof/StofDoctrineExtensionsBundle/blob/master/DependencyInjection/Configuration.php#L30](https://github.com/stof/StofDoctrineExtensionsBundle/blob/master/DependencyInjection/Configuration.php#L30)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:52:13.643

我不确定我是否完全理解您的要求，但在典型设置中，您会在 config.yml 中像这样引用翻译后备。

```
framework:
    translator:      { fallback: %locale% } 
```

在此示例中，语言环境占位符引用了您的 parameters.ini/parameters.yml 文件中的语言环境设置。

我相信这在您的 config.yml 中默认被注释掉，但取消注释这一行将有效地启用翻译。

您可以在此处查看配置选项的完整列表及其默认值：http: [//symfony.com/doc/current/reference/configuration/framework.html#full-default-configuration](http://symfony.com/doc/current/reference/configuration/framework.html#full-default-configuration)

# bash - 在大型数据集上使用 grep 或 fgrep 的循环非常慢

> ID：14143163
> 
> 赞同：7
> 
> 时间：2013-01-03T16:39:43.320
> 
> 标签：bash, loops, grep

我正在尝试做一些非常简单的事情；在目录中的文件上从列表中 grep，字符串的完全匹配：

```
#try grep each line from the files
for i in $(cat /data/datafile); do 
LOOK=$(echo $i);
fgrep -r $LOOK /data/filestosearch >>/data/output.txt
done 
```

与 grep 匹配的文件有 2000 万行，目录有 ~600 个文件，总共 ~4000 万行我可以看到这会很慢，但我们估计需要 7 年。即使我在我们的 HPC 上使用 300 个内核将作业按文件拆分以进行搜索，看起来也可能需要一周多的时间。

有类似的问题：

[循环运行非常慢](https://stackoverflow.com/questions/5731275/loop-running-very-slow) ：

[非常慢的foreach循环](https://stackoverflow.com/questions/12202137/very-slow-foreach-loop)

在这里，尽管它们位于不同的平台上，但我认为如果有其他可能对我有帮助。或 fgrep 可能更快（但似乎有点慢，因为我现在正在测试它）谁能看到更快的方法来做到这一点？先感谢您

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T16:50:25.483

听起来像这里的`-f`标志`grep`适合：

```
-f FILE, --file=FILE
    Obtain  patterns  from  FILE,  one  per  line.   The  empty file
    contains zero patterns, and therefore matches nothing.   (-f  is
    specified by POSIX.) 
```

所以`grep`已经可以做你的循环正在做的事情，你可以将循环替换为：

```
grep -F -r -f /data/datafile /data/filestosearch >>/data/output.txt 
```

现在我不确定 2000 万个模式的性能，但至少你不会以这种方式启动 2000 万个进程，因此它可能会快得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T17:03:12.330

正如马丁在他的回答中已经说过的那样，您应该使用该`-f`选项而不是循环。我认为它应该比循环更快。

[此外，这看起来像是GNU parallel](http://www.gnu.org/software/parallel/)的一个极好的用例。查看[此答案](https://stackoverflow.com/a/9067042/373151)以获取使用示例。它看起来很困难，但实际上很容易设置和运行。

除此之外，如果只有一个字符串要匹配，4000 万行对 grep 来说应该不是什么大问题。它应该能够在一两分钟内在任何体面的机器上完成。我在笔记本电脑上测试了 200 万行需要 6 秒。所以 4000 万行应该需要 2 分钟。

问题在于有 2000 万个字符串要匹配。我认为它一定是内存不足或什么的，特别是当你在不同的目录上运行它的多个实例时。您可以尝试拆分输入匹配列表文件吗？例如，尝试将其分成 100000 个单词的块。

**编辑**：刚刚在我的机器上尝试并行。这是惊人的。它会自动将 grep 拆分到几个核心和几台机器上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T17:40:12.340

这是加快速度的一种方法：

```
while read i
do
    LOOK=$(echo $i)
    fgrep -r $LOOK /deta/filetosearch >> /data/output.txt
done < /data/datafile 
```

当您这样做时`for i in $(cat /data/datafile)`，您首先会生成另一个进程，但该进程必须在运行脚本的其余部分之前找出所有这些行。另外，很有可能您会超载命令行并最终丢失一些文件。

通过使用 q`while read`循环并从 重定向输入`/data/datafile`，您无需生成 shell。另外，您的脚本将立即开始阅读`while`循环，而无需先找出整个`/data/datafile`.

如果`$i`是目录列表，并且您对下面的文件感兴趣，我想知道是否`find`可能比`fgrep -r`.

在阅读时我做 LOOK=$(echo $i) find $i -type f | xargs fgrep $LOOK >> /data/output.txt 完成 < /data/datafile

将`xargs`获取 find 的输出，并在单个`fgrep`. 如果这些`xargs`目录中的文件名包含空格或其他奇怪字符，则可能很危险。您可以尝试（取决于系统），如下所示：

```
find $i -type f -print0 | xargs --null fgrep $LOOK >> /data/output.txt 
```

在 Mac 上是

```
find $i -type f -print0 | xargs -0 fgrep $LOOK >> /data/output.txt 
```

正如其他人所说，如果你有 GNU 版本的 grep，你可以给它`-f`标志并包含你的`/data/datafile`. 然后，您可以完全消除循环。

另一种可能性是切换到 Perl 或 Python，它们实际上会比 shell 运行得更快，并为您提供更多的灵活性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T10:52:43.467

由于您正在搜索简单的字符串（而不是正则表达式），您可能需要使用`comm`：

```
comm -12 <(sort find_this) <(sort in_this.*) > /data/output.txt 
```

它占用的内存很少，但`grep -f find_this`可以吞噬 'find_this' 大小的 100 倍。

在 8 核上，这些文件需要 100 秒：

```
$ wc find_this; cat in_this.* | wc
3637371   4877980 307366868 find_this
16000000 20000000 1025893685 
```

确保有一个相当新的`sort`. 它应该支持`--parallel`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T16:47:01.463

您可以编写 perl/python 脚本，它会为您完成这项工作。当您使用外部工具执行此操作时，它可以节省您需要做的所有分叉。

另一个提示：您可以在一个正则表达式中组合您正在寻找的字符串。在这种情况下，grep 将只对所有组合行执行一次。

例子：

代替

```
for i in ABC DEF GHI JKL
do
grep $i file >> results
done 
```

你可以做

```
egrep "ABC|DEF|GHI|JKL" file >> results 
```

# c# - 我可以将 Windows Identity Foundation 3.5 与 .NET 4.5 一起使用吗？

> ID：14143164
> 
> 赞同：4
> 
> 时间：2013-01-03T16:39:45.360
> 
> 标签：c#, .net, wif, claims-based-identity

我正在寻找为 SSO 改造构建一些可重用的组件。目前几乎所有的应用程序都在 .NET 3.5 或 4.0 上，但是所有新项目都在 .NET 4.5 上启动。

我知道 .NET 4.5 更改了很多 WIF，所以我的问题是：如果我创建一些针对 WIF 4.0 的可重用组件来混淆声明交互，那么 .NET 4.5 项目仍然可以使用这些针对以前 WIF 框架的组件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T04:23:42.360

*（注意，我对版本编号仍然有些模糊，但我相信 WIF 直接从 1.0 跃升至 4.5；AFAIK 1.0 是 .NET Framework 4.5 版本之前的 .NET 3.5 和 4.0 的稳定版本。）*

在 .NET 4.5 之前，所有 WIF 类型都存在于带外命名空间/程序集中，这些命名空间/程序集现在已移入核心框架。因此，在 .NET 4.5 中，您当然可以引用 WIF 1.0 程序集并同时使用这两组类型；您只需要在引用它们时注意命名空间冲突。

实际上，使用 .NET 4.5 中的 WIF 1.0 程序集是*唯一*推荐的方式来处理涉及在 .NET 4.5 中生成的内部 WIF 类（一些与证书和密码学相关的类）。

我建议将您的可重用组件构建到一个通用接口，并为 .NET 3.5/4.0（使用 WIF 1.0）和 .NET 4.5（使用 WIF 4.5）（总共 3 个程序集）提供不同的实现。

# textures - 你如何制作纹理 Altas

> ID：14143166
> 
> 赞同：0
> 
> 时间：2013-01-03T16:39:49.533
> 
> 标签：textures, texture-mapping, texture-atlas

开发者如何制作Texture Atlas'？他们是手工做的吗？

我正在使用 Unity3d，我认为他们有一些关于编写图集的脚本，但我不知道如何或理解如何去做。

有人可以解释制作纹理图集的过程吗？如果可能的话，我可以自己编写脚本或提供免费软件替代方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T13:38:31.583

如何通过任何可用的第三方库手动创建纹理图集。

我建议从本教程开始：[http ://www.flipcode.com/archives/Rectangle_Placement.shtml](http://www.flipcode.com/archives/Rectangle_Placement.shtml)

稍后您可以继续使用更高级的代码：[http ://clb.demon.fi/projects/even-more-rectangle-bin-packing](http://clb.demon.fi/projects/even-more-rectangle-bin-packing)

# sql - DB2（和 Derby）使用 Case 语句进行 Pivot Join

> ID：14143170
> 
> 赞同：3
> 
> 时间：2013-01-03T16:40:02.003
> 
> 标签：sql, db2, derby

我已经看到了这个[SO 问题（How can I Pivot a table in DB2?）](https://stackoverflow.com/questions/13579143/how-can-i-pivot-a-table-in-db2)，一些答案/评论提到能够通过 case 语句实现相同的效果，但我正在努力实现这一目标，可能是由于几年后远离很多 SQL。

这是我拥有的一些数据的快照：

```
ID    Date          ErrID   ErrDesc
---------------------------------------
164   2012-09-21    1402    Large V
164   2012-09-21    1409    Missing
416   2012-09-21    1409    Missing
1380  2012-09-21    1411    n - Mis
1500  2012-09-17    1411    n - Mis
1500  2012-09-21    1402    Large V 
```

ID*和*Date 一起需要在查询中是唯一的，该查询将返回如下内容，其中空槽为空。我怎样才能通过案例陈述或其他方式实现这一目标？请记住，我认为我们的 DB2 版本不支持“解码”，而且我需要的 SQL 还需要能够在 Derby 上运行以进行测试。提前致谢。

```
ID      Date        Err1402     Err1409     Err1411
-----------------------------------------------------------------------
164     2012-09-21  Large V     Missing
416     2012-09-21              Missing
1380    2012-09-21                          n - Mis
1500    2012-09-17                          n - Mis
1500    2012-09-21  Large V 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T16:44:43.507

这是使用`CASE`聚合函数的查询版本：

```
select id,
  date,
  max(case when errid = 1402 then ErrDesc else '' end) Err1402,
  max(case when errid = 1409 then ErrDesc else '' end) Err1409,
  max(case when errid = 1411 then ErrDesc else '' end) Err1411
from yourtable
group by id, date
order by id 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!6/caee0/3)（sql server 版本）。您可以将空字符串替换为`null`.

```
select id,
  date,
  max(case when errid = 1402 then ErrDesc else null end) Err1402,
  max(case when errid = 1409 then ErrDesc else null end) Err1409,
  max(case when errid = 1411 then ErrDesc else null end) Err1411
from yourtable
group by id, date
order by id 
```

编辑#1：让它正常工作的关键是聚合函数。该`CASE`语句将每个`ErrId`值放入列中，但如果您不使用聚合函数，则每个 id 和 date 都会有多行。因此，如果您使用：

```
select id,
  date,
  (case when errid = 1402 then ErrDesc else '' end) Err1402,
  (case when errid = 1409 then ErrDesc else '' end) Err1409,
  (case when errid = 1411 then ErrDesc else '' end) Err1411
from yourtable
order by id 
```

结果是：

```
|   ID |                             DATE | ERR1402 | ERR1409 | ERR1411 |
-------------------------------------------------------------------------
|  164 | September, 21 2012 00:00:00+0000 | Large V |         |         |
|  164 | September, 21 2012 00:00:00+0000 |         | Missing |         |
|  416 | September, 21 2012 00:00:00+0000 |         | Missing |         |
| 1380 | September, 21 2012 00:00:00+0000 |         |         | n - Mis |
| 1500 | September, 17 2012 00:00:00+0000 |         |         | n - Mis |
| 1500 | September, 21 2012 00:00:00+0000 | Large V |         |         | 
```

如您所见，`id=1500`您将获得多行您不想要的行。因此，如果您告诉它您想要`max()`each 的值`errid`，那么您将获得每条记录的一行。

# ruby-on-rails - 如何在模型中使用变量？

> ID：14143175
> 
> 赞同：0
> 
> 时间：2013-01-03T16:40:14.283
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model

我正在尝试将页面的 URL 插入到上传的图像中。
我已经有下面这样的代码，但它不起作用。

我的模型有问题吗？我怎样才能解决这个问题？

**我的联想**

*   用户 has_one :profile
*   个人资料belongs_to：用户

**模型/用户.rb**

```
before_save :text_to_insert? 

def text_to_insert
    nickname = self.profile.nickname 
end

has_attached_file :user_avatar,
    :styles => {
    :thumb=> "100x100>",
    :small  => "400x400>" }, 
     :convert_options => {
     :small => '-fill white  -undercolor "#00000080"  -gravity South -annotate +0+5 " example.com/'+ nickname +' "' } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:35:53.807

在保存之前，您使用`text_to_insert?`的是不存在的方法，为什么它返回 false，因此无法保存。好像是错别字，在ie`?`之后试试`:text_to_insert`

```
before_save :text_to_insert 
```

请确保这是有效的`self.profile.nickname`

# transactions - 跨多个容器的事务控制

> ID：14143176
> 
> 赞同：1
> 
> 时间：2013-01-03T16:40:18.403
> 
> 标签：transactions, jms, apache-camel, jta, xa

能否请您指出任何使用 XA 架构、JMS 和 Camel 跨多个容器进行事务控制的示例代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:09:55.453

这是一些关于此的一般文档，可帮助您入门...

[http://fusesource.com/docs/esbent/7.0/camel_tx/XaJms-Overview.html](http://fusesource.com/docs/esbent/7.0/camel_tx/XaJms-Overview.html)

# java - 将二维数组的最低有效位替换为一维数组的其他位

> ID：14143178
> 
> 赞同：0
> 
> 时间：2013-01-03T16:40:20.680
> 
> 标签：java

我正在尝试从结果数组的位中替换 rgb 的最低有效位

```
for (int k = 0; k < rgb.length ; ++k)
{       
    for (int n=0; n<rgb[k].length; n++) 
    {               
        rgb[k][n] = (rgb[k][n] >> 1) << 1;  
        rgb[k][n] = rgb[k][n] | result[n];       
    }
} 
```

rgb 是二维数组，结果是一维数组，rgb 的值类似于 10010110
11000110
10101010 ，其中结果数组的值为 0
1
1 ...

但我没有得到适当的输出..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T16:44:23.620

所以你正在尝试做

```
int[][] rgb = {{1, 2}, {3, 4}};
int[] result = {0, 1};

for (int[] arr : rgb)
    for (int n = 0; n < arr.length; n++)
        arr[n] = result[n] == 0 ?
                 (arr[n] & ~1) /* clear */ : 
                 (arr[n] | 1) /* set */;

for (int[] arr : rgb) {
    String sep = "";
    for(int i : arr) {
        System.out.print(sep + Integer.toBinaryString(i));    
        sep = ", ";
    }
    System.out.println();
} 
```

印刷

```
0, 11
10, 101 
```

# php - 如何获取php内容

> ID：14143182
> 
> 赞同：0
> 
> 时间：2013-01-03T16:40:24.427
> 
> 标签：php, get, include, fopen, file-get-contents

如何
使用allow_url_fopen从其他服务器获取带有php或js文件的php文件内容？我先试试这个——它可以工作，但来自我的服务器！

```
<?php
    $url = "index.php";
$json = file_get_contents($url);
 echo $json;
echo 1;
?> 
```

我它不工作

```
 <?php
    $url = "http://mysite.com/index.php";
$json = file_get_contents($url);
 echo $json;
echo 1;
?> 
```

任何人都知道如何从其他服务器获取文件内容allow_url_fopen？
或来自我服务器的其他用户？
或从该文件中获取变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:49:47.740

文件的打开方式取决于流包装器，它取决于完整的 URL。

`file_get_contents('index.php')`默认为本地文件系统包装器，即直接从硬盘打开文件并读取其内容。

`file_get_contents('http://example.com/index.php')`使用 HTTP 流包装器。您不能直接访问另一台服务器硬盘上的文件（*希望*您不能）。打开`http://example.com/index.php`与将该 URL 放入浏览器相同：它向该 URL 发出 HTTP 请求，结果是其他服务器**在处理 PHP 文件后**输出的任何内容，就像任何常规 Web 请求一样。

# r - 如何对R中的两个变量进行交叉制表？

> ID：14143185
> 
> 赞同：3
> 
> 时间：2013-01-03T16:40:34.193
> 
> 标签：r, frequency

这似乎是基本的，但我不会明白。我正在尝试为以下数据计算 R 中的频率表

```
1 2 
2 1 
3 1 
```

我想在 csv 输出中传输两种频率，其行将是数据 A 列中的所有唯一条目，其列将是数据 B 列中的所有唯一条目，单元格值将是值出现的次数。我已经探索了一些结构，`table`但我无法以 csv 格式正确输出值。

样本数据的输出：

```
"","1","2"
"1",0,1
"2",1,0
"3",1,0 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T16:48:56.053

数据：

```
df <- read.table(text = "1 2 
2 1 
3 1") 
```

使用 计算频率`table`：

`as.data.frame`（如果您的对象是一个矩阵，您可以使用before将其转换为数据框`table`。）

```
tab <- table(df)

   V2
V1  1 2
  1 0 1
  2 1 0
  3 1 0 
```

使用函数写入数据`write.csv`：

```
write.csv(tab, "tab.csv") 
```

结果文件：

```
"","1","2"
"1",0,1
"2",1,0
"3",1,0 
```

# maven - 声纳是否分析 Maven 项目的测试目录中的代码？

> ID：14143187
> 
> 赞同：1
> 
> 时间：2013-01-03T16:40:54.493
> 
> 标签：maven, junit, sonarqube

声纳是否分析 Maven 项目测试目录中的代码？

在我正在处理的项目中，我认为它没有，但我不确定它是否已被关闭或默认启用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T06:41:43.637

实际上，Sonar 根据 PMD 单元测试规则检查单元测试文件，如果其中任何一个（规则）被破坏，当然会在测试文件上创建违规行为。但是，默认情况下，这些规则是禁用的，因此您需要在配置文件管理中启用它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:44:56.827

当然不是每个指标都适用于测试。声纳计算测试的数量（但它可能来自 junit 的报告）但 checkstyle 等不会分析测试 - 不幸的是。至少没有默认设置

# git - 选项卡宽度和 git - 强制 git 在提交时自动转换

> ID：14143194
> 
> 赞同：1
> 
> 时间：2013-01-03T16:41:11.810
> 
> 标签：git

我想知道是否可以创建一个特定于项目的提交前挂钩。

例如，我在 github 上有一个共享项目。让我们称之为“标签疯狂”。

然后我创建一个文件`.git-pre-commit-hook`，里面有这样的东西：

```
sed 's/\t/ /g' 
```

然后，在每次提交中，git 都会在更改的内容中运行这个钩子，避免 tab-crazy 开发人员对 tab-width 配置做废话。

这样的事情可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:45:20.500

是的，git 有这样的[钩子](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)。

正如 ThiefMaster 所说，您无法*修改*即将提交的代码，但您可以检查并拒绝提交。

# ios - ios中循环中的“精确”采样时间

> ID：14143195
> 
> 赞同：0
> 
> 时间：2013-01-03T16:41:20.260
> 
> 标签：ios, nstimer, timing, sampling

我正在定期向 RC 直升机发送数据，目前我正在使用时间间隔为 30 毫秒的 NSTimer 来执行此操作。现在由于 NSTimer 的不精确性和 ios 的非实时性，我与采样时间有很大的差异。（前 30 毫秒内有 5 个数据包，然后在 4 个周期内什么都没有）。是否有更精确的方法来处理 ios 中的数据采样和函数计时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:47:03.830

你可以做一些你通常在游戏中做的事情来微调 fps（同时保持逻辑和绘画分开，使其在任何 fps 中都能正常工作）。像这样，并在后台线程中调用它：

```
- (void)updateLoop
{
    NSTimeInterval last = CFAbsoluteTimeGetCurrent();
    NSTimeInterval elapsed = 0;
    while (self.running) {
        NSTimeInterval now = CFAbsoluteTimeGetCurrent();
        NSTimeInterval dt = now - last;

        elapsed += dt;

        if (elapsed >= YOUR_INTERVAL) {
            //Do stuff
            elapsed = 0;
        }

        last = now;

        [NSThread sleepForTimeInterval:0.001]; //There is not NSThread yield
    }
} 
```

# c# - TransactionScope 提交更新而不调用 .Complete() 但不插入

> ID：14143196
> 
> 赞同：3
> 
> 时间：2013-01-03T16:41:21.573
> 
> 标签：c#, .net, transactions

我有一个围绕一些功能的事务范围。这些函数每个都执行插入或更新的数据库调用。

```
 using (var ts = new TransactionScope(TransactionScopeOption.Required, new TransactionOptions()
            {
                IsolationLevel =
                    IsolationLevel.Serializable,
                Timeout = new TimeSpan(0, 0, 15, 0)
            }))
            {
                    DoStuff(arg!, arg2);
                    ts.Complete(); //This had to be added to commit the changes for inserts (updates worked), otherwise data was being rolled back
            } 
```

随着`ts.Complete();`插入和更新被提交到数据库，没有只有更新。有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T16:45:24.723

这表明您的更新不是交易的一部分。这可能意味着：

*   更新是在您开始事务范围之前已经存在的连接上完成的
*   存在显式嵌套的新事务或无事务
*   独角兽

确认：没有完成，事务中的任何内容都不会被提交

# python - Errno 10060] 连接尝试失败，因为连接方在一段时间后没有正确响应

> ID：14143198
> 
> 赞同：20
> 
> 时间：2013-01-03T16:41:31.390
> 
> 标签：python, http, python-2.7

```
def check_web_server(host, port, path):
        h = httplib.HTTPConnection(host, port)
        h.request('GET',path)
        resp = h.getresponse()
        print 'HTTP Response:'
        print '   status =', resp.status
        print '   reason =', resp.reason
        print 'HTTP Headers:'
        for hdr in resp.getheaders():
                print '  %s: %s' % hdr 
```

我这样调用这个函数，`check_web_server('www.python.org',80,'/')` 但它给了我这个错误 `error: [Errno 10060] A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond`

您可以在这里清楚地看到代码 [http://pastebin.com/V9KpGkvw](http://pastebin.com/V9KpGkvw)

我已经在 Stackoverflow 中搜索过，但我没有找到任何相关问题，对不起，我是网站新手，如果我做错了什么。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-04T07:54:02.787

`ping`正常工作，但`telnet`端口`80`没有，HTTP 端口在`80`您的机器上关闭。我假设您的浏览器的 HTTP 连接通过代理（当浏览正常时，您将如何阅读 stackoverflow？）。您需要在处理代理的 python 程序中添加一些代码，如下所述：

[使用 HTTP 代理 - Python](https://stackoverflow.com/questions/5620263/using-an-http-proxy-python)

# html - 将网站中的页面链接层次结构可视化的网站

> ID：14143204
> 
> 赞同：3
> 
> 时间：2013-01-03T16:41:51.760
> 
> 标签：html, web, hyperlink

是否有应用程序或网站（首选网站）可以让您创建网站的链接层次结构？

我需要将其可视化以将其呈现给客户。

像这样：

![在此处输入图像描述](../Images/697606a2ff7b7a7b0bf6064f30658b4d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:55:39.007

您可以使用 Microsoft Office、Open Office 或 Google Docs 构建图形。

Microsoft Office => **Visio** [http://office.microsoft.com/en-us/visio/](http://office.microsoft.com/en-us/visio/)
打开 Office =>**绘图** [http://www.openoffice.org/product/draw.html](http://www.openoffice.org/product/draw.html)
谷歌文档 =>**绘图** [https:// drive.googleblog.com/2010/04/introducing-google-docs-drawings.html](https://drive.googleblog.com/2010/04/introducing-google-docs-drawings.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T07:04:11.083

我刚刚发现了这个工具，虽然我只是开始使用它，但还没有完全使用它，但我现在实际上是第一次使用它，它看起来很不错。

它会抓取您的网站，收集大量信息，然后您可以将其直接导出到 GraphViz 或任何其他数据可视化工具中。

[Xenu（免费软件）](http://home.snafu.de/tilman/xenulink.html)

此外，为了备份 Banath 的答案。如果您想走线框/流程图程序的路线，我使用 Omnigraffle 并强烈推荐它。

# php - 每第三个元素旁边应该有一个日期

> ID：14143208
> 
> 赞同：0
> 
> 时间：2013-01-03T16:41:58.767
> 
> 标签：php, arrays, loops, multidimensional-array

因此，当我努力了解 PHP 的主要数据结构来源时，我一直在问很多基于数组的问题。

我目前正在构建一个能输出艺术家及其歌曲列表的类。每三首歌旁边都有一个日期。如此数组所示：

```
$music = array(
    'Creed' => array(
        'Human Clay' => array(
            array(
                'title' => 'Are You Ready'
            ),
            array(
                'title' => 'What If'
            ),
            array(
                'title' => 'Beautiful',
                'date' => '2012'
            ),
            array(
                'title' => 'Say I'
            ),
            array(
                'title' => 'Wrong Way'
            ),
            array(
                'title' => 'Faceless Man',
                'date' => '2013'

            ),
            array(
                'title' => 'Never Die'
            ),
            array(
                'title' => 'With Arms Wide pen'
            ),
            array(
                'title' => 'Higher',
                'date' => '1988'
            ),
            array(
                'title' => 'Was Away Those Years'
            ),
            array(
                'title' => 'Inside Us All'
            ),
            array(
                'title' => 'Track 12',
                'date' => '1965'
            ),
        ),
    ),
); 
```

我写的是以下内容：

```
class Music{

    protected $_music = array();

    protected $_html = '';

    public function __construct(array $music){
        $this->_music = $music;
    }

    public function get_music(){
        $year = '';
        $this->_html .= '<d1>';

        foreach($this->_music as $artist=>$album){
            $this->_html .= '<dt>' . $artist . '</dt>';
            foreach($album as $track=>$song){
                foreach($song as $songTitle){
                    if(isset($songTitle['date']) && !empty($songTitle['date'])){
                        $year = '['.$songTitle['date'].']';
                    }
                    $this->_html .= '<dd>' . $songTitle['title'] . $year. '</dd>';

                }
            }
        }
        $this->_html .= '</d1>';

    }

    public function __toString(){
        return $this->_html;
    }

}

$object = new Music($music);
$object->get_music();

echo $object; 
```

我的问题是我最终得到了一些看起来像这样的东西：

```
Creed
    Are You Ready
    What If
    Beautiful[2012]
    Say I[2012]
    Wrong Way[2012]
    Faceless Man[2013]
    Never Die[2013]
    With Arms Wide pen[2013]
    Higher[1988]
    Was Away Those Years[1988]
    Inside Us All[1988]
    Track 12[1965] 
```

正如您所看到的，几乎每首歌曲旁边都有一个日期，而在数组中并非如此。我的问题是什么交易？我想在我的循环中我很清楚地说明这首歌是否有年份，设置它然后在歌曲标题旁边打印它？

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:46:08.420

设置后您永远不会重置`$year`，因此一旦您遇到数组中的第一年值，您将不断使用同一年，直到出现新的年份：

```
 if(isset($songTitle['date']) && !empty($songTitle['date'])){
                    $year = '['.$songTitle['date'].']';
                } else {
                    $year = ''; /// reset year to blank
                } 
```

在一些不相关的东西中，这可能是一个错字：

```
 $this->_html .= '<d1>';
                       ^--- number one? not letter L for a `<dl>` tag? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:46:17.677

您没有在 foreach 循环中重置年份，因此它使用最后设置的年份，直到重新分配值。这是更正的音乐课。

```
class Music{

protected $_music = array();

protected $_html = '';

public function __construct(array $music){
    $this->_music = $music;
}

public function get_music(){
    $year = '';
    $this->_html .= '<d1>';

    foreach($this->_music as $artist=>$album){
        $this->_html .= '<dt>' . $artist . '</dt>';
        foreach($album as $track=>$song){
            foreach($song as $songTitle){
                if(isset($songTitle['date']) && !empty($songTitle['date'])){
                    $year = '['.$songTitle['date'].']';
                }
                $this->_html .= '<dd>' . $songTitle['title'] . $year. '</dd>';
                $year = "";
            }
        }
    }
    $this->_html .= '</d1>';

}

public function __toString(){
    return $this->_html;
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T16:49:31.943

当没有为歌曲设置日期时，该`year`变量将保存上一首歌曲的值（为其设置）。`year`无论日期是否设置，您实际上仍然在告诉它打印在标题旁边。

您需要一个`else`子句`if`：

```
if(isset($songTitle['date']) && !empty($songTitle['date'])){
    $year = '['.$songTitle['date'].']';
} else {
    $year = '';
} 
```

`year`这将在未设置日期时清除。

# javascript - 以 XML 格式从 Twitter 检索 user_timeline

> ID：14143210
> 
> 赞同：0
> 
> 时间：2013-01-03T16:41:59.730
> 
> 标签：javascript, xml, json, twitter

我正在用 HTML 和 Javascript 编写一个简单的应用程序。我正在尝试通过 jQuery 的 .ajax() 方法检索我的 user_timeline。问题是我想用 XML 检索我的时间线，但我一直在这个简单的任务中失败。这是我的代码：

```
$.ajax({
        type: 'GET',
        dataType: 'xml',
        url: 'http://api.twitter.com/1/statuses/user_timeline.xml?screen_name=stepanheller',
        success: function(data, textStatus, XMLHttpRequest) {
            console.log(data);
        },
        error: function(req, textStatus, error) {
            console.log('error: '+textStatus);
        }

}); 
```

奇怪的是，当我尝试完全相同的事情但使用 JSON 而不是 XML 时，脚本就可以工作了。

```
$.ajax({
        type: 'GET',
        dataType: 'jsonp',
        url: 'http://api.twitter.com/1/statuses/user_timeline.json?screen_name=stepanheller',
        success: function(data, textStatus, XMLHttpRequest) {
            console.log(data);
        },
        error: function(req, textStatus, error) {
            console.log('error: '+textStatus);
        }

}); 
```

你能给我一些提示我在请求中做错了什么吗？我知道我正在使用旧版本的 API，但我现在不会处理 OAuth。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:54:11.007

一般不可能发送跨域ajax请求。这是一般规则。

**JsonP**是解决此限制的经典方法，据我所知，Xml 没有等效的方法。根据您的浏览器兼容性限制，您可以使用[**XHR2**](http://www.html5rocks.com/en/tutorials/file/xhr2/)来实现这一点。

否则，唯一的解决方案是设置服务器代理。

```
Client --Ajax--> Your server --HttpRequest--> Twitter 
```

# python - Python 2.7+：以一定精度以非科学记数法格式化浮点数的正确方法是什么？

> ID：14143211
> 
> 赞同：3
> 
> 时间：2013-01-03T16:42:00.077
> 
> 标签：python, floating-point

我希望我对这个问题有意义。

有时，如果我打印一个小浮点数，它会看起来像`6.1248979238e-05`或类似的东西。

我希望能够说“无论如何，像这样输出 10 位精度”：`0.abcdefghij`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T16:43:08.097

```
>>> '%0.10f'% 6.1248979238e-05 
'0.0000612490' 
```

这是“字符串插值”或[printf 样式的格式](http://docs.python.org/3.3/library/stdtypes.html#printf-style-string-formatting)，仍然被广泛支持和使用。另一种选择是[较新的字符串格式](http://docs.python.org/3.3/library/string.html#format-string-syntax)：

```
>>> '{:.10f}'.format(6.1248979238e-05)
'0.0000612490' 
```

或者如果你想兼容 python2.6：

```
>>> '{0:.10f}'.format(6.1248979238e-05)
'0.0000612490' 
```

任你选。您使用哪个版本取决于您要支持的 python 版本。如果您*只*针对python2.7，那没关系。如果要支持早期版本，请使用 printf-style。*我个人在我的大部分*代码中都改用了最后一种形式。我不关心对 python2.5 的支持，但 python2.6 仍然足够新，我想尽可能地支持它。

# objective-c - 比较 managedObjectContexts

> ID：14143217
> 
> 赞同：0
> 
> 时间：2013-01-03T16:42:14.143
> 
> 标签：objective-c, ios, core-data, nsmanagedobjectcontext

我有两个持久存储（它们都是 sqlite 存储），因此有两个**持久**存储协调器，每个协调器都使用自己的**managedObjectContext 。**现在，我这里有一个情况。我的一个观点是观察**NSManagedObjectContextDidSaveNotification**的通知。它接收通知很好，但我如何比较哪个上下文触发了通知。

我做了以下操作，看看它是否是两种情况之一；

```
-(void)contextSaved:(NSNotification*)notification{
   NSManagedObjectContext *context = notification.object;
   if(context == myFirstContext){
     NSLog(@"This is the first context");
   }else{
     NSLog(@"This is the second context");
   }
} 
```

这两种情况都失败了，我没有得到任何类型的日志，但是如果我记录了对象的地址，看起来就好了；

```
NSLog(@"Notification object pointer %p, first context pointer %@", context, myFirstContext); 
```

如何将这两个上下文与通知中的上下文进行比较并检测保存上下文并采取行动。请建议。对于您提供的任何帮助，我都会非常高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:50:16.013

这正是您检查哪个托管对象上下文发布通知的方式。通知对象是 MOC，由于您想知道它是否与其他已知对象完全相同，`==`因此比较它们是正确的方法。如果两者都没有`NSLog`产生任何输出，那么几乎可以肯定不会调用此方法。也许您还没有注册`NSManagedObjectContextDidSaveNotification`，或者您确实注册了但`object`参数的值错误。尝试在此方法的第一行设置断点以查看它是否被调用。如果没有，请查看您注册通知的位置并找出您没有收到通知的原因。

# r - 为所有列 data.table 按组选择最后一行

> ID：14143220
> 
> 赞同：8
> 
> 时间：2013-01-03T16:42:18.453
> 
> 标签：r, data.table

我很惊讶地做了以下事情：

```
R) system.time(lastOrder <- order[,lapply(.SD,tail,1),by="TRADER_ID,EXEC_IDATE"]);
utilisateur     système      écoulé 
       1.45        0.00        1.53 
R) nrow(order)
[1] 75301
R) ncol(order)
[1] 23 
```

以为很长，然后我做了

```
R) system.time(lastOrder <- order[,list(test=tail(EXEC_IDATE,1)),by="TRADER_ID,EXEC_IDATE"]);
utilisateur     système      écoulé 
       0.14        0.00        0.14 
```

据我了解，如果您知道要选择的所有行并完成大部分工作，那么我不明白为什么将其应用于所有列应该长 10 倍。我在第一段代码上做错了吗，这是我知道按组选择最后一行的唯一方法

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-04T10:56:41.627

按组的最后一行：

```
DT[, .SD[.N], by="TRADER_ID,EXEC_IDATE"]            # (1) 
```

或者，更快（尽可能避免使用`.SD`，以提高速度）：

```
w = DT[, .I[.N], by="TRADER_ID,EXEC_IDATE"][[3]]    # (2)
DT[w] 
```

请注意，以下功能请求将使方法 (1) 与方法 (2) 一样快：

[FR#2330 优化 .SD[i] 查询以保持优雅但使其更快不变。](https://r-forge.r-project.org/tracker/index.php?func=detail&aid=2330&group_id=240&atid=978)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T17:38:43.603

这样的事情怎么样？（合成数据旨在模仿我可以从问题中推断出的关于您的信息）

```
tmp <- data.table(id = sample(1:20, 1e6, replace=TRUE),
                  date = as.Date(as.integer(runif(n=1e6, min = 1e4, max = 1.1e4)),
                                 origin = as.Date("1970-01-01")),
                  data1 = rnorm(1e6),
                  data2 = rnorm(1e6),
                  data3 = rnorm(1e6))

> system.time(X <- tmp[, lapply(.SD, tail, 1), by = list(id, date)])
  user  system elapsed 
  1.95    0.00    1.95

> system.time(Y <- tmp[, list(tail(data1, 1)), by = list(id, date)])
  user  system elapsed 
  1.24    0.01    1.26 

> system.time({
    setkey(tmp, id, date)
    Z <- tmp[unique(tmp)[, key(tmp), with=FALSE], mult="last"]
})
  user  system elapsed 
  0.90    0.02    0.92 
```

保证相同顺序后 X 和 Z 相同：

```
> identical(setkey(X, id, date), setkey(Z, id, date))
[1] TRUE 
```

`lapply` `tail`my和 1-column之间的差异`tail`没有你的那么大，但是没有你的数据结构，很难说更多。

另外，请注意，此方法中的大部分时间都是设置密钥。如果表已经按分组列排序，它会非常快：

```
> system.time(Z <- tmp[unique(tmp)[, key(tmp), with=FALSE], mult="last"])
  user  system elapsed 
  0.03    0.00    0.03 
```

或者，您可以使用临时列将多列问题转换为 1 列问题：

```
> system.time({
  tmp[, row.num := seq_len(nrow(tmp))]
  W <- tmp[tmp[, max(row.num), by = list(id, date)]$V1][, row.num := NULL]
  tmp[, row.num := NULL]
})
user  system elapsed 
0.92    0.00    1.09 

> identical(setkey(X, id, date), setkey(W, id, date))
[1] TRUE 
```

# c# - XNA 4.0 中 AnisotropicClamp 和 AnisotropicWrap 的区别？

> ID：14143223
> 
> 赞同：2
> 
> 时间：2013-01-03T16:42:50.793
> 
> 标签：c#, xna

我知道这两种方法都是纹理过滤的方法，但是clamp和wrap有什么区别？哪一个更好？

编辑：我尝试使用集成显卡，发现 AnisotropicWrap 显示的 FPS 低于 AnisotropicClamp。AnisotropicWrap 渲染的纹理是否真的比 AnisotropicClamp 更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T14:57:45.263

采样器状态负责告诉图形设备如何将纹理坐标转换为纹素。假设您有一个四边形多边形，其 UV 坐标排列如下：

```
(0, 0)     (1, 0) 
  o----------o
  |          |
  o----------o
(0, 1)     (1, 1) 
```

纹理坐标的范围是 [0, 1]。渲染时，纹理的左上角将出现在多边形的左上角，纹理的右下角将出现在多边形的右下角，以此类推。

现在假设你像这样安排你的 UV 坐标：

```
(-1, -1)    (2, -1) 
  o----------o
  |          |
  o----------o
(-1, 2)     (2, 2) 
```

怎么了？没有正确的方法将这些坐标映射到纹理，因为它们超出了我们的 [0, 1] 范围！

答案是您必须通过指定采样器状态或采样器状态来*告诉*设备正确的方法是什么。 `WRAP``CLAMP`

一个`CLAMP`状态将纹理坐标钳制在 [0, 1] 范围内；坐标超出此范围的像素将显示最接近的有效纹素。

`WRAP`另一方面，状态假定纹理坐标是循环的。1.5 的坐标将被视为 0.5，-0.25 的坐标将被视为 0.75，依此类推。这会导致纹理*wrap*，使其具有平铺外观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:56:33.190

我不是 XNA 开发人员，但它们对我来说看起来不同。

[SamplerState.AnisotropicClamp](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.samplerstate.anisotropicclamp%28v=xnagamestudio.35%29.aspx)

> 包含各向异性过滤和纹理坐标钳制的默认状态。

[SamplerState.AnisotropicWrap](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.samplerstate.anisotropicwrap%28v=xnagamestudio.35%29.aspx)

> 包含各向异性过滤和纹理坐标环绕的默认状态。

还要检查这些链接；

*   [http://iloveshaders.blogspot.com/2011/04/using-state-objects-in-xna.html](http://iloveshaders.blogspot.com/2011/04/using-state-objects-in-xna.html)
*   [https://code.google.com/p/slimdx/](https://code.google.com/p/slimdx/)

# c# - C# - 如何并行代码一一锁定多个对象

> ID：14143226
> 
> 赞同：1
> 
> 时间：2013-01-03T16:43:02.030
> 
> 标签：c#, locking

我有这样的代码：

```
public void TablesUpdated(object sender, TablesUpdatedArgs args)
{
    lock (quotesLock)
    {
        while (!args.quotesQueue.IsNullOrEmpty())
            quotes.Enqueue(args.quotesQueue.Dequeue());
    }
    lock (securitiesLock)
    {
        while (!args.securitiesUpdates.IsNullOrEmpty())
            securities.Enqueue(args.securitiesUpdates.Dequeue());
    }
    lock (orderUpdatesLock)
    {
        while (!args.orderUpdates.IsNullOrEmpty())
            orderUpdates.Enqueue(args.orderUpdates.Dequeue());
    }
} 
```

这段代码的问题是我正在等待，`lock`而我可能会处理代码的其他部分。在我等待期间，代码的其他部分可能会被锁定！

假设`quotesLock`在 0 到 1 秒`securitiesLock`之间忙，在 1 到 2 秒`orderUpdatesLock`之间忙，在 2 到 3 秒之间忙。由于订单，我的代码将完全被阻止 3 秒。

但如果`qoutesLock`将是最后一个：

```
public void TablesUpdated(object sender, TablesUpdatedArgs args)
{
    lock (securitiesLock)
    {
        while (!args.securitiesUpdates.IsNullOrEmpty())
            securities.Enqueue(args.securitiesUpdates.Dequeue());
    }
    lock (orderUpdatesLock)
    {
        while (!args.orderUpdates.IsNullOrEmpty())
            orderUpdates.Enqueue(args.orderUpdates.Dequeue());
    }
    lock (quotesLock)
    {
        while (!args.quotesQueue.IsNullOrEmpty())
            quotes.Enqueue(args.quotesQueue.Dequeue());
    }
} 
```

代码将在 1 秒内执行。

问题是如何重写代码：

*   如果无法获取某些锁，则正在处理其他锁
*   没有创建额外的线程（因为那太昂贵了）。

`while`可能我应该用很多方法编写非常复杂的循环`TryEnter`。或者什么会更好？

**在现实中， upd**锁定的时间很短（大约 5-15 微秒）。所以转到另一个线程可能不是一个好主意，我认为一切都应该在同一个线程中完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:52:43.633

由于这些任务完全不相互依赖，因此最好将它们并行化。

这是一种方法：

```
Parallel.Invoke(new ParallelOptions(), () =>
    {
        lock (securitiesLock)
        {
            while (!args.securitiesUpdates.IsNullOrEmpty())
                securities.Enqueue(args.securitiesUpdates.Dequeue());
        }
    },
    () =>
    {
        lock (orderUpdatesLock)
        {
            while (!args.orderUpdates.IsNullOrEmpty())
                orderUpdates.Enqueue(args.orderUpdates.Dequeue());
        }
    },
    () =>
    {
        lock (quotesLock)
        {
            while (!args.quotesQueue.IsNullOrEmpty())
                quotes.Enqueue(args.quotesQueue.Dequeue());
        }
    }); 
```

由于您谈论的是持有相当长一段时间的锁，因此这很可能是净赢。由于它将依赖于线程池线程（因此很可能甚至不需要创建 3 个硬线程，尽管如果它们已经存在，它可以使用它们），您可以消除大部分线程开销。如果不出意外，这是对当前选项和您创建的任何其他解决方案进行基准测试的一种选择。

# php - 跨站点身份验证

> ID：14143228
> 
> 赞同：3
> 
> 时间：2013-01-03T16:43:05.477
> 
> 标签：php, asp.net, security, authentication, kentico

我有 2 个网站：

*   站点 A - 一个 asp.net 站点
*   站点 B - 一个 php 站点

我们在一个 asp.net 站点（实际上是一个 Kentico 站点）中拥有所有用户信息。现在，有一个业务要求，用户应该能够在站点 B 中使用相同的凭据登录。理想情况下，我们需要登录站点 A 并导航到站点 B 的用户，身份验证将是自动的。

有没有办法实现这种形式的身份验证。还是不可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T16:49:53.747

这不是身份验证问题，而是授权问题。一旦您以任何您想要的方式、使用您想要的任何技术对您的用户进行了身份验证，您可能会授予他们某种令牌，然后您将使用该令牌来授予对站点中不同资源的授权。

在您的情况下，您有两种不同的技术，这仅意味着您将无法使用开箱即用的 asp.net 或 php 会话管理，但您需要做的就是有一个共同的地方来检查会话令牌是有效的，它们属于合法用户，并且该用户有权访问此资源。

如果以上内容很简单，抱歉，您的问题可能更针对位于两个不同域中的站点，因此无法使用域 cookie 来存储会话信息。是这样吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T17:16:18.610

对此的规范解决方案是使用[OpenID](http://en.wikipedia.org/wiki/OpenID)之类的协议。OpenID 允许网站要求用户使用不同的网站进行身份验证，然后兑现这些凭据；使用称为“属性交换”的协议，身份验证提供者可以提供有关用户的附加数据。

OpenID 是 StackExchange 设法让您使用您的 Google 帐户（或您使用的任何帐户）登录的方式，以及 SO 网络中的站点如何识别您的身份，而无需您在任何地方登录。

OpenID 的好处是它是一种广泛使用的协议，因此它很可能是高度安全且经过良好测试的；您不会冒险编写自己的解决方案，也不会不小心让您的用户面临安全风险。它有据可查，并得到广泛支持。

.Net有一个[OpenID 框架，](http://www.dotnetopenauth.net/)可让您创建自己的 OpenID 提供程序；看来[Kentico 支持 OpenID 作为身份验证机制](http://www.kentico.com/Product/All-Features/Security/Authentication)。有几个用于 PHP 的 OpenID 库（Google 是你的朋友）。

具体如何实现这取决于您的 Kentico 身份验证现在是如何工作的，但原则上，将 Kentico 用户数据库与您编写的 OpenID 提供程序粘合起来应该相当容易；让 Kentico 使用它进行身份验证似乎是一种配置设置。您必须重新编写 PHP 站点才能使用 OpenID；再次，不清楚目前是如何工作的，但我无法想象它会比你可能尝试的任何其他解决方案更难。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T19:59:16.300

我在 .net 平台上遇到了类似的问题，我无法选择将它们放在一个子域上。在这种情况下，您可以传递用户名和令牌（表示用户已通过站点 B 的身份验证），也许还可以传递加密密码以针对外部数据库重新进行身份验证，然后将它们重定向到该站点。在我的情况下，我需要这样做，因为我正在为站点管理员重定向到相应的站点 CMS。

# android - 如何通过 SMS 在 TextView 中发送文本？

> ID：14143230
> 
> 赞同：1
> 
> 时间：2013-01-03T16:43:07.067
> 
> 标签：android, sms

我用笑话改进了我的应用程序，但我遇到了问题。我想添加“ `send by sms button`”并且我想通过发送文本`TextView`（`SMS`如果用户选择笑话并且他会想要发送`SMS`）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:03:12.247

## 1\. 在您的应用程序中集成短信管理器

### 在清单文件中添加权限::

```
 <uses-permission android:name="android.permission.SEND_SMS"/> 
```

* * *

```
 sendMySmsBtn=(Button)findViewById(R.id.send);
 sendMySmsBtn.setonclickListener(new OnClickListener(){
 public void Onclick()
   {
    sendSMS("99999999999", "message");
   });

  private void sendSMS(String phoneNumber, String message)
   {        
    SmsManager sms = SmsManager.getDefault();
    sms.sendTextMessage(phoneNumber, null, message,null, null);        
   } 
```

## 2\. 安装在您设备中的 Intenting SMS 应用程序

```
 int phoneNumber=9999999999; 
  Intent startSmsApp=new Intent(Intent.ACTION_VIEW, Uri.parse("sms:"
                    + phoneNumber);
  startSmsApp.putExtra("sms_body", message);
  startActivity(startSmsApp); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-03T16:55:01.113

请参阅[在 android 中发送短信](https://stackoverflow.com/questions/4967448/send-sms-in-android)。无法自动发送文本，Android 保护了该功能。此代码将启动一个 Intent 到 SMS 发送应用程序：

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("sms:"
                        + phoneNumber))); 
```

另请参阅[本教程](http://mobiforge.com/developing/story/sms-messaging-android)和[本教程](http://www.mkyong.com/android/how-to-send-sms-message-in-android/)。

# ruby-on-rails - iTunes 在哪里保存通过匹配驻留在 iCloud 上的文件的“trackid”

> ID：14143232
> 
> 赞同：2
> 
> 时间：2013-01-03T16:43:09.967
> 
> 标签：ruby-on-rails, macos, audio, metadata, itunes

目标是使用 iTunes 商店为仅驻留在 iCloud 上的文件更新音频元数据。我找到了一个方便的 Ruby 脚本，如果在本地重新下载文件[http://cl.ly/C3kK ，它将执行该任务](http://cl.ly/C3kK)

该脚本使我了解了 iTunes 商店 api，但是，我仍然需要 iTunes 商店 trackId，不要将其与本地/内部 trackId 或 persistentId 混淆。上面的脚本读取物理音频文件的第一个 MB 以查找幻数并存储后续整数。我偷看了 itunes 音乐 library.xml 没有运气。Itunes 将这些信息存储在我认为的某个地方。或者至少可以使用另一个 ID 从 iCloud 中检索元数据。最后，我会简单地使用来自 iTunes Store api 的结果更新 iTunes 音乐 library.xml。

我意识到有 iCloud iTunes api 调用，但在我深入研究该主题之前，我宁愿向专家发布一个问题。

任何关于这个主题的帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-25T23:14:05.263

我知道你发布这个问题已经有一段时间了，但我遇到了同样的问题并且能够解决这个问题。iTunes 商店 trackId 存储在 iTunes 匹配文件的下载版本中。如果从文件中获取前 1024 个字节的数据，则轨道 id 是字符串 'song' 之后的前 4 个字节的数据。您需要将其从带符号的 32 位整数转换为十进制。

示例：没有汽车走（街机火灾）

```
file_string = File.open(path, 'r').read(1024)
index = file_string.index('song')
@iTunes_id = file_string[index+4,4].unpack('N')[0]
print "Song ID: #{@iTunes_id}" 
```

结果是：

```
Song ID: 81607936 
```

现在，您可以使用该 ID 并从 iTunes 中查找曲目数据：

```
https://itunes.apple.com/lookup?id=81607936&country=US 
```

结果是：

```
{
 "resultCount":1,
 "results": [
{"wrapperType":"track", "kind":"song", "artistId":23203991, "collectionId":81607965, "trackId":81607936, "artistName":"Arcade Fire", "collectionName":"Arcade Fire EP", "trackName":"No Cars Go", "collectionCensoredName":"Arcade Fire EP", "trackCensoredName":"No Cars Go", "artistViewUrl":"https://itunes.apple.com/us/artist/arcade-fire/id23203991?uo=4", "collectionViewUrl":"https://itunes.apple.com/us/album/no-cars-go/id81607965?i=81607936&uo=4", "trackViewUrl":"https://itunes.apple.com/us/album/no-cars-go/id81607965?i=81607936&uo=4", "previewUrl":"http://a644.phobos.apple.com/us/r1000/060/Music2/v4/ba/95/be/ba95be41-4a03-4dea-2965-57dd5f0b66c0/mzaf_6092501386391248238.m4a", "artworkUrl30":"http://a5.mzstatic.com/us/r30/Music/y2005/m10/d01/h10/mzi.yfrupnuj.30x30-50.jpg", "artworkUrl60":"http://a2.mzstatic.com/us/r30/Music/y2005/m10/d01/h10/mzi.yfrupnuj.60x60-50.jpg", "artworkUrl100":"http://a5.mzstatic.com/us/r30/Music/y2005/m10/d01/h10/mzi.yfrupnuj.100x100-75.jpg", "collectionPrice":6.93, "trackPrice":0.99, "releaseDate":"2005-01-10T08:00:00Z", "collectionExplicitness":"notExplicit", "trackExplicitness":"notExplicit", "discCount":1, "discNumber":1, "trackCount":7, "trackNumber":3, "trackTimeMillis":364071, "country":"USA", "currency":"USD", "primaryGenreName":"Alternative", "radioStationUrl":"https://itunes.apple.com/station/idra.81607936"}]
} 
```

我希望这对 OP 或其他任何人有所帮助，我无法在其他任何地方找到此信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-06T06:26:54.583

我知道你发布这个问题已经有一段时间了，但我遇到了同样的问题并且能够解决这个问题。iTunes 商店 trackId 存储在 iTunes 匹配文件的下载版本中。如果从文件中获取前 1024 个字节的数据，则轨道 id 是字符串 'song' 之后的前 4 个字节的数据。您需要将其从带符号的 32 位整数转换为十进制。

# javascript - 如何第二次更改 getElementById？

> ID：14143234
> 
> 赞同：1
> 
> 时间：2013-01-03T16:43:26.227
> 
> 标签：javascript, getelementbyid, overlapping

我正在创建一个要求用户单击答案（单选按钮）的多项选择题。如果用户在选择答案之前单击检查答案按钮，则会提示他选择答案。这工作正常。但是，如果用户随后选择了错误的答案并单击了检查答案按钮，则会在先前的提示上显示适当的响应。我尝试更改 getElementById 以使提示显示“”，但它不起作用。任何帮助，将不胜感激。

```
for (i = 0; i < len; i++) {
    if (document.Questions.Q_ans[i].checked == false) {
        document.getElementById("reply_b").innerHTML = "Select answer before continuing.";
    }
}

if (document.getElementById('answer_b').checked || document.getElementById('answer_c').checked) {
    document.getElementById("reply_a").innerHTML = incorrect;
    document.getElementById("reply_b").innerHTML = "";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:02:55.013

使用 Jquery，将所有“document.getElementById('yourId')”替换为“$('#yourid')”，并且您必须`var len`为循环初始化一个。

js：

```
for (var i = 0; i < len; i++) {
    if (document.Questions.Q_ans[i].checked == false) {
        $("#reply_b").innerHTML = "Select answer before continuing.";
    }
}

if ($('#answer_b').checked || $('#answer_c').checked) {

    $("#reply_a").innerHTML = incorrect;
    $("#reply_b").innerHTML = "";      
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:48:51.010

此行失败，因为`incorrect`应将其定义为变量或用引号引起来：

```
document.getElementById("reply_a").innerHTML = "incorrect"; // <-- Should be in quotes 
```

所以你的脚本永远不会执行之后的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T17:04:23.517

正如@brian buck 所说，您的脚本不会在`incorrect`应该是定义的变量或用引号括起来的语句之后执行（作为字符串执行）。你的脚本默默地失败了，基本上什么都不做（至少，你什么都看不到）。

这里我也推荐几件事：

*   确保`var i`在循环中使用以避免范围错误
*   您的第一次循环检查对我来说似乎有点奇怪：对于每个（假设的）可能未检查的答案，您都会显示相同的错误。这并不重要，但是您的脚本每次都做某事而不是一次。比方说，您可以拥有一个布尔值，当您发现某个答案已在某处检查时切换，并根据该布尔值的值在最后分配您的错误语句。但是，对于这种情况，我的“裸”JS 有点生疏，我完全确信有更好的解决方案！
*   看来您没有收到脚本失败的通知，我认为您没有使用任何调试器。如果您在 Web 浏览器中执行 JS，则可以使用嵌入式控制台。否则，有很多工具可以帮助你很多。我记得刚开始玩 JS 的时候就掉头发了，因为每次不开心的时候都会沉默……

# xml - 无法使用 Powerbuilder .NET Web 服务打开文件

> ID：14143236
> 
> 赞同：0
> 
> 时间：2013-01-03T16:43:50.403
> 
> 标签：xml, web-services, iis-7, powerbuilder

我正在使用 PB 11.5 部署一个 .NET Web 服务，我试图在使用它之前在服务器上对其进行测试。此 WS 将数据库中的 blob 加载到 Image 文件中，并将其保存在本地。稍后我将使用第三方工具进一步将此文件操作为 pdf。这个过程在我的本地机器上工作得很好，但在文件的打开命令期间似乎得到了堆栈：

```
li_FileNum = FileOpen(is_Openfilename[li_fileindex], StreamMode!, Write!, Shared!, Replace!) 
```

我得到-1的回报。从数据库加载 blob 是成功的，我可以看到它的大小返回。我不确定这是权限问题还是其他问题。我试图打开文件的文件夹为每个人设置了权限。Web 服务器正在运行带有 Windows Server 2008 R2 的 IIS 7.0。

我正在使用 IE 测试页面测试 WS 并呈现我需要传递初始值的函数。

有任何想法吗？

提前致谢。

晒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:55:09.340

在一位值得信赖的同事的帮助下，我在周五下午晚些时候解决了这个问题。我们将文件夹权限添加到 Web 服务器上的组 IIS_IUSRS 和 IUSR。我终于能够在服务器上打开文件，并且可以使用应用程序文件夹上的虚拟路径更深入地找到它。我将我的打开文件代码更改为不使用路径：li_FileNum = FileOpen(is_Openfilename[li_fileindex], StreamMode!, Write!, Shared!, Replace!) 并且能够在以下位置找到文件：From application Folder \ws_ios_transfer_root\file\ session_*网络服务*_\c

# c# - C# 的输入对话框

> ID：14143238
> 
> 赞同：0
> 
> 时间：2013-01-03T16:44:05.443
> 
> 标签：c#, winforms

我正忙于一个练习，我想要一个 InputDialog，用户可以在其中输入信息。我认为没有使用 java 找到 InputDialog 的 C# 版本，我所做的是添加一个额外的 Windows 窗体并在按钮单击事件中调用它。

我遇到的问题是一个线程也需要在同一个事件中触发，并且想在我调用线程之前询问有关如何接收用户数据（此案例名称）的建议？

```
private void butStartThread_Click(object sender, EventArgs e)
    {
        string name;
        //opening the 'InputDialog'
        new Form2().Show();
        ////retrieving the name received from Input Dialog
        name = NameClass.Name;
        //thread called in same handler
        Thread randomImages = new Thread(new ThreadStart(this.chooseRandomImage));

        randomImages.Start();
        labUserName.Text = name;
     } 
```

我比较缺乏经验，所以有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T16:50:45.207

```
string input = Microsoft.VisualBasic.Interaction.InputBox("Prompt", "Title", "Default", 0, 0); 
```

你可以在 C# 中使用你的 Inputdialog，取自 VB ;)

# opengl - System.Drawing.SolidBrush 使用什么混合方程？

> ID：14143241
> 
> 赞同：0
> 
> 时间：2013-01-03T16:44:18.700
> 
> 标签：opengl, gdi, alphablending, blending, direct3d11

我有一些使用 System.Drawing.SolidBrush 绘制半透明三角形的 GDI 代码。我正在尝试使用适当的 3D 渲染 API (OpenGL/Direct3D11) 重新实现代码，但我不确定这些三角形使用什么混合方程来获得与原始 GDI 代码相同的输出。

我认为它是相对简单的东西，比如加法混合（func=GL_FUNC_ADD，eq=GL_ONE，GL_ONE）或插值（func=GL_FUNC_ADD，eq=GL_SRC_ALPHA，GL_ONE_MINUS_SRC_ALPHA），但看起来都不太正确。这几乎可以肯定是我的新代码中的一个错误，但我想确保在继续之前我正在朝着正确的目标努力。有人知道合适的混合方程式吗？

**编辑**：这是相关的 C# 代码，没有上下文：

```
using System.Drawing;
SolidBrush b = new SolidBrush(Color.FromArgb(alpha,red,green,blue));
Point[] points = ...;
Graphics g;
g.FillPolygon(b,points); 
```

我的问题是，根据画笔的 RGBA 和目标像素的 RGBA，实际会写入什么颜色？我能找到的所有文档都只是说“使用 alpha 来控制画笔的透明度”或同样模糊的东西；我很好奇实际的混合方程是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-07T10:45:41.987

根据[MSDN](https://msdn.microsoft.com/en-us/library/system.drawing.graphics.compositingmode(v=vs.110).aspx)，`System.Drawing.Graphics`有一个名为的属性[`CompositingMode`](https://msdn.microsoft.com/en-us/library/system.drawing.drawing2d.compositingmode(v=vs.110).aspx)，可以是`SourceOver`或`SourceCopy`。

默认的是`SourceOver`,

> 指定在渲染颜色时，将其与背景颜色混合。混合由正在渲染的颜色的 alpha 分量决定。

正如我测试过的，这里使用的混合策略是[alpha composition](https://www.wikiwand.com/en/Alpha_compositing) ，它通过以下等式确定区域*图像 A 与图像 B*中的像素值：

[![阿尔法成分方程](../Images/9002c31c886af5d285f65fff7520f361.png)](https://i.stack.imgur.com/0FL8Z.png)

这里 α [a]和 α [b]是图像 A 和图像 B 的归一化 alpha 值；C [a]和 C [b]是图像 A 和图像 B 的 RGBA 值；C [o]是输出图像的 RGBA 值。

# c# - 在 WebAPI 中设置每个请求仅存在应用程序的变量

> ID：14143244
> 
> 赞同：3
> 
> 时间：2013-01-03T16:44:22.803
> 
> 标签：c#, asp.net, asp.net-web-api

我正在使用带有 SSL 的基本身份验证来使用 ASP.NET WebAPI 保护我的 API。我不想使用 cookie 或会话变量，但我需要在请求的生命周期内提供一些可用且可访问的凭据。

我有一个 RoleProvider 和一个访问 ActionFilter 以及对我的存储库的调用，它们都需要访问这些数据。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T19:00:53.623

您是否有理由不能将它们放入请求上下文中？

```
HttpContext.Current.Items.Add("credentials", CredentialObject); 
```

编辑：不要使用我上面的建议。请参阅评论中的链接以获得更好、可测试的答案。

# android - 从 Android 中的 HTTPS url 获取 JSON 响应时出现异常

> ID：14143247
> 
> 赞同：-1
> 
> 时间：2013-01-03T16:44:25.097
> 
> 标签：android, json, https

我从 HTTPS 获得 Json 响应并获得异常

```
javax.net.ssl.SSLException: Not trusted server certificate 
```

下面是我的代码，无论我尝试使用 HttpGet 还是 HttpPost，我都会在该行得到异常

```
HttpResponse httpResponse = httpClient.execute(request); 
```

这些是下面用于从 url 获取数据的代码。

```
DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost request = new HttpPost(urlString);
        HttpResponse httpResponse = httpClient.execute(request); 
```

希望能得到这个问题的答案。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:51:27.670

该错误意味着无法建立服务器证书的有效性。这可能有多种原因，例如，受信任的根证书不可用。

您可以从浏览器连接到该页面吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:54:35.407

在为我的学校开发应用程序时，我遇到了类似的问题。诀窍是创建两个覆盖证书验证的类。`HostnameVerifier`每次`verify()`调用时都会扩展并返回 true ，就像 t [this](http://code.google.com/p/android-tjintranet/source/browse/trunk/src/edu/tjhsst/androidIntranet/login/AllVerifier.java)一样。另一个并像[这样](http://code.google.com/p/android-tjintranet/source/browse/trunk/src/edu/tjhsst/androidIntranet/login/LoginIOThread.java)`class extends X509TrustManager`覆盖。`getAcceptedIssuers()`

然后您可以设置 HttpsURLConnection 使用此代码接受所有证书

```
 HttpsURLConnection.setDefaultHostnameVerifier(new AllVerifier());
 try
  {
   SSLContext sslContext = SSLContext.getInstance("TLS");
   sslContext.init(null, new TrustManager[] { new AllTrustManager() }, null);
   HttpsURLConnection.setDefaultSSLSocketFactory(sslContext.getSocketFactory());
     } catch (KeyManagementException e) {
       e.printStackTrace();
     } catch (NoSuchAlgorithmException e) {
       e.printStackTrace();
   } 
```

这应该够了吧。您可以在 run() 方法中看到我如何在此处使用[此代码。](http://code.google.com/p/android-tjintranet/source/browse/trunk/src/edu/tjhsst/androidIntranet/login/LoginIOThread.java)

# php - 交换单个数组中的最高值和最低值 - PHP

> ID：14143248
> 
> 赞同：1
> 
> 时间：2013-01-03T16:44:27.047
> 
> 标签：php, arrays, indexing, swap

我是 PHP 新手。一位朋友正在帮助我了解这一点，但他有一段时间没有空。我知道有些事情可能根本没有意义（我正在学习，而且我知道这不完全是初学者功能）。

目标： 1\. 找出数组 ($lemons) 中的最高值和最低值。2\. 切换所述值的位置。（即：6、2、7、8、0、9 --> 6、2、7、8、9、0）。

## 谢谢！

```
 <?php
 function switcheroo($lemons) {
    $min_lemons = min($lemons);
    $max_lemons = max($lemons);
    foreach ($lemons as $key => $value) {
        if ($max_lemons > 0) {
            $max_decoy = $min_lemons;
        }
        if ($min_lemons < 0) {
            $min_decoy = $max_lemons;
        }
    }
    return $lemons;
 }
 $lemons = array(6, 2, 7, 8, 0, 9);
 print_r(switcheroo($lemons));
 ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:00:09.300

试试这个.. 我不是最擅长 PHP，但我发现这很有趣！

```
<?php
$array = array(3,6,12,7,3,6);
print_r($array);

$max = max($array);
$min = min($array);
$maxKey = array_search($max, $array);
$minKey = array_search($min, $array);

$array[$maxKey] = $min;
$array[$minKey] = $max;

echo '<br />';
print_r($array);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T16:52:44.410

这可能不是最优雅的解决方案，但它可以按预期工作：

```
$arr = array(6, 2, 7, 8, 0, 9);

echo 'Array before: <br /><pre>', print_r($arr, true);

function switcheroo($array) {
    $new_array = $array;

    $min_lemons = min($new_array);
    $max_lemons = max($new_array);

    $min_lemons_key = array_search($min_lemons, $new_array);
    $max_lemons_key = array_search($max_lemons, $new_array);

    $new_array[$min_lemons_key] = $max_lemons;
    $new_array[$max_lemons_key] = $min_lemons;

    return $new_array;
}

echo 'Array after: <br />', print_r(switcheroo($arr), true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T17:11:45.097

对于这样的事情，最好不要使用`foreach`语法，因为您没有使用关联数组，这会使使用数组变得更加困难，而且它并没有真正教给您太多东西。在这种情况下，一个简单的`for`循环是最好的，同时也是跨语言的主要内容。

```
// prepare the lemons.
$lemons = array(6, 2, 7, 8, 0, 9);
print_r($lemons);

// initialize these values to assume that the first element is
// both the max and min as the initial basis for comparison.
$cur_max = $lemons[0];
$cur_max_index = 0;
$cur_min = $lemons[0];
$cur_min_index = 0;

// iterate through the array
for( $i=0; $i<count($lemons); $i++ ) {
    if( $lemons[$i] > $cur_max ) {
        $cur_max = $lemons[$i];
        $cur_max_index = $i;
    } else if( $lemons[$i] < $cur_min ) {
        $cur_min = $lemons[$i];
        $cur_min_index = $i;
    }
}

// do the swap. I am ignoring the fact that we already have the
// max/min values to illustrate a 'proper' swap.
$temp_val = $lemons[$cur_min_index];
$lemons[$cur_min_index] = $lemons[$cur_max_index];
$lemons[$cur_max_index] = $temp_val;

print_r($lemons); 
```

在学习编程基础知识时，应尽量避免使用 'helper' 函数，如`min()`和`max()`。从表面上看，练习的目的是让您熟悉开始编写基本排序算法所需的数组和逻辑操作。

# c++ - 从 `stringstream` 读取二进制数据

> ID：14143249
> 
> 赞同：1
> 
> 时间：2013-01-03T16:44:28.473
> 
> 标签：c++, eof, stringstream

有关更多背景，[请参见此处](https://stackoverflow.com/questions/14142649/creating-an-iostream-object-in-c/14142686)

我正在使用 a`stringstream`来读取二进制数据。到目前为止，我只是在编写一个虚拟程序来适应课程。这是我的程序：

```
#include <sstream>
#include <iostream>
#include <iomanip>
#include <cstdio>

using namespace std;

string bytes2hex(char* bytes, int n){
    stringstream out;
    for (int i = 0;i < n;i++){
        out << setfill ('0') << setw(2) << hex << (int) bytes[i] << " ";
    }

    string st = out.str();
    for(short k = 0; k < st.length(); k++)
    {
        st[k] = toupper(st[k]);
    }

    return st;
}

int main(){
    stringstream ss;

    ss << "hello the\0re my\0\0\0 friend";

    while (ss.peek() != EOF){
        char buf [2];
        ss.get(buf, 3);
        cout << buf << "\t==>\t" << bytes2hex(buf, 2) << endl;
    }
} 
```

输出：

```
he  ==> 68 65 
ll  ==> 6C 6C 
o   ==> 6F 20 
th  ==> 74 68 
e   ==> 65 00 
    ==> 00 00 
```

我对此有两个问题：

1.  为什么当我执行时`ss.get()`，我必须输入 3，而不是 2，才能一次读取流 2 个字符？
2.  为什么它会在第一个空字符处终止，我该如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T17:06:06.433

关于第一个问题：
[`istream::get`](http://en.cppreference.com/w/cpp/io/basic_istream/get)想要形成一个有效的 C 风格字符串，它读取的内容，因此指定读取比您传递的缓冲区大小少一个字符，并将一个`'\0'`字符存储在最后一个位置。
实际上，您还应该扩展`buf`为 3 个字节长，因此`ss.get`将保持在范围内。

关于第二个问题：
第一个字符的截断`'\0'`已经发生在插入字符串流时。原因是，当您插入 C 样式字符串（包括字符串文字）时，代码会在第一个`'\0'`字符处停止处理它，因为这是 C 样式字符串的定义。

您可以通过这种方式正确地用数据填充您的字符串流：

```
ss << string("hello the\0re my\0\0\0 friend", 25); 
```

其中`25`来自二进制输入的长度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T16:56:00.427

istream.get 用于读取文本数据，并在读取或`\n`遇到 n-1 个字符时停止读取。如果要读取二进制数据，请使用以下命令：

> `ss.read(buf, 2)`

# shell - 无法让 shell 脚本使用简单的条件语句

> ID：14143251
> 
> 赞同：1
> 
> 时间：2013-01-03T16:44:36.110
> 
> 标签：shell

这是一个更大项目的一部分，但我无法让这部分工作，而且我脑子里放了个屁。

```
#!/bin/bash

echo -n "Do you wish to download/checkout the source code? > "
read text
if ["$text" = "Yes"]
then
    do something
else
    do something else
fi 
```

它应该只是读取用户键入的内容，然后通过一个简单的条件。但我得到这个错误

```
./check.sh: line 6: [Yes: command not found 
```

我以为我已经正确格式化了 shell 脚本，但我猜不是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:46:16.693

在括号后添加空格：

`if [[ "$text" = "Yes" ]]`

在对字符串执行操作时，使用双方括号总是一个好主意。它将使您的代码与空格和新行一起正常工作。

# ios - SBJson iOS 解析器方法已弃用？

> ID：14143256
> 
> 赞同：5
> 
> 时间：2013-01-03T16:45:00.653
> 
> 标签：ios, json, sbjson

我正在使用 SBJson 解析器开始一个新项目，人们似乎将其推荐为互联网上新 iOS 项目的最佳选择。我遇到了一个非常严重的问题，即 Stig Brautaset 声称您可以在[当前版本 (3.1)](http://stig.github.com/json-framework/api/3.1/)上使用的当前方法似乎已被弃用，或者至少这就是我的编译器所说的。我似乎无法工作：

```
NSDictionary *dict = [responseString JSONValue]; 
```

这似乎是执行此操作的最新方法，或者：

```
NSDictionary *dict = [parser objectWithString:responseString error:&error]; 
```

其中 parser 是一个 sbjson 解析器。XCode 突出显示了这两个函数并告诉我它们已被弃用。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T16:52:54.223

查看源代码[here](https://github.com/stig/json-framework/blob/master/Classes/SBJsonParser.h)和[here](https://github.com/stig/json-framework/blob/master/Classes/NSObject+SBJson.h)看起来两者

```
- (id)objectWithString:(NSString*)jsonText error:(NSError**)error 
```

和

```
- (id)JSONValue; 
```

自 3.2 版以来已弃用，并将在 4.0 版中删除。你确定你用的是3.1？

另一方面双方

```
- (id)objectWithString:(NSString *)repr; 
```

和

```
- (id)objectWithData:(NSData*)data; 
```

看起来可用且未弃用。

我建议你改用它们。

另一种方法是使用 Apple 提供的[NSJSONSerialization](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:46:00.213

只是使用 xcode it self 轻松解决问题的一般方法。每当不推荐使用任何代码行时，最好按住键盘上的“alt”键并移过引发问题的对象并单击。Xcode 然后建议编写代码的更好方法。希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-15T16:52:44.397

尝试替换：

```
NSDictionary *dict = [responseString JSONValue]; 
```

和：

```
NSDictionary *dict = [[SBJsonParser new] objectWithString:responseString]; 
```

或更好：

```
SBJsonParser *parser = [SBJsonParser new];
id object = [parser objectWithString:responseString];
if (parser.error || ![object isKindOfClass:[NSDictionary self]])
    @throw parser.error ?: @"not a json dictionary";// or any error handling alternative
NSDictionary *dict = object; 
```

# context-free-grammar - 确定给定语言是否是常规/上下文无关/非上下文无关

> ID：14143261
> 
> 赞同：4
> 
> 时间：2013-01-03T16:45:13.390
> 
> 标签：context-free-grammar, regular-language, automata, formal-languages

我需要一些帮助来确定给定的语言是常规的、上下文无关的还是非上下文无关的。答案中简短的非正式解释就足够了，因此无需使用抽水引理。

可以说我有以下语言：

```
L1 = { w ∈ {a, b, c, d}* | #a(w) is even, #b(w) = 1 mod 3, w does not have 
                           a substring abc }

L2 = { w  ∈ {a, b, c, d}* | #a(w) is even, #b(w) < #c(w) }

L3 = { w  ∈ {a, b, c, d}* | #a(w) < #b(w) < #c(w) } 
```

这是我的解决方案：

```
L1 = L2 ∩ L3 ∩ L4 where

L2 = #a(w) is even
L3 = #b(w) = 1 mod 3
L4 = w does not have a substring abc 
```

可以为 L2 构造一个 DFA，因为 L2 不需要无限的内存，所以 L2 是规则的。对于 L3 的推理与上述相同。对于 L4，我们可以构造一个根本不接受“abc”的 DFA，因此是常规的。

L1 是正则的，因为正则语言在 ∩ 下是封闭的。

对于 L2，我们可以将语言分为：

```
L2 = L3 ∩ L4 where

L3 = #a(w) is even
L4 = #b(w) < #c(w) 
```

我们知道可以为 L3 构造 DFA，因此 L3 是规则的。L4 是上下文无关的，因为我们可以构建一个 PDA，其中堆栈用于计算 a:s 和 b:s 的数量。

L2 因此是上下文无关的，因为常规语言和上下文无关语言的 ∩ 导致上下文无关语言。

对于 L3，我们可以看到它是非上下文无关的，因为我们被限制为 1 个堆栈，并且要进行超过 1 个比较，我们需要更多的堆栈。

是我的推理权利吗？我很快就要考试了，需要知道我是否有这个想法。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T17:08:37.920

是的，你在所有三个方面都是正确的。L1 是常规的，L2 是上下文无关的，L3 不是上下文无关的。您正确地为 L1 和 L2 应用了闭包属性，并且您的推理对于最后一个或多或少是正确的。对于最后一个，我会提醒您不要使用该规则......因为可能有不止一种方法可以考虑如何识别一种语言，其中一些需要更多的堆栈，而其中一些不需要. 以非上下文无关语言 L = {a^nb^nc^n} 为例。这种语言的补充是与上下文无关的，尽管草率地应用您使用的规则可能会让您不相信（直到您正确考虑了这个问题）。

# asp.net-mvc - MVC RequireHttps 属性一文不值？

> ID：14143262
> 
> 赞同：2
> 
> 时间：2013-01-03T16:45:14.907
> 
> 标签：asp.net-mvc, security, razor, https, custom-attributes

我需要允许用户通过我的 asp.net MVC 应用程序中的表单更改他们的密码。我的第一个想法是用 RequireHttps 属性装饰 ChangePassword 操作。

但是，在属性启动并返回“请求的资源只能通过 SSL 访问”之前，我仍然必须发送未加密的密码。这违背了目的，不是吗？

我确信我只是感到困惑，RequireHttps 很有用；我想知道是否有办法使用 RequireHttps 来实现我的目标。或者，我想知道任何其他方式来实现它。

更新：

由于下面的答案，我现在有了一些选择 - 我可以使用 https 在 iframe 中加载密码输入，这意味着来自它的任何帖子都将被加密。否则，我可以在构造帖子 url 的代码中将协议设置为 https：

```
var url = '@Url.Action("changePassword", "Security", new { area = "" }, "https")' 
```

我不确定哪个更好，但我会尝试第二个 - 欢迎任何评论。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T16:53:34.983

您的应用程序无法控制是否启用 SSL。这仅取决于 Web 服务器配置。您唯一能做的就是确保您的应用程序不信任未在线加密的数据。RequireHttps 就是这样做的。使用此属性修饰的操作将永远不会处理以纯文本形式发送的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-20T15:20:18.197

的真正用例是仅在请求身份验证时`RequireHttpsAttribute`强制执行该方案。`https://`并非在所有情况下。RequireHttpsAttribute只实现了[IAuthenticationFilter](https://github.com/aspnet/AspNetWebStack/blob/749384689e027a2fcd29eb79a9137b94cea611a8/src/System.Web.Mvc/Filters/IAuthenticationFilter.cs)接口的[OnAuthentication方法。](https://github.com/aspnet/AspNetWebStack/blob/749384689e027a2fcd29eb79a9137b94cea611a8/src/System.Web.Mvc/RequireHttpsAttribute.cs)

由于仅在 InvokeAuthenticationFilters 方法中调用[OnAuthentication](https://github.com/aspnet/AspNetWebStack/blob/749384689e027a2fcd29eb79a9137b94cea611a8/src/System.Web.Mvc/ControllerActionInvoker.cs#L253)方法，因此我不会使用该`RequireHttpsAttribute`属性。

为了正确执行`https://`某些控制器或操作，我将创建自己的属性，基于`ActionFilterAttribute`：

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, AllowMultiple = false, Inherited = true)]
public class EnforceHttpsActionFilterAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        base.OnActionExecuting(filterContext);

        if (new[] { "GET", "HEAD" }.Any(verb => String.Equals(filterContext.HttpContext.Request.HttpMethod, verb, StringComparison.OrdinalIgnoreCase))) ;
        {
            string url = "https://" + filterContext.HttpContext.Request.Url.Host + filterContext.HttpContext.Request.RawUrl;
            filterContext.Result = new RedirectResult(url);
        }
    }
} 
```

要对整个站点强制执行，您可以从我用于示例应用程序实例的[web.config 标记](https://github.com/Kentico/cloud-sample-app-net/blob/develop/DancingGoat/Web.config#L32)`https://`中获得灵感。`*.azurewebsites.net`

```
 <system.webServer>
    <rewrite>
      <rules>
        <rule name="HTTPS Redirect in Azure">
          <match url="(.+)" />
          <conditions>
            <add input="{HTTPS}" pattern="^OFF$" />
            <add input="{HTTP_HOST}" pattern="^(.+)\.azurewebsites.net(.*)$" />
          </conditions>
          <action type="Redirect" url="https://{HTTP_HOST}/{R:1}" appendQueryString="true" redirectType="SeeOther" />
        </rule>
      </rules>
    </rewrite>
  </system.webServer> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-03T02:34:26.733

注意：该`[RequireHttps]`属性不处理`HEAD`请求，而是给出异常，因此某些蜘蛛程序或预取工具在尝试访问您的站点时会出错。

[无论如何，最好在 IIS 中使用rewrite 模块](https://docs.microsoft.com/en-us/iis/extensions/url-rewrite-module/creating-rewrite-rules-for-the-url-rewrite-module)做这样的事情。

```
 <rule name="Redirect to http" enabled="true" patternSyntax="Wildcard" stopProcessing="true">
        <match url="*" negate="false" />
        <conditions logicalGrouping="MatchAny">
            <add input="{HTTPS}" pattern="off" />
        </conditions>
        <action type="Redirect" url="https://{HTTP_HOST}{REQUEST_URI}" redirectType="Found" />
    </rule> 
```

取自这里：[https ://blogs.technet.microsoft.com/dawiese/2016/06/07/redirect-from-http-to-https-using-the-iis-url-rewrite-module/](https://blogs.technet.microsoft.com/dawiese/2016/06/07/redirect-from-http-to-https-using-the-iis-url-rewrite-module/)

**重要提示**：迁移到新服务器时不要忘记重新安装重写模块 - 如果您忘记了，您得到的错误有点迟钝！

# javascript - 通过 URL 哈希链接触发打开 Zurb Foundation Accordion

> ID：14143266
> 
> 赞同：3
> 
> 时间：2013-01-03T16:45:25.143
> 
> 标签：javascript, jquery, accordion, zurb-foundation

我真的很希望能够通过带有手风琴窗格的 URL 来“激活”/“打开”Zurb Foundation Accordion。

就像 example.com/page#accordion1

Foundation 已经可以做到这一点还是很容易实现？老实说，我没有任何线索：-/

提前感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T18:27:34.050

您可以通过为每个手风琴标题添加一个唯一属性来做到这一点。`<div class="title" data-ref="panel-1">`在这种情况下，我添加了一个`data-ref`属性。然后您需要添加一些 jQuery 来查看哈希，如果它是手风琴面板，则单击该面板。

### HTML

```
<ul class="accordion">
  <li class="active">
    <div class="title" data-ref="panel-1">
      <h5>Accordion Panel 1</h5>
    </div>
    <div class="content">
      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
    </div>
  </li>
  <li>
    <div class="title" data-ref="panel-2">
      <h5>Accordion Panel 2</h5>
    </div>
    <div class="content">
      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
    </div>
  </li>
  <li>
    <div class="title" data-ref="panel-3">
      <h5>Accordion Panel 3</h5>
    </div>
    <div class="content">
      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
    </div>
  </li>
</ul>​ 
```

### jQuery

```
jQuery(function() { // Document ready shorthand
    // Get the hash and remove the #
    var hash = window.location.hash.replace('#', '');

    if (hash != '') {
        // Cache targeted panel
        $target = $('.title[data-ref="' + hash + '"]');

        // Make sure panel is not already active            
        if (!$target.parents('li').hasClass('active')) {
            // Trigger a click on item to change panel
            $target.trigger('click');
        }
    }
});​ 
```

[在行动中查看](http://jsfiddle.net/nTLNT/4/show/#panel-2)

[编辑代码](http://jsfiddle.net/nTLNT/4/)

*注意事项：在 jsfiddle 编辑时，哈希将不起作用。需要在完整模式下查看。*

# 更新

如果您想要一个打开面板并更新哈希的链接。您需要在链接中添加一个特定的类。在我的示例中，我添加`panel-btn`

### HTML

```
<a href="#panel-2" class="panel-btn">Goto Panel 2</a> 
```

### jQuery

```
$('.panel-btn').click(function(e){
    // Get the links href and remove the #
    target_hash = $(this).attr('href').replace('#','');  

    // Click targeted panel
    $('.title[data-ref="' + target_hash + '"]').trigger('click');

    // Update hash, so that if page is refreshed, target panel will open
    window.location.hash = target_hash;

    // Stop all default link functionality
    return false;
}); 
```

[更新了 jsfiddle 视图](http://jsfiddle.net/nTLNT/7/show/)

[更新了 jsfiddle 代码](http://jsfiddle.net/nTLNT/7/)

如果您在单击每个面板时正在寻找更多历史记录。您需要为每个事件添加一个点击事件`.title`并获取它`data-ref`并将哈希更改为该事件，如下所示：

```
$('.title').click(function(){
  // Get the data-ref
  hash = $(this).attr('data-ref');

  // Set hash to panels hash
  window.location.hash = hash;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-12T10:58:46.963

如果您使用的是 Foundation 5：

Foundations Accordion 有一个`click.fndtn.accordion`您可以使用的自定义事件。它将处理正确的打开/关闭状态：

```
jQuery(document).ready(function($) {
  var hash = window.location.hash;

  if (hash != '') {
    $('[data-accordion] [href="' + hash + '"]').trigger('click.fndtn.accordion');
  }
}); 
```

请参阅此处的示例，它将通过检测窗口哈希（由代码中的虚拟哈希模拟）以编程方式在页面加载时打开第二个选项卡：

[http://jsfiddle.net/ynyrrm99/](http://jsfiddle.net/ynyrrm99/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-03T08:50:11.453

链接到页面而不设置指向数据选项卡的链接或任何其他设置。从基础 5.5.1 开始，它将在页面加载时使用哈希值解析 uri……这意味着您如何设置原始链接并不重要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-09T21:46:30.933

为 URL 中的散列设置一个变量，为内容面板 div 提供与散列中相同的 id。然后将一个 .active 类添加到与您的链接具有相同 id 的面板中。

```
if(window.location.hash) {
  var hash = window.location.hash; 
  $( hash ).addClass( "active" );
} 
```

# c - 函数中的 C 和指针 - 更改不保存

> ID：14143274
> 
> 赞同：1
> 
> 时间：2013-01-03T16:45:57.650
> 
> 标签：c, arrays, string, pointers, char

我有这个似乎可以工作的简单代码（我用调试器检查过），但是当函数执行结束时，字符串不会保存在原始变量中。

```
void getString(char *iText);

int main()
{
    char *inputText=malloc(sizeof(char));
    getString(inputText);
    puts(inputText);
    free(inputText);
    system("pause");

    return 0;
}

void getString(char *iText)
{
    char c;
    int i=0;

    while((c=getchar()) != '\n')
    {
        iText = realloc(iText,sizeof(char)*(i+1));
        iText[i]=c;
        i++;
    }

    iText = realloc(iText, sizeof(char)*(i+1));  
    iText[i]='\0';
} 
```

当这个小脚本结束时，我看到了一些

> ε■ε■ε■ε■ε■ε■ε■ε■ε■ε■ε■ε■▲יע`*

如果我在我的 main 函数中编写这段代码，它就可以工作，所以我猜这与我在函数中使用指针的方式有关。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T16:47:14.253

`getString`按值获取指针，因此无法更改调用者的指针。如果要重新分配字符串，请将指针传递给指针

```
int main()
{
    ....
    getString(&inputText);
    ....
}

void getString(char **iText)
{
    char c;
    int i=0;
    while((c=getchar()) != '\n')
    {
        *iText = realloc(*iText, i+1);
        (*iText)[i]=c;
        i++;
    }

    *iText = realloc(*iText, i+1);  
    (*iText)[i]='\0';
} 
```

我对您的代码进行了另一项小改动 -`sizeof(char)`保证为 1，因此`realloc`可以简化计算

# wordpress - 用于自定义内容的 Wordpress add_filter

> ID：14143278
> 
> 赞同：1
> 
> 时间：2013-01-03T16:46:10.853
> 
> 标签：wordpress, add-filter

谁能告诉我如何使用 add_filter 函数来确定页面的 plugin_dir_path ？

当我使用 get_post_type() 为我的 movie_reviews 设置一个寺庙时，没有问题但我不知道如何在无 register_post_type 上使用该函数。

我喜欢在 URL www.domain.com/user_profile 和表单 action action="search_result" 上使用自定义页面，但我不知道这在无 register_post_type 上是如何工作的

```
add_filter( 'template_include','include_template_function', 1 );

function include_template_function( $template_path ) {

    if ( get_post_type() == 'movie_reviews' ) {
        $template_path = plugin_dir_path( __FILE__ ) .'/single-movie_reviews.php';
    }
    if ( ....... == 'search_sesult' ) {
        $template_path = plugin_dir_path( __FILE__ ) .'/movie-searchresult_reviews.php';
    }
    if ( ....... == 'user_profile' ) {
        $template_path = plugin_dir_path( __FILE__ ) .'/user_profile.php';
    }   

    return $template_path;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T00:29:45.583

您可以为此使用[**条件标签**](http://codex.wordpress.org/Conditional_Tags)。

例如：

```
add_filter( 'template_include','include_template_function', 1 );

function include_template_function( $template_path ) {

    if( is_search() ) 
        $template_path = plugin_dir_path( __FILE__ ) .'/movie-searchresult_reviews.php';

    if( is_author() ) 
        $template_path = plugin_dir_path( __FILE__ ) .'/user_profile.php';

    return $template_path;
} 
```

# python - 线路太长。Django PEP8

> ID：14143284
> 
> 赞同：27
> 
> 时间：2013-01-03T16:46:21.303
> 
> 标签：python, django, pep8

PEP8 信息：

```
models.py:10:80: E501 line too long (83 > 79 characters) 
```

模型.py：

```
field = TreeForeignKey('self', null=True, blank=True, related_name='abcdefgh') 
```

如何正确写出这一行？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-03T16:53:12.660

这是“正确的”，PEP8 只是标记超过 79 个字符的行。但如果你担心这个，你可以这样写：

```
field = TreeForeignKey('self',
                       null=True,
                       blank=True,
                       related_name='abcdefgh') 
```

或这个：

```
field = TreeForeignKey(
    'self',
    null=True,
    blank=True,
    related_name='abcdefgh',
) 
```

或者，真的，任何其他可以将单行分成多个较短行的样式。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-03T17:09:54.690

我刚刚发现了一个名为 autopep8 的简洁程序！[https://github.com/hhatto/autopep8](https://github.com/hhatto/autopep8)

```
pip install autopep8
autopep8 -i models.py 
```

您还可以（递归地）执行以下操作：

```
autopep8 -ri package/ 
```

Auto PEP8 仅对文件进行安全更改，仅更改布局，而不更改代码逻辑。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-10-02T14:13:11.410

如果你有一些不方便分解的可笑的长字符串（想想 Sentry DSN、MIDDLEWARE 或 INSTALLED_APPS 中的偶尔模块），你可以把它放在`# noqa`行尾，而 linter 会忽略线。谨慎使用，绝对不要用于您要求的情况。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-03T16:52:15.377

这是非常主观的。如果我严格遵循 E501，我会写：

```
field = TreeForeignKey('self',
                       null=True,
                       blank=True,
                       related_name='abcdefgh') 
```

我通常认为 100 太长，而不是 80。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T17:19:26.377

我通常将其拆分以将参数排列成比原始行更深的缩进级别，例如：

```
field = TreeForeignKey('self', null=True,
    blank=True, related_name='abcdefgh') 
```

特别是如果`TreeForeignKey`是类似的东西`TreeForeignKeyWithReferencesToSomethingElse`，在这种情况下，如果您将所有参数与左括号对齐，所有参数将从窗口的最右侧开始。如果任何参数的名称很长，例如`defaultvalueforcertaincircumstances`，您可能无法将整个内容放入 80 列以下：

```
field = TreeForeignKeyWithReferencesToSomethingElse('self',
                                                    defaultvalueforcertaincircumstances='foo') 
```

我也更喜欢将多个函数参数放在同一行（除非它看起来不正确；我不是纯粹主义者！）这样垂直空间不会过度扩展，导致我花更多时间滚动我的编辑器比其他必要的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-17T11:00:10.347

`autopep8`也可以解决文件和整个项目中的间距问题，这里是文档的链接：[https ://github.com/hhatto/autopep8](https://github.com/hhatto/autopep8)

1.  `pip install --upgrade autopep8`
2.  `autopep8 --in-place --aggressive --aggressive <path_with_python_filename>`
    前任：`autopep8 --in-place --aggressive --aggressive C://a/test.py`

# html - bootstrap ul 项目均等分布

> ID：14143285
> 
> 赞同：0
> 
> 时间：2013-01-03T16:46:23.527
> 
> 标签：html, css, twitter-bootstrap

我正在尝试使用引导程序实现导航栏。我希望导航栏的第一项和最后一项具有 20px 的半径。但其他人不应该有任何边界半径。我几乎可以实现所有目标，但导航栏的最后一项没有填满导航栏的最后一个块。

我的html：

```
<div class="row-fluid">
 <div class="span6 offset4 navbar navbar-inverse" style="height: 40px; margin-top: -40px;">
  <div class="navbar-inner">
   <ul class="nav" id="myNav">
    <li>@Html.ActionLink("Home", "Index", "Home")</li>
    <li>@Html.ActionLink("Lorem", "Index", "Lorem")</li>
    <li>@Html.ActionLink("Ipsum", "Index", "Ipsum")</li>
    <li>@Html.ActionLink("Vivamus", "Index", "Vivamus")</li>
    <li>@Html.ActionLink("Praesent", "Index", "Praesent")</li>
    <li>@Html.ActionLink("Nulla", "Index", "Nulla")</li>
    <li>@Html.ActionLink("viverra", "Index", "viverra")</li>
    <li>@Html.ActionLink("viverra ", "About", "viverra")</li>
   </ul>
  </div>
 </div>
</div> 
```

我的CSS：

```
.navbar-inner {
min-height: 40px !important;
padding-left: 0px !important;
padding-right: 0px !important;
background-color: #45484D !important;
background-image: -moz-linear-gradient(top, #45484D,#252526) !important;
background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#45484D), to(#252526)) !important;
background-image: -webkit-linear-gradient(top, #45484D, #252526) !important;
background-image: -o-linear-gradient(top, #45484D, #252526) !important;
background-image: linear-gradient(to bottom, #45484D,#252526) !important;
background-repeat: repeat-x !important;
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#45484D', endColorstr='#252526', GradientType=0) !important;
border: none !important;
-webkit-border-radius: 20px !important;
-moz-border-radius: 20px !important;
border-radius:20px !important;
-webkit-box-shadow: 0 1px 4px rgba(0, 0, 0, 0.065) !important;
-moz-box-shadow: 0 1px 4px rgba(0, 0, 0, 0.065) !important;
box-shadow: 0 1px 4px rgba(0, 0, 0, 0.065) !important;
    overflow: hidden !important;
}
#myNav li:last-child a:last-child {
    border-right: 0px solid #424242 !important;

}
#myNav li a{
    padding-left: 20px;
    padding-right: 20px;
}
#myNav a {
    border-right: 1px solid #424242 !important;
    color: white !important;
    font-size: 16px !important;
    text-decoration: none !important;
    text-shadow: none !important;
}

ul#myNav li a:hover {

    color:  #0088cc !important;
    text-decoration: none;
    text-shadow: none;
}

ul#myNav li:first-child.active a{
    -webkit-border-radius: 20px 0 0 20px !important;
    -moz-border-radius: 20px 0 0 20px !important;
    border-radius: 20px 0 0 20px !important;
    background-color: #0088cc;
    color: #000 !important;
    text-shadow: none;
}
ul#myNav li:last-child.active a{

    -webkit-border-radius: 0px 20px 20px 0px !important;
    -moz-border-radius: 0px 20px 20px 0px !important;
    border-radius: 0px 20px 20px 0px !important;
    /*background-color: #0088cc;*/
    color: #000 !important;
    text-shadow: none;

}
ul#myNav li.active a{
    background-color: #0088cc;
    color: #000 !important;
    text-shadow: none;
} 
```

我正在使用以下 Jscript 为选定的项目着色，

```
$(document).ready(function () {
    var url = window.location;
    $('ul.nav a[href="' + url + '"]').parent().addClass('active');
    $('ul.nav a').filter(function() {
        return this.href == url;
    }).parent().addClass('active');
}); 
```

感谢您的帮助：）

# c# - 将项目添加到组合框

> ID：14143287
> 
> 赞同：4
> 
> 时间：2013-01-03T16:46:26.227
> 
> 标签：c#, .net, combobox

我有一个**组合框**控件。

我将此控件绑定到 DataSet 表。

这是代码：

```
comboBox.Items.Add(("Select"));
comboBox.DataSource = DataSet.ColorTable;
comboBox.DisplayMember = DataSet.ColorTable.ColorNameColumn.ColumnName;
comboBox.ValueMember = DataSet.ColorTable.ColorIDColumn.ColumnName; 
```

这个结果我得到：

![在此处输入图像描述](../Images/85e038bd2106ba7a168a430059e4315f.png)

我想在列表顶部显示**SELECT:** word。所以我需要向组合框控件添加附加项。这里我如何实现它：

```
cmbCategory.Items.Add(("Select")); 
```

但是结果还是和上面一样。**我只得到没有SELECT:**列表顶部的单词的颜色。

知道如何将这个字符串**- SELECT:**添加到 ComboBox 控件并设置为这个字符串`ValueMember`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T16:53:33.800

改用`Insert`方法。

```
cmbCategory.Items.Insert(0, "Select"); 
```

**注意：**将此代码放在数据绑定之后。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-06T02:38:59.540

您可以先将颜色集合添加到 an`array`或 a `dataset`（如果您从数据库中获取它们），然后添加项目“选择”，然后添加数组的每个元素或`dataset`.

在`Form_Load`函数中以及在颜色集合数组或数据库中进行更改的任何地方执行此操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-26T12:06:31.613

```
 //This will set Display member and value member
            comboBox.DisplayMember = "ColorName";
            comboBox.ValueMember = "ColorCode";

          //This will add a new row to table in binded dataset
            DataRow dr = dal.MyProperty_dsColors.Tables["ColorInfo"].NewRow();
            dr["ColorName"] = "Select Color"; //SomeName
            dr["ColorCode"] = 001; //Some ID
            dal.MyProperty_dsColors.Tables["ColorInfo].Rows.Add(dr); 

           //binding dataSource
            comboBox.DataSource = dal.MyProperty_dsColors.Tables["ColorInfo"]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-23T14:30:10.057

对您也有帮助的是，当弹出窗口到达时，您无需“选择”即可设置组合框...选择您的组合框，在属性选项卡下，选择外观->下拉样式并选择下拉列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-20T19:51:52.880

如果我们想在`combobox`（例如`integers`）中手动添加值，可以使用 for 循环来完成：

```
// sample code
int lower=1;
int higher=500;

for (int i=lower; i<=higher; i++)
 combo_values.Items.Add(i.ToString()); 
```

请注意，您必须使用该`int.Parse(combo_values.Text)`命令来读取值。

# interrupt - 如何在不键入 CTRL-C 也不引入 cin 或系统暂停的情况下中断 c++ 运行？

> ID：14143289
> 
> 赞同：1
> 
> 时间：2013-01-03T16:46:32.980
> 
> 标签：interrupt

我需要做很长的模拟，让我们这样说：

> 诠释我;
> 
> 矢量结果；
> 
> 而（真）
> 
> {
> 
> 我=随机（8）；
> 
> 如果 (i < 4) {result.push_back(i);}
> 
> }
> 
> cout <<结果;

有没有办法在不输入 CTRL-C 或不引入 cin 或系统暂停功能的情况下从控制台停止这个 while 循环做某事（例如按下一个键）？我想让这个while循环继续下去，直到我决定停止它！

# c# - onClick 事件未正确触发

> ID：14143295
> 
> 赞同：0
> 
> 时间：2013-01-03T16:46:49.680
> 
> 标签：c#, javascript, asp.net, html, deployment

我正在使用 ASP.NET 4.0 和 C#。我试图在提交数据之前在客户端进行一些验证。

这是javascript：

```
 function Validate() 
      {
        alert('Validating');
      // validation occurs...
      //...etc
       } 
```

这是我的asp控件：

```
<asp:Button ID="btnSubmit" runat="server" Text="Submit" CssClass="button" OnClientClick= "return Validate();" OnClick="BtnSubmit_Click" Enabled="True" /> 
```

最后这里是呈现的 html：

```
<input type="submit" name="ctl00$masterMain$btnSubmit" value="Submit" onclick="return Validate();" id="masterMain_btnSubmit" class="button" /> 
```

这是踢球者。验证通过 VS2010 在我的本地机器上完美运行。但是，在我将代码移动到 DEV 或 UAT 之后，“Validate()”事件将不会触发。还有很多其他的 javascript 代码可以工作，但由于某种原因，这个事件没有正确触发。有人知道为什么吗？我一直在试图理解为什么它在本地工作而不是在服务器上工作。

# redmine - Redmine - 在问题详细信息和电子邮件通知中显示提交消息

> ID：14143297
> 
> 赞同：0
> 
> 时间：2013-01-03T16:46:53.093
> 
> 标签：redmine

如何在问题详细信息和电子邮件通知中显示提交消息？关于问题通知，我知道我已经启动并运行它，但它在没有明显原因的情况下停止工作。目前，显示的有关提交的唯一信息是历史记录部分中的相关变更集。

提前感谢您的帮助，最好的问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:29:20.500

我想我已经知道问题出在哪里；有问题的项目是主项目的子项目，因此不可能将每个修订与特定问题相关联。

# javascript - 嵌套元素的绝对定位

> ID：14143305
> 
> 赞同：3
> 
> 时间：2013-01-03T16:47:16.260
> 
> 标签：javascript, html, css, css-position

我的问题与以下演示有关[http://jsfiddle.net/legrass/ca22L/](http://jsfiddle.net/legrass/ca22L/)和[http://jsfiddle.net/legrass/eER66/2/](http://jsfiddle.net/legrass/eER66/2/)。

简而言之，我需要突出显示页面上的一些元素（例如，通过红色边框），但不触及实际元素（以避免影响原始页面的布局）。为此，在 JS 中，我创建了绝对定位在元素上的“覆盖”元素，以使用顶部、左侧坐标突出显示。这些附加到正文并通过 CSS 设置样式（参见第一个 JSFiddle）。例如：

```
<body>
<div class='overlay'>
<span class="a" style="top: 14px; left: 321px; width: 200px; height: 140px;"> </span>
<span class="b" style="top: 52px; left: 351px; width: 140px; height: 63px;"> </span>
<span class="c" style="top: 72px; left: 400px; width: 8px; height: 16px;"></span>
<span class="c" style="top: 74px; left: 420px; width: 8px; height: 16px;"></span>
</div>
.... 
```

这很好用。但是，为了允许更灵活的 css 选择器（例如，孩子），我需要通过嵌套它们来构建上面的叠加层：

```
<body>
<div class='overlay'>
<span class="a" style="top: 14px; left: 321px; width: 200px; height: 140px;">
   <span class="b" style="top: 52px; left: 351px; width: 140px; height: 63px;">
      <span class="c" style="top: 72px; left: 400px; width: 8px; height: 16px;"></span>
      <span class="c" style="top: 74px; left: 420px; width: 8px; height: 16px;"></span>
   <span/>
<span/>
</div>
.... 
```

嵌套可以在任何深度。不幸的是，现在它的定位不正确，（参见第二个 JSFiddle）。

我知道这是因为每个跨度现在都是绝对定位的，但相对于其父级，而不是单个容器 div。我尝试过相对定位，但当然不起作用。

问题：有没有办法像第一个 JSfiddle 一样获得布局但保持层次结构？

**更新** 从下面的答案中，使用 offsetLeft 和 offsetTop 调整坐标确实有帮助。我计算向上 DOM 的总偏移量并添加 offsetLeft (offsetTop) 直到 offsetParent 存在。但是，结果仍然有几个像素偏移，似乎还有其他需要考虑的地方。任何的想法？

**已解决** 正如评论中提到的，还需要考虑边框宽度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:53:27.730

您可以使用轮廓添加边框，而不会影响盒子模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T16:55:54.733

目前，除了相对于其*最近*的祖先相对或绝对定位之外，CSS 没有*其他方法来定位元素。*但是由于你使用的是 JS，你可以根据其祖先元素的偏移量来改变每个元素的偏移量（ ， ），并达到需要的结果。*`left``top`*

 *[Quirks 模式功能](http://www.quirksmode.org/js/findpos.html)的改进版本（考虑边界）：

```
function getCssPropertyValue(elem, prop) {
    return window.getComputedStyle
         // Modern browsers.
         ? window.getComputedStyle(elem, null).getPropertyValue(prop)
         // IE8 and older.
         : elem.currentStyle.getAttribute(prop);
}

function findPos(obj) {
    var curleft = curtop = 0;

    if (!obj.offsetParent) {
        return;
    }

    do {
        curleft += obj.offsetLeft;
        curtop  += obj.offsetTop;

        // If not Opera and not IE8 (see http://tanalin.com/en/articles/ie-version-js/ )
        // Opera and IE8 return incorrect values otherwise.
        if (!window.opera && (!document.all || document.addEventListener || !document.querySelector)) {
            var blw = parseInt(getCssPropertyValue(obj, 'border-left-width'), 10),
                btw = parseInt(getCssPropertyValue(obj, 'border-top-width'), 10);

            if (blw) {
                curleft += blw;
            }

            if (btw) {
                curtop += btw;
            }
        }
    }
    while (obj = obj.offsetParent);

    return [curleft, curtop];
} 
```

**更新：**一个更清晰、紧凑、快速、精确、面向未来和防弹的解决方案是使用[`element.getBoundingClientRect()`](https://developer.mozilla.org/en-US/docs/Web/API/element.getBoundingClientRect)：

```
function getElementCoords(elem) {
    var root  = document.documentElement,
        body  = document.body,
        sTop  = window.pageYOffset || root.scrollTop  || body.scrollTop,
        sLeft = window.pageXOffset || root.scrollLeft || body.scrollLeft,
        cTop  = root.clientTop  || body.clientTop  || 0,
        cLeft = root.clientLeft || body.clientLeft || 0,
        rect  = elem.getBoundingClientRect(),
        top   = Math.round(rect.top  + sTop  - cTop),
        left  = Math.round(rect.left + sLeft - cLeft);

    return {
        top  : top,
        left : left
    };
} 
```

顺便说一句，考虑使用 jQuery 的[`offset()`](http://api.jquery.com/offset/#offset1)跨浏览器不一致已经解决了开箱即用的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T20:53:14.713

`position: absolute`使元素的定位相对于第一个非静态定位的祖先（换句话说，“绝对”实际上是相对的！）。由于您的包含跨度不是静态定位的（它们是绝对定位的），因此包含的跨度相对于它们的父项定位，而不是`.overlay`. 获得相同效果的唯一方法是考虑所有祖先的累积偏移量，并相应地设置顶部、左侧等。

PS：为你的矩形使用 span 有点奇怪，因为它们是内联元素，而不是块元素。你为什么不使用 div 代替？不应该改变结果，但 div 似乎适合您使用。*

# windows-phone-7 - Windows phone：从父类文件动画用户控件

> ID：14143306
> 
> 赞同：0
> 
> 时间：2013-01-03T16:47:22.050
> 
> 标签：windows-phone-7, xaml

在我的 Windows Phone 应用程序中，我有一个继承自 UserControl 的父类文件，以及继承自该类的多个对象。所以父类 Parent.cs 不是局部的。子类是 xaml 对象，带有 xaml 文件和 cs 文件。

我想为所有孩子启用运动，因此我试图在父类中实现这一点。

这是我的代码：

```
 this.MoveObjectX = new DoubleAnimation();
    this.MoveObjectY = new DoubleAnimation();
    this.MoveObjectX.Duration = TimeSpan.FromMilliseconds(100);
    this.MoveObjectY.Duration = TimeSpan.FromMilliseconds(100);

    this.RenderTransform = new CompositeTransform();

    Storyboard.SetTarget(this.MoveObjectX, this.RenderTransform);
    Storyboard.SetTarget(this.MoveObjectY, this.RenderTransform);

    Storyboard.SetTargetProperty(
            this.MoveObjectX,
            new PropertyPath(CompositeTransform.TranslateXProperty));
    Storyboard.SetTargetProperty(
            this.MoveObjectY,
            new PropertyPath(CompositeTransform.TranslateYProperty));

    this.storyboardMoveObject = new Storyboard();
    this.storyboardMoveObject.Children.Add(this.MoveObjectX);
    this.storyboardMoveObject.Children.Add(this.MoveObjectY);

    this.storyboardMoveObject.Completed += new EventHandler(storyboardMoveObject_Completed); 
```

但它不起作用。代码符合并运行，但孩子们不会动。我必须在每个孩子身上补充一点，我将双动画从数字设置为数字。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:40:53.087

如果您在评论中提到从父级的构造函数调用执行移动的代码，则需要在子级的构造函数中调用父级的构造函数。它不是自动的，这就是为什么你的代码永远不会被孩子调用。

调用父级构造函数的最简单方法是附加 base()

```
public child():base() { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:34:34.523

好吧，我遇到了自己的错误：我在子类中用其他一些变换替换了 RenderTransform。我刚开始使用 TransformGroup，一切正常！

谢谢你的帮助

# c# - 连接到服务器

> ID：14143308
> 
> 赞同：1
> 
> 时间：2013-01-03T16:47:55.987
> 
> 标签：c#, tsql, sqlconnection, sqlcommand, sqldataadapter

试图提高我的 C# 到 SQL 技能...目前我正在使用这段代码从我们的应用程序服务器中提取数据。我有两个不同的 DBA 告诉我另外两种写这个的方法，只是想弄清楚这是否应该改进或改变。如果是这样，我真的很感激一些例子。

仅供参考：此代码...

```
db.con(user.Authority) 
```

...本质上是一个“新的 sqlconnection”代码。

```
DataTable dtInfo = new DataTable("SomeInfo");
using (SqlConnection con = db.con(user.Authority))
        {
            string command = "SOME SQL STATEMENT;";
            using (SqlCommand cmd = new SqlCommand(command,con))
            {
                cmd.CommandType = CommandType.Text;
                cmd.Parameters.AddWithValue("@Param", sqlDbType).Value = Param;
                con.Open();
                cmd.ExecuteNonQuery();

                **********
                *** OR ***
                **********

                cmd.CommandType = CommandType.Text;
                cmd.Parameters.AddWithValue("@Param", sqlDbType).Value = Param;
                using (SqlDataAdapter da = new SqlDataAdapter(cmd))
                {
                    da.Fill(dtInfo );
                }
            }
        } 
```

* * *

那么，如果我理解所提供的信息，这是我最好的路线吗？

```
 using (SqlConnection con = db.con(user.Authority))
        {
            string command = "SELECT [TBL_EMPLOYEE].[ACTIVE_DIRECTORY] FROM [TBL_EMPLOYEE];";
            using (SqlCommand cmd = new SqlCommand(command, con))
            {
                con.Open();
                using (SqlDataReader reader = cmd.ExecuteReader())
                {
                    while (reader.Read())
                    {
                        MessageBox.Show(reader["ACTIVE_DIRECTORY"].ToString());
                    }
                }
            } 
```

最后一件事......这应该可以防止需要

```
cmd.Dispose();
etc... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:54:58.883

该代码将取决于特定的查询。如果查询检索数据行（如 SELECT 所做的那样），那么您将使用 da.Fill() 路线。如果它是一个只对数据库进行更改的查询（例如 INSERT、UPDATE 或 DELETE），那么您将使用 ExecuteNonQuery()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:55:25.480

我不会使用该`SqlDataAdapter`版本。使用`SqlCommand`对象的版本`SqlDataReader`将表现更好，并允许更深入地了解返回的实际数据。

```
// Assumes the following sql:
//   SELECT foo, bar FROM baz

// error checking left out for simplicity
var list = new List<SomeClass>();
using(var reader = cmd.ExecuteReader()) {
   while(reader.Read()) {
      list.Add(new SomeClass {
         // NOTE: you can see the columns that the c# is referencing
         //       and compare them to the sql statement being executed
         Foo = (string)reader["foo"],
         Bar = (string)reader["bar"]
      });
   }
} 
```

稍后随着您的经验水平的提高，您将能够使用`SqlCommand`和`SqlDataReader`类的其他功能，以确保代码尽快执行。如果您开始使用该`SqlDataAdapter`路由，您最终将不得不重新学习如何执行您已经在做的完全相同的事情，因为`SqlCommand`和`SqlDataReader`具有 .NET 中其他地方不存在的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T17:24:21.307

ExecuteNonQuery 返回影响的行数。
DataTable 不是检索该数字的有效方法。

int rowsRet = cmd.ExecuteNonQuery();

[SqlCommand.ExecuteNonQuery 方法](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery)

# jquery - 从动态创建的输入中收集值

> ID：14143314
> 
> 赞同：0
> 
> 时间：2013-01-03T16:48:15.067
> 
> 标签：jquery

我有以下标记

```
<span id="add">

  <li style="float: left;margin-right: 10px;">
     <b class="bg">Nom</b><br />
     <input type="text" class="_input _input_text nom"/>
  </li>

  <li>
    <b class="bg">montant investi</b><br />
    <input type="text" class="_input _input_text montant"/>
    <a class="_button"
       onclick="$('#add').append(
          '<span>\
            <li style=\'float: left;margin-right: 10px;\'>\
              <b class=\'bg\'>Nom</b><br />\
              <input type=\'text\' class=\'_input _input_text nom\'/>\
            </li>\
            <li>\
              <b class=\'bg\'>montant investi</b><br />\
              <input type=\'text\' class=\'_input _input_text montant\'/>\
              <a class=\'_button\' style=\'float:right;margin-top:0;margin-left:5px\' \
                onclick=\'$(this).parent().parent().remove();\'>\
                <b>X</b>\
              </a>\
            </li>\
          </span>');"
       style="float: right;margin-top: 0px;margin-left: 5px;">
        Ajouter un associé
    </a>
  </li>

</span> 
```

onclick 函数创建一个标记，其中包含两个`<li>`带有输入文本的标记。有两类输入：.nom、.montant。

当我尝试使用此功能收集它们时：

```
var _nom=[];

_nom.push($("#add input.nom[type=text]").val());

$.each(_nom, function(key, value) {
  alert(key + ': ' + value);
}); 
```

我只得到不是动态创建的两个输入的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:12:46.480

您需要改用它：

```
$("#add input.nom[type=text]")
.each(function(key, value) {
  alert(key + ': ' + $(value).val());
}); 
```

[http://jsfiddle.net/4UhqL/](http://jsfiddle.net/4UhqL/)

它给你错误的结果，因为 `$("#add input.nom[type=text]")`返回你的元素数组，而不是一个元素。

# jquery - jQuery 为除 nth-child 之外的所有 div 设置一个类

> ID：14143317
> 
> 赞同：1
> 
> 时间：2013-01-03T16:48:31.527
> 
> 标签：jquery

当在选择列表中选择第一个元素时，我试图隐藏一个类的所有 div，而不是第一个。我认为第 4 行会覆盖第 3 行，但它似乎没有以这种方式工作。

```
function myFunction() {
  if (jQuery('#select').val() == '1') {
    jQuery('.mydiv').addClass('hide');
    jQuery('.mydiv(1)').removeClass('hide');
  }
} 
```

更新 - 各种 div.mydiv 可能已经具有隐藏类，因此代码需要确保只有第一个实例具有该类。如果其他 div 有该类，则需要将其删除。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T16:50:41.937

您可以使用[`:not()`](http://api.jquery.com/not-selector/)选择器

```
$(".mydiv:not(:nth-child(1))").addClass('hide'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T16:50:18.840

只排除第 n 个孩子

```
jQuery( '.mydiv' ).not( ':eq(1)' ).addClass( 'hide' ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T16:50:59.500

将其添加到所有，过滤到第一个，然后删除该类。

```
function myFunction() {
  if (jQuery('#select').val() == '1') {
    jQuery('.mydiv').addClass('hide').first().removeClass("hide");
  }
} 
```

# ruby-on-rails - autoload_paths 不知道命名空间？

> ID：14143318
> 
> 赞同：5
> 
> 时间：2013-01-03T16:48:38.633
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2, ruby-1.9.3

在`app/services`中，我有一些课程，如`Notification::Finder`和`Notification::Builder`。

它们被放置为`app/services/notification/builder.rb`和`app/services/notification/finder.rb`。

还有一个`Notification`类作为模型，在`app/models/notification.rb`

autoload_path 配置为`config.autoload_paths += %W(#{config.root}/app/services)`

当我尝试加载`Finder`时，它可以工作：

```
Loading development environment (Rails 3.2.9)
[1] pry(main)> Notification::Finder
=> Notification::Finder 
```

但是当我尝试 时`Builder`，我遇到了 rails 自动加载的问题：

```
Loading development environment (Rails 3.2.9)
[1] pry(main)> Notification::Builder
=> ActiveRecord::Associations::Builder 
```

当常量名称（Builder）已经由其他命名空间定义时，它只是忽略我使用的命名空间，并`ActiveRecord::Associations::Builder`取而代之。

**这是预期的行为，还是 Rails 错误？**

更详细地说，`const_missing`方法 at`activesupport/dependencies.rb`接收 a`const_name 'Builder'`和`nesting.inspect => 'nil'`。

奇怪的是，当我使用常量化时，它会按预期解决：

```
Loading development environment (Rails 3.2.9)
[1] pry(main)> 'Notification::Builder'.constantize
=> Notification::Builder 
```

（github 上的 Rails 问题：[https](https://github.com/rails/rails/issues/8726) ://github.com/rails/rails/issues/8726 ）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T18:04:46.593

ActiveRecord::Associations::Builder 是 Rails 中的一个模块。如果你有一个 Notification::Builder，你可以询问它的类：

```
>> Notification::Builder
=> ActiveRecord::Associations::Builder
>> Notification::Builder.class
=> Module
>> Notification::Builder.ancestors
=> [ActiveRecord::Associations::Builder] 
```

> 这是预期的行为吗？

是的

> 好的，那么……你有什么选择？

*   您可以使用与 Builder 不同的术语。像工厂。或通知::NotificationBuilder

更多信息：
* [http://www.rubydoc.info/docs/rails/3.1.1/ActiveRecord/Associations/Builder/Association](http://www.rubydoc.info/docs/rails/3.1.1/ActiveRecord/Associations/Builder/Association)
* [http://apidock.com/rails/ActiveRecord/Associations/Builder](http://apidock.com/rails/ActiveRecord/Associations/Builder)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T19:15:53.537

存在此问题是因为您使用 ActiveRecord 模型作为命名空间。在我看到根本原因之前，我通过一些实验创建了一个要点。

`ActiveRecord`模型包括`ActiveRecord::Associations`模块。由于您可以在包含模块时获取常量，因此现在也可以通过 AR 模型访问其中`Builder`定义的常量。`Associations`您将在模块中定义的每个类中获得此行为，这些模块包含在 AR 模型中：

```
1.9.3-p194 :010 > Post.ancestors
 => [Post(id: integer, title: string, published_at: datetime, created_at: datetime, updated_at: datetime), Post::GeneratedFeatureMethods, #<Module:0x007fec74dc33a0>, ActiveRecord::Base, ActiveRecord::Core, ActiveRecord::Store, ActiveRecord::Serialization, ActiveModel::Serializers::Xml, ActiveModel::Serializers::JSON, ActiveModel::Serialization, ActiveRecord::Reflection, ActiveRecord::Transactions, ActiveRecord::Aggregations, ActiveRecord::NestedAttributes, ActiveRecord::AutosaveAssociation, ActiveModel::SecurePassword, ActiveRecord::Associations, ActiveRecord::Timestamp, ActiveModel::Validations::Callbacks, ActiveRecord::Callbacks, ActiveRecord::AttributeMethods::Serialization, ActiveRecord::AttributeMethods::Dirty, ActiveModel::Dirty, ActiveRecord::AttributeMethods::TimeZoneConversion, ActiveRecord::AttributeMethods::PrimaryKey, ActiveRecord::AttributeMethods::Query, ActiveRecord::AttributeMethods::BeforeTypeCast, ActiveRecord::AttributeMethods::Write, ActiveRecord::AttributeMethods::Read, ActiveRecord::AttributeMethods, ActiveModel::AttributeMethods, ActiveRecord::Locking::Pessimistic, ActiveRecord::Locking::Optimistic, ActiveRecord::CounterCache, ActiveRecord::Validations, ActiveModel::Validations::HelperMethods, ActiveSupport::Callbacks, ActiveModel::Validations, ActiveRecord::Integration, ActiveModel::Conversion, ActiveRecord::AttributeAssignment, ActiveModel::ForbiddenAttributesProtection, ActiveModel::DeprecatedMassAssignmentSecurity, ActiveRecord::Sanitization, ActiveRecord::Scoping::Named, ActiveRecord::Scoping::Default, ActiveRecord::Scoping, ActiveRecord::Inheritance, ActiveRecord::ModelSchema, ActiveRecord::ReadonlyAttributes, ActiveRecord::Persistence, Object, PP::ObjectMixin, ActiveSupport::Dependencies::Loadable, V8::Conversion::Object, JSON::Ext::Generator::GeneratorMethods::Object, Kernel, BasicObject] 
```

一种可能的解决方案是将模块用作命名空间。例如`module Notifications`.

# android - 如何使用 Eclipse 在 android 上创建具有特定对象检测的相机应用程序？

> ID：14143322
> 
> 赞同：0
> 
> 时间：2013-01-03T16:48:57.770
> 
> 标签：android, eclipse, camera, ocr, object-detection

我想创建一个具有相机功能并能够检测特定对象的应用程序。基本上它会像 QR 码转换器一样工作，当所需的对象在相机前面时，相机屏幕会显示一个绿色矩形或其他东西，以告知对象是正确的。当它不正确时，应用程序将无法捕获图像并给出一些对象不正确的消息。

当对象被接受时，我想将**其上的一些文本转换为可编辑文本，并在特定位置裁剪一些图像（可能基于对象的 X 和 Y 轴）。**

我想知道，**如何或从哪里开始这样做？**

我一直在做一些研究，我得到了像 OCR（光学字符识别）来转换文本，但是我还没有一个来检测特定对象。

另外，是否可以编辑相机应用程序的 UI 或创建我们自己的相机应用程序？因为我看过一些他们正在使用的相机应用程序是本机应用程序的 android 教程。（ButtonImage --> 原生相机应用）。

仅供参考：对象是身份证

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:01:59.700

我将从您自己的使用相机预览的应用开始。您可以设置自己的相机预览回调并在 Surface 上渲染帧。

这将允许您截取每一帧并使用您的例程对其进行处理，以尝试确定它是否是您感兴趣的对象。

# javascript - JavaScript if 失败并显示 [""]（包含空字符串的数组）

> ID：14143327
> 
> 赞同：3
> 
> 时间：2013-01-03T16:49:10.813
> 
> 标签：javascript, arrays, conditional

> **可能重复：**
> [JavaScript 比较数组](https://stackoverflow.com/questions/10532062/javascript-compare-arrays)

```
​var x = [""]
if (x === [""]) { alert(​​"True!") }​​ 
else { alert("False!") } 
```

出于某种原因，这会提醒`False`. 我似乎无法弄清楚为什么。我该怎么做才能发出此警报`True`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T16:58:54.913

如果两个对象引用完全相同的对象，则它们是相等的。在您的示例中， x 是一个 Object 而 [""] 是另一个。您不能以这种方式比较对象。[这个链接](https://stackoverflow.com/questions/201183/how-do-you-determine-equality-for-two-javascript-objects)可能有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T16:53:53.163

## 比较值而不是整个数组

...因为它们是对象，并且您在这里使用隐式引用。一个对象存储在您`x`试图（通过引用）与就地创建的对象（具有空字符串元素的数组）进行比较的变量中。这是两个对象，每个对象都有自己的引用，因此**不相等**。

我已经更改了您的示例以执行您的操作，同时还提供了在数组中包含任意数量的空字符串的可能性：

```
if (x.length && x.join && x.join("") === "")
{
    alert(​​"True!")
}​
else
{
    alert("False!")
} 
```

这将返回*True！*对于任何数组，例如：

```
var x = [];
var x = [""];
var x = [null];
var x = [undefined];
var x = ["", null, undefined];
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T16:54:25.297

除非它们引用相同的对象，否则无法以这种方式可靠地比较数组。改为这样做：

```
if ( x[0] == "" ) 
```

或者如果你希望它是一个数组：

```
if ( x.length && x[0] == "" ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T16:54:37.373

在这种情况下，您可以使用 toString。小心，有一些异常值是行不通的。

```
var x = [""]
alert(x.toString() == [""].toString()) // true 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T16:56:20.330

在 JavaScript 中，两个对象只有在引用同一个对象时才相等。甚至`[] == []`是`false`。

一个可能缓慢但通用的解决方案是比较两个对象的字符串表示：

```
JSON.stringify(a1) == JSON.stringify(a2) 
```

# vba - 任何想法如何确定个人在 Excel 中属于哪个年龄段？

> ID：14143328
> 
> 赞同：0
> 
> 时间：2013-01-03T16:49:10.773
> 
> 标签：vba, excel, case

我在 Excel 电子表格中有 2 列。

第一列标题称为 AGE，第二列标题称为 Age_Group。

AGE 列中的年龄介于 18 到 45 岁之间。

可能有多行具有相同的年龄。

我的任务是确定某个年龄属于哪个年龄组，然后打印出该年龄组。

例如，如果某人的年龄是 18 岁，我想使用 IF 语句或 CASE 语句来确定 18 岁在 18 到 24 之间，然后将该值作为 18-24 放入 Age_Group 列。

如果年龄为 19 岁，则再次属于 Age_Group 列中 18-24 岁的组。

如果 Age 列中的年龄介于 25 和 29 之间，那么他们将在 Age_Group 列中为 25-29。这是一个例子：

```
AGE                            AGE_GROUP
18                               18-24
19                               18-24, 
25                               25-29
28                               25-29 
```

如果你愿意分享一些代码，我可以用它来计算剩下的，直到我们达到 45。

我不擅长 Excel VBA。任何有关 IF 或 CASE 声明的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T17:00:09.523

使用 vlookup。创建一个两列表，在第一列中使用年龄范围的下限，在第二列中将年龄范围作为文本，如下所示：

```
AGE_LOOKUP  AGE_GROUP
18          18-24
25          25-29
30          30-35
36          36-37 etc.. 
```

将此表的范围命名为 AGE_GROUP_TABLE 然后使用以下公式获取年龄组：

```
VLOOKUP(A1, AGE_GROUP_TABLE, 2, TRUE) 
```

将不同的年龄放入单元格 A1 中，公式将返回正确的年龄组。要记住的重要一点是确保 VLOOKUP 的最后一个参数设置为 TRUE，这使得 VLOOKUP 找到最近的匹配项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T20:52:10.770

由于表格的想法引起了一些混乱，我想我也会分享我最喜欢的使用嵌入式数组的自包含、无表格、VLOOKUP 的技巧。所以对于当前的问题，它看起来像这样：

```
VLOOKUP(A1, {18,"18-24";25,"25-29";30,"30-35";36,"36-37"}, 2 TRUE) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T17:12:43.853

这是一个 VBA 代码：但使用 Excel VLOOKUP 肯定会更好。:)

1.  首先[将模块添加到 VBA 项目](http://fontstuff.com/vba/vbatut03.htm)。

2.  复制以下内容

代码。

```
Option Explicit

Function whatAgeGroup(ByVal i As Integer) As String
    Select Case i
        Case IsEmpty(i)
            whatAgeGroup = "No Age Entered"
        Case 18 To 24:
            whatAgeGroup = "18-24"
        Case 25 To 29
            whatAgeGroup = "25-29"
        Case 30 To 34
            whatAgeGroup = "30-34"
        Case 35 To 39
            whatAgeGroup = "35-39"
        Case 40 To 44
            whatAgeGroup = "40-44"
        Case Is >= 45
            whatAgeGroup = "45 and Above"
        Case Else
           whatAgeGroup = "WhatGroup?"
        End Select
End Function 
```

1.  在单元格中输入函数名称并输入，如图所示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T20:17:37.423

虽然 vlookup 解决方案非常出色，但您也可以使用数据透视表来做到这一点。确保年龄是行标题，然后右键单击年龄“正方形”并选择组。这是非常容易和动态的。

# multithreading - 黑白超线程和多线程的区别？

> ID：14143329
> 
> 赞同：11
> 
> 时间：2013-01-03T16:49:12.703
> 
> 标签：multithreading, cpu-architecture, hyperthreading

我想知道是否有人可以向我解释这两者的区别？它与英特尔硬件架构（HT）有关吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-07T06:14:42.850

超线程是硬件和英特尔品牌。大多数其他人称之为同时多线程（SMT）。对于程序员来说，两个超线程看起来就像两个 CPU 内核。在硬件方面，多个超线程共享一个内核。（在英特尔的情况下，每个核心有两个超线程）。

多线程（或多线程编程）通常被认为是在单个程序中使用多个线程上下文（指令指针、寄存器、堆栈等）的概念。（通常在同一个进程或虚拟地址空间中）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-09-29T18:22:00.210

物理处理器 (PP) 是单个处理单元的硬件实现。从这个角度来说，一个“核心”就是基本的PP。有时，多处理器、多核等术语用于区分处理单元在芯片中的组织方式，以及它们之间共享哪些其他物理资源，如 L2、总线等。但对于这个答案，我们感兴趣的是最基本的处理单元。

当 PP 支持超线程（我们现在只使用这个术语）时，PP 被拆分为两个或多个逻辑处理器 (LP)。这是通过加强执行流水线、复制 PP 资源（如寄存器集、PC、中断处理机制等）来完成的。这允许 PP 在“同时”保持和执行多个“执行上下文”。这些执行上下文有时称为硬件线程 (HT)。如果 PP 不支持超线程（或已关闭），则 LP 与 PP 相同。

软件线程 (ST) 是由软件创建的执行上下文，例如使用 pthread_create() 或 clone()。这些实体由操作系统调度到处理器上。多线程程序是程序员显式创建 ST 的代码。多线程程序可以在不支持超线程的处理器中运行。在这种情况下，ST 之间的上下文切换是昂贵的，因为它需要调度程序的干预以及使用内存来存储和加载执行上下文。

当超线程开启时，操作系统将几个 ST 调度到一个 PP。通常每个 LP 一个 ST。操作系统将 LP 视为真正的 PP。因此，每个 ST 将在不同的 LP 上运行。一旦 ST 被调度，我们可以说它们成为硬件线程（HT）（松散地说），在 PP 控制的意义上。当一个 HT 停止时，例如缓存未命中或管道刷新，PP 执行另一个 HT。由于 HT 的上下文已经在 PP 中，因此这种“上下文切换”几乎没有成本。操作系统不参与这些上下文切换。最相关的是，这些停顿和相应的上下文切换可能发生在管道的许多阶段。这与基于中断的事件发生的基于调度程序的上下文切换不同，例如量子到期、I/O 中断、中止、系统调用等。

正如 Nathan 在上一个答案中所说，超线程是一个非常具体的术语。一个更通用且不可知的术语是“同时多线程 (SMT)”。

最后，我强烈推荐阅读：1）同时多线程处理器的操作系统支持。詹姆斯·R·布尔平

2) 最大化处理效率的微架构选择和权衡。Deborah T. Marr（博士论文）

# sql - 如何在 SQL Server 2008 中增加 XML 数据类型

> ID：14143339
> 
> 赞同：3
> 
> 时间：2013-01-03T16:49:54.547
> 
> 标签：sql, sql-server, xml, import, data-dump

我正在尝试在 SQL Server 2008 中导入大型 XML 数据类型，但收到以下错误消息：

> *消息 6365，级别 16，状态 1，第 3 行
> XML 操作导致 XML 数据类型的大小超过 2GB。操作中止。*

有谁知道我可以做些什么来规避这个/增加 SQL Server 的限制？我终于弄清楚了如何导入`Data.Stackexchange.com`数据转储，但现在它告诉我 XML 文件对于我导入的方式来说太大了。

使用：

```
/* Populate the temp table with the comments.xml file */
INSERT INTO #WorkingTable
SELECT *
FROM   OPENROWSET(BULK 'd:\so\comments.xml',SINGLE_BLOB) AS data 
```

如果您需要任何其他信息，请让我知道。谢谢！

[找到[了这个网站](http://qa.social.msdn.microsoft.com/Forums/en-US/sqlxml/thread/b1528694-edf3-40b2-8666-13e0843a5e91)，希望它不是最好的资源......]

**编辑**感谢@Bummi [，这似乎是 SQL Server 的一个限制](http://msdn.microsoft.com/en-us/library/ms143432%28v=sql.100%29.aspx)。**有谁知道/如果我能解决这个问题？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T16:55:26.157

限制为 2 GB
[参考服务器 2012](http://msdn.microsoft.com/en-us/library/ms187339.aspx)
[SQL Server 2008](http://msdn.microsoft.com/en-us/library/ms143432%28v=sql.100%29.aspx)
[SQL Server 2005](http://msdn.microsoft.com/en-us/library/ms187339%28SQL.90%29.aspx)

# .net - Windows 8 从桌面应用程序启动“地铁”应用程序？

> ID：14143341
> 
> 赞同：2
> 
> 时间：2013-01-03T16:50:05.820
> 
> 标签：.net, windows-8

有没有办法从.net 中的桌面应用程序启动“Metro”应用程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T16:52:00.340

所有现代 UI 应用程序都有一个与之关联的 URL 协议，可用于启动应用程序。
您可以找到特定应用程序的协议，如下所示：

1.  按 Windows+R
2.  类型`regedit`
3.  导航`HKEY_CLASSES_ROOT\Extensions\ContractId\Windows.Protocol\PackageId`
4.  查找您的应用程序的子项（例如，`AMZNMobileLLC.KindleforWindows8_1.1.0.0_neutral__stfe6vwa9jnbp`）
5.  在该子项中，转到`ActivatableClassId_some long name_\CustomProperties`
6.  该`Name`值将告诉您协议名称。

然后，您可以传递 `*name*://`给`Process.Start()`.

（我[在 SuperUser 上](https://superuser.com/questions/478975/how-to-create-a-desktop-shortcut-to-a-windows-8-modern-ui-app/497213#497213)回答了这个问题）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-24T11:59:27.413

我找到了另一种方法，从 win32 应用程序启动 win8 应用程序。

1.  在您的 WinRt 项目中转到`Package.appxmanifest -> declarations`
2.  添加`File Type Associations`并在`Name`字段中输入：`myAppLaunch`，在`File Type`输入中`.myAppLaunch`（带点）
3.  创建一个文件（例如在桌面上）并设置`.myAppLaunch`为扩展名。
4.  现在，在您的 Win32 应用程序中，执行该文件。

# ios - UIAutomation 和在滚动视图中读取静态文本

> ID：14143347
> 
> 赞同：0
> 
> 时间：2013-01-03T16:50:29.877
> 
> 标签：ios, instruments, ui-automation, ios-ui-automation

我正在使用 Xcode Instruments 进行一些 UIAutomation 测试，并且在访问我想要验证的 staticText 时遇到问题。

情况：我有一些按钮显示包含多个图表的不同滚动视图。这些滚动视图每个都有 5 个以上的项目，所以当我最初这样做`target.logElementTree()`时，它只显示可见的项目。如果我向下滚动`window.scrollViews()[0].scrollDown()`并再次`logElementTree()`显示底部元素，但是每当我尝试访问它们时，它都会一直引用滚动视图顶部的元素。

有任何想法吗？

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:37:19.860

根据我的经验，每当您执行“taregt.logElementTree()”时，它都会向您显示您可以通过其名称或索引或位置访问的所有元素（可见和隐藏或即使在屏幕底部也存在）一旦向下滚动。但是如果您仍然遇到问题，我建议您在向下滚动以使其可见后按其位置访问该元素。

# android - 在电子邮件android中丢失超链接

> ID：14143356
> 
> 赞同：0
> 
> 时间：2013-01-03T16:51:02.263
> 
> 标签：android, android-intent, html-email

我试过这个

```
Intent mIntent = new Intent(Intent.ACTION_SEND);
mIntent.putExtra(Intent.EXTRA_SUBJECT, "this is test");
mIntent.setType("text/html");  
Uri myUri = Uri.parse("http://www.Google.com/");
mIntent.putExtra(android.content.Intent.EXTRA_TEXT,Html.fromHtml("<a href=\""+myUri+"\">Link</a>"));
            context.startActivity(android.content.Intent.createChooser(mIntent, "Email:")); 
```

我也尝试过 setType("message/rfc822");

一切都是徒劳的，我的电子邮件没有问题（工作正常）。但是我看不到超链接，在另一端收到的原始消息甚至没有超链接href下面显示的内容

```
*MIME-Version: 1.0
Received: by 10.49.25.98 with HTTP; Thu, 3 Jan 2013 08:42:55 -0800 (PST)
Received: by 10.49.25.98 with HTTP; Thu, 3 Jan 2013 08:42:55 -0800 (PST)
Date: Thu, 3 Jan 2013 11:42:55 -0500
Delivered-To: DELETED
Message-ID: DELETED
Subject: this is test
From: DELETED
To: DELETED
Content-Type: multipart/alternative; boundary=047d7bea41ce0280df04d2650e27
--047d7bea41ce0280df04d2650e27
Content-Type: text/plain; charset=ISO-8859-1
Link
--047d7bea41ce0280df04d2650e27
Content-Type: text/html; charset=ISO-8859-1
<p dir="ltr">Link</p>
--047d7bea41ce0280df04d2650e27--* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T07:21:02.807

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, recipients);
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,Html.fromHtml(emailtext.toString()));
emailIntent.setType("text/html");
startActivity(Intent.createChooser(emailIntent, "Send mail...")); 
```

与 emailtext 设置为：

```
String emailtext = "<a href="+actionUrl+">"+shareTextContent+"</a>"; 
```

操作网址可能类似于：

```
actionUrl = "www.google.com" 
```

# asp.net - 为asp net应用程序缓存静态数据

> ID：14143357
> 
> 赞同：0
> 
> 时间：2013-01-03T16:51:03.637
> 
> 标签：asp.net, performance, caching, web-config

我的任务是提高网站性能，当我查看服务器响应时，我得到了 364kb 的纯恐惧响应数据。

首先，我想兑现应用程序的静态数据。我有 Styles 文件夹和 /images、site.css 里面。为此，我在 Web.config 中有代码。

```
<configuration>
  <location path="~/Styles">
    <system.webServer>
      <staticContent>
        <clientCache cacheControlMode="UseExpires"
           httpExpires="Tue, 19 Jan 2038 03:14:07 GMT" />
      </staticContent>
    </system.webServer>
  </location>
</configuration> 
```

但是当我用萤火虫检查响应时，我得到了相同的 364kb 邪恶，并且在 2038 年没有到期日期。

我做错什么了？

我没有使用 IIS 或其他任何东西。只有手动 web.config，只有铁杆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:51:05.273

该`<system.webServer>`元素包含 IIS 配置。
ASP.NET 开发 Web 服务器不读取它。

如果您希望发生这种情况，则需要使用 IIS 或 IIS Express。

# java - 脑筋急转弯/拼图的算法排序解决方案

> ID：14143358
> 
> 赞同：3
> 
> 时间：2013-01-03T16:51:08.107
> 
> 标签：java, algorithm, sorting

您之前可能已经看过订购脑筋急转弯：

> 在最近一轮的 BrainBashers 铁人三项赛中，Keith 排名第四。阿德里安不是最年长的，但比邓肯还大，邓肯排在第二位。年龄仅次于最小的孩子获得第二名。第三名的孩子比第一名的孩子大。比利比获得第三名的孩子小。你能确定谁在哪里完成并按年龄排列孩子吗？[[资源]](http://www.brainbashers.com/showpuzzles.asp?formpost=Y&field=ctop10a&page=1&puzzletext=A)

我正在寻找一种算法方法来解决似乎非常相似的问题。

我有一组对象，我想根据将对象相互关联的规则对其进行排序。对于给定的一组规则，可能有多个解决方案。在一个有效的解决方案中，所有的规则都得到了满足。一组规则也可能没有有效的解决方案。

**例子：**

对象：`A, B, C, D, E, and F`

规则：

*   C > A
*   C < D
*   F < C
*   A > F
*   E > F
*   D > E

一种可能的解决方案：

```
 F A C E D B 
```

请注意，对象 B 与任何其他对象都不相关，因此它出现在序列中的哪个位置并不重要。

当然，这在以前已经做过了。谁能指出我正确的方向？我最终将在 Java 中执行这种排序。

***相关问题：*** [`Java partially ordered Collection<E>`](https://stackoverflow.com/questions/12362819/java-partially-ordered-collectione)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T16:56:16.213

一种选择是使用规则构建有[*向图*](http://en.wikipedia.org/wiki/Graph_%28data_structure%29)，然后执行[*拓扑排序*](http://en.wikipedia.org/wiki/Topological_sort)。

**注意：**我不知道这是否是最有效的方法，这只是我想到的第一件事。但是，这是*O(N)*，所以从渐近的角度来看，你不会做得更好！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T16:57:59.740

它效率不高，但一种简单的蛮力方法是

```
List<String> names = Arrays.asList("A", "B", "C", "D", "E", "F");
do {
    Collections.shuffle(names);
} while (!(
        names.indexOf("C") < names.indexOf("A") &&
                names.indexOf("C") > names.indexOf("D") &&
                names.indexOf("F") > names.indexOf("C") &&
                names.indexOf("A") < names.indexOf("F") &&
                names.indexOf("E") < names.indexOf("F") &&
                names.indexOf("D") < names.indexOf("E")));
System.out.println("A solution is " + names); 
```

印刷

```
A solution is [D, C, A, B, E, F] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T16:59:19.473

[编辑，更好的解释] 使用没有前任的对象，然后使用没有前任但已经使用的对象，以此类推。

您可以查看一个对象的所有前辈，然后查看是否找到没有前辈的对象并将其放置在第一个位置。然后，您寻找除了已经使用过的对象之外没有其他前任的对象。等等...

# codeigniter - 无法使用 extjs 和 codeigniter 创建新记录

> ID：14143361
> 
> 赞同：0
> 
> 时间：2013-01-03T16:51:25.237
> 
> 标签：codeigniter, extjs4.1

我使用 extjs 和 codeigniter 创建了一个 crud，但它只能读取、更新和删除数据。它无法创建新记录我的 ext 模型：

```
Ext.define('Mon_hoc', {
    extend: 'Ext.data.Model',
    idProperty: 'ma_mon',
    fields: [
       {name: 'ma_mon', type: 'int'},
       {name: 'ten_mon'},
       {name: 'so_tin_chi', type: 'int'},
       {name: 'so_tiet_lt', type: 'int'},
       {name: 'so_tiet_th', type: 'int'}
    ]        
}); 
```

我的商店：

```
var store = Ext.create('Ext.data.Store', {
    model: 'Mon_hoc',
    remoteSort: true,
    pageSize: 10,
    autoLoad: true,
    autoSync: true,
    proxy: {
        type: 'ajax',
        api: {
            read: 'http://localhost/QLPTH/index.php/data/read_mon_hoc',
            create: 'http://localhost/QLPTH/index.php/data/create_mon_hoc',
            update: 'http://localhost/QLPTH/index.php/data/update_mon_hoc',
            destroy: 'http://localhost/QLPTH/index.php/data/delete_mon_hoc'
        },
        reader: {
            type: 'json'
        },
        writer: {
            type: 'json',
            writeAllFields: true
        },
        listeners: {
            exception: function(proxy, response, operation){
                Ext.MessageBox.show({
                title: 'REMOTE EXCEPTION',
                msg: operation.getError(),
                icon: Ext.MessageBox.ERROR,
                buttons: Ext.Msg.OK
                });
            }
        }
    }
}); 
```

我的网格：

```
var grid = Ext.create('Ext.grid.Panel', {
    title:'Danh sách môn học',
    store: store,
    columns: [{
        id: 'ma_mon',
        header: 'Mã môn',
        dataIndex: 'ma_mon',
        flex: 1,
        editor: {
            xtype: 'numberfield',
            allowBlank: false,
            minValue: 100,
            maxValue: 300
        }
    }, {
        header: 'Tên môn',
        dataIndex: 'ten_mon',

        editor: {
            xtype: 'textfield',
            allowBlank: false

        }
    }, {

        header: 'Số tín chỉ',
        dataIndex: 'so_tin_chi',

        editor: {
            xtype: 'numberfield',
            allowBlank: false,
            minValue: 1,
            maxValue: 10
        }
    }, {

        header: 'Số tiết lý thuyết',
        dataIndex: 'so_tiet_lt',

        editor: {
            xtype: 'numberfield',
            allowBlank: false,
            minValue: 1,
            maxValue: 100
        }
    }, {

        header: 'Số tiết thực hành',
        dataIndex: 'so_tiet_th',

        editor: {
            xtype: 'numberfield',
            allowBlank: false,
            minValue: 1,
            maxValue: 100
        }
    }],
    stripeRows: true,
    height:320,
    width:600,
    frame:true,
    //resizable: {
    //   handles: 's',
    //   minHeight: 100
    //},
    bbar: Ext.create('Ext.PagingToolbar', {
        pageSize: 10,
        store: store,
        displayInfo: true,
        plugins: Ext.create('Ext.ux.ProgressBarPager', {})
    }),
    tbar: [{
        text: 'Thêm môn',

        handler : function() {
            rowEditing.cancelEdit();

            // Create a model instance
            var r = Ext.create('Mon_hoc', {
                ma_mon: 100,
                ten_mon: 'Tên môn',
                so_tin_chi: 1,
                so_tiet_lt: 30,
                so_tiet_th: 30
            });

            store.insert(0, r);
            rowEditing.startEdit(0, 0);
        }
    }, {
        itemId: 'removeMon',
        text: 'Xóa môn',

        handler: function() {
            var sm = grid.getSelectionModel();
            rowEditing.cancelEdit();
            store.remove(sm.getSelection());
            if (store.getCount() > 0) {
                sm.select(0);
            }
        },
        disabled: true
    }],
    plugins: [rowEditing],
    listeners: {
        'selectionchange': function(view, records) {
            grid.down('#removeMon').setDisabled(!records.length);
        }
    }
}); 
```

我的数据库结构： ma_mon: int(3), ten_mon: text, so_tin_chi: int(11), so_tiet_lt: int(11), so_tiet_th: int(11)

数据.php：

```
class Data extends CI_Controller {
function __construct(){
    parent::__construct();

}

function read_mon_hoc(){
    $data = array();
    $this->load->model('data_model');
    if($query = $this->data_model->get_mon_hoc_records())
    {
        $data = $query;
    }
    echo json_encode($data);        
}

function create_mon_hoc(){
    $decode = json_decode($GLOBALS["HTTP_RAW_POST_DATA"], true);
    if (isset($decode["ma_mon"])){
        $data = array(
            'ma_mon' => $decode['ma_mon'],
            'ten_mon' => $decode['ten_mon'],
            'so_tin_chi' => $decode['so_tin_chi'],
            'so_tiet_lt' => $decode['so_tiet_lt'],
            'so_tiet_th' => $decode['so_tiet_th']
        );
        $this->load->model('data_model');
        $this->data_model->add_mon_hoc_record($data);
    }
}

function delete_mon_hoc(){
    $decode = json_decode($GLOBALS["HTTP_RAW_POST_DATA"], true);
    if (isset($decode["ma_mon"])){
        if (is_numeric($decode["ma_mon"]) && $decode["ma_mon"]>0){
            $this->load->model('data_model');
            $this->data_model->delete_mon_hoc_record($decode["ma_mon"]);
        }
    }
}

function update_mon_hoc(){
    $decode = json_decode($GLOBALS["HTTP_RAW_POST_DATA"], true); 
    if (isset($decode["ma_mon"])){
        if (is_numeric($decode["ma_mon"]) && $decode["ma_mon"]>0){
            $data = array(
                'ma_mon' => $decode['ma_mon'],
                'ten_mon' => $decode['ten_mon'],
                'so_tin_chi' => $decode['so_tin_chi'],
                'so_tiet_lt' => $decode['so_tiet_lt'],
                'so_tiet_th' => $decode['so_tiet_th']
            );
            $this->load->model('data_model');
            $this->data_model->update_mon_hoc_record($data);
        }
    }
}
} 
```

数据模型.php：

```
class Data_model extends CI_Model {

function get_mon_hoc_records()
{
    $query = $this->db->get('mon_hoc');
    return $query->result();
}

function add_mon_hoc_record($data) 
{
    $this->db->insert('mon_hoc', $data);
    return;
}

function update_mon_hoc_record($data) 
{
    $this->db->where('ma_mon', $data['ma_mon']);
    $this->db->update('mon_hoc', $data);
}

function delete_mon_hoc_record($data)
{
    $this->db->where('ma_mon', $data);
    $this->db->delete('mon_hoc');
}

} 
```

# jquery - Knockout.Js 未检测到以编程方式更改的复选框状态

> ID：14143366
> 
> 赞同：9
> 
> 时间：2013-01-03T16:51:32.683
> 
> 标签：jquery, knockout.js

我有一个简单的复选框，它的值由我正在编写的一些基础设施调整，以在 localStorage 中保持状态。我知道这通常可以通过设置 viewModel 来完成，但***基础设施不知道任何淘汰绑定并且无法访问它们。***

我不认为这会是一个问题，因为我认为淘汰赛正在运行“更改”事件，但是`$checkbox.prop('checked', true).trigger('checked')`未能触发我的 observable。即使直接使用 click 事件也不能满足我的需要。

淘汰赛与哪些事件有关？如何让它读取控件的状态？

[jsbin 在这里显示了这种奇怪的行为](http://jsbin.com/ocuyav/1/edit)。尝试直接选择复选框而不是单击按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-25T17:42:06.630

我找到了一种更好的方法。只需将此代码放入您的 domready 事件中：

```
 $("input:checkbox").bind('change', function () {
        $(this).triggerHandler('click');
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T17:19:13.600

淘汰赛绑定并没有真正按照您的想法工作。

查看： http: [//knockoutjs.com/documentation/custom-bindings.html](http://knockoutjs.com/documentation/custom-bindings.html)

这是您可以使用的一种解决方案，没有 jQuery，没有自定义绑定。

您的 html 将保持不变。

```
var m = {
  isChecked: ko.observable(false),
  infrastructureUpdatesCheckbox: function() {
    this.isChecked( this.isChecked() === true ? false : true);
  }
};

ko.applyBindings(m); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T18:13:48.307

您应该通过视图模型更改复选框的选中状态：

```
 var m = {
   isChecked: ko.observable(false)
  //,infrastructureUpdatesCheckbox: function() {
    //$chk = $(':checkbox');
    //$chk
    //  .prop('checked', !$chk.prop('checked'))
    //  .trigger('change');
    //this.isChecked(!this.isChecked());  // this - is your view model
 }
}; 
```

这是更新版本：

```
function InfrastructureUpdatesCheckbox(){

  var $cb = $(':checkbox');
  var cb = $cb[0];
  cb.checked = !cb.checked;  // manually change checked status
  $cb.triggerHandler('click');  // run all event handlers bound to 'click' event
} 
```

我猜这个问题仅与复选框（单选按钮）有关。当您手动触发事件时，其他控件的行为应该正确。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-10T13:12:46.647

您可能已经找到了解决问题的方法，但这可能对其他人有所帮助。

我有完全相同的问题。我所做的是使用 pub-sub 模式并让我的组件触发它自己的更改事件。然后您可以做的是让需要更新模型的基础设施组件的实例订阅该事件，然后更新您的模型。更好的是，您的模型可以订阅事件，这样您的模型就知道基础设施组件，而不是相反

这样，您的基础架构组件就不需要了解 ko，您可以在其他任何地方重复使用它。如果您打算重新使用该组件，我相信您找到它的其他用途只是时间问题。

希望这会有所帮助（抱歉，没有代码，因为我无法在 SO 上发布客户代码，但如果有人想要一个示例，就这么说吧，我会做一个 jsfiddle 来说明。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-10T16:10:09.247

在我的情况下，这与一个 jquery 错误有关。我使用 github 淘汰问题跟踪器来追踪这个问题；[看这里](https://github.com/knockout/knockout/issues/987)。

最终我最终在我的组件中这样做了：

```
var isjQueryOld = /^(0|1)\.[0-8]\./.test($.fn.jquery); // <=1.8.*
var toggleCheckbox = isjQueryOld ? jQueryOldToggleCheckbox : function($el) { $el.trigger('click') } //https://github.com/knockout/knockout/issues/987

function jQueryOldToggleCheckbox($el) {
    //This should be simple right? See http://stackoverflow.com/a/8595601/5056
    //and "simulating events to adjust knockout models" jasmine spec
    //all this is nessessary to get everything working with knockout
    var changeTo = !$el.prop('checked');
    if(changeTo)
        $el.attr('checked', true);
    else
        $el.removeAttr('checked');
    $el.trigger('click');
    $el.prop('checked', changeTo);
} 
```

在我的代码中

```
 toggleCheckbox($el); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T19:05:44.643

我不知道什么事件敲除正在侦听，您可能会涉足源本身并弄清楚，但一种解决方案是使用[自定义绑定](http://knockoutjs.com/documentation/custom-bindings.html)。在`init`自定义绑定中，您可以为要捕获的任何事件（例如`changed`）设置您想要的任何处理程序，并使用它来强制您绑定运行`update`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-26T02:09:27.217

我今天花了几个小时使用检查和单击方法陷入点击循环，尝试 ko.observable、pureComputed 写入甚至是基础设施更新检查框，但没有成功太久，无法向任何为我的工作付费的人解释为什么我无法检查该死的淘汰赛中的单选按钮。不幸的是，我的上下文（带有购买插件的 Magento 2 结帐）不允许我实现有效的视图模型，所以最后我设法通过简单的 hack 解决了这个问题，添加了第二个输入 type="radio" 并在点击时显示它：

```
selectRadioPayment: function (obj, event, method) {
        this.selectPaymentMethod(obj, event, method);
        $('.ko-payment-selector').show();
        $('#p_method_' + method).hide();
        $('#p_method_' + method).closest('.radio-payment-selector').show();
    },

    renderedPaymentMethods: function() {
        if(quote.paymentMethod) {
            var selectedMethod = quote.paymentMethod().method;
            $('#p_method_' + selectedMethod).hide();
            $('#p_method_' + selectedMethod).closest('.radio-payment-selector').show();
        }
    },

    <input class="radio-payment-selector" type="radio" class="hidden" checked />
    <input class="ko-payment-selector" type="radio" name="payment[method]" class="radio" event: {change: function(data, event){$parent.selectRadioPayment(data, event, $data.method)}}"/> 
```

我希望有一天它会对某人有所帮助。

# php - 我有这个 php/mysql/ajax 代码，我想在记录出现时添加淡入效果

> ID：14143370
> 
> 赞同：0
> 
> 时间：2013-01-03T16:51:46.437
> 
> 标签：php, jquery, mysql, ajax

我想在这段代码中添加淡入效果......每次我创建新记录时，代码都会向我显示，但我想给它添加淡入效果。谢谢你。这是代码：

```
<?php
include("includes/db.php");
include("includes/time_stamp.php");
?>

<html>
<head>

<link rel="stylesheet" href="wtfdiary.css">

<script type="text/javascript" src="jquery.min.js"></script>

<script type="text/javascript" >
$(function() {
$("#tweet_submit").click(function() 
{
var tweet = $("#tweet").val();
var dataString = 'tweet='+ tweet;
if(tweet=='')
{
alert('Please type your tweet');
}
else
{

$.ajax({
type: "POST",
url: "post_tweet.php",
data: dataString,
cache: false,
success: function(html){
$("#tweet").val('');
$("#content").prepend(html);
}
});
}return false;
}); });
</script>

</head>

<body>
<div id="container">

<div id="sidebar">
<div id='logo'><img src='includes/1.png'></div>
<form action="#" method="POST">
<div><textarea id="tweet" name="tweet" placeholder="Compose new Tweet"></textarea></div>
<input type="submit"  value=" Tweet " class="btn" id="tweet_submit"/> 
</form>
<div id="flash_result"></div>
</div>

<div id="main">
<div id='heading'>Tweets</div>
<div id='content'>
<?php

$sql="select * from tweets order by t_id DESC";
$result=mysql_query($sql);
while($row=mysql_fetch_row($result))
{
$time = "$row[2]";
echo "<div class='tweet_box'>";
echo "<div class='tweet_user'><img class='user_img'
     src='http://www.gravatar.com/avatar/a422402df9e5dc54fab6e8131dd19fd0?s=50'></div>";
echo "<div class='tweet_body'>";
?>
<div class='tweet_time'><?php time_stamp($time);?></div>
<?php
echo "<div><b><a href='http://twitter.com/wtfdiary'>Abhishek Ahlawat</a></b> <span
     class='uname'>@wtfdiary</span></div>";
echo "<div class='tweet_text'>$row[1]</div>";
echo "</div></div>";
}

?>
</div>
</div>

</div>

</body>
</html> 
```

我想在出现时添加一些淡入效果

非常感谢你们，你们摇滚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:00:49.780

在你的文件“post_tweet.php”中，添加一个`style="display:none"`你想要淡入的元素。而对于 JS，改变......

```
$("#content").prepend(html); 
```

...对此：

```
$(html).prependTo("#content").fadeIn(500); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:59:07.923

这是一个简单的方法。

在另一个页面上进行“查询”，例如：update.php

然后在您要包含此“推文”效果的页面上：

**css**

```
#load_tweets
{
background-color:#ffffcc;
height: 360px;
overflow:auto;
overflow-x:hidden;
} 
```

**jquery 调用和 jquery 代码（在 head 中）**

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js"></script>
<script>
var auto_refresh = setInterval(
function()
{
$('#load_tweets').fadeOut('slow').load('update.php').fadeIn("slow");
}, 7000);
</script> 
```

然后把它放在你想在页面上显示效果的地方：

```
<div id="load_tweets"> </div> 
```

# javascript - TinyMCE 可以用来编辑完整的网页吗？

> ID：14143372
> 
> 赞同：0
> 
> 时间：2013-01-03T16:52:04.060
> 
> 标签：javascript, tinymce

我正在创建一个可视化编辑器，想知道 TinyMCE 是否可以用来编辑整个网页。

它通过 iFrame 加载内容（我假设使用 document.designMode，但可能是错误的）所以我认为它可能是。

有谁知道那里是否有任何图书馆或这样做的例子？我一直无法找到任何有关这方面的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:54:45.327

是的，看看 tinymce 网站上的示例： [http ://www.tinymce.com/tryit/full_page.php](http://www.tinymce.com/tryit/full_page.php)

# android - 需要有关启动不同布局和后退按钮的建议

> ID：14143373
> 
> 赞同：0
> 
> 时间：2013-01-03T16:52:12.213
> 
> 标签：android, android-layout, android-intent, android-widget

我的要求是在首次启动时启动设置向导并在连续启动时打开列表视图。设置向导将收集信息以创建用户和相关设置。列表视图更像是一个选项卡式视图，选项卡内容可滚动。

设置向导是 LinearLayout 而第二次启动应该使用 TabHost。当我使用 sharedPreferences 来找出首次启动等时，如何调用不同的布局。如果我根据条件使用 setContentView，则该类必须扩展 TabActivity，但如果启动设置向导，则它会失败，因为不存在 TabHost。如果我使用意图来启动不同的屏幕，我是否应该有一个虚拟布局，通过意图启动设置或列表布局？单击后退按钮时，它会返回到虚拟布局。关于它应该如何设计的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:17:30.000

让您的主要活动是设置向导，因此当用户单击主屏幕上的程序图标时，它将启动您的设置向导，然后在设置向导的 onCreate 上，您第一次检查首选项，如果您是第一次 setContentView()和所有，如果没有，那么开始你的其他活动并首先调用finish()。

所以每次第一次之后，你的设置向导都会被调用，然后你杀死它并开始你真正的程序活动。

如果您调用完成，后退按钮将不会返回到向导。

# windows-xp - Windows 7共享文件夹如果从XP访问会要求输入密码，为什么

> ID：14143377
> 
> 赞同：1
> 
> 时间：2013-01-03T16:52:25.503
> 
> 标签：windows-xp, password-protection, windows-7-x64, sharing, lan

在一台新的**W7 Home Premium x64**机器上，有几个文件夹共享到 lan，所有常见的已知设置都已完成**，无需输入密码即可进行共享，**但如果从其他**Windows XP Home 计算机连接，它会一直要求输入密码**

*   连接设置为家庭网络
*   在家庭/工作的网络中心设置中设置为“共享不需要密码”
*   允许共享公用文件夹
*   尝试了“使用家庭组/使用用户名密码”设置
*   共享文件夹在高级共享选项下设置了“所有人”的读/写权限
*   防火墙（Eset Smart Security）设置为允许子网中的所有 tcp/udp

计算机有静态 IP，当我在 XP 电脑中输入这台机器的地址 (192.168.1.1) 时，它要求我输入密码。从 W7 机器提供用户名和密码，或使用 W7 机器上添加的其他凭据进行网络登录，它可以打开共享，但我不知道如何摆脱它？我只是希望它在不要求密码的情况下工作。

在 XP 上，当我单击“连接网络驱动器”时，我可以看到 W7 机器图标，但它没有显示 [+] 来查看其上的共享（因为该死的身份验证是必需的）

在 XP 机器上，我什至检查了“始终使用 TCPIP 上的 Netbios”，但没有任何区别

我设法通过**\\192.168.1.1\sharename**手动提供 W7 上文件夹的路径并检查“**使用不同的凭据**”来连接 xp 上的网络驱动器，但仍然有一些使用此共享文件夹中数据的应用程序在使用它时遇到问题

我什至在提供凭据后立即从共享中启动客户端设置 exe，以便我看到文件，但安装程序告诉我找不到数据/它是专门为使用其中的数据在多台计算机上工作而设计的应用程序共享文件夹 /

# c# - 如何使用在 ASP.NET Web 表单的另一个对象中实例化的对象

> ID：14143385
> 
> 赞同：0
> 
> 时间：2013-01-03T16:52:47.343
> 
> 标签：c#, asp.net, oop

这可能是一个非常简单的问题，但是当涉及到使用从包含类型是另一个类的字段的类创建的对象时，我有点困惑。让我困惑的部分是如何使用来自 Web 表单的数据填充该字段。

例如，如果我有一个`customer`类，其中有一个名为`contact`which is of type的字段`Contact`，那么在 Web 表单级别填充它的正确方法是什么？目前我正在这样做，并想知道这是否正确。

这是我`customer`班级的代码，`contact`是另一个班级。

```
public class Customer
{
    private string firstName;
    private string lastName'
    private string notes;
    private Contact contact;

    public Customer()
    {
        this.contact = new Contact();
    }

    public string FirstName
    {
        get { return firstName; }
        set { firstName = value; }
    }

    public string LastName
    {
        get { return lastName; }
        set { lastName = value; }
    }
    public string Notes
    {
        get { return notes; }
        set { notes = value; }
    }
    public Contact Contact
    {
        get { return contact; }
        set { contact = value; }
    }
} 
```

我的表格中的代码

```
private Customer customer;

public WebFormSample()
{
     customer = new AddressBook.Customer();
}
protected void addButton_Click(object sender, EventArgs e)
{
     customer.FirstName = firstName.Text;
     customer.LastName = lastName.Text;
     customer.Contact.Phone = phone.Text;
     customer.Contact.Email = Email.Text;
} 
```

这是我应该使用`contact`对象的方式，还是应该`contact`在 Web 表单上实例化一个对象，填充它，然后将其分配给`customer`对象中的联系人，或者我完全错了，这应该以完全不同的方式完成方式？

希望这是有道理的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:57:41.720

您是否尝试过发布的代码？因为我希望你从未`customer.Contact`为`null`它创建实例。

因此，您可以像这样修复现有代码：

```
customer.Contact = new Contact();
customer.Contact.Phone = phone.Text;
customer.Contact.Email = Email.Text; 
```

或者您可以按照您的要求进行操作：

```
var contact = new Contact();
contact.Phone = phone.Text;
contact.Email = Email.Text;
customer.Contact = contact; 
```

根据您的需要，任何一个都应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T16:58:36.270

也许是这样的： -

```
Customer.Contact = new Contact { Phone = phone.Text
                                          , Email = Email.text }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T16:59:42.227

Customer 类不应该负责创建 Contact 类，它应该从外部获取 Contact 实例（通过构造函数或公共属性）。

如果有机会，您应该阅读有关依赖注入的更多信息。

# php - 带有多个复选框的 PHP/HTML 输入字段

> ID：14143386
> 
> 赞同：1
> 
> 时间：2013-01-03T16:52:51.197
> 
> 标签：php, javascript, html

我有一个奇怪的问题，找不到答案或任何线索，无论它看起来多么蹩脚......所以需要一些帮助......

使用 PHP 代码，我正在生成 HTML 表单：

```
$html = '
<form name="manual" action="manual.php" method="post">
<table>';
$sql = "SELECT * from table;";
$result = pg_query($sql);
while ($row = pg_fetch_assoc($result))
{        
    $html .= '
    <tr>
        <td ><input type="text" id="cid'.$row['trans_id'].'" name="cids[]" value="'.$row['case_id'].'"/></td>
        <td ><input type="text" id="ccid'.$row['trans_id'].'" name="ccids[]" value="'.$row['client_case_id'].'"/></td>
        <td ><input type="checkbox" id="trnum'.$row['trans_id'].'" name="trs[]" value="'.$row['trans_id'].'"/></td>
    </tr>';
}
$html .= '</table>
<input type="button" value="Submit" />'; 
```

它重现了带有多行的html表单和一些数据：

```
...
<tr>
<td ><input type="text" id="cidrow1" name="cids[]" value="1" /></td>
<td ><input type="text" id="ccidrow1" name="ccids[]" value="4"></td>
<td ><input type="checkbox" id="trnumrow1" name="trs[]" value="row1"/></td>
</tr>
<tr>
<td ><input type="text" id="cidrow2" name="cids[]" value="2" /></td>
<td ><input type="text" id="ccidrow2" name="ccids[]" value="43"></td>
<td ><input type="checkbox" id="trnumrow2" name="trs[]" value="row2"/></td>
</tr>
<tr>
<td ><input type="text" id="cidrow3" name="cids[]" value="3" /></td>
<td ><input type="text" id="ccidrow3" name="ccids[]" value="32"></td>
<td ><input type="checkbox" id="trnumrow3" name="trs[]" value="row3"/></td>
</tr>
<tr>
<td ><input type="text" id="cidrow4" name="cids[]" value="4" /></td>
<td ><input type="text" id="ccidrow4" name="ccids[]" value="56"></td>
<td ><input type="checkbox" id="trnumrow4" name="trs[]" value="row4"/></td>
</tr>
... 
```

我需要用户对两个输入文本字段进行更改，并且一旦检查并验证以选中这两个字段所在的同一行中的复选框。

一旦用户提交表单，我必须检查是否所有属于选定复选框的输入字段都已填写（java-script 应该在表单被发送回服务器之前在这里欺骗）并从所有选定的复选框发送回服务器值和对应的输入字段。

例如，如果在 html 表单中选择了第 1、3、4 行复选框，我需要从 cid[]、ccids[] 的输入字段和这些行的复选框中获取数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:04:11.700

问题是您的 ID 不是唯一的。请确保您的 ID 始终是唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T00:53:11.340

实际上我找到了答案：[如何使用 html 表单提交多个数组复选框](https://stackoverflow.com/questions/11820608/how-to-submit-multiple-array-checkbox-with-html-forms)！

此提要显示如何精确定位到选定的复选框。

问候， 梅尔基奥

# php - 在 html 中显示来自 mysql 表的数据

> ID：14143392
> 
> 赞同：-1
> 
> 时间：2013-01-03T16:53:09.577
> 
> 标签：php, html

我需要在 html 表中显示 mysql 数据。我目前使用的方法有点快速修复，有点笨拙，有人能解释一下正确的方法吗？

```
<?php

$a= mysql_query ("SELECT * FROM document WHERE email='$semail' ORDER BY  id ASC LIMIT 
");    
$b= mysql_query ("SELECT * FROM document WHERE email='$semail'  ORDER BY id ASC LIMIT
1 OFFSET 1 ");   
$c= mysql_query ("SELECT * FROM document WHERE email='$semail'  ORDER BY id ASC LIMIT
1 OFFSET 2 "); 

if ($a = mysql_fetch_assoc($a));
if ($b = mysql_fetch_assoc($b));
if ($c = mysql_fetch_assoc($c));

?>

<html>
  <table>
     <tr>  
       <td><?php echo $a['col1']; ?></td>
       <td><?php echo $a['col2']; ?></td>
     </tr>   
     <tr>
       <td><?php echo $b['col1']; ?></td>
       <td><?php echo $b['col2']; ?></td>
     </tr>
     <tr>
       <td><?php echo $c['col1']; ?></td>
       <td><?php echo $c['col2']; ?></td>
     </tr>
  </table>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:16:56.893

我相信这是您在构建表格时正在寻找的内容：

```
$command = "SELECT * FROM document WHERE email='$semail' ORDER BY id ASC";
$items = $MySQL->getSQL($command);

echo "<html><body>";

if(count($items) > 0)
{
    echo "<table>";
    foreach($items as $row){
        echo "<tr>";
        foreach($row as $column){
            echo "<td> {$column} </td>";
        }
        echo "</tr>";
    }
    echo "</table>";
}
else echo "NONE";

echo "</body></html>"; 
```

我的 getSQL 函数是：

```
function getSQL(/*STRING*/ $query)
        {
            $newarray = array();
            $result = mysql_query($query, $this->dbConn);

            if(!$result) die(mysql_error());
            while($row = mysql_fetch_assoc($result))
            { 
                array_push($newarray, $row);
            }

            return $newarray;
        } 
```

这将从您的查询中获取所有内容并为其构建一个表。您不必将它分解成碎片，因为它支持所有列和行大小。

# redirect - 如何在 Web 重定向域中使用我的 eXtplorer？

> ID：14143395
> 
> 赞同：0
> 
> 时间：2013-01-03T16:53:19.930
> 
> 标签：redirect, web

我正在使用 eXtplorer，它几乎可以在任何固定域/托管服务中完美运行。

现在我遇到了一个问题，我会很感激一些支持。

我的域在主域的名称中有一个网络重定向。因此，如果我将 eXtplorer 文件放在“public_html”根目录下的文件夹中，我会收到“500 内部错误”，其中还包括 404 Not found，如您在此屏幕截图中所见。

![在此处输入图像描述](../Images/aac31b0181ebe889fbe72eaf2a5a6f10.png)

我当前的域是[http://diariodebate.info/](http://diariodebate.info/)重定向是[http://panucoaldia.diariodebate.info/](http://panucoaldia.diariodebate.info/)文件在[http://diariodebate.info/eXtplorer](http://diariodebate.info/eXtplorer)里面，我已经尝试将文件放在里面“panucoaldia”文件夹没有成功。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:00:09.580

好的，好吧......我回答这个问题只是为了让其他人来这里寻找答案。最后问题本身是某些文件/文件夹没有适当的权限。毕竟，不知何故，为了 eXtplorer（和一些其他工具，如 Wordpress）需要 755 用于文件夹和 644 用于文件。

花了一段时间才得到这个技巧，但就是这样！

谢谢你。

# magento - 在父类别页面上的子类别下对 magento 产品进行分组

> ID：14143397
> 
> 赞同：2
> 
> 时间：2013-01-03T16:53:26.273
> 
> 标签：magento, magento-1.7

当有人点击父类别页面时，我希望那里列出的所有产品都按其子类别划分，例如：

（点击父类别“服装”）

衬衫：[衬衫#1] [衬衫#2] [衬衫#3]

裤子：[裤子#1][裤子#2][裤子#3]

袜子：[袜子 #1] [袜子 #2] [袜子 #3]

我的设置是父类别“服装”有三个孩子“衬衫”、“裤子”和“袜子”。当显示“服装”类别页面时，它仅列出所有产品，而不将它们分组在各自的子类别下。

我正在使用 Magento 社区 1.7.0.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:01:22.563

一种方法：

获取所有子类别

```
$category_model = Mage::getModel('catalog/category')->load($currentCategoryId); 
$all_child_categories = $category_model->getResource()->getAllChildren($_category); 
```

获取所有类别的产品

```
$productCollection = Mage::getResourceModel('catalog/product_collection')
                       ->addCategoryFilter($category); 
```

**编辑：**

为了获得子类别产品，请按照以下步骤操作：

转到此模板文件（您可以在此处放置下面列出的所有代码）：

```
catalog/product/list.phtml 
```

获取当前类别 ID：

```
$currentCategory = Mage::registry('current_category');
$currentCategoryID = $currentCategory->getEntityId(); 
```

加载当前类别模型以获取类别子项：

```
$category_model = Mage::getModel('catalog/category')->load($currentCategoryID); 
```

获取所有子类别 ID：

```
$all_child_categories = $category_model->getResource()->getAllChildren($category_model ); 
```

循环遍历每个子 id 并加载类别及其子项：

```
foreach ($all_child_categories as $child_id):
    $child_cat = Mage::getModel('catalog/category')->load($child_id);
    $products =  Mage::getResourceModel('catalog/product_collection')
                   ->addCategoryFilter($child_cat);
endforeach; 
```

让我们知道您是否需要进一步的帮助

# mysql - 哪些 MySQL 索引需要更长时间才能更新？

> ID：14143402
> 
> 赞同：1
> 
> 时间：2013-01-03T16:53:33.860
> 
> 标签：mysql, optimization, indexing, cardinality

我想知道，当将条目添加到 MySQL 表时，哪些索引需要更长时间才能更新。那些具有高基数或具有低基数的索引。

是一般规则吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:00:01.237

两种类型的表通常具有相同的更改量。如果更改 N 行，则需要更新 N 个键。

但是，高基数有很多唯一值（例如带有`UNIQUE`约束的键），而低基数几乎没有唯一值。

很少有值比许多值占用更少的空间，因此索引的较大比例（可能是全部）将适合缓存/缓冲区。因此，更新和读取都将从 RAM 提供，而不是访问磁盘，这意味着它会更快。

另一方面，如果基数很低，则索引实际上并没有那么有用。毕竟，您希望索引能够*快速*查找行。理想情况下，对树或哈希结构的 1-5 次探测恰好返回一行（在几百万/十亿行中）。或者，对应于某个范围的行子集。
如果您用于查找行的索引每次都返回一组 10,000 行，这通常不是很有用（当然也有例外）。

# ruby-on-rails-3 - Rails 使用复选框进行验证

> ID：14143406
> 
> 赞同：0
> 
> 时间：2013-01-03T16:53:45.673
> 
> 标签：ruby-on-rails-3, validation

我的 Rails 验证需要一些帮助。如果另一个字段具有特定值，我需要验证一个字段是否已填写。代码如下。

如果选择了扩展许可证，则需要填写扩展许可证类型。它不起作用，当我填写表格并选择扩展并且不检查任何扩展许可证类型时，它验证正常并且我没有收到错误消息。

许可证字段是一个下拉菜单，extended_license_type 是一组复选框。

```
 validates :license, presence: true
  validates :extended_license_type, presence: true, :if => :license_extended?

private
    def license_extended?
      license == 'extended'
    end 
```

这是我的表单复选框。也许我的问题是他们而不是验证。任何帮助将不胜感激。

```
 <%= f.check_box :extended_license_type, {}, "ur" %>
    <%= f.label :extended_license_type, "Unlimited Reproduction" %>
    <%= f.check_box :extended_license_type, {}, "ms" %>
    <%= f.label :extended_license_type, "Multi-User/Seat" %>
    <%= f.check_box :extended_license_type, {}, "pr" %>
    <%= f.label :extended_license_type, "Product for Resale" %>
    <%= f.check_box :extended_license_type, {}, "ers" %>
    <%= f.label :extended_license_type, "Product for Electronic Resale" %>
    <%= f.check_box :extended_license_type, {}, "ed" %>
    <%= f.label :extended_license_type, "Product for Electronic Distribution" %>
    <%= f.check_box :extended_license_type, {}, "ep" %>
    <%= f.label :extended_license_type, "Extended Legal Protection" %> 
```

这是我的许可证字段下拉列表。

```
<%= f.select :license, [["Standard", "standard"], ["Extended", "extended"]] %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:42:33.433

验证工作得很好。它为extended_license_type 传递了'0'，并且验证了因为我只是检查该字段的存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:29:37.243

我想`colon`在许可证之前添加一个`private`，

```
private
    def license_extended?
      :license == 'extended'
    end

validates_presence_of :extended_license_type, :if => :license_extended? 
```

（或者）

```
validates :extended_license_type, :presence => true, :if => :license? 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T16:59:40.543

尝试

```
validates_presence_of :extended_license_type, :if => :license_extended? 
```

# wpf - wpf datagrid性能问题中的组合列

> ID：14143416
> 
> 赞同：3
> 
> 时间：2013-01-03T16:54:14.103
> 
> 标签：wpf, datagrid, combobox

我有一个包含数据网格的 wpf 表单。数据网格中的 1 列是组合框类型。组合框的 ItemsSource 属性中有 1000 个项目。因此，当单击组合框旁边的箭头（我相信呈现问题）时，显示值需要花费大量时间。我们怎样才能让组合框更快地显示项目，几乎没有延迟？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T16:59:11.050

试着把它放到你的组合框上。而不是一次加载所有项目，这应该使它在您查看它们时加载它们。

对于数据网格内部，我总是将 DataGridTemplateColumn 用于我的组合框列：

```
 <DataGridTemplateColumn Header="My Combo Column">
       <DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
                 <ComboBox Margin="0" ItemsSource="{Binding Path=DataContext.MyCollection, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}"
                   SelectedItem="{Binding Path=Item.Property, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" >
                        <ComboBox.ItemsPanel>
                             <ItemsPanelTemplate>
                                  <VirtualizingStackPanel Width=250 VirtualizingStackPanel.VirtualizationMode="Recycling" CanHorizontallyScroll="True"/>
                             </ItemsPanelTemplate>
                        </ComboBox.ItemsPanel>
                 </ComboBox>
            </DataTemplate>
        </DataGridTemplateColumn.CellTemplate>
 </DataGridTemplateColumn> 
```

# c# - Microsoft Dynamics GP 10 卸载工件

> ID：14143417
> 
> 赞同：0
> 
> 时间：2013-01-03T16:54:15.953
> 
> 标签：c#, .net, vba, dynamics-gp

卸载 Microsoft Dynamics GP 10 后，会留下哪些工件？

我之所以问，是因为我在以前安装了 GP 10 的计算机上遇到了 GP 2010 中与焦点相关的奇怪行为，但在从未安装过 GP 10 的计算机上不会发生这种奇怪的行为。更具体地说，当 VBA 绑定到本地字段（按钮）显示来自自定义 DLL 的表单时，会发生奇怪的行为，该自定义 DLL 是由我负责维护/开发的 C# .NET 项目构建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:44:26.387

我问的理由是有缺陷的；根本原因实际上是[Microsoft.Dexterity.Support.FilterEvents.dll](http://blogs.msdn.com/b/developingfordynamicsgp/archive/2010/09/10/revisited-modal-windows-issues-in-gp-10-0-fixed-in-10-0-sp5.aspx)在不应该安装的情况下被安装，而不是 GP 10 安装直接留下的任何工件。

我实际看到的唯一工件（无可否认，经过最少的测试）是*%ProgramFiles(x86)%\Microsoft Dynamics\GP*文件夹。也许[GP 10 手动卸载说明](http://dynamicsgpblogster.blogspot.com.au/2008/11/how-to-uninstall-microsoft-dynamics-gp.html)中的列表很全面，并且只有其中的项目才能在正确卸载后留下。

# javascript - 在dojo中动态设置上下文菜单的标签

> ID：14143418
> 
> 赞同：0
> 
> 时间：2013-01-03T16:54:15.670
> 
> 标签：javascript, dojo

所以我已经能够通过使用 id: disable 然后设置来禁用上下文菜单项

```
 dijit.byId("disable").set("disabled", true); 
```

有没有办法做到这一点来标记？

```
 dijit.byId("labelID").set("label", "hi label"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:35:24.057

`dijit.byId("labelID").set("label", "hi label");`确实动态分配标签。我将它添加到 onRowContextMenu() 因为它在网格内

# javascript - Javascript 使用正则表达式 id 搜索有选择地清除表单输入

> ID：14143428
> 
> 赞同：2
> 
> 时间：2013-01-03T16:55:01.943
> 
> 标签：javascript, forms, matching

这与我迄今为止找到的解决方案有点不同。我所拥有的是一个带有近 500 个标签的 HTML 表单（一个基于浏览器的时间卡输入，占所有 7 天的 15 小时窗口，输入间隔为 15 分钟）。我将这些输入标签命名为相当直观。星期一的输入被命名为 M600、M615、M630、M645、M700 ... M2100。星期二是 T###、W### 等等。所有这些都采用单一形式，在提交时对所有内容进行 JSON 编码并将其写入文本数据库以便稍后动态调用。如果表单尚未提交（通过隐藏标签检测提交，页面将拉入并将 JSON 文件中的值解码到表单中作为默认输入值。

我想要做的是以某种方式为每一天创建一个 html 链接，该链接只会清除当天的一组值。我有一个想法，这会以某种方式从链接（或按钮）onClick 事件触发，并运行类似于 form.field.this.value("") 的脚本。但是，我需要使用相当于正则表达式搜索字符串（例如 $(M\d)^）来引用所有输入，而不是引用“this”。

在算法意义上：

```
<input type="text" value="1234" name="M900"/>
<input type="text" value="3456" name="M915"/>
<input type="text" value="1234" name="T900"/>
<input type="text" value="3456" name="T915"/>
<a onClick="clearMondayOnly">Clear Monday's Fields</a>

<script>
function clearMondayOnly() {

  for each input element where name matches "M###" do
   $0.value=""
  end
}
</script> 
```

诚然，我不精通 javascript，但如果我知道如何启动匹配字符串，我确信我可以糊弄过去。此外，我想尽量避免使用 jQuery 对象之类的东西，因为我确信这可以通过直接的 JS 来完成。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:13:56.937

像这样的东西应该在普通的*现代*JavaScript 中工作：

```
function clearDays() {

  var days = [].slice.call( arguments ),
      inputs = document.querySelectorAll(
        'input[name^='+ days.join('], input[name^=') +']'
      );

  [].forEach.call( inputs, function( input ) {
    input.value = '';
  });

} 
```

你可以这样称呼它：

```
clearDays('M');
clearDays('M','T');
clearDays('M','W','Su');
// etc... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:58:34.343

如果我得到你，你只想要（周日）：

```
$('input[name^="Su"]').val(''); 
```

完整的代码是

```
<a clear="M" >Clear Monday's Fields</a>
...
<a clear="Su" >Clear Sundays</a>
<script>
    $('a[clear]').click(function(){
      $('input[name^="'+$(this).attr('clear')+'"]').val('');
    });
</script> 
```

[示范](http://jsfiddle.net/tfRfy/)

# python - Flask-SQLAlchemy 数据模型关系问题

> ID：14143429
> 
> 赞同：3
> 
> 时间：2013-01-03T16:55:08.070
> 
> 标签：python, sqlalchemy, flask, flask-sqlalchemy

我正在尝试创建一个系统，其中**Person**是一个**WorkGroup**的一部分，并且每个**WorkGroup**包含许多**Person**。**Person**还包含先前匹配的**Person**的列表。以下是我到目前为止所拥有的，我能够成功地将测试名称加载到其中。但是，当我在**findPartner**方法中尝试将一个新的**WorkGroup**分配给**Person 的 workGroup**字段时，如下所示：

```
self.workGroup = WorkGroup(self, newPartner) 
```

我收到错误消息：

`AttributeError: 'list' object has no attribute '_sa_instance_state'`

这让我很困惑。（我在列表之后包含了更完整的堆栈跟踪）。希望有人能指出错误（我只使用 SQLAlchemy 大约 24 小时，所以我怀疑这是基本的）。

```
def sanitize(first, last):
    def san(nm):
        return " ".join([part.strip().capitalize().replace(",", "") 
                         for part in nm.split()])
    return san(first) + " " + san(last)

class Person(db.Model):
    __tablename__ = 'person'
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(80), unique=True)
    workGroup = db.relationship("WorkGroup", uselist=False)
    prevPairings_id = db.Column(db.Integer, db.ForeignKey('person.id'))
    prevPairings = db.relationship('Person')

    def __init__(self, first, last):
        self.name = sanitize(first, last)
        self.workGroup = None
        self.prevPairings = []

    def __repr__(self):
        return self.name

    def findPartner(self, amongPeople):
        if self.workGroup:
            return # You already have a group
        candidates = [p for p in amongPeople if p is not self and 
                      p not in self.prevPairings and not p.workGroup]
        assert candidates
        newPartner = candidates[0] # Just choose the first available
        self.prevPairings.append(newPartner)
        newPartner.prevPairings.append(self)
        self.workGroup = WorkGroup(self, newPartner)
        newPartner.workGroup = self.workGroup

    def show(self):
        print "<Person %r %r %r %r>" % (self.id, self.name, self.prevPairings, self.workGroup)

class WorkGroup(db.Model):
    __tablename__ = 'workgroup'
    id = db.Column(db.Integer, primary_key=True)
    members_id = db.Column(db.Integer, db.ForeignKey('person.id'))
    members = db.relationship('Person')

    def __init__(self, *partners):
        self.members = list(partners)

    def include(self, newMember):
        assert isinstance(newMember, Person)
        self.members.append(newMember)

    def group(self):
        return set(self.members)

    def __nonzero__(self):
        return bool(self.members)

    def __iter__(self):
        return iter(self.members)

    def clear(self):
        self.members = []

    def __str__(self): return str(self.members)
    def __repr__(self): return self.__str__()

############################################################

def generateNewPairings():
    all = Person.query.all()
    if max([len(p.prevPairings) for p in all]) > len(all) - 2:
        print "All Pairings Exhausted"
        for p in all:
            p.prevPairings = []
    for p in all:
        p.workGroup = None

    def pairUp(everyone):
        if len(everyone) % 2: # Odd number
            oddOne = random.choice(everyone)
            everyone.remove(oddOne)
            pairUp(everyone) # Recurse with even number
            random.choice(everyone).workGroup.include(oddOne)
            return
        for p in everyone: # Even number
            p.findPartner(everyone)

    pairUp(all)
    for p in all: print p.show() 
```

**这是完整的堆栈跟踪：**

```
File "C:\Python27\lib\site-packages\flask\app.py", line 1701, in __call__
return self.wsgi_app(environ, start_response)
File "C:\Python27\lib\site-packages\flask\app.py", line 1689, in wsgi_app
response = self.make_response(self.handle_exception(e))
File "C:\Python27\lib\site-packages\flask\app.py", line 1687, in wsgi_app
response = self.full_dispatch_request()
File "C:\Python27\lib\site-packages\flask\app.py", line 1360, in full_dispatch_request
rv = self.handle_user_exception(e)
File "C:\Python27\lib\site-packages\flask\app.py", line 1358, in full_dispatch_request
rv = self.dispatch_request()
File "C:\Python27\lib\site-packages\flask\app.py", line 1344, in dispatch_request
return self.view_functions[rule.endpoint](**req.view_args)
File "C:\Users\Bruce Eckel\Dropbox\AtomicScala\_AtomicScalaSeminarLocalServer\AtomicScalaSeminarSQLAlchemy.py", line 242, in generate_pairs
generateNewPairings()
File "C:\Users\Bruce Eckel\Dropbox\AtomicScala\_AtomicScalaSeminarLocalServer\AtomicScalaSeminarSQLAlchemy.py", line 120, in generateNewPairings
pairUp(all)
File "C:\Users\Bruce Eckel\Dropbox\AtomicScala\_AtomicScalaSeminarLocalServer\AtomicScalaSeminarSQLAlchemy.py", line 114, in pairUp
pairUp(everyone) # Recurse with even number
File "C:\Users\Bruce Eckel\Dropbox\AtomicScala\_AtomicScalaSeminarLocalServer\AtomicScalaSeminarSQLAlchemy.py", line 118, in pairUp
p.findPartner(everyone)
File "C:\Users\Bruce Eckel\Dropbox\AtomicScala\_AtomicScalaSeminarLocalServer\AtomicScalaSeminarSQLAlchemy.py", line 63, in findPartner
self.workGroup = WorkGroup(self, newPartner)
File "C:\Python27\lib\site-packages\sqlalchemy\orm\attributes.py", line 238, in __set__
instance_dict(instance), value, None)
File "C:\Python27\lib\site-packages\sqlalchemy\orm\attributes.py", line 736, in set
value = self.fire_replace_event(state, dict_, value, old, initiator)
File "C:\Python27\lib\site-packages\sqlalchemy\orm\attributes.py", line 756, in fire_replace_event
value = fn(state, value, previous, initiator or self)
File "C:\Python27\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 89, in set_
sess._save_or_update_state(newvalue_state)
File "C:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1389, in _save_or_update_state
halt_on=self._contains_state):
File "C:\Python27\lib\site-packages\sqlalchemy\orm\mapper.py", line 1928, in cascade_iterator
parent_dict, visited_states, halt_on))
File "C:\Python27\lib\site-packages\sqlalchemy\orm\properties.py", line 929, in cascade_iterator
get_all_pending(state, dict_)
File "C:\Python27\lib\site-packages\sqlalchemy\orm\attributes.py", line 693, in get_all_pending
ret = [(instance_state(current), current)]
AttributeError: 'list' object has no attribute '_sa_instance_state' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T19:30:32.123

我认为问题在于您`db.relationship()`在两者中都使用`Person`和`WorkGroup`类。将其设置在其中一个中，并使用`backref`关键字参数来定义另一侧的关系。

另一个问题是您将外键放在错误的类中。由于您希望和（一个工作组中的许多人）之间具有[多对一](http://docs.sqlalchemy.org/en/rel_0_8/orm/relationships.html#many-to-one)关系，因此您需要在类中定义FK并从.`Person``WorkGroup``workgroup_id``Person``members_id``members``WorkGroup`

在这些更改之后，我遇到了`CircularDependencyError`异常，很可能是由于`prevPairings_id`FK[指向同一行](http://docs.sqlalchemy.org/en/rel_0_8/orm/relationships.html#post-update)。添加`post_update=True`到`prevPairings`关系解决了这个问题。

因此，以下是您需要执行的所有修复，以使您的代码正常工作：

```
class Person(db.Model):
    # ...
    workgroup_id = db.Column(db.Integer, db.ForeignKey('workgroup.id'))
    # No need to set uselist=False, it will be determined automatically by
    # type of relationship (many-to-one in this case).
    workGroup = db.relationship("WorkGroup", backref='members')
    # ...
    prevPairings = db.relationship('Person', post_update=True)
    # ...

class WorkGroup(db.Model):
    # ...
    # Removed members_id and members.
    # ... 
```

# django - 使用 Django 发出 HTTP 请求并反序列化输出

> ID：14143433
> 
> 赞同：7
> 
> 时间：2013-01-03T16:55:19.307
> 
> 标签：django, http, request

所以我对整个 Web 开发几乎是全新的，但是我被投入到一个使用 Django 来从 Web 服务中提取和解析数据的辅助项目中，并且即使在浏览 Django 时也很难准确地理解事情是如何工作的文档。

在 Django 中，我在基本级别上设置并工作（使用模板，显示的页面显示“Hello World”）。

现在为了从 web 服务中提取数据，我需要向以下格式的 URL 发出请求：

```
http://wbsapi.withings.net/[service_name]?action=[action_name]&[parameters] 
```

在提供的 PHP 示例中，他们使用 cURL 执行此操作，然后使用 json_decode。

我会怎么做才能从 Django 中获得类似的功能？提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T16:59:26.750

您将使用`urllib2`和`json`标准模块（或者，优秀的库[请求](http://docs.python-requests.org/en/latest/)和`json`）：

```
import urllib2
import json

url = 'http://wbsapi.withings.net/[service_name]?action=[action_name]&[parameters]'
serialized_data = urllib2.urlopen(url).read()

data = json.loads(serialized_data) 
```

如果您希望它出现在页面上，则希望它出现在[视图](https://docs.djangoproject.com/en/1.4/topics/http/views/)中，您需要将其[与 url 关联](https://docs.djangoproject.com/en/1.4/topics/http/urls/)。

您的`urls.py`遗嘱中包含类似

```
from django.conf.urls import patterns, url, include

urlpatterns = patterns('',
    (r'^get_data/$', 'myapp.views.get_data'),
) 
```

你的`myapp/views.py`遗嘱包含类似的东西

```
from django.http import HttpResponse
import urllib2
import json

def get_data(request):
    url = 'http://wbsapi.withings.net/[service_name]?action=[action_name]&[parameters]'
    serialized_data = urllib2.urlopen(url).read()

    data = json.loads(serialized_data)

    html = "<html><body><pre>Data: %s.</pre></body></html>" % json.dumps(data, indent=2)

    return HttpResponse(html) 
```

当然，我不知道你希望你的数据如何显示，所以我只是再次序列化它:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:00:50.287

虽然在 Django 中实现这种功能是可能的，但涉及到一堆中间步骤。首先，您应该考虑如何使用 Python 来查询 Web 服务。为此，我强烈推荐[Requests 模块](http://docs.python-requests.org/en/latest/)，它对此非常有用。

# codeigniter - 带有样板的代码点火器

> ID：14143434
> 
> 赞同：0
> 
> 时间：2013-01-03T16:55:20.753
> 
> 标签：codeigniter, boilerplate

我试图整合codegiter和样板。

我创建了一个控制器**主页**

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed'); 

/* Heredamos de la clase CI_Controller */ 
class Home extends CI_Controller { 

    function __construct()  
    {         
        parent::__construct();         
    } 

    function index()  
    { 
        $data =  array('title' => 'homepage', 'main_content' => 'home_v'); 
        $this->load->view('template', $data); 
    } 

} 
```

然后我创建了一个包含 2 个文件的文件夹“包含”：**页眉和页脚**（在视图中）

并且还在视图中查看我的模板和带有一些文本的文件 home_v，以了解我的示例是否有效。

**模板.php**

```
<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>$title</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

        <link rel="stylesheet" href="<?php echo base_url('css/normalize.css'); ?>">
        <link rel="stylesheet" href="<?php echo base_url('css/main.css'); ?>">
        <script src="<?php echo base_url('js/vendor/modernizr-2.6.2.min.js'); ?>"></script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <!-- Add your site or application content here -->
        <div id="container">
        <header>
            <?php $this->load->view('includes/header'); ?>

        </header>

        <div id="main" role="main">
            <?php $this->load->view($main_content); ?> 
        </div>

        <footer>
            <?php $this->load->view('includes/footer'); ?>
        </footer>
        </div> 
        <!-- fin container -->

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.8.3.min.js"><\/script>')</script>
        <script src="js/plugins.js"></script>
        <script src="js/main.js"></script>

        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
        <script>
            var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script>
    </body>
</html> 
```

之后，一个新的控制器**类别**

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed'); 

/* Heredamos de la clase CI_Controller */ 
class Categorias extends CI_Controller { 

    function __construct()  
    { 

        parent::__construct(); 

        /* Cargamos la base de datos */ 
        $this->load->database(); 

        /* Cargamos la libreria*/ 
        $this->load->library('grocery_crud'); 

            /* Añadimos el helper al controlador */ 
        $this->load->helper('url');  

    } 

    function index()  
    { 
        /* Puse lo mismo pero cambiando el contenido     */ 
        //$data =  array('title' => 'categorias', 'main_content' => 'categorias/categorias_v'); 
        //$this->load->view('template', $data);  

                  /* si solo muestro esto funciona el crud */ 
        //redirect('categorias/categorias_v'); 

    } 

    /* 
     *  
      **/ 
    function categorias_v() 
    { 
        try{ 

            /* Creamos el objeto */ 
            $crud = new grocery_CRUD(); 

            /* Seleccionamos el tema */ 
            $crud->set_theme('flexigrid'); 

            /* Seleccionmos el nombre de la tabla de nuestra base de datos*/ 
            $crud->set_table('categorias'); 

            /* Le asignamos un nombre */ 
            $crud->set_subject('Categorias'); 

            /* Asignamos el idioma español */ 
            $crud->set_language('spanish'); 

            /* Aqui le decimos a grocery que estos campos son obligatorios */ 
            $crud->required_fields( 
                'id_categoria', 
                'nombre_categoria' 
            ); 

            /* Aqui le indicamos que campos deseamos mostrar */ 
            $crud->columns( 
                'id_categoria', 
                'nombre_categoria' 
            ); 

            /* Generamos la tabla */ 
            $output = $crud->render(); 

            $this->load->view('categorias/categorias_v', $output); 

        }catch(Exception $e){ 
            /* Si algo sale mal cachamos el error y lo mostramos */ 
            show_error($e->getMessage().' --- '.$e->getTraceAsString()); 
        } 
    } 
} 
```

并在视图中**categorias_v**

```
<?php 
foreach($css_files as $file): ?>
    <link type="text/css" rel="stylesheet" href="<?php echo $file; ?>" />
<?php endforeach; ?>
<?php foreach($js_files as $file): ?>
    <script src="<?php echo $file; ?>"></script>
<?php endforeach; ?>

<?php echo $output; ?> 
```

但这不起作用，我有一些错误

**遇到 PHP 错误 严重性：通知消息：未定义变量：css_files 文件名：categorias/categorias_v.php 行号：2**

希望有人可以帮助我，在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:00:38.933

在您`categorias_v`看来，您正在尝试访问一个名为的变量`$css_files`- 但是，您永远不会将任何变量传递到该视图中。

您可以通过将数组发送到`$this->load->view`方法来将变量传递到视图中，如下所示：

```
$data = array('css_files' => 'style.css');
$this->load->view($main_content, $data); 

// $data has the array key of css_files, 
// so in the view $css_files will be available. 
```

# c# - 从 IEnumerable 中删除项目 收藏

> ID：14143438
> 
> 赞同：72
> 
> 时间：2013-01-03T16:55:30.277
> 
> 标签：c#, ienumerable

我有一个弹出的`IEnumerable<User>`集合。

我想从中删除一个项目，我该怎么做？

```
foreach(var u in users)
{
  if(u.userId = 1123)
  {
    // remove!
  }
} 
```

我知道您不打算在循环时删除，所以我不介意创建一个新集合或在之后删除它。

但是我不知道如何删除一个项目，因为某种原因有点丢失了！

另外，我也很困惑，如何创建一个新集合，例如：

```
IEnumerable<User> modifiedUsers = new List<User>();

foreach(var u in users)
{
   if(u.userId != 1233)
   {
        modifiedUsers.add ??????
   }
} 
```

如何添加到集合中？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-01-03T16:58:04.997

`List`不删除，而是使用 LINQ创建一个没有该元素的新元素：

```
// remove
users = users.Where(u => u.userId != 123).ToList();

// new list
var modified = users.Where(u => u.userId == 123).ToList(); 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-01-03T16:57:18.863

您不能从`IEnumerable`;中删除项目 它只能被枚举，如此处所述：http: [//msdn.microsoft.com/en-us/library/system.collections.ienumerable.aspx](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable.aspx)

`ICollection`如果要添加和删除项目，则必须使用。也许你可以尝试铸造你的`IEnumerable`; 这当然只有在底层对象实现 ICollection 时才有效。

有关更多信息，请参见此处：http `ICollection`: [//msdn.microsoft.com/en-us/library/92t2ye13.aspx](http://msdn.microsoft.com/en-us/library/92t2ye13.aspx)

当然，您可以从您的 IEnumerable 中创建一个新列表，正如兰特所指出的那样，但这可能是“次优的”，这当然取决于您的实际用例。

`ICollection`可能是要走的路。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-03T16:57:20.750

尝试将`IEnumerable`变成`List`. 从此时起，您将能够使用`List`'`Remove`方法删除项目。

要将其作为参数传递给`Remove`使用 Linq 的方法，您可以通过以下方法获取项目：

*   `users.Single(x => x.userId == 1123)`
*   `users.First(x => x.userId == 1123)`

代码如下：

```
users = users.ToList(); // Get IEnumerable as List

users.Remove(users.First(x => x.userId == 1123)); // Remove item

// Finished 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-01-29T18:27:46.223

你可以这样做：

```
users = users.Where(x => x.userId != userIdToRemove); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-03T16:57:09.237

你不能。`IEnumerable<T>`只能迭代。

在您的第二个示例中，您可以通过迭代它的副本从原始集合中删除

```
foreach(var u in users.ToArray()) // ToArray creates a copy
{
   if(u.userId != 1233)
   {
        users.Remove(u);
   }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T16:58:15.603

`IEnumerable`接口就是这样，可枚举的——它根本不提供任何方法来`Add`或`Remove`修改列表。

该接口只是提供了一种迭代某些项目的方法 - 大多数需要枚举的实现都会实现`IEnumerable`，例如`List<T>`

你为什么不直接使用你的代码而不使用隐式转换`IEnumerable`

```
// Treat this like a list, not an enumerable
List<User> modifiedUsers = new List<User>();

foreach(var u in users)
{
   if(u.userId != 1233)
   {
        // Use List<T>.Add
        modifiedUsers.Add(u);
   }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-03T16:59:14.287

您不能删除`IEnumerable<T>`元素，但可以使用[Enumerable.Skip 方法](http://msdn.microsoft.com/en-us/library/bb358985.aspx)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-03-23T12:11:31.350

users.toList().RemoveAll(user => <你的条件>)

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2019-01-31T21:05:20.500

现在有一个扩展方法可以将 a 转换`IEnumerable<>`为 a`Dictionary<,>`然后有一个`Remove`方法。

```
public readonly IEnumerable<User> Users = new User[]; // or however this would be initialized

// To take an item out of the collection
Users.ToDictionary(u => u.Id).Remove(1123);

// To take add an item to the collection
Users.ToList().Add(newuser); 
```

# java - 如何修改java函数中的两个Double对象？

> ID：14143442
> 
> 赞同：3
> 
> 时间：2013-01-03T16:55:42.590
> 
> 标签：java

我的函数将两个 Double 对象作为输入，我想在函数内部修改它们。似乎不可能，似乎java将它们复制到函数中。这是如何在java中完成的，在c ++中你通过引用传递。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T16:56:54.797

包装类是不可变的，这就是您无法修改它们的原因。一种方法是，您可以创建一个具有这两个属性的类并将其传递给函数，在函数内部，为该对象设置新值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T16:57:37.290

您可以做的是将`Double`对象包装到 Wrapper 类中，并修改存储在该对象中的双精度值。否则，别无他法，因为您要更改的唯一值是本地参数。

```
public class DoubleWrapper
{
  private double d1, d2; 
  public void setter(double newdouble){} 
  public double getter() {}
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T16:58:07.217

传递数组中的双精度值，您可以修改函数中的数组元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T16:58:52.503

这里有两个问题：

首先，Java 中的所有值都是按值传递的。这意味着，当一个对象 X 被发送到一个函数时，该函数拥有一个*新*版本的 X。

其次，您不能修改`Double`值。您必须修改 a `double`，并且可以通过运行从 转换`Double d`为。`double``d.doubleValue()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T16:57:33.780

Java 是按值调用的，所以你是对的：它必须以另一种方式完成。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T17:06:35.600

一般来说，您不应该修改 Java（或任何语言）中的参数

相反，我建议您将更改的值作为数组返回

```
public static double[] square(double... doubles) {
     double[] ret = new double[doubles.length];
     for(int i = 0; i < doubles.length; i++)
         ret[i] = doubles[i] * doubles[i];
     return ret;
} 
```

理想情况下，你会有一个包装这些双打的类，然后你调用一个方法来改变它们

```
class MyDoubles {
     double d1, d2;

     public void squareDoubles() {
         d1 *= d1;
         d2 *= d2;
     }

     public String toString() { return "{ " + d1 +", " + d2 + "}"; }
} 
```

# html - 样式从其 HTML 属性读取尺寸，而不是 CSS

> ID：14143445
> 
> 赞同：2
> 
> 时间：2013-01-03T16:55:48.780
> 
> 标签：html, css, image

一旦通过 CSS 篡改了属性`width`，`height`你如何取消这些样式并告诉图像再次从其 HTML 属性中读取尺寸？

`width`和`height`的初始值为`auto`，但显式设置它不起作用：

```
img {
  height: 200px;
}

/* ... */

img {
  height: auto;
} 
```

它只会让图像完全忽略它们的 HTML 属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T16:58:55.337

恐怕不可能以这种方式取消 CSS 规则以使元素回退到其 HTML 表示属性。这是因为[表示属性映射到 CSS 规则的优先级很低，以至于即使是带有`*`选择器的 CSS 规则也会永久覆盖它们](http://www.w3.org/TR/CSS21/cascade.html#preshint)。

将属性设置为其初始值并不会固有地取消任何东西。它只是创建一个规则，将其设置为规范规定的默认值，并像任何其他规则一样参与级联。在这种特殊情况下，设置`height: auto`不起作用，因为它所做的只是覆盖最初由 HTML 属性和之前的 CSS 规则提供的值......好吧，`auto`.

我能想到的一种可能的替代方法是使用 JavaScript 从文档的样式表中删除有问题的声明，但我不确定这是否真的有效——我还没有尝试过。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T17:25:47.433

如果您有权访问在 上设置 的初始 CSS `height`，`img`那么对于 CSS3 浏览器，您可以将其修改为：

```
img:not([width]):not([height]) {
    height: 200px;
} 
```

`:not`如果图像具有 a`width`或 a`height`属性，它使用来“不”应用它。你可以[在这个 fiddle 中看到结果](http://jsfiddle.net/GuAgj/3/)。这意味着您总是希望*属性*优先于上述 CSS。然后，如果您真的想通过 CSS 应用更改，则需要将类或其他东西应用到`img`，如下所示：

```
<img src="blah" class="specialCase" />

img.specialCase {
    height: 200px;
} 
```

这会否决`height`但不是[此小提琴显示](http://jsfiddle.net/GuAgj/5/)`width`的设置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T17:14:14.150

将宽度和高度设置为`initial`确实会导致原始图像大小，不幸的是，这似乎**仅限于 Webkit** (Chrome/Safari)。

[示例 jsfiddle](http://jsfiddle.net/4cSXR/)

```
img {width: 50px;height: 50px;}
img {width:initial;height:initial;} 
```

​</p>

# r - R randomForest 用于分类

> ID：14143450
> 
> 赞同：7
> 
> 时间：2013-01-03T16:56:04.090
> 
> 标签：r, classification, data-analysis, random-forest

我正在尝试使用 randomForest 进行分类，但我反复收到一条错误消息，似乎没有明显的解决方案（randomForest 在过去对我进行回归时效果很好）。我在下面粘贴了我的代码。“成功”是一个因素，所有因变量都是数字。关于如何正确运行此分类的任何建议？

```
> rf_model<-randomForest(success~.,data=data.train,xtest=data.test[,2:9],ytest=data.test[,1],importance=TRUE,proximity=TRUE)

Error in randomForest.default(m, y, ...) : 
  NA/NaN/Inf in foreign function call (arg 1) 
```

另外，这是数据集的示例：

> 头部（数据）

```
success duration  goal reward_count updates_count comments_count backers_count     min_reward_level max_reward_level
True 20.00000  1500           10            14              2            68                1             1000
True 30.00000  3000           10             4              3            48                5             1000
True 24.40323 14000           23             6             10           540                5             1250
True 31.95833 30000            9            17              7           173                1            10000
True 28.13211  4000           10            23             97          2936               10              550
True 30.00000  6000           16            16            130          2043               25              500 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-06-26T03:24:28.563

除了存在 NA 等明显事实之外，此错误几乎总是由数据集中存在字符特征类型引起的。理解这一点的方法是考虑随机森林的真正作用。您正在按功能对数据集进行分区。因此，如果其中一个特征是字符向量，您将如何划分数据集？您需要类别来对数据进行分区。有多少“男性”与“女性” - 类别......

对于年龄或价格等数字特征，您可以通过分桶创建类别；大于某个年龄，小于某个价格等。你不能用纯粹的性格特征来做到这一点。因此，您需要将它们作为数据集中的因素。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-24T12:40:01.837

通常，您收到此错误消息的主要原因有两个：

1.  如果数据框包含字符向量列而不是因子。只需将您的字符列转换为一个因子

2.如果数据包含错误值，应用随机森林也会产生这个错误。头部不会显示异常值。例如：

> x = 代表( x = 样本(c(0,1)), 时间 = 24 )

```
y = c(sample.int(n=50,size = 40),Inf,Inf)

df = data.frame(col1 = x , col2 = y )

head(df)
    col1 col2
>  1    1   26
>  2    0   33
>  3    1   23
>  4    0   21
>  5    1   45
>  6    0   27 
```

现在在 df 上应用 randomForest 将导致相同的错误：

> 模型 = 随机森林（数据 = df，col2 ~ col1，ntree = 10）
> 
> randomForest.default(m, y, ...) 中的错误：外部函数调用中的 NA/NaN/Inf (arg 2)

解决方案：让我们确定 df 中的错误值。如上所述 is.finite() 方法检查输入向量是否包含正确的有限值。例如：

> is.finite(c(5,6,1000000,NaN,Inf))
> [1] TRUE TRUE TRUE FALSE FALSE

现在让我们识别数据框中包含错误值的列并计算它们。

> sum(!is.finite(as.vector(df[,names(df) %in% c("col2")])))
> [1] 4
> sum(!is.finite(as.vector(df[,names (df) %in% c("col1")])))
> [1] 0

让我们放弃这些记录，只记录好的记录：

> df1 =df[is.finite(as.vector(df[,names(df) %in% c("col2")])) &
> is.finite(as.vector(df[,names(df) %in% c("col1")])) , ]

并再次运行 randomForest：

> model1 = randomForest(data = df1, col2 ~ col1, ntree = 10)
> 调用：
> randomForest(formula = col2 ~ col1, data = df1, ntree = 10)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-04T06:49:52.140

您是否尝试过对相同数据进行回归？如果没有，则检查数据中的“Inf”值，并在删除 NA 和 NaN 后尝试将其删除。您可以在下面找到有关删除 Inf 的有用信息，

[R 有没有办法找到 Inf/-Inf 值？](https://stackoverflow.com/questions/8689760/r-is-there-a-way-to-find-inf-inf-values)

例子，

```
Class V1    V2  V3  V4  V5  V6  V7  V8  V9
1   11  Inf 4   232 23  2   2   34  0.205567767
1   11  123 4   232 23  1   2   34  0.162357601
1   13  123 4   232 23  1   2   34  -0.002739357
1   13  123 4   232 23  1   2   34  0.186989878
2   67  14  4   232 67  1   2   34  0.109398677
2   67  14  4   232 67  2   2   34  0.18491187
2   67  14  4   232 34  2   2   34  0.098728256
2   44  769.03  4   21  34  2   2   34  0.204405869
2   44  34  4   11  34  1   2   34  0.218426408

# When Classification was performed, following error pops out.
rf_model<-randomForest(as.factor(Class)~.,data=data,importance=TRUE,proximity=TRUE)
Error in randomForest.default(m, y, ...) : 
NA/NaN/Inf in foreign function call (arg 1)

# Regression was performed, following error pops out.
rf_model<-randomForest(Class~.,data=data,importance=TRUE,proximity=TRUE)
Error in randomForest.default(m, y, ...) : 
NA/NaN/Inf in foreign function call (arg 1) 
```

因此，请仔细检查您的数据。另外：警告消息：在 randomForest.default(m, y, ...) 中：响应具有五个或更少的唯一值。您确定要进行回归吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-04T17:48:18.177

只需将所有列转换为因子，就可以避免此错误。即使我面临这个错误。该列，特别是未转换为因子的列。我为此专门写了 as.factor 。最后我的代码工作了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T15:07:16.560

这是因为您的变量之一有超过 32 个级别。级别意味着一个变量的不同值。删除该变量并重试。

# jquery - 优化 Jquery 代码 - 链接不同容器中的选项卡

> ID：14143451
> 
> 赞同：0
> 
> 时间：2013-01-03T16:56:04.670
> 
> 标签：jquery, optimization, css-selectors

我正在开发一个新项目，并且 html 不允许我在同一个容器中拥有选项卡标题和内容。因此，我使用了 Jquery 及其第 n 个子选择器来启用和禁用每个选项卡。[我在 jsfiddle http://jsfiddle.net/QdbdT/1/](http://jsfiddle.net/QdbdT/1/)上整理了一个示例

这是javascript

```
$(".control-bar-nav-wrapper ul li:nth-child(1)").on("click", function() {
    $(this).addClass("active").siblings().removeClass("active");
    $(".slider-wrapper-container > div:nth-child(1)").addClass("active").siblings().removeClass("active");
});
$(".control-bar-nav-wrapper ul li:nth-child(2)").on("click", function() {
    $(this).addClass("active").siblings().removeClass("active");
    $(".slider-wrapper-container > div:nth-child(2)").addClass("active").siblings().removeClass("active");
});
$(".control-bar-nav-wrapper ul li:nth-child(3)").on("click", function() {
    $(this).addClass("active").siblings().removeClass("active");
    $(".slider-wrapper-container > div:nth-child(3)").addClass("active").siblings().removeClass("active");
});
$(".control-bar-nav-wrapper ul li:nth-child(4)").on("click", function() {
    $(this).addClass("active").siblings().removeClass("active");
    $(".slider-wrapper-container > div:nth-child(4)").addClass("active").siblings().removeClass("active");
}); 
```

这确实有效，但我不禁觉得可能有一种更有效的编码方式。我认为也许某种类型的索引会有所帮助，但我无法理解它。如果有人有任何想法，我将不胜感激，欢呼。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T17:01:09.917

您可以在示例中使用[.index()](http://api.jquery.com/index/)和[.eq()](http://api.jquery.com/eq/)来实现相同的效果并组合所有功能

```
$(".control-bar-nav-wrapper ul li").on("click", function() {
    $(this).addClass("active").siblings().removeClass("active");
    $(".slider-wrapper-container > div").eq($(this).index()).addClass("active").siblings().removeClass("active");
}); 
```

[小提琴](http://jsfiddle.net/wirey00/VSvVT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:01:57.197

您可能需要考虑使用 a`data attribute`来允许您在单击的元素和容器元素之间进行映射。虽然，它看起来不是最优雅的，但它确实有助于可读性部门。

**CSS**

```
<li class="applications active" data-display='Applications'>
       <a href="#">Applications</a>
</li>
<li class="communities" data-display='Communities'>
       <a href="#">Communities</a>
</li>
<li class="friends" data-display='Friends'>
       <a href="#">Friends</a>
</li>
<li class="administration" data-display='Administration'>
        <a href="#">Administration</a>
</li> 
```

**jQuery**

```
$('[data-display]').on('click',function()
{
      $('.slider-wrapper').removeClass('active');
      $('#' + $(this).attr('data-display')).addClass('active');                              
});​ 
```

**[例子](http://jsfiddle.net/QdbdT/2/)**

# sql - 从请求 SQL 之日起 10 个工作日内获取交货日期

> ID：14143454
> 
> 赞同：1
> 
> 时间：2013-01-03T16:56:17.850
> 
> 标签：sql, sql-server-2008, tsql, ssms, reporting-services

我创建了一个“假日”表，其中包含 3 列`[Date]`日期格式，`[BusinessDay]`即 Y/N，`[NameofDay] varchar(50)`用于假日或周末。周六、周日、圣诞节都被标记为下一个十年。

我现在需要做的是弄清楚如何通过不计算工作日来确定请求需要完成的日期。我已经阅读了阅读和阅读，但没有看到任何有用的东西。在我的脑海里总是很简单。

我要解决的问题：如果请求是“优先”，则截止日期`[DueDate]`是从请求之日起 10 个工作日，`[TransactionDate]`如果是“关键”，则截止日期是 5 个工作日。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T17:04:35.777

由于@Andomar 提出的问题的递归性质，我建议一个替代答案（它也恰好更简单，但需要可用的窗口函数）。这样做是加入日历中晚于 的有效工作日`TransactionDate`，然后根据`id`需要为每个请求找到第 5 行或第 10 行：

```
;WITH cte AS
(
   SELECT *,
         ROW_NUMBER() OVER (PARTITION BY id ORDER BY validDeliveryDate ASC) AS rn
   FROM (
       SELECT requests.*, holiday.Date as validDeliveryDate
       FROM requests
       JOIN holiday
         ON requests.TransactionDate < holiday.Date
         AND DATEADD(day, 25, requests.TransactionDate) >= holiday.Date
         AND holiday.BusinessDay = 'Y' ) v
)
SELECT *
FROM cte
WHERE rn = CASE WHEN critical = 1 THEN 5 ELSE 10 END 
```

不需要迭代 - 在[这里工作 sqlfiddle](http://sqlfiddle.com/#!6/98068/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T17:24:09.717

计算工作日需要迭代。您添加天数，然后减去非工作日，然后再次添加。

一种方法是使用用户定义的函数：

```
if exists (select * from sys.objects where name ='WorkingDaysFrom' and type = 'FN')
    drop function dbo.WorkingDaysFrom
go
create function dbo.WorkingDaysFrom(
        @date date
,       @days int)
returns date
as
begin
        declare @result date = @date
        declare @remaining int = @days
        while @remaining > 0
                begin
                set     @result = dateadd(day, @remaining, @result)
                select  @remaining = count(*) 
                from    dbo.Holiday 
                where   [Date] between dateadd(day, 1-@remaining, @result) and @result
                        and BusinessDay = 'N'
                end
        return @result
end
go 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!6/c7f10/1/0) 这打印：

```
TransactionDate   Priority    DueDate
2013-01-01        Priority    2013-01-16
2013-01-01        Critical    2013-01-09
2013-01-03        Priority    2013-01-17
2013-01-03        Critical    2013-01-10
2013-01-06        Priority    2013-01-18
2013-01-06        Critical    2013-01-11 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T17:21:34.163

我认为以下工作：

```
select t.*
from (select t.*,
             row_number() over (partition by r.requestid, IsWorkDay order by seqdate) as WorkDayNum
      from (select r.requestid, r.TransactionDate,
                   (case when critical = 1 then 5 else 10 end) as DaysToRespond,
                   dateadd(day, days.seqnum - 1, r.TransactionDate) as seqdate,
                   (case when h.date is null then 1 else 0 end) as IsWorkDay
            from requests r cross join
                 (select top 20 ROW_NUMBER() over (order by (select NULL)) as seqnum
                  from information_schema.columns
                 ) days left outer join
                 holidays h
                 on dateadd(day, days.seqnum - 1, r.TransactionDate) = h.date
           ) t
     ) t
where WorkDayNum = DaysToRespond and IsWorkDay = 1 
```

这是未经测试的，但这是这个想法。

好吧，我已经对此进行了测试，在这种情况下它似乎返回了正确的结果：

```
with holidays as (
        select CAST('2012-01-01' as date) as date union all
        select CAST('2012-01-05' as date) as date union all
        select CAST('2012-01-06' as date) as date union all
        select CAST('2012-01-12' as date) as date union all
        select CAST('2012-01-13' as date) as date union all
        select CAST('2012-01-19' as date) as date union all
        select CAST('2012-01-20' as date) as date
       ),
      requests as (
        select 1 as requestId, CAST('2012-01-02' as DATE) as TransactionDate, 1 as Critical
      )

select t.*
from (select t.*,
             row_number() over (partition by t.requestid, IsWorkDay order by seqdate) as WorkDayNum
      from (select r.requestid, r.TransactionDate,
                   (case when critical = 1 then 5 else 10 end) as DaysToRespond,
                   dateadd(day, days.seqnum - 1, r.TransactionDate) as seqdate,
                   (case when h.date is null then 1 else 0 end) as IsWorkDay
            from requests r cross join
                 (select top 20 ROW_NUMBER() over (order by (select NULL)) as seqnum
                  from INFORMATION_SCHEMA.columns
                 ) days left outer join
                 holidays h
                 on dateadd(day, days.seqnum - 1, r.TransactionDate) = h.date
           ) t
     ) t
where WorkDayNum = DaysToRespond+1 and IsWorkDay = 1 
```

此查询创建交易日期后 20 天的序列（20 天够吗？）。然后它计算这些天的日期并将日期与假期表进行比较。

计算天数是使用`row_number()`按请求和工作日与非工作日进行分区。要选择的行是工作日和交易日期之后的天数。

# c - 如何理解子集和问题

> ID：14143457
> 
> 赞同：0
> 
> 时间：2013-01-03T16:56:23.783
> 
> 标签：c, algorithm, subset-sum

我正在学习子集和问题，我想在这里问一些问题

(1)[子集和算法](https://stackoverflow.com/questions/4355955/subset-sum-algorithm)

刚才看了这个链接的C代码，不知道为什么作者可以定义？

```
S[i,0]=true ,S[0,j]=false 
```

`S[i,0]`意味着`subset[1,...i]`总和`0`，为什么它可以分配给`true`.？如果想打印子集的内容，我该如何修改这个算法？因为好像禁止与作者私聊，所以不得不贴出来。

（2）如果数组中有负数，我试图测试它不适合。如何定义和的初始`S[i,0]`值`S[0,j]`？

谁能帮我澄清一下？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:06:05.037

**建议的基本子句有问题**，因为有了它，您也可以将`s[n,0]`其作为初始值。

子集和的递归公式的更好的停止子句是`s[i,xi] = true`。这个想法很简单，集合`{x1,x2,...,xi}`包含一个总和为`xi`的子集 - 它是子集`{xi}`。递归将稍后处理其余部分，如果有一个子集总和为 0，它将找到它。

根据这种方法，基本条款是：

```
s[i,xi] = true (for each i)
s[0,j] = false (for each j) 
```

递归公式为：

```
s[i,j] = s[i-1,j] OR s[i-1,j-xi] 
```

* * *

**要获取子集中实际存在的元素**，您需要遵循使用动态规划构建的矩阵。“遵循”矩阵所做的选择，并坚持一条产生真值的路径，直到找到“停止子句”（s == xi）

它可以递归地描述为：

```
getSubset(i,s):
   if s[i-1,s]: //there is a solution without choosing xi
       return getSubset(i-1, s)
   if (xi == s): //true base clause
        l <- new list
        l.append(xi)
        return l
   if s[i -1, s-xi]: //there is a solution when choosing xi
        l <- getSubset(i-1,s-xi)
        l.append(xi)
        return l 
```

它很相似（确保你理解为什么）：[如何使用背包算法[而不仅仅是包的价值]找到包中的哪些元素？](https://stackoverflow.com/q/7489398/572670)

# php - mysql 创建表 - PHP

> ID：14143459
> 
> 赞同：0
> 
> 时间：2013-01-03T16:56:40.520
> 
> 标签：php, mysqli, create-table

让它工作的问题：

我把这个查询字符串（作为一个变量）：

```
"query" => 
            "CREATE TABLE 
                users(
                    id INT NOT NULL AUTO_INCREMENT  PRIMARY KEY,
                    date_created DATETIME,     
                    last_active DATETIME,
                    last_logged_in DATETIME,
                    first_name VARCHAR(255),
                    last_name VARCHAR(255),
                    email VARCHAR(255), 
                    password VARCHAR(255),  
                    permissions INT,  
                    status SMALLINT
                )" 
```

进入这个循环：

```
foreach( $queryStrings as $queryString )
{  
    $query = Database::Query( $queryString[ "query" ] );
    if( $query )
    {
        echo "Database table " . $queryString[ "name" ] . " successfully created<br />"; 
    }
    else
    {     
        echo "Database table " . $queryString[ "name" ] . " failed to create<br />"; 
    }
} 
```

数据库：查询在这里：

```
 public static function Query( $query )
    {
        $query = self::$mysqli->real_escape_string( trim( $query ) );  

        if ( $query = self::$mysqli->prepare($query) ) 
        {
            $query->execute();   

            $DatabaseQuery = new DatabaseQuery();
                $DatabaseQuery->result = $query->get_result();       
                $DatabaseQuery->mysql_num_rows = $query->num_rows();                 
                $query->close();
                return $DatabaseQuery;                   
        }          

        echo false;
    } 
```

它无法通过：

```
if ( $query = self::$mysqli->prepare($query) ) 
```

它正在准备的字符串在这里：

```
CREATE TABLE \r\n users(\r\n id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,\r\n date_created DATETIME, \r\n last_active DATETIME,\r\n last_logged_in DATETIME,\r\n first_name VARCHAR(255),\r\n last_name VARCHAR(255),\r\n email VARCHAR(255), \r\n password VARCHAR(255), \r\n permissions INT, \r\n status SMALLINT\r\n ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:04:52.937

您应该使用从查询字符串中删除`\r`and`\n`[`str_replace`](http://php.net/manual/en/function.str-replace.php)

```
 $string = str_replace(array("\n", "\r"), '', $string); 
```

或者你也可以这样做[`preg_replace`](http://php.net/manual/en/function.preg-replace.php)：

```
$string = preg_replace('/[\r\n]/', '', $string); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T07:50:41.200

当然，删除换行符是一个错误的答案。

`$query = self::$mysqli->real_escape_string( trim( $query ) );`应该删除它的整行，因为它通常不应该用于整个查询，并且对于像这样的准备好的查询实际上没有用。

# iphone - Xib 自定义 UIView 的实例化

> ID：14143461
> 
> 赞同：0
> 
> 时间：2013-01-03T16:56:42.357
> 
> 标签：iphone, objective-c, xcode

**用例：**

1.  Xib 是用一个简单的 UIView 定义的
2.  创建了一个自定义视图类（从 UIView 继承）
3.  为了更改用于定义 @ [1] 的视图的类，我将 XiB 视图标识从 UIView 更改为 ~MyCustomView~

**问题：**
我期待'MyCustomView::initWithFrame'会被调用，显然，它没有！

如何在加载“XiB”时实例化自定义类？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:01:53.967

您应该覆盖`initWithCoder:`初始化以及`awakeFromNib`视图连接所有出口和操作的时间。

# php - 如何使用 Linux 命令或 PHP 编辑现有的视频 FLV？

> ID：14143463
> 
> 赞同：0
> 
> 时间：2013-01-03T16:56:46.807
> 
> 标签：php, javascript, css, flv, jwplayer

我正在尝试在 flv 中编辑视频，我在给定时间在视频中添加背景图像和文本，并在视频中给出特定位置。

例如：图像必须在视频的第 10 秒到第 20 秒的视频的右上角。文字需要从第 5 秒到第 9 秒进入视频底部。

然后将编辑好的视频保存在服务器上。

linux中是否有可以为命令行执行此操作的程序？o 有没有专门的 php 库可以做到这一点？

我真的需要知道这一点。使用 ffmpeg 但没有帮助我想要的东西。

注意：我使用 JW Player 在 flv 中重现视频。

* * *

**更新：**

我使用 JW Player 自定义视频。但仅在用户播放视频时自定义，并且仅在这一刻。

但是，当我想捕捉“编辑”的视频以生成 flv 格式的新视频时，JW Player 不会让我这样做。

这是我的 HTML 代码：

```
<div id="image-user" style="z-index: 1; display: none"><img src="<?php echo base_url() ?>images/imagen.png" alt="imagen_usuario"></img></div>

<div id="txt-user" style="z-index: 1; display: none">TEXT USER</div> 
```

这是我的 Javascript：

```
<script type='text/javascript'>
    jwplayer('container').setup({
        flashplayer: "<?php echo base_url(); ?>jwplayer/jwplayer.flash.swf",
        file: "<?php echo base_url(); ?>jwplayer/mario.flv",
        height: 261,
        width: 308,
        events: {
            onTime: function(event){
                if(event.position > 5 && event.position < 10){
                    $('div#image-user').css('display','block');
                    $('div#txt-user').css('display','block');
                }else{
                    $('div#image-user').css('display','none');
                    $('div#txt-user').css('display','none');
                }
            }
        }
    });
</script> 
```

我的目标是分享这个在 facebook 上发布的视频。¿ 我可以在 facebook 墙上分享这个播放器的所有配置吗？

# excel - Excel 互操作或 VSTO：为范围设置背景图像？

> ID：14143465
> 
> 赞同：1
> 
> 时间：2013-01-03T16:56:58.630
> 
> 标签：excel, interop, vsto

我找不到如何在范围内设置背景（不在工作表内，这很容易）......

身边有魔法师吗？

让-玛丽

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:20:49.173

Excel 中不存在此功能。有几种解决方法，尽管它们都不会完全满足您的要求。

1.  将图像插入工作表，然后在图像上方插入与网格中的单元格具有相同宽度/高度的文本框，以使用图片作为背景图像“模拟”。这*与*将图片“插入范围”不同，因为您将失去处理这些伪单元格的能力。但是，您可以以编程方式创建此类文本框的二维数组，并使用数组索引引用它们。

2.  插入图片作为工作表背景，并用纯色背景覆盖您希望图片可见的范围之外的所有单元格。Excel 会自动在整个工作表上自动平铺背景。因此，有几种方法可以让 Excel 仅在您想要的范围内显示图像。此选项的缺点是您只能将单个图像放置在每个工作表的单个位置。

    *   如果目标范围位于工作表的左上角，您可以轻松地在从图像的右边缘和下边缘开始的所有单元格上使用实心填充。
    *   如果目标范围在工作表的其他位置，请确定距工作表左上角的确切偏移量。在图像编辑工具中，扩大图像的大小，使图像的宽度和高度正好等于这个偏移量。将实际图像放置在此较大图像的左上角，并将放大的“框架”留空。当您在 Excel 中将修改后的图像设置为工作表背景时，它会将实际图像放置在您想要显示它的位置。然后，您可以通过将工作表其余部分的单元格背景设置为纯色来隐藏图像的所有复制。

同样，这些选项都不能准确回答您的问题，但由于 Excel 不支持您正在寻找的功能，这可能与您所能获得的一样接近。

# php - 即使查询相同，PHP 返回的结果也比 phpmyadmin 少

> ID：14143467
> 
> 赞同：2
> 
> 时间：2013-01-03T16:57:09.253
> 
> 标签：php, mysql, phpmyadmin

当我在 phpmyadmin 中运行以下查询时，我得到了 18 个结果——所有这些结果都是正确的，并且是我正在寻找的。但是，当我将查询复制并粘贴到一个 php 文件并运行该页面时，我得到了 17 个结果。

```
SELECT 
    ta.jobTaskID, 
    jt.customTaskTitle, jt.taskID, jt.status, 
    d.dealershipName, 
    j.jobNumber, j.jobID, j.title, j.jobSpec,
    wt.taskName, 
    po.dueToProduction
FROM taskassignments ta 
INNER JOIN jobTasks jt ON ta.jobTaskID = jt.jobTaskID
INNER JOIN jobs j ON jt.jobID = j.jobID
INNER JOIN dealerships d ON j.dealershipID = d.dealershipID
LEFT JOIN workflowtasks wt ON jt.taskID = wt.taskID
LEFT JOIN purchaseorders po ON j.jobID = po.jobID
WHERE ta.userID = 1 AND jt.status != 'Completed'; 
```

编辑：[这是我的 phpmyadmin 结果](http://i.stack.imgur.com/twz2W.jpg)的快照 ，[这是我的 var_dump 的快照](http://i.stack.imgur.com/Pn0GN.jpg)。

这是我的 PHP 代码（我使用我创建的数据库类）

```
$myTasks = $connection->runQuery("
SELECT 
    ta.jobTaskID, 
    jt.customTaskTitle, jt.taskID, jt.status, 
    d.dealershipName, 
    j.jobNumber, j.jobID, j.title, j.jobSpec,
    wt.taskName, 
    po.dueToProduction
FROM taskassignments ta 
INNER JOIN jobTasks jt ON ta.jobTaskID = jt.jobTaskID
INNER JOIN jobs j ON jt.jobID = j.jobID
INNER JOIN dealerships d ON j.dealershipID = d.dealershipID
LEFT JOIN workflowtasks wt ON jt.taskID = wt.taskID
LEFT JOIN purchaseorders po ON j.jobID = po.jobID
WHERE ta.userID = " . $userID . " AND jt.status != 'Completed'"); 
```

最后，这是连接类用来运行查询的代码：

```
// runs the user defined query
public function runQuery($runMe)
{
    $outArray = array();
    if ($this->checkConnection()) // if the connection is a resource
    {
        $returned = mysql_query($runMe, $this->dbConnection);
        if ($returned === false) // if there was an error during sql execution
        {
            echo "SQL Query error: " . mysql_error();
        }

        if ($returned === true) // if a update, insert, delete, etc... command was run
            return true;
        if (is_resource($returned)) 
        {
            $outArray = array(); // returned array with query results
            for ($i = 0; $i < mysql_num_rows($returned); $i++)
            {
                $outArray[] = mysql_fetch_assoc($returned);
            }
        }
        if (count($outArray) < 1)
            return null;
        else
            return $outArray;
    }
        else
            echo "Your Database Connection Was Unable To Be Authenticated.";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:57:54.983

`mysql_num_rows()` *更好的解决方案是根本*不使用，而只是不断`mysql_fetch_assoc()`重复调用，直到它停止返回结果：

```
$outArray = array();
while ( $row = mysql_fetch_assoc($returned) ) {
    $outArray[] = $row;
} 
```

（Ps。您知道，您的代码使用的[原始 PHP mysql API](http://php.net/manual/en/intro.mysql.php)自 PHP 5.5.0 起已弃用，并将在未来的某个版本中删除。您确实应该[使用受支持的 API 之一](http://php.net/manual/en/mysqlinfo.api.choosing.php)，要么是[mysqli](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/ref.pdo-mysql.php)。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:25:09.477

您的最后一行被跳过，因为您只检查是否`$i`小于 `mysql_num_rows($returned)`。您应该在哪里检查它是否小于或等于。

因此，您将需要更改以下行：

```
for ($i = 0; $i < mysql_num_rows($returned); $i++) 
```

至

```
for ($i = 0; $i <= mysql_num_rows($returned); $i++) 
```

然后您将按照您的预期将所有数据返回到您的 PHP 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T17:12:39.567

尝试替换此行：

```
 for ($i = 0; $i < mysql_num_rows($returned); $i++) 
```

和：

```
 for ($i = 0; $i < mysql_num_rows($returned) + 1; $i++) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-03T05:13:11.537

尝试通过在循环后调用 unset 函数来清除循环内使用的所有数组以清除所有数组，例如

```
while(){
//your code
}
unset(array); 
```

这将解决您的问题，因为它解决了我的问题。

# c# - 将变量值分配给要传递给存储库方法的 lambda 表达式

> ID：14143468
> 
> 赞同：1
> 
> 时间：2013-01-03T16:57:13.463
> 
> 标签：c#, linq, entity-framework, lambda

首先，作为问题的一般概述，我正在编写一个 MVC Web 应用程序，它需要根据几个不同的业务逻辑规则查询我的存储库。用户将首先在网页中输入文本，该文本将在我的业务层中进行解析，并将适当的 where 子句查询发送到存储库。

因此，以我的代码为例：

```
public Document GetDocuments(string txtFilter)
{
    string [] filterVals = // do some business logic here to parse txtFilter into the filterValsArray

    // filterQuery will utlimately contain the where clause for the repository
    Expression<Func<DocumentListViewModel, bool>> filterQuery = null;

    // case 1, when filterVals has only 1 value:
    if (filterVals[0].Length == 1)
    {
        filterQuery = x => x.SomeField == filterVals[0];
    }
    else // assign filterQuery to another set of expressions

    // repository call
    return _unitOfWork.DocumentRepository.Get(filterQuery);
} 
```

当我运行它时，我得到一个运行时异常“无法调用非委托类型”。我相信正在发生的事情（如果我错了，当然纠正我），是在存储库中枚举了实际的表达式，此时 filterVals 不再在范围内。那么...有没有办法将这些值放入我的 where 子句表达式中？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:14:58.220

尝试改变

```
 Expression<Func<DocumentListViewModel, bool>> filterQuery = null; 
```

到

```
 Func<DocumentListViewModel, bool> filterQuery = null; 
```

看看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:11:22.990

我假设您正在编译文档存储库中的表达式？如果不是，您需要在参数上调用 Compile()

# backbone.js - 仅在 Firefox 中的 Backbone 应用程序中的事件后获取“this.model is undefined”

> ID：14143469
> 
> 赞同：1
> 
> 时间：2013-01-03T16:57:16.293
> 
> 标签：backbone.js, requirejs, backbone-views, backbone-routing

我试图了解 Backbone 和它的概念。我制作了一个简单的应用程序，以便我可以学习如何更多地了解 Backbone.Router 以及如何将 Backbone 与 Require.js 集成。

该应用程序在 Chrome、IE9 和 Safari 中运行良好，但在最新版本的 Firefox 中，它在触发和消耗点击事件后抛出“TypeError：this.model is undefined”错误。非常感谢您的帮助！

为方便起见，我在下面附上了整个应用程序的链接。

[https://dl.dropbox.com/u/19138757/Backbone_Example.zip](https://dl.dropbox.com/u/19138757/Backbone_Example.zip)

我将评论发生错误的方法：

文档.js

```
 define([
        'jquery',
        'underscore',
        'backbone',
        'app'
    ], function ($, _, Backbone, app) {

        var DocumentListView = Backbone.View.extend({
            tagName: 'li',

            events: {
                'click': function () {
                    app.aggregator.trigger('document:selected', this.model);
                }
            },

            render: function () {
                this.$el.html(this.model.get('title'));
                return this;
            }
        });

        return DocumentListView;

    }); 
```

文档.js

```
 define([
        'jquery',
        'underscore',
        'backbone',
        'data/documents',
        'app',
        'text!templates/documents.html'
    ], function ($, _, Backbone, documents, app, documentTemplate) {

        app.aggregator.on('document:selected', function (document) {

            var urlPath = 'view/' + document.get('title');

            app.router.navigate(urlPath, { trigger: true });

        });

        DocumentView = Backbone.View.extend({
            el: $('#my-container'),

            template: _.template(documentTemplate),   

            events: {
                'click h1': 'sayHello'
            },

            // This is the method where the error is occuring. 
            // this.model is undefined...but ONLY in Firefox
            render: function () {
                this.$el.empty().append(this.template(this.model.toJSON()));
                return this;
            },

            sayHello: function () {
                this.input = this.$('.message');
                alert(this.input.val());
            }

        });

        return DocumentView;

    }); 
```

路由器.js

```
 define([
        'jquery',
        'underscore',
        'backbone',
        'data/documents',
        'views/contents',
        'views/document'

    ], function( $, _, Backbone, documents, ContentsView, DocumentView ){

        var DocumentRouter = Backbone.Router.extend({
            routes: {
                'contents': 'contents',
                'view/:title': 'viewDocument'
            },

            contents: function(){
                $('body').html(new ContentsView({collection: documents}).render().el);
            },

            viewDocument: function(title){

                //get a single document instance by title and then pass into DocumentView
                var selectedDocument = _(documents).find(function(document){
                    return document.get('title') === title;
                });

                $('body').empty().append(new DocumentView({model: selectedDocument}).render().el);
            }
        });

        return DocumentRouter;

    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:46:27.377

您的问题与不同浏览器如何处理 URL 中的空格有关。`viewDocument`将router.js 中的函数更改为以下内容：

```
 viewDocument: function(title){
        // ADD THIS LINE
        title = decodeURIComponent(title);

        //get a single document instance by title and then pass into DocumentView
        var selectedDocument = _(documents).find(function(document){
            return document.get('title') === title;
        });

        $('body').empty().append(new DocumentView({model: selectedDocument}).render().el);
    } 
```

# php - 在方法中回显不起作用

> ID：14143472
> 
> 赞同：1
> 
> 时间：2013-01-03T16:57:27.473
> 
> 标签：php, echo

我使用[http://www.webformgenerator.eu/](http://www.webformgenerator.eu/)生成表单并将代码下载到我现有的项目中。

现在，在我按下提交按钮后，屏幕没有任何反应。我调试并看到提交正在工作，并且它在我编程时插入到数据库表中。

如果数据库插入成功，我想显示一条成功的消息。所以我只是做了一个回声“成功”。但它没有显示在任何地方。

有什么问题？

代码片段在这里。

```
ini_set('display_errors', 1); error_reporting(E_ALL);

<?php
/**
 * Created with WebFormGenerator.eu
 * Powered by www.easyclick.ch
 */

$form = new ProcessForm();
$form->field_rules = array(
'house_id'=>'required',
'manethana_head'=>'required',
'sadasya_id'=>'required',
'relation_id'=>'required',
'name'=>'required',
'dob'=>'required',
'location_id'=>'required',
'marriage_id'=>'required',
'udyoga_id'=>'required',
'mobile'=>'',
'email'=>'email'
);
$form->validate();

class ProcessForm
{
public $field_rules;
public $error_messages;
public $fields;
private $error_list;
private $is_xhr;

function __construct()
{
    $this->error_messages = array(
        'required' => 'This field is required',
        'email' => 'Please enter a valid email address',
        'number' => 'Please enter a numeric value',
        'url' => 'Please enter a valid URL',
        'pattern' => 'Please correct this value',
        'min' => 'Please enter a value larger than the minimum value',
        'max' => 'Please enter a value smaller than the maximum value'
    );

    $this->field_rules = array();
    $this->error_list = '';
    $this->fields = $_POST;
    $this->is_xhr = $this->xhr();
}

function validate()
{
    if (!empty($this->fields))
    {
        //Validate each of the fields
        foreach ($this->field_rules as $field => $rules)
        {
            $rules = explode('|', $rules);

            foreach ($rules as $rule)
            {
                $result = null;

                if (isset($this->fields[$field]))
                {
                    $param = false;

                    if (preg_match("/(.*?)\[(.*?)\]/", $rule, $match))
                    {
                        $rule = $match[1];
                        $param = $match[2];
                    }

                    $this->fields[$field] = $this->clean($this->fields[$field]);

                    //if the field is a checkbox group create string
                    if (is_array($this->fields[$field]))
                        $this->fields[$field] = implode(', ', $this->fields[$field]);

                    // Call the function that corresponds to the rule
                    if (!empty($rule))
                        $result = $this->$rule($this->fields[$field], $param);

                    // Handle errors
                    if ($result === false)
                        $this->set_error($field, $rule);
                }
            }
        }

        if (empty($this->error_list))
        {
         //   if ($this->is_xhr)
           //     echo json_encode(array('status' => 'success'));

            $this->process();

            echo "Success";
        }
        else
        {
            if ($this->is_xhr)
                echo json_encode(array('status' => 'invalid', 'errors' => $this->error_list));
            else echo $this->error_list;
        }
    }
}

function process()
{
     /**
     * SUCCESS!!
     * There were no errors in the form. Insert your processing logic here (i.e. send an email, save to a
     * database etc.
     *
     * All of the submitted fields are available in the $this->fields variable.
     *
     * Example code to mail the results of the form:
     *
     * IMPORTANT - PLEASE READ:
     * 1\. YOU MUST UNCOMMENT THE CODE FOR IT TO WORK.
     *    - This means removing the '//' in front of each line.
     *    - If you do not know what php comments are see here: http://php.net/manual/en/language.basic-syntax.comments.php
     *
     * 2\. YOU CAN ENTER ANY EMAIL ADDRESS IN THE $from VARIABLE.
     *    - This is the address that will show in the From column in your mail application.
     *    - If your form contains an email field, and you want to use that value as the $from variable, you can set $from = $this->fields['name of your email field'];
     *    - As stated in the description on codecanyon, this code does not mail attachments. Google 'php html email attachments' for information on how to do this
     */
     // $msg = "Form Contents: \n\n";
     // foreach($this->fields as $key => $field)
     //       $msg .= "$key :  $field \n";
     // $to = 'emailaddress@domain.com';
     // $subject = 'Form Submission';
     // $from = 'emailaddress@domain.com';
     // mail($to, $subject, $msg, "From: $from\r\nReply-To: $from\r\nReturn-Path: $from\r\n");

    foreach($this->fields as $key => $field)
    {
        if ($key == 'house_id')
            $mane_id = $field; 
        elseif ($key == 'relation_id')
            $relation_id = $field; 
        elseif ($key == 'name')
            $name = $field; 
        elseif ($key == 'dob')
            $dob = $field;
        elseif ($key == 'blood_id')
            $blood_id = $field; 
        elseif ($key == 'mantra_id')
            $mantra_id = $field; 
        elseif ($key == 'location_id')
            $location_id = $field; 
        elseif ($key == 'marriage_id')
            $marriage_id = $field; 
        elseif ($key == 'udyoga_id')
            $udyoga_id = $field; 
        elseif ($key == 'mobile')
            $mobile = $field;
        elseif ($key == 'email')
            $email = $field;        
    }

    //Begin date, End date, Last changed by
    $enddate = '39991231';
    $begdate = date("Ymd");
    $last_changed_by = $_SESSION['user'];               

    // Get internal number for house
    $max_hse_int_sql = mysql_query("SELECT mane_id FROM kd_mane WHERE mane_id_external = $mane_id LIMIT 1") or die(mysql_error());
    $row_int_hse = mysql_fetch_row($max_hse_int_sql);
    $mane_id_internal = $row_int[0];
    $mane_id_internal = 00000;

    // Get the next available internal number
    $max_int_sql = mysql_query("SELECT MAX(sadasya_id) FROM kd_sadasya") or die(mysql_error());
    $row_int = mysql_fetch_row($max_int_sql);
    $sadasya_id = $row_int[0]+1;

    // Get the next available external number
    $max_sql = mysql_query("SELECT MAX(sadasya_id_external) FROM kd_sadasya WHERE mane_id_external = $mane_id") or die(mysql_error());
    $row = mysql_fetch_row($max_sql);
    if ($row[0]>0)
    {
        $sadasya_id_external = $row[0]+1;
    }
    else //first member in the house
    {
        $sadasya_id_external = $mane_id*100+1; //If mane id is 123405, first house in it will be 12340501
    }       

    // Linga_id from relationship
    $male_relationship_array = array(11, 13, 16, 18, 21, 23, 24, 26); //all males
    if (in_array($relation_id, $male_relationship_array))  
        $linga_id = '11';
    else
        $linga_id = '12';

    $query_string = "INSERT INTO `kd_sadasya` 
    (mane_id, sadasya_id, begin_date, end_date, mane_id_external, sadasya_id_external, 
    sambandha_id, sadasya_name, dob, rakta_id, vasa_id, linga_id, vivaha_id, 
    udyoga_id, mantra_id, dooravani, emailid, last_changed_by)
    VALUES
    ('$mane_id_internal', '$sadasya_id', '$begdate', '$enddate', '$mane_id', '$sadasya_id_external', 
    '$relation_id', '$name', '$dob', '$blood_id', '$location_id', '$linga_id', '$marriage_id',
    '$udyoga_id', '$mantra_id', '$mobile', '$email', '$last_changed_by')";

    mysql_query($query_string);

    $error = mysql_error();

    echo("Success");

} 

function set_error($field, $rule)
{
    if ($this->is_xhr)
    {
        $this->error_list[$field] = $this->error_messages[$rule];
    }
    else $this->error_list .= "<div class='error'>$field: " . $this->error_messages[$rule] . "</div>";
}

function xhr()
{
    return (!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') ? true : false;
}

/** Validation Functions */
function required($str, $val = false)
{

    if (!is_array($str))
    {
        $str = trim($str);
        return ($str == '') ? false : true;
    }
    else
    {
        return (!empty($str));
    }
}

function email($str)
{
    return (!preg_match("/^(?!(?:(?:\\x22?\\x5C[\\x00-\\x7E]\\x22?)|(?:\\x22?[^\\x5C\\x22]\\x22?)){255,})(?!(?:(?:\\x22?\\x5C[\\x00-\\x7E]\\x22?)|(?:\\x22?[^\\x5C\\x22]\\x22?)){65,}@)(?:(?:[\\x21\\x23-\\x27\\x2A\\x2B\\x2D\\x2F-\\x39\\x3D\\x3F\\x5E-\\x7E]+)|(?:\\x22(?:[\\x01-\\x08\\x0B\\x0C\\x0E-\\x1F\\x21\\x23-\\x5B\\x5D-\\x7F]|(?:\\x5C[\\x00-\\x7F]))*\\x22))(?:\\.(?:(?:[\\x21\\x23-\\x27\\x2A\\x2B\\x2D\\x2F-\\x39\\x3D\\x3F\\x5E-\\x7E]+)|(?:\\x22(?:[\\x01-\\x08\\x0B\\x0C\\x0E-\\x1F\\x21\\x23-\\x5B\\x5D-\\x7F]|(?:\\x5C[\\x00-\\x7F]))*\\x22)))*@(?:(?:(?!.*[^.]{64,})(?:(?:(?:xn--)?[a-z0-9]+(?:-[a-z0-9]+)*\\.){1,126}){1,}(?:(?:[a-z][a-z0-9]*)|(?:(?:xn--)[a-z0-9]+))(?:-[a-z0-9]+)*)|(?:\\[(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){7})|(?:(?!(?:.*[a-f0-9][:\\]]){7,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?)))|(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){5}:)|(?:(?!(?:.*[a-f0-9]:){5,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3}:)?)))?(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))(?:\\.(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))){3}))\\]))$/iD", $str)) ? false : true;
}

function number($str)
{
    return (!is_numeric($str)) ? false : true;
}

function min($str, $val)
{
    return ($str >= $val) ? true : false;
}

function max($str, $val)
{
    return ($str <= $val) ? true : false;
}

function pattern($str, $pattern)
{
    return (!preg_match($pattern, $str)) ? false : true;
}

function clean($str)
{
    $str = is_array($str) ? array_map(array("ProcessForm", 'clean'), $str) : str_replace('\\', '\\\\', strip_tags(trim(htmlspecialchars((get_magic_quotes_gpc() ? stripslashes($str) : $str), ENT_QUOTES))));
    return $str;
    }
}

?> 
```

编辑：我在下面评论并开始工作。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script> 
```

这似乎是一个标准脚本。会不会有错误？我的控制台说

> 未捕获的无效 JSON：

在上面的js文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:01:38.073

正如您所提到的，数据正在按预期很好地插入到数据库中，那么很可能

```
$this->process(); 
```

正在停止进一步执行，可能有任何 die 命令在那里或返回。只是为了调试把你的

```
 echo "Success"; 
```

以上

```
$this->process(); 
```

**编辑：**

我注意到在您的**else**部分中，您回显了一个 JSON 编码的字符串。也许您的内容类型设置为那样，这就是您没有看到**Success**的原因。尝试在 json 中编码您的成功消息，就像您在评论中的行中一样

# import - Feed 导入器映射

> ID：14143473
> 
> 赞同：0
> 
> 时间：2013-01-03T16:57:31.687
> 
> 标签：import, rss, drupal-7

这是我的问题：

我正在使用“提要”模块从不同的 RSS 提要中导入数据。其中一个提要是[http://www.happynews.com/rss/.aspx](http://www.happynews.com/rss/.aspx) - 如您所见，其中一个元素是每篇文章的“链接”。

如何将该链接映射到我的内容类型？（注意这不是提要的链接）

我已经更新了我的内容类型“Feed item”，向其中添加了一个名为“Article link”的新文本字段，将其附加到导入器项目，并且绝对可以在“target”选项中看到新字段，但是，似乎在“来源”选项中没有链接字段。

![在此处输入图像描述](../Images/b5113043274d4ba70730ad850840f49c.png)

有没有办法添加“源”选项以将它们映射到我们的目标？

非常感谢您的帮助！对此，我真的非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T11:35:38.827

我发现这篇文章可能有助于解决上述问题：

[http://www.zivtech.com/blog/feed-feeds-importing-referenced-rss-data#comment-1378](http://www.zivtech.com/blog/feed-feeds-importing-referenced-rss-data#comment-1378)

# linux - 在 Linux 上枚举 IPv6 地址时 SIOCGIFCONF 和 NETLINK 协议结果的区别

> ID：14143479
> 
> 赞同：1
> 
> 时间：2013-01-03T16:57:59.463
> 
> 标签：linux, ip, ipv6, ioctl

'ifconfig' 依赖于 SIOCGIFCONF 来枚举 Linux 机器上的 IP 地址，但它似乎返回的 IPv6 地址集与依赖于 NETLINK 协议的 'ip addr show' 的输出不同。

自 2001 年以来，'ifconfig' 的开发似乎已被冻结，而 NETLINK 似乎是 Linux 上通用 IP 地址管理的新协议。

问题是：与 NETLINK 协议相比，Linux 内核是否有任何差异会导致 SIOCGIFCONF ioctl 针对 IPv6 地址返回不同的结果？

# bash - 将 bash 返回值放入星号拨号计划

> ID：14143481
> 
> 赞同：3
> 
> 时间：2013-01-03T16:58:02.630
> 
> 标签：bash, shell, asterisk

我是新手`asterisk`，需要帮助。我有一个 bash 脚本，我需要从我的拨号计划中运行它并获取从它返回的值并将其放入我的拨号计划中的一个变量中。

例如我的 bash 脚本是`test.sh`：

```
#! /bin/bash

echo "61" 
```

我的拨号方案：

```
exten => 3333,1,Set(result=${shell(/root/test.sh)}) 
exten => 3333,2,Verbose(result is: ${result}) 
```

该脚本具有 777 权限，当我从 shell 命令行手动运行它时，它正在工作。我想从拨号计划运行它并在变量中使用返回的值，我什么也没得到（没有返回值）

我的星号版本是 Asterisk 1.6.2.20

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T01:54:19.383

您的拨号计划不起作用，因为星号在星号用户下运行并且无法读取根目录中的脚本。要解决脚本问题，我建议停止星号并在控制台中启动它

```
asterisk -vvvgc 
```

这样您将看到脚本生成的错误。

**但**

由于 shell 启动和 agi 脚本启动之间的 cpu 成本没有任何差异，我建议您使用 AGI 脚本。

为此，您已将脚本放入 /var/lib/asterisk/agi-bin/

```
#!/bin/bash

echo 'SET VARIABLE result "61" ' 
```

拨号方案将

```
exten => 3333,1,AGI(test.sh) 
exten => 3333,2,Verbose(result is: ${result}) 
```

ps 最佳实践是根本不使用脚本，因为启动 shell 是高 cpu 成本操作，它不会很好地扩展。大多数任务都可以在拨号计划中完成，包括复杂的检查和数据库查询/更新任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T18:02:13.573

尝试使用 ${SHELL(date)} 检查它是否有效。

从我的 extensions.conf 中：

```
exten => 4002,1,Answer
exten => 4002,n,Set(RESULT=${SHELL(date)})
exten => 4002,n,NoOp(${RESULT})
exten => 4002,n,Hangup 
```

在调用 4002 后从 asterisk.log 中：

```
 == Using SIP RTP CoS mark 5
    -- Executing [4002@demo2:1] Answer("SIP/100-00000585", "") in new stack
    -- Executing [4002@demo2:2] Set("SIP/100-00000585", "RESULT=Thu Jan  3 20:00:08 EET 2013
") in new stack
    -- Executing [4002@demo2:3] NoOp("SIP/100-00000585", "Thu Jan  3 20:00:08 EET 2013
") in new stack
    -- Executing [4002@demo2:4] Hangup("SIP/100-00000585", "") in new stack
  == Spawn extension (demo2, 4002, 4) exited non-zero on 'SIP/100-00000585'*emphasized text* 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T19:28:47.243

你启用了 SELinux 吗？SELinux 通常会阻止这种对 shell 脚本的访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-20T07:44:39.600

在 /etc/asterisk/ 或星号具有权限的其他文件夹中创建脚本：

chown星号/文件夹

chgrp 星号/文件夹

另请记住，您可以像这样运行命令：

exten => 3333,1,Set(result=${shell(echo 61)})

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-02T12:21:38.820

还要始终确保您的星号用户确实有外壳。

```
cat /etc/passwd | grep asterisk 
```

就我而言，出于安全原因，我有 /bin/false 。所以下面的命令不起作用：

```
su asterisk -c 'whoami' 
```

# jquery - 在 Rails 中使用 Ajax/jQuery 删除行，有些东西不起作用

> ID：14143487
> 
> 赞同：2
> 
> 时间：2013-01-03T16:58:26.853
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

这是相当直接的代码，但不知何故，当我单击“删除”时，记录会被删除，但在我刷新它之前它不会显示在索引页面上。我正在使用 jquery 来显示所有记录。

在控制器中，我添加了销毁操作

```
format.js 
```

在 Index.html.erb 中，我添加了

```
<td><%= link_to 'Destroy', post, method: :delete, data: { confirm: 'Are you sure?' }, :remote => true %></td> 
```

在 destroy.js.erb 中，我添加了

```
$('#edit_post_<%= @post.id %>').remove(); 
```

现在，当我单击删除链接时，帖子被删除，但索引文件的输出没有更新，只有当我刷新它时，它才会显示没有删除项目的新列表。知道我错过了什么吗？

谢谢

编辑 - 好的，我能够解决这个问题，问题是 destroy.js.erb 中的 jquery 代码错误，我调用了错误的 div

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:29:58.517

`@post_id = @post.id` 在您销毁帖子之前，请在控制器处设置此设置 。

在 js.erb 文件中使用这一行 `$('#edit_post_<%= @post_id %>').remove();`

因为删除帖子后，@post.id 在 js 文件中没有任何意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:07:13.733

请确保您`@post.destroy`在渲染之前已在控制器中添加了方法`format.js`。目前您只是从 html source 中删除。为了反映变化，你必须改变整体的价值（从`database`）

# javascript - 为什么悬停后清除间隔会加速旋转

> ID：14143489
> 
> 赞同：1
> 
> 时间：2013-01-03T16:58:34.920
> 
> 标签：javascript, clearinterval

我正在处理的网站上有一个旋转滑块。

加载页面时滑块会自动滚动，并且应该在鼠标悬停时停止，然后在鼠标离开时重新开始。

我停止了滑块的工作，但是当我将鼠标移出时，滑块再次启动，但速度是原来的两倍，导致滑块不显示任何内容。

我的清除间隔不能正常工作有什么原因吗？我怎样才能让滑块停止和启动而不改变速度和搞砸？

```
 rotateSwitch: function() {  
       var myTimer=setInterval(function() { this.autoRotate(); }.bind(this), 5000);
       $('.hero img').hover(
         function() {
         window.clearInterval(myTimer)},
         function() {
         this.rotateSwitch();}.bind(this));
    }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:43:31.060

在每次 mouseleave 时，您通过调用再次绑定该函数`this.rotateSwitch()`。相反，只需再次开始间隔：

```
rotateSwitch: function() {  
    var myTimer,
        that = this;
    function start() {
        myTimer = setInterval(that.autoRotate.bind(that), 5000);
    }
    function stop() {
        clearInterval(myTimer);
    }
    $('.hero img').hover(stop, start);
    start();
}, 
```

如果该函数被多次调用，您可能还希望将`.hero img`选择器限制在特定的上下文中。

# mysql - xampp的本地主机不工作

> ID：14143491
> 
> 赞同：0
> 
> 时间：2013-01-03T16:58:41.830
> 
> 标签：mysql, apache, xampp

我现在在 xampp 上工作了 8 个月，没有任何问题，但是当我突然感染病毒时，localhost 无法正常工作！我通过 AVG anivirus 消除了病毒，但仍然没有。

我卸载了 xampp，并重新安装了它，但仍然没有任何反应。我安装了 xampp 的 1.8.1 和 1.6.4 版本，但没什么特别的。

我在很多地方搜索了解决方案，但找不到。他们说 Skype 的 80 端口（做了），关于安装旧版本（做了），关于“我在 apache .conf 文件中更正了 PHP 的路径”（没有尝试，因为我找不到路径） ，关于 127.0.0.1 代替（做到了）。

有没有人想出类似的东西？

为了消除病毒我不得不在regedit中删除一些文件，我不知道是不是这个问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:01:29.917

删除注册详细信息有时会导致问题。做你的数据备份并重新安装干净的窗口，我认为这会节省时间，而不是搜索网络。

# backbone.js - 视图或单独视图中的条件项？

> ID：14143497
> 
> 赞同：0
> 
> 时间：2013-01-03T16:59:02.293
> 
> 标签：backbone.js, backbone-views

假设我有一个基本模板 - 我们称它为“shell”，它为我提供了 3 个 div（顶部、左侧、主）。在我的顶部 div 中，我添加了一个导航栏视图。导航栏视图有一个“登录”链接，我想在用户登录时将其更改为“注销”。这最好用模板中的逻辑完成，还是建议改为制作这些单独的视图和如果是这样，我最好在哪里处理显示逻辑？我很确定这是我需要做这种事情的唯一实例。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:54:46.160

一个半打中的六个。即使您将逻辑放在模板中，该模板仍然需要您向它传递一个标志，指示它是处于“登录”还是“注销”模式，以及该标志必须来自哪里（如果你在做标准的骨干）？一个看法。

所以真的你的问题让我觉得本质上是在以下之间进行选择：

```
var MyView = Backbone.View.extend({
    template: compile('Logged {{if loggedIn}}In{{else}}Out{{/if}}'),
    render: function() {
        this.$el.html(this.template(this.loggedIn);
    }
}); 
```

或者：

```
var MyView = Backbone.View.extend({
    template: compile('Logged '),
    render: function() {
        this.$el.html(this.template() + (this.loggedIn ? 'In' : 'Out'));
    }
}); 
```

根据您的评论：

> 我很确定这是我需要做这种事情的唯一实例。

我建议不要打扰模板逻辑，只是因为......为什么要打扰？但最终没有错误的答案。

# c# - 将 LINQ 包含转换为 OR

> ID：14143500
> 
> 赞同：0
> 
> 时间：2013-01-03T16:59:05.843
> 
> 标签：c#, linq, lambda

我正在使用 OData 和 .NET DataServiceQuery 类。我有一个实例，我想根据 ID（1、2、3 中的 ID）查询多个实体的 OData 服务。但是，OData 需要将其作为 ID = 1 或 ID = 2 或 ID = 3 格式，这很好。但在客户端，我不知道提前需要多少个 ID，所以我需要能够翻译以下内容：

列表 ids = .... query.Where(x => ids.Contains(x.ID)

我已经熟悉创建自己的 IQueryable 并且正在这样做并翻译 LINQ 表达式的其他部分。我只是不确定如何将 Contains lambda 转换为 OR lambda，评估传入列表以生成条件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T17:07:02.840

您应该以这种方式创建一个新表达式。像这样的东西：

```
public Expression GetOrExpression( MethodCallExpression containsExpression )
{
    var list = (IEnumerable)((ConstantExpression)containsExpression.Object).Value;
    var p = containsExpression.Arguments[0];

    Expression expression;

    foreach(var item in list)
    {
        var equal = Expression.Equal(p, item);
        if(expression == null)
            expression = equal;
        else
            expression = Expression.OrElse(expression, equal);
    }
    return expression;
} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T17:04:29.053

您可以利用[Dynamic Linq](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)并使用运行时生成的字符串进行查询。基本上，扩展方法套件允许您将 linq 静态语句编码为在执行时编译的字符串。

# c# - 更改整个数组而不是一个单元格

> ID：14143504
> 
> 赞同：0
> 
> 时间：2013-01-03T16:59:10.410
> 
> 标签：c#, arrays, winforms

我有一个 2D 数组`PictureBox`，我想在一个循环中更改每个图片框的位置并将其添加到表单中，但是当我更改一个单元格的属性时，它也会更改每个其他单元格。（构造函数获取表单的对象并将其设置为`form`变量）

```
private Form form;
private PictureBox[,] board = new PictureBox[8, 8];
private void PrintBoard()
    {
        for (int i = 0; i < 8; i++)
        {
            for (int j = 0; j < 8; j++)
            {
                board[i, j].Left = j * 20;
                form.Controls.Add(board[i, j]);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:05:54.030

我认为问题在于填充图片框数组 - 您正在向所有单元格添加对同一图片框的引用。您应该为每个单元格创建新的 PictureBox：

```
for(int i = 0; i <= board.GetUpperBound(0); i++)
    for (int j = 0; j < board.GetUpperBound(1); j++)
        board[i, j] = new PictureBox(); // create new picture box for each cell 
```

# python-3.x - 窗口最大化时调整表格列的大小

> ID：14143506
> 
> 赞同：1
> 
> 时间：2013-01-03T16:59:15.827
> 
> 标签：python-3.x, pyqt

我有一个窗口，其中有一个表格小部件。我正在使用 python/pyqt4。我希望当窗口最大化时，表格的列也会调整大小以使其更宽。这是我的代码的一部分。我可以添加什么来实现这一目标？

```
self.table=QTableWidget()
self.tableLabel.setBuddy(self.tableLabel)
self.table.setColumnCount(len(headers))
self.table.setHorizontalHeaderLabels(headers)
self.table.setMinimumSize(450,400)
self.table.isFullScreen()
self.table.setAlternatingRowColors(True)
self.addButton=QPushButton("New")
layout=QGridLayout()
layout.addWidget(self.tableLabel,0,0)
layout.addWidget(self.table,1,0,5,6)
layout.addWidget(self.addButton,7,5)
self.setLayout(layout)
self.setWindowTitle("Table") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T19:19:53.723

手动执行此操作的一种方法是重新实现 所在`changeEvent`的小部件`QTableWidget`。否则，您可以使用该`self.table.horizontalHeader().setResizeMode(QtGui.QHeaderView.Stretch)`选项在每次小部件更改其大小时自动拉伸每一列。这里有一个例子：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

import sip
sip.setapi('QString', 2)
sip.setapi('QVariant', 2)

from PyQt4 import QtGui, QtCore, QtWebKit, QtNetwork

class myWindow(QtGui.QMainWindow):
    def __init__(self, parent=None):
        super(myWindow, self).__init__(parent)

        self.setWindowTitle("Table")

        headers = [str(x) for x in range(6)]

        self.table = QtGui.QTableWidget()
        self.table.setColumnCount(len(headers))
        self.table.setHorizontalHeaderLabels(headers)
        self.table.setMinimumSize(450,400)
        self.table.setAlternatingRowColors(True)
        self.table.horizontalHeader().setResizeMode(QtGui.QHeaderView.Stretch)

        self.setCentralWidget(self.table)

    def changeEvent(self, event):
        if event.type() == QtCore.QEvent.WindowStateChange: 
            print "The window state changed" # Here you can resize the columns manually

        return super(myWindow, self).changeEvent(event)

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('myWindow')

    main = myWindow()
    main.show()

    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-27T18:06:28.143

将此代码用于表格

```
self.table.horizontalHeader().setResizeMode(QtGui.QHeaderView.Stretch) 
```

# sql - 如何优化 Oracle 中的删除查询（带子查询）？

> ID：14143510
> 
> 赞同：1
> 
> 时间：2013-01-03T16:59:29.193
> 
> 标签：sql, oracle, subquery

我有这样的查询：

```
 delete from tableA 
 where tableA.fk in (select id 
                     from tableB 
                     where tableB.column1='somevalue' 
                     and tableB.date between date1 and date2)
   ; 
```

表 tableB 包含近 100,000,000 条记录。所以

```
select id 
from tableB 
where  tableB.column1='somevalue' 
and tableB.date between date1 and date2 
```

返回近 1,000,000 条记录。结果 - 删除根本不起作用 - 回滚段大小的问题。我无法增加段的大小。

如何执行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T18:11:10.120

就回滚（撤消）空间使用而言，删除是最昂贵的操作，因为我们必须存储整个删除的行（而撤消插入语句只需要数据库存储 rowid）。解决问题的最简单方法是将更多文件添加到 UNDO 表空间。

但你说

> “我无法增加段的大小”

这有点令人惊讶，毕竟现在磁盘很便宜。也许你有一个你害怕接近的愤怒的 DBA？但是您的 DBA 没有履行提供数据库以便维护的职责；坦率地说，拥有一个 VLDB（一亿行表这样计数，即使在 PB 和 zettabytes 的今天）没有足够的 Undo 空间是愚蠢的。

但是，如果您不想让数据中心的mintotaur 留胡子，那么您所能做的就是更改您的代码。这是一种选择。鉴于这种 ...

```
select id 
from tableB 
where  tableB.column1='somevalue' 
and tableB.date between date1 and date2 
```

... 返回一百万行，因此尝试从中删除太多行`tableA`，您可以尝试返回较少行的子查询。出于练习的目的，我假设`date1`to指定的范围`date2`是 30 天：您需要相应地调整以下代码。

```
for i in 1..10 loop
    delete from tableA 
     where tableA.fk in (select id 
                         from tableB 
                         where tableB.column1='somevalue' 
                         and tableB.date between date1 + (3 * (i-1)) and  date1 + (3 * i)
       ;
    commit;
end loop 
```

这将简单地将选择分成十个三天的块。这样做需要*更长的时间*，但它不应该破坏 Undo 表空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T17:04:29.307

你想要做的是：

```
create table foo_bar  
as select  *  
from tableA   
where tableA.fk not in (select id from tableB where 
 tableB.column1='somevalue' and tableB.date between date1 and date2); 
```

然后是原始表的截断+删除

```
truncate tableA  
drop tableA 
```

然后重命名`foo_bar`为`tableA`

```
alter table foo_bar  rename to tableA 
```

请注意，请确保禁用所有索引。

**评论**

> 我不能放下桌子。它一直在使用。

你当然可以。您需要将表隐藏在`view`只是一个虚拟功能的后面和/或留出一些维护时间，因为在插入时您无法清除数据。现在更典型的方法是将这些数据推送到`materialized view`将作为`fact table`. 这使您可以随时修改基表 (tableA)，而不必担心会损害用户对物化视图的查询。

使用该`nologging`参数将减少正在使用的回滚量。您无法恢复使用构建的物化视图`nologging`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T17:12:26.740

如果您正在填充回滚段，则可能是因为您的事务中涉及的数据量。

我会分成几个块并提交每个块，例如：

```
 delete from tableA where tableA.fk in (
    select id from (
            select id from tableB where 
                tableB.column1='somevalue' and tableB.date between date1 and date2 and id in (select distinct fk from tableA.fk)

        )
        where rownum < XXXX 
    ) 
```

给 XXXX 你想要的值（10000）或其他值，然后循环执行此语句，并且不要忘记在每次迭代中提交。

您必须循环直到 delete 语句返回 0（受影响的行数）。

**UPDATED QUERY** 如前所述，这不会提供最佳性能，但会解决回滚段问题

希望能帮助到你

# arduino - 以编程方式查找 Arduino 草图的名称？

> ID：14143517
> 
> 赞同：2
> 
> 时间：2013-01-03T16:59:46.360
> 
> 标签：arduino, eeprom

我想确定在我的 Arduino Leonardo 上运行的 Arduino 草图的名称。因此，当我配置 Arduino 时，我可以更改文件名并让草图自动更改脚本中的数字。

这可能吗？

为了说明我们这样做的原因，我们必须提供 50 个 Arduino，而不是手动编辑一堆脚本，我宁愿只更改文件名。

我不知道如何做我想做的事，但作为对旁观者的善意表现，这里是我在 Arduino 上设置 EEPROM 的代码：

```
#include <EEPROM.h>
#include "EEPROMAnything.h"

// begin EDIT ME

char CONFIG_NUMBER[]="##"; // Config Number goes here

// end EDIT ME

char IPADDRESS[]="XX.XX.XX.XXX";
char APN[]="myapn";

const int buflen = 32;

struct config_t {
  char model[buflen];
  char serial_num[buflen];
  char ipaddress[buflen];
  char apn[buflen];
}configuration;

int ee_addr=0;

boolean registrationDone = false;

void setup(){
    Serial.begin(115200);
    Serial.println(F("Starting Up"));

}

void loop()
{
  config_t configuration;
  strcpy(configuration.model, MODEL);
  strcpy(configuration.serial_num, SERIAL_NUM);
  strcpy(configuration.ipaddress, IPADDRESS);
  strcpy(configuration.apn, APN);
   if (!registrationDone){
    EEPROM_writeAnything(ee_addr,configuration);
  registrationDone = true;
  }
  EEPROM_readAnything(ee_addr, configuration);
  Serial.println(F("Settings"));
  Serial.println(String(configuration.model));
  Serial.println(String(configuration.serial_num));
  Serial.println(String(configuration.ipaddress));
  Serial.println(String(configuration.apn));
  delay(5000);
} 
```

提前感谢您的任何想法！萨拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T21:43:50.200

我没有测试过这段[代码](http://arduino.cc/forum/index.php?PHPSESSID=e6ea3602ee7e2ec6af9e4556a3e65033&topic=118605.msg893130#msg893130)，但它似乎做了你想做的事。

在我看来，虽然更易于维护的解决方案是使用定义 ID 号的外部 .h 文件，然后将其包含在您的草图中。然后，您可以编写一个桌面宏来增加 .h 文件中定义的数字，然后再配置每个板。

# javascript - 大多数 Javascript 脚本不适用于引导程序

> ID：14143519
> 
> 赞同：-1
> 
> 时间：2013-01-03T16:59:53.037
> 
> 标签：javascript, html, twitter-bootstrap

我已经开发了一个带有引导框架版本 2.0 的站点（我一开始无法升级 b/c 版本我犯了一个可怕的错误来更改 bootstrap.css 文件，没关系）

顺便说一句，所有引导 javascript 都可以！工作得很好，但是当我试图从[http://www.dynamicdrive.com](http://www.dynamicdrive.com)插入脚本时没有任何工作，或者脚本工作不正确。

一开始我以为脚本可能有问题，所以我尝试在没有引导库的空白 html 页面上插入相同的脚本。结果：它运行良好。

为什么会这样？我是否忘记在 html 代码中添加任何内容？如何使这些脚本在我的 .html 和 .php 文件中工作？

我尝试了该站点上的许多脚本，但只有 1 或 2 个有效。

例如，一个不工作的脚本是：[http ://www.dynamicdrive.com/dynamicindex17/dropinbox.htm](http://www.dynamicdrive.com/dynamicindex17/dropinbox.htm)

当然我使用的是 html 5。这是一个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:02:44.583

通常，加载的 javascript 文件中的一个错误会阻止页面上的任何其他脚本工作。可能新脚本中存在某种错误。检查浏览器的错误控制台是否有任何红色。

找到错误消息后，谷歌它。

[您可以使用http://jshint.com](http://jshint.com)之类的工具在萌芽状态中发现语法错误。

最后，阅读[Javascript 调试](http://www.webmonkey.com/2010/02/javascript_debugging_for_beginners/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:07:40.293

首先，请在您的问题中发布相关的 JS，而不是链接。否则我们将很难为您提供帮助:)

其次，使用[jsHint](http://www.jshint.com/)之类的代码质量工具来检查您添加的 javascript（以及使用浏览器的控制台）。尝试慢慢添加脚本的各个部分，直到出现问题。

# jenkins - 如何在 Jenkins 触发构建之前等待用户提示

> ID：14143522
> 
> 赞同：4
> 
> 时间：2013-01-03T17:00:04.677
> 
> 标签：jenkins, jenkins-plugins, hudson-plugins

我有一个用于日常发布的 powershell 脚本，效果很好。但是，我的任务是从 Jenkins 运行它，但我似乎无法让参数化构建工作。这些是脚本进行部署的步骤。

1.  部署到 PRE_UAT 环境。
2.  测试步骤 1
    i。如果步骤 1 成功，请询问用户是否要继续部署到 UAT
        a。如果用户响应是肯定的，则继续部署到 UAT else Stop
    ii。如果步骤 1 不成功，通知用户并停止

第一个作业在 Jenkins 中成功运行，但作为参数化构建的第二个作业在由第一个构建触发时不请求用户输入。只有第一个作业（也是参数化构建）提示用户输入。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T17:06:28.250

当第二个构建被触发时，不能保证在 jenkins 前面有一个用户（或“正确的”用户）。如果未手动触发构建，则不会请求构建参数。

我建议您查看[升级插件](https://wiki.jenkins-ci.org/display/JENKINS/Promoted+Builds+Plugin)，并尝试在第一次构建之后设置手动升级步骤，以触发第二次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:40:56.570

您可以将参数从第一步传递到下一步，依此类推，
但它不会给出您所针对的流程。（用户在构建开始时无法知道他是否想要推广它）。

建议您检查促销插件。

# javascript - D3，如何完成这个图，数据格式

> ID：14143523
> 
> 赞同：0
> 
> 时间：2013-01-03T17:00:07.470
> 
> 标签：javascript, jquery, json, d3.js

这是我用 d3.js 制作的图表，这是一个有效版本的截图

[![](../Images/ebf514b1c0a3a30dc9ba286db74b1d63.png)](https://i.stack.imgur.com/m8FyF.png)

我为时间维度改变了一些东西。看这里

[http://jsfiddle.net/GyWpN/14/](http://jsfiddle.net/GyWpN/14/)

我正在比较连续几天的开放票和封闭票。

目前我觉得我的数据格式不正确。

```
 [
{
    "open": "1",
    "date": "2012-12-02 00:00:00+00",
    "completed": 0
},
{
    "open": "3",
    "date": "2012-12-11 00:00:00+00",
    "completed": 0
},
{
    "open": "1",
    "date": "2012-12-12 00:00:00+00",
    "completed": 0
},
{
    "open": "1",
    "date": "2012-12-17 00:00:00+00",
    "completed": 0
},

.
.
.
] 
```

也许它应该采用不同的格式，因为我需要制作两组线进行比较。

数据应该是两个 json 数组吗？

我将如何完成这个图表？目前，在将`x`维度从更改为 后`d3.scale.linear()`，`d3.time.scale()`我无法看到任何数据。我还将对象更改为您看到的当前 json 格式。

洞察力赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:41:05.117

您可以使用这种数据格式来做您想做的事，这不是一种非常干燥的做事方式，但它可能会帮助您进行下一步：

```
var data = [
    {
        "open": "3",
        "date": "2012-12-02 00:00:00+00",
        "completed": 0
    },
    {
        "open": "4",
        "date": "2012-12-11 00:00:00+00",
        "completed": 1
    },
    {
        "open": "2",
        "date": "2012-12-12 00:00:00+00",
        "completed": 4
    },
    {
        "open": "5",
        "date": "2012-12-17 00:00:00+00",
        "completed": 9
    }];

var width = 276,
    height = 200,
    padding = 50;

// input format of date
var parse_date = d3.time.format("%Y-%m-%d 00:00:00+00").parse;

// clean data
data.forEach(function(d) {
    d.date = parse_date(d.date);
    d.open = parseInt(d.open);
    //d.completed = parseInt(d.completed);
});

// time scale for x axis
var x = d3.time.scale()
    .domain(d3.extent(data, function(d) { return d.date; }))
    .range([0, width-padding]);

// assume you start from 0 and that completed has max value
// probably needs improving
var y = d3.scale.linear()
    .domain([0, d3.max(data, function(d) { return d.completed; })])  
    .range([height-padding, 0]);

// verbose but simple way of defining lines and areas

var open_line = d3.svg.line()
    .x(function(d) { return x(d.date); })
    .y(function(d) { return y(d.open); });

var complete_line = d3.svg.line()
    .x(function(d) { return x(d.date); })
    .y(function(d) { return y(d.completed); });

var open_area = d3.svg.area()
    .x(open_line.x())
    .y1(open_line.y())
    .y0(y(0));

var complete_area = d3.svg.area()
    .x(complete_line.x())
    .y1(complete_line.y())
    .y0(y(0));

// draw the svg
var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);

// define xaxis
var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom")
    .tickFormat(d3.time.format("%d-%b"));

// attach data to a g object
var lines = svg.append( "g" )
    .data( [data] );  // a list with a single item as the whole path is generated from a single list

// draw lines and areas

lines.append( "path" )
    .attr("class", "line")
    .attr("d", open_line);

lines.append( "path" )
    .attr("class", "area")
    .attr("d", open_area);

lines.append( "path" )
    .attr("class", "line")
    .attr("d", complete_line);

lines.append( "path" )
    .attr("class", "area")
    .attr("d", complete_area);

// now use data without the additional nest as want to create an dot for each
// item in the list
dots = lines.selectAll(".dot")
    .data( data );

    // draw two lots of dots, one for opened and one for completed
    dots.enter()
    .append("circle")
    .attr("class", "dot")
    .attr("cx", open_line.x())
    .attr("cy", open_line.y())
    .attr("r",3.5);

    dots.enter()
    .append("circle")
    .attr("class", "dot")
    .attr("cx", complete_line.x())
    .attr("cy", complete_line.y())
    .attr("r",3.5);

// and put the xaxis in
svg.append("g")
    .attr("class", "axis")   // give it a class so it can be used to select only xaxis labels  below
    .attr("transform", "translate(0," + (height - padding) + ")")
    .call(xAxis)​ 
```

[http://jsfiddle.net/phoebebright/JZJr8/4/](http://jsfiddle.net/phoebebright/JZJr8/4/)

# vb.net - 在 vb.net 中打印 word 文档

> ID：14143526
> 
> 赞同：1
> 
> 时间：2013-01-03T17:00:10.063
> 
> 标签：vb.net

我需要从 vb.net 打印 word.activedocument。我可以用**document.printout() 做到这一点。**但我需要将该文档打印到打印机的特定托盘。所以现在我正在使用**printdocument.print()**因为使用这行命令我可以定义要从中打印的特定页面，但我不知道如何将我的 word 文档转换或分配给这个 printdocument.print ？？？如果我的问题令人困惑，这是我的代码

Dim oWord As Word.Application = Globals.ThisAddIn.Application Dim app As Word.Document = oWord.ActiveDocument Dim objDataTypeMetafile As New Object objDataTypeMetafile = Word.WdPasteDataType.wdPasteMetafilePicture 'oWord.Visible = True Dim num_copies As String = tb_num_copies.Text 'oWord .PrintOut(Copies:=num_copies, PrintToFile:=False)

```
 Dim prtdoc As New PrintDocument
    Dim strDefaultPrinter As String = prtdoc.PrinterSettings.PrinterName
    Dim strPrinter As String
    For Each strPrinter In PrinterSettings.InstalledPrinters
        com_printer.Items.Add(strPrinter)

        If strPrinter = strDefaultPrinter Then
            com_printer.SelectedIndex = com_printer.Items.IndexOf(strPrinter)
        End If

        Dim pkSource As Printing.PaperSource
        Dim printDoc As New PrintDocument
        ' AddHandler printDoc.PrintPage 

        printDoc.PrinterSettings.PrinterName = strPrinter
        For Each pkSource In printDoc.PrinterSettings.PaperSources
            If pkSource.RawKind = "261" Then

                printDoc.PrinterSettings.DefaultPageSettings.PaperSource.RawKind = pkSource.RawKind
                Dim psize As Printing.PaperSize = printDoc.PrinterSettings.PaperSizes.Item(5)
                printDoc.DefaultPageSettings.PaperSize = psize
                printDoc.PrinterSettings.PrintRange = PrintRange.AllPages
                'AddHandler printDoc.PrintPage, AddressOf Me.PrintDoc_PrintPage
                printDoc.PrinterSettings.Copies = num_copies
                printDoc.PrinterSettings.Duplex = Duplex.Default

                AddHandler printDoc.PrintPage, AddressOf Me.PrintPageHandler

                printDoc.Print()

                RemoveHandler printDoc.PrintPage, AddressOf Me.PrintPageHandler

            End If

        Next

    Next strPrinter
    oWord = Nothing

End Sub 
```

Private Sub PrintPageHandler(ByVal sender As Object, ByVal args As Printing.PrintPageEventArgs) ?????????????????? 结束子

# ruby-on-rails - Rails 回形针 - 与我系统上已有的文件一起使用

> ID：14143527
> 
> 赞同：0
> 
> 时间：2013-01-03T17:00:23.230
> 
> 标签：ruby-on-rails, paperclip

我正在使用回形针来管理附件。这适用于用户上传文件时，但我们有一个功能，用户可以从我们系统上的图像中进行选择，该图像位于与回形针不同的目录中。

一旦他们从我们的系统中选择了该图像，我如何让回形针从那里处理和处理图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:07:07.113

Paperclip 有一个`File`对象适配器，因此假设您从用户输入中获得了文件的完整路径，您可以创建一个新`File`对象，然后将其传递给目标模型中的附件属性并正常保存所有内容。

```
 file = File.new(file_path_from_user_input)
 user.attachment = file
 user.save 
```

# java - Eclipse 为域对象和带“m”后缀的类成员生成 getter/setter

> ID：14143528
> 
> 赞同：6
> 
> 时间：2013-01-03T17:00:24.840
> 
> 标签：java, eclipse, code-generation

关于我的域对象中生成的 getter 和 setter 方法，我有一个小问题。我想为我的源代码使用通用样式指南。该样式指南的一部分说我以成员前缀“m”开头每个类成员名称。

```
class User{
String mName;
List<Call> mAllCall;
List<Geo> mAllGeo; 
```

不幸的是，我有几个具有更多成员变量的类。我遇到的问题是我是一个非常懒惰的开发人员，我在 Eclipse 中创建了 getter 和 setter 方法

> “源”->“生成 Getter 和 Setter”。

结果是

```
public String getmName() {
    return mName;
}
public void setmName(String mName) {
    this.mName = mName;
}
public List<Call> getmAllCall() {
    return mAllCall;
}
public void setmAllCall(List<Call> mAllCall) {
    this.mAllCall = mAllCall;
}
public List<Geo> getAllGeo() {
    return mAllGeo;
}
public void setmAllGeo(List<Geo> mAllGeo) {
    this.mAllGeo = mAllGeo;
} 
```

那不是我想要的结果。我需要这个：

```
public String getName() {
    return mName;
}
public void setName(String pName) {
    this.mName = pName;
}
public List<Call> getAllCall() {
    return mAllCall;
}
public void setAllCall(List<Call> pAllCall) {
    this.mAllCall = pAllCall;
}
public List<Geo> getAllGeo() {
    return mAllGeo;
}
public void setmAllGeo(List<Geo> pAllGeo) {
    this.mAllGeo = mAllGeo;
} 
```

我目前手动删除并替换方法名称中的前缀。有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-03T20:06:24.563

For the prefix `m`, you add the letter `m` to your list of prefixes in the **Java Code Style**.

Follow these steps:

1.  open **Preferences**,
2.  in left panel, expand **Java**,
3.  expand **Code Style**,
4.  right panel is where you should now be looking at

You will see a list with Fields, Static Fields, etc. This is what you need to modify.

Set `m` against **Fields**.

Set `p` against the **Parameter**.

As the name of the field will now be different from the name of the argument, the `this.` qualification will no longer be added automatically. However, you can check the option **Qualify all generated field accesses with 'this.'** to have it again.

I suppose that you know the difference between **Enable project specific settings** and **Configure Workspace Settings...** in the upper left and right of the window?

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T17:30:43.597

我根本不喜欢这个主意，但是..

您可以编写不带前缀的成员`m`，让 Eclipse 创建 getter 和 setter，然后重命名成员（Shift-Alt-R）；Eclipse 将更改引用，但不会（除非您明确告诉它）getters/setters 签名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-25T10:06:28.510

getter 和 setter 方法的名称派生自字段名称。如果您对字段使用前缀或后缀（例如 fValue、_value、val_m），您可以在代码样式首选项页面（Windows > 首选项 > Java > 代码样式）中指定后缀和前缀。

参考[这里](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.cdt.doc.user%2Ftasks%2Fcdt_t_add_codetemp.htm)

# html - IE7强标签表现得像块元素

> ID：14143531
> 
> 赞同：0
> 
> 时间：2013-01-03T17:00:39.243
> 
> 标签：html, internet-explorer-7

我有这个结构：

```
<li>
<strong>If the Technology Developer and Analyst Intern Program - Consumer Banking Technology & Operations (CBT&O) is NOT conducting interviews on your campus,<strong> please apply below between November 1st and January 2nd.
</li> 
```

在所有浏览器中它看起来都很好，但在 IE7（和 IE7 兼容模式）中看起来像在[屏幕截图](http://screencast.com/t/kK4Ro9Gs)上。（[http://screencast.com/t/kK4Ro9Gs](http://screencast.com/t/kK4Ro9Gs)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:33:10.320

我发现了这个问题。IE7 自动设置`zoom:1`为强元素。我用它覆盖它`zoom:normal`并修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:07:29.313

看起来该`<strong>`元素看起来像 IE7 中具有固定宽度的块。我建议您嵌入[modernizr](http://modernizr.com/)或[css 重置](http://necolas.github.com/normalize.css/)，这样就不会发生这种情况。

如果它不起作用，也尝试将 css 赋予强元素，也许像`display:inline; float:left, width:100%`

我没有网站可以乱七八糟，所以你必须想办法。

# jquery - 基本（我认为？） wp_enqueue 问题

> ID：14143533
> 
> 赞同：2
> 
> 时间：2013-01-03T17:00:49.090
> 
> 标签：jquery, wordpress

我正在尝试使用以下方法加载一个名为accordion.js 的脚本：

```
function accordion() {
    wp_register_script( 
        'accordion',  
        get_template_directory_uri() . '/js/accordion.js',
        array('jquery'),
        null, 
        true 
        );
    wp_enqueue_script('accordion');
} 
```

它没有加载脚本（因为它没有出现在带有 Chrome devtools 的资源中），我不知道我做错了什么。我意识到这可能是非常基本的，但我没有尝试解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T19:10:00.617

The snippet you've included will not work on its own (if you've dropped that into your `functions.php` file). You'll also need to ensure that you call your function with the proper hook like so:

```
add_action('wp_enqueue_scripts', 'accordion'); 
```

This will tell WordPress to run the `accordion` function when it's time to enqueue the scripts.

Additionally, you might want to rename your function to something more generic such as `load_resources` and you can enqueue *all* of your scripts that you'll need inside that function.

If you're doing that successfully, but you still have problems, you might check the Net tab of your developer tool and see if the browser is at least attempting to load the file (if even from the wrong location).

# javascript - 检查/记录 PhantomJS/CasperJS 使用了多少带宽

> ID：14143539
> 
> 赞同：5
> 
> 时间：2013-01-03T17:01:04.907
> 
> 标签：javascript, screen-scraping, web-scraping, phantomjs, casperjs

是否可以检查/记录在 PhantomJs/CasperJS 的每次运行期间传输了多少数据？

Phantom/Casper 的每个实例都有一个`instance_id`分配给它（由启动该实例的 PHP 函数）。运行完成后，传输的数据量和数据`instance_id`必须插入到 MySQL 数据库中，可能是通过生成实例的 PHP 函数。这样可以记录单个 phantomjs 运行的带宽利用率。

可能有许多幻象/casper 实例正在运行，每个实例持续一两分钟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T23:38:01.487

尝试捕获数据时，最简单、最准确的方法是使收集器和发射器尽可能靠近。在这种情况下，如果 phantomjs 可以捕获您需要的数据并将其发送回您的 PHP 函数以将其与 instance_id 相关联并进行数据库交互，那将是理想的。事实证明它可以（至少部分）。

这是一种方法：

```
var page = require('webpage').create();
var bytesReceived = 0;

page.onResourceReceived = function (res) {
    if (res.bodySize) {
        bytesReceived += res.bodySize;
    }
};

page.open("http://www.google.com", function (status) {
    console.log(bytesReceived);
    phantom.exit();
}); 
```

这会捕获检索到的所有资源的大小，将它们相加，然后将结果输出到您的 PHP 代码可以使用的标准输出中。这不包括标头的大小或任何 POST 活动。根据您的应用程序，这可能就足够了。如果没有，那么希望这能给你一个很好的起点。

# mysql - mysql db 无法识别有效连接

> ID：14143541
> 
> 赞同：3
> 
> 时间：2013-01-03T17:01:08.267
> 
> 标签：mysql, join, sqldatatypes

我不太确定这里有什么问题，我只知道数据库工作不正常。

两个显示一些基本的数据结构，表1看起来像这样

```
 name         | inGameID
Azure Plagioclase  |  17455
   Plagioclase     |  18
  viscous Pyroxeres|  17460
      Onyx Ochre   |  1232 
```

表 2 类似于这样的东西

```
 userName  |    item
     sam    |   Onyx Ochre
    mike    |   viscous Pyroxeres
     dave   |    azure plagioclase 
```

尝试运行此查询时

```
SELECT fl.item, od.name 
FROM oreData od
JOIN fleetLog fl ON lower(od.name) = lower(fl.item)
order by fl.logID asc 
```

结果只是缟玛瑙赭石值。什么时候应该返回更多的数据。t1.name 和 t2.item 都具有相同的数据类型。我不确定需要更多的细节来帮助诊断这个问题，但我希望能多关注一下这个问题。我很乐意提供任何进一步的细节。我为这个如此模糊而道歉，我以前从未遇到过这样的问题

你们一针见血。在这些值的前面或结尾处都是额外的空白。解决这个问题的最佳方法是什么？

```
'39';'2';'1';'2001-03-13 00:14:27';'userName';'322';'Vivid Hemorphite
'
'38';'2';'1';'2001-03-13 00:19:28';'userName';'6386';'Azure Plagioclase
' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:30:43.410

> 你们一针见血。在这些值的前面或结尾处都是额外的空白。解决这个问题的最佳方法是什么？

1.  修复您的应用程序代码，使此类数据不会进入数据库；如果这是不可能的，您可以在数据库中定义触发器以在写入操作期间根据需要去除字符：

    ```
    CREATE TRIGGER oreData_ins  BEFORE INSERT ON oreData  FOR EACH ROW
    SET NEW.name = TRIM(NEW.name);

    CREATE TRIGGER oreData_upd  BEFORE UPDATE ON oreData  FOR EACH ROW
    SET NEW.name = TRIM(NEW.name);

    CREATE TRIGGER fleetLog_ins BEFORE INSERT ON fleetLog FOR EACH ROW
    SET NEW.item = TRIM(NEW.item);

    CREATE TRIGGER fleetLog_upd BEFORE UPDATE ON fleetLog FOR EACH ROW
    SET NEW.item = TRIM(NEW.item); 
    ```

2.  更新现有数据：

    ```
    UPDATE oreData  SET name = TRIM(name);
    UPDATE fleetLog SET item = TRIM(item); 
    ```

# sql - SSIS/SQL - 将日期/时间转换为字符串失败

> ID：14143545
> 
> 赞同：0
> 
> 时间：2013-01-03T17:01:12.360
> 
> 标签：sql, tsql, datetime, ssis

我有一个基本的 SSIS 作业，它运行 SQL 查询并将查询结果导出到 Excel 文件。SSIS 作业已运行一年多没有问题，但本月开始失败（在验证阶段，执行前），并出现以下错误：

> “从字符串转换日期和/或时间时转换失败。”

SQL 查询本身是一个带有 WHERE 子句的简单 SELECT，用于指定从中收集记录的开始和结束日期范围。确定日期范围的查询部分如下：

```
DECLARE     @RunDateTime datetime
DECLARE     @RunDate datetime
DECLARE     @StartDate datetime
DECLARE     @EndDate datetime
DECLARE     @Month int
DECLARE     @Year int
DECLARE     @strStartDate varchar(10)

SET     @RunDateTime = GetDate()
SET     @RunDate = CAST(@RunDateTime AS DATE)

IF                  DATEPART(d, @RunDate) = 16
    BEGIN       
                    SET @StartDate =  DATEADD(d, -15, @RunDate)
                    SET @EndDate = @RunDate
    END
ELSE
    BEGIN
                    IF      Month(@RunDate) = 1
                            SET @Month = 12
                    ELSE    
                            SET @Month = Month(@RunDate) - 1

                    IF      Month(@RunDate) = 1
                            SET @Year = Year(@RunDate) - 1
                    ELSE
                            SET @Year = Year(@RunDate)

                    SET @strStartDate = CAST(@Year AS VARCHAR) + CAST(@Month AS VARCHAR) + '16'
                    SET @StartDate = CONVERT(datetime, @strStartDate)
                    SET @EndDate = @RunDate
    END 
```

我可以将此代码从 SSIS 中取出并通过 SSMS 直接在服务器上执行，它可以正常工作，没有错误。但是，SSIS 作业无法运行它。实际上，我什至无法进入 SQL 命令的 OLE DB Source 对象并查看列元数据，每次都会收到上述错误。

我发现通过注释掉该`SET @StartDate = CONVERT(datetime, @strStartDate)`行，查询在 SSIS 中再次起作用，但没有理由该行会引起问题。正如我所说，它已经工作了一年多，没有任何问题。我真的对此束手无策，无法理解为什么这项工作突然停止工作。

我确实与我的 DBA 进行了核对，他向我保证 SQL 服务器端没有任何更改，但是我什至不知道该去哪里找他。

其他信息：

*   SSIS 作业使用 SQLNCLI10.1 连接提供程序。（2008 R2 SQL 服务器）
*   我尝试过使用其他连接提供程序，但没有成功。
*   查询中涉及的日期列是日期时间类型
*   没有会影响日期的区域/本地化更改。（并且所有日期都是 ISO 格式）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:50:31.563

这会失败，因为`@strStartDate` 它不是有效的日期或不是可识别的格式。它不应该在 11 月、12 月或 1 月失败，但肯定会在 2 月到 10 月 ( `Month(@RunDate) - 1`) 期间失败，因为`CAST(@Month AS VARCHAR)`返回的只有一位数。

老实说，这是计算上个月 16 日的一个相当长的方法，你能把它改成…

```
DECLARE @StartDate DateTime

IF DATEPART(d, GetDate()) = 16
   SET @StartDate = DateAdd(mm, DateDiff(mm,0,GetDate()),0)
ELSE
   SET @StartDate = DateAdd(mm, DateDiff(mm,0,GetDate())-1,0)+15; 
```

容易多了

# c# - 当使用 C# 使用 SOAP Web 服务时，提供者为 Ladon/Python

> ID：14143553
> 
> 赞同：1
> 
> 时间：2013-01-03T17:01:47.857
> 
> 标签：c#, python, soap, ladon

我正在尝试使用 C# 使用 SOAP Web 服务，虽然在使用 SOAPUI 甚至使用带有 SUDS 的 Python 时似乎还可以（我想确保它不在服务器端），但从 C# 使用它时，我总是得到 null值（而 Fiddler 的拦截显示它实际上包含数据）。

可能是 SOAP 数组被 C# 创建的代理对象处理不当。

由于我是 WSDL 的新手，我可能遗漏了一些东西，我在网上看到了许多关于类似（与 Ladon 部分无关）问题的解决方法，但没有任何帮助。

谢谢你的帮助。

* * *

ps：一些代码可以重现这个错误。

第 0 步：添加：服务 Web 参考，如下所述：[http](http://webservices20.blogspot.fr/2008/10/interoperability-gotcha-visual-studio.html) : //webservices20.blogspot.fr/2008/10/interoperability-gotcha-visual-studio.html 我的被称为“albumsWRn”

此错误的 C# 演示在这里：

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Reflection;
using System.Text;
using ConsoleApplication6.albumsWRn;    // PUT HERE THE NAME OF THE "Web References" you provide @ step 0

namespace ConsoleApplication6
{
    public static class PrettyPrinter
    {
    // from: http://www.jberndsen.nl/2012/05/c-pretty-printer/

    // the main function to be called to pretty print an object
    public static void PrettyPrint(object myData, StreamWriter sw)
    {
        // output to StreamWriter, in our case, representing a text file
        if (sw == null) throw new ArgumentNullException("sw");
        sw.WriteLines(GetPropValues(myData));
    }

    // to standard output
    public static void PrettyPrint(object myData)
    {
        StreamWriter sw = new StreamWriter(Console.OpenStandardOutput());
        sw.AutoFlush = true;
        Console.SetOut(sw);
        PrettyPrint(myData, sw);
    }

    // extension for the streamwriter to write lists of strings
    private static void WriteLines(this StreamWriter sw, IEnumerable<string> lines)
    {
        foreach (var line in lines)
        {
        sw.WriteLine(line);
        }
    }

    // generates spaces for indentation
    private static string Spaces(int i)
    {
        return (i > 0) ? "    " + Spaces(i - 1) : string.Empty;
    }

    private static string GetValue(object o)
    {
        if (o == null)
        {
        return "null";
        }
        if (o is DateTime)
        {
        return ((DateTime)o).ToShortDateString();
        }
        return o.ToString();
    }

    private static List<string> GetPropValues(object element, int depth = 0)
    {
        var result = new List<string>();
        // primitives
        if (element == null || element is ValueType || element is string)
        {
        result.Add(Spaces(depth) + GetValue(element));
        }
        else
        {
        // enumerations        
        var enumerableElement = element as IEnumerable;
        if (enumerableElement != null)
        {
            foreach (var item in enumerableElement)
            {
            result.AddRange(GetPropValues(item, depth + 1));
            }
        }
        // composite types         
        else
        {
            // get all the members and iterate through them
            var members = element.GetType().GetMembers(BindingFlags.Public | BindingFlags.Instance);
            foreach (var member in members)
            {
            var fieldInfo = member as FieldInfo;
            var propertyInfo = member as PropertyInfo;
            if (fieldInfo != null || propertyInfo != null)
            {
                // get the type of the member and check if its a primitive
                var t = fieldInfo != null ? fieldInfo.FieldType : propertyInfo.PropertyType;
                if (t.IsValueType || t == typeof(string))
                {
                // print the primitive member, its name and its value  
                var localResult = member.Name + ": ";
                localResult += GetValue(fieldInfo != null ? fieldInfo.GetValue(element) : propertyInfo.GetValue(element, null));
                result.Add(Spaces(depth) + localResult);
                }
                else
                {
                // print the non-primitive member, its name and recursively pretty print its value
                var o = fieldInfo != null ? fieldInfo.GetValue(element) : propertyInfo.GetValue(element, null);
                result.Add(Spaces(depth) + member.Name + ": ");
                result.AddRange(GetPropValues(o, depth + 1));
                }
            }
            }
        }
        }
        return result;
    }

    }

    class Program
    {
    static void Main(string[] args)
    {
        AlbumService albumService = new AlbumService();
        var filteredAlbums = albumService.listAlbums("The");
        PrettyPrinter.PrettyPrint(filteredAlbums);
        if (filteredAlbums.item == null)
        {
        Console.WriteLine("null contained, while it should not!");
        }
    }
    }
} 
```

soapUI ：这是使用soapUI 来检查它是否实际工作时使用的查询。

```
<soapenv:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:AlbumService">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:listAlbums soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
     <search-frase xsi:type="xsd:string">The</search-frase>
      </urn:listAlbums>
   </soapenv:Body>
</soapenv:Envelope> 
```

WSDL 可在此处查看：http: [//ladonize.org/python-demos/AlbumService/soap11/description](http://ladonize.org/python-demos/AlbumService/soap11/description) （这是来自 Ladon 创建者的演示站点：http: [//ladonize.org/python-demos/AlbumService](http://ladonize.org/python-demos/AlbumService)）

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:tns="urn:AlbumService" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:ns2="urn:AlbumService" xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" targetNamespace="urn:AlbumService" name="AlbumService">
   <wsdl:types>
      <xsd:schema targetNamespace="urn:AlbumService">
     <xsd:import namespace="http://schemas.xmlsoap.org/soap/encoding/" />
     <xsd:complexType name="ArrayOfunicode">
        <xsd:sequence>
           <xsd:element type="xsd:string" name="item" nillable="true" minOccurs="0" maxOccurs="unbounded" />
        </xsd:sequence>
     </xsd:complexType>
     <xsd:complexType name="Band">
        <xsd:sequence>
           <xsd:element type="ns2:ArrayOfunicode" name="album-titles" nillable="true" minOccurs="0" maxOccurs="1" />
           <xsd:element type="xsd:string" name="name" minOccurs="1" maxOccurs="1" />
        </xsd:sequence>
     </xsd:complexType>
     <xsd:complexType name="Album">
        <xsd:sequence>
           <xsd:element type="ns2:Band" name="band" minOccurs="1" maxOccurs="1" />
           <xsd:element type="ns2:ArrayOfunicode" name="songs" nillable="true" minOccurs="0" maxOccurs="1" />
           <xsd:element type="xsd:string" name="title" minOccurs="1" maxOccurs="1" />
        </xsd:sequence>
     </xsd:complexType>
     <xsd:complexType name="ArrayOfAlbum">
        <xsd:sequence>
           <xsd:element type="ns2:Album" name="item" nillable="true" minOccurs="0" maxOccurs="unbounded" />
        </xsd:sequence>
     </xsd:complexType>
     <xsd:complexType name="ArrayOfBand">
        <xsd:sequence>
           <xsd:element type="ns2:Band" name="item" nillable="true" minOccurs="0" maxOccurs="unbounded" />
        </xsd:sequence>
     </xsd:complexType>
      </xsd:schema>
   </wsdl:types>
   <wsdl:message name="listAlbums">
      <wsdl:part type="xsd:string" name="search-frase" />
   </wsdl:message>
   <wsdl:message name="listAlbumsResponse">
      <wsdl:part type="ns2:ArrayOfAlbum" name="result" />
   </wsdl:message>
   <wsdl:message name="listBands">
      <wsdl:part type="xsd:string" name="search-frase" />
   </wsdl:message>
   <wsdl:message name="listBandsResponse">
      <wsdl:part type="ns2:ArrayOfBand" name="result" />
   </wsdl:message>
   <wsdl:portType name="AlbumServicePortType">
      <wsdl:operation name="listAlbums">
     <wsdl:documentation>Fetch a list of albums matching search_frase</wsdl:documentation>
     <wsdl:input message="tns:listAlbums" />
     <wsdl:output message="tns:listAlbumsResponse" />
      </wsdl:operation>
      <wsdl:operation name="listBands">
     <wsdl:documentation>Fetch a list of albums matching search_frase</wsdl:documentation>
     <wsdl:input message="tns:listBands" />
     <wsdl:output message="tns:listBandsResponse" />
      </wsdl:operation>
   </wsdl:portType>
   <wsdl:binding type="tns:AlbumServicePortType" name="AlbumService">
      <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http" />
      <wsdl:operation name="listAlbums">
     <soap:operation style="rpc" soapAction="http://ladonize.org/python-demos/AlbumService/soap11/listAlbums" />
     <wsdl:input>
        <soap:body namespace="urn:AlbumService" use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" />
     </wsdl:input>
     <wsdl:output>
        <soap:body namespace="urn:AlbumService" use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" />
     </wsdl:output>
      </wsdl:operation>
      <wsdl:operation name="listBands">
     <soap:operation style="rpc" soapAction="http://ladonize.org/python-demos/AlbumService/soap11/listBands" />
     <wsdl:input>
        <soap:body namespace="urn:AlbumService" use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" />
     </wsdl:input>
     <wsdl:output>
        <soap:body namespace="urn:AlbumService" use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" />
     </wsdl:output>
      </wsdl:operation>
   </wsdl:binding>
   <wsdl:service name="AlbumService">
      <wsdl:documentation>Ladon generated service definition</wsdl:documentation>
      <wsdl:port name="AlbumService" binding="tns:AlbumService">
     <soap:address location="http://ladonize.org/python-demos/AlbumService/soap11" />
      </wsdl:port>
   </wsdl:service>
</wsdl:definitions> 
```

用 Fiddler 截获的答案（因此，它不是 NULL）：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:ns="urn:AlbumService" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
   <SOAP-ENV:Body SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
      <ns:listAlbumsResponse>
     <result>
        <item>
           <band>
          <album-titles>
             <item>Album Of The Year</item>
             <item>KING FOR A DAY - FOOL FOR A LIFETIME</item>
          </album-titles>
          <name>Faith No More</name>
           </band>
           <title>Album Of The Year</title>
           <songs>
          <item>Ashes To Ashes.mp3</item>
          <item>Mouth To Mouth.mp3</item>
          <item>Last Cup Of Sorrow [Sharam Versus Fnm Club Mix] [Bonus Track].mp3</item>
          <item>Paths Of Glory.mp3</item>
          <item>Pristina.mp3</item>
          <item>Light Up And Let Go [Bonus Track].mp3</item>
          <item>Helpless.mp3</item>
          <item>The Big Kahuna [Bonus Track].mp3</item>
          <item>She Loves Me Not.mp3</item>
          <item>Stripsearch.mp3</item>
          <item>Last Cup Of Sorrow.mp3</item>
          <item>Collision.mp3</item>
          <item>Home Sick Home.mp3</item>
          <item>She Loves Me Not [Spinna Crazy Dub Mix] [Bonus Track].mp3</item>
          <item>Last Cup Of Sorrow [Rammstein Mix] [Bonus Track].mp3</item>
          <item>Naked In Front of The Computer.mp3</item>
          <item>Got That Feeling.mp3</item>
          <item>Ashes To Ashes [Hardknox Alternative Mix] [Bonus Track].mp3</item>
           </songs>
        </item>
        <item>
           <band>
          <album-titles>
             <item>Paint The Sky With Stars - The Best Of Enya</item>
          </album-titles>
          <name>Enya</name>
           </band>
           <title>Paint The Sky With Stars - The Best Of Enya</title>
           <songs>
          <item>Watermark.mp3</item>
          <item>Boadicea.mp3</item>
          <item>Storms In Africa.mp3</item>
          <item>Book Of Days.mp3</item>
          <item>Caribben Blue.mp3</item>
          <item>The Celts.mp3</item>
          <item>Anywhere Is.mp3</item>
          <item>Shepherd Moons.mp3</item>
          <item>China Roses.mp3</item>
          <item>Marble Halls.mp3</item>
          <item>On My Way Home.mp3</item>
          <item>Ebudae.mp3</item>
          <item>The Memory Of Trees.mp3</item>
          <item>Paint The Sky With Stars.mp3</item>
          <item>Only If....mp3</item>
          <item>Orinoco Flow.mp3</item>
           </songs>
        </item>
        <item>
           <band>
          <album-titles>
             <item>Zitilites</item>
             <item>No Balance Palace</item>
             <item>Home Dead</item>
             <item>Travelogue</item>
             <item>Cruzential</item>
             <item>The Good Life</item>
          </album-titles>
          <name>Kashmir</name>
           </band>
           <title>The Good Life</title>
           <songs>
          <item>Gorgeous.mp3</item>
          <item>New Year's Eve.mp3</item>
          <item>Lampshade.mp3</item>
          <item>It's OK Now.mp3</item>
          <item>Graceland.mp3</item>
          <item>Miss You.mp3</item>
          <item>Mudbath.mp3</item>
          <item>Mom In Love, Daddy In Space.mp3</item>
          <item>Kiss Me Goodbye.mp3</item>
          <item>Make It Grand.mp3</item>
           </songs>
        </item>
        <item>
           <band>
          <album-titles>
             <item>The Wall CD2</item>
             <item>The Wall Part I</item>
          </album-titles>
          <name>Pink Floyd</name>
           </band>
           <title>The Wall CD2</title>
           <songs>
          <item>Nobody Home.mp3</item>
          <item>Waiting For The Worms.mp3</item>
          <item>Bring The Boys Back Home.mp3</item>
          <item>The Trial.mp3</item>
          <item>Is There Anybody Out There?.mp3</item>
          <item>Comfortably Numb.mp3</item>
          <item>Run Like Hell.mp3</item>
          <item>The Show Must Go On.mp3</item>
          <item>Vera.mp3</item>
          <item>In The Flesh.mp3</item>
          <item>Outside The Wall.mp3</item>
          <item>Hey You.mp3</item>
          <item>Stop.mp3</item>
           </songs>
        </item>
        <item>
           <band>
          <album-titles>
             <item>The Wall CD2</item>
             <item>The Wall Part I</item>
          </album-titles>
          <name>Pink Floyd</name>
           </band>
           <title>The Wall Part I</title>
           <songs>
          <item>The Happiest Days Of Our Lives.mp3</item>
          <item>Another Brick In The Wall (Part 1).mp3</item>
          <item>Goodbye Cruel World.mp3</item>
          <item>One Of The Turns.mp3</item>
          <item>In The Flesh?.mp3</item>
          <item>Empty Spaces.mp3</item>
          <item>The Thin Ice.mp3</item>
          <item>Goodbye Blue Sky.mp3</item>
          <item>Another Brick In The Wall (Part 2).mp3</item>
          <item>Another Brick In The Wall (Part 3).mp3</item>
          <item>Young Lust.mp3</item>
          <item>Mother.mp3</item>
          <item>Don't Leave Now.mp3</item>
           </songs>
        </item>
     </result>
      </ns:listAlbumsResponse>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-15T08:33:10.597

当 Ladon 0.8.1 仅提供 RPC/Encoded 时，.NET SOAP 客户端似乎默认需要 Document/Literal WSDL。我没有找到让 C# 客户端与 RPC/Encoded 一起工作的方法，因此我为 Ladon 开发了一个自定义接口（有关补丁，请参阅[https://bugs.launchpad.net/ladon/+bug/1096004](https://bugs.launchpad.net/ladon/+bug/1096004) ）提供文档/文字 WSDL。仅供参考，我遵循了本指南[http://wso2.com/library/knowledge-base/convert-rpc-encoded-wsdl-document-literal-wrapped-wsdl](http://wso2.com/library/knowledge-base/convert-rpc-encoded-wsdl-document-literal-wrapped-wsdl)。

更新：我的修复程序最近与 Ladon 0.8.2 一起上线（参见 [http://bazaar.launchpad.net/~ladon-dev-team/ladon/ladon/revision/105](http://bazaar.launchpad.net/~ladon-dev-team/ladon/ladon/revision/105)）。

# azure - 以编程方式配置 ACS

> ID：14143558
> 
> 赞同：3
> 
> 时间：2013-01-03T17:02:14.990
> 
> 标签：azure, acs

简单的问题 - 我们可以使用 PowerShell（或其他命令行工具）以编程方式配置 ACS 吗？看起来 PowerShell cmdlet 的旧 CodePlex 版本支持这一点，但后来的官方版本似乎没有任何可用的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T06:42:11.057

您可以通过多种方式与 ACS 进行交互：

*   直接用管理服务：http: [//msdn.microsoft.com/en-us/library/windowsazure/hh135143.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh135143.aspx)
*   通过使用 FluentACS 库：[https ://github.com/jrowies/FluentACS/blob/master/README.markdown](https://github.com/jrowies/FluentACS/blob/master/README.markdown)
*   通过使用**旧**的PowerShell cmdlet：http: [//blogs.msdn.com/b/alikl/archive/2011/05/18/manage-windows-azure-appfabric-access-control-service-acs-with-powershell.aspx](http://blogs.msdn.com/b/alikl/archive/2011/05/18/manage-windows-azure-appfabric-access-control-service-acs-with-powershell.aspx)

# objective-c - 获取 [NSURL cachePolicy]：在下载图像期间发送到实例的无法识别的选择器，AFNetworking

> ID：14143561
> 
> 赞同：7
> 
> 时间：2013-01-03T17:02:27.347
> 
> 标签：objective-c, ios, afnetworking

我的目的是尝试通过如下成功块获取下载图像的大小：

```
[imageView setImageWithURLRequest:[NSURL URLWithString:((ObjectA*)obj[indexPath.row]).imageUrl]
                placeholderImage:nil
                         success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {
                            CGFloat imageHeight = image.size.height;
                            CGFloat imageWidth = image.size.width;
                            NSLog(@"width of image is %f",imageWidth);
                            NSLog(@"height of image is %f",imageHeight);
                        }
                        failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error) {
                            ;
                        }  ]; 
```

但是，我遇到了如下所示的错误：

```
 *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSURL cachePolicy]: unrecognized selector sent to instance 0x1edb9e70' 
```

有谁知道这个错误的原因。如果您有任何想法，请提供帮助

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-03T17:09:36.010

该错误告诉您`cachePolicy`（这是一种`NSURLRequest`方法）正在`NSURL`对象上被调用。

问题是您将`NSURL`对象作为第一个参数而不是对象传递`NSURLRequest`。（我不熟悉这个 3rd 方 API，但文档似乎在[这里](http://engineering.gowalla.com/AFNetworking/Categories/UIImageView%28AFNetworking%29.html#//api/name/setImageWithURLRequest%3aplaceholderImage%3asuccess%3afailure%3a)）

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-03T17:13:23.793

问题在于此代码：

```
[imageView setImageWithURLRequest:[NSURL URLWithString:((ObjectA*)obj[indexPath.row]).imageUrl] 
```

的参数`setImageWithURLRequest:`是`NSURLRequest`，你正在传递`NSURL`。这就是它崩溃的原因。

将其更改为：

```
[imageViewsetImageWithURLRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:((ObjectA*)obj[indexPath.row]).imageUrl]] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T17:15:04.290

我想问题出在第一行

```
[imageView setImageWithURLRequest:[NSURL URLWithString:imageUrl] 
```

`setImageWithURLRequest`从签名看起来像期待“ **URLRequest** ”，而您正在传递一个**URL**。

`URLRequest`所以用 the创建一个`URL`并传递它，看看它是否有效

# jquery - 如何过滤必须具有多个类的元素

> ID：14143562
> 
> 赞同：0
> 
> 时间：2013-01-03T17:02:33.127
> 
> 标签：jquery, jquery-selectors

HTML：

```
<div class="scrollBlock" tabIndex="4">
        <ul id="dropdown-reg-phone-type">
            <li>
                <div class="header tzSelected">Home</div>
                <div class="optkey">0</div>
            </li>
            <li>
                <div class="header">Work</div>
                <div class="optkey">1</div>
            </li>
            <li>
                <div class="header">Cell</div>
                <div class="optkey">2</div>
            </li>
        </ul>
    </div> 
```

jQuery：

```
var $listItems = $('li');

var $selected = $listItems.filter('div.header.tzSelected'),
console.dir($selected);

if (!$selected.length) {
    console.log("selected doesn't exist");
} 
```

即使有一个具有 .tzSelected 类的 div，这也会返回“选定的不存在”。我猜过滤器设置不正确，但不知道为什么。`$listItems`是正确的; 然后从那里我需要找到`div`同时具有`header`和`tzSelected`类的。

console.dir 行显示了这一点： ![在此处输入图像描述](../Images/db43633c8d5e0c9ab45212d0b19009e0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:15:25.427

[`.filter()`](http://api.jquery.com/filter)直接作用于 中的`li`元素`$listItems`，而不是它们中的元素。如果您尝试选择他们的后代，则需要使用[`.find()`](http://api.jquery.com/find)：

```
var $selected = $listItems.find('div.header.tzSelected') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:19:47.657

对于您的特定情况，您应该能够完全使用选择器本身来完成它：

```
var $selected = $('li div.header.tzSelected'); 
```

# java - 将对象编组为 XML 会导致添加重复节点

> ID：14143565
> 
> 赞同：1
> 
> 时间：2013-01-03T17:02:47.903
> 
> 标签：java, jaxb, marshalling

我有一个需要编组为 XML 的对象。为此，我正在使用 JAXB。创建了生成的 XML 文件，但是我最终得到了重复的节点：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<order>
    <supplier_id>suppliername</supplier_id>
    <store_name>storename</store_name>
    <order_id>1234567890</order_id>
    <order_item>
        <order_item_id>0987654321</order_item_id>
        <item_state>Shipped</item_state>
        <item_state_date>2012-12-27T14:40:00.000-05:00</item_state_date>
        <carrier_code>NA</carrier_code>
        <carrier_name>CarrierName</carrier_name>
        <shipping_method>Expedited</shipping_method>
        <tracking_number>348134987124872734817324</tracking_number>
        <backorder_replacement_sku_price>0.0</backorder_replacement_sku_price>
    </order_item>
    <order_item>
        <order_item_id>0987654321</order_item_id>
        <item_state>Shipped</item_state>
        <item_state_date>2012-12-27T14:40:00.000-05:00</item_state_date>
        <carrier_code>NA</carrier_code>
        <carrier_name>CarrierName</carrier_name>
        <shipping_method>Expedited</shipping_method>
        <tracking_number>348134987124872734817324</tracking_number>
        <backorder_replacement_sku_price>0.0</backorder_replacement_sku_price>
    </order_item>
    .... 
```

我只需要第一个`<order_item>`节点，随后的节点错误地存在。

我的代码如下：

```
JAXBContext context = JAXBContext.newInstance(classname.class.getPackage().getName());
Marshaller marsheller = context.createMarshaller();

Order order = new Order();
OrderItem orderItem = new OrderItem();

...Business logic related to our ERP system...
//We start a loop here to iterate over search results. The goal is to have one XML file per search row returned. No knowledge of the ERP system is required. 

for (SearchRow row : results.getSearchRowList().getSearchRow()) {   
    //we capture our variables from the search results here and build our order and orderItem objects with them. 

    order.setSupplierId("suppliername");
    order.setStoreName("storename");
    order.setOrderId(orderNumber);
    orderItem.setOrderItemId(orderItemId);
    orderItem.setItemState(StatusCodeType.SHIPPED);
    orderItem.setItemStateDate(date2);
    orderItem.setCarrierCode("NA");
    orderItem.setCarrierName(carrierName);
    orderItem.setShippingMethod(shippingMethod);
    orderItem.setTrackingNumber(trackingNumber);

    order.getOrderItem().add(orderItem);
    File f = new File("tempFiles/" + order.getOrderId() + ".xml");
    marsheller.marshal(order, f);
} 
```

我认为问题在于循环，但是如果我在从对象本身创建对象*后记录所有变量，则只会显示 orderItem 结果而不是多个 orderItems。*

谁能指出我偏离轨道的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T17:06:18.990

你要么需要

*   创建一个`new Order()`和`new OrderItem()`每次迭代循环或
*   创建and实例后立即将 移到`order.getOrderItem().add(orderItem);`循环外。`Order``OrderItem`

您当前的逻辑是`OrderItem`每次循环都将相同的实例添加到列表中，因此第一次迭代您将获得一个`<order_item>`元素，第二次迭代您将获得两个相同的元素，第三次迭代三个，等等。

# sql - jdbcTemplate 查询行映射日期列一般

> ID：14143566
> 
> 赞同：0
> 
> 时间：2013-01-03T17:02:49.323
> 
> 标签：sql, spring, date, jdbc

我有一个带有日期列的数据库，当我执行查询时，我将每一行作为列名到列值的映射。我的问题是我不知道如何一般地获取日期列。

我现在只是想将其转换为字符串，然后将其解析为 java.util.Date，但是在转换时出现此错误，否则我不确定如何获取数据？

此代码也应该适用于 Sybase 和 Oracle 数据库，因此非常感谢通用答案！

```
private static final String USER_QUERY = "SELECT USERNAME, PASSWORD, SUSPEND_START_DATE, SUSPEND_END_DATE FROM USERS";

public User readUsers(Subjects subjects) throws SubjectReaderException {
    /* Perform the query */
    List<User> users = new ArrayList<User>();
    List<Map<String, Object>> rows = jdbcTemplate.queryForList(USER_QUERY);
    /* Map the returned rows to our User objects */
    for (Map<String, Object> row : rows) {
        String username = (String) row.get("USERNAME");
        /* Check if the user is suspended */
        if(checkUserIsSuspended(row)){
            continue;
        }
        User user = new User();
        user.setUsername(username);
        user.setPassword((String) row.get("PASSWORD"));
        users.add(user);
    }
    return users;
}

private boolean checkUserIsSuspended(Map<String, Object> row) throws SubjectReaderException {
    final String startDateString = (String) row.get("SUSPEND_START_DATE"); // this errors
    if (startDateString != null) {
        final String endDateString = (String) row.get("SUSPEND_END_DATE");
        if (null != endDateString) {
            return checkDate(startDateString, endDateString); // this just compares the current date etc
        }
        /* Return true if the Suspended start date is not null, and there is no end date column, or it is null */
        return true;
    }
    /* Return false if the Suspended start date String is null - i.e. they have not been suspended */
    return false;
} 
```

错误：

```
java.lang.ClassCastException: com.sybase.jdbc3.tds.SybTimestamp cannot be cast to java.lang.String 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:30:02.060

它总是会出现此错误，因为您将对象`com.sybase.jdbc3.tds.SybTimestamp`转换为字符串。

为什么不直接在 SQL 中进行此检查而不是创建过滤器？就像是

```
SELECT USERNAME, PASSWORD, SUSPEND_START_DATE, SUSPEND_END_DATE
    FROM USERS WHERE SUSPEND_START_DATE >= ? 
```

现在您可以使用`queryForList`当前时间作为参数传递。

避免这种直接强制转换的另一种方法是使用[RowMapper](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/jdbc/core/RowMapper.html)。这样您就可以使用[ResultSet#getDate(String)](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#getDate%28java.lang.String%29) 并且不需要转换任何内容，因为 JDBC 驱动程序会为您处理转换:)

# c++ - 使用模板参数设置特定成员

> ID：14143567
> 
> 赞同：3
> 
> 时间：2013-01-03T17:02:50.077
> 
> 标签：c++, templates

假设我有这个：

```
 struct myStruct {
    int A;
    int B;
} 
```

是否可以通过这样的模板参数设置特定成员？

```
void setTo10<?? member>(myStruct& obj) {
obj.member = 10;
} 
```

//用法：

```
setTo10<"member A">(obj); 
```

我知道宏是可能的，但是模板呢？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T17:08:28.630

像这样的东西？

```
struct myStruct {
  int A;
  int B;
};

template <typename T, typename V>
void set(T& t, V T::*f, V v)
{ t.*f = v; }

int main()
{
  myStruct m;
  set(m, &myStruct::A, 10);
  std::cout << m.A << '\n';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:27:14.047

此解决方案允许通过编译时索引选择成员（可以通过另一个编译时表达式计算）：

```
struct myStruct {
    int A;
    int B;
};

template <int n1, int n2>
struct SetOnEqual
{
    static void set(int& var, int val)
    {} // default: do nothing
};

template<int n>
struct SetOnEqual<n, n>
{
    static void set(int& var, int val)
    {
        var = val;
    }
};

template <int n>
void setTo10(myStruct& s)
{
    SetOnEqual<n,0>::set(s.A, 10);
    SetOnEqual<n,1>::set(s.B, 10);
} 
```

然后下面的代码

```
#include <stdio.h>
int main()
{
    myStruct s;
    s.A = s.B = 0;

    setTo10<0>(s); // sets s.A
    printf("s=(%d,%d)\n", s.A, s.B);

    setTo10<1>(s); // sets s.B
    printf("s=(%d,%d)\n", s.A, s.B);

    return 0;
} 
```

给出输出

```
s=(10,0)
s=(10,10) 
```

# ruby - 为什么我需要 Socket::MSG_* Ruby 中的常量？

> ID：14143568
> 
> 赞同：0
> 
> 时间：2013-01-03T17:02:59.790
> 
> 标签：ruby, sockets, network-programming, udp

我想开发一个通过 UDPSockets 通信的 p2p 应用程序。我刚刚开始阅读文档，但我无法理解 ruby​​ 的套接字管理。

具体来说，可以将这些“标志”（正如 ruby​​-doc 所称的那样）添加到每个发送调用中。(http://www.ruby-doc.org/stdlib-1.9.3/libdoc/socket/rdoc/UDPSocket.html#method-i-send)

但是我什么时候使用这些以及如何使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T19:01:07.370

您可能会知道是否需要使用它们，因为您将有一个示例或一些引用它们的文档。

一些更常用的选项`recvfrom`是：`MSG_OOB`处理带外数据，`MSG_PEEK`查看传入消息而不将其出队，并`MSG_WAITALL`等待接收缓冲区填满。

这些确实是非常边缘的情况，因此您可能永远不会看到使用过的。

这些标志来自所基于的低级`recv`调用`Socket`。

# java - 使用 display-tag 库制作 hfer 标签

> ID：14143569
> 
> 赞同：0
> 
> 时间：2013-01-03T17:02:59.683
> 
> 标签：java, displaytag

我有以下代码，它使用 displaytag 库根据列表“dataList”中的数据生成一个表。这工作正常。

```
<display:table  cellpadding="0" cellspacing="0" partialList="true" size="totalSearchResults" id="product-table" name="dataList" pagesize="6" export="false" requestURI="/edit">

<display:column  property="firstname" title="First Name"  sortable="true"/>
<display:column property="lastname" title="Last Name" sortable="true"/>

<display:column class="options-width">
    <a href="delete?emp="${empno}>Delete</a>
</display:column>
<display:setProperty name="paging.banner.placement" value="bottom" />
</display:table> 
```

我需要通过将员工编号附加为查询字符串来创建 href，如图所示。但在执行代码后，url 显示为 ....delete?emp= 而没有在其中附加员工编号。谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T23:53:35.323

更改
`<a href="delete?emp="${empno}>Delete</a>`
为
`<a href="delete?emp=${empno}">Delete</a>`

# php - 选择和更新mysql相同的查询php

> ID：14143570
> 
> 赞同：0
> 
> 时间：2013-01-03T17:03:00.857
> 
> 标签：php, mysql, mysqli

您好，我正在尝试在一个查询中结合 UPDATE 和 SELECT 语句。

这是我试过的。但没有用。

```
$this->$db2->query('
  UPDATE users
  SET total = (total - (
    SELECT floatingnumber
    FROM posts
    WHERE post_id = "'.$this->post_id.'"
    LIMIT 1
  ))
  WHERE id = "'.$this->post_user->id.'"
  LIMIT 1
'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:33:42.883

试试这个有`INNER JOIN`, 没有`SELECT`

```
UPDATE users u 
INNER JOIN posts p
ON  // realationship between tables
 SET total = total - p.floatingnumber

WHERE p.post_id = "'.$this->post_id.'"

AND  u.id = "'.$this->post_user->id.'"

 LIMIT 1 
```

# php - xdebug 2.2.1 和 php 5.4.4

> ID：14143575
> 
> 赞同：0
> 
> 时间：2013-01-03T17:03:15.147
> 
> 标签：php, zend-framework, build, mamp, xdebug

我正在尝试在我的 Mac 上安装 Xdebug 2.2.1。我安装了 MAMP，它运行 PHP 5.4.4。我遇到的问题是我无法编译源代码。我尝试了一些建议，例如

[无法构建 xdebug](https://stackoverflow.com/questions/14132319/failing-to-build-xdebug)

但它给出的解决方案并不正确，因为它使用 Xcode php 平台（5.3.x 版本）来构建 Xdebug。我也试过

[无法在 php 5.4.4 上安装 Xdebug](https://stackoverflow.com/questions/13323040/cant-install-xdebug-on-php-5-4-4)

但是 php sdk 不允许我构建 Xdebug，它会引发一些我无法管理的错误。

有人成功为 PHP 5.4.4 构建 Xdebug 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:09:25.060

您可能想查看 Liip PHP 包。它的安装非常简单，并且包含 XDebug 扩展。

[http://php-osx.liip.ch/](http://php-osx.liip.ch/)

# iphone - iOS - 填充核心数据数据库

> ID：14143576
> 
> 赞同：1
> 
> 时间：2013-01-03T17:03:18.990
> 
> 标签：iphone, ios, ipad, core-data

我在我的应用程序中广泛使用了核心数据。通常我需要使用预先填充的数据库提交申请。

我通常会创建无数行代码来填充数据库，然后从应用程序目录中提取它并将其包含在包中。有没有简单的方法可以做到这一点？有什么方法可以使用例如 CSV 文件和外部应用程序填充在 Xcode 上创建的核心数据数据库？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T17:37:34.443

通常的方法是在第一次启动时创建条目。如果要从 CSV 文件导入数据，则需要一个解析器。我可以推荐这个：[https ://github.com/davedelong/CHCSVParser](https://github.com/davedelong/CHCSVParser)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:12:58.117

使用 Xcode 没有任何简单的方法可以做到这一点。

基本上我在这种情况下所做的：我构建了第二个目标专用于池化数据库并创建具有相对于文件系统中的工作区的固定持久存储 url 的对象。

# rest - Bing Maps REST 无法使用控制台应用程序绘制多边形

> ID：14143579
> 
> 赞同：0
> 
> 时间：2013-01-03T17:03:32.363
> 
> 标签：rest, console-application, bing-maps, polygon

作为一个控制台应用程序，我正在使用 Bing 地图、纬度/经度和图钉创建地图。另存为.jpg。一切都很好。但是，现在，我想在所述地图上绘制一个多边形。看来这可能是不可能的；我找不到答案。通过网页动态似乎是唯一的方法；我需要通过控制台应用程序来实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T23:51:14.670

REST 服务不支持自定义多边形和自定义折线。

由于您在控制台应用程序中并且将图像保存为 JPG 文件，因此您可以使用 GDI 或其他技术将自己的内容绘制到图像上以直接操作图像。目前，没有其他办法。

# r - 在多个数据帧上执行相同操作的最有效方法是什么？

> ID：14143580
> 
> 赞同：3
> 
> 时间：2013-01-03T17:03:35.227
> 
> 标签：r, dataframe

如果这是重复的，我很抱歉，我在任何地方都找不到它..

假设我有一堆数据框，我想将它们的所有列名都转换为小写。最有效的方法是什么？这很简单，`assign`但`get`我想知道是否有更快的方法？

如果我刚刚得到`ChickWeight`and `mtcars`，那么非动态操作将只是..

```
names( ChickWeight ) <- tolower( names( ChickWeight ) )
names( mtcars ) <- tolower( names( mtcars ) ) 
```

..然后我将如何使这个过程动态化，但我想知道是否有更有效的解决方案？

```
# column headers contain uppercase
head(ChickWeight)

# start with a vector of data frame names..
# this might contain many, many data frames
tl <- c( 'ChickWeight' , 'mtcars' )

# loop through each data frame name..
for ( i in tl ){
    # save it to a temporary object name
    x <- get( i )

    # main operations here..

    # perform the operation(s) you want to run on each data frame
    names( x ) <- tolower( names( x ) )

    # ..end of main operations

    # assign the updated data frame to overwrite the original data frame
    assign( i , x )
}

# no longer contains uppercase
head(ChickWeight) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:09:47.740

我认为你不可能通过改变方法来获得很大的速度。一种更**惯用**的方法是将所有数据帧存储在一个列表中，并使用类似 `

```
dlist <- list(mtcars,ChickWeight) 
```

（或者）

```
namevec <- c("mtcars","ChickWeight")
dlist <- lapply(namevec,get) 
```

然后：

```
dlist <- lapply(dlist,function(x) setNames(x,tolower(names(x)))) 
```

...但当然，为了使用这种方法，您必须承诺将数据框称为列表元素，这反过来会影响您分析的整个结构。如果您不想这样做，那么我认为没有什么比您的`get`/`assign`方法更好的了。

如果要将列表的值分配回全局环境，您可以执行以下操作：

```
invisible(mapply(assign,namevec,dlist,MoreArgs=list(envir=.GlobalEnv))) 
```

我想强调的是，这**不一定**比原始帖子中介绍的简单方法更快或更透明。

# html - 将不同的样式规则应用于不同的元素

> ID：14143585
> 
> 赞同：2
> 
> 时间：2013-01-03T17:04:02.573
> 
> 标签：html, css, css-selectors, html-lists

我有一堆彼此并排堆叠的无序列表元素。为此，通常应用的样式规则是：

```
#slide ul,li{
float:left;
list-style-type:none;
} 
```

我需要介绍另一个无序列表的元素，它们的行为方式与`ul`and`li`元素通常的行为方式相同；堆叠在一起但没有任何列表样式类型，并实现此目的：

```
.stack ul,li{
list-style-type:none
}
​ 
```

问题是 ul,li 的堆栈类的样式不适用，并且元素堆叠在一起，因为它们在 #slide 的 ul,li 的情况下。

在这个 js fiddle 上检查一下：

[http://jsfiddle.net/G7JHK/](http://jsfiddle.net/G7JHK/)

我的选择器错了吗？

PS：我已经尝试过使用 class/id 以及两者的各种组合，但结果总是相同的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T17:11:48.270

由于选择器中的逗号，您将 float left 应用于所有 li 元素。尝试这样的事情：

```
<ul class="stack">
<li>element 1</li>
<li>element  2</li>
</ul>
<br/>
<ul id="slide">
<li>element 3</li>
<li>element  4</li>
</ul>

#slide li{
 display:inline;   
} 
```

这个 css 将使 div 'slide' 中的所有列表元素连续显示，所有其他列表元素将继续正常显示。它使您不必使用两个不同的类:) ​</p>

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T17:08:44.190

你的 CSS 应该是这样的

```
ul.stack li{
  display:block;
}
ul#slide li{
  float:left;
} 
```

​</p>

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T17:19:30.713

你的选择器有问题。同一元素的类或 id 永远不会被空格分隔。它们应该没有空格，孩子用空格隔开，但不会在那里使用“，”。所以你可以在你的代码中试试这个

```
ul.stack li{
display:block;
}
ul#slide li{
float:left;
} 
```

此外，您必须先放置 HTML 标记名称，然后再放置前面的属性。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-03T17:08:51.543

我想你想要这样的东西：

```
ul.stack li{
  display:block;
}
ul#slide li{
  float:left;
} 
```

看看选择器。你想选择一个带有类堆栈（ul.stack）的ul并找到它的子li。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-03T17:37:26.537

问题是您选择了作为 slide 的后代的 ul，但是您的 ul 的 id 为 slide，所以它不起作用，因为没有 ul 的容器的 id 为`slide`。此外，通过放置`,li`您正在选择页面上的所有列表项。您想要拥有`#slide li`，它只会选择容器 id 为 的列表项`slide`。你不需要，`#slide ul`所以你的最终代码应该是

```
#slide li {
float:left;
} 
```

[http://jsfiddle.net/G7JHK/6/](http://jsfiddle.net/G7JHK/6/)

作为替代方案，您可以使用`ul:nth-of-type(2)`而不是 id 来节省 html 中的一些空间 [http://jsfiddle.net/G7JHK/7/](http://jsfiddle.net/G7JHK/7/)

# asp.net - 当页面及其母版页不在同一个目录中时，ajax 功能是否会受到影响？

> ID：14143598
> 
> 赞同：0
> 
> 时间：2013-01-03T17:04:53.067
> 
> 标签：asp.net, ajax

这些应用程序有多个项目，例如时间表、工资单和税收，都依赖于同一个母版页。**MasterPage**位于完全不同的目录中。问题是**Ajax**从来没有工作过。如果那是 Ajax 不工作的原因，现在我开始。

母版页上有一个 ScriptManager 控件。当我们在页面中尝试 updatepanel 时，什么也没有发生。

我创建了一个小应用程序并将**ScriptManager**放在母版页中。有效。

当页面及其母版页不在同一个目录中时，ajax 功能是否会受到影响？只是为了排除一些原因，以便我可以专注于其他地方。

# 编辑

项目路径可以是这样的：

```
C:\inetpub\wwwroot\My_Application\My_Project 
```

虽然母版页可能位于以下目录中

```
C:\inetpub\wwwroot\controls\My_MasterPage.Master 
```

谢谢帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:04:35.927

内容页面和母版页面可以位于不同的目录中。Ajax 不会受到影响，因为它们位于不同的目录中。

# mysql - mysql + hibernate在不同环境下的错误不同

> ID：14143599
> 
> 赞同：0
> 
> 时间：2013-01-03T17:04:54.527
> 
> 标签：mysql, hibernate

在一个重复条目的环境中，我遇到了这样的异常

> 引起：com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException：键 3 的重复条目“管理员”

在另一个环境中，我得到它喜欢

> 引起：com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException：重复条目 'admin' 键 'username_UNIQUE'

可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:34:13.710

如您所见，它们的含义相同。似乎mysql人已经更改了错误消息。在新版本中，他们可能试图让他们的信息更容易理解和缩小范围。但正如您所看到的，他们没有更改异常类名称。他们只更改了解释性消息。因此，如果您想用谷歌搜索您的异常，您最好使用异常类名称而不是消息。

在这种情况下，第一条消息直接指向它面临违规的键的“值”，第二条消息指向键“列”。

# google-maps-api-3 - 如何在 Leaflet JS 中使用来自 Google Geocoder 的 Viewport？

> ID：14143600
> 
> 赞同：2
> 
> 时间：2013-01-03T17:04:55.003
> 
> 标签：google-maps-api-3, geocoding, leaflet

我已经成功设置了一个 Leaflet JS 地图，它使用谷歌地图地理编码器来平移到一个地理编码的地址。但我也尝试使用“map.fitBounds”从视口获取适当的缩放级别，但它似乎不起作用。我正在使用的代码是：

```
map.panTo([results[0].geometry.location.lat(),results[0].geometry.location.lng()]);
   map.fitBounds([[results[0].geometry.viewport.southwest.lat(), results[0].geometry.viewport.southwest.lng()],[results[0].geometry.viewport.northeast.lat(), results[0].geometry.viewport.northeast.lng()]]); 
```

请参阅此处的示例：http: [//chrismccreath.hostzi.com/geocode_test.html](http://chrismccreath.hostzi.com/geocode_test.html)

如何修复它以使其缩放到谷歌地图地理编码器结果返回的适当视口？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T20:20:06.620

没有类似的属性`results[0].geometry.viewport.southwest/northeast`（我猜你在控制台内观看网络流量，但你看到的不会直接传递给回调函数）。要获得西南/东北，请使用`getSouthWest()`和`getNorthEast()`的方法`google.maps.LatLngBounds`。

`results[0].geometry.viewport`是 google.maps.LatLngBounds-object，但不能直接在 Leaflet 中使用。

您必须将其“转换”为数组或 Leaflet.LatLngBounds 对象。

这应该有效：

```
map.fitBounds([
               [results[0].geometry.viewport.getSouthWest().lat(),
                results[0].geometry.viewport.getSouthWest().lng()],
               [results[0].geometry.viewport.getNorthEast().lat(),
                results[0].geometry.viewport.getNorthEast().lng()]
              ]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T17:27:30.370

DrMolle 指出传单地图对象不是 Google Maps API v3 对象（在您引用的另一个问题中）。这有效：

```
 map.panTo([results[0].geometry.location.lat(),results[0].geometry.location.lng()]);
   map.fitBounds([[results[0].geometry.viewport.getNorthEast()],
                  [results[0].geometry.viewport.getSouthWest()]]); 
```

[工作示例](http://www.geocodezip.com/v3_leaflet_map_geocode_test.html)

如[文档](https://developers.google.com/maps/documentation/javascript/reference#GeocoderGeometry)中所述：

*   results[].geometry.location 是一个[google.maps.LatLng](https://developers.google.com/maps/documentation/javascript/reference#LatLng)， panTo 需要它作为参数。
*   results[].geometry.viewport 是[google.maps.LatLngBounds](https://developers.google.com/maps/documentation/javascript/reference#LatLngBounds)， fitBounds 需要作为参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T23:27:56.947

感谢您发布工作示例。它有很大帮助。但是，它并没有立即对我起作用，必须进行一些调整才能使其起作用。

```
function codeAddress() {
   var address = document.getElementById('address').value;
   geocoder.geocode( {'address': address}, function(results, status) {
   if (status == google.maps.GeocoderStatus.OK) {
        if (results[0].geometry.viewport) {
            map.fitBounds([[results[0].geometry.viewport.getSouthWest().lat(),
                          results[0].geometry.viewport.getSouthWest().lng()],
                        [results[0].geometry.viewport.getNorthEast().lat(),
                         results[0].geometry.viewport.getNorthEast().lng()]]);
            map.setZoom(18);
        } else if (results[0].geometry.bounds) {
            map.fitBounds([[results[0].geometry.bounds.getSouthWest().lat(),
                     results[0].geometry.bounds.getSouthWest().lng()],
                    [results[0].geometry.bounds.getNorthEast().lat(),
                     results[0].geometry.bounds.getNorthEast().lng()]]);
        } else { // give up, pick an arbitrary zoom level
            map.panTo(results[0].geometry.location);
            map.setZoom(15);
      }
    } else {
      $('#result').html('Geocode was not successful for the following reason: ' + status);
    }
  });
} 
```

只是想如果其他人无法弄清楚如何让它工作，我会发布它。

再次感谢！

# java - 循环遍历来自 javabean 的属性

> ID：14143602
> 
> 赞同：0
> 
> 时间：2013-01-03T17:05:10.620
> 
> 标签：java, jsf, jsf-2, jstl, javabeans

我想在 JavaServer 页面上的表格中打印我的所有产品，但我的 jstl 代码有问题。

我的模型产品：

```
public final class Product
{
    private int id;
    private String description;    
    private Double price;    
    private String categoryName;
... 
```

我的 JavaBean 产品：（创建此 bean 时，它填充了我模型中的产品）

```
@ManagedBean(name = "productsBean")
@RequestScoped
public class Products implements Serializable {

    private List<Product> producten;
    @ManagedProperty(value = "#{applicationBean}")
    private ApplicationBean applicationBean;

    public Producten() {

        Store store = applicationBean.getStore();

    for (String c : store.getCategories()) {
        for(model.Product p : store.getProductsOfCategory(c)){
            beans.Product product = new Product();
            product.setId(p.getId());
            product.setDescription(p.getDescription());
            product.setCategoryName(p.getCategoryName());
            product.setPrice(p.getPrice());
        producten.add(product);
        }

    }                
    } 
```

我的 JavaBean 产品：

```
@ManagedBean(name= "productBean")
@RequestScoped
public class Product implements Serializable{

    @ManagedProperty(value = "#{applicationBean}")
    private ApplicationBean applicationBean;

     private int product_id;
    private String description;    
    private Double price;    
    private String categoryName; 
```

在我的 JavaServer Page 我想要这样的东西，但是：

```
 <c:forEach var="product" items="${productsBean.products}">
                <tr>
                    <td>${product.description}</td>
                </tr>
            </c:forEach> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:10:48.970

如果作用域中尚不存在 JSF 托管 bean，则旧版 JSP 表达式`${}`不会自动创建它们。您需要 JSF 表达式`#{}`。更重要的是，您应该*停止*在 JSF 页面中使用旧的 JSP 表达式`${}`，以避免将来出现混淆和维护麻烦。JSF 表达式的`#{}`作用完全相同，甚至更多（即，自动创建 JSF 托管 bean 并通过输入组件设置模型值）。

```
<table>
    <c:forEach var="product" items="#{productsBean.products}">
        <tr>
            <td>#{product.description}</td>
        </tr>
    </c:forEach>
</table> 
```

### 也可以看看：

*   [JSP EL、JSF EL 和 Unified EL 的区别](https://stackoverflow.com/questions/4812755/difference-between-jsp-el-jsf-el-and-unified-el)

* * *

**与具体问题**无关**`<h:dataTable>`，您是否考虑过改用？它使您免于摆弄松散的 HTML 、`<table>`、`<tbody>`和`<tr>`标签。`<th>``<td>`**

 **```
<h:dataTable value="#{productsBean.products}" var="product">
    <h:column>#{product.description}</h:column>
</h:dataTable> 
```

### 也可以看看：

*   [为实体创建主从页面，如何链接它们以及选择哪个 bean 范围](https://stackoverflow.com/questions/8459903/jsf-application-correct-use-of-session-scope/8464636#8464636)——只是代码示例

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-04T10:46:11.970

您好，您是否导入了 jsf jsf core 和 html 的 TLD 文件

```
<f:view>
<h:form>
<h:dataTable value="#{productsBean.products}" var="product">
<h:column>#{product.description}</h:column>  
</h:dataTable> 
```

试试这样谢谢**

# shell - 减去特定格式的日期

> ID：14143603
> 
> 赞同：0
> 
> 时间：2013-01-03T17:05:15.620
> 
> 标签：shell, date, subtraction

我一直在寻找解决我的 shell 日期减法问题的方法，但没有任何乐趣，所以就到这里了。我有一个日期格式，例如 %m%d%H%M%S，即“0102231203”和第二个 %Y%m%d%H%M%S，我可以从第二个中取出一年并执行正常减法，但是当它超过一天时，时间不正确就会成为问题。这是我迄今为止尝试过的

BTT=0102234500

TPP=0102233635（去掉年份后）

BT=`date -d ${BTT}`

TP=`date -d ${TPP}`

和

BT=`date -d $BTT +%m%d%H%M%S`

TP=`date +%m%d%H%M%S -d ${TPP}`

日期：无效日期“0102234500”

日期：无效日期“0102233635”

BT=`date -d @${BTT} +%m%d%H%M%S`

TP=`date +%m%d%H%M%S -d @${TPP}`

奇怪的输出

0329071355

0329072820

BT=`date -d @${BTT}`

TP=`date -d @${TPP}`

1973 年 3 月 29 日星期四 07:13:55 BST

1973 年 3 月 29 日星期四 07:28:20 BST

甚至将其更改为将年份添加到两者中

BTT=20130102234500

TPP=20130102233635

BT=`date -d @${BTT}`

TP=`date -d @${TPP}`

7 月 19 日星期五 08:53:55 GMT 639867

7 月 19 日星期五 09:08:20 GMT 639867

我该如何解决这个问题。tnx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:41:02.193

date 的 -d 选项接受人类可读的字符串，所以如果你有完整的日期，你可以这样做：

```
me@server:/tmp$ BTT=`date +"%Y-%m-%d %H:%M:%S"`
me@server:/tmp$ TPP=`date +"%Y-%m-%d %H:%M:%S"`
me@server:/tmp$ echo $((`date -d "$TPP" +%s`-`date -d "$BTT" +%s`))
3 
```

使用您的数据：

```
me@server:/tmp$ BTT="2013-01-02 23:45:00"                          
me@server:/tmp$ TPP="2013-01-02 23:36:35"                          
me@server:/tmp$ echo $((`date -d "$BTT" +%s`-`date -d "$TPP" +%s`))
505 
```

以秒为单位的结果。

# c++ - 使用 ptrace 时 mmap 的返回值

> ID：14143604
> 
> 赞同：0
> 
> 时间：2013-01-03T17:05:15.573
> 
> 标签：c++, linux, return, mmap, ptrace

我正在学习如何使用 ptrace，但遇到了一个奇怪的问题：

我写了一个程序：

```
#include <cstdio>
#include <sys/mman.h>
#include <string.h>
#include <errno.h>

int main()
{
    long x=(long)mmap(0,-235,2,34,-1,0);
    printf("Child: x=%ld (",x);
    for(int i=31;i>=0;i--) printf((x&(1<<i))?"1":"0");
    printf(")\n");
    printf("Child errno: %s\n",strerror(errno));
    return 0;
} 
```

它只是使用错误的参数进行 mmap 系统调用。然后它打印返回值（也是二进制）和errno。

这里我有这个程序执行后的输出：

```
Child: x=-1 (11111111111111111111111111111111)
Child errno: Cannot allocate memory 
```

我用 strace 运行它：

```
execve("./nic.e", ["./nic.e"], [/* 35 vars */]) = 0
uname({sys="Linux", node="dom", ...})   = 0
brk(0)                                  = 0x9237000
brk(0x9237cd0)                          = 0x9237cd0
set_thread_area({entry_number:-1 -> 6, base_addr:0x9237830, limit:1048575, seg_32bit:1, contents:0, read_exec_only:0, limit_in_pages:1, seg_not_present:0, useable:1}) = 0
brk(0x9258cd0)                          = 0x9258cd0
brk(0x9259000)                          = 0x9259000
mmap2(NULL, 4294967061, PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = -1 ENOMEM (Cannot allocate memory)
fstat64(1, {st_mode=S_IFCHR|0620, st_rdev=makedev(136, 0), ...}) = 0
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb7798000
write(1, "Child: x=-1 (1111111111111111111"..., 47Child: x=-1 (11111111111111111111111111111111)
) = 47
write(1, "Child errno: Cannot allocate mem"..., 36Child errno: Cannot allocate memory
) = 36
exit_group(0)                           = ? 
```

并且 strace 告诉这个错误的 mmap 返回 -1 并带有错误 ENOMEM。

到现在一切正常。

这是我的 ptrace 代码（我剪掉了所有不需要的东西）：

```
#include <cstdio>
#include <cstdlib>
#include <unistd.h>
#include <sys/resource.h>
#include <sys/time.h>
#include <sys/types.h>
#include <sys/ptrace.h>
#include <sys/user.h>
#include <sys/wait.h>
#include <sys/syscall.h>
#include <sys/reg.h>
#include <errno.h>
#include <string.h>
#include <fcntl.h>

int main(int argc,char**argv)
{
    int pid=fork();
    if(!pid)
    {
        ptrace(PTRACE_TRACEME,0,NULL,NULL);
        execve("nic.e",NULL,NULL);
        exit(1);
    }

    while(true)
    {
        int status;
        waitpid(pid,&status,0);

        if(WIFEXITED(status)) return 0;

        int signal;

        if(WIFSTOPPED(status))
        {
            signal=WSTOPSIG(status);
        }

        if(WIFSIGNALED(status)) return 0;

        if(signal==SIGTRAP)
        {
            user_regs_struct regs;
            ptrace(PTRACE_GETREGS,pid,NULL,&regs);

            if(regs.orig_eax==__NR_mmap2)
            {
                static bool mmap_back=false;
                if(!mmap_back) mmap_back=true;
                else
                {
                    mmap_back=false;
                    long x=regs.eax;
                    printf("mmap return: %ld (",x);
                    for(int j=31;j>=0;j--) printf((x&(1<<j))?"1":"0");
                    printf(")\n");
                }
            }
        }
        ptrace(PTRACE_SYSCALL,pid,NULL,NULL);
    }
    return 0;
} 
```

它应该打印与子打印相同的东西——返回 mmap2 系统调用的值。

但这是输出：

```
mmap return: -12 (11111111111111111111111111110100)
mmap return: -1216753664 (10110111011110011101000000000000)
Child: x=-1 (11111111111111111111111111111111)
Child errno: Cannot allocate memory 
```

为什么 mmap 返回 -12？我是否错误地捕获了返回值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:22:34.157

在 32 位 x86 linux 上，%eax 包含返回值或错误时的否定错误值。

See e.g. [4.4](http://www.win.tue.nl/~aeb/linux/lk/lk-4.html) or [3.3 and 3.4](http://www.int80h.org/bsdasm/#return-values).

A return value of -12 from the syscall means that the function failed and errno should be set to 12, which at least on my system matches `ENOMEM`.

It appears that strace is helpfully translating this for you. If you want your application to behave as strace, you should perform a test and translation similar to the one in [4.4](http://www.win.tue.nl/~aeb/linux/lk/lk-4.html):

```
if ((unsigned long)(x) >= (unsigned long)(-2048)) {
    printf("syscall failed. errno = %ld\n", -(res));
} 
```

# .htaccess - Joomla htaccess 重定向到移动网站

> ID：14143605
> 
> 赞同：0
> 
> 时间：2013-01-03T17:05:17.493
> 
> 标签：.htaccess, joomla2.5

我试图让这个 joomla 网站在移动设备上使用时重定向到一个名为 mobile.backuptoweb.co.uk 的子域。但我也想保留现有的重写规则，确保所有用户都被重定向到 www。url 和尾随 / 被删除。

目前它只是在移动设备上查看时重定向到无限循环。

访问：

```
##
# @package      Joomla
# @copyright    Copyright (C) 2005 - 2012 Open Source Matters. All rights reserved.
# @license      GNU General Public License version 2 or later; see LICENSE.txt
##

## Can be commented out if causes errors, see notes above.
Options +FollowSymLinks

## Mod_rewrite in use.

RewriteEngine On

## Begin - Rewrite rules to block out some common exploits.
# If you experience problems on your site block out the operations listed below
# This attempts to block the most common type of exploit `attempts` to Joomla!
#
# Block out any script trying to base64_encode data within the URL.
RewriteCond %{QUERY_STRING} base64_encode[^(]*\([^)]*\) [OR]
# Block out any script that includes a <script> tag in URL.
RewriteCond %{QUERY_STRING} (<|%3C)([^s]*s)+cript.*(>|%3E) [NC,OR]
# Block out any script trying to set a PHP GLOBALS variable via URL.
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
# Block out any script trying to modify a _REQUEST variable via URL.
 RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})
# Return 403 Forbidden header and show the content of the root homepage
RewriteRule .* index.php [F]
#
## End - Rewrite rules to block out some common exploits.

## Begin - Custom redirects
#
# If you need to redirect some pages, or set a canonical non-www to
# www redirect (or vice versa), place that code here. Ensure those
# redirects use the correct RewriteRule syntax and the [R=301,L] flags.

# mobile site redirection
RewriteCond %{HTTP_REFERER} !^http://(.*).backuptoweb.co.uk/.*$ [NC]

RewriteCond %{HTTP_USER_AGENT} "android|blackberry|iphone|ipod|iemobile|opera          mobile|palmos|webos|googlebot-mobile" [NC]
RewriteRule ^(.*)$ http://mobile.backuptoweb.co.uk/$1 [L,R=302]

RewriteCond %{HTTP_HOST} ^backuptoweb.co.uk [NC]
RewriteRule ^(.*)$ http://www.backuptoweb.co.uk/$1 [L,R=301]

# index.php to /
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /.*index\.php\ HTTP/
RewriteRule ^(.*)index\.php$ /$1 [R=301,L]
#
## End - Custom redirects

##
# Uncomment following line if your webserver's URL
# is not directly related to physical file paths.
# Update Your Joomla! Directory (just / for root).
##

RewriteBase /

 ## Begin - Joomla! core SEF Section.
 #
  RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
 #

 ## End - Joomla! core SEF Section. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T04:39:43.510

将所有移动流量重定向到您的移动子域并在那里有第二个 .htaccess 文件进行移动测试和重写是否可行？

要检查我是否正确理解您的评论，

**对于非移动访客**

[http://backuptoweb.co.uk/something](http://backuptoweb.co.uk/something)重定向到[http://www.backuptoweb.co.uk/something](http://www.backuptoweb.co.uk/something)

**对于移动访客**

[http://backuptoweb.co.uk/something](http://backuptoweb.co.uk/something)重定向到[http://www.mobile.backuptoweb.co.uk/something](http://www.mobile.backuptoweb.co.uk/something)

**除非**它们来自您的移动网站。如果这是你想要的情况

[http://backuptoweb.co.uk/something](http://backuptoweb.co.uk/something)重定向到[http://www.backuptoweb.co.uk/something](http://www.backuptoweb.co.uk/something)

* * *

你怎么看这个逻辑和顺序？

*   将 index.php 重写为 / （绝对不要使用 [L] 标志）

*   检查移动访问者是否来自移动站点。如果是，请使用 [L] 重写并发送到[http://www.backuptoweb.co.uk/something](http://www.backuptoweb.co.uk/something)

*   检查移动访问者（而不是来自移动站点。如果是，请使用 [L] 重写并发送到[http://www.backuptoweb.co.uk/something](http://www.backuptoweb.co.uk/something)

*   用 [R=301,L] 将 no-www 改写为 www.backuptoweb.co.uk/something

一些标志可能需要工作。

* * *

看看这对你有什么作用。确保在测试时也清除浏览器缓存。

如果那里有任何 mod_rewrite 大师，我也欢迎提出改进建议

```
Options +FollowSymLinks
RewriteEngine On

# Jooomla stuff here

# rewrite index.php to /

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([^/]+/)*index\.php\ HTTP/
# RewriteRule ^(([^/]+/)*)index\.php$ http://www.backuptoweb.co.uk$1 [R=301] *** updated
RewriteRule ^(([^/]+/)*)index\.php$ http://www.backuptoweb.co.uk/$1 [R=301]

# check if coming from mobile site
# if yes continue to main site

#  RewriteCond %{HTTP_REFERER} ^http://www\.mobile\.backuptoweb\.co\.uk/ [NC] *** updated
RewriteCond %{HTTP_REFERER} ^http://mobile\.backuptoweb\.co\.uk/ [NC]

RewriteRule (.*) http://www.backuptoweb.co.uk$1 [R=301,L]

# send any remaining mobile visitors to mobile site

RewriteCond %{HTTP_USER_AGENT} "android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile" [NC]
RewriteCond %{http_host}   !^$
# RewriteRule (.*) http://www.mobile.backuptoweb.co.uk/$1 [R=301,L]  *** updated  
RewriteRule (.*) http://mobile.backuptoweb.co.uk/$1 [R=301,L]

# rewrite non-www to www

RewriteCond %{http_host} ^backuptoweb\.co\.uk$
RewriteCond %{http_host}   !^$
RewriteRule (.*) http://www.backuptoweb.co.cuk/$1 [R=301,L] 
```

# events - 在 Salesforce 中创建新事件的查询

> ID：14143606
> 
> 赞同：2
> 
> 时间：2013-01-03T17:05:17.633
> 
> 标签：events, salesforce, task

在 salesforce 中创建与机会相关联的新事件时，有一个“添加受邀者”选项，您可以在其中选择多个联系人。添加受邀者时，这是否会向这些联系人发送通知，其中包含在此事件中输入的信息？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:12:18.913

答案是**肯定**的。

Salesforce 将发送电子邮件通知受邀者有关会议的信息。

如果您需要添加自定义字段，您应该更改电子邮件模板。

# c# - 如何将类型的泛型列表设置为其接口的泛型列表？

> ID：14143607
> 
> 赞同：3
> 
> 时间：2013-01-03T17:05:17.890
> 
> 标签：c#, asp.net, dependency-injection, inversion-of-control

如何将类型的泛型列表设置为其接口的泛型列表？

我有一个`Car`继承自`ICar`.

我有一个在构造函数`Client`中接受`List<ICar>`对象的类，我不想`List<Car>`为`Client`该类显式编写。

但是无法设置

```
var carsList = new List<Car>();
List<ICar> cars = carsList // compile error
var client = new Client(cars); 
```

您将如何实现这一目标？

我意识到如果我把它做成 IList 它会起作用，但我必须明确地转换我的 carsList 对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:22:10.530

您将无法使用 .NET Framework 列表并执行所需的隐式转换类型。

我将从另一个线程中窃取一些东西来演示基本问题：

考虑：

```
List<Animal> animals = new List<Giraffe>();
animals.Add(new Monkey()); 
```

或使用您的代码：

```
interface ICar{}
class Car:ICar{}
class BatMobile:ICar{}

List<ICar> cars = new List<Car>()
cars.Add(new BatMobile()) // We can't add a BatMobile to a List of Car. 
```

IEnumerable 可以处理这种类型的差异，因为您确保用户无法通过 IEnumerable 接口修改集合。使用列表无法保证这一点。

[https://stackoverflow.com/a/2033931/299408](https://stackoverflow.com/a/2033931/299408)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T17:11:44.370

您不能直接将 a`List<Car>`转换为 a `List<ICar>`，因为您可以尝试将 a 添加`OtherCar`到`List<ICar>`隐藏的 a`List<Car>`中，但这是行不通的。

相反，您可以：

*   使构造函数参数成为协变接口，例如 an `IEnumerable<Car>`，并在构造函数内部从它创建一个列表，或者
*   通过在构造函数之外转换列表`List<ICar> cars = carsList.ToList<ICar>();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T17:11:54.497

存在三种方式：

```
1) define carsList as List<ICar>
2) use framework 4.0 and IEnumerable<ICar>
3) manually convert 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T17:09:20.383

将列表定义为 ICar 列表...

```
var carsList = new List<ICar>();
List<ICar> cars = carsList; // compile error gone :) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T17:11:16.847

你必须反过来做。

```
var carsList = new List<ICar>(); // Hey, why not?
var client = new Client(cars); 
```

你试过铸造吗？

```
List<ICar> carsList = (List<ICar>)implementationList; 
```

# c# - 使用多个 app.config 文件

> ID：14143608
> 
> 赞同：0
> 
> 时间：2013-01-03T17:05:22.097
> 
> 标签：c#, .net, spring.net

我有一个加载其他库（DLL）的控制台应用程序。我正在使用 Spring.NET。我的控制台应用程序很简单，加载通过 DI 配置的 app.config 来初始化选择的库。

代码

```
ContextRegistry.GetContext(); 
```

配置 (app.config)

```
<?xml version="1.0"?>
<configuration>
    <configSections>
        <sectionGroup name="spring">
            <section name="context" 
               type="Spring.Context.Support.ContextHandler, Spring.Core"/>
            <section name="objects" 
               type="Spring.Context.Support.DefaultSectionHandler, Spring.Core"/>
    </sectionGroup>
</configSections>

<spring>
    <context>
        <resource uri="config://spring/objects"/>
        <resource uri="assembly://MyDLL/MyDLL.Config/Services.xml"/>
    </context>
    <objects xmlns="http://www.springframework.net" 
             xmlns:aop="http://www.springframework.net/aop">
    </objects>
</spring>
<startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
</startup></configuration> 
```

每个库都有自己的“services.xml”文件。这些库也使用 Spring.NET。

```
<objects xmlns="http://www.springframework.net" 
         xmlns:aop="http://www.springframework.net/aop">

<object id="componentObj" 
        type="MyDLL.Services.ComponentService, MyDLL" 
        singleton="true" />

<object 
 id="componentServiceHost" 
 type="Spring.ServiceModel.Activation.ServiceHostFactoryObject, Spring.Services">
    <property name="TargetName" 
              value="componentObj" />
</object>
</objects> 
```

获取异常“由于 StackOverflowException 而终止进程。” 如果我注释掉`<object id="componentServiceHost"`，则不会发生异常。

调试中的 VS 控制台显示

System.ServiceModel.dll 中出现“System.InvalidOperationException”类型的第一次机会异常

在 Spring.Core.dll 中发生了“Spring.Objects.Factory.ObjectCreationException”类型的第一次机会异常

在 Spring.Core.dll 中发生了“Spring.Objects.Factory.ObjectCreationException”类型的第一次机会异常

Managed (v4.0.30319)' 已退出，代码为 -2147023895 (0x800703e9)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:47:28.590

您还可以将 spring 配置放在纯 xml 文件中，并将它们包含在您的库中。这样，您可以轻松共享此配置，而无需共享 app.config。

您必须在主机控制台应用程序的配置中明确引用此配置文件，但这不是重复的。您的控制台应用程序主机的 app.config[将如下所示](http://www.springframework.net/doc-latest/reference/html/objects.html#d4e437)：

```
...
<spring>
  <context>
    <resource uri="file://services.xml"/>
    <resource uri="assembly://MyAssembly/MyDataAccess/data-access.xml"/>
  </context>
</spring> 
```

请参阅 spring.net 文档[如何在 xml 中配置配置](http://www.springframework.net/doc-latest/reference/html/objects.html#objects-factory-instantiation)。

# python - 分流器窗口显示问题

> ID：14143611
> 
> 赞同：0
> 
> 时间：2013-01-03T17:05:39.357
> 
> 标签：python, wxpython

我正在编写一个程序，左边有一个 TreeCtrl，右边有一个 RichTextCtrl。以下是拆分器、面板和其他元素的代码。

问题是在windows中，treectrl和textctrl的底部是隐藏的。状态栏覆盖拆分器的底部。但即使删除状态栏后，我也看不到 treectrl 的底部（最多隐藏 6 行）。

```
self.panel=wx.Panel(self,wx.ID_ANY)
self.splitter=wx.SplitterWindow(
    self.panel,-1,size=wx.DisplaySize(),style=wx.SP_LIVE_UPDATE)
self.splitter.SetMinimumPaneSize(5)
self.datatree=wx.TreeCtrl(self.splitter,1,style=wx.TR_HIDE_ROOT|wx.TR_ROW_LINES)
self.display=wx.richtext.RichTextCtrl(
    self.splitter,1,style=wx.VSCROLL|wx.HSCROLL|wx.WANTS_CHARS)
self.display.SetFont(self.displayfont)
self.handler=wx.richtext.RichTextXMLHandler()
self.splitter.SplitVertically(self.datatree,self.display)
self.logger=self.CreateStatusBar() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T05:15:11.597

我认为这里的问题可能是您已明确告诉 SplitterWindow 占用整个显示大小。尝试省略构造函数的 size 参数，或将其调整一些，看看是否有任何效果。

如果省略 size 参数没有帮助，我建议使用包含树和富文本控件的 Sizer 创建面板，然后在拆分器窗口中垂直拆分这些面板。

# android - 从选定的 CursorLoader 中获取字段

> ID：14143613
> 
> 赞同：1
> 
> 时间：2013-01-03T17:05:44.430
> 
> 标签：android, cursor, android-cursorloader

我刚刚更改了我的代码以使用 CursorLoader 而不是贬值的 manageCursor() 方法。

但不知道如何从当前点击位置的光标获取字段

```
public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    return new SQLiteCursorLoader(getActivity(), new DatabaseHelper(getActivity()), "SELECT M.id as _id,  M.name as desc FROM myTable M", null);    
}

@Override
public void onListItemClick(ListView l, View v, int position, long id) {

        // before I did, 
        // cursor.moveTo(position);
        // cursor.getInt(1);
        // WHat goes here? 
```

当然，我不必获取 id 并重新查询游标已经包含的内容。这将破坏这个托管概念的某些要点。

必须有一种方法可以访问给定位置的字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T17:18:26.763

这样做的正确方法是使用

```
l.getItemAtPosition(position); 
```

这是一个 Cursor，因为您的适配器是 CursorAdapter（对吗？），所以您可以这样做：

```
Cursor cursor = (Cursor) l.getItemAtPosition(position); 
```

你甚至不需要 moveToPosition() 东西。

这相当于`l.getAdapter().getItem(position)`，它是一个定位在位置的光标。您还可以参考适配器并调用

```
mCursorAdapter.getCursor(); 
```

# python - SQLite3 Python：数据类型 TEXT 如果为 null 'N/A'

> ID：14143619
> 
> 赞同：2
> 
> 时间：2013-01-03T17:06:08.380
> 
> 标签：python, sqlite, default-value

我想知道是否有办法为数据类型设置默认值。例如，`INTEGER PRIMARY KEY`将自动递增或`NOT NULL`不允许`None`。我希望发生的事情是，当将`None`类型输入到`TEXT`列中时，它将输入“N/A”而不是什么都不输入。这是可能的还是我必须编写一个可以做到这一点的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T17:08:32.373

只需将列定义为`DEFAULT`：

```
CREATE TABLE FOO (
    BAR TEXT DEFAULT "N/A"
) 
```

请参阅[SQLite`TABLE`文档](http://www.sqlite.org/syntaxdiagrams.html#column-constraint)。

# asp.net - 当我从后面的代码将 Button 添加到 GridView 的单元格时，LinkBut ton 的单击事件不会调用

> ID：14143621
> 
> 赞同：1
> 
> 时间：2013-01-03T17:06:14.850
> 
> 标签：asp.net

我使用下面的代码从后面的代码中将按钮添加到 GridView 的单元格`when user click on a button`，但是当我单击我添加的每个按钮时，单击事件（lnk_Click）不会调用并且在我单击它后按钮隐藏。我该如何解决这个问题?

```
//aspx
    <asp:GridView ID="GridView1" runat="server" GridLines="None" Width="940px"
      OnSelectedIndexChanged="grid_SelectedIndexChanged"
      onrowdatabound="GridView1_RowDataBound" AutoGenerateColumns="False" CssClass="gridview">
       <Columns>
          <asp:TemplateField HeaderText="...">
               <ItemTemplate>
                   <asp:Panel ID="pnlSteps" runat="server"></asp:Panel>
               </ItemTemplate>
          </asp:TemplateField>
       </Columns>
  </asp:GridView>

    //Code behind
    for (int i = 0; i < GridView1.Rows.Count; i++)
            {
                Panel pnl = (Panel)GridView1.Rows[i].Cells[0].FindControl("pnlSteps");
                LinkButton lnk = new LinkButton();
                lnk.Text = "...";
                pnl.Controls.Add(lnk);
                lnk.Click += new EventHandler(lnk_Click);
            }//for
    ...

    protected void lnk_Click(object sender, EventArgs e)
        {
    //...
    } 
```

我用下面的代码填充gridview

```
//dsSet is DataSet that i fill it with data from Database
DataTable dtt = new DataTable();

        dtt.Columns.Add(new DataColumn("status", typeof(string)));
        dtt.Columns.Add(new DataColumn("finantial", typeof(string)));
        dtt.Columns.Add(new DataColumn("phone", typeof(string)));
        dtt.Columns.Add(new DataColumn("name", typeof(string)));
        dtt.Columns.Add(new DataColumn("code", typeof(string)));

        for (int i = 0; i < dsSet.Tables[0].Rows.Count; i++)
        {
            DataRow dr = dtt.NewRow();

            dr[0]=...;
            dr[1]=...;
            dr[2]=...;
            dr[3]=...;
            dr[4]=...;

            dtt.Rows.Add(dr);
        }//for
        GridView1.DataSource = dtt;
        GridView1.DataBind(); 
```

//我也使用`CommandName`如下命令并设置`GridView_RowCommand`为 Gridview`OnRowCommand`但不起作用

lnk.CommandName = "选择";

protected void GridView_RowCommand(Object sender, GridViewCommandEventArgs e) { .....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:13:05.240

当您手动添加控件和事件时，您必须在每次回发时添加它们。仅对网格进行一次数据绑定**（if(!IsPostBack)）**，但**在每次回发时执行此循环**：

```
for (int i = 0; i < GridView1.Rows.Count; i++)
        {
            Panel pnl = (Panel)GridView1.Rows[i].Cells[0].FindControl("pnlSteps");
            LinkButton lnk = new LinkButton();
            lnk.Text = "...";
            pnl.Controls.Add(lnk);
            lnk.Click += new EventHandler(lnk_Click);
        }//for 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:11:11.353

我相信我在更新面板中的链接按钮有类似的问题。

我相信我将此触发器添加到包含网格视图控件的更新面板中。

```
<Triggers>
     <asp:AsyncPostBackTrigger ControlID="GridView1" EventName="RowCommand" />
</Triggers> 
```

解决问题。确保您的 gridview 已初始化`onRowCommand="GridView_RowCommand"`属性集，并且您的链接按钮具有`CommandName=""`属性集。

然后，当您的链接按钮事件触发时，您可以确定在`GridView_RowCommand`.

```
protected void GridView_RowCommand(Object sender, GridViewCommandEventArgs e) 
{
   if (e.CommandName == "Link Button Command Name")
   {
      // link button
   }
} 
```

如果这仍然不能解决您的问题，您可能必须尝试在`GridView_RowCreated`Pre_Render 或页面中创建链接按钮。

# javascript - CakePHP，将参数传递给js.php文件？

> ID：14143629
> 
> 赞同：1
> 
> 时间：2013-01-03T17:06:47.050
> 
> 标签：javascript, cakephp

我试图使用 PHP 来生成一个 javascript 文件。我包含了该文件，并且所有脚本都在其中运行。我想不通的是我如何将参数传递给这个文件？

要将参数从控制器传递到我使用的视图：

```
$this->set('object_models', $object_models); 
```

要将其从视图传递给我使用的元素：

```
echo $this->element('pageElement', array('object_model' => $object_model)); 
```

我通过将其添加到视图中来包含我的 js.php 文件：

```
echo $this->Html->script('modelDrawer.js.php?', false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:48:53.597

您是否考虑过使用`parseExtensions`并包含您的 JS 文件作为可以直接在其上执行逻辑的控制器的视图？

这与使用 Cake 生成 rss 提要和 xml 文件的方式类似。

[看这篇文章](http://jamnite.blogspot.com/2009/04/integrate-php-into-javascript-in.html)

**更新**

转到您的 routes.php 文件，然后添加该行`Router::parseExtensions('js');`

然后，为此创建一个名为的控制器`DynamicController.php`- 并将其粘贴到那里：

```
class DynamicController extends AppController {

    public $uses = array();

    public function modelDrawer() {
        // logic in here
        $this->set( 'object_models', $object_models );
    }
} 
```

创建视图文件夹和视图文件：

`/app/View/Dynamic/js/model_drawer.ctp`

在那个 model_drawer.ctp 文件中，您可以放置​​您想要蛋糕化的视图/脚本逻辑。

然后，您可以像这样调用您的脚本：

`<script type="text/javascript" src="/dynamic/modelDrawer.js"></script>`

试试看！

# c# - 使用 JSON 请求和 RestSharp 通过 c# 上传文件

> ID：14143630
> 
> 赞同：8
> 
> 时间：2013-01-03T17:06:49.437
> 
> 标签：c#, ruby, json, file-upload

在设法通过 c# 将数据加载到我的 Rails 服务器后（查看[此处](https://stackoverflow.com/questions/14141174/c-sharp-adding-double-quotes-to-start-and-end-of-json-string-results-in-server-d)了解我在说什么），我现在正尝试将文件与其他数据一起上传到同一台服务器。

在 Ruby 中，我可以使用以下代码做到这一点：

```
require 'HTTMultiParty'

    class ReceiptCreate
        include HTTMultiParty
        # Log to file
        # debug_output File.new("httparty1.log", "w+")
        base_uri "localhost:3000"
        format :json
        headers "Accept" => "application/json"

      def initialize
      end

      def post(machine_serial,filepath,tag_number,token)
        options = { body: 
                    {receipt:
                        {tag_number:tag_number,
                         receipt_file: File.new(filepath),
                         ispaperduplicate:0
                         },
                    machine:
                        {serial_number: machine_serial,
                         safe_token: token
                         }
                    }               
                }
        self.class.post('/receipts', options)
      end
    end

receipt = ReceiptCreate.new()
filename1 = "C:\\filename1.pdf"
filename2 = "C:\\filename2.pdf"
response=receipt.post("2803433",filename2,"p94tt7w","123")
puts response 
```

当我检查 rails 服务器上的参数时，我看到了

```
Parameters: {"receipt"=>{"tag_number"=>"p94tt7w", "receipt_file"=>#<ActionDispatch::Http::UploadedFile:0x4183ea8 @original_filename="Invoice.pdf", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"receipt[receipt_file]\"; filename=\"Invoice.pdf\"\r\nContent-Length: 11653\r\nContent-Type: application/octet-stream\r\nContent-Transfer-Encoding: binary\r\n", @tempfile=#<File:C:/Users/diogo/AppData/Local/Temp/RackMultipart20130103-18168-efiqia>>, "ispaperduplicate"=>"0"}, "machine"=>{"serial_number"=>"2803433", "safe_token"=>"123"}} 
```

但是，如果我尝试对下面的 c# 代码做同样的事情

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using RestSharp;
using System.Web.Script.Serialization;
using System.IO;

namespace RonRestClient
{

    class templateRequest
    {
        public Receipt receipt;
        public class Receipt
        {
            public float total;
            public String tag_number;
            public bool ispaperduplicate = true;
            public byte[] receipt_file;
            public Receipt(float total, String tagnr, string filepath)
            {
                this.total = total;
                this.tag_number = tagnr;
                this.receipt_file = File.ReadAllBytes(filepath);
            }
        };
        public Machine machine;
        public class Machine
        {
            public String serial_number;
            public String safe_token;
            public Machine(String machinenr, String safe_token)
            {
                this.serial_number = machinenr;
                this.safe_token = safe_token;
            }
        };
    }

    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {

            string path = @"C:\filename2.pdf";
            string tagnr = "p94tt7w";
            string machinenr = "2803433";
            string safe_token = "123";
            float total = 100;

            templateRequest req = new templateRequest();
            req.receipt = new templateRequest.Receipt(total, tagnr, path);
            req.machine = new templateRequest.Machine(machinenr, safe_token);
            //string json_body = JsonConvert.SerializeObject(req);
            //string json_body = new JavaScriptSerializer().Serialize(req);

            //var json_body = "{\"receipt\" : {\"total\":"+total+", \"tag_number\":\""+tagnr+"\",\"ispaperduplicate\":true},\"machine\":{\"serial_number\": \""+machinenr+"\",\"safe_token\": \""+safe_token+"\"}}";

            var client = new RestClient("http://localhost:3000/receipts");

            var request = new RestRequest(Method.POST);

            //set request Body
            request.AddHeader("Content-type", "application/json");
            request.AddHeader("Accept", "application/json");
            request.RequestFormat = DataFormat.Json;

            request.AddBody(req); 
            //request.AddParameter("application/json", json_body, ParameterType.RequestBody);

            // easily add HTTP Headers

            // add files to upload (works with compatible verbs)
            //request.AddFile("receipt/receipt_file",path);

            // execute the request

            IRestResponse response = client.Execute(request);
            var content = response.Content; // raw content as string
            if(response.ErrorMessage !="") content += response.ErrorMessage;
            response_box.Text = content;

        }
    }
} 
```

我明白了

```
Parameters: {"receipt"=>{"total"=>100, "tag_number"=>"p94tt7w", "ispaperduplicate"=>true, "receipt_file"=>[37, 80, [n3...nX], 10]}, "machine"=>{"serial_number"=>"2803433", "safe_token"=>"123"}} 
```

这似乎基本上意味着 Restsharp 只是认为我的文件只是另一个字段。

RestSharp 似乎有一种添加文件的方法`request.AddFile("receipt/receipt_file",path);`，我相信这可能是要走的路……但是当我尝试添加文件时，我收到一条错误消息：

> 开始写入后无法设置此属性。

我需要单独设置文件的每个属性吗？

**编辑**

同时我发现了这篇[文章](http://nediml.wordpress.com/2012/05/10/uploading-files-to-remote-server-with-multiple-parameters/)，将我的代码更改为：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using RestSharp;
using System.Web.Script.Serialization;
using System.IO;
using System.Net;

namespace RonRestClient
{

    class templateRequest
    {
        public Receipt receipt;
        public class Receipt
        {
            //public float total;
            public String tag_number;
            public bool ispaperduplicate = true;
            //public byte[] receipt_file;
            public Receipt(String tagnr)
            {
                //this.total = total;
                this.tag_number = tagnr;
               // this.receipt_file = File.ReadAllBytes(filepath);
            }
        };
        public Machine machine;
        public class Machine
        {
            public String serial_number;
            public String safe_token;
            public Machine(String machinenr, String safe_token)
            {
                this.serial_number = machinenr;
                this.safe_token = safe_token;
            }
        };
    }

    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {

            string path = @"C:\filename2.pdf";
            string tagnr = "p94tt7w";
            string machinenr = "2803433";
            string safe_token = "123";
            float total = 100;

            templateRequest req = new templateRequest();
            req.receipt = new templateRequest.Receipt(tagnr);
            req.machine = new templateRequest.Machine(machinenr, safe_token);

            var request = new RestRequest("/receipts",Method.POST);
            request.AddParameter("receipt[total]", total);
            request.AddParameter("receipt[tag_number]", tagnr);
            request.AddParameter("machine[serial_number]", machinenr);
            request.AddParameter("machine[safe_token]", safe_token);
            request.AddFile("receipt[receipt_file]", File.ReadAllBytes(path), "Invoice.pdf", "application/octet-stream");

            // Add HTTP Headers
            request.AddHeader("Content-type", "application/json");
            request.AddHeader("Accept", "application/json");
            request.RequestFormat = DataFormat.Json;
            //set request Body
            //request.AddBody(req); 

            // execute the request
            //calling server with restClient
            RestClient restClient = new RestClient("http://localhost:3000");
            restClient.ExecuteAsync(request, (response) =>
            {

                if (response.StatusCode == HttpStatusCode.OK)
                {
                    //upload successfull
                    MessageBox.Show("Upload completed succesfully...\n" + response.Content);
                }
                else
                {
                    //error ocured during upload
                    MessageBox.Show(response.StatusCode + "\n" + response.StatusDescription);
                }
            });

        }

    }

} 
```

现在正在获取参数：

```
Parameters: {"receipt"=>{"total"=>"100", "tag_number"=>"p94tt7w", "receipt_file"=>#<ActionDispatch::Http::UploadedFile:0x3db42d8 @original_filename="Invoice.pdf", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"receipt[receipt_file]\"; filename=\"Invoice.pdf\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<File:C:/Users/diogo/AppData/Local/Temp/RackMultipart20130103-18168-9mbt3h>>}, "machine"=>{"serial_number"=>"2803433", "safe_token"=>"123"}} 
```

以及 HTTP 422 - Unprocessable Entity 错误。

如果我要将这些参数与我在 ruby​​ 代码中使用的参数进行比较，现在唯一的区别似乎是最后一条消息没有 Content-length 和 Content-Transfer-Encoding 字段......

您对我如何添加属性有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-03T23:01:09.877

这是一场战斗……最后我发现了解决这个问题的两种不同方法。具有讽刺意味的是，与许多编码问题一样，我所要做的就是首先设置正确的参数......只是一个缺失的参数让我花费了 4 个多小时......

两者详述如下：

**1 - 使用 RestSharp**（总字段不应该存在，并且 ispaperduplicate 字段丢失）

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using RestSharp;
using System.Web.Script.Serialization;
using System.IO;
using System.Net;

namespace RonRestClient
{    

    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {

            string path = @"C:\filename2.pdf";
            //localhost settings
            string requestHost = @"http://localhost:3000/receipts";
            string tagnr = "p94tt7w";
            string machinenr = "2803433";
            string safe_token = "123";

            // Do it with RestSharp

            templateRequest req = new templateRequest();
            req.receipt = new templateRequest.Receipt(tagnr);
            req.machine = new templateRequest.Machine(machinenr, safe_token);

            var request = new RestRequest("/receipts", Method.POST);
            request.AddParameter("receipt[tag_number]", tagnr);
            request.AddParameter("receipt[ispaperduplicate]", 0);
            request.AddParameter("machine[serial_number]", machinenr);
            request.AddParameter("machine[safe_token]", safe_token);
            request.AddFile("receipt[receipt_file]", File.ReadAllBytes(path), Path.GetFileName(path), "application/octet-stream");

            // Add HTTP Headers
            request.AddHeader("Content-type", "application/json");
            request.AddHeader("Accept", "application/json");
            request.RequestFormat = DataFormat.Json;
            //set request Body
            //request.AddBody(req); 

            // execute the request
            //calling server with restClient
            RestClient restClient = new RestClient("http://localhost:3000");
            restClient.ExecuteAsync(request, (response) =>
            {

                if (response.StatusCode == HttpStatusCode.OK)
                {
                    //upload successfull
                    MessageBox.Show("Upload completed succesfully...\n" + response.Content);
                }
                else
                {
                    //error ocured during upload
                    MessageBox.Show(response.StatusCode + "\n" + response.StatusDescription);
                }
            });

        }

    }

} 
```

**2 - 将 FileStream 与 HttpWebRequest 一起使用**（谢谢[Clivant](http://www.techcoil.com/blog/sending-a-file-and-some-form-data-via-http-post-in-c/)）

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using RestSharp;
using System.Web.Script.Serialization;
using System.IO;
using System.Net;

namespace RonRestClient
{

    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {

            string path = @"C:\Projectos\My Training Samples\Adobe Sample\RBO1574.pdf";
            //localhost settings
            string requestHost = @"http://localhost:3000/receipts";
            string tagnr = "p94tt7w";
            string machinenr = "2803433";
            string safe_token = "123";

            FileStream fs1 = File.OpenRead(path);
            long filesize = fs1.Length;
            fs1.Close();

            // Create a http request to the server endpoint that will pick up the
            // file and file description.
            HttpWebRequest requestToServerEndpoint =
                (HttpWebRequest)WebRequest.Create(requestHost);

            string boundaryString = "FFF3F395A90B452BB8BEDC878DDBD152";
            string fileUrl = path;

            // Set the http request header \\
            requestToServerEndpoint.Method = WebRequestMethods.Http.Post;
            requestToServerEndpoint.ContentType = "multipart/form-data; boundary=" + boundaryString;
            requestToServerEndpoint.KeepAlive = true;
            requestToServerEndpoint.Credentials = System.Net.CredentialCache.DefaultCredentials;
            requestToServerEndpoint.Accept = "application/json";

            // Use a MemoryStream to form the post data request,
            // so that we can get the content-length attribute.
            MemoryStream postDataStream = new MemoryStream();
            StreamWriter postDataWriter = new StreamWriter(postDataStream);

            // Include value from the tag_number text area in the post data
            postDataWriter.Write("\r\n--" + boundaryString + "\r\n");
            postDataWriter.Write("Content-Disposition: form-data; name=\"{0}\"\r\n\r\n{1}",
                                    "receipt[tag_number]",
                                    tagnr);

            // Include ispaperduplicate text area in the post data
            postDataWriter.Write("\r\n--" + boundaryString + "\r\n");
            postDataWriter.Write("Content-Disposition: form-data; name=\"{0}\"\r\n\r\n{1}",
                                    "receipt[ispaperduplicate]",
                                    0);

            // Include value from the machine number in the post data
            postDataWriter.Write("\r\n--" + boundaryString + "\r\n");
            postDataWriter.Write("Content-Disposition: form-data; name=\"{0}\"\r\n\r\n{1}",
                                    "machine[serial_number]",
                                    machinenr);

            // Include value from the machine token in the post data
            postDataWriter.Write("\r\n--" + boundaryString + "\r\n");
            postDataWriter.Write("Content-Disposition: form-data; name=\"{0}\"\r\n\r\n{1}",
                                    "machine[safe_token]",
                                    safe_token);

            // Include the file in the post data
            postDataWriter.Write("\r\n--" + boundaryString + "\r\n");
            postDataWriter.Write("Content-Disposition: form-data; name=\"{0}\"; filename=\"{1}\"\r\n"
                                    + "Content-Length: \"{2}\"\r\n"
                                    + "Content-Type: application/octet-stream\r\n"
                                    + "Content-Transfer-Encoding: binary\r\n\r\n",
                                    "receipt[receipt_file]",
                                    Path.GetFileName(fileUrl),
                                    filesize);

            postDataWriter.Flush();

            // Read the file
            FileStream fileStream = new FileStream(fileUrl, FileMode.Open, FileAccess.Read);
            byte[] buffer = new byte[1024];
            int bytesRead = 0;
            while ((bytesRead = fileStream.Read(buffer, 0, buffer.Length)) != 0)
            {
                postDataStream.Write(buffer, 0, bytesRead);
            }
            fileStream.Close();

            postDataWriter.Write("\r\n--" + boundaryString + "--\r\n");
            postDataWriter.Flush();

            // Set the http request body content length
            requestToServerEndpoint.ContentLength = postDataStream.Length;

            // Dump the post data from the memory stream to the request stream
            Stream s = requestToServerEndpoint.GetRequestStream();

            postDataStream.WriteTo(s);

            postDataStream.Close();

        }

    }

} 
```

# java - 我怎样才能获得最高版本？

> ID：14143647
> 
> 赞同：5
> 
> 时间：2013-01-03T17:07:34.247
> 
> 标签：java

如何对以下数组进行排序`String`？

```
String[] s = {"0.1", "0.3", "0.6", "0.4", "0.5", "0.2", "0.7", "0.8", "0.9", "0.10"}; 
```

通过排序，我并不是说将其转换为整数并将结果作为`0.9`.

在这里，我想将值作为`0.10`.

在这种情况下，如果字符串数组包含`1.1`，则最大值将为`1.1`。

如果数组是这样的，我可以得到最大值，即

```
String[] s = {"0.1", "0.4", "0.3", "0.4", "0.5", "0.2", "0.7", "1.8", "2.9", "3.1"}; 
```

我的代码将适用于这个字符串数组，但假设如果

```
String[] s = {"0.1", "1.4", "1.3", "0.4", "0.5", "0.2", "2.7", "1.8", "2.9", "0.1"}; 
```

我的代码。

```
public String createNewVersion(
            String[] entityVersionHistory) {

Map<Integer, List<Integer>> m_Map1 = new HashMap<Integer, List<Integer>>();

String prevKey = "0";
String currentKey = null;

List<Integer> list = new ArrayList<Integer>();

for (String str: entityVersionHistory)
{
    String[] splitVersion = str.split("\\.");
    currentKey = splitVersion[0];
    if(!prevKey.equals(currentKey))
    {
        Integer s = new Integer(splitVersion[1]);

        m_Map1.put(Integer.valueOf(prevKey), list);
        list = new ArrayList<Integer>();
        list.add(s);

        prevKey = currentKey;
    }
    else
    {
        Integer s = new Integer(splitVersion[1]);
        list.add(s);
    }
}
m_Map1.put(Integer.valueOf(prevKey), list); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T17:12:15.203

这并不像你想象的那么容易。因为也有 , 等版本号`3.1beta`。我不会在下面全面讨论这些，只是勾勒出一些出现的挑战。

但基本思路如下：

1.  **将字符串 at**拆分**`.`为一个数组，将各个组件转换为整数。**

***   **逐个比较**。如果两个数字在第一个组件上一致，请跳到下一个。** 

 **因此，给定版本号`3.10.1`，`3.9.2`我们首先将它们转换为整数数组：`{ 3, 10, 1 }`和`{3, 9, 2}`. 然后我们测试第一个组件，但是`3 == 3`，所以我们跳到下一个组件。`10 > 9`，所以结果是第一个更大。

现在，如果您想支持`beta`和类似的事情，它会变得非常混乱。以 Debian 版本编号为例。除了点之外，它还有一个*纪元*分隔符。所以一个版本`2:1.0 > 2.0`（一个新的纪元大于以前的纪元编号）。A`-`分隔修订号。所以`2-2 < 2.1-1`，因为`2 < 2.1`（并且修订是次要的主要版本号！）。也有*负面*版本。所以`1.0~beta < 1.0`，但是`1.0final > 1.0`- 将其读作“1.0 减去 beta”和“1.0 加上最终”。

对于如何阅读这些内容没有唯一的标准。只有一个通用的约定`.`将低优先级的组件分开，而`~`它是预发布的流行指标（这就是为什么它应该在非后缀版本之前排序的原因）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T17:26:34.310

这基本上是[Anny-Mousse](https://stackoverflow.com/a/14143747/1749753)在代码中的回答：限制是，版本号中只允许使用数字和点。

```
public class Version implements Comparable<Version> {

    private int[] version;

    public Version(String str) {
        if (!str.matches("\\d+[.\\d]*?\\d")) {
            throw new IllegalArgumentException(
                    "Version must start and end with digit and"
                    + "only contain digits and dots."
                    + " You provided '" + str + "'");
        }
        String[] tokens = str.split("\\.");
        version = new int[tokens.length];
        for (int i = 0; i < tokens.length; i++) {
            version[i] = Integer.parseInt(tokens[i], 10);
        }
    }

    @Override
    public int compareTo(Version other) {
        Version shorterOne =
                this.version.length < other.version.length ?
                this : other;
        int min = shorterOne.version.length;
        for (int i = 0; i < min; i++) {
            if (this.version[i] != other.version[i]) {
                return this.version[i] - other.version[i];
            }
        }
        return this.version.length - other.version.length;
    }

    @Override
    public String toString() {
        StringBuilder str = new StringBuilder(2 * version.length);
        for (Integer i : version) {
            str.append(i).append('.');
        }
        return str.deleteCharAt(str.length() - 1).toString();
    }

    public static void main(String[] args) {
        String[] s = {"1.4","1.3","0.4","0.5","0.2","2.7","1.8","2.9","0.1"};
        List<Version> list = new ArrayList<>(s.length);
        for (String str : s) {
            list.add(new Version(str));
        }
        Version max = Collections.max(list);
        System.out.println(max);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T17:30:04.173

试试看

```
 Arrays.sort(s, new Comparator<String>() {
        @Override
        public int compare(String o1, String o2) {
            String[] a1 = o1.split("\\.");
            String[] a2 = o2.split("\\.");
            int c1 = Integer.parseInt(a1[0]) - Integer.parseInt(a2[0]);
            if (c1 != 0) {
                return c1;
            }
            return a1[1].compareTo(a2[1]);
        }

    }); 
```**

# mysql - mysql检查数字序列中的间隙

> ID：14143648
> 
> 赞同：1
> 
> 时间：2013-01-03T17:07:39.080
> 
> 标签：mysql, numbers, sequence

我发现[这个](https://stackoverflow.com/questions/4340793/how-to-find-gaps-in-sequential-numbering-in-mysql)主题对解决我的问题很有帮助。但我想找到另一个问题的解决方案。如果数字序列看起来像这样 01258，那么缺少的间隙是 3 4 7。完美的结果，但是如果序列是 258，结果是相同的并且函数忽略 0 和 1。请您帮我更改该函数以便检查间隙从0开始？我什至不知道从什么开始。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:17:21.810

输出提供的链接中的缺失范围列表，但在指定范围内（未经广泛测试）。

您需要遍历它们以获取实际值。

```
CREATE TABLE tempTable AS ...

DECLARE @StartID INT ...
DECLARE @EndID INT ...

SELECT @StartID as gap_starts_at, 
       COALESCE((SELECT MIN(t3.id) -1 FROM tempTable t3
                 WHERE t3.id > @StartID AND t3.id < @EndID), @EndID) as gap_ends_at
FROM tempTable t1
WHERE NOT EXISTS (SELECT t2.id FROM tempTable t2 WHERE t2.id = @StartID)
UNION
SELECT (t1.id + 1) as gap_starts_at, 
       COALESCE((SELECT MIN(t3.id) -1 FROM tempTable t3 WHERE t3.id > t1.id),
                @EndID) as gap_ends_at
FROM #tempTable t1
WHERE NOT EXISTS (SELECT t2.id FROM tempTable t2 WHERE t2.id = t1.id + 1)
      AND id < @EndID 
```

**编辑：** [这是](http://www.xaprb.com/blog/2005/12/06/find-missing-numbers-in-a-sequence-with-sql/)一个链接，其中包含一些查找缺失值的方法（我认为它们中的任何一个都不适用于范围，但有些方法可能比其他方法更容易扩展。

# r - 基于列子集修剪 NA - 更优雅的解决方案？

> ID：14143650
> 
> 赞同：3
> 
> 时间：2013-01-03T17:07:39.550
> 
> 标签：r

stackoverflow 社区的新年难题，过去阅读帖子和答案给了我很大的帮助（这是我的第一个问题）。我找到了解决方法，但我想知道是否可以建议其他方法/解决方案。

我正在尝试从大的 中删除尾随的 NA `data.frame`，但这些 NA 仅在 的少数列中找到，`data.frame`我想保留输出中的所有列。这是一个有代表性的数据子集。

```
df=data.frame(var1=rep("A", 8), var2=c("a","b","c","d","e","f","g","h"), var3=c(0,1,NA,2,3,NA,NA,NA), var4=c(0,0,NA,4,5,NA,NA,NA), var5=c(0,0,NA,0,2,4,NA,NA)) 
```

### 过程目标：

1.  根据 var3、var4 和 var5 中的 NA 存在修剪尾随 NA
2.  保留最终输出中的所有列
3.  仅删除尾随 NA（即第 3 行作为占位符保留在记录中）
4.  仅当所有列都有 NA 时才修剪（即第 7 行和第 8 行，但不是第 6 行）

基于这些目标，解决方案应删除 df 的最后两行：

```
df.output = df[-c(7,8),] 
```

na.trim （在 zoo 包中）的行为是理想的（因为它限制了对 data.frame 末尾的那些 NA 的删除，sides="right"），我的解决方法涉及更改 na.trim .default 函数以包含子集术语。

有什么建议么？非常感谢您的帮助。

编辑：为了完成这个问题，下面是我从 na.trim.default 代码创建的函数，它也可以工作，但如前所述，确实需要加载 zoo 包。

```
na.trim.multiplecols <-  function (object, colrange, sides = c("both", "left", "right"),     is.na = c("any","all"),...) 
{
is.na <- match.arg(is.na)
nisna <- if (is.na == "any" || length(dim(object[,colrange])) < 1) {
complete.cases(object[,colrange])
}
else rowSums(!is.na(object[,colrange])) > 0
idx <- switch(match.arg(sides), left = cumsum(nisna) > 0, 
            right = rev(cumsum(rev(nisna) > 0) > 0), both = (cumsum(nisna) > 
                                                               0) &       rev(cumsum(rev(nisna)) > 0))
if (length(dim(object)) < 2) 
object[idx]
else object[idx, , drop = FALSE]

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-03T02:01:25.613

基于的东西`max(which(!is.na()))`会起作用。我们使用它从感兴趣的列中找到最大的非缺失数据索引。

使用你的 df

```
ind <-  max(max(which(!is.na(df$var3))),
        max(which(!is.na(df$var4))),        
        max(which(!is.na(df$var5)))) 

df[1:ind, ]

   var1 var2 var3 var4 var5
 1    A    a    0    0    0
 2    A    b    1    0    0
 3    A    c   NA   NA   NA
 4    A    d    2    4    0
 5    A    e    3    5    2
 6    A    f   NA   NA    4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:27:07.953

`Edit:`使用基础`rle`和的第一个解决方案`apply`

```
t <- rle(apply(as.matrix(df[,3:5]), 1, function(x) all(is.na(x))))
r <- ifelse(t$values[length(t$values)] == TRUE, t$lengths[length(t$lengths)], 0)
head(df, -r) 
```

`Rle`使用from package 的第二种解决方案`IRanges`：

```
require(IRanges)
t <- min(sapply(df[,3:5], function(x) {
    o <- Rle(x)
    val <- runValue(o)
    if (is.na(val[length(val)])) {
        len <- runLength(o)
        out <- len[length(len)]
    } else {
        out <- 0
    }
}))
head(df, -t) 
```

# javascript - Web Audio API 附加/连接不同的 AudioBuffers 并将它们作为一首歌曲播放

> ID：14143652
> 
> 赞同：17
> 
> 时间：2013-01-03T17:07:52.620
> 
> 标签：javascript, concatenation, html5-audio, web-audio-api, arraybuffer

我一直在使用 Web Audio API，我正在尝试加载歌曲的多个部分并将它们附加到一个新的 ArrayBuffer 中，然后使用该 ArrayBuffer 将所有部分作为一首歌曲播放。在以下示例中，我使用相同的歌曲数据（这是一个小循环）而不是歌曲的不同部分。

问题是它仍然只播放一次而不是两次，我不知道为什么。

[下载歌曲](http://cl.ly/3g2U0z331e0K/loop.mp3)

```
function init() {

  /**
   * Appends two ArrayBuffers into a new one.
   * 
   * @param {ArrayBuffer} buffer1 The first buffer.
   * @param {ArrayBuffer} buffer2 The second buffer.
   */
  function appendBuffer(buffer1, buffer2) {
    var tmp = new Uint8Array(buffer1.byteLength + buffer2.byteLength);
    tmp.set( new Uint8Array(buffer1), 0);
    tmp.set( new Uint8Array(buffer2), buffer1.byteLength);
    return tmp;
  }

  /**
   * Loads a song
   * 
   * @param {String} url The url of the song.
   */
  function loadSongWebAudioAPI(url) {
    var request = new XMLHttpRequest();
    var context = new webkitAudioContext();

    request.open('GET', url, true);
    request.responseType = 'arraybuffer';

    /**
     * Appends two ArrayBuffers into a new one.
     * 
     * @param {ArrayBuffer} data The ArrayBuffer that was loaded.
     */
    function play(data) {
      // Concatenate the two buffers into one.
      var a = appendBuffer(data, data);
      var buffer = a.buffer;
      var audioSource = context.createBufferSource();
      audioSource.connect(context.destination);

      //decode the loaded data
      context.decodeAudioData(buffer, function(buf) {
        console.log('The buffer', buf);
        audioSource.buffer = buf;
        audioSource.noteOn(0);
        audioSource.playbackRate.value = 1;
      });

    };

    // When the song is loaded asynchronously try to play it.
    request.onload = function() {
      play(request.response);
    }

    request.send();
  }

  loadSongWebAudioAPI('http://localhost:8282/loop.mp3');
}

window.addEventListener('load',init,false); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-03T22:14:29.597

您的代码中的问题是您正在复制 MP3 文件的另一个副本并将其附加到自身的末尾。该副本被解码器有效地忽略了 - 它不是原始缓冲区数据，它只是文件流中的随机虚假垃圾，跟随一个完美完整的 MP3 文件。

您需要做的是首先将音频数据解码到 AudioBuffer 中，然后将音频缓冲区一起附加到新的 AudioBuffer 中。这需要对您的代码进行一些重组。

你想要做的是：

```
var context = new webkitAudioContext();

function init() {

  /**
   * Appends two ArrayBuffers into a new one.
   * 
   * @param {ArrayBuffer} buffer1 The first buffer.
   * @param {ArrayBuffer} buffer2 The second buffer.
   */
  function appendBuffer(buffer1, buffer2) {
    var numberOfChannels = Math.min( buffer1.numberOfChannels, buffer2.numberOfChannels );
    var tmp = context.createBuffer( numberOfChannels, (buffer1.length + buffer2.length), buffer1.sampleRate );
    for (var i=0; i<numberOfChannels; i++) {
      var channel = tmp.getChannelData(i);
      channel.set( buffer1.getChannelData(i), 0);
      channel.set( buffer2.getChannelData(i), buffer1.length);
    }
    return tmp;
  }

  /**
   * Loads a song
   * 
   * @param {String} url The url of the song.
   */
  function loadSongWebAudioAPI(url) {
    var request = new XMLHttpRequest();

    request.open('GET', url, true);
    request.responseType = 'arraybuffer';

    /**
     * Appends two ArrayBuffers into a new one.
     * 
     * @param {ArrayBuffer} data The ArrayBuffer that was loaded.
     */
    function play(data) {
      //decode the loaded data
      context.decodeAudioData(data, function(buf) {
        var audioSource = context.createBufferSource();
        audioSource.connect(context.destination);

        // Concatenate the two buffers into one.
        audioSource.buffer = appendBuffer(buf, buf);
        audioSource.noteOn(0);
        audioSource.playbackRate.value = 1;
      });

    };

    // When the song is loaded asynchronously try to play it.
    request.onload = function() {
      play(request.response);
    }

    request.send();
  }

  loadSongWebAudioAPI('loop.mp3');
}

window.addEventListener('load',init,false); 
```

有轻微的播放间隙 - 这是因为您在声音样本的开头有近 50 毫秒的静音，而不是由于循环问题。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-07-12T14:14:00.940

如果您需要从数组（不仅是 2 个）追加/连接缓冲区列表，这里有一个解决方案。我刚刚调整了@Cwilso 代码（感谢您的帮助；）

```
function concatBuffer(_buffers) {
    // _buffers[] is an array containig our audiobuffer list

    var buflengh = _buffers.length;
    var channels = [];
    var totalDuration = 0;

    for(var a=0; a<buflengh; a++){
        channels.push(_buffers[a].numberOfChannels);// Store all number of channels to choose the lowest one after
        totalDuration += _buffers[a].duration;// Get the total duration of the new buffer when every buffer will be added/concatenated
    }

    var numberOfChannels = channels.reduce(function(a, b) { return Math.min(a, b); });;// The lowest value contained in the array channels
    var tmp = context.createBuffer(numberOfChannels, context.sampleRate * totalDuration, context.sampleRate);// Create new buffer

    for (var b=0; b<numberOfChannels; b++) {
        var channel = tmp.getChannelData(b);
        var dataIndex = 0;

        for(var c = 0; c < buflengh; c++) {
            channel.set(_buffers[c].getChannelData(b), dataIndex);
            dataIndex+=_buffers[c].length;// Next position where we should store the next buffer values
        }
    }
    return tmp;
} 
```

# php - 在 Symfony2 中使用上传的图像更新用户配置文件

> ID：14143657
> 
> 赞同：0
> 
> 时间：2013-01-03T17:08:02.027
> 
> 标签：php, symfony

我有一个用户个人资料，允许用户上传和保存个人资料图片。

我有一个 UserProfile 实体和一个 Document 实体：

**实体/UserProfile.php**

```
namespace Acme\AppBundle\Entity\Profile;
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 * @ORM\Table(name="ISUserProfile")
 */
class UserProfile extends GenericProfile
{

    /**
     * @ORM\OneToOne(cascade={"persist", "remove"}, targetEntity="Acme\AppBundle\Entity\Document")
     * @ORM\JoinColumn(name="picture_id", referencedColumnName="id", onDelete="set null")
     */
    protected $picture;

    /**
     * Set picture
     *
     * @param Acme\AppBundle\Entity\Document $picture
     */
    public function setPicture($picture)
    {
        $this->picture = $picture;
    }

    /**
     * Get picture
     *
     * @return Acme\AppBundle\Entity\Document
     */
    public function getPicture()
    {
        return $this->picture;
    }
} 
```

**实体/文档.php**

```
namespace Acme\AppBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\HttpFoundation\File\UploadedFile;
use Symfony\Component\Validator\Constraints as Assert;

/**
 * @ORM\Entity
 * @ORM\HasLifecycleCallbacks
 */
class Document
{

    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @ORM\Column(type="string", length=255, nullable=true)
     */
    private $path;

    /**
     * @Assert\File(maxSize="6000000")
     */
    private $file;

    public function getAbsolutePath()
    {
        return null === $this->path ? null : $this->getUploadRootDir().'/'.$this->path;
    }

    public function getWebPath()
    {
        return null === $this->path ? null : $this->getUploadDir().'/'.$this->path;
    }

    protected function getUploadRootDir()
    {
        // the absolute directory path where uploaded documents should be saved
        return __DIR__.'/../../../../web/'.$this->getUploadDir();
    }

    protected function getUploadDir()
    {
        // get rid of the __DIR__ so it doesn't screw when displaying uploaded doc/image in the view.
        return 'uploads/documents';
    }

    /**
     * @ORM\PrePersist()
     * @ORM\PreUpdate()
     */
    public function preUpload()
    {
        if (null !== $this->file) {
            $this->path = sha1(uniqid(mt_rand(), true)).'.'.$this->file->guessExtension();
        }
    }

    /**
     * @ORM\PostPersist()
     * @ORM\PostUpdate()
     */
    public function upload()
    {
        if (null === $this->file) {
            return;
        }

        $this->file->move($this->getUploadRootDir(), $this->path);

        unset($this->file);
    }

    /**
     * @ORM\PostRemove()
     */
    public function removeUpload()
    {
        if ($file = $this->getAbsolutePath()) {
            unlink($file);
        }
    }

    /**
     * Get id
     *
     * @return integer
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set path
     *
     * @param string $path
     */
    public function setPath($path)
    {
        $this->path = $path;
    }

    /**
     * Get path
     *
     * @return string
     */
    public function getPath()
    {
        return $this->path;
    }

    /**
     * Set file
     *
     * @param string $file
     */
    public function setFile($file)
    {
        $this->file = $file;
    }

    /**
     * Get file
     *
     * @return string
     */
    public function getFile()
    {
        return $this->file;
    }

} 
```

我的用户个人资料表单类型添加了一个文档表单类型以在用户个人资料页面上包含文件上传器：

**表单/UserProfileType.php**

```
namespace Acme\AppBundle\Form;

use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class UserProfileType extends GeneralContactType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
    parent::buildForm($builder, $options);
    /*
    if(!($pic=$builder->getData()->getPicture()) || $pic->getWebPath()==''){
      $builder->add('picture', new DocumentType());
    }
    */

    $builder
      ->add('picture', new DocumentType());
      //and add some other stuff like name, phone number, etc
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
      'data_class' => 'Acme\AppBundle\Entity\Profile\UserProfile',
      'intention'  => 'user_picture',
      'cascade_validation' => true,
        ));
    }

    public function getName()
    {
        return 'user_profile_form';
    }
} 
```

**表单/DocumentType.php**

```
namespace Acme\AppBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class DocumentType extends AbstractType
{
        public function buildForm(FormBuilderInterface $builder, array $options)
        {
                $builder
                        ->add('file')
                        ;
        }

        public function setDefaultOptions(OptionsResolverInterface $resolver)
        {
            $resolver->setDefaults(array(
                    'data_class' => 'Acme\AppBundle\Entity\Document',
            ));
        }

        public function getName()
        {
                return 'document_form';
        }
} 
```

在我的控制器中，我有一个更新配置文件操作：

**控制器/ProfileController.php**

```
namespace Acme\AppBundle\Controller;

class AccountManagementController extends BaseController
{

    /**
     * @param Symfony\Component\HttpFoundation\Request
     * @return Symfony\Component\HttpFoundation\Response
     */
    public function userProfileAction(Request $request) {
        $user = $this->getCurrentUser();
        $entityManager = $this->getDoctrine()->getEntityManager();

        if($user && !($userProfile = $user->getUserProfile())){
            $userProfile = new UserProfile();
            $userProfile->setUser($user);
        }

        $uploadedFile = $request->files->get('user_profile_form');
        if ($uploadedFile['picture']['file'] != NULL) {
                $userProfile->setPicture(NULL);
        }

        $userProfileForm = $this->createForm(new UserProfileType(), $userProfile);

        if ($request->getMethod() == 'POST') {
          $userProfileForm->bindRequest($request);

          if ($userProfileForm->isValid()) {
            $entityManager->persist($userProfile);
            $entityManager->flush();

            $this->get('session')->setFlash('notice', 'Your user profile was successfully updated.');
            return $this->redirect($this->get('router')->generate($request->get('_route')));
          } else {
            $this->get('session')->setFlash('error', 'There was an error while updating your user profile.');
          }
        }

        $bindings = array(
          'user_profile_form' => $userProfileForm->createView(),
        );

        return $this->render('user-profile-template.html.twig', $bindings);
    }
} 
```

现在，这段代码可以工作了……但它丑得要命。为什么我必须检查上传文件的请求对象并将图片设置为 null 以便 Symfony 意识到它需要保留一个新的 Document 实体？

当然，拥有一个简单的用户个人资料页面，可以选择将图像上传为个人资料图片应该比这更简单吗？

*我错过了什么？？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T11:20:18.610

（我不认为你现在期待一些反馈，几个月后，但也许它可以帮助其他人解决同样的问题）

我有类似的设置和目标，找到了这篇文章，在复制了一些代码后，我发现我不需要你称之为“丑陋”的“$uploadedFile”-snippet。我覆盖了 fos 注册表单，我只需要添加一个 DocumentType.php 和一个 RegistrationFormType.php（如您的用户 UserProfileType）。

我不知道为什么您的版本需要丑陋的代码。*（或者我在编写更新*表单时可能会遇到同样的问题？）。

# events - X11：从队列中移除事件

> ID：14143666
> 
> 赞同：1
> 
> 时间：2013-01-03T17:08:46.393
> 
> 标签：events, event-handling, x11

我正在使用名为 Gameplay 的引擎创建 FPS 演示。我目前正在尝试在引擎中定义一个 captureMouse() 函数，以便玩家可以环顾地图。我已经能够将光标固定到窗口的中心并使其不可见，但是当我移动鼠标时，屏幕（相机）似乎在移动时“振动”。在对 X11 函数进行了大量修改之后，我发现我用来将光标移回窗口中心的 XWarpPointer() 函数正在向事件队列添加一个“鼠标移动”事件。

**X11 问题：**如何在事件循环捕获事件之前从事件队列中识别和删除事件？

**问题：**有没有人遇到过类似的问题并以不同的方式解决？如果是这样，你做了什么？

如果我不清楚，我很抱歉。我对 X11 没有广泛的了解，但我确实需要将其添加到引擎中，这样我才能将其添加到我的游戏中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:11:04.397

我猜你正在使用 XtAppMainLoop 来处理你的事件。

这实际上是对 XtAppNextEvent 的调用，然后是 XtDispatchEvent。

如果将 XtAppMainLoop 替换为调用 XtAppNextEvent 的循环以获取下一个事件并检查其类型（XEvent 结构的类型字段）。

如果你想处理事件调用 XtDispatchEvent，什么也不做忽略它。

当 XtAppGetExitFlag 返回 true（或添加您自己的退出标志）时，循环需要退出。

# javascript - 如何在没有新行的情况下与 POST 建立链接

> ID：14143672
> 
> 赞同：0
> 
> 时间：2013-01-03T17:09:02.780
> 
> 标签：javascript, html, href

我尝试生成一些方阵，并且需要在 post 方法中发送数据，我找到了使用 javascript 和表单的解决方案，但总是新表单创建新行。否则，我将打开的表单块移出迭代，但当我按下任何数字时，它只会产生 1 个变量，它总是在“place”字段中发送 1。

```
<%
        for (int i = 1; i <= 20; i++) { %>

            <form name="submitForm" method="POST" action="buy">
            <%
                for (int j = 1; j <= 20; j++) {%>
                    <a href="javascript:;" onclick="parentNode.submit();"> <%=j%> </a>
                    <input type="hidden" name="row" value="<%=i%>"/>
                    <input type="hidden" name="place" value="<%=j%>"/>
                    <% if (j == 20) { %>
                        <p>
                    <%}%>
                <%}%>
            </form>
        <%}
%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:11:07.657

使用 CSS 确保表单显示为内联元素，而不是前后有换行符的块元素。

```
<style>form { display: inline }</style> 
```

或者

```
<form name="submitForm" method="POST" action="buy" style="display:inline"> 
```

[如何将 HTML <FORM> 显示为内联元素](https://stackoverflow.com/questions/1106720/how-to-display-html-form-as-inline-element)中讨论了一些陷阱？因为 open`<form>`标记仍然意味着段落元素的结尾，否则似乎包含它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:15:48.890

我不确定我是否理解这个问题，但我确信你不能与 POST 方法建立链接，为此你需要使用 GET 方法

# fortran - 如何在现代 Fortran 中实现位数组？

> ID：14143677
> 
> 赞同：2
> 
> 时间：2013-01-03T17:09:13.327
> 
> 标签：fortran, bit-manipulation, hpc

我是 Fortran 2008 的新手，正在尝试实施阿特金筛。在 C++ 中，我使用 a 实现了这一点，`std::bitset`但在 Fortran 2008 中找不到任何用于此目的的东西。

任何人都可以指出任何示例代码或解释其中的实施策略吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T17:32:52.453

标准 Fortran 没有我所理解的精确模拟`std:bitset`——尽管我承认我的理解可能有缺陷。一般来说，如果你想坚持标准的 Fortran，你会使用整数作为位集。如果一个整数没有足够的位数来满足您的目的，请使用整数数组。不过，这确实意味着，跟踪你的 bitset 的第 307 位在哪里的责任落在了你身上

在 2008 标准之前，您可以使用诸如`bit_size`、`iand`、和其他函数（请参阅编译器文档或 Google 以获取语言参考，或尝试[英特尔 Fortran 文档](http://software.intel.com/sites/products/documentation/doclib/stdxe/2013/composerxe/compiler/fortran-mac/index.htm#GUID-FBF4E6D5-05DC-4A7C-8121-2EAA8940B33B.htm)）进行位操作。`ibset``btest`

如果您不熟悉 Fortran 的`boz`文字，请熟悉它们。例如，您可以使用如下语句设置整数的位

```
integer :: mybits
...
mybits = b'00000011000000100000000000001111' 
```

使用 ，`b edit descriptor`您也可以读取和写入二进制文字。例如语句

```
write(*,*) mybits
write(*,'(b32.32)') mybits 
```

将产生输出

```
 50462735
00000011000000100000000000001111 
```

如果您可以使用足够现代的编译器，那么您会发现 2008 年标准添加了新的位旋转函数，例如、`bge`、`bgt`等等。这些是为整数数组或整数的输入参数定义的，但我没有任何使用它们传递的经验。`dshiftl``iall`

这应该足以让你开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-30T02:12:17.520

Fortran 具有用于操作默认整数位的位内在函数。位数组很容易构建...

确定您需要多少位，除以默认整数中的位数，如果除法的模数不为零，则分配一个默认类型的整数数组，该数组的大小与您计算的 +1 相同，并且您基本上完成了。Metcalf 和 Reid 很好地介绍了位内在函数。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-02-12T14:06:34.617

您可能想要的可能如下所示：

```
program test
logical,allocatable:: flips(:)
...
allocate(flips(ntris),status=err)
call tris(ntris,...,flips)
...
end
subroutine tris(nnewtris, ...,flips)
logical flips(nnewtris)
...
if(flips(i)) then
...
end if
return
end 
```

# php - MySql 加入同一张表？

> ID：14143678
> 
> 赞同：0
> 
> 时间：2013-01-03T17:09:18.650
> 
> 标签：php, mysql

这可能以前被问过，我只是不知道如何搜索它。我认为这应该是基本的，但我无法弄清楚。

我有一个格式如下的朋友表：

> id toid fromid
> 1 45 50
> 2 50 45
> 3 46 45
> 4 45 46
> 5 40 45

登录的成员是`$member_number`......在这种情况下是“45”。

和字段对应于成员 ID `"toid"`。`"fromid"`如果成员“45”已登录，我将如何编写一个 SELECT 查询来获取与他们成为朋友的所有成员？

为了让他们成为朋友，必须有互惠的朋友行。例如，在上面，成员 45 和 50 是朋友，因为他们是往来的朋友（在第 1 行和第 2 行中）。45 和 46 也是如此，如第 3 行和第 4 行所示。但是，40 和 45 不是朋友，因为没有往复行。

所以 Select 语句的结果应该是... 50, 46。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T17:14:15.410

你可以使用两个选择的联合，像这样

```
select fromid from <table> where toid = $member_number
union
select toid from <table> where fromid = $member_number 
```

[union](https://dev.mysql.com/doc/refman/5.5/en/union.html)具有过滤掉重复项的额外好处，因此在您的示例中 50 不会出现两次。

确保 toid 和 fromid 都被索引（单独或作为另一个索引的最左边部分），并且此查询将快速进行。

此外，不需要 id 列（在我看来），您在 toid 和 fromid 上放置了一个主键，这足以识别该表中的任何行。

可以在[SQLFiddle看到一个示例](http://sqlfiddle.com/#!2/1f5776/1)

# java - Java - JUnit 测试生成器

> ID：14143680
> 
> 赞同：21
> 
> 时间：2013-01-03T17:09:21.423
> 
> 标签：java, testing, junit4

我想知道自动生成 JUnit4 测试的好工具。通过自动生成，我的意思是如果我编写一个 .java 文件，那么应该使用方法占位符和设置/拆卸来创建相同的测试文件（如 eclipse 的自动生成构造函数功能）

我找到了一些，但我还没有全部尝试过，坦率地说，我对过多的选择感到不知所措。我想知道是否有人尝试了其中的一些/全部，并且有来自这些或任何其他的任何建议。

*   [http://moreunit.sourceforge.net/](http://moreunit.sourceforge.net/)
*   [http://sourceforge.net/projects/junitgenerator/](http://sourceforge.net/projects/junitgenerator/)
*   [http://sourceforge.net/projects/junittestmaker/](http://sourceforge.net/projects/junittestmaker/)
*   [http://jub.sourceforge.net/](http://jub.sourceforge.net/)
*   [http://testcasegen.sourceforge.net/](http://testcasegen.sourceforge.net/)
*   [http://www.softpedia.com/get/Programming/Other-Programming-Files/JUnit-Test-Generator.shtml](http://www.softpedia.com/get/Programming/Other-Programming-Files/JUnit-Test-Generator.shtml)
*   [http://mediakey.dk/~cc/generate-junit-tests/](http://mediakey.dk/~cc/generate-junit-tests/)
*   [http://developers.google.com/java-dev-tools/codepro/doc/features/junit/test_case_generation?hl=hu-HU](http://developers.google.com/java-dev-tools/codepro/doc/features/junit/test_case_generation?hl=hu-HU)
*   [http://agile.csc.ncsu.edu/SEMaterials/tutorials/fit/](http://agile.csc.ncsu.edu/SEMaterials/tutorials/fit/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T17:14:33.500

我使用 Eclipse 插件 [**MoreUnit**](http://moreunit.sourceforge.net/)。它可以生成测试类和测试方法。它还显示了哪些方法具有测试方法...

与**TestNG**（JUnit 也不错）和**EclEmma**一起使用junit 测试非常容易处理并跟踪代码覆盖率

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-11T14:17:00.937

一些建议：[Randoop](https://code.google.com/p/randoop/)、[AgitarOne](http://www.agitar.com/solutions/products/automated_junit_generation.html)和[EvoSuit](http://www.evosuite.org/downloads/) for Java。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-03-06T16:43:24.493

IntelliJ IDEA的**[Squaretest](https://squaretest.com/)**插件运行良好。它可以使用大量所需的样板代码自动生成测试类。它支持使用 JUnit4、JUnit5、AndroidJUnit4 或 Robolectric3 测试框架在 Java 或 Groovy 中创建测试。

*免责声明*：我创建了 Squaretest 插件。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-08-14T13:39:09.817

[CodePro Analytix](https://developers.google.com/java-dev-tools/download-codepro) Plugin for Eclipse 也不错。对我来说最重要的是它会生成多个测试用例，涵盖方法的所有执行路径，分析死代码和依赖关系，并具有许多其他功能。在此处查看[用户指南](https://developers.google.com/java-dev-tools/codepro/doc/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-12T16:21:43.490

我最喜欢的是[JUnit-Tools](http://www.junit-tools.org)来生成 JUnit 测试等等。这是一个eclipse插件并且是最新的。此外，还有许多配置和适应的可能性。

# r - R lattice：更改面板标题布局

> ID：14143682
> 
> 赞同：2
> 
> 时间：2013-01-03T17:09:25.560
> 
> 标签：r, lattice

我有一个带有两个条件的格子图：一个条件 (x1) 有 4 个级别，一个条件有 2 个级别 (x2)。该图对每个变量 x1 和 x2 都有一个条纹（edit1：x3 是具有 2 个级别的第三个变量）：

```
df <- data.frame(y = runif(100,0,10)
                 , x1 = rep(c("A","B","C","D"),25)
                 , x2 = as.numeric(c(runif(100)<0.5))
                 , x3 = c(runif(100) < 0.5)
                 )
df$x3 <- with(df, ifelse( x3 == TRUE, "R","S"))
histogram( ~y | x1 + as.factor(x2), data=df) 
```

上面板包含 x2 的第一层，下面板包含第二层。x1 的条带根据 x1 的层数（垂直线）进行划分。这是有道理的。但是 x2 的条带也是根据 x1 的级别数来划分的，分别显示 4 倍级别 0 和 1。我希望只看到条带 x1 的一个标签。这是代码提供的内容：

```
0000
ABCD 
```

我想看看这个：

```
 0
ABCD 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T17:36:04.313

此解决方案不会合并条带名称，但会提供条带名称的替代显示。`useOuterStrips()`包中有一个函数`latticeExtra`可以将一个变量的条形名称放在图的一侧。

```
library(latticeExtra)
useOuterStrips(histogram( ~y | x1 + as.factor(x2), data=df)) 
```

![在此处输入图像描述](../Images/1638f6bf329d0cd467b3a8145d56cbaa.png)

# c# - 在较长的运行过程中禁用 WPF 按钮，MVVM 方式

> ID：14143683
> 
> 赞同：19
> 
> 时间：2013-01-03T17:09:28.847
> 
> 标签：c#, wpf, data-binding, mvvm

我有一个 WPF/MVVM 应用程序，它由一个带有几个按钮的窗口组成。
每个按钮都会触发对外部设备（[USB 导弹发射器](http://www.dreamcheeky.com/thunder-missile-launcher)）的调用，这需要几秒钟。

设备运行时，GUI 被冻结。
*（**这没关系**，因为该应用程序的唯一目的是调用 USB 设备，而在设备移动时您不能做任何其他事情！）*

唯一有点难看的是，当设备移动时，冻结的 GUI 仍然接受额外的点击。
当设备仍然移动并且我再次单击同一个按钮时，设备会在第一次“运行”完成后立即再次开始移动。

因此，我想在单击一个按钮后立即禁用 GUI 中的所有按钮，并在按钮的命令完成运行后再次启用它们。

我找到了一个看起来符合 MVVM 的解决方案。
*（至少对我来说......请注意，我仍然是 WPF/MVVM 初学者！）*

问题是当我调用与 USB 设备通信的外部库时，此解决方案不起作用（如：按钮未禁用）。**但是**
禁用 GUI 的实际代码是正确的，因为当我将外部库调用替换为.**`MessageBox.Show()`**

 **我已经构建了一个重现问题的最小工作示例（[完整的演示项目在这里](https://github.com/christianspecht/code-examples/tree/master/WpfDatabindingQuestion)）：

这是视图：

```
<Window x:Class="WpfDatabindingQuestion.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <StackPanel>
            <Button Content="MessageBox" Command="{Binding MessageCommand}" Height="50"></Button>
            <Button Content="Simulate external device" Command="{Binding DeviceCommand}" Height="50" Margin="0 10"></Button>
        </StackPanel>
    </Grid>
</Window> 
```

...这是 ViewModel *（使用[`RelayCommand`来自 Josh Smith 的 MSDN 文章](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx#id0090030)）*：

```
using System.Threading;
using System.Windows;
using System.Windows.Input;

namespace WpfDatabindingQuestion
{
    public class MainWindowViewModel
    {
        private bool disableGui;

        public ICommand MessageCommand
        {
            get
            {
                return new RelayCommand(this.ShowMessage, this.IsGuiEnabled);
            }
        }

        public ICommand DeviceCommand
        {
            get
            {
                return new RelayCommand(this.CallExternalDevice, this.IsGuiEnabled);
            }
        }

        // here, the buttons are disabled while the MessageBox is open
        private void ShowMessage(object obj)
        {
            this.disableGui = true;
            MessageBox.Show("test");
            this.disableGui = false;
        }

        // here, the buttons are NOT disabled while the app pauses
        private void CallExternalDevice(object obj)
        {
            this.disableGui = true;
            // simulate call to external device (USB missile launcher),
            // which takes a few seconds and pauses the app
            Thread.Sleep(3000);
            this.disableGui = false;
        }

        private bool IsGuiEnabled(object obj)
        {
            return !this.disableGui;
        }
    }
} 
```

我怀疑打开 a`MessageBox`会在后台触发一些在我调用外部库时**不会发生的事情。**
但我无法找到解决方案。

我也试过：

*   实现`INotifyPropertyChanged`（并创建一个属性，并在更改它时`this.disableGui`调用）`OnPropertyChanged`
*   `CommandManager.InvalidateRequerySuggested()`到处打电话
    *（我发现在SO上对类似问题的几个答案中）*

有什么建议么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-04T10:52:08.757

尝试这个：

```
//Declare a new BackgroundWorker
BackgroundWorker worker = new BackgroundWorker();
worker.DoWork += (o, ea) =>
{
    try
    {
        // Call your device

        // If ou need to interact with the main thread
       Application.Current.Dispatcher.Invoke(new Action(() => //your action));
    }
    catch (Exception exp)
    {
    }
};

//This event is raise on DoWork complete
worker.RunWorkerCompleted += (o, ea) =>
{
    //Work to do after the long process
    disableGui = false;
};

disableGui = true;
//Launch you worker
worker.RunWorkerAsync(); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-03T17:17:30.563

好的，该`CanExecute`方法不起作用，因为单击会立即使您进入长期运行的任务。
所以我会这样做：

1.  让您的视图模型实现 INotifyPropertyChanged

2.  添加一个类似于以下内容的属性：

    ```
    public bool IsBusy
    {
        get
        {
            return this.isBusy;
        }
        set
        { 
            this.isBusy = value;
            RaisePropertyChanged("IsBusy");
        }
    } 
    ```

3.  以这种方式将您的按钮绑定到此属性：

    ```
    <Button IsEnabled="{Binding IsBusy}" .. /> 
    ```

4.  在您的 ShowMessage/CallExternal 设备方法中添加该行

    ```
    IsBusy = true; 
    ```

应该做的伎俩

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-10-21T09:04:23.337

我认为这更优雅一点：

XAML：

```
<Button IsEnabled="{Binding IsGuiEnabled}" Content="Simulate external device" Command="{Binding DeviceCommand}" Height="50" Margin="0 10"></Button> 
```

C#（使用异步和等待）：

```
public class MainWindowViewModel : INotifyPropertyChanged
{
    private bool isGuiEnabled;

    /// <summary>
    /// True to enable buttons, false to disable buttons.
    /// </summary>
    public bool IsGuiEnabled 
    {
        get
        {
            return isGuiEnabled;
        }
        set
        {
            isGuiEnabled = value;
            OnPropertyChanged("IsGuiEnabled");
        }
    }

    public ICommand DeviceCommand
    {
        get
        {
            return new RelayCommand(this.CallExternalDevice, this.IsGuiEnabled);
        }
    }

    private async void CallExternalDevice(object obj)
    {
        IsGuiEnabled = false;
        try
        {
            await Task.Factory.StartNew(() => Thread.Sleep(3000));
        }
        finally
        {
            IsGuiEnabled = true; 
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-03T23:30:47.990

因为您`CallExternalDevice()`在主线程上运行，所以在该工作完成之前，主线程没有时间更新任何 UI，这就是按钮保持启用状态的原因。您可以在单独的线程中开始长时间运行的操作，您应该会看到按钮按预期被禁用：

```
private void CallExternalDevice(object obj)
{
    this.disableGui = true;

    ThreadStart work = () =>
    {
        // simulate call to external device (USB missile launcher),
        // which takes a few seconds and pauses the app
        Thread.Sleep(3000);

        this.disableGui = false;
        Application.Current.Dispatcher.BeginInvoke(new Action(() => CommandManager.InvalidateRequerySuggested()));
    };
    new Thread(work).Start();
} 
```**

# php - 实现 3 结构模型（域对象、数据映射器和服务）的一些不确定性

> ID：14143690
> 
> 赞同：4
> 
> 时间：2013-01-03T17:09:48.367
> 
> 标签：php, oop, model-view-controller, design-patterns, datamapper

正如标题所示，我在实现 3 结构模型（域对象、数据映射器和服务）时遇到了一些小问题。

过去，当有人在我的网站上注册时，我会简单地做

```
$user->register($firstName, $lastName, $emailAddress, $username...); 
```

并且该方法将按这样的步骤运行

```
1\. Check if the form sent was valid.
2\. Check if all the required fields were filled.
3\. Check the if the lengths of strings were valid and the range of integers etc.
4\. Check if the input is in the correct format (regex).
5\. Check if the username is already taken and if the email address already exists
   in the database
6\. etc. etc. 
```

所有这一切都很好，但我试图摆脱这样做，因为我希望我的代码更可重用和可测试。

现在，使用这 3 个结构模型，域对象和数据映射器应该通过服务进行通信，以使它们彼此隔离，所以这是我对用户服务的想法

```
class UserService {

    public function register($firstName, $lastName, $email...) {

        $userDO= $this->domainObjectFactory->build('User');
        $mapper  = $this->dataMapperFactory->build('User');

        // Is this where I start doing my validation like in the steps above???
        // And if this is where I start doing my checks, when I get to the part
        // where I have to check if the username they want is already taken how
        // how do I do that check?

    }    

} 
```

然后实际运行，我会像这样从我的控制器中执行它

```
$userService = $this->serviceFactory->get('user');
$result = $userService->register($_POST['firstName']....); 
```

逻辑（if's 和 else's）必须`register()`放在我`UserService`班级的方法中，对吗？因为如果当我到达需要数据库进行一些检查的阶段时他们进入域对象，例如用户名是否已经存在，我将如何访问数据库？我真的不知道，因为域对象不应该知道有关数据源的任何信息。

必须有一种方法可以访问数据库以进行小型查询，例如检查用户名或电子邮件地址是否已经存在以及需要完成的大量其他小型查询。

我有很多实体/域对象需要执行大量小查询，过去我的模型可以从任何方法中访问数据库并且可以执行这些查询，但这似乎不允许使用这 3 结构模型我很想知道什么是正确的方法，因为必须有一种方法。

我一直在飞行，直到我发现模型是一个分为 3 个结构的层。

任何帮助或朝着正确的方向推动将不胜感激，尤其是现实生活中的好例子。互联网似乎缺少针对我的特定问题的那些。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-04T08:42:27.270

我正在经历与您现在相同的事情（很有趣，对于这个确切的问题 - 用户注册/授权）。

我的一条建议是，您不应将模型限制为仅 3 层（在本例中为 3 个类）。一个模型应该有尽可能多的类，以便在保持 SRP（单一责任原则）完整性的同时完成工作。

例如，您可能还希望使用 UserTableGateway 类来补充 UserDataMapper，并使用 UserCollection 类来允许潜在的分页功能或一般用户列表。所有这些都可能是您的模型和 UserService 层的一部分。

要回答您关于注册过程特定逻辑的问题，是的，最合适的位置是在 UserService 类的注册方法中。

说了这么多，您可能想在这里考虑一下您的域结构。UserService 是最适合注册的地方（以及扩展名、登录、恢复密码、更改密码等）吗？

也许这些东西可能是与帐户相关的完全不同模型的一部分。服务类可能是这样的：

```
class Account 
{
    // Think of this as AccountService, it will have a number of collaborators,
    // including an Authenticator class for loggin in, a Session class for managing the session
    // and of course various persistence classes for storing the user, session and credentials

    public function register(UserInterface $user) {}
    public function login($email, $password) {}
    public function logout(UserInterface $user, $session_id) {}
    public function changePassword($user_id, $old_password, $new_password) {}
    public function recoverPassword($user_id, $email) {}
} 
```

鉴于 UserService 可能要负责许多其他事情，因此将与用户帐户相关的所有内容保存在其自己的服务类中是有意义的。

从概念上讲，无论如何，一个帐户与用户是不同的，如果它在概念上有所不同，它应该有自己的类别。

现在，就获取 Account 服务类所需的依赖项而言，在我对复杂系统设计的理解中，这超出了现阶段的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T00:20:30.323

This is an interesting question. I suppose your user Data Mapper has methods for finding & loading users based on some criteria (like username). Therefore, in this case I would do the check inside UserService::register by trying to find a user having the provided username (if it exists):

```
 if ($mapper->findUserByUsername($username)) { 
    // username is already taken, handle this special case
} 
```

By the way, I don't know if you read this, but a very good guide is Martin's Fowler book - [Patterns of Enterprise Application Architecture](http://www.martinfowler.com/books/eaa.html). You will find good answers for many of your questions.

# python-3.x - 修复 pyplot 子图中的轴范围

> ID：14143694
> 
> 赞同：1
> 
> 时间：2013-01-03T17:09:59.067
> 
> 标签：python-3.x, matplotlib, tkinter, subplot

我正在尝试使用 Python 的 matplotlib.pyplot 子图绘制数据集 U(x,t) 和 V(x,t)。我想手动设置第一个子图的轴，而第二个子图可以选择自己的轴：

```
import matplotlib.pyplot as plt

plt.subplot(121)
plt.pcolor(xx,tt,U)
plt.colorbar()
plt.axes([0,600,0,100])
plt.subplot(122)
plt.pcolor(xx,tt,V)
plt.colorbar()
plt.show() 
```

但是，这似乎对更改第一个子图的轴没有影响。此外，在情节生成后，我得到一个广泛的错误：

```
Exception in Tkinter callback
...
...
raise LinAlgError('Singular matrix')
numpy.linalg.linalg.LinAlgError: Singular matrix 
```

但是，当我从代码中删除上述绘图命令时，错误消失了。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T20:22:09.597

您可以尝试调整 xlim 和 ylim 属性，而不是尝试设置轴本身：

```
import matplotlib.pyplot as plt
from numpy import *
xx = arange(0,700,30)
tt = arange(0,100,5)
U = outer(xx,tt)
V = outer(xx**(1/2),tt/4)
plt.subplot(121)
plt.pcolor(tt,xx,U)
plt.colorbar()
#plt.axes([0,600,0,100])

plt.xlim(0,100)
plt.ylim(0,600)

plt.subplot(122)
plt.pcolor(tt,xx,V)
plt.colorbar()

plt.show() 
```

![脚本输出](../Images/f7fbce8f958adf56e29d01b9a6142e3f.png)

# jquery - jQuery .post 在 Chrome 中给出错误，而不是 IE

> ID：14143695
> 
> 赞同：0
> 
> 时间：2013-01-03T17:10:00.033
> 
> 标签：jquery

我正在执行一个非常简单的发布操作，它在 IE 和 Chrome 中的行为不同。

```
// using jquery-1.8.0.min.js

// URL for post
var collectionurl2 = "/DBView/DBView/UntypedCollection"; 

// serialized form elements
var formelements = { 
  serializedformdata: JSON.stringify($('#form2').serializeArray()) 
};
$.post(collectionurl2, formelements, function (data) {
  alert("Success");
}, "json")
.error(function () {
  alert("Error! Failed posting to " + collectionurl2);
}); 
```

在 Chrome 中我得到错误警报，而在 IE 中我得到成功。我已多次确认缓存已清除。当我在控制器中设置断点时，我看到在 Chrome 中，错误在控制器被激活之前触发，因此该错误似乎与发布尝试有关，与任何响应活动无关。我不确定如何最好地进行，并希望获得有关如何调试/故障排除的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T19:36:15.940

Kundan 提到提交触发器让我看了一下默认的提交行为。我已经按照他的建议使用了普通按钮，但我需要

# ruby-on-rails - 如何在 Rails 应用程序中跟踪 Facebook 评论框插件

> ID：14143697
> 
> 赞同：0
> 
> 时间：2013-01-03T17:10:01.383
> 
> 标签：ruby-on-rails

我有 Rails 3.2 应用程序，我使用这个 FB 插件来发表评论：[https ://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/)

我可以在我的 Rails 应用程序中跟踪评论吗？例如通过 FB JSON API？最好是如果我获得我网站的所有网址，评论在哪里......有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T08:30:51.130

我从 Facebook API 文档中找到了这个解决方案： [https ://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)

# c++ - 使用 QVectorIterator 时出错

> ID：14143698
> 
> 赞同：1
> 
> 时间：2013-01-03T17:10:06.293
> 
> 标签：c++, qt

[我对QVectorIterator](http://doc.qt.digia.com/qt/qvectoriterator.html#QVectorIterator)有一个奇怪的问题

我尝试他们提供的示例：

```
 QVector<float> vector;
 QVectorIterator<float> i(vector);
 while (i.hasNext())
     qDebug() << i.next(); 
```

但它不会编译，它说：

> vector 不是类型

. 你知道为什么吗 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:30:50.487

你可能有类似的东西：

```
using namespace std; 
```

以上。作为 std 命名空间的一部分，有模板类`std::vector`，因此您的声明会导致名称冲突，因为您尝试使用类已使用的名称来命名变量。要解决它，要么删除`using namespace std`（但您需要始终完全限定 std 命名空间中的所有内容），或者只需为您的变量选择其他名称。

# c++ - 扫描进程内存

> ID：14143700
> 
> 赞同：1
> 
> 时间：2013-01-03T17:10:12.080
> 
> 标签：c++, windows, debugging, memory

我想编写一个进程扫描程序来检测恶意代码，我需要扫描内存中加载的 PE 可执行文件的每个部分。我一直想知道如何做到这一点，在我看来，有两种可行的解决方案：

*   读进程内存

优点：易于使用缺点：必须读取和复制内存到缓冲区，由于缓冲区有限，无法读取整个进程内存，搜索也很困难，因为一次复制到缓冲区的内存“窗口”很小

*   将 DLL 注入进程的内存

优点：能够直接访问进程内存，无需复制

我的问题是：是否有另一种方法来完成对另一个进程的内存的完整内存扫描（假设我有这样做的特权）？如果不是：如果我需要一次读取一个小“窗口”，我应该如何处理扫描整个内存的需要？

# c# - 将控制台输出写入文件

> ID：14143703
> 
> 赞同：4
> 
> 时间：2013-01-03T17:10:18.413
> 
> 标签：c#, console, output

对此真的很陌生，我已经阅读了这里的答案，到目前为止他们已经提供了帮助，但我仍然有点卡住。

我设法创建了一个程序，显示来自 DOB 输入的用户星号。

现在我想将结果发送到文本文件。我可以创建文件，但我不知道如何将程序的控制台输出/结果发送到文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T17:15:36.303

```
Console.WriteLine("Hello World");
FileStream fs = new FileStream("Test.txt", FileMode.Create);
// First, save the standard output.
TextWriter tmp = Console.Out;
StreamWriter sw = new StreamWriter(fs);
Console.SetOut(sw);
Console.WriteLine("Hello file");
Console.SetOut(tmp);
Console.WriteLine("Hello World");
sw.Close(); 
```

[http://msdn.microsoft.com/en-us/library/system.console.setout.aspx](http://msdn.microsoft.com/en-us/library/system.console.setout.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T17:13:54.080

如果您已经计算出出生日期并将其写入控制台，那么您将答案存储在变量中，那么您需要做的就是将其写入文本文件 - 除非我在问题中遗漏了一些内容？

[http://msdn.microsoft.com/en-us/library/aa287548(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa287548(v=vs.71).aspx)

# c# - 选择 DropDownList 项目总是返回第一个项目

> ID：14143705
> 
> 赞同：1
> 
> 时间：2013-01-03T17:10:24.140
> 
> 标签：c#, asp.net, webforms

我似乎在使用 DropDownList 时遇到了一些问题。我有一个按钮，通常应该从选定的 DropDownList 中获取文本，并在按钮单击时在我的代码中进行比较。问题是 DropDownList 每次都返回第一项。这是我的代码：

```
 <asp:DropDownList ID="SubcategoryList" runat="server" 
                DataSourceID="SubCategoryDataSource" DataTextField="SubCategoryName" 
                DataValueField="CategoryId">
  </asp:DropDownList>
<asp:SqlDataSource ID="SubCategoryDataSource" runat="server" 
                ConnectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\ASPNETDB.MDF;Integrated Security=True;User Instance=True" 
                ProviderName="System.Data.SqlClient" 

                SelectCommand="SELECT [SubCategoryName], [CategoryId] FROM [forum_subcategories] WHERE ([CategoryId] = @CategoryId)">
                <SelectParameters>
                    <asp:ControlParameter ControlID="CategoryListSelect" Name="CategoryId" 
                        PropertyName="SelectedValue" Type="Int32" />
                </SelectParameters>
            </asp:SqlDataSource>

string item = SubcategoryList.SelectedItem.Text; 
```

每次我按下按钮而不是 item 获取我选择的项目的值时，我都会得到第一个 Item 的值。

我在这里做错了什么？

**按钮点击代码**

```
protected void Button9_Click( object sender , EventArgs e ) {
        try
        {
            Label4.Visible = true;
            Label4.Text = "Subcategory deleted";

            string itemSelected = SubcategoryList.SelectedItem.Text;
            DataAccess.insertDeleteCategory(itemSelected , "forum_delete_subcategory");
            addForumData();
        }catch(Exception ex)
        {
            Label4.Text = ex.Message;
        }

} 
```

# ajax - 使用 AJAX 加载页面以允许在 Drupal 中连续播放音乐

> ID：14143709
> 
> 赞同：0
> 
> 时间：2013-01-03T17:10:42.573
> 
> 标签：ajax, drupal

我正在寻找创建一个将在页面加载之间连续播放的音乐播放器。经过一番研究，我认为 AJAX 是最好的方法。

我希望使用 AJAX（减去音乐播放器）将所有网站内容加载到一个容器中，并将音乐播放器放在页面底部的单独容器 div 中。

这将如何完成？谢谢先进！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T06:32:33.873

在 drupal stack Exchange 站点上提出了类似的问题，您应该能够在那里找到一些好的答案。

[https://drupal.stackexchange.com/questions/35893/persistent-audio-player](https://drupal.stackexchange.com/questions/35893/persistent-audio-player)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T14:37:46.430

[Ajax 页面](http://drupal.org/sandbox/jamix/1988012)可以通过 Ajax 轻松加载每个页面。可以将播放器放置在 Ajax 加载区域之外的区域中，以进行连续播放。项目页面上有演示链接，请查看。

# xcode - EXC_BAD_ACCESS 仅在 10.6.8

> ID：14143713
> 
> 赞同：0
> 
> 时间：2013-01-03T17:10:52.110
> 
> 标签：xcode, macos

我试图让我的应用程序在 10.6 版上运行，但是当我这样做时，我得到一个 EXC_BAD_ACCESS 异常。当我在具有最新版本的计算机上运行它时，它运行良好，但由于某种原因，它无法在低于 7 的版本上运行。由于我不是在 10.6 计算机上开发，所以我只需要查看崩溃日志：

```
Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x0000000000000000
Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Thread 0 Crashed:  Dispatch queue: com.apple.main-thread
0   com.apple.CoreFoundation        0x00007fff87604930 CFDictionaryGetValue + 96
1   com.apple.CFNetwork             0x00007fff810814d9 CFHTTPCookieCreateWithProperties +         111
2   com.apple.Foundation            0x00007fff88812f4c -[NSHTTPCookie initWithProperties:]     + 29
3   com.apple.Foundation            0x00007fff88813243 +[NSHTTPCookie     cookieWithProperties:] + 50 
```

这是崩溃日志的主要部分。尝试获取字典值似乎会崩溃，但我不确定如何阅读这些值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T18:06:44.967

好的，我能够解决它。我用这样的方法加载了一个cookie：

```
- (NSHTTPCookie *)loadCookie {
    NSDictionary *properties = [[NSUserDefaults standardUserDefaults] dictionaryForKey:kDefCookie];
    return [NSHTTPCookie cookieWithProperties:properties[COOKIE_KEY]];
} 
```

我将 cookie 属性保存为默认值，以便可以跨会话保存用户 cookie。在最新版本上运行，当默认值中没有存储 cookie 时，此方法为我返回 nil。出于某种原因，这似乎不适用于 10.6。我改变了这样的方法，现在它工作得很好。

```
- (NSHTTPCookie *)loadCookie {
    NSDictionary *properties = [[NSUserDefaults standardUserDefaults] dictionaryForKey:kDefCookie];
    if (properties)
        return [NSHTTPCookie cookieWithProperties:properties[COOKIE_KEY]];
    else return nil;
} 
```

感谢 Carter Pape 帮助我阅读崩溃日志。我非常关注 cfDictionary 部分，我没有阅读之前的内容

# jquery-ui - Jquery选项卡，选项卡内的文本在Chrome中溢出其边框

> ID：14143716
> 
> 赞同：0
> 
> 时间：2013-01-03T17:10:57.990
> 
> 标签：jquery-ui

![溢出的图像](../Images/849959704637f3b586368e4a60644ace.png)

正如您从图像中看到的那样，它显示文本溢出选项卡边框..但是单击选项卡时，溢出神奇地消失了。

所以基本上这个问题在加载过程中仍然存在，并且只在 chrome 中存在。在 firefox 和 iE 中完美工作

有没有办法解决这个问题？我花了几个小时调整 css 但无济于事。

**html**

```
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Post</a></li>
        <li><a href="#tabs-2">Draw</a></li>
        <li><a href="#tabs-3">Snapshot</a></li>
    </ul>

    <div id="tabs-1">
        <p>containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p><br>
        <p>containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p><br>
        <p>containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p><br>
    </div>

    <div id="tabs-2">
        <p>containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p><br>
    </div>

    <div id="tabs-3">
        <p>containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p><br>

    </div>
</div> 
```

**CSS**

```
#tabs{background: none;width:100%;} 
```

**Javascript**

```
<script type="text/javascript">
    $(function() {
        //tabs
        $( "#tabs" ).tabs({collapsible: true});

    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T20:25:41.197

我找到了解决方案，这种奇怪的行为是由于我调整了 jquery-ui.css 而发生的。

# arrays - 对 tcl 数组进行排序并获取数组键。

> ID：14143720
> 
> 赞同：2
> 
> 时间：2013-01-03T17:11:11.300
> 
> 标签：arrays, tcl, sorting

嗨，我有一个带有基本键值对的数组，我想对其进行排序，然后获取键。数组内容是这样的：

```
arrVal {
    123adf45ad    ABCD.1
    aldfhr435d    ABCD.9
    lkh45q9er4    ABCD
    1234dartf4    ABCD4
} 
```

所以基本上我的数组键是某种加密的 id，值是字符串值。由于我无法根据数组的键对数组进行排序，所以我做了这样的事情：

```
foreach {key in array..} {
    lappend mylist [$arrVal($key)]; 
}
set mylist [lsort $mylist]; 
```

现在对于排序列表，我想针对这些值提取数组键。我找不到任何可以根据其值提取数组键的命令。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T18:00:20.937

基本上你就快到了。您想要的是一个反向映射，它不是语言（或实际上是大多数语言）中内置的东西，而是一个概念：另一个数组，其中第一个数组的值作为键，第一个数组的键作为值：

```
array set reverseMap {}
foreach {key val} [array get arrayVal] {
    set reverseMap($val) $key
} 
```

现在您可以像这样获取密钥：

```
set secondKey $reverseMap([lindex $mylist 1]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T21:22:55.133

Here's a more step-by-step method:

```
array set arrVal {
    123adf45ad    ABCD.1
    aldfhr435d    ABCD.9
    lkh45q9er4    ABCD
    1234dartf4    ABCD4
}
set arrValList [list]
foreach {key val} [array get arrVal] {lappend arrValList [list $key $val]}
set sortedKeys [list]
foreach pair [lsort -index 1 $arrValList] {lappend sortedKeys [lindex $pair 0]}
puts $sortedKeys  ;# lkh45q9er4 123adf45ad aldfhr435d 1234dartf4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T18:34:44.337

You can get a list of all the keys in an array with [array names](http://www.tcl.tk/man/tcl8.6/TclCmd/array.htm#M9).

```
set mylist [lsort [array names arrVal]] 
```

# ruby-on-rails - 如果在 ImageMagick 中请求 2 个注释，我如何放大两个文本？

> ID：14143721
> 
> 赞同：0
> 
> 时间：2013-01-03T17:11:11.267
> 
> 标签：ruby-on-rails, imagemagick, paperclip

我的代码是这样写的。
它将“text_here”插入到上传的图像文件中。
此文本为白色，后面有黑色阴影。
尽管我说**-pointsize 15**两次，但它只扩大了

```
has_attached_file :user_avatar,
    :styles => {
    :thumb=> "100x100>",
    :small  => "400x400>" }, 
     :convert_options => {
     :small => ' -gravity south -stroke "#000C" -strokewidth 2 -annotate 0 " text_here! " -pointsize 15 -stroke none -fill white -annotate 0 " text_here! " -pointsize 15' } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T20:27:25.257

a/我不完全知道你想做什么，但把 -pointsize 放在 -annotate 之前。

b/如果一个是黑色阴影，为什么需要两个不同的点大小。

c/ 你为什么使用 stroke ？

试试这个：

```
 :small => ' -gravity south  -pointsize 15 -fill black -annotate +0+0 " text_here! " -fill white -annotate +2+2 " text_here! "' } 
```

# java - RestEasy 缺少 @NoJackson 注释

> ID：14143727
> 
> 赞同：2
> 
> 时间：2013-01-03T17:11:28.300
> 
> 标签：java, annotations, resteasy

我想寻求一些帮助，因为我没有找到 RESTeasy 的 @NoJackson 注释。

当我将课程发布到服务器时，我收到此错误：

> 17:14:57,358 WARN [org.jboss.resteasy.core.SynchronousDispatcher] 执行 POST /core/partners/addnewpartner 失败：org.jboss.resteasy.spi.ReaderException：org.codehaus.jackson.map.exc.UnrecognizedPropertyException：U nrecognized 字段“partnerentity”（类 com.sayusiando.java.dilib.modules.core.commons.core.entities.dto.partners.restproviders.PartnerEntityDTOClientProvider），未在 [来源：org.apache.catalina.connector 处标记为可忽略。 CoyoteInputStream@1aadb3c9; 行：1，列：19]（通过引用链：com.sayusiando.java.dilib.modules.core.commons.core.entities.dto.partners.restproviders.PartnerEntityD TOClientProvider["partnerentity"]）

根据互联网我应该在这种情况下使用@NoJackson注解，但没有这样的注解。

我使用 maven 并提供了这些软件包：

```
 <dependency>
      <groupId>org.jboss.resteasy</groupId>
      <artifactId>resteasy-jaxrs</artifactId>
      <version>2.3.1.GA</version>
    </dependency>
    <dependency>
      <groupId>org.jboss.resteasy</groupId>
      <artifactId>resteasy-jettison-provider</artifactId>
      <version>2.3.1.GA</version>
    </dependency> 
```

2.3.5.Final 没有这个注解。有人知道我该怎么做吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T05:06:49.040

终于，我找到了！我不得不添加 resteasy-jackson-provider 包，一切都很好！

请注意，我真的不喜欢 resteasy 的文档，因为它需要大量时间来将各个部分组合在一起。另一方面，在这个耗时的“拼凑”过程中，我学到了很多东西。

```
<dependency>
  <groupId>org.jboss.resteasy</groupId>
  <artifactId>resteasy-jackson-provider</artifactId>
  <version>2.3.5.Final</version>
</dependency> 
```

# java - 为什么我点击的时候没有出现圆圈？

> ID：14143728
> 
> 赞同：1
> 
> 时间：2013-01-03T17:11:31.897
> 
> 标签：java, swing, graphics, mouseevent

我必须使用 HoltSoft 的 Ready to Program 中的 Console 类。我不应该使用swing，所以如果我不能没有swing，请忽略这个。

```
//imports
import java.awt.*; 
import java.awt.event.*;
import hsa.*;

public class DrawLines extends Panel implements MouseListener, MouseMotionListener
{
    Console c;
    int startX, startY, prevX, prevY; //mouse coordinates
    private boolean dragging; //whether or not the mouse is being dragged
    MouseEvent e;
    public DrawLines ()
    {
        c = new Console (); //creates console window
        addMouseListener (this); //detects press/release
        addMouseMotionListener (this);//detects dragging
    }

    public void mousePressed (MouseEvent e)
    {
        while (!dragging)
        {
            try
            {
                startX = e.getX ();//get the
                startY = e.getY ();//original co-ordinates
                dragging = true;
            }
            catch (NullPointerException q) //because I kept getting this error
            {
            }
        }
    }

    public void mouseDragged (MouseEvent e)
    {
        while (dragging)
        {
            try
            {
                int x = e.getX (); //gets and
                int y = e.getY (); //updates
                prevX = x;         //the mouse
                prevY = y;         //coordinates
            }
            catch (NullPointerException q)//because I kept getting this error
            {
            }
        }
    }

    public void mouseReleased (MouseEvent e)
    {
        dragging = false; //stopped dragging
    }

    public void drawTheLine ()
    {
        mousePressed (e);
        mouseDragged (e);
        c.setColor (Color.black);
        c.fillOval (prevX, prevY, 50, 50); //draws a circle where the mouse is 
        mouseReleased (e);
    }

    public void mouseMoved (MouseEvent e){}
    public void mouseEntered (MouseEvent e){}
    public void mouseExited (MouseEvent e){}
    public void mouseClicked (MouseEvent e){}

    public static void main (String[] args)
    {
        DrawLines a = new DrawLines ();
        a.drawTheLine ();
    }
} 
```

我一直在尝试在控制台中使用 MouseListener 和 MouseMotionListener。起初，程序一直给我错误，所以我添加了 try/catch 结构。现在它没有崩溃，但屏幕上什么也没有出现。为什么？帮助？

如果我不应该使用 try/catch 来忽略它，我该怎么办？

我不允许在这个程序中使用除 Console() 之外的任何东西。这是一个课程作业。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:19:31.467

看这个：

```
public void drawTheLine ()
{
    while (true)
    {
        mousePressed (e);
        mouseDragged (e);
        c.setColor (Color.black);
        c.fillOval (prevX, prevY, 50, 50); //draws a circle where the mouse is 
        mouseReleased (e);
    }
} 
```

您传递的参数“e”为空。在这里声明：

```
public class DrawLines extends Panel 
    implements MouseListener, MouseMotionListener
{
    MouseEvent e; // IT IS NEVER SET TO ANYTHING! IT IS NULL!!! 
```

在你的构造函数中的某个地方你应该这样做，所以它不再为空：

```
e = (something); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T21:31:38.723

Swing 是一个事件驱动系统，是一个单线程系统。

这意味着您的应用程序“等待”事件发生（由事件调度线程处理）并且任何阻塞 EDT 的人，例如循环、长时间运行的进程或阻塞 IO，都会阻止您的应用程序接收这些事件的通知，使您的应用程序无法运行。

所以，如果我们看看这个...

```
 while (true)
    {
        mousePressed (e);
        mouseDragged (e);
        c.setColor (Color.black);
        c.fillOval (prevX, prevY, 50, 50);
        mouseReleased (e);
    }
} 
```

它表明...一，你不了解事件是如何在 Swing 中生成的，二，EDT 是如何实际工作的。

与某些 UI 框架不同，您不需要实现事件循环，这由 Swing 处理。像这样阻塞 EDT，将阻止它处理事件

相反，请删除它，`drawLineMethod`因为它对您没有任何作用，并将您的 main 方法替换为...

```
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            try {
                UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
            } catch (Exception ex) {
            }

            JFrame frame = new JFrame("Test");
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setLayout(new BorderLayout());
            frame.add(new DrawLines());
            // I prefer pack, but you've not specified a preferred size for your panel...
            //frame.pack();
            frame.setSize(400, 400);
            frame.setLocationRelativeTo(null);
            frame.setVisible(true);
        }
    });
} 
```

现在。我不知道这个`Console`类是什么或做什么，但是在你的鼠标事件方法中，你需要更新它，以便它可以更新它的输出......

**更新了示例**

![在此处输入图像描述](../Images/0d7d48ffe27f19953627bf9b7249b624.png)

```
public class Test {

    public static void main(String[] args) {
        new Test();
    }

    public Test() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new DrawPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class DrawPane extends JPanel {

        private Point center;
        private int radius;

        public DrawPane() {
            MouseAdapter handler = new MouseAdapter() {

                @Override
                public void mousePressed(MouseEvent e) {
                    center = e.getPoint();
                    radius = 0;
                    repaint();
                }

                @Override
                public void mouseDragged(MouseEvent e) {
                    int width = Math.max(e.getX(), center.x) - Math.min(e.getX(), center.x);
                    int height = Math.max(e.getY(), center.y) - Math.min(e.getY(), center.y);
                    radius = Math.max(width, height);
                    repaint();
                }

            };
            addMouseListener(handler);
            addMouseMotionListener(handler);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(400, 400);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (center != null) {
                g.setColor(Color.RED);
                g.fillOval(center.x - 2, center.y - 2, 4, 4);

                g.drawOval(center.x - (radius / 2), center.y - (radius / 2), radius, radius);

            }
        }
    }
} 
```

建议你花点时间读一读...

*   [使用 Swing 创建 GUI 以](http://docs.oracle.com/javase/tutorial/uiswing/)了解 Swing 的整体基础知识
*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)以了解如何在 Swing 中实际执行自定义绘画
*   [在 AWT 和 Swing 中绘画，](http://www.oracle.com/technetwork/java/painting-140037.html)因为所有希望在 Swing 中执行自定义绘画的开发人员都需要了解它是如何工作的......

**使用纯 AWT 版本更新**

正如有人向我指出的那样，OP 使用的是 AWT 而不是 Swing，为什么，因为他们似乎能够......

```
public class DrawCircleAWT {

    public static void main(String[] args) {
        new DrawCircleAWT();
    }

    public DrawCircleAWT() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                Frame frame = new Frame("Testing");
                frame.addWindowListener(new WindowAdapter() {
                    @Override
                    public void windowClosing(WindowEvent e) {
                        System.exit(0);
                    }
                });
                frame.setLayout(new BorderLayout());
                frame.add(new DrawPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class DrawPane extends Panel {

        private Point center;
        private int radius;

        public DrawPane() {
            MouseAdapter handler = new MouseAdapter() {
                @Override
                public void mousePressed(MouseEvent e) {
                    center = e.getPoint();
                    radius = 0;
                    repaint();
                }

                @Override
                public void mouseDragged(MouseEvent e) {
                    int width = Math.max(e.getX(), center.x) - Math.min(e.getX(), center.x);
                    int height = Math.max(e.getY(), center.y) - Math.min(e.getY(), center.y);
                    radius = Math.max(width, height);
                    repaint();
                }
            };
            addMouseListener(handler);
            addMouseMotionListener(handler);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(400, 400);
        }

        @Override
        public void paint(Graphics g) {
            super.paint(g);

            if (center != null) {
                g.setColor(Color.RED);
                g.fillOval(center.x - 2, center.y - 2, 4, 4);

                g.drawOval(center.x - (radius / 2), center.y - (radius / 2), radius, radius);

            }
        }
    }
} 
```

# c++ - 子类化 QTcpServer 时，如何延迟发出 newConnection() 信号？

> ID：14143730
> 
> 赞同：1
> 
> 时间：2013-01-03T17:11:41.300
> 
> 标签：c++, qt, ssl, qtcpserver, qt-signals

我想创建一个 SSL 服务器，所以我将 QTcpServer 子类化并覆盖`incomingConnection()`，在其中创建一个`QSslSocket`，设置它的描述符，然后调用`QSslSocket::startServerEncryption`. 此时我需要等待`QSslSocket::encrypted()`信号发出，然后我的服务器才应该发出`newConnection()`信号。客户端代码然后会认为它正在使用 QTcpSocket，但实际上会使用安全套接字。

但是**QTcpServer 总是** `newConnection()`在调用后发出`incomingConnection()`（我查看[了 QTcpServer 的源代码](http://qt.gitorious.org/qt/qt/blobs/4.8/src/network/socket/qtcpserver.cpp)）：

```
void QTcpServerPrivate::readNotification()
{
    // .........
        q->incomingConnection(descriptor);
        QPointer<QTcpServer> that = q;
        emit q->newConnection();
    // .........
} 
```

所以我的问题是，**有没有一种方法可以防止`QTcpServer`发出`newConnection()`，直到我准备好自己发出它？**

我想要这个的原因是我希望我的类能够被不知道它正在使用它的代码用作 QTcpServer 的直接替换，因此它必须完全像 QTcpServer 一样运行：

```
QTcpServer* getServer(bool ssl)
{
    return ssl ? new SslServer : new QTcpServer;
} 
```

我的 SslServer 类代码目前是这样的：

```
void SslServer::ready()
{
    QSslSocket *socket = (QSslSocket *) sender();
    addPendingConnection(socket);
    emit newConnection();
}

void SslServer::incomingConnection(int socketDescriptor)
{
    QSslSocket *serverSocket = new QSslSocket;
    if (serverSocket->setSocketDescriptor(socketDescriptor)) {
        connect(serverSocket, SIGNAL(encrypted()), this, SLOT(ready()));
        serverSocket->startServerEncryption();
    } else {
        delete serverSocket;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T19:04:42.187

这是一个在这种情况下可行的想法：重新定义子类`newConnection`中的信号`QTcpServer`。

如果这样做，与服务器实例连接的对象将不会收到`QTcpServer`信号的“版本”，只会收到您直接从子类发出的信号。

这是一个概念证明：类`A`是`QTcpServer`,`foo`是你试图“劫持”的信号，只是你不需要触摸的`bar`另一个（假设的）信号。`QTcpServer`

```
class A: public QObject
{
    Q_OBJECT
    public:
        A() {};
        virtual void doit() {
            qDebug() << "A::doit";
            emit foo(1);
            emit bar(1);
        }
    signals:
        void foo(int);
        void bar(int);
}; 
```

类`B`是你的子类。请注意，它重新定义了 signal `foo`，但对 没有做任何事情`bar`。

```
class B: public A
{
    Q_OBJECT
    public:
        B() {};
        virtual void doit() {
            qDebug() << "B::doit";
            emit foo(2);
            emit bar(2);
        }
    signals:
        void foo(int);
}; 
```

类`C`是一个潜在的客户，连接来自一个`B`实例的信号/槽，就像它连接一个实例一样`A`。

```
class C: public QObject
{
    Q_OBJECT
    public:
        C() {
            B *b = new B;
            connect(b, SIGNAL(foo(int)), this, SLOT(foo(int)));
            connect(b, SIGNAL(bar(int)), this, SLOT(bar(int)));
            /* 1 */
            b->doit();
            /* 2 */
            b->A::doit(); // call parent class's function
        };
    public slots:
        void foo(int i) {
            qDebug() << "foo: " << i;
        }
        void bar(int i) {
            qDebug() << "bar: " << i;
        }
}; 
```

这是构造 a 的输出`C`：

```
B::doit       // this is /* 1 */
foo:  2 
bar:  2 
A::doit       // this is /* 2 */
bar:  1 
```

……没有别的了。`A`'s`emit foo(1)`没有连接到`C`'s`foo`插槽，它永远不会到达`C`. `A`的`emit bar(1)`工作正常，该信号未受影响。

使用该设置，您可以`newConnection`在您的类准备就绪时发出，`QTcpServer`您的用户对象不会接收到该版本的信号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T17:24:52.517

要成为真正的替代品，您可能需要编辑 Qt 的实际源代码，因为您通常无法重新实现任何`Private`类调用。

如果您是唯一使用替换的人，并且您控制连接到`newConnection`信号的类...

只需连接`newConnection`到您自己的插槽`handleNewConnection`。当安全连接准备就绪时，发出`myNewConnection`并将其连接到将连接到的元素`newConnection`。

编辑：经过一番挖掘，我找到了重新连接信号的选项：

[http://qt-project.org/forums/viewthread/6820](http://qt-project.org/forums/viewthread/6820)

基本上，您重新实现`QObject::connect`，然后跟踪连接并以您需要的方式处理它们。因此，在这种情况下，您将保留信号的所有连接列表`newConnection`并将其保存在列表中，以便在断开连接时可以重新连接。确保`QObject::connect`在重新实现结束时调用。

走这条路线的另一个选择是去那里重新路由连接。当从 请求连接时`newConnection`，将其移至`myNewConnection`。

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T22:07:14.727

一个肮脏的黑客将非常短暂地阻止来自 QTcpServer 的信号。由于您知道`newConnection()`在您返回后会立即发出，所以在您返回之前`SslServer::incomingConnection()`调用。`this->blockSignals(true);`这将阻止`newConnection()`调用它连接到的任何插槽。

为确保您收到后续信号，请尽快取消阻止信号。我想当控制回到事件循环时，最早可用的时间是正确的，所以 QTimer::singleShot 可以做到这一点。

```
void SslServer::incomingConnection(int socketDescriptor)
{
    QSslSocket *serverSocket = new QSslSocket;
    if (serverSocket->setSocketDescriptor(socketDescriptor)) {
        connect(serverSocket, SIGNAL(encrypted()), this, SLOT(ready()));
        serverSocket->startServerEncryption();
    } else {
        delete serverSocket;
    }

    this -> blockSignals(true);
    QTimer::singleShot(0, this, SLOT(unblockSignals());
}

void SslServer::unblockSignals()
{
    this->blockSignals(false);
} 
```

这样做的缺点是您将丢失在`incomingConnection()`和之间可以合法发出的所有信号`unblockSignals()`。就像我说的，这是一个肮脏的黑客。

# php - 使用php的语法错误

> ID：14143734
> 
> 赞同：1
> 
> 时间：2013-01-03T17:11:44.777
> 
> 标签：php

我在这里有这条线..它给了我一个错误..你能看看这个吗？

谢谢

```
$slideshow-auto2=$this->params->get("slideshow-auto2"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T17:12:43.123

无效的变量名：

```
$slideshow-auto2=$this->params->get("slideshow-auto2");
          ^---can't have this in a var name. 
```

您正在尝试做（从 PHP 的角度来看），`$slideshow minus constant "auto2" equals ...`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T17:12:37.667

我认为您缺少**>**：

```
$slideshow->auto2=$this->params->get("slideshow-auto2");
//         ^ Right here 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T17:18:10.857

`$slideshow-auto2`不是有效的变量名。变量名中不能有连字符（PHP 将其视为减号）。

大多数其他答案都在猜测您打算使用该`->`语法。如果`$slideshow`是一个对象并且`auto2`是该对象的一个​​属性，那么这就是你想要的。

但是，考虑到其余代码行的上下文，我的猜测是您想要一个名为`$slideshow-auto2`. 不幸的是，这是不允许的。你需要解决它。您可以命名您的变量`$slideshowAuto2`或`$slideshow_auto2`其他各种替代方案，但不能命名`$slideshow-auto2`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T17:14:16.450

你试图从一个对象中减去一个属性，我猜你想访问那个属性所以添加一个'>'

```
$slideshow->auto2=$this->params->get("slideshow-auto2"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T17:15:44.813

您是否尝试在变量名中使用连字符？这不起作用，因为它被解释为减号并且从对象中减去属性不起作用。你可能想要这样的东西：

```
$slideshow->auto2=$this->params->get("slideshow-auto2"); 
```

**编辑：** 如果您不打算访问属性“auto2”，只需将连字符替换为变量名的有效字符即可。

# c++ - C++ - if 语句简化

> ID：14143736
> 
> 赞同：2
> 
> 时间：2013-01-03T17:11:46.217
> 
> 标签：c++, if-statement

> **可能重复：**
> [如何检查多个变量是否等于同一个值？](https://stackoverflow.com/questions/8196796/how-can-i-check-whether-multiple-variables-are-equal-to-the-same-value)

有没有办法写这个：

```
 if ((var1==var2) && (var2==var3) && (var3==var4) ...) 
```

变成这样的东西

```
 if (var1==var2==var3==var4 ...) 
```

?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T17:21:43.963

在 C++11 中，您可以编写一组函数，如下所示：

```
template<typename T>
bool all_equal(T const &)
{
    return true;
}

template<typename T, typename U, typename... Args>
bool all_equal(T const & a, U const & b, Args const&... c)
{
    return a==b && all_equal(b,c...);
}

int main()
{
    std::cout << all_equal(1,2,3) << '\n';
    std::cout << all_equal(1,1,1) << '\n';
} 
```

编辑：我猜史蒂夫杰索普在[这里链接的副本有同样的想法](https://stackoverflow.com/a/8198279/440119)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T17:14:40.537

没有比这更清楚的方式，不。您可以在 a 中插入值`set`并检查 if `size == 1`，但是您现在拥有的是要走的路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T17:17:46.023

本质上，没有。

如果您有一个集合，而不仅仅是零星变量，则可以应用算法来检查它们是否都相等，即`O(N)`它们是否确实相等（就像您的长语句一样）并且当它找到一个时会立即中断不是。

# java - 解析JSON时在java中转义数字符号（哈希标签）

> ID：14143739
> 
> 赞同：0
> 
> 时间：2013-01-03T17:11:50.053
> 
> 标签：java, json, parsing

我正在编写一个Android应用程序，我试图从看起来像这样的JSON中获取#text字符串

```
{
"recenttracks": {
  "track": {
    "artist": {
      "#text": "Jeremy Fisher",
      "mbid": "7be30286-3510-4bc4-a587-51d9ad7c2b47"
 ... 
```

但是由于哈希标签，我没有得到任何回报：

```
Error parsing data org.json.JSONException: No value for 
```

用 mbid 替换 #text 可以正常工作。代码：

```
try{
JSONObject container = new JSONObject(readLastFMFeed);
JSONObject recenttracks = container.getJSONObject("recenttracks");   
JSONObject track = recenttracks.getJSONObject("track");   
JSONObject artist = track.getJSONObject("artist");   
String sArtist = track.getString("#text");
Toast.makeText(LoggedIn.this, sArtist, Toast.LENGTH_LONG).show();
     }catch(JSONException e){
          Log.e("log_tag", " Error parsing data "+e.toString());
     } 
```

如何转义哈希标签？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T17:18:58.790

你不需要逃避它。你只是犯了一个小错误。代替：

```
String sArtist = track.getString("#text"); 
```

写：

```
String sArtist = artist.getString("#text"); 
```

# loops - 从循环中省略某些帖子-Wordpress

> ID：14143744
> 
> 赞同：0
> 
> 时间：2013-01-03T17:11:57.997
> 
> 标签：loops, foreach, wordpress, foreach-loop-container

我在自定义页面上有两个循环，我想从第二个循环中省略第一个循环中带有帖子 ID 的帖子（当然显示类别 36 中的所有其他帖子）。

编辑：这是 php 文件中的全部代码：

```
<?php
global $udesign_options;

// construct an array of portfolio categories
$portfolio_categories_array = explode( ',', $udesign_options['portfolio_categories'] );

if ( $portfolio_categories_array != "" && post_is_in_category_or_descendants( $portfolio_categories_array ) ) :
// Test if this Post is assigned to the Portfolio category or any descendant and switch the single's template accordingly
include 'single-Portfolio.php';
else : // Continue with normal Loop (Blog category)

get_header();

$content_position = ( $udesign_options['blog_sidebar'] == 'left' ) ? 'grid_16 push_8' : 'grid_16';
if ( $udesign_options['remove_single_sidebar'] == 'yes' ) $content_position = 'grid_24';
?>
<div id="content-container" class="container_24">
<div id="main-content" class="<?php echo $content_position; ?>">
    <div class="main-content-padding">
<?php if (have_posts()) :
        while (have_posts()) : the_post(); ?>
        <div <?php post_class() ?> id="post-<?php the_ID(); ?>">
            <div class="entry" style="margin:-30px 0 00px 0;">
<?php                           // Post Image
                            if( $udesign_options['display_post_image_in_single_post'] == 'yes' ) display_post_image_fn( $post->ID, false );
            the_content(__('<p class="serif">Read the rest of this entry &raquo;</p>', 'udesign'));
            wp_link_pages(array('before' => '<p><strong>Pages:</strong> ', 'after' => '</p>', 'next_or_number' => 'number')); ?>

            </div>

<?php
$args = array( 'category' => 36, 'post_type' =>  'post' ); 
$postslist = get_posts( $args );    
foreach ($postslist as $post) :  setup_postdata($post); 
?>     
<h2><?php the_title(); ?></h2> 
<?php the_content(); ?> 
<?php echo do_shortcode('[divider_top]'); ?>
<?php endforeach; ?> 

<div><?php comments_template();
        endwhile; else: ?>
        <p><?php esc_html_e("Sorry, no posts matched your criteria.", 'udesign'); ?></p>
<?php endif; ?></div>
    </div><!-- end main-content-padding -->
</div><!-- end main-content -->

<?php
if( ( !$udesign_options['remove_single_sidebar'] == 'yes' ) && sidebar_exist('BlogSidebar') ) { get_sidebar('BlogSidebar'); }
?>

</div><!-- end content-container -->
<?php endif; // end normal Loop ?>

<div class="clear"></div>

<?php get_footer(); ?> 
```

我想通了，这段代码需要插入 $args = array('exclude' =>theExcludedID, 'category' => 36, 'post_type' => 'post' );

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:22:33.483

根据问题的更新，似乎第一个循环显示`portfolio_categories`了自定义查询中的所有类别，很可能也包括类别 36 中的那些。

我能想到的不重复第二个循环中的帖子的唯一方法是从第一个循环中排除所有类别 36 的帖子。

我无法测试代码，但这里是如何做到这一点的想法：

在 Loop 之后添加 3 行代码，如下所示：

```
if (have_posts()) : while (have_posts()) : the_post(); // This is the Loop
$Category =  get_the_category( $post->ID );
$CatID = $Category[0]->cat_ID ; // The 0 assumes the post has only one category. If there are more, the number must be changed accordingly.
if ($CatID == 36) continue; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:27:14.347

在循环顶部使用以下内容：

```
if(get_the_ID() == theExcludedID){
    continue;
} 
```

跳过任何迭代。

# sql - 如何从表中为 sproc 提供值？

> ID：14143750
> 
> 赞同：1
> 
> 时间：2013-01-03T17:12:35.343
> 
> 标签：sql, sql-server, sql-server-2008

我需要将表中的值插入到存储过程中。例如：

```
exec mysproc @param1='col1', @param2='col2' 
```

这可以使用游标来完成，但有什么方法可以通过设置操作来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:49:14.237

我想您选择的方法将基于您可用的时间量，如果不更深入地了解逻辑，很难说这些方法中的哪一种最耗时。

有几种方法可以解决这个问题。

1.  正如罗伯特哈维所暗示的那样，您也许应该考虑修改 proc 以接受表值参数（如果您使用的是 SQL Server 2008 及更高版本）。如果没有，您可以创建一个标量 XML 参数，将其“解码”到 proc 内的表中。
2.  使用“参数数据”和 ROW_NUMBER() 填充 #table，并使用 WHILE 循环为 #table 中的每一行调用 proc。
3.  创建一个 FAST_FORWARD 类型的 CURSOR（我讨厌给出 CURSOR 建议）并迭代调用该过程。
4.  动态 SQL；使用 EXEC 或最好是 SP_EXECUTESQL 构建 SQL 命令字符串。
5.  我的观点是，一等奖将是重新设计 proc 以接受参数过滤器。假设您希望从中创建参数的数据集是过滤查询的结果：

```
SELECT Moo, Meow
FROM Woof
WHERE Fu = @ParmX 
AND Bar = @ParmY 
```

您的 proc 应该被调用，`@ParmX, @ParmY`然后内部的逻辑将以基于集合的方式进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T19:02:07.813

不能将存储过程作为“设置操作”的一部分来调用。原因可能是存储过程可能具有任意副作用，例如修改数据、发送额外的结果集（！）或关闭服务器。

游标是解决此问题的规范方法。（唉。）

当然，您可以修改存储过程以采用 TVP。不确定这对你是否可行。

# apache-flex - flash builder 4.6中的java堆错误

> ID：14143753
> 
> 赞同：1
> 
> 时间：2013-01-03T17:12:41.380
> 
> 标签：apache-flex, sdk, flash-builder

我目前正在使用 adobe flash builder 4.6 n 存在 java 堆空间错误。我每次都清理我的项目，但它不工作是否有任何永久解决方案可以解决这个问题，请尽快提供帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T18:59:19.753

**java堆错误**的出现有几个原因，比如构建一个项目，其中有太多的库，对于这种类型的项目，您必须构建单独的库，然后构建主项目。

您可以手动增加堆内存闪存构建器 4.6(FB 4.6)。1024MB 是堆内存分配的最大限制。您不能分配超过 1024MB 的内存。转到`C:\Program Files\Adobe\Adobe Flash Builder 4.6`并打开**FlashBuilder.ini**文件并将**-Xmx512m**行更新为**-Xmx1024m**。默认情况下 512MB 堆内存分配给堆。但您可以手动增加它。

**警告**

如果您尝试将堆内存增加到 1024 以上，那么您的 FB 4.6 将无法打开。

如果这不能解决您的问题，请放置一个日志文件 ![在此处输入图像描述](../Images/061b7b1e60cc3b4924b30d011745a249.png)

# sap-ase - 如何将远程 Sybase 数据库备份到本地文件？

> ID：14143755
> 
> 赞同：1
> 
> 时间：2013-01-03T17:12:42.560
> 
> 标签：sap-ase, database-backups

我远程连接到 UNIX 机器上的 Sybase 服务器。我通过 Windows 客户端上的 isql GUI 连接。我无权访问 UNIX 服务器的接口文件，因此我认为我不能将我的机器设置为远程备份服务器。我可以使用以下命令在我的 Windows 机器上获取备份吗？

将数据库 mydb 转储到“C:\mydb.dmp”

还有什么是性能损失？数据库大约 9GB。如果可能的话，我想我应该在下班时间运行这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:11:19.703

那是行不通的。您最好的选择可能是使用**bcp**实用程序从每个表中导出数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-10T23:52:16.277

您的 Windows 机器还应该：

1) 安装了 Sybase ASE AND Backup Service

2) 在两个实例中定义接口和 sql.ini 文件。

您的命令将是：

`dump database mydb to "C:\mydb.dmp"`在 wintel_bs

更多信息： http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc31644.1600/doc/html/ [san1371158725683.html](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc31644.1600/doc/html/san1371158725683.html)

# xml - VB 字符串序列 "!%Z+^"

> ID：14143758
> 
> 赞同：0
> 
> 时间：2013-01-03T17:12:48.277
> 
> 标签：xml, regex, vb.net, string

有谁知道这个序列在字符串中的用途是什么？有人告诉我他们认为这可能是回车，但我找不到任何显示这一点的东西。

我确实在代码中的某处看到字符串被转换为 XML ......这是它的用途吗？如果是这样，它有什么作用？

例子：

```
aString += "!%z^+Info: " + dt.Rows(index).Item("Info").ToString 
```

这是 XML 的用法：

```
Dim cdata As XmlCDataSection = doc.CreateCDataSection(aString) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:48:58.707

它只是纯文本，仅对使用生成的 XML 的应用程序有意义。

# c# - vs.net 鼠标滚动不断调整我的文本大小，如何摆脱这种模式？

> ID：14143760
> 
> 赞同：2
> 
> 时间：2013-01-03T17:12:48.953
> 
> 标签：c#, visual-studio

偶尔我会做一些事情，每当我使用鼠标滚动代码时，文本都会变大/变小。

我点击了逃生等，但我无法摆脱这种模式而无需重新启动 vs.net。

秘诀是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:15:20.580

`CTRL + scrollwheel`缩放 IDE。击键`CTRL`几次或模糊窗口（即，将焦点从窗口移开，有时 VS 会感到困惑）。

*   有关Visual Studio 中[缩放/缩放配置的更多信息。](http://weblogs.asp.net/jgalloway/archive/2010/04/15/visual-studio-2010-zooming-keyboard-commands-global-zoom.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T17:20:53.437

**简而言之：**这是因为**在滚动鼠标**时您可能会不小心按住`Ctrl`键盘上的键。一旦你释放你的**Ctrl**键，这个放大/缩小行为应该停止。

您可以有效地禁用此行为 - [How do I disable zoom on control-scroll in Visual Studio 2010](https://stackoverflow.com/q/2861655/1437962)。

![在此处输入图像描述](../Images/a939eaffd05f1732794b6b3ad47fbab6.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T17:26:26.710

是的，ctrl + scrolldown/scrollup 会导致缩小/缩小。您可以使用源窗口中屏幕左下方的包含缩放级别（百分比）的下拉菜单将其恢复为正常状态。100% 是正常的缩放百分比。

# java - 主 UI 线程上的 Android Runnable 和处理程序

> ID：14143766
> 
> 赞同：1
> 
> 时间：2013-01-03T17:13:21.303
> 
> 标签：java, android, thread-safety, runnable

关于 Java Andriod 处理程序：

```
handler.post(new Runnable(){
    public void run() {
        // do stuff
    }
}); 
```

据我了解，这将在处理程序实例化的任何线程上运行。所以让我们说在Android中我在主线程上实例化处理程序，那么我的问题是runnable有什么意义？您将任务添加到主 UI 线程的消息队列中，为什么不跳过可运行并创建一个方法，因为您已经在主线程上。我见过程序员这样做，我想知道为什么？

我知道我们可以做`Thread genThread = new Thread(new myRunnable());`，但我想知道主线程上是否有 Runnable 的任何值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T06:44:49.610

有时你想运行一些代码，但你不希望它立即运行，你想推迟它。根据我的经验，最常见的用途之一是当您处于布局阶段并且您希望在布局阶段完成后“排队”发生一些事情。为此，您只需将 Runnable 发布到 UI 线程的消息队列，它将被放在消息队列的末尾……这正是您想要的位置。

另一个常见的用例是如果您想从 onCreate 中找出视图的大小。在 onCreate 中，视图还没有被测量，所以这不起作用：

```
Log.d(TAG, view.getWidth()); 
```

相反，您可以这样做：

```
view.post(new Runnable() {public void run() {Log.d(TAG, view.getWidth());}}) ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:22:26.633

我建议使用**AsyncTask<>**而不是**Handlers**，因为它们更容易理解并且代码更简洁。我知道我正在转移发布的原始问题，但这只是一个建议。如果您想了解更多关于 AsyncTask<> 的信息，请点击下面的链接。

[异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)

# c# - 如何将 Control 和 ContentControl 的继承属性“传递”到 UserControl 中的元素？

> ID：14143776
> 
> 赞同：1
> 
> 时间：2013-01-03T17:14:05.573
> 
> 标签：c#, wpf, xaml

WPF 问题。我不知道谷歌是为了什么。

我有一个用户控件：

```
<UserControl x:Class="MyProj.MyControl"
             x:Name="Self"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Button />
</UserControl> 
```

我这样使用它：

```
<local:MyControl Background="Green" /> 
```

但背景似乎没有改变。这是因为按钮的背景没有改变。我希望按钮的背景使用用户控件的背景。

我想我可以这样做：

```
<UserControl x:Class="MyProj.MyControl"
             x:Name="Self"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Button Background="{Binding Path=Background, ElementName=Self" />
</UserControl> 
```

但我非常希望从 Control 和 ContentControl 继承的所有属性都应用于按钮（ToolTip、BorderThickness、BorderBrush 等）。

那么我能做些什么来代替这个：

```
<UserControl x:Class="MyProj.MyControl"
             x:Name="Self"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Button Background="{Binding Path=Background, ElementName=Self"
            ToolTip="{Binding Path=ToolTip, ElementName=Self"
            BorderThickness="{Binding Path=BorderThickness, ElementName=Self"
            BorderBrush="{Binding Path=BorderBrush, ElementName=Self"
            ...
            ...
            ...
            ... />
</UserControl> 
```

?

（注意：这是一个较小的（实际上是我可以管理的最小的）示例，它是一个较大的 UserControl，它承载了许多控件。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:25:15.750

啊。好吧，简短的回答：你不能，至少不容易。XAML 不像 HTML/CSS 那样工作。默认情况下`Button`， ( 几乎所有`Control`) 不会从其容器中继承属性。

您*可以*制作自己的`Button`, etc 控件来继承...或者，您可以声明`Style`适用于所有内容的 a 并尝试获取任何包含元素的属性（即 via `RelativeSource FindAncestor`）...或者您可以做您想做的事情在这里重新做：手动设置每个属性。

方法示例`Style`：

```
<Style TargetType="{x:Type Control}">
    <Setter 
        Property="Background" 
        Value="{Binding (Control.Background), RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Control}}}"/>
</Style> 
```

# graph-databases - 如何使用 GremlinPipeline 获取自循环路径？

> ID：14143777
> 
> 赞同：0
> 
> 时间：2013-01-03T17:14:05.707
> 
> 标签：graph-databases, gremlin

我正在使用一个允许自循环的网络（即，某些边与头部和尾部具有相同的顶点）。假设该图`g`有 3 个顶点（`adam`、`bill`和`cid`）和 3 个类型的边`reports`（`[adam-reports->bill]`、`[bill-reports->cid]`和`[adam-reports->adam]`），最后一个是本例中唯一的自反边。

```
gremlin> g = new TinkerGraph();
gremlin> adam = g.addVertex('adam');
gremlin> bill = g.addVertex('bill');
gremlin> cid = g.addVertex('cid');
gremlin> g.addEdge(adam, bill, 'reports');
gremlin> g.addEdge(bill, cid, 'reports');
gremlin> g.addEdge(adam, adam, 'reports'); 
```

在 gremlin 中，可以轻松检索自循环，因此：

```
gremlin> g.V.sideEffect{v=it}.outE('reports').inV.filter{it==v}.path
gremlin> [v[adam], e[2][adam-reports->adam], v[adam]] 
```

但是，我试图`GremlinPipeline`在 Java 中做同样的事情，但没有成功。如何构建有效的 GremlinePipeline 来执行上述操作？

```
GremlinPipeline pp = new GremlinPipeline();
// Add various pies to pp to get a valid pipeline
pp.setStarts(g.getVertices()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:31:03.750

如果您只想找到自环边，请执行以下操作：

```
g.E.filter{it.inV == it.outV} 
```

给定上面的 TinkerGraph 示例，输出为：

```
gremlin> g.E.filter{it.inV == it.outV}
==>e[2][adam-reports->adam] 
```

# testing - 如何在 Java 5 中检查 Java 6 代码？

> ID：14143782
> 
> 赞同：1
> 
> 时间：2013-01-03T17:14:23.307
> 
> 标签：testing, java-6, java-5

有人知道在 Java 5 中测试 Java 6 代码的好方法吗？我刚刚用 Java 6 完成了一些实习申请的程序，才意识到他们要我提交用 Java 5 编写的代码。我使用 eclipse，所以我尝试设置一个重复项目在 J2SE-1.5 环境中运行，它工作。这是一个正确的测试，还是我把别的东西误认为是 Java 5？我还尝试找到一个在线 Java 5 编译器来测试我的代码，但我找不到任何版本早于 Java 6 的网站。我对这类事情的更多技术方面没有太多经验，因此，任何简单的方法都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:17:38.113

是的，我认为应该在 J2SE-1.5 环境中进行测试。您是否还将“属性”窗口中的编译器设置更改为 1.5？请检查并尝试运行您的代码。据我所知，我这样做只是为了在不同版本的 Java 之间进行测试。

# android - FLASH_MODE_TORCH 工作/不工作

> ID：14143784
> 
> 赞同：0
> 
> 时间：2013-01-03T17:14:32.353
> 
> 标签：android, infinity, flashlight

我想使用以下代码构建一个手电筒应用程序。它适用于朋友的 HTC Desire HD，但不适用于我的 RAZR 和朋友的 Galaxy Nexus。我也尝试了 focus_mode_infinity 的解决方案，但仍然没有成功。

```
package com.example.flashlight;

import android.app.Activity;
import android.hardware.Camera;
import android.hardware.Camera.Parameters;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class MainActivity extends Activity {

Camera camera = null;
Parameters parameters;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

     final Button OnOff = (Button)findViewById(R.id.Switch);

    OnOff.setOnClickListener(new Button.OnClickListener() {

@Override   
public void onClick(View arg0) {

    if(camera == null) {
        camera = Camera.open();
        camera.startPreview();
        parameters = camera.getParameters();
        parameters.setFlashMode(Parameters.FLASH_MODE_TORCH);
        parameters.setFocusMode(Camera.Parameters.FOCUS_MODE_INFINITY);
        camera.setParameters(parameters);

    }
    else {
        parameters.setFlashMode(Parameters.FLASH_MODE_OFF);
        parameters.setFocusMode(Camera.Parameters.FOCUS_MODE_AUTO);
        camera.setParameters(parameters);
        camera.release();
        camera = null;

    } 

} 

});
}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-31T05:56:50.640

设置好相机参数后使用以下方法：

```
camera.startPreview(); 
```

这里的相机是你的相机对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:02:36.097

我认为 RAZR 不支持 FLASH_MODE_TORCH，我遇到了同样的问题，客户报告了一个应用程序的相同问题（Flash 不闪烁）。我建议您在设置参数以检查其是否支持之前：

```
List<String> flashModes = parameters.getSupportedFlashModes();
if (flashModes.contains(Parameters.FLASH_MODE_TORCH)) {
    // Mode supported good to go
} 
```

# java - 属性未保存在会话中

> ID：14143786
> 
> 赞同：0
> 
> 时间：2013-01-03T17:14:32.950
> 
> 标签：java, servlets, session-variables, session-cookies, sessionid

我有一个 webapp，它在我的本地环境中运行良好，但是当我将它部署到其他应用服务器时，会话部分出现了问题。

在一个 servlet 中，我将会话属性存储为

```
session.setAttribute("customer", customerObj) 
```

在其他 servlet 中，我将 this 属性设置为

```
session = request.getSession();
Customer customer = (Customer) session.getAttribute("customer") 
```

我看到客户是空的。当我检查每个请求的 jSessionId 时，ID 是相同的。是什么导致了这个问题？appServers 之间是否存在配置差异？

谢谢

weblogic.xml 中的会话描述符是这样的

```
<session-descriptor>
        <session-param>
            <param-name>CookiesEnabled</param-name>
            <param-value>true</param-value>
        </session-param>

        <session-param>
            <param-name>TrackingEnabled</param-name>
            <param-value>true</param-value>
        </session-param>

        <session-param>
            <param-name>CookieDomain</param-name>
            <param-value>.blabla.com.</param-value>
        </session-param>

        <session-param>
            <param-name>CookieComment</param-name>
            <param-value>Blabla Session Tracking Cookie</param-value>
        </session-param>

        <session-param>
            <param-name>CookieName</param-name>
            <param-value>BSession</param-value>
        </session-param>

        <session-param>
            <param-name>IDLength</param-name>
            <param-value>10</param-value>
        </session-param>

        <session-param>
            <param-name>CookieMaxAgeSecs</param-name>
            <param-value>-1</param-value>
        </session-param>

        <session-param>
            <param-name>PersistentStoreCookieName</param-name>
            <param-value>WLCOOKIE</param-value>
        </session-param>

        <session-param>
            <param-name>PersistentStoreType</param-name>
            <param-value>memory</param-value>
        </session-param>

        <session-param>
            <param-name>URLRewritingEnabled</param-name>
            <param-value>true</param-value>
        </session-param>

        <session-param>
            <param-name>InvalidationIntervalSecs</param-name>
            <param-value>60</param-value>
        </session-param>
        <session-param>
            <param-name>TimeoutSecs</param-name>
            <param-value>540</param-value>
        </session-param>

    </session-descriptor> 
```

# windows-runtime - 使用某些加密算法时的 ArgumentException 和 NotImplementedException

> ID：14143789
> 
> 赞同：0
> 
> 时间：2013-01-03T17:14:49.383
> 
> 标签：windows-runtime, windows-store-apps

我目前正在玩 Windows 运行时中的加密。使用某些加密算法时，我会得到 NotImplementedException（AesCcm，AesGcm）或 ArgumentException（AesEcb，AesEcbPkcs7，DesEcb，DesEcbPkcs7，Rc2Ecb，Rc2EcbPkcs7，Rc4，TripleDesEcb，TripleDesEcbPkcs7）。

我为每个算法使用正确的密钥长度（我认为错误的密钥长度会触发 ArgumentException）。对于 RC4，我使用大小为 1024 的密钥，因为密钥是可变的。当使用没有填充的版本时，我自己将数据填充到块长度。我有点理解带有 CCM 和 GCM 的 AES 显然没有在 Windows 8、64 位中实现。但是具有 ECB 密码模式和 RC4 的变体的 ArgumentException 很奇怪。

这是一个示例代码：

```
SymmetricKeyAlgorithmProvider symmetricKeyAlgorithmProvider =
   SymmetricKeyAlgorithmProvider.OpenAlgorithm(SymmetricAlgorithmNames.AesEcbPkcs7);

byte[] plainText = {1, 2, 3, 4, 5, 6, 7, 9, 9, 0};

const uint keySize = 256;
byte[] key = CryptographicBuffer.GenerateRandom(keySize).ToArray();

uint blockLength = symmetricKeyAlgorithmProvider.BlockLength;
byte[] initializationVector =
   CryptographicBuffer.GenerateRandom(blockLength).ToArray();

CryptographicKey cryptographicKey = 
   symmetricKeyAlgorithmProvider.CreateSymmetricKey(key.AsBuffer());

// This line throws an ArgumentException. The exception gives no hint what
// argument is meant and why the value is invalid.
byte[] cipherText = CryptographicEngine.Encrypt(cryptographicKey,
   plainText.AsBuffer(), initializationVector.AsBuffer()).ToArray(); 
```

顺便说一句：我知道欧洲央行不被认为是安全的。但微软在某些算法中包含了 ECB。那一定是有原因的（并行化左右）。

例如，相同的代码使用 AesCbcPkcs7 工作。使用 AES 和 ECB 和 PKCS7 的 .NET 类似代码，密钥长度为 256，IV 大小等于块长度，在同一台机器上也能正常工作。

ArgumentException 可能意味着什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T09:31:28.897

我自己找到了 ArgumentException 的答案：即使对于不使用它的算法（如 ECB 密码模式或 RC4），我也传递了一个初始化向量。这些算法要求初始化向量作为空值传递。

# php - MYSQL PHP 输出排序，获取输出之间的值

> ID：14143792
> 
> 赞同：0
> 
> 时间：2013-01-03T17:14:57.327
> 
> 标签：php, mysql, sorting, while-loop, output

我对推入 HTML 表的 MySQL 表有一个小问题。

这是我在数据库上的 SELECT：

```
 $result = mysql_query("

SELECT dat_eb_registrants.id, dat_eb_registrants.first_name, dat_eb_registrants.last_name, dat_eb_registrants.email, dat_eb_registrants.comment, dat_eb_registrants.amount, dat_eb_registrants.published, dat_eb_registrants.transaction_id, dat_eb_registrants.register_date, GROUP_CONCAT(dat_eb_field_values.field_value SEPARATOR '</td><td>') 
FROM dat_eb_registrants LEFT JOIN dat_eb_field_values ON dat_eb_registrants.id=dat_eb_field_values.registrant_id
WHERE `event_id` >= 20 AND `event_id` <= 25
GROUP BY dat_eb_registrants.id
ORDER BY $sort $ascdsc

"); 
```

使用以下命令将其推送到我的 HTML 表中：

```
while ($row = mysql_fetch_row($result)) {
echo "<tr>";
echo "<td>" . $row[9] . "</td>";
echo "<td>"; 
```

现在，我的问题是这样一个事实，即这会在我的表中填充几行 from `dat_eb_field_values.field_value`，并且在这些结果之间我无法获得其他行（$row[0] 到 $row[8]）。

例如，如果我的 $values 来自`dat_eb_field_values.field_value`并且我的 $data 来自`dat_eb_registants`. 这将是我的桌子：

```
| header 1 | header 2 | header 3 | header 4 | header 5 | header 6 |
-------------------------------------------------------------------
| $value1  | $value2  | $data3   | $value4  | $data1   | $data2   |
| $value1  | $value2  | $data3   | $value4  | $data1   | $data2   |
| $value1  | $value2  | $data3   | $value4  | $data1   | $data2   | 
```

提前致谢！洛朗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:20:57.463

而不是`mysql_fetch_row`使用`mysql_fetch_array`

和

`ORDER BY $sort $ascdsc`将其更改为

```
 ORDER BY '".$sort."', '".$ascdsc."' 
```

示例：通过使用`mysql_fetch_array`尝试回显此

```
 echo $row['dat_eb_registrants.id'] ; 
```

你的sql很难读

用这个

```
 SELECT dr.id, dr.first_name, dr.last_name, dr.email, dr.comment, dr.amount, dr.published, dr.transaction_id, dr.register_date, GROUP_CONCAT(df.field_value SEPARATOR '</td><td>') 
   FROM dat_eb_registrants dr 
   LEFT JOIN dat_eb_field_values df 
    ON dr.id=df.registrant_id
   WHERE `event_id` >= 20 AND `event_id` <= 25
   GROUP BY dr.id
   ORDER BY '".$sort."', '".$ascdsc."' 
```

[但是您已经在这里](https://stackoverflow.com/questions/14142729/continue-mysql-output-in-php)接受了答案！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:19:10.393

而不是回显`$row[9]`将其放入数组中的数据，然后在您认为有必要时将其吐出（并且在您检查了其他元素之后）

例如改变这个：

```
while ($row = mysql_fetch_row($result)) {
echo "<tr>";
echo "<td>" . $row[9] . "</td>";
echo "<td>"; 
```

对此：

```
while ($row = mysql_fetch_row($result)) {
$myArray[] ="<tr><td>" . $row[9] . "</td>""<td>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T17:22:26.133

```
while ($row = mysql_fetch_row($result)) {
    echo "<tr>";
    foreach($row AS $val)
        echo "<td>" . $val . "</td>";
    echo "<td>";
} 
```

那应该做

# android - Android 让用户从图库或相机中挑选/捕捉照片

> ID：14143795
> 
> 赞同：1
> 
> 时间：2013-01-03T17:15:05.010
> 
> 标签：android, image, camera, gallery, image-size

我希望当用户单击按钮时，他可以选择图库或相机，并且程序可以检索捕获/挑选的照片。我尝试了几件事，但似乎没有什么能完全奏效。这就是我启动画廊的方式，以便用户可以选择照片：

```
 Intent i = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
    startActivityForResult(i,3); 
```

这就是我尝试通过用户选择的照片检索的方式：

```
 Uri selectedImage = data.getData();

        filename = "NEWIMAGE";
        String[] filePathColumn = { MediaStore.Images.Media.DATA };

        Cursor cursor = getContentResolver().query(selectedImage,
                filePathColumn, null, null, null);
        cursor.moveToFirst();

        int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
        String picturePath = cursor.getString(columnIndex);
        cursor.close();
        final int REQUIRED_SIZE=70;
        int scale = 1;
        BitmapFactory.Options options = new BitmapFactory.Options();
        if (options.outHeight > REQUIRED_SIZE || options.outWidth > REQUIRED_SIZE) {
            scale = (int)Math.pow(2, (int) Math.round(Math.log(REQUIRED_SIZE / 
               (double) Math.max(options.outHeight, options.outWidth)) / Math.log(0.5)));
        }

        options.inJustDecodeBounds = true;
        options.inSampleSize = scale;           
        photo = BitmapFactory.decodeFile(picturePath, options); 
```

我运行它时的错误：

```
E/AndroidRuntime(21260): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=3, result=-1, data=Intent { dat=content://media/external/images/media/2449 }} to activity {com.aquariumzoekenpro.android/com.aquariumzoekenpro.android.LogboekNotitie}: java.lang.NullPointerException
E/AndroidRuntime(21260):    at android.app.ActivityThread.deliverResults(ActivityThread.java:3000)
E/AndroidRuntime(21260):    at android.app.ActivityThread.handleSendResult(ActivityThread.java:3043)
E/AndroidRuntime(21260):    at android.app.ActivityThread.access$1100(ActivityThread.java:127)
E/AndroidRuntime(21260):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1188)
E/AndroidRuntime(21260):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(21260):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(21260):    at android.app.ActivityThread.main(ActivityThread.java:4441)
E/AndroidRuntime(21260):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(21260):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(21260):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
E/AndroidRuntime(21260):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
E/AndroidRuntime(21260):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(21260): Caused by: java.lang.NullPointerException
E/AndroidRuntime(21260):    at com.aquariumzoekenpro.android.LogboekNotitie.onActivityResult(LogboekNotitie.java:1483)
E/AndroidRuntime(21260):    at android.app.Activity.dispatchActivityResult(Activity.java:4649)
E/AndroidRuntime(21260):    at android.app.ActivityThread.deliverResults(ActivityThread.java:2996)
E/AndroidRuntime(21260):    ... 11 more 
```

用相机拍摄照片并检索也失败。这就是我启动相机的方式：

```
 Intent i = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);     
    String filename = "NEWIMAGE1";
    imageUri = Uri.fromFile(new File(Environment.getExternalStorageDirectory().getPath()+"/"+filename));
    i.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);
    startActivityForResult(i,2); 
```

这就是我尝试检索捕获的照片的方式：

```
String filename = "NEWIMAGE1";
String urifilename = filename + ".jpg";
imageUri = Uri.fromFile(new File(Environment.getExternalStorageDirectory().getPath()+"/"+urifilename));
this.getContentResolver().notifyChange(imageUri, null);
ContentResolver cr = this.getContentResolver();     
photo = android.provider.MediaStore.Images.Media.getBitmap(cr, imageUri); 
```

我从 logcat 得到的错误：

```
W/dalvikvm(21424): threadid=1: thread exiting with uncaught exception (group=0x40abc210)
E/AndroidRuntime(21424): FATAL EXCEPTION: main
E/AndroidRuntime(21424): java.lang.OutOfMemoryError
E/AndroidRuntime(21424):    at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
E/AndroidRuntime(21424):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:499)
E/AndroidRuntime(21424):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:555)
E/AndroidRuntime(21424):    at android.provider.MediaStore$Images$Media.getBitmap(MediaStore.java:710)
E/AndroidRuntime(21424):    at com.aquariumzoekenpro.android.LogboekNotitie.onActivityResult(LogboekNotitie.java:1429)
E/AndroidRuntime(21424):    at android.app.Activity.dispatchActivityResult(Activity.java:4649)
E/AndroidRuntime(21424):    at android.app.ActivityThread.deliverResults(ActivityThread.java:2996)
E/AndroidRuntime(21424):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2451)
E/AndroidRuntime(21424):    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2492)
E/AndroidRuntime(21424):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1997)
E/AndroidRuntime(21424):    at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3371)
E/AndroidRuntime(21424):    at android.app.ActivityThread.access$700(ActivityThread.java:127)
E/AndroidRuntime(21424):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1162)
E/AndroidRuntime(21424):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(21424):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(21424):    at android.app.ActivityThread.main(ActivityThread.java:4441)
E/AndroidRuntime(21424):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(21424):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(21424):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
E/AndroidRuntime(21424):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
E/AndroidRuntime(21424):    at dalvik.system.NativeStart.main(Native Method) 
```

所以我想让用户选择从图库中选择图像或使用相机拍摄照片。然后我希望程序以原始质量获取拾取或捕获的图像，以便我可以在 Imageview 或其他内容中显示它。

提前致谢，

西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:24:27.697

西蒙，我使用这个意图从画廊中挑选这个工作：

```
Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
intent.setType("image/*"); 
```

然后像这样处理选择：

```
 mFilename=null;
  mPath=null;

  Uri selectedImage = data.getData();
  final String[] filePathColumn = { MediaColumns.DATA, MediaColumns.DISPLAY_NAME };
  Cursor cursor = getContentResolver().query(selectedImage, filePathColumn, null, null, null);

  // some devices (OS versions return an URI of com.android instead of com.google.android 
  if (selectedImage.toString().startsWith("content://com.android.gallery3d.provider"))  
  {
      // use the com.google provider, not the com.android provider. 
      selectedImage = Uri.parse(selectedImage.toString().replace("com.android.gallery3d","com.google.android.gallery3d"));
  }

  if (cursor != null) {
      cursor.moveToFirst();
      int columnIndex = cursor.getColumnIndex(MediaColumns.DATA);

      // if it is a picasa image on newer devices with OS 3.0 and up
      if (selectedImage.toString().startsWith("content://com.google.android.gallery3d"))
      {
          columnIndex = cursor.getColumnIndex(MediaColumns.DISPLAY_NAME);
          if (columnIndex != -1)
          {
              final Uri uriurl = selectedImage;
              // should do this in a background thread, since we are fetching a large image from the web
              mFilename = getGalleryFile(activity, uriurl);
          }
      }
      else
      {
          // it is a regular local image file
          String filePath = cursor.getString(columnIndex);
          cursor.close();
          mFilename = filePath;
      }
  }
  // If it is a picasa image on devices running OS prior to 3.0
  else if (selectedImage != null && selectedImage.toString().length() > 0)
  {
      final Uri uriurl = selectedImage;
      // should do this in a background thread, since we are fetching a large image from the web
      mFilename = getGalleryFile(activity, uriurl);
   } 
```

至于你想要的相机部分，你正在做的事情看起来很好，你只是用完了创建位图的内存。您应该使用 BitmapFactory::decodeStream 并设置 BitmapFactory.Options 将传入的图像缩放到您要在其中显示它的 View 的大小。

如下所述，在这里完成答案是getGalleryFile：

```
public static String getGalleryFile(Activity activity, Uri url)
{
    String fileName=null;
    File path;

    try {
        // getCameraStoragePath is a function in my activity
        // that returns a location where I'm writing files
        // you could use Environment.getExternalStorageDirectory()
        // or ....
        path = new File(MyTask.getCameraStoragePath());
    } catch (Exception e1) {
        // todo: handle exception
        return null;
    }

    SimpleDateFormat timeStampFormat = new SimpleDateFormat("yyyyMMddHHmmssSS");
    fileName = "gallery." + timeStampFormat.format(new java.util.Date()) + ".jpg";
    File out = new File(path, fileName);

    try {
        InputStream is = null;
        if (url.toString().startsWith("content://com.google.android.gallery3d"))
        {
            is=activity.getContentResolver().openInputStream(url);
        }
        else
        {
            is=new URL(url.toString()).openStream();
        }

        OutputStream os = new FileOutputStream(out);

        byte[] buffer = new byte[1024];
        int len;
        while ((len = is.read(buffer)) != -1)
        {
            os.write(buffer, 0, len);
        }

        os.close();
        return out.getAbsolutePath();
    }
    catch (Exception ex)
    {
        // todo: handle exception
        return null;
    }
} 
```

# javascript - 如何在 javascript 对象上创建动态属性

> ID：14143798
> 
> 赞同：-4
> 
> 时间：2013-01-03T17:15:14.867
> 
> 标签：javascript, object, dynamic, element

我想知道如何为以前创建的对象设置新属性。我尝试了循环但没有用。在此示例中，对象是手动设置的。

```
var playlist = [    
{   
url : "07_All_The_Young_Dudes.mp3",
title : "All the young dudes"
},
{   
url : "burn.mp3",
title : "Burn"
},
] 
```

对不起，我会解释得更好。我的系统允许人们发布他们的音乐。一切都是用php完成的。但我也在使用 javascript 来打开手机中可能播放的音乐。因此，在 PHP 中生成了两个数组：`$url`我`$title`在 javascript 中执行了以下代码：

```
var thestring = "<?php echo $url;?>"; var spliter = thestring.split('|'); var thestring2 = "<?php echo $title;?>"; var spliter2 = thestring2.split('|'); var i;
var url = [];
var title = [];
var playlist = [        
        {         
            url :'',
            title :''
        },
        ]; 
```

并把这个循环：

```
for(i =0; i < spliter.length;i++){              
    playlist.url[i] = spliter[i];
    playlist.title[i] = spliter2[i];    
} 
```

不幸的是，这种循环对我不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T17:18:39.050

如果您打算将对象添加到 Array，请执行此操作。

```
playlist.push({   
    url : "07_All_The_Young_Dudes.mp3",
    title : "All the young dudes"
}) 
```

如果您打算将属性添加到 Array 中的对象，请按索引选择对象，然后像这样添加它。

```
playlist[0].newProperty = "new value"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:18:53.983

Javascript 允许你动态添加属性，像这样

```
previousCreatedObj.newAttr = [];

previousCreatedObj.another = 2 
```

或者，如果您的对象是和数组，只需添加一个索引。`previousCreatedObj[0].yetAnother = 1`

要将项目添加到数组中，请使用 push

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T17:19:35.263

```
playList[0].favBeverage = "beer"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T15:00:09.747

谢谢大家的回答，我自己解决了。我修改了这样的循环： 然后我使用了那个变量，解决了这一切。`for(i =0; i < spliter.length;i++){
url[i] = spliter[i]; title[i] = spliter2[i];
}`

# c++ - 从路径返回文件名

> ID：14143801
> 
> 赞同：1
> 
> 时间：2013-01-03T17:15:24.247
> 
> 标签：c++

我在这里做错了什么？

称呼

```
printf(filename(exename)); 
```

我的函数应该返回文件名

```
const char* filename(const string& str)
{
  const char* path;
  size_t found;
  found=str.find_last_of("/\\");
  path = (str.substr(found+1)).c_str();

  cout << str.substr(found+1); // ------------> is name ok 

  printf("\n\n");
  printf(path); // ------------> is name not ok random numbers
  printf("\n\n");
  return  path; // ------------> is not ok random numbers
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T17:41:01.443

`str.substr(found+1)`返回一个**临时** `std::string`的. *您在该临时*上调用`c_str()`方法，并将返回的指针分配给. 当临时对象被销毁时（在），您的路径指向垃圾。 *`std::string``path``;`*

 *帮自己一个忙，使用**C++**（不是 C 与 C++ 混合），使用健壮的字符串类，例如`std::string`存储字符串（而不是原始的潜在悬空`char*`指针）：

```
std::string FileName(const std::string& str)
{
  size_t found = str.find_last_of("/\\");
  std::string path = str.substr(found+1); // check that is OK
  return path;
} 
```

另请注意，您对`path`变量名的使用令人困惑，因为该函数似乎返回文件名（而不是路径）。

更简单的重写（没有`path`变量）：

```
std::string ExtractFileName(const std::string& fullPath)
{
  const size_t lastSlashIndex = fullPath.find_last_of("/\\");
  return fullPath.substr(lastSlashIndex + 1);
}

printf("Filename = %s\n", ExtractFileName("c:\\some\\dir\\hello.exe").c_str()); 
```

...或者只是使用`cout`（它可以很好地使用`std::string`并且不需要`c_str()`方法调用来获取原始 C 字符串指针，就像在 C`printf()`函数中一样）：

```
std::cout << ExtractFileName("c:\\some\\dir\\hello.exe"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-03T17:19:43.890

您正在返回一个指向由临时`(str.substr(found+1)).c_str()`. 当临时超出范围时，内存可能随时被覆盖。

`str.substr(found+1)`是一个返回 a 的表达式`string`。该对象是一个临时值，将在包含它的表达式的执行结束时消失。使用`.c_str()`，您将获得指向此对象控制的内存的指针。在对象的生命周期之后，此指针不再有效。

尝试声明`path`为 a `string`，并让您的函数返回 a`string`而不是指针。

一般来说，`char *`当你也在使用`std::string` 类时，你应该避免使用 raw。这意味着您还应该避免使用`printf`; 改用`std::iostream`类。*

# asp.net - 在 Visual Studio 2008 中调试 ASP.NET Web 服务、C++/CLI DLL 和本机 DLL

> ID：14143803
> 
> 赞同：3
> 
> 时间：2013-01-03T17:15:30.817
> 
> 标签：asp.net, visual-studio, visual-studio-2008, visual-studio-debugging

我有一个包含三个项目的 VS2008 解决方案： C# ASP.NET Web 服务，它使用 C++/CLI DLL，而它又调用本机 C++ DLL 的函数。所有参考均已正确设置。在 web 服务 bin 文件夹中有所有三个 DLL。问题是当我按 F5 时，浏览器中的页面`FileNotFoundException`从 HRESULT 0x8007007E 通知我，*找不到指定的模块*。

缺少的模块是我的本机 DLL。ASP.NET 开发服务器复制（并使用）我的 C++/CLI DLL 中的某处`%USERPROFILE%\AppData\Local\Temp\Temporary ASP.NET Files\root`，但不是本机的。如果我手动将本机 DLL 复制到与 C++/CLI DLL 相同的文件夹，那么我可以调试我的 Web 服务。但是，这种复制似乎并不正确。

在 PATH 上的某处复制本地 DLL 也感觉不对，因为其他开发人员需要记住它。

这里有一个[类似的问题](https://stackoverflow.com/q/5806144/395718)，并且在一个答案中链接了[一篇博客文章。](http://blogs.msdn.com/b/jorman/archive/2007/08/31/loading-c-assemblies-in-asp-net.aspx)给定的解决方案要求我将 DLL 更改为延迟加载，这似乎又是一个半生不熟的解决方法，因为由于开发障碍它需要更改最终产品。

是否有适当的方法来调试 Web 服务、C++CLI DLL 和本机 DLL 的组合？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T17:49:37.343

问题只是编译器无法确定本地 c++ 库在哪里。

所以，有几种方法可以解决这个问题。

1.  使用 DLLImport 在运行时使用相对或绝对路径加载 dll。
2.  将`path`环境变量设置为它的位置。
3.  项目的构建方式变得非常复杂（请参阅下面的链接，您显然已经阅读过）。

[http://blogs.msdn.com/b/jorman/archive/2007/08/31/loading-c-assemblies-in-asp-net.aspx](http://blogs.msdn.com/b/jorman/archive/2007/08/31/loading-c-assemblies-in-asp-net.aspx)

除了这些，没有真正的答案。

# jquery - 使用 jQuery 的 setInterval - 在 mouseenter 上暂停并在 mouseleave 上恢复

> ID：14143812
> 
> 赞同：0
> 
> 时间：2013-01-03T17:15:51.387
> 
> 标签：jquery, timer, setinterval

我在 jQuery 中编写了一个函数，它可以像旋转木马一样旋转一系列文本块。我`setInterval`用来启动一个在循环中运行的计时器，它在页面加载时自动启动，暂停`mouseenter`事件，然后应该在`mouseleave`事件上恢复。

暂停适用于第一个实例，但如果您再次输入鼠标`div.testimonials`，该功能不会暂停。这是我的 HTML：

```
<div class='testimonials'>
          <div class='testimonials-users row hidden-phone'>
            <div class='span1'> <a class='testimonials-user-w active' data-toggle='testimonial' href='#testimonial1'> <span class='testimonials-user'><img alt="Avatar-1" src="images/test-user.png" /></span> </a> </div>
            <div class='span1'> <a class='testimonials-user-w' data-toggle='testimonial' href='#testimonial2'> <span class='testimonials-user'><img alt="Avatar-2" src="images/test-user.png" /></span> </a> </div>
            <div class='span1'> <a class='testimonials-user-w' data-toggle='testimonial' href='#testimonial3'> <span class='testimonials-user'><img alt="Avatar-4" src="images/test-user.png" /></span> </a> </div>
          </div>
          <div class='testimonials-speeches'>
            <div class="testimonials-speech active" id="testimonial1">
              <p> <strong>Homer Simpson is amazing.</strong> I've worked with Homer on couple of projects and i really like how lazy he is. Sleeps a lot, does not compain much, a perfect employee. </p>
              <div class="speech-by"> Mr. Burns, Springfield Nuclear Power Plant </div>
            </div>
            <div class='testimonials-speech' id='testimonial2'>
              <p> <strong>Nulla gravida tellus id fermentum.</strong> Phasellus aliquet lobortis dolor, vel aliquam tortor porta vitae. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia. </p>
              <div class='speech-by'> John Doe, Dundler Mufflin </div>
            </div>
            <div class='testimonials-speech' id='testimonial3'>
              <p> <strong>Aliquam at sodales arcu.</strong> Nulla gravida, tellus id fermentum tempus, urna elit tempus justo, a tincidunt dui lacus nec est. Maecenas ligula ipsum, suscipit quis posuere id, porttitor vitae odio. Phasellus cursus mauris nec felis sollicitudin ac semper quam hendrerit. Morbi sagittis lobortis libero id imperdiet. </p>
              <div class='speech-by'> John Doe, Dundler Mufflin </div>
            </div>
          </div>
        </div> 
```

...这是我的 jQuery：

```
$(function () {
    var rotateTestimonialTimer = setInterval(rotateTestimonials, 1000); // set interval timer

    function abortTestimonialTimer() { // to be called when you want to stop the timer
        clearInterval(rotateTestimonialTimer);
    }

    function rotateTestimonials() { 
        // Speeches
        var activeSpeech = $('.testimonials-speeches .testimonials-speech.active');
        // If last, loop to first
        if($('.testimonials-speeches .testimonials-speech').last().hasClass('active')) {
            var nextSpeech = $('.testimonials-speeches .testimonials-speech').first();
        } else {
            var nextSpeech = activeSpeech.next('.testimonials-speech');
        }
        var nextSpeechId = nextSpeech.attr('id');

        // Users
        var activeUser = $('a.testimonials-user-w.active');
        var nextUser = $('a.testimonials-user-w[href*="' + nextSpeechId + '"]');

        // Swap active class
        activeSpeech.removeClass('active');
        activeUser.removeClass('active');
        nextSpeech.addClass('active');
        nextUser.addClass('active');

    }
    $('div.testimonials').on('mouseenter', function(){ // Pause on mouseenter
    abortTestimonialTimer(); 
});
$('div.testimonials').on('mouseleave', function(){ // Resume on mouseleave
    var rotateTestimonialTimer = setInterval(rotateTestimonials, 1000);
});
}); 
```

知道为什么这只是第一次暂停吗？我认为这与我的计时器的启动和停止有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T17:17:45.803

替换这个

```
$('div.testimonials').on('mouseleave', function(){ // Resume on mouseleave
    var rotateTestimonialTimer = setInterval(rotateTestimonials, 1000);
}); 
```

和

```
$('div.testimonials').on('mouseleave', function(){ // Resume on mouseleave
    rotateTestimonialTimer = setInterval(rotateTestimonials, 1000);
}); 
```

在该`var`特定范围内定义新变量。

# mysql - 找出 MySQL 索引的使用统计信息？

> ID：14143813
> 
> 赞同：26
> 
> 时间：2013-01-03T17:15:54.043
> 
> 标签：mysql, indexing, statistics, usage-statistics

是否有可能找出 MySQL 表索引的使用频率？

我有几个表索引，我想知道是否有 MySQL 未使用的索引。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2017-04-04T11:25:59.840

是的。您应该查询[Performance Schema](https://dev.mysql.com/doc/refman/5.6/en/performance-schema.html)：

```
select * from performance_schema.table_io_waits_summary_by_index_usage
where object_schema = 'your_schema' 
```

count_star 列显示自 MySQL 启动以来每个索引使用了多少次。如果添加以下内容，您将获得从未使用过的索引：

```
and count_star = 0 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-04-16T06:28:32.747

除了@user1970667 的回答，您还可以使用：

```
select * from sys.schema_unused_indexes; 
```

获取未使用索引的列表。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-03T17:48:18.327

***注意：此答案自 5.5.3 起不再有效！***

见[https://stackoverflow.com/a/43205887/1251127](https://stackoverflow.com/a/43205887/1251127)

*下面的原始答案。*

目前，MySQL 不提供有关索引使用情况的统计信息。

自己生成这些统计信息的一种方法是记录所有查询（请注意此处的额外 i/o）并将其解析出来。Percona 有一个很好的工具[pt-index-usage](http://www.percona.com/doc/percona-toolkit/2.1/pt-index-usage.html)。

# php - PHP表单处理不发送电子邮件

> ID：14143816
> 
> 赞同：0
> 
> 时间：2013-01-03T17:15:56.963
> 
> 标签：php, forms, email

> **可能重复：**
> [发送的邮件将进入垃圾邮件文件夹？](https://stackoverflow.com/questions/11601645/sent-mail-will-going-to-spam-folder)

我有一个简单的 html 表单：

```
<div id="content">
<h2>Contact Us</h2>
<form name="contact" action="form-to-email4.php" method="post">
<label>Name: </label><input type="text" name="contact_name" /><br />
<label>Email Address: </label><input type="email" name="contact_email" /><br /><br />
<label>Message: </label><textarea name="message" rows="10" cols="50">
</textarea><br /><br />
<input type="submit" value="Submit"></form><br /><br />

</div> 
```

和一个 PHP 脚本来处理和通过电子邮件发送信息

```
<?php
if($_SERVER['REQUEST_METHOD'] !== 'POST')
{
//This page should not be accessed directly. Need to submit the form.
echo "error; you need to submit the form!";
die;
}
$name = $_POST['contact_name']; $email = $_POST['contact_email']; $message = $_POST['message'];

if ($_POST['contact_name'] == "" || $_POST['contact_email'] == "" || $_POST['message'] == "" )     {
    echo "Please fill in all boxes.";}
else {

$email_from = 'chris569x@gmail.com';//<== update the email address
$email_subject = "Message from the SGU Website"; 
$email_body = "You have received a new message from the SGU website.\n". 
"Message From: $name \n".
"Email Address: $email \n".
"Message: $message \n";  
$to = "chris569x@gmail.com";//<== update the email address
$headers = "From: $email_from \r\n";
//Send the email!
mail($to,$email_subject,$email_body,$headers);
//done. redirect to thank-you page.
header('Location: thanks4.htm');
echo "<meta http-equiv='refresh' content='0; url=thanks4.htm'>";}
?> 
```

该脚本似乎可以正确处理。如果我尝试直接访问 PHP，我会收到消息，如果没有填写所有必填字段，我会收到消息，并且我会在脚本末尾重新定向到页面，但我从未收到任何电子邮件。我错过了什么？（我对此很陌生）

# ffmpeg - avcodec_decode_video2 在与 live555 一起使用时始终将 got_picture_ptr 设置为 0

> ID：14143819
> 
> 赞同：0
> 
> 时间：2013-01-03T17:16:04.380
> 
> 标签：ffmpeg, h.264, libavcodec, live555, avcodec

我正在尝试使用 libavcodec 解码帧。我的应用程序使用 live555 从 rtsp 流中检索 rtp 数据包。由于 avcodec_decode_video 将 got_picture_ptr 设置为 0 的原因，我进行了很多搜索，但无法找到它。
谁能告诉我 avcodec_decode_video2 在内部是如何工作的？什么原因可能导致 got_picture_ptr 指针设置为零？PS：该函数确实读取字节，即返回值始终是正数，而不是-1。我在这里很难过，任何帮助将不胜感激。我没有引用任何代码，因为使用 avcodec_decode_video2 解码的代码相当通用，我的代码没有什么特别之处。（我之前使用 libavcodec 解码了 rtsp 流，只是没有使用 live555）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:05:42.807

好吧，我终于能够解决它。问题是我从 live555 处理 MediaSink 对象的方式。我应该调用从 MediaSink 派生的 Sink 类的 afterGettingFrame 函数，我没有这样做，因为虽然我正在获取数据，但我没有“读取”数据并将其输入 avcodec_decode_video2 方法。

# php - PHP SOAP 客户端问题

> ID：14143821
> 
> 赞同：2
> 
> 时间：2013-01-03T17:16:15.067
> 
> 标签：php, soap, wsdl

我对使用 PHP 的 SOAP 有基本的了解，但我陷入了我希望结果是那些“DUH”时刻之一的困境。

我有一个 WSDL 文件，用于从远程站点检索信息，并且一直在使用它：-

```
$ordernumber = 171994;
$username = "someone@somewhere.com";
$password = "secret";
$arr = array("orderNumber" => $ordernumber,"orderReference" => '');

$client = new SoapClient(BASEPATH."/feed/Orders.wsdl",array('trace' => 1));
$orders = $client->RetrieveOrder ($username,$password,'',array("orderElements" => $arr)); 
```

这适用于单个订单，我得到了我想要的信息。但是，如果我想检索多个订单，那么我正在运行一个 foreach 循环，为每个订单发送一个请求。

根据文档，我应该能够提供一系列订单并一次检索多个订单，并且，如果我使用在线工具[http://soapclient.com/soaptest.html](http://soapclient.com/soaptest.html)并输入多个订单，那么我会得到预期的结果。从soapclient.com 生成的xml 请求如下：-

```
<email xsi:type="xsd:string">someone@somewhere.com</email>
<password xsi:type="xsd:string">secret</password>
<messageHeader xsi:type="tns:messageHeaderElement">
<senderId xsi:type="xsd:string"/>
<receiverId xsi:type="xsd:string"/>
<messageId xsi:type="xsd:string"/>
<transactionId xsi:type="xsd:string"/>
<transactionTimeStamp xsi:type="xsd:dateTime"/>
</messageHeader>
<orderElements xsi:type="SOAP-ENC:Array" SOAP-ENC:arrayType="tns:queryElement[2]">
<item xsi:type="tns:queryElement">
<orderReference xsi:type="xsd:int"/>
<orderNumber xsi:type="xsd:int">171994</orderNumber>
</item>
<item xsi:type="tns:queryElement">
<orderReference xsi:type="xsd:int"/>
<orderNumber xsi:type="xsd:int">172101</orderNumber>
</item>
</orderElements> 
```

messageHeader 部分是可选的，我只是在上面的调用中发送''。

谁能告诉我如何使用 PHP SOAPCLIENT 发送一个请求多个订单？

提前谢谢你:-)

编辑：

感谢@DeaconDesperado 和@EM-Creations 的回复。@DeaconDesperado 是对的——我应该能够使用 $client->VendaRetrieveOrder 方法。我尝试了很多方法来生成 orderElements 数组，以下是最新的，在我看来是最近的......

```
$orderElements = 
Array
(
[0] => stdClass Object
    (
        [orderNumber] => 236431
        [orderReference] => 
    )
[1] => stdClass Object
    (
        [orderNumber] => 236431
        [orderReference] => 
    )
)

$orders = $client->VendaRetrieveOrder ($username,$password,'',array("orderElements" => $orderElements)); 
```

但是，当我使用它时，我会收到以下被困错误。

```
SOAP-ERROR: Encoding: object hasn't 'orderReference' property 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:34:19.680

如果您计划在您提供的 API 中使用很多功能，请使用此功能。

[http://sourceforge.net/projects/wsdl2php/](http://sourceforge.net/projects/wsdl2php/)

我在以前的项目中使用它为我节省了很多时间。

# automapper - Automapper 在映射时忽略属性

> ID：14143824
> 
> 赞同：0
> 
> 时间：2013-01-03T17:16:33.773
> 
> 标签：automapper

Automapper 中是否有规定在映射时忽略某些属性。例如，我有两个类 Manager 和 Employee。经理有一份员工名单和其他信息。

大多数情况下，我需要在 Manager 中列出员工列表，但在少数情况下，我不需要将员工列表返回给客户（比如在编辑经理姓名时）。所以，当我创建地图时，我也包括了要映射的员工。现在有一种方法可以指定在映射时要忽略的员工属性。

```
// <--- Employees is included.
Mapper.CreateMap<Manager, ManagerDto>();

// <--- I want to ignore employees list here.
ManagerDto dto = Mapper.Map<Manager, ManagerDto>(manager); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:25:19.440

您可以在映射配置中使用条件。例如：

```
Mapper.CreateMap<Manager, ManagerDto>()
    .ForMember(d => d.Employees,
               opt => {
                   opt.Condition(s => s.NeedEmployees);
                   opt.MapFrom(s => s.Employees);
               }); 
```

我不相信您在实际应用映射时可以做到这一点。

# .net - WCF REST 服务返回错误：远程服务器返回错误：（400）错误请求

> ID：14143833
> 
> 赞同：0
> 
> 时间：2013-01-03T17:17:04.527
> 
> 标签：.net, wcf, rest

我从下面的项目中调用了 Rest WCF 服务

```
 userAlias = "test";
                var url = new StringBuilder();
                url.Append(
                    string.Format("https://webdemo-t.orioninc.com:8443/Services/2012v2/TestService.svc/AddAttachment?User={0}&Engagement={1}&FileName={2}&DocumentTrasferID={3}&fileSize={4}&ActivityName={5}",userAlias, engagementName, fileName, documentTranferId, fileSize, activityName));
                WebRequest request = WebRequest.Create(url.ToString());
                CurrentUrl = url.ToString();
                var networkCredential = new NetworkCredential("jame", "test", "company");
                request.Credentials = networkCredential;
                WebResponse response = request.GetResponse();
                Encoding encoding = Encoding.GetEncoding(1252);
                var responseStream = new StreamReader(response.GetResponseStream());
                string responseResult = responseStream.ReadToEnd();
                responseStream.Close();
                Console.WriteLine(responseResult); 
```

调用这些服务时出现异常**远程服务器返回错误：（400）错误请求。**当我尝试在 WCH 实现方法中返回一个正常的字符串时，我得到了正确的 webresponse 结果。我该如何解决这个错误？

**WCF实现方法**

```
 public string AddAttachment(string User, string Engagement, string FileName, string DocumentTrasferID, string fileSize, string ActivityName)
    {
        dynamic _Trackerfaccade = new KPMG.EauditEmailService.Facade.EAppEmail();
        string Result = _Trackerfaccade.AddAttachment(User, Engagement, FileName, DocumentTrasferID, fileSize, FileName);
        return Result;
    } 
```

**运营合同**

```
 [OperationContract]

   [WebGet(UriTemplate = "/AddAttachment?User={userAlias}&Engagement={engagementName}&FileName={FileName}&DocumentTrasferID={documentTranferId}&fileSize={fileSize}&activityName={activityName}", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
    string AddAttachment(string userAlias, string engagementName, string documentTranferId,string fileName,string fileSize,string activityName); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:32:36.970

```
"/AddAttachment?User={0}&Engagement={1}&FileName={2}&DocumentTrasferID={3}&fileSize={4}&ActivityName={5}"

"/AddAttachment?userAlias={userAlias}&engagementName={engagementName}&documentTranferId={documentTranferId}&fileName={fileExtension}&fileSize={fileSize}&activityName={activityName}" 
```

url pattern和real url不一样，你的请求找不到这个方法

# php - 制作内部包含未知数量数组的三维数组

> ID：14143846
> 
> 赞同：-1
> 
> 时间：2013-01-03T17:18:13.247
> 
> 标签：php, arrays

我正在尝试存储表中的数据，但我不知道该表中有多少行。我的想法是创建一个名为 data 的主数组，每行的子数组只有数字标签（1、2、3 等），然后在每行内部都是每行的实际数据，所以它就像这：

```
data
  ->1
    ->item1
    ->item2
    ->item3
  ->2
    ->item1
    ->item2
    ->item3
  ->3
    ->item1
    ->item2
    ->item3 
```

等等。我知道如何使用多维数组，并且我知道在 java 中有很简单的方法可以实现这一点，但我一生都无法弄清楚如何在 php 中做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:20:55.387

要继续添加到数组，只需使用以下代码：

```
$myArray[] = 'another value'; 
```

注意`[]`this 告诉 php 向数组添加另一个值（不删除以前的元素）

有关多维数组的快速教程，请参见此处：

[http://webcheatsheet.com/PHP/multidimensional_arrays.php](http://webcheatsheet.com/PHP/multidimensional_arrays.php)

还有这个：

[http://www.developerdrive.com/2012/01/php-arrays-array-functions-and-multidimensional-arrays/](http://www.developerdrive.com/2012/01/php-arrays-array-functions-and-multidimensional-arrays/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T17:22:16.940

尝试，

```
foreach($rows as $v) {
  $data[] = array($v['item1'], $v['item2'], $v['item3']);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T17:36:29.310

要将 mySQL 数据映射到多维数组：

```
$query = mysql_query("SELECT * FROM table WHERE uid = '1' ORDER BY id DESC");
$results = array();
$i = 0;
while($line = mysqli_fetch_array($query, MYSQL_ASSOC)){
    $results[$i] = $line;
    $i++;
} 
```

# ruby-on-rails - Heroku 上的 Rails 发送重复的电子邮件

> ID：14143847
> 
> 赞同：2
> 
> 时间：2013-01-03T17:18:19.587
> 
> 标签：ruby-on-rails, email, duplicates, mailer

客户的网站在 Rails 3 中构建并托管在 Heroku 上，并接受通过 rails 邮件发送的表单提交。他们正在接收重复的电子邮件。我无法在我的开发环境中复制该问题。

邮件通过使用标准 Rails 邮件程序注册到其域的 gmail 帐户发送：

```
ActionMailer::Base.smtp_settings = {
  :address              => "smtp.gmail.com",
  :port                 => 587,
  :domain               => "clientdomain.com",
  :user_name            => "noreply@clientdomain.com",
  :password             => "password",
  :authentication       => "plain",
  :enable_starttls_auto => true
} 
```

和

```
(gather data)
mail(:to => "staff@clientdomain.com", :subject => "Form Submittal", :from => @email) 
```

副本不一定会立即发送，因为它们的交付时间会在原件后 1 分钟到 3 小时不等。

在某些情况下，HTML 字符会替换为实体。

这是一个例子：

```
From: noreply@clientdomain.com
> Subject: Form Submittal
> Date: December 14, 2012 10:38:18 PM EST
> To: staff@clientdomain.com
>=20
> Form Submittal
>=20
> Name: Potential Lead
>=20
> Phone: 1234567890
>=20
> Email: some.user@gmail.com 
>=20
> Message: Hi my names Some I'm from tennesse and I'd really like to =
> get info on your service thank you for all your help!!!
>=20 
```

并复制：

```
> From: noreply@clientdomain.com
> Subject: Form Submittal
> Date: December 15, 2012 1:46:54 AM EST
> To: staff@clientdomain.com
>=20
> Form Submittal
>=20
> Name: Potential Lead
>=20
> Phone: 1234567890
>=20
> Email: some.user@gmail.com
>=20
> Message: Hi my names Some I%27m from tennesse and I%27d really like =
> to get info on your service thank you for all your help%21%21%21
>=20 
```

我很想认为表单只是被提交了两次，但是在 3 小时后提交完全相同的输入的可能性不大，再加上大量的欺骗（有时报告 60-75%，但从来没有 100%）让我高度对此表示怀疑。

我还发现了一个关于重复问题的要点，它指示我用这个覆盖默认设置：

```
config.action_mailer.sendmail_settings = {
  :arguments => '-i'
} 
```

...没有有益的结果。

我的问题，如果不是很明显：如何阻止 rails 发送重复的电子邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-15T18:47:48.000

对于从谷歌那里得到同样问题的任何人，这里是解决方案：`.deliver`如果您使用延迟作业来安排邮件，请不要使用，如最初在此处[https://stackoverflow.com/a/13000167/1870446](https://stackoverflow.com/a/13000167/1870446)和此处[https://stackoverflow.com/a/13000167/1870446 /github.com/collectiveidea/delayed_job#rails-3-mailers](https://github.com/collectiveidea/delayed_job#rails-3-mailers)

因此，`UserMailer.delay.some_mail.deliver`您应该使用`UserMailer.delay.some_mail`. 干杯!

# google-apps-script - 将脚本部署为 Web 应用程序时，如何在 Google 电子表格中获得活动范围/选择？

> ID：14143854
> 
> 赞同：0
> 
> 时间：2013-01-03T17:18:35.867
> 
> 标签：google-apps-script, google-sheets, google-spreadsheet-api

我发现 getActiveRange()、getActiveSelection() 等函数仅在脚本作为电子表格中的自定义函数或容器扩展运行时才起作用（请参阅[脚本的执行方法](https://developers.google.com/apps-script/execution_methods)）。我的观察正确吗？有没有办法将脚本部署为 Web 应用程序，使用[SpreadsheetApp.openById()](https://developers.google.com/apps-script/class_spreadsheetapp#openById)打开电子表格并获得活动范围/选择，假设电子表格的所有者已在 Drive 中打开它？

问题是我正在为 Google 电子表格进行扩展，但是为了构建我的自定义 UI，我不想使用[Html Service](https://developers.google.com/apps-script/html_service)或[UI Service](https://developers.google.com/apps-script/uiapp)，我想要传统的纯 HTML/JS。因此，我在页面上呈现我的 UI，我在 iframe 中打开电子表格，然后我的 UI 将 Google Scripts 调用为服务，这意味着我将脚本部署为 Web 应用程序（自动执行不同的电子表格任务）并使用 URL 参数调用它们。它工作正常，但我无法获得活动范围/选择，这对我的应用程序来说是一个交易破坏者。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T18:43:49.737

好吧，恐怕您不能，因为您的观察是正确的。

但是，如果您在主电子表格中使用第二张工作表和一个`onEdit()`监视主工作表中活动单元格的触发器，则有一种可能的解决方法。然后，外部 webApp 可以非常简单地轮询第二张表上的值。

这是电子表格中的（简单）代码：

```
function onEdit(event){
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sh = event.source.getActiveSheet();
  var r = event.source.getActiveRange();
 // if(sh.getName()!='main sheet'){return};
  ss.toast('hi = '+r.getA1Notation()+'/'+sh.getName()+'   value='+r.getValue());
  var tracker = ss.getSheetByName('tracker sheet');
  tracker.getRange(tracker.getLastRow()+1,1).setValue(r.getA1Notation());
  Browser.msgBox('new')
} 
```

一个简单的 webApp 显示如下结果：

```
function doGet(){
  var targetId = '0AnqSFd3iikE3dFRqUFVMSjdiSU9EV1pGcG1hQ3FlT1E'
  var sh = SpreadsheetApp.openById(targetId).getSheetByName('tracker sheet');
  var cell = sh.getRange(sh.getLastRow(),1).getValue();
  var html ="<!DOCTYPE html><body>Active Cell in your sheet is "+cell+"</body></html>";
  return HtmlService.createHtmlOutput(html).setTitle('onEdit result')
} 
```

一个[测试表在这里](https://docs.google.com/spreadsheet/ccc?key=0AnqSFd3iikE3dFRqUFVMSjdiSU9EV1pGcG1hQ3FlT1E)（带有一个你可以写的“主表”和一个包含 A1 符号的“跟踪表”）并且附加到它的 webapp[在这里](https://script.google.com/macros/s/AKfycbxpUjmetuivrRmgbhsFscXwthnnsomR8RS5YaE0U36j1fAlBzt5/exec)

我添加了一个“toast”来监控 onEdit 功能，仅用于测试目的

# asp.net-mvc - Windows Azure + Asp.Net MVC + 电子商务

> ID：14143856
> 
> 赞同：4
> 
> 时间：2013-01-03T17:18:38.550
> 
> 标签：asp.net-mvc, azure, e-commerce

我将开发并托管一个基于 Asp.Net MVC4 的电子商务网站（带有几个 SQL Server 作业）。

我认为使用 Azure 是为了留在微软的世界中并避免专门的服务器管理。

与 1 个站点共享的包网站/5Go SQL Server 数据库/200Go 带宽非常有趣，价格基于 12 个月。

但我不知道这种配置在带宽上是否足够。

你觉得......怎么样 ？您是否将 Azure 与此类应用程序一起使用？

问候，纪尧姆。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T21:45:38.640

如果您想开发电子商务应用程序，您将必须通过安全连接（**HTTPS；在许多国家/地区这是法律要求**）来保护客户的敏感数据，例如信用卡、地址详细信息等。出于这个原因，您必须拥有 SSL 支持。

**Azure 网站**不支持自定义域的 SSL。但是，它们支持* *.azurewebsites.net* DNS 名称的 SSL。因此，如果您的电子商务应用程序 DNS 将是*my-ecom-app.azurewebsites.net* ，那就没问题了。否则，我不会推荐 Azure 网站解决方案（我确信将实现对 Azure 网站上自定义域的 SSL 支持）。

**另一方面，**Azure 云服务完全支持自定义域的 SSL。****

 **[ScottGu 的博客](http://weblogs.asp.net/scottgu/)是检查 Azure 功能和开发路线图的最佳网站之一

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:47:16.563

Azure 网站不支持 SSL，我真的不知道有任何成功的电子商务网站至少在部分网站上不运行 SSL。如果您今天真的想在 Azure 上托管您的电子商务，您唯一真正的选择是为您的 Web 前端服务器运行虚拟机并将它们用于您的数据库或使用 SQL Azure。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-19T20:18:32.067

我们开发了一个名为[Virto Commerce](http://virtocommerce.com)的平台，即托管在 Azure 上的 MVC4 网站。我们还需要使用 WorkerRole（而不是 WebRole）的 SQL 作业（索引、支付处理、购物车清理等）。WorkerRole 和 WebRole 实际上可以组合为单个部署的一部分，但是最好为工作角色使用不同的实例。在我们的例子中，WorkerRole 充当了数据库中定义的多个作业的调度程序。

然而，WorkerRoles 面临的挑战是确保它们在添加新实例时能够很好地扩展。所以工作负载需要分布在多个实例之间。这是通过使用队列和 blob 锁来完成的，其中每个作业现在被分成两个，一个用于调度和分区工作，另一个实际拾取下一个分区并完成它。

希望这可以帮助！

PS：Virto Commerce 现在作为 codeplex 上的开源项目提供，请访问[http://virtocommerce.codeplex.com](http://virtocommerce.codeplex.com)**

# vim - Vim：启动时没有突出显示

> ID：14143858
> 
> 赞同：2
> 
> 时间：2013-01-03T17:18:41.560
> 
> 标签：vim

我将 vim 与 NERDTree 和 MiniBufExplorer 一起使用。我的配色方案是peaksea。如果我启动 vim，第一个缓冲区中不会突出显示任何语法。其他缓冲区的语法突出显示。我的 vimrc 中有“语法启用”。如果我输入 :edit 语法会突出显示。所以我尝试了

```
autocmd VimEnter * edit 
```

但仍然没有突出显示。有没有人遇到过类似的问题或有人知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-04-21T12:15:12.470

我重新映射 F12 以重做我的语法突出显示，以防它搞砸了：

```
nnoremap <F12> :syntax sync fromstart<cr> 
```

也许您可以在 vimrc 中基于读取新缓冲区将其作为 autocmd 事件运行？

```
autocmd BufReadPost * :syntax sync fromstart 
```

# wordpress - 生成加盐的 wordpress 哈希

> ID：14143860
> 
> 赞同：0
> 
> 时间：2013-01-03T17:18:49.567
> 
> 标签：wordpress, hash, salt

我是 wordpress 领域的新手

所以这是一个加盐的 wordpress 哈希：

`$1$4Dad4CM6$I63lezzBCDjK9RhBwUgZi1`

我怎样才能生成这样的哈希？

谢谢你。

# c# - EF 代码优先和身份插入 - 一次身份插入开启，其余时间关闭

> ID：14143862
> 
> 赞同：0
> 
> 时间：2013-01-03T17:18:54.273
> 
> 标签：c#, entity-framework, ef-code-first, guid, identity-insert

我有一个应用程序，其中大部分都有一个简单的用户表。PK，UserID，是一个 Guid。我首先使用 EF 代码，以下代码一切正常：

```
[DatabaseGenerated(DatabaseGeneratedOption.Identity)]
public Guid UserID { get; set; } 
```

但是，在我的应用程序中，我实际上想强制使用 Guid。这是一种特殊情况，在这个代码块之外，其他任何地方都应该按预期从数据库中生成 Guid。

我知道在我编写的 Initializer 中的 Seed 函数中，我可以很好地插入 ID。如何重现这些条件，以便在这种极端情况下插入标识值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:47:12.950

如果不是自动生成的身份插入...使用 Guid 作为主键，然后具有 NewGuid() 的默认值，该怎么办。这样，如果您不提供 Guid 值，则由数据库生成一个。

不需要SP。

**编辑：**

或者没有自动生成的 id，让实体本身控制初始值。如果您在构建后设置它的值，那么就可以了。

通过对相关实体类进行小的更改，您可以实现您想要的。

```
 class MyEntity {
        public Guid EntityId { get; set; }

        public MyEntity() {
            EntityId = Guid.NewGuid();
        }
    } 
```

# php - 在 PHP 中渲染视图

> ID：14143865
> 
> 赞同：7
> 
> 时间：2013-01-03T17:19:00.257
> 
> 标签：php, model-view-controller, view

我正在编写自己的 MVC 框架，并已来到视图渲染器。我将控制器中的 vars 设置为 View 对象，然后在 .phtml 脚本中通过 echo $this->myvar 访问 vars。

在我的 default.phtml 中，我调用方法 $this->content() 来输出视图脚本。

这就是我现在做的方式。这是一个正确的方法吗？

```
class View extends Object {

    protected $_front;

    public function __construct(Front $front) {
        $this->_front = $front;
    }

    public function render() {                
        ob_start();
        require APPLICATION_PATH . '/layouts/default.phtml' ;            
        ob_end_flush();
    }

    public function content() {
        require APPLICATION_PATH . '/views/' . $this->_front->getControllerName() . '/' . $this->_front->getActionName() . '.phtml' ;
    }

} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-03T17:45:46.943

简单视图类的示例。与您和大卫爱立信的非常相似。

```
<?php

/**
 * View-specific wrapper.
 * Limits the accessible scope available to templates.
 */
class View{
    /**
     * Template being rendered.
     */
    protected $template = null;

    /**
     * Initialize a new view context.
     */
    public function __construct($template) {
        $this->template = $template;
    }

    /**
     * Safely escape/encode the provided data.
     */
    public function h($data) {
        return htmlspecialchars((string) $data, ENT_QUOTES, 'UTF-8');
    }

    /**
     * Render the template, returning it's content.
     * @param array $data Data made available to the view.
     * @return string The rendered template.
     */
    public function render(Array $data) {
        extract($data);

        ob_start();
        include( APP_PATH . DIRECTORY_SEPARATOR . $this->template);
        $content = ob_get_contents();
        ob_end_clean();
        return $content;
    }
}

?> 
```

类中定义的函数将可以在视图中访问，如下所示：

```
<?php echo $this->h('Hello World'); ?> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-03T17:32:35.253

这是我如何做到的一个例子：

```
<?php

class View
{
private $data = array();

private $render = FALSE;

public function __construct($template)
{
    try {
        $file = ROOT . '/templates/' . strtolower($template) . '.php';

        if (file_exists($file)) {
            $this->render = $file;
        } else {
            throw new customException('Template ' . $template . ' not found!');
        }
    }
    catch (customException $e) {
        echo $e->errorMessage();
    }
}

public function assign($variable, $value)
{
    $this->data[$variable] = $value;
}

public function __destruct()
{
    extract($this->data);
    include($this->render);

}
}
?> 
```

我使用控制器中的 assign 函数来分配变量，并在析构函数中提取该数组以使它们成为视图中的局部变量。

如果您愿意，请随意使用它，我希望它能让您了解如何做到这一点

这是一个完整的例子：

```
class Something extends Controller 
{
    public function index ()
    {
    $view = new view('templatefile');
    $view->assign('variablename', 'variable content');
    }
} 
```

在您的视图文件中：

```
<?php echo $variablename; ?> 
```

# ios - 同步预编程通知的最佳通知方案（本地与推送）

> ID：14143866
> 
> 赞同：1
> 
> 时间：2013-01-03T17:19:02.027
> 
> 标签：ios, notifications, push-notification, apple-push-notifications, uilocalnotification

我一直在阅读 Apple 关于[Local 和 Push Notifications](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194-CH1-SW1)的文档。从技术上讲，我理解这两种解决方案。然而，技术文档有时缺乏只有经验才能教的细节——这就是我来这里的原因。我需要知道什么是我当前问题的最佳解决方案。

**我需要做什么：**

我需要实现一个通知系统，该系统在用户选择的特定预编程日期触发。这些通知应该跨设备同步，这意味着用户可以从多个设备（共享应用程序的用户帐户）打开/关闭这些通知。

**我的问题：**

实现这一点的最佳方式是什么：本地通知还是推送通知？

**我的分析：**

本地通知更容易设置，而且它们应该足以显示不依赖于服务器事件的预编程通知。问题是我需要通过我们的服务器为所有用户的设备实现自定义同步机制。

推送通知对我来说似乎有点矫枉过正。它们对于预编程的通知并不是真正必需的，并且可能更适合其他类型的通知。从好的方面来说，它们似乎提供了开箱即用的跨设备同步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:55:11.390

我希望找到我询问的两种方法中的一种明显优于另一种，但显然你只需要根据你的情况选择一种。

我将复制我在上面发布的内容的片段，事实证明这是一个很好的优缺点列表。

PS：在我们的特殊情况下，我们使用本地通知（当应用程序运行时，我们自己在设备之间同步它们）。

**选择方法：**

本地通知更容易设置，而且它们应该足以显示不依赖于服务器事件的预编程通知。问题是您需要通过您的服务器为所有用户的设备实现自定义同步机制（如果您希望应用程序在同一用户的多个设备上运行良好）。正如 nickbona（上图）在评论中指出的那样，自定义同步机制仅在您的应用程序运行时才有效。

推送通知似乎有点矫枉过正，需要更多的努力来设置。它们对于预编程的通知并不是真正必需的，并且可能更适合其他类型的通知。从好的方面来说，它们似乎提供了开箱即用的跨设备同步。

# ios - iOS OpenGLES2.0 以正确大小绘制点

> ID：14143883
> 
> 赞同：1
> 
> 时间：2013-01-03T17:19:46.400
> 
> 标签：ios, opengl-es

使用下面的代码，我从不同大小的三角形条中绘制线条。在最后一个三角形的点，我想添加一个 GLpoint 基元，这样它看起来就像这条线有一个圆形的末端。如何根据最终三角形的大小计算 GLpoint 的正确直径？请参阅所附图片，展示我目前拥有的东西（这个点太大了）。

![在此处输入图像描述](../Images/8fa819e3da9a106ae70fa0c3f786e970.png)

```
 - (void)pan:(UIPanGestureRecognizer *)p {

        CGPoint v = [p velocityInView:self.view];
        CGPoint l = [p locationInView:self.view];

       float distance = sqrtf((l.x - previousPoint.x) * (l.x - previousPoint.x) + (l.y - previousPoint.y) * (l.y - previousPoint.y));

        float velocityMagnitude = sqrtf(v.x*v.x + v.y*v.y);
        float clampedVelocityMagnitude = clamp(VELOCITY_CLAMP_MIN, VELOCITY_CLAMP_MAX, velocityMagnitude);
        float normalizedVelocity = (clampedVelocityMagnitude - VELOCITY_CLAMP_MIN) / (VELOCITY_CLAMP_MAX - VELOCITY_CLAMP_MIN);

        float lowPassFilterAlpha = STROKE_WIDTH_SMOOTHING;
        float newThickness = (STROKE_WIDTH_MAX - STROKE_WIDTH_MIN) * normalizedVelocity + STROKE_WIDTH_MIN;
        penThickness = penThickness * lowPassFilterAlpha + newThickness * (1 - lowPassFilterAlpha);

        glBindVertexArrayOES(vertexArrayTriangles);
        glBindBuffer(GL_ARRAY_BUFFER, vertexBufferTriangles);

        if ([p state] == UIGestureRecognizerStateBegan)
        {
            previousPoint = l;
            previousMidPoint = l;

            NISignaturePoint startPoint = {
                {    (l.x / self.view.bounds.size.width * 2\. - 1), ((l.y / self.view.bounds.size.height) * 2.0 - 1) * -1, 0}, {0,0,0}
            };
            previousVertex = startPoint;
            previousThickness = penThickness;

            addVertexTriangles(&lengthTriangles, startPoint);
            addVertexTriangles(&lengthTriangles, previousVertex);

        } else if ([p state] == UIGestureRecognizerStateChanged) {

            CGPoint mid = CGPointMake((l.x + previousPoint.x) / 2.0, (l.y + previousPoint.y) / 2.0);

            if (distance > QUADRATIC_DISTANCE_TOLERANCE) {
                // Plot quadratic bezier instead of line
                unsigned int i;

                int segments = (int) distance / 1.5;

                float startPenThickness = previousThickness;
                float endPenThickness = penThickness;
                previousThickness = penThickness;

                for (i = 0; i < segments; i++)
                {
                    penThickness = startPenThickness + ((endPenThickness - startPenThickness) / segments) * i;
                    double t = (double)i / (double)segments;
                    double a = pow((1.0 - t), 2.0);
                    double b = 2.0 * t * (1.0 - t);
                    double c = pow(t, 2.0);
                    double x = a * previousMidPoint.x + b * previousPoint.x + c * mid.x;
                    double y = a * previousMidPoint.y + b * previousPoint.y + c * mid.y;

                    NISignaturePoint v = {
                        {
                            (x / self.view.bounds.size.width * 2\. - 1),
                            ((y / self.view.bounds.size.height) * 2.0 - 1) * -1,
                            0
                        },
                        strokeColor
                    };

                    [self addTriangleStripPointsForPrevious:previousVertex next:v];

                    previousVertex = v;
                }
            }        
            previousPoint = l;
            previousMidPoint = mid;

        }
        else if (p.state == UIGestureRecognizerStateEnded | p.state == UIGestureRecognizerStateCancelled)
        {
            addVertexTriangles(&lengthTriangles, previousVertex);
            addVertexTriangles(&lengthTriangles, previousVertex);

            glBindVertexArrayOES(vertexArrayPoints);
            glBindBuffer(GL_ARRAY_BUFFER, vertexBufferPoints);

            NISignaturePoint startPoint = {
                {previousVertex.vertex.x, previousVertex.vertex.y, 0}, strokeColor, ???
            };

            addVertexPoints(&lengthPoints, startPoint);

            penThickness = STROKE_WIDTH_MIN;
            previousThickness = penThickness;
        }
    }

    - (void)addTriangleStripPointsForPrevious:(NISignaturePoint)previous next:(NISignaturePoint)next {
        float toTravel = penThickness / 2.0;

        //NSLog(@"add tri");

        for (int i = 0; i < 2; i++) {
            GLKVector3 p = perpendicular(previous, next);
            GLKVector3 p1 = next.vertex;
            GLKVector3 ref = GLKVector3Add(p1, p);

            float distance = GLKVector3Distance(p1, ref);
            float difX = p1.x - ref.x;
            float difY = p1.y - ref.y;
            float ratio = -1.0 * (toTravel / distance);

            difX = difX * ratio;
            difY = difY * ratio;

            NISignaturePoint stripPoint = {
                { p1.x + difX, p1.y + difY, 0.0 },
                strokeColor
            };
            addVertexTriangles(&lengthTriangles, stripPoint);

            toTravel *= -1;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:39:55.337

![在此处输入图像描述](../Images/f598846c30957d476a662d8993f1ff88.png)

您可能包括`UIGestureRecognizerStateChanged`, `UIGestureRecognizerStateEnded`, 和`UIGestureRecognizerStateCancelled`作为绘制线的一种情况，但随后检测后两种情况以添加直径等于的终点`0.5+endPenThickness`

```
- (void)pan:(UIPanGestureRecognizer *)p {

    CGPoint v = [p velocityInView:self.view];
    CGPoint l = [p locationInView:self.view];

    float distance = sqrtf((l.x - previousPoint.x) * (l.x - previousPoint.x) + (l.y - previousPoint.y) * (l.y - previousPoint.y));

    float velocityMagnitude = sqrtf(v.x*v.x + v.y*v.y);
    float clampedVelocityMagnitude = clamp(VELOCITY_CLAMP_MIN, VELOCITY_CLAMP_MAX, velocityMagnitude);
    float normalizedVelocity = (clampedVelocityMagnitude - VELOCITY_CLAMP_MIN) / (VELOCITY_CLAMP_MAX - VELOCITY_CLAMP_MIN);

    float lowPassFilterAlpha = STROKE_WIDTH_SMOOTHING;
    float newThickness = (STROKE_WIDTH_MAX - STROKE_WIDTH_MIN) * normalizedVelocity + STROKE_WIDTH_MIN;
    penThickness = penThickness * lowPassFilterAlpha + newThickness * (1 - lowPassFilterAlpha);

    glBindVertexArrayOES(vertexArrayTriangles);
    glBindBuffer(GL_ARRAY_BUFFER, vertexBufferTriangles);

    if ([p state] == UIGestureRecognizerStateBegan)
    {
        previousPoint = l;
        previousMidPoint = l;

        NISignaturePoint startPoint = {
            {    (l.x / self.view.bounds.size.width * 2\. - 1), ((l.y / self.view.bounds.size.height) * 2.0 - 1) * -1, 0}, {0,0,0}
        };
        previousVertex = startPoint;
        previousThickness = penThickness;

        addVertexTriangles(&lengthTriangles, startPoint);
        addVertexTriangles(&lengthTriangles, previousVertex);

    } else {
        // UIGestureRecognizerStateChanged, UIGestureRecognizerStateEnded, and UIGestureRecognizerStateCancelled

        CGPoint mid = CGPointMake((l.x + previousPoint.x) / 2.0, (l.y + previousPoint.y) / 2.0);

        if (distance > QUADRATIC_DISTANCE_TOLERANCE) {
            // Plot quadratic bezier instead of line
            unsigned int i;

            int segments = (int) distance / 1.5;

            float startPenThickness = previousThickness;
            float endPenThickness = penThickness;
            previousThickness = penThickness;

            for (i = 0; i < segments; i++)
            {
                penThickness = startPenThickness + ((endPenThickness - startPenThickness) / segments) * i;
                double t = (double)i / (double)segments;
                double a = pow((1.0 - t), 2.0);
                double b = 2.0 * t * (1.0 - t);
                double c = pow(t, 2.0);
                double x = a * previousMidPoint.x + b * previousPoint.x + c * mid.x;
                double y = a * previousMidPoint.y + b * previousPoint.y + c * mid.y;

                NISignaturePoint v = {
                    {
                        (x / self.view.bounds.size.width * 2\. - 1),
                        ((y / self.view.bounds.size.height) * 2.0 - 1) * -1,
                        0
                    },
                        strokeColor
                };

                [self addTriangleStripPointsForPrevious:previousVertex next:v];

                previousVertex = v;
            }
        }        
        previousPoint = l;
        previousMidPoint = mid;

        if (p.state == UIGestureRecognizerStateEnded | p.state == UIGestureRecognizerStateCancelled)
        {
            glBindVertexArrayOES(vertexArrayPoints);
            glBindBuffer(GL_ARRAY_BUFFER, vertexBufferPoints);

            NISignaturePoint startPoint = {
                {previousVertex.vertex.x, previousVertex.vertex.y, 0}, strokeColor, endPenThickness / 2.
            };

            addVertexPoints(&lengthPoints, startPoint);

            penThickness = STROKE_WIDTH_MIN;
            previousThickness = penThickness;
        }
    }
} 
```

# java - 尝试插入 SQLite 时出现 NullPointerException - Android

> ID：14143886
> 
> 赞同：1
> 
> 时间：2013-01-03T17:20:03.007
> 
> 标签：java, android, sqlite, nullpointerexception, insertion

关注Android标签的人可能对我很熟悉。我最难为我的高分实现 SQLite 数据库。这也是我第一次使用 SQLite。

我试图只插入两个变量——int 和long。我的`insert()`方法无法正常工作。除了上面谈到的东西之外的任何建议也值得赞赏。

预先感谢您的帮助。

高分.java

```
public class Highscores extends Activity {

    DatabaseHelper dh;
    SQLiteDatabase db;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.highscoresmain);

        dh = new DatabaseHelper(this);
        dh.openDB(db);
        long x = 11;
        int y = 22;

        TextView rank = (TextView)findViewById(R.id.rank);
        TextView percentage = (TextView)findViewById(R.id.percentage);
        TextView score = (TextView)findViewById(R.id.score);

        TextView r1r = (TextView)findViewById(R.id.r1r);
        TextView r1p = (TextView)findViewById(R.id.r1p);
        TextView r1s = (TextView)findViewById(R.id.r1s);

        dh.insert(x, y, db);  //Line 55
        scores = dh.getScore(db);
        percentages = dh.getPercentage(db);

        rank.setText("Rank Column - TEST");
        percentage.setText("Percentage Column - TEST ");
        score.setText("Score Column - Test");
        r1r.setText("test..rank");
        r1p.setText("" + percentages);
        r1s.setText("test..score");

        table = (TableLayout)findViewById(R.id.tableLayout);

        dh.closeDB(db);
    }
} 
```

数据库助手.java

```
public class DatabaseHelper extends SQLiteOpenHelper { 

    SQLiteDatabase db;

    // Table columns names. 
    private static final String RANK = "_id"; 
    private static final String SCORE = "score"; 
    private static final String PERCENTAGE = "percentage";

    public DatabaseHelper(Context context) { 
        super(context, DB_NAME, null, DATABASE_VERSION); 
    }

    public SQLiteDatabase openDB(SQLiteDatabase db) {
        db = this.getWritableDatabase();
        return db;
    }

    public int getPercentage(SQLiteDatabase db) {
        //Cursor c = db.rawQuery("SELECT " + PERCENTAGE + " FROM " + TABLE + " WHERE " + PERCENTAGE + " = " + 22 + ";", null);
        Cursor c = db.rawQuery("SELECT " + PERCENTAGE + " FROM " + TABLE + ";", null);
        int i = 0;
        if(c.getCount() == 0) {
            i = 333;
        } else if (c.getCount() == 1) {
            i = 444;
        } else {
            i = 888;
               /*c.moveToFirst();
               int columnIndex = c.getInt(c.getColumnIndex("PERCENTAGE"));
               if(columnIndex != -1) {
                   i = c.getInt(columnIndex);
               } else { 
                   i = 999; 
               }*/
        }
        c.close();
        return i;
   }

    //Insert new record.
    public long insert(long score, int percentage, SQLiteDatabase db) {
        ContentValues values = new ContentValues();
        values.put(SCORE, score);
        values.put(PERCENTAGE, percentage);

        return db.insert(TABLE, null, values);  //Line 120
    }

    public synchronized void closeDB(SQLiteDatabase db) {
        if(db != null) {
            db.close();
        }
        super.close();
    }

    public void onCreate(SQLiteDatabase db) {
        db.execSQL("CREATE TABLE " + TABLE + " ("
                + RANK + " INTEGER PRIMARY KEY AUTOINCREMENT,"
                + SCORE + " LONG,"
                + PERCENTAGE + " INTEGER"
                + ");");
} 
```

LogCat 输出

```
01-03 17:09:18.232: E/AndroidRuntime(1712): FATAL EXCEPTION: main
01-03 17:09:18.232: E/AndroidRuntime(1712): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.test/com.example.test.Highscores}: java.lang.NullPointerException
01-03 17:09:18.232: E/AndroidRuntime(1712):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-03 17:09:18.232: E/AndroidRuntime(1712):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-03 17:09:18.232: E/AndroidRuntime(1712):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-03 17:09:18.232: E/AndroidRuntime(1712):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-03 17:09:18.232: E/AndroidRuntime(1712):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-03 17:09:18.232: E/AndroidRuntime(1712):     at android.os.Looper.loop(Looper.java:137)
01-03 17:09:18.232: E/AndroidRuntime(1712):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-03 17:09:18.232: E/AndroidRuntime(1712):     at java.lang.reflect.Method.invokeNative(Native Method)
01-03 17:09:18.232: E/AndroidRuntime(1712):     at java.lang.reflect.Method.invoke(Method.java:511)
01-03 17:09:18.232: E/AndroidRuntime(1712):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-03 17:09:18.232: E/AndroidRuntime(1712):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-03 17:09:18.232: E/AndroidRuntime(1712):     at dalvik.system.NativeStart.main(Native Method)
01-03 17:09:18.232: E/AndroidRuntime(1712): Caused by: java.lang.NullPointerException
01-03 17:09:18.232: E/AndroidRuntime(1712):     at com.example.test.DatabaseHelper.insert(DatabaseHelper.java:120)
01-03 17:09:18.232: E/AndroidRuntime(1712):     at com.example.test.Highscores.onCreate(Highscores.java:55)
01-03 17:09:18.232: E/AndroidRuntime(1712):     at android.app.Activity.performCreate(Activity.java:5104)
01-03 17:09:18.232: E/AndroidRuntime(1712):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-03 17:09:18.232: E/AndroidRuntime(1712):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-03 17:09:18.232: E/AndroidRuntime(1712):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T17:22:41.563

在这一行上，您打开数据库：

```
dh.openDB(db); 
```

这将数据库的成员变量存储在`DatabaseHelper.db`（但没有其他地方，特别是没有`Highscores.db`）中。然后，您调用：

```
dh.insert(x, y, db); 
```

使用`null` `db`来自 的对象`Highscores`。最后，在 内`insert()`，您使用此`null` `db`对象：

```
return db.insert(TABLE, null, values); 
```

您应该做的是使用以下方法作为您的`insert()`方法：

```
public long insert(long score, int percentage) { // Remove db parameter
    ContentValues values = new ContentValues();
    values.put(SCORE, score);
    values.put(PERCENTAGE, percentage);

    return db.insert(TABLE, null, values); // This will use the member variable
} 
```

然后，`dh.insert(x, y);`改为打电话。

您还应该更改`openDB(SQLiteDatabase db)`为，`openDB()`以便它正在写入正确的数据库；就目前而言，它只是覆盖了局部变量的值（一旦函数的作用域完成，它就不会改变任何东西）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T17:23:28.613

代替

```
dh.openDB(db); 
```

说

```
db = dh.openDB(db); 
```

（尽管该`openDB`方法确实不需要参数）。您的调用`openDB`不会将数据库对象引用存储在 中`db`，因此当您开始调用时它为 NULL `dh.insert(..., db);`。

# r - csv中的Rscript意外数字常量

> ID：14143887
> 
> 赞同：1
> 
> 时间：2013-01-03T17:20:07.780
> 
> 标签：r

我正在尝试使用我使用 Rscript 命令调用的 R 脚本从制表符分隔文件中读取数据。在脚本中，调用如下：

```
# within R script called via Rscript
df <- read.csv(file="sig_ids_MCF7_6.mat", header=F, sep="\t")
# produces the error "Error: unexpected numeric constant in "CPD001_MCF7_6H:BRD-A02759312-003-17-9   0.357200026512"
# Execution halted 
```

但是当我简单地使用 R 控制台读取这个文件时，一切正常。

```
# within R console
df <- read.csv(file="sig_ids_MCF7_6.mat", header=F, sep="\t") 
```

这个文件很大，但摘录如下：

```
$ head -n 3 sig_ids_MCF7_6.mat | cut -f 1-6
CPD001_MCF7_6H:BRD-A02759312-003-17-9   0.357200026512  -1.81755006313  1.26394999027   0.998450040817  0.267199993134
CPC020_MCF7_6H:BRD-A23290232-001-02-3   0.371100068092  0.52954274416   0.0509457141161 0.202583178878  0.667555570602
CPC016_MCF7_6H:BRD-K98521173-001-03-8   -0.513105690479 -0.618193089962 -0.177318453789 0.425470650196  0.0688976272941 
```

我在 Mac OS X 版本 10.7.5 上运行 64 位 R 版本 2.15.1。知道为什么会发生这种情况吗？我一直在谷歌搜索，但没有运气。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:36:42.713

已解决：愚蠢的错误，我的命令参数顺序错误，Rscript 试图将数据文件作为脚本运行。我很抱歉。

# java - Log4j 扩展 Logger

> ID：14143888
> 
> 赞同：0
> 
> 时间：2013-01-03T17:20:09.523
> 
> 标签：java, logging, log4j

我扩展了 Log4J Logger 类并创建了一个自定义 Logger 类来决定是否记录。

我的模式布局有`%F`和`%M`参数来显示执行日志的类名和方法名。

问题是它没有显示异常调用者类和方法名，而是显示了我的自定义记录器的类和方法名！

我需要做什么才能显示正确的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T00:12:57.047

您需要提供您的类作为该`forcedLog()`方法的完全限定类名。

```
private static final String FQCN = MyCustomLogger.class.getName();

...

public void info(Object message) {
    if(repository.isDisabled(Level.INFO_INT))
        return;
    if(Level.INFO.isGreaterOrEqual(this.getEffectiveLevel()))
        forcedLog(FQCN, Level.INFO, message, null);
}

.... 
```

我不确定您要过滤掉什么，但最好使用过滤器而不是扩展记录器。

# java - 如何将数据放入 JSP 中的 HTML 元素中？

> ID：14143889
> 
> 赞同：0
> 
> 时间：2013-01-03T17:20:13.757
> 
> 标签：java, html, jsp

我对 JSP 真的很陌生，我想弄清楚如何在我的 HTML 中显示来自 ArrayList 的数据？

我可以做这样的事情：

```
<article>
 <p><%= myArrayList.elementAt(0).toString() %></p>
</article> 
```

还是我使用 out.printnln？

非常感谢任何指导。这个问题不仅仅适用于一个 ArrayList，更多的是我有 String 数据检索了我的 java 类，我需要在我的 HTML 中显示它。

一如既往，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:25:38.990

1 是的，它应该这样工作。然而你只显示第一个元素，你需要将它放在一个循环中以显示所有内容

```
 <% for(Object obj : myArrayList) { %>
  <article>
     <p><%= obj.toString() %></p>
  </article>
  <% } %> 
```

2`out.println`与 相同`<%=`。更好地使用后者来清楚地显示 HTML 代码，`out.println`这将用于复杂的表达式（避免`<%=`过于频繁地打开和关闭以提高可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:23:22.177

```
<c:forEach items="${myArrayList}" var="product" varStatus="loop">
            <td>
                 ${product.id}
                 ${product.name}
            </td>
</c:forEach> 
```

将调用 getName() 和 getId() 方法并将它们输出到 html。

# java - 检测 Android 应用程序是否在“BlueStacks”中运行的可靠方法

> ID：14143896
> 
> 赞同：17
> 
> 时间：2013-01-03T17:20:54.313
> 
> 标签：java, android, android-emulator, emulation, bluestacks

我想在 Android 应用程序的运行时确定它是否在[BlueStacks](http://bluestacks.com/) Android 模拟器中运行。这样我就可以修改应用程序在 BlueStacks 中运行时的运行方式。

BlueStacks 不支持多点触控，所以我想实现一个替代我当前应用程序具有的标准捏到缩放功能的替代方案。

例如

```
If (appIsRunningInBlueStacks){
    mySurfaceView.enableMultiTouchAlternatives();
} else{
    mySurfaceView.enableMultiTouchFeatures();
} 
```

确定 appIsRunningInBlueStacks 价值的可靠方法是什么？

**编辑问题评论的答案摘要：**

Ben，Taras，感谢您的建议。BlueStacks 的 Build.MODEL 等值为：

*   型号：“GT-I9100”

*   制造商：“三星”

*   设备：“GT-I9100”

*   产品：“GT-I9100”

这与三星 Galaxy SII 的型号相同，因此使用它并不理想，因为担心使用 SII 的所有用户都与 BlueStacks 上的用户相同。

CommonsWare，该应用程序继续在 BlueStacks 中运行，即使清单中的 <uses-feature> 用于多点触控。事实上（也回答了 iagreen 的问题）......

```
packageManager.hasSystemFeature(PackageManager.FEATURE_TOUCHSCREEN_MULTITOUCH_DISTINCT); 
```

...返回真！我想这是可以预料的，因为模拟器确信它是三星 Galaxy SII！

因此，我们仍然无法可靠地检测应用程序是否在 BlueStacks 上运行，而不会将所有三星 Galaxy SII 用户放在同一个存储桶中。还有其他想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-23T16:00:42.297

您可以检查 Bluestacks 共享文件夹是否存在 /sdcard/windows/BstSharedFolder

```
 Boolean onBlueStacks()
        {
        File sharedFolder = new File(Environment
                .getExternalStorageDirectory().toString()
                + File.separatorChar
                + "windows"
                + File.separatorChar
                + "BstSharedFolder");

        if (sharedFolder.exists())
            {
            return true;
            }

        return false;
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-23T20:00:53.500

我的 BlueStacks 版本将我的报告`Build.Model`为`GT-N7100`.

使用：`android.opengl.GLES20.glGetString(android.opengl.GLES20.GL_RENDERER)`我得到`Bluestacks`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-24T11:03:42.133

在尝试了所有在线可用的建议解决方案后，我们发现[Google 的 SafetyNet Attestation API](https://developer.android.com/training/safetynet/attestation)是检测 BlueStack（任何版本）和 NoxPlayer 等 VM 的唯一解决方案。

关心内容盗版（和其他安全问题）的应用程序可以过滤它们在 Google Play 上的可用性，就像[Netflix 过滤器在 PlayStore 上的设备](https://www.androidauthority.com/google-play-store-apps-download-block-root-users-773824/)一样。

> 控制台的新“设备目录”部分包括一个名为“SafetyNet 排除”的选项，可用于防止“未通过完整性测试或未经 Google 认证的设备”下载特定应用程序：其中包括植根设备和运行自定义 ROM 的设备。

但是有一个问题，用户仍然会从交叉共享或其他分发系统中找到 APK，因此客户端必须`SafetyNet Attestation API`在应用级别实现。

*它是如何工作的？*

> SafetyNet 会检查安装您的应用程序的设备上的软件和硬件信息，以创建该设备的配置文件。然后，该服务会尝试在已通过 Android 兼容性测试的设备型号列表中找到相同的配置文件。API 还使用这些软硬件信息来帮助您评估设备的基本完整性，以及调用应用程序的 APK 信息。此证明可帮助您确定特定设备是否已被篡改或以其他方式修改。

它是来自 Google 的（易于实施）付费 API，截至目前每天允许 10,000 次免费点击：\

如果有人对自己检测虚拟机感兴趣，这些是推荐启发式方法的好论文：

[通过沙盒检测规避 Android 运行时分析](https://users.ece.cmu.edu/~tvidas/papers/ASIACCS14.pdf)

[对虚拟机的愤怒：阻碍 Android 恶意软件的动态分析](http://www.syssec-project.eu/m/page-media/3/petsas_rage_against_the_virtual_machine.pdf)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-23T08:23:36.977

可能为时已晚，但为了其他有同样问题的人：

```
public boolean isRunningOnEmulator() {
    return Build.FINGERPRINT.startsWith("generic")
        || Build.FINGERPRINT.startsWith("unknown")
        || Build.MODEL.contains("google_sdk")
        || Build.MODEL.contains("Emulator")
        || Build.MODEL.contains("Android SDK built for x86")
        || Build.MANUFACTURER.contains("Genymotion")
        || (Build.BRAND.startsWith("generic") && Build.DEVICE.startsWith("generic"))
        || "google_sdk".equals(Build.PRODUCT)
        || Build.PRODUCT.contains("vbox86p")
        || Build.DEVICE.contains("vbox86p")
        || Build.HARDWARE.contains("vbox86");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-07T01:44:59.377

以上所有方法都不适用于BlueStacks 5。正确的方法是检查路径是否`/mnt/windows/BstSharedFolder`存在。它在 BlueStacks 4 和 5 上运行良好。

```
 fun checkFilesExist(files: Array<String>): Boolean {
        files.forEach {
            val file = File(it)
            if (file.exists()) {
                return true
            }
        }
        return false
    }

    fun isBlueStacks(): Boolean {
        val BLUE_STACKS_FILES = arrayOf(
            "/mnt/windows/BstSharedFolder"
        )
        return checkFilesExist(BLUE_STACKS_FILES)
    } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-05-14T12:16:51.237

这将是独一无二的。

Bluestack 中没有蓝牙设备。

因此，请尝试在 Bluestack 或任何模拟器上获取始终为“空”的蓝牙地址字符串。确保在项目清单上添加蓝牙权限。

```
BluetoothAdapter m_BluetoothAdapter = BluetoothAdapter.getDefaultAdapter();

 String m_bluetoothAdd = m_BluetoothAdapter.getAddress(); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-01-29T13:19:04.960

根据[Regis 先生的](https://stackoverflow.com/a/33306794/3287538)回答，您可以在共享文件夹存在时检测到它。但是在 Bluestacks 4 中，使用`file.exists()`只会返回 false。这是因为共享文件夹没有权限（`000`或`----------`）。但是在目录中列出文件会检测到该文件夹​​。

```
String path = Environment.getExternalStorageDirectory().toString();
Log.d("FILES", "Path: " + path);
File directory = new File(path);
File[] files = directory.listFiles();
for (File file : files) {
    if (file.getName().contains("windows")) {
        Log.d("FILES", "windows file exists, it's a bluestacks emu");
    }
} 
```

# batch-file - 打印 findstr 的行和文本

> ID：14143899
> 
> 赞同：0
> 
> 时间：2013-01-03T17:20:58.213
> 
> 标签：batch-file

我有一个包含以下内容的批处理文件：

```
findstr "error" output > nul
if errorlevel 1 (
echo No errors found
) else (
echo Errors detected
) 
```

但是，不是“检测到错误”，而是我想学习如何为有错误的行的每个实例打印行号和行文本。我不知道如何开始这样做，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:31:45.863

`Findstr`可以显示匹配的行号和行本身`/n`：

```
findstr /n "error" output 
if %errorlevel% equ 1 (
echo No Errors detected
) 
```

# ajax - 使用 Amplifyjs 发送 POST 请求

> ID：14143911
> 
> 赞同：0
> 
> 时间：2013-01-03T17:21:50.967
> 
> 标签：ajax, amplifyjs

我想通过 amplifyjs 发送这个 POST 请求

```
amplify.request.define('createItem', 'ajax', {
    url: baseApiUrl + '/create/?folderid={folderid}',
    dataType: 'json',
    type: 'POST',
    contentType: 'application/json; charset=utf-8'
}); 
```

之后，执行将是这样的：

```
createItem = function (callbacks, folderid, itemdata) {
    return amplify.request({
        resourceId: 'createItem',
        data : {
            folderid: folderid,
            data: itemdata
        },
        success: callbacks.success,
        error: callbacks.error
    });
}; 
```

`"itemData"`已经是一个 JSON 字符串。我不断收到错误请求状态代码。

如果我将 API URL 更改为：

```
baseApiUrl + '/create 
```

在那之后：

```
return amplify.request({
    resourceId: 'createItem',
    data :data,
    success: callbacks.success,
    error: callbacks.error
}); 
```

它工作得很好，但我也需要传递 ID。也许，我在这里遗漏了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:04:41.897

您需要将`folderid`and组合`itemdata`成一个`data`对象。当 Amplify 读取您的数据对象时，它将提取`folderid`属性并将其放置在请求的 URL 中。然后它将 POST 数据对象的剩余属性。

# php - 警告：标题信息

> ID：14143912
> 
> 赞同：-4
> 
> 时间：2013-01-03T17:21:56.363
> 
> 标签：php

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我是 php 的初学者，我想创建一个下载按钮，但我收到了一个我不明白的错误。这是我的错误：

> “警告：无法修改标头信息 - 标头已由 D:\Program Files\xampp\htdocs\FormsGenerator\download.php 中的（输出开始于 D:\Program Files\xampp\htdocs\FormsGenerator\index.php:125）发送11号线”

在第 125 行，我打开了 php 的标签来调用创建的函数。这是我的按钮功能代码：

```
<?php
class fileDownload{
  function fileDownload(){
      $core_path = dirname(__FILE__);
      $file_path = "{$core_path}/file/form.html";
      $file_info = array(
            'name' => basename($file_path),
            'size' => filesize($file_path)
        );

      header('Content-Type: application/html');
      header('Content-Description: File Transfer');
      header('Content-Disposition: attachment; filename="'.$file_info['name'].'"');
      header('Content-Lenght: '.$file_info['size']);
      $file = fopen($file_path, 'rb');

      while(!feof($file)){
        echo fread($file, 256);
      }

      fclose($file);
      return;
  }
}
?> 
```

这是调用该类的创建对象：

```
if(isset($_GET['download'])){
       include 'download.php';
        $download = new fileDownload();
} 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:23:59.530

Before calling **header** function you cannot send any output to browser, not even from simple HTML code that you have above your php. That must be the reason

# java - 使用带有 Joda Datetime 的 Jackson 库反序列化 Json 对象

> ID：14143919
> 
> 赞同：1
> 
> 时间：2013-01-03T17:22:13.713
> 
> 标签：java, android, json, web-services, jackson

我正在尝试使用 Jackson 库来反序列化 Json 对象，但在 Joda Datetime 格式反序列化中遇到了一些麻烦。

此代码引发以下错误：

无法解析 Lorg/joda/time/base/AbstractInstant；注释类 1557

```
DataWrapper list = mapper.readValue(response, DataWrapper.class); 
```

我已经尝试找到有关此的内容，但什么也没有。

有完整的代码：

```
public class DataWrapper {
    public List<ScheduleEntry> data;
}

public static class ScheduleEntry {
    public long ID;
public DateTime StartDate;
public DateTime EndDate;
public String Description;
}

WebService callWebService = new WebService(SERVICE_URI);        
String response = callWebService.webInvoke("/GetScheduleEntrys", params);

ObjectMapper mapper = new ObjectMapper();

try
{    
    DataWrapper list = mapper.readValue(response, DataWrapper.class);

    List<ScheduleEntry> items = list.data;
} 
```

网络服务：

```
[OperationContract]
[WebInvoke(Method = "POST",
   UriTemplate = "GetScheduleEntrys",
   BodyStyle = WebMessageBodyStyle.WrappedRequest,
   ResponseFormat = WebMessageFormat.Json,
   RequestFormat = WebMessageFormat.Json)]
List<ScheduleEntry> GetScheduleEntrys(string Token); 
```

JSON：

[{"Description":"Cliente José","EndDate":"/Date(1353319200000+0000)/","ID":0,"StartDate":"/Date(1353315600000+0000)/"},{" Description":"Cliente Carlos","EndDate":"/Date(1353348000000+0000)/","ID":0,"StartDate":"/Date(1353344400000+0000)/"},{"Description": "Cliente Pedro","EndDate":"/Date(1353513600000+0000)/","ID":0,"StartDate":"/Date(1353510000000+0000)/"},{"Description":"Cliente Marco ","EndDate":"/Date(1353664800000+0000)/","ID":0,"StartDate":"/Date(1353661200000+0000)/"},{"Description":"Cliente José","结束日期”：”/Date(1353319200000+0000)/","ID":0,"StartDate":"/Date(1353315600000+0000)/"},{"Description":"Cliente Carlos","EndDate":"/Date( 1353348000000+0000)/","ID":0,"StartDate":"/Date(1353344400000+0000)/"},{"Description":"Cliente Pedro","EndDate":"/Date(1353513600000+0000 )/","ID":0,"StartDate":"/Date(1353510000000+0000)/"},{"Description":"Cliente Marco","EndDate":"/Date(1353664800000+0000)/" ,"ID":0,"开始日期":"/日期(1353661200000+0000)/"}]/Date(1353348000000+0000)/","ID":0,"StartDate":"/Date(1353344400000+0000)/"},{"Description":"Cliente Pedro","EndDate":"/Date( 1353513600000+0000)/","ID":0,"StartDate":"/Date(1353510000000+0000)/"},{"Description":"Cliente Marco","EndDate":"/Date(1353664800000+0000 )/","ID":0,"StartDate":"/Date(1353661200000+0000)/"}]/Date(1353348000000+0000)/","ID":0,"StartDate":"/Date(1353344400000+0000)/"},{"Description":"Cliente Pedro","EndDate":"/Date( 1353513600000+0000)/","ID":0,"StartDate":"/Date(1353510000000+0000)/"},{"Description":"Cliente Marco","EndDate":"/Date(1353664800000+0000 )/","ID":0,"StartDate":"/Date(1353661200000+0000)/"}]/Date(1353664800000+0000)/","ID":0,"StartDate":"/Date(1353661200000+0000)/"}]/Date(1353664800000+0000)/","ID":0,"StartDate":"/Date(1353661200000+0000)/"}]

完整日志

01-03 17:39:24.700：E/dalvikvm(18494)：无法解析 Lorg/joda/time/base/AbstractInstant；注释类 1557 01-03 17:39:28.505: W/dalvikvm(18494): threadid=11: 线程以未捕获的异常退出 (group=0x40c4d1f8) 01-03 17:39:28.650: E/AndroidRuntime(18494): FATAL例外：AsyncTask #1 01-03 17:39:28.650：E/AndroidRuntime(18494)：java.lang.RuntimeException：执行 doInBackground() 01-03 17:39:28.650 时发生错误：E/AndroidRuntime(18494) : 在 android.os.AsyncTask$3.done(AsyncTask.java:278) 01-03 17:39:28.650: E/AndroidRuntime(18494): 在 java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java: 273) 01-03 17:39:28.650: E/AndroidRuntime(18494): 在 java.util.concurrent.FutureTask.setException(FutureTask.java:124) 01-03 17:39:28.650: E/AndroidRuntime(18494) ：在 java.util.concurrent.FutureTask$Sync。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:39:49.557

异常表明您使用的是不兼容的 Joda 版本（很可能是旧版本）。

但是查看 JSON，您的日期值正在使用一些非标准符号进行序列化，因此您可能还需要编写自定义处理程序（或更改序列化格式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:49:52.123

鉴于您拥有的 JSON，您需要在映射器中包含此语句。 `DataWrapper.setData(mapper.readValue(response, new TypeReference<List<ScheduleEntry>>() { }));`

这不会解决您面临的原始问题： `Unable to resolve Lorg/joda/time/base/AbstractInstant; annotation class 1557`

# php - CodeIgniter：同时向父表和子表插入数据

> ID：14143929
> 
> 赞同：0
> 
> 时间：2013-01-03T17:22:44.960
> 
> 标签：php, codeigniter

我有一个客户详细信息表格。它的数据将转到两个表`Snapshot`和`CustomerDetail`. CustomerDetail 表有一个外键引用`SnapshotPK`。SnapshotPK 是一个自动增量列。

*   当客户单击保存按钮时，我将如何在两个表中插入数据？
*   是否可以在事务中的两个插入语句中选择`$this->db->trans_start()`. 不会影响性能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:00:44.993

是的，使用交易。这正是事务的目的——如果其中一个插入失败，您可以回滚事务。维护一致且干净的数据库对性能的影响可以忽略不计。

# postgresql - 如何从 Google 电子表格连接到 Heroku Postgres

> ID：14143930
> 
> 赞同：5
> 
> 时间：2013-01-03T17:22:57.210
> 
> 标签：postgresql, jdbc, heroku, google-apps-script, google-sheets

**我想使用 Google 电子表格来显示我的数据库分析**

我希望能够使用 Google Apps 脚本对我的 Heroku Postgres 数据库进行汇总查询，然后在 Google 电子表格中显示和绘制图表。

Heroku 提供了多种连接 Heroku Postgres 的方法： [https ://devcenter.heroku.com/articles/heroku-postgresql](https://devcenter.heroku.com/articles/heroku-postgresql)

同样，Google Apps 脚本提供对许多不同外部服务的访问 [https://developers.google.com/apps-script/defaultservices](https://developers.google.com/apps-script/defaultservices)

我以前从未尝试过，所以对最简单的东西很感兴趣。

**JDBC 似乎可行，但还有其他选择吗？**

据我所知，两者之间唯一的重叠是 JDBC，我没有经验，但感觉有点像用于在系统之间获取的重量级第三种协议。

JDBC 是获取数据的最佳方式还是我缺少一些更简单的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T23:38:22.670

1.  从 dataclips.heroku.com 设置一个数据剪辑，将所需的数据描述为 SQL 查询。
2.  将 .csv 附加到生成的 URL
3.  在 google 电子表格的 importData 函数上使用该 URL，如下所示：

    =importData(" [https://dataclips.heroku.com/[your-dataclip].csv](https://dataclips.heroku.com/%5byour-dataclip%5d.csv) ")

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-09-08T19:32:09.693

[QueryClips](https://www.queryclips.com)正是您所需要的。这是它的主要用例。

# c# - Umbraco - GetMedia 不返回正确的 url

> ID：14143937
> 
> 赞同：2
> 
> 时间：2013-01-03T17:23:36.253
> 
> 标签：c#, .net, xpath, umbraco

我正在尝试重定向到媒体 url，但使用代码攻击会导致完整的 url 由媒体的大小连接起来。

因此，例如 url 返回 /media/123/example.pdfpdf4000

```
XPathNodeIterator xName = umbraco.library.GetMedia(Convert.ToInt32(pdfid), false);
string url = xName.Current.Value;
Response.Redirect("~/"+ url); 
```

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:20:08.377

我只是在寻找如何做到这一点，umbraco 现在包含 uQuery 以更轻松地获取这样的数据，因此您可以使用以下方法回答您的问题：

```
Media pdf = umbraco.uQuery.GetMedia(pdfId);
Response.Redirect(pdf.GetProperty<string>("umbracoFile")); 
```

请注意：如果它是图像媒体项目（而不是文件），那就更容易了：

```
Media img = umbraco.uQuery.GetMedia(imgId);
imgTag.ImageUrl = img.GetImageUrl(); 
```

不知道为什么 uQuery 不包含`GetFileUrl()`但`GetProperty<string>()`似乎比自己使用 xpath 迭代器更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T09:59:39.123

There is a [solution explained here](http://our.umbraco.org/forum/developers/api-questions/32147-Image-path-from-umbracolibraryGetMedia-is-wrong) and also [here](http://forum.umbraco.org/yaf_postst4929_Getmedia-in-usercontrol.aspx). But, in essence you can create a method as below to fix the issue:

```
public string getImage(int ImageID)
{
    XPathNodeIterator xn = umbraco.library.GetMedia(ImageID, false);
    xn.MoveNext();

    XPathNodeIterator xn2 = xn.Current.Select("data[@alias='umbracoFile']");
    xn2.MoveNext();
    return xn2.Current.Value;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-20T07:19:53.330

要获取媒体文件 URL，很简单

```
new Media(mediaId).getProperty("umbracoFile").Value.ToString() 
```

# objective-c - 创建 UITextView 时 OCUnit 崩溃

> ID：14143939
> 
> 赞同：1
> 
> 时间：2013-01-03T17:23:44.193
> 
> 标签：objective-c, unit-testing, uitextview, ocunit

单元测试目前正在通过大量的负载来处理简陋的馅饼。我正在尝试在我的 BannerAdViewController 类上运行测试，但是当到达以下行时一切都崩溃了：

```
UITextView *buyAppTextView  = [[UITextView alloc] initWithFrame:CGRectMake(8, 2, 304, 50)]; 
```

控制台输出如下：

```
-[__NSCFType markupDescription]: unrecognized selector sent to instance 0x1bc2de0 
```

这是它在崩溃发生之前达到的方法：

```
-(void)setup{   
    _bannerFrame    = [self frameRectForBannerAd];
    _bannerWrapperFrame = [self frameRectForBannerWrapperFrame];

    UITextView *buyAppTextView  = [[UITextView alloc] initWithFrame:CGRectMake(8, 2, 304, 50)];
    [buyAppTextView setText:@"some text"];
    [buyAppTextView setTextColor:[UIColor blackColor]];
    [buyAppTextView setFont:[UIFont systemFontOfSize:10]];
    [buyAppTextView setAutoresizingMask:UIViewContentModeScaleAspectFit];
    [buyAppTextView setUserInteractionEnabled:NO];  

    _placeHolderBanner  = [[UIView alloc] initWithFrame:_bannerFrame];

    [_placeHolderBanner setBackgroundColor:[UIColor whiteColor]];
    [[_placeHolderBanner layer]  setBorderColor:[UIColor blackColor].CGColor];
    [[_placeHolderBanner layer] setBorderWidth:1.0];
    [_placeHolderBanner addSubview: buyAppTextView];

    [[self view] setFrame:_bannerWrapperFrame];
    [[self view] setBackgroundColor:[UIColor clearColor]];
    [[self view] addSubview: _placeHolderBanner];

    _iAdBanner  = [[ADBannerView alloc] initWithFrame:CGRectZero];

    [[self view] addSubview: _iAdBanner];
    _iAdBanner.delegate = self;
    _iAdBanner.hidden = YES;
} 
```

如果我注释掉与 buyAppTextView 相关的所有内容，则测试运行良好。（是的，测试平台与 UIKit 链接，以防您想知道）。

哦，测试类看起来像这样

```
#import "NorBannerAdViewTests.h"
#import "NORBannerAdViewController.h"

@implementation NorBannerAdViewTests

NORBannerAdViewController *_adViewController;

- (void)setUp{
    [super setUp];
    _adViewController = [[NORBannerAdViewController alloc] init];
}

- (void)tearDown{
    [super tearDown];
    [_adViewController release];
}

-(void) testThatFrameRectForBannerAdWrapperDoesNotReturnZero{
    CGRect receivedFrame = [_adViewController frameRectForBannerWrapperFrame];
    STAssertFalse((CGRectIsEmpty(receivedFrame)), @"receivedFrame should not be zero");
}

-(void) testThatFrameRectForBannerAdDoesNotReturnZero{
    CGRect receivedFrame = [_adViewController frameRectForBannerAd];    
    STAssertFalse((CGRectIsEmpty(receivedFrame)), @"receivedFrame should not be zero");
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T11:20:00.950

经过广泛的谷歌搜索，并通过一些相关的线程进行跟踪后，我（有点令人惊讶）设法解决了这个问题。问题源于创建项目时未设置测试目标。因为它基于 Cocos2D 模板之一，所以我必须自己添加它。这样做，我没有将测试目标的构建设置与应用程序联系起来。

我必须将以下两个标志添加到测试目标的构建设置中，测试现在运行良好：

```
Bundle Loader: $(BUILT_PRODUCTS_DIR)/AppName.app/AppName
Test Host: $(BUNDLE_LOADER) 
```

# .htaccess - .htaccess：拒绝访问操作系统

> ID：14143942
> 
> 赞同：1
> 
> 时间：2013-01-03T17:23:57.893
> 
> 标签：.htaccess, mod-rewrite

我需要帮助。我想拒绝操作系统通过 htcaccess 访问我的网站

我使用以下代码通过 Windows 获得它：

```
BrowserMatchNoCase Windows bad_os
Order Deny,Allow
Deny from env=bad_os 
```

但我想拒绝访问 Macintosh 和 Linux。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:38:37.370

这将阻止在 Macintosh 和 Linux 上运行的浏览器：

```
BrowserMatchNoCase Macintosh bad_os
BrowserMatchNoCase Linux bad_os
Order Deny, Allow
Deny from env=bad_os 
```

如果您想更具体地阻止您，请查看[http://www.useragentstring.com以获取其他示例](http://www.useragentstring.com)

请记住，用户修改他们的用户代理字符串以说出他们想要的任何内容是微不足道的，因此这在实际阻止 Mac 和 Linux 浏览器方面并不是那么有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:44:24.547

感谢您的回复，现在可以使用了！

我可以阻止 chrome 歌剧浏览器，但我不能用 firefox 和 dolphin 浏览器。

我使用此代码拒绝 Chrome 和 Opera：

> BrowserMatchNoCase Chrome CHROME Order Deny,Allow Deny from env=CHROME
> 
> BrowserMatchNoCase Opera bad_browser Order Deny,Allow Deny from env=bad_browser

再次感谢

# iphone - 如何列出其他玩家的活跃游戏中心比赛？

> ID：14143945
> 
> 赞同：2
> 
> 时间：2013-01-03T17:24:00.953
> 
> 标签：iphone, ios, game-center

我正在开发多人纸牌游戏。

使用此代码播放器正在添加新匹配：

```
-(void)addNewMatch {

    NSLog(@"addNewMatch");

    GKMatchRequest *request = [[GKMatchRequest alloc] init];

    request.maxPlayers = 2;
    request.minPlayers = 2;

    [GKTurnBasedMatch findMatchForRequest:request withCompletionHandler:^(GKTurnBasedMatch *match, NSError *error) {
        if (error) {
            NSLog(@"%@", error.localizedDescription );
        } else {
            NSLog(@"match found!");
            [self.vc dismissViewControllerAnimated:YES completion:nil];
            [[GCTurnBasedMatchHelper sharedInstance] turnBasedMatchmakerViewController:nil didFindMatch:match];

        }
    }];
} 
```

如何列出其他玩家的所有活动比赛（房间）？

# asp.net-mvc - LINQ 结果的属性为 NULL，但关系有效

> ID：14143950
> 
> 赞同：0
> 
> 时间：2013-01-03T17:24:17.877
> 
> 标签：asp.net-mvc, linq, entity-framework

我已经设置了 3 个模型，首先是代码，并且关系似乎正常，但是一个给我带来了问题。

我有文章、语言和版本课程

```
public class Article
{
    public int ID { get; set; }
    public string Name { get; set; }
    public string Icon { get; set; }
}

public class Language
{
    public int ID { get; set; }
    public string Name { get; set; }
    public string Code { get; set; }
}

public class Edition
{
    public int ID { get; set; }
    public Article Article  { get; set; }
    public Language Language { get; set; }

    public string Title { get; set; }        
    public string Details { get; set; }
} 
```

在我的引导程序/DBinitialiser 中，我可以创建对象并很好地填充它们。数据库已创建，Language 和 Article 的外键都出现在 Edition 表中并正确输入。

```
var engLang = new Language() {Code="en", Name="English Language"};
var altLang = new Language() {Code="xx", Name="Alternative Language"};
db.Languages.Add(engLang);
db.Languages.Add(altLang);
db.SaveChanges();

var testArt = new Article() { Name = "test" };
db.Articles.Add(testArt);
db.SaveChanges();

db.Editions.Add(new Edition(){Article = testArt, Language = engLang, Title="English Content"});
db.Editions.Add(new Edition(){Article = testArt, Language = altLang, Title="Alternative Content"});
db.SaveChanges(); 
```

我现在可以查询版本并返回它们的列表，但语言属性始终为 NULL。文章属性工作正常。

```
 var query = db.Editions.Where(r => r.Article.ID == Article.ID);

 foreach (Edition item in query)
 {
    // item.Language => NULL
    // item.Article => {Object Article}         
 } 
```

我是 .net 和 Entity-Framework 的新手，无法弄清楚为什么我总是会收到此错误。我什至可以通过 r => r.Language.ID == 1 进行查询，并且仍然在 Edition 对象上获得 NULL 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T19:33:21.370

确保您以正确的方式使用 EF codefirst。这里有一些歧义。您必须确定在您的 POCO 中实际应该存在哪些关系。更改类如下：

```
public class Article
{
    [Key]
    public int ID { get; set; }
    public string Name { get; set; }
    public string Icon { get; set; }
}

public class Language
{
    [Key]
    public int ID { get; set; }
    public string Name { get; set; }
    public string Code { get; set; }
}

public class Edition
{
    [Key]
    public int ID { get; set; }
    public virtual Article Article  { get; set; }
    public virtual Language Language { get; set; }

    public string Title { get; set; }        
    public string Details { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:52:54.780

感谢 AmirHossein Mehrvarzi 帮助我更清楚地编写模型，我相信这个错误是由于在遍历查询结果时延迟加载实体引起的。参考：[实体框架：已经有一个打开的 DataReader 与此 Command 关联](https://stackoverflow.com/questions/4867602/)。

在没有启用的情况下，`MultipleActiveResultSets`我只是在我的 linq 中添加了一个**Include**语句

```
var query = db.Editions.Where(r => r.Article.ID == Article.ID).Include(r => r.Language);

foreach (Edition item in query)
{
    // item.Language => {Object Language}
    // item.Article => {Object Article}         
} 
```

# wordpress - 如何在共享主机上扩展 Wordpress 以应对流量激增

> ID：14143952
> 
> 赞同：0
> 
> 时间：2013-01-03T17:24:22.490
> 
> 标签：wordpress, scale, shared-hosting

因此，就像任何其他独立开发者一样，我在 HostGator 共享计划上运行了一个小型个人 Wordpress 博客，以展示案例项目和笔记。

现在，假设您在 HackerNews 或 Digg 上随机挑选了一篇文章，您如何配置您的 Wordpress 或共享主机以在访问者和页面点击量突然激增的情况下幸存下来？

我已经研究了一些事情，例如：使该文章成为静态页面，打开缓存以便页面可以在不查询 MySQL 的情况下提供服务。很想听听你的经历。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:21:52.970

我将从[W3 Total Cache](http://wordpress.org/extend/plugins/w3-total-cache/)之类的缓存插件开始。它与您提到的第一种技术具有相同的效果，但它是自动执行的。

如果您希望每月多花几美分获得更好的性能，请尝试[Amazon Cloudfront](http://aws.amazon.com/cloudfront/)。这是一个多一点的设置，但好处是值得的。我将我的 DNS 设置为指向 Cloudfront，因此所有流量都会首先到达其边缘服务器。然后我将我的服务器设置为 origin.domain.com 并确保设置了缓存控制标头（例如 max-age=3600）。当访问者访问我的站点时，他们会访问离他们最近的 Cloudfront 边缘服务器（全球有 22 个位置），如果页面被缓存，我的服务器永远不会被访问。如果没有，则发出 1 个请求，并且在接下来的一小时内，所有请求都从边缘服务器上的缓存中提供服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-03T12:43:05.107

我还使用 HostGator 托管，并解决了我的许多网站的性能问题。

我的建议：

1.  查找其他共享主机。自去年 EIG 收购 HostGator 以来，他们的共享账户的业绩一落千丈。MySQL 性能很差，支持等待时间越来越长。

在 2013 年之前，我有高流量的 WP 博客，运行没有问题。然而，新的硬件和策略甚至将我的小型/简单的 WP 站点降低到了非常低的性能水平。

如果你留在HG...

1.  禁用 wp-cron：这是一个很好的帮助文档： https: [//support.hostgator.com/articles/specialized-help/technical/wordpress/how-to-replace-wordpress-cron-with-a-real-cron-job](https://support.hostgator.com/articles/specialized-help/technical/wordpress/how-to-replace-wordpress-cron-with-a-real-cron-job)
2.  安装和使用缓存插件，使用 mod_rewrite 缓存（不是 PHP 缓存）
3.  CDN 将帮助网站更快地加载，如果您将资产托管在不同的提供商上，它可以帮助减少服务器上的负载。

老实说，如果有可能获得大量流量，请升级到可扩展的 VPS，或者像 WPEngine 这样处理流量激增的网络主机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T19:50:02.127

正如已经提到的，缓存插件是必须的。CDN 还有助于媒体和静态文件，如 js 和 css，然后您的主题也是网站性能的关键因素。保持干净，尽量减少查询，并尽量避免框架及其引入的开销。

我不使用 CDN，但我有一个虚拟服务器，我使用 Nginx 监听端口 80。它还提供简单的东西，如图像、文本文件、样式表等。任何更困难的东西（wordpress 内容），它通过到监听不同端口的Apache。Apache 是一个很棒的网络服务器，但就资源而言，它是一头野兽。如果您在页面上有 20 个项目需要加载，并且您可以让 Nginx 之类的轻量级项目处理其中的 19 个，这将大有帮助。

这是我大约一年前写的一篇旧的优化文章 - 这也可能会有所帮助：http: [//trioniclabs.com/2011/12/my-take-on-wordpress-optimization/](http://trioniclabs.com/2011/12/my-take-on-wordpress-optimization/)

祝你好运。

# c# - 在关注点之间传递变量的正确方法

> ID：14143956
> 
> 赞同：3
> 
> 时间：2013-01-03T17:24:40.520
> 
> 标签：c#, asp.net-mvc, razor

我希望这是问这个问题的正确地方。如果没有，请告知合适的位置在哪里。

**意图**：用户将能够从下拉列表中选择年份和月份。提交表单后，将生成一个图表以根据选择显示信息。

**实现**：我的控制器`IEnumerable<SelectListItem>`为每个下拉列表创建并存储在模型中，该模型被传递给视图。视图内是对图表操作的调用。

**代码**：

控制器：

```
public ActionResult Validate(int month = 0, int year = 0)
    {
        //Check if input is valid
        if (month != 0 && year != 0)
        {
            ViewBag.Valid = 1;
        }
        else
        {
            ViewBag.Valid = 0;
        }
        ValidateVM model = new ValidateVM();

                    //Populate years
        model.year = Enumerable.Range(2008, DateTime.Now.Year - 2007).Reverse()
                        .Select(r => new SelectListItem
                        {
                            Value = r.ToString(),
                            Text = r.ToString()
                        });
                    //Populate months
        string[] months = { "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" };

        model.month = months
                        .Select((r, index) => new SelectListItem { Text = r, Value = (index + 1).ToString() });

        return View(model);
    } 
```

模型：

```
public class ValidateVM
{
    public int[] Mdays { get; set; }
    public IEnumerable<SelectListItem> month { get; set; }
    public IEnumerable<SelectListItem> year { get; set; }
} 
```

看法：

```
@using (Html.BeginForm("Mday", "Metrics", FormMethod.Get))
{
    @Html.DropDownListFor(model => model.month, Model.month)
    @Html.DropDownListFor(model => model.year, Model.year)

    <input type="submit" />
}
@if (ViewBag.Valid == 1)
{
    <img src="@Url.Action("ValidateChart", new { month = Request.QueryString["month"],
                                        year = Request.QueryString["year"]
  })" alt="Test"/>
} 
```

**问题**：提交表单后，一切正常。我已经看到模型将包含所选项目的变量的方法，例如`int chosenMonth`. 以任何一种方式做事都有好处吗？

可以像我那样使用 viewbag 吗？我用它来告诉视图输入是否有效，这决定了是否显示图表。我多次听说从不使用 viewbag。为什么是这样？模仿我描述的行为的最佳实践方式是什么？

在调用`ValidateChart`(in view) 函数时，我需要使用`querystring`来告诉操作生成图表的月份和年份。我也看到这被称为不好的做法，但还没有找到更好的方法来做到这一点。`querystring`在不通过范围的情况下访问变量的正确方法是什么`request`？

我已经设法让这段代码进入工作状态，但我真的很想学习如何以正确的方式去做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T17:55:06.123

首先，如果它有效，那么它肯定不是错误的方式。这可能不是最好的方法，但也没有错。

这是我要更改的一些内容，您可以决定是否要使用它们...

1）我不会使用`ViewBag`，只需向您的 ViewModel 添加一个附加属性`bool CanShowChart`，例如。然后你可以在你的视图逻辑中简单地测试它

`string SelectedMonth`2) 为和添加更多属性`string SelectedYear`，可以根据参数在控制器中分配这些属性。您无需担心它们在第一次加载时会出错，因为您只会在它们`CanShowChart`为真时使用它们。然后，您可以在 View 中检查这两个值，而不是使用该`Request.QueryString`方法

3) 我希望将可用月份和年份的列表传递到我的 ViewModel 中，并让 ViewModel 按需创建 SelectList。

为了清楚起见，我的 ViewModel 是这样的：

```
public class ValidateViewModel
{
    public int[] Mdays { get; set; }
    public IEnumerable<string> AvailableMonths { get; set; }
    public IEnumerable<string> AvailableYears { get; set; }
    public string SelectedMonth { get; set; }
    public string SelectedYear { get; set; }
    public bool CanShowChart { get; set; }

    public List<SelectListItem> GetMonthsSelectList()
    {
        List<SelectListItem> list = new List<SelectListItem>();

        foreach(var month in AvailableMonths)
        {
            bool selected = month == SelectedMonth;
            list.Add(new SelectListItem() { Text = month, Value = month, Selected = selected });
        }

        return list;
    }

    public List<SelectListItem> GetYearsSelectList()
    {
        List<SelectListItem> list = new List<SelectListItem>();

        foreach(var year in AvailableYears)
        {
            bool selected = month == SelectedYear;
            list.Add(new SelectListItem() { Text = year, Value = year, Selected = selected });
        }

        return list;
    }

} 
```

然后在你的视图中你可以像这样使用它们......

```
@using (Html.BeginForm("Mday", "Metrics", FormMethod.Get))
{
    @Html.DropDownListFor(x => x.SelectedMonth, Model.GetMonthsSelectList())
    @Html.DropDownListFor(x => x.SelectedYear, Model.GetYearsSelectList())

    <input type="submit" />
}
@if (Model.CanShowChart)
{
    <img src="@Url.Action("ValidateChart", new { month = Model.SelectedMonth, year = Model.SelectedYear })" alt="Test"/>
} 
```

然后你的控制器可以被削减到这个......

```
public ActionResult Validate(int month = 0, int year = 0)
{
    //Check if input is valid
    ValidateViewModel model = new ValidateViewModel();
    model.CanShowChart = month != 0 && year != 0;
    model.SelectedMonth = month.ToString();
    model.SelectedYear = year.ToString();

    //Populate years
    model.AvailableYears = Enumerable.Range(2008, DateTime.Now.Year - 2007).Reverse().Select(r => r.ToString());

    //Populate months
    model.AvailableMonths = { "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" };

    return View(model);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T17:43:50.157

查询字符串和 URL 更改在将变量从请求范围传递到服务器时非常有用。我不会认为它们是不好的做法。如果有人使用它，这是一个正在设计的系统要回答的问题。

IMO，像这样的变量`int ChosenMonth`在 VM 中很有用，因为它们有助于正确定义系统。当前的定义`ValidateVM`并不意味着能够选择月份和年份的功能，我认为这是与已定义系统相对的隐蔽逻辑。此外，在围绕选择功能编写测试时会更有帮助。一个人将能够测试选择功能，它的使用方式。

此外，值得看看是否需要将月份和年份放入 SelectedItem 中，例如

```
class SelectedItem { int year, int month } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T18:10:42.197

我只会评论代码的验证方面。整个验证方法真的很尴尬。该模型应使用`ModelState`. 正确的范例是在你的控制器中写这样的东西：

```
[HttpGet]
public ActionResult MyReport()
{
    ReportModel model = new ReportModel();
    // populate your model in order for all your inputs to show correctly (dropdowns data or whatever)
    return View("[pathToView]/ReportView.cshtml", model);
}

[HttpGet]
public ActionResult ShowMyReport(ReportModel model)
{
    if(ModelState.IsValid)
    {
        // inputs validated, show the report
        [get report data according to the input]
        return View(model);
    }
    // inputs didn't validate. Rerender view and show errors.
    return View("[pathToView]/ReportView.cshtml", model); // should be the same view
} 
```

现在，您可以通过 Data Annotations 或更好的方法 - 使用 FluentValidation 来验证您的[ReportModel](http://fluentvalidation.codeplex.com/)。所以不，您使用 ViewBag 的方式 - 指示模型在哪里有效或无效 - 根本不是最佳实践。

ModelState 是一个包含有关模型的所有错误的对象。您可以像这样手动向其中添加错误`ModelState.AddModelError("[propertyName]","Error Message")`，然后如果未验证模型，则所有错误消息都将显示在视图中，如果您有`@Html.ValidationSummary()`某个地方是视图或`@Html.ValidationMessageFor(model => model.PropertyName)`视图。谷歌周围的更多信息。有很多关于这个主题的信息。

最佳实践是让控制器中的操作尽可能薄，这与您所拥有的相去甚远。出于这个确切原因，不鼓励在控制器中向 ModelState 添加错误。同样，使用 FluentValidation，因为它 (1) 分离了验证的关注点，并且 (2) 比 Data Annotations 灵活得多。

# objective-c - 如何保存布尔值以隐藏或显示按钮？

> ID：14143964
> 
> 赞同：0
> 
> 时间：2013-01-03T17:25:01.863
> 
> 标签：objective-c, state, game-development

我的问题涉及一种简单的游戏关卡选择方法。例如：我有两个`ViewControllers`. 在一个上`ViewController`，我编写了一个游戏代码。如果我实现了游戏目标，我将显示一个隐藏按钮 ( `UIButton.hidden = NO`)，它将我`ViewController`与下一个级别的另一个链接。到现在为止还挺好。

但是我很想保存这个状态，所以当我再次关闭并打开应用程序时，这个隐藏的按钮应该仍然可用，因为我已经达到了这个级别的目标。

我尝试使用`NSUserDefaults`，但我不知道如何保存布尔值。如何保存`if/else`按钮触发的状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:40:07.453

不确定我是否遗漏了什么，但这听起来很简单：

```
[[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"buttonVisible"];
BOOL buttonVisible = [[NSUserDefaults standardUserDefaults] boolForKey:@"buttonVisible"]; 
```

关于下面的讨论。通知模式看起来像这样： 在实现必要目标的 viewController 中：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"nextLevelGoalAchieved" object:nil]; 
```

在需要让您了解更改的 viewController 中：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(makeLevelButtonVisible) name:@"nextLevelGoalAchieved" object:nil]; 
```

# java - 为游戏移动物体

> ID：14143965
> 
> 赞同：1
> 
> 时间：2013-01-03T17:25:03.997
> 
> 标签：java

Okey 我对编程比较陌生（只完成了一个学期的编程），我正在尝试创建我的 Space Invaders 游戏版本 (http://www.aeonity.com/ab/games/arcade-classics/space-入侵者.php)。我不想将它编程为小程序，我使用 java 中的 StdDraw 库来绘制所有内容。

现在我已经完成了所有的画，但是我的“宇宙飞船/敌人”的运动有问题我已经想出了如何移动一个敌人但不能让他们一次移动。

我认为我创建敌人的功能不是那么好，因为我必须自己编写每 48 个敌人的位置……我将让我的代码跟随，以便您看一看。提前致谢。

```
/** Draw Enemies*/
public class Enemy{
    //yr and xr positions for rectangle
    private double x1, y1, r1, w, h, xr, yr;
    private double x2, y2, r2, x3, y3, r3;
    public Enemy(double x, double y, double r, double width, double height, double xRec, double yRec,
    double xSec, double ySec, double rSec, double xThird, double yThird, double rThird)
    {x1 = x; y1 = y; r1 = r; w = width; h = height; xr = xRec; yr = yRec;
     x2 = xSec; y2 = ySec; r2 = rSec; x3 = xThird; y3 = yThird; r3 = rThird;}

public void DRAW_ENEMY(){
    StdDraw.setPenColor(StdDraw.PINK);
    StdDraw.filledCircle(x1, y1, r1);
    StdDraw.filledCircle(x2, y2, r2);
    StdDraw.filledCircle(x3, y3, r3);
    StdDraw.filledRectangle(xr, yr, w, h);
}
public void MOVE_ENEMY(Enemy e11, Enemy e12) {
    double vx = 0.005;

    while(true){
        if(e11.x2 > e12.x2 || e11.x1 < 0.004) {
            vx = -vx;
        }
        //Update position
        e11.x1 = e11.x1 + vx;
        e11.x2 = e11.x2 + vx;
        e11.x3 = e11.x3 + vx;
        e11.xr = e11.xr + vx;

        // clear the background
        StdDraw.setPenColor(StdDraw.BLACK);
        StdDraw.filledRectangle(0.5, 0.67, 0.6,0.18 );

        // draw ball on the screen
        StdDraw.setPenColor(StdDraw.PINK); 
        e11.DRAW_ENEMY();

        // display and pause for 20 ms
         StdDraw.show(80);
    }
}

//Test client
public static void main(String[] args){
    // create every object
    Enemy e11 = new  Enemy(0.10, 0.84, 0.01, 0.007, 0.022, 0.112, 0.82, 0.124, 0.84, 0.01, 0.112, 0.8, 0.009);
    e11.DRAW_ENEMY();
    Enemy e12 = new  Enemy(0.17, 0.84, 0.01, 0.007, 0.022, 0.182, 0.82, 0.194, 0.84, 0.01, 0.182, 0.8, 0.009);
    e12.DRAW_ENEMY();
    Enemy e13 = new  Enemy(0.24, 0.84, 0.01, 0.007, 0.022, 0.252, 0.82, 0.264, 0.84, 0.01, 0.252, 0.8, 0.009);
    e13.DRAW_ENEMY();
    Enemy e14 = new  Enemy(0.31, 0.84, 0.01, 0.007, 0.022, 0.322, 0.82, 0.334, 0.84, 0.01, 0.322, 0.8, 0.009);
    e14.DRAW_ENEMY();
    Enemy e15 = new  Enemy(0.38, 0.84, 0.01, 0.007, 0.022, 0.392, 0.82, 0.404, 0.84, 0.01, 0.392, 0.8, 0.009);
    e15.DRAW_ENEMY();
    Enemy e16 = new  Enemy(0.45, 0.84, 0.01, 0.007, 0.022, 0.462, 0.82, 0.474, 0.84, 0.01, 0.462, 0.8, 0.009);
    e16.DRAW_ENEMY();
    Enemy e17 = new  Enemy(0.52, 0.84, 0.01, 0.007, 0.022, 0.532, 0.82, 0.544, 0.84, 0.01, 0.532, 0.8, 0.009);
    e17.DRAW_ENEMY();
    Enemy e18 = new  Enemy(0.59, 0.84, 0.01, 0.007, 0.022, 0.602, 0.82, 0.614, 0.84, 0.01, 0.602, 0.8, 0.009);
    e18.DRAW_ENEMY();
    Enemy e19 = new  Enemy(0.66, 0.84, 0.01, 0.007, 0.022, 0.672, 0.82, 0.684, 0.84, 0.01, 0.672, 0.8, 0.009);
    e19.DRAW_ENEMY();
    Enemy e110 = new Enemy(0.73, 0.84, 0.01, 0.007, 0.022, 0.742, 0.82, 0.754, 0.84, 0.01, 0.742, 0.8, 0.009);
    e110.DRAW_ENEMY();
    Enemy e111 = new Enemy(0.80, 0.84, 0.01, 0.007, 0.022, 0.812, 0.82, 0.824, 0.84, 0.01, 0.812, 0.8, 0.009);
    e111.DRAW_ENEMY();
    Enemy e112 = new Enemy(0.87, 0.84, 0.01, 0.007, 0.022, 0.882, 0.82, 0.894, 0.84, 0.01, 0.882, 0.8, 0.009);
    e112.DRAW_ENEMY();

    Enemy e21 = new  Enemy(0.10, 0.74, 0.01, 0.007, 0.022, 0.112, 0.72, 0.124, 0.74, 0.01, 0.112, 0.7, 0.009);
    e21.DRAW_ENEMY();
    Enemy e22 = new  Enemy(0.17, 0.74, 0.01, 0.007, 0.022, 0.182, 0.72, 0.194, 0.74, 0.01, 0.182, 0.7, 0.009);
    e22.DRAW_ENEMY();
    Enemy e23 = new  Enemy(0.24, 0.74, 0.01, 0.007, 0.022, 0.252, 0.72, 0.264, 0.74, 0.01, 0.252, 0.7, 0.009);
    e23.DRAW_ENEMY();
    Enemy e24 = new  Enemy(0.31, 0.74, 0.01, 0.007, 0.022, 0.322, 0.72, 0.334, 0.74, 0.01, 0.322, 0.7, 0.009);
    e24.DRAW_ENEMY();
    Enemy e25 = new  Enemy(0.38, 0.74, 0.01, 0.007, 0.022, 0.392, 0.72, 0.404, 0.74, 0.01, 0.392, 0.7, 0.009);
    e25.DRAW_ENEMY();
    Enemy e26 = new  Enemy(0.45, 0.74, 0.01, 0.007, 0.022, 0.462, 0.72, 0.474, 0.74, 0.01, 0.462, 0.7, 0.009);
    e26.DRAW_ENEMY();
    Enemy e27 = new  Enemy(0.52, 0.74, 0.01, 0.007, 0.022, 0.532, 0.72, 0.544, 0.74, 0.01, 0.532, 0.7, 0.009);
    e27.DRAW_ENEMY();
    Enemy e28 = new  Enemy(0.59, 0.74, 0.01, 0.007, 0.022, 0.602, 0.72, 0.614, 0.74, 0.01, 0.602, 0.7, 0.009);
    e28.DRAW_ENEMY();
    Enemy e29 = new  Enemy(0.66, 0.74, 0.01, 0.007, 0.022, 0.672, 0.72, 0.684, 0.74, 0.01, 0.672, 0.7, 0.009);
    e29.DRAW_ENEMY();
    Enemy e210 = new Enemy(0.73, 0.74, 0.01, 0.007, 0.022, 0.742, 0.72, 0.754, 0.74, 0.01, 0.742, 0.7, 0.009);
    e210.DRAW_ENEMY();
    Enemy e211 = new Enemy(0.80, 0.74, 0.01, 0.007, 0.022, 0.812, 0.72, 0.824, 0.74, 0.01, 0.812, 0.7, 0.009);
    e211.DRAW_ENEMY();
    Enemy e212 = new Enemy(0.87, 0.74, 0.01, 0.007, 0.022, 0.882, 0.72, 0.894, 0.74, 0.01, 0.882, 0.7, 0.009);
    e212.DRAW_ENEMY();

    Enemy e31 = new  Enemy(0.10, 0.64, 0.01, 0.007, 0.022, 0.112, 0.62, 0.124, 0.64, 0.01, 0.112, 0.6, 0.009);
    e31.DRAW_ENEMY();
    Enemy e32 = new  Enemy(0.17, 0.64, 0.01, 0.007, 0.022, 0.182, 0.62, 0.194, 0.64, 0.01, 0.182, 0.6, 0.009);
    e32.DRAW_ENEMY();
    Enemy e33 = new  Enemy(0.24, 0.64, 0.01, 0.007, 0.022, 0.252, 0.62, 0.264, 0.64, 0.01, 0.252, 0.6, 0.009);
    e33.DRAW_ENEMY();
    Enemy e34 = new  Enemy(0.31, 0.64, 0.01, 0.007, 0.022, 0.322, 0.62, 0.334, 0.64, 0.01, 0.322, 0.6, 0.009);
    e34.DRAW_ENEMY();
    Enemy e35 = new  Enemy(0.38, 0.64, 0.01, 0.007, 0.022, 0.392, 0.62, 0.404, 0.64, 0.01, 0.392, 0.6, 0.009);
    e35.DRAW_ENEMY();
    Enemy e36 = new  Enemy(0.45, 0.64, 0.01, 0.007, 0.022, 0.462, 0.62, 0.474, 0.64, 0.01, 0.462, 0.6, 0.009);
    e36.DRAW_ENEMY();
    Enemy e37 = new  Enemy(0.52, 0.64, 0.01, 0.007, 0.022, 0.532, 0.62, 0.544, 0.64, 0.01, 0.532, 0.6, 0.009);
    e37.DRAW_ENEMY();
    Enemy e38 = new  Enemy(0.59, 0.64, 0.01, 0.007, 0.022, 0.602, 0.62, 0.614, 0.64, 0.01, 0.602, 0.6, 0.009);
    e38.DRAW_ENEMY();
    Enemy e39 = new  Enemy(0.66, 0.64, 0.01, 0.007, 0.022, 0.672, 0.62, 0.684, 0.64, 0.01, 0.672, 0.6, 0.009);
    e39.DRAW_ENEMY();
    Enemy e310 = new Enemy(0.73, 0.64, 0.01, 0.007, 0.022, 0.742, 0.62, 0.754, 0.64, 0.01, 0.742, 0.6, 0.009);
    e310.DRAW_ENEMY();
    Enemy e311 = new Enemy(0.80, 0.64, 0.01, 0.007, 0.022, 0.812, 0.62, 0.824, 0.64, 0.01, 0.812, 0.6, 0.009);
    e311.DRAW_ENEMY();
    Enemy e312 = new Enemy(0.87, 0.64, 0.01, 0.007, 0.022, 0.882, 0.62, 0.894, 0.64, 0.01, 0.882, 0.6, 0.009);
    e312.DRAW_ENEMY();

    Enemy e41 = new  Enemy(0.10, 0.54, 0.01, 0.007, 0.022, 0.112, 0.52, 0.124, 0.54, 0.01, 0.112, 0.5, 0.009);
    e41.DRAW_ENEMY();
    Enemy e42 = new  Enemy(0.17, 0.54, 0.01, 0.007, 0.022, 0.182, 0.52, 0.194, 0.54, 0.01, 0.182, 0.5, 0.009);
    e42.DRAW_ENEMY();
    Enemy e43 = new  Enemy(0.24, 0.54, 0.01, 0.007, 0.022, 0.252, 0.52, 0.264, 0.54, 0.01, 0.252, 0.5, 0.009);
    e43.DRAW_ENEMY();
    Enemy e44 = new  Enemy(0.31, 0.54, 0.01, 0.007, 0.022, 0.322, 0.52, 0.334, 0.54, 0.01, 0.322, 0.5, 0.009);
    e44.DRAW_ENEMY();
    Enemy e45 = new  Enemy(0.38, 0.54, 0.01, 0.007, 0.022, 0.392, 0.52, 0.404, 0.54, 0.01, 0.392, 0.5, 0.009);
    e45.DRAW_ENEMY();
    Enemy e46 = new  Enemy(0.45, 0.54, 0.01, 0.007, 0.022, 0.462, 0.52, 0.474, 0.54, 0.01, 0.462, 0.5, 0.009);
    e46.DRAW_ENEMY();
    Enemy e47 = new  Enemy(0.52, 0.54, 0.01, 0.007, 0.022, 0.532, 0.52, 0.544, 0.54, 0.01, 0.532, 0.5, 0.009);
    e47.DRAW_ENEMY();
    Enemy e48 = new  Enemy(0.59, 0.54, 0.01, 0.007, 0.022, 0.602, 0.52, 0.614, 0.54, 0.01, 0.602, 0.5, 0.009);
    e48.DRAW_ENEMY();
    Enemy e49 = new  Enemy(0.66, 0.54, 0.01, 0.007, 0.022, 0.672, 0.52, 0.684, 0.54, 0.01, 0.672, 0.5, 0.009);
    e49.DRAW_ENEMY();
    Enemy e410 = new Enemy(0.73, 0.54, 0.01, 0.007, 0.022, 0.742, 0.52, 0.754, 0.54, 0.01, 0.742, 0.5, 0.009);
    e410.DRAW_ENEMY();
    Enemy e411 = new Enemy(0.80, 0.54, 0.01, 0.007, 0.022, 0.812, 0.52, 0.824, 0.54, 0.01, 0.812, 0.5, 0.009);
    e411.DRAW_ENEMY();
    Enemy e412 = new Enemy(0.87, 0.54, 0.01, 0.007, 0.022, 0.882, 0.52, 0.894, 0.54, 0.01, 0.882, 0.5, 0.009);
    e412.DRAW_ENEMY();
    e11.MOVE_ENEMY(e11,e12);

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:33:17.023

首先让我们更好地实例化它们。

```
List<Enemy> enemies = new ArrayList<Enemy>();

for(int y = 0; y < 4; y++) {
  for(int x = 0; x < 12; x++) {
    Enemy enemy = new Enemy(x,y); //all other variables can be coded in constructor
    enemies.add(enemy);
  }
} 
```

现在因为它们都在列表中，让我们更新它们

```
for(Enemy e : enemies) {
  e.update(); //move a single enemy in the usual pattern ignoring his buddies
} 
```

然后画

```
for(Enemy e : enemies) {
  e.draw();
} 
```

# c++ - 没有类类型 C++

> ID：14143967
> 
> 赞同：17
> 
> 时间：2013-01-03T17:25:10.263
> 
> 标签：c++

这是我的课程中的一门课！当我尝试编译整个程序时，我收到如下错误消息：

> main.cpp:174: 错误: '((Scene*)this)->Scene::lake' 没有类类型

来源

```
class Scene
{
    int L,Dist;
    Background back ;
    Lake lake(int L);
    IceSkater iceskater(int Dist);
public :
    Scene(int L, int Dist)
    {
        cout<<"Scene was just created"<<endl;
    }

    ~Scene()
    {
        cout<<"Scene is about to be destroyed !"<<endl;
    }
}; 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-03T17:28:12.657

您的问题在以下行中：

```
Lake lake(int L); 
```

如果您只是想声明一个`Lake`对象，那么您可能想要删除`(int L)`. 您所拥有的是声明一个`lake`返回 a`Lake`并接受 a`int`作为参数的函数。

如果您在构造`lake`对象时尝试传入 L ，那么我认为您希望您的代码如下所示：

```
class Scene
{
    int L,Dist;
    Background back ;
    Lake lake;
    IceSkater iceskater;
public :
    Scene(int L, int Dist) :
        L(L),     
        Dist(Dist),
        lake(L),
        iceskater(Dist)
    {
        cout<<"Scene was just created"<<endl;
    }
..... 
```

请注意添加到您的构造函数的 4 行。这称为成员初始化，以及构造成员变量的方式。[在此常见问题解答](http://www.parashift.com/c++-faq/init-lists.html)中了解更多信息。或者我在[这里](https://stackoverflow.com/a/7666867/507606)和[这里](https://stackoverflow.com/questions/12170160/c-initialization-of-member-variables)发现的其他一些花絮。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T17:28:11.157

您声明`lake`为一个方法，该方法接受一个参数并返回一个`Lake`. 然后，您尝试通过`lake.light_up()`. 这会导致您观察到的错误。

要解决这个问题，你要么需要声明`lake`为一个变量，例如`Lake lake;`，要么你需要停止尝试调用它的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T17:29:11.277

您已声明（但从未定义）`lake`为 Scene 的成员函数：

```
class Scene
{
    // ...
    Lake lake(int L); 
```

但是然后在 中`plot`，您尝试将`lake`其用作变量：

```
int plot()
{
    lake.light_up(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-29T05:02:15.607

`Lake lake(int L);`用或替换该行`Lake lake= Lake(L);` ：`Lake lake{L};`

# java - 如何使用Android获取xml中的根元素？

> ID：14143969
> 
> 赞同：1
> 
> 时间：2013-01-03T17:25:14.340
> 
> 标签：java, android, xml, soap

仅使用 Java 代码，我可以通过这些行获取根名称。

```
Element root = document.getDocumentElement(); 
```

并得到名字`root.getNodeName()`

但是在 Android 环境中，我怎样才能获得例如名称“aluno”作为根名称？

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" 
   xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<soap:Body>
<ns1:autenticaAlunoResponse xmlns:ns1="http://xfire.codehaus.org/AlunoService">
<aluno xmlns="urn:bean.wsi.br">
<matricula xmlns="http://bean.wsi.br">61203475</matricula>
<turma xmlns="http://bean.wsi.br"><codigo>2547</codigo>
<nome>B</nome>
</turma>
</aluno>
</ns1:autenticaAlunoResponse>
</soap:Body>
</soap:Envelope> 
```

**更新**（从下面的评论中复制）：

我正在使用 Ksoap2 并尝试使用 SAX 进行解析。

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance(); 
DocumentBuilder db; 
db = dbf.newDocumentBuilder(); 
InputSource is = new InputSource(); 
is.setCharacterStream(new StringReader(xml)); 
Document doc = db.parse(is); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:52:30.550

在您的示例中，“aluno”显示为标签名称。如果您使用 Jsoup，您可以按标签查找元素，然后使用 tagName 方法检索其名称：

```
Document doc;
Elements tagName;
String name;

try {
    doc = Jsoup.connect(url).userAgent("Mozilla").get();
} catch (IOException ioe) {
ioe.printStackTrace();
}

doc.select("aluno");
name = tagName.tagName(); 
```

# java - 使用java读取文本文件中确定数量的行

> ID：14143970
> 
> 赞同：1
> 
> 时间：2013-01-03T17:25:16.507
> 
> 标签：java, file, line, readfile, datainputstream

我有一个包含数据的文本文件。该文件包含所有月份的信息。假设一月份的信息占据了 50 行。比二月开始，它占用了 40 多行。比我三月等...是否可以只读取文件的一部分？我可以说“从 X 行读到 Y 行”吗？还是有更好的方法来做到这一点？我只想打印一个月而不是所有文件的数据。这是我的代码

```
public static void readFile()
{
  try
  {
     DataInputStream inputStream = 
     new DataInputStream(new FileInputStream("SpreadsheetDatabase2013.txt"));

   while(inputStream.available() != 0)
   {
     System.out.println("AVAILABLE: " + inputStream.available());
     System.out.println(inputStream.readUTF());
     System.out.println(inputStream.readInt());
     for (int i = 0; i < 40; i++)
     {
       System.out.println(inputStream.readUTF());
       System.out.println(inputStream.readUTF());
       System.out.println(inputStream.readUTF());
       System.out.println(inputStream.readUTF());
       System.out.println(inputStream.readUTF());
       System.out.println(inputStream.readDouble());
       System.out.println(inputStream.readUTF());
       System.out.println(inputStream.readBoolean());
       System.out.println();
     }
   }// end while
   inputStream.close();
 }// end try
 catch (Exception e)
 {
   System.out.println("An error has occurred.");
 }//end catch
}//end method 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:48:47.873

根据你说你的数据是如何组织的，我建议你做这样的事情

```
ArrayList<String> temp = new ArrayList<String>();
int read = 0;
File file = new File(filePath);
if (file.exists()) {
    BufferedReader brin;
    brin = new BufferedReader(new FileReader(filePath));
    String line = brin.readLine();
    while (line != null) {
        if (!line.equals("")){
            if(line.equals("March"))
                read = 1;
            else if(line.equals("April"))
                break;
            else if(read == 1)
                temp.add(line);
        }
        line = brin.readLine();
    }
    brin.close(); 
```

自己试了一下，3月到4月的数据都录进去了。您可以根据需要调整它们或使它们成为变量。感谢 ngoa 的基础代码。信用到期的信用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:51:09.550

我会使用[扫描仪类](http://docs.oracle.com/javase/tutorial/essential/io/scanning.html)。

`Scanner scanner = new Scanner(filename);`

用于`scanner.nextLine()`获取文件的每一行。如果您只想从第 x 行到第 y 行，您可以使用 for 循环扫描您不需要的每一行，然后再通过扫描仪查找您需要的行。小心不要在不抛出异常的情况下遇到异常。

或者，您可以通过扫描仪并将每一行的字符串内容添加到 ArrayList。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T17:48:26.850

如果你有 Java 7，你可以使用[Files.readAllLines(Path path, Charset cs)](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#readAllLines%28java.nio.file.Path,%20java.nio.charset.Charset%29)，例如

```
Path path = // Path to "SpreadsheetDatabase2013.txt"
Charset charset = // "UTF-8" or whatever charset is used
List<String> allLines = Files.readAllLines(path, charset);
List<String> relevantLines = allLines.subList(x, y); 
```

其中`x`(inclusive) 和`y`(exclusive) 表示感兴趣的行号，请参见 [List.subList(int fromIndex, int toIndex)](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#subList%28int,%20int%29)。

如 JavaDoc 中所述，此解决方案的一个好处是`readAllLines()`：

> 此方法确保在读取所有字节或引发 I/O 错误或其他运行时异常时关闭文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T17:35:53.840

我的方法是读取文本文件的全部内容并将其存储在 ArrayList 中，并仅读取请求月份的行。

**例子：**

使用此函数从文件中读取所有行。

```
/**
 * Read from a file specified by the filePath.
 * 
 * @param filePath
 *            The path of the file.
 * @return List of lines in the file.
 * @throws IOException
 */

public static ArrayList<String> readFromFile(String filePath)
        throws IOException {
    ArrayList<String> temp = new ArrayList<String>();
    File file = new File(filePath);
    if (file.exists()) {
        BufferedReader brin;
        brin = new BufferedReader(new FileReader(filePath));
        String line = brin.readLine();
        while (line != null) {
            if (!line.equals(""))
                temp.add(line);
            line = brin.readLine();
        }
        brin.close();
    }
    return temp;
} 
```

然后从 ArrayList ***temp***中只读取您需要的那些。

**例子：**

如果您想读取 2 月份的数据，假设它有 50 行数据并从第 40 行开始。

```
for(int i=40;i<90;i++)
{
    System.out.println(temp.get(i));
} 
```

***注意：这只是执行此操作的一种方式。我不确定是否还有其他方法！***

# java - 在休眠中对多个映射使用同一列

> ID：14143971
> 
> 赞同：1
> 
> 时间：2013-01-03T17:25:16.923
> 
> 标签：java, hibernate, orm

我已经进行了自己的测试，不相信这是可能的，但希望得到一些确认。

我有两个对象正在使用休眠`Child`和`Parent`. A`Child`总是有一个对单个的引用`Parent`，并且`Parent`有一组`Child`对象。最重要的是，父母有一个收藏夹列表，其中包含子对象。

这是使用以下 HBM 定义映射的：

```
<class name="Parent" table="parent">
    <id name="id" column="id">
        <generator class="increment"/>
    </id>

  <set cascade="all,delete-orphan" inverse="true" name="children">
    <cache usage="nonstrict-read-write"/>
    <key column="parent_id"/>
    <one-to-many class="Child"/>
  </set>

  <list cascade="none" name="favorites">
    <cache usage="nonstrict-read-write"/>
    <key>
      <column name="parent_id" not-null="false"/>
    </key>
    <index>
      <column name="fav_index"/>
    </index>
    <one-to-many class="Child"/>
  </list>
</class>

<class name="Child" table="child">
    <id name="id" column="id">
        <generator class="increment"/>
    </id>
  <many-to-one column="parent_id" name="parent" not-null="false"/>

</class> 
```

我遇到的麻烦是表`parent_id`中的列`child`。当我坚持具有对父对象的引用的子对象以及当我坚持具有收藏夹列表的父对象时，它工作正常。但是，当我尝试从收藏夹的父母列表中删除一个孩子时，该列`child.parent_id`被设置为空，即使我没有在它被持久化之前从孩子中删除父对象。

根据我的测试，除了在 Parent 映射中为收藏夹键列使用不同的列名之外，我认为没有其他方法。这样做似乎有点可惜，因为这两列总是具有相同的值。

如果这是可能的，有没有人需要使用两列？

谢谢

# ios - 在 iPad 上使用 UIActionSheet 时暗淡并锁定背景

> ID：14143973
> 
> 赞同：0
> 
> 时间：2013-01-03T17:25:33.753
> 
> 标签：ios, ipad, uiview, uiactionsheet

我已经研究了这个问题几个小时，对我来说听起来很简单，但还没有找到可行的解决方案。我有一个 iPad 应用程序，我在其中使用 UIActionSheet 来确认删除。我正在添加一个标签来增加字体大小。一切看起来和工作都很棒。我还需要在操作表可见时调暗和锁定背景。我可以调暗但看不到如何锁定背景，以便用户必须在操作表上进行选择才能将其关闭。我尝试设置 UserInteractionEnabled 但它不起作用。有任何想法吗？

```
// dim the background
UIView *dimViewDelete = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 1024, 768)];
dimViewDelete.backgroundColor = [UIColor blackColor];
dimViewDelete.alpha = 0.3f;
dimViewDelete.tag = 2222;
[self.view addSubview:dimViewDelete];

if ([self.listArray count] > 0)
{
    // create Action Sheet
    UIActionSheet * action = [[UIActionSheet alloc]
                              initWithTitle:@" "
                              delegate:self
                              cancelButtonTitle:@"Cancel"
                              destructiveButtonTitle:@"Delete"
                              otherButtonTitles:nil];
    [action addButtonWithTitle:@"Cancel"];
    [action setActionSheetStyle:UIActionSheetStyleBlackTranslucent];
    [action showInView:self.view];

    // change the font size of the title
    CGRect oldFrame = [(UILabel*)[[action subviews] objectAtIndex:0] frame];
    UILabel *addTitle = [[UILabel alloc] initWithFrame:oldFrame];
    addTitle.font = [UIFont boldSystemFontOfSize:22];
    addTitle.textAlignment = UITextAlignmentCenter;
    addTitle.backgroundColor = [UIColor clearColor];
    addTitle.textColor = [UIColor whiteColor];
    addTitle.text = @"Are You Sure?";
    [addTitle sizeToFit];
    addTitle.frame = CGRectMake(oldFrame.origin.x, oldFrame.origin.y,
                                oldFrame.size.width, addTitle.frame.size.height);

    [action addSubview:addTitle];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:48:15.063

您最好的选择是实现您自己的自定义操作表类控件。

您需要一个具有两个按钮和一个标签（用于标题）的简单视图控制器。在弹出窗口中显示视图控制器。使视图控制器模态化，因此只能通过点击其中一个按钮将其关闭。这也使背景看起来是锁定的。

如果你真的需要调暗背景，就在显示弹出框之前`UIView`，在主窗口中添加一个屏幕大小。将此视图的背景设置为`[UIColor whiteColor:0 alpha:0.7]`. 根据需要调整 alpha 以获得正确的调光效果。您甚至可以为视图的 alpha 设置动画，使其根据需要淡入淡出。

# objective-c - 你如何验证代码中二进制的签名证书？

> ID：14143976
> 
> 赞同：1
> 
> 时间：2013-01-03T17:25:39.437
> 
> 标签：objective-c, ios, security

我正在尝试找到一种方法来验证代码中二进制文件的签名证书。例如，如果您运行命令：“codesign -vvvvd /YourApp/Executable”，您可能会收到输出：“Authority: Apple Root CA”等。我正在寻找一种在代码中执行此操作的方法。任何朝着正确方向的推动或推动都会非常出色。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T18:36:18.910

在 Mac 上，`SecStaticCode`并`SecCode`提供代码签名和验证功能。具体来说，`SecCodeCopySelf()`将`SecCodeCheckValidityWithErrors()`用于检查当前应用程序的代码签名。

请注意，已修改和退出（使用相同证书或任何其他证书）的应用程序实际上是无法检测到的，因为任何能够修改和退出应用程序的人都可以存根或以其他方式破坏您的验证码。上面提到的功能充其量是一个保持诚实的人诚实的解决方案。

在 iOS 上，Apple 的官方立场是您不应该尝试进行越狱检测或类似的操作，并且应该相信操作系统会正确处理。由于您无法运行动态加载的代码或读取其他应用程序的二进制数据，因此能够在该平台上验证代码签名并不是很有用。（Apple 的官方立场对你是否有用完全是另一回事。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T18:36:09.953

这对于使用[Code Signing Services](http://developer.apple.com/library/mac/#documentation/Security/Reference/CodeSigningRef/Reference/reference.html)或[Ole Begemann's code](http://oleb.net/blog/2012/02/checking-code-signing-and-sandboxing-status-in-code/)的 OS X 应用程序是可能的，但对于 iOS 似乎是不可能的。

# python - 传递标头/库后未构建 Python 2.7.3 _sqlite3 模块

> ID：14143977
> 
> 赞同：3
> 
> 时间：2013-01-03T17:25:45.780
> 
> 标签：python, sqlite

我们有一个需要启动的 Django 项目，并且无法为持久存储构建 sqlite。

sqlite3-dev headers/libs默认**没有**安装在系统中
我没有这个盒子的root权限（我们应该安装我们需要的所有东西）
我在/opt/python/current2中编译/安装了Python-2.7.3
我下载了并在 /home/olib/sqlite-autoconf-307150 中编译了 sqlite3 源
我下载了 pysqlite-2.6.3
我修改了 pysqlite-2.6.3/setup.py 以指向我的 sqlite3 源头文件和库文件

```
include_dirs = ['/home/olib/sqlite-autoconf-3071501']  
library_dirs = ['/home/olib/sqlite-autoconf-3071501/.libs']

/home/olib/pysqlite-2.6.3> echo $PYTHON_HOME  
/opt/python/current2

/home/olib/pysqlite-2.6.3> python setup.py install  
running install  
running build  
running build_py  
creating build  
creating build/lib.linux-x86_64-2.7  
creating build/lib.linux-x86_64-2.7/pysqlite2  
copying lib/dbapi2.py -> build/lib.linux-x86_64-2.7/pysqlite2  
copying lib/dump.py -> build/lib.linux-x86_64-2.7/pysqlite2  
copying lib/__init__.py -> build/lib.linux-x86_64-2.7/pysqlite2  
creating build/lib.linux-x86_64-2.7/pysqlite2/test  
copying lib/test/dbapi.py -> build/lib.linux-x86_64-2.7/pysqlite2/test  
copying lib/test/userfunctions.py -> build/lib.linux-x86_64-2.7/pysqlite2/test  
copying lib/test/types.py -> build/lib.linux-x86_64-2.7/pysqlite2/test  
copying lib/test/dump.py -> build/lib.linux-x86_64-2.7/pysqlite2/test  
copying lib/test/regression.py -> build/lib.linux-x86_64-2.7/pysqlite2/test  
copying lib/test/hooks.py -> build/lib.linux-x86_64-2.7/pysqlite2/test  
copying lib/test/factory.py -> build/lib.linux-x86_64-2.7/pysqlite2/test  
copying lib/test/transactions.py -> build/lib.linux-x86_64-2.7/pysqlite2/test  
copying lib/test/__init__.py -> build/lib.linux-x86_64-2.7/pysqlite2/test  
creating build/lib.linux-x86_64-2.7/pysqlite2/test/py25  
copying lib/test/py25/py25tests.py -> build/lib.linux-x86_64-2.7/pysqlite2/test/py25  
copying lib/test/py25/__init__.py -> build/lib.linux-x86_64-2.7/pysqlite2/test/py25  
running build_ext  
building 'pysqlite2._sqlite' extension  
creating build/temp.linux-x86_64-2.7  
creating build/temp.linux-x86_64-2.7/src  
gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DMODULE_NAME="pysqlite2.dbapi2" -DSQLITE_OMIT_LOAD_EXTENSION=1 -I/home/olib/sqlite-autoconf-3071501 -I/opt/python/current2/include/python2.7 -c src/module.c -o build/temp.linux-x86_64-2.7/src/module.o  
gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DMODULE_NAME="pysqlite2.dbapi2" -DSQLITE_OMIT_LOAD_EXTENSION=1 -I/home/olib/sqlite-autoconf-3071501 -I/opt/python/current2/include/python2.7 -c src/connection.c -o build/temp.linux-x86_64-2.7/src/connection.o  
gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DMODULE_NAME="pysqlite2.dbapi2" -DSQLITE_OMIT_LOAD_EXTENSION=1 -I/home/olib/sqlite-autoconf-3071501 -I/opt/python/current2/include/python2.7 -c src/cursor.c -o build/temp.linux-x86_64-2.7/src/cursor.o  
gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DMODULE_NAME="pysqlite2.dbapi2" -DSQLITE_OMIT_LOAD_EXTENSION=1 -I/home/olib/sqlite-autoconf-3071501 -I/opt/python/current2/include/python2.7 -c src/cache.c -o build/temp.linux-x86_64-2.7/src/cache.o  
gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DMODULE_NAME="pysqlite2.dbapi2" -DSQLITE_OMIT_LOAD_EXTENSION=1 -I/home/olib/sqlite-autoconf-3071501 -I/opt/python/current2/include/python2.7 -c src/microprotocols.c -o build/temp.linux-x86_64-2.7/src/microprotocols.o  
gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DMODULE_NAME="pysqlite2.dbapi2" -DSQLITE_OMIT_LOAD_EXTENSION=1 -I/home/olib/sqlite-autoconf-3071501 -I/opt/python/current2/include/python2.7 -c src/prepare_protocol.c -o build/temp.linux-x86_64-2.7/src/prepare_protocol.o  
gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DMODULE_NAME="pysqlite2.dbapi2" -DSQLITE_OMIT_LOAD_EXTENSION=1 -I/home/olib/sqlite-autoconf-3071501 -I/opt/python/current2/include/python2.7 -c src/statement.c -o build/temp.linux-x86_64-2.7/src/statement.o  
gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DMODULE_NAME="pysqlite2.dbapi2" -DSQLITE_OMIT_LOAD_EXTENSION=1 -I/home/olib/sqlite-autoconf-3071501 -I/opt/python/current2/include/python2.7 -c src/util.c -o build/temp.linux-x86_64-2.7/src/util.o  
gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DMODULE_NAME="pysqlite2.dbapi2" -DSQLITE_OMIT_LOAD_EXTENSION=1 -I/home/olib/sqlite-autoconf-3071501 -I/opt/python/current2/include/python2.7 -c src/row.c -o build/temp.linux-x86_64-2.7/src/row.o

gcc -pthread -shared build/temp.linux-x86_64-2.7/src/module.o build/temp.linux-x86_64-2.7/src/connection.o build/temp.linux-x86_64-2.7/src/cursor.o build/temp.linux-x86_64-2.7/src/cache.o build/temp.linux-x86_64-2.7/src/microprotocols.o build/temp.linux-x86_64-2.7/src/prepare_protocol.o build/temp.linux-x86_64-2.7/src/statement.o build/temp.linux-x86_64-2.7/src/util.o build/temp.linux-x86_64-2.7/src/row.o -L/home/olib/sqlite-autoconf-3071501/.libs -lsqlite3 -o build/lib.linux-x86_64-2.7/pysqlite2/**_sqlite.so**  
running install_lib  
copying build/lib.linux-x86_64-2.7/pysqlite2/_sqlite.so -> /opt/python/current2/lib/python2.7/site-packages/pysqlite2  
running install_data  
running install_egg_info  
Removing /opt/python/current2/lib/python2.7/site-packages/pysqlite-2.6.3-py2.7.egg-info  
Writing /opt/python/current2/lib/python2.7/site-packages/pysqlite-2.6.3-py2.7.egg-info 
```

由于某种原因，“ **_sqlite.so** ”被构建，但“ **_sqlite3.so** ”没有被构建，这当然会导致 Django 导入失败

```
File "/opt/python/current2/lib/python2.7/site-packages/django/db/backends/sqlite3/base.py", line 31, in <module>
raise ImproperlyConfigured("Error loading either pysqlite2 or sqlite3 modules (tried in that order): %s" % exc)
django.core.exceptions.ImproperlyConfigured: Error loading either pysqlite2 or sqlite3 modules (tried in that order): No module named _sqlite3 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T19:38:04.393

重建Python

```
./configure --prefix=/opt/python/ LDFLAGS='-L/home/olib/sqlite-autoconf-3071501/.libs'     CPPFLAGS="-I/home/olib/sqlite-autoconf-3071501/' 
```

./build/lib.linux-x86_64-2.7/_sqlite3.so 现在创建了！
复制到 lib-dynload 目录

```
olib:~/Python-2.7.3> cp ./build/lib.linux-x86_64-2.7/_sqlite3.so /opt/python/current2/lib/python2.7/lib-dynload/ 
```

现在一切看起来都很好。。

```
olib:~> python
Python 2.7.3 (default, May 28 2012, 20:04:45) 
[GCC 4.1.2 20070115 (prerelease) (SUSE Linux)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import sqlite3
>>> 
```

# iframe - 我应该为 iframe 沙箱使用什么选项

> ID：14143979
> 
> 赞同：1
> 
> 时间：2013-01-03T17:25:47.163
> 
> 标签：iframe, youtube-api

当我附加安全功能时，我的视频不再可控：我将“&origin=http://mydomain.com”添加到具有视频的 iframe 的属性中。（不可控制我的意思是 youtube api 停止工作）。所以我决定使用“沙盒”功能，这也是为了安全。不幸的是，它工作得很好——它也阻止了内容。所以如果我想做的只是防止 iframe 造成恶作剧，但我也想播放第三方视频，我应该使用：sandbox="" 还是 sandbox="allow-same-origin" 我不太明白来自 W3schools 的描述。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:40:55.170

您应该能够在`origin=`包含为`src=`iframe 标记的 URL 上设置参数。

要尝试的一件事是 URL 转义`://`参数值中的字符，例如`origin=http%3A%2F%2F//mydomain.com`. 这有帮助吗？如果是这样，我们将更新[示例](https://developers.google.com/youtube/player_parameters#Manual_IFrame_Embeds)以反映逃避的需要。

如果这没有帮助，您能否提供完整的 iframe 标记，包括您正在使用的所有属性及其值？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-07T13:56:26.143

origin 仅适用于 html 页面，不适用于 asp.net 页面。我测试了它。

# apache - LogParser 错误：语法错误：查询后的额外令牌：'Files\Apache'

> ID：14143980
> 
> 赞同：1
> 
> 时间：2013-01-03T17:25:54.060
> 
> 标签：apache, logparser

我正在尝试运行 LogParser 将 access.log 中的所有内容转储到等效的 CSV 文件中：

```
C:\Program Files\Log Parser 2.2>LogParser "select * into foo.csv from C:\Program  Files\Apache Software Foundation\Apache2.2\logs\access.log" -i:ncsa -o:csv 
```

但是，我不断收到此错误：**错误：语法错误：查询后的额外令牌：'Files\Apache'**，我不确定我是否缺少更多语法或格式错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T21:03:08.567

在源日志文件周围添加单引号（如果路径中有任何空格）。

```
LogParser "select * into foo.csv from 'C:\Program Files\Apache Software Foundation\Apache2.2\logs\access.log'" -i:ncsa -o:csv 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T17:54:58.510

我不熟悉日志解析器，但从错误来看，您的查询在第一个空格处终止。
该网站：[http](http://misigah.com/?p=28) ://misigah.com/? p=28 提到使用“\u0020”作为查询列中的空格。按照该指导，您的查询将是：

*LogParser "select * into foo.csv from C:\Program\u0020Files\Apache\u0020Software\u0020Found...*

“程序”和“文件”之间也有 2 个空格。

希望有帮助

# c++ - 如何递归地读取矩阵c ++

> ID：14143982
> 
> 赞同：0
> 
> 时间：2013-01-03T17:26:04.733
> 
> 标签：c++, recursion

谁能帮我理解递归？我想递归地读取矩阵，但我真的不知道如何。

我制定了一个将迭代算法转换为递归算法的计划，步骤如下：

1.  重复结构->如果随后回忆起身体某处的功能
2.  从“顶部”到 0 并返回到类似的迭代方式（我是这个概念的新手，这个想法可能很愚蠢）

我递归读取矩阵的函数（**不工作**）如下：

```
void read_m(int n,int m)
{
    if(n)
    {
        if(m)
        {
            read_m(n,m-1);
        }
        f>>v[n][m]; 
        read_m(n-1,m);
    }
} 
```

我知道错误是什么，我不知道我应该如何解决这个问题。提前致谢。

PS`n`和`m`是宽度和高度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:32:11.277

在这里使用递归可能不是最好的方法，但假设你想要它并且你想要'f'对所有元素执行，当 n 为 0 时它不会工作，因为它在`if(n)`块内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T21:58:04.023

首先，如果 (n) 阻塞，您应该移出`f>>v[n][m];`，否则它不会用索引 0 填充整行。

第二个假设你逐行保存数据，你应该在递归之前读取数据，为了防止重复读取，你应该只在读取整列时减少行。

```
void read_m(int n,int m)
{
    f>>v[width-1-n][height-1-m]; //suppose that width and height defined elsewhere
    if(m)
    {
        read_m(n,m-1);
    }
    else if(n)
    {
        read_m(n-1,m);
    }
} 
```

如果它是逐列的，您应该在代码中更改 m 和 n。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T22:35:24.793

```
#include<fstream>
using namespace std;

ifstream f("recurs.in");
ofstream g("recurs.out");

int a[20][20],n,m;

void read(int i, int j)
{
    if(j>1)
        read(i,j-1);
    else if(i>1) 
        read(i-1,j);
    f>>a[i][j];
}
int main()
{
    int i,j;
    f>>n>>m;
    read(n,m);
    for(i=1;i<=n;i++)
    {
        for(j=1;j<=m;j++)
            g<<a[i][j]<<' ';
        g<<endl;
    }
} 
```

在职的

# ios - 使用多个 ManagedContext 架构从 Coredata 中删除对象

> ID：14143985
> 
> 赞同：0
> 
> 时间：2013-01-03T17:26:21.953
> 
> 标签：ios, core-data

我在使用多线程多个 nsmanaged 对象上下文架构（http://www.cocoanetics.com/2012/07/multi-context-coredata/）的核心数据中删除对象时遇到了一些麻烦。

我应该通过创建子上下文来删除对象，还是应该从创建的读取上下文中删除它。

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:57:49.503

您提供的链接描述了处理多个上下文的 2 种不同方法。

如果您使用第一种（经典）方法，那么我猜您的上下文在某些时候无法正确同步。

如果您使用父/子模式（这可以使事情变得更容易）并且您在子上下文中删除了一个对象，那么您需要保存子对象以便将更改推送到其父对象。之后，如果要保留删除，还需要保存父级。

# jquery - 我正在尝试使用 jQuery 获取“td”的值，但它总是报告“null”

> ID：14143987
> 
> 赞同：0
> 
> 时间：2013-01-03T17:26:29.307
> 
> 标签：jquery, html, asp.net-mvc

我正在尝试获取表中特定单元格的值以过滤掉不需要的行。但是，当我尝试获取该单元格的值时，它总是报告`null`或根本不报告。我查看了几个来源并以同样的方式完成了我的代码，但没有运气。这是我的代码：

```
$("td").each(function () {
    var setName = $(this).find("#headerName").text();
    alert(setName);
    if (setName != weaverSet) {
        $(this).hide();
    } 
```

`weaverSet`正在从下拉列表中获取它的值并正常工作。这是我要获取的表格部分的代码：

```
 <td id ="headerName">
     @item.WeaverSetName
 </td> 
```

对此问题的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:28:59.957

尝试在不调用 find 函数的情况下获取 td 的值。在你的循环里面得到这样的值

```
var setName = $(this).text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:29:38.597

根据您的问题，您很可能应该为 headerName 使用一个类，而不是一个 ID（您的页面上应该只有一个）。

然后，您可以执行相同的迭代。

```
$("td").each(function () {
     var setName = $('.headerName',this).text();
     alert(setName);
     if (setName != weaverSet) {$(this).hide();}
}); 
```

**[例子](http://jsfiddle.net/wLvmd/1/)**

或者因为它们只是元素，您应该能够从它们中完全提取文本以及它们的内容：

```
$("td").each(function()
{
     var setName = $(this).text();
     alert(setName);
} 
```

[**例子**](http://jsfiddle.net/wLvmd/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T17:32:04.943

你应该使用`filter("#headerName")`而不是`find("#headerName")`

您已经在遍历所有单元格。`find`在每个单元格内查找具有和 id 的`headerName`单元格。您可能想要的是检查当前单元格是否具有使用`filter()`函数完成的 id。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T17:34:21.763

只有当 #headerName 单元格位于另一个`<td>`. `<td>`ID headerName只有一个吗？如果是这样，这应该有效（没有 .each() 围绕它）：

```
var cell= $("#headerName");
var setName = cell.text();
            alert(setName);
            if (setName != weaverSet) {
                $(cell).hide();
            } 
```

如果不是，那就有问题了，因为 ID 必须是唯一的，在这种情况下您应该使用类。

# razor - 不同类别/页面的不同模板

> ID：14143991
> 
> 赞同：0
> 
> 时间：2013-01-03T17:27:03.653
> 
> 标签：razor, asp.net-mvc-4, asp.net-mvc-templates

谁知道我可以在我的 ASP.NET MVC 4 应用程序中实现模板系统的文章？

像许多其他网站一样，我自己的网站有许多不同的类别，每个类别都应该使用自己的模板。

色环是模板（如 musictemplate_layout.cshtml），并且 ContentPlaceHolder123 始终具有相同的内容。

![在此处输入图像描述](../Images/86e225eb870a1fe342a6e57477aef3c9.png)

最好的问候，帕特里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:54:00.183

创建不同的视图作为您的特定模板，如下所示： ![在此处输入图像描述](../Images/46ca2689408cd00e312fe9cb79ca4a3d.png)

通过在每个页面的顶部定义如下来使用不同的布局：

```
@{
    Layout = "~/Views/Shared/Layout1.cshtml";
} 
```

此外，根据您的界面计划，您可以拥有更多级别的布局。您可以通过不同的因素动态地使用布局，例如 UserAgent 或 ... 通过将字符串变量放在“布局”前面以获得更可采用或更智能的结果。

# linux - Linux 命令最新的非软链接文件

> ID：14143992
> 
> 赞同：0
> 
> 时间：2013-01-03T17:27:03.653
> 
> 标签：linux, command-line, recent-documents

Linux 命令：我使用以下命令返回目录中的最新文件名。

```
ls -Art | tail -n 1 
```

当我运行此命令时，它返回我最新更改的文件，这实际上是软链接，我想在我的结果中忽略软链接，并希望获取除软链接之外的文件名我该如何做任何快速帮助表示赞赏。

可能我可以指定正则表达式匹配的最新文件文件名是

```
rum-12.53.2.war 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:35:36.247

ls 的 -L 选项确实取消引用链接，即您将看到引用的信息而不是链接。这是你想要的吗？或者您想完全忽略链接？

如果您想完全忽略链接，您可以使用此解决方案，尽管我确信存在一个更简单的解决方案：

```
a=$( ls -Artl | grep -v "^l" | tail -1 )

aa=()
for i in $(echo $a | tr " " "\n")
do
    aa+=($i)
done

aa_length=${#aa[@]}

echo ${aa[aa_length-1]} 
```

首先，您将 ls 的输出存储在一个名为 a 的变量中。通过搜索“^l”，您只选择了符号链接，并使用 -v 选项反转此选择。所以你基本上有你想要的，唯一的缺点是你需要对 ls 使用 -l 选项，否则没有“^l”的 grepping。因此，在第二部分中，您将变量 a 拆分为 " " 并填充一个名为 aa 的数组（抱歉命名错误）。那么你只需要aa中的最后一项，它应该是文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:27:24.903

-- 没有软链接的目录中的最新文件

```
ls -ArtL | tail -n 1 
```

-- 没有扩展名的最新文件

```
ls -ArtL | sed 's/\(.*\)\..*/\1/' | tail -n 1 
```

# jquery - jQuery .eq() 用于多个实例？

> ID：14143993
> 
> 赞同：1
> 
> 时间：2013-01-03T17:27:06.860
> 
> 标签：jquery

我有以下工作正常：

```
if (jQuery('#target').val() == '1') {
    jQuery('.room_row').addClass('hide').eq(0).removeClass("hide");
  } 
```

但是我需要添加类似这样的内容，以便前 2 个 div.room_row 的“隐藏”类被删除：

```
if (jQuery('#target').val() == '2') {
    jQuery('.room_row').addClass('hide').eq(0,1).removeClass("hide");
  } 
```

更新很多人都推荐使用 slice，但我无法让它工作。我有 7 个带有 room_row 类的 div。当您在选择列表中选择选项 1 时，我需要第一个 .room_row 可见。如果您选择 2 我需要前 2 个 .room_row 可见，等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:34:53.813

试试这个

```
jQuery('.room_row').addClass('hide').slice(0,2).removeClass('hide'); 
```

这对你也有帮助

```
 jQuery('.room_row:gt(2)').addClass('hide'); 
```

[http://api.jquery.com/slice/](http://api.jquery.com/slice/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:29:52.723

您可以使用切片：

```
jQuery('.room_row').slice(2).addClass("hide"); 
```

这是一个简单的例子：

```
> [1, 2, 3, 4, 5, 6].slice(2)
[3, 4, 5, 6]
> [1, 2, 3, 4, 5, 6].slice(0, 2)
[1, 2] 
```

或者，有`:lt`and `:gt`：

```
jQuery('.room_row:gt(2)').addClass('hide'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T17:29:54.423

改用`slice`：

```
jQuery('.room_row').addClass('hide').slice(0,2).removeClass("hide"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T17:33:23.710

你有没有尝试过：

```
if (jQuery('#target').val() == '2') {
    jQuery('.room_row:lt(2)').removeClass("hide");
  } 
```