# StackOverflow 问答 14459000-14459999

# javascript - 如何将变量作为键传递给 javascript unshift/push？

> ID：14459004
> 
> 赞同：0
> 
> 时间：2013-01-22T12:51:37.043
> 
> 标签：javascript, jquery, arrays

我试图在`unshift()`这样的调用中设置一个变量名：

```
var new_index_name = priv.indices[i]["name"], // e.g. "container"
    new_index_array.unshift({new_index_name :[]}); 
```

但我的 new_index_array 现在将包含：

```
[ {new_index_name : []} ] 
```

代替

```
[ {"container" : []} ] 
```

**问题：**是否可以在 push/unshift 调用中将
变量名作为值传递？`key`

感谢帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T12:53:14.867

`push`这与或无关`unshift`

您不能将变量用作对象文字中的属性（因为您可以使用标识符作为属性名称，并且变量也由标识符表示）。

您必须构造对象，然后将数据添加到其中。

```
var new_index_name = priv.indices[i]["name"], // e.g. "container"
var ob = {};
    ob[new_index_name] = [];
    new_index_array.unshift(ob); 
```

# ruby - 使用 Nokogiri 我收到错误“初始化”：getaddrinfo：不知道这样的主机。（SocketError）“

> ID：14459006
> 
> 赞同：1
> 
> 时间：2013-01-22T12:51:57.933
> 
> 标签：ruby, nokogiri

我写了下面的代码，只是为了启动 Nokogiri 来满足要求，当我运行它进行测试时出现错误：

```
D:\WIPData\Ruby\Scripts>Nokogiri.rb
C:/Ruby193/lib/ruby/1.9.1/net/http.rb:762:in `initialize': getaddrinfo: No such
host is known.  (SocketError)
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:762:in `open'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:762:in `block in connect'
        from C:/Ruby193/lib/ruby/1.9.1/timeout.rb:54:in `timeout'
        from C:/Ruby193/lib/ruby/1.9.1/timeout.rb:99:in `timeout'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:762:in `connect'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:755:in `do_start'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:744:in `start'
        from C:/Ruby193/lib/ruby/1.9.1/open-uri.rb:306:in `open_http'
        from C:/Ruby193/lib/ruby/1.9.1/open-uri.rb:775:in `buffer_open'
        from C:/Ruby193/lib/ruby/1.9.1/open-uri.rb:203:in `block in open_loop'
        from C:/Ruby193/lib/ruby/1.9.1/open-uri.rb:201:in `catch'
        from C:/Ruby193/lib/ruby/1.9.1/open-uri.rb:201:in `open_loop'
        from C:/Ruby193/lib/ruby/1.9.1/open-uri.rb:146:in `open_uri'
        from C:/Ruby193/lib/ruby/1.9.1/open-uri.rb:677:in `open'
        from C:/Ruby193/lib/ruby/1.9.1/open-uri.rb:33:in `open'
        from D:/WIPData/Ruby/Scripts/Nokogiri.rb:6:in `<main>'

D:\WIPData\Ruby\Scripts> 
```

***代码***

```
require 'nokogiri'
require 'open-uri'

# Get a Nokogiri::HTML::Document for the page we’re interested in...

doc = Nokogiri::HTML(open('http://www.google.co.in')) 
```

为什么会这样以及如何解决相同的问题，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T16:20:00.320

看来您需要配置代理。找出您的组织的代理 URL/端口是什么（以及是否需要进行身份验证）。您可以从浏览器配置中查看此信息。为了在您的 Ruby 代码中使用它，您需要设置`HTTP_PROXY`环境变量。

您可以在 Ruby 代码中设置它：

```
ENV['HTTP_PROXY'] = 'http://hostname:port' 
```

或者如果您需要身份验证：

```
ENV['HTTP_PROXY'] = 'http://username:password@hostname:port' 
```

更持久的解决方案是`HTTP_PROXY`在您的系统环境变量中设置。

# wpf - WPF 事件触发器不起作用

> ID：14459008
> 
> 赞同：3
> 
> 时间：2013-01-22T12:51:58.960
> 
> 标签：wpf, events, animation, button, triggers

我是编程新手（改变领域，离开设计）并且对 WPF 非常感兴趣。所以我正在学习并做一些代码。在这一个中，我正在尝试制作一个“不可见”网格（gridNovoCliente，opacity = 0）以显示在按钮单击事件（opacity = 1）及其所有元素。我希望网格/元素在用户单击按钮之前不可见。

但它不起作用。在决定在这里发布之前，我已经在谷歌上搜索了 3 天。我收到错误“设置属性 'System.Windows.Media.Animation.Storyboard.Target' 引发异常。” 在 EventTrigger 行。

一旦我得到这个工作，就会有更多的按钮，所以我创造了一种风格。提前致谢！这是代码。

```
<Grid>
        <Button Style="{StaticResource templateButton}" Name="novoCliente" Content="Novo&#xa;Cliente" Margin="20,41,0,598" TextBlock.TextAlignment="Center">
            <Button.Triggers>
                <EventTrigger RoutedEvent="Button.Click">
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation Storyboard.Target="gridNovoCliente"
                                         Storyboard.TargetProperty="Opacity"
                                         From="0"
                                         To="1"/>
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
            </Button.Triggers>
        </Button>

    <Grid Height="705" HorizontalAlignment="Left" Margin="131,12,0,0" Name="gridNovoCliente" VerticalAlignment="Top" Width="859" Background="#FF6FAA6F" Opacity="0">
        <TextBox Height="70" HorizontalAlignment="Left" Margin="270,250,0,0" Name="textBox1" VerticalAlignment="Top" Width="358" />
    </Grid>
</Grid> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T13:53:15.653

```
 <Canvas>
        <Button  Name="novoCliente" Content="Novo&#xa;Cliente"  Margin="20,41,0,598" TextBlock.TextAlignment="Center">
        <Button.Triggers>
            <EventTrigger RoutedEvent="Button.Click" >
                <EventTrigger.Actions>
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation Storyboard.TargetName="gridNovoCliente"
                                     Storyboard.TargetProperty="Opacity"
                                     From="0"
                                     To="1"/>
                        </Storyboard>
                    </BeginStoryboard>
               </EventTrigger.Actions> 

            </EventTrigger>
        </Button.Triggers>
    </Button>

    <Grid Height="705" HorizontalAlignment="Left" Margin="131,12,0,0" Name="gridNovoCliente" VerticalAlignment="Top" Width="859" Background="#FF6FAA6F" Opacity="0">
        <TextBox Height="70" HorizontalAlignment="Left" Margin="270,250,0,0" Name="textBox1" VerticalAlignment="Top" Width="358" />
    </Grid>
    </Canvas> 
```

这很简单，请尝试上面的 xaml，它对我有用。谢谢

# iphone - 如何通过一个链接打开应用程序/iTunes商店？

> ID：14459009
> 
> 赞同：0
> 
> 时间：2013-01-22T12:52:03.097
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我有主意！例如，我通过电子邮件为我的朋友发送申请邀请。我想在这封电子邮件中有链接。当用户单击它时，他将打开应用程序，如果已安装，如果未安装 - 显示 iTunes 商店。知道如何实现吗？

[与其他应用程序通信](https://developer.apple.com/library/IOs/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html#//apple_ref/doc/uid/TP40007072-CH7-SW18)

我开始阅读这个，但还没有找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:37:39.880

我提供了检查应用程序是否安装在 iphone 上的方法。

如果您的应用的 URL 方案是“myapp:”，那么

```
BOOL myAppInstalled = [[UIApplication sharedApplication] canOpenURL:[NSURL urlWithString:@"myapp:"]]; 
```

# regex - 如何在 MongoDB 中使用正则表达式进行本地字符不敏感搜索？

> ID：14459013
> 
> 赞同：2
> 
> 时间：2013-01-22T12:52:18.157
> 
> 标签：regex, mongodb

我想进行搜索，假设我的键盘是英文的。但在数据库中，有一些数据包括土耳其语字符：

“伊斯坦布尔”

“伊兹密尔”

等等因为我的键盘中没有“ **İ** ”，所以我永远无法在我的查询中找到这两个数据。

最好的方法是什么？

更新：

在 NodeJS 中，我有以下功能可以将土耳其语字符转换为英语字符：

```
function convertTurkishToEnglish(trStr){
   return S(trStr)
      .replaceAll('ı', 'i')
      .replaceAll('ö', 'o')
      .replaceAll('ü', 'u')
      .s; 
} 
```

但我无法将其应用于数据库中的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:59:06.423

您可以使用 unicode 转义序列`\u0130`来识别`İ`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:48:21.783

想到三个选项：

1.  增强数据以包含表示文本的“英语”版本的附加字段（`convertTurkishToEnglish`例如使用您的函数）（您可能能够使用 MapReduce 函数来构建具有所需内容的新表）。
2.  使用 ElasticSearch 或 Solr 等搜索引擎进行调查，以获得更详尽的搜索选项
3.  增加正则表达式的复杂性以在搜索文本时包含所有字符替换组合（在运行时您将构建这些搜索字符串）：

    `db.users.find({"username": { $regex: "\u0130|ian", $options : "i" } })`

在上面的代码片段中，它正在寻找`İ`or `i`。您需要对任何其他土耳其语字符执行此操作。（例如，它正在寻找“Ian”）。

# matlab - Matlab中的impoly崩溃错误

> ID：14459014
> 
> 赞同：0
> 
> 时间：2013-01-22T12:52:17.717
> 
> 标签：matlab, crash-reports

我最近一直在开发一个 GUI，它运行良好，直到 Matlab 在运行不相关的代码时崩溃。我的代码中允许用户绘制 ROI 的部分不再有效，并且在我的 impoly 调用中报告错误（在 Matlab 崩溃之前完美运行）：

```
function cb(src,evt)
handles = guidata(src);  %# import the data from the object
images=handles.images;
start = handles.view_slice;
last = handles.slices;
imshow(images(:,:,start),[])
h=impoly;
position = getPosition(h); 
```

我现在得到的错误是：

```
Error using hittest
Invalid object handle
Error in imshared.ipthittest (line 33)
h = hittest(hFigure, currentPoint);
Error in findLowestManagedObject (line 14)
    hit_obj =
    imshared.ipthittest(hFigure,buttonMotionEvent.currentPoint);
Error in iptPointerManager>createPointerManager/updatePointer
(line 334)
        overMe =
        findLowestManagedObject(hFigure,mouseMotionEvent);
Error in
iptPointerManager>createPointerManager/enablePointerManager (line
259)
            updatePointer(figHandle, evt);
Error in iptPointerManager (line 72)
    pointerManager.API.enable();
Error in manageInteractivePlacement (line 76)
      iptPointerManager(h_fig,'Enable');
Error in impoly>impolyAPI (line 245)
      placement_aborted =
      manageInteractivePlacement(h_axes,h_group,@placePolygon,@buttonUpPlacement);
Error in impoly (line 97)
            [h_group,draw_api] = impolyAPI(varargin{:});
Error in volume_scan>cb (line 288)
h=impoly;
Error while evaluating uitoggletool OnCallback 
```

除了这个不起作用之外，还有其他奇怪的东西，包括卡在 GUIDE 表格中的文本（我无法删除）和一个默认为第三个选项的复选框文本

有人有什么想法吗？某处是否有需要重置/删除的崩溃文件？我用的是2012b。

谢谢，吉姆

# windows-runtime - DTO 到特定对象的转换模式

> ID：14459019
> 
> 赞同：0
> 
> 时间：2013-01-22T12:52:44.663
> 
> 标签：windows-runtime, type-conversion, dto

架构：Win8 应用 + 本地 Web API Self-Host 共享一个通用的“Contracts”项目。

Web API 返回非常通用的合约类型（IEnumerable 等）。

在 Win8 应用程序中，我想将这些合同转换为具体的 MVVM 兼容模型对象，例如使用 ObservableCollection 而不是 IEnumerables。

我很想使用 AutoMapper 来完成这项任务，但它与 WinRT 不兼容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:30:41.717

谢谢你的建议。

我以非通用方式解决了它，对于每个模型我都有一个特定的转换器来完成这项工作。你怎么看？

```
using Project.Contracts;
using Project.Models;

namespace Project.Converters.Contracts
{
    public static class ProductConverter
    {
        public static ProductContract ToContract(this Product model)
        {
            if (model == null)
            {
                return new ProductContract();
            }

            return new ProductContract
            {
                Id = model.Id,
                Name = mode.Name,
                Tags = model.Tags.ToContracts()
            };
        }

        public static ICollection<ProductContract> ToContracts(this IEnumerable<Product> models)
        {
            if (models == null)
            {
                return new Collection<ProductContract>();
            }

            return models.Select(m => m.ToContract()).ToList();
        }

        public static Product ToModel(this ProductContract contract)
        {
            if (contract == null)
            {
                return new Product();
            }

            return new Product
            {
                Id = contract.Id,
                Name = contract.Name,
                Tags = contract.Tags.ToModels()
            };
        }

        public static ObservableCollection<Product> ToModels(this IEnumerable<ProductContract> contracts)
        {
            if (contracts == null)
            {
                return new ObservableCollection<Product>();
            }

            return new ObservableCollection<Product>(contracts.Select(c => c.ToModel()));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T18:37:21.983

我前段时间使用过 AutoMapper，但现在我通常使用特定的类来完成这项工作，这样我就可以对其进行测试并实现“奇怪”的逻辑。此类负责 2 方向的映射（如果两者都需要）。有时，因为我很懒 ;-)，我使用了隐式转换运算符来简化转换，但我认为从概念上讲，dto 的构造函数可能会更好：

公共类 ItemDto { public Int32 Id { get; 放; } 公共字符串描述 { 获取；放; }

```
public static implicit operator ItemDto (Item item)
{
    var dto = new ItemDto()
                  {
                      Id = item.Id,
                      Description = item.LongDescription
                  };
    return dto;
} 
```

在所有这些情况下，我认为测试映射的可能性具有很大的价值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T18:38:01.083

您可以自己使用反射 (System.Reflection) 映射您的 DTO，在循环中使用可移植 CLR 类型的属性和映射。

# install4j - install4j 网络安装程序

> ID：14459021
> 
> 赞同：1
> 
> 时间：2013-01-22T12:52:51.163
> 
> 标签：install4j

我可以使用 Install4J 创建 Web 安装程序吗？我的意思是类似于 JRE/JDK 轻量级安装程序，它根据目标机器从网络服务器中提取文件，然后安装产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:53:44.260

您必须自动检测服务器上的操作系统并为正确的平台提供安装程序。这可以通过像[UserAgentUtils](http://user-agent-utils.java.net/)这样的库来完成。

install4j 安装程序可以是网络安装程序，因此初始下载大小将尽可能小。

在“文件->安装组件”上，添加可下载的安装组件（在每个可下载组件的“选项”选项卡上选择“可下载”）。在媒体向导中，在“数据文件”步骤中，选择“可下载”选项。然后将组件写入单独的数据文件。

# jenkins - 詹金斯，可以将詹金斯设置为需要密码的工作吗？

> ID：14459024
> 
> 赞同：2
> 
> 时间：2013-01-22T12:53:04.187
> 
> 标签：jenkins

我们的一些 Jenkins 工作是这样的，它们部署到例如客户端验收测试环境。非常重要的是，这类工作不是偶然触发的。因此，是否可以将 Jenkins 配置为在触发特定构建时以某种方式需要密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:21:01.113

设置[基于项目的安全性](https://wiki.jenkins-ci.org/display/JENKINS/2012/01/03/Allow+access+to+specific+projects+for+Users%28Assigning+security+for+projects+in+Jenkins%29)，然后您可以基于每个作业限制构建访问。

*从 Jenkins 配置页面的帮助中：*

> [基于项目的安全性] 是“基于矩阵的安全性”的扩展，允许为每个项目单独定义额外的 ACL 矩阵（在作业配置屏幕上完成）。
> 
> 这使您可以说“Joe 可以访问项目 A、B 和 C，但他看不到 D”。有关基于矩阵的安全性的一般概念，请参阅“基于矩阵的安全性”的帮助。
> 
> ACL 是附加的，因此下面授予的访问权限将对所有项目都有效。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-19T19:07:30.677

好的。我对这个问题的 5cents。

我们的 Jenkins 使用 Redmine 的 mysql db 作为身份验证输入。

在詹金斯你需要下一个插件：

*   [参数化构建](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Build)
*   [构建用户变量插件](https://wiki.jenkins-ci.org/display/JENKINS/Build+User+Vars+Plugin)

激活`Password`参数后，在构建之前会要求您提供它。

所以，我想出了2个选项。

1.  如果您的从站与 mysql（或任何数据库引擎）直接连接，则适用。

然后预构建检查：

```
SALT=$(mysql --defaults-extra-file="~/redmcheck.my" -B -se "select salt from redmine.users where login='${BUILD_USER}';")
HASH=$(mysql --defaults-extra-file="~/redmcheck.my" -B -se "select hashed_password from redmine.users where login='${BUILD_USER}';")
CHECK=$(sha1 -qs $SALT$(sha1 -qs $Password))

if [ $HASH != $CHECK ] 
then
  exit 1;
fi 
```

如果您输入的密码不相等，它将破坏构建。

2.  第二种解决方案，是在 Redmine 中使用 Rest API。它允许重新检查远程从站上的用户。

    CODE=$(curl -X GET -u ${BUILD_USER}:${Password} --write-out "%{http_code}" -o /dev/null -s [https://redmine/users/current.json](https://redmine/users/current.json) ) ; 如果 [ $CODE != "200" ] 则退出 1；菲

如果它得到 200 个代码，那么它就开始构建。

# mysql - 需要对 MySQL 事件的评论

> ID：14459026
> 
> 赞同：0
> 
> 时间：2013-01-22T12:53:08.150
> 
> 标签：mysql, sql

```
SET GLOBAL event_scheduler = ON;

CREATE TABLE question(
    qid INT AUTO_INCREMENT PRIMARY KEY,
    name CHAR(30) NOT NULL,
    text CHAR(100) NOT NULL,
    variation BOOLEAN NOT NULL,
    url CHAR(100) NOT NULL UNIQUE,
    expired TIMESTAMP NOT NULL
);

CREATE TABLE alternativ(
    aid INT AUTO_INCREMENT PRIMARY KEY,
    name CHAR(30) NOT NULL,
    text CHAR(50) NOT NULL,
    number_chosen INT,
    qid INT NOT NULL
);

ALTER TABLE alternativ
    ADD FOREIGN KEY (qid)
    REFERENCES question(qid);

CREATE EVENT delete_expired
    ON SCHEDULE
    EVERY 1 DAY
    DO
    DELETE FROM alternativ WHERE alternativ.qid IN (SELECT qid FROM question WHERE question.expired<CURRENT_TIMESTAMP)
    DELETE FROM question WHERE question.expired < CURRENT_TIMESTAMP; 
```

我的问题是：这个事件应该与指定的数据库一起使用吗？我试过了，但它似乎不起作用。这个想法是数据库本身将删除已过期的问题。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:58:19.390

如果要在事件主体中指定多个语句，则需要将它们包装在复合语句块中，例如`BEGIN ... END`（为了使这样的命令起作用，必须将客户端配置为使用替代语句分隔符，以便它不认为第一个遇到的分号会终止`CREATE EVENT`语句——在 mysql 命令行工具中，可以使用`DELIMITER`命令）：

```
DELIMITER ;;

CREATE EVENT ... DO BEGIN
  DELETE  ... ;
  DELETE  ... ;
END ;;

DELIMITER ; 
```

也就是说，可以`DELETE`使用多表语法通过单个命令从多个表中删除：

```
DELETE alternativ, question
FROM   alternativ JOIN question USING (qid)
WHERE  question.expired < CURRENT_TIMESTAMP 
```

但是，尽管如此，您可能会更好地指定*级联*记录删除的外键约束：

```
FOREIGN KEY (qid) REFERENCES question(qid) ON DELETE CASCADE 
```

然后，只需要`DELETE`引用记录（即`question`表中），MySQL 会为您删除引用记录（即`alternativ`表中）。

# java - 随机密码生成

> ID：14459035
> 
> 赞同：2
> 
> 时间：2013-01-22T12:53:30.880
> 
> 标签：java

我写了一个随机密码生成的代码。有一个字符串我必须从中输入密码。所以我尝试根据大写数组、小写数组和数字数组对字符串进行分类。但是当..

```
 for(int k=0;k<Length;k++){
        if(asc[k]>=65 && asc[k]<=90){
            UpperCase[k]=(char)asc[k];
        }
        else if(asc[k]>=48 && asc[k]<=57){
            Digit[k]=(char)asc[k];
        }
        else {
            Mixed[k]=(char)asc[k];
        }
    } 
```

执行它会计算一些我不想要的空间。对于我糟糕的编码来说，编码看起来很丑陋。我知道有更多的方法可以解决它，但我想通过这个。这是我的代码。这是我的代码

```
import java.util.Random;

   public class Randompassgeneration
   {

final int MAX_LENGTH = 20;
final int MIN_LENGTH = 3;

char[] password=new char[25];
int [] asc=new int[18];
char[] UpperCase=new char[25];
char[] Digit=new char[25];
char[] Mixed=new char[25];
public void generate(String allowedCharacters)
{
    int Length=allowedCharacters.length();

    for (int i=0;i<Length;i++)
    {
        asc[i]=(int)allowedCharacters.charAt(i);

    }
    for (int k=0;k<Length;k++)
    {
        if (asc[k]>=65 && asc[k]<=90)
        {
            UpperCase[k]=(char)asc[k];
        }
        else if (asc[k]>=48 && asc[k]<=57)
        {
            Digit[k]=(char)asc[k];
        }
        else
        {
            Mixed[k]=(char)asc[k];
        }
    }

    String rp=null;
    StringBuilder Strbld=new StringBuilder();
    Random rnd=new Random();
    int ranStrLen=rnd.nextInt(MAX_LENGTH - MIN_LENGTH + 1) + MIN_LENGTH;
    Strbld.append(UpperCase[rnd.nextInt(UpperCase.length)]);
    Strbld.append(Digit[rnd.nextInt(Digit.length)]);

    for (int m=0; m<ranStrLen-2; m++)
    {
        Strbld.append(Mixed[rnd.nextInt(Mixed.length)]);

    }

    System.out.print(ranStrLen +"->"+ Strbld.toString());

}

public static void main(String[] args)
{
    String allowedCharacters = "weakPasSWorD1234$*";
    Randompassgeneration t=new Randompassgeneration();
    t.generate(allowedCharacters);
}
} 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:56:50.020

我会生成最少数量的字符、数字和符号。随机填充其他字符并将结果随机排列。这样，它将以最少的努力满足您的最低要求。

```
public static String passwordGenerator() {
    List<Character> chars = new ArrayList<>();
    Random rand = new Random();
    // min number of digits
    for (int i = 0; i < 1; i++) chars.add((char) ('0' + rand.nextInt(10)));
    // min number of lower case
    for (int i = 0; i < 2; i++) chars.add((char) ('a' + rand.nextInt(26)));
    // min number of upper case
    for (int i = 0; i < 1; i++) chars.add((char) ('A' + rand.nextInt(26)));
    // min number of symbols
    String symbols = "!\"$%^&*()_+{}:@~<>?,./;'#][=-\\|'";
    for (int i = 0; i < 1; i++) chars.add(symbols.charAt(rand.nextInt(symbols.length())));
    // fill in the rest
    while (chars.size() < 8) chars.add((char) ('!' + rand.nextInt(93)));
    // appear in a random order
    Collections.shuffle(chars);
    // turn into a String
    char[] arr = new char[chars.size()];
    for (int i = 0; i < chars.size(); i++) arr[i] = chars.get(i);
    return new String(arr);
}

public static void main(String... args) {
    for (int i = 0; i < 100; i++)
        System.out.println(passwordGenerator());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:23:47.527

*“执行它会计算一些我不想要的空间”*

**空白是因为你`For loop`**

您对所有数组都使用了该变量`k`，这导致`k`每次的值都增加。所以，这在您的数组之间产生了“间隙”。

将其更改为：

```
int point1=0,point2=0,point3=0;
for (int k=0;k<Length;k++)
{
    if (asc[k]>=65 && asc[k]<=90)
    {
        UpperCase[point1]=(char)asc[k];point1++;
        continue;
    }
    else if (asc[k]>=48 && asc[k]<=57)
    {
        Digit[point2]=(char)asc[k];point2++;
        continue;
    }
    else
    {
        Mixed[point3]=(char)asc[k];point3++;
    }

}
System.out.println(UpperCase);
System.out.println(Digit);
System.out.println(Mixed); 
```

输出：

```
PSWD
1234
weakasor$* 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T13:25:48.900

好的，如果没记错的话，您想解析生成的密码并将它们放在单独的数组中。这是大写的片段。

```
ArrayList<Character> uppercase = new ArrayList<Character>();

char pass[] = password.toCharArray();
for(char c: pass){
   if(Character.isUpperCase(c))
         uppercase.add(c);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T13:26:58.147

如果你想要一个随机字符串，你可以这样做：

```
public String getRandomString(){
    return UUID.randomUUID().toString();
} 
```

如果你想让它与一些源字符串一致，你可以这样做：

```
public String getConsistentHash(String source){
    return UUID.nameUUIDFromBytes(source.getBytes()).toString();
} 
```

后一种方法将为相同的源字符串返回相同的字符串。

如果您只想使用一组有限的字符，您可以替换不需要的字符。假设您已经像上面那样创建了“randomString”，您创建了“randomString1”：

```
randomString1 = UUID.fromString(randomString); 
```

现在用“randomString1”中的字符替换“randomString”中不需要的字符。如有必要，您可以重复此操作。

如果您不关心最小尺寸/传播，您可以删除字符。

祝你好运。

# php - FPDF 错误：无法在 PHP 中包含字体定义文件

> ID：14459039
> 
> 赞同：2
> 
> 时间：2013-01-22T12:53:56.167
> 
> 标签：php, fpdf

我有一堆图像，我想生成所有这些图像的 PDF。我正在使用`FPDF`库（1.7 版）来实现这一点。但我收到以下错误：

```
FPDF error: Could not include font definition file 
```

我在谷歌上找到了一些关于这个错误的文章并尝试过，但问题仍然存在。

这里应该是什么问题？我哪里错了？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-07-21T10:19:55.163

我有一个类似的错误，我在这里分享，因为没有在线文档。

“FPDF 错误：找不到字体文件”

如果您在下载所需文件（file.php、file.afm、file.z）后使用在线实用程序（ [http://fpdf.fruit-lab.de](http://fpdf.fruit-lab.de) ）转换 ttf 字体文件以在 FPDF 中使用它你必须：

1）放入字体文件夹（或任何其他文件夹，但你应该使用这个指令`define('FPDF_FONTPATH','yourpath/yourfolder/');`）

2）如果你重命名文件，你应该打开file.php并搜索包含“.z”文件名称的“$file”并正确重命名。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-26T12:12:52.120

也许有点太晚了，但我曾经遇到过同样的问题，解决方案是简单地授予 /font/ 文件夹的权限......

新手错误... 755 权限对我有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-26T11:50:38.467

```
 define('FPDF_FONTPATH','font/');

check in above line for correct path from local folder to server.....
exactly it runs well

    define('FPDF_FONTPATH','font/');

require('fpdf.php');
class PDF extends FPDF
{
//Constructor (mandatory with PHP3)
function PDF()
{
     self::__construct();
}

public function __construct()
    {
        $this->FPDF();
    }

//Page header
function Header()
{
    //Logo
    //$this->Image('logo_pb.png',10,8,33);
    //Arial bold 15
    $this->SetFont('Arial','B',15);
    //Move to the right
    $this->Cell(80);
    //Title
    $this->Cell(30,10,'Title',1,0,'C');
    //Line break
    $this->Ln(20);
}

//Page footer
function Footer()
{
    //Position at 1.5 cm from bottom
    $this->SetY(-15);
    //Arial italic 8
    $this->SetFont('Arial','I',8);
    //Page number
    $this->Cell(0,10,'Page '.$this->PageNo(),0,0,'C');
}
}
echo "<br/>";
//Instanciation of inherited class
$pdf=new PDF();
$pdf->Open();
$pdf->AddPage();
$pdf->SetFont('Times','',12);

$pdf->Image('logo_pb.png',40,20,33);

$url="demo/ivv/doc.pdf";

$dir='C:/xampp/htdocs/laravel/public/pdf/';

$filename= time().'.pdf';

$content=$pdf ->Output($dir.$filename);

?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-26T10:27:50.880

您必须为正在使用的字体创建字体定义文件。

看这里：

[http://www.fpdf.de/tutorials/7/](http://www.fpdf.de/tutorials/7/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-23T08:54:30.240

在 AddFont 函数中检查您的字体路径。

例如：

```
$fontInformation = pathinfo(WWW_ROOT . "files/files/font/file/" . $pdffile['font_file']);

$fontFileName = $fontInformation['filename'] . '.php';

//$pdf->fontpath = WWW_ROOT . "files/font/file/";

$pdf->AddFont($fontInformation['filename'], '', $fontFileName);

//set font for the entire document
$pdf->SetFont($fontInformation['filename'], '', 20); 
```

这可能会解决您的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-22T13:29:42.973

我遇到了这种问题，我的问题是我使用的是 linux Web 服务器，我犯了一个错误，即在我的字体文件引用中没有使用正确的大小写。在我将“Arial”更改为“arial”后，问题就解决了。

# javascript - jquery ajax 问题。.done() 函数中的奇怪行为

> ID：14459040
> 
> 赞同：1
> 
> 时间：2013-01-22T12:53:56.270
> 
> 标签：javascript, jquery

我在我写的一个简单的 ajax/jquery 代码中看到了一些非常奇怪的东西，我无法解释为什么我看到了我看到的东西。

我有一个名为 complete.php 的 php 文件，目前唯一要做的是：

```
echo "saved"; 
```

我有一个 jquery ajax 调用，它有一个 .done() 函数，如下所示：

```
jQuery.ajax({
        type: "POST",
        url: "complete.php",
        data: "id=someIdHere",
        }).done(function(d){

         alert(d);

          if(d == "saved"){
                alert('loading done');
          }else{
                alert('error');
          }
    }); 
```

我的萤火虫确认来自 complete.php 的响应是“已保存”。

当我键入“d”响应时，它是“字符串”类型，

但是由于某种原因，我在 .done() 函数中收到的警报是“错误”而不是“加载完成”。

if 语句之前的“alert(d)”给出“已保存”。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:12:03.593

您应该使用更健壮的返回类型，例如 JSON：

```
header('Content-Type: application/json');
echo json_encode(array(
    'status' => 'saved',
)); 
```

然后在您的成功处理程序中：

```
if (d.status == 'saved') { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:01:25.377

尝试

```
jQuery.ajax({
    type: "POST",
    url: "complete.php",
    data: "id=someIdHere",
    success: function(){ alert('loading done'); },
    error: function(){ alert('error'); }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T13:08:19.787

很奇怪，但我发现了这个问题。

我的 php 是

```
echo "saved"; 
```

这是正确的，但是当我根据@mplungjan 的建议调试返回时，返回是“已保存”（带有空格）这很奇怪，因为 php 没有空格，然后我将 php 更改为

`echo trim("saved");`

但是当我再次调试返回时，它再次被“保存”（带有空格）

不知道为什么要应用空白，但我已经通过替换 return / .done() 函数中的空白来解决它

我不会选择这个作为答案，但如果有人知道锄头，我很想知道可以添加空白。

我在山狮上使用 Firefox 18

# php - windows中php 5.2.17的inet_pton替换功能

> ID：14459041
> 
> 赞同：2
> 
> 时间：2013-01-22T12:53:57.540
> 
> 标签：php, windows, ipv6, replace

在 PHP 中 inet_pton()的[替代方案](http://php.net/manual/en/function.inet-pton.php#59714)中，给出了以下代码：

```
<?php
function inet_pton($ip)
{
    # ipv4
    if (strpos($ip, '.') !== FALSE) {
        $ip = pack('N',ip2long($ip));
    }
    # ipv6
    elseif (strpos($ip, ':') !== FALSE) {
        $ip = explode(':', $ip);
        $res = str_pad('', (4*(8-count($ip))), '0000', STR_PAD_LEFT);
        foreach ($ip as $seg) {
            $res .= str_pad($seg, 4, '0', STR_PAD_LEFT);
        }
        $ip = pack('H'.strlen($res), $res);
    }
    return $ip;
}
?> 
```

但是当使用以下测试代码对此进行测试时，它表明并非所有条目都是正确的：

```
<?php
$arrIPs = array(
        "2001:0db8:85a3:0000:0000:8a2e:0370:7334",
        "fe80:01::af0",
        "::af0",
        "192.168.0.1",
        "0000:0000:0000:0000:0000:0000:192.168.0.1");
foreach($arrIPs as $strIP) {
    $strResult = bin2hex(inet_pton($strIP));
    echo "From: {$strIP} to: {$strResult}<br />\n";
}
/*
From: 2001:0db8:85a3:0000:0000:8a2e:0370:7334 to: 20010db885a3000000008a2e03707334
From: fe80:01::af0 to: 0000000000000000fe80000100000af0 //Incorrect
From: ::af0 to: 00000000000000000000000000000af0
From: 192.168.0.1 to: c0a80001
From: 0000:0000:0000:0000:0000:0000:192.168.0.1 to: 00000000 //Incorrect
*/
?> 
```

我不知道正确的 IPv6 语法，所以我更喜欢其他更了解 IPv6 和标准的人，看看这个并告诉我它有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T23:10:46.527

[我刚刚从php.net](http://php.net/)下载了 PHP 5.3 安装程序，它在安装程序中包含了 PEAR。它只是默认情况下未安装：

![PHP 5.3 PEAR 安装选项](../Images/f467d7948b7b37be4951c9aea00b5ec6.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T18:30:48.417

此代码将正确执行：

```
function inet_pton($ip){
    # ipv4
    if (strpos($ip, '.') !== FALSE) {
        if (strpos($ip, ':') === FALSE) $ip = pack('N',ip2long($ip));
        else {
            $ip = explode(':',$ip);
            $ip = pack('N',ip2long($ip[count($ip)-1]));
        }
    }
    # ipv6
    elseif (strpos($ip, ':') !== FALSE) {
        $ip = explode(':', $ip);
        $parts=8-count($ip);
        $res='';$replaced=0;
        foreach ($ip as $seg) {
            if ($seg!='') $res .= str_pad($seg, 4, '0', STR_PAD_LEFT);
            elseif ($replaced==0) {
                for ($i=0;$i<=$parts;$i++) $res.='0000';
                $replaced=1;
            } elseif ($replaced==1) $res.='0000';
        }
        $ip = pack('H'.strlen($res), $res);
    }
    return $ip;
} 
```

结果：

```
From: 2001:0db8:85a3:0000:0000:8a2e:0370:7334 to:
string '20010db885a3000000008a2e03707334' (length=32)

From: fe80:01::af0 to:
string 'fe800001000000000000000000000af0' (length=32)

From: ::af0 to:
string '00000000000000000000000000000af0' (length=32)

From: 192.168.0.1 to:
string 'c0a80001' (length=8)

From: 0000:0000:0000:0000:0000:0000:192.168.0.1 to:
string 'c0a80001' (length=8) 
```

# servlets - HttpServletResponse#sendError 如何更改 ContentType

> ID：14459045
> 
> 赞同：10
> 
> 时间：2013-01-22T12:54:09.373
> 
> 标签：servlets, content-type, http-error

我正在创建一个简单的 Servlet 来回答表单提交。此 servlet 接收 POST 请求并应响应 Application/JSON 数据。这运作良好。我现在想为我的 servlet 添加错误管理：如果 servlet 接收到错误的请求参数，我希望它用一个简单的`{"error":"ERROR MESSAGE"}`JSON 响应来回答客户端一个 400 - “Bad Request” 响应。

我正在使用`HttpServletResponse#sendError(int,String)`来正确发送错误，但`ContentType`响应的 始终设置为`text/html`，即使我以前使用`HttpServletResponse#setContentType("application/json")`过。

这是使用 Servets 发送错误的好方法吗？我怎样才能强制`ContentType`响应`application/json`？

我的测试 Servlet 的 doPost() 方法的示例代码：

```
public void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("application/json;charset=UTF-8");
        PrintWriter out = response.getWriter();
        out.print("{\"error\":1}");
        response.sendError(HttpServletResponse.SC_BAD_REQUEST);
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-09-26T15:58:45.260

我最近想在 JAX-RS 应用程序中发送错误消息时遇到了这个问题。`sendError`根据规范，总是会返回 text/html。鉴于以下情况，我必须执行以下操作`HttpServletResponse response`：

```
response.resetBuffer();
response.setStatus(HttpServletResponse.SC_FORBIDDEN);
response.setHeader("Content-Type", "application/json");
response.getOutputStream().print("{\"errorMessage\":\"You can't use this!\"}");
response.flushBuffer(); // marks response as committed -- if we don't do this the request will go through normally! 
```

`flushBuffer`与将响应标记为已提交一样，这一点至关重要`sendError`。起初我尝试只在输出流上调用 close，但会发生什么是我的过滤器将运行，然后 JAX-RS 资源将继续正常运行，然后我会收到错误消息和正常响应与 200 状态连接在一起代码！

`resetBuffer`是否有其他任何东西在此过滤器之前设置了标题或写入了一些内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-22T13:07:09.673

[按规定](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html#sendError%28int,%20java.lang.String%29)工作：

> 使用指定状态向客户端发送错误响应并清除缓冲区。服务器默认创建响应，使其看起来像包含指定消息的 HTML 格式的服务器错误页面，将内容类型设置为“text/html”。

```
HttpServletResponse.sendError(int) 
```

另一方面，没有此限制/功能。

> 使用指定的状态码并清除缓冲区向客户端发送错误响应。

这意味着：设置内容类型，写入缓冲区，调用`sendError(400)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-17T21:26:13.607

不要调用 response.sendError(int)，而是使用 response.setStatus(int)。

# ninject - 无论如何获取实例注入的类名（使用ninject）？

> ID：14459046
> 
> 赞同：2
> 
> 时间：2013-01-22T12:54:12.123
> 
> 标签：ninject

我将我的依赖项注入到我的类中很好，但我想知道是否有可能获得我要注入的类名？

例如：

```
Bind<ISomething>.ToMethod(c => new Something([GIVE INJECTING *TO* CLASS NAME])); 
```

所以，如果我有：

```
public class Blah{
  public Blah(ISomething something) { /**/ }
} 
```

当注入 Ninject 时会调用：

```
new Blah(new Something("Blah")); 
```

这可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T13:03:49.747

是的，这是可以做到的。您可以使用方法中`IContext`给出的`ToMethod`方法来获取要注入的类型的名称，如下所示：

```
Bind<ISomething>().ToMethod(c => new Something(GetParentTypeName(c))); 
```

它使用了这个小助手方法（也可以变成一个很好的扩展方法）：

```
private string GetParentTypeName(IContext context)
{
    return context.Request.ParentRequest.ParentRequest.Target.Member.DeclaringType.Name;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-21T09:23:46.497

它可能在 Ninject 的更高版本中发生了变化。至于 v3.2.0 版本，接受的解决方案对我不起作用。

以下内容虽然：

```
Bind<ISomething>().ToMethod((ctx) 
       => new Something(ctx.Request.Target?.Member?.DeclaringType?.Name ?? "")); 
```

# android - Google Analytics - 使用多个自定义维度值跟踪视图

> ID：14459048
> 
> 赞同：2
> 
> 时间：2013-01-22T12:54:13.737
> 
> 标签：android, google-analytics, google-analytics-api

我正在尝试向我的 Google Analytics（分析）报告中添加有关我的 Android 应用程序使用情况的更多数据。

我从昨天开始使用自定义维度，但还没有得到任何结果，我想确保我做得对。

我想将页面视图与要发送的其他信息联系起来，这就是我使用自定义维度的原因。在特定活动的 onCreate 方法中，我正在执行此操作 -

```
 Tracker tracker = EasyTracker.getTracker();

            tracker.setCustomDimension(1, 128));
            tracker.setCustomDimension(2, 2));
            tracker.setCustomDimension(3, 45));
            EasyTracker.getTracker().trackView(); 
```

我已将我的自定义报告设置为按屏幕视图指标和上面的维度 ID 之一工作。

所有这些数据都会与 trackView 命令一起发送吗？因为我仍然看不到昨天的任何数据。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:37:51.080

有用。这次我需要等待大约 2 天才能显示数据。

现在我需要弄清楚如何同时显示所有这些维度的数据，但我想这适合另一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:46:24.753

I don't have any experience with GA tracking using the android sdk api but I did find [this page](https://developers.google.com/analytics/devguides/collection/android/v2/customdimsmets) in the GA documentation. In the code examples they use the following as the trigger:

`tracker.sendView();`

# java - 错误：不存在这样的表 SQLite

> ID：14459056
> 
> 赞同：-1
> 
> 时间：2013-01-22T12:54:40.707
> 
> 标签：java, android, database, sqlite

我有一个带有两个表的 SQLite 数据库，一个用于保存登录信息，例如电子邮件地址和密码，另一个用于保存用户的 GPS 坐标。我在 DBadapter 类“DatabaseHandler.class”的 OnCreate 方法中创建了两个表。登录表工作正常，但坐标表不能。当我尝试访问并在其上运行命令时，程序会抛出“不存在这样的表”。

*日志猫*

```
01-22 12:42:06.769: E/AndroidRuntime(854): FATAL EXCEPTION: main
01-22 12:42:06.769: E/AndroidRuntime(854): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.androidbasic12/com.example.androidbasic12.map}: android.database.sqlite.SQLiteException: no such table: coord (code 1): , while compiling: SELECT * FROM coord WHERE name = name
01-22 12:42:06.769: E/AndroidRuntime(854):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-22 12:42:06.769: E/AndroidRuntime(854):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-22 12:42:06.769: E/AndroidRuntime(854):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-22 12:42:06.769: E/AndroidRuntime(854):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-22 12:42:06.769: E/AndroidRuntime(854):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-22 12:42:06.769: E/AndroidRuntime(854):  at android.os.Looper.loop(Looper.java:137)
01-22 12:42:06.769: E/AndroidRuntime(854):  at android.app.ActivityThread.main(ActivityThread.java:5039)
01-22 12:42:06.769: E/AndroidRuntime(854):  at java.lang.reflect.Method.invokeNative(Native Method)
01-22 12:42:06.769: E/AndroidRuntime(854):  at java.lang.reflect.Method.invoke(Method.java:511)
01-22 12:42:06.769: E/AndroidRuntime(854):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-22 12:42:06.769: E/AndroidRuntime(854):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-22 12:42:06.769: E/AndroidRuntime(854):  at dalvik.system.NativeStart.main(Native Method)
01-22 12:42:06.769: E/AndroidRuntime(854): Caused by: android.database.sqlite.SQLiteException: no such table: coord (code 1): , while compiling: SELECT * FROM coord WHERE name = name
01-22 12:42:06.769: E/AndroidRuntime(854):  at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
01-22 12:42:06.769: E/AndroidRuntime(854):  at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
01-22 12:42:06.769: E/AndroidRuntime(854):  at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
01-22 12:42:06.769: E/AndroidRuntime(854):  at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
01-22 12:42:06.769: E/AndroidRuntime(854):  at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
01-22 12:42:06.769: E/AndroidRuntime(854):  at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:37)
01-22 12:42:06.769: E/AndroidRuntime(854):  at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:44)
01-22 12:42:06.769: E/AndroidRuntime(854):  at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1314)
01-22 12:42:06.769: E/AndroidRuntime(854):  at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1253)
01-22 12:42:06.769: E/AndroidRuntime(854):  at com.example.androidbasic12.library.DatabaseHandler.getLatLng(DatabaseHandler.java:155)
01-22 12:42:06.769: E/AndroidRuntime(854):  at com.example.androidbasic12.library.UserFunctions.getCoords(UserFunctions.java:124)
01-22 12:42:06.769: E/AndroidRuntime(854):  at com.example.androidbasic12.map.onCreate(map.java:56)
01-22 12:42:06.769: E/AndroidRuntime(854):  at android.app.Activity.performCreate(Activity.java:5104)
01-22 12:42:06.769: E/AndroidRuntime(854):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-22 12:42:06.769: E/AndroidRuntime(854):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-22 12:42:06.769: E/AndroidRuntime(854):  ... 11 more 
```

*DatabaseHandler.class*

```
public class DatabaseHandler extends SQLiteOpenHelper {

// All Static variables
// Database Version
private static final int DATABASE_VERSION = 1;

// Database Name
private static final String DATABASE_NAME = "android_api";

//Carcoord table name
private static final String TABLE_CARCOORD = "coord";
// carcoord table columns names
private static final String CAR_KEY_ID = "id";
private static final String CAR_KEY_NAME = "name";
private static final String CAR_KEY_LAT = "lat";
private static final String CAR_KEY_LNG = "lng";

// Login table name
private static final String TABLE_LOGIN = "login";
// Login Table Columns names
private static final String KEY_ID = "id";
private static final String KEY_NAME = "name";
private static final String KEY_EMAIL = "email";
private static final String KEY_UID = "uid";
private static final String KEY_CREATED_AT = "created_at";

//Strings that handles create table querys
private static final String CREATE_LOGIN_TABLE = "CREATE TABLE " + TABLE_LOGIN + "("
        + KEY_ID + " INTEGER PRIMARY KEY," 
        + KEY_NAME + " TEXT,"
        + KEY_EMAIL + " TEXT UNIQUE,"
        + KEY_UID + " TEXT,"
        + KEY_CREATED_AT + " TEXT" + ")";
private static final String CREATE_CARCOORD_TABLE = "CREATE TABLE " + TABLE_CARCOORD + "("
        + CAR_KEY_ID + " INTEGER PRIMARY KEY,"
        + CAR_KEY_NAME + " TEXT,"
        + CAR_KEY_LAT + " TEXT,"
        + CAR_KEY_LNG + " TEXT" + ")";

//Constructor
public DatabaseHandler(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

// Creating Tables
@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL(CREATE_LOGIN_TABLE);
    db.execSQL(CREATE_CARCOORD_TABLE);

}

// Upgrading database
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // Drop older table if existed
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_LOGIN);
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_CARCOORD);

    // Create tables again
    onCreate(db);
}

/**
 * Store coordinates in TABLEE_COORDS
 */
public void addCoord(String name, String lat, String lng){
    SQLiteDatabase db = this.getWritableDatabase();
    ContentValues values = new ContentValues();
    values.put(KEY_NAME, name); // Name
    values.put(CAR_KEY_LAT, lat); // latitude
    values.put(CAR_KEY_LNG, lng); //Longitude

    // Inserting row
    db.insert(TABLE_CARCOORD, null, values);
    db.close(); // Closing writable database connection
}

/**
 * Storing user details in database
 * */
public void addUser(String name, String email, String uid, String created_at) {
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_NAME, name); // Name
    values.put(KEY_EMAIL, email); // Email
    values.put(KEY_UID, uid); // Email
    values.put(KEY_CREATED_AT, created_at); // Created At

    // Inserting Row
    db.insert(TABLE_LOGIN, null, values);
    db.close(); // Closing database connection
}

/**
 * Getting user data from database
 * */
public HashMap<String, String> getUserDetails(){
    HashMap<String,String> user = new HashMap<String,String>();
    String selectQuery = "SELECT  * FROM " + TABLE_LOGIN;

    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);
    // Move to first row
    cursor.moveToFirst();
    if(cursor.getCount() > 0){
        user.put("name", cursor.getString(1));
        user.put("email", cursor.getString(2));
        user.put("uid", cursor.getString(3));
        user.put("created_at", cursor.getString(4));
    }
    cursor.close();
    db.close();
    // return user
    return user;
}

/**
 * Getting user login status
 * return true if rows are there in table
 * */
public int getRowCount() {
    String countQuery = "SELECT  * FROM " + TABLE_LOGIN;
    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(countQuery, null);
    int rowCount = cursor.getCount();
    db.close();
    cursor.close();
    // return row count
    return rowCount;
    }
public Cursor getUsername(){
    SQLiteDatabase db = this.getReadableDatabase();
    String query = ("SELECT * FROM " + TABLE_LOGIN + " WHERE name = " + KEY_NAME);
    Cursor cursor = db.rawQuery(query, null);
    return cursor;
}

public Cursor getLatLng(){
    SQLiteDatabase db = this.getReadableDatabase();
    String query = ("SELECT * FROM " + TABLE_CARCOORD + " WHERE name = " + CAR_KEY_NAME);
    Cursor cursor = db.rawQuery(query, null);
    return cursor;

}

/**
 * reset table TABLE_CARCOORD
 */
public void resetCarcoord(){
    SQLiteDatabase db = this.getWritableDatabase();
    db.delete(TABLE_CARCOORD, null, null);
    db.close();
}
/**
 * Re create database
 * Delete all tables and create them again
 * */
public void resetTables(){
    SQLiteDatabase db = this.getWritableDatabase();
    // Delete All Rows
    db.delete(TABLE_LOGIN, null, null);
    db.close();
} 
```

}

*来自 UserFunctions.class 的代码片段，我在其中使用表“coord”。*

```
 /**
 * Get lat and lng from TABLE_CARCOORDS
 */
public ArrayList<String> getCoords(Context context, String lat, String lng) {
    DatabaseHandler db = new DatabaseHandler(context);
    Cursor cursor = db.getLatLng();
    ArrayList<String> cordarr = new ArrayList<String>();
    if (cursor.moveToFirst()){
        lat = cursor.getString(cursor.getColumnIndex("lat"));
        lng = cursor.getString(cursor.getColumnIndex("lng"));
        cordarr.add(lat);
        cordarr.add(lng);
    }
cursor.close();
db.close();
return cordarr;
} 
```

**修复后的 LogCats**

*第一个问题*

```
01-22 14:15:07.080: E/SQLiteDatabase(20980): close() was never explicitly called on database '/data/data/com.example.androidbasic12/databases/android_api' 
01-22 14:15:07.080: E/SQLiteDatabase(20980): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
01-22 14:15:07.080: E/SQLiteDatabase(20980):    at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:2072)
01-22 14:15:07.080: E/SQLiteDatabase(20980):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1126)
01-22 14:15:07.080: E/SQLiteDatabase(20980):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1083)
01-22 14:15:07.080: E/SQLiteDatabase(20980):    at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:1170)
01-22 14:15:07.080: E/SQLiteDatabase(20980):    at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:844)
01-22 14:15:07.080: E/SQLiteDatabase(20980):    at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:228)
01-22 14:15:07.080: E/SQLiteDatabase(20980):    at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:157)
01-22 14:15:07.080: E/SQLiteDatabase(20980):    at android.database.sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java:231)
01-22 14:15:07.080: E/SQLiteDatabase(20980):    at com.example.androidbasic12.library.DatabaseHandler.getUsername(DatabaseHandler.java:146)
01-22 14:15:07.080: E/SQLiteDatabase(20980):    at com.example.androidbasic12.library.UserFunctions.getUname(UserFunctions.java:87)
01-22 14:15:07.080: E/SQLiteDatabase(20980):    at com.example.androidbasic12.DashboardActivity.onCreate(DashboardActivity.java:59)
01-22 14:15:07.080: E/SQLiteDatabase(20980):    at android.app.Activity.performCreate(Activity.java:4470)
01-22 14:15:07.080: E/SQLiteDatabase(20980):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
01-22 14:15:07.080: E/SQLiteDatabase(20980):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
01-22 14:15:07.080: E/SQLiteDatabase(20980):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
01-22 14:15:07.080: E/SQLiteDatabase(20980):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
01-22 14:15:07.080: E/SQLiteDatabase(20980):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
01-22 14:15:07.080: E/SQLiteDatabase(20980):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-22 14:15:07.080: E/SQLiteDatabase(20980):    at android.os.Looper.loop(Looper.java:137)
01-22 14:15:07.080: E/SQLiteDatabase(20980):    at android.app.ActivityThread.main(ActivityThread.java:4511)
01-22 14:15:07.080: E/SQLiteDatabase(20980):    at java.lang.reflect.Method.invokeNative(Native Method)
01-22 14:15:07.080: E/SQLiteDatabase(20980):    at java.lang.reflect.Method.invoke(Method.java:511)
01-22 14:15:07.080: E/SQLiteDatabase(20980):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
01-22 14:15:07.080: E/SQLiteDatabase(20980):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
01-22 14:15:07.080: E/SQLiteDatabase(20980):    at dalvik.system.NativeStart.main(Native Method)
01-22 14:15:07.080: E/System(20980): Uncaught exception thrown by finalizer
01-22 14:15:07.085: E/System(20980): java.lang.IllegalStateException: Don't have database lock!
01-22 14:15:07.085: E/System(20980):    at android.database.sqlite.SQLiteDatabase.verifyLockOwner(SQLiteDatabase.java:2230)
01-22 14:15:07.085: E/System(20980):    at android.database.sqlite.SQLiteDatabase$1.entryRemoved(SQLiteDatabase.java:2322)
01-22 14:15:07.085: E/System(20980):    at android.database.sqlite.SQLiteDatabase$1.entryRemoved(SQLiteDatabase.java:2318)
01-22 14:15:07.085: E/System(20980):    at android.util.LruCache.trimToSize(LruCache.java:197)
01-22 14:15:07.085: E/System(20980):    at android.util.LruCache.evictAll(LruCache.java:285)
01-22 14:15:07.085: E/System(20980):    at android.database.sqlite.SQLiteDatabase.deallocCachedSqlStatements(SQLiteDatabase.java:2283)
01-22 14:15:07.085: E/System(20980):    at android.database.sqlite.SQLiteDatabase.closeClosable(SQLiteDatabase.java:1255)
01-22 14:15:07.085: E/System(20980):    at android.database.sqlite.SQLiteDatabase.finalize(SQLiteDatabase.java:2043)
01-22 14:15:07.085: E/System(20980):    at java.lang.Daemons$FinalizerDaemon.doFinalize(Daemons.java:185)
01-22 14:15:07.085: E/System(20980):    at java.lang.Daemons$FinalizerDaemon.run(Daemons.java:168)
01-22 14:15:07.085: E/System(20980):    at java.lang.Thread.run(Thread.java:856) 
```

*第二个错误*

```
01-22 14:15:07.435: E/AndroidRuntime(20980): FATAL EXCEPTION: main
01-22 14:15:07.435: E/AndroidRuntime(20980): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.androidbasic12/com.example.androidbasic12.map}: java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
01-22 14:15:07.435: E/AndroidRuntime(20980):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
01-22 14:15:07.435: E/AndroidRuntime(20980):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
01-22 14:15:07.435: E/AndroidRuntime(20980):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
01-22 14:15:07.435: E/AndroidRuntime(20980):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
01-22 14:15:07.435: E/AndroidRuntime(20980):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-22 14:15:07.435: E/AndroidRuntime(20980):    at android.os.Looper.loop(Looper.java:137)
01-22 14:15:07.435: E/AndroidRuntime(20980):    at android.app.ActivityThread.main(ActivityThread.java:4511)
01-22 14:15:07.435: E/AndroidRuntime(20980):    at java.lang.reflect.Method.invokeNative(Native Method)
01-22 14:15:07.435: E/AndroidRuntime(20980):    at java.lang.reflect.Method.invoke(Method.java:511)
01-22 14:15:07.435: E/AndroidRuntime(20980):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
01-22 14:15:07.435: E/AndroidRuntime(20980):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
01-22 14:15:07.435: E/AndroidRuntime(20980):    at dalvik.system.NativeStart.main(Native Method)
01-22 14:15:07.435: E/AndroidRuntime(20980): Caused by: java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
01-22 14:15:07.435: E/AndroidRuntime(20980):    at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
01-22 14:15:07.435: E/AndroidRuntime(20980):    at java.util.ArrayList.get(ArrayList.java:304)
01-22 14:15:07.435: E/AndroidRuntime(20980):    at com.example.androidbasic12.map.onCreate(map.java:57)
01-22 14:15:07.435: E/AndroidRuntime(20980):    at android.app.Activity.performCreate(Activity.java:4470)
01-22 14:15:07.435: E/AndroidRuntime(20980):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
01-22 14:15:07.435: E/AndroidRuntime(20980):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
01-22 14:15:07.435: E/AndroidRuntime(20980):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:59:49.453

您是否在仅开始时添加了以下语句 `db.execSQL(CREATE_CARCOORD_TABLE);`（我的意思是两个表一起），或者您稍后在创建数据库后添加它。

我会建议您**从手机/模拟器中完全删除/卸载该应用程序。并再次安装它**，看看它在 execSQL 方法调用上说了什么。我认为如果您是上述情况，它可能应该有效。

> > 这里的原因是在未创建数据库时调用一次 onCreate，因此如果在创建数据库时调用一次，稍后如果您添加另一个表，则不会调用 onCreate，因此不会创建添加的表。所以这里的解决方案是完全删除应用程序并再次安装它，所以 onCreate 现在会调用。或者增加我们的数据库版本并做一些处理。

# oracle - oracle中的查询导致CPU使用率高

> ID：14459057
> 
> 赞同：2
> 
> 时间：2013-01-22T12:54:47.170
> 
> 标签：oracle, unix, oracle11g, cpu-usage, sunos

我有一个这样的查询...

```
SELECT cust_num, year,credit_cust FROM
(SELECT cust_num, year,credit_cust,
ROW_NUMBER () OVER(PARTITION BY cust_num, year ORDER BY credit_cust DESC) rnk
FROM credit_cust PARTITION (YEAR_2010)
)
WHERE rnk=1 
```

执行此查询时，托管数据库的服务器的 CPU 使用率至少增加 35%。当 CPU 使用率有时会达到 100% 时，这确实涉及服务器负载高的情况。

**要求：**

数据如下...

```
Cust_num  Year    Credit_cust
  456     2010       Y
  456     2010       N
  456     2009       N
  456     2009       N 
```

我希望查询只返回下面给出的记录......

```
Cust_num  Year    Credit_cust
  456     2010       Y
  456     2009       N 
```

**注意：**我使用 ROW_NUMBER() 作为 GROUP BY 子句的解决方法。如前所述，我认为它只是导致 CPU 使用率高的 GROUP BY 子句

**备用查询：**（CPU 使用率也超过 35%）

```
SELECT   cust_num, YEAR, MAX (credit_cust)
    FROM credit_cust PARTITION (year_2010)
GROUP BY cust_num, YEAR

Server : Sun OS 5.10
Database : Oracle 11g (11.2.0.2.0 -64bit) 
```

表结构`credit_cust`如下...

```
CREATE TABLE CREDIT_CUST
(
  CUST_NUM          NUMBER,
  YEAR     NUMBER,
  CREDIT_CUST  CHAR(1)
)
TABLESPACE PARTITION_01
PARTITION BY RANGE (YEAR) 
SUBPARTITION BY HASH (CUST_NUM)
(  
  PARTITION YEAR_2009 VALUES LESS THAN (2010)
    SUBPARTITIONS 16 STORE IN (PARTITION_01,PARTITION_02,PARTITION_03,PARTITION_04,PARTITION_05,PARTITION_06,
                               PARTITION_01,PARTITION_02,PARTITION_03,PARTITION_04,PARTITION_05,PARTITION_06,
                               PARTITION_01,PARTITION_02,PARTITION_03,PARTITION_04),  
  PARTITION YEAR_2010 VALUES LESS THAN (2011)
    SUBPARTITIONS 1 STORE IN (PARTITION_01))
PARALLEL ( DEGREE 16 INSTANCES 1 ); 
```

请告诉我为什么会出现这个问题。让我知道是否需要更多详细信息。

**解释计划：**

```
PLAN_TABLE_OUTPUT

Plan hash value: 3927595547

----------------------------------------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                      | Name                           | Rows  | Bytes |TempSpc| Cost (%CPU)| Time     | Pstart| Pstop |    TQ  |IN-OUT| PQ Distrib |
----------------------------------------------------------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT               |                                |    29M|  1179M|       |  3937   (3)| 00:00:01 |       |       |        |      |            |
|   1 |  PX COORDINATOR                |                                |       |       |       |            |          |       |       |        |      |            |
|   2 |   PX SEND QC (RANDOM)          | :TQ10001                       |    29M|  1179M|       |  3937   (3)| 00:00:01 |       |       |  Q1,01 | P->S | QC (RAND)  |
|*  3 |    VIEW                        |                                |    29M|  1179M|       |  3937   (3)| 00:00:01 |       |       |  Q1,01 | PCWP |            |
|*  4 |     WINDOW SORT PUSHED RANK    |                                |    29M|   364M|   674M|  3937   (3)| 00:00:01 |       |       |  Q1,01 | PCWP |            |
|   5 |      PX RECEIVE                |                                |    29M|   364M|       |  3937   (3)| 00:00:01 |       |       |  Q1,01 | PCWP |            |
|   6 |       PX SEND HASH             | :TQ10000                       |    29M|   364M|       |  3937   (3)| 00:00:01 |       |       |  Q1,00 | P->P | HASH       |
|*  7 |        WINDOW CHILD PUSHED RANK|                                |    29M|   364M|       |  3937   (3)| 00:00:01 |       |       |  Q1,00 | PCWP |            |
|   8 |         PX BLOCK ITERATOR      |                                |    29M|   364M|       |    34   (3)| 00:00:01 |     1 |     1 |  Q1,00 | PCWC |            |
|*  9 |          TABLE ACCESS FULL     | CREDIT_CUST                    |    29M|   364M|       |    34   (3)| 00:00:01 |   228 |   228 |  Q1,00 | PCWP |            |
----------------------------------------------------------------------------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   3 - filter("RNK"=1)
   4 - filter(ROW_NUMBER() OVER ( PARTITION BY "CUST_NUM","YEAR" ORDER BY INTERNAL_FUNCTION("CREDIT_CUST") DESC )<=1)
   7 - filter(ROW_NUMBER() OVER ( PARTITION BY "CUST_NUM","YEAR" ORDER BY INTERNAL_FUNCTION("CREDIT_CUST") DESC )<=1)
   9 - filter("YEAR"=2010)

Note
-----
   - dynamic sampling used for this statement (level=5) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T06:06:03.530

由于并行性，此查询使用大量 CPU。该表设置为`DEGREE 16`。默认情况下，您的查询将使用 16 或 32 个并行服务器，具体取决于它们是否正在排序。

分区选项和查询执行计划在这里没有直接关系。即使它们不正确，“坏”查询通常也不会每秒消耗大量资源。

有许多可能的解决方案，具体取决于您要禁用并行性的级别。以下是一些常见的解决方案：

1.  **声明级别**：`/*+ no_parallel(credit_cust) */`
2.  **会话级别**：`alter session disable parallel query;`
3.  **对象级别**：`alter table cust parallel 1;`
4.  **系统级**：`alter system set parallel_max_servers = 0;`

但是在你改变任何东西之前要仔细考虑。如果使用不当，其中一些解决方案可能是灾难性的。您需要很好地了解并行性、系统资源以及系统的使用方式。像往常一样，一个好的起点是[手册](http://docs.oracle.com/cd/E11882_01/server.112/e25523/parallel002.htm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:19:59.660

我有两个建议：

1.  正确分区表。您有一个分区子分区和另一个不分区（单个子分区）。一个分区中的年数并不明显。我将按年使用年度分区，并按 cust 上的哈希使用子分区（每个分区 8 或 16 个子分区。如果表很大并且您有很多处理器，则为 16。）

2.  您的查询将返回 2007 年、2008 年、2009 年、2010 年客户的结果。您确定要四年吗？如果你只想要 2010，你应该`year = 2010`在`where`子句中指定，并且不需要在 analitic 函数中按年份分区，这有助于排序（消耗 CPU 和 TEMP 空间）。

查询就像：

```
SELECT cust_num, year,credit_cust 
FROM
  (SELECT cust_num, year,credit_cust,
   ROW_NUMBER () OVER(PARTITION BY cust_num ORDER BY credit_cust DESC) rnk
   FROM credit_cust
   WHERE YEAR=2010
   )
WHERE rnk=1; 
```

*一般来说，最好选择带有 where 子句的分区而不是指定分区名称（也更容易）*

# tfs - 以编程方式获取 TFS 团队项目的 WebAccess 的 URL

> ID：14459059
> 
> 赞同：4
> 
> 时间：2013-01-22T12:54:50.037
> 
> 标签：tfs, tfs-sdk

我想获取特定 TeamProject 的 Web 访问页面的 URL。

我使用调用 GetHomeUrl(new Uri("MyprojectName")) 的 TswaClientHyperlinkService 对象找到了一些示例，但我无法为此提供正确的 Uri 值。也许我不明白如何格式化参数..

我知道如何获取 web 访问的基本 url，但我想访问特定团队项目集合中特定团队项目的页面。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T14:54:03.103

事实证明，该`GetHomeUrl`方法需要一个`vsts://`url，而不是您通常使用的项目集合的 url。以下代码可用于获取 Uri：

```
 var server = TfsConfigurationServerFactory.GetConfigurationServer(new Uri("http://localhost:8080/tfs" /* your tfs uri here */));
 server.Authenticate();

 var service = server.GetService<TswaClientHyperlinkService>();
 var projectCollection = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(new Uri("http://localhost:8080/tfs/DefaultCollection"));
 var cssService = projectCollection.GetService<ICommonStructureService3>();
 var project = cssService.GetProjectFromName(/*YourProjectNameHere*/);

 var home = service.GetHomeUrl(new Uri(project.Uri)); 
```

# ios - 当用户从 uitableview 选择到 nsuserdefaults 时如何保存多个项目？

> ID：14459063
> 
> 赞同：0
> 
> 时间：2013-01-22T12:55:08.727
> 
> 标签：ios, objective-c, uitableview, nsuserdefaults

当用户从 uitableview 选择到 nsuserdefaults 时，我正在尝试保存任何项目。此时仅保存最近的选择。我希望用户能够选择他们想要的任何行，然后保存到 nsuserdefaults，然后在应用程序的任何位置使用该信息。

谢谢你的帮助

这是我的代码：

```
 - (void)viewDidLoad
{
    [super viewDidLoad];

    // categories array
    listOfCategories = [[NSMutableArray alloc] init];

    [listOfCategories addObject:@"Food & Drinks"];
    [listOfCategories addObject:@"Beauty & Wellness"];
    [listOfCategories addObject:@"Sports & Fun Activities"];
    [listOfCategories addObject:@"Labor & Services"];
    [listOfCategories addObject:@"Clothes & Accessories"];
    [listOfCategories addObject:@"Education & Training"];
    [listOfCategories addObject:@"Products"];

    // add label
    UIView *viewForHeader = [[UIView alloc] initWithFrame:CGRectMake(0,0,320,40)];
    UILabel *categoryLabel = [[UILabel alloc] initWithFrame:CGRectMake(10,0,80,30)];
    categoryLabel.text = @"Select all:";

    [categoryLabel setFont:[UIFont fontWithName: @"Asap-Bold" size: 14.0f]];
    categoryLabel.textColor = [UIColor lightGrayColor];

    // add switch
    onoff = [[UISwitch alloc] initWithFrame: CGRectMake(100.0f, 0.0f, 100.0f, 0.0f)];
    [onoff addTarget: self action: @selector(flipSwitch:) forControlEvents:UIControlEventValueChanged];

    [viewForHeader addSubview:onoff];

    [viewForHeader addSubview:categoryLabel];
    self.tableView.tableHeaderView = viewForHeader;

}

// uiswitch button
- (IBAction) flipSwitch: (id) sender {
    onoff = (UISwitch *) sender;
    NSLog(@"%@", onoff.on ? @"On" : @"Off");

    if (onoff.on) {
        for (NSInteger s = 0; s < self.tableView.numberOfSections; s++) {
            for (NSInteger r = 0; r < [self.tableView numberOfRowsInSection:s]; r++) {
                [self.tableView selectRowAtIndexPath:[NSIndexPath indexPathForRow:r inSection:s]
                                            animated:NO
                                      scrollPosition:UITableViewScrollPositionNone];
            }
        }
    }
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    // Return the number of rows in the section.
    return [listOfCategories count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
    }        // Configure the cell...

    NSString *cellValue = [listOfCategories objectAtIndex:indexPath.row];
    cell.textLabel.text = cellValue;

    [cell.textLabel setFont:[UIFont fontWithName: @"Asap-Bold" size: 14.0f]];

    return cell;
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    int index = indexPath.row; id obj = [listOfCategories objectAtIndex:index];

    //This toggles the checkmark
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

    if (cell.accessoryType == UITableViewCellAccessoryNone)
    {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;

        UIImage *image = [UIImage imageNamed:@"icon-tick.png"];

        UIButton *downloadButton = [UIButton buttonWithType:UIButtonTypeCustom];

        [downloadButton setImage:image forState:UIControlStateNormal];
        [downloadButton setFrame:CGRectMake(0, 0, 19, 19)];
        [downloadButton setBackgroundColor:[UIColor clearColor]];
        [tableView cellForRowAtIndexPath:indexPath].accessoryView = downloadButton;

        cell.selectionStyle = UITableViewCellSelectionStyleNone;

        //This sets the array

    } else
    {
        cell.accessoryType = UITableViewCellAccessoryNone;

        UIButton *downloadButton = [UIButton buttonWithType:UIButtonTypeCustom];
        [downloadButton setTitle:@"" forState:UIControlStateNormal];
        [downloadButton setFrame:CGRectMake(0, 0, 0, 0)];
        [tableView cellForRowAtIndexPath:indexPath].accessoryView = downloadButton;

    }

    // Save text of the selected cell:
    UITableViewCell *cellSelected = [tableView cellForRowAtIndexPath:indexPath];

    if ([cellSelected.textLabel.text isEqualToString:@"Food & Drinks"]) {
        NSString *valueToSave = cellSelected.textLabel.text;
        [[NSUserDefaults standardUserDefaults]
         setObject:valueToSave forKey:@"preferenceName"];

    }

    NSString *valueToSave = cellSelected.textLabel.text;
    [[NSUserDefaults standardUserDefaults]
     setObject:valueToSave forKey:@"preferenceName"];

    NSString *savedValue = [[NSUserDefaults standardUserDefaults]
                            stringForKey:@"preferenceName"];

    NSLog(@"savedValue %@", savedValue);

    NSMutableData *data = [NSMutableData data];
    NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];
    // Customize archiver here
    [archiver encodeObject:obj forKey:@"keyForYourArrayOfNSIndexPathObjects"];
    [archiver finishEncoding];
    [[NSUserDefaults standardUserDefaults] setObject:data forKey:@"keyForYourArrayOfNSIndexPathObjects"];

    NSKeyedUnarchiver *unarchiver;
    unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:
                  [[NSUserDefaults standardUserDefaults] objectForKey:@"keyForYourArrayOfNSIndexPathObjects"]];
    // Customize unarchiver here
    categoryItemSelected = [unarchiver decodeObjectForKey:@"keyForYourArrayOfNSIndexPathObjects"];
    [unarchiver finishDecoding];

    NSLog(@"list of categories selected %@", categoryItemSelected);

}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:15:39.230

问题是因为您覆盖了以前保存的数据。所以首先你需要加载保存的数据：

```
NSKeyedUnarchiver *unarchiver;
unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:
              [[NSUserDefaults standardUserDefaults] objectForKey:@"keyForYourArrayOfNSIndexPathObjects"]];
// Customize unarchiver here
categoryItemSelected = [unarchiver decodeObjectForKey:@"keyForYourArrayOfNSIndexPathObjects"];
[unarchiver finishDecoding];
if (categoryItemSelected == nil) {
    //If it isn't been created - then create new array
} 
```

然后添加新对象：

```
[categoryItemSelected addObject: obj]; 
```

然后将其保存回 UserDefautls

# objective-c - 山狮中没有调用键盘事件

> ID：14459068
> 
> 赞同：1
> 
> 时间：2013-01-22T12:55:30.597
> 
> 标签：objective-c, macos, nsevent

我想在我的应用程序中接收任何键盘事件的通知，applitionDidFinishLaunching 方法中的以下代码在 lion 上运行良好，但在山狮上没有被调用。

```
 [NSEvent addGlobalMonitorForEventsMatchingMask:NSKeyDownMask handler:^(NSEvent *event) {

NSLog(@"key pressed");        
    }]; 
```

我收到鼠标移动事件，但不适用于键盘事件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T07:47:53.713

如果要全局接收按键事件，则必须在 mac 中设置以下设置：

**System Preferences** ---> **Accessibility** --> 并检查**Enable access for assistant devices** (atleast for keyboard)

那么您的系统可以在全球范围内接收按键事件。

# c# - 在类方法中创建和返回对象的副本

> ID：14459070
> 
> 赞同：0
> 
> 时间：2013-01-22T12:55:45.933
> 
> 标签：c#

我有一门课叫电影。Movie 有一个movieYear 字符串属性和movieYearInt int 属性。我想要一个类方法，我可以在其中发送电影对象并取回一个对象，该对象已获取movieYear字符串属性并将其值复制到movieYearInt。稍后我将转换对象的更多属性。

这是电影课

```
 public class movie
{
    public string movieName { get; set; }
    public string movieYear { get; set; }
    public int movieYearInt { get; set; }

    public movie convertFilm(movie m)
    {
        m.movieYearInt = int.Parse(m.movieYear);
        return m;
    }
} 
```

这就是我想以我的形式检索对象的方式

```
movie m = new movie();
m.movieYear = cmbMovieYear.ToString();  
movie newMovie = m.convertFilm(m); 
```

我得到的错误是：输入字符串的格式不正确我做错了什么？

编辑-这是电影年组合框

```
List<int> allYears = new List<int>();
allYears.AddRange(Enumerable.Range(1900, 113));
cmbMovieYear.DataSource = allYears; 
```

编辑-

```
m.movieYear = cmbMovieYear.SelectedItem.ToString(); 
```

这就是解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:05:05.370

您是否考虑过将movieYearInt 属性的getter 修改为类似的东西，而不是返回转换后的对象？

```
 public int movieYearInt 
  {
    get
    {
      // add some validation, and consider using System.Int32.TryParse
      return System.Int32.Parse(movieYear);
    }      
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:15:40.160

```
public class movie: ICloneable
{
    public string movieName { get; set; }
    public string movieYear { get; set; }
    public int movieYearInt { get { return int.Parse(movieYear) set {movieYear = value.ToString()}}

    public object Clone()
    {
        return new movie() {movieName = this.movieName, movieYear = this.movieYear};
    }
}

var m = new movie();
m.movieYear = "2001";
var newMovie = (movie) m.Clone(); 
```

# mysql - mysql bigint(250) 是否矫枉过正/最大字段大小

> ID：14459071
> 
> 赞同：0
> 
> 时间：2013-01-22T12:55:50.473
> 
> 标签：mysql

我正在尝试提高我的一位客户的数据库性能。许多表都有 bigint(250)。我在 MySql 文档中读到 bigint 最大为 8 位/字节。我不明白为什么在最大值为 8 时可能有一个 bigint(250)？

同样对于 INT 字段，一些字段具有 INT(25)，但 INT 最大为 8 位/字节。

我看到这个正确与否？

MySql 的大小大于字段大小是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:59:32.363

在处理 INT、BIGINT 等类型时，括号内的数字仅用于显示宽度，与 VARCHAR 不同，它也定义了存储大小。

如果显示宽度这么大，你可以放心地认为设计者只是发了疯，因为除非宽度小于最大值，否则它基本上是没有用的。

确定该字段是否已签名更为重要。将其定义为 BIGINT UNSIGNED 有效地使不应为负的字段（例如标识符）的范围加倍。

# url-rewriting - 启用 AngularJS 和 html5mode 的 Nginx 重写规则

> ID：14459074
> 
> 赞同：3
> 
> 时间：2013-01-22T12:56:00.620
> 
> 标签：url-rewriting, nginx, routing, rewrite, angularjs

到目前为止，我正在构建使用 nginx 服务的 AngularJS 应用程序。我在中间有导轨，我带来了`rewrite ^/(?!assets) / last;` 重写规则（重写所有以资产开头的东西），到目前为止它正在工作 - 使用导轨：

```
 server {
      listen 80;
      server_name ies.local;
      root /home/jk/Projects/ies12/webapp/public;   # <--- be sure to point to 'public'!
      passenger_enabled on;
      rails_env development;
      rewrite ^/(?!assets) / last;
    } 
```

但是到今天，我离开了rails，我需要扩展这个规则..

如果我做类似的事情

```
server {
  listen 80;
  server_name webapp.local;
  root /home/jk/Projects/webapp;
  rewrite_log on;

  rewrite ^/(?!angular) / last;
  rewrite ^/(?!angular-ui) / last;
} 
```

仅拥有 webapp/index.html 文件并获得：

```
*1 rewrite or internal redirection cycle while internally redirecting to 
"/index.html", client: 127.0.0.1, server: webapp.local, request: "GET / HTTP/1.1", host: "webapp.local" 
```

# javascript - 获取 JS 加载的 img 的宽/高

> ID：14459076
> 
> 赞同：0
> 
> 时间：2013-01-22T12:56:07.760
> 
> 标签：javascript, jquery

`img`当它被javascript替换时，我需要获取标签的宽度和高度。

我尝试使用 jQuery 的`width()`/`height()`但总是返回缓存图像的值，而不是新图像的值。

我需要它，因为我有一个函数可以根据加载的图像大小来缩放 div 的背景大小。

我在谷歌和这里搜索了很多，但找不到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:04:34.777

要获得图像的尺寸，请尝试以下操作：

```
var currentImage = $("img"); // get image element
var img = new Image();
img.onload = function() {
    var width = this.width;
    var height = this.height;
}
img.src = currentImage.attr('src'); 
```

# windows - 无法从 Windows 上的 /usr/local/ssl/openssl.cnf 加载配置信息

> ID：14459078
> 
> 赞同：198
> 
> 时间：2013-01-22T12:56:12.560
> 
> 标签：windows, openssl, public-key-encryption

在 Windows 上使用 OpenSSL 时：

`openssl genrsa -out privatekey.pem 1024 -->`

创建成功

```
openssl req -new -x509 -key privatekey.pem -out publickey.cer -days 365 
----> 
```

将错误消息显示为

> 无法从 /usr/local/ssl/openssl.cnf 加载配置信息

* * *

## 回答 #1

> 赞同：189
> 
> 时间：2013-12-09T04:12:09.893

安装 OpenSSL 后，我需要创建一个新的环境变量：

*   姓名：`OPENSSL_CONF`
*   价值：`C:\Program Files\OpenSSL\openssl.cnf`

在 powershell 中：

```
$env:OPENSSL_CONF = "${env:ProgramFiles}\OpenSSL\openssl.cnf" 
```

此值与以前的安装版本不同（如本文之前的编辑中所示）。另外，不要忘记将 openssl 二进制文件夹添加`${env:ProgramFiles}\OpenSSL`到您的路径中。

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2013-10-16T09:47:30.960

您应该指定配置的绝对路径，如下所示：

```
openssl req -x509 -config "C:\OpenSSL-Win64\bin\openssl.cnf" ... 
```

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2017-07-22T06:07:56.873

在 Windows 10 中，无需重新启动或以管理员模式运行，而是像这样设置 openssl 配置：

```
set OPENSSL_CONF=C:\Program Files (x86)\GnuWin32\share\openssl.cnf 
```

当然，如果你正在使用`GnuWin32`

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2017-04-26T09:54:17.953

在这种情况下，唯一对我有用的是自行**创建****的** *openssl.cnf* **文件**。

以下是本练习所需的基础知识（根据需要进行编辑）：

```
#
# OpenSSL configuration file.
#

# Establish working directory.

dir                         = .

[ ca ]
default_ca                  = CA_default

[ CA_default ]
serial                      = $dir/serial
database                    = $dir/certindex.txt
new_certs_dir               = $dir/certs
certificate                 = $dir/cacert.pem
private_key                 = $dir/private/cakey.pem
default_days                = 365
default_md                  = md5
preserve                    = no
email_in_dn                 = no
nameopt                     = default_ca
certopt                     = default_ca
policy                      = policy_match

[ policy_match ]
countryName                 = match
stateOrProvinceName         = match
organizationName            = match
organizationalUnitName      = optional
commonName                  = supplied
emailAddress                = optional

[ req ]
default_bits                = 1024          # Size of keys
default_keyfile             = key.pem       # name of generated keys
default_md                  = md5               # message digest algorithm
string_mask                 = nombstr       # permitted characters
distinguished_name          = req_distinguished_name
req_extensions              = v3_req

[ req_distinguished_name ]
# Variable name             Prompt string
#-------------------------    ----------------------------------
0.organizationName          = Organization Name (company)
organizationalUnitName      = Organizational Unit Name (department, division)
emailAddress                = Email Address
emailAddress_max            = 40
localityName                = Locality Name (city, district)
stateOrProvinceName         = State or Province Name (full name)
countryName                 = Country Name (2 letter code)
countryName_min             = 2
countryName_max             = 2
commonName                  = Common Name (hostname, IP, or your name)
commonName_max              = 64

# Default values for the above, for consistency and less typing.
# Variable name             Value
#------------------------     ------------------------------
0.organizationName_default  = My Company
localityName_default        = My Town
stateOrProvinceName_default = State or Providence
countryName_default         = US

[ v3_ca ]
basicConstraints            = CA:TRUE
subjectKeyIdentifier        = hash
authorityKeyIdentifier      = keyid:always,issuer:always

[ v3_req ]
basicConstraints            = CA:FALSE
subjectKeyIdentifier        = hash 
```

我希望这会有所帮助。

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2014-01-24T08:28:11.887

在 windows 中，[**类似场景**]

我遇到了同样的问题，但它是在请求证书签名请求期间。

我做了以下，它为我工作。

安装 OpenSSL 后，系统重启后以管理员身份运行命令提示符。

做了，1.[错误案例]

```
C:\OpenSSL-Win64\bin>openssl req -new -key server.key -out server.csr 
```

警告：无法打开配置文件：C:\OpenSSL-Win64\bin\openssl.cnf 并且无法从 C:\OpenSSL-Win64\bin\openssl.cnf 加载配置信息

2.[使用警告]

```
C:\OpenSSL-Win64\bin> openssl req -new -key server.key -out server.csr -config C:\OpenSSL-Win64\bin\openssl.cfg 
```

> [警告信息]：警告：无法打开配置文件：C:\OpenSSL-Win64\bin\openssl.cnf

但提示我输入 server.key 的[Pass Phrase](http://www.akadia.com/services/ssh_test_certificate.html)**它对**我有用。

我提到，这个[链接](http://www.akadia.com/services/ssh_test_certificate.html)为我提供帮助。

谢谢你。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2013-01-23T12:26:31.023

安装 OpenSSL 后，您需要重新启动计算机并使用`Run As Administrator`. 然后它的作品。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2016-03-18T08:29:05.217

使用 GnuWin32 工具，我在 C:\gnuwin32\share 下找到了 openssl.cnf

```
set OPENSSL_CONF=C:\gnuwin32\share\openssl.cnf 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2016-05-24T19:33:08.067

对于 Windows 8 上的我，我只是找到了 openssl.cnf 文件并将其复制到 C 驱动器上。然后：

```
openssl req -new -key server.key -out server.csr -config C:\openssl.cnf 
```

工作完美。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2013-06-25T16:26:17.677

在 Windows 7 中，我不必重新启动，只需在管理员模式下运行命令提示符即可。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2017-12-11T10:18:55.627

就我而言，我需要使用选项在命令上手动设置**openssl.cnf文件的路径。**`config`所以命令

```
openssl req -x509 -config "C:\Users\sk\Downloads\openssl-0.9.8k_X64\openssl.cnf" -newkey rsa:4096 -keyout key.pem -out cert.pem -nodes -days 900 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2019-09-26T19:24:09.167

关于为什么找不到 openssl 的基本问题：简短回答：openssl 的一些安装包预先包含了默认的 openssl.cnf。其他包没有。在后一种情况下，您将包括下面显示的链接中的一个；您可以根据需要输入其他用户特定信息--DN 名称等。

从[https://www.openssl.org/docs/manmaster/man5/config.html](https://www.openssl.org/docs/manmaster/man5/config.html,I)，我直接引用：

“OPENSSL 库配置

应用程序可以使用主 OpenSSL 配置文件或可选的替代配置文件自动配置 OpenSSL 的某些方面。openssl 实用程序包括此功能：任何子命令都使用主 OpenSSL 配置文件，除非在子命令中使用选项来使用替代配置文件。

要启用库配置，默认部分需要包含指向主配置部分的适当行。默认名称是 openssl_conf，由 openssl 实用程序使用。其他应用程序可能会使用其他名称，例如 myapplication_conf。所有库配置行都出现在配置文件开头的默认部分中。

配置部分应该由一组包含特定模块配置信息的名称值对组成。name 代表配置模块的名称。该值的含义是特定于模块的：例如，它可以表示包含配置模块特定信息的进一步配置部分。例如：”

因此，似乎必须根据您的专有名称 (DN) 以及特定于您使用的其他条目自行配置 openssl.cnf。

[这](https://github.com/openssl/openssl/blob/master/apps/openssl.cnf)是模板文件，您可以从中生成带有特定条目的 openssl.cnf。

[一个应用程序](https://www.microfocus.com/documentation/enterprise-developer/ed40pu3/ED-VS2017/HROSSROPEN02.html)实际上有一个包含演示 .cnf 文件的演示安装。

此外，如果您需要以编程方式访问 .cnf 文件，您可以包含适当的标头 --openssl/conf.h-- 并使用解析您的 .cnf 文件

```
CONF_modules_load_file(const char *filename, const char *appname,
                            unsigned long flags); 
```

[这](https://www.openssl.org/docs/manmaster/man3/CONF_modules_load.html)是“CONF_modules_load_file”的文档；

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2018-01-14T04:53:30.700

如果您使用的是**Win32 OpenSSL v1.1.0g**，请设置此环境变量：

```
set OPENSSL_CONF=C:\OpenSSL-Win32\bin\cnf\openssl.cnf 
```

*在使用"server.key"*运行此命令之前，成功创建*"server.csr"*：

```
openssl req -new -key server.key -out server.csr 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-03-27T15:31:24.787

在 Windows Powershell 上：

```
$env:OPENSSL_CONF = "${env:ProgramFiles}\OpenSSL-Win64\bin\openssl.cfg" 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-01-06T14:44:44.690

我在 Windows 7 上遇到了类似的问题：

```
WARNING: can't open config file: C:\OpenSSL-Win32\bin\openssl.cfg
Unable to load config info from C:\OpenSSL-Win32\bin\openssl.cfg 
```

原因是在`OpenSSL-Win32`没有使用卸载程序的情况下删除了目录，因此并非所有组件都已从系统中正确删除。我不得不手动**删除环境变量。`OPENSSL_CONF`**

一些openssl二进制文件，例如用git安装的，不需要`OPENSSL_CONF`环境变量，但如果这个环境变量存在，它必须指向有效的文件。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-10-21T19:49:07.803

对我来说，在调用之前放置变量就可以了：

```
OPENSSL_CONF=/usr/ssl/openssl.cnf openssl req -new -x509 -key privatekey.pem -out publickey.cer -days 365 
```

# ios - UIButton 没有触发 touchesbegin

> ID：14459082
> 
> 赞同：1
> 
> 时间：2013-01-22T12:56:28.383
> 
> 标签：ios, uibutton

我有一堆常规的 UIButton，按下时有一个目标。但我也希望它在滑动时工作，并激活 touchesbegan 或 touchesmoved/touchesended。我需要它，因为我想创建一个类似可滑动的单词拼图的东西，它也可以接受修饰印刷。但是滑动系列仅在触摸开始时才有效 self.view ，而不是按钮本身。它只会被按下并且不会注册任何触摸事件。

```
UIButton* Butt = [UIButton buttonWithType:UIButtonTypeCustom];
Butt.frame= CGRectMake(0, -500, 63 , 63);
[Butt addTarget:self action:@selector(clickWord:)forControlEvents:UIControlEventTouchUpInside];
Butt.userInteractionEnabled= YES;
[aSubview addSubview:Butt]; 
```

任何人都可以帮忙吗？我知道将 UIButtons 放在子视图中可能会很麻烦，但我真的希望这样做以使元素保持结构化，而不是所有内容都直接放在 self.view 上。

我试图对按钮进行子类化，但没有帮助

子类代码：

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
  [super touchesBegan:touches withEvent:event];
  [self.nextResponder touchesBegan:touches withEvent:event];
  // This is where the touch is passed on
 }

 - (void) toouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
  [super touchesMoved:touches withEvent:event];
  [self.nextResponder touchesMoved:touches withEvent:event];
 // This is where the touch is passed on
}

- (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
  [super touchesEnded:touches withEvent:event];
  [self.nextResponder touchesEnded:touches withEvent:event];
  // This is where the touch is passed on
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:28:18.617

如果您正在编写游戏，也许值得使用像[Cocos2D](http://www.cocos2d-iphone.org/)这样的框架而不是标准的 UI 元素？

但回到主题：如果您在按钮顶部创建一个屏幕大小的不可见 UIView 来检查滑动，如果没有滑动，则将“启用用户交互”切换为关闭，也许它有效？

否则，创建一个矩阵，您可以在其中检查用户触摸的位置以及他在此视图上所做的操作，并在后台使用此数据。那么你也不再需要按钮了......

希望它有点帮助。

编辑：以一种不做任何接近其开发目的的事情的方式修改标准 UI 元素感觉很奇怪。也许继承 UIControl 本身就是你想要的？这不会很容易，但可能最适合您的解决方案？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:08:31.163

看起来触摸正在响应，但是当它到达 uibutton 的矩形时，它们将被拦截。

# apache - 你知道使用 Apache 而不是 Nginx 的任何理由吗？

> ID：14459086
> 
> 赞同：41
> 
> 时间：2013-01-22T12:56:49.240
> 
> 标签：apache, nginx, webserver

你知道使用 Apache 而不是 Nginx 的任何理由吗？我说的是一个没有任何遗留代码或配置的“新项目”。

更新：

使用 Apache 的最普遍原因是：

*   我们有我们的重写配置
*   我们有我们的应用程序，在 Apache 上工作

..旧版应用程序没问题。但是绝对“新应用 2013”​​呢？

你怎么看？

顺便说一句，我知道主题：

*   [Nginx 和 Apache](https://stackoverflow.com/questions/4540669/nginx-and-apache)
*   [Nginx 与 Apache 或将 Apache 与 nginx 一起使用](https://stackoverflow.com/questions/7046160/nginx-vs-apache-or-using-apache-with-nginx)
*   [用于高流量站点的 Nginx v Apache](https://stackoverflow.com/questions/11171992/nginx-v-apache-for-high-traffic-sites)
*   [使用 Nginx 或 Apache 提供动态内容？](https://stackoverflow.com/questions/11582016/use-nginx-or-apache-for-serving-dynamic-content)

..我在那里找不到任何 Apache 的专业人士。你能指点我吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-22T15:16:54.840

Apache 仍然是 Internet 上最受欢迎的 Web 服务器，[估计](http://news.netcraft.com/archives/category/web-server-survey/)为现有网站的 55% 提供服务，而 nginx 为 12%（2013 年 1 月）。

**更新（2015 年 4 月）：** Apache 的份额仍然最大，约为 40%，而 nginx 已增长到 15%。检查上述链接以获取最新数据。

**更新（2020 年 7 月）：** nginx 的受欢迎程度以 37% 和 25% 轻松超过 Apache。Apache 仍然有更多的搜索命中率。

它是最古老的 Web 服务器，这意味着您可以轻松找到熟练配置它的人员。

在搜索网络时，您也更有可能找到帮助。SO 有约 80,000 个用于 Apache 的标签，约 40,000 个用于 nginx。

安装文档有时假设您使用的是 Apache，通常包括 .htaccess 文档，但不包括等效的 nginx 配置：

*   [Yii 1.0 只用 Apache 测试过](http://www.yiiframework.com/doc/guide/1.0/en/quickstart.installation)
*   [Yii 1.1 只有 Apache 的干净 URL 指令](http://www.yiiframework.com/doc/guide/1.1/en/topics.url#hiding-x-23x)
*   [CodeIgniter 2.0 只有 .htaccess 指令用于 Apache](http://www.codeigniter.com/userguide2/general/urls.html)
*   [CodeIgniter 3.0 在干净的 URL 部分中仍然只有 Apache 的 .htaccess 指令](http://www.codeigniter.com/user_guide/general/urls.html)
*   [Drupal 设置页面有关于 Apache 和 IIS 的注释，但 nginx 仅在评论中提及，并且至少有一个人无法让 nginx 设置正常工作](https://www.drupal.org/getting-started/clean-urls#serverconfiguration)

我的推荐？两者都是非常好的选择，如果您无法找到任何令人信服的理由，请掷硬币。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-02-10T09:55:51.563

2018 年 2 月的回复在这里。

Apache 为 47.4%（-3.3% 1 年），Nginx 为 36.8%（+4.4% 1 年）

趋势是线性的，到 2020 年如果不出意外，Nginx 将是最常用的。

Nginx 是为支持大量并发请求而设计的，现代应用程序通常会这样做，例如小型 Ajax 请求和较少的整页加载。

我已经看到基准（用于静态资源）和 Nginx MURDERS Apache，无论是每秒请求数还是 RAM 使用率。

一个小时前我就意识到了这一切，我已经使用 apache 很多年了，我在写完这篇文章后就开始迁移了。

2018 年的结论：选择 Nginx。

台：[dreamhost Web-server-performance-comparison](https://help.dreamhost.com/hc/en-us/articles/215945987-Web-server-performance-comparison)

分享：[w3techs.com web_server](https://w3techs.com/technologies/history_overview/web_server)

分享2：[netcraft.com web-server-survey](https://news.netcraft.com/archives/category/web-server-survey/)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-04-25T03:06:03.127

在 Nginx 上使用 Apache确实没有任何***客观的理由。***

事实上，Nginx 的优越性实际上可能有[性能方面的原因。](https://drupal.stackexchange.com/questions/71610/nginx-vs-apache-are-there-any-actual-usage-comparisons-and-statistcs-out-there)然而，在透视整个 Web 应用程序时，这些原因通常没有意义。

您会发现许多***主观***原因偏爱一个 Web 服务器而不是另一个，例如与熟悉度相关的偏见。对于 Web 服务器，这些偏见可能与用户的年龄有关，因为 Apache 的存在时间要长得多。对于这些用户中的许多人来说，学习一个新系统并不是对时间的有效利用。对于经验较少或新的管理员，熟悉偏差不适用。

另一个主观原因是错误地认为更大的市场份额总是会产生明显更高水平的支持。这些原因没有认识到在接受极端点之后更大的市场份额的相关性正在减弱。例如，最近的一项[Netcraft 调查显示](http://news.netcraft.com/archives/2014/10/10/october-2014-web-server-survey.html)，Nginx 在所有网站中的市场份额高达 14.42%，而 Apache 为 37.45%。虽然人们可能会盲目地假设 Apache 拥有更大的市场份额，但事实是 14.42% 代表了 1.48*亿、330 万、190 个网站*（148,330,190）。这是在 Nginx 上运行的大量网站和用户。Nginx 的原始用户数量如此之大，以至于它相对较小的市场份额在支持水平上没有可识别的差异。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-10-11T04:58:00.707

对于那些寻找主要差异/比较的人：

[![在此处输入图像描述](../Images/ffd175f937c863e6adc1d85b47262dbf.png)](https://i.stack.imgur.com/IRJ06.png)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-07-27T21:19:17.060

我可以在第一个答案中添加一点。

Apache 市场份额的总体数据是真实的，但您可以更详细地考虑这个问题。NGINX 在前 1000 个网站和前 10000 个网站中的份额最大，与前 100000 个网站并驾齐驱。[http://w3techs.com/technologies/cross/web_server/ranking](http://w3techs.com/technologies/cross/web_server/ranking)

因此，找出您希望您的网站属于哪一部分的使用，并使用它来查找最相关的市场份额信息。

要了解有关 NGINX 的更多信息，请参阅 O'Reilly 即将出版的“官方”书籍。免费预览下载：[http ://www.aosabook.org/en/nginx.html](http://www.aosabook.org/en/nginx.html)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-11-13T18:48:52.037

apache mod_php 更加稳定和清洁，而 nginx 经常会提供编码为 502 的 HTTP Bad Gateway 错误。

# java - 无法在以下位置找到 Javac 编译器：

> ID：14459089
> 
> 赞同：1
> 
> 时间：2013-01-22T12:56:56.843
> 
> 标签：java, linux, centos, openjdk

我已经按照下面的指导安装了 OpenJDK。但我仍然不断收到这个错误。我在 bash_profile 中设置了正确的 PATH。

有人可以帮我解决这个问题吗？

```
 [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-     plugin:2.3.2:compile (default-compile) on project poker-protocol: Compilation failure
 [ERROR] Unable to locate the Javac Compiler in:
 [ERROR] /usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/jre/../lib/tools.jar
 [ERROR] Please ensure you are using JDK 1.4 or above and
 [ERROR] not a JRE (the com.sun.tools.javac.Main class is required).
 [ERROR] In most cases you can change the location of your Java
 [ERROR] installation by setting the JAVA_HOME environment variable.
 [ERROR] -> [Help 1]
 [ERROR] 
 [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
 [ERROR] Re-run Maven using the -X switch to enable full debug logging.
 [ERROR] 
 [ERROR] For more information about the errors and possible solutions, please read the following articles:
 [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
 [ERROR] 
 [ERROR] After correcting the problems, you can resume the build with the command
 [ERROR]   mvn <goals> -rf :poker-protocol 
```

在我的 bash_profile 我有这个：

```
 JAVA_HOME=/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/jre
 export M2_HOME=/usr/local/apache-maven-3.0.4
 export PATH=${M2_HOME}/bin:${PATH}:$JAVA_HOME/bin 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T13:19:08.853

您已经安装了 Java 运行时，但要开发 Java 应用程序，您需要 JDK，因此您必须安装 OpenJDK 开发包，在您的情况下`java-1.6.0-openjdk-devel-1.6.0.0.x86_64`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T20:05:42.340

你需要安装**java-1.6.0-openjdk-devel** 安装 java-1.6.0-openjdk 只是安装 JRE 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T13:15:34.453

不太确定，但就我而言，我是这样设置的：

```
export JAVA_HOME=/usr/lib/jvm/jdk1.7.0_11/
export PATH=$JAVA_HOME/bin:$PATH 
```

我已经这样做了`bash.bashrc`

`export`在提供变量名称之前尝试添加。我发现的另一件事甚至认为我没有使用 openjdk，它`tool.jar`不是位于`jre`目录中，而是位于`jdk`目录下。

希望这可以帮助。

# css - Div / Block元素出现在浮动下方？

> ID：14459099
> 
> 赞同：0
> 
> 时间：2013-01-22T12:57:22.917
> 
> 标签：css, css-float

给出以下示例：http: [//jsfiddle.net/DLHGs/1/](http://jsfiddle.net/DLHGs/1/)

是否可以让 `bye`元素呈现在下方`hi`，但仍保留在红色块的右侧？（而不是在同一行）

澄清一下，我不想对 有任何用途`<br />`，并且`float:left`应用到`hi`是不可移除的，并且我不想设置除了已经指定的那些之外的任何其他`width`或`height`属性。

编辑：解决方案：http: [//jsfiddle.net/T4XMq/](http://jsfiddle.net/T4XMq/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:19:27.387

[那这个呢？](http://jsfiddle.net/DLHGs/11/)

我添加`float:left`到包装“hi”和“bye”的div中，并将“bye”设置为`clear:left`

```
<div>
    <div style="width:30px; height:300px; background:red; float:left;"></div>
    <div style="float:left">
        <div style="float:left;">hi</div>
        <div style="clear:both;">bye</div>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-22T12:58:32.397

好吧，我可以看到`clear:both`红色框下的正常放置方式。如果您不能改为使用 hi`float:right`并使用`<div style="clear:right">bye</div>`，则在这种情况下可以使用简单的换行符：

```
<div style="float:left;">hi</div>
<br />
<div>bye</div> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-22T13:00:52.973

您可以将这两个元素包装在一个 div 中`float:left`。

```
<div style="float: left;">
    <div>hi</div>
    <div>bye</div>
</div> 
```

小提琴：http: [//jsfiddle.net/DLHGs/8/](http://jsfiddle.net/DLHGs/8/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-22T13:02:04.017

```
<div>
    <div style="width:30px; height:300px; background:red; float:left;"></div>
    <div style="float:left;">
        <div  style="float:left;">hi</div>
        <div style="">bye</div>
    </div>
</div> 
```

# c++ - 为什么以及何时使用 __noop？

> ID：14459102
> 
> 赞同：20
> 
> 时间：2013-01-22T12:57:35.627
> 
> 标签：c++, visual-c++, intrinsics

我正在阅读有关[__noop](https://msdn.microsoft.com/en-us/library/s6btaxcs.aspx)和 MSDN 示例是

```
#if DEBUG
   #define PRINT   printf_s
#else
   #define PRINT   __noop
#endif

int main() {
   PRINT("\nhello\n");
} 
```

而且我没有看到仅仅拥有一个空宏的好处：

```
#define PRINT 
```

生成的代码是一样的。什么是一个`__noop`真正有用的有效例子？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-22T13:02:17.453

> `__noop`内在函数指定应忽略函数并解析参数列表，但**不为参数生成代码。**它旨在用于采用可变数量参数的全局调试函数。

在您的情况下，参数显然是一个无副作用的表达式，可以轻松优化，所以没关系。

但是，如果参数表达式有副作用或者太复杂以至于编译器无法证明它正常终止并且没有副作用，那么 using`__noop`可以防止对该表达式进行潜在的昂贵评估。

第二个好处是它在语法上表现得像一个带有可变数量参数的函数调用。所以用它代替函数调用不会影响程序的解析。对于其他一些替换（如空字符串），在某些情况下这可能是一个问题。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-22T13:05:40.043

```
#define PRINT
extern int some_complicated_calculation();
PRINT("%d\n", some_complicated_calculation()); 
```

即使您不想要结果，也会调用该函数。

使用`__noop`，该函数将不会被调用。

您可以（假设编译器支持可变参数宏）定义`PRINT`忽略参数；但是它们根本不会被解析，并且如果您更改它们周围的代码而不编译定义`PRINT`做某事的变体，它们可能会变得无效。使用`__noop`，参数仍然被解析，因此更有可能保持有效。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-03-19T12:30:47.993

怎么样：

```
if (condition)
  PRINT("hello\n");
next_statetment; 
```

我认为，如果没有 __noop，在发布模式下，“next_statetment”只会在“条件”为真时执行，这是一个很难找到的错误。

# php - 将 PHP Web 服务从 JAX-RPC 转换为 JAX-WS

> ID：14459104
> 
> 赞同：1
> 
> 时间：2013-01-22T12:57:48.003
> 
> 标签：php, web-services, jax-ws, jax-rpc

有没有办法将 JAX-RPC 转换为 JAX-WS Web 服务。问题是我们需要在 java 中生成这个基于 PHP 的 Web 服务的客户端。Web 服务是用 PHP 以 RPC 风格编写的，当 java 团队尝试生成客户端时，会出现错误“选定的 wsdl 是 rpc 编码的。您必须选择 JAX-RPC 客户端”，因此要求我们将编码风格从 RPC 更改为WS 可以在这方面提供任何帮助

**编辑** 这是一个允许用户生成基于 java 的 jax-rcp 客户端[的 netbeans 插件。](http://www.stormacq.com/netbeans-7-0-and-jax-rpc-web-service/)但作为预先客户要求，我们需要更改 Web 服务。这就是为什么需要它。

提前致谢。

# c# - 如何使用 2 个键使用键盘移动图像？

> ID：14459110
> 
> 赞同：0
> 
> 时间：2013-01-22T12:58:14.850
> 
> 标签：c#, forms, class, events

我有一个我正在努力解决的问题。我想使用我的键盘向左、向右、向上或向下并以对角线方式移动图像。我在网上搜索并发现，要使用 2 个不同的键，我需要记住前一个键，因此我使用的是 bool 字典。

在我的主 Form 类中，KeyDown 事件如下所示：

```
private void Form1_KeyDown(object sender, KeyEventArgs e)
{
    baseCar.carAccelerate(e.KeyCode.ToString().ToLower());
    carBox.Refresh(); //carbox is a picturebox in my form that store the image I want to move.
} 
```

我的 KeyUp 事件：

```
private void Form1_KeyUp(object sender, KeyEventArgs e)
{
    baseCar.carBreak(e.KeyCode.ToString().ToLower());
} 
```

我的绘画活动：

```
private void carBox_Paint(object sender, PaintEventArgs e)
{
    e.Graphics.DrawImage(Car, baseCar.CharPosX, baseCar.CharPosY); // Car is just an image
} 
```

还有我的 baseCar 课程：

私有字典键 D = new Dictionary(); // 有一种方法可以设置 W|A|S|D 键，例如：KeysD.Add("w",false)

```
 public void carAccelerate(string moveDir)
    {       
        KeysD[moveDir] = true;
        moveBeta();
    }
    public void moveBeta()
    {
        if (KeysD["w"])
        {
            this.CharPosY -= this.carMoveYSpeed;
        }
        if (KeysD["s"])
        {
            CharPosY += carMoveYSpeed;
        }
        if (KeysD["a"])
        {
            CharPosX -= carMoveXSpeed;
        }
        if (KeysD["d"])
        {
            CharPosX += carMoveXSpeed;
        }
    }
    public void carBreak(string str)
    {
        KeysD[str] = false;
    } 
```

无论如何它都有效，但我的问题是我无法回到第一个按下的键，例如：

我按 W 向上移动，然后按 D 键进入对角线，但是当我释放 D 键时它不会再次向上移动，因为 KeyDown 事件是“死的”并且不会再次调用 carAccelerate() 方法..我可以不知道如何解决它..

任何人都可以帮助我吗？也许有更好的方法来处理密钥？我愿意接受任何想法！我希望你能理解，我的英语不是最好的：S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:02:29.447

存储所有键状态并且不要在按键时设置动画，但例如使用计时器。

然后：

```
KeyDown(key)
{
   KeyState[key] = true;
}

KeyUp(key)
{
   KeyState[key] = false;
}

Timer_Tick()
{
    Animate();
}    

Animate()
{
    if (KeyState["W"])
    {
        // Accelerate
    }
    if (KeyState["S"])
    {
        // Decelerate
    }

} 
```

然后在该`KeyDown`方法中，您可以检查是否存在冲突键（如果同时按下加速 + 减速会怎样，等等）。

# wordpress - 识别网站是否使用 CMS 以及哪些

> ID：14459111
> 
> 赞同：1
> 
> 时间：2013-01-22T12:58:16.490
> 
> 标签：wordpress, joomla, content-management-system

您可以通过仅查看源代码来做到这一点吗？在我的具体情况下，我想知道这个网站是否是 CMS。

[http://www.designbridge.com/](http://www.designbridge.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:31:27.890

如果你使用 Firefox，你可以安装**wappalyzer**插件。还有很多在线服务可以检测 CMS 和使用的技术：[builtwith](http://builtwith.com/)、[w3techs](http://w3techs.com/sites)等。最后一个说给定站点是使用 Umbraco CMS v.4.7 构建的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:01:06.133

它使用 Umbraco 4.7（ASP.NET 框架）

您可以查看源代码，但在这种情况下，我在 http 响应标头中找到了它。

```
Server: Microsoft-IIS/7.5
X-Umbraco-Version: 4.7
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET 
```

除了手动检查源和标头之外，您还可以使用在线工具。谷歌搜索“CMS检测器”给了我：

*   [http://guess.scritch.org/](http://guess.scritch.org/)
*   [http://onlinewebtool.com/cmsdetector.php](http://onlinewebtool.com/cmsdetector.php)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-22T13:03:13.217

该站点似乎使用了以下源代码中的 ASP.NET 技术：

```
<div class="aspNetHidden">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUENTM4MQ9kFgJmD2QWAmYPZBYCZg9kFgJmD2QWAmYPZBYCAgEPZBYCAgwQZGQWAgICD2QWAgILD2QWBgIBDxYCHgRUZXh0BckCIDxhIGhyZWY9Imh0dHA6Ly93d3cudHdpdHRlci5jb20vYWRhbmNlc3R1ZGlvdWsiIGNsYXNzPSJ0d2VldC1yZXBseSBqcy1leHRlcm5hbCI+PHNwYW4+QGFkYW5jZXN0dWRpb3VrPC9zcGFuPjwvYT4gPGEgaHJlZj0iaHR0cDovL3d3dy50d2l0dGVyLmNvbS9QZW50YXdhcmRzIiBjbGFzcz0idHdlZXQtcmVwbHkganMtZXh0ZXJuYWwiPjxzcGFuPkBQZW50YXdhcmRzPC9zcGFuPjwvYT4gdGhhdCBwYWdlIGRvZXMgbG9vayBhIGJpdCBvZGQsIHlvdSBjYW4gc2VlIHRoZW0gaWYgeW91IHNjcm9sbCBkb3duIGJ1dCBpdCBkb2Vzbid0IHNlZW0gdG8gd29yayB3ZWxsIGluIENocm9tZS5kAgMPFgIfAAULMSBob3VycyBhZ29kAgUPFgIeBGhyZWYFJGh0dHA6Ly93d3cudHdpdHRlci5jb20vRGVzaWduX0JyaWRnZRYCAgEPFgIfAAUNRGVzaWduX0JyaWRnZWRkj58Zp9b1z0JIx38xemx6plbiw60t9EzuAFKnL3O8Bto=" />
</div> 
```

但我不知道它是使用预先编写的 ASP.NET CMS 还是使用一些 ASP.NET 框架或只是普通的 ASP.NET。

如果您知道要查找的内容，则可以使用 CMS 的某些指纹来识别哪个是哪个。但是有可能将某些网站伪装成一个 CMS，而实际上它是普通的或另一个 CMS。这个没有确定的答案，只有你可以巧妙地猜测。

# svn - SVN 还原后返回本地更改

> ID：14459114
> 
> 赞同：1
> 
> 时间：2013-01-22T12:58:22.610
> 
> 标签：svn

我`update`在我的项目上进行了更新，并且在更新某些文件后处于冲突状态。在被标记为冲突的文件上，我选择了`revert`命令。所以我丢失了所有本地修改。可以退回我最后的修改吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T13:00:40.627

来自[SVN 书](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.revert.html)：

> svn revert 本质上是危险的，因为它的全部目的是丢弃数据——即你未提交的更改。一旦你恢复了，Subversion 就无法取回那些未提交的更改。

看起来，除非您使用其他方法在某处备份这些更改，否则您将无法恢复它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T13:00:58.260

`svn revert`还原所有修改，因此它们会丢失。

如果您有备份，文件仍然在您的编辑器中打开或使用一些“取消删除工具”，您仍然可以将它们取回。

# php - 在 prestashop 的 tpl 文件中调用模块

> ID：14459117
> 
> 赞同：4
> 
> 时间：2013-01-22T12:58:29.190
> 
> 标签：php, html, smarty, prestashop

我想在我的`header.tpl`文件中使用搜索模块。在那我使用了这段代码

`{include file='./modules/blocksearch/blocksearch.tpl'}`

但它不起作用，通过使用此代码，我的页面变为空白。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-04T09:42:29.137

在这里你会找到你正在寻找的东西 [http://www.ecartservice.net/prestashop-articles/1-4-plugins-revisited-part-1/](http://www.ecartservice.net/prestashop-articles/1-4-plugins-revisited-part-1/)

这是一种直接在模板文件中调用模块的简便方法，无需使用钩子。我在 Prestashop 1.4 和 1.5 中都对其进行了测试，并且可以正常工作。

对于 Prestashop 1.5，您需要在“覆盖”文件夹中创建 2 个额外文件，如上面的链接中所述：

*   Plugin.php 在 /override/classes/
*   FrontController.php 在 /override/classes/controller/

然后，您将能够在模板文件中使用以下代码：

```
{plugin module='editorial' hook='displayHome'} 
```

您需要使用挂钩的名称 (displayHome) 而不是别名 (home)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T17:19:39.253

你不能像这样包含模块模板，因为模块的 PHP 代码没有被调用，模板需要它来设置一些 Smarty 变量。

您能做的最好的事情是将块搜索模块连接到您的标题。开始了 ：

*   导航到“管理员 > 模块 > 职位”
*   单击“移植模块”按钮
*   为“模块”选择“快速搜索块”
*   为“挂钩”选择“页面标题/显示标题”
*   点击“保存”

“快速搜索模块”现在已连接到您的标题。

# hibernate - 对象的标准限制

> ID：14459122
> 
> 赞同：0
> 
> 时间：2013-01-22T12:58:49.260
> 
> 标签：hibernate, hibernate-4.x

此代码无效，但是否有可能以不同的方式实现。我想在 Person 对象的 Car 对象中使用 String regnumber。

```
public class Person(){
    Car car;
}

public class Car(){
    String regnumber;
}

Criteria criteria = session.createCriteria(Person.class);
Criterion c = Restrictions.ilike("car.regnumber", search, MatchMode.ANYWHERE); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:07:55.333

需要这样做。

```
Criteria criteria = session.createCriteria(Person.class).createAlias("car", "car"); 
```

# c++ - 使用管理员权限 vc++ 启动应用程序

> ID：14459131
> 
> 赞同：0
> 
> 时间：2013-01-22T12:59:18.937
> 
> 标签：c++, windows, visual-c++, windows-installer

我正在开发一个安装在程序文件文件夹中的 vc++ 后台应用程序。它在手动启动时工作正常，它在同一文件夹中创建 xml 文件。但是，当应用程序配置为启动时，它并没有创建文件。

即使我提供了 requireAdministrator 权限，它也不会在启动时创建文件。

[这与在没有 UAC 提示的情况下向启动时启动的应用程序授予管理员权限](https://stackoverflow.com/questions/4640056/granting-administrator-privileges-to-an-application-launched-at-startup-without)的问题相同？

但是当程序以管理员身份运行时它不会在启动时启动，这是我的问题

但我正在为 vc++ 中的解决方案工作。

请帮助我在这方面工作了一个多星期

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:06:12.900

我假设您启用了 UAC（即出现 UAC 提示）。如果是这样，当您从资源管理器启动时，您总是会看到它，并且不会从管理模式 Visual Studio 中看到（因为 VS 已提升），因此您的进程将被提升。

但是，当您的进程启动时，UAC 不会出现，并且您的应用程序将无法启动。最好**不要**让您的应用程序需要管理员权限（为什么需要？）。您可以将数据保存在其他文件夹中。

如果必须，您可能需要创建一个服务，该服务将以提升模式启动您的应用程序（是的，没有任何 UAC 提示）。

请检查您的应用程序的系统事件报告，因为这不容易调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:50:06.773

将 XML 文件移动到 ProgramData ( `CSIDL_APPDATA`)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T13:16:06.780

您是否在项目中添加了适当的清单？在 VC++ 中，您必须添加一个（http://msdn.microsoft.com/en-us/library/windows/desktop/bb756929.aspx）

# html - 在 Outlook 中显示 CSS 按钮

> ID：14459132
> 
> 赞同：1
> 
> 时间：2013-01-22T12:59:20.050
> 
> 标签：html, css, button, outlook, newsletter

[我使用Button Maker](http://css-tricks.com/examples/ButtonMaker/)创建了一个 CSS 渐变按钮，但由于其 CSS 限制，它无法在 Outlook 中正确显示。因此，我希望在 Outlook 中显示一个外观更简单的按钮，但我没有设法填充边框和文本链接之间的背景（需要填充文本周围的 5px 填充）。我在 span 样式和链接样式中都指定了 background-color:#65a9d7 。

我的问题：[outlook 中的按钮](http://attitudeasbl.webs.com/btn.png)

我的按钮代码：

```
<span class="buttoncustom" style="background-color:#65a9d7"><a href="http://www.google.com" target="_blank" title="Button" style="text-decoration:none;color:#FFFFFF; padding:5px;background-color:#65a9d7"><strong>&#62; My Button</strong></a></span> 
```

我的样式表：

```
<style type="text/css">
        .buttoncustom {
           border-top: 1px solid #96d1f8;
           background: #65a9d7;
           background: -webkit-gradient(linear, left top, left bottom, from(#3e779d), to(#65a9d7));
           background: -webkit-linear-gradient(top, #3e779d, #65a9d7);
           background: -moz-linear-gradient(top, #3e779d, #65a9d7);
           background: -ms-linear-gradient(top, #3e779d, #65a9d7);
           background: -o-linear-gradient(top, #3e779d, #65a9d7);
           padding: 5px 10px;
           -webkit-border-radius: 8px;
           -moz-border-radius: 8px;
           border-radius: 8px;
           -webkit-box-shadow: rgba(0,0,0,1) 0 1px 0;
           -moz-box-shadow: rgba(0,0,0,1) 0 1px 0;
           box-shadow: rgba(0,0,0,1) 0 1px 0;
           text-shadow: rgba(0,0,0,.4) 0 1px 0;
           color: white;
           font-size: 14px;
           font-family: Georgia, serif;
           text-decoration: none;
           vertical-align: middle;
           mso-line-height-rule: exactly;
           }
        .buttoncustom:hover {
           border-top-color: #006699;
           background: #006699;
           color: #ccc;
           }
        .buttoncustom:active {
           border-top-color: #1b435e;
           background: #1b435e;
           }
    </style> 
```

我一直在玩代码多年无济于事，所以我非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T16:09:56.940

请参阅 Campaign Monitor 用于在电子邮件中制作防弹按钮的工具。将 VML for Outlook 与关闭图像时的后备显示一起使用：

[纽扣.cm](http://buttons.cm/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-18T14:48:27.500

我发现使用与按钮背景颜色相同的边框是一种可靠的解决方法。所以代替这个：

```
a.button { background: #dddddd; padding: 8px; } 
```

尝试这个：

```
a.button { background: #dddddd; border: 8px solid #dddddd; } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-01T00:48:35.800

正如其他答案所暗示的那样，对 Outlook 2007、2010 和 2013 中任何真正通用的东西的支持非常糟糕。这个按钮的主要问题是这些版本的 Outlook 不支持 margin 属性（他们使用 MS Word 作为渲染引擎，yuk！）[Litmus 很好地解释了这个和解决方案](https://litmus.com/help/email-clients/outlookcom-margins/)。

我设法创建了一个[基于 HTML 表格的按钮](http://codepen.io/gillytech/pen/hdoLm)，该按钮适用于几乎所有主要的电子邮件客户端。

这是供您参考的 HTML：

```
<table cellpadding="0" cellmargin="0" border="0" height="44" width="178" style="border-collapse: collapse; border:5px solid #c62228">
  <tr>
    <td bgcolor="#c62228" valign="middle" align="center" width="174">
      <div style="font-size: 18px; color: #ffffff; line-height: 1; margin: 0; padding: 0; mso-table-lspace:0; mso-table-rspace:0;">
        <a href="#" style="text-decoration: none; color: #ffffff; border: 0; font-family: Arial, arial, sans-serif; mso-table-lspace:0; mso-table-rspace:0;" border="0">MY BUTTON</a>
      </div>
    </td>
  </tr>
</table> 
```

希望这对您或任何遇到的谷歌用户仍然有帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-28T04:01:56.620

Litmus 有一篇很棒的博客文章，介绍了各种选项和对此的支持。我通常使用 Padding + Border 选项。我发现它适用于所有主要客户（除了莲花笔记）。

[https://litmus.com/blog/a-guide-to-bulletproof-buttons-in-email-design](https://litmus.com/blog/a-guide-to-bulletproof-buttons-in-email-design)

注意：在测试时，您需要在链接中使用正确的 url，如果您在其中只有一个哈希值，它将无法在 outlook.com 中工作，因为它们会删除链接！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-03-12T07:50:10.083

请使用下面提到的 HTML 代码，这在 Outlook 中效果很好。

```
<table cellpadding="0" align="left" cellspacing="0" style="border-radius:2px; background-color:#5794FF; color:#FFFFFF">
    <tbody>
        <tr>
            <td align="center" height="32" style="padding:0px 19px; height:32px; font-size:14px; line-height:12px">
                <a href="https://www.google.co.in/" target="_blank" style="text-decoration:none; color:#FFFFFF">Search Google</a>
            </td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-22T13:34:24.650

您是否尝试过直接为锚定样式？

```
.buttoncustom a {
       border: 1px solid #96d1f8;
       background: #65a9d7;
       padding: 5px 10px;
} 
```

# c - 避免使用malloc的方法？

> ID：14459135
> 
> 赞同：19
> 
> 时间：2013-01-22T12:59:23.453
> 
> 标签：c, malloc

随着最近 C 得到的所有噪音，我读到有一些方法可以最大限度地减少 C 中 malloc 的使用，这是一个非常好的实践。我怎么也不知道这种做法何时、如何或什么是好的。所以我的问题是，也许一些有经验的 C 程序员可以举一些例子，其中一个人可以（或应该）在没有 malloc 的情况下编写一些东西，但是对于新手 C 程序员来说，什么是真正不明显的方式（因此说新手只会使用 malloc） ? 也许你有一些将 malloc 分解成其他东西的经验。

PS我读过的一些帖子引用了Quake 3源代码以及它如何避免使用malloc，所以如果有人知道这一点，知道那里做了什么会很有趣，因为至少知道我想避免深入研究地震漫无目的地编码。（因为如果他们避免使用 malloc 搜索 malloc 不会给出太多结果，我想，代码库也很可能不像单个示例那样简单）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-22T13:11:19.933

我不知道完全避免`malloc`，但你当然可以减少它。

基本概念是内存池。这是您分配的一个大缓冲区，您可以将其用于许多对象，而不是请求大量的小分配。

您可能会在实际情况中使用它，您将事件发送到队列中以由另一个线程处理。事件对象可能是小型结构，您确实需要避免`malloc`每秒进行数千次调用。

答案当然是从池中提取这些事件对象。如果需要，您甚至可以使用部分池缓冲区来形成一个列表，以便您可以快速索引已返回池的内存。这些通常被称为*free-lists*。

您必须小心内存对齐，因为您可能会因数据未对齐而严重影响性能。但是你可以用一点数学来处理所有这些。

* * *

不要害怕这些概念。游泳池实际上不必那么复杂。考虑一下：

```
int ** matrix = malloc( rows * sizeof(int*) );
for( int i = 0; i < rows; i++ ) {
    matrix[i] = malloc( cols * sizeof(int) );
} 
```

我经常看到这种情况，这是我的一个小烦恼。当你可以这样做时，你为什么要这样做：

```
int ** matrix = malloc( rows * sizeof(int*) );
matrix[0] = malloc( rows * cols * sizeof(int) );
for( int i = 1; i < rows; i++ ) {
    matrix[i] = matrix[i-1] + cols;
} 
```

当然，这减少了这一点（但要注意第一行中潜在的对齐问题 - 为了清楚起见，我在这里忽略了它）

```
int ** matrix = malloc( rows * sizeof(int*) + rows * cols * sizeof(int) );
matrix[0] = (int*)matrix + rows;
for( int i = 1; i < rows; i++ ) {
    matrix[i] = matrix[i-1] + cols;
} 
```

最后一个例子的酷点是删除矩阵是多么容易=）

```
free( matrix ); 
```

哦，对矩阵进行归零同样简单......

```
memset( matrix[0], 0, rows * cols * sizeof(int) ); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-22T13:01:50.833

在您需要本地范围内的小型动态大小数组的场景中，有 [`alloca()`](http://linux.die.net/man/3/alloca)一个从堆栈中分配并且不需要您显式释放内存（它在函数返回时被释放），并且有[可变长度数组（ VLA)](http://en.wikipedia.org/wiki/Variable_Length_Array) :

```
void meh(int s) {
    float *foo = alloca(s * sizeof(float));
    float frob[s];
} // note: foo and frob are freed upon returning 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-22T13:05:06.940

在某些特定情况下不使用的主要原因`malloc`可能是它采用了通用的、一刀切的内存分配方法。

在具有众所周知的分配需求的情况下，其他方法（例如内存池和平板分配）可能会带来好处。

例如，对于分配器来说，假设分配的对象将具有固定大小，或者假设它们的生命周期相对较短，则更为有利。通用分配器无法做出这样的假设，因此无法在这样的场景中发挥最佳性能。

潜在的好处可以包括减少内存占用，因为专用分配器具有更精简的簿记。通用分配器很可能为每个分配的对象保存大量元数据，而提前“知道”对象大小的分配器可能会从元数据中省略它。

它还可以在分配速度方面产生影响——自定义分配器可能能够更快地找到空槽。

这都是在亲戚那里谈论的，但是在选择自定义分配方案之前您应该问的问题是：

*   您是否需要分配和释放大量具有相同大小的对象？（板坯分配）

*   这些对象可以在没有单独调用开销的情况下立即处理吗？（内存池）

*   是否有单独分配的对象的逻辑分组？（缓存感知分配）

底线是，您必须仔细检查程序的分配需求和模式，然后决定自定义分配方案是否有益。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-22T13:27:04.513

如果您事先知道数组、列表、堆栈、树以及程序需要的任何数据结构的所有大小，则可以通过定义元素数量恒定的数组来静态分配所需的内存。优点：没有内存管理，没有内存碎片，速度快。缺点：使用有限，浪费内存。

您可以在操作系统提供的任何内容之上实现自定义内存分配器`malloc()`，一次分配一大块内存，然后在不调用标准`malloc()`函数的情况下将其分割。优点：快。缺点：实施正确并不容易。

另一种（也是相当反常的）避免`malloc()`方法是将大部分数据存储在文件中而不是内存中。优点：几乎没有。

如果您确定程序的堆栈足够大，您还可以使用局部变量和深度函数调用（或显式递归）为移动中的数据分配空间。优点：没有内存管理，简单，快速。缺点：使用有限。

作为一个避免工作的中型项目的示例，`malloc()`我可以提供我的宠物项目[Smaller C compiler](http://github.com/alexfru/SmallerC/blob/master/v0100/smlrc.c)。它静态分配了许多数组，并且还在递归函数中分配了小的局部变量。请注意，代码还没有被美化，如果你是编程、C 或编译器的新手，这不是什么小东西或容易理解的东西。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-22T13:22:22.547

有几个需要避免的原因`malloc`- 在我看来，最大的一个原因是“没有 malloc，没有 free”来解释 Bob Marley ......所以，不会因为“忘记”调用而导致内存泄漏`free`。

当然，您应该始终检查`NULL`动态分配内存的时间。避免这种情况将减少代码量和代码的复杂性。

不幸的是，用完堆栈或全局变量大小的替代方案通常更糟糕，因为它要么立即崩溃而没有给用户任何有意义的错误消息（stackoverflow），要么全局变量中的缓冲区溢出 - 检查全局变量中的边界将避免这种情况，但是如果你检测到它，你会怎么做？没有太多选择。

另一部分当然是`malloc`与局部变量相比，调用可能会非常昂贵。当您在“热路径”中点击 malloc/free 调用时尤其如此 - 经常调用的部分代码。在小内存部分上使用也会产生内存开销`malloc`——过去在 Visual Studio 中的开销约为 32 字节的“标题”并四舍五入到 16 或 32 字节的边界——因此 1 字节的分配实际上占用了 64 字节。分配 17 个字节也将占用 64 个字节...

当然，就像所有工程/软件设计一样，它不是“您不得使用 malloc”，而是“如果有简单/合适的替代方案，请避免使用 malloc”。使用比它们需要的数倍大的所有全局变量是错误的，只是为了避免 malloc - 但是为图形绘制循环的每一帧或每个对象调用 malloc/free 也是同样错误的。

我没有看过 Quake 的代码，但我在 3DMark 2000 中编写了一些代码[我认为我的名字仍然在产品的学分中]。这是用 C++ 编写的，但它避免在渲染代码中使用 new/delete。这一切都是在框架的设置/拆卸中完成的，很少有例外。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-22T13:04:53.337

分配更大的内存块通常更快，所以我的建议是分配一个大块，然后从中创建一个内存池。实现您自己的函数以将内存“释放”回池并从中分配内存。

# c# - 用属性序列化对象的最简单方法

> ID：14459138
> 
> 赞同：1
> 
> 时间：2013-01-22T12:59:32.490
> 
> 标签：c#, wpf, image, serialization

我有一个`ObservableCollection`要保存到二进制文件的文件。该集合中的一个项目包含一个类型的字段，`System.Windows.Controls.Image`因此在保存时出现错误：

```
Type 'System.Windows.Controls.Image' in Assembly 'PresentationFramework, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' is not marked as serializable. 
```

我想我可以尝试将 an 转换`Image source`为`byte[]`变量并保存它，但我还想保存一些 Image 属性，例如我添加的事件处理程序或 Effects。

它有什么简单的方法吗？还是有可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:01:52.340

通过这些链接将该图像转换为内存流

[http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/dee0e287-b345-4e01-888a-ecfb9c3f40b0/](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/dee0e287-b345-4e01-888a-ecfb9c3f40b0/)

[http://social.msdn.microsoft.com/forums/en-US/Vsexpressvcs/thread/011c2c24-ffc5-4be5-883b-2430267b33c8](http://social.msdn.microsoft.com/forums/en-US/Vsexpressvcs/thread/011c2c24-ffc5-4be5-883b-2430267b33c8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:03:22.417

您需要通过[SurrogateSelector](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.binary.binaryformatter.surrogateselector.aspx)提供您自己的序列化代理。序列化代理的作用完全取决于您。

# objective-c - performSegueWithIdentifier 技巧以避免初始延迟

> ID：14459140
> 
> 赞同：6
> 
> 时间：2013-01-22T12:59:40.173
> 
> 标签：objective-c, uiviewcontroller, segue

您好，我有一个 ViewController 在按钮上执行 segue。

```
- (IBAction)moveToCoolViewButtonTapped {
    [self performSegueWithIdentifier:@"toCoolView" sender:nil];
} 
```

这工作正常，除了第一次执行时令人讨厌的延迟之外，我猜是由于视图尚未初始化。我显然不想过早地创建很多视图。（从同一个 viewController 计划了其他几个 segues）。所以，也许是一个长镜头：但我想知道是否有人有任何出色的灵感技巧来避免最初的滞后？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-07T15:30:09.073

尝试替换这个

```
[self performSegueWithIdentifier:@"toCoolView" sender:nil]; 
```

有了这个

```
dispatch_async(dispatch_get_main_queue(),^{
    [self performSegueWithIdentifier:@"toCoolView" sender:nil];
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:02:38.007

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
toCoolView *yourViewController = (toCoolView *)[storyboard instantiateViewControllerWithIdentifier:@"toCoolView"];
[self.navigationController pushViewController:yourViewController animated:YES]; 
```

试试那个搭档

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-30T10:43:36.100

嘿，我有同样的问题。看到你的帖子寻找解决方案。我想我终于找到了问题所在。

问题不在于您在 performSegueWithIdentifier 中，而是在您的目标控制器中（无论“toCoolView”带您到哪里）。检查它的 viewDidLoad 并查看是否有任何可能需要额外时间来加载的内容。在我的情况下，我正在分配和初始化导致延迟的 UIImagepickerController，因此我将其从那里删除并将其放置在 ViewDidAppear 中。

只需尝试注释掉目标控制器的 viewDidLoad 中的所有内容，看看它是否加快了序列。

希望能帮助到你

# c++ - 在每个逗号分隔的对象上执行成员函数

> ID：14459143
> 
> 赞同：4
> 
> 时间：2013-01-22T12:59:46.487
> 
> 标签：c++, cimg

以下是[完整清单](http://sorj.de/?p=168)中的相关代码：

```
#include "CImg.h"
using namespace cimg_library;

int main() {
  CImg<unsigned char> src("Tulips.jpg");
  int width = src.width();
  int height = src.height();
  int depth = src.depth();

  //New grayscale images.
  CImg<unsigned char> gray1(width,height,depth,1);
  CImg<unsigned char> gray2(width,height,depth,1);

  // ... 

  (src,gray1,gray2).display("RGB to Grayscale");
} 
```

这条线是如何`(src,gray1,gray2).display("RGB to Grayscale");`工作的？成员函数如何`display`应用于逗号分隔列表中的每个对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T13:06:17.377

[`CImg`](http://cimg.sourceforge.net/reference/structcimg__library_1_1CImg.html)重载`operator,`返回一个[`CImgList`](http://cimg.sourceforge.net/reference/structcimg__library_1_1CImgList.html)对象，该对象是一个包含`CImg`作为操作数给出的两个对象的列表。该对象还重载`operator,`以允许将`CImg`对象添加到列表中。

表达式`(src,gray1,gray2)`等价于`((src,gray1),gray2)`。括号的内部集合`(src,gray1)`，创建`CImgList`，然后`(...,gray2)`附加`gray2`到该列表，返回对同一列表的引用。`CImgList`有成员函数`display`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:56:04.323

说重载运算符，() 必然意味着丑陋的设计是愚蠢的。有很多有用和聪明的方法可以重载这个操作符，CImg 做得很好。如果你说的总是“愚蠢”，你是否认为 C++ 标准会允许它？在这个例子中，C++ 代码读起来很好，肯定比写 CImgList(src,gray1,gray2).display(); 更简单（但等价）；

由于 CImg 是一个加速图像处理算法编写的库（主要用于原型设计），这种构造绝对是有用的。

# php - 在将它们保存到数据库之前从 HTML 元素中删除 ID

> ID：14459146
> 
> 赞同：2
> 
> 时间：2013-01-22T13:00:06.470
> 
> 标签：php, javascript, jquery, html

我正在开发一个可以保存用户创建的 HTML 模板的应用程序。在这里，用户可以使用一些 HTML 组件，并且能够使用这些组件创建静态 HTML 页面。

我正在使用 javascript 函数自动保存页面的内容。

```
 function saveContent(){    
        //var getContent=$('#mainWrap').children().removeAttr('id');
        var $getContent=$('#mainWrap');
        var $finalContent=$getContent.children().removeAttr('id');
        var auto="auto";
        var pageId = <?php echo $pageId;?>; 
        var webId  = <?php echo $webId;?>;
        var userId = <?php echo $userId;?>;
        $.ajax({
            url:"auto_save.php",
            type:"POST",
            dataType:"text",
            data:"txtComp="+$('#mainWrap').html()+"&auto="+auto+"&pageId="+pageId+"&webId="+webId+"&userId="+userId
        }); 
    }   

    var interval = 1000 * 60 * 0.30; // where X is your every X minutes
    setInterval(saveContent,interval); 
```

**问题：我想从用户保存的 HTML 组件中删除 ID，因为 ID 是自动生成的，并且在用户****发布模板**时不需要（创建后在他的域上）。我有一个包装整个页面的主包装器，称为`id=mainWrap`. 如果我尝试像这样删除 ID， `$('#mainWrap').children().removeAttr('id');`它们也会从 DOM 的当前上下文中删除，即它们会从用户正在编辑其模板的页面中删除。

**问题：**如何在不影响`mainWrap`对象当前上下文的情况下从 HTML 元素中删除 ID？

我尝试将它分配给像这样的另一个对象

```
 var $getContent=$('#mainWrap');
    var $finalContent=$getContent.children().removeAttr('id'); 
```

但它仍然失败了。

关于这是否可能的任何评论或更正？还是我以错误的方式解决这个问题？

**更新**：问题在一定程度上得到了解决。接下来我想在用户返回编辑页面时添加 id。我使用此代码获得上述保存的内容

```
 <?php
    $sqlEdit = "select revisionContent from tbl_revision where revisionId='".$_SESSION['contentId']."'"; //The query to get the record
    $rsEdit = $dbObj->tep_db_query($sqlEdit);//The database object to execute the query   
    $resEdit = $dbObj->getRecord($rsEdit);                                                                                       
    $IdLessContent = $resEdit['revisionContent'];//Variable with the record

     ?> 
```

现在，我想在 javascript 中使用这个 PHP 变量，所以我这样做了。

```
 <script language="javascript">
    var getSavedContent = '<?php echo json_encode($IdLessContent); ?>';
    var trimmedCont=($.trim(getSavedContent).slice(1));
    //console.log(trimmedCont);
    var lengthCont= trimmedCont.length;
    var trimmedCont=$.trim(trimmedCont.slice(0,lengthCont-1));
    var pageContent=$('<div class="addId">').append(trimmedCont);  //Here I tried creating a div dynamically and appending the content to the div.But now I am not able to manipulate or work on this dyamic div and get NULL when I alert saying $('.addId').html();
    $('.addId').children().attr('id', 'test');               //I tried doing this but does not work 
```

这不起作用。你能说明一下吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T13:52:45.747

您可以循环浏览您的元素`#mainWrap`并删除`id`类似内容：

```
var getContent = $('#mainWrap');
var finalContent = getContent.parent().clone().find('*').removeAttr('id'); 
```

示例：http: [//jsfiddle.net/7m8g4/6/](http://jsfiddle.net/7m8g4/6/)

安全方面，您应该意识到这是一个客户端脚本，它正在`id`从 html 中删除属性。虽然有一些方法可以操纵 JavaScript 或通过（例如）直接使用虚假数据调用 Ajax 请求中的 URL 来绕过它。

所以你永远不应该只依赖你的 JavaScript。如果由于任何原因 JavaScript 未按预期运行，请确保您的代码不会导致问题。例如，您可以通过搜索`id`属性（使用[正则表达式](http://php.net/manual/en/function.preg-match.php)）来执行此操作，并在仍然`id`找到一些属性的情况下生成错误消息。另一种方法是在服务器端（在 PHP 中）删除它们（如果找到的话）。为此，您可以进行正则表达式搜索并用空字符串或使用子字符串替换匹配项。由你决定！

希望这一切都有意义！

**编辑**

如果您想`id`稍后添加新属性，您可以执行以下操作：

```
var newContent = $(finalContent).first().wrap('<div class="addId" />');
newContent = $(newContent).parent().find('*').each(function(index, value) {
   $(this).attr('id', index);
}); 
```

[在这里](http://jsfiddle.net/7m8g4/7/)的工作中看到这一点。

# php - Wordpress 分页无法超过第 1 页

> ID：14459147
> 
> 赞同：0
> 
> 时间：2013-01-22T13:00:07.827
> 
> 标签：php, wordpress, pagination

在这个网站上工作，它的博客文章在这里：

[http://itsuptous.org/team-pages/](http://itsuptous.org/team-pages/)

分页在第 1 页之后不起作用。将其用作我的查询：

```
 $posts = query_posts($query_string.'&orderby=title&order=asc&posts_per_page=4&paged='.$paged); 
```

这个插件用于我的分页：[http ://wordpress.org/extend/plugins/wp-paginate/faq/](http://wordpress.org/extend/plugins/wp-paginate/faq/)

```
 <?php if(function_exists('wp_paginate')) {
        wp_paginate();
    } ?> 
```

有人有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:08:53.753

@Daniel - 解决了它！将阅读设置都设置为 4。非常感谢。想知道为什么这种差异会引起问题。我以为我可以独立设置每个博客布局每页有多少帖子。我猜不是。

# php - 如何使用 php 和 AJAX 绘制实时图形？

> ID：14459148
> 
> 赞同：5
> 
> 时间：2013-01-22T13:00:09.277
> 
> 标签：php, mysql, ajax, plot, real-time

我是网络开发的新手。我刚开始用php编程。我想开发一个连接到 MySQL 数据库（从服务器）的动态页面，并在绘图中实时显示结果（可能是散点图、直方图）。到目前为止，我设法从我的数据库中获取我的数据并显示图表。但是，我无法实时做到这一点。

我一直在四处寻找。我发现使用 AJAX 进行实时绘图。很好，我做了一些教程并且能够运行示例。我的挑战是绘制图表。

如果有帮助，这正是我想要做的 [http://jsxgraph.uni-bayreuth.de/wiki/index.php/Real-time_graphing](http://jsxgraph.uni-bayreuth.de/wiki/index.php/Real-time_graphing)

我曾尝试运行此代码，但无法运行。

谁能告诉我如何从简单开始？如果我的问题不够清楚，我会详细说明。先感谢您！

@Tim，这是我试图做的。

我的PHP是

```
 <?php

   $con = mysql_connect("localhost","root","");
   if (!$con)
    {
    die('Could not connect: ' . mysql_error());
    }
    else
    //echo "Database Connected!";
   mysql_select_db("DB", $con);
   $sql=mysql_query("SELECT Def_ID, Def_BH FROM BBB WHERE Ln_Def < 1200");

   $Def_ID= array();  
   $Def_BH = array();

  while($rs = mysql_fetch_array($sql))
  {
    $Def_ID[] = $rs['Def_ID'];
    $Def_BH [] = $rs['Def_BH '];

  }

  mysql_close($con);

  $json = array(
  'Def_ID' => $Def_ID,
  'Def_BH' => $Def_BH
  );

  echo json_encode($json);
?> 
```

输出是

```
{"Df_ID":["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41"],"Df_BH":["1","1","1","5","5","2","1","1","1","1","2","1","1","1","1","1","1","1","1","1","1","1","2","1","1","2","1","3","10","1","2","1","1","1","2","2","2","1","1","1","1","1"]} 
```

然后我的脚本如下

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
    <html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Flot Example: Real-time updates</title>
        <link href="../examples.css" rel="stylesheet" type="text/css">
        <!--[if lte IE 8]><script language="javascript" type="text/javascript" src="../../excanvas.min.js"></script><![endif]-->
        <script language="javascript" type="text/javascript" src="../../jquery.js"></script>
        <script language="javascript" type="text/javascript" src="../../jquery.flot.js"></script>
         <script language = "javascript" type="text/javascript" src="Include/excanvas.js"></script>
        </head>
    <body>

        <div id="placeholder" style="width:600px;height:300px"></div>

    </body>

    <script type="text/javascript">
    function doRequest(e) {
    var url = 'fakesensor.php'; // the PHP file
    $.getJSON(url,data,requestCallback); // send request
}

function requestCallback(data, textStatus, xhr) {
  //       // you can do stuff with "value" here
   $.each(data, function(index, value) {
        console.log(value.Df_ID); 
        console.log(value.Df_BH); 
          });
  }

    </script>

    </html> 
```

我想绘制 Def_Id 与 Def_BH。你看到出了什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T13:04:34.980

查看[高图表动态更新](http://www.highcharts.com/demo/dynamic-update);-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T13:26:27.737

首先，您需要正确输出。在我看来，[JSON](http://json.org/)是使用异步请求在服务器和客户端之间传输数据的最佳格式。它是一种可以被许多编程语言轻松解析的数据格式。

接下来，你需要弄清楚你要转移什么。您是要一次传输大量数据并使用 javascript 对其进行动画处理，还是计划为每个新位发送一个请求？

我的建议：尽可能减少请求的数量。请求很慢。

你怎么知道要寄什么？你要打时间戳吗？身份证？一切皆有可能。因为 ID 是自动递增的，所以你不妨使用它。

所以首先，我要设置我的 PHP：

```
// get user input
$lastID = intval($_GET['lastid']);

// --------------------------------
// FETCH RECORDS FROM DATABASE HERE
// --------------------------------
// $sql = "SELECT * FROM `graph` WHERE `id` > " . $lastID;

// CREATE DUMMY CONTENT
$data = array();

for($i = $lastID; $i < $lastID + 50; $i++) {
    array_push($data, array(
        'id'        => $i,
        'position'  => array(
            'x' => $i,
            'y' => mt_rand(0, 10) // random value between 0 and 10
        )
    ));
}
// END CREATING DUMMY CONTENT

// create response
$json = array(
    'lastID'    => $data[count($data) - 1]['id'],
    'data'      => $data
);

// display response
echo json_encode($json); 
```

如您所见，我正在使用大量数据`lastid`作为输入。这种输入很重要。

现在，我们将设置我们的 javascript 来获取请求。我正在使用[jQuery 库](http://jquery.com/)来处理我的 AJAX 请求，因为我是 jQuery 粉丝！

```
var interval = setInterval(doRequest, 4000); // run "doRequest" every 4000ms
var lastID = 0; // set 0 as default to ensure we get the data from the start

function doRequest(e) {
    var url = 'my-file.php'; // the PHP file
    var data = {'lastid': lastID}; // input for the PHP file

    $.getJSON(url, data, requestCallback); // send request
}

// this function is run when $.getJSON() is completed
function requestCallback(data, textStatus, xhr) {
    lastID = data.lastID; // save lastID

    // loop through data
    $.each(data, function(index, value) {
        // you can do stuff with "value" here
        console.log(value.id); // display ID
        console.log(value.position.x); // display X
        console.log(value.position.y); // display Y
    });
} 
```

剩下的就是将结果输出到图表中！

* * *

当您查看您的 PHP 响应时，您会看到有一个对象具有两个属性，其中包含一个数组。

```
{
    "Df_ID": [1, 2, 3, ...],
    "Df_BH": [1, 2, 3, ...]
} 
```

您可以通过...调用这些属性来访问这些属性`data.Df_ID`，`data.Df_BH`

```
function requestCallback(data, textStatus, xhr) {
    console.log(data.Df_ID, data.Df_BH);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T13:06:43.430

这些是我在谷歌找到的 -

*   [http://www.makeuseof.com/tag/add-graphs-php-web-app-pcart/](http://www.makeuseof.com/tag/add-graphs-php-web-app-pchart/)
*   [http://www.ebrueggeman.com/phpgraphlib](http://www.ebrueggeman.com/phpgraphlib)

您可以创建动态图并无限地使用 AJAX 调用。

# sql-server - 用于 Delphi 的 FastReport4 中报表设计的 SQL 查询

> ID：14459151
> 
> 赞同：0
> 
> 时间：2013-01-22T13:00:17.190
> 
> 标签：sql-server, delphi, reporting, delphi-7, fastreport

我用 Delphi7 开发了一个 Account 程序，用 Fastreport4 设计报告我有一个 Bill 表，它有 6 列（BillID、BillDate、BillDesc、BillPrice、DebitID、CreditID），其中 DebitID 和 CreditID 是整数值，并且与具有两个的 Account 表有关系列（AccID，AccName）。我想在 Delphi7 中使用 FastReport 创建一个报告，其中包含以下列的结果：

**报告名称：Mr.x 的余额**

```
BillID , BillDate , BillDesc , DebitPrice , CreditPrice , 剩余
-------------------------------------------------- ---------------
1 , 2012/01/22, 样本 Desc1, 100USD , 0 , -100USD
1 , 2012/01/22, 样本 Desc2, 0 , 100USD , 0USD

```

我认为如果我可以创建一个具有上述结果的 SQL 查询，那么创建报告就很容易。如果你有任何想法，请告诉我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T00:06:59.240

```
select BillID , BillDate ,BillPrice,  BillDesc, b.accid, c.accid
from a Bill 
left outer join account b on a.DebitID = b.AccID
left outer join account c on a.CreditID = c.AccID 
```

然后，您必须评估您的主数据/明细数据带的“打印前事件”。

```
if (b.accid <> '') then
  DebitPrice := BillPrice
else
  CreditPrice := BillPrice 
```

注意：DebitPrice、CreditPrice 是全局变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:45:26.110

尝试子查询

```
select a.BillID, a.BillDate, a.BillDesc,
(select b.BillPrice from Bill b inner join Account c on b.DebitID=c.AccID
where b.BillID=a.BillID) as DebitPrice,
(select d.BillPrice from Bill d inner join Account e on d.CreditID=e.AccID
where d.BillID=a.BillID) as CreditPrice
from Bill a 
```

我没有测试它，但我认为它会起作用，请告诉我

# android - 在我的应用程序中集成时钟小部件

> ID：14459156
> 
> 赞同：0
> 
> 时间：2013-01-22T13:00:33.273
> 
> 标签：android, android-widget

有没有办法可以在我的应用程序中集成（或重用）Android 内置小部件（如时钟或电池）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:36:42.573

我不认为你可以在你的应用程序中使用另一个应用程序（小部件实际上是另一个应用程序），但如果你需要一个时钟来放入你的应用程序，你可以使用`AnalogClock`view.

// 当我看到一个小部件的代码时，它包括`RemoteViews`它需要的构造函数`package name`，以及`layout id`

# ruby-on-rails - 如何使用 Rails 资产管道更改 jquery 版本

> ID：14459161
> 
> 赞同：6
> 
> 时间：2013-01-22T13:00:45.050
> 
> 标签：ruby-on-rails, asset-pipeline

应用程序.js

```
//= require jquery
//= require jquery_ujs
//= require_tree .
//= require active_scaffold 
```

在客户端

```
<script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-ui.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-ui-timepicker-addon.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery/active_scaffold.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery/jquery.editinplace.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery/date_picker_bridge.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery/draggable_lists.js?body=1" type="text/javascript"></script>
<script src="/assets/active_scaffold.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script> 
```

/assets/jquery.js?body=1 包含 v1.9.0 的 jquery，但我希望拥有 1.6 版本的 jquery。

**如何使用 rails 资产管道定义 jquery 版本？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-22T13:21:07.737

对 Rails 的 jQuery 支持来自 gem [jquery-rails](https://github.com/rails/jquery-rails)

当您执行`rails new {app}`时，默认情况下会包含此 gem。以及 application.js 中的相应 include 语句

1.  来自[jquery-rails github README](https://github.com/rails/jquery-rails/blob/master/README.md)的最新版本支持。

    jQuery 1.9.0

2.  如果对 1.6.2 的支持很好，那么您可以查看[此拉取请求](https://github.com/rails/jquery-rails/pull/11)以了解它何时被包含，并包含该版本的 jquery-rails。大多`1.0.12`

3.  作为最后的手段 - 如果您删除此 gem 并直接将它们导入`assets/javascripts`或从网络引用它们会更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-29T17:53:04.617

如果您使用的是 jquery-rails，这里是捆绑的 jQuery 版本到 jquery-rails 版本的映射 ( [VERSIONS.md )。](https://github.com/rails/jquery-rails/blob/master/VERSIONS.md)

# c# - iAnywhere 中的错误连接状态

> ID：14459166
> 
> 赞同：1
> 
> 时间：2013-01-22T13:00:51.887
> 
> 标签：c#, sqlanywhere

非常..愚蠢的问题。

从 c# 代码调用 SQLAnywhere12。

*   对可用数据库进行数据库调用并正确应答。
*   如果数据库在最初工作后关闭（例如网络），新连接就会挂起。

我在调用堆栈上看到的最后一件事是：

*   Intellitrace.OpenConnection
*   SAConnection.Open
*   SAConnectionPoolManager.AllocateConnection
*   ->监视器。输入

Monitor.Enter 似乎永远在等待。

似乎没有异常被解雇。

所以我的想法是查看连接状态，只有在连接打开时才触发命令（即使在那里感觉很糟糕 - 在询问状态后可以直接断开连接）

如果我查看数据库的连接对象（ iAnywhere.Data.SQLAnywhere ），则有一个可用的 ConnectionState。此 ConnectionState 显示：“打开”。

如果没有与数据库的连接可用，我希望“损坏”或“关闭”。

我如何告诉 SQLAnywhere 更新连接状态？

或者是否有更好的可能性得到一个例外？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:56:51.320

问题被“解决”了。

Telerik OpenAccess 用作 ORM。它有一个自己的连接池。

禁用 Telerik 连接池和启用 ADo.Net 连接池有帮助。

# python - 如何在 Python 中使用异常异常？

> ID：14459169
> 
> 赞同：0
> 
> 时间：2013-01-22T13:00:54.957
> 
> 标签：python, exception, printing, except

我需要制作一个不会给我错误的代码，例如，我想要打印再试一次。

我在其他主题中学习，但我对此一无所知。我有这个代码：

```
def conversor(anosluz):
    try:
        km = float(anosluz * (9.459 * 10**12)) 
        return km
    except Exception, e:
        print 'Ooops! O valor que inseriste nao e o correcto, tenta de novo.', e

if __name__=='__main__':
    anosluz = input('Insira a distancia em anos luz: ')
    resultado = conversor(anosluz)
    print resultado 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T13:05:08.277

将您的代码分为输入/输出和计算：

```
def conversor(anosluz):
    # just convert the given anosluz into km
    km = anosluz * (9.459 * 10**12) 
    return km

if __name__=='__main__':
    while True:
        # repeat until *break*
        anosluz = raw_input('Insira a distancia em anos luz: ')
        try:
            resultado = conversor(float(anosluz))
        except ValueError, e:
            # oh, conversor raised an exception
            print 'Ooops! O valor que inseriste nao e o correcto, tenta de novo.', e
        else:
            # no exception, print result and exit
            print resultado
            break 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:04:48.613

首先你**不能**`input`在python2中使用。如果要获取整数使用`int(raw_input())`，否则使用`float(raw_input())`。`input`它**不会**将字符串转换为**执行**代码的数字，因此您正在使用它的程序的安全性中创建一个巨大的漏洞。

您可以用来获取 python 的内置数据类型作为输入的另一个函数是[`ast.literal_eval`](http://docs.python.org/2/library/ast.html#ast.literal_eval).

其次，您可以使用一些循环：

```
result = None
while True:
    num = raw_input("Insert number: ")
    try:
        result = float(num) * (9.459 * 10**12)
    except Exception:
        print "Try again!"
    else:
        break
print "The result is: ", result 
```

基本上，一个`try`,`except`语句会阻止异常并让您处理它。在您的情况下，您想重复输入请求，因此您应该将输入请求放入处理错误的循环中，并让`converser`函数引发异常。

# java - 带有 POJO 数组的 Spring MVC 和 jquery 发布请求

> ID：14459171
> 
> 赞同：0
> 
> 时间：2013-01-22T13:01:00.793
> 
> 标签：java, jquery, spring-mvc

我有一个简单的 POJO Java 类（未显示 getter 和 setter）

```
public class VacationInfo {

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Long id;

@Temporal(TemporalType.TIMESTAMP)
private Date vacationFrom;

@Temporal(TemporalType.TIMESTAMP)
private Date vacationTo; 
```

, 带有下一个方法的 Spring MVC 控制器

```
@RequestMapping(value = "updateVacations", method = RequestMethod.POST)
public String updateVacations(@RequestParam VacationInfo[] vacationInfos) {
    ...
} 
```

和 jQuery 发布请求

```
 $.ajax({
      type: "POST",
      url: "updateVacations",
      dataType: 'json',
      data: vacationInfos
    }); 
```

其中“vacationInfos”是一个带有 JSON 对象的数组，代表 VacationInfo 类：

```
[
 {
  vacationFrom: "01-01-2013",
  vacationTo: "01-01-2013"
 },
 {
  vacationFrom: "01-01-2013",
  vacationTo: "01-01-2013"
 }
] 
```

但是当我请求时 - 我收到了 HTTP 400 错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-03T10:48:30.830

## 编写此代码是为了获取所有已检查的表单并将它们全部发布到 Spring 控制器

jQuery方法::

```
 $('#testButton').click(function(){
               var testList= [];

            $('.submit').filter(':checked').each(function() {
            var checkedFrom= $(this).closest('form');
            var testPojo= checkedFrom.serializeObject();
            testList.push(testPojo);
            });

            $.ajax({
            'type': 'POST',
                'url':"testMethod",
                'contentType': 'application/json',
                'data': JSON.stringify(testList),
                'dataType': 'json',
                success: function(data) {

                if (data == 'SUCCESS')
                {
                alert(data);
                }
                else
                    {
                    alert(data);
                    }

                }
            });

        }); 
```

而 jquery 提供了两个级别的序列化，如 serialize() 和 serializeArray()。但这是序列化的客户方法

用户定义的对象。

```
$.fn.serializeObject = function() {
    var o = {};
    var a = this.serializeArray();
    $.each(a, function() {
        if (o[this.name]) {
            if (!o[this.name].push) {
                o[this.name] = [o[this.name]];
            }
            o[this.name].push(this.value || '');
        } else {
            o[this.name] = this.value || '';
        }
    });
    return o;
}; 
```

在弹簧控制器中

```
@RequestMapping(value = "/testMethod", method = RequestMethod.POST)
    public @ResponseBody ResponseStatus testMethod(HttpServletRequest request,
            @RequestBody TestList testList)
            throws Exception {
..............
} 
```

其中 TestList 是另一个类，它被编写用于处理表单发布，其中包含用于测试方法的 mvc 控制器中的 Test 数组

```
public  class TestList extends ArrayList<Test> {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:25:13.453

尝试使用`@RequestBody`而不是`@RequestParam`

```
@RequestMapping(value = "updateVacations", method = RequestMethod.POST)
    public String updateVacations(@RequestBody  VacationInfo[] vacationInfos) {
    ...
} 
```

`@RequestBody`方法参数注释表示方法参数应绑定到 HTTP 请求正文的值，在您的情况下为 JSON 数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T10:55:54.140

我回答了我的问题。表单客户端我将日期作为时间戳发送。因为服务器不应该知道客户端是什么时区，也不应该依赖于特定的日期格式（这是最佳实践之一）。之后，我在 VacationInfo 日期字段上添加 JsonDeserializer 注释，这是工作。

```
public class VacationInfo {
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Long id;

@JsonDeserialize(using=DateDeserializer.class)
@Temporal(TemporalType.TIMESTAMP)
private Date vacationFrom;

@JsonDeserialize(using=DateDeserializer.class)
@Temporal(TemporalType.TIMESTAMP)
private Date vacationTo; 
```

Ajax POST 请求

```
[
  {
    vacationFrom: "1359197567033",
    vacationTo: "1359197567043"
  },
  {
    vacationFrom: "1359197567033",
    vacationTo: "1359197567043"
  }
] 
```

如果您需要以特定格式（例如“mm-dd-yyyy”）将日期作为字符串发送 - 您需要定义自己的 JsonDesiarilizer（[Jackson](http://jackson.codehaus.org/)中的 org.codehaus.jackson.map 包）类，它扩展了 frpm JsonDeserializer 类并实现你的逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-05T08:58:31.617

您可以创建自己的格式化程序来解析传入的请求。[在这里](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/format/Formatter.html "org.springframework.format.Formatter<T>")阅读。下面的代码稍微修剪了一下。

```
public class LinkFormatter implements Formatter<List<Link>> {
    @Override
    public List<Link> parse(String linksStr, Locale locale) throws ParseException {
        return new ObjectMapper().readValue(linksStr, new TypeReference<List<Link>>() {});
    }
} 
```

查询：

```
$.ajax({
    type: "POST",
    data: JSON.stringify(collection)
    ...
}); 
```

弹簧控制器：

```
@RequestParam List<Link> links 
```

并且不要忘记在应用程序上下文中注册它：

```
<bean id="conversionService" class="org.springframework.format.support.FormattingConversionServiceFactoryBean">
<property name="formatters">
  <set>
    <bean class="LinkFormatter"/>
  </set>
</property> 
```

# java - EasyMock 验证方法调用和执行方法

> ID：14459172
> 
> 赞同：0
> 
> 时间：2013-01-22T13:01:00.810
> 
> 标签：java, easymock

我有一个返回的方法`void`，我知道如何验证该方法是否已被调用：

```
MyValidator validator = createMock(MyValidator.class);      
expect(validator.validate());
replay(validator);
classUnderTest.submit(); //this will call validator.validate()
verify(validator); 
```

但我也希望执行真正的方法 MyValidator.validate() 。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:08:15.273

我从未使用过它，但[andDelegateTo()](http://www.easymock.org/api/easymock/3.1/org/easymock/IExpectationSetters.html#andDelegateTo%28java.lang.Object%29)似乎正是您想要的：

```
MyValidator realValidator = new MyValidator();
MyValidator mockedValidator = createMock(MyValidator.class);
expect(mockedValidator.validate()).andDelegateTo(realValidator); 
```

# php - 从继承中排除方法（没有：私有）

> ID：14459173
> 
> 赞同：0
> 
> 时间：2013-01-22T13:01:02.773
> 
> 标签：php, oop

我有一个前端控制器，实例化如下：

```
$request = new FrontController();
$request->route(); 
```

然后该`route()`方法根据请求根据需要动态调用适当的控制器。

现在（我认为）我希望我的所有控制器都扩展 FrontController 以便它们都可以访问一组共享的方法和属性，但我不希望它们继承该`route()`方法，因为这可能会导致无限环形。但是，如果该`route()`方法被标记为私有，那么我就无法如上所示实例化该对象。

我找到的唯一解决方案是`self::route()`从 FrontController 的构造函数中调用，然后在每个子控制器中定义一个空白构造函数。就是觉得很草率。

有没有办法从继承中排除某些方法而不将它们标记为私有？还是应该换个角度看问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T13:07:34.827

您可以将`final`修饰符添加到方法中，以防止它被子类化覆盖。

```
class FrontController{
   final public function route() {
       // ...
   }
} 
```

有关更多示例和详细说明，请参阅以下 PHP 手册条目：

[http://php.net/manual/en/language.oop5.final.php](http://php.net/manual/en/language.oop5.final.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:12:28.393

> 还是应该换个角度看问题？

很可能，是的。首先，您应该考虑一下您到底要解决什么，因为我什至没有*看到*真正的问题。从您所写的内容来看，没有无限循环的风险。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T15:36:02.150

您是在问是否可以选择性地“关闭”继承的项目？恐怕这个答案是“不”，这基本上是根据定义。

两种选择：

在您不想实现某某方法（/property）的子类中，您可以覆盖它并返回某种“未实现”结果。

如果可以的话，在层次结构中创建一系列基类，每个基类都建立在最后一个之上。然后您的子类可以从基类之一继承，但您不必让所有子类都继承自同一个基类。

imo 这两种方法都很丑陋。当我年轻的时候（呃），我曾经对其中哪一个更可取持怀疑态度，但我早就放弃了，因为它基本上是一个六分球和两个三分球。我认为，如果有的话，这取决于您所写的实际环境中的规范。

但大概如果你坐下来想一想，你就会明白为什么继承会以这种方式实现。

# mysql - 如何在 mysql 过程中编写“WITH CTE AS (SELECT ROW_NUMBER() OVER (ORDER BY CASE)”

> ID：14459174
> 
> 赞同：0
> 
> 时间：2013-01-22T13:01:01.933
> 
> 标签：mysql, sql-server, stored-procedures

我有一个 SQL Server 过程，我需要将它转换为在 mysql 中工作。

下面是我尝试过的 Mysql 转换过程，但它不完整......

```
DELIMITER $$

DROP PROCEDURE IF EXISTS `SelectjqGridUsers` $$
CREATE PROCEDURE `SelectjqGridUsers` (IN PageIndex INT,IN SortColumnName VARCHAR(50),IN SortOrderBy VARCHAR(4) ,IN NumberOfRows INT ,OUT TotalRecords INT)

BEGIN

 DECLARE StartRow INT;
 DECLARE CTE VARCHAR(100);

 SELECT  TotalRecords = ( SELECT COUNT(1) FROM  Users );

 SET StartRow = (PageIndex * NumberOfRows ) + 1 ;

END $$

DELIMITER ; 
```

这是我原来的 SQL Server 过程：

```
CREATE PROC [SelectjqGridUsers]
@PageIndex INT ,
@SortColumnName VARCHAR(50) ,
@SortOrderBy VARCHAR(4) ,
@NumberOfRows INT ,
@TotalRecords INT OUTPUT
AS 
BEGIN

    SET NOCOUNT ON 

    SELECT  @TotalRecords = ( SELECT    COUNT(1)
                              FROM      [Users]
                            )

    DECLARE @StartRow INT
    SET @StartRow = ( @PageIndex * @NumberOfRows ) + 1 ;

    WITH    CTE
              AS ( SELECT   ROW_NUMBER() OVER ( ORDER BY CASE
                                                          WHEN @SortColumnName = 'UserID'
                                                          AND @SortOrderBy = 'asc'
                                                          THEN UserID
                                                         END ASC, CASE
                                                          WHEN @SortColumnName = 'UserID'
                                                          AND @SortOrderBy = 'desc'
                                                          THEN UserID
                                                          END DESC, CASE
                                                          WHEN @SortColumnName = 'UserName'
                                                          AND @SortOrderBy = 'asc'
                                                          THEN UserName
                                                          END ASC, CASE
                                                          WHEN @SortColumnName = 'UserName'
                                                          AND @SortOrderBy = 'desc'
                                                          THEN UserName
                                                          END DESC, CASE
                                                          WHEN @SortColumnName = 'FirstName'
                                                          AND @SortOrderBy = 'asc'
                                                          THEN FirstName
                                                          END ASC, CASE
                                                          WHEN @SortColumnName = 'FirstName'
                                                          AND @SortOrderBy = 'desc'
                                                          THEN FirstName
                                                          END DESC , CASE
                                                          WHEN @SortColumnName = 'MiddleName'
                                                          AND @SortOrderBy = 'asc'
                                                          THEN MiddleName
                                                          END ASC, CASE
                                                          WHEN @SortColumnName = 'MiddleName'
                                                          AND @SortOrderBy = 'desc'
                                                          THEN MiddleName
                                                          END DESC , CASE
                                                          WHEN @SortColumnName = 'LastName'
                                                          AND @SortOrderBy = 'asc'
                                                          THEN LastName
                                                          END ASC, CASE
                                                          WHEN @SortColumnName = 'LastName'
                                                          AND @SortOrderBy = 'desc'
                                                          THEN LastName
                                                          END DESC, CASE
                                                          WHEN @SortColumnName = 'EmailID'
                                                          AND @SortOrderBy = 'asc'
                                                          THEN EmailID
                                                          END ASC, CASE
                                                          WHEN @SortColumnName = 'EmailID'
                                                          AND @SortOrderBy = 'desc'
                                                          THEN EmailID
                                                          END DESC ) AS RN ,
                            UserID ,
                            UserName ,
                            FirstName ,
                            MiddleName ,
                            LastName ,
                            EmailID
                   FROM     [Users]
                 )
        SELECT  UserID ,
                UserName ,
                FirstName ,
                LastName ,
                MiddleName ,
                EmailID
        FROM    CTE
        WHERE   RN BETWEEN @StartRow - @NumberOfRows
                   AND     @StartRow - 1

    SET NOCOUNT OFF

END 
```

谁能帮我完成这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:55:26.807

嗯，一方面，`WITH`在 MySQL 中没有直接等效的 CTE（语句开头的子句）。也没有确切的替代品`ROW_NUMBER()`。

但是，您可能会理解并（希望）接受这样一个事实，即人类语言中的句子并不总是逐字翻译成另一种语言。同样，用一种 SQL 编写的 SQL 查询可能不会也不必转换为不同的多种子句 for 子句。要翻译查询，您需要两件同样重要的事情：了解查询的作用*以及*在目标 SQL 种类中的通用性。

您正在翻译的存储过程实现了对特定表的动态排序行的动态分页。

关于分页，SQL Server 没有它的本机语法，就像 MySQL 的`LIMIT ... OFFSET ...`功能一样。一个可能最典型的解决方法，你也可以在这里看到，是使用`ROW_NUMBER()`函数和子选择（在这种情况下，子选择恰好采用 CTE 的形式）。这是如何运作的？`ROW_NUMBER()`根据特定的排序条件为子查询中的每一行分配数字，主查询只是过滤这些数字以获取*一系列*行，从而有效地为您提供一个页面。

在 MySQL 中你不需要任何类似的东西，仅仅因为它提供了`LIMIT ...`和`OFFSET ...`，当在存储过程的上下文中使用时，它们都可以接受整数类型的参数或本地整数类型的变量作为它们的参数（嗯，它们可以[如果您使用的是 MySQL 5.5.6+](http://dev.mysql.com/doc/refman/5.5/en/select.html#id854806) )。

至于动态排序，在 SQL Server 中，排序必须应用于`ROW_NUMBER()`函数，因为它与动态分页结合使用。但在 MySQL 中，您只需将`ROW_NUMBER()`'`ORDER BY`子句直接移动到（主）查询。

因此，最后，这就是我想出的替代`SELECT`存储过程中查询的方法：

```
SELECT  UserID ,
        UserName ,
        FirstName ,
        LastName ,
        MiddleName ,
        EmailID

FROM    Users

ORDER BY
        CASE WHEN @SortColumnName = 'UserID'     AND @SortOrderBy = 'asc'  THEN UserID     END ASC,
        CASE WHEN @SortColumnName = 'UserID'     AND @SortOrderBy = 'desc' THEN UserID     END DESC,
        CASE WHEN @SortColumnName = 'UserName'   AND @SortOrderBy = 'asc'  THEN UserName   END ASC,
        CASE WHEN @SortColumnName = 'UserName'   AND @SortOrderBy = 'desc' THEN UserName   END DESC,
        CASE WHEN @SortColumnName = 'FirstName'  AND @SortOrderBy = 'asc'  THEN FirstName  END ASC,
        CASE WHEN @SortColumnName = 'FirstName'  AND @SortOrderBy = 'desc' THEN FirstName  END DESC,
        CASE WHEN @SortColumnName = 'MiddleName' AND @SortOrderBy = 'asc'  THEN MiddleName END ASC,
        CASE WHEN @SortColumnName = 'MiddleName' AND @SortOrderBy = 'desc' THEN MiddleName END DESC,
        CASE WHEN @SortColumnName = 'LastName'   AND @SortOrderBy = 'asc'  THEN LastName   END ASC,
        CASE WHEN @SortColumnName = 'LastName'   AND @SortOrderBy = 'desc' THEN LastName   END DESC,
        CASE WHEN @SortColumnName = 'EmailID'    AND @SortOrderBy = 'asc'  THEN EmailID    END ASC,
        CASE WHEN @SortColumnName = 'EmailID'    AND @SortOrderBy = 'desc' THEN EmailID    END DESC

LIMIT   NumberOfRows
OFFSET  StartRow
; 
```

不过，有一个问题。和 的参数化`LIMIT`只能`OFFSET`以*单个*引用（对参数或变量）的形式完成，即您不能在那里使用*表达式*。所以，我不得不简单地`OFFSET StartRow`在上面使用。*但是，除非*您还像这样更改`SET StartRow`语句，否则它将为您提供与 SQL Server 版本返回的页面不同的页面：

```
SET StartRow = (PageIndex - 1) * NumberOfRows + 1 ; 
```

# regex - 查找字符串并用退格替换

> ID：14459176
> 
> 赞同：0
> 
> 时间：2013-01-22T13:01:22.830
> 
> 标签：regex, netbeans, replace

我正在使用 IDE——就我而言，Netbeans，但我想我的问题更笼统——我有以下内容：

```
html
{
margin: 0px;
} 
```

这种结构在整个 CSS 文件中重复出现；左花括号在单独的一行上。我想要的是这样的：

```
html{
margin: 0px;
} 
```

基本上，我想匹配一行上的所有左花括号并将它们移动到前一行的末尾。

我在正则表达式中将它们与此匹配：

```
^\{$ 
```

但我不知道如何用“*退格一次然后{* ”填充替换框

显然退格是 ASCII 8，但我不知道如何输入 ASCII 码。

有什么方法可以做到这一点，ASCII 与否？

* * *

我想到了：

找到这个：

```
(.)\n\{ 
```

替换为：

```
$1{ 
```

查找后跟新行和左大括号的任何字符，用该字符和左大括号替换（通过组引用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:04:47.950

您可以改用组

匹配：`(\w+)\s*\{`

用。。。来代替：`$1{`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:26:19.170

这个也有效：

```
\r\n{ 
```

取而代之

```
{ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T13:39:33.690

要了解的重要一点是您需要匹配和替换*字符*，而不是*击键*。在您的情况下，这意味着您想用字符花括号替换字符换行花括号。

您可以搜索的表达式是`(.)\n\{`，并且您想将其替换为`$1{`

对于那些使用其他语言的人，您可能需要使用`\1`而不是`$1`，它代表任何匹配的字符`(.)`。

# javascript - 比较日期时的位置

> ID：14459180
> 
> 赞同：1
> 
> 时间：2013-01-22T13:01:37.857
> 
> 标签：javascript

如果我使用该策略来比较此处显示的基于文本的日期：[使用 JavaScript 比较两个日期](https://stackoverflow.com/questions/492994/compare-dates-with-javascript)。

假设用户输入“03/02/2013”​​（带有“/”的格式将被尊重），我将其与“04/01/2013”​​进行比较。在欧洲日历中，第一个日期是 2 月 3 日，第二个日期是 1 月 1 日。但在美国日历中，第一个是 3 月 2 日，第二个是 4 月 1 日。对于欧洲标准，第一个日期大于第二个，但对于美国标准，第二个更大。

链接中的这种方法是否考虑了日期位置？如果我的电脑不采用欧洲版本，我还没有找到一种方法来测试这个，这就是我问的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:11:48.147

不，那里的策略不会为您处理日期本地化。

*Javascripts 内部日期对象确实考虑了本地化。但这仅取决于浏览器/机器区域设置，它**不一定**必须匹配用户日期格式，位于它前面*

而且您无法区分 DD/MM/YYYY 和 MM/DD/YYYY 格式。*例外情况：DD > 12* 没有关于用户的更多信息。

您当然可以使用浏览器/机器或 IP 地址的本地化来获取位置或其他内容，并根据此信息处理格式，但这很容易导致错误的结果。

我宁愿确保`Date`对象构造正确。

例如，通过提供一个日期选择器，让用户分别选择年月和日，以避免由于格式而导致日期模糊。

因为您无法确定坐在 PC 前的用户正在使用什么格式。

例如：我是欧洲人，并且在 enUS 上有我的浏览器区域设置。

因此

然后你可以构造你的日期对象，`new Date(YEAR,MONTH,Day)` 例如 ->

```
var year1 = 2013; //Suppose those variables will be handle by some user input method
var year2 = 2013;

var month1 = 0; //January (Months are zero based in javascripts Date Object)
var month2 = 3; //April

var day1 = 3;
var day2 = 1

var date1 = new Date(year1,month1,day1);
var date2 = new Date(year2,month2,day2);

console.log(date2.getTime() > date1.getTime()); //true 
```

并且完全避免这个问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:16:29.143

给定链接中的转换方法检查构造函数类型。如果您将数据作为字符串提供转换方法，它将使用标准日期构造函数实例化一个日期对象，该构造函数需要是符合 RFC 2822 的时间戳。

当然“03/02/2013”​​是一个有效且合规的时间戳。它总是会在 3 月 2 日返回。如果是欧洲格式，您将如何识别？？？

您可以编写一些使用“toLocaleDateString”方法的代码来进行比较。然后，您将知道您的应用程序当前是否在欧洲机器上查看。在你的例子中：

```
new Date("03/02/2013").toLocaleDateString() 
```

将在欧洲返回“2.3.2013”

基本检查（仅当点存在时，才可以这样做）：

new Date("03/02/2013").toLocaleDateString().split('.').length === 3

如果返回 true，您可能在欧洲机器上。

# include - 如何指定完全不是强制性的多个包含

> ID：14459186
> 
> 赞同：0
> 
> 时间：2013-01-22T13:01:52.807
> 
> 标签：include, uml, use-case

假设我有*三个*用例：

*第一个*和*第二个*用例是不能同时执行的简单操作。但是，*第三个*只能在第一个**或**第二个发生时发生。我必须在下面的模型中指定这个吗？如果是，**如何？**该模型现在给我的印象是，必须同时执行第一个和第二个用例（在系统中不是这样）才能执行第三个**。**

![在此处输入图像描述](../Images/93092cb715035be7c435f8a9f9f4b9d3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:53:43.620

尝试使用先决条件对其进行建模：“用例的先决条件在让用例开始之前宣布系统将确保为真”。（A. Cockburn，编写有效的用例，第 81 页）

具体如何注释先决条件取决于您的工具。前提条件通常以文本形式写下来（非 IT 利益相关者可读）或明确引用另一个用例。

优点：清洁解决方案。整洁的图表。可能的缺点：您只会在完整的文档中看到这一点。可能的解决方法：在活动图中定义此类 if/else 相关决策，并在用例中通过注释/超链接引用该决策。

# azure - 虚拟机存储

> ID：14459187
> 
> 赞同：0
> 
> 时间：2013-01-22T13:01:54.317
> 
> 标签：azure

如果假设 3 个虚拟机位于负载平衡端点下。在这些虚拟机中运行的应用程序会产生一些需要下载到客户端本地计算机的结果文件。因此，如果客户请求列出他的所有文件，那么一台虚拟机如何知道其他虚拟机上可能存在的文件？

是否可以通过将文件存储在 blob 中而不是 vhd 磁盘中并且还写入表和队列中的虚拟机运行应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T13:10:34.997

您可以使用 Blob 存储，并简单地从任意数量的实例访问同一个存储帐户。

请查看此链接以获取更多信息：

[http://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/](http://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:10:30.423

在 Azure 中，每个 VM 都独立于其他 VM。正如您正确指出的那样，没有一台虚拟机了解其他虚拟机。

解决方案是使用一种 SaaS 存储选项（如 blob 存储或 Azure SQL 数据库），这些选项不是单个 VM 本地的，并且可以由拥有密钥的所有应用程序访问。

# ios - 嵌入式 Youtube 视频 - UIWebView 和 Safari 的区别

> ID：14459188
> 
> 赞同：0
> 
> 时间：2013-01-22T13:01:59.883
> 
> 标签：ios, objective-c, uiwebview, youtube

为什么同一 Youtube URL 的 Safari 和 UIWebView 之间存在视觉差异？

```
// UIWebView
NSURL *url = [NSURL URLWithString:@"http://www.youtube.com/embed/NhPqn7MuDy0"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[webView loadRequest:request];

// Safari
NSURL *url = [NSURL URLWithString:@"http://www.youtube.com/embed/NhPqn7MuDy0"];
[[UIApplication sharedApplication] openURL:url]; 
```

![苹果浏览器](../Images/1c7f86ca47deeb15a3f2d84c23156ace.png) ![UIWebView](../Images/443de3a29c416a7a8093a3ef575c113b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:20:02.513

Nitro Java script engine is NOT supported for UIWebView.Formatting of webpage and rendering of javascript elements causes difference in displaying same content on UIWebView and Safari(Native Browser).

Sorry, if am NOT correct.

# actionscript-3 - 在 Whatsapp 库按钮中显示 Flex 移动应用程序

> ID：14459192
> 
> 赞同：0
> 
> 时间：2013-01-22T13:02:10.497
> 
> 标签：actionscript-3, apache-flex, flex4.5, flexbuilder

我想知道当您单击“共享”按钮或什至在 Whatsapp 应用程序中并单击图库图标时，我如何将在 Flex 移动中制作的应用程序包含在列表中。

```
I do not know where i can get such functionality. 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:44:56.383

你必须使用[本机扩展](http://www.adobe.com/devnet/air/articles/building-ane-ios-android-pt1.html)。你必须构建一个Android SDK Class，在其中实现一个[共享缩进](http://mobile.tutsplus.com/tutorials/android/android-sdk-implement-a-share-intent/) 第一次真的很难，如果你不熟悉两个平台，那么考虑一下！

# python - 消息队列 IPC Python 到 C

> ID：14459193
> 
> 赞同：1
> 
> 时间：2013-01-22T13:02:11.523
> 
> 标签：python, c, ipc, message-queue

我一直在使用 msgsend 并从

```
#include <sys/ipc.h>
#include <sys/msg.h> 
```

有一段时间了。

我刚刚提出了是否可以从 python 程序加入通信的问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:13:45.037

[sysv_ipc](http://semanchuk.com/philip/sysv_ipc/)模块为使用 System V IPC 消息队列以及其他 IPC 原语（信号量和共享内存）提供 API。

# android - MongoDB：如何在 MongoDB 中设计 Twitter 风格的关注者/关注关系模型？

> ID：14459194
> 
> 赞同：14
> 
> 时间：2013-01-22T13:02:14.173
> 
> 标签：android, mongodb, mobile, mongodb-java

我正在开发一个可能有很多用户（比如说大约 100 万）的 android 移动应用程序。这些用户可以关注其他用户（如 Twitter）。该应用程序通过远程 REST 后端同步用户数据。用户数据本身保存在面向文档的数据库中（在我的例子中是 MongoDB）。

目前我问自己设计用户模型的最佳方式，包括它的追随者和追随关系。首先想到的是在用户文档中嵌入关系。

示例用户文档：

```
{
"_id":"50fd6bb530043e3c569af288", 
"name":"Marsha Garcia", 
"follower"["50fd6bb530043e3c569af287","50fd6bb530043e3c569af289","50fd6bb530043e3c569af28c"],
"following":["70fd6bb530043e3c569af289","10fd6bb530043e3c569af222","89fd6bb530043e3c569af45o"]
} 
```

积极的事情是关注/关注关系已经与用户加入。但是，假设一个用户关注了大约 100.000 个或更多其他用户。然后文档大小会变得非常大。如果我通过移动应用程序中的 REST 服务加载此用户对象，可能需要一段时间。此外，在最坏的情况下，用户文档可能会超过 MongoDb 的 16MB 文档限制。

因此我的第二个想法是以更经典的方式对关注者和关注者关系进行建模：一个包含每个用户的关注者关系的额外文档。

示例“用户关系”文档：

```
{
    "_id": 50fe65828de290c0a8a8ea2d"
    "uid": "50fd6bb530043e3c569af288",
    "rel_uid": "50fe65828de290c0a8a8e9a6",
    "type": "FOLLOWING"
} 
```

积极的一面是每个用户文档的大小将保持不变。缺点是有很多用户和关注关系，我可以很容易地在我的 MongoDB“用户关系”集合中获得数百万个条目。当然，我将在字段上设置一个索引，但我不太确定这个解决方案是否能很好地适应应用程序用户询问他/她当前关注者的用例。

我将不胜感激有关我的建模问题的任何想法和经验。也许任何人甚至有更好的解决方法。

提前很多。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-22T13:11:37.083

```
1\. collection users:
- userid
- username
- userpass
- other user specific info user

2\. collection following:
- userid
- [array of followingid]

3\. collection followed:
- userid
- [array of followedid]
4\. messages_relation collection:

- userid
- messageid
- time

5\. messages_text:
- messageid
- text 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:29:19.140

如果您还没有，我会先阅读有关在 CMS 中存储评论[的文档。](http://docs.mongodb.org/ecosystem/use-cases/storing-comments/)虽然它用于评论，但存在相同的普遍问题 - 您无法将所有评论存储在单个文档中（在您的情况下，关注者/关注者）。

Hybrid 方法（使用更少的文档并在单个文档中存储一些关系）或您描述的方法都应该很好用。

我还建议构建一个简单的 POC 来测试检索等的性能。缓存一些结果或预编译它们可能是有意义的。通常，在这样的系统中，如果所有用户的所有内容都不能立即保持一致（比如让追随者数量立即正确），那是可以的。

可能没有完美的解决方案，并且可能需要一些解决方案才能获得最佳性能（例如，处理用户和关注者的方式可能会随着关注者数量的增加而改变）。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-27T15:39:38.153

您可能需要检查flockDB 一个存储邻接列表的数据库。[https://github.com/twitter/flockdb](https://github.com/twitter/flockdb)

# android - 在android的弹出对话框中禁用背景触摸

> ID：14459197
> 
> 赞同：1
> 
> 时间：2013-01-22T13:02:21.423
> 
> 标签：android

![在此处输入图像描述](../Images/5e7671b16aee8977400441c2598b5009.png)在我的代码中，我在弹出视图中显示警报。但是当我触摸任何背景按钮时，它们就会启用。我想禁用背景触摸。以下是我的代码。请检查一下。

```
LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View popuplayoutReject = inflater.inflate(R.layout.popup_reject_request, (ViewGroup) findViewById(R.id.popup_element));
final PopupWindow popUpReject = new PopupWindow(popuplayoutReject, WindowManager.LayoutParams.WRAP_CONTENT,
        WindowManager.LayoutParams.WRAP_CONTENT, false);
ImageButton btnPopupReject_Ok, btnPopUpReject_Cancel;
TextView txtRequestRejectMessage = (TextView) popuplayoutReject.findViewById(R.id.errorMessage);
txtRequestRejectMessage.setText(getResources().getString(R.string.AddEntryNotSaved));
btnPopupReject_Ok = (ImageButton) popuplayoutReject.findViewById(R.id.btnPopup_Yes);
btnPopupReject_Ok.setImageResource(R.drawable.yes_button);

btnPopupReject_Ok.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
       finish();
    }
});

btnPopUpReject_Cancel = (ImageButton) popuplayoutReject.findViewById(R.id.btnPopUp_No);
btnPopUpReject_Cancel.setImageResource(R.drawable.no_button);
btnPopUpReject_Cancel.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        popUpReject.dismiss();
    }
});
popUpReject.showAtLocation(popuplayoutReject, Gravity.CENTER, 0, 0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T05:57:23.173

刚刚完成实施

```
final PopupWindow popUpReject = new PopupWindow(popuplayoutReject, WindowManager.LayoutParams.FILL_PARENT,
                            WindowManager.LayoutParams.FILL_PARENT, false);
                    popUpReject.setOutsideTouchable(false); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-05-03T04:28:23.410

## 你的代码

```
 final PopupWindow popUpReject = new PopupWindow(popuplayoutReject, WindowManager.LayoutParams.WRAP_CONTENT,WindowManager.LayoutParams.WRAP_CONTENT, false); 
```

## 固定代码

```
 final PopupWindow popUpReject = new PopupWindow(popuplayoutReject, WindowManager.LayoutParams.WRAP_CONTENT,WindowManager.LayoutParams.WRAP_CONTENT, true); 
```

# jquery - 如何更改活动状态jQuery的文本

> ID：14459198
> 
> 赞同：0
> 
> 时间：2013-01-22T13:02:24.827
> 
> 标签：jquery, toggle

我有这段代码，我做了我想做的事，只有一件事是当 div 展开时无法改变单词，我想制作文本`Less -`，什么时候不展开`More +`

[**小提琴**](http://jsfiddle.net/FXGLH/)

```
$(document).ready(function () {
     var visible=true;
    $("#more_details").on('click', function() { 
    $('.more_details').animate({width: visible ? 300 : 0}, "slow");
         visible=!visible;    
     });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T13:06:51.397

```
$(document).ready(function () {
  var visible=true;
  $("#more_details").on('click', function() { 
    $('.more_details').animate({width: visible ? 300 : 0}, "slow");
    visible=!visible;
    $(this).text(visible ? 'More +' : 'Less -');
  });
}); 
```

[演示](http://jsfiddle.net/FXGLH/1/)

# java - Spring 中的 getServletConfig().getServletContext() 等价物

> ID：14459210
> 
> 赞同：28
> 
> 时间：2013-01-22T13:02:49.883
> 
> 标签：java, spring, spring-mvc

我参考了很多帖子，但仍然找不到正确的工作答案。
我想从我的 Java 类本身中获取它，而不是在 jsp 中使用 EL。

如何在 Spring 中获取 servlet 上下文路径？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-01-22T13:06:35.067

对于 SpringMVC

```
@Autowired
ServletContext servletContext; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-22T13:17:05.513

另一种方法是在依赖的类中实现[ServletConfigAware](http://srcrr.com/java/spring/3.1.0/reference/org/springframework/web/context/ServletConfigAware.html)`ServletContext`。在该`setServletConfig`方法中，您将获得一个实例，`ServletContext`您可以在那里做您必须做的事情。

```
public class MyClass implements ServletConfigAware {

    private ServletConfig config;

    public void setServletConfig(ServletConfig servletConfig) {
        this.config = servletConfig;
    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-22T13:09:15.410

此处发布了一个解决方案：[ServletContext 和 Spring MVC](https://stackoverflow.com/questions/5739491/servletcontext-and-spring-mvc)

```
@Autowired
ServletContext context; 
```

# php - PHP 页面显示在 ubuntu 上，而不是在 Windows 7 上

> ID：14459211
> 
> 赞同：10
> 
> 时间：2013-01-22T13:02:54.313
> 
> 标签：php, wamp, xampp

我们继承了一个在 Ubuntu 上运行良好的 PHP 页面，但将源代码转储到 Windows 7 系统的显示器上，该系统运行使用 PHP 5.4 的 XAMMP 或使用 PHP 5.3 的 WAMP。

转储发生的地方似乎是它试图解析“->”（对象属性）字符组合时。当我将其更改为“[]”以作为数组元素访问时，它会通过它，但随后会将源代码转储到出现在“=>”（映射）字符组合之后的显示器上。注释掉是行不通的，只有删除整行才能让它过去。

最后，当它只是打印带有“<”和“>”符号的html时，也会导致屏幕转储。如果我用 html 实体替换这些字符，源代码不会再转储，但程序不会显示菜单并且根本无法运行。请注意，我可以通过它的登录页面成功登录应用程序，尽管在用户名字段中显示“POST”和其他一些“<”和“>”字符。

我试过在整个应用程序上运行 unix2dos，但这没有任何效果。还尝试将其中一个有问题的页面的文本转换为 UTF-8，但仍然没有运气。

在回答提出的一些问题时：

工作的 ubuntu 版本是 PHP 版本 5.3.10-1ubuntu3.1

在 Ubuntu 而不是 Windows 中工作的第一段代码是这样的：

```
public function __construct($gid)
{
    $this->id = $gid;
    return $this->retrieve();
} 
```

代码转储到显示屏的位置以：

```
id = $gid; return $this->retrieve(); } 
```

是的，PHPInfo 确实有效，显示为 PHP 版本 5.3.13 的 WAMP 服务器

我尝试更改short-open-tag，但没有任何区别。

该产品是由一个外包团队为我们编写的，它似乎基于某种框架。但是我在 Google 上找不到任何对任何类名的引用，所以也许他们在内部编写了整个内容。

转到 apache 日志，实际错误发生在这一行：

```
$_SESSION['admin_gid'] = Membership::getGroup($rUser['id']); 
```

错误消息是：

> 未找到会员

Membership 是一个类，它稍后在同一个文件中声明，与上面显示的那个在显示器上转储的文件相同，所以由于某种原因，PHP 解析器不理解它正在从那个点读取 PHP 代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T10:36:36.613

```
I tried changing the short-open-tag but it made no difference. 
```

在这种情况下，您可以做的是编写一个小脚本并运行它，看看它是否有效。尝试短标签和以下方法。请记住，如果您弄乱了您`php.ini`的服务器，则必须重新启动服务器。最好通过右键单击任务栏上的服务器图标来更改设置。这可能是由于[php 短标签](http://php.net/manual/en/ini.core.php#ini.short-open-tag)。尝试启用和禁用并运行脚本。还要更改以下脚本，看看这对您更改的设置有何影响。

例如：

```
<?php
echo "hi";
// phpinfo(); <-- preferred if you can
?> 
```

然后您可以查看您的服务器是否按预期工作。如果它是 O/P `hi`，那么您最好尝试一下您的大代码并查看。

顺便说一句，您提供的代码似乎没有错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T06:07:27.583

嗯，很有趣。

如果这是一个大型应用程序，那么您可能必须检查所有包含的文件。可能有很多问题。

尝试执行以下步骤

1.  放`error_reporting(E_ALL);`
2.  尝试使用`debug_backtrace` [http://php.net/manual/en/function.debug-backtrace.php](http://php.net/manual/en/function.debug-backtrace.php)
3.  检查输出缓冲状态。是开还是关

另一边，你有没有把整个项目从linux复制到windows？可能有些文件在项目文件夹之外，而在 Windows 中不存在？我知道很多人确实制造了这样的漏洞，因此可以联系他们以获得“支持”:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T08:05:10.677

PHP 对类命名不区分大小写。你通常可以做

```
$membership = new membership(); 
```

即使班级被命名为“会员”，反之亦然。尝试更改类名，可能类文件名在操作系统上区分大小写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T12:37:45.770

它真的很奇怪..虽然你可以检查会员类是否已加载或未使用函数：

```
array get_declared_classes ( void )

<?php
print_r(get_declared_classes());
?> 
```

它将返回一个包含已定义类名称的数组。

参考： http: [//php.net/manual/en/function.get-declared-classes.php](http://php.net/manual/en/function.get-declared-classes.php)

# php - Zend Framework2 最新评测

> ID：14459215
> 
> 赞同：1
> 
> 时间：2013-01-22T13:03:14.683
> 
> 标签：php, zend-framework2

我之前在 Zend Framework 1 上工作过，它的性能很好。

我即将在 PHP 中开始一个新项目我打算使用 Zend 框架 2。但是正如我在网上看到的 ZF1、ZF2 的比较一样。他们说 ZF2 很慢，但评论是很久以前的了。最近 Zend 2.0.6 于 2012-12-19 发布。

有人用过ZF2，请推荐我，我可以用ZF2还是ZF1？

我知道这就像另一个的副本，但我正在寻找最新的评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:36:22.957

我相信一旦开始编写应用程序，您会发现 ZF2 会快得多。ZF2 不仅不那么臃肿，而且因为它不是基于静态的，所以只有在实际需要这些项目时才加载。

# sql - 在sql中分隔逗号分隔值

> ID：14459218
> 
> 赞同：1
> 
> 时间：2013-01-22T13:03:26.790
> 
> 标签：sql, sql-server

SP 获取输入值 ListType_IDs，它是列表类型的逗号分隔值。

```
create procedure test
@ListType_IDs varchar(255) = null
as
declare @IsGetDirectReports bit
declare @IsGetDirectReportsManagers bit
declare @IsGetAllManagers bit
declare @IsGetFullTeamUnderManager bit
--I have to initialize the above flags based on the value of list type IDs 
```

例如，让 ListType_IDs=5,6,7

@IsGetDirectReports = 1，如果 @ListType_IDs 的值为 5

@IsGetDirectReportsManagers = 1，如果 @ListType_IDs 的值为 6

@IsGetFullTeamUnderManager = 1，如果 @ListType_IDs 的值为 7

我需要使用简单的 SQL 代码来实现它。任何人请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T13:09:50.787

```
IF CHARINDEX(',5,' , ',' +@ListType_IDs + ',') > 0
SELECT @IsGetIderctReports = 1

IF CHARINDEX(',6,' , ',' +@ListType_IDs + ',') > 0
SELECT @IsGetDirectReportsManagers = 1

IF CHARINDEX(',7,' , ',' +@ListType_IDs + ',') > 0
SELECT @IsGetFullTeamUnderManager = 1 
```

[在数据库列中存储分隔列表真的那么糟糕吗？](https://stackoverflow.com/questions/3653462/is-storing-a-delimited-list-in-a-database-column-really-that-bad)现在我们知道了。

# php - 如何从附加的查询字符串中删除最后一个逗号

> ID：14459219
> 
> 赞同：0
> 
> 时间：2013-01-22T13:03:29.390
> 
> 标签：php, mysql, mysqli

好的，如果您阅读标题，这是一个好兆头。我在一些我不太熟悉的地方弄湿了我的脚。

为了节省大家阅读的时间，我有一系列复选框（适当命名）：

```
<input type="checkbox" name="skills[]" value="5"> C<br />
<input type="checkbox" name="skills[]" value="6"> C+<br /> 
```

通过将值附加到原始查询，我可以将一个复选框值保存到 MySQLi DB。当`$max == 1`.

当我添加第二个值时，我需要在添加的值之间添加一个逗号。所以，当`$max > 1`.

我想我可以简单地从查询字符串中删除最后一个逗号，MySQL 就可以工作了。但是， substr 函数不会删除逗号 / 或任何内容。当我输入多行值时，我只需要找出一种删除最后一个逗号的方法。

这是我的代码：

```
 $query= "INSERT INTO individual_skills(Skills_ID,Ind_ID) VALUES ";
  $max = sizeof($skills);
  for ($i=0; $i<$max;$i++) {   
       if ($max == 1) { 
            // appending the query above with the values
            $query.= " (" .$skills[$i]. ",".$_SESSION['Ind_ID'].")";    
           } // END IF MAX == 1  

        if ($max > 1) {  
            // appending the query above with the values
            // same query as above except note the comma at the end for the MySQL query
            $query.= " (" .$skills[$i]. ",".$_SESSION['Ind_ID']."),";
            substr($query,0,-1);        
        } // END IF MAX > 1

  }   // END FOR LOOP 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T13:20:22.730

您可以使用数组而不是疯狂`str_replace`或声明，然后使用它来获得一个不错的字符串：`if`[`implode`](http://php.net/implode)

```
$query      = "INSERT INTO individual_skills (Skills_ID, Ind_ID) VALUES ";
$max        = sizeof($skills);
$parameters = array();

for ($i=0; $i<$max; $i++) {
    $parameters[] = " (" .$skills[$i]. ", ".$_SESSION['Ind_ID'].")";
}

$query .= implode(', ', $parameters); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T13:05:16.333

改变

```
substr($query,0,-1); 
```

至

```
$query = rtrim($query, ",") 
```

[`rtrim`从字符串末尾删除字符](http://php.net/manual/en/function.rtrim.php)并**返回**一个值

您还需要将其移动到循环的末尾，您也可以删除代码重复 ->

```
$max = sizeof($skills);
for ($i=0; $i<$max;$i++) {   
  $query.= " (" .$skills[$i]. ",".$_SESSION['Ind_ID'].")";      
  if ($max > 1) {
     $query .= ",";
  } // CLOSE IF
}   // END FOR LOOP
// Now remove the last comma if required
if ($max > 1) { 
   $query = rtrim($query, ",");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T13:26:10.637

我要做的是使用 php implode() 函数来处理这类事情。我会这样做：

```
$query= "INSERT INTO individual_skills(Skills_ID,Ind_ID) VALUES ";
$value_array = array();
foreach($skills as $skill) {
    $value_array[] = "(" .$skill. ",".$_SESSION['Ind_ID'].")";
}
$query = "INSERT INTO individual_skills(Skills_ID,Ind_ID) VALUES ". implode(', ', $value_array); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-22T13:19:52.310

您的代码重复次数过多。
它实际上可以写得简短而紧凑
，而且它也受到 SQL 注入的影响

```
$query = "INSERT INTO individual_skills VALUES ";
$comma = '';
foreach($skills as $skill) {
    $skill = intval($skill);
    $indid = intval($_SESSION['Ind_ID']);
    $query.= "$comma ($skill, $indid)";
    $comma = ',';    
} 
```

它在处理器周期和编写代码方面都很短。

> 但是， substr 函数不会删除逗号 / 或任何内容。

确实如此。你只是用错了方法。你需要将它的结果分配给一个变量。手册页总是有帮助的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T13:04:49.813

你的想法`substr`是完全正确的，但你实际上并没有使用它的返回值。您需要做的就是将返回值放回`$query`.

```
$query = substr($query, 0, -1); 
```

`substr`你也可以试试这个，它通过简单地不首先在最后一个条目上添加逗号来减轻对所有的需求。

```
$query= "INSERT INTO individual_skills(Skills_ID,Ind_ID) VALUES ";
$max = sizeof($skills);
for ($i=0; $i < $max; $i++)
{
    $query .= " (" . $skills[$i] . ", " . $_SESSION['Ind_ID'] . ")";
    if ($max > 1 && $max != ($i+1))
        $query .= ",";
} 
```

# jquery - 并排显示 z-indexed div

> ID：14459222
> 
> 赞同：0
> 
> 时间：2013-01-22T13:03:44.727
> 
> 标签：jquery, css

我有一个容器 div 和一个带有以下标记和 css 的按钮

HTML：

```
<div class="container">
  <table class="tbl">
    <tr><td></td></tr>
    <tr><td></td></tr>
  </table>
</div>

<button id="btnAdd" type="button">Add</button> 
```

CSS：

```
.container{
  position:releative;
  background-color:#d0d0d0;
  widht:90%;
  height:50px;
}
.innerdiv
{
  position:absolute;
  z-index:1;
  background-color: #D57657;    
}
.tbl{
    border-collapse: collapse;
    width:100%;
    height:100%;
}
.tbl td
{
    border-bottom:1px solid #000;
} 
```

我正在使用 jQuery 将子 div 动态添加到容器 div

```
$(function(){
  $("#btnAdd").click(function(){
      $(".container").append("<div class='innerdiv'>I am new</div>");
  });
}); 
```

问题是我通过单击按钮创建的所有 div 相互隐藏，我希望这些子 div 并排显示。我怎样才能做到这一点。你可能想看看它作为[jsFiddle](http://jsfiddle.net/ZedBee/JpKaz/)

**编辑**一旦div中没有元素，就可以通过删除`position:absolute`来解决最初的问题。我的容器 div 中有一个表格，建议的解决方案将子 div 添加到我实际想要显示在“表格”行上的子 div 下方。`.innerdiv``container``table`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T13:05:28.800

不要`position: absolute`用于您的 div，将它们浮动到左侧，它们将并排，否则您需要计算位置（顶部，左侧）

```
float: left; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:06:41.327

无论其他 div 或 html 元素如何，绝对定位的 div 都有其最终渲染位置。换句话说，绝对定位元素不会破坏普通 html 元素的自然布局。

因此，要么您必须手动保留位置 x,y 变量并在附加每个 div 时增加它们，或者使它们浮动并添加它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T13:10:33.727

希望这个： http: [//jsfiddle.net/EDpQw/](http://jsfiddle.net/EDpQw/)是你所需要的

```
.innerdiv
{
  z-index:1;
  background-color: #D57657;
  float: left;
} 
```

# javascript - bxSlider destroyShow 在 v4 中消失了吗？

> ID：14459225
> 
> 赞同：0
> 
> 时间：2013-01-22T13:03:55.083
> 
> 标签：javascript, jquery, bxslider

好吧，当从 v3 升级到 v4 时，我注意到函数 destroyShow 消失了，一旦创建了 bxSlider v4，我将如何删除它？

我试过 $("#id").html(""); 但我不确定那是正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T07:17:42.960

尝试使用 destroySlider 而不是 destroyShow

# scala - Scala 中的抽象和参数化类型

> ID：14459228
> 
> 赞同：1
> 
> 时间：2013-01-22T13:04:02.373
> 
> 标签：scala, types

我试图使用抽象类型来简化和澄清类型处理，但我不断遇到这些看似无意义的错误：

```
trait Delta[A] {
  def apply(c: A)
}

abstract class ValueHolder {

  type Value
  type Event <: Delta[ValueHolder]

  def update(next: Value): Event = new UpdateEvent(next)
  // type mismatch;  found   : UpdateEvent[ValueHolder]
  // required: ValueHolder.this.Event
}

class UpdateEvent[C <: ValueHolder](next: C#Value) extends Delta[C] {

  def apply(c: C) = c.update(next)
  // type mismatch;  found   :
  // UpdateEvent.this.next.type (with underlying type C#Value)
  // required: c.Value
} 
```

1.  不`Delta[C]`，在哪里`C <: ValueHolder`，因此符合`Event <: Delta[ValueHolder]`？

2.  同样，鉴于这`c`是 a `C`，不是`c.Value`a`C#Value`吗？

我可以使用强制转换来消除第二个错误，但这违背了使用类型的意义。

我试图将[这个相关问题] [1]中建议的答案纳入...

```
class UpdateEvent[C <: ValueHolder, V <: C#Value](next: V) extends Delta[C] { 
```

...遗憾的是，这并不能缓解这两个问题（尽管从 update() 调用时它需要更多的类型参数）。

帮助？？？

* * *

**更新：**不幸的是，我上面给出的例子有点过于简单化了。我正在尝试将更改传播到具有相同方法签名的类（尽管可能是不同的类型参数），因此它们充当原始的“视图”。

例如，假设您可以运行以下命令：

```
(ListBuffer[Int]:_).map(_.toString) 
```

...然后`ListBuffer[String]`每次原始更新时都会更新结果。（不只是一遍又一遍地运行“map”，原因我无法简要解释。）与这个小例子一样，其他人定义了正在实现的特征，这意味着我无法更改方法签名来解决问题。

（注意：我也无法摆脱，`type Event`因为有一个变量（此处未说明）包含接收每个的所有侦听`Event`器——并且其类型应由子类细化以允许每个侦听器的更具体类型。）

无论如何，在思考了不是很解释性的 Scala 参考手册（信息都在那里，但假设你已经知道很多）之后，我终于想出了如何进行约束`UpdateEvent`以使 C 和 C#Value 对应：

```
class UpdateEvent[V, C <: ValueHolder { type Value = V }](
  next: V) extends Delta[C] { ... } 
```

这修复了编译错误并保留了现有方法。但我将彼得的答案（如下）标记为正确（给他声誉积分），因为我非常感谢他花时间在这上面。谢谢，彼得，祝你好运。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:25:24.047

> 不`Delta[C]`，在哪里`C <: ValueHolder`，因此符合`Event <: Delta[ValueHolder]`？

我对此并不完全确定，因此将以下内容作为理论。如果 的类型参数是协变的（即 ），编译器只能确保`Delta[C]`, where `C <: ValueHolder`, is-a 。但目前它是不变的，所以上面的说法不正确。编译器也不知道 a 是否是:是抽象类型，即稍后定义的*某个*类型的占位符，它将是 的子类型。但是，它可以定义为*任何*这样的子类，而不仅仅是！所以我可以定义一个类型为的子类，因此它不是. 如果编译器允许这样做，最终结果将是运行时错误。`Delta[ValueHolder]``Delta``Delta[+A]``Delta[C]``Event``Event`*`Delta[ValueHolder]`*`UpdateEvent``ValueHolder``Event``OtherEvent``UpdateEvent`**

 **> 同样，鉴于这`c`是 a `C`，不是`c.Value`a`C#Value`吗？

它的确是。但是看看错误信息：

```
 // type mismatch;  found   :
  // UpdateEvent.this.next.type (with underlying type C#Value)
  // required: c.Value 
```

也就是说，编译器需要一个类型，`c.Value`而它得到了一个`C#Value`。而且`C#Value`不是——前者是更一般的类型*！*`c.Value`

部分潜在解决方案可能是`update`使用绑定类型 parameter进行参数化`C <: ValueHolder`，然后`C#Value`用作参数类型，而不是`ValueHolder#Value`. 这将消除第二个错误。第一个问题的解决方案可能是将返回类型替换为`Event`with `Delta[C]`。因此以下编译：

```
trait Delta[A] {
  def apply(c: A): Delta[A]
}

abstract class ValueHolder {

  type Value

  def update[C <: ValueHolder](next: C#Value): Delta[C] = new UpdateEvent(next)
}

class UpdateEvent[C <: ValueHolder](next: C#Value) extends Delta[C] {

  override def apply(c: C) = c.update(next)
} 
```

笔记：

*   在这个方案中，`Event`其实已经不用了，所以可以完全去掉
*   我定义了`Delta.apply`as的返回类型`Delta[A]`，以符合实际返回的类型`UpdateEvent.apply`
*   因此，类型参数`A`在这里只能是不变的，因为`A`现在在`Delta`.

希望这会有所帮助-我不确定您要达到的目标，因此我可能通过这些修改扼杀了您的原始想法:-)**

# c# - 在不同视图中显示 CollectionView 组？

> ID：14459233
> 
> 赞同：0
> 
> 时间：2013-01-22T13:04:17.303
> 
> 标签：c#, wpf, mvvm, icollectionview

我只是好奇是否可以将 2 个不同的视图绑定到同一个集合。一个视图显示一个组 ( `PropertyGroupDescription`) 的内容，一个视图显示另一个.. 属性组的目标是 a `Boolean`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:28:14.600

您可以将您的视图绑定到两个不同的[CollectionViewSources](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionviewsource.aspx)，它们使用相同的集合作为它们的[Source](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionviewsource.source.aspx)。

# django - 跨继承模型 的 Django AutoSlugField

> ID：14459239
> 
> 赞同：0
> 
> 时间：2013-01-22T13:04:46.463
> 
> 标签：django, django-models, django-forms, slug, django-1.4

我想知道你是否可以在继承的模型中拥有独一无二的 slug？

我有三个模型，一个基础和两个扩展它。

该基地具有`AutoSlugField`从现场生成的独特性`name`。

蛞蝓在`BaseModel`但是如果我保存 a`Hamster`和 an`Elderberry`两者都具有相同的名称，那么我会得到一个`IntegrityError`.

显然，这是因为唯一性不是在基本级别而是在子类级别强制执行的。有没有人对此有很好的解决方案？

`BaseModel`不是`abstract`并且需要保持这种状态，因为我正在使用[“django-model-utils”](http://pypi.python.org/pypi/django-model-utils/1.1.0) InheritanceManager。

*设置*

```
Django==1.4.3
django-extensions==1.0.2
django-autoslug==1.6.1 
```

*模型.py*

```
class BaseModel(models.Model):
    name = models.CharField(max_length=255)
    slug = AutoSlugField(populate_from='name', unique=True, db_index=True)
    # ... other fields

    objects = InheritanceManager()

class HamsterModel(BaseModel):
    useful_info = models.CharField(max_length=128)
    # ... other fields

class ElderberryModel(BaseModel):
    pointless_info = models.CharField(max_length=128)
    # ... other fields 
```

*安慰*

```
>>> h = HamsterModel()
>>> h.name = 'One'
>>> h.save()
>>> h.slug
u'one'
>>> e = ElderberryModel()
>>> e.name = 'One'
>>> e.save()
Traceback (most recent call last):
  File "<input>", line 1, in <module>
  File "/home/blah/.envs/vfaces/local/lib/python2.7/site-packages/django/db/models/base.py", line 463, in save

    self.save_base(using=using, force_insert=force_insert, force_update=force_update)
  File "/home/blah/.envs/blah/local/lib/python2.7/site-packages/django/db/models/base.py", line 506, in save
_base
    self.save_base(cls=parent, origin=org, using=using)
  File "/home/blah/.envs/blah/local/lib/python2.7/site-packages/django/db/models/base.py", line 551, in save
_base
    result = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw)
  File "/home/blah/.envs/blah/local/lib/python2.7/site-packages/django/db/models/manager.py", line 203, in _
insert
    return insert_query(self.model, objs, fields, **kwargs)
  File "/home/blah/.envs/blah/local/lib/python2.7/site-packages/django/db/models/query.py", line 1593, in in
sert_query
    return query.get_compiler(using=using).execute_sql(return_id)
  File "/home/blah/.envs/blah/local/lib/python2.7/site-packages/django/db/models/sql/compiler.py", line 912,
 in execute_sql
    cursor.execute(sql, params)
  File "/home/blah/.envs/blah/local/lib/python2.7/site-packages/django/db/backends/util.py", line 40, in exe
cute
    return self.cursor.execute(sql, params)
  File "/home/blah/.envs/blah/local/lib/python2.7/site-packages/django/db/backends/mysql/base.py", line 114,
 in execute
    return self.cursor.execute(query, args)
  File "/home/blah/.envs/vfaces/local/lib/python2.7/site-packages/MySQLdb/cursors.py", line 201, in execute
    self.errorhandler(self, exc, value)
  File "/home/blah/.envs/blah/local/lib/python2.7/site-packages/MySQLdb/connections.py", line 36, in default
errorhandler
    raise errorclass, errorvalue
IntegrityError: (1062, "Duplicate entry 'one' for key 'slug'") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:03:35.633

好的，所以在挖掘了源代码之后，发现[文档](http://packages.python.org/django-autoslug/fields.html)自从我上次查看以来已经更新。

因此，如果您添加`objects = models.Manager()`到您的`BaseModel`并将其传递给`AutoSlugField`. 这将检查蛞蝓`BaseModel`而不是子类。

```
class BaseModel(models.Model):
    objects = models.Manager()
    name = models.CharField(max_length=255)
    slug = AutoSlugField(populate_from='name', unique=True, db_index=True, managers=objects)
    # ... other fields 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:58:58.010

In database you have only one slug field in `BaseModel` table, `HamsterModel` and `ElderberryModel` are connected to `BaseModel` using foreign key. The only way I see in this situation is remove `unique=True` and check uniqueness at model level in save method.

# javascript - ajax提交后如何加载新评论？

> ID：14459242
> 
> 赞同：0
> 
> 时间：2013-01-22T13:04:48.597
> 
> 标签：javascript, ajax, wordpress

我找到了一个通过 ajax 提交 wordpress 评论的轻量级脚本。它确实提交了评论，但除了评论计数得到更新外，看不到新评论。如果手动刷新页面，可以看到它被列出来了。这是代码：

```
jQuery(document).ready(function($){
  jQuery.noConflict();
/* the acp_long is removed here. it got printed in page head by php
   acp_lang[]:
   [0]: 'Loading...'
   [1]: 'Please enter your name.'
   [2]: 'Please enter your email address.'
   [3]: 'Please enter a valid email address.'
   [4]: 'Please enter your comment'
   [5]: 'Your comment has been added.'
   [6]: 'ACP error!'
*/
// initialise
var form, err, reply;
function acp_initialise() {
  jQuery('#commentform').after('<div id="error"></div>');
  jQuery('#submit').after('<img src="'+acp_path+'loading.gif" id="loading" alt="'+acp_lang[0]+'" />');
  jQuery('#loading').hide();
  form = jQuery('#commentform');
  err = jQuery('#error');
  reply = false;
}
acp_initialise();

jQuery('.comment-reply-link').live('click', function() {
  // checks if it's a reply to a comment
  reply = jQuery(this).parents('.depth-1').attr('id');
  err.empty();
});

jQuery('#cancel-comment-reply-link').live('click', function() {
  reply = false;
});  

jQuery('#commentform').live('submit', function(evt) {

  err.empty();

if(form.find('#author')[0]) {
  // if not logged in, validate name and email
  if(form.find('#author').val() == '') {
  err.html('<span class="error">'+acp_lang[1]+'</span>');
  return false;
  }
  if(form.find('#email').val() == '') {
  err.html('<span class="error">'+acp_lang[2]+'</span>');
  return false;
  }
  var filter  = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
  if(!filter.test(form.find('#email').val())) {
  err.html('<span class="error">'+acp_lang[3]+'</span>');
  if (evt.preventDefault) {evt.preventDefault();}
  return false;
  }
} // end if

if(form.find('#comment').val() == '') {
  err.html('<span class="error">'+acp_lang[4]+'</span>');
  return false;
}

jQuery(this).ajaxSubmit({

  beforeSubmit: function() {
  jQuery('#loading').show();
  jQuery('#submit').attr('disabled','disabled');
  }, // end beforeSubmit

  error: function(request){
  err.empty();
  var data = request.responseText.match(/<p>(.*)<\/p>/);
  err.html('<span class="error">'+ data[1] +'</span>');
  jQuery('#loading').hide();
  jQuery('#submit').removeAttr("disabled");
  return false;
  }, // end error()

  success: function(data) {
  try {
  // if the comments is a reply, replace the parent comment's div with it
  // if not, append the new comment at the bottom
  var response = jQuery("<ol>").html(data);
  if(reply != false) {
  jQuery('#'+reply).replaceWith(response.find('#'+reply));
  jQuery('.commentlist').after(response.find('#respond'));
  acp_initialise();

  } else {//  
  if (jQuery(document).find('.commentlist')[0]) {
  //console.log("find it"); this log line shows it finds the place to append things
  response.find('.commentlist li:last')..hide().appendTo(jQuery('.commentlist')).slideDown('slow');
  } else {
  jQuery('#respond').before(response.find('.commentlist'));
  }
  if (jQuery(document).find('#comments')[0]) {
  jQuery('#comments').html(response.find('#comments'));
  } else {
  jQuery('.commentlist').before(response.find('#comments'));
  }
  }
  form.find('#comment').val('');
  err.html('<span class="success">'+acp_lang[5]+'</span>');
  jQuery('#submit').removeAttr("disabled");
  jQuery('#loading').hide();

  } catch (e) {
  jQuery('#loading').hide();
  jQuery('#submit').removeAttr("disabled");
  alert(acp_lang[6]+'\n\n'+e);
  } // end try

  } // end success()

  }); // end ajaxSubmit()

  return false; 

}); // end form.submit()

}); // end document.ready() 
```

上面代码中的任何提示都可能导致新评论没有出现？

## 更新：

在 HMR 在聊天室的帮助下，我们用 firebug 进行了测试。结果是：

```
response.find('.commentlist li:last')
Does find the just posed reply and that
jQuery('.commentlist')
Does refer to an existing, visible div element on the page but adding the comment to the div using:
response.find('.commentlist li:last').appendTo(jQuery('.commentlist'));
Doesn't make the newly added comment show up. 
```

非常感谢 HMR，但由于我犯了拼写错误并且需要时间来清理文件。我们的测试停止了。

为什么附加不起作用发布该“.commentlist”元素中包含的html。我们已经证明，当它为空时它可以工作，因此其中的 html 内容不会显示新添加的评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:14:41.843

假设控制台中的最后一行是“find it”，你能在这部分转储更多的值吗？

```
} else {
   if (jQuery(document).find('.commentlist')[0]) {
       console.log("find it");
       console.log("did it find:",response.find('.commentlistli:last'));
       console.log("adding to:",jQuery('.commentlist')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:24:00.150

确保您的评论位于带有`class="commentlist"`. 该行`jQuery('.commentlist').after(response.find('#respond'));`尝试在那里插入新注释，如果没有这样的元素，它将不起作用。

# linux - 在软件级别上负载平衡 2 条 ADSL 线路

> ID：14459246
> 
> 赞同：2
> 
> 时间：2013-01-22T13:04:53.913
> 
> 标签：linux, networking, load-balancing, adsl

我们想对我们办公室的两条 ADSL 线路进行负载平衡。

我在 is 方面的经验有限，并且想知道是否有人可以为我提供超出理论的解决方案，换句话说，是有关硬件和软件要求和建议的细节。

因此，我们有 2 条 4mb ADSL 线路，并希望最好使用 linux 机器来平衡它们。这个应该怎么设置？显然，每条线路都连接到调制解调器/路由器，然后路由器是否连接到 LAN 的其余部分和 Linux Box 连接到的交换机上？

另外，是否有人可以推荐任何适用于 linux 的负载平衡软件？

非常感谢您的帮助！！！

最亲切的问候

塞布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:00:46.570

有许多解决方案可以满足您的要求..您可以使用 Kerio Control 进行负载平衡...它在我的环境中运行良好....您可以使用 TMG Server 2010 实现 ISP 冗余..它在我的环境中运行得非常好案例....我都试过了....你可以再尝试一件事....那就是 WinGate....我已经用过它了....它也很好用，因为它的重量很轻并且在 ram 上也是如此......你也可以将它用作防火墙......不包括 TMG......其他两种解决方案也可用于 Linux......

# c# - MVC 帖子未向模型添加值

> ID：14459247
> 
> 赞同：6
> 
> 时间：2013-01-22T13:04:58.200
> 
> 标签：c#, .net, asp.net-mvc, razor, asp.net-mvc-4

我有一个用户模型的简单编辑表单，但是当我回发时，没有任何隐藏的输入值被应用于模型，我不确定为什么会发生这种情况。

我的剃须刀：

```
@model CMS.Core.Models.UserProfile

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

    <fieldset class="normalForm">
        <legend>User Profile</legend>

        @Html.HiddenFor(model => model.UserId)

        <div class="formRow">
            <div class="editor-label">
                @Html.LabelFor(model => model.EmailAddress)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(model => model.EmailAddress, new { @class = "textbox" })
                @Html.ValidationMessageFor(model => model.EmailAddress)
            </div>
        </div>

        <div class="formRow">
            <div class="editor-label">
                @Html.LabelFor(model => model.FirstName)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(model => model.FirstName, new { @class = "textbox" })
                @Html.ValidationMessageFor(model => model.FirstName)
            </div>
        </div>

        <div class="buttonRow"><input type="submit" value="Save" class="button" /></div>
    </fieldset>
} 
```

我的控制器：

```
 [HttpPost]
    public ActionResult Edit(UserProfile user)
    {
        if (ModelState.IsValid)
        {
            user.Save();
            return RedirectToAction("Index");
        }
        return View(user);
    } 
```

用户配置文件类：

```
[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; private set; }

    [Required(ErrorMessage = "Please enter an email address")]
    [StringLength(350)]
    [DataType(DataType.EmailAddress)]
    [Display(Name = "Email Address")]
    public string EmailAddress { get; set; }

    [StringLength(100)]
    [DataType(DataType.Text)]
    [Display(Name = "First Name")]
    public string FirstName { get; set; }
} 
```

如果我尝试`user.UserId`它返回零（因为它是一个 int），但如果我尝试`Request["UserId"]`它返回正确的值，因此该值被正确发布 - 只是没有添加到`UserProfile`模型中。有谁知道为什么会这样或者我能做些什么来解决它

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T13:15:12.120

`DefaultModelBinder`唯一能够绑定**公共属性**的。

将您的属性设置器更改为公共，它应该可以正常工作：

```
[Key]
[DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
public int UserId { get; set; } 
```

如果你不能这样做，你将需要创建一个处理私有设置器的自定义模型绑定器。

但是，作为一种更好的方法，而不是`UserProfile`直接使用您的。创建一个`UserProfileViewModel`您`UserId`的公开位置并在您的视图和控制器操作中使用它。在这种情况下，您需要在 your`UserProfile`和 the之间进行映射，`UserProfileViewModel`但是存在用于该任务的好工具，例如[AutoMapper](http://automapper.codeplex.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:17:02.753

正如@nemesev 所说，您的 Model 属性上的访问器属性需要是**public**。

为了使您不必为了使模型绑定工作而不得不破解您的数据库类，您应该真正为该类创建一个模型，然后您不需要在视图中使用 DTO（这并不理想） .

# c++ - 当大小是变量而不是常量时如何创建数组？

> ID：14459248
> 
> 赞同：4
> 
> 时间：2013-01-22T13:05:02.743
> 
> 标签：c++, c, constants, array-initialization

我有一个接收变量 int 的方法。该变量构成一个数组大小（请不要给我一个向量）。因此，我需要在我的方法中初始化一个 const int 来初始化一个特定大小的数组。问题：我该怎么做？

```
void foo(int variable_int){
    int a[variable_int] = {0}; //error
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2017-10-03T22:00:06.883

You asked for a non-vector solution but let's go over it because you might have rejected it for the wrong reasons. You shouldn't worry about performance because at the hands of any competent compiler it is going to have pretty much the same overhead as any other standard conformant solution. On the other hand, there are some readability and safety concerns that I'll go over below. Let's look at the ways you can do it from most recommended to least.

# std::vector

The community's favorite container and for good reason. Not only can it be declared with a run-time size, but the size can be changed at any time. This facilitates use when size cannot be predetermined, eg when repeatedly polling for user input. Examples:

```
// Known size
size_t n;
std::cin >> n;
std::vector<int> vec(n);

// Unknown size
std::vector<int> vec;
int input;
while (std::cin >> input) { // Note: not always the best way to read input
    vec.push_back(in);
} 
```

There's not much downside to using `std::vector`. The known size case requires exactly one dynamic allocation. The unknown size requires more in the general case, but you wouldn't be able to do any better anyway. So performance is more or less optimal.

Semantically, it might not be ideal for sizes that are constant throughout the execution. It might not be apparent to the reader that this container is not intended to change. It is not known to the compiler either so it will allow you to do something wrong like `push_back` into a `vector` that is logically of constant size.

# std::unique_ptr (or std::shared_ptr)

The safest solution if enforcing static size is important to you.

```
size_t n;
std::cin >> n;
auto arr = std::make_unique<int[]>(n); 
```

`arr`'s size cannot change, though it can be made to release the current array and point to another one of different size. Therefore, if logically the size of your container is constant, this conveys intent in a clearer way. Unfortunately, it is also much weaker than `std::vector` even in the constant-size case. It is not size-aware, so you have to explicitly store the size. For the same reason it does not offer iterators and can't be used in range for loops. It is up to you (and the project in question) if you want to sacrifice these features to enforce static size.

Initially I had recommended `boost::scoped_array` but after further thought I don't believe it has much to offer over this solution so I'll stick to the standard library.

# new[] - delete[]

Technically a solution, but unless you are forced to use an old C++ standard or you are writing a low-level library that manages memory internally they are strictly worse than the `std::unique_ptr` or `std::shared_ptr` solution. They offer no more features, but are significantly less safe because you have to explicitly free the memory when you're done with it. Otherwise, you will leak it and this might cause significant problems. To make matters worse, using `delete[]` properly can be non-trivial for programs with complicated flows of execution and exception handling. Please don't use this when the above solutions are available to you!

```
size_t n;
std::cin >> n;
int* arr = new int[n];
...
// Control flow must reach exactly one corresponding delete[] !!!
delete[] arr; 
```

* * *

# Bonus: Compiler extension

Some compilers might actually be ok with the following code

```
size_t n;
std::cin >> n;
int arr[n]; 
```

Relying on this has severe drawbacks. Your code cannot be compiled on all C++ conformant compilers. It probably doesn't even compile on all versions of the given compiler. Also, I doubt that the produced executable checks the value of `n` and allocates on the heap when needed meaning you can blow up your stack. This solution only makes sense when you know the upper bound of `n` is small and when performance is so important to you that you're willing to rely on compiler-specific behavior to get it. These are truly exceptional cases.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-22T13:05:55.490

```
int *a = new int[variable_int]; 
```

完成后记得删除[]分配的空间！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-22T13:14:19.903

C++ 不支持变长数组。相反，您需要动态分配数组：

```
std::vector<int> a(variable_int); 
```

或者由于您说出于某种原因不想使用向量：

```
class not_a_vector
{
public:
    explicit not_a_vector(size_t size) : a(new int[size]()) {}
    ~not_a_vector() {delete [] a;}
    int & operator[](size_t i) {return a[i];}
    int   operator[](size_t i) const {return a[i];}

    not_a_vector(not_a_vector const &) = delete;
    void operator=(not_a_vector const &) = delete;

private:
    int * a;
};

not_a_vector a(variable_int); 
```

更新：这个问题刚刚用“C”标签和“C++”更新。C（自 1999 年以来）确实支持可变长度数组，因此您的代码在该语言中应该没问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-22T13:11:13.500

您可以通过编写轻松地从非常量变量创建一个 const 变量`const int bar = variable_int;`——但这对您没有帮助。在 C++ 中，具有自动存储功能的数组的大小必须是*编译*时常量。您无法将变量转换为编译时常量，因此您想要的根本不可能。

根据您的需要，您可以创建一个指针并使用（然后再使用它）`a`分配内存，或者，如果参数 to在编译时总是已知的，您可以变成这样的模板函数：`new``delete``foo``foo`

```
template<int n> void foo() {
    int a[n] = {0};
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-22T13:12:26.047

为了做你想做的事，你需要使用动态分配。在这种情况下，我会认真建议改用向量 - 这是在 C++ 中做的“正确”事情。

但是如果你仍然不想使用向量 [为什么你不会超出我的范围]，正确的代码是：

```
 void foo(int variable_int){
    int *a   = new int[variable_int]();   // Parenthesis to initialize to zero.
    ... do stuff with a ... 
    delete [] a;
 } 
```

正如其他人所建议的那样，您也可以使用 calloc，它具有初始化为零的相同效果，但不是真正的“c++”解决方案。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-22T13:15:11.480

如果您使用的是数组，最好封装它们：

```
template<typename Type>
class Vector {
    //...
}; 
```

标准库附带一个实现：[std::vector](http://www.cplusplus.com/reference/vector/vector/)

# actionscript-3 - actionscript 3 中的日期和星期几计算

> ID：14459257
> 
> 赞同：1
> 
> 时间：2013-01-22T13:05:15.953
> 
> 标签：actionscript-3, dayofweek, date-arithmetic

我正在尽力在 Actionscript 3 中做到这一点，但根本无法理解它。我需要计算从设定日期到今天已经过去了多少个星期一。乘以 3.5 并从 x 中减去。然后计算已经过了多少个星期二，乘以 7 并从 x 中减去。最后计算已经过了多少个星期三，乘以 7 并从 x 中扣除。

这将使我有一个准确的 x 值来进行其他计算。IOW 根据项目天数过去的剩余小时数的运行日历。

然后我打算允许用户根据 x 的剩余值预订部分时间。

到目前为止，我可以在 AS3 中获得星期几：

```
 var dayOfWeek_array:Array = new Array("Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"); 
    var today_date:Date = new Date(); 
    var day_str:String = dayOfWeek_array[today_date.getDay()]; 
    trace("Today is "+day_str); 
```

我觉得这里有点超出我的深度。非常感谢任何建议指导或帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:03:55.517

如果我理解你的话：

```
public function astest()
{
    var days_count:Object = getDaysCounter(new Date(1984, 6, 6), new Date());

    trace("mondays:", days_count[1]);
    trace("tuesdays:", days_count[2]);
    trace("wednesdays:", days_count[3]);
}

private function getDaysCounter(from:Date, to:Date):Object
{
    //map of the day counter days_count[day] = count;
    var days_count:Object = {};

    //number of millisecons in one 24h day
    var day_ms:int = 24*60*60*1000;

    //the number of 24h day passed since "from" date
    var days_passed:int = (to.time - from.time)/day_ms;

    var iter_date:Date = from;
    //number of full weeks since "from" date
    var full_weeks:int = days_passed/7;

    for(var d:int = 0; d < 7; d++)
        days_count[d] = full_weeks;

    var last_day:int = from.day;
    var extra_days:int = days_passed%7 + last_day;
    for(var i:int=last_day; i < extra_days; i++)
    {
        //add 1 day to the current time
        iter_date.time += day_ms;
        days_count[iter_date.day]++;
    }

    return days_count;
} 
```

这段代码不计算当天，也就是说，如果今天是星期二，它直到明天才会计算在结果中，只计算完整的 24 小时过去。

# python - 那是什么数据格式？以及如何解析它（python）？

> ID：14459258
> 
> 赞同：4
> 
> 时间：2013-01-22T13:05:19.633
> 
> 标签：python, data-formats

Valve 的游戏使用以下[数据格式](http://media.steampowered.com/apps/440/scripts/items/items_game.9aee6b38c52d8814124b8fbfc8d13e7b1faa944f.txt)

```
"name1"
{
    "name2"  "value2"
    "name3"
    {
        "name4" "value4"
    }
} 
```

这种格式有名称还是只是自制的？

我可以用python解析它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:10:56.213

我不确定它是否有名称，但它似乎非常简单：一个节点由一个键和一个值或一组值组成，这些值本身是纯字符串或键值对集。递归解析并干净地映射到嵌套 python 字典的结构将是微不足道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:09:50.800

看起来像他们自己的格式，叫做 Valve Data Format。文档[here](https://developer.valvesoftware.com/wiki/KeyValues)，我不知道python中是否有可用的解析器，但是这里有一个关于[在php中解析它的问题](https://stackoverflow.com/questions/9301511/parsing-valve-data-format-files-in-php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T13:11:34.717

看起来很像没有逗号和冒号分隔符的 JSON。您可以手动解析它，因为它具有相同的逻辑。

似乎由名称-值对组成，因此在名称之后，在 "" 中找到一个 '{' 或另一个字符串将意味着一个值。

自定义类的复合结构将使其易于处理。正如 Matti John 所链接的，有文档。

# php - 电子邮件可用性检查返回可用于每封电子邮件

> ID：14459259
> 
> 赞同：0
> 
> 时间：2013-01-22T13:05:24.257
> 
> 标签：php, html, jquery, pdo

表单提交的 HTML 代码：

```
<div class="control-group">
    <label class="control-label" for="input01">Email</label>
    <div class="controls">
         <input type="text" class="input-xlarge" id="email" name="email" 
         rel="popover" data-content="What’s your email address?" 
         data-original-title="Email">
        <span class="check" style="color:red;" ></span>
    </div>
</div> 
```

将电子邮件发布到 PHP 脚本中的 jQuery 代码：

```
 $(function () {
     $('#email').keyup(function () {
         var email = $(this).val();
         if (email != '') {
             //$('.check').show();
             $('error').fadeIn(400).html('<img src="/img/ajax-loading.gif" />');
             var dataString = 'email=' + email;
             $.ajax({
                 type: "POST",
                 url: "pages/check_email.php",
                 data: dataString,
                 cache: false,
                 success: function (result) {
                     if (result == '') {
                         $('.check').html(email + ' Avaliable');
                         $('#create').attr('disabled', '');
                         $('#create').attr('value', 'Active');
                         $("#email").removeClass("red");
                         $("#email").addClass("white");
                     } else {
                         $('.check').html(email + ' ' + result);
                         $('#create').attr('disabled', 'disabled');
                         $('#create').attr('value', 'Deactive');
                         $("#email").removeClass("white");
                         $("#email").addClass("red");
                     }
                 }
             });
         } else {
             $('.check').html('');
             $('#submit').attr('disabled', 'disabled');
             $('#submit').attr('value', 'Deactive');
         }
     });
 }); 
```

用于检查电子邮件可用性并在找到/未找到值时返回 1 或 0 的 PHP 代码：

```
include_once "../base.php";

$stmt = $db->prepare("SELECT * FROM `Consultants` WHERE email =':email'");
$stmt->bindParam(":email", $_POST['email']);
$stmt->execute();

$num_rows = $stmt->fetchColumn();
$HTML='';
if($num_rows > 0){
    $HTML='is already used';
}else{
    $HTML='';
}
echo $HTML;

$stmt = null; 
```

对于输入的每封电子邮件，它都会返回“可用”。我的数据库中有几封正在使用的电子邮件。我在控制台中也没有收到任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:08:22.883

您从`Consultants`表中选择所有字段，因此第一列的计算结果可能大于 0。

此外，您准备好的语句不应在 bound parameter 周围使用引号`:email`。

修理：

```
$stmt = $db->prepare("SELECT COUNT(*) FROM `Consultants` WHERE email =:email"); 
```

# android - Android：片段：从列表片段调用另一个活动

> ID：14459263
> 
> 赞同：0
> 
> 时间：2013-01-22T13:05:35.960
> 
> 标签：android, android-fragments

嗨，我正在玩 korovyansk 滑出示例应用程序，我是 Fragment 的新手，有人能告诉我如何从另一个 Fragment 调用活动。当列表项单击它应该触发另一个活动

```
public class MenuFragment extends ListFragment {

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(getActivity(),
                android.R.layout.simple_list_item_1, new String[] { " First", " Second", " Third", " Fourth", " Fifth", " Sixth"}));
        getListView().setCacheColorHint(0);
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        ((MenuActivity)getActivity()).getSlideoutHelper().close();

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T13:39:36.607

你可以做一些简单的事情如下

```
@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    Intent exampleIntent = new Intent(getActivity().getApplicationContext(), Example.class);
    exampleIntent.putExtra("ARGS", Var);
    startActivity(exampleIntent);
} 
```

# iphone - Apple 文档中提供的 SimpleFTPSample 中的打开流错误

> ID：14459265
> 
> 赞同：3
> 
> 时间：2013-01-22T13:05:45.967
> 
> 标签：iphone, ios, objective-c, ftp, image-uploading

我想通过 ftp 将图像上传到服务器。

我在苹果文档中找到了一个[SimpleFTPSample](https://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/Introduction/Intro.html)，并下载了它。

运行应用程序时（我使用的是 xcode 4.5.2，目标为 iphone 5.0 模拟器）它工作正常。我正在尝试通过此应用程序在我的服务器中创建目录并成功。

但是，上传应用程序中提供的图像时会导致“打开流错误”。我没有对应用程序进行任何更改。只需输入网址、用户名和密码。我认为这没有问题，因为我指定的目录已成功创建。

创建目录时，url 是“ftp://54.xyz/newfolder/”，它创建成功。

但是，上传的网址是“ftp://54.xyz/TestImage1.png”

文件路径是“/var/folders/pn/8p0jc4qn70v37j58c1kwf8l80000gn/T/TestImage1.png”

url 是通过将最后一个组件字符串附加到我指定的 ftp url 来获得的。

那么，其中的错误是什么？

在 fn 中，

```
 - (void)stream:(NSStream *)aStream handleEvent:(NSStreamEvent)eventCode
 { 

case NSStreamEventErrorOccurred: {
        [self stopSendWithStatus:@"Stream open error"];
    } break; 
```

被调用并显示 Stream open 错误。

我用谷歌搜索了一整天，没有需要的结果。它非常紧迫，我什至无法为此开始赏金。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:42:58.630

在 PutController.m StartSend 中设置 networkStream 委托之前添加这一行为我解决了这个问题：

```
[self.networkStream setProperty:(id)kCFBooleanFalse forKey:(id)kCFStreamPropertyFTPUsePassiveMode]; 
```

如果没有上面的行（或将属性设置为 kCFBooleanTrue 而不是 kCFBooleanFalse），我一直得到 Stream Open Error。我只尝试了一台 FTP 服务器，但它似乎不支持被动模式，这显然是默认的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T14:12:21.027

尝试这个....

```
 - (void)sendDidStart
{
    // self.statusLabel.text = @"Sending";
    [[NetworkManager sharedInstance] didStartNetworkOperation];

}

- (void)updateStatus:(NSString *)statusString
{
    assert(statusString != nil);
    //self.statusLabel.text = statusString;
}

- (void)sendDidStopWithStatus:(NSString *)statusString
{
    if (statusString == nil) {
        statusString = @"Put succeeded";
    }
    [[NetworkManager sharedInstance] didStopNetworkOperation];
}

#pragma mark * Core transfer code

// This is the code that actually does the networking.

// Because buffer is declared as an array, you have to use a custom getter.  
// A synthesised getter doesn't compile.

- (uint8_t *)buffer
{
    return self->_buffer;
}

- (BOOL)isSending
{
    return (self.networkStream != nil);
}

- (void)startSend:(NSString *)filePath
{
    BOOL                    success;
    NSURL *                 url;
    NSLog(@"localFilePathforImage..:%@",localFilePathforImage);
    assert(localFilePathforImage != nil);
    assert([[NSFileManager defaultManager] fileExistsAtPath:localFilePathforImage]);
    assert( [localFilePathforImage.pathExtension isEqual:@"png"] || [localFilePathforImage.pathExtension isEqual:@"jpg"] );

    assert(self.networkStream == nil);      // don't tap send twice in a row!
    assert(self.fileStream == nil);         // ditto

    // First get and check the URL.

    url = [[NetworkManager sharedInstance] smartURLForString:@"ftp://80.544/"];
    success = (url != nil);

    if (success) {
        // Add the last part of the file name to the end of the URL to form the final 
        // URL that we're going to put to.

        url = CFBridgingRelease(
                                CFURLCreateCopyAppendingPathComponent(NULL, ( CFURLRef) url, ( CFStringRef) imageString , false)
                                );
        success = (url != nil);
    }

    // If the URL is bogus, let the user know.  Otherwise kick off the connection.

    if ( ! success) {
        // self.statusLabel.text = @"Invalid URL";
    }    
    else 
    {

        // Open a stream for the file we're going to send.  We do not open this stream; 
        // NSURLConnection will do it for us.

        self.fileStream = [NSInputStream inputStreamWithFileAtPath:localFilePathforImage];
        assert(self.fileStream != nil);

        [self.fileStream open];

        // Open a CFFTPStream for the URL.

        self.networkStream = CFBridgingRelease(
                                               CFWriteStreamCreateWithFTPURL(NULL, ( CFURLRef) url)
                                               );
        assert(self.networkStream != nil);

        // if ([self.usernameText.text length] != 0) {
        success = [self.networkStream setProperty:@"yourusername" forKey:(id)kCFStreamPropertyFTPUserName];
        assert(success);
        success = [self.networkStream setProperty:@"password" forKey:(id)kCFStreamPropertyFTPPassword];
        assert(success);
        //}

        self.networkStream.delegate = self;
        [self.networkStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
        [self.networkStream open];

        // Tell the UI we're sending.

        [self sendDidStart];
    }
}

- (void)stopSendWithStatus:(NSString *)statusString
{
    if (self.networkStream != nil) {
        [self.networkStream removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
        self.networkStream.delegate = nil;
        [self.networkStream close];
        self.networkStream = nil;
    }
    if (self.fileStream != nil) {
        [self.fileStream close];
        self.fileStream = nil;
    }
    [self sendDidStopWithStatus:statusString];
}

- (void)stream:(NSStream *)aStream handleEvent:(NSStreamEvent)eventCode
// An NSStream delegate callback that's called when events happen on our 
// network stream.
{
#pragma unused(aStream)
    assert(aStream == self.networkStream);

    switch (eventCode) {
        case NSStreamEventOpenCompleted: {
            [self updateStatus:@"Opened connection"];
        } break;
        case NSStreamEventHasBytesAvailable: {
            assert(NO);     // should never happen for the output stream
        } break;
        case NSStreamEventHasSpaceAvailable: {
            [self updateStatus:@"Sending"];

            // If we don't have any data buffered, go read the next chunk of data.

            if (self.bufferOffset == self.bufferLimit) {
                NSInteger   bytesRead;

                bytesRead = [self.fileStream read:self.buffer maxLength:sSendBufferSize];

                if (bytesRead == -1) {
                    [self stopSendWithStatus:@"File read error"];
                } else if (bytesRead == 0) {
                    [self stopSendWithStatus:nil];
                } else {
                    self.bufferOffset = 0;
                    self.bufferLimit  = bytesRead;
                }
            }

            // If we're not out of data completely, send the next chunk.

            if (self.bufferOffset != self.bufferLimit) {
                NSInteger   bytesWritten;
                bytesWritten = [self.networkStream write:&self.buffer[self.bufferOffset] maxLength:self.bufferLimit - self.bufferOffset];
                assert(bytesWritten != 0);
                if (bytesWritten == -1) {
                    [self stopSendWithStatus:@"Network write error"];
                } else {
                    self.bufferOffset += bytesWritten;
                }
            }
        } break;
        case NSStreamEventErrorOccurred: {
            [self stopSendWithStatus:@"Stream open error"];
        } break;
        case NSStreamEventEndEncountered: {
            // ignore
        } break;
        default: {
            assert(NO);
        } break;

    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T12:18:31.620

我有同样的问题。

这是每个托管服务提供商。我认为问题在于代码可能会被登录名中的“@”符号混淆= dev@atoz.com。？

您是否在 @sing 中使用用户名？

# java - public void onConfigurationChanged(Configuration newConfig) 没有调用

> ID：14459266
> 
> 赞同：0
> 
> 时间：2013-01-22T13:05:53.257
> 
> 标签：java, android

> **可能重复：**
> [未调用 Android onConfigurationChanged](https://stackoverflow.com/questions/6457659/android-onconfigurationchanged-not-being-called)

我也有同样的问题。

```
<activity
    android:name="com.sailbook.MainActivity"
    android:configChanges="keyboardHidden|orientation"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

.

```
@Override
public void onConfigurationChanged(final Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
} 
```

我设置了一个断点，但如果我将手机置于“onConfigurationChanged”中，调试器将无法保持。

我希望当我转动手机时不会重新创建主要活动。但内容应该轮换。

# ravendb - 您如何在 http api 中使用 ravendb 方面？

> ID：14459273
> 
> 赞同：1
> 
> 时间：2013-01-22T13:06:07.707
> 
> 标签：ravendb

我正在使用 http api（没有 .net）来使用 raven。

我找不到任何有关直接使用 http api 使用构面的文档。

如果您之前已经这样做过，请简要概述设置和查询方面所需的 url 和 json。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:49:59.643

事实证明这相当简单。

首先定义 facet，为此只需将 facet 作为文档保存在数据库中，id 为 facets/[your-facet-name]

分面文档如下所示：

```
{
  "Facets": [
    {
      "Mode": "Default",
      "Name": "type",
      "Ranges": []
    }
  ]
} 
```

[您可以在此处](http://ravendb.net/docs/1.0/client-api/faceted-search)阅读有关 Facet 对象选项的更多信息

现在假设您已经设置了一个名为 my-index 的索引，您可以通过获取 url 来使用 facet：

/databases/[your-database-name]/facets/[your-index-name]/facetDoc=facets/[your-facet-name]&query=[your-query]

查询是查询索引时使用的普通 lucene 查询格式。

碰巧这些信息大部分已经在[构面页面上](http://ravendb.net/docs/1.0/client-api/faceted-search)，您只需仔细阅读即可！

# java - 基于移动和桌面浏览器切换布局

> ID：14459274
> 
> 赞同：0
> 
> 时间：2013-01-22T13:06:11.753
> 
> 标签：java, android, jsp, servlets, struts

我们有一个用户通过桌面浏览器使用的 Web 应用程序（在 struts 1.2 中制作，后端是休眠的）。但是当一些用户使用移动（Android）浏览器访问相同的内容时，屏幕内容会变小。因此，用户需要缩放它才能从他们的手机上使用应用程序，缩放会在屏幕上带来滚动条，给用户带来困难。

有没有办法根据浏览器（即桌面浏览器或移动浏览器）请求切换屏幕？请让我知道实现这一目标的最佳方法。

我想到的一种方法是检查`user-agent`标题，获取浏览器详细信息并相应地显示页面，但我再次想要实现这一目标的最佳方法。

因此，我现在的想法是为每个屏幕设置两个 jsp 文件：一个用于桌面浏览器，一个用于移动浏览器。我不想触碰桌面用户的现有布局，因此与其选择修改现有 jsp，不如为移动设备添加新的 jsp 文件。

1）除了依赖请求标头用户代理之外，还有其他更好的方法来检查浏览器详细信息（即是 deptp 还是移动设备）？

2) 为两个不同的浏览器提供两个 jsp 文件是个好主意吗？如果没有，那么如何在单个 jsp 中切换而不会有任何干扰现有内容的风险？

3）我们在实施这个过程中可能面临的问题是什么？

4）任何更好的实现相同的想法（可能与我现在计划的方式完全不同）

请让我知道这件事。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:47:30.197

我认为最好的方法是您在问题中提出的建议。让 PHP 检查用户代理，如果它的移动设备（android/iphone）等，然后执行重定向到网站的移动版本。这就是我所做的并且完美地工作。

# c# - 将“\”替换为“”

> ID：14459276
> 
> 赞同：2
> 
> 时间：2013-01-22T13:06:18.010
> 
> 标签：c#

我想`"\"`用空字符串替换。我尝试了很多东西，但没有用。

像这样的MyText`test/test\test:test*test?test"test<test>test|test`

```
MyText.Replace("\\\"", "").Replace("\\", "").Replace("\"", "").Replace("\\", ""); 
```

如何正确执行此操作？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-22T13:08:13.260

它应该像下面这样简单：

```
string oldStr = "test/test\\test:test*test?test\"test<test>test|test";
string newStr = oldStr.Replace(@"\", string.Empty); 
```

请注意，我使用该`@`符号将字符串视为[逐字字符串文字](http://blogs.msdn.com/b/csharpfaq/archive/2004/03/12/what-does-an-before-the-start-of-a-string-literal-mean.aspx)。这避免了每次使用时都需要转义反斜杠。

**编辑** 还请注意，替换函数不会替换您调用它的字符串的内容。相反，它返回一个带有替换的新字符串。从您发布的代码来看，我怀疑这是您问题的实际原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:08:37.503

试试这个

```
var str = @"test/test\test:test*test?test"test<test>test|test".Replace("\\", ""); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T13:08:46.053

你总是可以这样做：

```
string newString = oldString.Replace("\\", ""); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T13:11:36.710

我试过了

```
string test = @"test/test\test\test";
string result = test.Replace("\\", null); 
```

它工作正常。结果是“测试/测试测试测试”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T13:12:51.620

怎么样

`MyString.Replace(@"\", "");`

# java - 我需要使用多个 LDAP 提供程序。如何检查 LDAP 服务器的可用性？

> ID：14459280
> 
> 赞同：4
> 
> 时间：2013-01-22T13:06:25.067
> 
> 标签：java, authentication, ldap

我们有多个 LDAP/域服务器。（例如`LDAP://server1.com:389/DC=server1,DC=COM`，`LDAP://server2.com:389/DC=server2,DC=COM`）我需要通过检查可用性来使用其中一个。

```
try {
    Hashtable<String, String> env = new Hashtable<String, String>();
    env.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
    env.put(Context.PROVIDER_URL, "LDAP://server1.com:389/DC=server1,DC=COM");
    env.put(Context.SECURITY_AUTHENTICATION, "simple");
    env.put(Context.SECURITY_PRINCIPAL, username);
    env.put(Context.SECURITY_CREDENTIALS, password);

    DirContext ctx = new InitialDirContext(env);
} catch(NamingException ex) {
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2018-04-06T07:19:30.633

您可以在 PROVIDER_URL 环境属性中使用多个 ldap 服务器 URL，如下所示：

```
Hashtable env = new Hashtable(11);
env.put(Context.INITIAL_CONTEXT_FACTORY, 
    "com.sun.jndi.ldap.LdapCtxFactory");

// Specify list of space-separated URLs
env.put(Context.PROVIDER_URL, 
    "ldap://notthere:389/o=JNDITutorial " +
    "ldap://localhost:389/o=JNDITutorial " + 
    "ldap://remotehost/o=JNDITutorial " +
    "ldap://thirdhost:389/o=JNDITutorial");

// Create initial context
DirContext ctx = new InitialDirContext(env);

// See which server was used
System.out.println(ctx.getEnvironment().get(Context.PROVIDER_URL));

// do something useful with ctx
.... 
```

无论哪个 URL 成功，都会在上下文中使用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T13:17:06.467

您可以执行简单的匿名搜索以查看 LDAP 服务器是否已启动并正在运行。如果您收到拒绝连接异常，则服务器将关闭，您可以切换到列表中的下一个，再次执行相同的操作。

通常有一串域控制器前面会有负载均衡器，请求被路由到负载均衡器，该负载均衡器将识别正确的 DC 并将请求代理给它。LB 负责定期检查其列表中 DC 的可用性，如果它们出现故障则将其删除，当它们打开时再次检查它们等等。您可能需要与您的 IT 部门核实您的环境中是否存在此类 LB。

# php - PHP MySQL 连接查询

> ID：14459282
> 
> 赞同：1
> 
> 时间：2013-01-22T13:06:31.697
> 
> 标签：php, mysql, connection

我有一个专用服务器，它已经设置并运行了一段时间，现在使用以下内容。我们称这个服务器为 1。

MySQL 5.0.95 PHP 5.2.17

使用此方法从 PHP 创建到数据库的连接运行正常：

```
mysql_connect($IPAddress,$DBUser,$DBPassword);
@mysql_select_db($database) or die( "Unable to select database"); 
```

现在我还有第二台专用服务器，我们称之为服务器2，它连接到上面服务器上的数据库，直到今天它工作正常。我所做的是将 PHP 更新到 5.3.19 版本，现在我收到的错误是：

> 无法连接：mysqlnd 无法使用旧的不安全身份验证连接到 MySQL 4.1+。请使用管理工具通过命令 SET PASSWORD = PASSWORD('your_existing_password') 重置密码。这将在 mysql.user 中存储一个新的、更安全的哈希值。如果此用户在 PHP 5.2 或更早版本执行的其他脚本中使用，您可能需要从 my.cnf 文件中删除 old-passwords 标志

我试过运行 SET PASSWORD 命令，但它仍然不起作用。我也尝试将旧密码标志设置为 0，但这也不起作用。

我错过了什么吗？在服务器 1 上一切正常，只是服务器 2 不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:14:23.820

删除或注释掉文件“my.cnf”中的以下行（例如/etc/my.cnf）：

```
old_passwords = 1 
```

这将阻止 MySQL 使用旧密码，现在我敢打赌，如果您运行查询 -`SELECT user, Length(Password) FROM mysql.user;`您会看到您的用户名可能有两个条目，一个 16 个字符和一个 41（41 是`SET PASSWORD`您最近运行的查询。）

`old_passwords`删除/注释掉后，您需要重新启动 MySQL，否则它将继续使用old_passwords

一旦 MySQL 重新启动，您可能需要再次运行以下查询：

```
UPDATE mysql.user SET Password = PASSWORD('yourPassword!') WHERE user = 'yourUser'; 
```

&

```
FLUSH Privileges; 
```

# ruby - 在特定命名空间中测试

> ID：14459291
> 
> 赞同：4
> 
> 时间：2013-01-22T13:07:14.257
> 
> 标签：ruby, rspec

我正在尝试测试命名空间中的一些类，目前我有以下代码：

```
describe Server::SessionController do

  it "should create session" do
    Server::LoginController.stub(:authenitcate).and_return(session_id)
    Server::SessionController....
    Server::SessionController....
  end
end 
```

如何摆脱可重复的`Server`命名空间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T14:57:15.037

RSpec Book ( [http://pragprog.com/book/achbd/the-rspec-book](http://pragprog.com/book/achbd/the-rspec-book) ) 提供了一个解决方案：

```
3 module Codebreaker
4    describe Game do
5        describe "#start" do 
```

> ...第二条语句声明了一个名为 Codebreaker 的 Ruby 模块。这对于运行规范不是必需的，但它提供了一些便利。例如，我们不必完全限定第 4 行的 Game。

所以，试着把你的规范放在一个`Server`模块中。HTH。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T16:46:31.807

虽然@BernardK 提供了适合大多数情况的“正确的”解决方案，但也有一个肮脏的 HACK。如果您有很多不同的 Spec 文件测试来自同一命名空间的不同类，并且厌倦了`module Your::Long::Namespace ... end`在每个文件中编写并引入额外的标识级别（因为这可能会导致 VCS 中的巨大差异），这可能会很有用。

所以，如果你把这个...

```
def Object.const_missing(c)
  if Your::Long::Namespace.const_defined? c
    Your::Long::Namespace.const_get(c)
  else
    raise NameError, "uninitialized constant #{c}"
  end
end 
```

...在您的`spec_helper.rb`, 然后在使用此帮助程序的每个规范中，您将能够使用来自`Your::Long::Namespace`（类也是常量）的所有常量，无需前缀，也无需将您的规范放入此模块中。这很像 C++ 的`using namespace`声明。你可以在我的一个旧项目中看到一个使用它的例子：[定义在这里](https://github.com/moonlighters/webobots/blob/master/spec/emulation_system_helper.rb#L30)，[使用例子在这里](https://github.com/moonlighters/webobots/blob/master/spec/lib/emulation_system/emulation/missile_spec.rb#L38)。

但请注意：

*   这违反了所有可以想到的 OOP 原则；
*   你修改了**所有**对象的行为，一些代码可能不会这样；
*   与 C++ 一样`using namespace`，这会导致命名空间混乱和可能的冲突；
*   保持沉默并且不注意（这*很好*），这种黑客非常不明显且不可调试（这*非常*糟糕，特别是如果您有合作者）。

你看，使用风险自负:)

# mysql - 如何选择两个日期和时间之间的记录？

> ID：14459298
> 
> 赞同：-2
> 
> 时间：2013-01-22T13:07:55.753
> 
> 标签：mysql

我有 2 张桌子。`client (client_id, client_name, client_lname)`Order_Date和`orders(Order_Id,Client_Id,Total_Amount,Order_Date,Order_Time,Order_Status)` **Order_Time 的类型是 varchar。** 我必须显示两个日期和时间之间的记录。我写了这个查询：

```
SELECT 
  o.Order_Id, 
  c.client_name, 
  c.client_lname, 
  o.Total_Amount, 
  o.Order_Date, 
  o.Order_Time 
FROM orders AS o 
JOIN client AS c 
  ON o.Client_id = c.Client_id 
WHERE  (o.Order_Date between '01/01/2013' and '22/01/2013' ) 
AND (o.Order_Time between '17:41:59' and '20:42:04') 
AND o.Order_Status='1' 
ORDER BY o.Order_Id 
```

例如：

```
 Order_id   Client_id   Total_Amount             Order_Date        Order_Time Order_Status
    120        32        60                        01/01/2013        12:44:15    1
121        32        60                        01/01/2013        12:47:51    1
122        32        90                        01/01/2013        18:16:41    1
127        32        60                        01/01/2013        18:34:31    1
128        32        90                        01/01/2013        18:35:19    1
129        32       120                        19/01/2013        8:12:04     1
130        32        90                        19/01/2013        15:33:16    0
131        33        90                        19/01/2013        15:40:03    1 
```

我想显示从 01/01/2013 12:40:00 到 19/01/2013 09:00:00 的记录。所以它应该显示 6 条记录。要写什么查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:23:06.333

您需要在 WHERE 子句中组合日期和时间列。

```
WHERE DATE_ADD(o.Order_Date, INTERVAL o.Order_Time HOUR_SECOND) 
  BETWEEN '2010-01-01 16:30:00' AND '2010-01-02 17:00:00' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T08:32:52.503

首先，我将类型更改为

**Order_Date 到日期和 Order_Time 到时间。**

然后我写了这个查询

```
select o.Order_Id,c.client_name,c.client_lname,o.Total_Amount,o.Order_Date,o.Order_Time from orders as o join client as c on o.Client_id=c.Client_id where  DATE_ADD(o.Order_Date, INTERVAL o.Order_Time HOUR_SECOND) BETWEEN '2012-12-03 11:06:54' AND '2013-01-19 01:07:10'  and o.Order_Status='1' order by o.Order_Id 
```

有效。就是这样，我期待结果。感谢大家帮助我解决我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T13:19:32.843

尝试对您的日期使用以下格式： `YYYY-MM-DD HH:MM:SS`即`'01/01/2013'`变为`'2013-01-01 00:00:00'`

[有关更多信息，请参阅](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

# ruby - 如何在 wir 测试套件结束时关闭浏览器？

> ID：14459310
> 
> 赞同：6
> 
> 时间：2013-01-22T13:08:21.730
> 
> 标签：ruby, unit-testing, watir

使用 ruby​​ 的 watir 来测试一个 web 应用程序使浏览器在最后保持打开状态。网上的一些建议是，要进行真正的单元测试，您应该在每次测试时打开和关闭浏览器（在拆解调用中），但这很慢而且毫无意义。或者他们做这样的事情：

```
 def self.suite
   s = super
   def s.afterClass
     # Close browser
   end

   def s.run(*args)
     super
     afterClass
   end
   s
 end 
```

但这会导致摘要输出不再显示（仍应显示“100 个测试、100 个断言、0 个失败、0 个错误”之类的内容）。

我怎样才能让 ruby​​ 或 watir 在测试结束时关闭浏览器？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-22T19:31:16.600

当您想在[RSpec](http://rspec.info)规范中使用一个且唯一的浏览器时，您可以使用`:suite`钩子而不是`:all`在每个示例组中创建和关闭浏览器：

```
RSpec.configure do |config|
  config.before :suite do
    $browser = Watir::Browser.new
  end

  config.after :suite do
    $browser.close if $browser
  end
end 
```

但是，如果出于某种奇怪的原因您不想自己使用 RSpec 或任何测试框架，那么您可以使用 Ruby 的[Kernel#at_exit](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-at_exit)方法：

```
# somewhere
$browser = Watir::Browser.new
at_exit { $browser.close if $browser }

# other code, whenever needed
$browser.foo 
```

我仍然建议使用测试框架，而不是从头开始创建自己的框架。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T13:36:59.743

RSpec 和 Cucumber 都有“毕竟”的钩子。

规格：

```
describe "something" do
  before(:all) do
    @browser = Watir::Browser.new
  end
  after(:all) do
    @browser.close
  end
end 
```

( ) 中的黄瓜`env.rb`：

```
browser = Watir::Browser.new

#teh codez

at_exit do
  browser.close
end 
```

# c# - 在 linq 中使用 out 类型

> ID：14459311
> 
> 赞同：7
> 
> 时间：2013-01-22T13:08:22.253
> 
> 标签：c#, .net, linq

> **可能重复：**
> [LINQ：选择已解析的 int，如果字符串可解析为 int](https://stackoverflow.com/questions/4961675/linq-select-parsed-int-if-string-was-parseable-to-int)

这可能是一个基本问题，但我无法找到解决方法。我有一个字符串数组，我试图用整数解析它们。正如预期的那样，我得到了格式异常。

我怎样才能跳过“3a”并继续解析剩余的数组并使用 Linq 将整数存储到输出中。？这是更好的方法还是不做的做法？请阐明在这种情况下如何使用 TryParse

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            string[] values = { "1", "2", "3a","4" };
            List<int> output = new List<int>();

            try{
                output = values.Select(i => int.Parse(i)).ToList<int>();
            }
            catch(FormatException)
            {
                foreach (int i in output)
                    Console.WriteLine(i);
            }

            foreach (int i in output)
                Console.WriteLine(i);

            Console.ReadLine();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T13:10:14.633

您可以使用`int.TryParse`

```
string[] values = { "1", "2", "3a","4" };
int i = int.MinValue;
List<int> output = values.Where(s => int.TryParse(s, out i))
                         .Select(s => i)
                         .ToList(); 
```

[**演示**](http://ideone.com/646Bfv)

然而，Eric Lippert[不会被逗乐](http://blogs.msdn.com/b/ericlippert/archive/2012/08/14/out-parameters-and-linq-do-not-mix.aspx)。因此，如果您不想（ab）使用副作用，这将是最佳实践方法：

创建一个扩展方法，如：

```
public static class NumericExtensions
{
    public static int? TryGetInt(this string item)
    {
        int i;
        bool success = int.TryParse(item, out i);
        return success ? (int?)i : (int?)null;
    }
} 
```

然后你可以这样写：

```
List<int> output = values.Select(s => s.TryGetInt())
             .Where(nullableInt => nullableInt.HasValue)
             .Select(nullableInt => nullableInt.Value)
             .ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T13:37:58.140

[来自Tim Schmelter](https://stackoverflow.com/a/14459338/1080742)回答的 linq 版本

```
 string[] values = { "1", "2", "3a", "4" };
        int i = int.MinValue;
        var output = (from c in values
                      where int.TryParse(c, out i) 
                      select c).Select(s => int.Parse(s)).ToList();
        foreach (var item in output)
        {
            Console.WriteLine(item.ToString());
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T13:25:29.087

尽管我完全同意`int.TryParse`在 Tim Schmelter 的回答中使用 ，但我认为他的回答依赖于未记录的实现细节，更安全的替代方案可能是

```
List<int> output =
    values
    .Select(s => {
        int i;
        return int.TryParse(s, out i) ? i : default(int?);
    })
    .Where(i => i != null)
    .Select(i => i.Value)
    .ToList(); 
```

您也许可以将 替换`.Where(...).Select(...)`为`.OfType<int>()`。

您也可以将第一个`.Select(...)`lambda 表达式与显式的可重用函数放在一起：

```
int? MyTryParse(string s)
{
    int i;
    return int.TryParse(s, out i) ? i : default(int?);
}

List<int> output =
    values
    .Select(MyTryParse)
    .Where(i => i != null)
    .Select(i => i.Value)
    .ToList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T13:29:54.163

这个怎么样？受蒂姆的回答启发，但临时变量在循环内移动，因此它是并行安全的（假设字符串集合`values`是 ParallelEnumerable）。

```
values.Select(s =>
    {int i; return int.TryParse(s, out i) ? (int?)i : null;})
    .Where(x=>x!=null).Select(x=>x.Value); 
```

所以鉴于`["1", "two", "3"]`它返回`[1,3]`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-22T13:17:23.467

为什么要使用 LINQ？

尝试这个：

```
foreach(string str in values)
{
   int val;
   if(int.TryParse(str, out val))
   {
      output.Add(val);
   }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T13:20:38.907

```
List<string> output = values.Where(v => Regex.Match(v, "^(0|[1-9][0-9]*)$").Success)
                                        .ToList(); 
```

使用 Regex 进行更多控制以指示哪些值被视为有效的示例。

# php - PHP Adodb 许多睡眠连接

> ID：14459313
> 
> 赞同：0
> 
> 时间：2013-01-22T13:08:24.380
> 
> 标签：php, mysql, adodb

目前正在努力解决一个奇怪的问题：在使用 adodb 作为 php 的连接层时，它留下了许多休眠和不需要的连接。`wait_timeout`设置为，`20`但由于系统负载高，仍有大量（~100）睡眠连接。MySQL版本：`5.5.24-0ubuntu0.12.04.1`

是否存在有关 adodb5 和睡眠连接的已知错误？我*没有*使用持久连接！连接建立：

```
$conn = &ADONewConnection($DBTYPE);
$conn->Connect($DBHOST, $DBUSER, $DBPASSWORD, $DBNAME) 
```

非常感谢任何提示/建议如何减少睡眠连接数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:00:47.857

好的，终于找到了问题：vhost 文档根目录位于 nfs 挂载（远程）上。这个挂载有一些 IO 问题，导致 apache“空闲”连接，直到 nfs 挂载再次准备好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-03T16:12:57.337

如果片段是您连接/断开连接的唯一方法。然后，您很可能只需要在不再需要时关闭连接。

在我的大多数 php 文件中，我都以这种方式使用连接，我在打开连接的文件末尾有类似以下代码。

```
<?php
$conn->Close();
?> 
```

# ios - DACCircularProgress Track Circle 比 Progress Circle 大

> ID：14459314
> 
> 赞同：3
> 
> 时间：2013-01-22T13:08:24.460
> 
> 标签：ios, iphone, objective-c

我必须画一个倒数计时器圆圈，我正在使用[这个开源](https://github.com/danielamitay/DACircularProgress/tree/master/DACircularProgress) 库。要求是圆圈被绿色填充并在 x 秒内消失。我已经给了圆圈绿色并在上面画了一个白色圆圈，绿色圆圈看起来正在消失。

```
self.circularTimer.trackTintColor = [UIColor greenColor];
self.circularTimer.progressTintColor = [UIColor whiteColor];
self.circularTimer.thicknessRatio = 5.0f;
[self startAnimation]; 
```

一切正常，但有一个小问题，圆形边框可见。因为后面的圆圈比顶部的白色圆圈大一点。

[http://img651.imageshack.us/img651/1415/circleav.png](http://img651.imageshack.us/img651/1415/circleav.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:31:22.563

转到函数中的 DACCircularProgressView.m **- (void)drawInContext:(CGContextRef)context**并在此行下

```
CGFloat radius = MIN(rect.size.height, rect.size.width) / 2; 
```

插入这一行

```
CGFloat radiusTint= MIN(rect.size.height, rect.size.width) / 2.1; 
```

并将行替换为

```
CGPathAddArc(trackPath, NULL, centerPoint.x, centerPoint.y, radius, 3 * M_PI_2, -M_PI_2, NO); 
```

这条线

```
CGPathAddArc(trackPath, NULL, centerPoint.x, centerPoint.y, radiusTint, 3 * M_PI_2, -M_PI_2, NO); 
```

# c# - WebBrowser 样式未在 WinForms 中正确应用

> ID：14459316
> 
> 赞同：2
> 
> 时间：2013-01-22T13:08:33.977
> 
> 标签：c#, winforms, browser

这是我在 WinForms 应用程序中使用的 HTML 代码：

```
<html>
<head>
<style>
    #vif {
    margin:20px 5px 5px 5px;
    background-color:#888;
    }
    #inf li {
    margin-left:40px;
    color:#fff;
    }
    #inf {
    margin-top:15px;
    padding-bottom:15px;
    display:inline-block;
    }
</style>
</head>
<body>
<div id="vif">
    <div id="inf">
        <li>Hello!</li>
    </div>
</div>
</body>
</html> 
```

当我个人保存并使用IE9显示时，它工作正常，但是当`WebBrowser`使用它时，没有应用`margin-top`on 。`#inf`为什么？我用的不是同一个IE吗？相同的代码显示不同！

正确的渲染应该有一个灰色框，周围有边距，白色文本应该固定在中间。

如何正确显示使用`WebBrowser`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T13:20:44.713

将以下内容添加到 HTML 的标题部分：

```
<meta http-equiv="X-UA-Compatible" content="IE=9" > 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T13:19:30.580

如果问题确实是兼容性，请参阅[此问题](https://stackoverflow.com/a/4613025/266143)：

> WebBrowser 控件将使用您安装的任何版本的 IE，但出于兼容性原因，它将默认以 IE7 标准模式呈现页面。
> 
> 如果您想利用新的 IE9 功能，您应该在HTML 页面`<meta http-equiv="X-UA-Compatible" content="IE=9" />`的标签内添加元标签。`<head>`

# python - 在 GAE 中使用 matplotlib

> ID：14459320
> 
> 赞同：11
> 
> 时间：2013-01-22T13:08:52.700
> 
> 标签：python, google-app-engine, matplotlib

我的标签和标题很清楚地说明了我的问题。我想使用 matplotlib 在 Google App Engine 中创建实时绘图。我已经阅读了[文档](https://developers.google.com/appengine/docs/python/tools/libraries27)并在 SO 和 Google 上进行了搜索。我找到了一个帖子，指向[这个工作演示](http://gae-matplotlib-demo.appspot.com/)。但是当我自己尝试时，它对我不起作用。

我创建了一个简单的应用程序，仅包含一个处理程序脚本**hello_world.py**

```
import numpy as np
import os
import sys
import cStringIO

print "Content-type: image/png\n"

os.environ["MATPLOTLIBDATA"] = os.getcwdu()  # own matplotlib data
os.environ["MPLCONFIGDIR"] = os.getcwdu()    # own matplotlibrc
import matplotlib.pyplot as plt

plt.plot(np.random.random((20))) #imshow(np.random.randint((10,10)))

sio = cStringIO.StringIO()
plt.savefig(sio, format="png")
sys.stdout.write(sio.getvalue()) 
```

和一个配置文件**app.yaml**

```
application: helloworldtak
version: 1
runtime: python27
api_version: 1
threadsafe: no

handlers:
- url: /.*
  script: hello_world.py

libraries:
- name: numpy
  version: "latest"
- name: matplotlib
  version: "latest" 
```

我想绘制一些东西，然后将内容作为 png-image 返回。这个过程适用于像 Apache 或 IIS 这样的普通 Web 服务器，我这样做了一百万次。

问题是：当我在开发服务器中本地运行我的脚本时，我收到一个错误，这可能是由于我的 MPL 版本 1.1.1，这在 GAE 中只是“实验性的”。但是当我将我的应用程序部署到 GAE 时，我得到了一个完全不同的、不相关的错误。

看样子，回溯是：

```
Traceback (most recent call last):
  File "/base/data/home/apps/s~helloworldtak/1.364765672279579252/hello_world.py", line 16, in <module>
    import matplotlib.pyplot as plt
  File "/python27_runtime/python27_lib/versions/third_party/matplotlib-1.1.1/matplotlib/pyplot.py", line 23, in <module>
    from matplotlib.figure import Figure, figaspect
  File "/python27_runtime/python27_lib/versions/third_party/matplotlib-1.1.1/matplotlib/figure.py", line 18, in <module>
    from axes import Axes, SubplotBase, subplot_class_factory
  File "/python27_runtime/python27_lib/versions/third_party/matplotlib-1.1.1/matplotlib/axes.py", line 14, in <module>
    import matplotlib.axis as maxis
  File "/python27_runtime/python27_lib/versions/third_party/matplotlib-1.1.1/matplotlib/axis.py", line 10, in <module>
    import matplotlib.font_manager as font_manager
  File "/python27_runtime/python27_lib/versions/third_party/matplotlib-1.1.1/matplotlib/font_manager.py", line 1324, in <module>
    _rebuild()
  File "/python27_runtime/python27_lib/versions/third_party/matplotlib-1.1.1/matplotlib/font_manager.py", line 1278, in _rebuild
    fontManager = FontManager()
  File "/python27_runtime/python27_lib/versions/third_party/matplotlib-1.1.1/matplotlib/font_manager.py", line 995, in __init__
    self.defaultFont['ttf'] = self.ttffiles[0]
IndexError: list index out of range 
```

它似乎必须对 MPL 的字体缓存做些什么。我在文档中读到缓存和文件访问是 GAE 中 MPL 的问题之一，但显然，导入对其他人有效。

我究竟做错了什么？

**编辑** 根据下面的答案，我将代码更改为

```
import numpy as np
import cStringIO
import matplotlib.pyplot as plt

import webapp2

class MainPage(webapp2.RequestHandler):
    def get(self):
        plt.plot(np.random.random((20)),"r-")
        sio = cStringIO.StringIO()
        plt.savefig(sio, format="png")
        self.response.headers['Content-Type'] = 'image/png'

        self.response.out.write(sio.getvalue())

app = webapp2.WSGIApplication([('/', MainPage)],
                              debug=True) 
```

就像这样，它正在工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T16:23:58.700

我不熟悉 sys 模块。为了回答我更喜欢使用 webapp2 的问题。这是一个工作处理程序：

```
import webapp2
import StringIO
import numpy as np
import matplotlib.pyplot as plt

class MainPage(webapp2.RequestHandler):
    def get(self):
        plt.plot(np.random.random((20)))
        sio = StringIO.StringIO()
        plt.savefig(sio, format="png")
        img_b64 = sio.getvalue().encode("base64").strip()
        plt.clf()
        sio.close()
        self.response.write("""<html><body>""")
        self.response.write("<img src='data:image/png;base64,%s'/>" % img_b64)
        self.response.write("""</body> </html>""")

app = webapp2.WSGIApplication([('/', MainPage)], debug=True) 
```

`sio.getvalue()`或者，您可以使用 files api 在 blobstore 中编写，并使用`get_serving_url()`images api 的方法来避免在 base64 中编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T22:58:05.830

问题是您在导入 matplotlib 之前将环境变量`MATPLOTLIBDATA`和环境变量设置为您的应用程序目录。`MPLCONFIGDIR`由于您的应用程序目录中没有任何字体，因此无法加载任何字体。

# ios - 神奇的记录保存在后台

> ID：14459321
> 
> 赞同：6
> 
> 时间：2013-01-22T13:08:57.780
> 
> 标签：ios, xcode, multithreading, core-data, magicalrecord

我正在使用 Magical Record 框架来保存用户设置。现在，我第一次想将东西保存在后台线程中。在 Magical Record 的 github 页面上有一个我不完全理解的示例片段：

```
Person *person = ...;
[MagicalRecord saveInBackgroundWithBlock:^(NSManagedObjectContext *localContext){

    Person *localPerson = [person MR_inContext:localContext];

    localPerson.firstName = @"John";
    localPerson.lastName = @"Appleseed";

}]; 
```

为什么需要第一行？我不能完全在块中创建 Person 吗？谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-22T13:17:21.303

当然可以。这个例子只是`person`从外部上下文（你的默认一个或其他）中获取一个对象，并给你一个指向它的指针，`localContext`这样你就可以在后台更新它。`person`如果您要从头开始创建，您可以执行以下操作：

```
[MagicalRecord saveInBackgroundWithBlock:^(NSManagedObjectContext *localContext){

    Person *localPerson = [Person MR_createInContext:localContext];

    localPerson.firstName = @"John";
    localPerson.lastName = @"Appleseed";

}]; 
```

你完成了。

PS。请注意，这`MR_createInContext:`是在类上调用的类方法`Person`（而不是在`MR_inContext:`实例上调用的实例方法`person`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:17:16.180

是的，您也可以在块中创建 Person。inContext: 方法仅在您从不同的上下文中获取例如 Person 时才是必需的。请注意，如果您在块中创建 Person，那么您应该使用 createInContext: 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-19T05:49:13.953

Magical Record 的保存和获取是基于上下文的。因此，您可以在默认上下文中创建记录，也可以使用 MR_createInContext 方法在新上下文中创建记录。但是，在获取记录时，上下文应该与您创建的相同。

[http://pthiaga.blogspot.in/2014/11/running-database-fetch-core-data-in.html](http://pthiaga.blogspot.in/2014/11/running-database-fetch-core-data-in.html)

# android - NetBeans 安卓

> ID：14459324
> 
> 赞同：0
> 
> 时间：2013-01-22T13:09:08.737
> 
> 标签：android, netbeans

我对 nbandroid 有疑问，这是我想要清理构建或运行我的项目时得到的。

首先：我有：包`R`不存在。

我尝试了R 包中给出的解决方案： [http ://en.androidwiki.com/wiki/NetBeans](http://en.androidwiki.com/wiki/NetBeans)

> /home/blop/Android/android-sdk-linux/platform-tools/aapt：加载共享库时出错：libstdc++.so.6：无法打开共享对象文件：没有这样的文件或目录
> 
> /home/blop/Android/android-sdk-linux/tools/ant/build.xml:647：执行此行时出现以下错误：
> 
> /home/blop/Android/android-sdk-linux/tools/ant/build.xml:688：返回空值：127

构建失败（总时间：0 秒）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:37:05.920

我也使用 nbandroid 和 netbeans。您可以尝试几件事。

1 - 确保 sdk 设置为 tools -> options -> misc -> android -> SDK Location。我多次看到 nbandroid 或 netbeans 丢失了位置路径，这可能会导致问题。

2 - 检查项目文件夹中的文件“local.properties”是否包含正确的 SDK 位置。有时，当您在不同的工作站上工作时，它仍然具有先前构建/工作站的 sdk 位置。

3 - 确保您的所有类都包含顶部的包行，例如

打包你.android.app.package;

4 - 如果它仍然不起作用，请确保您没有导入 android.R 包，因为它会在那里查找您的文件而不是您的项目。

如果我遇到这个问题，我通常会这样解决它，希望它对你有用。

Ps 使用 netbeans 没有任何问题。我使用过 netbeans 和 eclipse，并且对 netbeans 和 git 集成有更好的体验。此外，nbandroid 现在带有一个非常酷的布局预览。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:20:59.507

这看起来不像 NBAndroid 问题。您更有可能无法运行 Android SDK 工具，即 aapt。它在我的系统上是 32 位可执行文件，而且 SDK 网站上说：64 位发行版必须能够运行 32 位应用程序。安装 ia32-libs（也许还有 ia32-libs-gtk）包并再次检查。

# javascript - 使用 RaphaelJS 嵌入 SVG

> ID：14459328
> 
> 赞同：1
> 
> 时间：2013-01-22T13:09:23.880
> 
> 标签：javascript, html, svg, raphael

我正在为 Web 应用程序开发 SVG 查看器。我必须使用现有的 SVG 文件并处理它们以显示工具提示，使用鼠标事件做效果......

我一直在寻找一个好的库来做到这一点，RaphaelJS 似乎很有用，它具有 IE 兼容性（甚至是 IE8）。

但是，经过几次尝试，我无法通过 Raphael 获得带有 SVG 的嵌入元素。

这不可能吗？如果没有，我该怎么做？

我加载 SVG 文件的代码是：

```
<embed wmode="transparent" id="viewer" src="svg/mouseover.svg" pluginspage="http://www.adobe.com/svg/viewer/install/" type="image/svg+xml" width="100%" height="100%"/> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:15:13.507

据我所知，raphael 不习惯将现有的 svg 嵌入网页中。相反，它的目的是允许您使用 javascript 动态创建 svg

见[http://net.tutsplus.com/tutorials/javascript-ajax/an-introduction-to-the-raphael-js-library/](http://net.tutsplus.com/tutorials/javascript-ajax/an-introduction-to-the-raphael-js-library/)

编辑：看看[https://github.com/wout/raphael-svg-import](https://github.com/wout/raphael-svg-import)，不过

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T08:11:33.887

最后，我使用 jQuery SVG (http://keith-wood.name/svg.html) 而不是 RaphaelJS (http://raphaeljs.com/) 达到了解决方案。

这是使用此插件的代码：

```
var svgDoc = $(document.getElementById("viewer").getSVGDocument().documentElement);
$(svgDoc.get(0)).svg();
var svg = $(svgDoc).svg('get'); 
```

此外，此代码适用于大多数浏览器（IE8、IE9、Firefox 和 Chrome）。

# jquery - 在页面缩放上添加类。100% 时删除

> ID：14459331
> 
> 赞同：1
> 
> 时间：2013-01-22T13:09:49.483
> 
> 标签：jquery, zooming

我有一个固定的导航栏。我想在页面缩放时添加一个 .zoomed 类，并在正常大小或 100% 时删除该类。我找到了这个 detect-zoom.js 插件：

[https://github.com/yonran/detect-zoom](https://github.com/yonran/detect-zoom)

…来自这个线程：

[如何检测所有现代浏览器中的页面缩放级别？](https://stackoverflow.com/questions/1713771/how-to-detect-page-zoom-level-in-all-modern-browsers)

…检测页面缩放但在添加/删除类时我有点无能为力。我已经设法让它在“放大”时添加类，但我需要在正常 100% 时删除类。这就是我使用插件演示中的位的内容：

```
<script src=detect-zoom.js></script>
<script>
    'use scrict';
    var zoomLevel = document.getElementById('zoom-level');
    window.onresize = function onresize() {
        $(".navbar").addClass("zoomed");
    }
    onresize();

    if ('ontouchstart' in window) {
        window.onscroll = onresize;
    }
</script> 
```

我的CSS是：

```
.zoomed{ position: absolute; } 
```

基本上，当页面缩放时，我只想要导航栏上的类。未缩放时，应删除该类。我猜是一个'if'语句，但我尝试了一些东西，但似乎没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:25:03.423

在您的`onresize()`功能中：

```
 // remove zoomed class
  $(".navbar").removeClass("zoomed");

  // 1 is 100%
  var zoom = DetectZoom.zoom();

  // +
  if(zoom > 1)
    $(".navbar").addClass("zoomed in");

  // -
  if(zoom < 1)
    $(".navbar").addClass("zoomed out"); 
```

（[小提琴](http://jsfiddle.net/9jE8Q/)）

# asp.net-mvc - DataContext 是 MVC 中 Model 的一部分还是 Controller 的一部分？

> ID：14459335
> 
> 赞同：3
> 
> 时间：2013-01-22T13:10:04.873
> 
> 标签：asp.net-mvc, model-view-controller, datacontext, separation-of-concerns

从相当长的时间开始在asp.net MVC上工作今天在 通过MSDN上的一些示例代码时
遇到了一个理论问题 我读到了这样的东西

```
public class SomeController()
{
 public ActionResult SomeAction(SomeModel model)
 {
   var dataContext = new SomeDataContext();
   //basic CRUD operations on data context
   //
 }
} 
```

这里数据库显然是通过控制器访问的，理论上是不正确
的，这个例子有什么问题，或者我对什么模型和控制器的定义需要刷新
更新：-
或者有可能每个地方都在MSDN`Models`和`ViewModels`被认为是平等的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T15:44:47.040

### 介绍

MVC 设计模式相当古老。它[最初是为 Smalltalk-80 应用程序定义](http://www.itu.dk/courses/VOP/E2005/VOP2005E/8_mvc_krasner_and_pope.pdf)的，当时“网络”是两个人在大学之间发送 ping。从那时起，它已经[发展](http://martinfowler.com/eaaDev/uiArchs.html)了很多。

MVC 设计模式背后的核心原则是[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)。该模式将表示与业务逻辑分开。表示层主要包含视图、控制器、模板、视图模型和演示者（取决于您使用哪种风格的 MVC 启发模式），而业务逻辑结束于模型层。

模型层虽然没有在模式中严格定义，但在 ASP.NET MVC 中由服务和服务使用的所有结构（包括模型对象，更好地称为[域对象](http://c2.com/cgi/wiki?DomainObject)）组成。

### 关于这个问题

`DataContext`当您在寻找基本的 MVC 教程时，在控制器中看到使用是很常见的。MVC 架构意味着大型应用程序，在*Hello-World*示例中，完全实现的 MVC 架构看起来就像膨胀。

为了简单起见，这些示例牺牲了代码分离。与的交互`DataContext`基本上是存储逻辑，这是模型层处理的任务之一。当在控制器中使用时，这意味着您的模型层已经开始在表示层中泄漏，并且您最终会遇到*“控制器胖，模型瘦”*的问题。

在现实世界的应用程序中，这`DataContext`将是处理模型层内持久性的结构的一部分。可能作为[数据映射器](http://www.martinfowler.com/eaaCatalog/dataMapper.html)的一部分，如果您选择手动编写它们。

### 关于“更新”

模型（我想在这种情况下您的意思是域/模型对象）来自与 ViewModel 完全不同的应用层。

顾名思义，在 MVVM 模式中，ViewModel 取代了 Controller。ViewModel 从模型层获取数据，然后将其转换为可用于 View 的方式。

当您无法完全控制视图或/和模型层的行为时，最好使用此模式（如果您真的使用 MVVM）。例如：如果您受雇为 SAP 构建替代前端，或者当视图实际上是某种形式的硬件设备时，它需要特定类型的输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:20:31.070

**MVC**是一种 GUI 模式，就像**MVP**或**MVVM**一样，它与数据访问和持久性无关。确实，许多简单的 CRUD 应用程序并不比 MVC 和底层数据库更多，但在更复杂的应用程序中，MVC 将成为表示层的一部分。

作为`DataContext`O/RM 属于基础设施层，而不是 GUI。在 MVC 中**Model**可以理解为**ViewModel**，是的。

然而，控制器可以使用 DataContext 或任何其他方式从底层数据存储中检索此模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T13:22:07.347

模型通常是数据类（代表数据库表）。视图模型通常被称为已创建的类，以便在视图中使用它们进行**演示**。

`DataContext`在上述情况下，您将无法在视图模型上使用 ，但**您可以将它与上述模型类（也称为 DTO 类）完美结合使用**。

# wpf - WPF Ribbon RibbonCommand 替换为 ICommand

> ID：14459336
> 
> 赞同：2
> 
> 时间：2013-01-22T13:10:06.510
> 
> 标签：wpf, ribbon

我正在寻找一个如何替换**RibbonApplicationMenuItem**的旧代码的示例。问题是如何替换删除的**RibbonCommand**

```
<ResourceDictionary>
   <r:RibbonCommand 
     x:Key="MenuItem1" 
     CanExecute="RibbonCommand_CanExecute" 
     LabelTitle="Menu Item 1" 
     LabelDescription="This is a sample menu item" 
     ToolTipTitle="Menu Item 1" 
     ToolTipDescription="This is a sample menu item" 
     SmallImageSource="Images\files.png" 
     LargeImageSource="Images\files.png" />
  </ResourceDictionary>
</r:RibbonWindow.Resources>

<r:RibbonApplicationMenuItem Command="{StaticResource MenuItem1}">
</r:RibbonApplicationMenuItem> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T17:22:58.170

您可以使用`RelayCommand`.

这种情况下的绑定非常简单：

```
<ribbon:RibbonApplicationMenuItem Header="Hello _Ribbon"
                              x:Name="MenuItem1"
                              ImageSource="Images\LargeIcon.png"
                              Command="{Binding MyCommand}"
                              /> 
```

在这种情况下，您的 ViewModel 类必须包含`MyCommand`以下`ICommand`类型的属性：

```
public class MainViewModel
{   
    RelayCommand _myCommand;
    public ICommand MyCommand
    {
        get
        {
            if (_myCommand == null)
            {
                _myCommand = new RelayCommand(p => this.DoMyCommand(p),
                    p => this.CanDoMyCommand(p));
            }
            return _myCommand;
        }
    }

    private bool CanDoMyCommand(object p)
    {
        return true;
    }

    private object DoMyCommand(object p)
    {
        MessageBox.Show("MyCommand...");
        return null;
    }
} 
```

不要忘记分配`DataContext`：`MainWindow`

```
public MainWindow()
{
    InitializeComponent();
    this.DataContext = new MainViewModel();
} 
```

`RelayCommand`班级：

```
public class RelayCommand : ICommand
{
    #region Fields

    readonly Action<object> _execute;
    readonly Predicate<object> _canExecute;

    #endregion // Fields

    #region Constructors

    public RelayCommand(Action<object> execute)
        : this(execute, null)
    {
    }

    public RelayCommand(Action<object> execute, Predicate<object> canExecute)
    {
        if (execute == null)
            throw new ArgumentNullException("execute");

        _execute = execute;
        _canExecute = canExecute;
    }
    #endregion // Constructors

    #region ICommand Members

    public bool CanExecute(object parameter)
    {
        return _canExecute == null ? true : _canExecute(parameter);
    }

    public event EventHandler CanExecuteChanged
    {
        add { CommandManager.RequerySuggested += value; }
        remove { CommandManager.RequerySuggested -= value; }
    }

    public void Execute(object parameter)
    {
        _execute(parameter);
    }

    #endregion // ICommand Members
} 
```

# python - 高斯拟合与 python 中的 scipy.optimize.curve_fit 结果错误

> ID：14459340
> 
> 赞同：7
> 
> 时间：2013-01-22T13:10:18.330
> 
> 标签：python, scipy, curve-fitting

我在将高斯拟合到数据时遇到了一些麻烦。我认为问题在于大多数元素都接近于零，实际拟合的点并不多。但无论如何，我认为他们制作了一个很好的数据集来适应，我不明白是什么让 python 感到困惑。这是程序，我还添加了一条线来绘制数据，这样你就可以看到我想要拟合的内容

```
#Gaussian function
def gauss_function(x, a, x0, sigma):
    return a*np.exp(-(x-x0)**2/(2*sigma**2))

# program
from scipy.optimize import curve_fit
x = np.arange(0,21.,0.2)
# sorry about these data!
y = [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 2.2888599818864958e-275, 1.0099964933708256e-225, 4.9869496866403137e-184, 4.4182929795060327e-149, 7.2953754336628778e-120, 1.6214815763354974e-95, 2.5845990267696154e-75, 1.2195550372375896e-58, 5.6756631456872126e-45, 7.2520963306599953e-34, 6.0926453402093181e-25, 7.1075523112494745e-18, 2.1895584709541657e-12, 3.1040093615952226e-08, 3.2818874974043519e-05, 0.0039462011337049593, 0.077653596114448178, 0.33645159419151383, 0.40139213808285212, 0.15616093582013874, 0.0228751827752081, 0.0014423440677009125, 4.4400754532288282e-05, 7.4939123408714068e-07, 7.698340466102054e-09, 5.2805658851032628e-11, 2.6233358880470556e-13, 1.0131613609937094e-15, 3.234727006243684e-18, 9.0031014316344088e-21, 2.2867065482392331e-23, 5.5126221075296919e-26, 1.3045106781768978e-28, 3.1185031969890313e-31, 7.7170036365830092e-34, 2.0179753504732056e-36, 5.6739187799428708e-39, 1.7403776988666581e-41, 5.8939645426573027e-44, 2.2255784749636281e-46, 9.4448944519959299e-49, 4.5331936383388069e-51, 2.4727435506007072e-53, 1.5385048936078214e-55, 1.094651071873419e-57, 8.9211199390945735e-60, 8.3347561634783632e-62, 8.928140776588251e-64, 1.0960564546383266e-65, 1.5406342485015278e-67, 2.4760905399114866e-69, 4.5423744881977258e-71, 9.4921949220625905e-73, 2.2543765002199549e-74, 6.0698995872666723e-76, 1.8478996852922248e-77, 6.3431644488676084e-79, 0.0, 0.0, 0.0, 0.0]

plot(x,y) #Plot the curve, the gaussian is quite clear
plot(x,y,'ok') #Overplot the dots

# Try to fit the result
popt, pcov = curve_fit(gauss_function, x, y) 
```

问题是 popt 的结果是

```
print popt
array([  7.39717176e-10,   1.00000000e+00,   1.00000000e+00]) 
```

关于为什么会发生这种情况的任何提示？

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-22T14:07:40.747

你的问题是curve_fit的初始参数。默认情况下，如果没有给出其他信息，它将以数组 1 开头，但这显然会导致一个根本错误的结果。这可以简单地通过给出一个合理的起始向量来纠正。为此，我从数据集的估计均值和标准差开始

```
#estimate mean and standard deviation
meam = sum(x * y)
sigma = sum(y * (x - m)**2)
#do the fit!
popt, pcov = curve_fit(gauss_function, x, y, p0 = [1, mean, sigma])
#plot the fit results
plot(x,gauss_function(x, *popt))
#confront with the given data
plot(x,y,'ok') 
```

这将完美地近似您的结果。请记住，曲线拟合通常无法工作，除非您从一个好的点开始（在收敛盆内，要清楚），这不取决于实现。当你可以使用你的知识时，永远不要盲目适应！

# java - 如何使用 DOM 获取具有某些属性的节点数

> ID：14459351
> 
> 赞同：0
> 
> 时间：2013-01-22T13:10:41.190
> 
> 标签：java, dom, xml-parsing

我的任务是在 Eclipse 中使用 JDom 解析 XML 文件。当我开始创建代码时，我的代码仅足以获取具有标签名称模型的长度（多少）节点。任务更具体，我需要获取具有属性类型的标签名称模型的节点的长度。我应该如何修改我的代码以获得结果？

这是我的 XML 文件的一部分

```
<container>
  <models>
    <model id="FM1" type="BoQ">
      <meta
       <phase phaseDesc="PRCR>SLCT>"/>
    <domain domainCode="SPM.BOQ.RFP "/>
    <levelOfDetail levelOfDetailCode="[4]"/>
  </meta>
</model>

<model id="FM2" type="Object">
  <meta>
    <phase phaseDesc="PRCR>SLCT> "/>
    <domain domainCode="BIM"/>
    <levelOfDetail levelOfDetailCode="[4] "/>
  </meta>
</model>

<model id="FM3">
  <meta>   
    <phase phaseDesc="PRCR>SLCT>"/>
    <domain domainCode="SPM.QTO"/>
    <levelOfDetail levelOfDetailCode="[5]"/>
  </meta>
</model>

<model id="FM4" type="BoQ">
  <meta>   
    <phase phaseDesc="PRCR>SLCT>"/>
    <domain domainCode="TSM.TSC"/>
    <levelOfDetail levelOfDetailCode="[3]"/>
  </meta>
  </model>
 </models>

  <linkModels>
    <linkModel id="LM1" type="QuantitySplit">
  <meta>
    <info>
      <i k="ModelName" v="Linkmodell"/>
    </info>
    <domain domainCode="LKM.QSP" domainDesc="Link Model"/>
  </meta>
  <models>
    <model id="FM1"/>
    <model id="FM2"/>
    <model id="FM3"/>
    <model id="FM4"/>
  </models>

</container> 
```

公共类 xmldom {

```
public static void main(String[] args) {

    Document xmlDoc = getDocument("./src/MMT_Angebot_Anfrage.xml");

    System.out.println("Root: "+ 
            xmlDoc.getDocumentElement().getNodeName());

    NodeList model = xmlDoc.getElementsByTagName("model");

    System.out.println("Number of Models " +
            model.getLength());

    String elementPhase = "phase";
    String elementDomain = "domain";
    String elementLOD = "levelOfDetail";
    String attrPhase = "phaseCode";
    String attrDomain = "domainCode";
    String attrLOD = "levelOfDetailCode";

    getElementAndAttrib(model, elementPhase, elementDomain, elementLOD, attrPhase, attrDomain, attrLOD); 
}

private static Document getDocument(String docString) {

    try {

        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();

        factory.setIgnoringComments(true);
        factory.setIgnoringElementContentWhitespace(true);
        factory.setValidating(true);

        DocumentBuilder builder = factory.newDocumentBuilder();

        return builder.parse(new InputSource(docString));

    }

    catch(Exception ex) {

        System.out.println(ex.getMessage());

    }

    return null;
}

private static void getElementAndAttrib(NodeList model,
        String elementPhase, String elementDomain, String elementLOD,
        String attrPhase, String attrDomain, String attrLOD) {

    try {

        for(int i=0; i < model.getLength(); i++){

            Node modelNode = model.item(i);

            Element modelElement = (Element)modelNode;

            NodeList phaseList = modelElement.getElementsByTagName(elementPhase);

            NodeList domainList = modelElement.getElementsByTagName(elementDomain);

            NodeList lodList = modelElement.getElementsByTagName(elementLOD);

            Element phaseElement = (Element)phaseList.item(0);

            Element domainElement = (Element)domainList.item(0);

            Element lodElement = (Element)lodList.item(0);

            NodeList elementList = phaseElement.getChildNodes();

                System.out.println("=================================================");               
                System.out.println(attrPhase + " : "+ phaseElement.getAttribute(attrPhase));
                System.out.println(attrDomain + " : "+ domainElement.getAttribute(attrDomain));
                System.out.println(attrLOD + " : "+ lodElement.getAttribute(attrLOD));

        }
    }

    catch(Exception ex) {

        System.out.println(ex.getMessage());

    }

  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:30:33.720

您想计算`<model>`包含 type 属性的元素数量吗？如果，那么 XPath 是最合适的工具。

```
XPath xp = XPathFactory.newInstance().newXPath();

Double num = xp.evaluate("count(//model[@type])", doc, XPathConstants.NUMBER); 
```

顺便说一句，您使用的是 DOM，而不是 JDOM。

# logging - 把 log4j 记录 httpclient

> ID：14459360
> 
> 赞同：0
> 
> 时间：2013-01-22T13:11:19.140
> 
> 标签：logging, log4j, httpclient

我想用 log4j 登录 httpclient。为此，我添加了一个文件 commons-logging.properties，其内容为 org.apache.commons.logging.Log=org.apache.commons.logging.impl.Log4JLogger。然后我添加了一个文件 log4j.properties，其中包含 httpclient 文档提供的以下内容作为日志记录示例：

```
log4j.rootLogger=INFO, stdout

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%5p [%c] %m%n

log4j.logger.org.apache.http=DEBUG
log4j.logger.org.apache.http.wire=ERROR 
```

这两个文件都驻留在类路径中。我把以下参数

```
-Dlog4j.configuration=log4j.properties
-Dlog4j.debug 
```

但是，当我运行使用 httpclient 执行 http 请求的程序时，我看不到任何日志记录输出。后一个参数应该使 log4j 的输出在这个意义上变得冗长，它显示了一些东西，例如使用的属性文件。这根本不显示。我也尝试过以编程方式读出记录器

```
Logger.getLogger("log4j.logger.org.apache.http.wire").getLevel().toString() 
```

这会引发空指针异常。

另外我读了

```
LogManager.getCurrentLoggers().hasMoreElements() 
```

这总是错误的。

似乎 log4j 没有为 httpclient“激活”。任何人都可以在这里帮助我我能做些什么来打开登录吗？

（是的，我已经在 stackoverflow 阅读了相关主题）

非常感谢

菲利克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T18:24:46.557

在 android 上使用 httpclient 时，关于如何激活/停用 WIRE 和 HEADER 记录器的公共日志接口和 CW 存在某种奇怪的冲突......

仅涉及一个选择重载/重新实现 android 记录器的项目，为 android 上的 WIRE 和 HEADER 记录器提供挂钩，请[在此处查看](http://code.google.com/p/httpclientandroidlib/source/browse/script/androidextra/HttpClientAndroidLog.java?r=c8da491277618385878af3e1d10e91965368d1e8)

FWIW，如果您在 REST 接口的 android 中进行大量低级使用，并且您只想快速切换日志记录，我对[他的项目](http://code.google.com/p/httpclientandroidlib/)很幸运，我只使用 2 个版本的 jar，具体取决于我是否需要日志记录。本机、apache 核心或客户端上的每个新版本，您都可以运行他的脚本来将 apache 本机转换为 android 使用。它有点杂草丛生，但它会起作用。

# c# - 什么是为不同的“来自”页面创建后退按钮的好方法

> ID：14459362
> 
> 赞同：1
> 
> 时间：2013-01-22T13:11:25.533
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3, razor

我有两个不同的页面，用户可以从中单击“详细信息”链接并转到详细信息页面。

在详细信息页面上，我有一个“返回”按钮，它将用户引导到原始页面，当然是两个原始页面之一。

还有一个额外的问题：在其中一个返回链接中，我必须指定一个额外的匿名对象。

我现在的视图代码是：

```
@{
    MvcHtmlString backLink = null;
    if (Model.ReturnPage == MatchResultReturnPage.Search)
    {
        backLink = Html.ActionLink("GoBack", "Search", new {search = true});
    }
    else
    {
        backLink = Html.ActionLink("GoBack", "Dashboard");
    }
} 
```

在控制器中，我现在查看`url.referrer`它是否包含“*仪表板*”，然后将其设置`Model.ReturnPage`为“*仪表板*”。

有更清洁的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T13:13:56.053

将`ReturnLink`作为属性放在模型上并将其设置在控制器中，这将减少您将该逻辑放入视图中的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:26:27.120

当然有更简洁的方法，但是由于您的代码当前，很容易理解您正在尝试做什么。

我会说保持原样，只需在其周围放置一个#region 包装器，并在不需要使用它时将其隐藏：

```
#region get referrer page
MvcHtmlString backLink = null;
if (Model.ReturnPage == MatchResultReturnPage.Search)
{
    backLink = Html.ActionLink("GoBack", "Search", new {search = true});
}
else
{
    backLink = Html.ActionLink("GoBack", "Dashboard");
}
#region 
```

我建议的唯一一件事是在控制器中而不是视图中进行此检查，并将检查结果简单地放在模型属性或 ViewBag 中。

要访问控制器中的 Helpers，请执行以下操作：

```
var URL = new UrlHelper(this.Request.RequestContext).Action("MyAction", "MyController", new { id = 123 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T13:18:24.857

您可能应该完全在 JavaScript 中实现后退按钮。
使用[历史对象](http://www.w3schools.com/jsref/obj_history.asp)

```
<a href=”javascript:history.back()”&gt; [Back]</a> 
```

# css - 如何在没有“位置：绝对；”的情况下使 DIV 填充页面？

> ID：14459364
> 
> 赞同：2
> 
> 时间：2013-01-22T13:11:32.450
> 
> 标签：css, layout, html

我正在尝试设计一个具有几个页眉、一些主要内容和一个页脚的页面布局。

我想在主要内容中使用 jQuery UI 选项卡小部件并在其周围有边框，因此 div 必须填充页眉和页脚之间的所有空间，但我还希望内容在需要时扩展，从屏幕底部和出现一个滚动条，因此我可以向下滚动并查看它。

实际上，我希望内容 div 的最小高度是页眉和页脚之间的距离，但允许它扩展。

[我已经实现](http://jsfiddle.net/bg100/Atjxc/3/)了[Sticky Footer](http://ryanfait.com/sticky-footer/)方法，如果我不希望我的主要内容周围有边框，它会很好地工作。在这个[jsFiddle](http://jsfiddle.net/bg100/Atjxc/3/)示例中，带有红色 2px 边框的 div 最初需要填充页面，当您单击“添加东西”按钮添加更多内容时，它需要向下推页脚并显示滚动条。

这就是我想要实现的目标：

![在此处输入图像描述](../Images/fb8a798a159e749238e177778239ce92.png)

...使用这些规则：

*   内容需要有边框。
*   内容需要从填充页眉和页脚之间的空间开始。
*   内容需要超出页面底部，显示滚动条。
*   随着内容的增长，页脚需要向下推。
*   仅使用 CSS，这样如果内容动态变化，一切都会自动调整。
*   仅在现代浏览器中工作，我对支持 IE<8 不感兴趣。

我试过了：

*   绝对定位，但这会将内容固定为屏幕大小，并且不允许它超出底部。
*   jQuery 定位，但这感觉太像 hack，而且似乎是修复它的坏方法。
*   在各个地方使用`height: 100%`and `min-height: 100%`，但似乎没有达到我想要的效果。
*   查看围绕同一问题的其他[Stack Overflow](https://stackoverflow.com/q/10464716/180215)问题，但似乎没有一个能够解释超出屏幕底部的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:43:55.133

我能想到的最好的方法是[http://jsfiddle.net/Atjxc/6/](http://jsfiddle.net/Atjxc/6/)

因为窗口的高度是可变的，所以我*只能*使用百分比以及绝对定位。

```
.foo { overflow-y:scroll; position:absolute; left:0; top:10%;
width:100%; height:85%; }
.footer{ background:#ffc; position:absolute; bottom:0;} 
```

我为主要部分添加了一个容器，当内容变得太长时，它会显示一个滚动条。我不能设置边框，因为它们必须设置为 px 值，这会弄乱我基于百分比的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:58:44.420

好吧，您可以只测量页眉和页脚之间的实际距离，然后将最小高度设置为确切的 px。

例如，之间的距离是 600px，

然后设置

```
min-height:600px;
height:100% 
```

这样，当您的内容适合最小高度时，例如。600px 那么高度应该是 600px，现在当内容被添加并且超出 600px 的高度时，容器 div 会在高度上拉长以容纳被 height:100% 覆盖的添加内容；.

是的，您可以使用“Measure It”（它是 chrome/firefox 扩展）来实时测量屏幕上的距离，它更方便。

希望这会有所帮助，这是 jsfiddle [http://jsfiddle.net/Atjxc/11/](http://jsfiddle.net/Atjxc/11/)

# klee - 使用 KLEE 错误运行

> ID：14459365
> 
> 赞同：2
> 
> 时间：2013-01-22T13:11:32.593
> 
> 标签：klee

我是 Klee 的新手，所以我开始制作教程。

如果用于编译，我使用：

1.  llvm-gcc --emit-llvm -c -g get_sign.c 然后我尝试使用 klee get_sign.o 运行我收到错误：KLEE: ERROR: error loading program 'get_sign.o': Invalid MODULE_CODE_GLOBALVAR record 。该错误在 BitcodeReader.cpp 文件 [http://llvm.org/docs/doxygen/html/BitcodeReader_8cpp_source.html](http://llvm.org/docs/doxygen/html/BitcodeReader_8cpp_source.html) 第 01594 行中定义。

2.  clang（我已成功用于我的 LLVM 通行证），似乎无法使用它： KLEE: ERROR: error loading program 'get_sign.o': Invalid bitcode signature 。

你知道我能做什么吗？

此外，最好提供使用 Clang 编译的 Klee 输入，这些输入已经用于我的通行证，但正如错误所暗示的那样，这可能吗？

先感谢您 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:56:32.720

问题是我在 LLVM 3.1 上安装了 Klee。在[http://klee.llvm.org/GetStarted.html](http://klee.llvm.org/GetStarted.html)的说明中提到 Klee 与 LLVM 2.9 完全兼容。提到：“KLEE 目前仅在 Linux x86-32 和 x86-64 目标上使用 LLVM 2.9 进行测试。KLEE 不适用于较旧的 LLVM 版本（例如，2.5），并且可能不适用于较新的版本（例如，3.0 ）。”。我在 LLVM 2.9 上安装了 Klee，它运行良好。

# django - 为导入到内部数据库和 Django 提供安全的外部网页的最佳方式。（层级沟通的最佳方式）。

> ID：14459369
> 
> 赞同：1
> 
> 时间：2013-01-22T13:11:36.840
> 
> 标签：django, architecture, n-tier-architecture, non-relational-database

我的工作中有一个 Django 应用程序，只能在内部网络上使用。

目前我们使用 Excel 导入数据，但这是一个非常容易出错的过程，我想替换它。

我想在 Javascript 中提供一个丰富的 Web 应用程序，它公开了来自主 Django 应用程序的一些但不是全部数据（菜单的查找值）。这将在对外界可见的服务器上运行。

那么有什么好的方法呢？

管理层担心将主 Django 应用程序提供给外部世界的安全性，我也更喜欢中间层 - 我认为编写一个小型服务器端应用程序比检查当前代码并确保更容易它对外界来说足够安全（我学习了 Django 构建这个应用程序，所以一些旧代码没有按照最佳实践完成，但确实可以按需要工作）。我还希望它保留新数据，直到有人在导入主数据库之前检查它看起来不错。（我是唯一的开发者，所以有时间考虑）。

所以我现在能想到两个选择。

1：在面向外部的服务器上有一个小型 Django 应用程序。这可以与主应用程序通信以获取查找所需的值，并在导入之前存储输入。这些表将基本上反映主应用程序，并在主应用程序表更改时需要更新。

2：有类似的东西，但不是使用数据库，而是使用面向外部的服务器来联系内部服务器上的 REST 接口。类似于使用 Django 非关系从主应用程序的 REST 接口获取数据。在主数据库服务器中放置一个导入表以存储数据以供审批。

这些方法是好还是坏？还有其他建议吗？有没有学习 n 层应用程序的好资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-11-20T12:26:38.937

如果我对您的理解正确，您希望一小群受信任的用户能够访问内部数据库。已经有一个内部 Django 应用程序访问该数据库。

管理层担心让这个应用程序或它的扩展可用于一般互联网。

我认为他们的担忧是非常有道理的。如果您只有有限的一组用户访问导入功能，请将身份验证从 Django Web 应用程序推送到 HTTP 服务器/平衡器/前端。

例如，设置一个 apache 外部网络服务器，强制所有对您的 Django 应用程序的访问都经过加密（HTTPS）和身份验证。可以使用服务器上的静态文件通过 HTTP-Auth 对用户进行身份验证。密码更改/用户添加必须由登录服务器的管理员完成。

只有在完成此登录后，才能访问具有自己身份验证的 Django 应用程序。我会选择一个单独的导入应用程序，而不是扩展主应用程序。这个小应用程序可以在主数据库上以减少的权限运行，以实现纵深防御。

此设置为您提供了一些额外的接口/故障点，同时对随机 Internet 用户保持较小的攻击面。您可以聘请安全顾问来审核您的 apache 配置，并确保您锁定了更大的 Internet，并且只需要担心经过 HTTP 身份验证的用户。

到目前为止，我已经运行此类设置 15 年了。用户对双重身份验证感到恼火，网吧中的密码保存*是*HTTP-Auth 的一个问题，但通常一旦设置它就非常无缝。

# visual-studio-2010 - 在 VisualStudio 2010 中使用简单的 Façade 架构模式管理依赖项

> ID：14459371
> 
> 赞同：1
> 
> 时间：2013-01-22T13:11:40.393
> 
> 标签：visual-studio-2010, architecture, dependencies, projects-and-solutions, layer

作为软件架构（以及 Visual Studio）的学习练习，我决定创建一组四个最小的 WPF/C# 应用程序（解决方案），其目的只有一个：按下按钮时从文件中读取一些圆形参数，并显示GUI上的结果：

1.  一个应用程序从 .txt 文件中读取并在文本框中显示参数；
2.  一个应用程序从 .xml 文件中读取并在画布中显示圆圈；
3.  一个应用程序从 .txt 读取并显示圆圈；
4.  一个应用程序从 .xml 读取并显示文本参数；

也就是说，我有一个包含 Circle 类的域项目、两个 DataAccess 项目（一个用于 xml，另一个用于 txt）和两个演示项目（一个用于几何绘图，另一个用于显示文本）。这四种解决方案中的每一种都指的是这些可重用的模块化项目的组合。

另外，我想使用 FAÇADE 设计模式，以便演示文稿“看到”外观，但看不到数据访问或域。Façade 看到了 Domain 和 DataAccess，而每个 DataAccess 只是盲目地做自己的事情。

问题是：

*   我需要两个 Façade，因为我必须为两个 DataAccess 层之一创建一个命名空间依赖项，以便在 Façade 项目中使用 DataAccess 命名空间。所以一个 Façade 依赖于 XmlBackend，另一个依赖于 TxtBackend；
*   每个 Presentation 都依赖于 Façade，因此命名空间可用，但是由于我有两个 Façade，每个 Presentation 项目最终都会依赖于两个不同的 Façade 项目，这是一件坏事；

我试图创建一个单一的 Façade 项目，以便每个 Presentation 都引用它，但是这个 Façade 将依赖于两个不同的 DataAccess 后端。然后在一个解决方案中，我不能只有一个 DataAccess 后端项目，因为 Façade 项目将依赖于两个不同的后端项目。

所以问题是：我如何解决这个问题，以便我可以有四个解决方案，每个解决方案只有必要的项目（域、外观、一个演示和一个数据后端），不违反分层架构，每个项目不需要对其他人了解太多？

更新：[Msdn 库](http://msdn.microsoft.com/en-us/library/b142f8e7%28v=vs.100%29.aspx)说以下内容，我认为这可能是一个提示：“[解决方案资源管理器允许您] 添加对解决方案中的多个项目或解决方案有用的项目，而无需引用每个项目中的项目。”

谢谢阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:43:24.967

如果您想要完全解耦并且绝对需要 Façade 可独立于两个 DataAccess 模块重用，您可以让 Façade 层声明`IDataAccess`两个 DataAccess 项目中的类都将实现的接口。

然后，第三方模块（GUI 之一？）将在运行时根据需要将正确的 DataAccess 具体实现注入外观。

作为旁注，您的部分问题来自这样一个事实，即在此架构中，1 个项目几乎 == 1 个类，因此*对象*紧密耦合和*项目*紧密耦合问题混淆了。

但是，您应该注意，对象紧密耦合会导致脆弱性、可维护性和可测试性差，而项目耦合只会影响可重用性。换句话说，您*可以*使用 Façade 引用两个 DataAccess 项目，这仅意味着您不能在没有 DataAccess 项目的情况下在另一个上下文/架构中重用 Façade。

# symfony - AsseticBundle：资产文件的内容是否应该影响自动生成的资产文件名？

> ID：14459374
> 
> 赞同：0
> 
> 时间：2013-01-22T13:11:53.130
> 
> 标签：symfony, assetic

我在 Symfony 2.1 项目中使用 AsseticBundle，向现有 js 和 css 文件添加新代码不会生成新的资产文件名。

我知道还有另一种解决方案，使用 assets_version，但通过修改资产文件也应该对生成的文件名产生影响是有道理的。

您是否知道为什么无论进行什么更改，资产文件都使用相同的文件名提供服务？

# javascript - 我的带有名称属性的 jQuery 模态对话框表单输入没有与表单数据的其余部分一起发送

> ID：14459377
> 
> 赞同：0
> 
> 时间：2013-01-22T13:12:00.483
> 
> 标签：javascript, html, forms, jsp, servlets

在我的名为 frmClock 的表单中，我有一个 div，它最终用作 jQuery UI 模式对话框的基础：

```
 <div id="dialog-form-clockout" title="Associate Mileage Reimbursement" data-ok="<%=clkContinueClockOut%>" data-cancel="<%=clkCancel%>" data-errornum="Invalid number format. Valid number format is 999.9" data-errorzero="Please enter a value greater than zero. Otherwise, select No." data-errormaxchars="Please enter a numeric value less than 5 characters long." data-errornoradio="Please select Yes or No.">
        <fieldset>        
            <div id="personalVehicle">
                <label for="<%=TAConstants.FN_ASM_RESPONSE%>">Did you use your personal vehicle for business travel during this shift?</label>
                <br>
                <input type="radio" name="<%=TAConstants.FN_ASM_RESPONSE%>" id="personalvehicle" class="text ui-widget-content ui-corner-all" value="Y"/>Yes
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <input type="radio" name="<%=TAConstants.FN_ASM_RESPONSE%>" id="personalvehicle" class="text ui-widget-content ui-corner-all" value="N"/>No
                <br>
            </div>
            <div id="questionsY" class="hidden">
                <div class="modalDialogQuestions">
                    <label for="<%=TAConstants.FN_BANK_ROUND_TRIPS%>" class="modalDialogQuestionsLbl">Enter number of round-trips to the bank.</label>  
                    <select name="<%=TAConstants.FN_BANK_ROUND_TRIPS%>" class="modalDialogAnswers" id="roundtrips">
                        <option selected value="0">0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                    </select>
                </div>
                <div class="modalDialogQuestions">
                    <label for="<%=TAConstants.FN_OTHER_MILES%>" class="modalDialogQuestionsLbl">Enter number of miles for business related travel other than the bank.</label>     
                    <input class="positive modalDialogAnswers" type="number" name="<%=TAConstants.FN_OTHER_MILES%>" id="mileage" value="0.0" maxlength=5/>
                </div>
            </div>
        </fieldset>
        <div class="ui-state-error hidden" style="height:auto;"><span class="ui-icon ui-icon-alert" style="display:inline; margin-right:.25em; float:left;"/></span><p class="validateTips" style="display:inline; border:0px;"></p></div>
    </div>
</form> 
```

所以最终，一旦我们填写了这个 jQuery 模态对话框表单，我会使用我们在此增强之前使用的相同 javascript 来提交表单（加上警报，告诉我这个数据在文档元素中）。

```
 alert(document.getElementById('personalvehicle').value);
    alert(document.getElementById('roundtrips').value);
    alert(document.getElementById('mileage').value);

    submitForm(); 
```

...

```
/**
 *  This function disallows the form to be submitted twice.
 */
function submitForm () {
  if (!hasBeenSubmitted) {
    hasBeenSubmitted = true;
    document.frmClock.submit();
  } 
```

警报显示与用户输入的文本相同的文本，但似乎不会与我们过去在没有 jQuery 模态对话框表单的情况下收到的其余表单数据一起发送。我一直在从我们的处理器 .java 文件中确定这一点，下面的代码似乎没有设置变量，因为它没有通过空检查：

```
if (req.getParameter(FN_ASM_RESPONSE)!=null){
    Character asmResponse = (req.getParameter(FN_ASM_RESPONSE)).charAt(0);
}
if (req.getParameter(FN_BANK_ROUND_TRIPS)!=null){
    Integer bankRoundTrips = Integer.parseInt(req.getParameter(FN_BANK_ROUND_TRIPS));
}
if (req.getParameter(FN_OTHER_MILES)!=null){
    Float otherMiles = Float.parseFloat(req.getParameter(FN_OTHER_MILES));
} 
```

我听到的最多的是确保我的输入具有`name`属性。虽然这些名称属性似乎已设置，但查看源代码将它们显示为`personalvehicle,` `roundtrips`, 和`mileage`，它们是从以下常量 .java 文件中设置的：

```
public static final String FN_ASM_RESPONSE = "personalvehicle";
public static final String FN_BANK_ROUND_TRIPS = "roundtrips";
public static final String FN_OTHER_MILES = "mileage"; 
```

有人对我应该研究或尝试什么有任何想法吗？getParameter() 方法上的断点用于检查 null 是否显示它命中这些点，但由于参数为空，因此未命中所包含的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:35:13.557

问题是 jQuery UI 将包含输入字段的对话框移出表单。

您可以更改对话框加载函数以添加在创建对话框时运行的函数并将其移回表单。

```
$('#myDialog').dialog({  create: function () { $(this).parent().appendTo('form') } }); 
```

# android - Android上的简单屏幕旋转

> ID：14459383
> 
> 赞同：2
> 
> 时间：2013-01-22T13:12:23.167
> 
> 标签：android, screen-orientation

我一直在寻找如何在 android 应用程序中旋转屏幕时不重新加载整个活动。最后，我发现只使用

```
android:configChanges="orientation" 
```

在 AndroidManifest 中的活动定义中确实足够了。当我旋转手机时，活动不会重新加载，我的所有视图都完美地调整为横向，没有任何问题，onSaveInstanceState 和 onRestoreInstanceState（在某些编程旋转指南中使用）都不会被触发。

但如果就这么简单，为什么我发现的所有教程和指南都提供了如此复杂的解决方案？IE

[http://www.devahead.com/blog/2012/01/preserving-the-state-of-an-android-webview-on-screen-orientation-change/](http://www.devahead.com/blog/2012/01/preserving-the-state-of-an-android-webview-on-screen-orientation-change/)

[在 Android 中保存一些关于方向变化的数据](https://stackoverflow.com/questions/7167729/saving-some-data-on-orientation-change-in-android)

通过我的实验，一切都会自动正确地重新渲染，但是我不知道的简单解决方案是否存在一些隐藏的问题？真的那么简单和正确吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:22:33.120

对于“简单”的应用程序，例如联系人选择器或类似的东西，你真的不需要保存信息，你真的只需要重新定位视图，所以使用 android:configChanges="orientation" 就可以了。

但是，如果您正在开发诸如游戏之类的东西或任何需要计算屏幕面积的东西，并且在纵向/横向模式下会有所不同，您需要保存此信息并重新计算所有内容以正确显示它，而不会出现错误。

顺便说一句，我不是Android专家或其他什么，这只是我的简单观点/理解。如果这不是正确的答案，请随意对我投反对票。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:23:05.077

如果您在配置更改时不需要更改任何资源，这很好。但是假设您定义了景观资源，那么您现在需要自己处理交换 UI 资源。但是如果 Activity 不需要改变资源，那真的就这么简单。

此外，如果您在清单中以 SDK 13 或更高版本为目标，请注意，您必须包含用于旋转更改的 screenSize 值，例如：-

```
android:configChanges="orientation|screenSize" 
```

如果您的目标是 SDK 12 或更低版本，那么您已经掌握了它就可以了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-22T13:16:41.723

在清单文件中添加它

```
android:configChanges="keyboardHidden|orientation" 
```

这真的足够了。我也有同样的疑问

# mysql - 两年之间日期的表中的记录

> ID：14459385
> 
> 赞同：-3
> 
> 时间：2013-01-22T13:12:26.440
> 
> 标签：mysql, sql, select

我需要从一张日期在 2011 年 6 月 30 日到 2012 年 6 月 30 日之间的表中获取记录。问题是结果只是显示了 2012 年的记录，尽管该表有 2011 年的记录。下面是我的代码

```
SELECT * FROM tbl_name where date between '06/30/2011' and '06/30/2012' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T13:17:45.703

您需要将其 bact 转换为`date`using `STR_TO_DATE`，例如

```
SELECT * 
FROM tbl_name 
where STR_TO_DATE(date, '%m/%d/%Y') between '2011-06-31' and '2012-06-31' 
```

*   [STR_TO_DATE](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)

在数据库中存储为字符串并不好，`Dates`因为您看到很难搜索它，您需要一些额外的函数将其转换回日期并且*我认为*它会杀死索引。

如果您有时间或特权进行更改，请修复这些值并将其更改为`DateTime`数据类型。

# android - android 4.1 作曲家->captureScreen(...) 失败

> ID：14459388
> 
> 赞同：0
> 
> 时间：2013-01-22T13:12:44.400
> 
> 标签：android, screen-capture

我使用 JNI 方式`composer -> captureScreen(...)`来捕获最终的surfaceflinger 组合屏幕，就像源代码中的[这个示例一样。](http://code.metager.de/source/xref/android/4.1.1/frameworks/native/services/surfaceflinger/tests/Transaction_test.cpp)

并在 android 4.1 上构建成功，但在运行时发生错误：`captureScreen(...)`returns`err = 1`和`heap = null`.

我用谷歌搜索[这个链接](http://iqwen.net/question/54584)是同样的失败，仍然没有答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:49:30.203

好的！我得到了答案...原生代码中的`err = 1`手段`PERMISSION_DENIED = 1`，根本原因是在android 4.0截图后考虑APP的权限，[这里](http://blog.csdn.net/hk_256/article/details/7306590)有中文解释，[这里](http://blog.csdn.net/tgww88/article/details/8003117)是工作的细节

谢谢！BR

# ruby-on-rails - 形式上的验证？

> ID：14459389
> 
> 赞同：2
> 
> 时间：2013-01-22T13:12:46.630
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1, ruby-on-rails-3.2

我正在尝试进行验证，但在上传 excel 时没有找到正确的方法

查看代码

```
<%= form_for :dump, :url=>  import_csv_index_path, :html => { :multipart => true } do |f| %>
<% if (-----).errors.any? %>
<div id="error_explanation">
 <%= pluralize((----).errors.count, "error") %> prohibited this link from being saved:

<% (---).errors.full_messages.each do |msg| %>
<li><%= msg %></li> 
```

```
</div>

<% end %>

    <%= f.label :'Select an Excel File:'  %>
    <%= f.file_field :file %>
    <i href="#" id="blob_1" class="icon-info-sign" rel="popover" style="margin-top: 300px"></i><br/>

    <%= submit_tag 'Submit' ,:id => 'submit',:class =>"btn btn-primary"%><br/><br/>

<% end -%> 
```

型号代码：

```
class Person < ActiveRecord::Base

 attr_accessible :date, :email, :name, :avatar ,:template_id

 validates_presence_of :email,:message => 'Email is compulsory' 

end 
```

我在 (-----) 的地方写什么

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:23:17.803

我已经完成了另一种方法，所以在这里讨论，

控制器代码：

```
 def import

   @error = []
   @error = Person.import(params[:dump][:file])
 redirect_to people_path, notice: "Employees imported.",:flash => { :error =>   "Employees(   Email : invalid/blank) are not saved : #{@error.join("  , ")}" }
end 
```

在模型中：

def self.import（文件）

```
 spreadsheet = open_spreadsheet(file)
  @err = []
  @alt = []

  header = spreadsheet.row(1)
    (2..spreadsheet.last_row).each do |i|
    row = Hash[[header, spreadsheet.row(i)].transpose]
    @person = Person.find_by_id(row["id"]) ||Person.new

 @person.name = row["Name"].to_s
    @person.date = row["Date"]
    @person.email = row["Email"]

  if @person.save

     else
        @err << {:name => row["Name"].to_s,:error => @person.errors.messages}
     end

    end
    @err.each do |t|

   @alt.push(t[:name])

    end

  return @alt

end 
```

并将其称为闪存消息......现在工作正常。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:33:30.207

我认为在您的控制器中的某个地方，您必须使用表单数据调用模型`.validate`的新实例。`Person`您可以将该模型保存在可以代替`(-----)`.

# javascript - 触发 Primefaces p:selectOneMenu onchange

> ID：14459396
> 
> 赞同：1
> 
> 时间：2013-01-22T13:13:07.377
> 
> 标签：javascript, jquery, jsf-2, primefaces

似乎 Primefaces`p:selectOneMenu`组件将呈现的 HTML`<select>`标记包装在 div 中，并将所选项目显示为不同的标签。我猜，用户所做的更改会`<select>`通过 javascript 反映到原始版本，导致绑定到的 onchange 事件`<select>`无法正常工作。因此，我对所有 s 的 onchange 事件的以下绑定`:input`不适用于`p:selectOneMenu`s。

```
function applyChangeHandler() {
    $(':input').on('change', function() {
        console.log('on change: ' + this.id);
    });
} 
```

然而 onchange 的属性`p:selectOneMenu`正在被触发。所以 Primefaces 在后台触发了这个处理程序（我猜也是）。

```
<p:selectOneMenu id="myList" onchange="console.log('selectOneMenu')">
    <f:selectItem itemLabel="val1" itemValue="val1"/>
    <f:selectItem itemLabel="val2" itemValue="val2"/>
</p:selectOneMenu> 
```

所以我的要求是以某种方式将 onchange 处理程序绑定到`p:selectOneMenu`上面的 applyChangeHandler() 函数中的所有 s。或者它可以通过 Primefaces 特定的 API 或我希望你们分享的其他方式手动触发。否则，将使用一个快速的解决方法`h:selectOneMenu`。

我的目标是检测“页面上未保存的更改”。所以上面的脚本将被放置在一个通用模板中，如下所示：

```
<p:outputPanel id="sc" autoUpdate="true">
    <script type="text/javascript">
        applyChangeHandler();
    </script>
</p:outputPanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:13:12.400

为什么框架已经为您提供了额外的侦听器？

如果您的目标是使用 jQuery，您只需将处理程序放在可从窗口全局范围访问的 js 文件中。

```
function myChangeHandler(that) {
    //wrap the element with jQuery
    var select = jQuery(that);
    //Get the div parent. The actual wrapper of the `selection-menu` widget markup
    var selectMenu = select.parents('div.ui-selectonemenu');
    //From here I can manipulate any HTML child element using jQuery
    jQuery('label.ui-selectonemenu-label', selectMenu).text('mooo');
} 
```

然后调用你的处理程序`onchange`，传递`selectOneMenu`as 参数

```
<p:selectOneMenu id="myList" onchange="myChangeHandler(this)">
    <f:selectItem itemLabel="val1" itemValue="val1" />
    <f:selectItem itemLabel="val2" itemValue="val2" />
</p:selectOneMenu> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T09:46:02.243

您可以使用“DOMSubtreeModified”，而不是使用 onChange。

这适用于 p:selectOneMenu

```
$(".ui-selectonemenu-label").each(function(index) {
    $(this).on("DOMSubtreeModified", setDirty());
}); 
```

还。如果您希望到处都使用相同的通用代码，另一种可能性是覆盖 SelectOneMenu 的原型，如下所示：

```
var origTriggerChange = PrimeFaces.widget.SelectOneMenu.prototype.triggerChange;
// if this code has been run already, don't accumulate triggerChangemethods!
if(origTriggerChange.isModified != "true"){
      PrimeFaces.widget.SelectOneMenu.prototype.triggerChange = function(b){
      this.jq.find("select").change();
      origTriggerChange.call(this, b);
   };
   PrimeFaces.widget.SelectOneMenu.prototype.triggerChange.isModified = "true";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-15T13:03:07.393

您需要将**widgetVar**添加到**p:selectOneMenu**以在**JS中使用它**

```
<p:selectOneMenu id="myList" onchange="console.log('selectOneMenu')" widgetVar="myList">
  <f:selectItem itemLabel="val1" itemValue="val1"/>
  <f:selectItem itemLabel="val2" itemValue="val2"/>
</p:selectOneMenu> 
```

这会将此代码添加到您的页面

```
$(function(){
  PrimeFaces.cw("SelectOneMenu","myList",{
       id:"A2:Form:myList",
       effect:"fade"
  })
}); 
```

希望这会有所帮助。

# objective-c - 如何在分段点击时隐藏 UItoolbar

> ID：14459398
> 
> 赞同：0
> 
> 时间：2013-01-22T13:13:13.850
> 
> 标签：objective-c, uitableview, uiview, uiviewcontroller, uitoolbar

我创建了一个带有多个子视图的 UIViewController。要切换到所有子视图，我添加了一个分段控件。屏幕看起来像这样。

![在此处输入图像描述](../Images/2cd4776ad2e79dc67d2bd6c80ccedcf8.png)

在第二个视图中，我添加了一个 UIToolbar，使用这行代码..

```
 toolbar = [UIToolbar new];
    toolbar.barStyle = UIBarStyleDefault;
    [toolbar sizeToFit];
    toolbar.frame = CGRectMake(0, 0, 800, 40);

    UIBarButtonItem *filterByClass = [[UIBarButtonItem alloc] initWithTitle:@"A" style:UIBarButtonItemStyleBordered target:self action:@selector(goToFilteredByClass:)];

    UIBarButtonItem *spacer = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];

    NSArray *buttonItems = [NSArray arrayWithObjects:filterByClass, spacer, nil];
    [toolbar setItems:buttonItems animated:NO]; 
```

所以画面会是这样的。。

![在此处输入图像描述](../Images/009235877a2f4c396d3459023e2151e8.png)

当我回到 A 段时，这是我的屏幕..

![在此处输入图像描述](../Images/6ae0b4d9a9e296fade14871a74a53ef3.png)

然后数据被工具栏覆盖..我想删除它，因为段A没有工具栏..有没有办法解决这个问题..？

谢谢，

关联

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:46:30.317

在您的视图控制器中设置一个动作，并让您的分段控件在其“值更改”事件触发时调用该动作。

控件的段像数组一样编号，从 0 开始。在您的操作方法中，您测试您感兴趣的段（在本例中为段 0）并显示或隐藏工具栏。如果您更喜欢滑动动画，您也可以在屏幕外对其进行动画处理。

如果您不担心留下工具栏以供以后重用，您可以在您的操作方法中使用 removeFromSuperview ；但是如果您使用此方法，您将无法获得动画。

使用核心动画隐藏它的快速示例：

```
-(IBAction)segmentedControlValueChanged:(UISegmentedControl *)sender
{

   switch (sender.selectedSegmentIndex) {
      case 0:
         // A was pressed, so hide the toolbar
         [UIView animateWithDuration:0.2
                 animations: ^(void) { toolbar.alpha = 0.0; }];
         break;
      case 1:
         // B was pressed so show the toolbar
         [UIView animateWithDuration 0.2
                 animations: ^(void) { toolbar.alpha = 1.0; }];
         break;
   }
} 
```

# webcam - 在 CEF 1 / appjs 中显示网络摄像头流？

> ID：14459405
> 
> 赞同：1
> 
> 时间：2013-01-22T13:13:30.843
> 
> 标签：webcam, chromium-embedded, appjs

我正在运行 appjs，并且正在考虑在 html 中显示来自本地网络摄像头的实时内容，并希望获得一些有关如何执行此操作的提示。

/克里斯托弗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:48:36.800

Appjs 是建立在 CEF 之上的，所以我认为我说目前此功能不可用是正确的。然而，下一个版本的 AppJS 将使用 content api，这意味着媒体和视频应该可用。

现在我建议您使用 chrome 在 HTML5 中开发您的应用程序，然后稍后在 AppJS 中运行它，当它赶上并提供开箱即用的这些功能时。

# wordpress - 您如何使 Wordpress 插件具有“每个帖子”选项？

> ID：14459407
> 
> 赞同：0
> 
> 时间：2013-01-22T13:13:34.463
> 
> 标签：wordpress, wordpress-theming

我正在构建一个 Wordpress 博客，该博客需要一个自定义幻灯片系统，每个帖子管理页面上都有一个管理面板（有点像 Yoast 的 SEO 插件在每个页面上都有选项）。

如何使管理选项出现在帖子管理页面上？

谢谢，

查理

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:09:34.050

您没有提供有关您的项目的详细信息，但您可能[想要制作一些 meta_boxes](http://codex.wordpress.org/Function_Reference/add_meta_box)并将数据保存为[自定义字段](http://codex.wordpress.org/Custom_Fields)。

这是一个截断的示例[，摘自我在 wordpress.stackexchange 上为一个问题汇总的内容](https://wordpress.stackexchange.com/questions/72427/adding-an-assisting-editor-box-to-post-page)。某些功能的详细信息对于您的问题并不重要，但它说明了一般的“如何”。按照链接获取有效但真诚的测试版代码。

```
// author checkboxes
add_action( 'add_meta_boxes', 'assisting_editor' );
function assisting_editor() {
    add_meta_box(
        'assisting_editor', // id, used as the html id att
        __( 'Editorial Tasks' ), // meta box title
        'editor_tasks', // callback function, spits out the content
        'post', // post type or page. This adds to posts only
        'side', // context, where on the screen
        'low' // priority, where should this go in the context
    );
}

// this is the callback that creates the meta box content
function editor_tasks( $post ) {
  // function details skipped; follow the link
}

// to save the data
add_action( 'save_post', 'save_metadata');
// callback for the save hook ^^
function save_metadata($postid) {
  // function details skipped; follow the link
} 
```

# java - 正则表达式立即负前瞻

> ID：14459411
> 
> 赞同：1
> 
> 时间：2013-01-22T13:13:48.583
> 
> 标签：java, regex

我想匹配`"foo 6"`但不匹配`"foo 6</end>"`。此刻我的表情是：`foo\s\d+(?!.*</end>)`。`foo 6`问题是，如果字符串中稍后有`</end>`标记方式，它也会丢弃。IE

`foo 6`匹配 -**这是正确的**

`foo 6</end>`不匹配 -**这是正确的**

`foo 6 word word word word number word number word</end>`不匹配 -**这是不正确**的，因为`foo 6`此处仍应匹配。

正则表达式应该允许上述 3 种情况是**正确的**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T13:15:54.270

根据您的解释，您不需要`.*`：

```
foo\s\d+(?!</end>) 
```

# url - 从 Phonegap 中的 InAppBrowser 检索当前链接

> ID：14459413
> 
> 赞同：2
> 
> 时间：2013-01-22T13:14:12.133
> 
> 标签：url, cordova

作为 Phonegap Cordova 2.3.0 中的一项新功能，InAppBrowser 有助于在应用程序内浏览网页。我的问题是，当浏览器关闭时，如何检索当前打开的 URL。[我已经尝试过这里](http://docs.phonegap.com/en/2.3.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser)提到的 event.url 功能，但徒劳无功。

# php - 按钮返回在 IE7 上不起作用

> ID：14459419
> 
> 赞同：-1
> 
> 时间：2013-01-22T13:14:38.080
> 
> 标签：php, javascript, html, mysql, internet-explorer-7

我有一个按钮预览的这个功能，这个代码适用于所有版本的 IE，在 IE7 中更少。使用 IE7 的按钮返回不起作用。为什么？我该如何解决这个问题？

```
<?php    
//////// --- BUTTON BACK  : CHARGE THE QUERY OF BEFORE PAGE WHEN WE PRESS BACK ---/////////////    

 if ( isset($_POST['back'])){     

    $_SESSION['onpage']=$_SESSION['onpage']-1;

    $query_questionset= "select Q.Constructor AS Constructor,
                            QS.QuestionIDFKPK AS QuestionIDFKPK,
                            Q.QuestionValue AS QuestionValue,
                            QS.SortOrder AS SortOrder,
                            QS.onpage AS onpage
                         from tbluserset AS US
                         inner join tblquestionset AS QS ON 
                                 US.QuestionSetIDFKPK = QS.QuestionSetIDPK
                        inner join tblquestion AS Q ON 
                                 QS.QuestionIDFKPK = Q.QuestionIDPK
                        where (US.UserIDFKPK = ".$UserId.")
                         and (US.UserSetIDPK= '".$_SESSION['UserSetIDPK']."')
                         and (QS.onpage = '".$_SESSION['onpage']."')
                        order by QS.SortOrder";

    if($_SESSION['onpage']==0){         
        $_SESSION['controluserupdate']=1;

    }//<-END CASE ONPAGE=0
}//<- END POST [BACK]   

?>       

<script>    
function postBack() {    
                    var myForm = document.getElementById("formID");
                    var backInput = document.createElement("input");
                    backInput.type = "hidden";
                    backInput.name = "back";
                    backInput.value = "1";
                    myForm.appendChild(backInput);
};
</script>

< html>
 ..
 ....
< form id= "formID"  name="formID" class="formular"   method="post" action= "<?= $url = "QUESTIONAREFINISHING.php"; ?>" accept-charset="utf-8">

<div id="footer"> <!-- DIV FOOTER CONTAINER BUTTONS OUTSIDE BOX QUESTIONAIRE--> 
    <?php   if($_SESSION['onpage'] >=1 && $_SESSION['onpage'] <= $_SESSION['MaxOnPage']-1){ ?>          
        <div><button class="botonesform"  type="hidden"  onclick="postBack()" name="back"  value="" > &#8592 Back  </button ></div>             
        <input class="botonesform" type="submit" name="submit" onclick="probandosubmit()" value="Forward &#8594" />          
    <?php   } ?>

</div>
</form>
..
..
</html> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-22T13:32:22.163

抱歉，那里没有看到完整的代码。

您发布的 JavaScript 代码应该在 IE7 中工作，所以它可能是其他代码

你能改变吗：

```
<input class="botonesform" type="submit" name="submit" onclick="probandosu... 
```

至

```
<input class="botonesform" type="button" name="submit" onclick="probandosu... 
```

（将类型从提交更改为按钮）。然后查看IE7点击时是否有脚本错误。如果没有，请尝试在 probandosubmit() 中提交表单，看看是否解决了问题。我看不到后退按钮提交任何内容，它只是尝试添加隐藏的文本输入，并且应该在 IE7 中工作

# jquery-ui - slideToggle 和 jQuery Ajax - 新元素无法操作

> ID：14459420
> 
> 赞同：0
> 
> 时间：2013-01-22T13:14:40.297
> 
> 标签：jquery-ui, jquery

当我向我的 slideToggle 引入新元素时，它们看起来很好并且处于活动状态（默认情况下展开）但是如果我单击预先存在的元素，所有元素都会崩溃并且我无法展开新的 ajax 元素。本质上，新的 ajax 元素不是 slideToggle 组的一部分，因为它是在引入元素之前构建的。如何即时重建切换或使新元素按预期运行？

** 查询

```
$('div.menu_body:eq(0)').show();
$('.acc .head:eq(0)').show().css({color:"#2B6893"});

$(".acc .head").click(function() {  
    $(this).css({color:"#2B6893"}).next("div.menu_body").slideToggle(300).siblings("div.menu_body").slideUp("slow");
    $(this).siblings().css({color:"#404040"});
}); 
```

** 阿贾克斯

```
<script type="text/javascript">
jQuery(document).ready(function() {
    setInterval("showNewFeeds()", 10000);
});
showNewFeeds() {
    $.ajax({
     type: 'POST',
     url: 'feed.php',
     data : {uid : '145', mid: '22', nid: 56'},
     success: function(response) {
       $('#feedNote').html(response).fadeIn('slow');
     },
     error: function (xhr, ajaxOptions, thrownError) {
       //alert(xhr.status);
       //alert(thrownError);
     }
   });
}
</script>"; 
```

** HTML

```
<div class="widget acc" id="feedNote">
  <div class="head"><h5>Header 1</h5></div>
  <div class="menu_body">
    <div>HTML 1</div>
  </div>
  <div class="head"><h5>Header 2</h5></div>
  <div class="menu_body">
    <div>HTML 2</div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:20:50.383

尝试 ：

```
$(document).on('click', '.acc .head', function() {  
  $(this).css({color:"#2B6893"}).next("div.menu_body").slideToggle(300).siblings("div.menu_body").slideUp("slow");
  $(this).siblings().css({color:"#404040"});
}); 
```

代替`.click(function(){...})`

# validation - 调整窗口大小时验证消息位置未更新

> ID：14459423
> 
> 赞同：1
> 
> 时间：2013-01-22T13:14:48.967
> 
> 标签：validation, jquery-mobile, window-resize, jquery-validation-engine

**当更改窗口大小时，**我正面临在适当位置显示验证消息的问题，*我正在使用 jquery mobile 上的 jquery 验证引擎*。

> 当我提交表单时，验证消息将在旋转屏幕或调整其大小时出现在正确的位置，该消息不会移动到其正确的字段，它将保持在第一个位置本身。

请对此进行指导。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T10:45:14.897

在**validationEngine()**中传递参数**autoPositionUpdate: true**将解决此问题，但这适用于 2.6 版本而不是 2.2 版本的 jquery 验证引擎

# vb.net - VB.net - 替换字符串字母时出现“属性字符：只读”错误

> ID：14459424
> 
> 赞同：1
> 
> 时间：2013-01-22T13:15:01.657
> 
> 标签：vb.net

这个私人子不断告诉我“属性字符：只读”。

我哪里出错了？StrWord 是一个字符串，例如'banana'。

我希望它会循环遍历单词，如果“猜测”（单个字母）与字符串（StrWord）中的任何字母匹配，它将在单词文本框中的相应字母中替换它。

所以刽子手，或多或少。

谢谢和问候，
卡梅伦。

```
Private Sub Lookup(ByVal Guess)
    Dim Count As Integer = 0
    For Each Character As Char In StrWord
        If Character = Guess Then
            txtResult.Text(Count) = Guess
        Else
            Count += 1
        End If
    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T13:32:55.267

.NET 中的字符串是不可变的。这意味着您无法更改它们。相反，您需要创建一个新字符串并将其分配给 Text 属性。您会发现`System.Text.StringBuilder`该类也很有帮助，因为它是可变的，您可以使用该`ToString`方法将其转换为字符串。

尝试这样的事情：

```
Private Sub Lookup(ByVal Guess As Char)

    Dim temp as new StringBuilder(txtResult.Text)

    Dim Count As Integer = 0
    For Each Character As Char In StrWord
        If Character = Guess Then
            temp.Chars(Count) = Character
        Else
            Count += 1
        End If
    Next
    txtResult.Text = temp.ToString()

End Sub 
```

或这个：

```
Private Sub Lookup(ByVal Guess As Char)

Dim temp as new StringBuilder()

Dim Count As Integer = 0
For Each Character As Char In StrWord
    If Character = Guess Then
        temp.Append(Character)
    Else
        temp.Append("*")
        Count += 1
    End If
Next
txtResult.Text = temp.ToString() 
```

结束子

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-22T13:19:15.307

您是否将文本框设置为只读以防止用户修改它？如果是这样，您可能需要将其从 ReadOnly 更改为进行更改，然后将其更改回 ReadOnly。

您也可以尝试以这种方式更改它：

```
txtResult.Text.Replace(Character, Guess) 
```

# jquery - jQuery 弹出窗口未显示在所需位置

> ID：14459426
> 
> 赞同：0
> 
> 时间：2013-01-22T13:15:07.040
> 
> 标签：jquery, popup

我有一个文本框和一个隐藏的 div，它们将显示为弹出窗口。我希望当用户单击文本框时，隐藏的 div 弹出窗口将显示在文本框的位置。所以，我使用代码：

```
var p = $("#listCats");
var position = p.offset();
$('#category').css({"left" : position.left, "top" : position.top}); 
```

**listCats** : 文本框的 id

**category** : 隐藏的div的id，也是css

```
#category {
        width: 508px;
        min-height: 135px;
        padding: 0.4em;
        position: absolute;
        border: 2px solid rgb(124, 113, 113);
        background: #fff
} 
```

但是，隐藏的 div 弹出窗口没有按我的预期显示，而是：

![在此处输入图像描述](../Images/28754833690ab6f185a7e722e8ddff01.png)

我做错了什么吗？

编辑：完整的隐藏div如下：

```
<div id="category" style="display:none;">
        <s:iterator value="categoryMapList">
            <div class="cat_label_title parentCat" id="<s:property value="key.id" />">
                <s:property value="key.name" />
                <div class="subCat">
                    <s:iterator value="value" var="category">
                        <label >
                            <a  href="#" class="cat_label_item catItem" name="catItem:<s:property value="key.name" />, <s:property value="#category.name" />"
                                id="catItem:<s:property value="#category.id" />">
                                <s:property value="#category.name" />
                            </a>
                        </label>
                    </s:iterator>
                </div>
            </div>
        </s:iterator>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:04:28.307

您可能想检查类别容器是否绝对定位在另一个具有相对定位的 div 中。

这意味着顶部，左侧是相对于父级的。

因此，通过获取父级的页面偏移量，然后将其设置为子级，您会将其推离父级而不是下方。

也检查一下：[https ://stackoverflow.com/a/3202038/1060487](https://stackoverflow.com/a/3202038/1060487)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:18:39.520

jquery.css 需要一个以 px 结尾的字符串。在你的情况下：

```
$('#category').css({"left" : position.left + 'px', "top" : position.top + 'px'}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T14:33:53.097

HTML：

```
<input type="text" name="txt" id="listCats">

<div id="category"><p>Hello</p></div> 
```

CSS：

```
#category {
  width: 508px;
  min-height: 135px;
  padding: 0.4em;
  position: absolute;
  border: 2px solid rgb(124, 113, 113);
  background: #fff;
  display: none;
} 
```

jQuery：

```
var $inp = $("#listCats"),
$msg = $("#category"),
pos = $inp.offset();

$inp.bind("click", function () {
  $msg.css({
    "left": pos.left,
    "top": pos.top + $inp.height()
  }).show();
}); 
```

工作小提琴：http: [//jsfiddle.net/darshanags/MEgrp/12/](http://jsfiddle.net/darshanags/MEgrp/12/)

# ruby-on-rails-3 - 切换到生产轨道时出现 CSS 和其他错误

> ID：14459430
> 
> 赞同：0
> 
> 时间：2013-01-22T13:15:13.383
> 
> 标签：ruby-on-rails-3, css

我今天开始将 Ruby on Rails/Backbone.js 应用程序迁移到生产环境，并遇到了大量新问题。一个是以下 CSS 行：

```
#crops input[type=text, class=crop_selector] {
      width:140px;
} 
```

这在开发中是可以的，但在生产中却不是。最重要的是，我的许多图像不再出现在浏览器中，而且我看不到任何背景颜色。有人可以向我解释 1) CSS 有什么问题？2）生产有什么不同？（也许指向我可以阅读差异的文档）

2013 年 1 月 24 日编辑：有人帮我解决了 CSS 错误，所以这不再是一个问题。当进行切换时，我仍然需要准确了解生产的不同之处。它不仅仅是环境变量。

# perl - PERL：从 A 到 Z 排序字母

> ID：14459436
> 
> 赞同：-1
> 
> 时间：2013-01-22T13:15:35.147
> 
> 标签：perl, file, sorting

我正在尝试从 A 到 Z 对文件中的字母进行排序，例如： a AB drg sorted: A a B dgr

```
@ARGV == 2 or die "Usage: $0 infile outfile\n";
open $old,  '<', $ARGV[0] or die $!;
open $new, '>', $ARGV[1] or die $!;
@mass=<$old>;
@array=qw(@mass);
@sort=sort @array;
@mass1=sort {uc $a cmp uc $b} @sort;
print $new @mass1; 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T13:31:51.997

我认为您不了解标准文本排序是基于 ASCII 的。因此，因为所有大写字母都继续小写字母，所以您的输入也是如此。因此，您订购顺子`sort`将是`( 'A', 'B', 'a', 'd', 'g', 'r' )`。

您想*双重*比较两个字符串。在这种情况下，您将需要传递一个例程进行排序。

```
@sort= sort { lc $a cmp lc $b or $a cmp $b } @array; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T13:27:10.830

我不确定您打算如何处理`qw`，但只要说`@mass`永远不会使用 的内容就足够了。

```
@array = qw(hello world); 
```

将导致`@array`被定义为包含 2 个*字符串*，`hello`和`world`。它只是以下的简写：

```
@array = ('hello', 'world'); 
```

这就是为什么

```
@array=qw(@mass); 
```

计算为`('@mass')`- 具有 5 个字符的单个文字字符串的数组`@mass`。

也许这就是你做错了。如果你尝试怎么办

```
@array = map { split /\s+/} @mass; 
```

`@mass`是行列表。每行有单词或只有字母，用空格分隔。最后一行所做的是将每一行映射到`split /\s+/`- 这会将每一行拆分`'ba ab a G'`为一个*列表*，`('ba', 'ab', 'a', 'G')`并将`@array`成为一个单词/字母列表。

然后就是你想如何对它们进行排序的问题。另请参阅其他答案。

哦，记得在写出文件时放回空格：

```
print $new (join " ", @mass1); 
```

如果您希望每一行相互独立地排序，那也很容易：

```
$mass1 = join "\n", map { join " ", sort (split /\s+/) }  @mass 
```

读作“对于 中的每一行`@mass`，在空间上拆分，排序并再次用空间连接回来”，并与结果数组一起，连接`newline`以产生文件的输出。

请注意，您可以使用类似等`sort`的比较器。`sort { $a cmp $b }`

如果您的文件太大，那么循环可能是谨慎的：

```
for my $mass (<$old>) {
    my $sorted_line = join " ", sort (split /\s+/, $mass);
    print $new "$sorted_line\n";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T13:59:06.383

您需要找到要使用的正确 LOCALE，以便所有函数（排序等）使用的顺序都使用正确的语言环境并相应地进行排序。

请参阅[此页面，其中显示了大多数定义 locales 的变量](http://pubs.opengroup.org/onlinepubs/7908799/xbd/envvar.html)，并查找 LANG 和 LC_ALL。和 LC_COLLATE （我不得不承认我不确定何时使用哪个。LC_ALL 应该优先于其他人，所以你可以更改它以设置所有 LC_* 值...请测试，ymmv）

我相信您可能需要使用其中一种 unicode 语言环境。Ascii 不会做你想做的事，因为 CAPS 在 ascii 中的常规字母之前。

要找出可以使用的语言环境：`locale -a`

查看您当前设置的语言环境：（`locale`用户和系统范围的值是可能的）

您可能需要包含“utf-8”的内容才能获得您寻求的订单

然后：（如果例如 en_US.UTF-8 可用）：

在排序中使用它之前，定义要排序的语言环境：

```
LC_ALL=en_US.UTF-8 
```

（或您需要设置的任何值，并且可用，如“locale -a”所示）

（如果需要，在调用周围保存/恢复它们以前的值）

在 shell 中，您最好将“导出”到您重新定义的那些变量，以确保子 shell 也使用新值（例如：：`something | sort`在 bash 中，`sort`将在子 shell 中，因此使用 LC_* 的默认值，或使用导出的值，如果你导出它！）

# automated-tests - 今天在行为驱动的开发和验收测试中使用什么？

> ID：14459440
> 
> 赞同：1
> 
> 时间：2013-01-22T13:15:43.133
> 
> 标签：automated-tests, bdd, acceptance-testing, jbehave, selenium-fitnesse-bridge

几年前，我尝试使用 BDD 和一些验收测试工具，例如*Selenium/Web-driver*、*Fitnesse*和*JBehave*。

我想在我当前的项目中重新使用它，所以我想知道社区正在使用什么工具来执行它！

我的项目是基于 Java 的。

验收测试工具 ? BDD 工具？我应该考虑脚本语言吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:09:26.063

最成功的团队正在使用*对话*，而不是太担心工具！

话虽如此，这里有一些在社区中使用的 Java BDD 工具：

*   JBehave*（静止）
*   用于 JVM 的 Cucumber（我认为它不像 JBehave 那样成熟）
*   Fitnesse（尽管我建议在其后面加上“Slim”而不是“Fit”）
*   自定义 DSL（没那么难）。

Selenium 仍然是 Java 和 Web 的首选自动化工具。

*我帮助编写了 JBehave。我们一开始接触它的一个原因是因为我们看到的使用脚本的验收测试是如此令人惊讶的混乱。嗯。此外，您不能与企业合作或就脚本进行对话。我强烈建议先进行对话**，*然后再*担心工具！

** 如果您自己工作，请购买橡皮鸭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:08:32.653

我强烈推荐[spockframework](http://code.google.com/p/spock/) + [Geb](http://www.gebish.org/)。不过，您需要 groovy 支持。作为 CI 的一部分，我们每晚都会运行很多测试。报告采用 junit 格式（即将被增强以供业务用户使用），因此可以发布到 Hudson 或 Sonar 等服务器。

# javascript - Google Analytics 自定义变量用户登录

> ID：14459442
> 
> 赞同：0
> 
> 时间：2013-01-22T13:15:53.187
> 
> 标签：javascript, google-analytics

我不明白自定义变量如何用于用户登录。

我有以下代码：

```
_gaq.push(['_setCustomVar',
          1,             // This custom var is set to slot #1\.  Required parameter.
          'User Type',   // The name of the custom variable.  Required parameter.
          '{$smarty.get.user_group_id}',      // Sets the value of "User Type" to "Member" or "Visitor" depending on status.  Required parameter.
           2             // Sets the scope to session-level.  Optional parameter.
       ]);
    _gaq.push(['_trackPageview', '/subscribe-successful']); 
```

Google Analytics 代码出现在此代码之前。

用户登录后，它会显示此代码，但该代码是否必须出现在之后的所有其他页面上，还是只能显示一次，然后 GA 会跟踪其余的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:28:58.690

您可以调用它一次，它将影响整个用户会话：这就是为什么将范围变量设置为 2 == 会话级别的原因。

# php - 从 column + zend 框架中读取多行

> ID：14459445
> 
> 赞同：1
> 
> 时间：2013-01-22T13:16:01.140
> 
> 标签：php, sql, database, zend-framework

我想在我的表“地区”中加载我所有的列“名称”行。

我已经可以阅读第一行，但不能再多读了。

我的控制器：

```
public function showdataAction()
    {
        $districtMapper = new Backoffice_Model_DistrictMapper();
        $array = $districtMapper->read();    
        Zend_Debug::dump($array);     
    } 
```

我的地区地图：

```
public function read()
    {
        $table = $this->_dbTable;    
        $columns = array('wijk' => 'wijk',   'coords' => 'coords', );    
        $select = $table->select() ->from($table, $columns) ->order('wijk ASC');
        if ($row = $table->fetchRow($select)) {
           return $row->toArray();
        }    
       throw new Exception('The requested data cannot be found');
    } 
```

在我的控制器中，我有 Zend_Debug::dump($array) ，结果是：

```
array(2) {
  ["wijk"] => string(10) "Binnenstad"
  ["coords"] => string(2186) "3.72448685517794,51.0601522198842,
                 0 3.72577413282654,51.0597215800093,0 3.72594328459339,
                 51.0600395135711,0 3.72699385985136, 51.060876600363,
                 0 3.72764765694006,51.0608474287073,
                 0 3.7281167878913,51.0605006616679,0 3.72955689560896,
                 51.059999738927"
} 
```

只有第一行......我怎样才能转换读取功能，以便我可以加载所有行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:59:16.570

```
public function read()
    {
        $table = $this->_dbTable;    
        $columns = array('wijk' => 'wijk',   'coords' => 'coords', );    
        $select = $table->select() ->from($table, $columns) ->order('wijk ASC');
        //try/catch might make more sense as fetchAll() returns an object or an exception.
        $result = $table->fetchAll($select)

        return $result->toArray();

    } 
```

更改`fetchRow()`为`fetchAll()`。`fetchRow()`返回一个行对象或 null，`fetchAll()`返回一个行集对象（行对象数组）或异常/致命错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:18:34.073

```
if ($row = $table->fetchRow($select)) {
           return $row->toArray();
       } 
```

将那部分代码更改为

```
return $your_database_object->fetchAll($select); 
```

# java - 从 servlet 读取整个 url

> ID：14459450
> 
> 赞同：1
> 
> 时间：2013-01-22T13:16:14.360
> 
> 标签：java, url, servlets

我想从 servlet 中读取 HTTP 请求中设置的确切 URL。这与任何 URL 重写部分 ( `;jsessionid=`…) 一起。

可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:05:22.520

您可以通过以下方式获取请求 URL（和 之前的部分`;`）`?`：

```
StringBuffer requestURL = request.getRequestURL(); 
```

如果会话 ID 作为 URL 路径片段附加，您可以检查如下：

```
if (request.isRequestedSessionIdFromURL()) {
    requestURL.append(";jsessionid=").append(request.getSession().getId());
} 
```

您可以按如下方式获取和附加查询字符串（如果有）：

```
if (request.getQueryString() != null) {
    requestURL.append('?').append(request.getQueryString());
} 
```

最后，获取完整的URL如下：

```
String fullURL = requestURL.toString(); 
```

# c# - c# latin1_swedish_ci 转 unicode

> ID：14459453
> 
> 赞同：0
> 
> 时间：2013-01-22T13:16:20.003
> 
> 标签：c#, mysql

我有一个 MySQL 数据库，`latin1_swedish_ci`当我尝试选择某些内容时，select 返回如下字符串：

```
áƒ¢áƒáƒ‘áƒ˜ áƒ›áƒáƒ™áƒ’áƒ£áƒáƒ˜áƒ áƒ˜, áƒ™áƒ˜áƒ áƒ¡áƒ¢áƒ”áƒœ áƒ“áƒáƒœáƒ¡áƒ¢áƒ˜, áƒ¯áƒ”áƒ˜áƒ›áƒ¡ áƒ¤áƒ áƒáƒœáƒ™áƒ 
```

这是我的代码：

```
string db = "server=xxx;database=xxx;uid=xxx;password=xxx;charset=utf8;";
MySqlConnection con = new MySqlConnection(db);
con.Open();
MySqlCommand cmd = new MySqlCommand("SET NAMES utf8; SELECT * FROM `xxx`", con);
MySqlDataReader reader = cmd.ExecuteReader();
while (reader.Read())
{
     string source = reader.GetString("xxx");
     byte[] utf8Bytes = Encoding.UTF8.GetBytes(source);
     byte[] isoBytes = Encoding.Convert(Encoding.ASCII, Encoding.UTF8, utf8Bytes);
     string uf8converted = Encoding.UTF8.GetString(isoBytes);    
} 
```

我究竟做错了什么？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-18T08:48:36.133

我知道这个问题已经有一年了，但我遇到了同样的问题并找到了解决方案：

```
string source = reader.GetString("xxx");
Encoding enc = Encoding.GetEncoding(1252);
byte[] data = enc.GetBytes(source);
string uf8converted = Encoding.UTF8.GetString(data); 
```

latin1_swedish_ci*被*编码为*西欧*（不是 ASCII），因此我们将字节硬编码为 UTF8 :)

# java - 如何在线程池中编写运行方法

> ID：14459454
> 
> 赞同：0
> 
> 时间：2013-01-22T13:16:24.110
> 
> 标签：java, multithreading, threadpool

通过阅读线程池，我感到非常困惑。我了解了这个概念，它们实际上是如何工作的。但我在这部分感到困惑，如何编码。

我在网上搜索了很多。最后我得到了一个博客，上面有代码，如下所示，

**条件是，不使用内置类**

**代码 1**

```
public class ThreadPool {

  private BlockingQueue taskQueue = null;
  private List<PoolThread> threads = new ArrayList<PoolThread>();
  private boolean isStopped = false;

  public ThreadPool(int noOfThreads, int maxNoOfTasks){
    taskQueue = new BlockingQueue(maxNoOfTasks);

    for(int i=0; i<noOfThreads; i++){
      threads.add(new PoolThread(taskQueue));
    }
    for(PoolThread thread : threads){
      thread.start();
    }
  }

  public void synchronized execute(Runnable task){
    if(this.isStopped) throw
      new IllegalStateException("ThreadPool is stopped");

    this.taskQueue.enqueue(task);
  }

  public synchronized void stop(){
    this.isStopped = true;
    for(PoolThread thread : threads){
      thread.stop();
    }
  }

} 
```

**代码 2**

```
public class PoolThread extends Thread {
  private BlockingQueue taskQueue = null;
  private boolean       isStopped = false;
  public PoolThread(BlockingQueue queue){
    taskQueue = queue;
  }
  public void run(){
    while(!isStopped()){
      try{
        Runnable runnable = (Runnable) taskQueue.dequeue();
        runnable.run();
      } catch(Exception e){
        //log or otherwise report exception,
        //but keep pool thread alive.
      }
    }
  }
  public synchronized void stop(){
    isStopped = true;
    this.interrupt(); //break pool thread out of dequeue() call.
  }
  public synchronized void isStopped(){
    return isStopped;
  }
} 
```

**代码 3：-**

```
public class BlockingQueue {

  private List queue = new LinkedList();
  private int  limit = 10;

  public BlockingQueue(int limit){
    this.limit = limit;
  }

  public synchronized void enqueue(Object item)
  throws InterruptedException  {
    while(this.queue.size() == this.limit) {
      wait();
    }
    if(this.queue.size() == 0) {
      notifyAll();
    }
    this.queue.add(item);
  }

  public synchronized Object dequeue()
  throws InterruptedException{
    while(this.queue.size() == 0){
      wait();
    }
    if(this.queue.size() == this.limit){
      notifyAll();
    }

    return this.queue.remove(0);
  }    
} 
```

我试图理解这段代码的作用。但我不明白这段代码的流程。你能帮我理解这段代码吗？

```
Mainly I have problems in **Code 2 :- run method**

Why execute method's argument are of Runnable type?

How input array given to this code?? 
```

帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T13:20:36.427

```
 public void run(){
    while(!isStopped()){ 
```

循环直到线程池停止。

```
 try{
        Runnable runnable = (Runnable) taskQueue.dequeue(); 
```

从任务队列中拉出头任务。

```
 runnable.run(); 
```

运行任务。

```
 } catch(Exception e){
        //log or otherwise report exception,
        //but keep pool thread alive. 
```

如果任务抛出异常，不要做任何特别的事情，只是不要传递它。

```
 }
    }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:20:09.630

**编辑：**

**我现在明白这是一个班级项目，但我会把我的答案留给后代。**

如果您尝试在 Java 下*使用*线程池，那么这些类已经为您实现了所有这些`java.util.concurrent.*`。其他答案解决并解释您的特定代码。

例如，这是您需要使用`ExecutorService`代码设置线程池的内容。在盖子下面`ExecutorService`处理线程并使用`LinkedBlockingQueue`. 您定义`MyJob`实现“可运行”的类并执行池中线程运行的工作。根据您的需要，它可以是短期或长期运行的任务。

```
// create a thread pool with 10 workers
ExecutorService threadPool = Executors.newFixedThreadPool(10);
// or you can create an open-ended thread pool
// ExecutorService threadPool = Executors.newCachedThreadPool();
// define your jobs somehow
for (MyJob job : jobsToDo) {
    threadPool.submit(job);
}
// once we have submitted all jobs to the thread pool, it should be shutdown
threadPool.shutdown();
...
public class MyJob implements Runnable {
    // you can construct your jobs and pass in context for them if necessary
    public MyJob(String someContext) {
        ...
    }
    public void run() {
        // process the job
    }
} 
```

# android - kSoap，当我在我的网络服务上获取参数时，它们的值为空，为什么？

> ID：14459458
> 
> 赞同：0
> 
> 时间：2013-01-22T13:16:51.850
> 
> 标签：android, web-services, soap, android-ksoap2

我正在尝试在 Java (Tomcat) 中创建一个 web 服务，并且我正在使用 kSoap 从 Android 调用它。调用我的 webService 时的参数为空。我不知道为什么。

我的网络服务的数据

```
Punto Final  Información
Nombre de Servicio\:    {http://serv.trivial.com/}UsuariosWebServiceImplService
Nombre de Puerto\:  {http://serv.trivial.com/}UsuariosWebServiceImplPort
Dirección\: .../UsuariosWebService/usuarios
Clase de Implantación\: com.trivial.serv.UsuariosWebServiceImpl 
```

我的代码是：

```
private void registroServidor(String usuario, String regId)
{
    //http://localhost:8080/UsuariosWebService/usuarios?wsdl
    final String NAMESPACE = "http://serv.trivial.com/"; //Buscar namespace en el wsdl
    final String URL="http://10.0.2.2:8080/UsuariosWebService/usuarios";
    final String METHOD_NAME = "createUser";
    //final String SOAP_ACTION = "http://serv.trivial.com/createUser";
    final String SOAP_ACTION = "";

    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

    request.addProperty("usuario", usuario); 
    request.addProperty("regGCM", regId);  

    SoapSerializationEnvelope envelope = 
            new SoapSerializationEnvelope(SoapEnvelope.VER11);

    //envelope.doNet = true; 

    envelope.setOutputSoapObject(request);

    HttpTransportSE transporte = new HttpTransportSE(URL);

    try 
    {
        transporte.call(SOAP_ACTION, envelope);

        SoapPrimitive resultado_xml =(SoapPrimitive)envelope.getResponse();
        String res = resultado_xml.toString();

        if(res.equals("true"))
            Log.d("GCMTest", "Registro WS: OK.");
    } 
    catch (Exception e) 
    {
        System.out.println("EXCEPTION!!!!!!" + e);
        e.printStackTrace();
        Log.d("GCMTest", "Registro WS: NOK. " + e.getCause() + " || " + e.getMessage());
    } 
} 
```

我的网络服务：

```
@Override
@WebMethod
public boolean createUser(@QueryParam("usuario") String  usuario,@QueryParam("regGCM") String regGCM) {
    System.out.println("2222");
    boolean result = false;
    UsuarioDTO dto = new UsuarioDTO();

//!!!!!! regGCM and usuario are null!!!!!!

    dto = new UsuarioDTO(regGCM, usuario);

    if (dao.findUserByUsuario(usuario) != null){    
        result = dao.update(dto);
    }else{
        result = dao.insert(dto);
    }

    System.out.println("New User info: " + dto.toString());

    return result;

}

@WebMethod
public abstract boolean createUser(@QueryParam("usuario") String  usuario,@QueryParam("regGCM") String regGCM); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T07:14:39.023

就我个人而言，我已经成功地使用 ksoap 连接到一个 .NET Web 服务，所以我不确定在使用 Tomcat 时你的参数名称应该是什么样子。但是我注意到您没有为参数指定数据类型 - 这可能是问题吗？这是一个例子：

```
// ## init request parameters
PropertyInfo pi = new PropertyInfo();
// ## usuario
pi.setName("usuario");
pi.setValue(usuario);
pi.setType(String.class);
request.addProperty(pi); 
```

# android - 如何在 Android 应用程序级别检查 SIM 卡锁定

> ID：14459470
> 
> 赞同：5
> 
> 时间：2013-01-22T13:17:11.323
> 
> 标签：android

我正在寻找一种方法来确定 android 设备是否被 SIM 锁定。我知道 /efs/ 应该是存储此设置的文件。问题是没有 root 就无法访问 /efs/。

*像##* 7465625# 这样的USSD 代码不再适用于三星设备上的 Android 4.1.2。

那么有人知道我如何确定是否启用了 SIM 卡锁吗？

谢谢，汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:33:32.773

假设我们谈论的是同一种 SIM 锁，您可以使用[`Telephony Manager`](http://developer.android.com/reference/android/telephony/TelephonyManager.html).

```
TelephonyManager telephonyManager = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);

int simState = telephonyManager.getSimState();

if (simState == TelephonyManager.SIM_STATE_NETWORK_LOCKED) {
    //do something
} 
```

# c# - 如何将价值从波斯文化转变为英语

> ID：14459476
> 
> 赞同：0
> 
> 时间：2013-01-22T13:17:40.370
> 
> 标签：c#, cultureinfo, culture, string-parsing, persian

我有一个带有波斯文化数字的变量，如下所示：
string Value="۱۰۳۶۷۵۱";
我想将此数字转换为英文版本并再次将其保存在我的字符串中，例如
Value="1036751";

如果我可以使用像文化信息这样的简单方法而不是开关盒，请帮助我如何做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:59:16.607

您可以使用多种工具来做到这一点。iTextPdfSharp 可能会做到这一点。这相当于打开文档并在目录中浏览包含书签的树。他们的代码运行良好，但请务必下载规范，以便了解树的结构。我使用的是 Acrobat 的原始版本，我的许多工程师同事觉得书签树有点过于复杂。

BitMiracle 提供了类似的代码。他们经常在 Stack Overflow 上巡逻，所以您也可能会看到他们的回答（嗨！） - 您可以[在此处](http://bitmiracle.com/pdf-library/help/outline-%28bookmarks%29-with-styles.aspx)查看他们用于创作书签的工作示例。

如果你愿意付钱，这很容易使用[Atalasoft](http://www.atalasoft.com/)的[DotPdf](http://www.atalasoft.com/products/dotpdf)（免责声明：我为 Atalasoft 工作并编写了几乎所有的 DotPdf）。在我们的 API 中，我们尝试尽可能隐藏结构的复杂性（例如，如果您想迭代在单击书签时采取的一系列动作链，它是 foreach 而不是 tree walk）并且我们'已将书签树包装到标准`List<T>`集合中。

```
public void WalkBookmarks(Stream pdf)
{
    // open the doc
    PdfDocument doc = new PdfDocument(pdf);
    if (doc.BookmarkTree != null)
    {
         // walk the list of top level bookmarks
         WalkBookmarks(doc.BookmarkTree.Bookmarks, 0);
    }
}

public void WalkBookmarks(PdfBookmarkList list, int depth)
{
    if (list == null) return;
    foreach (PdfBookmark bookmark in list)
    {
        // indent to the depth of the list and write the Text
        // you can also get the color, basic font styling and
        // the action associated with the bookmark
        for (i = 0; i < depth; i++) Console.Write("  ");
        Console.Writeline(bookmark.Text);
        // recurse on any children
        WalkBookmarks(bookmark.Children, depth + 1);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-24T18:26:26.067

您可以使用[Windows.Globalization.NumberFormatting.DecimalFormatter](http://msdn.microsoft.com/en-us/library/windows/apps/windows.globalization.numberformatting.decimalformatter.aspx)类来解析字符串。这将解析任何支持的数字系统中的字符串（只要它是内部连贯的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T16:48:46.643

PDF 可以包含至少三种不同的东西，可以称为“目录”：

1.  文档大纲（书签），一组特定的 PDF 结构
2.  文档开头的超链接列表。每个超链接都指向文档所在的位置
3.  文本字符串列表，其中每个字符串命名文档的一部分，并且可以选择指定该部分从哪个页面开始。

对于第三种情况，我不知道任何开箱即用或易于实施的解决方案。其他情况更简单。

对于第一种情况，几乎任何 PDF 库都可以。@plinth（嗨！）针对这种情况至少提供了两种解决方案。

对于第二种情况，可以使用[Docotic.Pdf library](https://bitmiracle.com/pdf-library/)实现解决方案。基本上，您可以尝试：

*   枚举文档中的所有链接
*   找到所有彼此靠近的链接（您需要建立一些启发式方法来将什么视为“关闭”）
*   从找到的链接中检索文本

如果您的案例是“超链接列表”，那么[从链接目标示例中提取文本](https://bitmiracle.com/pdf-library/help/extract-text-from-link-target.aspx)可能会为您提供一些开始的线索。

免责声明：我为 Docotic.Pdf 库的供应商 Bit Miracle 工作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-22T13:29:15.787

您需要使用 pdflib 之类的 pdf 库才能阅读 pdf 文件 (http://www.pdflib.com/)。这应该可以解决问题，祝你好运！

# sharepoint - 在 WSS 3.0 中限制文档库中的视图列表

> ID：14459477
> 
> 赞同：0
> 
> 时间：2013-01-22T13:17:44.283
> 
> 标签：sharepoint, wss

WSS 3.0、Windows Server 2003 中是否有办法在文档库中限制允许给定用户或组选择/使用的视图列表？

我们定义了文档库和视图，仅显示允许用户或组查看的文档。我们遇到的问题是任何用户都可以选择一个用于不同组的视图。

现在升级到 MOSS Enterprise 不是一个选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:43:20.427

在您的问题中，您说您有“仅显示允许用户或组查看的文档”的视图。问题是其他用户可以看到这些视图，因此看到了他们不应该看到的文档。听起来您遇到的更大问题是使用视图来确保安全。

用户可以通过多种方式查看未在视图中呈现给他们的文档。如果您的意图是阻止用户查看某些文档，您最好的选择是使用单独的文档库并相应地设置权限（这本质上解决了您的视图问题）或将您的文档放在文件夹中并在文件夹上设置项目级别的安全性。

至于您的问题，我认为答案是否定的，您不能阻止有权访问文档库的用户查看其公共视图。如果用户有权访问某个库，那么他们也有权访问这些视图。

如果您真的不担心安全性，您总是可以创建一个自定义页面来查看文档，并在该页面上限制 UI 中显示的视图。你如何处理这取决于你的技能和你拥有的工具。但是，这些类型的解决方案很混乱，因为它依赖于您的用户通过您的自定义界面，并且 SharePoint 将通过多种方式将您的用户带到 OOB 页面。

# windows - Windows 命令提示符：转义引号内的特殊字符

> ID：14459479
> 
> 赞同：0
> 
> 时间：2013-01-22T13:17:45.937
> 
> 标签：windows, command-line, special-characters, quotations

我想使用以下命令用 7-Zip 解压 tar.gz 文件：

```
forfiles /M *tar.gz /C "cmd /c "C:\Program Files\7-Zip\7z" e @path" 
```

但我不能让它工作，因为里面有空格`Program Files`。我怎么能逃脱它？

**更新：**

我的替代解决方案是：

```
set 7ZPath="C:\Program Files\7-Zip\7z"
%7ZPath% e *.tar.gz 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:26:01.363

**forfiles /M *tar.gz /C "cmd /c "%ProgramFiles%\7-Zip\7z" e @path"**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:50:54.880

FORFILES 命令字符串中的引号必须转义为`\"`

```
forfiles /M *tar.gz /C "cmd /c \"C:\Program Files\7-Zip\7z\" e @path" 
```

# java - 如何在 webview 中自定义弹出窗口

> ID：14459481
> 
> 赞同：0
> 
> 时间：2013-01-22T13:17:48.023
> 
> 标签：java, android, android-intent, android-webview

我已经在android中开发了网络应用程序，我需要在webview中显示弹出窗口，当我使用window.open时我尝试了很多方式，这意味着它在同一个webview上打开或者它可以在浏览器中加载。

我做了以下设置

```
WebSettings settings = Browser.getSettings();  
        settings.setSupportMultipleWindows(false);
        settings.setJavaScriptEnabled(true); 
        Browser.setWebViewClient(new WebViewClient());
        Browser.setWebChromeClient(new WebChromeClient());
        settings.setJavaScriptCanOpenWindowsAutomatically(false);
        settings.setBuiltInZoomControls(true);
        Browser.requestFocusFromTouch(); 
```

但我想展示 poplike 这对如何在 webview 中显示弹出窗口有任何想法。

![在此处输入图像描述](../Images/446dcd5878132146ab885f6e9360ba15.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:27:42.560

尝试这个

```
public void onCreate(Bundle savedInstanceState){
  ....
  webView.getSettings().setJavaScriptEnabled(true);
  webView.addJavascriptInterface(new MyJSInterface(), "myappname");
  webView.loadUrl("http://mysite.com/"); // or some local asset
  ....
}

public class MyJSInterface{

....
 public void popup(){

//  AlterDialog etc.

 }
....

}

HTML from your website:

window.onload = function(){
   window.myappname.popup();
} 
```

或者

使用javascript界面​​。将javascript与java结合，在java中制作自定义对话框首先，启用javascript

webview.getSettings().setJavaScriptEnabled(true); 其次，您需要添加javascript接口

wv.addJavascriptInterface(new DemoJavaScriptInterface(), "js"); 第三，加载url；

webview.loadUrl("javascript:javascript 函数名"); 这是给你的一些代码，希望这可以帮助[https://github.com/scottagarman/Android-JavaScript-Interface-Example](https://github.com/scottagarman/Android-JavaScript-Interface-Example)

参考：[可能的 WebView OnCreateWindow 制作弹出窗口（对话框样式）？像安卓浏览器](https://stackoverflow.com/questions/6183102/possible-webview-oncreatewindow-to-make-popup-windowdialog-style-like-android)

# symfony - Symfony2 和更新条目

> ID：14459482
> 
> 赞同：0
> 
> 时间：2013-01-22T13:17:51.323
> 
> 标签：symfony, doctrine

我想在一个控制器中解决插入/更新问题。这是我的代码：

```
public function setOwnershipAction(Request $request) {
    $session = $this->get('security.context')->getToken()->getUser();

    $em = $this->getDoctrine()->getManager();

    $game = $em->getRepository('GameShelfGamesBundle:Game')->find($request->request->get('hash'));
    $user = $em->getRepository('GameShelfUsersBundle:User')->find($session->getId());
    $typo = $em->getRepository('GameShelfUsersBundle:OwnState')->find($request->request->get('setownstate')['id']);
    $plat = $em->getRepository('GameShelfGamesBundle:Platforms')->find($request->request->get('platformown')['id']);

    $check = $em->getRepository('GameShelfUsersBundle:Own')->findBy(array(
        'user' => $user,
        'game' => $game
    ));

    if(!$check) {
        $own = new Own;
        $own->setGame($game);
        $own->setUser($user);
        $own->setTypo($typo);
        $own->setPlatforms($plat);
        $own->setUpdated(date("Y-m-d H:i:s"));
        $em->persist($own);
        $em->flush();
    } else {
        $check->setTypo($typo);
        $em->flush();
    }
} 
```

现在，插入（在`if(!$check)`变为真之后）有效，但在`else`它不点击之后。我的错误是`Fatal error: Call to a member function setTypo() on a non-object`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T13:29:01.963

该`findBy()`方法将返回一个数组。您需要使用`findOneBy()`, 或遍历`findBy()`结果。

# java - 有效（现有）电子邮件地址验证

> ID：14459484
> 
> 赞同：3
> 
> 时间：2013-01-22T13:17:54.753
> 
> 标签：java, validation, email

我有这个注册页面可以正常工作，但是对于电子邮件字段，我需要确保电子邮件正确且有效 1：正确 2：有效

对于正确的电子邮件添加我正在使用 java 脚本验证来维护 abc@def.com

很好，工作正常

但我的问题是，是否有任何网络服务或 java API 来确保邮件 ID 是否实际存在和注册就像我的邮件 ID 是：hussainABCD@gmail.com 这实际上是一个现有的 ID

但我可以试试 hussain5555@gmail.com,hussain1111@gmail.com,hussain8888@gmail.com,

这些将通过 java 脚本验证，但实际上不存在

我们有什么方法可以确保邮件 ID 存在吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T13:20:02.123

检查电子邮件地址是否实际存在的唯一方法是向其发送电子邮件并让用户对此做出回应。

例如：

*   需要在您的网站中填写的确认码
*   一个链接，指向您的网站，需要访问

并且仍然不确定电子邮件之后是否存在，因为很容易简单地创建一个临时电子邮件以通过验证并在之后将其删除。

您可以使用 Google API 让您的用户使用他们的帐户登录，而不是验证电子邮件地址。也可以以类似的方式使用 OpenID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:21:43.167

使用现有服务和/或 API 可能无法做到这一点，因为这可能会带来相当大的安全风险。如果您想确保地址存在，请使用带有验证链接的电子邮件。或 OpenID，如 BalusC 所述。

# node.js - 在 nodejs/socket.io 应用程序中的 Heroku 服务器端脚本中包含 Backbone

> ID：14459485
> 
> 赞同：0
> 
> 时间：2013-01-22T13:17:55.623
> 
> 标签：node.js, backbone.js, heroku, socket.io

我正在使用 node.js、Backbone 和 socket.io 开发一个小型应用程序作为练习，并且我已经设法让某些东西在本地工作（工头启动正确地启动应用程序而没有错误）。但是，在部署到 heroku 时，我遇到了问题，因为我的 models.js 文件（由客户端和服务器使用）需要 Backbone。我确信找到它很简单，但我是 node 新手，也是 Backbone 的新手。

在我的主 app.js 文件（由节点提供）中，我有 vars

```
var Backbone = require('backbone'),
_ = require('underscore')._; 
```

我还有一个 app.js 所需的 models.js 文件，如下所示：

```
var models = require('./public/js/models.js'); 
```

（客户端也需要此文件）。在models.js中，我从代码开始

```
var server = false;
if (typeof exports !== 'undefined') {
    server = true;
    Backbone = require('Backbone');
    _ = require('underscore');
} 
```

我认为这是卡住的地方。如果这不是要提供的正确信息，我们深表歉意（整个项目可以在[https://github.com/kevadsett/testHeroku](https://github.com/kevadsett/testHeroku)找到）。任何帮助都将不胜感激，因为通过所有的学习和开发却在上传阶段被破坏是令人沮丧的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:59:31.400

我认为问题可能只是您尝试导入不存在的模块：

```
Backbone = require('./Backbone');
 _ = require('./underscore'); 
```

请尝试：

```
Backbone = require('backbone');
 _ = require('underscore'); 
```

我没有用你的应用程序测试它，但基本上这应该可以工作。

# javascript - D3.js：当数据已经绑定时如何追加元素？

> ID：14459488
> 
> 赞同：3
> 
> 时间：2013-01-22T13:18:20.180
> 
> 标签：javascript, d3.js

我遇到了[D3 joins](http://bost.ocks.org/mike/constancy/)的问题。我在气泡图上创建了一些圆圈。当用户单击“显示为地图”按钮时，我想将圆圈转换为地图，然后为每个圆圈添加一个标签。

目前，点击处理程序将圆圈移动 OK，然后给我一个 JavaScript 错误而不是添加标签：`Uncaught TypeError: Object [object SVGCircleElement]... has no method 'append'`。我知道这是因为我的连接语法不正确，但我该如何解决呢？

我能找到的所有添加新 D3 元素的示例都适用于您要绑定新数据的情况——而不是当您已经拥有已绑定数据的现有元素时。

这是我创建圈子的代码：

```
 var circle = g.selectAll('.city')
     .data(data).enter()
     .append('circle')
    .attr('class', 'city')
    .attr('r', rfunc).attr("cy", 0)
    .attr("cx", function(d, i) {
      return rdist(d['dist']);
    }).attr("transform", function(d, i) {
      return "rotate(" + d.radial_pos + " 0 0)";
    }); 
```

这是我的点击处理程序：

```
d3.select("#layout_geo").on("click", function() {
    // Move the circles - this works OK. 
    var circles = d3.selectAll(".city")
    .transition()
    .duration(1300)
    .attr('cx', function(d) {
       return merc([d['lon'], d['lat']])[0] - 350;
    }).attr('cy', function(d) {
      return merc([d['lon'], d['lat']])[1] - 280;
    });
    // How to add text to each circle?
    circles.append('text')
      .attr('class', 'background')
      .text(function(d) {
         console.log(d.name + ', ' + d.city);
          return d.name + ', ' + d.city;
      })
      .attr('cx', function() {
        return ???;
      }).attr('cy', function() {
        return ???;
      });
  }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T14:07:45.463

这里的问题是，这`circles`不是一个正常的选择，而是一个[过渡](https://github.com/mbostock/d3/wiki/Transitions)。它们有一个方便的`remove()`功能，允许删除项目，但不能`append`添加更多元素。

另一个问题是在属性中附加元素*不是*`<text>`正确的 SVG。在这种情况下，您需要将和放入[这样](http://jsfiddle.net/VbUza/)的元素中。代码中的相应更改将是：*`<circle>``<text>``<circle>``g`*

 *```
d3.select("#layout_geo").on("click", function() {
    // Assign the seleciton to circles
    var circleG = d3.selectAll(".city");

    circleG.transition()
      .duration(1300)
      .attr('transform', 'translate(-100, -50)'); // Ignoring the rotation.

    // And append text to the selection
    circleG.append('text')
      .attr('class', 'background')
      .attr('dx', '1em')
      .text(function(d) {
          console.log(d.name + ', ' + d.city);
          return d.name + ', ' + d.city;
      });
  }); 
```

请注意，在`<circle>`更改`transform`属性时，元素上的旋转会丢失。它可以通过[使用两个嵌套的 g 元素来保留，并在外部旋转。](http://www.w3.org/TR/SVG/coords.html#TransformAttribute)*

# ruby-on-rails - 在多线程环境中将表名动态设置为 rails 模型

> ID：14459493
> 
> 赞同：1
> 
> 时间：2013-01-22T13:18:31.203
> 
> 标签：ruby-on-rails, rails-activerecord

如何在多线程应用程序环境中将表名动态设置为 rails (2.3.8) 模型？

例如：表名可以是 Table_Name_01、Table_Name_02....等

由于 set_table_name 是 ActiveRecord::Base 类的类方法，如果我使用该方法，表名将在类级别设置，这可能会导致多线程应用程序出现问题。

我的意思是，当我使用 Model.find 时，查询执行应该根据我的逻辑动态找到正确的表，并使用该表执行查询。

请在这方面帮助我。提前致谢...

# c# - 将结构添加到列表的 foreach 循环中的异常

> ID：14459497
> 
> 赞同：1
> 
> 时间：2013-01-22T13:18:41.193
> 
> 标签：c#

大家好，我有这样的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        struct Proxy
        {
            public static List<string> proxyList;
            public static string type;
        }

        private void button1_Click(object sender, EventArgs e)
        {
            OpenFileDialog openFileDialog1 = new OpenFileDialog();
            openFileDialog1.Title = "Choose file with proxy";
            openFileDialog1.InitialDirectory = System.Environment.CurrentDirectory;
            openFileDialog1.Filter = "txt files (*.txt)|*.txt|All files (*.*)|*.*";
            if (checkBox1.Checked)
                Proxy.type = "socks5";
            else
                Proxy.type = "http";
            if (openFileDialog1.ShowDialog() == DialogResult.OK)
            {
                foreach (string prox in File.ReadAllLines(openFileDialog1.FileName))
                {
                    if (prox.Contains(":"))
                    {
                        string[] proxy = prox.Split(':');
                        Proxy.proxyList.Add(prox);
                    }
                }
                MessageBox.Show(Proxy.proxyList.Count.ToString());
            }
        }

    }
} 
```

但是当我加载txt文件时：

```
62.109.28.37:8085
193.0.147.23:8085
193.0.147.90:8085
193.0.147.61:8085
193.0.147.47:8085
193.0.147.93:8085 
```

我收到一个异常：在线`Proxy.proxyList.Add(prox);` 对象引用未设置为对象的实例。

为什么？=\

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T13:21:35.257

您还需要在使用它之前构建列表，例如，在您的 foreach 循环之前：

```
Proxy.proxyList = new List<string>(); 
```

或者您可以在结构定义本身中执行此操作：

```
 struct Proxy
    {
        public static List<string> proxyList = new List<string>();
        public static string type;
    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-22T13:21:46.247

因为`proxyList`是`null`。改变

```
public static List<string> proxyList; 
```

到

```
public static List<string> proxyList = new List<string>(); 
```

# ruby-on-rails - Ruby 哈希长度或大小不返回任何内容

> ID：14459502
> 
> 赞同：4
> 
> 时间：2013-01-22T13:18:55.183
> 
> 标签：ruby-on-rails, ruby

我正在使用 ruby​​ 执行 rake 任务：

```
namespace :generate do
  desc "Export to txt"
  task :txt, [:filename, :item_id] => :environment do |t, args|
    puts "aaaaaaaaaaaaa #{args.length}"
    puts "ssssssss #{args.size}"
    puts "bbbbbbbbbb #{args}"

    args.each do | arg |
        puts "#{arg}"
    end
  end
end 
```

前两个 puts 不返回任何东西`aaaaaaaaaaa`并被`ssssssss`打印，但是 bbbbbb print 确实返回了我的参数，即使当我通过每个参数时它们也会被打印出来。我究竟做错了什么？

**更新**

我开始了这样的 rake 任务：

`rake generate:txt[Temp.txt,22]`

bbbbbbbbb 打印：

```
bbbbbbbbbb {:filename=>"Temp.txt", :item_id=>"22"} 
```

每个循环打印：

```
[:filename, "Temp.txt"]
[:item_id, "22"] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T13:31:56.010

`args`不是`Hash`, 是`Rake::TaskArguments`:

`puts args.class #=> Rake::TaskArguments`

可能这个类没有实现`size`and `length`；转换为哈希对我有用：

```
namespace :generate do
  desc "Export to txt"
  task :txt, [:filename, :item_id] => :environment do |t, args|
    puts "args class: #{args.class}"
    args = args.to_hash
    puts "args to hash: #{args.inspect}"
    puts "aaaaaaaaaaaaa #{args.length}"
    puts "ssssssss #{args.size}"
    puts "bbbbbbbbbb #{args}"

    args.each do | arg |
        puts "#{arg}"
    end
  end
end 
```

印刷：

```
$ rake generate:txt[Temp.txt,22]
Rake::TaskArguments
{:filename=>"Temp.txt", :item_id=>"22"}
aaaaaaaaaaaaa 2
ssssssss 2
bbbbbbbbbb {:filename=>"Temp.txt", :item_id=>"22"}
[:filename, "Temp.txt"]
[:item_id, "22"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:36:14.107

您正在处理 Rake:TaskArguments 的实例，请参阅[http://rake.rubyforge.org/classes/Rake/TaskArguments.html](http://rake.rubyforge.org/classes/Rake/TaskArguments.html)

如果您想将其视为可枚举，请对其调用 to_hash。

```
namespace :generate do
  desc "Export to txt"
  task :txt, [:filename, :item_id] => :environment do |t, args|
     puts args.class
     puts "aaaaaaaaaaaaa #{args.to_hash.length}"
     puts "size #{args.to_hash.size}"
     puts "bbbbbbbbbb #{args}"
     args.each do | arg |
    puts "#{arg}"
     end
  end
end 
```

# c# - 将 LINQ .Distinct() 与 DateTime 一起使用 - 仅选择日期的第一个实例

> ID：14459505
> 
> 赞同：4
> 
> 时间：2013-01-22T13:18:58.333
> 
> 标签：c#, linq, entity-framework, entity-framework-4

我在我的 MVC 3 Web 应用程序中使用 EF 和 LINQ。

我有这样的查询

```
var dates = timetableEvents.GroupBy(x => x.DateTimeStart).Distinct(); 
```

`x.DateTimeStart`是这种格式的日期：

```
23/01/2013 12:47:13
23/01/2013 14:00:10
23/01/2013 16:15:00
24/01/2013 02:05:00
24/01/2013 04:55:05
25/01/2013 06:00:00 
```

我需要有只选择日期的第一个实例的过滤器。

怎么做？

```
23/01/2013
24/01/2013
25/01/2013 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-22T13:21:08.440

你能试一下吗

```
 var dates = timetableEvents.GroupBy(x => x.DateTimeStart.Date).Distinct(); 
```

# dotnetnuke - DNN 7.02 中 GetPortalByAlias 的替代品是什么？

> ID：14459508
> 
> 赞同：1
> 
> 时间：2013-01-22T13:19:02.703
> 
> 标签：dotnetnuke, dotnetnuke-module

我曾经在 DNN 6.2.6 及更低版本的模块之一中使用`GetPortalByAlias`函数。现在我发现在 DNN 7 中这个函数被省略了。DNN 7.02 中这个函数的替换是什么？

假设我的代码是这样的：

```
IDataReader dr = 
    DotNetNuke.Data.DataProvider.Instance().GetPortalByAlias(portalAlias); 
```

当我想在 DNN 7 中编译上面的代码时，它说：

> “DotNetNuke.Data.DataProvider”不包含“GetPortalByAlias”的定义，也没有扩展方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:54:52.057

看起来可以`DotNetNuke.HttpModules.UrlRewriteModule`这样`PortalAliasController.GetPortalAliasInfo`做。我认为，一般来说，如果可以避免直接使用数据提供者方法，您应该避免使用它（尽管在这种情况下，正确的 API 有点难找到，并且在旧版本的 DNN 上不可用）。

# java - 将 HashMap 与子类一起使用

> ID：14459510
> 
> 赞同：0
> 
> 时间：2013-01-22T13:19:12.143
> 
> 标签：java, inheritance, hashmap

```
 private HashMap<String, SuperClass> mapOfRoles = new HashMap();
 public void X()
  {
        mapOfRoles.put(String, SubClassA);
        mapOfRoles.put(String, SubClassB);
  } 
```

错误：没有找到适合 put(String,Wolf) playerRolesMap.put(listOfPlayers.get(0), new Wolf(listOfPlayers.get(0))) 的方法；方法HashMap.put(String,Role)不适用（实参Wolf无法通过方法调用转换为Role）

Wolf 是 Role 的子类

我正在尝试编写一个程序，在该程序中我需要访问写入子类的方法，但是由于无法将子类转换回超类，因此无法编译，编译器会说：实际参数 subclassA 无法转换为超类通过方法调用转换）

目前我看不到另一种方法来实现我的代码以动态检索对象。大多数时候，为子类调用的方法都包含在超类中，但是每个子类都有一些只与它相关的方法。

是否存在可以纠正的设计缺陷。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T13:22:43.117

当然你[可以做你正在尝试的事情](http://ideone.com/WxLgGl)。但是，您应该将and的实例**放入**地图中。`String``SubClass1``SubClass2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:24:44.223

我不知道这是否是您正在寻找的答案，但您可以创建一个通用界面并将其用作参考！我相信这叫做多态性！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T13:24:09.230

[泛型有界通配符](http://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html)会有所帮助。

# ffmpeg - RTSP 隧道 HTTP、FFMPEG

> ID：14459513
> 
> 赞同：4
> 
> 时间：2013-01-22T13:19:25.040
> 
> 标签：ffmpeg, stream, rtsp, tunnel, http-tunneling

我正在尝试从使用 RTSP over HTTP 的 Axis 网络摄像机进行流式传输。我可以让正常的 RTSP 流工作，但我找不到任何关于如何实际设置流的隧道模式的信息或文档。源代码通过将 control_transport 设置为 RTSP_MODE_TUNNEL 来支持它。我的问题很简单，如何使用以下代码执行此操作？

```
 int ret = avformat_open_input(&pFormatCtx, [@"rtsp://ip/axis-media/media.amp" UTF8String], NULL, NULL); 
```

我尝试了以下方法：

```
pFormatCtx = avformat_alloc_context();
pFormatCtx->priv_data = malloc(sizeof(RTSPState));
RTSPState *rt = pFormatCtx->priv_data;
rt->control_transport = RTSP_MODE_TUNNEL;
int ret = avformat_open_input(&pFormatCtx, [@"rtsp://ip/axis-media/media.amp" UTF8String], NULL, NULL); 
```

但它对我来说只是忽略了它（它仍然继续使用 RTP）。我也试过这个

```
 int ret = avformat_open_input(&pFormatCtx, [@"rtsp://ip/axis-media/media.amp" UTF8String], NULL, NULL);
RTSPState *rt = pFormatCtx->priv_data;
rt->control_transport = RTSP_MODE_TUNNEL; 
```

我将如何解决这个问题？我认为这是非常简单的事情，因为 ENUM 就在那里。

**工作解决方案是**

```
AVDictionary *opts = 0;
int ret = av_dict_set(&opts, "rtsp_transport", "http", 0);

ret = avformat_open_input(&pFormatCtx, [@"rtsp://ip:80/axis-media/media.amp" UTF8String], NULL, &opts);

av_dict_free(&opts); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T16:42:15.243

你试过这个吗

```
AVDictionary *opts = 0;
    if (usesTcp) {
        int ret = av_dict_set(&opts, "rtsp_transport", "tcp", 0);
    }

    err = avformat_open_input(&avfContext, filename, NULL, &opts);
    av_dict_free(&opts); 
```

# svn - SVN 的 SSL 不受 CCNet 服务器信任

> ID：14459515
> 
> 赞同：1
> 
> 时间：2013-01-22T13:19:28.623
> 
> 标签：svn, ssl, cruisecontrol.net

我们有一个 windows server 2008 R2 盒子，里面装有我们的 subversion 和 Cruise Control 服务器。我试图让第一个构建在这个盒子上运行，作为到这个服务器的整体迁移项目的一部分。但是在运行构建时，它表明证书不受信任。

最初这是由于主机名与 collabnet 提供的证书不匹配，当然这与我们的服务器不一致。我们通过为服务器创建新的证书颁发机构和证书并安装新创建的证书来解决这个问题，这工作正常。从网络浏览器，因为现在没有冲突。

但是 CCNet 构建继续失败。为了尝试解决这个问题，我以我们创建的用于运行 Cruise Control 的服务帐户用户身份登录到服务器，并在请求时从存储库中签出接受证书的项目，这也没有解决问题。

有谁知道这可能是什么。我通常会包含大量代码，但除了下面的错误消息之外，我不确定我还能包含什么。

```
ThoughtWorks.CruiseControl.Core.CruiseControlException: Source control operation failed: svn: E175002: Unable to connect to a repository at URL 'https://ourserver/svn/Repo01/ourproject/trunk' svn: E175002: OPTIONS of 'hhttps://ourserver/svn/Repo01/ourproject/trunk': Server certificate verification failed: certificate issued for a different hostname, issuer is not trusted (https://ourserver) . Process command: svn log https://ourserver/svn/Repo01/ourproject/trunk -r "{2013-01-21T10:11:35Z}:{2013-01-21T10:13:06Z}" --verbose --xml --no-auth-cache --non-interactive at ThoughtWorks.CruiseControl.Core.Sourcecontrol.ProcessSourceControl.Execute(ProcessInfo processInfo) at ThoughtWorks.CruiseControl.Core.Sourcecontrol.Svn.GetModifications(IIntegrationResult from, IIntegrationResult to) at ThoughtWorks.CruiseControl.Core.Sourcecontrol.QuietPeriod.GetModificationsWithLogging(ISourceControl sc, IIntegrationResult from, IIntegrationResult to) at ThoughtWorks.CruiseControl.Core.Sourcecontrol.QuietPeriod.GetModifications(ISourceControl sourceControl, IIntegrationResult lastBuild, IIntegrationResult thisBuild) at ThoughtWorks.CruiseControl.Core.IntegrationRunner.GetModifications(IIntegrationResult from, IIntegrationResult to) at ThoughtWorks.CruiseControl.Core.IntegrationRunner.Integrate(IntegrationRequest request) 
```

# heroku - Heroku 是否可以将 git 存储库添加到 github？

> ID：14459521
> 
> 赞同：0
> 
> 时间：2013-01-22T13:20:06.277
> 
> 标签：heroku, github

是否可以将heroku git存储库添加到github？

示例我有一个 Heroku git：

git@heroku.com:myapp.git

我可以以某种方式将其添加到 github 吗？所以我可以看到想要的文件在服务器上并跟踪更改等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:30:39.353

您可以将另一个远程添加到指向您的 github 帐户/存储库的克隆中，然后在您进行更改时也推送到该存储库。不过，您必须确保始终推送到两个遥控器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T20:59:31.703

可以设置 git 同时推送到两个存储库。

请在此处查看此帖子：[同时推送到多个 Git 存储库](http://jeetworks.org/node/22)

# javascript - CSS vs jQuery 如何在没有其他插件的情况下创建动态表格样式（斑马）？

> ID：14459523
> 
> 赞同：3
> 
> 时间：2013-01-22T13:20:10.983
> 
> 标签：javascript, jquery, css, html

我需要将表格设置为斑马，甚至表格行的样式，我使用了 css `:nth-of-type(even)`。但是例如当我需要隐藏表格的一些程式化元素时，就会丢失。将动态样式创建为桌子的斑马线的最简单方法是什么？

```
<!DOCTYPE html>
<html>
<head>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <style type="text/css">
    table tr:nth-of-type(even){background: yellow;}
  </style>
  <script type="text/javascript">
    function hideRow(){
      $(".hidden").hide();
    }
  </script>
</head>
<body>
<center>
 <table cellspacing="0" border="1">
     <tbody>
    <tr class="table-row">
      <td>row1</td>
    </tr>
    <tr class="table-row">
      <td>row2</td>
    </tr>
    <tr class="table-row hidden">
      <td>row3</td>
    </tr>
    <tr class="table-row">
      <td>row4</td>
    </tr>
    <tr class="table-row">
      <td>row5</td>
    </tr>
    </tbody>
 </table>
 <input type="submit" onclick=" hideRow()" value="submit"/> 
 </center>
</body>
</html> 
```

如何动态更改表格的样式？

当前结果：
![在此处输入图像描述](../Images/d815f597f706d1265a17614baead3f1f.png) ![在此处输入图像描述](../Images/cb6217f7cabc05c501d75d486da1d146.png)
预期结果：
![在此处输入图像描述](../Images/d815f597f706d1265a17614baead3f1f.png) ![在此处输入图像描述](../Images/3a79ba97094da352740e1a843a071454.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:29:55.520

当您隐藏元素时，它仍然存在（只是隐藏），这就是您遇到此问题的原因。我建议您针对 css`:nth-of-type(even)`选择器创建简单的脚本。首先，两个类：

```
.table_odd { color: yellow; } 
.table_even {color: white; } 
```

现在克里特功能：

```
function refrestTableColoring( $tableSelector ) {
    $tableSelector.find('tr:odd:not(.hidden)').removeClass('table_even').addClass('table_odd');
    $tableSelector.find('tr:even:not(.hidden)').removeClass('table_odd').addClass('table_even'); 
} 
```

然后使用很简单。准备好文档并在隐藏元素时调用：

```
refrestTableColoring( $('table') ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:28:51.327

```
 table tr[@display=block]:nth-of-type(even){background: yellow;} 
```

这行得通吗？

免责声明：未经测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T13:34:50.757

您可以使用**remove()**而不是**hide()**。像这样写：

 **```
$('input[type="submit"]').click(function(){
    $(".hidden").remove();
}); 
```

检查这个[http://jsfiddle.net/fhbgM/](http://jsfiddle.net/fhbgM/)**

# php - CodeIgniter 与 PHP Activerecord Spark 多个数据库

> ID：14459524
> 
> 赞同：0
> 
> 时间：2013-01-22T13:20:12.550
> 
> 标签：php, codeigniter, database-connection, phpactiverecord

到目前为止，我真的很喜欢 CodeIgniter 如何与 PHP ActiveRecord ORM 工具一起使用，

我将如何指定在我的模型中使用哪个连接？

我的 config/database.php 文件设置了 2 个连接：`$db['default']`和`$db['myOtherDb']`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:39:00.153

更新：

我通过在我的 ActiveRecord 模型中调用我的 IDE 中的自动完成功能并检查可用的方法/属性找到了我的解决方案，其中一个属性是`$connection`，我们可以将它设置为我们想要使用的连接，所以在我的模型中：

```
public static $connection = 'byOtherDb'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:26:04.653

在控制器内部，您可以添加：

```
var $db_1, $db_2;
function __construct()
{
    parent::__construct();

    $db1_param = 'mysql://database_username:password@localhost/database_name?char_set=utf8&dbcollat=utf8_general_ci';
    $db2_param = 'mysql://database_username:password@localhost/database_name?char_set=utf8&dbcollat=utf8_general_ci';

    $this->db_1 = $this->load->database($db1_param, TRUE);
    $this->db_2 = $this->load->database($db2_param, TRUE);
} 
```

那么你的处理程序是： $this->db_1 ， $this->db_2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T13:26:47.597

`load->database`在函数中指定新的数据库名称，

```
$otherdb = $this->load->database('myotherdb', TRUE); 
```

[请参阅此以获取更多信息](http://ellislab.com/codeigniter/user-guide/database/connecting.html)

# .net - 如何知道控件的上下文菜单何时显示

> ID：14459528
> 
> 赞同：0
> 
> 时间：2013-01-22T13:20:28.667
> 
> 标签：.net, winforms, tooltip, contextmenu

我有一个绘制图表的控件，当用户悬停一个对象时我会显示一个工具提示。

我还实现了在您右键单击对象时显示上下文菜单的功能。

显示工具提示的逻辑是`OnMouseMove()`，但上下文菜单与控件相关联，因此由 .NET 显示。

问题是，当我显示上下文菜单时，会显示工具提示悬停在上下文菜单上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:28:48.827

您可以将[ContextMenu.PopUp 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.contextmenu.popup.aspx)与[ToolTip.Active 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.active.aspx)结合使用，这样每次显示上下文菜单时，您都会停用控件的工具提示。

# jquery - 语法错误：标签无效

> ID：14459542
> 
> 赞同：4
> 
> 时间：2013-01-22T13:20:56.640
> 
> 标签：jquery

`Syntax error: invalid label`当我在跨域中通过 AJAX 调用 REST 服务时遇到问题。我的回答是`{ "d": 12000 }`它在“d”的双引号处显示错误。

我的代码是这样的：

```
$.ajax({
    type: 'post',
    url: 'http://localhost/test.svc/getnumber',
    dataType: "jsonp",
    crossDomain: true,
    contentType: "application/jsonp",
}); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T13:31:46.203

它不起作用，因为您的服务器没有返回 JSONP 值；它应该使用`callback`请求查询字符串中的值并返回一段包含函数调用的 JavaScript 代码。

例如，`$.ajax()`将向 发送请求`/path/to/script?callback=jsonp_12123123`，因此您的服务器应返回：

```
jsonp_12123123({"d": 12000}) 
```

使用 PHP，您可以使用以下方法完成此操作：

```
<?php

// DO NOT USE AS IS, SANITIZE $_GET!!!
echo $_GET['callback'], '(', json_encode(array(
    'd' => 12000,
)), ')'; 
```

此外，您不需要`contentType: 'application/jsonp'`; 它将被发送到服务器，但您正在发布任何数据，所以它是无用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:25:06.903

使用这个，你有一个格式错误的 URL (double `//`)，你的 也有问题`contentType`，它需要`application/json`：

```
$.ajax({
    type: 'post',
    url: 'http://localhost/test.svc/getnumber',
    datatype: "jsonp",
    contentType: 'application/json',
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T13:23:50.913

将您的代码编辑为：

```
$.ajax({
    type: 'post',
    url: 'http://localhost/test.svc/getnumber',
    dataType: "jsonp",
    contentType: 'application/json'
}); 
```

您的内容类型应该是`url`和按[规范](http://www.ietf.org/rfc/rfc4627.txt)存在错误`application/json`。

# objective-c - 将一些带有 NSValue 和 NSDictionary::objectForValue 的 Obj-C 代码移植到 cocos2d-x

> ID：14459545
> 
> 赞同：1
> 
> 时间：2013-01-22T13:21:06.333
> 
> 标签：objective-c, cocos2d-x

cocos2d-x 似乎没有任何内置的 NSValue 类似物，所以我在转换以下方法时遇到了一些麻烦：

```
- (BOOL)isEmpty:(id)target :(CGPoint)position {
    BOOL result = YES;   

    // objectForKey receives "id" parameter, not "const &string" 
    Trail *trail = [_objects objectForKey:[NSValue valueWithCGPoint:position]];

    if(trail && [trail.target isEqual:target]) {
        result = NO;
    }
    return result;
} 
```

cocos2d-x 有自己的 NSDictionary 实现，称为 CCDictionary，具有相同的逻辑。所以我可以像在 Objective-C 中一样存储对象，但我不能通过键提取对象，其中键具有类似“id”的类型。CCDictionary 只能在键类型为 std::string 或 int 时提取值。正如我上面提到的，cocos2d-x 没有任何类似的 NSValue。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:29:03.227

据我了解，作为`NSDictionary`一个 Objective-C 类，你只能从 Objective C 中使用它。这与 cocod2d 没有严格的关系。

IMO，您应该做的是使用`std::map`而不是`NSDictionary`保留您的目标。那么你将是 100% C++。

# c# - 如何调用方法确认

> ID：14459548
> 
> 赞同：3
> 
> 时间：2013-01-22T13:21:09.857
> 
> 标签：c#, javascript

我有一个`JS`方法如下：（我不知道它是否100％正确）

```
<script Type="Text/Javascript">

if (confirm("Are you SUre ?")) {
  return true;
} else {
  return false;
}

</script> 
```

并且有一些疑问：

第一：我有一个文件夹`JS` ，我打算把它放在那里，这样对吗？

第二：我将在`Edit`页面上使用它，因此当客户`click`在按钮上时，`edit`我希望此确认带有一些消息`"Are you Sure?`，例如按钮是/否如果客户`clicks`在`Yes`然后我将继续使用我的`edit on database`. 那么我该怎么做呢？在客户点击的那一刻我如何调用这个方法`ImageButton`？

还有一件事：如何获得此方法的返回并使用 C# 在我的 aspx.cs 上使用它？

我尝试了下面的代码，但没有用=\它向我显示了弹出窗口，但即使我单击`cancel`它也会转到`OnClick`方法

```
<asp:ImageButton ID="Btn_Alterar" runat="server" ImageUrl="~/Imgs/btAlterar.jpg" OnClick="Btn_Alterar_Click" OnClientClick="confirm()" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T13:28:20.033

这应该有效。它会弹出问题，如果他们说是，那么将处理服务器端代码（例如）。

JS：

```
<script language="javascript">
<!--
function doConfirm() {
    if (confirm("Are you SUre ?")) {
      //Person has said Yes, do your thing. Next line will allow the server side code to be processed
      return true
    } else {
      //User said No, do nothing and leave next line so the function call exits. 
      return false
    }
}
-->
</script> 
```

ASP.NET 控件：

```
<asp:ImageButton id="bMyButton" runat="server" onClientClick="doConfirm()" OnClick="DoServerSideCode" /> 
```

。CS

```
protected void DoServerSideCode(object sender, EventArgs e)
{
    //This will be called if JS is disabled OR the user clicks Yes. If the user clicks No then this won't be called. You can do DB logix here.
} 
```

**编辑：（**感谢@justnS）

另一种实现是：

ASP.NET 控件：

```
<asp:ImageButton id="bMyButton" runat="server" onClientClick="return confirm('Are you sure?')" OnClick="DoServerSideCode" /> 
```

上面的实现与之前的实现完全相同，但需要更少的代码并且是内联完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:55:48.043

$('#mylink').click(function(e){ e.preventDefault(); //有删除数据库的动作吗？去这里.. }

当然，你需要 jQuery..

# magento - Magento：获取类别树不显示隐藏类别

> ID：14459550
> 
> 赞同：0
> 
> 时间：2013-01-22T13:21:14.917
> 
> 标签：magento

我使用此代码显示类别树：

```
$rootcatId= Mage::app()->getStore()->getRootCategoryId(); 
$categories = Mage::getModel('catalog/category')->getCategories($rootcatId);

function  get_categories($categories) {
    $array= '<ul>';
    foreach($categories as $category) {
        $cat = Mage::getModel('catalog/category')->load($category->getId());
        //$count = $cat->getProductCount();
        $array .= '<li>'.
        $category->getId().' <a href="' . Mage::getUrl($cat->getUrlPath()). '">' . 
                  $category->getName(); //. "(".$count.")</a>\n";
        if($category->hasChildren()) {
            $children = Mage::getModel('catalog/category')->getCategories($category->getId());
             $array .=  get_categories($children);
            }
         $array .= '</li>';
    }
    return  $array . '</ul>';
}
echo  get_categories($categories); 
```

如何修改它以递归显示隐藏的类别？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T15:36:04.697

您可以设置自定义集合，而不是使用 getCategories() 方法。除非另有说明，否则这将显示隐藏的类别。

例如：

```
$categories = Mage::getModel('catalog/category')
->load(Mage::app()->getStore()->getRootCategoryId())
->getCollection()
->addAttributeToSort('position', 'ASC')
->addFieldToFilter('parent_id',Mage::app()->getStore()->getRootCategoryId())
->addFieldToFilter('include_in_menu',1)
->addAttributeToSelect('name') 
```

# vb.net - 我们在 VB.NET 中有什么与 OLE 相关的东西吗？

> ID：14459551
> 
> 赞同：0
> 
> 时间：2013-01-22T13:21:18.690
> 
> 标签：vb.net, vb6-migration

我们有一个从 VB6 到 VB.NET 的迁移项目，其中我们有 OLE 控件。我们在 Vb.NET 中是否有任何控件来替换 OLE？

# android - 伪造短信发送者

> ID：14459553
> 
> 赞同：2
> 
> 时间：2013-01-22T13:21:21.233
> 
> 标签：android, sms, inbox, sender-id

如何使用字母数字发件人 ID 填充 SMS 收件箱？

```
ContentValues my_values = new ContentValues();
my_values.put("address", senderid);//sender name
my_values.put("body", myMessage[i]);
my_values.put("status",-1);
getContentResolver().insert(Uri.parse("content://sms/inbox"), my_values); 
```

我尝试使用此代码，但没有收到通知。然后我尝试创建一条假短信并发出通知，但我无法分配字母数字发件人 ID，因为它不受支持。

如何同时实现字母数字发件人 ID 和通知？

# javascript - 使用 for (var x in data) 循环在 Mootools 中发生了什么

> ID：14459560
> 
> 赞同：0
> 
> 时间：2013-01-22T13:21:49.140
> 
> 标签：javascript, arrays, mootools

当我试图将一个使用 jQuery 的谷歌分析插件压缩到我的网站中时，这种情况就出现了，该网站自始至终都使用 mootools。

jQuery 代码使用类似于代码中的循环，没有问题。

[http://jsfiddle.net/RzBh5/2/](http://jsfiddle.net/RzBh5/2/)

```
var myData = [[20130105,0,0],[20130106,0,0],[20130107,0,0],[20130108,3,44],[20130109,2,6],[20130110,0,0]]
for (var r in myData) {
$('results').set('html',$('results').get('html') + '<br>' + myData[r][0] + ' - ' + r);
} 
```

Mootools 中的相同循环将它添加到数组类的所有新方法添加到我构建的数组中。有人可以解释发生了什么，以及我如何用普通的 javascript 或 jQuery 重写这个循环，这样它就不会发生。

执行此循环的“mootools”方法可以正常工作是；

```
Array.each(myData, function(stuff, index){
$('resultsMoo').set('html',$('resultsMoo').get('html') + '<br>' + stuff[0]);
}); 
```

小提琴只是吐出数组对象的内容。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T13:25:41.963

普通`for ... in`循环列出了对象的所有方法和属性，包括通过原型继承的方法和属性。

要将循环限制为相应对象独有的那些属性和方法，您可以使用[`hasOwnProperty()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty).

但是，在这种情况下，它只是一个要循环的数组，您应该使用这样的普通`for`循环：

```
for( var i=0; i<myData.length; i++ ) {
   $('results').set('html',$('results').get('html') + '<br>' + myData[i][0] + ' - ' + i );
} 
```

**编辑**

数组的核心是一个对象，就像任何其他对象一样。在 JavaScript 中有一个名为 的本机对象`Array`，所有数组都从该对象继承其函数。

因此，当您使用循环时，会列出`for ... in`父对象的所有方法以及数组本身的新属性（如值）。`Array`

希望这个解释有点帮助。

# javascript - IE win.document.URL -> 拒绝访问异常

> ID：14459564
> 
> 赞同：0
> 
> 时间：2013-01-22T13:22:06.300
> 
> 标签：javascript, internet-explorer, oauth-2.0

我的网站使用 OAUTH2.0 允许用户使用他们的 gmail 帐户登录...我使用以下代码显示 OAUTH 登录页面：

```
 var win = window.open(_url, "windowname1", 'width=800, height=600');

 var pollTimer = window.setInterval(function () {
     if (win.document.URL.indexOf(REDIRECT) != -1) {
         window.clearInterval(pollTimer);
         var url = win.document.URL;
         acToken = gup(url, 'access_token');
         tokenType = gup(url, 'token_type');
         expiresIn = gup(url, 'expires_in');
         win.close();

         validateToken(acToken);
     }
 }, 500); 
```

不幸的是，这段代码在 IE 上引发了异常（在 Chrome 和 Firefox 中完美运行）。

谁能告诉我如何访问 IE 中以前打开的窗口的当前 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T11:20:02.013

Try/Catch 为我完成了这项工作，因此只要 OAUTH2.0 回调具有相同的域，IE 就会停止抛出异常......

# driver - Windows 无法验证 libusb-win32 的发布者

> ID：14459566
> 
> 赞同：1
> 
> 时间：2013-01-22T13:22:12.730
> 
> 标签：driver, signing, libusb

我正在尝试安装带有有效数字签名的 libusb-win32-1.2.6.0。但是在安装时，我仍然会从 Windows 弹出：“Windows 无法验证此驱动程序软件的发布者”。

我还在受信任的根证书颁发机构和受信任的发布者中导入了证书。

有没有办法避免这个警告？

# iphone - 当我按下 iPhone 上的其他按钮时更改按钮上的图像

> ID：14459569
> 
> 赞同：0
> 
> 时间：2013-01-22T13:22:20.670
> 
> 标签：iphone, xcode, image, uibutton

在 IB 中，我创建了 9 个按钮（自定义）和一个选择状态配置：选中（button1.png）禁用（button1_disabled.png）.....（button9_disabled.png）

此提示仅在选择按钮和未选择按钮时

```
- (IBAction)onButtonsTapped:(UIButton*)sender {
    [[sender setSelected:![sender isSelected]];
    [priviousSelectedBtn setSelected:NO];
} 
```

但我想发布：

当我按下按钮 1（动作）时，更改按钮 1 上的图片（setSelected：YES）

我按下按钮 2（动作）更改按钮 2 上的图片（setSelected：YES）并更改数字 1 上的图像（setSelected：NO）

我按下按钮 9（动作）更改按钮 9 上的图像（setSelected：YES）并更改按钮 2 上的图像（setSelected：NO）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:30:43.960

您可以为每个按钮创建九个插座并循环通过它们来检查和取消选择。（代码未经编译器检查，您可能会有所了解）

或者，您可以为 previousSelectedButton 存储一个出口。

```
@property(strong)id previousSelectedButton;

- (IBAction)onButtonsTapped:(UIButton*)sender {
    [sender setSelected];
    [previousSelectedButton setSelected:NO];

    if(previousSelectedButton==nil || previousSelectedButton!=sender){
         previousSelectedButton=sender;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:39:48.260

试试下面的代码

```
for (int tag = 1; tag <= 9; tag++)//set your tag value as you wish max is 9 as you have mentioned there are 9 buttons
{
    UIButton *btn = (UIButton*)[self.view viewWithTag:tag];

    if (btn.tag != sender.tag)
    {
        [btn setSelected:NO];
    }

} 
```

希望这可以帮助你。并且不要将这些标签重用于这些按钮的超级视图。并为每个按钮制作一系列独特的标签值。

# java - 如何将 requestdispatcher 转发到远程 URL

> ID：14459574
> 
> 赞同：6
> 
> 时间：2013-01-22T13:22:27.077
> 
> 标签：java, web-services, rest, servlets, requestdispatcher

`http://www.mywebapp.com/sample.html`我有一个从远程服务器使用的 HTML 页面。我在同一个 HTML 表单中将 HTML URL 作为隐藏表单传递，

```
<form action="/myservlet?userid=12345" method="post" enctype="multipart/form-data">
<input type="file" name="file">
<input type="submit" value="Submit">
<input type="hidden" name="url" value="http://www.mywebapp.com/sample.html"/>
</form> 
```

在我的 servlet 中，我得到了隐藏的 URL`http://www.mywebapp.com/sample.html`并将其存储为 `String fieldValue = http://www.mywebapp.com/sample.html`

现在，当我尝试`RequestDispatcher`将页面转发到这样的隐藏 URL 时，

```
RequestDispatcher rd = req.getRequestDispatcher(fieldValue);
rd.forward(req, resp); 
```

我得到了`ERROR 404`。

谁能给我一个解决这个问题的想法。

**已编辑**

我真正想做的是，从远程服务器一个 HTML 页面将请求我的 REST Web 服务。Web 服务的响应将在 JSON 输出中。现在我想将此 JSON 响应发送到请求的 HTML 表单（即远程服务器 HTML 页面）

任何人都可以提出一个解决这个问题的想法。您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T13:26:21.893

您不能将请求转发到 Web 应用程序外部的 URL。您可能想改为发送到此 URL 的重定向。见`HttpServletResponse.sendRedirect()`。

请参阅[JSP 转发和重定向之间的区别](https://stackoverflow.com/questions/6068891/difference-between-jsp-forward-and-redirect)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-03-11T21:33:28.850

如果您绝对需要转发请求而不是重定向（例如，如果远程 URL 只能由服务器访问而用户不能访问），则可以进行自己的转发。在您的 servlet 中，您可以向远程 URL 发出请求，并将该请求中的 InputStream 写入您的 servlet 中的 OutputStream。不过，您显然希望查找并处理请求中的任何错误，并确保正确关闭流。您还需要手动将请求中的任何参数转发到新参数。

基本方法是：

```
URL url = new URL("http://www.externalsite.com/sample.html");
HttpURLConnection conn = (HttpURLConnection)url.openConnection();
conn.setRequestMethod("POST");
conn.setDoOutput(true);

String postParams = "foo="+req.getParameter("foo");

DataOutputStream paramsWriter = new DataOutputStream(con.getOutputStream());
paramsWriter.writeBytes(postParams);
paramsWriter.flush();
paramsWriter.close();

InputStream remoteResponse = conn.getInputStream();
OutputStream localResponder = resp.getOutputStream();
int c;
while((c = remoteResponse.read()) != -1)
    localResponder.write(c);
remoteResponse.close();
localResponder.close();

conn.disconnect(); 
```

这显然不处理您的示例中的多部分请求，但它为您提供了有关如何实现所需内容的基本概念。我建议使用 Apache HTTP 组件而不是 HttpURLConnection 来执行请求，因为它会使带有文件的多部分请求更容易实现（我想您必须使用 HttpURLConnection 手动创建多部分/表单数据主体） . 可以在[How can I make a multipart/form-data POST request using Java?](https://stackoverflow.com/questions/1378920/how-can-i-make-a-multipart-form-data-post-request-using-java) . InputStream 可以通过调用 getContent() 从 HttpEntity 获得（这将等效于示例中的 conn.getInputStream() ）。

使用 Apache Commons IO IOUtils.copy() 方法也可以更轻松地将 InputStream 写入 OutputStream。

编辑：可以使用 req.getInputStream() 获取原始请求正文并将其写入 paramsWriter.writeBytes() 但我没有尝试过，所以不能保证它会起作用。我不确定 req.getInputStream() 包含的 post 请求到底是什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T13:25:04.020

您无法转发到其他服务器。

您可以使用`resp.sendRedirect(url)`

[http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html#sendRedirect%28java.lang.String%29](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html#sendRedirect%28java.lang.String%29)

方法将返回一个 302 重定向到指定的 URL。

# c - 是否可以在运行时生成和运行 TemplateHaskell 生成的代码？

> ID：14459577
> 
> 赞同：9
> 
> 时间：2013-01-22T13:22:32.073
> 
> 标签：c, haskell, runtime, template-haskell, ghc-api

是否可以在运行时生成和运行 TemplateHaskell 生成的代码？

在运行时使用 C，我可以：

*   创建函数的源代码，
*   调用 gcc 将其编译为 .so (linux)（或使用 llvm 等），
*   加载 .so 和
*   调用函数。

模板 Haskell 是否可以做类似的事情？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-22T13:49:47.867

是的，这是可能的。GHC API 将编译 Template Haskell。[https://github.com/JohnLato/meta-th](https://github.com/JohnLato/meta-th)提供了一个概念验证，虽然不是很复杂，但它展示了一种通用技术，它甚至提供了一点类型安全性。模板 Haskell 表达式是使用该`Meta`类型构建的，然后可以编译并加载到可用函数中。

```
{-# LANGUAGE ScopedTypeVariables #-}
{-# LANGUAGE TemplateHaskell #-}

{-# OPTIONS_GHC -Wall #-}
module Data.Meta.Meta (
-- * Meta type
  Meta (..)

-- * Functions
, metaCompile
) where

import Language.Haskell.TH

import Data.Typeable as Typ
import Control.Exception (bracket)

import System.Plugins -- from plugins
import System.IO
import System.Directory

newtype Meta a = Meta { unMeta :: ExpQ }

-- | Super-dodgy for the moment, the Meta type should register the
-- imports it needs.
metaCompile :: forall a. Typeable a => Meta a -> IO (Either String a)
metaCompile (Meta expr) = do
  expr' <- runQ expr

  -- pretty-print the TH expression as source code to be compiled at
  -- run-time
  let interpStr = pprint expr'
      typeTypeRep = Typ.typeOf (undefined :: a)

  let opener = do
        (tfile, h) <- openTempFile "." "fooTmpFile.hs"
        hPutStr h (unlines
              [ "module TempMod where"
              , "import Prelude"
              , "import Language.Haskell.TH"
              , "import GHC.Num"
              , "import GHC.Base"
              , ""
              , "myFunc :: " ++ show typeTypeRep
              , "myFunc = " ++ interpStr] )
        hFlush h
        hClose h
        return tfile
  bracket opener removeFile $ \tfile -> do

      res <- make tfile ["-O2", "-ddump-simpl"]
      let ofile = case res of
                    MakeSuccess _ fp -> fp
                    MakeFailure errs -> error $ show errs
      print $ "loading from: " ++ show ofile
      r2 <- load (ofile) [] [] "myFunc"
      print "loaded"

      case r2 of
        LoadFailure er -> return (Left (show er))
        LoadSuccess _ (fn :: a) -> return $ Right fn 
```

这个函数需要一个`ExpQ`, 并且首先在 IO 中运行它来创建一个普通的`Exp`. 然后将`Exp`其漂亮地打印到源代码中，在运行时编译和加载。在实践中，我发现更困难的障碍之一是在生成的 TH 代码中指定正确的导入。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-22T13:26:47.380

据我了解，您想在运行时创建和运行代码，我认为您可以使用[GHC API](http://www.haskell.org/haskellwiki/GHC/As_a_library)来完成，但我不太确定您可以实现的范围。如果您想要诸如热代码交换之类的东西，可以查看包[hotswap](http://hackage.haskell.org/package/hotswap)。

# android - Android开发：使用哪些手机

> ID：14459579
> 
> 赞同：3
> 
> 时间：2013-01-22T13:22:32.963
> 
> 标签：android

这是上下文：我必须开发一个从 2.2 到 4.0 的 Android 应用程序。我已经读过，当然最好在许多设备、许多屏幕尺寸等上进行测试......我需要在“平均”移动设备上进行测试，这意味着不是最慢的设备，但也不是最快的设备。

使用哪种策略似乎最好：

*   购买 Nexus，因为没有来自构造函数的覆盖，并且是 Google 产品（哪一款适合我的需求？），并使用官方 ROM 在不同的操作系统版本上进行测试（使用模拟器进行屏幕尺寸测试）
*   购买 2 部具有不同屏幕功能和不同操作系统版本的中国手机（更便宜，而且还不错）。

我找不到最近的话题。你能给我一些建议吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T13:37:20.367

从高层次上看，我认为如果将不同的设备类别划分为桶，例如 2.x 手机、3.x 平板电脑（现在几乎可以忽略这个市场）、4.x 手机、4.x 7 英寸和 4.x 手机。 x 片剂。

然后，没有什么比硬件购买设备更好的存储桶大小了，首先从最大的存储桶开始。其余的使用模拟器，直到需要意味着拥有该设备是件好事。

看这里的图表：-

[http://developer.android.com/about/dashboards/index.html](http://developer.android.com/about/dashboards/index.html)

2.3 手机是你最大的桶，你会得到一个便宜的 ebay 设备。我使用 nexus 1 作为我的库存 2.x 设备。

接下来是 4.x 设备。Nexus 7 物超所值，非常适合测试手机和平板电脑的用户界面，尽管您需要为此调整资源设置。或者 Nexus 7 和 Nexus 4，如果你可以证明的话。

模拟器一直在变得更好，您现在可以模拟特定的设备设置，这有助于解决某些设备/屏幕尺寸的错误，但希望这种情况很少见。

希望有帮助，

瑞安

# xml - 在 Powershell 中使用 XML 填充变量

> ID：14459581
> 
> 赞同：3
> 
> 时间：2013-01-22T13:22:36.533
> 
> 标签：xml, powershell

我需要告诉我，我在 Powershell 中编程的时间很短，而且有一些基本的东西我暂时不能很好地处理。

所以我要做的是将数据预先输入到 XML 文件中以使用这些数据并将 $var 填充到 powershell 中，然后使用这些 var 来更改 Active Directory 属性。对于更改 AD 属性我很好，但是通过调用 XML 文件来填充我的 var 的自动化过程根本不起作用。我想我没有使用 got 方法，这就是我寻求帮助的原因。

这是我的 XML 文件（我只声明了两个站点）

```
<Location>
  <Site> 
    <City>Alma</City> 
    <Street>333 Pont Champlain Street</Street> 
    <POBox></POBox>
    <State>Ontario</State> 
    <Zip>G1Q 1Q9</Zip>
    <Country>CA</Country>
    <OfficePhone>+1 555-555-2211</OfficePhone>
   </Site> 

  <Site> 
    <City>Dolbeau</City> 
    <Street>2525 Avenue du Pinpont</Street> 
    <POBox></POBox>
    <State>Quebec</State> 
    <Zip>G2Q 2Q9</Zip>
    <Country>CA</Country>
    <OfficePhone>+1 555-555-3000</OfficePhone>        
  </Site>
</Location> 
```

我想使用 var 名称 $Destination 来“匹配”location.site.city。如果 $destination 匹配城市，则填充 var

```
$Newcity = location.site.city
$NewStreet = location.site.street
$NewState = location.site.state 
```

等等等等

这是我做的脚本的一部分，但我无法得到我想要的结果。

```
$var1 = ""
$Street = ""
$Destination = "Alma"

[xml]$SiteAttribute = Get-Content SitesAttributes.xml

foreach( $City in $SiteAttribute.location.Site){
    $var1 = $site.city    
    If ($var1 -match $Destination){
       $NewStreet = $Site.Street
       $NewCity = $Site.city
       $NewPoBox = $site.POBox
       $NewState = $site.State
       $Newzip = $Site.zip
       $NewCountry = $Site.country
       $NewPhone = $Site.OfficePhone
       } 
} 
```

然后我会使用这些 var 用另一个 Powershell 命令更改我的 AD 属性

```
##Normal AD module come with W2k8
Import-Module ActiveDirectory

Set-ADUser $username -server $dc -StreetAddress $NewStreet -City $NewCity -State $NewState -PostalCode $NewZip -OfficePhone $NewPhone  -Country $NewCountry 
```

但是我所有的尝试都失败了，因为我认为我的 Foreach 语句后面跟着我的 If 语句对于我想做的过程来说是不够的。有什么建议吗？

谢谢约翰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T14:22:17.240

`Select-Xml`这是使用和过滤站点的另一个选项`Where-Object`，以及使用带有与 cmdlet 参数名称对应的键的散列表的喷溅技术。

与该`SelectNodes()`方法相比，此方法的优点是 XML 区分大小写，如果您提供 'alma' 并且文件中值的大小写不同，您可能无法获得想要的结果。

访问[此页面](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_Splatting)以获取有关喷溅的更多信息。

```
[xml]$xml = Get-Content SitesAttributes.xml
$site = $xml | Select-Xml -XPath "//Location/Site" | Where-Object {$_.Node.City -match 'alma'}

$params = @{
       StreetAddress = $site.Node.Street
       City = $site.Node.city
       State = $site.Node.State
       PostalCode = $site.Node.zip
       Country = $site.Node.country
       OfficePhone = $site.Node.OfficePhone
}

Import-Module ActiveDirectory
Set-ADUser $username -server $dc @params 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T13:28:06.310

试试这个：

```
$var1 = ""
$Street = ""
$Destination = "Alma"
[xml]$SiteAttribute = Get-Content SitesAttributes.xml

foreach( $Site in $SiteAttribute.location.Site){ #this line in your code has issue
    $var1 = $Site.city    
    If ($var1 -match $Destination){
       $NewStreet = $Site.Street
       $NewCity = $Site.city
       $NewPoBox = $site.POBox
       $NewState = $site.State
       $Newzip = $Site.zip
       $NewCountry = $Site.country
       $NewPhone = $Site.OfficePhone
       } 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T13:40:33.867

看来您的 foreach 循环中只有一个错字（您使用`$City in...`而不是`$Site in ...`）。清理答案的另一种方法是首先只获取匹配的站点。

前任：

```
$xml = [xml](Get-Content .\my.xml)
$destination = "Alma"

$sites = $xml.SelectNodes("/Location/Site[City='$destination']")

$sites | % { 
    $NewStreet = $_.Street
    $NewCity = $_.city
    $NewPoBox = $_.POBox
    $NewState = $_.State
    $Newzip = $_.zip
    $NewCountry = $_.country
    $NewPhone = $_.OfficePhone
    }

#Printing variables to test
$NewStreet
$NewCity
$NewPoBox
$NewState
$Newzip
$NewCountry
$NewPhone 
```

请注意，xpath 区分大小写，因此 $destination 必须与 XML 中的值相同。

# jquery - 从 javascript 为 jQuery 移动页面生成 jQ 按钮以减少重复

> ID：14459585
> 
> 赞同：1
> 
> 时间：2013-01-22T13:22:52.500
> 
> 标签：jquery, jquery-mobile

我在标题中有一个“主页”按钮，在很多地方都有这个“标准”代码：

```
<a href="#home" 
    data-role="button" 
    data-iconpos="right"
    data-icon="home" 
   class="ui-btn-right">
   home</a> 
```

**我想从一段 javascript 代码中渲染它，因为它在 index.html 中多次出现**- 以减少代码冗余并更容易更改。（我想使用 jQuery，所以跨浏览器功能还可以）

下面的代码应该:)有效，我做错了什么？

（我尝试从不同的角度解决它，我可以写出文本，输出其他 html 等 - 但我不能同时处理 data-* 和标准 html attr）

**编码：**

*在 index.html 中：*

```
<div  data-role="header">
    <a data-myButton="headerHome> </a>
</div> 
```

*在 main.js 中：*

```
$( function () {    
    // put home button into the headers:        
    $("a[data-mybutton = 'headerHome']").( function () {
        $(this).href = "#home";             
        $(this).data("role","button");
        $(this).data("iconpos","right");
        $(this).data("icon","home");
        $(this).class("ui-btn-right");      
    })
}) 
```

我将 main.js 称为 index.html 中的最后一个 js 文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:28:50.537

您的代码无效。

也许你的意思是

[演示](http://jsfiddle.net/mplungjan/B4zvx/)（请注意，使用 .data 设置时，数据属性不会显示在检查元素中）

```
$( function () {    
  $("a[data-mybutton = 'headerHome']")
    .attr("href","#home")
    .data("role","button")
    .data("iconpos","right")
    .data("icon","home")
    .attr("class","ui-btn-right");      
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:53:14.663

在 jQuery Mobile 中，仅仅设置属性是不够的。需要使用正确的页面事件，还需要调用**.button(**函数来正确地重新设置按钮的样式，如下所示：

```
$('#index').live('pagebeforeshow',function(e,data){    
    $("a[data-mybutton = 'headerHome']")
        .attr("href","#home")
        .data("role","button")
        .data("iconpos","right")
        .data("icon","home")
        .attr("class","ui-btn-right");  
    $("a[data-mybutton = 'headerHome']").button();
}); 
```

这是一个工作示例：http: [//jsfiddle.net/Gajotres/heSKu/](http://jsfiddle.net/Gajotres/heSKu/)

# javascript - 适用于捐赠按钮 Paypal 的 Javascript 在 Chrome 上工作但在 IE 和 Mozila 上不工作 我的代码已附加？

> ID：14459588
> 
> 赞同：0
> 
> 时间：2013-01-22T13:22:59.510
> 
> 标签：javascript, asp.net, paypal, mozilla

甚至在 IE 上都没有显示任何错误，它在 Chrome 上工作正常，但在 Mozila 和 IE 上没有工作，我的代码是，

```
 <script type="text/javascript">
    function Donate()
{

    var myform = document.createElement("form");
    myform.action = "https://www.paypal.com/cgi-bin/webscr";
    myform.method = "post";
    myform.target = "_blank";

    var cmd = document.createElement("input");
    cmd.name = "cmd";
    cmd.type = "hidden";
    cmd.value = "_donations";

    var encrypted = document.createElement("input");
    encrypted.type = "hidden";
    encrypted.name = "business";
    encrypted.value = "mentorprotege2013@gmail.com";

    var lc = document.createElement("input");
    lc.type = "hidden";
    lc.name = "lc";
    lc.value = "US";

    var itemname = document.createElement("input");
    itemname.type = "hidden";
    itemname.name = "item_name";
    itemname.value = "mentor";

    var itemnumber = document.createElement("input");
    itemnumber.type = "hidden";
    itemnumber.name = "item_number";
    itemnumber.value = "2013";

    var note = document.createElement("input");
    note.type = "hidden";
    note.name = "no_note";
    note.value = "0";

    var currency = document.createElement("input");
    currency.type = "hidden";
    currency.name = "currency_code";
    currency.value = "USD";

    var bn = document.createElement("input");
    bn.type = "hidden";
    bn.name = "bn";
    bn.value = "PP-DonationsBF:btn_donateCC_LG.gif:NonHostedGuest";

    var image = document.createElement("input");
    image.type = "image";
    image.src = "https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif";
    image.border = "0";
    image.id="Dimage";
    image.name = "submit";
    image.alt="PayPal - The safer, easier way to pay online!";

    //Most probably this can be skipped, but I left it in here since it was present in the generated code
    var pixel = document.createElement("image");
    pixel.border = "0";
    pixel.alt="";
    pixel.src = "https://www.paypalobjects.com/en_US/i/scr/pixel.gif";
    pixel.width = "1";
    pixel.height = "1";

    myform.appendChild(cmd);
    myform.appendChild(encrypted);
    myform.appendChild(lc);
    myform.appendChild(itemname);
    myform.appendChild(note);
    myform.appendChild(currency);
    myform.appendChild(bn);
    myform.appendChild(image);
    myform.appendChild(pixel);
    myform.submit();
}
    </script> 
```

希望您的建议在我的代码中没有错误，它在 chrome 上工作正常

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:28:23.913

将表单附加到文档

```
myform.appendChild(pixel);
document.body.appendChild(myform); //<-- Add this
myform.submit(); 
```

# php - 无法弄清楚为什么 PHP 不接收来自 $.ajax 调用的 POST 数据

> ID：14459596
> 
> 赞同：0
> 
> 时间：2013-01-22T13:23:20.010
> 
> 标签：php, jquery, post

这不像我以前没有做过同样的过程，但我不知道为什么我的 PHP 脚本的 POST 数据是空的。这是我所做/发现的：

1.  我已经验证 $.ajax 调用的“数据”参数有一个值（submitSearch 函数和成功参数中的警报显示搜索变量的正确值）。

2.  我知道脚本正在“找到” - 浏览器的 js 控制台中没有文件未找到消息。

3.  我没有收到任何数据库连接错误

4.  我还知道 PHP 脚本正在运行，因为 $.ajax 调用的成功参数中的警报正在 PHP 脚本的 else 子句中显示 $message 值。

5.  我在 PHP 脚本中设置的日志没有显示任何 POST 数据

如果有人可以看看这个并希望指出我所缺少的，我将不胜感激。

以下是所有相关代码：

* * *

Javascript（在 HTML 文件中的脚本标记中）

* * *

```
$('input#btnSubmitSearch').click(function() {
// Clear the text box in case an error was indicated previously
$('input#txtSearch').css({'background-color' : ''});

var search = $('input#txtSearch').val();

if (search == '' || search.length != 5) {
    alert ('Not a valid entry!');
    $('input#txtSearch').css({'background-color' : '#FDC3C3'});
    return false;
}
else {
    submitSearch(search);
    return false;
}
});

function submitSearch(search) {
alert ('Sending ' + search + ' to the database.');

$.ajax({
    type: 'POST',
    url: 'scripts/search.php',
    data: search,
    cache: false,
    success: function(response) {
        alert ('search is: ' + search + ', Response from PHP script: ' + response);
    },
    error: function(xhr) {
        var response = xhr.responseText;
        console.log(response);
        var statusMessage = xhr.status + ' ' + xhr.statusText;
        var message  = 'Query failed, php script returned this status: ';
        var message = message + statusMessage + ' response: ' + response;
        alert(message);
    }
});
} 
```

* * *

PHP 脚本 (scripts/search.php)

* * *

```
<?php
require_once ('logging.php');
$log = new Logging();

$dbc = @mysqli_connect([connection stuff])
    OR die ('Could not connect to MySQL server: ' . mysqli_connect_error() );

$log->lwrite('$_POST[\'search\']: ' . $_POST['search']);

if (isset($_POST['search'])) {

    $search = $_POST['search'];

    $log->lwrite('$search: ' . $search);

    $querySearch= "SELECT id, value
                            FROM table
                            WHERE value LIKE '%" . $search . "%'";

    $log->lwrite('$querySearch: ' . $querySearch);

    $resultSearch = @mysqli_query($dbc, $querySearch);

    $numRowsSearch = mysqli_num_rows($resultSearch);

    $log->lwrite('rows returned: ' . $numRowsSearch);

    if ($numRowsSearch > 0) {
        while ($rowSearch = mysqli_fetch_array($resultSearch, MYSQLI_ASSOC)) {
            echo 'Value found: ' . $rowSearch['value'];
        }
    } 
}
else {
    $errorMessage ='$_POST[\'search\'] doesn\'t have a value!'; 
    $log->lwrite($errorMessage);
    echo ($errorMessage);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T13:30:59.997

```
$.ajax({
    type: 'POST',
    url: 'scripts/search.php',
    data: {'search': search}, 
... 
```

我相信你需要`$_POST['search']`像上面那样设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:29:35.150

可能是您应该更改（在您的 Javascript 中）该行：

```
data: search, 
```

到：

```
data: {search: search}, 
```

您正在发送一个简单的字符串而不是命名参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T13:30:48.467

不要直接使用点击功能。改用 $.on 函数。

```
$('form').on('click', ".submit", function() {
     //code here...
}); 
```

要发出 ajax 请求，请尝试，

```
var search = 'something';
$.post("scripts/search.php", {search:search}, function(response) {
     alert ('search is: ' + search + ', Response from PHP script: ' + response);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-02T10:59:45.953

**在你成功之前试试这个**

```
beforeSend: function(xhr){xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded")} 
```

# sql - 搜索数字是否包含在如下表达式中：1-3,5,10-15,20

> ID：14459600
> 
> 赞同：1
> 
> 时间：2013-01-22T13:23:38.903
> 
> 标签：sql, regex, oracle

在 oracle 数据库表中，我需要找到给定批号的结果。保存批号的字段是一个包含类似“1-3,5,10-15,20”的字符串（此字符串中的数字已排序）

有没有办法做到这一点？

在上面的示例中，应为以下批号找到结果：

```
1,2,3,5,10,11,12,13,14,15,20 
```

在应用程序中没有办法做到这一点，所以它必须在数据库中完成。

类似：“SELECT * FROM products WHERE lot = 2”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T14:03:06.967

可以通过使用[REGEXP_SUBSTR](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions150.htm#SQLRF06303)函数和[分层查询](http://docs.oracle.com/cd/E11882_01/server.112/e26088/queries003.htm#SQLRF52332)在 SQL 中完成这一切：

```
with list_of_ids as (
select regexp_substr(a, '[[:digit:]]+',1, 1) as lot1
     , nvl( regexp_substr(a, '(-)([[:digit:]]+)',1, 1, 'i', '2')
          , regexp_substr(a, '[[:digit:]]+',1, 1)) as lot2
  from (select regexp_substr('1-3,5,10-15,20' , '[^,]+', 1, level) as a
          from dual
       connect by regexp_substr('1-3,5,10-15,20' , '[^,]+', 1, level) is not null
               )
       )
select a.*
  from products a
  join list_of_ids b
    on a.lot between b.lot1 and b.lot2 
```

但是，我必须强调正确规范化您的数据库是可行的方法。此解决方案可能无法很好地扩展，并且会做大量不必要的工作。

它是这样工作的：

首先用逗号分割你的数据：

```
SQL>  select regexp_substr('1-3,5,10-15,20', '[^,]+', 1, level) as a
  2     from dual
  3  connect by regexp_substr('1-3,5,10-15,20', '[^,]+', 1, level) is not null
  4          ;

A
--------------
1-3
5
10-15
20 
```

接下来，在连字符上拆分它以提供在 BETWEEN 中使用的最小和最大手数，然后最终将其加入表中。NVL 的存在是为了确保始终存在最大值。

```
SQL> select regexp_substr(a, '[[:digit:]]+',1, 1) as lot1
  2       , nvl( regexp_substr(a, '(-)([[:digit:]]+)',1, 1, 'i', '2')
  3             , regexp_substr(a, '[[:digit:]]+',1, 1)) as lot2
  4    from (select regexp_substr('1-3,5,10-15,20' , '[^,]+', 1, level) as a
  5            from dual
  6         connect by regexp_substr('1-3,5,10-15,20' , '[^,]+', 1, level) is not null
  7                 )
  8         ;

LOT1           LOT2
-------------- --------------
1              3
5              5
10             15
20             20

SQL> 
```

这是一个带有完整查询的有效[SQL Fiddle 。](http://www.sqlfiddle.com/#!4/be8e0/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T14:21:10.567

这是一个具有[PIPELINED FUNCTION](http://www.oracle-base.com/articles/misc/pipelined-table-functions.php)的解决方案：

```
create type array_number
    as table of number
/ 

create or replace function x_tbl(a varchar2) return array_number pipelined  as
token varchar2(10);
str varchar2(1000):=a;
k number;
should_exit boolean;
begin
should_exit := false;
loop
    if instr(str,',') > 0 then 
        token:=substr(str,1,instr(str,',')-1);
    else 
        token := str;
        should_exit:=true;
    end if;
    if instr(token,'-') > 0 then 
        k:=to_number(substr(token, 1, instr(token,'-')-1)) ;
        loop
            pipe row(k);
            k:=k+1;
            exit when k>to_number(substr(token, instr(token,'-')+1)) ;
        end loop;
    else pipe row(token);
    end if;
    --dbms_output.put_line(token);
    --dbms_output.put_line(instr(str,','));
    str:=substr(str, instr(str,',')+1);
    exit when should_exit;
end loop;
end;
/ 
```

询问：

```
select * from table(x_tbl('22-27,33,444-448')); 
```

结果：

```
22
23
24
25
26
27
33
444
445
446
447
448 
```

这样你就可以：

```
 select 1 from dual where 23 in (select * from  table(x_tbl('22-27,33,444-448'))); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-22T13:56:16.187

这是 T-SQL，但移植起来应该不难。

```
DECLARE @ranges NVARCHAR(MAX);
DECLARE @number INT;

SET @ranges = N'1-3,5,10-15,20';
SET @number = 13;

DECLARE @found BIT;
DECLARE @commaIndex INT;
DECLARE @dashIndex INT;
DECLARE @range NVARCHAR(MAX);
DECLARE @rangeStart INT;
DECLARE @rangeEnd INT;

SET @found = 0;

SET @commaIndex = CHARINDEX(',', @ranges);

WHILE (@commaIndex > 0) BEGIN

  SET @range = SUBSTRING(@ranges, 1, @commaIndex - 1);

  SET @dashIndex = CHARINDEX('-', @range);

  IF (@dashIndex > 0) BEGIN

     SET @rangeStart = CAST(SUBSTRING(@range, 1, @dashIndex - 1) AS INT);
     SET @rangeEnd = CAST(SUBSTRING(@range, @dashIndex + 1, LEN(@range) - @dashIndex) AS INT);

  END ELSE BEGIN

     SET @rangeStart = CAST(@range AS INT);
     SET @rangeEnd = @rangeStart;

  END;

  IF ((@rangeStart <= @number) AND (@number <= @rangeEnd)) BEGIN

    SET @found = 1;

    BREAK;

  END;

  SET @ranges = SUBSTRING(@ranges, @commaIndex + 1, LEN(@ranges) - @commaIndex);
  SET @commaIndex = CHARINDEX(',', @ranges);

END;

IF (@found = 1) BEGIN

    PRINT N'Contained.';

END ELSE BEGIN

    PRINT N'Not contained.';

END; 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-01-22T13:43:30.403

如果您必须只使用 SQL，这是最简单的解决方案。如果您使用 PL/SQL，还有更多解决方案。但这可能是最有效和最简单的。当然，不是硬编码的数字，而是您的字符串：

```
SELECT * FROM products WHERE lot IN (Replace('1-3,5,10-15,20', '-', ',') )
/ 
```

如果需要，有一种方法可以删除/替换字符串中的更多字符。上面的示例仅将 '-' 替换为 ',' ...

问题是如何得到这个：

```
"SELECT * FROM products WHERE lot = 2..." 
```

不是这个：

```
1-3,
2,
4
... 
```

清楚地陈述你的问题/例子。

# c# - 32 位进程无法访问 64 位进程的模块

> ID：14459605
> 
> 赞同：1
> 
> 时间：2013-01-22T13:23:56.403
> 
> 标签：c#, .net, wpf, windows, winapi

我试图让窗口在鼠标下，但是，当我到达代码：Process.GetProcessById，我得到这个错误：

```
A 32 bit processes cannot access modules of a 64 bit process. 
```

这是我的代码：

```
NativeMethods.POINT p;

if (NativeMethods.GetCursorPos(out p))
            {

                IntPtr hWnd = NativeMethods.WindowFromPoint(p);
                NativeMethods.GetWindowModuleFileName(hWnd, fileName, 2000);

string WindowTitle= fileName.ToString().Split('\\')[fileName.ToString().Split('\\').Length - 1];
// WindowTitle will never change, it will get my window only!

            }

////////////////////////////////////////////////////////////////////////////////////////

static class NativeMethods
        {

            [DllImport("user32.dll")]
            public static extern IntPtr WindowFromPoint(POINT Point);

            [DllImport("user32.dll", SetLastError = true, CharSet = CharSet.Auto)]
            public static extern uint GetWindowModuleFileName(IntPtr hwnd,
                StringBuilder lpszFileName, uint cchFileNameMax);

            [DllImport("user32.dll")]
            public static extern bool GetCursorPos(out NativeMethods.POINT lpPoint);

            [StructLayout(LayoutKind.Sequential)]
            public struct POINT
            {
                public int X;
                public int Y;

                public POINT(int x, int y)
                {
                    this.X = x;
                    this.Y = y;
                }

                public static implicit operator System.Drawing.Point(POINT p)
                {
                    return new System.Drawing.Point(p.X, p.Y);
                }

                public static implicit operator POINT(System.Drawing.Point p)
                {
                    return new POINT(p.X, p.Y);
                }
            }

            [StructLayout(LayoutKind.Sequential)]
            public struct RECT
            {
                public int Left;
                public int Top;
                public int Right;
                public int Bottom;
            }
        } 
```

这是我尝试在 WPF 中使用调用：

```
void dispatcherOp_Completed(object sender, EventArgs e)
        {

            System.Threading.Thread thread = new System.Threading.Thread(
                new System.Threading.ThreadStart(
                  delegate()
                  {
                      System.Windows.Threading.DispatcherOperation
                        dispatcherOp = this.Dispatcher.BeginInvoke(
                        System.Windows.Threading.DispatcherPriority.Normal,
                        new Action(
                          delegate()
                          {
                              NativeMethods.POINT p;
                              if (NativeMethods.GetCursorPos(out p))
                              {
                                  IntPtr hWnd = NativeMethods.WindowFromPoint(p);
                                  NativeMethods.GetWindowModuleFileName(hWnd, fileName, 2000);

                                  uint processID = 0;
                                  uint threadID = GetWindowThreadProcessId(hWnd, out processID);
                                  string filename= Process.GetProcessById((int)processID).MainModule.FileName;
                              }

                          }
                      ));
                      dispatcherOp.Completed -= new EventHandler(dispatcherOp_Completed);
                      dispatcherOp.Completed += new EventHandler(dispatcherOp_Completed);
                  }
              ));

            thread.Start();
        } 
```

# javascript - 访问 javascript PDFObject

> ID：14459606
> 
> 赞同：0
> 
> 时间：2013-01-22T13:23:59.603
> 
> 标签：javascript, jquery, pdf-generation

我正在为我的应用程序使用 PDFObject：

```
var myPDF = new PDFObject({
    url:myUrl,
    id:"myPDF",
    width:"100%",
    height:"100%",
    pdfOpenParams:{
        navpanes:1,
        statusbar:0,
        toolbar:1,
        view:"FitH",
        pagemode:"bookmarks",
        page:anchor
    }
})

var fullText = functionGettingResults() 
```

我想`search : fulltext`在 pdfOpenParams 中动态添加。

`myPDF.pdfOpenParams.search = fullText`不工作

我怎么能 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:00:12.027

```
var fulltext;

var params = {
    navpanes:1,
    statusbar:0,
    toolbar:1,
    view:"FitH",
    pagemode:"bookmarks",
    page:anchor
}

if(fulltext == functionGettingResults()){
params.search = fulltext;
}

var myPDF = new PDFObject({
    url:pdfUrl,
    id:"myPDF",
    width:"100%",
    height:"100%",
    pdfOpenParams:params
}).embed("div"); 
```

# version-control - Git HEAD~1 表现不如预期

> ID：14459608
> 
> 赞同：1
> 
> 时间：2013-01-22T11:46:49.143
> 
> 标签：version-control, git

这是我的 git 日志：

![](../Images/9c2b7c7cc2ad1f06f68f1100a21bc4e7.png)

我想重置最近的提交（顶部）。

但是，如果我运行`git reset --hard HEAD~1`，它会让我退回 5 次提交！

![](../Images/a9dc0a669432309450992101fdf59378.png)

同样，如果我运行`git rebase -i HEAD~3`，我希望看到最近的三个提交，但我得到了大约 50 个！

可能出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T12:02:54.207

你的实际`HEAD`是合并，所以它有多个父母。如果你写`HEAD~1`，git 必须从父母之一中选择。它只是选择你不喜欢的那个。

`HEAD~1`在这种情况下，请改用实际的哈希值。

# c++ - 如何回收 RPC 运行时分配的线程句柄？

> ID：14459612
> 
> 赞同：1
> 
> 时间：2013-01-22T13:24:13.207
> 
> 标签：c++, windows, multithreading, rpc, handles

**一点背景：**

我正在开发一个使用 RPC 通过网络进行通信的 Windows 程序。网络连接不断建立和断开。RPC 调用是同步的，但有多个客户端线程同时运行。这些程序是对称的——也就是说，双方都充当客户端和服务器，并且运行完全相同的软件。它使用标准 Windows API 在 C++ 中实现。

**问题：**

Process Explorer 报告的线程句柄数会随着时间的推移而增加。看起来线程是由 RPC 运行时创建来处理请求的，但是当线程被回收时，句柄并不总是被清除。

特别是当传输大量数据或同时发生许多呼叫时（这两个因素齐头并进，我不确定哪个是相关的），这个数字会增加。

一个活动服务器可以在几天内建立数千个未使用的线程句柄，而在任何时候都不会使用超过 20 个线程。

**问题：**

我可以做些什么来防止手柄计数安装，因为我认为这可能会导致客户站点的稳定性问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:54:05.983

好吧，令人惊讶的是，即使线程终止，也不会释放其所有资源。您必须调用`CloseHandle()`从 beginthreadex 收到的线程句柄或调用的内容。另外，不要（！！！）使用 CreateThread()，请参阅 MSDN 文档。

还有一件事，尽管这不会导致您的问题，那就是线程的永久启动和终止。相反，使用线程池。此外，但这取决于您的实际设置，每个网络接口只需要一个线程用于 IO，每个 CPU 需要一个线程用于计算。使用线程池，您可以轻松限制此数量。控制这些应该限制由线程创建/清理和上下文切换引起的开销。如果连接在网络 IO、CPU 和可能的磁盘 IO 甚至 UI 之间切换很多，这并不总是可行的。

# ajax - dojo中的多部分表单数据ajax请求

> ID：14459618
> 
> 赞同：1
> 
> 时间：2013-01-22T13:24:35.500
> 
> 标签：ajax, dojo

我用谷歌搜索了很多，但找不到对 Multipart formdata enctype 表单进行 ajax 发布请求的方法。有人可以帮忙吗

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-22T13:32:17.203

查看 dojo.xhr 文档中的示例 1：http: [//dojotoolkit.org/reference-guide/1.8/dojo/xhr.html](http://dojotoolkit.org/reference-guide/1.8/dojo/xhr.html)

调整/缩短的版本：

```
<form data-dojo-type="dijit/form/Form" id="myForm" data-dojo-id="myForm"
 encType="multipart/form-data" action="" method="">

 <input data-dojo-type="dijit/form/ValidationTextBox"
    type="text"
    id="name"
    name="name" />

 <div data-dojo-type="dijit/form/Button">
    Submit
    <script type="dojo/method" data-dojo-event="onClick" data-dojo-args="evt">
        dojo.xhrPost({
            // The target URL on your webserver:
            url: "#",

            // The form node, which contains the
            // to be transferred form elements:
            form: "myForm",

            // Event handler on successful call:
            load: function(response, ioArgs){
                // do something
            }
        });
    </script>
 </div>
</form> 
```

# c++ - 具有插槽移动语义的 Slim C++ 信号/事件机制

> ID：14459620
> 
> 赞同：1
> 
> 时间：2013-01-22T13:24:42.983
> 
> 标签：c++, templates, boost, signals-slots

我正在尝试用 C++ 设计一个信号和插槽系统。该机制在某种程度上受到 boost::signal 的启发，但应该更简单。我正在使用 MSVC 2010，这意味着一些 c++11 功能可用，但遗憾的是可变参数模板不可用。

首先，让我提供一些上下文信息。我实现了一个系统来处理由连接到 pc 的不同硬件传感器生成的数据。每个硬件传感器都由一个从通用类*Device*继承的类表示。每个传感器都作为一个单独的线程运行，它接收数据并将其转发到多个*处理器*类（例如过滤器、可视化器等）。换句话说，设备是信号，处理器是插槽或侦听器。整个信号/插槽系统应该非常高效，因为传感器会生成大量数据。

下面的代码展示了我对带有一个参数的信号的第一种方法。可以添加（复制）更多模板特化以包括对更多参数的支持。到目前为止，下面的代码中缺少线程安全性（需要互斥锁来同步对 slot_vec 的访问）。

我想确保插槽的每个实例（即处理器实例）不能被另一个线程使用。因此我决定使用 unique_ptr 和 std::move 来实现插槽的移动语义。这应该确保当且仅当插槽断开连接或信号被破坏时，插槽​​也会被破坏。

我想知道这是否是一种“优雅”的方法。任何使用下面 Signal 类的类现在都可以创建 Signal 的实例或从 Signal 继承以提供典型的方法（即 connect、emit 等）。

```
#include <memory>
#include <utility>
#include <vector>

template<typename FunType>
struct FunParams;

template<typename R, typename A1>
struct FunParams<R(A1)>
{
    typedef R Ret_type;
    typedef A1 Arg1_type;
};

template<typename R, typename A1, typename A2>
struct FunParams<R(A1, A2)>
{
    typedef R Ret_type;
    typedef A1 Arg1_type;
    typedef A2 Arg2_type;
};

/**
Signal class for 1 argument.
@tparam FunSig Signature of the Signal
*/
template<class FunSig>
class Signal
{
public:
    // ignore return type -> return type of signal is void
    //typedef typenamen FunParams<FunSig>::Ret_type Ret_type;
    typedef typename FunParams<FunSig>::Arg1_type Arg1_type;

    typedef typename Slot<FunSig> Slot_type;

public:
    // virtual destructor to allow subclassing
    virtual ~Signal()
    {
        disconnectAllSlots();
    }

    // move semantics for slots
    bool moveAndConnectSlot(std::unique_ptr<Slot_type> >& ptrSlot)
    {
        slotsVec_.push_back(std::move(ptrSlot));
    }

    void disconnectAllSlots()
    {
        slotsVec_.clear();
    }

    // emit signal
    void operator()(Arg1_type arg1)
    {
        std::vector<std::unique_ptr<Slot_type> >::iterator iter = slotsVec_.begin();
        while (iter != slotsVec_.end())
        {
            (*iter)->operator()(arg1);
            ++iter;
        }
    }

private:
    std::vector<std::unique_ptr<Slot_type> > slotsVec_;

};

template <class FunSig>
class Slot
{
public:
    typedef typename FunParams<FunSig>::Ret_type Ret_type;
    typedef typename FunParams<FunSig>::Arg1_type Arg1_type;

public:
    // virtual destructor to allow subclassing
    virtual ~Slot() {}

    virtual Ret_type operator()(Arg1_type) = 0;
}; 
```

有关此方法的其他问题：

1) 通常信号和槽将使用对复杂数据类型的 const 引用作为参数。使用 boost::signal 需要使用 boost::cref 来提供参考。我想避免这种情况。如果我如下创建一个 Signal 实例和一个 Slot 实例，是否保证参数作为 const refs 传递？

```
class Sens1: public Signal<void(const float&)>
{
  //...
};

class SpecSlot: public Slot<Sens1::Slot_type>
{
   void operator()(const float& f){/* ... */}
};

Sens1 sens1;
sens1.moveAndConnectSlot(std::unique_ptr<SpecSlot>(new SpecSlot));
float i;
sens1(i); 
```

2) boost::signal2 不需要槽类型（接收器不必从通用槽类型继承）。实际上可以连接任何函子或函数指针。这实际上是如何工作的？如果 boost::function 用于将任何函数指针或方法指针连接到信号，这可能很有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:25:37.247

**前提：**

如果您打算在大型项目或生产项目中使用它，我的第一个建议是**不要重新发明轮子**，而是使用 Boost.Signals2 或替代库。这些库并不像您想象的那么复杂，并且可能比您想出的任何*临时解决方案都更有效。*

这就是说，如果您的目标更像是一种*说教*，并且您想对这些事情进行一些尝试以弄清楚它们是如何实现的，那么我很欣赏您的精神并会尝试回答您的问题，但不是在给您一些问题之前*改进建议*。

**建议：**

首先，这句话令人困惑：

"*到目前为止，connect 和 disconnect 方法不是线程安全的。**但**我想确保插槽的每个实例（即处理器实例）不能被另一个线程使用。因此我决定使用`unique_ptr`并`std::move`实现插槽的移动语义”*。

以防万一您正在考虑它（您句子中的“但是”暗示了这一点），使用`unique_ptr`并不能真正使您免于保护您`vector`的插槽免受数据竞争的影响。`slots_vec`因此，无论如何，您仍然应该使用互斥锁来同步访问。

第二点：通过使用`unique_ptr`，您将插槽对象的独占所有权授予单个信号对象。如果我理解正确，您声称您这样做是为了避免不同的线程弄乱同一个插槽（这将迫使您同步对它的访问）。

我不确定从设计角度来看，这是一个合理的选择。首先，它不可能为**多个信号注册同一个插槽（我听说你反对你***现在*不需要那个，但坚持下去）。其次，您可能希望在运行时更改这些处理器的状态，以便调整它们对接收到的信号的反应。但是如果你没有指向它们的指针，你会怎么做呢？

就个人而言，我*至少*会选择`shared_ptr`，这将允许自动管理您的插槽的生命周期；如果你不想让多个线程搞乱这些对象，就不要让它们访问它们。只需避免将共享指针传递给这些线程。

但我会**更进一步**：如果您的插槽是*可调用对象*，就像看起来那样，那么我将完全放弃它`shared_ptr`，而是使用`std::function<>`将它们封装在`Signal`类中。也就是说，每次发出信号时，我都会保留一个要调用`vector`的对象。`std::function<>`这样，您将拥有更多的选项，而不仅仅是`Slot`为了设置回调而继承：您可以注册一个简单的函数指针，或者 的结果`std::bind`，或者只是您可以想出的任何仿函数（甚至是 lambda）。

现在您可能会看到这与 Boost.Signals2 的设计非常相似。请不要以为我没有忽略您最初的设计目标是拥有比这更纤薄的东西。我只是想向你展示为什么一个最先进的图书馆是这样设计的，以及为什么最终求助于它是有意义的。

当然，`std::function`在你的类中注册对象而不是智能指针`Signal`会迫使你关心你在堆上分配的那些仿函数的生命周期。但是，这**不一定**是`Signal`班级的责任。您可以为此目的创建一个包装器类，它可以保留指向您在堆上创建的函子的共享指针（如派生自 的类的实例`Slot`）并将它们注册到`Signal`对象中。通过一些调整，这还允许您*单独*注册和断开插槽，而不是“全部或全部”。

**答案：**

但是现在让我们假设您的要求是并且**将永远是**（后半部分真的很难预见）确实是这样的：

1.  您不需要为多个信号注册同一个插槽；
2.  您不需要在运行时更改插槽的状态；
3.  您不需要注册不同类型的回调（lambda、函数指针、仿函数...）；
4.  您不需要选择性地断开各个插槽。

那么这里是你的问题的答案：

Q1：*“[...] 如果我如下创建一个 Signal 实例和一个 Slot 实例，是否可以保证参数作为 const refs 传递？”*

A1：是的，它们将作为常量引用传递，因为沿着您的转发路径的所有内容都是常量引用。

Q2：*“[在 Boost.Signals2] 中实际上可以连接任何函子或函数指针。这实际上是如何工作的？如果 boost::function 用于将任何函数指针或方法指针连接到信号，这可能很有用”*

A2：它基于类模板（如果我没记错的话，`boost::function<>`它后来成为并且应该在 VS2010 中得到支持），它使用[类型擦除技术](https://stackoverflow.com/questions/5450159/type-erasure-techniques)来包装不同类型但签名相同的可调用对象。如果您对实现细节感到好奇，请查看[实现](http://www.boost.org/doc/libs/1_52_0/boost/function/function_template.hpp)或看看 MS 的实现（应该非常相似）。`std::function`[`boost::function<>`](http://www.boost.org/doc/libs/1_52_0/boost/function/function_template.hpp)`std::function<>`

我希望这对你有所帮助。如果没有，请随时在评论中提出其他问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-10T21:20:34.687

这是我的方法：

它比 boost 轻得多，但不处理聚合响应。

我认为将 shared_ptr 用于回调的所有者以及将 weak_ptr 用于信号引发器是很优雅的，这样可以确保回调仍然存在。

我也喜欢它如何自我清除已死的weak_ptr 回调。

```
template <typename... FuncArgs>
class Signal
{
    using fp = std::function<void(FuncArgs...)>;
    std::forward_list<std::weak_ptr<fp> > registeredListeners;
public:
    using Listener = std::shared_ptr<fp>;

    Listener add(const std::function<void(FuncArgs...)> &cb) {
        // passing by address, until copy is made in the Listener as owner.
        Listener result(std::make_shared<fp>(cb));
        registeredListeners.push_front(result);
        return result;
    }

    void raise(FuncArgs... args) {
        registeredListeners.remove_if([&args...](std::weak_ptr<fp> e) -> bool {
            if (auto f = e.lock()) {
                (*f)(args...);
                return false;
            }
            return true;
        });
    }
}; 
```

用法：

```
Signal<int> bloopChanged;

// ...

Signal<int>::Listener bloopResponse = bloopChanged.add([](int i) { ... }); 
```

# ruby-on-rails - 使用 sferik/rails_admin ，模型上的回形针附件字段根本不会出现在管理员中。

> ID：14459625
> 
> 赞同：1
> 
> 时间：2013-01-22T13:24:54.773
> 
> 标签：ruby-on-rails, paperclip, rails-admin

有什么简单的方法可以让模型的所有属性出现在管理页面上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:09:49.583

确保可以访问所有必要的属性、所有关联和`has_attached_file`模型，因为 rails_admin 将解析基于模型的表单。

例子：

**模型中的图像：**

```
class Photo < ActiveRecord::Base
  attr_accessible :title, :image
  has_attached_file :image, :styles => { :large => '950x400#', :medium => "250x200#", :small => "100x100>" }
end 
```

**具有关联的图像库：**

```
class Gallery < ActiveRecord::Base
  attr_accessible :title, :images_attributes
  has_many :images, :dependent => :destroy
  accepts_nested_attributes_for :images, :reject_if => lambda {|a| a[:content].blank? } , :allow_destroy => true
end 
```

和...

```
class Image < ActiveRecord::Base
  belongs_to :gallery
  attr_accessible :gallery_id, :file
  has_attached_file :file, :styles => { :medium => "300x300>", :thumb => "100x100>" }
end 
```

请注意：第二种方法将生成嵌套表单。我正在尝试为它找到解决方案，这样就可以解决您的问题。xD

希望能帮助到你！

干杯!

# javascript - 重复输入基本验证

> ID：14459635
> 
> 赞同：1
> 
> 时间：2013-01-22T13:25:23.267
> 
> 标签：javascript, jquery

我一直试图问这个问题，但是我的代码很长等等，我会再试一次。

不幸的是，我无法总结代码，但我只想知道我有大约 4 个返回 true 或 false 的验证函数，例如：

```
//Basic validation
    function validate_Email(email_values){
        var email_reg = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
        if(email_reg.test(email_values) == false) {
            console.log('invalid email');
            return false;
        } else {
            console.log('valid email');
            return true;
        };
    };

    function validate_Cell(cell_values){
        if (cell_values.toString().length != 10) {
            return false;
            console.log('invalid cell');
        }else if (cell_values.toString().length = 10) {
            return true;
            console.log('valid cell');
        };
    };

    function validate_Pass(pass_values){
        if (pass_values.toString().length != 13) {
            console.log($(pass_values).toString().length);
            console.log(pass_values);
            return false;
            console.log('invalid passport');
        }else if (pass_values.toString().length = 13) {
            console.log(pass_values);
            return true;
            console.log('valid passport');
        };
    };

    function validate_Code(code_values){
        if (code_values.toString().length != 4) {
            console.log($(code_values).toString().length);
            console.log(code_values);
            return false;
            console.log('invalid passport');
        }else if (code_values.toString().length = 4) {
            console.log(code_values);
            return true;
            console.log('valid codes');
        };
    };
//Basic Validation 
```

以下是如何验证电子邮件的示例：

```
$(document).on('blur', 'input.email', function() {
    var $this = $(this);
    var input_groups = $this.parent();
    $.each(input_groups , function(i){
        var inpg = input_groups[i];
        email_values = $.map($(inpg).children('input'), function(e,i){
            return $(e).val();
            }).join('');
            validate_Email(email_values, input_groups.parent().parent().parent());
        });
    }); 
```

我还有一些其他更复杂的验证，它们返回真或假。我只想知道如何不发送，如果有的话。

以下是我获取和发送数据的方式：

```
//Get Field Values
var result = {};
var dependants;
var mainmember;
var dep_counter = 0;
function getValues(){
    jQuery('div[class*="mainmember"]').each(function(k, v){
        mainmember = {};
        mainmember['name'] = $(v).find('.main_name').val();
        mainmember['surname'] = $(v).find('.main_surname').val();
        mainmember['id'] = ''; 
        $(v).find('.id').each(function(){
          mainmember['id'] += $(this).val(); 
        });
        mainmember['age'] = ''; 
        $(v).find('.age').each(function(){
          mainmember['age'] += $(this).val(); 
        });
        mainmember['gender'] = $(v).find('.gender').val();
        mainmember['townofbirth'] = $(v).find('.main_town').val();
        mainmember['email'] = $(v).find('.email').val();
        mainmember['contact'] = ''; 
        $(v).find('.cell').each(function(){
        mainmember['contact'] += $(this).val(); 
        });
        mainmember['passport'] = ''; 
        $(v).find('.pass').each(function(){
          mainmember['passport'] += $(this).val(); 
        });
        mainmember['postal'] = $(v).find('.main_postaladdress').val();

        mainmember['residential_code'] = ''; 
        $(v).find('.res_code').each(function(){
          mainmember['residential_code'] += $(this).val(); 
        });

        mainmember['postal_code'] = ''; 
        $(v).find('.post_code').each(function(){
          mainmember['postal_code'] += $(this).val(); 
        });

        mainmember['residential'] = $(v).find('.main_residential').val();
        result['mainmember'] = mainmember;
    });

    result['dependants'] = [];
    jQuery('div[class*="dependant"]').each(function(k, v){
        dep_counter++
        dependants = {};
        dependants['name'] = $(v).find('.name').val();
        dependants['surname'] = $(v).find('.surname').val();

        dependants['id'] = ''; 
        $(v).find('.id').each(function(){
          dependants['id'] += $(this).val(); 
        });

        dependants['age'] = ''; 
        $(v).find('.age').each(function(){
          dependants['age'] += $(this).val(); 
        });

        dependants['gender'] = $(v).find('.gender').val();
        dependants['townofbirth'] = $(v).find('.town').val();

        dependants['cell'] = '';
        $(v).find('.cell').each(function(){
          dependants['cell'] += $(this).val(); 
        });

        dependants['email'] = $(v).find('.email').val();

        dependants['passport'] = '';
        $(v).find('.pass').each(function(){
          dependants['passport'] += $(this).val(); 
        });

        dependants['relationship'] = $(v).find('.relationship:checked').val();
        result['dependants'].push(dependants);
    });
};
//Get Field Values

//submit function
jQuery('#submit').click(function(){
    getValues();
    var jsonData = JSON.stringify(result);
    jQuery.ajax({
        type: "POST",
        url: "mail.php",
        dataType: "json",
        beforeSend: function() {
        },
        data: {parameters: jsonData}
    });
    console.log('Sending error');
    console.log(jsonData);
});
//submit function 
```

这是完整的代码（警告它有很多代码）：http: [//jsfiddle.net/dawidvdh/tphjh/](http://jsfiddle.net/dawidvdh/tphjh/)

非常感谢任何帮助。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:34:26.837

## 编辑 1

使用您更新的代码，我的建议是在用户尝试提交表单时调用相同的验证逻辑。当出现问题时，您需要向用户提示，即用红色背景突出显示输入，或显示错误弹出窗口等。

例如，目前您验证电子邮件的代码仅在用户点击他们正在输入的电子邮件输入框时运行：

```
$(document).on('blur', 'input.email', function() {
    var $this = $(this);
    var input_groups = $this.parent();
    $.each(input_groups , function(i){
        var inpg = input_groups[i];
        email_values = $.map($(inpg).children('input'), function(e,i){
            return $(e).val();
        }).join('');
        validate_Email(email_values, input_groups.parent().parent().parent());
    });
}); 
```

首先，我会将这个逻辑重构为一个单独的方法，该方法可以在表单输入期间发生的实时验证和您将在表单提交期间添加的验证之间共享和重用：

```
function validate_Email_Input(el) {
    var $this = $(el);
    var input_groups = $this.parent();
    var isValid = true;
    $.each(input_groups , function(i){
        var inpg = input_groups[i];
        email_values = $.map($(inpg).children('input'), function(e,i){
            return $(e).val();
        }).join('');
        isValid = isValid &&
            validate_Email(email_values, input_groups.parent().parent().parent());
    });
    return isValid;
} 
```

然后您的实时电子邮件验证将转换为：

```
$(document).on('blur', 'input.email', function() {
    validate_Email_Input(this);
}); 
```

您可以在`submit`函数中运行相同的验证逻辑，如下所示：

```
var isValid = true;

$('input.email').each(function(i, el) {
    isValid = isValid &&
        validate_Email_Input(el);
}); 
```

在这里，我对所有电子邮件输入进行了相同的验证，并`isValid`根据它们是否都是有效的电子邮件输入来设置字段的值。通过在表单提交期间运行相同的验证逻辑，您可以将相同的格式应用于所有其他`on('blur'...)`或验证功能。`on('keyup'...)`然后使用我在下面提出的相同想法，仅在所有验证通过时才提交表单。

带有电子邮件验证的演示：http: [//jsfiddle.net/BQdQc/2/](http://jsfiddle.net/BQdQc/2/)

这应该让你开始。请注意，如果不必填写整个表格，您的逻辑可能不会这么简单。例如，如果不需要填写每个电子邮件地址，您可能需要调整代码以仅在同时填写名字/姓氏时才验证电子邮件。您必须根据您的要求仔细考虑此逻辑。希望这可以帮助！

* * *

在您的`submit`函数内部，您需要检查您的验证逻辑并在出现验证错误时取消提交。此外，您还需要提供某种形式的用户反馈，他们需要这些反馈来解决表单中的问题：

```
jQuery('#submit').click(function() {
    if (validate_Email(blah) && validate_Pass(blah) &&
        validate_Cell(blah2) && validate_Cell(blah3) ...) {

        // proceed with jQuery.ajax post

    } else {

        // display error message to user

    }
} 
```

您也可以通过这种方式制定它以避免构建一个巨大的`if`声明：

```
isValid = true;
isValid = isValid && validate_Email(blah);
isValid = isValid && validate_Cell(blah2);
if (!some_complicated_function(blah3))
    isValid = false;
isValid = isValid && validate_Pass(blah3);
// etc.

if (isValid) {
    // proceed with jQuery.ajax post
} else {
    // display error message to user
} 
```

# reporting-services - AX 2012 中的 ssrs 报告

> ID：14459637
> 
> 赞同：0
> 
> 时间：2013-01-22T13:25:30.363
> 
> 标签：reporting-services

我正在工作`ssrs reports`并`ax 2012`有一个查询。

要求是根据当年的月份和上一年的所有月份分别计算表中的`amountcur`值总和。要采取的日期是 谁能告诉我逻辑以及在哪里编写我所做的代码此报告使用查询。`CustTrans``TransDate`

任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:20:54.637

您可能希望根据日期创建一个组。您可以根据此公式为月份和组创建公式。可能您希望在 Crystal 中为每个月分组做一些事情。

# regex - 在 reqex 中使用 \w 的查询

> ID：14459638
> 
> 赞同：0
> 
> 时间：2013-01-22T13:25:32.580
> 
> 标签：regex, perl

下面的 perl 脚本将整个字符串打印为输出，但我期望输出为 Perl。我是 perl 和正则表达式的新手。有人可以解释一下为什么我没有得到预期的输出。

```
my $txt='I am learning Perl'; 
$txt=~/(\w+)$/;
print $txt; 
```

输出;

`I am learning Perl`

我期待的输出：

`Perl`

据我所知，输出应该是一个包含一个或多个字母数字字符的单词，并且模式的搜索从末尾开始。我不明白我在哪里错了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T13:29:36.503

正则表达式匹配不会修改变量。它根据上下文返回匹配列表或布尔值。

在列表上下文中使用它来捕获匹配项。

```
my $txt='I am learning Perl'; 
my ($match) = $txt=~/(\w+)$/;
print $match; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T13:29:26.750

`$txt`不被匹配操作修改。

但是您会得到一个新变量`$1`，其中包含第一个捕获组的内容（`'Perl'`在您的示例中包含。

# javascript - Node.js：如何在检索数据（块）时关闭响应/请求

> ID：14459644
> 
> 赞同：5
> 
> 时间：2013-01-22T13:25:52.723
> 
> 标签：javascript, node.js

我正在 node.js 中构建一个应用程序，它加载几个页面并分析内容。

因为 node.js 发送块我可以分析块。如果一个块包含例如索引，nofollow 我想关闭该连接并继续其余的。

```
var host  = 'example.com',
    total = '',
    http  = require('http');

var req = http.request({hostname: host, port: 80, path: '/'}, function(res) {
    res.on('data', function(chunk) {
        total += chunk;
        if(chunk.toString().indexOf('index,nofollow') == -1) {
            // do stuff
        } else {
            /*
             * WHAT TO DO HERE???
             * how to close this res/req?
             * close this request (goto res.end or req.end????
             */
        }
    }).on('end', function() {
        // do stuff
    });
}).on('error', function(e) {
    // do stuff
    console.log("Got error: " + e.message);
}); 
```

我唯一想不通的是退出该连接。或者停止检索数据，因为我不需要它..

req.end(); 不起作用..它继续检索数据/块..（在我的测试中我得到14个块，但在第一个块中我已经知道我不需要其他块，所以我想退出请求/回复）。

我现在有一个跳过分析其他块的布尔值，但在我看来，我最好跳过检索数据？

调用什么函数？还是因为它需要检索所有内容而不可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T13:39:35.423

我还没有测试它，把它放在你的`else`块中应该可以工作：`res.removeAllListeners('data');`

基本上你`res`是`EventEmitter`对象的孩子。通过调用`removeAllListeners('data')`它，所有绑定到`data`事件的处理程序将被删除，回调将不再执行。但是您仍然必须等待所有数据事件通过之前`end`或`error`在请求上发出事件。

另请阅读 nodejs [EventEmitter 文档](http://nodejs.org/api/events.html#events_emitter_removealllisteners_event)以获取更多信息。

### 更新：

您不妨尝试在 else 块中的对象上发出`end`或`close`事件，如下所示：或. [关于 event 的 clientRespone](http://nodejs.org/api/http.html#http_http_clientresponse)对象的文档说它是`res``res.emit('end');``res.emit('close');``end`

> 每个响应只发出一次。之后，响应中将不再发出“数据”事件。

# rust - 是否可以在运行时生成和执行 Rust 代码？

> ID：14459647
> 
> 赞同：28
> 
> 时间：2013-01-22T13:26:01.117
> 
> 标签：rust, algebraic-data-types

在运行时使用 C，我可以：

1.  创建函数的源代码，
2.  调用 gcc 将其编译为 .so (Linux)（或使用 llvm 等），
3.  加载.so，然后
4.  调用函数。

在 Rust 中是否可能发生类似的事情？

特别是我想使用代数数据类型，所以使用 Rust 功能的 C 子集是不够的。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-22T23:57:22.677

还没有，正式的，虽然它至少应该是可能的，没有太多的黑客攻击。最大的障碍是这些库还没有任何动态加载的能力。这是使其工作的潜在策略（在 Rust 的传入分支上）。

*   链接到 rustc crate 以编程方式驱动编译器。请注意，编译器不是线程安全的，因此一次只能运行一个进程内构建。
*   用 标记您要调用的函数`#[no_mangle]`。这应该（我没有尝试过）产生一个未损坏的符号名称，因此很容易找到。
*   创建到 dlopen/dlsym 的最小绑定
*   找到函数指针并将其不安全地转换为 Rust 闭包类型（当前定义在 中`sys::Closure`）。
*   调用闭包。

Rust 也有一个经过最低限度测试的 JIT 可以用于这种类型的事情，但它有一些主要的错误。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-11-08T10:10:58.623

可能还有其他一些可能的解决方案，但是我最近使用了以下解决方案，并且它一直适用于我的特定要求。

希望它对您也有用，或者它可以为您提供更复杂和更强大的解决方案的起点。

**main.rs**

```
use std::env;
use std::fs::File;
use std::io::prelude::*;
use std::process::Command;
use libloading::{Library, Symbol};

/// signature of function which should be called from plugin
type AddFunc = unsafe fn(isize, isize) -> isize;

/// Create a plugin file at runtime which will be converted to shared library
fn write_file()  -> std::io::Result<()> {
    let mut file = File::create("plugin.rs")?;
    file.write_all(b"fn main() {\n")?;
    file.write_all(b"\t#[no_mangle]\n")?;
    file.write_all(b"\tpub extern \"C\" fn add(a: isize, b: isize) -> isize {\n")?;
    file.write_all(b"\t\ta + b\n")?;
    file.write_all(b"\t}\n")?;
    file.write_all(b"}\n")?;
    Ok(())
}
/// compile plugin code file to shared library
/// todo 1) should allow to pass file path. 
///      2) should return path to generated shared library
fn compile_file() {
    let mut compile_file = Command::new("cmd");
    compile_file.args(&["/C", "rustc", "--crate-type", "cdylib", "plugin.rs"]).status().expect("process failed to execute");
}
/// call function from shared library
/// todo suffix should be selected based on OS.
fn call_plugin(a: isize, b: isize) -> isize {
    let lib = Library::new("plugin.dll").unwrap();
    unsafe {
        let func: Symbol<AddFunc> = lib.get(b"add").unwrap();
        let answer = func(a, b);
        answer
    }
}
fn main(){
    let args: Vec<String> = env::args().collect();
    if args.len() == 3 {
        write_file();
        compile_file();
        /// get argument from commandline to pass to function
        let a: isize = args[1].trim().parse().expect("number required");
        let b: isize = args[2].trim().parse().expect("number required");
        println!("{}+{}:{}",a,b,call_plugin(a,b));
    }
    else {
        println!("USAGE: main.exe NUM NUM");
    }
} 
```

**货运.toml**

```
[package]
name = "runtime_plugin"
version = "0.1.0"
authors = ["Manthan R Tilva"]
edition = "2018"

# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html

[dependencies]
libloading = "0.5.2" 
```

您也可以在[github中找到此代码](https://github.com/manthanrtilva/runtime_plugin/tree/master)

# jquery - Twitter Bootstrap for ASP.Net MVC 4 - jQuery 1.9 和 jQuery.Validate.js

> ID：14459651
> 
> 赞同：3
> 
> 时间：2013-01-22T13:26:09.680
> 
> 标签：jquery, twitter-bootstrap, asp.net-mvc-4

我在使用 ASP.Net MVC 的 Twitter Bootstrap 时遇到问题

```
Check out http://nuget.org/packages/twitter.bootstrap.mvc4 
```

使用 Visual Studio 2012，在一个空白的 MVC 4 模板中，我只需为“Install-Package twitter.bootstrap.mvc4.sample”运行 NuGet 包安装程序，其中包括“Install-Package twitter.bootstrap.mvc4”和 jQuery 1.9一个依赖。

一切都在编译时构建良好，但是一旦我调试项目，我就会收到一个严重的 javascript 错误：

[jquery-1.9.0.min.map 错误](http://i.imgur.com/S3N0eBa.png)

```
JavaScript critical error at line 1, column 11 in http://localhost:10277/Scripts/jquery-1.9.0.min.map
SCRIPT1004: Expected ';' 
```

如果我继续，那么我几乎在任何时候尝试与网页交互时都会收到来自网络浏览器的 javascript 错误：

[jQuery.Validate.js 错误](http://i.imgur.com/PYdS2Xn.png)

```
Unhandled exception at line 1152, column 5 in http://localhost:10277/Scripts/jquery.validate.js
0x800a138f - JavaScript runtime error: Unable to get property 'call' of undefined or null reference 
```

我不能用早期版本替换 jQuery 1.9，因为 nugget 不允许我卸载 jQuery 或在顶部添加早期版本。

我一直是一个字符串后端开发人员，但对前端的东西有点陌生。试图以正确的方式做到这一点，但似乎比应该做的要难。

有任何想法吗？我的出发点应该是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T13:36:56.957

尝试使用[jQuery 迁移插件](http://code.jquery.com/jquery-migrate-1.0.0.js)

# ruby-on-rails - 当嵌套记录已被删除时，如何忽略它？

> ID：14459654
> 
> 赞同：0
> 
> 时间：2013-01-22T13:26:15.780
> 
> 标签：ruby-on-rails, ruby-on-rails-3

*   unique_code 属于_to :community
*   unique_code 归属于：用户
*   用户 has_many :unique_codes
*   社区 has_many :unique_codes

`unique_codes`我想像下面这样获取所有内容

```
@unique_codes = @user.unique_codes
@unique_codes_count = unique_codes.count 
```

但是，有时社区已经被删除。假设用户有 10 个 unique_code，则已经删除了一个社区。

`@unique_codes_count`返回`10`，但我想要`9`的是活跃社区的 unique_code 数量。

我怎样才能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:34:29.210

尝试：

**UniqueCode 型号：**

```
class UniqueCode  
    belongs_to :community, :dependent => :destroy
end 
```

**控制器代码：**

```
 def method_name
     count = 0
     @unique_codes.each do |code|
        if code != nil
          count = count + 1
        end
     end
     puts "This count is giving me the number of unique codes which are not deleted for active community"+count.to_s
   end 
```

该计数将返回不具有空值的行数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:34:46.650

尝试：

添加 :dependent => :destroy 在社区模型中：

```
has_many :unique_codes, :dependent => :nullify

@unique_codes = @user.unique_codes.where("community_id IS NOT NULL")
@unique_codes_count = @unique_codes.count 
```

# sencha-touch - 使用 senchatouch 中的面板路由点击事件

> ID：14459659
> 
> 赞同：0
> 
> 时间：2013-01-22T13:26:26.760
> 
> 标签：sencha-touch

任何人都可以让我知道如何在面板的点击事件上重定向到 senchatouch 中的另一个页面。是否可以通过路由。任何示例都会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:51:24.247

Basically you need to fire and event on tap of a panel which should take care of creating new view and pushing it wherever required.

Here is what you can do

```
 Ext.getCmp('myPanelId').element.on({
        tap: function() { 
            console.log('panel tapped!'); 
            me.fireEvent("showAnotherPageCommand");
        }
    }); 
```

In your controller you should listen this event and do whatever is required like...

```
Ext.Viewport.add(Ext.create('MyApp.view.NewPanel')); 
```

I hope it helps.

BTW I totally agree with Josh, [What have you tried so far?](http://mattgemmell.com/2008/12/08/what-have-you-tried/) That should always be a part of your question.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:27:30.557

路由只是为了通过自定义 URL 访问应用程序中的任何视图而设计的。首先，您需要指定“页面”的含义：它是应用程序的特定视图还是只是另一个面板（可能由具有卡片布局的容器处理）。

你可能会更好：

*   实现一个控制器，该控制器将处理切换到要显示的视图/面板所需的处理

*   将点击事件链接到您在控制器中定义的函数（通过在触发点击时触发自定义事件或让控制器直接响应点击）。

# android - 如何在 Android 中使用 SQLite 数据库中的记录填充我的 ListView？

> ID：14459660
> 
> 赞同：0
> 
> 时间：2013-01-22T13:26:27.583
> 
> 标签：android, database, sqlite, listview, listactivity

我有一个 android 应用程序，我使用两个活动。第一个可以在 sqlite 数据库中创建一条记录，第二个可以在列表视图中显示此记录。现在的问题是在列表视图中显示我的记录；（

为了与数据库连接，我使用了一个类（DatanbankManager）。我显示我的代码。

我的 DatenbankManager 类：

```
public class DatenbankManager extends SQLiteOpenHelper {

    private static final String DB_Name = "Stundenplanname.db";
    private static final int DB_VERSION = 1;

    public static String STUNDENPLAN_CREATE; 

    private static final String KLASSEN_DROP = "DROP TABLE IF EXIST Stundenplan";

        //Konstruktor
        public DatenbankManager(Context context) {
            super(context, DB_Name, null, DB_VERSION);

        }

        //Methode wenn eine Datenbank erstellt werden muss
        @Override
        public void onCreate(SQLiteDatabase db) {

            db.execSQL(STUNDENPLAN_CREATE);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

                db.execSQL(KLASSEN_DROP); // Löscht Tabelle wenn nicht vorhanden 
                onCreate(db); //Erstellt Tabelle
        }

} 
```

我创建记录的第一个活动：

```
public class NewActivity extends Activity {

    private SQLiteDatabase mDatenbank;
    private DatenbankManager mHelper;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_new);

        mHelper = new DatenbankManager(this);

        mHelper.STUNDENPLAN_CREATE = "CREATE TABLE Stundenplan(" +
                "_id INTEGER PRIMARY KEY AUTOINCREMENT, "+
                "name TEXT NOT NULL)";

    }

    @Override
    protected void onPause() {
        super.onPause();
        mDatenbank.close();

        Toast.makeText(this, 
                getResources().getString(R.string.db_close),
                Toast.LENGTH_SHORT).show(); 
    }

    @Override
    protected void onResume() {

        super.onResume();
        mDatenbank = mHelper.getReadableDatabase(); 

        Toast.makeText(this, 
                getResources().getString(R.string.db_open),
                Toast.LENGTH_SHORT).show(); 

    }

    public void addNewPlan(View view)
    {
        EditText et = (EditText)findViewById(R.id.schultag_name);

        ContentValues werte = new ContentValues();
        werte.put("name",et.getText().toString());

        mDatenbank.insert("stundenplan", null, werte);

        Toast.makeText(this, 
                getResources().getString(R.string.add),
                Toast.LENGTH_SHORT).show(); 

        et.setText("");
    }

} 
```

我的问题活动！显示活动：

```
public class ShowActivity extends ListActivity {

    private SQLiteDatabase mDatenbank;
    private DatenbankManager mHelper;

    private static final String KLASSEN_SELECT_ROW = 
            "SELECT _id, name FROM Stundenplan";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_show);

        mHelper = new DatenbankManager(this);
        mDatenbank = mHelper.getReadableDatabase(); 

        ladeDaten(); 

    }

    @Override
    protected void onPause() {
        super.onPause();
        mDatenbank.close();

        Toast.makeText(this, 
                getResources().getString(R.string.db_close),
                Toast.LENGTH_SHORT).show(); 
    }

    @Override
    protected void onResume() {     
        super.onResume();
        mDatenbank = mHelper.getReadableDatabase(); 

        Toast.makeText(this, 
                getResources().getString(R.string.db_open),
                Toast.LENGTH_SHORT).show(); 

        ladeDaten();
    }

    private void ladeDaten() {
        Cursor KlassenCursor = mDatenbank.rawQuery(KLASSEN_SELECT_ROW, null); 
        startManagingCursor(KlassenCursor); 

        android.widget.SimpleCursorAdapter KlassenAdapter = new android.widget.SimpleCursorAdapter(this,
                android.R.layout.simple_list_item_1, 
                KlassenCursor, 
                new String[] {"name"},
                new int[] {
                android.R.id.text1
                });

        setListAdapter(KlassenAdapter);
    }

} 
```

这是我的 showActivity 中的 Layout xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#111111"
    android:baselineAligned="false"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="250dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginTop="20dp"
        android:text="Stundenplanname"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="#19630F"
        android:textSize="22sp" />

    <ListView
        android:id="@+id/listView1"
        android:layout_width="250dp"
        android:layout_marginTop="10dp"
        android:layout_marginBottom="10dp"
        android:layout_height="wrap_content"
        android:textColor="#19630F"
        android:layout_gravity="center" >

    </ListView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:42:26.137

如果您在 Activity 中扩展 ListActivity ，那么您的 ListView 必须有`android:id="@android:id/list"`而不是`android:id="@+id/listView1"`. 将您的 ListView xml 更改为：

```
<ListView
    android:id="@android:id/list"
    android:layout_width="250dp"
    android:layout_marginTop="10dp"
    android:layout_marginBottom="10dp"
    android:layout_height="wrap_content"
    android:textColor="#19630F"
    android:layout_gravity="center" /> 
```

# linux - 如何设置优先级以从互斥锁中获取锁？

> ID：14459664
> 
> 赞同：-1
> 
> 时间：2013-01-22T13:26:40.460
> 
> 标签：linux

我有两个线程，都在同一个核心上运行。我希望当第二个线程和第一个线程请求锁时，第二个线程只会立即从互斥锁获得锁，而第一个线程应该等待。我希望这个优先级应该给予第二个线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:31:33.380

由于两个线程都在同一个核心上运行，因此它们是时间分片的。这意味着在任何给定时刻，线程`A`或线程`B`都在执行（或两者都不执行）。要使锁以您描述的方式产生偏差，线程`A`需要能够预测线程的动作，并且如果线程即将需要它，`B`则推迟获取锁。`B`这是一个主要的蠕虫罐头。

我的建议是重新考虑你的设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:37:03.663

我怀疑任何特定线程都会在 SMP 系统中“获胜”，所以除非你在单核系统上，否则你不能这样做（它可能会或可能不会在单核情况下工作） ，取决于调度程序的工作方式）。

考虑：while(something) { mutex_lock(); ... 做事... mutex_unlock(); }

现在，如果我们有两个线程运行此代码，您最终将面临谁先获得“mutex_lock”的竞赛。最有可能的是，持有锁的线程将获胜，因为另一个线程必须首先由调度程序调度，其中运行循环的线程只有跳转到循环中的第一条指令。

因此，如果您需要两个线程同步工作，您需要使用某种逐步同步机制，其中一个线程在继续之前等待另一个线程“开始”。有几种方法可以做到这一点，但都需要使用共享 IPC 机制的两个线程。

如果你解释更多关于你的线程在做什么，可能有一个简单的方法来解决这个问题，或者它可能很复杂......

# ios - 内存映射图像在 iOS 上可行吗？

> ID：14459666
> 
> 赞同：1
> 
> 时间：2013-01-22T13:26:44.407
> 
> 标签：ios, image, memory, memory-mapped-files, memory-mapping

今天我醒来时想到了一个我认为是一个伟大的想法或一个完全愚蠢的想法。我需要编写一个使用大约 5k 像素正方形的巨大可滚动图像的 iOS 应用程序，由于内存限制，无法在 iOS 上加载如此大的图像。
我知道`CATileLayer`，但小滞后不符合我的要求。所以我认为可以对文件进行内存映射并从中读取图像。不幸的是它不起作用，这里是剪断的代码：

```
 NSError * __autoreleasing error = nil;
    NSData * mappedData = [NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"tigerbig" ofType:@"png"] options:NSDataReadingMappedAlways | NSDataReadingUncached error:&error];
    UIImage * thebigImage =[UIImage imageWithData:mappedData];
    self.imageView.image = thebigImage; 
```

在图像视图必须显示大图像之前，一切似乎都有效。因为我记得`UIImage`是一个很小的包装器`CGImage`，在需要渲染图像之前它不会加载图像。
可能在从 中创建图像的顺序中`NSData`，数据被复制到 RAM 中触发内存警告，而不是应用程序崩溃。
所以我也尝试过使用`ImageIO`and `CGDataProvider`s 进行各种组合，但没有任何成功。
现在我告诉自己，主要想法可能完全错误，有人能指出我正确的方向吗？

# gwt - GWT FlexTable 将调整大小检测为 Google 日历

> ID：14459671
> 
> 赞同：0
> 
> 时间：2013-01-22T13:26:47.630
> 
> 标签：gwt, google-calendar-api, flextable

我有一个非常简单的日历（固定 3 周）。每天我都需要一个或多个链接。如何模拟 Google 日历视图？添加链接时我主要有两个问题：

*   我无法修复列宽（在将链接插入为“ThisIsAVeryLongLinkInOnlyOneRow”之后，我的列被修改了

*   我无法检测到添加的事件何时会溢出我的单元格（我无法在日历上创建“N more”）。

我已经尝试了许多小部件，如 gwt-scheduler 或 gwt-cal，但它们对于我们的需要来说太多了，我们需要自定义太多。

# java - Spring Security 3.1 和 JSP 标签库不工作

> ID：14459672
> 
> 赞同：1
> 
> 时间：2013-01-22T13:26:56.317
> 
> 标签：java, spring-security, jsp-tags

Spring 安全文档（[http://static.springsource.org/spring-security/site/docs/3.1.x/reference/taglibs.html#d0e6875](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/taglibs.html#d0e6875)）说明如下：

您可以使用安全标签库授权通过 URL 进行访问，如下所示：

> `<sec:authorize url="/admin">` 此内容仅对被授权向“/admin” URL 发送请求的用户可见。 `</sec:authorize>`

要使用此标记，您的应用程序上下文中还必须有一个 WebInvocationPrivilegeEvaluator 实例。**如果您使用命名空间，则会自动注册一个**。

现在没事了...

我刚刚从 Spring Security 3.0 升级到 3.1

在 SS 3.0 中，使用基于 URL 的访问的 JSP 标记运行良好。当放入 3.1 罐子时，它停止工作。

我正在使用 Spring Security 命名空间。因此，我**应该**拥有使 JSP 标记工作所需的一切，但它们没有。有关配置的所有其他内容都适用于我的应用程序。**唯一**不起作用的是使用 JSP 标记的基于 URL 的访问。

我的配置如下所示（针对 SS 3.1 更新）。我错过了什么？

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:security="http://www.springframework.org/schema/security"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <security:global-method-security secured-annotations="enabled"/>

    <security:http pattern="/feed/**" create-session="stateless" entry-point-ref="digestEntryPoint" authentication-manager-ref="webAuthenticationManager" use-expressions="true">
        <security:http-basic/>
        <custom-filter ref="digestFilter" after="BASIC_AUTH_FILTER" />
    </security:http>

    <security:http name="webHttp" auto-config="true" use-expressions="true" authentication-manager-ref="webAuthenticationManager">
        <!-- Restrict URLs based on role -->
        <security:intercept-url pattern="/auth/login" access="permitAll" />
        <security:intercept-url pattern="/auth/autologin" access="permitAll" />
        <security:intercept-url pattern="/auth/logout" access="isAuthenticated()" />
        <security:intercept-url pattern="/auth/loginSuccess" access="" /> <!-- empty access tag.  The method checks for authenticated user -->

        <security:intercept-url pattern="/admin/**" access="hasRole('ROLE_ADMIN')" />

        <!-- Override default login and logout pages -->
        <security:form-login login-page="/auth/login" 
                             login-processing-url="/auth/loginProcess" 
                             default-target-url="/auth/loginSuccess" 
                             authentication-failure-url="/auth/login?error=1" />
        <security:logout logout-url="/auth/logout" logout-success-url="/" />
        <security:remember-me key="remembermekey" user-service-ref="userDetailsService"/>
        <security:session-management invalid-session-url="/auth/login"/>

    </security:http>

    <beans:bean id="digestFilter" class="org.springframework.security.web.authentication.www.DigestAuthenticationFilter">
        <beans:property name="userDetailsService" ref="userDetailsService" />
        <beans:property name="authenticationEntryPoint" ref="digestEntryPoint" />
    </beans:bean>
    <beans:bean id="digestEntryPoint" class="org.springframework.security.web.authentication.www.DigestAuthenticationEntryPoint">
        <beans:property name="realmName" value="Contacts Realm via Digest Authentication" />
        <beans:property name="key" value="acegi" />
    </beans:bean>    

    <security:authentication-manager id="webAuthenticationManager" alias="webAuthenticationManager">
        <security:authentication-provider user-service-ref="userDetailsService">
            <security:password-encoder hash="md5"/>
        </security:authentication-provider>     
    </security:authentication-manager>

</beans:beans> 
```

# java - 如何在 Java 中获取变量名？

> ID：14459674
> 
> 赞同：3
> 
> 时间：2013-01-22T13:27:02.343
> 
> 标签：java, reflection

> **可能重复：**
> [Java 反射：如何获取变量的名称？](https://stackoverflow.com/questions/744226/java-reflection-how-to-get-the-name-of-a-variable)

我已经找到了关于这个主题的各种讨论，但从来没有任何令人满意的答案..

```
A anyVariableName = new A(); 
```

如何获取变量的名称`anyVariableName`并获取字符串`"anyVariableName"`？这在Java中可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T13:30:42.423

如果`anyVariableName`是局部变量，则不能。如果是字段，请使用`Class#getField()`or `Class#getDeclaredField()`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-22T13:36:51.310

存储局部变量名称的唯一位置是源（您可以解析）或调试信息（如果已包含，您可以从字节码中获取）

如果它是一个字段，如果您不知道名称，则可以使用 Class.getDeclaredFields()。

# google-analytics - iframe 上的谷歌分析跟踪

> ID：14459675
> 
> 赞同：10
> 
> 时间：2013-01-22T13:27:03.943
> 
> 标签：google-analytics

如何使用 Google Analytics 跟踪 iframe 中的网址？

我所做的是将此代码放入 iframe 中，就像我在“顶部”窗口中所做的那样。但是 iframe 没有在分析中跟踪？

这应该有效，但它没有.. :(

# 框架

```
<html>
    <head>
        <script type="text/javascript">
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-35706930-1']);
            _gaq.push(['_trackPageview']);

            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
        </script>
    </head>

    <body></body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T17:29:57.470

从表面上看，它没有理由不工作。但是 GA 将根据 iframe URL 而非父 URL 进行跟踪，因此如果 iframe 托管在其他域上，您可能会遇到问题，具体取决于您在 GA 中的设置。检查以确保您使用的是正确的帐户#。检查以确保您没有任何配置文件过滤器（例如“仅包含 xyx.com”域）或您的设置中排除域等的任何其他内容。

另请注意，如果 iframe 位于不同的域中，您将在一般跟踪会话和访问（或）指标方面遇到问题。为了解决这个问题，您需要实施额外[的跨域跟踪](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite)。没有这个不会导致没有数据出现，所以这本身不是根本问题。

# android - 忽略 Android lint 中的几个警告

> ID：14459679
> 
> 赞同：25
> 
> 时间：2013-01-22T13:27:10.553
> 
> 标签：android, android-resources, lint

我知道我可以忽略 Lint 中带有属性的规则`tools:ignore`

我的困难是我想忽略几个规则。就我而言，对于 Google 分析`ga_trackingId`，我想忽略*TypographyDashes*和*MissingTranslation*

我试过没有成功

```
<resources tools:ignore="TypographyDashes|MissingTranslation" xmlns:tools="https://schemas.android.com/tools" > 
```

和

```
<resources tools:ignore="TypographyDashes,MissingTranslation" xmlns:tools="https://schemas.android.com/tools" > 
```

和

```
<resources tools:ignore="TypographyDashes MissingTranslation" xmlns:tools="https://schemas.android.com/tools" > 
```

我现在没有主意了。如何在 中指定多个值`tools:ignore`？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-05-29T08:33:05.090

您需要使用逗号分隔的列表，但不能有空格。

例子：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools" // required to work
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:ignore="contentDescription,SpUsage" > // comma separated list. NO blanks allowed! 
```

对于有效选项的列表，您可以从命令行获取列表或使用 throrin19 提到的 eclipse lint 错误检查列表：

```
lint --list > lint_options.txt 
```

请参阅[lint 文档](http://developer.android.com/tools/help/lint.html#config_keywords)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-24T11:25:13.260

这里的问题是在 xml 资源文件中使用了错误的命名空间 uri；

```
xmlns:tools="https://schemas.android.com/tools" 
```

这应该是`http://...`协议。这在[issue 43070中有更详细的讨论](http://code.google.com/p/android/issues/detail?id=43070)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T13:29:51.370

你用过eclipse还是intelliJ？

在 Eclipse 中，转到 Window -> Preferences -> Android -> Lint Error Checking

![在此处输入图像描述](../Images/a5e3384700d00dfe4e00c494b0d82960.png)

玩得开心;-)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-30T22:49:27.827

您可以在特定字符串上放置多个注释以忽略多个 lint 检查：

*字符串.xml*

```
<?xml version="1.0" encoding="utf-8"?>
<resources>    

    <!--suppress MissingTranslation -->
    <!--suppress TypographyDashes -->
    <string name="some_string">ignore my translation</string>
    ...

</resources> 
```

[http://tools.android.com/tips/lint/suppressing-lint-warnings](http://tools.android.com/tips/lint/suppressing-lint-warnings)

# javascript - JavaScript - 检查绝对坐标（左、上、右、下）是否将在当前视口上可见

> ID：14459684
> 
> 赞同：0
> 
> 时间：2013-01-22T13:27:32.777
> 
> 标签：javascript

嘿伙计们，我对将来要创建的元素有一个绝对的位置。我想检查元素是否在当前视口上完全可见。我知道`getBoundingClientRect`如果元素在页面上呈现，我可以使用，但它不是，也不能不是。有没有一种方法可以检测给定的绝对坐标（左、上、下、右）是否会在当前视口上可见？提前致谢。

编辑：

到目前为止我的解决方案 - 插入一个元素`visibility: hidden`并使用`getBoundingClientRect`，我只是想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:00:50.153

如果你有这个未渲染元素的绝对坐标（即：你可以从 JS 变量中提取它们，或者从某个地方读取它们，或者对它们进行硬编码，甚至编写一个脚本来从`<style>`页面上的标签中读取它们...... )，那么您可以执行以下操作：

```
var viewport = {
    x : 0,
    y : 0,
    width : 0,
    height : 0,
    update : function () {
        this.x = document.body.scrollLeft || document.documentElement.scrollLeft;
        this.y = document.body.scrollTop  || document.documentElement.scrollTop;
        this.width  = document.documentElement.clientWidth;
        this.height = document.documentElement.clientHeight;
    }
}; 
```

现在您应该能够检查元素的 x,y,width,height 与视口的 x,y,width,height 之间的交叉点。

每当用户滚动时，只需点击`viewport.update();`.

我会这样说：

这种方法*应该*是相当跨浏览器兼容的，但我真的不能对 IE6 做出任何保证——尤其是在 Quirksmode 中（`<!doctype>`在 html 文件中没有）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:57:16.493

看看这个：[https ://stackoverflow.com/a/1823700/1060487](https://stackoverflow.com/a/1823700/1060487)

```
function alertSize() {
  var myWidth = 0, myHeight = 0;
  if( typeof( window.innerWidth ) == 'number' ) {
    //Non-IE
    myWidth = window.innerWidth;
    myHeight = window.innerHeight;
  } else if( document.documentElement && ( document.documentElement.clientWidth || document.documentElement.clientHeight ) ) {
    //IE 6+ in 'standards compliant mode'
    myWidth = document.documentElement.clientWidth;
    myHeight = document.documentElement.clientHeight;
  } else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {
    //IE 4 compatible
    myWidth = document.body.clientWidth;
    myHeight = document.body.clientHeight;
  }
  window.alert( 'Width = ' + myWidth );
  window.alert( 'Height = ' + myHeight );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T13:34:54.370

检查 screen.height 和 screen.width 并将其与元素的尺寸进行比较

# c# - 更改除单击按钮之外的所有按钮背景

> ID：14459688
> 
> 赞同：3
> 
> 时间：2013-01-22T13:28:00.470
> 
> 标签：c#, winforms, buttonclick

我正在处理一个有很多按钮的表单。当用户单击一个按钮时，背景应该会改变颜色。如果他们单击表单上的另一个按钮，它的背景应该会改变颜色，并且之前的按钮颜色应该返回到原始颜色。

我可以通过在每个按钮中硬编码来做到这一点，但是这个表单有很多按钮。我相信必须有一种更有效的方法来做到这一点

到目前为止我有这个

```
foreach (Control c in this.Controls)
{
    if (c is Button)
    {
        if (c.Text.Equals("Button 2"))
         {
             Btn2.BackColor = Color.GreenYellow;
         }
         else
         {

         }
    }
} 
```

我可以让 Btn2 改变背景。我将如何更改表单中所有其他按钮的背景。任何想法我可以如何做到这一点而不必对每个按钮进行硬编码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T13:32:32.323

下面的代码将在不考虑表单上的按钮数量的情况下工作。只需将该`button_Click`方法设置为所有按钮的事件处理程序。当你点击一个按钮时，它的背景会改变颜色。当您单击任何其他按钮时，该按钮的背景将更改颜色，并且先前着色的按钮的背景将恢复为默认背景颜色。

```
// Stores the previously-colored button, if any
private Button lastButton = null; 
```

...

```
// The event handler for all button's who should have color-changing functionality
private void button_Click(object sender, EventArgs e)
{
    // Change the background color of the button that was clicked
    Button current = (Button)sender;
    current.BackColor = Color.GreenYellow;

    // Revert the background color of the previously-colored button, if any
    if (lastButton != null)
        lastButton.BackColor = SystemColors.Control;

    // Update the previously-colored button
    lastButton = current;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:31:27.317

只要您没有任何控制容器（例如面板），这将起作用

```
foreach (Control c in this.Controls)
{
   Button btn = c as Button;
   if (btn != null) // if c is another type, btn will be null
   {
       if (btn.Text.Equals("Button 2"))
       {
           btn.BackColor = Color.GreenYellow;
       }
       else
       { 
           btn.BackColor = Color.PreviousColor;
       }
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-14T05:19:09.790

如果您的按钮在面板内，请执行以下代码，在 foreach 中，您将获得 pnl2Buttons 面板内的所有按钮，然后尝试传递要更改背景的按钮的文本名称，其余按钮将具有 SeaGreen颜色。

```
foreach (Button oButton in pnl2Buttons.Controls.OfType<Button>())
{
   if (oButton.Text == clickedButton)
   {
       oButton.BackColor = Color.DodgerBlue;
   }
   else
   {
       oButton.BackColor = Color.SeaGreen;
   }
} 
```

# html - Bootstrap 弹出框隐藏换行符

> ID：14459691
> 
> 赞同：65
> 
> 时间：2013-01-22T13:28:09.720
> 
> 标签：html, twitter-bootstrap, popover

我正在使用如下的 html 代码来显示引导弹出窗口

```
<a data-original-title="" data-content="Hi,
           Welcome !

           Sincerely,
             programmer
           "
   data-placement="bottom">
    content
</a> 
```

我初始化弹出框如下

```
$(this).popover({
            html:true
        }); 
```

一切正常，但问题是数据内容中可用的内容没有与空格一起显示......它删除了所有新行并将其显示在单行中......我该如何克服这个......

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2013-01-22T13:30:40.590

您需要`<br/>`在 html 中使用换行符或使用`<pre>`标签

确保`data-html="true"`属性存在。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2014-11-21T09:57:59.790

您可以使用`white-space: pre-wrap;`在格式中保留换行符。无需手动插入 html 元素。

```
.popover {
    white-space: pre-wrap;    
} 
```

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2015-01-06T14:52:42.223

要添加到 Arun P Johny 的解决方案，如果您发现值中的`<br />`标签在`data-content`页面上的弹出框内容中呈现为纯文本，请添加附加属性`data-html="true"`，如下所示：

```
<a data-content="Hi,<br />Welcome !<br /><br />Sincerely,<br />programmer"
        data-html="true"
        data-placement="bottom">
    content
</a> 
```

请注意，使用`data-html="true"`确实会引入[XSS 攻击](https://www.owasp.org/index.php/Cross-site_Scripting_%28XSS%29)的潜在漏洞；不要将它与未经处理的用户输入一起使用。

文档：[https ://getbootstrap.com/docs/3.3/javascript/#popovers-options](https://getbootstrap.com/docs/3.3/javascript/#popovers-options)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-07-22T07:41:26.753

我设法通过在我希望换行的弹出框文本中添加 \n 并将以下内容添加到我的样式表中来实现此功能：

```
.popover {
    white-space: pre-line;    
} 
```

谢谢大家的帮助！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-02T22:29:29.010

我们设法使用 white-space: pre-wrap 的样式，但我们发现它为整个弹出窗口添加了额外的空白。相反，我们将此样式添加到 popover-content。

```
.popover-content {
    white-space: pre-wrap;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-11-24T10:08:44.597

您只需将 data-html="true" 添加到您的标签中，然后帮助文本中的所有 html 标签都可以正常工作，

# iphone - ios-问题与 sqlite 数据库路径

> ID：14459698
> 
> 赞同：-1
> 
> 时间：2013-01-22T13:28:37.283
> 
> 标签：iphone, cocoa-touch, xcode4.3

这是我的代码：它适用于其他方法，但仅在此处创建问题。在这里我无法插入数据...这里有什么问题？代码之前工作得很好。

```
-(void) insertleadership {
[self trunleadership];
// Setup the database object
sqlite3 *database;
NSLog(@"Inside leadership");
if(sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK) {
    // Setup the SQL Statement and compile it for faster access
    // NSString *query=[stringWithFormat: @"select name,password from customer where name=%@ and password=%@",*login_name,*login_pass];
    sqlite3_stmt *compiledStatement;
    for(int i=0;i&lt;ltitle.count;i++)
    {
        // NSString *insertSQL = [NSString stringWithFormat:@"insert into category values(\'aa\',\'bb\',\'cc\',\'cc\',\'cc\')"];
        // NSLog(@"Inside leadership");
        NSString *insertSQL = [NSString stringWithFormat:@"insert into leadership values(\'%@\',\'%@\',\'%@\',\'%@\',\'%@\',\'%@\',\'%@\',\'%@\',\'%@\',\'%@\',\'%@\',\'%@\',\'%@\')",[ltitle objectAtIndex:i],[ldate objectAtIndex:i],[lfunction objectAtIndex:i],[lservice objectAtIndex:i],[lsubservice objectAtIndex:i],[labstract objectAtIndex:i],[ldoctype objectAtIndex:i],[lcreated objectAtIndex:i],[lcorridor objectAtIndex:i],[lfeature objectAtIndex:i],[lindiastory objectAtIndex:i],[lpublish objectAtIndex:i],[ltopic objectAtIndex:i]];
        // NSLog(@"SQL Query for leader:%@",insertSQL);
        const char *insert_stmt = [insertSQL UTF8String];
        // sqlite3_prepare_v2(databaseName, insert_stmt, -1, &statement, NULL);
        sqlite3_prepare_v2(database, insert_stmt, -1, &compiledStatement, NULL);
        if(sqlite3_step(compiledStatement) == SQLITE_DONE){
            NSLog(@"Insert into leadership successful");
        }
        else {
            NSLog(@"Unable to insert in leadership");
        }
        // Release the compiled statement from memory
        sqlite3_finalize(compiledStatement);
    }
    sqlite3_close(database);
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:43:17.133

如果您在代码中添加一些报告，sqlite 本身会告诉您为什么它没有打开：

```
if(sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK)
{
    // Do something
    splite3_close(database);
}
else
{
    NSLog(@"Failed to open database '%@': %s", databasePath, sqlite3_errmsg(database));
} 
```

@HotLicks 也是正确的，因为您应该在访问它之前将数据库从应用程序包中复制出来，除非您以只读方式打开它（通过使用`sqlite3_open_v2()`并`SQLITE_OPEN_READONLY`作为标志之一传入）。

# c# - 如何解决这两个按键冲突？

> ID：14459699
> 
> 赞同：1
> 
> 时间：2013-01-22T13:28:37.643
> 
> 标签：c#, forms, class, events, event-handling

我有一个我正在努力解决的问题。我想使用我的键盘向左、向右、向上或向下并以对角线方式移动图像。我在网上搜索并发现，要使用 2 个不同的键，我需要记住前一个键，因此我使用的是 bool 字典。

在我的主 Form 类中，KeyDown 事件如下所示：

```
private void Form1_KeyDown(object sender, KeyEventArgs e)
{
    baseCar.carAccelerate(e.KeyCode.ToString().ToLower());
    carBox.Refresh(); //carbox is a picturebox in my form that store the image I want to move.
} 
```

我的 KeyUp 事件：

```
private void Form1_KeyUp(object sender, KeyEventArgs e)
{
    baseCar.carBreak(e.KeyCode.ToString().ToLower());
} 
```

我的绘画活动：

```
private void carBox_Paint(object sender, PaintEventArgs e)
{
    e.Graphics.DrawImage(Car, baseCar.CharPosX, baseCar.CharPosY); // Car is just an image
} 
```

还有我的 baseCar 课程：

```
private Dictionary KeysD = new Dictionary(); // there is a method to set the W|A|S|D Keys, like: KeysD.Add("w",false)

public void carAccelerate(string moveDir)
{       
    KeysD[moveDir] = true;
    moveBeta();
}
public void moveBeta()
{
    if (KeysD["w"])
    {
        this.CharPosY -= this.carMoveYSpeed;
    }
    if (KeysD["s"])
    {
        CharPosY += carMoveYSpeed;
    }
    if (KeysD["a"])
    {
        CharPosX -= carMoveXSpeed;
    }
    if (KeysD["d"])
    {
        CharPosX += carMoveXSpeed;
    }
}
public void carBreak(string str)
{
    KeysD[str] = false;
} 
```

无论如何它都有效，但我的问题是我无法回到第一个按下的键，例如：

我按 W 向上移动，然后按 D 键进入对角线，但是当我释放 D 键时它不会再次向上移动，因为 KeyDown 事件是“死的”并且不会再次调用 carAccelerate() 方法..我可以不知道如何解决它..

任何人都可以帮助我吗？也许有更好的方法来处理密钥？我愿意接受任何想法！我希望你能理解，我的英语不是最好的：S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:02:37.633

通常，您不会直接为这类事情处理关键事件。相反，您会跟踪当前按下的键。物理计算是在一定的时间间隔内完成的，这可以用计时器来完成。下面快速而肮脏的例子。但是，这不是您应该使用 WinForms 尝试的那种事情。

```
 private const int ACCELERATION = 1;

    private HashSet<Keys> pressed;
    private int velocityX = 0;
    private int velocityY = 0;

    public Form1()
    {
        InitializeComponent();
        pressed = new HashSet<Keys>();
    }

    private void Form1_KeyDown(object sender, KeyEventArgs e)
    {
        pressed.Add(e.KeyCode);
    }

    private void Form1_KeyUp(object sender, KeyEventArgs e)
    {
        pressed.Remove(e.KeyCode);
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        car.Location = new Point(
            car.Left + velocityX,
            car.Top + velocityY);
        if (pressed.Contains(Keys.W)) velocityY -= ACCELERATION;
        if (pressed.Contains(Keys.A)) velocityX -= ACCELERATION;
        if (pressed.Contains(Keys.S)) velocityY += ACCELERATION;
        if (pressed.Contains(Keys.D)) velocityX += ACCELERATION;
    } 
```

# ipad - Arduino 作为 iPad 上的键盘

> ID：14459700
> 
> 赞同：1
> 
> 时间：2013-01-22T13:28:42.060
> 
> 标签：ipad, keyboard, arduino

我正在尝试使用[makey makey](https://www.sparkfun.com/tutorials/378)（基于 Arduino Leonardo 的设备）作为 iPad 的键盘。我知道它[已经完成了](http://www.janefarrall.com/blog/2012/12/18/using-usb-switch-interfaces-with-switch-accessible-apps-on-your-ipad/)，但我无法重现它。我的猜测是某些版本的 iPad 无法识别此设备。

由于我可以使用 USB 键盘并且我知道无法识别鼠标，因此我想以“仅识别为键盘”的方式对 makey makey 进行编程（原始设备可以用作鼠标和作为键盘）。我对Arduino很陌生，有人可以给我提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:22:56.030

一位同事帮助我解决了这个问题，我们能够解决它。我们刚刚删除了关于[CDC](http://en.wikipedia.org/wiki/USB_communications_device_class)的这一行：

> #define CDC_ENABLED

在文件“USBDesc.h”中（在 github 上可用的文件夹中：“firmware/Arduino/hardware/MaKeyMaKey/cores”）。这样做之后，在设备上编译代码时出现问题，因为 Arduino 不再识别。您仍然可以将代码添加到 Arduino，但您必须在编译开始后重置设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-24T04:13:01.477

使用 ProMicro 5v 和“Case Logic 2.0 USB 集线器”和相机套件，我能够在不修改“USBDesc.h”文件的情况下获得 iPad 识别的编程键盘命令。

ProMicro 内置了与 Arduino Leonardo 非常相似的 HID 仿真支持。除了“USB IO Board: The connected device is not supported”错误外，该设备显然是非官方支持的。我相信这与集线器有关。

在我的 arduino 代码中，我使用“Keyboard_ascii.h”库并使用 Keyboard.print 和 Keyboard.write 命令将按键命令/文本发送到 iPad。

# ajax - 空的“期望：”标题是否意味着什么？

> ID：14459704
> 
> 赞同：10
> 
> 时间：2013-01-22T13:28:51.233
> 
> 标签：ajax, web, httpserver, http-1.1, http-status-code-100

许多库`Expect: 100-continue`默认包含所有 HTTP 1.1 POST 和 PUT 请求。

我打算通过删除客户端上的 100-continue 机制来减少感知延迟，因为我知道立即发送数据的费用低于等待 100-continue 的往返，即短请求。

当然，我仍然想要 HTTP 1.1 的所有其他强大功能，因此我只想杀死`Expect: 100-continue`标头。我有两个选择：

*   完全删除期望标头，或
*   发送空的期望标头，`Expect:\r\n`

两者之间有什么区别吗？

任何软件可能会因其中之一而中断？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-22T13:53:28.470

如果您删除标头，什么*都*`Expect`不会中断，但我知道 Microsoft IIS 过去曾遇到过问题`100 Continue`。例如，[IIS5 总是发送 100 个继续响应](http://forums.iis.net/p/1162153/1922653.aspx)。所以，我想知道它在库中的至少一些用途是否可能是为了解决服务器中类似的破坏行为。

许多库似乎设置了这个标头，然后实际上并没有`100 Continue`正确处理 - 例如，它们开始立即发送请求正文而不等待 a`100 Continue`然后不处理服务器可能在它们完成之前发送回任何 HTTP 错误代码的事实发送请求正文（第一部分可以，第二部分已损坏 - 请参阅我的回答后面）。这使我相信有些作者只是从别处复制了它，而没有完全理解[其中的微妙之处](http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.2.3)。

我看不出包含空白`Expect`标题的任何理由 - 如果您不打算包含`100-continue`（或其他一些`Expect`子句），则完全省略标题。包含它的唯一原因是解决损坏的网络服务器，但我不知道有任何行为以这种方式运行。

最后，如果您只是想减少往返延迟，在我看来，简单地立即开始传输请求正文实际上并不会与 RFC*不一致。*您不应该无限期地等待发送请求正文（根据[RFC](http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.2.3)），因此您的行为符合规范 - 无论如何发送之前的超时时间为零。

您必须知道，如果服务器`100 Continue`已经收到一些请求正文，则服务器可以自由不发送响应，因此您必须处理发送`100 Continue`的服务器、不发送任何内容并等待完整请求的服务器以及立即发送的服务器任何 HTTP 错误代码（可能是 417，但更可能是通用 4xx 代码）。这样，您的短请求不应该有任何开销（除了`Expect`标题），但您不必等待`100 Continue`. `poll()`当然，要使这种方法发挥作用，您需要以一种允许您在服务器返回错误代码时立即中断请求的方式进行操作（例如，使用or的非阻塞 IO `select()`）。

以这种方式做事可能有助于使您的代码在小型和大型请求之间更加一致，同时减少延迟。缺点是它可能不是 RFC 作者的想法，即使它没有明确违反任何要求。此外，如果您还没有进行非阻塞 IO 或类似操作，它可能会使您以后的代码更加复杂。

# eclipse - 在不修改 config.ini 的情况下向已安装的 eclipse rcp 软件添加插件

> ID：14459705
> 
> 赞同：0
> 
> 时间：2013-01-22T13:28:51.563
> 
> 标签：eclipse, plugins, config, rpc

我有一个安装的 Eclipse RPC 应用程序，我想添加一个我刚刚编写的插件。为了实现这一点，我将新插件复制到我的应用程序的插件文件夹中，并将插件添加到`config.ini`在`\configuration\config.ini`.

这行得通，但我不喜欢弄乱配置文件。有没有办法让新插件工作而不将它们添加到列表中，或者我必须为我创建的每个插件都这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:30:11.940

您是否尝试将其导出为插件并将生成的 jar 文件放入 Eclipse RCP 的 dropins 文件夹中？

# c++ - 获取 QuickFix::Field::OrdType 的值？

> ID：14459706
> 
> 赞同：0
> 
> 时间：2013-01-22T13:28:56.143
> 
> 标签：c++, quickfix

我`QuickFix.dll`从下载`quickfixengine.org`

当我声明一个属于 namespace 的对象时`QuickFix::Fields`，我无法获得其对应的基值（我的意思是 char 值`OrdType`，字符串值`OrderID`等）。因为没有与它们关联的属性。

有没有其他方法可以达到同样的效果？

代码是：

```
......
QuickField::Fields::OrdType ordType;
message.Get(OrdType);//message is a NewOrderSingle 
                     //type object defined prevviously in the code
                     //Now i wish to get the value contained in "ordType" but it has no
                     //properties to access its data member(s) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:30:40.233

这是你想看到的：

```
QuickField::Fields::OrdType ordType;
message.get(ordType);
char char_value = ordType.getValue(); 
```

建议：查看[课程文档](http://quickfixengine.org/quickfix/doc/html/hierarchy.html)。字段基类是`FIX::FieldBase`，它派生为`FIX::StringField`、`FIX::BoolField`、`FIX::IntField`等。所有这些都有一个`getValue()`函数，该函数返回转换为正确数据类型的原始字段值。

另一种方法（不太合法）是使用`Message::getField(int)`which 将字段的值作为字符串返回。所以你可以使用`std::string str_value = message.get(40);`，但你会有一个字符串而不是一个 char （或 int 或 bool 或其他）。

# c - 在 C11 或 C99 中浮点到有符号整数转换时的饱和行为？

> ID：14459710
> 
> 赞同：5
> 
> 时间：2013-01-22T13:29:06.510
> 
> 标签：c, floating-point, integer, overflow

我只是想知道 C11 或 C99 在这方面提供了什么保证（如果有的话）。

根据经验，似乎当我将浮点值（无论其精度如何）转换为有符号整数时，只要浮点值在该有符号整数范围内不可表示，即使在事件中，我也会得到“很好”的饱和度浮点值是正负无穷大（但我不知道也不关心 NaN 的情况）。

这里有一个微妙的问题，即舍入行为的差异在某些情况下可能会导致饱和，但在其他情况下不会，特别是当我们正好处于饱和边界的边缘时。我对此并不担心。我的问题是，一旦浮点机器决定了它需要输出的整数（取决于平台），但如果所述整数位于目标有符号整数范围之外（与平台无关） )，无论饱和度是否由规范保证。

我的默认理解是，我所看到的只是底层硬件的便利，并且由于未定义有符号溢出，因此无法保证这种行为。我希望我错了，因为我讨厌签名溢出并试图避免它。所以是的，我也对转换为无符号整数的情况感兴趣。

当我在它的时候，负0呢？这个值是否保证转换为整数零，即使在某种意义上您可以将其视为负 epsilon，通常会四舍五入为 -1？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T13:37:23.413

> ## 6.3.1.4 实数浮点数和整数
> 
> 当实浮点类型的有限值转换为_Bool 以外的整数类型时，小数部分被丢弃（即，该值被截断为零）。如果整数部分的值不能用整数类型表示，则行为未定义。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T00:53:41.853

**phresnel**已经很好地回答了您问题的主要内容。要记住的其他一些细节：

> 所以是的，我也对转换为无符号整数的情况感兴趣。

unsigned 的情况也好不到哪里去。C11 中的脚注 61（C99 中存在相同的脚注）：

> 将整数类型的值转换为无符号类型时执行的求余运算不需要在将实浮点类型的值转换为无符号类型时执行。因此，可移植实浮点值的范围是（-1，Utype_MAX+1）

幸运的是，这对于有符号和无符号转换都很容易解决；如果您需要饱和度，只需在转换之前钳制您的输入。

> 当我在它的时候，负0呢？这个值是否保证转换为整数零，即使在某种意义上您可以将其视为负 epsilon，通常会四舍五入为 -1？

是的，它保证转换为整数零。首先， 的值`-0`恰好为零，而不是负 epsilon（与您在互联网上阅读的谣言相反）。其次，从浮点到整数的转换会*截断*该值，因此即使该值是“负 epsilon”（无论这意味着什么），结果也会为零，因为“负 epsilon”位于区间 (-1, 1) 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T13:47:57.950

> 当我在它的时候，负0呢？这个值是否保证转换为整数零，即使在某种意义上您可以将其视为负 epsilon，通常会四舍五入为 -1？

它被截断，因此趋向于零 - 意味着小于 1.0 和大于 -1.0 的任何值都变为 0。就“典型”平台而言，负零变为零。我不完全确定标准是否能保证这一点，但我相信在实践中你可以依赖它，即使标准没有定义它[除非你计划让你的代码在极其“奇怪”的设备上运行，例如 DSP 或 GPU]。

# css - 当我将鼠标悬停在画布上时如何更改鼠标光标到自定义光标？

> ID：14459711
> 
> 赞同：0
> 
> 时间：2013-01-22T13:29:12.607
> 
> 标签：css, html, html5-canvas

我有一个 .cur 文件，我想在鼠标悬停在画布上时使用该光标（我使用的是 Google Chrome）

```
<body>
<canvas id="canvas" width="600" height="405" style="position:relative; background:        black;" onclick="newBall()">

</canvas>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T13:38:03.943

使用 CSS：

```
canvas { 
  cursor: url(myCursor.cur), default; 
} 
```

或内联：

```
style="cursor:url(myCursor.cur), default;" 
```

完整代码：

```
<body>
<canvas id="canvas" 
        width="600" 
        height="405" 
        style="position:relative; 
               background:black;
               cursor: url(myCursor.cur), default;" 
        onclick="newBall()">
</canvas>
</body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-21T07:09:06.333

```
#canvas {
cursor: url(images/cursor.png), auto;
} 
```

# css - 当容器相对定位并隐藏溢出时，嵌套 div 不可能流血？

> ID：14459713
> 
> 赞同：0
> 
> 时间：2013-01-22T13:29:16.617
> 
> 标签：css, overflow, css-position, html

我想知道当容器相对定位并且溢出设置为隐藏时，是否完全不可能释放嵌套的 div？

在这种情况下，给嵌套的 div 一个固定的位置并不是一种选择。

请看一下这个例子：http: [//jsfiddle.net/s7nhw/11/](http://jsfiddle.net/s7nhw/11/)。

任何人都知道如何做到这一点？

我会很感激任何反馈！

```
<div class="container">
    <div class="nested-div"></div>
</div>

<style>
.container {
    margin: 0 auto;
    width: 100px;
    height: 100px;
    background: green;

    overflow: hidden;
    position: relative;
}
.nested-div {
    width: 200px;
    height: 100px;
    background: red;
    z-index: -1;

    position: absolute;
}
</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:38:36.237

我从未遇到过可以覆盖 {overflow: hidden} 的情况。您可能需要重新构建 HTML 以将嵌套的 div 放置在代码中其父级之外，然后使用绝对定位和 z-index 将其定位在当前包装器的后面。

[http://jsfiddle.net/s7nhw/13](http://jsfiddle.net/s7nhw/13)

```
.container {
    width: 100px;
    height: 100px;
    background: green;
    overflow: hidden;
    position:absolute;
    left: 50%;
    margin-left: -50px;
}
.nested-div {
    width: 200px;
    height: 100px;
    background: red;
    z-index: -1;
    margin: 0 auto;
    position: absolute;
    left: 50%;
    margin-left: -100px;
}

<div class="nested-div"></div>
<div class="container"></div> 
```

这里有一些进一步的讨论：[覆盖溢出：用 z-index 隐藏](https://stackoverflow.com/questions/1952344/override-overflowhidden-with-z-index)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:41:52.410

绝对位置子元素始终保持在相对位置父元素之下

# clearcase - 如何在 ClearCase 中查找特定版本后未修改的文件或元素

> ID：14459717
> 
> 赞同：1
> 
> 时间：2013-01-22T13:29:28.203
> 
> 标签：clearcase

如何在 ClearCase 中查找特定版本后未修改的文件或元素？就像我想找到版本 1 之后没有修改的所有元素（版本 1 之后没有版本）。

或者我们能否在 ClearCase 中找到在特定日期之后未修改的所有元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:00:50.560

如“[在 Clearcase 视图中查找比特定日期更新的文件？](https://stackoverflow.com/questions/7676263/find-files-in-clearcase-view-newer-than-a-specific-date) ”中所述，您可以找到更新的文件（从那时起），而不是之前。

这意味着您需要：

*   查找所有文件
*   找到那些在某个日期*发布版本的人*
*   通过从第一组中删除第二组来推断生成的文件组。

关于版本，您可以尝试查找所有没有版本 2 的文件，例如：

```
cleartool find . -version 'version(.../bugs/2)' -print 
```

但请记住，一个版本可以删除，一个文件仍然会有一个版本 3、4……所以这不是保证。

# php - 如何从其他 CMS 获取内容到 Magento？

> ID：14459720
> 
> 赞同：1
> 
> 时间：2013-01-22T13:29:36.300
> 
> 标签：php, magento, drupal, joomla

我有一个 Magento 站点，其中一个菜单项需要是来自其他 CMS 平台（Joomla 或 Drupal）的动态 CMS 页面。该菜单项的登录页面（当用户单击它时）应列出所有新闻（按日期排序）。然后，当用户单击其中一篇文章时，该文章将在同一菜单项下打开。我正在考虑以下解决方案之一：

1.  创建一个将从 CMS 数据库中检索内容数据的模块（基于其内容/文章 ID）。如果那里已经有这样的模块会很好。

2.  使用 Joomla/Drupal 的 RSS Feed 并将其显示在 Magento 的 CMS 块页面中。

3.  使用 cURL 显示显示文章的 Joomla/Drupal 菜单项链接的特定 URL。

你认为哪一个会是最好的解决方案？任何提示/示例如何实现该解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:28:19.113

我认为从您的 Drupal/Joomla CMS 创建一个 RSS 文件并将其保存在服务器上，然后将链接传递到 Magento 网站并解析 RSS 并显示它。

只需在 Magento CMS 页面中调用 PHTML 文件，然后将您的代码放在那里即可读取 RSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:54:51.173

在这种情况下，我将创建一个模块 - 这将是一个小部件（[创建一个 magento 小部件](http://www.magentocommerce.com/knowledge-base/entry/tutorial-creating-a-magento-widget-part-1)）。在小部件中，您可以定义参数，例如。要检索多少篇文章。在您的块文件中，您可以执行所有服务器端问题（查询外部数据库）。您可以为您的小部件创建一个模板以进行前端渲染 - 这样您就可以轻松地使外部内容的渲染适应您网站的实际外观。

可能此解决方案在性能上的成本最高，但为您提供了最详细的实现。

例如。您可以在小部件参数中定义一个下拉字段来选择 cms 站点的一部分：

```
 <parameters>
        <joomla_section type="complex" translate="label">
            <visible>1</visible>
            <required>1</required>
            <label>Section</label>
            <type>select</type>
            <source_model>yourwidget/system_config_source_section</source_model>
            <sort_order>10</sort_order>
        </joomla_section> 
```

在文件 Yourwidget/Model/System/Config/Source/Section.php 中，您可以查询外部数据库以检索可用部分，然后在您的小部件管理弹出窗口中，您可以选择一个部分来阅读文章。

# android - Android中哪个网格状布局用于远程控制界面？

> ID：14459722
> 
> 赞同：0
> 
> 时间：2013-01-22T13:29:42.307
> 
> 标签：android, layout, button, size, grid-layout

我想在 Android Activity 屏幕上绘制一个电视遥控器界面。但是我没有成功地将按钮放在正确的位置。因为我在内部使用网格来初始化按钮（顺便以编程方式），所以我认为使用 GridLayout 并将按钮放置为子视图应该是最好的方法。（我之前尝试过使用 TableLayout，但我不知道如何初始化一个高度超过两个或更多 TableRows 的按钮。）

但是当我更改一个按钮的大小时，GridLayout 类会自动重置所有按钮，因此我的视图看起来很糟糕。有没有办法设置我的按钮应该使用 GridLayout 的确切位置？或者你会推荐另一种布局吗？

这就是我期望整个事情最后的样子（“Endgeräteauswählen”按钮除外）：

![在此处输入图像描述](../Images/08ba6cb74689292907743f41fe4ce57a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:54:58.637

尝试相对布局：

```
RelativeLayout Main = new RelativeLayout(this);
    RelativeLayout.LayoutParams viewParamsCenter = new RelativeLayout.LayoutParams(
            RelativeLayout.LayoutParams.FILL_PARENT, RelativeLayout.LayoutParams.FILL_PARENT);
    Main.setLayoutParams(viewParamsCenter);

    Button but = new Button(this);
    but.setText("BTN");
    but.setBackgroundResource(R.drawable.ic_launcher);
    viewParamsCenter = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT,
            RelativeLayout.LayoutParams.WRAP_CONTENT);
    viewParamsCenter.addRule(RelativeLayout.ALIGN_PARENT_TOP);
    viewParamsCenter.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
    but.setLayoutParams(viewParamsCenter);
    Main.addView(but);

    but = new Button(this);
    but.setText("BTN 2");
    but.setBackgroundResource(R.drawable.ic_launcher);
    viewParamsCenter = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT,
            RelativeLayout.LayoutParams.WRAP_CONTENT);
    viewParamsCenter.addRule(RelativeLayout.ALIGN_PARENT_TOP);
    viewParamsCenter.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
    but.setLayoutParams(viewParamsCenter);
    Main.addView(but);

    but = new Button(this);
    but.setText("Center");
    but.setId(998900);
    but.setBackgroundResource(R.drawable.ic_launcher);
    viewParamsCenter = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT,
            RelativeLayout.LayoutParams.WRAP_CONTENT);
    viewParamsCenter.addRule(RelativeLayout.CENTER_IN_PARENT);
    but.setLayoutParams(viewParamsCenter);
    Main.addView(but);

    but = new Button(this);
    but.setText("below");
    but.setBackgroundResource(R.drawable.ic_launcher);
    viewParamsCenter = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT,
            RelativeLayout.LayoutParams.WRAP_CONTENT);
    viewParamsCenter.addRule(RelativeLayout.BELOW, 998900);
    viewParamsCenter.addRule(RelativeLayout.CENTER_IN_PARENT);
    but.setLayoutParams(viewParamsCenter);
    Main.addView(but);

    but = new Button(this);
    but.setText("Center above");
    but.setBackgroundResource(R.drawable.ic_launcher);
    viewParamsCenter = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT,
            RelativeLayout.LayoutParams.WRAP_CONTENT);
    viewParamsCenter.addRule(RelativeLayout.ABOVE, 998900);
    viewParamsCenter.addRule(RelativeLayout.CENTER_IN_PARENT);
    but.setLayoutParams(viewParamsCenter);
    Main.addView(but);

    but = new Button(this);
    but.setText("Center left");
    but.setBackgroundResource(R.drawable.ic_launcher);
    viewParamsCenter = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT,
            RelativeLayout.LayoutParams.WRAP_CONTENT);
    viewParamsCenter.addRule(RelativeLayout.LEFT_OF, 998900);
    viewParamsCenter.addRule(RelativeLayout.CENTER_IN_PARENT);
    but.setLayoutParams(viewParamsCenter);
    Main.addView(but);

    but = new Button(this);
    but.setText("Center right");
    but.setBackgroundResource(R.drawable.ic_launcher);
    viewParamsCenter = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT,
            RelativeLayout.LayoutParams.WRAP_CONTENT);
    viewParamsCenter.addRule(RelativeLayout.RIGHT_OF, 998900);
    viewParamsCenter.addRule(RelativeLayout.CENTER_IN_PARENT);
    but.setLayoutParams(viewParamsCenter);
    Main.addView(but);

    but = new Button(this);
    but.setText("Bottom");
    but.setBackgroundResource(R.drawable.ic_launcher);
    viewParamsCenter = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.FILL_PARENT,
            RelativeLayout.LayoutParams.WRAP_CONTENT);
    viewParamsCenter.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
    but.setLayoutParams(viewParamsCenter);
    Main.addView(but);

    RelativeLayout Main_SUPER = (RelativeLayout) findViewById(R.id.relativeLayout);
    Main_SUPER.addView(Main); 
```

# jquery - 将 jquery 对话框与 fullcalendar eventDrop 方法相结合

> ID：14459727
> 
> 赞同：0
> 
> 时间：2013-01-22T13:30:09.387
> 
> 标签：jquery, fullcalendar

我有一段闲置的代码：

```
eventDrop: function(event,dayDelta,minuteDelta,allDay,revertFunc) {
if (!confirm('some question')) {
    revertFunc();
}
else {
    $.ajax({
        url: '/some/url/',
        error: function(){
            revertFunc();
            alert('some text');
        },
    });
} 
```

}

我想使用带有 eventDrop 方法（带有 revertFunc）的 jquery 对话框而不是标准的 js 确认框。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:27:37.587

我找不到在 eventDrop 方法中使用 jquery 对话框和 revertFunc 的方法，所以我做了一些解决方法：

*   在以 url 作为参数的 eventDrop 调用 jquery 对话框上：

    url = '/some/url/with/datetime'; $('#dialog-confirm').data('url', url).dialog('open');

*   在对话框选项上定义按钮，在确认时调用 ajax，在取消时使用“refetchEvents”（而不是 eventDrop 中的“revertFunc”）：

    $('#calendar').fullCalendar('refetchEvents');

# javascript - 根据计时器显示不同的图像

> ID：14459742
> 
> 赞同：1
> 
> 时间：2013-01-22T13:30:55.813
> 
> 标签：javascript, image, timer

我试图根据计时器的结果显示不同的图像，但找不到解决方法。到目前为止，我有一个开始和停止按钮，但是当我单击停止时，我想使用计时器开启的值并根据该值显示图像（在警报框或网页本身上）。

```
if( timer =>60){
     img.src("pizzaburnt.jpg");
}elseif (timer <=30){
   img.src("pizzaraw.jpg");
}
else{
img.src("pizzaperfect.jpg
}

///Time
        var check = null;

        function printDuration() {
            if (check == null) {
                var cnt = 0;

                check = setInterval(function () {
                    cnt += 1;
                    document.getElementById("para").innerHTML = cnt;
                }, 1000);
            }
        }

    //Time stop
        function stop() {
                        clearInterval(check);
                        check = null;
                        document.getElementById("para").innerHTML = '0';

                }

**HTML**
 <td>
  Timer :<p id="para">0</p>
 </td> 
```

任何建议或讨论都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:45:19.220

像这样的东西会更好，而且更紧凑：

```
var img = document.getElementById("image");
var imageSrcs = ['pizzaRaw.jpg', 'pizzaPerfect.jpg', 'pizzaBurnt.jpg'];
var imageIndex = 0;
var interval = setInterval(animate, 30000); //change image every 30s
var animate = function() {
    //change image here
    //using jQuery:
    img.src(imageSrcs[imageIndex]);

    imageIndex++; //move index for next image

    if (imageIndex == imageSrcs.length) {
        clearInterval(interval); //stop the animation, the pizza is burnt
    }
}
animate(); 
```

您不想使用增量变量和 1 秒计时器的原因是因为您只是将逻辑混为一谈，旋转计时器，并且当您真正想要的是每 30 秒或任何时候更改图像时会造成一些混乱.

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:40:55.717

您的 HTML 中需要一个`<img>`标签，如下所示：

```
<html>
<body>
Timer: <p id="para">0</p>
Image: <img id="image" />
</body>
</html> 
```

Javascript 代码如下：

```
var handle;
var timerValue = 0;
var img = document.getElementById( "image" );
var para = document.getElementById("para");

function onTimer() {
  timerValue++;
  para.innerHTML = timerValue;
  if ( timerValue >= 60 ) {
    img.src( "pizzaburnt.jpg" );
  }else if ( timer <= 30 ) {
    img.src( "pizzaraw.jpg" );
  } else {
    img.src("pizzaperfect.jpg" );
  }
}

function start () {
  if ( handle ) {
    stop();
  }
  timerValue = 0;
  setInterval( onTimer, 1000 );
}

function stop () {
  if ( handle ) {
    clearInterval ( handle );
  }
} 
```

请确保这 3 个文件与您的 HTML 文件位于同一目录中：

*   Pizzaburnt.jpg
*   比萨饼.jpg
*   比萨完美.jpg

# android - 多个jar文件夹

> ID：14459743
> 
> 赞同：0
> 
> 时间：2013-01-22T13:30:56.920
> 
> 标签：android, ant

我有一个主要的 android 应用程序，它的 libs 文件夹中有 2 个罐子。这个 android 应用程序包括一个 Java 源项目，它的 libs 文件夹中有大约 4 个 jars。

在 build.xml 中，我从 android 的 build.xml 中复制了 'target name="-compile">'。

并添加了这个：

```
 <do-only-if-manifest-hasCode elseText="hasCode = false. Skipping..." >

        <!-- merge the project's own classpath and the tested project's classpath -->

        <path id="project.javac.classpath" >

            <path refid="project.all.jars.path" />

            <path refid="tested.project.classpath" />
        </path>
 <javac
  bootclasspathref="project.target.class.path"
  classpathref="project.javac.classpath"
  debug="true"
  destdir="${out.classes.absolute.dir}"
  encoding="${java.encoding}"
  extdirs=""
  fork="${need.javac.fork}"
  includeantruntime="false"
  source="${java.source}"
  target="${java.target}"
  verbose="${verbose}" >
  <src path="${source.absolute.dir}" />
  <src path="${gen.absolute.dir}" />
  <src path="${javaproject.dir}" /> #THIS IS WHAT I ADDED which is defined in ANT.PROPERTIES
  <compilerarg line="${java.compilerargs}" />
</javac> 
```

所以它引用了java源项目。问题发生在文件夹 libs 中的 java 源项目的 jar 中。我如何也包括它们？

附言。将它们复制到 android 项目的 libs 文件夹不是一种选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:30:51.363

您有以下内容：

```
<javac
     bootclasspathref="project.target.class.path"
     classpathref="project.javac.classpath"
     debug="true"
     destdir="${out.classes.absolute.dir}"
     encoding="${java.encoding}"
     extdirs=""
     fork="${need.javac.fork}"
     includeantruntime="false"
     target="${java.target}"
     verbose="${verbose}"

     source="${java.source}">

     <src path="${source.absolute.dir}" />
     <src path="${gen.absolute.dir}" />
     <src path="${javaproject.dir}" /> #THIS IS WHAT I ADDED which is defined in ANT.PROPERTIES

    <compilerarg line="${java.compilerargs}" />
</javac> 
```

请注意，您已经指定了`source`参数和`<src path>`子实体。另请注意，您引用了`javaproject.dir`. 这个目录是什么？它是另一个项目的源，另一个项目的主目录，还是别的什么？

首先，您不应该在命令中同时使用`<src path>`和`srcdir`参数。`<javac>`如果您只需要一个源目录路径，则可以使用任务的`srcdir`参数或子实体。如果您有多个，则不应使用，而只能使用子实体。`<javac>``<src path>``srcdir``<src path>`

现在回到你的问题...

如果我理解正确，您想在`<javac>`任务中指定多个类路径文件夹。您可以通过删除命令的`classpath`or`classpathref`参数来做到这一点`<javac>`，并像使用源目录一样简单地指定多个`<classpath path>`子实体。

我想你想要这样的东西：

```
<javac
     bootclasspathref="project.target.class.path"
     debug="true"
     destdir="${out.classes.absolute.dir}"
     encoding="${java.encoding}"
     extdirs=""
     fork="${need.javac.fork}"
     includeantruntime="false"
     target="${java.target}"
     verbose="${verbose}">

     <!-- Here I can specify multiple classpaths: -->
     <!-- Either classpath references, or classpath elements -->
     <classpath refid="project.javac.classpath"/>
     <classpath refid="some.other.classpath.reference"/>
     <classpath path="${some.actual.directory.with.jars}"/>

     <src path="${java.source}">
     <src path="${source.absolute.dir}" />
     <src path="${gen.absolute.dir}" />
     <!-- <src path="${javaproject.dir}" />  Is this correct? -->

     <compilerarg line="${java.compilerargs}" />
</javac> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:17:55.250

您可以构建一个`<path>`以包含您的项目在构建时依赖的所有 jar，并在您的`<javac>`任务中引用它。您已经让后者使用“project.javac.classpath”的classpathref，因此您需要使该路径包含jar。

例如：

```
<path id="project.javac.classpath">
    <path refid="project.all.jars.path" />
    <path refid="tested.project.classpath" />
    <!-- include all the jar files under /path/to/your/jars" -->
    <fileset dir="/path/to/your/jars">
        <!-- the **/* pattern recurses subdirectories -->
        <include name="**/*.jar"/>
    </fileset>
</path> 
```

该路径包含对“project.all.jars.path”的引用，这可能是您真正想要进行更改的地方，我注意到了以获取其他 jar。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-02T04:12:33.627

在大卫的解决方案中建立一条额外的路径对我有用。我添加了一个 if 条件来检查是否需要额外的 lib 路径。

```
<condition property="android.additional.libdir.enabled" value="true" else="false">
    <and>
       <isset property="android.additional.lib.dir" />
    </and>
</condition>

<if condition="${android.additional.libdir.enabled}">
   <then>
      <path id="project.javac.classpath">
           <path refid="project.all.jars.path" />
           <path refid="tested.project.classpath" />
           <fileset dir="${android.additional.lib.dir}">
               <include name="**/*.jar"/>
           </fileset>
      </path>
   </then>
   <else>
      <path id="project.javac.classpath">
          <path refid="project.all.jars.path" />
          <path refid="tested.project.classpath" />
      </path> 
   </else>
</if> 
```

在 ant.properties 文件中，指定附加的 lib 目录路径。

`android.additional.lib.dir=yourpath`

# ios - 将 dispatch_once 模式与原语一起使用有什么好处吗？

> ID：14459747
> 
> 赞同：1
> 
> 时间：2013-01-22T13:31:18.297
> 
> 标签：ios, objective-c, dispatch

哪个更好？

```
static unsigned unitFlags;
static dispatch_once_t onceToken;
dispatch_once(&onceToken, ^{
    unitFlags = NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit;
}); 
```

或者这和写作一样有效吗

```
unsigned unitFlags = NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit; 
```

还是有其他一些更有效的模式？'unitFlags' 的定义会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T13:42:27.803

你应该这样做：

```
static unsigned unitFlags = NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit; 
```

`dispatch_once`如果右边的表达式不是有效的编译时常量，您只需要这样做。但这是一个有效的编译时常量，因此您不必费力。

但是`static`表达式一般比a好`#define`（它是有类型的，对于一些复杂的表达式，它可以更有效）。`static`在我看来，坚持下去。

# entity-framework - 如何通过 Windows Azure（预览版）管理门户设置 ADO.NET Entity Framework 连接字符串？

> ID：14459748
> 
> 赞同：29
> 
> 时间：2013-01-22T13:31:19.990
> 
> 标签：entity-framework, deployment, azure, connection-string, azure-web-app-service

在 Windows Azure（预览版）管理门户中，您可以更改网站的配置选项（请参阅[http://www.windowsazure.com/en-us/manage/services/web-sites/how-to-configure-websites/ #howtochangeconfig](http://www.windowsazure.com/en-us/manage/services/web-sites/how-to-configure-websites/#howtochangeconfig)）。

我目前通过 Web.Release.Config 为我的 ADO.NET Entity Framework 连接设置连接字符串，但我想通过管理门户设置它，但无论我使用什么，我总是会遇到以下错误：

> 指定的命名连接在配置中未找到，不打算与 EntityClient 提供程序一起使用，或者无效。

它适用于常规连接字符串，即没有定义元数据和映射信息的元数据键（csdl、ssdl、msl）。

这就是我所做的：

我去[https://manage.windowsazure.com/#Workspaces/WebsiteExtension/Website/[MY-STAGING-SITE-NAME]/configure](https://manage.windowsazure.com/#Workspaces/WebsiteExtension/Website/[MY-STAGING-SITE-NAME]/configure)

在“连接字符串”下，我有一个名为“ApplicationServices”的键，如下所示：

> Server=tcp:xxxxx.database.windows.net,1433;Database=xxxxx;User ID=xxxxx@xxxxx;Password=xxxxx;Trusted_Connection=False;Encrypt=True;Connection Timeout=30;

这个有效。

我有另一个用于实体框架连接的键。我们称它为 FooBarContext。它看起来像这样：

> metadata=res:// */Models.FooBarContext.csdl|res://* /Models.FooBarContext.ssdl|res://*/Models.FooBarContext.msl;provider=System.Data.SqlClient;provider connection string="Server =tcp:fooserver.database.windows.net,1433;Database=foobar;用户 ID=myname@fooserver;Password=xxxxxxxxxx;Trusted_Connection=False;Encrypt=True;Connection Timeout=30;"

这会导致上述错误。它是从Web.Release.Config 中的**工作值复制而来的，带有“”** 替换为“。

我尝试了其他变体：使用 " 原封不动，最后附加了元数据，但无济于事。我已经用第二个网站重现了这个问题。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-25T14:59:40.193

我的问题的解决方案是从实体框架连接字符串的“SQL Azure/SQL Server/MySQL/自定义”选择器中选择**“自定义”**而不是**“SQL Azure”**，即使数据库确实在 SQL Azure 上运行。

[编辑]来自@matthew-steeples 的热门评论如下：

> 对于遇到相同问题的其他任何人，我会补充一点，有时配置文件将具有`&quot;`而不是`"`，并且 Azure 网站需要将其更改为`"`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-06-26T01:09:16.163

[![在此处输入图像描述](../Images/a54bd0b177edd434fd5c029ba09c1eab.png)](https://i.stack.imgur.com/8PtyN.png)

代替

```
&quot; 
```

和

```
" 
```

在连接字符串中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-03-13T19:48:42.177

我不仅必须使用双引号（或单引号）而不是`&quot;`（并为类型选择自定义），而且我还必须确保我的转换配置中有一个虚拟值。我正在替换整个 connectionStrings 节点，但决定保留它并添加：

```
<add xdt:Transform="Replace" xdt:Locator="Match(name)" name="FooBarEntities" connectionString="temp" providerName="System.Data.EntityClient" /> 
```

没有这个，我收到以下错误：

`The connection string 'FooBarEntities' in the application's configuration file does not contain the required providerName attribute.`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-18T15:25:35.463

除了上面的答案，还有两件非常重要的事情：

1.  您应该在构造函数中从“name=connectionString”中删除“name=”：

> 公共 MyEntities(string connectionString) : base($"name={connectionString}") { }

2.  您应该在 app.config 中保留连接字符串的“重复”，但将连接字符串替换为虚拟文本，将从 Azure 加载正确的连接字符串。这对于 providerName 部分是必需的。请阅读： [https ://mohitgoyal.co/2017/07/05/update-connection-string-for-entity-framework-in-azure-web-app-settings/comment-page-1/](https://mohitgoyal.co/2017/07/05/update-connection-string-for-entity-framework-in-azure-web-app-settings/comment-page-1/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-11-07T03:56:43.817

我有同样的问题。我解决了，将这个连接字符串放入 web.config：

```
<add name="eManagerTurModelConnection" connectionString="metadata=res://*/ORM.eManagerFinanceModel.csdl|res://*/ORM.eManagerFinanceModel.ssdl|res://*/ORM.eManagerFinanceModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=<server>.database.windows.net;Initial Catalog=eManagerTur;Integrated Security=False;User ID=<user>;Password=<Password>;Connect Timeout=15;Encrypt=False;TrustServerCertificate=False;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

在我删除了我的网站的连接字符串之后，它工作了，因为它没有得到我在 web.config 中添加的连接字符串。

英语不好... =)

# ruby-on-rails-3 - 在 html 视图中呈现 JBuilder 视图

> ID：14459750
> 
> 赞同：23
> 
> 时间：2013-01-22T13:31:24.880
> 
> 标签：ruby-on-rails-3, json, jbuilder

我用 JBuilder 创建了一个 json 视图。但我想将其预加载到数据对象中，因此 Backbone 可以尽早访问数据而无需获取它。

如何将 list.json.jbuilder 视图呈现到我的 list.html.erb 视图中？

通常没有jbuilder，我会做这样的事情：

```
<div data-list="<%= @contents.to_json %>"></div> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-12-11T22:20:48.860

`render`，当从视图中调用时，返回传递的模板或部分模板的字符串呈现；您可以根据需要将该字符串嵌入到您的视图中。请注意：

*   您必须使用类型后缀/扩展名附加您的模板名称。如果你不这样做，Rails 可能会对你调用的模板文件感到困惑。即：它可能会选择`list.html.erb`而不是`list.json.jbuilder`. 如果您*从* `list.html.erb`进行此调用，则尝试渲染`list.html.erb`会导致无限递归和 SystemStackError。使用`:format`选项`render`似乎不起作用。
*   您必须指定模板的限定路径；它不会为“list.json”找到正确的模板，因为它与 .json`list.json.jbuilder`位于同一目录中`list.html.erb`。
*   您需要通过;传递`render`调用的输出。`raw`否则，当它嵌入到视图中时，它将被转义。

因此，对于您的示例，假设您的模板位于`/app/views/foo`：

```
<div data-list="<%= raw render(:template => "foo/list.json", :locals => { :contents => @contents }) %>"></div> 
```

# android - TabPageIndicator 在 Fragment 内的样式不正确

> ID：14459755
> 
> 赞同：4
> 
> 时间：2013-01-22T13:31:32.410
> 
> 标签：android, actionbarsherlock, viewpagerindicator

我正在尝试`com.viewpagerindicator.TabPageIndicator`放入`SherlockFragment`. 虽然内容的滚动`ViewPager`效果很好，但 TabPageIndicator 的样式不能正常工作。这个寻呼机有五个片段，它们的标题不适合屏幕的宽度。我在 Activity 中可以正常工作，但是当我尝试在 Fragment 中使用它时，所有五个标题都被剪掉以适应屏幕的宽度。

我尝试使用`LayoutInflater`提供的两者，`Fragment#onCreateView`并且`getSystemService`都产生相同的结果。

不确定是否相关，但我在这个布局中也有 com.actionbarsherlock.widget.SearchView 并且所有属性都没有应用。

**my_search_layout.xml**

```
 <com.viewpagerindicator.TabPageIndicator
            android:id="@+id/indicator"
            android:layout_height="wrap_content"
            android:layout_width="match_parent"
            android:layout_alignParentLeft="true"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            />
    <android.support.v4.view.ViewPager
            android:id="@+id/pager"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentRight="true"
            android:layout_alignParentBottom="true"
            android:layout_below="@id/indicator"
            />
</RelativeLayout> 
```

**我的搜索片段**

```
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        LayoutInflater themedInflater = (LayoutInflater) getSherlockActivity()
                                                            .getSupportActionBar()
                                                            .getThemedContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View root = themedInflater.inflate(R.layout.my_search_layout, container, false);

        FragmentManager fm = ((Fragment)this).getChildFragmentManager();

        mSectionsPagerAdapter = new SectionsPagerAdapter(fm);

        mViewPager = (ViewPager) root.findViewById(R.id.pager);
        mViewPager.setAdapter(mSectionsPagerAdapter);

        TabPageIndicator indicator = (TabPageIndicator) root.findViewById(R.id.indicator);
        indicator.setViewPager(mViewPager);

        return root;
    } 
```

**SectionsPagerAdapter**

```
public class SectionsPagerAdapter extends FragmentPagerAdapter {

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int i) {
            Fragment fragment = null;

            Log.d(TAG, "SectionsPagerAdapter: " + i);

            fragment = new HelloFragment();

            return fragment;
        }

        @Override
        public int getCount() {
            return 5;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            switch (position) {
                case 0:
                    return getString(R.string.section_title_page_1);
                case 1:
                    return getString(R.string.section_title_page_2);
                case 2:
                    return getString(R.string.section_title_page_3);
                case 3:
                    return getString(R.string.section_title_page_4);
                case 4:
                    return getString(R.string.section_title_page_5);
            }
            return null;
        }
    } 
```

# android - 安卓蓝牙插座

> ID：14459757
> 
> 赞同：2
> 
> 时间：2013-01-22T13:31:35.063
> 
> 标签：android, sockets, bluetooth

我正在尝试做的事情：我正在开发一个应用程序，该应用程序将使用 SPP 使用蓝牙从生物识别设备中获取数据。为此，我有一些命令（字节和十六进制格式）和生物识别设备制造商提供的步骤。

我的问题：我必须遵循两个步骤来获取数据，即一个接一个地发送两个命令。生物识别设备在接收到第二个命令时返回数据。我已成功建立与设备的连接并执行第一个命令，但是当我向设备发送第二个命令时，应用程序卡住，一段时间后生物识别设备终止连接，我收到 IO 异常：套接字关闭，不明白第二个命令发生了什么.

我已经完成了：我使用了 Android SDK Samples 中提供的[蓝牙聊天示例中的 BluetoothChatService.class，并根据我的要求修改了](http://developer.android.com/tools/samples/index.html)[ConnectThread](http://developer.android.com/guide/topics/connectivity/bluetooth.html)线程的 Run 函数，即我在这个函数中发送命令。并使用“00001101-0000-1000-8000-00805F9B34FB”UUID。为了连接到套接字，我尝试了以下代码：

```
if (Build.VERSION.SDK_INT > 9) {
                tmp = device.createInsecureRfcommSocketToServiceRecord(MY_UUID);
            }
            else {
                tmp = device.createRfcommSocketToServiceRecord(MY_UUID);
            } 
```

和

```
Method m = device.getClass().getMethod("createRfcommSocket", 
                    new Class[] { int.class });
            tmp = (BluetoothSocket) m.invoke(device, Integer.valueOf(1)); 
```

和

```
tmp = device.createRfcommSocketToServiceRecord(MY_UUID); 
```

有谁知道我错在哪里？

先感谢您。但其中之一可以解决我的问题。

**编辑** 我已经解决了这个问题。这是我正在建立套接字连接的方法

```
if (Build.VERSION.SDK_INT < 10){
Method m = device.getClass().getMethod("createRfcommSocket",new Class[] { int.class });
tmp = (BluetoothSocket) m.invoke(device, Integer.valueOf(1)); 
```

}

> else{ tmp = device.createRfcommSocketToServiceRecord(MY_UUID); }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:34:09.223

生物识别设备有可能要求安全吗？如果没有执行蓝牙安全程序，它可能会断开连接。几个问题：您使用的是哪个 Android 版本？您知道设备的 SPP 连接要求（安全要求）吗？还分享蓝牙 logcat 跟踪以确认问题

# iphone - TableView 到 detailTableView - 落后一步

> ID：14459758
> 
> 赞同：0
> 
> 时间：2013-01-22T13:31:41.140
> 
> 标签：iphone, tableview, master-detail

当我将我的 tableView 连接到 detailtableView 时，我得到 detailtableView 落后一步的“错误”。例如，当单击 mastertableView 中的第二个单元格时，它会显示第一个单元格的详细信息。希望你能理解我的问题。

见我的.m。

```
#import "GuideTableViewController.h"
#import "GuideDetailTableViewController.h"

@interface GuideTableViewController (){
    NSArray *guide;

}
@property (weak, nonatomic) IBOutlet UITableView *tableView;

@end

@implementation GuideTableViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

//JSONmetod
- (void) loadJSON{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        //code
        NSData *data = [NSData dataWithContentsOfURL:[NSURL     URLWithString:@"https://dl.dropbox.com/u/100670549/test.json"]];

        NSError *error;

        if (data)
        {

            guide = [NSJSONSerialization JSONObjectWithData:data options:0 error:&error];

            for (NSDictionary *dictionary in guide){
                NSLog([dictionary description]);
            }

        }else
        {
            NSLog(@"Could not load data");
        }

            dispatch_sync(dispatch_get_main_queue(), ^{
                // code
                [self.tableView reloadData];
            });

    });

    }

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    //Anropa json

    [self loadJSON];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

//TableView
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return guide.count;
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath     *)indexPath{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];

    NSDictionary *dict = [guide objectAtIndex:indexPath.row];
    cell.textLabel.text = [dict valueForKey:@"title"];

    return cell;
}

//Till detailView

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

    if ([segue.identifier isEqualToString:@"showStay"]){
        GuideDetailTableViewController *tvc = [segue destinationViewController];
        NSIndexPath *index = sender;
        NSDictionary *dict = [guide objectAtIndex:index.row];

        tvc.stay = dict;
    }
}

-(void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath   *)indexPath{

    [self performSegueWithIdentifier:@"showStay" sender:indexPath];

}

@end 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:36:16.613

您使用`didDeselectRowAtIndexPath`而不是`didSelectRowAtIndexPath`Delegate 方法，常见的自动完成错误。

# .net - 如何使用 Linq 进行过滤

> ID：14459760
> 
> 赞同：0
> 
> 时间：2013-01-22T13:31:47.137
> 
> 标签：.net, linq

我的 Log 类有 2 个属性。

```
List<LogDetails>
string Title 
```

我的 LogDetails 类有 2 个属性：

```
string Message
LogStatus LogStatus  //enum 
```

在这个对象的生命周期中，它接收到许多消息，这些消息被存储起来以供以后记录。LogStatus Enum 有几个状态，但简单来说就是“进行中”、“未找到文件错误”、“成功”或“失败”。

我正在尝试使用 Linq 仅匹配那些失败的，但我无法构建新类型。

```
List<Log> filteredLogs = (from a in logs
                          from b in a.LogDetailsList
                          where b.Status == LogDetails.LogStatus.Failed
                          select new Log()
                                  {
                                     Title = a.Title,
                                     LogDetailsList = a.LogDetailsList
                                  }).Distinct().ToList(); 
```

我的filteredLogs 将完整列表返回给我，就好像where 子句没有工作一样。

我试过了

```
 List<Log> filteredLogs = (from a in logs
                           from b in a.LogDetailsList
                           where b.Status == LogDetails.LogStatus.Failed
                           select new Log()
                                  {
                                       Title = a.Title,
                                       LogDetailsList = new LogDetails() { Message = b.Message, Status = b.Status }
                                  }).Distinct().ToList(); 
```

这也不起作用，因为看起来我无法从 Linq 查询中调用 ToList() 方法。

**编辑**

有没有人对如何克服这个问题有任何建议？我的目标是有一个只列出那些失败的列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T13:36:40.740

`Enumerable.Any`在您的“嵌套”`LogDetails`列表中使用。

```
List<Log> failedLogs = logs
            .Where(l => l.LogDetails.Any(ld => ld.LogStatus==LogStatus.Failed))
            .ToList(); 
```

这将返回至少一个日志详细信息具有的所有日志`LogStatus.Failed`。

这是一个[**演示**](http://ideone.com/AJsC0M)。

# javascript - 在我的插件中对 mouseenter 应用 .delay()

> ID：14459764
> 
> 赞同：0
> 
> 时间：2013-01-22T13:32:09.143
> 
> 标签：javascript, jquery

我有一个 div，在 mouseenter 上，应该显示另一个 div。我不确定如何在插件中实现这一点。这是我的代码，也是我迄今为止所尝试的。

代码：[JsFiddle](http://jsfiddle.net/FwRBd/)

```
<div class="hover-me"></div>
<div class="show-me"></div>

    var Nav = {
        hover_me: $('.hover-me'),
        show_me: $('.show-me'),

    init: function() {
        Nav.toggle_display();
        console.log('init');
    },

    toggle_display: function() {
        Nav.hover_me.mouseenter(function() {
            Nav.show();
        });

        Nav.hover_me.mouseleave(function () {
            Nav.hide();
        });
    },

    show: function() {
        Nav.show_me.fadeIn();
    },

    hide: function() {
        Nav.show_me.fadeOut();
    }
}; 
```

我试图这样做，但没有任何运气。

```
Nav.hover_me.mouseenter(function() {
      Nav.delay(1000).show();
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:35:24.403

见金博的评论：

```
var Nav = {
    // [...]
    timeoutId: undefined,
    // [...]
};

Nav.hover_me.mouseenter(function() {
    Nav.timeoutId = setTimeout(function() {
        Nav.show();
    }, 1000);
});

Nav.hover_me.mouseleave(function () {
    if (Nav.timeoutId) { clearTimeout(Nav.timeoutId); }
    Nav.hide();
}); 
```

看[小提琴](http://jsfiddle.net/algorhythm/FwRBd/4/)

# c# - 识别 linux box 上的文件更改

> ID：14459767
> 
> 赞同：0
> 
> 时间：2013-01-22T13:32:23.017
> 
> 标签：c#, asp.net, linux, filesystemwatcher

如果修改了 linux box/RDP 上的文件，是否可以识别。我已经尝试过`FileSystemWatcher`，但是在这里观看远程服务器上的文件非常困难。有人可以建议我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:46:17.930

如果你会写C，你可以`inotify`试一试。它是 2.6 之后的内核特性。[这](http://www.linuxjournal.com/article/8478?page=0,1)是一篇介绍文章。我想知道您使用的是哪个操作系统？我以为 C# 只能在 Windows 下使用。

# python - 如何使用 PyICU 将 unicode 文本音译为 ASCII？

> ID：14459772
> 
> 赞同：1
> 
> 时间：2013-01-22T13:32:37.353
> 
> 标签：python, character-encoding, ascii, icu, pyicu

有[PyICU](http://pypi.python.org/pypi/PyICU)库，我知道它可以用来音译字符串。但是没有文档。任何人都有一个简单的例子，它使用[PyICU](http://pypi.python.org/pypi/PyICU)将 unicode 字符串转译为 ASCII ？

[用于音译](http://www.icu-project.org/apiref/icu4c/classicu_1_1Transliterator.html)的 C++ [ICU](http://site.icu-project.org/)文档在此处，但我不明白如何从 Python 中调用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-07-15T20:40:34.140

这里有一个很好的 PyICU 备忘单：[https ://gist.github.com/dpk/8325992](https://gist.github.com/dpk/8325992)

这是一个稍作修改的示例：

```
>>> import icu
>>> tl = icu.Transliterator.createInstance('Any-Latin; Latin-ASCII')
>>> tl.transliterate('Ψάπφω')
'Psappho' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:53:50.447

从您提供的第一个链接中，我假设 1）您已经构建了 PyICU 2）您已确保该库是可访问的（如果您没有上述内容，请参阅链接页面上的文档）

我从您的链接中找到了此文档：

> 要将以非 utf-8 编码的 Python str 转换为 ICU UnicodeString，请使用 UnicodeString(str, encodingName) 构造函数。

所以你需要找到encodingName，我猜你的应该是ASCII（你应该检查以确保它是正确的，我没有打扰）

然后我想你会做这样的事情：

```
>>> from icu import UnicodeString
 . 
 .
 . 
>>> string = UnicodeString(strToConvert, ASCII) 
```

这只是一个快速的想法，ymmv。您可能想查看该网站，因为它提供了更多示例以及如何以“Python 方式”或“ICU 方式”做事。干杯！

# android - 如何将布局内容移动到屏幕android之外

> ID：14459773
> 
> 赞同：6
> 
> 时间：2013-01-22T13:32:44.393
> 
> 标签：android, layout, view

我需要将屏幕的内容向左移动，以便为右侧的滑动菜单腾出空间 ![在此处输入图像描述](../Images/b27d8ac4d47fcd84315a29bf004e90d2.png)

这是代码：

```
// modify content layout params
    try {
        content = ((LinearLayout) act.findViewById(android.R.id.content)
                .getParent());
    } catch (ClassCastException e) {
        /*
         * When there is no title bar
         * (android:theme="@android:style/Theme.NoTitleBar"), the
         * android.R.id.content FrameLayout is directly attached to the
         * DecorView, without the intermediate LinearLayout that holds the
         * titlebar plus content.
         */
        content = (FrameLayout) act.findViewById(android.R.id.content);
    }
FrameLayout.LayoutParams pr = (android.widget.FrameLayout.LayoutParams) content
                    .getLayoutParams();
            pr.rightMargin = menuSize;
            content.setLayoutParams(pr);
// add the slide menu to parent
    parent = (FrameLayout) content.getParent();

    try {
        parent = (FrameLayout) content.getParent();
    } catch (ClassCastException e) {
        /*
         * Most probably a LinearLayout, at least on Galaxy S3.
         */
        LinearLayout realParent = (LinearLayout) content.getParent();
        parent = new FrameLayout(act);
        realParent.addView(parent, 0); // add FrameLayout to real parent of
                                        // content
        realParent.removeView(content); // remove content from real parent
        parent.addView(content); // add content to FrameLayout
    }

    LayoutInflater inflater = (LayoutInflater) act
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    menu = inflater.inflate(R.layout.slidemenu, null);

    FrameLayout.LayoutParams lays = new FrameLayout.LayoutParams(menuSize,
            FrameLayout.LayoutParams.MATCH_PARENT, Gravity.RIGHT);
    lays.setMargins(0, statusHeight, 0, 0);
    menu.setLayoutParams(lays);
    parent.addView(menu); 
```

但我得到的是：
![在此处输入图像描述](../Images/0f36621b7c36db595c530609e8b43d1a.png)

内容只是调整大小以适应屏幕，我怎样才能使它工作？顺便说一句，我无法修改内容布局，它是带有表面视图的相对布局，但它应该适用于任何布局，因为我修改了作为顶视图容器的 DecorView

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T13:47:10.890

要移动“屏幕”，您需要在视图上调用 getLayoutParams()，根据需要对其进行修改，然后在视图上调用 setLayoutParams()。

但有关如何在菜单中实现幻灯片的精彩教程，请参见此处：-

[http://android.cyrilmottier.com/?p=658](http://android.cyrilmottier.com/?p=658)

为了增加进一步的帮助，这是一个实现我认为你所追求的布局： -

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
 >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/blue" >

</LinearLayout>

<LinearLayout
    android:layout_width="200dip"
    android:layout_height="match_parent"
    android:layout_marginLeft="-100dip"
    android:background="@color/grey_divider"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Button" />

</LinearLayout> 
```

这将导致第二个 LinearLayout 出现在屏幕左侧 50% 处。仅供参考，您要移动的 LinearLayout 需要绝对宽度。但是您可以在 xml 中将其定义为 FILL_PARENT，然后在第一次将边距设置为负值时获取宽度并将其设置为代码中的绝对值。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:43:04.197

使用父级作为衬垫布局，为左右布局视图设置权​​重。将您的左视图放在需要滚动到屏幕外的水平滚动视图中。

# java - 如何使用 FTP(E)S 从服务器下载文件？

> ID：14459777
> 
> 赞同：1
> 
> 时间：2013-01-22T13:32:57.200
> 
> 标签：java, apache, ftp, explicit, ftps

我一直在寻找答案，但我发现的最接近的事情就是责怪服务器。

这是我的代码，对于我的应用程序，我正在使用 Zehon 库：

```
import com.zehon.BatchTransferProgressDefault;
import com.zehon.FileTransferStatus;
import com.zehon.exception.FileTransferException;
import com.zehon.ftps.FTPsClient;

public class UploadFolderSample {
/**
 * Please refer to http://www.zehon.com/FTPs_samples.htm for its full source code
 * @param args
 */
public static void main(String[] args) {
    String host = "****";
    int port = 990;
    String username = "******";
    String password = "*******";
    String sendingFolder = "*******/";
    String destFolder = "ftpes:******/";

    try {
        com.zehon.ftps.FTPsClient ftps = new FTPsClient(host, port, username, password, false);
        ftps.folderExists(destFolder);
        int status  = ftps.sendFolder(sendingFolder, destFolder, new BatchTransferProgressDefault());

        if(FileTransferStatus.SUCCESS == status){
            System.out.println(sendingFolder + " got ftps-ed successfully to  folder "+destFolder);
        }
        else if(FileTransferStatus.FAILURE == status){
            System.out.println("Fail to ftps  to  folder "+destFolder);
        }
    } catch (FileTransferException e) {
        e.printStackTrace();
    }       
} 
```

}

这是我的错误：

```
Thank you for using Zehon software (www.zehon.com).  
Please go to http://www.zehon.com/feedback.php to provide us your feedback about the product.
Please go to http://www.zehon.com/feature_request.php to submit bugs or feature requests.
com.zehon.exception.FileTransferException: org.apache.commons.net.ftp.FTPConnectionClosedException: Connection closed without indication.
    at com.zehon.ftps.FTPsClient.folderExists(FTPsClient.java:1239)
    at test.UploadFolderSample.main(UploadFolderSample.java:34)
Caused by: org.apache.commons.net.ftp.FTPConnectionClosedException: Connection closed without indication.
    at org.apache.commons.net.ftp.FTP.__getReply(FTP.java:313)
    at org.apache.commons.net.ftp.FTP.__getReply(FTP.java:290)
    at org.apache.commons.net.ftp.FTP._connectAction_(FTP.java:396)
    at org.apache.commons.net.ftp.FTPClient._connectAction_(FTPClient.java:796)
    at org.apache.commons.net.ftp.FTPSClient._connectAction_(FTPSClient.java:203)
    at org.apache.commons.net.SocketClient.connect(SocketClient.java:172)
    at org.apache.commons.net.SocketClient.connect(SocketClient.java:192)
    at com.zehon.ftps.FTPsClient.getFTPSClient(FTPsClient.java:1444)
    at com.zehon.ftps.FTPsClient.folderExists(FTPsClient.java:1236)
    ... 1 more 
```

我真的需要一些帮助，我已经被 FTPS 困了一个多星期了。

编辑（添加对话框）：当我使用错误的端口时会发生这种情况，但至少它以这种方式显示对话框。

```
> Thank you for using Zehon software (www.zehon.com).   Please go to
> http://www.zehon.com/feedback.php to provide us your feedback about
> the product. Please go to http://www.zehon.com/feature_request.php to
> submit bugs or feature requests. 220-FileZilla Server version 0.9.33
> beta 220 Welcome by ***** AUTH TLS 234 Using authentication type TLS
> USER ***** 331 Password required for ***** PASS ******* 230 Logged on
> SYST 215 UNIX emulated by FileZilla PASV 227 Entering Passive Mode
> (******) LIST ftpes:*****/ 550 PROT P required 220-FileZilla Server
> version 0.9.33 beta 220 Welcome by **** AUTH TLS 234 Using
> authentication type TLS USER **** 331 Password required for **** PASS
> **** 230 Logged on Transfer start for file ****\test.txt MODE S 200 MODE set to S. TYPE I 200 Type set to I PASV 227 Entering Passive Mode
> (*****) STOR ftpes:*****/test.txt 550 PROT P required Transfer error
> *****/test.txt Transfer complete for file *****/test.txt Transfer start for file *****/test.txt MODE S 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T13:45:59.593

存在显式和隐式 FTPS (FTP-over-SSL)。在第一种情况下（通常）建立到端口 21 的连接，然后发送命令以通过已建立的通道协商 SSL。隐式 SSL 意味着通过端口（通常）990 进行连接，然后协商 SSL，然后通过 SSL 安全通道发送常规命令（LOGIN 等）。

如果混合使用两种模式（以非安全模式连接到端口 990 或尝试连接到端口 21 并立即启动 SSL 握手），则不会有任何效果。

所以首先要做的是找出你需要使用什么模式。然后设置正确的端口并检查您的库是否支持所需的模式。

# sql - 在对象上存储 sql 查询

> ID：14459784
> 
> 赞同：0
> 
> 时间：2013-01-22T13:33:21.597
> 
> 标签：sql, oracle, plsql, cursor, dynamic-sql

有没有办法将查询存储在对象中，以便您可以在游标中使用它或作为更大查询的子查询？这一切都没有使用立即执行？

假设你想要这个：

```
set serveroutput on;
DECLARE
  CNT NUMBER; 
  v1 varchar2(4000);
  SQL_QUERY view := SELECT table_name FROM USER_TABLES;
  CURSOR C1 IS 
    SQL_QUERY;
BEGIN
  OPEN C1;
    FETCH C1 INTO V1;
    dbms_output.put_line('name of the first table: '||v1);
  CLOSE C1;
  SELECT COUNT(*) INTO CNT FROM SQL_QUERY;
  dbms_output.put_line('Count: '|| cnt);
end; 
```

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:37:41.590

> “将查询存储在对象中”

这是视图的定义。

```
create view foo as select table_name from user_tables; 
```

然后

```
DECLARE
  CNT NUMBER; 
  v1 varchar2(4000);
  CURSOR C1 IS 
    select * from foo;
BEGIN
  OPEN C1;
    FETCH C1 INTO V1;
    dbms_output.put_line('name of the first table: '||v1);
  CLOSE C1;
  SELECT COUNT(*) INTO CNT FROM (select null from foo);
  dbms_output.put_line('Count: '|| cnt);
end; 
```

这不是你想要的吗？

# xslt - XSL-FO：需要在页面序列级别禁用分页符

> ID：14459785
> 
> 赞同：1
> 
> 时间：2013-01-22T13:33:22.500
> 
> 标签：xslt, xsl-fo

我的要求是在一个页面中生成一个页面。xsl 定义了 A4 纸大小的 1/3 的页面，但其中最多 3 个必须打印在纸上。该页面是一个标准的页眉/正文/页脚，上面有一个“Y 页 X”，当然它很简单。但如果这些“页面”有 4 个，则只应打印 2 页，第一页 3 页，第二页 1 页。但是打印了 4 页，因为输出的 PDF “告诉”打印机是一张完整的纸张。所以我想做的是：

*   对 fo 进行编码，使其在完成页面后不会分页（类似于`page-break-after="avoid"`但在页面序列级别）或

*   在一个页面序列中生成一个页面序列，外部的被定义为 A4 尺寸，内部的 1/3。

我以一种简单的方式直接尝试了第二个，即

```
<fo:page-sequence master-reference="A4">
  <fo:page-sequence master-reference="one-third_A4">
    ...  
  </fo:page-sequence>
</fo:page-sequence> 
```

..处理器肯定不喜欢它。

有没有我可以申请的任何说明可以做到这些？我查看了 schemacentral 和 w3schools.com 之类的地方，但找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:54:45.300

不确定我是否理解您的需求（绘图会有所帮助），但您不能简单地将您的内容放入一系列`fo:block-container`具有指定高度的元素中吗？它们会垂直堆叠出来。

如果您需要更复杂的几何图形，请查看XSL 1.1 的[flow-maps](http://www.w3.org/TR/xsl/#fo_flow-map)功能。每页三个正文区域按顺序连接在一个 中`<fo:flow-target-list>`，并为它们提供一个单独的`fo:flow`内容。

[根据规范](http://www.w3.org/TR/xsl/#fo_page-sequence)，拥有`fo:page-sequence`另一个`fo:page-sequence`是无效的（那么页码意味着什么？），并且每个都根据定义开始一个新的物理页面。`fo:page-sequence`

[fo:page-sequence-wrapper](http://www.w3.org/TR/xsl/#fo_page-sequence-wrapper)也不会在子页面级别为您提供帮助。

# android - 调用方法 onClickListener

> ID：14459791
> 
> 赞同：5
> 
> 时间：2013-01-22T13:33:43.110
> 
> 标签：android, onclicklistener

这似乎是一个荒谬的问题，但我希望能够调用与按下特定按钮的事件相关的代码。

我一直在寻找信息，但我没有看到任何可以帮助我的信息。

我想要的示例：

```
final ImageView img23 = (ImageView) vTweets.findViewById(R.id.ImageView01);
img23.setId(t);

img23.setOnClickListener(new OnClickListener() {

   public void onClick(View v) {

      //I need to use this code without the user press the button//
   }
});

public void example(){

   //Here I need to use the code that is inside the onclick event//

} 
```

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-22T13:35:57.300

```
public void example(){

   img23.performClick();

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:44:01.077

为什么不创建一个函数来完成点击所需的工作，然后在您的点击方法中调用该函数。在函数中和 onclick 函数中有效地复制代码是没有意义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-27T06:49:28.890

好吧，我很高兴您得到了答案，但是在查看了您的要求后，我可以说这件事没有任何意义，也不是一个好习惯，您为什么要在方法中执行按钮的功能和执行按钮单击中的方法，您应该找到一些更好的方法来满足您的要求，我认为肯定会有，因此将来避免这种做法。

# mysql - 追随者系统，在 MySQL 或 Redis 中更好？

> ID：14459795
> 
> 赞同：2
> 
> 时间：2013-01-22T13:33:51.683
> 
> 标签：mysql, database, nosql, redis

我只是想知道选择什么解决方案来实施追随者系统？

在 MySQL 中我会有一张桌子

```
userID INT PRIMARY,
followID INT PRIMARY 
```

在 Redis 中，我只需使用 SET 并将所有 followID 添加到 UserID 中。

假设某人有 2000 个关注者并且您想列出所有关注者，什么会更快？（在一个有大约 100 万个条目的表中）如果两个用户互相关注，什么会更快？

非常感谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T14:36:14.557

按照现代标准，100 万件物品不算什么。任何数据库或 NoSQL 系统都可以在这样的容量下正常工作，因此您只需选择您最熟悉的一个即可。

在绝对性能方面，Redis 在这个用例上会比 MySQL 更快，因为：

*   整个数据集将在内存中
*   哈希表比 btree 快
*   没有要解析或执行的 SQL 查询

但是，请注意，关系数据库比 Redis 之类的键/值存储灵活得多。如果您可以预测到数据的所有访问路径，那么 Redis 是一个很好的解决方案。否则，更传统的数据库将为您提供更好的服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T15:07:08.370

在我看来，选择 MySQL。

在做出决定时，您会考虑的最大两点是：

**1）*您是否考虑过您的用例？***

你说你想实现一个追随者系统。如果您只想显示每个用户拥有的关注者列表，那么 Redis`SET`就足够了。

但是，如果您想获得“您当前关注的用户列表”的列表怎么办？你不能轻易地从你的 Redis 中挖掘出来`SET`，对吧？或者如果您想知道 User-X 是否在关注 User-A 呢？如果 User-A 有 10,000 个关注者，这也不容易吧？

**MySQL 在不同场景中查询不同类型的结果时更加灵活。**

**2）*你真的需要性能差异吗？***

如您所知，在这些情况下，Redis 比 MySQL 快。它是一个简单的 Key-Value 系统，因此会超过 MySQL 的性能。检查如下性能结果：

[http://colinhowe.wordpress.com/2009/04/27/redis-vs-mysql/](http://colinhowe.wordpress.com/2009/04/27/redis-vs-mysql/)

[http://ruturaj.net/redis-memcached-tokyo-tyrant-and-mysql-comparision/](http://ruturaj.net/redis-memcached-tokyo-tyrant-and-mysql-comparision/)

但是 Redis 和 MySQL 之间的性能差异只有在大约 5,000request/sec 之后才真正开始出现。否则你不会看到超过 50 毫秒的差异。

**除非您有非常大的流量，否则性能差异不会成为问题。**

所以，在考虑了这两点之后，MySQL会是一个更好的答案。

只有在以下情况下，Redis 才会很好：

1）set/list的目的是特定的，以后不需要灵活处理

2) 你觉得性能差异实际上会对你的架构产生影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T15:52:29.617

这取决于你想对数据做什么。你举了一些例子，但听起来你并没有真正给出产品需要做什么的完整定义。如果您真正想做的只是向用户展示他们是否互相关注？然后两者都可以，因为您只是在谈论 2 个简单的查询。但是，如果您想向两个用户展示他们共享的用户的交集，或者您想根据用户的个人资料数据提出建议，该怎么办。然后，它变得更有趣，因为 Redis 具有轻松快速地为您提供集合交集的功能（我们'

```
sadd friends:alex george paul bart
sadd friends:alice mary sarah bart
sinterstore friends:alex_alice friends:alex friends:alice 
```

请注意，上述操作也可以使用 mysql 完成，但是您的性能会受到影响，并且您更有可能将其作为批处理作业运行，然后存储结果以备将来使用。另一方面，请记住，世界上最大的“朋友”网络 Facebook 是从 mysql 开始存储关系的。这些关系的图表被批量处理并高度非规范化以存储在数千个 memcached 服务器中以获得良好的性能。

然后，如果您正在寻找除 mysq1 或 redis 之外的更多选项，您可能想阅读 Michael Stonebaker 所说的（他帮助创建了 Postgres 和 Ingres）关于使用 RDBMS 系统处理图数据（例如朋友关系）的内容。 [http://gigaom.com/2011/07/07/facebook-trapped-in-mysql-fate-worse-than-death/](http://gigaom.com/2011/07/07/facebook-trapped-in-mysql-fate-worse-than-death/)。当然，他正试图出售他的新 VoltDB，但这是值得深思的有趣食物。

所以我认为你真的需要根据预期负载（你只是扔掉 2000 或者这真的是你期望处理）以及功能和预算。然后真正检查市场上的许多不同选项。

# median - 计算 PostgreSQL 时态数据库中每小时时间片的中位数

> ID：14459799
> 
> 赞同：2
> 
> 时间：2013-01-22T13:33:59.943
> 
> 标签：median, postgresql-9.2

我正在研究时态数据库。我需要在时间序列数据中完成聚合。我应该找到可以是 Hour:00、Hour:01 或 Hour-1:59 的瞬时小时数，并提取与瞬时小时数前后 5 分钟相关的对应观察值。因此，从上述 5 个候选中提取中值。

```
Sample data1                                           

 Time&Date(timestamps)              Surface_Temprature
2012-11-02 00:45:09+02                  -1.770
2012-11-02 00:47:09+02                  -1.780
2012-11-02 00:49:09+02                  -1.500
2012-11-02 00:51:09+02                  -1.460
2012-11-02 00:53:09+02                  -1.720
2012-11-02 00:55:09+02                  -1.670
2012-11-02 00:57:09+02                  -1.560
2012-11-02 00:59:09+02                  -1.690
2012-11-02 01:01:09+02                  -1.970
2012-11-02 01:03:09+02                  -1.790
2012-11-02 01:05:09+02                  -1.790
2012-11-02 01:07:09+02                  -1.840
2012-11-02 01:09:09+02                  -1.910
2012-11-02 01:11:09+02                  -1.870

Sample Data2:

Date&Time (Timestamps)                  SurfaceTemprature                      
2007-09-28 23:46:14+02                  -1.320                 
2007-09-28 23:48:14+02                  -1.460                 
2007-09-28 23:50:14+02                  -1.620                 
2007-09-28 23:52:14+02                  -1.670                 
2007-09-28 23:54:14+02                  -1.640                 
2007-09-28 23:56:14+02                  -1.700                 
2007-09-28 23:58:14+02                  -1.810                 
2012-11-03 00:00:14+02                  -1.890                 
2012-11-03 00:02:14+02                  -1.790                 
2012-11-03 00:04:14+02                  -1.780                 
2012-11-03 00:06:14+02                  -1.660                 
2012-11-03 00:08:14+02                  -1.680                 
2012-11-03 00:10:14+02                  -1.900                 
2012-11-03 00:12:14+02                  -1.820                 
2012-11-03 00:14:14+02                  -1.780                 
2012-11-03 00:16:14+02                  -1.940                 
2012-11-03 00:18:14+02                  -1.900 
```

有谁能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-29T07:49:26.200

这样的事情应该做

```
SELECT 
  EXTRACT(HOUR FROM mytimestamp) AS hour,
  PERCENTILE_CONT(0.5) WITHIN GROUP(ORDER by temperature) AS median 
FROM mytable GROUP BY EXTRACT hour; 
```

# python - Python时间函数

> ID：14459802
> 
> 赞同：-1
> 
> 时间：2013-01-22T13:34:23.607
> 
> 标签：python, subprocess

我的代码如下所示：

```
import subprocess

def run_command(command):
        p = subprocess.Popen(command, shell=True,
                                stdout=subprocess.PIPE,
                                stderr=subprocess.STDOUT)

        while p.poll() is None:
                print "Loading mWorker... please wait"
                time.sleep(2)

        return p.communicate() 
```

我最初认为 p.communicate() 应该在 while 语句之前。但是我发现如果它没有放在方法的末尾，这个函数调用将会挂起（例如，在返回提示之后我看不到任何东西）。如果我运行如上所示的方法，我只会得到 1 个打印语句，然后

```
 Traceback (most recent call last):
  File "<stdin>", line 1, in ?
  File "python.py", line 10, in run_command
    time.sleep(2)
NameError: global name 'time' is not defined 
```

为什么我会看到这个？为什么时间不工作不止一次？我需要进行哪些更改才能继续看到打印声明？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:36:04.757

因为您没有导入时间模块：

```
import subprocess
import time
...
#rest of your code 
```

编辑：

您看到打印`"Loading mWorker... please wait"`消息一次的事实并不意味着它正在工作。Python 将执行涉及到的命令，在这种情况下，它知道如何打印，但`time`未定义，因此它将打印然后死在`time.sleep(2)`.
你可以证明给自己看，颠倒这两个陈述，你甚至不会再看到印刷品了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:36:00.360

您尚未导入时间模块。

# html - 纯 HTML 的母版页概念

> ID：14459811
> 
> 赞同：1
> 
> 时间：2013-01-22T13:34:40.330
> 
> 标签：html

我有一个真正的大项目，因为我有许多纯 HTML 页面。所有页面都有相同的模板，但是当我更改模板中的一个值时，我必须手动更改所有其他页面。

有没有办法像 CSS 或 CoffeeScript 的 JS 一样少做呢？

克纳德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T13:36:18.753

如果你只有纯 HTML 页面，你可以使用 SSI，尽管它有点过时并且你需要在像 Apache 这样的 Web 服务器上运行它。

[http://en.wikipedia.org/wiki/Server_Side_Includes](http://en.wikipedia.org/wiki/Server_Side_Includes)

就我个人而言，我会使用 php，所以我可以使用 php include 函数包含文件

# python - 一个数字外的数字

> ID：14459821
> 
> 赞同：0
> 
> 时间：2013-01-22T13:34:54.917
> 
> 标签：python, numbers, digits

我想知道通过将用户输入的数字相乘可以得到的最大数字是这样的：5*6*7*2 OR 567*2 OR 67*25 ...等等，所以 5/6/7/2 应该由用户作为变量输入，但是我如何告诉 python 从两个变量中形成一个数字（将两个数字放在一起，并将结果本身视为一个数字）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T13:37:27.173

> 我如何告诉python从两个变量中形成一个数字（将两个数字放在一起并将结果本身视为一个数字）

如果这两个数字存储在整数变量中，以下将执行此操作：

```
In [1]: v1 = 5

In [2]: v2 = 6

In [3]: v1 * 10 + v2
Out[3]: 56 
```

这可以概括为一系列数字：

```
In [7]: l = (1, 2, 6, 3)

In [8]: reduce(lambda x,y: x * 10 + y, l)
Out[8]: 1263 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:08:25.943

`so 5/6/7/2 should be entered by the user as variables, but how do I tell python to form a number from two variables (putting the two digits next to each other and treating the outcome as a number by itself).`

似乎您的问题的根源是从用户那里捕获数据，将其组合并进行转换：

```
>>> a = raw_input()
8
>>> b = raw_input()
3
>>> a
'8'
>>> b
'3'
>>> a + b
'83'
>>> int(a+b)
83 
```

就这么容易。

* * *

现在只要`biggest number you can make from multiplying digits entered`而言......如果你愿意，我们可以用数学证明这一点，这样你就没有一堆组合可以尝试：

我们可以对数字进行排序`a`>= `b`>=`c` >=`d`

首先让我们看一下拆分数字`3`和`1`. 我们需要比较`a * bcd`, `b * acd`, `c * abd`,`d * abc`。

与我们相比`a * bcd = 100ab + 10ac + ad`，`b * acd = 100ab + 10bc + bd`我们看到前者更大，因为`a`>= `b`。类似的论点将表明它`a * bcd`胜过其他论点。

同样，我们可以与 进行`ac * bd = 100ab + 10(ad+bc) + bd`比较`ad * bc = 100ab + 10(ac+bd) + cd`。我们宁愿有更多的大副本`a`，所以第二个获胜。

最后我们需要与`a * bcd = 100ab + 10ac + ad`比较`ad * bc = 100ab + 10(ac+bd) + cd`。第二个是赢家。

您可能将循环中的输入作为一个数组，所以如果您有：

```
(a)  arr[0] = '5'                  arr[0] = '7'
(b)  arr[1] = '6'     sort em  =>  arr[1] = '6'
(c)  arr[2] = '7'                  arr[2] = '5'
(d)  arr[3] = '2'                  arr[3] = '2' 
```

最大的将是：

```
int(arr[0] + arr[3]) * int(arr[1] + arr[2]) = 4680 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T14:10:37.987

我觉得你在你的问题中发布了一个错误。你问排列？你确定吗？

如果是这样，请参阅[@mbeckish](https://stackoverflow.com/a/14460639/881224)的答案。这很简单，在编程中不是一个很好的练习。

（然而，这是一个很好的解决技巧问题的练习）

更好的方法是放弃排列要求，以便输入的顺序实际上可以影响答案。对于这种方法，我们得到了一个更有趣的解决方案：

```
def largest_product(*args):
    numbers = ''.join(map(str, args))
    results = []
    for i in range(1, len(numbers) - 1):
        multicand  = int(numbers[:i])
        multiplier = int(numbers[i:])
        m, n = multicand, multiplier
        results.append(( m * n, "%s * %s" % (m, n)))
    return max(results)

>>> largest_product(*range(8))
(827115, '12345 * 67') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T14:16:52.647

任何让你尝试所有数字排列的解决方案都将非常低效，运行在 O(n!) 中。仅 14 位数字（和乘法运算符）将提供大约 1 万亿个组合！

O(n lg n) 解决方案将是：

1.  将数字从高到低排序。
2.  将它们连接成一个字符串。
3.  打印字符串。

~~如果你必须乘以至少一位数，那么~~

~~*   种类。*   取最高位并乘以其余数字的串联。~~
2.  ~~打印结果。~~

如果您必须乘以至少一位数字，那么您可能需要尝试所有排列（请参阅@Mike 的回答）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T13:52:23.203

我假设您将数字作为字符串获取，因此您可以简单地剥离它们，加入并转换为 int：

```
string = "5*6*7*2"
value = int( "".join(string.split('*')) )
# value == 5672 
```

# linq - Lambda 表达式“不在”C# 4.0

> ID：14459822
> 
> 赞同：0
> 
> 时间：2013-01-22T13:35:00.850
> 
> 标签：linq, entity-framework, c#-4.0

我为测试创建了这个类。我想与类的列表进行比较，并在 ListA 和 ListB 之间获得不同的类。在我的示例中，结果仅获得 ListB 类。

我对字符串列表做同样的细化并工作

**类示例**

```
public class FileNode
{
    public string Source { get; set; }
    public int Id { get; set; }
}

List<FileNode> ListA = new List<FileNode>
{
    new FileNode{ Id = 1, Source="a" },
    new FileNode{ Id = 2, Source="b" },
};

List<FileNode> ListB = new List<FileNode>
{
    new FileNode{ Id = 1, Source="a" },
    new FileNode{ Id = 2, Source="b" },
    new FileNode{ Id = 3, Source="c" },
};
List<FileNode> ListAB = ListB.Where(m => !ListA.Contains(m)).ToList(); 
```

**字符串示例，它的作品**

```
List<string> a = new List<string> {"a","b","c","d","e" };
List<string> b = new List<string> {"a","b","c","d" };
List<string> ab = a.Where(m => !b.Contains(m)).ToList(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T13:36:17.323

Well`Contains`将调用`Equals`元素 - 并且也可能使用`GetHashCode`（我对此表示怀疑，但无论如何你应该始终如一地覆盖它）。所以你需要覆盖`Equals(object)`和`GetHashCode()`in `FileNode`。（默认情况下，您将获得引用相等。）

请注意，一旦您开始尝试`Contains`在将在数据库中执行的查询中使用，它的行为可能会完全不同 - 此时它不会查看您的`Equals`/`GetHashCode`方法。

# file-io - vbs 类型不匹配错误 800a000d 类型不匹配：readfile

> ID：14459823
> 
> 赞同：0
> 
> 时间：2013-01-22T13:35:01.970
> 
> 标签：file-io, vbscript

我是 vbs 的新手，在 set arr = readfile( FileName ) 行出现错误

我正在尝试将文件读入数组

并且无法弄清楚我做错了什么

提前感谢你的帮助

```
 Dim FileName ' File Name to Process
 Call MainProcedure
 WScript.Quit

 Sub MainProcedure
   filename = "c:\print\check.bat"
   WScript.Echo( "Printing document in progress..." )
   WScript.Echo( "Filename ====> " & FileName )
   Dim arr, i
   i = 0
   set arr = readfile( FileName )
   For Each present In arr
     ' user = split(present,",")
     ' WScript.Echo user(0) & user(1) & user(2) & user(3) & user(4) & "|"
     i = i + 1
     WScript.Echo present & "|"
   Next
End Sub

Sub readfile(strFile)
  dim fs,objTextFile
  set fs=CreateObject("Scripting.FileSystemObject")
  If (fs.FileExists( strFile)) Then
     dim userArrayList
     set objTextFile = fs.OpenTextFile(strFile)
     Set userArrayList = CreateObject( "System.Collections.ArrayList" )
     Do Until objTextFile.AtEndOfStream
        strNextLine = objTextFile.Readline
        userArrayList.add strNextLine
     Loop
     objTextFile.Close
     set objTextFile = Nothing
     set fs = Nothing
     set readfile = userArrayList
  Else
     'Alert User
     WScript.Echo("File does not exist!")
     WScript.Quit()
  End If
end Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T14:07:31.297

您的

```
set arr = readfile( FileName ) 
```

意味着这`readfile()`是一个函数（返回一个 ArrayList）。但是你定义

```
Sub readfile(strFile)
...
set readfile = userArrayList
...
end Sub 
```

您可以尝试将其更改为

```
Function readfile(strFile)
...
set readfile = userArrayList
...
End Function 
```

**添加：**

任务“将文件的行读入数组”可以用更简单的方式完成：

```
cscript fitoar.vbs
0 Option Explicit
1 Dim a : a = Split(CreateObject("Scripting.FileSystemObject").OpenTextFile("fitoar.vbs").ReadAll(), vbCrLf)
2 Dim l
3 For l = 0 To UBound(a)
4     WScript.Echo l, a(l)
5 Next
6 
```

# python - 占位符在 django-cms 中不起作用

> ID：14459826
> 
> 赞同：1
> 
> 时间：2013-01-22T13:35:13.930
> 
> 标签：python, django, content-management-system, django-cms

我正在使用 django cms 开发一个站点，配置了一切并且工作正常，下面是我的代码文件

**设置.py**

```
 ........
   ........

TEMPLATE_CONTEXT_PROCESSORS = (
       'django.contrib.auth.context_processors.auth',
       'django.core.context_processors.i18n',
       'django.core.context_processors.request',
       'django.core.context_processors.media',
       'django.core.context_processors.static',
       'cms.context_processors.media',
       'sekizai.context_processors.sekizai',
)

CMS_PLACEHOLDER_CONF = {
    'terms_and_conditions': {
        'name': gettext('Terms & Conditions'),
        'plugins': ['TextPlugin'],
    },
}

CMS_TEMPLATES = (
       ('home.html', 'Home Page'),
)

........
....... 
```

**网址.py**

```
from django.conf.urls import patterns, include, url
from django.conf.urls.defaults import *
from django.conf.urls.i18n import i18n_patterns
from django.conf import settings
from django.contrib import admin

admin.autodiscover()

urlpatterns = patterns('',
     url(r'^admin/', include(admin.site.urls)),
     url(r'^', include('cms.urls')),
) 
```

**base.html**

```
{% load cms_tags sekizai_tags menu_tags %}
<html>
<head> 
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Welcome to Services</title>
{% render_block "css" %}
</head>
<body>
{% cms_toolbar %}
    <div class="promoinner">
       {% block base_content %}{% endblock %} 
    </div>
  {% render_block "js" %}
</body>
</html> 
```

**主页.html**

```
{% extends "base.html" %}
{% load cms_tags %}

{% block base_content %}
   {% placeholder "terms_and_conditions" or  %}
       <p>This data should be present in the editor in editing mode before entering anything in to plugins, because this data is giving through html</p>
       <p>But when i tried to edit the placeholder i cant see the data(that we mentioned in tags of html file), i can able to see the placeholder and i can able to add some data in to text plugin </p>
   {% endplaceholder %}
{% endblock %} 
```

这里所有的问题是，我们通过`p`html 文件中的标签提供一些数据，所以当我打开 url 时`http://localhost:8000/?edit`，我可以看到 `Terms & Conditions`我们在 settings.py 文件中提到的占位符，但是我们在 html 中提供的数据通过标签的文件不可编辑且看不到，同时我可以使用`text`插件将一些文本添加到占位符中。

谁能告诉我为什么通过html标签提到的数据`home.html`不可编辑甚至看不到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:16:54.300

尝试在“base.html”或“home.html”中加载占位符标签（看起来像您丢失的“placeholder_tags”）......

{% load cms_tags sekizai_tags menu_tags placeholder_tags %}

# python - 如何在 setup.py 脚本中设置错误跟踪器 url

> ID：14459828
> 
> 赞同：25
> 
> 时间：2013-01-22T13:35:22.213
> 
> 标签：python, setup.py, pypi

我刚刚发现 pypi Web UI 在编辑 egg 元数据时有一个“Bug tracker URL”字段。

该字段存在，所以我猜它在 setup.py 中受支持，但我无法使用谷歌找到任何关于此的内容。

所以问题是如何在我的 setup.py 中设置此字段，以便在 pypi 上进行 dist 发布时可以自动填充它。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-22T13:55:46.057

该条目被调用`bugtrack_url`，但它不是从 中提取的`setup.py`。

从[上下文](https://twitter.com/jezdez/status/274420414422335488)和[代码](https://bitbucket.org/loewis/pypi/commits/29c38d0902719c46d7378bc19e13cb9f15c65d31)来看，我理解它的目的是仅在 PyPI 上通过网络使用，作为每个项目的元数据，而不是通常的每个发布信息。

该字段现在被视为[旧字段](https://github.com/pypa/warehouse/issues/233)（硬编码为），您可以通过[Project-URL 列表](http://www.python.org/dev/peps/pep-0345/#project-url-multiple-use)`None`添加此类信息，您可以通过以下[条目](https://packaging.python.org/guides/distributing-packages-using-setuptools/#project-urls)进行设置：`setuptools`[`project_urls`](https://packaging.python.org/guides/distributing-packages-using-setuptools/#project-urls)

```
 project_urls={
        'Documentation': 'https://packaging.python.org/tutorials/distributing-packages/',
        'Funding': 'https://donate.pypi.org',
        'Say Thanks!': 'http://saythanks.io/to/example',
        'Source': 'https://github.com/pypa/sampleproject/',
        'Tracker': 'https://github.com/pypa/sampleproject/issues',
    }, 
```

此选项[最终`setuptools`于 2017 年 11 月](https://github.com/pypa/setuptools/commit/df2246449c271c07586bcecc3eaa36e9b0e94e3d)添加到38.3.0 版本中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-05-21T17:44:40.890

# PyPi 项目上的错误跟踪器 URL

在 setup.py在 setup 中使用[project_urls ：](https://packaging.python.org/guides/distributing-packages-using-setuptools/#project-urls)

```
setup(
...
    project_urls={
        'Documentation': 'https://readthedocs.io/',
        'Funding': 'https://donate.pypi.org',
        'Say Thanks!': 'http://saythanks.io/to/example',
        'Source': 'https://github.com/pypa/sampleproject/',
        'Tracker': 'https://github.com/pypa/sampleproject/issues',
    },
...
) 
```

字典顺序被保留，但[在 PyPi 上以相反](https://github.com/pypa/warehouse/issues/3097)的顺序列出：

[![在此处输入图像描述](../Images/35a245c7a8e8024c68290a3e5d0a2cc7.png)](https://i.stack.imgur.com/kuKz9.png)

# 关于 PyPi`bugtracker_url`遗留代码

[pypa/仓库问题 #233](https://github.com/pypa/warehouse/issues/233#issuecomment-37069593)

> bugtrack_url：IIRC 它是 PyPI 维护者添加的东西来帮助项目，但同时 PEP 345 引入了 Project-URL，旨在涵盖源代码存储库、错误跟踪器、邮件列表等。如果 PEP 426 或其伴侣之一保留Project-URL（并且可能使用为常见站点定义的标签来改进它，例如“存储库”），那么这种特殊情况就变得多余了。

和

> 目前，看起来这在他们的 API 中被硬编码为 None 。我猜他们在迁移时离开了这个领域是为了向后兼容......

# c# - C# 字典键不存在

> ID：14459836
> 
> 赞同：-3
> 
> 时间：2013-01-22T13:35:50.837
> 
> 标签：c#, wpf, dictionary, key

我正在创建一个简单的 mp3 播放器，只是为了看看 Dictionary 是如何工作的。我的项目中有 6 个类，其中 2 个是不相关的。第一类包括标签，第二类是搜索，第三类是播放，第四类是抽象类，包括字典。搜索类和播放类都继承自第四类。

当我去搜索时，对象已成功添加到字典`Dictionary dict<string, Tags>`中，并且标签是从 Tags 类中添加的。我的问题是，当我尝试从 Play 类中获取从字典中获取路径时，它说密钥不存在。代码是`dict[playSongName].Path;`，其中 playSongName 是存储在字典中的歌曲的名称。

```
class Player : Liste
{
        public void Play(string playSongName)
        {
            currentSongPath = dictPesmi[playSongName].Path; // Error here, key was not found
            currentSongName = playSongName;
            media.Source = new Uri(currentSongPath);
            media.Play();
        }
}

abstract class Liste
{
    public Dictionary<string, Tagi> dictPesmi = new Dictionary<string, Tagi>();
    public Id3TagClass id3tagi = new Id3TagClass();
}

class Search : Liste
{

    string[] filesFound;
    const string extension = "*.mp3";

    public void Find(string searchPath)
    {
        if (Directory.Exists(searchPath))
        {
            filesFound = Directory.GetFiles(searchPath, extension, SearchOption.AllDirectories);
            foreach (string filePath in filesFound)
            {
                string[] filePathSplit = filePath.Split('\\');
                string fileName = filePathSplit[filePathSplit.Length - 1];

                dictPesmi[fileName] = new Tagi() { Path = filePath, Name = fileName };
                dictPesmi[fileName].Author = id3tagi.GetArtist(filePath);
                dictPesmi[fileName].Album = id3tagi.GetAlbum(filePath);
                dictPesmi[fileName].Title = id3tagi.GetTitle(filePath);
                System.Windows.MessageBox.Show(dictPesmi[fileName].Path);
            }

        }

    }
}

class Tagi
{

    string path;
    string name;
    string title;
    string author;
    string album;

    public string Album
    {
        get { return album; }
        set { album = value; }
    }

    public string Author
    {
        get { return author; }
        set { author = value; }
    }

    public string Title
    {
        get { return title; }
        set { title = value; }
    }

    public string Name
    {
        get { return name; }
        set { name = value; }
    }

    public string Path
    {
        get { return path; }
        set { path = value; }
    }

} 
```

主班

```
public partial class MainWindow : Window
{

    Player player = new Player();
    Search search = new Search();

   // string selectedSong;

    public MainWindow()
    {
        InitializeComponent();
    }

    public void KeyDownEvent_(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.F1)
            player.Play(lbPlaylist.Items[lbPlaylist.Items.IndexOf(lbPlaylist.SelectedItem)].ToString());// passed string
        if (e.Key == Key.F3)
            search.Find(tbSearch.Text);
        if (e.Key == Key.F5)
        {
            foreach (Tagi d in search.dictPesmi.Values)
            {
                if (!lbPlaylist.Items.Contains(d.Name))
                    lbPlaylist.Items.Add(d.Name);
            }
        }
        if (e.Key == Key.F9)
        {

        }
    } 
```

当我按 F1 时，出现描述的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:16:33.763

您的问题是您正在填充 Search 实例中包含的 Dictionary ，但您正在查找 Player 实例中包含的字典中的数据，该实例仍然为空。

每次创建从 Liste 派生的类的实例时，都会创建一个新的空字典。事情可以按如下方式修改您的代码，但这并不是真正面向对象的，我认为它真的“丑陋”，我会改为更改您的应用程序的设计：

```
public void KeyDownEvent_(object sender, KeyEventArgs e)
{
    if (e.Key == Key.F1)
        player.Play(lbPlaylist.Items[lbPlaylist.Items.IndexOf(lbPlaylist.SelectedItem)].ToString());// passed string
    if (e.Key == Key.F3)
        search.Find(tbSearch.Text);
    if (e.Key == Key.F5)
    {
        foreach (Tagi d in search.dictPesmi.Values)
        {
            if (!lbPlaylist.Items.Contains(d.Name))
                lbPlaylist.Items.Add(d.Name);
        }
        // add this line to use the data just collected:
        player.dictPesmi = search.dictPesmi;
    }
    if (e.Key == Key.F9)
    {

    }
} 
```

# django - 如何使用for循环遍历django中的多个列表

> ID：14459839
> 
> 赞同：0
> 
> 时间：2013-01-22T13:35:58.830
> 
> 标签：django

模板.html

```
{% extends "base.html" %}

<body background="100%">
{% block content %}
<!--<table class="table" align="right"style=" margin-right:10px">-->
<form action="." method="post">
{% csrf_token %}

<table align="right" style="margin-right:27px ,margin-top:-20px";>

        <p>{{GeneratorService_form.as_table}}</p>
        <p>{{FuelUsuage_form.as_table}}</p>
<tr><td colspan="2" align="right"><input name="KEBsubmit" type="submit" value="Submit Reading" id="_KEBsubmit1"/> </td></tr>
    <!--<tr><td colspan="2" >{{KEBMessage}} </td></tr>-->

</table>
 </form>

<table align="left" border="1">
<p> Generator Service Readings </p>
<tr>
<th>Date </th>
<th>Time</th>
<th>Running time</th>
<th>Next Service Reading</th>
<th>Running Difference</th>
<th>Part Changed</th>
<th>Fuel Type</th>
<th>Fuel quantity</th>
<th>Fuel Balance</th>
 </tr>
 <tr>
    {% for item,item1 in q2,q3 %}
 <td>{{item.date}}</td>
 <td>{{item.time}}</td>
 <td>{{item.runningtime_reading}}</td>
 <td>{{item.next_service_reading}}</td>
  <td>{{item.running_diff}}</td>
   <td> {{item.part_changed}}</td>
    <td>{{item1.type}}</td>
    <td>{{item1.balance}}</td>
    <td>{{item1.quantity}}</td>
 </tr>
 {% endfor %}
</table>

{% endblock content %} 
```

视图.py

```
def GENService(request):
    q2=GeneratorService.objects.all().order_by('date')[:30]
    q3=FuelUsuage.objects.all().order_by('date')[:30]
    if request.method=="POST":
        form=GeneratorService_form(request.POST)
        form2=FuelUsuage_form(request.POST)
        if form.is_valid():
            prevdate=GeneratorService.objects.latest("date")
            prevdate1=FuelUsuage.objects.latest("fu_date")
            print prevdate.date
            print prevdate.time
            running_time = form.cleaned_data["runningtime_reading"]
            gs_next_service_reading=running_time+250
            gs_running_diff=running_time-prevdate.runningtime_reading
            form1=form.save(commit=False)
            form1.running_diff=gs_running_diff
            form1.next_service_reading=gs_next_service_reading
            form1.save()
            form2.save()

            q2=GeneratorService.objects.all().order_by('date')[:30]
            q3=FuelUsuage.objects.all().order_by('date')[:30]
            print q2.values()

            context={'GeneratorService_form':form,'FuelUsuage_form':form2,'q2':q2,'q3':q3}                              return                          render_to_response('serv.html',context,context_instance=RequestContext(request))

   else:
        form = GeneratorService_form()
        form2=FuelUsuage_form()
    return render_to_response('serv.html',{'GeneratorService_form':form,'FuelUsuage_form':form2,'q2':q2,'q3':q3},context_instance=RequestContext(request)) 
```

如何在模板的 for 循环中使用两个列表。我得到一个错误无法解析剩余部分：来自'q2，q3'的'，q3'。基本上我在模板中组合了两个表单并希望在同一模板中显示来自数据库的数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:40:48.743

你不想那样做。大概这两个模型之间存在某种关系——ForeignKey、OneToOne、ManyToMany？如果是这样，您应该遍历其中之一，并按照关系获取相关项目。

# jsf-2 - 如何在支持 bean 中检索 ui:param 的值

> ID：14459854
> 
> 赞同：5
> 
> 时间：2013-01-22T13:36:36.987
> 
> 标签：jsf-2, parameters, el

我将参数传递`p1`给另一个页面`page.xhtml`：

```
<ui:include src="page.xhtml">
    <ui:param name="p1" value="#{someObject}"/>
</ui:include> 
```

这是否可以`#{p1}`在支持 bean 的 @PostConstruct 方法内部进行评估`page.xhtml`？使用以下代码，`#{p1}`无法解决：

```
FacesContext currentInstance = FacesContext.getCurrentInstance();
currentInstance.getApplication().evaluateExpressionGet(currentInstance, "#{p1}", String.class); 
```

**为什么我需要这个？**

我使用 xhtml 文件（比如 component.xhtml）作为自定义 UI 组件。这个文件有一个支持 bean，我应该从中获取组件数据。由于我在我的主 JSF 页面中包含此 xhtml 文件两次或更多次，因此我想将不同的对象传递给每个 component.xhtml，以便我的组件每次都使用我的自定义数据。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T16:33:49.967

在 Mojarra 中，您可以将其作为[`FaceletContext`](http://docs.oracle.com/javaee/6/api/javax/faces/view/facelets/FaceletContext.html). 您可以在托管 bean 中获取它，该bean 保证在包含的页面中第一次被引用/构造（因此在组件树中声明之前*不在*`@PostConstruct`父页面中）。*`<ui:param>`*

 *```
FaceletContext faceletContext = (FaceletContext) FacesContext.getCurrentInstance().getAttributes().get(FaceletContext.FACELET_CONTEXT_KEY);
Object p1 = faceletContext.getAttribute("p1"); 
```

在 MyFaces 中，`FaceletContext`托管 bean 中的整体不可用，因为它在视图构建时间结束时被丢弃，然后此构造将不起作用。要独立于 JSF 实现，您可能需要考虑改为通过设置它`<c:set scope="request">`。然后它可以作为请求属性使用。

至于具体的功能要求，请考虑创建一个带有支持组件的复合组件。有关一些示例，请参阅[我们的复合组件 wiki 页面和有关](https://stackoverflow.com/tags/composite-component/info)[在复合组件中使用多个输入组件的](http://balusc.blogspot.com/2013/01/composite-component-with-multiple-input.html)博客。另请参阅[何时使用 <ui:include>、标记文件、复合组件和/或自定义组件？](https://stackoverflow.com/questions/6822000/when-to-use-uiinclude-tag-files-composite-components-and-or-custom-componen/6822269#6822269)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-17T10:36:24.893

@PostConstruct 方法中没有该参数；您可以使用 preRenderComponent 事件来初始化支持 bean 中的参数；只需将其放在被包含页面的 ui:composition 之后，它将在被包含页面本身的渲染之前执行。

遵循将 p1 参数传递给 page.xhtml 模板的 OP 示例

主页：

```
<ui:include src="page.xhtml">
    <ui:param name="p1" value="#{someObject}"/>
</ui:include> 
```

page.xhtml：

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    ...>

<ui:composition>
    <f:event listener="#{backingBean.init(p1)}" type="preRenderComponent"/>
        ...

</ui:composition>

</html> 
```

BackingBean.java：

```
@ViewScoped
 public class BackingBean{

     private Object p1;
     public void init(Object value){        
     this.p1=p1;
    }

    ...
 } 
```

该事件在 ui:composition 标签渲染之前触发，即在 page.xhtml 渲染之前

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-03T15:06:06.827

这对我有用：

```
<ui:include src="page.xhtml">
     <ui:param name="p1" value="#{someObject}"/>
</ui:include> 
```

page.xhtml：

```
<c:set var="data" value="#{p1}" scope="request"/> 
```

你的豆子：

```
@ViewScoped
public class ManagedBean{

     private Object someObject;

     public Object getSomeObject(){
         if(someObject== null){
            HttpServletRequest request = (HttpServletRequest)FacesContext.getCurrentInstance().getExternalContext().getRequest();
            someObject= request.getAttribute("data");
          }
          return someObject;
     }

     public void setSomeObject(Object someObject){
          this.someObject = someObject;
     }} 
```*

# python - 如何在 Python 中使用分隔符将长字符串分成 3 个不同的字符串

> ID：14459855
> 
> 赞同：0
> 
> 时间：2013-01-22T13:36:38.057
> 
> 标签：python, python-2.7

我有这个字符串：`500 Minutes + Unlimited Text + Your Choice of Data`

我想将它分成 3 个不同的字符串并将其存储在 3 个不同的变量中，数据为

1) 500 分钟 2) 无限文本 3) 您选择的数据。

我想`+`在这个过程中用作分隔符，无论何时`+`，为以下文本创建一个新变量，直到另一个`+`。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T13:37:24.173

如果您知道恰好有三个变量：

```
text = "500 Minutes + Unlimited Text + Your Choice of Data"
a, b, c = [part.strip() for part in text.split('+')]
print a
print b
print c 
```

印刷：

```
500 Minutes
Unlimited Text
Your Choice of Data 
```

# bash - 尝试打印到 bash 脚本中的多个文件时出错

> ID：14459856
> 
> 赞同：0
> 
> 时间：2013-01-22T13:36:39.843
> 
> 标签：bash, writetofile

我遇到了与写入文件有关的问题。
我已经`server/client`在`c`(for `Linux`, via `sockets`) 中创建了。
我希望`clients`保存一个包含他们所做的所有操作的日志文件。当我打开客户端并传输文件时，一切正常，但是当我检查服务器的多请求支持（通过创建一个检查所有内容的 bash 脚本）时，我发现我的客户端都没有写任何东西。

客户端命令是：`./client_prog host port file_to_receive log_file`

脚本：

```
cd client1/
./client_prog localhost 22222 file.txt log &
cd client2/
./client_prog localhost 22222 file.txt log &
cd client3/
./client_prog localhost 22222 file.txt log &
#more clients.... 
```

每个客户端创建日志线程并使用管道传输数据，日志线程使用`fopen`（），`fprintf`（）和`fclose`（）写入。

顺便说一句，当我从两个不同的终端尝试时，它工作正常。
这没有任何意义。。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:56:28.670

那是您的确切脚本（或简化的spinet）吗？

在尝试移动到其他客户端目录之前（在第一个客户端之后），您确定不想执行“ **cd .. ”吗？**因为如果您最初的 ' **cd client2** ' 失败，那么您最终会尝试使用相同的 ' **file.txt** ' 和 ' **log** ' 启动客户端，这可能会导致您出现一些错误？

# ios - 从情节提要本地化属性 UITextView

> ID：14459860
> 
> 赞同：18
> 
> 时间：2013-01-22T13:36:43.143
> 
> 标签：ios, xcode, localization, nsattributedstring

我正在使用情节提要并有一个视图，其中我对一些 UITextViews 进行了子类化。

我的问题是我`ibtool --generate-strings-file`用来从情节提要中提取字符串以进行本地化，然后`ibtool -write`在另一个情节提要文件上使用以应用翻译的字符串。

当我使用`ibtool`任何具有属性文本的 UITextViews 时，命令会忽略该`ibtool --generate-strings-file`命令并从生成的字符串文件中省略。

是否可以从情节提要中提取属性文本以进行本地化？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-12-01T10:38:12.367

在 Xcode 6.1 上，最好的方法是将文本视图的属性文本复制到“BASE”RTF 文本中（例如使用 TextEdit 或直接从 XCode > New File > ressources > RTF ）。

通过 TextEdit 方式，您需要将文本导入到您的项目中。显然，如果您是通过 Xcode 完成的，则无需导入任何内容。

然后你只需使用实用程序面板找到“本地化...”按钮，它会为你做这件事。

导入正确的版本就行了（例如在 viewWillAppear 中），

```
 NSURL *url = [[NSBundle mainBundle] URLForResource:[fileName stringByDeletingPathExtension] withExtension:[fileName pathExtension]];
NSError *error;
NSAttributedString *attributedString = [[NSAttributedString alloc] initWithFileURL:url
                                                                           options:@{NSDocumentTypeDocumentAttribute:NSRTFTextDocumentType}
                                                                documentAttributes:nil
                                                                             error:&error];

[_originalMessage setAttributedText:attributedString]; 
```

**Swift 4 的更新：**

```
var attrString: NSAttributedString?
let fileUrl: URL = Bundle.main.url(forResource: "mytextfile", withExtension: ".rtf")!

do {
   attrString = try NSAttributedString(url: fileUrl, options: [.documentType:NSAttributedString.DocumentType.rtf], documentAttributes: nil)
} catch {
    // Somebody do something!!        
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T13:03:18.080

`ibtool`我最终得出结论，在当前版本中无法使用它。

相反，我让 Textview 成为纯文本视图，并使用我的子类解析它的 text 属性，以便我可以创建`NSMutableAttributedString`并设置所需的属性。

这使我能够`ibtool`用来提取字符串并仍然具有属性的文本视图。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-08-07T10:23:35.257

本地化故事板中的属性文本是没有意义的，因为您需要知道在翻译后在哪里应用属性。词序可能已经改变，例如，您在哪里指定了一些蓝色粗体文本可能不再有意义。

当然，您仍然可以通过代码来执行此操作，您可以将字符串拆分为多个字符串并单独本地化它们。然后您可以指定 setAttributes:range: 以便您知道正确的属性将始终应用于字符串的正确范围。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-08-26T11:55:53.160

这是一个我觉得非常有用的解决方法：只需使用翻译后的 TextView 创建一个 ViewController。详细说明（这里我只是将属性文本翻译成英文）：

1) 使用“新文件”->“带有 Xib 的 UIViewController”创建一个新控制器。将其命名为“AttributedTranslated”，并使用 Interface Builder 仅用 TextView 填充正在翻译的属性文本。

2) 在您的主控制器 .m 文件中，记下以下方法：

```
- (BOOL)isEng {
    return [[[NSLocale preferredLanguages] objectAtIndex:0] isEqualToString:@"en"];
} 
```

3）在你的.h文件中定义一个“AttributedTranslated”对象和一个视图

```
IBOutlet UIView            *attrView;    
AttributedTranslated       *attr; 
```

4) 在主控制器的 xib 文件（或情节提要）上，创建一个仅包含属性 textView（原始语言）的视图，并将其链接到“attrView”。

5）在你 viewDidLoad 做类似以下的事情：

```
if ([self isEng]) {

    desc = [[Description alloc] init];
    [attrView addSubview:attr.view];
} 
```

* * *

也许这不是最好的方法，但它确实允许在 Interface Builder 中轻松翻译属性文本！

# java - 无法加载或实例化 TagLibraryValidator 类：org.apache.taglibs.standard.tlv.JstlCoreTLV

> ID：14459873
> 
> 赞同：9
> 
> 时间：2013-01-22T13:37:09.450
> 
> 标签：java, jsp, jstl, osgi, taglib

所以我在 Gemini 运行时的 OSGi 中使用 JSTL。当我尝试访问我的网址时，我遇到了以下异常`servlet`：-

```
SEVERE: Servlet.service() for servlet jsp threw exception
org.apache.jasper.JasperException: /WEB-INF/login.jsp (line: 3, column: 66) Unable to read TLD "META-INF/c.tld" from JAR file "file:/D:/OSGi%20Runtime/Gemini/gemini-web/dep/com.springsource.javax.servlet.jsp.jstl-1.2.0.v20110728.jar": org.apache.jasper.JasperException: Failed to load or instantiate TagLibraryValidator class: org.apache.taglibs.standard.tlv.JstlCoreTLV 
```

但是，我已经检查过，我已经在我的运行时拥有了所有必要的包。我拥有的相关捆绑包是：-

```
71  ACTIVE      javax.servlet_3.0.0.v201103241009
73  ACTIVE      javax.el_2.2.0.v201105051105
74  ACTIVE      javax.servlet.jsp_2.2.0.v201103241009
75  ACTIVE      com.springsource.javax.servlet.jsp.jstl_1.2.0.v20110728
121 ACTIVE      com.springsource.org.apache.taglibs.standard_1.1.2.v20110517 
```

还有更多捆绑包，但那些是相关的。所以，我不明白出了什么问题。

从我下载捆绑包的[Spring Source Repository](http://ebr.springsource.com/repository/app/)中，很明显[org.apache.taglibs.standard](http://ebr.springsource.com/repository/app/bundle/version/detail?name=com.springsource.javax.servlet.jsp.jstl&version=1.2.0.v20110728&searchType=bundlesBySymbolicName&searchQuery=com.springsource.javax.servlet.jsp.jstl) bundle - *Bundle 121*包含`JstlCoreTLV class`. 所以，不确定，这里发生了什么。

这是我`JSP`正在使用的标题（以防万一，它是相关的）：-

```
<%@ taglib prefix = "c" uri = "http://java.sun.com/jsp/jstl/core" %> 
```

我正在使用： -

*   `Servlet 3.0`
*   `JSP 2.2`
*   `Gemini Runtime 2.1`
*   `JSTL 1.2.0`

* * *

**更新： -**

下面描述的问题似乎已经解决，现在我没有收到任何警告，如下所示。那是因为，我有`taglibs.standard_1.1.2`- ( **Bundle 121** )，它与其他人不兼容。所以，我删除了它，警告就消失了。

因此，您可以忽略从这里开始的任何内容。但是，上面的问题仍然存在。我还是明白了`JasperException`。这可能会有所帮助，因为由于@BalusC 的宝贵意见，现在问题域有所减少。

* * *

**解决之后的部分。所以，你可以忽略它： -**

另外，我不确定我拥有的 OSGi JSTL 捆绑包的版本`Bundle 75`是否与其他捆绑包兼容 - `javax.el`、`taglibs`、`servlets`等，或者不兼容。因为我正在使用`JSTL 1.2.1`，但我无法获得`JSTL 1.2.1`. 我得到的是我使用的捆绑包（`JSTL 1.2.0`）。为什么这让我感到困扰是因为当我启动我的应用程序时出现了这些类型的消息： -

```
Jan 22, 2013 7:14:05 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/core is already defined
Jan 22, 2013 7:14:05 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jsp/jstl/core is already defined
Jan 22, 2013 7:14:05 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/fmt_rt is already defined
Jan 22, 2013 7:14:05 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/fmt is already defined
Jan 22, 2013 7:14:05 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jsp/jstl/fmt is already defined
Jan 22, 2013 7:14:05 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jsp/jstl/functions is already defined 
```

如您所见，上面显示了两个不同的 URL：-

*   网址：`http://java.sun.com/jstl/core`
*   网址：`http://java.sun.com/jsp/jstl/core`

现在，AFAIK 这两个 URL 不属于相同的`JSTL`版本。那么，这会引发一些问题吗？他们来的原因是什么？我刚用过一个`JSTL bundle`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T02:13:10.110

```
com.springsource.javax.servlet.jsp.jstl_1.2.0.v20110728
com.springsource.org.apache.taglibs.standard_1.1.2.v20110517 
```

您正在将 JSTL 1.2.0 API+impl 与 JSTL 1.1.2 impl 混合。

这两个 impl 相互冲突，这解释了您所看到的所有麻烦。

摆脱 1.1.2 impl。

### 也可以看看：

*   [我们的 JSTL 维基页面](https://stackoverflow.com/tags/jstl/info)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:28:07.597

这只是在黑暗中的一个镜头。不确定您是否遇到以下链接。

您发布的错误消息“无法加载或实例化 TagLibraryValidator 类：org.apache.taglibs.standard.tlv.JstlCoreTLV”似乎很常见。

从这个链接： [http ://christerblog.wordpress.com/2010/05/04/tag-library-woes-deploying-war-on-tomcat-6/](http://christerblog.wordpress.com/2010/05/04/tag-library-woes-deploying-war-on-tomcat-6/)

您的 WAR 文件中是否有任何冲突/不兼容的 jar 库？

这里的另一个也指向构建路径中不兼容的jar： [无法读取TLD“META-INF/c.tld”](https://stackoverflow.com/questions/3452403/unable-to-read-tld-meta-inf-c-tld)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-05T07:02:42.410

我从 升级`Tomcat 8`到`Tomcat 9`，其中`125: jstl.jar,taglibs-standard-spec-*.jar,`有`catalina.properties`. 这是否意味着 jstl 是预安装的，不像 tomcat 8 中`jstl 1.2`需要的`build.gradle`？

因为我必须删除以下几行才能让它工作

```
//compile group: 'javax.xml.bind', name: 'jaxb-api', version: '2.3.0'
//compile group: 'javax.servlet.jsp.jstl', name: 'jstl', version: '1.2' 
```

如果我的回答不正确，请告诉我我很乐意删除它。因为@BalusC 的回答给了我线索。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-09T13:28:31.753

我的 JSP 文件遇到了完全相同的问题。

服务器 - Tomcat 10

我从我的 JSP 中删除了标签库（如下），它对我有用

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-28T09:48:38.950

首先，我认为我无法真正回答这个问题，不知道这是否与您有关。

在我切换到[Pax Web](http://team.ops4j.org/wiki/display/paxweb/Pax+Web)之前，我也一直在努力解决这个问题。它几乎是开箱即用的。我*打算*回去弄清楚为什么我以前的设置不起作用，但是，它从未发生过。

因此，如果在您的情况下可能，请使用 Pax Web 而不是手动挑选您自己的捆绑包。

# python - 为什么方法 set_color_foreground 及其同伴 set_color_XXX 在 Vte ( Python - Gtk3 ) 中不起作用？

> ID：14459877
> 
> 赞同：3
> 
> 时间：2013-01-22T13:37:19.750
> 
> 标签：python, gtk, pygtk, pygobject, vte

我正在 Python + Gtk3 中使用 Vte 编写应用程序。
我无法更改所有颜色。

例如，对于前景色，我尝试了这段代码，但文本颜色没有改变：

```
class Shell(Gtk.Box):
    def __init__(self,on_close_button_cb,path = ""):
        super(Shell,self).__init__(orientation=Gtk.Orientation.VERTICAL)

        v = Vte.Terminal()
        v.set_color_foreground(Gdk.Color(65535,0,0))
        v.set_size(80,80)
        v.show_all()

        if path == "":
            path = os.environ['HOME']

        self.vpid = v.fork_command_full( Vte.PtyFlags.DEFAULT, path, ["/bin/bash"], [], GLib.SpawnFlags.DO_NOT_REAP_CHILD, None, None,)
        self.pack_start(v,True,True,0)

        self.set_visible(True) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-27T10:12:22.563

必须在实现终端小部件后更改 Vte.Terminal() 小部件的颜色。否则，不考虑使用 set_colors()、set_color_foreground() 等方法完成的颜色更改。

以下工作示例提出了两种执行此操作的方法。该示例使用调色板和 set_colors()，但如果您想使用 set_color_foreground() 或其他 set_color_*() 方法，同样适用。就个人而言，我更喜欢选项1：

```
import gi
gi.require_version('Gtk', '3.0')

from gi.repository import Gtk, Gdk, Vte, GLib

palette_components = [ 
    (0, 0x0707, 0x3636, 0x4242),    # background
    (0, 0xdcdc, 0x3232, 0x2f2f),
    (0, 0x8585, 0x9999, 0x0000),
    (0, 0xb5b5, 0x8989, 0x0000),
    (0, 0x2626, 0x8b8b, 0xd2d2),
    (0, 0xd3d3, 0x3636, 0x8282),
    (0, 0x2a2a, 0xa1a1, 0x9898),
    (0, 0xeeee, 0xe8e8, 0xd5d5),    # foreground
    (0, 0x0000, 0x2b2b, 0x3636),
    (0, 0xcbcb, 0x4b4b, 0x1616),
    (0, 0x5858, 0x6e6e, 0x7575),
    (0, 0x6565, 0x7b7b, 0x8383),
    (0, 0x8383, 0x9494, 0x9696),
    (0, 0x6c6c, 0x7171, 0xc4c4),
    (0, 0x9393, 0xa1a1, 0xa1a1),
    (0, 0xfdfd, 0xf6f6, 0xe3e3)
    ]

palette = []
for components in palette_components:
    color = Gdk.Color(components[1], components[2], components[3])
    palette.append(color)

def terminal_realize_cb(terminal):
    terminal.set_colors(None, None, palette)

if __name__ == '__main__':
    window = Gtk.Window()
    window.connect('delete-event', Gtk.main_quit)

    terminal = Vte.Terminal()

    # Option 1: connect to the terminal widget's realize event
    # and call it's set_colors() method there
    terminal.connect('realize', terminal_realize_cb)

    terminal.fork_command_full(Vte.PtyFlags.DEFAULT,
                               None,
                               ['/bin/bash'],
                               [],
                               GLib.SpawnFlags.DO_NOT_REAP_CHILD,
                               None,
                               None)

    window.add(terminal)
    window.show_all()

    # Option 2: call the terminal's set_colors() method
    # after the window has been shown (which indirectly
    # realizes the terminal widget)
    #terminal.set_colors(None, None, palette)

    Gtk.main() 
```

# asp.net - 我可以在 asp 中控制我的 ID 和名称标签吗？网络4.0？

> ID：14459882
> 
> 赞同：0
> 
> 时间：2013-01-22T13:37:35.190
> 
> 标签：asp.net

当我使用 asp.net 控件（如输入）时，我在标记中指定一个 ID；但是，当我部署该解决方案时，它的前缀是一些自动生成的 ASP.net 标识符，最后附加了我的原始 ID。

我不想使用其他 SO 问题中存在的服务器端标记解决方法来给我的 jQuery 一个固定的 ID 以锁定，因为它不鼓励使用外部 JS 文件。4.0 是否让您可以更好地控制自己的 ID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T13:41:23.673

是的，只需添加`ClientIDMode="Static"`到您的控件。

或者，这一直是可能的，您可以将控件的 HTML ID 直接输出到您的 javascript 中：

```
$('#<%= textBox1.ClientID %>').hide(); 
```

`ClientIDMode`参考：http: [//msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:41:07.760

在 .NET 4+ 中，您可以在任何控件上使用[ClientIDMode](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)来指定 ID 的生成方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T13:41:14.710

自 4.0 以来， ASP.Net 现在在所有控件上都有一个[ClientIDMode](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)，它允许您完全控制您的 ID。

# arrays - WSO2 DSS - 一种将单行/单列结果公开为字符串的方法

> ID：14459884
> 
> 赞同：1
> 
> 时间：2013-01-22T13:37:37.490
> 
> 标签：arrays, string, wso2, wso2dss

我正在使用 WSO2 DSS，我对如何将查询的单行/列结果公开为字符串而不是数组条目感兴趣。

例如，如果我有查询： Select 'test' as t From dual; 它只会返回一行一列，所以我不希望结果像下面这样包含在

```
<Entry>
      <t>test</t>
</Entry> 
```

相反，我只想

```
<t>test</t> 
```

作为回应。dss可以做到这一点吗？在这种情况下需要使用什么类型的输出映射？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T09:08:13.117

在 DSS 中，您可以添加 XSLT 以从响应中提取测试。结果（输出映射）部分中有一个名为 XSLT Path 的字段。您可以为该 xslt 提供配置注册表路径或治理注册表路径来执行此操作。

# python - 一旦队列可用，就逐步提取物品

> ID：14459885
> 
> 赞同：7
> 
> 时间：2013-01-22T13:37:39.450
> 
> 标签：python, multithreading, python-2.7, queue

我正在寻找一个可靠的实现，以允许我使用[Queue](http://docs.python.org/2/library/queue.html)逐步处理项目列表。

这个想法是我想使用一定数量的工作人员，这些工作人员将完成 20 多个数据库密集型任务的列表并返回结果。我希望 Python 从前五个项目开始，一旦完成一个任务，就开始队列中的下一个任务。

这就是我目前在没有[Threading](http://docs.python.org/2/library/threading.html)的情况下这样做的方式。

```
for key, v in self.sources.iteritems():
    # Do Stuff 
```

我希望有一个类似的方法，但可能不必将列表分成五个子组。这样它就会自动选择列表中的下一个项目。目标是确保如果一个数据库减慢了进程，它不会对整个应用程序产生负面影响。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T13:45:09.623

你可以自己实现它，但是 Python 3 已经带有一个`Executor`基于 的线程管理解决方案，你可以通过安装[向后移植的版本](http://pypi.python.org/pypi/futures)在 Python 2.x 中使用它。

您的代码可能看起来像

```
with concurrent.futures.ThreadPoolExecutor(max_workers=5) as executor:
    future_to_key = {}
    for key, value in sources.items():
        future_to_idday[executor.submit(do_stuff, value)] = key
    for future in concurrent.futures.as_completed(future_to_key):
        key = future_to_key[future]
        result = future.result()
        # process result 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T13:49:18.513

如果您使用的是 python3，我推荐并发期货模块。如果您没有使用 python3 并且没有附加到线程（相对于进程），那么您可以尝试 multiprocessing.Pool （尽管它带有一些警告，并且我在我的应用程序中无法正确关闭池）。如果您必须在 python2 中使用线程，您最终可能会自己编写代码 - 生成 5 个运行消费者函数的线程，并简单地将调用（函数 + args）迭代地推送到队列中，以便消费者找到并处理它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T14:52:29.583

你可以只使用 stdlib 来做到这一点：

```
#!/usr/bin/env python
from multiprocessing.dummy import Pool # use threads

def db_task(key_value):
    try:
        key, value = key_value
        # compute result..
        return result, None
    except Exception as e:
        return None, e

def main():
    pool = Pool(5)
    for result, error in pool.imap_unordered(db_task, sources.items()):
        if error is None:
            print(result)

if __name__=="__main__":
    main() 
```

# wpf - 将 UserControl 中的公共属性绑定到父级上的属性不起作用

> ID：14459886
> 
> 赞同：0
> 
> 时间：2013-01-22T13:37:41.303
> 
> 标签：wpf, user-controls, dependency-properties

> **可能重复：**
> [绑定到用户控件依赖属性](https://stackoverflow.com/questions/14216714/binding-to-a-usercontrols-dependencyproperties)

我正在尝试创建一个包含数据网格的 WPF UserControl。我希望 UserControl 通过将公开的公共属性显式绑定到托管用户控件的视图上的项目列表来获取其数据，如下所示。

如果我在 ProjectList 属性的设置器中设置断点，它永远不会进入那里。

我正在尝试将 ProjectList 属性绑定到托管视图中的项目和 UserControl 本身中的网格，我不确定这是否正确，但我认为它不会导致这个问题。

我对 UserControl 的实例化：

```
<uc:ProjectCardViewGrid x:Name="ProjectListUC" ProjectList="{Binding Projects, Mode=OneWay}"   Title="{Binding CreateNewPlan}" Grid.Row="1" /> 
```

我的 UserControl 定义如下：

```
<UserControl x:Class="ProjectCardViewGrid"             
       ...
         xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity" 
         xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol" 
         xmlns:cmd="clr-namespace:GalaSoft.MvvmLight.Command;assembly=GalaSoft.MvvmLight.Extras.WPF45"                    
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300"
         DataContext="{Binding RelativeSource={RelativeSource Self}}"
         Loaded="UserControl_Loaded_1">
<Grid x:Name="UserLayoutMaster">       
    <dxg:GridControl Grid.Row="1" x:Name="ProjectListGrid" Height="Auto" ItemsSource="{Binding ProjectList}" ShowBorder="False"> 
```

我的 ProjectList DependencyProperty 看起来像这样......

```
Public Property ProjectList As List(Of Project)
    Get
        Return CType(GetValue(ProjectListProperty), List(Of Project))
    End Get
    Set(value As List(Of Project))

        SetValue(ProjectListProperty, value)

        NotifyPropertyChanged()

    End Set
End Property

Public Shared ReadOnly ProjectListProperty As DependencyProperty = DependencyProperty.Register("ProjectList", GetType(List(Of Project)), GetType(ProjectCardViewGrid), New PropertyMetadata(Nothing)) 
```

编辑：这是更新的代码，但在回调事件处理程序中设置了一个断点，它仍然没有被命中。

```
Public Shared ReadOnly TitleProperty As DependencyProperty =
    DependencyProperty.Register(
        "Title",
        GetType(String),
        GetType(ProjectCardViewGrid),
        New FrameworkPropertyMetadata(
            Nothing,
            FrameworkPropertyMetadataOptions.AffectsRender,
            New PropertyChangedCallback(AddressOf TitleChanged)))

Public Property Title As String
    Get
        Return CType(GetValue(TitleProperty), String)
    End Get
    Set(value As String)
        SetValue(TitleProperty, value)
    End Set
End Property

Private Shared Sub TitleChanged(ByVal d As DependencyObject, ByVal e As DependencyPropertyChangedEventArgs)

End Sub 
```

# c++ - reinterpret_cast 到 QObject 的 subling

> ID：14459889
> 
> 赞同：2
> 
> 时间：2013-01-22T13:37:50.280
> 
> 标签：c++, qobject, reinterpret-cast

我有某种对象工厂（基于模板），这对我的目的非常有用。但是现在我尝试使用派生自 QObject 和纯抽象类（接口）的类，并且我遇到了奇怪的运行时错误。

这里是这个类的简单图（Derived）

```
class Interface  {
public:
    Interface(){}
    virtual ~Interface(){}    
    virtual int getResult() = 0;
};

class Derived : public QObject, public Interface {
    Q_OBJECT
public:
    explicit Derived(QObject *parent = 0);        
    int getResult();        
}; 
```

及其在derived.cpp中的实现：

```
#include "derived.h"    
Derived::Derived(QObject *parent)
    : QObject(parent) {
}    
int Derived::getResult() {
    return 55;
} 
```

当我尝试将 void 指针强制转换为接口时，我会得到意想不到的（对我而言）行为，它可能是运行时错误，或其他方法调用（它取决于类的大小）。

```
#include "derived.h"    
void * create() {
    return new Derived();
}

int main(int argc, char *argv[]) {
    Interface * interface = reinterpret_cast<Interface *>(create());    
    int res = interface->getResult(); // Run-time error, or other method is called here
    return 0;
} 
```

你能解释一下为什么我不能将 void 指针转换为接口吗？有什么解决方法吗？

感谢您的回复

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T13:47:03.503

将指向派生类的指针重新解释为指向基类的指针会产生未定义的行为。多重继承突出了这一点：由于存在多个基类，并且两个基子对象必须具有不同的地址，因此它们不能*都*具有与派生对象相同的地址。因此，您的`create`函数返回的指针指向 a `Derived`，但不一定指向`Interface`子对象。它可以指向`QObject`子对象，也可以都不指向。

最好的选择是返回`Derived*`或`Interface*`从你的函数中返回；如果必须`void*`出于某种原因，那么您可以进行的唯一明确定义的转换是 back to `Derived*`，然后可以将其转换为`Interface*`使用标准转换。

通过使用`void*`你已经抛弃了类型的所有静态和动态知识；恢复该信息的唯一方法是转换回正确的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:46:20.747

与多重继承混合`reinterpret_cast`可能会导致各种问题。在您的情况下， the`void*`可能会指向 的`QObject`部分，而`Derived`不是`Interface`部分。

它可能会更好地使用 a `dynamic_cast`，它可以调整指针以指向派生类的正确子对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T13:46:26.563

请注意，一般来说，需要这些类型的演员表是糟糕设计的标志。在您的特定情况下，您的工厂函数需要返回一个`Interface*`. `void*`在不涉及 C 接口的 C++ 中，这是不必要且不好的。

除此之外，工厂函数有点像 Java 的东西，只有在应用严格的设计方法时才需要，这通常会增加更多的绒毛，而不是为干净和无错误的代码做出贡献。

如果那不削减它，你会想要[`dynamic_cast`](http://en.cppreference.com/w/cpp/language/dynamic_cast)。在 Qt for QObjects 中，您可以查看[`qobject_cast`](http://doc.qt.digia.com/qt/qobject.html#qobject_cast)您的情况是否有任何优点。

# javascript - Tumblr 上的 JS：“跨域资源共享策略”错误

> ID：14459894
> 
> 赞同：1
> 
> 时间：2013-01-22T13:38:03.960
> 
> 标签：javascript, tumblr

我在我的 tumblr 主题上有一个画布 jQuery pluing 脚本，
我在 Chrome 上遇到了这个错误：

```
Cross-origin image load denied by Cross-Origin Resource Sharing policy. 
```

Tumblr 将图片上传到[http://static.tumblr.com/](http://static.tumblr.com/)
即使文件和帐户之间没有不同的域，
相同的位置，相同的域...

但是为什么我会收到这个错误？

有什么解决办法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:55:24.213

什么 epascarello 说，子域！= 相同的域

因为您在同一个根域上，所以如果您不需要其他任何东西（例如跟踪...），您可以将主题中的 document.domain 设置为 static.tumblr.com

```
document.domain = 'static.tumblr.com'; 
```

尽早这样做。

# php - 函数返回

> ID：14459895
> 
> 赞同：0
> 
> 时间：2013-01-22T13:38:16.613
> 
> 标签：php, function, navigationbar

我尝试制作导航栏。

```
/* Only for admin */
function getAccessRights($links) {
    if ( isset($_SESSION['right']) && $_SESSION['right'] === ACCESS_ADMIN  ||
        isset($_COOKIE['right']) && $_COOKIE['right'] === ACCESS_ADMIN ) {
        $links[] = '<li><a href="messages.phtml">Read messages</a></li>';
        var_dump($links); // **Back, Login, Read messages.**
        return $links;
    }
}

 function drawNavBar() {
    if ( $_SERVER['PHP_SELF'] == "/form-msg.php" ) {
        $links[] = '<li><a class="back" href="index.php">Back</a></li>';
        $links[] = '<li><a href="admin.php">Login</a></li>';
        getAccessRights(); // I dont know what access have user. If he have admin access, he will see link "read messages".
        var_dump($links) // **Back, Login**
    }
    //some if
    makeNavBar($links); //makeNavBar it is function which do pattern for html
  } 
```

在哪里链接“阅读消息”？也许您知道制作导航栏的更好方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:44:52.370

我会做这样的事情：

```
//returns true or false based on user rights
function isAdmin() {
    return (isset($_SESSION['right']) && $_SESSION['right'] === ACCESS_ADMIN  || isset($_COOKIE['right']) && $_COOKIE['right'] === ACCESS_ADMIN)
}

 function drawNavBar($links = array()) {
    if ( $_SERVER['PHP_SELF'] == "/form-msg.php" ) {
        $links[] = '<li><a class="back" href="index.php">Back</a></li>';
        $links[] = '<li><a href="admin.php">Login</a></li>';
        if(isAdmin())
            $links[] = '<li><a href="messages.phtml">Read messages</a></li>';

        var_dump($links) // **Back, Login**
    }
    //some if
    makeNavBar($links);
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:45:10.997

链接是`getAccessRights()`方法的返回值，但是你调用这个方法忽略了返回值。此外，`getAccessRights()`需要一个参数`$links`，但您没有传递一个。

`$_COOKIE`顺便说一句：您通过变量中的标志确定用户的管理员状态。这是**非常不安全**的。该`$_COOKIE`变量包含客户端 cookie 中发送的所有内容。这意味着用户可以修改 cookie 的内容（并通过编辑自己的 cookie 使自己成为管理员）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T13:45:15.787

在功能`drawNavBar`

```
$links[] = getAccessRights(); 
```

并且在功能上`getAccessRights`

```
$links = array();
$links[] = '<li><a href="messages.phtml">Read messages</a></li>';
return $links; 
```

顺便说一句..函数的命名`getAccessRights`不正确，我会尝试使用更通用的方法来进行权限管理，例如[访问控制列表](http://en.wikipedia.org/wiki/Access_control_list)。

# php - 尝试通过测验系统获得良好的订单

> ID：14459899
> 
> 赞同：1
> 
> 时间：2013-01-22T13:38:35.223
> 
> 标签：php, html, mysql, phpmyadmin, while-loop

我正在尝试制作一个测验系统，但它输出：

```
Question1
Answer1
Question1
Answer2 
```

等等..而不是

```
Question1
Answer1
Answer2
... and so on 
```

我该如何解决？

代码：

```
$question = mysql_query("SELECT questions.*, answers.* FROM questions inner join answers on questions.id=answers.question_id");

while($row = mysql_fetch_assoc($question))
{
    echo $row['question'].'<br />' .$row['answer'].'<br />';            
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T13:43:36.390

修复你的 WHILE 循环。它总是会打印问题和答案。快速修复看起来像这样：

```
$previousQuestion = null;
while($row = mysql_fetch_assoc($question))
{
    if($row['question'] !== $previousQuestion) {
        echo $row['question'].'<br />';
    }

    echo $row['answer'].'<br />';

    $previousQuestion = $row['question'];
} 
```

可以通过其他方式简化语法，但这会起作用。基本上，由于问题与其答案之间存在一对多的关系，因此仅在问题与前一行的问题不同时才打印该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:50:13.047

如果你只想在 MySQL 中这样做，你可以这样做：

```
SELECT question AS 'Question And Its Answers'
FROM
(
  SELECT 0 AS Type, id, question FROM questions 
  UNION ALL
  SELECT 1, question_id, answer FROM answers 
) t
ORDER BY id, Type; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/cbb48/7)

这会给你：

```
| QUESTION AND ITS ANSWERS |
----------------------------
|                question1 |
|                      eee |
|                       dd |
|                      dsd |
|                question2 |
|                       df |
|                       fd |
|                question3 |
|                      ans |
|                       dd |
|                       ad | 
```

# android - 应用程序不适用于平板电脑

> ID：14459903
> 
> 赞同：2
> 
> 时间：2013-01-22T13:38:45.203
> 
> 标签：android

> **可能重复：**
> [阻止平板电脑下载应用程序](https://stackoverflow.com/questions/5892260/prevent-tablet-downloads-of-app)

如果我希望我的应用程序仅在智能手机上而不是在平板电脑上运行，清单中的这些行是否足够？

```
<compatible-screens>
    <!-- all small size screens -->
    <screen android:screenSize="small" android:screenDensity="ldpi" />
    <screen android:screenSize="small" android:screenDensity="mdpi" />
    <screen android:screenSize="small" android:screenDensity="hdpi" />
    <screen android:screenSize="small" android:screenDensity="xhdpi" />
    <!-- all normal size screens -->
    <screen android:screenSize="normal" android:screenDensity="ldpi" />
    <screen android:screenSize="normal" android:screenDensity="mdpi" />
    <screen android:screenSize="normal" android:screenDensity="hdpi" />
    <screen android:screenSize="normal" android:screenDensity="xhdpi" />
    <!-- all large size screens -->
    <screen android:screenSize="large" android:screenDensity="ldpi" />
    <screen android:screenSize="large" android:screenDensity="mdpi" />
    <screen android:screenSize="large" android:screenDensity="hdpi" />
    <screen android:screenSize="large" android:screenDensity="xhdpi" />
</compatible-screens> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:47:26.593

如果您使用的是 Play 商店，您可以在发布时选择哪些设备可以使用他们自己的系统下载您的应用程序。

以下是您需要的相关信息：[https ://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=1286017&ctx=go](https://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=1286017&ctx=go)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:42:28.683

好吧，这取决于您认为“平板电脑”是什么。

您的`<compatible-screens>`元素将阻止 Play 商店将您的应用分发到`-xlarge`设备（10 英寸和更大的对角屏幕尺寸）。它不会阻止 Play 商店将您的应用分发到`-large`设备（5 英寸到 10 英寸），其中包括许多设备营销人员将术语“平板电脑”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T13:43:58.910

不，这还不够，因为有大屏幕平板电脑（例如，您的应用程序仍可在 7 英寸平板电脑上运行）。你不能阻止有人下载你的应用，因为它非常抽象。Galaxy Note 是平板电脑还是手机？你想让你的应用在上面运行吗？如您所见，您可以在清单中使用此属性，但无法很好地控制设备类型。

我的建议是以编程方式定义屏幕大小并通知用户该应用程序与此设备不兼容。检查屏幕类型是否满足您的条件 - 如果是 - 运行应用程序，如果不是 - 显示不幸的是屏幕不受支持的 Activity。或者调整您的应用程序以支持多种屏幕尺寸。

除非您有充分的理由，否则强烈[建议不要](http://developer.android.com/guide/topics/manifest/compatible-screens-element.html)使用此属性：

> 警告：通常，您不应使用此清单元素。使用此元素可以显着减少应用程序的潜在用户群，因为如果用户的设备具有您未列出的屏幕配置，则不允许他们安装您的应用程序。当应用程序绝对不能与所有屏幕配置一起使用时，您应该仅将其用作最后的手段。而不是使用此元素，您应该遵循支持多个屏幕的指南，以便通过为不同的屏幕尺寸和密度添加替代资源来提供对多个屏幕的完整支持。

# javascript - Jquery 按键除了：{something}

> ID：14459905
> 
> 赞同：6
> 
> 时间：2013-01-22T13:39:00.527
> 
> 标签：javascript, jquery

jQuery 或 Javascript 中是否有任何快捷方式（实际上是一个函数）来处理按钮按下，除了*某物*或仅*某物*，例如：

```
$(input).keypress('nonfunctional' function(){ 
  // do something
}); 
```

只会在按下 [az][0-9] 按钮并忽略单个`shift`或`ctrl`但处理`shift+a`=> A 按下时触发？

PSi确实知道`if(key.code == 123)`那时`...`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T13:40:54.093

不，如果您想排除[event.keyCode](https://developer.mozilla.org/en-US/docs/DOM/event.keyCode) / [event.which](http://api.jquery.com/event.which/)属性的特定键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T13:53:12.787

或者您可以扩展 jquery 按键。我猜是这样的：

```
$.fn.keypressBut = function(codes, callback) {
    $(this).keypress(function(e) {
        ~$.inArray(e.keyCode, codes) || callback.call(this, e);
    });
}

// Lets ignore Enter and Space
$('input').keypressBut([13, 32], function(e) {
    alert(e.keyCode);
}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T14:24:51.450

你可以做类似的事情

1.  `fn`使用带有参数的函数扩展 jquery属性，例如

    *   一些数据
    *   回调函数
2.  编写一个验证函数

    *   将 keyCode 转换为字符串
    *   将其与正则表达式匹配。
    *   如果按下 shiftKey
        *   将其转换为大写
    *   检查是否满足其他条件，*例如按下 Ctrl/Alt 键*。
    *   返回结果。
3.  如果验证成功
    *   执行回调函数

* * *

在代码站点上，这可能像

```
 $.fn.selectedKey = function (cb, data) {
      def.call(data, {
          ctrlKey: 2, //0: musn't be pressed, 1: must be pressed, 2: both.
          altKey: 2, // "
          invert: 0, //inverts the filter
          filter: /.*/, // A Regular Expression, or a String with a Regular Expression
          preventDefault: false //Set to true to prevent Default.
      }); //Sets the default Data for the values used,

      function validate(e) {
          var key = e.char = String.fromCharCode(e.keyCode || e.which); // Converts the pressed key to a String
          if (e.shiftKey) key = key.toUpperCase(); //Handles Case Sensitivity.
          var exp = new RegExp(e.data.filter.replace(/\\\\(\d)/g, String.fromCharCode("$1"))); //Creates a new RegExp from a String to e.g. allow "\2" to match the keyCode 2
          var c = !! (e.data.ctrlKey ^ e.ctrlKey ^ 1 > 0); //c == true if the above stated conditions are met e.g Ctrl Key Pressed and `ctrlKey == 1` -> true
          var a = !! (e.data.altKey ^ e.altKey ^ 1 > 0); //e.g Alt Key Pressed and `altKey == 0` -> false
          return (exp.test(key) && (c && a)); //Returns the validation Result
      }

      function def(obj) { //a minimal helper for default values
          for (var prop in obj) {
              this[prop] = this[prop] || obj[prop];
          }
      }
      this.keypress(data, function (e) {
          if (e.data.preventDefault) e.preventDefault();
          if (validate(e) != e.data.invert) cb(e); //Calls the callback function if the conditions are met
      });
  }; 
```

然后您可以使用以下方式

使用正则表达式

```
 $("body").selectedKey(function (e) {
      console.log("All lower characters Numbers and 'A': " + e.char);
  }, {
      filter: /[a-z]|[0-9]|A/,
      ctrlKey: 2,
      altKey: 2
  }); 
```

*如果已按下任何 [az] 或 [0-9] 或 Shift 键 + A，则会触发此操作，无论 ctrl 和 alt 的状态如何*

或键码

```
 $("body").selectedKey(function (e) {
      // do somet
      console.log("KeyCode 2 " + e.char);
  }, {
      filter: "\\2", //Ctrl + b
      ctrlKey: 1,
      altKey: 2
  }); 
```

*如果按 ctrl +b 会触发*

你也可以将这两者结合起来。

[这是JSBin](http://jsbin.com/exulon/1/edit)上的一个示例，可以摆弄。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T13:45:22.930

如果您不想编写大的 if 语句来检测按下的键代码，则有一个 jQuery 插件用于使用类和正则表达式来过滤按键，它称为[keyfilter](https://github.com/akzhan/jquery-keyfilter)。一个例子是

```
$(selector).keyfilter(/[a-z]/); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-22T13:45:52.570

例如，下面的这个函数只允许使用 keydown 事件处理这个函数的数字。

```
function OnlyNumbers(event) {
    if (event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 || (event.keyCode == 65 && event.ctrlKey === true) || (event.keyCode >= 35 && event.keyCode <= 39)) { return; }
    else { if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105)) { event.preventDefault(); } }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T13:46:44.690

你试过 event.altKey/event.shiftKey/event.ctrlKey 吗？

# c# - 使用 MEF 的多个属性和方法

> ID：14459906
> 
> 赞同：0
> 
> 时间：2013-01-22T13:39:08.920
> 
> 标签：c#, c#-4.0, mef

我正在尝试使用 MEF 实现插件框架，并且我有一个界面

```
public interface IPlugin
{
   string SomeProperty {get;set;}
   IList<string> DoSomething(string somevalue);
} 
```

我正在考虑做一个 Import Many

```
public class MainContainer : IPlugin
{
    public string _name;

    public MainContianer(){

    }
    public MainContainer(string name){
       _name = name;
    }

    [ImportMany]
    List<Lazy<IPlugin, string>> plugins;

    string SomeProperty { get { 
       var plugin  = plugins.Where(a => a.Metadata.Equals(_name)).FirstOrDefault();
            if (plugin  != null) {
                return plugin.Value.SomeProperty;
            }
            throw new CustomException();
    } }

    List<string> DoSomething(string value){
        var plugin  = plugins.Where(a => a.Metadata.Equals(_name)).FirstOrDefault();
            if (plugin  != null) {
                return plugin.Value.DoSomething(value);
            }
            throw new CustomException();
    }
} 
```

我的问题是有没有更好的方法来实现这个而不是我为每个属性和方法编写相同的块。

```
var plugin  = plugins.Where(a => a.Metadata.Equals(_name)).FirstOrDefault();
if (plugin  != null) {
   return plugin.Value.xxx
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T06:43:24.253

我看错了。我更新了我的代码，计算器示例把我推向了错误的方向。

```
public class MainContainer
{
    private CompositionContainer _container;

    [ImportMany]
    public IEnumerable<IPlugin> Plugins;

    public AdapterProvider(string pluginpath)
    {
        var catalog = new AggregateCatalog();
        catalog.Catalogs.Add(new DirectoryCatalog(pluginpath));
        _container = new CompositionContainer(catalog);
        _container.ComposeParts(this);
    }
} 
```

足够，

版主可以将此作为无效问题关闭。

# ruby-on-rails - Nokogiri 一次解析多个 XML 提要并按日期排序

> ID：14459907
> 
> 赞同：0
> 
> 时间：2013-01-22T13:39:09.730
> 
> 标签：ruby-on-rails, ruby, nokogiri

我正在使用 Rails 和 Nokogiri 来解析一些 XML 提要。

我已经解析了一个 XML 提要，我想解析多个提要并按日期对项目进行排序。它们是 Wordpress 提要，因此它们具有相同的结构。

在我的控制器中，我有：

```
def index
  doc = Nokogiri::XML(open('http://somewordpressfeed'))  
  @content = doc.xpath('//item').map do |i| 
  {'title' => i.xpath('title').text, 'url' => i.xpath('link').text, 'date' => i.xpath('pubDate').text.to_datetime} 
  end
end 
```

在我看来，我有：

```
<ul>
  <% @content.each do |l| %>
    <li><a href="<%= l['url'] %>"><%= l['title'] %></a> ( <%= time_ago_in_words(l['date']) %> )</li>
  <% end %>
</ul> 
```

上面的代码可以正常工作。我尝试解析多个提要并收到 404 错误：

```
 feeds = %w(wordpressfeed1, wordpressfeed2)
  docs = feeds.each { |d| Nokogiri::XML(open(d)) } 
```

我如何解析多个提要并将它们添加到哈希中，就像使用一个 XML 提要一样？我需要在页面加载时一次解析大约 50 个 XML 提要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T00:46:56.470

我会用不同的方式来写。

尝试更改`index`以接受 URL 数组，然后使用 循环遍历它们`map`，将结果连接到一个数组，然后返回：

```
def index(*urls)
  urls.map do |u|
    doc = Nokogiri::XML(open(u))  
    doc.xpath('//item').map do |i| 
      {
        'title' => i.xpath('title').text,
        'url' => i.xpath('link').text,
        'date' => i.xpath('pubDate').text.to_datetime
      } 
    end
  end
end

@content = index('url1', 'url2') 
```

使用符号而不是字符串作为哈希键会更像 Ruby：

```
{
  :title => i.xpath('title').text,
  :url   => i.xpath('link').text,
  :date  => i.xpath('pubDate').text.to_datetime
} 
```

还：

```
feeds = %w(wordpressfeed1, wordpressfeed2)
docs = feeds.each { |d| Nokogiri::XML(open(d)) } 
```

`each`是错误的迭代器。`map`相反，您想要返回所有已解析的 DOM，并将它们分配给`docs`.

这不会修复 404 错误，这是一个错误的 URL，并且是一个不同的问题。您没有正确定义数组：

```
%w(wordpressfeed1, wordpressfeed2) 
```

应该：

```
%w(wordpressfeed1 wordpressfeed2) 
```

或者：

```
['wordpressfeed1', 'wordpressfeed2'] 
```

* * *

编辑：

我正在重新访问此页面并注意到：

> 我需要在页面加载时一次解析大约 50 个 XML 提要。

在处理从其他站点（尤其是其中的 50 个站点）获取数据时，这完全、绝对是错误的处理方式。

WordPress 网站通常有一个新闻（RSS 或 Atom）提要。提要中应该有一个参数说明刷新页面的频率。尊重这个间隔，不要更频繁地访问他们的页面，尤其是当您将负载绑定到 HTML 页面加载或刷新时。

原因有很多，但它分解为“只是不要这样做”，以免你被禁止。如果不出意外，使用网页刷新对您的网站进行 DOS 攻击将是微不足道的，结果会击败他们的网站，而这两者都不是您的优秀网络开发人员。你首先保护自己，他们会继承这一点。

那么，当您想要获得 50 个站点并具有快速响应而不击败其他站点时，您会怎么做？您将数据缓存在数据库中，然后在加载或刷新页面时从中读取。而且，在后台，您还有另一个任务会定期启动以扫描其他站点，同时尊重它们的刷新率。

# windows - 如何在 Windows XP Embedded 上创建服务（未安装 Sc.exe）？

> ID：14459913
> 
> 赞同：1
> 
> 时间：2013-01-22T13:39:33.377
> 
> 标签：windows, service, embedded

如何在 Windows XP Embedded 上创建服务（未安装 Sc.exe）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:43:16.257

你可以尝试使用 VBScript，我从[这里](http://www.autoitscript.com/forum/topic/15251-install-windows-service/)找到了这段代码，OP 说它工作得很好，所以也许值得一试。

```
' Connect to WMI. 
set objServices = GetObjecT("winmgmts:root\cimv2") 

' Obtain the definition of the Win32_Service class. 
Set objService = objServices.Get("Win32_Service") 

' Obtain an InParameters object specific to the Win32_Service.Create method. 
Set objInParam = objService.Methods_("Create").inParameters.SpawnInstance_() 

' Add the input parameters. 
objInParam.Properties_.item("Name") = "GPServer" '< - Service Name 
objInParam.Properties_.item("DisplayName") = "GPServer" '< - Display Name, what you see in the Services control panel 
objInParam.Properties_.item("PathName") = "c:\Server\srvany.exe" '< - Path and Command Line of the executable 
objInParam.Properties_.item("ServiceType") = 16 
objInParam.Properties_.item("ErrorControl") = 0 
objInParam.Properties_.item("StartMode") = "Manual" 
objInParam.Properties_.item("DesktopInteract") = True
'objInParam.Properties_.item("StartName") = ".\Administrator" '< - If null, will run as Local System 
'objInParam.Properties_.item("StartPassword") = "YourPassword" '< - Only populate if the SatrtName param is populated 

'More parameters and return statuses are listed in MSDN: "Create Method of the Win32_Service Class" 

' Execute the method and obtain the return status. 
' The OutParameters object in objOutParams is created by the provider. 
Set objOutParams = objService.ExecMethod_("Create", objInParam) 
wscript.echo objOutParams.ReturnValue 
```

# java - 运行时 Java 循环中断

> ID：14459920
> 
> 赞同：1
> 
> 时间：2013-01-22T13:39:50.937
> 
> 标签：java, eclipse, loops, runtime

我的程序似乎进入了一些无限循环，但没有给出任何堆错误或任何东西。我仍然想知道循环在哪里。

我正在使用 Eclipse 并在正常模式下运行（而不是在调试模式下）。另外我的程序是不确定的，所以我不能再次运行它来重新创建无限循环。

有没有办法找到无限循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:51:37.537

一种方法是等到无限循环出现，然后用于[`jstack -l <pid>`](http://docs.oracle.com/javase/7/docs/technotes/tools/share/jstack.html)获取堆栈转储，并对其进行分析。

运气好的话，这应该暗示一些进一步的调查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:53:34.193

我猜你可以在分析器[VisualVM](http://visualvm.java.net/)下运行你的应用程序它可以帮助你找到你的无限循环（分析迭代、进程加载等参数）

# php - 如何注入虚拟帖子（即不将其添加到数据库中）

> ID：14459921
> 
> 赞同：1
> 
> 时间：2013-01-22T13:39:59.453
> 
> 标签：php, wordpress, post

我使用 WordPress 博客，我想在不向数据库添加任何内容的情况下显示帖子。我想说的是：

我在页面加载时生成一个帖子，并将其添加到主页中。我已经搜索并找到`wp_insert_post()`了功能，但它也添加到了数据库中。我怎么能用php做到这一点？

**例如：** 有一个由查询生成的帖子数组。如何在页面加载之前将我的帖子插入该数组？

我想清楚我的想法。这是我想要的一步一步。

* *1)* *我正在生成一个这样的数组 $arr['title] = "my title", $arr['content'] = "my content",

* *2)* *WP 向数据库发送一个查询并且有帖子我是对的吗？并且有一个数组，显示在主题和主页上？此时我想将我的外部数组（在步骤 1 中生成）添加到这个数组（由 WP 通过查询生成）

**3）**通过这种方式，我将能够添加帖子而不将其添加到我的数据库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:18:14.423

您可以简单地将虚拟帖子作为原始 HTML 添加到您的主题模板之一中。

或者，如果您喜欢冒险，您可以修改主要查询结果并将您的帖子包含在其中：

```
add_action('loop_start', function($query){

  // create the post and fill up the fields
  $post = new WP_Post((object)array(
    'ID'           => -1,
    'post_title'   => 'Bla blah',
    'post_content' => 'Your content',
  ));

  // add it to the internal cache, so WP doesn't fire a database query for it
  // -1 is the ID of your post
  if(!wp_cache_get(-1, 'posts'))
    wp_cache_set(-1, $post, 'posts');

  // prepend it to the query
  array_unshift($query->posts, $post);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-14T12:23:31.747

[当前接受的答案](https://stackoverflow.com/a/14460668/4829915)会导致新帖子删除循环中的最后一个帖子，因为它不会更新帖子计数。这是我的修改版本，其中还包括：

1.  支持空类别。
2.  只有一个地方可以声明新帖子的ID。
3.  添加 is_main_query() 作为评论中最初回答的人。
4.  一个设置来决定是否应该附加或前置新帖子。
5.  隐藏帖子的日期，否则你会得到类似 00000000 的东西。我本可以使用动态日期，但在不更新内容的情况下不断更新日期可能是不好的 SEO。
6.  隐藏帖子的评论链接，因为它只是指向主页。
7.  控制帖子类型的设置。您可能更喜欢**“页面”**，因为**“帖子”**显示的是一般类别，我发现无法绕过。假设这是一件好事，“页面”在其他帖子中看起来也更加突出。

这是修改后的代码：

```
function virtual_post($query) {
  $post_type = 'page'; // default is post
  if (get_class($query)=='WP')
     $query = $GLOBALS['wp_query'];
  if ($query->is_main_query()) {
     $append = true; // or prepend
     // create the post and fill up the fields
     $post = new WP_Post((object)array(
      'ID'           => -1,
      'post_title'   => 'Dummy post',
      'post_content' => 'This is a fake virtual post.',
      'post_date' => '',
      'comment_status' => 'closed'
     ));
     if ($post_type <> 'post')
       $post->post_type = $post_type;
     // add it to the internal cache, so WP doesn't fire a database query for it
     if(!wp_cache_get($post->ID, 'posts')) {
       wp_cache_set($post->ID, $post, 'posts');
       if ($query->post_count==0 || $append)
         $query->posts[] = $post;
       else
         array_unshift($query->posts, $post);
       $query->post_count++;
     }
  }
}

$virtual_post_settings = array('enable' => true, 'include_empty_categories' => true);
if ($virtual_post_settings['enable']) {
  if ($virtual_post_settings['include_empty_categories'])
    add_action('wp', 'virtual_post');
  else
    add_action('loop_start', 'virtual_post');
} 
```

# magento - 如何在magento中按类别自定义属性仅对顶部菜单进行排序？

> ID：14459922
> 
> 赞同：0
> 
> 时间：2013-01-22T13:40:03.853
> 
> 标签：magento, navigation

我创建了 15 个类别。在左侧导航中，我需要默认顺序的类别。

但是在顶部菜单中，我需要以特定的排序顺序显示类别。为此，我创建了属性并点击了此[链接](http://www.netismine.com/magento/sort-categories-in-header-menu)。

所以从上面的链接中，排序是按名称完成的，但我需要按存储在自定义属性中的 int 值排序

所以请帮助任何人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:58:16.040

您可以使用您提到的功能稍作改动：使用 getYourAttribute() 代替 getName()。

然而，这还不是全部。菜单树的节点在其内部数据存储中还没有您的属性。要将它添加到那里，您必须创建一个覆盖目录观察者模型的类，特别是函数 Mage_Catalog_Model_Observer::_addCategoriesToMenu。此函数负责使用类别节点填充顶部菜单。

确保您的覆盖函数在此过程中添加您的属性：

```
$categoryData = array(
     'name' => $category->getName(),
     'id' => $nodeId,
     'url' => Mage::helper('catalog/category')->getCategoryUrl($category),
     'is_active' => $this->_isActiveMenuCategory($category),
     'your_attribute' => $category->getYourAttribute()
); 
```

**正如教程所建议的那样，我对使用自定义代码修改lib**文件感到不安，但如果这是你最后的手段......

# javafx-2 - JavaFX 2.x：Y 轴上的对数刻度

> ID：14459923
> 
> 赞同：4
> 
> 时间：2013-01-22T13:40:05.577
> 
> 标签：javafx-2, linechart, logarithm

从这个非常好的帖子here

[Java FX 2 中的对数刻度](http://blog.dooapp.com/2013/06/logarithmic-scale-strikes-back-in.html)

我已经更改了此类以在 Y 轴上获取对数刻度，并且效果很好。我唯一的问题是水平网格线很少，比例总是从 0 或接近零开始。

这是我得到的

![在此处输入图像描述](../Images/968c4f48fdb97aa3e8ef9a4e9f561d36.png)

我想在我的数据系列的最小和最大范围内也有刻度值网格，在这种情况下 min = 19,35 max = 20,35; 截至目前，所有 10 条水平网格线都绘制在此范围之外。

如何做到这一点？

谢谢大家，这是我的Y轴日志代码

```
import java.text.NumberFormat;
import java.util.ArrayList;
import java.util.List;
import javafx.beans.binding.DoubleBinding;
import javafx.beans.property.DoubleProperty;
import javafx.beans.property.SimpleDoubleProperty;
import javafx.scene.chart.ValueAxis;

//http://blog.dooapp.com/logarithmic-scale-strikes-back-in-javafx-20        
public class LogarithmicAxis extends ValueAxis<Number> {

//Create our LogarithmicAxis class that extends ValueAxis<Number> and define two properties that will represent the log lower and upper bounds of our axis.     
private final DoubleProperty logUpperBound = new SimpleDoubleProperty();
private final DoubleProperty logLowerBound = new SimpleDoubleProperty();
//

//we bind our properties with the default bounds of the value axis. But before, we should verify the given range according to the mathematic logarithmic interval definition.
public LogarithmicAxis() {
    super(1, 100);
    bindLogBoundsToDefaultBounds();
}

public LogarithmicAxis(double lowerBound, double upperBound) {
    super(lowerBound, upperBound);
try {
    validateBounds(lowerBound, upperBound);
    bindLogBoundsToDefaultBounds();
} catch (IllegalLogarithmicRangeException e) {
    }
}

/**
 * Bind our logarithmic bounds with the super class bounds, consider the base 10 logarithmic scale.
 */
private void bindLogBoundsToDefaultBounds() {
    logLowerBound.bind(new DoubleBinding() {
        {
            super.bind(lowerBoundProperty());
        }

        @Override
        protected double computeValue() {
            return Math.log10(lowerBoundProperty().get());
        }
    });
    logUpperBound.bind(new DoubleBinding() {
        {
            super.bind(upperBoundProperty());
        }

        @Override
        protected double computeValue() {
            return Math.log10(upperBoundProperty().get());
        }
    });
}

/**
 * Validate the bounds by throwing an exception if the values are not conform to the mathematics log interval:
 * ]0,Double.MAX_VALUE]
 *
 * @param lowerBound
 * @param upperBound
 * @throws IllegalLogarithmicRangeException
 */
private void validateBounds(double lowerBound, double upperBound) throws IllegalLogarithmicRangeException {
    if (lowerBound < 0 || upperBound < 0 || lowerBound > upperBound) {
        throw new IllegalLogarithmicRangeException(
                "The logarithmic range should be include to ]0,Double.MAX_VALUE] and the lowerBound should be less than the upperBound");
    }
}

//Now we have to implement all abstract methods of the ValueAxis class.
//The first one, calculateMinorTickMarks is used to get the list of minor tick marks position that you want to display on the axis. You could find my definition below. It's based on the number of minor tick and the logarithmic formula.
@Override
protected List<Number> calculateMinorTickMarks() {
    Number[] range = getRange();
    List<Number> minorTickMarksPositions = new ArrayList<>();
    if (range != null) {

        Number lowerBound = range[0];
        Number upperBound = range[1];
        double logUpperBound = Math.log10(upperBound.doubleValue());
        double logLowerBound = Math.log10(lowerBound.doubleValue());

        int minorTickMarkCount = getMinorTickCount();

        for (double i = logLowerBound; i <= logUpperBound; i += 1) {
            for (double j = 0; j <= 10; j += (1\. / minorTickMarkCount)) {
                double value = j * Math.pow(10, i);
                minorTickMarksPositions.add(value);
            }
        }
    }
    return minorTickMarksPositions;
}

//Then, the calculateTickValues method is used to calculate a list of all the data values for each tick mark in range, represented by the second parameter. The formula is the same than previously but here we want to display one tick each power of 10.
@Override
protected List<Number> calculateTickValues(double length, Object range) {
    List<Number> tickPositions = new ArrayList<Number>();
    if (range != null) {
        Number lowerBound = ((Number[]) range)[0];
        Number upperBound = ((Number[]) range)[1];
        double logLowerBound = Math.log10(lowerBound.doubleValue());
        double logUpperBound = Math.log10(upperBound.doubleValue());
        System.out.println("lower bound is: " + lowerBound.doubleValue());

        for (double i = logLowerBound; i <= logUpperBound; i += 1) {
            for (double j = 1; j <= 10; j++) {
                double value = (j * Math.pow(10, i));
                tickPositions.add(value);
            }
        }
    }
    return tickPositions;
}

//The getRange provides the current range of the axis. A basic implementation is to return an array of the lowerBound and upperBound properties defined into the ValueAxis class.
@Override
protected Number[] getRange() {
    return new Number[] { lowerBoundProperty().get(), upperBoundProperty().get() };
}

//The getTickMarkLabel is only used to convert the number value to a string that will be displayed under the tickMark. Here I choose to use a number formatter.
@Override
protected String getTickMarkLabel(Number value) {
    NumberFormat formatter = NumberFormat.getInstance();
    formatter.setMaximumIntegerDigits(6);
    formatter.setMinimumIntegerDigits(1);
    return formatter.format(value);
}

//The method setRange is used to update the range when data are added into the chart. There is two possibilities, the axis is animated or not. The simplest case is to set the lower and upper bound properties directly with the new values.
@Override    
protected void setRange(Object range, boolean animate) {
    if (range != null) {
        Number lowerBound = ((Number[]) range)[0];
        Number upperBound = ((Number[]) range)[1];
        try {
            validateBounds(lowerBound.doubleValue(), upperBound.doubleValue());
        } catch (IllegalLogarithmicRangeException e) {
        }

        lowerBoundProperty().set(lowerBound.doubleValue());
        upperBoundProperty().set(upperBound.doubleValue());
    }
}

//We are almost done but we forgot to override 2 important methods that are used to perform the matching between data and the axis (and the reverse).
@Override
public Number getValueForDisplay(double displayPosition) {
    double delta = logUpperBound.get() - logLowerBound.get();
    if (getSide().isVertical()) {
        return Math.pow(10, (((displayPosition - getHeight()) / -getHeight()) * delta) + logLowerBound.get());
    } else {
        return Math.pow(10, (((displayPosition / getWidth()) * delta) + logLowerBound.get()));
    }
}

@Override
public double getDisplayPosition(Number value) {
    double delta = logUpperBound.get() - logLowerBound.get();
    double deltaV = Math.log10(value.doubleValue()) - logLowerBound.get();
    if (getSide().isVertical()) {
        return (1\. - ((deltaV) / delta)) * getHeight();
    } else {
        return ((deltaV) / delta) * getWidth();
    }
}

/**
 * Exception to be thrown when a bound value isn't supported by the logarithmic axis<br>
 *
 *
 * @author Kevin Senechal mailto: kevin.senechal@dooapp.com
 *
 */
public class IllegalLogarithmicRangeException extends Exception {
/**
 * @param string
 */
    public IllegalLogarithmicRangeException(String message) {
        super(message);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-15T13:36:45.637

对于建议的对数轴实现，我们也遇到了这些问题，这里是完整的代码，其中包含对我们有用的修复程序..

```
import com.sun.javafx.charts.ChartLayoutAnimator;
import java.text.NumberFormat;
import java.util.ArrayList;
import java.util.LinkedList;
import java.util.List;
import javafx.animation.KeyFrame;
import javafx.animation.KeyValue;
import javafx.beans.binding.DoubleBinding;
import javafx.beans.property.DoubleProperty;
import javafx.beans.property.SimpleDoubleProperty;
import javafx.scene.chart.ValueAxis;
import javafx.util.Duration;

//http://blog.dooapp.com/logarithmic-scale-strikes-back-in-javafx-20
//Edited by Vadim Levit & Benny Lutati for usage in AgentZero ( https://code.google.com/p/azapi-test/ )
public class LogarithmicNumberAxis extends ValueAxis<Number> {

    private Object currentAnimationID;
    private final ChartLayoutAnimator animator = new ChartLayoutAnimator(this);

//Create our LogarithmicAxis class that extends ValueAxis<Number> and define two properties that will represent the log lower and upper bounds of our axis.     
    private final DoubleProperty logUpperBound = new SimpleDoubleProperty();
    private final DoubleProperty logLowerBound = new SimpleDoubleProperty();
//

//we bind our properties with the default bounds of the value axis. But before, we should verify the given range according to the mathematic logarithmic interval definition.
    public LogarithmicNumberAxis() {
        super(1, 10000000);
        bindLogBoundsToDefaultBounds();
    }

    public LogarithmicNumberAxis(double lowerBound, double upperBound) {
        super(lowerBound, upperBound);
        validateBounds(lowerBound, upperBound);
        bindLogBoundsToDefaultBounds();
    }

    public void setLogarithmizedUpperBound(double d) {
        double nd = Math.pow(10, Math.ceil(Math.log10(d)));
        setUpperBound(nd == d ? nd * 10 : nd);
    }

    /**
     * Bind our logarithmic bounds with the super class bounds, consider the
     * base 10 logarithmic scale.
     */
    private void bindLogBoundsToDefaultBounds() {
        logLowerBound.bind(new DoubleBinding() {
            {
                super.bind(lowerBoundProperty());
            }

            @Override
            protected double computeValue() {
                return Math.log10(lowerBoundProperty().get());
            }
        });
        logUpperBound.bind(new DoubleBinding() {
            {
                super.bind(upperBoundProperty());
            }

            @Override
            protected double computeValue() {
                return Math.log10(upperBoundProperty().get());
            }
        });
    }

    /**
     * Validate the bounds by throwing an exception if the values are not
     * conform to the mathematics log interval: ]0,Double.MAX_VALUE]
     *
     * @param lowerBound
     * @param upperBound
     * @throws IllegalLogarithmicRangeException
     */
    private void validateBounds(double lowerBound, double upperBound) throws IllegalLogarithmicRangeException {
        if (lowerBound < 0 || upperBound < 0 || lowerBound > upperBound) {
            throw new IllegalLogarithmicRangeException(
                    "The logarithmic range should be in [0,Double.MAX_VALUE] and the lowerBound should be less than the upperBound");
        }
    }

//Now we have to implement all abstract methods of the ValueAxis class.
//The first one, calculateMinorTickMarks is used to get the list of minor tick marks position that you want to display on the axis. You could find my definition below. It's based on the number of minor tick and the logarithmic formula.
    @Override
    protected List<Number> calculateMinorTickMarks() {
        List<Number> minorTickMarksPositions = new ArrayList<>();
        return minorTickMarksPositions;
    }

//Then, the calculateTickValues method is used to calculate a list of all the data values for each tick mark in range, represented by the second parameter. The formula is the same than previously but here we want to display one tick each power of 10.
    @Override
    protected List<Number> calculateTickValues(double length, Object range) {
        LinkedList<Number> tickPositions = new LinkedList<>();
        if (range != null) {
            double lowerBound = ((double[]) range)[0];
            double upperBound = ((double[]) range)[1];

            for (double i = Math.log10(lowerBound); i <= Math.log10(upperBound); i++) {
                tickPositions.add(Math.pow(10, i));
            }

            if (!tickPositions.isEmpty()) {
                if (tickPositions.getLast().doubleValue() != upperBound) {
                    tickPositions.add(upperBound);
                }
            }
        }

        return tickPositions;
    }

    /**
     * The getRange provides the current range of the axis. A basic
     * implementation is to return an array of the lowerBound and upperBound
     * properties defined into the ValueAxis class.
     *
     * @return
     */
    @Override
    protected double[] getRange() {
        return new double[]{
            getLowerBound(),
            getUpperBound()
        };
    }

    /**
     * The getTickMarkLabel is only used to convert the number value to a string
     * that will be displayed under the tickMark. Here I choose to use a number
     * formatter.
     *
     * @param value
     * @return
     */
    @Override
    protected String getTickMarkLabel(Number value) {
        NumberFormat formatter = NumberFormat.getInstance();
        formatter.setMaximumIntegerDigits(10);
        formatter.setMinimumIntegerDigits(1);
        return formatter.format(value);
    }

    /**
     * The method setRange is used to update the range when data are added into
     * the chart. There is two possibilities, the axis is animated or not. The
     * simplest case is to set the lower and upper bound properties directly
     * with the new values.
     *
     * @param range
     * @param animate
     */
    @Override
    protected void setRange(Object range, boolean animate) {
        if (range != null) {
            final double[] rangeProps = (double[]) range;
            final double lowerBound = rangeProps[0];
            final double upperBound = rangeProps[1];

            final double oldLowerBound = getLowerBound();
            setLowerBound(lowerBound);
            setUpperBound(upperBound);
            if (animate) {
                animator.stop(currentAnimationID);
                currentAnimationID = animator.animate(
                        new KeyFrame(Duration.ZERO,
                                new KeyValue(currentLowerBound, oldLowerBound)
                        ),
                        new KeyFrame(Duration.millis(700),
                                new KeyValue(currentLowerBound, lowerBound)
                        )
                );
            } else {
                currentLowerBound.set(lowerBound);
            }
        }
    }

    /**
     * We are almost done but we forgot to override 2 important methods that are
     * used to perform the matching between data and the axis (and the reverse).
     *
     * @param displayPosition
     * @return
     */
    @Override
    public Number getValueForDisplay(double displayPosition) {
        double delta = logUpperBound.get() - logLowerBound.get();
        if (getSide().isVertical()) {
            return Math.pow(10, (((displayPosition - getHeight()) / -getHeight()) * delta) + logLowerBound.get());
        } else {
            return Math.pow(10, (((displayPosition / getWidth()) * delta) + logLowerBound.get()));
        }
    }

    @Override
    public double getDisplayPosition(Number value) {
        double delta = logUpperBound.get() - logLowerBound.get();
        double deltaV = Math.log10(value.doubleValue()) - logLowerBound.get();
        if (getSide().isVertical()) {
            return (1\. - ((deltaV) / delta)) * getHeight();
        } else {
            return ((deltaV) / delta) * getWidth();
        }
    }

    /**
     * Exception to be thrown when a bound value isn't supported by the
     * logarithmic axis<br>
     *
     *
     * @author Kevin Senechal mailto: kevin.senechal@dooapp.com
     *
     */
    public class IllegalLogarithmicRangeException extends RuntimeException {

        /**
         * @param string
         */
        public IllegalLogarithmicRangeException(String message) {
            super(message);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T16:02:33.663

我认为你的问题是这样的：

```
 super(1, 100); 
```

从[文档](http://docs.oracle.com/javafx/2/api/javafx/scene/chart/ValueAxis.html#ValueAxis%28%29)中：

`Create a non-auto-ranging ValueAxis with the given upper & lower bound`

尝试使用不带参数的构造函数，这将使边界自动变化。

您最终应该得到一个如下所示的构造函数：

```
public LogarithmicAxis() {
    // was: super(1, 100);
    super();
    bindLogBoundsToDefaultBounds();
} 
```

# php - 如何命名我的课程？

> ID：14459924
> 
> 赞同：2
> 
> 时间：2013-01-22T13:40:11.093
> 
> 标签：php, oop

我有一个基本用户类，它负责处理基本用户信息：姓名、年龄、位置等。我想用组功能扩展我的系统，然后用项目和会议扩展我的系统。例如：

```
class User
{
    public function getName() {
        ...
    }

    public function getAge() {
        ...
    }
} 
```

然后使用组功能对其进行扩展：

```
class GroupableUser extends User
{
    public function join($groupId) {
        ...
    }

    public function leave($groupId) {

    }

    public function requestGroupInvitation($groupId) {
        ...
    }

    public function acceptGroupInvitation($groupId) {
        ...
    }
} 
```

GroupableUser 这个名字对我来说似乎很奇怪，但是将加入和离开方法添加到 Group 类是没有意义的，因为它的用户加入和离开一个组，而不是相反。

后来我会有像**UserThatCanHaveProjects**和**UserThatCanParticipateInMeetings**这样的课程。如何命名这些类？

您通常如何处理这些情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T13:45:59.183

您似乎无法找到命名类的方法，因为层次结构不是很自然。实际上，一个用户可能参与一个以上的组，并且每个组可能有一个以上的用户。但是一个用户可能没有一个组而存在，而没有一个用户就不可能有一个组。我会说这意味着用户应该是一个组的成员，`addUser`并且`removeUser`应该被放置在`Group`. 为什么？因为用户甚至可能不“知道”他可能加入或离开一个组并且非常高兴，而不可能有一个组不“知道”用户可以加入它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T13:56:31.907

参加小组/会议和拥有项目的能力是用户可能能够*做*的事情，但它并不能定义用户*是*什么。这是一个非常明显的迹象，表明使用附加类对这些选项进行建模并不是一个好的设计选择。

## 静态方法 #1：接口

在静态类型语言中，简单的实现看起来像

```
interface IGrouppableUser {
     public function join(...);
}

class GroupableUser implements IGrouppableUser {
     public function join(...) { /* implementation */ }
} 
```

并且 grouppable 用户的消费者会接受`IGrouppableUser`，允许您根据需要制作尽可能多的类。您也可以在 PHP 中执行此操作，但如前所述，无论使用哪种语言，它都可能不是一个好的设计。

作为脚注，我应该补充一点，从 PHP 5.4 开始，通过向语言添加[特征](http://php.net/manual/en/language.oop5.traits.php)，可以更方便地实现上述场景（类可以使用特征而不是实现接口，这意味着您不需要复制/粘贴`join`代码库周围的所有实现）。但从概念上讲，这是完全相同的方法。

这种方法的主要缺点是它不能扩展。如果您只需要两种或三种类型的用户，这可能没问题。

## 静态方法 #2：“不支持”异常

如果大多数用户都是可分组的并且可以拥有项目，那么创建一个地狱般的类层次结构就没有多大意义；您可以将必要的成员添加到类`User`中，使其成为[胖接口](http://www.oodesign.com/interface-segregation-principle.html)：

```
class GroupableUser implements IGrouppableUser {
     private $isGrouppable = true; // default, can be changed at runtime

     public function join(...) {
         if (!$this->isGrouppable) throw new Exception("User is not grouppable!");

         // real implementation
     }
} 
```

这种方法的主要缺点是它使类`User`看起来无条件地支持广泛的操作，而实际上它并不支持，因此会使编码变得乏味且容易出错（很多`try`/ `catch`）。如果绝大多数用户支持绝大多数操作，那可能没问题。

## 动态方法#1：行为

`User`有条件地允许实例参与这些操作会更好。这意味着您需要能够将“行为”动态地附加到`User`对象上，幸运的是，这在动态类型语言中很容易做到。

我建议从一个已建立的开源项目中查找“行为”实现，但这里有一个快速而肮脏的例子：

**行为基类和示例实现**

```
abstract class Behavior {
    public function provides($name) {
        return method_exists($this, $name);
    }

    public function invoke($target, $name, $arguments) {
        array_unshift($arguments, $target);
        return call_user_func_array(array($this, $name), $arguments);
    }
}

class GrouppableBehavior extends Behavior {
    public function join(User $user, $groupName) {
        echo "The user has joined group $groupName.";
    }
} 
```

**可组合（可以使用行为）基类和用户实现**

```
class Composable {
    private $behaviors = array();

    public function __call($name, $arguments) {
        foreach ($this->behaviors as $behavior) {
            if ($behavior->provides($name)) {
                return $behavior->invoke($this, $name, $arguments);
            }
        }

        throw new Exception("No method $name and no behavior that implements it");
    }

    public function attach($behavior) {
        $this->behaviors[] = $behavior;
    }
}

class User extends Composable {} 
```

**试驾**

```
$user1 = new User;
$user2 = new User;

$user1->attach(new GrouppableBehavior);
$user1->join('Test Group'); // works
$user2->join('Test Group'); // throws 
```

**[看到它在行动](http://ideone.com/Y8NqKo)**。

这种方法的主要缺点是它消耗更多的运行时资源，并且行为只能访问`public`它们所附加的类的成员。在某些情况下，您可能会发现自己被迫公开应该是私有的实现细节以使行为能够工作。

## 动态方法 #2：装饰器

行为的一个变体是[装饰器模式](http://www.oodesign.com/decorator-pattern.html)：

```
interface IUser {}

interface IGrouppableUser extends IUser {
    public function join(...);
}

class User implements IUser {}

class UserGroupingDecorator implements IGrouppableUser {
    private $realUser;

    public function __construct(IUser $realUser) {
        $this->realUser = $realUser;
    }

    public function join(...) { /* implementation */ }

    /* now you need to implement all IUser methods 
       and forward the calls to $this->realUser */

    /* if IUser exposes bare properties we have a problem! */
} 
```

使用这种模式，您可以随意创建一个`UserGroupingDecorator`包装 an`IUser`并将装饰器传递给任何接受 an`IUser`或 an 的东西`IGrouppableUser`。

这种方法的主要缺点是它也不提供对`User`. 此外，它排除了暴露裸属性的可能性，因为如果属性也在前者上定义，则`IUser`无法“转发”裸属性访问-除非确实定义了它们，否则您无法实现。可以通过将属性公开为不同的 getter/setter 方法来回避这种情况，但这意味着要编写更多代码。`UserGroupingDecorator``$realUser``IGrouppableUser`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T13:47:47.643

考虑到数据库驱动的 Web 应用程序，我可能会使用 5 个类来做到这一点：

1) 用户
2) 组
3) GroupAssignment
4) GroupInvitation
5) GroupInvitationRequest

第 3 类只是将一个用户映射到一个组。第 4 类和第 5 类更为明显。无论如何，此设置与您在数据库中的设置非常匹配。这提供了很大的灵活性，因为用户可以是许多组的成员（或一个，或没有）。

编辑：根据有问题的新信息添加了其他类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T19:15:45.807

`Groupable`将是接口的好名称，接口应该描述类的一个方面，这可能是某些不同类的实例所需要的。接口是类之间的契约。

只是不要在它前面加上“我”，除非你对**所有东西都使用**[匈牙利符号](http://en.wikipedia.org/wiki/Hungarian_notation)。只需对类名使用名词，对接口使用形容词。

 **至于班级的名称，我会选择：

```
class Participant extends User implements Groupable
{
    // methods that will be expected by from instance of this class
    // by any class that requires an object to have Groupable interfrace
} 
```**

# validation - 为什么我的基于 DataAnnotations 的手动验证不起作用？

> ID：14459925
> 
> 赞同：2
> 
> 时间：2013-01-22T13:40:14.813
> 
> 标签：validation, .net-4.0, data-annotations

我正在尝试使用 DataAnnotations 对类进行手动验证。该应用程序是一个控制台应用程序，因此不涉及 MVC。我正在使用 .NET 4.0。

我从[这篇文章](http://odetocode.com/blogs/scott/archive/2011/06/29/manual-validation-with-data-annotations.aspx)中得到了指导：唯一的区别似乎是我正在尝试使用元数据类。但我读过的其他内容表明这是可以做到的。

但是，在运行时，对象会通过验证。我在 MVC3 中使用过 DataAnnotations，并认为我对它们很好，但我很困惑。

我错过了什么？是否需要 System.ComponentModel.DataAnnotations 以外的程序集？

```
/// This is a partial-class addition to an Entity Framework class, so the properties are
/// defined in the EF .designer.cs file.  
[MetadataType(typeof(EntityMetadata.tblThingMetaData ))]
public partial class tblThing
{

} 
```

元数据类：

```
public partial class tblThingMetaData
{
    [Required(AllowEmptyStrings = false, ErrorMessage = "Sequence number is required")]
    [RegularExpression("A")]
    public string seq_num { get; set; }
} 
```

考试：

```
 [TestMethod]
    public void VerifyValidationWorksOnEntities()
    {
        tblThing newThing = new tblThing()
        {
            seq_num = "B"
        };

        List<ValidationResult> results = new List<ValidationResult>();
        bool validationResult = Validator.TryValidateObject(
            newThing,
            new ValidationContext(newThing, null, null),
            results,
            true);

        Assert.AreNotEqual(0, results.Count);
        Assert.IsFalse(validationResult);
    } 
```

我尝试了其他变体： `newThing.seq_num`为 null、`seq_num`仅验证属性等。它始终通过验证并且没有验证结果。测试总是失败。

非常感谢你能给我的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T16:11:53.853

[在这里](https://stackoverflow.com/questions/2050161/validating-dataannotations-with-validator-class?rq=1)找到了答案。显然，除非您在验证之前添加以下内容，否则这在 Silverlight 或 MVC 之外不起作用：

```
TypeDescriptor.AddProviderTransparent(
   new AssociatedMetadataTypeTypeDescriptionProvider(
       typeof(tblThing),
       typeof(EntityMetadata.tblThingMetaData)
   ), typeof(tblThing)); 
```

请注意，最后一个参数必须是`typeof(tblThing)`，而不是`newThing`。即使有一个重载需要您与元数据关联的类型的单个实例，即使这是您计划验证的同一个实例，如果您提供实例而不是类型，它也将不起作用。

很累，但至少它现在有效。

# ios - 如何有两个独立的观点？

> ID：14459926
> 
> 赞同：1
> 
> 时间：2013-01-22T13:40:14.913
> 
> 标签：ios, xcode, uiviewcontroller, uinavigationcontroller

是否可以在其上具有导航控制器视图和子视图（或独立视图），当导航控制器被推送或弹出时它们不会移动？两种视图都响应用户交互。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:47:40.663

是的，使用[容器视图控制器](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html)这是绝对可能的。

1.  创建自定义容器视图控制器并添加子视图（不应移动的视图）
2.  从步骤 1实例化`UINavigationController`并将其添加为[`addChildViewController:`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW76)容器视图控制器的子视图控制器（使用 ）
3.  `UINavigationControllers`在步骤 1 中添加的子视图下方附加视图

在那之后，你就完成了。

# git - 为什么我必须使用“git commit -a”而不仅仅是“git commit”？

> ID：14459927
> 
> 赞同：4
> 
> 时间：2013-01-22T13:40:26.860
> 
> 标签：git

我正试图绕过 Git 的复杂性。

我使用“git clone [url here]”从 GitHub 下载了一个存储库。

我做了一些更改，尝试使用“git commit”提交它们。这似乎没有将更改推送到我的本地存储库（在本地目录“.git”中），它建议我改用“git commit -a”。

我想知道为什么我必须在“git commit”后面加上“-a”，git中的“stage”和“commit”有什么区别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T13:42:24.980

> `-a`,`--all`
> 告诉命令自动暂存已经修改和删除的文件，但是你没有告诉git的新文件不受影响。

Git 有一个暂存区。默认情况下`git commit`，仅提交添加到该暂存区域的数据。`-a`切换从工作副本本身提交所有未提交的更改。

暂存区的想法是您可能不想一次提交所有更改。如果是这种情况，`git add`您想要提交的文件 - 或者如果您想要更细粒度的文件，您将`git add -p`只选择要提交的文件中的一些更改。

在 GitHub Git 教程中有一个很好的解释和一张图片，显示了它的基本工作原理：http://web.archive.org/web/20130519130755/http: [//learn.github.com/p/normal.html](http://web.archive.org/web/20130519130755/http://learn.github.com/p/normal.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-22T13:42:23.517

你不必。

该`-a`选项要求`git commit`自动添加您对存储库中的文件所做的所有更改。

你并不总是想要那样。特别是因为有时您想要进行多次提交以区分变更组。当您想选择要添加的内容时，通常在提交之前使用`git add`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T14:08:04.647

显然，如果我们要提交修改过的文件或未跟踪的文件，我们必须做两件事。

第一个是“staging” 第二个是“commit”

暂存是任何提交过程的中间阶段，当然它是可选的。暂存过程只是为了防止意外提交。一般来说，在提交之前，任何新的未跟踪文件或任何跟踪文件中的修改都需要暂存，然后如果我们键入`git commit` 暂存的文件，则仅提交。

简单地说，暂存的主要目的是防止意外提交。如果您使用暂存过程，则可以方便地在提交之前通过使用丢弃任何更改`git checkout filename`.

看看这个页面： http: [//git-scm.com/about/staging-area](http://git-scm.com/about/staging-area)

如果你真的相信你不需要 staging ，你可以使用`git commit -a` 它来简单地提交所有当前未跟踪的文件和跟踪文件中的修改。

始终建议进行暂存，因为您可以丢弃当前提交中不需要的任何更改。如果您使用`git commit -a`，则不必`git add filename`用于分期

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T13:42:21.970

`git commit -a`

是以下的简写：

```
git add file.txt
git commit file.txt 
```

这只是将新文件提交到存储库的一种更简单的方法。（文件必须在提交之前“添加”）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-22T13:42:53.407

`git -a commit`相当于

```
git add . 
git commit 
```

# visual-studio-2010 - Build->Deploy 不适用于数据库项目

> ID：14459928
> 
> 赞同：2
> 
> 时间：2013-01-22T13:40:29.367
> 
> 标签：visual-studio-2010, visual-studio-2012, visual-studio-dbpro

我在 Visual Studio 2012 中有一个数据库项目。在“构建”菜单上选择“部署 MyDBProj”时，没有任何反应。

但是，当我按 F5 进行调试时，使用数据库项目属性的调试部分中的设置部署了数据库项目*。*这通过选中解决方案配置管理器中的“部署”复选框来启用。

**我希望能够在不启动调试会话的情况下进行部署。我怎么做？**

注意：这*不是*发布，这是另一回事。我想知道如何手动启动作为构建过程一部分的*部署。*由于部署已经自动完成，因此也应该可以手动启动它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T15:59:28.063

我在 MS Connect 上得到了 Microsoft 的答复：

> 出现在 Visual Studio 2012 中的 SSDT 版本中存在一个错误，部署菜单命令出现，但没有操作。此问题已得到修复，可在最新版本的 SSDT 中使用：http: [//msdn.microsoft.com/en-us/data/hh297027](http://msdn.microsoft.com/en-us/data/hh297027)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:54:39.027

我能想到的唯一方法（尽管我还没有测试过）是使用命令行来完成它，如[http://msdn.microsoft.com/en-us/library/dd193258(v =vs.100).aspx](http://msdn.microsoft.com/en-us/library/dd193258(v=vs.100).aspx)。

虽然一旦你有了清单，你就可以运行：

```
VSDBCMD /a:Deploy /dd:+ /manifest:manifestFileName.dbmanifest 
```

从命令行部署数据库。

清单将包含您的目标数据库名称、连接字符串等，但您也可以将它们指定为命令行的一部分。

# cookies - 以 cookie 为条件显示 php 联系表

> ID：14459936
> 
> 赞同：0
> 
> 时间：2013-01-22T13:40:55.100
> 
> 标签：cookies

我有一个带有提交按钮的 php 联系表格，我想做的是根据 cookie 显示这个表格。

例如，如果 websitecookie =1，则显示联系表格，或者显示诸如“表格已完成”之类的消息。甚至显示一个页面，其中只有一个图像在中心，例如 image.png，没有别的。

解决方案是这样的：

```
if (isset($_COOKIE['websitecookie'])
{
    die('You may only submit this form once per session!');
} 
```

但是我对如何在条件内添加联系表单和 image.png 值感到困惑。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:16:42.570

对我来说，您似乎正在努力避免垃圾邮件。

如果是这种情况，您应该知道垃圾邮件主要是由寻找向公众开放的表单的机器人生成的，没有任何形式的验证。饼干不会阻止他们！

为防止这种情况，您可以插入验证码。
[http://nl.wikipedia.org/wiki/Captcha](http://nl.wikipedia.org/wiki/Captcha)

在所有其他情况下，最好的选择似乎是要求访问者登录，这样您就可以通过数据库中的时间戳跟踪他们最后的“提交”。

# extjs - 如何填充没有子节点或叶子信息的 Ext.data.TreeStore？

> ID：14459940
> 
> 赞同：1
> 
> 时间：2013-01-22T13:41:03.923
> 
> 标签：extjs, extjs4, gridpanel, treepanel

我有一个返回一系列事物的服务。一个事物只有一个`id`和一个`name`。

我想将这些加载到`Ext.tree.Panel`. 目前，我已经定义了一个模拟来自服务的典型响应的数据存储。[**你可以在这里**](http://jsfiddle.net/2nqAh/7/)玩一个演示 JSFiddle 。

代码也包括在下面：

```
Ext.define('Thing', {
    extend: 'Ext.data.Model',
    fields: ['id', 'name'],
});

var store = Ext.create('Ext.data.TreeStore', {
    model: 'Thing',

    // example service response (in reality, this would be JSON)
    root: {
        children: [
            {
                id: 1,
                name: 'Thing 1',
            },
            {
                id: 2,
                name: 'Thing 2',
            },
            {
                id: 3,
                name: 'Thing 3',
            },
        ],
    },

    listeners: {
        append: function(thisNode, newChildNode, index, eOpts) {
            if( !newChildNode.isRoot() ) {
                newChildNode.set('text', newChildNode.get('name'));
            }
        },
    },
});

Ext.create('Ext.tree.Panel', {
    renderTo: Ext.getBody(),
    store: store,
    rootVisible: false,
}); 
```

如您所见，该服务仅返回 Thing 的`id`and ，没有像or之类的`name`树节点信息，这是 an通常所期望的。`children``leaf``Ext.data.TreeStore`

我根本无法更改服务作为响应返回的内容。我喜欢我可以调用该服务并获得一个平面的事物数组，而无需额外的树节点信息。有许多与该服务通信的应用程序根本不需要此类数据，而且我无权更改它。

不幸的是，如果没有`children`为响应中的每个事物定义元素，当我尝试扩展节点时，Ext 会引发以下错误（您可以在 JSFiddle 中自己生成）：

```
Uncaught TypeError: Cannot call method 'indexOf' of undefined 
```

**所以，我的问题是：**我怎样才能避免在我的回复中发回`children`（或`leaf`）并解决这个错误？我只是想让我的东西被加载到树中并且可以扩展（是的，它们不能是叶子）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:45:18.987

自己添加这些信息！

小例子（您可以轻松地从浏览器的控制台中尝试）：

```
a = {b:23};
a.c = 25;
//a is now the same like {b:23, c:25} 
```

在商店的 afterRequest 方法中，您可以例如执行以下操作：

```
proxy: {
    type: 'ajax',

    url: 'xxx',

    listeners: {
        exception: function(proxy, response, options) {
            //error case
        }
    },

    afterRequest: function(request, success) {
        var resText = request.operation.response.responseText,
            allThings = Ext.decode(resText),  //Decodes (parses) a JSON string to an object
            things = allThins.children,       //Now we have an object an we can do what we want...
            length = things.length;

        for (var i = 0; i < length; i++) {
            things[i].leaf = true;
            things[i].expanded = true;
        }

        this.setRootNode(allThings); 
    }
} 
```

这只是一些伪代码，但它应该可以工作！设置一个**调试器语句**( [Link](http://blog.katworksgames.com/2012/09/27/debugger-statement-makes-javascript-development-easier/) )，看看你真正得到了什么！

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T18:17:54.510

您可以尝试迭代您的响应存储并创建子节点。然后将您的孩子附加到您的根节点

```
store.each(function(rec) {  
  var childNode ;  
  //Create a new object and set it as a leaf node (leaf: true)  
  childNode = Ext.create('Model_Name', {  
       id: rec.data.id,  
       name: rec.data.name,
       text : rec.data.name,  
       leaf : true,  
  });  
  // add/append this object to your root node  
  treepanel.getRootNode().appendChild(childNode );  
 }); 
```

检查[此链接](http://atechiediary.blogspot.in/2013/06/extjs-how-to-create-static-and-dynamic.html)以获取更多详细信息

# c# - 在文本框中添加数字

> ID：14459945
> 
> 赞同：3
> 
> 时间：2013-01-22T13:41:17.797
> 
> 标签：c#, function, textbox, null

我有这段代码，它仅在所有文本框都包含值时才有效。但是如果文本框为空，我会收到错误消息。

```
Int32 Total = Int32.Parse((txtChild1.Text))
            + Int32.Parse(txtChild2.Text)
            + Int32.Parse(txtChild3.Text)
            + Int32.Parse(txtWife1.Text)
            + Int32.Parse(txtWife2.Text)
            + Int32.Parse(txtWife3.Text); 
```

我知道它必须是像 IsNull 这样的函数，但对于整数值。有谁知道它是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T13:42:51.407

您正在寻找[`Int32.TryParse`](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)：

```
Int32 val;
if (Int32.TryParse(txtChild1.Text, out val)){
  // val is a valid integer.
} 
```

您调用每个`.Text`属性，然后将它们加在一起。您还可以进行扩展以使其更容易（如果您选择）：

```
public static class NumericParsingExtender
{
    public static Int32 ToInt32(this String input, Int32 defaultValue = 0)
    {
      if (String.IsNullOrEmpty(input)) return defaultValue;
      Int32 val;
      return Int32.TryParse(input, out val) ? val : defaultValue;
    }
} 
```

然后，在实践中：

```
Int32 total = txtChild1.Text.ToInt32() + txtChild2.Text.ToInt32()
            + txtChild3.Text.ToInt32() + /* ... */; 
```

当然，还有[一个例子](http://ideone.com/vEhc5L)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T13:43:29.267

您应该`TextBox`在解析之前检查它是否不为空，或者您可以使用`TryParse`

[http://msdn.microsoft.com/en-us/library/f02979c7.aspx](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T13:47:58.683

您可以使用`Int32.TryParse`：

```
Int32 int1 = 0;
Int32.TryParse(txtChild1.Text, out int1);
//.... more int declarations
Int32 total = int1 + int2 + int3; //etc. etc. 
```

`TryParse`将尝试解析文本，如果失败，它将变量设置为 0。

您还可以内联一些逻辑（尽管这会使代码非常长且混乱）：

```
Int32 Total = (txtChild1.Text.Length == 0 ? 0 : Int32.TryParse(txtChild1.Text)) + (txtChild2.Text.Length == 0 ? 0 : Int32.TryParse(txtChild2.Text)); //etc. etc. 
```

`Int32.TryParse`参考：http: [//msdn.microsoft.com/en-us/library/f02979c7.aspx](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)

Shorthand if reference: [http://msdn.microsoft.com/en-gb/library/ty67wk28(v=vs.110).aspx](http://msdn.microsoft.com/en-gb/library/ty67wk28(v=vs.110).aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T13:43:53.907

您无法解析空字符串“”。在解析之前检查该框是否包含任何内容。

```
Textbox.text != "" 
```

其他答案更快使用 tryparse 实际上是最好的，因为它用更少的代码行做同样的事情！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-22T13:44:01.250

`Int32`是一个*值类型*。不可能`null`。或者当然有一个`nullable types`但是嘿..

[`Int32.Tryparse()`](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)用方法试试。

> 将数字的字符串表示形式转换为其等效的 32 位有符号整数。返回值指示操作是否成功。

```
Int32.TryParse(txtChild1.Text, out val) 
```

`boolean` `true`如果 s 转换成功，则返回；否则，`false`。

# facebook - 如何在 GraphApi 中获取帖子的位置？

> ID：14459947
> 
> 赞同：1
> 
> 时间：2013-01-22T13:41:24.227
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

我想知道如何从 Graph API 获取帖子的位置？

```
https://graph.facebook.com/[SOME_ID_THAT_I_HAVE_ACCESS_ON]/posts?limit=10&offset=0&access_token=[TOKEN]; 
```

这将检索用户的所有帖子，但检索到的数据没有位置/地点字段。

是否可以获得所有帖子的位置（如果由用户指定）？

**注意：我在一个测试帐户上测试了上述内容，我在该帐户上发布了所有帖子并与位置共享。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:54:13.103

您需要该字段`read_stream`的权限。`place`

[http://developers.facebook.com/docs/reference/api/post/](http://developers.facebook.com/docs/reference/api/post/)

# spring - webapp中的Spring Aspectj实例化模型

> ID：14459950
> 
> 赞同：0
> 
> 时间：2013-01-22T13:41:46.217
> 
> 标签：spring, spring-mvc, aspectj, spring-aop, aop

我有一个 Spring Web 应用程序，我正在尝试向我的服务对象添加一些方面。目标是仅通过单个请求范围维护方面的状态，并获取对方面实例的引用，以便我可以管理状态。我尝试了 3 种不同版本的代码，通过控制器发出请求：

1.  与相关代码相同（见下文）。状态是通过多次调用来保留的，但是`@Autowired TestAspect aspect`AOP框架使用的实例并不相同。
2.  添加`factory-method="aspectOf"`到 beans-context.xml 中的 testAspect bean 声明，状态保持如前，`@Autowired TestAspect aspect`实例与 AOP 框架使用的相同。虽然它有效，但我希望方面的范围是单个请求，而在这种情况下，我有一个应用程序范围的单例。
3.  替换`@Aspect`为`@Aspect("perthis(participateAroundPointcut())")`I 得到以下异常：`Caused by: java.lang.IllegalArgumentException: Bean with name 'testAspect' is a singleton, but aspect instantiation model is not singleton`，无论`factory-method="aspectOf"`有无。

如何获得`@Autowired TestAspect aspect`AOP 框架使用的相同方面实例的引用？是`factory-method="aspectOf"`唯一的方法吗？我怎样才能有一个请求范围的方面而不是一个单例？为什么我得到异常？

这是我的代码。服务：

```
@Service
public class TestService {

    @Autowired
    private TestAspect aspect;

    private static final Logger logger = LoggerFactory.getLogger(TestService.class);

    public void method(){
            logger.debug("Executing method");
    }

    public void service(){
        aspect.initialize();
        method();
    }
} 
```

方面：（无`("perthis(participateAroundPointcut())")`）

```
@Aspect
public class TestAspect {

    private static final Logger logger = LoggerFactory.getLogger(ParticipatoryAspect.class);

    private boolean initialized=false;

    @Pointcut("execution(* org.mose.emergencyalert.TestService.method(..))")
    public void participateAroundPointcut(){}

    @Around("participateAroundPointcut()")
    public void participateAround(ProceedingJoinPoint joinPoint) throws Throwable{
        logger.debug("Pre-execution; Initialized: "+initialized);
        joinPoint.proceed();
        logger.debug("Post-execution");
    }

    public void initialize(){
        this.initialized=true;
        logger.debug("Initialized: "+initialized);
    }
} 
```

beans-context.xml（没有`factory-method="aspectOf"`）：

```
<aop:aspectj-autoproxy />

<bean id="testAspect" class="org.mose.emergencyalert.aop.aspects.TestAspect"/> 
```

# http-headers - 应发送什么 HTTP 代码以响应可疑的恶意请求

> ID：14459951
> 
> 赞同：3
> 
> 时间：2013-01-22T13:41:48.307
> 
> 标签：http-headers

假设我发现我的 Web 应用程序收到了明显是 SQL 注入攻击或类似攻击的请求。我写了一个简短的测试来检查“顽皮”字符串的请求变量。如果我找到一个，我应该用什么代码回复？

我正在考虑返回“403 Forbidden”并且没有内容，但我不确定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T13:45:14.340

我认为这`403 Forbidden`意味着不应访问该资源。

因此，我会`400 Bad Request`改用。毕竟，只要用户提出合法请求，他们就可以访问该页面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T13:44:54.447

[http://en.wikipedia.org/wiki/List_of_HTTP_status_codes](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)
对我来说，“400：错误请求”似乎是最合乎逻辑的选择。

编辑：也许它更多地取决于上下文。

如果确实无法继续您的脚本，请返回 400 或 404 代码。

在所有其他情况下，当您的代码“检测到”恶意尝试时，不应通知用户（黑客）。您的验证应该是检测无效输入的类型，而不是恶意尝试。

唯一的例外是蛮力攻击（有关如何防止这些攻击的更多信息，请参见防止[网站上的蛮力登录](https://stackoverflow.com/questions/424210/preventing-brute-force-logins-on-websites?lq=1)）。

例如：
如果您的表单包含用户名文本框，并且用户（黑客）尝试使用某种引用的 SQL 语句登录/注册，则您的验证应自动声明“用户名无效”。

另一方面，出于登录目的，您应该使用链接中所述的选项保护您的应用程序免受暴力攻击。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T13:48:10.707

如果您能够识别请求的问题并且他们正在要求允许的东西，只是以一种偷偷摸摸的方式，您应该能够防止它们造成任何损害并处理它们。但是如果请求没有意义，400 Bad Request 可能是最好的选择。

# mysql - 即使在使用 NEW 之后，MySQL 触发器更新也会失败。指定字段

> ID：14459954
> 
> 赞同：0
> 
> 时间：2013-01-22T13:42:13.120
> 
> 标签：mysql, triggers

我正在尝试创建一个触发器，该触发器根据同一插入上`foo`的字段值将字段填充到“set_to_1”或“set_to_2” 。`bar`我回来了错误：

**错误 1442 (HY000)：无法更新存储函数/触发器中的表“my_table”，因为它已被调用此存储函数/触发器的语句使用。**

我对此错误进行了一些研究，我发现的所有解决方案都指向原始语句`NEW.field_name`在检查/更新插入字段名称时未指定的问题。我相信我已经在这样做了。

我查看的其他问题/答案位于这两个链接中，但这些似乎表明我做得正确。

[mysql'插入后'触发器以根据其他字段计算字段](https://stackoverflow.com/questions/6942052/mysql-after-insert-trigger-to-calculate-a-field-based-on-other-fields)

[http://crazytoon.com/2008/03/03/mysql-error-1442-hy000-cant-update-table-t1-in-stored-functiontrigger-because-it-is-already-used-by-statement- which-invoked-this-stored-functiontrigger/](http://crazytoon.com/2008/03/03/mysql-error-1442-hy000-cant-update-table-t1-in-stored-functiontrigger-because-it-is-already-used-by-statement-which-invoked-this-stored-functiontrigger/)

```
CREATE
    /*[DEFINER = { user | CURRENT_USER }]*/
    TRIGGER `compare`.`trigger_before_insert` BEFORE INSERT ON `my_database`.`my_table`
FOR EACH ROW BEGIN
IF  NEW.foo IS NULL OR
   NEW.foo LIKE ''
THEN
   IF (NEW.bar LIKE 'test1'
      OR NEW.bar LIKE 'test2')
   THEN
SET NEW.foo = 'set_to_1';
   ELSE
      SET NEW.foo = 'set_to_2';
   END IF;
END IF; 
```

结尾

# vb.net - Crystal Report 总是要求数据库登录

> ID：14459966
> 
> 赞同：2
> 
> 时间：2013-01-22T13:42:49.117
> 
> 标签：vb.net, crystal-reports-2008

我需要你的帮助。

我正在为商店程序编写代码，我正在使用 vb.net 2008 和 Crystal Report 版本 10.5.37xxxx

问题是当我试图在客户端计算机上安装我的程序时，一切正常，但在我的 Crystal Report 中却不行。它总是要求数据库登录，我没有编写我的程序来要求数据库登录。

我只是用这样的简单代码编写了它：

```
Public Class Form16

    Private Sub Form16_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Dim view As New CrystalReport4
        view.SetParameterValue("p_1", Form5.no_faktur_tb_immanuel)
        CrystalReportViewer1.ReportSource = view
    End Sub

End Class 
```

谁能帮我这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:54:50.500

确保您的报告`DataSource Provider`设置为`Microsoft OLE DB provider for SQL Server`而不是`SQL Server Native Client 10.0`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:57:42.580

您应该能够手动编写登录凭据。

```
Public Class Form16

    Private Sub Form16_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

        Dim view As New CrystalReport4
        Dim user as string = "Username"
        Dim pwd as string = "Password"

        view.SetDatabaseLogon(user, pwd)
        view.SetParameterValue("p_1", Form5.no_faktur_tb_immanuel)
        CrystalReportViewer1.ReportSource = view

    End Sub

End Class 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-09T07:23:06.957

尝试打开字段资源管理器--->数据库字段--->右键单击-->当前数据源--->报告连接----->报告 ----->属性---->设置属性作为 - -

数据源：.\Databasename.accdb

查看器表单上的代码加载为

Dim cryRpt 作为新的 ReportDocument

```
 Dim Report1 As New rptItemWise

    Dim strServerName As String
    strServerName = Application.StartupPath
rptItemWise.SetDatabaseLogon("admin", "", strServerName, "dastabasename.accdb", True)

    cryRpt.Load(Application.StartupPath + "\rptItemWise.rpt") 
```

还更改与数据源相同的报告连接我认为代码对你有用....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-27T10:40:56.600

这对你有用！

C#代码：

```
 ConnectionInfo boconnectioninfo = new ConnectionInfo ();

boconnectioninfo.ServerName= "D-2818-w2k";

boconnectioninfo.DatabaseName ="NW";

boconnectioninfo.UserID ="sa";

boconnectioninfo.Password ="sa";

CrystalReportViewer1 .ReportSource = Server.MapPath("CrystalReport1.rpt");

TableLogOnInfos botableInfo= CrystalReportViewer1 .LogOnInfo;

            foreach (TableLogOnInfo obj2 in botableInfo)

            {
                obj2.ConnectionInfo =boconnectioninfo;

            } 
```

VB.net 代码：

```
 Dim boconnectioninfo As New ConnectionInfo
        boconnectioninfo.ServerName = "sa"
        boconnectioninfo.DatabaseName = "sa"
        boconnectioninfo.UserID = "sa"
        boconnectioninfo.Password = "sa"
        Me.rptViewer.ReportSource = _ReportPath
        Me.rptViewer.SelectionFormula = _SelectionFormula
        If Not _ParameterFields Is Nothing Then
            Me.rptViewer.ParameterFieldInfo = _ParameterFields
        End If
        Dim a As TableLogOnInfos = Me.rptViewer.LogOnInfo

        ' Iterate through the list.
        For Each aa As TableLogOnInfo In a
            aa.ConnectionInfo = boconnectioninfo
        Next

        Me.Cursor = Cursors.Default
        rptViewer.Refresh() 
```

# android - AchartEngine XYchart 背景颜色问题

> ID：14459971
> 
> 赞同：3
> 
> 时间：2013-01-22T13:42:57.040
> 
> 标签：android, achartengine

我在使用 achart 引擎的 xychart 中遇到问题。实际上，背景颜色仅在轴区域内设置。我的代码：

```
private XYMultipleSeriesDataset mDataset = new XYMultipleSeriesDataset();
private XYMultipleSeriesRenderer mRendererXY = new   XYMultipleSeriesRenderer();

private XYSeries mSeriesXY;
private GraphicalView mXYView;

private ViewFlinger mFlingy;
private int index = 0;

public StatChallengeTabManager(Context ctx, ViewFlinger flingy) {
    mCtx = ctx;
    mFlingy = flingy;
    mStatDBManagerCh = new StatDBManagerChallenge(ctx);
}

public void drawStats() {
    LayoutInflater inflate = (LayoutInflater) mCtx
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    v1 = inflate.inflate(R.layout.v1, null);
    v2 = inflate.inflate(R.layout.v2, null);
    mFlingy.addView(v1);
    mFlingy.addView(v2);

    drawFirstChart();
    drawSecondChart();

}

private void drawFirstChart() {

    if (mXYView == null) {

        mRendererXY.setAxisTitleTextSize(30);
        mRendererXY.setChartTitleTextSize(40);
        mRendererXY.setChartTitle(mCtx.getString(R.string.score_trend));
        mRendererXY.setLabelsColor(Color.BLACK);
        mRendererXY.setXLabelsColor(Color.BLACK);
        mRendererXY.setYLabelsColor(0, Color.BLACK);
        mRendererXY.setMargins(new int[] { 50, 60, 0, 50 });
        mRendererXY.setLabelsTextSize(30);
        mRendererXY.setZoomButtonsVisible(false);
        mRendererXY.setPointSize(8);
        mRendererXY.setDisplayValues(true);
        mRendererXY.setShowLegend(false);
        mRendererXY.setScale(.8f);

        XYSeriesRenderer r = new XYSeriesRenderer();
        r.setColor(COLORS[0]);
        r.setPointStyle(PointStyle.CIRCLE);
        r.setFillBelowLine(false);
        r.setFillPoints(true);
        mRendererXY.addSeriesRenderer(r);

        mRendererXY.setXTitle(mCtx.getString(R.string.game_id));
        mRendererXY.setYTitle(mCtx.getString(R.string.game_score));
        mRendererXY.setFitLegend(true);
        mRendererXY.setAxesColor(Color.BLACK);
        mRendererXY.setShowGrid(true);
        mRendererXY.setXAxisMin(-0.5);
        mRendererXY.setYAxisMin(0);
        mRendererXY.setXAxisMax(10.5);
        mRendererXY.setZoomEnabled(false);
        mRendererXY.setYAxisMax(100000);
        mRendererXY.setInScroll(true);
        mRendererXY.setClickEnabled(true);

        mRendererXY.setBackgroundColor(Color.argb(255, 255, 248, 220));
        mRendererXY.setApplyBackgroundColor(true);

        int[] res = mStatDBManagerCh.getGameScores();
        mSeriesXY = new XYSeries(mCtx.getString(R.string.score_trend));
        for (int i = 0; i < res.length; i++) {
            if (res[i] == 0)
                continue;
            mSeriesXY.add(i, res[i]);

        }
        mDataset.addSeries(mSeriesXY);
        mXYView = ChartFactory.getLineChartView(mCtx, mDataset, mRendererXY);

        LinearLayout layout = (LinearLayout) v1.findViewById(R.id.chart1);
        layout.addView(mXYView, new LayoutParams(
            LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
    } else {
        LinearLayout layout = (LinearLayout) v1.findViewById(R.id.chart1);
        layout.addView(mXYView, new LayoutParams(
            LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
        mXYView.repaint();
    }

} 
```

而 v1.xml 是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/chart1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="horizontal" />
</LinearLayout> 
```

结果是[https://www.dropbox.com/s/z2wuq1j0bjwz1wj/problem.png](https://www.dropbox.com/s/z2wuq1j0bjwz1wj/problem.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T13:47:01.673

只需调用`mRendererXY.setMarginsColor(color);`，您也将设置边距背景。

# jquery-mobile - 带有 jquery mobile 的卡通应用程序

> ID：14459977
> 
> 赞同：-1
> 
> 时间：2013-01-22T13:43:20.440
> 
> 标签：jquery-mobile, cordova

我想用jQuery Mobile 和PhoneGap 制作一个教育移动应用程序，即卡通鉴赏。是否有关于如何启动我的应用程序的插件或教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T06:25:54.820

以下链接可能对您有所帮助，

[使用 Phonegap + Kinetic.JS 的 HTML5 移动 Web 画布动画](http://w2davids.wordpress.com/html5-mobile-web-canvas-animation-using-phonegap-kinetic-js/ "HTML5 画布动画")

[HTML5 游戏](http://blogs.msdn.com/b/davrous/archive/2011/07/21/html5-gaming-animating-sprites-in-canvas-with-easeljs.aspx "HTML5 游戏：使用 EaselJS 在 Canvas 中制作精灵动画")

[提高 HTML5 Canvas 中的动画性能](http://ramkulkarni.com/blog/improving-animation-performance-in-html5-canvas/ "HTML5 画布")

希望它有所帮助

# css - PNG图像上的CSS叠加动画

> ID：14459984
> 
> 赞同：0
> 
> 时间：2013-01-22T13:43:37.330
> 
> 标签：css, animation, colors, spinning

今天我正在定制我的网站，我记得几个月前我看到的一个非常好的 CSS 效果。我没有在我的书签上找到它。

该网站有一个大标志，上面有颜色移动。看了源码，看到Logo是一个黑色的PNG文件，还有另外一个Image，一个Color Circle在上面旋转，但是有一些叠加效果，圆圈的颜色只出现在黑色部分徽标。

任何人都知道该网站或我如何使用此效果？使某些图像仅出现在另一个图像的非透明部分上？

感谢你并致以真诚的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T13:50:31.927

听起来可能是[CSS 混合模式](http://www.adobe.com/devnet/html5/articles/css-blending.html)，它是由 Adob​​e 引入的，[目前在某些](http://blog.cjgammon.com/?p=447)带有`-webkit`前缀的 WebKit 版本中工作。

# .net - 如何从 .NET DLL 创建类的文档？

> ID：14459986
> 
> 赞同：5
> 
> 时间：2013-01-22T13:43:40.373
> 
> 标签：.net, class, documentation

我有一个专有的.NET DLL，没有我需要使用的源代码。如何生成有关 DLL 公开的类的文档？

我会寻找类似`javadoc`java的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T14:43:29.557

CodePlex 上 Sandcastle 主页的注意事项：

> Sandcastle CodePlex 项目不再由 Microsoft 积极开发，因此，该站点将不会有未来的版本。
> 
> 现有的 Sandcastle 源代码已分叉到 Eric Woodruff 的 Sandcastle Help File Builder 站点，网址为~~[http://shfb.codeplex.com/](http://shfb.codeplex.com/)~~（移至 --> [GitHub](https://github.com/EWSoftware/SHFB)）。从现在开始，您应该从这个新位置下载最新版本。从现在开始，Eric 将负责 Sandcastle 的新版本。

对@ORMapper 的回答发表了更多评论，但我无法发表评论（低于所需的 50 个代表）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T13:46:32.900

使用[Microsoft Sandcastle](http://sandcastle.codeplex.com/)，可能与[Sandcastle Help File Builder](https://github.com/EWSoftware/SHFB)一起使用。它将生成文档 HTML 文件或 Windows 帮助文件。

如果 DLL 附带同名的 Xml 文件，则该文件甚至可能包含 DLL 的一些文本文档。否则，Sandcastle 仍然会有所帮助，因为它会生成类及其成员的概览，您可以通过单击链接在其中从一个类型导航到另一个类型。

# ssis - 如何使用 RetainSameConnection = True 关闭 SSIS 连接

> ID：14459987
> 
> 赞同：1
> 
> 时间：2013-01-22T13:43:46.967
> 
> 标签：ssis, connection

我有一个将 RetainSameConnection 设置为 True 的 ODBC 连接。

我认为在我的包完成后它仍然保持打开状态，因为`SELECT COUNT(*) FROM MyTable`直接来自我的查询浏览器的简单查询会挂起。

这听起来可能吗？我如何证明/反驳我的理论？完成后，有没有办法在 SSIS 中强制关闭此连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:15:07.947

`SELECT TOP 1 * FROM MyTable`我通过做一个立即成功返回来反驳我的理论。

奇怪的是，问题`COUNT(*)`实际上真的很慢 - 当我添加一些子句（不影响任何记录）时，计数立即返回。这些子句更改了查询执行计划，以便使用主键。不知道为什么它无论如何都不会使用密钥...

```
-- Slooooow - 500K records
SELECT COUNT(*) FROM MyTable

-- Instant - 500K records
SELECT COUNT(*) FROM MyTable WHERE ColX > 0 AND ColY > 0 
```

# python - tkinter 列表框用 python 拖放

> ID：14459993
> 
> 赞同：3
> 
> 时间：2013-01-22T13:43:59.333
> 
> 标签：python, listbox, widget, tkinter

谁能指出我在哪里可以找到有关制作具有拖放项目以进行重新排列的能力的列表框的信息？我发现了一些与 Perl 相关的东西，但我对那种语言一无所知，而且我对 tkinter 还很陌生，所以这很令人困惑。我知道如何生成列表框，但我不确定如何通过拖放重新排序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-29T20:02:22.847

以下是[11.4 节](http://flylib.com/books/en/2.9.1.229/1/)中的代码：

```
import Tkinter 

class DragDropListbox(Tkinter.Listbox):
    """ A Tkinter listbox with drag'n'drop reordering of entries. """
    def __init__(self, master, **kw):
        kw['selectmode'] = Tkinter.SINGLE
        Tkinter.Listbox.__init__(self, master, kw)
        self.bind('<Button-1>', self.setCurrent)
        self.bind('<B1-Motion>', self.shiftSelection)
        self.curIndex = None

    def setCurrent(self, event):
        self.curIndex = self.nearest(event.y)

    def shiftSelection(self, event):
        i = self.nearest(event.y)
        if i < self.curIndex:
            x = self.get(i)
            self.delete(i)
            self.insert(i+1, x)
            self.curIndex = i
        elif i > self.curIndex:
            x = self.get(i)
            self.delete(i)
            self.insert(i-1, x)
            self.curIndex = i 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-02T21:19:51.840

如果您处理的`MULTIPLE`是`selectmode`（而不是`SINGLE`），这是一个修改后的配方。

所做的更改：

1.  当拖过一个已经选择的项目时，它会取消选择它，这是一个糟糕的用户体验。
2.  单击已选择的项目时，单击时将取消选择该项目。所以我添加了`self.curState`一点来跟踪单击项目的状态是否最初被选中。当你拖动它时，它不会失去它的状态。
3.  我还将两个事件绑定到`Button-1`使用的事件，`add='+'`但这可能通过简单地保持在`setCurrent`.
4.  我更喜欢`activestyle`equals `'none'`。
5.  做了这个`Listbox` `tk.MULTIPLE`而不是`tk.SINGLE`.

这是代码：

```
class Drag_and_Drop_Listbox(tk.Listbox):
  """ A tk listbox with drag'n'drop reordering of entries. """
  def __init__(self, master, **kw):
    kw['selectmode'] = tk.MULTIPLE
    kw['activestyle'] = 'none'
    tk.Listbox.__init__(self, master, kw)
    self.bind('<Button-1>', self.getState, add='+')
    self.bind('<Button-1>', self.setCurrent, add='+')
    self.bind('<B1-Motion>', self.shiftSelection)
    self.curIndex = None
    self.curState = None
  def setCurrent(self, event):
    ''' gets the current index of the clicked item in the listbox '''
    self.curIndex = self.nearest(event.y)
  def getState(self, event):
    ''' checks if the clicked item in listbox is selected '''
    i = self.nearest(event.y)
    self.curState = self.selection_includes(i)
  def shiftSelection(self, event):
    ''' shifts item up or down in listbox '''
    i = self.nearest(event.y)
    if self.curState == 1:
      self.selection_set(self.curIndex)
    else:
      self.selection_clear(self.curIndex)
    if i < self.curIndex:
      # Moves up
      x = self.get(i)
      selected = self.selection_includes(i)
      self.delete(i)
      self.insert(i+1, x)
      if selected:
        self.selection_set(i+1)
      self.curIndex = i
    elif i > self.curIndex:
      # Moves down
      x = self.get(i)
      selected = self.selection_includes(i)
      self.delete(i)
      self.insert(i-1, x)
      if selected:
        self.selection_set(i-1)
      self.curIndex = i 
```

示例演示：

```
root = tk.Tk()
listbox = Drag_and_Drop_Listbox(root)
for i,name in enumerate(['name'+str(i) for i in range(10)]):
  listbox.insert(tk.END, name)
  if i % 2 == 0:
    listbox.selection_set(i)
listbox.pack(fill=tk.BOTH, expand=True)
root.mainloop() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-17T22:10:10.790

以下类是具有`EXTENDED`选择模式的列表框，可以在多个选定项目周围拖动。

*   保留默认选择机制（通过拖动和单击，包括按住 Ctrl 或 Shift），但在不按住 Ctrl 的情况下拖动已选择的项目除外。
*   要拖动所选内容，请将其中一个所选项目拖动到最后一个所选项目的下方或第一个所选项目的上方。
*   要在拖动选择时滚动列表框，请使用鼠标滚轮或将光标移动到列表框顶部或底部附近或之外。=> 这可以改进：因为它绑定到`B1‑Motion`事件，需要额外的鼠标移动才能继续滚动。在较长的列表框中感觉有问题。
*   如果选择不连续，拖动将通过分别向上或向下移动未选择的项目使其连续。

上面的意思是只拖一个item，需要先选中，然后再点击拖拽。

```
import tkinter as tk;

class ReorderableListbox(tk.Listbox):
    """ A Tkinter listbox with drag & drop reordering of lines """
    def __init__(self, master, **kw):
        kw['selectmode'] = tk.EXTENDED
        tk.Listbox.__init__(self, master, kw)
        self.bind('<Button-1>', self.setCurrent)
        self.bind('<Control-1>', self.toggleSelection)
        self.bind('<B1-Motion>', self.shiftSelection)
        self.bind('<Leave>',  self.onLeave)
        self.bind('<Enter>',  self.onEnter)
        self.selectionClicked = False
        self.left = False
        self.unlockShifting()
        self.ctrlClicked = False
    def orderChangedEventHandler(self):
        pass

    def onLeave(self, event):
        # prevents changing selection when dragging
        # already selected items beyond the edge of the listbox
        if self.selectionClicked:
            self.left = True
            return 'break'
    def onEnter(self, event):
        #TODO
        self.left = False

    def setCurrent(self, event):
        self.ctrlClicked = False
        i = self.nearest(event.y)
        self.selectionClicked = self.selection_includes(i)
        if (self.selectionClicked):
            return 'break'

    def toggleSelection(self, event):
        self.ctrlClicked = True

    def moveElement(self, source, target):
        if not self.ctrlClicked:
            element = self.get(source)
            self.delete(source)
            self.insert(target, element)

    def unlockShifting(self):
        self.shifting = False
    def lockShifting(self):
        # prevent moving processes from disturbing each other
        # and prevent scrolling too fast
        # when dragged to the top/bottom of visible area
        self.shifting = True

    def shiftSelection(self, event):
        if self.ctrlClicked:
            return
        selection = self.curselection()
        if not self.selectionClicked or len(selection) == 0:
            return

        selectionRange = range(min(selection), max(selection))
        currentIndex = self.nearest(event.y)

        if self.shifting:
            return 'break'

        lineHeight = 15
        bottomY = self.winfo_height()
        if event.y >= bottomY - lineHeight:
            self.lockShifting()
            self.see(self.nearest(bottomY - lineHeight) + 1)
            self.master.after(500, self.unlockShifting)
        if event.y <= lineHeight:
            self.lockShifting()
            self.see(self.nearest(lineHeight) - 1)
            self.master.after(500, self.unlockShifting)

        if currentIndex < min(selection):
            self.lockShifting()
            notInSelectionIndex = 0
            for i in selectionRange[::-1]:
                if not self.selection_includes(i):
                    self.moveElement(i, max(selection)-notInSelectionIndex)
                    notInSelectionIndex += 1
            currentIndex = min(selection)-1
            self.moveElement(currentIndex, currentIndex + len(selection))
            self.orderChangedEventHandler()
        elif currentIndex > max(selection):
            self.lockShifting()
            notInSelectionIndex = 0
            for i in selectionRange:
                if not self.selection_includes(i):
                    self.moveElement(i, min(selection)+notInSelectionIndex)
                    notInSelectionIndex += 1
            currentIndex = max(selection)+1
            self.moveElement(currentIndex, currentIndex - len(selection))
            self.orderChangedEventHandler()
        self.unlockShifting()
        return 'break' 
```

# javascript - 从组正则表达式中删除逗号

> ID：14459998
> 
> 赞同：5
> 
> 时间：2013-01-22T13:44:10.690
> 
> 标签：javascript, regex

有没有可能从这个：

美国专利 6,570,557

检索 3 个组：

1.  我们
2.  专利
3.  6570557（不带逗号）

到目前为止，我得到了：

```
(US)(\s{1}Patent\s{1})(\d{1},\d{3},\d{3}) 
```

并试图`(?!,)`摆脱逗号然后我有效地摆脱了整个数字。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T13:47:37.467

尝试：

```
var input   = 'US Patent 6,570,557',
    matches = input.match(/^(\w+) (\w+) ([\d,]+)/),

    code = matches[1],
    name = matches[2],
    numb = matches[3].replace(/,/g,''); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T13:57:05.030

您可以使用 2 个简单的函数来代替使用正则表达式：

```
var str = "US Patent 6,570,557"; // Your input
var array = str.split(" "); // Separating each word
array[2] = array[2].replace(",", ""); // Removing commas
return array; // The output 
```

这也应该更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T13:47:19.667

匹配时不能忽略逗号，除非将数字匹配为三个单独的部分，然后将它们连接在一起。

最好从匹配结果中的数字中去除分隔符，使用[`String.replace`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T13:49:01.810

只需添加更多组，如下所示：

```
(US)(\s{1}Patent\s{1})(\d{1}),(\d{3}),(\d{3}) 
```

然后连接最后3组

# e-commerce - 从技术角度来看，支付网关、商家账户和信用卡支付如何运作？

> ID：14459999
> 
> 赞同：2
> 
> 时间：2013-01-22T13:44:11.970
> 
> 标签：e-commerce, payment-gateway, merchant-account

从技术角度来看，支付网关、商家账户和信用卡支付如何运作？我在网上找不到很好的解释。活动图会很棒。