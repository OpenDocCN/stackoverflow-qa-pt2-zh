# StackOverflow 问答 14209000-14209999

# web-services - Web服务调用上的Scala Play2错误

> ID：14209001
> 
> 赞同：2
> 
> 时间：2013-01-08T05:54:58.147
> 
> 标签：web-services, scala, playframework, playframework-2.0

使用以下代码编译时出现错误。我正在尝试调用 Web 服务。

```
def authenticate(username: String, password: String): String = {
    val request: Future[Response] = 
      WS.url(XXConstants.URL_GetTicket)
          .withTimeout(5000)
          .post( Map("username" -> Seq(username), "password" -> Seq(password) ) )            
      request map { response => 
        Ok(response.xml.text)
      } recover {
        case t: TimeoutException => 
          RequestTimeout(t.getMessage)
        case e =>
          ServiceUnavailable(e.getMessage)
      }

} 
```

我看到以下编译器错误：

```
 type mismatch; found : scala.concurrent.Future[play.api.mvc.SimpleResult[String]] required: String 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T06:25:05.490

从您的`authenticate`函数返回的值`val request = ...`是类型`Future[Response]`，但函数需要 a `String`which 正如编译器所说的类型不匹配错误。在返回之前将函数的返回类型更改为`Future[Response]`或转换`request`为 a`String`应该可以修复它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T08:25:01.587

就像说布赖恩，`Future[String]`当你的方法说你想返回 a 时，你目前正在返回 a `String`。

该请求返回 a`Future`因为它是一个异步调用。

因此，您有两种选择：

1.  更改您的方法定义以返回 a `Future[String]`，并在另一个方法中管理这个未来（使用`.map()`）

2.  以同步方式强制请求**立即获得此结果。**这不是一个很好的交易，但有时它是最简单的解决方案。

    ```
    import scala.concurrent.Await
    import scala.concurrent.duration.Duration
    val response: String = Await.result(req, Duration.Inf) 
    ```

# javascript - 如何在替换事件注册区域时防止丢失事件

> ID：14209003
> 
> 赞同：-1
> 
> 时间：2013-01-08T05:55:01.060
> 
> 标签：javascript, jquery, ajax, events

我有一个由插件创建的点击事件，在我加载 $.ajax 并且只替换（更新）包含点击事件的区域后，该事件将丢失。

```
 <span ref='B'><span ref='A'></span></span>   
//click event is on A, but I replaced the html inside of B to <span ref='A'></span>;  
its update, so the replaced html are the same. 
```

我阅读了许多相关问题，我发现解决方案是

```
.live() //  will not work
.delegate(), // work
.on(), // work 
```

解决方案是我应该将事件绑定在 B 而不是 A 上`B.on('click', A, function(){})`......

但是，我的结构很难改变，我宁愿找到一种解决方案，可以在替换或替代时防止丢失事件。

请指教，万分感谢。

* * *

使用 detach() 解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T06:05:30.887

由于事件绑定存在于 DOM 元素的上下文中，因此当您开始删除或替换 DOM 元素时，您需要一些机制来重新建立事件绑定。

一个好的方法是通过父元素使用委托（如您所说 - `B.on('click', A, function(){})....`）。

另一种选择是始终在有问题的 DOM 元素被删除或替换时重新建立绑定（因此在您的场景中，听起来这必须在 Ajax 回调/完成处理程序中）但是这是通常是一种较差的方法，并且比委托方法更不优雅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T06:06:36.537

如果您担心将`on`事件应用于页面上的某个元素。然后我建议将事件绑定到`document`.

```
$(document).on('click', '#id-of-a', function(){

}); 
```

阅读此[博客文章](http://blog.jquery.com/2011/11/03/jquery-1-7-released/)以获取有关此的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T06:11:48.437

我找到了解决方案。使用 .detach() 可以做到这一点！测试。

# html - 如何在VBscript中调用自定义事件

> ID：14209006
> 
> 赞同：1
> 
> 时间：2013-01-08T05:55:17.770
> 
> 标签：html, dom, vbscript

我有一个负责脚本执行的 C++ 应用程序。目前我想在 Vb 脚本和 J 脚本中执行自定义事件触发。我为 J Script 编写了代码并且工作正常，我如何在 Vb Script 中实现这一点。（主要针对IE）

```
function customEventFn()
{
 alert("sample");
}
var element = document.getElementById("elemneid");
customEventFn.call(element); 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:57:20.210

最后我找到了我的问题的答案。上述方法在 Internet Explorer 9 之前的版本中不起作用。在早期的 Internet Explorer 版本中使用 attachEvent 方法注册事件处理程序。但它不会触发自定义事件。您需要安装 IE9 才能正确运行脚本。

1.  将以下标记添加到 htm 文件的 HEAD。-meta http-equiv="X-UA-Compatible" 内容="IE=9" -
2.  编写用函数包裹的事件体
3.  使用 getElementById' 获取对元素的引用</li>
4.  创建自定义事件并将该事件附加到元素，并作为步骤 1 中定义的函数回调。
5.  触发自定义事件
6.  从侦听器中删除自定义事件（removeEventListener）。

    函数自定义函数（）

    '函数体

    结束功能

    设置 customFn = getRef("CustomFunction")

    设置元素 = document.getElementById("elemid");

    element.addEventListener "OnSampleEvent", customFn

    设置事件 = document.createEvent("sampleEvent")

    Event.initCustomEvent "OnSampleEvent"，假，假，无

    element.dispatchEvent(事件)

    element.removeEventListener "OnSampleEvent", customFn

# android - 从另一个包调用活动

> ID：14209018
> 
> 赞同：0
> 
> 时间：2013-01-08T05:56:06.183
> 
> 标签：android, view, android-activity

我在 com.qz.launchfoneclayactivity 包中有一个活动。我需要在 com.qz.Test 包中启动一个活动。我尝试设置组件并使用 SetClass 也没有帮助...下面是我的 com.qz.launchfoneclayactivity 清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.qz.launchfoneclayactivity"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

         <activity android:name="com.x.test.StartUpActivity" />// This is the Activity name in another package
        <activity
            android:name="com.qz.launchfoneclayactivity.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

以下是我的第二个包裹清单的一部分

```
<?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android" 
    package="com.qz.test" 
    android:versionCode="xx" 
    android:versionName="x.x.x">
    ......................

<activity android:name=".StartUpActivity"
            android:launchMode="singleTop" 
            android:excludeFromRecents="true"
            android:configChanges="orientation|screenSize|keyboardHidden"                   
            android:theme="@android:style/Theme.Translucent.NoTitleBar" >                        
            <intent-filter>                        
                <action android:name="android.intent.action.VIEW" />                        
            </intent-filter>                              
            </activity> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T06:00:43.627

尝试从您的应用程序打开 android 应用程序活动：

```
Intent intent=new Intent(Intent.ACTION_VIEW);
intent.setComponent(new ComponentName("com.qz.test",
                            "com.qz.test.StartUpActivity"));
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T06:15:25.580

如果包属于不同的应用程序，请`android:exported`在清单文件中标记活动。然后外部包可以使用带有完整类名的 Intent 来启动它。

```
Intent start = new Intent(this,<target_class_name>);
startActivity(start); 
```

# python - 将 unicode 与 SQLAlchemy 和 Pyramid 一起使用

> ID：14209019
> 
> 赞同：0
> 
> 时间：2013-01-08T05:56:06.590
> 
> 标签：python, unicode, sqlalchemy, pyramid

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:28:46.997

如果您的 Pyramid 模板或该页面的响应没有正确的字符编码集，则可能导致文本出现乱码。我可能是错的，但从提供的信息来看，这听起来与 HTML 文档有关，而不是 Pyramid 或 SQLAlchemy。如果 Python 在解码日语等文本时遇到问题，它可能会引发 UnicodeDecodeError，而不是尝试输出乱码的文本。

如果您在 Pyramid 中使用模板，例如 Chameleon，它的元标记中可能设置了错误的编码。如果是这样，请尝试在模板中切换到类似于以下内容的“utf-8”：

```
<meta charset="utf-8"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:35:32.887

# php - Trouble with PHP $connection command and MySQL

> ID：14209020
> 
> 赞同：1
> 
> 时间：2013-01-08T05:56:07.513
> 
> 标签：php, mysql, connection

Probably just because I'm not experienced with this sort of thing, but I downloaded MySQL with Apache running, and I'm working with the following code in a PHP file:

```
public static $connection = NULL;

private static $host = MYSQL_HOST;
private static $username = MYSQL_USER;
private static $passwd = MYSQL_PASS;
private static $db = MYSQL_DBNAME;

public static function init() {
  if(!self::$connection) {
    self::$connection = new mysqli(self::$host, self::$username, self::$passwd, self::$db);
} 
```

}

It comes up with this when I open it in Firefox:

```
trying to connect via unix:///var/mysql/mysql.sock (says this doesn't exist—which, it doesn't) 
```

I replaced MYSQL_HOST with 'localhost', MYSQL_USER with both 'mysql' and 'root' (stupid, yes), MYSQL_PASS with both my system password and NULL, and MYSQL_DBNAME with a few more things (I am having trouble finding out what my database name is called, even with MySQLWorkbench...I started learning this entire field of computing two days ago). It does say that a MySQL server is running on my machine, just not sure how to put the legos together here. Most of the settings are default (port 3306 and such). A test database migration over MySQLWorkBench failed (something to do with not reading the number of rows correctly), but otherwise it was fine and dandy, from what I saw.

Any help would be very welcome!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:33:09.723

当您指定`localhost`为主机名时，您的计算机将尝试使用`/var/mysql/mysql.sock`. 由于该文件不存在，因此这不起作用。但是，当您指定`127.0.0.1`为主机名时，MySQL 连接是通过 TCP/IP 建立的。

另请参阅[此问题](https://stackoverflow.com/questions/3715925/localhost-vs-127-0-0-1)。

所以答案是要么找到 where `MYSQL_HOST`is defined 并将其更改为`127.0.0.1`，要么忘记`MYSQL_HOST`并直接输入`127.0.0.1`。如果您想将站点移动到其他位置（服务器），后者更难维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T06:10:20.830

尝试重新启动 SQL 服务器。这可能会重新创建丢失的 .sock 文件。有关重新启动的信息，请参见此处：http: [//theos.in/desktop-linux/tip-that-matters/how-do-i-restart-mysql-server/](http://theos.in/desktop-linux/tip-that-matters/how-do-i-restart-mysql-server/)

# android - 如何在煎茶触摸中添加不同屏幕分辨率的图像？

> ID：14209030
> 
> 赞同：0
> 
> 时间：2013-01-08T05:56:48.533
> 
> 标签：android, ios, sencha-touch, sencha-touch-2

我们如何在 android 中添加图像，例如 sencha touch 中的小、中、大和 xlarge 图像以及用于正常显示和 Retina 显示的 IOS 设备？sencha touch 框架中是否有任何内置功能或辅助功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T06:03:58.637

您可以使用 Implementation of`Media Queries`来执行此操作。

查看下面的参考链接。

[处理所有设备屏幕的媒体查询](http://chrislee.kr/wp/2012/02/13/media-queries-to-handle-all-devices-screens/)

[HTML5 媒体查询](http://peterkellner.net/2012/02/02/html5-media-queries-tablet-verses-phone-anything-but-intuitive/)

**编辑 ：**

如果您需要单独定位 Retina 显示屏，您可以在媒体查询中使用此条件：

```
-webkit-min-device-pixel-ratio: 2 
```

谢谢。

# ruby - Ruby Nokogiri 将 KML 转换为 CSV

> ID：14209033
> 
> 赞同：4
> 
> 时间：2013-01-08T05:57:32.443
> 
> 标签：ruby, csv, nokogiri, kml

我正在尝试从 KML 文件中提取两个不同的元素并将它们转换为 CSV。我从这里的很棒的网站开始：[http](http://ckdake.com/content/2012/highgroove-hack-night-kml-heatmaps.html) ://ckdake.com/content/2012/highgroove-hack-night-kml-heatmaps.html ，它会生成一个坐标的csv。我现在要做的就是将名称标签添加到每行的开头。我是 ruby​​/nokogiri n00b，所以我可以粘贴这段代码，让我得到 a) 所有名称的列表，然后是 b) 所有坐标的列表。但同样 - 我希望他们在同一条线上。

```
require 'rubygems'
require 'nokogiri' # gem install nokogiri

@doc = Nokogiri::XML(File.open("WashingtonDC2013-01-04 12h09m01s.kml"))

@doc.css('name').each do |name|  
  puts name.content
end

@doc.css('coordinates').each do |coordinates|
  coordinates.text.split(' ').each do |coordinate|
    (lat,lon,elevation) = coordinate.split(',')
    puts "#{lat},#{lon}\n"
  end
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T06:30:45.013

这个怎么样：

```
@doc.css('Placemark').each do |placemark|
  name = placemark.css('name')
  coordinates = placemark.at_css('coordinates')

  if name && coordinates
    print name.text + ","
    coordinates.text.split(' ').each do |coordinate|
      (lon,lat,elevation) = coordinate.split(',')
      print "#{lat},#{lon}"
    end
    puts "\n"
  end
end 
```

我在这里假设`<coordinates>`每个`<Placemark>`. 如果还有更多，它们都会被附加到同一行。

If that doesn't work, you'll need to post some of the KML file itself so I can test on it. I'm just guessing based on [this sample KML file](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CD0QFjAB&url=https%3A%2F%2Fdevelopers.google.com%2Fkml%2Fdocumentation%2FKML_Samples.kml&ei=xbrrUKC5PIzdkgWcx4CQAw&usg=AFQjCNFXvmR0VXT1YNLH1irpbZAkJE1TYg&bvm=bv.1357316858,d.dGI&cad=rja).

# sql - 如何在 SQL Server 2005 的列中存储超过 8000 个字符？

> ID：14209034
> 
> 赞同：7
> 
> 时间：2013-01-08T05:57:32.207
> 
> 标签：sql, sql-server, sql-server-2005

我有一个名为 ABC 的表。在此表中，我有一列定义为`XYZ`

```
varchar(8000). 
```

在本专栏中，我存储了 SOAP 错误请求。

我的问题是现在我得到的 SOAP 错误请求的长度超过

```
8000 (to be accurate it is now 16000). 
```

我读过最大长度`varchar`为 8000，所以我的问题是如何将 XYZ 列的长度增加到 16000？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-08T06:01:24.197

如果你真的需要超过 8000 个字符，你需要使用`VARCHAR(MAX)`最多可以存储 2 GB 的文本：

```
XYZ varchar(max) 
```

这为您提供了多达 20 亿个字符——这是列夫·托尔斯泰的《*战争与和平》*的大约 200 倍——对于大多数情况来说应该足够了！

注意：如果您收到一个 SOAP 请求，那很可能是格式正确的 XML - 对吧？在这种情况下，您还可以使用`XML`SQL Server **2005**和更高版本的数据类型。它还可以存储多达 2 GB 的数据，但它比普通数据更有效地存储数据`varchar(max)`- 您可以对其运行 XPath/XQuery 以从中获取位。

所以我建议你使用：

```
XYZ XML 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T06:01:43.750

采用`varchar(max)`

`varchar(n)`是可变长度的非 Unicode 字符串数据。`n`定义字符串长度，可以是 1 到 8,000 之间的值。max 表示最大存储大小为 2^31-1 字节（2 GB）。

存储大小是输入数据的实际长度 + 2 个字节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T06:01:43.977

尝试从使用处理长文本的数据类型开始。我想到了“文字”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T06:03:07.650

使用文本数据类型，供参考[http://msdn.microsoft.com/en-us/library/ms189574(v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms189574(v=sql.90).aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-04T06:32:53.133

```
--Check this example...
create table t1( i varchar(max))
create table t2( i varchar(8000))

DECLARE @String1 VARCHAR(MAX)
set @String1 = 'Hello'
declare @i int
set @i = 1
while ( @i < 50000)
begin
    set @String1 = @String1 + 'world'
    set @i = @i +1 
end
    select len(@String1)
insert into t1 select @String1 -- will succeed
insert into t2 select @String1 -- will fail 

SELECT LEN(i) from t1
SELECT LEN(i) from t2 
```

# asp.net - CS0117：“System.Data.OleDb.OleDbType”不包含“图像”的定义

> ID：14209036
> 
> 赞同：0
> 
> 时间：2013-01-08T05:57:39.993
> 
> 标签：asp.net, upload, definition

帮助！

我正在做一个页面，它将上传并在gridview中显示图像。当我加载页面时。

出现此错误：CS0117：“System.Data.OleDb.OleDbType”不包含“图像”的定义

```
 Compiler Error Message: CS0117: 'System.Data.OleDb.OleDbType' does not contain a definition for 'Image'

Source Error:

Line 26:  
Line 27:  OleDbParameter UploadedImage = new OleDbParameter
Line 28:               ("@Image", OleDbType.Image, imageSize.Length);
Line 29: 
Line 30:  UploadedImage.Value = imageSize;

Source File: c:\inetpub\wwwroot\logon\try.aspx    Line: 28 
```

这是我的完整代码：

```
<%@ Page Language="C#" Debug="true" %>
<%@ Import Namespace="System" %>
<%@ Import Namespace="System.Data" %>
<%@ Import Namespace = "System.Data.SqlClient" %>
<%@ Import Namespace= "System.Data.OleDb" %>

<script runat="server" type="text/c#">
protected void btnUpload_Click(object sender, EventArgs e)
{
    {
   byte[] imageSize = new byte
                 [FileUpload1.PostedFile.ContentLength];
  HttpPostedFile uploadedImage = FileUpload1.PostedFile;
  uploadedImage.InputStream.Read
     (imageSize, 0, (int)FileUpload1.PostedFile.ContentLength);
 // Create SQL Connection 
  OleDbConnection con = new OleDbConnection();
  con.ConnectionString = ConfigurationManager.ConnectionStrings["recordsConnectionString"].ConnectionString;
 // Create SQL Command 
 OleDbCommand cmd = new OleDbCommand();
 cmd.CommandText = "INSERT INTO PendingRecords(Image)" +
                   " VALUES (@Image)";
 cmd.CommandType = CommandType.Text;
 cmd.Connection = con;

 OleDbParameter UploadedImage = new OleDbParameter
              ("@Image", OleDbType.Image, imageSize.Length);

 UploadedImage.Value = imageSize;
 cmd.Parameters.Add(UploadedImage);
 con.Open();
 int result = cmd.ExecuteNonQuery();
 con.Close();
 if (result > 0)
 lblMessage.Text = "File Uploaded";
 GridView1.DataSource = SqlDataSource1;
 GridView1.DataBind();
 }
}
</script>

<form id="form1" runat="server">
<div>
<asp:FileUpload ID="FileUpload1" runat="server"/>
<asp:Label ID="lblMessage" runat="server">
</asp:Label>
<asp:Button ID="btnUpload" runat="server" 
            OnClick="btnUpload_Click" Text="Upload"/>
</div>
<asp:GridView runat="server" id="GridView1" AutoGenerateColumns="False" DataSourceID="SqlDataSource1" DataKeyNames="ID">
    <Columns>
        <asp:boundfield DataField="ID" HeaderText="ID" ReadOnly="True" InsertVisible="False" SortExpression="ID">
        </asp:boundfield>
        <asp:boundfield DataField="Image" HeaderText="Image" SortExpression="Image">
        </asp:boundfield>
    </Columns>
</asp:GridView>
<asp:SqlDataSource runat="server" id="SqlDataSource1" ProviderName="<%$ ConnectionStrings:recordsConnectionString.ProviderName %>" ConnectionString="<%$ ConnectionStrings:recordsConnectionString %>" SelectCommand="SELECT * FROM [PendingRecords]">
</asp:SqlDataSource>
</form> 
```

请帮忙！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T07:26:58.227

线程关闭:) 我刚刚解决了它。我将 OleDbType.Image 更改为 OleDbType.LongVarBinary。谢谢各位！

# c# - Keypress 事件转到 DataGridview 而不是单元格

> ID：14209037
> 
> 赞同：1
> 
> 时间：2013-01-08T05:57:48.203
> 
> 标签：c#, winforms, datagridview

我处理了一个带有删除事件的`DataGridView`内部，从该事件中删除了选定的行*（以及与该行关联的对象**）**。*`winform``toolstrip menu`*`row``DataGridView`*

现在，当我尝试编辑 any 的值`cell` *（以重命名对象）*，并且在编辑模式下，如果我选择一些字符并按下`delete`，它会删除该行而不是删除那些选定的字符。

我应该怎么做才能让单元处理事件而不是`Winform`.

下面的片段：

```
this.deleteToolStripMenuItem.ShortcutKeys = System.Windows.Forms.Keys.Delete;

this.deleteToolStripMenuItem.Click += new System.EventHandler(this.OnDelete);

private void OnDelete(object sender, EventArgs e)
{
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:07:48.663

尝试检查你的属性`DataGridView` `SelectionMode`，一定不要`FullRowSelect`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:54:23.430

找到了解决方案:)当我进入编辑模式时，我删除了删除键关联

this.deleteToolStripMenuItem.ShortcutKeys = System.Windows.Forms.Keys.None;

一旦我完成了 OnAfterEdit 中的单元格的编辑，我将其设置回

this.deleteToolStripMenuItem.ShortcutKeys = System.Windows.Forms.Keys.Delete;

希望它可以帮助某人。

# java - 如果我对输出的解释是正确的

> ID：14209042
> 
> 赞同：1
> 
> 时间：2013-01-08T05:58:02.147
> 
> 标签：java, output

代码：

```
class TestA {
    public void foo(String... strings ) {
        System.out.println("TestA::foo");
    }

    public void bar(String a){
        System.out.println("TestA::bar");
    }
}

class TestB extends TestA {
    public void foo(String strings ) {
        System.out.println("TestB::foo");
    }

    public void bar(String a){
        System.out.println("TestB::bar");
    }

    public static void main(String[] args) {
        TestA a = new TestB();
        a.foo("foo");
        a.bar("bar");
    }
} 
```

输出是

```
TestA::foo
TestB::bar 
```

所以`B::bar`被覆盖并被`B::foo`重载，当一个函数被重载时，引用的数据类型与它指向的对象的类型无关。我对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T06:03:50.133

> 当函数重载时，引用的数据类型与其指向的对象类型无关。我对吗？

是的。

重载是编译时绑定，当时只知道引用的类型。虽然覆盖是运行时绑定并根据对象类型执行调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T06:09:38.437

我不确定您的分析到底是什么，但这是我所看到的：

*   `TestA.bar(String)`被覆盖`TestB.bar(String)`
*   `TestA.foo(String...)`被继承，`TestB`然后被重载`TestB``TestB.foo(String)`

但是，因为编译器不知道`a.foo("foo")`正在为`TestB`对象调用它，所以它不知道重载。因此，它将其编译为对带有签名的方法的调用`foo(String...)`。如果它知道这`a`是 a `TestB`，它将绑定到，`foo(String)`因为这是一个更接近的匹配项（不需要转换为数组参数）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T06:11:01.800

TestB 类继承 TestA 并且它具有重写 bar 方法和重载 foo 方法，在编译 TestA 时 a 具有 TestB 的引用，因此重载方法不会被执行，但在重写 bar 方法的情况下调用被重写方法在运行时完成。因为重载的方法是在编译时加载的，而重载的方法是在运行时加载的。

# java - 使用日期作为键的树形图 Java

> ID：14209043
> 
> 赞同：3
> 
> 时间：2013-01-08T05:58:22.443
> 
> 标签：java, date, treemap

能够搜索`TreeMap<Date, String>`诸如的键的正确方法是`NavigableMap<Date, String>`什么？我希望按特定月份检查并输出该月份的所有内容？

例如，如果它如下所示，我将如何搜索所有具有键 February 的人？

```
Date date1 = dateformat.parse("8 January 2013"); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T06:13:16.990

如果使用`NavigableMap`实现，您可以调用[`subMap`](http://docs.oracle.com/javase/7/docs/api/java/util/NavigableMap.html#subMap%28K,%20boolean,%20K,%20boolean%29)以获取两个键之间的映射视图：

```
DateFormat dateFormat = new SimpleDateFormat("dd MMM yyyy");

//using TreeMap for example
NavigableMap<Date, String> stringsByDate = new TreeMap<Date, String>();

//populate map
Date jan15th = dateFormat.parse("15 January 2013");
Date feb12th = dateFormat.parse("12 February 2013");
Date feb24th = dateFormat.parse("24 February 2013");
Date march18th = dateFormat.parse("18 March 2013");
stringsByDate.put(jan15th, "foo");
stringsByDate.put(feb12th, "bar");
stringsByDate.put(feb24th, "baz");
stringsByDate.put(march18th, "qux");

//define "from" and "to" keys
Date feb1st = dateFormat.parse("1 February 2013");
Date march1st = dateFormat.parse("1 March 2013");

//get the specified view
NavigableMap<Date, String> febStringsByDate = stringsByDate.subMap(
        feb1st,
        true,     //include Feb 1st
        march1st,
        false     //don't include March 1st
);

//prints {Tue Feb 12 00:00:00 EST 2013=bar, Sun Feb 24 00:00:00 EST 2013=baz}
System.out.println(febStringsByDate); 
```

如图所示，调用中使用的“from”和“to”键`subMap`本身不需要包含在映射中。

**注意：**这仅适用于*特定*2 月的日期，例如 2013 年 2 月。如果您需要*所有*2 月日期的条目，则需要按年份迭代并合并结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T06:27:32.230

*   首先，Date 是可变的，不推荐在 Map 中使用可变对象作为键。

*   但要回答您的问题：您需要遍历地图中的键并根据给定标准检查每个键。您可以将 Date 包装到`Calendar`类中，以使日、月、年和...比较更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T13:11:05.923

刚刚遇到同样的问题，花了一些时间弄清楚为什么它不起作用。

它只是比较各个 Date 对象的哈希值，即使日期相等，这些对象也是不同的。

我正在尝试使用以下数据结构

`SortedMap<Date,List<String>>`

但它不允许向该列表添加多个成员，因为 map.get(date) 总是返回 null，即使那里已经有相同的日期。

# dynamics-crm-2011 - Microsoft Dynamics CRM 始终 Mobile Express

> ID：14209045
> 
> 赞同：2
> 
> 时间：2013-01-08T05:58:28.590
> 
> 标签：dynamics-crm-2011, dynamics-crm, dynamics-crm-4, microsoft-dynamics

当我从我的桌面网络浏览器或其他任何地方登录到我的 Dynamics CRM 时，它会将我重定向到移动快速视图。我怎样才能禁用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T08:32:16.923

这可能是因为您没有使用 Internet Explorer。

CRM 4 - 仅限 IE。

CRM 2011 - 目前只有 IE - 但很快它将是多浏览器。

[Microsoft CRM 2011 和跨浏览器支持](https://stackoverflow.com/questions/5803844/microsoft-crm-2011-and-cross-browser-support)

# sql - 需要在 SQL 中将两列的数据合并为一列？

> ID：14209046
> 
> 赞同：2
> 
> 时间：2013-01-08T05:58:31.200
> 
> 标签：sql, oracle

我在这里提供一个例子，让你们都明白我真正需要什么：我有一张这样的表：

```
 Name                                      Null?    Type
 ----------------------------------------- -------- --------------
 Child_ID                                               NUMBER(10)
 Father_ID                                              NUMBER(10) 
```

值为：

```
 Child_ID       Father_ID
----------         ----------
         2          1
         4          1
         3          2
         5          3 
```

现在我想要父亲 id 1 的分层信息。为此，我编写了一个查询，它为我提供了确切的输出：

```
**select * from child
start with father_id=1
connect by prior child_id = father_id;** 
```

输出/输出：

```
 Child_ID       Father_ID
----------           ----------
         2            1
         3            2
         5            3
         4            1 
```

现在我希望 o/p 应该是这样的：

```
ID
-----
1
2
3
4
5 
```

我可以通过使用联合密钥轻松获得它，但我不想使用它。有没有其他方法可以得到这个？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T12:37:15.393

这有点乱，但你可以这样做：

```
select distinct case when l=1 then child_id else father_id end id
from
    (select child_id, father_id
     from child
     start with father_id=1 connect by prior child_id=father_id) child
     cross join (select level l from dual connect by level < 3)
order by id
; 
```

# sql - 选择作为另一个表列值的列

> ID：14209049
> 
> 赞同：-1
> 
> 时间：2013-01-08T05:58:45.940
> 
> 标签：sql, sql-server-2008-r2

选择作为另一个表列值的列。这个查询有什么问题

```
select 
    geoName 
from 
    hgeo h 
where 
    geoName not in (select (select column_name 
                            from information_schema.columns 
                            where ((column_name = h.levelName) and (table_Name = 'flatgeo'))) 
                    from flatgeo) 
```

我觉得有问题

```
(select 
     (select column_name 
      from information_schema.columns 
      where ((column_name = h.levelName) and (table_Name = 'flatgeo'))) 
```

怎么写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:01:17.410

您不能使用元信息来更改查询的形状。除非你想走动态 sql 路线（这会很快变得复杂），否则我会选择以下方法：

```
SELECT
    geoName
FROM hgeo h
WHERE
    NOT EXISTS (SELECT * FROM flatgeo f
      WHERE
      (h.levelName = 'value1' and f.value1 = h.geoName) OR
      (h.levelName = 'value2' and f.value2 = h.geoName)
      //Repeat for each possible levelName value.
    ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T09:12:19.290

你可以试试这个

```
select GeoName from HGeo where HGeo.GeoName not in 
(select FlatGeo.value1 from FlatGeo union
select FlatGeo.value2 from FlatGeo union
select FlatGeo.value3 from FlatGeo) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T08:52:25.493

你应该`tablename`在你的专栏之前使用`geoname`。喜欢`hgeo.geoname`。你想找出那些不在的`geoname`吗？`hgeo``flatgeo`

# php - 如何使用php删除json响应中的反斜杠（“\”）？

> ID：14209052
> 
> 赞同：7
> 
> 时间：2013-01-08T05:59:02.257
> 
> 标签：php, mysql, json

我尝试将一行 mysql 查询添加到 JSON whit php 中。我使用这段代码：

```
public function lugaresCercanos($lng, $lat, $distance){
$result=mysql_query("SELECT nombre, distancia FROM Lugar ORDER BY distancia ASC");
$info=array();
    while($row = mysql_fetch_array($result,MYSQL_ASSOC)){
        array_push($info,$row);
    }
    return json_encode($info); 
```

这会返回一个 JSONObject，但我不确定。

```
 class resultado_final {
public $logstatus = "";
public $lugares_cercanos = "";}

$result_final = new resultado_final();
if($db->login($usuario,$passw)){
$result_final->logstatus = "0";}else{
$result_final->logstatus = "1";}
$result_final->lugares_cercanos = $lista;
echo json_encode($result_final); 
```

此代码打印：

```
{"logstatus":"1","lugares_cercanos":"[{\"nombre\":\"Rio Amazonas\",\"distancia\":\"5119.000\"},{\"nombre\":\"Swissotel \",\"distancia\":\"5823.000\"},{\"nombre\":\"Laguna de Yaguarcocha\",\"distancia\":\"71797.000\"}]"} 
```

为什么查询的行用反斜杠分隔？如何删除反斜杠？非常感谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-08T06:00:52.890

\ 用于转义作为响应一部分的引号 (")。

用来`stripslashes()`剥离这些。

当用引号括起来的字符串包含引号时，它们必须被转义。php 中的转义字符是`\`.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-08T06:02:22.143

尝试

```
json_encode($arr, JSON_UNESCAPED_SLASHES); 
```

或者

```
echo str_replace('\/','/',json_encode($mydatas)); 
```

（如果 unescape 不起作用） [http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-08T06:01:29.227

停止对数据进行双重编码。将所有内容放在一个大型结构中，然后*仅*对其进行编码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-16T04:15:03.490

如果有人想删除反斜杠并漂亮地打印 JSON 数据，可以使用以下命令：

```
json_encode($my_array, JSON_UNESCAPED_UNICODE | JSON_PRETTY_PRINT); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T19:13:10.130

谢谢，我解决了。

```
$info=array();
    while($row = mysql_fetch_array($result,MYSQL_ASSOC)){
        array_push($info,$row);
    }
    $info;
$result_final->lugares_cercanos = $info; 
```

打印这个：

```
{"logstatus":"1","lugares_cercanos":[{"nombre":"Rio Amazonas","distancia":"5119.000"}{"nombre":"Swissotel Quito","distancia":"5823.000"}{"nombre":"Laguna de Yaguarcocha","distancia":"71797.000"}]} 
```

# xml - 从配置标签中包含命名空间的 web.config 文件中读取和删除节点

> ID：14209055
> 
> 赞同：1
> 
> 时间：2013-01-08T05:59:22.860
> 
> 标签：xml, web-config

```
 <?xml version="1.0"?>
     <configuration  xmlns="http://schemas.microsoft.com/.NetConfiguration/v2.0">
         <configSections> 
```

我有一个 web.config 文件，其中包含配置标记中的 xmlns。

我想删除一个特定的节点。但我无法读取此文件。

下面是代码：

```
XmlDocument xmlDoc = new XmlDocument();
        xmlDoc.Load(PATH + WEB_CONFIG_PATH);
        //XmlNode t = xmlDoc.SelectSingleNode("/system.webServer/handlers  /add[@path='Reserved.ReportViewerWebControl.axd']");
        XmlNode t = xmlDoc.SelectSingleNode("/configuration/system.webServer");
        if (t != null)
        {
            t.ParentNode.RemoveChild(t);
            xmlDoc.Save(PATH + WEB_CONFIG_PATH);
        } 
```

如果我从配置标记中删除 xmlns，则此代码可以正常工作。

请提供一些解决方案，以便在存在 xmlns 时此代码可以工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T06:22:40.377

您需要通过在代码中添加 a 并在调用中`XmlNamespaceManager`使用它来添加对 XML 命名空间的支持。`SelectSingleNode`此外，您需要调整调用的 XPath 以包含 XML 命名空间前缀：

```
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.Load(PATH + WEB_CONFIG_PATH);

// add a XmlNamespaceManager to deal with the XML namespaces in your XML document        
XmlNamespaceManager xmlNsMgr = new XmlNamespaceManager(xmlDoc.NameTable);

// add an explicit XML namespace with prefix. NOTE: for some reason, the approach of using
// an empty string indicating a *default* XML namespace doesn't work with .NET's XmlDocument
xmlNsMgr.AddNamespace("ns", "http://schemas.microsoft.com/.NetConfiguration/v2.0");

// tweak your call - use the XML namespace prefix in your XPath, provide the namespace manager
XmlNode t = xmlDoc.SelectSingleNode("/ns:configuration/ns:system.webServer", xmlNsMgr);

if (t != null)
{
    ...... 
```

# javascript - Javascript添加两次并检查条件

> ID：14209059
> 
> 赞同：0
> 
> 时间：2013-01-08T05:59:32.507
> 
> 标签：javascript, time

我无法在 java-script 中添加两次。我使用了这样的代码

```
var dbEndtime1 = new Date(dbEndtime);
var hours  = dbEndtime1.getHours();
alert(dbEndtime1 + " hours" + hours); 
```

它不给时间

`dbEndtime="10:40:00"`我想为此增加几个小时，并且我需要用`1:00:00.`Like检查再次出现的值`total-time=10:40:00+5hours`，`total-time>1:00:00`并且`total-time<24:00:00`

我想实现这个逻辑。但我没有在 java-script 中完成它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T06:13:13.663

这是我的解决方案

```
var now = new Date("2013/1/1 02:14");
now.setHours(now.getHours()+5);

alert(now.getHours())

if(now.getHours()==1 && now.getMinutes()==0 && now.getSeconds()==0){
  //It 's 1:00:00
} 
```

[http://jsfiddle.net/sechou/2SLPm/](http://jsfiddle.net/sechou/2SLPm/)

# sql - 如何使用 sql 在 csv 文件中添加新的换行符？

> ID：14209061
> 
> 赞同：0
> 
> 时间：2013-01-08T05:59:43.843
> 
> 标签：sql, postgresql, csv

我目前正在使用 Postgresql 中的复制命令将 sql 查询的结果输出到带有标题的 CSV 文件。我想要做的是在标题和 CSV 数据的开头之间添加一个换行符，以便它更具可读性。

是否有一种简单的方法可以通过更改我的查询来做到这一点？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T06:01:58.413

不，没有。在后处理输出的脚本中执行此操作。PostgreSQL`COPY`不应该产生打印精美的可读输出，它可以产生*可靠*、一致的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T18:10:36.553

实际上，这是可能的，尽管它有点小技巧：

使用查询中的 AS 子句重命名输出的最后一列，以在列末尾添加换行符。您必须确保将列名双引号以保留非标准字符，并且您不能在 COPY 的 FORCE QUOTE 子句中使用该列。

我能够按照您对这个查询的要求让它工作：

```
copy (select typname, typlen, typinput, typoutput as "typoutput^L" from pg_type limit 10) to stdout with csv header; 
```

我系统上的前三行输出如下所示：

```
typname,typlen,typinput,typoutput

bool,1,boolin,boolout 
```

请注意，此输出中的“^L”实际上是我在 PostgreSQL 9.2 psql 客户端的 Linux 控制台中使用的组合键。尝试使用字符串“^L”不起作用。此外，这也不起作用，尽管它让你更接近（注意换行符）：

```
copy (select typname, typlen, typinput, typoutput as "typoutput
" from pg_type limit 10) to stdout with csv header; 
```

前两行如下所示：

```
typname,typlen,typinput,"typoutput
" 
```

这不太正确。

您只需要在您的特定环境中修改如何添加换行符，但希望这里有足够的信息可以开始。

# python - 查找元组中第二个元素的最大值 - Python

> ID：14209062
> 
> 赞同：4
> 
> 时间：2013-01-08T05:59:46.860
> 
> 标签：python, find, tuples, max

给定一个元组列表，我可以通过以下方式找到元组列表中第一个元素的最大值：

```
>>> a,b,c,d = (4,"foo"),(9,"bar"),(241,"foobar"), (1,"barfoo")
>>> print max([a,b,c,d])
(241,"foobar") 
```

但是如何找到第二个元素的最大值呢？字符串的最大值如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T06:01:25.463

使用`key`参数：

```
import operator

max([a, b, c, d], key=operator.itemgetter(1)) 
```

字符串的`max()`是基于字符串的字节值；`'a'`高于`'A'`因为`ord('a')`高于`ord('A')`。

对于您的示例输入，`(241,"foobar")`仍然是最大值，因为`'f'`> `'b'`and`'foobar'`比`'foo'`, 和`'b'`>更长（更多值） `''`（在较长字符串中`b`的字母之后的字符）。`foo`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-08T15:30:46.237

更短的是使用 lambda 作为可调用对象

```
max([a, b, c, d], key=lambda t: t[1]) 
```

# java - 是否将 NULL 分配给字段

> ID：14209063
> 
> 赞同：1
> 
> 时间：2013-01-08T05:59:49.757
> 
> 标签：java, spring

这些线有什么区别吗？

```
1\.    @Autowired
      private MyClass obj;

2\.    @Autowired
      private  MyClass obj = null;

3\.    @Autowired
      private  MyClass obj = new MyClass(); 
```

显然，第三个是不好的做法。

请解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T06:02:13.957

没有区别：无论您分配给它什么，实例都是由容器注入的。

选项 1 是最好和最常用的样式。

# python - Python排序字 符串数组与子串

> ID：14209064
> 
> 赞同：1
> 
> 时间：2013-01-08T05:59:55.640
> 
> 标签：python, arrays, sorting

我有一个数组，其中包含“ps aux”命令的输出。我的目标是使用命令名称列对数组进行排序，但我不知道该怎么做，也找不到答案。

到目前为止，这是我的代码

```
#!/usr/bin/python
import subprocess

ps = subprocess.Popen(['ps', 'aux'], stdout=subprocess.PIPE).communicate()[0]
processes = ps.split('\n')

nfields = len(processes[0].split()) - 1
for row in processes[1:]:
#    print row.split(None, nfields) //This is used to split all the value in the string
     print row 
```

此代码片段的输出类似于

```
...
root        11  0.0  0.0      0     0 ?        S<    2012   0:00 [kworker/1:0H]
root        12  0.0  0.0      0     0 ?        S     2012   0:00 [ksoftirqd/1]
root        13  0.0  0.0      0     0 ?        S     2012   0:00 [migration/2]

... 
```

所以我的目标会有类似的输出，但在最后一列排序，所以最后它看起来像这样

```
...
root        13  0.0  0.0      0     0 ?        S     2012   0:00 [migration/2]
root        12  0.0  0.0      0     0 ?        S     2012   0:00 [ksoftirqd/1]
root        11  0.0  0.0      0     0 ?        S<    2012   0:00 [kworker/1:0H]
... 
```

你们中的任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T06:31:59.383

像这样的东西：

```
#!/usr/bin/env python
import subprocess
from operator import itemgetter

ps = subprocess.Popen(['ps', 'aux'], stdout=subprocess.PIPE).communicate()[0]
processes = [p for p in ps.split('\n') if p]
split_processes = [p.split() for p in processes] 
```

然后像这样打印出你的结果：

```
for row in sorted(split_processes[1:], key=itemgetter(10)):
    print " ".join(row) 
```

或像这样（如果您只想要进程名称和参数）：

```
for row in sorted(split_processes[1:], key=itemgetter(10)):
    print " ".join(row[10:]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T06:03:12.047

```
sorted(..., key=lambda x: x.split()[10]) 
```

# c# - Window 8 应用程序中的应用程序数据和应用程序设置

> ID：14209065
> 
> 赞同：1
> 
> 时间：2013-01-08T06:00:03.530
> 
> 标签：c#, .net, xaml

在 Windows 窗体和 WPF 桌面应用程序中，您可以使用`Properties.Settings.Default.MyAwesomeDictionarySetting = thisDictionaryObject;`将类型设置保存`Dictionary`到应用程序设置。但大多数这种设置的强大功能似乎甚至不存在于 Windows 8 Metro 应用程序中。

目前，当我将字符串保存到设置时，我会：

```
localSettings.Values["someSetting"] = "dude"; 
```

但是，这还不够好。我也需要保存对象。我需要在`Dictionary`某处保存一些设置。

请注意，这不是设置魅力，这更像是应用程序的内部设置。

我们如何保存`Dictionary<Object, String>`到设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T11:50:22.447

没错，LocalSettings/RoamingSettings 只支持[这些数据类型](http://msdn.microsoft.com/en-us/library/windows/apps/br205768.aspx)。我怀疑，一个原因是 WPF/etc 中使用的非平凡类型的序列化非常冗长（如果我错了，请纠正我）。这会对保存到持久存储和从持久存储读取的隐式速度产生负面影响。事实上，需要注意的一点是，从 LocalSettings 和 RoamingSettings 读取/写入*不是* `async`调用，这意味着这些操作意味着超级快速。

您的问题的一个相对简单的解决方案是为您的设置数据类实现二进制序列化，并将二进制数据转换为 base64 字符串。由于`System.Convert.ToBase64String(byte[])`和 ，这特别方便`System.Convert.FromBase64String(string)`。例如，你可以有类似的东西：

```
private string ConvertToBase64String<T>(T obj) where T : class, IBinarySerializable
{
     if (obj == null)
         return string.Empty;

     using (var stream = new System.IO.MemoryStream())
     using (var writer = new System.IO.BinaryWriter(stream))
     {
         obj.Write(writer);
         var bytes = stream.ToArray();
         return System.Convert.ToBase64String(bytes);
    }
} 
```

和：

```
private T ConvertFromBase64String<T>(string string64) where T : IBinarySerializable, new()
{
    if (string.IsNullOrEmpty(string64))
        return default(T);

    var bytes = System.Convert.FromBase64String(string64);
    using (var stream = new System.IO.MemoryStream(bytes))
    using (var reader = new System.IO.BinaryReader(stream))
    {
        var obj = new T();
        obj.Read(reader);
        return obj;
    }
} 
```

使用二进制序列化的优点是速度快，比基于反射的序列化快得多（根据我的经验，大约快一个数量级）。

# json - 解析 JSON 时出现 NullReferenceException

> ID：14209068
> 
> 赞同：0
> 
> 时间：2013-01-08T06:00:19.057
> 
> 标签：json, windows-phone-7, parsing, windows-phone, windows-phone-8

当有人单击按钮时，我正在尝试解析 JSON 文件，该按钮将按钮的内容替换为来自 JSON 的数据。

目前我面临一个数据保持为空的问题。代码如下：

```
private void Button1_Tap(object sender, System.Windows.Input.GestureEventArgs e)
    {
        Button1.FontSize = 15;
        Button1.Content = "Fetching...";
        var client = new WebClient();
        client.OpenReadCompleted +=
            (s, eargs) =>
            {
                var serializer = new DataContractJsonSerializer(typeof(RadioRootObject));
                if (eargs.Error != null)
                {
                    if (eargs.Error.Message.Contains("NotFound"))
                    {
                        MessageBox.Show("Could not retrieve playlist", "Error", MessageBoxButton.OK);
                        Button1.Content = "Could not retrieve playlist";
                    }
                    else
                    {
                        MessageBox.Show("Could not retrieve playlist", "Error", MessageBoxButton.OK);
                        Button1.Content = "Could not retrieve playlist";
                    }
                }
                else
                {
                    var root = (RadioRootObject)serializer.ReadObject(eargs.Result);
                    var songHistory = root.station3;
                    Button1.Content = songHistory.text;
                }
            };
        var uri = new Uri("http://www.reignofcomputer.com/tmpsend/nowplaying.json");
        client.OpenReadAsync(uri);
    }

    public class station1
    {
        public string station { get; set; }
        public string title { get; set; }
        public string artist { get; set; }
        public string text { get; set; }
    }

    public class station2
    {
        public string station { get; set; }
        public int listeners { get; set; }
        public string title { get; set; }
        public string artist { get; set; }
        public string text { get; set; }
    }

    public class station3
    {
        public string station { get; set; }
        public int listeners { get; set; }
        public string title { get; set; }
        public string artist { get; set; }
        public string text { get; set; }
    }

    public class RadioRootObject
    {
        public station1 station1 { get; set; }
        public station2 station2 { get; set; }
        public station3 station3 { get; set; }
    } 
```

`root`并`songHistory`保持为空，因此引发 NullReferenceException。

`station1`and`station2`用在`Button2_Tap`and`Button3_Tap`中，上面代码中没有显示，与上面类似`Button1_Tap`。

我被告知 DataContractJsonSerializer 无法将 json 对象中的属性“1”与 RadioRootObject 类上的属性 station1 匹配，但我不确定如何让它匹配。

我无法更改 JSON 本身的数据。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T08:28:12.780

查看这篇博文，了解如何[在 Windows Phone 应用程序中解析 JSON](http://nkishorchandra.blogspot.in/2012/10/parsing-json-in-windows-phone.html)

因此，试试这个

```
private void Button_Click(object sender, RoutedEventArgs e)
    {
        Button1.FontSize = 15;
        Button1.Content = "Fetching...";var client = new WebClient();
        var uri = new Uri("http://www.reignofcomputer.com/tmpsend/nowplaying.json");
        client.DownloadStringCompleted += new DownloadStringCompletedEventHandler(client_DownloadStringCompleted);
        client.DownloadStringAsync(uri);
    }

void client_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        var jobj = JObject.Parse(e.Result);
        var station3 = jobj["3"];
        Button1.Content = station3["text"];
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T07:35:35.740

由于 JSON 中的属性为“1”，而 RadioRootObject 的成员名称为“station1”，因此它们不匹配。您可以使用 DataMemberAttribute 告诉序列化程序 JSON 中的名称是什么，例如

```
public class RadioRootObject
{
    [DataMember(Name="1")]
    public station1 station1 { get; set; }
    [DataMember(Name="2")]
    public station2 station2 { get; set; }
    [DataMember(Name="3")]
    public station3 station3 { get; set; }
} 
```

老实说，我认为无论如何你的类和成员都必须具有 [DataContract] 和 [DataMember] 属性（参见[DataContractJsonSerializer 的示例](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer%28v=VS.95%29.aspx)），但我可能是错的 :-)

# objective-c - ARC下归零弱引用的集合

> ID：14209070
> 
> 赞同：41
> 
> 时间：2013-01-08T06:00:31.040
> 
> 标签：objective-c, cocoa-touch, cocoa, automatic-ref-counting, weak-references

如何在 ARC 下获得一组**归零弱引用？**我不希望数组保留对象。而且我希望数组元素在被释放时自行删除，或者将这些条目设置为 nil。

同样，我怎样才能用字典做到这一点？我不希望字典保留这些值。同样，我希望字典元素在释放值时自行删除，或者将值设置为 nil。（我需要保留作为唯一标识符的键，至少在相应的值被释放之前。）

这两个问题涵盖了相似的基础：

*   [ARC下对象弱引用的NSArray](https://stackoverflow.com/questions/9336288/nsarray-of-weak-references-to-objects-under-arc)
*   [有未保留的 id 对象列表？](https://stackoverflow.com/questions/11928730/having-a-list-of-unretained-id-objects/11928840#11928840)

但两者都没有要求**归零参考**。

根据文档， NSPointerArray 和 NSHashMap 都不支持 ARC 下的弱引用。NSValue 的 nonretainedObjectValue 也不起作用，因为它是非归零的。

我看到的唯一解决方案是创建*我自己*的具有属性的类似 NSValue 的包装器类`(weak)`，正如[这个答案提到的，接近 end](https://stackoverflow.com/a/13351665/893113)。有没有更好的方法我没有看到？

我正在为 OS X 10.7 和 iOS 6.0 开发。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-08T06:38:10.090

清零弱引用需要 OS X 10.7 或 iOS 5。

您只能在代码、ivars 或块中定义弱变量。AFAIK 无法动态（在运行时）创建弱变量，因为 ARC 在编译时生效。当您运行代码时，它已经为您添加了保留和发布。

话虽如此，您可能可以滥用块来达到这样的效果。

有一个简单地返回引用的块。

```
__weak id weakref = strongref;
[weakrefArray addObject:[^{ return weakref; } copy]]; 
```

请注意，您需要复制块才能将其复制到堆中。

现在你可以随时遍历数组，块中的dealloc'ed对象将返回nil。然后，您可以删除这些。

当弱引用归零时，您不能自动执行代码。如果这是您想要的，那么您可以利用关联对象的功能。那些与它们关联的对象同时被释放。因此，您可以拥有自己的哨兵标签，通知弱集合有关对象消亡的信息。

您将有一个关联对象来监视 dealloc（如果关联是唯一的引用），并且关联对象将具有指向集合监视的指针。然后在哨兵dealloc中调用弱集合来通知它被监视的对象已经消失。

这是我关于关联对象的文章：http: [//www.cocoanetics.com/2012/06/associated-objects/](http://www.cocoanetics.com/2012/06/associated-objects/)

这是我的实现：

```
---- DTWeakCollection.h

@interface DTWeakCollection : NSObject

- (void)checkInObject:(id)object;

- (NSSet *)allObjects;

@end

---- DTWeakCollection.m

#import "DTWeakCollection.h"
#import "DTWeakCollectionSentry.h"
#import <objc/runtime.h>

static char DTWeakCollectionSentryKey;

@implementation DTWeakCollection
{
    NSMutableSet *_entries;
}

- (id)init
{
    self = [super init];
    if (self)
    {
        _entries = [NSMutableSet set];
    }
    return self;
}

- (void)checkInObject:(id)object
{
    NSUInteger hash = (NSUInteger)object;

    // make weak reference
    NSNumber *value = [NSNumber numberWithUnsignedInteger:hash];
    [_entries addObject:value];

    // make sentry
    DTWeakCollectionSentry *sentry = [[DTWeakCollectionSentry alloc] initWithWeakCollection:self forObjectWithHash:hash];
    objc_setAssociatedObject(object, &DTWeakCollectionSentryKey, sentry, OBJC_ASSOCIATION_RETAIN);
}

- (void)checkOutObjectWithHash:(NSUInteger)hash
{
    NSNumber *value = [NSNumber numberWithUnsignedInteger:hash];
    [_entries removeObject:value];
}

- (NSSet *)allObjects
{
    NSMutableSet *tmpSet = [NSMutableSet set];

    for (NSNumber *oneHash in _entries)
    {
        // hash is actually a pointer to the object
        id object = (__bridge id)(void *)[oneHash unsignedIntegerValue];
        [tmpSet addObject:object];
    }

    return [tmpSet copy];
}

@end

---- DTWeakCollectionSentry.h

#import <Foundation/Foundation.h>
@class DTWeakCollection;

@interface DTWeakCollectionSentry : NSObject

- (id)initWithWeakCollection:(DTWeakCollection *)weakCollection forObjectWithHash:(NSUInteger)hash;

@end

--- DTWeakCollectionSentry.m

#import "DTWeakCollectionSentry.h"
#import "DTWeakCollection.h"

@interface DTWeakCollection (private)

- (void)checkOutObjectWithHash:(NSUInteger)hash;

@end

@implementation DTWeakCollectionSentry
{
    __weak DTWeakCollection *_weakCollection;
    NSUInteger _hash;
}

- (id)initWithWeakCollection:(DTWeakCollection *)weakCollection forObjectWithHash:(NSUInteger)hash
{
    self = [super init];

    if (self)
    {
        _weakCollection = weakCollection;
        _hash = hash;
    }

    return self;
}

- (void)dealloc
{
    [_weakCollection checkOutObjectWithHash:_hash];
}

@end 
```

这将像这样使用：

```
NSString *string = @"bla";

@autoreleasepool {
_weakCollection = [[DTWeakCollection alloc] init];
    [_weakCollection checkInObject:string];

__object = [NSNumber numberWithInteger:1123333];

[_weakCollection checkInObject:__object];
} 
```

如果您在自动释放池块内输出 allObjects，那么您将在其中有两个对象。外面你只有字符串。

我发现在entry的dealloc中对象引用已经是nil了，所以不能使用__weak。相反，我使用对象的内存地址作为哈希。虽然这些仍在 _entries 中，但您可以将它们视为实际对象，并且 allObjects 返回一个自动释放的强引用数组。

注意：这不是线程安全的。处理非主队列/线程上的 dealloc，您需要小心同步访问和变异内部 _entries 集。

注意 2：这目前仅适用于检入单个弱集合的对象，因为第二次检入会覆盖关联的哨兵。如果你需要多个弱集合，那么哨兵应该有一个这些集合的数组。

注意 3：我也将哨兵对集合的引用更改为弱，以避免保留循环。

注意 4：这里有一个 typedef 和 helper 函数，它们为您处理块语法：

```
typedef id (^WeakReference)(void);

WeakReference MakeWeakReference (id object) {
    __weak id weakref = object;
    return [^{ return weakref; } copy];
}

id WeakReferenceNonretainedObjectValue (WeakReference ref) {
    if (ref == nil)
        return nil;
    else
        return ref ();
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-08T16:28:42.640

这是归零弱引用包装类的代码。它适用于 NSArray、NSSet 和 NSDictionary。

此解决方案的优点是它与旧操作系统兼容，而且很简单。缺点是在迭代时，您可能需要`-nonretainedObjectValue`在使用它之前验证它是非零的。

这与 Cocoanetics 答案第一部分中的包装器的想法相同，它使用块来完成相同的事情。

**弱引用.h**

```
@interface WeakReference : NSObject {
    __weak id nonretainedObjectValue;
    __unsafe_unretained id originalObjectValue;
}

+ (WeakReference *) weakReferenceWithObject:(id) object;

- (id) nonretainedObjectValue;
- (void *) originalObjectValue;

@end 
```

**弱引用.m**

```
@implementation WeakReference

- (id) initWithObject:(id) object {
    if (self = [super init]) {
        nonretainedObjectValue = originalObjectValue = object;
    }
    return self;
}

+ (WeakReference *) weakReferenceWithObject:(id) object {
    return [[self alloc] initWithObject:object];
}

- (id) nonretainedObjectValue { return nonretainedObjectValue; }
- (void *) originalObjectValue { return (__bridge void *) originalObjectValue; }

// To work appropriately with NSSet
- (BOOL) isEqual:(WeakReference *) object {
    if (![object isKindOfClass:[WeakReference class]]) return NO;
    return object.originalObjectValue == self.originalObjectValue;
}

@end 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-03T19:29:07.547

`NSMapTable`应该为你工作。在 iOS 6 中可用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-08T09:03:09.027

```
@interface Car : NSObject
@end
@implementation Car
-(void) dealloc {
    NSLog(@"deallocing");
}
@end

int main(int argc, char *argv[])
{
    @autoreleasepool {
        Car *car = [Car new];

        NSUInteger capacity = 10;
        id __weak *_objs = (id __weak *)calloc(capacity,sizeof(*_objs));
        _objs[0] = car;
        car = nil;

        NSLog(@"%p",_objs[0]);
        return EXIT_SUCCESS;
    }
} 
```

Output:

```
2013-01-08 10:00:19.171 X[6515:c07] deallocing
2013-01-08 10:00:19.172 X[6515:c07] 0x0 
```

**edit**: I created a [sample weak map collection](https://github.com/j4n0/WeakMap) from scratch based on this idea. It works, but it's ugly for several reasons:

I used a [category on NSObject](https://github.com/j4n0/WeakMap/blob/master/WeakMap/sources/NSObject+AssociatedObject.h) to add @properties for the key,next map bucket, and a reference to the collection owning the object.

Once you nil the object it disappears from the collection.

BUT, for the map to have a dynamic capacity, it needs to receive an update the number of elements to calculate the load factor and expand capacity if needed. That is, unless you want to perform a Θ(n) update iterating the whole array each time you add an element. I did this with a callback on the dealloc method of the sample object I'm adding to the collection. I could edit the original object (which I did for brevity) or inherit from a superclass, or swizzle the dealloc. In any case, ugly.

However, if you don't mind having a fixed capacity collection, you don't need the callbacks. The collection uses [separate chaining](http://en.wikipedia.org/wiki/Hash_table#Separate_chaining_with_list_heads) and assuming an uniform distribution of the hash function, performance will be Θ(1+n/m) being n=elements,m=capacity. But (more buts) to avoid breaking the chaining you would need to add a previous link as a category @property and link it to the next element in the dealloc of the element. And once we are touching the dealloc, it's just as good to notify the collection that the element is being removed (which is what is doing now).

Finally, note that the test in the project is minimal and I could have overlooked something.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-07-09T20:48:13.500

如果您至少使用 MacOS X 10.5 或 iOS6，那么：

*   NSPointerArray weakObjectsPointerArray/pointerArrayWithWeakObjects 是 NSArray 的弱引用代表
*   NSHashTable hashTableWithWeakObjects/weakObjectsHashTable 是 NSSet 的弱引用代表
*   NSMapTable 是 NSDictionary 的弱参考代表（可以有弱键和/或弱值）

请注意，集合可能不会立即注意到对象已经消失，因此计数可能仍然更高，并且即使关联的对象消失，键仍可能存在，等等。 NSPointerArray 有一个 -compact 方法，理论上应该摆脱任何空指针。NSMapTable 文档指出，weakToStrong 映射的键将保留在表中（即使实际上是 nil），直到它被调整大小，这意味着即使不再在逻辑上引用强对象指针也可以保留在内存中。

编辑：我看到原始海报询问了 ARC。我认为在这些容器可以与 ARC 一起使用之前确实是 10.8 和 iOS 6——我认为以前的“弱”东西是针对 GC 的。ARC 直到 10.7 才被支持，所以如果您需要支持该版本而不是 10.6，这确实是一个问题，在这种情况下，您需要推出自己的（或者可能使用带有 NSPointerFunctions 的自定义函数，然后可以反过来使用NSPointerArray、NSHashTable 和 NSMapTable）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-09T10:56:12.787

我只是创建 NSMutableDictionary 和 NSMutableSet 的非线程安全弱引用版本。代码在这里：[https ://gist.github.com/4492283](https://gist.github.com/4492283)

对于 NSMutableArray，事情就更复杂了，因为它不能包含`nil`并且一个对象可能会被多次添加到数组中。但是实施一个是可行的。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-12-24T12:11:45.137

只需使用以下代码为 NSMutableSet 添加一个类别：

```
@interface WeakReferenceObj : NSObject
@property (nonatomic, weak) id weakRef;
@end

@implementation WeakReferenceObj
+ (id)weakReferenceWithObj:(id)obj{
    WeakReferenceObj *weakObj = [[WeakReferenceObj alloc] init];
    weakObj.weakRef = obj;
    return weakObj;
}
@end

@implementation NSMutableSet(WeakReferenceObj)
- (void)removeDeallocRef{
    NSMutableSet *deallocSet = nil;
    for (WeakReferenceObj *weakRefObj in self) {
        if (!weakRefObj.weakRef) {
            if (!deallocSet) {
                deallocSet = [NSMutableSet set];
            }
            [deallocSet addObject:weakRefObj];
        }
    }
    if (deallocSet) {
        [self minusSet:deallocSet];
    }
}

- (void)addWeakReference:(id)obj{
    [self removeDeallocRef];
    [self addObject:[WeakReferenceObj weakReferenceWithObj:obj]];
}
@end 
```

为 NSMutableArray 和 NSMutableDictionary 创建类别的方法相同。

删除 didReceiveMemoryWarning 中的 dealloc 引用会更好。

```
- (void)didReceiveMemoryWarning{
    [yourWeakReferenceSet removeDeallocRef];
} 
```

然后，您应该做的是`addWeakReference:`为您的容器类调用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-11-24T07:45:05.390

请参阅[BMNullableArray](https://github.com/werner77/BMCommons/blob/4fcac60445e432bfde1b91fbc829b4008eb98467/BMCommons/Modules/BMCore/Sources/Classes/BMNullableArray.h "BMNullableArray")类，它是我的 BMCommons 框架的一部分，可以完整解决这个问题。

此类允许插入 nil 对象，并且可以选择弱引用它包含的对象（当它们被释放时自动将它们归零）。

自动删除（我试图实现）的问题是你会遇到线程安全问题，因为不能保证在哪个时间点对象将被释放，这也可能在迭代数组时发生。

这个类是对 NSPointerArray 的改进，因为它为您抽象了一些较低级别的细节，并允许您使用对象而不是指针。它甚至支持 NSFastEnumeration 迭代数组，其中包含 nil 引用。

# .net - RedLaser 示例应用程序 (MonoTouch) 在加载 BarcodePickerController 时无异常关闭

> ID：14209071
> 
> 赞同：2
> 
> 时间：2013-01-08T06:00:31.347
> 
> 标签：.net, ios, xamarin.ios, monodevelop

我正在开发一个应用程序，我需要在 ios 应用程序中扫描几个条形码。我被要求在我的 monotouch 应用程序中使用 RedLaser 库。

经过一些调整，我能够在我的机器上编译、构建和运行应用程序。

但是，一旦我从主屏幕单击扫描按钮，应用程序就会崩溃。我在 MonoDevelop 的应用程序输出面板上看不到任何异常、错误或警告。我也找不到任何日志。该应用程序正在 iOSSimulator 上运行。

当 OverrlayController 尝试加载 ParentPicker 时，就会出现此问题。即使只是检查它的值也会使应用程序崩溃。

我已经在崩溃的地方放置了一个代码示例。我发现[这里](https://stackoverflow.com/questions/11319553/monotouch-redlaser-sdk-object)的二维码有问题，所以我禁用了二维码扫描。但仍然是同样的崩溃。我在用

Monotouch 6.0、MonoDevelop 3.0.5、RedLaser 3.4.0

任何帮助将不胜感激。

```
public partial class RLSampleViewController : UIViewController
{
    public RLSampleViewController (IntPtr handle) : base (handle) { }
    partial void scanPressed (MonoTouch.UIKit.UIBarButtonItem sender)
    {
         //THIS IS THE LINE WHERE THE APP IS JUST CRASHING 
         if (overlayController.ParentPicker == null)
         {
             BarcodePickerController picker = new BarcodePickerController ();
             // setup picker
             picker.Overlay = overlayController;
             picker.Delegate = new BarcodePickerDelegate (this);
             // Initialize with portrait mode as default
             picker.Orientation = UIImageOrientation.Up;
            // The active scanning region size is set in OverlayController.m
          }

         // The rest of the code was ignored 
```

我已经更新了问题以包含崩溃日志（感谢 Rolf B. 指出我在哪里可以找到它）。但是，它对我来说仍然没有任何意义，因为我不熟悉 Objective-C。

```
> Process:         RedLaserSample [10999]
> Path:            /Users/USER/Library/Application Support/iPhone
> Simulator/*/RedLaserSample.app/RedLaserSample
> Identifier:      RedLaserSample
> Version:         ???
> Code Type:       X86 (Native)
> Parent Process:  launchd [243]
> User ID:         501

> Date/Time:       2013-01-08 16:58:35.532 +1100
> OS Version:      Mac OS X 10.8.2 (12C60)
> Report Version:  10

> Crashed Thread:  0  Dispatch queue: com.apple.main-thread

> Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
> Exception Codes: KERN_PROTECTION_FAILURE at 0x00000000bf7ffffc

> VM Regions Near 0xbf7ffffc:
>     Stack                  00000000b056d000-00000000b057d000 [   64K] rw-/rwx SM=COW  
> --> Stack                  00000000bc000000-00000000bf800000 [ 56.0M] ---/rwx SM=NUL  
>     Stack                  00000000bf800000-00000000c0000000 [ 8192K] rw-/rwx SM=COW  

> Application Specific Information:
> iPhone Simulator 358.4, iPhone OS 6.0 (iPhone/10A403)

> Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
> 0   CoreFoundation                    0x0405f6cd typeStringHash + 13
> 1   CoreFoundation                    0x03fffdb0 __CFDictionaryHashKey + 32
> 2   CoreFoundation                    0x03fe53e2 CFBasicHashFindBucket + 1426
> 3   CoreFoundation                    0x03fe4e2d CFDictionaryGetValue + 109
> 4   CoreFoundation                    0x0405e0ea +[NSMethodSignature signatureWithObjCTypes:] + 250
> 5   CoreFoundation                    0x040fb5c3 -[NSObject(NSObject)  methodSignatureForSelector:] + 83
> 6   RedLaserSample                    0x0027a752 monotouch_trampoline + 82
> 7   ???                               0x0c7e9010 0 + 209621008
> 8   ???                               0x12c68efc 0 + 315002620
> 9   ???                               0x12c68fd4 0 + 315002836
> 10  RedLaserSample                    0x00077112 mono_jit_runtime_invoke + 722
> 11  RedLaserSample                    0x001d8bae mono_runtime_invoke + 126
> 12  RedLaserSample                    0x0027b568 monotouch_trampoline + 3688
> 13  ???                               0x0c7e9010 0 + 209621008
> 14  ???                               0x12c68efc 0 + 315002620
> 15  ???                               0x12c68fd4 0 + 315002836 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:08:44.493

结果证明这是绑定中的一个错误（它没有为子类化做好准备）。

现在已修复此问题，可在[http://github.com/mono/monotouch-bindings获得更新的绑定](http://github.com/mono/monotouch-bindings)

# ios - 如何修改标签的字体大小

> ID：14209072
> 
> 赞同：0
> 
> 时间：2013-01-08T06:00:37.107
> 
> 标签：ios, uilabel, uifont

我创建了一个按钮设置背景图像。然后为按钮添加标签，我尝试修改标签中字体的大小但失败了。我不知道如何解决这个问题，请任何人帮助我。

这是我的代码：

```
returnButton = [UIButton buttonWithType:UIButtonTypeCustom];
    returnButton.frame = CGRectMake(10, 9, 50, 28);

    [returnButton addTarget:self action:@selector(back) forControlEvents:UIControlEventTouchUpInside];
    [returnButton setImage:[UIImage imageNamed:@"US MEAT_buttons.png"] forState:UIControlStateNormal];
    [returnButton setImage:[UIImage imageNamed:@""] forState:UIControlStateHighlighted];

    UILabel *label = [[UILabel alloc]initWithFrame:CGRectMake(8, 2, 50, 20)];
    label.backgroundColor = [UIColor clearColor];
    label.textColor = [UIColor whiteColor];
    label.font = [UIFont fontWithName:@"STHeiti-Medium.ttc" size:10];
    label.text = @"返回";//返回means "return"
    [returnButton addSubview:label];
    [label release]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T06:05:07.483

也许您的自定义字体没有正确添加：

1.  将字体文件添加到资源文件
2.  编辑您的 Info.plist：使用应用程序提供的关键字体添加一个新条目。
3.  对于每个文件，将文件名添加到此数组

    `label.font = [UIFont fontWithName:@"STHeiti-Medium" size:10];`

请检查以下答案[如何在 iPhone SDK 中包含和使用新字体？](https://stackoverflow.com/questions/4969329/how-to-include-and-use-new-fonts-in-iphone-sdk)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T06:21:32.497

如果要添加自定义字体，则必须在资源文件夹中，并且需要将该`font`详细信息添加到`plist`文件中。检查这个[答案](https://stackoverflow.com/questions/13798002/setting-size-to-custom-ios-font-doesnt-work/13800169#13800169)

# git - Git块标题旁边的垃圾文本

> ID：14209075
> 
> 赞同：1
> 
> 时间：2013-01-08T06:00:47.153
> 
> 标签：git

每次我`diff`使用 Git 时，我都会看到块标题旁边有一些垃圾文本。

```
diff --git a/filename.php b/filename.php
index ddfe2f6..2209bdc 100644
--- a/filename.php
+++ b/filename.php
@@ -654,9 +654,7 @@ sessionStorage.removeItem('a'); <-- This is what I'm talking about 
```

该 JavaScript 语句存在于每个块头上，而不仅仅是一个。我可能还应该提到，这只发生在一个特定的分支上。这可能是什么原因？更重要的是，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T06:15:04.353

从所有差异/补丁工具的角度来看，这只不过是一种噪音或评论——它被所有其他工具完全忽略了。

然而，在实践中，对于大多数源代码 git 工具，如 git diff 在此处生成包含此更改的函数名称。也就是说，只要看一下commit diff，就可以很快的知道这个commit涉及到了什么函数。

在您的情况下，它看起来不像函数名称，但可能只是因为`git diff`没有针对处理 javascript 文件进行优化，并且不知何故感到困惑。

我认为你不必担心这一点。如果你真的这么倾向，试着看看这条线是否从第一个位置开始并缩进它，所以从 git 的角度来看它不像函数名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T06:18:51.153

`diff`具有尝试根据源文件语言识别差异所在的功能的代码。这里决定，由于一些糟糕的启发式或奇怪格式的源代码，该函数被命名为`sessionStorage.removeItem('a');`. 在实践中，我发现这个特性除了 C 以外的任何东西都不能很好地工作，但你可能会找到一种方法来改变它，方法是传递`--show-function-line`给 diff 命令，或者`diff.xfuncname`在某个地方的某个 git config 中。

# objective-c - 在快速枚举期间将对象设置为零

> ID：14209076
> 
> 赞同：4
> 
> 时间：2013-01-08T06:00:50.983
> 
> 标签：objective-c, ios, memory-management, fast-enumeration

我想在枚举数组时将对象设置为“nil”，如下所示：

```
for(Object* object in array){
    object = nil;
} 
```

然后 Xcode 告诉我“默认情况下，不能在 ARC 中修改快速枚举变量；声明变量 __strong 以允许这样做。

这意味着这样做：

```
for(Object __strong* object in array){
    object = nil;
} 
```

这似乎是多余的。据我了解，声明对对象的强引用会将其保留计数增加一，而将其保留计数减少一。那么，如何`nil`在枚举数组时将对象设置为？

我正在使用 ARC。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T06:11:18.063

请参阅Clang“Objective-C 自动引用计数”文档中的[快速枚举迭代变量：](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#fast-enumeration-iteration-variables)

> 如果在 Objective-C 快速枚举循环的条件下声明了一个变量，并且该变量没有明确的所有权限定符，那么它被限定为`const __strong`并且在枚举过程中遇到的对象*实际上并没有被保留*。
> 
> **基本原理**
> 这是一种优化，因为快速枚举循环承诺在枚举期间保留对象，并且集合本身不能同步修改。可以通过用 显式限定变量来覆盖它`__strong`，这将使变量再次可变并导致循环保留它遇到的对象。

所以默认情况下，循环变量是不可变的，并且出于性能原因不会增加当前对象的保留计数。

如果将循环变量显式声明为`__strong`，则为可变强引用，增加当前对象的保留计数，将循环变量设置为`nil`再次减少保留计数。但这样做不会释放对象或将其从数组中删除，因为数组持有对该对象的另一个强引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T06:15:02.707

一条捷径：

```
[array removeAllObjects]; 
```

如果您希望您的数组仍然包含 x 个项目，但不包含当前在其中的项目，您可以使用`NSNull`占位符：

```
for (NSUInteger i = 0; i < [array count]; i++)
    [array replaceObjectAtIndex:i withObject:[NSNull null]]; 
```

请记住，数组只保存对其对象的引用。如果数组不再持有对它们的引用，内存管理将启动并取消分配对象（但前提是其他任何事情都不做）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T20:19:12.953

在评论中，您已经透露，您的意图是释放数组中的对象，无论其他对象是否也对它们拥有所有权。这违反了核心内存管理原则：您*不能*释放不属于您的内存。做你想做的事是个坏主意。

您*必须*允许其他对象管理自己的内存。数组中的一项可能是 UI 对象正在显示的一段数据。当 UI 对象需要刷新自身，并在其下查找已释放的数据时，您的应用程序可能会崩溃。

从这个数组的角度来看，您可以做两件事。您可以将数组作为一个整体解除分配，这将放弃数组对所包含对象的声明；如果它们不属于其他任何东西，它们将被释放。如果您想保留数组本身，但释放其所有项目，请使用`removeAllObjects`; 同样，如果没有其他人拥有这些项目，它们将被释放。

重要的一点是，如果其他东西*确实*拥有它们，那可能是有充分理由的，你不应该绕着它跑。

# java - 使用带有 java 的 API 在 google 电子表格中插入一行

> ID：14209079
> 
> 赞同：0
> 
> 时间：2013-01-08T06:01:12.643
> 
> 标签：java, insert, gdata, google-spreadsheet-api

我有一个包含 20 行的谷歌电子表格。如何在第 10 行下方插入新行。

我可以删除一行：

```
 URL listFeedUrl = worksheet.getListFeedUrl();
            ListFeed listFeed = service.getFeed(listFeedUrl, ListFeed.class);

            ListEntry row = listFeed.getEntries().get(10);
            row.delete(); 
```

我可以通过调整工作表的大小在末尾添加一行。见这里： [https ://developers.google.com/google-apps/spreadsheets/#modifying_a_worksheets_title_and_size](https://developers.google.com/google-apps/spreadsheets/#modifying_a_worksheets_title_and_size)

我想要一个如何在工作表中间插入一行的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:03:11.387

API 中没有“插入”。解决方案是手动向下移动行以创建间隙。这不会移动“样式”，例如粗体。并且一些“有效”的单元格引用在向下移动时会导致错误，需要更改为绝对引用。

## 代码

在插入行或删除行之后更新引用。这是最复杂的一点。还有更多，但不容易拆分出来。

```
 /**
     * @param locationRow
     */
    private void updateSheetReferences(int locationRow, boolean insertingNewRow) {
        System.out.printf("\n%s ms elapsed updateSheetReferences \n", System.currentTimeMillis() - startTime);
        Pattern cellRefPattern = Pattern.compile("R(\\[?)([-0-9]+)\\]?C(\\[?)([-0-9]*)\\]?");
          int incDirection = 1;
          if (insertingNewRow == false)  incDirection = -1;
          for(AppCell nextCell : activeWorksheetCells.getAllCells()) {
              int row = nextCell.row;
              int col = nextCell.col;
              String cellInputValue = nextCell.inputValue;
              if (cellInputValue == null) continue;

              // create a copy of the cell to replace
              String updateReference = cellInputValue; 

              if(updateReference.startsWith("=")) {
                  String removeReferenceBug = updateReference.replace( (CharSequence) "C:R", (CharSequence) "C[0]:R");

                  Matcher referenceMatcher = cellRefPattern.matcher(removeReferenceBug);
                  StringBuffer restultBuffer = new StringBuffer();
                  while (referenceMatcher.find()) {
                      try {
                          if(referenceMatcher.group(1).equals("[")) {
                              int rowOffset = Integer.parseInt(referenceMatcher.group(2));
                              int topRowOfSpan;
                              int bottomRowOfSpan;                                
                              int incSize = 1*incDirection;
                              // the location of the deleted row is relative, and so one row lower if row was deleted
                              int locationDeletedOffset = 0;
                              if(row >= locationRow && insertingNewRow == false) locationDeletedOffset = -1; 

                              // get the top and bottom rows of the 
                              if(rowOffset > 0) {
                                  topRowOfSpan = row;
                                  bottomRowOfSpan = row + rowOffset;
                              } else {
                                  topRowOfSpan = row + rowOffset;
                                  bottomRowOfSpan = row ;       
                                  incSize = -1*incDirection;
                              }                               
                              //System.out.println("move down: reference:"+cellAddr.reference+" topRowOfSpan:"+topRowOfSpan+
                              //      " insertLocationRow:"+insertLocationRow+" bottomRowOfSpan:"+bottomRowOfSpan);
                              // IF reference is the deleted row 
                              if(insertingNewRow == false && row + rowOffset == locationRow+locationDeletedOffset) {
                                  referenceMatcher.appendReplacement(restultBuffer, "{}");                                                                                                                    
                              } else {
                                  if(topRowOfSpan <= locationRow+locationDeletedOffset && bottomRowOfSpan >= locationRow+locationDeletedOffset) rowOffset += incSize;
                                  if(referenceMatcher.group(3).equals("[")) {
                                      referenceMatcher.appendReplacement(restultBuffer, "R["+rowOffset+"]C["+referenceMatcher.group(4)+"]");                                      

                                  } else {
                                      int colOffset = 0;                                          
                                      String colText = referenceMatcher.group(4);                                         
                                      if(colText != null && "".equals(colText) == false) {
                                          colOffset = Integer.parseInt(colText) - col;
                                      }                                       
                                      referenceMatcher.appendReplacement(restultBuffer, "R["+rowOffset+"]C["+colOffset+"]");                                                                              
                                  }                                   
                              }
                          } else {
                              int absoluteRow = Integer.parseInt(referenceMatcher.group(2));
                              // IF reference is the deleted row
                              if(insertingNewRow == false && absoluteRow == locationRow) {
                                  referenceMatcher.appendReplacement(restultBuffer, "{}");                                                                                                                    
                              } else {
                                  if(absoluteRow >= locationRow ) absoluteRow += 1 * incDirection;
                                  if(referenceMatcher.group(3).equals("[")) {
                                      referenceMatcher.appendReplacement(restultBuffer, "R"+absoluteRow+"C["+referenceMatcher.group(4)+"]");                                                                                                              
                                  } else {
                                      referenceMatcher.appendReplacement(restultBuffer, "R"+absoluteRow+"C"+referenceMatcher.group(4));                                                                                                                                                   
                                  }
                              }

                          }
                      } catch(NumberFormatException nfe) {}
                  } // END while
                  referenceMatcher.appendTail(restultBuffer);
                  updateReference = restultBuffer.toString();                                                                         

              } // END IF

              nextCell.inputValue =  updateReference;
          }
    } 
```

# java - 如何在java中定义相对路径

> ID：14209085
> 
> 赞同：52
> 
> 时间：2013-01-08T06:01:26.533
> 
> 标签：java, relative-path, jdk1.6

这是我的项目的结构：

![这是我的项目的结构](../Images/3fc98e0edf8dde83737e6b59140f7641.png)

我需要在`config.properties`里面阅读`MyClass.java`。我尝试使用如下相对路径来执行此操作：

```
// Code called from MyClass.java
File f1 = new File("..\\..\\..\\config.properties");  
String path = f1.getPath(); 
prop.load(new FileInputStream(path)); 
```

这给了我以下错误：

```
..\..\..\config.properties (The system cannot find the file specified) 
```

如何在 Java 中定义相对路径？我正在使用 jdk 1.6 并在 Windows 上工作。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-01-08T06:08:16.997

尝试这样的事情

```
String filePath = new File("").getAbsolutePath();
filePath.concat("path to the property file"); 
```

因此，您的新文件指向创建它的路径，通常是您的项目主文件夹。

[编辑]

正如@cmc 所说，

```
 String basePath = new File("").getAbsolutePath();
    System.out.println(basePath);

    String path = new File("src/main/resources/conf.properties")
                                                           .getAbsolutePath();
    System.out.println(path); 
```

两者都给出相同的值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-01-28T04:27:12.790

[首先，在这里](https://docs.oracle.com/javase/tutorial/essential/io/path.html)查看绝对路径和相对路径之间的区别：

绝对路径始终包含根元素和定位文件所需的完整目录列表。

或者，需要将相对路径与另一个路径组合才能访问文件。

在构造函数 File(String pathname) 中，Javadoc 的 File 类说

> 路径名，无论是抽象的还是字符串形式的，都可以是绝对的或相对的。

如果要获取相对路径，则必须定义从当前工作目录到文件或目录的路径。尝试使用[系统属性](https://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)来获取。如您绘制的图片：

```
String localDir = System.getProperty("user.dir");
File file = new File(localDir + "\\config.properties"); 
```

此外，应尽量避免使用类似“.”、“../”、“/”等类似相对文件位置的相对路径，因为文件移动时，比较难处理。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-08T06:15:46.217

```
 File f1 = new File("..\\..\\..\\config.properties"); 
```

试图访问文件的路径在项目目录中，然后像这样访问文件。

```
File f=new File("filename.txt"); 
```

如果您的文件在`OtherSources/Resources`

```
this.getClass().getClassLoader().getResource("relative path");//-> relative path from resources folder 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-28T21:59:35.507

值得一提的是，在某些情况下

```
File myFolder = new File("directory"); 
```

不指向根元素。例如，当您将应用程序放在`C:`驱动器 ( `C:\myApp.jar`) 上时，然后`myFolder`指向 (windows)

```
C:\Users\USERNAME\directory 
```

代替

```
C:\Directory 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-10T16:40:38.420

我在使用图像文件的相对路径将屏幕截图附加到 ExtentReports 时遇到问题。执行时我的当前目录是“C:\Eclipse 64-bit\eclipse\workspace\SeleniumPractic”。在此之下，我为 report.html 和 image.png 截图创建了文件夹 ExtentReports，如下所示。

```
private String className = getClass().getName();
private String outputFolder = "ExtentReports\\";
private String outputFile = className  + ".html";
ExtentReports report;
ExtentTest test;

@BeforeMethod
    //  initialise report variables
    report = new ExtentReports(outputFolder + outputFile);
    test = report.startTest(className);
    // more setup code

@Test
    // test method code with log statements

@AfterMethod
    // takeScreenShot returns the relative path and filename for the image
    String imgFilename = GenericMethods.takeScreenShot(driver,outputFolder);
    String imagePath = test.addScreenCapture(imgFilename);
    test.log(LogStatus.FAIL, "Added image to report", imagePath); 
```

这会在 ExtentReports 文件夹中创建报告和图像，但是当打开报告并检查（空白）图像时，将鼠标悬停在图像 src 上会显示“无法加载图像”src=".\ExtentReports\QXKmoVZMW7.png"。

这可以通过使用系统属性“user.dir”为图像的相对路径和文件名添加前缀来解决。所以这完美地工作并且图像出现在html报告中。

克里斯

```
String imgFilename = GenericMethods.takeScreenShot(driver,System.getProperty("user.dir") + "\\" + outputFolder);
String imagePath = test.addScreenCapture(imgFilename);
test.log(LogStatus.FAIL, "Added image to report", imagePath); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-18T09:43:59.070

```
 public static void main(String[] args) {
        Properties prop = new Properties();
        InputStream input = null;
        try {
            File f=new File("config.properties");
            input = new FileInputStream(f.getPath());
            prop.load(input);
            System.out.println(prop.getProperty("name"));
        } catch (IOException ex) {
            ex.printStackTrace();
        } finally {
            if (input != null) {
                try {
                    input.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }

    } 
```

您也可以使用
**Path path1 =FileSystems.getDefault().getPath(System.getProperty("user.home"), "downloads", "somefile.txt");**

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-02-14T15:24:52.550

Spring Boot 的示例。我的 WSDL 文件位于“wsdl”文件夹中的资源中。WSDL 文件的路径是：

> 资源/wsdl/WebServiceFile.wsdl

要从某个方法获取此文件的路径，您可以执行以下操作：

```
String pathToWsdl = this.getClass().getClassLoader().
                    getResource("wsdl\\WebServiceFile.wsdl").toString(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-27T07:34:09.460

从 Java 7 开始，您拥有`Path.relativize()`：

“... Path 还定义了 resolve 和 resolveSibling 方法来组合路径。relativize 方法可用于构造两条路径之间的相对路径。”

*   [https://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html#relativize(java.nio.file.Path)](https://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html#relativize(java.nio.file.Path))
*   [java.nio.file.Path 类的 resolve() 和 relativize() 方法在哪里使用？](https://stackoverflow.com/questions/50551920/where-to-use-resolve-and-relativize-method-of-java-nio-file-path-class)
*   [理解 java.nio.file.Path.relativize(Path other)](https://stackoverflow.com/questions/37747896/understanding-java-nio-file-path-relativizepath-other)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-03T07:11:29.967

如果根据您的图表，该文件比您的`src`文件夹高 2 级，则应使用以下相对路径：

```
../../config.properties 
```

请注意，在相对路径中，我们使用正斜杠`/`而不是反斜杠`\`。

# jquery - JScrollpane：滚动到底部时添加元素

> ID：14209087
> 
> 赞同：2
> 
> 时间：2013-01-08T06:01:32.680
> 
> 标签：jquery, jscrollpane

我已将 JScrollpane 应用于. 现在，当通过 ajax滚动到底部时，`<ul> <li>`我需要添加更多内容。`<li>``<ul>`

任何想法？

TIA再也

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T17:19:22.170

您需要使用“jsp-scroll-y”事件。当用户滚动 y 栏时触发此事件。有关活动的更多信息，请[点击此处](http://jscrollpane.kelvinluck.com/events.html)。由于浏览器每次触发此事件不止一次，我没有使用 jQuery 的普通 .bind 或 .on，而是使用 jQuery debounce 插件来防止浏览器每 200 毫秒多次触发该函数。[您可以在此处](https://github.com/diaspora/jquery-debounce)下载 JQuery debounce 。所以假设你的结构是这样的：

```
<div id="container">
  <ul id="list">
    <li> ... </li>
    <li> ... </li>
    <li> ... </li>
  </ul>
</div> 
```

使用 JQuery 实现目标的 javascript 如下所示：

```
var container = $('#container');
var list = $('#list');

// initialize the scroll pane
container.jScrollPane();

// bind the event
container.debounce('jsp-scroll-y', function(event, scrollPositionY, isAtTop, isAtBottom) {
    if (isAtBottom) {
        $.ajax({
            type: 'GET',
            async: true,
            dataType: 'html',
            url: '/path/to/more/elements',
            success: function(data) {
                if (data.length) {
                    list.append(data);
                    container.jScrollPane('reinitialise');
                } else {
                    container.unbind('jsp-scroll-y');
                }
            },
        });
    }
}, 200); 
```

当然，在这种情况下，'/path/to/more/elements' 应该返回 li 元素，而当您接收完所有内容后什么也不返回。我使用在 AJAX 成功函数中递增的页面索引来获取新元素。您可以使用 ajax 调用或 URL 中的数据将此页面索引发送到服务器（这取决于服务器上的实现）。

# jquery - 获取饼图的图例和颜色代码

> ID：14209090
> 
> 赞同：0
> 
> 时间：2013-01-08T06:01:39.970
> 
> 标签：jquery, highcharts

我正在使用 highcharts jquery 文件来创建饼图和趋势图。现在我正在为趋势和饼图获得不同的配色方案。在绘制趋势图时，有什么方法可以获取饼图中图例使用的颜色？

参考[http://www.highcharts.com/demo/pie-legend/gray](http://www.highcharts.com/demo/pie-legend/gray)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:39:57.200

知道了。

```
Highcharts.getOptions().colors 
```

是我搜索的。谢谢你们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T06:11:34.830

如果您检查选项，则`Highcharts Configuration Preview`有一个对象已通过，

```
plotOptions: {
                pie: {
                    allowPointSelect: true,
                    cursor: 'pointer',
                    dataLabels: {
                        enabled: false
                    },
                    showInLegend: true
                }
            } 
```

我猜这个属性`showInLegend`是你需要的。

**编辑：**

要获取/设置图例中使用的颜色，请单击`View Visual Theme`此[页面](http://www.highcharts.com/demo/pie-legend/gray)，您将看到图例中的颜色`colors[]`，

```
colors: ["#DDDF0D", "#7798BF", "#55BF3B", "#DF5353", "#aaeeee", "#ff0066", "#eeaaee",
      "#55BF3B", "#DF5353", "#7798BF", "#aaeeee"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T08:30:15.250

图例的颜色与系列的颜色相同。您可以通过设置系列对象的数据选项的颜色字段来更改系列颜色。请查看以下链接以查看详细信息。

[http://api.highcharts.com/highcharts#series.data.color](http://api.highcharts.com/highcharts#series.data.color)

如果要更改图例文本的样式，可以使用图例对象的 itemStyle 属性。但看起来你不能为图例本身中的每个系列文本设置不同的颜色，如果你找到一种方法，让我知道我只是想不通。

[http://api.highcharts.com/highcharts#legend.itemStyle](http://api.highcharts.com/highcharts#legend.itemStyle)

# joomla - 在 美德玛特 和 joomla 1.5 中显示产品评论

> ID：14209095
> 
> 赞同：0
> 
> 时间：2013-01-08T06:01:55.933
> 
> 标签：joomla, product, virtuemart, review

如何在 joomla 1.5 中的商品详细信息页面中为产品启用产品评论视图（针对最终用户）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T06:45:47.140

您可以像下面给定的导航一样启用产品评论：

**对于 Joomla 1.5 和 meadowmart 1.1.9 stable**导航是：

> 转到组件-> com_virtuemart-> 配置-> 全局-> 自动发布评论？

只需启用它。你有你的解决方案。你可以参考这张图片： ![在此处输入图像描述](../Images/0bc1dff5ab7b98b042fdfdaa9f77f352.png)

**对于 Joomla 2.5 和 meadowmart 2.0.16 stable**导航是：

> 转到组件-> com_virtuemart-> 配置-> 店面-> 自动发布评论？

![在此处输入图像描述](../Images/491a0155221e77f6f28db2254b610b22.png)

# javascript - 可以在外部 javascript 文件中添加多个函数吗？即 .js 文件？

> ID：14209105
> 
> 赞同：1
> 
> 时间：2013-01-08T06:02:49.323
> 
> 标签：javascript

我试图在外部 .js 文件中编写更多的一个函数，但它不起作用。所以我使用标签在 html 正文中编写了 javascript。我们不能在外面写超过 1 个函数吗？因为只有第一个功能可以正常工作。其余的都不起作用。我是个新鲜人

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T06:18:08.597

是的，您可以将多个函数写入外部 java 脚本文件。我在这里发布一个小示例。1\. 在一个名为 js 的文件夹中创建 test.js 文件 2\. 创建 test.html 文件

**1.test.html**

将以下行插入 test.html 文件

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
<script type="text/javascript" src="js/test.js"></script> 
</head>
<body>
<a href="#" onclick="test()">Click Here to call first function</a><br>
<a href="#" onclick="test1()">Click Here to call second function</a>  
</body>
</html> 
```

1.  测试.js

将以下代码插入到名为 test.js 的外部 java 脚本文件中

```
function test(){
    alert("fist function is called");

}
function test1(){
    alert("second function is called");
} 
```

# java - 从同一个 jar 中存在的 java 代码读取 jar 中的文件

> ID：14209107
> 
> 赞同：2
> 
> 时间：2013-01-08T06:02:51.713
> 
> 标签：java, jar, embedded-resource

我正在尝试使用保存在同一个 jar 中的 java 代码读取保存在 jar 中的 xsd 文件。我正在使用以下代码。

```
URL tmpurl = ClassLoader.getSystemResource("com/abc/filename.xsd");

Schema s = schemaFactory.newSchema(tmpurl);
jaxbUnMarshaller.setSchema(s); 
```

当我将它作为一个单独的项目运行时它工作正常，但是当我制作一个 jar 时，tmpurl 为空，因此 setSchema 给出了一个空指针异常。

您能否请一个解决方法，使它甚至可以在 jar 文件中运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T06:13:23.023

你试过吗？

```
getClass().getClassLoader().getResource() 
```

您`classpath`在 jar 中的清单文件也很重要。

请在此处查看已接受的答案：

[Class.getResource 和 ClassLoader.getSystemResource：是否有理由偏爱一个？](https://stackoverflow.com/questions/6298400/class-getresource-and-classloader-getsystemresource-is-there-a-reason-to-prefer)

[使用 ClassLoader 加载文件](https://stackoverflow.com/questions/1119740/loading-files-with-classloader)

# objective-c - 从 iphone 到 wcf 服务的 POST 请求？

> ID：14209112
> 
> 赞同：0
> 
> 时间：2013-01-08T06:03:24.373
> 
> 标签：objective-c, wcf, http-post

我正在做从 iPhone 向 wcf 服务发送（POST）XML 请求的概念，我知道发送 XML 请求的现象。但是我有从 wcf 服务检索到的 html 数据，我必须发布与请求相同的数据服务。检索 html 数据后，我将其存储在 NSString 变量中，并在请求中传递了该字符串。但我无法发布并收到错误。'反序列化 EService.svc 类型的对象时出错。令牌'[CDATA ['是预期的，但发现'DOCTYPE'。为什么我收到这个错误？

来自服务的 HTML 响应是这样的：

```
(
        {
        BodyEmailforResult = "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">
\n<html xmlns=\"http://www.w3.org/1999/xhtml\">
\n<head>
\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" />
\n<title>Untitled Document</title>
\n</head>
\n
\n<body style=\"background:#bdd9ef; padding:20px 0px; margin:0px;\">
\n\t<table width=\"700px\" cellspacing=\"0\" cellpadding=\"0\" style=\"border-radius:10px; margin:0px auto; background:white; color:#2222; padding:20px 0px;\" >
\n
\n    <tr>
\n    \t<td style=\"height:130px; background:#e8e8e8; border-bottom:2px solid #c5c5c5; margin:0px; \" >
\n        \t<table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\">
\n            \t<tr>
\n                \t<td width=\"40%\" style=\"padding-left:20px;\" >
\n\t\t        \t\t<img src=\"http://123.32.34.45/images/logo.png\"  />
\n                    </td>
\n                    <td>
\n                    \t<p style=\"color:#1b1b1b; margin:0px; font-size:14px; font-family:Arial, Helvetica, sans-serif; line-height:20px; text-align:right; padding-right:20px; \" >Visit  website</p>
\n                        <p style=\"color:#0459df; margin:0px; font-size:14px; font-family:Arial, Helvetica, sans-serif; line-height:20px; text-align:right; padding-right:20px; text-decoration:underline; \"><a href=\"http://123.32.34.45\" style=\"color:#0459df; font-weight:bold; \" >123.32.34.45</a></p>
\n                    </td>
\n               </tr>
\n        \t</table>
\n        </td>
\n        
\n    </tr>
\n    <tr>
\n    \t<td height=\"20px\" >
\n        
\n        </td>
\n    </tr>
\n\t<tr>
\n    \t<td style=\"color:#1b1b1b; font-size:14px; text-align:left; font-family:Arial, Helvetica, sans-serif; line-height:24px; padding-left:20px; padding-right:20px; \" >
\n        \t<p style=\"margin:0px; line-height:30px; \" >Dear <span style=\"font-weight:bold;\" >Mary</span></p>
\n            
\n            
\n            <p style=\"margin:0px; line-height:24px; padding-top:10px; \" >
\n            \tThis is to confirm that we have received your registration request for your Account. We have created a temporary link listed below. You can use this link to activate your user account. 
\n            </p>
\n                        
\n            <p style=\"margin:0px; padding-top:10px; \" >You can <a href=\"123.32.34.45/Verify.aspx?Code=N6zDZK \" style=\"color:#0459df; font-weight:bold;\" >click hear </a> to activate your user account. </p>
\n            
\n            <p style=\"margin:0px; padding-top:10px;\" >Once you confirm your e-mail account, away to make. Note that use your e-mail and password to sign-in.
\n
\n</p>
\n<p style=\"margin:0px; font-size:14px; font-weight:bold; padding-top:10px;\" >Registration Details :</p>
\n<p style=\"margin:0px; padding-top:10px;\" >Your registration successfully completed Thanks for your registration</p>
\n
\n
\n<p style=\"margin:0px; font-size:16px; padding-top:30px;\" >
\nThanks & Regards
\n</p>
\n<p style=\"color:#0080b8; margin:0px; font-size:16px; font-weight:bold; padding-top:10px;\" >
\n
\n</p>
\n
\n
\n        </td>
\n    </tr>
\n    </table>
\n    
\n</body>
\n</html>";
    }
)

I took this response in string as :
 NSString *bodyofemail=[[arr2 objectAtIndex:0]objectForKey:@"BodyEmailforResult"];

and POST request is like this :

    NSString *url5=[NSString stringWithFormat:@"http://123.32.34.45/EService.svc/SendEmail"];
        NSMutableURLRequest *request5=[[[NSMutableURLRequest alloc] init]autorelease];
        [request5 setURL:[NSURL URLWithString:url5]];
        [request5 setHTTPMethod:@"POST"];
        NSString *contentType5=[NSString stringWithFormat:@"text/xml"];
        [request5 addValue:contentType5 forHTTPHeaderField:@"Content-Type"];
        NSMutableData *postBody5=[NSMutableData data];
        [postBody5 appendData:[[NSString stringWithFormat:@"<EmailServiceRequest xmlns=\"http://schemas.datacontract.org/2004/07/\" xmlns:i=\"http://www.w3.org/2001/XMLSchema-instance\">"]dataUsingEncoding:NSUTF8StringEncoding]];
        [postBody5 appendData:[[NSString stringWithFormat:@"<Body>%@</Body>",bodyofemail]dataUsingEncoding:NSUTF8StringEncoding]];
        [postBody5 appendData:[[NSString stringWithFormat:@"<FromEmail>glory@i.net</FromEmail>"]dataUsingEncoding:NSUTF8StringEncoding]];
        [postBody5 appendData:[[NSString stringWithFormat:@"<Subject>%@</Subject>",subjectofemail]dataUsingEncoding:NSUTF8StringEncoding]];
        [postBody5 appendData:[[NSString stringWithFormat:@"<ToEmail>%@</ToEmail>",txtemail.text]dataUsingEncoding:NSUTF8StringEncoding]];
        [postBody5 appendData:[[NSString stringWithFormat:@"</EmailServiceRequest>>"]dataUsingEncoding:NSUTF8StringEncoding]];

    [request5 setHTTPBody:postBody5];
    NSHTTPURLResponse *urlResponse5=nil;
    NSError *error5=nil;
    NSData *responseData5 = [NSURLConnection sendSynchronousRequest:request5
                                                  returningResponse:&urlResponse5
                                                              error:&error5];

    if (responseData5!= NULL)
    {
        NSString *rss5 = [[NSString alloc] initWithData:responseData5
                                               encoding:NSUTF8StringEncoding ];
        NSLog(@"Response Code:%d",[urlResponse5 statusCode]);
        if([urlResponse5 statusCode ]>=200 && [urlResponse5 statusCode]<300)
        {
            NSLog(@"Response:%@",rss5);
        }
    }
    else
    {
        NSLog(@"Failed to send request: %@", [error5 localizedDescription]);
    } 
```

但我得到这样的错误：'反序列化 EService.svc 类型的对象时出错。令牌“[CDATA[”是预期的，但找到了“DOCTYPE”。

我哪里出错了以及如何将 html 数据发布到 wcf 服务？

任何帮助都会得到满足..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:01:41.927

WCF 服务通常要求请求是[*soap*](https://en.wikipedia.org/wiki/SOAP)请求，除非该服务已配置为使用`WebHttpBinding`允许XML 或JSON 请求的服务。您应该从服务开发人员那里了解该服务是否只接受soap XML 或者它是否可以接受纯XML 或JSON。

在任何一种情况下，解决此类问题的最简单方法是从成功调用（来自另一个服务客户端）中捕获 XML 请求（soap 与否），并将这些消息用作您的 XML（或 JSON）字符串的模板需要在您的 iOS 应用程序中构建。

# python - 如何在python中过滤列表的字典？

> ID：14209113
> 
> 赞同：1
> 
> 时间：2013-01-08T06:03:30.370
> 
> 标签：python, django, list, dictionary

我有一个由 django 构建的博客应用程序，如果有新评论，我想通知博主，所以这就是我所做的

```
class Blog(models.Model):
     lastview = models.DateTimeField('self last view date')

class Comment(models.Model):
     blog = models.ForeignKey(Blog)
     timestamp = models.DateTimeField('comment date')

user_blog_list = Blog.Objects.filter(author = request.user)
user_blog_com = {}

for blog in user_blog_list:
      user_blog_com [blog] =list(Comment.objects.filter(blog = blog )) 
```

现在`user_blog_com`是 dict 的样子

```
{
  (Blog: blogname1):[(Comment:comment1),(Comment:comment2)],
  (Blog: blogname2):[(Comment:comment1),(Comment:comment2)],
} 
```

接下来我需要将每个评论的时间戳与博客的 lastview 进行比较，以了解该评论是否被博主查看，但我不知道如何。

我想要的是一张像

```
{
  (Blog: blogname):[(Comment:unviewed_comment),(Comment:unviewed_comment)],
} 
```

请帮忙！！！

我试试这个

```
user_blog_com = {}

for blog in user_blog_list:
      user_blog_com [blog] =list(Comment.objects.filter(blog = blog ,timestamp > blog.lastview ))

 get an error: non-keyword arg after keyword arg 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T06:30:22.247

我尚未对其进行测试，但以下内容应为您提供每个博客的新评论列表。

```
from django.db.models import F

comments = Comment.objects.filter(
        blog__author=request.user
    ).filter(
        timestamp__gte=F('blog__lastview')
    ).select_related('blog').order_by('blog') 
```

[F() 表达式](https://docs.djangoproject.com/en/dev/topics/db/queries/#django.db.models.F)允许您逐行引用数据库中的值。除此之外，您只是在询问`timestamp__gte=blog__lastview`当前用户是作者的所有新评论。我们使用这样您就可以在没有其他查询`select_related`的情况下访问实例的详细信息，这样您就有了一些订单。`blog``order_by('blog')`

如果您必须在字典中包含此信息（我想知道为什么会这样..），那么您可以执行以下操作：

```
from collections import defaultdict
d = defaultdict(list)
for comment in comments:
    d[comment.blog.name].append(comment) 
```

比您尝试构建它的方式更具可读性和表现力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T06:24:44.053

试试这个

```
ret_dict = {}
for k, v in user_blog_com.items():
    # Check comments timestamp is smaller than lastview.
    ret_dict[k] = [x for x in v if x.timestamp <= k.lastview]

print ret_dict 
```

这可能会对您有所帮助。

# php - 如何获取多维数组中每个数组的第一个元素？

> ID：14209118
> 
> 赞同：0
> 
> 时间：2013-01-08T06:04:01.937
> 
> 标签：php, arrays, codeigniter

我有一个如下所示的多维数组。我想知道的是如何提取每个数组中的第一个数组元素并为所有第一个数组元素构造一个数组。

```
 Array (
        '0' => Array (
                   'd1' => 'D1',
                   'c1' => 'C1',
                   't1' => 'T1',
                   'a1' => 'A1',
                ),
        '1' =>Array (
                   'd2' => 'D2',
                   'c2' => 'C2',
                   't2' => 'T2',
                   'a2' => 'A2',
                ),
          ); 
```

格式化后，我需要像下面的数组一样的数组。

```
 Array => 
           '0' => Array (
                  'd1' => 'D1',
                  'd2' => 'D2',
                  ),
           '1' => Array (
                  'c1' => 'C1',
                  'c2' => 'C2',
                  ),
           '2' => Array (
                  't1' => 'T1',
                  't2' => 'T2',
                  ),
           '3' => Array (
                  'a1' => 'A1',
                  'a2' => 'A2',
                  ),
        ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T06:12:12.453

```
$a = Array (
'0' => Array (
           'd1' => 'D1',
           'c1' => 'C1',
           't1' => 'T1',
           'a1' => 'A1',
        ),
'1' =>Array (
           'd2' => 'D2',
           'c2' => 'C2',
           't2' => 'T2',
           'a2' => 'A2',
        ),
  );

foreach($a as $k=>$v)
{
    $i = 0;
    foreach($v as $k1=>$v1)
    {
        $b[$i][$k1] = $v1;
        $i++;
    }
}
echo "<pre>";
print_r($b); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T07:27:36.440

```
 $array = Array (
    '0' => Array (
       'd1' => 'D1',
       'c1' => 'C1',
       't1' => 'T1',
       'a1' => 'A1',
        ),
     '1' =>Array (
       'd2' => 'D2',
       'c2' => 'C2',
       't2' => 'T2',
       'a2' => 'A2',
       ),
     );
 while (list($key, $value) = each($array)) 
    {
    $i = 0;
      foreach ($value as $key1 => $val1) 
    {
        $array2[$i][$key1] = $val1;
        $i++;
    }
   }
  echo "<pre>";
  print_r($array2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-26T23:42:38.823

$user = Array ( [0] => Array ( [id] => 1 [Name] => Kabelo [Last_name] => 5d41402abc4b2a76b9719d911017c592 [username] => 5d41402abc4b2a76b9719d911017c592 [password] => 5d41402abc4b2a76b9719d911017c592 [reg_date] => 0000-00 -00 00:00:00)

```
[1] => Array
    (
        [id] => 2
        [Name] => Kgotso
        [Last_name] => Lekula
        [username] => 5d41402abc4b2a76b9719d911017c592
        [password] =>5d41402abc4b2a76b9719d911017c592
        [reg_date] => 0000-00-00 00:00:00
    )

[2] => Array
    (
        [id] => 3
        [Name] => Me
        [Last_name] => White
        [username] => 5d41402abc4b2a76b9719d911017c592
        [password] => jsksksh
        [reg_date] => 0000-00-00 00:00:00
    )

[3] => Array
    (
        [id] => 4
        [Name] => Hai
        [Last_name] => Black
        [username] => maki@gmail.com
        [password] => 5d41402abc4b2a76b9719d911017c592
        [reg_date] => 0000-00-00 00:00:00
    )

[4] => Array
    (
        [id] => 5
        [Name] => Tsek
        [Last_name] => Lengitja
        [username] => tebza@make.com
        [password] => 5d41402abc4b2a76b9719d911017c592
        [reg_date] => 0000-00-00 00:00:00
    )

[5] => Array
    (
        [id] => 6
        [Name] => Akebatle
        [Last_name] => akitsi
        [username] => me@nksjkjshdks.co.za
        [password] => 5d41402abc4b2a76b9719d911017c592
        [reg_date] => 0000-00-00 00:00:00
    )

[6] => Array
    (
        [id] => 7
        [Name] => Jeez
        [Last_name] => motho
        [username] => tjatji@solomzi.com
        [password] => sadasdad
        [reg_date] => 0000-00-00 00:00:00
    ) 
```

)

```
 foreach ($user as $key => $value) {

              print_r($user[$key]['Name'];

            } 
```

# php - PHP 中的 ORA-12504 警告

> ID：14209119
> 
> 赞同：0
> 
> 时间：2013-01-08T06:04:05.743
> 
> 标签：php, linux, oracle11g

我有以下脚本用于在 Linux 中使用 PHP 检查 Oracle 数据库连接：

```
<?php
        $conn = oci_connect('proekt', 'proekt1', 'localhost:1521');

        $stid = oci_parse($conn, "select 1+2 as sum from dual");
        oci_execute($stid);
        $row = oci_fetch_array($stid, OCI_BOTH);
        echo $row[SUM];
?> 
```

但它给了我这个警告：

```
Warning: oci_connect(): ORA-12504: TNS:listener was not given the SERVICE_NAME in CONNECT_DATA in /var/www/test.php on line 2 
```

我该如何解决它，问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T06:18:59.550

更改 oci_connect() 中的第三个参数对我有帮助：

```
$conn = oci_connect('proekt', 'proekt1', ' (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVICE_NAME = proekt)
    )
  )'); 
```

# android - 在Android中为不同的移动设备设置不同的布局

> ID：14209120
> 
> 赞同：0
> 
> 时间：2013-01-08T06:04:07.553
> 
> 标签：android, android-layout

在我的应用程序中，我想为不同的移动设备设置不同的字体大小和填充。我在 Android 文档中使用了这种方法解释。

```
res/layout/my_layout.xml             // layout for normal screen size ("default")
res/layout-small/my_layout.xml       // layout for small screen size
res/layout-large/my_layout.xml       // layout for large screen size
res/layout-xlarge/my_layout.xml      // layout for extra large screen size
res/layout-xlarge-land/my_layout.xml // layout for extra large in landscape orientation 
```

问题是 Galaxy s2 和 Galaxy Note 2(720x1280) 手机都使用 xlarge/my_layout.xml 文件。这些手机有不同的密度。因此，它们两者的行为方式都不相同。

对于galaxy note 2 xml 是完美的，但现在我需要更改galaxy s2 mobile 的标题填充和字体大小。是否有特定的方法来识别 480x800 屏幕（银河 s2）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T06:09:18.010

Nexus 4使用文件夹 **layout-** **sw360dp**，galaxy note 使用 layout-sw400dp。也许它会帮助你。

# ios - 每个 Apple ID 只允许下载一次

> ID：14209123
> 
> 赞同：0
> 
> 时间：2013-01-08T06:04:27.663
> 
> 标签：ios, ipad

我正在创建一个应用程序，我想在每个设备模型上授权给企业。他们想要使用的设备越多，他们被迫购买的许可证就越多。

但是，如果所有设备都登录到同一个 Apple ID 上，就像大多数企业一样，企业只需付费下载该应用程序一次，然后在所有其他设备上重新下载任意次数即可。有没有办法限制每个 Apple ID 的下载量，或者将应用程序注册到特定的 iPad 以使其无法下载和再次使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T06:10:59.743

不，你真的不能这样做。Apple 的软件理念是，一旦您下载了它，您就可以随时使用、删除、重新下载它，而无需支付额外费用。

我能想到的一个“解决方案”（而是一种解决方法）是使用您自己的服务器注册某种设备 ID（例如序列号、MAC 地址等） - 作为唯一标识符 - 并限制对您的访问仅在找到该特定设备 ID 时应用。然而，这样做从根本上违反了 Apple 的用户体验政策，并且您的应用很可能会被拒绝。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T06:46:27.670

Apple 停止支持 iOS 的唯一标识符。[下面链接中给出的源代码](https://github.com/gekitz/UIDevice-with-UniqueIdentifier-for-iOS-5)解决了这个问题。它根据设备的mac地址和bundle标识符生成一个唯一标识符。 [https://github.com/gekitz/UIDevice-with-UniqueIdentifier-for-iOS-5](https://github.com/gekitz/UIDevice-with-UniqueIdentifier-for-iOS-5)

我同意 H2CO3 的回答

然而，这样做从根本上违反了 Apple 的用户体验政策，并且您的应用很可能会被拒绝。

根据他们的指南，用户应该能够在与其 ID 关联的所有设备中使用该应用程序。将来如果他丢失了他的设备，那么应用程序应该能够与该设备同步购买数据。

您如何为您的应用程序创建登录/注册并将唯一 ID 存储在您的服务器中，并且您可以限制在特定时间使用一台设备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T06:41:39.020

或者您可以制作您的应用程序，以便需要一个用户帐户，并让他们按用户帐户付费。您可以通过在设备上生成唯一的随机密钥并在登录时（在 Web 服务上）进行测试来防止在多个设备上登录。

# android - Intent.FLAG_ACTIVITY_CLEAR_TOP 不会删除活动堆栈

> ID：14209124
> 
> 赞同：21
> 
> 时间：2013-01-08T06:04:32.820
> 
> 标签：android, android-intent

我正在开发应用程序，我想在单击按钮时关闭整个应用程序。我知道在 android 中我们不应该考虑关闭应用程序，因为 android 会自动执行此操作[退出应用程序是否令人不悦？](https://stackoverflow.com/questions/2033914/quitting-an-application-is-that-frowned-upon?lq=1). 但我想关闭我的应用程序。

所以我要关闭应用程序是我正在使用`Intent.FLAG_ACTIVITY_CLEAR_TOP`标志来删除活动堆栈。

```
Intent intent = new Intent(Activity3.this, FinishActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent);
finish(); 
```

`FinishActivity.class`在我正在调用的 onCreate 中，`this.finish()`但应用程序没有关闭，并且之前的活动被重新打开。

FinishActivity.class

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    this.finish();
} 
```

**更新 ：**

这是场景

```
MainActivity->Activity2->Activity3->FinishActivity 
```

这`Activity2`是在完成活动后打开的。

我如何实现这一目标？任何想法和建议将不胜感激。

感谢和问候

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-08T06:15:00.050

试试这个。这应该清除您的活动堆栈。

```
Intent i = new Intent(this,MyActivity.class);
i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK);
i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(i); 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2016-02-11T00:12:31.157

这终于在 100% 的时间里对我有用。我独立尝试了所有标志，从未对所有代码实例都有效。在我想要这个功能的任何地方使用了所有标志，大约 5 个不同的地方，它现在可以工作了。

```
 Intent intent = new Intent(actvSignIn.this, actvNearbyPlaces.class);
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK);
            startActivity(intent);
            finish(); 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-01-08T06:10:57.210

用这个 -

```
 Intent intent = new Intent(Activity3.this, FinishActivity.class);
 intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | 
 Intent.FLAG_ACTIVITY_NEW_TASK);
 intent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
 startActivity(intent);
 finish(); 
```

**已编辑--新答案，可以完美运行..**

只是举个例子......根据您的项目需要做它 -

我正在参加三个`Activity`A、B 和 C 类课程。我在 C 类活动视图上应用了一个关闭按钮。如果你愿意，然后通过后退按钮，你可以转到上一个活动，当你按下关闭按钮时，你会退出应用程序......看看 -

```
public class AActivity extends Activity {

  /** Called when the activity is first created. */
  @Override
   public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Intent i = new Intent(this, B.class);
    startActivityForResult(i, 1);
}

@Override
protected void onActivityResult(final int requestCode,
        final int resultCode, final Intent intent) {
    super.onActivityResult(requestCode, resultCode, intent);

    if (resultCode == 5) {
        finish();
    }
}
} 
```

参加下一节课的活动——

```
 public class B extends Activity {
    /** Called when the activity is first created. */
   @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.b);

    Intent i = new Intent(this, C.class);
    startActivityForResult(i, 2);
}

@Override
protected void onActivityResult(final int requestCode,
        final int resultCode, final Intent intent) {
    super.onActivityResult(requestCode, resultCode, intent);

    if (resultCode == 5) {
        setResult(5);
        finish();
    }
}
} 
```

做最后一个活动——

```
 public class C extends Activity {
   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.c);
}

    // close button..set by xml view..you can set it by button listener.
public void close(View v) {
    setResult(5);
    finish();
}
} 
```

希望它能解决您的问题..干杯！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-08T06:09:53.760

从文档中`Intent.FLAG_ACTIVITY_CLEAR_TOP`

> 如果设置，并且正在启动的活动已经在当前任务中运行，那么不会启动该活动的新实例，而是关闭它上面的所有其他活动，并且此 Intent 将被传递到（现在顶部）作为新意图的旧活动。

因此，要使其工作，您`FinishActivity`必须成为 Activity 堆栈中的第一个。在任何其他情况下，这个解决方案不会给你任何东西。

您必须执行几个步骤来执行此操作：

1）`FinishActivity`作为您的启动器活动。

2）不要为它提供任何视图，并`Activity`直接从`onCreate`回调开始你的应用程序：

3）重新定义`onRestart`回调：

代码示例：

```
private boolean isNeedToContinue = true;

@Override
protected void onCreate(Bundle arg0) {
    super.onCreate(arg0);
}

@Override
protected void onResume() {
    super.onResume();
    if (isNeedToContinue) {
                    startActivity(new Intent(this,FirstVisibleActivity.class));
                    isNeedToContinue = false;
    } else {
        finish();
    }
}

@Override
protected void onRestart() {
    super.onRestart();
    finish();
    isNeedToContinue = false;
} 
```

我想这就是你所需要的。祝你好运！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-08T06:26:05.593

setFlags(Intent.FLAG_ACTIVITY_NEW_TASK| Intent.FLAG_ACTIVITY_CLEAR_TOP);

除了在xml中的FinishActivity定义中将launchMode设置为“singleTop”，覆盖onNewIntent方法，您可以传递一些附加信息作为intent的一部分，在onCreate中完成您的活动，根据调用的一些信号在onNewIntent方法中完成它活动或根据您的需要简单地完成它。您的其他活动可能有不同的启动模式，这就是它们没有完成的原因。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-05-23T11:11:38.100

由于其他答案有以下应该工作。

```
Intent intent = new Intent(Activity3.this, FinishActivity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK); 
```

对于 API 级别 < 11，`Intent.FLAG_ACTIVITY_CLEAR_TASK`不可用。相反，我`IntentCompat.FLAG_ACTIVITY_CLEAR_TASK`从支持库中使用。

见[IntentCompat](https://developer.android.com/reference/android/support/v4/content/IntentCompat.html#FLAG_ACTIVITY_CLEAR_TASK)

可能会帮助绊倒的人。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-08T06:06:42.540

像这样尝试这对我有用：

```
Intent intent = new Intent(Activity3.this, FinishActivity.class);
intent.addFlags(android.content.Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent);
finish(); 
```

而不是你的代码

```
Intent intent = new Intent(Activity3.this, FinishActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent);
finish(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-08T06:11:40.533

试试这个：

```
Intent intent = new Intent(Activity3.this, FinishActivity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent);
finish(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-11-17T19:35:40.407

这对我有用：

```
Intent intent = new Intent(Activity3.this, FinishActivity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent);
finish(); 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2018-11-22T16:45:09.280

您也可以在最后一个活动中使用`finishAffinity()`功能，例如：

```
finishAffinity()
startHomeActivity() 
```

希望它会有用。

# php - HTML5输入类型日期：如何制作日期字符串

> ID：14209127
> 
> 赞同：0
> 
> 时间：2013-01-08T06:04:52.990
> 
> 标签：php, javascript, html

1i 一直在使用 html 5 的 input type="date" 并发现它非常有用。我只是想知道这是否可能：

假设我在日期选择器中选择了 1/01/2012

我想将它保存在我的数据库（mysql）上，但我希望它像这样“2012 年 1 月 1 日”

有没有办法做到这一点，怎么做？

```
require_once "includes/database.php";

$title=$_POST['txtTitle'];
$old_date  = explode("/",$_POST['txtDate']);
$new_date = $old_date[1].' '.$old_date[0].','.$old_date[2];
$date=$new_date;
$from=$_POST['txtFrom'];
$to=$_POST['txtTo'];
$place=$_POST['txtPlace'];
$details=$_POST['txtDetails'];
$id=$_POST['txtEid'];   

        if($id==""){
            $sql = "INSERT INTO events (event_title,event_date,event_tfrom,event_tto,event_place,event_details) VALUES (:title,:date,:from,:to,:place,:details)";
            $qry = $db->prepare($sql);
            $qry->execute(array(':title'=>$title,':date'=>$date,':from'=>$from,':to'=>$to,':place'=>$place,':details'=>$details));
        }else{
        $sql = "UPDATE events SET event_title=?, event_date=?, event_tfrom=?, event_tto=?, event_place=?, event_details=? WHERE event_id=?";
            $qry = $db->prepare($sql);
            $qry->execute(array($title,$date,$from,$to,$place,$details,$id));
        }

    echo "<script language='javascript' type='text/javascript'>alert('Successfully Saved!')</script>";
    echo "<script language='javascript' type='text/javascript'>window.open('cms_events.php','_self')</script>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T06:24:32.953

使用 javascript 你可以做这样的事情

```
 <button onclick = "getDate()">click for date</button>
    <script>
    function getDate(){
       var monthsOfYear = new Array("January", "February", "March", 
"April", "May", "June", "July", "August", "September", 
"October", "November", "December");

   var d = new Date();
   var currdate = d.getDate();
   var currmonth = d.getMonth();
   var curryear = d.getFullYear();

   alert(monthsOfYear[currmonth] + " "+currdate+","+curryear);
} 
```

希望这可以帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T06:14:51.990

你可以通过使用一些 php 函数来做到这一点。

```
$old_date  = explode("-",$_POST['date']);

$new_date = $old_date[2].' '.$old_date[1].','.$old_date[0];

echo $new_date; 
```

您将在 2012 年 1 月 1 日获得这种格式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T07:27:54.427

这将非常适合您的代码，检查它..

```
$old_date  = explode("-",$date);

$months = array('January'=>"01",'February'=> "02", 'March'=>"03",'April'=>"04",  'May'=>"05", 'June'=>"06", 'July'=>"07", 'August'=>"08",'September'=> "09",'October'=>"10", 'November'=>"11", 'December'=>"12");

$nw_month = array_search($old_date[1],$months);

$new_date = $old_date[2].' '.$nw_month.','.$old_date[0];

echo $new_date; 
```

# c# - c#中数字的正则表达式

> ID：14209128
> 
> 赞同：-3
> 
> 时间：2013-01-08T06:04:58.553
> 
> 标签：c#, regex

我有这样的号码

```
90.1103.41
90440036.1112.227
90.1112.228
90.1001.0009 
```

如何在 C# 中验证正则表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T06:17:40.457

使用`\d`字符类来匹配一个数字（字符`'0'`- `'9'`）。

`+`to 匹配至少一次出现的前一个实体（组/字符/等）。

用于`\.`匹配文字句点字符 ( `'.'`)。

`^`and`$`表示模式必须从头到尾匹配字符串。

```
using System.Text.RegularExpressions;

...

const string pattern = @"^\d+\.\d+\.\d+$";
Regex.IsMatch("90.11103.41", pattern);       //true
Regex.IsMatch("90440036.1112.227", pattern); //true
Regex.IsMatch("90.1112.228", pattern);       //true
Regex.IsMatch("90.1001.0009", pattern);      //true 
```

如果您的要求是至少有两组数字，您可以使用以下模式：

```
^(\d+\.)+\d+$ 
```

如果您的要求是至少有一组数字，您可以使用：

```
^(\d+\.)*\d+$ 
```

如果您的要求是可以接受一些固定范围的组数，您可以使用

```
^(\d+\.){m,n}\d+$ 
```

Where`m`和`n`将被替换为最后一组之前的最小和最大组数。

另一种表达精确数量的数字组的方法是：

```
^(\d+\.){m}\d+$ 
```

`m`所需组数减去的占位符在哪里`1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T06:17:20.973

你可以试试这个：

```
string yourNumber = "90440036.1112.227";

Match m = Regex.Match(yourNumber,@"[\d\.]+")

if(m.Success)
{
    //valid
}

else
{
    //invalid
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T06:07:43.233

**更新**

尝试

```
^(?:\d\.?)+$ 
```

和你的代码：

```
bool foundMatch = Regex.IsMatch(inputString, @"^(?:\d\.?)+$");

123.456.789        valid
123...456789       invalid
...123..           invalid
123456             valid 
```

解释

> ***`(?:subexpression)`*** 定义一个非捕获组。
> 
> ***`\d`*** 匹配任何十进制数字。
> 
> ***`\.`*** 匹配`.`字符
> 
> ***`?`*** 匹配前一个元素零次或一次。
> 
> ***`+`*** 匹配前一个元素一次或多次。

# c# - 使用福昕阅读器 SDK 在 Windows 8 商店应用程序（C#）中打开 pdf

> ID：14209141
> 
> 赞同：1
> 
> 时间：2013-01-08T06:06:19.217
> 
> 标签：c#, windows-8, windows-store-apps

如何使用福昕阅读器 SDK 在 Windows 8 商店应用程序（C#）中打开 pdf 文件，或者建议我使用任何免费库在 Windows 8 商店应用程序中打开 pdf 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T07:26:45.810

如果你不需要支持 windows RT，那么你可以选择 iTextSharp（它是免费的），如果你想支持 windows RT，那么没有免费的 C# 库，你可能更喜欢使用 HTML5 和 Javascript 编写你的应用程序并使用 Mozilla 的 pdf.js 来阅读 PDF 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-24T13:02:59.857

Foxit SDK 支持 UWP 开发。如果我查看示例，则有整个演示查看器 UWP 示例代码。

# ios - 需要为 UITableView 创建一个全选按钮并将选择添加到 iOS 中的数组

> ID：14209145
> 
> 赞同：1
> 
> 时间：2013-01-08T06:06:47.720
> 
> 标签：ios, uitableview

我有一个 UITableViewController，它显示 NSMutableArray 中的项目列表，以及一个用作用户可以选择/取消选择的复选框的按钮。我能够成功显示表格以及复选框。但是，我想在表格的最顶部有一个表头，它有一个“全选”复选框，允许用户选择所有单元格，或取消选择所有单元格。如果某些单元格已经被选中，那么我只想选择那些未选中的单元格。

这是我到目前为止的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;

        testButton = [UIButton buttonWithType:UIButtonTypeCustom];
        [testButton setFrame:CGRectMake(280, 57, 25, 25)];
        [testButton setImage:[UIImage imageNamed:@"CheckBox1.png"] forState:UIControlStateSelected];
        [testButton setImage:[UIImage imageNamed:@"CheckBox2.png"] forState:UIControlStateNormal];
        [testButton setUserInteractionEnabled:YES];
        [testButton addTarget:self action:@selector(buttonTouched:) forControlEvents:UIControlEventTouchUpInside];
        [cell setAccessoryView:testButton];

    }

    // Configure the cell...
    TestObject *tObject = [[DataModel sharedInstance].testList objectAtIndex:indexPath.row];
    cell.textLabel.text = tObject.testTitle;

    return cell;

}

-(void)buttonTouched:(id)sender
{
    UIButton *btn = (UIButton *)sender;

    if( [[btn imageForState:UIControlStateNormal] isEqual:[UIImage imageNamed:@"CheckBox1.png"]])
    {
        [btn setImage:[UIImage imageNamed:@"CheckBox2.png"] forState:UIControlStateNormal];
        // other statements
    }
    else
    {
        [btn setImage:[UIImage imageNamed:@"CheckBox1.png"] forState:UIControlStateNormal];
        // other statements
    }

}

//Here is the additional method that I have added to my code to select all
-(void)clickOnCheckButton {

    NSLog(@"Did it select?");

    for (int i = 0; i < [self.tableView numberOfSections]; i++) {
        for (int j = 0; j < [self.tableView numberOfRowsInSection:i]; j++) {
            NSUInteger ints[2] = {i,j};
            NSIndexPath *indexPath = [NSIndexPath indexPathWithIndexes:ints length:2];
            UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
            //Here is your code
            [self buttonTouched:nil];

        }
    }
} 
```

有人对如何做到这一点有任何建议吗？

提前感谢所有回复的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T06:26:33.047

取另一个`NSMUtableArray`作为 SelectedArray

在行中，`didselectRowAtIndexPath`您可以从 中添加删除对象`SelectedArray`。

您可以选择一个单元格调用表格视图的`selectRowAtIndexPath`方法：

```
[yourtable selectRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0] animated:NO scrollPosition:UITableViewScrollPositionTop]; 
```

`for loop`仅在选定的单元格中放入`selectedArray`putcheckbutton。

在你的 CellForRow 方法中使用这个

```
testButton.tag=indexpath.row; 
```

您可以通过以下方法选择所有行和所有部分。

```
for (int i = 0; i < [ptableView numberOfSections]; i++) {
    for (int j = 0; j < [ptableView numberOfRowsInSection:i]; j++) {
        NSUInteger ints[2] = {i,j};
        NSIndexPath *indexPath = [NSIndexPath indexPathWithIndexes:ints length:2];
            UITableViewCell *cell = [ptableView cellForRowAtIndexPath:indexPath];
           //Here is your code

      UiButton *btn = (UiButton*)[cell.contentView viewWithTag:j]

if( [[btn imageForState:UIControlStateNormal] isEqual:[UIImage imageNamed:@"CheckBox1.png"]])
    {
        [btn setImage:[UIImage imageNamed:@"CheckBox2.png"] forState:UIControlStateNormal];
        // other statements
    }
    else
    {
        [btn setImage:[UIImage imageNamed:@"CheckBox1.png"] forState:UIControlStateNormal];
        // other statements
    }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T06:35:16.837

如果你想在 UITableView 标题中使用以下方法：

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
```

从此方法返回 UIView 对象，其中包含复选框和您想要的其他内容。

要选中取消选中，请维护一个数组，您可以在其中存储复选框是否被选中。

当用户选中/取消选中标题更改数组并重新加载表时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T07:50:28.050

在这里我发布另一个答案，以便它可能有助于其他想要从头开始制作并消除任何困惑的人。

`tableViewCell`您可以使用 ImageView 作为 AccessoryView，而不是添加 Button 。

```
UIImageView *imageView1 = [[[UIImageView alloc] init] autorelease];
imageView1.tag = indexpath.row;

[cell.accessoryView addSubview:imageView1]; 
```

`viewWithTag`然后使用 - : 方法获取子视图：

```
UIImageView *getImageView1 = (UIImageView*)[cell.accessoryView viewWithTag:rowNumber];
getImageView1.image=[UIImage ImageNamed:@"checked.png"]; 
```

通过上面的代码，我们可以`image`改变`imageView`in`selectRowAtindexPath`

从我的第一个答案中，您可以使用代码选择 tableView 的全部或多个单元格。

# reverse - 如何反转循环单链表

> ID：14209146
> 
> 赞同：0
> 
> 时间：2013-01-08T06:07:04.203
> 
> 标签：reverse, circular-list

反转单个链表很容易，下面的代码可以正常工作。

```
void reverse_list (SLINK list)
{
    SLINK tmp = list->next; 
    NODE *cur = NULL;
    list->next = NULL;
    for (; NULL != tmp;)    
    {
            cur = tmp;
            tmp = tmp->next;
            cur->next = list->next;
            list->next = cur;
    }
} 
```

如何反转循环单链表？我将代码调整为此

```
SLINK reverse_list (SLINK rear)
{
    NODE *tag = rear->next;
    SLINK tmp = rear->next;
    NODE *cur = NULL;
    rear->next = NULL;
    for (; NULL != tmp; )
    {
        cur = tmp;
        tmp = tmp->next;
        cur->next = rear;
        rear->next = cur;
    }
    rear = tag;
    return rear;
} 
```

但它不起作用，我以为运行这个函数后，循环列表将是非循环的，实际上，转储它后，我发现它仍然是一个循环列表。一定是我逻辑错了，请指正。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T01:49:17.343

像 Amit 一样，我不太了解您的代码背后的想法......但从纯粹逻辑的角度来看，如果您已经知道如何翻转常规列表，那么您最好的选择是复制您的所有元素将循环列表转换为带有“for”的新常规列表，当第一个元素等于当前元素时停止，然后使用您的代码翻转新列表以反转单链表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T06:49:48.573

不知道为什么你说反转单链表的代码就可以了。在我看来，它看起来不对。行 cur->next = list->next; 鉴于您已经在循环外将 list->next 设置为 NULL，它不会将第二个节点的 next 指针设置为 NULL 吗？它不应该去第一个节点吗？

为什么你期望循环链表的反转会导致线性链表？如果您要在一张纸上绘制圆形列表，则反转只会导致链接方向顺时针到逆时针（反之亦然）偏移。

循环列表反向和线性列表反向之间的唯一逻辑变化是，在循环链表的情况下，您不会将第一个节点的下一个指针设置为 NULL

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-21T17:40:58.887

这是一种方法；

```
node *toggle(node *start){

        node *p=NULL;
        node *c=start;
        node *ne=NULL;
        node *e;
        int f=0;
        do{
            ne=c->next;
            c->next=p;
            p=c;
            if(f==0){
                e=p;
                f=1;
            }
            c=ne;
        }while(c!=start);

        start=p;
        e->next=p;
return start; 
```

}

# sharepoint - 使用 Sharepoint Web 服务从 Sharepoint 文档库下载文件

> ID：14209152
> 
> 赞同：1
> 
> 时间：2013-01-08T06:07:34.553
> 
> 标签：sharepoint, ssis

我们在 SharePoint 2010 中获得了包含多个文档的文档库。

我正在努力在 SSIS 中编写代码 - 使用脚本组件，我们可以通过它使用 SHAREPOINT Web 服务下载这些文档。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-09T07:16:27.220

您可以使用 http URL 直接访问文件。从您的图书馆中选择图书馆/使用资源管理器打开。这将向您显示要使用的 URL。