# StackOverflow 问答 15499000-15499999

# javascript - 选取框文本在鼠标悬停时开始移动

> ID：15499001
> 
> 赞同：1
> 
> 时间：2013-03-19T12:03:27.247
> 
> 标签：javascript, jquery

嗨，我正在使用[jquerymarquee](http://jquery.aamirafridi.com/jquerymarquee/)，我想在开头显示整行文本，然后**滚动 onMouseHover**，当文本行结束时，文本的开头会在一段时间后出现。也许还有其他图书馆能够做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:30:11.557

我让它按你的意愿工作。它与`library`您正在使用的相同。

我没有启动`marquee onload`，等待用户把他`mouse`的`text`。随着`user`他的`mouse`结束`text`，`marquee`开始了。

你可以在这里查看演示。 [http://jsfiddle.net/VJkxe/1/](http://jsfiddle.net/VJkxe/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:11:22.500

仅在示例中..

```
$('.marquee-with-options').hover(function(e) {

}); 
```

不要使用..property..pauseOnHover: true

你必须尝试一些事情，如果发生任何问题，你必须在这里问..

# gcc - 将 gcc libs .data 放在特定部分？

> ID：15499006
> 
> 赞同：3
> 
> 时间：2013-03-19T12:03:36.717
> 
> 标签：gcc, embedded, gnu, ld, linker-scripts

我正在尝试为我们的嵌入式系统切换到 GNU GCC 编译器，但是由于我们芯片的内存布局被拆分，我无法链接项目：

```
RAM section 1: 0x10000-0x12FFF
RAM section 2: 0x18000-0x1BFFF 
```

我们项目中的数据可以放在第 1 节中，但从 gcc 库链接的数据不适合。地图文件提取：

```
.data          0x00012974      0x3c4 c:/tools/gnucr16_v1.1.3-elf/cr16-elf/bin/../lib/gcc/cr16-elf/4.5.1-GNUCR16_v1.1.3/../../../../cr16-elf/lib\libc.a(lib_a-impure.o)
               0x00012974                _impure_ptr

.data          0x00012d7c      0x410 c:/tools/gnucr16_v1.1.3-elf/cr16-elf/bin/../lib/gcc/cr16-elf/4.5.1-GNUCR16_v1.1.3/../../../../cr16-elf/lib\libc.a(lib_a-mallocr.o)
               0x00012d7c                __malloc_av_
               0x00013184                __malloc_trim_threshold
               0x00013188                __malloc_sbrk_base 
```

是否可以将库中的 .data 部分放在第二部分？我尝试了不同的事情但没有成功......链接器脚本提取：

```
MEMORY
{
  SHARED1    : org =   0x10000, len = 0x3000
  SHARED2    : org =   0x18000, len = 0x4000
}

SECTIONS
{
  .data 0x12004 : { *(.data); } >SHARED1
  .data2 0x19000 : { libc*(.data); } >SHARED2
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T14:13:39.680

```
SECTIONS
{
  .section_name:
  {
    *lib_a-impure.o (.data);  //That is the syntax to access sections of object files
   } >SHARED1
} 
```

更多信息在这里：[http ://www.embedded.com/design/mcus-processors-and-socs/4026080/Building-Bare-Metal-ARM-Systems-with-GNU-Part-3](http://www.embedded.com/design/mcus-processors-and-socs/4026080/Building-Bare-Metal-ARM-Systems-with-GNU-Part-3)

# html - 在画布上绘制螺旋圈

> ID：15499007
> 
> 赞同：3
> 
> 时间：2013-03-19T12:03:39.950
> 
> 标签：html, html5-canvas

我想在`canvas`我使用下面的代码中绘制这种螺旋图案需要你的帮助以进一步绘制圆圈。

```
 // get the canvas element using the DOM
 var canvas = document.getElementById('circlecanvas');
 // Make sure we don't execute when canvas isn't supported
 if (canvas.getContext){
    // use getContext to use the canvas for drawing
    var ctx = canvas.getContext('2d');
    // Draw shapes
    ctx.beginPath();
    //context.arc(x, y, radius, startAngle, endAngle, counterClockwise);
    for (i=0;i<9;i++){
        ctx.arc(50, 50, 50, i, Math.PI * 2, false);
        ctx.fill();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:12:14.483

我认为你需要的是一个螺旋......我正在发布伪代码以在下面绘制一个阿基米德螺旋：-NB-角度是一个变量..您可以相应地调整......

```
for (i=0; i< 720; i++) {
  angle = 0.1 * i;
  x=(1+angle)*Math.cos(angle);
  y=(1+angle)*Math.sin(angle);
  drawlineTo(x, y);
} 
```

# cordova - 在 Phonegap 中，执行此 index.html 文件时出现错误 assest.html

> ID：15499012
> 
> 赞同：1
> 
> 时间：2013-03-19T12:04:02.347
> 
> 标签：cordova, phonegap-plugins, phonegap-build

我刚刚开始phonegap，当我运行这段代码时

索引.html

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta name="viewport" content="width=device-width, initial-scale = 1.0, maximum-scale=1.0, user-scalable=no" />
        <script type="text/javascript" charset="utf-8" src="windows/cordova-2.0.0.js"></script>
        <script type="text/javascript" charset="utf-8">
            var deviceReady = false;
            function init() {
                document.addEventListener("deviceready", function() {
                    deviceReady = true;
                }, false);  

                window.setTimeout(function() { // Always this condtion met
                    if (!deviceReady) {
                        alert("Error: Phonegap did not initialize.  Demo will not run correctly.");
                        console.log("Error: Phonegap did not initialize.  Demo will not run correctly.");
                    }
                }, 3000);
            }

            function doAlert() {
                var message = "This is an Alert dialog";
                var title = "Attention!";
                navigator.notification.alert(message, title);
            }
        </script>
    </head>
    <body onLoad="init();">
        <h1>Cordova Tests</h1>
        <div id="info">
            <button onclick="doAlert();">
                Click Me
            </button>
        </div>
    </body>
</html> 
```

当我运行此代码时，我收到此错误

> 03-19 16:37:40.998：E/Web 控制台（854）：TypeError：表达式“navigator.notification”[未定义] 的结果不是对象。在文件：///android_asset/www/index.html:25

在此先感谢朋友，希望您能理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:15:49.417

您确定在 index.html 文件中包含了正确的 Cordova.js 文件吗？您应该始终确保您的 Cordova 文件的名称应该与您在索引文件中的名称相匹配。

检查你的：

```
<script type="text/javascript" charset="utf-8" src="windows/cordova-2.0.0.js"></script> 
```

# c - 如何在结构中的字符串上实现 fnv1a 哈希函数？

> ID：15499018
> 
> 赞同：1
> 
> 时间：2013-03-19T12:04:14.463
> 
> 标签：c, pointers, hashtable, hash-function

我正在尝试对字典中的所有单词实现 fnv1a 哈希函数（这样我以后可以快速访问它们）。

这是 fnv1a 哈希函数：

```
int
fnv1a(unsigned char byte, uint32_t hash)
{
    hash = SEED;
    // SEED is a constant that I defined
    return ((byte ^ hash) * PRIME) % HASHTABLE_SIZE;
} 
```

这就是我试图在一个名为 load() 的函数中获取一个单词的哈希值的方式：

```
int hash = fnv1a((unsigned char)*(ptr->word)++, SEED); 
```

这是完整的功能：

/* * 将字典加载到内存中。如果成功则返回 true，否则返回 false。*/

```
bool
load(const char *dictionary)
{    
    FILE* fp = fopen("words.txt", "r");

    // make new node to store the stuff in
    node *ptr = malloc(sizeof(node));
    ptr->next = NULL;

    // while it's not the end of the file
    while(!feof(fp))
    {
        // store the word in the ptr
        fscanf(fp, "%s", ptr->word);

        // get hash function for word
        int hash = fnv1a((unsigned char)*(ptr->word)++, SEED);

        // store word at hash value in hashtable

        // if there isn't a word there yet
        if (hashtable[hash]->next == NULL) 
            hashtable[hash]->next = ptr;  

    // else go to the end of the list and add the word

    // haven't done this part yet

    if (hashtable == NULL)
    {
        printf("Didn't work out, bud");
        return false;
    }   

    else 
        return true;
} 
```

编译此代码时不断出现的错误（指向我试图散列一个单词的行）：

```
dictionary.c:70:53: error: lvalue required as increment operand 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:10:55.013

似乎 of 的类型是, 或`ptr->word`的数组。你不能增加一个数组，改变设计。`char``char []`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T12:12:00.297

您可以像这样简单地解决您的问题：

```
char* ptr = &ptr->word[0];

fnv1a(*ptr++, SEED); 
```

# arduino - 在 2 Due 上使用 I2C 进行程序擦除

> ID：15499021
> 
> 赞同：2
> 
> 时间：2013-03-19T12:04:24.083
> 
> 标签：arduino, i2c

我有一个有趣的问题，它可能或不可能仅适用于 Due。我没有资源在 2 个 Arduino ATMegas 上测试 I2C。这是问题：

我有两个Due：主人有一个以太网盾，以后会用到；现在用于轻松区分主从。I2C 工作正常，但设置如下： 1 块 12V 电池连接到与主机相连的 Due 的 DC“圆形”输入：3.3V 和 GND 在两块板之间连接在一起：1 条用于上传草图的 USB 电缆。

当我从主设备上拔下 USB 以在从设备上上传草图时，两个板在 USB 拔出阶段都保持开启 - 由于 12 DC。草图已上传，USB 停留在从机端进行串行监控。

THE ISSUE：当12V电池未校正到主控时；在 USB 拔出阶段，两个板都关闭。将相同的草图上传到从机后，串行监视器显示从机没有收到任何信息。

我假设 I2C 设置和上传草图是有冲突的。我该如何解决这个问题，所以我不需要一直给会费供电。这是使用 12V 电池电源的代码。

```
/**************************************************************************************************
  MASTER
****************************************************************************************************/
#include <Wire.h>

byte ISend[4];

void setup()
{
   Wire1.begin(); // join i2c bus (address optional for master)
   intToByteA((unsigned long)72992);
}

void loop()
{ 
   Wire1.beginTransmission(4); // transmit to device #4
   for(int i = 0; i < 4; i++)
   {
      Wire1.write(ISend[i]);
   } 
   Wire1.endTransmission();
   delay(500); 
}

void intToByteA(unsigned long num)
{
   for (int i = 0; i < 4; i++)
   {
      ISend[i] = (byte)((num >> (8 * i)) & 0xFF);
   }
}

/*********************************************************************************************/

/************************************************************************************************
 SLAVE
*************************************************************************************************/
#include <Wire.h>

byte IReceive[4];

void setup()
{
  Wire1.begin(4);                // join i2c bus with address #4
  Wire1.onReceive(receiveEvent); // register event
  Serial.begin(9600);           // start serial for output
}

void loop()
{
  delay(223);
}

// function that executes whenever data is received from master
// this function is registered as an event, see setup()
void receiveEvent(int howMany)
{
  unsigned long test = 11;
  for(int i = 0; i < 4; i++)
  {
     IReceive[i] = Wire1.read();
  } 
  test = byteAToInt();
  Serial.println(test);
}

unsigned long byteAToInt()
{
  unsigned long temp = 0;
  for (int i = 0; i < 4; i++)
  {
     temp += (((unsigned long)IReceive[i]) << (8 * i));
  }
  return temp; 
} 
```

# javascript - 具有“hasOne”关联的空 ExtJS 模型实例

> ID：15499024
> 
> 赞同：3
> 
> 时间：2013-03-19T12:04:28.813
> 
> 标签：javascript, extjs4

我有两个通过“hasOne”关联链接的 ExtJS 模型，如下所示：

```
Ext.define('MyProj.model.Car', {
    extend: 'Ext.data.Model',

    requires: [
        'MyProj.model.CarPassport'
    ],

    fields: [
        { name: 'id', type: 'int' },
        { name: 'model', type: 'string' },
        { name: 'passportId', type: 'int' }
    ],

    associations: [
        { type: 'hasOne', model: 'CarPassport', primaryKey: 'id', foreignKey: 'passportId', getterName: 'getCarPassport', setterName: 'setCarPassport' }
    ]
});

Ext.define('MyProj.model.CarPassport', {
    extend: 'Ext.data.Model',

    fields: [
        { name: 'id', type: 'int' },
        { name: 'color', type: 'string' }
    ],
}); 
```

关联多重性是 1 比 1 - 没有汽车护照，汽车就不能存在。当我尝试创建空 Car 实例时，ExtJS 不会将链接实体添加到主实体：

```
var car = Ext.ModelManager.getModel('MyProj.model.Car').create();
car.getCarPassport(); // This string produce error - getCarPassport is undefined 
```

那么，是否可以使用链接的 CarPassport 模型实例创建汽车模型实例，如果为真，如何创建？谢谢...

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-25T04:22:13.793

我在 Sencha 论坛上找到了这篇博文的链接，并得到了帮助：

[客户端关联](http://mitchellsimoens.com/2013/03/ext-js-4/client-side-associations/)

# django - django 教程：500 @ debug=false

> ID：15499032
> 
> 赞同：6
> 
> 时间：2013-03-19T12:04:53.280
> 
> 标签：django, python-2.7, debugging

Windows 7
Python 2.7.3
Django 1.5
python manage.py runserver

我正在关注“ [https://docs.djangoproject.com/en/1.5/intro/tutorial03/](https://docs.djangoproject.com/en/1.5/intro/tutorial03/) ”中提供的教程

在 settings.py 中使用 DEBUG=True 可以正确生成网页。地址

```
http://127.0.0.1:8000/admin/ 
```

显示管理员登录页面。

```
http://127.0.0.1:8000/polls/ 
```

显示“怎么了？” 项目符号链接。

```
http://127.0.0.1:8000/polls/1/ 
```

显示数字“1”

```
http://127.0.0.1:8000/polls/2/ 
```

显示标准 404 消息。但是，如果我设置 DEBUG=False （并且什么都不做），那么我在所有地址都会收到 500 错误！我正在使用开发内部运行服务器。没有回溯错误。服务器日志如下所示：

使用 DEBUG=True

```
0 errors found  
March 19, 2013 - 12:01:12  
Django version 1.5, using settings 'mysite.settings'  
Development server is running at http://127.0.0.1:8000/  
Quit the server with CTRL-BREAK.  
[19/Mar/2013 12:06:41] "GET /admin/ HTTP/1.1" 200 1893  
[19/Mar/2013 12:54:55] "GET /polls/ HTTP/1.1" 200 74  
[19/Mar/2013 12:55:02] "GET /polls/2/ HTTP/1.1" 404 1577  
[19/Mar/2013 12:55:09] "GET /polls/1/ HTTP/1.1" 200 1  
Validating models... 
```

使用 DEBUG=False

```
0 errors found  
March 19, 2013 - 12:55:21  
Django version 1.5, using settings 'mysite.settings'  
Development server is running at http://127.0.0.1:8000/  
Quit the server with CTRL-BREAK. 
[19/Mar/2013 12:59:22] "GET /admin/ HTTP/1.1" 500 27  
[19/Mar/2013 12:59:25] "GET /polls/ HTTP/1.1" 500 27  
[19/Mar/2013 12:59:28] "GET /polls/1/ HTTP/1.1" 500 27  
[19/Mar/2013 12:59:34] "GET /polls/2/ HTTP/1.1" 500 27 
```

我的目录结构如下：

```
1> mysite  
2>     - mysite  
3>     - polls  
4>         - templates  
5>             - polls  
6>     - templates  
7>         - admin 
```

我的“manage.py”是@ 1>，所以我知道我必须在以下文件和位置中进行编辑。

@2>settings.py
@2>urls.py

但是：
A. 我目前没有'view.py' 文件@ 2>，这会是一个新文件吗？遵循教程后，我目前有一个 'view.py' @ 3>;
B. '404.html' 应该进入@2> 下的新模板目录还是两个现有模板目录之一（@4> 或@6>）？我假设自定义的“500.html”会进入同一个目录。

我很乐意发布更多您想要查看的代码。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T12:09:52.460

很可能，您忘记`ALLOWED_HOSTS`在[设置文件](http://getluky.net/2013/02/21/django-debugfalse-and-allowed_hosts/)中进行设置。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-20T20:34:30.807

我之前遇到过同样的问题，我可以通过在模板目录中创建 404.html 来解决这个问题，指定有效的 ALLOWED_HOSTS 并重新启动我的网络服务器

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-20T20:58:47.790

假设您的 django 项目名为 mysite，我遇到了类似的问题，并且能够用最少的代码修复它：

```
# mysite/mysite/settings.py
DEBUG = False
ALLOWED_HOSTS = ['localhost']
# Tells your project to find your custom 404.html at mysite/mysite/templates/404.html
INSTALLED_APPS = (..., 'tutorial', ...)

# mysite/mysite/urls.py
handler404 = 'tutorial.views.custom_404'

# mysite/mysite/views.py
from django.shortcuts import render

def custom_404(request):
    return render(request, '404.html', {}, status=404)

# mysite/mysite/templates/404.html
<h1>CUSTOM 404 PAGE</h1> 
```

不要忘记重新启动服务器。=P

* * *

目录结构应如下所示：

```
mysite  
    - mysite
        - settings.py
        - urls.py
        - views.py
        - templates
            - 404.html  
    - polls  
        - templates  
            - polls 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-04T05:20:37.777

尝试像这样运行服务器

python manage.py runserver localhost:8000

如果您希望它从所有地址工作

python manage.py runserver 0.0.0.0:8000

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-21T14:37:28.013

以下是我的情况：

*   我刚刚在我的模板中添加了一个 404.html
*   我也做过`python manage.py collectstatic --noinput`

它为我解决了错误。

# c# - 以模型为参数将行动重定向到其他领域的行动

> ID：15499036
> 
> 赞同：6
> 
> 时间：2013-03-19T12:05:01.063
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我在管理区域现在想将值发送到默认区域中的帐户控制器我如何发送

```
ChangePasswordModel mode = new ChangePasswordModel();
                mode.ConfirmPassword = password;
                mode.NewPassword = password;
                mode.OldPassword = user.Password;
                return RedirectToAction("ChangePassword", "Account",new { area = '/' } , new {model = mode}); 
```

这是我在帐户控制器中的其他操作，我想在其中重定向我的代码

```
[Authorize]
        [HttpPost]
        public ActionResult ChangePassword(ChangePasswordModel model)
        {
            if (ModelState.IsValid)
            {

                // ChangePassword will throw an exception rather
                // than return false in certain failure scenarios.
                bool changePasswordSucceeded;
                try
                {
                    MembershipUser currentUser = Membership.GetUser(User.Identity.Name, true /* userIsOnline */);
                    changePasswordSucceeded = currentUser.ChangePassword(model.OldPassword, model.NewPassword);
                }
                catch (Exception)
                {
                    changePasswordSucceeded = false;
                }

                if (changePasswordSucceeded)
                {
                    return RedirectToAction("ChangePasswordSuccess");
                }
                else
                {
                    ModelState.AddModelError("", "The current password is incorrect or the new password is invalid.");
                }
            }

            // If we got this far, something failed, redisplay form
            return View(model);
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T12:20:33.193

**[`RedirectToAction`不存在需要 4 个参数的重载](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.redirecttoaction%28v=vs.108%29.aspx)**。

试试这个：

```
return RedirectToAction(
    "ChangePassword",
    "Account",
     new { area = "", model = mode }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T12:07:21.353

```
return RedirectToAction("ChangePassword", "Account",
    new { area = "other_area_name", model = mode }); 
```

@mattytommo 的答案是正确的解决方案，4 个参数没有重载方法。我更新了我的答案。

# apache - 为什么我的 Markdown 文件没有被 gzip 压缩？

> ID：15499041
> 
> 赞同：2
> 
> 时间：2013-03-19T12:05:14.547
> 
> 标签：apache, .htaccess, gzip, markdown

我的`.htaccess`文件中有这个：

```
# gzip compression
<ifmodule mod_deflate.c>
AddOutputFilterByType DEFLATE text/text text/html text/plain text/xml text/css application/x-javascript application/javascript application/json
</ifmodule> 
```

这确保给定的内容类型被压缩。

**现场演示：** [http](http://ecmazing.com/js/index.js) ://ecmazing.com/js/index.js （在浏览器的开发工具中打开“Net”面板，查看响应头）

![在此处输入图像描述](../Images/77a5fbef3c31e9845a021cc2669fafd2.png)

但是我的 Markdown 文件*没有*被压缩。

**现场演示：** [http ://ecmazing.com/data.md](http://ecmazing.com/data.md)

![在此处输入图像描述](../Images/70f39a7a8673fbfe576feebc9630693e.png)

如您所见，文件的内容类型*位于*`text/plain`我文件的内容类型列表中。那么，为什么不应用 GZIP 呢？*`.htaccess`*

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:05:57.550*

# javascript - 限制 fullCalendar 中的事件数

> ID：15499045
> 
> 赞同：1
> 
> 时间：2013-03-19T12:05:19.777
> 
> 标签：javascript, ajax, fullcalendar

我在我的项目中使用 fullCalendar。我面临限制一天内事件数量的问题。我找到了 fullCalendar 插件 [https://github.com/lyconic/fullcalendar.viewmore](https://github.com/lyconic/fullcalendar.viewmore)但我无法自定义它，因为它正在发送在ajax中控制一些未知文件“/test/get-events”

```
 events: function(start, end, callback) {
        $.ajax({
          url: '/test/get-events',
          dataType: 'json',
          success: function(data){
            callback(data);
          }
        }); 
```

当我尝试更改 url 以获取我的事件时，fullCalendar 不起作用。

# c# - 使 C# user.config 不依赖于版本

> ID：15499051
> 
> 赞同：4
> 
> 时间：2013-03-19T12:05:39.383
> 
> 标签：c#, app-config

我的 C# 项目使用默认配置事物 ( `Properties > Settings.settings`)，它将配置文件存储在`%userprofile%\AppData\Local\MyApp\MyApp.exe_Url_hashorsomething`. 如果没有最后一个目录，我怎么能做同样的事情，或者最后一个目录不依赖于 exe 名称和哈希（或任何那部分）。

另外，我如何让它存储在漫游而不是本地？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:21:40.033

我没有摆脱“哈希或其他东西”，而是通过`CurrentVersion`在设置中添加一个字符串属性来做到这一点。然后在启动时，我可以调用以下方法：

```
public static void UpgradeSettingsIfRequired()
{
    string version = Assembly.GetEntryAssembly().GetName().Version.ToString();
    if (Settings.Default.CurrentVersion != version)
    {
        Settings.Default.Upgrade();
        Settings.Default.CurrentVersion = version;
        Settings.Default.Save();
    }
} 
```

不过，不知道您将如何将它们移至漫游配置文件。对不起。

# ruby - Ruby 方法可以知道它的名称吗？

> ID：15499063
> 
> 赞同：2
> 
> 时间：2013-03-19T12:06:18.537
> 
> 标签：ruby

有没有办法知道当前在 Ruby 中运行的方法的名称？

**编辑**

例如我可以`self`用来获取当前类。有没有办法获取当前正在运行的方法？有没有一种“神奇的方法”可以做到以下几点？

```
def method1
    p "this method's name is " + magicmethod # => this method's name is method1
end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T12:09:16.780

有`__method__`：

```
class Test
  def testing
    __method__
  end
end 
```

注意`__method__`是 a`Symbol`而不是 a`String`

这至少需要 Ruby 1.8.7。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T12:31:25.410

以下如何：:)

```
p RUBY_VERSION

module Kernel
private
    def method_name
      caller[0] =~ /`([^']*)'/ and $1
    end
end

class Foo
  def test_method
    method_name
  end
end

puts Foo.new.test_method 
```

*输出：*

```
"1.9.3"
test_method 
```

# sql - Songs_tags 表中的标签云 - 多对多关系

> ID：15499064
> 
> 赞同：2
> 
> 时间：2013-03-19T12:06:18.660
> 
> 标签：sql, spring, hibernate, tag-cloud

我的目标，得到这样的 JSON：

```
[{text: "Dolor", weight: 9.4},{text: "Sit", weight: 8},{text: "Amet", weight: 6.2}] 
```

我有三个表标签，歌曲和 Songs_Tags：

```
mysql> SHOW TABLES FROM jmusic;
+-------------------+
| Tables_in_jmusic  |
+-------------------+
| ActivityUsers     |
| Songs             |
| Songs_Tags        |
| Tags              |
| Users             |
| persistent_logins |
+-------------------+

mysql> SHOW COLUMNS FROM Users;
+-------------------+--------------+------+-----+---------+----------------+
| Field             | Type         | Null | Key | Default | Extra          |
+-------------------+--------------+------+-----+---------+----------------+
| idUser            | int(11)      | NO   | PRI | NULL    | auto_increment |
| Name              | varchar(255) | YES  | UNI | NULL    |                |
| Email             | varchar(255) | YES  |     | NULL    |                |
| Password          | varchar(255) | YES  |     | NULL    |                |
| ConfirmationToken | varchar(255) | YES  |     | NULL    |                |
| IsActivatedUser   | tinyint(1)   | NO   |     | 0       |                |
| Role              | int(11)      | NO   |     | 1       |                |
+-------------------+--------------+------+-----+---------+----------------+

mysql> SHOW COLUMNS FROM Tags;
+--------+-------------+------+-----+---------+----------------+
| Field  | Type        | Null | Key | Default | Extra          |
+--------+-------------+------+-----+---------+----------------+
| idTag  | int(11)     | NO   | PRI | NULL    | auto_increment |
| Name   | varchar(45) | NO   | UNI | NULL    |                |
| Usages | int(11)     | YES  |     | 0       |                |
+--------+-------------+------+-----+---------+----------------+

mysql> SHOW COLUMNS FROM Songs_Tags;
+--------------+---------+------+-----+---------+-------+
| Field        | Type    | Null | Key | Default | Extra |
+--------------+---------+------+-----+---------+-------+
| Songs_idSong | int(11) | NO   | PRI | NULL    |       |
| Tags_idTag   | int(11) | NO   | PRI | NULL    |       |
+--------------+---------+------+-----+---------+-------+ 
```

如何？

现在我需要做一些事情来获取表单标签的结构：值。我不知道 SQL，也不知道该怎么做。

是的，我的应用程序分为几层：实体 -> DAO -> 服务。

# http-status-code-404 - Prestashop 404 未找到页面未正确加载

> ID：15499065
> 
> 赞同：1
> 
> 时间：2013-03-19T12:06:18.717
> 
> 标签：http-status-code-404, smarty, prestashop

我在一个 prestashop 网站上工作，几乎就在那里，但由于某种原因，404 页面没有正确显示，我不知道为什么。

[http://www.exclusivetech.co.uk/pagenotfound](http://www.exclusivetech.co.uk/pagenotfound)

谁能解释它为什么会这样做？

这是 PageNotFoundController

```
class PageNotFoundControllerCore extends FrontController
{
    public $php_self = '404';
    public $page_name = 'pagenotfound';

    /**
     * Assign template vars related to page content
     * @see FrontController::initContent()
     */
    public function initContent()
    {
        header('HTTP/1.1 404 Not Found');
        header('Status: 404 Not Found');
        parent::initContent();

        $this->setTemplate(_PS_THEME_DIR_.'404.tpl');
    }

    public function canonicalRedirection($canonical_url = '')
    {
        // 404 - no need to redirect to the canonical url
    }
} 
```

这是 404.tpl，没有碰过它只是他们的默认值。

```
<h1>{l s='Page not available'}</h1>

    <p>
        {l s='Were sorry, but the Web address you entered is no longer available'}
    </p>

    <h3>{l s='To find a product, please type its name in the field below'}</h3>
    <form action="{$link->getPageLink('search')}" method="post" class="std">
        <fieldset>
            <p>
                <label for="search">{l s='Search our product catalog:'}</label>
                <input id="search_query" name="search_query" type="text" />
                <input type="submit" name="Submit" value="OK" class="button_small" />
            </p>
        </fieldset>
    </form>

    <a href="{$base_dir}" title="{l s='Home'}">{l s='Home'}</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:22:19.500

看起来页面页脚由于某种原因具有样式“显示：无”

# listview - 对 ListView<> 中的项目进行排序

> ID：15499066
> 
> 赞同：3
> 
> 时间：2013-03-19T12:06:18.803
> 
> 标签：listview, javafx-2, javafx

我有一个从列表到文本的项目“注册”的简单代码，正在工作

```
 final private KeyCombination ENTER           = new KeyCodeCombination(KeyCode.ENTER);
  final private KeyCombination ESC             = new KeyCodeCombination(KeyCode.ESCAPE);

  final ListView<String> listview = new ListView<>();

    final TextArea textArea = new TextArea();
    textArea.setPrefRowCount(4);
    textArea.addEventFilter(KeyEvent.KEY_PRESSED, new EventHandler<KeyEvent>() {
      public void handle(KeyEvent event) {
        if (ENTER.match(event)) {  
          if (!textArea.getText().trim().isEmpty()) {
            String selectedItem = listview.getSelectionModel().getSelectedItem();
            if (selectedItem != null) {
              if (!selectedItem.equals(textArea.getText())) { 
                listview.getItems().set(listview.getSelectionModel().getSelectedIndex(), textArea.getText());
                listview.getSelectionModel().clearSelection();
                textArea.setText("");
                textArea.clear();
              }
            } else { // create a new item
              listview.getItems().add(textArea.getText());
              textArea.setText("");
              textArea.clear();
            }
            event.consume();
          }
        } else if (ESC.match(event)) {  // cancel edit
          textArea.clear();
          listview.getSelectionModel().clearSelection();
        } 
      }
    }); 
```

  我只是想更改作为寄存器推送的房子，例如，当添加一个项目（项目 5）时，它会进入列表的底部。

![样本](../Images/eda3b31fd471bde9c9088ed70615a43e.png)

我希望它是第一个

有人有任何解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:24:33.560

您可以将项目添加到中的任何位置`ListView`：

```
listView.getItems().add(0, "item at first position"); 
```

# robotium - 如何在设备云中运行用 Robotium 编写的测试脚本？

> ID：15499069
> 
> 赞同：6
> 
> 时间：2013-03-19T12:06:27.160
> 
> 标签：robotium, automated-tests

我想知道是否可以运行我用 Robotium 编写的脚本，以便在像 Perfectomobile 或 Device 任何地方这样的设备云中工作。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:12:32.943

[testdoid](http://testdroid.com/)允许您在云中运行机器人，他们也有自己的机器人扩展来增加功能。我确信还有其他选择，还有许多其他选择支持使用不同框架（如葫芦）的测试。

# android - 未找到 std::string 操作（即 stol、stoi） NDK8d

> ID：15499070
> 
> 赞同：9
> 
> 时间：2013-03-19T12:06:27.430
> 
> 标签：android, android-ndk

我尝试使用支持 c++11 的 ndk r8d 设置我的第一个 android 项目。一些 c+11 机制工作正常（即 lambda 表达式），但是当我尝试使用新的字符串操作之一时，编译失败（错误：'stol' 不是 'std' 的成员）。这是我的项目设置：

应用程序.mk

```
APP_MODULES := MyLib   

APP_CPPFLAGS := -std=gnu++0x  
APP_CPPFLAGS += -frtti
APP_CPPFLAGS += -fexceptions
APP_CPPFLAGS += -DDEBUG   

APP_ABI := armeabi-v7a
APP_PLATFORM:=android-14                      

APP_STL := gnustl_static
APP_GNUSTL_CPP_FEATURES := rtti exceptions

NDK_TOOLCHAIN_VERSION=4.7 
```

这些功能真的不起作用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-15T09:41:52.237

似乎在[另一个线程](https://stackoverflow.com/a/18124627/731722)中得到了回答。

> 您无法使用这些功能的原因是根深蒂固的，不幸的是目前无法解决。

在 GNU STL 中，这些函数的实现以某种方式依赖于 c99（_GLIBCXX_USE_C99 宏），Android 不使用它

> 根本原因似乎是 armeabi-v7a 平台上的 GNU stdlibc++ 中禁用了 C99 功能使用，因为 Bionic libc 不支持复杂的数学（Android 上的标准 C 库是 Bionic）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-29T00:15:07.717

添加：

APP_STL := c++_static

到 Application.mk 为我解决了这个问题（使用 gcc 4.8.4）。

来自此[Google Groups 帖子的](https://groups.google.com/forum/#!topic/android-ndk/pQ2Qv8GPcwA)Daniel Tavares 的解决方案。

# java - 单击通知时开始活动

> ID：15499076
> 
> 赞同：3
> 
> 时间：2013-03-19T12:06:45.447
> 
> 标签：java, android, notifications

我使用以下代码发出通知：

```
NotificationManager nm = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
//Create your notification
int icon = R.drawable.ic_launcher;
CharSequence tickerText = " message";
long when = System.currentTimeMillis();
Notification notification = new Notification(icon, tickerText,when);
Context context = getApplicationContext();
CharSequence contentTitle = last_notifs_array[0][2];
CharSequence contentText = "New Message";
PendingIntent pIntent = PendingIntent.getActivity(notifService.this,0, intent1,0);
notification.setLatestEventInfo(context,contentTitle,contentText,pIntent);
// Send the notification
nm.notify(HELLO_ID,notification); 
```

但是我想在单击通知时开始一项活动。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T12:17:49.703

试试这个：代替**YourActivity** pur 您想要调用的活动

```
NotificationManager nm = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
         // Create your notification
         int icon = R.drawable.ic_launcher;
         CharSequence tickerText = " message";
         Intent notificationIntent
         long when = System
                 .currentTimeMillis();
         Notification notification = new Notification(
                 icon, tickerText,
                 when);
         notificationIntent = new Intent(context,
                    YourActivity.class);
         Context context = getApplicationContext();
         CharSequence contentTitle = last_notifs_array[0][2];
         CharSequence contentText = "New Message";
         PendingIntent pIntent = PendingIntent
                 .getActivity(
                         notifService.this,
                         0, notificationIntent,
                         0);
         notification
                 .setLatestEventInfo(
                         context,
                         contentTitle,
                         contentText,
                         pIntent);
         // Send the notification
         nm.notify(HELLO_ID,
                 notification); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T12:11:11.253

你可以用这个

```
 final NotificationManager notificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
    final Notification notification = new Notification(R.drawable.notification_popup, message, System.currentTimeMillis());
    final PendingIntent contentIntent = PendingIntent.getActivity(context, 0, 
            new Intent(context, YourActivity.class), Notification.FLAG_AUTO_CANCEL);

    notification.setLatestEventInfo(context, title, message, contentIntent);
    notification.defaults = Notification.DEFAULT_ALL;
    notificationManager.notify(yourId, notification); 
```

它应该可以解决您的问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T12:14:22.310

使用此代码，这将像一个魅力。

```
 NotificationManager notificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(icon, message, when);
        String title = "Your application name with notify string.";
        Intent notificationIntent = new Intent(context, GoogleMapActivity.class);

        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
        PendingIntent intent =PendingIntent.getActivity(context, 0, notificationIntent, 0);
        notification.setLatestEventInfo(context, title, message, intent);
        notification.flags |= Notification.FLAG_ONGOING_EVENT;
        notification.flags |= Notification.FLAG_NO_CLEAR;
        notification.flags |= Notification.FLAG_SHOW_LIGHTS;
        notification.flags |= Notification.DEFAULT_LIGHTS;
                notificationManager.notify(0, notification); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T12:10:27.803

声明一个 PendingIntent：

```
Intent intent = ... create intent of your activity here ....
PendingIntent contentIntent = PendingIntent.getActivity(context, 0, intent, PendingIntent.FLAG_ONE_SHOT); 
```

然后只需将参数传递给您的`notification.pendingIntent = contentIntent;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T12:12:26.277

使用下面提到的方法。[`Intent`](https://developer.android.com/reference/android/content/Intent.html) [`setClass`](https://developer.android.com/reference/android/content/Intent.html#setClass%28android.content.Context,%20java.lang.Class%3C?%3E%29)

```
Intent notifyIntent = new Intent(Intent.ACTION_MAIN);
notifyIntent.setClass(getApplicationContext(), Main.class); 
```

# c# - Linq to XML - 根据条件获取值

> ID：15499082
> 
> 赞同：-2
> 
> 时间：2013-03-19T12:07:10.417
> 
> 标签：c#, .net, linq, linq-to-xml

我有一个如下的 XML：

```
<Nodes>
  <Node>
    <A>This is a dummy text {12345}</A>
    <B>Output Value</B>
  </Node>
  <Node>
    <A>This is another dummy text {3462832}</A>
    <B>Output Value</B>
  </Node>
</Nodes> 
```

我正在使用 Linq to XML，如果节点“A”中的文本包含键“12345”，我想选择节点“B”中的输出值

请提供用于实现此目的的 LINQ 查询的输入。

谢谢 ！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T12:33:07.037

这正是你想要的： -

```
var nodes = from n in xml.Descendants("Node")
                         .Where(x => x.Element("A").Value.Contains("12345")) 
            select n.Element("B").Value; 
```

XML 示例：-

```
<?xml version="1.0" encoding="utf-8"?>
<Nodes>
    <Node>
        <A>This is a dummy text {12345}</A>
        <B>Output Value</B>
    </Node>
    <Node>
        <A>This is a dummy text {12345}</A>
        <B>Output Value 2</B>
    </Node>
    <Node>
        <A>This is another dummy text {3462832}</A>
        <B>Output Value</B>
    </Node>
</Nodes> 
```

将返回： -

`Output Value` `Output Value 2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:39:23.580

或者与 LINQ 和 XPath 单行：

```
XDocument xdoc = XDocument.Load(path_to_xml);
var b = (string)xdoc.XPathSelectElement("//Node[contains(A,'12345')]/B"); 
```

这将返回第一个找到的元素匹配条件的值。如果您需要所有匹配项，请改用*XPathSelectElements*。

# ios - 如何访问存储在数组中的对象数据？

> ID：15499084
> 
> 赞同：0
> 
> 时间：2013-03-19T12:07:14.287
> 
> 标签：ios, arrays, uitableview, object

我想获取存储在数组中的对象的数据。但我不知道如何：/

这是我的对象的类类型：

```
#import <Foundation/Foundation.h>

@interface Account : NSObject

@property(strong, nonatomic) NSString *accountNumber;
@property(strong, nonatomic) NSString *accountName;

@end

Account *model = [[Account alloc]init];

    for(int i=0; i<NUMBER_OF_CELL; i++){

        [model setAccountName:[NSString stringWithFormat:@"Account %d",i]];
        [model setAccountNumber:[NSString stringWithFormat:@"Number %d",i]];

        [_accountArray addObject:model];

    } 
```

我在 UITableView 中列出了这个：

```
cell.accountLabel.text = ? 
```

谢谢你的帮助！最好的祝福，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:09:29.133

```
Account *model = [_accountArray objectAtIndex:[indexPath row]];
cell.accountLabel.text = model. setAccountName; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T12:12:39.910

你做错了。帐户对象仅创建一次。这样您就只能看到一个对象。

使用下面的代码。

```
for(int i=0; i<NUMBER_OF_CELL; i++){

    Account *model = [[Account alloc]init];

    [model setAccountName:[NSString stringWithFormat:@"Account %d",i]];
    [model setAccountNumber:[NSString stringWithFormat:@"Number %d",i]];

    [_accountArray addObject:model];

} 
```

并显示数据使用下面的代码：

```
Account *model = [_accountArray objectatIndex:indexpath.row];
cell.accountLabel.text = model.accountName; 
```

希望这会帮助你。

祝一切顺利 ！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T12:09:48.210

可以使用以下代码实现

```
Account *model = [_accountArray objectatIndex:indexpath.row];
cell.accountLabel.text = model. AccountName; 
```

# highcharts - 重复的屏幕外图表

> ID：15499087
> 
> 赞同：1
> 
> 时间：2013-03-19T12:07:22.670
> 
> 标签：highcharts

是否可以有一个与显示版本重复的屏幕外图表？

我想在图表上执行一些动态操作以用于导出目的（调整大小、属性更改等），但这些更改对用户不可见。

我尝试使用 JS 复制图表，但似乎副本仍链接回原始图表，因此所做的任何更改仍在对原始图表进行，而不是对屏幕外图表。

任何意见，将不胜感激。

谢谢，

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:15:27.623

您可以设置其中一些选项仅用于 exporting.chartOptions 中的[导出](http://api.highcharts.com/highcharts#exporting.chartOptions)。

# php - 正则表达式的帮助

> ID：15499088
> 
> 赞同：1
> 
> 时间：2013-03-19T12:07:23.197
> 
> 标签：php, regex

我感到羞耻，但我仍然不清楚一些正则表达式方面。我需要解析包含许多`@"I'm a string"`格式字符串文字的文本文件。我已经编写了简单的模式`/@"([^"]*)"/si`。它工作完美， preg_match_all 返回一个集合。但显然，如果字符串文字包含转义引号（如`@"I'm plain string. I'm \"qouted\" string "`. 任何线索将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:19:35.213

这是 Freidl 的经典“展开循环”的一个用例：（**编辑**固定分组以进行捕获）

```
/"((?:[^"\\]|\\.)*)"/ 
```

这将匹配引用的字符串，同时考虑反斜杠转义的引号。

您将用于匹配字段（包括`@`）的完整正则表达式将是：

```
/@"((?:[^"\\]|\\.)*)"/ 
```

不过要小心！我经常看到人们抱怨这种模式在 PHP 中不起作用，这是因为在字符串中使用反斜杠有点让人心烦意乱。

上述模式中的反斜杠表示需要传递给 PCRE的*文字反斜杠。*这意味着在 PHP 字符串中使用它们时需要对它们进行双重转义：

```
$expr = '/@"((?:[^"\\\\]|\\\\.)*)"/';

preg_match_all($expr, $subject, $matches);

print_r($matches[1]); // this will show the content of all the matched fields 
```

[看到它工作](http://codepad.viper-7.com/FbhMLn)

**它是如何工作的？**

...我听到你问了。好吧，让我们看看我是否可以用一种真正有意义的方式来解释这一点。让我们启用`x`模式，以便我们可以将其间隔一点：

```
/
  @             # literal @
  "             # literal "
    (           # start capture group, we want everything between the quotes
      (?:       # start non-capturing group (a group we can safely repeat)
        [^"\\]  # match any character that's not a " or a \
        |       # ...or...
        \\.     # a literal \ followed by any character
      )*        # close non-capturing group and allow zero or more occurrences
    )           # close the capture group
  "             # literal "
/x 
```

这非常重要的几点是：

*   `[^"\\]|\\.`- 表示每个反斜杠都是“平衡的” - 每个反斜杠都必须转义一个字符，并且不会多次考虑任何字符。
*   将上述内容包装在一个`*`重复的组中意味着上述模式可以无限次出现，并且允许空字符串（如果您不想允许空字符串，请将 更改`*`为 a `+`）。这是“展开循环”的“循环”部分。

**但是输出字符串仍然包含转义引号的反斜杠？**

确实如此，这只是一个匹配过程，它不会修改匹配。但是因为结果是字符串的*内容*，一个简单的`str_replace('\\"', '"', $result)`将是安全的并产生正确的结果。

然而，在做这种事情时，我经常发现我也想处理其他转义序列——在这种情况下，我通常会对结果做这样的事情：

```
 preg_replace_callback('/\\./', function($match) {
     switch ($match[0][1]) { // inspect the escaped character
         case 'r':
             return "\r";

         case 'n':
             return "\n";

         case 't':
             return "\t";

         case '\\':
             return '\\';

         case '"':
             return '"';

         default: // if it's not a valid escape sequence, treat the \ as literal
             return $match[0];
     }
 }, $result); 
```

这给出了与 PHP 中的双引号字符串类似的行为，其中`\t`被替换为制表符，`\n`被替换为换行符等等。

**如果我也想允许单引号字符串怎么办？**

这困扰了我很长时间。我一直有一种琐碎的感觉，认为这可以通过反向引用更有效地处理，但许多尝试都未能产生任何可行的结果。

我这样做：

```
/(?:"((?:[^"\\]|\\.)*)")|(?:'((?:[^'\\]|\\.)*)')/ 
```

如您所见，这基本上只是两次应用基本相同的模式，具有 OR 关系。这也使 PHP 端的字符串提取变得非常复杂：

```
$expr = '/(?:"((?:[^"\\\\]|\\\\.)*)")|(?:\'((?:[^\'\\\\]|\\\\.)*)\')/';

preg_match_all($expr, $subject, $matches);

$result = array();
for ($i = 0; isset($matches[0][$i]); $i++) {
    if ($matches[1][$i] !== '') {
        $result[] = $matches[1][$i];
    } else {
        $result[] = $matches[2][$i];
    }
}

print_r($result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:23:06.553

您需要使用否定的lookbehind - 匹配所有内容，直到找到前面没有反斜杠的引号。这是在java中：

```
public static void main(String[] args) {
    final String[] strings = new String[]{"@\"I'm a string\"", "@\"I'm plain string. I'm \\\"qouted\\\" \""};

    final Pattern p = Pattern.compile("@\"(.*)\"(?<!\\\\)");
    System.out.println(p.pattern());

    for (final String string : strings) {
        final Matcher matcher = p.matcher(string);
        while (matcher.find()) {
            System.out.println(matcher.group(1));
        }
    }
} 
```

输出：

```
I'm a string
I'm plain string. I'm \"qouted\" 
```

模式（没有所有 Java 转义）是：`@"(.*)"(?<!\\)`

# c# - MVC 自定义类型属性在我的模型中未绑定

> ID：15499089
> 
> 赞同：4
> 
> 时间：2013-03-19T12:07:25.743
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, deserialization, model-binding

我有以下场景：AC# 基础项目，包含公司中所有其他项目使用的所有数据域（自定义类型）。所以，修改它有点困难。

现在，我们正在使用该基础项目作为参考创建我们的第一个 mvc 项目，并且模型绑定不适用于这些字符串自定义类型的属性：

```
 [Serializable]
    [TypeConverter(typeof(ShortStrOraTypeConverter))]
    public class ShortStrOra : BaseString
    {
        public ShortStrOra()
            : this(String.Empty)
        {           
        }

        public ShortStrOra(string stringValue)
            : base(stringValue, 35)
        {
        }

        public static implicit operator ShortStrOra(string stringValue)
        {
            return new ShortStrOra(stringValue);
        }

        public static implicit operator string(ShortStrOra value)
        {

            if (value == null)
            {
                return null;
            }
            else
            {
                return value.ToString();
            }
        }

        public void Add(object o)
        { 
        }
    } 
```

类型转换器：

```
 public class ShortStrOraTypeConverter : TypeConverter
    {
        public override bool CanConvertFrom(ITypeDescriptorContext context, Type sourceType)
        {
            if (sourceType == typeof(string))
                return true;
            return base.CanConvertFrom(context, sourceType);
        }

        public override object ConvertFrom(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value)
        {
            if (value is string)
                return new ShortStrOra(Convert.ToString(value));
            return base.ConvertFrom(context, culture, value);
        }

        public override object ConvertTo(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value, Type destinationType)
        {
            if (destinationType == typeof(string))
                return ((ShortStrOra)value).ToString();

            return base.ConvertTo(context, culture, value, destinationType);
        }
    } 
```

在我的简单测试中，对于这个单一的类，Name 属性没有被绑定，但 Lastname 有。

```
public class TesteModel
{

    public ShortStrOra Name {get; set;}
    public String Lastname { get; set; }
    public TesteModel() { }

} 
```

我的观点：

```
@using (Html.BeginForm("EditMember", "Home", FormMethod.Post, new { @id = "frmEditMembers" }))
{
    @Html.TextBoxFor(m => m.Name)<br />
    @Html.TextBoxFor(m => m.Lastname)
    <input type="submit" value="Salvar" />
} 
```

我的控制器：

```
public ActionResult EditMember(TesteModel model)
{
    return View("Index", model);
} 
```

最后，问题出在哪里？序列化？模型绑定？转换器？我不知道该去哪里。没有错误或异常。

有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T13:52:11.623

我找到了。我阅读了自定义模型绑定，然后用这种方法解决了我的问题：

创建一个新类，覆盖模型绑定，并检查属性是否为自定义类型，然后对其进行初始化。

```
public class TesteModelBinder2 : DefaultModelBinder
{
    protected override void BindProperty(ControllerContext controllerContext, ModelBindingContext bindingContext, System.ComponentModel.PropertyDescriptor propertyDescriptor)
    {
          NameValueCollection values = controllerContext.HttpContext.Request.Form;

          if (propertyDescriptor.PropertyType.Equals(typeof(ShortStrOra)))
          {
              ShortStrOra value = new ShortStrOra(values[propertyDescriptor.Name]);
              propertyDescriptor.SetValue(bindingContext.Model, value);
              return;
          }
          else 
            base.BindProperty(controllerContext, bindingContext, propertyDescriptor);
    }
} 
```

解决问题的是这一行：

```
ShortStrOra value = new ShortStrOra(values[propertyDescriptor.Name]); 
```

如果没有它，当尝试在我的 ShortStrOra 类型上设置字符串值时，引擎会抛出 CastException，但它会默默地死去，并且在属性上设置了一个空值。

要在控制器中使用自定义模型绑定器：

```
[HttpPost]
public ActionResult EditMember([ModelBinder(typeof(TesteModelBinder2))]TesteModel model)
    {
        return View("Index", model);
    } 
```

# c# - 从下拉列表中获取值 mvc 4

> ID：15499091
> 
> 赞同：1
> 
> 时间：2013-03-19T12:07:33.440
> 
> 标签：c#, asp.net-mvc-3, razor, asp.net-mvc-4

我来到 Stackoverflow 的智者委员会，因为我需要一些魔法（似乎）来解决我的代码的一个小问题。

我正在尝试从我的下拉列表中接收数据，我尝试了很多咒语……但我觉得我的力量太弱了。我尝试从下拉列表中检索数据导致我的计算机有点恶心。所以我来找你们，希望你们的智慧（甚至是一个词吗？）可以帮助我想出正确的代码来解决这个问题。

这是我的代码的样子

模型（对于模型来说不是很漂亮）：

```
namespace HouseGaurd.Models
{
    public class DropList
    {
        public SelectList LettingList { get; set; }
    } 
```

控制器填满列表：（这是 Httpget）

```
 public ActionResult lettingselect()
    {
         var model = _db.EstateAgents;
        DropList rlist = new DropList();
        List<SelectListItem> listItems = new List<SelectListItem>();
        foreach (var item in model)
        {

            listItems.Add(new SelectListItem()
            {
                Value = item.estateAgentID.ToString(),
                Text = item.CompanyName
            });
        }
        rlist.LettingList = new SelectList(listItems, "Value", "Text");
        return View(rlist);
    } 
```

所以这填充了列表，这是显示的模型，到目前为止一切正常，咒语成立：

```
<h2>Select a </h2>
@using (Html.BeginForm()) {

@Html.DropDownList("product", Model.LettingList)
  <p>
        <input type="submit" value="select" />
    </p>
} 
```

它使用相关信息填充下拉列表！

现在，当我点击提交并返回 POST 控制器时，这就是计算机开始呕吐的时候：

```
[HttpPost]
    public ActionResult lettingselect(DropList viewModel)
    {           
        using (var context = new HouseDB())
        {
            var agent = viewModel.LettingList.DataTextField; //null reference
            var hID = context.HouseListers.Single(d=>d.user == User.Identity.Name);
            var let = new Letting();
            let.approved = false;
            let.user = User.Identity.Name;
            let.lettingAgent = agent;
            let.houseID = hID.houseID;
            let.noProblemsRaised = 0;

            context.Lettings.Add(let);
            context.SaveChanges();
        }
        return RedirectToAction("Complete");
    } 
```

我正在尝试取回所选值，我尝试使用：

```
 var agent = viewModel.LettingList.DataTextField; //null reference 
```

但正如代码中所述，这会返回一个空引用异常。

聪明的巫师们，请花点时间与我分享您关于如何最好地解决这个问题的智慧。

非常感谢。学徒法师。

编辑：这是实际错误：

```
Object reference not set to an instance of an object. 
```

这是视图中的模型

```
@model HouseGaurd.Models.DropList 
```

这会导致问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-30T14:37:31.277

模型：

```
public SelectList List{ get; set; } 
```

控制器：

```
public ActionResult lettingselect()
{
     var model = _db.EstateAgents;
    DropList rlist = new DropList();
    List<SelectListItem> listItems = new List<SelectListItem>();
    foreach (var item in model)
    {

        listItems.Add(new SelectListItem()
        {
            Value = item.estateAgentID.ToString(),
            Text = item.CompanyName
        });
    }
    ViewData["List"] = listItems;
    return View(rlist);
 } 
```

看法：

```
 @Html.DropDownList("List", ViewData["List"] as SelectList) 
```

您可以访问控制器中的下拉选择值。我希望它对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T12:14:04.667

在模型中创建一个属性来保存下拉值，例如：

```
public int EstateAgentID {get;set;} 
```

并将您的 DropDownList 更改为 DropDownListFor。喜欢，

```
@Html.DropDownListFor(model=>model.EstateAgentID , Model.LettingList) 
```

在您的让选择方法中：

```
var agent = viewModel.EstateAgentID ; 
```

**编辑：：**您还可以使用下拉列表的名称获取下拉值。为此，请执行以下操作：

将您的方法更改为

```
public ActionResult lettingselect(DropList viewModel,string product)//product is the name of your dropdown 
```

这里**产品**是您选择的项目

# arraylist - 在二维 ArrayList 中初始化元素构造函数

> ID：15499092
> 
> 赞同：0
> 
> 时间：2013-03-19T12:07:34.287
> 
> 标签：arraylist, initialization

```
public class Build_Cells extends Loop {
private List<List<Cell>> map = new ArrayList<List<Cell>>();
public Build_Cells(){
}
public Build_Cells( int height, int width , int cell_size ){
    int col = height / cell_size;
    int rows = width / cell_size;
    for( int y = 0; y < col ; y++){
        map.add(y, new ArrayList<Cell>(rows));
    }
} 
```

};

在最后一行代码中：map.add(y, new ArrayList(rows)); 我希望它为 ArrayList（行）中的每个元素运行 Cell 的构造函数 Cell() - 但我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:12:58.683

您创建列表列表和其中的所有列表。但不是实际的 Cell 对象。尝试这个：

```
for( int y = 0; y < col ; y++){
    List<Cell> colObj = new ArrayList<Cell>(rows);
    map.add(y, colObj);
    for( int x = 0; x < rows ; x++){
        colObj.add( new Cell() );
    }
} 
```

# css - 流体布局：用户将下载什么图像？

> ID：15499094
> 
> 赞同：3
> 
> 时间：2013-03-19T12:07:42.383
> 
> 标签：css, responsive-design, fluid-layout

再会

我在 Twitter Bootstrap 中使用流畅的布局。现在我使用的是 1280*720 的图像。现在，当用户的手机屏幕为 960px 及以下时，图像显然会被调整大小。

现在，当您调整屏幕大小（或在较小的屏幕上查看）时，您将在检查元素代码中看到图像具有尺寸和另一个尺寸 nl：（自然：1280px * 720px）。所以很明显，自然大小是服务器上的原始图像大小..

**我的问题：**当用户使用使用流体属性的移动设备查看图像时，会下载原始图像然后调整大小，还是将调整大小的图像下载到他的手机？所以基本上 - 与桌面用户相比，使用移动设备的用户会下载更小的图像（如果它是相同的图像/服务器上的一个图像）？

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:10:44.137

他们将获得完整尺寸的图像，这不是最好的想法表现。

我在我的项目中使用了 Matt Willcox 的 Adaptive Images 脚本来解决这个问题。

[http://adaptive-images.com/](http://adaptive-images.com/)

这是一个基于 PHP 的解决方案，因此可能不适合您的需求，但它是一个很好的工具。

另一种选择是根据屏幕尺寸或设备检测提供较小的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T12:09:53.543

他们将下载完整尺寸的图像，并在他们的设备上重新调整大小。

自然大小是指下载的图像（即正在显示的图像）的自然大小

# javascript - Coffeescript - 一起使用'this'函数参数

> ID：15499105
> 
> 赞同：3
> 
> 时间：2013-03-19T12:08:23.530
> 
> 标签：javascript, syntax, coffeescript

我是初学者网络编程，我正在从[documentaion](http://coffeescript.org/)学习 CoffeeScript ，但我并不完全理解。现在我有一个问题：如果我有`javascript`这样的

```
bindCallback.apply(this, arguments); 
```

我该如何重写`Coffeescript`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:14:26.047

您可以删除分号：

```
bindCallback.apply(this, arguments) 
```

括号也可以去掉：

```
bindCallback.apply this, arguments 
```

`this`也被别名`@`为：

```
bindCallback.apply @, arguments 
```

# neural-network - 使用以下之一进行 Encog 归一化

> ID：15499113
> 
> 赞同：4
> 
> 时间：2013-03-19T12:08:47.223
> 
> 标签：neural-network, normalization, encog

我对数据集的规范化有疑问。我们正在做一项学校作业，我们必须在其中理解数据集并对新示例进行分类。我们有一些可用的数据集，它们是原始数据的压缩形式。我们尝试使用最小的数据集，只是为了掌握 ANN。

该数据集由 8 列数据和 1 列用于理想值组成。数据列都是浮点值，理想值是整数。如果该行属于该类，则理想字段为 1，否则为 0。但是在*AnalystNormalizeCSV上应用**normalize()*时，理想字段将转换为两个字段。

 *现在，假设一个简单的前馈神经网络。*我需要一两个输出神经元吗？*

当我使用 1 个神经元和 1 个作为理想场的数量时，它似乎有效，但在 60% 左右徘徊。当我使用 2 个输出神经元和 1 个作为理想场的数量时，我在 Propagation.iteration() 中得到一个 ArrayOutOfBoundsException。当我们使用 2 作为输出神经元和理想场的数量时，它可以工作，但又会停留在 60% 左右。中间选项似乎是理智的，因为实际上有 1 个理想场，标准化后有 2 个理想场，因此有 2 个输出神经元。

默认

在此先感谢，克里斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T14:26:54.060

如果您使用“一个”标准化，那么您确实需要两个。你有两个班级。您可以只用一个输出神经元对此进行建模，但它更像是一种回归（预测一个数字）而不是分类（哪个类）。*

# mongodb - Mongo 和 Pivot

> ID：15499115
> 
> 赞同：4
> 
> 时间：2013-03-19T12:08:50.877
> 
> 标签：mongodb, pivot

在这个问题上我需要 mongo 的帮助：我有收集统计​​信息 (UserId, EventId, Count, Date) in collection are data

## 用户名 | 事件ID | 计数 | 日期

```
1     |     1    |    10  |   01.01.2012
1     |     1    |   15   | 01.02.2012
1     |     2    |   12   | 01.01.2012
2     |     1    |    5   |   01.01.2012
3     |     2    |    10  |   01.01.2012 
```

我需要这个结果

## 用户名 | Count_Event_1 | Count_EventId_2

```
 1     |     25          |      12         
  2     |     5           |      0
  3     |     0           |      10 
```

在没有 Map Reduce 的情况下，它可以在 Mongo 中使用吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T09:10:16.183

使用`aggregate()`!

我们将使用 a`$project`为每个事件创建一个计数器字段，如果事件匹配，则填写文档中的计数，否则为零。然后我们将`$group`通过 user-id，汇总所有事件计数器。

为了解释起见，让我首先展示在您的示例中，这对于两个不同的事件（1 和 2）是如何硬编码的：

```
db.xx.aggregate([
    { $project: { userid:1,
                  cnt_e1: { $cond: [ { $eq: [ "$event", 1 ] }, "$count", 0 ] },
                  cnt_e2: { $cond: [ { $eq: [ "$event", 2 ] }, "$count", 0 ] },
    } },
    { $group: { _id: "$userid", cnt_e1: { $sum: "$cnt_e1" }, cnt_e2: { $sum: "$cnt_e2" } } },  
    { $sort: { _id: 1 } },
]) 
```

对于给定的集合：

```
> db.xx.find({},{_id:0})
{ "userid" : 1, "event" : 1, "count" : 10 }
{ "userid" : 1, "event" : 1, "count" : 15 }
{ "userid" : 1, "event" : 2, "count" : 12 }
{ "userid" : 2, "event" : 1, "count" : 5 }
{ "userid" : 3, "event" : 2, "count" : 10 } 
```

结果是：

```
{
    "result" : [
        {
            "_id" : 1,
            "cnt_e1" : 25,
            "cnt_e2" : 12
        },
        {
            "_id" : 2,
            "cnt_e1" : 5,
            "cnt_e2" : 0
        },
        {
            "_id" : 3,
            "cnt_e1" : 0,
            "cnt_e2" : 10
        }
    ],
    "ok" : 1
} 
```

要为可变事件完成此操作，我们必须生成投影和分组。我们将使用该命令获取所有可能事件的数组`distinct()`（您可能希望在“事件”上定义一个索引）。然后我们通过遍历数组将这两个语句创建为 JSON 对象：

```
project = {};
project.$project = {};
project.$project.userid = 1;

group = {};
group.$group = {};
group.$group._id = '$userid'

events = db.xx.distinct( "event" );
events.forEach( function( e ) {
    field = "cnt_e" + e;

    eval("project.$project." + field + " = {}");
    eval("project.$project." + field + ".$cond = []");
    eval("project.$project." + field + ".$cond[0] = {}");
    eval("project.$project." + field + ".$cond[0].$eq = []");
    eval("project.$project." + field + ".$cond[0].$eq[0] = '$event'");
    eval("project.$project." + field + ".$cond[0].$eq[1] = " + e );
    eval("project.$project." + field + ".$cond[1] = '$count'");
    eval("project.$project." + field + ".$cond[2] = 0");

    eval("group.$group." + field + " = {}");
    eval("group.$group." + field + ".$sum = '$" + field + "'");
});

//printjson(project);
//printjson(group);

db.xx.aggregate([
    project,
    group,
    { $sort: { _id: 1 } },
]) 
```

结果和上面一样。

注意：以上适用于数字事件。如果它们是字符串，则必须调整生成器。

乍一看，这可能看起来比 @Philipp 的 mapReduce 更复杂。但这不会返回每个用户的所有事件 - 只有那些确实有计数的事件。对于完整的垂直到水平映射，您还必须生成 map 和 reduce 函数。

有关聚合（）的更多信息，请参阅[http://docs.mongodb.org/manual/aggregation/](http://docs.mongodb.org/manual/aggregation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:26:50.237

您必须使用[MapReduce](http://docs.mongodb.org/manual/applications/map-reduce/)操作来执行此操作。

您的地图功能将如下所示：（未经测试！）：

```
var mapFunction = function() {
                   var ret = {};
                   ret["Count_Event_" + this.EventId] = this.Count;
                   emit(this.UserId, ret);
               }; 
```

这会发出一系列由 UserId 和一个对象组成的对，该对象具有一个以计数作为值的不同名称属性。

然后，您的 reduce 函数会将结果合并为一个（未经测试 - 我不确定您是否可以只增加一个不存在的属性，我现在无法对其进行测试）：

```
var reduceFunction = function(UserId, values_array) {
                   var ret = {};

                   for (var i = 0; i < values_array.length; i++) {
                       var values = values_array[i];
                       for (key in values) {
                           ret[key] += values[key]; // Can you increment a non-existing attribute? Not sure, try it, please.
                       }
                   }                       

                   return ret;
               }; 
```

然后你这样称呼它：

```
 db.yourCollection.mapReduce(
                 mapFunction,
                 reduceFunction,
                 out: { inline: 1 }
               ) 
```

该行将`out: { inline: 1 }`结果输出到控制台。通常你使用 MapReduce 来创建一个带有结果的新集合。有关更多信息，请参阅[文档](http://docs.mongodb.org/manual/reference/method/db.collection.mapReduce/#db.collection.mapReduce)。

# zend-framework - Zend_Mail generateMessage() 导致致命错误：在非对象上调用成员函数 getContent()

> ID：15499118
> 
> 赞同：3
> 
> 时间：2013-03-19T12:08:58.330
> 
> 标签：zend-framework, zend-mail

我正在使用`Zend_Mail_Transport_Smtp`. 发送部分工作正常，但是，我正在努力尝试将电子邮件复制到发送电子邮件帐户的“已发送”文件夹。从 Zend_Mail 生成消息时，我不断收到`Call to a member function getContent() on a non-object.`

这是我正在做的事情：

```
$config = array(
            'auth' => 'login',
            'username' => $from,
            'password' => $password);

$transport = new Zend_Mail_Transport_Smtp('smtp.123-reg.co.uk', $config);
Zend_Mail::setDefaultTransport($transport);
$mail = new Zend_Mail('utf-8');

$mail->addTo('foo@bar.com');
$mail->setSubject('Test');
$mail->setFrom('baz@bar.com', 'Baz');
$mail->setBodyText('This is the email');

$mail->send();

**$message = $mail->generateMessage(); <----- here is the problem**

*This is where I would append the message to the sent folder.*
$mail = new Zend_Mail_Storage_Imap
            array('host' => 'imap.123-reg.co.uk',
            'user' => 'baz@bar.com',
            'password' => 'p'
        ));
$mail->appendMessage($message,'Sent'); 
```

我不确定我是否遗漏了任何东西或完全错误地这样做。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:23:03.260

好的，我找到了解决问题的方法。Zend_mail 是错误的/不完整的，因为它实际上并没有从 Zend_mail 对象创建一个字符串（至少在 ZF1 中是这样）。

我的解决方案可能不是最优雅的，但至少是它的工作解决方案。我最终使用了 Swift Mailer——它在发送电子邮件方面非常优雅（它只处理发送电子邮件——而不是 IMAP 的东西）。一旦你使用 swift 创建了一条消息——调用 toString() 方法——那么你就可以使用 Zend_mail 的 appendMessage()。我从 rixtsa 在[http://php.net/manual/en/function.imap-append.php](http://php.net/manual/en/function.imap-append.php)的帖子中得到了解决方案。也许ZF2没有这个问题，但是如果你在ZF1上你可以使用这个方法。

```
 // create the message
        $message = Swift_Message::newInstance()
                ->setSubject('The subject')
                ->setFrom(array('a@b.com'=> 'Alfa Beta'))
                ->setTo(array('recipient1@r.com','recipient2@r.com'))
                ->setBody('The body is here= could be')
                ->addPart('<q>If you want html body use this method/q>', 'text/html')
        ;
   //send the message
        $transport = Swift_SmtpTransport::newInstance('smtp.123-reg.co.uk', 25)
                ->setUsername($user)
                ->setPassword($password)
        ;
    $mailer = Swift_Mailer::newInstance($transport);
    $result = $mailer->send($message);

   // generate the string from the message
   $msg = $message->toString();

   // use the string with Zend_Mail_Storage_Imap's appendMessage()
   $mail = new Zend_Mail_Storage_Imap(
                    array('host' => 'imap.123-reg.co.uk',
                        'user' => $user,
                        'password' => $password
            ));
    $mail->selectFolder('Sent');
    $mail->appendMessage($msg); 
```

我希望有人能找到一个更好、更优雅的解决方案——甚至更好——解决这个错误。但是现在，经过大量阅读和搜索，我最终使用 Swift Mailer 来弥补差距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-22T12:14:07.450

您可以自己构建消息字符串

```
//...send the e-mail, then copy it on Sent folder using this code:
$mail = new Zend_Mail_Storage_Imap(array(
        'host'     => 'imap.123-reg.co.uk',
        'user'     => 'baz@bar.com',
        'password' => 'p'
));
$mail->appendMessage($transport->header . Zend_Mime::LINEEND . $transport->body,'Sent'); 
```

# c++ - 静态库 (OGDF) 中体系结构的未定义符号

> ID：15499119
> 
> 赞同：1
> 
> 时间：2013-03-19T12:08:59.257
> 
> 标签：c++, xcode, gcc, undefined-symbol, ogdf

我正在使用 Xcode 将[OGDF](http://www.ogdf.net/)添加到我的 C++ 项目中。这是一个静态 .a 库，在从源代码编译后，我已成功将其添加到编译源代码，设置正确的搜索路径，一切正常，直到我包含例如`"ogdf/basic/Graph.h"`. 当我尝试使用此包含构建时，链接器在库内部文件上给我错误，说没有标准函数，如`"std::cout",`or `std::basic_ostream<char, std::char_traits<char> >& std::endl<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&)`。

它看起来像这样： ![在此处输入图像描述](../Images/ff9019f55a6fc821898b8ad71f6beadd.png) 这很奇怪，因为我相信存在这样的函数，而且我不相信 OGDF 开发人员在他们的代码中有任何错误。那么实际上是什么导致了这个错误呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:43:07.620

你想用 CLang 编译你的代码吗？尝试切换到 GCC。我认为你的 lib 版本是特定于 GCC 的。

# iphone - 选择器“JSONValue”没有已知的实例方法

> ID：15499126
> 
> 赞同：1
> 
> 时间：2013-03-19T12:09:37.297
> 
> 标签：iphone, ios, objective-c, json, mkmapview

如何解决上述错误？

我使用以下代码使用 google maps api 从地址字符串中获取 latlong

```
- (CLLocationCoordinate2D) geoCodeUsingAddress:(NSString *)address
{
  double latitude = 0.0;
  double longitude = 0.0;

  NSString *esc_addr =  [address stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
  NSString *req = [NSString stringWithFormat:@"http://maps.google.com/maps/api/geocode/json?sensor=false&address=%@", esc_addr];

   NSDictionary *googleResponse = [[NSString stringWithContentsOfURL: [NSURL URLWithString: req] encoding: NSUTF8StringEncoding error: NULL] JSONValue];

  NSDictionary    *resultsDict = [googleResponse valueForKey:  @"results"];   // get the results dictionary
  NSDictionary   *geometryDict = [resultsDict valueForKey: @"geometry"];   // geometry dictionary within the  results dictionary
  NSDictionary   *locationDict = [geometryDict valueForKey: @"location"];   // location dictionary within the geometry dictionary

  NSArray *latArray = [locationDict valueForKey: @"lat"];
   NSString *latString = [latArray lastObject];     // (one element) array entries provided by the json parser

  NSArray *lngArray = [locationDict valueForKey: @"lng"];
  NSString *lngString = [lngArray lastObject];     // (one element) array entries provided by the json parser

 CLLocationCoordinate2D location;
 location.latitude = [latString doubleValue];// latitude;
 location.longitude = [lngString doubleValue]; //longitude;

  return location;
} 
```

在里面

```
NSDictionary *googleResponse = [[NSString stringWithContentsOfURL: [NSURL URLWithString: req] encoding: NSUTF8StringEncoding error: NULL] JSONValue]; 
```

行，我收到错误**Automatic Reference Counting Issue: No known instance method for selector 'JSONValue'**

我的项目使用 ARC。

如何解决该错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T12:16:12.963

`JSONValue`来自添加在 之上的类别`NSString`。为了使用通过类别添加的方法，您需要包含相应的标题。在这种情况下，缺少的标头可能是

```
#import <SBJson/SBJson.h> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T12:13:18.100

`NSString`没有一个名为的方法`JSONValue`（你为什么假设它有？）。也许您应该使用`NSJSONSerialization`该类将字符串解析为`NSDictionary`和/或`NSArray`数据结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T12:28:40.117

我已经解决了这个问题......

执行以下步骤..

1）转到构建阶段->编译源。

2）为所有与JSON相关的文件设置标志-fno-objc-arc。

3）清理项目并再次构建它。

此错误是由于 ARC 造成的。因为我们的 JSON 套件在您使用 ARC 时具有自动释放功能。无论如何，希望这对您有所帮助。祝您好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T12:49:57.343

看起来你需要臭名昭著的 SBJson 图书馆。

```
[[NSString stringWithContentsOfURL: [NSURL URLWithString: req] encoding: NSUTF8StringEncoding error: NULL] JSONValue]; 
```

需要在 SBJson 库中找到的 NSString 类别。

不要忘记为其类禁用弧。

# google-checkout - google checkout 沙盒买卖双方账户

> ID：15499128
> 
> 赞同：1
> 
> 时间：2013-03-19T12:09:44.813
> 
> 标签：google-checkout

我是为我的客户实施 Google 结帐支付网关的开发人员。 当我转到以下 URL 时，我在为买家
[https://sandbox.google.com/checkout和卖家创建测试帐户时遇到问题。](https://sandbox.google.com/checkout)沙盒买家帐户[https://sandbox.google.com/checkout](https://sandbox.google.com/checkout)

将出现以下错误：503。这是一个错误。您请求的服务目前不可用。服务错误-27。我们知道的就这些。

我也有一个 gmail 帐户。我可以用它来制作沙盒买家和卖家帐户吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:21:26.370

我今天面临同样的问题。

经过几次尝试和一些猜测，我得到了它的工作。

而不是[https://sandbox.google.com/checkout](https://sandbox.google.com/checkout)，请转到此链接：[https ://sandbox.google.com/checkout/](https://sandbox.google.com/checkout/)

唯一的区别是第二个链接有一个额外的正斜杠。

希望能帮助到你。

谢谢你。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:24:49.457

我已经检查了您提到的链接。由于某些原因会发生此错误。
原因可能如下：

1.  由于互联网连接缓慢。
2.  您需要在新标签页中的同一浏览器上登录 Gmail。
3.  你有没有把 URL 刷新两三次试试看。

可能这些问题与你同在。因此，请再次尝试访问此 URL。

如需更多帮助，请查看此链接：[Google_Checkout_Basic_HTML_Sandbox](https://developers.google.com/checkout/developer/Google_Checkout_Basic_HTML_Sandbox)

# ruby-on-rails - 狂欢内化 default_locale 保持：en

> ID：15499130
> 
> 赞同：2
> 
> 时间：2013-03-19T12:09:49.627
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, spree

[狂欢 I18n](http://guides.spreecommerce.com/i18n.html#the-default-locale)

> 2.3 设置默认语言环境
> 
> Spree 的默认语言环境是 en。这可以通过编辑 AppConfiguration 模型中的 :default_locale 设置来更改。除非相关的翻译文件位于 #{Rails.root}/config/locales 或 spree_i18n gem 中，否则此设置将被忽略。将来我们希望添加一个本地化设置页面，允许您从管理屏幕设置默认语言环境。

我制作了一个新应用程序，安装了 spree，将 gem 'spree_i18n' 添加到 Gemfile。将 hu-Hu.yml 文件添加到 config/locales，但无法将 Hugnarian 翻译设置为默认值。

我什至试图这样做：

```
 rails c
 irb(main):001:0> I18n.default_locale = :hu
 => :hu 
```

我的模型目录中没有 app_configuration.rb。

问：我应该在哪里设置 default_locale？

编辑：如果我在 application.rb 中设置

```
 config.i18n.default_locale = :hu 
```

我收到如下错误：

![在此处输入图像描述](../Images/90af2122e608bce5e901d54dbfc2db6b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T14:31:08.293

确保将正确的语言环境名称分配给`config.i18n.default_locale`如下`config/application.rb`：

```
config.i18n.default_locale = :hu 
```

以及 config/locales 中的翻译文件，例如

```
config/locales/spree_i18n.hu.yml 
```

如果这个文件的内容看起来正确 - 在顶部，翻译树应该以`hu:`

当然，以上所有路径都是相对于项目树的根目录的。

**更新：** 官方 spree_i18n 来源中似乎缺少匈牙利语（？）的翻译文件。我刚刚在[https://github.com/minktom/spree_i18n](https://github.com/minktom/spree_i18n/blob/master/config/locales/hu.yml)找到了一个，如上所述保存它，希望你已经准备好了。

# actionscript-3 - 在 textarea 上禁用滚动

> ID：15499133
> 
> 赞同：0
> 
> 时间：2013-03-19T12:10:01.687
> 
> 标签：actionscript-3, apache-flex

我有一个包含一些内容和链接的文本区域。

当我使用这个

```
textarea.mx_internal::getTextField().mouseEnabled = false;
textarea.mx_internal::getTextField().mouseWheelEnabled = false; 
```

滚动被禁用，这就是我想要实现的。

但是texarea也有一些html链接，它们也变得不可点击。

如何实现 textarea 的活动链接在 mouseclick 上正常工作的情况，但 textarea 不应该通过鼠标滚轮滚动。

该问题仅出现在 mac 中，而不出现在 windows 中。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:16:18.837

我得到了我的情况的解决方案。这里是。

```
 textarea.mx_internal::getTextField().enabled=true;
    textarea.mx_internal::getTextField().mouseWheelEnabled = false;  

    textarea.addEventListener(MouseEvent.MOUSE_WHEEL,
    function(event:MouseEvent):void{callLater(setScroll,new Array(textarea));});

    function setScroll(field:TextArea):void{
        field.verticalScrollPosition = 0;
    } 
```

# java - Windows 批处理文件 - 检查 JAVA_HOME 是否包含 java 7

> ID：15499134
> 
> 赞同：2
> 
> 时间：2013-03-19T12:10:16.227
> 
> 标签：java, windows, batch-file, java-7

有没有办法在 Windows 批处理文件中确定`JAVA_HOME`环境系统变量是否包含 Java 7？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T12:16:21.377

由于您已将问题标记为[批处理文件](/questions/tagged/batch-file "显示标记为“批处理文件”的问题")，因此我假设您想在批处理文件中执行此操作。

批处理文件来检查这个

```
@echo off
"%JAVA_HOME%"\bin\java -version:1.7 -version > nul 2>&1
if %ERRORLEVEL% == 0 goto found
echo NOT FOUND
goto end

:found
echo FOUND
:end 
```

如果 %JAVA_HOME% 中的 java 是 java 7，我刚刚打印了批处理文件，如果不是 java 7，则打印 NOT FOUND。您可以根据需要调整批处理文件。

java -version:1.7 如果是 java 7，则向 shell 返回一个成功（0）。否则它返回一个失败（非零）。您可以使用`ERRORLEVEL`来检查返回值并确定上一个命令返回的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:12:56.453

打开 cmd 并检查是 JAVA_HOME 点：

```
echo %JAVA_HOME% 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T12:15:16.857

如果你想检测安装的java版本，你应该解析“java -version”的结果。JAVA_HOME 只是安装目录

# ios - 减小图像大小直到给定值 ios

> ID：15499135
> 
> 赞同：0
> 
> 时间：2013-03-19T12:10:24.307
> 
> 标签：ios, image, core-data, image-processing, resize

```
UIImage *image = [UIImage imageNamed:@"anyImage.png"];

NSData *data = UIImageJPEGRepresentation(image, 0.032);

UIImage *newImage = [UIImage imageWithData:data]; 
```

我发现这种图像尺寸减小了，但我的问题是我只需要存储 100kb 的图像。在我的库中，我有 8159064kb 的图像，通过这种方法可以减少到 141258kb。请告诉我一种将图像大小减小到 100kb 的方法，无论大小将其转换为 100kb。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:33:02.723

你应该调整它的大小，`image.size`这样它就可以将你的大图像缩小到 100k

你可以做一个`UIImage`类别

像`UIImage(Resize)`

```
+(UIImage*)imageWithImage:(UIImage*)image andWidth:(CGFloat)width andHeight:(CGFloat)height
{
    UIGraphicsBeginImageContext( CGSizeMake(width, height));
    [image drawInRect:CGRectMake(0,0,width,height)];
    UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return newImage;
} 
```

然后`while`循环调整图像大小以适应 <= 100KB

```
NSData *data = UIImagePNGRepresentation(_yourImage);
while (data.length / 1000 >= 100) {
    _yourImage = [UIImage imageWithImage:_yourImage andWidth:image.size.width/2 andHeight:image.size.height/2];
    data = UIImagePNGRepresentation(_yourImage);
}

// _yourImage is now reduce the size which is <= 100KB 
```

# iphone - 目前无权在沙盒中的应用程序中购买此内容

> ID：15499139
> 
> 赞同：9
> 
> 时间：2013-03-19T12:10:34.933
> 
> 标签：iphone, ios, in-app-purchase

我收到以下沙盒测试错误...如何避免此错误：-您目前无权在沙盒中的应用程序中购买此商品

# c# - 如何使用 JSON.NET 在验证错误中显示行号？

> ID：15499141
> 
> 赞同：3
> 
> 时间：2013-03-19T12:10:46.133
> 
> 标签：c#, .net, json, json.net

我使用官方文档中的这个[示例](http://james.newtonking.com/projects/json/help/index.html?topic=html/JTokenIsValidWithMessages.htm)作为我的代码的基础。

我正在验证这样的 json 字符串：

```
 var jsonText = File.ReadAllText(fileName);
        var schema = JsonSchema.Parse(File.ReadAllText("schema.jsonschema"));
        var jObj = JsonConvert.DeserializeObject(jsonText) as JObject;

        IList<string> messages;
        if (!jObj.IsValid(schema, out messages))
        {
            foreach (var message in messages)
            {
                Console.WriteLine(message);
            }
        } 
```

这可行，但我收到的错误消息不包含有问题的行号，例如：

```
类型无效。预期字符串，但得到整数。
```

链接的示例表明消息中应该有一个行号，但没有。也许此功能已被删除或需要设置标志？如果可能，我希望输出包含行号和模式项的描述属性。

# asp.net - 动态链接按钮单击事件未触发

> ID：15499143
> 
> 赞同：0
> 
> 时间：2013-03-19T12:10:49.310
> 
> 标签：asp.net

我的问题是我在动态创建的单元格中创建动态链接按钮。它工作正常，但动态链接按钮的点击事件处理程序没有触发。我在互联网上进行了足够的搜索，但没有任何结果..我调用了 3 个方法页面加载。最后一个方法本身正在调用创建我的动态链接按钮的方法..但是点击事件仍然没有触发......即使 oninit 也不会工作，因为我的项目结构是这样的。还有其他解决方案吗.

**编辑**

```
 protected void viewFullLessonPlan()
       {
         for (int j = 0; j < 8; j++)
        {
            Label lbl;
            LinkButton lnk;
            TableRow tRow = new TableRow();
            for (int i = 0; i < 6; i++)
            {
                TableCell tCellLessonPlan = new TableCell();
                lbl = new Label();

                lnk = new LinkButton();

                   lbl.Text = dsperiodOfSub.Tables[0].Rows[0]["SubjectName"].ToString();
                    tCellLessonPlan = createCell(tCellLessonPlan.Text, "Periods");
                    tCellLessonPlan.Controls.Add(lbl);
                    lnk.Text = "Details";
                    lnk.Click += new System.EventHandler(this.LinkButton_Click);

                    tCellLessonPlan.Controls.Add(lnk);
                }

                tRow.Cells.Add(tCellLessonPlan);

            }
            tbllesson.Rows.Add(tRow);
        }

    protected void LinkButton_Click(object sender, EventArgs e)
    {
        LinkButton lnk = (LinkButton)sender;
        //some logic here
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:32:13.417

用这个-

```
lnk.Click += new EventHandler(lnk_Click); 
```

你的事件处理程序看起来像 -

```
void lnk_Click(object sender, EventArgs e)
{

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T06:15:41.550

只需在您的链接中添加一个 ID：

```
 lnk.ID = "lnk-" + j + "-" + i; 
```

还要确保您没有在 !Page.IsPostBack 中创建链接

# ms-access - Ms Access DBMS 还是 RDBMS？

> ID：15499145
> 
> 赞同：3
> 
> 时间：2013-03-19T12:11:01.983
> 
> 标签：ms-access, rdbms, database

是女士访问 DBMS 还是 RDBMS？我也在谷歌上找到这个问题的答案，但是在一些网站或博客中说它是 DBMS 而其他人说它是 RDBMS .. 那么正确答案是什么？请理解为什么它是 DBMS 或 RDBMS？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T12:24:05.490

`Relational Database Management System`因此`RDBMS`，MS Access 是一个`DBMS`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-17T21:28:21.137

**简短的回答**：两者都有。

**详情**：

Microsoft Access 是一个 DBMS，但还有更多：**个人数据库系统**。也就是说，一个 DBMS*加上*一个应用程序生成器。虽然 Microsoft Access 包含创建、处理和管理数据库的 DBMS 引擎，但它还包含作为 Microsoft Access 应用程序生成器的表单、报告和查询组件。

**来源**：

第 13 页

数据库处理：基础、设计和实现

大卫 M. 克伦克、大卫 J. 奥尔

第十二版

ISBN13：9780132145374

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-27T15:36:43.633

Microsoft Access 是一种应用程序开发工具，而不是 DBMS 或 RDBMS。

Access 应用程序与 Jet/ACE 捆绑在一起（但与之不同），Jet/ACE 是一个通过文件系统或通过 ODBC 共享数据的系统。原则上，这可以包括访问关系或非关系数据库。Jet/ACE 不是“关系型”。它基于（非常松散地）数据的 SQL 模型而不是关系模型，但它更像是一个 ISAM 游标引擎而不是任何 SQL DBMS。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-02-13T17:40:56.243

首先，我们需要定义 DBMS 和 RDBMS。让我引用[关于数据库的维基百科页面](https://en.wikipedia.org/wiki/Database)的相关部分（强调我的）：

> Connolly 和 Begg 将数据库管理系统 (DBMS) 定义为“使用户能够定义、创建、维护和控制对数据库的访问的软件系统”。**DBMS 的示例包括**MySQL、PostgreSQL、MSSQL、Oracle 数据库和**Microsoft Access**。
> 
> DBMS 首字母缩写词有时被扩展以表示底层数据库模型，**RDBMS 表示关系**模型，OODBMS 表示对象（面向），ORDBMS 表示对象-关系**模型**。其他扩展可以指示其他一些特性，例如分布式数据库管理系统的 DDBMS。

^(（是的，维基百科不应该被用作科学来源，但我们在这里讨论的是基本定义。）)

换句话说，DBMS 是各种 DBMS 的*总称*，而 RDBMS 是那些使用关系数据库模型的 DBMS。

由于 MS Access 使用“经典”*字段/表/外键*模型来存储数据，它的底层数据库模型是关系型的。因此，

*   MS Access 是一个 RDBMS。由于每个 RDBMS 都是一个 DBMS，
*   MS Access 也是一个 DBMS。

# c++ - 为什么派生类必须重新定义覆盖的基类方法

> ID：15499146
> 
> 赞同：3
> 
> 时间：2013-03-19T12:11:04.147
> 
> 标签：c++

我不明白为什么我需要重新定义覆盖的基类方法。

在这里，如果我在派生类中注释 foo() 方法，它不会编译。

感谢您的解释。

```
class Base {
public:
    void foo() {
    }
};

class Derived: public Base {
public:
#define compile_ok
#ifdef compile_ok
    // if this method is commented, it does not compile
    void foo() {
        Base::foo();
    }
#endif
    void foo(int i) {
    }
    void test() {
        foo();
        foo(1);
    }
};

void testOverride() {
    Derived d;
    d.test();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T12:13:17.127

您`foo(int)` *隐藏*了基类名称。像这样修复它：

```
class Derived: public Base {
public:
    using Base::foo;
    void foo(int i) {
    }
    void test() {
        foo();
        foo(1);
    }
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T12:13:25.503

您`foo`采用单个`int`参数的声明将隐藏`foo`在`Base`. 你可以像这样带一个隐藏的名字`Base`：

```
class Derived: public Base {
public:
    using Base::foo; // Pulls foo from Base
    void foo(int i) {
    }
    void test() {
        foo();
        foo(1);
    }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T12:35:24.430

正如其他人已经说过的那样，答案是`foo`派生类型中的*隐藏*了`foo`基类型中的 。扩展一下这意味着问题是查找具有一组规则，编译器必须应用这些规则，直到找到标识符。一旦找到名称，它就不会继续寻找更好的匹配，它会尝试使用它所看到的。

当你在里面`Derived::test`键入`foo()`时，编译器必须解析`foo`，这可能是任何东西（类型、[成员]变量、[成员]函数......）。为此，它开始查找内部可用的内容`Derived::test`，并且那里没有`foo`声明。然后将搜索范围扩大到完整类型`Derived`，并发现有一个成员函数`foo`。此时它停止^*。如果它没有找到`Derived::foo(int)`，它将继续将搜索扩展到基础，然后是命名空间，然后是其他命名空间......

^*在这种特殊情况下，由于标识符解析为函数，因此在 ADL 启动时会采取额外的步骤（或者如果将非基本类型的参数传递给函数，则会启动）。

# java - JPA Hibernate一对多......在单元测试中抛出约束冲突......

> ID：15499148
> 
> 赞同：0
> 
> 时间：2013-03-19T12:11:10.573
> 
> 标签：java, spring

我选择了一个遗留项目，正在为他们编写测试......但测试似乎因违反约束而失败，无法插入汽车......

两个班...

一个类具有以下映射：

```
@LazyCollection(LazyCollectionOption.FALSE)
@OneToMany(targetEntity=Cars.class, cascade=CascadeType.ALL, mappedBy="factory")
public List<Cars> getCars() {
    return cars;
} 
```

多方面的课程有以下课程：

```
@OneToOne(targetEntity=Factory.class, optional=false)
@JoinColumn(name="factory_id")
public Factory getFactory() {
    return factory;
} 
```

这在我的测试中失败了，使用 hsql .. 但是当完全部署战争应用程序时在 SQL 服务器中工作正常......我自己没有测试过，但被告知可以。

我认为这与关系的映射有关...

我的堆栈跟踪：

```
java.lang.Exception: Unexpected exception, expected<java.lang.IllegalStateException> but was<javax.persistence.PersistenceException>
    at org.junit.internal.runners.statements.ExpectException.evaluate(ExpectException.java:29)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:44)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:180)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:41)
    at org.junit.runners.ParentRunner$1.evaluate(ParentRunner.java:173)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:220)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: javax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: could not insert: [com.test.Car]
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1235)
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1168)
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1174)
    at org.hibernate.ejb.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:674)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:240) 
```

记录给我以下信息：

```
[2013-03-19 13:27:14,330] ERROR  [      main] [    JDBCExceptionReporter] - integrity constraint violation: unique constraint or index violation; SYS_CT_10074 table: CAR 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:49:14.290

更改为 manyToOne .. 它会起作用。映射不正确。

# ios - 如何为视图中的所有标签设置自定义字体？

> ID：15499150
> 
> 赞同：2
> 
> 时间：2013-03-19T12:11:11.407
> 
> 标签：ios, xcode, fonts, uilabel

我想为我的完整视图设置自定义字体

我已经参考了以下 [如何为整个应用程序设置自定义字体？](https://stackoverflow.com/questions/7607108/how-do-i-set-a-custom-font-for-the-whole-application)

但这表明当前标签的字体类型和字体大小正在为所有标签使用以下代码片段，这增加了冗余。

```
label.textColor = [UIColor blueColor];
[label setBackgroundColor:[UIColor clearColor]]; 
```

是否可以以类似的方式添加文本颜色和背景颜色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T12:19:10.550

尝试这个

```
-(void)changeFont:(UIView *) view{
    for (id View in [view subviews]) {
        if ([View isKindOfClass:[UILabel class]]) { 
                [View setFont:[UIFont fontWithName:@"Candara" size:26]];
                View.textColor = [UIColor blueColor];
                [View setBackgroundColor:[UIColor clearColor]];
        }
        if ([View isKindOfClass:[UIView class]]) {
            [self changeFont:View];
        }
    }
} 
```

调用这个方法并传递你的`view`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T13:32:04.877

如果您使用的是 iOS 5+ 并且将标签放在自定义视图中（或者可以将它们放入自定义视图中），那么您可以`UIAppearance`使用`UIAppearanceContainer`. 它们正是为这种情况而设计的。

相关方法是`+appearanceWhenContainedIn:`，它允许您设置当您定位的视图类包含在给定类的视图中时的外观（字体、颜色、背景图像等）。

```
// Set appearance of UILabels within MyViews
[[UILabel appearanceWhenContainedIn:[MyView class], nil] 
    setTextColor:[UIColor greenColor]];

[[UILabel appearanceWhenContainedIn:[MyView class], nil] 
    setFont:[UIFont fontWithName:@"SourceCodePro-Black" size:24]]; 
```

我把它放到了应用程序委托中，但你可以把它放到别的地方。这将改变`UILabel`class 视图中所有实例的外观`MyView`。

详情请查看 WWDC 2011 第 114 场视频。

![在此处输入图像描述](../Images/1ee6b3916f54561ad32306f07a5c77a3.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T12:19:25.993

创建一个`category`“`label`喜欢”

```
 @interface UILabel(SMLabelCatogary)
    - (void) setCustomLabelDesign;
    @end

    @implementation UILabel(SMLabelCatogary)
    - (void) setCustomLabelDesign{
        label.textColor = [UIColor blueColor];
        [label setBackgroundColor:[UIColor clearColor]];
    }
    @end 
```

现在`setCustomLabelDesign`使用您的标签 (as `[label setCustomLabelDesign]`) 调用以按照此自定义。

# java - Android SQLite - 新表 VS。新数据库

> ID：15499153
> 
> 赞同：8
> 
> 时间：2013-03-19T12:11:17.240
> 
> 标签：java, android, sql, database, sqlite

我的应用程序上有一个非常复杂的数据库。

当需要添加更多功能时，我开始思考是否应该通过向现有数据库添加更多表来实现它，或者为添加的功能打开一个全新的数据库并在那里添加表。

是否有关于何时打开新数据库的基本规则？有没有关于这个主题的基准？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:26:36.303

> 当需要添加更多功能时，我开始考虑是否应该通过向现有数据库添加更多表来实现它，或者为添加的功能打开一个全新的数据库并在那里添加表。
> 
> 是否有关于何时打开新数据库的基本规则？有没有关于这个主题的基准？

所以这是一个非常复杂的问题，取决于更多的因素，如应用程序的特性、所需的性能、表的特性、它们之间的关系等。

很多人，很多意见，所以每个人都可以告诉你不同的东西。

但我的意见是你应该只有一个数据库（什么时候会有更多的表 eq 10-20）。然后也试着想想[`Singleton`](http://en.wikipedia.org/wiki/Singleton_pattern).

总是最好将所有表放在一个数据库中，特别是在这些表有共同点的情况下（有时需要连接两个或多个表，如果将表放入另一个数据库，这将变得不可能）。此外，您不知道（现在确切地）将来是否会更新表、更改它们之间的关系等（例如，因为应用程序更新）。另一方面，应用程序的结构也更加干净和可读，就好像您`*.db`在内部或外部存储中有五个文件（我可以说这取决于每个文件的大小，因为将 100 MB .db 文件放置到内部存储是很恶心的） .

**关于实现的问题：** 我建议您（如上所述）仅创建一个 DatabaseHelper 来包装所有必需的数据库逻辑。`<?>Tools`然后创建名为UsersTools 的类（一个表一个类） ，它将包装`CRUD`特定表的操作和特定方法。我正在使用这种方法，从来没有遇到过问题。

## 实施示例：

**这是 DatabaseHelper 的示例：**

```
package com.sajmon.examples.db;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class DataSource extends SQLiteOpenHelper {

    private static DataSource instance = null;

    public static final String DB_NAME = "<dbname>";
    public static final int DB_STARTING_VERSION = 1;

    public DataSource(Context cntx) {
        super(cntx, DB_NAME, null, DB_STARTING_VERSION);
    }

    /**
     * 
     * @param mContext as Context of Activity
     * @return <li>new instance of }DataSource object.</li>
     */
    public static DataSource getInstance(Context mContext) {
        if (instance == null) {
            instance = new DataSource(mContext);
        }
        return instance;
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        String query = "create table " + SQLConstants.TEST_TABLE_NAME + " ("
                + SQLConstants.KEY_ID + " integer not null, "
                + SQLConstants.KEY_TYPE + " text null, "
                + SQLConstants.KEY_DATE + " text null" + ")";
        db.execSQL(query);

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        String query = "drop table if exists " + SQLConstants.TEST_TABLE_NAME;
        db.execSQL(query);
        onCreate(db);
    }
} 
```

**SQL常量：**

```
package com.sajmon.examples.db;

public class SQLConstants {

    public static final String TEST_TABLE_NAME = "Test";
    public static final String KEY_ID = "id";
    public static final String KEY_TYPE = "type";
    public static final String KEY_DATE = "date";

} 
```

**测试工具示例：**

```
package com.sajmon.examples.db;

import java.util.Date;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteStatement;

public class TestTools {

private Context mContext;
private SQLiteDatabase db;

public TestTools(Context mContext) {
    this.mContext = mContext;
}

public boolean insert(Test t) throws SQLException {
    try {
        db = openWrite(DataSource.getInstance(mContext));
        ContentValues values = new ContentValues();
        if (db != null) {
            db.beginTransaction();
            values.put(SQLConstants.KEY_ID, t.getId());
            values.put(SQLConstants.KEY_TYPE, t.getType());
            values.put(SQLConstants.KEY_DATE, t.getDate());
            db.insertOrThrow(SQLConstants.TEST_TABLE_NAME, SQLConstants.KEY_TYPE, values);
            values.clear();
            db.setTransactionSuccessful();
            return true;
        }
        return false;
    }
    finally {
        if (db != null) {
            db.endTransaction();
        }
        close(db);
    }
}

public boolean update(Test t) {
    try {
        db = openWrite(DataSource.getInstance(mContext));
        ContentValues values = new ContentValues();
        int count = -1;
        if (db != null) {
            db.beginTransaction();
            values.put(SQLConstants.KEY_TYPE, t.getType());
            values.put(SQLConstants.KEY_DATE, t.getDate());
            count = db.update(SQLConstants.TEST_TABLE_NAME, values, SQLConstants.KEY_ID + "= ?", new String[] {t.getId()});
            db.setTransactionSuccessful();
        }
        return count > 0;
    }
    finally {
        if (db != null) {
            db.endTransaction();
            close(db);
        }
    }
}

public boolean delete(Test t) {
    int count = -1;
    try {
        db = openWrite(DataSource.getInstance(mContext));
        if (db != null) {
            db.beginTransaction();
            count = db.delete(SQLConstants.TEST_TABLE_NAME, SQLConstants.KEY_ID + "= ?", new String[] {t.getId()});
            db.setTransactionSuccessful();
        }
        return count > 0;
    }
    finally {
        if (db != null)
            db.endTransaction();
            close(db);
        }
    }
}

public List<Test> getAll() {
    Cursor c = null;
    List<Test> tests = new ArrayList<Test>();
    Test test = null;
    try {
        db = openRead(DataSource.getInstance(mContext));
        if (db != null) {
            String[] columns = {SQLConstants.KEY_ID, SQLConstants.KEY_TYPE, SQLConstants.KEY_DATE};
            c = db.query(SQLConstants.TEST_TABLE_NAME, columns, null, null, null, null, null);
            if (c.moveToFirst()) {
                do {
                    test = new Test();
                    test.setId(c.getInt(c.getColumnIndex(SQLConstants.KEY_ID)));
                    test.setType(c.getString(c.getColumnIndex(SQLConstants.KEY_TYPE)));
                    test.setDate(c.getString(c.getColumnIndex(SQLConstants.KEY_DATE)));
                    tests.add(test);        
                } while(c.moveToNext());
            }
        }
        return tests;
    }
    finally {
        if (c != null) {
            c.close();
        }
        if (db != null) {
            close(db);
        }
    }
}

private final synchronized SQLiteDatabase openWrite(SQLiteOpenHelper handler) {
    return handler.getWritableDatabase();
}

private final synchronized SQLiteDatabase openRead(SQLiteOpenHelper handler) {
    return handler.getReadableDatabase();
}

private final synchronized void close(SQLiteDatabase db) {
    if (db != null && db.isOpen()) {
        db.close();
    }
}
} 
```

因此，可以根据个人需求随时修改/改进的基本实施示例。如果你想“在更抽象的层面上”实现，那么`DAOFactory`设计模式应该是最好的选择。

**注意：**从其他 Android 开发人员那里获得经验然后开始思考并决定合适的方法非常有用。

# jquery - jQuery NIC 验证

> ID：15499154
> 
> 赞同：7
> 
> 时间：2013-03-19T12:11:19.233
> 
> 标签：jquery, regex, validation

我需要正则表达式来验证巴基斯坦国民身份证 (NIC) 号码，其中包含以下格式的数字和破折号

> `12345-1234567-1`

请帮忙..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T12:22:39.377

您可以使用标准的 javaScript 来测试 Regex 表达式：

```
var idToTest = '12345-1234567-1',
myRegExp = new RegExp(/\d{5}-\d{7}-\d/);

if(myRegExp.test(idToTest)) {
    //if true
}
else {
    //if false
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-28T11:15:10.717

试试这个：

```
var cnic_no = '12345-1234567-9',
var cnic_no_regex = /^[0-9+]{5}-[0-9+]{7}-[0-9]{1}$/;

if(cnic_no_regex.test(cnic_no)) 
{
    alert('Right');
}
else 
{
    alert('Wrong');
} 
```

JsFiddle：[https ://jsfiddle.net/k81w2x77/1/](https://jsfiddle.net/k81w2x77/1/)

JsFiddle：[https ://jsfiddle.net/fokq2woq/10/](https://jsfiddle.net/fokq2woq/10/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T12:13:51.407

这将验证它。（只要格式与您所说的完全相同）

`\d{5}-\d{7}-\d`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-18T09:02:08.717

这应该是这样的

```
myRegExp = new RegExp(/\d{5}-\d{7}-\d{1}$/); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-18T18:53:41.027

您可以使用此正则表达式来验证 CNIC

```
^[0-9+]{5}-[0-9+]{7}-[0-9]{1}$ 
```

要查看如何在 jquery 函数中使用它，请参阅此[示例](https://bugs.code.blog/2019/04/18/function-to-validate-cnic-using-regex/)。

# matlab - 如何使用具有特定输入的 Matlab 的“性能曲线”？

> ID：15499156
> 
> 赞同：1
> 
> 时间：2013-03-19T12:11:23.670
> 
> 标签：matlab, roc

我编写了以下代码来获得“分类准确度”与“阈值”的关系图：

（数据集的基本事实包含两个标记为“好”或“坏”的类）

```
LDAClassifierObject                     = ClassificationDiscriminant.fit(featureSelcted, groundTruthGroup, 'DiscrimType', 'linear');
[LDALabel, LDAScore]                    = resubPredict(LDAClassifierObject);

[~, AccuracyLDA, Thr]                   = perfcurve(groundTruthNumericalLable(:,1), LDAScore(:,1), 1,'yCrit','accu');
figure,
plot(Thr,AccuracyLDA,'r-');
hold on;
plot(Thr,AccuracyLDA,'bo');
xlabel('Threshold for ''good'' Returns');
ylabel('Classification Accuracy');
grid on;

[maxVal, maxInd] = max(AccuracyLDA)

maxVal =

    0.8696

maxInd =

    15

Thr(15)

ans =

    0.7711 
```

此外，我对相同数据集运行 ROC 分析，即基本事实包含两个标记为“好”或“坏”的类

```
[FPR, TPR, Thr, AUC, OPTROCPT]      = perfcurve(groundTruthGroup(:,1), LDAScore(:,1), 'Good');

OPTROCPT =

    0.1250    0.8667 
```

为什么`Thr(15)=0.7711`不同于`OPTROCPT(2)=0.8667`?

ROC得到的最佳截止点（即最佳阈值OPTROCPT）是LDA精度最高的那个吗？

或者也许我错了，那么到底`perfcurve(groundTruthNumericalLable(:,1), LDAScore(:,1), 1,'yCrit','accu')`告诉我们什么？

# vb.net - 用于在日期时间选择器上选择日期的属性是什么？

> ID：15499157
> 
> 赞同：0
> 
> 时间：2013-03-19T12:11:24.713
> 
> 标签：vb.net, datetimepicker

我正在尝试使用简单的选择语句和日期时间选择器从数据库中提取值。你能帮我解决这个问题吗？当我在查询中输入特定日期时，select 语句在 SQL 中工作，但我希望能够在 datetimepicker 上选择日期并能够检索该特定日期的数据。

这是到目前为止的代码：

```
Dim command As String = "select CUSORDER.ORDERID, CUSORDER.ORDERDATE, 
CUSORDER.STAFFID, CUSTOMER.CUSTOMERID,  CUSTOMER.CUSTOMERADD_1 
FROM CUSORDER,CUSTOMER 
WHERE CUSORDER.CUSTOMERID = CUSTOMER.CUSTOMERID AND 
CUSORDER.ORDERDATE = '" & DateTimePicker1.Value.ToString & "'" 
```

我是否使用正确的属性和格式来执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:16:49.773

您不应该连接字符串来获取您的 sql 查询。这可能会导致[sql 注入](http://msdn.microsoft.com/en-us/library/ms161953%28v=sql.105%29.aspx)漏洞、本地化问题或其他问题。您应该始终参数化您的查询：

```
Dim sql As String = "select CUSORDER.ORDERID, CUSORDER.ORDERDATE, CUSORDER.STAFFID, CUSTOMER.CUSTOMERID, CUSTOMER.CUSTOMERADD_1 FROM CUSORDER,CUSTOMER WHERE CUSORDER.CUSTOMERID = CUSTOMER.CUSTOMERID AND CUSORDER.ORDERDATE = @ORDERDATE"
Using con = New SqlConnection(YourConnectionString)
    Using command = New SqlCommand(sql, con)
        command.Parameters.AddWithValue("@ORDERDATE", DateTimePicker1.Value)
        con.Open()
        Using reader = command.ExecuteReader()
            While reader.Read()
                ' ... '
            End While
        End Using
    End Using
End Using 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:05:55.337

如果有帮助，我会执行以下操作：

```
Dim dteTemp As Date = DateTimePicker.value 'might help any injection code as the convert will fail.

Dim command As String = "select CUSORDER.ORDERID, CUSORDER.ORDERDATE, CUSORDER.STAFFID,
CUSTOMER.CUSTOMERID,  CUSTOMER.CUSTOMERADD_1 FROM CUSORDER,CUSTOMER WHERE
(CUSORDER.CUSTOMERID = CUSTOMER.CUSTOMERID) AND
(CUSORDER.ORDERDATE = '" & dteTemp.ToString("yyyy/MM/dd HH:mm:ss") & "')" 
```

日期的格式化避免了 PC 在 SQL 数据库本地的不同日期的问题。

# visual-studio-2008 - 停止 VC++ 调试器进入 operator new

> ID：15499163
> 
> 赞同：1
> 
> 时间：2013-03-19T12:11:38.110
> 
> 标签：visual-studio-2008, visual-c++

单步执行代码时真的很烦人，每次创建新对象时，调试器都不会直接进入构造函数，而是通过`new`new.cpp 中的 CRT 运算符：

```
void *__CRTDECL operator new(size_t size) _THROW1(_STD bad_alloc)
        {       // try to allocate size bytes
        void *p;
        while ((p = malloc(size)) == 0)
                if (_callnewh(size) == 0)
                {       // report no memory
                static const std::bad_alloc nomem;
                _RAISE(nomem);
                }

        return (p);
        } 
```

有没有办法选择性地阻止特定的函数/类进入，或者我可以通过其他方式避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T03:19:34.497

Andy Pennell 的博客文章“[如何不使用 Visual C++ 调试器进入函数](http://blogs.msdn.com/b/andypennell/archive/2004/02/06/69004.aspx)”提供了大部分答案。我也试图弄清楚这一点，并且通过毅力（或者我猜是反常）我尝试了字母表中的每个字母，直到我被 o.*=nostepinto 击中。

从那以后，注意到在模块窗口中它说 msvcr100d.dll!operator new，引导我尝试“operator new.*”作为正则表达式。

有效！安迪的魔法是“operator new.*=nostepinto”

注意我使用的是 VS 2010，但同样适用于 VS 2008

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:23:21.017

Visual Studio 有一个功能，您可以在其中选择要进入的功能。所以如果你有这样的代码：

foo* p = new foo(new baz (new flip()));

您右键单击以显示弹出菜单。从那里选择“步入”，它将为您提供可以步入的功能列表。所以在这里你可以避免所有新的调用，并选择你进入哪个构造函数。

# c# - 在关系之后隐藏零个实体

> ID：15499164
> 
> 赞同：3
> 
> 时间：2013-03-19T12:11:45.123
> 
> 标签：c#, linq

这是我的 linq 声明。基本上我不想看到零项目。是的，我知道为什么它看起来像这样，但我需要查看 > 0 个项目。我怎样才能做到这一点？

Contents.Select( x=> new { RelatedContents = x.RelatedContents } )

![在此处输入图像描述](../Images/e4ed722fe676569b499b71e8fd2d78f9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:14:32.380

您可以使用`Count`或`Any`

使用计数：

```
Contents.Select( x=> new { RelatedContents = x.RelatedContents } ).Where(c => c.RelatedContents.Count() > 0); 
```

使用任何：

```
Contents.Select( x=> new { RelatedContents = x.RelatedContents } ).Where(c => c.RelatedContents.Any()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T12:14:40.947

```
Contents.Select( x=> new { RelatedContents = x.RelatedContents } )
   .Where(y => y.RelatedContents.Any()); 
```

# excel - 使用没有正则表达式的 Excel VBA 进行日期格式设置

> ID：15499166
> 
> 赞同：0
> 
> 时间：2013-03-19T12:11:53.810
> 
> 标签：excel, vba

我的目标是包含一个特别格式化的日期作为长字符串的一部分。

基本格式：yyyy.mm.dd。

目标格式：yyyy/mm/dd

所以我通过谷歌搜索，到了这个网站并找到了这个答案：

```
String = Format(Date, "yyyy/mm/dd") 
```

但是，它不起作用。我仍然得到“yyyy.mm.dd”。格式。

我还找到了一种使用正则表达式来切换字符的解决方案（就像在 linux OS 上使用流编辑器进行操作一样），但我想找到一个不使用任何额外功能的解决方案。

到目前为止，我想出了一个不太优雅的解决方案：

```
CurYear = Year(Date)
CurMonth = Month(Date)
    If CurMonth < 10 Then
        CurMonth = "0" & CurMonth
    End If
CurDay = Day(Date)
     If CurDay < 10 Then
        CurDay = "0" & CurDay
    End If

Today = CurYear & "/" & CurMonth & "/" & CurDay 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:21:12.050

我知道你只需要替换你'。和 '/'。因此`Replace`函数最合适：

```
myString = Replace(Date, ".", "/") 
```

**评论后编辑**：

如果存在固定长度的数据字符串，则可以按如下方式进行：

```
myString = Left(Replace(Date, ".", "/"), 10) 
```

结果最后一个符号被剪切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:31:32.013

强制更改的单元格公式为：

```
=TEXT(A1,"yyyy/mm/dd") 
```

使用 vba：

子日期修复（）

```
Dim dtStart As Date
Dim strFinish As String

    dtStart = ActiveCell.Value

    strFinish = Format(dtStart, "yyyy/mm/dd")

    MsgBox strFinish 
```

结束子

# python - 如何删除instancemethod对象，为了泡菜，不修改原始类

> ID：15499170
> 
> 赞同：-1
> 
> 时间：2013-03-19T12:12:12.663
> 
> 标签：python, python-2.7, pickle

我想坚持从`reverend.thomas.Bayes`. 当然，如果我尝试直接腌制这些类之一，我会得到：

```
TypeError: can't pickle instancemethod objects 
```

为了解决这个问题，我尝试声明两个函数：

```
import types
from itertools import chain
from copy import copy
from reverend.thomas import Bayes

def prepare_bayes_for_pickle(bayes_obj):
    dic = copy(bayes_obj.__dict__) #I also tried using deepcopy instead of copy
    for k in dic:
        if type(k) == types.MethodType:
            dic.pop(k)
    return dic

def reconstruct_bayes_from_pickle(bayes_dic):
    b = Bayes()
    # Merge b with bayes_dic, with bayes_dic taking precedence
    dic = dict(chain(bayes_dic, b))
    b.__dict__ = dic
    return b 
```

基本上，我尝试复制对象的`__dict__`，并尝试`instancemethod`通过测试类型来删除 s `types.MethodType`。

然后，我将通过创建一个新`Bayes`对象然后将其重新合并来重建该对象`bayes_dic`（在它被 UnPickled 之后。）

但是，我还没有使用第二种方法，因为我仍然无法在`prepare_bayes_for_pickle`没有得到原始错误的情况下腌制从返回的对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:21:54.007

更好的解决方案是让您`__getstate__`在类中添加一个方法`Bayes`（附带`__setstate__`）：

```
import types
from reverend.thomas import Bayes

def Bayes__getstate__(self):
    state = {}
    for attr, value in self.__dict__.iteritems():
        if not isinstance(value, types.MethodType):
            state[attr] = value
        elif attr == 'combiner' and value.__name__ == 'robinson':
            # by default, self.combiner is set to self.robinson
            state['combiner'] = None
    return state

def Bayes__setstate__(self, state):
    self.__dict__.update(state)
    # support the default combiner (an instance method):
    if 'combiner' in state and state['combiner'] is None:
        self.combiner = self.robinson

Bayes.__getstate__ = Bayes__getstate__
Bayes.__setstate__ = Bayes__setstate__ 
```

现在`Bayes`类总是可以被腌制和解除腌制，而无需额外的处理。

我确实看到这个类有一个`self.cache = {}`映射；也许酸洗时应该排除？如果是这种情况，请忽略它`__getstate__`并打电话`self.buildCache()`。`__setstate__`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:16:46.940

`k` is a key i.e. the attribute/method name. You need to test the attribute itself:

```
 if type(dic[k]) == types.MethodType:
            ^~~~~~ here 
```

I'd prefer using a comprehension; you should also be using `isinstance`:

```
dic = dict((k, v) for k, v in bayes_obj.__dict__
           if not isinstance(v, types.MethodType)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T12:21:30.067

这听起来像是让一个方形钉子适合一个圆孔。如何使用 pickle 来腌制参数，并使用 unpickle 来重建`reverand.Thomas.Bayes`对象？

```
>>> from collections import namedtuple
>>> ArgList = namedtuple('your', 'arguments', 'for', 'the', 'reverand')
>>> def pickle_rtb(n):
...     return pickle.dumps(ArgList(*n.args))
... 
>>> def unpickle_rtb(s):
...     return reverand.Thomas.Bayes(*pickle.loads(s))
... 
>>> s = pickle_rtb(reverand.Thomas.Bayes(1, 2, 3, 4, 5)) # note arguments are a guess
>>> rtb = unpickle_norm(s) 
```

受[这个](https://stackoverflow.com/questions/14235693/how-to-pickle-a-scipy-stats-distribution-cant-pickle-instancemethod-objects)SO question 的启发。

# php - 如何在 PHP 中将 time() 字符串格式化为 Unix 时间戳

> ID：15499173
> 
> 赞同：-2
> 
> 时间：2013-03-19T12:12:18.773
> 
> 标签：php, mysql, sql

我将`time()`字符串存储到我的数据库中，就像`1363694642`
现在我只想打印这个刺一样`19-03-2013 17:40:39`

我已经使用过`date('d-M-Y H:i:s', strtotime($row['time']))`，但它会`31-Dec-1969 17:00:00`在每个查询中返回

请帮我解决它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T12:13:31.867

`date`函数需要一个时间戳，所以你不必使用`strtotime`，因为你已经有一个来自数据库的时间戳：

```
date('d-m-Y H:i:s', $row['time']) 
```

请注意，我已在您的格式字符串中替换`M`为。`m`那是因为`M`意味着*一个月的简短文本表示，三个字母*，你只需要一个数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:14:42.267

就用这个

```
date('d-M-Y H:i:s', $row['time']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T12:17:05.163

您不需要使用 strtotime 函数，因为 time() 返回时间戳值本身：

采用：`date('d-m-Y H:i:s', $row['time'])`

有关更多信息，请访问[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T12:18:05.083

MySQL 已经可以为您做到这一点：

```
SELECT FROM_UNIXTIME(`time`)
FROM ... 
```

或者：

```
SELECT FROM_UNIXTIME(`time`, '%D-%M-%Y %h:%i:%s')
FROM ... 
```

也可以看看：[`FROM_UNIXTIME`](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-unixtime)

# sql - 交叉表查询以获取基于类别的记录数

> ID：15499176
> 
> 赞同：0
> 
> 时间：2013-03-19T12:12:23.357
> 
> 标签：sql, ms-access

今天的另一个问题。微软访问。

给定表格：
**FormsList**

```
FormID LocationID FormTypeID FormDate  
1 001 001 21.11.2012  
2 002 002 20.11.2012  
3 001 003 16.11.2012  
4 001 001 13.12.2012  
4 003 004 13.12.2012 
```

...
**地点列表**

```
LocationID LocationName  
001 FirstLocation  
002 SecondLocation  
003 ThirdLocation  
004 FourthLocation  
... 
```

**表单类型**

```
FormTypeID FormType  
001 "C"  
002 "R"  
003 "F"  
004 "X"  
... 
```

我需要一个交叉表查询，或者一些东西来获得一个表：

*   第 1 列标题：`LocationID`.
*   第 2、3、4 列等标题：“C”、“R”、“F”、“X”。
*   第 1 列 - LocationsList 中的所有**LocationsID**
*   第 2、3、4、5 列等 - 每个位置对应表格的数量

Query/s 应显示上述表格的以下结果：

```
LocationID "C" "R" "F" "X"  
001 2 0 0 0  
002 0 1 0 0  
003 0 0 0 1  
004 0 0 0 0 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:25:14.640

您应该能够使用以下内容来转换数据：

```
TRANSFORM Count(FormsList.FormTypeID)
select LocationsList.LocationId
from (LocationsList
inner join FormsList
  on LocationsList.LocationId = FormsList.LocationId)
inner join FormTypes
  on FormsList.FormTypeId = FormTypes.FormTypeId
GROUP BY LocationsList.LocationId
PIVOT FormTypes.FormType 
```

编辑，如果您需要所有位置，那么您将需要使用`LEFT JOIN`：

```
TRANSFORM Count(FormsList.FormTypeID)
select LocationsList.LocationId
from (LocationsList
left join FormsList
  on LocationsList.LocationId = FormsList.LocationId)
left join FormTypes
  on FormsList.FormTypeId = FormTypes.FormTypeId
GROUP BY LocationsList.LocationId
PIVOT FormTypes.FormType 
```

# android - android sqllite 获取当天有效的行

> ID：15499177
> 
> 赞同：1
> 
> 时间：2013-03-19T12:12:24.377
> 
> 标签：android, sqlite, datetime

```
public Cursor getRowsBetweenDate(Date startAt, Date endAt) {
        String selection = KEY_START_AT + " >= time('now', 'localtime') AND " + KEY_END_AT + " <= time('now', 'localtime')";
        return sqLiteDatabase.query(TABLE_NAME, null, selection, null, null, null, null);
    } 
```

但我想要一整天，现在无效。我想获取今天有效的所有行。所以从 00:00 到 23:59:59

我怎样才能做到这一点？

编辑：

谢谢你。如果一天不是现在而是其他一天作为输入参数怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:21:54.057

也许尝试类似：

```
String where = "strftime('%d.%m.%Y', date(?)) = strftime('%d.%m.%Y', 'now')";
SimpleDateFormat dateFormat = "yyyy-MM-dd";
String [] whereArgs = {dateFormat.format(KEY_END_AT) };
cursor = sqLiteDatabase.query(TABLE_NAME, null, where , whereArgs, null,
            null, null); 
```

所有这些都是通过文档搜索输入的，我可能有一些愚蠢的错字。如有问题请回信。

**编辑**实际上，Harry Joy 的想法似乎更容易，但我会在这里留下我的评论，因为如果您有兴趣在几天以外的时间进行分组，它可能会很有用。

# svn - 将物理 SVN 服务器移动到虚拟服务器

> ID：15499179
> 
> 赞同：0
> 
> 时间：2013-03-19T12:12:38.550
> 
> 标签：svn, visualsvn, visualsvn-server

我有一个物理 SVN 服务器，其中安装了 VisualSVN 服务器。存储库位于网络存储。

现在，我想在虚拟机上安装新的 SVN 服务器，但我想将新的 VisualSVN 服务器安装链接到当前存储库位置。

*   有可能吗，还是我需要转储？

*   如果有可能？我应该遵循哪些步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:38:13.137

*   在这种情况下，您不需要转储加载现有存储库。只需安装 VisualSVN 服务器并将其指向存储库根位置。您可能需要调整共享 BTW 的安全权限。

*   1.  在虚拟机上安装 VisualSVN 服务器，
    2.  复制`%VISUALSVN_SERVER%\certs`文件夹（VisualSVN 服务器存储证书的地方）。
    3.  复制`%VISUALSVN_SERVER%\conf\http-custom.conf`（如果您修改了当前服务器上的 conf 文件并希望在新服务器上使用它）。

迁移 VisualSVN 服务器设置有两种方法：

1.  您可以在设置 VisualSVN 服务器时手动设置所有内容，然后通过 VisualSVN 服务器管理器，

2.  由于服务器设置存储在 Windows 注册表中，您可以导入它们然后导出到新机器。设置存储在以下注册表分支中：

    *   HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\VisualSVN\VisualSVN 服务器（适用于 64 位操作系统）

    *   HKEY_LOCAL_MACHINE\SOFTWARE\VisualSVN\VisualSVN 服务器（用于 32 位操作系统）

您必须运行`svn switch --relocate`才能将工作副本切换到新的 URL（如果新服务器的 URL 的 URL 发生更改）。检查命令行参考： http: [//www.visualsvn.com/support/svnbook/ref/svn/c/switch/](http://www.visualsvn.com/support/svnbook/ref/svn/c/switch/)。

# character-encoding - NetBeans 强制我以特定编码保存

> ID：15499182
> 
> 赞同：2
> 
> 时间：2013-03-19T12:12:45.493
> 
> 标签：character-encoding, netbeans-7

我正在尝试使用 NetBeans 将 *.jspf 文件保存为 UTF-8。有一些西里尔符号，例如。`Про проект`在文件中，所以IDE警告我：

```
header.jspf 包含在运行期间可能会损坏的字符
转换为 ISO-8859-1 字符集。
是否要使用此字符集保存文件？
                                                               [是] [否]
```

当我按下`[No]`按钮时，它会取消保存。当我按下`[Yes]`按钮时，它会保存文件，但字符串看起来像`ÐÑÐ¾ Ð¿ÑÐ¾ÐµÐºÑ`现在。

在文件属性中，编码设置`ISO-8859-1`为灰色，所以我无法更改它。项目设置也设置为使用 UTF-8。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:01:30.280

您只需将以下行添加到 *.jspf 文件的顶部：

```
<%@page contentType="text/html" pageEncoding="UTF-8"%> 
```

文件属性中的编码将自动更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-20T09:05:37.973

要在 JSP 页面上设置编码，请将这些行添加到它们。

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
</html> 
```

# java - 什么时候存储比较结果而不是根据速度重新计算比较？

> ID：15499194
> 
> 赞同：2
> 
> 时间：2013-03-19T12:13:20.647
> 
> 标签：java, performance, memory-management, comparison, processing-efficiency

我想对何时（忽略可用内存空间）存储比较结果而不是重新计算它是有意义的有一个深刻的理解。证明存储所产生的时间成本合理的临界点是什么？是 2 次、3 次还是 4 次比较？更多的？

例如，在这种特殊情况下，哪个选项（通常）在速度方面表现更好？

选项1：

```
int result = id.compareTo(node.id);

return result > 0 ? 1 : result < 0 ? -1 : 0; 
```

选项 2：

```
return id.compareTo(node.id) > 0 ? 1 : id.compareTo(node.id) < 0 ? -1 : 0; 
```

我试图自己分析这两个选项以回答我自己的问题，但我对这种性能测试没有太多经验，因此，我宁愿从有更多经验的人那里得到更明确的答案更好地掌握所涉及的理论要素。

我知道这没什么大不了的，而且大多数时候差异可以忽略不计。但是，我是一个完美主义者，我真的很想解决这个特殊的问题，这样我就可以继续我的生活了，哈哈。

此外，我认为对于我将来可能遇到的类似情况，我认为答案可能会很有启发性，其中差异可能非常显着（例如，当比较或内存分配的成本无法产生或其他情况时）复杂到足以引起有关性能的真正问题）。

答案应该与使用 Java 而不是其他语言编程相关，请。

我知道我已经提到过几次了，但是请仅将答案集中在速度差异上！我很清楚在编写代码时可以而且应该考虑许多其他因素，但在这里我只想要一个直截了当的论点，即 FASTER。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:16:04.650

经验告诉我选项 1 应该更快，因为您只需调用一次 compare 方法并存储结果以供重用。支持这一观点的事实是，局部变量存在于堆栈中，并且进行方法调用涉及堆栈中的更多工作，而不仅仅是将值压入堆栈。然而，分析是比较两种实现的最好和最安全的方法。

首先要意识到的是，java 编译器和 JVM 可以一起优化您的代码，使其希望最有效地完成工作（只要遵循某些规则）。很可能在性能上没有差异，也很可能实际执行的不是你想象的那样。然而，一个真正重要的区别在于调试：如果您在变量存储版本的返回语句上放置一个断点，您可以看到调用返回的内容，否则在调试器中看不到。更方便的是，当您看似无用地将要从方法返回的值存储在变量中时，然后将其返回，因此您可能会在调试时看到方法将返回什么，否则无法看到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T13:12:45.847

选项 1 不能比 2 慢，如果编译器优化，那么两者可能相等，但仍然 1) 更具可读性、更紧凑和更好的可测试性。

因此，选项 2) 没有任何论据。

如果您愿意，可以更改为`final int result = ....` 虽然我希望编译器非常聪明以至于 final 关键字在这种情况下没有任何区别，并且 final 使代码的可读性降低了一些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T12:24:51.817

**选项1**一个总是首选一个，因为这里是现实世界的场景

----->好吧让

1) id.compareTo(node.id) > 0 处的线程执行？1、在这个进程中一些其他线程

`id.compareTo(node.id) > 0 ? 1`在去之前改变 node.id 的值

`id.compareTo(node.id) < 0 ? -1 : 0`这个检查，结果不一样？

当检查中存在一些功能时，性能明智的 option1 具有更高的性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T13:13:36.787

> 什么时候存储比较结果而不是根据速度重新计算比较？

大多数情况下，选项#1 与选项#2 之类的微优化不会产生任何显着差异。实际上，只有在以下情况下才会产生显着的性能差异：

*   比较贵，
*   比较执行了很多次，并且
*   性能很重要。

事实上，您可能已经*花费*了更多的时间和金钱来*考虑*这一点，而不是在应用程序的整个有用生命周期中节省下来的时间和金钱。

与其专注于性能，不如专注于使代码可读。想想下一个必须阅读和修改代码的人，并让他/她不太可能误读它。

In this case, the first option is more readable than the second one. THAT is why you should use it, not performance reasons. (Though, if anything, the first version is probably faster.)

# fonts - 如何在 tinymce 编辑器中添加新字体？

> ID：15499198
> 
> 赞同：20
> 
> 时间：2013-03-19T12:13:36.083
> 
> 标签：fonts, tinymce, font-face

我想`add new font`在`tinymce editor`其中显示`font dropdown`并应用于编辑器文本。

我尝试在高级主题皮肤文件夹的字体文件夹中添加 ttf 字体，并为@font-face添加`editor_template.js`和添加 css 。`contect.css`

我在字体下拉列表中获得了字体名称。但是当我应用于任何文本时，对该文本没有任何字体效果。

什么是我找不到的实际问题。希望这是路径问题或其他...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T10:33:26.473

I solved the issue,

Check all the possible issues below and fix them to add a font in TinyMCE editor.

*   Create fonts folder : `tinymce/themes/advanced/` - if not exists.

    1.  Put font in fonts `"tinymce/themes/advanced/fonts/aphrodite_pro.ttf.`
    2.  Add font in `editor_template.js & editor_template_src.js` include in `"theme_advanced_fonts"`

        `Ex: theme_advanced_fonts: "Aphrodite Pro=aphrodite pro"`,

*   Maintain `"theme_advanced_fonts"` font name sequence in above both js files.

Most important part: `"Aphrodite Pro"` name is defined by us where `"aphrodite pro"` is the name of the font.

**Note** this might not work in TinyMCE version 4 or higher. Check new documentation: [https://www.tinymce.com/docs/configure/content-formatting/#font_formats](https://www.tinymce.com/docs/configure/content-formatting/#font_formats)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-04-10T09:28:48.350

使用谷歌字体我刚刚使用两行（在 TinyMCE 初始化中）解决了这个问题：

```
content_css: ['https://fonts.googleapis.com/css?family=Gugi'],
font_formats: 'Arial Black=arial black,avant garde;Gugi=Gugi, cursive;Times New Roman=times new roman,times;', 
```

新字体名为 Gugi，将出现在 arial black 和 times new roman 之间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:10:15.347

您需要根据需要设置[theme_advanced_fonts](http://www.tinymce.com/wiki.php/Configuration%3atheme_advanced_fonts)配置参数。如果您需要将字体添加到编辑器 iframe 头`contect.css`中，`@font-face`这是正确的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-22T14:38:38.387

我已经通过安装 Papyrus 字体研究了这个解决方案，它运行良好（在任何 css 文件中都没有任何 @font-face），但是在 Mac（运行 Lion）上使用多个浏览器进行研究时，我发现虽然它在 Safari 和Firefox，Papyrus 选项不会显示在 Chrome 的文本编辑器字体下拉列表中。我看到其他人在相关领域遇到了一些 Chrome 问题，所以我不确定这是否可以在 Chrome 中修复。

我在两个 .js 文件中添加了 Papyrus=Papyrus，以相同的相对位置顺序，并添加了所描述的字体文件夹，以及字体文件 Papyrus.TTF（如图所示的大写和小写）。

在 Safari 和 Firefox 中，这会导致 Papyrus 出现在下拉列表中，Papyrus 字体出现在编辑器文本和网站页面上，完全符合要求。

但不是在 Chrome 中，因为无法选择字体。

# mysql - mysql表不显示

> ID：15499203
> 
> 赞同：0
> 
> 时间：2013-03-19T12:13:47.023
> 
> 标签：mysql, phpmyadmin, xampp

我有一个数据库名称 - manaskavya。在这个数据库中，我用 xampp 服务器创建了 10 个表。由于某种原因，我安装了 Wamp 服务器，因为它只显示 9 个表，它错过了一个表名“manas_likes”。然后我再次安装了 Xampp 服务器，但缺少的表没有显示，当我创建同名的新表时，显示表存在，当我试图删除它、修复或截断它时，它的显示表不存在。

我不知道为什么会这样，如果你知道请帮助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:04:36.343

在检查了所有这些细节之后，我得到了一些东西，我是对还是错不知道，但它对我有用..

1\. 当我们在数据库中创建新表时，它会创建一个扩展名为**.frm**的文件，您可以在**C:\xampp\mysql\data\database_name\anytable.frm** 用于 wamp **C:\xampp\bin\mysql\mysql5.0.2\data\database_name\anytable.frm**。

2\. 在这个特定的表中插入数据后，它会创建另外两个扩展名为 **.MYD**和**.MYI**的文件。

3.

*   如果您使用**phpmyadmin**进行备份，那么此类问题将永远不会发生。
*   如果您直接从文件夹进行备份意味着**C:\xampp\mysql\data\database_name**那么有时它会错过**.MYD**和**.MYI**扩展文件

4\. 再次导入数据库后将只有**.frm**扩展名文件，由于没有**.MYD**和**.MYI**扩展名文件，它变得不可见。而且它也不允许您创建具有相同名称的新表，因为**.frm**扩展名文件已经存在于您的数据库中。

5.所以在这种情况下，直接在文件夹位置删除特定的**.frm**扩展文件（*请务必删除正确的文件*）。

6\. 然后你就可以创建同名的表了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:20:18.927

一旦我遇到同样的问题。我尝试在创建表查询中更改表名，执行它然后重命名表。然后删除表并重新创建它。

# android - 如何在android中安装和使用couch db

> ID：15499205
> 
> 赞同：11
> 
> 时间：2013-03-19T12:13:53.687
> 
> 标签：android, couchdb, couchbase

我应该如何在 android 中安装和使用 couch Db。
我的意思是本地沙发 Db，我可以在平板电脑和模拟器中使用它。我必须遵循的所有步骤。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T23:23:34.017

我目前正在使用这个项目。有两种选择：

1）沙发基地-机器人。（是的，couchbase，它实际上是 couchDB。看图）

[看到这个链接](https://github.com/couchbase/Android-Couchbase)

这就是我使用的。这只是库存的 couchDB 1.2.0，与适用于 android 的 erlang vm 捆绑在一起。我发现它非常稳定（尽管是测试版）。最大的缺点是启动应用程序需要大约 4 秒，因为它必须加载 erlang 模拟器。自述文件说明很好。

它不再被开发，有利于......

2) TouchDB 安卓。[查看](https://github.com/couchbaselabs/TouchDB-Android)

这是用 java 重写的 couchDB，因此它在 android 上运行和启动更快。iOS有TouchDB，在objective-c中也是一样的。我被开发状态推迟了，但听说还不错。iOS 版本最近有很大的发展，目前是 1.0 版本。我听到诸如“某些功能没有被暗示”之类的东西，但不是那些功能。据说这只会插入并替换couchbase-android。

我可以证明 couchbase-android 运行良好（如果您不介意启动时间）。我已经使用cordova 开发了我的应用程序，我很乐意就您是否采用这种方式提供建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T12:19:53.733

Couch DB 也有 android 项目，可以在[这里找到。](https://github.com/couchbase/Android-Couchbase)他们有完整的源代码，带有代码示例以及如何将其添加到 java 项目中的说明......

另请查看以下帖子：

[对如何在 Android 上使用 CouchDB 感到困惑](https://stackoverflow.com/questions/9343868/confused-on-how-to-use-couchdb-on-android)

希望有帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-04T14:12:41.357

按照[http://docs.couchbase.com/couchbase-lite/cbl-android/cbl-android-1.0b2/](http://docs.couchbase.com/couchbase-lite/cbl-android/cbl-android-1.0b2/)上的指南，您不会有任何问题。

它非常简单明了。

# c++ - 使用 pcap 进行 Memcpy 和内存管理

> ID：15499206
> 
> 赞同：1
> 
> 时间：2013-03-19T12:13:53.950
> 
> 标签：c++, libpcap

作为初学者，我在处理 C++ 中的 libpcap 时遇到了一些麻烦。我的目标是将“数据包”的内容复制到内存中相同大小的另一个地方，这样我就可以不受干扰地使用它。

这是我的代码：

```
 string content;
 packet = pcap_next(descr, &header);
 char *packet_copy = malloc(header.len);
 memcpy(packet_copy, packet, header.len);
 for (int i=0; i < (int) header.len; i++) {
        if (isprint(packet[i])) content += packet_copy[i];
 } 
```

当然，这是行不通的。有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:20:53.330

这对我很有效：

```
#include <string>
#include <algorithm>
#include <iterator>
#include <pcap/pcap.h>

static pcap_t* descr = nullptr;
static pcap_pkthdr header;

int main()
{
    std::string content;
    auto packet = pcap_next(descr, &header);

    // append raw data
    content.append(packet, packet + header.len);

    // append printables only
    std::copy_if(packet, packet+header.len, std::back_inserter(content), 
            [](u_char ch) { return std::isprint(ch); });

    // for C++0x challenged compilers:
    for (u_char const* it=packet; it != packet + header.len; ++it)
    {
        if (isprint(*it)) content += *it;
    }
} 
```

# php - 新手 - 移动站点重定向回主站点问题

> ID：15499207
> 
> 赞同：0
> 
> 时间：2013-03-19T12:13:54.900
> 
> 标签：php, javascript, redirect, mobile

我在我的网站上使用 WP 中的欢乐主题，并在移动文件夹中拥有主站点的移动网站版本。

我有点被移动网站提供商抛弃了，他们给了我 header.php 文件的 js，该文件工作正常，移动网站在移动设备上加载正常。但是，移动页面上的链接不会将访问者带回主站点，因为移动脚本会重新加载，因此它们会卡在移动站点上。

在找到解决方案之前，我不得不禁用标题中的 js，所以我现在没有移动网站，直到我可以对其进行排序。

在 header.php 中使用 javascript 加载移动网站可以正常工作。

我在这里看到了一些关于非常相似的问题的非常有用的帖子，但是编写 php 和 session/cookie 超出了我的范围，尽管我可以遵循明确的说明。我已经没有想法了，因为我正在阅读的东西是如此多样化和超越我的技能。

任何人都可以为我提供解决方案，帮助我，一点php，cookie或??? 我

真的很感激，因为我已经禁用了 js，直到我可以解决这个问题 - 这意味着没有移动版本:(

谢谢

史蒂夫

如果您需要更多信息，请告诉我，再次感谢..

哦，我确实将主站点复制到了一个没有 js 的名为 desktop 的新子文件夹中，并将移动页面链接指向它，这实际上将我带回了未找到的主站点/页面，但到达了那里。但是，当我按下主站点上的任何导航时，移动版就重新加载了，该死的 :)

Header.php 重定向脚本：

```
if (screen.width <= 800) {
window.location = "http://www.icesugarmedia.com/mobile/";;
}

</script> 
```

每个页面上链接回主站点的代码（作为小图像）：

```
 <div style="margin:5px 0px 25px 0px;"><a href="http://icesugarmedia.com/"><img src="images/full_website_buton.png" /></a></div> 
```

*   按钮名称上的拼写错误与图像文件名匹配

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T03:03:12.010

此链接讨论您要查找的内容。

[http://www.malphursinteractive.com/view-full-site-mobile-redirect-script/](http://www.malphursinteractive.com/view-full-site-mobile-redirect-script/)

该页面中有一些非常好的解决方案。这是“脚本显示全站移动重定向”查询的#1 google 结果。在前 10 个结果中似乎还有许多其他好的解决方案。

您正在寻找的是一个我认为我们很多人都应该找到的问题的解决方案，因为许多智能手机用户现在想查看完整的网站。

该问题的一个简单解决方案是复制目录中的所有文件。创建一个名为“site.com/full-site/”的新目录。将所有复制的文件粘贴到该目录中。从 header.php 文件中删除移动重定向。使“查看完整站点链接”将它们带到 full-site/index.php 而不是根目录。现在他们不会遇到强制他们进入主页的代码行，除非您的链接是在“ [http://site.com/link.php](http://site.com/link.php) ”而不是“link.php”中编码的。无论哪种方式，无论您选择哪种方法，您都必须阻止用户加载重定向脚本。

# java - 在关闭窗口时调用函数

> ID：15499211
> 
> 赞同：2
> 
> 时间：2013-03-19T12:14:07.493
> 
> 标签：java, swing, jframe, awt, windowlistener

使用 Java：我有一个使用 netbeans GUI builder 构建的 GUI。

GUI 类是通过扩展 jFrame 创建的

`public class ArduinoGUI extends javax.swing.JFrame`

并使用以下方式显示 GUI：

```
java.awt.EventQueue.invokeLater(new Runnable() {
    public void run() {                    
        new ArduinoGUI().setVisible(true);                    
    }
} 
```

因此，我没有要调用的实际框架对象`frame.`，那么在这种情况下，我该如何覆盖该`windowClosed`函数，因为我必须在应用程序退出之前调用一个特定的函数来整理串行连接。

编辑：这是明确的代码，如下所示：

```
@Override
public void processWindowEvent(WindowEvent e) {
    if (e.getID() == WindowEvent.WINDOW_CLOSING) {
        arduino.close();
        System.out.println("Arduino Close()");
        dispose();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T12:37:05.597

您可以在 windowClosing 方法上调用您的函数..

```
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.WindowConstants;

class WindowEventHandler extends WindowAdapter {
  public void windowClosing(WindowEvent evt) {
    System.out.println("Call your method here"); 
  }
}

public class TJFrame {

  public static void main(String[] args) {
    JFrame frame = new JFrame("Swing Frame");

    JTextBox label = new JLabel("This is a Swing frame", JLabel.CENTER);

    frame.add(label);

    frame.addWindowListener(new WindowEventHandler());
    frame.setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
    frame.setSize(350, 200); // width=350, height=200
    frame.setVisible(true); // Display the frame
  }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T12:34:22.607

如果您还没有完成，请在您的类（它是 JFRame 的子类）中创建“processWindowEvent”方法。该方法将 WindowEvent 对象作为参数。在该方法中添加一个 if 块，如下所示：

```
if(e.getID() == WindowEvent.WINDOW_CLOSING){

    //...Do what you need to do just before closing

} 
```

e 是 WindowEvent 对象传递给方法的参数。

# android - android 应用程序添加功能到喜欢 fb 页面和评论 fb 帖子

> ID：15499212
> 
> 赞同：1
> 
> 时间：2013-03-19T12:14:07.897
> 
> 标签：android, button, facebook-like

您好，这是我第一次将 facebook 集成到我的任何 android 应用程序中，我需要实现功能来喜欢 fp 页面/帖子并在 fb 页面/帖子上发表评论,,,!! 我已经下载了适用于 android 的 fb sdk 并玩弄了它但是我仍然不清楚我需要做什么以及如何满足要求我需要的是当用户单击我的应用程序中的一个按钮时它会自动喜欢一个fb帖子，它将编辑文本中的文本作为评论提交给fb帖子，，！！有人能告诉我该怎么做吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:23:37.857

要*“喜欢”*帖子：

就像是：

```
Facebook mFacebook = new Facebook();
mFacebook.request(THE_POST_ID + "/likes", parameters, "POST"); 
```

要对帖子*“发表评论”*：

```
Bundle parameters = new Bundle();
parameters.putString("message", edtComment.getText().toString());
mFacebook.request(THE_POST_ID + "/comments", parameters, "POST"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T10:29:49.360

喜欢一个帖子

```
Request likeRequest = new Request(Session.getActiveSession(), postId + "/likes", null, HttpMethod.POST, new Request.Callback() {

                 @Override
                 public void onCompleted(Response response) {
                     this.like.setText("liked");
                     this.like.setEnabled(false);
                     CommentAdapter.this.like.setBackgroundResource(R.drawable.disabled_like);
                     this.getLikesCount();
                 }
            });
            Request.executeBatchAsync(likeRequest); 
```

# sql-server - 不显示来自触发器的消息

> ID：15499219
> 
> 赞同：0
> 
> 时间：2013-03-19T12:14:13.490
> 
> 标签：sql-server, triggers

我创建了用于检查值长度的触发器。我想显示我自己的消息，而不是长度超过指定的。触发器创建没有错误。但是，如果我尝试创建值超过指定值的记录，我只会得到系统错误。如何让我也看到我的消息？谢谢

```
CREATE TRIGGER check_region_name_length
ON Region
INSTEAD OF INSERT
AS
BEGIN
IF EXISTS
(
SELECT inserted.RegionName FROM inserted
WHERE LEN(inserted.RegionName)>10
)
BEGIN
    RAISERROR('RegionName value is longer than specified', 10, 1);
    ROLLBACK TRANSACTION;
    RETURN;
END;
END    
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:24:53.807

基本数据完整性检查在触发器触发*之前*执行良好，如果它们失败，则触发器根本不会被调用。

因此，如果您尝试替换或增加现有警告（即，如果列的长度定义为`(10)`），那么您将无所事事地试图从触发器中设置新的错误消息。

例如：

```
create table T (Val1 char(1) not null)
go
create trigger T_T on T instead of insert
as
    insert into T (Val1)
    select SUBSTRING(Val1,1,1) from inserted
go
insert into T (Val1) values ('ab') 
```

产生：

> 消息 8152，第 16 层，第 14 状态，第 1 行
> 
> 字符串或二进制数据将被截断。该语句已终止。

即使允许触发器触发，它也会执行成功的插入*。*

# ruby-on-rails - 导轨'stringify_keys'

> ID：15499221
> 
> 赞同：0
> 
> 时间：2013-03-19T12:14:21.720
> 
> 标签：ruby-on-rails, ruby

（对不起我的英语不好）

我正在尝试我的第一个 Rails 网络应用程序。这是我的代码：

模型：

```
class Movie < ActiveRecord::Base    

   attr_accessible :about, :title, :url

end 
```

控制器：

```
class MoviesController < ApplicationController

  def show

    @movie = Movie.find(params[:id])

  end

  def update

    @mov = Movie.find(params[:id])

    if @mov.update_attributes(params[:id])

        redirect_to movies_path, :notice => "Your movie has been updated."

    else

        render "show"

    end  
  end

  def destroy

  end

end 
```

*   和视图

> ```
>  <%= form_for @movie do |m| %>
> <center>
>   <table>
>     <td valign='middle' align='right'>
>       Title:
>     </td>
>     <td>
>       <%= m.text_field :title %>
>     </td>
> <tr>
>     <td valign='middle' align='right'>
>       Description:
>     </td>
>     <td>
>       <%= m.text_area :about %>
>     </td>
> <tr>
>     <td valign='middle' align='right'>
>       URL:
>     </td>
>     <td>
>      <%= m.text_field :url, :id => "url" %><input type='file' onchange="document.getElementById('url').value = this.value" />
>     </td>
> <tr>
>     <td>
>     </td>
>     <td>
>       <center>
>         <%= m.submit %>
>       </center>
>     </td>
>   </table>
> </center>
> <% end %> 
> ```

所以这是一个`update`动作，按下更新表单按钮后会给出一条错误消息，错误是：

```
undefined method `stringify_keys' for "15":String 
```

所以我再试一次，`Movie.find(params[:id].to_i)`输出是：

```
undefined method `stringify_keys' for 15:Fixnum 
```

感谢您的回答，祝您有美好的一天！=）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T12:26:47.917

```
if @mov.update_attributes(params[:id]) 
```

这是因为上面的行。在这里，您尝试使用错误的**params[:id]更新****@mov**属性。

 **控制器中的**更新**操作应如下所示。

```
def update
  @mov = Movie.find(params[:id])
  if @mov.update_attributes(params[:movie])
    redirect_to movies_path, :notice => "Your movie has been updated."
  else
    render "show"
  end
end 
```

基本上**update_attributes**将检查哈希作为参数，如下所示。

```
@mov.update_attributes(:about => "Sample About", :title => "Sample Title", :url => "Sample URL") 
```**

# testing - 用xml保存soap ui测试结果

> ID：15499227
> 
> 赞同：0
> 
> 时间：2013-03-19T12:14:28.583
> 
> 标签：testing, soapui

是否可以在 SOAP UI 中保存运行测试的结果，包括使用的请求和回复的 xml？

我想将其导出并发送给客户，但是当我查看时我找不到这样的选项

问候，

维西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:41:15.457

查看项目文件 XML，它都在里面。或者，您可以将任何请求复制/粘贴到文本编辑器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:42:33.330

在请求/响应的 XML 编辑器中单击鼠标右键，然后选择“另存为..”；-)

# ruby - 在 Ruby 中添加两个数组

> ID：15499228
> 
> 赞同：3
> 
> 时间：2013-03-19T12:14:32.140
> 
> 标签：ruby

我有两个数组：

```
a = [[1,2],[3,4]];
b = [[5,6],[7,8]]; 
```

我希望得到的数组是它们的总和，即

```
c = [[6,8],[10,12]]; 
```

会有一种优雅的方式来做到这一点吗？

**笔记：**

我目前知道，只需添加`a = [1,2]`with`b = [3,4]`即可获得`c = [4,6]`我需要做的事情

```
c = [a,b].transpose.map{|x| x.reduce(:+)}; 
```

但如果可能的话，我不确定如何将其扩展到我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T12:32:58.783

```
a.zip(b).map { |x,y| x.zip(y).map { |s| s.inject(:+)  } } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T12:32:47.567

```
c = [a, b].transpose.map{|ary| ary.transpose.map{|ary| ary.inject(:+)}} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-19T12:44:01.253

另一种可以更好地表达操纵数字的方法是使用“narray”

```
require 'narray'
a = NArray[[1,2],[3,4]]
b = NArray[[5,6],[7,8]]

c = a + b 
```

. . . 是的，真的，`c = a + b`而且速度也快得多。

不过，您确实为此付出了代价 - NArray 期望所有元素都包含相同类型的对象。如果是这种情况，尤其是如果您的实际问题具有更大的矩阵，那么我强烈建议`narray`您处理此类数据

# case-sensitive - 用于 jsDoc 注释的正确大小写是什么？

> ID：15499235
> 
> 赞同：17
> 
> 时间：2013-03-19T12:14:54.587
> 
> 标签：case-sensitive, google-closure-compiler, jsdoc

我最近开始使用 jsdoc 注释来记录我们的 javascript 代码，但是我发现使用 @param 标记的示例相互冲突。

请参阅[https://code.google.com/p/jsdoc-toolkit/wiki/TagParam](https://code.google.com/p/jsdoc-toolkit/wiki/TagParam) (PascalCase)

和[https://developers.google.com/closure/compiler/docs/js-for-compiler](https://developers.google.com/closure/compiler/docs/js-for-compiler)（骆驼/小写）。

camelCase 对我来说很有意义，因为：

```
var foo = 1;
console.log(typeof foo); // outputs "number" 
```

jsDoc @param 注释使用的正确大小写是什么？还是没关系？我打算将它用于文档生成以及通过 google 闭包运行代码以进行类型检查。

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-20T04:29:34.277

JSDoc 类型表达式的冲突示例涉及 JavaScript 原始类型和`string`，它们具有相应的包装器类型：、和。`number``boolean``String``Number``Boolean`

从[***关闭：权威指南***](https://rads.stackoverflow.com/amzn/click/com/1449381871)：

> [闭包库](https://code.google.com/p/closure-library/)中禁止使用包装器类型，因为如果在预期原始类型的地方使用包装器类型，某些函数可能无法正确运行。

请参阅 MDN：**[字符串原语和字符串对象之间的区别](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String#Distinction_between_string_primitives_and_String_objects)**。

# heroku - Heroku push 拒绝了没有检测到 Cedar 支持的应用程序

> ID：15499242
> 
> 赞同：2
> 
> 时间：2013-03-19T12:15:13.247
> 
> 标签：heroku, heroku-toolbelt

我有这个常见的 heroku 错误`! Heroku push rejected, no Cedar-supported app detected` ，试图在以下执行后推送：

```
git init
git add .
git commit -a -m "First commit"
heroku create
git push heroku master 
```

我已经看到了许多特定于`Ruby on Rails`项目的错误，我只想推送一个 PHP 项目，现在我只是想推送一个简单的`index.html`文件

我也尝试过

```
git init
git add .
git commit -a -m "First commit"
heroku create --stack cedar
git push heroku master 
```

但我遇到了同样的问题......我错过了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T13:01:02.097

尝试将其重命名为`index.php`将其检测为 PHP 应用程序。

# gcc - 如何在 gcc 中静态初始化 __m128i 数组？

> ID：15499251
> 
> 赞同：9
> 
> 时间：2013-03-19T12:15:30.250
> 
> 标签：gcc, initialization, sse

我正在将一些 SSE 优化代码从 Windows 移植到 Linux。而且我发现以下在 MSVC 中运行良好的代码在 GCC 中不起作用。

代码是初始化一个数组`__m128i`。每个`__mi28i`包含 16 个`int8_t`。它确实使用 gcc 编译，但结果不如预期。

实际上，正如 gcc 定义`__m128i`的那样`long long int`，代码将初始化一个数组，如：

`long long int coeffs_ssse3[4] = {64, 83, 64, 36}`.

我用谷歌搜索并被告知“初始化向量的唯一可移植方法是使用`_mm_set_XXX`内在函数。” 但是，我想知道还有其他方法可以初始化`__m128i`数组吗？静态更好，并且不需要太多修改以下代码（因为我有大量以下格式的代码）。任何建议表示赞赏。

```
static const __m128i coeffs_ssse3[4] =
{
    { 64, 0, 64, 0, 64, 0, 64, 0, 64, 0, 64, 0, 64, 0, 64, 0},
    { 83, 0, 36, 0,-36,-1,-83,-1, 83, 0, 36, 0,-36,-1,-83, -1},
    { 64, 0,-64,-1,-64,-1, 64, 0, 64, 0,-64,-1,-64,-1, 64, 0},
    { 36, 0,-83,-1, 83, 0,-36,-1, 36, 0,-83,-1, 83, 0,-36,-1}
}; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T12:49:04.547

似乎`gcc`没有将`__m128*`类型视为聚合初始化的候选者。由于它们不是标准类型，因此这种行为会因编译器而异。一种方法是将数组声明为 8 位整数的对齐数组，然后将指针转换为它：

```
static const int8_t coeffs[64] __attribute__((aligned(16))) =
{
     64, 0, 64, 0, 64, 0, 64, 0, 64, 0, 64, 0, 64, 0, 64, 0,
     83, 0, 36, 0,-36,-1,-83,-1, 83, 0, 36, 0,-36,-1,-83, -1,
     64, 0,-64,-1,-64,-1, 64, 0, 64, 0,-64,-1,-64,-1, 64, 0,
     36, 0,-83,-1, 83, 0,-36,-1, 36, 0,-83,-1, 83, 0,-36,-1
};
static const __m128i *coeffs_ssse3 = (__m128i *) coeffs; 
```

但是，我认为`__attribute__((aligned(x)))`Visual Studio 不支持这种语法 ( )，因此您需要`#ifdef`在其中使用一些技巧才能使用正确的指令在所有目标平台上实现所需的对齐。

# c - 获取位域的地址

> ID：15499252
> 
> 赞同：4
> 
> 时间：2013-03-19T12:15:30.813
> 
> 标签：c

我正在经历几个 C 能力倾向问题。这个看起来很棘手，谁能解释一下？

```
struct {
    int foo : 4;
} baz;

int *example()
{
    return &baz.foo;
} 
```

这是无效的代码，但我无法弄清楚原因。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T12:17:03.273

```
int foo : 4; 
```

声明`foo`为位域。不得获取位域的地址。

第 6.5.3.2 节开始：

> 一元运算`&`符的操作数应该是一个函数指示符、一个`[]`或一元运算符的结果`*`，或者是一个左值，它指定一个**不是位域**且未使用寄存器存储类说明符声明的对象。

因此，将地址运算符应用于位域是违反约束的。（它甚至没有多大意义，因为位域不需要从字节边界开始。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T12:18:32.933

声明中的冒号语法`struct`声明`foo`为位域。

由于位域可能小于体系结构的最小可寻址内存块（通常是许多现代 CPU 体系结构上的字节），因此不允许获取此类成员的地址。

因此，此代码无法编译，因为它违反了该规则。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T12:18:13.797

foo 字段是一个 4 位宽的位字段——小于单个字节。指针只能寻址整个字节，所以这是无效的。即使 foo 是 8 位或 32 位宽（现代架构上的完整/对齐字节），这仍然是无效的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T12:21:28.817

我想如果你编译你的文件，你会有解决方案：

```
cannot take address of bit-field 
```

因为在内存架构中，每次使用指针时，它都会获取它指向的地址。但是 baz 只是一个位字段，所以它是无效的。

# java - 具有自动调整大小、水平滚动和可收缩第一列的 JTable

> ID：15499255
> 
> 赞同：5
> 
> 时间：2013-03-19T12:15:39.797
> 
> 标签：java, swing, jtable, jscrollpane

我在创建带有滚动条的 JTable 时遇到问题。我想要一个有 2 列且没有可见滚动条的 JTable。

如果我放大其中一列，滚动条应该变得可见并且列调整大小。

我遵循了这个答案[How to make JTable both AutoResize and Horizo​​ntall scrollable?](https://stackoverflow.com/questions/6104916/how-to-make-jtable-both-autoresize-and-horizontall-scrollable) 并且工作正常，这基本上归结为：

```
JTable table = new JTable() {
  @Override
  public boolean getScrollableTracksViewportWidth() {
    return getPreferredSize().width < getParent().getWidth();
  }
};
table.setAutoResizeMode( JTable.AUTO_RESIZE_OFF ); 
```

但是，使用此解决方案，我无法缩小第一列。只有当我放大第二列并且滚动条变得可见时，我才能缩小第一列。

所需的行为是 2 列可自动调整大小。这意味着 1 列可以缩小，然后在没有滚动条弹出的情况下扩展。仅当扩展其中一列以使视图扩展时，滚动条才会弹出。

一个场景：

1.  缩小第一列->第二列放大，没有滚动条
2.  放大第一列->第二列缩小，仍然没有滚动条
3.  放大第 2 列 -> 1 列保持不变，第 2 列放大并出现滚动条

关于解决这个问题的任何想法？

SSCCE：

```
import javax.swing.JDialog;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.WindowConstants;
import javax.swing.table.AbstractTableModel;
import java.awt.BorderLayout;
import java.awt.Container;

public class TableTest {
public TableTest() {

JDialog mainDialog = new JDialog();
mainDialog.setResizable( true );
mainDialog.setDefaultCloseOperation( WindowConstants.DISPOSE_ON_CLOSE );
Container contentPane = mainDialog.getContentPane();

JTable myTable = new JTable() {
  @Override
  public boolean getScrollableTracksViewportWidth() {
    return getPreferredSize().width < getParent().getWidth();
  }
};

myTable.setAutoResizeMode( JTable.AUTO_RESIZE_OFF );
myTable.setModel( new MyTableModel() );
JScrollPane scrollPane = new JScrollPane( myTable );
contentPane.add( scrollPane, BorderLayout.CENTER );

mainDialog.pack();
mainDialog.setVisible( true );
}

public static void main( String[] args ) {
new TableTest();
}

private class MyTableModel extends AbstractTableModel {

@Override public int getRowCount() {
  return 1;
}

@Override public int getColumnCount() {
  return 2;
}

@Override public Object getValueAt( int rowIndex, int columnIndex ) {
  return "ARandomValue";
}
}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T09:32:11.360

覆盖 getTracks 方法还不够，如果跟踪，您必须欺骗 super 的布局以执行正确的操作：

```
JTable myTable = new JTable(10, 4) {
    private boolean inLayout;

    @Override
    public boolean getScrollableTracksViewportWidth() {
        return hasExcessWidth();

    }

    @Override
    public void doLayout() {
        if (hasExcessWidth()) {
            // fool super
            autoResizeMode = AUTO_RESIZE_SUBSEQUENT_COLUMNS;
        }
        inLayout = true;
        super.doLayout();
        inLayout = false;
        autoResizeMode = AUTO_RESIZE_OFF;
    }

    protected boolean hasExcessWidth() {
        return getPreferredSize().width < getParent().getWidth();
    }

    @Override
    public void columnMarginChanged(ChangeEvent e) {
        if (isEditing()) {
            // JW: darn - cleanup to terminate editing ...
            removeEditor();
        }
        TableColumn resizingColumn = getTableHeader().getResizingColumn();
        // Need to do this here, before the parent's
        // layout manager calls getPreferredSize().
        if (resizingColumn != null && autoResizeMode == AUTO_RESIZE_OFF
                && !inLayout) {
            resizingColumn.setPreferredWidth(resizingColumn.getWidth());
        }
        resizeAndRepaint();
    }

}; 
```

可能不完全完整（可能仍然不完整，即使在编辑处理 columnMarginChanged 之后，从（[SwingX 项目](http://swingx.java.net)的）JXTable 复制，它通过额外的布局属性支持该行为

```
xTable.setHorizontalScrollEnabled(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-17T14:46:29.227

随着@kleopatra 的实现，我注意到当您减小列的大小然后稍微增加它时，您会得到一个滚动条（这经常是偶然发生的）。所以我稍微改变了代码：

```
protected boolean hasExcessWidth() {
    return getPreferredSize().width - getParent().getWidth() < 50;
} 
```

这允许在不丢失自动调整大小的情况下缓慢增加列的大小。

还不确定魔术“50”是否是一个很好的测量值，但在初始测试中效果很好

# html - 选择框透明背景在 Chrome 中是否有效？

> ID：15499256
> 
> 赞同：1
> 
> 时间：2013-03-19T12:15:40.427
> 
> 标签：html, google-chrome, css, firefox

我正在尝试通过 css 使选择框背景透明。我正在使用`background-color:transparent;`. 它适用于 Firefox，但不适用于 chrome。任何的想法？[这](http://jsfiddle.net/DNA180/6Chzm/2/)是一个活生生的例子。感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:22:54.433

您可能会发现`-webkit-appearance: none;`很有用。`<select>`s 是出了名的难以设计风格，如果您追求非自定义的外观和感觉，您可能需要考虑制作自己的风格。

[jsFiddle](http://jsfiddle.net/Tyriar/bsSV4/)

```
.outter_div select {
    -webkit-appearance: none;
} 
```

# mysql - #1064 MySQL 查询错误

> ID：15499266
> 
> 赞同：-1
> 
> 时间：2013-03-19T12:16:05.280
> 
> 标签：mysql, sql

当我执行下面的查询时出现错误，我无法找出问题所在。有人可以帮忙吗？

```
SELECT shifts.consultant_uid AS consultant_uid, shifts.status AS 
status , shifts.pay_roll_no AS pay_roll_no, shifts.week_ending AS week_ending, shifts.shifts_date AS shifts_date, shifts.description AS description, shifts.units AS units, shifts.pay_rate AS pay_rate, shifts.charge_rate AS charge_rate, shifts.pay_amount AS pay_amount, shifts.charge_amount AS charge_amount, shifts.margin_amount AS margin_amount, shifts.client_name AS client_name, consultant.user_name AS consultant_name, 

FROM a_shifts AS shifts

LEFT JOIN a_users AS consultant ON shifts.consultant_uid = consultant.user_uid
WHERE 1 

AND week_ending >=  '2013-03-17'
AND week_ending <=  '2013-03-24' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:18:49.163

`SELECT`您在子句中的字段列表末尾有一个额外的逗号：

```
... consultant.user_name AS consultant_name, 
```

作为一般建议，通常实际错误指示在查询中遇到错误的位置。在大多数情况下，它指示的位置*就在*问题之后，因为它是查询遇到的第一件事，它无法解析（在这种情况下，`FROM`关键字）产生错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:22:19.053

删除，在 FROM 子句之前

```
SELECT .........consultant.user_name AS consultant_name,
FROM 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T12:47:21.953

试试这个

```
SELECT shifts.consultant_uid AS consultant_uid, shifts.status AS 
status , shifts.pay_roll_no AS pay_roll_no, shifts.week_ending AS week_ending, shifts.shifts_date AS shifts_date, shifts.description AS description, shifts.units AS units, shifts.pay_rate AS pay_rate, shifts.charge_rate AS charge_rate, shifts.pay_amount AS pay_amount, shifts.charge_amount AS charge_amount, shifts.margin_amount AS margin_amount, shifts.client_name AS client_name, consultant.user_name AS consultant_name

FROM a_shifts AS shifts

LEFT JOIN a_users AS consultant ON shifts.consultant_uid = consultant.user_uid
WHERE 1 

AND week_ending >=  '2013-03-17'
AND week_ending <=  '2013-03-24' 
```

# entity-framework - Data insert issue after migrating database from SQL Azure to SQL Server

> ID：15499268
> 
> 赞同：0
> 
> 时间：2013-03-19T12:16:07.777
> 
> 标签：entity-framework, sql-server-2008-r2, azure-sql-database, database-migration, identity-column

I have a database on SQL Azure which has an identity primary. After using SQL Server Import and Export Wizard, I transferred the data to my SQL Server 2008 R2 database.

My ASP.NET Application runs fine and reads the data. But When I try to insert a value in a table 'User', it gives me an error: Cannot insert null in column 'UserId'.

The reason being that it is not able to generate the identity value.

How can I overcome this issue?

PS: I tried Generating the scripts from SQL Azure, but the SQL file is 500MB in size and my host does not allow that big a script to run.

**Edit**: using Entity Framework for data access. The UserId field has an `IDENTITY property` (1,1).

**Edit** Tried to create the schema from SQLAzure Migration tool and then used the import/export data to copy the data. But the wizard does not maintain the relations amongst the rows.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:45:58.510

数据导入/导出向导不会保留数据库对象的整个结构。

即它只会复制数据，而不是数据适合的表的整个结构 - 包括身份和密钥定义。

您可以导入数据，然后手动设置所有主键和默认字段以匹配您所需的数据库定义，或者您可以连接到您的 Azure 实例并使用生成脚本选项在复制之前在 2008 数据库中生成您的架构。

但真正的答案是，您应该使用[复制数据库向导](https://stackoverflow.com/a/5481143/808532)来完成此操作，它适用于 Azure。它是为这种情况而设计的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T19:47:17.150

问题是向导试图插入主键值，默认情况下禁用。如果不插入主键，则无法维护关系，因此整个问题。

要解决此问题并进行万无一失的迁移，请确保新架构维护所有标识列。

选择源表和目标表时，对于特定表，单击“编辑映射”并选中“启用标识插入”复选框以启用主键值的插入，从而保持结构和关系不变。

# c# - 如何在 DataGridView 中使用 Enter 键作为 Tab 键

> ID：15499282
> 
> 赞同：2
> 
> 时间：2013-03-19T12:16:55.933
> 
> 标签：c#, winforms, keypress

我有一个`DataGridView`5 列。如果在第一列按 Enter 键，焦点将移至下一行。当我按 Enter 键时，我想将焦点移到下一*列。*

```
 private void dgvComp_CellEnter(object sender, DataGridViewCellEventArgs e)
 {
    if (dgvComp.CurrentRow.Cells[e.ColumnIndex].ReadOnly)
    {
       SendKeys.Send("{tab}");

    }   
 } 
```

在上面的代码中，我将第 2,3 和 4 列作为只读列。如果我按 Tab，焦点应该直接转到第 5 列。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T12:58:02.483

你能试试这个解决方案吗

```
using System.Diagnostics;
class MyDataGridView : DataGridView
{

    protected override bool ProcessDialogKey(Keys keyData)
    {
        if (keyData == Keys.Enter) {
            base.ProcessTabKey(Keys.Tab);
            return true;
        }
        return base.ProcessDialogKey(keyData);
    }

    protected override bool ProcessDataGridViewKey(KeyEventArgs e)
    {
        if (e.KeyCode == Keys.Enter) {
            base.ProcessTabKey(Keys.Tab);
            return true;
        }
        return base.ProcessDataGridViewKey(e);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:04:05.190

尝试使用 KeyPress 事件处理程序：

```
private void dgvComp_KeyPress(object sender, KeyPressEventArgs e)
{
    switch (e.KeyChar)
    {
        case (char)Keys.Enter:
            SendKeys.Send("{Tab}");
            break;
        default:
            break;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-22T03:07:53.337

```
datagridview.EditingControlsShowing += datagridview_EditingControls;
datagridview_EditingControls(object sender,DataGridViewEditingControlShowingEventArgs e)
{
  e.control.KeyDown += Control_KeyDown;
}
private void Control_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.Enter)
        {
            dataGridView.CurrentCell = dataGridView.CurrentRow.Cells[e.ColumnIndex + 1];
        }
    } 
```

# perl - 两次使用（包括/要求）同一个文件

> ID：15499287
> 
> 赞同：0
> 
> 时间：2013-03-19T12:17:16.973
> 
> 标签：perl, perl-module

我有一个包含（使用）两个模块（MyA.pm 和 MyB.pm）的 perl 脚本（MyTest.pl）。我遇到的问题是模块 A 也必须包含模块 B，但这似乎不起作用，因为它已经包含在 .pl 文件中。

**我的测试.pl**

```
use MyA;
use MyB;
print hello(); # defined in MyB 
```

**下午**

```
use MyB;
print hello(); # defined in MyB 
```

perl 声明从 MyA.pm调用子例程**hello时未定义。****据我所知，这种用法**似乎只适用于第一次使用的地方（哈！）。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:26:09.123

您没有向我们展示`import`或`MyB`告诉我们它是否继承`import`了标准模块（如`Exporter`. 如果没有`import`方法，`MyB::hello`子例程就不能别名为`Main`or`MyA`命名空间。

您的 2 个选择是进行导入或使用`MyB::hello`.

编辑：嗯，我还注意到您没有`package`在`MyA`. 您的模块是否都使用`Main`命名空间作为他们的个人垃圾箱？

# python - 从线程停止 WxPython 应用程序的主循环需要窗口焦点

> ID：15499292
> 
> 赞同：1
> 
> 时间：2013-03-19T12:17:28.937
> 
> 标签：python, multithreading, wxpython, wxwidgets

我有一个命令行实用程序，可以启动和停止 WxPython 应用程序实例。我在一个线程中启动应用程序，以便我可以继续运行命令以及使用 gui 应用程序。

我的问题是，当我停止应用程序时，控制台会挂起，直到我关注应用程序窗口，然后它才会关闭。我不确定为什么应用程序需要焦点才能退出。

应用程序线程如下所示：

```
class RunAppThread(threading.Thread):
    def run(self):
        self.app = wx.App(redirect=False)
        self.frame = AppWindow(None)
        self.app.MainLoop()

    def stop(self):
        self.app.ExitMainLoop() 
```

相关的 CLI 操作是：

```
def startapp(self):
    self.app = gui.RunAppThread()
    self.app.start()

def stopapp(self):
    self.app.stop()
    self.app.join() 
```

有没有更好/正确的方法来退出主循环而不是调用`wx.App.ExitMainLoop()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T12:29:54.910

调用后`wx.App.ExitMainLoop`，用于`wx.WakeUpMainThread`获取主线程处理事件。

# c# - 如何使用 MSAA 自动化简单的 Windows 窗体应用程序？

> ID：15499293
> 
> 赞同：2
> 
> 时间：2013-03-19T12:17:30.270
> 
> 标签：c#, winforms, ui-automation, msaa

我想使用 MSAA 自动化简单的 Windows 应用程序。我不知道如何找到控件（比如`TextBox`and `Button`）并获取它们的值（比如获取值`TextBox`并单击按钮）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-09T13:58:14.550

Why do you want to automate using MSAA? Microsoft's current way is [UI Automation](http://en.wikipedia.org/wiki/Microsoft_UI_Automation).

From Wikipedia (emphasis mine):

> UIA is similar to Microsoft Active Accessibility (MSAA) in that it provides a means for exposing and collecting information about user interface elements and controls to support user interface accessibility and software test automation. *However, UIA is a newer technology that provides a much richer object model than MSAA...*

With UI Automation you can automate by creating a native or .NET application or use a 3rd party tool like [RIATest](http://www.cogitek.com/riatest/features/technologies/windows.html) that relies on UI Automation.

*(Disclamer: I am affiliated with RIATest).*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T18:04:25.657

以下假设您将在 C/C++ 中开发您的自动化程序，因为我不确定从 .NET 使用 MSAA 是否容易（尽管有可能！）

如果您不想使用 C++，您可以使用 .NET 中的 MS UI 自动化进行调查。

要开始使用 MSAA 和 C++ 开发自动化客户端应用程序，我建议：

1.  安装[适用于 Windows 7 和 .NET Framework 4 的 Windows SDK](http://www.microsoft.com/en-us/download/details.aspx?id=8279)

2.  这将安装 Inspect.exe 工具 - 在以下位置找到它：

    **`Programs > Microsoft Windows SDK v7.1 > Tools > Inspect Objects`**

3.  启动 Inspect.exe 并将左上方的下拉菜单从“UI Automation”切换到“MSAA”

4.  启动被测应用程序并将鼠标悬停在其 UI 元素上 - 元素的 MSAA 属性应显示在 Inspect.exe 中

5.  编写您的自动化代码:)

一个重要的选择是决定是使用事件驱动技术来定位您的元素，还是简单地从顶层（桌面）开始，在桌面的子元素中找到您的应用程序，然后深入到应用程序的元素树中从那里。

codeproject.com 上有一个很好的事件驱动 MSAA 教程：http: [//www.codeproject.com/Articles/18290/Introduction-to-Microsoft-Active-Accessibility](http://www.codeproject.com/Articles/18290/Introduction-to-Microsoft-Active-Accessibility)

MSAA 中基于树的导航的教程似乎更加稀缺。我将从 MS 文档开始 - 我推荐第一个：

[Active Accessibility 客户端接口和功能](http://msdn.microsoft.com/en-us/library/ms696161.aspx)

[主动可访问性用户界面服务](http://msdn.microsoft.com/en-us/library/ms697240.aspx)

[活动辅助功能起始页](http://msdn.microsoft.com/en-us/library/ms697707.aspx)

# javascript - 使用从 jQuery AJAX 响应返回的脚本

> ID：15499294
> 
> 赞同：3
> 
> 时间：2013-03-19T12:17:30.817
> 
> 标签：javascript, jquery, ajax

当我们使用脚本作为 jQuery/AJAX 响应的响应时，它对我们有何帮助？

一旦我们发出 AJAX 请求，我们可以直接执行该响应脚本的函数吗？

任何基本的例子都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T12:28:39.573

您可以使用`eval(scriptStrings);`这是 javascript 中的一个基本功能。

您还可以将这些字符串作为元素附加到要评估的当前文档中，请记住以下代码：

```
function addJavascript(jsname,pos) {
  var th = document.getElementsByTagName(pos)[0];
  var s = document.createElement('script');
  s.setAttribute('type','text/javascript');
  s.setAttribute('src',jsname); 
  th.appendChild(s);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T12:25:59.527

是的，我们可以使用**getScript 方法来获取脚本**，它使用 GET HTTP 请求来获取然后执行脚本。因此，您可以在 AJAX 请求之后直接执行该响应的功能。有关更多详细信息和示例，请查看此链接[http://api.jquery.com/jQuery.getScript/上的 jQuery 文档](http://api.jquery.com/jQuery.getScript/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T12:34:00.237

[jQuery getScript](http://api.jquery.com/jQuery.getScript/)可用于异步加载任何静态脚本资源。它在下载后立即执行脚本。您可以使用回调选项从中调用任何函数。

但是如果你的 ajax 响应是一个字符串。你必须使用`eval`函数。但是在使用它之前阅读了一些[EVAL MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval)，[eval](https://stackoverflow.com/questions/86513/why-is-using-the-javascript-eval-function-a-bad-idea) [是](https://stackoverflow.com/questions/197769/when-is-javascripts-eval-not-evil) [邪恶](https://stackoverflow.com/questions/646597/eval-is-evil-so-what-should-i-use-instead)的。

# database - 客户有多个送货地址，每个订单可以有不同的地址

> ID：15499299
> 
> 赞同：0
> 
> 时间：2013-03-19T12:17:49.863
> 
> 标签：database, database-design

您好我目前正在尝试为一个项目建立一个数据库。

目前所有`orders`必须有一个`customer`，`customers`有一个`address`，然后他们有一个`shipto address`。最多`shipto addresses`可以添加 10 种不同的。每个`order`都可以运送到不同`address`的那个`customer`。

有人知道我应该如何建模吗？

```
Orders
------
ID
customerID (referencing ID from customers)
other rubbish

Customers
---------
ID
Address
Email
Phone 
other rubbish

Shipto
------
ID
CustomerID (referencing ID from customers)
Address
other address related stuff 
```

所有这些应该如何联系起来？

*edit 只是在想，客户应该属于订单吗？还是订单应该属于客户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:57:24.723

您似乎在客户和他们的送货地址之间有一个简单的 1:N 关系，后者可以用 FOREIGN KEY 表示，引用前者（正如您已经指出的）。

但是无论您是否有多个地址，您仍然需要记住发货*时*的收货地址和产品价格，即使用户后来更改了她的地址或价格发生了变化。因此，仅添加 FK from `Order`to`Shipto`是不可行的。

要获得有关如何处理这些问题的一些想法，请查看：

*   [数据库优化订单](https://stackoverflow.com/a/11930467/533120)
*   [数据库历史化](https://stackoverflow.com/a/10988116/533120)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:22:56.917

您的模型对我来说看起来不错，我会`shipto_id`在`Orders`表格中添加一个。
这样您就知道哪个订单被发送到了哪里。

# php - mysql和php连接

> ID：15499303
> 
> 赞同：-3
> 
> 时间：2013-03-19T12:18:03.280
> 
> 标签：php, mysql, xampp

朋友们，我是创建数据库的初学者，我正在使用 xampp 创建数据库

```
<html>
<body>
<marquee behavior="alternate">welcome</marquee>
</body>
</html>
<?php 
$username = "root";
$password = "root123";
$hostname = "localhost"; 
$dbhandle = mysql_connect($hostname, $username, $password) 
or die("Unable to connect to MySQL");
echo "Connected to MySQL<br>";
?>
<?php
$selected = mysql_select_db("missensencemuttation",$dbhandle) 
or die("Could not select missensencemuttation");
?>
<?php
$result = mysql_query("SELECT * FROM `primary_data` LIMIT 0, 30");
($row=mysql_fetch_array($result)); 
{
echo "disease_name:".$row{'disease_name'}." gene_name:".$row{'gene_name'};
}
?>enter code here
<?php
mysql_close($dbhandle);
?> 
```

这就是我为将我的数据库与 php 连接所做的事情

但结果我只能看到我的表的第一行，其中有 10 行。但是当我用来连接它们时，我只能看到我的第一行。在我的 php

## 任何人都可以帮助我在 php 中连接我的所有数据吗？

```
<html>
<body>
<marquee behavior="alternate">welcome to the database</marquee>
<table border="3" align="center">
<tr><th>disase_name</th><th>gene_name</th></tr>      
<?php 
        $username = "root";
        $password = "2991";
        $hostname = "localhost"; 
        $dbhandle = mysql_connect($hostname, $username, $password) or die("Unable to   connect to MySQL");
        echo "Connected to MySQL<br>";
        $selected = mysql_select_db("disease",$dbhandle) or die("Could not select  disease");
        $result = mysql_query("SELECT * FROM `primary_data` LIMIT 0, 30");
        while($row = mysql_fetch_array($result))
        {
            echo "<tr><td>".$row['disease_name']."</td><td>".$row['gene_name']."</td>   </tr>";
        }
        mysql_close($dbhandle);
    ?>
    </table>    
    </body>
    </html> 
```

## 我期望朋友的答案带有此代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:20:15.123

您可以使用 while 循环来遍历已返回的所有结果。每mysql_fetch_array()，MySQL结果跳转到下一条记录。

您可以使用以下代码循环遍历所有行

```
while($row=mysql_fetch_array($result))
{
    echo "disease_name:".$row['disease_name']." gene_name:".$row['gene_name'];
} 
```

您的完整代码如下所示：

```
<html>
    <body>
    <marquee behavior="alternate">welcome</marquee>
        <?php 
            $username = "root";
            $password = "root123";
            $hostname = "localhost"; 
            $dbhandle = mysql_connect($hostname, $username, $password) or die("Unable to connect to MySQL");
            echo "Connected to MySQL<br>";

            $selected = mysql_select_db("missensencemuttation",$dbhandle) or die("Could not select missensencemuttation");
            $result = mysql_query("SELECT * FROM `primary_data` LIMIT 0, 30");
            while($row = mysql_fetch_array($result))
            {
                echo "disease_name:".$row['disease_name']." gene_name:".$row['gene_name'];
            }
            mysql_close($dbhandle);
        ?>
    </body>
</html> 
```

*感谢 Edwin Alex 对分号的评论*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:19:30.337

用户`"["`在这里。

```
echo "disease_name:".$row['disease_name']." gene_name:".$row['gene_name']; 
```

你也应该循环它并显示。

```
while($row=mysql_fetch_array($result)) 
{
 echo "disease_name:".$row['disease_name']." gene_name:".$row['gene_name'];
} 
```

# java - 属性文件中的 Spring 十六进制字符串

> ID：15499309
> 
> 赞同：3
> 
> 时间：2013-03-19T12:18:26.493
> 
> 标签：java, spring

我在属性文件中有一个十六进制值，我希望 Spring 通过在我的 java 对象中使用 @Value 注释将其转换为字节数组。

例子：

```
hex.value=CB53CD20B2F222D9 
```

在java中我有以下内容：

```
@Value("#{myProperties['hex.value'] ?: ''}")
private byte[] hexValue; 
```

Spring 目前只是将 String.getBytes() 设置为 hexValue，但我希望它转换为表示字符串的实际字节数组。例如通过使用[Commons-Codec Hex](http://commons.apache.org/proper/commons-codec//javadocs/api-release/org/apache/commons/codec/binary/Hex.html#decode%28java.lang.Object%29 "Commons-Codec Hex")

有谁知道如何配置 Spring 使其不只是返回 getBytes()？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:53:49.017

您可以尝试使用Spring EL 的[类型引用](http://static.springsource.org/spring/docs/3.0.x/reference/expressions.html#d0e11977)。

如果您想使用[org.apache.commons.codec.binary.Hex#decodeHex](http://commons.apache.org/proper/commons-codec/apidocs/org/apache/commons/codec/binary/Hex.html#decodeHex%28char%5b%5d%29)，那么目标`@Value`将如下所示：

```
@Value("#{T(org.apache.commons.codec.binary.Hex).decodeHex((myProperties['hex.value'] == null ? '' : myProperties['hex.value'] ).toCharArray())}")
private byte[] hexValue; 
```

# asp-classic - 使用经典 ASP 的 Paypal 自适应支付

> ID：15499313
> 
> 赞同：-1
> 
> 时间：2013-03-19T12:18:39.190
> 
> 标签：asp-classic, paypal, paypal-adaptive-payments

我似乎找不到任何使用经典 ASP 创建 Paypal 自适应付款的示例。是否有理由无法完成，或者最好有人可以提供一个例子？我想查看调用 Paypal 已返回支付令牌的示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:17:14.217

有这个。我原以为它会出现在谷歌中

[https://www.x.com/adaptive-payments-19](https://www.x.com/adaptive-payments-19)

# android - 将数据发送到指定的应用程序android

> ID：15499315
> 
> 赞同：1
> 
> 时间：2013-03-19T12:18:42.797
> 
> 标签：android, android-intent

我阅读了有关使用 ACTION_SEND 从此[链接获取已注册列表应用程序的信息](http://developer.android.com/training/sharing/send.html)

我正在使用代码：

```
Intent sendIntent = new Intent();
sendIntent.setAction(Intent.ACTION_SEND);
sendIntent.putExtra(Intent.EXTRA_TEXT, "This is my text to send.");
sendIntent.setType("text/plain");
startActivity(sendIntent); 
```

，但我想发送到没有列表的指定应用程序。怎么做？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-19T12:22:19.530

在意图中指定只有指定活动才能处理的内容，例如自定义 mimetype 或使用[intent.setClassName()](https://developer.android.com/reference/android/content/Intent.html#setClass%28android.content.Context,%20java.lang.Class%3C?%3E%29)的实际目标类名称。

# objective-c - 保留自动释放的对象会导致内存泄漏

> ID：15499319
> 
> 赞同：0
> 
> 时间：2013-03-19T12:18:48.083
> 
> 标签：objective-c, memory-management, memory-leaks

我正在将响应收集到变量中

```
-(NSMutableDictionary *)getCombineIdAndNames{    

NSMutableDictionary *lObjCombineIdAndNamesArrayPtr = [[NSMutableDictionary alloc] init];

   [lObjCombineIdAndNamesArrayPtr setObject:lObjtempNamePtr 
                                       forKey:lObjtempIdPtr];
   return [lObjCombineIdAndNamesArrayPtr autorelease];
} 
```

这导致内存泄漏

```
gObjAppDelegatePtr.m_cObjCombineIdNameDictPtr = [gObjAppDelegatePtr.m_cDbHandler getCombineIdAndNames]; 
```

`gObjAppDelegatePtr.m_cObjCombineIdNameDictPtr`. 这是副本类型的属性。但它仍然会导致内存泄漏。如何解决它。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:36:59.960

`getCombineIdAndNames`完全没问题。您正在`alloc`阅读字典并在返回之前自动释放它。那里没有错。

这向我表明内存泄漏是由`gObjAppDelegatePtr`实例引起的。要么它没有释放它的属性，要么整个对象都被泄露了。

顺便说一句，您可以改进的一件事`getCombineIdAndNames`是使用方便的构造函数 `NSMutableDictionary`来完全避免所有分配/释放调用。您还可以使用新的 Obj-C 容器语法：

```
-(NSMutableDictionary *)getCombineIdAndNames{    
    NSMutableDictionary *lObjCombineIdAndNamesArrayPtr = [NSMutableDictionary dictionary];
    lObjCombineIdAndNamesArrayPtr[lObjtempIdPtr] = lObjtempNamePtr;
    return lObjCombineIdAndNamesArrayPtr;
} 
```

# php - 在存档中显示页面和帖子

> ID：15499324
> 
> 赞同：0
> 
> 时间：2013-03-19T12:19:04.107
> 
> 标签：php, wordpress

我有很多类别，但为了清楚起见，我将仅举两个示例：

*   **包含许多**帖子的****新闻****
*****   **包含许多**页面的****产品**（我已在 中添加了此功能`functions.php`）******

 ****我想要`archive.php`显示：

*   用户选择新闻类别时的帖子
*   用户选择产品类别时的页面

目前，默认的 Wordpress 仅显示帖子而不显示页面。

我知道这可以通过添加一个简单的函数来实现，`functions.php`但我找不到它。

**编辑**：对于另一个具有自定义帖子类型“书籍”的项目，我使用了此代码

```
function query_post_type($query) {
    $post_types = get_post_types();

    if ( is_category() || is_tag()) {

        $post_type = get_query_var('books');

        if ( $post_type ) {
            $post_type = $post_type;
        } else {
            $post_type = $post_types;
        }

        $query->set( 'post_type', $post_type ); 

        return $query;
    }
}
add_filter('pre_get_posts', 'query_post_type'); 
```

我的情况有类似的情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:25:59.727

您可以在 WP Query 中单独查询页面。

PHP：

```
$args = array(
  'post_type' => 'page'
);

$query = new WP_Query( $args ); 
```

这将返回数据库中的所有页面，以及零个帖子。反之亦然，您可能必须`'post_type' => 'post'`查询所有帖子，但这是 WP 查询的默认行为。

有关这方面的更多文档，请查看 Wordpress Codex 中的[WP Query](https://codex.wordpress.org/Class_Reference/WP_Query)参考。****

# ios - MPMediaItem 此类与键的键值编码不兼容

> ID：15499327
> 
> 赞同：2
> 
> 时间：2013-03-19T12:19:19.790
> 
> 标签：ios, mpmediaitem

我试图在我的 iPod 库中检索歌曲的曲目编号。

基本上我查询了所有专辑如下：

```
NSArray *albums = [MPMediaQuery albumsQuery].collections; 
```

检索专辑：

```
MPMediaItemCollection *album = self.albums[0]; 
```

遍历歌曲并尝试记录曲目编号

```
for (MPMediaItem *mediaItem in self.album.items)
{
    NSLog(@"Track Number %@", [mediaItem valueForKey:MPMediaItemPropertyAlbumTrackCount]);
} 
```

但这给了我以下错误

```
Terminating app due to uncaught exception 'NSUnknownKeyException', reason:
'[<MPConcreteMediaItem 0x1cd818d0> valueForUndefinedKey:]: this class is 
not key value coding-compliant for the key albumTrackCount.' 
```

如果我尝试其他键，例如`MPMediaItemPropertyTitle`,`MPMediaItemPropertyAlbumTitle`或`MPMediaItemPropertyArtist`工作正常。关于为什么我无法访问`MPMediaItemPropertyAlbumTrackCount`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T12:25:30.703

您使用`valueForKey:`了这就是发生错误的原因。像这样使用`valueForProperty:`：

```
NSLog(@"Track Number %@", [mediaItem valueForProperty:MPMediaItemPropertyAlbumTrackCount]); 
```

在[MPMediaItem 类Referece](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMediaItem_ClassReference/Reference/Reference.html) Apple 说：

> 您可以通过使用这些属性键调用 valueForProperty 方法来获取媒体项的元数据。

# python - 使用 Python ElementTree 修改和重写 XML 文件

> ID：15499331
> 
> 赞同：0
> 
> 时间：2013-03-19T12:19:31.040
> 
> 标签：python, xml, elementtree

我有一个这样开头的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<Recipe xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"> 
```

我需要读进去，修改它，然后把它写回去。这是一个代码片段：

```
from xml.etree import ElementTree
with open('base.xml', 'rt') as f:
    tree = ElementTree.parse(f)

recipe = tree.find('')
t = recipe.find('Targets_Params/Target_Table/Target_Name')
t.text = "new Value"

output_file = open('new.xml', 'w' )
output_file.write(ElementTree.tostring(recipe))
output_file.close() 
```

我的问题是，当我写出文件时，我根本没有得到第一行，而第二行只有：

```
<Recipe> 
```

如何在保留原始结构的同时读取、修改和写出文件？

# python - TypeError: me() 正好接受 2 个参数（给定 3 个）

> ID：15499332
> 
> 赞同：0
> 
> 时间：2013-03-19T12:19:31.270
> 
> 标签：python

我正在尝试使用 supybot 插件，但我不断收到错误并且无法修复（我使用 Python 2.6）

这是我得到的错误：

```
Traceback (most recent call last):
  File "/usr/lib/python2.6/site-packages/supybot/callbacks.py", line 1180, in _callCommand
    self.callCommand(command, irc, msg, *args, **kwargs)
  File "/usr/lib/python2.6/site-packages/supybot/utils/python.py", line 86, in g
    f(self, *args, **kwargs)
  File "/usr/lib/python2.6/site-packages/supybot/callbacks.py", line 1166, in callCommand
    method(irc, msg, *args, **kwargs)
  File "/usr/lib/python2.6/site-packages/supybot/commands.py", line 913, in newf
    f(self, irc, msg, args, *state.args, **state.kwargs)
  File "/usr/lib/python2.6/site-packages/supybot/plugins/Slap1/plugin.py", line 109, in slap
    self.me(irc, text)
TypeError: me() takes exactly 2 arguments (3 given)
ERROR 2013-03-19T15:13:13 supybot Exception id: 0x873c0 
```

插件代码可以在这里找到：

[https://raw.github.com/StevenRKM/supybot-plugins/master/Slap/plugin.py](https://raw.github.com/StevenRKM/supybot-plugins/master/Slap/plugin.py)

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T12:23:17.360

您的`me`方法具有以下签名：`def me(self, msg)`. 它被称为`self.me(irc, text)`需要签名为`def me(self, irc, msg)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T12:23:37.613

我认为该消息提供了一个非常有力的线索，说明出了什么问题。

您`me()`使用三个参数 ( `self`,`irc`和`text`) 调用，而它需要两个 (`self`和`msg`)。

# asp.net - 如果表单身份验证票过期，如何更新数据库中的用户信息？

> ID：15499333
> 
> 赞同：0
> 
> 时间：2013-03-19T12:19:33.397
> 
> 标签：asp.net, asp.net-mvc-3, asp.net-mvc-4

我正在使用表单身份验证进行用户登录和注销。当用户身份验证票到期时我遇到问题，我想更新数据库中的一些信息。但此时工单中的用户信息为空

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:12:03.400

我将 Forms 身份验证票证到期时间增加到会话到期时间的两倍，以避免在会话超时之前票证到期。

请阅读[此](http://support.microsoft.com/kb/910443)内容以获取更多信息

# java - 如何在 Google Drive SDK java 客户端中为 Insert 函数指定 uploadType

> ID：15499334
> 
> 赞同：2
> 
> 时间：2013-03-19T12:19:34.257
> 
> 标签：java, google-drive-api

在用于插入功能的 Google Drive SDK 中，[文档](https://developers.google.com/drive/v2/reference/files/insert)说 uploadType 参数是必需的，可以采用 3 个值。但是它没有指定在使用 java 客户端时如何定义这个值。目前尚不清楚该示例是使用简单的、多部分的还是可恢复的。你如何在java api中定义uploadType。

谢谢

# java - log4j 干扰 - 级别一直设置为“关闭”

> ID：15499339
> 
> 赞同：1
> 
> 时间：2013-03-19T12:19:51.030
> 
> 标签：java, tomcat, servlets, log4j

我正在尝试在我的应用程序中设置 log4j，而我的第三方 JAR 之一似乎以某种方式不断将我的日志级别设置为“关闭”。它仅在执行该库中的代码时发生。我不知道它是如何做到这一点的，因为我没有使用它知道名称的记录器，而且我没有使用根记录器。我已经为此花费了 5 个小时，到目前为止，我唯一的成就是获得了超过 9000 的挫败感。

我在 Windows 7 64 位 Java 6 u23 上使用最新的 Tomcat (7.0.37)。

log4j.properties：

```
log4j.logger.com.foo.bar.SearchAndReport=TRACE, stdout, file

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%5p [%t] (%F:%L) - %m%n

log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.File=D:/logTest.log
log4j.appender.file.MaxFileSize=100KB
log4j.appender.file.MaxBackupIndex=1
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=[%p] %d{dd MMM yyyy HH:mm:ss,SSS} - %C{2}.%M() - %m %n 
```

然后在我的 Servlet 中进行测试，我有：

```
Logger log = Logger.getLogger(SearchAndReport.class);
System.out.println(log.getLevel()); 
```

每次运行 DoPost 或 DoGet 时都会运行此代码，并且级别保持在我设置的级别 (TRACE) 直到第三方代码运行并将其关闭。

我的问题是：

1.  另一个记录器如何干扰我自己命名和设置的记录器？
2.  我怎样才能阻止这种情况的发生，并强制我设置的水平？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:33:51.823

1.  Log4j 配置未合并，似乎其他配置存在并且被读取而不是您的配置，或者配置被覆盖。在 JAR 中嵌入 log4j 配置文件是许多类似问题的根源。

2.  您可以使用`org.apache.log4j.PropertyConfigurator`或重新加载代码中的配置`org.apache.log4j.xml.DOMConfigurator`。还要检查您的第三方代码是否未使用它们。

# visual-studio-2012 - 构建成功发布失败visual studio 2012 WPF项目

> ID：15499349
> 
> 赞同：1
> 
> 时间：2013-03-19T12:20:17.257
> 
> 标签：visual-studio-2012

我有一个 WPF 项目，我通常会在安装后发布单击该项目大约 3 天前停止发布。

如果我从代码构建和/或运行项目，它会成功但发布失败。无法发布，因为项目未能构建。1 1 ProjectName 找不到文件 'obj\x86\Debug\ProjectName.exe'。项目名

有趣的是，如果我查看 obj\x86\Debug 文件夹，它似乎将 ProjectName.exe 放入一瞬间，然后在失败前再次将其删除。

输出窗口中的错误是：C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(3075,5): error MSB3113: Could not find file 'obj\x86\Debug\ProjectName.可执行程序'。

错误：无法发布，因为项目未能构建。

我已经尝试过正常的东西，比如清洁、重建、重新启动

将构建的详细程度更改为诊断后，我得到了有关失败的以下信息：

> C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(3075,5)：错误 MSB3113：找不到文件 'obj\x86\Debug\ProjectName.exe'。
> 
> 完成执行任务“GenerateApplicationManifest”——失败。（任务 ID：147）
> 
> 在项目“ProjectName.vbproj”中完成构建目标“GenerateApplicationManifest” - FAILED.: (TargetId:166)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:42:17.627

按照保罗的建议，我能够找到答案。我通过 Tools | 增加了构建项目的详细程度。选项 | 项目与解决方案 | 构建和运行 | 项目构建输出详细程度。

一旦我查看了更详细的构建输出，解决问题就很简单了。

详细的输出告诉了我发布失败的确切位置，因此我能够解决这些问题。

# devexpress - 如何在 DevExpress pivotgrid 字段列表中仅显示维度？

> ID：15499351
> 
> 赞同：0
> 
> 时间：2013-03-19T12:20:19.533
> 
> 标签：devexpress, customization

我正在使用 DevExpress pivotgrid 来显示数据。当我们右键单击数据透视网格并选择“显示字段列表”时，如何仅显示 DevExpress pivotgrid FieldList/CustomizationForm 中的维度？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:22:31.330

这可以通过将`PivotGridField.Options.ShowInCustomizationForm`属性设置为 false 来轻松完成。

**编辑：**

![在此处输入图像描述](../Images/ded9ef2c318d90951676dd6e71a80c98.png)

# javascript - 在 JavaScript 中获取整个页面宽度的简单跨浏览器方法，而不仅仅是视口宽度？

> ID：15499358
> 
> 赞同：3
> 
> 时间：2013-03-19T12:20:44.603
> 
> 标签：javascript, prototypejs, width

我看过很多关于获取浏览器视口宽度的帖子，但我想找到的基本上是浏览器视口的宽度，如果它足够宽以避免水平滚动条。

我正在使用 Prototype JS 框架，并查看了使用该框架和使用纯 JavaScript 的各种选项。例如：

*   `$(document.body).getWidth()`并`document.body.clientWidth`返回不包括边距的视口宽度。
*   `document.documentElement.clientWidth`并`window.innerWidth`返回包括边距在内的视口宽度。

我也试图偷偷摸摸：我将一个已知宽度的 DIV 绝对定位在页面的右侧边缘（即 CSS `right:0`），目的是获得其左侧边缘位置，但实际上与右侧对齐- 视口的边缘。

我发现唯一可行的方法是使用 JavaScript 向右滚动，直到它不再滚动（简单地使用`scrollBy(1000000, 0)`通常就足够了，但是 while 循环显然更可靠），然后获取水平滚动偏移并添加到视口宽度。但我不想滚动窗口：我想以某种方式检查它！

任何建议表示赞赏，即使是 jQuery 的，至少我可以看到 jQuery 是如何做到的。

* * *

这是一个显示`document.body.scrollWidth`不起作用的简单示例：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<body onload="document.getElementById('sw').innerHTML = document.body.scrollWidth">
<p><code>document.body.scrollWidth</code> = <span id="sw"></span></p>
<div style="position:absolute;left:0;bottom:0;width:1980px;background-color:#ccc;padding:10px;">This DIV is 2000px wide including padding.</div>
</body>
</html> 
```

其输出应显示宽度为 2000 像素，因为这是页面最宽部分的宽度。它没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:27:31.853

关于什么

```
window.screen.width; 
```

* * *

```
document.body.style.width = (window.screen.width - 15) + 'px'; 
```

`window.screen.width - 15`足以避免水平滚动条。`15`是垂直滚动条宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:48:59.443

宽度：

```
document.body.scrollWidth 
```

身高：

```
document.body.scrollHeight 
```

编辑：对于 IE，您必须`position:relative`为 body 标签指定

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T13:28:37.063

浏览器不会将 html 和 body 视为普通元素。特别是许多浏览器在处理 body 元素上的 scrollWidth 等方面确实存在问题。唯一真正的解决方案是将所有内容包装在一个用于整个页面的巨大 div 中并使用它。因为 div 是一个普通元素，所以它不受导致 body 和 html 异常行为的错误的影响。

# ios - 从另一个视图重新加载数据 uitableview

> ID：15499360
> 
> 赞同：1
> 
> 时间：2013-03-19T12:20:46.907
> 
> 标签：ios, objective-c, uitableview, reloaddata

我想`UITableview`从另一个重新加载数据`UIView`。

（在`UITableview`中`ListNoteViewController`）

我从`DetailViewController`（另一个uiview）做的电话是：

```
ListNoteViewController *controller = [[ListNoteViewController alloc] initWithNibName:@"ListNoteViewController" bundle:[NSBundle mainBundle]];

[controller.TableNotes reloadData]; 
```

但什么也没发生。拜托，有人可以帮助我吗？

进阶谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T12:32:46.133

什么都不会发生，因为您正在尝试重新加载**尚未创建的 tableview！**只有在加载特定 UIViewController 的视图后才会创建 UI 元素（如`UITableView`等）。`UILabel`在这里，您刚刚初始化了视图控制器。

所以你应该把这个写在

```
 -(void)viewDidAppear:(BOOL)animated 
     {
        [self.TableNotes reloadData];
     } 
```

或者

```
 -(void)viewWillAppear:(BOOL)animated 
   {
       [self.TableNotes reloadData];
   } 
```

您的 ListNoteViewController。

这是您的代码的问题。如果`ListNoteViewController`已经在堆栈中，即，如果您已经加载了相同的视图控制器并且现在正尝试在其上重新加载 tableview，那么您可以使用**自定义委托**来实现相同的目的。

您可以在此处查看[如何添加委托](https://stackoverflow.com/a/626946/1756131)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T13:19:29.040

您可以使用委托。

在 DetailViewController.h

```
@property (nonatomic, strong) id Delegate; 
```

在 ListNoteViewController.m

```
-(void)myTVReloadMethod {
[myTable reloadData];
} 
```

当你要去 DetailViewController

```
DetailViewController *dvc = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:[NSBundle mainBundle]];
dvc.Delegate = self;
[self.navigationController pushViewController:dvc animated: yes]; 
```

在 DetailViewController 中的任何方法中

```
[delegate performSelector:@selector(myTVReloadMethod) withObject:nil]; 
```

# responsive-design - 我可以在 Foundation 中使用 push-pull/source ordering 来实现这种布局吗？

> ID：15499368
> 
> 赞同：1
> 
> 时间：2013-03-19T12:20:55.800
> 
> 标签：responsive-design, zurb-foundation

我正在尝试使用[Zurb Foundation 4 Grid](http://foundation.zurb.com/docs/components/grid.html)创建响应式布局，并且很难理解如何使用推拉式创建列布局，从而在移动设备和桌面设备中正确排序内容而无需求助到 javascript 或在“hide-for-small/hide-for-large”分类的 DIV 中复制数据。

遵循“移动优先”的理念，假设我有以下所需的活动站点布局：

移动的：

```
12 columns
========================
[Name / Date / Location]
[Photo                 ]
[Event details         ]
[Attendees             ]
[RSVP                  ]
[Edit link             ] 
```

桌面：

```
4 columns          8 columns
=============================================
[Photo     ]    |   [Name / Date / Location ]
[RSVP      ]    |   [Event details          ]
[Edit Link ]    |   [Attendees              ] 
```

如何格式化 HTML 以便在两种情况下都能以正确的顺序显示？

现在，我正在为移动设备执行此操作：

```
<!-- note: there are many ways to create this layout -
           it could be in sets of individual rows as well -->
<div class="row">
  <div class="small-12 columns">
      <div class="namedatelocation">(name/date/location html)</div>
  </div>
  <div class="small-12 columns">
      <div class="photo">(photo html)</div>
  </div>
  <div class="small-12 columns">
      <div class="details">(details html)</div>
  </div>
  <div class="small-12 columns">
      <div class="attendees">(attendees html)</div>
  </div>
  <div class="small-12 columns">
      <div class="rsvp">(rsvp html)</div>
  </div>
  <div class="small-12 columns">
      <div class="edit">(edit html)</div>
  </div>
</div> 
```

我可以为桌面执行此操作：

```
<div class="row">
  <div class="large-4 columns">
      <div class="photo">(photo html)</div>
      <div class="rsvp">(rsvp html)</div>
      <div class="edit">(edit html)</div>
  </div>
  <div class="large-8 columns">
      <div class="namedatelocation">(name/date/location html)</div>
      <div class="details">(details html)</div>
      <div class="attendees">(attendees html)</div>
  </div>
</div> 
```

如何以响应式方式创建此内容？到目前为止，我能够完成的最好的事情是将内容分成“对”并将每一对放入自己的行中，并使用推拉来更改行内 2 列的顺序。除了只能重新排序对的限制之外，这种方法的问题是每行的高度等于该行中两列中最高的列。这意味着桌面布局中有大量的死区。

关于如何完成我想做的事情的任何想法？或者在Foundation中是不可能的？如果不是，一般来说解决这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T02:43:44.010

您仍然可以使用类似于在 F3 中使用的 push 和 pull 类。您可以阅读[Foundation 文档页面](http://foundation.zurb.com/docs/components/grid.html)上的 Source Ordering 部分。以下是解决问题的方法：

```
<div class="row">
      <div class="large-8 push-4 small-12 columns">
          <div class="namedatelocation">(name/date/location html)</div>
      </div>
      <div class="large-4 pull-8 small-12 columns">
          <div class="photo">(photo html)</div>
      </div>
      <div class="large-8 push-4 small-12 columns">
          <div class="details">(details html)</div>
      </div>
        <div class="large-4 pull-8 small-12 columns rsvp">
          <div class="rsvp">(rsvp html)</div>
      </div>
      <div class="large-8 push-4 small-12 columns attendees">
          <div class="attendees">(attendees html)</div>
      </div>

      <div class="large-4 pull-8 small-12 columns">
          <div class="edit">(edit html)</div>
      </div>
    </div> 
```

现在这是桌面版，棘手的部分是如何在移动版上展示它。请注意，我首先处理桌面，因为拉和推可以更轻松地处理您的桌面视图。要布局您的移动视图，您需要做一些 css，实际上没有 Foundation 方法可以做到这一点，这不是我所知道的。对于解决方案，例如，我假设您的 div 有一个“定义的高度”，并且高度设置为 30px，您可以添加以下样式：

```
.row .small-12.rsvp {
    margin-top: 30px;
}
.row .small-12.attendees {
    margin-top: -30px;
} 
```

注意：请注意，我分别将类`rsvp`和添加`attendees`到了两个 small-12 div、第四个和第五个 div。

# logging - 如何停止 TopLink 在 Weblogic 应用程序中的登录？

> ID：15499373
> 
> 赞同：0
> 
> 时间：2013-03-19T12:21:08.503
> 
> 标签：logging, jpa, weblogic, toplink

我正在使用 TopLink 作为 JPA 提供程序（Weblogic 附带的提供程序）在 Weblogic 12.1 中开发应用程序。
我的应用程序使用了很多“SELECT FOR UPDATE NOWAIT”查询，这些查询通常会失败并引发异常。接下来发生的是 TopLink 记录异常，它导致我的日志文件急剧增加。

我想停止 TopLink 的记录。我尝试使用以下 persistence.xml 属性：

```
<property name="toplink.logging.level" value="OFF"/> 
```

但它似乎被忽略了。

请问有什么帮助吗？
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:14:29.857

TopLink 使用 EclipseLink 作为 JPA 提供程序，因此要禁用日志记录，您可以设置，

“eclipselink.loggging.level”=“关闭”

您也可以使用禁用异常日志记录，

“eclipselink.logging.exceptions”=“假”

见， [http://wiki.eclipse.org/EclipseLink/Examples/JPA/Logging](http://wiki.eclipse.org/EclipseLink/Examples/JPA/Logging)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:07:30.510

您可以在 persistence.xml 文件中设置 TopLink 日志记录级别。但是，当您接受与 WebLogic Sever 的默认日志记录集成时，这些设置将被忽略，并使用 WebLogic Server 中设置的日志记录配置。

`eclipselink.logging.logger`您可以通过将属性名称设置为不同的设置来覆盖默认的日志记录集成，

```
<property name="eclipselink.logging.logger" value="DefaultLogger"/> 
```

# ios - UIImageView 方面适合和居中

> ID：15499376
> 
> 赞同：195
> 
> 时间：2013-03-19T12:21:16.907
> 
> 标签：ios, objective-c, uiimageview, uiimage

我有一个以编程方式声明的图像视图，并且我也在以编程方式设置它的图像。

但是，我发现自己无法将图像设置为既适合方面又使中心与图像视图对齐。

换句话说，我希望图像：

*   如果图像很大，请按比例缩小以适应方面。
*   如果图像很小，居中但不放大。

我怎么得到它？

* * *

## 回答 #1

> 赞同：214
> 
> 时间：2013-03-19T12:35:33.773

只需粘贴解决方案：

就像@manohar 说的

```
imageView.contentMode = UIViewContentModeCenter;
if (imageView.bounds.size.width > ((UIImage*)imagesArray[i]).size.width && imageView.bounds.size.height > ((UIImage*)imagesArray[i]).size.height) {
       imageView.contentMode = UIViewContentModeScaleAspectFit;
} 
```

解决了我的问题

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2014-11-14T06:00:28.400

在 swift 语言中，我们可以设置 UIImage 视图的内容模式，如下所示：

```
let newImgThumb = UIImageView(frame: CGRect(x: 10, y: 10, width: 100, height: 100))
newImgThumb.contentMode = .scaleAspectFit 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2018-12-10T11:06:59.587

## 迅速

```
yourImageView.contentMode = .center 
```

您可以使用以下选项来定位图像：

*   `scaleToFill`
*   `scaleAspectFit` // 内容缩放以适应固定方面。余数是透明的
*   `redraw`// 重绘边界变化（调用 -setNeedsDisplay）
*   `center`// 内容保持相同大小。定位调整。
*   `top`
*   `bottom`
*   `left`
*   `right`
*   `topLeft`
*   `topRight`
*   `bottomLeft`
*   `bottomRight`

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-05-26T23:14:37.153

**更新的答案**

当我在 2014 年最初回答这个问题时，没有要求在小图像的情况下不放大图像。（问题是[在 2015 年编辑的](https://stackoverflow.com/posts/15499376/revisions)。）如果您有这样的要求，您确实需要将图像的大小与 imageView 的大小进行比较并使用`UIViewContentModeCenter`（在图像小于 imageView 的情况下）或`UIViewContentModeScaleAspectFit`在所有其他情况下.

**原始答案**

将 imageView 的 contentMode 设置`UIViewContentModeScaleAspectFit`为对我来说就足够了。它似乎也使图像居中。我不确定为什么其他人使用基于图像的逻辑。另请参阅此问题：[iOS aspect fit and center](https://stackoverflow.com/questions/7049105/ios-aspect-fit-and-center)

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-03-10T06:35:57.310

我这样解决了这个问题。

1.  将图像设置为`UIImageView`（使用`UIViewContentModeScaleAspectFit`）
2.  获取图像大小`(CGSize imageSize = imageView.image.size)`
3.  `UIImageView`调整大小。`[imageView sizeThatFits:imageSize]`
4.  移动你想要的位置。

我想把 UIView 放在`UICollectionViewCell`. 所以，我使用了这个功能。

```
- (void)setImageToCenter:(UIImageView *)imageView
{
    CGSize imageSize = imageView.image.size;
    [imageView sizeThatFits:imageSize];
    CGPoint imageViewCenter = imageView.center;
     imageViewCenter.x = CGRectGetMidX(self.contentView.frame);
    [imageView setCenter:imageViewCenter];
} 
```

这个对我有用。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2016-04-20T10:23:10.723

如果图像不大于视图，则该子类使用中心，否则按比例缩小。我发现这对`UIImageView`改变大小很有用。

它显示的图像比大尺寸的视图小，但比小尺寸的视图大。我只希望它缩小，而不是放大。

```
class CenterScaleToFitImageView: UIImageView {
    override var bounds: CGRect {
        didSet {
            adjustContentMode()
        }
    }

    override var image: UIImage? {
        didSet {
            adjustContentMode()
        }
    }

    func adjustContentMode() {
        guard let image = image else {
            return
        }
        if image.size.width > bounds.size.width ||
            image.size.height > bounds.size.height {
            contentMode = .ScaleAspectFit
        } else {
            contentMode = .Center
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2015-12-18T13:15:47.220

您可以通过将图像视图的内容模式设置为 UIViewContentModeScaleAspectFill 来实现。

然后使用以下方法方法来获取调整大小的 uiimage 对象。

```
- (UIImage*)setProfileImage:(UIImage *)imageToResize onImageView:(UIImageView *)imageView
{
    CGFloat width = imageToResize.size.width;
    CGFloat height = imageToResize.size.height;
    float scaleFactor;
    if(width > height)
    {
        scaleFactor = imageView.frame.size.height / height;
    }
    else
    {
        scaleFactor = imageView.frame.size.width / width;
    }

    UIGraphicsBeginImageContextWithOptions(CGSizeMake(width * scaleFactor, height * scaleFactor), NO, 0.0);
    [imageToResize drawInRect:CGRectMake(0, 0, width * scaleFactor, height * scaleFactor)];
    UIImage *resizedImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return resizedImage;
} 
```

在此编辑（Swift 版本）

```
func setProfileImage(imageToResize: UIImage, onImageView: UIImageView) -> UIImage
{
    let width = imageToResize.size.width
    let height = imageToResize.size.height

    var scaleFactor: CGFloat

    if(width > height)
    {
        scaleFactor = onImageView.frame.size.height / height;
    }
    else
    {
        scaleFactor = onImageView.frame.size.width / width;
    }

    UIGraphicsBeginImageContextWithOptions(CGSizeMake(width * scaleFactor, height * scaleFactor), false, 0.0)
    imageToResize.drawInRect(CGRectMake(0, 0, width * scaleFactor, height * scaleFactor))
    let resizedImage = UIGraphicsGetImageFromCurrentImageContext()
    UIGraphicsEndImageContext()

    return resizedImage;
} 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2016-01-03T13:22:32.730

```
let bannerImageView = UIImageView();
bannerImageView.contentMode = .ScaleAspectFit;
bannerImageView.frame = CGRectMake(cftX, cftY, ViewWidth, scrollHeight); 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2013-12-09T05:58:13.213

```
[your_imageview setContentMode:UIViewContentModeCenter]; 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-04-04T09:12:53.053

For people looking for UIImage resizing,

```
@implementation UIImage (Resize)

- (UIImage *)scaledToSize:(CGSize)size
{
    UIGraphicsBeginImageContextWithOptions(size, NO, 0.0f);
    [self drawInRect:CGRectMake(0.0f, 0.0f, size.width, size.height)];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return image;
}

- (UIImage *)aspectFitToSize:(CGSize)size
{
    CGFloat aspect = self.size.width / self.size.height;
    if (size.width / aspect <= size.height)
    {
        return [self scaledToSize:CGSizeMake(size.width, size.width / aspect)];
    } else {
        return [self scaledToSize:CGSizeMake(size.height * aspect, size.height)];
    }
}

- (UIImage *)aspectFillToSize:(CGSize)size
{
    CGFloat imgAspect = self.size.width / self.size.height;
    CGFloat sizeAspect = size.width/size.height;

    CGSize scaledSize;

        if (sizeAspect > imgAspect) { // increase width, crop height
            scaledSize = CGSizeMake(size.width, size.width / imgAspect);
        } else { // increase height, crop width
            scaledSize = CGSizeMake(size.height * imgAspect, size.height);
        }
    UIGraphicsBeginImageContextWithOptions(size, NO, 0.0f);
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextClipToRect(context, CGRectMake(0, 0, size.width, size.height));
    [self drawInRect:CGRectMake(0.0f, 0.0f, scaledSize.width, scaledSize.height)];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return image;
}

@end 
```

# php - 错误：Yii::app()->user->id 作为 $id 函数参数

> ID：15499379
> 
> 赞同：-1
> 
> 时间：2013-03-19T12:21:21.623
> 
> 标签：php, yii

`Yii::app()->user->id`用作`$id`函数参数的正确方法是什么？

代码：

```
public function actionUpdate($id=Yii::app()->user->id) 
```

错误：

```
Parse error: syntax error, unexpected '(', expecting ')' in .../UserController.php on line 1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T12:23:52.753

来自关于函数参数的[php 文档](http://php.net/manual/en/functions.arguments.php)

> 默认值必须是常量表达式，而不是（例如）变量、类成员或函数调用。

你不能像这样声明函数

```
public function actionUpdate($id=Yii::app()->user->id) 
```

您应该在函数体或类构造函数等中初始化变量。

# xpages - 列名称的设计不提供按 Xpages 中的要求对视图进行排序

> ID：15499387
> 
> 赞同：0
> 
> 时间：2013-03-19T12:21:44.550
> 
> 标签：xpages, xpages-ssjs

我们定制的 XPages 名称选择器开始抛出以下错误。在 Domino 852 FP4 上一切正常，但在我们升级到 Domino 853 FP3 后，它开始抛出以下错误。它抱怨 View 控件中引用 Names.nsf 的排序列。我们仍然有 Domino 852 FP4，并且在旧盒子上一切正常，但在 Domino 853 FP3 上却不行。有没有其他人遇到过类似的问题？

列名称的设计不提供按要求对视图进行排序。

▼ 堆栈跟踪

```
com.ibm.xsp.FacesExceptionEx: The design of column Name does not provide for sorting the view as requested.
    com.ibm.xsp.model.domino.viewnavigator.AbstractViewCollectionNavigator.readEntries(AbstractViewCollectionNavigator.java:95)
    com.ibm.xsp.model.domino.wrapped.DominoViewEntryArray.readEntries(DominoViewEntryArray.java:104)
    com.ibm.xsp.model.domino.DominoViewDataContainer.readViewEntries(DominoViewDataContainer.java:548)
    com.ibm.xsp.model.domino.DominoViewDataContainer.getRowCount(DominoViewDataContainer.java:527)
    com.ibm.xsp.model.domino.DominoViewDataModel.getRowCount(DominoViewDataModel.java:109)
    com.ibm.xsp.component.UIPager$PagerState.<init>(UIPager.java:76)
    com.ibm.xsp.component.UIPager$PagerState.<init>(UIPager.java:71)
    com.ibm.xsp.component.UIPager.createPagerState(UIPager.java:540)
    com.ibm.xsp.renderkit.html_extended.XPagerRenderer.encodeChildren(XPagerRenderer.java:67)
    com.ibm.xsp.renderkit.ReadOnlyAdapterRenderer.encodeChildren(ReadOnlyAdapterRenderer.java:162)
    javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:979)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:842)
    com.ibm.xsp.renderkit.html_extended.ViewPanelRenderer.processPagerCell(ViewPanelRenderer.java:656)
    com.ibm.xsp.renderkit.html_extended.ViewPanelRenderer.encodeBegin(ViewPanelRenderer.java:354)
    com.ibm.xsp.renderkit.ReadOnlyAdapterRenderer.encodeBegin(ReadOnlyAdapterRenderer.java:146)
    javax.faces.component.UIComponentBase.encodeBegin(UIComponentBase.java:956)
    javax.faces.component.UIData.encodeBegin(UIData.java:788)
    com.ibm.xsp.component.UIDataEx.encodeBegin(UIDataEx.java:413)
    com.ibm.xsp.component.UIViewPanel.encodeBegin(UIViewPanel.java:288)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:840)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.component.UIViewRootEx._renderView(UIViewRootEx.java:1317)
    com.ibm.xsp.component.UIViewRootEx.renderView(UIViewRootEx.java:1255)
    com.ibm.xsp.application.ViewHandlerExImpl.doRender(ViewHandlerExImpl.java:641)
    com.ibm.xsp.application.ViewHandlerExImpl._renderView(ViewHandlerExImpl.java:320)
    com.ibm.xsp.application.ViewHandlerExImpl.renderView(ViewHandlerExImpl.java:335)
    com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:103)
    com.sun.faces.lifecycle.LifecycleImpl.phase(LifecycleImpl.java:210)
    com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:120)
    com.ibm.xsp.controller.FacesControllerImpl.render(FacesControllerImpl.java:264)
    com.ibm.xsp.webapp.FacesServlet.serviceView(FacesServlet.java:248)
    com.ibm.xsp.webapp.FacesServletEx.serviceView(FacesServletEx.java:204)
    com.ibm.xsp.webapp.FacesServlet.service(FacesServlet.java:160)
    com.ibm.xsp.webapp.FacesServletEx.service(FacesServletEx.java:138)
    com.ibm.xsp.webapp.DesignerFacesServlet.service(DesignerFacesServlet.java:103)
    com.ibm.designer.runtime.domino.adapter.ComponentModule.invokeServlet(ComponentModule.java:576)
    com.ibm.domino.xsp.module.nsf.NSFComponentModule.invokeServlet(NSFComponentModule.java:1281)
    com.ibm.designer.runtime.domino.adapter.ComponentModule$AdapterInvoker.invokeServlet(ComponentModule.java:847)
    com.ibm.designer.runtime.domino.adapter.ComponentModule$ServletInvoker.doService(ComponentModule.java:796)
    com.ibm.designer.runtime.domino.adapter.ComponentModule.doService(ComponentModule.java:565)
    com.ibm.domino.xsp.module.nsf.NSFComponentModule.doService(NSFComponentModule.java:1265)
    com.ibm.domino.xsp.module.nsf.NSFService.doServiceInternal(NSFService.java:653)
    com.ibm.domino.xsp.module.nsf.NSFService.doService(NSFService.java:476)
    com.ibm.designer.runtime.domino.adapter.LCDEnvironment.doService(LCDEnvironment.java:341)
    com.ibm.designer.runtime.domino.adapter.LCDEnvironment.service(LCDEnvironment.java:297)
    com.ibm.domino.xsp.bridge.http.engine.XspCmdManager.service(XspCmdManager.java:272)
NotesException: The design of column Name does not provide for sorting the view as requested.
    lotus.domino.local.View.FTSearchSorted(Unknown Source)
    com.ibm.xsp.model.domino.viewnavigator.FTViewNavigatorEx.createCollection(FTViewNavigatorEx.java:79)
    com.ibm.xsp.model.domino.viewnavigator.AbstractViewCollectionNavigator.readEntries(AbstractViewCollectionNavigator.java:76)
    com.ibm.xsp.model.domino.wrapped.DominoViewEntryArray.readEntries(DominoViewEntryArray.java:104)
    com.ibm.xsp.model.domino.DominoViewDataContainer.readViewEntries(DominoViewDataContainer.java:548)
    com.ibm.xsp.model.domino.DominoViewDataContainer.getRowCount(DominoViewDataContainer.java:527)
    com.ibm.xsp.model.domino.DominoViewDataModel.getRowCount(DominoViewDataModel.java:109)
    com.ibm.xsp.component.UIPager$PagerState.<init>(UIPager.java:76)
    com.ibm.xsp.component.UIPager$PagerState.<init>(UIPager.java:71)
    com.ibm.xsp.component.UIPager.createPagerState(UIPager.java:540)
    com.ibm.xsp.renderkit.html_extended.XPagerRenderer.encodeChildren(XPagerRenderer.java:67)
    com.ibm.xsp.renderkit.ReadOnlyAdapterRenderer.encodeChildren(ReadOnlyAdapterRenderer.java:162)
    javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:979)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:842)
    com.ibm.xsp.renderkit.html_extended.ViewPanelRenderer.processPagerCell(ViewPanelRenderer.java:656)
    com.ibm.xsp.renderkit.html_extended.ViewPanelRenderer.encodeBegin(ViewPanelRenderer.java:354)
    com.ibm.xsp.renderkit.ReadOnlyAdapterRenderer.encodeBegin(ReadOnlyAdapterRenderer.java:146)
    javax.faces.component.UIComponentBase.encodeBegin(UIComponentBase.java:956)
    javax.faces.component.UIData.encodeBegin(UIData.java:788)
    com.ibm.xsp.component.UIDataEx.encodeBegin(UIDataEx.java:413)
    com.ibm.xsp.component.UIViewPanel.encodeBegin(UIViewPanel.java:288)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:840)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.component.UIViewRootEx._renderView(UIViewRootEx.java:1317)
    com.ibm.xsp.component.UIViewRootEx.renderView(UIViewRootEx.java:1255)
    com.ibm.xsp.application.ViewHandlerExImpl.doRender(ViewHandlerExImpl.java:641)
    com.ibm.xsp.application.ViewHandlerExImpl._renderView(ViewHandlerExImpl.java:320)
    com.ibm.xsp.application.ViewHandlerExImpl.renderView(ViewHandlerExImpl.java:335)
    com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:103)
    com.sun.faces.lifecycle.LifecycleImpl.phase(LifecycleImpl.java:210)
    com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:120)
    com.ibm.xsp.controller.FacesControllerImpl.render(FacesControllerImpl.java:264)
    com.ibm.xsp.webapp.FacesServlet.serviceView(FacesServlet.java:248)
    com.ibm.xsp.webapp.FacesServletEx.serviceView(FacesServletEx.java:204)
    com.ibm.xsp.webapp.FacesServlet.service(FacesServlet.java:160)
    com.ibm.xsp.webapp.FacesServletEx.service(FacesServletEx.java:138)
    com.ibm.xsp.webapp.DesignerFacesServlet.service(DesignerFacesServlet.java:103)
    com.ibm.designer.runtime.domino.adapter.ComponentModule.invokeServlet(ComponentModule.java:576)
    com.ibm.domino.xsp.module.nsf.NSFComponentModule.invokeServlet(NSFComponentModule.java:1281)
    com.ibm.designer.runtime.domino.adapter.ComponentModule$AdapterInvoker.invokeServlet(ComponentModule.java:847)
    com.ibm.designer.runtime.domino.adapter.ComponentModule$ServletInvoker.doService(ComponentModule.java:796)
    com.ibm.designer.runtime.domino.adapter.ComponentModule.doService(ComponentModule.java:565)
    com.ibm.domino.xsp.module.nsf.NSFComponentModule.doService(NSFComponentModule.java:1265)
    com.ibm.domino.xsp.module.nsf.NSFService.doServiceInternal(NSFService.java:653)
    com.ibm.domino.xsp.module.nsf.NSFService.doService(NSFService.java:476)
    com.ibm.designer.runtime.domino.adapter.LCDEnvironment.doService(LCDEnvironment.java:341)
    com.ibm.designer.runtime.domino.adapter.LCDEnvironment.service(LCDEnvironment.java:297)
    com.ibm.domino.xsp.bridge.http.engine.XspCmdManager.service(XspCmdManager.java:272) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:38:36.507

您需要在允许重新排序的视图的视图列属性中打勾

# java - Android Bluetooth_admin 权限错误

> ID：15499388
> 
> 赞同：3
> 
> 时间：2013-03-19T12:21:45.350
> 
> 标签：java, android, bluetooth

关于Android蓝牙发现。

从清单权限错误中获取此错误。但是，我发现发布的唯一错误是他们忘记将权限放在应用程序之外。然而，这里不是这种情况。

该程序在运行 Jelly Bean 4.1 的 Galaxy S2 上进行了测试。

错误如下：

```
03-19 13:08:03.933: W/dalvikvm(12616): threadid=1: thread exiting with uncaught exception (group=0x413082a0)
03-19 13:08:03.938: E/AndroidRuntime(12616): FATAL EXCEPTION: main
03-19 13:08:03.938: E/AndroidRuntime(12616): java.lang.SecurityException: Need BLUETOOTH_ADMIN permission: Neither user 10004 nor current process has android.permission.BLUETOOTH_ADMIN. 
```

基本上清单看起来像：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.motioncontrol"
    android:versionCode="1"
    android:versionName="1.0" >

    <user-permission android:name="android.permission.BLUETOOTH_ADMIN" />              
    <uses-permission android:name="android.permission.BLUETOOTH" />

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:debuggable="true"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.motioncontrol.Main"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".AccelerometerDat"
            android:label="@string/accelerator_title" />
        <activity
            android:name=".GyroscopeData" />
        <activity
            android:name=".Gravitydat" />
        <activity
            android:name=".Linearacc" />
        <activity
            android:name=".Bluetooth" />
        <activity 
            android:name=".CheckBluetooth" />
        <activity
            android:name=".About"
            android:label="@string/about_title"
            android:theme="@android:style/Theme.Dialog" />
    </application>

</manifest> 
```

以及发生错误的类：

```
 private void doDiscovery() {
    if (D) Log.d(TAG, "doDiscovery()");

    // Indicate scanning in the title
    setProgressBarIndeterminateVisibility(true);
    setTitle(R.string.scanning);
    Log.d(TAG, "indicates scanning");

    // Turn on sub-title for new devices
    findViewById(R.id.title_new_devices).setVisibility(View.VISIBLE);
    Log.d(TAG, "Set up sub-title for new devices");

    // If we're already discovering, stop it
    if (mBtAdapter.isDiscovering()) {
        mBtAdapter.cancelDiscovery();
        Log.i(TAG, "Already running discovering, stop it!");
    }

    // Request discover from BluetoothAdapter
    mBtAdapter.startDiscovery();
    Log.d(TAG, "Request discover form BluetoothAdapter");
} 
```

希望得到答案，出了什么问题:)。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T12:53:29.483

改变

```
<user-permission android:name="android.permission.BLUETOOTH_ADMIN" /> 
```

到

```
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" /> 
```

`<user-permission>`用于规范其他应用程序对当前组件的访问。您应该尝试`<uses-permission>`获得特权。

# asp.net-mvc-4 - 如何在 Kendo Grid 的每一行中添加自定义按钮

> ID：15499389
> 
> 赞同：6
> 
> 时间：2013-03-19T12:21:47.460
> 
> 标签：asp.net-mvc-4, kendo-grid

我正在尝试将自定义按钮添加到 Kendo Grid 的每一行，但我没有得到所需的输出。所以我的要求是为每一行添加动态按钮，然后单击这些按钮，我需要处理一些我需要的东西要传递给该按钮单击的几个列值。

我尝试过类似的东西

```
@(Html.Kendo().Grid(Model)    
.Name("Grid")
.Columns(columns =>
{
columns.Bound(o => o.Id);

    columns.Bound(o => o.TBRId).Width(100).Title(UI_Resources.ListLabel_TBRId);

    columns.Bound(o => o.THUQuantity).Width(50).Title(UI_Resources.ListLabel_THUQuantity).HtmlAttributes(new { style = "text-align:right" });
    columns.Bound(o => o.Id).ClientTemplate("<input width='50px' type='button' value= " + UI_Resources.Button_Details + " onclick='onDetailUnitClick(#= Id #);'  class='btn btnTable'  />").Width(50).Title("");
columns.Bound(o => o.IsPOD).ClientTemplate("#= AppendZeroPODButton(Id,IsPOD) #").Width(60).Title("");

 })

.Pageable()

.Sortable()

.Scrollable()

.Filterable()

.DataSource(dataSource => dataSource

    .Ajax()

            .Read(read => read.Action("GetUnitsForShipment", "POD",new { shipmentId = @Model, Mode = "POD" }))

          )

 )

/*JavaScript */

function onDetailUnitClick(Id) {
var podDateTime = $("#enteredPODDateTime").val();
var stopId = $("#hiddenStopId").val();
var mode = '';
if (typeof $("#hiddenMode").val() != 'undefined')
    mode = $("#hiddenMode").val();
window.location.href = "/POD/Details/" + Id + "?stopId=" + stopId + "&date=" + podDateTime + "&mode=" + mode;
  };

  function AppendZeroPODButton(Id, isPOD) {
if (isPOD == true) {
    return "<input width='100px' type='button' value= 'Zero POD' onclick='onPODUnitClick(" + Id + ",1);'  class='btn btnTable btn-success' disabled />";
}
else {

    return "<input width='100px' type='button' value= 'Zero POD' onclick='onPODUnitClick(" + Id + ",1);'  class='btn btnTable btn-danger'  />";
}} 
```

你能告诉我我做错了什么吗！！它适用于 Telerek MVC 网格。

谢谢约根德拉·辛格

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T14:20:25.293

如果我将 ClientTemplate 更改为

```
columns.Template(t => t.IsPOD).HeaderTemplate("").ClientTemplate(@"<a href='javascript: void(0)' class='btn btnTable' onclick='onDetailUnitClick(#= Id #)' title='button delete'>" + UI_Resources.Button_Details + " </a>").Title("").Width(50); 
```

和

```
columns.Bound(p => p.IsPOD).ClientTemplate("# if( IsPOD == true) { # <a href='javascript: void(0)' class='btn btnTable btn-success' onclick='onPODUnitClick(#= Id #, 1)' title='Zero POD'>" + UI_Resources.Button_ZeroPOD + "</a> # } else {# <a href='javascript: void(0)' class='btn btnTable btn-danger' onclick='onPODUnitClick(#= Id #, 1)' title='Zero POD'>" + UI_Resources.Button_ZeroPOD + "</a> # } #").Title("").Width(100); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-13T07:31:14.193

[您也可以添加自定义按钮。请参阅此http](http://demos.kendoui.com/web/grid/custom-command.html) ://demos.kendoui.c​​om/web/grid/custom-command.html

# c# - 使用 from-where 构造检查要包含在集合中的成员

> ID：15499390
> 
> 赞同：0
> 
> 时间：2013-03-19T12:21:48.040
> 
> 标签：c#

我有 1 个主集合，其成员是具有字段内容类型的对象。其中 content-type 的值是 enum `ContentTypeEnum`。有一个分组内容类型的列表（比如 TEXT_GROUP 或 pdf，文本...）`List<ContentTypeEnum>`

如果对象的内容类型是 TEXT_GROUP 中的内容类型，我想过滤任何给定内容组 (TEXT_GROUP) 的结果`List<ContentTypeEnum>`

好吧，我对 c# 比较陌生，但是我已经看到了“in”，可能与 sql 中的类似吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:24:16.423

你应该使用`Contains`方法：

```
form p in ...
where TEXT_GROUOP.Contains(p.ContType) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:26:51.460

`Item`班级：

```
public class Item
{
    public string Value { get; set; }
    public ContentTypeEnum Type { get; set; }
} 
```

`ContentTypeEnum`枚举：

```
public enum ContentTypeEnum
{
    Text,
    PDF,
    XML,
    MP3
} 
```

你的小组：

```
var textGroup = new List<ContentTypeEnum>() {
    ContentTypeEnum.Text,
    ContentTypeEnum.PDF,
    ContentTypeEnum.XML
}; 
```

的输入列表`Item`：

```
var items = new List<Item>() {
    new Item() { Value = "custom PDF file", Type = ContentTypeEnum.PDF },
    new Item() { Value = "My fav MP3", Type = ContentTypeEnum.MP3 },
    new Item() { Value = "Paper", Type = ContentTypeEnum.Text }
}; 
```

该查询将仅返回具有`textGroup`列表内类型的项目：

```
var textItems = items.Where(i => textGroup.Contains(i.Type)).ToList(); 
```

如此简单`Console.WriteLine(item.Value)`，每个结果项都会打印：

```
custom PDF file
Paper 
```

# regex - Perl 使用正则表达式拆分以检索数组中的值

> ID：15499394
> 
> 赞同：0
> 
> 时间：2013-03-19T12:21:53.457
> 
> 标签：regex, arrays, perl, split

我有以下文件：

```
id001   word1(100);"word2"(100);"word3"(98);"word4"(98);"word5"(94);word6;
id002   word1(100);word7(100);word8(100);word9(100);word10;word11; 
```

我想拆分文件的每一行以检索数组中的 id (=id00x)、val (=wordX) 和 int (=100)。我的代码：

```
my @fields = split /[\t();"]"?/, $line;
$id = $fields[0];
for ( my $i = 1; $i < @fields; $i +=2 )
{
  $val=$fields[$i];
  $int=$fields[$i+1]
} 
```

我只检索不在双引号之间的 id 和 val。请你给我一些线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:27:59.617

这里的问题**是正**则表达式。您可以通过在进行拆分后立即放入循环来验证这一点，如下所示：

```
 my @fields = split /[\t();"]"?/, $line;
  $id = $fields[0];
  foreach my $field(@fields) {
    print("field is $field\n");
  } 
```

这将显示您有几个空字段，这就是为什么您没有将任何内容放入变量中的原因。空字段的原因是正则表达式将允许列出的任何一个字符充当单词边界，因此当您连续拥有多个字符时，它们将导致多个连续拆分。

我会通过不尝试一次拆分整行来简化操作，而是先将行拆分为较小的部分，然后使用正则表达式提取这些部分。这是我的建议：

```
my @fields = split /[\t;]/, $line;
$id = $fields[0];
for ( my $i = 1; $i < $#fields; $i++ )
  {
    ($val, $int) = $fields[$i] =~ /\"?(\w+)\"?\((\d+)\)/;
    print("val is $val, int is $int\n");
  } 
```

另请注意，获取数组中对象数量的方法是`$#arrayname`，不是`@arrayname`。后者也适用于标量环境，但这是一个不好的习惯。

* * *

**下面是原始答案，这只是关于语法**

这里至少有一个错误：

```
$val=$fields[i];
$int=$fields[i+1] 
```

您还需要`$`在 the 之前使用`i`，如下所示：

```
$val=$fields[$i];
$int=$fields[$i+1] 
```

# python - 无法使用 Python 写入 xls、php 或 doc 文件

> ID：15499397
> 
> 赞同：0
> 
> 时间：2013-03-19T12:21:55.073
> 
> 标签：python, sockets, file-io

我在将数据从客户端写入服务器端到 .xls、.php 或 .doc 文件时遇到问题。这是我的服务器端代码

```
amtOfFilesHeader = ""
while True:
    d = connectionSocket.recv(1)
    if d == '\n':
        break
    amtOfFilesHeader += d
amtOfFiles = int(amtOfFilesHeader.split()[-1])
while amtOfFiles > 0:
    header = ""
    while True:
        d = connectionSocket.recv(1)
        if d == '\n':
            break
        header += d

    filesize = int(header.split()[-1])
    # or search for the last space in header
    # and get a substring of header as filename
    filename = "".join(header.split()[1:-1])
    data = ""
    while filesize > 0:
        chunk = connectionSocket.recv(1) # or any amount of data
        filesize -= len(chunk)
        data += chunk
    file = open((server_side_folder+'/'+filename),'wb')
    file.write(data)
    file.close()
    amtOfFiles-=1 
```

我不断收到错误，例如：

```
IOError: [Errno 2] No such file or directory: 'server_side/test.xls' 
```

虽然我已经打开了要写入的文件。我在代码中做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:39:43.283

我设法找到错误在哪里。事实证明，我的服务器和客户端线程的超时时间太短了。增加超时后，我可以读取 .xls、.php 和 .php 文件。

# mysql - 更改 auto_increment 值后出现重复主键错误

> ID：15499399
> 
> 赞同：1
> 
> 时间：2013-03-19T12:22:16.700
> 
> 标签：mysql, primary-key, auto-increment

我有一个超过 6000 条记录的 mysql innoDB 表。主键 (ID) 设置为 auto_incremented。此时 auto_increment 值为 41804。

我通过insert语句插入了2000多条记录，发现一些查询有一些数据问题。此时 auto_increment 值已更改为 42500。

我修复了插入语句中的数据问题，从表中删除了新插入的记录，并将 auto_increment 值更改为 41804（增加 10）

`alter table mytable auto_increment = 41804`

我再次运行插入语句 - 这次我收到错误代码：1062 - 键 'PRIMARY' 的重复条目 '320-41804'

最大 ID 值为 41794，auto_increment 值为 41804 - 没有 ID 值为 41804 的记录 - 但我仍然收到重复键错误。

任何人都可以对此有所了解吗？

非常感激。

# c# - 使用 SQLLite 从 60K 数据中删除 50 条记录需要更多时间（17560 ms）

> ID：15499400
> 
> 赞同：2
> 
> 时间：2013-03-19T12:22:17.083
> 
> 标签：c#, sqlite

实际数据数为 60K，因为我使用以下查询仅删除 50 条记录

```
Delete from Analysis where AnalysisKey in (34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67, 68,69,60,61,62,63,64,65,66,67,68,69,70,71,72,73) 
```

如何更快地删除那些记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:25:14.270

我以前从未使用过 sqlite，但你不能使用[between](http://www.sqlite.org/lang_expr.html#between)吗？

```
Delete from Analysis where AnalysisKey between 34 and 73 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:30:04.737

如果在几乎所有数据库之间删除大量行而不提交事务，则执行速度会很慢。

另一方面，选择要删除的行可能是一个问题。使用适当的工具检查您的查询性能，并确保您拥有正确的索引。

# mysql - 从联合查询中获取单行中的字段

> ID：15499401
> 
> 赞同：2
> 
> 时间：2013-03-19T12:22:18.350
> 
> 标签：mysql, sql, sql-server

我写了一个从联合检索结果的查询。但它在两行中显示结果，并将空白列保留为 0。但我需要在一行中显示结果，不需要零。谁能帮我解决这个问题。这是我在下面给出的查询，我分两部分写了>>>

```
 SELECT COUNT(gi.id) AS no_of_group ,
       0 AS no_of_borrower
FROM group_info AS gi
WHERE gi.domain_status_id = 1
  AND gi.group_status_id = 1
  AND gi.group_creation_date <= '2013-01-31'
  AND gi.project_info_id = 'BI0000000000000000000001'
  AND gi.branch_info_id = 'BI0000000000000000000363'
UNION
SELECT 0 AS no_of_group ,
       COUNT(outerlat.member_info_id) AS no_of_borrower
FROM
  (SELECT lat.member_info_id,
          MAX(lat.id) AS max_member_id
   FROM loan_account_transaction AS lat
   WHERE lat.project_info_id = 'BI0000000000000000000001'
     AND lat.country_id = 1
     AND lat.domain_status_id = 1
     AND lat.office_info_id = 'BI0000000000000000000363'
     AND lat.transaction_date <= '2013-01-31'
   GROUP BY lat.member_info_id) AS tempData
INNER JOIN loan_account_transaction AS outerlat ON (tempData.max_member_id = outerlat.id)
WHERE outerlat.loan_status_id IN(1,3,4,5) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:28:25.567

您可以改为选择每一列作为子查询，如下所示：

```
SELECT
    (SELECT  COUNT(gi.id)
    FROM    group_info AS gi
    WHERE   gi.domain_status_id = 1 AND 
        gi.group_status_id = 1 AND 
        gi.group_creation_date <= '2013-01-31' AND 
        gi.project_info_id = 'BI0000000000000000000001' AND
        gi.branch_info_id = 'BI0000000000000000000363')  AS no_of_group
    ,(SELECT  COUNT(outerlat.member_info_id)
    FROM
        (SELECT lat.member_info_id, MAX(lat.id) AS max_member_id  FROM loan_account_transaction AS lat 
        WHERE lat.project_info_id = 'BI0000000000000000000001' AND lat.country_id = 1 AND lat.domain_status_id = 1
        AND lat.office_info_id = 'BI0000000000000000000363' AND lat.transaction_date <= '2013-01-31' 
    GROUP BY lat.member_info_id) AS tempData
    INNER JOIN loan_account_transaction AS outerlat 
     ON (tempData.max_member_id = outerlat.id )
    WHERE   outerlat.loan_status_id IN(1,3,4,5)) AS no_of_borrower 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T12:29:13.063

您可以使用 CTE（通用表表达式） -

```
With AllData as
( SELECT
    Count -- etc
      AS no_of_group,
    0 AS no_of_borrower 
UNION ALL
  SELECT 
    0 AS no_of_group,
    COUNT -- etc
      AS no_of_borrower 
)
SELECT
  Sum(no_of_group)    as no_of_group,
  Sum(no_of_borrower) as no_of_borrower
FROM AllData 
```

# jquery - 无法选择第 n 个子 div

> ID：15499405
> 
> 赞同：2
> 
> 时间：2013-03-19T12:22:29.193
> 
> 标签：jquery, html

我试图移动一些 div，但是我似乎无法选择它们只是通过对象对象：

[http://jsfiddle.net/kL3c8/1/](http://jsfiddle.net/kL3c8/1/)

```
<div class="partnerGroupContent">
   <div class="column"> 
        <div class="sponsor">1</div>
        <div class="sponsor">2</div>
   </div>
    <div class="column1"> 
        <div class="sponsor">3</div>
        <div class="sponsor">4</div>
   </div>
</div>

var rowCount = 2

var myColumn = $('.partnerGroupContent:nth-child(2)')

if (rowCount == 2) {

$('.partnerGroupContent').after('<div class="partnerGroupContent2">' + myColumn + '</div>');

} 
```

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T12:27:07.013

您正在将一个 jQuery 对象连接到一个字符串，它不会那样工作。而你误会了`:nth-child`。它是一个过滤器，用于过滤集合中作为`nth`其父级子级的元素，因此您可能想要这样：

```
$('.partnerGroupContent > :nth-child(2)') 
```

和

```
$('.partnerGroupContent').after(
    $('<div>', {
        'class': 'partnerGroupContent2'
    }).append(myColumn) //append the actual element
                    //don't concatenate strings
) 
```

[http://jsfiddle.net/kL3c8/6/](http://jsfiddle.net/kL3c8/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T12:26:08.077

问题是：`$('.partnerGroupContent:nth-child(2))`没有返回任何东西。

采用：`var myColumn = $('.partnerGroupContent').children(2);`

然后将其附加到`partnerGroup`using `html`：`myColumn.html()`

我已经更新了你的小提琴以显示下面的内容更新：

[http://jsfiddle.net/kL3c8/5/](http://jsfiddle.net/kL3c8/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T12:30:41.700

尝试

```
var rowCount = 2

var myColumn = $('.partnerGroupContent > :nth-child(2)')

if (rowCount == 2) {

$('<div class="partnerGroupContent2"></div>').insertAfter('.partnerGroupContent').append(myColumn.clone());

} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/kL3c8/12/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T12:53:31.623

即使您可以通过以下方式获取所有列 div 的数组

```
var rowCount = 2
var columnArray = $('div.partnerGroupContent > div'); 
```

并通过其数组索引获取特定列 div

```
if (rowCount == 2) {
   var myColumn = $(divArray[rowCount-1]).html();
   $('.partnerGroupContent').after('<div class="partnerGroupContent2">' + myColumn +     '</div>');
} 
```

# html - 仅将 colgroup 类应用于某些行

> ID：15499407
> 
> 赞同：0
> 
> 时间：2013-03-19T12:22:35.463
> 
> 标签：html, css, html-table, css-tables, colgroup

我正在尝试将一组带有边框的列分开，但在保留没有该边框的页眉和页脚时遇到了麻烦。

这是一个例子：http: [//jsfiddle.net/cgVHz/1/](http://jsfiddle.net/cgVHz/1/)

如您所见，表格的两个标题也有边框，这不是我要找的。

我正在尝试覆盖`colgroup`边框，但无法正常工作：

```
.demo{
    border-collapse: collapse; !important
}
.demo th{
    text-align:center;
    border-right:0px;
}
.demo colgroup{
    border-right: 1px solid #C4C4C4;
} 
```

这可能吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:26:15.257

尝试将您的更改`.demo colgroup`为`.demo td`，它按预期工作。

# java - 如何使用 Maven 构建 WSDL

> ID：15499409
> 
> 赞同：7
> 
> 时间：2013-03-19T12:22:49.273
> 
> 标签：java, web-services, maven, wsdl, netsuite

我正在寻找用 Maven 替换提供的 Ant 构建。我知道（但没有使用过）ant run，我也不喜欢。

长话短说，NetSuite 提供了一个 wsdl 以在针对其 ERP 产品进行 Web 服务调用时使用，我目前使用他们提供的 ant 构建从 wsdl 生成代理类。[（此处](http://www.netsuite.com/portal/developers/resources/suitetalk-sample-applications.shtml)提供示例应用程序、wsdl 和修补轴）

我遇到的问题是 ant 任务使用修补过的轴 1.4（和支持库，其中一些已经有 7 年的历史了），我想使用可以从中央 maven 存储库中轻松获得的库来实现这个 wsdl，并且最好是电流。

谁能指出我需要在哪里研究可行的解决方案？

对于任何需要知道的人：我尝试使用axis2生成并引发以下异常：

```
timeException: Element QName is null for ExceededRequestSizeFault!
        at org.apache.axis2.wsdl.codegen.CodeGenerationEngine.generate(CodeGenerationEngine.java:293)
        at org.apache.axis2.wsdl.WSDL2Code.main(WSDL2Code.java:35)
        at org.apache.axis2.wsdl.WSDL2Java.main(WSDL2Java.java:24)
Caused by: org.apache.axis2.wsdl.codegen.CodeGenerationException: java.lang.RuntimeException: Element QName is null for ExceededRequestSizeFault!
        at org.apache.axis2.wsdl.codegen.emitter.AxisServiceBasedMultiLanguageEmitter.emitSkeleton(AxisServiceBasedMultiLanguageEmitter.java:1451)
        at org.apache.axis2.wsdl.codegen.CodeGenerationEngine.generate(CodeGenerationEngine.java:275)
        ... 2 more
Caused by: java.lang.RuntimeException: Element QName is null for ExceededRequestSizeFault!
        at org.apache.axis2.wsdl.codegen.emitter.AxisServiceBasedMultiLanguageEmitter.getFaultParamElements(AxisServiceBasedMultiLanguageEmitter.java:
2925)
        at org.apache.axis2.wsdl.codegen.emitter.AxisServiceBasedMultiLanguageEmitter.getFaultElement(AxisServiceBasedMultiLanguageEmitter.java:2844)
        at org.apache.axis2.wsdl.codegen.emitter.AxisServiceBasedMultiLanguageEmitter.generateMethodElement(AxisServiceBasedMultiLanguageEmitter.java:
2366)
        at org.apache.axis2.wsdl.codegen.emitter.AxisServiceBasedMultiLanguageEmitter.loadOperations(AxisServiceBasedMultiLanguageEmitter.java:2242)
        at org.apache.axis2.wsdl.codegen.emitter.AxisServiceBasedMultiLanguageEmitter.createDOMDocumentForSkeleton(AxisServiceBasedMultiLanguageEmitte
r.java:2156)
        at org.apache.axis2.wsdl.codegen.emitter.AxisServiceBasedMultiLanguageEmitter.writeSkeleton(AxisServiceBasedMultiLanguageEmitter.java:2082)
        at org.apache.axis2.wsdl.codegen.emitter.AxisServiceBasedMultiLanguageEmitter.emitSkeleton(AxisServiceBasedMultiLanguageEmitter.java:1408)
        ... 3 more 
```

如果它是使用最近的 NetSuite WSDL 的经过测试的解决方案，则可以加分。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-19T13:47:09.673

我建议你使用[cxf maven 插件](http://cxf.apache.org/docs/maven-cxf-codegen-plugin-wsdl-to-java.html)。我用[这个 wsdl](https://webservices.netsuite.com/wsdl/v2012_2_0/netsuite.wsdl)做了一个小测试，它成功生成并编译（JVM 1.7）1408 个源文件。（耐心点，这需要一段时间......）

我只收到一些关于达到最大枚举大小的警告。所以我必须传递一个绑定文件来允许更大的枚举。我是通过绑定文件完成的。感谢[这篇文章](http://mail-archives.apache.org/mod_mbox/cxf-users/200901.mbox/%3C21491299.post@talk.nabble.com%3E)

这是所需的`bind.xml`文件

```
<jaxb:bindings xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"
           xmlns:xsd="http://www.w3.org/2001/XMLSchema"
           jaxb:version="2.0">
    <jaxb:bindings >
        <jaxb:globalBindings typesafeEnumMaxMembers="2000"/>
    </jaxb:bindings>
</jaxb:bindings> 
```

以及相关部分`pom.xml`（如您所见：wsdl 和 bind.xml 在`/src/main/resources`）

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-codegen-plugin</artifactId>
            <version>2.7.3</version>
            <executions>
                <execution>
                    <id>generate-sources</id>
                    <phase>generate-sources</phase>
                    <configuration>
                       <sourceRoot>${project.build.directory}/generated/cxf</sourceRoot>
                        <wsdlOptions>
                            <wsdlOption>
                               <bindingFiles>
                                    <bindingFile>${basedir}/src/main/resources/bind.xml</bindingFile>
                                </bindingFiles>
                               <wsdl>
                                  ${basedir}/src/main/resources/netsuite.wsdl
                               </wsdl>
                            </wsdlOption>
                        </wsdlOptions>
                    </configuration>
                    <goals>
                        <goal>wsdl2java</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

# c++ - 如何在 Qt 中分离发布和调试版本？

> ID：15499411
> 
> 赞同：4
> 
> 时间：2013-03-19T12:22:50.167
> 
> 标签：c++, qt4, qmake

我想将发布和调试版本的二进制文件放在源代码旁边的不同文件夹中。在 .pro 文件中：

```
CONFIG(debug){
    DESTDIR = ./debug
    OBJECTS_DIR = debug/.obj
    MOC_DIR = debug/.moc
    RCC_DIR = debug/.rcc
    UI_DIR = debug/.ui
}

CONFIG(release){
    DESTDIR = ./release
    OBJECTS_DIR = release/.obj
    MOC_DIR = release/.moc
    RCC_DIR = release/.rcc
    UI_DIR = release/.ui
} 
```

对于发布版本，一切都很好。我在项目的根目录中有一个 ./release 目录。但是对于调试构建，qmake 没有创建调试目录，它的名称是`release`（再次！）：

```
qmake CONFIG+=debug CONFIG+=local 
// generates release and put everything in that directory
// but I want debug directory ! 
```

**更新：**

替换调试和发布的顺序，创建调试目录。qmake 只看到最后一个配置...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T13:16:29.870

如果您确实必须进行源内构建并具有单独的输出目录，我认为您需要将每个[文档](http://qt-project.org/doc/qt-4.8/qmake-function-reference.html#config-config)的条件更改为

```
CONFIG(debug, debug|release){
    DESTDIR = ./debug
    OBJECTS_DIR = debug/.obj
    MOC_DIR = debug/.moc
    RCC_DIR = debug/.rcc
    UI_DIR = debug/.ui
}

CONFIG(release, debug|release){
    DESTDIR = ./release
    OBJECTS_DIR = release/.obj
    MOC_DIR = release/.moc
    RCC_DIR = release/.rcc
    UI_DIR = release/.ui
} 
```

不过，不要问我为什么。恕我直言，QMake 是一种应不惜一切代价避免的可憎之物……

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T12:33:15.850

真正的解决方案是进行源外构建。这样，您不必每次从调试切换到发布构建并返回时都重新配置。这样做，使用以下命令：

```
mkdir build-dbg
cd build-dbg
qmake ../foo.pro CONFIG+=debug
cd ..
mkdir build-rel
cd build-rel
qmake ../foo.pro CONFIG+=release 
```

另外，您不会用构建碎片污染源代码树。

# windows - 批处理脚本ENDLOCAL / SET里面if语句不起作用

> ID：15499418
> 
> 赞同：0
> 
> 时间：2013-03-19T12:23:12.373
> 
> 标签：windows, batch-file, command

我是批处理脚本的新手，我正在编写一个批处理脚本来设置环境变量。下面是我使用的批处理脚本。

```
if 1 == 1 (
    setlocal enableextensions enabledelayedexpansion
    SET name1=%1_hello
    endlocal & SET name=%name1%
    echo varaiable %name%
    goto :eof
) 
```

但我面临的问题是变量`name`没有被设置并且`name1`in`endlocal & SET name=%name1%`总是为空或从以前设置的环境变量中获取它。但是相同的代码没有`if statement`工作。

```
 setlocal enableextensions enabledelayedexpansion
    SET name1=%1_hello
    endlocal & SET name=%name1%
    echo varaiable %name%
    goto :eof 
```

在上面的代码中，`name1`变量被设置并被`name`显示。有人可以帮我摆脱这个问题。为什么`endlocal / set`if 语句的行为不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T12:47:06.283

当 IF 语句被解析时——从`IF`到它的右括号， ALL`%var%`被这些变量的内容替换，因为它们在该行被解析时，即在执行之前。

# html - css 转换仅适用于 Firefox

> ID：15499422
> 
> 赞同：0
> 
> 时间：2013-03-19T12:23:19.223
> 
> 标签：html, css, xhtml

当您将鼠标悬停在菜单上时，我正在尝试使用 CSS 过渡使背景图像淡入我的菜单。我希望它需要大约 2 秒才能褪色。它在 Firefox 中完美运行，但在其他浏览器上它只是立即出现。在 IE 中它根本不起作用，但我并不担心，因为我从没想过它会起作用。

CSS 布局

```
.mainmenu ul li{
    height: 86px;
    display: inline-block;
    margin: 0;
    padding: 0;
    z-index:1000;
    position: relative;
}
.mainmenu li:after{
    content: "";
    opacity: 0;
    -webkit-transition: opacity 1.5s;
    -moz-transition:    opacity 1.5s;
    -o-transition:      opacity 1.5s;
    -ms-transition:     opacity 1.5s;
    transition:         opacity 1.5s;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    position: absolute;
}
.mainmenu li:hover:after{
        opacity: 1;
} 
```

CSS 外观

```
.mainmenu li:after{
    background: url(../images/hover.png) no-repeat center bottom;
} 
```

HTML

```
<div class="mainmenu"><ul><li><a href=''>Home</a></li><li><a href=''>About Us</a></li><li><a href=''>Contact Us</a></li><li><a href=''>Blog</a></li><li><a href=''>Gallery</a></li></ul></div> 
```

任何人都可以帮忙吗？除了 IE 之外，它确实可以使图像出现，但在 Chrome、Safari 和 Opera 上使用淡入淡出效果会很好。如果我能让它工作，我什至可以考虑 IE。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:42:31.583

正如@Tyriar 所说，对生成内容的过渡/动画的支持是不完整的。它适用于我最新的 Chrome Canary（版本 27.0.1444.3），所以很快它就会出现在常规频道上。届时，IE10、Firefox 4+ 和 Chrome 将支持该功能。Safari 有一个明显的例外（和 Opera，但随着[向 WebKit](http://my.opera.com/ODIN/blog/300-million-users-and-move-to-webkit)的迁移可能会改变）。

目前最强大的解决方案是避免尝试转换`:after`内容，而是将其应用于现有元素之一。这将为您提供 68% 的[不错的浏览器支持](http://caniuse.com/#search=transition)。

这是您原始示例的[一个分支](http://jsfiddle.net/cherryflavourpez/VjAp9/)。我没有使用生成的内容，而是将 CSS 简化为：

```
.mainmenu li {
    position: relative;
    display: inline-block;
    height: 86px;
    margin: 0;
    padding: 0;
    background: url(http://placekitten.com/g/100/100) no-repeat center bottom;
}

.mainmenu li a {
    position: relative;
    display: block;
    height: 100%;
    background: #fff;
    transition: all 1.5s ease-in-out;
}

.mainmenu li a:hover {
    background: transparent;
} 
```

在这里，过渡是在`a`自身上，从白色渐变到透明以达到相同的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:48:23.890

如前所述，`:psuedo`元素上的 CSS 过渡没有得到最大的支持。 [http://css-tricks.com/transitions-and-animations-on-css-generated-content/](http://css-tricks.com/transitions-and-animations-on-css-generated-content/)

使用直接的 html/css 你可以做到这一点，但你需要添加一个额外的元素，这是一个快速的小提琴：http: [//jsfiddle.net/9uwVb/](http://jsfiddle.net/9uwVb/)

# mysql - modeshape3 - 开始使用 mysql，非 jndi

> ID：15499425
> 
> 赞同：0
> 
> 时间：2013-03-19T12:23:26.747
> 
> 标签：mysql, config, modeshape

有人可以帮我整理一下我的配置，或者指出一个不使用 JNDI 的 MySql 示例。我越来越...

> 表“modeshape.content_store”不存在

...我认为这是因为它不是自动创建模式。我尝试使用 modeshape2 属性无济于事。这是我的配置

```
{
    "name" : "My Repository",
    "monitoring" : {
        "enabled" : true
    },
    "workspaces" : {
        "default" : "defaultWorkspace",
        "allowCreation" : true
    },
    "storage" : {
        "cacheName" : "Teneo Repository",
        "binaryStorage" : {
            "type" : "database",
        "driverClass" : "com.mysql.jdbc.Driver",
        "username" : "modeshape",
        "password" : "modeshape",
        "url" : "jdbc:mysql://127.0.0.1:3306/modeshape?autoReconnect=true",
        "autoGenerateSchema" : "create"
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:16:23.553

如果表格尚不存在，ModeShape 总是尝试创建表格。（ModeShape 无法识别`autoGenerateSchema`配置中的字段。）

确保您已授予数据库用户创建表的权限。或者，只需使用 DDL 手动创建表：

```
CREATE TABLE CONTENT_STORE (
  cid VARCHAR(255) NOT NULL,
  mime_type VARCHAR(255),
  ext_text VARCHAR(1000),
  usage INTEGER,
  usage_time TIMESTAMP,
  payload BLOB,
  primary key(cid)
) 
```

您可以根据需要调整列的大小或类型，只要类型与上面列出的兼容即可。例如，在 MySQL 上，BLOB 列的最大大小为 (2^16+1) 字节，但只需将 (2^24+2) 字节更改为 MEDIUMBLOB 或 (2^32+3) 字节更改为 LONGBLOB。

# c# - LINQ 多对多查询抛出 NotSupportedException

> ID：15499426
> 
> 赞同：0
> 
> 时间：2013-03-19T12:23:29.447
> 
> 标签：c#, linq, join, entity

我的 EntityFramework 中有一个多对多的关系。我想查询与特定“mannschaft”相关的所有“teilnehmer”。

![在此处输入图像描述](../Images/10abf8de8840ed7ffd3ef3d66ab8ccc9.png)

这是我的查询

```
var teilnehmerquery = (from teil in myEntities.Teilnehmer 
                       from man in teil.Mannschaft 
                       where 1==man.MNR 
                       select teil); 
```

如果我运行它，查询会抛出一个`NotSupportedException`. 怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:27:36.043

尝试

```
var teilnehmerquery = myEntities.Mannschaft.Where( m => m.MNR == 1 )
                                .SelectMany( m => m.Teilnehmer ); 
```

# java - 反序列化图像对象数组

> ID：15499428
> 
> 赞同：2
> 
> 时间：2013-03-19T12:23:35.820
> 
> 标签：java, android, deserialization

我有以下课程：

```
public class DetailedProduct implements Serializable {
    //attributes + get and set
    private Colour colour;
    //get+set

  public class Colour implements Serializable{
     private ArrayList<Image> images;
    //get+set

    public Image[] getImages() {
      return images.toArray(new Image[images.size()]);
    }
  }

  public class Image implements Serializable{

    private static final long serialVersionUID = 3460333138445770749L;
    private String image1;
    private String image2;
    private String image3;

        //get/set methods
  }
 } 
```

我后来创建了一个 Intent 如下

```
 DetailedProduct.Colour mCurrentColour;
  Intent myIntent = new Intent(DetailsActivity.this, ImageGallery.class);
  myIntent.putExtra("Images", mCurrentColour.getImages());
  startActivity(myIntent); 
```

现在在 ImageGallery 类中，我尝试了以下代码：

```
 Serializable extras = getIntent().getSerializableExtra("Images");
    if (extras != null) {
        images = (Image[]) extras;
    } 
```

但是我遇到了以下异常：java.lang.RuntimeException：无法启动活动 ComponentInfo{com./com.productdetails.ProductImageGallery}：java.lang.ClassCastException：java.lang.Object[] 无法转换为 com。 productdetails.DetailedProduct$Image[]

如何正确地将可序列化转换为 Image 数组

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:32:54.863

您将图像作为 arrayList 传递。但是你把它当作一个数组..

使用以下代码

```
Serializable extras = getIntent().getSerializableExtra("Images");
    if (extras != null) {
        images = (ArrayList<Image>) extras;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:30:49.593

快速思考，您可以简单地将图像制作成 bytearray[]，并且由于咬数组是可序列化的原始类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T12:31:02.423

你投不正确

```
 java.lang.ClassCastException: java.lang.Object[] cannot be cast to com.productdetails.DetailedProduct$Image[] 
```

您将 ListArray 赋予意图，并尝试使用数组对其进行投射

这条线不正确

```
 if (extras != null) {
        images = (Image[]) extras;
    } 
```

用。。。来代替

```
 if (extras != null) {
        images = (ListArray<Image>) extras;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T22:58:04.827

Android 运行时无法序列化数组。数组类型仍然实现`Serializable`，但是当它从 Intent 使用的 Bundle 中返回时，它已经丢失了所有信息（包括类型，它始终是`Ljava.lang.Object`。互联网上的一些答案建议使用`Parcelable`，但是我尝试并没有成功.

可以完成的是传输`Parcelable`对象集合，但以 的形式`ArrayList`，这也恰好是您在原始样本中使用的数据结构。调用代码如下所示：

```
Intent intent = new Intent(this, Target.class);
ArrayList<Foo> data = new ArrayList<Foo>();
data.add(new Foo());

intent.putParcelableArrayListExtra("data", data);
intent.putExtra("serializable", new Foo[] {new Foo()});
startActivity(intent); 
```

我使用了常用的名为 的虚拟类`Foo`，但请注意，实现`Parcelable`起来非常乏味。此外，它要求您的类有一个`static`名为`CREATOR`type的字段`Parcelable.Creator<T>`，而对于内部类型，这在 Java 语言中根本不可能。这就是为什么您必须切换到嵌套（静态）类，最终在构造函数中传递您当前的*外部*实例并相应地更改字段可见性（从`private`到`public`或包私有）。顺便说一句，这也将提高你的代码库的可测试性，因为你减少了耦合。我的意思是，而不是这个不可编译的来源：

```
public class Product implements Parcelable {
  public class Color implements Parcelable {
    public static final Parcelable.Creator<Color> CREATOR; // Illegal!!!
  }
} 
```

像这样的东西

```
public class Product implements Parcelable{
  public static class Color implements Parcelable {
    public Color(Product exOuter) {
    }
  }
} 
```

但请注意，这样您将无法访问封闭类的非静态成员，因此最好`Color`移出`Product`.

# java - 计算最近截面的角度

> ID：15499431
> 
> 赞同：0
> 
> 时间：2013-03-19T12:23:47.200
> 
> 标签：java, android, math

假设我有一个圆圈。用户可以触摸边缘周围的圆圈，我可以获得他们触摸圆圈的角度（从中心）。现在，假设圆圈被 8 个部分分割。

因此，在每个部分我都会有以下内容：

```
section 0 = 0 degrees
section 1 = 45 degrees
section 2 = 90 degrees
section 3 = 135 degrees
...
section 7 = 315 degrees 
```

那么从已经接触到的角度，怎样才能得到最近的截面角度呢？例如，如果用户以 95 度触摸，我应该能够计算 90 度（第 2 节）作为最近的截面角度。

我实际上是在 android/Java 上这样做的。因此，任何实用功能都会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:31:23.150

正如雅各布已经在评论中指出的那样，可以从 找到该部分，并且可以从 找到`round(angle/45)`地板角度`45*(round(angle/45))`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:26:45.507

我不知道Java语法，但以下应该做

```
(round((angle/360)*numSections))*360/numSections 
```

角度/numSections 计算必须是浮点数，并且该轮必须四舍五入为整数；1.4 为 1，1.6 为 2 的那种回合。此外，您可能需要额外的 if 将 360 转换为 0。

# c++ - 添加/删除函数静态变量会破坏二进制兼容性吗？

> ID：15499437
> 
> 赞同：5
> 
> 时间：2013-03-19T12:23:59.893
> 
> 标签：c++

我必须维护我正在开发的这个 C++ 库的二进制兼容性。

目前，我有一些类似的东西

```
class Foo
{
    void Bar()
    {
        static bool flag = true;
    }
} 
```

删除会`flag`破坏二进制兼容性`Foo`吗？

*除了*我的编译器目前是 VC7.1，如果这很重要的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:29:02.653

该`static`变量不是函数接口的一部分，因此不会影响二进制兼容性。尽管如此，您应该知道，如果函数真的那么简单，那么它可能已经被内联，在这种情况下，除非您重新编译所有用户，否则您将破坏 ODR。

简单的建议：尽可能重新编译。如果不可能，请确保它没有内联在原始代码中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T12:47:09.467

它不会破坏二进制兼容性，因为某些东西肯定会崩溃，或者该程序将无法启动。

但是，如果该方法被内联，它很可能会破坏功能。内联版本仍将访问该静态变量，然后针对新头文件构建的代码将生成不使用静态变量的方法。这是否是一个问题取决于代码，但通常情况下，静态变量（不会被重新编译的代码使用）可能不仅仅是为了好玩，替换也不是（不会被使用通过旧的内联代码）。

教训：如果您想避免在库头修改后重新编译所有内容，请不要从头文件中的任何代码访问静态变量，或执行您可能想要更改的任何其他操作。假设头文件中的所有代码都可能被内联。

相关问题：[内联函数中的静态变量](https://stackoverflow.com/questions/185624/static-variables-in-an-inlined-function)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T12:28:02.137

不，它没有外部可见性。

# apache - Apache 重写：如果 /public 中不存在，则打开为 /public/index.php/

> ID：15499440
> 
> 赞同：1
> 
> 时间：2013-03-19T12:24:11.427
> 
> 标签：apache, mod-rewrite

我想

1.  `http://kemtime2_neu.pr.domain.de/css/style.css`打开为`http://kemtime2_neu.pr.domain.de/public/css/style.css`和
2.  `http://kemtime2_neu.pr.domain.de/login`打开为`http://kemtime2_neu.pr.domain.de/public/index.php/login`

我有

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /public/index.php/$1 [L] 
```

这适用于 2。

我如何使它适用于 1.？请注意，我无法更改文档根目录（对不起！）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:56:47.973

找到了：

```
# Redirect to static content
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond /var/www/de/domain/pr/kemtime2_neu/public%{REQUEST_URI} -f
RewriteRule ^(.+)$ /public/$1 [L]

# otherwise redirect to script
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /public/index.php/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:46:23.620

更改您`DocumentRoot`指向的`public`目录？

# redirect - 编辑主机文件以将 www.somesite.com 重定向到 localhost/somesite

> ID：15499442
> 
> 赞同：0
> 
> 时间：2013-03-19T12:24:21.163
> 
> 标签：redirect, localhost, host

我开发了多个站点，因此每个站点都有一个文件夹，例如。localhost/firstsite 用于 www.firstsite.com localhost/secondesite 用于 www.secondsite.com

当我输入例如网址时，我希望主机文件重定向到特定文件夹。

当我键入 www.firstsite.com 时，它应该转到 localhost/firstsite。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:37:30.850

试试下面...它会帮助你..

**转到 IIS 管理器** `inetmgr`

**添加新网站**

![在此处输入图像描述](../Images/734ad62ed222db48fe242aeb826084fd.png)

**创建一个如下所示的网站：**

![在此处输入图像描述](../Images/7c4674d36fc04c3861b781cabc474ce6.png)

**创建第二个站点，如下所示：**

![在此处输入图像描述](../Images/1e90e01148676ea087425b4b73fc6f92.png)

现在`www.firstsite.com`将重定向到`localhost/firstsite`并将`www.secondsite.com`重定向到`localhost/secondesite`

# windows-phone-7 - Windows Phone：当应用程序在睡眠/手机锁定后唤醒时转发到不同的屏幕

> ID：15499444
> 
> 赞同：1
> 
> 时间：2013-03-19T12:24:26.387
> 
> 标签：windows-phone-7, windows-phone-7.1, sleep, tombstoning

我开发了一个 windows phone 7 应用程序，一旦用户在运行应用程序时锁定手机，当手机解锁时，应用程序必须将用户转发到不同的 .xmal 页面。

原因是该应用程序显示敏感信息。因此，如果用户在应用程序中间锁定他/她的手机并将其留在桌子上，没有人可以来解锁手机并查看敏感信息。

所以我想将用户转发到我已经创建的“输入 pin”页面。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:40:53.107

阅读[应用程序激活和停用流程](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff817008%28v=vs.105%29.aspx)。在这种情况下，您需要在应用程序激活事件中为用户处理所有准备工作，该事件在应用程序从休眠状态推送到活动状态时触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T22:52:03.843

```
// Code to execute when the application is activated (brought to foreground)
// This code will not execute when the application is first launched
private void Application_Activated(object sender, ActivatedEventArgs e)
{
    this.AddEventLogItem("Application Activated event");
    // load application transient state when it is activated again
    ...
} 
```

# android - 将 DTR/RTS 发送到基于 FTDI 的 Arduino 板后会发生什么？

> ID：15499447
> 
> 赞同：4
> 
> 时间：2013-03-19T12:24:28.933
> 
> 标签：android, upload, usb, arduino, ftdi

我正在处理一个[草图以启用从 Android 设备上传到 Arduino 板，并且在使用](http://www.arduino.cc/en/Tutorial/Sketch)[rxtx](http://jlog.org/rxtx-mac.html)（纯 Java）测试 PC/Arduino 时，它适用于[Duemilanove](http://arduino.cc/en/Main/arduinoBoardDuemilanove)（基于[FTDI](http://en.wikipedia.org/wiki/FTDI)）和[Arduino Uno](http://arduino.cc/en/Main/ArduinoBoardUno)（基于[ATmega ）。](http://en.wikipedia.org/wiki/Atmel_AVR#Basic_families)

[但在使用USB-Android 库](https://code.google.com/p/usb-serial-for-android/)时它不起作用，因为尚未实现 setDTR/setRTS 方法。

[FTDI Android 驱动程序](http://www.ftdichip.com/Android.htm)允许发送 setDTR/setRTS 信号，但之后无法发送/读取数据。

所以问题出在Android USB API中，我不知道出了什么问题..

切换 DTR/RTS 后，基于 FTDI 的 Arduino 板会发生什么情况？

我相信设备已重置并等待引导加载程序命令（[STK500](http://www.atmel.com/tools/STK500.aspx)）约 50-250 毫秒。我对吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T16:59:42.477

你是对的。其原因是称为**引导加载程序的东西。**

在最简单的状态下，构建 Arduinos 的微控制器（以下简称 uC）可以通过系统内编程 (ISP) 方法进行编程，这是[SPI 协议](http://en.wikipedia.org/wiki/Serial_Peripheral_Interface_Bus)的一种特殊实现。我们唯一需要知道的是，这不是串行或 USB。

为了通过串行/USB 使 AVR 芯片（和 Arduino 板）可编程，我们将一个名为**Bootloader**的程序（通过 ISP）加载到芯片上。引导加载程序通过串行链路读取您的程序数据并将其写入闪存。如果没有要加载的程序，则引导加载程序将控制权交给加载的程序。因此，引导加载程序只能在打开或重置后激活：之后它会运行您加载的程序并且永远不会再次激活。

大多数引导加载程序设置为仅在复位后查找编程数据，原因是等待串行数据涉及超时：您必须等待一段时间（例如 1/3/5/10 秒）才能查看是否有程序正在上传，如果正在发送，则加载该程序。如果引导加载程序在每次打开 Arduino 时都查找编程数据，那么您的 Arduino 只会延迟激活，这被认为是不可取的。因此引导加载程序仅在重置后激活。

强迫用户在他们想要编程他们的 Arduino 之前每次都必须按下复位引脚可能很烦人，而且，在复位后立即开始发送串行数据（或者他们可能会错过超时窗口），所以Arduino 的聪明人想出了一个窍门：使用 DTS 信号触发复位，然后发送数据。因此，您的 Arduino（如果它不是古老的）设置为在接收 DTS 信号时重置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T05:06:01.660

答案是板子复位。原理图是按照它重置电路板的方式制作的（RTD/DTR 以某种方式连接到微控制器重置引脚）。

# android - 活动正在泄漏一个窗口

> ID：15499448
> 
> 赞同：0
> 
> 时间：2013-03-19T12:24:34.527
> 
> 标签：android

我是 Android 技术的新手，我正在创建一个练习应用程序。我创建了一个用于两个活动的邮件发送类。在一个活动中它工作正常，但在另一个活动中它不工作 - logcat 中有一个错误，我无法找到导致它的原因。这是错误日志：

```
03-19 12:11:23.773: E/WindowManager(891): Activity com.example.mytest.MainActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView{40d0de70 V.E..... R.....ID 0,0-97,92} that was originally added here
03-19 12:11:23.773: E/WindowManager(891): android.view.WindowLeaked: Activity com.example.mytest.MainActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView{40d0de70 V.E..... R.....ID 0,0-97,92} that was originally added here
03-19 12:11:23.773: E/WindowManager(891):   at android.view.ViewRootImpl.<init>(ViewRootImpl.java:354)
03-19 12:11:23.773: E/WindowManager(891):   at android.view.WindowManagerGlobal.addView(WindowManagerGlobal.java:216)
03-19 12:11:23.773: E/WindowManager(891):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:69)
03-19 12:11:23.773: E/WindowManager(891):   at android.app.Dialog.show(Dialog.java:281)
03-19 12:11:23.773: E/WindowManager(891):   at com.example.mytest.MainActivity$CountDownTask.onPreExecute(MainActivity.java:289)
03-19 12:11:23.773: E/WindowManager(891):   at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:586)
03-19 12:11:23.773: E/WindowManager(891):   at android.os.AsyncTask.execute(AsyncTask.java:534)
03-19 12:11:23.773: E/WindowManager(891):   at com.example.mytest.MainActivity.CallLogsBackup(MainActivity.java:91)
03-19 12:11:23.773: E/WindowManager(891):   at java.lang.reflect.Method.invokeNative(Native Method)
03-19 12:11:23.773: E/WindowManager(891):   at java.lang.reflect.Method.invoke(Method.java:511)
03-19 12:11:23.773: E/WindowManager(891):   at android.view.View$1.onClick(View.java:3592)
03-19 12:11:23.773: E/WindowManager(891):   at android.view.View.performClick(View.java:4202)
03-19 12:11:23.773: E/WindowManager(891):   at android.view.View$PerformClick.run(View.java:17340)
03-19 12:11:23.773: E/WindowManager(891):   at android.os.Handler.handleCallback(Handler.java:725)
03-19 12:11:23.773: E/WindowManager(891):   at android.os.Handler.dispatchMessage(Handler.java:92)
03-19 12:11:23.773: E/WindowManager(891):   at android.os.Looper.loop(Looper.java:137)
03-19 12:11:23.773: E/WindowManager(891):   at android.app.ActivityThread.main(ActivityThread.java:5039)
03-19 12:11:23.773: E/WindowManager(891):   at java.lang.reflect.Method.invokeNative(Native Method)
03-19 12:11:23.773: E/WindowManager(891):   at java.lang.reflect.Method.invoke(Method.java:511)
03-19 12:11:23.773: E/WindowManager(891):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-19 12:11:23.773: E/WindowManager(891):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-19 12:11:23.773: E/WindowManager(891):   at dalvik.system.NativeStart.main(Native Method) 
```

# svn - Tortoise SVN 自动合并 - 禁用不起作用

> ID：15499449
> 
> 赞同：3
> 
> 时间：2013-03-19T12:24:37.880
> 
> 标签：svn, tortoisesvn

在我的公司中，我们使用 TortoiseSVN 以这种方式关闭自动合并（[http://tortoisesvn.tigris.org/faq.html#noautomerge](http://tortoisesvn.tigris.org/faq.html#noautomerge)）。但是当我合并修订范围（功能分支）时，尽管我进行了设置，但 Tortoise 会自动合并。在更新期间自动合并正确地失败了，正如我所料。龟版，合并工具设置，差异工具设置在附件中。请帮我。谢谢

![在此处输入图像描述](../Images/663a841a0c36b89dd985e2aeb289cde4.png) ![在此处输入图像描述](../Images/b758591967ce1d078ee409ada33c8ad8.png) ![在此处输入图像描述](../Images/ecd546e20fda7cee483b326ea21dce64.png)

编辑：添加了 SVN 配置文件的 [helpers] 部分

```
### Section for configuring external helper applications.
[helpers]
### Set editor-cmd to the command used to invoke your text editor.
###   This will override the environment variables that Subversion
###   examines by default to find this information ($EDITOR, 
###   et al).
# editor-cmd = editor (vi, emacs, notepad, etc.)
### Set diff-cmd to the absolute path of your 'diff' program.
###   This will override the compile-time default, which is to use
###   Subversion's internal diff implementation.
# diff-cmd = diff_program (diff, gdiff, etc.)
diff-cmd = "C:\\SVNNoMerge.bat" 
diff3-cmd = "C:\\SVNNoMerge.bat"
### Diff-extensions are arguments passed to an external diff
### program or to Subversion's internal diff implementation.
### Set diff-extensions to override the default arguments ('-u').
# diff-extensions = -u -p
### Set diff3-cmd to the absolute path of your 'diff3' program.
###   This will override the compile-time default, which is to use
###   Subversion's internal diff3 implementation.
# diff3-cmd = diff3_program (diff3, gdiff3, etc.)
### Set diff3-has-program-arg to 'yes' if your 'diff3' program
###   accepts the '--diff-program' option.
# diff3-has-program-arg = [yes | no]
### Set merge-tool-cmd to the command used to invoke your external
### merging tool of choice. Subversion will pass 5 arguments to
### the specified command: base theirs mine merged wcfile
# merge-tool-cmd = merge_command 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:29:39.750

您还必须为 设置 false.bat 文件`diff3-cmd`，而不仅仅是`diff-cmd`常见问题解答中所述的部分。

# c# - 如何在 Autofac 中获取所有注册的服务类型

> ID：15499451
> 
> 赞同：12
> 
> 时间：2013-03-19T12:24:42.470
> 
> 标签：c#, autofac

我有一个 Autofac 容器，我希望能够检索所有注册的服务类型（不是实现类型，而是它们注册为的类型）。

我怎样才能从一个`IComponentContext`？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-19T12:27:07.357

你可以使用这个：

```
var services =
    context.ComponentRegistry.Registrations.SelectMany(x => x.Services)
           .OfType<IServiceWithType>()
           .Select(x => x.ServiceType); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2017-03-04T17:01:16.027

我是如何解决的

```
 var alldb = (from r in MasterDataFactory.Container.ComponentRegistry.Registrations
                let s = r.Services.Where(i => i is KeyedService).Select(i => i as KeyedService).FirstOrDefault()
                where s!=null && s.ServiceType==typeof(ISomeInterface)
                select s).ToList(); 
```

# json - 从 JSON 模式生成 java 类

> ID：15499459
> 
> 赞同：6
> 
> 时间：2013-03-19T12:25:07.253
> 
> 标签：json, code-generation, jsonschema

我想从给定的 JSON Schema [Draft 4 版本生成 JAVA 类](https://datatracker.ietf.org/doc/html/draft-zyp-json-schema-04)

我评估了几个工具，发现[jsonschema2pojo](https://github.com/joelittlejohn/jsonschema2pojo)很有用。但它仅支持 json schema draft-3 版本（尽管 json schema draft 4 在他们的路线图中）。

任何人都可以建议我从 json 模式（符合 json 模式草案 4）生成 java 类的工具或方法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T00:26:30.667

你可以试试[cog](https://github.com/ktonon/cog)，一个用 Ruby 编写的通用代码生成器。我在 github 上放了一个名为[json2java](https://github.com/ktonon/json2java)的简单项目，它演示了如何使用 cog 从 json 数据生成 Java 类。

不确定您到底想做什么，但这是我的假设。json 数据看起来像这样

```
{
    "classname": "Sample",
    "methods": [
        {
            "name": "foo",
            "rtype": "void",
            "params": [
                {
                    "name": "arg1",
                    "type": "int"
                }
            ]
        },
        {
            "name": "bar",
            "rtype": "int",
            "params": []
        }
    ]
} 
```

相应的 Java 类看起来像这样

```
public class Sample {

    void foo(int arg1) {
// keep: foo {
        // While the interface in this example is generated,
        // the method bodies are preserved between multiple invocations
        // of the generator.

        // It doesn't have to be done this way, the method bodies can be
        // generated aswell, all depends on what your json data encodes
// keep: }
    }

    int bar() {
// keep: bar {
        return 1;
// keep: }
    }

} 
```

如果您想尝试 cog，请像这样安装它`gem install cog`，然后像这样运行生成器`cog gen`。查看 cog 主页以获取文档。

# sql - 选择：根据子选择添加一列

> ID：15499461
> 
> 赞同：2
> 
> 时间：2013-03-19T12:25:09.843
> 
> 标签：sql, select, db2

我有以下情况：

使用 SQLDbx - 数据库：DB2

下面的 SQL

```
WITH priceanddates AS 
(
    SELECT a.*
    FROM FPRICE a
    INNER JOIN
    (
        SELECT edate, MAX(idx) maxIdx
        FROM FPRICE
        WHERE price>0
        GROUP BY edate
    ) b ON a.edate = b.edate AND a.idx = b.maxIdx
)

SELECT *
FROM priceanddates 
WHERE fcode='XYZ'
ORDER BY edate 
```

产量：

```
fcode    edate       idx    price
XYZ      2010-09-17    2    34,3
XYZ      2010-09-20    2    34,3
XYZ      2010-09-21    2    34,3
XYZ      2010-09-22    2    34,3
XYZ      2010-09-23    2    35,7
XYZ      2010-09-24    2    34,5
XYZ      2010-09-27    2    35,5 
```

但是 - 我需要更多...我想在最终选择中添加一列，说明日期的有效性，如下所示：

```
fcode    edate_from    edate_to       idx    price
XYZ      2010-09-17    2010-09-20       2    34,3
XYZ      2010-09-20    2010-09-21       2    34,3
XYZ      2010-09-21    2010-09-22       2    34,3
XYZ      2010-09-22    2010-09-23       2    34,3
XYZ      2010-09-23    2010-09-24       2    35,7
XYZ      2010-09-24    2010-09-27       2    34,5
XYZ      2010-09-27    2010-09-30       2    35,5 
```

因此，edate_to 基于“下一个”edate_from（因为视图当前按日期排序），或者（正如我希望正确推断的那样）edate_to 只是 MIN（edate 大于“当前”edate）

数据库中所有日期的最终截止日期是 2010 年 9 月 30 日，可惜最后一个 edate_to 必须始终是 2010 年 9 月 30 日。

显然，我在编写 SQL 方面不是很熟练，希望有人能指出我正确的方向 - 甚至更好 - 提供解决方案:) 我确实在 SO 周围搜索了一段时间，但我真的找不到什么我在寻找...

干杯，德里特。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:37:56.827

也许：

```
WITH priceanddates AS 
(
    SELECT a.*,
           (SELECT COALESCE(MIN(aa.edate), '2010-09-30')
            FROM FPRICE aa 
            WHERE aa.edate > a.edate) AS edate_to       
    FROM FPRICE a
    INNER JOIN
    (
        SELECT edate, MAX(idx) maxIdx
        FROM FPRICE
        WHERE price>0
        GROUP BY edate
    ) b ON a.edate = b.edate AND a.idx = b.maxIdx
)

SELECT *
FROM priceanddates 
WHERE fcode='XYZ'
ORDER BY edate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:33:39.203

使用新`LEAD`功能。更多关于它[的信息](https://www.ibm.com/developerworks/mydeveloperworks/blogs/dbtrue/entry/lag_lead_first_value_last_value_totally_new_in_db21?lang=en)。

```
WITH priceanddates AS 
(
    SELECT a.*
    FROM FPRICE a
    INNER JOIN
    (
        SELECT edate, MAX(idx) maxIdx
        FROM FPRICE
        WHERE price>0
        GROUP BY edate
    ) b ON a.edate = b.edate AND a.idx = b.maxIdx
)

SELECT fcode
       , edate AS edate_from
       , LEAD (edate) OVER (ORDER BY edate) AS edate_to
       , idx
       , price
FROM priceanddates 
WHERE fcode='XYZ'
ORDER BY edate 
```

# vba - 使用 FileDialog 应用程序的问题

> ID：15499462
> 
> 赞同：0
> 
> 时间：2013-03-19T12:25:10.643
> 
> 标签：vba, excel

我有一些我正在尝试改进但有一些问题的代码。

目前的代码是：

```
 Sub TestListFilesInFolder()
'Workbooks.Add ' create a new workbook for the file list
' add headers

Dim fd As FileDialog
Set fd = Application.FileDialog(msoFileDialogFolderPicker) ' Tried using a FileDialog Application  but had no luck

With Range("A1")
    .Formula = "Folder contents:"
    .Font.Bold = True
    .Font.Size = 12
End With
Range("A3").Formula = "Old File Path:"
Range("B3").Formula = "File Type:"
Range("C3").Formula = "File Name:"
Range("D3").Formula = "New File Path:"
Range("A3:H3").Font.Bold = True
ListFilesInFolder "L:\Pictures\A B C\B526 GROUP", True
' ListFilesInFolder fd, True ' I tried replacing the above line with this line but get an error

' list all files included subfolders
 End Sub 
```

第 5 行和第 6 行是我添加的部分，我试图打开一个文件对话框，用户可以在其中选择要处理代码的文件夹。

此外，底部开始 ListFilesInFolder 附近的注释掉的行是我尝试插入以替换它上面的行的行。

下一段代码的开始是：

```
 Sub ListFilesInFolder(SourceFolderName As String, IncludeSubfolders As Boolean) 
```

所以它使用第一个子文件夹中定义的文件夹和子文件夹。

对此的任何帮助将不胜感激。

问候，

山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:58:45.430

您将`fd`作为第一个参数传递给您的`ListFilesInFolder`子。这个 sub 接受 a`String`作为第一个参数，**而不是**a `FileDialog`。

这是一些示例代码，执行时将打开一个文件对话框并让用户选择一个文件夹。选择后，它会将文件夹的路径打印到`B2`. 如果没有选择文件夹（例如对话框关闭或取消），`B2`将包含文本`No item selected`。

我认为您应该创建一个新工作簿并使用此宏。设置一个断点并遍历它，看看它实际上在做什么。然后，您可以对其进行更改以使其满足您的特定需求。

```
Public Sub SelectExportDestinationPath()
    Dim fldr As FileDialog
    Dim sItem As String
    Set fldr = Application.FileDialog(msoFileDialogFolderPicker)
    With fldr
        .Title = "Select a Folder"
        .AllowMultiSelect = False
        .InitialFileName = strPath
        If .Show <> -1 Then
            sItem = "No item selected"
        Else
            sItem = .SelectedItems(1)
        End If
    End With

    'if trailing slash is not found, add it
    If Len(sItem) > 0 And InStr(Len(sItem), sItem, Application.PathSeparator, vbCompareText) = 0 Then
        sItem = sItem & Application.PathSeparator
    End If

    Sheet1.Cells(2, 2).Value = sItem

    Set fldr = Nothing
End Sub 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T12:35:55.520

确保您选择了适当的参考：

> 按 Alt+F11 打开 VB 编辑器。在该窗口中，选择菜单项 Tools -> References...，然后查看**Microsoft Office XXX Object Library的列表**
> *，Access 2003 为 11.0，Access 2002 为 10.0；Access 2000 为 9.0，Access 97 为 8.0 - 选择正确的。*
> 在该引用旁边的框中打勾，然后关闭对话框。

或者，使用实际值，而不是 mso 值

```
msoFileDialogOpen=1
msoFileDialogSaveAs=2
msoFileDialogFilePicker=3
msoFileDialogFolderPicker=4 
```

# extjs - 最大和最小工具面板 extjs

> ID：15499468
> 
> 赞同：-1
> 
> 时间：2013-03-19T12:25:28.253
> 
> 标签：extjs, max, min, panels

我有 3 个面板。我使用 vbox 布局。当我单击最小值和最大值工具时，我想最大化面板，如可停靠对象。怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:54:04.560

编辑：将面板最大化到窗口的 jsFiddle 解决方案：[这里](http://jsfiddle.net/vGz6w/1/)

* * *

我以前用边框布局做过这个，这有点棘手。您必须隐藏其他组件，然后明确设置要最大化的面板的大小。

但是使用 vBox 会容易得多。你只需要隐藏其他组件，东西就会自动调整大小。

[jsFiddle 解决方案](http://jsfiddle.net/NCfDT/1/)

```
Ext.onReady(function(){
    Ext.create('Ext.container.Viewport',{
        height:590,
        width:590,
        padding:'25px',
        layout:'vbox',
        defaults:{
            width:'100%',
            tools: [{
                type:'maximize',
                handler: function(a,b,c){
                    var v = c.up('viewport');
                    var panels = v.query('panel');
                    Ext.Array.each(panels,function(p){
                        if(c.ownerCt!=p){
                            p.hide();
                        }
                    });
                }
            },{
                type:'minimize',
                handler: function(a,b,c){
                    var v = c.up('viewport');
                    var panels = v.query('panel');
                    Ext.Array.each(panels,function(p){
                        p.show();
                    });
                }
            }]
        },
        items:[{
            flex:.33,
            title:'1',
            html:'1'
        },{

            title:'2',
            flex:.33,
            html:'2'
        },{

            title:'3',
            flex:.33,
            html:'3'
        }]

    });

}); 
```

# tsql - 在 T-SQL 中对类似数字的字符串进行排序

> ID：15499471
> 
> 赞同：3
> 
> 时间：2013-03-19T12:25:30.927
> 
> 标签：tsql, sql-order-by

我在表（称为抗原）中有字符串（称为等位基因），我无法按正确的顺序排序。

具有代表性的等位基因样本集可能是：-

*   01:01
*   01:02
*   02:01
*   04:01
*   09:01N
*   10:01
*   104:01
*   105:01
*   晚上 11:01
*   03:01:01
*   03:01:02

我需要这些等位基因按以下顺序排列：-

*   01:01
*   01:02
*   02:01
*   03:01:01
*   03:01:02
*   04:01
*   09:01N
*   10:01
*   晚上 11:01
*   104:01
*   105:01

我无法将等位基因排序为字符串，因为 104:01 和 105:01 将在 11:01 之前出现。

我无法去掉“：”字符并进行数字排序，因为这会将 03:01:01 和 03:01:02 放在最后，因为数值分别为 30101 和 30102。

我对如何实现这一目标感到困惑，并感谢任何建议。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:04:08.653

假设最大字符数`between/before/after : is 3`，您可以使所有字符串值的长度和顺序相同，如下所示。不过看起来有点复杂！

**[小提琴演示](http://sqlfiddle.com/#!3/8bfc4/5)**

```
;with cte as (
select val, charindex(':',val,1) index1, 
            charindex(':',val,charindex(':',val,1)+1) index2
from t
)
select val,right('000' + left(val,index1-1),3) + ':' +
           case when index2-index1>0 
                then  right('000' + substring(val,index1+1,index2-index1-1),3)
           else right('000' + substring(val,index1+1,len(val)),3) end + ':' +
           case when index2>0 
                then  right('000' + right(val, len(val) - index2),3)
           else '000' end As odr

from cte
order by odr

|      VAL |         ODR |
--------------------------
|    01:01 | 001:001:000 |
|    01:02 | 001:002:000 |
|    02:01 | 002:001:000 |
| 03:01:01 | 003:001:001 |
| 03:01:02 | 003:001:002 |
|    04:01 | 004:001:000 |
|   09:01N | 009:01N:000 |
|    10:01 | 010:001:000 |
|   11:01N | 011:01N:000 |
|   104:01 | 104:001:000 |
|   105:01 | 105:001:000 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:38:40.710

您想按冒号前的部分进行数字排序吗？如果是的话，应该这样做：

```
select *
from mytable
order by cast(substring(col, 0, CHARINDEX(':', col)) as int) 
```

结果：

```
01:01
01:02
02:01
03:01:01
03:01:02
04:01
09:01N
10:01
11:01N
104:01
105:01 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T12:39:48.090

采用

```
ORDER BY CAST (
             SUBSTR(Allelens
                    , 0
                    , CHARINDEX(Allelens, ':') - 1)
             AS INTEGER) 
```

# wpf - 使用 Crystal Reports 和 SQL Server 部署 WPF 应用程序

> ID：15499474
> 
> 赞同：0
> 
> 时间：2013-03-19T12:25:32.847
> 
> 标签：wpf, visual-studio-2010, sql-server-2008, deployment, crystal-reports

我已经在 Visual Studio 2010 和 SQL Server 2008 Express 中完成了一个 WPF 应用程序。我还在我的项目中使用了 Crystal Reports。现在我需要在客户端的系统上部署应用程序。我假设我必须首先安装以下先决条件。

1.  .Net 框架 4.0
2.  MS SQL Server 2008 express（可能需要 .Net 2.0）
3.  .Net 4.0 的 CR 运行时
4.  报告查看器

有没有办法让所有东西都自行安装？我已尝试将以上所有内容选择为**先决条件**，但这给了我一个错误，即 CR Runtime msi not found。我还可以将我的软件中的所有文件包含在`bin folder`? 请给我建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:08:40.523

您可以从 SAP 网站（google it）下载 CRRuntime_32bit_13_0_1.msi 并将其放置在此位置：

`C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages\Crystal Reports`

对于 .NET Framework 4.0\

# jquery - JQgrid多选与eric hynds多选冲突

> ID：15499480
> 
> 赞同：2
> 
> 时间：2013-03-19T12:25:52.163
> 
> 标签：jquery, jqgrid, multi-select

在我下面提到的演示中，它显示了 jqgrid 使用的多选插件和 eric hynds 多选插件之间的冲突。我想要的是让 eric hynds 插入 jqgrid 之外的组合框，并且 jqgrid 多选应该是原样。但正如演示所示，jqgrid 多选被覆盖，并且在列选择器中也有 eric hynds 多选。

```
enter code here
    <html>

<head>

<link rel="stylesheet" type="text/css" media="screen" href="css/cyberoam.css" />
<link rel="stylesheet" type="text/css" media="screen" href="css/jquery/jquery-ui-1.8.22.custom.css" />
<link rel="stylesheet" type="text/css" media="screen" href="css/jquery/jqgrid/ui.jqgrid.css" />
<link rel="stylesheet" type="text/css" media="screen" href="css/jquery/jquery.ui.datepicker.css" />
<link rel="stylesheet" type="text/css" media="screen" href="css/jquery/ui.multiselect.css" />
<link rel="stylesheet" type="text/css" media="screen" href="css/jquery/jquery-ui-timepicker-addon.css" />

<script src="javascript/jquery/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="javascript/jquery/jquery.ui.widget.js" type="text/javascript"></script>
<script src="javascript/jquery/jqgrid/ui.multiselect.js" type="text/javascript"></script>
<script src="javascript/jquery/grid.locale-en.js" type="text/javascript"></script>
<script src="javascript/jquery/jqgrid/jquery.jqGrid.min.js" type="text/javascript"></script>
<script src="javascript/jquery/jquery.ui.datepicker.js" type="text/javascript"></script>
<script src="javascript/jquery/jquery-ui-1.8.21.custom.min.js" language="javascript"></script>
<script src="javascript/jquery/jqgrid/jqgrid.general.js" type="text/javascript"></script>
<script src="javascript/jquery/jquery-ui-timepicker-addon.js" type="text/javascript"></script>
<script src="javascript/ajax.js" type="text/javascript"></script>
<link rel="stylesheet" href="css/common.css" type="text/css" />

<link rel="stylesheet" type="text/css" href="css/jquery/jquery.multiselect.css" />
    <script type="text/javascript" src="javascript/jquery/jquery.multiselect.js"></script>
    <link rel="stylesheet" type="text/css" href="css/jquery/jquery.multiselect.filter.css" />
    <script type="text/javascript" src="javascript/jquery/jquery.multiselect.filter.js"></script>

</head>
<script type="text/javascript">
jQuery(function(){

  //jQuery.localise('ui-multiselect', {/*language: 'en',*/ path: 'js/locale/'});
            jQuery(".multiselect").multiselect({selectedList:10});
            //jQuery('#switcher').themeswitcher();
});
 jQuery(document).ready(function() {

var myData = [
                    { orderID: "10", orderDate: "2010-09-18", shipmentDate: "2010-09-20", orderStatus: "2" },
                    { orderID: "15", orderDate: "2010-09-20", shipmentDate: "2010-09-24", orderStatus: "3" },
                    { orderID: "30", orderDate: "2010-08-28", shipmentDate: "2010-09-01", orderStatus: "4" },
                    { orderID: "20", orderDate: "2010-10-16", shipmentDate: "2010-10-17", orderStatus: "1" }
                ], i, l, myRow, orderStatus;

            var grid = jQuery('#list');
            grid.jqGrid({
                data: myData,
                datatype: 'local',
                caption: 'Order Details',
                height: 'auto',
                gridview: true,
                headertitles: true,
                viewrecords: true,
                pager: '#pager',

                rownumbers: true,
                colNames: ['Order ID', 'Order', 'Shipment', 'Pending', 'Processing', 'Delivered', 'Order Status'],
                colModel: [
                    { name: 'orderID', index: 'orderID', key:true, width: 120, sorttype: 'int' },
                    { name: 'orderDate', index: 'orderDate', width: 180,
                      sorttype: 'date', formatter: 'date' },
                    { name: 'shipmentDate', index: 'shipmentDate', width: 180,
                      sorttype: 'date', formatter: 'date' },
                    { name: 'pending', width: 21, index: 'pending', formatter: 'checkbox', align: 'center',
                      stype: "select", searchoptions: { value: "1:Yes;0:No" } },
                    { name: 'processing', width: 21, index: 'processing', formatter: 'checkbox', align: 'center',
                      stype: "select", searchoptions: { value: "1:Yes;0:No" } },
                    { name: 'delivered', width: 21, index: 'delivered', formatter: 'checkbox', align: 'center',
                      stype: 'select', searchoptions: { value: "1:Yes;0:No" } },
                    { name: 'orderStatus', index: 'orderStatus', width: 50, hidden: true }
                ]
            }).jqGrid ('navGrid', '#pager', { edit: false, add: false, del: false, refresh: true, view: false },
                        {},{},{},{multipleSearch:true,recreateFilter:true})
              .jqGrid ('navButtonAdd', '#pager', { caption: "", buttonicon: "ui-icon-calculator", title: "choose columns",
                  onClickButton: function() {
                      grid.jqGrid('columnChooser');
                  }
              });
});
</script>
<body>
<select id="countries" class="multiselect" multiple="multiple" name="countries[]">
  <option value="AFG">Afghanistan</option>
  <option value="ALB">Albania</option>
  <option value="DZA">Algeria</option>
  <option value="AND">Andorra</option>
  <option value="ARG">Argentina</option>
  <option value="ARM">Armenia</option>
  <option value="ABW">Aruba</option>
  <option value="AUS">Australia</option>
  <option value="AUT" selected="selected">Austria</option>

</select>

<div style="float:left">
        <table id="list"><tbody><tr><td/></tr></tbody></table>
        <div id="pager"></div>
    </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:20:53.887

所以也许 jqGrid 正在使用`multiselect`该类 - 如果是这样，那么只需更改您的代码以使用不同的类。像这样的东西：

```
jQuery(".ericmultiselect").multiselect({selectedList:10});

<select id="countries" class="ericmultiselect" multiple="multiple" name="countries[]">
.... 
```

然后它不会与任何 jqGrid 使用的冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-09T00:10:38.523

这真的很晚，但万一有人用谷歌搜索这个。

你想进入 jquery.multiselect.js

找到这一行：

```
$.widget("ech.multiselect", { 
```

并将小部件/插件名称更改为类似

```
$.widget("ech.multiselectdifferentname", { 
```

现在您必须找到在代码中调用多选的位置。对于上面的示例，它将是

```
jQuery(".multiselect").multiselect({selectedList:10}); 
```

所以你把它改成

```
jQuery(".multiselect").multiselectdifferentname({selectedList:10}); 
```

这是因为您已经在使用 ui.multiselect.js，它是 jquery.ui 多选。这是控制 columnChooser 选择框的内容。这与使用相同名称的 Eric Hynds 多选插件冲突。

# entity-framework - Entity Framework Code-First 将我的代码视为一对多，尽管我希望它是多对多关系

> ID：15499487
> 
> 赞同：2
> 
> 时间：2013-03-19T12:26:15.647
> 
> 标签：entity-framework, ef-code-first

我正在尝试创建一个数据库，其中一个表具有一对一关系和多对多关系......创建的数据库似乎仅作为一对一关系工作。这是我的模型：

```
public class Trip
    {
        public int ID { get; set; }
        public virtual ICollection<Place> PassingBy { get; set; }
        public Place Origin { get; set; }
        public Place Destination { get; set; }
        public DateTime Time { get; set; }
        public int EmptySlots { get; set; }
        public virtual ICollection<Person> Attendants { get; set; }
        public string AccessKey { get; set; }

    }

    public class Person
    {
        public int ID { get; set; }
        public string Username { get; set; }
        public virtual ICollection<Trip> Trips { get; set; }
    }

    public class Place
    {
        public int ID { get; set; }
        public string Name { get; set; }
        public virtual ICollection<Trip> Trips { get; set; }
    }

    public class GARDB : DbContext
    {
        public DbSet<Trip> Trips { get; set; }
        public DbSet<Person> Persons { get; set; }
        public DbSet<Place> Places { get; set; }
    } 
```

现在，当我进行添加迁移和更新数据库时。该数据库有一个名为“PersonTrip”的表，它是多对多关系所必需的。但是“PlaceTrip”没有表格。经过一些试验和错误。我发现这是因为这些行：

```
 public Place Origin { get; set; }
    public Place Destination { get; set; } 
```

它们导致关系是一对多的。不是我想成为的多对多。有没有办法让 Place-Trip 关系像 Person-Trip 一样，但不删除那两条线。

谢谢！

**编辑：解决方案**

我没有说清楚我想要什么。我想画线

```
public virtual ICollection<Place> PassingBy { get; set; } 
```

映射到线

```
public virtual ICollection<Trip> Trips { get; set; } 
```

在 Place 类中。我从答案中得到的解决方案是：

代替 ：

```
 public virtual ICollection<Place> PassingBy { get; set; } 
```

和：

```
[InverseProperty("Trips")]
public virtual ICollection<Place> PassingBy { get; set; } 
```

并替换：

```
public virtual ICollection<Trip> Trips { get; set; } 
```

在 Place 类中：

```
[InverseProperty("PassingBy")]
public virtual ICollection<Trip> Trips { get; set; } 
```

并在顶部添加此包含：

```
using System.ComponentModel.DataAnnotations.Schema; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:55:59.737

实际上，令人困惑的是，您在 Trip 上的关系有两个目的：

```
public Place Origin { get; set; }
public Place Destination { get; set; } 
```

（这也应该是虚拟的，顺便说一句），并且只有一个地方：

```
public virtual ICollection<Trip> Trips { get; set; } 
```

...所以实体框架无法弄清楚哪个与什么相配。

您需要向 Place 添加第二个导航属性和一些数据注释属性，以告诉 Entity Framework 它们如何关联以形成多对多关系的两半。为了清楚起见，省略了其他属性和上下文，如下所示：

```
public class Trip
{
    [InverseProperty ("AsOrigin")]
    public virtual Place Origin { get; set; }

    [InverseProperty ("AsDestination")]
    public virtual Place Destination { get; set; }
}

public class Place
{
    [InverseProperty ("Origin")]
    public virtual ICollection<Trip> AsOrigin { get; set; }

    [InverseProperty ("Destination")]
    public virtual ICollection<Trip> AsDestination { get; set; }
} 
```

如果您需要 Place 上的单个属性来为您提供它所涉及的所有旅行，无论是作为起点还是终点，您可以使用如下导航属性重新创建它：

```
[NotMapped]
public ICollection<Trip> Trips
{
    get
    {
        return AsOrigin.Concat(AsDestination).Distinct();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:27:51.100

我不是您在这里创建的关系的忠实拥护者，但这是您的 DBA 需要考虑的事情。与此同时，如果你想做这样的事情，我可以建议利用[这个 SO question](https://stackoverflow.com/questions/15483019/entity-framework-code-first-how-to-annotate-a-foreign-key-for-a-default-valu)的答案，它试图做一些非常相似的事情。您需要添加更多属性并在表之间设置外键关系，但它应该可以正常工作。

# php - 更新 XML 节点不断增加价值而不是更新

> ID：15499489
> 
> 赞同：0
> 
> 时间：2013-03-19T12:26:20.710
> 
> 标签：php, xml, domdocument

我似乎无法正确获取此查询。我想要实现的是：

更新我的文本节点内的值。

但问题是它没有更新值，而是不断地将值添加到元素中。

说我 $_POST 'Hello' 的价值。它增加了价值。但后来我想将值更改`'Hello'`为 '`God Bye'`而不是将节点修改为`'Hello God Bye'`.

我试过我正在使用 PHP DOM。但似乎也无法使用 SimpleXML 获得它。

有什么建议么 ？

这就是我现在所拥有的：

```
$xml = new DOMDocument();
$xml->formatOutput = TRUE;
$xml->preserveWhiteSpace = FALSE; 
$xml->load('../stickers.xml');

$xpath = new DOMXPath($xml);

$result = $xpath->query('/stickers/sticker[id="559428"]/text');
$result->item(0)->nodeValue .= 'Hello';

echo $xml->saveXML();
$xml->save('../stickers.xml'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:27:24.157

您正在使用`.=`which 是为了添加到字符串中。将其替换为`=`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T12:28:24.453

尝试改变

```
$result->item(0)->nodeValue .= 'Hello'; 
```

进入

```
$result->item(0)->nodeValue = 'Hello'; 
```

那里的点连接字符串。

# ruby-on-rails - Rails 中相同资源的不同索引的好方法？

> ID：15499507
> 
> 赞同：2
> 
> 时间：2013-03-19T12:27:09.973
> 
> 标签：ruby-on-rails

我一直想知道的是在 Rails 中为同一资源创建不同索引视图的最佳方法。

例如，假设您有一组用户，并且用户控制器的当前索引操作生成用户的表格视图。然后，您要创建第二个索引视图，在地图上绘制所有用户。最好的方法是在用户控制器中创建一个新操作，还是创建一个具有新索引的新控制器（如 UsersMap）？

想法赞赏...

我的路由文件如下所示：

```
resources :users, :only => [:index, :index_with_map, :show, :edit, :update] do 
     match '/index_with_map' => 'users#index_with_map' 
end 
```

但是点击“users/index_with_map”会导致：

```
ActiveRecord::RecordNotFound at /admin/users/index_with_map Couldn't find User with id=index_with_map 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:30:08.943

您可以将该操作添加到 UsersController，但如果您要拥有更多操作，包括用户和地图，您可能想要考虑制作一个新控制器（以符合单一职责原则）。

从指南：

> 如果您发现自己在资源丰富的路线中添加了许多额外的操作，那么是时候停下来问问自己是否在掩饰其他资源的存在。

你可以这样做：

```
resources :users do
  collection do
    get 'index_with_map'
  end
end 
```

这将使 Rails 能够通过 GET 识别路径，例如 /users/index_with_map。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:34:43.290

最好的方法是添加将处理用户地图的新操作。然后您只需要为该操作创建相应的视图文件。

用户是同一张桌子，只是功能不同。那么为什么需要不同的控制器呢？

此外，如果您仅为地图视图创建另一个控制器，那么它就没有用处，因为它只是浪费资源。

还有一点是——

控制器提供用户与模型交互。因此，两个控制器意味着您通常需要两个模型。因此，当您想做不同（类别）的事情时，会使用不同的控制器。

# websocket - 如何优化 Tornado？

> ID：15499509
> 
> 赞同：4
> 
> 时间：2013-03-19T12:27:15.120
> 
> 标签：websocket, benchmarking, tornado, couchbase

以下代码根据参数的值从请求中获取参数并从 couchbase db 响应。

```
couchbase = Couchbase("ubuntumartini03:8091", "thebucket", "")
bucket = couchbase["thebucket"]

class MH(tornado.web.RequestHandler):
        def get(self):
                key = self.get_argument("pub_id", strip=True)
                result = json.loads(bucket.get(key)[2])
                self.write(result['metaTag'])

if __name__=="__main__":
        app = tornado.web.Application(handlers=[(r"/", MH)])
        app.listen(8888,"")
        tornado.ioloop.IOLoop.instance().start() 
```

**问题**：对于给定的硬件，我们可以从 Tornado 机器以 10k/秒的速度调用 Couchbase。但是当我们从客户端打电话到 Tornado 机器时，我们只能拨打 350 个电话/秒。

当然，这里的瓶颈是龙卷风。如何对其进行优化以使其能够进行至少 7k 次呼叫/秒？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-01-16T06:53:37.660

像这样编辑您的代码：

```
from tornado.ioloop import IOLoop

couchbase = Couchbase("ubuntumartini03:8091", "thebucket", "")
bucket = couchbase["thebucket"]

class MH(tornado.web.RequestHandler):
    async def get(self):
        key = self.get_argument("pub_id", strip=True)
        result = await IOLoop.current().run_in_executor(None,bucket.get,*(key))
        self.write(result[2]['metaTag'])

if __name__=="__main__":
    app = tornado.web.Application(handlers=[(r"/", MH)])
    app.listen(8888,"")
    tornado.ioloop.IOLoop.instance().start() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:49:50.747

您使用什么客户端，是同步客户端还是异步客户端？如果这是一个同步客户端，就不能不充分利用tornado ioloop reactor。

# magento - 如何在 Magento 中卸载扩展程序时删除设置

> ID：15499510
> 
> 赞同：0
> 
> 时间：2013-03-19T12:27:18.710
> 
> 标签：magento

谁能告诉我如何从数据库表中删除与扩展名相关的所有设置。就像我卸载 abc 扩展一样，值 abc_setup 也将从 core_resource 表中删除。同样来自 core_config_data 表的其他设置。并且也删除数据库表。谢谢.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:00:37.237

一些扩展在 eav_attribute 表中添加了与 EAV 相关的行，因此您需要检查其设置文件夹，如果已添加，则需要手动删除它。还有一个版本条目进入核心配置表，也需要删除。模块 moght 还创建了特定于其自身功能的表，查看其设置文件夹 sql 代码会让您对此有所了解。

另外，您需要删除添加到 etc/modules 文件夹的完整模块文件夹和 >xml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:54:08.603

您必须在数据库中手动执行此操作（或者有时通过插件作者提供的脚本）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T12:54:53.303

您可以使用 magento connect 轻松删除您的扩展程序。它将从数据库中删除所有关联的表。不保存任何设置。而且您的扩展名不是 EAV 类型，那么您可以使用表手动删除该文件。

# java - java：Calendar.HOUR_OF_DAY 返回不正确的值。为什么？

> ID：15499511
> 
> 赞同：1
> 
> 时间：2013-03-19T12:27:20.930
> 
> 标签：java, calendar, timezone, dst

下面的java代码：

```
Calendar calend = Calendar.getInstance(TimeZone
                .getTimeZone("Pacific/Fakaofo"));

        System.out.println(calend.get(Calendar.HOUR_OF_DAY) + ":"
                + calend.get(Calendar.MINUTE) + ":" + calend.get(Calendar.SECOND)); 
```

*实际结果*： 2:21: **19**

*预期结果*： 1:21: **19** ( [http://www.timeanddate.com/worldclock/city.html?n=738](http://www.timeanddate.com/worldclock/city.html?n=738) )。

为什么实际结果会多出一小时？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T12:28:46.953

根据[太平洋/法考福时区](http://www.timezoneconverter.com/cgi-bin/zoneinfo.tzc?s=default&tz=Pacific/Fakaofo)，它是

```
Wed 20-Mar-2013 02:31 A.M. 
```

所以你的实际结果似乎是正确的。

[托克劳：100 多年来的错误当地时间](http://www.timeanddate.com/news/time/tokelau-wrong-time.html)可能是答案。关于真实时区似乎有些混乱。

# php - PHP调用类方法/函数

> ID：15499513
> 
> 赞同：16
> 
> 时间：2013-03-19T12:27:27.027
> 
> 标签：php, class, function, methods

如何调用以下类方法或函数？

假设我有这个参数从 url 获取：

```
$var = filter($_GET['params']); 
```

**班级：**

```
class Functions{

    public function filter($data){
        $data = trim(htmlentities(strip_tags($data)));

        if(get_magic_quotes_gpc())
            $data = stripslashes($data);

        $data = mysql_real_escape_string($data);

        return $data;
    }

} 
```

谢谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-19T12:34:19.157

要回答您的问题，当前方法是创建对象然后调用该方法：

```
$functions = new Functions();
$var = $functions->filter($_GET['params']); 
```

另一种方法是制作该方法`static`，因为该类没有可依赖的私有数据：

```
public static function filter($data){ 
```

然后可以这样调用：

```
$var = Functions::filter($_GET['params']); 
```

最后，您不需要类，只需包含一个包含函数的文件即可。所以你删除了方法中的`class Functions`和`public`。然后可以像您尝试的那样调用它：

```
$var = filter($_GET['params']); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T12:31:45.650

在类中，您可以使用以下方法调用函数：

```
 $this->filter(); 
```

课外

你必须创建一个类的对象

```
 ex: $obj = new Functions();

     $obj->filter($param); 
```

[有关](http://php.net/oop)php 中的 OOP的更多信息

**这个**例子：

```
class test {
 public function newTest(){
      $this->bigTest();// we don't need to create an object we can call simply using $this
      $this->smallTest();
 }

 private function bigTest(){
      //Big Test Here
 }

 private function smallTest(){
      //Small Test Here
 }

 public function scoreTest(){
      //Scoring code here;
 }
}

$testObject = new test();

$testObject->newTest();

$testObject->scoreTest(); 
```

希望它会有所帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T12:29:52.520

如果您想从其他页面调用它，请为该类创建对象并调用它。

```
$obj = new Functions();

$var = $obj->filter($_GET['params']); 
```

或者在同一个类实例[方法]中，试试这个。

```
$var = $this->filter($_GET['params']); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T12:29:57.760

```
$f = new Functions;
$var = $f->filter($_GET['params']); 
```

查看[面向对象编程的 PHP 手册部分](http://php.net/oop)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-19T12:31:38.490

由于函数根本没有使用`$this`，您可以`static`在 public 之后添加一个关键字，然后调用

```
Functions::filter($_GET['params']); 
```

避免仅为一个方法调用创建对象

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T12:29:54.350

您需要`Object`为`class.`

```
$obj = new Functions();
$var = $obj->filter($_GET['params']); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-19T12:30:20.977

这边走：

```
 $instance = new Functions(); // create an instance (object) of functions class
 $instance->filter($data); // now call it 
```

# mysql - mysql php cpu滥用

> ID：15499517
> 
> 赞同：0
> 
> 时间：2013-03-19T12:27:37.993
> 
> 标签：mysql, cpu, vps, abuse

我有一个与 mysql 数据库共享计划的站点。该数据库有一个大约 300000 行的表。该表约为 250mb。在我调用查询的每一页中：

```
select * from table order by added limit 0,30 
```

在每一行中都有我需要的 400 个字符代码的字段。基本上我需要所有领域。直到几天前，一切都还好，但是每天有 500 名访客，速度很慢。现在我的网站关闭了，因为我收到了关于 cpu 滥用的警报（每天有 1000 名访问者）。在我的本地服务器中，一切都很好，没有很大的 cpu 使用率（~10%）。

我可以做些什么来为我的查询提供最佳性能？

如果我使用 VPS 计划，一切都会好起来的，或者真正的问题是我的桌子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:38:06.953

“添加”字段是否已编入索引？如果表没有被 ORDER BY 中的字段索引，MySQL 将每次扫描整个表。通过索引你的表

```
ALTER TABLE `table_name` ADD INDEX `added` (`added`); 
```

您将大大减少 CPU 使用率。

# c# - Microsoft Visual Studio Web 性能测试记录器可以将文件从 Internet Explorer 保存到本地磁盘吗？

> ID：15499519
> 
> 赞同：1
> 
> 时间：2013-03-19T12:27:46.747
> 
> 标签：c#, visual-studio-2010, load-testing, performance-testing

我正在使用 Web 性能测试记录器进行负载测试。我的客户要求保存在 IE 上显示的 PDF 文件。是否可以仅通过 Web 性能测试来完成？如果没有，是否有任何可能的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-26T22:33:43.027

据我所知，没有内置的方法来保存响应。您必须编写 WebTestRequestPlugin 才能将响应写入文件。

这是一个幼稚的实现作为起点。

```
public class SaveResponsePlugin : WebTestRequestPlugin
{
    [DisplayName("File Name")]
    [Description("Name of file in which to save the response")]
    public string FileName { get; set; }

    public override void PostRequest(object sender, PostRequestEventArgs e)
    {
        if (e.ResponseExists && !e.Response.IsBodyEmpty)
            File.WriteAllBytes(this.FileName, e.Response.BodyBytes);
    }
} 
```

# ios - sqlite中的约束问题

> ID：15499525
> 
> 赞同：0
> 
> 时间：2013-03-19T12:28:06.053
> 
> 标签：ios, sqlite

我在sqlite中创建数据库我创建具有约束notnull和唯一的新数据库并将其保存到我的应用程序的位置然后我从我的应用程序添加东西并在库中检查它们，应用程序支持/.../...。 /...当我检查刚刚在那里创建的数据库时，该数据库没有约束并且它接受相同的数据。

为什么会这样？

我如何使用约束来制作这个数据库，就像我在制作应用程序数据库时创建的一样

是的，我已经尝试删除数据库并再次制作

请提出一些建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:48:35.693

两个问题之一通常会导致这种行为（您正在更新数据库并且您没有看到它传播到应用程序）：

1.  捆绑包中的数据库未更新。您可以通过在模拟器上运行应用程序、打开捆绑包（转到 Finder 中的应用程序、~/Library/Application Support/iPhone Simulator/...，然后选择应用程序本身并选择“显示包内容”）并检查数据库直接在那个位置。最重要的是，Xcode 有时不会为在 Xcode 本身之外更改的文件正确更新捆绑包。这可以通过从 Xcode 的“产品”菜单中选择“清洁”，然后重新构建并重新安装应用程序来解决。

2.  应用程序正在加载的数据库不是包中版本的副本。听起来这不是您的问题，但是`Documents`如果文件不存在，许多第一次开发人员会将 db 从捆绑包复制到文件夹，而忽略了当您再次安装应用程序时，`Documents`文件夹的内容会被保留，因此您仍然会在那里拥有旧版本。如果您出于测试目的尝试解决此问题，只需卸载应用程序或重置模拟器即可。

    从长远来看，应用程序本身需要一些逻辑来查找`Documents`文件夹中数据库的版本号（我使用此信息创建一个“配置”表），将其与应用程序预期找到的版本进行比较，如果不同，则升级`Documents`文件夹中的数据库。

最重要的是，检查所有三个数据库（项目目录、捆绑包和应用程序的`Documents`文件夹）以查看您在哪个步骤丢失了数据库更改是很有用的。

# android - Android 在运行时以 4 x 4 形式排列的表格问题

> ID：15499527
> 
> 赞同：0
> 
> 时间：2013-03-19T12:28:15.737
> 
> 标签：android, android-layout

对于具有以下功能的应用程序：

*   *目标：API 8 或 Android Froyo。*

*   *模拟器：Android GingerBread 2.0.3。*

`/sdcard`应用程序从应该在**Gridview 布局**中显示的文件中读取数据。但是，在*运行时*，布局在横向和纵向布局方向上是**扭曲的。**

> *布局在设计时看起来很完美，就像在 Image#1 中一样，但在运行时它就像在 Image#2 中看到的那样。*

这是我用于布局的 XML `landscape orientation`：

```
<LinearLayout
    android:id="@+id/LinearLayoutInside"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/button2"
    android:orientation="vertical"
    android:background="@drawable/border_bkgrnd" >
    <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:weightSum="3" >
            <TextView
                android:id="@+id/textView13"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/TextView12"
                android:layout_below="@+id/TextView12"
                android:onClick="newActivity"
                android:text="Medium Text"
                android:layout_weight="1"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textSize="15sp"
                tools:ignore="HardcodedText" />

            <TextView
                android:id="@+id/TextView12"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/textView11"
                android:layout_alignRight="@+id/textView11"
                android:layout_alignTop="@+id/TextView22"
                android:onClick="newActivity"
                android:text="Medium Text"
                android:layout_weight="1"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textSize="15sp" />

            <TextView
                android:id="@+id/textView11"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/txtTitlev1"
                android:layout_below="@+id/txtTitlev1"
                android:onClick="newActivity"
                android:text="Medium Text"
                android:layout_weight="1"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textSize="15sp" />
    </LinearLayout>

    <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:weightSum="3" >
            <TextView
                android:id="@+id/TextView31"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/txtTitlev3"
                android:layout_alignParentRight="true"
                android:layout_below="@+id/txtTitlev3"
                android:text="@string/strNA"
                android:layout_weight="1"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textSize="15sp" />

            <TextView
                android:id="@+id/TextView33"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@+id/TextView23"
                android:layout_alignBottom="@+id/TextView23"
                android:layout_alignLeft="@+id/TextView32"
                android:layout_alignParentRight="true"
                android:text="@string/strNA"
                android:layout_weight="1"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textSize="15sp"
                tools:ignore="HardcodedText" />

            <TextView
                android:id="@+id/txtTitlev1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_above="@+id/TextView21"
                android:layout_alignParentLeft="true"
                android:fontFamily="Roboto-BoldCondensed.ttf"
                android:text="@string/ttlLeadid"
                android:textColor="@color/Turquoise4"
                android:layout_weight="1"
                android:textSize="20sp"
                android:textStyle="bold|normal"
                android:typeface="normal" />
    </LinearLayout>

    <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:weightSum="3" >
            <TextView
                android:id="@+id/TextView32"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/TextView31"
                android:layout_alignParentRight="true"
                android:layout_below="@+id/TextView31"
                android:text="@string/strNA"
                android:layout_weight="1"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textSize="15sp"
                tools:ignore="HardcodedText" />

            <TextView
                android:id="@+id/TextView22"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/TextView21"
                android:layout_below="@+id/TextView21"
                android:text="Medium Text"
                android:layout_weight="1"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textSize="15sp"
                tools:ignore="HardcodedText" />

            <TextView
                android:id="@+id/TextView23"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/TextView22"
                android:layout_below="@+id/TextView22"
                android:onClick="newActivity"
                android:text="Medium Text"
                android:layout_weight="1"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textSize="15sp"
                tools:ignore="HardcodedText" />
    </LinearLayout>

    <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:weightSum="3" >
            <TextView
                android:id="@+id/txtTitlev3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_alignParentTop="true"
                android:fontFamily="Roboto-BoldCondensed.ttf"
                android:text="@string/ttlContact"
                android:textColor="@color/Turquoise4"
                android:textSize="20sp"
                android:layout_weight="1"
                android:textStyle="bold|normal" />

            <TextView
                android:id="@+id/txtTitlev2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:layout_centerHorizontal="true"
                android:fontFamily="Roboto-BoldCondensed.ttf"
                android:text="@string/ttlName"
                android:textColor="@color/Turquoise4"
                android:textSize="20sp"
                android:layout_weight="1"
                android:textStyle="bold|normal" />

            <TextView
                android:id="@+id/TextView21"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_above="@+id/TextView32"
                android:layout_centerHorizontal="true"
                android:text="Medium Text"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textSize="15sp"
                android:layout_weight="1"
                tools:ignore="HardcodedText" />
    </LinearLayout>

</LinearLayout> 
```

**[编辑]**

> ***有没有其他的安排方式？***

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:43:51.737

尝试使用您的`RelativeLayout`. 我`LinearLayouts`在你的4 中添加了 4 `RelativeLayout`，所有的`weightSum`都是 3 并相应地移动了你的`TextViews`。我还将它们的`layout_weight`参数设置为 1，以便它们在屏幕上拉伸。

我没有对此进行测试，但它应该可以工作。

**编辑**：我将 RelativeLayout 更改为 LinearLayout 看到您的所有视图都在彼此下方

```
<LinearLayout
    android:id="@+id/LinearLayoutInside"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/button2"
    android:orientation="vertical"
    android:background="@drawable/border_bkgrnd" >
    <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:weightSum="3" >
            <TextView
                android:id="@+id/textView13"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/TextView12"
                android:layout_below="@+id/TextView12"
                android:onClick="newActivity"
                android:text="Medium Text"
                android:layout_weight="1"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textSize="15sp"
                tools:ignore="HardcodedText" />

            <TextView
                android:id="@+id/TextView12"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/textView11"
                android:layout_alignRight="@+id/textView11"
                android:layout_alignTop="@+id/TextView22"
                android:onClick="newActivity"
                android:text="Medium Text"
                android:layout_weight="1"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textSize="15sp" />

            <TextView
                android:id="@+id/textView11"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/txtTitlev1"
                android:layout_below="@+id/txtTitlev1"
                android:onClick="newActivity"
                android:text="Medium Text"
                android:layout_weight="1"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textSize="15sp" />
    </LinearLayout>

    <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:weightSum="3" >
            <TextView
                android:id="@+id/TextView31"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/txtTitlev3"
                android:layout_alignParentRight="true"
                android:layout_below="@+id/txtTitlev3"
                android:text="@string/strNA"
                android:layout_weight="1"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textSize="15sp" />

            <TextView
                android:id="@+id/TextView33"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@+id/TextView23"
                android:layout_alignBottom="@+id/TextView23"
                android:layout_alignLeft="@+id/TextView32"
                android:layout_alignParentRight="true"
                android:text="@string/strNA"
                android:layout_weight="1"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textSize="15sp"
                tools:ignore="HardcodedText" />

            <TextView
                android:id="@+id/txtTitlev1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_above="@+id/TextView21"
                android:layout_alignParentLeft="true"
                android:fontFamily="Roboto-BoldCondensed.ttf"
                android:text="@string/ttlLeadid"
                android:textColor="@color/Turquoise4"
                android:layout_weight="1"
                android:textSize="20sp"
                android:textStyle="bold|normal"
                android:typeface="normal" />
    </LinearLayout>

    <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:weightSum="3" >
            <TextView
                android:id="@+id/TextView32"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/TextView31"
                android:layout_alignParentRight="true"
                android:layout_below="@+id/TextView31"
                android:text="@string/strNA"
                android:layout_weight="1"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textSize="15sp"
                tools:ignore="HardcodedText" />

            <TextView
                android:id="@+id/TextView22"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/TextView21"
                android:layout_below="@+id/TextView21"
                android:text="Medium Text"
                android:layout_weight="1"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textSize="15sp"
                tools:ignore="HardcodedText" />

            <TextView
                android:id="@+id/TextView23"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/TextView22"
                android:layout_below="@+id/TextView22"
                android:onClick="newActivity"
                android:text="Medium Text"
                android:layout_weight="1"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textSize="15sp"
                tools:ignore="HardcodedText" />
    </LinearLayout>

    <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:weightSum="3" >
            <TextView
                android:id="@+id/txtTitlev3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_alignParentTop="true"
                android:fontFamily="Roboto-BoldCondensed.ttf"
                android:text="@string/ttlContact"
                android:textColor="@color/Turquoise4"
                android:textSize="20sp"
                android:layout_weight="1"
                android:textStyle="bold|normal" />

            <TextView
                android:id="@+id/txtTitlev2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:layout_centerHorizontal="true"
                android:fontFamily="Roboto-BoldCondensed.ttf"
                android:text="@string/ttlName"
                android:textColor="@color/Turquoise4"
                android:textSize="20sp"
                android:layout_weight="1"
                android:textStyle="bold|normal" />

            <TextView
                android:id="@+id/TextView21"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_above="@+id/TextView32"
                android:layout_centerHorizontal="true"
                android:text="Medium Text"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textSize="15sp"
                android:layout_weight="1"
                tools:ignore="HardcodedText" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:52:25.760

你为什么不尝试通过`RelativeLayout.layoutparams`和相对布局java编码来使用它。

您可以使用任何布局来执行此操作，例如这里我使用的是线性布局

```
Textview hname, game,time;
    hname = new TextView(context);
            game =new TextView(context);
            time = new TextView(context);

LinearLayout ll = new LinearLayout(context);
LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(600, 100);

//add the settext here for ur textviews

ll.addView(hname, lp);
ll.addView(game, lp);
ll.addView(time, lp);

setcontentview(ll); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:40:10.170

您可以使用类似这样的布局。我使用了 3 行的表格布局。第一行显示列标题，其他行显示数据。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TableLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:stretchColumns="*" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="5dp" >

            <TextView
                android:id="@+id/ID"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="ID"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Name"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:id="@+id/textView3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Contact"
                android:textAppearance="?android:attr/textAppearanceMedium" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="12"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:id="@+id/textView5"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Name 1"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:id="@+id/textView6"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="1234567"
                android:textAppearance="?android:attr/textAppearanceMedium" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView7"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="25"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:id="@+id/textView8"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Name 2"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:id="@+id/textView9"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="594751"
                android:textAppearance="?android:attr/textAppearanceMedium" />

        </TableRow>
    </TableLayout>

</LinearLayout> 
```

# c99 - 如果我将一个空字符串传递给 C 中的 puts() 会发生什么？

> ID：15499529
> 
> 赞同：-1
> 
> 时间：2013-03-19T12:28:23.297
> 
> 标签：c99

C99 标准是否定义了以下行为：

`puts(s);// s != NULL but *s==""`

我曾在 Linux 联机帮助页中查找过此内容，但没有发现任何用处。有人可以澄清一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T12:31:15.133

这就是 C99 所说的`puts`：

> ### 7.19.7.10`puts`功能
> 
> **概要**
> 
> ```
> #include <stdio.h>
> int puts(const char *s); 
> ```
> 
> **描述**
> 
> puts 函数将 指向的字符串写入 指向`s`的流`stdout`，并将换行符附加到输出中。不写入终止空字符。
> 
> **退货**
> 
> 如果发生写入错误， puts 函数返回 EOF；否则返回一个非负值。

没有提到`s != NULL`or `*s==""`。更不用说`*s==""`甚至没有意义，你可能是说`*s == '\0'`.

* * *

> 如果我将一个空字符串传递给 C 中的 puts() 会发生什么？

正如标准所说：

> puts 函数写入字符串 ...，并将换行符附加到输出。

所以首先打印空字符串，即不打印任何内容，然后打印一个换行符。它有效地将光标移到下一行。

# linux - 调用 clCreateContext 时出现错误 CL_DEVICE_NOT_AVAILABLE（Intel Core2Duo，Intel OCL SDK 3.0 beta）

> ID：15499533
> 
> 赞同：3
> 
> 时间：2013-03-19T12:28:30.657
> 
> 标签：linux, opencl, intel

我正在尝试开始使用 OpenCL（英特尔 opencl-1.2-3.0.56860）。我设法在 Ubuntu 12.05 下安装了来自 Intel 的 OpenCL SDK（使用“alien”将 rpm 包转换为 *.deb 包）。现在我尝试让我的第一个简单的 OpenCL 程序运行...要运行我需要使用的程序设置 LD_LIBRARY_PATH：

```
export LD_LIBRARY_PATH=/opt/intel/opencl/lib64/ 
```

我的问题是，我在调用 clCreateContext(...) 时总是收到错误“CL_DEVICE_NOT_AVAILABLE”。

这是我的源代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <CL/cl.h>
#include <CL/cl_platform.h>
#include <string.h>

// Enable double precision values
#pragma OPENCL EXTENSION cl_khr_fp64 : enable

// OpenCL kernel. Each work item takes care of one element of c
const char *kernelSource =                                      "\n" \
"__kernel void vecAdd(  __global double *a,                       \n" \
"                       __global double *b,                       \n" \
"                       __global double *c,                       \n" \
"                       const unsigned int n)                    \n" \
"{                                                               \n" \
"    //Get our global thread ID                                  \n" \
"    int id = get_global_id(0);                                  \n" \
"                                                                \n" \
"    //Make sure we do not go out of bounds                      \n" \
"    if (id < n)                                                 \n" \
"        c[id] = a[id] + b[id];                                  \n" \
"}                                                               \n" \
                                                                "\n" ;

const char* err2str(cl_int err) {
  switch(err) {
  case CL_SUCCESS: return "CL_SUCCESS";
  case CL_INVALID_PROGRAM: return "CL_INVALID_PROGRAM";
  case CL_INVALID_VALUE: return "CL_INVALID_VALUE";
  case CL_INVALID_DEVICE: return "CL_INVALID_DEVICE";
  case CL_INVALID_BINARY: return "CL_INVALID_BINARY";
  case CL_INVALID_BUILD_OPTIONS: return "CL_INVALID_BUILD_OPTIONS";
  case CL_INVALID_OPERATION: return "CL_INVALID_OPERATION";
  case CL_DEVICE_NOT_AVAILABLE: return "CL_DEVICE_NOT_AVAILABLE";
  default: return "unknown";
  }
}

void pfn_notify(const char *errinfo, const void *private_info, size_t cb, void *user_data)
{
  fprintf(stderr, "OpenCL Error (via pfn_notify): %s\n", errinfo);
}

cl_platform_id GetIntelOCLPlatform()
{
    cl_platform_id pPlatforms[10] = { 0 };
    char pPlatformName[128] = { 0 };

    cl_uint uiPlatformsCount = 0;
    cl_int err = clGetPlatformIDs(10, pPlatforms, &uiPlatformsCount);
    for (cl_uint ui = 0; ui < uiPlatformsCount; ++ui)
    {
        err = clGetPlatformInfo(pPlatforms[ui], CL_PLATFORM_NAME, 128 * sizeof(char), pPlatformName, NULL);
        if ( err != CL_SUCCESS )
        {
            printf("ERROR: Failed to retreive platform vendor name.\n", ui);
            return NULL;
        }

        if (!strcmp(pPlatformName, "Intel(R) OpenCL"))
            return pPlatforms[ui];
    }

    return NULL;
}

int main( int argc, char* argv[] )
{
    cl_platform_id cpPlatform;        // OpenCL platform
    cl_device_id device_id;           // device ID
    cl_context context;               // context
    cl_command_queue queue;           // command queue
    cl_program program;               // program
    cl_kernel kernel;                 // kernel
    size_t cb;
    cl_device_id devices[100];
    cl_uint devices_n = 0;
    cl_int err;

    cl_platform_id intel_platform_id = GetIntelOCLPlatform();
    if( intel_platform_id == NULL ) {
      printf("ERROR: Failed to find Intel OpenCL platform.\n");
      return -1;
    }

    // Get Device Info...
    err = clGetDeviceIDs(intel_platform_id, CL_DEVICE_TYPE_ALL, 100, devices, &devices_n);
    printf("ERR(clGetDeviceIDs) = %d\n", err);
    printf("#DEVICES: %d\n", devices_n);

    for (int i=0; i<devices_n; i++) {
       char buffer[10240];
       cl_uint buf_uint;
       cl_ulong buf_ulong;
       printf("  -- %d --\n", i);
       err = clGetDeviceInfo(devices[i], CL_DEVICE_NAME, sizeof(buffer), buffer, NULL);
       printf("  DEVICE_NAME = %s\n", buffer);
       err = clGetDeviceInfo(devices[i], CL_DEVICE_VENDOR, sizeof(buffer), buffer, NULL);
       printf("  DEVICE_VENDOR = %s\n", buffer);
       err = clGetDeviceInfo(devices[i], CL_DEVICE_VERSION, sizeof(buffer), buffer, NULL);
       printf("  DEVICE_VERSION = %s\n", buffer);
       err = clGetDeviceInfo(devices[i], CL_DRIVER_VERSION, sizeof(buffer), buffer, NULL);
       printf("  DRIVER_VERSION = %s\n", buffer);
       err = clGetDeviceInfo(devices[i], CL_DEVICE_MAX_COMPUTE_UNITS, sizeof(buf_uint), &buf_uint, NULL);
       printf("  DEVICE_MAX_COMPUTE_UNITS = %u\n", (unsigned int)buf_uint);
       err = clGetDeviceInfo(devices[i], CL_DEVICE_MAX_CLOCK_FREQUENCY, sizeof(buf_uint), &buf_uint, NULL);
       printf("  DEVICE_MAX_CLOCK_FREQUENCY = %u\n", (unsigned int)buf_uint);
       err = clGetDeviceInfo(devices[i], CL_DEVICE_GLOBAL_MEM_SIZE, sizeof(buf_ulong), &buf_ulong, NULL);
       printf("  DEVICE_GLOBAL_MEM_SIZE = %llu\n", (unsigned long long)buf_ulong);
    }

    context = clCreateContext(NULL, 1, devices, &pfn_notify, NULL, &err);
    printf("ERR(clCreateContext) = %d [%s]\n", err, err2str(err));

    // Create a context
    cl_context_properties context_properties[3] = {CL_CONTEXT_PLATFORM, (cl_context_properties)intel_platform_id, (cl_context_properties)NULL };

//    context = clCreateContext(0, 1, &device_id, NULL, NULL, &err);
    context = clCreateContextFromType(context_properties, CL_DEVICE_TYPE_CPU, NULL, NULL, &err);
    printf("ERR(clCreateContextFromType) = %d [%s]\n", err, err2str(err));
    if (err != CL_SUCCESS) exit(0);

    if (context == (cl_context)0) {
      printf("Illegal context?");
      exit(0);
    }

    return 0;
} 
```

输出是：

```
ERR(clGetDeviceIDs) = 0
#DEVICES: 1
  -- 0 --
  DEVICE_NAME = Intel(R) Core(TM)2 Duo CPU     P7450  @ 2.13GHz
  DEVICE_VENDOR = Intel(R) Corporation
  DEVICE_VERSION = OpenCL 1.2 (Build 56860)
  DRIVER_VERSION = 1.2
  DEVICE_MAX_COMPUTE_UNITS = 2
  DEVICE_MAX_CLOCK_FREQUENCY = 2130
  DEVICE_GLOBAL_MEM_SIZE = 3152510976
ERR(clCreateContext) = -2 [CL_DEVICE_NOT_AVAILABLE]
ERR(clCreateContextFromType) = -2 [CL_DEVICE_NOT_AVAILABLE] 
```

任何想法如何解决这个问题？

问候，斯特凡

**- - 编辑 - - -**

CPU 有 sse4_1 标志（也有：sse、sse2、sss3）。

猫 /proc/cpuinfo

```
processor       : 0
vendor_id       : GenuineIntel
cpu family      : 6
model           : 23
model name      : Intel(R) Core(TM)2 Duo CPU     P7450  @ 2.13GHz
stepping        : 6
microcode       : 0x60c
cpu MHz         : 800.000
cache size      : 3072 KB
physical id     : 0
siblings        : 2
core id         : 0
cpu cores       : 2
apicid          : 0
initial apicid  : 0
fpu             : yes
fpu_exception   : yes
cpuid level     : 10
wp              : yes
flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx lm constant_tsc arch_perfmon pebs bts rep_good nopl aperfmperf pni dtes64 monitor ds_cpl est tm2 ssse3 cx16 xtpr pdcm sse4_1 lahf_lm dtherm
bogomips        : 4255.56
clflush size    : 64
cache_alignment : 64
address sizes   : 36 bits physical, 48 bits virtual
power management:

[ same for the other core] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T07:26:27.767

Intel OpenCL CPU 至少需要 SSE 4.1。Core 2 Duo 只能达到 SSSE3。

[http://software.intel.com/en-us/articles/opencl-sdk-frequently-asked-questions#14](http://software.intel.com/en-us/articles/opencl-sdk-frequently-asked-questions#14)

编辑：某些版本的 Core 2 Duo 支持 SSE 4.1 以下是英特尔 OpenCL 驱动程序支持的处理器列表 [http://software.intel.com/en-us/articles/opencl-release-notes#2](http://software.intel.com/en-us/articles/opencl-release-notes#2)

不支持某些版本的 Core 2。" 不支持所有其他版本的 Intel® Core™ 2 处理器"

例如，您可以使用 CPU-Z 来找出您的 CPU 支持的 SSE 版本。

安装 AMD OpenCL CPU 驱动程序。它只需要SSE2。在 Windows 上，即使我没有 AMD GPU，我也安装了 Radeon GPU 驱动程序。它仍然安装了 AMD OpenCL CPU 驱动程序，并且与 Nvidia 驱动程序没有冲突。我不知道在Linux上。但现在我可以使用 Intel CPU、AMD CPU 和 Nvidia GPU OpenCL 驱动程序。

# ios - 选择行后如何将值从 tableviewController 传递到 uiviewcontroller

> ID：15499535
> 
> 赞同：0
> 
> 时间：2013-03-19T12:28:33.860
> 
> 标签：ios, storyboard, uitableview

我有下面的代码：其中 Cell new 是自定义单元格，当用户选择必须传输到另一个 uiviewcontroller 以显示该 msg 的行时，该数组在索引处具有对象但我无法做到这一点。

通过这样做：我得到一个错误 **Incompatible pointer types assignmenting to 'NSString *' from 'UILabel *'**

```
VC2.DisplayMsg.text = cell.textLabel; 
```

displayMsg 是 uiviewcontroller 中必须显示文本的标签。我哪里出错了？

请帮助我或建议任何其他方式将值从导航 uitableviwController 传输到另一个视图控制器，以选择行并在该 uiviewController 中显示消息。请帮助我。我非常感谢。

提前致谢。

完整代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

Cellnew *cell = [array objectAtIndex:indexPath.row];

      ViewControllerDisplayMsg *VC2 = [[ViewControllerDisplayMsg alloc] init];

VC2.DisplayMsgtext = cell.textLabel.text;

    [self performSegueWithIdentifier:@"displayMsgSegueIdentifier" sender:self];

} 
```

错误 ：

由于未捕获的异常'NSInvalidArgumentException'而终止应用程序，原因：'-[__NSCFString textLabel]：无法识别的选择器发送到实例

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:31:54.857

您应该在 other 中定义一个`NSString` 属性，`viewController`首先将表中的值分配给这个字符串，最后在 viewController 的 viewDidLoad 方法中，您可以将此字符串分配给标签文本。将您的其他控制器定义为您的 FirstController 的属性是个好主意。

您应该在类中更新图形元素，因为相应的类或控制器负责显示图形元素和值。

**你的TableViewController.h**

```
@class SecondViewController;

@property(strong,nonatomic)SecondViewController secondVC; 
```

**你的TableViewController.m**

```
self.secondVC=[SecondViewContrlller alloc]initwithNibName:@"SecondViewController" bundle:nil];
self.secondVC.stringValue= cell.textLabel.text; 
```

**YourOtherViewController.h**

```
@property(strong,nonatomic)NSString *stringValue; 
```

**YourOtherViewController.m**

```
-(void)viewDidLoad{

self.displayMsg.text=self.stringValue;

[super viewDidLoad];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T12:36:54.167

在你的 UIViewController 中获取一个 NSString 属性，比如 DisplayMsg: 然后在 didSelectRowAtIndexPath 方法中：

```
VC2.DisplayMsg=cell.textLabel.text; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T12:39:35.280

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    // Make sure your segue name in storyboard is the same as this line
    if ([[segue identifier] isEqualToString:@"YOUR_SEGUE_NAME_HERE"])
    {
        // Get reference to the destination view controller
        YourViewController *vc = [segue destinationViewController];

        // Pass any objects to the view controller here, like...
        [vc setMyObjectHere:object];
    }
} 
```

此代码将帮助您

# php - 使用 strophe 获取在线用户列表 xmpp

> ID：15499538
> 
> 赞同：-1
> 
> 时间：2013-03-19T12:28:40.477
> 
> 标签：php, xmpp, strophe

我使用 strophe 库成功连接到 openfire 服务器。

我想要一个从会议室返回所有用户的 javascript 函数。

另一个问题是：如何设置/获取当前用户的状态？

我当前的代码：

```
$(document).ready(function() {
    connection = new Strophe.Connection(BOSH_SERVICE);
    connection.connect("null",
            "null",
            onConnect);
});

function onConnect(status)
{
    if (status == Strophe.Status.CONNECTED) {
        $('#notifications').html('<p class="welcome">Hello! Any new posts will appear below.</p>');
        connection.addHandler(notifyUser, null, 'message', null, null, null);
        console.log('send ');
        var pres = $pres({to: 'chat@conference.neo-pc/catalin'});
        connection.send(pres);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:42:45.620

在您发送初始状态后，您将获得一份花名册。

[http://xmpp.org/rfcs/rfc6121.html#roster-login](http://xmpp.org/rfcs/rfc6121.html#roster-login) - 如何在登录后检索名册。

要获得某人的出席信息，您需要发送出席信息 IQ。然后获取状态元素。

如果您想查看我使用 strophe.js 构建的 xmppp 客户端，请访问：[http ://hularing.me/](http://hularing.me/)

# kendo-ui - Kendo UI Grid/DataSource - 全局错误处理？

> ID：15499545
> 
> 赞同：5
> 
> 时间：2013-03-19T12:29:07.960
> 
> 标签：kendo-ui, kendo-grid

我目前继承了一个应用程序，该应用程序自始至终具有许多剑道网格（和其他控件），并且我正在尝试修复一个不断出现的错误 - 特别是当用户不再经过身份验证时。

我知道针对单个控件实例的解决方案是什么 - 返回一个标志以指示身份验证失败，然后在错误处理程序中检测到这一点并执行身份验证。

问题是我真的必须为我拥有的每个剑道控件实例处理这个吗？没有我可以挂钩的全局错误处理程序吗？要么用于数据源本身（据我所知，这用于所有 Kendo 控件数据加载），要么专门用于 Grid。我不介意任何一种方式 - 只是哪个是钩子。

与将所有内容重构为特定的错误处理程序等相比，这将是一个更直接的短期解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T12:36:02.413

我假设您可以将全局错误处理程序附加到 DataSource 使用的 $.ajax，您可以在此处查看如何操作：http: [//api.jquery.com/category/ajax/global-ajax-event-处理程序/](http://api.jquery.com/category/ajax/global-ajax-event-handlers/)

或者，您可以利用在 DataSource 中完成的配置直接传递给 $.ajax： [http ://docs.kendoui.c​​om/api/framework/datasource#configuration-transport.read-ObjectStringFunction](http://docs.kendoui.com/api/framework/datasource#configuration-transport.read-ObjectStringFunction)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T11:53:04.843

作为参考，Telerik 的某个人提供了一个仅使用 DataSource 的解决方案。我还没有测试过，但我更喜欢上面接受的答案，因为它与网站上的所有 Ajax 挂钩——不仅仅是那些使用 Kendo DataSource 的。

[http://www.kendoui.c​​om/forums/mvc/grid/global-error-handler-for-numerous-grids.aspx](http://www.kendoui.com/forums/mvc/grid/global-error-handler-for-numerous-grids.aspx)

# javascript - 提交表单时数据不绑定

> ID：15499548
> 
> 赞同：0
> 
> 时间：2013-03-19T12:29:27.020
> 
> 标签：javascript, angularjs, coffeescript, angularjs-scope

当我刷新页面时，会出现正确的值。我希望在提交表单时自动更新“要点”列表。

全局@todone 是这样设置的，因为当我将其设置为“todone”时收到未定义的错误。它可能是无关的。

```
app.factory "To_done", ["$resource", ($resource) ->
   $resource("/to_dones", {}, {update: {method: "PUT"}})
]

@MainCtrl = ["$scope", "To_done", ($scope, To_done) ->
  $scope.to_dones = To_done.query()

  $scope.addTodone = ->
    @todone = To_done.save($scope.newTodone)
    $scope.to_dones.push(@todone)
    $scope.newTodone = {}
]

<div ng-controller="MainCtrl">
  <form ng-submit="addTodone()">
    <input type="text" ng-model="newTodone.gist">
    <input type="submit" value="Add">
  </form>
  <ul>
    <li ng-repeat="todone in to_dones">
        {{todone.gist}}
    </li>
  </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:21:13.813

To_done.save($scope.newTodone) 是异步的。您需要注册一个回调函数来获取 POST 返回的值。

```
var todone = To_done.save($scope.newTodone, function() {
   //success callback - optional
   $scope.to_dones.push(todone);
}, function() {
   //error callback - optional
});
$scope.newTodone = {}; 
```

如果您需要有关从您的服务收到的答案的更多信息，您可以向回调方法添加参数。更多细节在这里：[http](http://docs.angularjs.org/api/ngResource) ://docs.angularjs.org/api/ngResource .$resource

# android - 签名的apk没有从gmail附件中安装

> ID：15499549
> 
> 赞同：0
> 
> 时间：2013-03-19T12:29:30.210
> 
> 标签：android, apk

我已经构建了一个测试 android 应用程序并成功签名，然后通过电子邮件将其发送给某人进行测试。他们点击电子邮件中的附件，它没有显示任何操作，只是文件的名称不可见，没有安装或下载选项即将到来。我也在使用 gmail 进行发送和接收。但是当我从 bin 中复制 apk 文件时文件夹并发送它工作正常，所以请帮我弄清楚为什么签名的apk不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:46:49.380

当我从本机电子邮件应用程序打开包含 APK 的电子邮件时，我也面临类似的问题。尝试从浏览器打开电子邮件，您将获得下载选项。下载后就可以安装了。希望这会奏效！

# c# - 如何构建引用相同项目的 x64 和 x86 项目

> ID：15499553
> 
> 赞同：3
> 
> 时间：2013-03-19T12:29:46.097
> 
> 标签：c#, compilation, x86-64

我有三个项目，**ProjectA (exe)** , **ProjectB (exe)**和**ProjectD (类库)**

项目 A 引用 System.Data.OracleClient.dll 和 ProjectD。项目 B 只是引用了 ProjectD。安装了 32 位客户端版本的 oracle，因此 ProjectA 必须是 32 位应用程序。项目 B 可以构建为 64 位应用程序。

**项目 A 构建设置：**

平台：活动 (x86)

平台目标：x86

**项目 B 构建设置：**

平台：活动（任何 CPU）

平台目标：任何 CPU

我的问题是 ProjectD（类库）的构建设置应该是什么，当 ProjectA 和 ProjectB 构建时，它是否以不同的方式构建 ProjectD？就项目的沟通而言，对 CLR 进行更深入的解释将非常有用。

ProjectA 和 ProjectB 将在 64 位 Windows Server 2008 上使用。无需安装，只需独立的 exe。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T12:57:11.760

只有 EXE 项目的平台目标设置很重要。这是首先加载并确定整个过程的位数的程序集。

DLL 没有选择，它*必须*与 EXE 项目选择的任何内容兼容。因此，为 DLL 项目选择 AnyCPU 几乎总是正确的选择。

只有少数情况下您会使用显式设置。只有当您知道类库依赖于某种本机代码（例如 Oracle 提供程序）**并且**尝试以错误的位数运行该本机代码会产生完全难以理解的异常时，您才会这样做。您可以通过选择 DLL 的平台目标来避免该异常并获得（稍微）更好的异常，当程序尝试加载程序集时，它会提前失败并出现 BadImageFormatException。尽管这个例外也不是一个非常有用的例外。在确定真正的问题出在其他地方之前，管理员可能会尝试重新安装 DLL 几次。

所以基本的基本规则：为 EXE 项目选择 x86，为所有其他类库项目选择 AnyCPU，对 Oracle 无所作为使这变得容易的讨厌图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T12:39:43.080

> 我的问题是 ProjectD（类库）的构建设置应该是什么，当 ProjectA 和 ProjectB 构建时，它是否以不同的方式构建 ProjectD？就项目的沟通而言，对 CLR 进行更深入的解释将非常有用。

只需`Any CPU`用于您的库。它将构建一个独特的程序集，可以在 32 位和 64 位环境中执行。

从技术上讲，*即时编译*在运行时生成 32 位代码或 64 位代码。

# unit-testing - 在 grails 中对控制器执行单元测试时无法使用 grailsApplication.getMetadata.get(" ")

> ID：15499558
> 
> 赞同：0
> 
> 时间：2013-03-19T12:29:51.573
> 
> 标签：unit-testing, grails, junit4, grails-controller

在我的 grails 应用程序中，在控制器中，我使用以下类型的东西：

```
class SampleController {
   def action1 = {
     def abc = grailsApplication.getMetadata().get("xyz")
     render abc.toString()
   }
} 
```

在运行应用程序时，它会从 application.properties 正确读取属性“xyz”并且工作正常。但是当我为上述控制器编写单元测试用例时，如下所示：

```
class SampleControllerTests extends ControllerUnitTestCase {
  SampleController controller

  protected void setUp() {
    super.setUp()
    controller = new SampleController()
    mockController(SampleController)
    mockLogging(SampleController)
  }

  void testAction1() {
    controller.action1()
    assertEquals "abc", controller.response.contentAsString
  }
} 
```

但是当我执行“grails test-app”时，我希望它会从 application.properties 中获取属性“xyz”并按预期返回。但它给出的错误是“没有这样的属性：grailsApplication”。

我明白，我想我需要模拟`grailsApplication`对象，我也尝试了许多选项，但所有这些都不起作用。

我是 Grails 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:33:44.873

`mockController`不会嘲笑`GrailsApplication`，你需要自己做。

最快的解决方案是：

```
protected void setUp() {
        super.setUp()
        mockLogging(DummyController)
        GrailsApplication grailsApplication = new DefaultGrailsApplication()
        controller.metaClass.getGrailsApplication = { -> grailsApplication }
    } 
```

这个解决方案并不完美 - 它会`DefaultGrailsApplication`在每次设置期间创建一个新的，并且`mockController`还会创建一些额外的`DefaultGrailsApplication`.

请注意，您不需要`mockController`自己打电话，它将由`ControllerUnitTestCase`为您完成。

# regex - 正则表达式检查文本有效性

> ID：15499562
> 
> 赞同：0
> 
> 时间：2013-03-19T12:29:56.837
> 
> 标签：regex

我需要做一些数据过滤，我有一个问题。如何检查文本的格式是否如下：

> 文本-​​1/1

. TEXT - 一些大写字母的文本，1 - 任何正整数。因此，例如，“FA-5/9”将有效，但“FA-AV”将无效。

感谢您的回答。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:31:23.760

这将符合您的要求：

`[A-Z]+-\d\/\d`

解释：

`[A-Z]+`# 将匹配一个或多个 AZ 字符[（链接）](http://www.regular-expressions.info/charclass.html)

`-` # 将匹配破折号 (-)

`\d\/\d`# 将匹配数字斜线数字（1/1）

# r - 如何在一列中基于时间间隔创建 ID 字段

> ID：15499564
> 
> 赞同：0
> 
> 时间：2013-03-19T12:29:59.863
> 
> 标签：r, database

我想将我的一个建模结果的输出分成某种 ID 列。由于我有不同的粒子轨迹（n = 15000）和不同的nrow间距，我不能假设它们之间的间隔相等（n_all = 1767333）。我唯一的分隔指标是以“0”开头的“时间”列。--> 因此，如果出现另一个“0.000”，则 ParticleID 应增加一...

我尝试了不同的 for 循环和 if-else 函数，但我无法这样做......我非常感谢你的帮助。下面的代码示例和数据示例。提前致谢。

其中一个尝试**不起作用**：

```
#initial seperation process
n_all <- nrow(all_trac)                                   #number of rows - 1767333 rows
n <- nrow(subset(all_trac, all_trac[,"IntTimeloc"] == 0)) #number of particles - 15806 particles
all_trac$Particle_ID <- 1:n_all

#start loop
for (j in 1:n_all)

  for (i in 1:n){

      if (all_trac$IntTimeloc[j] != 0) {

        all_trac$Particle_ID[j] = i

      }

      else

      all_trac$Particle_ID[j] = i+1

  } 

}
#end loop 
```

到底应该怎么输出...

```
IntTimeloc  VXloc           VYloc           VZloc       Particle_ID
0.000   0.0009997907    9.038499e-04    -8.904433e-05   1
1.000   0.0009920447    9.680137e-04    -7.579094e-05   1
3.000   0.0009914209    9.718620e-04    -7.473217e-05   1
...
0.000   0.0008281278    -2.395466e-05   -1.537789e-04   2
9.000   0.0008310459    -2.691492e-05   -1.533394e-04   2
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:35:22.607

试试这个例如：

```
transform(dat,id = cumsum(c(1,diff(IntTimeloc)<0)))

 IntTimeloc        VXloc         VYloc         VZloc Particle_ID id
1          0 0.0009997907  9.038499e-04 -8.904433e-05           1  1
2          1 0.0009920447  9.680137e-04 -7.579094e-05           1  1
3          3 0.0009914209  9.718620e-04 -7.473217e-05           1  1
4          0 0.0008281278 -2.395466e-05 -1.537789e-04           2  2
5          9 0.0008310459 -2.691492e-05 -1.533394e-04           2  2 
```

# android - 通用图像加载器

> ID：15499565
> 
> 赞同：2
> 
> 时间：2013-03-19T12:30:01.727
> 
> 标签：android, universal-image-loader

我正在使用 nostra 的通用图像加载器[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

我遇到了 displayImage() 的问题。发生以下情况：

“我调用 imageView.displayImage() 并且图像未加载（它在线程中运行）然后我现在第二次调用 imageView.displayImage() 因为第二个图像较小第二个图像显示在 imageView 但经过几次秒第一张图片替换第二张图片。”

如何避免第二张图片被前一张图片替换？有什么选项可以设置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T05:18:03.823

在 imageLoader.loadImage() 的 onLoadingComplete() 回调中，我们获取 imageUri 作为参数，如果相同，则使用当前的 imageUrl 检查它，然后在 imageView 中设置图像。注意当前的 imageUrl 应该是成员变量而不是最终变量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-17T20:26:24.467

我希望以下代码可以对您有所帮助

```
private void LoadBackground(){
    ParseFile f = messageObject.getParseFile("image");
    voiceFile = messageObject.getParseFile("");
    if( f == null) return;
    String fpath = f.getUrl().toString();
    if(f.getUrl() == null) return;
    if (!fpath.equalsIgnoreCase("")) {
        if (!fpath.startsWith("http://") && !fpath.startsWith("https://")) {
            Log.d("refreshProfile",fpath);
            File imgFile = new File(fpath);
            Bitmap bitmap = BitmapFactory.decodeFile(imgFile.getAbsolutePath());
            if (bitmap != null) {
                imgBg.setImageBitmap(bitmap);
            }
        } else {
            ImageLoader.getInstance().displayImage(fpath, imgBg,
                DisplayImageOption.getDisplayImage(),
                new AnimateFirstDisplayListener(){
                    @Override
                    public void onLoadingComplete(String imageUri, View view, Bitmap loadedImage) {
                        pbLoading.setVisibility(View.GONE);
                    }
                });
        }
    }
} 
```

以下是监听器的代码

```
public class AnimateFirstDisplayListener extends SimpleImageLoadingListener {

  public static final List<String> displayedImages = Collections.synchronizedList(new LinkedList<String>());

     @Override
     public void onLoadingComplete(String imageUri, View view, Bitmap loadedImage) {
       if (loadedImage != null) {
           ImageView imageView = (ImageView) view;
           boolean firstDisplay = !displayedImages.contains(imageUri);
           if (firstDisplay) {
               FadeInBitmapDisplayer.animate(imageView, 500);
               displayedImages.add(imageUri);
           }
       }
   }
} 
```

显示图像选项.java

```
public class DisplayImageOption {

   public static DisplayImageOptions getDisplayImage() {

       DisplayImageOptions options = new DisplayImageOptions.Builder()
       .showImageOnLoading(R.drawable.background)
       .showImageForEmptyUri(R.drawable.background)
       .showImageOnFail(R.drawable.background)
       .cacheInMemory(true)
       .cacheOnDisk(true)
       .considerExifParams(true)
       .build();
       return options;

   }

   public static DisplayImageOptions getDisplayRoundedImage() {

       DisplayImageOptions options = new DisplayImageOptions.Builder()
       .showImageOnLoading(R.drawable.ic_launcher)
       .showImageForEmptyUri(R.drawable.ic_launcher)
       .showImageOnFail(R.drawable.ic_launcher)
       .cacheInMemory(true)
       .cacheOnDisk(true)
       .considerExifParams(true)
       .displayer(new RoundedBitmapDisplayer(100))
       .build();

       return options;

   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-19T13:01:21.860

### 也许你可以像下面的代码一样：

```
new DisplayImageOptions.Builder()
        .showImageForEmptyUri(R.drawable.default_avatar_female)
        .showImageOnFail(R.drawable.default_avatar_female)
        .showImageOnLoading(R.drawable.default_avatar_female).build(); 
```

通过 showImageOnLoading。

# c++ - C++ 类的成员函数并通过 dll 显式链接到它们

> ID：15499571
> 
> 赞同：0
> 
> 时间：2013-03-19T12:30:11.090
> 
> 标签：c++, visual-studio-2010, visual-c++, dll

我必须访问一个Dll里面的一个类的成员变量，我已经加载了dll，但是如何访问这个类的成员变量，我不想使用COM中使用的虚拟表概念。任何投入都将是可观的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:34:47.677

`dllimport`表示将导入实现：

```
class __declspec(dllimport) YourClass
{
   // ... declarations ...
}; 
```

有用的链接：

[HowTo：从 DLL 导出 C++ 类](http://www.codeproject.com/Articles/28969/HowTo-Export-C-classes-from-a-DLL)

# html - firefox、ie和chrome的区别

> ID：15499579
> 
> 赞同：2
> 
> 时间：2013-03-19T12:30:38.287
> 
> 标签：html, css, google-chrome, firefox, browser

我的网站在 Chrome 中的显示与其他浏览器不同。我检查过 IE、Firefox、Safari 和 Chrome。除了 Chrome，一切都很好。

看着 CSS 我不确定问题是什么。

它的 3 个大小相等的盒子彼此相邻。左侧和中间框对齐，但右侧框在 Chrome 中高出 20 像素。

这是盒子的CSS：

```
#home_boxes {
    margin: 20px 0 0 0;
    clear: both;
    width: 1000px;
    overflow: hidden;
}

#home_boxes p {
    margin-top: 0;
    font-size: 10pt;
}
#home_boxes h2 {
        margin-top: 0;
        margin-bottom: 5px;
        font-size: 14pt;
        font-family: Verdana, Arial, Geneva, sans-serif;
    }

#home_boxes .box_content {
        width: 220px;
        float: right;
        padding: 5px;
    }

#contact_box {
    width: 318px;
    min-height: 150px;
    height: 100%;
    background: url('../images/3box/contact.png') no-repeat #efefef;
    float: left;
    margin-right: 20px;
    border: 1px solid #c9c9c9;
}

#contact_box:hover {
    background: url('../images/3box/contact-hover.png') no-repeat #00529f;
    border: 1px solid #c9c9c9;
    color: #fff;
}

#about_box {
    width: 318px;
    min-height: 150px;
    height: 100%;
    background: url('../images/3box/about.png') no-repeat #efefef;
    float: right;
    margin-right: 20px;
    border: 1px solid #c9c9c9;
}

#about_box:hover {
    background: url('../images/3box/about-hover.png') no-repeat #00529f;
    border: 1px solid #c9c9c9;
    color: #fff;
}

#home_boxes #side_newsletter_box {
    width: 320px;
    background: url('../images/3box/newsletter.png') no-repeat;
    overflow: hidden;
    float: right;
}

#newsletter_box {
    width: 318px;
    min-height: 150px;
    height: 100%;
    background: url('../images/3box/newsletter.png') no-repeat #efefef;
    float: right;
    border: 1px solid #c9c9c9;
}

#newsletter_box:hover {
    background: url('../images/3box/newsletter-hover.png') no-repeat #00529f;
    border: 1px solid #c9c9c9;
    color: #fff;
} 
```

这是HTML：

```
 <div id = "home_boxes">

        <div id="newsletter_box">
            <div class = "box_content">
                <h2><?=get_content(610)?></h2>
                <p><?=get_content(3234)?></p>
                <form action = <?=$myroot?>"newsletter_process.php" method = "post">
                    <input type = "text" name = "email" class = "news_signup_input" value = <?=get_content(27)?> onClick = "this.value=''" />
                    <input type = "submit" name = "newsletter_submit" value = "" class = "news_signup_submit" />
                </form>
            </div>
        </div>

    <a href = "contact">
    <div id = "contact_box">
        <div class = "box_content">
            <h2><?=get_content(1641)?></h2>
            <p><?=get_content(3257)?></p>
        </div>
    </div>
    </a>

    <a href = "about">
    <div id = "about_box">
        <div class = "box_content">
            <h2><?=get_content(3236)?></h2>
            <p><?=get_content(3749)?></p>
        </div>
    </div>
    </a>
</div> 
```

有人能看出问题吗。由于我不确定问题是什么，我一直在搞乱 CSS 一段时间但无济于事。我没有创建此代码，我是从其他人那里获取的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:50:33.897

据我所知，它很简单，在 3 个盒子 div ( , , )`clear`下方但在( ) div 内放置一个。`newsletter_bos``contact_box``about_box``main``home_boxes`

像这样的东西

```
.clear {
clear: both;
line-height: 0%;
height: 0px;
display: block;
} 
```

这应该可以解决您的问题并正确对齐所有框。

# linq - 按名称获取属性

> ID：15499589
> 
> 赞同：0
> 
> 时间：2013-03-19T12:31:02.703
> 
> 标签：linq, linq-to-sql, reflection

我可以在 Linq-to-Sql 的 lambda 表达式中以某种方式通过它的名称（由字符串表示）访问属性吗？

说，像

```
collection.Where(x => Get_Property(x, property_name)==property_value) 
```

实际上，我的问题是`Get_Property`使用反射实现的代码，因此使用 Linq2Obj 而不是 Linq2Sql，并且所有工作都是由应用程序而不是 sql server 执行的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:34:03.590

不，你不能这样做，因为只有一组方法可以转换成 SQL。您的自定义方法或反射 API 不属于该集合。

您可以使用[Entity SQL](http://msdn.microsoft.com/en-us/library/bb387145.aspx)将查询组合为字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:40:25.040

尝试[DynamicLINQ](http://nuget.org/packages/DynamicLINQ/)。它从字符串创建 lambda 表达式，这些表达式由 ORM 使用。

# c++ - 在 std::vector 中查找

> ID：15499590
> 
> 赞同：11
> 
> 时间：2013-03-19T12:31:02.947
> 
> 标签：c++, boost, std, c++98

我有一个成对的向量。对中的第一个是 std::string 类型，第二个是 Container 类型。

std 或 boost 中存在哪些方便的功能，以便我可以在给定字符串值作为键的情况下返回 Container？

**更新**

有人评论说我可以使用 std::map 代替，但我实际上需要保留我的项目的顺序，按照我将它们推送到向量的顺序。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T12:44:55.647

一个可能的解决方案：

```
struct comp
{
    comp(std::string const& s) : _s(s) { }

    bool operator () (std::pair<std::string, Container> const& p)
    {
        return (p.first == _s);
    }

    std::string _s;
};

// ...

typedef std::vector<std::pair<std::string, Container> > my_vector;
my_vector v;

// ...

my_vector::iterator i = std::find_if(v.begin(), v.end(), comp("World"));
if (i != v.end())
{
    Container& c = i->second;
}

// ... 
```

这是一个完整的例子：

```
#include <vector>
#include <utility>
#include <string>
#include <algorithm>

struct Container
{
    Container(int c) : _c(c) { }
    int _c;
};

struct comp
{
    comp(std::string const& s) : _s(s) { }

    bool operator () (std::pair<std::string, Container> const& p)
    {
        return (p.first == _s);
    }

    std::string _s;
};

#include <iostream>

int main()
{
    typedef std::vector<std::pair<std::string, Container> > my_vector;
    my_vector v;
    v.push_back(std::make_pair("Hello", Container(42)));
    v.push_back(std::make_pair("World", Container(1729)));
    my_vector::iterator i = std::find_if(v.begin(), v.end(), comp("World"));
    if (i != v.end())
    {
        Container& c = i->second;
        std::cout << c._c; // <== Prints 1729
    }
} 
```

这是一个[活生生的例子](http://liveworkspace.org/code/yJL1f$16)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T12:49:02.713

使用[Boost.Range](http://www.boost.org/doc/libs/1_52_0/libs/range/doc/html/range/reference/algorithms/non_mutating/find_if.html)和[Boost.Bind](http://www.boost.org/doc/libs/1_52_0/libs/bind/bind.html#with_function_objects)，您可以这样做：

```
struct predicate
{
    template<class Key, class Pair>
    bool operator()(const Key& k, const Pair& p) const
    {
        return p.first == k;
    }
};

// Your vector of pairs
std::vector<std::pair<std:string, Container> v = ...;
// The key you would like to search for
std::string key = ...;
Container& c = boost::find_if(v, boost::bind(predicate(), key, _1))->second; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-10T21:13:36.797

```
class SomeClass{
   int num;
public:
   SomeClass();
   void setNumber(int n) const { num = n;}
};

vector<pair<SomeClass,string> > vectr;

for(unsigned int i = 0; i < vectr.size(); i++)
   if(vectr[i].second == "key")
       vectr[i].first.setNumber(50); 
```

为我工作！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T12:49:23.430

有一个简单的解决方案：使用`std::copy`and `std::inserter`：

```
#include <algorithm>
#include <map>
#include <string>
#include <utility> // pair
#include <vector>

void function()
{
    typedef int Data;
    typedef std::pair< std::string, Data > String_Data_Pair;
    typedef std::vector< String_Data_Pair > String_Data_Pair_Sequence;
    typedef std::map< std::string, Data > String_To_Data_Map;

    String_Data_Pair_Sequence string_data_pairs;

    /* fill 'string_data_pairs' here */

    String_To_Data_Map string_to_data_map;

    std::copy( string_data_pairs.begin(),
               string_data_pairs.end(),
               std::inserter( string_to_data_map,
                              string_to_data_map.begin() /* superfluous, but required */ ) );
} 
```

# json - 使用 REST 生成列表以生成 JSON 响应时出错

> ID：15499592
> 
> 赞同：0
> 
> 时间：2013-03-19T12:31:05.650
> 
> 标签：json, web-services, rest

我正在尝试使用来自 Android 的 Json 来使用列表。但是，我认为我没有很好地生成列表，当我尝试用 Json 解析时，我得到了错误。

我得到这个结果：

[{"id":7,"word":"w6","definition":"d6","language":"es","numberDefinition":0,"success":false},{"id": 8,"word":"w7\n","definition":"d7","language":"es","numberDefinition":0,"success":false},{"id":9,"word ":"w8","definition":"d8","language":"es","numberDefinition":0,"success":false}]

```
@GET
@Path("words")
@Produces(MediaType.APPLICATION_JSON)
public List<Word> getWords(@QueryParam("number") int number  ) {
    List<Word> list = null;

    list = dictionary.getListWords(number);

    return list;
} 
```

我在 Android 中的 java 代码是：

```
 respJSON = new JSONObject(response);
            JSONArray lineItems = respJSON.getJSONArray("words");
            listWords = new ArrayList<Word>();

            for(int i=0; i<lineItems.length(); i++)
            {               
                JSONObject obj = lineItems.getJSONObject(i);                
                id = obj.getInt(ConstantsTrivial.WORD_ID);
                definition = obj.getString(ConstantsTrivial.WORD_DEFINITION);
                language = obj.getString(ConstantsTrivial.WORD_LANGUAGE);
                wordName = obj.getString(ConstantsTrivial.WORD_NAME);
                numberDefinition = obj.getInt(ConstantsTrivial.WORD_NUMBER_DEFINITION);
                word = new Word(id, wordName, definition, language, numberDefinition);

                listWords.add(word);
            } 
```

我正在寻找一个“单词”，我知道这个错误，但我不知道我应该怎么做才能让我的网络服务以正确的方式生成列表..

错误是：

03-19 13:09:48.086: E/WebServiceTask(9868): 值 [{"numberDefinition":0,"id":1,"word":"w0","language":"ES","definition" :"d0","success":false},{"numberDefinition":0,"id":3,"word":"w2","language":"es","definition":"d2","成功":false},{"numberDefinition":0,"id":4,"word":"w3","language":"es","definition":"d3","success":false}, {"numberDefinition":0,"id":9,"word":"w8","language":"es","definition":"d8","success":false}] 类型为 org.json。 JSONArray 无法转换为 JSONObject

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:09:38.617

错误出现在代码的第一行。您的值是 JSONArray，而不是 JSONObject。该行应该是：

```
JSONArray lineItems = new JSONArray(response); 
```

并且不要忘记删除第二行。

# c# - 在 ASP.NET 动态生成的控件中的 TextBox 上设置 TabIndex？

> ID：15499593
> 
> 赞同：0
> 
> 时间：2013-03-19T12:31:05.933
> 
> 标签：c#, asp.net, tabindex, composite-controls

我有一个 CompositeControl，每个都包含一个 TextBox ( `TextBoxA`) 和三个按钮 ( `ButtonA`、`ButtonB`和`ButtonC`)。我的页面根据页面的状态动态生成*n个这些 CompositeControl。*

我已将 TabIndex 设置`TextBoxA`为一个正值，在该控件的 OnPreRender 方法期间每个控件增加 1：

```
TextBoxA.TabIndex = customControlPosition;
ButtonA.TabIndex = -1;
ButtonB.TabIndex = -1;
ButtonC.TabIndex = -1; 
```

我已经通过调试验证了`customControlPosition`正确地将正的增量值（1、2、3、4 等）分配给 TabIndex 属性。

当前的行为是每次按下`Tab`Key 都会移动光标以突出显示 CompositeControl 中的每个按钮（其 TabIndex 为 -1，不应该被制表符），然后继续将光标放在下一个 CompositeControl 中文本框。我想要做的是让关键**直接**`Tab`将焦点从一个 TextBox 移动到下一个 CompositeControl 中的 TextBox。

 **有什么我想念的东西可以让我这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:36:09.517

我发现了这个问题。

我使用的 TextBox 是一个自定义类，它是 asp:TextBox 的包装器，并且自定义类没有正确地将 TabIndex 值分配给 asp:TextBox。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T12:38:53.397

尝试为您的按钮设置`TabIndex`32767（可能的最大值）。数字越大，控件在 Tab 键顺序中的时间越晚。

我想 32767 比您将添加到页面的控件数量高很多？

看到这个：

[标签索引](http://msdn.microsoft.com/en-us/library/aa704039%28v=vs.85%29.aspx)**

# django - django-celery 消费者无法接收任务

> ID：15499609
> 
> 赞同：3
> 
> 时间：2013-03-19T12:31:36.557
> 
> 标签：django, sqlite, rabbitmq, celery

## 安装

我正在使用 django(1.4) celery(3.0.13) 和 RabbitMQ(v3.0.4)，后端数据库是 sqlite。

芹菜是由`pip install django-celery`

## 环境

在setting.py中：

```
# For django-celery
import djcelery
djcelery.setup_loader()
BROKER_URL = 'amqp://user:pwd@sd5:5672/8086'

### and adding 'djcelery' to INSTALLED_APPS 
```

## 跑步

设置数据库后`south`，我启动 rabbitmq-server 并`manage.py celery worker --loglevel=debug`

我可以看到连接已建立：

```
 -------------- celery@sd5 v3.0.16 (Chiastic Slide)
---- **** ----- 
--- * ***  * -- [Configuration]
-- * - **** --- . broker:      amqp://utils@sd5:5672/8086
- ** ---------- . app:         default:0x8a5106c (djcelery.loaders.DjangoLoader)
- ** ---------- . concurrency: 2 (processes)
- ** ---------- . events:      OFF (enable -E to monitor this worker)
- ** ---------- 
    - *** --- * --- [Queues]
-- ******* ---- . celery:      exchange:celery(direct) binding:celery
--- ***** ----- 

[Tasks]
  . celery.backend_cleanup
      . celery.chain
  . celery.chord
  . celery.chord_unlock
  . celery.chunks
  . celery.group
  . celery.map
  . celery.starmap
  . utils.weixin.tasks.celery_add

[2013-03-19 19:50:00,460: WARNING/MainProcess] celery@sd5 ready.
[2013-03-19 19:50:00,483: INFO/MainProcess] consumer: Connected to amqp://utils@sd5:5672/8086.
[2013-03-19 19:50:00,498: DEBUG/MainProcess] consumer: Ready to accept tasks! 
```

在 rabbit@sd5.log 中：

```
=INFO REPORT==== 19-Mar-2013::19:50:00 ===
accepting AMQP connection <0.1655.0> (127.0.0.1:50087 -> 127.0.0.1:5672) 
```

## 问题

然后我运行我的`utils.weixin.tasks.celery_add`任务`manage.py shell`：

```
>>> from utils.weixin.tasks import celery_add
>>> result = celery_add.delay(1,3)
>>> result.ready()
False
>>> result.get() 
```

**永远挂在这里...**

而且，芹菜工人的日志和rabbitmq的日志中没有任何内容，没有任何“收到的任务”等。

似乎调用任务并没有与工人沟通。

* * *

## 问题

我应该怎么做才能找出做错了什么。我应该如何解决这个问题？

赞赏！

# apache-flex - 每次都在加载应用程序

> ID：15499610
> 
> 赞同：1
> 
> 时间：2013-03-19T12:31:37.980
> 
> 标签：apache-flex, actionscript, flash

我有 flex 的 web 应用程序。它的 swf 文件附加在 tabview 上。表示页面上有 5 个选项卡。在选项卡五上附加了一个 swf 文件。

当我单击五个选项卡时，它会加载 flex 应用程序的主 mxml 文件的 init 方法。有什么方法可以让我们在每次点击五个选项卡时停止加载它。

![在此处输入图像描述](../Images/e7451a9f526a7758bdd9cd4ce5255e99.png)

此应用程序在加载应用程序时从服务器获取数据。但是我不想每次点击标签时一次又一次地发送请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:11:22.663

使用 <a href=""> 显示您的标签可能会使它们在每次点击时重新加载。而是尝试使用脚本解决方案来设置`display`每个选项卡的值。遍历它们并隐藏除单击的那个之外的每个。

这样你只加载一次。

编辑：看起来你正在使用 JQuery。一些可能的答案：

*   [这里](https://stackoverflow.com/questions/2952020/javascript-hide-show-tabs-using-jquery)
*   [这里](https://stackoverflow.com/questions/8324887/javascript-show-hide-tab)
*   [这里（不是jquery）](http://www.daniweb.com/web-development/javascript-dhtml-ajax/threads/172884/javascript-showhide-tabs)

# perl - 如何打印出包装代码？

> ID：15499611
> 
> 赞同：0
> 
> 时间：2013-03-19T12:31:38.350
> 
> 标签：perl

我对 perl 脚本有一些困难，它有一个由自定义函数编码的模块（.pm），并且在模块加载到 .cgi 脚本之前总是被解码。

我什至可以让它保持原样，但目前我必须对这个模块包含的子例程进行一些更改，因为它是编码的，所以我很无助；/到目前为止，我已经尝试了几种方法，即：

```
#!/usr/bin/perl

use strict;
use lib '.';
use ModuleX;   ### This is encoded module which I need
use CGI::Carp qw(fatalsToBrowser); 
```

不幸的是 $body 只返回“;” 结果;/我希望可以获得这些方法代码，但我不知道我还能做什么。

感谢帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T13:07:02.453

您是否要解析包`new`中的方法`ModuleX`？那我相信你想说

```
my $body = $deparse->coderef2text(\&Modulex::new); 
```

# ruby - Ruby 取消对象创建

> ID：15499613
> 
> 赞同：2
> 
> 时间：2013-03-19T12:31:44.477
> 
> 标签：ruby, object, constructor

如果参数错误，如何取消对象创建？例子：

```
class MyClass
    def initialize(a, b, c)
        @a = @b = @c = nil
        @a = a if a.is_a? Integer
        @b = b if b.is_a? String
        @c = c if c.is_a? Integer or c.is_a? Float
        return nil if @a == nil or @b == nil or @c == nil # doesn't works
    end
end
cl = MyClass.new('str', 'some', 1.0) # need cl to be nil because 1st param isn't Integer 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T12:35:40.717

这很简单，只是不要使用构造函数。:)

```
class MyClass
  def initialize(a, b, c)
    @a, @b, @c = a, b, c
  end

  def self.fabricate(a, b, c)
    aa = a if a.is_a? Integer
    bb = b if b.is_a? String
    cc = c if c.is_a? Integer || c.is_a? Float
    return nil unless aa && bb && cc
    new(aa, bb, cc)
  end
end

cl = MyClass.fabricate('str', 'some', 1.0) # => nil 
```

顺便说一下，这种模式称为工厂方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T13:01:51.893

除非您需要某种静默故障模式来处理不良数据，否则您可能只想引发错误并停止程序：

```
def initialize(a, b, c)
    @a = @b = @c = nil

    raise "First param to new is not an Integer" unless a.is_a? Integer
    @a = a

    raise "Second param to new is not a String" unless b.is_a? String
    @b = b

    raise "Third param to new is not an Integer or Float" unless c.is_a? Integer or c.is_a? Float
    @c = c
end 
```

您是使用这种方法，还是使用传递错误输入的工厂方法取决于您希望使用的数据类型。

就个人而言，我几乎总是会提出错误，除非我有一个特定的要求来默默地忽略不良数据。但这是编码理念，不一定是您问题的最佳答案。

# c# - 如何在.net的googlemap中的同一点上显示多个图标？

> ID：15499616
> 
> 赞同：0
> 
> 时间：2013-03-19T12:31:50.957
> 
> 标签：c#, google-maps-api-3

如何使用goolemap api 3在.net中的googlemap中的相同点上显示多个图标

下面是我的代码

```
public void selectTrainings(string strQuery)
    {
        try
        {
            clsTblMembers objtblMember = new clsTblMembers();
            objtblMember.StrEmail = strQuery.ToString();
            DataTable dt = objtblMember.SelectSearch();
            if (dt != null)
            {
                int i;
                for (i = 0; i < dt.Rows.Count; i++)
                {
                    if (dt.Rows[i]["Latitude"].ToString() != "" && dt.Rows[i]["Longitude"].ToString() != "")
                    {

                        string StrLat = dt.Rows[i]["Latitude"].ToString();
                        string StrLon = dt.Rows[i]["Longitude"].ToString();
                        double Numlat;
                        bool isNumlat = double.TryParse(StrLat, out Numlat);
                        double Numlon;
                        bool isNumlon = double.TryParse(StrLon, out Numlon);
                        if ((isNumlat) && (isNumlon))
                        {
                            //coordinates datatype =double;
                            m1 = new MapControl.MapMarker();
                            m1.Latitude = Convert.ToDouble(dt.Rows[i]["Latitude"].ToString());
                            m1.Longitude = Convert.ToDouble(dt.Rows[i]["Longitude"].ToString());
                            getTraining(Convert.ToInt32(dt.Rows[i]["intId"].ToString()), Convert.ToInt32(dt.Rows[i]["intTypeId"].ToString()), dt.Rows[i]["strCode"].ToString(), dt.Rows[i]["strConductedBy"].ToString(), dt.Rows[i]["dtFromDate"].ToString(), dt.Rows[i]["dtToDate"].ToString(), dt.Rows[i]["strName"].ToString(), dt.Rows[i]["strUC"].ToString(), dt.Rows[i]["strVillage"].ToString());
                            if (dt.Rows[i]["intTypeId"].ToString() == "1")
                            {
                                m1.Title ="CMST - "+ dt.Rows[i]["strCode"].ToString();
                                m1.Image = "mapIcons/t1.png";
                            }
                            else if (dt.Rows[i]["intTypeId"].ToString() == "2")
                            {
                                m1.Title = "LMST - " + dt.Rows[i]["strCode"].ToString();
                                m1.Image = "mapIcons/t2.png";
                            }
                            else if (dt.Rows[i]["intTypeId"].ToString() == "3")
                            {
                                m1.Title = " Govt.Official Training - " + dt.Rows[i]["strCode"].ToString();
                                m1.Image = "mapIcons/t3.png";
                            }
                            else if (dt.Rows[i]["intTypeId"].ToString() == "4")
                            {
                                m1.Title = "Gender Based Violence - " + dt.Rows[i]["strCode"].ToString(); 
                                m1.Image = "mapIcons/pg.png";
                            }
                            else if (dt.Rows[i]["intTypeId"].ToString() == "5")
                            {
                                m1.Title = "Human Rights - " + dt.Rows[i]["strCode"].ToString();         
                                m1.Image = "mapIcons/ph.png";
                            }
                            else
                            {
                                m1.Title = "Livelihoods Skills Training - " + dt.Rows[i]["strCode"].ToString();                                    
                                m1.Image = "mapIcons/t4.png";
                            }

                            m1.ImageSize1 = 32.0;
                            m1.ImageSize2 = 37.0;
                            m1.ImagePoint1 = 0;
                            m1.ImagePoint2 = 0;
                            m1.ImagePoint3 = 16.0;
                            m1.ImagePoint4 = 18.0;

                            m1.Shadow = "mapIcons/shadow.png";
                            m1.ShadowSize1 = 51.0;
                            m1.ShadowSize2 = 37.0;
                            m1.ShadowPoint1 = 0;
                            m1.ShadowPoint2 = 0;
                            m1.ShadowPoint3 = 16.0;
                            m1.ShadowPoint4 = 18.0;

                            GoogleMap.Markers.Add(m1);

                        }
                    }

                }
            }

        }
        catch (Exception ex)
        {

        }
    } 
```

# asp.net-mvc - MVC：如何使 DropdownList 字段（使用选择的插件）需要

> ID：15499618
> 
> 赞同：6
> 
> 时间：2013-03-19T12:31:52.323
> 
> 标签：asp.net-mvc, drop-down-menu, validation, jquery-chosen

我在我的模型中声明了一个参数为

```
[Required]
public int? param{get; set;} 
```

并在下拉列表中定义它。一切正常，数据验证工作正常，直到我添加插件[Chosen](http://davidwalsh.name/jquery-chosen)。当我添加插件时，提交之前没有验证。当插件应用于 Select 元素时，如何保持数据验证？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T16:52:07.880

按照[这里](https://github.com/harvesthq/chosen/issues/473#issuecomment-4054176)的建议，我转到选择的 js 文件并将 this.form_field_jq.hide() 更改为 'this.form_field_jq.css("position","absolute").css("left","-9999px")'

# php - Zend 框架基于类别/子类别/产品 slug 的 SEO 友好 URL 路由

> ID：15499621
> 
> 赞同：0
> 
> 时间：2013-03-19T12:31:57.580
> 
> 标签：php, mysql, zend-framework, zend-framework-routing

我正在开发一个`Zend Application`，我需要在其中实现`slug based URL`它`Wordpress`的页面/帖子。我已经这样做了`static pages`，它可以根据需要正常工作。这是不同的场景。我正在尝试路由到相应的模块/控制器。

**有两件事**

1.  在我的应用程序中，`Category/Subcategory`有。例如：

    `cat1, cat2`

    `subcat11, subcat12, subcat21, subcat22, subcat23`

2.  `Products`分配给至少一个`subcategory`. 例如：

    `product1, prdocut2, product3`

**注意：示例中使用的类别、子类别、产品名称是 slug。**

网址应为：

对于类别：`http://domain.com/cat1`

对于子类别：`http://domain.com/cat1/subcat11`

对于产品：`http://domain.com/product1`

我为每个控制器设计了三个控制器。列表显示在他们的`Index`行动上。

`CategoryController, SubcategoryController, ProductController`

如果我在应用程序引导中应用路由，网站索引页面将重定向到类别页面。

```
$categoryrouter   = new Zend_Controller_Router_Route('/:categoryslug/',
                    array(
                        'module' => 'default',
                        'controller' => 'category',
                        'action' => 'index',
                        'categoryslug'  =>  'mobiles'
                    )
);

$chain->chain($categoryrouter);

$router->addRoute('categoryrouter', $categoryrouter); 
```

可能是重复的问题，但我用谷歌搜索了很多，没有找到适合这个问题的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:28:31.813

See this blog post for some info on how to do this: [http://tfountain.co.uk/blog/2010/9/9/vanity-urls-zend-framework](http://tfountain.co.uk/blog/2010/9/9/vanity-urls-zend-framework). You'll need two separate route classes - one for categories and one for posts.

You also seem to be using route chaining for just one route, which is unnecessary. Also be careful with terminology, your application has one 'router', which has many 'routes'.

# c# - 缩放平面以适合平截 头体或网格单元

> ID：15499624
> 
> 赞同：2
> 
> 时间：2013-03-19T12:32:08.187
> 
> 标签：c#, graphics, 3d, unity3d

我正在尝试创建一个函数，该函数在 3d 空间中获取一个平面，并返回一个平面，该平面将完全适合屏幕上网格的一个部分。

屏幕上的网格是固定的，由 X 和 Y 中的分区或屏幕上的一组线定义。

原始平面可以是屏幕上的任何大小或方向，但它永远不会占据整个屏幕。

我正在使用 C# 在 Unity3.5.2f2 中工作。我已经在 SO 上发布了这个，因为它非常基于数学，而不仅仅是 Unity 一般知识。理想情况下，解决方案不会使用外部库，尽管这是可能的。

我有几种方法，希望有任何意见；

1.  将平面投影到屏幕空间，获取网格的最小/最大 x 和 y 值（边界框），使用它来计算比例 xform（使用网格的高度/长度与屏幕划分的差异）。将网格的两条边捕捉到选定的分区后，重新投影到世界空间。

2.  由于分割本质上是矩形的，因此创建多个视锥体，并提出一些在 3D 空间中缩放/平移平面以适应视锥体的方法。

函数原型是；

```
Plane adjustPlaneToFitScreens(Plane _plane) 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:55:03.720

我使用上面的方法 01\. 解决了这个问题。Unity 提供了几个方便的函数，使数学变得容易，并且在像素/屏幕空间中计算缩放和平移比在 3d 空间中容易得多，同时必须考虑视角/ FOV。

缩放后重新投影到世界中存在问题，但是这个特定的应用程序在查看缩放后的对象时没有移动相机，所以这些问题在黑匣子中实际上并不明显

# windows - 如何在 Delphi 中枚举另一个进程的窗口？

> ID：15499626
> 
> 赞同：3
> 
> 时间：2013-03-19T12:32:14.603
> 
> 标签：windows, delphi, winapi

我有一个使用该函数`foo.exe`创建进程的进程。我希望 (in ) 枚举在其中创建的窗口的控件，为此我（假设我）需要窗口 HWND。`bar.exe``CreateProcess``foo.exe``bar.exe`

我知道 中的所有窗口类`bar.exe`，并且`bar.exe`一次只为每个类创建一个窗口，因此我可以使用类名来查找我想要的窗口。

但是我应该使用什么函数来枚举另一个进程中的窗口？我正在寻找带有进程句柄或 PID（均由`CreateProcess`函数返回）和`EnumProc`回调过程的东西。我应该找到`bar.exe`的线程 ID（它是一个单线程应用程序）并将其与`EnumThreadWindows`函数一起使用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T12:50:28.827

1.  调用`EnumWindows`枚举顶层窗口。
2.  将每个顶级窗口句柄传递给以`GetWindowThreadProcessId`找出它与哪个进程 ID 相关联。
3.  当您找到与您的进程 ID 匹配的顶级窗口时，检查该窗口是否是应用程序的主窗口，大概是通过检查其类名。
4.  最后，调用`EnumChildWindows`该主窗口以枚举该主窗口的所有子窗口。

# java - 如何使用 ajax 调用 Java Action

> ID：15499629
> 
> 赞同：0
> 
> 时间：2013-03-19T12:32:30.293
> 
> 标签：java, ajax, jsp, struct

我是 AJAX 的新手。我在 JSP 中有两个下拉列表，基于从第一个下拉列表中选择一个值，我需要从后端填充第二个下拉列表中的值。我试图在**struct1.2**中从 AJAX 执行上述功能。

我在 onChangePrdGrp [ **JavaScript Function** ] 中使用了以下代码：

```
var prdGrp = document.getElementById('strProductGroup').value;
if("" != prdGrp){
    var xmlhttp;

    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    document.getElementById('prdPitch').style.display = "block";
    document.forms[0].module.value= "getProductPicthed";
    xmlhttp.open("POST","/lmsGetPrdPitched.do?prdGrp="+prdGrp,true);
    xmlhttp.send();
}else{
    document.getElementById('prdPitch').style.display = "none";
    document.getElementById('strProductPitched').value = "";
    document.getElementById('strProduct').value = "";
} 
```

下拉1：

```
<tr>
<td style="text-align: left" width="20%">Product Group</td>
<td style="text-align: left" width="20%"><html:select
property="strProductGroup" style="width:180px;"
onchange="onChangePrdGrp()">
<html:option value="">select</html:option>
<html:optionsCollection name="ProdGrpList" />
</html:select></td>
</tr> 
```

DropDown 2：[需要在此 DropDown 中填充值]

```
<tr id="prdPitch">
     <td style="text-align: left" width="20%">Product Pitched</td>
     <td style="text-align: left" width="20%"><html:select
      property="strProductPitched" style="width:180px;">
      <html:option value="">select</html:option>
      <%if(null != ProductPitchList) { %>
      <html:optionsCollection name="ProductPitchList" />
      <%} %>
      </html:select></td>
</tr> 
```

请就此向我提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:36:08.813

如果你使用 jQuery 就很简单了

[例如见这里](http://www.raistudies.com/struts-1/ajax-with-struts-example/)

这里他们给出了很好的例子。记得插入jQuery相关的js文件

包括以下文件

```
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script> 
```

# java - android webview中textview的增减

> ID：15499631
> 
> 赞同：1
> 
> 时间：2013-03-19T12:32:45.340
> 
> 标签：java, android, android-webview, text-size

我必须开发一个 Android 应用程序。在这里，我必须增加和减少`TextView`文本大小。

我必须点击两个`ImageView`（正面和负面）。

**首先**，我必须单击**正**图像，这意味着我必须将文本大小增加 3 倍，然后必须禁用正图像。**其次**，我必须单击**负**像，这意味着我必须将文本大小减小 5 倍，然后才能禁用负像。

**第三**，现在我必须直接单击负图像而不单击正图像，这意味着我必须将文本大小减小 2 倍并且禁用负图像。我该如何开发这些？

我目前的情况是这样的：

**首先**，我必须单击**正面**图像意味着将值增加 3 倍。图像未禁用。请告诉我如何禁用正图像。**其次**，我必须单击**负**图像，这意味着将文本大小减小 5 倍。

**第三**，我必须直接单击负图像而不单击正图像，这意味着文本大小没有减小？我该如何解决这些问题？

```
int text_size=16;int text_max;
   int text_min=12;
String fullcontent = in.getStringExtra("FullContent");
content.loadDataWithBaseURL(null,fullcontent, "text/html", "UTF-8",null);
positive = (ImageView) findViewById(R.id.imageView3);
positive.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
       if (text_size < 22) {
           content.getSettings().setDefaultFontSize(text_size += 1);
         text_max=  text_size++;
            j = text_max;      
     if (j == text_max)
    {
        positive = (ImageView) findViewById(R.id.imageView3);
        positive.setEnabled(false);
    }   
         }
   }  
});   

negative = (ImageView) findViewById(R.id.imageView4);
negative.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
      if (j > 12)
  {
      //Description.FontSize -= 2;
   content.getSettings().setDefaultFontSize(j -= 1);
   int k=   j--;
   text_min = k;
      if (text_size == j)
      {
          negative = (ImageView) findViewById(R.id.imageView4);
          negative.setEnabled(false);
      }  
    }
      }  
}); 
```

**编辑：**

最初我已经声明了 text_default,text_max,text_min 大小，如：

```
int text_size=16;
int text_max=22;
int text_min=10; 
```

我必须在单击正图像时编写增加最大字体大小的条件：

```
 positive = (ImageView) findViewById(R.id.imageView3);
 positive.setOnClickListener(new OnClickListener() {
 public void onClick(View v) {
 if (text_size < 22)
 {
    content.getSettings().setDefaultFontSize(text_size += 1);
    text_max=  text_size++;
    j = text_max;
    }} }); 
```

我已经写了在单击负图像时减小 textSize 的条件：

```
negative = (ImageView) findViewById(R.id.imageView4);
negative.setOnClickListener(new OnClickListener() {
public void onClick(View v) {
 if (j > 10)
  {
   content.getSettings().setDefaultFontSize(j -= 1);
   int k=   j--;
   text_min = k;
    }} }); 
```

现在我必须运行应用程序并直接单击正图像意味着文本大小将增加 3 倍。之后我必须单击负图像意味着文本大小将减小 5 倍。效果很好...

但我必须运行应用程序并直接单击负图像意味着文本大小将像 bbc 新闻阅读器应用程序（A+、A- 功能）一样减小 3 倍。

我能怎么做 ？？？请给我一些发展思路？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T04:27:21.463

尝试这样的事情：

在开始时获取 textView 的 textSize 的句柄。

```
float textSize = textView.getTextSize();
if (//Check if first time) {

    textView.setTextSize(textView.getTextSize() * 3f); 
```

或者

```
 textView.setTextSize(textView.getTextSize() / 3f);
}
else {
    textView.setTextSize(textView.getTextSize() * 5f); 
```

或者

```
 textView.setTextSize(textView.getTextSize() / 5f);
} 
```

# php - 显示博客文章的 php 文件中的 url-rewriting

> ID：15499639
> 
> 赞同：2
> 
> 时间：2013-03-19T12:32:55.760
> 
> 标签：php, .htaccess, url-rewriting

我有一个 php 文件，它获取存储在数据库中的文章的 id（来自 GET 变量）并使用它来显示它的全部内容，我的意思是，标题、作者、内容等。
当它发生时，网址显示：

```
localhost/inicio.php?id=1 
```

其中 id=1 是数据库中的文章 ID。但我希望它显示：

```
 localhost/this-is-the-article 
```

我知道我应该编辑 .htaccess 以这种方式重写 url：

```
RewriteEngine on  
RewriteRule ([a-zA-Z0-9_-]+) inicio.php?id=$1 
```

在这一点上，我不明白的是我应该在显示文章的 php 文件顶部做什么，当通过 id`$_GET['id']`来重写 url 时，请记住，如果 id 不同，重写的 url 会改变也，说，这样

```
localhost/this-is-another-article 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:44:43.783

创建`url`字段并直接存储 URL，如

```
this-is-article
this-is-another-article
.... so on 
```

然后通过`url`而不是`id`.

```
localhost/inicio.php?url=this-is-article
localhost/inicio.php?url=this-is-another-article 
```

然后重写它...

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule ^(.*)$ /inicio.php?url=$1 
```

现在通过

```
localhost/this-is-article
localhost/this-is-another-article 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:47:17.417

您需要的基本上是将 URL 存储在您的数据库中并基于该 URL 而不是 id 进行返回获取。

这是因为无法在 .htaccess 文件中映射 id 和 url，您将在其中编写重写代码所以您的 .htaccess 将类似于：

```
RewriteEngine on
RewriteRule ^(.*)$ /inicio.php?article_url=$1 
```

在您的 php 代码中，您只需使用这个新创建的 $_GET["article_url"] 变量从数据库中获取信息。

# c++ - 使用 memcpy 将 std::vector 从 protobuf 复制到重复字段

> ID：15499641
> 
> 赞同：22
> 
> 时间：2013-03-19T12:32:59.610
> 
> 标签：c++, protocol-buffers, memcpy

起初我有这个简单的 protobuf 文件

```
message messagetest
{
    ...
    repeated float samples = 6;
    ....
} 
```

使用这种方法创建一个头文件

```
 //repeated float samples = 6;
      inline int samples_size() const;
      inline void clear_samples();
      static const int kSamplesFieldNumber = 6;
      inline float samples(int index) const;
      inline void set_samples(int index, float value);
      inline void add_samples(float value);
      inline const ::google::protobuf::RepeatedField< float >&  samples() const;
      inline ::google::protobuf::RepeatedField< float >* mutable_samples(); 
```

我基本上在做的是在 for 循环中一一复制所有数据。

```
int main(int argc, char** argv)
{    
    messagetest fMessage;

    vector<float> fData (1000, 0);

    // Create 1000 random values
    for (int i = 0; i < fData.size(); i++)
    {
        fData[i] = rand() % 1001;
    }

    for (int j = 0; j < fData.size(); j++)
    {
        fMessage.add_samples(fData[j]);    
    }

    return 0;
} 
```

但我想使用 memcpy 之类的方法来加速复制过程。这只是我想到的一个想法。如果完全错误，请纠正我。头文件中的最后一个声明是：

```
inline ::google::protobuf::RepeatedField< float >* mutable_samples(); 
```

我不知道这种方法有什么作用（缺乏技巧）。但它看起来像一个向量。也许这就是我的问题的解决方案。如果是这样，我不知道如何实现它。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2018-04-13T17:45:54.367

因为这还不在这里，我喜欢单行：

```
*fMessage.mutable_samples() = {fData.begin(), fData.end()}; 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2017-03-03T06:15:33.930

我找到了将向量复制到重复字段中的最短方法，如下所示：

```
google::protobuf::RepeatedField<float> data(fData.begin(), fData.end());
fMessage.mutable_samples()->Swap(&data); 
```

它可能也比你的更快，因为它避免了初始迭代并将值设置为 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-14T20:51:45.350

@mgild 的答案将隐式调用`RepeatedField(Iter begin, Iter end)`构造函数来创建一个要移动分配的临时对象。与@nazgul 的答案相同，它*显式地*创建了一个临时的 RepeatedField 并交换它。

更简单的是，避免创建新对象将是：

```
fMessage.mutable_samples()->Add(fData.begin(), fData.end()) 
```

如果`samples`字段不是空的，您可以`Clear`先调用方法。

在内部，它使用`std::copy`（只要`fData`是[前向迭代器](https://www.cplusplus.com/reference/iterator/ForwardIterator/)），因此将与您提出的任何 memcpy 实现一样快。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2019-09-12T09:08:32.730

```
fMessage.mutable_samples() 
```

返回样本指针数组：[*sample1, *sample2, sample3, ...]。

```
&fData[0] 
```

是 fData 的第一个元素的地址。

```
memcpy(fMessage.mutable_samples()->mutable_data(),
     &fData[0],
     sizeof(float)*fData.size()); 
```

所以我不认为上面的代码可以成功地将数据从fData填充到fMessage。这是完全错误的！

# html - 将来自php表单的打印结果居中

> ID：15499644
> 
> 赞同：0
> 
> 时间：2013-03-19T12:33:06.600
> 
> 标签：html

我有这段代码，我试图让它在页面上居中，但它不起作用。我不确定在哪里放置标签或调用 css 以使打印结果居中。当我将 css id="center" 添加到时，它也会使表单居中，但我只想将打印的输出居中。请帮忙。

```
 <p class="name">
   <input type="text" name="name" id="name" value="
      <?php if (isset($_POST['fname'])){
           print htmlspecialchars($_POST['fname']); } ?>"/>
  <label for="name">Name&nbsp;<img src="nfonin/req.png" /></label>
</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:40:30.150

这取决于您希望使用哪种标签。

如果您打算使用

标记，那么您可能希望在标记内或链接的类文件中将 div 居中。

```
<p style="text-align: center">Content here"</p> 
```

如果您希望它在页面上的容器中对齐，您可以使用 A`<div>`标签，该标签将创建一个容器，该容器将根据内容调整大小，并且可以将自身和其中的文本居中。如果你想拥有这个，你可以使用

```
<div style="margin-left: auto; margin-right: auto; text-align:center;">Content here"</div> 
```

设置为 auto 的 margin-left 和 margin-right 确保内容居中，并且容器变成内容的大小，使两边的边距足够大以使其居中。

您还可以使用以下方法将其放入链接的 css 文件中：

```
<link href="mystyle.css" rel="stylesheet" type="text/css" /> 
```

在页面的标题中，并且：

```
#yourid {
    margin-left: auto; 
    margin-right: auto;
    text-align: center;
} 
```

在 css 文件中，您给 id 的任何`<p>`或标记都将具有这些属性。不幸的是，据我所知，标签不受边距调整的影响。我希望这有帮助。`<div>``yourid``<p>`

# android - jquery ajax GET请求执行两次

> ID：15499647
> 
> 赞同：17
> 
> 时间：2013-03-19T12:33:08.333
> 
> 标签：android, jquery, cordova, jquery-mobile, samsung-mobile

我有以下通过单击按钮执行的 ajax 请求：

```
<a href="javascript:test()"><img src="css/images/test.png"></a>

function test(){
    console.debug("*");

    $.ajax({
        type: "GET",
        dataType: "json",
        url: '/path/to/url',
        success: function(data){
            console.debug("**");
        }, 
        error: function(jqXHR, status, error){
            console.debug("*** " + status + " : " + error + " : " + jqXHR.status);
        },
        cache: false
    });
} 
```

请求响应大约需要 30 秒才能返回。但是，从 apache 日志可以看出，服务器两次接收并执行请求。请求的时间戳相隔 30 秒，但请求是相同的（例如 ?_=1363692320782）。点击响应函数被调用一次，错误回调被调用一次（在初始请求后正好 60 秒），尽管 apache 响应是 200。

此问题已在 Samsung Galaxy S2，android 版本 2.3.5 中的 phonegap 应用程序中重现。

**更新 - 从下面的评论中添加 Apache 日志条目**

```
1.2.3.4 - - [19/Mar/2013:14:07:59 +0000] "GET /pcapi/records/dropbox/08342hjg9gpqm7g/?_=1363702072225 HTTP/1.1" 200 11139 "-" "Mozilla/5.0 (Linux; U; Android 2.3.5; en-gb; GT-I9100 Build/GINGERBREAD) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1"
1.2.3.4 - - [19/Mar/2013:14:08:29 +0000] "GET /pcapi/records/dropbox/08342hjg9gpqm7g/?_=1363702072225 HTTP/1.1" 200 11139 "-" "Mozilla/5.0 (Linux; U; Android 2.3.5; en-gb; GT-I9100 Build/GINGERBREAD) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1" 
```

**更新-亚行日志猫**

```
I/Web Console(16747): * at file:///android_asset/www/js/mobile.js:1769
I/Web Console(16747): *** error : : 0 at file:///android_asset/www/js/mobile.js:1779 
```

**更新 - TCP/IP 监视器**

将请求通过 TCP/IP 监视器显示发送的两个请求都带有 200 响应。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T12:44:53.247

如果您在此处定义的 URL 路径`url: '/path/to/url'`指向文件夹而不是特定文件，请尝试添加这样的尾部斜杠`url: '/path/to/url/'`。

当未指定文件时，Apache Web 服务器会使用新 URL（带有尾部斜杠）向 AJAX 客户端发送 301 重定向，因此客户端会向正确的 URL 发出新请求。

请参阅此处发布的类似问题：[jQuery $.ajax() 执行了两次？](https://stackoverflow.com/questions/5544422/jquery-ajax-executed-twice)

请参阅此处的 Apache 文档参考：[http ://httpd.apache.org/docs/2.0/mod/mod_dir.html#directoryslash](http://httpd.apache.org/docs/2.0/mod/mod_dir.html#directoryslash)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-25T20:22:26.803

我在 Android 2.3.5 上运行的应用程序遇到了这个确切的问题。我只能得出结论，webview 在超时后重试了请求。我找不到影响超时持续时间的方法。

最后，我重写了代码，使得初始请求在服务器上分离出一个异步进程并立即返回。然后，从页面上的 setTimer 中，我将检查服务器进程的状态（同样，立即返回）。当状态为“完成”时，页面将移动到下一步。

我希望这会有所帮助。我当然理解你对此的不满。我花了几天时间自己与它作斗争。

编辑：这可能是向我发送异步解决方案方向的文章。我相信这里所说的问题是一样的：

[Android中的XmlHttpRequest双重发布问题](https://stackoverflow.com/questions/9526509/xmlhttprequest-double-posting-issue-in-android)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T17:45:32.747

`beforeSend:`使用and `complete:`AND `.ajaxSend()`+怎么样`ajaxSuccess()`，也试试`cache: true`

```
$(document).ajaxSend(function (event, jqxhr, settings) {
    console.log("triggered ajaxSend !");

    if ( submission_active == true ) {
        jqxhr.abort();
    }

    submission_active = true;
});

$(document).ajaxSuccess(function (event, xhr, settings) {
    console.log("triggered ajaxSuccess !");
    submission_active = false;
});

$.ajax({
    type: "GET",
    dataType: "json",
    timeout: 30000,
    cache: false,
    url: '/path/to/url',
    success: function(data){
        console.debug("**");
    }, 
    beforeSend: function(xhr, opts){
        if(submission_active == true){
            xhr.abort();
        }

        submission_active = true;
    },
    complete: function(){
        submission_active = false;
    }
    error: function(jqXHR, status, error){
        console.debug("*** " + status + " : " + error);
    }
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-21T13:04:22.993

我已经在我的移动网站上尝试过这个，唯一的问题是在我的表单中，然后在我的 javascript 上我声明

```
$("#button_submit").onclick(function(){
   //ajax request here
}); 
```

如果您使用的是ajax，也不要忘记删除动作和方法等表单属性

希望对你有帮助^_^

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-25T21:55:08.030

点击事件被触发两次。下面的代码解决了这个问题。

```
$('.selector').unbind('click').bind('click', function () {
 //...
 // Ajax code
 //...
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-26T22:31:41.550

```
 <a href="javascript:test()"> 
```

那是你的问题。如果您要使用 jquery，请使用他们的 css 选择器！！！！！！！！！那 href:javascript 的东西在浏览器/设备上是错误的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-27T23:08:55.163

听起来更像是事件传播的问题。我看到了类似的症状（尽管在 ios 上），它归结为 'touchstart' 和 'touchend' 事件都触发了 'click' 事件。你有没有尝试过这样的事情：

```
$("a").click(function (e) {
    e.preventDefault();
    alert('Clicked');
    test();
}); 
```

希望这可以帮助！
干杯
JD

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-26T04:59:25.430

您面临的问题通常称为“弹跳”，它也涉及电子设备中的开关，当您按下并释放按钮时，开关会触发两次，因此您需要为该功能设置延迟或取消绑定完成与您的点击。

您可以使用 Ben Alman 的油门脚本来消除您的点击，这对于防止发生多个 ajax 调用非常有用，将其与延迟结合起来，您的问题应该得到解决

[http://benalman.com/code/projects/jquery-throttle-debounce/examples/debounce/](http://benalman.com/code/projects/jquery-throttle-debounce/examples/debounce/)

```
 var debounceClick = $.debounce(test, 1000);
            function test() {
                console.debug("*");
                $.ajax({
                    type: "GET",
                    dataType: "json",
                    url: '/path/to/url',
                    success: function(data){
                        console.debug("**");
                    }, 
                    error: function(jqXHR, status, error){
                        console.debug("*** " + status + " : " + error + " : " + jqXHR.status);
                    },
                    cache: false
                });
            } 
```

现在从链接中调用 debounceClick 函数来解决您的问题。

或者，您也可以使用没有油门插件的简单纯 javascript 来实现您的结果：

```
 var timeout;
            function test(){
                console.debug("*");
                $.ajax({
                    type: "GET",
                    dataType: "json",
                    url: '/path/to/url',
                    success: function(data){
                        console.debug("**");
                    }, 
                    error: function(jqXHR, status, error){
                        console.debug("*** " + status + " : " + error + " : " + jqXHR.status);
                    },
                    cache: false
                });
            }

            function click() {
                if(timeout) {
                         clearTimeout(timeout);
                }
                timeout = setTimeout(test, 1000);
            } 
```

在此示例中，将 click() 函数绑定到您的链接。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-11-28T11:15:48.733

我遇到了同样的问题，我在提交按钮上绑定了点击事件，ajax 运行了两次。我没有绑定事件，而是使用`onClick`按钮上的方法，如下所示

```
<button onclick"myProcess()"></button> 
```

它解决了我的问题。

# list - C#：访问通用列表内多维数组内的对象方法

> ID：15499650
> 
> 赞同：0
> 
> 时间：2013-03-19T12:33:19.720
> 
> 标签：list, variables, multidimensional-array

我想手动更改存储在多维数组中的对象内的公共变量的值。该数组存储在一个`List<T>`

像这样的东西：

```
areaList[0].array[90, 50].type = 1; 
```

上面的代码不起作用。

下面的代码有效，但不能达到目的，因为我只想更改存储在数组中的单个对象的一个​​变量。

```
foreach (Area[,] area in areaList]
{
area[90, 50].type = 1;
} 
```

**[编辑] 我发现我可以像这样初始化对象的引用：**

```
Area[,] green = areaList[0];
green[90, 50].type = 1; 
```

从而能够更改列表内对象的变量值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:39:23.317

使用 arrayList.get(position) 。

```
areaList.get(0).array[90,50].type=1; 
```

# asp.net - .Focus() 不关注部署站点的标签控制，只能关注开发站点

> ID：15499653
> 
> 赞同：1
> 
> 时间：2013-03-19T12:33:33.247
> 
> 标签：asp.net

.Focus() 不关注部署站点的标签控制，只能关注开发站点

此页面在 aspx 的 iframe 中

我已经把这个焦点放在了 onclick 事件的开头和结尾，但是遇到了这个问题。

我应该怎么办？

目标是在出现验证错误时返回页面顶部

在 page_load 的这个焦点之后也失败了

然后我在page_load中尝试defaultfocus，也失败了

```
protected void Page_Load(object sender, EventArgs e)
    {
Page.Form.DefaultFocus = candRegFormMessage.ClientID; 
```

chrome、firefox 和 internet explorer 可以在开发站点按提交后聚焦它。上传到生产站点后，遇到了这个问题

```
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">

    <asp:Panel ID="candRegFormPanel" runat="server" Visible="false">
        <asp:Label ID="candRegFormMessage" runat="server" ForeColor="Red"></asp:Label>
    </asp:Panel>

public void candRegSubmission(object sender, EventArgs e)
    {
        string errorMessage = "";
        string candEntityID = "";
        candRegFormMessage.Focus();

        if (IsValid)
        {

    ....very long
}
 candRegFormMessage.Focus();
} 
```

最后我尝试 masterfile 中的 MaintainScrollPositionOnPostback="false" 也失败了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:32:27.400

```
 $('#candRegSubmit').click(
       function () {
           getParent().window.scrollTo(0, 0);
       }); 
```

# jsf - 一旦添加了禁用选项，Prime Faces p:commandButton 就会停止发送 actionListeners

> ID：15499662
> 
> 赞同：0
> 
> 时间：2013-03-19T12:34:02.620
> 
> 标签：jsf, jsf-2, primefaces

添加选项后，我将`p:commandButton`停止发送。为什么会这样？`actionListeners``disabled`

我有一个`p:selectOneListbox`需要在`OK`启用按钮之前选择一些东西：

```
<p:selectOneListbox value="#{FileSelectBean.fileNameSelected}">  
  <f:selectItems value="#{FileSelectBean.fileNames}" />
  <p:ajax update=":formFileSelect:okId" />
</p:selectOneListbox> 
```

我有一个`OK`按钮：

```
<p:commandButton id="okId" value="OK" 
    type="submit" update=":formEncryptionDialog" 
    actionListener="#{FileSelectBean.actionOk}" 
    oncomplete="dlgFileSelect.hide();"
    disabled="#{FileSelectBean.fileNameSelected.isEmpty()}">
</p:commandButton> 
```

支持豆：

```
private String fileNameSelected = ""; 
```

没有`disabled="#{FileSelectBean.fileNameSelected.isEmpty()}"`. `FileSelectBean.actionOk`添加后，确定按钮将正确启用/禁用，但在单击按钮后停止调用。

什么地方出了错？

**编辑**：我已删除`<p:ajax update=":formFileSelect:okId" />`并以其他方式刷新按钮，但没有帮助。`ajax`所以它看起来与in无关`selectOneListbox`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:07:03.500

尝试这个：

```
<p:selectOneListbox id="primeOneListBox" value="#{FileSelectBean.fileNameSelected}">` 
     <f:selectItems value="#{FileSelectBean.fileNames}" />
     <p:ajax event="change" update=":formFileSelect:okId" process=":formFileSelect:primeOneListBox" />
</p:selectOneListbox> 
```

并检查选择后是否调用了 fileNameSelected setter 方法

# php - 当我搜索它显示解析错误的项目

> ID：15499666
> 
> 赞同：-2
> 
> 时间：2013-03-19T12:34:18.877
> 
> 标签：php, xml, simplexml

当我搜索该项目时，它显示解析错误并给出警告。如何删除此警告。当我搜索该项目时，它显示解析错误并给出警告。如何删除此警告。

如何摆脱这个警告和错误？

```
Warning: simplexml_load_file() [<a href='function.simplexml-load-file'>function.simplexml-load-file</a>]: http://svcs.sandbox.ebay.com/services/search/FindingService/v1?OPERATION-NAME=findItemsAdvanced&amp;SERVICE-VERSION=1.8.0&amp;GLOBAL-ID=EBAY-US&amp;SECURITY-APPNAME=arifliaq-093e-43f2-a6ac-1e8ce8da2625&amp;keywords=110114826574&amp;paginationInput.entriesPerPage=1&amp;outputSelector=SellerInfo:1: 

parser error : Opening and ending tag mismatch: link line 1 and head in C:\wamp\www\PHP_PlaceOfferGS_TradingShopping\Browsing.php on line 39" 
```

**代码：**

```
<?php
require_once('./sessionHeader.php');
require_once('./SingleItem.php');
require_once('./keys.php');
error_reporting(E_ALL);          // useful to see all notices in development
?>

<HTML>
<HEAD>
<TITLE>Browsing on eBay</TITLE>
<link rel="stylesheet" type="text/css" href="style.css" />
<script type="text/javascript" src="js/JQuery.js"></script>
<script type="text/javascript" src="js/ShowDetails.js"></script>
</HEAD>

<BODY>
<H1>Browsing on eBay</H1>
<br>

<?php
global $shoppingURL,$appID,$eBayVersion,$findingURL,$compatabilityLevel, $findingVer;    // these come from keys.php
//need to urlencode the user-input keyword for the Finding API
$safeQuery = urlencode($_POST['QueryString']);
//construct the URL; we want to get only one returned item to keep things simple so   set entriesPerPage to 1
// (by default, only one page is returned)
$apicall  = "$findingURL?OPERATION-NAME=findItemsAdvanced&SERVICE-VERSION=$findingVer"
        . "&GLOBAL-ID=EBAY-US"
        . "&SECURITY-APPNAME=$appID"
        . "&keywords=$safeQuery"
        . "&paginationInput.entriesPerPage=1"
        . "&outputSelector=SellerInfo";

if ($debug) {
 print"<p>$apicall</p>"; //see what call is if we're debugging-$debug comes from keys.php
 }

 // Load the call and capture the document returned by the Finding API
 $resp = simplexml_load_file($apicall);

// Check to see if the response was loaded, else print an error
if ($resp) {
$results = '';
if ($resp->paginationOutput->totalEntries == 0) {
    $results .= "<BR>Sorry, there were no results found\n";
} else {
 $results .= "<DIV ALIGN=CENTER> \n";
 // If the response was loaded, parse it and build links
 // To keep things simple, we're showing only the first returned item;
 foreach($resp->searchResult->item as $item) {
 $browseItem = new SingleItem($resp->searchResult->item->itemId);
 $results .= $browseItem->getBrowseItemAsHTML_Table();
 $results .= "<form name=\"BidOrBuyIt\" method=\"post\" action=\"./Login.php\" >\n";
 $results .= "<INPUT TYPE=\"submit\" NAME=\"BidOrBuyIt\" VALUE=\"Bid or Buy It!\"> </form>\n";
 $_SESSION['ItemID'] = (string)$browseItem->resp->Item->ItemID;  // cast to string to keep in $_SESSION
 } // for each
 $results .= "</DIV> \n";
}
} else {
$results = "<BR>Sorry, did not receive a search result\n";
} // if $resp
print $results;
?>
</BODY>
</HTML>
![warning][1] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:51:53.560

问题不在于您的代码，而在于您从该 ebay url 获取的 XML。除了联系 ebay（以某种方式）并要求他们创建格式良好的 XML 之外，您无能为力。

最简单（但也是最糟糕）的隐藏方法是使用@抑制方法。

```
$resp = @simplexml_load_file($apicall); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T12:41:23.267

编辑`<br>`到`<br />`您的文件中。当您不关闭标签时，它经常出现。

# matlab - 具有 ROC 分析的 KNN 分类器

> ID：15499669
> 
> 赞同：3
> 
> 时间：2013-03-19T12:34:20.543
> 
> 标签：matlab, roc

我编写了以下代码来获取我的 KNN 分类器的 ROC 图：

```
load fisheriris;

features                                = meas;
featureSelcted                          = features;
numFeatures                             = size(meas,1);

%% Define ground truth
groundTruthGroup                        = species;

%% Construct a KNN classifier
KNNClassifierObject                     = ClassificationKNN.fit(featureSelcted, groundTruthGroup, 'NumNeighbors', 3, 'Distance', 'euclidean');

% Predict resubstitution response of k-nearest neighbor classifier
[KNNLabel, KNNScore]                    = resubPredict(KNNClassifierObject);

% Fit probabilities for scores
groundTruthNumericalLable           = [ones(50,1); zeros(50,1); -1.*ones(50,1)];
[FPR, TPR, Thr, AUC, OPTROCPT]          = perfcurve(groundTruthNumericalLable(:,1), KNNScore(:,1), 1); 
```

然后我们可以绘制 FPR 与 TPR 的曲线来获得 ROC 曲线。

但是，FPR 和 TPR 与我使用自己的实现得到的不同，上面的代码不会显示所有的点，实际上，上面的代码只显示 ROC 上的三个点。我实现的代码将在 ROC 上显示 151 个点，因为数据大小为 150。

```
patternsKNN                             = [KNNScore(:,1), groundTruthNumericalLable(:,1)];
patternsKNN                             = sortrows(patternsKNN, -1);
groundTruthPattern                      = patternsKNN(:,2);

POS                                     = cumsum(groundTruthPattern==1);
TPR                                     = POS/sum(groundTruthPattern==1);
NEG                                     = cumsum(groundTruthPattern==0);
FPR                                     = NEG/sum(groundTruthPattern==0);

FPR                                     = [0; FPR];
TPR                                     = [0; TPR]; 
```

请问如何调' `perfcurve`'让它输出ROC的所有分数？非常感谢。

一种。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:01:56.613

我不熟悉，`perfcurve`但您是否尝试过使用 MALAB 帮助。在 MATLAB 工作区中，只需键入：`help perfcurve`，您就会得到很多帮助。同样在 MATWORKS 网站上也有帮助页面，例如您的案例，请查看： http: [//www.mathworks.com/help/stats/perfcurve.html](http://www.mathworks.com/help/stats/perfcurve.html)

# sql - 对完全规范化的表进行非规范化

> ID：15499675
> 
> 赞同：0
> 
> 时间：2013-03-19T12:34:47.080
> 
> 标签：sql, normalization, multiple-tables, denormalization

谁能建议如何去规范化一个完全规范化的表？尽管谷歌搜索，我还是找不到太多关于它的信息。

每当在 TableA 中更新记录（虽然没有插入，但现在不用担心）时，都会将记录插入到 HistoryOfTableA 中，其中包含已更改字段的值以及执行时的相关时间戳。

例如。

表 A 字段：

```
TableA_Id, FieldA, FieldB, FieldC, FieldD.... etc 
```

HistoryOfTableA 记录：

```
HistID, TableA_Id, FieldChanged, OldValue, NewValue, DateCreated
1, 1, 'FieldA', 1, 2, <2013-03-18 12:20:00>
2, 1, 'FieldB', A, B, <2013-03-18 12:20:00>
3, 1, 'FieldC', A, B, <2013-03-18 12:20:00> 
```

情况是我希望创建一些用于报告目的的 SQL。因此，我希望能够指定一个时间点，并能够将这些宿主表条目汇总在一起，并计算出当时 TableA 中该记录的状态。

我在想我可以根据历史表创建表，并在创建日期和表 A 中加入 Id

例如。

```
select HistA.NewValue, 
       HistB.NewValue, 
       .... 
from FieldA_HistoryOfTableA HistA 
     inner join FieldB_HistoryOfTableA HistB on HistA.DateCreated = HistB.DateCreated
       and HistA.TableA_Id = HistB.TableA_Id 
     inner join ... etc
where HistA.FieldChanged = 'FieldA'
and HistB.FieldChanged = 'FieldB'
and .... etc... 
```

但我不认为这会给我我想要的一切，而且我可能无法纯粹在 SQL 中做到这一点。顺便说一句，TableA 中有 20 个字段，因此尝试加入 20 个表可能并不明智。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:46:16.897

你的问题不是表格被标准化，而是它不是。

一个表中的字段标识的数据是由另一个表中的数据标识的，这样查询起来非常复杂。

完全规范化的版本还将字段存储`TableA`在单独的表中：

```
TableA
------------
TableA_Id

TableAFields
-------------
TableA_Id
FieldId
Value

Field
---------
FieldId
FieldName

HistoryOfTableA
----------------
TableA_Id
FieldId
OldValue
ChangedDate 
```

现在您可以加入历史表中的字段。这会有点棘手，但至少它不会是一个有 20 个连接的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T13:56:46.480

If you want the most recent records from the history table, you can use the following SQL:

```
select ht.*
from (select ht.*,
             ROW_NUMBER() over (partition by FieldChanged, TableA_Id order by DateCreated desc) as seqnum
      from HistoryOfTableA ht
      where datecreated <= YOURDATEHERE
     ) ht
where seqnum = 1 
```

If you want this as a single record, you should either pivot or do an aggregation. Here is the latter approach:

```
select ht.TableA_id,
       max(case when FieldName = 'FieldA' then NewValue end) as FieldA,
       . . .
from (select ht.*,
             ROW_NUMBER() over (partition by FieldChanged, TableA_Id order by DateCreated desc) as seqnum
      from HistoryOfTableA ht
      where datecreated <= YOURDATEHERE
     ) ht
where seqnum = 1
group by TableA_id 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-19T12:38:17.437

您可以尝试使用 TableA 中的 XML 列来记录 TableA 中每一行的历史记录。即每一行都有一个XML 类型的列并记录该行的历史。然后您可以将行拉入您的应用程序（如果行数很大，则以批处理方式），并找出 TableA 中每条记录的历史记录

# nested - Netty 嵌套管道/多路复用

> ID：15499679
> 
> 赞同：6
> 
> 时间：2013-03-19T12:34:56.473
> 
> 标签：nested, netty, pipeline, multiplexing

我对 Netty 很陌生，但是当几个协议（例如 P1 和 P2）被封装在另一个协议中时，如何在 Netty 4.x 中实现一个案例？

```
 +-------------+
              |   decoder   |
              +-------------+
              |   encoder   |
              +-------------+
              |    muxer    |
              +-------------+
              |   demuxer   |
              +---+------+--+
                  |      |
                  |      |
           +------+      +------+
           |                    |
           |                    |
           v                    v
    +-------------+      +-------------+
    | P1 decoder  |      | P2 decoder  |
    +-------------+      +-------------+
    | P1 encoder  |      | P2 encoder  |
    +-------------+      +-------------+
    | P1 handler  |      | P2 handler  |
    +-------------+      +-------------+ 
```

有没有办法创建嵌套管道，以便`decoder<->encoder<->muxer<->demuxer`作为主管道将根据解复用器的决定沿 P1 或 P2 管道发送数据？

或者也许有一种方法可以用自己的管道以某种方式创建（为了清楚起见）“子通道”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T07:44:50.807

尚不支持“嵌套管道”。它可能是 4.1.0 的一部分。现在，您需要动态删除/添加处理程序。

有关示例，请参见 [1]。

[1] [https://github.com/netty/netty/blob/master/example/src/main/java/io/netty/example/portunification/PortUnificationServerHandler.java](https://github.com/netty/netty/blob/master/example/src/main/java/io/netty/example/portunification/PortUnificationServerHandler.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-09T04:00:23.393

我将以下评论添加到[https://github.com/netty/netty/issues/8544](https://github.com/netty/netty/issues/8544)

我有一个建议，如何在当前和旧版本的 netty 中实现这一点。

基本思想是定义一个单一的“前端”管道来处理真正的套接字和 I/O，包括编码/解码。然后，将为各种相关协议调用不同的“后端”管道（甚至对于应用层可以在单个连接上运行独立会话的协议，甚至是单独的“会话”）。因此，后端管道是特定于协议或会话/对话的，前端更通用，并且映射到下游的单个真实网络连接，并且知道如何从上游的多个后端通道中实例化、检索和选择。

我在 Netty 中看到了两个潜在的抽象级别，其中前端和后端管道之间的这种区别可能是可能的：

1.  最可行的（也是重量级的）是为每个后端管道声明一个完整的其他 Bootstrap。这些后端引导程序必须绑定到一个自定义的“虚拟套接字”，该套接字实际上由“前端”网络管道支持。换句话说，虚拟套接字不直接映射到 TCP 连接或主机/端口，而是进一步区分端点（主机、端口和协议或会话），但它保持对单个特定“前端”的引用。 end' 调用它的通道/管道。

2.  一个不太重要的选项可能是在现有引导程序中以某种方式实例化（以及存储和检索）新通道。我几乎还没有开始研究这是多么可行。必须首先回答以下问题（可能还有其他我没有想到的问题）：

*   可以在管道中实例化新通道，但将其添加到事件执行器中吗？
*   后端通道是否应该在单独的事件执行器池中运行？
*   如何从前端实例化、存储和检索后端通道的实例
*   后端通道仍必须使用与选项 1 相同的虚拟套接字概念
*   渠道/渠道管道可以移交给其他渠道吗？
*   然后这些后端通道可以写回调用它们的同一个前端通道吗？前端通道必须将回调（或对自身的引用）传递给后端通道。大概这个引用应该由虚拟套接字管理/持有。

# javascript - prettyPhoto 不工作#prettyPhoto/#/ 未生成

> ID：15499681
> 
> 赞同：2
> 
> 时间：2013-03-19T12:35:04.820
> 
> 标签：javascript, jquery, url, prettyphoto

我在 prettyPhoto 文档中实现了一个链接，但它不起作用

JavaScript 已处理（弹出警报），但取决于警报在其工作与否的函数中的位置。

如果警报在开头，prettyPhoto 工作正常并生成 URL 如果警报丢失或最后 URL 指向图像并全屏打开图像。

任何想法让它在没有警报的情况下工作？！

这是代码：

```
function prettyPhoto() {

    //alert("Test"); //beginning pretty photo is working URL appended #prettyPhoto/0/

    $("a[rel^='prettyPhoto']").prettyPhoto({            
        show_title: true,           
        theme: 'pp_default', 
        social_tools: false
    }); 

    alert("Test Ende"); //at the end prettyPhoto is NOT working URL is changing to the location of the image        
} 
```

# android - Android：应用程序 XXXXX（进程 com.ough.XXXXX）已意外停止。请再试一次

> ID：15499683
> 
> 赞同：-1
> 
> 时间：2013-03-19T12:35:11.683
> 
> 标签：android, android-emulator

我是 android 开发的新手，我尝试用 eclipse 运行我的第一个应用程序，但模拟器给了我一个错误：

> 应用程序 XXXXX（进程 com.ough.XXXXX）已意外停止。请再试一次。

我试图在网上寻找答案，但它似乎对我没有多大帮助。也许我把模拟器设置错了？还是我的代码不好？

我的模拟器设置为：4.0" WVGA，android 2.2 api level 8（我尝试了不同的东西，但它也不起作用..）

我的代码是：

```
int counter;
Button add;
Button sub;
TextView display;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    counter = 0;
    add = (Button) findViewById(R.id.bAdd);
    sub = (Button) findViewById(R.id.bSub);
    display = (TextView) findViewById(R.id.tvDisplay);

    add.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            counter++;
            display.setText("Your total is " + counter);
        }
    });

    sub.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            counter--;
            display.setText("Your total is " + counter);
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
} 
```

我的 androidManifest.xml ：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.ough.thenewboston.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

**日志猫：**

```
 03-19 13:31:19.014: E/Zygote(32): setreuid() failed. errno: 2
03-19 13:31:24.084: E/Zygote(32): setreuid() failed. errno: 17
03-19 13:31:24.844: E/BatteryService(58): usbOnlinePath not found
03-19 13:31:24.844: E/BatteryService(58): batteryVoltagePath not found
03-19 13:31:24.844: E/BatteryService(58): batteryTemperaturePath not found
03-19 13:31:24.854: E/SurfaceFlinger(58): Couldn't open /sys/power/wait_for_fb_sleep or /sys/power/wait_for_fb_wake
03-19 13:31:28.244: E/EventHub(58): could not get driver version for /dev/input/mouse0, Not a typewriter
03-19 13:31:28.244: E/EventHub(58): could not get driver version for /dev/input/mice, Not a typewriter
03-19 13:31:28.914: E/System(58): Failure starting core service
03-19 13:31:28.914: E/System(58): java.lang.SecurityException
03-19 13:31:28.914: E/System(58):   at android.os.BinderProxy.transact(Native Method)
03-19 13:31:28.914: E/System(58):   at android.os.ServiceManagerProxy.addService(ServiceManagerNative.java:146)
03-19 13:31:28.914: E/System(58):   at android.os.ServiceManager.addService(ServiceManager.java:72)
03-19 13:31:28.914: E/System(58):   at com.android.server.ServerThread.run(SystemServer.java:184)
03-19 13:31:29.334: E/SoundPool(58): error loading /system/media/audio/ui/Effect_Tick.ogg
03-19 13:31:29.334: E/SoundPool(58): error loading /system/media/audio/ui/KeypressStandard.ogg
03-19 13:31:29.334: E/SoundPool(58): error loading /system/media/audio/ui/KeypressSpacebar.ogg
03-19 13:31:29.334: E/SoundPool(58): error loading /system/media/audio/ui/KeypressDelete.ogg
03-19 13:31:29.334: E/SoundPool(58): error loading /system/media/audio/ui/KeypressReturn.ogg
03-19 13:31:30.024: E/ThrottleService(58): Could not open GPS configuration file /etc/gps.conf
03-19 13:31:30.464: E/logwrapper(131): executing /system/bin/tc failed: No such file or directory
03-19 13:31:30.504: E/logwrapper(133): executing /system/bin/tc failed: No such file or directory
03-19 13:31:30.574: E/logwrapper(136): executing /system/bin/tc failed: No such file or directory
03-19 13:31:35.136: E/HierarchicalStateMachine(58): TetherMaster - unhandledMessage: msg.what=3 
```

另一件奇怪的事情是：每次我启动应用程序时它都会“锁定”。当我从锁定模式打开它时，它给了我“对不起..”错误行..

有什么想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:20:44.303

这不是一个直接的答案，因为您没有显示您的 logcat，而且我没有看到您的代码有任何明显错误，但希望它会有所帮助，而且评论太多了。如果不是，那我就删了。

如果它没有启动，那么使用您拥有的代码，您很可能`null pointer exception`在`manifest`.

逐步检查并检查这些行是否不是`null`

```
add = (Button) findViewById(R.id.bAdd);
sub = (Button) findViewById(R.id.bSub);
display = (TextView) findViewById(R.id.tvDisplay); 
```

还要确保您声明了正确的`menu layout`.

如果您没有看到任何`null`值，那么问题可能出在您的`manifest`

**日志猫**

我很确定当它显示“设备已断开连接”时，您就在控制台选项卡中。您需要在 logcat 选项卡中。您可以选择第一行，按住 shift，然后选择最后一行，然后单击“保存”图标并保存日志，然后将其复制并粘贴到您的 OP 中。

# asp.net - 缓存 MVC 操作的输出，但仅对经过身份验证的用户使用缓存版本

> ID：15499686
> 
> 赞同：2
> 
> 时间：2013-03-19T12:35:23.907
> 
> 标签：asp.net, asp.net-mvc, caching, outputcache, output-caching

我想缓存我的 MVC 操作的输出。然而：

1）如果我在`OutputCacheAttribute`全球范围内应用，这是有风险的，因为它会为所有用户缓存所有内容。

2）如果我`OutputCacheAttribute`全局应用，然后将`Authorize`属性应用于那些需要授权的操作，那仍然不能解决问题。无论用户是否被授权，所有输出仍会被缓存。

3）如果我`OutputCacheAttribute`只在选择的动作上应用（不是全局的，而是），并且`AuthorizeAttribute`对所有需要授权的动作都有，那么就不存在安全威胁，但会有性能成本。每个需要身份验证的页面都需要发出一个新的 Http 请求。

我想找到一个中间立场，以便将选定的页面和/或选定的请求类型（HTTP GET）缓存在客户端，但前提是用户已通过身份验证。如果用户注销并访问缓存页面/动作的 url，他一定无法看到内容。

有没有办法实现这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:20:49.023

[`VaryByCustom is what you want`](https://stackoverflow.com/a/12883064/304832). 把它放在你的 Global.asax 文件中：

```
public override string GetVaryByCustomString(HttpContext context, string custom)
{
    // use this algorithm to determine cacheability for "IsAuthenticated"
    if ("IsAuthenticated".Equals(custom, StringComparison.OrdinalIgnoreCase))
    {
        // cache content when user is authenticated
        if (User.Identity.IsAuthenticated) return "true";

        // do not cache when user is not authenticated
        return null;
    }

    return base.GetVaryByCustomString(context, custom);
} 
```

...然后在要缓存的操作方法上使用类似的内容：

```
[OutputCache(VaryByCustom = "IsAuthenticated", Duration = 1800,
    Location = OutputCacheLocation.Client)]
public virtual ActionResult Index()
{ ... } 
```

# vb.net - FTP 文件中的特殊字符

> ID：15499688
> 
> 赞同：5
> 
> 时间：2013-03-19T12:35:27.580
> 
> 标签：vb.net, ftp, special-characters, ftpwebrequest

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T03:39:27.647

Judging from the answers to [this question](https://stackoverflow.com/questions/3369863/ftpwebrequest-filename-contains-german-umlaute-like-a-o), you may need to specify the encoding of the `StreamReader` you're using to get the file listing. The default is UTF8, you can use other encodings like so:

```
reader = New StreamReader(ftp.GetResponse().GetResponseStream(), System.Text.Encoding.Unicode) 
```

When I run into encoding issues, I usually copy and paste the garbled string into an editor that can show the hex values for the characters, and then figure out the encoding from there.

The string you have above contains the character 00F3\. Your profile says you are in Spain. Putting those two together, with the help of Google I am guessing the FTP server is using the Spanish flavor of EBCDIC, which is code page 1145\. So try this:

```
reader = New StreamReader(ftp.GetResponse().GetResponseStream(), System.Text.Encoding.GetEncoding(1145)) 
```

Edit: Turns out F3 is the acute o in most encodings, including extended ASCII, the EBCDIC one just came up in my search.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T01:10:16.250

I have tried using some special characters and the below works well for me. The listDir function creates the list... Maybe you can try and let us know...

```
 Public Shared Function DownloadFileFromServer(fileUri As Uri) As Boolean

    If fileUri.Scheme <> Uri.UriSchemeFtp Then
        Return False
    End If
    ' Get the object used to communicate with the server.
    Dim request As New WebClient()

    request.Credentials = New NetworkCredential("user", "pass")
    Try
        Dim newFileData As Byte() = request.DownloadData(fileUri.ToString())
        Dim fileString As String = System.Text.Encoding.UTF8.GetString(newFileData)
        'do something with data
        Console.WriteLine(fileString)
    Catch e As WebException
        Console.WriteLine(e.ToString())
    End Try
    Return True
End Function

Public Shared Function listDir() As Boolean

    Dim request As FtpWebRequest = DirectCast(WebRequest.Create("ftp://www.yourftpsite.com/docs/"), FtpWebRequest)
    request.Method = WebRequestMethods.Ftp.ListDirectoryDetails

    request.Credentials = New NetworkCredential("user", "pass")

    Dim response As FtpWebResponse = DirectCast(request.GetResponse(), FtpWebResponse)

    Dim responseStream As Stream = response.GetResponseStream()
    Dim reader As New StreamReader(responseStream)

    Dim dirlist As String() = Nothing
    dirlist = reader.ReadToEnd().Split(New String() {vbCr & vbLf}, StringSplitOptions.RemoveEmptyEntries)

    For Each dirLine As String In dirlist

        Dim dirData As String = dirLine

        ' Parse date
        Dim lineDate As String = dirData.Substring(0, 17)
        Dim dateTime__1 As DateTime = DateTime.Parse(lineDate)
        dirData = dirData.Remove(0, 24)

        ' check if line is a directory
        Dim dir As String = dirData.Substring(0, 5)
        Dim isDirectory As Boolean = dir.Equals("<dir>", StringComparison.InvariantCultureIgnoreCase)
        dirData = dirData.Remove(0, 5)
        dirData = dirData.Remove(0, 10)

        ' get the filename
        If Not isDirectory Then
            Dim fileName As String = dirData

            'the actual filename
            Console.WriteLine("name= " & fileName)

        End If
    Next

    reader.Close()
    response.Close()

    Return True

End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-19T05:04:36.350

In my case, the code seemed to work fine with accented Latin characters - it wasn't an encoding of Latin characters so much as it was the # hash/number symbol.

The answer to that came from [Gary Yang (Microsoft Online Community Support)](http://forums.asp.net/t/1476136.aspx?FtpWebRequest%20and%20permitted%20characters). The key was to use Uri.EscapeDataString(). His answer didn't work, but out of respect it is below:

> I suggest you try to encode the file path. Please refer to the following code:

```
string FTPFilePath = "ftp://myserverip.com/Beatles #1 Hits/Help document.mp3";
if ((FTPFilePath).IndexOf("#") > -1){
 targetUri = new Uri(Uri.EscapeDataString(FTPFilePath));
}
FtpWebRequest request = (FtpWebRequest)WebRequest.Create(targetUri); 
```

Here's my working version:

```
Dim ftpFilePath = "ftp://myserverip.com/Beatles #1 Hits/Help document.mp3"

Dim parsedUri = new Uri(ftpFilePath)
Dim scheme = parsedUri.Scheme
Dim host = parsedUri.Host
Dim port = parsedUri.Port
Dim pathThatMightHaveHashSigns = ftpFilePath.Replace(String.Format("{0}://{1}", scheme, host), String.Empty)

'Dim targetUri = new Uri(Uri.EscapeDataString(ftpFilePath))
' The above line would throw a UriFormatException "Invalid URI: The format of the URI could not be determined."

Dim targetUri = new UriBuilder(scheme, host, port, pathThatMightHaveHashSigns).Uri
Dim request = CType(WebRequest.Create(targetUri), FtpWebRequest) 
```

... and for C#:

```
var ftpFilePath = "ftp://myserverip.com/Beatles #1 Hits/Help document.mp3";

var parsedUri = new Uri(ftpFilePath);
var scheme = parsedUri.Scheme;
var host = parsedUri.Host;
var port = parsedUri.Port;
var pathThatMightHaveHashSigns = ftpFilePath.Replace(String.Format("{0}://{1}", scheme, host), String.Empty);

//var targetUri = new Uri(Uri.EscapeDataString(ftpFilePath));
// The above line would throw a UriFormatException "Invalid URI: The format of the URI could not be determined."

var targetUri = new UriBuilder(scheme, host, port, pathThatMightHaveHashSigns).Uri;
targetUri.Dump(); 
```

# php - PHP vs MySQL 变得随机 - 查询 vs 从文件读取 - 性能

> ID：15499689
> 
> 赞同：4
> 
> 时间：2013-03-19T12:35:31.203
> 
> 标签：php, mysql, performance

我有 10 个文件，每个文件包含 50 到 250 行。

我需要能够从不同的文件中提取 1 个或多个随机行。

我目前这样做...

```
$lines = file($filePath);
if ($number == "1") {
    return $lines[array_rand($lines)];
}
else {
    shuffle($lines);
    return array_slice($lines, 0, $number);
} 
```

但是，我只是在这里读到了一种使用 MySQL 做同样事情的方法：

[https://stackoverflow.com/a/4329447/390480](https://stackoverflow.com/a/4329447/390480)

将这 10 个文件移动到 MySQL 数据库并改为执行该查询，我真的会有这么多的性能提升吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:37:43.660

根据我的经验，当您没有太多信息时，从文件中检索信息比从数据库中检索信息要快。在我的情况下，我有一些文件，我在其中存储具有房屋类型的数组，并且从文件中获取它更快。这些文件只有大约 10kb，性能快了 10 倍，也许我对性能改进有误，但它确实足够快，可以让我删除那些包含这些行的表并使用文本文件 xD.

确保性能的最佳方法是利用该功能`microtime()`并双向进行。然后你可以通过自己的benchmark来查看性能。

我经常使用这个：

```
$start = microtime(true);

// my code;
// If it's not a very long script, you should always put it inside a loop, let's say thousands times or more, depending on the script, because sometimes just the resources used by the system could vary the benchmark, as suggested by @Colin Morelli .

echo microtime(true) - $start; 
```

您将获得经过的微秒的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:42:19.290

在数据库中制作它应该比读取整个文件并改组它更快。但是您必须将此数据插入数据库，这将产生额外的工作量。您应该手动检查，哪个选项更快。

但请记住另外一件事。当您将拥有大文件时，内存使用量可能会很大，因此您也应该考虑一下。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-19T12:51:16.073

10*250 = 2500 行——这对 MySQL 来说没什么。你可以用这些数据做任何你想做的事情，一切都会很快。并且数据库肯定会比文件运行得更快。此外，您可以将其存储在 Redis 中并使用[SRANDMEMBER](http://redis.io/commands/srandmember) - 只是替代变体。

# asp.net - 按钮位于更新面板内。但是每个按钮都点击整页回发

> ID：15499694
> 
> 赞同：-2
> 
> 时间：2013-03-19T12:35:45.683
> 
> 标签：asp.net, ajax

在我的每个下拉代码中都在更新面板中。它不是回发。对于每个按钮单击，都会发生完整的回发。但我的按钮在更新面板中。我尝试触发 asynpostback，在这种情况下不显示服务器端消息。我也想要那个味精。

我的代码是：

```
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="Server">
    <form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <table align="center" style="border: thin solid #FF0000" width="80%">
        <tr>
            <th colspan="2" align="center" bgcolor="Black" style="color: #FFFFFF">
                Schedule New Batch
            </th>
        </tr>
        <tr>
            <td colspan="2" align="center">
                <div>
                    <asp:Label ID="lblError" runat="server" Style="font-weight: 700; color: #FF0000;"
                        Text="Label" Visible="False"></asp:Label>
                    <asp:Label ID="lblSucess" runat="server" Style="font-weight: 700; color: #006600;
                        background-color: #FFFFFF;" Text="Label" Visible="False"></asp:Label>
                </div>
            </td>
        </tr>
        <tr>
            <td colspan="2">
                &nbsp;
            </td>
        </tr>
        <tr>
            <td class="style44" align="right">
                Technology<span class="style23">*</span> :
            </td>
            <td class="style45">
                <asp:UpdatePanel ID="UpdatePanel1" runat="server">
                    <ContentTemplate>
                        <asp:DropDownList ID="ddlTechnology" runat="server" Width="155px" Class="valid" OnSelectedIndexChanged="ddlTechnology_SelectedIndexChanged"
                            AutoPostBack="True" Height="23px">
                        </asp:DropDownList>
                    </ContentTemplate>
                </asp:UpdatePanel>
            </td>
        </tr>
        <tr>
            <td class="style49" align="right">
                Courses<span class="style23">*</span> :
            </td>
            <td class="style50">
                <asp:UpdatePanel ID="UpdatePanel2" runat="server">
                    <ContentTemplate>
                        <asp:DropDownList ID="ddlCourse" runat="server" Width="155px" Class="valid" OnSelectedIndexChanged="ddlCourse_SelectedIndexChanged"
                            AutoPostBack="True" Height="23px">
                        </asp:DropDownList>
                    </ContentTemplate>
                </asp:UpdatePanel>
            </td>
        </tr>
        <tr>
            <td class="style9" align="right">
                Faculty<span class="style23">*</span> :
            </td>
            <td class="style47">
                <asp:UpdatePanel ID="UpdatePanel3" runat="server">
                    <ContentTemplate>
                        <asp:DropDownList ID="ddlFaculty" runat="server" Width="155px" Class="valid" OnSelectedIndexChanged="ddlFaculty_SelectedIndexChanged"
                            AutoPostBack="True" Height="23px">
                        </asp:DropDownList>
                    </ContentTemplate>
                </asp:UpdatePanel>
            </td>
        </tr>
        <tr>
            <td class="style44" align="right">
                Timing<span class="style24">*</span> :
            </td>
            <td class="style45">
                <asp:UpdatePanel ID="UpdatePanel4" runat="server">
                    <ContentTemplate>
                        <asp:DropDownList ID="ddlTiming" runat="server" Width="155px" Height="23px" AutoPostBack="True"
                            Class="valid" OnSelectedIndexChanged="ddlTiming_SelectedIndexChanged">
                        </asp:DropDownList>
                        <asp:Button ID="btnAdd" runat="server" Text="Add" />
                        <cc1:modalpopupextender id="btnAdd_ModalPopupExtender" runat="server" cancelcontrolid="btnCancleInsertTime"
                            dynamicservicepath="" enabled="True" popupcontrolid="Panel1" targetcontrolid="btnAdd">
                    </cc1:modalpopupextender>
                    </ContentTemplate>
                </asp:UpdatePanel>
            </td>
        </tr>
        <tr>
            <td class="style44" align="right">
                Start Date<span class="style23">*</span> :
            </td>
            <td class="style45">
                <asp:UpdatePanel ID="UpdatePanel6" runat="server">
                    <ContentTemplate>
                        <asp:TextBox ID="txtInsertdate" runat="server" Width="150px" Height="16px" Class="valid"></asp:TextBox>
                        <cc1:calendarextender id="CalendarExtender1" runat="server" targetcontrolid="txtInsertdate"
                            format="yyyy-MM-dd">
                    </cc1:calendarextender>
                    </ContentTemplate>
                </asp:UpdatePanel>
            </td>
        </tr>
        <tr>
            <td class="style51">
                &nbsp;
            </td>
            <td class="style45">
                &nbsp;
            </td>
        </tr>
        <tr>
            <td>
                <div style="text-align: right">
                    <asp:Button ID="btnSchedule" runat="server" Text="Schedule" Style="font-weight: 700;
                        margin-left: 0px;" Width="81px" Height="24px" OnClick="btnSchedule_Click" />
                </div>
            </td>
            <td>
                <asp:UpdatePanel ID="UpdatePanel5" runat="server">
                    <ContentTemplate>
                        <asp:Button ID="btnreset" runat="server" OnClick="btnreset_Click" Style="font-weight: 700"
                            Text="Reset" Width="67px" CausesValidation="False" UseSubmitBehavior="false" />
                    </ContentTemplate>
                    <Triggers>
                        <asp:PostBackTrigger ControlID="btnreset" />
                    </Triggers>
                </asp:UpdatePanel>
            </td>
        </tr>
        <tr>
            <td colspan="3">
                <asp:Panel ID="Panel1" runat="server" aline="center">
                    <table style="border: thin solid #FF0000; background: #7F8778">
                        <tr>
                            <th class="style53">
                                Please Add a Time
                            </th>
                        </tr>
                        <tr>
                            <td align="center" style="color: #FF0000" class="style53">
                                <asp:TextBox ID="txtInsertTime" runat="server" Width="124px"></asp:TextBox>
                                &nbsp; EX: 09:15AM
                            </td>
                        </tr>
                        <tr>
                            <asp:UpdatePanel ID="UpdatePanel7" runat="server" UpdateMode="Conditional">
                                <ContentTemplate>
                                    <td align="center" class="style53">
                                        <asp:Button ID="btnInsertTime" runat="server" Text="Add Time" Width="73px" OnClientClick="return InsertTime()"
                                            OnClick="btnInsertTime_Click" class="cancel" />
                                        &nbsp; &nbsp;
                                        <asp:Button ID="btnCancleInsertTime" Text="Cancel" Width="55px" runat="server" class="cancel" />
                                    </td>
                                </ContentTemplate>
                            </asp:UpdatePanel>
                        </tr>
                    </table>
                </asp:Panel>
            </td>
        </tr>
    </table>
    <br />
    </form>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:58:36.643

您可以尝试使用脚本管理器注册该控件，例如：

```
protected void Page_Load(object sender, EventArgs e)
{
  ScriptManager1.RegisterAsyncPostBackControl(ddlTechnology);
  ScriptManager1.RegisterAsyncPostBackControl(ddlCourse);
} 
```

# datepicker - 如何为 monodroid/mvvmcross 制作 DatePickerDialog？

> ID：15499698
> 
> 赞同：1
> 
> 时间：2013-03-19T12:35:51.647
> 
> 标签：datepicker, xamarin.android, mvvmcross, datepickerdialog

我做了一个这样的 DatePicker：[https](https://github.com/eMi-/mvvmcross_datepicker_timepicker/) ://github.com/eMi-/mvvmcross_datepicker_timepicker/ 但我想在 monodroid 的对话框中有这个 DatePicker 并绑定选定的日期（mvvmcross）。有人知道如何做到这一点？

目的是：当用户点击edittext时，显示datepickerdialog并选择日期，然后点击“OK”按钮，dialogpickerdate消失，日期出现在edittext（ddmmyyyy）中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:54:36.960

在 v3 中，有一些对话框片段支持允许数据绑定。

但是，就目前而言，做您想做的最简单的方法是：

*   创建对话框时使用 ViewModel.MyDateTimeProperty 设置日期时间
*   在对话框中显示日期选择器并监听更改
*   当您想要时 - 在更改期间或正常时 - 然后将值写回 ViewModel.MyDateTimeProperty

# java - 如何在@Around 方面获取 execution() 切入点的返回类型？

> ID：15499702
> 
> 赞同：3
> 
> 时间：2013-03-19T12:36:04.207
> 
> 标签：java, aop, aspectj, spring-aop

我正在为我们系统的方法输入验证写一些方面：

1.  每个方法的返回对象都派生自一个公共基类，该基类有一个属性保存返回代码。
2.  切入点定义要拦截的包
3.  编写验证方法输入的方面。如果验证成功，则继续（）执行方法。如果失败，设置方法返回对象的返回码属性，直接返回。

我的问题是：除了基类之外，如何获得真正的返回对象类？我只能知道我应该返回的基类，而不是真正的类。我在 ProceedingJointPoint 中一无所获，getSignature() 只有类名......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:13:18.977

要获得方法的返回类型，您必须将 ProceedingJoinPoint 的签名转换为 MethodSignature ( [http://www.eclipse.org/aspectj/doc/next/runtime-api/org/aspectj/lang/reflect/MethodSignature.html](http://www.eclipse.org/aspectj/doc/next/runtime-api/org/aspectj/lang/reflect/MethodSignature.html)）。这将为您提供 .getReturnType() 方法，它应该为您提供您想要的。

# android - 设置视频视图

> ID：15499703
> 
> 赞同：0
> 
> 时间：2013-03-19T12:36:05.130
> 
> 标签：android, android-videoview

我将以下代码添加到我的应用程序中以添加一个视频视图，该视频视图链接到我的原始文件夹中的视频，但我在 VideoView 上收到一个错误，说`VideoView cannot be resolved or is not a field`我已包含所有相关的导入。我的语法中某处有错误吗?

```
VideoView StudentLife = (VideoView) findViewById(R.id.VideoView);

        Uri uri = Uri.parse("android.resource://"+getPackageName()+"/"+R.raw.learningatgmi);

        videoview.setVideoURI(uri);
        videoview.start(); 
```

我的 videoview xml 布局如下：

```
<VideoView
        android:id="@+id/videoView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView2"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="53dp" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T12:42:15.270

所以你的变量名是`StudentLife`

```
VideoView StudentLife = (VideoView) findViewById(R.id.VideoView); 
```

并且您正在调用其他`videoview`未定义变量的方法。

所以下面的代码：

```
 videoview.setVideoURI(uri);
        videoview.start(); 
```

应该：

```
 StudentLife.setVideoURI(uri);
        StudentLife.start(); 
```

编辑1：

根据您的 xml，获取视频视图实例的行应该如下

```
VideoView StudentLife = (VideoView) findViewById(R.id.videoView1); 
```

完整的工作代码应如下所示：

```
VideoView StudentLife = (VideoView) findViewById(R.id.videoView1);
Uri uri = Uri.parse("android.resource://"+getPackageName()+"/"+R.raw.learningatgmi);
StudentLife.setVideoURI(uri);
StudentLife.start(); 
```

另一方面不是；你不应该使用类名作为变量名......同样在java中变量的第一个字符不应该是大写......所以让我们使用'videoView'作为变量名......所以现在下面应该是正确的工作代码一种变量名..

```
VideoView videoView = (VideoView) findViewById(R.id.videoView1);
Uri uri = Uri.parse("android.resource://"+getPackageName()+"/"+R.raw.learningatgmi);
videoView.setVideoURI(uri);
videoView.start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T12:43:30.833

你的 id`VideoView`是`videoView1`. 因此，您应该`VideoView`使用以下方法从视图层次结构中获取对对象的引用`R.id.videoView1`：

```
 VideoView StudentLife = (VideoView) findViewById(R.id.videoView1);
 Uri uri = Uri.parse("android.resource://"+getPackageName()+"/"+R.raw.learningatgmi);
 StudentLife.setVideoURI(uri);
 StudentLife.start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T12:40:08.773

我的代码有效::

```
mc = new MediaController(this);
vd.setMediaController(mc);
vd.setVideoURI(intentUri);
vd.start();
setContentView(vd); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-26T06:59:57.873

实际上，当您使用此代码时，

```
Uri uri = Uri.parse("android.resource://"+getPackageName()+"/"+R.raw.learningatgmi);
StudentLife.setVideoURI(uri); 
```

它将 URI 作为 null 传递，因此它向您显示错误因此，您不能使用以下代码代替。

```
StudentLife=(VideoView)findViewById(R.id.videoplayer);
StudentLife.setVideoURI(Uri.parse("android.resource://" +getPackageName()+ "/" +R.raw.sample));
StudentLife.requestFocus();
StudentLife.start(); 
```

与其在设置之前解析 URI，不如在设置的时候传递它。

# excel - 无法选择组合框

> ID：15499706
> 
> 赞同：3
> 
> 时间：2013-03-19T12:36:10.300
> 
> 标签：excel, vba, combobox, module

我有一个名为“Facility”的组合框，它已作为表单控件添加到 Excel 2010 工作表中。我还有一个名为“AdjustmentsAmount”的模块，它在单击表单按钮时运行以下方法。我已经尝试了几种访问表单控件的方法，但都没有奏效，下面也列出了。任何人都可以阐明这个问题吗？

代码

```
'Clears all run specifications
Sub clearRunSpecs_click()
    Dim resp As String
    resp = MsgBox("This will clear all run specifications. Are you sure you want to continue?", vbYesNo)
    If (resp = vbYes) Then
        Worksheets("AdjustmentsAmount").Unprotect "pass"
        Range("D3").Clear
        Range("D3").Interior.Color = RGB(235, 241, 222)
        Range("D3").BorderAround LineStyle:=XlLineStyle.xlContinuous, Weight:=xlMedium, ColorIndex:=xlColorIndexAutomatic, Color:=RGB(0, 0, 0)
        Range("D3").Locked = False
        Range("D4").Clear
        Range("D4").Interior.Color = RGB(235, 241, 222)
        Range("D4").BorderAround LineStyle:=XlLineStyle.xlContinuous, Weight:=xlMedium, ColorIndex:=xlColorIndexAutomatic, Color:=RGB(0, 0, 0)
        Range("D4").Locked = False
        Range("B4").Clear
        Range("B4").Interior.Color = RGB(235, 241, 222)
        Range("B4").BorderAround LineStyle:=XlLineStyle.xlContinuous, Weight:=xlMedium, ColorIndex:=xlColorIndexAutomatic, Color:=RGB(0, 0, 0)
        Range("B4").Locked = False
        Range("A17:D22").Clear
        Range("A17:D22").Merge
        Range("A17:D22").Interior.Color = RGB(235, 241, 222)
        Range("A17:D22").BorderAround LineStyle:=XlLineStyle.xlContinuous, Weight:=xlMedium, ColorIndex:=xlColorIndexAutomatic, Color:=RGB(0, 0, 0)
        Range("A17:D22").VerticalAlignment = xlTop
        Range("A17:D22").Locked = False
        ActiveSheet.Shapes("Facility").ListIndex = -1
        ActiveSheet.CheckBoxes("ZeroBalance").Value = xlOff
        ActiveSheet.CheckBoxes("Balance<Adj").Value = xlOff
        ActiveSheet.CheckBoxes("Balance=Adj").Value = xlOff
        Worksheets("AdjustmentsAmount").Protect "pass"
    End If
End Sub 
```

尝试过的方法

```
ActiveSheet.Shapes("Facility")
ActiveSheet.Facility
ActiveSheet.ListBoxes("Facility")
Application.Facility 
```

我已经使用相同的方法访问了复选框，`ActiveSheet.CheckBoxes("NAME")`并且效果很好。但是，我似乎无法获得组合框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:45:46.613

它有点隐藏 - 您可以像这样访问列表框或组合框：

```
Debug.Print ActiveSheet.Shapes("Facility").OLEFormat.Object.Value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T12:54:36.757

我已将一个空行设置为 ListIndex1 并使用：

```
ActiveSheet.Shapes("Facility").ControlFormat.ListIndex = 1 
```

访问它。我想这就是你需要的？

# dynamics-crm-2011 - 如何管理多个 crm 2011 工作流异步调用？

> ID：15499712
> 
> 赞同：0
> 
> 时间：2013-03-19T12:36:33.913
> 
> 标签：dynamics-crm-2011, dynamics-crm

我正在尝试构建将联系人或帐户插入营销列表的自定义工作流程。所以，它工作得很好，除非我尝试拨打多个电话。在这种情况下，我注意到并非每个过程都出现此错误：

> 工作流程因错误而暂停：未处理的异常：System.ServiceModel.FaultException`1[[Microsoft.Xrm.Sdk.OrganizationServiceFault, Microsoft.Xrm.Sdk, Version=5.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35]]: ValidateOpen -遇到不应该处理的已处理 CrmDbConnection 详细信息：
> -2147220968 消息>ValidateOpen - 遇到不应该处理的已处理 CrmDbConnection /Message>
> 2013-03-19T11:47:06.588342Z -2147220970
> 
> Message>System.ObjectDisposedException：Microsoft Dynamics CRM 遇到错误。管理员或支持参考编号：FB9BF845 /Message

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Crm.Sdk.Messages;
using Microsoft.Xrm.Sdk;
using Microsoft.Xrm.Sdk.Workflow;
using System.Activities;
using System.IO;

namespace ContactToMarketingList
{
    public class ContactToMList : CodeActivity
    {      
        protected override void Execute(CodeActivityContext executionContext)
        {
            try
            {
                new AddToList(executionContext, contact, MList, inserimento);
            }
            catch 
            {

            }
        }

        [Input("Contatto")]
        [ReferenceTarget("contact")]
        public InArgument<EntityReference> contact { get; set; }

        [Input("Marketing List")]
        [ReferenceTarget("list")]
        public InArgument<EntityReference> MList { get; set; }

        [Input("Inserimento")]
        public InArgument<bool> inserimento { get; set; }

        bool action = false;
        private static IOrganizationService myService = null;
        private static string _separatore = "\r\n";
        private static string fileName = "c:\\temp\\ContactToMList_logs.txt";

        int count = 0;
    }

    public class AddToList
    {
        private static Guid _contactiId;
        private static Guid _listId;
        private static bool _insert = false;
        private static bool _action = false;
        private static IExecutionContext _executionContext = null;
        private static IOrganizationServiceFactory _organizationServiceFactory = null;
        private static IOrganizationService _service = null;

        public AddToList(CodeActivityContext executionContext, InArgument<EntityReference> contact, InArgument<EntityReference> MList, InArgument<bool> inserimento)
        {
            _executionContext = executionContext.GetExtension<IExecutionContext>();
            _organizationServiceFactory = executionContext.GetExtension<IOrganizationServiceFactory>();
            _service = _organizationServiceFactory.CreateOrganizationService(_executionContext.UserId);
            _contactiId = contact.Get<EntityReference>(executionContext).Id;
            _listId = MList.Get<EntityReference>(executionContext).Id;
            _insert = inserimento.Get<bool>(executionContext);

            _addtoList();
        }

        private static void _addtoList()
        {
            XrmDataContext datacontext = new XrmDataContext(_service);           
            var MyContact = (from c in datacontext.ContactSet where c.ContactId == _contactiId select c.Id).ToArray();            
            var MyList = (from l in datacontext.ListSet where l.Id == _listId select l).ToList().FirstOrDefault();           
            var members = (from m in datacontext.ListMemberSet where m.ListId.Id == MyList.ListId select m.EntityId.Id).ToArray();        

            foreach (Guid id in members)
                if (MyContact.FirstOrDefault() == id)
                    _action = true;

            if (_insert && !_action)
            {
                AddListMembersListRequest AddMemberRequest = new AddListMembersListRequest();

                AddMemberRequest.ListId = _listId;
                AddMemberRequest.MemberIds = MyContact;               
                AddListMembersListResponse AddMemberResponse = _service.Execute(AddMemberRequest) as AddListMembersListResponse;
            }
            else if (!_insert && _action)
            {
                //  File.AppendAllText(fileName, "Remove contact to list - INIZIO"+_separatore);
                RemoveMemberListRequest RemoveMemberRequest = new RemoveMemberListRequest();
                RemoveMemberRequest.ListId = _listId;
                RemoveMemberRequest.EntityId = MyContact.FirstOrDefault();
                // Use AddListMembersListReponse to get information about the request execution 
                RemoveMemberListResponse RemoveMemberResponse = _service.Execute(RemoveMemberRequest) as RemoveMemberListResponse;
                // service.Update(MyList);
                // File.AppendAllText(fileName, "Remove contact to list - FINE"+_separatore);   
            }
            else
            {
                // File.AppendAllText(fileName, insert == true ? "L'utente è già presente nella Lista di Marketing." +_separatore: "L'utente non è presente nella Lista di Marketing." +_separatore); 
            }    
        }
    }
} 
```

# iphone - 将数据从委托传递到 UIViewController

> ID：15499713
> 
> 赞同：4
> 
> 时间：2013-03-19T12:36:37.627
> 
> 标签：iphone, objective-c, cocoa-touch, uitableview, nsarray

我有一个`ViewController`：

```
@interface SubmitCampaignViewController:UIViewController<SocialPagesViewControllerDelegate> 
```

和这样`SocialPagesViewController`的：`UITableView`

```
@protocol SocialPagesViewControllerDelegate;
@interface SocialPagesViewController : BaseViewController<UITableViewDataSource, UITableViewDelegate>
@property (nonatomic, weak) id<SocialPagesViewControllerDelegate> delegate;
@property (nonatomic, weak) NSArray *pages;   
@end 
```

我想将数据从 to 传递`SubmitCampaignViewController`给`SocialPagesViewController`.

所以我这样写：

```
SocialPagesViewController *socialViewController = [storyboard instantiateViewControllerWithIdentifier:@"socialPages"];
socialViewController.delegate = self;
socialViewController.pages = objects;
[self presentViewController:socialViewController animated:NO completion:NULL]; 
```

但是，虽然 objects 不为 0，但 self.pages.count 为 0。

**SocialPagesViewController.m**

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    DLog(@"%d",self.pages.count);
    return self.pages.count;
} 
```

如何将对象`NSArray`从`SubmitCampaignViewController`to传递`SocialPagesViewController`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T12:39:38.480

尝试将数组的引用设置为强。 `@property (nonatomic, strong) NSArray *pages;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T12:56:15.283

我会推荐 to 的设置器，`pages`因为`@property (nonatomic, copy) NSArray *pages;`您需要将相同的数组`object`放入`pages`.

在呈现 socialViewController..

```
socialViewController.pages = [objects copy]; 
```

# jquery - 在写入 DOM 之前附加 div

> ID：15499719
> 
> 赞同：0
> 
> 时间：2013-03-19T12:37:04.020
> 
> 标签：jquery, dom

我正在使用`html +=`for 循环中将 html 写入 DOM。

根据循环中当前项目的 ID，有时我不想编写新项目，而是附加刚刚编写的项目的一部分。

这是我正在尝试的，但没有按应有的方式附加。我可以这样做还是有更好的方法？

```
var html = '';
var i=0, length=data.length, image;

var lastID = '';

for(; i<length; i++) {

image = data[i];

    if(image.itemID!=lastID){   

        html += '<li>';
        html += '<div id="holder'+image.itemID+'">';
        html += '<div class="row">'+image.comment+'</div>';
        html += '</div>';
        html += '</li>';

    } else {

       $('#holder'+image.itemID).append('<div class="row">'+image.comment+'</div>');

    }

var lastID = image.itemID;

}

$('#display').append(html); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:45:42.930

该`else`部分中的代码不起作用，因为先前创建`div`的尚未在 DOM 中。并且只要它不在 DOM 中，就不可能通过查询 DOM 模型找到它，例如使用 jQuery。

除非存在性能问题，否则您可以`li`在创建元素后立即将元素插入 DOM，而不是一次性完成。这样，您将能够找到以前创建的元素并将内容附加到它们：

```
var i=0, length=data.length, image;

var lastID = '';

for(; i<length; i++) {

    image = data[i];

    if(image.itemID!=lastID){   

        var html = '<li>';
        html += '<div id="holder'+image.itemID+'">';
        html += '<div class="row">'+image.comment+'</div>';
        html += '</div>';
        html += '</li>';

        $('#display').append(html);

    } else {

       $('#holder'+image.itemID).append('<div class="row">'+image.comment+'</div>');

    }

    var lastWish = image.wishlist_id;
} 
```

**更新**。实际上，您可以在将新创建的 html 插入 DOM 之前查询甚至操作它。`$(html).find('selector')`jQuery 可以很好地处理这样的场景：

```
var html = ''
var i=0, length=data.length, image;

var lastID = '';

for(; i<length; i++) {

    image = data[i];

    if(image.itemID!=lastID){   

        html += '<li>';
        html += '<div id="holder'+image.itemID+'">';
        html += '<div class="row">'+image.comment+'</div>';
        html += '</div>';
        html += '</li>';

    } else {

       $(html).find('#holder'+image.itemID).append('<div class="row">'+image.comment+'</div>');

    }

    var lastWish = image.wishlist_id;
}

$('#display').append(html); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:45:03.647

Append 将 jQuery 对象作为参数。所以正确的语法是：

```
$('#display').append($(html)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T12:45:58.623

这是一个如何使用 DOM 外部的临时元素来管理新创建的元素的示例。

```
for(var i       = 0,
        length  = data.length,
        $el     = $('<ul>'),
        lastId, image; i < length; i++) {

    image = data[i];

    if(image.itemID !== lastId) {
        $el.append('<li><div id="holder' + image.itemID +
            '"><div class="row">' + image.comment + '</div></div></li>');
    } else {
        $el.find('#holder' + image.itemID).append('<div class="row">' + image.comment + '</div>');
    }

    lastId = image.itemID; // is that right?! cause you need to set lastId somewhere..
}

$('#display').append($el.children()); 
```

`'#holder' + image.itemID`问题可能是因为您在将元素附加到 DOM 之前尝试从 DOM 获取元素 ( )。

# nginx - 将 Integrity CI 部署到 Nginx 和 Unicorn 上的子目录

> ID：15499721
> 
> 赞同：2
> 
> 时间：2013-03-19T12:37:10.600
> 
> 标签：nginx, sinatra, unicorn

我正在尝试将[Integrity 持续集成服务器](http://integrity.github.com)部署到子目录（或基本 URL）。也就是说，我想将它托管在[http://dev.example.com/integrity/](http://dev.example.com/integrity/)之类的 URL 上，而不是[http://integrity.example.com](http://integrity.example.com)。

我正在使用独角兽和 Nginx。我的 Nginx 配置：

```
upstream integrity {
    server unix:/home/integrity_ci/integrity/tmp/sockets/integrity.socket;
}

server {
    server_name dev.example.com;
    location /integrity {
        proxy_pass http://integrity;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $http_host;
        proxy_redirect off;
   }
} 
```

转到[http://dev.example.com/integrity/](http://dev.example.com/integrity/)会显示 Integrity 404（而不是 Nginx 404 页面），因此 Nginx 配置看起来是正确的。但是如何配置 Unicorn/Integrity 以将 /integrity 识别为应用程序根？

将重写规则添加到 Nginx 将不起作用，因为 Integrity 将使用 构造 URL `/`，`/integrity`因此 CSS、JavaScript 和链接将被破坏。

Integrity 是一个 Sinatra 应用程序，所以也许有一个标准的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T02:07:38.733

在`config.ru`中，替换：

```
run Integrity.app 
```

和：

```
map ('/integrity') { run Integrity.app } 
```

# c++ - 二维数组及其在 C++ 中的性能

> ID：15499722
> 
> 赞同：1
> 
> 时间：2013-03-19T12:37:20.790
> 
> 标签：c++, performance, multidimensional-array

我想优化一段区域增长代码，该代码目前在其算法中使用两个二维数组。一个 2D 数组保存 2D 纹理中每个像素的访问状态，一个 2D 数组保存每个像素的“应该被屏蔽”布尔值。

我运行了 Intel VTune Amplifier XE 来分析该方法的性能。下面是 512x512 图像最重要的统计数据：

*   在 array2D[x][y] 中查找需要 ~10-15ms
*   写入 array2D[x][y] 需要 ~1-2ms
*   每个数组的创建和初始化大约需要 8-10 毫秒

此外，我执行的读取次数与写入次数大致相同。以最基本的方式创建二维数组：

```
bool** array2D = new bool*[desc.Width];
for(unsigned int i = 0; i < desc.Width; ++i)
    array2D[i] = new bool[desc.Height];

for(unsigned int x = 0; x < desc.Width; x++){
    for(unsigned int y = 0; y < desc.Height; y++){
        array2D[x][y] = false;
    }
} 
```

我正在寻找性能更好的结构来保存这些信息。欢迎代码示例以及一般想法（包括猜测）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:43:42.687

您可以通过从二维数组切换到一维数组来尝试以牺牲可读性为代价来优化性能。取而代之的是，`array2D[x][y]`您可以使用`array[x*Height+y]`or `array[x+y*Width]`（[行优先或列优先顺序](http://en.wikipedia.org/wiki/Row-major_order)），具体取决于您的访问模式。这将使您避免单独分配。

如果数组很大，您也可以尝试将布尔值打包成更大的整数类型。这将使访问代码稍微变慢，但相当小的占用空间可能会以更好的缓存性能来补偿较慢的访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T12:42:55.753

将您的二维数组包装在一维数组中：

```
type* array = new type[width * height];
array[x + y * width] = data_at_x_y; 
```

# c++ - 在 X.org 中切换 kb 布局时会触发哪个事件

> ID：15499723
> 
> 赞同：9
> 
> 时间：2013-03-19T12:37:23.273
> 
> 标签：c++, c, xorg

我是 X.org 编程的新手。我想建立一个对 X 键盘布局开关做出反应的小应用程序。我已经搜索过，但没有找到切换 kb 布局时触发的事件。请指出正确的事件。谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-13T10:18:29.130

There's the `XkbStateNotify` event type, which is part of the [X Keyboard Extension](http://www.x.org/releases/X11R7.6/doc/libX11/specs/XKB/xkblib.html). You can grab layout language from it like this:

```
void x11Events(XEvent* evt)
{
    if(evt->type == xkbEventType) {
        XkbEvent* xkbevt = (XkbEvent*)evt;
        if (xkbevt->any.xkb_type == XkbStateNotify) {
            int lang = xkbevt->state.group;
            // Some code using lang here.
        }
    }
} 
```

To get `xkbEventType`, call the `XkbQueryExtension()` function (declared in `XKBlib.h`).

However, `XkbStateNotify` is fired not only on layout change. This is from specification referenced above:

> The changes reported include changes to any aspect of the keyboard state: when a modifier is set or unset, when the current group changes, or when a pointer button is pressed or released.

Because of this, you'll have to save the value of `lang` somewhere, and then, when new event arrives, compare new value of `lang` to the one previously saved.

NB. There's also the `XkbMapNotifyEvent` event, which notifies not about switching layout per se, but about changing keyboard mapping. You might want to look into that one, too.

# c# - MassTransit 实施：有时未收到消息

> ID：15499724
> 
> 赞同：2
> 
> 时间：2013-03-19T12:37:24.817
> 
> 标签：c#, wcf, msmq, masstransit

我正在与一个非常奇怪的问题作斗争......我已经在 WCF 服务之间实现了服务总线通信（通过 MassTransit + MSMQ），在 Windows 7 Ultimate 上使用 .NET 4.0。当服务启动时，一切正常并且它们互相接收消息，但是在给定的点上，它们不再接收它们，直到我手动删除计算机管理中的私有队列 -> 服务和应用程序 -> 消息队列 - > 私人队列。

对于每项服务，我都有一个引导程序，我在其中配置了 MassTransit：

```
 // Bootstrapper configuration
    public void Configure(IUnityContainer container)
    {
        // Service bus configuration
        var config = ConfigurationDataAccess.GetSupervisionServiceConfig();

        // Cleaning up the former Private Queues before to start the service
        var privateQueues = MessageQueue.GetPrivateQueuesByMachine(System.Environment.MachineName);

        foreach (var messageQueue in privateQueues)
        {
            try
            {
                if (messageQueue.QueueName.Contains("supervisionservice"))
                {
                    MessageQueue.Delete(messageQueue.Path);
                }
            }
            catch (MessageQueueException)
            {
                // An exception has occurred trying to remove a private message queue.
            }
        }

        // Initializing MassTransit
        var bus = ServiceBusFactory.New(sbc =>
        {
            sbc.UseMsmq();
            sbc.VerifyMsmqConfiguration();
            sbc.UseMulticastSubscriptionClient();
            sbc.ReceiveFrom(config.ServiceBusReceiveFromAddress);
        });

        container.RegisterInstance(bus);

        //Start the service...
    }
} 
```

然后服务主类扩展了 MassTransit，这里是一个例子：

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]
public class DataService : Consumes<ServiceMessage>.Selected
{
     public DataService()
     {
          // The service bus object takes the instance from the bootstrapper through the dependency
          // injection of the Unity.
          ServiceBus.SubscribeInstance(this);
     }

    public bool Accept(ServiceMessage message)
    {
        // For an easy explanation
        return true;
    }

    public void Consume(ServiceMessage message)
    {
        // Treat the message
    }

    public void SendMessage(ServiceMessage message)
    {
        // Publish the message over the service bus
        ServiceBus.Publish(message);
    }
} 
```

正如我所解释的，在给定的点上，不再调用 Accept 方法。唯一的方法是手动删除私有队列并重新启动服务。然后系统再次正常工作，直到下一个麻烦:-(。

任何建议将不胜感激。

非常感谢！亚历山德罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-28T22:52:02.163

UseMulticastSubscriptionClient 似乎不是处理订阅的最稳定方式。我整个周末都在工作以使一切正常运行，现在我有永久（多个）订阅。

在回答[这个问题](https://stackoverflow.com/questions/17195250/how-do-i-correctly-set-up-a-publisher-subscriber-architecture-using-masstransit)时，我已经写下了我的步骤。这对您有帮助吗？

# html - Internet Explorer 不提供保存登录页面的凭据

> ID：15499731
> 
> 赞同：3
> 
> 时间：2013-03-19T12:37:43.243
> 
> 标签：html, internet-explorer

我有一个我认为相当简单的登录页面。但是，我最近发现 IE 不会提供保存密码（虽然在 Chrome 和 Firefox 中有效）。IE中的设置似乎没有问题，因为有几个人报告了这个问题。

这是表格：

```
<form action="index.php" method="post">
    <p>
        <label for="username">Brugernavn</label>
        <input type="text" name="username" length="20" tabindex=1>
    </p>
<p>
    <label for="password">Password</label>
    <input type="password" name="password" length="20" tabindex=2>
</p>
<input type="submit" name="submit" value="Log ind" id="submitbutton">
<a href="#" id="forgotpassword" onClick="showForgotPasswordDialog();">Glemt password?</a>
<br/>
</form> 
```

页面的其余部分应该是有效的 HTML5。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:00:24.627

`<input>`Internet Explorer在您的表单中查找标记。我不确定，但也许`<p>`&`<a>`标签给他带来了问题。试试这种方式：

```
<form action="index.php" method="post">
  <label for="username">Brugernavn</label>
  <input type="text" name="username" length="20" tabindex=1>
  <br>
  <label for="password">Password</label>
  <input type="password" name="password" length="20" tabindex=2>
  <input type="submit" name="submit" value="Log ind" id="submitbutton">
</form>
<a href="#" id="forgotpassword" onClick="showForgotPasswordDialog();">Glemt password?      </a> 
```

如果它没有帮助尝试这个链接，也许你在这里找到一个解决方案：

[http://blogs.msdn.com/b/ieinternals/archive/2009/09/11/troubleshooting-stored-login-problems-in-ie.aspx](http://blogs.msdn.com/b/ieinternals/archive/2009/09/11/troubleshooting-stored-login-problems-in-ie.aspx)

[http://www.w3schools.com/html/html_forms.asp](http://www.w3schools.com/html/html_forms.asp)

# java - 公司范围的父 pom

> ID：15499733
> 
> 赞同：3
> 
> 时间：2013-03-19T12:37:45.713
> 
> 标签：java, maven

我可以将 a`mvn deploy`用于单亲 pom 吗？这个 pom.xml 文件将是我所有项目的父 pom。我是否可以只部署这个 pom.xml 文件而不部署其他工件？

如果我将其用作公司范围的 pom，我是否必须包含模块标签。

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>onestopspot</groupId>
    <artifactId>parent</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <packaging>pom</packaging>
    <name>OneStopSpot - Parent</name>
    <description>Android application for OneStopspot</description>
    <distributionManagement>
        <repository>
            <id>confiz-repo</id>
            <url>http://10.10.10.230:8081/nexus/content/repositories/snapshots/</url>
            <releases>
                <enabled>true</enabled>
            </releases>
            <snapshots>
                <enabled>true</enabled>
                <updatePolicy>always</updatePolicy>
            </snapshots>
        </repository>
     </distributionManagement>
    <dependencyManagement>
        <dependencies>
            <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android</artifactId>
        <version>4.1.1.4</version>
        <scope>provided</scope>
        </dependency>
            <dependency>
                <groupId>com.google.android</groupId>
                <artifactId>android-test</artifactId>
                <version>2.3.3</version>
            </dependency>
        </dependencies>
    </dependencyManagement>
    <build>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                    <artifactId>android-maven-plugin</artifactId>
                    <version>3.5.1</version>
                    <configuration>
                        <sdk>
                            <platform>10</platform>
                        </sdk>
                        <undeployBeforeDeploy>true</undeployBeforeDeploy>
                    </configuration>
                    <extensions>true</extensions>
                </plugin>
            </plugins>
        </pluginManagement>
    </build>
    <modules>
        <module>api_library</module>
        <module>instrumentation</module>
    </modules>
</project> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T12:41:54.360

是的，事实上，这是减少项目 POM 中样板数量的标准做法。

有关父 POM 的更多信息：[https ://books.sonatype.com/mvnref-book/reference/pom-relationships-sect-project-relationships.html#pom-relationships-sect-project-inheritance](https://books.sonatype.com/mvnref-book/reference/pom-relationships-sect-project-relationships.html#pom-relationships-sect-project-inheritance)

并使用仅 POM 项目将样板文件排除在项目 POM 之外：[https ://books.sonatype.com/mvnref-book/reference/pom-relationships-sect-pom-best-practice.html](https://books.sonatype.com/mvnref-book/reference/pom-relationships-sect-pom-best-practice.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T12:43:35.280

是的，这是可能的。只需将您的包装定义为 pom 即可。

请注意 groupId 和版本继承。如果您不想像在多模块项目中那样继承它，则只需覆盖它。

这是一个例子：

公司范围内的父 pom：

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <groupId>de.mycompany.parent</groupId>
    <artifactId>parent-pom</artifactId>
    <version>1.0</version>
    <packaging>pom</packaging>

</project> 
```

多模块项目父pom：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>de.mycompany.parent</groupId>
        <artifactId>parent-pom</artifactId>
        <version>1.0</version>
    </parent>
    <groupId>my-overridden-groupId</groupId>
    <artifactId>my-overridden-artifactId</artifactId>
    <version>1.1</version>
    <packaging>pom</packaging>

    <modules>
        <module>myOtherModule</module>
    </modules>

</project> 
```

之后，您可以使用上面的 pom 父级制作模块

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T12:43:07.487

是的，可以这样做，这是一种常见的做法。在这种情况下，`packaging`类型应设置为`pom`：

```
<packaging>pom</packaging> 
```

具有类型的项目`pom`不需要`src`or`test`目录，只需要普通的 pom 文件就足够了。

推荐大家使用*Maven Release Plugin*发布和部署父pom文件：[http ://maven.apache.org/maven-release/maven-release-plugin/](http://maven.apache.org/maven-release/maven-release-plugin/)

# ios - 从 iOS 上的广告开始

> ID：15499734
> 
> 赞同：0
> 
> 时间：2013-03-19T12:37:54.863
> 
> 标签：ios, sdk, iad

关于通过广告从 iOS 应用中获利的最佳方式，我想提出几点建议。我发现的所有评论/教程都是很久以前的。

我有几个付费应用程序，我想将它们用作免费/广告支持应用程序的试验品。似乎一个明显的选择是使用 iAds，但还有很多其他提供商，我不确定哪个是设置支持广告的应用程序的最佳方式。

**我的主要问题是**，最好使用库存 iAd 还是去其他地方？我发现 topmobileadnetworks 等网站建议使用 LeadBolt 等[服务](http://www.topmobileadnetworks.com)[来](http://www.leadboltnetwork.net)投放 iOS 广告。

有没有人有任何提示或最佳实践/服务/sdks？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:45:58.283

您可以使用两者`IAds`和其他使用`iAd Delegate`：

谷歌的例子`AdMob`

```
- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error {

[self.bannerView removeFromSuperview];
[bannerView removeFromSuperview];
if ( admobBannerView!=nil) {
    [ admobBannerView removeFromSuperview];
    admobBannerView=nil;
}

admobBannerView = [[GADBannerView alloc] initWithAdSize:kGADAdSizeSmartBannerLandscape];
admobBannerView.adUnitID =  @"adUnitID";
admobBannerView.frame = CGRectMake(0.0,0, admobBannerView.frame.size.width, admobBannerView.frame.size.height);
admobBannerView.rootViewController = self;
[self.view addSubview:admobBannerView];
[admobBannerView loadRequest:[GADRequest request]];

} 
```

# c# - 是否可以在一些项目已经绑定到 TFS 的 VS2012 中创建多项目解决方案？

> ID：15499742
> 
> 赞同：2
> 
> 时间：2013-03-19T12:38:21.647
> 
> 标签：c#, .net, visual-studio, visual-studio-2012, nuget

我们正在尝试创建一个多项目模板，以便我们团队中的任何人都可以快速启动维护应用程序。这部分有据可查，而且相当容易。

我们的问题是，我们希望我们的共享公共库成为解决方案的一部分，或者使用最新的代码，或者至少将项目绑定到 TFS，以便他们可以对它们执行“获取最新”。

这可能吗？我们已经尝试将源代码控制文件放入模板 zip 文件并修改 vstemplate 文件以包含它们，但 VS 在部署时会忽略它们。

我们还在探索 VSIX 和 Nuget 作为交付机制……是否可以使用这些工具来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:54:31.127

我不是 TFS 内部工作的专家，所以我不确定它是否可能在那里。我认为 NuGet 是一个很好的方法，但它意味着作为这些公共库的构建过程的一部分的额外步骤，因为您需要从它们[创建](http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package)NuGet 包。

然后，您可以设置一个[本地存储库](http://docs.nuget.org/docs/Creating-Packages/Hosting-Your-Own-NuGet-Feeds)并让人们配置他们的 VS 以[指向](http://www.hanselman.com/blog/HowToAccessNuGetWhenNuGetorgIsDownOrYoureOnAPlane.aspx)该本地存储库。

负责这些公共库的构建过程的任何人都可以通知开发人员有更新，他们可以从本地 NuGet 存储库中下载（请注意，根据[这一点](http://docs.nuget.org/docs/release-notes/nuget-2.1#Force_Package_Update)，您不一定需要更新您的包，但您可以根据您公司拥有的任何程序集版本控制政策来执行此操作）。

此处本地存储库的目的是当您不希望将 NuGet 包发布给全世界看到时 - 我假设这是因为听起来您正在分发内部库和帮助程序位:-) 我不确定是什么如果您设置了本地存储库和公共存储库，则意味着（例如，如果公共 NuGet 包的包下载会更慢）。此外，我不确定是否有办法（例如，将设置打包到 VSIX 或类似文件中）全局推出本地存储库的详细信息，或者人们是否需要手动执行 VS 中的步骤。

HTH，弥敦道

# java - 在 windows 服务器上安装 glassfish 服务器时出错

> ID：15499744
> 
> 赞同：0
> 
> 时间：2013-03-19T12:38:23.917
> 
> 标签：java, glassfish

当我尝试在 windows 2008 R2 服务器上安装 glassfish 服务器时，它显示以下错误消息。JRE 已安装在我的系统中并设置环境变量如下

JAVA_HOME - C:\Program Files\Java\jdk1.7.0_17 CLASSPATH - %JAVA_HOME%\jre\lib 路径 - ;%JAVA_HOME%\bin

您的帮助将不胜感激。

![在此处输入图像描述](../Images/48a58dcb21dbebdfd69f39b67a134b3e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-06T16:33:08.927

您只需要设置“JAVA_HOME”环境变量（至少在我的安装中就足够了）。

在 64 操作系统中，您必须从命令行安装。该命令应该类似于`C:\Installer>glassfish-4.0-windows.exe -j "C:\Program Files\Java\jdk1.7.0_45"`

您只需要更改为您的实际 glassfish 安装程序版本和 jdk 主页。

# java - 多语言集成测试框架

> ID：15499746
> 
> 赞同：6
> 
> 时间：2013-03-19T12:38:25.377
> 
> 标签：java, php, testing, integration-testing, bdd

想象一下，您有一个由不同组件组成的相当复杂的面向服务的架构。组件用不同的语言（Java、PHP、Ruby）编写，并以不同的方式相互通信（即 UI、REST API，在某些情况下共享一些数据库表等）。

我正在尝试为一些端到端测试设计一个集成测试框架。我们已经对单个组件进行了单元/集成测试，但是我们希望构建一些东西来对我们部署的系统（在真实环境中）进行端到端的全面测试，以确保功能（就个人的预期行为而言）组件）正确提供并且架构也正确配置。

我面临的第一个问题是我们的大部分 UI 都是用 PHP 编写的，并且 UI 集成测试已经用 Cucumber 和几个插件编写了。我正在编写的测试框架（用 Java 编写）应该触发这些功能测试，然后检查相关组件的行为是否符合预期。

显然，我可以使用 Selenium 之类的 Java 友好组件重写 UI 测试，但重复这些工作是没有意义的。

另一种解决方案是在 Java 中使用 exec() 调用运行现有测试，等待它们返回，可能解析输出并继续需要完成的其他操作/检查。

考虑到项目的编写方式，在 Java 中嵌入现有的 PHP 代码似乎不是一个可行的解决方案。

没有一个解决方案对我来说听起来令人信服。理想情况下，最好有某种多语言（和多技术）集成框架，该框架可以插入到用不同语言和不同环境/组件编写的相同测试套件测试中。

有人知道朝这个方向发展的一些工具或框架吗？如果不是，那么解决此类问题的好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-23T09:05:51.590

不确定这是否有帮助，但也许看看[https://github.com/nablex/glue](https://github.com/nablex/glue)。这是我开发的一种脚本语言，专注于（集成）测试。

[如果您插入https://github.com/nablex/glue-selenese](https://github.com/nablex/glue-selenese) ，它支持开箱即用的 selenium 脚本，并且**非常**可扩展。

我目前在一个客户那里使用它，它带有一些自定义扩展来运行用 fox pro 编写的遗留脚本（我实际上重新实现了 fox pro 方法...... *shiver*）和遗留模式，因此它们只启用遗留脚本，而不是新脚本. 我还插入了基于 SOAP 的自定义 Web 服务，其中一个可用于在远程系统上进行数据库调用，为我提供了广泛的集成级测试工具。

虽然脚本语言功能齐全，但我仍在充实默认可用的方法纲要，并仍在尝试将其定位为集成测试工具。让我知道它是否有帮助或 - 如果没有 - 为什么它不能满足您的需求，总是对反馈感到满意！:)

PS：“Main”类是启动和运行它的好地方，因为它包含一个工作 CLI 客户端（支持断点！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:53:49.860

您是否考虑过使用 Jmeter 之类的全栈测试？

您可以构建针对完全部署的软件运行的测试

*   创建用户
*   确认显示用户成功创建屏幕
*   确认用户按预期在数据库中
*   删除用户
*   确认用户已被删除

这样您就可以同时测试您的用户界面、业务逻辑和数据存储。它也可以用来做负载测试。

[测量仪](http://jmeter.apache.org/)

# r - 使用 lapply 或 plyr 对类别重复分析

> ID：15499747
> 
> 赞同：1
> 
> 时间：2013-03-19T12:38:26.140
> 
> 标签：r

我一直在做一些我认为很简单的事情——对数据框进行子集化，然后从几个测试中打印一些输出，在类别中重复

本着避免 for 循环的精神，我尝试了 lapply 但它似乎用 anova 覆盖了单向

我也试过 dlply，它不运行。

```
library(plyr)

dat<-data.frame(value=rnorm(300),
                    aCategory=rep(1:3, c(100, 100, 100)),
                    bCategory=rep(1:2, 300)
                    )

aFunc<-function(cat){
  sub<-subset(dat, aCategory=="cat")
  oneway.test(value~bCategory, dat)
  summary(aov(value~bCategory, dat))
}

lapply(unique(dat$aCategory), aFunc)

dlply(dat, .(aCategory), summarise, 
      oneway.test(value~bCategory),
      summary(aov(value~bCategory))
      ) 
```

谁能指出我正确的方向？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:41:38.383

一个函数只能有一个返回值。试试这个：

```
aFunc<-function(cat){
  #sub<-subset(dat, aCategory==cat)
  #help(subset) warns against using subset inside functions
  sub <- dat[dat$aCategory==cat,]
  list(oneway.test(value~bCategory, sub),
       summary(aov(value~bCategory, sub)))
}

lapply(unique(dat$aCategory), aFunc) 
```

在这里，我必须更正一些错误，例如实际使用子集进行测试并与值进行比较，`cat`而不是与字符串进行比较`"cat"`。

请注意，这`lapply`仍然是一个循环。

# performance - Intel Fortran 中 MD 和 MT 的区别

> ID：15499758
> 
> 赞同：0
> 
> 时间：2013-03-19T12:38:53.600
> 
> 标签：performance, fortran, intel-fortran

我有这段代码，我用 Fortran 运行时库选项编译了`MT`它`MD`。我得到的是

使用 MD 运行 10 次：平均 5.29 秒

使用 MT 运行 10 次：平均 6.5 秒

有人知道这种差异吗？我认为在这种情况下结果应该是相同的，对吧？

```
程序执行
  隐式无

  实际 x,y
  真实*8 t1,t2

  整数 i

  调用 cpu_time(t1)

  做我=1,1000000000
    x=sin(0.1)
    y=cos(0.2)
    x=asin(0.2)
    y=acos(0.5)
    x=棕褐色（1.2）
  结束

  调用 cpu_time(t2)

  打印 *,t2-t1
结束程序执行

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:31:54.447

MT 静态链接到 Fortran 库。MD 是动态链接的。如果您希望通过 MT 分发您的程序，您只需提供该程序。使用 MD，您需要提供程序及其使用的任何 Fortran DLL 以及这些 DLL 使用的任何 DLL。

您可以通过运行程序来查看依赖关系（来自[http://www.dependencywalker.com/](http://www.dependencywalker.com/)）。只需删除您的 MT 版本，然后查看它使用的 DLL。然后删除 MD 版本，看看它使用了哪些 DLL。

# sparql - SPARQL - 完成集合所需的主题

> ID：15499759
> 
> 赞同：2
> 
> 时间：2013-03-19T12:38:54.907
> 
> 标签：sparql

我正在使用 RDF 开发一个新项目，只是学习它和 SPARQL。我认为这个查询会比原来更容易。

给定这家商店（从本体中简化出来）

```
Person1 -Owns->  Part1
Person2 -Owns->  Part1
Person2 -Owns->  Part2
Part1 -PartOf-> Product1
Part2 -PartOf-> Product1 
```

我正在尝试退回一个人完成产品所需的所有零件。

给定 Person1，他需要 Part2 来完成 Product1 的制作。给定 Person2，他不需要任何东西，因为他拥有制作 Product1 的所有部件。

我想在 1 个查询中返回每个产品的所有人和所有需要的零件，但我想从较小的开始，只是试图找到特定人需要的零件。真实数据有多个产品和可能存在于多个产品中的零件（即螺钉存在于很多产品中）以及拥有属于多个产品的零件的人。一旦我可以让子集查询工作，我应该能够扩展它。

```
select ?parts
where 
{ 
  ?parts <PartOf> <Product1> .
  minus {<Person1> <Owns> ?parts}
} 
```

我的想法是获取属于 Product1 的所有部分，然后消除 Person1 拥有的部分。但我得到了 Product1 中的所有部件。我尝试了很多其他查询，但在阅读了教程和书籍后，这对我来说是最合乎逻辑的。有人可以指出我哪里出错了吗？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:04:23.220

您使用的是什么查询软件，您的数据实际上是什么样的？[我使用apache jena](http://jena.apache.org/)尝试了以下操作：

```
@prefix ex: <http://example.com/> .

ex:person1 ex:owns ex:part1 .
ex:person2 ex:owns ex:part1 .
ex:person2 ex:owns ex:part2 .

ex:part1 ex:partOf ex:product1 .
ex:part2 ex:partOf ex:product1 . 
```

和查询：

```
prefix ex: <http://example.com/>

select ?parts
where
{
    ?parts ex:partOf ex:product1
    minus { ex:person1 ex:owns ?parts }
} 
```

结果：

```
$ arq --data data.ttl --query query.rq 
------------
| parts    |
============
| ex:part2 |
------------ 
```

鉴于您编写的查询软件有错误（可能），但更有可能的是，您的数据或查询中可能有一个简单的拼写错误。如果（例如）你有'owns'（小写）而不是'Owns'，它会解释你的结果。

尝试`{<Person1> <Owns> ?parts}`自行执行。你有任何结果吗？是否与您的查询返回的部分匹配？

# java - 通过 Eclipse 将应用程序部署到应用程序引擎时出现客户端错误 (400)

> ID：15499761
> 
> 赞同：2
> 
> 时间：2013-03-19T12:38:59.870
> 
> 标签：java, eclipse, google-app-engine

我是 Google App Engine 的新手，我正在尝试通过 eclipse 部署我的应用程序。当我尝试部署我的应用程序时遇到的问题是它给了我以下错误：

无法更新应用程序：发布到 URL 时出错：[https](https://appengine.google.com/api/appversion/getresourcelimits?app_id=Project&version=1&) ://appengine.google.com/api/appversion/getresourcelimits?app_id=Project&version=1& 400 错误请求客户端错误 (400) 由于未指定的原因，请求无效。有关更多详细信息，请参阅部署控制台无法更新应用程序：错误发布到

当我查看控制台提供的链接时，我得到以下信息：无法更新：com.google.appengine.tools.admin.HttpIoException：错误发布到 URL：[https ://appengine.google.com/api/appversion/ getresourcelimits?app_id=Project&version=1&](https://appengine.google.com/api/appversion/getresourcelimits?app_id=Project&version=1&) 400 错误请求

客户端错误 (400) 由于未指定的原因，请求无效。

```
at com.google.appengine.tools.admin.AbstractServerConnection.send1(AbstractServerConnection.java:293)
at com.google.appengine.tools.admin.AbstractServerConnection.send(AbstractServerConnection.java:253)
at com.google.appengine.tools.admin.AbstractServerConnection.post(AbstractServerConnection.java:232)
at com.google.appengine.tools.admin.ResourceLimits.remoteRequest(ResourceLimits.java:171)
at com.google.appengine.tools.admin.ResourceLimits.request(ResourceLimits.java:138)
at com.google.appengine.tools.admin.AppAdminImpl.doUpdate(AppAdminImpl.java:366)
at com.google.appengine.tools.admin.AppAdminImpl.update(AppAdminImpl.java:53)
at com.google.appengine.eclipse.core.proxy.AppEngineBridgeImpl.deploy(AppEngineBridgeImpl.java:433)
at com.google.appengine.eclipse.core.deploy.DeployProjectJob.runInWorkspace(DeployProjectJob.java:148)
at org.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:38)
at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53) 
```

谁能给我一些指导来解决这个问题，以便我可以部署我的应用程序？任何反馈将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T12:47:28.823

它是否在 Eclipse 中本地运行？

您的 appengine-web.xml 是否使用您注册的应用程序 ID 正确设置？

[谷歌入门指南在这里](https://developers.google.com/appengine/docs/java/gettingstarted/creating)

# c# - 使用 System.Security.Cryptography 的 C# 实现 Unix crypt

> ID：15499763
> 
> 赞同：4
> 
> 时间：2013-03-19T12:39:08.433
> 
> 标签：c#, .net, security, cryptography, des

忽略 DES 提供的弱安全性，我正在寻找 Unix crypt() 函数的 C# 实现，该函数使用 .net 框架的 Cryptography 命名空间中的类/方法。

我发现了这个： http: [//www.codeproject.com/Articles/9183/AC-implementation-of-Unix-crypt](http://www.codeproject.com/Articles/9183/A-C-implementation-of-Unix-crypt)

但我想知道是否有使用`DESCryptoServiceProvider`等更短的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-08-13T20:17:06.620

您提到的 Unix crypt 的实现相当慢。

[这](https://gist.github.com/aannenko/d47c90b0f92177286bb9814850888920)是一个用 C# 编写的 crypt(3) 的独立轻量级且非常高效的实现，它利用[`Span<T>`](https://docs.microsoft.com/en-us/dotnet/api/system.span-1)类型来保存和转换数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-07T12:30:06.037

传统的和扩展的 DES crypt salting 都置换了[扩展函数](http://en.wikipedia.org/wiki/DES_supplementary_material#Expansion_function_.28E.29)的结果。对于我在 salt 中设置的每个位，它们交换扩展函数结果的位 i 和 i+24。

因为这发生在轮中，除非盐值为零（意味着没有发生排列），所以不可能使用框架加密。

尽管如此，重新实现 DES 所花费的时间不会超过一两个千字节。我的[CryptSharp](http://www.zer7.com/software.php?page=cryptsharp)库实现了传统和扩展的 DES、MD5、SHA256、SHA512 和 bcrypt 算法。对于 MD5 和两种[SHA 加密](http://www.akkadia.org/drepper/SHA-crypt.txt)方法（方法 $1$、$5$ 和 $6$），它使用框架加密。如果您不必使用 DES crypt 方法，请查看 ShaCrypter.cs——它相当短。

# c# - 将面板旋转 90º

> ID：15499764
> 
> 赞同：1
> 
> 时间：2013-03-19T12:39:12.723
> 
> 标签：c#, winforms, visual-studio

我在 winform 中有一个面板，单击按钮时需要将其旋转 90 度。

我在谷歌和其他问题中寻找这个，但他们没有答案....

这是我的面板![在此处输入图像描述](../Images/3ad8a41ca1dd9a57b609d828c0f3cce0.png)

以及我的需要

![在此处输入图像描述](../Images/bb4dc5abb9644827383349dde8b10e00.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:49:47.127

据我所知，没有办法在 WinForms 中旋转面板。

要旋转窗体上的对象，我一直不得不使用 WPF。

这是 WPF 的介绍：http: [//www.codeproject.com/Articles/18232/A-Guided-Tour-of-WPF-Part-1-XAML](http://www.codeproject.com/Articles/18232/A-Guided-Tour-of-WPF-Part-1-XAML)

关于轮换的具体部分在关于数据绑定的第 3 部分中。

# c++ - 模板参数类型为字符串

> ID：15499766
> 
> 赞同：4
> 
> 时间：2013-03-19T12:39:22.787
> 
> 标签：c++, templates, typeof

我有代码：

```
template<class T>
class MyClass{
    MyClass(){
       std::cout << MY_MACRO(T);
    }
}; 
```

是否可以编写将模板参数类型作为字符串返回的宏？如果是，如何？

例如，

```
MyClass<int> ins; // print 'int' to console 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:58:19.987

正如其他几个人提到的那样，您可以使用 RTTI 做一些事情，但我认为这并不是您想要的：

```
#include <typeinfo>
#include <iostream>
#include <string>

#define MY_MACRO(obj) typeid(obj).name()

template<class T>
class MyClass {
    public:
        MyClass(){
            T b;
            std::cout << MY_MACRO(b) << std::endl;
        }
};

class TestClass {};

int main(int argc, char** argv) {
    MyClass<std::string> a;
    MyClass<int> b;
    MyClass<TestClass> c;
    return 0;
} 
```

输出：

```
Ss
i
9TestClass 
```

感谢@MM 的评论 - 如果您使用的是 gcc 并且不介意将宏变成您可以使用的函数`abi::__cxa_demangle`。你需要包括`cxxabi.h`

```
size_t size;
int status;
std::cout << abi::__cxa_demangle(typeid(obj).name(), NULL, &size, &status) << std::endl; 
```

输出：

```
std::string
int
TestClass 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T12:46:54.583

您可以为此使用重载函数

```
std::string MY_MACRO(int) { return "int"; } 
```

用作`std::cout << MY_MACRO( T() );`，但您需要为用作模板参数的每种类型定义此类函数。

或者您可以通过`typeid`函数使用运行时类型识别。

# c# - 从一个存储日期 在 MSSQL 的“日期”字段中

> ID：15499777
> 
> 赞同：1
> 
> 时间：2013-03-19T12:39:47.157
> 
> 标签：c#, asp.net, sql-server, datetime

我真的很难从中获取日期`<asp:TextBox>`并将其存储在我的 MSSQL 数据库中的“日期”类型字段中。目前我的代码忽略了我的文本框值，并存储了当前日期。我希望有人能帮帮忙！

这是我的代码，我收集这样的日期：

```
DateTime end = DateTime.Now;
end = Convert.ToDateTime(txtEndDate.Text); 
```

然后这一行与我的查询结合使用，绑定参数。

```
AppendNews.Parameters.Add(new SqlParameter("@show_to", end)); 
```

只是出于兴趣，当我在本地主机上运行程序时，一切正常！

问候

亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:45:32.923

尝试使用：

```
bool isDateValid = DateTime.TryParseExact(
txtEndDate.Text,"dd/MM/yyyy",
System.Globalization.CultureInfo.InvariantCulture,
DateTimeStyles.None,out end) 
```

这将尝试使用定义的格式解析字符串，如果格式无效则返回 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:49:18.877

使用更强的错误检查[DateTime.TryParse](http://msdn.microsoft.com/en-us/library/ch92fbc1.aspx)。您的 DateTime 可能无法正确解析。

```
DateTime end;

if(!DateTime.TryParse(txtEndDate.Text, out end))
{
    throw new FormatException("End Date must be in a valid format");
} 
```

我会使用[SqlParameterCollection.AddWithValue](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx)或指定您的`SqlDbType`.

```
AppendNews.Parameters.AddWithValue("@show_to", end); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T20:28:25.083

问题实际上是因为 ASP 服务器的文化与数据库服务器不匹配。为了解决这个问题，需要在 ASP 项目的 web.config 文件中设置文化。这样做，作为`<system.web>`包装的一部分。

```
<globalization uiCulture="en-GB" culture="en-GB"/> 
```

然后，当您从您的

```
DateTime dFrom = DateTime.ParseExact(txtDate.Text, "dd/MM/yyyy", CultureInfo.CurrentUICulture); 
```

希望这可以帮助！

# php - 将多个输入分组到 $_POST

> ID：15499783
> 
> 赞同：2
> 
> 时间：2013-03-19T12:40:01.670
> 
> 标签：php, forms, post, input

我不知道如何解决这个脚本：在第 1 点，我需要一个 $data 数组，其中包含一种成分、数量和 um

这是html部分：

```
...
<tr>
  <td><input name="cantitate[1]" class="cantitate" /></td>
  <td><select name="unitate[1]"><?=$display->selectAmount()?></select></td>
  <td><input name="ingredient[1]" class="ingredient" /></td>
</tr>
... 
```

这是php部分：

```
// ingredients
$ingredients = $_POST['ingredient'];
$amount = $_POST['cantitate'];
$um = $_POST['unitate'];

foreach($_POST as $key => $value){ 

 $data = null;
 if(isset($_POST['ingredient']) && !empty($_POST['ingredient']) && $_POST['ingredient']!=''){

    if($key=='cantitate') $data['amount'] = $value;
    if($key=='unitate') $data['um'] = $value;
    if($key=='ingredient') $data['ingredient'] = $value;                    

    //var_dump($data);
    // point 1
    // here will be the function to add one ingredient with one um, and one amount
 }

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:47:01.910

我认为你应该尝试制作

```
<tr>
  <td><input name="entry[1][cantitate]" class="cantitate" /></td>
  <td><select name="entry[1][unitate]"><?=$display->selectAmount()?></select></td>
  <td><input name="entry[1][ingredient]" class="ingredient" /></td>
</tr> 
```

从哪里来`1`。

然后你可以得到一个包含所有请求的大数组

```
$data = $_POST['entry'] 
```

并遍历它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T12:42:54.520

如果我理解正确，你可以这样做：

```
<tr>
<td><input name="data[]" class="cantitate" /></td>
<td><select name="data[]"><?=$display->selectAmount()?></select></td>
<td><input name="data[]" class="ingredient" /></td>
</tr> 
```

对于 PHP：

```
<?php 
$data = $_POST['data']);
print_r($data); //$data[0] == cantitate, $data[1] == unitate
?> 
```

# c++ - C ++读取文本文件直到特定分隔符

> ID：15499790
> 
> 赞同：2
> 
> 时间：2013-03-19T12:40:21.893
> 
> 标签：c++, delimiter, readfile

好的，所以我有一个巨大的文件，我想一次读一章。一章由 分隔`'$'`。我还不太熟悉 C++，所以我做了一些可以在一章中阅读的内容，就像我期望在 C/C++ 中那样。

```
#include <nds.h>
#include <stdio.h>
#include <string>
#include <vector>
#include <sstream>

int dataFileLoc = 7;

std::string fileReader(){
    FILE * dataFile;
    std::string chapterBuffer = "";
    const int buffersize = 1024;
    char charBuffer[buffersize];
    bool foundEnd = false;
    dataFile = fopen("xc3_.tsc", "rt");//open data file
    fseek(dataFile,dataFileLoc,SEEK_SET);
    while(!foundEnd){
        fread(charBuffer,1,buffersize,dataFile);
        for(int i=1; i<buffersize; i++){
            if(charBuffer[i] == '$'){
                foundEnd = true;
                charBuffer[i] = '\0';
                dataFileLoc = ftell(dataFile)-(buffersize-i);
                break;//break to spare some time
            }
        }
        chapterBuffer.append(charBuffer);
    }
    fclose(dataFile);//done with the file for now.

    checkerTemp(chapterBuffer);

    return chapterBuffer;
} 
```

结果应该没问题。我还没有到达文件末尾。所以它可能会在那里失败。然而，它似乎是随机的（一致的，但在看似随机的位置）。失败将导致在字符串中注入垃圾数据（如 8 个字符），然后再次注入正常数据。

有谁知道可能导致这种情况的原因，或者有没有人有更合适的 C++ 方法来做到这一点？带有字符串阅读器的东西？

提前致谢，

-Smileynator

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T13:29:25.173

您正在使用 C 文件 API，您应该使用 C++ iostream API。

要阅读章节，您应该使用`std::getline`with`'$'`作为分隔符参数。这意味着您无需担心缓冲区分配，因为字符串对象会自动分配它。

循环也变得非常简单。

```
while(std::getline(strm, str, '$').good())
    do_something_with_chapter(str); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T13:00:56.533

一个错误是，如果你的 while 循环循环，那么语句

```
chapterBuffer.append(charBuffer); 
```

将尝试将未终止的字符缓冲区附加到 chapterBuffer 中 - 这不是一件好事。无论您是否找到“$”，您都必须在 for 循环中维护；如果你没有，那么你将不得不终止 charBuffer；或者您可以为 charBuffer 分配 buffersize + 1 个字节，并在循环之前设置 charBuffer[buffersize] = '\0';

# ruby - ruby sinatra Web 应用程序中出现奇怪的“找不到文件”错误

> ID：15499791
> 
> 赞同：0
> 
> 时间：2013-03-19T12:40:24.707
> 
> 标签：ruby, sinatra, thin, slim-lang

我正在使用 mongodb 数据库创建一个 sinatra Web 应用程序。我使用 mongomapper 进行映射。Web 服务器很薄，我使用 slim 作为模板语言。

文件 ./config/config.ru：

```
$_DB_SERVER = "localhost"
$_APP_PATH = "~/Documents/Aptana_Workspace/Parameters_crud"

require 'bundler/setup'
Bundler.require(:default)

require "#{$_APP_PATH}/main.rb"
require "#{$_APP_PATH}/models/parameter.rb"

map '/' do
  run CORE::Main
end 
```

文件 main.rb：

```
module CORE

  class Main < Sinatra::Base
    use Rack::Flash

    configure :development do

      enable :sessions, :logging, :dump_errors, :inline_templates
      enable :methodoverride
      set :root, $_APP_PATH
      logger = Logger.new($stdout)

    end

    get '/' do
      slim :index
    end
  end
end 
```

**结尾**

遇到的错误：

```
Errno::ENOENT at /
No such file or directory - ~/Documents/Aptana_Workspace/Parameters_crud/views/index.slim 
```

我 100% 确定这个文件确实存在。此错误的原因可能是什么？如果您需要更多信息，请发表评论...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:43:43.830

尝试`File.expand_path`像这样使用 -

```
$_APP_PATH = File.expand_path("~/Documents/Aptana_Workspace/Parameters_crud", __FILE__) 
```

# android - 启动活动 4 时从后台堆栈中删除活动 2 和 3

> ID：15499794
> 
> 赞同：7
> 
> 时间：2013-03-19T12:40:39.003
> 
> 标签：android, android-intent

我有 4 个 Android 活动。我们称它们为**A**、**B**、**C**、**D**。

正常流程是**A => B => C => D**。但是，当我输入**D**时，我想从后堆栈中删除**B**和**C。**

可以解决吗？

请注意，如果用户在**C**中并按下回，则**B**仍应显示！

**编辑：**使用 CLEAR_TOP 再次启动活动 A 确实在我不想要的活动 A 上再次调用 onCreate 。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-21T13:03:29.107

我知道这是一个老问题，但我最近遇到了同样的问题，在任何地方都找不到解决方案。我可以开始工作的唯一解决方案是有点破解：

使用 startActivityForResult从**B**开始**C。**

 **```
Intent intent=new Intent(this,C.class);
startActivityForResult(intent,REQUEST_CODE); 
```

在 Activity **C中，为 Activity** **D**创建意图并将其设置为结果：

```
Intent intent=new Intent(this,D.class);
setResult(RESULT_OK,intent)
finish(); 
```

在 Activity **B**中，完成并启动从 Activity **C**返回的意图：

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode==REQUEST_CODE) {
        finish();
        startActivity(data);
    }
} 
```

此时，活动**B**和**C**都将完成，活动堆栈将为**A => D**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:46:02.127

*   [使用 Intent 标志FLAG_ACTIVITY_NEW_TASK](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NEW_TASK)从 A 开始 B以开始新任务。
*   [使用 Intent 标志FLAG_ACTIVITY_CLEAR_TASK](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TASK)从 C 开始 D以清除最后启动的任务。为了向后兼容，您可以使用[IntentCompat.FLAG_ACTIVITY_CLEAR_TASK](http://developer.android.com/reference/android/support/v4/content/IntentCompat.html#FLAG_ACTIVITY_CLEAR_TASK)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-19T12:45:09.790

FLAG_ACTIVITY_CLEAR_TOP 清除您的 Activity 堆栈，您可以像下面的代码一样使用它：

```
intent = new Intent(this, YourActivity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
StartActivity(intent); 
```**

# html - 标题箭头始终与标题一起位于右侧

> ID：15499795
> 
> 赞同：1
> 
> 时间：2013-03-19T12:40:45.977
> 
> 标签：html, css, css-shapes

我需要将右侧箭头始终保持在标题的右侧，但在某些情况下只有箭头向下。（如果您移动小提琴预览手柄，您可能会看到）。以下是 HTML 结构和使用的 css。

```
<div class="headline">
  <h3>
    <a href="#">Bowie comeback reaches number six<span class="arrow">&nbsp;</span></a>
  </h3>
</div> 
```

**CSS**：

```
.headline {
    padding: 15px 12px 12px;
}
h3 {font-size:30px;}
.arrow{
    background: transparent url(http://blog.sameerast.com/wp-content/themes/elements-of-seo_1.4/images/bullet.gif) no-repeat;
    display: inline-block;
    height: 22px;
    margin-left: 5px;
    margin-top: 0;
    position: relative;
    top: 10px;
    width: 15px;
} 
```

小提琴：http: [//jsfiddle.net/9Mst7/](http://jsfiddle.net/9Mst7/)

我有其他方法或最好的方法来赢得这个吗？

**更新**：当标题出现在第二行时，箭头也应该坐在旁边。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T13:00:00.647

删除跨度并将箭头图标添加为锚点上的背景图像`<a>`。

HTML：

```
<div class="headline">
  <h3>
    <a href="#" class="arrow">Bowie comeback reaches number six ddd</a>
  </h3>
</div> 
```

CSS：

```
.headline {
    padding: 15px 12px 12px;
}
h3 {font-size:30px;}
.arrow{
    padding-right: 10px;
    background: transparent url(http://blog.sameerast.com/wp-content/themes/elements-of-seo_1.4/images/bullet.gif) right center no-repeat;
} 
```

这是小提琴：http: [//jsfiddle.net/6R6Ar/2/](http://jsfiddle.net/6R6Ar/2/)

# python - 寻找 stop_codon

> ID：15499796
> 
> 赞同：1
> 
> 时间：2013-03-19T12:40:48.057
> 
> 标签：python, regex, python-2.7, bioinformatics

我试图在我的 cds 中找到起始和终止密码子。我使用了正则表达式，但是当我运行这个 python 脚本时，我得到了一个空的终止密码子列表。任何帮助是极大的赞赏。

```
std_code = {"TTT":"F|Phe","TTC":"F|Phe","TTA":"L|Leu","TTG":"L|Leu","TCT":"S|Ser","TCC":"S|Ser",
            "TCA":"S|Ser","TCG":"S|Ser", "TAT":"Y|Tyr","TAC":"Y|Tyr","TAA":"*|Stp","TAG":"*|Stp",
            "TGT":"C|Cys","TGC":"C|Cys","TGA":"*|Stp","TGG":"W|Trp", "CTT":"L|Leu","CTC":"L|Leu",     
            "CTA":"L|Leu","CTG":"L|Leu","CCT":"P|Pro","CCC":"P|Pro","CCA":"P|Pro","CCG":"P|Pro",
            "CAT":"H|His","CAC":"H|His","CAA":"Q|Gln","CAG":"Q|Gln","CGT":"R|Arg","CGC":"R|Arg",
            "CGA":"R|Arg","CGG":"R|Arg", "ATT":"I|Ile","ATC":"I|Ile","ATA":"I|Ile","ATG":"M|Met",
            "ACT":"T|Thr","ACC":"T|Thr","ACA":"T|Thr","ACG":"T|Thr", "AAT":"N|Asn","AAC":"N|Asn",
            "AAA":"K|Lys","AAG":"K|Lys","AGT":"S|Ser","AGC":"S|Ser","AGA":"R|Arg","AGG":"R|Arg",
            "GTT":"V|Val","GTC":"V|Val","GTA":"V|Val","GTG":"V|Val","GCT":"A|Ala","GCC":"A|Ala",
            "GCA":"A|Ala","GCG":"A|Ala", "GAT":"D|Asp","GAC":"D|Asp","GAA":"E|Glu",
            "GAG":"E|Glu","GGT":"G|Gly","GGC":"G|Gly","GGA":"G|Gly","GGG":"G|Gly"}

cds = ("ATGCTAGCGGTAAATCGTGAATAGGCCTAA")
for i in range (0, len(cds),3):
    print cds[i:i+3]

def translate (cds, std_code):
    protein = ""
    for i in range (0,len(cds),3):
        codon = cds[i:i+3]
        protein = protein + std_code[codon]
    return protein
print translate(cds, std_code)
def codon_usage(cds):
    usage = {}
    for i in range(0,len(cds),3):
        codon = cds[i:i+3]
        if usage.has_key(codon):
            usage[codon] += 1
        else:
            usage[codon] = 1
    return usage
print codon_usage(cds)

import re
pat = '(ATG)+?(?:TAA|TGA|TAG)'
reg = re.compile(pat)
def stop_codons(cds, messages=None,s=0,reg=reg):
    stop_codons = []
    while True:
        ma = reg.search(cds[s:])
        if ma:
            if ma.group(1) == 'ATG':
                break
            else:
                stop_codons.append(ma.group.upper())
                s = s + ma.start() + 1
        else:
            break
    return stop_codons
print stop_codons(cds, messages=None, s=0,reg=reg) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T14:19:42.303

你考虑过使用[Biopython](http://biopython.org)吗？它具有各种用于处理序列的内置工具，如果您正在做与生物信息学相关的任何事情，可以为您节省大量时间。特别是，该[`Seq`](http://biopython.org/wiki/Seq)对象正是您要查找的内容：

```
>>> from Bio.Seq import Seq
>>> from Bio.Alphabet import generic_dna
>>> my_dna = Seq("AGTACACTGGT", generic_dna)
>>> my_dna
Seq('AGTACACTGGT', DNAAlphabet())
>>> my_dna.find("ACT")
5 
```

我强烈建议阅读[教程](http://biopython.org/DIST/docs/tutorial/Tutorial.html#htoc16)和[API 文档](http://biopython.org/DIST/docs/api/Bio.Seq-module.html)以查找有关字母、密码子表 ( `Bio.Data.CodonTable`) 等内容的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T14:39:55.507

`stop_codons`我发现您的功能存在一些问题。首先，您的正则表达式：

```
(ATG)+?(?:TAA|TGA|TAG) 
```

正如它所写的，这是搜索起始密码子的重复，然后是终止密码子。如果你写的正则表达式匹配，它只会返回起始密码子，没有别的。如果您想在起始密码子之后找到第一个终止密码子，您可以尝试：

```
(?<=ATG)(?:[ACGT]{3})*(TAA|TGA|TAG) 
```

其次，如果您的正则表达式与起始密码子匹配，它将打破循环并返回您的列表`stop_codons`，假设您传递给此函数的每个序列在停止之前都包含一个起始密码子，则总是会导致返回一个空列表. 希望这可以帮助。

# php - 如何捕获数据库异常而不将其显示给浏览器？

> ID：15499800
> 
> 赞同：0
> 
> 时间：2013-03-19T12:40:58.323
> 
> 标签：php, mysql, codeigniter

我想从 codeigniter 2.1.3 中的查询错误或其他数据库错误中捕获异常并将其显示或隐藏在另一个模板中，而不是实际上在浏览器中。

我以前做过这样的事情：

```
//Setting in config/database.php
$db['default']['db_debug'] = FALSE; 

//then in the view
echo $this->db->_error_message(); 
echo $this->db->_error_number(); 
```

但是没有任何改变，我之前已经在数据库错误条件下设置了我的应用程序，以测试我是否可以捕获错误。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:49:53.820

我不知道 codeigniter 是否有一种特殊的方法可以做到这一点，但是在常规的 php 代码中，您可以只使用普通的 try catch 块。

```
try {
    // get data from database
    // use data
} catch (Exception $e) {
    // handle exception
} 
```

[http://php.net/manual/en/language.exceptions.php](http://php.net/manual/en/language.exceptions.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-26T09:58:46.813

如果有这样的问题，你可以抛出异常：

```
 try {
      //data from database

 } catch (\Exception $e) {
     throw new \Exception('Error: ' . $e->getMessage());
 } 
```

# sql - SQL：过滤 where 子句中的 case-statement 数据替换

> ID：15499805
> 
> 赞同：1
> 
> 时间：2013-03-19T12:41:16.437
> 
> 标签：sql, sql-server, where

如果我有一个名为“Beasties”的表，并且我想对列中的数据值进行一些条件替换，例如 Animal，然后过滤该列，我会尝试这样做......

```
SELECT 
   (CASE Animal 
    WHEN 'Horse' THEN 'Zebra' 
    ELSE Animal
    END) AS Species
FROM Beasties 
WHERE Species='Zebra' 
```

但是 T-SQL 不允许 WHERE 子句，它只会让我使用 Animal 而不是 Species。如何过滤重命名（并因此编辑）的列值？

提前感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T12:44:39.720

做这个：

```
SELECT 
   (CASE Animal 
    WHEN 'Horse' THEN 'Zebra' 
    ELSE Animal
    END) AS Species
FROM Beasties 
WHERE 'Zebra'=(CASE Animal WHEN 'Horse' THEN 'Zebra'  ELSE Animal END) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T12:50:14.780

您可以将其粘贴在子查询中：

```
SELECT *
FROM (
    SELECT 
       (CASE Animal 
        WHEN 'Horse' THEN 'Zebra' 
        ELSE Animal
        END) AS Species
    FROM Beasties
)
WHERE Species='Zebra' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T12:44:38.673

我不知道是否有一种特别优雅的方式来做到这一点，但如果没有，这应该可以工作：

```
WHERE Animal IN ('Horse', 'Zebra') 
```

# linux - 需要 Grep 命令说明

> ID：15499816
> 
> 赞同：-2
> 
> 时间：2013-03-19T12:41:38.537
> 
> 标签：linux, bash, shell, awk, grep

谁能给我解释一下这个 grep 命令

```
grep "click" /opt/tomcat/logs/localhost_access_log.2013-03-19.txt \
  | awk -F: '{if (($3 >= $hr) && ($4 >= $min)) print $0}' | wc -l 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:48:56.097

`Grep`查找包含字符串的所有行`click`。这些行被传递给`awk`它只打印第三个字段大于或等于 shell 变量`$hr`的行，第四个字段大于或等于`$min`字段分隔符所在的shell 变量`:`*（尽管这些 shell 变量不会是由于引用而扩展）*。`wc -l`然后用于计算匹配的数量。目前，由于 shell 变量未扩展，管道不会显示预期的行数。

您的管道可以用一个简单的脚本替换*（和修复） ：*`awk`

```
$ hr=3
$ min=23
$ awk -F: -v h="$hr" -v m="$min" '/click/ && $3 >= h && $4 >= m{c++}END{print c}' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:46:20.433

管道中有三个过程：

1.  `grep`从日志文件中查找包含单词“click”的所有行并将它们传递给`awk`.
2.  `awk`使用`:`分隔符将行分成字段。如果第三个字段大于指定`hr`的并且第四个字段大于指定的，它会打印出该行`mins`，尽管我看不到您在哪里设置`$hr`and `$min`。
3.  最后，`wc`计算由 打印的行数`awk`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T12:48:56.143

`grep "click" /opt/tomcat/logs/localhost_access_log.2013-03-19.txt``click`在给定文件中 搜索单词

`awk -F: '{if (($3 >= $hr) && ($4 >= $min)) print $0}'`使用分隔符从 grep 中拆分每个结果`:`。如果第 3 个元素大于`$hr`且第 4 个元素大于`$min`，则打印第一个元素。

`wc -l`计算所有打印的元素。

因此，该命令似乎正在计算日志文件中有多少行的时间戳大于指定的小时和分钟。

# c - C 中的 select()：罗塞塔石碑？

> ID：15499819
> 
> 赞同：2
> 
> 时间：2013-03-19T12:41:45.600
> 
> 标签：c, select, file-io

[`select()`](http://linux.die.net/man/2/select)就设置哪些标志而言，大多数情况下是直截了当的：

*   r 如果数据是可读的，
*   w 如果它是可写的，
*   e 用于套接字紧急数据

但是这个规则有很多例外（或者，也许是非平凡的扩展）：'w' 设置为一个已完成的非阻塞连接，'r' 设置为`listen()`一个挂起的连接`accept()`，等等。

有没有人找到在什么情况下设置哪些标志的简单列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:57:47.343

从[这个参考页面](http://pubs.opengroup.org/onlinepubs/009695399/functions/select.html)：

> `O_NONBLOCK`当使用clear 调用输入函数不会阻塞时，无论该函数是否会成功传输数据，都应认为描述符已准备好读取。（该函数可能返回数据、文件结束指示或指示它被阻塞的错误以外的错误，并且在这些情况下，描述符应被视为已准备好读取。）
> 
> `O_NONBLOCK`当使用clear 调用输出函数不会阻塞时，无论该函数是否会成功传输数据，都应认为描述符已准备好写入。
> 
> 如果一个套接字有一个未决的错误，它应该被认为有一个异常条件未决。否则，构成异常的条件是特定于文件类型的。

除了特殊集合中的描述符之外，它非常清楚。如果阻塞描述符（无论是文件、套接字还是其他描述符）不会阻塞，则在其各自的集合中将其标记为就绪。接受和接收是“读”操作，而连接和写是“写”操作。

唯一有问题的是异常状态，这取决于您在集合中传递的描述符类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:07:16.173

select 的参考，为 select 的使用提供了建议

[http://man7.org/linux/man-pages/man2/select_tut.2.html](http://man7.org/linux/man-pages/man2/select_tut.2.html)

# magento - Magento - 管理现有类别的选项不会加载

> ID：15499827
> 
> 赞同：0
> 
> 时间：2013-03-19T12:42:17.397
> 
> 标签：magento

我确信在某个地方会有答案，但我似乎无法在这里找到它。

我最近将我的磁存储从我的本地主机移动到实时服务器 - 到目前为止一切都相对顺利，但我遇到了几个问题：

1：在“管理类别”部分中，我可以在刷新页面后创建出现在左栏中的新类别-但是单击这些现有类别进行编辑将无济于事（我只是收到一条加载消息，之后没有任何反应-它只保留在“新根类别”选项卡上，如下所示）。

![在此处输入图像描述](../Images/2a55bdea7683c8ccc3cf478d6b1afcf7.png)

2：编辑现有 CMS 页面时出现类似问题 - 我可以编辑页面并保存更改，但不会生效 - 网站不会更新，当我返回编辑选项时，我所做的所有更改都有被撤销。

我尝试了几件事（重新索引，刷新缓存），但还没有任何效果。显然，从本地主机移动时出现了问题，但我无法弄清楚是什么。

非常感谢任何有关此问题的帮助。

编辑：我也尝试过创建一个新产品——它一直在工作，直到我去选择一个类别——其他一切正常，但单击类别选项卡没有任何作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:53:18.683

我以前做过很多 Magento 转移。这些是我采取的步骤：

1.  复制 Magento 文件。
2.  复制数据库。
3.  打开`app/etc/local.xml`并更新数据库连接信息。
4.  在数据库表中`core_config_data`，将两个值更改为`path`等于`web/unsecure/base_url`和`web/secure/base_url`正确的站点 URL。
5.  在 Magento 根目录下，删除`/var/cache/`/var/session/下的所有文件
6.  `CHOWN`使用shell将所有文件的所有者更改为正确的 Web 用户。

在您的情况下，这可能是 URL 重写的问题。尝试截断您的`core_url_rewrite`表格并查看它可以解决问题。

**编辑**

他收到与`mod_security`阻止 ajax 请求有关的 406 错误消息。禁用`mod_security`解决了这个问题。

# android - 即使在我广播并销毁它之后，我的 android 服务也没有停止

> ID：15499828
> 
> 赞同：0
> 
> 时间：2013-03-19T12:42:18.797
> 
> 标签：android

```
 sendBroadcast(intent2);
                stopSelf(); 
```

知道如何停止这个......因为即使在它停止之后它也在进行 REST 调用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:21:35.360

试试这个，希望对你有帮助

```
 stopService(intent2). 
```

[或在启动和停止服务](http://www.edumobile.org/android/android-programming-tutorials/use-of-services/)后查看此链接

# sql - 如何 sql server page_number 像 row_number

> ID：15499830
> 
> 赞同：0
> 
> 时间：2013-03-19T12:42:19.570
> 
> 标签：sql, sql-server, tsql, pagination

当前上下文：分页查询结果

我需要知道是否有某种方法可以在我的查询中获取计算值，例如 row_number，它计算特定行数的下一个新值。

如果我使用 row_number ，它将在我的结果中的标识列上生成一种类型，我想要在指定的行数上生成它。像这样：

每页行数：3

```
RowNum, PageNum, Value
1, 1, rowa
2, 1, rowb
3, 1, rowc
4, 2, rowd
5, 2, rowe
6, 2, rowf
7, 3, rowg 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:46:05.463

使用[排名函数](http://msdn.microsoft.com/en-us/library/ms189798.aspx), 和`<partition_by_clause>`, 其中：

> 将 FROM 子句生成的结果集划分为应用 ROW_NUMBER 函数的分区。有关 PARTITION BY 的语法，请参阅 OVER 子句。

例如`ROW_NUMBER() OVER(PARTITION BY ... ORDER BY ...)`：

```
WITH CTE
AS
(
   SELECT *,
     ROW_NUMBER() OVER(PARTITION BY PageNum
                       ORDER BY Id) AS  Rownumber
   FROM tablename
) 
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T12:50:43.193

这应该有效：

```
WITH CTE AS
(
   SELECT 
      RowNum = ROW_NUMBER()OVER (ORDER BY Value ASC),
      Value
   FROM 
      dbo.TableName
)
SELECT 
   RowNum,
   PageNum = ((RowNum - 1) / 3) + 1,
   Value
FROM 
   CTE
ORDER BY 
   RowNum ASC 
```

[**演示**](http://sqlfiddle.com/#!6/8690f/4/0)

当然`3`应该是一个参数。

# ruby-on-rails - 调用 DC.flush_all 会清除整个缓存，在使用乘客时也是如此？

> ID：15499831
> 
> 赞同：0
> 
> 时间：2013-03-19T12:42:20.317
> 
> 标签：ruby-on-rails, memcached, passenger, dalli

我正在使用 Phusion 乘客和 memcached (Dalli Gem)。我想清除完整的缓存（类似于运行 telnet localhost 11211 然后在 telnet 命令上运行 flush_all）。

是否保存运行：

```
DC.flush_all 
```

在分叉的 Phusion 乘客设置中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:36:28.277

打电话`Rails.cache.clear`呢？

# javascript - 当用户单击内部链接时显示 html 页面的一部分

> ID：15499833
> 
> 赞同：-1
> 
> 时间：2013-03-19T12:42:25.367
> 
> 标签：javascript, css, html

我试图让浏览我创建的 html 页面变得更容易。页面开头的链接服务于部分跳转。现在我想隐藏 DIV 内容并仅在有人加载页面时保留内部链接，然后当用户单击内部链接时，只应向用户显示与 DIV 关联的内容。我应该使用哪些脚本？

我还想包含一个按钮，允许用户在阅读完显示的部分后关闭/隐藏内容，并通过内部链接进入主页。

```
<h3>Antithyroid Drugs</h3>
    <ul>
                <li><a href="#thioamides">Thioamides</a></li>
                <li><a href="#iodine_salts">Iodide Salts and Iodine</a></li>
                <li><a href="#radioactive_iodine">Radioactive Iodine</a></li>
                <li><a href="#anion_inhibitors">Anion Inhibitors</a></li>
                <li><a href="#others">Other Drugs</a></li>
    </ul>

    <div id="thioamides">
    Thioamides
    Methimazole and propylthiouracil (PTU) are small sulfur-containing thioamides that inhibit thyroid hormone synthesis by blocking peroxidase-catalyzed reactions, iodination of the tyrosine residues of thyroglobulin, and coupling of DIT and MIT (Figure 38–1). Propylthiouracil and, to a much lesser extent, methimazole inhibit peripheral conversion of T4 to T3\. Because the thioamides do not inhibit the release of preformed thyroid hormone, their onset of activity is usually slow, often requiring 3–4 wk for full effect. The thioamides can be used by the oral route and are effective in young patients with small glands and mild disease. Methimazole is generally preferred because it can be administered once per day. However, PTU is preferred in pregnancy because it is less likely than methimazole to cross the placenta and enter breast milk. Toxic effects include skin rash (common) and severe reactions (rare) such as vasculitis, agranulocytosis, hypoprothrombinemia, and liver dysfunction. These effects are usually reversible.
    </div>

    <div id="iodine_salts">
    Iodide Salts and Iodine
    Iodide salts inhibit iodination of tyrosine and thyroid hormone release (Figure 38–1); these salts also decrease the size and vascularity of the hyperplastic thyroid gland. Because iodide salts inhibit release as well as synthesis of the hormones, their onset of action occurs rapidly, within 2–7 d. However, the effects are transient; the thyroid gland "escapes" from the iodide block after several weeks of treatment. Iodide salts are used in the management of thyroid storm and to prepare patients for surgical resection of a hyperactive thyroid. The usual forms of this drug are Lugol's solution (iodine and potassium iodide) and saturated solution of potassium iodide. Adverse effects include rash, drug fever, metallic taste, bleeding disorders, and, rarely, anaphylactic reactions.
    </div>

    <div id="radioactive_iodine">
    Radioactive Iodine
    Radioactive iodine (131I) is taken up and concentrated in the thyroid gland so avidly that a dose large enough to severely damage the gland can be given without endangering other tissues. Unlike the thioamides and iodide salts, an effective dose of 131I can produce a permanent cure of thyrotoxicosis without surgery. 131I should not be used in pregnant.
    </div>

    <div id="anion_inhibitors">
    Anion Inhibitors
    Anions such as thiocyanate (SCN–) and perchlorate (ClO4–) block the uptake of iodide by the thyroid gland through competitive inhibition of the iodide transporter. Their effectiveness is unpredictable and ClO4– can cause aplastic anemia, so these drugs are rarely used clinically.
    </div>

    <div id="others">
    Other Drugs
    An important class of drugs for the treatment of thyrotoxicosis is the  blockers. These agents are particularly useful in controlling the tachycardia and other cardiac abnormalities of severe thyrotoxicosis. Propranolol also inhibits the peripheral conversion of T4 to T3.
    </div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T12:45:33.270

因为纯 CSS 解决方案`:target`将为您工作。

[jsFiddle](http://jsfiddle.net/Tyriar/TzhPx/)

```
div { display:none; }
div:target { display:block; } 
```

至于显示所有按钮，您可以使用 JavaScript 按钮扩充此 CSS，该按钮将添加一个类以强制显示所有 div。

[jsFiddle](http://jsfiddle.net/Tyriar/8D6YQ/)

**JavaScript**

```
var showAll = document.getElementById('show-all');
showAll.onclick = function () {
    var divs = document.querySelectorAll('div');
    for (var i = 0; i < divs.length; i++) {
        divs[i].className = 'force-show';
    }
} 
```

**CSS**

```
div { display:none; }
div:target,
div.force-show { display:block; } 
```

## 支持

IE8 及以下不支持`:target`，如果 IE8 支持至关重要，那么您可能会想要更多的 JavaScript 解决方案。

[jsFiddle](http://jsfiddle.net/Tyriar/qVuZv/)

```
var showAll = document.getElementById('show-all');
var divs = document.querySelectorAll('div');
var links = document.querySelectorAll('a[href^="#"]');

showAll.onclick = function () {
    for (var i = 0; i < divs.length; i++) {
        divs[i].className = 'force-show';
    }
}

for (var i = 0; i < links.length; i++) {
    links[i].onclick = (function (i) {
        return function () {
            hideAllDivs();
            var linkDiv = document.getElementById(links[i].getAttribute('href').slice(1));
            linkDiv.className = 'force-show';
        }
    })(i);
}

function hideAllDivs() {
    for (var i = 0; i < divs.length; i++) {
        divs[i].className = '';
    }
} 
```

# android - 新纹理（Gdx.files.absolute（字符串））；给出模糊的输出

> ID：15499839
> 
> 赞同：0
> 
> 时间：2013-03-19T12:42:32.847
> 
> 标签：android, libgdx

我正在从相机拍摄照片并裁剪面部图像，然后保存裁剪后的图像。在使用该保存图像的路径之后，我将其作为 LibGdx 的纹理加载。

问题是，对于更高或等于 4.0.4 的 Android 版本，它不显示裁剪的图像，而是显示资产文件夹中的精灵表之一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T07:14:23.400

上面的代码用于加载纹理，但在执行语句后会加载纹理，因为它是在单独的线程中完成的。

由于您有裁剪的图像，因此不要将其保存到文件中，只需使用 Pixmap 类直接将其转换为纹理即可。

评论中的上述答案。也是一样的。

# ruby - 获取 Errno::ENOMEM：通过 Mechanize “获取”页面时空间不足

> ID：15499845
> 
> 赞同：0
> 
> 时间：2013-03-19T12:42:57.270
> 
> 标签：ruby, windows-console, mechanize-ruby

我目前正在尝试遵循有关网络抓取的教程，并且收到了 ruby​​ 错误消息“Errno::ENOMEM: 没有足够的空间”。我从[http://bugs.ruby-lang.org/issues/show/1063](http://bugs.ruby-lang.org/issues/show/1063)找到了一种解决方法，但我想知道是否有更永久的解决方案。我正在使用 ruby​​ 1.8.7 (2010-12-23 patchlevel 330) [i386-mingw32] 并且我无法更新到我怀疑可以解决此问题的新版本。仅当我尝试获取更大的页面时才会出现此问题。

当前解决方案：

```
class String
  def to_2d_array(value)
    unpack("a#{value}"*((size/value)+((size%value>0)?1:0)))
  end
end

class << $stdout
  alias old_write write

  def write(a) 
    a.to_s.to_2d_array(1024).each{|little| old_write little}
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:54:36.670

为了解决我的问题，我添加了：

```
class String
  def to_2d_array(value)
    unpack("a#{value}"*((size/value)+((size%value>0)?1:0)))
  end
end

class << $stdout
  alias old_write write

  def write(a) 
    a.to_s.to_2d_array(1024).each{|little| old_write little}
  end
end 
```

最后结束后到我的 irb.rb 文件。

# java - SingleBOdy 无法解析。它是从所需的 .class 文件中间接引用的

> ID：15499850
> 
> 赞同：0
> 
> 时间：2013-03-19T12:43:28.397
> 
> 标签：java, android

我正在为我的应用程序尝试这个解决方案： [使用 Http Post 发送图像](https://stackoverflow.com/questions/2935946/sending-images-using-http-post/15499598#15499598) 。（第一个答案）首先我遇到了 eclipse 不想导入外部 jar 的问题，当我解决了这个问题时我遇到了这个错误：

org.apache.james.mime4j.message.SingleBody 类型无法解析。它是从所需的 .class 文件中间接引用的

线上：

```
entity.addPart(nameValuePairs.get(index).getName(), new FileBody(new File(nameValuePairs.get(index).getValue()))); 
```

和

```
entity.addPart(nameValuePairs.get(index).getName(), new StringBody(nameValuePairs.get(index).getValue())); 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-09T12:43:57.253

很简单，您使用的jar文件是错误的文件..

同样的问题多次激怒我..

[从Grep 代码](http://grepcode.com/snapshot/repo1.maven.org/maven2/org.apache.james/apache-mime4j/0.6)下载 jar 文件， 这是**二进制下载**

**源下载**jar 文件中的包名不正确，如 org.apache.james.mime4j_.XXXXXX

并且**二进制下载**jar 文件中的包是正确的，如 org.apache.james.mime4j.XXXXXX

今天浪费了很多时间:(终于**解决了**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-27T21:02:43.420

有同样的问题并从[这里下载库（仅）](http://archive.apache.org/dist/james/mime4j/)解决问题。我确实从其他网站下载了他们只是没有解决问题。

# ios - 在 Xcode 中生成多页 PDF 文件

> ID：15499859
> 
> 赞同：2
> 
> 时间：2013-03-19T12:43:54.697
> 
> 标签：ios, xcode, pdf, paging

我正在尝试生成一个多页的 PDF 文件。我正在使用这段代码：

```
-(void)createPDFfromUI:(UIWebView *)aView saveToDocumentsWithFileName:(NSString*)aFilename
{
    // Creates a mutable data object for updating with binary data, like a byte array
    NSMutableData *pdfData = [NSMutableData data];

    // Points the pdf converter to the mutable data object and to the UIView to be converted

    UIWebView *myView = [[UIWebView alloc] init];

    [myView setBounds:CGRectMake(0,0, 320, 480)];

    UIGraphicsBeginPDFContextToData(pdfData, myView.bounds, nil);

    CGContextRef pdfContext = UIGraphicsGetCurrentContext();

    for (int i = 0; i < 4; i++) {

        UIGraphicsBeginPDFPage();

        aView.layer.bounds = CGRectMake(0,480* -i , 320, 480);

        [aView.layer renderInContext:pdfContext];

    }

    [aView.layer renderInContext:pdfContext];

    // remove PDF rendering context
    UIGraphicsEndPDFContext();

    // Retrieves the document directories from the iOS device
    NSArray* documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES);

    NSString* documentDirectory = [documentDirectories objectAtIndex:0];
    NSString* documentDirectoryFilename = [documentDirectory stringByAppendingPathComponent:aFilename];

    // instructs the mutable data object to write its context to a file on disk
    [pdfData writeToFile:documentDirectoryFilename atomically:YES]; 
} 
```

这段代码的问题是，它只生成一个包含 4 个相似页面的 PDF 文件，它们都是我原始页面的最后 480 像素。(aView) 当我移动 `[aView.layer renderInContext:pdfContext]; 在 FOR 循环之外，它会生成一个包含 4 页的 PDF 文件，但前 3 页将为空白，最后一页有一些数据。

你们知道我该如何解决这个问题吗？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:01:06.620

bounds 表示图层在其父级中的位置。所以当你渲染一个图层时，它使用它`frame`来确定它的内容。您必须将视图作为子视图放置在另一个视图中，例如`aView2`. `aView`然后像你已经做的那样设置边界，然后渲染`aView2`。

它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-28T03:55:10.347

添加字符串数组并尝试刷新应用程序

您还必须将物理 pdf 文件添加到您的 xcode 项目中，您可以通过将其拖放到左侧菜单浏览中来做到这一点

可以使用的另一种方法是使用 URL 访问 pdf remotley

单击运行，看看它是否有效

希望这可以帮助

# javascript - 访问和更改先前修改的元素之外的元素

> ID：15499863
> 
> 赞同：1
> 
> 时间：2013-03-19T12:44:02.987
> 
> 标签：javascript, class, function, element

单击图像时，图像源应更改，以及匹配跨度的类。

HTML：

```
<span class="oldClass">
    Some Text
    <img id="IdForThisImg" onclick="changeImage('IdForThisImg')" src="imgOld.png">
</span>
<span class="oldClass">
    Some Text 
    <img id="IdForAnotherImg" onclick="changeImage('IdForAnotherImg')" src="imgOld.png">
</span> 
```

我已经尝试了无数次尝试来更改类名，灵感来自[“使用简单的跨浏览器 JavaScript 添加和删除类”](https://stackoverflow.com/questions/195951/change-an-elements-css-class-with-javascript)。

Javascript：

```
function changeImage(id)
{
    element=document.getElementById(id)
    if (element.src.match("imgOld"))
    {
        element.src="imgNew.png";
        document.getElementByClassName("oldClass").className = "newClass";
    }
    else
    {
        element.src="imgOld.png";
        document.getElementByClassName("newClass").className = "oldClass";
    }
} 
```

我的问题似乎是我没有得到我想要更改类名的元素。更改图像效果很好，但我无法更改类名。

类名没有改变是否正确，因为我没有得到正确的元素，如果不是，你能指出我的方向吗？如果正确，为什么我当前的解决方案不起作用？

附加信息：我正在使用 bootstrap twitter，使用 a ，当图像更改时，我想将其更改为“badge badge-default”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:49:44.873

没有`getElementByClassName`方法。正确的方法是，注意*元素***`getElementsByClassNames`**的复数。

 *这是一个可以理解的混淆，因为更常见的是`getElementById`. 产生这种差异的原因是，与 相反`id`，a`class`可以指代多个元素。

此外，可以理解，此方法将返回一个`array`，这意味着您无法在`className`不迭代元素的情况下运行您的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:02:21.140

您需要引用父节点，如下所示：

```
function changeImage(id)
{
//Element
var element=document.getElementById(id);
//And parent node
var parent = document.getElementById(id).parentNode;
if (element.src.match("imgOld"))
{
    element.src="imgNew.png";
    parent.className = "newClass";
}
else
{
    element.src="imgOld.png";
    parent.className = "oldClass";
} 
```

}*

# android - 在 node.js 中下载 Throttle

> ID：15499864
> 
> 赞同：0
> 
> 时间：2013-03-19T12:44:07.823
> 
> 标签：android, node.js, mongodb

我正在使用 Connect 在节点上运行服务器。服务器针对特定请求（例如 www.sample.com/service/store_id）返回大约 50,000 条记录的响应。一旦服务器收到请求，它会与 mongoDB 交互以获取存储详细信息并返回存储详细信息（50,000 条记录）作为响应。

我将 URL 暴露给手机。移动用户尝试通过请求 URL 来获取响应。手机开始检索或下载 50,000 条记录。当检索到大约 25,000 条记录时，下载停止。移动用户在一段时间后恢复下载。由于用户已经拥有前 25000 条记录，我如何开始从 25000 到 50000 条记录的下载？

在上述情况下如何使用下载限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:16:06.497

您正在寻找[分页](https://en.wikipedia.org/wiki/Pagination):)

[这是使用 mongoDB 驱动程序的方法。](https://stackoverflow.com/questions/2056241/pagination-with-mongodb#2062601)

# python - 如何编写钩子

> ID：15499867
> 
> 赞同：1
> 
> 时间：2013-03-19T12:44:16.940
> 
> 标签：python, hook

我是钩子新手，所以我需要一个建议。假设我有一个函数将一些数据作为输入并生成一个图：

```
def f(data, options):
   plot = produce_plot(data)
   apply_options(plot) # changing colors, style, ...
   export(plot, option.format)
   return plot 
```

这个函数不是用户直接调用的，而是在循环内部调用的，例如：

```
data_categories = divide_in_category(data)
for d in data_categories: f(data, color=user_option.color, format='png') 
```

现在，我想根据需要为用户提供使用此图进行更多操作的可能性。假设用户想要添加标签并进行一些拟合，我认为一个好主意是提供一个挂钩来访问 function 的内部`f`。钩子应该在`export`函数之前执行。问：怎么办？如何提供`f`挂钩内部的内部结构？

我无法使用`options`参数处理所有无限用例 as `options.do_fit`, `options.add_label`, ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:29:34.457

```
def f(data, options, hook = None):
   plot = produce_plot(data)
   apply_options(plot) # changing colors, style, ...
   if hook is not None:
       plot = hook(plot)
   export(plot, option.format)
   return plot 
```

然后用户可以使用他编写的函数的名称调用 f，这将在 plot 上做一些事情并返回一个新的 plot。

# web-services - 在 CakePHP 中选择时出现内存错误

> ID：15499868
> 
> 赞同：1
> 
> 时间：2013-03-19T12:44:19.213
> 
> 标签：web-services, cakephp, memory-management

我已经制定了一个 Web 服务。后面有一个 MySQL-DB。网络服务需要 3 个参数。一个“From”-Value 一个 To-Value 和一个“fmt”作为格式值。像这样：

```
"...requests?from=2011-10-18 16:15:00&to=2013-03-19 16:30:00&fmt=csv" 
```

我得到的是

```
"Fatal error: Allowed memory size of 134217728 bytes exhausted (tried to allocate 30720
 bytes) in...". 
```

我知道这意味着什么，但我想出了以下内容。在我的选择（收集我想要返回的数据）触发之前，我只花费了大约`2.75MByte`内存。我的选择完成了，记忆大约是 `237,75MByte`。好吧，如果有大量数据我会理解，但最后我会创建一个`8.1MByte`很大的 csv 文件。关于 Cake 中的选择，我有什么需要了解的吗？

代码截断：

```
$condition = array('conditions'=> array(
                         'created_at >= "'. $this->params['url']['from'].
                         '"AND created_at <="'. $this->params['url']['to'].'"'
                         )
                   );           
$this->output_data = $this->LogRequest->find('all', $condition); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:52:54.697

我认为您正在使用[`ContainableBehavior`](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html#containable).

如果是这样，您应该在执行之前将递归设置为 -1 `find()`：

`$this->LogRequest->recursive = -1;`

# node.js - 在 C9 Cloud IDE 中运行 Jade 模板有什么技巧？

> ID：15499871
> 
> 赞同：3
> 
> 时间：2013-03-19T12:44:24.370
> 
> 标签：node.js, express, pug, cloud9-ide

我正在尝试在[C9 Cloud IDE](https://c9.io/)中使用 Express (nodejs) 运行一个简单的 Web 应用程序，但是当我启动应用程序时，IDE 将`.jade`文件视为 JavaScript，并尝试对其进行解释，从而产生很多错误。

例如翡翠文件：

```
h1 Sign Up
form(action="/user", method="POST")
    input(type="text", name="user[name]", placeholder="Type your desired user name")
    input(type="password", name="user[password]", placeholder="Type your password")
    input(type="password", name="user[passwordCheck]", placeholder="Type your password again")

    button(value="SIGN UP!") 
```

我得到的错误：

```
(function (exports, require, module, __filename, __dirname) { h1 Sign Up
                                                              ^^^^
SyntaxError: Unexpected identifier 
```

有什么配置可以让它工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:11:54.350

[Cloud 9](https://github.com/ajaxorg/cloud9) IDE 使用 ACE 文本编辑器，捆绑了对 JS、HTML、CSS 和混合模式的语法高亮支持。来自[ACE](http://ace.ajax.org/#nav=howto)指南：

> 默认情况下，编辑器支持纯文本模式。所有其他语言模式都可以作为单独的模块使用，按需加载，如下所示：

```
editor.getSession().setMode("ace/mode/javascript"); 
```

所以尝试将其设置为`ace/mode/jade`

# java - 如何访问私有方法中的对象？

> ID：15499877
> 
> 赞同：2
> 
> 时间：2013-03-19T12:44:53.267
> 
> 标签：java, unit-testing, junit, mockito, powermock

我已经使用 PowerMock/Mockito 模拟了私有方法，现在我的问题是如何访问在此方法中声明的对象？

例如 。

```
private void method1()
{
MyObject ob = new MyObject();

} 
```

现在在我的测试代码中，我想访问 ob 对象来验证值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:48:07.200

[本指南](http://code.google.com/p/powermock/wiki/MockConstructor)详细介绍了使用 PowerMock 模拟构造函数调用：

> ...但是使用 PowerMock 您不必更改代码，而是可以指示 PowerMock 拦截对 new File(..) 的调用并返回一个模拟对象。为此，我们首先像往常一样创建一个 File.class 类型的模拟：
> 
> ```
> File fileMock = createMock(File.class); 
> ```
> 
> 为了期待对新文件的调用，我们只需执行以下操作：
> 
> ```
> expectNew(File.class, "directoryPath").andReturn(fileMock); 
> ```

所以在你的情况下，你应该在你的**测试用例或设置方法**中有这些：

```
MyObject mockOb = createMock(MyObject.class);
expectNew(MyObject.class).andReturn(mockOb); 
```

通过添加这些，您将具有以下行为：

**每当您的代码**`new MyObject()`中有一个由测试用例运行时，PowerMock 模拟的对象实例就会被返回。因此，无论您在代码中的*哪个位置*创建一个新实例，它都将与函数创建的实例完全相同。***`MyObject``createMock()`***

 *****编辑**

> 让我们举个例子
> 
> ```
> Class A { 
>  private void method1() 
>  { 
>    Obj obj = new Obj(); 
>     obj.setX(10);
>  } 
>  //Here I want to access the obj object to verify the values 
> } 
> ```

要做到这一点，你必须有一些不同的想法。

1.  创建真实的A实例
2.  为 Obj 构造函数设置模拟
3.  运行你的触发逻辑`pruivate method1()`
4.  检查*模拟的 Obj 实例上的值*
    *   如果这些值不可测试（在逻辑中对其进行了修改），zou 可以检查 setX() 是否在适当的时间被调用。

这些方面的东西：

```
@Test
public void testMyPrivateMethod() {
    //1\. object with the logic to test
    A a = new A();

    //2\. set up mocking
    Obj mockObj = createMock(Obj.class);
    expectNew(Obj.class).andReturn(mockObj);

    //3\. trigger logic to test
    a.someOtherMethodThatCallsMethod1();

    //4\. test Obj (find out if setX() has been called or not)
    verify(mockObj).setX(any(Integer.class));
} 
```***

# php - 页面内的 AJAX 加载页面

> ID：15499886
> 
> 赞同：0
> 
> 时间：2013-03-19T12:45:09.990
> 
> 标签：php, ajax, login

我有一个验证登录脚本的 AJAX 脚本，当用户输入不正确的数据时，会出现错误消息，但是当用户输入正确的数据时，新页面会加载到错误消息空间中。我知道问题出在哪里，我只是不知道如何解决它。

下面是登录脚本和检查登录脚本

登录.php

```
<table class="loginTable" align="center">
    <tr>
        <td>
            Email:
        </td>
        <td>
            <input type="text" name="email" id="email"/>
        </td>
    </tr>
    <tr>
        <td>
            Password:
        </td>
        <td>
            <input type="password" name="password" id="password"/>
        </td>
    </tr>
    <tr>
        <td align="center" colspan="2">
            <span id="ErrorMessage"></span>
        </td>
    </tr>
    <tr>
        <td colspan="2" align="center">
            <!--Keep me logged in? <input type="checkbox" name="keeploggedin" /><br /><br />-->
            <input  id="loginButton" type="button" name="login" value="Login" onclick="processLogin()"/>
        </td>
    </tr>
</table>

<script>

    function processLogin()
{
var xmlhttp;

var email = document.getElementById("email").value;
var password = document.getElementById("password").value;

if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function() 
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("ErrorMessage").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("POST","checklogin.php",true);
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
xmlhttp.send("email=" + email + "&password=" + password);
}

</script> 
```

检查登录.php

```
<?php

session_start();

//Login Script

//Variables
$email = $_REQUEST['email'];
$userPassword = $_REQUEST['password'];
//$keeploggedin = $_REQUEST['keeploggedin'];

require_once("dbdetails.php");

// Create Mysqli object
$db = new mysqli($hostname, $username, $password, $database);

// Create statement object
$stmt = $db->stmt_init();

// Create a prepared statement
if($result = $stmt->prepare("SELECT u.UserFirstName, u.UserSurname, u.UserID FROM user u WHERE u.UserEmail = ? AND u.UserPassword = ?")) {

    // Bind your variables to replace the ?s
    $stmt->bind_param('ss', $email, $userPassword) or die(errorCodes($stmt->errno));

    //$row -> fetch_array(MYSQLI_ASSOC);

    // Execute query
    $stmt->execute() or die(errorCodes($stmt->errno));

    $stmt->bind_result($fname, $sname, $userID);

    $stmt->store_result();

    $count = $stmt->num_rows;

    if($count == 1){
        while($row = $stmt->fetch()) {

            // Register $email, $password, $firstname, $surname, create logged_in session and redirect to file "projects.php"
            $_SESSION['email'] = $email;
            $_SESSION['password'] = $userPassword;
            $_SESSION['firstname'] = $fname;
            $_SESSION['surname'] = $sname;
            $_SESSION['userID'] = $userID;
            $_SESSION['LoggedIn'] = 'true';
            $_SESSION['loginCount'] = 0;
            header("location:projects.php");
        }
    }
    else {
        //$_SESSION['loginCount'] += 1;
        //header("location:loginPage.php");
        //echo("<script type='text/javascript'>\n");
        //echo("changeError();\n");
        //echo("</script>");    

        echo("Username and Password mismatch, please try again");
    }

    // Close statement object
    $stmt->close();
}

    function errorCodes($aErrorCode)    {
        echo("Error " . $aErrorCode . " has occured");
    }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:47:29.000

登录成功时返回一些 json 数据，说明登录成功（来自 php），然后修改您的此代码

```
xmlhttp.onreadystatechange=function() 
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("ErrorMessage").innerHTML=xmlhttp.responseText;
    }
  } 
```

`success`如果您从 php.ini 获得响应，则将用户重定向到下一页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:50:25.003

您可以测试`xmlhttp.responseText`：

```
 if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
       if(xmlhttp.responseText != "")    //If not, it completes your error box
          document.getElementById("ErrorMessage").innerHTML=xmlhttp.responseText;
       //Else, let the redirection trigger

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T13:06:21.230

使用简单的ajax，希望对您有所帮助:)

```
<script>
function processlogin()
{
$.ajax(
{
url:'checklogin.php',
type:'POST',
data:{'email':email,'password':password},
success:function(xyz)
{
if(xyz==1)
{
$("#errormessage").load("ajax/newcontent.php");
}
else{
//do something as you need
}
}
});
}
</script>

in the checklogin.php page, if the IF condition success then 'echo 1' or 'echo 0' in else part.so that you can validate using these values in success block of the ajax script. 
```

# asp.net - 没有 Windows 身份验证的 HttpContext.Current.User.Identity.Name

> ID：15499888
> 
> 赞同：3
> 
> 时间：2013-03-19T12:45:20.140
> 
> 标签：asp.net, iis-7

我在我的 ASP.NET 应用程序中遇到了 HttpContext.Current.User.Identity.Name 作为空字符串出现的问题，并找到了这些引用来解决问题；

[HttpContext.Current.User.Identity.Name 是空的](https://stackoverflow.com/questions/1571036/httpcontext-current-user-identity-name-is-empty)（这也把我带到了 Scott Guthrie 的博客。

我已禁用匿名身份验证并启用 Windows 身份验证。我现在得到域用户名。但是现在的问题是，在有人访问我的应用程序之前，我得到了 Windows 凭据提示框。这不是我打算让它工作的方式。

我是否可以实施其他设置来获取当前登录用户的域凭据，而不必强制我的用户使用 Windows 身份验证提示？

我们的 ASP.NET 应用程序非常简单，它获取这些信息，并将其传递给 Silverlight 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:50:13.110

您应该直接在 IE 和 chrome 中获取凭据。他们直接传递[NTLM](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378749%28v=vs.85%29.aspx)凭据。

如果这对您不起作用，请将网站放在 Windows“Internet 选项”中的“本地 Intranet”安全组中。

众所周知，Firefox 默认会提示这些。它确实有一个设置来启用它。但是，如果您希望它在没有用户必须通过他们的配置的情况下工作，您将不得不回复一个插件。

# java - 获取“AWT EVENTQueue-0”java .lang.nullpointerexception 错误

> ID：15499902
> 
> 赞同：-3
> 
> 时间：2013-03-19T12:46:00.197
> 
> 标签：java, swing, user-interface

我不知道我是如何得到这个错误的。我做到了，所以当我点击时间按钮时，时间组合框变得可见。我的代码如下。我尝试了不同的方法，例如当单击按钮时，我插入时间面板，其中插入了组合框。我的代码不起作用的原因是什么？

```
 import javax.swing.JOptionPane;

 import java.awt.*;
 import java.awt.event.*;
import javax.swing.*;

public class events extends JFrame {
// variables for JPanel
private JPanel timePanel;
private JButton timeButton;
 private JButton moneyButton;
private JButton hotelButton;
private JButton exitButton;

 public events() 
 {

setLayout(new BorderLayout()); 

  JPanel buttonPanel = new JPanel();
  buttonPanel.setBackground(Color.RED);
  add(buttonPanel,BorderLayout.WEST);
  JPanel timePanel = new JPanel();
  timePanel.setBackground(Color.BLUE);
  timePanel.setPreferredSize(new Dimension(320, 240));

  add(timePanel,BorderLayout.EAST);   

   Time timeObject = new Time();
      timeObject.SelectTime();
      timePanel.add(timeObject.gettimePanel());
      timeObject.gettimePanel().setVisible(false);

  timeButton = new JButton("Time"); 
  buttonPanel.add(timeButton);

  moneyButton = new JButton("Price");
  buttonPanel.add(moneyButton);

  hotelButton = new JButton("Hotel");
  buttonPanel.add(hotelButton);

  exitButton = new JButton("Exit");
  buttonPanel.add(exitButton);

  buttontime clickTime = new buttontime();
  timeButton.addActionListener(clickTime);

   }

    //classes for Time
 public class buttontime implements ActionListener { //creating actionlistener for     clicking on timebutton to bring up a combobox
  public void actionPerformed(ActionEvent clickTime)  {
           Time timeObject = new Time();
      timeObject.SelectTime();
      timePanel.add(timeObject.gettimePanel());
      timeObject.gettimePanel().setVisible(true);

  }
  }

   public static void main (String args[]) {
events mainmenu = new events(); //object is created

mainmenu.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
mainmenu.setSize(600,400);
mainmenu.setVisible(true);
mainmenu.setLayout(new BorderLayout());
mainmenu.setTitle("Travel Agent System");
mainmenu.setBackground(Color.BLUE);

}

     import javax.swing.JOptionPane;

   import java.awt.*;
  import java.awt.event.*;
 import javax.swing.*;

 class Time
{

  private JComboBox timeairportbox;//comboboxes declared
  private String[] Airport = {"","East Midlands", "Birmingham", "Manchester",  "Heathrow"};//array of airports declared

public void SelectTime() {

  //combobox objects created
  timeairportbox = new JComboBox(Airport);//array is inserted into the JComboBox
  timeairportbox.setVisible(false);   // Combobox is placed in the timePanel

 }

 public JComponent gettimePanel() {
    return timeairportbox;
    }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:51:23.807

您在 的构造函数中*隐藏*变量，因此永远不会分配类成员变量，从而导致. 代替`timePanel``events``NPE`

```
JPanel timePanel = new JPanel(); 
```

和

```
timePanel = new JPanel(); 
```

*另外：* [Java 命名约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#367)表明类名以*大写*字母开头，这将使`events` `Events`.

# php - 用于查找主目录和 .ssh 文件夹的通用 PHP 脚本

> ID：15499904
> 
> 赞同：1
> 
> 时间：2013-03-19T12:46:04.390
> 
> 标签：php, ssh

我正在编写一个脚本，它将使用 php 将给定的远程 git 分支拉入网络服务器。

该过程的第一步是检查网络服务器是否创建了公钥。

我正在尝试使其尽可能适用于不同的服务器类型，即：linux、windows 等，我想知道是否有人对如何确定 .ssh 存储在不同环境中的位置有任何想法？

我不知道它在其他服务器上是什么，也不知道如何为不同的管理面板确定用户的主目录。

例如，在普通的 cpanel 服务器中，每个用户的位置始终是：

/home/用户名/.ssh/

但在 Direct Admin 中，它将是：

/home/username/domains/www.yourdomain.com/.ssh/ （或类似的东西）

我假设 ssh 目录将始终位于 doc 根目录上方的用户主目录中……仅搜索目录名称 .ssh 是否可行？

任何帮助，将不胜感激。

谢谢。

——文斯

# menu - 在带有打字稿的特殊标签后插入子菜单

> ID：15499907
> 
> 赞同：0
> 
> 时间：2013-03-19T12:46:09.520
> 
> 标签：menu, typo3, typoscript

我在特殊标签之后（在 div 结束之后）插入子菜单时遇到问题。我想要的是：

```
<li>
 <div class="toggle">Menu1</div>
 <ul style="display: none;" class="content">
    <li class="first2"><a href="#">menu2</a></li>
   <li class="first2"><a href="#">menu2</a></li>
 </ul>
</li> 
```

但我得到的是：

```
<li>
 <div class="toggle">Menu1
 <ul style="display: none;" class="content">
    <li class="first2"><a href="#">menu2</a></li>
   <li class="first2"><a href="#">menu2</a></li>
 </ul>
 </div>
</li> 
```

我的代码打字稿是：

```
 lib.menuVertical= HMENU
 lib.menuVertical.wrap = <ul class="rgaccordmenu"> |</ul>
 lib.menuVertical.entryLevel = 1

 lib.menuVertical{
     1 = TMENU
     1{

        # no state: formatting for normal items
        expAll = 1
    NO{
          wrapItemAndSub = <li><div class="empty">|</div></li>
    }
            # act state: valid from the rootpage to the actual page
    ACT=1
    ACT{
      wrapItemAndSub = <li class="empty">|</li>
    }
            # cur state: valid for the actual page
    CUR=1
    CUR{
      wrapItemAndSub = <li class="empty">|</li>
    }
            # ifsub state: valid for pages that have subpages
    IFSUB=1
    IFSUB{
     wrapItemAndSub = <li><div class="toggle">|</div></li>

    }
    }
  2 = TMENU
   after = </div>
  2.wrap = <ul style="display: none;" class="content">|</ul>
    2{
      NO{

      wrapItemAndSub = <li class="first2">|</li>
    }
    ACT=1
    ACT{
      wrapItemAndSub = <li class="first2">|</li>
    }
    CUR=1
    CUR{
      wrapItemAndSub = <li class="first2">|</li>
    }
    IFSUB=1
    IFSUB{
      wrapItemAndSub = <li class="first2">|</li>
    }
    }

} 
```

您知道如何在 not in ... 之后插入子菜单，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:40:52.120

`wrapItemAndSub`顾名思义，将包装整个项目，包括子页面。`linkWrap`是你需要的。

尝试以下操作：

```
lib.menuVertical= HMENU
lib.menuVertical {
    wrap = <ul class="rgaccordmenu">|</ul>
    entryLevel = 1

    1 = TMENU
    1 {
        expAll = 1

        # no state: formatting for normal items
        NO {
            wrapItemAndSub = <li>|</li>
            linkWrap = <div class="empty">|</div>
        }

        # act state: valid from the rootpage to the actual page
        ACT = 1
        ACT {
            wrapItemAndSub = <li class="empty">|</li>
        }

        # cur state: valid for the actual page
        CUR = 1
        CUR < .ACT

        # ifsub state: valid for pages that have subpages
        IFSUB = 1
        IFSUB {
            wrapItemAndSub = <li>|</li>
            linkWrap = <div class="toggle">|</div>
        }
    }
    2 = TMENU
    2 {
        wrap = <ul style="display: none;" class="content">|</ul>

        NO {
            wrapItemAndSub = <li class="first2">|</li>
        }

        # these are not needed if their content equals
        # ACT = 1
        # ACT < .NO

        # CUR = 1
        # CUR < .NO

        # IFSUB = 1
        # IFSUB < .NO
    }
} 
```

# android - 在 Android 上查看 PC 屏幕

> ID：15499913
> 
> 赞同：-4
> 
> 时间：2013-03-19T12:46:28.220
> 
> 标签：android

我正在做项目，我需要在 Android 手机或平板电脑上查看 PC 屏幕并通过 PC 控制 Android？

现在重要的是在 Android 上查看 PC 的屏幕 .. 任何人都可以帮忙吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:57:37.333

你的问题不清楚。我想到了两种情况

1.  **从 Android**查看和控制您的PC ：您可以使用 Teamviewer（在 pc 和 android 上都安装它），或者您可以使用各种可用的 vnc 客户端。
2.  **从 PC**查看和控制您的Android ：您可以使用 Android 截屏（code.google.com/p/androidscreencast/ 需要 adb）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:53:20.093

您必须实现 Socket 连接，并且必须创建一个本地服务器，可以将屏幕作为图像发送到您的手机。在 java awt 中有一种方法可以捕获你的电脑屏幕。所以可能是一些谷歌搜索可以帮助你

# javascript - RequireJS 中的“TypeError：未定义不是函数”（从依赖项传递对象）

> ID：15499914
> 
> 赞同：0
> 
> 时间：2013-03-19T12:46:30.450
> 
> 标签：javascript, requirejs, amd

所以我正在努力学习 RequireJS 来工作。这似乎很容易，但后来我遇到了一个问题。如何从其中一个依赖项中传递对象？

下面的代码为新变量返回“TypeError: Undefined is not a function”。我尝试记录 GoogleMap 的类型，但它也返回未定义。

这样做的正确方法是什么？

**主.js**

```
require(['test', 'geo', 'googlemaps'], function (GoogleMap) {
        var map = new GoogleMap();
}); 
```

**googlemaps.js**

```
define(function() {

        function GoogleMap(){

           var i = 0;
           var userMarkers = [];

           var map = {}

           this.initialize = function(lat,lng){
                map = getMap(lat,lng);
           }

           var getMap = function(lat,lng){
               var asldOptions = {
                     zoom: 4,
                     center: new google.maps.LatLng(59, 18),
                     mapTypeId: google.maps.MapTypeId.ROADMAP
                 };

               map = new google.maps.Map(document.getElementById("map-canvas"), asldOptions);

               return map;
           }
        }
    }
); 
```

**编辑：**我应该补充一点，当我删除顶部的“定义”行和 googlemaps.js 底部的相应括号时，它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:34:21.580

```
define(function() {

    var GoogleMap  = function(){

       var i = 0;
       var userMarkers = [];

       var map = {}

       this.initialize = function(lat,lng){
            map = getMap(lat,lng);
       }

       var getMap = function(lat,lng){
           var asldOptions = {
                 zoom: 4,
                 center: new google.maps.LatLng(59, 18),
                 mapTypeId: google.maps.MapTypeId.ROADMAP
             };

           map = new google.maps.Map(document.getElementById("map-canvas"), asldOptions);

           return map;
       }
    }

    return GoogleMap;

  }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:15:51.573

```
require(['test', 'geo', 'googlemaps'], function (GoogleMap) { 
```

将其更改为

```
require(['test', 'geo', 'googlemaps'], function (test, geo, GoogleMap) { 
```

然后再试一次。

您的 GoogleMap 没有映射到 googlemaps 脚本，而是用于测试。它按照您指定依赖项的顺序排列。

无论哪种方式，我之前的答案仍然有效。这就是您应该在 googlemaps.js 文件中返回函数的方式。

希望有帮助。苏杰

# tkinter - 如何防止 tkinter 向导格式一次显示所有页面？

> ID：15499917
> 
> 赞同：0
> 
> 时间：2013-03-19T12:46:49.063
> 
> 标签：tkinter, wizard

希望我能做到这一点足够具体。我正在我目前的工作地点构建一个用于激光切割机培训的应用程序（正如你们中的一些人最近几天看到的那样）。我已经能够成功地创建一个向导，它将引导学员完成每个过程，但是我遇到了向导格式的问题。

发生的事情不是 Python Shell 中出现的错误，因此就解释器而言，代码没有问题。但是，当我打开向导时，它想一次显示所有页面。我可以单击“下一个”和“上一个”按钮，它会清除，但我无法完成第四页，因为它会将按钮推出屏幕，因此无法触及（我的屏幕分辨率不允许整个窗口适合，并且按钮总是从底部开始，无论分配的位置如何）。

如果有人能告诉我导致问题的原因以及如何解决它，我将非常感谢您的帮助。

我已经发布了下面的代码。我只要求理解，因为这确实是自几年前我用 C++ 制作的基于 DOS 的计算器以来我构建的最复杂的应用程序。换句话说，这是我的第一个带有 GUI 的应用程序，也是我的第一个 python 应用程序。因此，我在 python 以及 stackoverflow 方面的经验非常有限。

请注意，某些加载的模块不是向导的一部分。它们在应用程序的其他地方发挥作用。

```
#Import the Modules required for proper app function
import os, cgi, pickle
from os.path import *
from tkinter import *
import tkinter

#All other windows must be created as Definitions before the Home Screen/Main Menu is coded.
#All Button Commands must be created as Definitions before their respective windows

#Start Code for the Introduction Wizard
def wizIntro():
    wizIntro = tkinter.Tk()

    #Title:
    wizIntro.title('Welcome to Training')

    #Content:
    page1 = Frame(wizIntro)
    Label(page1, text='', width=110).pack()
    Label(page1, text='--Welcome to Training--', width=85).pack()
    Label(page1, text='', width=85).pack()
    Label(page1, text='This tutorial will help you familiarize yourself with the program.  Following it is key to understanding', width=85).pack()
    Label(page1, text='the proper operation of the Laser Cutter.', width=85).pack()
    Label(page1, text='', width=90).pack()
    Label(page1, text='It is also important to follow every insrtuction exactly as stated, to avoid or minimize damage to the Laser', width=85).pack()
    Label(page1, text='Cutter and reduce the risk of injury to the operator and those around him.', width=85).pack()
    Label(page1, text='Therefore, all safety notices must be followed with extreme care.', width=110).pack()
    Label(page1, text='--Failure to follow all safety notices poses a severe risk of damage to the equipment and to the operator, which can be fatal--', width=110, fg='red').pack()
    Label(page1, text='', width=110).pack()
    Label(page1, text='', width=110).pack()
    Label(page1, text='', width=110).pack()
    Label(page1, text='Click Next to Continue...').pack(side = BOTTOM)
    page1.pack()

    page2 = Frame(wizIntro)
    Label(page2, text='', width=110).pack()
    Label(page2, text='Notice:  Before anyone can operate the Laser Cutter, they must have completed this training program and be authorized as an operator.', width=110).pack()
    Label(page2, text='FAILURE TO FOLLOW THIS POLICY MAY RESULT IN IMMEDIATE TERMINATION OF EMPLOYMENT', fg='red').pack()
    Label(page2, text='', width=110).pack()
    Label(page2, text='Once again, it is very important to follow all safety precautions and notices.  Failure to do so can result in one or more of the following:', width=110).pack()
    Label(page2, text='*Severe burning', width=110).pack()
    Label(page2, text='*Severe damage to, or loss of, fingers', width=110).pack()
    Label(page2, text='*Temporary or permanent blindness', width=110).pack()
    Label(page2, text='*Minor to Severe damage to the Laser Cutter and/or its components', width=110).pack()
    Label(page2, text='', width=110).pack()
    Label(page2, text='On the next screen, you will see a list of precautions to follow.', width=110).pack()
    Label(page2, text='', width=110).pack()
    Label(page2, text='', width=110).pack()
    Label(page2, text='...Click Previous to go Back, or Click Next to Continue...').pack(side = BOTTOM)
    page2.pack()

    page3 = Frame(wizIntro)
    Label(page3, text='', width=110).pack()
    Label(page3,  text='--Safety Precautions--', width=110).pack()
    Label(page3, text='', width=110).pack()
    Label(page3, text='1\.  Do not look at the laser tube or at the laser strike-point without proper eyewear or through the glass on the Laser Cutter.', width=110).pack()
    Label(page3, text='2\.  Do not attempt to overide the Door Safety Sensor to allow the laser to cut with the door open.', width=110).pack()
    Label(page3, text='3\.  Keep hands clear of all moving parts and refrain from touching the mirrors with bare hands.', width=110).pack()
    Label(page3, text='4\.  Do not make any adjustments to the laser calibration without proper training and authorization from your superviser.', width=110).pack()
    Label(page3, text='5\.  Do not remove any covers except for the bottom-front (and only to empty the boxes behind said cover) without permission.', width=110).pack()
    Label(page3, text='6\.  Keep a constant awareness and/or watch on the laser as it cuts, and cancel the cut-cycle as soon as problems occur,', width=110).pack()
    Label(page3, text='such as fires or when stamps catch on the Laser Head.', width=110).pack()
    Label(page3, text='7\.  Report any problems that will cause the Laser Cutter to not operate properly to your supervisor immediately.', width=110).pack()
    Label(page3, text='Above all else, make safety your Highest Priority', width=110, fg='red').pack()
    Label(page3, text='', width=110).pack()
    Label(page3, text='...Click Previous to go Back, or Click Next to Continue...').pack(side = BOTTOM)
    page3.pack()

    page4 = Frame(wizIntro)
    Label(page4, text='', width=110).pack()
    Label(page4, text='...Click Previous to go Back, or Click Next to Continue...').pack(side = BOTTOM)
    page4.pack()

    #Commands:
    pages = [page1, page2, page3, page4]
    current = page1
    def move(dirn):
        nonlocal current
        idx = pages.index(current) + dirn
        if not 0 <= idx < len(pages):
            return
        current.pack_forget()
        current = pages[idx]
        current.pack(side = TOP)

    def nex():
        move(+1)

    def prev():
        move(-1)

    Button(wizIntro, text='Previous', command=prev).pack(side = LEFT)
    Button(wizIntro, text='Next', command=nex).pack(side = RIGHT)

    #End Code for the Introduction Wizard 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:23:49.337

他们同时出现的原因是因为你告诉他们。您的代码执行此操作：

```
...
page1 = Frame(wizIntro)
...
page1.pack()
page2 = Frame(wizIntro)
...
page2.pack()
... 
```

每次调用时`pack`，它都会将该小部件放在屏幕上。如果您不希望它们在启动时出现，请不要`pack`在创建每个小部件后调用。

# sql - 选择语句中的选择语句 SQL 和访问

> ID：15499920
> 
> 赞同：3
> 
> 时间：2013-03-19T12:46:54.187
> 
> 标签：sql, select, nested

我正在尝试选择已在数据库中销售的产品的最高价格，我有三个表（`tbl_CarForSale`和`tbl_Commision`）`tbl_Salesman`。

我要做的是选择已售出的汽车的最高价格，然后使用该记录计算所赚取的佣金，并将其链接到销售员。我有以下内容，它返回最大汽车价格，但我不知道如何直接使用返回的记录来获取其他可能的信息。

```
SELECT Max(tbl_CarForSale.carprice)
FROM (SELECT tbl_CarForSale.*, tbl_Salesman.*,  from tbl_CarForSale, 
WHERE bolSold = true) 
```

我猜我需要把它放到另一个`SELECT`语句中并嵌套它，但我不知道该怎么做。

编辑：

根据要求，字段名称在这里。

```
tbl_salesman: name
tbl_CarForSale: registration, soldDatem salesmanNo, carPrice, bolSold
tbl_Commision: minValue, maxValue, comAvliable 
```

基本上，佣金表背后的想法是销售员根据汽车的价格赚取佣金，因此我有一个查询，查看汽车价格并返回销售员赚取的佣金

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T12:51:34.227

像这样的东西应该工作。

```
select your fields
from your tables
where bolSold = true
and tbl_CarForSale.carprice = (select max(carprice) from tbl_carForSale) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:59:19.597

`tbl_salesman`也需要具有该`salesmanNo`属性，这样表就有一个相似的属性可以加入。这也适用于其他表。

bolSold 是做什么的？

如果我理解正确，`tbl_Commision`作为一个表没有意义，而是一个函数或在应用程序级别处理几个特殊查询。

`salesmanNo`如果包含在 中，这应该给出每个推销员销售的汽车的最高价格`tbl_salesman`。

```
SELECT salesman.name, MAX(tbl_CarForSale.carprice) FROM tbl_salesman JOIN tbl_CarsForSale GROUP BY salesman.name ORDER BY MAX(tbl_CarForSale.carprice); 
```

您可以在其末尾添加一个`WHERE`子句来指定大于和小于约束，或者您可以创建一个函数并将`MAX()`上面示例中的函数替换为新创建的函数。

标准化一点也可能有意义。我不知道你的确切要求，但我会考虑这样的事情：

```
car: registration, carPrice, bolSold
salesman: salesmanNo, name
sold_record: date, salesmanNo, registration REFERENCES car.registration,salesmanNo REFERENCES salesman.salesmanNo 
```

# c# - 相机旋转对齐到任意平面

> ID：15499922
> 
> 赞同：1
> 
> 时间：2013-03-19T12:46:54.810
> 
> 标签：c#, math, xna, camera

我有一个我认为对于相机来说相当简单的场景，但我的穴居人大脑拒绝思考超过二维的任何东西。

我的 3D 相机需要在物体后面对齐。这个物体可以粘在任何表面上，因此相机对“向上”的概念可以是任意向量。它与这个问题非常相似，但由于我没有直接控制“玩家”对象而是尝试使用 CreateLookAt，所以我无法理解解决方案：[How can I calculate the rotation when using a quaternion camera ?](https://stackoverflow.com/questions/8708308/how-can-i-calculate-the-rotation-when-using-a-quaternion-camera)

为了简化测试，我们假设对象在一个球体上。

我目前有：

*   目标对象在 3D 空间中的绝对位置。
*   表示对象当前所在表面的法线的单位向量。在这种情况下，球体上三角形的法线。
*   X 和 Y 角度描述了相机应该如何围绕物体运行。

我相信这就是所需要的，但我不确定如何以一种可行的方式将它们组合在一起。我知道我需要通过对象的nor来转换角度相机我的最佳尝试如下：

```
Matrix orientation = Matrix.CreateRotationY(OrbitYaw) * Matrix.CreateRotationX(OrbitPitch);

orientation.Up = CurrentNormal;
orientation.Right = Vector3.Cross(orientation.Forward, orientation.Up);
orientation.Right = Vector3.Normalize(orientation.Right);
orientation.Forward = Vector3.Cross(orientation.Up, orientation.Right);
orientation.Forward = Vector3.Normalize(orientation.Forward);

Vector3 Target = ObjectPosition;

Vector3 Position = Vector3.Transform(new Vector3(0,50,0), orientation);

Matrix View = Matrix.CreateLookAt(Position, Target, CurrentNormal); 
```

定位代码似乎是正确的，但由于第二个问题很难判断：随着位置的变化，相机似乎“滚动”。这是有道理的——相机所知道的只是它的位置和看哪里，我没有明确告诉它它本身应该如何旋转。这是我需要做的，以便相机在跟随对象时保持恒定的对齐（除了将其保持在相同的相对位置所必需的之外）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:44:34.880

稍微扩展一下 Tim S 在他的评论中所说的内容，您可以从相机所跟随的对象中借用方向的某些方面来获取相机的方向。

```
cameraPosition = objectPosition + (objectOrientation.Backward * 50);
cameraTarget = objectPosition;

Matrix cameraArc = Matrix.CreateFromAxisAngle(objectOrientation.Up, orbitYaw) * Matrix.CreateFromAxisAngle(objectOrientation.Right, orbitPitch);//assumes objectOriention is a ortho-normal matrix

cameraPosition = Vector3.Transform(cameraPosition - cameraTarget, cameraArc) + cameraTarget;

view = Matrix.CreateLookAt(cameraPosition, cameraTarget, Vector3.Up); 
```

尽管插入`Vector3.Up`了最后一行（在您的情况下应该这样做），但视图矩阵的向上向量将与对象的向上向量对齐。

# java - SQLite Select 查询未从表中返回所需的值

> ID：15499926
> 
> 赞同：-2
> 
> 时间：2013-03-19T12:47:01.977
> 
> 标签：java, android, sqlite, select, logcat

我创建了一个**数据库助手类，我在其中编写了一个**这样的选择查询：

```
//select statement
        public String select(String question_id) {

        SQLiteDatabase db = this.getWritableDatabase(); 

        String sql = "SELECT answer FROM answers WHERE _id="+question_id;
         Log.i("select: ",sql);

        db.close();
        return sql;

} 
```

这就是我**从活动中调用 select 方法的方式**：

```
//select statement to retrive previous answer from database
                DataBaseHelper db = new DataBaseHelper(ExamActivity.this);
                ContentValues values = new ContentValues();
                try {
                 db.createDataBase();
                 chk_content = db.select(question_sr_no.getText().toString()); 

                } catch (IOException e1) {
                 e1.printStackTrace();
                  }
                db.close(); 
```

但是**logcat**的输出是：

```
SELECT answer FROM answers WHERE _id=1. 
```

**为什么查询不返回结果，而是返回查询字符串？**

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:49:30.983

您忘记使用`db.rawQuery`. 将您的方法更改为：

```
public String select(String question_id) {
   SQLiteDatabase db = this.getWritableDatabase(); 
   String str_answer="";
   String sql = "SELECT answer FROM answers WHERE _id="+question_id;
   Log.i("select: ",sql);
   Cursor cursor = db.rawQuery(sql, null); //<< execute here 
   cursor.moveToFirst();
   if (cursor.getCount()>0) {
      str_answer=cursor.getString(cursor.getColumnIndex("answer");
    }
  return str_answer;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:49:11.717

你只是记录，你没有调用[查询方法](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#rawQuery%28java.lang.String,%20java.lang.String%5B%5D,%20android.os.CancellationSignal%29)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T12:50:33.860

您的 select 方法只是创建一个字符串并返回该字符串。看看你自己的代码。

```
 //select statement
    public String select(String question_id) {

    SQLiteDatabase db = this.getWritableDatabase(); 

    String sql = "SELECT answer FROM answers WHERE _id="+question_id; //you return this. 
     Log.i("select: ",sql);

    db.close();
    return sql;

} 
```

我猜你想要的是实际查询数据库，而不仅仅是打开它然后再次关闭它。

# iphone - 为什么具有相同格式的文本在 iPhone 上呈现不同

> ID：15499927
> 
> 赞同：1
> 
> 时间：2013-03-19T12:47:04.480
> 
> 标签：iphone, html, css, media-queries

我遇到了一种奇怪的行为，即在 iPhone (Safari) 上以不同大小显示具有相同格式的文本

我有以下 HTML：

```
<div class="page" id="thanks">
    <div class="subtext">
    <p>
        text tex text <!-- Being displayed with the correct size -->
    </p>
</div>
</div>

<div class="page" id="about">
    <div id="about_us">
        <div class="about_box" id="robi">
        <p> text text text</p> <!-- NOT being displayed with the correct size -->
        </div>
        <div class="about_box" id="andrea"><p class="header">Robi &uuml;ber Andrea, 25</p>
           <p> text text text </p> <!-- NOT being displayed with the correct size -->
        </div>
    </div>
</div> 
```

这是相应的CSS：

```
body{ 
    background-color:#ffffff;
    font-family: 'GaramondPremrProDisp', 'EB Garamond', serif;
    font-size: 17px;
    margin-right: 0px;
    margin-left: 0px;
    margin-top: 0px;
}

@media handheld and (orientation: portrait){
    body{ 
        background-color:#ffffff;
        font-family: 'GaramondPremrProDisp', 'EB Garamond', serif;
        font-size: 30px;
        margin-right: 0px;
        margin-left: 0px;
        margin-top: 0px;
    }
}

div.page{
    min-width: 100%;
    position: relative;
    z-index: 50;
}
div.page div.subtext{
    width: 68%;
    max-width: 1100px;
    margin-left: auto;
    margin-right: auto;
}

div.page div.subtext p{
    text-align: center;
}

div#about div#about_us{
    width: 68%;
    height: 900px;
    margin-left: auto;
    margin-right: auto;
}

div#about div.about_box{
    text-align: center;

    height: 450px;
    float: left;
    clear: both;
} 
```

正如 HTML 代码中的注释所标记的那样……有些文本会受到`font-size`媒体查询产生的较大影响，而文本则不受影响。奇怪的是，如果我写`all`而不是`handheld`在媒体查询中并在桌面浏览器上测试它......所有文本都受到规则的影响，所以我想这不是选择器问题。

我还尝试了这个问题的答案中描述的所有内容：[修复 Mobile Safari (iPhone) 上的字体大小问题，其中文本呈现不一致并且某些字体比其他字体大？](https://stackoverflow.com/questions/5303263/fix-font-size-issue-on-mobile-safari-iphone-where-text-is-rendered-inconsisten)（没有任何成功）。

编辑：将描述的版本复制到我的开发环境中的一个文件夹中，如果你想实时查看它，它不会受到更改的影响（非常慢）：[检查一下！](http://robi.mooo.info/so/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:01:05.253

你试过`-webkit-text-size-adjust: 100%`在 上使用`body`吗？

[https://developer.mozilla.org/en-US/docs/CSS/text-size-adjust](https://developer.mozilla.org/en-US/docs/CSS/text-size-adjust)
[http://blog.55minutes.com/2012/04/iphone-text-resizing/](http://blog.55minutes.com/2012/04/iphone-text-resizing/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:04:21.273

显然 Safari 忽略了`handheld`媒体查询中的选择器。所以媒体查​​询根本没有触发。文本以不同的大小显示，`-webkit-text-size-adjust: 100%`因为它没有触发，因为它在`@media handheld`查询内。

# codeigniter - 将段或子功能/类添加到 codeigniter

> ID：15499928
> 
> 赞同：0
> 
> 时间：2013-03-19T12:47:05.023
> 
> 标签：codeigniter, uri

我有一个控制器**digital**，在该控制器中，我的一个功能是小部件，然后是小部件的几个公共功能，例如**highlight**。

视图设置为 digital/widgets/highlights.php

我想让 url 显示为 domain.com/digital/widget/highlights 以及面包屑（自动导航）

```
public function widget()
{
$header["pageTitle"] = "TV Listing Widgets and Snippets";

$this->load->helper('breadcrumb');

$this->load->view('templates/header.php', $header);
$this->load->view('digital/widget');
$this->load->view('templates/modal.php');
$this->load->view('templates/footer.php');
}

public function highlights()
{
$header["pageTitle"] = "TV Highlights Widget";

$this->load->helper('breadcrumb');

$this->load->view('templates/header.php', $header);
$this->load->view('digital/widgets/highlights');
$this->load->view('templates/modal.php');
$this->load->view('templates/footer.php');
} 
```

是否可以创建子类或函数或类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:15:55.143

您需要在 CI 中使用路由：

[http://ellislab.com/codeigniter/user-guide/general/routing.html](http://ellislab.com/codeigniter/user-guide/general/routing.html)

您可以将 /digital/highlights/ 映射到 /digital/widget/highlights。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:48:18.827

Thanks! Worked it out

```
public function widgets($widget = null) {

switch($widget) {
case 'highlights':
$this->highlights();
break;
default:
$widget = "widgets";

$this->load->view( 
```

etc etc

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T13:54:56.917

不像你在做什么。

CI url的结构是：

```
domain.com/controller/function/arg1/arg2/etc... 
```

因此，您希望“highlight”成为传递给 widget($value); 的值。然后，在小部件函数内部，一些 IF 语句说

```
if ($value == 'highlight')
{
    $this->highlight();
} 
```

至少，我认为这是你想要做的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-12T16:44:14.657

您可以使用 URI 路由[https://www.codeigniter.com/userguide3/general/routing.html](https://www.codeigniter.com/userguide3/general/routing.html)

```
$routes['digital/widget/highlights'] = 'digital/highlights'; 
```

但是由于您也说过其他一些功能，因此可能是 widget() 功能

如果你想在小部件段中显示一些其他功能，我建议你制作新的控制器 Widget.php，其中包含适用于 Widget 的书面函数，然后将其自定义为 CI URI Routing 可能如下所示：

```
$route['digital/widget/(:any)'] = 'digital/widget/$1'; 
```

希望这会有所帮助，对不起我的英语。

# c++ - 显示列表 > 元素

> ID：15499934
> 
> 赞同：2
> 
> 时间：2013-03-19T12:47:17.137
> 
> 标签：c++

我使用 a`vector< int >`并且我想将所有`vector`s 存储到另一个中。所以我选择了`list<vector<int> >`

稍后我想显示`vector`. `list`但我想知道现在如何显示它们。

如果我只使用`vector`或`list`意味着我可以使用迭代器并显示我`int`的 s. 但我不知道该怎么做。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:50:11.393

嵌套迭代，这将在一行中打印每个向量的数据：

```
list<vector<int>>  data;

// ...

for (auto &v : data)
{
    for (auto &i : v)
    {
      cout << i << " ";
    }
    cout << endl;
} 
```

有点老：

```
for (list<vector<int> >::const_iterator v = data.begin(); v != data.end(); v++)
{
    for (vector<int>::const_iterator i = v->begin(); i != v->end(); i++)
    {
        cout << *i << " ";
    }
    cout << endl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T12:58:29.710

看看[这个问题](https://stackoverflow.com/questions/4850473/pretty-print-c-stl-containers)。它包含一个通用的 C++ 漂亮打印机，支持 STL 容器。

所以你只会`#include`它和你的

```
 list<vector<int>> data;
    cout << data; 
```

会像幸福一样工作。

# process - 关闭终端服务器上的进程（Windows 2008、x64）

> ID：15499936
> 
> 赞同：1
> 
> 时间：2013-03-19T12:47:21.137
> 
> 标签：process, windows-server-2008, autohotkey

**在Windows Sever 2008 (x64)下的***进程关闭*功能需要一些帮助。当我在 Win7 (x64) 上运行此代码时，它会完美地杀死进程，但是当我在终端用户会话 (W2k8，x64) 下运行它时，它会检测到其他用户的进程，并且无法关闭它。我该如何解决？有任何想法吗？

 **脚本代码：

```
check:
{
Process, Exist, name.exe
Msgbox,ErrorLevel: %ErrorLevel%
NewID = %ErrorLevel%
Msgbox,ErrLev: %ErrorLevel% / NewID: %NewID%
if NewID = 0
{
      Msgbox, Nothing to close ;)
      return
}
else
{
      {
  Sleep, 500
      Msgbox, Something seems to be opened...
      Process, Close, name.exe
      Msgbox,Closed(ErrLev=%ErrorLevel%) (NewID=%NewID%)
      Sleep, 100
      Goto, check
      }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:50:07.870

通过 AutoHotKey 获取用户名看起来很困难，为什么不直接使用 PowerShell（也许通过 AutoHotKey 启动）。

这里有两个例子：

[进程所有者](https://stackoverflow.com/questions/11670466/check-for-process-owner-on-remote-machine-and-kill-it-when-owner-is-xyz)
[进程名称](https://stackoverflow.com/questions/10265869/kill-process-by-filename/10265997#10265997)**

# c++ - std::map 是如何排序的

> ID：15499939
> 
> 赞同：-2
> 
> 时间：2013-03-19T12:47:22.410
> 
> 标签：c++, std

我试图理解 std::map 中的顺序。

[http://www.cplusplus.com/reference/map/map/](http://www.cplusplus.com/reference/map/map/)

**在内部，map 中的元素始终按照其内部比较对象（Compare 类型）指示的特定严格弱排序标准按其键排序。**

如果我这样做：

```
 myMap["two"] = 2;
   myMap["three"] = 3;
   myMap["one"] = 1; 
```

然后迭代`myMap`，边走边打印出值，输出会是什么？

我正在寻找一个容器，其中元素按添加顺序排列。在这种情况下，我希望输出 2、3、1 进行迭代。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:50:43.073

向量/先进先出队列只会做您想做的事，而您无需担心地图如何在内部存储对象，或者使用对手头的工作更复杂的数据结构来膨胀您的代码。

std::queue 是一个先进先出队列

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T13:00:04.867

您示例中的顺序取决于您的`std::map`. 请注意，这[`std::map`](http://en.cppreference.com/w/cpp/container/map)是一个带有四个模板参数的模板：

```
std::map< Key, Value, Compare, Allocator > 
```

其中第三个对订单很重要。假设您有`std::map< std::string, int >`，则第三个参数的默认`Compare`值为`std::less< Key >`，即`std::less< std::string >`，这反过来意味着将键（类型为`std::string`）与 进行比较`<`。因此，您的情况下的顺序是`1, 3, 2`因为`std::string("one") < std::string("three")`和`std::string("three") < std::string("two")`。

正如其他人已经指出的那样，您正在寻找一个模拟[序列容器的不同容器](http://en.cppreference.com/w/cpp/container)。

# jaxb - Jackson2 是否提供类似于 JAX-B 的 Marshaller/Unmarshaller Listener 的东西？

> ID：15499941
> 
> 赞同：1
> 
> 时间：2013-03-19T12:47:22.953
> 
> 标签：jaxb, jackson

在某些情况下，我需要在使用 Jackson2 编组/解组 JSON 时更改序列化/反序列化值。

是否存在类似于 javax.xml.bind.Unmarhsaller.Listener/javax.xml.bind.Marshaller.Listener 的机制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:37:09.673

不，有人要求后期处理钩子，尤其是。用于反序列化，但尚未实现。

Jackson 2.2 将带有`Converter`注释 ( `@JsonSerialize(converter=MyConverter.class)`, `@JsonDeserialize(converter=...)`)，它也许可以用于类似目的。这类似于 JAXB `XmlJavaAdapter`。

# unix - 在 Unix 中使用 awk 命令打印用户名

> ID：15499942
> 
> 赞同：1
> 
> 时间：2013-03-19T12:47:23.903
> 
> 标签：unix, awk

我是 unix 新手，并试图理解以下 awk 命令：

```
AWK=/bin/awk
RUID=`/usr/bin/id|$AWK -F\( '{print $2}'|$AWK -F\) '{print $1}'`
echo $RUID 
```

该命令正在打印登录的用户名，但如何使用此命令提取用户名。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T12:50:06.367

也许你可以试试这个：

```
whoami 
```

如果你真的想这样做`awk`：

```
$ id |awk -F'[)(]' '{print $2}'
kent 
```

**编辑** （评论）

当然还有其他方法可以获取当前登录用户名/id：

**获取用户名**

```
kent$  id -un
kent

kent$  echo $USER 
kent

kent$  echo $USERNAME 
kent 
```

**只获取 UID**

```
kent$  echo $UID 
1000

kent$  id -u
1000 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-19T12:59:03.213

该命令使用`-F`参数将`id`命令的输出按给定字符拆分，此处`(`为第一个字符和`)`第二个字符。不知道你是否熟悉管道？

然后使用`print $2`打印第二部分，即第一次出现之后`(`到下一次出现的部分。您可以通过手动调用命令来了解其工作原理：

```
/usr/bin/id| $AWK -F\( '{print $2}' 
```

这返回`username) gid=1000`。

然后`awk`再次调用拆分第一次`awk`运行产生的字符串`)`，然后打印第一个之前的部分`)`。

但是，通过调用`/usr/bin/id -un`甚至更简单的`whoami`.

还可以尝试运行`/usr/bin/id`不带参数的命令以查看`awk`此处解析的原始输出。

# antlr - 我的 ANTLR3 树语法从不匹配与匹配的非常相似的特定模式

> ID：15499946
> 
> 赞同：2
> 
> 时间：2013-03-19T12:47:43.577
> 
> 标签：antlr, antlr3, antlrworks

我正在开发自己的语言应用程序，该应用程序很大程度上基于 Language Implementation Patterns 书中的 Cymbol 语法。我一直在使用 ANTLRworks 开发我的语法，然后使用 Eclipse 在 Java 中实现完整的应用程序。作为我语法的一部分，我有以下两条规则：

```
varDeclaration
  :  'var' ID 'is' dataType (':=' expr )? ';'
     -> ^('var' ^(NAME ID) ^(VARTYPE dataType) ^(VALUE expr)?)
  ;
constantDeclaration
  :  'const' ID 'is' dataType ':=' expr ';'
     -> ^('const' ^(NAME ID) ^(VARTYPE dataType) ^(VALUE expr))
  ; 
```

在运行解析器并打印生成的 AST 后，这两个的输出似乎都是正确的。

然后我运行一个符号定义树匹配器（使用 filter-true）来构建一个符号表。除了输入每个功能/块/等。为了开始新的作用域，我还在自上而下的规则中处理变量和常量的定义（同样，基于语言实现模式书），如下所示：

```
topdown
  :  varDeclaration
  |  constDeclaration
  | ...
  ;

varDeclaration
  :  ^('var' ^(NAME ID) .*) //^(VAR ^(NAME ID) .*) Rewrote this for clarity of example
     {
        System.out.println("In a variable declaration");
     }
  ;

constDeclaration
  :  ^('const' ^(NAME ID) .*)
     {
        System.out.println("Const definition");
     }
  ; 
```

我的问题是只有 constDeclaration 匹配。即使我的输入中有 varDeclaration（由 AST 打印输出验证），我也从未在控制台上看到“在变量声明中”打印，而显示“常量定义”。

我已经尝试了很多东西来调试/解决这个问题：

*   使变量声明的可选初始化表达式不是可选的，使其在语法上与 const 声明除了关键字相同。
*   将关键字“var”更改为其他内容（在本例中为“splunge”）。
*   更改了匹配参数以使用特定的通配符（例如 ^(VAR vn=.vt=.vv=.)）
*   尝试将 varDeclaration 放在自下而上的规则中。

如您所见，我变得非常绝望，因为我不知道为什么一个规则和模式匹配而另一个不匹配。变量和常量声明之间唯一的其他区别是常量声明可以发生在代码块内和顶层（对于全局常量），而变量只能在代码块内声明。我不明白这与为什么代码块中的 const 将匹配而 var 不匹配有什么关系。

此代码是不正确匹配的示例：

```
function foo(int a) returns (int) {
  const PI is real := 3.14159;  // Recognized
  var r is real;                // Not recognized
  var s is int := 4;            // Not recognized
  const TESTCONST is int := 3;  // Recognized
  // Other code (if statements, for loops) recognized.
} 
```

我已经尝试解决这个问题好几天了，但我束手无策。我错过了什么？

**附加信息（2013 年 3 月 20 日添加）**

为了进一步澄清，输入声明，如

```
const y is real := 2.4;  // Recognized
var temp is int := 0 ;   // Not recognized 
```

在 AST 中生成以下内容：

```
(const (NAME y) (VARTYPE (SCALAR (NAME (TYPEID real)))) (VALUE (EXPR 2.4)))
(var (NAME temp) (VARTYPE (SCALAR (NAME (TYPEID int)))) (VALUE (EXPR 0))) 
```

const AST 与上述树语法匹配，var AST 不匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:35:54.010

在您的解析器中，您匹配文字`'var'`，但在您的树解析器中，您正在寻找`^(VAR ...`. 您的词法分析器是否完全包含以下规则？

```
VAR : 'var'; 
```

因为`constDeclaration`在树解析器（你说它有效）中，你使用的文字语法与你在解析器中使用的相同：`^('const' ...`

# c++ - Visual Studio 2010，有什么方法可以添加前缀，例如 (C:\) #include 大量 标题？

> ID：15499951
> 
> 赞同：0
> 
> 时间：2013-03-19T12:48:08.330
> 
> 标签：c++, boost, boost-asio

我从在线教程中获得了一些 C++ Boost 代码。每个路径都以一种格式声明。

有没有办法包含 Visual Studio 来为 who 项目添加一个前缀，允许我 #include 该格式的文件？

它是一个接一个的头文件，它们都引用了该格式的更多头文件。

我知道 QT Creator 有一个 #INCLUDEPATHS 选项，它允许您导入一个目录，然后直接从中引用。

任何帮助将非常感激。

```
#include <boost\asio.hpp>
using namespace boost;

class SimpleSerial
{
public:
/**
 * Constructor.
 * \param port device name, example "/dev/ttyUSB0" or "COM4"
 * \param baud_rate communication speed, example 9600 or 115200
 * \throws boost::system::system_error if cannot open the
 * serial device
 */
SimpleSerial(std::string port, unsigned int baud_rate)
: io(), serial(io,port)
{
    serial.set_option(boost::asio::serial_port_base::baud_rate(baud_rate));
}

/**
 * Write a string to the serial device.
 * \param s string to write
 * \throws boost::system::system_error on failure
 */
void writeString(std::string s)
{
    boost::asio::write(serial,boost::asio::buffer(s.c_str(),s.size()));
}

/**
 * Blocks until a line is received from the serial device.
 * Eventual '\n' or '\r\n' characters at the end of the string are removed.
 * \return a string containing the received line
 * \throws boost::system::system_error on failure
 */
std::string readLine()
{
    //Reading data char by char, code is optimized for simplicity, not speed
    using namespace boost;
    char c;
    std::string result;
    for(;;)
    {
        asio::read(serial,asio::buffer(&c,1));
        switch(c)
        {
            case '\r':
                break;
            case '\n':
                return result;
            default:
                result+=c;
        }
    }
}

private:
boost::asio::io_service io;
boost::asio::serial_port serial;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:59:37.127

单击菜单栏中的“项目”，然后选择“属性...”。然后使用菜单树转到“配置属性”/“C/C++”/“常规”并将目录添加到“附加包含目录”。

# python - 如何仅在 Python 中将此列表元组更改为列表？

> ID：15499952
> 
> 赞同：-7
> 
> 时间：2013-03-19T12:48:08.560
> 
> 标签：python, list, tuples

我有一个这样的列表：

```
 [[(u'hello@hello.com',)], [(u'hello@hello.com',)]] 
```

我想将其转换为：

```
[['hello@hello.com'], ['hello@hello.com']] 
```

我怎样才能做到这一点？

另一个例子：输入：`[[(u'hello',), (u'hello',)], [(u'hello',)]]` 应该返回`[['hello@hello.com', 'hello@hello.com'], ['hello@hello.com']]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:17:07.467

```
test = [[(u'hello',), (u'hello',)], [(u'hello',)]]
for i, part_i in enumerate(test):
    for j, part_j in enumerate(part_i):
        test[i][j] = str(part_j[0]) 
```

或者，如果您更喜欢单行版本：

```
test = [[(u'hello',), (u'hello',)], [(u'hello',)]]
result = [[str(j[0]) for j in i] for i in test] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:50:18.707

```
new = [[j[0].encode('utf-8') for j in i] for i in old] 
```

UTF-8 只是一个例子，你真的应该确保你得到正确的编码。

# jquery - 屏幕宽度大于 480 时禁用 jquery 功能

> ID：15499953
> 
> 赞同：1
> 
> 时间：2013-03-19T12:48:13.250
> 
> 标签：jquery, width, screen

我是一个新手（不是在开玩笑吗？！），我不能让它工作。我在这里做错了什么？如果屏幕宽度大于 480，我不希望此函数执行任何操作，仅在屏幕宽度为 480 及以下时触发。

```
if ( screen.availWidth < 480 ) {

 $(document).ready(function(){
 $(".reklam").click(function(){
 $('.reklam').attr('src','bilder/480/reklam_on.jpg');

  });
});

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T12:53:20.077

因为屏幕大小可以改变（如果用户重新调整窗口大小），在事件中使用 if 语句会更相关吗？

参见示例：

```
$(document).ready(function(){
    $(".reklam").click(function(){
        if ($(window).width() < 480) {
            $('.reklam').attr('src','bilder/480/reklam_on.jpg');
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T12:52:33.423

我会`screen width`直接在函数内部检查 1 ，如下所示：

```
$(".reklam").click(function(){
  var screenWidth = screen.width;
  if (screenWidth <= 480) {
      $('.reklam').attr('src','bilder/480/reklam_on.jpg');
  }  else {
       alert('Screen width too high!');
  }
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T12:52:33.527

```
$(document).ready(function(){
 $(".reklam").click(function(event){
     if ( screen.availWidth < 480 ) {
         $('.reklam').attr('src','bilder/480/reklam_on.jpg');
    }
    else {
         event.stopPropagation();
         return false;
    }
 });
}); 
```

或类似的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T12:52:51.513

```
 var winWidth = 0; 
    $(window).resize(function() {
     winWidth = $(document).width();
    }); 
```

在你的函数中写

```
if(winWidth >480)
{
  $(".reklam").click(function(){
 $('.reklam').attr('src','bilder/480/reklam_on.jpg');
});

} 
```

或者

```
$(document).ready(function(){
    $(".reklam").click(function(){
        if ($(window).width() < 480) {
            $('.reklam').attr('src','bilder/480/reklam_on.jpg');
        }
    });
}); 
```

# winapi - 带有默认图像/照片查看器的 Windows 7 上的 ShellExecuteEx

> ID：15499954
> 
> 赞同：4
> 
> 时间：2013-03-19T12:48:14.077
> 
> 标签：winapi, windows-7

我们有一个在 Windows XP、Windows Vista、Windows 7 等上运行的桌面应用程序（它是用 cobol 编写的，但我认为在这种情况下它是不相关的）。

在我们的源代码中，我们`ShellExecuteEx`使用`open`.
在这之后——为了等待被调用程序的终止——我们`WaitForSingleObject`用`infinite`.

它可以正常工作，仅在带有图像的 windows-7 机器和默认图像查看器上我们有问题。

如果`ShellExecuteEx`在那里调用 jpg 或 tif 文件并且机器只有默认的 windows 图像/照片查看器，则会发生错误。`WaitForSingeObject`返回`WAIT_FAILED`并`GetLastError()`说：`INVALID_HANDLE`。

当有另一个图像查看器（例如 Picasa 照片查看器、Evince windows 版本或 JPEGView）时，这不会在 Windows 7 上发生。

我不知道 Windows 7 和`ShellExecuteEx`. `ShellExecuteEx`不返回错误代码！

提前非常感谢。

更新：感谢您的回答。

@David Heffernan：正如你所说，在它不起作用的情况下，ShellExecuteEx 的返回码（hInstApp）为 42（好的！）并且 hProcess 为 NULL！（唯一启动的新进程是 dllhost.exe。）

但是，我在另一台 Windows 7 机器上测试了整个东西。在这种情况下，我做了以下事情：
- 在这台机器上，Picasa 是默认查看器。
- 我切换回默认设置（Windows 照片查看器）。
- 有效！
- 然后我没有关闭照片查看器并在我们的应用程序中再次按下“显示”。- 它也可以工作（弹出一个新的查看器实例），即使 Windows 照片查看器已经在运行！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T13:09:03.060

现代 Windows 版本中图像上动词的默认处理程序`open`可能不会调用新进程。它很可能只是在已经运行的 shell 进程中显示图像。发生这种情况时，返回的进程句柄是`NULL`. 这就是这里发生的事情，这就是为什么调用以`WaitForSingleObject`您描述的方式失败的原因。

的文档[`SHELLEXECUTEINFO`](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb759784.aspx)涵盖了这一点：

> 即使 fMask 设置为 SEE_MASK_NOCLOSEPROCESS，如果没有启动进程，hProcess 也会为 NULL。例如，如果要启动的文档是 URL，并且 Internet Explorer 的实例已经在运行，它将显示该文档。没有启动新进程，并且 hProcess 将为 NULL。

这一切意味着你程序的那部分的设计是基于一个有缺陷的假设。即假设调用`ShellExecuteEx`将始终产生一个您可以等待终止的进程句柄。您将需要找到其他方法来解决您的问题。

# python - 帮助输出中的 argparse 子命令顺序

> ID：15499955
> 
> 赞同：1
> 
> 时间：2013-03-19T12:48:14.143
> 
> 标签：python, argparse

使用 Python 的`argparse`模块，有没有办法在帮助输出中对通过使用子解析器创建的子命令进行排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:48:11.567

我实际上找到了一种使用`argparse.HelpFormatter`.

```
class CustomHelpFormatter(argparse.HelpFormatter):
    def _iter_indented_subactions(self, action):
        try:
            get_subactions = action._get_subactions
        except AttributeError:
            pass
        else:
            self._indent()
            if isinstance(action, argparse._SubParsersAction):
                for subaction in sorted(get_subactions(), key=lambda x: x.dest):
                    yield subaction
            else:
                for subaction in get_subactions():
                    yield subaction
            self._dedent() 
```

# iis - IIS 7.5 静态内容压缩（不一致）

> ID：15499956
> 
> 赞同：8
> 
> 时间：2013-03-19T12:48:22.323
> 
> 标签：iis, iis-7.5, gzip, http-compression

我有以下 web.config：

```
<urlCompression doStaticCompression="true" />
        <httpCompression>
            <dynamicTypes>
                <add mimeType="text/*" enabled="true" />
                <add mimeType="message/*" enabled="true" />
                <add mimeType="application/javascript" enabled="true" />
                <add mimeType="*/*" enabled="false" />
            </dynamicTypes>
            <staticTypes>
                <add mimeType="text/*" enabled="true" />
                <add mimeType="message/*" enabled="true" />
                <add mimeType="application/javascript" enabled="true" />
                <add mimeType="*/*" enabled="false" />
            </staticTypes>
        </httpCompression> 
```

可能计划不允许动态压缩

问题是，当我请求 css 或 js 时，IIS 以 GZIP 响应并添加 Varly:accept-encoding 有时不压缩 CSS 或 JS，我找不到它是某种随机的模式。

我总是尝试 CTRL F5，即使您访问 www.mysite.com css 和 js 是否被随机压缩。

注意：托管在 NetworkSolution。

我的配置或 IIS 有什么问题。

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-25T23:55:40.933

经过大量搜索，我终于找到了在我的 IIS 7.5 上更一致地进行压缩的原因。首先，IIS 不会压缩文件，除非它加载得足够频繁。这就引出了一个问题“IIS 经常考虑什么？” 嗯，默认值是每 10 秒 2 次。哎呀！

此设置可以在 web.config 中更改，但需要先在 applicationHost.config 中解锁该部分。以下是命令：

首先解锁部分：

> **C:\Windows\System32\inetsrv\appcmd.exe 解锁配置 /section:system.webServer/serverRuntime**
> 
> 在配置路径“MACHINE/WEBROOT/APPHOST”中解锁部分“system.webServer/serverRuntime”。

现在完成了，编辑 web.config 文件

```
<?xml version="1.0" encoding="UTF-8"?> <configuration>
    <system.webServer>
        <serverRuntime frequentHitThreshold="1" frequentHitTimePeriod="10:00:00" />
        ... 
```

在这种情况下，我将其设置为每 10 小时点击一次文件。您可以根据需要调整这些值。这是解释 serverRuntime 元素的文档：

[http://www.iis.net/configreference/system.webserver/serverruntime](http://www.iis.net/configreference/system.webserver/serverruntime)

我希望这有助于您的压缩正常工作。

# javascript - 使用javascript插入相邻和计算

> ID：15499959
> 
> 赞同：-2
> 
> 时间：2013-03-19T12:48:31.360
> 
> 标签：javascript

有人可以解释一下我如何没有得到数字字符串，而是加号的结果吗？

这是我的代码：

```
var pr01 = 1.8;
var pr02 = 2.6;
//for field one 
        document.all.PRI.insertAdjacentText("BeforeEnd", pr01);

//for field two
        document.all.PRI.insertAdjacentText("BeforeEnd", pr02); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:54:45.717

尝试这个：

```
var pr01 = 1.8;
var pr02 = 2.6;

document.all.PRI.insertAdjacentText("BeforeEnd", pr01 + pr02); 
```

# objective-c - 在 xcode 中找不到 DTCoreText.h 文件

> ID：15499960
> 
> 赞同：2
> 
> 时间：2013-03-19T12:48:35.243
> 
> 标签：objective-c

我是 Objective C 的新手，我正在尝试在我的项目中使用 DTCoreText 来获取 html 内容。我点击了这个链接（[https://github.com/yas375/DTCoreTextExperiments/tree/master/Pods/DTCoreText](https://github.com/yas375/DTCoreTextExperiments/tree/master/Pods/DTCoreText)），但我收到以下错误： DTCoreText.h file not found 。谁能帮帮我吗。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T21:18:03.720

我刚刚遇到了完全相同的问题，**DTCoreText.h file not found**。我遵循了[https://docs.cocoanetics.com/DTCoreText/docs/Setup%20Guide.html](https://docs.cocoanetics.com/DTCoreText/docs/Setup%20Guide.html)上的设置指南，但它仍然没有用。

问题原来是我使用的路径与指南中的不完全相同。我已经包含了一些其他外部库，所以我将 DTCoreText 放在 下`External Libraries/DTCoreText`，并`External Libraries/DTCoreText/Core/**`在 User Header Search Paths 字段中写入。

我的解决方案是将其更改为`"External Libraries/DTCoreText/Core/**"`，注意添加的引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-14T10:37:10.830

不要下载 zip 文件，只需克隆项目，您可以在其中打开 Xcode 项目，然后运行演示：

`git clone --recursive https://github.com/Cocoanetics/DTCoreText.git Externals/DTCoreText`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T01:30:35.580

您的问题不应该是复制与参考。[DTCoreText 设置指南](https://docs.cocoanetics.com/DTCoreText/docs/Setup%20Guide.html)说“确保取消选中复制复选框。您要创建参考，而不是副本。”

您可能希望遵循该文档并从[原始](https://github.com/Cocoanetics/DTCoreText)存储库中的 DTCoreText 演示代码开始，以便开始。

如果没有您的整个项目，我对您当前的问题无能为力，但您可以检查项目“构建设置”选项卡中“用户标题搜索路径”中的路径。我添加了 DTCoreText 项目作为参考，就像安装文档说的那样，并且使用`Externals/DTCoreText/Core/**`正常。确保你有`**`, 意味着路径应该被递归搜索。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T13:06:31.947

很简单，在添加 DTCoreText 时，您没有选择选项“复制目标文件夹中的项目（如果需要）。只需在将文件添加到项目时选择该选项。
还有一件事，在询问时始终详细描述您拥有的圆顶问题。它有助于找到问题的确切解决方案。

# paypal - 在 PHP 中使用 IPN 的 Paypal 无法在新的 Beta 开发人员沙箱中运行

> ID：15499963
> 
> 赞同：0
> 
> 时间：2013-03-19T12:48:39.373
> 
> 标签：paypal, paypal-ipn, paypal-sandbox

我已经在 PHP 中将 PayPal 与 IPN 集成，在新的 Paypal 开发之前，它重定向到沙盒并使用沙盒成功登录，它允许测试支付，现在它重定向到 beta 开发者网站并且不测试支付，

以下是我使用的 PHP Paypal 类，

```
class paypal_class {
var $error; // holds the error encountered
var $ipn_log; // log IPN results
var $ipn_log_file; // filename of the IPN log
var $ipn_response; // holds the IPN response from PayPal
var $ipn_data = array(); // contains the POST values for IPN
var $fields = array(); // holds the fields to submit to PayPal
function paypal_class() {
// constructor.
$this->paypal_url = 'https://www.paypal.com/cgi-bin/webscr';
$this->error = '';
$this->ipn_log_file = '.ipn_results.log';
$this->ipn_log = true;
$this->ipn_response = '';
$this->add_field('rm','2'); // Return method = POST
$this->add_field('cmd','_xclick');
}
function add_field($field, $value) {
// adds a key=>value pair to the fields array
$this->fields["$field"] = $value;
}
function submit_paypal_post() {
// generates an HTML page consisting of
// a form with hidden elements which is submitted to PayPal
echo "<html>\n";
echo "<head><title>Processing...</title></head>\n";
echo "<body onLoad=\"document.forms['paypal_form'].submit();\">\n";
echo "<center><h2>Please wait, your order is being processed and you";
echo " will be redirected to the paypal website.....</h2></center>\n";
echo "<form method=\"post\" name=\"paypal_form\" ";
echo "action=\"".$this->paypal_url."\">\n";
foreach ($this->fields as $name => $value) {
echo "<input type=\"hidden\" name=\"$name\" value=\"$value\"/>\n";
}
echo "<center><br/><br/>If you are not automatically redirected to ";
echo "paypal within 5 seconds...<br/><br/>\n";
echo "<input type=\"submit\" value=\"Click Here\"></center>\n";
echo "</form>\n";
echo "</body></html>\n";
}
function validate_ipn() {
// parse the paypal URL
$url_parsed=parse_url($this->paypal_url);
// generate the post string from the _POST vars
$post_string = '';
foreach ($_POST as $field=>$value) {
$this->ipn_data["$field"] = $value;
$post_string .= $field.'='.urlencode (stripslashes ($value)).'&';
}
$post_string .= "cmd=_notify-validate";
// open the connection to paypal
$fp = fsockopen($url_parsed[host],"80",$err_num,$err_str,30);
if(!$fp) {
// Print the error if not able to open the connection.
$this->error = "Error no. $errnum: $errstr";
$this->log_ipn_results(false);
return false;
} else {
// Post data back to paypal
fputs($fp, "POST $url_parsed[path] HTTP/1.1\r\n");
fputs($fp, "Host: $url_parsed[host]\r\n");
fputs($fp, "Content-type: application/x-www-form-urlencoded\r\n");
fputs($fp, "Content-length: ".strlen($post_string)."\r\n");
fputs($fp, "Connection: close\r\n\r\n");
fputs($fp, $post_string . "\r\n\r\n");
// loop through the response from the server and append to variable
while(!feof($fp)) {
$this->ipn_response .= fgets($fp, 1024);
}
fclose($fp); // close connection
}
if (eregi("VERIFIED",$this->ipn_response)) {
// Valid IPN.
$this->log_ipn_results(true);
return true;
} else {
// Invalid IPN.
$this->error = 'IPN Validation Failed.';
$this->log_ipn_results(false);
return false;
}
}
function log_ipn_results($success) {
if (!$this->ipn_log) return;
// Timestamp
$text = '['.date('m/d/Y g:i A').'] - ';
// Success or failure
if ($success) $text .= "SUCCESS!\n";
else $text .= 'FAIL: '.$this->error."\n";
// Log the POST variables
$text .= "IPN POST Values from Paypal:\n";
foreach ($this->ipn_data as $key=>$value) {
$text .= "$key=$value, ";
}
// response from the paypal server
$text .= "\nIPN Response from Paypal Server:\n ".$this->ipn_response;
// Write to log
$fp=fopen($this->ipn_log_file,'a');
fwrite($fp, $text . "\n\n");
fclose($fp); // close file
}
} 
```

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:05:32.833

贝宝做了一些改变。[现在在https://developer.paypal.com/](https://developer.paypal.com/)上创建一个帐户，我使用与沙盒相同的电子邮件 ID。注册过程后登录[https://developer.paypal.com/](https://developer.paypal.com/) 单击应用程序 单击沙盒帐户 要导入以前的沙盒数据，请单击“导入数据”链接或单击“创建帐户”按钮创建新的测试帐户

Paypal 在注册时会创建一个默认商家帐户。要查看任何沙盒帐户，只需单击它。会有新的选择。浏览这些功能。

在这里，您可以再次使用您的沙盒详细信息

# html - 我还可以为 Icon 使用什么 html 标签？

> ID：15499968
> 
> 赞同：-4
> 
> 时间：2013-03-19T12:48:58.727
> 
> 标签：html, css, semantics

不幸的是，我不能使用`<SPAN>`或`<I>`由于特定的自定义 cms ......所以，我想知道还有什么其他标签适合用于图标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T12:53:10.710

对于初学者来说，作为表示[替代声音或情绪](http://www.w3.org/TR/html5/text-level-semantics.html#the-i-element)`<i>`的图标并不适合。但是，这可能取决于使用图标的位置和方式。`i`

`<span>`如果图标是基于字体的会更合适。

`<img>`如果图标是基于图像的会更合适。

听起来您的问题可能与围绕`i`和`span`标签的预先存在的 CSS 规则有关。您可以简单地覆盖它们：

```
span {
    margin:0;
    padding:0;
    background:transparent;
    border:none;
    /* etc... */
} 
```

**从评论编辑：**

为了防止 CMS 删除*空* `span`标签，只需给它一些内容：

```
<span class="icon">&nbsp;</span> 
```

这`&nbsp;`不应超过图标的高度或宽度，因此不会影响样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T12:56:59.453

如果您在谈论使用背景图像，我总是使用好的 ol' `div`，因为您不太可能有任何 css 冲突

# c# - 防止子元素失去焦点时触发 LostFocus

> ID：15499977
> 
> 赞同：6
> 
> 时间：2013-03-19T12:49:23.420
> 
> 标签：c#, wpf, user-controls, lostfocus

我有一个用户控件，它有几个子元素，包括复选框和文本框。

我只想在整个用户控件上失去焦点（例如单击用户控件之外的按钮）**时才为我的用户控件触发 LostFocus 事件。**

目前，当我在用户控件的子元素之间移动（例如从一个文本框到另一个文本框）时，也会触发 LostFocus 事件。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-19T13:03:50.340

```
protected override void OnLostFocus(EventArgs args)
{
      if (!ContainsFocus)
      {
          // Only do something here
      }
} 
```

诀窍是检查 ContainsFocus

在您的构造函数中，您可能必须通过调用添加类似于以下内容的代码来捕获您的子控件失去的焦点（因为当它们失去焦点到其他地方时您不会得到直接通知）

```
CaptureLostFocus(this); 
```

并实施：

```
void CaptureLostFocus(Control control)
{
      foreach(Control child in control.Controls)
      {
           child.LostFocus += (s, e) => OnLostFocus(e);
           CaptureLostFocus(control);
      }
} 
```

# ios - 关于 UIScrollView 的一些问题

> ID：15499982
> 
> 赞同：2
> 
> 时间：2013-03-19T12:49:36.940
> 
> 标签：ios, objective-c, uiscrollview

我很难理解一些您可能觉得简单的问题`UIScrollView`。

1.  为什么我们增加`contentSize`而不是增加边界`UIScrollView`？实际上，我不明白界限和`contentSize`做什么。

2.  当我设置`pagingEnabled`为 YES 时，scrollView 怎么知道在哪里停止滚动？

3.  我想在我的`UIScrollView`. ( `pagingEnabled = YES`) 我在网上搜索，我找到了以下代码，rob mayoff 写的：

> ```
> - (void)viewDidLoad {
>     [super viewDidLoad];
> 
>     NSArray *colors = [NSArray arrayWithObjects:[UIColor redColor], [UIColor greenColor], [UIColor blueColor], nil];
> 
>     #define kGutterWidth 20
> 
>     UIScrollView *scrollView = self.scrollView;
>     CGRect scrollViewFrame = scrollView.frame;
>     scrollViewFrame.size.width += kGutterWidth;
>     scrollView.frame = scrollViewFrame;
> 
>     CGSize scrollViewSize = scrollView.bounds.size;
> 
>     for (int i = 0; i < colors.count; i++) {
>         CGRect frame = CGRectMake(scrollViewSize.width * i, 0,
>             scrollViewSize.width - kGutterWidth, scrollViewSize.height);
>         UIView *subview = [[UIView alloc] initWithFrame:frame];
>         subview.backgroundColor = [colors objectAtIndex:i];
>         [scrollView addSubview:subview];
>         [subview release];
>     }
> 
>     scrollView.contentSize = CGSizeMake(
>         colors.count * scrollViewSize.width,
>         scrollViewSize.height);
> } 
> ```

代码来源： [如何创建分页滚动视图，视图之间有空间](https://stackoverflow.com/questions/12361519/how-to-create-a-paging-scrollview-with-space-between-views)

这段代码可以正常工作，但只要我看不懂也没关系。

1.  我知道最终页面将以原始大小加载，但我不明白它是如何发生的，因为每个页面都减去了 kGutterWidth。

2.  为什么rob用kGutterWidth增加了scrollView的frame？

3.  好吧，这个问题可能听起来很愚蠢，但我真的不明白。在代码中，Rob 创建了一个名为的新 scrollView 对象`scrollView`。它的价值等于`self.scrollView`价值。好吧，我不明白对 , 所做的更改是如何`scrollView`影响`self.scrollView`的，因为它们是不同的对象。它们的内存地址不同。

我很长一段时间都在努力理解这些问题。今天我决定把它们写在这里。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T13:11:55.517

1-您可以检查`bounds`a 属性的实际描述`UView`：

> 边界矩形，描述视图在其自己的坐标系中的位置和大小。

而实际`contentSize`：

```
The size of the content view. 
```

第一个与`UIView`相对于自身的实际大小有关（`frame`相对于它的`superView`）。第二个与它有关`contentSize`，其中一个`contentSize`大于它的`frame`，给你滚动能力。

2-从文档中：

> 如果此属性的值为 YES，则当用户滚动时，滚动视图会在滚动视图边界的倍数处停止。默认值为 NO。

我猜它是根据你的大小（宽度）`UIScrollView`和它的`contentSize`. 例如，带有 320p`contentSize` `UIScrollView`帧的 640p 将有 2 个“页面”。(640/320 = 2)。

3-通过将`UIView`您拥有的“内部”每页小于实际页面来创建间隙。这基本上就是 Rob 在这里所做的：

```
 CGRect frame = CGRectMake(scrollViewSize.width * i, 0,
            scrollViewSize.width - kGutterWidth, scrollViewSize.height); 
```

因此`UIScroll`，具有以下框架`(0.0f,0.0f,320.0f,480.0f)`和 a`contentSize`的a`(1280.0f,480.0f)`将给出：

第一项的框架 =>`(0.0f,0.0f,300.0f,480.0f)`

第二个项目的框架=>`(320.0f,0.0f,300.0f,480.f)`

第三项的框架 =>`(640.0f,0.0f,300.0f,480.0f)`

第四项的框架=> `(960.0f,0.0f,300.0f,480.0f)`

* * *

**编辑 1.0：**

> 我完全不明白。“将视图放在每个页面中小于实际页面”是什么意思？

举个例子，我用过： 所以你目前有 4 个“页面”，实际上你拥有的基本上是`UIScrollView`划分的 3 次，这给了你 4 个不同的地方，我们可以称之为页面。在每个“页面”内部，为了在每个页面之间给人一种“空间”的感觉，您将放置一个`UIView`比实际页面更小的页面。

**编辑 2.0：**

也许更直观的东西会帮助你：

![在此处输入图像描述](../Images/3a52bfec4077743f40a7e214b36b0512.png)

**编辑 3.0：**

如果您了解分页的工作原理，这很容易...... 320px + 20px = 340px，这比 iPhone 屏幕尺寸的 320px 还大。由于每个`UIView`添加到`UIScrollView`340-20 = 320px，您将拥有大小为 340px 的“页面”。所以 340*3（个数`UIViews`）它给出了 1020px 最终基本上是 3 UIViews + 3 Spaces

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:01:35.743

1.  边界是视图的真正容器。contentSize 是“可视”大小。示例：一个高度为 100 像素但包含十几个单元格的表格，其中单元格为 20 像素。您的总大小约为 240 像素，这是 contentSize，但边界高度为 100 像素。

# java - 如何将字符串转换为字节？

> ID：15499986
> 
> 赞同：1
> 
> 时间：2013-03-19T12:49:53.437
> 
> 标签：java, bytearray

如何`"00110011"`使用 Java 将包含数字的字符串转换为字节？我尝试了一些代码如下 -

```
System.Text.Encoding enc = System.Text.Encoding.ASCII; 
byte[] myByteArray = enc.GetBytes("a text string"); 
string myString = enc.GetString(myByteArray ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:53:57.690

尝试：

```
int num = Integer.parseInt("00110011", 2);
byte b = (byte)num; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:55:00.347

您的意思是将表示为字符串的二进制数转换为int？

如果是这样，那么：

```
String binaryString = "00110011";
int base = 2;
int decimal = Integer.parseInt(binaryString, base); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-19T12:53:45.463

尝试这样的事情

```
String str =  "00110011";
byte[] bytes = str.getBytes(); 
```

或者，您可以向 getBytes 发送编码，例如“UTF-16”，所以`str.getBytes("UTF-16")`

# mysql - 删除所有值并留下一个

> ID：15499992
> 
> 赞同：2
> 
> 时间：2013-03-19T12:50:07.423
> 
> 标签：mysql, database, database-design

我有一张像这样的桌子：

```
uid | name | user_id
--------------------
1   | aaa  | 111 
2   | bbb  | 111
3   | ccc  | 222
4   | aaa  | 222
5   | vvv  | 333
6   | zzz  | 333
7   | aaa  | 111
8   | bbb  | 111 
```

我想写一个查询，就像它会删除所有名称`aaa`但留下一次一样`aaa`。

输出如下：

```
 uid | name | user_id
  --------------------
    1 | aaa  | 111
    2 | bbb  | 111
    3 | ccc  | 222
    4 | aaa  | 222
    5 | vvv  | 333
    6 | zzz  | 333 
```

是否可以通过查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:53:00.623

如果您想保留具有最低 id 值的行，请尝试类似的方法

```
DELETE n1 FROM tablename n1, tablename n2 WHERE n1.uid > n2.uid AND n1.name = n2.name 
```

如果要保留具有最高 id 值的行。

```
DELETE n1 FROM tablename n1, tablename n2 WHERE n1.uid < n2.uid AND n1.name = n2.name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T07:53:12.587

```
DELETE  a
FROM    table tbl
        LEFT JOIN
        (
            SELECT  user_id, MIN(uid) min_uid, name
            FROM    table
            GROUP   BY user_id, name
        ) tbl1 ON  tbl.user_id = tbl1.user_id AND
                tbl.uid = tbl1.min_uid AND
                tbl.name = tbl1.name
WHERE   tbl1.user_id IS NULL 
```

您必须同时比较 name 和 uid 才能删除所有重复值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T12:52:05.697

是的，虽然你需要小心这个。

```
ALTER IGNORE TABLE `table` ADD UNIQUE `name`; 
```

（如果这不起作用，请检查文档以获取确切的语法）

这将使“名称”列唯一并无情地删除所有重复的条目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T12:52:44.480

你也可以使用`DISTINCT`。

```
select distinct name from my_table 
```

# javascript - 如何在 requirejs 中使用角度场景

> ID：15499997
> 
> 赞同：7
> 
> 时间：2013-03-19T12:50:13.750
> 
> 标签：javascript, angularjs, requirejs, angular-scenario

当您的 Angular 应用程序在 DOM 上准备就绪时，Angular-scenario 运行良好。使用 requirejs 或其他 AMD 库时并非如此。如何在角度场景中添加对 AMD 的支持？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T12:50:13.750

您需要做的是覆盖默认的帧加载行为并在您的 amd 应用程序准备好时发出一个新事件。

第一件事是在您的 Angular 应用程序中添加以下行以及 angular.bootstrap 调用。角度场景需要此数据。

```
angular.bootstrap(document, ['app']);

var html = document.getElementsByTagName('html')[0];

html.setAttribute('ng-app', 'app');
html.dataset.ngApp = 'app';

if (top !== window) {
    top.postMessage({
        type: 'loadamd'
    }, '*');
} 
```

接下来，在您的 e2e 跑步者中，您必须包含这些行。如果是外部脚本，则必须在 angular-scenario 之后加载，并且必须在 DOM 准备好之前对其进行解析：

```
/**
 *  Hack to support amd with angular-scenario
 */
(function() {
    var setUpAndRun = angular.scenario.setUpAndRun;

    angular.scenario.setUpAndRun = function(config) {
        if (config.useamd) {
            amdSupport();
        }
        return setUpAndRun.apply(this, arguments);
    };

    function amdSupport() {
        var getFrame_ = angular.scenario.Application.prototype.getFrame_;

        /**
         *  This function should be added to angular-scenario to support amd. It overrides the load behavior to wait from
         *  the inner amd frame to be ready.
         */
        angular.scenario.Application.prototype.getFrame_ = function() {
            var frame = getFrame_.apply(this, arguments);
            var load = frame.load;

            frame.load = function(fn) {
                if (typeof fn === 'function') {
                    angular.element(window).bind('message', function(e) {
                        if (e.data && e.source === frame.prop('contentWindow') && e.data.type === 'loadamd') {
                            fn.call(frame, e);
                        }
                    });
                    return this;
                }
                return load.apply(this, arguments);
            }

            return frame;
        };
    }
})(); 
```

最后，要启用 amd 配置，您必须将属性 ng-useamd 添加到 angular-scenario 的 script 标签。

```
<script type="text/javascript" src="lib/angular-1.0.3/angular-scenario.js" ng-autotest ng-useamd></script> 
```

你现在准备好了

*使用角度场景 v1.0.3 测试*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-14T18:18:44.947

上面的答案在我的场景中部分失败（Angular 1.1.4，fresh Karma）。在调试视图中它运行良好，在正常的概述页面中它失败了。我注意到一个额外的嵌套 .

我将代码更改为向测试应用程序的父 iframe 发送消息。

```
if (top !== window) {
    window.parent.postMessage({
        type: 'loadamd'
    }, '*');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-06T13:22:02.943

接受的答案是绝对正确的，但很遗憾您必须将该代码放入您的页面中。

因此，如果有帮助，我为 karma 创建了一个预处理器，以将“修复”注入作为测试运行的一部分。

代码：[https](https://github.com/tapmantwo/karma-ng-bootstrap-fix-preprocessor) ://github.com/tapmantwo/karma-ng-bootstrap-fix-preprocessor npm：[https ://www.npmjs.org/package/karma-ng-bootstrap-fix-preprocessor](https://www.npmjs.org/package/karma-ng-bootstrap-fix-preprocessor)

请注意，这仅在您通过 karma 提供文件时才有效。如果您代理它们，它们不会经过预处理器。因此，作为替代方案，我有一个 ng-scenario 的分支，它执行类似的操作以允许手动引导的站点运行；

[https://github.com/tapmantwo/karma-ng-scenario](https://github.com/tapmantwo/karma-ng-scenario)

这不是节点模块，因此您必须手动设置它，但最好（恕我直言）有这样的东西，而不是感染生产代码只是为了让测试通过。