# StackOverflow 问答 13042000-13042999

# php - 将单选按钮的选择插入 MySQL

> ID：13042001
> 
> 赞同：1
> 
> 时间：2012-10-24T02:03:39.807
> 
> 标签：php, mysql, forms, button, radio

不幸的是，我无法准确地找到我在网上寻找的东西来解决这个问题。

无论如何，我有三个单选按钮，我需要将从列表中选择的单个按钮的选择推送到 MySQL。

目前使用以下作为我的单选按钮并提交：

```
 <input class="radiobutton" type="radio" name="1" id="1">1</div>
   <input class="radiobutton" type="radio" name="2" id="2">2</div>
   <input class="radiobutton" type="radio" name="3" id="3">3</div>
   <input type="submit" name="submit" value="Update">` 
```

有人可以帮助我获取所选单选按钮并将其插入 MySQL 的语法吗？

语法的一个例子是 UPDATE tblwhatever.setting SET value='$x' where setting='Y';

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T02:22:00.433

考虑以下：

```
<input class="radiobutton" type="radio" name="radio" id="1" value="1" onclick="document.getElementById('2').checked = false;"/>
<input class="radiobutton" type="radio" name="radio" id="2" value="2" onclick="document.getElementById('1').checked = false;"/> 
```

请注意，我给了他们相同的`name`属性。提交表单后，我们将检索`$_POST['radio']`并`value`确定选择了哪个单选按钮。如果选中，该`onclick`属性将取消选中另一个单选按钮。例如：如果选中单选按钮，则`id="1"`取消选中`id="2"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T02:38:26.293

```
 <form method='POST' >
<input class="radiobutton" type="radio" 

name="radio" id="1" value='1' checked>
       <input class="radiobutton" type="radio" 

name="radio" id="2" value='2'>
       <input class="radiobutton" type="radio" 

name="radio" id="3" value='3'>
       <input type="submit" name="submit" 

value="Update">`

</form> 
```

在 php 代码中应该是这样的：

```
<?
    $radio = $_POST['radio'];
    $query = mysql_query('update "your table" set column1=$radio WHERE some_column=some_value);
?> 
```

# vim - （Gvim）如何删除某些字符包含的某个模式

> ID：13042006
> 
> 赞同：3
> 
> 时间：2012-10-24T02:04:42.773
> 
> 标签：vim

我喜欢删除“[”和“]”包含的所有字符，包括这些包含字符。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T02:06:15.420

信不信由你，`da[`。阅读`:help text-objects`以找出原因，以及您可以以这种方式使用哪些其他类型的区域（其他一些有用的区域`aw`用于单词和`ap`段落）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T02:09:13.707

也许使用这样的查找和替换：

```
:%s/\[.*\]//g 
```

# java - java.util.NoSuchElementException - 扫描器读取用户输入

> ID：13042008
> 
> 赞同：78
> 
> 时间：2012-10-24T02:04:45.320
> 
> 标签：java, input, java.util.scanner

我是使用 Java 的新手，但我有一些 C# 的经验。我遇到的问题是从控制台读取用户输入。

我在这部分代码中遇到了“java.util.NoSuchElementException”错误：

```
payment = sc.next(); // PromptCustomerPayment function 
```

我有两个获取用户输入的函数：

*   提示客户数量
*   提示客户付款

如果我不调用 PromptCustomerQty，那么我不会收到此错误，这使我相信我在扫描仪上做错了。下面是我的完整代码示例。我很感激任何帮助。

```
public static void main (String[] args) {   

    // Create a customer
    // Future proofing the possabiltiies of multiple customers
    Customer customer = new Customer("Will");

    // Create object for each Product
    // (Name,Code,Description,Price)
    // Initalize Qty at 0
    Product Computer = new Product("Computer","PC1003","Basic Computer",399.99); 
    Product Monitor = new Product("Monitor","MN1003","LCD Monitor",99.99);
    Product Printer = new Product("Printer","PR1003x","Inkjet Printer",54.23);

    // Define internal variables 
    // ## DONT CHANGE 
    ArrayList<Product> ProductList = new ArrayList<Product>(); // List to store Products
    String formatString = "%-15s %-10s %-20s %-10s %-10s %n"; // Default format for output

    // Add objects to list
    ProductList.add(Computer);
    ProductList.add(Monitor);
    ProductList.add(Printer);

    // Ask users for quantities 
    PromptCustomerQty(customer, ProductList);

    // Ask user for payment method
    PromptCustomerPayment(customer);

    // Create the header
    PrintHeader(customer, formatString);

    // Create Body
    PrintBody(ProductList, formatString);   
}

public static void PromptCustomerQty(Customer customer, ArrayList<Product> ProductList) {
    // Initiate a Scanner
    Scanner scan = new Scanner(System.in);

    // **** VARIABLES ****
    int qty = 0;

    // Greet Customer
    System.out.println("Hello " + customer.getName());

    // Loop through each item and ask for qty desired
    for (Product p : ProductList) {

        do {
        // Ask user for qty
        System.out.println("How many would you like for product: " + p.name);
        System.out.print("> ");

        // Get input and set qty for the object
        qty = scan.nextInt();

        }
        while (qty < 0); // Validation

        p.setQty(qty); // Set qty for object
        qty = 0; // Reset count
    }

    // Cleanup
    scan.close();
}

public static void PromptCustomerPayment (Customer customer) {
    // Initiate Scanner 
    Scanner sc = new Scanner(System.in);

    // Variables
    String payment = "";

    // Prompt User
    do {
    System.out.println("Would you like to pay in full? [Yes/No]");
    System.out.print("> ");

    payment = sc.next();

    } while ((!payment.toLowerCase().equals("yes")) && (!payment.toLowerCase().equals("no")));

    // Check/set result
    if (payment.toLowerCase().equals("yes")) {
        customer.setPaidInFull(true);
    }
    else {
        customer.setPaidInFull(false);
    }

    // Cleanup
    sc.close(); 
} 
```

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2012-10-24T02:45:57.187

**这真的让我困惑了一段时间，但这是我最终发现的。**

当您调用时，`sc.close()`在第一种方法中，它不仅会关闭您的扫描仪`System.in`，还会关闭您的输入流。您可以通过在第二种方法的最顶部打印其状态来验证它：

```
 System.out.println(System.in.available()); 
```

因此，现在当您在第二种方法中重新实例化时`Scanner`，它找不到任何打开`System.in`的流，因此找不到异常。

我怀疑是否有办法重新开放`System.in`，因为：

`public void close() throws IOException --> Closes this input stream and releases any system resources associated with this stream. The general contract of close is that it closes the input stream. A closed stream cannot perform input operations and **cannot be reopened.**`

解决您的问题的唯一好方法是`Scanner`在您的 main 方法中启动，在您的两个方法中将其作为参数传递，然后在您的 main 方法中再次关闭它，例如：

`main`方法相关代码块：

```
Scanner scanner = new Scanner(System.in);  

// Ask users for quantities 
PromptCustomerQty(customer, ProductList, scanner );

// Ask user for payment method
PromptCustomerPayment(customer, scanner );

//close the scanner 
scanner.close(); 
```

你的方法：

```
 public static void PromptCustomerQty(Customer customer, 
                             ArrayList<Product> ProductList, Scanner scanner) {

    // no more scanner instantiation
    ...
    // no more scanner close
 }

 public static void PromptCustomerPayment (Customer customer, Scanner sc) {

    // no more scanner instantiation
    ...
    // no more scanner close
 } 
```

希望这能让您对失败和可能的解决方案有所了解。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-10-24T02:18:51.577

问题是

> 当 Scanner 关闭时，如果源实现了 Closeable 接口，它将关闭其输入源。

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)

从而`scan.close()`关闭`System.in`。

要修复它，您可以制作

`Scanner scan` `static` 并且不要在 PromptCustomerQty 中关闭它。下面的代码有效。

```
public static void main (String[] args) {   

// Create a customer
// Future proofing the possabiltiies of multiple customers
Customer customer = new Customer("Will");

// Create object for each Product
// (Name,Code,Description,Price)
// Initalize Qty at 0
Product Computer = new Product("Computer","PC1003","Basic Computer",399.99); 
Product Monitor = new Product("Monitor","MN1003","LCD Monitor",99.99);
Product Printer = new Product("Printer","PR1003x","Inkjet Printer",54.23);

// Define internal variables 
// ## DONT CHANGE 
ArrayList<Product> ProductList = new ArrayList<Product>(); // List to store Products
String formatString = "%-15s %-10s %-20s %-10s %-10s %n"; // Default format for output

// Add objects to list
ProductList.add(Computer);
ProductList.add(Monitor);
ProductList.add(Printer);

// Ask users for quantities 
PromptCustomerQty(customer, ProductList);

// Ask user for payment method
PromptCustomerPayment(customer);

// Create the header
PrintHeader(customer, formatString);

// Create Body
PrintBody(ProductList, formatString);   
}

static Scanner scan;

public static void PromptCustomerQty(Customer customer, ArrayList<Product> ProductList)               {
// Initiate a Scanner
scan = new Scanner(System.in);

// **** VARIABLES ****
int qty = 0;

// Greet Customer
System.out.println("Hello " + customer.getName());

// Loop through each item and ask for qty desired
for (Product p : ProductList) {

    do {
    // Ask user for qty
    System.out.println("How many would you like for product: " + p.name);
    System.out.print("> ");

    // Get input and set qty for the object
    qty = scan.nextInt();

    }
    while (qty < 0); // Validation

    p.setQty(qty); // Set qty for object
    qty = 0; // Reset count
}

// Cleanup

}

public static void PromptCustomerPayment (Customer customer) {
// Variables
String payment = "";

// Prompt User
do {
System.out.println("Would you like to pay in full? [Yes/No]");
System.out.print("> ");

payment = scan.next();

} while ((!payment.toLowerCase().equals("yes")) && (!payment.toLowerCase().equals("no")));

// Check/set result
if (payment.toLowerCase() == "yes") {
    customer.setPaidInFull(true);
}
else {
    customer.setPaidInFull(false);
}
} 
```

在旁注中，您不应该使用`==`字符串比较，`.equals`而是使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-08-18T08:01:27.447

您需要删除扫描仪关闭线：`scan.close();`

它以前发生在我身上，这就是原因。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-11-12T15:45:59.817

已经解释了异常的原因，但是建议的解决方案并不是最好的。

您应该使用单例模式创建一个将 Scanner 保持为私有的类，这使得该扫描仪在您的代码中是唯一的。

然后你可以实现你需要的方法，或者你可以创建一个 getScanner（不推荐），你可以用一个私有的布尔值来控制它，比如已经关闭。

如果你不知道如何使用单例模式，这里有一个例子：

```
public class Reader {

    private Scanner reader;
    private static Reader singleton = null;
    private boolean alreadyClosed;

    private Reader() {
        alreadyClosed = false;
        reader = new Scanner(System.in);
    }

    public static Reader getInstance() {
        if(singleton == null) {
            singleton = new Reader();
        }
        return singleton;
    }

    public int nextInt() throws AlreadyClosedException {
        if(!alreadyClosed) {
            return reader.nextInt();
        }
        throw new AlreadyClosedException(); //Custom exception
    }

    public double nextDouble() throws AlreadyClosedException {
        if(!alreadyClosed) {
            return reader.nextDouble();
        }
        throw new AlreadyClosedException();
    }

    public String nextLine() throws AlreadyClosedException {
        if(!alreadyClosed) {
            return reader.nextLine();
        }
        throw new AlreadyClosedException();
    }

    public void close() {
        alreadyClosed = true;
        reader.close();
    }   
} 
```

# solr - 在美国州列表中搜索“Virginia”时，如何排除“West Virgina”等某些词的结果？

> ID：13042009
> 
> 赞同：1
> 
> 时间：2012-10-24T02:04:49.693
> 
> 标签：solr

我已经让 SOLR 愉快地运行索引包含美国各州的部门名称列表。然而，它运行良好，搜索“Virginia”会出现包含“West Virginia”的结果，虽然对某些业务需求肯定有帮助，但我们的需求不存在。

有没有一种特殊的说法，对 X 的查询不能包含 Y（我不介意为“弗吉尼亚”的情况制作一个特殊的查询），或者我只能通过迭代结果来进行这个后查询和排除“西弗吉尼亚”的结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T05:11:39.137

将减号（连字符）与要排除的短语/术语结合使用。如果您使用 dismax 查询解析器，那么您甚至不需要指定字段名称。

例子：

使用 dismax：

```
q=virginia -"west virginia" 
```

使用标准查询解析器：

```
q=field_name:(virginia -"west virginia") 
```

有关更多示例，请参阅[Solr 查询语法](http://wiki.apache.org/solr/SolrQuerySyntax)wiki 页面及其更多链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T00:02:07.760

您可以创建一个字符串类型的状态字段，然后只搜索状态：“virginia”（在索引/搜索之前小写字符串）

# jquery-ui - 如果结果为空，jQuery-ui 自动完成会导致验证失败

> ID：13042012
> 
> 赞同：2
> 
> 时间：2012-10-24T02:05:47.020
> 
> 标签：jquery-ui, autocomplete, null, asp.net-mvc-4

漫长的一天，我仍在为这个问题在桌子上敲打我的头。我想我已经阅读了关于堆栈溢出的所有 jQuery ui 自动完成帖子以及大多数 jQuery ui 文档。

问题：

我在 asp.net mvc 4 应用程序中有一个表单。该表格用于提交时间表/工作票。用户选择一个项目并基于该项目启用工作订单号的自动完成字段。如果用户选择项目的现有工作订单号，我将使用有关工作订单的信息填充两个额外的输入。我需要允许用户在不选择自动完成建议的工作订单的情况下输入全新的工作订单，并且仍然验证表单。问题是如果我不从自动完成中选择建议，验证将失败。

jQuery-ui 文档确实显示了可以使用的方法 close、disable 和 destroy ，但我没有找到一个很好的例子来说明如何使用它们以及在我的情况下实际上最好使用它们。另外值得注意的是，我使用的是 jQuery-ui 1.9

我得到的错误：

*System.Data.Entity.Validation.DbEntityValidationException：一个或多个实体的验证失败。有关更多详细信息，请参阅“EntityValidationErrors”属性。*

错误指向我调用 _db.SaveChanges(); 的控制器上的代码行；

```
 if ( ModelState.IsValid )
        {
            _db.WorkTickets.Add(workticket);
            _db.SaveChanges();
        } 
```

模型状态有效，我没有尝试保存空值。我的模型确实允许一些字段为空，但在这种情况下，所有字段都是完整的。

如果我从自动完成小部件中选择现有工作订单或将其留空，则该表单非常有用。只有当我输入新的工单时它才会失败。我已经设置了一个断点，并在调用保存更改之前验证了该模型确实具有我为工作票输入的值。WONumber。

这是我的 jQuery。

```
$(document).ready(function () {

    $("#ProjectID").change(function () {
        var id = $(this).val();
        var results = "result";

        var source1 = "Project/QuickCCSearch?project=" + id;
        $("#ChargeCode").autocomplete({ source: source1 });
        $("#ChargeCode").attr("disabled", false)

        var source2 = "Project/QuickPOSearch?project=" + id;
        $("#PONumber").autocomplete({ source: source2 });
        $("#PONumber").attr("disabled", false)

        var source3 = "Project/QuickWOSearch?project=" + id;
        $("#WONumber").attr("disabled", false)
        $("#WONumber").autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: source3,
                    data: request,
                    success: function (data) {
                        response(data);
                        if (data.length === 0) {
                            $("#WONumber").attr("check", false);
                        }
                    }
                });
            },
            change: function () {
                if ($("#WONumber").attr("check") != false) {
                    $.getJSON("Project/JobLocation", { wo: $("#WONumber").val() },
                                function (data) {
                                    $("#JobLocation").val(data);
                                });

                    $.getJSON("Project/JobDescription", { wo: $("#WONumber").val() },
                                function (data) {
                                    $("#JobDescription").val(data);
                                });
                }
            }
        });

        $.getJSON("WorkTicket/GetClient/", { id: id },
            function (data) {
                $("#Client").html(data);
            });

        $.getJSON("WorkTicket/GetClientRep/", { id: id },
            function (data) {
                $("#ClientRep").html(data);
            });

        $.getJSON("WorkTicket/GetManager/", { id: id },
            function (data) {
                $("#Manager").html(data);

            });

    });

}) 
```

编辑：这是我的 HTML

```
@model WorkTicket

@{
ViewBag.Title = "Create";
}
<article>
<div class="linearBg1">
    Create Daily Work Ticket
</div>
<br />
@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <div class="linearBg1">
        General Information
    </div>
    <div class="section-span-body">
        <table>
            <tr class="empTableRowBody2">
                <th class="empTableRowBody2">
                    @Html.LabelFor(Model => Model.DateWorked)
                </th>
                <th class="empTableRowBody2" colspan="2">
                    @Html.LabelFor(Model => Model.ProjectName)
                </th>
            </tr>
            <tr>
                <td>
                    @Html.EditorFor(Model => Model.DateWorked)
                </td>
                <td colspan="2">
                    @Html.DropDownList("ProjectID")
                </td>
            </tr>
            <tr class="empTableRowBody2">
                <th class="empTableRowBody2">
                    Client
                </th>
                <th class="empTableRowBody2">
                    Client Rep
                </th>
                <th class="empTableRowBody2">
                    Manager
                </th>
            </tr>
            <tr>
                <td>
                    <div id="Client"></div>
                </td>
                <td>
                    <div id="ClientRep"></div>
                </td>
                <td>
                    <div id="Manager"></div>
                </td>
            </tr>
            <tr class="empTableRowBody2">
                <th class="empTableRowBody2">
                    Charge Code
                </th>
                <th class="empTableRowBody2">
                    PO Number
                </th>
                <th class="empTableRowBody2">
                    Work Order
                </th>
            </tr>
            <tr>
                <td>
                    @Html.TextBoxFor(Model => Model.ChargeCode, new { disabled = true })
                </td>
                <td>
                    @Html.TextBoxFor(Model => Model.PONumber, new { disabled = true })
                </td>
                <td>
                    @Html.TextBoxFor(Model => Model.WONumber, new { disabled = true, check = true })
                </td>
            </tr>
            <tr class="empTableRowBody2">
                <th class="empTableRowBody2" colspan="3">
                    Job Location
                </th>
            </tr>
            <tr>
                <td colspan="3">
                    @Html.TextBoxFor(Model => Model.JobLocation, new { @class = "inputWidth500" })
                </td>
            </tr>
            <tr class="empTableRowBody2">
                <th class="empTableRowBody2" colspan="3">
                    Job Description
                </th>
            </tr>
            <tr>
                <td colspan="3">
                    @Html.TextBoxFor(Model => Model.JobDescription, new { @class = "inputWidth500" })
                </td>
            </tr>
        </table>
    </div>
    <div class="section-span-footer"></div>
    <br />
    <div>
        <input type="submit" value="Next" />
    </div>
}
</article>
@section Menu{
@Html.Partial("_MainMenu")
@Html.Partial("_MenuFooter")
}
@section scripts{
@Scripts.Render("~/bundles/jqueryval")
@Scripts.Render("~/Scripts/WorkTicket.js")
} 
```

我确信我做错了很多事情，因为我是 jQuery 新手并且还在学习。如果用户没有从自动完成小部件中选择选项或者小部件的结果为空，是否有办法禁用自动完成？先感谢您！

T。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:45:08.220

好的，我终于解决了。它与自动完成无关。只是说明我需要了解多少关于 jQuery 的知识。我的控制器中有一行错误的代码，我在其中将有关新工作订单的信息保存回项目。我错过了一件必需的物品，我只是在看它。抱歉，我是个白痴，对 jQuery 一无所知。感谢任何看过的人。不敢相信我花了这么长时间才看到......

# python - 在python中将url添加到mysql行

> ID：13042013
> 
> 赞同：4
> 
> 时间：2012-10-24T02:05:58.377
> 
> 标签：python, mysql

我正在尝试使用 python 和 MySQLdb 库将 url 添加到 mysql 中的文本行，但是当我运行我的代码时，它说我的 sql 语法中有错误。你能告诉我我做错了什么吗？

这是我的代码：

```
import MySQLdb as mdb
connection = mdb.connect("Localhost", "root", "", "db")
cursor = connection.cursor()
url = mdb.escape_string("http://www.google.com")
cursor.execute("""INSERT INTO index(url) VALUES(%s)""", (url,)) 
```

这是错误：

```
Traceback (most recent call last):
File "C:\Python27\lib\threading.py", line 551, in __bootstrap_inner
self.run()
File "E:\prospector\webworker.py", line 77, in run
cursor.execute("INSERT INTO index(url) VALUES('%s')", (url_t,))
File "C:\Python27\lib\site-packages\MySQLdb\cursors.py", line 202, in execute
self.errorhandler(self, exc, value)
File "C:\Python27\lib\site-packages\MySQLdb\connections.py", line 36, in defaulterrorhandler
raise errorclass, errorvalue
ProgrammingError: (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'index(url) VALUES('http://www.google.com/')' at line 1") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T02:08:35.377

我能够像这样复制您的问题：

```
mysql> create table `index` (url varchar(50));
Query OK, 0 rows affected (0.05 sec)

mysql> insert into index(url) values ('http://www.google.com');
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'index(url) values ('http://www.google.com')' at line 1

mysql> insert into `index`(url) values ('http://www.google.com');
Query OK, 1 row affected (0.00 sec) 
```

* * *

`index`是 MySQL 中的关键字。如果您不使用它作为表名，您的生活会更轻松。但是，如果你真的想要，你可以使用它，但是你必须引用它：

```
cursor.execute("""INSERT INTO `index`(url) VALUES(%s)""", (url,)) 
```

* * *

PS：不用打电话

```
url = mdb.escape_string("http://www.google.com") 
```

当您调用时，MySQLdb 会自动为您执行此操作

```
cursor.execute("""INSERT INTO index(url) VALUES(%s)""", (url,)) 
```

事实上，既然`cursor.execute`需要`mdb.escape_string`你，你自己做可能会导致不需要的值被插入到数据库中，具体取决于 的值`url`：

```
In [105]: MySQLdb.escape_string("That's all folks")
Out[105]: "That\\'s all folks"

In [106]: MySQLdb.escape_string(MySQLdb.escape_string("That's all folks"))
Out[106]: "That\\\\\\'s all folks" 
```

# java - 测试 onActivityResult()

> ID：13042015
> 
> 赞同：18
> 
> 时间：2012-10-24T02:06:14.343
> 
> 标签：java, android, testing, junit, instrumentation

我有以下活动：

```
package codeguru.startactivityforresult;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class StartActivityForResult extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        this.startButton = (Button) this.findViewById(R.id.start_button);
        this.startButton.setOnClickListener(onStart);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        int result = data.getIntExtra(StartActivityForResult.this.getString(R.string.result), -1);
        String msg = "requestCode=" + requestCode + ", resultCode=" + resultCode + ", result=" + result;
        Toast.makeText(this, msg, Toast.LENGTH_LONG).show();
    }

    private View.OnClickListener onStart = new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            Intent intent = new Intent(StartActivityForResult.this, ChildActivity.class);

            StartActivityForResult.this.startActivityForResult(intent, R.id.child_request);
        }
    };
    private Button startButton = null;
} 
```

以及以下 JUnit 测试：

```
package codeguru.startactivityforresult;

import android.app.Activity;
import android.app.Instrumentation;
import android.test.ActivityInstrumentationTestCase2;
import android.test.UiThreadTest;
import android.widget.Button;
import junit.framework.Assert;

public class StartActivityForResultTest extends ActivityInstrumentationTestCase2<StartActivityForResult> {

    public StartActivityForResultTest() {
        super(StartActivityForResult.class);
    }

    @Override
    public void setUp() throws Exception {
        super.setUp();

        this.setActivityInitialTouchMode(false);

        this.activity = this.getActivity();
        this.startButton = (Button) this.activity.findViewById(R.id.start_button);
    }

    @Override
    public void tearDown() throws Exception {
        this.activity.finish();

        super.tearDown();
    }

    @UiThreadTest
    public void testStartButtonOnClick() {
        Assert.assertTrue(this.startButton.performClick());

        Instrumentation.ActivityResult result = new Instrumentation.ActivityResult(Activity.RESULT_OK, null);
        Assert.assertNotNull(result);

        Instrumentation.ActivityMonitor am = new Instrumentation.ActivityMonitor(ChildActivity.class.getName(), result, true);
        Assert.assertNotNull(am);

        Activity childActivity = this.getInstrumentation().waitForMonitorWithTimeout(am, TIME_OUT);
        Assert.assertNotNull(childActivity);

        Assert.fail("How do I check that StartActivityForResult correctly handles the returned result?");
    }
    private Activity activity = null;
    private Button startButton = null;
    private static final int TIME_OUT = 5 * 1000; // 5 seconds
} 
```

如您所见，我想出了如何使用`Instrumentation.ActivityResult`and来模拟结果`Instrumentation.ActivityMonitor`。如何检查是否`StartActivityForResult.onActivityResult()`正确处理此结果？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2017-09-20T20:07:34.013

Use intents framework to mock the activity result

```
intending(hasComponent(DummyActivity.class.getName())).respondWith(new ActivityResult(resultCode, dataIntent));
rule.getActivity().startActivityForResult(new Intent(context,DummyActivity.class)); 
```

verify on activity result logic

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-25T02:06:42.480

要在测试类中测试 onActivityResult()，您需要做的就是：

1.  创建一个 ActivityMonitor，它捕获 ChildActivity 创建并重新调整模拟 ActivityResult。
2.  模拟按钮单击启动 ChildActivity 以获得结果。
3.  对状态和模拟 ActivityResult 做一些断言。

示例 StartActivityForResult：

```
public class StartActivityForResult extends Activity {
  private boolean activityResultIsReturned = false;
  private String activityResult = null;

  ... ...

  @Override
  protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    activityResultIsReturned = true;
    activityResult = data.getStringExtra("result");

    ... ...
  }

  ... ...
} 
```

示例 StartActivityForResultTest：

```
public class StartActivityForResultTest extends ActivityInstrumentationTestCase2<StartActivityForResult> {
  ... ...

  public void testOnActivityResult() {
    // Get current Activity and check initial status:
    StartActivityForResult myActivity = getActivity();
    assertFalse(myActivity.getActivityResultIsReturned());
    assertNull(myActivity.getActiityResult());

    // Mock up an ActivityResult:
    Intent returnIntent = new Intent();
    returnIntent.putExtra("result", "This is the result");
    Instrumentation.ActivityResult activityResult = new Instrumentation.ActivityResult(Activity.RESULT_OK, returnIntent);

    // Create an ActivityMonitor that catch ChildActivity and return mock ActivityResult:
    Instrumentation.ActivityMonitor activityMonitor = getInstrumentation().addMonitor(ChildActivity.class.getName(), activityResult , true);

    // Simulate a button click that start ChildActivity for result:
    final Button button = (Button) myActivity.findViewById(com.company.R.id.open_next_activity);
    myActivity.runOnUiThread(new Runnable() {
      @Override
      public void run() {
        // click button and open next activity.
        button.performClick();
      }
    });

    // Wait for the ActivityMonitor to be hit, Instrumentation will then return the mock ActivityResult:
    ChildActivity childActivity = getInstrumentation().waitForMonitorWithTimeout(activityMonitor, 5);

    // How do I check that StartActivityForResult correctly handles the returned result?
    assertTrue(myActivity.getActivityResultIsReturned());
    assertEqual(myActivity.getActiityResult(), "This is the result");
  }

  ... ...
} 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-10-24T03:27:46.223

请参考以下网站。它将帮助您解决问题。 [http://saigeethamn.blogspot.in/2009/08/android-developer-tutorial-for_31.html](http://saigeethamn.blogspot.in/2009/08/android-developer-tutorial-for_31.html)

[http://android-er.blogspot.in/2011/08/return-result-to-onactivityresult.html](http://android-er.blogspot.in/2011/08/return-result-to-onactivityresult.html)

[http://www.mubasheralam.com/tutorials/android/how-start-new-activity-and-getting-results](http://www.mubasheralam.com/tutorials/android/how-start-new-activity-and-getting-results)

# php - 排序多维数组 PHP

> ID：13042018
> 
> 赞同：2
> 
> 时间：2012-10-24T02:06:23.830
> 
> 标签：php, arrays

**从样式数组：**

```
Array
(
    [0] => style1|000000
    [1] => style2|ff6600
) 
```

**我做了这个循环**

```
foreach($styles as $key=>$value){
    $sort_values[] = explode('|',$value);
} 
```

** 和 print_r($sort_values) 我得到：**

```
Array
(
    [0] => Array
        (
            [0] => style1
            [1] => 000000
        )

    [1] => Array
        (
            [0] => style2
            [1] => ff6600
        )

) 
```

**但我需要它是：**

```
Array
(
    [styles] => Array
        (
            [0] => style1
            [1] => style2
        )

    [links] => Array
        (
            [0] => 000000
            [1] => ff6600
        )

) 
```

任何帮助表示感谢，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T02:11:01.973

假设您的输入数组看起来像

```
array('style1|000000','style2|ff6600', 'style3|22ff22') 
```

您的循环中需要更多逻辑。

```
// Initialize output array with an empty styles subarray and a links subarray
$out = array('styles'=>array(), 'links'=>array());
foreach ($styles as $key=>$value) {
   // Loop over and split on the |
   list($style, $link) = explode("|", $value);
   // And append the two resultant values to their respective subarrays via []
   $out['styles'][] = $style;
   $out['links'][] = $link;

   // list() is a useful construct for producing readable results with small arrays,
   // but I could also have used an array to receive the 
   // results of explode()
   // $split = explode("|", $value);
   // $out['styles'][] = $split[0];
   // $out['links'][] = $split[1];

}
print_r($out);

// Prints:
Array
(
    [styles] => Array
        (
            [0] => style1
            [1] => style2
            [2] => style3
        )

    [links] => Array
        (
            [0] => 000000
            [1] => ff6600
            [2] => 22ff22
        )

) 
```

# google-app-engine - GoogleApps 数据存储区的优缺点

> ID：13042020
> 
> 赞同：1
> 
> 时间：2012-10-24T02:06:35.393
> 
> 标签：google-app-engine, google-cloud-datastore, database-backups

在过去的几周里，我一直在阅读有关 Google AppEngine 的更多信息并学习了 python，包括使用 MongoDB。我最需要的是一个可扩展的数据库解决方案。在发现 Google AppEngine 之前，我认为唯一有用的三个数据库解决方案是 DynamoDB、MongoDb 和 BigCouch。

我发现我真的很喜欢 python 语言，对于来自 ASP.NET 开发的语言，我决定使用 python 切换和开发我的应用程序。我的第一选择是使用 python + bottle + mongoDB 开发我的应用程序。问题是 DynamoDB 非常昂贵，而且缺乏易于使用的备份/恢复选项让我通过了亚马逊的产品。

Google AppEngine 数据存储更实惠。但是，我仍然无法在 Google 的网站上找到有关某些特定问题的信息

以下是我需要回答的一些问题：

*   Google Datastore 是否支持管理控制台中的备份/恢复？
*   如果我要备份/恢复 50TB 的数据，备份/恢复数据需要多长时间？它存储在哪里？费用是多少？
*   例如，备份 1TB 数据需要多少时间？
*   DataStore 是否支持在数据库层进行缓存
*   我应该注意的任何缺点？

那些我需要得到答案的问题。MongoDB 是一款出色的产品，使用 Mongo + Python + Bottle 开发 Web 应用程序非常有趣。但是，我更喜欢 Google 提供的完整的数据库托管解决方案。但在我这样做之前，我需要确保我没有遗漏任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:34:19.450

> 以下是我需要回答的一些问题：
> 
> Google Datastore 是否支持管理控制台中的备份/恢复？

~~不~~，是的。您可以通过为应用程序启用 datastore_admin 从管理控制台中备份和恢复数据（感谢 Idan Shechter 指出这一点！）可以在此处找到更多信息：[https ://developers.google.com/appengine/docs/管理员控制台/数据存储管理员](https://developers.google.com/appengine/docs/adminconsole/datastoreadmin)

您也可以通过命令行下载数据。请参阅：[https ://developers.google.com/appengine/docs/python/tools/uploadingdata](https://developers.google.com/appengine/docs/python/tools/uploadingdata)

> 如果我要备份/恢复 50TB 的数据，备份/恢复数据需要多长时间？

这取决于您将数据备份到的位置。与备份到本地计算机相比，备份到 Blobstore 或 Google Cloud 存储所需的时间可能要少得多。将 50TB 传输到本地计算机将需要很长时间，并且取决于包括网络速度在内的许多因素。

> 它存储在哪里？

如果您使用 Datastore Administration，则可以备份到 Blobstore 或 Google Cloud Storage。如果您使用命令行工具，它将存储在您选择将数据下载到的位置。

> 费用是多少？

Blobstore 每月收费 0.13 美元/GB，免费提供 5GB。Google Cloud Storage 的费用为每月每 GB 0.12 美元，直到第一个 TB。您可以在此处查看云存储的更多定价信息： [https ://developers.google.com/storage/docs/pricingandterms](https://developers.google.com/storage/docs/pricingandterms)

带宽成本为每 GB 0.12 美元（第一个 GB 是免费的）。可以在此处查看有关定价的更多详细信息： [https ://cloud.google.com/pricing/](https://cloud.google.com/pricing/)

> 例如，备份 1TB 数据需要多少时间？

同样，这取决于您备份到的位置和传输速度。

> DataStore 是否支持数据库层中的缓存我应该注意的任何缺点？

不，它不支持数据库层缓存。

# visual-studio-2010 - 是否有将文件链接到另一个文件的扩展名，例如 .designer 文件

> ID：13042024
> 
> 赞同：1
> 
> 时间：2012-10-24T02:07:08.717
> 
> 标签：visual-studio-2010

是否有扩展程序可以轻松地将文件链接到 VS 项目中的另一个文件？与设计器文件链接到另一个文件的方式相同。

我知道我可以在项目中打开包含文件，然后在记事本中打开项目并将包含元素更改为依赖于另一个文件，例如

```
<None Include="Features\ContactTestData.json">
    <DependentUpon>ContactInfo.feature</DependentUpon>
</None> 
```

但是有没有办法通过 UI 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T02:29:43.660

听起来好像[部分课程](http://msdn.microsoft.com/en-us/library/wa80x488%28v=vs.100%29.aspx)可以解决您的问题。这就是表单设计师的工作方式。

它允许您在同一个命名空间中拥有多个同名的类文件，可以作为同一个类访问。

# processing - 处理中的多个算术表达式

> ID：13042027
> 
> 赞同：1
> 
> 时间：2012-10-24T02:07:39.297
> 
> 标签：processing

好的，所以仍然习惯于处理基础知识，我不确定这是否是使用相同数据执行多个算术表达式的正确方法，我应该将每个算术表达式输入为自己的代码，还是像这样？

这是问题；

> 1.  编写执行以下算术运算的语句（注意：变量名可以更改）。(i) a=50 b=60 c=43 结果1 = a+b+c 结果2=a*b 结果3 = a/b

这是我的代码；

```
short a = 50;
short b = 60;
short c = 43;
int sum = a+b+c; // Subsection i
print (sum);
int sum2 = a*b; // Subsection ii
print (sum2);
int sum3 =a/b; // Subsection iii
print (sum3); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T02:21:22.553

就像您正在做的那样，在所有三个表达式中为 a 使用相同的变量是正确的方法。这意味着如果您想更改 a、b 或 c，您只需在一个地方进行更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T02:29:16.873

你没有提到什么语言，但有几个问题。很难说你的知识水平，所以如果这超出了作业的范围，我提前道歉。

首先，您的变量被定义为，`short`但它们最终被分配给`int`变量。那是隐式类型转换。当然，`short`基本上是`int`大多数语言的一个子集，但您应该意识到您正在这样做，并且隐式类型转换可能会导致问题。这是一个有点糟糕的做法。

其次，您的变量名称都被调用`sumX`，但只有一个是总和。这绝对是不好的做法。变量名应该是有意义的并代表它们的实际含义。

第三，您的除法是将两个整数相除并将结果存储到一个整数中。这意味着如果您使用的是强类型语言，您将截断商的小数部分。您将得到输出：50 / 60 = 0.8333[...] 当转换为整数时会截断为 0。如果您的答案应该是准确的，`0`您可能希望考虑使用`double`or作为您的数据类型。`float`

# c++ - 信号名称：SIGSEGV 错误

> ID：13042028
> 
> 赞同：2
> 
> 时间：2012-10-24T02:07:59.640
> 
> 标签：c++, segmentation-fault

当我尝试构建此应用程序时，我不断收到此错误。帮助？

```
The inferior stopped because it received a signal from the operating system.

Signal name: SIGSEGV

Signal meaning: Segmentation fault 
```

这是 mainwindow.cpp 文件的代码 它说错误在第 122 行，即

copyAct->setEnabled(false);

这大约是一半。

```
#include "mainwindow.h"
#include <QtGui>

MainWindow::MainWindow(QWidget *parent)
{
    textEdit = new QPlainTextEdit;
    setCentralWidget(textEdit);

    createActions();
    createMenus();
    createToolBars();
    createStatusBar();

    readSettings();

    connect(textEdit->document(), SIGNAL(contentsChanged()),this, SLOT(documentWasModified()));

    setCurrentFile("");
    setUnifiedTitleAndToolBarOnMac(true);
}

void MainWindow::closeEvent(QCloseEvent *event)
{
    if(maybeSave()){
        writeSettings();
        event->accept();
    }
    else{
        event->ignore();
    }
}

void MainWindow::newFile()
{
    if(maybeSave()){
        textEdit->clear();
        setCurrentFile("");
    }
}

void MainWindow::open()
{
    if(maybeSave()){
        QString fileName = QFileDialog::getOpenFileName(this);
        if(!fileName.isEmpty())
            loadFile(fileName);
    }
}

bool MainWindow::save()
{
    if(curFile.isEmpty()){
        return saveAs();
    }
    else{
        return saveFile(curFile);
    }
}

bool MainWindow::saveAs()
{
    QString fileName = QFileDialog::getSaveFileName(this);
    if(fileName.isEmpty())
        return false;

    return saveFile(fileName);
}

void MainWindow::about()
{
    QMessageBox::about(this, tr("About Application"),
                       tr("Whatever you want it to say here!"));
}

void MainWindow::documentWasModified()
{
    setWindowModified(textEdit->document()->isModified());
}

void MainWindow::createActions()
{
    newAct = new QAction(tr("&New"), this);
    newAct->setShortcuts(QKeySequence::New);
    newAct->setStatusTip(tr("Create a new file"));
    connect(newAct, SIGNAL(triggered()), this, SLOT(newFile()));

    openAct = new QAction(tr("&Open..."), this);
    openAct->setShortcuts(QKeySequence::Open);
    openAct->setStatusTip(tr("Open an existing file"));
    connect(openAct, SIGNAL(triggered()), this, SLOT(open()));

    saveAct = new QAction(tr("&Save"), this);
    saveAct->setShortcuts(QKeySequence::Save);
    saveAct->setStatusTip(tr("Save an open file"));
    connect(saveAct, SIGNAL(triggered()), this, SLOT(save()));

    saveAsAct = new QAction(tr("&Save As"), this);
    saveAsAct->setShortcuts(QKeySequence::SaveAs);
    saveAsAct->setStatusTip(tr("Save a new file"));
    connect(openAct, SIGNAL(triggered()), this, SLOT(saveAs()));

    exitAct = new QAction(tr("&Exit"), this);
    exitAct->setShortcuts(QKeySequence::Close);
    exitAct->setStatusTip(tr("Exit the application"));
    connect(exitAct, SIGNAL(triggered()), this, SLOT(close()));

    cutAct = new QAction(tr("&Cut"), this);
    cutAct->setShortcuts(QKeySequence::Cut);
    cutAct->setStatusTip(tr("Cut the selected text"));

    pasteAct = new QAction(tr("&Paste"), this);
    pasteAct->setShortcuts(QKeySequence::Paste);
    pasteAct->setStatusTip(tr("Paste selected text"));
    connect(pasteAct, SIGNAL(triggered()), this, SLOT(setEnabled(bool)));

    aboutAct = new QAction(tr("&About"), this);
    aboutAct->setShortcuts(QKeySequence::UnknownKey);
    aboutAct->setStatusTip(tr("About the application"));
    connect(aboutAct, SIGNAL(triggered()), this, SLOT(show()));

    cutAct->setEnabled(false);
    copyAct->setEnabled(false);
    connect(textEdit, SIGNAL(copyAvailable(bool)), cutAct, SLOT(setEnabled(bool)));
    connect(textEdit, SIGNAL(copyAvailable(bool)), copyAct, SLOT(setEnabled(bool)));
}

void MainWindow::createMenus()
{
    fileMenu = menuBar()->addMenu(tr("&File"));
    fileMenu->addAction(newAct);
    fileMenu->addAction(openAct);
    fileMenu->addAction(saveAct);
    fileMenu->addAction(saveAsAct);
    fileMenu->addSeparator();
    fileMenu->addAction(exitAct);

    editMenu = menuBar()->addMenu(tr("&Edit"));
    editMenu->addAction(cutAct);
    editMenu->addAction(copyAct);
    editMenu->addAction(pasteAct);

    menuBar()->addSeparator();

    helpMenu = menuBar()->addMenu(tr("&Help"));
    helpMenu->addAction(aboutAct);
}

void MainWindow::createToolBars()
{
    fileToolBar = addToolBar(tr("File"));
         fileToolBar->addAction(newAct);
         fileToolBar->addAction(openAct);
         fileToolBar->addAction(saveAct);

         editToolBar = addToolBar(tr("Edit"));
         editToolBar->addAction(cutAct);
         editToolBar->addAction(copyAct);
         editToolBar->addAction(pasteAct);
}

void MainWindow::createStatusBar()
{
    statusBar()->showMessage(tr("Ready"));
}

void MainWindow::readSettings()
{
    QSettings settings("Zach Starnes", "Zach's Text Editor");
    QPoint pos = settings.value("pos", QPoint(200, 200)).toPoint();
    QSize size = settings.value("size", QSize(400, 400)).toSize();
    resize(size);
    move(pos);
}

void MainWindow::writeSettings()
{
    QSettings settings("Zach Starnes", "Zach's Text Editor");
    settings.setValue("pos", pos());
    settings.setValue("size", size());
}

bool MainWindow::maybeSave()
{
    if (textEdit->document()->isModified()) {
        QMessageBox::StandardButton ret;
        ret = QMessageBox::warning(this, tr("Application"),
                     tr("The document has been modified.\n"
                        "Do you want to save your changes?"),
                     QMessageBox::Save | QMessageBox::Discard | QMessageBox::Cancel);
        if (ret == QMessageBox::Save)
            return save();
        else if (ret == QMessageBox::Cancel)
            return false;
    }
    return true;
}

void MainWindow::loadFile(const QString &fileName)
{
    QFile file(fileName);
    if (!file.open(QFile::ReadOnly | QFile::Text)) {
        QMessageBox::warning(this, tr("Application"),
                             tr("Cannot read file %1:\n%2.")
                             .arg(fileName)
                             .arg(file.errorString()));
        return;
    }

    QTextStream in(&file);
#ifndef QT_NO_CURSOR
    QApplication::setOverrideCursor(Qt::WaitCursor);
#endif
    textEdit->setPlainText(in.readAll());
#ifndef QT_NO_CURSOR
    QApplication::restoreOverrideCursor();
#endif

    setCurrentFile(fileName);
    statusBar()->showMessage(tr("File loaded"), 2000);
}

bool MainWindow::saveFile(const QString &fileName)
{
    QFile file(fileName);
    if (!file.open(QFile::WriteOnly | QFile::Text)) {
        QMessageBox::warning(this, tr("Application"),
                             tr("Cannot write file %1:\n%2.")
                             .arg(fileName)
                             .arg(file.errorString()));
        return false;
    }

    QTextStream out(&file);
#ifndef QT_NO_CURSOR
    QApplication::setOverrideCursor(Qt::WaitCursor);
#endif
    out << textEdit->toPlainText();
#ifndef QT_NO_CURSOR
    QApplication::restoreOverrideCursor();
#endif

    setCurrentFile(fileName);
    statusBar()->showMessage(tr("File saved"), 2000);
    return true;
}

void MainWindow::setCurrentFile(const QString &fileName)
{
    curFile = fileName;
    textEdit->document()->setModified(false);
    setWindowModified(false);

    QString shownName = curFile;
    if (curFile.isEmpty())
        shownName = "untitled.txt";
    setWindowFilePath(shownName);
}

QString MainWindow::strippedName(const QString &fullFileName)
{
    return QFileInfo(fullFileName).fileName();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T02:18:56.437

看起来对于您拥有的所有其他操作（我假设是成员数据指针），您已经为以下各项分配了一些内存：

```
aboutAct = new QAction(tr("&About"), this); 
```

`copyAct`似乎是您没有为其分配任何内容的唯一操作，因此您正在取消引用无效指针。

```
copyAct->setEnabled(false); // segfault :( 
```

你错过了这样的东西，我假设：

```
copyAct = new QAction(tr("&Copy"), this); 
```

我希望这也不是您的整个`cpp`文件，因为我没有看到析构函数，也没有任何`delete`'s 来匹配所有这些`new`命令。

# django - 带有静态站点和 django wsgi 应用程序的 apache 配置

> ID：13042029
> 
> 赞同：1
> 
> 时间：2012-10-24T02:08:10.213
> 
> 标签：django, apache, wsgi

我需要在同一个 Apache 虚拟主机上托管一个静态网站和一个 Django 应用程序服务器。静态站点需要可从根 url (/) 访问，而应用程序服务器应仅在 url 以 /service 开头时被调用。我需要使用 mod_wsgi 将 Django 服务与 Apache 集成。理想情况下，我可以这样配置这两个站点：

```
WSGIScriptAlias /service service.wsgi
Alias / "/var/www/" 
```

但是，Apache 在 WSGIScriptAlias 之前优先考虑 Alias，因此所有请求最终都在静态网站上。我怎样才能得到我想要的行为。我试过使用 mod_redirect，但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T05:26:39.957

消除：

```
Alias / "/var/www/" 
```

将 DocumentRoot 设置为默认的静态文件根。

```
DocumentRoot /var/www 
```

另请注意，WSGIScriptAlias 指令的目标路径必须是绝对路径，而不能只是“service.wsgi”。

# c++ - 在 C++ 中遍历 2D tic-tac-toe 数组的好方法？

> ID：13042031
> 
> 赞同：1
> 
> 时间：2012-10-24T02:08:15.440
> 
> 标签：c++, arrays, validation, 2d, tic-tac-toe

我有一个函数来检查一个数组是否具有三个相同字符的井字游戏数组。麻烦的是，我的逻辑有问题：

```
for (int i = 0; i < SIZE; i++){
    for (int j = 0; j < SIZE; j++){
        if (board[i][j] != '*'){
            if (i != j){
                if (board[i][i] == board[i][j]){
                    matches++;
                }
                else if (board[i][j] == board[j][i]){
                    matches++;
                }
                else if (board[i][j] == board[j][j]){
                    matches++;
                }
                else if (board[i][j] == board[j][i]){
                    matches++;
                }
                else {
                    matches = 0;
                }
            }
        }
    }
} 
```

看来我可以水平和垂直检查匹配。但是，我不太清楚如何找到对角线匹配。我认为这段代码可以工作，但到目前为止还没有。

关于什么是错的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T02:26:51.303

看起来像作业，所以我不会给出代码解决方案。但是当两个索引相等时（）`i == j`，或者索引加起来比矩阵的维数（`i + j == SIZE - 1`

在第一种情况下，您在第一个对角线上（从左上角到右下角）。在第二种情况下，您在第二个对角线上（从右上角到左下角。）

这适用于任何大小的方阵。

# delphi - 如何隐藏控制台窗口？

> ID：13042036
> 
> 赞同：1
> 
> 时间：2012-10-24T02:08:40.493
> 
> 标签：delphi, console-application

我有一个基本的控制台窗口。它是空白的，我的程序所做的一切都是通过主机的套接字运行的。如何使黑色控制台窗口不可见？

我正在使用德尔福 2007。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T03:16:14.140

消除

```
{$APPTYPE CONSOLE} 
```

从源代码...

# oop - 父类和超类的区别

> ID：13042037
> 
> 赞同：19
> 
> 时间：2012-10-24T02:08:43.710
> 
> 标签：oop, parent-child

父类和超类之间有什么区别吗？超类只是不从其他类继承的父类吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-24T02:15:00.820

这更多的是术语差异，父类和子类或超类和子类的概念。它似乎取决于编程语言经验和应用程序领域，您使用哪个以及您何时开始接触面向对象编程。

在这两种情况下，都有一个类，即父类或超类或基类，从该类派生出其他类，即子类或子类。子类或子类通过向正在扩展的类的现有能力添加一些能力来扩展父类或超类。

`super()`是如何在派生类中调用 Java 类的父类或超类构造函数。

在面向对象编程的最初几年中，术语发生了相当大的变化，因为各种各样的人在该领域工作并发表论文和书籍并开发了面向对象语言。这一切都是全新的和令人兴奋的，人们试图确定要使用的正确词汇，因此他们尝试各种单词和短语来表达面向对象的概念。

随着许多面向对象编程语言的开发和普及，一个社区围绕着具有特定词汇的语言发展起来。因此，早期接触面向对象的年长和更有经验的程序员可能会称事情有点不同。

父母和孩子也用于描述其他类型的 Is-A 或 Has-A 关系。例如，父窗口和子窗口也用于窗口系统，其中一个窗口，子窗口，包含在另一个窗口，父窗口中。所以父窗口有一个子窗口。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T02:12:15.857

我会说是一样的。

您可能想要区分直接和间接父类或超类，但我想这两个术语也不够清楚。所以如果这是你想要表达的，最好是明确的。

此外，许多编程语言都使用“super”关键字来指代（单个）直接父类。但是即使在那里，如果您调用“超级”方法并且直接父级没有实现它，它也会冒泡。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-24T02:14:26.983

它们是处理相同 OOP 概念的不同术语：继承。如果类`ChildClass`扩展`ParentClass`你可以说：

*   `ChildClass`父类是 ParentClass
*   `ParentClass`是 ChildClass 的超类

继承级别与那里无关，如果超类本身扩展另一个类也没关系。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T02:14:12.040

它们本质上是相同的。根据语言，术语会发生变化。Parent 可能意味着直接的父级，而 Super 类可能意味着任何祖先类。另外，在java中还有super()方法，调用父类的构造函数。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-02-24T10:09:23.360

在**Ruby**语言中，这两个概念的含义不同。

**`ParentClass -> ChildClass`**-> 这用于命名空间

和

**`SuperClass -> SubClass`**-> 这用于继承

以下示例：

**`ParentClass -> ChildClass`**：

```
class A
  def self.f1
    puts "A -> #{self.name}.f1 called"
  end
  # B is childclass of A
  class B
    def self.f2
      puts "B -> #{self.name}.f2 called"
    end
  end
end

# C is subclass of A
class C < A
  def self.f3
    puts "C -> #{self.name}.f3 called"
    B.f2
  end
end 
```

请参阅下面的输出：

1.  `C.f1`

**A -> C.f1 调用**

2.  `C.f3`

**C -> C.f3 调用**

**B -> A::B.f2 调用**

# c# - 互锁比较交换 使用 GreaterThan 或 LessThan 代替相等

> ID：13042045
> 
> 赞同：27
> 
> 时间：2012-10-24T02:10:07.557
> 
> 标签：c#, c++, il, interlocked, interlocked-increment

该`System.Threading.Interlocked`对象允许将加法（减法）和比较作为原子操作。似乎不做相等但也将 GreaterThan/LessThan 作为原子比较的 CompareExchange 将非常有价值。

是 IL的假设`Interlocked.GreaterThan`特性还是 CPU 级别的特性？两个都？

缺少任何其他选项，是否可以在 C++ 或直接 IL 代码中创建这样的功能并将该功能公开给 C#？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-10-24T20:09:46.380

您可以[使用`InterlockedCompareExchange`](https://devblogs.microsoft.com/oldnewthing/20040915-00/?p=37863).

```
public static bool InterlockedExchangeIfGreaterThan(ref int location, int comparison, int newValue)
{
    int initialValue;
    do
    {
        initialValue = location;
        if (initialValue >= comparison) return false;
    }
    while (System.Threading.Interlocked.CompareExchange(ref location, newValue, initialValue) != initialValue);
    return true;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-02-09T13:27:34.763

使用这些辅助方法，您不仅可以交换价值，还可以检测它是否被替换。

用法如下所示：

```
int currentMin = 10; // can be changed from other thread at any moment

int potentialNewMin = 8;
if (InterlockedExtension.AssignIfNewValueSmaller(ref currentMin, potentialNewMin))
{
    Console.WriteLine("New minimum: " + potentialNewMin);
} 
```

这里有一些方法：

```
public static class InterlockedExtension
{
    public static bool AssignIfNewValueSmaller(ref int target, int newValue)
    {
        int snapshot;
        bool stillLess;
        do
        {
            snapshot = target;
            stillLess = newValue < snapshot;
        } while (stillLess && Interlocked.CompareExchange(ref target, newValue, snapshot) != snapshot);

        return stillLess;
    }

    public static bool AssignIfNewValueBigger(ref int target, int newValue)
    {
        int snapshot;
        bool stillMore;
        do
        {
            snapshot = target;
            stillMore = newValue > snapshot;
        } while (stillMore && Interlocked.CompareExchange(ref target, newValue, snapshot) != snapshot);

        return stillMore;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-10T15:05:05.853

你如何看待这个实现：

```
// this is a Interlocked.ExchangeIfGreaterThan implementation
private static void ExchangeIfGreaterThan(ref long location, long value)
{
    // read
    long current = Interlocked.Read(ref location);
    // compare
    while (current < value)
    {
        // set
        var previous = Interlocked.CompareExchange(ref location, value, current);
        // if another thread has set a greater value, we can break
        // or if previous value is current value, then no other thread has it changed in between
        if (previous == current || previous >= value) // note: most commmon case first
            break;
        // for all other cases, we need another run (read value, compare, set)
        current = Interlocked.Read(ref location);
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-15T06:46:51.470

更新我在这里发表的后一篇文章：我们找到了一种更好的方法，通过使用额外的锁定对象来进行更大的比较。我们编写了许多单元测试来验证锁和互锁可以一起使用，但仅限于某些情况。

代码如何工作：Interlocked 使用读取或写入原子的内存屏障。需要同步锁来使大于比较成为原子操作。所以现在的规则是在这个类内部没有其他操作写入没有这个同步锁的值。

我们从这个类中得到的是一个互锁的值，它可以非常快速地读取，但写入需要更多的时间。在我们的应用程序中，读取速度大约快 2-4 倍。

这里的代码作为视图：

见这里： http: [//files.thekieners.com/blogcontent/2012/ExchangeIfGreaterThan2.png](http://files.thekieners.com/blogcontent/2012/ExchangeIfGreaterThan2.png)

这里作为复制和粘贴的代码：

```
public sealed class InterlockedValue
{
    private long _myValue;
    private readonly object _syncObj = new object();

    public long ReadValue()
    {
        // reading of value (99.9% case in app) will not use lock-object, 
        // since this is too much overhead in our highly multithreaded app.
        return Interlocked.Read(ref _myValue);
    }

    public bool SetValueIfGreaterThan(long value)
    {
        // sync Exchange access to _myValue, since a secure greater-than comparisons is needed
        lock (_syncObj)
        {
            // greather than condition
            if (value > Interlocked.Read(ref  _myValue))
            {
                // now we can set value savely to _myValue.
                Interlocked.Exchange(ref _myValue, value);
                return true;
            }
            return false;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-24T03:28:40.143

这实际上不是真的，但将并发视为两种形式是很有用的：

1.  无锁并发
2.  基于锁的并发

这不是真的，因为基于软件锁的并发最终是使用堆栈上某处（通常在内核中）的无锁原子指令来实现的。然而，无锁原子指令最终都会在内存总线上获得硬件锁。因此，实际上，无锁并发和基于锁的并发是相同的。

但从概念上讲，在用户应用程序级别，它们是两种不同的做事方式。

基于锁的并发基于“锁定”对关键代码部分的访问的想法。当一个线程“锁定”了一个临界区时，没有其他线程可以在同一临界区内运行代码。这通常是通过使用“互斥锁”来完成的，它与操作系统调度程序接口并导致线程在等待进入锁定的临界区时变得不可运行。另一种方法是使用“自旋锁”，它会导致线程在循环中自旋，不做任何有用的事情，直到临界区可用。

无锁并发基于使用原子指令（CPU 特别支持）的思想，由硬件保证原子运行。Interlocked.Increment 是无锁并发的一个很好的例子。它只是调用执行原子增量的特殊 CPU 指令。

无锁并发很难。随着关键部分的长度和复杂性的增加，它变得特别困难。关键部分中的任何步骤都可以同时由任意数量的线程同时执行，并且它们可以以截然不同的速度移动。您必须确保尽管如此，整个系统的结果仍然正确。对于像增量这样的东西，它可以很简单（cs 只是一条指令）。对于更复杂的关键部分，事情会很快变得非常复杂。

基于锁的并发也很难，但不如无锁并发那么难。它允许您创建任意复杂的代码区域，并且知道任何时候只有 1 个线程在执行它。

然而，无锁并发有一个很大的优势：速度。如果使用得当，它可以比基于锁的并发快几个数量级。自旋循环不利于长时间运行的关键部分，因为它们无所事事地浪费 CPU 资源。互斥锁对于小的关键部分可能不好，因为它们会引入大量开销。它们至少涉及模式切换，最坏情况下涉及多个上下文切换。

考虑实施托管堆。每次调用“新”时调用操作系统将是可怕的。它会破坏您的应用程序的性能。但是，使用无锁并发可以使用互锁增量来实现第 0 代内存分配（我不确定 CLR 是否这样做，但如果不是，我会感到惊讶。这可能是一个巨大的储蓄。

还有其他用途，例如无锁数据结构，如持久堆栈和 avl 树。他们通常使用“cas”（比较和交换）。

然而，基于锁定的并发和无锁并发实际上是等价的，原因在于它们各自的实现细节。

自旋锁通常在其循环条件中使用原子指令（通常是 cas）。互斥锁需要在其实现中使用自旋锁或内部内核结构的原子更新。

原子指令依次使用硬件锁来实现。

无论如何，它们都有自己的权衡取舍，通常以性能与复杂性为中心。互斥锁可以比无锁代码更快也可以更慢。无锁代码可以比互斥锁更复杂也可以更简单。使用的适当机制取决于具体情况。

现在，回答你的问题：

如果小于，则执行互锁比较交换的方法将暗示调用者它没有使用锁。你不能用一条指令来实现它，就像增量或比较交换一样。您可以模拟它做减法（计算小于），并在循环中进行互锁比较交换。您也可以使用互斥锁来执行此操作（但这意味着锁定，因此在名称中使用“互锁”会产生误导）。构建“通过cas模拟联锁”版本是否合适？那要看。如果代码被非常频繁地调用，并且线程争用很少，那么答案是肯定的。如果没有，您可以将具有中等高常数因子的 O(1) 操作转换为无限（或非常长）循环，在这种情况下，最好使用互斥锁。

大多数时候不值得。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-24T02:17:14.860

所有联锁操作在硬件中都有直接支持。

互锁操作和原子数据类型是不同的东西。原子类型是库级别的功能。在某些平台上，对于某些数据类型，原子是使用互锁指令实现的。在这种情况下，它们非常有效。

在其他情况下，当平台根本没有互锁操作或它们对某些特定数据类型不可用时，库使用适当的同步（crit_sect、互斥锁等）来实现这些操作。

我不确定是否`Interlocked.GreaterThan`真的需要。否则它可能已经实施。如果你知道它有用的好例子，我相信这里的每个人都会很高兴听到这个。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-24T02:17:04.643

大于/小于和等于已经是原子操作。这并没有解决您的应用程序的安全并发行为。

让他们成为 Interlocked 家庭的一部分是没有意义的，所以问题是：你真正想要实现什么？

# c - C中return语句中的第二个值是什么意思

> ID：13042057
> 
> 赞同：5
> 
> 时间：2012-10-24T02:11:47.170
> 
> 标签：c

我有以下c代码：

```
#define ASSERT_ACTIVE(active) do { if (!active) return errno = 6, -1; } while (0);
#define errno (*_errno())

int someCrazyFunc (bool active) {
    ASSERT_INACTIVE (active);
    ...
} 
```

据我所知，a`#define`将简单地放置替换文本来代替指定的标识符。

我想知道：

*   是什么`return errno = 6, -1;`意思？是在一个返回语句中返回两个值吗？
*   替换代码是什么意思`(*_errno()) = 6`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T02:15:31.867

没有第二个值——一条`return`语句只返回一个值。在声明中：

```
return errno = 6, -1; 
```

返回值是表达式的结果`errno = 6, -1`。这是一个使用逗号运算符的表达式 - 它被解析为`(errno = 6), -1`，它的计算结果`-1`和赋值`6`为`errno`副作用。所以这意味着它相当于两个语句：

```
errno = 6;
return -1; 
```

假设这`_errno()`是一个返回指针的函数 - 例如它的返回类型为`int *`- 然后表达式`(*_errno()) = 6`将值分配给`6`函数返回值所指向的对象。它相当于类似于以下的代码：

```
int *p = _errno();
*p = 6; 
```

`errno`通常是这样定义的，以便为多线程实现中的每个线程提供自己的`errno`. 这种情况下的函数`_errno()`将返回一个指向当前线程`errno`变量的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T02:15:02.990

这实际上不是`return`语句的第二个值，它是逗号运算符。它的作用是计算逗号两边的表达式，但只“返回”第二个表达式的值。

所以要做`return errno = 6, -1;`的是分别评估表达式`errno = 6`，`-1`然后返回第二个表达式的结果，`-1`然后由`return`.

# ftp - 使用 bat 或 cmd 文件从预定义的 ftp 链接中检索 zip 文件

> ID：13042067
> 
> 赞同：0
> 
> 时间：2012-10-24T02:13:10.160
> 
> 标签：ftp, cmd, unzip

我有一个预定义的 ftp 链接，另一端有一个 zip 文件，我想将它保存到我的云服务器（运行 Windows Server 2008）上的目录中。将 zip 文件保存到指定目录后，例如“c:\MyZipFiles\ZipFile-1.zip”，我想解压缩文件，以便 zip 文件中包含的所有文件都可以在同一目录中访问. 我目前正在手动执行此操作，我想通过创建将为我执行这些步骤的 .bat 或 .cmd 文件来自动化此过程。

解压缩 zip 文件后，我在 Windows 服务器管理器的任务计划程序中有一个任务，可以将解压缩的文件用于其他用途。

预定义的链接如下所示：ftp: [//idx.realtor.com/idx_download/files.zip](ftp://idx.realtor.com/idx_download/files.zip)

我将非常感谢任何可以帮助我的人...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T02:56:08.070

批处理文件

```
ftp -s:ftp_cmds.txt host-name-goes-here
unzip local-file.zip
exit 
```

ftp_cmds.txt

```
username-goes-here
password-goes-here
cd remote-directory-goes-here
get files.zip local-file-name-goes-here.zip
quit 
```

这个批处理文件使用“解压缩”来解压缩存档，您可以在这里找到它：[http](http://gnuwin32.sourceforge.net/packages/unzip.htm) : //gnuwin32.sourceforge.net/packages/unzip.htm 将二进制文件放在同一目录中或将它们放在其他地方并设置您的窗口小路

我使用自己的 ftp 来测试其中的大部分内容。你的 ftp 对我来说是离线的，所以可能需要一些调整，但这应该会让你朝着正确的方向前进。

# cookies - 在 Jmeter 中设置用户定义的 cookie

> ID：13042070
> 
> 赞同：6
> 
> 时间：2012-10-24T02:13:54.963
> 
> 标签：cookies, jmeter

似乎没有太多关于在 JMeter (2.8) 中强制使用 Cookie 值的信息。

我希望能够在线程开始时设置一个 cookie（AWS LoadBalancer ID），这样我每次都可以选择一个特定的 ID。原因是 AWS 每次都提供相同的 ELB ID，除非您更改 IP。我想测试不止一个。

我尝试在 HTTP Cookie 管理器中设置用户定义的 cookie，但没有成功。（没有添加任何内容）

我也尝试将 COOKIE_Test 添加到 HTTP 标头管理器但没有成功。（添加到标题但不视为 cookie）

可能不可以吗？

**更新**：添加域条目修复它...
在检查正常的 set-cookie 时，它​​省略了域，所以我做了同样的...
我猜 Cookie 管理器会忽略和用户定义的带有空值的 cookie。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T13:34:08.240

添加域条目修复它

在检查正常的 set-cookie 时，它​​省略了域，所以我做了同样的事情......

Cookie 管理器会忽略任何具有空值的用户定义 cookie。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-24T02:16:50.590

您是否尝试过使用 Cookie 管理器用户界面？

[http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Cookie_Manager](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Cookie_Manager)

# android - 谷歌地理编码 API 限制

> ID：13042075
> 
> 赞同：4
> 
> 时间：2012-10-24T02:14:33.670
> 
> 标签：android, google-maps-api-3, google-api, reverse-geocoding, google-geocoder

谷歌地图和地理编码功能有请求限制。

谷歌地图的限制是每天加载 25000 张地图，这个限制取决于您的 apikey

因此，如果有 25000 个用户并且每个用户都提出了请求，那么您已经超过了限制，并且在您的 Google API 控制台中您可以看到您的配额：

-Ad Exchange 买方 API

-AdSense 管理 API

-分析API

-审核 API

-日历API

-Google+ API

-纬度API

- 静态地图 API

- 街景图像 API

-翻译API

-身份工具包 API

使用地理编码限制每天只有 2500 个请求，并且在我的 Google API 控制台中没有显示配额，这意味着限制与用户 IP 而不是开发人员证书有关，或者我错过了什么！？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T02:58:55.640

每天 2500 是按 IP 地址计算的。这意味着您的服务器发出 web 服务请求，它计入 2500。当客户端打开浏览器并加载您的地图并执行地理编码请求时，它计入该客户端的 2500。

每天 25K 是根据地图加载而非请求计算的。地图加载被定义为加载 JS 加载器。这是地图加载的定义： [https ://developers.google.com/maps/faq#usage_mapload](https://developers.google.com/maps/faq#usage_mapload)

# asp.net - asp.net 数据更新和第三方框架的技巧

> ID：13042080
> 
> 赞同：1
> 
> 时间：2012-10-24T02:15:03.833
> 
> 标签：asp.net, database, data-migration

我应该创建一个从外部源获取数据的数据传输实用程序。在这种情况下，它是另一个数据库，并将数据导入/更新到 asp.net 网站数据库中。

现在，数据库和站点是由另一方创建的，他们已经有一个 API/框架来访问数据库。

我试图在导入数据的网站上编写代码，但有时会超时并且应用程序池会回收。

如何在没有超时的情况下运行数据传输并使用第三方 API，这样我就不必重新编写大量代码？

几点注意事项：API 不能在网站之外工作。它崩溃并抛出错误。此外，用户可能希望用户界面手动运行数据传输。

# javascript - .slidetoggle 在 jquery 中单独的 div

> ID：13042086
> 
> 赞同：1
> 
> 时间：2012-10-24T02:15:56.797
> 
> 标签：javascript, jquery, slidetoggle

我几乎查看了所有其他问题，但没有一个修复对我有用。我正在尝试制作一张个人资料图片，该图片将在其下方切换生物。在我将 (this).next 添加到我的 slideToggle 事件之前，它会滑动，但会滑动 .bio 类的所有实例。添加 (this).next 会破坏代码。我将最新的 jquery.js 保存为我的文件夹中的 jquery-1.8.2.js。会不会是css问题？任何见解都会很有帮助。谢谢你。

```
<script>

             $(document).ready(function() {
             $('.bio').hide();

             $('.toggle').click(function() {
             $(this).next('.bio').slideToggle();
             });
             });
</script>

<div class="profile">
            <div class="profilepic">
            <a class='toggle' href="#"><img src="images/charles.jpg" width="100" height="100" alt="charles"/></a>
            </div><!-- end of profilepic class -->
            <div class="officerinfo">
            <h4 class='toggle'>Dude McDudeson</h4>
            <br>
            <a href="mailto:duuuude@gmail.com">duuuude@gmail.com</a> 
            <h5><a href="positions.html">President</a>
            <br>
            <br>
            </div><!-- end of officerinfo class -->
            <div class="bio" style="display:none">
            <p>description</p>
            </div><!-- end of bio class -->
            </div><!-- end of profile class --> 
```

css

```
/* Profile */
.profile
{
position: relative;
padding-top:20px;
width: 550px;
height: 150px;
}

/* ProfilePic */
.profilepic
{
float: left;
width: 100px;
height: 100px;
}

/* Officer Info */
.officerinfo
{
width:420px;
float: right;
}

/* Bio */
.bio
{
width: 420px;
float: right;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T02:21:47.313

试试这个：

```
$(this).parent().next('.bio').slideToggle(); 
```

该`.next()`方法在找到与提供的选择器匹配的元素之前不会扫描以下元素，它总是选择紧随其后的元素或不选择任何元素，具体取决于该元素是否与提供的选择器匹配。

但是，`h4.toggle`元素的父元素紧随其后`.bio`，因此`$(this).parent().next('.bio')`应该可以工作。

你也可以这样做：

```
$(this).closest('div.profile').find('.bio').slideToggle(); 
```

即，向上遍历到包含`.profile`div 元素，然后在该元素中找到 a`.bio`来切换。这更健壮，因为如果稍后更改结构并在元素之前插入其他元素，它不会被破坏`.bio`。

# java - 如何为多人 Android 应用程序设置 Java 服务器和数据库

> ID：13042089
> 
> 赞同：2
> 
> 时间：2012-10-24T02:16:46.780
> 
> 标签：java, android, networking, frameworks

我想制作一款多人 Android 游戏，并且在任何网络方面都绝对是新手。我对 C 和 Java 中的套接字编程有一些了解，但是据我了解，从 Android 设备到远程服务器的通信并不是那么简单。**基本上，我只是不确定如何设置该项目的服务器端组件。**我被告知要研究框架，但我不确定它们在我的特定情况下将如何使用。

这是我的应用程序如何工作以及我希望它如何与服务器通信的细分。每当用户想要登录、创建游戏、移动、检查统计数据等时，客户端应用程序都会向服务器发送请求。服务器将更新或从数据库中检索信息（以某种方式）并将其发送给客户端。如果玩家要移动，服务器负责进行所有计算，存储游戏状态，并将更新的游戏推送给两个玩家。

我希望有人可以阐明我将如何开始这个。任何信息将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T05:49:16.090

本质上，您想设置一个 Socket Server 程序，在您的服务器上侦听来自客户端的连接。您可以通过多种方式实现此目的，但您似乎想要利用运行服务器端的数据库（例如 MySQL）来处理登录用户的身份验证等。既然您说您很熟悉已经使用 Java，并且 Android 是基于 Java 的，我建议您将 Java 用于服务器应用程序。开始时需要考虑的几件事是：

Java 中的套接字编程：http: [//docs.oracle.com/javase/tutorial/networking/sockets/index.html](http://docs.oracle.com/javase/tutorial/networking/sockets/index.html)

在此处使用 Java 聊天客户端/服务器示例：http: [//pirate.shu.edu/~wachsmut/Teaching/CSAS2214/Virtual/Lectures/chat-c​​lient-server.html](http://pirate.shu.edu/~wachsmut/Teaching/CSAS2214/Virtual/Lectures/chat-client-server.html)

还可以查看 Oracle 网站上的 Java JDBC 教程（用于将 Java 与 MySQL 服务器连接），您可能会发现 Android AsyncTask 类在您实现 Android 客户端时会派上用场。最好从纯 Java 客户端开始，先让服务器方面工作，然后再转向基于 Android 的客户端。一旦你建立了一些代码，你就可以在这里发表更精致的帖子并收集更具体的答案。希望有帮助，祝你好运。

# java - 当代码来自 AJAX 时网站功能中断

> ID：13042097
> 
> 赞同：0
> 
> 时间：2012-10-24T02:17:32.663
> 
> 标签：java, html, css, ajax

我有一个图片库，当我将鼠标悬停在任何图片上时，图片会拉回来，露出一些文字。

当我在 HTML 文档中有以下 HTML 代码（在帖子底部）时，一切正常。

但是，当我将完全相同的 HTML 代码放入 Java servlet 并将其返回到页面时，一切看起来都很正常，但图像回调不再起作用。

知道为什么会发生这种情况吗？也许我需要进行某种刷新以使其正常工作？

图库中一项的相关代码：

```
 <li>
           <div class="header"><p><a href="product.jsp">Product 1 Shirt</a></p></div>
           <div class="gallery_item">
                    <img src="gallery/thumb/gallery_01.jpg" width="214" height="194" class="cover" alt="" />                        
                    <p>Highlight 1</p>
                    <p>Highlight 2</p>
                    <p>Highlight 3</p>
                    <a href="product.jsp" class="btn alignleft" title="More Info">More Info</a>                                               
                    <a href="gallery/fullsize/gallery_01.jpg" class="zoom" data-rel="prettyPhoto[gallery1]">Enlarge</a>                                                                    
                    <a href="gallery/fullsize/gallery_02.jpg" data-rel="prettyPhoto[gallery1]"></a>
           </div>
           <div class="p2"><p>Price: $10</p></div>
           <div class="p2"><p>In Stock: Yes</p></div>              

    </li> 
```

根据要求：servlet：

```
 public void service(HttpServletRequest request,
        HttpServletResponse response) throws IOException,
        ServletException
{
    PrintWriter out = response.getWriter();
    response.setContentType("text/html");
    String requestType = request.getParameter("type");
    String result;

    if(requestType.equals("getproductlist"))
    {
        Products products = Products.getProductsInstance();
        String keywords = request.getParameter(("keywords"));
        String organization = request.getParameter(("organization"));
        String price = request.getParameter(("price"));
        String sort = request.getParameter(("sort"));

        result = products.getProducts(keywords, organization, price, sort);

//this next lines of html are actually what is returned from products.getProducts. I'm just putting it here for clarity. All the variables (name, h1, etc) are okay.

        result += "<li>"
                    + "<div class=\"header\"><p><a href=\"product.jsp\">"+ name +"</a></p></div>"
                    + "<div class=\"gallery_item\">"
                    + "<img src=\"gallery/thumb/gallery_01.jpg\" width=\"214\" height=\"194\" class=\"cover\" alt=\"\" />"
                    + "<p>"+ h1 +"</p>"
                    + "<p>"+ h2 +"</p>"
                    + "<p>"+ h3 +"</p>"
                    + "<a href=\"product.jsp\" class=\"btn alignleft\" title=\"More Info\">More Info</a>"
                    + "<a href=\"gallery/fullsize/gallery_01.jpg\" class=\"zoom\" data-rel=\"prettyPhoto[gallery1]\">Enlarge</a> "
                    + "<a href=\"gallery/fullsize/gallery_02.jpg\" data-rel=\"prettyPhoto[gallery1]\"></a>"
                    + "</div>"
                    + "<div class=\"p2\"><p>Price: "+ itemPrice +"</p></div>"
                    + "<div class=\"p2\"><p>In Stock: "+ inStock +"</p></div>   "
                    + "</li>";

        out.println(result);
        out.close();

    } 
```

# php - 标签数组排序问题

> ID：13042100
> 
> 赞同：9
> 
> 时间：2012-10-24T02:17:49.323
> 
> 标签：php, wordpress

2012 年 10 月 25 日 - 仍未解决！请看下面：

我的客户有一个 WordPress 标签云（标签数组），其标签包括 ["] 字符以及某些标签的 [The] 前缀。即：

```
"rose"
"autumn"
The Abby
The Cloud
The Elephant 
```

显然，引号 ["] 中的所有标签都排序在列表的顶部，所有以 [The] 前缀开头的单词都排序在字母 [T] 周围的某个位置（遵循逻辑 ASC 顺序）。

我发现：“所有标签（在 WP 标签云中）都必须按升序排序，但那些包含 [" "] 或 [The] 字符的标签必须按时间顺序与所有其他标签一起排序，忽略["] 和 [The] 前缀。

我查看了 WP 核心功能：

```
**function wp_generate_tag_cloud** 
```

但我不知道从哪里开始。在原始 SQL 语句中，我可能使用 trim() 过滤掉 [" "] 和 [The] 字符形成标签云数组，但这只是我不知道如何应用的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T19:45:15.707

`wp_generate_tag_cloud()`调用一个名为 的过滤器`tag_cloud_sort`，它可以覆盖参数中指定的排序顺序`$args`。过滤器`tag_cloud_sort`接收标签数组和`$args`传递给的实际参数`wp_generate_tag_cloud()`，因此它可以检查`wp_generate_tag_cloud()`调用的完整设置并相应地调整其行为。

你可以尝试这样的事情：

```
function custom_tag_sort($tags, $args) {
    if ($args['orderby'] != 'name') {
        // do not reorder if sort order is not by name.
        // wp_generate_tag_cloud() is smart enough to notice order
        // is not changed and will proceed with its regular sort logic.
        return $tags;
    }
    uasort($tags, 'custom_tag_sort_compare');
}

function custom_tag_sort_compare($a, $b) {
    return strnatcasecmp(
        custom_tag_sort_normalize($a->name),
        custom_tag_sort_normalize($b->name)
    );
}

function custom_tag_sort_normalize($tag) {
    // strip quote marks
    $tag = trim($tag, '"');
    // strip leading definitive article
    $tag = preg_replace('/^\s*the\s+/i', '', $tag);
    return $tag;
}

add_filter('tag_cloud_sort', 'custom_tag_sort'); 
```

免责声明：我只是在粗略检查了[`wp_generate_tag_cloud()`](http://core.trac.wordpress.org/browser/tags/3.4.2/wp-includes/category-template.php#L607)函数后才写了这个。我还没有在实时 WordPress 安装上对其进行测试；我只验证了排序功能在您的示例标签云上正常工作：

```
The Abby
"autumn"
The Cloud
The Elephant
"rose" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T02:54:12.940

好的，所以您要避免修改 wordpress 的核心代码...当您的客户在您告诉他不要之后点击更新按钮时，您将不得不再次进入并弄乱它.. 改用动作挂钩。有一个方便的挂钩到标签云功能的输出。将此添加到您的主题函数文件中

```
function tagCloudFilter($tagCloudString, $args)
{
    $tagCloudString = str_replace('The','', $tagCloudString);
    $tagCloudString = str_replace('"','', $tagCloudString);
}

add_filter('wp_tag_cloud', 'tagCloudFilter', 10, 2); 
```

这至少会摆脱你不想要的东西。至于排序，我不确定，但这应该会让你上路。使用 jquery 对其进行排序可能更容易

如果您真的想修改核心代码，请在格式化之前在标记数组中运行一个 foreach 循环，并在该循环中使用上面的 str_replaces .. 只需在该数组上运行 sort() 就可以了。但如果是我，我会选择一半的解决方案，而不是按字母顺序排列，而不是修改 wordpress 核心

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T15:30:56.877

这里有一个想法：

您可以复制原始的 tag_cloud 函数并在您的 functions.php 上创建自己的函数。

您进行您想要进行的更改并在函数中添加此过滤器：

```
$return = apply_filters( 'YOUR_tag_cloud_function', $return, $args ); 
```

然后创建上一个过滤器以将您的函数添加到钩子中：

```
add_filter('wp_tag_cloud', 'YOUR_tag_cloud_function'); 
```

我不知道它是否有效，我没有测试它。你怎么看？

# dart - 清除/清空 tbody 元素的所有内容？

> ID：13042102
> 
> 赞同：1
> 
> 时间：2012-10-24T02:18:14.970
> 
> 标签：dart

我如何在飞镖中做到这一点？

抓取一个 tbody 元素后，我想对其调用 empty() ，但这似乎不存在：

```
var el = query('#search_results_tbody');
el.empty(); 
```

我试过这个，但它表现得很奇怪，我什至不明白结果是什么！

```
el.nodes.forEach((c) {c.remove();}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T08:00:16.353

我相信目前最快和最简单的方法是将内容设置为空：

```
var el = query('#search_results_tbody');
el.innerHtml = ''; 
```

`innerHtml`这些天在浏览器上进行了相当优化，应该很快。

或者，您也可以这样做：

```
el.children.clear(); 
```

哪里`children`有一个`List<Element>`清除`clear()`列表的方法。

# macos - 在 OS X 中放大流式网络摄像头图像

> ID：13042103
> 
> 赞同：1
> 
> 时间：2012-10-24T02:18:25.057
> 
> 标签：macos, core-animation, core-graphics, avfoundation

我需要从 USB / UVC 兼容的网络摄像头拍摄流式图像并进行数字放大。该应用程序适用于视力低下的人能够阅读。

该应用程序必须在 MAC / OS X 上运行。

我正在尝试确定使用哪个框架。我确实发现我可以使用 CALayer 并应用仿射变换，但是图像像您期望的那样是颗粒状的。我需要用抗锯齿或其他一些方法来平滑它。

我知道这是一个非常笼统的问题，但我需要知道如何集中精力。目前我正在追逐我的尾巴阅读文档等。

有人对什么 OS X 框架有什么建议，还有什么算法或方法可以消除颗粒状的放大图像？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:52:44.010

你基本上是在谈论插值——通过一些智能的信息填充来调整图像的大小，而不是仅仅切割像素。您可以研究多种方法，例如“双线性”、“双三次”等。在 Apple API 中，您可能想查看 CGContextSetInterpolationQuality，它可以帮助您解决所看到的一些噪音。OpenCV 是一个非常广泛的图像处理库，可在 OSX 上轻松使用并具有 C++ API。

但请记住，您最终会受到网络摄像头质量和环境（尤其是照明）的限制。有“超分辨率”技术可以将多个图像拼接在一起，但如果这是一个实时视频应用程序，它们可能不适用。

我不能过分强调良好照明对于此类应用的重要性。如果你考虑做这个的 iOS 版本，看看像 Turboscan 这样的应用程序使用 flash 和“最好的三个”技术做了什么。令人惊讶的是，您可以通过这种方式获得打印文本的高质量图像。

# c - 存储客户端结构并在之后使用它

> ID：13042107
> 
> 赞同：0
> 
> 时间：2012-10-24T02:18:55.693
> 
> 标签：c, linux, sockets

我这样存储我的客户..

```
 int MAXCLIENTS = 4;
   int ClientCount = 0;
   int FreeSpot[MAXCLIENTS];

    typedef struct CLIENTS_FD{

    int sock;
    struct sockaddr_in cli_adr;

    }cliuse;

    cliuse MYCLIENTS[4];

do{

    NewSFD = accept(ServerFD,(struct sockaddr *) &cli_addr, &clilen);
              if (NewSFD < 0)
              {
                 if (errno != EWOULDBLOCK)
                 {
                    perror("  accept() failed");
                    DCSERVER = TRUE;
                 }
                 break;
              }
               if(ClientCount < MAXCLIENTS){
                for(loop = 0; loop < MAXCLIENTS; loop++){

                if(FreeSpot[loop]<0){

                Clients[loop].sock = NewSFD;

                break;

                }

              }

              ClientCount++;
 }
          else
          {

          printf("Maximum Client Reached.\n");
          char *sendtoclient = "Server full";
          send(NewSFD, sendtoclient, strlen(sendtoclient),0);
          close(NewSFD);
          break;

          }

            ip = ntohl(cli_addr.sin_addr.s_addr);
            printf("  Connection from %d.%d.%d.%d\n",
                (int)(ip>>24)&0xff,
                (int)(ip>>16)&0xff,
                (int)(ip>>8)&0xff,
                (int)(ip>>0)&0xff);
                dlogs(ip);

}while(NewSFD != -1); 
```

我知道我可以存储我的客户文件描述符，但是我如何存储我的客户结构并在之后使用它我想向它发送消息？...说我想用 ip 192.168.5.10 向客户端发送消息。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:57:42.677

我认为您错过了有关网络编程的一些重要观点。也许您应该阅读[本文](http://beej.us/guide/bgnet/)以获取更多详细信息和如何开始的信息。

尽管如此`accept(int sockfd, struct sockaddr *addr, socklen_t *addrlen)`，将填充客户端地址结构，即第二个参数 ( `struct sockaddr *addr`)。然后，您可以轻松地将此地址添加到您的 CLIENTS_FD 结构中。

```
Clients[loop].sock = NewSFD; 

Clients[loop].cli_adr = cli_addr; 
```

假设 Clients 是 cliuse （或`struct CLIENTS_FD`）。

无论如何，就像上面一些评论中提到的那样，您不需要将此地址存储在任何地方。您需要与客户沟通的只是它`sockfd`（由接受返回）。

更重要的是，您的代码中可能存在一些错误：

```
int FreeSpot[MAXCLIENTS]; 
```

未初始化，因此当您尝试检查它时

```
if(FreeSpot[loop]<0) 
```

这可能导致错误的行为。您可以简单地编写`int FreeSpot[MAXCLIENTS] = {0};`You should then 在某处（可能在`if(FreeSpot[loop]<0)`语句内部）添加类似这样`FreeSpot[loop] = 1;`的内容以在下次检查之前正确设置它。

```
int MAXCLIENTS = 4; 

int FreeSpot[MAXCLIENTS]; 
```

从 C99 开始，可以使用常量以外的东西来声明表。这称为 VLA（可变长度数组）。尽管如此，在您的情况下，我认为使用 VLA 毫无意义。试试看`#define MAXCLIENTS 4`（如上面一些评论中所建议的那样）。

要写信给客户，在从 do-while 循环返回后，您可以简单地使用如下所示的内容：

```
send(Clients[i].sock, msg, len, flags); 
```

其中 i 是您的客户的编号（范围 0-3），再次假设客户是`cliuse`（或`struct CLIENTS_FD`）。

# python - 如何让用户登录 Mezzanine 教程网站？

> ID：13042109
> 
> 赞同：2
> 
> 时间：2012-10-24T02:19:07.123
> 
> 标签：python, django, mezzanine

我刚刚在我的 linux 服务器上安装了 Mezzanine。按照教程，使用命令集

```
mezzanine-project project_name
cd project_name
python manage.py createdb --noinput
python manage.py runserver 
```

现在我有了第一个简单的网站。

在设置中，有一个关于

“评论所需的帐户：如果为真，用户必须登录才能发表评论”

但是我看不到教程网站上提供的任何登录功能。

我们应该只手工创建帐户/登录功能吗？还是有更好的方法来做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:14:46.143

您需要启用提供所有登录功能的 mezzanine.accounts 应用程序。

这完全包含在文档中：

[http://mezzanine.jupo.org/docs/user-accounts.html](http://mezzanine.jupo.org/docs/user-accounts.html)

# c++ - 创建一个 Fast Sin() 函数来提高 fps ？快速 sin() 函数？

> ID：13042110
> 
> 赞同：5
> 
> 时间：2012-10-24T02:19:28.363
> 
> 标签：c++, c, performance, math, trigonometry

我正在实时渲染 500x500 点。我必须使用 atan() 和 sin() 函数计算点的位置。通过使用 atan() 和 sin() 我得到**24 fps**（每秒帧数）。

```
float thetaC = atan(value);
float h = (value) / (sin(thetaC))); 
```

如果我不使用 sin() 我得到**52 fps**。

如果我不使用 atan() 我是**30 fps**。

所以，最大的问题是 sin()。如何使用 Fast Sin 版本。我可以为此创建一个查找表吗？我没有任何特定的值来创建 LUT。在这种情况下我该怎么办？

***PS：我也尝试过 ASM 的快速 sin 功能，但没有任何区别。***

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T02:50:34.997

稍等一下....

你有一个三角形，你正在计算斜边。首先，您要`atan(value)`获取角度，然后`value`再次使用 with`sin`来计算`h`。所以我们有三角形的一侧是1的场景：

```
 /|
h / | value
 /  |
/C__|
  1 
```

您真正需要做的就是计算`h = sqrt(value*value + 1);`……但是，`sqrt`这也不是最快的功能。

也许我错过了重点，或者你遗漏了一些东西。我一直使用查找表`sin`和`cos`，并发现它们很快。如果您不提前知道这些值，那么您需要进行近似，但这意味着乘法、截断为整数（可能还有符号转换）以获得数组索引。如果您可以将单位转换为整数（有效地将浮点数转换为定点），则查找速度会更快。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-24T02:26:13.583

这取决于您需要的准确性。sin 的最大导数是 1，因此如果 x1 和 x2 在彼此的 epsilon 范围内，则 sin(x1) 和 sin(x2) 也在 epsilon 范围内。如果您只需要精度在 0.001 以内，那么您可以创建一个 1000 * PI = 3142 点的查找表，然后查找最接近您需要的值。这可能比本机代码更快，因为本机代码（可能）使用查找表来查找多项式系数，然后进行插值，并且该表可以足够小以便轻松地保留在缓存中。

如果您需要在整个范围内完全准确，那么您可能没有比这更好的方法了。

如果您愿意，您还可以在 (1/sin(x)) 上创建一个查找表，因为这是您实际感兴趣的函数。无论哪种方式，您都需要小心 sin(x) = 0，因为 sin(x) 中的一个小错误可能会导致 1/sin(x) 中的一个大错误。定义你的容错对于弄清楚你可以走什么捷径很重要。

您将使用以下内容创建查找表：

```
float *table = malloc(1000 * sizeof(float));
for(int i = 0; i < 1000; i++){
  table[i] = sin(i/1000.0);
} 
```

并会像这样访问它

```
float fastSin(float x){
  int index = x * 1000.0;
  return table[index];
} 
```

此代码不完整（由于数组边界，0 < x < 1 之外的任何内容**都会崩溃），但应该可以帮助您入门。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T02:36:00.260

对于 sin（但不是 atan），您实际上可以比表格更简单——只需创建

```
float sin_arr[31416]; //Or as much precision as you need
for (int i=0; i<31416; ++i)
   sin_arr[i] = sin( i / 10000.0 );

//...

float h = (value) / sin_arr[ (int)(thetaC*10000.0) % 31416 ]; 
```

我的猜测是，这会给你带来速度上的提升。

# ws-security - 执行 WSO2 示例 100（WS-Security 示例）时的壁垒加密错误

> ID：13042112
> 
> 赞同：0
> 
> 时间：2012-10-24T02:19:32.553
> 
> 标签：ws-security, wso2esb, rampart

当我执行 WSO2 示例 100（WS-Security 示例）时，我的 WSO2-ESB 抛出以下错误消息，[http](http://wso2.org/project/esb/java/4.0.3/docs/samples/qos_mediation_samples.html) ://wso2.org/project/esb/java/4.0.3/docs/samples/qos_mediation_samples.html ）：

```
ERROR - Axis2Sender Unexpected error during sending message out org.apache.axis2.AxisFault: Error in encryption
    At org.apache.rampart.handler.RampartSender.invoke(RampartSender.java:117)
....
    org.apache.xml.security.encryption.XMLEncryptionException: Illegal key size or default parameters 
```

我的 WSO2-AS 抛出：

```
ERROR {org.apache.axis2.engine.AxisEngine} -  Missing wsse:Security header in request org.apache.axis2.AxisFault: Missing wsse:Security header in request 
```

“非法密钥大小或默认参数”是什么意思？如何修复此错误？

顺便说一句，我使用的是包含 JCE API 和 local_policy.jar、US_export_policy.jar 等的 JDK 1.6。所以，我想这不是 JCE 问题。(http://wso2.org/node/2520/print)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T12:09:30.040

您可能需要修补与您的 jdk 版本相关的 local_policy.jar 和 US_export_policy.jar。

请参考[http://blog.rampartfaq.com/2009/08/faq-001-javasecurityinvalidkeyexception.html](http://blog.rampartfaq.com/2009/08/faq-001-javasecurityinvalidkeyexception.html)

——蒂利尼

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-30T11:31:40.237

输入cmd：java -version，查看这个版本是否和wso2启动时显示的版本一致。

如果这些版本不相等，请修改路径并将 %JAVA_HOME%\bin 放在 %SystemRoot%\system32 之前。

# mysql - MySQL 中的 COUNT 帮助

> ID：13042116
> 
> 赞同：1
> 
> 时间：2012-10-24T02:20:18.557
> 
> 标签：mysql

我有下表： 表是：探针

探测

------ProbeID-----TranscriptID----

```
 2655       4555555
   2600       5454542
   2600       4543234
   2344       56595959 
```

...ETC

我如何计算每个转录本的探针数？重要的是，同一个探针可以与多个转录本相关联。

我需要最终输出是实际的探测器数量。我的意思是，总数（即 12340）而不是带有探针的实际表。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T02:21:58.607

如果您想计算`TranscriptID`与每个 ProbeID 关联的数量，您可以将`group by`其用作：

```
SELECT ProbeID, count(*)
FROM tab
GROUP BY ProbeID; 
```

如果你只想要不同的计数，`ProbeID`你可以这样做：

```
SELECT COUNT(DISTINCT ProbeID) 
FROM tab 
```

# android - 如何使用 CAP_NET_ADMIN 功能运行 Android 进程

> ID：13042117
> 
> 赞同：5
> 
> 时间：2012-10-24T02:20:31.537
> 
> 标签：android, android-permissions

我有一个使用 JNI 库的 Android 活动，该库使用 netlink 命令配置网络接口（在本例中为 socketcan 接口）。如果我运行该活动，网络接口配置将失败，并出现来自 RTNETLINK的**EPERM错误。**失败的命令需要**CAP_NET_ADMIN**功能才能成功完成。因此，以 root 身份运行代码成功，并且以 root 身份运行，然后使用**capset将功能限制为仅****CAP_NET_ADMIN**。

 **我在应用程序清单中添加了以下权限，这给我的印象是我的进程将获得 NET_ADMIN 功能：

```
<uses-permission android:name="android.permission.INTERNET" />    
<uses-permission android:name="android.permission.NET_ADMIN" /> 
```

这会将进程置于**inet**和**net_admin**组中，但该进程没有收到 CAP_NET_ADMIN 功能，导致 netlink 命令失败并显示 EPERM。

在我对该主题进行的各种搜索中，我发现了应该应用该功能的提示。例如，来自[http://elinux.org/Android_Security](http://elinux.org/Android_Security)

```
#define             GID     Capability
AID_NET_BT_ADMIN    3001    Can create an RFCOMM, SCO, or L2CAPP Bluetooth socket
AID_NET_BT          3002    Can create a Bluetooth socket
AID_INET            3003    Can create IPv4 or IPv6 socket
AID_NET_RAW         3004    Can create certain kinds of IPv4 sockets??
AID_NET_ADMIN*      3005    Allow CAP_NET_ADMIN permissions for process 
```

不幸的是，这似乎不适用于我的系统。

注意：我正在使用由芯片组供应商修改的系统和内核运行，因此可能已经修改了某些内容，使其无法正常工作。

有人知道吗

*   如果这应该*工作*？
*   将功能添加到流程还需要哪些其他步骤？
*   是否有可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T19:46:14.733

原来Android修改了内核能力体系，允许基于group-id验证特定能力。不幸的是，所做的修改似乎并未涵盖所有情况。为了解决我遇到的问题，我修改了**cap_netlink_recv**检查以使用 Android 修改后的**cap_capability**调用。这允许 net_link 组中的用户获得**CAP_NET_LINK**功能。

此更改似乎符合对 Android 内核所做修改的精神，并且适用于我的情况。

```
diff --git a/security/commoncap.c b/security/commoncap.c
        index ccfe568..f069f8d 100644
        --- a/security/commoncap.c
        +++ b/security/commoncap.c
        @@ -56,21 +56,23 @@
    }
}

int cap_netlink_send(struct sock *sk, struct sk_buff *skb)
{
» return 0;
}

int cap_netlink_recv(struct sk_buff *skb, int cap)
{
-» if (!cap_raised(current_cap(), cap))
+» if (cap_capable(current, current_cred(),
+» » » current_cred()->user->user_ns, cap,
+» » » SECURITY_CAP_NOAUDIT) != 0)
» » return -EPERM;
» return 0;
}
EXPORT_SYMBOL(cap_netlink_recv);

/**
 * cap_capable - Determine whether a task has a particular effective capability
 * @tsk: The task to query
 * @cred: The credentials to use
 * @ns:  The user namespace in which we need the capability 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-25T23:56:35.597

*[实际上，在 netlink 路径中，对于v3.1-18-gfd77846](https://git.kernel.org/linus/fd778461524849afd035679030ae8e8873c72b81)**之前的内核版本*没有额外的权限检查。

最初完全替换似乎不是一个好主意`cap_raised`，所以这里我选择在前面加上一个与`cap_capable`. 其他可能`cap`的 s 是`CAP_SYS_ADMIN`,`CAP_AUDIT_CONTROL`和`CAP_AUDIT_WRITE`，但这些与网络无关。请注意，由于上述提交，它最终会调用`cap_capable`(via `capable`)。

补丁：

```
diff --git a/security/commoncap.c b/security/commoncap.c
index 8bfbd13..485245a 100644
--- a/security/commoncap.c
+++ b/security/commoncap.c
@@ -63,6 +63,10 @@ int cap_netlink_send(struct sock *sk, struct sk_buff *skb)

 int cap_netlink_recv(struct sk_buff *skb, int cap)
 {
+#ifdef CONFIG_ANDROID_PARANOID_NETWORK
+   if (cap == CAP_NET_ADMIN && in_egroup_p(AID_NET_ADMIN))
+       return 0;
+#endif
    if (!cap_raised(current_cap(), cap))
        return -EPERM;
    return 0; 
```

对于那些正在看的人`CAP_NET_RAW`，为此你需要在`net_raw`小组中。将该组添加到现有`android.permission.NET_ADMIN`权限或应用以下框架补丁：

```
diff --git a/core/res/AndroidManifest.xml b/core/res/AndroidManifest.xml
index 1e7dcf7..07f5d94 100644
--- a/core/res/AndroidManifest.xml
+++ b/core/res/AndroidManifest.xml
@@ -927,6 +927,12 @@
         android:permissionGroup="android.permission-group.SYSTEM_TOOLS"
         android:protectionLevel="signature" />

+    <!-- Allows access to raw sockets, allowing full network access and spoofing.
+         @hide -->
+    <permission android:name="android.permission.NET_RAW"
+        android:permissionGroup="android.permission-group.SYSTEM_TOOLS"
+        android:protectionLevel="signature" />
+
     <!-- Allows registration for remote audio playback. @hide -->
     <permission android:name="android.permission.REMOTE_AUDIO_PLAYBACK"
         android:permissionGroup="android.permission-group.SYSTEM_TOOLS"
diff --git a/data/etc/platform.xml b/data/etc/platform.xml
index 47cb7ab..9c209c3 100644
--- a/data/etc/platform.xml
+++ b/data/etc/platform.xml
@@ -82,6 +82,10 @@
         <group gid="net_admin" />
     </permission>

+    <permission name="android.permission.NET_RAW" >
+        <group gid="net_raw" />
+    </permission>
+
     <!-- The group that /cache belongs to, linked to the permission
          set on the applications that can access /cache -->
     <permission name="android.permission.ACCESS_CACHE_FILESYSTEM" > 
```**

# c# - 将不同的 IP 绑定到每个 WebRequest 不起作用

> ID：13042118
> 
> 赞同：-1
> 
> 时间：2012-10-24T02:20:52.153
> 
> 标签：c#, httpwebrequest, webrequest

我有 5 个不同的 IP 需要绑定不同的 Web 请求。

请参阅下面的示例代码。Call1() 完美运行。但是当我尝试在 Call2() 中使用 List<Task> 时，它会将错误的 IP 绑定到请求（我在所请求站点的 IIS 日志中仔细检查了 IP）。

请帮忙！！！

```
 class Program
    {

        private static string[] IPs = new string[] { "xxx.xxx.xx.xxx", "xxx.xxx.xx.xxx", "xxx.xxx.xx.xxx", "xxx.xxx.xx.xxx", "xxx.xxx.xx.xxx" };
        private static string Url = "http://myfakedomain.com/{0}.aspx";

        static void Main(string[] args)
        {
            Call1();
            Call2();
        }

        static void Call1()
        {
            WebHandler web = new WebHandler();

                foreach (var ip in IPs)
                {
                    web.MakeWebRequest(String.Format(Url,ip), ip);
                }
        }

        static void Call2()
        {
            WebHandler web = new WebHandler();
            List<Task> tasks = new List<Task>();

                foreach (var ip in IPs)
                {
                   var ipCopy = ip;
                    tasks.Add(Task<bool>.Factory.StartNew(() => web.MakeWebRequest(String.Format(Url, ipCopy ), ipCopy )));
                }

                Task.WaitAll(tasks.ToArray());
        }

    }

    public class WebHandler
    {
        public bool MakeWebRequest(string Url, string IP)
        {
            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(Url);
            request.ServicePoint.BindIPEndPointDelegate = (servicePoint, remoteEndPoint, retryCount) => new IPEndPoint(IPAddress.Parse(IP), 0);

            request.KeepAlive = false;

            using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
            {
                using (StreamReader reader = new StreamReader(response.GetResponseStream(), Encoding.ASCII))
                {
                    string html = reader.ReadToEnd();
                }
            }

            return true;
        }
    } 
```

下面是 Call2() 的 IIS 日志

```
2012-10-23 01:53:20 xxx.xxx.xx.xxx GET /xxx.xxx.xx.244.aspx - 80 - xxx.xxx.xx.242 - 200 0 0 1185
2012-10-23 01:53:20 xxx.xxx.xx.xxx GET /xxx.xxx.xx.241.aspx - 80 - xxx.xxx.xx.242 - 200 0 0 1201
2012-10-23 01:53:21 xxx.xxx.xx.xxx GET /xxx.xxx.xx.243.aspx - 80 - xxx.xxx.xx.242 - 200 0 0 608
2012-10-23 01:53:21 xxx.xxx.xx.xxx GET /xxx.xxx.xx.242.aspx - 80 - xxx.xxx.xx.242 - 200 0 0 624
2012-10-23 01:53:21 xxx.xxx.xx.xxx GET /xxx.xxx.xx.245.aspx - 80 - xxx.xxx.xx.242 - 200 0 0 218 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:50:15.583

在处理 lambda 表达式时，这与 foreach 循环中的变量闭包很常见。本质上，如果您将 Call2() 代码更改为下面的代码，它应该可以按预期工作。如果您对它发生的确切原因感兴趣，请查看[Eric Lippert 的博客文章](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)以获得出色的解释。

```
static void Call2()
{
    WebHandler web = new WebHandler();
    List<Task> tasks = new List<Task>();

    foreach (var ip in IPs)
    {
        var ipCopy = ip;
        tasks.Add(Task<bool>.Factory.StartNew(() => web.MakeWebRequest(String.Format(Url, ipCopy), ipCopy)));
    }

    Task.WaitAll(tasks.ToArray());
} 
```

# vb.net - 将组合框的值检索到另一个组合框。

> ID：13042119
> 
> 赞同：0
> 
> 时间：2012-10-24T02:20:55.580
> 
> 标签：vb.net, visual-studio-2010, combobox

我正在使用 Microsoft Visual Studio 2010

我有两个组合框。

```
-Combobox1.Text
-Combobox2.Text 
```

第一个 combobox1 包含 ff: items

```
-Globe
-Smart
-Sun 
```

第二个 combobox2 包含 ff 项：

```
-Smart30
-Smart60
-Smart115
-AMAX
-Globe30
-TU20
-TU50
-TU150
-DCTU100 
```

我想要做的是当我在 ComboBox1.Text 中单击 Globe 时，-AMAX 和 -Globe 30 出现在第二个 ComboBox2 中，而当我单击 Smart 时，-Smart30，-Smart60 和 -Smart115 出现在 ComboBox2 中，就像在 SUN.,

那么有可能做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T02:30:37.497

您应该必须将*这些*数据存储到 a`Dictionary<string,List<string>`并使用数据绑定技术分配给 selected of 的`List<T>`comboBox2 。`Key``ComboBox1`

样本：

```
 Dim data As New Dictionary(Of String, List(Of String))
 data.Add("Select", New List(Of String))
 data.Add("First", New List(Of String) From {"A", "B", "C"})
 data.Add("Second", New List(Of String) From {"P", "Q"})

 ComboBox1.DataSource = data.Keys.ToList()
 AddHandler ComboBox1.SelectedIndexChanged, 
      Sub(sa, ea)
          ComboBox2.DataSource = data(ComboBox1.Text)
      End Sub 
```

# c++ - AVL 树的 C++ 代码给出访问冲突错误

> ID：13042120
> 
> 赞同：1
> 
> 时间：2012-10-24T02:20:57.470
> 
> 标签：c++, segmentation-fault

我已经为 avl 编写了一个代码，它在执行过程中执行/中途后给了我以下错误。
我猜它是某种内存泄漏问题。有人可以指出应该修复什么吗？代码块给出了一个弹出分段错误。错误 ：`Unhandled exception at 0x77B2A710 (ntdll.dll) in ADS Project.exe: 0xC0000005: Access violation writing location 0x00000014.`

代码：

```
{
InputGenerator ip;
int numbers[1000000];
ip.RandomInput(numbers, 1000000);
AVL *avlTree = (AVL *) malloc(1000000* sizeof(AVL *));
AVL *root = NULL;

auto avlOps = make_shared < AVL > ();
int input = 0;
*avlTree = AVL(numbers[0]);
root = avlTree;
avlTree++;

int balanceFac = 0;
input = 1;
while (input != 1000000)
{

    //cout << "sorting : ";
    //avlOps->InorderPrint(root);

    cout << endl;
    cout << "Inserting : " << numbers[input] << endl;

    *avlTree = AVL(numbers[input]);
    avlOps->Insert(avlTree, root);

    // check if rotation is required.
    AVL * tempNo=avlTree->GetParent();  

    while(tempNo!=NULL)
    {
        int balFac=0;
        AVL* node1=NULL;
        AVL* node2=NULL;
        AVL* node3=NULL;
        int rCase=0;
        balFac=avlOps->GetBalanceFactor(tempNo);
        if(balFac>1||balFac<-1)
        {
            node1=tempNo;
            if(balFac>0)
            {
                node2=node1->GetLChild();
                balFac=avlOps->GetBalanceFactor(node2);
                if(balFac>0)
                {
                    node3=node2->GetLChild();
                    rCase=1;
                }
                else
                {
                    node3=node2->GetRChild();
                    rCase=3;
                }
            }
            else
            {
                node2=node1->GetRChild();

                balFac=avlOps->GetBalanceFactor(node2);
                if(balFac>0)
                {
                    node3=node2->GetLChild();
                    rCase=4;
                }
                else
                {
                    node3=node2->GetRChild();
                    rCase=2;
                }
            }
            root=avlOps->Rotation(node1,node2,node3,root,rCase);
        }
        tempNo=tempNo->GetParent();
    }
    cout<<endl;

    cout << "Root :" << root->GetKey() << endl;
    cout << "******" << endl;
    avlTree++;
    input++;

}

avlOps->InorderPrint(root);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T02:26:36.853

我可以看到的一个问题是：

```
AVL *avlTree = (AVL *) malloc(1000000* sizeof(AVL *)); 
```

应该

```
AVL *avlTree = (AVL *) malloc(1000000* sizeof(AVL));
                                              ^^^ 
```

可能还有更多。在这种情况下，调试器是你最好的朋友。

# sockets - 我可以将 socket.io 与 Play Framework 2.0 Web 套接字一起使用吗？

> ID：13042124
> 
> 赞同：4
> 
> 时间：2012-10-24T02:21:32.320
> 
> 标签：sockets, playframework, websocket, socket.io, playframework-2.0

Play Framework 2.0 附带了一个示例应用程序。该应用程序在服务器端使用 Play 的 WebSocket 实现。我想知道我可以在客户端使用 socket.io 来连接服务器端的 Play 的 WebSocket 实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:54:19.983

理论上，是的，你可以让 Socket.io 通过相应的 ws url 连接到你的 websocket 服务器。

在实践中，我尝试过并且遇到了一些问题，因此可能需要您调整 Socket.io 才能使其正常工作。当然，我在 2.0.1 或类似版本上尝试过，所以它目前可能没有问题。

# html - 开发者日志 - 最佳实践

> ID：13042131
> 
> 赞同：0
> 
> 时间：2012-10-24T02:22:52.003
> 
> 标签：html

快速提问：我已经看到有一个开发日志，这可能是纸张、应用程序、在线工具等。我正在寻找的是一个 Mac 应用程序或我可以写的在线应用程序，它有多个有助于帮助的日记我要保持井井有条，不要丢失我的想法或刚刚阅读的想法。

感谢您的想法或最适合您的方法。

抢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T02:29:59.590

试试印象笔记。我也尝试过使用 TiddlyWiki。Evernote 和 Skitch 的组合效果很好。

# java - 嵌套类有什么用？

> ID：13042133
> 
> 赞同：3
> 
> 时间：2012-10-24T02:23:10.700
> 
> 标签：java

嵌套类的目的是什么？有什么例子吗？
我真的不认为需要他们。为什么不直接创建一个新类？使用嵌套类时，它看起来真的很杂乱无章。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T02:26:54.873

[为什么使用嵌套类？](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)

使用嵌套类有几个令人信服的理由，其中包括：

*   这是一种对仅在一个地方使用的类进行逻辑分组的方法。
*   它增加了封装。
*   嵌套类可以产生更易读和可维护的代码。

类的逻辑分组——如果一个类只对另一个类有用，那么将它嵌入该类并将两者放在一起是合乎逻辑的。嵌套这样的“帮助类”使它们的包更加精简。

增加封装——考虑两个顶级类，A 和 B，其中 B 需要访问 A 的成员，否则这些成员将被声明为私有。通过将类 B 隐藏在类 A 中，可以将 A 的成员声明为私有的，并且 B 可以访问它们。此外，B 本身可以对外界隐藏。

更具可读性、可维护性的代码——在顶级类中嵌套小类可以使代码更接近使用它的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T02:26:26.697

1.  这是一种对仅在一个地方使用的类进行逻辑分组的方法。
2.  它增加了封装。
3.  嵌套类可以产生更易读和可维护的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T02:26:45.173

嵌套类的用途：

*   消除命名空间污染
*   提供对外部类的私有成员的嵌套类访问
*   将相关代码整理在一起
*   对外界隐藏接口的实现

可能还有其他用途，但是这些，在我的脑海中，应该足以表明实际上可能对它们有用。

# c++ - 如何使用 oci 或任何其他库以 sys 帐户登录 oracle

> ID：13042136
> 
> 赞同：0
> 
> 时间：2012-10-24T02:24:11.477
> 
> 标签：c++, c, oracle, oracle-call-interface, sys

我正在尝试制作一个工具来帮助在安装 oracle 数据库后创建用户和 imp 数据库。因为我的同事通过键入命令来部署新数据库太困难了。然后我尝试使用oci登录oracle sys帐户，但oci重播错误“ORA-12154：TNS：无法解析指定的连接标识符”，但正常帐户是可以的。请告诉我如何以sys身份连接oracle。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:49:18.830

Oracle 安装仅在部署期间发生一次。导入数据库转储也是如此。为什么要编写一个单独的应用程序来导入/导出数据库转储？

系统帐户未从 tnsnames.ora 解析，因此出现错误。

你可以：

1.  创建具有足够权限的普通用户，例如

**[oracle@App ~]$ sqlplus "/ as sysdba"**

**CREATE USER user1 IDENTIFIED BY userpass DEFAULT TABLESPACE USERS TEMPORARY TABLESPACE TEMP;**

**授予创建会话、资源、创建视图、创建物化视图、创建用户 1 的同义词；**

1.  为导入和导出脚本提供必要的 SQL 语句。

# javascript - 轮播 - Twitter BootStrap；隐藏上一个或下一个按钮

> ID：13042143
> 
> 赞同：2
> 
> 时间：2012-10-24T02:25:28.340
> 
> 标签：javascript, backbone.js, twitter-bootstrap

我正在尝试在我的项目中实现 Carousel .. 一切正常，除了根据规格，我必须隐藏上一个按钮，如果我在第一张幻灯片上......并隐藏下一个按钮，如果我我在最后一张幻灯片上。有没有办法处理这个问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T05:01:27.263

您是否尝试过通过删除“carousel-control left/right”类来删除轮播控件。

```
<a class="carousel-control left" href="#myCarousel" data-slide="prev"> < </a>
<a class="carousel-control right" href="#myCarousel" data-slide="next"> > </a> 
```

*   您可以从没有“先前”控制开始
*   捕获**滑动/滑动事件**以确定第一张图像何时完成，然后添加回“上一个”控件
*   继续捕获滑动/滑动事件，沿途增加一个计数器。当您的计数器等于您的图像列表时，您可以删除“下一个”控件

# c++ - 双缓冲区与双数组c ++

> ID：13042145
> 
> 赞同：0
> 
> 时间：2012-10-24T02:25:55.997
> 
> 标签：c++, buffer, multidimensional-array

我被要求创建一个包含 5 行和未知列的矩阵。我的老板希望我使用一维缓冲区。由 5 行缓冲区连接。我不明白这是什么意思，请有人给我一个简单的例子！

有了数组我可以做

```
double[][] arr = new double[5][someNumber]; 
```

但他说，那么规模将受到限制。

所以我不知道他使用双缓冲区是什么意思，我不是很好@C++

非常感谢，举个例子就好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T02:28:05.423

对于`R`行和`C`列声明`double arr[R * C]`，并且`arr[i * C + j]`是单元格处的元素`[i, j]`。

这可以推广到任意维度。

展平这样的数组可能是一个非常有用的优化，尤其是当您使用动态数组时`std::vector`，您可以获得一个动态数组，而不是每行一个动态数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T02:29:02.013

听起来你在说

```
double *arr[5];
for(unsigned int x = 0; x < 5; ++x)
{
       arr[x] = new double[someNumber];
} 
```

因为，您肯定知道您有 5 个，而我的假设是未知部分，这就是您所指的方式。

# memory - IIS7“没有足够的存储空间来处理此命令”HTTPHandler 中的间歇性错误

> ID：13042150
> 
> 赞同：0
> 
> 时间：2012-10-24T02:26:06.483
> 
> 标签：memory, iis-7

所以，我有一个网站通过 HTTP 处理程序提供视频，这是我们的安全层。一些客户报告说这些视频不能间歇性地工作。我终于能够重现该问题，并且我们的日志编码报告成功验证了用户，然后是：

```
Response.WriteFile(filename); // Where this is the path to a video of about 32 MB 
```

抛出上述异常。我通过使用 Fiddler 查看请求和响应发现了实际错误。但是服务器有 2 GB 的可用内存，并且视频在一个小时左右后重新开始播放（这可能相当于使用服务器的人减少了，但它没有任何改变）。我们在这台机器上运行两个网站，另一个从来没有这样的问题，但它也没有使用这样的层，其中 .NET 代码负责编写文件。我没有看到任何允许我更改可用内存的设置，谷歌也没有抛出任何有用的东西。任何建议表示赞赏。

我应该补充一点，我停止并启动，然后重新启动我的网站，过去通过这样做可以在短期内解决问题。这没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T18:04:44.980

我只是在尝试`Response.WriteFile`使用 ~170 MB pdf 时遇到了这个问题。

就我而言，使用[`Response.TransmitFile`](http://msdn.microsoft.com/en-us/library/12s31dhy%28v=vs.100%29.aspx)代替有效；（也许）因为它

> 将指定文件直接写入 HTTP 响应输出流， **而不将其缓冲在内存中**。

# ruby-on-rails - 更改 Rails 应用程序名称的最简单快捷的方法是什么？

> ID：13042153
> 
> 赞同：0
> 
> 时间：2012-10-24T02:26:33.640
> 
> 标签：ruby-on-rails

起初我认为这就像更改应用程序文件夹的名称一样简单。但后来我意识到这样的事情：

**应用程序.rb：**

```
module NameOfMyApp
  class Application < Rails::Application
    # Settings in config/environments/* take precedence over those specified here.
(etc...) 
```

所以现在我担心如果我开始在文件中更改我的应用程序的名称，就会出现问题。

更改 Rails 应用程序名称最简单、最快捷的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T02:39:51.147

好吧，我会手动完成，不知道您还能如何实现它。以下是您需要更改名称的所有文件的列表：

*   config/application.rb（第 12 行）
*   config/environment.rb（第 5 行）
*   config/environments/development.rb（第 1 行）
*   config/environments/production.rb（第 1 行）
*   config/environments/test.rb（第 1 行）
*   config/initializers/secret_token.rb（第 7 行）
*   config/initializers/session_store.rb（第 3 行和第 8 行）
*   config/routes.rb（第 1 行）
*   配置.ru
*   耙文件

注意：上面的行数是新生成的应用程序，如果您更改了任何这些文件的内容，它们可能会有所不同。

# linux - 带有 Wget 的 Shell 脚本 - 如果嵌套在 for 循环中

> ID：13042156
> 
> 赞同：5
> 
> 时间：2012-10-24T02:26:39.210
> 
> 标签：linux, bash, shell, wget

我正在尝试制作一个 shell 脚本来读取下载 URL 列表以查找它们是否仍然处于活动状态。我不确定我当前的脚本有什么问题，（我是新手），任何指针都会有很大的帮助！

user@pc:~/test# cat sites.list

```
http://www.google.com/images/srpr/logo3w.png
http://www.google.com/doesnt.exist
notasite 
```

脚本：

```
#!/bin/bash
for i in `cat sites.list`
do
wget --spider $i -b
if grep --quiet "200 OK" wget-log; then
echo $i >> ok.txt
else
echo $i >> notok.txt
fi
rm wget-log
done 
```

照原样，脚本将所有内容输出到 notok.txt - （第一个 google 站点应该转到 ok.t​​xt）。但是如果我运行：

```
wget --spider http://www.google.com/images/srpr/logo3w.png -b 
```

然后做：

```
grep "200 OK" wget-log 
```

它greps字符串没有任何问题。我在语法上犯了什么菜鸟错误？谢谢m8s！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T02:47:52.070

-b 选项将 wget 发送到后台，因此您在 wget 完成之前执行 grep。

尝试不使用 -b 选项：

```
if wget --spider $i 2>&1 | grep --quiet "200 OK" ; then 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T03:03:16.107

你正在做的事情有一些问题。

*   您`for i in`将遇到包含空格的行的问题。更好地用于`while read`读取文件的各个行。
*   你没有引用你的变量。如果文件中的一行（或一行中的单词）以连字符开头怎么办？然后 wget 会将其解释为一个选项。您在这里有潜在的安全风险以及错误。
*   创建和删除文件并不是真正必要的。如果您所做的只是检查 URL 是否可访问，则无需临时文件和额外代码即可删除它们。
*   wget 不一定是最好的工具。我建议`curl`改用。

所以这里有一个更好的方法来处理这个......

```
#!/bin/bash

sitelist="sites.list"
curl="/usr/bin/curl"

# Some errors, for good measure...
if [[ ! -f "$sitelist" ]]; then
  echo "ERROR: Sitelist is missing." >&2
  exit 1
elif [[ ! -s "$sitelist" ]]; then
  echo "ERROR: Sitelist is empty." >&2
  exit 1
elif [[ ! -x "$curl" ]]; then
  echo "ERROR: I can't work under these conditions." >&2
  exit 1
fi

# Allow more advanced pattern matching (for case..esac below)
shopt -s globstar

while read url; do

  # remove comments
  url=${url%%#*}

  # skip empty lines
  if [[ -z "$url" ]]; then
    continue
  fi

  # Handle just ftp, http and https.
  # We could do full URL pattern matching, but meh.
  case "$url" in
    @(f|ht)tp?(s)://*)
      # Get just the numeric HTTP response code
      http_code=$($curl -sL -w '%{http_code}' "$url" -o /dev/null)
      case "$http_code" in
        200|226)
          # You'll get a 226 in ${http_code} from a valid FTP URL.
          # If all you really care about is that the response is in the 200's,
          # you could match against "2??" instead.
          echo "$url" >> ok.txt
          ;;
        *)
          # You might want different handling for redirects (301/302).
          echo "$url" >> notok.txt
          ;;
      esac
      ;;
    *)
      # If we're here, we didn't get a URL we could read.
      echo "WARNING: invalid url: $url" >&2
      ;;
  esac

done < "$sitelist" 
```

这是未经测试的。仅用于教育目的。可能含有坚果。

# html - 你如何保持页面之间的缩放一致？通过 CSS？

> ID：13042157
> 
> 赞同：3
> 
> 时间：2012-10-24T02:26:41.660
> 
> 标签：html, css, zooming

我是 CSS/HTML 的新手，找不到这个问题的答案可能是因为我没有使用正确的术语。

我设置了单独的页面，但不知道如何在我的页面之间保持“用户缩放”一致。

例如：-
用户在 home.html 上。用户缩放 3 倍（控制 + '+'）。字体要大得多。
-用户导航到 about.html。字体和布局恢复到较小的默认大小。

是否有 CSS/HTML/Javascript 属性来保持页面一致？非常感谢！

**编辑**：对于较新的 HTML 编码器，当您在本地计算机上运行代码时，单击指向另一个页面的链接将“重置”所有缩放 [IE 和 Chrome 测试]。但是，显然，当您从服务器运行它时，浏览器会记住特定的缩放比例，您不必担心它。希望这对至少一个人有所帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T02:34:12.300

由于缩放级别由浏览器本身控制，因此无法使用 CSS/HTML/JS 调整其在每个页面上的行为方式。

一种解决方法是使用 JS 和 CSS 转换属性创建自定义缩放按钮。然后，您希望将缩放级别保存到 cookie 并将当前保存的缩放级别应用于用户加载的每个页面。

# c# - 有没有一种简单的方法可以通过名称（来自文本文件）来处理应用程序的变量？

> ID：13042164
> 
> 赞同：2
> 
> 时间：2012-10-24T02:27:50.600
> 
> 标签：c#, .net, pseudocode

我可以以某种方式使用具有以下内容的文本文件：

```
<comment> This is something like an XML file.
<action var="myInteger"> +50
<condition> stringVar == "sometext" <action var="boolVar"> = true 
```

..解析它并让我的应用程序执行一些操作？

这个想法是制作一个用户友好的（示例不计算在内）伪代码，可以更改应用程序的变量和运行方法。问题是我不知道如何通过名称更改变量。

为每个变量名称单独设置一个案例（明确支持它们）将是相当疯狂的：

```
switch(varName)
{
    case "var1": {/* things */ break;}
    case "var2": {/* things */ break;}
    /* ... */
    case "var9999": {/* things */ break;}
} 
```

**编辑：**我想我最初问错了问题。（*还有一种简单的方法可以通过从文本文件中执行代码来处理应用程序的变量吗？*）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T02:34:15.113

回答你的问题：是的。

现在你已经编辑了你的问题......

您需要解析 XML，最好使用 .NET 附带的库。然后，您遍历 XML 树，执行每个与它相关联的操作的节点。

您可能不想直接公开应用程序的变量。相反，您应该定义一些可由 XML 文件操作的执行状态。例如，您可以拥有一个变量字典及其值。然后当你得到一个`<action>`标签时，你查看`var`属性，在字典中查找变量，然后将值更改为标签指定的任何内容。

这不是一项简单的任务。编写语言解释器并不一定很难（本质上就是你正在做的事情）。但是设计你的语言以使其有意义可能很困难。您还会发现，如果您有嵌入的表达式（您看起来是这样），那么您将需要一个表达式解析器。同样，这些“容易”构建，但对于没有经验的人，你需要先做一些研究。如果你不了解现实世界的解析技术，你很容易最终构建出非常复杂、缓慢和损坏的东西。

对于表达式解析，请查看 LL(1) 解析器，特别是递归下降，这是最容易理解和实现的。

为了评估 XML 输入，您需要一个遍历树的递归算法。这将类似于您的递归下降解析器。事实上，除了细节之外，两者几乎相同。

一旦你开始做某事，你应该问一个关于特定问题的*实际问题，而不是问一个如此广泛的问题。*

另一个编辑：为您的变量使用字典。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T03:05:11.220

听起来像自定义配置部分会帮助你。看看[http://haacked.com/archive/2007/03/11/custom-configuration-sections-in-3-easy-steps.aspx](http://haacked.com/archive/2007/03/11/custom-configuration-sections-in-3-easy-steps.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T02:50:29.210

对于一个非常简单的情况，您有一组固定的关键字/语法来定义操作，我建议您只编写一个自定义解析器并使用反射来访问您所定位的字段/属性和自定义代码实际操作。您可以利用 Action<> 和 Fun<> 委托来隔离/重用代码实现以实现具有明确评估路径的操作。

但是，如果您正在研究更复杂的场景，那么我建议您开始研究 DSL。我在 DSL 方面的知识非常有限，所以我不能说太多，但肯定会涉及到相当多的学习曲线。像[meta#](http://metasharp.codeplex.com/)这样的东西可能是一个很好的起点，可以抽象出一些复杂性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T03:13:57.277

我认为这对应用程序脚本非常有用，但是将所有应用程序变量绑定到脚本需要大量工作（更不用说学习一门新语言了）。

所以最好是使用 .NET 运行时编译功能，然后你的类 xml 文件应该是一个简单的 C# 文件，它将在运行时加载、编译和执行，更好的是你可以让它非常容易地引用你所有的应用程序变量。

# c# - C# 表单激活和停用事件

> ID：13042166
> 
> 赞同：2
> 
> 时间：2012-10-24T02:28:08.560
> 
> 标签：c#, winforms, events

我有两种形式，mainForm 和 subForm。当 mainForm 失去焦点时，我希望 subForm 消失，然后在 mainForm 重新获得焦点时重新出现。我使用 mainForm 上的 Activated 和 Deactivate 事件来跟踪 mainForm 是否有焦点。当 Activated 被触发时，我执行 subForm.Show() 和相反的 Deactivate。我遇到的问题是，当 subForm 获得焦点时 mainForm 消失，因为我不知道如何以编程方式说“当 mainForm 的 Deactivate 事件触发时使 subForm 消失，除非是因为 subForm 获得了焦点。我在做什么就是在mainForm因为用户点击另一个应用或者使用ALT+TAB切换而失去焦点时让两个窗口都消失。我不想把subForm丢在后面。

```
class MainForm : Form
{
    SubForm subForm = new SubForm();

    private void mainForm_Activated(object sender, EventArgs e)
    {
        this.subForm.Show();
    }

    private void mainForm_Deactivate(object sender, EventArgs e)
    {
        this.subForm.Hide()

        // I need some logic to make sure that it is only hidden
        // when the mainForm loses focus because the user clicked
        // some other application in the taskbar and not when the
        // subForm itself gains the focus.
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:32:18.067

这[适用于我的机器](http://www.codinghorror.com/blog/2007/03/the-works-on-my-machine-certification-program.html)。

```
public partial class Form1 : Form {
    public Form1() {
        InitializeComponent();
    }

    private Form2 _form2;
    private void Form1_Load(object sender, EventArgs e) {
        _form2 = new Form2();
        _form2.Show();
        HandleFocusEvents();
    }

    private void HandleFocusEvents() {
        this.LostFocus += Form_LostFocus;
        _form2.LostFocus += Form_LostFocus;
        this.GotFocus += Form_GotFocus;
    }

    private void Form_LostFocus(object sender, EventArgs e) {
        if (!_form2.ContainsFocus && !this.ContainsFocus) {
            _form2.Hide();
        }
    }

    private void Form_GotFocus(object sender, EventArgs e) {
        if (!_form2.Visible) {
            _form2.Show();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T03:02:41.367

在您创建子表单的新实例的主表单代码中，添加一个在激活子表单的实例时触发的事件。在它的事件处理程序中，将 bool 变量设置为 true。现在，对子表单实例的停用事件执行相同操作，但将 bool 变量设置为 false。现在，如果主窗体失去焦点，在隐藏它之前检查该 bool 变量并确保它为假“子窗体没有焦点”，然后才隐藏主窗体。如果我能看到你到目前为止所拥有的，我可以提供代码。有很多不同的方法可以做到这一点。希望这对你有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T03:03:36.713

如果我理解正确的话，这听起来就像一个普通的 MDI 应用程序。您可以将主窗体设置为 MDI 父窗体并将子窗体 MDI 父窗体设置为主窗体吗？您正在谈论的大多数这些激活内容应该自动处理吗？或者最多只是捕获子窗体中的最小化事件，然后也最小化 mdi 父窗体

# jquery - 移动 Safari 中的 scrollTop 不起作用

> ID：13042172
> 
> 赞同：15
> 
> 时间：2012-10-24T02:28:51.593
> 
> 标签：jquery, mobile-safari, scrolltop

我花了最后一个小时阅读了关于缩放和`.scrollTop()`处理变化的众多问题，并尝试了至少 20 种不同的东西——所有东西看起来甚至对我的情况都是远程可行的，但我仍然只有部分解决方案。

我有一个包含三个字段和一个继续按钮的表单。继续按钮打开表单的其余部分。当您选择文本字段时，Safari 移动版会放大。我特别不介意。如果我阻止缩放，那么它可能太小而无法读取字段，如果我以可读的缩放级别加载，那么您只能看到页面的一部分，因此放大行为是可以的。

情况是，在单击按钮并显示另一半表单后，窗口仍在放大，您正在查看页面的随机补丁。

根据我的设想，可能有两种处理方式：
1）单击按钮后实际缩小
2）滚动到表单下一部分显示的位置

我尝试了所有我能找到的缩小和处理标签`viewport content width`的`meta`方法，但它并没有为我处理它，因为它只是使视口变大或变小，实际上根本没有缩小。这可能适用于其他人，但不适用于我，因为我已经有了很多样式，这可能使这不是一个选择。

我已经解决了滚动解决方案并且`.scrollLeft()`工作正常，但`.scrollTop()`无论我给它什么选择器都不会工作。我试过了：

```
$('body').scrollTop
$('html').scrollTop
$('document').scrollTop
$('body,html,document').scrollTop
$('html:not(:animated),body:not(:animated)').scrollTop
$('html:not(:animated),body:not(:animated),document:not(:animated)').scrollTop
$('#content').scrollTop // that's a wrapper div
$(window).scrollTop 
```

有人知道如何`.scrollTop()`在 Safari Mobile 中工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-21T17:35:29.843

我认为您试图以错误的方式解决问题。只需确保您的表单字段`font-size: 16px`位于移动视口上，这样 Safari 就不会放大。

如果您`position: fixed`的容器上有 scrollTop ，也可能无法正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-27T17:37:06.857

您是否尝试使用锚点？

它们应该在任何地方都可以工作，因为它们是浏览器的本机功能。

带有此代码的原始帖子[在这里](http://www.learningjquery.com/2007/10/improved-animated-scrolling-script-for-same-page-links)

```
$(function() {
  $('a[href*="#"]:not([href="#"])').on('click', function() {
    if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
      var target = $(this.hash);
      target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
      if (target.length) {
        $('html, body').animate({
          scrollTop: target.offset().top
        }, 1000);
        return false;
      }
    }
  });
}); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-19T11:36:05.107

无需使用 jquery 来执行此操作：

```
window.scrollTo(0, 0); 
```

您还可以使用元标记防止一起缩放：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" /> 
```

您可能只想在遇到问题的页面上执行此操作？

# javascript - javascript中的3d数组

> ID：13042175
> 
> 赞同：2
> 
> 时间：2012-10-24T02:29:04.177
> 
> 标签：javascript, html, arrays

我正在尝试在 javascript 中创建一个 3d 数组，但它不起作用。有人可以帮我实现这一目标吗？到目前为止，这是我的代码......随意玩弄我的 jsfiddle [http://jsfiddle.net/annhW/1/](http://jsfiddle.net/annhW/1/)

```
var myArray = new Array(4);

for (var i = 0; i < 4; i++) {
    myArray[i] = new Array(3);
    for (var j = 0; j < 3; j++) {
        myArray[j] = new Array(6);
        for (var k = 0; k < 6; k++) {
        myArray[i][j][k] = 'a';
    }
}
}

document.write(myArray[1][2][1]); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T02:31:40.930

我不知道“它不工作”的确切含义，但是您的代码确实存在问题，因为您正在重新分配`myArray`元素。这是一个改进：

```
var myArray = new Array(4);

for (var i = 0; i < 4; i++) {
    myArray[i] = new Array(3);
    for (var j = 0; j < 3; j++) {
        myArray[i][j] = new Array(6); // <-- note new subscript
        for (var k = 0; k < 6; k++) {
        myArray[i][j][k] = 'a';
    }
}
}

document.write(myArray[1][2][1]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T02:31:24.377

你的问题是这一行：

```
myArray[j] = new Array(6); 
```

应该

```
myArray[i][j] = new Array(6); 
```

如果您使用 javascript 控制台（firefox 中的 firebug 或 chrome / safari 中的检查器），它将抛出错误并显示代码中存在此类问题的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T02:34:54.363

在进行第二次分配时，您缺少`i`下标。通过这样做`myArray[j]`，您将覆盖外部添加的内容，有效地仍然在第一维中分配元素。添加第二个维度 -

`myArray[i][j] = new Array(6);`

# r - 通过 R 中的唯一值进行更有效的循环

> ID：13042176
> 
> 赞同：2
> 
> 时间：2012-10-24T02:29:11.167
> 
> 标签：r, function, loops, simplification

我对 R 及其所有智慧相对较新，我正在努力提高我的脚本效率。我正在使用循环来模拟动物如何在不同地点之间移动。我遇到的问题是，当我增加站点数量或更改初始参数（基于移动或停留在同一站点的固定概率）时，我会以一个非常复杂的循环结束。如果我必须使用不同的参数运行多个不同的模拟，我更喜欢可以适应不同情况的更有效的循环或函数。第一个循环将根据初始概率填充矩阵，第二个循环将累积概率矩阵与值列表中的随机数（本例中为 10）进行比较，并决定该个体的命运（留下或离开到新网站）

这是我的代码的简化：

```
N<-4 # number of sites
sites<-LETTERS[seq(from=1,to=N)]

p.stay<-0.45
p.move<-0.4

move<-matrix(c(0),nrow=N,ncol=N,dimnames=list(c(sites),c(sites)))
from<-array(0,c(N,N),dimnames=list(c(sites),c(sites)))
to<-array(0,c(N,N),dimnames=list(c(sites),c(sites))) 
```

# 以固定概率填充矩阵#

```
for(from in 1:N){
  for(to in 1:N){
     if(from==to){move[from,to]<-p.stay} else {move[from,to]<-p.move/(N-1)}
     }
 }

move
cumsum.move<-cumsum(data.frame(move))

steps<-100
result<-as.character("") # for storing results
rand<-sample(random,steps,replace=TRUE) 
time.step<-data.frame(rand)
colnames(time.step)<-c("time.step")
time.step$event<-""
to.r<-(rbind(sites))
j<-sample(1:N,1,replace=T) # first column to select (random number)
k<-sample(1:N,1,replace=T) # site selected after leaving and coming back 
```

# 较长循环的开始#

```
for(i in 1:steps){
   if (time.step$time.step[i]<cumsum.move[1,j]){time.step$event[i]<-to.r[1]} else 
     if (time.step$time.step[i]<cumsum.move[2,j]){time.step$event[i]<-to.r[2]} else
        if (time.step$time.step[i]<cumsum.move[3,j]){time.step$event[i]<-to.r[3]} else
           if (time.step$time.step[i]<cumsum.move[4,j]){time.step$event[i]<-to.r[4]} else
              if (time.step$time.step[i]<(0.95)){time.step$event[i]<-NA} else
                 if (time.step$time.step[i]<1.0) break # break the loop             

 result[i]<-time.step$event[i]
 j<-which(to.r==result[i])
 if(length(j)==0){j<-k} # for individuals the leave and come back later

 }

 time.step

 result 
```

这个循环是一个更大的循环的一部分，它将在一系列模拟之后模拟和存储结果。任何关于如何提高此循环效率的想法或评论，以便我可以轻松地修改站点数量或更改初始概率参数，而无需重复或不必对循环进行重大编辑，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T04:30:19.140

我不确定我是否抓住了代码的精髓，但这比 for 循环快。一旦我们开始超过几千步，这就会开始具有优势。我将“随机”替换为均匀分布的样本 ( `runif()`)

```
system.time(
time.step$event <- sapply(
  time.step$time.step, 
  function(x) rownames(
    cumsum.move[which(cumsum.move[,j] > x),])[[1]]
  )
) 
```

这是我在 10,000 步时的结果。我正在使用笔记本电脑，因此使用 for 循环的 100,000 没有在 1 分钟内计算，但 sapply 在 14 秒内完成了。

```
> system.time(
+ time.step$event <- sapply(
+ time.step$time.step,
+ function(x) rownames(
+ cumsum.move[which(cumsum.move[,j] > x),])[[1]]
+ )
+ )
   user  system elapsed 
  1.384   0.000   1.387 
> head(time.step)
  time.step event
1 0.2787642     C
2 0.3098240     C
3 0.9079045     D
4 0.9904031     D
5 0.3754330     C
6 0.6984415     C
> system.time(
+ for(i in 1:steps){
+ if (time.step$time.step[i]<cumsum.move[1,j]){time.step$event[i]<-to.r[1]} else
+ if (time.step$time.step[i]<cumsum.move[2,j]){time.step$event[i]<-to.r[2]} else
+ if (time.step$time.step[i]<cumsum.move[3,j]){time.step$event[i]<-to.r[3]} else
+ if (time.step$time.step[i]<cumsum.move[4,j]){time.step$event[i]<-to.r[4]}
+ result[i]<-time.step$event[i]
+ }
+ )
   user  system elapsed 
  3.137   0.000   3.143 
> head(time.step)
  time.step event
1 0.2787642     C
2 0.3098240     C
3 0.9079045     D
4 0.9904031     D
5 0.3754330     C
6 0.6984415     C 
```

# objective-c - 如何通过GPUImage滤镜去除光影

> ID：13042181
> 
> 赞同：1
> 
> 时间：2012-10-24T02:30:03.963
> 
> 标签：objective-c, ios, gpuimage

我想将从相机拍摄的图像转换为黑白并打印。此图像只是从文档或纸张中获取的。所以我使用以下代码：

```
{

GPUImagePicture *stillImageSource = [[GPUImagePicture alloc] initWithImage:  srcImg ];            

GPUImageAdaptiveThresholdFilter *stillImageFilter = [[GPUImageAdaptiveThresholdFilter alloc] init];
stillImageFilter.blurSize = 1;

[stillImageSource addTarget:stillImageFilter];
[stillImageSource processImage];

UIImage *outputImg = [stillImageFilter imageFromCurrentlyProcessedOutput];
[stillImageSource release];
[stillImageFilter release];

} 
```

但是输出图像有很多锯齿，因为图像是完全二值化的，它只需要部分二值化。所以我先将源图像转换为灰度然后给出最大对比度，图像看起来很好，但光影无法去除。任何想法，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T21:05:38.363

尝试在 GPUImageAdaptiveThresholdFilter 之后应用 GPUImageLuminanceThresholdFilter，并使用“blurSize”属性

```
-(UIImage *)doBinarize:(UIImage *)sourceImage
{

 GPUImagePicture *imageSource = sourceImage;

    GPUImageAdaptiveThresholdFilter *stillImageFilter = [[GPUImageAdaptiveThresholdFilter alloc] init];
    stillImageFilter.blurRadiusInPixels = 8.0;//play with it

    GPUImageLuminanceThresholdFilter *stillImageFilter2 = [[GPUImageLuminanceThresholdFilter alloc] init];
    stillImageFilter2.threshold = 0.5f;//
    [stillImageFilter addFilter:stillImageFilter2];

    [stillImageFilter prepareForImageCapture];

    [imageSource addTarget:stillImageFilter];

    [imageSource processImage];

    UIImage *retImage = [stillImageFilter imageFromCurrentlyProcessedOutput];

    [imageSource removeAllTargets];

    return retImage;
} 
```

# ruby - think_sphinx 搜索中的 2 个字段

> ID：13042182
> 
> 赞同：0
> 
> 时间：2012-10-24T02:30:29.470
> 
> 标签：ruby, ruby-on-rails-3, sphinx, thinking-sphinx

我有两个字段要传递给thinking_sphinx，一个是下拉列表，另一个是自由文本。

```
<%= select :search, params[:search], Category.joins(:posts).select('distinct           categories.*').collect {|category| [ category.categoryname,category.categoryname ]}, :include_blank => 'Select a category...' %>

<%= text_field_tag :resume, params[:resume] %> 
```

它只使用下拉菜单，但我的语法似乎是错误的让第二个工作。

```
 @posts = Post.search :conditions=>{:search=>params[:search]},{:resume=>params[:resume]} 
```

我得到：3：语法错误，意外'\ n'，期待 tASSOC

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:06:25.723

“条件”需要是一个哈希，你有两个哈希。试试这个：

```
@posts = Post.search(:conditions => {:search => params[:search], :resume => params[:resume]}) 
```

# android - 使用 SherlockFragmentActivity 和 ListFragments 时如何调用 notifydatasetchanged

> ID：13042187
> 
> 赞同：1
> 
> 时间：2012-10-24T02:30:52.227
> 
> 标签：android, tabs, android-listview, actionbarsherlock

我有一个 Sherlock Tab Navigation 实现为以下两个类。课堂`Dashboard`是主要活动。类`DashboardContacts`代表选项卡的片段之一。

我正在加载在一段时间内加载的 HTTP 数据，当它加载时，我需要列表视图`DashboardContacts`以反映从服务器引入的更改并刷新`ListView`从空白到填充的列表。为此，我`notifyDataSetChanged`通过中的刷新方法调用方法`DashboardContacts`，但在`ListView`更改选项卡之前不会发生任何更改。

```
public class Dashboard extends SherlockFragmentActivity {

    private DashboardContacts contactsTab=new DashboardContacts();
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.dashboard);

        getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        ActionBar.Tab tab = getSupportActionBar().newTab();
        tab.setText(getResources().getStringArray(R.array.dashboardTabs)[0]);
        tab.setTabListener(new DashboardHome());
        getSupportActionBar().addTab(tab);

        ActionBar.Tab tab2 = getSupportActionBar().newTab();
        tab2.setText(getResources().getStringArray(R.array.dashboardTabs)[1]);
        tab2.setTabListener(contactsTab);
        getSupportActionBar().addTab(tab2);

        //CALLS ASYNCLOADER HERE TO LOAD HTTP DATA
    }

    private void httpSuccessMethod() {
        //Does some work and then calls:
        contactsTab.refresh(datasource.getAllContacts());

    } 
```

这是 DashboardContacts 类布局：

```
public class DashboardContacts extends SherlockListFragment  implements ActionBar.TabListener{

    private UserListAdapter listAdapter;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
        listAdapter=new UserListAdapter(container.getContext(), ApplicationState.getInstance(container.getContext()).getUserCache());
        setListAdapter(listAdapter);
        return super.onCreateView(inflater, container, savedInstanceState);
    }

    @Override
    public void onStart() {
        super.onStart(); 
    }

    @Override
    public void onTabSelected(Tab tab,android.support.v4.app.FragmentTransaction ft) {
        ft.replace(android.R.id.content, this,"contacts");
        ft.attach(this);
    }

    @Override
    public void onTabUnselected(Tab tab,android.support.v4.app.FragmentTransaction ft) {
        ft.detach(this);

    }

    @Override
    public void onTabReselected(Tab tab,android.support.v4.app.FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }

        public void refresh(List<User> list) {
        if(this.listAdapter != null) {
        this.listAdapter.setList(list);
        this.listAdapter.notifyDataSetChanged();
    }
} 
```

自定义列表适配器中的刷新方法看起来像，所以我实际上也在更改那里的数据：

```
public void refresh(List<User> list) {
    if(this.listAdapter != null) {
        this.listAdapter.setList(list);
        this.listAdapter.notifyDataSetChanged();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T14:43:05.367

我认为这是我没有实现的东西，所以我现在做了并解决了这个问题：

```
public void setList(List<ExpensePool> list) {
    clear();
    addAll(list);
    notifyDataSetChanged();
} 
```

# php - Android从PHP传递和接收参数

> ID：13042190
> 
> 赞同：1
> 
> 时间：2012-10-24T02:31:10.257
> 
> 标签：php, android, android-intent, phpquery

如何将参数从一个活动传递到 php 端并由另一个活动接收？在 php 方面，我会进行查询，所以我的查询取决于从一个活动传递的参数，而另一个活动将显示该查询的结果。感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T03:51:52.310

1> 如何将参数android app 传递给php 站点。1> 创建一个json解析器类JSONParser.java

```
public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

public JSONObject getJSONFromUrl(String url, List<NameValuePair> params) {

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();     

         String paramString = URLEncodedUtils.format(params, "utf-8");          
         url += "?" + paramString;          
         HttpGet httpGet = new HttpGet(url);            
        HttpResponse httpResponse = httpClient.execute(httpGet);            
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();

    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);            
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

} 
```

2> 在 php UserFunctions.java 上为 pass 或 receiver 参数创建一个用户函数类。在此类中，一个函数用于从 php 站点获取数据，另一个函数用于将 android 应用程序传递给 php

```
public class UserFunctions {

private JSONParser jsonParser;

 private static String api_URL = "http://10.0.2.2/carcab_api/";

private static String login_tag = "log_in";
private static String get_user_detail_tag = "userdetail";

// constructor
public UserFunctions() {
    jsonParser = new JSONParser();
}

/**
 * function make Login Request
 * 
 * @param email
 * @param password
 * */
public JSONObject loginUser(String usr_nm, String password) {
    // Building Parameters
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", login_tag));
    params.add(new BasicNameValuePair("usr_nm", usr_nm));
    params.add(new BasicNameValuePair("password", password));
    JSONObject json = jsonParser.getJSONFromUrl(api_URL, params);
    // Log.e("JSON", json.toString());
    return json;
}

/**
 * function make get User Detail  Request
 * 
 * @param email
 * @param password
 * */

public JSONObject get_user_detail(String user_id) {
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", get_user_detail_tag));
    params.add(new BasicNameValuePair("user_id", user_id));
    JSONObject json1 = jsonParser.getJSONFromUrl(api_URL, params);
    System.out.println(params);
    Log.e("JSON1", json1.toString());
    return json1;

} 
```

}

3> 点击登录按钮，我将参数从 android 传递到 php。登录活动.java

```
public class LoginActivity extends Activity {
Button btnLogin;
EditText inputu_nm; 
EditText inputPassword;
TextView loginErrorMsg;
UserFunctions userFunction;
JSONObject json;

// JSON Response node names
private static String KEY_SUCCESS = "success";
private static String KEY_UID = "user_id";
private static String KEY_NAME = "user_name";
private static String KEY_UNM = "user_nm";
private static String KEY_OID = "off_id";
private ProgressDialog progressDialog;

private static String KEY_CREATED_AT = "created_at";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);

    // Importing all assets like buttons, text fields
    inputu_nm = (EditText) findViewById(R.id.u_nm);
    inputPassword = (EditText) findViewById(R.id.pass);     
    btnLogin = (Button) findViewById(R.id.btnlogin);
    loginErrorMsg = (TextView) findViewById(R.id.login_error);
    // Login button Click Event
    btnLogin.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {

            String u_nm = inputu_nm.getText().toString();
            String password = inputPassword.getText().toString();
            UserFunctions userFunction = new UserFunctions();               
            //pass user username and password to  android app to php
            JSONObject json = userFunction.loginUser(u_nm, password);

            // if json responce is success then user go to next home activity
            try {
                if (json.getString(KEY_SUCCESS) != null) {
                    loginErrorMsg.setText("");
                    String res = json.getString(KEY_SUCCESS);
                    if (Integer.parseInt(res) == 1) {   
                           Intent dashboard = new Intent(getApplicationContext(), HomeActivity.class);             
                           startActivity(dashboard);  

                    } else {
                        // Error in login
                        loginErrorMsg.setText("Incorrect Username Or Password");
                        inputu_nm.setText("");                          
                        inputPassword.setText("");
                    }
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }
        }
    });

} 
```

}

4> 现在我从 php 获取用户详细信息到另一个活动。当用户详细信息活动启动时，然后获取 user.userdetail.java 的所有详细信息

```
public class userdetailActivity extends Activity {

// JSON Response node names
private static String KEY_SUCCESS = "success";
private static String KEY_ERROR = "error";
private static String KEY_ERROR_MSG = "error_msg";
private static String KEY_SUCCESS_MSG = "success_msg";

JSONObject json_user;
UserFunctions userFunctions;
DatabaseHandler DBHandler;
String user_name = "";
String user_password = "";
String user_address = "";
String user_mobile = "";
String user_id;
TextView username, password, address, mobile;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.userdetail);
    userFunctions = new UserFunctions();
    username = (TextView) findViewById(R.id.username);
    password = (TextView) findViewById(R.id.password);
    address = (TextView) findViewById(R.id.address);
    mobile = (TextView) findViewById(R.id.mobile);
    // i am pass static value of user id now
    user_id = "1001";

    // i am pass user id and get user detail on my activity from php
    refresh_screen(user_id);

}

private void refresh_screen(String user_id) {
    JSONObject json = userFunctions.get_user_detail(user_id);
    jsonact = json;
    // check for positive response
    try {
        if (json.getString(KEY_SUCCESS) != null) {
            String res = json.getString(KEY_SUCCESS);
            if (Integer.parseInt(res) == 1) {
                json_user = json.getJSONObject("user");

                user_name = json_user.getString("username");
                user_password = json_user.getString("password");
                user_address = json_user.getString("address");
                user_mobile = json_user.getString("mobile");

                username.setText(user_name);
                password.setText(user_password);
                address.setText(user_address);
                mobile.setText(user_mobile);

            } else if (Integer.parseInt(res) == 0) {
                Toast.makeText(getApplicationContext(), "No detail Found",
                        Toast.LENGTH_LONG).show();
            }
        } else if (json.getString(KEY_ERROR) != null) {

            String res = json.getString(KEY_ERROR);
            if (Integer.parseInt(res) == 1) {
                Toast.makeText(getApplicationContext(), "No detail Found",
                        Toast.LENGTH_LONG).show();
            }

        }
    } catch (JSONException e) {
        e.printStackTrace();
        Toast.makeText(getApplicationContext(), "No detail Found",
                Toast.LENGTH_LONG).show();

    }
} 
```

}

# applescript - 如何访问 Applescript 中元素的容器？

> ID：13042194
> 
> 赞同：1
> 
> 时间：2012-10-24T02:31:29.283
> 
> 标签：applescript

我想做如下的事情：

```
container of (1st static text of rows of tables of ¬
  scroll areas of (1st window whose title contains ¬
  "motorola") whose value contains "16225")
--> row N of table N of scroll area N of … 
```

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:20:06.200

使用`value of attribute "AXParent"`. `attributes of`显示 UI 元素的其他属性。

```
tell application "System Events" to tell process "Finder"
    value of attribute "AXParent" of some UI element of window 1
end 
```

# jquery - 通过读取和过滤复杂的 html 字符串将自定义值附加到物理 DIV

> ID：13042197
> 
> 赞同：2
> 
> 时间：2012-10-24T02:31:43.630
> 
> 标签：jquery, html, dom

```
var s = '<h1>heading</h1><p>para</p>';
var $s = $(s).not('h1');
alert($s); 
```

这条消息只是说我“[object Object]”。其实我想得到 HTMLString 说

```
<p>para</p> 
```

然后我想将该 HTMLString 插入 DIV 标记。

```
$("#_Div_PreviewPane").html($s); 
```

_Div_PreviewPane 是 DIV 元素。

每一个建议都将不胜感激。

**更新**

请让我修改我的代码，实际上我的实际代码如下所示。

```
var s = 'aaa<br /> '+
'<br />'+
'<div class="_Individual_Product_">'+
'<table style="width: 385px; height: 105px;" cellspacing="0" cellpadding="0">'+
 '   <tbody>'+
 '       <tr>'+
 '           <td> <img class="RotatorImage" id="CMSEditor_thumbRotator_i1_smallImage"     style="width: 100px; height: 100px;" alt="Product image" src="http://localhost:59761/Images/Products/Accommodation2.jpg" /> </td>'+
 '           <td>'+
 '           <table style="width: 285px; height: 100%;" cellspacing="0" cellpadding="0">'+
 '               <tbody>'+
 '                   <tr>'+
 '                       <td>Field Accommodation Master 1</td>'+
 '                       <td> <select class="dynamicDropDownList"     id="ddl_FieldAccommodationMaster1">'+
 '                       <option value="1">Desc 1</option>'+
 '                       <option value="3">Desc 3</option>'+
 '                       <option value="2">Desc 2</option>'+
 '                       </select> </td>'+
 '                   </tr>'+
 '               </tbody>'+
 '           </table>'+
 '           </td>'+
 '       </tr>'+
'    </tbody>'+
'</table>'+
'</div>';
var $s = $(s).not('div._Individual_Product_');
alert($s);
alert($s.html());

$("#_Div_PreviewPane").html($s); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T03:23:31.283

您`alert($s)`返回一个空字符串，因为在您的代码中，如果您更改，jQuery 会忽略实际上没有父元素的非元素字符串 textNodes：

```
var s = 'aaa<br /> '+ 
```

至：

```
var s = '<p>aaa</p><br /> '+ 
```

然后你可以使用`not`方法和`text`方法返回`aaa`字符串。

[http://jsfiddle.net/XMkSk/](http://jsfiddle.net/XMkSk/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T03:32:40.440

您需要先将代码包装到某个对象中（这里我使用 a `div`），否则它不会将所有内容都转换为*一个*jQuery 对象。然后删除不需要的对象并返回内容`.html()`。

```
// Wrap and create Jquery element
var $s = $('<div>' + s + '</div>');
// Remove unwanted elements
$s.find('._Individual_Product_').remove();
// Return result
alert($s.html()); 
```

[演示](http://jsfiddle.net/GBWnE/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T02:37:46.140

尝试将代码修改为：

```
var s = '<h1>heading</h1><p>para</p>';
var $s = '<p>'+$(s).not('h1').html()+'</p>';
alert($s); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T02:41:11.083

尝试这个 ：

```
var s = '<h1>heading</h1><p>para</p>';
var $s = $(s).not('h1');
alert($s.html()); 
```

.html() 返回 html 字符串

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T02:36:46.683

您的代码很好，但要提醒文本使用

```
alert($s.text()); 
```

代替

```
alert($s); 
```

因为`$s`是一个jQuery `object`，如果你使用`console.log($s)`那么你可以看到 `<p>para</p>`。

[**例子**](http://jsfiddle.net/5CGyb/2/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T02:36:56.717

尝试这个：

```
<div id="mydiv"></div>
<script>
var s = '<h1>heading</h1><p>para</p>';
s = $(s).not('h1');
$('#mydiv').html(s);
</script> 
```

​ ​</p>

示例：http: [//jsfiddle.net/66WZY/1/](http://jsfiddle.net/66WZY/1/)

# javascript - 为什么使用 $ 符号

> ID：13042200
> 
> 赞同：1
> 
> 时间：2012-10-24T02:33:01.337
> 
> 标签：javascript

> **可能重复：**
> [jQuery中符号$的含义是什么？](https://stackoverflow.com/questions/1049112/what-is-the-meaning-of-symbol-in-jquery)

我想知道为什么在开头使用 $ 符号，例如在 jquery 每个函数中。这两个有什么区别。。

```
$('.container').each()
/..and
$.each() 
```

我一直在看类似这样的代码..?? `$`标志有什么作用？？

```
 $.myObj = function() {
    /..
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T02:34:55.783

`$`没有什么特别的；它只是 jQuery 使用的标识符。一个非常短的名称（而不是类似的名称）的优点`jQuery`是它不会过度增加脚本文件的下载大小。每个字节都很重要（尤其是在移动世界中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T02:37:23.097

您甚至可以创建自己的！虽然不一样，但这里有一个接受 ID 的。

```
var SUPER = function(id) {
    return document.getElementById(id);
};

SUPER('exampleID').focus(); 
```

现在我的 id 为“exampleID”的输入字段将被“聚焦”

**但是 $ 是 jQuery 对象的简写。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T02:38:29.570

在javascript中，函数可以通过调用来执行，但它们也是对象，可以包含属性。这些属性可以是数据，也可以是其他函数。

在 jQuery 中，`$`它只是一个函数，您可以像 in 一样将其作为函数调用，`$(".whatever")`也可以访问函数的属性。这些属性要么是函数本身，要么是在某些情况下是数据。 `$.each()`是一个函数，它是`$`函数对象的一个​​属性。

在 jQuery 中，它只是主要对象`$`的一个​​快捷方式（用于保存输入） 。`jQuery`

# ruby-on-rails - exception_notification gem 仅在 Heroku 生产模式下引发 ActionView::Template::Error (code converter not found (UTF-8 to UTF-16))

> ID：13042201
> 
> 赞同：19
> 
> 时间：2012-10-24T02:33:05.157
> 
> 标签：ruby-on-rails, heroku, exception-notification

我创建了部署在 Heroku 上的 rails 应用程序。此外，`exception_notification`gem 已启用。

当它在开发设置 ActionMailer 到 Gmail 时，一切都很好，并从 Gmail 地址发送通知。

但是在 Heroku 上的生产环境中，当服务器尝试发送电子邮件时出现以下错误。

`ActionView::Template::Error (code converter not found (UTF-8 to UTF-16))`

谁能告诉我这里发生了什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-25T08:48:43.757

该问题已在主存储库中提出（请参见[此处](https://github.com/smartinez87/exception_notification/issues/103)），但到目前为止尚未解决。

您可能想看看这个对 exception_notification gem 的分支，特别是这个尝试处理问题的提交： [https ://github.com/alanjds/exception_notification/commit/048fc6be972189e62ca3b9453d19233ec5773016](https://github.com/alanjds/exception_notification/commit/048fc6be972189e62ca3b9453d19233ec5773016)

为了使用这个叉子，我将 gem 指向它，如下所示：

宝石文件：

```
gem 'exception_notification', git: 'git://github.com/alanjds/exception_notification.git' 
```

这为我解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-03T15:17:27.733

我知道这是一篇旧帖子，但由于几天前我遇到了同样的问题，所以我想在这里分享我通过在我的 Heroku 应用程序上强制使用最新版本的 gem 来解决它。

```
gem 'exception_notification', '3.0.1' 
```

我猜问题出在版本 3.0.0 上，它已在 3.0.1 上修复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T18:08:14.920

通过 hananamar 快速调整解决方案，否则会出现错误：

```
gem 'exception_notification', :git => 'git://github.com/alanjds/exception_notification.git', :require => 'exception_notifier' 
```

# jquery - jQuery UI Spinner 不显示带有货币名称的美元符号

> ID：13042203
> 
> 赞同：4
> 
> 时间：2012-10-24T02:33:10.880
> 
> 标签：jquery, jquery-ui, spinner

我正在使用 jQuery UI 的新微调器小部件。这是初始化/配置：

```
$(function() {
    $("#amount").spinner({ min: min, max: max, step: 10, start: 10, numberFormat: "C", spin: updateAmounts }).change(updateAmounts);
)};
//min=5; max=500 
```

微调器工作正常，除了一件事。**即使我定义`numberFormat`为“C”（货币），它也没有像[演示那样](http://jqueryui.com/spinner/#currency)**显示美元符号。微调器本身出现，我可以上下旋转它，它遵循指定的最大值和最小值，但没有美元符号。我尝试在 HTML 文本框和 jQuery UI`start`选项中的值中添加一个美元符号，但没有骰子。

我认为这可能是因为我分配给`spin`事件的函数（`updateAmounts`如上所示），但删除该事件处理程序没有任何改变。我还尝试使文本框本身尽可能基本（删除了我拥有的 a`style`和`maxlength`属性），但没有骰子。我已经对此进行了一些搜索，但我想不出任何东西，部分是因为微调器是新的，部分是因为“美元符号”这个词会混淆事物，jQuery 对它的使用。这是文本框的 HTML 代码：

```
<input id="amount" name="amount" value="10" maxlength="4"> 
```

我正在使用 jQuery UI 版本 1.9.0 和 jQuery 1.8.2。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T02:42:55.747

**您需要指定一种文化，还需要包含 Globalize 库。**

链接到您在应用程序中使用的适当文化，并在代码中指定它并添加对 globalise.js 文件的引用。

该示例链接到`<script src="/resources/demos/external/globalize.js"></script>`

```
$("#amount").spinner({ culture: "en-US", min: min, max: max, step: 10, start: 10, numberFormat: "C", spin: updateAmounts }).change(updateAmounts); 
```

# objective-c - 键值编码 keyPath @sum of product of values？

> ID：13042204
> 
> 赞同：0
> 
> 时间：2012-10-24T02:33:15.470
> 
> 标签：objective-c, xcode, core-data, key-value-coding

我`NSManagedObject`与一组项目有“一对多”的关系。我喜欢如何使用 KVC keyPaths 轻松获得`quantity`以下所有项目的总和。

```
- (NSNumber *)quantity
{
    return [self valueForKeyPath:@"items.@sum.quantity"];
} 
```

现在我想知道是否可以在这里为`value`. 像`@"items.@sum.(quantity * value)"`什么？

```
- (NSNumber *)value
{
    double value = 0;
    for (Item *item in self.items)
    {
        value += [[item quantity] doubleValue] * [[item value] doubleValue];
    }
    return [NSNumber numberWithDouble:value];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T01:29:09.873

我想出了如何做到这一点。

只需向`Item`类添加一个新属性并覆盖 getter

```
@property (nonatomic, readonly) NSNumber *totalValue;

...

- (NSNumber *)totalValue
{
    return [NSNumber numberWithDouble:[self.value doubleValue] * [self.quantity doubleValue]];
} 
```

现在您可以`@"items.@sum.totalValue`用作 keyPath

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-24T03:26:57.180

不，有时你只需要编写代码。

# android - 调试不会突然工作

> ID：13042206
> 
> 赞同：0
> 
> 时间：2012-10-24T02:33:20.493
> 
> 标签：android

几天前，我只是在清单中输入了 android:debuggalbe="true 并插入了我的手机，当我运行应用程序时，它会自动在手机上运行。如果该信息与它有任何关系，我正在使用 mac，现在什么都没有碰巧它无法识别手机，我在手机上启用了 USB 调试。有什么方法可以查看它是否正在注册？我真的很生气，因为我已经按照它所说的方式完成了所有操作开发者网站，没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T02:41:36.137

1.  检查您的日志过滤器。
2.  打开 eclipse android 设备视图（windows > show view > devices），然后单击设备中的任何进程；
3.  重新启动你的手机。

# facebook-like - 向动态生成的网页添加 Like 按钮

> ID：13042207
> 
> 赞同：0
> 
> 时间：2012-10-24T02:33:39.560
> 
> 标签：facebook-like

我们有一个动态创建网页的应用程序。用户输入标题、一些描述、一些图像等，然后单击“创建”按钮，然后 Presto！该页面是在我们的域中创建的，可以通过输入从任何浏览器访问

```
 www.ourdomain.com/thenewpagename 
```

这一切都很好，但现在我们想在我们创建的页面上添加一个 Like 按钮。

我知道向页面添加“赞”按钮的正常方法是转到 Facebook 开发者页面，输入一些关于该页面的信息，例如它的 URL，然后将 Facebook 生成的代码复制并粘贴到页面上。但很明显，我们不能对引擎生成的每个页面都这样做。所以我的想法是从另一个页面添加 Like 代码，然后将代码中的 URL 动态更改为正在生成的页面的 URL。但这不起作用。它在页面上放置了一个 Like 按钮，好的，当您尝试为页面点赞时，“添加评论”字段会暂时出现，但随后“添加评论”字段会消失，并且喜欢计数回到 0。它就像 Facebook 关闭他们一看到可疑的东西就按下按钮。

我想知道是否有人看到了一种方法来做我想做的事情。有没有一种方法可以通过使用 cURL 之类的方式与 Facebook 通信，为我们生成的每个页面动态生成一个新按钮？

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:37:54.210

检查这是否对您有任何帮助：http: [//www.hostelmanagement.com/facebook_like_button_tutorial.php](http://www.hostelmanagement.com/facebook_like_button_tutorial.php)

# java - 如何在 Java 中为文件名（不是内容）指定字符集？

> ID：13042214
> 
> 赞同：4
> 
> 时间：2012-10-24T02:34:32.957
> 
> 标签：java, file, encoding

我们正在使用默认语言环境“POSIX”的 Linux 服务器上运行 Java Web 应用程序。我们的一些客户上传文件名中包含非 ascii 字符的文件。我们可以通过unicode保留Java中的那些非ascii字符，但是在我们实际将上传的文件保存到文件系统后，它们会丢失（保存的文件名会包含很多问号），因为文件系统的默认语言环境不支持非- ascii 字符。在用 Java 保存文件之前，有没有办法为文件名（而不是内容）指定一个字符集？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T06:39:30.603

可移植的Java API 没有文件系统字符编码的概念，因为它是不可移植的：例如Windows 将文件名保存为unicode，无论语言环境如何。但是，在 Linux 上，`LC_CTYPE`您的语言环境方面决定了文件系统的编码。*因此，通过在启动 Java 应用程序之前*导出`LC_CTYPE=en_US.utf8`或类似环境，您的应用程序将使用它来处理文件名。

 *另请参阅[file.encoding has no effect，LC_ALL 环境变量执行此操作，](https://stackoverflow.com/q/11343828/1468366)它讨论了此转换背后的一些内部结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:54:12.613

如果文件完全在您的应用程序的控制之下，而不是被上传以供另一个应用程序使用，那么我会考虑在保存文件之前对文件名进行自己的编码/解码，例如`URLEncoder.encode(filename, "UTF-8")`将用户提供的名称映射到您可以在磁盘上使用，`URLDecoder.decode(encodedName, "UTF-8")`反之亦然。*

# java - 如何在 Java 中将 UDP 与多个客户端一起使用

> ID：13042215
> 
> 赞同：1
> 
> 时间：2012-10-24T02:34:46.670
> 
> 标签：java, udp, datagram

我有以下情况。

我有一个服务器类。我有一个客户课程。我有一个 MultiServerThread 类。

当客户端连接到服务器时，服务器会创建一个新的 MultiServerThread，它正在处理来自客户端的输入。这样我就可以拥有多个客户。到目前为止，一切都很好。连接通过 TCP。

一个简短的例子：

**服务器类：**

```
...
public static void main(String[] args) throws IOException {     
    ServerSocket serverSocket = null;
    boolean listening = true;

    try {
        serverSocket = new ServerSocket(9999);
    } catch (IOException e) {
      System.err.println("Could not listen on port: " +  serverSocket.getLocalPort() + ".");
        System.exit(-1);
    }

    while (listening) {
        new MultiServerThread(serverSocket.accept()).start();
    }
    serverSocket.close();
}
... 
```

**客户端类：**

```
...
public static void main(String[] args) throws IOException {

    socket = new Socket(hostname, port);
    out = new PrintWriter(socket.getOutputStream(), true);
    in = new BufferedReader(new InputStreamReader(socket.getInputStream()));

    stdIn = new BufferedReader(new InputStreamReader(System.in));
    String fromServer;
    String fromUser;

    while ((fromServer = in.readLine()) != null) {
        System.out.println("Server: " + fromServer);
        if (fromServer.equals("Bye.")) {
            break;
        }

        fromUser = stdIn.readLine();
        if (fromUser != null) {
            System.out.println("Client: " + fromUser);
            out.println(fromUser);
        }
    }

    out.close();
    in.close();
    stdIn.close();
    socket.close();
}
... 
```

**MultiServerThread 类：**

```
...
public MultiServerThread(Socket socket) throws SocketException {
    super("MultiServerThread");
    this.socket = socket;
    //   dSocket = new DatagramSocket(4445);
}

public void run() {
    try {
        PrintWriter myOutput = new PrintWriter(socket.getOutputStream(), true);
        BufferedReader myInput = new BufferedReader(new InputStreamReader(socket.getInputStream()));
        myOutput.println("Connected to client and ready to accept commands.");

        while ((clientInput = myInput.readLine()) != null) {

            //A SIMPLE LOGIN A USER
            if (clientInput.contains("!login")) {

            //save some string given by client into loggedUser
            String loggedUser = clientInput.substring(7);

            }

        myOutput.close();
        myInput.close();
        socket.close();

    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

我需要的是：

例如，当用户名是“Bob”时，我需要实现来自服务器的通知。如果用户名是“Bob”，服务器应该通知客户端“Bob 又来了！”。在我的项目/作业中，这应该使用 Java 中的数据报来完成。

因此，如果客户端输入是“！login bob”，则应将带有消息（“Bob 又来了！”）的数据报包发送到客户端。

问题：我应该把数据报请求的代码放在哪里？我可以将数据报包请求放入 MultiServerThread 或 Client 中吗？

在 MultiServerThread 中会更容易，因为它已经处理了！登录。这里：

```
 if (clientInput.contains("!login")) {
            //save some string given by client into loggedUser
            String loggedUser = clientInput.substring(7);

            //send datagram request to Server???

            } 
```

但这有悖于联网原则吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T23:35:42.433

您需要通过初始 TCP 连接将 UDP 端口号发送到您的客户端。然后，您开始在该端口号上侦听客户端上的 UDP 数据报。来自服务器 -> 客户端的所有其他通信都将在此 udp 套接字上。这就是你的任务所暗示的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T01:08:30.417

我让它工作了;-)

我在线程和客户端类中定义了一个 udp 端口​​......客户端类得到了他的带有参数的端口......它把 udp 端口​​给了线程......所以两者都有 udp 端口​​；）

# php - 什么可能导致“超出进程限制”错误？

> ID：13042223
> 
> 赞同：4
> 
> 时间：2012-10-24T02:35:43.237
> 
> 标签：php

大约一周前，我启动了一个网站，并向邮件列表发送了一封电子邮件，告诉所有人该网站已经上线。在那之后，网站关闭了，一般错误日志中充斥着“超过进程限制”错误。从那以后，我尝试真正清理大量代码并最小化数据库连接。我仍然会在错误日志中每天看到一次该错误。什么可能导致此错误？我试图打电话给网络主机，他们说这与我的代码有关，但无法指出代码有什么问题或哪个页面导致错误的任何方向。谁能给我更多信息？例如，什么是流程，我应该有多少流程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T02:41:25.640

哇。大问题。

显然，您最大化了您的 apache 子工作进程。要大致了解可以创建多少个，请使用 top 获取一个 http 进程的粗略内存占用。如果您使用的是 wordpress 或其他 cms，则每个长度可能很容易为 50-100m（如果您使用 apache 的 php 模块）。然后，假设这台机器只用于 Web 服务，取你的总内存，减去一个块供操作系统使用，然后除以 100m（在这个例子中）。这就是您可以拥有的最大工作进程。在你的 httpd.conf 中设置它。完成此操作并重新启动 apache 后，监视顶部并确保您没有开始交换内存。如果你这样做了，你设置的工人数量太高了。

如果有任何其他东西像 mysql 服务器一样运行，请在计算可以拥有的工人数量之前为它腾出空间。如果这个数字很小，粗略地引用一个伟人的话说“你需要一艘更大的船”。只是在开玩笑。对于超过 100m 的 http 进程，您可能会看到非常高的内存使用率。您可以将每个孩子的最大请求数调整得更低，以缩短 http 进程的生命周期。这可以帮助清理臃肿的 http worker。

另一个需要关注的领域是请求的时间响应时间……每个请求需要多长时间？要快速检查，请使用 firebug 的 firebug 插件并查看“net”选项卡，了解您的初始请求需要多长时间才能回复（不是图像等）。如果由于某种原因请求需要超过 1 或 2 秒的时间来响应，那么这是一个大问题，因为您会遇到日志堵塞。造成这种情况的原因可能是 php 代码或 mysql 查询响应时间过长。要解决这个问题，请确保您使用 wordpress 以使用一些好的缓存插件来降低 mysql 的压力。

不过，老实说，除非您只是因为工作人员太少而没有利用内存，否则在没有服务器（内存、cpu 计数等）和 httpd.conf 设置的详细信息的情况下，优化您的 apache 并不是一件容易的事.

注意：如果您没有服务器访问权限，您将很难确定内存使用情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T02:38:57.917

进程限制通常是由共享虚拟主机提供商强制执行的，通常与在您的帐户下执行的进程数有关。这通常等于一次与您的服务器建立的连接数（假设每个连接一个 PHP 进程）。

有很多因素在起作用。您应该从您的托管服务提供商那里弄清楚该限制是多少，然后找到一个可以处理您的负载的新服务。

# objective-c - 从视图调用类方法给出：“发送到类的无法识别的选择器”

> ID：13042224
> 
> 赞同：0
> 
> 时间：2012-10-24T02:35:48.680
> 
> 标签：objective-c, ios, cocoa-touch

我正在尝试调用在导入的头文件中定义的类方法。

当我运行下面的代码时，我在“double *result = ...”行的视图中收到此错误：

```
+[CalculatorBrain runProgram:usingVariableValues:]: unrecognized selector sent to class 0x6908 
```

## ** CalculatorViewController.m **

```
#import "CalculatorViewController.h"
#import "CalculatorBrain.h"

@interface CalculatorViewController()

@property (nonatomic, strong) CalculatorBrain *brain;
@property (nonatomic, strong) NSMutableDictionary *variableValues;

@end

@implementation CalculatorViewController

@synthesize brain = _brain;
@synthesize variableValues = _variableValues;

- (CalculatorBrain *)brain {
    if (!_brain) _brain = [[CalculatorBrain alloc] init];
    return _brain;
}

- (NSMutableDictionary *)variableValues {
    if (!_variableValues) {
        _variableValues = [[NSMutableDictionary alloc] init];
    }
    return _variableValues;
}

- (IBAction)enterPressed {

    double *result = [CalculatorBrain runProgram:[self.brain program] usingVariableValues:[self variableValues]];

} 
```

## ** CalculatorBrain.h **

```
#import <UIKit/UIKit.h>

@interface CalculatorBrain : NSObject

+ (double *)runProgram:(id)program usingVariableValues:(NSDictionary *)variableValues;

@property (readonly) id program;

@end 
```

## ** CalculatorBrain.m **

```
#import "CalculatorBrain.h"

@interface CalculatorBrain()
    @property (nonatomic, strong) NSMutableArray *programStack;
@end

@implementation CalculatorBrain

@synthesize programStack = _programStack;

... other code ...

+ (double)runProgram:(id)program :(NSDictionary *) usingVariableValues 
{

    NSLog(@"variableValues is %@", usingVariableValues);

    NSMutableArray *stack;

    if ([program isKindOfClass:[NSArray class]]) {

        stack = [program mutableCopy];

        NSLog(@"runProgram");

        // if vars are passed in
        if ([usingVariableValues isKindOfClass:[NSDictionary class]]) {

            NSLog(@"vars are passed in: %@", usingVariableValues);

            id obj;
            int index = 0;

            NSEnumerator *enumerator = [program objectEnumerator];

            // for every obj in programStack
            while ((obj = [enumerator nextObject])) {

                id varVal = [usingVariableValues objectForKey:(obj)];

                // test
                NSLog(@"usingVariableValues objectForKey:(obj) is %@", varVal);

                // if the obj is a variable key
                if (!varVal) {
                    varVal = 0;

                    NSLog(@"varVal is false");
                }

                NSLog(@"Replacing object at index %@ of stack with var %@", index, varVal);

                // replace the variable with value from usingVariableValues OR 0
                [stack replaceObjectAtIndex:(index) withObject:varVal];

                index += 1;

            }
        }

    }

    return [self popOperandOffStack:stack];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T02:39:13.797

```
+ (double *)runProgram:(id)program usingVariableValues:(NSDictionary *)variableValues; 
```

被定义为类方法，但你把它称为对象方法

```
 double *result = [self.brain runProgram:[self.brain program] usingVariableValues:[self variableValues]]; 
```

要在课堂上调用它：

```
 double *result = [[self.brain class] runProgram:[self.brain program] usingVariableValues:[self variableValues]]; 
```

或者

```
double *result = [CalculatorBrain runProgram:[self.brain program] usingVariableValues:[self variableValues]]; 
```

* * *

您更改了代码，表明仍未找到该方法。你实施了吗？

* * *

如果它被实现，那么您可能必须将实现文件（又名 .m）添加到 Xcode 中的目标。

顺便说一句，：可能您希望您的方法返回 a `double`not a `double*`，一个指向 double 的指针。

* * *

你的标题有一个签名：

```
+ (double *)runProgram:(id)program usingVariableValues:(NSDictionary *)variableValues; 
```

虽然您的实施有

```
+ (double)runProgram:(id)program :(NSDictionary *) usingVariableValues 
```

它们不相同：

1.  标头承诺要返回一个指向双精度的指针。你不想要那个。

2.  他们甚至没有同名 `+runProgram:usingVariableValues:`vs`+runProgram::`

# spring - 无法自动装配 2 个相同类型的配置 bean

> ID：13042226
> 
> 赞同：1
> 
> 时间：2012-10-24T02:35:53.797
> 
> 标签：spring, annotations

我有两个在 HandlerConfiguration.java 中定义的 GenericHandlerResolver bean，例如：

```
@Bean(autowire = Autowire.BY_NAME)
@Scope(value = "prototype")
public GenericHandlerResolver defaultHandlerResolver() {
    return new GenericHandlerResolver(){{
        setHandlers(new ArrayList<Handler>(){{
            add(loggingHandler());
            add(sessionHandler());
        }});
    }};
}

@Bean(autowire = Autowire.BY_NAME)
@Scope(value = "prototype")
public GenericHandlerResolver maskingHandlerResolver() {
    return new GenericHandlerResolver(){{
        setHandlers(new ArrayList<Handler>(){{
            add(maskingLoggingHandler());
            add(sessionHandler());
        }});
    }};
} 
```

然后我想将两个不同的 bean 自动装配到 WebServiceConfiguration.java 中，并在几十个 JaxWsPortProxyFactoryBean bean 中使用它们，例如：

```
@Configuration
public class WebServiceConfiguration {
...

public Integer paymentServiceTimeout;
@Bean @DependsOn("applicationProperties")
public Map<String, Object> paymentServiceProperties(){
    return new HashMap<String, Object>(){
        {put(timeoutKey, paymentServiceTimeout);}
    };
}

...
// Logging handler resolver:    
/*@Autowired
protected GenericHandlerResolver defaultHandlerResolver;*/

// Logging handler resolver that will mack Credit Cards:
@Autowired
protected GenericHandlerResolver maskingHandlerResolver;

...

@Bean
@Lazy
@DependsOn("applicationProperties")
public JaxWsPortProxyFactoryBean paymentServicePort() throws Exception {
    JaxWsPortProxyFactoryBean jppfb = new JaxWsPortProxyFactoryBean() {{
        setServiceInterface(PaymentServicePortType.class);
        setWsdlDocumentUrl(new URL(paymentServiceEndpoint + "?wsdl"));
        setServiceName("PaymentService");
        setEndpointAddress(paymentServiceEndpoint);
        setCommonProperties(this,
                paymentServiceProperties(),
                maskingHandlerResolver,
                LEGACY_NAMESPACE);
    }};
    jppfb.afterPropertiesSet();
    return jppfb;
}

protected void setCommonProperties(JaxWsPortProxyFactoryBean bean,
                                   Map<String, Object> customProperties,
                                   GenericHandlerResolver handlerResolver,
                                   String namespace) {
    bean.setMaintainSession(false);
    bean.setLookupServiceOnStartup(false);
    bean.setCustomProperties(customProperties);
    bean.setHandlerResolver(handlerResolver);
    bean.setNamespaceUri(namespace);
} 
```

我的问题是这在 XML 配置中有效，但是现在我将其移至 javaConfig，如果我在 WebServiceConfiguration.java 中有多个 GenericHandlerResolver，则处理程序不起作用（没有日志记录），但我没有收到任何错误消息，所以我不知道发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:32:45.807

尝试使用 Resource 注释而不是 Autowired：

```
@Resource(name="defaultHandlerResolver")
protected GenericHandlerResolver defaultHandlerResolver;

@Resource(name="maskingHandlerResolver")
protected GenericHandlerResolver maskingHandlerResolver 
```

或者，您可以将 @Qualifier 与 @Autowired 一起使用

```
@Autowired
@Qualifier("defaultHandlerResolver")
protected GenericHandlerResolver defaultHandlerResolver;*/

@Autowired
@Qualifier("maskingHandlerResolver")
protected GenericHandlerResolver maskingHandlerResolver; 
```

# sorting - 对文本行进行排序 Google Apps 脚本

> ID：13042230
> 
> 赞同：1
> 
> 时间：2012-10-24T02:37:06.370
> 
> 标签：sorting, text, google-apps-script

对不起这个极端的初学者问题。我有一个字符串变量 originaltext 包含一些多行文本。我可以将它转换成这样的行数组：

`lines = originaltext.split("\n");`

但我需要帮助对这个数组进行排序。这不起作用：

`lines.sort;`

数组保持未排序。

* * *

和一个相关的问题。假设我可以以某种方式对数组进行排序，那么如何将其转换回没有分隔符的单个变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T04:17:01.687

您唯一的问题是一个小问题-`sort`实际上是一种方法，因此您需要调用`lines.sort()`. 为了将元素连接在一起，您可以使用以下`join()`方法：

```
var originaltext = "This\n\is\na\nline";
lines = originaltext.split("\n");
lines.sort();
joined = lines.join(""); 
```

# python - Python：在捕获正则表达式中省略内容

> ID：13042232
> 
> 赞同：0
> 
> 时间：2012-10-24T02:37:12.177
> 
> 标签：python, regex

我正在使用 Python 2.x 中的正则表达式来捕获缩写的子集。以下文本中出现了几个这样的缩写：

```
# text                                    # desired capture
The certolizumab pegol (Cmzia, CZP)...      'CZP'
The drug 6-mercatopureine (6-mp) ...        '6-mp'
The merits of 5-Asasdfdsf (5-ASA) ...       '5-ASA' 
```

在第一个示例中，我有兴趣返回结果`CZP`并忽略`Cmzia,`.

这是我之前的正则表达式，它对于匹配和这样的情况是必要`(6-mp)`的`(5-ASA)`：

```
\((\S*[A-Z-0-9]\S*)\)  # captures '6-mp' and '5-ASA', respectively 
```

这是我为处理上述情况所做的补充：

```
\S*\s+[A-Z-0-9]+  # I only want to capture the '[A-Z-0-9]+' 
```

我尝试使用以下正则表达式（我尝试将感兴趣的部分加粗，以免与上下文混淆，但这似乎不起作用）：

```
# in p1, I add the pattern to the list, separated by '|'
>>> p1 = re.compile(r'\((\S*[A-Z-0-9]\S*|\S*\s+[A-Z-0-9]+)\)')
>>> p1.findall('The certolizumab pegol (Cmzia, CZP)')
['Cmzia, CZP']

# in p2, I use a broad non-capturing group, enclosing the desired captured expressions in parentheses
>>> p2 = re.compile(r'\((?:(\S*[A-Z-0-9]\S*)|\S*\s+([A-Z-0-9]+))\)')
>>> p2.findall('The certolizumab pegol (Cmzia, CZP)')                           
[('', '', 'CZP')] 

# this is an addition to the original post
# demonstrates that the non-capturing expression doesn't prevent capture of the section \S*\s+
>>> p3 = re.compile(r'\((\S*[A-Z-0-9]\S*|(?:\S*\s+)[A-Z-0-9]+)\)')
>>> p3.findall('The certolizumab pegol (Cmzia, CZP)')                           
['Cmzia, CZP'] 
```

理想情况下，我想要输出`CZP`. *p1*返回太多，因为我想排除`\S*\s+`对应的`Cmzia,`. 关于*p2*，我知道我可以轻松地操纵输出以匹配我想要的输出，但我想知道是否有办法修改正则表达式来处理它。

谢谢，如果您需要更多详细信息/说明，请告诉我。

**编辑：**

我仍然希望正则表达式从正则表达式的第一个/原始部分捕获`6-mp`and 。`5-ASA`

**编辑2：**

这包括在上面，但把它放在一个位置并总结我的问题。

```
pattern = r'???'
p = re.compile(pattern)
p.findall('Stuff stuff (Cmzia, CZP) stuff stuff (5-ASA) (6-mp) stuff...')
['CZP','5-ASA','6-mp'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:17:21.197

这是我发现可以实现您的目标的最简单的正则表达式：

```
>>> p = "\((?:\S*,\s+)?(\S*)\)"
>>> s = "The cert pegol (Cmzia, CZP) some words (6-mp) and (5-ASA)"
>>> re.findall(p,s)
['CZP', '6-mp', '5-ASA'] 
```

**更新**

下一个更具限制性，但它给出了相同的结果：

```
>>> p = "\((?:\S*,\s+)?(\S*[A-Z-0-9]\S*)\)" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T03:04:07.213

我不太明白你想要什么，但我在与“CZP”对应的部分周围添加了另一个匹配的括号，并使外部组不匹配，得到了这个：

```
>>> p3 = re.compile(r'\((?:\S*[A-Z-0-9]\S*|[A-Z-0-9]* [A-Z-0-9]*|(?:\S*\s+)([A-Z-0-9]+))\)')
>>> p3.findall('The certolizumab pegol (Cmzia, CZP)')
['CZP'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T08:34:26.953

如果我没看错的话，括号内可以有一个或两个逗号分隔的值。如果是两个，您只想捕获第二个。试试这个：

```
p = re.compile(r'\((?:[^,)]+,\s*)?([A-Za-z0-9-]+)\)') 
```

在开始的括号之后，`(?:[^,)]+,\s*)?`尝试匹配第一个值，它通过尾随逗号的存在来标识。您并不真正关心第一个值的外观，只要其中没有任何逗号即可。但是您不能仅仅`[^,]+`因为在只有一个值的情况下匹配太多而使用它。将括号添加到排除字符列表中，可以使匹配项包含在一组括号中。

# javascript - 循环 json 对象键 => 数组

> ID：13042235
> 
> 赞同：0
> 
> 时间：2012-10-24T02:37:38.400
> 
> 标签：javascript, jquery, handlebars.js

我正在拉入一个 json 对象，这是`$.parseJSON`输出的结果。我知道它需要一个处理程序来帮助它，但不确定什么属于帮助程序。阅读其他用户的问题，由于拥有一个恒定的密钥，他们似乎能够跳过下一圈，不幸的是，在我的情况下，它总是不同的。

* * *

json输出

```
[
{
    "High blood pressure?": [
        "no",
        "string"
    ]
},
{
    "Cancer?": [
        "no",
        "string"
    ]
},
{
    "Asthma or a breathing disorder?": [
        "no",
        "string"
    ]
}
] 
```

* * *

环形

* * *

```
{{#each screen_data}}
<tr>
    <td class="bold">{{this}}</td>
</tr>
{{/each}} 
```

* * *

结果是 `[Object object][Object object][Object object]......`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T02:58:45.120

这是因为你有一个对象数组，这就是你告诉你的模板写出的......对象。似乎您想在对象的根上写出唯一的属性，这是一个问题。

尝试这个：

```
{{#each screen_data}}
<tr>
    <td class="bold">{{this[0]}}</td>
</tr>
{{/each}} 
```

我必须说，这是一个奇怪的 JSON 结构。通常，将对象属性名称用作此类数据的载体被认为是不良形式。

编辑：我建议将该结构更改为更能代表您的数据的结构......就像这样：

```
[{
    question: "High blood pressure?",
    answers: [
        "no",
        "string"
    ]
},
{
    questions: "Cancer?",
    answers: [
        "no",
        "string"
    ]
},
{
    question: "Asthma or a breathing disorder?",
    answers: [
        "no",
        "string"
    ]
}] 
```

这意味着您的模板将如下所示：

```
{{#each screen_data}}
<tr>
    <td class="bold">{{this.question}}</td>
</tr>
{{/each}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T02:49:40.597

你可以在下面试试这个小提琴。它将为您提供 JSON 数据中的所有密钥

[http://jsfiddle.net/tariqulazam/SjugS/](http://jsfiddle.net/tariqulazam/SjugS/)

```
var data= [
{
    "High blood pressure?": [
        "no",
        "string"
    ]
},
{
    "Cancer?": [
        "no",
        "string"
    ]
},
{
    "Asthma or a breathing disorder?": [
        "no",
        "string"
    ]
}
];

for (var key in data) {
       for (var item in data[key]) {    
           alert(item);
       }
} 
```

# php - PHP 垃圾收集延迟启动

> ID：13042244
> 
> 赞同：0
> 
> 时间：2012-10-24T02:38:42.333
> 
> 标签：php, session, garbage-collection

我想确切地知道垃圾收集何时运行，所以我制作了下面的测试脚本。

```
<?php

ini_set('session.gc_maxlifetime',10);
ini_set('session.gc_probability',1);
ini_set('session.gc_divisor',1);

echo ini_get('session.gc_maxlifetime').'s ';
echo ini_get('session.gc_probability').'/';
echo ini_get('session.gc_divisor')."<br>";

session_start();
echo session_id();
if (isset($_SESSION['test']))
{
    echo "<br>";
    echo "session set";
}
$_SESSION['test'] = "works";
echo "<br>";
print_r($_SESSION);

?> 
```

尝试#1：当我第一次尝试时，我得到：

```
10s 1/1
e9isrrljuvdbr1c6vqndp1e4i7
Array ( [test] => works ) 
```

尝试#2：我等待超过 10 秒并得到：

```
10s 1/1
e9isrrljuvdbr1c6vqndp1e4i7
session set
Array ( [test] => works ) 
```

尝试＃3：然后我得到：

```
10s 1/1
e9isrrljuvdbr1c6vqndp1e4i7
Array ( [test] => works ) 
```

为什么垃圾收集在尝试 #2 时没有启动，而是在尝试 #3 时启动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:05:12.853

会话数据的 PHP 垃圾收集旨在最终清理数据，而不是保证它被清理。

如果您启动会话，PHP 会尝试从上次请求中查找已存储的会话数据。否则，它将假定会话是全新的，在磁盘上创建一个空会话文件，锁定它，并将 $_SESSION 初始化为空数组。

在脚本结束时，或者`session_write_close()`被调用时，将$_SESSION的内容序列化到这个文件中，释放锁，脚本结束。

只有这样，垃圾收集才会启动，有一定的概率（即 100 个请求中只有一个开始垃圾收集）。它会扫描所有会话文件的过期时间，如果文件的最后修改时间早于`session.gc_maxlifetime`设置，则将其删除。

其实`session.gc_maxlifetime`是贴错标签。确实`session.gc_minlifetime`如此，因为会话数据至少存在这段时间。

第二件事：垃圾收集不能丢弃您正在使用的会话，因为它的数据是新保存的。

第三：垃圾收集需要一个请求来触发它。这不是后台的自动化过程。

将第 2 点和第 3 点结合起来会导致垃圾收集仅清除 OTHER 会话，这些会话的年龄足以比`session.gc_maxlifetime`. 要对其进行测试，您至少需要两个会话，一个过期，第二个触发执行垃圾回收。

所以它应该是这样的：有两个浏览器，同时访问会话页面。定期在一个浏览器中重新加载页面，在第二个浏览器中等待超过`session.gc_maxlifetime`几秒钟。只有在第二个浏览器中重新加载 - 会话应该消失。

# c++ - 为什么正则表达式“//”和“/*”不能匹配单个注释和块注释？

> ID：13042248
> 
> 赞同：2
> 
> 时间：2012-10-24T02:38:58.417
> 
> 标签：c++, flex-lexer

我想计算关于 c++ 程序的“空行”、“单条注释”、“块注释”。

我写工具使用flex。但是工具不能匹配c++块注释。

1个弹性代码：

```
%{
    int block_flag = 0;
    int empty_num = 0;
    int single_line_num = 0;
    int block_line_num = 0;
    int line = 0;
%}

%%
^[\t ]*\n               {
    empty_num++;
    printf("empty line\n");
}
"//"    {
    single_line_num++;
    printf("single line comment\n");
}
"/*"  {
    block_flag = 1;
    block_line_num++;
    printf("block comment begin.block line:%d\n", block_line_num);
}

"*/"  {
    block_flag = 0;
    printf("block comment end.block line:%d\n", block_line_num);
}
^(.*)\n                 {
    if(block_flag)
    block_line_num++;
    else
    line++;
}

%%
int main(int argc , char *argv[])
{
    yyin = fopen(argv[1], "r");
    yylex();

    printf("lines :%d\n" ,line);
    fclose(yyin);

    return 0;
} 
```

2 你好.c

```
bbg@ubuntu:~$ cat hello.c 
#include <stdlib.h>

//
//
/*
 */

/*   */ 
```

3 输出

```
bbg@ubuntu:~$ ./a.out hello.c 
empty line
empty line
lines :6 
```

为什么“//”和“/*”不能匹配单个注释和块注释？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T02:54:48.397

柔性：

1.  不搜索。它按顺序匹配模式，每个模式从另一个结束的地方开始。

2.  总是选择匹配最长的模式。（如果两个或多个模式匹配的数量完全相同，它会选择第一个。

所以你有了

```
"//"   { /* Do something */ } 
```

和

```
^.*\n  { /* Do something else */ } 
```

假设它刚刚匹配第二个，所以我们在一行的开头，假设该行开始`//`。现在，这两种模式都匹配，但第二个匹配整行，而第一个只匹配两个字符。所以第二个赢了。那不是你想要的。

提示 1：您可能希望`//`注释匹配到行尾

提示 2：有一个正则表达式可以匹配`/*`注释，虽然它有点乏味：`"/*"[^*]*"*"+([^*/][^*]*"*"+)*"/"`不幸的是，如果你使用它，它不会为你计算行尾，但你应该能够调整它来做你想做的事。

提示 3：您可能想考虑从一行中间开始的注释，可能已经缩进。您的规则`^.*\n`将吞下整行，甚至不查看其中是否有评论。

提示 4：字符串文字隐藏注释。

# ios - 为什么我的临时个人资料会过期？

> ID：13042250
> 
> 赞同：1
> 
> 时间：2012-10-24T02:39:07.057
> 
> 标签：ios, distribution, profile, adhoc

我的开发设备上的 Adhoc 应用程序通知我，我的 adhoc 配置文件将在 2 天后到期。

但我想在下周将它用作演示。

为什么会这样？

如何解决问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T03:59:06.520

转到 developer.apple.com 并再次下载配置文件并安装。您应该在那里看到一个下载链接。如果您无权访问门户，请向团队管理员/代理询问配置文件。

# c++ - 比较 C++ 中的空洞

> ID：13042254
> 
> 赞同：0
> 
> 时间：2012-10-24T02:40:19.633
> 
> 标签：c++, pointers, comparison, void, void-pointers

尝试比较排序算法的空隙。到目前为止我有这个，但如果你把它们转换成整数，它有点违背了 IMO 的目的。有没有办法比较空洞？我的教授没时间了，怎么被困在网上。任何帮助表示赞赏。谢谢

```
int fcmp(const void *one, const void *two)
{
    if (*(int*)one > *(int*)two) return 1;
    if (*(int*)one < *(int*)two) return -1;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T02:43:30.063

假设这个想法是`fcmp`在 的上下文中使用[`qsort`](http://www.cplusplus.com/reference/clibrary/cstdlib/qsort/)，那么您的代码是完全有效的。

由于`qsort`不关心返回值是`1`or`-1`并且会采用任何正数或负数，因此此版本甚至更短，但也可以使用`qsort`：

```
int fcmp (const void * one, const void * two)
{
    return ( *(int*)one - *(int*)two );
} 
```

`qsort`使用的原因`void*`是让您对不同的数据类型使用相同的算法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T02:45:35.637

您不是在比较此代码中的“空白”。代码将`void`指针转换为`int`指针，然后取消引用结果，这意味着您正在比较`int`指针指向的 s。理想情况下，函数应该是这样编写的：

```
int fcmp(const int *one, const int *two)
{
    if (*one > *two) return 1;
    if (*one < *two) return -1;
    return 0;
} 
```

但它不是这样写的，因为`fcmp()`在这种情况下需要有一个特定的签名。否则它不能以通用方式使用。例如，作为对另一个函数的回调。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T02:44:45.887

这看起来是在几个标准库函数（如 qsort() ）中使用的标准比较函数，您可以在其中使用某种数据项数组以及指示两个元素是否相等的比较函数调用该函数不是，如果不是，他们的整理顺序是什么。

所以 void 指针指向什么取决于程序员。这就是在比较函数接口中使用 void 指针的目的，因为调用比较函数的函数，例如 qsort()，只是想知道两个数组元素以什么顺序进入。它不知道什么是数组元素是或如何进行比较，它只知道数组的起始地址和每个元素的大小以及有多少元素。

标准库中的另一个函数是[bsearch() 函数](http://www.cplusplus.com/reference/clibrary/cstdlib/bsearch/)。

因此，要使用它，您可能有如下代码：请参阅[qsort() 手册页](http://www.cplusplus.com/reference/clibrary/cstdlib/qsort/)。

```
typedef struct {
   int iValue;
   char  sName[10];
} DataValue;

// compare two elements of the array and indicate which one is higher
// or lower in collating sequence or if they are equal.
int dataComp (void *one, void *two)
{
    return ((DataValue *)one)->iValue - ((DataValue *)two)->iValue;
}

int main (int argc, char *argv[])
{
    DataValue myData[25];
   //.. put some data stuff in the array.
   // call qsort with the array.  specify number of elements and size of each one
   qsort (myData, sizeof(myData)/sizeof(myData[0]), sizeof(myData[0]), dataComp);
} 
```

# python - 如何在 Django 视图中访问字典中添加的对象

> ID：13042257
> 
> 赞同：0
> 
> 时间：2012-10-24T02:41:02.610
> 
> 标签：python, django

我已将字典添加到对象中：

```
dict['var1'] = {'value': 'tetsing'} 
```

`object.dict = dict`

现在我很困惑如何访问视图中的字典。我是否使用：

`object.dict['var1']['value']` 或者`object.dict.var1.value`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T02:44:30.123

首先，您应该重命名变量和属性名称，以免它们与内置名称（如`dict`.

现在，在普通的 Python 代码中，使用第一种方式。

**但是**，如果您尝试从 Django 模板访问它，请使用第二个模板。

# jquery - 附加容器后，jQuery Masonry 不能立即工作

> ID：13042261
> 
> 赞同：2
> 
> 时间：2012-10-24T02:41:30.753
> 
> 标签：jquery, jquery-masonry

我将一个带有元素的 div 附加到 DOM，并希望使用砌体来排列这些内部元素。但是，除非我在 setTimeout 回调中初始化砌体，否则砌体会破裂。

```
// I have a `#media` div in my html
var outerDiv = $('<div>').attr('style', 'width: 720px;');
this.$('#media').append(div);

// I create lots of boxes in a boxes div
var boxes = $('<div>').append(
  $('<div>').attr('style', 'width: 160px; height: 180px; margin: 10px 0px; ' +
      'background-color: red; float: left;').addClass('item'),
  $('<div>').attr('style', 'width: 340px; height: 120px; margin: 10px 0px; ' +
      'background-color: red; float: left;').addClass('item'),
  $('<div>').attr('style', 'width: 160px; height: 120px; margin: 10px 0px; ' +
      'background-color: red; float: left;').addClass('item'),
  $('<div>').attr('style', 'width: 160px; height: 180px; margin: 10px 0px; ' +
      'background-color: red; float: left;').addClass('item'),
  $('<div>').attr('style', 'width: 340px; height: 100px; margin: 10px 0px; ' +
      'background-color: red; float: left;').addClass('item'),
  $('<div>').attr('style', 'width: 340px; height: 160px; margin: 10px 0px; ' +
      'background-color: red; float: left;').addClass('item'),
  $('<div>').attr('style', 'width: 160px; height: 180px; margin: 10px 0px; ' +
      'background-color: red; float: left;').addClass('item'),
  $('<div>').attr('style', 'width: 160px; height: 120px; margin: 10px 0px; ' +
      'background-color: red; float: left;').addClass('item')
);

outerDiv.append(boxes);

// without the setTimeout wrapper, this breaks (in Chrome, everything clusters
// in the top left; in Firefox, everything lines up in a column on the left)
setTimeout(function() {
  boxes.masonry({
    itemSelector: '.item',
    columnWidth: 180,
    isResizable: true,
  });
}); 
```

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:56:04.733

您是否检查了 Masonry 文档中的“未加载的媒体和重叠”？另请参阅[此讨论](https://github.com/desandro/masonry/issues/58)和开发人员的提示。在没有 Ajax 加载和其他加载器的情况下，您的问题也显示出来，通常是内容没有及时到达，因为它的数据量很大。

Masonry 需要每个 div 中的内容（图像、文本或视频）来计算所有 div 尺寸 - 在第一次计算布局之前。如果您正在加载带有 imagesloaded 的图像，或者您的图像非常大或类似，则 Masonry 没有尺寸（来自内容）可以使用，并且会显示这个典型的“错误”。这就是为什么你的

```
setTimeout(function() {
  boxes.masonry({
  itemSelector: '.item',
  columnWidth: 180,
  isResizable: true,
}); 
```

在这种情况下有效，因为有足够的时间来加载/追加/出现/构建内容。

# html - 将 Dart VM 嵌入桌面图形独立应用程序

> ID：13042266
> 
> 赞同：9
> 
> 时间：2012-10-24T02:41:48.820
> 
> 标签：html, qt, desktop-application, dart, dartium

所以我正在为 Web 和桌面编写一个跨平台（到目前为止计划用于 Windows 和 Ubuntu）的应用程序。预计此应用程序有时会具有中等图形密集度并执行大量文件 IO。我正在用 Dart 写它。考虑到这种情况，这似乎是一个“有趣”的选择，但是我不想处理任何繁重的 API 或有两个代码库（NaCl 和 GCC 以及两个不同的库）。简而言之，我正在使用 Dart 与 HTML 网页进行交互，并注意到除非您在 Dartium 中，否则 Dart VM 不会与网页交互。但我想要一个“桌面应用程序”以及一个消除 Dartium 作为选择的 Web 应用程序，所以我计划使用 Qt Webview 让它看起来像一个桌面应用程序，但我想知道的是，将 Dart VM 嵌入到我的应用程序中是否值得？这样做是否足够容易让 Dart VM（运行 dart 脚本）与 Qt Webview 中的页面交互（我对 Dart 有点陌生）？谢谢阅读！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T14:35:15.480

Dartium 最终将与 Chromium 合并，允许您的 DART 应用程序作为 Web 技术直接在 chrome 中运行。

一旦合并，您就可以利用新的[Chrome 应用程序](http://developer.chrome.com/trunk/apps/about_apps.html)，让您拥有 Web 技术的桌面版本。因此，您不需要使用 Qt Webview，或将 dartVM 嵌入到您的本机应用程序中；只需使用 Chrome 应用程序。

~主要

# iphone - iPhone - 尝试制作纯色 UIToolbar

> ID：13042267
> 
> 赞同：1
> 
> 时间：2012-10-24T02:41:55.390
> 
> 标签：iphone, ios, ipad, quartz-2d

我想让我的 UIToolbar 变成纯灰色。这必须适用于 iOS 4.3+

我已经将我的 UIToolbar 子类化并添加了这个

```
- (void)drawRect:(CGRect)rect {

    UIGraphicsBeginImageContext(rect.size);

    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGContextSaveGState(ctx);

        [[UIColor colorWithRed:64.0f/255.0f
                         green:64.0f/255.0f
                          blue:64.0f/255.0f
                         alpha:1.0f] set];

    CGRect myRect = CGRectMake(0, 0, self.frame.size.width, self.frame.size.height);
    CGContextFillRect(ctx, myRect);

    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    CGContextRestoreGState(ctx);
    UIGraphicsEndImageContext();

    [image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
} 
```

没门。工具栏始终为黑色。

任何线索？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T03:05:49.493

您可以尝试使用纯灰色背景图像。你可以用你想要的颜色制作一个 1x1 像素的灰色 png 图像。然后使用以下代码将其设置为背景图像，它将适用于包括 4.3 及以下的所有 iOS 版本。

```
 UIToolbar *toolBar = //...your toolbar

    UIImage *toolbarBkg = [[UIImage imageNamed: @"toolbarBkg.png"] stretchableImageWithLeftCapWidth:0 topCapHeight:0];

    if ([toolBar respondsToSelector:@selector(setBackgroundImage:forToolbarPosition:barMetrics:)])
        [toolBar setBackgroundImage:toolbarBkg forToolbarPosition:UIToolbarPositionAny barMetrics:UIBarMetricsDefault];
    else {
        UIImageView *background = [[UIImageView alloc] initWithImage:toolbarBkg];
        background.frame = toolBar.frame;
        [toolBar insertSubview:background atIndex:0];
    } 
```

# actionscript-3 - AS3 android后退按钮问题

> ID：13042268
> 
> 赞同：0
> 
> 时间：2012-10-24T02:42:01.020
> 
> 标签：actionscript-3

我试图让后退按钮转到应用程序的第一个场景......我正在使用这个......

```
stage.addEventListener(KeyboardEvent.KEY_DOWN, fl_OptionsBackHandler);

function fl_OptionsBackHandler(event:KeyboardEvent):void
{
    event.preventDefault();
    stage.removeEventListener(KeyboardEvent.KEY_DOWN, fl_OptionsBackHandler);

    gotoAndPlay(1, "Scene 1");

    stage.addEventListener(KeyboardEvent.KEY_DOWN, fl_OptionsBackHandler);
} 
```

这是一些有效的方法。问题是当它回到那个帧和场景时，它不会执行那里的代码。我已经说过一些由 as3 制作的图形，但它在返回时不会绘制它们。当它进入下一个场景时，我会删除它们。为了进入下一个场景，我在一个按钮上使用了一个监听器，它基本上进入了场景 2 并删除了我想要删除的孩子，这样他们就不会继续进入下一个场景。

另一个问题是即使它返回到场景 1，我单击按钮转到场景 2，场景 1 中的一些东西在场景 2 中呈现......不是一切，而是一些东西。知道有什么问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:44:05.257

不知道你有多少帧`scene1`。但是我确信如果你的代码在第一帧中`scene 1`你看不到，因为你还没有停在那里，而是你正在播放它到下一个（`gotoAndPlay`）。因此，如果您想查看动态所做的更改，您应该停在那里（您的代码所在的位置）。

另一个问题。在 AS3 中，如果您在舞台上进行如下动态操作，那么当您移动到另一个场景时，它不会被移除。

1.  添加影片剪辑，
2.  交换深度或改变子索引，
3.  开始拖动等等。

我希望整个应用程序只有一个`stage`。因此，无论我们在什么场景中，舞台中的物体总是可见的。

# playframework - Play framework 2.0数据绑定流程

> ID：13042273
> 
> 赞同：1
> 
> 时间：2012-10-24T02:43:00.600
> 
> 标签：playframework, playframework-2.0

我有一个管道，我想像这样工作

**A节**

1.  用户导航到表格 A。选择一些图片进行上传
2.  表单提交，图片上传，后端用Java处理，在摘要页面A返回给用户
3.  用户选择要进一步处理的照片，然后单击“选择的进一步处理”

**B节**

1.  从 A.3 中选择的照片与表格 B 一起处理和显示
2.  用户选择更多选项并提交
3.  照片显示在表格B的摘要页（摘要页B）

我已经实施了 A 部分。图像的路径存储在表格 A 的模型中。总结 A，当用户检查照片时，javascript 数组变量会更新为所选图像的路径我在将这个 javascript 变量传递给表单 B 时遇到问题

这可能吗？有其他选择吗？如果我没有很好地解释自己，请告诉我

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:23:21.647

将 javascript 变量提供给 Form B 很简单——您只需将其作为全局 Javascript 变量添加到生成的页面中。因此，您的模板将具有：

```
<script type="text/javascript">
var theArrayData = @Html(theJavaScriptVariable.toString)
</script> 
```

您可以`theJavaScriptVariable`在将控制器传递给模板之前在控制器中重新计算，或者您可以将其与表单 A 的其余部分一起作为隐藏字段提交，并将其与用户会话一起缓存。您需要对其进行序列化（例如使用 jquery JSON 库），并且可能需要处理转义。

# qt - 在 QT 中的槽或函数之间保留值

> ID：13042274
> 
> 赞同：-2
> 
> 时间：2012-10-24T02:43:02.153
> 
> 标签：qt, variables, signals-slots, preserve

我正在使用 QT。一般来说，有没有办法在插槽或函数之间保留值？为了简单起见，假设我的表单在工具栏上有三个按钮和一个行编辑。我需要第一个按钮将值“1”设置为变量，第二个按钮将“2”设置为变量。第三个按钮采用此变量并将其显示在行编辑中。

因此，如果我按下第一个按钮，然后按下第三个按钮，则行编辑将显示数字“1”。如果我按第二个按钮，然后按第三个按钮，则行编辑将显示数字“2”。基本上，这将使第三个按钮的插槽查找由第一个或第二个按钮设置的变量，然后显示它。我意识到这不是一个完美的例子，但我认为它说明了这个概念。

我尝试过的方法是：

1.  我记得我在学校上的 VB 课上的方式...创建一个隐藏的行编辑并将值存储在那里直到我需要它。可悲的是，这将意味着对一个复杂项目进行大量的隐藏线编辑。呸。

2.  在 int main() 函数中创建一个全局变量，并在所有函数中设置该变量。这可能会让人感到困惑，任何东西都可以访问它。所以这可能很混乱。

3.  我注意到桌面应用程序的 QT 似乎有一个名为“ui”的类。我曾想过用 getter 和 setter 创建我自己的类，并从 ui 中继承一切......我相信这会奏效，但似乎有点矫枉过正。

4.  将信息保存在 tmp 文件中并阅读。当我只需要短期变量时，这似乎也很痛苦。

有没有简单的方法来完成这个任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T03:07:16.633

您可以使用 QSignalMapper 并将第一个和第二个按钮连接到它：

```
signalMapper = new QSignalMapper(parent);
connect(firstButton, SIGNAL(clicked()), signalMapper, SLOT(map()));
connect(secondButton, SIGNAL(clicked()), signalMapper, SLOT(map()));
signalMapper->setMapping(firstButton, 1);
signalMapper->setMapping(firstButton, 2); 
```

然后将`signalMapper`' 的`mapped(int)`信号连接到您的插槽：

```
connect(signalMapper, SIGNAL(mapped(int)), yourObj, SLOT(yourSlot(int))); 
```

单击第一个按钮时，将使用值 1 作为参数调用您的插槽。单击第二个按钮时，2 将传递到您的插槽。然后，您可以将传递的值保存在您喜欢的任何位置（例如在 . 的成员变量中`yourObj`）

# jquery - 获取动态填充选择的值

> ID：13042276
> 
> 赞同：2
> 
> 时间：2012-10-24T02:43:19.207
> 
> 标签：jquery

我有一个`<select>`从数据库中填充的：

```
 $(function(){
    $.ajax({
        type: "GET",
        url: "lib/deleteuser.getusernames.php",
        async: "false",
        success: function(response){
            $("#users").append('<option>' +  response.split(",").join("</option><option>") + '</option>');
        }
    }); 
  }); 
```

（顺便说一句，这很好用）

现在，我正在尝试获取 的值`<select>`并使用它来运行另一个查询，但返回的只是什么都没有，或者“未定义”。

这是我尝试过的：

```
var username = $("#users option:selected").val();
var username = $("#users :selected").val();
var username = $("#users option:selected").text();
var username = $("#users :selected").text(); 
```

我知道`.val()`只获取输入的值，但在这种情况下，选项文本仍然算作输入吗？我尝试`.text()`以防万一，但仍然一无所获。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T02:49:01.037

似乎您正试图在 ajax 完成之前获取输入的值，您应该更改`async: "false",`为 `async: false`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T02:57:30.660

正如 undefined 所说，看起来您的选择器可能在异步 GET 之前。如果你想保留异步行为，你可以试试这个：

```
$(function(){
  $.ajax({
    type: "GET",
    url: "lib/deleteuser.getusernames.php",
    success: function(response){
      $("#users").append('<option>' +  response.split(",").join("</option><option>") + '</option>');
      userSelect();
    }
  });

  var userVal,
      userText,
      userElem;

  var userSelect = function () {
    $( '#users' ).change(function(){
      userVal = $( 'option:selected', this ).val();
      userText = $( 'option:selected', this ).text();
      userElem = $( 'option:selected', this );
    });
  };
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T02:49:48.807

你试过`$("#users").val()`吗？

该[`.val()`方法](http://api.jquery.com/val/)获取（或设置）表单元素的值，包括输入、选择和文本区域。您可以直接在您的选择元素上使用它，而不是尝试使用`option:selected`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T02:50:18.850

试试这个，如果它可以帮助

```
$("#users > option:selected").attr("value") 
```

这对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T02:47:04.627

你有没有尝试过

```
$('#users option').html(); 
```

哪个像innerHTML一样工作？希望这可以帮助。

# android - 从浏览器链接启动 android 应用程序

> ID：13042278
> 
> 赞同：17
> 
> 时间：2012-10-24T02:43:30.827
> 
> 标签：android, android-intent

我在尝试使用我自己的方案从浏览器启动我的应用程序时遇到问题。
代码如下：
清单文件：

```
 <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" 
        android:exported="false">
        <intent-filter>

            <data  android:scheme="allplayer" />

            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.BROWSABLE" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

html文件：

```
<html>
<head>
</head>
<body>
<a href="allplayer://site.com">Test link</a>
</body>
</html> 
```

如果我单击链接，我的应用程序将无法启动。我做了很多研究，但找不到答案。
如果我用**http更改****allplayer**一切正常。 从[这个链接](https://stackoverflow.com/a/6139783/1503155)，我了解到不建议使用您自己的方案。这是否意味着您自己的计划行不通？[这里](https://stackoverflow.com/q/3469908/1503155) 的人正在使用他自己的方案，从他的反馈来看，它似乎正在工作。 我错过了什么吗？

 *** * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-24T07:50:01.810

我花了 6 个小时才找出问题所在。以某种方式将导出设置为 false 导致了所有问题：`android:exported="false"`. 当我将其设置为 true 时，它​​就像一个魅力。

很有趣，因为我首先把它放在那里以避免`Exported activity does not require permission`警告。将其设置回 true，带回警告，但它现在正在工作。

解决方案如下。希望它可以帮助其他人节省时间。

```
<activity
      android:name=".MainActivity"
      android:label="@string/title_activity_main" 
      android:exported="true">
      <intent-filter>
          <data  android:scheme="allplayer" />
          <action android:name="android.intent.action.VIEW" />
          <category android:name="android.intent.category.BROWSABLE" />
          <category android:name="android.intent.category.DEFAULT" />
      </intent-filter>
  </activity> 
```**

# java - 需要在struts2中填充请求参数而不进行验证

> ID：13042281
> 
> 赞同：1
> 
> 时间：2012-10-24T02:43:55.117
> 
> 标签：java, validation, struts2, interceptor

我有一个带有方法 searchUser() 的 struts Action 类，现在我想调用这个方法。所以我在 struts.xml 中有以下配置

```
<action name="searchUser" method="searchUser" class="test.User">
<interceptor-ref name="validation">
    <param name="excludeMethods">searchUser</param>
</interceptor-ref>
<result name="success">/jsp/userAdded.jsp</result>
<result name="input">/jsp/user.jsp</result>
<result name="error">/jsp/error.jsp</result>
</action> 
```

我的 test.User.java 类

```
public class UserAction extends ActionSupport{
  String loginId;
  //getter and setter method for loginId;

public String searchUser(){
   System.out.println(getLoginId());
   return SUCCESS;
} 
```

}

现在，当我尝试使用 URL :/app/searchUser.action?loginId=1 访问此操作时，根据我的理解，控制台应该显示“1”，但它为空。我想从 URL 而不是从 struts 表单访问操作。

如果我删除验证拦截器，那么我得到“1”。我想跳过验证，所以请帮助我如何在没有验证的情况下获得值“1”，还有其他方法吗？我想在不使用验证的情况下获取请求参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T05:52:23.907

您也可以更改默认包的配置，而不是在操作中执行它：

```
<package name="default" extends="struts-default">
    <interceptors>
        <interceptor-stack name="defaultStack">
            <interceptor-ref name="exception" />
            <interceptor-ref name="alias" />
            <interceptor-ref name="servletConfig" />
            <interceptor-ref name="prepare" />
            <interceptor-ref name="i18n" />
            <interceptor-ref name="chain" />
            <interceptor-ref name="modelDriven" />
            <interceptor-ref name="fileUpload" />
            <interceptor-ref name="staticParams" />
            <interceptor-ref name="params" />
            <interceptor-ref name="conversionError" />
            <interceptor-ref name="validation">
                <param name="excludeMethods">searchUser</param>
            </interceptor-ref>
            <interceptor-ref name="workflow" />
        </interceptor-stack>
    </interceptors>
    ....
<package /> 
```

在那里，您可以配置一些操作，并且可以使用 * 符号。例如：

```
<param name="excludeMethods">search*, remove*</param> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T08:25:59.137

这与验证拦截器行为本身无关。通过配置您的操作

```
<action name="searchUser" method="searchUser" class="test.User">
<interceptor-ref name="validation">
    <param name="excludeMethods">searchUser</param>
</interceptor-ref>
<result name="success">/jsp/userAdded.jsp</result>
<result name="input">/jsp/user.jsp</result>
<result name="error">/jsp/error.jsp</result>
</action> 
```

您已经告诉 struts 使用验证拦截器，并且只使用验证拦截器来执行此操作。因此，所有其他拦截器都将被忽略 - 包括负责将 HttpResponse 参数传递到您的操作中的参数拦截器。

当您从配置中删除验证拦截器时，Struts 将使用默认堆栈 - 再次调用参数拦截器，并且您的 HttpResponses 很快就会返回到您的操作中。

你到底想在这里实现什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T04:09:53.537

默认拦截器可能会被覆盖。尝试这个：

```
<action name="searchUser" method="searchUser" class="test.User"> 
  <interceptor-ref name="defaultStack">
    <param name="validation.excludeMethods">searchUser</param>
  </interceptor-ref>
  <result>...</result>
</action> 
```

# iphone - 在模态显示的视图控制器上调用 viewDidLoad

> ID：13042284
> 
> 赞同：0
> 
> 时间：2012-10-24T02:44:28.917
> 
> 标签：iphone, objective-c, ios

我注意到，当我以模态方式呈现视图控制器时，永远不会调用 viewDidLoad 方法。

IE：

```
InfoViewController *v = [[Global get] infoVC];
[self presentModalViewController: v animated: true]; 
```

无论如何我可以让它调用这个吗？我已将 viewDidLoad 代码放在 ViewDidAppear 中，我担心这些项目会在视图中绘制两次？如果打开两次？或者它会从内存中删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T04:29:25.953

viewDidLoad 只会在创建控制器时被调用。因此，如果您的： [[Global get] infoVC] 未分配和返回控制器（返回已创建的控制器），则不会调用 viewDidLoad。在 viewDidAppear 中，调整与控制器相关的视图是安全的。如果您在 viewDidLoad 中创建它们，它们将已经存在。

或者如果你想调用 viewDidLoad 创建一个新的控制器。

```
infoViewController *v = [[InfoViewController alloc] initWithNibName:nil bundle:nil];
[self presentModalViewController: v animated: true];
[v release]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T03:42:50.867

如果您只是将项目添加到您的视图中`viewDidLoad`，则可以将该代码放入其中`loadView`。

# asp.net-mvc - Mono 4.5 配置文件，实体框架 Npgsql - NpgsqlSystem.InvalidCastException 无法从源类型转换为目标类型

> ID：13042289
> 
> 赞同：1
> 
> 时间：2012-10-24T02:44:45.403
> 
> 标签：asp.net-mvc, entity-framework, mono, npgsql

我收到“System.InvalidCastException 无法从源类型转换为目标类型。” 尝试在后端使用 mono 4.5 配置文件和 postgres 从 asp.net mvc3 访问数据库时。

这是我的代码的样子：

```
public class User
{
    public int Id { get; set; }
    public string Username { get; set; }
    public string PasswordHash { get; set; }
    public string PasswordSalt { get; set; }    
} // class 
```

应用上下文：

```
using System;
using System.Data.Entity;
using Npgsql;
using NpgsqlTypes;

namespace Web
{
public class AppContext : DbContext
{
    public DbSet<User> Users { get; set; }

    protected override void OnModelCreating (DbModelBuilder modelBuilder)
    {
        base.OnModelCreating (modelBuilder);
    }   
} // class
} // namespace 
```

数据库架构 (dbo)

```
CREATE TABLE dbo."Users"
(
"Id" integer NOT NULL DEFAULT nextval('dbo."Users_Id_seq"'::regclass),
"Username" character varying(50) NOT NULL,
"PasswordHash" character varying(255) NOT NULL,
"PasswordSalt" character varying(128) NOT NULL,
CONSTRAINT pk_users_id PRIMARY KEY ("Id")
)

public class HomeController : Controller
{
    public ActionResult Index ()
    {
        var db = new AppContext();
        var users = db.Users.Find(1);
        ViewData ["Message"] = "Welcome to ASP.NET MVC on Mono!";
        return View ();
    }
} 
```

我得到的错误是：

```
System.InvalidCastException

Cannot cast from source type to destination type.

Description: HTTP 500.Error processing request.
Details: Non-web exception. Exception origin (name of application or object): Npgsql.
Exception stack trace:
at Npgsql.NpgsqlFactory.CreateConnection () [0x00000] in /private/tmp/source/bockbuild/profiles/mono-mac-release/build-root/mono-2.11/_build/mono-2.11.git/mcs/class/Npgsql/Npgsql/NpgsqlFactory.cs:64
at System.Data.Entity.Internal.LazyInternalConnection.CreateConnectionFromProviderName (string) [0x00007] in /private/tmp/source/bockbuild/profiles/mono-mac-release/build-root/mono-2.11/_build/mono-2.11.git/external/entityframework/src/EntityFramework/Internal/LazyInternalConnection.cs:379
at System.Data.Entity.Internal.LazyInternalConnection.InitializeFromConnectionStringSetting (System.Configuration.ConnectionStringSettings) [0x00045] in /private/tmp/source/bockbuild/profiles/mono-mac-release/build-root/mono-2.11/_build/mono-2.11.git/external/entityframework/src/EntityFramework/Internal/LazyInternalConnection.cs:368
at System.Data.Entity.Internal.LazyInternalConnection.TryInitializeFromAppConfig (string,System.Data.Entity.Internal.AppConfig) [0x0000e] in /private/tmp/source/bockbuild/profiles/mono-mac-release/build-root/mono-2.11/_build/mono-2.11.git/external/entityframework/src/EntityFramework/Internal/LazyInternalConnection.cs:310
at System.Data.Entity.Internal.LazyInternalConnection.Initialize () [0x00047] in /private/tmp/source/bockbuild/profiles/mono-mac-release/build-root/mono-2.11/_build/mono-2.11.git/external/entityframework/src/EntityFramework/Internal/LazyInternalConnection.cs:242
at System.Data.Entity.Internal.LazyInternalConnection.get_ProviderName () [0x00000] in /private/tmp/source/bockbuild/profiles/mono-mac-release/build-root/mono-2.11/_build/mono-2.11.git/external/entityframework/src/EntityFramework/Internal/LazyInternalConnection.cs:118
at System.Data.Entity.Internal.LazyInternalContext.get_ProviderName () [0x00000] in /private/tmp/source/bockbuild/profiles/mono-mac-release/build-root/mono-2.11/_build/mono-2.11.git/external/entityframework/src/EntityFramework/Internal/LazyInternalContext.cs:290
at System.Data.Entity.Internal.DefaultModelCacheKeyFactory.Create (System.Data.Entity.DbContext) [0x00022] in /private/tmp/source/bockbuild/profiles/mono-mac-release/build-root/mono-2.11/_build/mono-2.11.git/external/entityframework/src/EntityFramework/Internal/DefaultModelCacheKeyFactory.cs:20
at System.Data.Entity.Internal.LazyInternalContext.InitializeContext () [0x00091] in /private/tmp/source/bockbuild/profiles/mono-mac-release/build-root/mono-2.11/_build/mono-2.11.git/external/entityframework/src/EntityFramework/Internal/LazyInternalContext.cs:388
at System.Data.Entity.Internal.InternalContext.Initialize () [0x00000] in /private/tmp/source/bockbuild/profiles/mono-mac-release/build-root/mono-2.11/_build/mono-2.11.git/external/entityframework/src/EntityFramework/Internal/InternalContext.cs:421
at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType (System.Type) [0x00000] in /private/tmp/source/bockbuild/profiles/mono-mac-release/build-root/mono-2.11/_build/mono-2.11.git/external/entityframework/src/EntityFramework/Internal/InternalContext.cs:650
at System.Data.Entity.Internal.Linq.InternalSet`1<Web.Users>.Initialize () <0x0006f>
at System.Data.Entity.Internal.Linq.InternalSet`1<Web.Users>.get_InternalContext () <0x00028>
at System.Data.Entity.Internal.Linq.InternalSet`1<Web.Users>.Find (object[]) <0x0002e>
at System.Data.Entity.DbSet`1<Web.Users>.Find (object[]) <0x0002f>
at Web.Controllers.HomeController.Index () [0x0001c] in /Users/nix/Documents/Projects/Dot.NET/Store/Web/Controllers/HomeController.cs:15
at (wrapper dynamic-method) object.lambda_method (System.Runtime.CompilerServices.Closure,System.Web.Mvc.ControllerBase,object[]) <IL 0x00006, 0x0003f>
at System.Web.Mvc.ActionMethodDispatcher.Execute (System.Web.Mvc.ControllerBase,object[]) [0x00000] in /private/tmp/source/bockbuild/profiles/mono-mac-release/build-root/mono-2.11/_build/mono-2.11.git/mcs/class/System.Web.Mvc3/Mvc/ActionMethodDispatcher.cs:27
at System.Web.Mvc.ReflectedActionDescriptor.Execute (System.Web.Mvc.ControllerContext,System.Collections.Generic.IDictionary`2<string, object>) [0x00074] in /private/tmp/source/bockbuild/profiles/mono-mac-release/build-root/mono-2.11/_build/mono-2.11.git/mcs/class/System.Web.Mvc3/Mvc/ReflectedActionDescriptor.cs:84
at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod (System.Web.Mvc.ControllerContext,System.Web.Mvc.ActionDescriptor,System.Collections.Generic.IDictionary`2<string, object>) [0x00000] in /private/tmp/source/bockbuild/profiles/mono-mac-release/build-root/mono-2.11/_build/mono-2.11.git/mcs/class/System.Web.Mvc3/Mvc/ControllerActionInvoker.cs:173
at System.Web.Mvc.ControllerActionInvoker/<InvokeActionMethodWithFilters>c__AnonStorey3B.<>m__46 () [0x00014] in /private/tmp/source/bockbuild/profiles/mono-mac-release/build-root/mono-2.11/_build/mono-2.11.git/mcs/class/System.Web.Mvc3/Mvc/ControllerActionInvoker.cs:216
at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter (System.Web.Mvc.IActionFilter,System.Web.Mvc.ActionExecutingContext,System.Func`1<System.Web.Mvc.ActionExecutedContext>) [0x00033] in /private/tmp/source/bockbuild/profiles/mono-mac-release/build-root/mono-2.11/_build/mono-2.11.git/mcs/class/System.Web.Mvc3/Mvc/ControllerActionInvoker.cs:189 
```

关于发生了什么的任何建议或线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-13T22:35:03.937

两步修复：

1）确保在您的参考文献中引用了mono附带的默认`npgsql`库，而不是指向不存在的特定位置的库。

2)将您要使用`Npgsql.dll`的版本的文件放入项目的 bin 目录中。`Npgsql`当你去运行你的项目或测试时，它会自动使用这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T04:39:41.393

根据我的经验，这个问题是由编译器在 Npgsql 的 dll 和 gac 版本之间混淆引起的。

你是在引用 Npgsql 的 dll 吗？如果您是并且不需要它，请尝试删除引用和 dll 并将其替换为单声道中的 Npgsql 包。

如果您确实需要 Npgsql 的 dll，那么您将需要从项目中删除对它的所有引用，并在 gac 中替换它。您可以通过转到 Npgsql dll 的目录并将其替换为您的 Npgsql dll 来快速执行此操作。目录的位置将取决于您的操作系统。

*   对于 Ubuntu，它位于：/usr/lib/mono/gac/Npgsql
*   对于 Mac，它位于：/Library/Frameworks/Mono.framework/Home/lib/mono/gac/Npgsql

请注意，通过这样做，您的 Npgsql dll 可能会在您下次升级 Mono 时被替换。

# python - 网页版 | 如何使用 db.select 查询设置 form.Dropdown args

> ID：13042291
> 
> 赞同：1
> 
> 时间：2012-10-24T02:45:24.933
> 
> 标签：python, python-2.7, web.py

我错过了一些相当简单的东西，但无法弄清楚如何正确读取 db.select 查询以在表单参数中使用。

示例代码：

```
class index:
    form = web.form.Form(form.Dropdown(name='option',args=[]))

    def GET(self):
            dbresult = db.select('test')
            options = db.select('test',what='name',group='name')
            form = self.form()
            form.option.args = options
            return render.index(dbresult,form) 
```

此返回 (Storage {'name': u'google'}) 作为表单参数之一。我想要的只是谷歌回读。我知道我错过了一些简单的东西，任何指针？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:29:55.680

尝试这个：

```
class index:
    form = web.form.Form(form.Dropdown(name='option',args=[]))

    def GET(self):
            dbresult = db.select('test')
            options = db.select('test',what='name',group='name')
            form = self.form()
            form.option.args = [(o.name, o.name) for o in options]
            return render.index(dbresult,form) 
```

[下拉](http://webpy.org/form#dropdown)参数应该是列表或列表列表。第一个是选项的值（我通常将其设置为`(o.name, o.name)`列的 id），第二个是它的描述。如果它们相同，那么`[o.name for o in options]`也应该工作。

# actionscript-3 - 为音乐播放器制作快进按钮和快退按钮？

> ID：13042292
> 
> 赞同：2
> 
> 时间：2012-10-24T02:45:31.940
> 
> 标签：actionscript-3, mp3, audio-player

我需要制作一个快进按钮和快退按钮我拥有其他所有东西只需要这两个按钮，我不知道该怎么做。我也在使用 Flash，动作脚本 3

我看过一堆例子，但他们都做的和我不同。这是我学习如何加载曲目并制作播放和暂停按钮的方式，但我不确定如何添加倒带和前进

这是我到目前为止所拥有的：

```
import flash.media.Sound;
import flash.media.SoundChannel;

import flash.net.URLRequest;

import flash.events.MouseEvent;
import flash.events.Event;

var myChannel:SoundChannel = new SoundChannel;
var track:Sound;

var trackToLoad:String;
var trackName:String;
var trackTime:String;

function stopTrack(e:MouseEvent) :void {
        myChannel.stop();
}

function reStartTrack(e:MouseEvent) :void {
        myChannel.stop();
        myChannel = track.play();
}

function playTrack(e:MouseEvent) :void {
        switch(e.target.name) {
    case "track1":
    trackToLoad = "musicForImport/11 Everlong.mp3";
    trackName = "Foo Fighters • Everlong"
    break;

    case "track2":
    trackToLoad = "musicForImport/02 War Is a Cemetery.mp3";
    trackName = "Gob • War is a Cemetery"
    break;

    case "track3":
    trackToLoad = "musicForImport/03 The Wind Cries Mary [Stereo].mp3";
    trackName = "Jimi Hendrix • The Wind Cries Mary"
    break;

    case "track4":
    trackToLoad = "musicForImport/03 Work.mp3";
    trackName = "Jimmy Eat World • Work"
    break;

    case "track5":
    trackToLoad = "musicForImport/02 Jumpin' Jack Flash.mp3";
    trackName = "The Rolling Stones • Jumpin' Jack Flash"
    break;

    case "track6":
    trackToLoad = "musicForImport/04 Don't Walk Away Eileen.mp3";
    trackName = "Sam Roberts • Don't Walk Away Eileen"
    break;

    case "track7":
    trackToLoad = "musicForImport/Brace Yourself.mp3";
    trackName = "State of Us • Brace Yourself"
    break;

    case "track8":
    trackToLoad = "musicForImport/02 Wrong Way.mp3";
    trackName = "Sublime • Wrong Way"
    break;

    case "track9":
    trackToLoad = "musicForImport/04 Fat Lip.mp3";
    trackName = "Sum 41• Fat Lip"
    break;

    case "track10":
    trackToLoad = "musicForImport/The Boys Are Back In Town.mp3";
    trackName = "Thin Lizzy • The Boys Are Back In Town"
    break;
}

track = new Sound;
track.load(new URLRequest(trackToLoad));
myChannel.stop();
myChannel = track.play();

displayTrackName.text = ":: " + trackName + " ::";
displayTrackName.x  = 103;
displayTrackName.y  = 440;
}

track1.addEventListener(MouseEvent.CLICK, playTrack);
track2.addEventListener(MouseEvent.CLICK, playTrack);
track3.addEventListener(MouseEvent.CLICK, playTrack);
track4.addEventListener(MouseEvent.CLICK, playTrack);
track5.addEventListener(MouseEvent.CLICK, playTrack);   
track6.addEventListener(MouseEvent.CLICK, playTrack);
track7.addEventListener(MouseEvent.CLICK, playTrack);
track8.addEventListener(MouseEvent.CLICK, playTrack);
track9.addEventListener(MouseEvent.CLICK, playTrack);
track10.addEventListener(MouseEvent.CLICK, playTrack);

stopTrackButton.addEventListener(MouseEvent.CLICK, stopTrack);
playTrackButton.addEventListener(MouseEvent.CLICK, reStartTrack); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:53:19.680

倒带和快进功能由 Timer 实现：

```
import flash.media.Sound;
import flash.events.MouseEvent;
import flash.utils.Timer;
import flash.events.TimerEvent;
import flash.media.SoundChannel;

const REWIND_SPEED:int = 1000;

var sound:Sound = new MySound();
var timer:Timer = new Timer(100);
var soundChannel:SoundChannel;
var oldSoundChannel:SoundChannel; 

soundChannel = sound.play();

rewindBtn.addEventListener(MouseEvent.CLICK, rewindBtn_clickHandler);
stopRewindBtn.addEventListener(MouseEvent.CLICK, stopRewindBtn_clickHandler);
timer.addEventListener(TimerEvent.TIMER, timer_timerHandler);

function rewindBtn_clickHandler(event:MouseEvent):void
{
timer.start();
}

function stopRewindBtn_clickHandler(event:MouseEvent):void
{
timer.stop();
}

function timer_timerHandler(event:TimerEvent):void
{
if (!soundChannel)
    return;

if (soundChannel.position == sound.length)
{
    timer.stop();
}
else
{
        oldSoundChannel = soundChannel; 
    soundChannel = sound.play(oldSoundChannel.position + REWIND_SPEED);
    oldSoundChannel.stop();
} 
```

}

# shopify - 客户上传的文件是否计入商家存储限制？

> ID：13042293
> 
> 赞同：0
> 
> 时间：2012-10-24T02:45:34.437
> 
> 标签：shopify

使用订单项属性，可以让客户在产品订单中包含文件附件 (http://wiki.shopify.com/Line_Item_Properties#File_attachments)。这些文件上传到[http://static.shopify.com/s/files](http://static.shopify.com/s/files) ...

这些上传的文件是否计入商店的存储限制？有没有办法手动或通过 api 列出/获取/删除这些项目？文件是否保留或定期清理？如果客户从购物车中删除了带有文件上传的商品，该文件是被删除还是仍然存在？如果它仍然存在，是否在任何地方都存在对它的引用？空载燕子的空速是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:00:46.230

我想 Shopify 只是在吃存储而不是计量它。存储很便宜...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-28T14:07:14.587

我刚刚就此事与 Shopify 取得联系，他们已确认上传到 CDN 的文件（客户上传的文件）不能被用户编辑或删除，因此不计入商家的存储限制。

显然，他们正在开发一个 API，以允许客户上传的内容出现在商家的文件中。我推测一旦发生这种情况，它*可能*会计入存储限制，但暂时不用担心。

# android - 手机重启时防止锁屏，因此应用程序可以立即运行

> ID：13042295
> 
> 赞同：1
> 
> 时间：2012-10-24T02:45:52.177
> 
> 标签：android

在过去的几周里，我终于让我的很多应用程序正常工作了。该应用程序应该在启动时运行，它确实如此。但是，当手机重新启动时（比如在电池耗尽后）出现的锁定屏幕可以防止这种情况发生。

我可以使用什么设置或代码来防止手机以锁定屏幕启动？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-24T02:57:56.527

尝试这个

```
//add permission to AndroidManifest.xml

<uses-permission android:name="android.permission.WAKE_LOCK"></uses-permission>

WakeLock wl;//in class

//in onCreate method initiate them
PowerManager pm=(PowerManager)getSystemService(POWER_SERVICE);
wl=pm.newWakeLock(PowerManager.FULL_WAKE_LOCK, "anything");

//in onResume() method get lock
wl.acquire();

//in onPause() method release lock
wl.release(); 
```

# ruby - 在 Ruby 1.9.3 中通过 RSpec 配置包含命名空间模块

> ID：13042298
> 
> 赞同：6
> 
> 时间：2012-10-24T02:46:22.320
> 
> 标签：ruby, rspec, namespaces, ruby-1.9.3

我喜欢使用 RSpec 的 include 配置方法来包含仅用于命名空间的模块，这样我就不必为它们的内部类和模块使用完全限定的名称。这适用于 Ruby 1.9.2 中的 RSpec 2.11.0。但是现在在 Ruby 1.9.3 上这不再起作用了。我怎样才能让它再次工作？

这里有一个例子 foobar_spec.rb：

```
module Foo
  class Bar
  end
end

RSpec.configure do |config|
  config.include Foo
end

describe Foo::Bar do
  it "should work" do
    Bar.new
  end
end 
```

如果您通过以下命令调用它：

```
rspec foobar_spec.rb 
```

它可以在 Ruby 1.9.2 中正常工作。但它会在 Ruby 1.9.3 中引发以下错误：

```
Failure/Error: Bar.new
     NameError:
       uninitialized constant Bar 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-24T16:11:14.747

这个[邮件列表条目](https://groups.google.com/forum/?fromgroups=#!msg/ruby-talk-google/EhH0Ilctev4/nsHdrAviA7UJ)讨论了 1.9.3 中关于如何查找常量的根本变化，所以它看起来像是一个故意的变化。

您可以确定整个测试的范围，如下所示：

```
module Foo
  describe Bar do
    it "should work" do
      Bar.new
    end
  end
end 
```

作为另一种解决方案，您可以将新对象创建提取到 a`before`或`let`仅将对象定义为`subject`测试的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-13T06:44:51.427

如果您的目标是只需要指定一次命名空间，那么惯用的 RSpec 方法是使用[describe_class](https://www.relishapp.com/rspec/rspec-core/docs/metadata/described-class)。像这样：

```
module Foo
  class Bar
  end
end

describe Foo::Bar do
  it "should work" do
    described_class.new
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T15:49:48.390

您需要在 it 块和 describe 参数中使用 Foo::Bar 。

# ios - 在 iPhone 锁定屏幕上显示 CFUserNotification

> ID：13042301
> 
> 赞同：2
> 
> 时间：2012-10-24T02:46:51.177
> 
> 标签：ios, notifications, lockscreen, springboard, alertview

我正在开发一个需要在锁定屏幕上显示一些消息的 iPhone 应用程序。我尝试使用本地通知或 CFUserNotification，但它们都无法在锁定屏幕顶部显示消息。对于 CFUserNotification 我已经尝试了 kCFUserNotificationAlertTopMostKey （参考[这个类似的问题](https://stackoverflow.com/questions/2199642/display-cfusernotificationdisplayalert-on-iphone-lock-screen?answertab=active#tab-top)），但它仍然不起作用。我不打算挂跳板，因为我的手机没有越狱。我发现一个应用程序确实实现了它，并且我已经在我的非越狱 iPhone iOS 6.0 上进行了测试，不知道如何实现它。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T00:46:41.687

`[dict setObject:[NSNumber numberWithBool:YES] forKey:(NSString *)kCFUserNotificationAlertTopMostKey];`

它确实有效

# jquery - .post() 无法正确读取的问题

> ID：13042305
> 
> 赞同：0
> 
> 时间：2012-10-24T02:47:22.303
> 
> 标签：jquery

所以我有一个小链接器，我正在尝试使用它，当用户输入他们的用户名和密码时，它会连接到这个站点而不会真正离开页面，但这样做有一些困难。我在 jquery 中使用 .post() 发送到 aspx.page。

当我点击提交时，我被发送到该站点，我不希望这样，而且它不会登录。

代码 -

```
<div class="linkdimesAccount">

                    <form name="aspnetForm" method="post" action="http://1betvegas.com/default.aspx" onkeypress="javascript:return WebForm_FireDefaultButton(event, 'ctl00_MainContent_ctlLogin_BtnSubmit')" id="aspnetForm" style="margin: 0 0 0 0;">
            <script type="text/javascript">
                //<![CDATA[
                var theForm = document.forms['aspnetForm'];
                if (!theForm) {
                    theForm = document.aspnetForm;
                }
                function __doPostBack(eventTarget, eventArgument) {
                    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
                        theForm.__EVENTTARGET.value = eventTarget;
                        theForm.__EVENTARGUMENT.value = eventArgument;
                        theForm.submit();
                    }
                }
                //]]>
                </script>
             <div>
            <input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="">
            <input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="">
            <input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="eYjk1H7gGdxNJmuevBY9L0vo1lS2NWgmApCJFEQznQr+AwZaPf/hYV4iGSnPCSknyHjESN/BgHueeChVuGgmN4wtWFCdUaYPJRItirNF0nIBHe9Q">
            </div>
            <script src="/WebResource.axd?d=FrT3YL7-WvrI_DKD4vsDo2d0Al_8j_u_HUym76C9Z5ggdJlIe1yu5cWI_jZDYcizjTU0SkefrocS8ATa0&amp;t=634604245351482412" type="text/javascript"></script>
            <div>

                <input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="yepc3zJ4Kjr5ru/aXm+s9SqYXyFoM+cwIlWPI69lDMnO4eybZJ1cM1pfzowM47Ggezne5505JNUx/VGe3XO8OCmvZnghqv8ZCuJm+yffjs4inz2n6ctjK/0F/qER0ARSznB8iJsMIZ7HxPXA/Stv+0ubH0U=">
            </div>
            <h2>Link your 5dimes account</h2>

                <table>
                    <tr>
                    <?php
                    if ($dimesaccount == 1){
                    echo "<h2 style='color:red;'> Please note your account is already linked.  If password or other information has changed please re-enter your username and password";
                    }
                    ?>
                        <td>
                        Username:
                        </td>
                         <td>
                            <input name="ctl00$MainContent$ctlLogin$_UserName" type="text" size="15" id="ctl00_MainContent_ctlLogin__UserName" accesskey="u" tabindex="60" class="login_input">
                        </td>
                    </tr>
                    <tr>
                     <td>
                        Password:
                        </td>
                    <td>
                        <input name="ctl00$MainContent$ctlLogin$_IdBook" type="hidden" id="ctl00_MainContent_ctlLogin__IdBook">
                        <input name="ctl00$MainContent$ctlLogin$Redir" type="hidden" id="ctl00_MainContent_ctlLogin_Redir" value="wager/welcome.aspx">
                        <input name="ctl00$MainContent$ctlLogin$_Password" type="password" size="15" id="ctl00_MainContent_ctlLogin__Password" accesskey="p" tabindex="61" class="login_input">
                    </td>
                    </tr>
                    <tr>
                    <td>
                        <input type="submit" name="ctl00$MainContent$ctlLogin$BtnSubmit" value="Link" id="ctl00_MainContent_ctlLogin_BtnSubmit" class="login_input" style="text-transform: uppercase;">
                    </td>
                    </tr>

                </table>

        </div><!-------.linkdimesAccount ------>
        </form>
        <div id="result"></div>
        <script>
  /* attach a submit handler to the form */
  $("#aspnetForm").submit(function(event) {

    /* stop form from submitting normally */
    event.preventDefault(); 

    /* get some values from elements on the page: */
    var $form = $( this ),
        term = $form.find( 'input[name="__EVENTTARGET"]' ).val(),
        term1 = $form.find( 'input[name="__EVENTARGUMENT"]' ).val(),
        term2 = $form.find( 'input[name="__VIEWSTATE"]' ).val(),
        term3 = $form.find( 'input[name="ctl00$MainContent$ctlLogin$_UserName"]' ).val(),
        term4 = $form.find( 'input[name="ctl00$MainContent$ctlLogin$_IdBook"]' ).val(),
        term5 = $form.find( 'input[name="ctl00$MainContent$ctlLogin$Redir"]' ).val(),
        term6 = $form.find( 'input[name="ctl00$MainContent$ctlLogin$_Password"]' ).val(),
        term7 = $form.find( 'input[name="ctl00$MainContent$ctlLogin$BtnSubmit"]' ).val(),

        url = $form.attr( 'action' );

    /* Send the data using post and put the results in a div */
    $.post( url, { s: term, s: term1, s: term2, s: term3, s: term4, s: term5, s: term6, s: term7 },
      function( data ) {
          var content = $( data ).find( '#content' );
          $( "#result" ).empty().append( content );
      }
    );
  });
</script> 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:02:11.307

这是由于您的文档上的 javascript 错误导致您的代码无法正常工作造成的。

对于调试，请在发布后尝试`return false;`在代码末尾添加。或尝试设置其他按钮来触发提交。喜欢

```
$("#someButtonButNutSubmit").click(function(){

var $form = $( this ),
        term = $form.find( 'input[name="__EVENTTARGET"]' ).val(),
....

}); 
```

检查您的 JavaScript/jQuery 失败的原因。检查浏览器控制台日志以获取详细信息

# c# - 如何动态更改 oledb 连接字符串，使其可用于每台目标机器？

> ID：13042306
> 
> 赞同：2
> 
> 时间：2012-10-24T02:47:30.913
> 
> 标签：c#, connection-string

我正在用 c# 开发一个 win 表单项目。我遇到了一个问题，我正在使用一个`.mdb`db 文件和一个连接字符串来使用它，例如`@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\Users\mohan\Documents\VisualStudio2010\Projects\AotoInformation\AotoInformation\common\appDb.mdb;Persist Security Info=True"`

现在我正在制作`.exe`我的项目文件，但是当有人将它安装`.exe`到他的系统时，这个连接字符串无法工作。

无论用户在何处安装应用程序，如何获得可在每台目标计算机上使用的连接字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:41:26.607

连接字符串只是一个字符串。所以最初你可以保留它，就像 `..Data Source=@mdbFilePath..`在请求连接字符串时一样，`@mdbFilePath`用你的 mdb 文件路径替换......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T03:38:20.487

在代码而不是配置文件中设置连接字符串。您可以使用 AppDomain.CurrentDomain.BaseDirectory 找到应用根路径。

# boolean-logic - 布尔代数简化为最低形式

> ID：13042307
> 
> 赞同：0
> 
> 时间：2012-10-24T02:47:43.020
> 
> 标签：boolean-logic, boolean-expression, boolean-operations

我正在为一门课重新学习布尔代数，但我似乎无法进一步简化这个表达式。它有可能完全简化，但我想要第二个意见。

表达方式：

```
(!a*!b*!c)+(!c*(b*a))+(!a*(c*b)) where * is and ; + is or 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:07:40.757

我相信你是对的。没有什么可进一步减少的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T03:15:19.087

第一的：

```
(!a * !b * !c) == !(a + b + c) 
```

第二：

```
(!c * (b * a)) == (!c * b * a) 
```

现在第二个和第三个 ORed 部分可以简化为：

```
b * a ^ c 
```

其中 ^ 是 XOR（异或：a 或 c，但不是两者）。如果您考虑运算符的优先顺序，您可能可以丢弃更多的括号，但为了安全起见：

```
!(a + b + c) || (b * a ^ c) 
```

# java - Java：可变大小的 int 数组

> ID：13042310
> 
> 赞同：-2
> 
> 时间：2012-10-24T02:47:58.403
> 
> 标签：java

嘿伙计们，我正在尝试数组列表，我需要创建一个可变大小的整数数组。我不知道我是否正确实施它。我该怎么做呢？有人可以帮我解决语法吗？

```
 Integer[] ints = new Integer[x];
    static List<Integer> ints = new ArrayList<Integer>(); 
```

我希望能够做类似 ints.add(0); 之类的事情。等等

编辑：代码：

```
 Integer[] ints = new Integer[x]; 
  static List<Integer> ints = new ArrayList<Integer>(); 
  ints.clear(); 
  for (int counter2 = 0; counter2 < 50; counter2++) { 
      if (list[counter2].userActive == true) { 
        if (list[counter2].getLastName().equals(lastName) || (lastName=="")) { 
           if ((list[counter2].getFirstName().equals(firstName))||(firstName=="")
                && (list[counter2].userActive == true)) 
                ints.add(counter2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T02:51:02.643

标准 Java api 没有可变大小的基元数组（引用类型除外）。有一些第三方库确实提供了这个功能（[GNU trove](http://trove.starlight-systems.com/)被广泛使用；请参阅[此处](http://java.dzone.com/articles/java-collections-%E2%80%93-are-there)获取优质库列表），或者您可以构建自己的库。

如果您不介意装箱/拆箱的开销，您可以使用`ArrayList<Integer>`：

```
List<Integer> list = new ArrayList<Integer>(); 
```

**编辑**查看您发布的代码，我看到的唯一错误是您同时声明`ints`为 an`Integer[]`和 as `static List<Integer>`。您不能两次声明相同的变量。摆脱`Integer[]`声明，其余代码看起来应该正常运行（至少是关于将整数值添加到可变大小列表的部分；我对您的逻辑一无所知）。

# c++ - 字符串文字作为 VS 2012 上的环境变量

> ID：13042314
> 
> 赞同：0
> 
> 时间：2012-10-24T02:49:02.163
> 
> 标签：c++, macros, visual-studio-2005, visual-studio-2012

我有一个**VS 2005**应用程序。用户定义的宏在属性表中定义，以将字符串文字输入构建环境。例如 -

```
Build_Ver, From_Build_Server=""3.1.1234"" 
```

在上述情况下，`Build_Ver`是宏，它的值是`From_Build_Server=""3.1.1234""`。请注意，在 VS2005 的情况下，两对双引号是必需的。如果仅使用一对双引号，则宏值被视为`3.1.1234`for `From_Build_Server`。

```
// /D "From_Build_Server=""3.1.1234"""

std::string str(From_Build_Server);

// works on VS 2005 as the value is "3.1.1234". It strips away 1 pair of "" 
// quotes. 
```

当试图在**VS 2012**上复制相同的内容时，它会做一些不同的事情。对于同一个宏，它给`/D "From_Build_Server=\"\"3.1.1234\"\""`环境带来了 。

```
std::string str(From_Build_Server);  // Fails on VS 2012 as the value is 
                                     // ""3.1.1234"". Not stripping by default. 
```

如果我只使用一对双引号，它可以在 VS 2012 上工作，但在 VS 2005 上会中断。有没有办法让它在 VS 2005 和 VS 2012 上都工作？

# c# - 降序 SQL 语句 GridViewControl Visual Studio C#

> ID：13042315
> 
> 赞同：-1
> 
> 时间：2012-10-24T02:49:04.687
> 
> 标签：c#, sql, visual-studio-2010

我使用 Visual Studio 和 gridview 创建了一个数据库来显示数据。我正在尝试按降序显示数据。我之前创建了一个 FillBy 方法，用于在出现提示时按升序对数据进行排序（SELECT personID、name、age FROM dbo.person BY FillByage）。

我试过 (SELECT personID, name, age FROM dbo.person BY FillByage DESC) 但这会产生错误。

有谁知道如何编写一个成功的降序 SQL 语句？

![在此处输入图像描述](../Images/d7e1c6e4ca498baeda51cd91ba24ed0d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T02:54:36.520

您的 SQL 语句应该是：

```
SELECT personID, name, age
FROM dbo.person
ORDER BY FillByage DESC 
```

注意`ORDER BY`, 不只是`BY`

根据提供的图像，您似乎在 FillByage 和`DESC`关键字之间没有空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T02:54:52.830

你在寻找`ORDER BY`（不只是`BY`）

[http://msdn.microsoft.com/en-us/library/ms188385.aspx](http://msdn.microsoft.com/en-us/library/ms188385.aspx)

# c# - 射线与 XNA 中的 3D 四边形相交？

> ID：13042318
> 
> 赞同：3
> 
> 时间：2012-10-24T02:49:38.760
> 
> 标签：c#, xna, intersect, reverseprojection

所以我成功地制作了一条代表未投影到世界中的鼠标的射线，现在我需要检查该射线是否可以与四边形对象相交，这是我用来获取射线的代码：

```
public Ray GetMouseRay()
    {
        Vector2 mousePosition = new Vector2(cursor.getX(), cursor.getY());

        Vector3 nearPoint = new Vector3(mousePosition, 0);
        Vector3 farPoint = new Vector3(mousePosition, 1);

        nearPoint = viewport.Unproject(nearPoint, projectionMatrix, viewMatrix, Matrix.Identity);
        farPoint = viewport.Unproject(farPoint, projectionMatrix, viewMatrix, Matrix.Identity);

        Vector3 direction = farPoint - nearPoint;
        direction.Normalize();

        return new Ray(nearPoint, direction);
    } 
```

同样，这是我的四边形结构，我用它在 3d 空间中绘制“立方体世界”。public struct Quad { public Vector3 Origin; 公共 Vector3 左上角；公共 Vector3 左下；公共 Vector3 UpperRight; 公共 Vector3 右下角；公共 Vector3 正常；公共 Vector3 向上；公共 Vector3 左；

```
 public VertexPositionNormalTexture[] Vertices;
      public int[] Indexes;
    public short[] Indexes;

    public Quad( Vector3 origin, Vector3 normal, Vector3 up, 
        float width, float height )
    {
        Vertices = new VertexPositionNormalTexture[4];
        Indexes = new short[6];
        Origin = origin;
        Normal = normal;
        Up = up;

        // Calculate the quad corners
        Left = Vector3.Cross( normal, Up );
        Vector3 uppercenter = (Up * height / 2) + origin;
        UpperLeft = uppercenter + (Left * width / 2);
        UpperRight = uppercenter - (Left * width / 2);
        LowerLeft = UpperLeft - (Up * height);
        LowerRight = UpperRight - (Up * height);

        FillVertices();
    }

    private void FillVertices()
    {
        // Fill in texture coordinates to display full texture
        // on quad
        Vector2 textureUpperLeft = new Vector2( 0.0f, 0.0f );
        Vector2 textureUpperRight = new Vector2( 1.0f, 0.0f );
        Vector2 textureLowerLeft = new Vector2( 0.0f, 1.0f );
        Vector2 textureLowerRight = new Vector2( 1.0f, 1.0f );

        // Provide a normal for each vertex
        for (int i = 0; i < Vertices.Length; i++)
        {
            Vertices[i].Normal = Normal;
        }

        // Set the position and texture coordinate for each
        // vertex
        Vertices[0].Position = LowerLeft;
        Vertices[0].TextureCoordinate = textureLowerLeft;
        Vertices[1].Position = UpperLeft;
        Vertices[1].TextureCoordinate = textureUpperLeft;
        Vertices[2].Position = LowerRight;
        Vertices[2].TextureCoordinate = textureLowerRight;
        Vertices[3].Position = UpperRight;
        Vertices[3].TextureCoordinate = textureUpperRight;

        // Set the index buffer for each vertex, using
        // clockwise winding
        Indexes[0] = 0;
        Indexes[1] = 1;
        Indexes[2] = 2;
        Indexes[3] = 2;
        Indexes[4] = 1;
        Indexes[5] = 3;
    }
} 
```

我发现射线类有一个方法 intersects() 它将*平面*结构作为参数，平面结构在构造函数中采用法线和距原点的距离，但我的平面有位置和法线，而不仅仅是距原点的距离，所以我无法转换它们。如何检测我的光线是否与我的四边形结构相交？

编辑：我意识到我不能使用平面结构，因为它不是有限大小并且不包括角，就像我的四边形一样。我现在需要找到一种方法来检测这条射线是否与我创建的四边形相交...

感谢阅读，我意识到这个问题有点冗长，在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T03:17:31.050

我不确定“沿法线到原点的距离”到底是什么意思，但我认为它只是指到原点的距离。您可以从*Vector3*的 length 属性中获得。

如果这不起作用，还有一个平面构造函数，它在*平面*上取三个点：

```
public Plane (
     Vector3 point1,
     Vector3 point2,
     Vector3 point3
) 
```

您可以将其与平面上的任意 3 个点（例如四边形的角）一起使用来创建平面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:39:52.607

由于您使用的是立方体，因此您可以使用该`Ray.Intersects(Plane)`方法。你只需要多几架飞机。

一旦确定了第一个交点，就可以为立方体的每个垂直面构建更多平面。然后你可以使用`Plane.Distance(Vector3)`（我很确定这个或类似的东西存在）来确保你的点在每对垂直平面之间。如果不在它们之间，则可以忽略交叉点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T14:21:04.970

不完全是您问题的直接答案，但也许您发现这很相关。

您是否考虑过构建一个 BoundingBox 对象并使用 Intersects(Ray)？[http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.boundingbox.intersects.aspx](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.boundingbox.intersects.aspx)

编辑1：这是我通常的做法。根据您的数据结构，优化也可能更容易（例如，如果您构建更大的边界框来钻入）。

编辑 2：根据 Niko 的建议：我不想从示例中发布相关代码（因为它总共有几页长以使上下文有意义），但我可以指出你的部分'会感兴趣的。

1.  [从http://xbox.create.msdn.com/en-US/education/catalog/sample/picking_triangle](http://xbox.create.msdn.com/en-US/education/catalog/sample/picking_triangle)下载示例
2.  Cursor.cs 文件的底部包含你已经知道的，计算射线
3.  转到 Game.cs 文件。在那里你会发现 UpdatePicking() 调用 RayIntersectsModel(...) 调用 RayIntersectsTriangle(...)

射线的变换是这部分：

```
Matrix inverseTransform = Matrix.Invert( modelTransform );

ray.Position = Vector3.Transform( ray.Position, inverseTransform );
ray.Direction = Vector3.TransformNormal( ray.Direction, inverseTransform ); 
```

你想去多深（你的选择有多准确）当然取决于你的需要，但你有它。

# php - Zend_Loader_Autoloader 可以用面向对象的语法调用吗？

> ID：13042336
> 
> 赞同：1
> 
> 时间：2012-10-24T02:51:47.587
> 
> 标签：php, zend-framework, zend-autoloader

是否有另一种调用 Zend 框架自动加载器的方法。我有这个网页，我在其中加载 Zend_Loader_Autoloader，然后调用静态方法 ::getInstance()。在遇到很多麻烦想知道为什么我的脚本不起作用之后，我设置了一个这样的测试：

```
<?php 
$libreria='/home/u230474/public_classes/Zend/ZendFramework/library';
set_include_path(get_include_path().PATH_SEPARATOR.$libreria);
require_once('Zend/Loader/Autoloader.php');
$libload = Zend_Loader_Autoloader::getInstance();
if(!$libload) echo "Librer&iacute;a Zend Framework cargada"; else echo "Error al cargar la librer&iacute;a"; 
```

输出“Error al cargar la librería”。

我还实现了脚本 installlationchecker.php，在其中添加了之前代码的前两行，并且在 public 文件夹的姊妹文件夹中安装了 Zend Framework，安装测试通过了。

但我的问题是，我可以像对象一样调用 Autoloader，比如：

```
$libload = New Zend_Loader_Autoloader();

$libload->getInstance(); 
```

Zend Framework 的文档中似乎没有关于这种替代语法的内容。

我打算这样做是因为该库不会在我需要它的几个脚本上加载，而且这只发生在远程服务器上，在我的测试服务器上它工作正常。我做了这样的测试：

```
include ('header.php');
//codigo para probar equidad de nombre de archivo---------->
$filename = basename($_SERVER['SCRIPT_FILENAME']);
$request = basename($_SERVER['SCRIPT_NAME']);
if($filename != $request)
  die('Case of filename and request do not match!');
echo ('<div class="cuerpo"><div class="mensajes">');
if(isset($_POST['autoresArt'])&&isset($_POST['tituloArt'])&&isset($_POST['correoArt'])&&isset($_POST['descArt'])) {
require_once('libreria.php'); 
```

查看我的脚本（在 Windows 上开发的）和 Linux 服务器中的脚本是否存在大小写问题，但似乎没有问题。

顺便说一句，在需要或包含库之前输出的唯一代码是“header.php”，它只是显示输出的 html 文档，加上一些 javascript 来控制它。

PD 对不起，我已经检查过了，正如马特所说，它正在输出库***已***设置。然而，我一直试图让这段代码工作好几天，因为它在远程服务器上失败，而不是在我的测试服务器上，我猜想 Zend Framework 库没有被加载。其实不是，只是今天我把它设置在公用文件夹的姊妹文件夹中，并调用测试脚本来确定。

但是，我在脚本中设置的代码无法正常运行，类似于：

```
if(isset($_POST['nombreUs'])) {
$nombreUsuario = reemplaza_blancos($_POST['nombreUs']);
$nombreUsuario = trim($nombreUsuario);
$nombreUsuario = mysql_real_escape_string($nombreUsuario);
$validaDos = new Zend_Validate_Regex('/^([[:alpha:]]|[ÁÉÍÓÚÑñáéíóúÄËÏÖÜäëïöü])[[:alpha:]]|[ÁÉÍÓÚÑñáéíóúÄËÏÖÜäëïöü]+\s?([[:alpha:]][ÁÉÍÓÚÑñáéíóúÄËÏÖÜäëïöü])?/');
if(!$validaDos->isValid($nombreUsuario)) {
$errors ['nombre'] = "El nombre no puede contener n&uacute;meros";  
}
} 
```

然后我检查`if(empty($errors))`然后调用并运行 PHPMailer 类。

看到这个脚本根本无法正常运行，我感到很麻木

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:16:13.300

你不能拥有

```
$libload = New Zend_Loader_Autoloader(); 
```

仅仅因为构造函数被声明为受保护的方法。

```
protected function __construct() 
```

所以不，你不能。

# jquery - jQuery 克隆：cgi 生成的页面

> ID：13042338
> 
> 赞同：0
> 
> 时间：2012-10-24T02:52:35.063
> 
> 标签：jquery, cgi

jQuery 的克隆功能在 jsfiddle 中有效，但不适用于 CGI 生成的页面。

[http://jsfiddle.net/FkrBc/1/](http://jsfiddle.net/FkrBc/1/)

相关代码：

```
var displayDiff = $("#firstTable tbody").clone();

function checkee () {
    $( "tr", displayDiff ).each( function() {
        var foo = $(this).find("td:first-child").text();
        $("#firstTable tbody tr td:first-child").filter(function() {
        return $(this).text() == foo;
        }).parent().attr("class","same");

    });
    var content = $('#firstTable tbody>tr[class!="same"]').clone();
    $("#results").html(content);
}
rowCount = $("tr", displayDiff).length;

setInterval(function(){ 
  if($("#firstTable tr").length > rowCount){
     checkee();
  } 
}, 2000); 
```

在小提琴中，它只克隆一次并使用新条目更新该部分，在 CGI 页面上，它看起来像是在不断克隆。

当我通过将克隆输出到 div 进行测试时——它会不断更新表中的新行。不应该这样做。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:46:01.827

您的更新 rowCount 不应该在 checkee() 函数内吗？像这样：

```
var rowCount = 0; //declare outside of function to maintain scope
function checkee () {
    $( "tr", displayDiff ).each( function() {
        var foo = $(this).find("td:first-child").text();
        $("#firstTable tbody tr td:first-child").filter(function() {
        return $(this).text() == foo;
        }).parent().attr("class","same");

    });
    var content = $('#firstTable tbody>tr[class!="same"]').clone();
    $("#results").html(content);
    rowCount = $("tr", displayDiff).length;  //this line moved to inside this function
} 
```

现在 rowCount 只被设置一次，因为它在一个独立的行上，所以检查

```
$("#firstTable tr").length > rowCount) 
```

setInterval 的函数内部始终为真（假设第一次为真）。

# objective-c - 如何将当前日期设置为标题

> ID：13042339
> 
> 赞同：3
> 
> 时间：2012-10-24T02:53:22.073
> 
> 标签：objective-c, ios

我正在制作一个简单的 iOS 笔记应用程序来学习，我想在创建笔记时添加一个简单的日期。有点像默认的 notes.app。这是我到目前为止所尝试的：

我在情节提要中创建了一个标签，并将其制成一个属性并合成它。这是我的代码

```
- (void)configureCell:(IdeasTableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath {

  ...

 NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat: @"yyyy-MM-dd HH:mm:ss zzz"];
 NSDate *dateTmp;
cell.dateLabel.text = [dateFormat stringFromDate:dateTmp];
cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator; 
```

它不断返回错误......关于导致问题的任何想法？对不起，这个愚蠢的问题，但我刚刚开始 iOS 开发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T02:56:26.427

崩溃的原因是 NSDate* 对象未初始化。您需要为其分配一个代表当前日期的实例：

```
NSDate *dateTmp = [NSDate date]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T06:28:23.650

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat: @"yyyy-MM-dd HH:mm:ss zzz"];
NSDate *dateTmp = [NSDate date];
cell.detailTextLabel.text = [dateFormat stringFromDate:dateTmp]; 
```

上面的代码给了我正确的结果

# delphi - delphi 2007 以 UTF-8 字符串或任何其他方式显示 unicode U+1F48B

> ID：13042340
> 
> 赞同：0
> 
> 时间：2012-10-24T02:53:44.343
> 
> 标签：delphi, sqlite, unicode, utf-8

我有一个 sqlite 数据库（UTF-8 编码）。在数据库里面我有这样的记录（十六进制字节）：

```
D0 9E D0 BA 29 F0 9F 92 8B F0 9F 92 8B 
```

因此字节没有对齐，即：

```
$D09E = O
$D0BA = к
$29 = )
$F09F928B = U+1F48b (KISS MARK)
$F09F928B = U+1F48b (KISS MARK) 
```

这是它在 SQLite 管理器中的样子：

![在此处输入图像描述](../Images/0e9f2812821c7a4dff441048a61e6f98.png)

但无论我做什么（UTF8Decode 和一些自定义转换），我都无法让它显示在我启用了 Unicode 的 TNTStringGrid 中。

是的，我可以得到确定）？？显示，但随后变为 Ок)рџ'‹рџ'‹ 或者这就是它看起来像真实的样子（UTF8Encoded）：РћРє)рџ'‹рџ'‹</p>

我知道这是一个难题，但必须有一个解决方案，因为 SQLite 管理器显示它绝对正确。

那么如何将这些 U+ 字符与普通文本一起显示呢？

请帮忙！3天三夜与这个任务战斗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T06:28:43.217

您正在处理 UTF“代理对”：

使用 UTF-16，从 $D800-DBFF 到 $DC00-DCFF 的值范围用于指定所谓的代理对。
使用这些代理对，我们可以映射 10000 美元或更高的 Unicode 代码点（在 10000 美元到 10FFFD 的范围内）。
这是通过从值中减去 $10000 来完成的，留下一个介于 0 到 $FFFFD 之间的值，可以用 20 位表示。这 20 位分为两对，每对 10 位，分别添加到 $D800 中。$DC00 双。
因此，对于 Unicode 代码点 $1D11E，UTF-16 代理对的计算如下：首先减去 $10000，剩下 $D11E，即 00001101000100011110 为 20 位，分为 $34 和 $11E。$34 加到 $D800 中，$11E 加到 $DC00 中，结果是最重要的替代品为 $D834，而最不重要的替代品为 $DD1E。

[请注意，Unicode 标准不会为 Unicode 代码点 $D800 到 $DFFD 分配有效字符（以避免 UTF-16 出现问题），因此各个代理字符本身永远不会映射到实际字符本身（但应始终成对使用）。]

另见[http://en.wikipedia.org/wiki/UTF-16](http://en.wikipedia.org/wiki/UTF-16)

要正确显示代理对字符，您需要包含它们的字体。例如，Windows 字体 Code2001, Euterpe, Free Serif, Musica, Quivira, Symbola (http://www.alanwood.net/unicode/) 支持 U+1D100 – U+1D1FF (119040–119295) 范围内的音乐符号fontsbyrange.html#u1d100)
您需要在系统上下载并安装 Musica 字体（以前称为 Musical Symbols）才能使该示例正常工作。下载位置 eg [http://users.teilar.gr/~g1951d/](http://users.teilar.gr/~g1951d/)
[Win7下安装：在ttf文件上右击选择'install']
[测试页面：http://www.alanwood.net/unicode/音乐符号.html]

这是我使用上述代码的示例 Delphi XE2 测试代码（您有 D2007，但这可能会让您上路）。

```
unit uSurrogatePairs;                                                                                                                    

interface                                                                                                                                

uses                                                                                                                                     
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,                                       
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls;                                                                                    

type                                                                                                                                     
  TFrmSurrogatePairs = class(TForm)                                                                                                      
    MmoCharacter: TMemo;                                                                                                                 
    Mmo: TMemo;                                                                                                                          
    procedure FormShow(Sender: TObject);                                                                                                 
  private                                                                                                                                
    procedure Log(S: String);                                                                                                            
  public                                                                                                                                 
    { Public declarations }                                                                                                              
  end;                                                                                                                                   

var                                                                                                                                      
  FrmSurrogatePairs: TFrmSurrogatePairs;                                                                                                 

implementation                                                                                                                           

{$R *.dfm}                                                                                                                               

type                                                                                                                                     
  TDanishString = type ansistring(1252);                                                                                                 

procedure TFrmSurrogatePairs.FormShow(Sender: TObject);                                                                                  
// Code adapted from http://compaspascal.blogspot.nl/2008/10/delphi-2009-strings-explained-by.html                                       
var                                                                                                                                      
  UTF16Str : string;                                                                                                                     
  UTF8Str  : utf8string;                                                                                                                 
  DanishStr: TDanishString;                                                                                                              
  L        : Integer;                                                                                                                    
begin                                                                                                                                    
{ TODO -oJan -cShouldHave : Test if Musica font is installed }                                                                           
  UTF16Str:=#$1D160;                                                                                                                     
  MmoCharacter.Text := UTF16Str;                                                                                                         
  L := length(UTF16Str);                                                                                                                 
  Assert (L=2);                                                                                                                          
  Log('Assigned: UTF16Str := #$1D160');                                                                                                  
  Log('  This is a musical note (000011101000101100000),');                                                                              
  log('  see http://unicode.org/charts/PDF/U1D100.pdf');                                                                                 
  Log('Length(UTF16Str)=2');                                                                                                             
  Log('  This character occupies 2 positions in UTF-16');                                                                                
  Assert (UTF16Str[1]=#$D834);  // 110110 0000110100 First half of the symbol                                                            
  Assert (UTF16Str[2]=#$DD60);  // 110111 0101100000 Second half of the symbol                                                           
  Log('UTF16Str[1]=#$D834');                                                                                                             
  Log('UTF16Str[2]=#$DD60');                                                                                                             

  UTF8Str := utf8string(UTF16Str);                                                                                                       
  MmoCharacter.Lines.Add(String(UTF8Str));                                                                                               
  Log('');                                                                                                                               
  Log('Assigned: UTF8Str := UTF16Str');                                                                                                  
  Log('  This is the second line (char) in the left memo');                                                                              
  L := Length(UTF8Str);                                                                                                                  
  Assert (L=4);                                                                                                                          
  Log('Length(UTF8Str)=4');                                                                                                              
  Log('  This character occupies 4 positions in UTF-8, each 1 byte');                                                                    
  Assert (UTF8Str[1]=#$F0);   // 11110 000                                                                                               
  Assert (UTF8Str[2]=#$9D);   // 10 011101                                                                                               
  Assert (UTF8Str[3]=#$85);   // 10 000101                                                                                               
  Assert (UTF8Str[4]=#$A0);   // 10 100000                                                                                               

  DanishStr:=UTF16Str;                                                                                                                   
  Assert (DanishStr='??');    // Note how Windows incorrectly converts to two letters!                                                   
  Assert (length(DanishStr)=2);                                                                                                          
  DanishStr:=UTF8Str;                                                                                                                    
  Assert (DanishStr='??');    // Note how Windows incorrectly converts to two letters!                                                   
  Assert (length(DanishStr)=2);                                                                                                          
end;                                                                                                                                     

procedure TFrmSurrogatePairs.Log(S: String);                                                                                             
begin                                                                                                                                    
   Mmo.Lines.Add(S);                                                                                                                     
end;                                                                                                                                     

end. 
```

和 DFM：

```
object FrmSurrogatePairs: TFrmSurrogatePairs
  Left = 0
  Top = 0
  Caption = 'Surrogate pairs'
  ClientHeight = 273
  ClientWidth = 600
  Color = clBtnFace
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'Tahoma'
  Font.Style = []
  OldCreateOrder = False
  OnShow = FormShow
  PixelsPerInch = 96
  TextHeight = 13
  object MmoCharacter: TMemo
    AlignWithMargins = True
    Left = 3
    Top = 3
    Width = 134
    Height = 267
    Align = alLeft
    Font.Charset = DEFAULT_CHARSET
    Font.Color = clWindowText
    Font.Height = -107
    Font.Name = 'Musica'
    Font.Style = []
    ParentFont = False
    ReadOnly = True
    TabOrder = 0
  end
  object Mmo: TMemo
    AlignWithMargins = True
    Left = 143
    Top = 3
    Width = 454
    Height = 267
    Align = alClient
    Lines.Strings = (
      '')
    ReadOnly = True
    TabOrder = 1
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T18:54:50.940

# c++ - QMenuBar 在 Linux 上丢失或不可见

> ID：13042343
> 
> 赞同：0
> 
> 时间：2012-10-24T02:54:15.670
> 
> 标签：c++, qt, ubuntu

我有一个可以在 Windows 上正确构建和运行的 Qt4 应用程序。但是，当我在 Linux（ubuntu 12.04）上构建和运行它时，我的主窗口（QMainWindow）的 QMenuBar 丢失了。它占用的空间似乎已分配，但它是不可见/透明的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:30:28.440

尝试手动设置

mainLayout->setMenuBar(菜单栏);

它对我有用。

# iphone - 如何根据操作系统版本加载 Apple Map 和 Google Map

> ID：13042346
> 
> 赞同：0
> 
> 时间：2012-10-24T02:54:39.923
> 
> 标签：iphone, objective-c, ios

因为我必须在 iOS 6 及更早版本中为地图工作。我正在寻找可以将谷歌地图和苹果地图加载到地图视图中的源代码示例，具体取决于操作系统版本。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T03:00:07.747

只需将其添加`MKMapView`到您的视图中，它就会自动处理它。在 iOS < 6 上，它将加载并显示旧的谷歌地图，在 iOS >= 6 上，它将显示新的 Apple 地图。两个版本的 API 本身是相同的，所以不用担心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T03:00:16.017

你不必担心这一点。地图 API 几乎相同。Apple 确保它与旧版本兼容。唯一的大区别是从哪里获取数据。如果您在 iOS 6+ 中运行您的应用程序，它将使用苹果地图，如果您在 5.1 及以下版本中运行它，您将获得谷歌地图。

# java - Java 匹配计数器和伪匹配计数器

> ID：13042351
> 
> 赞同：1
> 
> 时间：2012-10-24T02:55:40.997
> 
> 标签：java, arrays, match

我正在尝试制作两种方法，其他方法运行良好。问题是伪匹配计数器，其中输入应该是随机数，例如 5 4 3 2，用户猜测输入，例如 5 3 6 1，输出将是：伪匹配：1 和匹配：2。我不明白我的伪匹配方法哪里出错了。

```
public int match(int[] guess) //Counts the number of matches
{
    int count = 0;

    for(int i = 0; i<3; i++) 
    {
        if (lotteryNumbers[i] == guess[i])
        {
            count++;
        }

    }
    return count;
}
//First add psuedo counter for current program
//Then modify for multiple variables.

//Single slot to Single slot.
public int psuedoMatch(int[] guess)
{  
    boolean arraysEqual = true;
    int psuedoCount = 0;

    //Determine same size:
    if (lotteryNumbers.length != guess.length) 
    {
        arraysEqual = false;
    }

    //Determine if elements contain same data:

    while (arraysEqual && psuedoCount < 3) // guess.length
    {
        if (lotteryNumbers[psuedoCount] != guess[psuedoCount] )
        {
            arraysEqual = false;
        }
        psuedoCount++;
    }

    return psuedoCount;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:06:30.817

我认为以下是您正在尝试做的事情：

```
public int psuedoMatch(int[] guess) {          
    int psuedoCount = 0;

    //Determine same size:
    if (lotteryNumbers.length != guess.length) {
        return psuedoCount;
    }

    //Determine if elements contain same data:

    for(int i=0; i<lotteryNumbers.length || psuedoCount < 3; i++) {

        //I think you want to count all the matches till you have 3 matches
        if (lotteryNumbers[psuedoCount] == guess[psuedoCount]) {
            psuedoCount++;
        }            
    }

    return psuedoCount;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T03:16:17.633

我猜您正在尝试查找这 2 个数组的匹配数，但是相等元素的相对索引应该不同，以便我们可以将它们添加到伪计数器机制中。所以看看这个方法并尝试一下：

```
public int psuedoMatch(int[] guess)
{
    int psuedoCount = 0;

    if (lotteryNumbers.length != guess.length)
        return 0;

    int size = lotteryNumbers.length;

    // Determine if elements contain same data, but at different indexes!

    for (int i = 0; i < size; i++) {
        for (int j = 0; j < size; j++) {
            // Denote the inequality check i != j
            if (lotteryNumbers[i] == guess[j] && i != j)
                psuedoCount++;
        }
    }

    return psuedoCount;
} 
```

# haskell - Haskell 有尾递归优化吗？

> ID：13042353
> 
> 赞同：98
> 
> 时间：2012-10-24T02:55:47.143
> 
> 标签：haskell, optimization, lazy-evaluation, tail-recursion, tail-call-optimization

我今天在 unix 中发现了“时间”命令，并认为我会用它来检查 Haskell 中尾递归和普通递归函数之间的运行时差异。

我写了以下函数：

```
--tail recursive
fac :: (Integral a) => a -> a
fac x = fac' x 1 where
    fac' 1 y = y
    fac' x y = fac' (x-1) (x*y) 

--normal recursive
facSlow :: (Integral a) => a -> a
facSlow 1 = 1
facSlow x = x * facSlow (x-1) 
```

这些是有效的，请记住它们仅用于该项目，因此我没有费心检查零或负数。

但是，在为每个方法编写主方法、编译它们并使用“time”命令运行它们后，两者都具有相似的运行时，*正常*递归函数将尾递归函数边缘化。这与我听到的关于 lisp 中的尾递归优化的说法相反。这是什么原因？

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2012-10-24T15:37:59.787

Haskell 使用惰性求值来实现递归，因此将任何东西都视为在需要时提供值的承诺（这称为 thunk）。Thunks 只减少到继续进行所需的量，不再减少。这类似于您在数学上简化表达式的方式，因此以这种方式思考它是有帮助的。*您的代码未*指定评估顺序这一事实允许编译器进行许多更聪明的优化，而不仅仅是您习惯的尾调用消除。**如果要优化****，请编译！`-O2`**

让我们看看我们如何`facSlow 5`作为案例研究进行评估：

```
facSlow 5
5 * facSlow 4            -- Note that the `5-1` only got evaluated to 4
5 * (4 * facSlow 3)       -- because it has to be checked against 1 to see
5 * (4 * (3 * facSlow 2))  -- which definition of `facSlow` to apply.
5 * (4 * (3 * (2 * facSlow 1)))
5 * (4 * (3 * (2 * 1)))
5 * (4 * (3 * 2))
5 * (4 * 6)
5 * 24
120 
```

因此，正如您担心的那样，在任何计算发生之前我们都会积累数字，但*与*您担心的不同，没有`facSlow`等待终止的函数调用堆栈 - 每次减少都被应用并消失，在其中留下一个[堆栈帧](http://en.wikipedia.org/wiki/Call_stack)唤醒（这是因为`(*)`它是严格的，因此会触发对其第二个参数的评估）。

Haskell 的递归函数不是以非常递归的方式计算的！唯一的一堆调用是乘法本身。如果 `(*)`被视为严格的数据构造函数，这就是所谓的*保护*递归（尽管它通常与*非*严格数据构造函数一起被称为，其中留下的是数据构造函数 - 当被进一步访问强制时）。

现在让我们看一下尾递归`fac 5`：

```
fac 5
fac' 5 1
fac' 4 {5*1}       -- Note that the `5-1` only got evaluated to 4
fac' 3 {4*{5*1}}    -- because it has to be checked against 1 to see
fac' 2 {3*{4*{5*1}}} -- which definition of `fac'` to apply.
fac' 1 {2*{3*{4*{5*1}}}}
{2*{3*{4*{5*1}}}}        -- the thunk "{...}" 
(2*{3*{4*{5*1}}})        -- is retraced 
(2*(3*{4*{5*1}}))        -- to create
(2*(3*(4*{5*1})))        -- the computation
(2*(3*(4*(5*1))))        -- on the stack
(2*(3*(4*5)))
(2*(3*20))
(2*60)
120 
```

因此，您可以看到尾递归本身并没有为您节省任何时间或空间。它不仅比 总体上需要更多的步骤`facSlow 5`，而且还构建了一个嵌套的 thunk（此处显示为`{...}`） - 需要一个*额外的空间*- 它描述了未来的计算，要执行的嵌套乘法。

然后通过遍历*到底*部来解开这个 thunk，在堆栈上重新创建计算。对于这两个版本，这里还有一个导致堆栈溢出的危险，计算时间很长。

如果我们想手动优化它，我们需要做的就是让它变得严格。您可以使用严格的应用程序运算符`$!`来定义

```
facSlim :: (Integral a) => a -> a
facSlim x = facS' x 1 where
    facS' 1 y = y
    facS' x y = facS' (x-1) $! (x*y) 
```

这迫使`facS'`在第二个论点中严格。（它的第一个参数已经很严格了，因为必须对其进行评估才能决定`facS'`应用哪个定义。）

有时严格可以极大地帮助，有时这是一个很大的错误，因为懒惰更有效率。这是一个好主意：

```
facSlim 5
facS' 5 1
facS' 4 5 
facS' 3 20
facS' 2 60
facS' 1 120
120 
```

我认为这就是您想要实现的目标。

## 概括

*   如果你想优化你的代码，第一步是编译`-O2`
*   尾递归只有在没有 thunk 累积时才有用，如果合适的话，增加严格性通常有助于防止它。当您构建一个稍后需要的结果时，就会发生这种情况。
*   有时尾递归是一个糟糕的计划，而受保护的递归更适合，即当您构建的结果将被一点一点地需要时，部分。例如，请参阅有关和的[这个问题](https://stackoverflow.com/questions/3429634/foldl-is-tail-recursive-so-how-come-foldr-runs-faster-than-foldl)，并将它们相互测试。`foldr``foldl`

试试这两个：

```
length $ foldl1 (++) $ replicate 1000 
    "The size of intermediate expressions is more important than tail recursion."
length $ foldr1 (++) $ replicate 1000 
    "The number of reductions performed is more important than tail recursion!!!" 
```

`foldl1`是尾递归，而`foldr1`执行受保护的递归，以便立即呈现第一项以供进一步处理/访问。[（第一个“括号”立即向左，`(...((s+s)+s)+...)+s`，强制其输入列表完全到其末尾，并比需要其完整结果更快地构建未来计算的大块；第二个逐渐向右括号，`s+(s+(...+(s+s)...))`，消耗输入逐点列出，因此整个事物能够在恒定空间中运行，并进行优化）。]

您可能需要根据您使用的硬件调整零的数量。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-24T12:02:17.157

应该提到的是，该`fac`函数不是保护递归的好候选者。尾递归是这里的方法。由于懒惰，您没有在`fac'`函数中获得 TCO 的效果，因为累加器参数不断构建大型 thunk，在评估时将需要巨大的堆栈。为了防止这种情况并获得 TCO 的预期效果，您需要使这些累加器参数严格。

```
{-# LANGUAGE BangPatterns #-}

fac :: (Integral a) => a -> a
fac x = fac' x 1 where
  fac' 1  y = y
  fac' x !y = fac' (x-1) (x*y) 
```

如果您使用`-O2`（或仅）编译，GHC 可能会在[严格性分析](http://www.haskell.org/haskellwiki/Performance/Strictness#Strictness_analysis)阶段`-O`自行执行此操作。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-24T03:01:22.360

您应该查看有关[Haskell 中尾递归](http://www.haskell.org/haskellwiki/Tail_recursion)的 wiki 文章。特别是，由于表达式评估，您想要的递归类型是受*保护*的递归。如果你弄清楚幕后发生的事情的细节（在 Haskell 的抽象机器中），你会得到与严格语言中的尾递归相同的东西。除此之外，您对惰性函数有统一的语法（尾递归将使您与严格的评估联系起来，而保护递归更自然地工作）。

（在学习 Haskell 时，其他 wiki 页面也很棒！）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T02:59:26.327

如果我没记错的话，GHC 会自动将普通递归函数优化为尾递归优化函数。

# visual-studio-2010 - 如何将 vs2012 sln/项目文件转换为 vs2010？

> ID：13042356
> 
> 赞同：1
> 
> 时间：2012-10-24T02:56:30.187
> 
> 标签：visual-studio-2010, visual-studio, visual-c++

嗨，我使用 sln 创建了一个 sln `Visual studio 2012`，但我的同事要求我将它们转换`Visual studio 2010`为团队的版本，这里使用 2010 作为标准，而不是创建一个全新的 2010 sln/project 并包含以前 2012 sln/project 中的所有文件，我可以吗？直接修改2012 sln/project文件进行转换？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T06:25:23.590

您只需要以下内容，

1.  在 Visual Studio 2010 中创建一个空白解决方案文件 (.sln)
2.  将所有以前的项目文件 (.csproj) 添加到这个新的解决方案文件中。

然后你的所有队友都可以使用这个新的解决方案来打开项目。

如果要移植 Visual C++ 项目，请确保在 Visual Studio 2012 中将平台工具包设置为 v100，然后再将项目 (.vcxproj) 添加到 Visual Studio 2010 解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T07:55:27.563

通过执行以下操作，我们成功地升级了所有现有的解决方案和项目：

1.  对于每个 .sln 文件，修改文件中的前 2 行

    Microsoft Visual Studio 解决方案文件，格式版本 11.00 # Visual Studio 2012

    （版本将是 9.00 或 10.00，具体取决于您是从 VS2008 还是 2010 升级）。

2.  对于每个 csproj 文件，在此行中将 ToolsVersion 从 3.5 更改为 4.0：

    <Project DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0">

这些解决方案/项目现在按原样加载，无需任何转换，并且构建/运行正常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-07T08:34:21.300

如果给你一个VS2012 C++项目，但你只能访问Visual Studio 2010。那么你可以使用下面的方法：

1.  在记事本中打开 .csproj 文件。（这是一个 XML 文件）
2.  查找 Platform Toolkit 字段并将其从 v110 更改为 v100。
3.  保存更改。
4.  在 Visual Studio 2010 中创建一个空白解决方案文件 (.sln)
5.  使用“添加现有项目”将修改后的 .csproj 文件添加到空白解决方案中。
6.  全部重建

附言。如果您要从较新的 Visual Studio 2013 转换 C++ 项目，那么在第 2 步中，您还需要将 ToolsVersion 更改为 4.0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T01:39:53.567

我在转换解决方案时遇到了问题，对我来说（这是一个 MVC.net 项目）

该问题已通过修改以下键得到解决：{AAB7808F-0E04-46AE-8EFC-46E4C81AC77D} {349c5851-65df-11da-9384-00065b846f21};{fae04ec0-301f-11d3-bf4b-00c04f79efbc}

我将项目指南从现有的 2010 mvc.net 解决方案中取出，并将它们放入我从 2012 年移植的项目中。

这是除了使用版本号修改 sln 文件，然后必须手动更改框架版本 (4.5 -> 4.0)

# c# - 不同的排序方法和随机

> ID：13042357
> 
> 赞同：1
> 
> 时间：2012-10-24T02:56:42.450
> 
> 标签：c#, .net, winforms, listview

我正在使用`random`和`sorting`方法。到目前为止，我有线性方法工作。我正在尝试实现一种方法，让用户决定使用哪种类型的排序，例如`linear`、`bubble`、`index`等。所以我添加`textBox7`了标签`Key`，`button3`用户点击它，直到找到他们想要的排序方法。当 Key`textbox7`选择了一个值时，排序数组`button2`将执行该特定的排序方法。如何根据`Key`值执行特定的排序方法？下面是我如何设置 windows 窗体的图片

**代码**

```
namespace sortmachine
{
    public partial class Form1 : Form
    {

        public Form1()
        {
            InitializeComponent();

        }

        Stopwatch sw = new Stopwatch();

        Random r = new Random();

        private int size = 0;
        private int max = 0;
        private int ops = 0;
        private int[] ar1;
        private int[] ar2;
        private int[] ar3;

        private void button1_Click(object sender, EventArgs e)
        {
            try
            {
                size = Convert.ToInt32(textBox2.Text);
                max = Convert.ToInt32(textBox3.Text);
                string s = "";

                ar1 = new int[size];
                ar2 = new int[size];
                ar3 = new int[size];

                for (int i = 0; i < size; i++)
                {
                    int n = r.Next(0, max);
                    ar1[i] = n;
                    ar2[i] = ar1[i];
                }

                for (int i = 0; i < size; i++)
                {
                    s += ar1[i].ToString() + " ";
                }
                listView1.Items.Add(s);
            }
            catch
            {
                MessageBox.Show("Please input information");
            }

        }

        private void button2_Click(object sender, EventArgs e)
        {
            int min = max;
            int n = 0;
            string s="";

            sw.Start();

            for (int j = 0; j < size; j++)
            {
                for (int i = 0; i < size; i++)
                {
                    if (min > ar2[i])
                    {
                        min = ar2[i];
                        n = i;
                        ops++;
                    }
                    if (min < ar2[i])
                    {
                        ops++;
                    }

                }
                ar2[n]=max;
                ar3[j] = min;
                min = max;
                s += ar3[j] + " ";
            }

            TimeSpan x = sw.Elapsed;
            textBox5.Text = x.ToString();

                listView2.Items.Add(s);
                listView2.Text = s;
                textBox6.Text = Convert.ToString(ops);
                if (checkBox1.Checked==true)
                {
                    textBox1.AppendText(s+Environment.NewLine);
                }
                for (int i = 0; i < size; i++)
                {
                    ar2[i] = ar1[i];
                }
                ops = 0;

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T03:01:06.563

我建议使用组合框或 DropDownList 来存储排序选项，并使用其 SelectedText 属性来确定用户单击排序时要使用的排序方法。

只需将组合框拖到您的表单上即可。然后向其中添加项目，即单击编辑项目并填写值。

然后你在代码中所做的就是编写类似的东西。

```
string sortOption = comboBox1.SelectedText; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T03:28:54.087

如何使用`RadioButton`List 在排序选项之间进行选择以确定用户所需的排序而不是键值方法。

只需放置一次只允许一个选择的`RadioButtons`内部，然后单击排序按钮，您可以检查每个属性以应用排序。`GroupBox``RadioButton``Checked``RadioButton`

```
if (rdoBtnQuick.Checked)
    // Apply Quick Sort
else if (rdoBtnSelection.Checked)
    // Apply Selection Sort
else if (rdoBtnBubble.Checked)
    // Apply Bubble Sort
//... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T03:43:33.830

我会尝试一下，因为它实现了其他人的建议：

在每个 if 条件中，您可以针对每种排序类型执行自己的逻辑。正如您所看到的，我从组合框中选择了一个排序选项，其中包含其他按钮，用于将数字添加到我的列表中以进行排序，并使用一个控件来显示结果。

截图中的代码如下：

```
if(comboBox1.SelectedItem.ToString() == "Linear")
{
}
else if (comboBox1.SelectedItem.ToString() == "Bubble")
{            
}
else if (comboBox1.SelectedItem.ToString() == "Index")
{
} 
```

* * *

![在此处输入图像描述](../Images/bc081866861ee6f3d401b7ff2d15ba8b.png)

# z3 - 如何从 SAT 模型中仅获取“真实”变量？

> ID：13042359
> 
> 赞同：2
> 
> 时间：2012-10-24T02:57:01.737
> 
> 标签：z3

考虑到我有一个简单的 SMT-lib 公式：

```
(declare-const a Bool)
(declare-const b Bool)
(declare-const c Bool)
(declare-const d Bool)
(assert (or a b))
(assert (or d c))
(check-sat)
(get-model) 
```

当 SAT 求解器给出模型时。它为所有变量提供真/假值。但我只想要“真”赋值变量。Z3可以吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T03:16:20.237

这是一个完成此任务的 z3py 脚本。 [http://rise4fun.com/Z3Py/fp5k](http://rise4fun.com/Z3Py/fp5k)

我认为要与模型交互/遍历模型，您需要使用 API。

```
a,b,c,d = Bools('a b c d')

s = Solver()

s.add( Or(a, b) )
s.add( Or(c, d) )

s.check()
m = s.model()
print m

for t in m.decls():
  if is_true(m[t]):
    print t
    print m[t] 
```

# php - 使用 PDO 更新 MySQL 记录，但数据包含破坏 SQL 语法的字符串

> ID：13042361
> 
> 赞同：0
> 
> 时间：2012-10-24T02:57:06.463
> 
> 标签：php, mysql, sql, loops, pdo

我正在使用以下 foreach 循环构建 SQL 查询：

```
$sql =  "UPDATE table01 SET ";  
        foreach(array_combine($values, $variables) as $value=>$variable)
        {
        $sql .="$value = $variable,";
        }
        $sql = rtrim($sql,','); 
        $sql .=" WHERE id = '$id'"; 
```

$values 是要更新的字段标题数组（db 中的列标题），而 $variables 是包含数据的变量数组。

由这种循环构建的查询示例如下：

```
UPDATE table01
SET sv_21 = 123, sv_22 = 123, sv_23 = 2011, sv_I8 = 1 sachet every day, sv_I9 = 3
WHERE id = '001' 
```

SQL of 将“每天”识别为语法，它会破坏更新命令。

我怎样才能输入这些数据？实际上，这些查询通常要大得多，并且多个字符串会导致语法错误。

感谢您的考虑

如果是相关的，这里是我用来执行更新的 PDO：

```
try 
{
$pdo = new PDO('mysql:host=localhost; dbname=tables', $username, $password);
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

$stmt = $pdo->prepare($sql);
$stmt->execute();         

# Affected Rows?
  echo $stmt->rowCount(); // 1
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T03:17:25.420

每当您在 SQL 字段中输入文本数据（而不是数字数据）时，都需要将其放在引号中。例如：

```
UPDATE table01
SET sv_21 = 123, sv_22 = 123, sv_23 = 2011, sv_I8 = '1 sachet every day', sv_I9 = 3
WHERE id = '001' 
```

某些类型的 SQL，例如 MySQL，将允许您将任何数据放在引号中，因此您应该更新您的 PHP 以像这样工作：

```
$sql =  "UPDATE table01 SET ";  
        foreach(array_combine($values, $variables) as $value=>$variable)
        {
        $sql .="$value = '$variable',"; // output: sv_I8 = '1 sachet every day',
        }
        $sql = rtrim($sql,','); 
        $sql .=" WHERE id = '$id'"; 
```

但是，在执行此操作之前，您应该知道这是使用数据库的危险方式。如果用户将撇号 ( `'`) 放入他们的数据中，那么他们可以将自己的 SQL 命令添加到您的数据库中。这称为 SQL 注入，它是网站被黑客入侵的主要方式之一。

更新数据库的一种更安全的方法是编写带有占位符的完整 SQL 语句，并明确定义每个占位符的值。您可以在此处了解有关此方法的更多信息：http: [//net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)

# php - PHP文件上传确定错误或未选择文件

> ID：13042362
> 
> 赞同：0
> 
> 时间：2012-10-24T02:57:21.567
> 
> 标签：php, upload

如何区分用户未选择文件和发生上传错误之间的 PHP 差异？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:00:06.217

如果上传出错，会有一个文件名。如果没有文件名或没有`$_FILES`数组，则用户没有选择文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T03:02:10.457

如果我没记错的话，我相信你指的是这个

```
$upload_errors = array(
UPLOAD_ERR_OK =>"No errors.",
UPLOAD_ERR_INI_SIZE => "Larger than upload_max_filesize.",
UPLOAD_ERR_FORM_SIZE => "Larger than form MAX_FILE_SIZE.",
UPLOAD_ERR_PARTIAL => "Partial upload.",
UPLOAD_ERR_NO_FILE => "No file.",
UPLOAD_ERR_NO_TMP_DIR => "No temporary directory.",
UPLOAD_ERR_CANT_WRITE => "Can't write to disk.",
UPLOAD_ERR_EXTENSION => "File upload stopped by extension."
);

$tmp_name = $_FILES['file_upload']['tmp_name'];
$target_file = basename($_FILES['file_upload']['name']);
$upload_dir = "uploads";

if(move_uploaded_file($tmp_name, $upload_dir."/".$target_file)){
    $message = "File uploaded successfully.";

}else{
    $error = $_FILES['file_upload']['error'];
    $message = $upload_errors[$error];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T03:05:27.027

如果用户没有选择文件，则该字段将为空，您应该能够进行错误检查

```
if($_FILES["file"]["name"] != "") { THERE IS A FILE HERE } ELSE { ERROR USER DID NOT SELECT FILE } 
```

# java - 获取文本节点内锚点中的文本

> ID：13042367
> 
> 赞同：0
> 
> 时间：2012-10-24T02:57:52.353
> 
> 标签：java, xpath, jsoup

我正在解析亚马逊上的产品评论，我想获取评论的完整文本，其中包括链接中的文本。

我目前正在使用 jSoup，尽管它很好，但它只会忽略锚点。当然，我可以仅使用选择器从锚点中获取所有文本，但我会丢失有关该文本所在上下文的信息。

我认为一个例子是解释自己的最佳方式。

结构示例：

```
<div class="container">
  <div style="a">Something...</div>
  <div style="b">...Nested spans and divs... </div>
  <div class="tiny">_____ </div>
  " From the makers of the incredible <a href="SOMELINK">SOMEPRODUCT</a> we have this other product that blablabla.... Amazing specs, but <a href="SOME_OTHER_LINK">this other product</a> is somehow better". 
```

我得到的是：“从令人难以置信的制造商那里，我们得到了另一种产品 blablabla ......惊人的规格，但不知何故更好”。

我想要的是：“从令人难以置信的 SOMEPRODUCT 的制造商那里，我们得到了这个其他产品，blablabla ......惊人的规格，但这个其他产品在某种程度上更好”。

我使用 jSoup 的代码：

```
Elements allContainers = doc.select(".container");
for (Element container : allContainers) {
  String reviewText = container.ownText(); // THIS EXCLUDES TEXT FROM LINKS
StdOut.println(reviewText); 
```

我找不到这样做的方法，因为它看起来不像 jSoup 将文本节点视为实际节点，因此这些锚似乎没有被考虑在下一个节点的子节点中。

我也对其他想法持开放态度，例如尝试使用 :not 选择器来获取它们，但我不敢相信 jSoup 不允许保留链接中的文本，这太常见了，以至于无法相信他们忽略了这一点特征。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T03:27:49.490

> 它看起来不像 jSoup 将文本节点视为实际节点，

否 - JSoup 文本节点是实际节点，元素也是如此。

您描述问题的方式，您有一个非常具体的要求，我同意没有内置的功能可以在一次调用中完全满足您的要求。然而，使用简单的辅助方法，问题是可以解决的。

首先让我们回顾一下问题 - 父 div 有以下子级：

```
div div div #text a #text a # text 
```

当然，每个`div`和`a`元素都有其他子节点，包括文本节点。根据您的示例，听起来您想遍历所有子节点，而忽略任何不是文本节点的节点。当你找到第一个文本节点时，收集它的文本和任何后续节点的文本。

当然可行，但我并不惊讶没有内置方法可以做到这一点。

这是解决问题的一种实现：

```
 public static String textPlus(Element elem)
   {
      List<TextNode> textNodes = elem.textNodes();
      if (textNodes.isEmpty())
         return "";

      StringBuilder result = new StringBuilder();
      // start at the first text node
      Node currentNode = textNodes.get(0);
      while (currentNode != null)
      {
         // append deep text of all subsequent nodes
         if (currentNode instanceof TextNode)
         {
            TextNode currentText = (TextNode) currentNode;
            result.append(currentText.text());
         }
         else if (currentNode instanceof Element)
         {
            Element currentElement = (Element) currentNode;
            result.append(currentElement.text());
         }
         currentNode = currentNode.nextSibling();
      }
      return result.toString();
   } 
```

要调用此用法：

```
Elements allContainers = doc.select(".container");
for (Element container : allContainers) {
  String reviewText = textPlus(container);
  StdOut.println(reviewText);
} 
```

给定您的示例 html 文本，此代码返回：

> “从令人难以置信的 SOMEPRODUCT 的制造商那里，我们得到了另一种产品 blablabla.... 令人惊叹的规格，但这种另一种产品在某种程度上更好。”

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T00:06:56.493

我没有测试过，但是根据 Element 类的 jsoup API 文档，你应该使用方法文本而不是 ownText

文本

公共字符串文本（）

```
Gets the combined text of this element and all its children.

For example, given HTML <p>Hello <b>there</b> now!</p>, p.text() returns "Hello there now!"

Returns:
    unencoded text, or empty string if none. 
See Also:
    ownText(), textNodes() 
```

拥有文本

公共字符串 ownText()

```
Gets the text owned by this element only; does not get the combined text of all children.

For example, given HTML <p>Hello <b>there</b> now!</p>, p.ownText() returns "Hello now!", whereas p.text() returns "Hello there now!". Note that the text within the b element is not returned, as it is not a direct child of the p element.

Returns:
    unencoded text, or empty string if none. 
See Also:
    text(), textNodes() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T22:05:26.173

我接受了 Guido 的回答，因为即使它对我不起作用，它也绝对让我走上了正轨。

Guido 的代码从第一个节点获取文本，然后迭代地遍历兄弟节点。不幸的是，我在现实世界中的例子还有两个复杂之处：

1 - 仍然对来自锚点的文本没有要求，没有其他要求。我想要更健壮的东西，所以我在 Guido 的结构中添加了该选择。

2 - 这仍然会从不需要的链接中获取文本，例如每个亚马逊评论末尾的“评论”和“永久链接”链接。其他选择器可以清除它们。

我正在发布对我有用的代码以供将来参考。希望能帮助到你 ：-）

```
public static String textPlus(Element elem)
{
    List<TextNode> textNodes = elem.textNodes();
    if (textNodes.isEmpty())
        return "";

    StringBuilder result = new StringBuilder();

    Node currentNode = textNodes.get(0);

    while (currentNode != null)
    {
        // append deep text of all subsequent nodes
        if (currentNode instanceof TextNode)
        {
            TextNode currentText = (TextNode) currentNode;
            String curtext = currentText.text();
            result.append("\n\n" + currentText.text());
        }
        else if (currentNode instanceof Element)
        {
            Element currentElement = (Element) currentNode;
            Elements anchorElements = currentElement.select("a[href]").select(":not(:contains(Comment))").select(":not(:contains(Permalink))");
            if (!anchorElements.isEmpty()) {
                for (Element anchorElement : anchorElements)
                    result.append("\n\n" + anchorElement.text());
            }
        }
        currentNode = currentNode.nextSibling();
    }
    return result.toString().trim(); 
```

# java - 使用简单适配器将 RatingBar 添加到 ListAdapter 无法正常工作

> ID：13042368
> 
> 赞同：0
> 
> 时间：2012-10-24T02:57:55.113
> 
> 标签：java, android, eclipse

我的 android 应用程序中有一个 ListAdapter...我正在尝试向列表中的每个项目添加一个 ratingBar，其值设置为 [TAG_RATING] 中包含的值。问题是列表正在显示，唯一的 ratingBar 卡在列表的最底部并且相当大。

请看下面的代码：

```
 ListAdapter adapter = new SimpleAdapter(
                        AllProductsActivity.this, productList,
                        R.layout.list_item, new String[] { TAG_BID,
                                TAG_NAME,
                                TAG_RATING},
                        new int[] { R.id.pid, R.id.name, R.id.ratingBar});
                    ((SimpleAdapter) adapter).setViewBinder(new MyBinder());
                // updating listview
                setListAdapter(adapter); 
```

然后 ViewBinder 类看起来像这样：

```
 class MyBinder implements ViewBinder{
    public boolean setViewValue(View view, Object data, String textRepresentation) {
        if(view.getId() == R.id.ratingBar){
            String stringval = (String) data;
            float ratingValue = Float.parseFloat(stringval);
            RatingBar ratingBar = (RatingBar) view;
            ratingBar.setRating(ratingValue);
            return true;
        }
        return false;
    }
} 
```

列表项 xml 文件如下所示：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

<TextView
    android:id="@+id/pid"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:visibility="gone" />

<!-- Name Label -->
<TextView
    android:id="@+id/name"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingTop="6dip"
    android:paddingLeft="6dip"
    android:textSize="17dip"
    android:textStyle="bold" />

  <RatingBar
    android:id="@+id/rating"
    style="?android:attr/ratingBarStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingTop="6dip"
    android:stepSize="0.25"
    android:numStars="5"
    /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T03:20:27.803

小`RatingBar`部件应放置在您在适配器中使用的列表行布局中，`R.layout.list_item`. 现在，您刚刚在主布局中的`RatingBar`下方放置了一个小部件。`ListView`

# ruby-on-rails - 彪马 .state 文件

> ID：13042372
> 
> 赞同：5
> 
> 时间：2012-10-24T02:58:08.047
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, puma

我正在尝试使用 Capistrano 部署带有 puma 的 Rails 应用程序。在部署结束时，它会尝试运行

`bundle exec pumactl -S /home/deployer/production/shared/sockets/puma.state restart`

失败/

```
undefined method `has_key?' for false:FalseClass. 
```

我只是为`puma.state`. 我的问题是这个文件到底是什么，里面应该有什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T14:10:04.647

Puma 有一个状态文件，记录了进程的 PID。如果您是第一次部署，您应该删除 .state 文件，然后执行

`cap deploy:cold`

或者，您可以使用类似的东西手动启动 puma

`cap puma:start`

这将启动该过程并创建一个有效的状态文件。这是我在 capistrano 中的 puma start 命令：

```
namespace :puma do

  desc "Start the application"
  task :start, :roles => :app, :except => { :no_release => true } do
    run "cd #{current_path} && RAILS_ENV=#{rails_env} bundle exec puma -t 8:32 -b 'unix://#{shared_path}/sockets/puma.sock' -S #{shared_path}/sockets/puma.state --control 'unix://#{shared_path}/sockets/pumactl.sock' >> #{shared_path}/log/puma-#{rails_env}.log 2>&1 &", :pty => false
  end
  after "deploy:start", "puma:start"
end 
```

# shopify - Shopify API 调用以了解用户的位置/国家/地区

> ID：13042377
> 
> 赞同：2
> 
> 时间：2012-10-24T02:59:46.267
> 
> 标签：shopify

是否没有 Shopify API 调用来了解用户的 ip/位置/国家？

这里的用户是指前端的任何公共用户。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T12:40:46.300

派对有点晚了，但是是的，很容易做到。制作一个应用代理，shopify 会向您发送大量关于客户端的数据（包括他的 IP）。唯一不包括的主要东西是饼干（有点奇怪，但无论如何）。

所以这就是你要做的事情 - 下载并保存一个 IP 到国家的数据库（网上有很多免费的数据库），然后把数据库放在你放置应用程序的地方。制作一个查看请求标头并获取 IP 并使用它来确定国家/地区的应用程序。现在创建一个应用代理，然后简单地从任何页面使用 ajax 来访问它，客户端不需要知道。如果您想要更多，您可以将购物车 cookie（使用 JS）连同它一起发送，以跟踪哪个 IP 属于哪个购物车。如果您允许用户登录，您也可以发送。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T13:23:37.677

Shopify API 可以让您访问[客户数据](http://api.shopify.com/customer.html)，但它只能为您提供他们在结账时输入的送货地址和账单地址。

如果您想在浏览器中获取实时位置信息，那完全是另一回事。我建议从这样的网站开始：[http ://www.browsergeolocation.com/](http://www.browsergeolocation.com/)

# jquery - 如何使用 jquery 在 div 中选择特定的子元素？

> ID：13042379
> 
> 赞同：-3
> 
> 时间：2012-10-24T03:00:02.580
> 
> 标签：jquery

假设我有一个这样的多个元素：

```
<div id="outermostdiv" >
<span></span>
<span></span>
<span>Random<a>SomeText</a></span>
</div> 
```

如何使用 jquery 选择器获取“a”元素的文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T03:01:41.540

使用您提供的上下文`$("#outermostdiv a").text()`应该就足够了。

# extjs - Ext.window.Window 最小按钮不起作用

> ID：13042382
> 
> 赞同：0
> 
> 时间：2012-10-24T03:00:08.483
> 
> 标签：extjs, extjs4

在我的 extjs4 视图中，我将 minimizable 设置为 true，但单击 min 按钮后，视图并未最小化。最大按钮正在工作。我是否需要为窗口设置其他属性才能使其工作？

感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T03:22:06.333

这在文档中有介绍，所以我将在这里引用它：

> True 显示“最小化”工具按钮并允许用户最小化窗口，false 隐藏按钮并禁止最小化窗口。请注意，此按钮不提供任何实现——最小化窗口的行为是特定于实现的，因此必须处理最小化事件并实现自定义最小化行为以使该选项有用。

# c - 分段错误，在 C 中初始化递归结构

> ID：13042385
> 
> 赞同：0
> 
> 时间：2012-10-24T03:00:24.967
> 
> 标签：c, struct, segmentation-fault

好的，我整理了一个问题代码的简化示例：

```
#include "stdio.h"
#include "string.h"

struct Trie{
    //Holds sub-tries for letters a-z
    struct Trie *sub[26];
    //Is this a substring, or a complete word?
    int is_word;
};
typedef struct Trie Trie;

Trie dictionary;

int main(int argc, char *argv[]){
    //A list of words
    char *words[7] = {"the","of","and","to","a","in","that"};

    //Add the words to the Trie structure
    int i=0, wordlen;
    Trie *sub_dict;
    for (;i<7; i++){
        //Reset
        printf("NEW WORD\n");
        sub_dict = &dictionary;
        //Add a word to the dictionary
        int j=0, c;
        while (c = words[i][j], c != '\0'){
            printf("char = %c\n",c);
            //Initialize the sub-Trie
            if (sub_dict->sub[c-97] == NULL)
                sub_dict->sub[c-97] = (Trie*) malloc(sizeof(Trie*));
            //Set as new sub-trie
            sub_dict = sub_dict->sub[c-97];
            j++;
        }
        sub_dict->is_word = 1;
    }
} 
```

基本上，我有一个 Trie 数据结构，其中包含字母“a”到“z”。我有一个应该添加到`while`循环中的单词列表。不幸的是，我在循环的不同点遇到了分段错误（取决于我何时运行它）。

我猜这个问题与这条线有关，
`sub_dict->sub[c-97] = (Trie*) malloc(sizeof(Trie*));`
但我是新手`C`，所以我完全不知道发生了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T03:08:22.583

`sub_dict->sub[c-97] = (Trie*) malloc(sizeof(Trie*));` 有错误。

`sizeof(Trie*)`在 32 位操作系统中将为 4，因为`Trie*`是指针，而在 32 位操作系统中指针的大小为 4。您可以这样做：`sub_dict->sub[c-97] = (Trie*) malloc(sizeof(Trie));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T03:12:27.697

你似乎认为当你这样做时

```
something = (Trie*) malloc(sizeof(Trie*)); 
```

然后该结构的内容被初始化为零（例如，每个成员都将作为 NULL 开始）。[malloc()](http://linux.die.net/man/3/malloc)不是这种情况。您必须使用[calloc](http://linux.die.net/man/3/calloc)或使用[memset()](http://linux.die.net/man/3/memset)在分配后重置它。

事实上，为了安全起见，我什至会在你的起始字典上调用 memset。（即使全局和静态变量[显然已初始化为零](https://stackoverflow.com/q/2091499/7806)，所以这对于您的情况可能不是必需的。）

# c++ - 指针数组和其他东西

> ID：13042386
> 
> 赞同：-2
> 
> 时间：2012-10-24T03:00:25.377
> 
> 标签：c++, arrays, pointers

所以我们有以下代码，它说明了一个“指针数组”（我认为）

```
main() {
  int *array[3];
  int x = 10, y = 20, z = 30;

  array[0] = &x;
  array[1] = &y;
  array[2] = &z;

  return 0;
} 
```

现在，假设它们不是`int`s，而是您创建的对象类的一种类型。

所以我想从这个数组中删除一个成员（即通过 delete 关键字调用它的析构函数并销毁对象，但让指针保持正常。）

如果我的怀疑是正确的，那是不可能的，我唯一的选择是将数组的内容复制到一个新数组（除了我要删除的数组），然后删除前一个数组（作为一个整体及其所有元素），而我将新元素分配给指针`array`

如果有人能证实或纠正我的怀疑，我将不胜感激，特别是因为“指针数组”这个名称具有误导性。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T04:38:59.230

假设你有一堂课`Foo`

```
Foo a; 
```

这是**Foo 对象的一个​​实例**。它是在*堆栈*上分配的。**当它们超出范围**时，它将立即被破坏。

如果您希望能够显式销毁您的对象，请在**堆上**分配它。

```
Foo* a = new Foo(); // Allocated - Constructor called.
delete a; // Freed - Destructor called. 
```

要记住的一个好规则是，**对于每个都`new`应该有一个匹配`delete`，不多也不少。**在您的示例中，您没有使用`new`关键字，因此关键字没有位置`delete`。

```
Foo* array[3]; 
```

**是堆栈**上的`Foo`对象指针数组。它们不指向任何东西，它们是未初始化的。当超出范围时，该数组将被销毁。请记住，它只会*破坏作为*指针的内容，并且不会尝试释放它们指向的任何内容。

```
array[0] = new Foo(); 
```

该数组现在包含一个指向`Foo`堆上对象的指针。它还包含 2 个未初始化的指针。如果你放手`array`超出范围，你将*泄漏内存*。为了防止这种情况，您必须释放您的`Foo`对象。

```
delete array[0];
array[0] = NULL; 
```

将未初始化或已删除的指针设置为 NULL 也是一种很好的做法。这样你就可以明确地看到它没有指向任何东西。您现在可以像这样执行检查：

```
if(array[0])
{
    // We know there is an object here, since it's not NULL.
    delete array[0];
    array[0] = NULL; // Helps prevent trying to free memory more than once.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T03:08:50.490

据我了解您的问题，它不起作用有两个原因：

1.  您根本无法删除这些元素（int 或 A），因为它们驻留在堆栈中，而不是在堆中，超出范围时它们将被自动删除；
2.  删除或移动数组不会像上面已经说过的那样删除它的元素。

至于“擦除数组[1]的内容”，可以通过以下方式完成：

```
array[1] = NULL; 
```

如果我理解正确的话。

# jquery - 提交表单时出现 jQuery json 解析错误

> ID：13042387
> 
> 赞同：0
> 
> 时间：2012-10-24T03:00:39.790
> 
> 标签：jquery, json

我在 php 应用程序中有一个页面，我在其中通过 jQuery.ajax() 提交表单。

我在这段代码中遇到解析错误：

```
 jQuery('.finishButton').click(function() {

jQuery.ajax({
    type: 'POST',
    url: 'ajax.php?module=PSTeams&func=createClass&teacherid=1',
    dataType: 'json',
    data: {
        classname: jQuery('#className').val(),
        teacherid: '1',
        students: jQuery("select[name='students[]']").serialize(),
        teams: jQuery("select[name='teams[]']").serialize(),
        inquirymodule: jQuery("select[name='inquirymodule[]']").serialize(),
        gradesix: jQuery("#gradeSix").jqxCheckBox('checked'),
        gradeseven: jQuery("#gradeSeven").jqxCheckBox('checked'),
        gradeeight: jQuery("#gradeEight").jqxCheckBox('checked'),
        gradenine: jQuery("#gradeNine").jqxCheckBox('checked'),
        gradeten: jQuery("#gradeTen").jqxCheckBox('checked'),
        gradeeleven: jQuery("#gradeEleven").jqxCheckBox('checked'),
        gradetwelve: jQuery("#gradeTwelve").jqxCheckBox('checked'),
        gradethirteen: jQuery("#gradeThirteen").jqxCheckBox('checked'),
        gradefourteen: jQuery("#gradeFourteen").jqxCheckBox('checked'),
        gradefifteen: jQuery("#gradeFifteen").jqxCheckBox('checked'),
        gradesixteen: jQuery("#gradeSixteen").jqxCheckBox('checked'),
        challenged: jQuery("#challenged").jqxCheckBox('checked'),
        advanced: jQuery("#advanced").jqxCheckBox('checked'),
        esl: jQuery("#esl").jqxCheckBox('checked'),
        studentbackground: jQuery('#studentBackground').val(),
        learninggoals: jQuery('#learningGoals').val(),
        accessNotes: jQuery('#accessNotes').val(),
        startdate: jQuery('#startDate').val(),
        enddate: jQuery('#endDate').val(),
        starttime: jQuery('#startTime').val(),
        endtime: jQuery('#endTime').val(),
        startbreak: jQuery("input[name='startbreak[]']").serialize(),
        endbreak: jQuery("input[name='endbreak[]']").serialize()
    },
    success: function(data) {
        alert('success');
    },
    error: function(XMLHttpRequest, textStatus, errorThrown) {
        alert(errorThrown);
    }
});
}); 
```

JSlint 说它是有效的。我错过了什么？

# c++ - 仅在 GNU/Linux 而不是 Windows 中导致分段错误的 C++ 链表

> ID：13042389
> 
> 赞同：3
> 
> 时间：2012-10-24T03:00:45.700
> 
> 标签：c++, windows, linux, linked-list, gnu

下面是我正在进行的练习的代码片段。它读取 CSV 并将其输入到链接列表中，然后打印到控制台。CSV 如下所示：

```
5,3,19
7,12,2
13,15,25
22,0,7 
```

它在 Linux 和 Windows 中都使用 Visual Studio 2010 和 G++ 进行编译。二进制文件在 Windows XP 命令提示符下执行，但在 Git Bash (Windows XP) 和 Linux 下运行时会出现分段错误。使用调试器（在 Linux 下），我将问题隔离为`printList()`无法识别链表的结尾。

为什么会发生这种情况，我能做些什么来防止它发生？任何建议将不胜感激。

```
#include <cstdlib>
#include <sstream>
#include <iostream>
#include <fstream>

using namespace std;

// CSV source file parameters
const char *cSourceCSV = "source.csv";
const int iFieldsPerRow = 3;

enum direction_t {UP=1, STATIONARY=0, DOWN=-1};

// struct to hold data in a singly linked list
struct CallList {
  float fTime; // time of call in seconds from beginning
  int iFromPos;
  int iToPos;
  direction_t d_tDirectionWanted();
  CallList *next;
};

direction_t CallList::d_tDirectionWanted() {
  int iBalance = iFromPos - iToPos;
  direction_t d_tDirection;
  if (iBalance < 0) d_tDirection = DOWN;
  else if (iBalance == 0) d_tDirection = STATIONARY;
  else if (iBalance > 0) d_tDirection = UP; 
  return d_tDirection;
}

CallList *head;
CallList *temp;
CallList *work;

void populateList(const char *cSourceCSV) {
  string sRow;
  string sValue;
  ifstream ioSource (cSourceCSV); // the source file placed in an input stream 
  if (ioSource.is_open()) { // making sure the stream/file is open
while (ioSource.good()) { // repeat while stream is still healthy
  // obtain the data
  temp = new CallList;
  getline (ioSource,sRow); // reading each row of data
  stringstream s_sRow(sRow); // now entering the row into a stringstream
  for (int i=0; i<iFieldsPerRow; i++) { 
    ws(s_sRow); // if there is whitespace in s_sRow remove it <-this is 
        // stopping the program from crashing but I get an extra line 1,1,1
    getline (s_sRow,sValue,','); // now getting the data from the 
                // stringstream using the comma as a delimiter
    if (i==0) {
      temp->fTime = stof(sValue);
    }
    else if (i==1) { 
      temp->iFromPos = stoi(sValue);
    }
    else if (i==2) {
      temp->iToPos = stoi(sValue);
    }
  }
  // the stationary calls are excluded
  if (temp->d_tDirectionWanted() == STATIONARY) continue;

  // place the remaining data in the linked list
  if (head == NULL) {
    // insert the head
    head = temp;
  }
  else {
//********* THIS WORKS *************
    work = head;
    // nothing fancy needed here as list is already in time order
    while(work != NULL) {
      if (work->next == NULL) {
    work->next = temp;
    break;
      }
      work = work->next;
    }
  }
//************************************
}
ioSource.close();
  }
  else cout << "Error opening file: " << cSourceCSV << endl;
  return;
}

//********* BUT THIS DOESN'T, WHY? *************
void printList(){
  work = head;
  while (work != NULL) {
printf("Time: %*.1f, From: %*i, To: %*i, Dir: %*i\n", 5, work->fTime, 2, work->iFromPos, 2, work->iToPos, 2, work->d_tDirectionWanted());
if (work->next == NULL) break;
else work = work->next;
  }
  return;
}
//************************************

int main(int argc, char *argv[]) {
  populateList(cSourceCSV);
  printList();
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T03:06:33.450

当您第一次分配 CallList 节点时，将该`next`字段设置为空。

```
temp = new CallList;
temp->next = NULL; 
```

您`printList`遍历列表直到`work`is`NULL`但从从未初始化的列表节点`work`的字段中获取其值。`next`当它结束时，最后一个节点在该`next`字段中包含垃圾，您的程序就会死掉。

为什么这在 Windows 上正常而不在 Linux 上是未定义行为的产物，这是您尝试访问未初始化变量时得到的结果。

# python - 如何使用 python 从这个矩阵中删除行/列

> ID：13042390
> 
> 赞同：2
> 
> 时间：2012-10-24T03:00:59.473
> 
> 标签：python, csv, matrix, numpy, scipy

我的矩阵看起来像这样。

```
 ['Hotel', ' "excellent"', ' "very good"', ' "average"', ' "poor"', ' "terrible"', ' "cheapest"', ' "rank"', ' "total reviews"']
 ['westin', ' 390', ' 291', ' 70', ' 43', ' 19', ' 215', ' 27', ' 813']
 ['ramada', ' 136', ' 67', ' 53', ' 30', ' 24', ' 149', ' 49', ' 310 ']
 ['sutton place', '489', ' 293', ' 106', ' 39', ' 20', ' 299', ' 24', ' 947']
 ['loden', ' 681', ' 134', ' 17', ' 5', ' 0', ' 199', ' 4', ' 837']
 ['hampton inn downtown', ' 241', ' 166', ' 26', ' 5', ' 1', ' 159', ' 21', ' 439']
 ['shangri la', ' 332', ' 45', ' 20', ' 8', ' 2', ' 325', ' 8', ' 407']
 ['residence inn marriott', ' 22', ' 15', ' 5', ' 0', ' 0', ' 179', ' 35', ' 42']
 ['pan pacific', ' 475', ' 262', ' 86', ' 29', ' 16', ' 249', ' 15', ' 868']
 ['sheraton wall center', ' 277', ' 346', ' 150', ' 80', ' 26', ' 249', ' 45', ' 879']
 ['westin bayshore', ' 390', ' 291', ' 70', ' 43', ' 19', ' 199', ' 813'] 
```

我想从中删除第一行和第 0 列并创建一个新矩阵。

我该怎么做呢？

通常在java左右Id使用如下代码：

```
 for (int y; y< matrix[x].length; y++)
     for(int x; x < matrix[Y].length; x++)
      {
        if(x == 0 || y == 0)
         {
           continue
          }
          else
           {
             new_matrix[x][y] = matrix[x][y];
           }

      } 
```

在 python 中有没有这样的方法来迭代和选择性地复制元素？

谢谢

* * *

编辑

当我遍历矩阵时，我还尝试将每个矩阵元素从字符串转换为浮点数。

这是我根据以下答案更新的修改代码。

```
A = []
f = open("csv_test.csv",'rt')
try:
    reader = csv.reader(f)
    for row in reader:
        A.append(row)
 finally:
     f.close()

 new_list = [row[1:] for row in A[1:]]
 l = np.array(new_list)
 l.astype(np.float32)
 print l 
```

但是我收到一个错误

```
 --> l.astype(np.float32)
       print l

      ValueError: setting an array element with a sequence. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T03:05:25.713

如果您有一个列表列表，那么：

```
new_list = [row[1:] for row in current_list[1:]] 
```

因此，创建一个忽略第一行的新矩阵，然后对于之后的每一行，忽略第一列。

如果它碰巧是 a `numpy.array`，那么您可以使用：

```
your_array[1:,1:] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T03:41:24.700

## 基本理念

这是我想出的：

```
>>> import numpy as np
>>> l = [['hotel','good','bad'],['hilton',1,2],['ramada',3,4]]
>>> a = np.array(l) # convert to a numpy array to make multi-dimensional slicing possible
>>> a
array([['hotel', 'good', 'bad'],
       ['hilton', '1', '2'],
       ['ramada', '3', '4']], 
      dtype='|S4')
>>> a[1:,1:] # exclude the first row and the first column
array([['1', '2'],
       ['3', '4']], 
      dtype='|S4')
>>> a[1:,1:].astype(np.float32) # convert to float
array([[ 1.,  2.],
       [ 3.,  4.]], dtype=float32) 
```

您可以将二维列表传递给 numpy 数组构造函数，对二维数组进行切片以删除第一行和第一列，然后使用该[`astype`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.astype.html)方法将所有内容转换为浮点数。

全部在一条线上，那就是：

```
>>> l = [['hotel','good','bad'],['hilton',1,2],['ramada',3,4]]
>>> np.array(l)[1:,1:].astype(np.float32)
array([[ 1.,  2.],
       [ 3.,  4.]], dtype=float32) 
```

## 价值错误

你得到 a`ValueError`因为你实际上有一个锯齿状的数组。使用问题中代码中的变量`new_list`，您可以向自己证明这一点：

```
>>> [len(x) for x in new_list]
[9, 9, 9, 9, 9, 9, 9, 9, 9, 8] 
```

最后一行的长度只有 8，而不是像所有其他行一样的 9。给定一个 2d 锯齿状列表，`numpy.array`构造函数将创建一个 1d numpy 数组，其中 a `dtype`of `object`。该数组中的条目是 Python 列表。该`astype`调用正在尝试将 Python 列表转换为`float32`，但失败了。我猜这只是人为错误的情况。如果你修复了丢失的条目，你应该很高兴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T04:32:24.130

嵌套列表推导是您所需要的。例子：

```
def remove_from_matrix(matrix, columns, rows):
    return [
           [float(matrix[row_num][col_num])
           for col_num in range(len(matrix[row_num])) 
           if not col_num in columns]

           for row_num in range(len(matrix))
           if not row_num in rows] 
```

# c# - 将 SQL 结果 C# 循环到下拉列表中

> ID：13042392
> 
> 赞同：0
> 
> 时间：2012-10-24T03:01:07.790
> 
> 标签：c#, asp.net, loops, html.dropdownlistfor

任何人都可以帮助我使用 C# 循环来填充 ASP:DropDownList。我正在使用以下代码将数据绑定到我的下拉列表。但是，第一个结果不会填充到下拉列表中。但是应该有 3 个，下拉列表中只有 2 个。

任何帮助都很棒。

```
 SqlDataReader dr;
        dr = sqlcmd.ExecuteReader();
        dropdown.DataSource = dr;

        while (dr.Read())
        {
            dropdown.DataValueField = "ID";
            dropdown.DataTextField = "Description";
            dropdown.DataBind();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T03:03:12.347

由于您将数据读取器绑定到下拉列表，因此您不需要显式循环它（调用`dr.Read()`实际上是在吃第一个元素）。

尝试这个：

```
SqlDataReader dr = sqlcmd.ExecuteReader();
dropdown.DataSource = dr;
dropdown.DataValueField = "ID";
dropdown.DataTextField = "Description";
dropdown.DataBind(); 
```

**更新**

要添加默认项，请在上面的代码之后执行此操作：

```
dropdown.Items.Insert(0, new ListItem("Please Select","")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T03:04:22.703

代替

```
dropdown.DataValueField = "ID";
dropdown.DataTextField = "Description"; 
```

利用

```
dropdown.DataValueField = dr["ID"].ToString();
dropdown.DataTextField = dr["Description"].ToString(); 
```

# objective-c - 循环内的 FliteController

> ID：13042397
> 
> 赞同：1
> 
> 时间：2012-10-24T03:01:38.587
> 
> 标签：objective-c, text-to-speech, openears, flite

所以我有这个循环：

```
for (int i =0; i< ([rounds_words count]-1); i++){
  [self.fliteController say:[rounds_words objectAtIndex:(i)] withVoice:self.slt];
} 
```

其中array_o_words 是一个字符串数组，我想使用OpenEars 的TtS 引擎flite 来表示。

我已按照[http://www.politepix.com/openears/#FliteController_Class_Reference](http://www.politepix.com/openears/#FliteController_Class_Reference)上的说明进行操作，但当然这只是说明只能有一个实例。我试过重置 fliteController = nil 但这只会阻止它工作。

有什么建议可以使循环工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:30:10.883

OpenEars 开发人员在这里。对于 FliteController 的当前实现，您将通过在第一个索引处说出 NSString、等待 OpenEarsEventsObserver 委托方法 fliteDidFinishSpeaking 触发、在下一个索引处说出 NSString 等来获得所需的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T04:08:26.833

在我看来，循环应该可以正常工作，这让我相信问题存在于其他地方。既然您说一次只能有一个相关对象的实例，我假设您必须为每个事件提出某种完成处理程序，以便您知道在什么时候开始下一个事件。

此外，您是对的，将 nil 传递给循环中的对象会破坏操作。这基本上就像循环遍历你的数组并告诉每个对象开始然后立即告诉所述对象为零。

旁注，如果您希望对数组中的每个项目执行操作，请考虑以下更改。

采用：

```
for (int i =0; i < ([rounds_words count]); i++) 
```

就目前而言，您当前的循环总是会短路。

# vb.net - 如何更改VB.NET标签中部分文本的大小？

> ID：13042403
> 
> 赞同：0
> 
> 时间：2012-10-24T03:02:31.553
> 
> 标签：vb.net, visual-studio, text, visual-studio-2012

我想更改标签中一部分的大小。我不能再做一个标签。（例如：我希望“标题”这个词比其他词更大，例如：“我在问一个问题”）。

任何想法如何做到这一点？任何帮助，将不胜感激。

PS 我正在使用 Visual Studio 2012 在 Visual Basic.NET 代码中制作 Windows Store 应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T03:17:26.730

您可以接管`Label`自己的渲染并分两遍渲染文本：首先是较大的部分，然后是其余部分。为此，您必须创建一个自定义控件`Label`（通过从 派生`Label`），然后处理该`Paint`事件。MSDN 有一个简单的例子来说明如何做到这一点：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.paint.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.paint.aspx)

准备编写一些相对复杂的渲染逻辑：您必须根据您渲染的文本行的大小计算文本的位置，然后`DrawString()`使用正确的参数调用以实际进行文本绘制。不过，这很有趣。

# mysql - 将mysql表复制到另一个实例的最佳方法？（不直播）

> ID：13042404
> 
> 赞同：0
> 
> 时间：2012-10-24T03:02:37.467
> 
> 标签：mysql

我有多个硬盘。一个快满了，所以我需要将一两个数据库移动到另一个硬盘上。数据库都在它们自己的文件夹中。一个数据库为 15+gb，其他数据库为 ~.5gb。移动它们的最佳方式是什么？我希望我可以简单地编写创建数据库，然后在空白数据库上复制/写入，但我不知道它是否会起作用，或者只是看起来起作用，以后会给我带来麻烦。

将一个数据库复制到另一个硬盘的最佳方法是什么。每个硬盘驱动器都是它们自己的实例/端口。我希望我不需要编写脚本来复制每个表，但我知道很多人只有 3 个表，所以不会很难。这也不是实时的，所以我可以停止/重新启动/锁定我想要的任何东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:18:14.730

我个人使用 Navicat 转储生成平面 sql 文件的数据库...然后在新服务器上创建新数据库并使用 sql 文件的内容运行查询...您可以使用 phpmyadmin 作为免费解决方案：[http://www.webhostingtalk.com/showthread.php?t=226796](http://www.webhostingtalk.com/showthread.php?t=226796)

# c - fgets() 在什么情况下会卡住？

> ID：13042405
> 
> 赞同：0
> 
> 时间：2012-10-24T03:02:40.053
> 
> 标签：c, linux, fgets

```
printf("ok before fgets\n");
while ( (fgets(buff, sizeof(buff), fi)) != NULL)
{
    printf("ok after");
    if(write(connfd,buff,strlen(buff)) != strlen(buff))
    {
        printf("write() failed\n");
        close(connfd);
        exit(1);
    }
} 
```

这是代码。该代码在 fgets 之前打印“ok”，但它从不打印“ok after”。我想知道是什么问题。

如果信息不够，我正在编写一个网络通信程序。并且一旦客户端程序被杀死，该程序就不会卡住并打印出几个“ok after”。好像和网络有关，但是怎么fgets() 一个本地文件跟网络有关呢？我实际上是在尝试将此文件发送到远程客户端，但似乎该错误发生在发送之前。

* * *

*经过聊天讨论，很明显问题根本不是`fgets()`网络代码。循环中的诊断消息没有换行符，因此诊断输出在生成时没有出现。*

* * *

感谢 [Jonathan Leffler](https://stackoverflow.com/users/15168/jonathan-leffler)，问题解决了。printf("确定后"); 信息没有出现，因为没有打印出换行符。因此，通过添加换行符： printf(ok after\n); 我们可以看到“ok after”被打印出来了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T03:23:03.000

有两种可能性：

*   fgets() 中存在错误，并且从未进入 while 循环，因为它返回 NULL。

或者

*   fgets 正在等待 sizeof(buff) 字符、新行或 EOF：

> fgets() 函数应从流中读取字节到 s 指向的数组中，直到读取 n-1 个字节，或者读取 <newline> 并将其传输到 s，或者遇到文件结束条件。然后字符串以空字节终止。

[http://pubs.opengroup.org/onlinepubs/007904875/functions/fgets.html](http://pubs.opengroup.org/onlinepubs/007904875/functions/fgets.html)

既然你说它被卡住了，它表示第二个选项。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T03:17:50.283

从`fgets`（我的 Mac OS 10.5 盒子上的那个）的手册页：

> fgets() 和gets() 函数不区分文件结束和错误；调用者必须使用 feof(3) 和 ferror(3) 来确定发生了什么。

所以此时您还没有给我们（或您自己）足够的数据来诊断问题。

* * *

请注意，其中`(3)`只是指示您将查阅 unix 手册的哪一部分，与这些函数的参数无关。

# php - 我需要帮助理解在类方法中声明的函数的范围

> ID：13042407
> 
> 赞同：2
> 
> 时间：2012-10-24T03:02:45.590
> 
> 标签：php, scope

好的，所以这已经烤了我的面条一段时间了。我有一个类，它的方法定义了一个全局可访问的函数。我的问题是：内部类方法如何定义可在全局范围内访问的函数？

这是一个示例：

```
class MyClass 
{

    // ... accessors, constuctors other methods, et al... 

    // The method in question:
    private function myPrivateMethod()
    {
        if( !function_exists( 'someArbitraryFunction' ) )
        {
            function someArbitraryFunction( $args )
            {
                return "Hello, {$args} world!";
            }
        }            
    } 
} 
```

该类像往常一样在应用程序的早期实例化，但它是在另一个类的方法中实例化的。这是一个浅范围链，但嵌套得足够多，以至于（对我而言）它为什么可以在应用程序之外访问是没有意义的。这违背了我对封装的理解，一些见解将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T03:05:46.320

声明的函数将始终具有全局范围。这不是 JavaScript。

看：

```
class MyClass 
{

    // ... accessors, constuctors other methods, et al... 

    // The method in question:
    private function myPrivateMethod()
    {
        if( !function_exists( 'someArbitraryFunction' ) )
        {
            function someArbitraryFunction( $args )
            {
                return "Hello, {$args} world!";
            }
        }            
    } 

    public function run(){
        $this->myPrivateMethod();
    }
}

var_dump(function_exists('someArbitraryFunction')); // false
$obj = new MyClass();
$obj->run();
var_dump(function_exists('someArbitraryFunction')); // true 
```

作为具有 C/C++ 背景的语言，函数和方法之间有不同的行为。在 PHP 中，函数不服从访问修饰符。

无论它们写在代码中的什么位置，一旦执行通过声明，它就会被定义。

如果您需要一个函数来遵守作用域，我强烈建议您这样做，因为您可以更好地利用变量的 GC，您可以在 >= PHP 5.3 中使用闭包：

```
class MyClass{

    private $myArbitraryMethod;

    private function myPrivateMethod(){
        $this->myArbitraryMethod = function($args){

        }
    }

} 
```

# ruby-on-rails - Rails：如何缓冲 ActiveRecord 查询？

> ID：13042410
> 
> 赞同：3
> 
> 时间：2012-10-24T03:03:11.737
> 
> 标签：ruby-on-rails, activerecord

我想保存一个查询，然后在它之上构建，然后执行它。

例如，不知何故

```
query = Post.order('likes DESC') # buffer the query
query = query.limit(3) # add on top of it
query.run # run it - this is the wrong syntax fyi 
```

这可以做到吗？什么是正确的语法？

PS。我不确定“缓冲区”是否是正确的词，如果我错了，请纠正我。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T11:37:58.020

在 Rails 3 中使用 ActiveRecord 构建查询时，您不需要任何“缓冲区”，因为它使用[Arel](https://github.com/rails/arel)。您`query = Post.order('likes DESC')`为您提供了 ActiveRecord::Relation 的实例。此对象包含有关查询的信息，但不是实际数据。例如，要获取数据，您可以调用`.first`或`.all`方法。这是rails框架（> = 3.0）实现所谓的“延迟初始化”的方式。这意味着 ActiveRecord::Relation 是一种代理。仅当您尝试获取模型的某些字段时（或者当您使用 .all 等强制加载数据时）才会对数据库进行真正的`.first`查询`.last`。在此操作之前，您可以构建过滤条件链并确保您不会“干扰”数据库。你的代码可能是这样的：

```
query = Post.order('likes DESC') # ActiveRecord::Relation object with info about your query
query = query.limit(3) # adds more filtering options
@posts = query.all # here ActiveRecord takes data from the database 
```

[#239 ActiveRecord::Relation 演练](http://railscasts.com/episodes/239-activerecord-relation-walkthrough)将使您对 ActiveRecord::Relation 有更多的了解

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T03:10:35.653

如果您使用 AREL 和 Rails 3，这会自动发生。AREL 将在您链接选项时构建一个查询，并在您调用`.all`或开始通过任何其他方式访问数据时执行查询。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T03:10:55.113

这正是 ActiveRecord 的工作原理。当它遇到迭代器或其他一些非 AR 方法时，它会使用构建的查询调用数据库。它在控制台中的工作方式略有不同，因为我相信`.inspect`在您按下回车后会调用该方法来显示输出。

按照你的建议去做就好了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-10T06:53:20.697

您可以使用`ActiveRecord::Relation#load`方法强制数据库命中：

[https://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-load](https://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-load)

# excel-formula - Excel 如果第 1 列和第 2 列的单元格值匹配，则将单元格 2 行的值插入单元格 1 行的另一个单元格

> ID：13042416
> 
> 赞同：1
> 
> 时间：2012-10-24T03:04:10.320
> 
> 标签：excel-formula

我需要在 SHEET2 中找到与 SHEET1 上我当前单元格的 C 列值匹配的列 A 中包含相同值的行 X（整个 A 列中有一个这样的值），然后将值从 SHEET2 行 X 的将 D 列放入当前单元格，我在其中输入您希望提供给我的公式:)))

我试过这个：

```
="SHEET2!D"& MATCH('SHEET1!C16,SHEET2!A:A,0) 
```

而不是输入它插入的值：

```
DBW!D110 
```

所以它确实找到了正确的行（在这种情况下为#110）并且 DBW！D110 是正确的单元格，我如何获得它的值（而不是它的单元格 #）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:08:24.007

获得单元格引用后，您可以使用 查看其值`INDIRECT`，因此您的公式将从

```
="SHEET2!D"& MATCH('SHEET1!C16,SHEET2!A:A,0) 
```

至

```
=INDIRECT("SHEET2!D"& MATCH('SHEET1!C16,SHEET2!A:A,0)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T03:18:17.757

```
 SHEET 1
  A   B  C  D
1 1   2  8  =VLOOKUP(C1,SHEET2!A:A,4,FALSE)
2 10  6  4  =VLOOKUP(C2,SHEET2!A:A,4,FALSE)
3 15  5  11 =VLOOKUP(C3,SHEET2!A:A,4,FALSE)

SHEET 2
  A  B  C
1 4  5  23 
2 8  7  45
3 11 12 16 
```

这要求 Sheet2 列是 Alpha 排序才能正常工作

# php - 是什么导致未定义的索引错误？

> ID：13042430
> 
> 赞同：1
> 
> 时间：2012-10-24T03:06:20.727
> 
> 标签：php, html, mysql

```
<?php 
  mysql_connect("localhost","root",""); 
  mysql_select_db("sample") or die("database could not connect "); 
?> 
<html> 
<head>
<meta name="description" content="Php Code for View, Search, Edit and Delete 
Record" />
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
<title>View Student  Record</title>
</head>
<body>
<center><h1><u>Student Database</u></h1></center>
<?php
  $roll=$_GET["roll"]; 
  $query="select * from student where roll='$roll'"; 
  $result=mysql_query($query);
  while ($row = mysql_fetch_array($result)) { 
  }
?>
<table style=" border:1px solid silver" cellpadding="5px" cellspacing="0px" 
align="center" border="1">
<tr>
<td colspan="4" style="background:#0066FF; color:#FFFFFF; font-size:20px">VIEW 
STUDENT DATABASE</td></tr>
<tr>
<td> Roll Number</td><td><? echo $row[0];?></td> 
<td> Class</td><td><? echo $row[1];?></td> 
</tr>
<tr>
<td> Name of Student</td><td><? echo $row[2];?></td> 
</tr>
<tr>
<td>Sex</td><td><? echo $row[3];?></td> 
<td>Address1</td><td><? echo $row[4];?></td></tr>
<tr> 
<td>Address2</td><td><? echo $row[5];?></td> 
<td>Address3</td><td><? echo $row[6];?></td></tr> 
<tr>
<td>Remarks</td><td><? echo $row[7];?></td></tr> 
<tr>
</table>
<p align="center"><a href="index.php">Go Back to Home</a></p> 
</body>
</html> 
```

那是我的代码

```
<?php 
  $roll=$_GET["roll"]; 
  $query="select * from student where roll='$roll'";
  $result=mysql_query($query);
  while ($row = mysql_fetch_array($result)) {
  }
?> 
```

这是我的问题。我不知道如何摆脱这个错误：

> 注意：未定义的索引：在第 16 行滚动 C:\xampp\htdocs\sample\view.php

第 16 行是`$roll=$_GET["roll"];`.

此代码应在每一行中显示信息，但当我运行它时，它什么也没显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T03:20:19.613

**确保传递`roll`querystring**。没有它，您的 PHP 代码将毫无意义。您正在从 MySql 获取数据`$roll`并尝试显示它；如果该变量没有值，则没有数据。因此`isset`，按照 Phil 的建议添加，如果未设置，请运行**任何PHP。**

此外，摆脱`while`循环，只执行`$row = mysql_fetch_array($result)`一次，并且仅当`isset($_GET['roll'])`. 否则，您稍后会尝试`false`在代码中回显。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T03:13:00.237

您的问题是未定义的`$_GET`索引。使用`isset()`，例如

```
$roll = isset($_GET['roll']) ? $_GET['roll'] : null; // or a suitable default 
```

尝试这样的事情来修复你的查询循环

```
$result=mysql_query($query);
?>

<table style=" border:1px solid silver" cellpadding="5px" cellspacing="0px" align="center" border="1">
<tr>
<td colspan="4" style="background:#0066FF; color:#FFFFFF; font-size:20px">VIEW 
STUDENT DATABASE</td></tr>

<?php while ($row = mysql_fetch_array($result)) : ?>

<!-- rows, cells and echos, etc -->

<?php endwhile ?>

</table> 
```

最后，现在不推荐使用 MySQL 扩展。我强烈建议您切换到[PDO](http://www.php.net/manual/en/book.pdo.php)。使用[`PDOStatement::bindParam()`](http://php.net/manual/en/pdostatement.bindparam.php)还可以解决您的 SQL 注入漏洞`mysql_query()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T03:22:24.153

将此代码放在下面`$roll=$_GET["roll"];`

```
if (isset($_GET["roll"))
{
// IF TRUE, DO THE QUERY ECHO YOUR RESULT
}

?> 
```

# ctags - ctags 无法打开选项文件“.ctags”

> ID：13042434
> 
> 赞同：6
> 
> 时间：2012-10-24T03:06:53.497
> 
> 标签：ctags

ctags 没有看到我的`~/.ctags`文件，所以我尝试使用该`--options`选项指定它，但它总是说它找不到文件，无论我把它放在哪里：

```
$ touch .ctags && ctags --options=.ctags
ctags: cannot open option file ".ctags" : No such file or directory 
```

我正在使用最新的自制版本（5.8），并且我也尝试过使用 HEAD。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-31T15:06:10.980

我的解决方法是更改`.ctags`​​为`.ctags.cnf`. 我无法解释为什么这会奏效。但似乎 Exuberant Ctags 需要扩展，我将其更改为`.ctags.bak`它也可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:05:14.110

这有点离题，但我在 Windows 上遇到了同样的问题。我有一个名为的批处理文件`ctags.bat`，其中包含以下行：

```
"C:\SOME_DIRECTORY\Vim Tools\ctags.exe" --options="%CD%\ctags.cnf" 
```

该行扩展为：

```
"C:\SOME_DIRECTORY\Vim Tools\ctags.exe" --options="MY_CURRENT_DIRECTORY\ctags.cnf" 
```

Ctags 给了我同样的错误：

```
ctags.exe: cannot open option file "MY_CURRENT_DIRECTORY\ctags.cnf" : No such file or directory 
```

转义最后一个`\`使它起作用，即我将行更改为：

```
"C:\SOME_DIRECTORY\Vim Tools\ctags.exe" --options="%CD%\\ctags.cnf" 
```

注意`\\`前面 `ctags.cnf`

关于您在 linux 上的问题：尝试在 '.ctags' 周围添加引号：

```
ctags --options='./.ctags' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-10T11:38:04.567

您必须指定 ctags 选项的完整路径：`/Users/your_username/.ctags`而不是`~/.ctags`

# dry - 如何在 ExpressionEngine 中重用代码块并将参数传递给它们

> ID：13042435
> 
> 赞同：7
> 
> 时间：2012-10-24T03:07:04.390
> 
> 标签：dry, expressionengine

假设我有一个电子商务网站，我想通过大量模板来展示我展示产品网格的方式。使用 DRY 原则，您将如何重用此代码并可能将参数传递到块中以在不同区域进行一些自定义？{embed} 是最佳选择吗？我可以看到类似的东西会产生很多不必要的开销。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-24T04:03:15.257

我在客户网站上做了这件事。我在整个网站上重新使用了相同的产品网格，它是 100% DRY。我使用了 Stash 的 dev 分支并使用了新的嵌入功能。虽然常规嵌入始终是一种可行的选择*，*但 Stash 嵌入更高效、更强大。

真正的区别在于您如何传递变量以及何时解析嵌入。使用 stash embeds 可以在循环标签内使用，并且只解析一次数据。（在循环的每次迭代中都会解析常规嵌入。）

这是我不久前在 Twitter 上为另一位用户发布的要点。 [https://gist.github.com/2950536](https://gist.github.com/2950536)

请注意，该示例代表多个文件和代码块，或者我会在这里发布。IMO，如果我把它贴在这里，它会让这篇文章难以阅读和阅读。本质上，它遵循修改后的模板部分方法。

有关模板部分的更多信息。 [http://eeinsider.com/blog/ee-podcast-stash-template-partials/](http://eeinsider.com/blog/ee-podcast-stash-template-partials/)

但更直接地回答“如何用 Stash 替换嵌入变量？”的问题。该解决方案相当简单，并且基于“setter”和“getter”的核心编程概念。理论上，如果设置了一个变量，则可以在模板中的任何稍后位置检索它。诀窍是在解析 getter 之前设置变量。

```
{exp:stash:set}

    {stash:page_content}

        {exp:channel:entries channel="your-channel"}

            {stash:your_var_1}Some value 1{/stash:your_var_1}
            {stash:your_var_2}Some value 2{/stash:your_var_2}
            {stash:your_var_3}Some value 3{/stash:your_var_3}
            {stash:your_var_4}Some value 4{/stash:your_var_4}

            {stash:embed name="your-template" process="start"}

        {/exp:channel:entries}

    {/stash:page_content}

{/exp:stash:set}

{stash:embed name="header" process="end"} 
```

这就是*过程*参数发挥作用的地方。这将允许您在运行条目循环*之前*嵌入模板，并嵌入包含站点包装器并输出页面内容的标题。一旦掌握了窍门，它就会变得非常强大，并使您的网站更加干净。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-24T03:56:27.863

您可以使用嵌入或隐藏，具体取决于您要传递的内容。

[https://github.com/croxton/Stash](https://github.com/croxton/Stash)

# php - 在使用 PHP、JQUERY 插入数据库期间保持表单中的数据值

> ID：13042442
> 
> 赞同：0
> 
> 时间：2012-10-24T03:07:54.073
> 
> 标签：php, cakephp, jquery

我有如下代码：

```
<form method="post" name ="frm">
<table>
<tr>
    <td>Name:</td>
    <td><input type ="text" id="name"></td>
    <td></td>
</tr>
<tr>
    <td>Sex:</td>
    <td>Female<input type ="radio" id="female" name="female"> </td>
    <td>Male<input type ="radio" id="male" name="male"> </td>
</tr>
<tr>
    <td colspan="3"><input type ="submit" id="btnSave" name="btnSave"></td>

</tr>
</table>
<?php
if(isset($_POST["btnSave"])){

    //insert it to data base.........
    // the problem is that during insert it to database ,the data will store in database but the form of Name value,Sex value,it displays empty
    //I do not want like this ,What I want is : I want to keep the value of Name and Sex althought it inserted succesfull

}
?>
</form> 
```

**我需要：**

在将数据插入数据库期间，我想保留表单的值，如姓名、性别值。那么我将如何解决这个问题。请任何人帮助我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:15:36.167

如果 html5 本地存储以及 ajax 对您来说很复杂，您可以将输入字段的值设置为发布数据本身，例如

```
<input type="text" name="theName" id="theId" value="<?= $_POST['theName'] ?>" /> 
```

这样，输入将在您提交按钮后显示。

ps 这不是最佳实践！如果你想让你的代码干净，你最好坚持使用 ajax/jquery 或 html5 本地存储，如果你不熟悉这些技术中的任何一种，并且你只需要在提交后获取表单中的值，使用这个“解决方案"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T03:11:14.453

提交按钮清除表格。您可以使用 ajax 或 jQuery，然后使用 ajaxsubmit 函数或 json。有很多选择。

# iphone - 使用 CGImage 从数据中生成低质量的 JPG？

> ID：13042447
> 
> 赞同：-2
> 
> 时间：2012-10-24T03:08:38.253
> 
> 标签：iphone, objective-c, ios, uiimage, cgimage

我有一些代码可以从数据中加载 jpg 并将其显示在 UIImageView 中。因为这需要一秒钟，所以我想加载图像的较低质量版本并在加载完整图像时显示它。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T03:38:27.367

你应该看看[Image I/O](https://developer.apple.com/library/mac/documentation/graphicsimaging/Conceptual/ImageIOGuide/imageio_source/ikpg_source.html#//apple_ref/doc/uid/TP40005462-CH218-DontLinkElementID_6)

它允许您从源图像创建缩略图，并支持检索可能嵌入源图像中的缩略图。JPG 图像通常嵌入了低质量的缩略图。

此外，如果加载图像会阻塞您的应用程序，您应该考虑在后台线程上执行此操作：[使用大中央调度从文件加载 uiimage](https://stackoverflow.com/questions/10692864/load-uiimage-from-file-using-grand-central-dispatch)

# mysql - 存储车辆的方向/航向信息

> ID：13042448
> 
> 赞同：1
> 
> 时间：2012-10-24T03:08:40.670
> 
> 标签：mysql, google-maps, map, gps

我正在开发一个 GPS 相关系统。我需要存储经度、纬度和车辆位置的方向。根据我的理解，方向是一个数值。稍后我需要识别在同一方向行驶的其他车辆。假设在给定的道路上向北行驶。存储方向的最佳方法是什么。如果我将其存储为数字（60 度等），则很难让其他车辆沿同一方向行驶，因为该数值可能会略有变化。感谢任何建议。

# mysql - 计数和连接表

> ID：13042459
> 
> 赞同：0
> 
> 时间：2012-10-24T03:11:30.080
> 
> 标签：mysql

我有两张桌子。一个是“探针”，另一个是“成绩单”。

探针表：“探针”

ProbeID-------TranscriptID----

```
2655       4555555
2600       5454542
2600       4543234
2344       5659595 
```

...ETC

成绩单表：“成绩单”

成绩单ID----位置----

```
7896736      chr1
5454542      chr1 
```

...ETC

我需要找出每条染色体有多少转录本？和 每条染色体有多少个探针？

```
SELECT COUNT(*) 
FROM transcript 
```

= '28869' #以上我认为给了我每条染色体的转录本（即位置）。

我需要帮助回答第二部分（首先，如果它错了）。我假设我需要使用该`JOIN`子句。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:14:57.650

**每个染色体的探针数**

```
SELECT Location, COUNT(ProbeID) AS ProbeCnt
FROM transcript T
JOIN probe P ON P.TransciprtID = T.TranscriptID
GROUP BY Location
-- optionally you can ORDER BY to either get
-- ORDER BY COUNT(ProbID) DESC  --  list in descending order of nb of probes
-- ORDER BY Location            --  list in order of chromosome name 
```

至于您的第一个查询，它是不正确的。要获得
**每条染色体的转录本数**，您需要

```
SELECT Location, COUNT(TranscriptID) as TransCnt
FROM transcript
GROUP BY Location 
```

您当前的查询给出了整个成绩单表的成绩单总数，而不考虑染色体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T03:18:31.610

成绩单计数

```
select location, count(location) AS transacripts_num 
from transcript GROUP by location; 
```

探针计数

```
select location, count(location) AS probe_num 
from transcript t join probe p
ON t.transcriptId= p.probeId
GROUP by location; 
```

# java - 在 Google App Engine Java 应用程序中加载自定义密钥库

> ID：13042461
> 
> 赞同：21
> 
> 时间：2012-10-24T03:12:07.587
> 
> 标签：java, google-app-engine, https, keystore, urlfetch

我想使用[URLFetch](https://developers.google.com/appengine/docs/java/urlfetch/overview)服务在 Google App Engine 应用程序中打开**HTTPS连接。**为了能够**验证我的应用程序正在与之通信的服务器的 SSL 证书，我正在使用我自己的密钥库文件**。我想在加载我的应用程序时（即在执行任何 HTTPS 请求之前）在[预热请求中读取此文件。](https://developers.google.com/appengine/docs/java/config/appconfig#Warmup_Requests)密钥库文件是我的 WAR 文件的一部分。

 **```
TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());  
KeyStore keystore = KeyStore.getInstance(KeyStore.getDefaultType());
keystore.load(ClassLoader.getSystemResourceAsStream("myKeystoreFile"), "password".toCharArray());  
trustManagerFactory.init(keystore);  

TrustManager[] trustManagers = trustManagerFactory.getTrustManagers();  
SSLContext sslContext = SSLContext.getInstance("SSL");  
sslContext.init(null, trustManagers, null);  

HttpsURLConnection.setDefaultSSLSocketFactory(sslContext.getSocketFactory()); 
```

但是，我不能使用这种方法，因为虽然 HttpURLConnection 在 GAE 的 JRE 白名单上，但 HttpsUrlConnection 却不在。

是否有另一种方法可以在 GAE 中使用自定义密钥库？我在 GAE 文档中没有找到任何关于此的信息。**看起来虽然 Google 的 URLFetch 服务支持 HTTPS，但无法自定义密钥库。**它是否正确？

如果这是不可能的，那么该方法通常仍然有效吗？或者**是否有其他方法仍然允许我验证 SSL 证书？**

**更新**

2009 年，来自 Google 的 App Engine 开发人员 Nick Johnson 在[https://groups.google.com/d/topic/google-appengine-python/C9RSDGeIraE/discussion](https://groups.google.com/d/topic/google-appengine-python/C9RSDGeIraE/discussion)上说：

> urlfetch API 不允许您指定自己的客户端证书，因此不幸的是，您目前无法实现您想要实现的目标。

**这仍然正确吗？**如果 App Engine 中的每个 HTTP(s) 请求都依赖于 URLFetch，这意味着在 GAE 中根本无法使用自定义证书。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-29T17:10:34.583

我最近遇到了同样的问题，并且使用与 appengine-api-stubs 打包的 HttpClient 实现对我有用。

Maven依赖：

```
<dependency>
  <groupId>com.google.appengine</groupId>
  <artifactId>appengine-api-stubs</artifactId>
  <version>1.9.18</version>
</dependency> 
```

代码：

```
// create SSL Context which trusts your self-signed certificate
TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
KeyStore keystore = KeyStore.getInstance(KeyStore.getDefaultType());
keystore.load(ClassLoader.getSystemResourceAsStream("myKeystoreFile"), "password".toCharArray());
trustManagerFactory.init(keystore);
TrustManager[] trustManagers = trustManagerFactory.getTrustManagers();
SSLContext sslContext = SSLContext.getInstance("SSL");
sslContext.init(null, trustManagers, null);

// register your trusting SSL context
Protocol.registerProtocol("https",
        new Protocol("https", (ProtocolSocketFactory) new SocketFactoryWrapper(sslContext.getSocketFactory()), 443));

// make the https call
HttpClient httpclient = new HttpClient();
GetMethod httpget = new GetMethod("https://myendpoint.com");
httpclient.executeMethod(httpget);
System.out.println(httpget.getStatusLine()); 
```

这基本上与

```
HttpsURLConnection.setDefaultSSLSocketFactory(sslContext.getSocketFactory()); 
```

但是出于某种原因或其他应用程序引擎不会阻止它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T16:01:16.993

您应该注册为**[出站套接字支持的](https://docs.google.com/a/pogoapps.com/spreadsheet/viewform?formkey=dF9QR3pnQ2pNa0dqalViSTZoenVkcHc6MQ#gid=0)****[受信任测试人员](https://developers.google.com/appengine/docs/features#Trusted_Tester_Features)**。在**所需功能**下，他们使用 SSL。如果支持 JDK SSL API 的更多部分，构建这样的东西会很简单。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T19:55:08.147

我遇到了类似的问题......我需要`keystore.p12`调用一个外部 Web 服务，但没有机会从类路径加载它。我能够使用它的唯一方法是将它放入例如`/WEB-INF/keystore.p12`并从那里加载它。

```
ServletContext context = getContext();
URL resourceUrl = context.getResource("/WEB-INF/keystore.p12"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-25T20:00:26.197

我正在使用 Appengine API 1.9.56 以及 Dima 的建议

```
Protocol.registerProtocol("https",
    new Protocol("https", (ProtocolSocketFactory) new SocketFactoryWrapper(sslContext.getSocketFactory()), 443)); 
```

不再工作了。因此我也不需要`appengine-api-stubs`图书馆。

但是，`HttpsURLConnection.setDefaultSSLSocketFactory`工作正常。

这是我的完整解决方案，解决了我的问题：

```
 KeyStore keystore = KeyStore.getInstance("JKS");
    InputStream in = getClass().getResourceAsStream("/mytruststore.jks");
    keystore.load(in, "password".toCharArray());
    TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
    trustManagerFactory.init(keystore);
    TrustManager[] trustManagers = trustManagerFactory.getTrustManagers();
    SSLContext sslContext = SSLContext.getInstance("SSL");
    sslContext.init(null, trustManagers, null);

    HttpsURLConnection.setDefaultSSLSocketFactory(sslContext.getSocketFactory()); 
```

幸运`HttpsURLConnection`的是，它不再被列入黑名单，就像提出问题时一样。****

# image - 动作识别基础？

> ID：13042466
> 
> 赞同：1
> 
> 时间：2012-10-24T03:12:51.753
> 
> 标签：image, image-processing, image-recognition, motion-detection

场景：我想从笔记本电脑的摄像头获取输入，并检测用户在空中的虚拟点移动手指。

我不知道从哪里开始 :) 你建议用什么库来做繁重的工作？我应该阅读哪些主题？

我的最佳情况是跨平台的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T03:21:10.190

在完全没有模式识别方面的先验知识的情况下，我会建议一些非常基本和简单的东西。尝试在**opencv**中创建、打开、显示、绘制图像，当你觉得舒服时，尝试从视频中减去两个连续的图像。当您的图像包含两帧之间的差异时，您可以从更高级的算法（分割等）开始。您可以从简单的阈值化开始，并通过简单的形态学操作细化您的结果，如果结果仍然不够好，您可以搜索更高级的分割算法。

# python - 使用对数着色绘制离散的、块状的 2D matplotlib 图

> ID：13042471
> 
> 赞同：2
> 
> 时间：2012-10-24T03:14:01.783
> 
> 标签：python, matplotlib, colorbar

最终编辑（部分解决方案）：

经过大量的修补，我已经能够完成我想要的。这并不是一段快速的代码，因为它绘制了超过 17,000 个单独的条形图。

解决方案

```
X = np.array(xvals)
Y = np.array(yvals)
Z = np.array(zvals)
Y_bot = np.array(bottomvals)

fig = plt.figure()
ax = fig.add_subplot(111)

jet = plt.get_cmap('jet')

log_norm = colors.LogNorm()

for x,y,z,bot in zip(X,Y,Z,Y_bot):
    log_z = np.log10(z)/np.log10(max(Z))
    colour = jet(log_price)
    ax.bar(x,y,bottom=bot, width=1, edgecolor='none',color=c_col)

a = np.vstack((Z,Z))
im = plt.imshow(a, aspect='auto', cmap=jet, origin='lower', norm=log_norm)
im.set_visible(False)
plt.colorbar(format='%.1f')
plt.axis([values])
plt.show() 
```

这能够成功构建我想要的情节，它会自动制作颜色条并适当地格式化它。

---- 开始原始问题 ----

我正在尝试将对数颜色图合并到 matplotlib（python 2.7）中的一系列堆叠条形图。本质上，每个“堆栈”值都有一个辅助值，我将对其应用对数变换，然后将其用作颜色图的一部分。

有两个循环用于创建绘图：

```
import matplotlib.pyplot as plt
import matplotlib.pyplot as plt
import numpy as np
import matplotlib.cm as cm
import matplotlib.colors as colors
import matplotlib.colorbar as cb
import matplotlib.ticker as tk    

for i in range(1,x):
    # get data for point i
    for n, j in enumerate(data):
        cval = log10(secondary value)
        plt.bar(i,j, bottom=sum(j[:n]), color=cm.jet(cval)

# Once it has all been plotted I want to set axis, titles and set up a color bar
# To set up the color bar I'm currently using

im = plt.imshow(a, aspect='auto',cmap=jet, origin='lower')
im.set_visible(False)
cbar = plt.colorbar() 
```

现在，问题是这些值是日志更改值（这是正确的，因为这是我一直用来绘制数据的）。

但是，我想执行反向变换（例如 10 ** x）并将那些值显示在颜色条上。

到目前为止，我已经尝试使用：

```
cbar.ax.get_yticklabels() # This gets text values, not floats
cbar.ax.get_yticks() # This gets the positions 
```

我知道我可以使用以下方法更新刻度标签：

```
cbar.ax.set_yticklabels(new_ticks) 
```

但是，我想要一种通用的方法来获取刻度值以进行转换。

返回的文本值的当前格式为：

```
Text(1,0,u'\u22121.6') # Corresponds to -1.6 in unicode (I think). 
```

任何帮助将不胜感激，这一直在我的脑海中。

最后它应该看起来像这样（注意，我已经手动调整了这些刻度值，轴标签已被删除，因为它们并不重要）

![在此处输入图像描述](../Images/31db7477f3658625303306f171373b0c.png)

编辑：

我还创建了数据的 hexbin 图，正如您所见，它非常非常粗糙，而且通常使用起来很混乱。

![在此处输入图像描述](../Images/dd0b196581dbb4212a433bb4c0d7e22e.png)

概括上述问题。

（符号，z = 元素，Z = 向量数组等）

我有一个带有两个唯一索引（x，y）的数据数组 Z。

我想在其两个索引 (x, y) 指定的位置绘制 z 的每个值。z 应该以对数方式着色。我还想用这个图绘制一个颜色条。理想情况下，应该填充空格，类似于第一个堆叠条形图。

注意，X 是一个整数数组（尽管类型是浮点数），范围从 1.0 到 48.0。但是，Y 是一个不受约束的浮点数，并且没有顺序将每个值链接到 X。因此我不确定等高线图是否适用于此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T01:47:36.200

经过大量的修补，我已经能够完成我想要的。这并不是一段快速的代码，因为它绘制了超过 17,000 个单独的条形图。

解决方案

```
X = np.array(xvals)
Y = np.array(yvals)
Z = np.array(zvals)
Y_bot = np.array(bottomvals)

fig = plt.figure()
ax = fig.add_subplot(111)

jet = plt.get_cmap('jet')

log_norm = colors.LogNorm()

for x,y,z,bot in zip(X,Y,Z,Y_bot):
    log_z = np.log10(z)/np.log10(max(Z))
    colour = jet(log_price)
    ax.bar(x,y,bottom=bot, width=1, edgecolor='none',color=c_col)

a = np.vstack((Z,Z))
im = plt.imshow(a, aspect='auto', cmap=jet, origin='lower', norm=log_norm)
im.set_visible(False)
plt.colorbar(format='%.1f')
plt.axis([values])
plt.show() 
```

这能够成功构建我想要的情节，它会自动制作颜色条并适当地格式化它。

# mysql - MySQL Query - 如何计算连接三个表的第二个表中的外键出现？

> ID：13042478
> 
> 赞同：2
> 
> 时间：2012-10-24T03:15:19.600
> 
> 标签：mysql

这是我的数据样本：

```
产品
--------------------------------
| product_id PK | 产品名称 |
--------------------------------
| FRT1 | 苹果 |
| FRT2 | 橙色 |
| TXT1 | 丝带 |
--------------------------------

包裹
-------------------------
| package_id PK | 价格 |
-------------------------
| P001 | 1000 |
| P002 | 1500 |
| P003 | 1000 |
-------------------------

package_detail
---------------------------------
| package_id FK | product_id FK |
---------------------------------
| P001 | FRT1 |
| P002 | FRT1 |
| P002 | FRT2 |
| P003 | FRT2 |
---------------------------------

```

搜索的关键是product_name，所以如果我搜索“Apple”，结果应该是这样的：

```
------------------------------------------
| package_id | 价格 | num_of_package_dtl |
------------------------------------------
| P001 | 1000 | 1 |
| P002 | 1500 | 2 |
------------------------------------------

```

我不擅长加入，谁能帮我查询一下？先谢谢啦~

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T03:19:21.297

```
SELECT  b.package_id, c.price, d.totalCount
FROM    product a
        INNER JOIN package_detail b 
            ON a.product_ID = b.product_ID
        INNER JOIN package c
            ON b.package_ID = c.package_ID
        INNER JOIN 
        (
          SELECT package_id, COUNT(*) totalCount
          FROM package_detail
          GROUP BY  package_id
        ) d ON d.package_ID = b.package_ID
WHERE a.product_name = 'apple' 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/90b0c/10)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T03:25:22.687

像这样的东西：

选择 pd.package_id, p.price, count(*) as num_of_package_dtl from package_detail pd join package p on p.package_id = pd.package_id join Product pt on pt.product_id = pd.product_id where pd.product_name = 'Apple' group by pd.package_id, p.price

# ios - UIWebView stringByEvaluatingJavaScriptFromString 没有调用 javascript 函数

> ID：13042480
> 
> 赞同：0
> 
> 时间：2012-10-24T03:15:38.023
> 
> 标签：ios, uiwebview

我在控制器中有以下内容，不明白为什么它没有调用页面中的函数（它没有做任何事情）。任何帮助表示赞赏 - 第一次使用这个：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSString *fullURL = @"http://local.com/js-more.html";  // this does laod
    NSURL *url = [NSURL URLWithString:fullURL];
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
    [arcWebView loadRequest:requestObj];

    NSString * param  = @"foo";   
    NSString * jsCallBack = [NSString stringWithFormat:@"myFunc('%@')",param];
    [arcWebView stringByEvaluatingJavaScriptFromString:jsCallBack]; 
```

在网页中我有：

```
<script>

function myFunc(this_str){![enter image description here][1]
  alert('here is val: ' + this_str);
}
myFunc('here is in string');
</script> 
```

这会在浏览器或嵌入式 UIWebView 中正确发出警报。

提前谢谢

**编辑 1**

![在此处输入图像描述](../Images/e1504a7ad341e3c62e59d84c361adf27.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T03:35:20.540

我将 javascript 放在 webviewdidfinishload 委托方法中。因为问题可能是您的网页尚未加载，即使您调用了加载请求。

设置 webviews 委托，将代码放在那里，它应该可以工作。

例如

```
- (void)viewDidLoad {
    [super viewDidLoad];
    NSString *fullURL = @"http://local.com/js-more.html";  // this does laod
    NSURL *url = [NSURL URLWithString:fullURL];
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
    [arcWebView setDelegate:self];
    [arcWebView loadRequest:requestObj];
}

- (void)webViewDidFinishLoad:(UIWebView *)webView {
    NSString * param  = @"foo";   
    NSString * jsCallBack = [NSString stringWithFormat:@"myFunc('%@')",param];
    [webView stringByEvaluatingJavaScriptFromString:jsCallBack];
} 
```

# assembly - MMX - 使用常量字节

> ID：13042482
> 
> 赞同：1
> 
> 时间：2012-10-24T03:15:57.993
> 
> 标签：assembly, x86, constants, mmx

我一直在做一些事情并遇到了另外几个问题。首先：

```
ROR64 macro a, rot
; Result := (A shl (64-rot)) xor (A shr rot);
  MOV     EAX, 64
  SUB     EAX, rot
  PSLLQ   a, EAX
  MOVQ    mm6, a
  PSRLQ   mm6, rot
  PXOR    a, mm6
endm 
```

根据最后一个问题，我一直在尝试使用 QWords 的过程（我可能也会尝试使用 DWords 来学习）。我在使用的开发机器上只能访问 MMX 指令，所以我一直在去那里。问题一直在处理来自“rot”的值，因为我已经确定 MMX 操作只能通过我从 MASM32 得到的错误在这些寄存器上工作。但是当我尝试将“rot”和“64-rot”放入 MMX 寄存器时，我得到了更多的错误。我该如何解决这个问题？

我还需要将 MMX 寄存器添加为 QWords。我在参考资料中没有看到执行此操作的说明。无论如何，我是否需要将它们拆分为常规寄存器或通过 FP 指令推送它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T05:20:30.837

[MMX](http://www.tommesani.com/MMXPrimer.html)用于 SIMD 编程（一般不用于 64 位操作）。

参见[维基百科](http://en.wikipedia.org/wiki/MMX_%28instruction_set%29) .. *“MMX指令集的主要用法是基于打包数据类型的概念，这意味着不是将整个寄存器用于单个64位整数，而是两个32位整数，四个16位整数整数，或者八个 8 位整数可以同时处理。”*

如今，由于 SSEx 技术，它已经过时了。抱歉，规范中没有像 PADDQ （看看[PADDx](http://www.tommesani.com/MMXArithmetic.html)）这样的指令。

[移位指令](http://www.tommesani.com/MMXShift.html)仅接受8位位移或其他 MMX 寄存器来保存移位量。这意味着您不能使用寄存器`eax`来完成这项工作。不错的尝试，但有时愿望与现实世界无关。

顺便说一句，请仔细查看您发布的宏。无论如何，我认为这似乎不正确。请考虑您想要执行的操作顺序和您期望的结果。

因为您使用的宏会在您使用它的任何时候发出代码，所以您可以尝试（未经测试）：

```
TEST macro a, rot
; Result := (A shl (64-rot)) xor (A shr rot);
  MOVQ    mm6, a
  PSLLQ   a, 64-rot
  PSRLQ   mm6, rot
  PXOR    a, mm6
endm 
```

# c++ - 如何解释这个奇怪的输出？关于指针和临时变量

> ID：13042490
> 
> 赞同：1
> 
> 时间：2012-10-24T03:16:34.810
> 
> 标签：c++, c, pointers

谁知道为什么输出是这样的？
尽管使用这样的指针是错误的，但我仍然想了解它为什么会这样。

```
int* foo()
{
    int a=9;
    int *p=&a;
    //definitely not right to return a pointer to an invalid varible
    return p;
}
int main(int argc, char* argv[])
{
    int *p=foo();
    cout<<*p<<endl;//9
    cout<<*p<<endl;//2357228
    *p=2;
    cout<<*p<<endl;//2
    (*p)++;
    cout<<*p<<endl;//2357229
    cout<<*p<<endl;//2357228
    cout<<*p<<endl;//2357228
    (*p)++;
    cout<<*p<<endl;//2357229
    cout<<*p<<endl;//2357228

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T03:26:19.243

返回指向函数局部变量的指针/引用会导致**未定义的行为**。本地/自动变量保证仅在定义它的范围（`{`, `}`）内不超出该范围是有效和有效的。

未定义的行为意味着程序可以显示任何行为，并且C/C++标准允许这样做。在未定义的行为发生后试图寻找观察到的行为的推理是没有意义的，因为这种行为可能/可能不一致或不能依赖。

从好的方面来说，任何好的商业编译器都会为您提供有关此类代码的警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T03:39:50.063

> 尽管使用这样的指针是错误的，但我仍然想了解它为什么会这样。

Because p is left pointing at a location in stack memory that keeps getting written over by cout's << method. Every time you use cout, the value of p may change.

Code like this is dangerous as it can corrupt the stack and cause your program to crash.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T03:20:10.907

您需要记住的是 a 和 p 都是范围级别的变量。因此，返回仅存在于堆栈中（但不是在堆上动态分配）的变量的地址是未定义的行为。因为一旦离开那个地址空间，我们就不再知道什么会被写入那里。因此，返回指向局部变量的指针是未定义的行为。

# php - 在数组内循环

> ID：13042492
> 
> 赞同：0
> 
> 时间：2012-10-24T03:16:51.957
> 
> 标签：php, arrays, loops

我正在尝试缩短我的编码，但我在这里遇到了问题。

我有这个很长的数组列表

```
array(stackoverflow1,
stackoverflow2,
stackoverflow3,
stackoverflow4,
stackoverflow5,
stackoverflow6........stackoverflow100); 
```

我试图做这样的事情

```
array (
for ($i = 1; $i<100; $i++)
{"stackoverflow".$i,}
); 
```

我尝试了很多方法来清除语法错误，但它不起作用。有没有办法在数组中创建循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T03:19:13.463

不，你不能做你想做的事。那是完全不受支持的语法。您不能将可执行代码与数组声明混合使用。

但是，您可以声明一个空数组，并将项目附加到它：

```
$items = array();

for ($i = 1; $i <= 100; ++$i) {
  $item[] = "stackoverflow$i";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T03:19:53.497

```
<?php

    $arr = array();

    for($i=1; $i<100; $i++){
        $arr[] = "stackoverflow".$i;
    }

    var_dump($arr);

?> 
```

# python - Popen 混淆 - 重定向输出，方法不起作用

> ID：13042493
> 
> 赞同：0
> 
> 时间：2012-10-24T03:16:54.543
> 
> 标签：python, linux, subprocess

问题是该过程未启动。对象已创建，但存在并且没有进程。

如果我在 os.kill 语句之前放一个 time.sleep()，我就会失去控制。该过程确实开始了，但没有被杀死。此外，我的标准输出丢失了。我输入的任何内容都不会出现（我想它也会为空）。我必须关闭终端，打开一个新终端，然后手动终止进程（启动 python 并发出确切的命令来完成这项工作，很高兴知道）

```
airodump = subprocess.Popen('airodump-ng -w outputfile mon0',shell=True,stdout=open('/dev/null', 'w'), stderr=open('/dev/null', 'w'))
#time.sleep(5)
os.kill(airodump.pid, signal.SIGTERM)   # airodump-ng
#airodump.wait()
print airodump 
```

我试过调用 Popen.terminate()、Popen.kill() 方法。我错过了 Popen 的一些东西....

即使我在“打印 airodump”之前放入 Popen.wait()，它也会被绕过并打印对象地址。这个小怪癖让我确信在我对正在发生的事情的理解中有些事情是不正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T03:48:20.890

你应该试试：

```
airodump = subprocess.Popen(['airodump-ng', '-w', 'outputfilename', 'mon0'],
                            stdout=subprocess.PIPE, stderr=subprocess.PIPE)
time.sleep(secs)
airodump.terminate()
return_code = airodump.wait() 
```

请注意，我已将您的字符串命令替换为列表，删除了 shell=True 和标准输出内容。第一个 shell=True 使所有东西都更难调试，所以你应该尝试在没有它的情况下运行它，但为了做到这一点，你需要为你的命令使用一个列表而不是一个字符串。

捕获 stdout/stderr 并阻止它们进入屏幕的更标准方法是使用`stdout=subprocess.PIPE`. 如果您仍然无法按照您期望的方式工作，请尝试检查 airodump.stdout 和 airodump.sterr 以查看您的流程发生了什么。希望这足以让你开始。

# linux - 在linux的自定义别名中使用find命令没有得到结果

> ID：13042499
> 
> 赞同：0
> 
> 时间：2012-10-24T03:17:41.830
> 
> 标签：linux, shell, grep, find

我的 .bashrc 中有这个命令

```
 mygrep() {
         find /var/www/site1 -exec grep -Hn "$1" {} \;
     } 
```

但有时它不会返回结果

但是这个命令返回完整的结果

```
grep -r "serch term" /var/www/site1 
```

上述功能有什么问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:29:22.960

在我的 Linux 机器上运行时，您的功能没有任何问题。要使结果看起来完全一样，请将`-n`选项添加到两个 grep 调用：`grep -rn "serch term" /var/www/site1`.

这就是我在运行中比较两个命令的输出（在 bash 中）所做的：

`diff <(grep -rn ast /var/www/site1) <(mygrep ast)`

# java - 如何在不更改 Android 中的状态/活动的情况下切换回应用程序？

> ID：13042501
> 
> 赞同：1
> 
> 时间：2012-10-24T03:17:46.183
> 
> 标签：java, android, task

我的应用程序需要切换回之前运行的应用程序，我使用了以下代码。

```
RunningTaskInfo currentTask = mRunningTasks.get(appIndex);
String packageName = currentTask.topActivity.getPackageName();
String className = currentTask.topActivity.getClassName();

...

try {
    mContext.startActivity(new Intent().setClassName(
    packageName, className).addFlags(Intent.FLAG_ACTIVITY_NEW_TASK));
} catch (java.lang.SecurityException e) {
    Intent launchIntent = mContext.getPackageManager()
        .getLaunchIntentForPackage(packageName);
    mContext.startActivity(launchIntent);
} 
```

`mContext`是电流`Service`。

这段代码确实允许我切换到以前运行的应用程序，但它总是回到第一个活动。比如我之前运行的应用是GMAIL，我在【邮件内容】页面。当我使用我的代码导航到 GMAIL 时，它让我回到 [电子邮件列表] 页面。

我想要的是回到我在该应用程序中所做的任何事情。内置的 Android 任务管理器 [通过长按 HOME] 可以重定向到以前的应用程序，而无需更改页面/活动。谁能帮我解决这个问题？谢谢

# java - Java新手试图将字符串传递给实例java

> ID：13042503
> 
> 赞同：1
> 
> 时间：2012-10-24T03:17:52.857
> 
> 标签：java, string, char, instance

目前，我正在尝试在我正在创建的项目中执行凯撒密码。但是，当我尝试将字符串传递给处理它的实例时，它似乎根本没有处理它。（现在我忽略了空格和标点符号）。

```
import javax.swing.*;
import java.text.*;
import java.util.*;
import java.lang.*;

public class Cipher {

private String phrase; // phrase that will be encrypted 
private int shift; //number that shifts the letters

///////////////
//Constructor//
//////////////

public Cipher( int new_shift)
{

    shift = new_shift;

}//end of cipher constructor

////////////
//Accessor//
////////////

public int askShift() {

return shift;
}//end of askShift accessor

////////////
//mutators//
////////////

public void changeShift (int newShift) {

shift = newShift;

}//end of changeShift mutator

/////////////
//instances//
/////////////

public String encryptIt(String message) {

char[] charArray = message.toCharArray(); //converts to a character array
//loop that performs the encryption
for (int count = 0; count < charArray.length; count++) {
int shiftNum = 2;
charArray[count] = (char)(((charArray[count] - 'a') + shiftNum) % 26 + 'a');

} // end of for loop    

 message = new String(charArray); //converts the array to a string

return message;
}//end of encrypt instance 

//////////
///Main///
//////////
public static void main(String[] args) {

Cipher cipher = new Cipher(1); //cipher with a shift of one letter
String phrase = JOptionPane.showInputDialog(null, "Enter phrase to be messed with ");
cipher.encryptIt(phrase);
JOptionPane.showMessageDialog(null, phrase);

}//end of main function

} //end of cipher class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T03:19:21.983

您需要`phrase`再次分配返回值。

```
phrase=cipher.encryptIt(phrase); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T03:21:47.430

您的新加密字符串是一个返回值。您传递给该方法的字符串保持不变。例如尝试

```
String encryption = cipher.encryptIt(phrase); 
JOptionPane.showMessageDialog(null, encryption ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T03:20:03.547

您必须更改此行

```
cipher.encryptIt(phrase); 
```

到

```
phrase = cipher.encryptIt(phrase); 
```

为了改变`phrase`变量的值。

这是因为 Java 通过值传递所有参数。这意味着，当您通过方法发送变量时，您发送的不是实际引用，而是引用的副本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T03:38:40.987

您应该知道的一件事：方法参数在 Java 中是按值传递的

简单来说：

```
public void foo(Bar bar) {
    bar = new Bar(999);
}
public void someMethod() {
    Bar b = new Bar(1);
    foo(b);
    // b is still pointing to Bar(1)
} 
```

因此，您`message = new String(charArray);`不会影响传递给的参数`encryptIt()`

# java - java中的KeyPressed事件

> ID：13042504
> 
> 赞同：6
> 
> 时间：2012-10-24T03:17:53.437
> 
> 标签：java, swing, awt, keylistener, key-bindings

我刚刚创建了一个 java tic-tac-toe 游戏，我想弄清楚在某种情况下按下回车键后如何运行一个方法，下面是一个示例...

```
if(/*condition is met*/){
     //keyListener
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T03:24:50.127

根据您要捕获“输入”键的位置，您可以使用`ActionListener`（在诸如文本组件或按钮之类的组件上）或将[键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)附加到您的组件

```
public class MyPanel extends JPanel {

    public MyPanel() {

        InputMap im = getInputMap(WHEN_FOCUSED);
        ActionMap am = getActionMap();

        im.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), "onEnter");

        am.put("onEnter", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent e) {
                // Enter pressed
            }
        });

    }

} 
```

这将依赖于被关注的组件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T03:35:23.747

一种方法是实现[`KeyListener`](http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/event/KeyListener.html)接口及其关键事件方法。例如，

```
public class MyClass  implements KeyListener {
    public void keyTyped(KeyEvent e) {
        // Invoked when a key has been typed.
    }

    public void keyPressed(KeyEvent e) {
        // Invoked when a key has been pressed.
        if (e.getKeyCode() == KeyEvent.VK_ENTER && yourOtherCondition) {
            myMethod();
        }
    }

    public void keyReleased(KeyEvent e) {
        // Invoked when a key has been released.
    }
} 
```

然后添加这个监听器

```
myComponent.addKeyListener(new MyClass()); 
```

或者，如果您愿意，

```
myComponent.addKeyListener(new KeyListener() {
    public void keyPressed(KeyEvent e) { /* ... */ }

    public void keyReleased(KeyEvent e) { /* ... */ }

    public void keyTyped(KeyEvent e) { /* ... */ }
}); 
```

[有关更多详细信息，请参阅此](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T03:26:53.280

警告 - 自从我做桌面应用程序以来已经有一段时间了，但是 java.awt.Component 类有一个 addKeyListener() 方法，您可以使用它来注册一个实现 KeyListener 的类 - 这就是您要找的吗？

# .net - 如何判断服务引用是从哪里生成的？

> ID：13042509
> 
> 赞同：2
> 
> 时间：2012-10-24T03:18:30.393
> 
> 标签：.net, visual-studio-2010, wcf, service-reference

我的 Visual Studio 2010 项目定义了服务参考。我可以右键单击它来更新引用...但我不知道引用是在哪个 URL 上定义的，我也找不到找到此信息的地方以了解它将如何更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T03:23:43.717

当您右键单击服务引用时，应该有一个“配置服务引用”选项。选择此项将显示 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T03:23:57.130

在`Service References\yourServiceName`文件夹中，有一个名为`Reference.svcmap`. 如果您使用文本编辑器打开它，它是一个 XML 文件，下面的 XML 节点应该会为您提供该信息

```
<MetadataSources>
    <MetadataSource Address="http://something/something" 
                                 Protocol="http" SourceId="1" />
</MetadataSources> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T03:44:18.557

从 Visual Studio 执行以下步骤 -

1.  右键单击`Service`并在上下文菜单上选择`Configure Service Reference`
2.  `Service Reference Popup`会出现。
3.  `Client`>`Address`字段将具有服务参考的 URL。

![在此处输入图像描述](../Images/f5be12417c41cdb054e4c7d47a232b83.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T03:22:15.537

它位于项目属性文件夹下的设置文件中。更新服务引用并不总是有效，有时您只需要重新创建引用。

# cocos2d-iphone - 关于 CCSprite 初始化的内存问题

> ID：13042513
> 
> 赞同：1
> 
> 时间：2012-10-24T03:18:49.347
> 
> 标签：cocos2d-iphone

我想知道如果我做以下情况，这是否考虑泄漏？如何修改代码以使其看起来更干净/更好？

```
// ClassA
@interface ClassA
    CCSprite* image;

@property (nonatomic, retain) CCSprite* image;
@end

@implementation ClassA
@synthesize image;
- (id)init
{
    image = [[CCSprite alloc] init];
}

- (void)dealloc
{
    [image release];
    [super dealloc];
}

@interface Main
@end

@implementation Main
- (id)init
{
     ClassA* aObject = [[ClassA alloc] init];
     aObject.image = [CCSprite spriteWithFile: @"something.png"];
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:27:16.820

我使用类似的东西......在你的代码中看到，为图像分配了两倍的内存。

```
@interface ClassA : CCSprite
{

}

@end

@implementation ClassA
- (id)init
{

}

- (void)dealloc
{
    printf("Released..\n");
    [super dealloc];
}

@interface Main
@end

@implementation Main
- (id)init
{
     ClassA* aObject =  [ClassA spriteWithFile: @"something.png"];
     [self addChild:actor z:3 ];

}

- (void)dealloc
{
    [self removeAllChildrenWithCleanup:YES];

    [super dealloc];
}
@end 
```

# wso2esb - 在 WSO2-ESB 4.5.0 中执行 WSO2 示例 100 时出现 ClassNotFoundException

> ID：13042514
> 
> 赞同：0
> 
> 时间：2012-10-24T03:19:01.673
> 
> 标签：wso2esb

我正在测试 WSO2 示例 100（WS-Security 示例）：[http](http://wso2.org/project/esb/java/4.0.3/docs/samples/qos_mediation_samples.html) : //wso2.org/project/esb/java/4.0.3/docs/samples/qos_mediation_samples.html，并将 SecureStockQuoteService.aar 部署到 WSO2-AS。

但是当我运行这个示例（shell>> ant stockquote -Dtrpurl=http://localhost:8280/）时，WSO2-AS 会抛出“java.lang.ClassNotFoundException：samples.userguide.PWCallback”。

我应该将 samples.userguide.PWCallback API 部署到 WSO2-AS，怎么做？

* * *

1.  如果您使用的是 JDK 1.6+，则将 JCE JAR 1.5 恢复到 JDK 主页
2.  构建并部署 SecureStockQuoteService.aar 到 AS 服务器
3.  通过ant运行客户端，然后AS抛出异常：

    java.lang.ClassNotFoundException：samples.userguide.PWCallback

* * *

我尝试通过以下命令使用axis2服务器运行示例：...esb\samples\axis2Server>axis2server.bat。我收到了这些信息：

```
Unable to locate a Wrapper executable using any of the following names:
  ...\axis2..\..\bin\native\wrapper-windows-x86-32.exe
  ...\axis2..\..\bin\native\wrapper-windows-x86-64.exe 
```

这个错误怎么解决？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T04:46:22.590

如果要在 AS 中部署 Sample 服务，还需要部署所有其他依赖项。如果没有，您可以[简单地启动提供的axis2server](http://wso2.org/project/esb/java/4.0.3/docs/samples_setup_guide.html#Starting)并运行示例。

# macos - 可可 - 如何调整一个方向的大小

> ID：13042518
> 
> 赞同：0
> 
> 时间：2012-10-24T03:19:16.397
> 
> 标签：macos, cocoa, resize

当鼠标在右下角移动时，我想像[图像](http://i.imgur.com/nA0Q8.png)一样调整窗口的一个方向。

当用户沿着这个方向移动时，窗口将调整大小。

如果用户拉下垂直/水平，窗口将不会调整大小。

有什么方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T03:28:05.903

听起来您可能只想设置窗口的`contentAspectRatio`.

[*如果您需要更多的控制，这里是Window Programming Guide*](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/WinPanel/Tasks/SizingPlacingWindows.html#//apple_ref/doc/uid/20000228-135785)的摘录：

> 此外，当一个窗口即将被调整大小时，窗口的委托将被发送一条`windowWillResize:toSize:`消息。您可以在您的委托中实现该方法以轻松控制窗口的大小。

# php - 查询结果回显结果四次

> ID：13042521
> 
> 赞同：0
> 
> 时间：2012-10-24T03:19:29.847
> 
> 标签：php, mysql

我有一个有效的查询，它为预订中的 2 人回显正确的结果，除了它发布结果四次而不是一次。

结果的回声应该是：

**选项总计：** 94 美元

相反，回声是：

**选项总计：** 94 美元

**选项总计：** 94 美元

**选项总计：** 94 美元

**选项总计：** 94 美元

这是相关的查询和 PHP 代码：

```
 $optquery = "SELECT t.ibtp, c.ibt
                FROM clients c, tourprices t 
                WHERE c.tourstart = t.tourstart
                AND c.tourbk_id = t.tour_id"; 

    $optresult = $db->query($optquery); 

    while ($optrate = mysqli_fetch_assoc($optresult))
       {

     $opttotalcost = $optrate['ibtp'] * $optrate['ibt']; 
        echo '<strong>',"Total for Options :</strong>  $ {$opttotalcost}<br />"; 
} 
```

有人看到问题了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T03:25:32.490

您的数据库中可能有四个相同的（对于那些列）行。尝试使用`SELECT DISTINCT`，如下：

```
$optquery = "SELECT DISTINCT t.ibtp, c.ibt
                FROM clients c, tourprices t 
                WHERE c.tourstart = t.tourstart
                AND c.tourbk_id = t.tour_id"; 
```

# java - 如何在 JSP 上使用preparedstatement.setObject？

> ID：13042522
> 
> 赞同：-1
> 
> 时间：2012-10-24T03:19:29.987
> 
> 标签：java, mysql, jsp

我还是 JSP 或 Java 的新手。我目前正在使用名为**Conn.java**的现有 Java 代码，如下所示：

```
 package org.myclass.auth;

  import java.sql.*;
  import org.myclass.global.Variable;
  import org.myclass.auth.LoadProps;
  import org.apache.commons.dbcp.BasicDataSource;
  import javax.sql.DataSource;

  public class Conn {
     String success = "";
  public LoadProps app;
  public Variable var = new Variable();
  Connection conn = null;
  Statement st = null;
  ResultSet rs = null;
  int x = 0;

  public Conn(String path)  {
     app = new LoadProps(path);
  }
  public Conn()  {
     app = new LoadProps(var.getPATH());
  }
  public boolean open() {
     boolean success = false;

    try {
        DataSource dataSource = setupDataSource(app.getUrl(), app.getUser(), app.getPassword());
        conn = dataSource.getConnection();
    } catch (SQLException e) {
        e.printStackTrace();
    }
    return success;
  }
  public DataSource setupDataSource(String connectURI, String connectUser, String connectPassword) {
    BasicDataSource ds = new BasicDataSource();
    ds.setDriverClassName("com.mysql.jdbc.Driver");
    ds.setUsername(connectUser);
    ds.setPassword(connectPassword);
    ds.setUrl(connectURI);
return ds;
   }
  public static void printDataSourceStats(DataSource ds) throws SQLException {
     BasicDataSource bds = (BasicDataSource) ds;
  }

  public static void shutdownDataSource(DataSource ds) throws SQLException {
     BasicDataSource bds = (BasicDataSource) ds;
     bds.close();
  }

  public String getUrl()  {
     return app.getUrl();
  }
  public String getUser()  {
     return app.getUser();
  }
  public String getPassword()  {
    return app.getPassword();   
  }

  public void close() throws SQLException {
      if(!conn.isClosed())    {
        conn.close();
     }
  }
  public ResultSet query(String query)    {
      try {         
         st = conn.createStatement();  
         rs = st.executeQuery(query);
     }
     catch(SQLException sqle) {
        sqle.printStackTrace();
     }
    return rs;
   }
   public boolean queryInsert(String query)    {
       boolean value = false;
      try {
        st = conn.createStatement();
        value = st.execute(query);            
        value = true;
    }
    catch(SQLException sqle) {
        sqle.printStackTrace();
    }
    return value;
    }
   public int queryUpdate(String query)    {
       int value = 0;
       try {
            st = conn.createStatement();
           value = st.executeUpdate(query);
       }
       catch(SQLException sqle) {
          sqle.printStackTrace();
     }
    return value;
} 
```

}

为了使用 PreparedStatement，所以稍后我只在我的 JSP 代码上调用它，例如：

```
 <%@ page import="java.io.*,java.util.*,java.sql.*"%>
    <%@ page import="javax.servlet.http.*,javax.servlet.*" %>
    <%@ page import="org.myclass.auth.Conn" %>
    <%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
    <%@ taglib uri="http://java.sun.com/jsp/jstl/sql" prefix="sql"%>

    <%    
        String query = "SELECT adminid FROM administrator where username =  '"+ session.getAttribute("username") +"'";
        Conn conn = new Conn();
        ResultSet rsQ;
        conn.open();
        rsQ = conn.query(query);
        rsQ.next();

        int adminid = rsQ.getInt(1);
        conn.close();

        Conn conn1 = new Conn();
        String insert = "INSERT INTO campaign  (uid,sender_id,content,Starttime,status,lastmodifiedid,creationtime,msisdnfile) VALUES('"+ adminid +"','"+ request.getParameter("sender_id") +"','"+request.getParameter("message")+"','"+request.getParameter("startTime")+"','Running','"+adminid+"',now(),'file2.txt')";
        out.print(insert);
        conn1.open();
        conn1.queryInsert(insert);
        conn1.close();
    %> 
```

我应该怎么做来修改 Conn.java，因为当我运行 JSP 时它返回 NULL，当它转到**conn1.queryInsert(insert)**时？还有一件事，如果我使用 PreparedStatement，我应该怎么做才能让我的 JSP 和上面的一样？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:30:10.207

请不要那样做。将它保存到您的[数据访问层](http://en.wikipedia.org/wiki/Data_access_layer)。不要用与 SQL 相关的代码弄乱您的 JSP。

此外，不要用 Java 代码污染您的 JSP。[因此，用JSTL](https://stackoverflow.com/tags/jstl/info) / [EL](https://stackoverflow.com/tags/el/info)代替scriplets 。

*   简单的[MVC 示例](http://simple.souther.us/ar01s05.html)，来自 JavaRanch 警长 Ben Souther。
*   [Scriptless JSP Pages](http://www.javaranch.com/journal/200603/Journal200603.jsp#a5)，来自 JavaRanch Journal 的一篇文章

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:53:49.113

根据 MVC2 规则，所有与数据库问题相关的逻辑都应使用 DB bean 或 Hibernate、JDO 等框架保存在持久层中。并且所有业务逻辑都应该保存在 bean 类或 spring bean、ejb 会话 bean 组件中。如果您在任何小型应用程序中只使用 jsp，只需按照以下步骤操作：

1.  创建一个单独的简单或 Bean 类，将所有属性都设为私有
2.  以公共方法的形式在该类中编写您的逻辑
3.  在你的jsp页面中使用`<jsp:useBean>, <jsp:setProperty> and <jsp:getProperty>`like标签来访问你的bean类的对象
4.  使用 id(object refrence) 调用 Bean 类的所需方法

并且不推荐在jsp中放置java代码，尽量使用jstl或者自定义标签。

我希望它会帮助你... :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T03:23:05.980

**请注意：**不**建议**在 JSP 中保留任何业务或数据访问逻辑。JSP 仅用于演示目的。此类数据访问相关代码应移至服务器端 JAVA 类中。请阅读**MVC**（模型-视图-控制器）模式以了解更多信息。

使用您的获取一个`statement`对象`connection`，传递您的字符串查询并按`executeUpdate`如下方式运行：

```
 conn1.open();
   Statement statement = conn1.createStatement();
   statement.executeUpdate(insert);
   conn1.close(); 
```

# c# - 在最后一次键盘活动和鼠标活动 1 分钟后关闭浏览器

> ID：13042535
> 
> 赞同：-4
> 
> 时间：2012-10-24T03:21:26.633
> 
> 标签：c#

我已经使用 Visual C# 创建了一个浏览器。我希望它在客户端不使用它时关闭。它必须在最后一次活动发生一分钟后关闭。如何捕捉鼠标活动和键盘活动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T03:34:43.147

[http://social.msdn.microsoft.com/Forums/eu/csharpgeneral/thread/e66cd9b4-93a9-4c6d-b61a-06013981e3b0](http://social.msdn.microsoft.com/Forums/eu/csharpgeneral/thread/e66cd9b4-93a9-4c6d-b61a-06013981e3b0) 参考这个它可能会解决你的问题

# git - Git 壁球给出警告/错误？

> ID：13042536
> 
> 赞同：0
> 
> 时间：2012-10-24T03:21:35.337
> 
> 标签：git

我有 4 个提交要合并为一个。以下是之后出现的内容`rebase -i`：

```
pick 43b00e2 test2
pick f046962 Fixed files refreshing forever when list is empty
pick 92788fb Fixed files refreshing forever when list is empty
pick aef642a fuckgit 
```

当我将其更改为：

```
pick 43b00e2 test2
squash f046962 Fixed files refreshing forever when list is empty
squash 92788fb Fixed files refreshing forever when list is empty
squash aef642a fuckgit 
```

我明白了：

```
D:\Users\Steven\Documents\projects2\Put.io [master]> git rebase -i
warning: LF will be replaced by CRLF in res/drawable/btn_check_putio.xml.
The file will have its original line endings in your working directory.
warning: LF will be replaced by CRLF in res/drawable/edit_text_putio.xml.
The file will have its original line endings in your working directory.
warning: LF will be replaced by CRLF in res/drawable/putio_clickable_button.xml.
The file will have its original line endings in your working directory.
warning: LF will be replaced by CRLF in res/drawable/btn_check_putio.xml.
The file will have its original line endings in your working directory.
warning: LF will be replaced by CRLF in res/drawable/edit_text_putio.xml.
The file will have its original line endings in your working directory.
warning: LF will be replaced by CRLF in res/drawable/putio_clickable_button.xml.
The file will have its original line endings in your working directory.
error: could not apply 43b00e2... test2

When you have resolved this problem run "git rebase --continue".
If you would prefer to skip this patch, instead run "git rebase --skip".
To check out the original branch and stop rebasing run "git rebase --abort".
warning: LF will be replaced by CRLF in project.properties.
The file will have its original line endings in your working directory.
warning: LF will be replaced by CRLF in res/drawable/btn_check_putio.xml.
The file will have its original line endings in your working directory.
warning: LF will be replaced by CRLF in res/drawable/edit_text_putio.xml.
The file will have its original line endings in your working directory.
warning: LF will be replaced by CRLF in res/drawable/putio_clickable_button.xml.
The file will have its original line endings in your working directory.
Could not apply 43b00e2... test2 
```

这是什么意思，我怎样才能正确地压缩这些提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T03:47:49.913

这就是臭名昭著的 CR/LF 问题。

[Git 的最佳 CRLF（回车、换行）处理策略是什么？](https://stackoverflow.com/questions/170961/whats-the-best-crlf-handling-strategy-with-git)

怎么修？好吧，这取决于您的平台。你必须告诉 git 如何处理行尾。

您可能需要从文件中剥离 LF 并将它们提交回 git。这篇文章为您的问题提供了解决方案。关键是.. 由于您想压缩提交，因此您需要在上述 rebase 步骤中应用修复。

# ruby-on-rails - 将 RESTful 端点添加到 Rails 应用程序

> ID：13042542
> 
> 赞同：1
> 
> 时间：2012-10-24T03:22:09.023
> 
> 标签：ruby-on-rails, rest, routes

我有一个 Rails 应用程序，它只使用默认值，当前捕获所有路由。这适用于常规 HTML 请求。

```
match ':controller(/:action(/:id))(.:format)' 
```

我想向移动客户端公开 CRUD 功能。那么如何扩展我已经拥有的内容以支持恢复请求（JSON）？我应该在默认路由之前将资源路由添加到我的 route.rb 吗？或者我应该停止使用默认路由来支持资源路由吗？我想另一种选择可能是使用 match 显式指定 restful 路由。然而，这似乎是错误的。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T04:31:55.933

不管你决定什么，你真的应该考虑放弃默认的包罗万象的路线。明确说明您的路线会给您带来许多好处，例如为您的视图[命名路线](http://guides.rubyonrails.org/routing.html)并作为有关路线中实际发生的事情的文档。

现在，从技术上讲，您根本不需要调整引用的路由来处理大多数请求，无论格式如何（只要它不是太深 /like/this/route/is）。资源路线在大多数情况下都很好，并且是一个很好的起点，但实际上我更喜欢明确说明您提到的所有路线。它稍微冗长一些，但它确实提供了几个优点。第一个优势是性能。更少的路线意味着更快的路线，明确说明您的路线可以突出删除未使用路线的机会。这种方法的另一个优点是它提供了额外的可配置性。您可能能够将两个 REST-ful 路由发送到同一个控制器操作，因为重复的逻辑会导致更少的 DRY 控制器/视图。最后，与删除包罗万象的路线大致相同，它充当您路线的实时文档。您再也不需要进入控制台来运行`rake routes`命令以查看您的路由发生了什么。我和其他人一样喜欢 rails 的魔法，但我觉得这是我的 rails 应用程序中欢迎额外冗长的少数几个领域之一。

# android - 无法将两个单词作为一个参数从 android 发送到 WCF 服务

> ID：13042548
> 
> 赞同：0
> 
> 时间：2012-10-24T03:22:55.887
> 
> 标签：android, wcf

我对 Android 和 WCF 网络服务非常陌生。我未能将两个词（詹姆斯邦德）作为一个参数从 android 发送到 WCF 服务。如果我以 JamesBond 的身份发送，那么它可以工作。任何人都可以在这门语言方面的专家，指导我。谢谢。下面是例子：

当我在变量中使用空间时，它不起作用，如下所示

```
String name="James Bond"
HttpGet httpGet=new HttpGet("http://10.0.2.2:3113/Service1.svc/getStatusDetails?name="+name); 
```

它在变量中没有空格时工作

```
String name="JamesBond"
HttpGet httpGet=new HttpGet("http://10.0.2.2:3113/Service1.svc/getStatusDetails?name="+name); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T03:25:12.750

尝试以下方式，

```
String name="James Bond";
name = name.replaceAll ( " ", "%20" );
HttpGet httpGet=new HttpGet("http://10.0.2.2:3113/Service1.svc/getStatusDetails?name="+name); 
```

由于 URL 中不允许使用空格，您只需将空格替换为`%20`

# javascript - 流星目前活跃用户？

> ID：13042550
> 
> 赞同：5
> 
> 时间：2012-10-24T03:23:04.933
> 
> 标签：javascript, meteor

我正在流星中制作一个简单的聊天室。如何获得当前活跃用户的列表？有没有办法实际获取当前连接/客户端的列表？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T08:48:29.800

我昨天浏览了流星来源，看看是否已经有类似的东西。我找不到连接的标志或任何东西......

我想你会有两个选择：

*   **在客户端和服务器中为每个连接的用户实现心跳。**我个人不太喜欢这个想法，因为这可能会导致在您的服务器上运行无数个间隔。

*   **使用*sockjs*服务器获取打开的套接字**。 `Meteor.default_server.stream_server.all_sockets()`返回一个包含所有打开的套接字的数组。你可以有一个单一的时间间隔来寻找其中的变化（或者更好的是你会听到 sockjs 服务器本身的变化，有一种`register`方法可能有用），将打开的套接字映射到你的用户并使用一个集合来推送它给你的客户。每个客户端都知道他的套接字 ID，因此映射不应该太难。

我还没有实现它，所以这些只是从哪里开始的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-12T23:48:05.460

我创建了一个 REST 端点来公开当前活跃用户的数量......

**/server/main.js**

```
import bodyParser from 'body-parser'
import { Picker } from 'meteor/meteorhacks:picker'

Picker.middleware(bodyParser.json())

Picker.route('/api/status', ({ provider }, request, response) => {
  response.statusCode = 200
  response.end(JSON.stringify({
    active_users: Meteor.default_server.stream_server.all_sockets().length
  }))
}) 
```

**输出**

> {"active_users":1}

# javascript - 从 node.js 写入 fifo

> ID：13042556
> 
> 赞同：1
> 
> 时间：2012-10-24T03:23:44.343
> 
> 标签：javascript, linux, node.js, fifo

每当有 Web 请求进入时，我都会尝试写入我的 node.js 服务器中的 fifo。我将 fifo 用作任务队列，以便另一个程序可以从中读取并执行一些耗时的工作。

到目前为止，我的 node.js 服务器的代码如下：

```
fs = require('fs');

...

var fifoPath = '/tmp/myfifo';
var input = 'some input';
fs.open(fifoPath, 'wx', 0644, function(error, fd) {
  if (error) {
    if (fd) {
      fs.close(fd);
    }
    console.log('Error opening fifo: ' + error);
    return;
  }

  fs.write(fd, input, 0, input.length, null, function(error, written, buffer) {
    if (fd) {
      fs.close(fd);
    }
    if (error) {
      console.log('Error writing to fifo: ' + error);
    } else {
      if (written == input.length) {
        console.log('Input has been written successfully!';
      } else {
        console.log('Error: Only wrote ' + written + ' out of ' + input.length + ' bytes to fifo.');
      }
    }
  });
}); 
```

当此代码运行时，它会输出以下内容：

```
Error: EEXIST, open '/tmp/myfifo' 
```

我做错了吗？

注意：我使用`fs.open(...)`with`'wx'`标志来确保输入被顺序写入 fifo，例如当 10 个请求同时进入时，所以它们不会同时写入 fifo。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T04:43:22.927

`'x'`不按你的想法做。从[节点文档](http://nodejs.org/api/fs.html)：

独占模式 ( `O_EXCL`) 确保路径是新创建的。`fs.open()`如果该名称的文件已经存在，则失败。

您认为需要排他性的情况是什么？Nodejs 是单线程的，所以两个`fs.write`调用永远不可能交错，先出现的先写。

# wcf - WCF 与同步框架

> ID：13042558
> 
> 赞同：0
> 
> 时间：2012-10-24T03:24:19.347
> 
> 标签：wcf, sql-server-2008-r2, microsoft-sync-framework

我们有一个我们使用开发的应用程序，`ASP.Net`数据库是`SQL SERVER 2008 R2`. 现在我们计划去中心化这个应用程序。然后将有一个中央数据库和几个客户端数据库。我们必须同步所有这些数据库。

例如，早上必须更新客户端站点中的所有更新主数据，晚上必须更新中央数据库中的所有交易数据。

使用 Microsoft 技术实现这一目标的最佳方法是什么？到目前为止，我已经想到了 WCF 服务或 MS 同步框架。

哪个最好？

什么是限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T03:57:11.980

我会为您的场景推荐 Sync 框架。WCF 是可行的，但根据您正在谈论的数据量，需要进行相当多的编码。

Sync 框架的一个主要考虑因素是您的 SQLServer 是否在同一个网络上。如果它们不在同一网络上，则执行同步的应用程序需要能够连接到远程 SQLServer。如果远程 SQLServer 在防火墙后面，您将需要打开一个可能会出现问题的端口（一些安全专家不喜欢公开暴露 SQLServer，即使它通过端口也是如此）。

同步框架的另一件事是，您必须在要同步的每个表上都有一个时间戳列（或者我认为是内存中的等效列）。该框架将为您希望同步的每个表创建一个跟踪表。

# php - Is there a way in MySQL to automatically convert empty string to NULL value?

> ID：13042559
> 
> 赞同：2
> 
> 时间：2012-10-24T03:24:33.523
> 
> 标签：php, mysql

I have a table I'm trying to add a unique index to. Problem is, the way the script is set up that inserts data, there will be on occasion, some empty strings instead of `NULL`.

So, aside from changing the script (which I foresee being necessary unless someone saves me!).... is there any setting in mysql that can *automatically* use `NULL` value if an empty string is passed through to the unique key?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T04:02:56.413

If you can't fix the import script then you should be able to use a trigger to patch things up before INSERTs or UPDATEs get to the table. Something like this should do the trick:

```
delimiter $$
create trigger nullify_blanks_ins before insert on your_table
for each row begin
    if new.string = '' then
        set new.string = null;
    end if;
end;
$$
create trigger nullify_blanks_upd before update on your_table
for each row begin
    if new.string = '' then
        set new.string = null;
    end if;
end;
$$  
delimiter ; 
```

`new` here refers to what the row will look like *after* the INSERT or UPDATE completes so you can look for the garbage values and fix them. Then, since these are BEFORE triggers, your patched rows will go into the database. You would, of course, have to change the table (`your_table`) and column (`string`) names to suit your situation.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T03:29:17.237

try something like

```
SET sn=NULLIF(sn,NULL); 
```

or

```
UPDATE Table
  SET demo = CASE demo = ' ' THEN NULL ELSE demo END,
  ... 
```

# c++ - 致命错误 LNK1104：无法打开文件“libboost_system-vc110-mt-gd-1_51.lib”

> ID：13042561
> 
> 赞同：95
> 
> 时间：2012-10-24T03:24:59.000
> 
> 标签：c++, visual-studio, boost

看来我不能让它工作。我制作了一个需要库的简单控制台应用程序（依赖于`websocket++`库）`Boost`。但是当我尝试编译时，我得到：

> 致命错误 LNK1104：无法打开文件“libboost_system-vc110-mt-gd-1_51.lib”

但是，我做了创建 lib 的 bjam，并将 lib`(boost_root)/stage/libs`的路径链接到 compiler `C++/Additionnals includes`。

如果我查看`(boost_root)/stage/libs`文件 `libboost_system-vc110-mt-gd-1_51.lib`不存在。而是调用它`libboost_system-vc110-mt-sgd-1_51.lib`。

任何的想法？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2015-04-10T17:28:40.973

对于像我这样自学 C++ 的业余爱好者来说，这是最简单的方法：

首先将 boost 库解压缩到您选择的任何目录。我推荐`c:\directory`。

1.  打开你的可视化 C++。
2.  创建一个新项目。
3.  右键单击项目。
4.  点击属性。
5.  单击 C/C++。
6.  点击一般。
7.  选择其他包含库。
8.  包括库目的地。例如`c:\boost_1_57_0`。
9.  单击预编译器标题。
10.  单击创建/使用预编译头文件。
11.  选择不使用预编译头文件。

如果您遇到问题，请转到链接库。

1.  转到提取的文件是`c:\boost_1_57_0`.
2.  单击`booststrap.bat`（不要费心在命令窗口上键入，只需等待并且不要关闭窗口，这是我遇到问题的地方，我花了两周时间才解决。一段时间后，`booststrap`将运行并生成相同的文件，但现在有两个不同的名称：`b2`和`bjam`。
3.  单击`b2`并等待它运行。
4.  单击`bjam`并等待它运行。然后将生成一个名为`stage`.
5.  右键单击项目。
6.  点击属性。
7.  点击链接器。
8.  点击一般。
9.  单击包含附加库目录。
10.  选择库的一部分，例如`c:\boost_1_57_0\stage\lib`。

你很高兴去！

* * *

## 回答 #2

> 赞同：97
> 
> 时间：2012-10-24T03:42:03.013

*C++ → General → Additional Include Directories*参数用于列出编译器将搜索头文件的目录。

您需要告诉链接器在哪里寻找要链接的库。要访问此设置，请右键单击*解决方案资源管理器*窗口中的项目名称，然后单击*Properties → Linker → General → Additional Library Directories*。在此处输入（如果您使用默认选项[构建 Boost](https://stackoverflow.com/a/2655683/241631)`<boost_path>\stage\lib`，这是库所在的路径）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-02-24T16:38:34.427

另一个解决方案：

我被难住了，因为我在 Link->Additional Dependencies 属性中包含了 boost_regex-vc120-mt-gd-1_58.lib，但链接一直告诉我它无法打开 libboost_regex-vc120-mt-gd-1_58.lib (注意 lib 前缀）。我没有指定 libboost_regex-vc120-mt-gd-1_58.lib。

我试图使用（并且已经构建）boost 动态库（.dll），但没有定义 BOOST_ALL_DYN_LINK 宏。显然，编译中包含包含库的提示，并且没有 BOOST_ALL_DYN_LINK 它会查找静态库（带有 lib 前缀），而不是动态库（没有 lib 前缀）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-26T21:54:56.413

我有同样的问题。这是因为我使用 Visual C++ 2010(v100) 编译了 Boost，并且我错误地尝试将该库与 Visual Studio 2012 (v110) 一起使用。

因此，我更改了配置（在 Visual Studio 2012 中）转到*Project properties* -> *General* -> *Plataform Toolset*并将值从*Visual Studio 2012 (v110)*更改为*Visual Studio 2010 (v100)*。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-04-07T00:30:04.497

我遇到了同样的问题，我的错误是我安装了二进制 boost_1_55_0-msvc-11.0-32.exe 以与 Visual c++ 2010 一起使用，它的版本为 v100（项目属性->ConfiguratioProperties->General->platformTooset）而不是 v110作为visual c ++ 2012。所以我下载了boost_1_55_0-msvc-10.0-32.exe，现在一切正常。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-09-02T13:54:04.197

在**Visual Studio 2015**（社区版）中尝试使用**boost 单元测试时，我遇到了类似的问题：**

 **> 致命错误 LNK1104：libboost_unit_test_framework-vc140-mt-1_57

所以我想我会分享我的解决方案。

您可以通过以下两种方式创建提升单元测试项目（并且此解决方案适用于两种方式）：

1.  使用[Boost 单元测试适配器](https://visualstudiogallery.msdn.microsoft.com/5f4ae1bd-b769-410e-8238-fb30beda987f)
2.  或通过创建 Win32 控制台应用程序（[此处的步骤](http://www.boost.org/doc/libs/1_58_0/more/getting_started/windows.html#build-from-the-visual-studio-ide)），并用升压单元测试功能替换主功能（[此处的步骤](http://www.boost.org/doc/libs/1_42_0/libs/test/doc/html/tutorials/hello-the-testing-world.html)）。

以下是我为使这两个项目正常工作所遵循的步骤：

首先，下载所需的 boost 版本（例如[boost_1_57_0](http://www.boost.org/users/history/version_1_57_0.html)）。您可以使用正确的二进制文件（使用 msvc v140 编译）下载 boost，或者通过从命令行运行以下命令自行提取二进制文件：

1.  引导程序.bat
2.  "C:\Program Files (x86)\Microsoft Visual Studio 14.0\VC\vcvarsall.bat" x86
3.  bjam --clean
4.  bjam -j4 --debug-symbols=on --build-type=complete toolset=msvc-14.0 threading=multi runtime-link=shared address-model=32

其中**msvc-14.0**指定我们需要 Visual Studio 2015 版本（VS 2015 = v14.0 = v140），并且**address-model=32**指定我们需要平台 32（但对于 64 位也可以这样做）。

获得二进制文件后，转到 Visual Studio，选择您创建的 Boost Unit Testing 项目。转到**项目属性 > 配置**（从主菜单）并做出以下选择：

*   将“**常规 > 平台工具集**”设置为 Visual Studio 2015 (v140)。

*   在以下位置包含 boost 文件夹的路径（例如 C:\boost_1_57_0）和包含二进制文件的子文件夹的路径（例如 C:\boost_1_57_0\stage\lib）：

    *   “ **C\C++ > 附加包含目录**”
    *   和“**链接器 > 附加库目录**”。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-11T02:34:57.480

如果您在构建 boost 时遇到问题或不想这样做，另一种方法是从[SourceForge](https://sourceforge.net/projects/boost/files/boost-binaries/1.51.0/)下载 lib 文件。该链接会将您带到 1.51 版的压缩 lib 和 dll 文件的文件夹。但是，您应该能够编辑链接以指定选择的版本。显然 BoostPro 的安装程序存在一些问题。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-06-25T18:37:18.180

b2 -j%cores% 工具集=%msvcver% address-model=64 architecture=x86 link=static threading=multi runtime-link=shared --build-type=minimal stage --stagedir=stage/x64

属性 → 链接器 → 常规 → 附加库目录 $(BOOST)\stage\ **x64** \lib

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-12-14T17:19:54.830

如果您使用的是 Visual Studio，您是否尝试过使用工具/NuGet 包管理器来安装 boost_program_options-vcXXX？这是安装 boost 的简单方法。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-02-11T10:02:41.513

我在这里报告了同样的问题。我解决了将 mainTest.cpp 从子文件夹 src/mainTest/ 移动到主文件夹 src/ 的问题，我想这也是你的问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-11-28T00:21:06.123

`2>LINK : fatal error LNK1104: cannot open file 'libboost_regex-vc120-mt-sgd-1_55.lib`

就我而言，旧继承项目中的 bootstrap/bjam 不可用（库已预编译并提交给 SCM）。库的文件名中没有 VC 或 BOOST 版本控制，例如：`libboost_regex-mt-sgd.lib`，但是`Processed /DEFAULTLIB:libboost_regex-vc120-mt-sgd-1_55.lib`以某种方式自动触发。

通过手动将非版本化文件名添加到：

```
<AdditionalDependencies>$(DK_BOOST)\lib64\libboost_regex-mt-sgd.lib</AdditionalDependencies> 
```

并将`...vc120-mt-sgd-1_55.lib`in列入黑名单

```
<IgnoreSpecificDefaultLibraries>libboost_regex-vc120-mt-sgd-1_55.lib</IgnoreSpecificDefaultLibraries> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-08-10T10:16:19.463

我在使用 boost 1.60 的 Visual Studio 2012 上遇到了类似的错误：致命错误 LNK1104：无法打开文件 'libboost_filesystem-vc110-mt-gd-1_60.lib'

我通过下载 boost 二进制文件解决了这个问题：

*   [从https://sourceforge.net/projects/boost/files/boost-binaries/](https://sourceforge.net/projects/boost/files/boost-binaries/)下载 boost 二进制文件。例如：[https ://master.dl.sourceforge.net/project/boost/boost-binaries/1.60.0/boost_1_60_0-msvc-11.0-32.exe?viasf=1](https://master.dl.sourceforge.net/project/boost/boost-binaries/1.60.0/boost_1_60_0-msvc-11.0-32.exe?viasf=1)

*   将文件保存在目录中。例如 C:\boost_1_60_0

*   运行下载的exe文件

*   在 Visual Studio 中，修改项目的 Additional Include Directories 以包含 boost 目录。例如 C:\boost_1_60_0

*   在 Visual Studio 中，修改项目的附加库目录以包含 lib 目录。例如 C:\boost_1_60_0\lib32-msvc-11.0**

# ruby-on-rails - 如何清除 gmaps4rails 地图缓存？

> ID：13042569
> 
> 赞同：0
> 
> 时间：2012-10-24T03:26:20.347
> 
> 标签：ruby-on-rails, gmaps4rails

目前我正在使用 ajax 调用来显示谷歌地图。它在第一次尝试时工作正常，但在离开并返回页面后，地图呈现两个正方形，其余为灰色。此外，放大/缩小垂直条不再显示。

我假设某些东西被保留在内存中。是否有清除内存的 gmaps4rails javascript 命令？

这是正在使用的javascript：

```
Gmaps.map = new Gmaps4RailsGoogle();
Gmaps.load_map = function() {
  Gmaps.map.map_options.maxZoom = 15;
  Gmaps.map.initialize();
  Gmaps.map.markers = <%= @json %>;
  Gmaps.map.create_markers();
  Gmaps.map.adjustMapToBounds();
  Gmaps.map.callback();
};

Gmaps.loadMaps(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T23:36:19.767

我的问题有一个答案。它只发生在本地。一旦我将代码移到服务器上，它就运行良好！

# caching - 清漆 503 服务不可用

> ID：13042571
> 
> 赞同：5
> 
> 时间：2012-10-24T03:26:38.880
> 
> 标签：caching, varnish, varnish-vcl, http-status-code-503

我的清漆版本是`3.0`.

当我卷曲 URL 时，我的服务器运行良好，但是当使用清漆缓存时，它`503 service unavailable`偶尔会返回。

喜欢的日志信息是：

```
0 Debug        - "VCL_error(200, OK)"
24 VCL_call     c recv error
24 VCL_call     c error deliver
24 SessionClose c error
0 Debug        - "VCL_error(200, OK)"
27 VCL_call     c recv error
27 VCL_call     c error deliver
27 SessionClose c error
0 Debug        - "VCL_error(200, OK)"
16 VCL_call     c recv error
16 VCL_call     c error deliver
16 SessionClose c error
14 Debug        - "Write error, retval = 2998272, len = 8465870, errno = Success"
0 Debug        - "VCL_error(200, OK)"
14 VCL_call     c recv error
14 VCL_call     c error deliver
14 SessionClose c error
0 Debug        - "VCL_error(200, OK)"
21 VCL_call     c recv error
21 VCL_call     c error deliver
21 SessionClose c error 
```

PS：当我在浏览器上卷曲或键入网址时，服务器响应 200。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-11T06:37:52.047

varnish 503 可以通过以下步骤修复：

1.  在后端设置中增加`connect_timeout`,`.first_byte_timeout`和：`.between_bytes_timeout`

    ```
    backend default {
      .host = "www.example.com";
      .connect_timeout = 5s;
      .first_byte_timeout = 10s;
      .between_bytes_timeout = 10s;
    } 
    ```

2.  启动清漆时将参数增加到8192。

    ```
    varnishd [options] http_resp_hdr_len=8192 
    ```

3.  结帐你`network`或`backend server`。

    如果步骤 1 和步骤 2 不能帮助您，请检查您`network connection`和`banckend server's availability`。

# c# - 非静态字段、方法或属性需要对象引用

> ID：13042575
> 
> 赞同：1
> 
> 时间：2012-10-24T03:26:55.343
> 
> 标签：c#

我开始使用 C# 和 XNA。我现在要做的就是弄清楚如何在多个类之间拆分游戏代码，而不是将它们全部塞进一个类中。

我*想*我现在已经设法让其他所有事情都正常工作，但我一生都无法弄清楚这一点。我已经浏览了大约两个小时来寻找这个问题的答案，但结果却更加沮丧，因为我似乎遇到了另一种问题。

错误是：“非静态字段、方法或属性需要对象引用`Summoner_Quest.TextControl.Draw()`”

我的 Game1 课程可以在这里查看：http: [//pastebin.com/Wq9S1sFu](http://pastebin.com/Wq9S1sFu)

我的 TextControl 类可以在这里查看：http: [//pastebin.com/49fSSm27](http://pastebin.com/49fSSm27)

我见过的一些答案涉及将方法从静态更改为非静态，反之亦然。将我的 TextControl 方法设置为静态是我最接近“修复”它的方法，但是编译器会对我大喊大叫，直到我删除了该方法中大约一半的代码。但我很确定这不是我正在寻找的解决方案。

感谢您花时间阅读我的帖子。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:33:30.377

您需要创建 TextControl 类的实例。所以有点像。

> 受保护的覆盖无效绘制（游戏时间游戏时间）{

```
 GraphicsDevice.Clear(Color.CornflowerBlue);

        // TODO: Add your drawing code here

        TextControl textControl = new TextControl();  //Creating the text control
        textControl.Draw();

        base.Draw(gameTime);

    } 
```

# assembly - 用于组装的处理器架构

> ID：13042579
> 
> 赞同：7
> 
> 时间：2012-10-24T03:27:27.243
> 
> 标签：assembly

> **可能重复：**
> [我的处理器的汇编指令集](https://stackoverflow.com/questions/4070922/assembly-instruction-set-for-my-processor)

我目前正在尝试编写自己的简单操作系统。我正在学习 C++，你需要了解处理器代码中的汇编。我想知道您将如何找到这些信息。当我用谷歌搜索英特尔酷睿 i5-2435M 架构时，它说的是 64 位，而我想知道它是 x86 还是其他东西。我发现帖子告诉你如何在 Windows 上执行此操作，但我在 Mac 上。由于我只是一个希望在未来 4 年内做到这一点的孩子（11 岁），我希望你能帮助我解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T03:31:44.103

[x86，又名 x86-32，又名 IA-32](http://en.wikipedia.org/wiki/IA-32)是 32 位指令集。您的 Intel Core i5 处理器运行 64 位版本，称为[x86-64](http://en.wikipedia.org/wiki/X86-64)，更具体地说，是[Intel 64](http://en.wikipedia.org/wiki/X86-64#Intel_64)。请注意，处理器架构与您的计算机运行的操作系统几乎没有关系（Windows vs Mac vs ...）。

话虽如此，您并不需要*真正*了解汇编来编写 C++，至少作为初学者。
祝你早点开始，祝你好运！

# ruby - 使用 Nokogiri 构建 XML 命名空间

> ID：13042583
> 
> 赞同：0
> 
> 时间：2012-10-24T03:28:15.480
> 
> 标签：ruby, nokogiri

我想出`xmlns='http://www.w3.org/2005/Atom'`现在提要和条目标签中。但不知道为什么我的入口标签不见了 `xmlns='http://www.w3.org/2005/Atom'`

这是我想要达到的结果

```
<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns='http://www.w3.org/2005/Atom' xmlns:batch='http://schemas.google.com/gdata/batch'> 
  <entry xmlns='http://www.w3.org/2005/Atom' xmlns:app='http://www.w3.org/2007/app' xmlns:sc='http://schemas.google.com/structuredcontent/2009' xmlns:scp='http://schemas.google.com/structuredcontent/2009/products'> 
```

这是我的代码

```
builder = Nokogiri::XML::Builder.new(:encoding => 'UTF-8') do |xml|
  xml.feed('xmlns' => 'http://www.w3.org/2005/Atom',
           'xmlns:batch' => 'http://schemas.google.com/gdata/batch') do
              xml.entry('xmlns' => 'http://www.w3.org/2005/Atom',
                        'xmlns:app' => 'http://www.w3.org/2007/app',
                        'xmlns:sc' => 'http://schemas.google.com/structuredcontent/2009',
                        'xmlns:scp' => 'http://schemas.google.com/structuredcontent/2009/products')
           end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:42:42.063

在 XML 中，`xmlns`标签由子节点继承。因为`entry`是 的子节点`feed`，并且它们具有相同的值`xmlns`，所以 Nokogiri 可能正在优化子节点上的条目。

# data-structures - 使用 C# 从堆栈中弹出（LinkedList）不更新堆栈

> ID：13042586
> 
> 赞同：0
> 
> 时间：2012-10-24T03:28:43.593
> 
> 标签：data-structures, linked-list, stack

您好我正在使用 C# 并尝试从 MainWindow 调用函数 Pop(Node 类)。pop 方法应该返回弹出的值并将其从堆栈中删除。该函数正在工作，并且从函数中删除了最高值，但在 MainWindow 中，堆栈看起来相同（LinkedList 没有改变）。这是我的 Node 类和 Pop 函数。

```
public class Node
    {
        #region Constructor and Declarations
        public int custId;        
        public Node next;
        //other fields

 public Node(int _data, Node _next)
        {
            this.custId = _data;
            if (_next != null)
                this.next = _next;
            else
                this.next = null;
        }
        public Node()
        {
        }
        #endregion

//Make Stack
public Node MakeList()
        {

            Node slist1 = new Node(1, null);
            Node slist2 = new Node(2, null);
            Node slist3 = new Node(3, null);
            Node slist4 = new Node(4, null);
            Node slist5 = new Node(5, null);

            slist1.next = slist2;
            slist2.next = slist3;
            slist3.next = slist4;
            slist4.next = slist5;

            return slist1;
        }

#region PopCustomer
 public int pop(Node stacktop)
        {
            Node temp;
            int removedCustId = 0;
            if (stacktop == null)
                return -1;

            else
            {
                temp = stacktop;
                removedCustId = temp.custId;
                stacktop = temp.next;
                temp = null;
            }
            return removedCustId;
        }
#endregion 
```

在主窗口中，我正在创建堆栈并调用 Pop。**但堆栈看起来相同 - CustID 为 1->2->3->4->5 而不是 2->3->4->5**

```
//MAIN WINDOW 
        #region MainWindow 
                    Node stackTop = new Node();
                    stackTop=stackTop.MakeList();
                    int popedItem = stackTop.pop(stackTop);//STACK LOOKS SAME - with CustIDs 1->2->3->4->5
                    #endregion 
```

/

谢谢，克里希纳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:07:50.667

我认为你的主要问题是你解决这个问题的方法。您正在尝试以 C 方式编写堆栈并将 C# 对象视为 C 指针。

在 pop() 函数中，该行**`temp = null;`**只会将变量设置**`temp`**为一个**`null`**值，并且**`stackTop`**仍然会有一个非空值。您应该知道将变量设置为 null 并不是释放对象的正确方法。

在 C# 中，默认情况下处于安全模式，并且不允许使用指针。我鼓励您阅读[泛型](http://msdn.microsoft.com/en-us/library/512aeb7t%28VS.80%29.aspx)，这是在 C# 中实现数据结构的常用方法，您将看到使用动态数组的示例。

问候

# jquery - 使用 jQuery DataTables 对 thead 和 tbody 进行不同的对齐

> ID：13042590
> 
> 赞同：0
> 
> 时间：2012-10-24T03:29:15.693
> 
> 标签：jquery, css, datatables

我正在使用 jQuery DataTables 插件。我不希望我的 thead 列与 tbody 列对齐，因为我主要使用标题列作为排序按钮。标题名称不再适合，因为我在正文列中显示了额外的信息。

我希望 thead 列靠在一起并在表格顶部左对齐。我希望 tbody 列按照 DataTables 通常的工作方式自动调整大小。完成这种造型的最佳方法是什么？

另外，我觉得我好像在滥用 DataTables 和一般的表格元素。如果您知道我的问题的更简洁的解决方案，它不涉及滚动我自己的 ajax（用于检索表数据）、排序、分页和过滤，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T04:08:04.743

请记住，最后，它是一张桌子。表格的结构很难更改，并且标题的宽度将遵循它们所包含的主体的宽度。

你说你正在使用额外的信息进行排序？为什么不使用您想要的任何结构和 css 创建一个容器，然后使用 api 与数据表进行交互？

您可以使用 api 进行排序：

```
$(document).ready(function() {
  var oTable = $('#example').dataTable();

  // Sort immediately with columns 0 and 1
  oTable.fnSort( [ [0,'asc'], [1,'asc'] ] );
 } ); 
```

例如，如果您希望在表格上方有一个用户可以单击的按钮，而不是表格标题本身，您可以这样做：

```
<div id="separateStyledContainer">
    <button id="sortByColumn2">Sort by Column 2</button>
</div>
<table id="datatable">
    <thead>
        <th>Column 1</th>
        <th>Column 2</th>
    </thead>
    <tbody>
        <tr>
            <td>Column 1 Value 1</td>
            <td>Column 2 Value 1</td>
        </tr>
        <tr>
            <td>Column 1 Value 2</td>
            <td>Column 2 Value 2</td>
        </tr>
    </tbody>              
</table> 
```

这是JS：

```
$(function() {

  var table = $("#datatable").dataTable();  

    $("#sortByColumn2").on("click", function() {
      table.fnSort([[1,'asc']]);             
    });        

})​ 
```

[这是一个可以查看的工作 jsFiddle](http://jsfiddle.net/Pmgar/2/)

这样你就不会与桌子对抗。datatable 提供的所有 API 都[在这里](http://datatables.net/api)

# python - 在目录中搜索字符串

> ID：13042592
> 
> 赞同：1
> 
> 时间：2012-10-24T03:29:31.267
> 
> 标签：python, regex

我正在尝试在 Python 中搜索给定字符串模式的目录。然后我想将匹配组合成一个数组。

起初，我尝试使用 grep：

```
regex = " dojo.require(..*) "
bashCommand = "grep"+" --only-matching -r -h"+regex+baseDir
process = subprocess.Popen(bashCommand.split(), stdout=subprocess.PIPE)
dirStr = process.communicate()[0] 
```

但我意识到我需要在多行上支持字符串，例如

```
dojo.require(
"abc"(; 
```

所以 grep 不是一个选择。

我还有什么其他方法可以做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T03:41:37.833

[您可以使用os](http://docs.python.org/library/os.html)和[re](http://docs.python.org/library/re.html)的组合在纯 Python 中实现此功能，而不是调用 grep 。使用[re.DOTALL](http://docs.python.org/library/re.html#re.DOTALL)标志允许多行匹配。例如：

```
import re, os

def grep(regex, base_dir):
    compiled_regex = re.compile(regex, re.DOTALL)
    matches = list()
    for filename in os.listdir(base_dir):
        full_filename = os.path.join(base_dir, filename)
        if not os.path.isfile(full_filename):
            continue
        with open(os.path.join(base_dir, filename)) as fh:
            content = fh.read()
            if compiled_regex.search(content):
                matches.append(full_filename)
    return matches

print grep(" dojo.require(..*) ", ".") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T03:40:34.030

你可以使用`prcegrep`，看到[这个问题](https://superuser.com/questions/165634/grep-multiline-pattern)。为此，您需要将正则表达式调整为多行。

您还可以使用以下方法构建一些东西：

*   `os.walk`递归访问所有文件。
*   `re.search`搜索正确的表达式。

[这个问题](https://stackoverflow.com/questions/7012921/recursive-grep-using-python)有一个例子。

# ubuntu - 无法将 redis 作为守护进程运行 ... ubuntu 服务器，redis 2.6.0

> ID：13042593
> 
> 赞同：0
> 
> 时间：2012-10-24T03:29:35.497
> 
> 标签：ubuntu, redis

ack，这应该是可行的...

我已经安装了 redis 2.6，如果我从提示符中启动它，它工作正常。听，可访问等等。

当我在这里使用这些步骤时：http: [//ijonas.com/software-development/nosql/412/](http://ijonas.com/software-development/nosql/412/)

将其作为守护进程运行...没有不良症状...命令：

sudo /etc/init.d/redis-server 启动

似乎可以工作...但是 redis-server 不在 ps-aux 列表中，并且它没有在侦听端口...它没有运行！

没有记录任何内容...我将 conf 中的日志级别更改为详细...日志中的零。

如何追踪/解决？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:59:45.000

Didier 是正确的：2.2 配置不适用于 2.6。两个配置的差异表明变化很小，但显然已经足够了。

一方面，我想说“redis 至少不能在配置中记录它不喜欢的东西，而不是默默地关闭吗？”

但我知道，我知道。我对 FOSS 有什么期望？Redis 是一个礼物。即使有麻烦和困惑，它也是一份礼物。

我很感激。

# iphone - iPhone 应用程序中是否有用于 WorldPay 集成的库或 SDK？

> ID：13042594
> 
> 赞同：1
> 
> 时间：2012-10-24T03:29:44.303
> 
> 标签：iphone, worldpay

我正在开发一个 iPhone 应用程序，在该应用程序中，要完成注册过程，用户需要通过 Paypal 和 WorldPay 支付一些金额。但是，我在 iPhone 中获得了用于 Paypal 集成的 (MECL) 库，它运行良好。而且，我已经搜索过，但我找不到 WorldPay 的任何图书馆。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:04:37.380

不，他们不提供任何图书馆。

另一种解决方案是使用 UIWebView 访问他们网站的 url 以进行付款。

但我不知道苹果是否会允许它出现在 AppStore 上。

# android - Android 编译兼容包：DialogFragment.java 更改

> ID：13042596
> 
> 赞同：0
> 
> 时间：2012-10-24T03:29:57.770
> 
> 标签：android, compilation, package, compatibility, android-dialogfragment

我有[这个问题](https://stackoverflow.com/questions/5637894/dialogfragments-with-devices-api-level-11)（ DialogFragment 无法附加到容器视图），链接的 stackoverflow 帖子有望解决。

但是，在重新生成 android-support-v4.jar 文件时我被卡住了，我还尝试将 /android-sdk-linux_86/extras/android/compatibility/v4/src/ 中的所有文件夹直接包含到我的项目中这也只是在 Eclipse 中给出了 100 个编译器错误。

我还尝试在那篇文章中进一步实施一些解决方案，但它们似乎对我不起作用。

那么如何重建 android-support-v4.Jar 文件，或者有没有更简单的方法将这些代码修改到我的 Eclipse 项目中？

我的目标是`Android 2.2 API`Eclipse Helios 下的 8 级。

谢谢

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:12:01.427

**Android 支持库 V4**的 Java 源代码位于目录*android-sdk\extras\android\support\v4\src*

如果您想在 Eclipse 中将其构建为项目，您将从*java*目录中复制所有内容，以便在 Eclipse 中获得一个包结构为**android/support/v4**，然后从其他目录（*eclair*、*froyo*、*gingerbread*等on），从它的父文件夹（父：eclair）下面复制所有内容，并且只复制子（子：*android*）。

然后从 Eclipse 中构建它并导出 JAR 文件。

# c# - Dynamics CRM 2011 - 在安装或部署我的解决方案时我应该如何安装我的自定义实体

> ID：13042597
> 
> 赞同：0
> 
> 时间：2012-10-24T03:29:57.100
> 
> 标签：c#, dynamics-crm

我正在尝试做一个具有自定义实体的解决方案，并且应该在第一次安装时创建一些基本数据，假设将在“角色”中安装一些数据。我应该如何实现它？我正在编写代码来创建这个自定义实体，但我不知道什么时候执行这个代码。我看到还有其他方法可以通过代码或使用解决方案的 UI 来制作自定义实体，然后导出它（导出带有实体的解决方案），然后我可以再次导入它来部署我的解决方案。

有人可以以正确的方式指出我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T08:39:22.787

要清除此处的术语混淆：

*   实体：这是 CRM 的定制。实体之于 CRM，表之于 SQL——它们本身并不代表任何数据。实体可以包含在解决方案中。
*   记录：这些是填充实体（或表）的数据片段。这些不能包含在解决方案中。

当您说“角色”时，我假设您指的是“安全角色”，这些可以包含在解决方案中。

您可以（并且应该）使用解决方案文件将所有自定义项从一个环境移动到另一个环境。

这些都是可以包含在解决方案中的所有部分（取自[MSDN](http://msdn.microsoft.com/en-us/library/gg334576.aspx)）。

![在此处输入图像描述](../Images/8376e4ee9f7fbf9102865d9d872a738a.png)

对于您的所有记录（或数据），您必须手动导入它们。CRM 具有用于数据导入的开箱即用功能，或者您可以使用一些 Web 服务调用编写它。

所以在这种情况下，我相信你需要：

1.  在您的开发环境中创建您的解决方案。
2.  将其作为托管解决方案导入您的生产环境。
3.  执行数据导入以设置任何系统/配置记录/数据。

为了更好地了解解决方案，我建议阅读[MSDN](http://msdn.microsoft.com/en-us/library/gg334530.aspx)。

编辑（基于评论）：

* * *

回复：1 - 您需要为您的自定义和实体构建解决方案。当您导出解决方案时，所有自定义设置都会自动包含在 XML 文件中，然后您可以将解决方案作为一个整体导入到另一个系统中。

如果您不知道如何创建解决方案，请观看此[视频](http://www.youtube.com/watch?v=hxkBMi_ZO_U)。

回复：2 - 导入解决方案后手动执行数据导入。

如果您不知道如何进行数据导入，请观看此[视频](http://www.youtube.com/watch?v=Yi64Uk3MqXE)。

# node.js - Zombie.js 浏览器不返回完整的 html？

> ID：13042599
> 
> 赞同：2
> 
> 时间：2012-10-24T03:30:10.980
> 
> 标签：node.js, browser, headless, zombie.js

我正在尝试找出 Zombie.js。

我有这个脚本：

```
var Browser = require("zombie");
var assert = require("assert");

Browser.visit("http://web.mit.edu", function (e,browser) {
  console.log(browser.html());
}); 
```

那只是访问页面并记录 html，但我得到的 html 与我在普通浏览器中获得的源文件不匹配。

Zombie.js 输出：

```
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>MIT - Massachusetts Institute of Technology</title>
    <meta name="keywords" content="Massachusetts Institute of Technology, MIT" />
    <meta name="description" content="MIT is devoted to the advancement of knowledge and education of students in areas that contribute to or prosper in an environment of science and technology." />
    <meta name="robots" content="index,follow,noodp,noydir" />
    <meta name="allow-search" content="yes" />
    <meta name="language" content="en" />
    <meta name="distribution" content="global" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="cache-control" content="no-store" />
    <link rel="canonical" href="http://web.mit.edu" />
    <link rel="image_src" href="http://web.mit.edu/img/MIT_logo.gif" />
    <link rel="search" type="application/opensearchdescription+xml" href="http://web.mit.edu/opensearch.xml" title="MIT - Massachusetts Institute of Technology" />
    <link href="https://plus.google.com/104984516469461796485/" rel="publisher" />
    <!-- icons -->
    <link rel="shortcut icon" href="/favicon.ico" />
    <!-- rss -->
    <link rel="alternate" type="application/rss+xml" title="MIT - Home Page News" href="http://feeds.feedburner.com/mit/news-homepage" />
    <!-- style sheets - global -->
    <link href="styles/style3536.css" rel="stylesheet" type="text/css" media="all" />
    <script src="http://dnn506yrbagrg.cloudfront.net/pages/scripts/0011/6778.js" type="text/javascript"></script>
    <script type="text/javascript" src="http://www.google-analytics.com/ga.js"></script>
    <script type="text/javascript"> 
        var _gaq = _gaq || [];
        _gaq.push(
            ['_setAccount', 'UA-1592615-11'],
            ['_trackPageview','/'],
            ['rollup._setAccount', 'UA-31439876-1'],
            ['rollup._trackPageview', '/mit/www/']
        );
        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();   
    </script>
    <style type="text/css" media="screen">#flashcontent {visibility:hidden}#flashcontent {visibility:visible}</style>
  </head>
  <body>
    <a href="http://events.mit.edu/">Tuesday, October 23, 2012</a>
  </body>
</html> 
```

[而且真正的源码真的很长，去http://web.mit.edu](http://web.mit.edu)看看吧

这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:56:43.103

如果你`assert`用来比较源代码和僵尸的结果，你会因为以下几点而得到一个错误：

首先`browser.html()`不给你文档类型。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

第二个也是更重要的 MIT 使用 javascript 文件，这些文件在一秒超时后加载

```
<script type="text/javascript">
  setTimeout(function(){var a=document.createElement("script");
  var b=document.getElementsByTagName('script')[0];
  a.src=document.location.protocol+"//dnn506yrbagrg.cloudfront.net/pages/scripts/0011/6778.js";
  a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
</script> 
```

或异步

```
var _gaq = _gaq || [];
_gaq.push(
  ['_setAccount', 'UA-1592615-11'],
  ['_trackPageview','/'],
  ['rollup._setAccount', 'UA-31439876-1'],
  ['rollup._trackPageview', '/mit/www/']
);
(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})(); 
```

源代码向您显示加载它们的代码，同时`zombie`为您提供结果

```
<script src="http://dnn506yrbagrg.cloudfront.net/pages/scripts/0011/6778.js" type="text/javascript"></script> 
```

和

```
<script type="text/javascript" src="http://www.google-analytics.com/ga.js"></script> 
```

根据这些脚本的内容，它们可能会进一步改变 DOM，并且僵尸显示出更多的偏差。不幸的是，我不知道解决方法。

# excel - Vba Listobject 自动过滤唯一项目

> ID：13042600
> 
> 赞同：1
> 
> 时间：2012-10-24T03:30:16.557
> 
> 标签：excel, excel-2007, vba

我是一个 excel 新手，对于一个项目，我正在尝试创建一个用户表单，用户将通过该用户表单进行一系列选择以获得结果。

例如，我有一个如下表。

```
类型 | 颜色 | 物品
---------------------
水果 | 黄色 | 芒果
水果 | 红色 | 苹果
素食| 绿色 | 西兰花

```

我希望用户从组合框中选择，首先是类型，然后是颜色来确定项目。

我正在使用列表对象过滤器来填充组合框。我可以进行选择，例如组合框 1 中的水果。组合框 2 中的黄色以得到芒果作为结果。但是，我遇到的问题是我的组合框有重复的整体。

我的问题是： 1\. 有没有办法通过表格，我将能够获得独特的项目来填充组合框。或者，2\. 有没有一个巧妙的小技巧可以消除组合框中的重复项？

# c++ - C ++删除分段错误

> ID：13042602
> 
> 赞同：1
> 
> 时间：2012-10-24T03:30:20.107
> 
> 标签：c++, segmentation-fault

```
void EventCloseServer::act(){
    Server* serv = Program()::getServer();
    if (serv != NULL) {
        if (serv->running()) {
            serv->stop();
            serv->sync();
        }
        delete (serv);
    }
} 
```

当我执行此代码两次时出现问题。第一次，功能`delete(serv)`正常。第二次，它在调用之前`serv->running()`和之后导致分段错误`serv != NULL`。我不明白为什么第二次执行进入第一`if`条语句。下面的结果不是真的`myObject = NULL`吗？

```
Class* myObject = new Class();
/***/
delete(myObject); /* myObject = NULL ? */ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T03:32:14.137

不，这不是真的。
`delete`不将指针设置为`NULL`。它只是释放分配给指针的内存并调用适当的析构函数。

另一方面，调用`delete`指针`NULL`是 No-Op。所以`NULL`调用前不需要检查`delete`。

请注意，`NULL`在之后显式指定指针`delete`似乎可以解决您的问题，但它可能会隐藏代码中的问题。解决此问题的最佳方法是使用智能指针，而不是需要显式内存管理的原始指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T03:34:55.270

删除后`serv`需要设置为`NULL`. 不是局部变量，而是由`Program()::getServer()`.

假设有一个`Program()::setServer`

```
delete(serv);
Program()::setServer(NULL); 
```

重用已删除的指针会导致崩溃。并且删除指针不会将其设置为`NULL`.

# python - PyQt4 Worker 线程，“QThread.started”丢失

> ID：13042604
> 
> 赞同：1
> 
> 时间：2012-10-24T03:30:24.730
> 
> 标签：python, pyqt4, qthread

我正在尝试在我的 PyQt4 应用程序中正确设置一个工作线程，但由于某种原因，来自线程的启动信号没有传播给我的工作线程！

```
 syncThread = QtCore.QThread()
    self._syncThread = syncThread
    worker = SyncWorker(self.async_sync)
    worker.moveToThread(syncThread)
    syncThread.started.connect(self.progress.show) #This dialog appears!
    syncThread.started.connect(worker.work)  # This seems to be a no-op
    worker.finished.connect(syncThread.quit)
    worker.finished.connect(worker.deleteLater)
    syncThread.finished.connect(worker.deleteLater)
    syncThread.finished.connect(syncThread.deleteLater)
    syncThread.start() 

class SyncWorker(QtCore.QObject):

    # Emitted whenever done
    finished = QtCore.pyqtSignal()

    def __init__(self, delegate):
        QtCore.QObject.__init__(self)

    @QtCore.pyqtSlot()
    def work(self):
        print("Worker gonna work") #This never prints!
        self.finished.emit() 
```

有任何想法吗？

谢谢！

**更新：**根据 Gary Hughes 重命名 worker -> self.worker 后，我在崩溃前收到一个新错误

```
QObject::setParent: Cannot set parent, new parent is in a different thread
QPixmap: It is not safe to use pixmaps outside the GUI thread
QPixmap: It is not safe to use pixmaps outside the GUI thread
QPixmap: It is not safe to use pixmaps outside the GUI thread
QPixmap: It is not safe to use pixmaps outside the GUI thread
QPixmap: It is not safe to use pixmaps outside the GUI thread
QPixmap: It is not safe to use pixmaps outside the GUI thread
QPixmap: It is not safe to use pixmaps outside the GUI thread
python: Fatal IO error 11 (Resource temporarily unavailable) on X server :0.
Segmentation fault 
```

**更新 #2**没关系！我的工人正在调用 GUI 代码，这导致了新的错误。使用 self.worker 的原始修复是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:03:08.600

尝试重命名`worker`为`self.worker`.

在我看来，`worker`您打电话后就被删除`syncThread.start()`了，因为它超出了范围。

# android - 按下按钮后如何从不同的活动更改 ImageView 可见性？

> ID：13042606
> 
> 赞同：2
> 
> 时间：2012-10-24T03:30:38.040
> 
> 标签：android, button, imageview, android-activity

我正在开发一个简单的安卓游戏，分为多个级别。当该级别完成时，我希望在级别按钮（在级别选择菜单上）旁边出现一个复选图标（ImageView）。按下按钮后完成一个关卡，如下（InsideLevelActivity）：

```
 final EditText level1editText=(EditText)findViewById(R.id.level1editText);        
    Button level1completeButton=(Button)findViewById(R.id.level1completeButton);

    level1completeButton.setOnClickListener(new View.OnClickListener()
        public void onClick(View v)
        {
            final String edittext=level1editText.getText().toString();

            if(edittext.trim().equals("Complete level"))
             {   

              {
                Intent visible1 = new Intent();
                visible1.putExtra("iconvisible",0);
                startActivity(visible1);

                    {
                      LayoutInflater inflater = getLayoutInflater();
                      View view = inflater.inflate(R.layout.activity_level1completed,
                      (ViewGroup) findViewById(R.id.img11_toast));

                Toast toast = new Toast(Level1Activity.this);
                toast.setView(view);
                toast.show();

                { onBackPressed(); {

                        return;
                    }

            }   

            }
            else
            {
                    Toast.makeText(Level1Activity.this,
                    "Type Complete level.", Toast.LENGTH_LONG).show();
            } 
```

然后返回到级别选择菜单活动。我正在尝试以这种方式检索数据（LevelMenuActivity）：

```
ImageView logocheckicon1=(ImageView)findViewById(R.id.logocheckicon1);
logocheckicon1.setVisibility(View.GONE);

Intent visible1 = getIntent();
int state = Integer.parseInt(visible1.getExtras().get("iconvisible").toString());
complete1.setVisibility(iconvisible); 
```

在过去的几天里，我尝试了很多方法，包括[这个（如何在两个活动之间传递数据）](https://stackoverflow.com/questions/2091465/how-do-i-pass-data-between-activities-in-android)。我什至试图让检查图标（ImageView）不可见，并以[这种方式](https://stackoverflow.com/questions/8896936/how-can-i-make-a-button-visible-in-one-activity-when-clicking-a-radiobutton-in-a)再次可见。

此外，每个完成的关卡旁边都会出现相同的检查图标。是否可以仅使用一个 ImageView 来完成此操作（无需创建相同可绘制对象的 10 个不同 ID）？

先感谢您。

编辑：如果我不够清楚，我很抱歉。我认为有一些方法可以改变图像的可见性，例如，在 MainActivity 上，意图在另一个活动的按钮内。谢谢您的回答。

EDIT2：添加了另一个不成功尝试的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T04:49:05.810

您可以通过意图传递图像。首先将您的图像转换为字节数组并按意图发送。

```
Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);     
ByteArrayOutputStream baos = new ByteArrayOutputStream();
bitmap.compress(Bitmap.CompressFormat.PNG, 100, baos); 
byte[] b = baos.toByteArray();

Intent intent = new Intent(this, ActivityB.class);
intent.putExtra("picture", b);
startActivity(intent); 
```

然后您可以从下一个活动中检索此图像。

```
Bundle extras = getIntent().getExtras();
byte[] b = extras.getByteArray("picture");

Bitmap bmp = BitmapFactory.decodeByteArray(b, 0, b.length);
ImageView image = (ImageView) findViewById(R.id.imageView1);

image.setImageBitmap(bmp); 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T03:41:58.210

将图像从一个活动传递到另一个活动。首先将图像转换为位图，然后是 base64，然后转换字符串，然后通过意图传递它或保存共享首选项。

```
 public boolean saveImage(Context context, Bitmap realImage) {

        ByteArrayOutputStream baos = new ByteArrayOutputStream();
         realImage.compress(Bitmap.CompressFormat.JPEG, 100, baos);   
         byte[] b = baos.toByteArray(); 

        String encodedImage = Base64.encodeToString(b, Base64.DEFAULT);

    } 
```

然后通过意图在另一个活动中获取此图像或从共享偏好中获取

```
public Bitmap getFacebookImageBitmap(Context context)
{
     Bitmap bitmap = null;

     String saveimage=from intent or share-preference string.
     if( !saveimage.equalsIgnoreCase("") ){
            byte[] b = Base64.decode(saveimage, Base64.DEFAULT);
             bitmap = BitmapFactory.decodeByteArray(b, 0, b.length);

        }
    return bitmap;
} 
```

谢谢

# clojure - 在clojure中去除元音

> ID：13042609
> 
> 赞同：4
> 
> 时间：2012-10-24T03:30:43.537
> 
> 标签：clojure

我正在尝试编写一个函数来去除 Clojure 中的所有 ASCII 元音。我是 Clojure 的新手，我在使用字符串时遇到了一些麻烦。例如，字符串`"hello world"`将返回`"hll wrld"`. 感谢您的帮助！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-24T03:51:46.163

为此，您可以利用字符串类的底层函数。

```
user=> (.replaceAll "hello world" "[aeiou]" "")           
"hll wrld" 
```

如果这感觉像是作弊，你可以把字符串变成一个序列，然后用一个集合的补集过滤它，然后再把它变成一个字符串。

```
user=> (apply str (filter (complement #{\a \e \i \o \u}) (seq "hello world")))
"hll wrld" 
```

clojure 中的集合也是函数。`complement`接受一个函数并返回一个函数，该函数返回原始函数的逻辑非。相当于这个。`apply`接受一个函数和一堆参数，并使用这些参数调用该函数（粗略地说）。

```
user=> (apply str (filter #(not (#{\a \e \i \o \u} %)) (seq "hello world")))
"hll wrld" 
```

*编辑*

多一个...

```
user=> (apply str (re-seq #"[^aeiou]" "hello world"))
"hll wrld" 
```

`#"[^aeiou]"`是一个正则表达式，并且 re-seq 将匹配项转换为一个 seq。它类似于clojure，并且似乎表现良好。在使用 Java 之前，我可能会尝试这个。seq 字符串的速度要慢一些。

# 重要编辑

还有一种方法，那就是使用`clojure.string/replace`. 这可能是最好的方式，因为它应该在 Clojure 或 Clojurescript 中工作。

例如

```
dev:cljs.user=> (require '[clojure.string :as str])
nil

dev:cljs.user=> (str/replace "hello world" #"[aeiou]" "")
"hll wrld" 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-24T10:44:38.210

比尔大部分是对的，但我认为错误足以保证这个答案。

```
user=> (.replaceAll "hello world" "[aeiou]" "")           
"hll wrld" 
```

这个解决方案是完全可以接受的。事实上，这是提出的最佳解决方案。如果解决方案是最干净和最快的，那么下降到 Java 没有任何问题。

正如他所说，另一个解决方案是使用序列函数。但是，他的代码有点奇怪。切勿`filter`与`(not ..)`or一起使用`complement`。有一个专门用于此的功能`remove`：

```
user> (apply str (remove #{\a \e \i \o \u} "hello world"))
"hll wrld" 
```

您也不必调用`seq`字符串。Clojure 的所有 seq 函数都会为您处理。

他的最后一个解决方案很有趣，但我更喜欢第一个，因为它不涉及`(apply str ..)`.

# android - 图书馆计划

> ID：13042612
> 
> 赞同：0
> 
> 时间：2012-10-24T03:31:27.510
> 
> 标签：android, android-activity

我的图书馆项目上有一个专业版和免费版。专业版和免费版没有任何代码。只是一些替代资源。现在我想在 pro 中加入一些活动。那么如何从我的库代码中调用这些新的专业活动？控件从库代码开始，所以我从来没有机会从专业人士那里设置侦听器等。将这些新活动的绝对类名作为字符串传递给库项目中的意图是否是个好主意。这可能是一个菜鸟问题，但我做了很多搜索。我只需要一个小提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:03:34.287

我认为您的设置与您尝试做的相反。图书馆项目应该有共同的、共享的代码。如果您有一个应用程序的专业/免费版本，您可能应该有 3 个项目：

1.  专业版项目
2.  自由版项目
3.  共享图书馆项目

由于您的备用资源未共享，因此它们将各自进入自己的项目（专业版/免费版）。任何共享的代码都将进入库项目。通过此设置，您在共享库项目中拥有的任何代码都可以像主项目的一部分一样使用。

您可以将其视为具有“包含”，这基本上就是库项目的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T06:32:29.783

好的。我设法通过使用小部件的配置活动来解决这个问题。我在清单中为主项目中的小部件元数据指定了一个覆盖的 xml 文件。驻留在 pro 项目中的这个被覆盖的 xml 有一个指向仅驻留在主项目中的活动的指针 (android:configure)。

有了这个，我能够实施许可。在专业版中，配置活动负责许可。在免费版本中没有配置活动。

# javascript - 允许子 iframe 从不同域调用其父窗口上的函数

> ID：13042615
> 
> 赞同：31
> 
> 时间：2012-10-24T03:31:46.807
> 
> 标签：javascript, iframe, cross-domain

我制作了一个页面，该页面在 IFrame 中加载，并且在完成加载后需要在父页面上调用一个函数。

它在本地开发中（在同一个域上）工作，但在现实世界中它托管在一个完全不同的域上，所以很明显我遇到了跨域问题，即：

不安全的 JavaScript 尝试从 URL http://[...]site2.com/iframe 的框架访问具有 URL http://[...]site1.com 的框架。域、协议和端口必须匹配。

我控制了两台服务器，所以我是否可以在其中一台或两台服务器上放置一些内容，表明它们可以相互通信？

我已经查看了在 iframe 页面和父页面中设置“document.domain”。

我已经尝试设置访问控制标头：

header('Access-Control-Allow-Origin: *');

但这些都不起作用。

当我控制两台服务器时，是否有任何方法允许 iframe 在完全不同的域上调用父窗口中的函数？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-10-24T03:47:37.927

您可以通过[消息发布 API](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)在框架之间进行通信。

例如，在您的子框架中，您可能会调用：

```
parent.postMessage("child frame", "*"); 
```

并在父框架中，注册一个消息处理程序：

```
window.addEventListener("message", function(event) {
    console.log("Hello from " + event.data);
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T03:55:31.517

这里有很多选项：http: [//softwareas.com/cross-domain-communication-with-iframes](http://softwareas.com/cross-domain-communication-with-iframes)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-12T10:01:26.623

**使用.htaccess**重写可以轻松解决此问题。

演示：

A. 在 SERVER 1 上创建一个名为“iframeContent/”的目录。

B. 在该目录中放置一个名为 index.php 的文件，其中包含：

> ```
> <html> 
> <head></head> 
> <body>
> 
> <script type="text/javascript">
> 
>     parent.check();
> 
> </script>
> 
> </body> 
> </html> 
> ```

这是 iFrame 的内容。它将调用父级中的函数。

C. 在 SERVER 2 上创建一个名为“iframeTesting_without-htaccess/”的目录。

D. 在该目录中放置一个名为 index.php 的文件，其中包含：

> ```
> <html> 
> <head></head> 
> <body>
> 
> <script type="text/javascript">
> 
>     function check() { 
> 
>        alert("hello");
> 
>     }
> 
> </script>
> 
> <iframe id="sidebnrId" name="sidebnr"
> src="PATH-ON-SERVER-1/iframeContent/" frameborder="0"
> height="500px" width="600px" scrolling="no"></iframe>
> 
> </script>
> 
> </body> 
> </html> 
> ```

这只是父窗口的内容。请注意，iFrame 内容位于另一台服务器上（因为在 SERVER 1 上）。

E. 使用网络浏览器访问“PATH-ON-SERVER-2/iframeTesting_without-htaccess/” -> 没有任何反应：iframe 无法访问其父级的功能。

**这是解决问题的方法**

F. 在 SERVER 2 上创建另一个名为“iframeTesting_with-htaccess/”的目录。

G. 在该目录中放置一个名为 index.php 的文件，其中包含：

> ```
> <html> 
> <head></head> 
> <body>
> 
> <script type="text/javascript">
> 
>     function check() { 
> 
>        alert("hello");
> 
>     }
> 
> </script>
> 
> <iframe id="sidebnrId" name="sidebnr"
> src="content-iframe/" frameborder="0"
> height="500px" width="600px" scrolling="no"></iframe>
> 
> </script>
> 
> </body> 
> </html> 
> ```

这次 iFrame 不再直接指向 SERVER 1 上的内容，而是指向位于同一服务器 (SERVER 2) 上的中间虚构目录“content-iframe/”。

H. 在该目录中放置一个 .htaccess 文件，其中包含：

> ```
> Options +FollowSymLinks
> RewriteEngine On
> 
> RewriteBase /
> 
> RewriteRule ^content-iframe/$ PATH-ON-SERVER-1/iframeContent/ [R,NC,P] 
> ```

该文件的作用是将对虚构目录的任何访问重定向到服务器 1 上的内容。

I. 再试一次，使用网络浏览器访问“PATH-ON-SERVER-2/iframeTesting_with-htaccess/”。这一次它会起作用。我希望它有所帮助:-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T03:47:08.510

在现代浏览器中，您可以使用[`window.postMessage()`](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)在不同域上的协作框架之间进行通信。您不能直接调用函数，但可以在两者之间传递数据或消息。请参阅[MDN 上的说明](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)。

# java - SFTP使用java将文件从Windows服务器检索到Linux服务器

> ID：13042616
> 
> 赞同：1
> 
> 时间：2012-10-24T03:31:46.557
> 
> 标签：java, windows, linux, sftp, file-transfer

我正在研究文件下载功能。我的所有文件都在 Windows 服务器中，Java 中是否有任何库可用于执行 SFTP 以将文件从远程 Windows 服务器传输到运行我的 Java 应用程序的 Linux 服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:34:35.203

[从此链接](http://www.jscape.com/blog/bid/74033/Secure-File-Transfer-with-Java-SFTP-Library)使用 JScape 的安全 FTP 库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T03:38:05.370

鉴于您可以访问两个对等方，您可以使用[SSLServerSocketFactory](http://docs.oracle.com/javase/6/docs/api/javax/net/ssl/SSLServerSocketFactory.html) / [SSLSocket](http://docs.oracle.com/javase/6/docs/api/javax/net/ssl/SSLSocket.html)进行两端的连接。

编辑：

关于如何建立连接和读/写数据的一些基本示例：http: [//stilius.net/java/java_ssl.php](http://stilius.net/java/java_ssl.php)

哇，希望您对我们的软件感到满意 :)

谢谢你，

# html - HTML5 帮助，无法找出验证器中显示的错误

> ID：13042618
> 
> 赞同：0
> 
> 时间：2012-10-24T03:31:57.983
> 
> 标签：html, validation

使用 HTML 验证器时，我遇到了两个我无法弄清楚的错误。

代码：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Prime Properties Listing</title>
        <link rel="stylesheet" href="prime.css">
        <meta charset="utf-8">

</head>
<body>
<div id="wrapper">
<h1><img src="primelogo.gif" alt=“PRIMELOGO” height=“100” width=“650”/></h1>
<a href="index.html"><img src="primehomenav.gif" height="25" width="107" alt="Home"/></a> 
<a href="listing.html"><img src="primelistingsbtn.gif" height="25" width="107" alt="listing"/></a> 
<a href="financing.html"><img src="primefinancingnav.gif" height="25" width="107" alt="financing"/></a> 
<a href="contact.html"><img src="primecontactnav.gif" height="25" width="107" alt="contact"/></a>

<h3> Schaumburg Colonial </h3>
<p>This single family home is a two-story colonial on a large lot</p>
<a href="listing.html"><img src="schaumburgthumb.jpg" height="113" width="150" alt=""></a>
<ul>
<li>Four bedrooms</li>
<li>Two and 1/2 baths</li>
<li>Two car garage</li>
<li>Listing#3432535</li>
</ul>

<h3>Libertyville Condo</h3>
<p>New Construction condo in downtown Libertyvilla</p>
<a href="listing.html"><img src="libertyvillethumb.jpg" height="113" width="150" alt=""></a> 
<ul>
<li>Close to train</li>
<li>Two bedrooms,two baths</li>
<li>Two indoor parking spaces</li>
<li>Listing#3432432</li>
</ul>

<div id="footer">
<a href="primeindex.html">Home</a>&nbsp;&nbsp;
<a href="listing.html">Listing</a>&nbsp;&nbsp;
<a href="financing.html">Financing</a>&nbsp;&nbsp;
<a href="contact.html">Contact</a>&nbsp;<br>

<small><i>&copy; Copyright "blahblah" blahblah 2012</i></small> <br /><a href="mailto:blahblah@gmail.com">blahblah@gmail.com</a></div>
</div>
</body>

</html> 
```

2个错误：

1) 第 11 行，第 71 列：元素 img 上属性高度的错误值“100”：应为数字，但看到的是“。

# 非负整数的语法：一位或多位数字 (0–9)。例如：42 和 0 有效，但 -273 无效。

2）第 11 行，第 71 列：元素 img 上的属性宽度的错误值“650”/：应为数字，但看到的是“”。

# 非负整数的语法：一位或多位数字 (0–9)。例如：42 和 0 有效，但 -273 无效。

任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T03:34:42.397

替换这个

```
alt=“PRIMELOGO” height=“100” width=“650” 
```

和

```
alt="PRIMELOGO" height="100" width="650" 
```

上线`11`。看起来您使用不同的字符来包装属性的引号。

# internet-explorer - VBA自动化从网站复制/粘贴

> ID：13042624
> 
> 赞同：0
> 
> 时间：2012-10-24T03:32:45.617
> 
> 标签：internet-explorer, excel, vba

好的。所以这是我对这段代码应该如何工作的思考过程。我有一张包含我想使用 for 循环遍历的网址列表的工作表。对于每个网址，我想将整个网页复制并粘贴到工作簿中的临时工作表中。将页面粘贴到 Excel(2010) 后，我会进行一些格式化。仅将我想要的内容从临时工作表复制并粘贴到主工作表。然后在 Internet Explorer 中导航下一个链接，就像在将网页粘贴到临时表之前一样，然后将我需要的内容附加到主表中。我遇到以下问题：

1) 无论我为要粘贴的网页声明什么工作表，它总是粘贴到第一张工作表。这恰好是我的命令按钮所在的工作表，但这不应该有所作为。应该是？

2）附加到主表不起作用。宏运行完成后，似乎已粘贴到主工作表的唯一记录来自最后一个网页。

我在想，也许我需要做的是在选择/复制/粘贴网页到 Excel 之间添加一段时间的暂停以解决问题 #2。对于这些问题中的任何一个，我们将不胜感激。

```
Private Sub CommandButton1_Click()
Dim IE As Object

startTime = Now()

Set IE = CreateObject("InternetExplorer.Application")

For rows1 = 2 To 11
    For columns1 = 2 To 2
        strLink = ThisWorkbook.Sheets("links").Cells(rows1, columns1)

With IE
    .Visible = True
    .Navigate strLink
Do While IE.ReadyState <> 4
            DoEvents
Loop

IE.ExecWB 17, 0
IE.ExecWB 12, 2

ThisWorkbook.Sheets("temp").Paste Range("A1")

End With

'Copy/paste and format from temp to master sheet
nextRow = ThisWorkbook.Sheets("master").Range("A1").End(xlDown).Row + 1
ThisWorkbook.Sheets("temp").Range("A173:S247").Copy
ThisWorkbook.Sheets("Master").Range("A" & nextRow).PasteSpecial Paste:=xlPasteValues

Next columns1
Next rows1

endTime = Now()

MsgBox ("Done running.  It took from " & startTime & " to " & endTime & ".")

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T04:44:50.447

问题 1：您的代码`ThisWorkbook.Sheets("temp").Paste Range("A1")`将始终引用活动工作表—— Range("A1") 暗示使用活动工作表，因为没有定义工作表对象。您需要在函数的参数中引用正确的工作表。因此`ThisWorkbook.Sheets("temp").Paste ThisWorkbook.Sheets("othersheet").Range("A1")`，如果您希望将屏幕刮擦粘贴到“temp”以外的其他内容上，请尝试

（如果将 ThisWorkbook 和每个 Sheet 设置为变量，您的代码将更具可读性）

问题 2：您希望在主表的最后一行之后粘贴。丢失该部分的第一行，保留第二行，将第三行替换为

```
ThisWorkbook.Sheets("Master").Cells(ThisWorkbook.Sheets("Master").UsedRange.Rows.Count + 2, 1).PasteSpecial Paste:=xlPasteValues 
```

（同样，您应该使用变量来表示工作簿和工作表对象，以使您的代码更清晰）

# c# - 解析 json 并处理错误响应

> ID：13042629
> 
> 赞同：0
> 
> 时间：2012-10-24T03:33:45.963
> 
> 标签：c#

我正在尝试使用 Json.NET 解析一些 json。json 要么返回一个数组，要么返回一个错误：

```
{
    "error": "Invalid category"
} 
```

或者：

```
[
    {
        "category_id": "23",
        "product_name": "Movie1"
    },
    {
        "category_id": "23",
        "product_name": "Movie2"
    }
] 
```

我将如何检查是否存在错误并显示消息？我曾尝试使用 JObject.Parse 但这会引发“当前 JsonReader 项目不是对象”的异常，这是有道理的，因为它在没有错误时返回一个数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:53:29.500

在您的情况下，我会将正确的解析放在 try catch 中，并将错误解析放在 catch 块中，如下所示：

```
try{
    JObject.Parse... // try to parse your array 
}catch(Exception e){
    JObject.Parse... // try to parse your error
} 
```

因此，如果它无法解析数组列表，它将尝试将字符串解析为 abject（不知道如何调用 JObject 方法，但它可能类似于`JObject.Parse<MyObject>("string")`）。

# asp.net-mvc - 在执行代码首先 MVC Web 部署时收到错误

> ID：13042631
> 
> 赞同：0
> 
> 时间：2012-10-24T03:34:03.723
> 
> 标签：asp.net-mvc, microsoft-web-deploy

我已经设置了一个运行 SQl Server Web 版和完整 IIS 7.5 的远程服务器。我能够毫无问题地将我的 MVC 4 应用程序部署到远程框，但是当我尝试运行该网站时，我收到以下错误：

```
Login failed for user 'IIS APPPOOL\backoffice.mysite.com'.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.Data.SqlClient.SqlException: Login failed for user 'IIS APPPOOL\backoffice.mysite.com'. 
```

错误控制台说：

```
 Exception information: 
    Exception type: InvalidOperationException 
    Exception message: The ASP.NET Simple Membership database could not be initialized. For more information, please see http://go.microsoft.com/fwlink/?LinkId=256588
   at MyModels.Filters.InitializeSimpleMembershipAttribute.SimpleMembershipInitializer..ctor() in c:\Users\Administrator\Documents\MySite\MyModels\Filters\InitializeSimpleMembershipAttribute.cs:line 47

An error occurred while getting provider information from the database. This can be caused by Entity Framework using an incorrect connection string. Check the inner exceptions for details and ensure that the connection string is correct. 
```

正如错误日志所暗示的那样，我的连接字符串很可能不正确。我在 Visual Studio 中本地运行的连接是：

```
<add name="MyDB" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=MyDB;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\MyDB.mdf" providerName="System.Data.SqlClient" /> 
```

我已经为远程服务器上的连接设置了一个转换：

```
<add name="MyDB" connectionString="Data Source=(local);Initial Catalog=MyDb;Integrated Security=True" providerName="System.Data.SqlClient" /> 
```

1.  通常我使用 SQL 登录，所以我在这里感到困惑。对于使用 Windows 身份验证的 SQL Server Web 版，连接字符串应该如何查找？

2.  看起来 IIS APPPOOL\backoffice.mysite.com 正在尝试创建数据库。它是否正确？如果是这样，我不需要在 SQL Management Studio 中为此用户创建登录名和用户吗？

3.  在运行部署之前，我是否需要在 SQL Management Studio 中创建数据库？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T03:56:26.370

您正在使用 SQL Server 的 Windows 身份验证运行。IIS 应用程序在 'IIS APPPOOL\backoffice.mysite.com' 的用户上下文下运行；我强烈建议使用标准 sql server 凭据或为具有 sql 凭据的特定网站创建一个新用户，不过使用常规凭据可能更好。连接字符串中的 Integrated Security=SSPI 表示 Windows 身份验证。因此，只需使用标准 SQL Server 凭据并将您的数据库设置为混合模式身份验证并在连接字符串中设置用户 ID 和密码，然后您就可以正常运行了。

# iphone - 调用 setCancelsTouchesInView 时会发生什么？

> ID：13042632
> 
> 赞同：12
> 
> 时间：2012-10-24T03:34:05.663
> 
> 标签：iphone, objective-c, ios, uigesturerecognizer

想知道当我调用 setCancelsTouchesInView 时会发生什么。[官方文档http://developer.apple.com/library/ios/#documentation/uikit/reference/UIGestureRecognizer_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIGestureRecognizer_Class/Reference/Reference.html)中没有涉及

谢谢

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-24T03:50:20.900

ACB 引用了该`UIGestureRecognizer`参考文献。为了更具体一点，假设您有一个附加了平移手势识别器的视图，并且您的视图控制器中有这些方法：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    NSLog(@"touchesBegan");
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    NSLog(@"touchesMoved");
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    NSLog(@"touchesEnded");
}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event {
    NSLog(@"touchesCancelled");
}

- (IBAction)panGestureRecognizerDidUpdate:(UIPanGestureRecognizer *)sender {
    NSLog(@"panGesture");
} 
```

当然，平移手势识别器被配置为发送`panGestureRecognizerDidUpdate:`消息。

现在假设您触摸视图，移动手指足以识别平移手势，然后抬起手指。应用程序打印什么？

**如果手势识别器`cancelsTouchesInView`设置为`YES`，**应用程序将记录以下消息：

```
touchesBegan
touchesMoved
touchesCancelled
panGesture
panGesture
(etc.) 
```

`touchesMoved`在取消之前您可能会得到不止一个。

因此，如果您设置`cancelsTouchesInView`为`YES`（默认值），系统将在从手势识别器发送第一条消息之前取消触摸，并且您不会再收到与该触摸相关的任何触摸消息。

**如果手势识别器`cancelsTouchesInView`设置为`NO`，**应用程序将记录以下消息：

```
touchesBegan
touchesMoved
panGesture
touchesMoved
panGesture
touchesMoved
panGesture
(etc.)
panGesture
touchesEnded 
```

因此，如果您设置`cancelsTouchesInView`为`NO`，系统将继续发送与手势触摸相关的消息，并与手势识别器的消息交错。触摸将正常结束而不是被取消（除非系统出于其他原因取消触摸，例如在触摸期间按下主页按钮）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T03:38:54.183

从苹果开发者门户[链接](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIGestureRecognizer_Class/Reference/Reference.html)：

> **cancelsTouchesInView** — 如果手势识别器识别出它的手势，它会解除该手势的剩余触摸与视图的绑定（因此窗口不会传递它们）。窗口使用 (touchesCancelled:withEvent:) 消息取消先前传递的触摸。如果手势识别器无法识别其手势，则视图将接收多点触摸序列中的所有触摸。
> 
> **取消TouchesInView：**
> 
> 一个布尔值，影响在识别手势时是否将触摸传递到视图。
> 
> *@property(nonatomic) BOOL cancelsTouchesInView*
> 
> **讨论**
> 
> 当此属性为 YES（默认值）并且接收器识别其手势时，该手势的未决触摸不会传递到视图，并且先前传递的触摸会通过发送到视图的 touchesCancelled:withEvent: 消息取消。如果手势识别器无法识别其手势或者此属性的值为 NO，则视图将接收多点触控序列中的所有触摸。

# c# - 复合 Observable

> ID：13042633
> 
> 赞同：3
> 
> 时间：2012-10-24T03:34:16.993
> 
> 标签：c#, system.reactive

我有以下代码：

```
Observable.FromEvent<ModelEventArgs>(
        h => ValuesController.ModelAdded += h,
        h => ValuesController.ModelAdded -= h)
    .Subscribe(m => context.Connection.Broadcast(m));

Observable.FromEvent<ModelEventArgs>(
        h => ValuesController.ModelDeleted += h,
        h => ValuesController.ModelDeleted -= h)
    .Subscribe(m => context.Connection.Broadcast(m)); 
```

更清洁的是：

```
Observable.[SOMETHING](
        Observable.FromEvent<ModelEventArgs>(
                h => ValuesController.ModelAdded += h,
                h => ValuesController.ModelAdded -= h),
        Observable.FromEvent<ModelEventArgs>(
                h => ValuesController.ModelDeleted += h,
                h => ValuesController.ModelDeleted -= h))
    .Subscribe(m => context.Connection.Broadcast(m)); 
```

我似乎无法弄清楚 [SOMETHING] 需要是什么，我不想等待 ModelAdded 完成，我只是希望它们都为每个事件发出 (m)。

放轻松，我是 Rx 新手

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T03:55:54.730

我想你正在寻找`Merge`：

```
Observable.Merge(
        Observable.FromEvent<ModelEventArgs>(
                h => ValuesController.ModelAdded += h,
                h => ValuesController.ModelAdded -= h),
        Observable.FromEvent<ModelEventArgs>(
                h => ValuesController.ModelDeleted += h,
                h => ValuesController.ModelDeleted -= h))
    .Subscribe(m => context.Connection.Broadcast(m)); 
```

# ruby-on-rails - form_tag 和迭代器一起工作

> ID：13042634
> 
> 赞同：1
> 
> 时间：2012-10-24T03:34:28.540
> 
> 标签：ruby-on-rails, forms, iterator

我正在使用 Rails 创建一个表单。我不是在处理模型的单个实例，所以我知道我不能使用 form_for。因此，我正在使用 form_tag。我想在每个迭代器中创建几个复选框（使用 check_box_tag），然后使用提交按钮完成。所以我的看法是这样的：

```
<tbody>
<% form_tag ('/placeBids') do # placeBids controller and route setup correctly%>

  <% @auctions.each do |auction| %>
    <tr>
    <td>....
    <td>....
    <td><%= check_box_tag auction.product # sets check box id to product name%></td>
   </tr>
  <% end # end auction.each do%>
  </tbody>
</table>

<div style="float: right;">
    <%= submit_tag 'Submit' %>
</div>

<% end # end form_for %> 
```

现在这可行，因为我可以访问我的页面并点击提交按钮触发我的控制器操作。但是，当我尝试使用 Capybara 进行测试时：

```
let(:bid) {"Submit"}
   describe "when bidding on single auction =>"  do
                @auctions = Auction.all
                @auctions.each do |auction|
                    it "should increase the price of a checked auction '#{auction.product}' by $1." do
                        check (auction.product)
                        expect {click_button bid}.to change {auction.price}.by(1)
                    end 
```

我收到一个错误：

```
Failure/Error: expect {click_button bid}.to change {auction.price}.by(1)
     NoMethodError:
       undefined method `node_name' for nil:NilClass 
```

如果他们的 submit_tag 不在正确的位置，我听说有人会收到此错误。但是，我很确定我已经设置好了。那么，甚至可以在迭代器中创建 FormTagHelpers 吗？如果是这样，你猜我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:25:53.487

我发现了问题：

因为我在表格内声明表格的开头，所以当我关闭表格时，它会自动关闭表格。所以，我的 submit_tag 在表单之外。一旦我将 form_tag 移动到表声明的“上方”，它就可以正常工作。

我没想到 HTML 会这样工作 =(

# php - Zend Json 将数据渲染到视图中

> ID：13042640
> 
> 赞同：0
> 
> 时间：2012-10-24T03:35:07.033
> 
> 标签：php, javascript, jquery, ajax, zend-framework

您好我有一个 Zend Framework 应用程序，以下代码是`popularAction`控制器

```
public function popularAction()
    {
        $type = $this->_getParam('ref',1);
        if($type == 'reviews'){
        $businessReviewMapper = new Application_Model_Mapper_BusinessReviewsMapper();
        $result = $businessReviewMapper->getTotalVote();

        $rotd = $businessReviewMapper->getROTD($result['review_id']);
        $rotd[0]['u_img'] = $this->view->getLoginUserImage($rotd[0]['social_id'],$rotd[0]['login_type'],null,null,square);
        $rotd[0]['rating'] = $this->view->getRatingImg($rotd[0]['rating']);
        $rotd[0]['business_name_url'] = preg_replace("![^a-z0-9]+!i","-", $rotd[0]['business_name']);            
        $this->render('reviews');
        $this->_helper->json($rotd);

        } elseif($type == 'openings') {
            $this->view->text = "New Openings";

        } else {
            $this->_helper->redirector('index', 'index', 'default');
        }

    } 
```

当用户浏览到`http://localhost/business/popular?ref=reviews`上述控制器代码时，将呈现 reviews.phtml 模板。现在在模板本身内部有对数据的 ajax 请求，如下所示：

```
function getPopular()
{
    var count=1;
    $.ajax({
        url:"<?=$this->baseUrl('business/popular?ref=reviews')?>",
        data:{'count':count},
        dataType:"json"
        type:"POST",
        success:function(data){
            alert('ok')
        }
    }); 
```

不幸的`$this->_helper->json($rotd);`是，没有将数据传递给reviews.phtml，而是显示由zend db模型返回的json数据，我可能错了吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T05:40:20.433

如果您的目标是在 Ajax 请求上发送 JSON 而不是 .phtml 文件，请尝试实现：

```
 if ($this->getRequest()->isXmlHttpRequest()) {
        if ($this->getRequest()-isPost()) {
            $this->_helper->json($rotd);
        }
    } 
```

这部分检查请求是否是，让我们称之为：基于 ajax..

# function - 在lua中调用未定义函数时接收任何通知

> ID：13042641
> 
> 赞同：4
> 
> 时间：2012-10-24T03:35:17.507
> 
> 标签：function, lua, undefined-symbol

在 C++ 代码中：

```
class CWindowUI {
  public CWindowUI(const char* title,int width,int height);
  .....
};

static int CreateWindow(lua_State *l)
{
    int          width,height;
    char        *title;
    CWindowUI  **winp, *win;

    name = (char *) luaL_checkstring(l, 1);
    width= lua_tounsigned(l, 2);
    height= lua_tounsigned(l, 3);

    win = new CWindowUI(title,width,height);
    if (win == NULL) {
        lua_pushboolean(l, 0);
        return 1;
    }

    winp = (CWindowUI **) lua_newuserdata(l, sizeof(CWindowUI *));
    luaL_getmetatable(l, "WindowUI");
    lua_setmetatable(l, -2);
    *winp = win;

    return 1;
} 
```

在 Lua 代码中：

```
local win = CreateWindow("title", 480, 320);
win:resize(800, 600); 
```

现在我的问题是：

函数`CreateWindow`将返回一个名为`win`且函数`resize`未定义的对象。在 Lua 中调用未定义函数时如何获得通知？

通知应包括字符串`"resize"`和参数`800,600`。我想修改源以将未定义的函数映射到回调函数，但它不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T04:26:57.093

> 在 lua 中调用未定义函数时如何获得通知。

你没有。不是你的意思。

You can hook [an `__index` metamethod](http://www.lua.org/manual/5.1/manual.html#2.8) onto your registered "WindowUI" metatable (*groan*). Your metamethod will only get the userdata it was called on and the key that was used.

But you cannot differentiate between a function call and simply accessing a member variable, since *Lua* doesn't differentiate between these. If you return a function from your metamethod, and the user invokes the function-call operator on the return from the metamethod, then it will be called. Otherwise, they get a function to play with as they see fit. They can store it, pass it around, call it later, whatever. It's a value, like any other.

# sql-server-2008 - 从临时对象格式化数据并放入网格视图的存储过程

> ID：13042647
> 
> 赞同：-3
> 
> 时间：2012-10-24T03:36:06.983
> 
> 标签：sql-server-2008, stored-procedures

我是存储过程的新手。

我想更改从存储过程中获得的数据格式。比如某列返回的字符串值为`20110918190154`，我想把它改成`2011/09/18 19:01:54`。

这就是我执行存储过程并返回 a 的方式`DataTable`：

```
 storedProcCommand = new SqlCommand("GetPurchaseHistory", conn);
   storedProcCommand.CommandType = CommandType.StoredProcedure;
   storedProcCommand.Parameters.Add("@customerID", cCustomerID);
   adapter = new SqlDataAdapter(storedProcCommand);
   adapter.Fill(allData); 
```

在 GridView 中显示数据如下：

```
 <asp:GridView ID="GridView_PurchaseHistory" runat="server" AutoGenerateColumns="False" >
   <Columns>    
   <asp:BoundField DataField="cTranDateTime" HeaderText="Latest Purchase Date" />
   <asp:BoundField DataField="cItemNo" HeaderText="Item Number" />
   <asp:BoundField DataField="cDescDef" HeaderText="Description" />
   <asp:BoundField DataField="fQty" HeaderText="Total Quantity" />
   </Columns> 
   </asp:GridView> 
```

输出如下：

```
Latest Purchase Date
20121007193111
20120130171010
20110918190154 
```

我已经编写了子字符串的代码并更改了一次接收 1 个字符串的格式。我想知道是否无论如何我可以将日期存储在临时对象中并相应地更改其格式。或者我是否可以在显示之前进行更改。

非常感谢你..任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T04:00:12.870

假设我有一个字符串列表，如下所示

```
List<string> dates= new List<string>();
dates.Add("20121007193111");
dates.Add("20120130171010");
dates.Add("20110918190154"); 
```

和像这样的gridview

```
<asp:gridview runat="server" ID="gvDates" AutoGenerateColumns="False">
    <Columns>
        <asp:TemplateField HeaderText="Last Purchase Date">
            <ItemTemplate>
                <%#ModifyDate(Container.DataItem.ToString())%>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:gridview> 
```

在后面的代码中定义 ModifyDate 函数如下

```
public string ModifiedDate(string date)
    {
        CultureInfo provider = CultureInfo.InvariantCulture;
        string format = "yyyyMMddHHmmss";
        return DateTime.ParseExact(date, format, provider).ToString("yyyy/MM/dd HH:mm:ss");
    } 
```

最后将列表与gridview绑定

```
gvDates.DataSource = dates;
gvDates.DataBind(); 
```

我希望它能解决你的问题。

# eclipse - 在另一个模块中更改源时如何强制eclipse重新发布项目

> ID：13042648
> 
> 赞同：2
> 
> 时间：2012-10-24T03:36:13.163
> 
> 标签：eclipse, maven, eclipse-wtp

我有多模块 Maven 项目。其中一个模块是实际的 Web 应用程序，JBoss 是服务器。其他子项目是 Web 项目的依赖项。

我在嵌入在 Eclipse 中的 JBoss 中运行它。非常简单的配置。

当从 Eclipse 中执行时，如果我执行 mvn clean, mvn package - 然后清理 + 发布到 JBoss，一切都很好。

如果我更改了 web 项目的源代码，eclipse 会自动检测到重新发布的需要并且做得很好。

但是，如果我在非 web 子项目中更改源，eclipse 不会检测到更改，我必须 mvn clean、mvn package，然后手动发布到 JBoss 以选择代码更改。这很烦人，因为打包工作大约需要一分钟，然后发布工作又需要 30 秒。我必须清洁，因为没有清洁的简单包装也不会改变。

有没有办法在 eclipse 中配置东西，以便 eclipse 自动识别任何子项目/模块中的任何源更改，并在选择“运行”时重新发布到 JBoss？

还有另一个不好的副作用——调试不是 web 项目的源是不可能的——eclipse 的调试器看不到那个源。它只看到 web 模块的来源。

谢谢， 尼古拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:41:43.433

确保您的 Web 项目依赖于 pom 和 eclipse 项目中定义的其他模块（项目）。您可以在构建设置中检查。如果它们不存在，则可能意味着项目文件不是从您的 maven .pom 文件生成的。您可以通过运行 mvn eclipse:eclipse 来生成它

# gcc - 是否有适用于 OS x 的便携式 GCC？

> ID：13042653
> 
> 赞同：0
> 
> 时间：2012-10-24T03:37:06.120
> 
> 标签：gcc, gnu, portability

我很想把 gcc 可执行文件放到我的闪存驱动器上，这样我就可以在学校的实验室中编译代码。有谁知道我可以从终端运行的好的、可移植的 GCC 编译器？？？我正在使用 OS x Lion

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:40:40.890

当然有。这将从命令行运行。但我相信它也可以集成到 IDE 中

[osx 的 gcc](https://github.com/kennethreitz/osx-gcc-installer)

# ios6 - 3G网络上的游戏中心不起作用

> ID：13042657
> 
> 赞同：1
> 
> 时间：2012-10-24T03:37:46.390
> 
> 标签：ios6, game-center, 3g-network

我的游戏中心有问题，我正在开发一个多人游戏，我已经完成了连接部分，祝你好运，我可以连接另一台设备通过本地wifi玩游戏，但我试图通过3G网络和外接wifi，不行，在连接对方的界面好像停了，说明他们找到了对方，但是没有找到匹配的（可能）。比赛，另外一个还在连接视图，没有进入游戏，我看了日志信息，告诉我预期的玩家人数是1，这意味着只有一个玩家进入游戏，另一个没有，最大数量是两个。我找到了很多网站，但没有答案，也许是因为沙盒？我试过 ios5 vs ios5,ios5 vs ios6 ,ios6 vs ios6,

# heroku - 无法在 cmd 行中访问 heroku 控制台

> ID：13042667
> 
> 赞同：0
> 
> 时间：2012-10-24T03:38:46.303
> 
> 标签：heroku

这是我的堆栈信息：堆栈：bamboo-mri-1.9.2

当我尝试通过以下命令访问 heroku 控制台时： `heroku run -a pakrat script/rails console`（pakrat 是我的应用程序名称）

我收到以下错误：/app/.bundle/gems/ruby/1.9.1/gems/activerecord-3.1.1/lib/active_record/connection_adapters/postgresql_adapter.rb:1032:in `initialize': could not translate host name "ec2-107-22-169-50.compute-1.amazonaws.com" to address: Name or service not known (PGError) from /app/.bundle/gems/ruby/1.9.1/gems/activerecord-3.1.1/lib/active_record/connection_adapters/postgresql_adapter.rb:1032:in`new' 来自 /app/.bundle/ gems/ruby/1.9.1/gems/activerecord-3.1.1/lib/active_record/connection_adapters/postgresql_adapter.rb:1032:in `connect' from /app/.bundle/gems/ruby/1.9.1/gems/activerecord-3.1.1/lib/active_record/connection_adapters/postgresql_adapter.rb:301:in`initialize'来自/app/.bundle/gems/ruby/1.9.1/gems/activerecord- 3.1.1/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `new' from /app/.bundle/gems/ruby/1.9.1/gems/activerecord-3.1.1/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in`postgresql_connection' 来自 /app/.bundle/gems/ruby/1.9.1/gems/activerecord-3.1.1/lib/active_record/connection_adapters/abstract/ connection_pool.rb:304:in `new_connection' from /app/.bundle/gems/ruby/1.9.1/gems/activerecord-3.1.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:323:in`checkout_new_connection' 来自 /app/.bundle/gems/ruby/1.9.1/gems/activerecord-3.1.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:265:in`block (2 levels) in checkout' from /app/.bundle/gems/ruby/1.9.1/gems/activerecord-3.1.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:261:in`循环'来自 /app/.bundle/gems/ruby/1.9.1/gems/activerecord-3.1.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:261:in `block in checkout' from /usr/ruby1.9.2/lib/ruby/1.9.1/monitor.rb:201:in`mon_synchronize' 来自 /app/.bundle/gems /ruby/1.9.1/gems/activerecord-3.1.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:260:in `checkout' from /app/.bundle/gems/ruby/1.9.1/gems/activerecord-3.1.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:162:in`connection' 来自 /app/.bundle/gems/ruby/1.9.1/gems/activerecord -3.1.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:409:in `retrieve_connection' from /app/.bundle/gems/ruby/1.9.1/gems/activerecord-3.1.1/lib/active_record/connection_adapters/abstract/connection_specification.rb:107:in`retrieve_connection' 来自 /app/.bundle/gems/ruby/1.9.1/gems/activerecord-3.1.1/lib/active_record/connection_adapters /abstract/connection_specification.rb:89:in `connection' from /app/.bundle/gems/ruby/1.9.1/gems/activerecord-3.1.1/lib/active_record/base.rb:703:in`table_exists？来自 /app/.bundle/gems/ruby/1.9.1/gems/activerecord-3.1.1/lib/active_record/base.rb:798:in`attribute_names' from /app/.bundle/gems/ruby/1.9.1/gems/actionpack-3.1.1/lib/action_controller/metal/params_wrapper.rb:168:in`_set_wrapper_defaults' 来自 /app/.bundle/gems/ruby/1.9.1/gems/actionpack-3.1.1/lib/action_controller/metal/params_wrapper.rb:128:in `inherited' from /app/.bundle/gems/ruby/1.9.1/gems/actionpack-3.1.1/lib/abstract_controller/railties/routes_helpers.rb:7:in`block (2 levels) in with' from /app/ .bundle/gems/ruby/1.9.1/gems/actionpack-3.1.1/lib/action_controller/railties/paths.rb:7:in `block (2 levels) in with' from /app/app/controllers/authentications_controller.rb:1:in`'来自/app/.bundle/gems/ruby/1.9.1/gems/ activesupport-3.1.1/lib/active_support/dependencies.rb:240:in `require' from /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:240:in`block in require' 来自 /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.1.1/lib/active_support/dependencies。 rb:225:in `load_dependency' from /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:240:in`require' 来自`require_or_load' from /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:302:in`/app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:348:independ_on' 来自 /app/.bundle/ gems/ruby/1.9.1/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:214:in`require_dependency' from /app/.bundle/gems/ruby/1.9.1/gems/railties-3.1.1/lib/rails/engine.rb:417:in`在 eager_load 中阻止（2 个级别）！来自 /app/.bundle/gems/ruby/1.9.1/gems/railties-3.1.1/lib/rails/engine.rb:416:in`each' from /app/.bundle/gems/ruby/1.9.1/gems/railties-3.1.1/lib/rails/engine.rb:416:in`块中的 eager_load！来自 /app/.bundle/gems/ruby/1.9.1/gems/railties-3.1.1/lib/rails/engine.rb:414:in `each' from /app/.bundle/gems/ruby/1.9.1/gems/railties-3.1.1/lib/rails/engine.rb:414:in`eager_load！来自 /app/.bundle/gems/ruby/1.9.1/gems/railties-3.1.1/lib/rails/application/finisher.rb:51:in `block in <module:Finisher>' from /app/.bundle/gems/ruby/1.9.1/gems/railties-3.1.1/lib/rails/initializable.rb:30:in`instance_exec' 来自 /app/.bundle/gems/ruby/1.9 .1/gems/railties-3.1.1/lib/rails/initializable.rb:30:in `run' from /app/.bundle/gems/ruby/1.9.1/gems/railties-3.1.1/lib/rails/initializable.rb:55:in`block in run_initializers' from /app/.bundle/gems/ruby/1.9.1/gems/railties-3.1.1/lib /rails/initializable.rb:54:in `each' from /app/.bundle/gems/ruby/1.9.1/gems/railties-3.1.1/lib/rails/initializable.rb:54:in`run_initializers' 来自 /app/.bundle/gems/ruby/1.9.1/gems/railties-3.1.1/lib/rails/application.rb:96:in `initialize!' from /app/.bundle/gems/ruby/1.9.1/gems/railties-3.1.1/lib/rails/railtie/configurable.rb:30:in`method_missing' 来自 / app/config/environment.rb:5:in`<top (required)>' from /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:240:in`需要'来自 /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:240:in `block in require' from /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:223:in`block in load_dependency' 来自 /app/.bundle/gems/ruby /1.9.1/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:640:in `new_constants_in' from /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:223:in`load_dependency' 来自 /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.1.1/lib /active_support/dependencies.rb:240:in `require' from /app/.bundle/gems/ruby/1.9.1/gems/railties-3.1.1/lib/rails/application.rb:83:in`require_environment！' 来自 /app/.bundle/gems/ruby/1.9.1/gems/railties-3.1.1/lib/rails/commands.rb:39:in`<top (required)>' from script/rails:6:in`来自 script/rails:6:in `'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T04:21:50.107

我认为问题与无法连接到 postgres 有关，因此我使用 heroku pg:promote 提升了我的数据库，如下所述：

[https://devcenter.heroku.com/articles/heroku-postgres-addon](https://devcenter.heroku.com/articles/heroku-postgres-addon)

heroku 控制台再次工作

# unit-testing - MSTest Environment.CurrentDirectory VS 2012 不正确

> ID：13042671
> 
> 赞同：8
> 
> 时间：2012-10-24T03:39:24.767
> 
> 标签：unit-testing, visual-studio-2012, mstest

我正在使用 MSTest 和 Visual Studio 2012 进行单元测试，并且在 Environment.CurrentDirectory 调用方面遇到了它在两台不同机器上运行方式的差异。两台机器都在运行完全相同的测试并使用完全相同的 .testsettings 文件（所有部署都已关闭），但其中一台 Environment.CurrentDirectory 返回项目的 bin/debug（如我所愿），另一台返回 TestResults/ .../Out 作为当前工作目录。

在 bin/debug 文件夹中运行的文件夹中，运行的 TestResults 文件夹是空的，但在另一台机器上，TestResults 文件夹中有一个 AgentReset 文件，我不知道它来自哪里。有谁知道为什么会发生这种情况以及是否在某个地方有配置或设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:42:35.290

检查您是否有任何部署在第二台机器上打开。

# android - 弹出最后一个片段时处理返回键

> ID：13042672
> 
> 赞同：9
> 
> 时间：2012-10-24T03:39:29.330
> 
> 标签：android, android-fragments

`Fragments`我`Activity`根据用户交互动态添加。当我按后退键时，会弹出片段。但是，当我按下第一次添加到堆栈中的片段的返回键时，“活动”显示一个空布局。我希望 Activity 此时调用“finish()”并消失。我试过了：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    super.onKeyDown(keyCode, event);
    if(keyCode == KeyEvent.KEYCODE_BACK){
        if(getFragmentManager().getBackStackEntryCount()==0){
            finish();
            return true;
        }
    }
    return true;
} 
```

但这具有阻止后退键功能的效果。任何指向正确方向的指针都值得赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T03:54:41.403

你在哪里添加你的第一个片段？不要将该事务添加到后台堆栈，它应该按照您想要的方式工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T03:51:54.900

将第二个更改`return true;`为`return false;`表示您没有处理按键。当后台堆栈为空时，这应该关闭活动，否则保持原样。

# c# - TimeSpan.TryParseExact 不起作用

> ID：13042675
> 
> 赞同：27
> 
> 时间：2012-10-24T03:40:06.967
> 
> 标签：c#

我正在尝试从字符串中检索时间跨度，但 TryParseExact 返回错误（失败）。

我看不出我做错了什么，你能帮忙吗？我已经在代码中尝试了我的行的 2 个版本，但都不起作用。

```
TimeSpan.TryParseExact("04:00:01","HH:mm:ss",CultureInfo.CurrentCulture, out aTime) 
```

和

```
TimeSpan.TryParseExact("04:00:01","HH:mm:ss", null, out aTime) 
```

编辑：这里的两个回答都是正确的，我的自定义时间跨度格式有错误 - 我犯的错误是假设 DateTime 的自定义格式适用于 TimeSpan，但它们不适用。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-24T04:11:33.980

问题只是在您指定的 TimeSpan 的格式字符串中`"HH:mm:ss"`。说明符`HH`（大写）对时间跨度无效。你应该使用`hh`. 格式字符串确实区分大小写。

冒号 ( `:`) 也需要转义，所以使用`"hh\\:mm\\:ss"`,`@"hh\:mm\:ss"`或`"hh':'mm':'ss"`. 所有三种形式都将具有相同的效果。

[您可以在此处](http://msdn.microsoft.com/library/ee372287.aspx)查看 TimeSpan 的有效自定义格式字符串列表。TimeSpan 的标准格式字符串在[这里](http://msdn.microsoft.com/library/ee372286.aspx)。

虽然`HH`对于 DateTime 和 DateTimeOffset 有效，其中它表示 24 小时制，小写 hh 表示 12 小时制，对于 TimeSpan - 小时部分始终基于 24 小时。您会认为`HH`格式将是选择的格式，以保持一致性，但不，它是`hh`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-12T01:38:59.907

可能应该提到您需要转义冒号字符。

```
TryParseExact("04:00:01", "HH\\:mm\\:ss" ... 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-24T03:49:22.140

您传递的字符串格式是错误的。

```
var res=TimeSpan.TryParseExact("04:00:01", "g", CultureInfo.CurrentCulture, out aTime); 
```

g- 通用短格式，对文化敏感。

更多关于这里的[标准时间跨度格式字符串](http://msdn.microsoft.com/en-us/library/ee372286.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-02T23:15:49.890

也许您正在使用多种格式。

```
public const string TimeFormat1 = "hh\\:mm";
public const string TimeFormat2 = "hh\\:mm:\\ss";
var parsed = TimeSpan.TryParseExact(time, new [] { TimeFormat1, TimeFormat2 }, CultureInfo.CurrentCulture, out TimeSpan ts1);
// parsed is always false 
```

您可能以为您逃脱了结肠；但实际上并没有……

这`"hh\\:mm:\\ss"`行不通。

在 ParseExact 中使用 TimeFormat2 会引发 FormatException...

您打算改用它`"hh\\:mm\\:ss"`。

# java - 需要帮助在java中查找数组中的最大值

> ID：13042678
> 
> 赞同：-3
> 
> 时间：2012-10-24T03:40:17.273
> 
> 标签：java, arrays, methods, max

我正在尝试找到 number = [10] 的数组的最大整数。我的方法打印出 0，而不是最大整数。

```
public static void maxArr (int[] number){ 
        int max = number[0];
        for(int i = 1; i<number.length; i++){
            if(number[i]> max){
                max = number[i];
            }
        } System.out.print(max);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T04:10:59.633

您没有正确填充数组。

在java中，当你第一次创建一个数组时`private int[] myArray`，它是空的（也就是说，它还不能代表一个实际的东西，它只是一个*可以*指向未来数组的名称）。接下来，您以某种方式告诉它它将容纳多少个元素。有两种常用的方法可以做到这一点：

第一个看起来像`myArray = new int[42];`这将*初始化*数组，但每个槽都将为零（或者更糟糕的是，如果它是一个对象数组，则为 null）。您可以使用`myArray[3] = 13`. 这会将 int 13 存储在 myArray 的插槽 3 中。数组槽从 0 开始计数，所以如果你想要调用的第一个元素`myArray[0]`，如果你想要调用的第二个元素`myArray[1]`，依此类推。只需几行代码，您就可以使用 for 循环来填充整个数组：

```
for (int i = 0; i < myArray.length; i++) {
    myArray[i] = 10;
} 
```

您的阵列现在已准备好用于其生活中的任何目的。

填充数组的第二种方法发生在初始化它时。看起来`myArray = new int[] {10, 42, 24, 64, 8, 16, 3};`你放入大括号的任何东西现在都在数组中，所以现在的值`myArray[0]`是 10，现在的值`myArray[1]`是 42，依此类推。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T03:46:03.127

错误在于您的方法的使用。否则它看起来很好。

```
int[] array = new int[1]
array[0] = 10
maxArr(array) 
```

是你试图做的，它会打印 10。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T03:50:13.887

```
int[] array = new int [N]; 
```

这会将 的所有元素初始化`array`为默认值`int`0。

所以，你得到0作为最大值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T03:50:55.993

这会将所有元素初始化为 0。

```
int N = 10;
int[] array = new int[N]
maxArray(array) 
```

如果你想用 10 初始化它，你应该

```
int[] array= {10};
maxArray(array) //This should print 10 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T03:53:40.687

尝试一些类似的东西

```
int[] array = new int[]{10, 9, 8, 7, 6, 5, 4, 3, 2, 1};
maxArray(array); 
```

现在应该打印“10”

# google-app-engine - 从 GAE python 解析字典以在 javascript / GMaps api 中创建标记对象

> ID：13042679
> 
> 赞同：0
> 
> 时间：2012-10-24T03:40:24.853
> 
> 标签：google-app-engine, google-maps, google-maps-api-3

我并不是真的在寻求一个具体的答案，而是指出了正确的方向。

我有一些坐标和名称作为字典存储在使用 python 坐在 GAE 中的列表中。我想用这些数据在谷歌地图中创建一些标记对象。问题是，我不太确定如何以一种好的方式解决这个问题。

这是数据的一个例子。[{'name': 'derp', 'lat': 123456, 'lng': 1234567}, {'name': 'hurp', 'lat': 431234123, 'lng': 453453453}]

我在想我会将这个列表字典转换为对 javascript 友好的东西，将它作为变量直接插入到我的 javascript 代码中，然后使用我的列表对以下函数进行 for 循环。

```
function addMarker(lat, lng, name){
        var point = new google.maps.LatLng(lat, lng);
        var marker = new google.maps.Marker({position: point,
                                             map: map,
                                             title: name
                                            });

} 
```

清如泥？

我几乎可以肯定是在寻找错误的方向，所以向我抛出任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:49:49.860

JSON 对 JavaScript 非常友好。您可以将字典转储为 JSON 字符串，然后按照您在问题中的建议将其插入到您的 javascript 中。或者，您创建一个 GAE Web 服务来请求客户端中的 JSON 数据。这是一个简单的选择，如果您熟悉 jquery / ajax 并且如果客户端可以更改请求，这是一个首选的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T04:49:24.737

如果您正在使用模板，请将您的标记数组传递给模板（在名为“标记”的绑定中），然后执行类似的操作

```
{% for marker in markers %}
  addMaker({{marker.lat}},{{marker.long}},'{{marker.name}}');
{% endfor %} 
```

应该做你需要的。

# jquery - jquery .html() 选择问题

> ID：13042681
> 
> 赞同：1
> 
> 时间：2012-10-24T03:40:34.063
> 
> 标签：jquery, function, select, option

我基本上在做两个下拉菜单，一个决定接下来应该显示哪个选择。然后它会显示第二个下拉菜单，然后应该会显示一个新表单。我已经简化了代码，但想法应该还是一样的。我的问题是第二个没有显示它应该显示的代码。

HTML

```
<select id="change1" on change="changeForm(this.value);">
 <option> Select Option </option>
  <option value="c"> Option 1</option>
  <option value="p"> Option 2</option>
 </select>
  <div id="form"></div>  <div id="changep"></div> 
```

Javascript

```
function changeForm(x)
{
      if(x=='c')
      {
         $('#form').html('It Works');
       }

      if(x=='p')
       {
         var code = ' <select id="option2" onselect="placeHtml(this.value);"><option>Select Message</option><option value="1m">Message 1</option><option value="2m">Message 2</option></select>';
         $('#form').html(code);
        }
}

function placeHtml(x)
 {
    if(x=='1m')
     {
         $('#changep').html('This will work');
     }

     if(x=='2m')
     {
         $('#changep').html('This is a different message');
     }
 } 
```

现在我的问题是，当使用第一个下拉菜单时，结果符合预期，但使用第二个下拉菜单......没有任何变化。如果我使用 onchange 而不是 onselect 在我更改选择后它只有一个空白下拉菜单。我不知道这里有什么问题。有人可以帮助我吗？使用 jquery 1.8.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T04:44:39.677

更改这一点，因为 onselect 属性可用于：

```
 ///The onselect attribute can be used with: 
 <input type="file">, <input type="password">, <input type="text">, <keygen>, and <textarea>.

  function changeForm(x)
  {
      if(x=='c')
      {
         $('#form').html('It Works');
       }
     else if(x=='p')
       {
         var code = ' <select id="option2" onchange="placeHtml(this.value);"><option>Select Message</option><option value="1m">Message 1</option><option value="2m">Message 2</option></select>';
         $('#form').html(code);
        }
  }

function placeHtml(x)
 {
    if(x=='1m')
     {
         $('#changep').html('This will work');
     }

     if(x=='2m')
     {
         $('#changep').html('This is a different message');
     }
 }</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T03:53:59.207

在 Change1 和 option2 中将 onselect 更改为 onchange，它将起作用

```
<select id="change1" onchange="changeForm(this.value);"> 
```

和

```
if(x=='p')
{
     var code = ' <select id="option2" onchange="placeHtml(this.value);"><option>Select Message</option><option value="1m">Message 1</option><option value="2m">Message 2</option></select>';
     $('#form').html(code);
} 
```

检查此**[演示](http://jsfiddle.net/wHUjR/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T03:49:39.810

尝试在您的 option2 选择元素中将 onselect 更改为 onchange。

# c# - 如何捕捉鼠标事件和键盘事件

> ID：13042692
> 
> 赞同：1
> 
> 时间：2012-10-24T03:41:44.827
> 
> 标签：c#, c#-4.0, c#-2.0

我开发了一个 Web 浏览器，我想同时捕获键盘事件和鼠标事件。如果鼠标事件和键盘事件在给定时间段内没有发生，如何捕获它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T03:55:47.223

鼠标事件和键盘事件可以通过使用 windows 钩子在 dotnet 中捕获。这些钩子是通过对[SetWindowsHookEx](http://support.microsoft.com/kb/318804)的 ap/invoke 调用创建的。

特别是，只有两种类型的钩子可以使用：低级键盘和鼠标钩子，称为 WH_KEYBOARD_LL 和 WH_MOUSE_LL，这些都是您需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T03:55:20.563

```
 protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
        {
            if (keyData == Keys.Escape)
            {
                //make some action
            }
            return base.ProcessCmdKey(ref msg, keyData);
        } 
```

这是如何在键盘上捕捉 Escape 键。并检查此以获取有关鼠标事件的更多信息鼠标 [事件](http://www.experts-exchange.com/Programming/Languages/C_Sharp/Q_20661377.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T05:51:56.063

[http://www.codeproject.com/Articles/6362/Global-System-Hooks-in-NET](http://www.codeproject.com/Articles/6362/Global-System-Hooks-in-NET)

这可能会帮助您解决问题。

# objective-c - 单击选项卡时需要在进入单击的选项卡之前回答警报 - iPad 编程

> ID：13042695
> 
> 赞同：1
> 
> 时间：2012-10-24T03:42:02.140
> 
> 标签：objective-c, ios, ipad

我的屏幕上有很多标签，我想给出一个警告框，上面写着“你想保存更改吗？” 如果用户更改页面中的任何内容，而不单击页面中提供的保存按钮，他正在单击差异选项卡。我能够获得警报视图，但选项卡单击会将屏幕移动到单击的选项卡。在警报视图得到答复之前，屏幕不应更改。

谁能让我知道如何在警报视图得到回答之前抑制屏幕更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T03:49:13.633

这并不能直接回答您的问题，但是：您尝试做的事情听起来像是糟糕的 UI 设计。（一般来说，如果你觉得你在与 UIKit 作斗争，那你可能做错了。）

在这种情况下：如果你真的想确保用户在移动到不同的屏幕之前点击保存按钮，**你应该在模式视图中显示该屏幕，这样就不可能导航到应用程序的任何其他部分。**

换句话说，如果您想阻止用户离开屏幕，*请不要向他们显示允许他们离开的按钮或选项卡*。否则，您只会为自己做更多的工作并使用户感到沮丧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T03:49:49.360

`UITabBarControllerDelegate`在您的应用委托中实施`applicationDidFinishLaunching`

```
- (void)applicationDidFinishLaunching:(UIApplication *)application
{
    self.tabBarController.delegate = self;
    [window addSubview:self.tabBarController.view];
} 
```

然后使用下面的委托方法，

```
- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController; 
```

此方法在选项卡切换之前调用，您可以在此处返回 no 以禁用它并显示警告消息。一旦用户执行了保存，他可以再次按下选项卡，或者您可以以编程方式切换到新选项卡，如下所示，

```
self.tabBarController.selectedViewController = [self.tabBarController.viewControllers objectAtIndex:0]; 
```

在你的委托中添加这个，

以编程方式切换到选项卡怎么样？

```
- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController {
      if () {
        //some code
      } else {
        //some other code
        self.tabBarController.selectedViewController = viewController;
      }
} 
```

# android - Android - Facebook API 为用户封面照片提供空结果

> ID：13042698
> 
> 赞同：2
> 
> 时间：2012-10-24T03:42:15.950
> 
> 标签：android, facebook, facebook-graph-api

我正在尝试获取用户的封面照片并将其显示在布局的顶部。我正在使用 AsyncTask 运行对 Facebook 的 API 调用。我用来获取 Facebook 数据的代码是

```
JSONObject json = null;
response = Utility.facebook.request("me?fields=cover");
json = Util.parseJson(response); 
```

停止线程的异常来自下一步的 json 错误，因为返回的 json 是空的，即使请求清除。我可以只使用“me”或“me/albums”或“me?fields=cover”以外的任何东西来获得正确的 json。当我注释掉最后一行时，“尝试”过程结束，没有异常/错误。

Facebook API 有问题还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T01:30:43.673

没有得到任何结果的原因可以在 request(String graphPath) 方法的 javadoc 中找到：

> (...) 这个方法会阻塞等待网络响应，所以不要在 UI 线程中调用它。

在您的情况下，您可能应该执行以下同步调用：

```
Bundle params = new Bundle();
params.putString("fields", "cover");
String result = Utility.facebook.request("me/", params); 
```

Siddharth Lele 的回答非常正确，但我想说明在这种情况下没有得到任何回应的实际原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T05:04:41.743

在处理用户配置文件时，我个人更喜欢使用 FQL。如果您想尝试 FQL，请查看以下代码。如果您想坚持使用 Graph API，请参阅以下答案：[https ://stackoverflow.com/a/12434640/450534](https://stackoverflow.com/a/12434640/450534)

```
try {
    String query = "SELECT pic_cover FROM user where uid = " + PUT_THE_USER_ID_HERE;
    Bundle param = new Bundle();
    param.putString("method", "fql.query");
    param.putString("query", query);

    String response = Utility.mFacebook.request(param);

    JSONArray JAUser = new JSONArray(response);

    for (int i = 0; i < JAUser.length(); i++) {
        JSONObject JOUser = JAUser.getJSONObject(i);

        // COVER PHOTO
        if (JOUser.has("pic_cover"))    {

            String getCover = JOUser.getString("pic_cover");

            if (getCover.equals("null"))    {
                String finalCover = null;
            } else {
                JSONObject JOCoverSource = JOUser.optJSONObject("pic_cover");

                if (JOCoverSource.has("source"))    {
                    String finalCover = JOCoverSource.getString("source");
                } else {
                    String finalCover = null;
                }
            }

        } else {
            String finalCover = null;
        }
    }

} catch (Exception e) {
    // TODO: handle exception
} 
```

上面的代码已经考虑了在他们的个人资料中没有设置*封面照片*的用户，并检查了它的可用性。使用此代码，您将拥有`URL`封面照片，然后可以根据需要进行处理。

**注意：**如果你是获取登录用户的封面照片，这段代码`SELECT pic_cover FROM user where uid = " + PUT_THE_USER_ID_HERE;`也可以写成：`SELECT pic_cover FROM user where uid = me()";`对于未登录的用户的封面照片，上面可以照原样使用。

作为旁注的几件事。

1.  我几乎完全使用[Fedor 的](https://stackoverflow.com/users/95313/fedor)延迟加载技术来加载图像。
2.  我建议在`AsyncTask`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-20T11:54:08.157

**注意**：使用 Facebook API 和端点获取封面照片`https://graph.facebook.com/me?fields=cover`不再适用于 2014 年 12 月 20 日。

它应该给出以下响应：

```
{
   "cover": {
   "cover_id": "10151008748223553",
   "source": "http://sphotos-a.ak.fbcdn.net/hphotos-ak-ash4/s720x720/391237_10151008748223553_422785532_n.jpg",
   "offset_y": 0
   },
   "id": "19292868552"
} 
```

但现在它只给出了用户的`id`：

```
{
  "id": "19292868552"
} 
```

使用[Graph Tool explorer v2.2](https://developers.facebook.com/tools/explorer/)验证了这一点`me?fields=cover`。

# mongodb - 条件 Mongoose 查询

> ID：13042703
> 
> 赞同：2
> 
> 时间：2012-10-24T03:43:01.987
> 
> 标签：mongodb, mongoose

我有一个要在 where 情况下运行的查询，仅当变量为 false 时。这就是我现在正在做的，但它不是最佳的。有没有办法用一个查询来做到这一点？

```
if (user) {
    models.Interviews.find({}).exec(function (err, interviews) {
        // stuff
    });
} else {
    models.Interviews.find({}).where('group').equals(group_id).where('disabled').equals(false).exec(function (err, interviews) {
        // stuff
    });         
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T03:53:24.903

`Query`如果“不是最佳”是指需要在没有函数的情况下复制“东西”代码，则可以按如下步骤构建对象：

```
var query = models.Interviews.find({});
if (!user) {
    query = query.where('group').equals(group_id).where('disabled').equals(false);
}
query.exec(function (err, interviews) {
    // stuff
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T03:52:23.013

为什么这不是最优的？单个（更复杂的）查询如何更好？

不太好的是重复的“东西”，但你可以很容易地解决这个问题：

```
var stuff = function(err, interviews) {
    // stuff
 };

if (user) {
  models.Interviews.find({}).exec(stuff);
} else {
  models.Interviews.find({})
    .where('group').equals(group_id).where('disabled').equals(false)
    .exec(stuff);
} 
```

或者

```
var query = models.Interviews.find({});
if (!user){
   query = query.where('group').equals(group_id)
                .where('disabled').equals(false);
}
query.exec(function(err, interviews) {
    // stuff
 }); 
```

# python - 用换行符编写文本文件

> ID：13042709
> 
> 赞同：7
> 
> 时间：2012-10-24T03:44:20.140
> 
> 标签：python, python-3.x

我想编写一个创建多行的文本文件，所以我想知道如何将每个值放在新行上。

这是我的代码：

```
import itertools
from itertools import permutations , combinations
lista=[]

splits=itertools.permutations('0123456789', 5)
for x in splits:
    lista.append(x)

f=open('lala.txt', 'w')
for i in lista:
    f.write(str(i)) 
```

在这部分我需要换行：`f.write(str(i))`

我试过了：`f.write(str(i)\n)`但给了我一个错误

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-24T03:46:25.773

您可以使用：

`f.write(str(i) + '\n')`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T04:44:57.357

由于您的行已经在列表中，您可以使用`writelines()`：

```
import itertools

lista = [",".join(i)+'\n' for i in itertools.permutations('0123456789',5)]

with open('lala.txt', 'w') as f:
    f.writelines(lista) 
```

我使用了自动为您关闭文件的[`with`语句；](http://docs.python.org/reference/compound_stmts.html#the-with-statement)并使用[列表推导](http://www.secnetix.de/olli/Python/list_comprehensions.hawk)来创建您的初始排列列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-04T15:07:33.263

编辑列表本身可能是不可取的。在这种情况下，您可以`csv`模块：

```
import itertools, os, csv

lista = list(itertools.permutations('0123456789',5))

with open('lala.txt', 'w', newline=os.linesep) as f:
    writer = csv.writer(f, quoting=csv.QUOTE_NONE)
    writer.writerows(lista) 
```

这`quoting=csv.QUOTE_NONE`是为了删除出现的`"`标记，因为置换的项目是字符串。

# mysql - MySQL count(*) 一个月内每天返回 [BLOB-2B] 而不是数字

> ID：13042710
> 
> 赞同：0
> 
> 时间：2012-10-24T03:44:24.167
> 
> 标签：mysql, count, blob

我将使用特定的用户 ID（vwr_tid）计算一个月中每一天的每一行。一切正常 - 结果显示在表格中，但只有一件事。每天都没有计数。它变成 [BLOB-xx] 而不是当天的行数。这是我的代码：

```
SELECT MONTH_v, YEAR_V, 
GROUP_CONCAT(IF(day_v=1, views, null)) AS '1',
GROUP_CONCAT(IF(day_v=2, views, null)) AS '2',
GROUP_CONCAT(IF(day_v=3, views, null)) AS '3',
GROUP_CONCAT(IF(day_v=4, views, null)) AS '4',
GROUP_CONCAT(IF(day_v=5, views, null)) AS '5',
GROUP_CONCAT(IF(day_v=6, views, null)) AS '6',
GROUP_CONCAT(IF(day_v=7, views, null)) AS '7',
GROUP_CONCAT(IF(day_v=8, views, null)) AS '8',
GROUP_CONCAT(IF(day_v=9, views, null)) AS '9',
GROUP_CONCAT(IF(day_v=10, views, null)) AS '10',
GROUP_CONCAT(IF(day_v=11, views, null)) AS '11',
GROUP_CONCAT(IF(day_v=12, views, null)) AS '12',
GROUP_CONCAT(IF(day_v=13, views, null)) AS '13',
GROUP_CONCAT(IF(day_v=14, views, null)) AS '14',
GROUP_CONCAT(IF(day_v=15, views, null)) AS '15',
GROUP_CONCAT(IF(day_v=16, views, null)) AS '16',
GROUP_CONCAT(IF(day_v=17, views, null)) AS '17',
GROUP_CONCAT(IF(day_v=18, views, null)) AS '18',
GROUP_CONCAT(IF(day_v=19, views, null)) AS '19',
GROUP_CONCAT(IF(day_v=20, views, null)) AS '20',
GROUP_CONCAT(IF(day_v=21, views, null)) AS '21',
GROUP_CONCAT(IF(day_v=22, views, null)) AS '22',
GROUP_CONCAT(IF(day_v=23, views, null)) AS '23',
GROUP_CONCAT(IF(day_v=24, views, null)) AS '24',
GROUP_CONCAT(IF(day_v=25, views, null)) AS '25',
GROUP_CONCAT(IF(day_v=26, views, null)) AS '26',
GROUP_CONCAT(IF(day_v=27, views, null)) AS '27',
GROUP_CONCAT(IF(day_v=28, views, null)) AS '28',
GROUP_CONCAT(IF(day_v=29, views, null)) AS '29',
GROUP_CONCAT(IF(day_v=30, views, null)) AS '30',
GROUP_CONCAT(IF(day_v=31, views, null)) AS '31'
FROM
(
 SELECT DAY(vwr_date) AS day_v, 
 MONTH(vwr_date) AS MONTH_v, 
 Year(vwr_date) AS YEAR_V,
 date(vwr_date) AS date_v, 
 count(vwr_id) AS views 
 FROM car_viewer 
 WHERE Year(vwr_date)='2012' AND vwr_tid='18' 
 GROUP BY date_v 
) as viewz
GROUP BY MONTH_v, YEAR_V 
ORDER BY MONTH_v, YEAR_V DESC 
```

该脚本从@rs 更新：[将一个月中的每一天的记录从 mysql 计数到 html 表中](https://stackoverflow.com/questions/13017585/count-record-each-day-of-a-month-from-mysql-into-html-table)

结果。 ![Blob 结果而不是计数](../Images/43e609a2fcc0ec6bdac5af65ee694bac.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T04:09:24.737

我不认为需要`GROUP_CONCAT()`，什么时候`SUM()`可以满足您的需求：

```
SELECT MONTH_v, YEAR_V, 
SUM(IF(day_v=1, views, 0)) AS '1',
SUM(IF(day_v=2, views, 0)) AS '2',
SUM(IF(day_v=3, views, 0)) AS '3',
SUM(IF(day_v=4, views, 0)) AS '4',
SUM(IF(day_v=5, views, 0)) AS '5',
SUM(IF(day_v=6, views, 0)) AS '6',
SUM(IF(day_v=7, views, 0)) AS '7',
SUM(IF(day_v=8, views, 0)) AS '8',
SUM(IF(day_v=9, views, 0)) AS '9',
SUM(IF(day_v=10, views, 0)) AS '10',
SUM(IF(day_v=11, views, 0)) AS '11',
SUM(IF(day_v=12, views, 0)) AS '12',
SUM(IF(day_v=13, views, 0)) AS '13',
SUM(IF(day_v=14, views, 0)) AS '14',
SUM(IF(day_v=15, views, 0)) AS '15',
SUM(IF(day_v=16, views, 0)) AS '16',
SUM(IF(day_v=17, views, 0)) AS '17',
SUM(IF(day_v=18, views, 0)) AS '18',
SUM(IF(day_v=19, views, 0)) AS '19',
SUM(IF(day_v=20, views, 0)) AS '20',
SUM(IF(day_v=21, views, 0)) AS '21',
SUM(IF(day_v=22, views, 0)) AS '22',
SUM(IF(day_v=23, views, 0)) AS '23',
SUM(IF(day_v=24, views, 0)) AS '24',
SUM(IF(day_v=25, views, 0)) AS '25',
SUM(IF(day_v=26, views, 0)) AS '26',
SUM(IF(day_v=27, views, 0)) AS '27',
SUM(IF(day_v=28, views, 0)) AS '28',
SUM(IF(day_v=29, views, 0)) AS '29',
SUM(IF(day_v=30, views, 0)) AS '30',
SUM(IF(day_v=31, views, 0)) AS '31'
FROM
(
 SELECT DAY(vwr_date) AS day_v, 
 MONTH(vwr_date) AS MONTH_v, 
 Year(vwr_date) AS YEAR_V,
 date(vwr_date) AS date_v, 
 count(vwr_id) AS views 
 FROM car_viewer 
 WHERE Year(vwr_date)='2012' AND vwr_tid='18' 
 GROUP BY date_v 
) as viewz
GROUP BY MONTH_v, YEAR_V 
ORDER BY MONTH_v, YEAR_V DESC; 
```

有关工作示例，请参阅[http://sqlfiddle.com/#!2/75aa8/1 。](http://sqlfiddle.com/#!2/75aa8/1)

# html - HTML 页面与所有屏幕尺寸不兼容

> ID：13042711
> 
> 赞同：1
> 
> 时间：2012-10-24T03:44:26.023
> 
> 标签：html, css

```
<html>
<head>
<title>website page</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body bgcolor="#FFFFFF" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" width="50%" height="50%">
<!-- Save for Web Slices (website page.psd) -->
<table id="Table_01" width="1681" height="1051" border="0" cellpadding="0" cellspacing="0" align="center" >
    <tr>
        <td colspan="2">
            <img src="images/website-page_01.gif" width="302" height="65" alt=""></td>
        <td colspan="6">
            <img src="images/website-page_02.gif" width="999" height="65" alt=""></td>
        <td colspan="2">
            <img src="images/website-page_03.gif" width="379" height="65" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="1" height="65" alt=""></td>
    </tr>
    <tr>
        <td>
            <img src="images/website-page_04.gif" width="3" height="1" alt=""></td>
        <td rowspan="2">
            <img src="images/website-page_05.gif" width="299" height="606" alt=""></td>
        <td colspan="7" rowspan="2">
            <img src="images/website-page_06.gif" width="1050" height="606" alt=""></td>
        <td rowspan="2">
            <img src="images/website-page_07.gif" width="328" height="606" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="1" height="1" alt=""></td>
    </tr>
    <tr>
        <td rowspan="3">
            <img src="images/website-page_08.gif" width="3" height="984" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="1" height="605" alt=""></td>
    </tr>
    <tr>
        <td colspan="2" rowspan="2">
            <img src="images/website-page_09.gif" width="639" height="379" alt=""></td>
        <td rowspan="2">
            <img src="images/website-page_10.gif" width="18" height="379" alt=""></td>
        <td rowspan="2">
            <img src="images/website-page_11.gif" width="342" height="379" alt=""></td>
        <td colspan="2">
            <img src="images/website-page_12.gif" width="22" height="1" alt=""></td>
        <td colspan="3" rowspan="2">
            <img src="images/website-page_13.gif" width="656" height="379" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="1" height="1" alt=""></td>
    </tr>
    <tr>
        <td>
            <img src="images/website-page_14.gif" width="21" height="378" alt=""></td>
        <td>
            <img src="images/website-page_15.gif" width="1" height="378" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="1" height="378" alt=""></td>
    </tr>
    <tr>
        <td>
            <img src="images/spacer.gif" width="3" height="1" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="299" height="1" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="340" height="1" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="18" height="1" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="342" height="1" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="21" height="1" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="1" height="1" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="277" height="1" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="51" height="1" alt=""></td>
        <td>
            <img src="images/spacer.gif" width="328" height="1" alt=""></td>
        <td></td>
    </tr>
</table>
<!-- End Save for Web Slices -->
</body>
</html> 
```

在我使用PS完成页面设计并将其导出为html文件后，15英寸的屏幕还可以，但13英寸的屏幕很大。我怎样才能使它与所有屏幕兼容，而无需滚动。

解决方案更新：我调整了 psd 文件的大小并使其更小 780*800 ，然后将其导出为图像/HTML，现在它可以在所有浏览器上正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:49:39.923

您的 15 英寸显示器必须具有比 13 英寸显示器更高的分辨率。所以它看起来更大。您的网页在任何具有相同分辨率的显示器上看起来都应该相同。你应该检查你的分辨率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T03:50:06.050

使 `<img src="images/website-page_02.gif" width="999" height="65" alt=""></td>`' 的宽度变小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T22:54:00.527

解决方案更新：我调整了 psd 文件的大小并使其更小 780*800 ，然后将其导出为图像/HTML，现在它可以在所有浏览器上正常工作。

# php - 上传文件并显示，但在用户提交后保存到数据库

> ID：13042712
> 
> 赞同：0
> 
> 时间：2012-10-24T03:44:59.667
> 
> 标签：php, mysql, image-uploading

我有一个图片上传表格。当用户选择图像时，将显示图像，以及用于标题的新输入表单和提交按钮。我知道该怎么做。

想法是，仅当用户单击最终提交时才保存图像和标题。

为此，我是否应该在第一步中保存图像并更新数据库？或者我可以上传到临时文件，如果用户在第二步中提交，继续将文件移动到最终目的地并更新数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T03:53:28.370

您应该让表单等待用户提交。否则，您的数据库将溢出未完成（或临时）的标题和图像名称。当用户单击提交时，上传过程开始并测试上传结果，如果 true=insert into your_table values(...)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T04:07:47.770

为什么需要 2 个步骤？如果您保存图像只是为了向用户显示图像，您可以使用 HTML5 File Reader API 在上传到服务器之前显示来自用户机器的图像。. . [https://developer.mozilla.org/en-US/docs/DOM/FileReader](https://developer.mozilla.org/en-US/docs/DOM/FileReader)

# javascript - 从 .live 更改为 .on

> ID：13042713
> 
> 赞同：2
> 
> 时间：2012-10-24T03:45:08.153
> 
> 标签：javascript, jquery, jquery-on

我知道`.live`它被贬值了，最近我正在更新一个页面并意识到我正在使用`.live`我想切换到`.on`但不明白要更改什么。这是我当前的代码：

```
 //Script for Choosing which form to display
$("#email-button, #text-button").live('click',
function(){  

    //figure out what button was clicked. 
    if(this.id === "email-button"){
        var btnA = $(this);
        var btnB = $("#text-button");
        var divA = $('#email-form');
        var divB = $('#text-form');
    }
    else{
        btnA = $(this);
        btnB = $("#email-button");
        divA = $('#text-form');
        divB = $('#email-form');
    }

    //make sure it is not already active, no use to show/hide when it is already set
    if(btnA.hasClass('dark_button_span')){
        return; 
    }

    //see if div is visible, if so hide, than show first div
    if(divB.is(":visible")){        
        divB.fadeOut("slow", function(){
             divA.fadeIn("slow");
        });
    }
    else{//if already hidden, just show the first div
        divA.fadeIn("slow");            
    }

    //Add and remove classes to the buttons to switch state
    btnA.addClass('dark_button_span').removeClass('light_button_span');
    btnB.removeClass('dark_button_span').addClass('light_button_span');
  }    
); 
```

我在编写上述脚本时得到了帮助，但不知道要更改什么。简单地将 .live 更改为 .on 是行不通的。

任何帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T03:47:21.810

on 的语法是

```
$("containerElement").on("click", "targetElement(s)", function(){ }); 
```

所以在你的情况下它可能是

```
$("body").on("click", "#email-button, #text-button", function(){ }); 
```

但比具体更具体`body`是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T03:48:14.150

```
$(document).on('click', '#email-button, #text-button', function() {
    // Your code
}); 
```

应该做的伎俩。请参阅[http://api.jquery.com/live/](http://api.jquery.com/live/)和[http://api.jquery.com/on/](http://api.jquery.com/on/)。

但是，由于您使用的是 ID，因此您可能甚至不需要`.live()`或委托`.on()`. 所以我写的方式很简单：

```
function doButtons(btnA, btnB, divA, divB) {
    btnA = $(btnA); btnB = $(btnB); divA = $(divA); divB = $(divB);

    // Make sure it is not already active, no use to show/hide when it is already set
    if (btnA.hasClass('dark_button_span'))
        return; 

    // See if div is visible, if so hide, then show first div.
    if (divB.is(":visible")) {        
        divB.fadeOut("slow", function  (){
            divA.fadeIn("slow");
        });
    }
    else // If already hidden, just show the first div.
        divA.fadeIn("slow");

    // Add and remove classes to the buttons to switch state.
    btnA.addClass('dark_button_span').removeClass('light_button_span');
    btnB.removeClass('dark_button_span').addClass('light_button_span');
}

$('#email-button').click(function () {
     doButtons(this, '#text-button', '#email-form', '#text-form');
});
$('#text-button').click(function () {
    doButtons(this, '#email-button', '#text-form', '#email-form');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T03:50:30.813

jQuery`.on`不使用事件委托，除非您为其提供选择器。在上面的代码中，`.live`监听 的事件`document`，但这太过分了。如果我们要实现它，`.on`尽管我们会执行以下操作：

```
var handler = function( e ) {
    console.log( "Clicked" );
};

$( document ).on( "click", "#email-button, #text-button", handler ); 
```

尽管如此，在`document`;上监听事件并不是那么明智。理想情况下，您会在选择器上方选择一个元素。因此，如果`#email-button`并且`#text-button`有一个共同的父母，您应该使用它来代替`document`.

# twitter-bootstrap - 在 Meteor 中使用车把和 twitter 引导 DRY

> ID：13042717
> 
> 赞同：2
> 
> 时间：2012-10-24T03:45:22.467
> 
> 标签：twitter-bootstrap, meteor, handlebars.js

我正在使用 twitter bootstrap 构建我的第一个 Web 应用程序，我很喜欢它，但我遇到了重复自己的问题。

我正在构建一个导航栏，我希望 UI 根据 url 反映哪个选项卡处于活动状态。我正在使用骨干网来路由网址。唯一的问题是我必须根据 url 手动将一堆不同的变量编码为“活动”或“”，以便选项卡反映适当的状态。

```
<template name="navbar">

<div class="container">
    <div class="row">
    <div class="span6">
    <ul class="nav nav-tabs">
        <li class="{{home}}">
            <a href="/home/">Home</a></li>

        <li class="{{1999s10}}{{1965malibu}}{{1960hearse}}{{1966gto}}{{1971blazer}} dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown">Cars<b class="caret"></b></a>

            <ul class="dropdown-menu">
                <li class="{{1999s10}}"><a href="/cars/1999s10">1999 Electric S-10</a></li>
                <li class="{{1965malibu}}"><a href="/cars/1965malibu">1965 Malibu</a></li>
                <li class="{{1960hearse}}"><a href="/cars/1960hearse">1960 Hearse</a></li>
                <li class="{{1966gto}}"><a href="/cars/1966gto">1966 GTO</a></li>
                <li class="{{1971blazer}}"><a href="/cars/1971blazer">1971 Bazer</a></li>
                <!-- <li class="divider"></li> -->
            </ul>
        </li>  
    </div>
    </div>
</div> 
```

如您所见，现在，我有一堆变量来指示哪些选项卡处于活动状态。我已经开始实现下面的代码，但是它太不优雅了，我已经停下来想使用更好的方法。

```
Template.navbar.home = function () {
    return Session.equals("active", "home") ? "active" : '';
};

// a bunch more of these for every route

var TodosRouter = Backbone.Router.extend({
    routes: {
        "home/": "home",
            // more routes
    },
    home: function () {
        Session.set("active", "home");
    },
    // more functions for capturing the routes and setting the session variable "active"
});

Router = new TodosRouter;

Meteor.startup(function () {
    Backbone.history.start({pushState: true});
}); 
```

使用这种方法：（1）有以数字开头的变量问题（我的错）（2）需要我路由每个 url 以相应地更改会话“活动”变量（3）需要我为每个导航栏中的按钮/网址

必须有更好的方法来做到这一点，但我还没有找到它。

重申一下，我想找到一种在不破坏 DRY（不要重复自己）编程原则的情况下完成激活必要选项卡的方法。

编辑：

真正好的是这样的：

```
<li class="{{(url=="/cars/1999s10/")?"active":""}}"><a href="/cars/1999s10">1999 Electric S-10</a></li> 
```

那将是最少量的代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T00:45:45.333

您可以尝试创建一个全局 Handlebars 助手，该助手将路由名称作为参数并返回正确的类名：

```
if (Meteor.isClient) {
    Handlebars.registerHelper('TabClassName', function (route) {
        return Session.equals("active", route) ? "active" : "";
    });
} 
```

然后在您的模板中，像这样调用助手：

```
<li class="{{TabClassName 'home'}}"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T03:41:44.120

我发现了一些有用的东西：

```
Handlebars.registerHelper('TabActive', function (route) {
    var url = Session.get("url");
    var index = $.inArray(route, url);
    return (index != -1) ? "active" : "";
});

var TodosRouter = Backbone.Router.extend({
    routes: {
        "*url": "main"
    },
    main: function (url) {
        Session.set("url", url.split('/'))
    }
}); 
```

在 html 中，" vs ' 至关重要！

```
<li class='{{TabActive "home"}}'> 
```

这可行，但我唯一担心的是稍后将路由器用于其他网址......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T18:24:59.387

我正在使用静态应用程序状态类来处理我的应用程序的当前状态。

它使用`Session`来存储当前状态。

在车把助手中，我测试了正确的状态

（咖啡稿）

```
Template.foo.helpers
  is_active: ->
    appState.isState appState.FOO 
```

在模板中，我将使用它来设置我的链接样式

```
{{#if is_active}}
  <a href="/bar" class="active">/bar</a>
{{else}}
  <a href="/bar">/bar</a>
{{/if}} 
```

appstate 对象非常简单

```
appState =
  FOO : "foo"
  BAR: "bar"

  setState: (state) ->
    Session.set(SESSION_STATE, state)

  getState: ->
    Session.get(SESSION_STATE)

  isState: (state) ->
    @getState() is state 
```

如果在我的应用程序中的任何地方，appstate 发生了变化，那么反应魔法就会发生；）

```
appState.setState appState.LIST 
```

## 更新：

使用`rendered`回调将活动类添加到导航项（未经测试！）

```
Template.foo.rendered = ->
  current = Backbone.history.fragment
  links = this.findAll("ul li a")

  links.forEach((link) ->
    $(link).parent().addClass("active") if link.href is current  
  ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-27T15:16:08.923

正如 jtblin 指出的那样，您可以为此使用模板助手。下面的代码在 Meteor > 1.0 和 Iron Router > 0.9.4 下运行。

您可以传递正则表达式，而不是将路由名称传递给助手，如果您有子菜单，这将使其更合适。

```
# file: /client/helpers.coffee

Template.registerHelper 'activeMenuItem', (expression) ->
   reg = new RegExp(expression, 'i')
   if reg.test Router.current().route.getName() then "active" else "" 
```

像这样在模板中使用帮助程序：

```
<li class="menu {{activeMenuItem 'persons'}}"> … </li> 
```

这样，您将对所有以人员开头的路线（例如，personsList、personsAdd、personsEdit 等）重新“激活”。因此，如果您有子菜单，它也是一个很好的选择。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-07-22T12:20:15.870

我想出了以下非常通用的解决方案：

```
# Store currently selected bootstrap tab so that active state can be restored on reload

$(document).on 'click', 'a[data-toggle="tab"]', (e) ->
  Session.set("selected_tab", $(e.target).attr("href").replace("#", ""))

# Helper for determining active state of a tab navigation
Handlebars.registerHelper 'tab', ( options ) ->
  $el = $('<ul />').html( options.fn(this) )

  $selected_tab = $el.find('a[data-toggle="tab"][href=#' + Session.get("selected_tab") + ']')
  $selected_tab = $el.find('a[data-toggle="tab"]').first() if $selected_tab.length == 0

  # Mark navigation item as active
  $selected_tab.parent().addClass("active")

  # Mark content item as active
  $el.find($selected_tab.attr("href")).addClass("in active")

  return $el.html() 
```

用法：

```
{{#tab}}
<ul class="nav nav-tabs">
  <li><a href="#article_tweet_pane" data-toggle="tab">Tweet</a></li>
  <li><a href="#article_blog_pane" data-toggle="tab">Blog</a></li>
  <li><a href="#article_newsletter_pane" data-toggle="tab">Newsletter</a></li>
</ul>

<div class="tab-content">
  <div id="article_tweet_pane" class="tab-pane fade">Tweet</div>
  <div id="article_blog_pane" class="tab-pane fade">Blog</div>
  <div id="article_newsletter_pane" class="tab-pane fade">Newsletter</div>
</div>
{{/tab}} 
```

# http - Magento，所有页面都重定向到 HTTPS

> ID：13042718
> 
> 赞同：0
> 
> 时间：2012-10-24T03:45:28.910
> 
> 标签：http, magento, redirect, ssl, https

我最近被要求查看的一个 Magento 站点最近将所有流量重定向到 HTTPS。当页面上的链接指向带有 SEO URL 的 HTTP 时，Magento 将返回带有目录 URL 的 HTTPS 页面。

我不确定是否有人进入并更改了 SSL 设置，我是否可以检查或更改任何内容以使其恢复正常。如何指定站点的哪些区域是 HTTPS？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T04:00:05.273

i) 在管理控制台中检查 Base Url。

管理员 --> 系统 --> 配置 --> Web --> 不安全 --> 基本 URL 和基本链接 URL

如果它在https中将其更改为http。

ii) 检查您的 htaccess。如果您不确定发生了什么变化。备份您的 htaccess 并创建一个新的 htaccess。将 htaccess.sample 复制到您的 magento 根文件夹中并将名称更改为 .htaccess

> 在这两个步骤之前，请确保您的 ssl.conf 中有正确的配置

# c++ - 反馈+不良输出

> ID：13042722
> 
> 赞同：-2
> 
> 时间：2012-10-24T03:46:06.303
> 
> 标签：c++, class, header, output

所以我有一个任务，我认为我或多或少地完成了，但是有些东西在某个地方严重地弄乱了输出，甚至是计算，我看不出问题出在哪里。

任务是制作一个游戏，其中一定数量的玩家通过隧道跑向一个点，他们会停下来绕着它旋转，然后他们的头晕应该让他们随机地朝着目标前进或倒退开始。每次他们获得另一个更接近目标的位置时，他们都会获得另一个“标记”，并且这样继续下去，直到他们中的一个到达目标。

该程序包括三个文件：一个main.cpp，一个头文件和另一个cpp文件。

头文件：

```
 #ifndef COMPETITOR_H
    #define COMPETITOR_H

    #include <string>

    using namespace std;

    class Competitor
    {
        public:
            void setName();
            string getName();
            void spin();
            void move();
            int checkScore();
            void printResult();

        private:
            string name;
            int direction;
            int markedSpots;
    };

    #endif // COMPETITOR_H 
```

第二个cpp文件：

```
 #include <iostream>
    #include <string>
    #include <cstdlib>
    #include <ctime>
    #include "Competitor.h"

    using namespace std;

    void Competitor::setName()
    {
        cin>>name;
    }

    string Competitor::getName()
    {
        return name;
    }

    void Competitor::spin()        
    {
        srand(time(NULL));
        direction = rand()%1+0;
    }

    void Competitor::move()         
    {                               
        if(direction == 1)
        {
            markedSpots++;
        }
        else if(direction == 0 && markedSpots != 0)
        {
            markedSpots--;
        }
    }

    int Competitor::checkScore()
    {
        return markedSpots;
    }

    void Competitor::printResult() 
    {
        if(direction == 1)
        {
            cout<<" is heading towards goal and has currently "<<markedSpots<<" markings.";
        }
        else if(direction == 0)
        {
            cout<<"\n"<<getName()<<" is heading towards start and has currently "<<markedSpots<<" markings.";
        }
    } 
```

主cpp文件：

```
 #include <iostream>
    #include <string>
    #include <cstdlib>
    #include <ctime>
    #include "Competitor.h"

    using namespace std;

    void inputAndSetNames(Competitor comps[],int nrOfComps);
    void makeTwist(Competitor comps[],int nrOfComps);
    void makeMove(Competitor comps[],int nrOfComps);
    void showAll(Competitor comps[],int nrOfComps);
    int winner(Competitor comps[],int nrOfComps, int nrOfTwistPlaces);

    int main()
    {

        int nrOfTwistPlaces;
        int nrOfComps;
        int noWinner = -1;
        int laps = 0;

        cout<<"How many spinning places should there be? ";
        cin>>nrOfTwistPlaces;
        cout<<"How many competitors should there be? ";
        cin>>nrOfComps;

        Competitor * comps = new Competitor[nrOfComps];

        inputAndSetNames(comps, nrOfComps);

        do
        {
            laps++;

            cout<<"\nSpin "<<laps<<":";
            makeTwist(comps, nrOfComps);
            makeMove(comps, nrOfComps);
            showAll(comps, nrOfComps);

        }while(noWinner == -1);

        delete [] comps;

        return 0;
    }

    void inputAndSetNames(Competitor comps[],int nrOfComps)
    {
        cout<<"Type in the names of the "<<nrOfComps<<" competitors:\n";
        for(int i=0;i<nrOfComps;i++)
        {
            comps[i].setName();
        }
        cout<<"\n";
    }

    void makeTwist(Competitor comps[],int nrOfComps)
    {
        for(int i=0;i<nrOfComps;i++)
        {
            comps[i].spin();
        }
    }

    void makeMove(Competitor comps[],int nrOfComps)
    {
        for(int i=0;i<nrOfComps;i++)
        {
            comps[i].move();
        }
    }

    void showAll(Competitor comps[],int nrOfComps)
    {
        for(int i=0;i<nrOfComps;i++)
        {
            comps[i].printResult();
        }
        cout<<"\n\n";

        system("pause");
    }

    int winner(Competitor comps[],int nrOfComps, int nrOfTwistPlaces)
    {
        int end = 0;
        int score = 0;

        for(int i=0;i<nrOfComps;i++)
        {
            score = comps[i].checkScore();
            if(score == nrOfTwistPlaces)
            {
                end = 1;
            }
            else end = -1;
        }
        return end;
    } 
```

如果您发现任何错误，请指出其他错误，我将不胜感激。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T04:56:06.313

你需要初始化**Competor**对象——添加一个构造函数：

```
Competitor::Competitor(void)
{
    direction = 0;
    markedSpots = 0;
} 
```

此外，您调用**rand()**，然后使用 % 运算符 - **rand()%1+0**执行“mod”函数。首先，当我们在这里时——为什么要加 0？

但这里最大的问题是你正在做**% 1**，这将给出除以 1 的余数。当然，这总是会导致 0。

而且，您的主要**while**语句将永远不会退出 - 您永远不会修改**noWinner**

# java - 如何为表触发 ValueChangeEvent？

> ID：13042723
> 
> 赞同：0
> 
> 时间：2012-10-24T03:46:05.990
> 
> 标签：java, swing, jtable, vaadin, tablemodel

有两个听众：

```
table.addListener(new ItemClickListener() {
    public void itemClick(ItemClickEvent event) {
        // fireEvent(...);
    }
});

table.addListener(new Table.ValueChangeListener() {
    public void valueChange(final ValueChangeEvent event) {
        // do something
    }
}); 
```

我想从第一个监听器触发一个事件来调用第二个监听器。

在一个侦听器中，我想通过单击行来更新表的数据源；在第二个监听器中，我想恢复所选行上的光标。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:56:55.243

如果更改行的列值，则会触发第二个侦听器。为此，您可以更改列，然后您可以在第二个侦听器中重新获得其值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T05:21:26.977

您不应该尝试手动触发事件。如果您在第二个侦听器中有代码需要调用，您应该将其抽象为第三个方法。

然而，很难准确地理解你想要什么。我建议在您的问题中添加更多详细信息。

# php - 显示子类别和子/子类别的类别

> ID：13042726
> 
> 赞同：0
> 
> 时间：2012-10-24T03:46:23.260
> 
> 标签：php, nested, parent-child, categories

**我是 Php 的初学者 .. 我开发了我的第一个动态网站 -> [http://www.afrogfx.com](http://www.afrogfx.com) 如果您查看我的侧边栏，您会看到类别列表我的问题位于此处如果我创建这样的子子类别**

```
 CAT A
    - SUB CAT A-1
    - SUB CAT A-2
      -- SUB CAT A-3 ( problem Here )
    CAT B
    - SUB CAT B-1
    - SUB CAT B-2
    - SUB CAT B-2-a
      -- SUB CAT B-2-b ( problem Here )
       --- SUB CAT B-3 ( problem Here ) 
```

类别列表代码

```
 <?php 
    mysql_select_db($db_name, $conn); // Change for your database  
    $query_Recordset1 = "SELECT catid,catname,parentid FROM categories ";
    $Recordset1 = mysql_query($query_Recordset1, $conn) or die(mysql_error()); // Change for your database

    while ( $row = mysql_fetch_assoc($Recordset1) )
    {
    $menu_array[$row['catid']] = array('catname' => $row['catname'],'catid' =>         $row['catid'],'parentid' => $row['parentid']);

    }
    //recursive function that prints categories as a nested html unordered list

    function generate_menu($parent)
    {
    $has_childs = false;
    //this prevents printing 'ul' if we don't have subcategories for this category
    global $menu_array;
    //use global array variable instead of a local variable to lower stack memory         requierment
    foreach($menu_array as $key => $value)
    {
    if ($value['parentid'] == $parent) 
    {       
    //if this is the first child print '<ul>'                       
    if ($has_childs === false)
    {
    //don't print '<ul>' multiple times                             
    $has_childs = true;
    //echo '<ul>';
    echo '<ul id="categories">';
    }
    echo '<li><a href="categories?catid=' . $value['catid'] . '&parentid=' .                 $value['parentid'] . '&catname=' . $value['catname'] .'">' .         $value['catname'] . '</a>';
    echo '<input type="hidden" value="' . $value['catname'] . '" />';
    generate_menu($key);

    //call function again to generate nested list for subcategories belonging to this         category

    echo '</li>';
    }
    }

    if ($has_childs === true) echo '</ul>';
    }
    //generate menu starting with parent categories (that have a 0 parent)
    ?> 
```

**现在我需要功能来选择主类别中的所有主题，当我选择它并将子类别和子子类别！我该怎么做 ？？！！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:07:49.560

我将此代码用于带有子菜单的菜单

这是功能

```
// Menu builder function, parentId 0 is the root
function buildMenu($parent, $menu) {
 $html = "";
 if (isset($menu['parents'][$parent]))
 {
  $html .= "
  <ul>\n";
   foreach ($menu['parents'][$parent] as $itemId)
   {
      if(!isset($menu['parents'][$itemId]))
      {     
         $html .= "<li>\n  <a href='".$menu['items'][$itemId]['link']."'>".$menu['items'][$itemId]['label']."</a>\n</li> \n";

      }
      if(isset($menu['parents'][$itemId]))
      {
         $html .= "
         <li><span>" . $menu['items'][$itemId]['label'] . "<b></b></span>" ;
         $html .= buildMenu($itemId, $menu);
         $html .= "</li> \n";
      }
   }
  $html .= "</ul> \n";

  }
  return $html;
} 
```

这是在通话中

```
// Select all entries from the menu table
$sql = "SELECT id, label, link, parent FROM dbo.Menu ORDER BY parent, sort, label";
$result = $database->query($sql);
$menu = array(
'items' => array(),
'parents' => array()
);
// Builds the array lists with data from the menu table
while ($items = sqlsrv_fetch_array( $result )) {
// Creates entry into items array with current menu item id ie. $menu['items'][1]
$menu['items'][$items['id']] = $items;
// Creates entry into parents array. Parents array contains a list of all items with     children
$menu['parents'][$items['parent']][] = $items['id'];
} 
```

我的数据库中有一个带有列的 SQL 表

*   ID
*   标签
*   关联
*   家长
*   种类

如果您将所有顶部菜单项都作为父项 0，那么您希望成为父项下的子菜单的每个项都放入父 id i

# bash - 在 bash 中解析命令行参数 - 奇怪的行为

> ID：13042734
> 
> 赞同：0
> 
> 时间：2012-10-24T03:47:34.840
> 
> 标签：bash

```
#!/bin/bash

for arg
do
        echo "$arg"
done 
```

在名为 compile 的文件中。

我试过这个：

```
compile ha -aa -bb -cc -dd -ee -ff -gg
ha
-aa
-bb
-cc
-dd

-ff
-gg 
```

为什么-ee没有出现？事实上，似乎 -[e]+ 没有出现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T03:52:35.360

因为`echo`您使用的版本`-e`作为一个选项（意思是“扩展转义字符”）。

编辑添加：

对这类问题的标准回答是“使用 printf”，它非常准确，但有些不尽人意。`printf`由于它处理多个参数的方式，使用起来更烦人。因此：

```
$ echo -e a b c
a b c
$ printf "%s\n" -e a b c
-e
a
b
c
$ printf "%s" -e a b c
-eabc$ # That's not what I wanted either 
```

当然，您只需要记住引用整个参数序列，但这会导致烦人的引号转义问题。

因此，我为您提供回响的乐趣：

```
$ ech-o() { printf "%s\n" "$*"; }
$ ech-o -e a b c
-e a b c
$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:49:59.437

[这里](https://stackoverflow.com/a/3657061/1771144)它说 GNU echo 不可能，但你可以使用 printf。

```
for arg
do
    printf "%s\n" "$arg"
done 
```

# javascript - Onchange 不适用于 Javascript 条目

> ID：13042739
> 
> 赞同：-1
> 
> 时间：2012-10-24T03:48:08.800
> 
> 标签：javascript, html

我有一个要填写一些日期的表格。我使用的是 Cold Fusion，但这里只使用表格和输入标签，而不是“增强的”CF 标签。用户只能从 Javascript 日历中选择这些日期。日历工作正常，日期被填写，Javascript 函数“validx”正在工作，但使用这种数据输入方法不会触发 onchange。

```
<input 
  type     = "text" 
  id       = "#colid#"
  class    = "calendarSelectDate"  {this fires the calendar}             
  name     = "#col#" 
  readonly                         
  onclick  = "tooltip(#i#)"
  onchange = "validx(#i#, #top#, '#thecase#', '#themsg#')"
  value    = "#sv#" > 
```

我可以使用 onblur 来完成这项工作，但我真的更喜欢 onchange。有人有办法做到这一点吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T03:53:58.080

我相信你误解了`onchange`. 当用户在进行更改*后*模糊复选框时触发此事件。根据*定义*，它需要模糊。也许您应该研究`onkeyup`或类似的事件涉及按键。

# javascript - 使用 js 存储来自选择选项的数据值

> ID：13042742
> 
> 赞同：0
> 
> 时间：2012-10-24T03:49:00.247
> 
> 标签：javascript, jquery, local-storage

我有以下基于[此链接的代码](http://www.deardorffdigital.com/articles/html5-web-storage)

```
<select name="myselect" class="myselectClass" id="myselectID">
    <option data-value='{"comporder":"0"}' value="myval0">test 0</option>
    <option data-value='{"comporder":"1"}' value="myval1">test 1</option>
    <option data-value='{"comporder":"2"}' value="myval2">test 2</option>
</select>
<br>
<input type="text" id="myinput" name="webStorageInput" />
<input type="submit" id="mysave" value="Save" />

<script type="text/javascript">   
var storedText = localStorage.getItem('webStorageTestInput');
var inputBox = document.getElementById("myinput");
var saveBtn = document.getElementById("mysave");
alert(storedText);

saveBtn.onclick = function(){
var valueToSave =inputBox.value.replace(/<\/?[^>]+>/gi, '');

localStorage.setItem('webStorageTestInput',valueToSave);
};
</script> 
```

看[我的小提琴](http://jsfiddle.net/aaronk85/dsrAV/)

我可以通过输入字段将我输入的值存储到本地存储中，但是我希望我存储的值使用用户在 my 中选择的最后一个选项，例如，如果他们选择了 test 1，则其值为 1。

我认为这是最好的方法（使用数据值），但这不是必需的，我只是不希望它使用选项值。

我尝试的另一种方法是获取选项的索引。

```
<select name="mySelect" class="myselectClass" id="mySelect">
    <option value="myval0">test 0</option>
    <option value="myval1">test 1</option>
    <option value="myval2">test 2</option>
</select>
<br>
<input type="submit" id="mysave" value="Save" />

<script>
var x = document.getElementById("mySelect").selectedIndex;
var y = document.getElementById("mySelect").options;
var saveBtn = document.getElementById("mysave");

saveBtn.onclick = function(){
    alert("Index: " + y[x].index + " is " + y[x].text);
 };
</script> 
```

但是，如果我这样做，无论我点击什么，每次都会收到以下警报。

```
Index: 0 is test 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T04:26:19.357

你可以试试这个，因为你正在使用`jQuery`

```
$("#mysave").on('click', function(){
    var i = $("#mySelect").prop("selectedIndex");
    var t = $("#mySelect option:selected").text();
    alert("Index: " + i + " is " + t);
}); 
```

[**演示**](http://jsfiddle.net/dsrAV/3/)。

# php - php 5.3 中的 $_SESSION 变量不粘连

> ID：13042745
> 
> 赞同：0
> 
> 时间：2012-10-24T03:49:23.053
> 
> 标签：php, session

在从 5.2.17 到 5.3.13 的服务器升级中，我的 $_SESSION 变量不再在页面之间传递。

在第 1 页中，我设置了 $_SERVER["isLoggedIn"] = true 并且在第 2 页中我正在测试，但发现所有 $_SESSION 变量都未设置。

我已经为一个简单的例子减少了代码，如下所示：login.html：

```
<?php
session_start();
    $_SESSION["isLoggedIn"] = true;
    $_SESSION['visitorLanguage']  = "en" ; 

    if ($_SESSION["isLoggedIn"]  == true ){
        print "<p> Log in successful. </p>";
        print "<script>window.location='index.html? lang=".$_SESSION['visitorLanguage']." '</script>";
        }

?> 
```

索引.html：

```
<?
session_start();
echo "Version: ".phpversion(); 
echo " Session Data: "; 
echo "Is logged in: " . $_SESSION["isLoggedIn"]. "<br/>";
echo "Visitor Language: " . $_SESSION["visitorLanguage"];
?> 
```

回报：

```
Version: 5.3.13 Session Data: Is logged in: 
Visitor Language
and in 5.2:
Version: 5.2.17 Session Data: Is logged in: 1
Visitor Language: en 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T03:27:48.847

与此类似的问题只花了我大约 3 天的时间，请确保在 php.ini 中注释掉**request_order = None**或设置为“ **GPCS** ”，否则会话变量将不会添加到超级全局数组 REQUEST 中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-17T18:56:22.730

据我了解，没有以 .php 结尾的名称的页面根本不应该进入 php 处理器。它在 5.2 中起作用比在 5.3 中不起作用更神秘。简而言之，将您的索引页设为 index.php，确保在服务器上删除 index.html（以及在本地，您不希望它再次上传）......一切都应该很好。要回答您的问题，安装 5.2 是一种安装，安装 5.3 是另一种安装。一个可能设置有与另一个不同的选项。

# twitter - Twitter 登录 在 Xcode 中使用 OAuth

> ID：13042749
> 
> 赞同：1
> 
> 时间：2012-10-24T03:49:45.323
> 
> 标签：twitter, oauth, ios4

我正在使用 Oauth 登录 Twitter 帐户。我的 ios 应用程序中还有一个注销按钮。成功登录到我的 Twitter 后。我想通过此注销按钮在 Twitter 中以新用户身份登录。我使用相同的代码登录。但它不起作用。请帮助我

# sphinx - Sphinx 服务器自行关闭/停止

> ID：13042751
> 
> 赞同：1
> 
> 时间：2012-10-24T03:49:49.113
> 
> 标签：sphinx

有没有其他人遇到过狮身人面像搜索自行停止或关闭的问题？一段时间后，Sphinx 将关闭，我将不得不返回并重新启动它。

有什么东西可以触发 Sphinx 关闭吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:23:07.723

首先查看searchd.log！

那是最有可能获得有用信息的地方。

# android - OnReceivedSSLError 不适用于 SDK 版本 4

> ID：13042761
> 
> 赞同：1
> 
> 时间：2012-10-24T03:50:52.527
> 
> 标签：android

最近我更新了我的机器，因此我的所有 DEV 环境都使用最新的 Eclipse 和 Android SDK 进行了更新。经过数小时努力让我的应用程序在模拟器中运行后，我遇到了一个“WebView”客户端问题，它开始给我的“对象移动到这里”，这表明它是 URL 重定向的 SSL 错误。所以我添加了 OnReceivedSSLError 事件处理程序。现在我无法编译该项目，因为它要求我将 minSDKVersion 更改为 8，即 Android 2.2。

我想构建我的应用程序，以便可以在 SDK 版本 1.6 及更高版本的手机上使用。我有 500 多个客户目前正在使用我在 Android 1.6 上的应用程序。

因此，如果我添加此事件，我会失去 v1.6 客户吗？如果不这样做，我的 Android 版本更高的客户会收到此 SSL 错误吗？

请指教。

# opengl - 在 OpenGL 中绘制莫比乌斯带

> ID：13042763
> 
> 赞同：3
> 
> 时间：2012-10-24T03:51:05.747
> 
> 标签：opengl, geometry

我正在尝试使用参数方程绘制莫比乌斯带，使其始终“点亮”（即所有法线向量都指向相机）。

我遇到的主要问题是莫比乌斯带不可定向，所以无论我如何定向带，一些法线向量都会指向远离相机的方向。是否有一种聪明的方法来确定何时“翻转”法线向量以使其始终指向相机？

我已经尝试绘制两次莫比乌斯带，使法线在两个方向上，但是然后我从 z-fighting 中得到了黑白条。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T09:15:58.047

解决方法很简单：不要从 0 到 2π，而是到 4π，即你通过带子两次。启用背面剔除。

这是现实世界莫比乌斯带的标准实验，沿着中间画一条线，直到你到达线的开头。你必须绕着带走两次。正是这样，然后你用 OpenGL 做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T04:38:44.147

试一试：

```
glLightModeli( GL_LIGHT_MODEL_TWO_SIDE, GL_TRUE ); 
```

对于两侧照明，OpenGL 将自动翻转背面三角形的法线。

# android - OpenCV 错误：无法加载 OpenCV 的信息库

> ID：13042767
> 
> 赞同：7
> 
> 时间：2012-10-24T03:51:34.027
> 
> 标签：android, opencv

我正在为android使用opencv。我试图用静态初始化来初始化 opencv。[我从这里](http://docs.opencv.org/trunk/doc/tutorials/introduction/android_binary_package/dev_with_OCV_on_Android.html#application-development-with-static-initialization)跟着文件

现在我遇到了问题。

```
01-01 20:01:46.156: D/OpenCV/StaticHelper(14057): Trying to get library list
01-01 20:01:46.156: D/OpenCV/StaticHelper(14057): loadLibrary opencvinfo
01-01 20:01:46.156: D/OpenCV/StaticHelper(14057): /vendor/lib:/system/lib
01-01 20:01:46.156: E/OpenCV/StaticHelper(14057): OpenCV error: Cannot load info library for OpenCV
01-01 20:01:46.156: D/OpenCV/StaticHelper(14057): Library list: ""
01-01 20:01:46.156: D/OpenCV/StaticHelper(14057): First attempt to load libs
01-01 20:01:46.157: D/OpenCV/StaticHelper(14057): Trying to init OpenCV libs
01-01 20:01:46.157: D/OpenCV/StaticHelper(14057): Trying to load library opencv_java
01-01 20:01:46.177: D/OpenCV/StaticHelper(14057): OpenCV libs init was ok!
01-01 20:01:46.177: D/OpenCV/StaticHelper(14057): First attempt to load libs is OK 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-12T15:28:07.687

当手机不支持 OpenCV 2.x 版本时，也会出现同样的问题。如果是这种情况，则模拟器可以正常工作。

切换到 OpenCV 版本 3.x，它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T09:30:33.870

`logcat "01-01 20:01:46.177: D/OpenCV/StaticHelper(14057): OpenCV libs init was ok!"`这意味着您的opencv库已成功加载，您的问题是什么？

# jquery - 创建可悬停的工具提示

> ID：13042768
> 
> 赞同：0
> 
> 时间：2012-10-24T03:51:42.623
> 
> 标签：jquery, jquery-effects

这是我正在尝试的[演示。](http://jsfiddle.net/y4LMk/1/)

我基本上是在尝试创建工具提示效果。但是当我浏览工具提示区域时，该框会闪烁。这是由于`mouseleave`和`mouseenter`被触发。

基本，结构是这样的

```
<section id="tooltipContainer">
    <ul>
        <li>
            <a>Text that is show up</a>
            <div class="extension"> <!-- Tool Tip Division -->
               text
            </div>
        </li>
    </ul>
</section> 
```

为了创建tootip效果，我这样做

```
$("li").on('mouseenter', function() {
    $(this).children(".extension").stop().fadeIn();
}).on('mouseleave', function() {
    $(this).children(".extension").stop().delay(500).fadeOut();
});​ 
```

如何避免触发`mouseleave`and `mouseenter`？

**更新：**

通过切换填充值，我能够摆脱闪烁，但由于容器`overflow:hidden;`现在也有阻塞整个工具提示。有任何想法吗？

这是此更新的小提琴：[这里](http://jsfiddle.net/y4LMk/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:54:18.343

您的第二个小提琴非常令人困惑，它隐藏了工具提示，但第一个工作正常。它对我来说根本不会闪烁（chrome），它的行为就像通常的工具提示一样 - 在悬停时显示并在我将鼠标移开时消失。

我建议使用[tipsy.js](http://onehackoranother.com/projects/jquery/tipsy/)，它是一个不错的jQuery 插件，可以帮助您更快/更轻松地完成任务，并且具有更多的跨浏览器兼容性。

# jquery - Jquery - 如何查找#tag 名称并应用类

> ID：13042772
> 
> 赞同：3
> 
> 时间：2012-10-24T03:51:53.937
> 
> 标签：jquery

在网站的#page1 上时，我希望#page1 的菜单项像当前页面样式一样突出显示。我试过添加一个类并直接使用下面的代码应用 css，但都不起作用。

谁能告诉我我做错了什么？提前致谢。

```
var url = window.location.href;
if (url.search("#page1") > 0) {
$("#mainNav ul li a.scroll1").addClass("current");
$("#mainNav ul li a.scroll1").css("color","#000");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T03:55:59.017

听起来您应该能够搜索`window.location.hash`并将其用作选择器。例如，如果您在 上`http://localhost/index.php#page1`，则从窗口对象返回的哈希值将是`#page1`。您可以使用它来查找您的元素：

```
// Reference to hash, or empty string
var page = window.location.hash;

// If the resulting string isn't empty
if ( page.length ) {
    // Target the corresponding element, add a class
    $( "a." + page.slice(1).replace(/page/,'scroll') ).addClass( "selected" );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T05:08:35.240

在这个问题之后，我为这个问题制定了一个非常简单的解决方案。以下代码在单击时在 LI 上创建一个 Current Page 类，并同时从其他 Menu LI 中删除所有其他当前页面类。

HTML

```
<ul>
<li class="scrollButton1 current"><a href="#page1">Welcome</a></li>
<li class="scrollButton2"><a href="#page2">Education</a></li>
<li class="scrollButton3"><a href="#page3">Triathlon</a></li>
<li class="scrollButton4"><a href="#page4">Register</a></li>
</ul> 
```

查询

```
$(document).ready(function(){
$('.scrollButton1').click(function(){$('html, body').removeClass('current'), $('#mainNav ul li.scrollButton1').addClass('current');});
$('.scrollButton2').click(function(){$('html, body').removeClass('current'), $('#mainNav ul li.scrollButton2').addClass('current');});
$('.scrollButton3').click(function(){$('html, body').removeClass('current'), $('#mainNav ul li.scrollButton3').addClass('current');});
$('.scrollButton4').click(function(){$('html, body').removeClass('current'), $('#mainNav ul li.scrollButton4').addClass('current');});
}); 
```

希望这可以帮助。

# email - 无法将 nginx 配置为邮件代理

> ID：13042776
> 
> 赞同：1
> 
> 时间：2012-10-24T03:52:32.453
> 
> 标签：email, proxy, nginx

我需要使用 nginx 作为邮件代理。我对 nginx 完全陌生，需要一些配置帮助。

**这是我所做的：**

**首先**，我构建了一个模拟此处描述的身份验证服务的服务：[http](http://wiki.nginx.org/NginxMailCoreModule) ://wiki.nginx.org/NginxMailCoreModule 。例如，

```
curl -v -H "Host:auth.server.hostname" -H "Auth-Method:plain" -H "Auth-User:user" -H "Auth-pass:123" -H "Auth-Protocol:imap" -H "Auth-Login-Attempt:1" -H "Client-IP: 192.168.1.1" http://localhost:8080/authorize 
```

返回以下响应标头：

```
< HTTP/1.1 200 OK
< Content-Type: text/html;charset=ISO-8859-1
< Auth-Status: OK
< Auth-Server: 192.168.1.10
< Auth-Port: 110 
```

**其次**，我在安装 macports 后在我的 mac 上安装了 nginx：

```
$ sudo port -d selfupdate
$ sudo port install nginx 
```

**第三**，我使用以下内容创建了一个 nginx.conf：

```
 worker_processes  1;

  error_log  /var/log/nginx/error.log info;

  mail {
      server_name  <my mail server here>;
      auth_http    http://localhost:8080/authorize;

      pop3_auth         plain apop cram-md5;
      pop3_capabilities "LAST" "TOP" "USER" "PIPELINING" "UIDL";

      xclient off;

      server {
          listen     110;
          protocol   pop3;
          proxy      on;
          proxy_pass_error_message  on;
      }
  } 
```

**这是我运行 nginx 的内容：**

$ nginx -V nginx 版本：nginx/1.2.4 配置参数：--prefix=/opt/local --with-cc-opt='-I/opt/local/include -O2' --with-ld-opt =-L/opt/local/lib --conf-path=/opt/local/etc/nginx/nginx.conf --error-log-path=/opt/local/var/log/nginx/error.log - -http-log-path=/opt/local/var/log/nginx/access.log --pid-path=/opt/local/var/run/nginx/nginx.pid --lock-path=/opt/ local/var/run/nginx/nginx.lock --http-client-body-temp-path=/opt/local/var/run/nginx/client_body_temp --http-proxy-temp-path=/opt/local/ var/run/nginx/proxy_temp --http-fastcgi-temp-path=/opt/local/var/run/nginx/fastcgi_temp --http-uwsgi-temp-path=/opt/local/var/run/nginx/ uwsgi_temp --with-ipv6

$ nginx nginx: [emerg] /opt/local/etc/nginx/nginx.conf:6 中的未知指令“mail”

网络上唯一提到该错误的地方引发了俄语讨论...

我的问题：

1.  为什么我会收到这个未知指令？

2.  我的配置乍一看是否正确，或者我是否缺少一些关键组件，以便邮件代理使用此处描述的身份验证方法工作：[http](http://wiki.nginx.org/NginxMailCoreModule) ://wiki.nginx.org/NginxMailCoreModule ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T14:54:17.783

我得到了邮件代理，所以我会回答我自己的问题以供将来参考：

1.  nginx 默认不安装对邮件的支持

    nginx 处理邮件指令需要以下内容：

    $ sudo 端口编辑 nginx

    ==> 在配置参数末尾添加--with-mail

    然后（重新）安装 nginx

2.  在我包含的配置中，我错过了以下事件：

    事件 {
    worker_connections 1024;
    }

3.  一个重要的澄清让我陷入了一段时间：身份验证服务（使用 auth_http 指定）需要返回邮件服务器，表示为 IP 地址，而不是主机名。

4.  显然，要让 nginx 代理入站和出站流量，需要添加 smtp 侦听器。与 pop3 配置类似的方法。就我而言，我使用了 2525 端口，所以我有

    服务器 {
    听 2525;
    协议 smtp；
    }

# java - 如何从 Main 刷新 JApplet？

> ID：13042778
> 
> 赞同：2
> 
> 时间：2012-10-24T03:52:36.990
> 
> 标签：java, swing, paint, graphics2d, japplet

我正在尝试学习 2D 图形。下面的代码绘制了几个旋转的轮子。为了让它们刷新，我最后在绘制方法中插入了 repaint(1000)，但我知道有时它不需要绘制。

```
 public void paint(Graphics g) {
        Graphics2D g2 = (Graphics2D) g;

        for(int angle=0; angle<360; angle+=90){
            g2.setColor(blue);
            g2.fillArc(100,100,200,200,theta1 + angle,45);
            g2.setColor(red);
            g2.fillArc(100,100,200,200,theta1 + angle + 45,45);
        }

        for(int angle=0; angle<360; angle+=30){
            g2.setColor(green);
            g2.fillArc(250,250,250,250,angle + theta2,15);
            g2.setColor(yellow);
            g2.fillArc(250,250,250,250,angle + theta2 + 15,15);
        }

//        repaint(1000);
   }

    public static void main(String s[]) {
        JFrame f = new JFrame("ShapesDemo2D");
        f.addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent e) {System.exit(0);}
        });
        JApplet applet = new ShapesDemo2D();
        f.getContentPane().add("Center", applet);
        applet.init();
        f.pack();
        f.setSize(new Dimension(800,800));
        f.setVisible(true);

        while(true) {
            theta2 += 5;
            theta1 -= 2;

            f.repaint(1000);

            try {
                Thread.sleep(100);
            } catch (InterruptedException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
        }
    } 
```

我真正想做的是在我做出改变后刷新它。Main 在创建小程序后就引用了paint，但 f.repaint() 似乎没有做任何事情。（如果我在paint中注释掉repaint()，它不会更新）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T04:11:58.110

通读对您有利

*   [Swing 中的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)
*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [在 AWT 和 Swing 中绘画](http://www.oracle.com/technetwork/java/painting-140037.html)
*   [如何使用摆动计时器](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)

我也想看看

*   [Java弹跳球](https://stackoverflow.com/questions/13022754/java-bouncing-ball/13022788#13022788)
*   [简单动画的 Java 代码仅在 Windows 上运行](https://stackoverflow.com/questions/13013287/java-code-for-simple-animation-only-runs-on-windows/13021576#13021576)
*   [图像未加载](https://stackoverflow.com/questions/12642852/the-images-are-not-loading/12648265#12648265)

其中都展示了 Swing 中的动画原理和自定义图形

# haskell - 结合 ReaderT 单子？

> ID：13042784
> 
> 赞同：3
> 
> 时间：2012-10-24T03:53:31.763
> 
> 标签：haskell, monads

能够组合不同的 ReaderT 环境似乎很有用。

例如，一个通用的日志工具可能看起来像这样：

```
logit :: Text -> ReaderT Bool  IO ()
logit str = do debugflag <- ask
               liftIO $ if debugflag then putStrLn ("debug: " ++ str) else return () 
```

这看起来像是一个不错的可重用组件。那么我将如何将此定义与另一个 ReaderT 环境集成，以便我可以同时使用它们呢？

例如，假设我想将它与这个 ReaderT 实例结合起来：

```
foo :: ReaderT Text IO ()
foo = ... 
```

这样我就可以在同一功能中同时`foo`使用两者。`logit`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:58:45.210

您需要将它们分层成一个堆叠的 monad，但它们不能堆叠在一起，因为它们都声明这`IO`正是包装的 monad。幸运的是，您的代码已经足够通用，可以解除这个限制。最通用的函数类型使用`MonadIO`而不是专门使用`IO`. 如果您将类型更改为

```
 logit :: MonadIO m => Text -> ReaderT Bool m ()
 foo   :: MonadIO m =>         ReaderT Text m () 
```

然后`liftIO`调用会将`IO`整个堆栈中的动作提升`IO`到底部的 monad。

需要明确的是，您编写的类型不需要使用`liftIO`- just 可以满足相同的类型`lift`，但是因为`IO`（通常）是一个实例，`MonadIO`那么您的（过度）专业化类型也将通过检查器。

# jquery - setTimeout 和 jquery 加载

> ID：13042785
> 
> 赞同：-3
> 
> 时间：2012-10-24T03:53:38.723
> 
> 标签：jquery, settimeout

我如何`setTimeout`在这里发挥作用：

```
function loadContent(url){
    jQuery(".post").fadeTo(200,0.5);
        jQuery("#container").load(href + ' .posts', function(responseHtml){
            var newTitle = jQuery(responseHtml).filter('title').text();
            document.title = newTitle;
    });
} 
```

我尝试过这样的事情，但它不起作用：

```
setTimeout(function(){ 
    jQuery("#container").load(href + ' .posts', function(responseHtml){
        var newTitle = jQuery(responseHtml).filter('title').text();
        document.title = newTitle;
    }); 
}, 1000); 
```

我没有收到任何错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T04:35:06.033

你应该改变你的功能。更换`href`负载到`url`

```
function loadContent(url){
    jQuery(".post").fadeTo(200,0.5);
    jQuery("#container").load(url+ ' .posts', function(responseHtml){
        var newTitle = jQuery(responseHtml).filter('title').text();
        document.title = newTitle;
    });
} 
```

如果你想在你的 loadCountent 函数中调用 setTimeout ，你应该这样做

```
function loadContent(url){
    jQuery(".post").fadeTo(200,0.5);
    setTimeout(function(){ 
        jQuery("#container").load(url+ ' .posts', function(responseHtml){
            var newTitle = jQuery(responseHtml).filter('title').text();
            document.title = newTitle;
       });
   }, 1000);
} 
```

# javascript - 主干视图不适用于获取的 json

> ID：13042787
> 
> 赞同：0
> 
> 时间：2012-10-24T03:53:48.207
> 
> 标签：javascript, json, backbone.js

获取后从服务器接收的 JSON 数据与我的视图同步时遇到问题。

我没有“mainmodel”的集合，因为我一次只使用一个“mainmodel”，但有很多“mymodel”，无论如何，结构如下：

```
 var mymodel = Backbone.Model.extend({
        defaults: {k1:"",
                   k2:"",
                   k3:""}
    });

    var collection = Backbone.Collection.extend({model:mymodel,});

    var mainmodel = Backbone.Model.extend({
        defaults: {v1:"",
                   v2:"",
                   v3:"",
                   v4:new collection()
    }); 
```

我从父视图中的渲染函数为“mymodel”创建嵌套视图。这有效...，仅当我使用新模型时。

```
// My ParentView render function
render: function() {
for (var i = 0; i < this.model.v4.length;i++) {
    var view = new MyModelView({model:this.model.v4.at(i)});
    this.$el.append($(view.render().el));
}
this.$el.append(this.template(this.model.toJSON()));
return this;
},

// The MyModelView render function below 
render: function() {
    this.$el.html(this.template(this.model.toJSON()));
return this;
}, 
```

现在，如果我打开我的应用程序并从那里创建模型，则上述方法有效。但是，如果我打开我的应用程序并提供一个 id，我会获取服务器、检索数据并创建一个新的 ParentView，我最终会收到一个错误，上面写着“this.model.v4.at not a function”。啊。

所以现在，如果我将 FIRST 渲染函数更改为，将 at(i) 更改为 [i]

```
 var view = new MyModelView({model:this.model.v4[i]}); 
```

并将第二个渲染函数（移除 toJSON）更改为：

```
 this.$el.html(this.template(this.model)); 
```

它呈现。但是我仍然无法在没有错误的情况下移动视图。没有惊喜。我用过 console.log(JSON.stringify(this.model)); 当它们到达 parentView 和 MyModelView 时。返回的 JSON 看起来像这样，无论是获取的还是创建的。

```
 {"v1":"val1",
     "v2":"val2,
     "v3":"val3",
     "v4":[{"k1":"key1","k2":"key2","k3","key"}, { ... }, { ... }]
    } 
```

JSON 数据结构似乎是相同的。我认为 JSON 格式不正确，所以我在将模型交给视图之前尝试使用 JSON.parse，但这不起作用。也许我很遥远，但我最初认为我有 JSON 格式问题，但现在我不知道。服务器将内容作为“应用程序/json”返回。

编辑： v1、v2、v3 的 JSON 值正确呈现。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T04:27:03.977

你有两个问题：一个你知道，一个你不知道。

您知道的问题是您`mainmodel`不会自动将`v4`JSON 转换为集合，因此您最终会得到一个期望集合的数组。您可以通过将 a 添加[`parse`](http://backbonejs.org/#Model-parse)到您的`mainmodel`:

```
parse: function(response) {
    if(response.v4)
        response.v4 = new collection(response.v4);
    return response;
} 
```

你不知道的问题是你的`defaults`in`mainmodel`有一个隐藏的引用共享问题：

```
var mainmodel = Backbone.Model.extend({
    defaults: {
        //...
        v4: new collection()
    }
}); 
```

您在对象中定义的任何内容`Backbone.Model.extend`最终都会出现在模型的原型上，因此整个`defaults`对象由模型的所有实例共享。此外，Backbone 将对`defaults`您的新模型进行浅拷贝。因此，如果您`m1 = new mainmodel()`和`m2 = new mainmodel()`，那么`m1`和`m2`将具有完全相同的`v4`属性。您可以通过使用以下函数来解决此问题[`defaults`](http://backbonejs.org/#Model-defaults)：

```
var mainmodel = Backbone.Model.extend({
    defaults: function() {
        return {
            v1: '',
            v2: '',
            v3: '',
            v4: new collection()
        };
    }
}); 
```

# c++ - 撤消后触发重做

> ID：13042788
> 
> 赞同：2
> 
> 时间：2012-10-24T03:53:54.360
> 
> 标签：c++, qt, undo, slot, redo

我正在尝试使其仅在使用撤消后才能看到重做。我似乎无法让它工作。我知道我的信号和插槽有问题，我只是不知道如何让它工作。

这是撤消和重做信号槽的代码：

```
 cutAct->setEnabled(false);
    copyAct->setEnabled(false);
    undoAct->setVisible(false);
    redoAct->setVisible(false);
    connect(textEdit, SIGNAL(copyAvailable(bool)), cutAct, SLOT(setEnabled(bool)));
    connect(textEdit, SIGNAL(copyAvailable(bool)), copyAct, SLOT(setEnabled(bool)));
    connect(textEdit->document(), SIGNAL(modificationChanged(bool)), undoAct, SLOT(setVisible(bool)));
    connect(undoAct, SIGNAL(triggered()), redoAct, SLOT(setVisible(bool))); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T06:28:47.757

```
ui->undoBtn->setEnabled(false);
ui->redoBtn->setEnabled(false);
connect(ui->textEdit,SIGNAL(redoAvailable(bool)),ui->redoBtn,SLOT(setEnabled(bool)));
connect(ui->textEdit,SIGNAL(undoAvailable(bool)),ui->undoBtn,SLOT(setEnabled(bool))); 
```

将其放入构造函数中，撤消和重做按钮将在对它们执行操作时变为可用

# objective-c - 带有奇数 JSON 的 RestKit 对象映射

> ID：13042794
> 
> 赞同：3
> 
> 时间：2012-10-24T03:54:43.327
> 
> 标签：objective-c, ios, json, restkit

您好我正在尝试对以下 JSON 进行对象映射：

```
{    
"0":{       
       "chapter":"four",       
       "book":"Time Machine"    
    },    
"1":{       
      "chapter":"nine",       
      "book":"Science"    
    },    
"2":{       
      "chapter":"one",       
      "book":"Fiction Man"    
    },    
"3":{       
      "chapter":"25",       
      "book":"Cars"    
    } 
} 
```

我正在使用的代码：

```
RKObjectMapping *bookMapping = [RKObjectMapping mappingForClass:[Book class]];

[[RKObjectManager sharedManager].mappingProvider addObjectMapping:bookMapping];

[retailerMapping mapKeyPathsToAttributes:@"chapter", @"chapter",@"book", @"book", nil];
[objectManager.mappingProvider setMapping:bookMapping forKeyPath:@"0"]; 
```

这适用于第一组，但显然会跳过 1、2 和 3。我怎样才能做到这一点？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T04:21:55.557

如果您可以控制 JSON 的结构，请将其更改为数组而不是字典。否则你可以尝试 mapKeyPath 到 key.attribute，例如 0.chapter

JSON 示例：

```
{chapters:[    
   {       
   "chapter":"four",       
   "book":"Time Machine"    
   },    
  {       
  "chapter":"nine",       
  "book":"Science"    
  },    
  {       
  "chapter":"one",       
  "book":"Fiction Man"    
  },    
  {       
  "chapter":"25",       
  "book":"Cars"    
  }
 ] 
} 
```

# android - 如何使用菜单按钮更改 Android 4.x 设备中的菜单样式？

> ID：13042796
> 
> 赞同：4
> 
> 时间：2012-10-24T03:54:52.233
> 
> 标签：android, android-actionbar, android-menu

当我将选择器颜色从蓝色变为橙色时，我发现了一个问题，即我在应用程序中更改了操作栏溢出样式。

一些Android 4.x 设备仍然有一个菜单按钮，当我点击它时，它的选项列表不会从操作栏溢出，而是从屏幕底部跳出来。对于这种情况，它的选项列表不会根据我的风格而改变（选择器颜色：橙色）。

如何更改这种菜单列表的样式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-02T13:25:27.787

您是否尝试过以下代码..？

```
private void getOverflowMenu() {

    try {
       ViewConfiguration config = ViewConfiguration.get(this);
       Field menuKeyField = ViewConfiguration.class.getDeclaredField("sHasPermanentMenuKey");
       if(menuKeyField != null) {
           menuKeyField.setAccessible(true);
           menuKeyField.setBoolean(config, false);
       }
   } catch (Exception e) {
       e.printStackTrace();
   }
 } 
```

在应用程序级别调用此方法，它可能对您有用..

# java - EclipseLink-93 异常描述：此描述符中不存在表 [item]

> ID：13042797
> 
> 赞同：3
> 
> 时间：2012-10-24T03:54:57.283
> 
> 标签：java, jpa, eclipselink

我最近对一个运行良好一年左右的 JPA 应用程序进行了一些更改。我添加了几个新表，但遇到了一些问题。我无法发布我的架构图像，因为我没有 10 个帖子，但我有一个项目表和一个产品表。许多产品可以有相同的项目，所以产品表有一个 item_id

以下是我的物品实体

```
@Entity
@Table(name="item")
public class Item implements Serializable {
private static final long serialVersionUID = 1L;

@Id
private Integer _id;

private Double carbonValue;

private String description;

private String name;

private Integer discount;

@OneToMany(mappedBy="item")
private Collection<Product> products;

// getters and setters etc 
```

这是我的产品实体

```
@Entity
@Table(name="product")
public class Product implements Serializable {
private static final long serialVersionUID = 1L;

@Id
private Integer _id;

private Integer deleted;

@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name="ITEM_ID", referencedColumnName="_ID")
private Item item;

@ManyToOne(fetch = FetchType.LAZY)  
@JoinColumn(name="SUPPLIER_ID", referencedColumnName="_ID")
private Supplier supplier;

@OneToMany(mappedBy = "product")
private Collection<Consumption> consumptions; 
```

我正在使用 eclipselink 2.2

当我对项目表运行如下查询时：

```
public final static String SELECT_ALL_ENTITIES_SQL = "SELECT o FROM Item AS o";

public List<Item> getAllEntities() {
        final EntityManager entityManager = DaoUtils.getEntityManagerFactory().createEntityManager();
        final List<Item> items;
        try {
            items = (List<Item>) entityManager.createQuery(SELECT_ALL_ENTITIES_SQL).getResultList();
        } finally {
            entityManager.close();
        }

        return items;
    } 
```

我收到以下错误：

```
 [EL Info]: 2012-10-24 14:16:23.798--ServerSession(1351669994)--EclipseLink, version: Eclipse Persistence Services - 2.2.0.v20110202-r8913
[EL Severe]: 2012-10-24 14:16:24.16--ServerSession(1351669994)--Local Exception Stack: 
Exception [EclipseLink-0] (Eclipse Persistence Services - 2.2.0.v20110202-r8913): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-93] (Eclipse Persistence Services - 2.2.0.v20110202-r8913): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: The table [item] is not present in this descriptor.
Descriptor: RelationalDescriptor(database.entities.Product --> [DatabaseTable(product)])

Exception [EclipseLink-93] (Eclipse Persistence Services - 2.2.0.v20110202-r8913): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: The table [circle] is not present in this descriptor.
Descriptor: RelationalDescriptor(database.entities.Refund --> [DatabaseTable(refund)])

Runtime Exceptions: 
---------------------------------------------------------

java.lang.IndexOutOfBoundsException: Index: 0, Size: 0

java.lang.IndexOutOfBoundsException: Index: 0, Size: 0

    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:476)
    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:407)
    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.postConnectDatasource(DatabaseSessionImpl.java:680)
    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:628)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:233)
    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:394)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.getServerSession(EntityManagerFactoryImpl.java:185)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:242)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:230)
    at database.dao.ItemDao.getAllEntities(ItemDao.java:24)
    at database.dao.ItemDao.main(ItemDao.java:19)

Descriptor Exceptions: 
---------------------------------------------------------

Local Exception Stack: 
Exception [EclipseLink-93] (Eclipse Persistence Services - 2.2.0.v20110202-r8913): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: The table [item] is not present in this descriptor.
Descriptor: RelationalDescriptor(database.entities.Product --> [DatabaseTable(product)])
    at org.eclipse.persistence.exceptions.DescriptorException.tableNotPresent(DescriptorException.java:1628)
    at org.eclipse.persistence.descriptors.ClassDescriptor.getTable(ClassDescriptor.java:2478)
    at org.eclipse.persistence.descriptors.ClassDescriptor.buildField(ClassDescriptor.java:760)
    at org.eclipse.persistence.descriptors.ClassDescriptor.buildField(ClassDescriptor.java:749)
    at org.eclipse.persistence.mappings.OneToManyMapping.initializeTargetForeignKeysToSourceKeys(OneToManyMapping.java:796)
    at org.eclipse.persistence.mappings.OneToManyMapping.initializeReferenceDescriptor(OneToManyMapping.java:726)
    at org.eclipse.persistence.mappings.ForeignReferenceMapping.initialize(ForeignReferenceMapping.java:1160)
    at org.eclipse.persistence.mappings.CollectionMapping.initialize(CollectionMapping.java:1095)
    at org.eclipse.persistence.mappings.OneToManyMapping.initialize(OneToManyMapping.java:466)
    at org.eclipse.persistence.descriptors.ClassDescriptor.initialize(ClassDescriptor.java:2744)
    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:453)
    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:407)
    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.postConnectDatasource(DatabaseSessionImpl.java:680)
    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:628)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:233)
    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:394)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.getServerSession(EntityManagerFactoryImpl.java:185)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:242)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:230)
    at database.dao.ItemDao.getAllEntities(ItemDao.java:24)
    at database.dao.ItemDao.main(ItemDao.java:19) 
```

我在这里做错了什么？

更新：在数据库上，我删除了产品和项目之间的关系。在我的代码中，我还删除了两个实体之间的任何引用，因此现在数据库表和实体之间根本没有任何关系。我仍然得到同样的错误？？？？？？

已解决：当我在另一个不相关的实体中编码我的实体时，我不小心将一个项目贴错了产品标签。我现在正用头撞桌子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T04:09:50.487

不要使用`@PrimaryKeyJoinColumn`. 通常，它是使用`JPA Inheritance`. 利用`@JoinColumn annotation`

```
@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name="ITEM_ID", referencedColumnName="ID")
private Item item; 
```

对于`Supplier`.

**更新：**这是一个问题`EclipseLink`。[错误 282571](https://bugs.eclipse.org/bugs/show_bug.cgi?id=282571)

尝试修复如下：

```
@Entity
@Table(name="product")
@SecondaryTable(name="item", pkJoinColumns=@PrimaryKeyJoinColumn(name="_ID"))
public class Product implements Serializable {
} 
```

根据您的错误日志：

```
Exception Description: The table [circle] is not present in this descriptor.
Descriptor: RelationalDescriptor(database.entities.Refund --> [DatabaseTable(refund)]) 
```

您可能需要在实体中使用`SecondaryTable`注释。`Refund``circle`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-28T13:38:28.590

如果`Item`不需要明确了解它所属的产品，则`mappedBy`不需要。表`@JoinColumn`中的`Product`拥有这种关系，将项目的表达知识放在此处是有道理的。

因此，请执行以下操作：

编辑行

```
@OneToMany(mappedBy="item")
private Collection<Product> products; 
```

要么

```
@OneToMany
private Collection<Product> products; 
```

或者更好

```
@OneToMany(fetch = FetchType.LAZY)
private Collection<Product> products; 
```

# java - twoSum 算法：如何改进？

> ID：13042798
> 
> 赞同：11
> 
> 时间：2012-10-24T03:54:58.290
> 
> 标签：java

想做一个算法，在[leetcode上发现了这个问题](http://www.leetcode.com)

> 给定一个整数数组，找到两个数字，使它们加起来等于一个特定的目标数字。
> 
> 函数 twoSum 应该返回两个数字的索引，以便它们相加到目标，其中 index1 必须小于 index2。请注意，您返回的答案（index1 和 index2）不是从零开始的。
> 
> 您可以假设每个输入都只有一个解决方案。
> 
> 输入：数字={2, 7, 11, 15}，目标=9
> 
> 输出：index1=1，index2=2

我的解决方案是 O(n^2)。我想知道是否有更好的方法来做到这一点？像 O(n) 或 O(nlogn)

```
import java.util.Arrays;
public class ReturnIndex {
    public int[] twoSum(int[] numbers, int target) {
        int tail = numbers.length-1;
        int[] n = new int[2];
        for (int i=0;i<tail;i++) {
            for(int j=i+1;j<tail;j++) {
                if(target ==(numbers[i]+numbers[j])) {
                    n[0] = i+1;
                    n[1] = j+1;
                }
            }
        }
        return n;
    }

    public static void main(String[] args) {
        int[] s = {150,24,79,50,88,345,3};
        int value = 200;
        ReturnIndex r = new ReturnIndex();
        int[] a = r.twoSum(s,value);
        System.out.println(Arrays.toString(a));
    }
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-24T04:12:07.427

对数组进行排序。使两个指针指向第一个和最后一个（x 和 X）。循环运行：

```
if      (a[X]+a[x] >  N) then X-- 
else if (a[X]+a[x] <  N) then x++
else if (a[X]+a[x] == N) then found.

if (x > X) then no numbers exist. 
```

`O(nlogn)`时间，`O(1)`记忆

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-24T04:12:42.743

**`O(n log n)`时间，`O(1)`内存（不计算列表）：**

1.  首先，对列表进行排序。这应该需要`O(n log n)`时间，就像大多数排序函数一样。

2.  遍历列表，这应该`O(n)`在外循环中花费时间。此时，您可以在已排序的子列表中对最接近的匹配整数进行二进制搜索，这需要`O(log n)`时间。这个阶段应该结束`O(n log n)`。

*编辑：*在下面查看 Max 的答案。它仍然是 O(n log n) 时间和 O(1) 内存，但他通过从列表的每一端遍历一个指针来避免二进制搜索。

**`O(n)`时间，`O(n)`记忆：**

建立一个哈希表，它应该有`O(1)`插入和`O(1)`包含。然后，`O(n)`在外循环中，对于每个 number `i`，检查是否`total - i`在哈希表中。如果没有，添加它；如果是这样，那么你有你的两个号码。

无论哪种方式，您都需要对数组进行额外的扫描以获取索引，但这没问题——它只需要`O(n)`时间。如果您想避免它，您可以根据需要将原始索引保留在排序列表或哈希表中，但这会占用内存而不是时间占用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T04:17:20.153

您可以在下面找到一个可以及时找到两个数字的解决方案**`O(n log n)`**：

```
1- Sort the numbers in ascending (or descending) order             // O(n log n)

2- Compute diff = target - item for each item                      // O(n) 

3- For each calculated diff, look up the calculated value in the sorted items 
   using the Binary search algorithm                               // O(n log n) 
```

一个完整的、可用的 Java 实现：

```
import java.util.ArrayList;

public class NumbersFinder {

    class Item{
        private int value;
        private int index;

        public Item(int value, int index){
            this.value = value;
            this.index = index;
        }

        public int getValue(){
            return value;
        }

        public int getIndex(){
            return index;
        }
    }

    public ArrayList<Item> find(int[] values, int target){      
        ArrayList<Item> items = new ArrayList<Item>();
        for(int i = 0; i < values.length; i++)
            items.add(new Item(values[i], i));

        items = quicksort(items);
        ArrayList<Integer> diffs = computeDiffs(items, target);

        Item item1 = null;
        Item item2 = null;

        boolean found = false;

        for(int i = 0; i < diffs.get(i) && !found; i++){
            item1 = items.get(i);
            item2 = searchSortedItems(items, diffs.get(i), 0, items.size());
            found = item2 != null;
        }
        if(found){
            ArrayList<Item> result = new ArrayList<Item>();
            result.add(item1);
            result.add(item2);
            return result;
        }
        else
            return null;
    }

    // find "value" in the sorted array of "items" using Binary search in O(log n)
    private Item searchSortedItems(ArrayList<Item> items, Integer value, int lower, int upper) {
        if(lower > upper)
            return null;
        int middle = (lower + upper)/2;
        Item middleItem = items.get(middle);
        if(middleItem.getValue() == value)
            return middleItem;
        else if(middleItem.getValue() < value)
            return searchSortedItems(items, value, middle+1, upper);
        else
            return searchSortedItems(items, value, lower, middle-1);
    }

    // Simply calculates difference between the target value and each item in the array; O(n)
    private ArrayList<Integer> computeDiffs(ArrayList<Item> items, int target) {
        ArrayList<Integer> diffs = new ArrayList<Integer>();
        for(int i = 0; i < items.size(); i++)
            diffs.add(target - items.get(i).getValue());
        return diffs;
    }

    // Sorts items using QuickSort algorithm in O(n Log n)
    private ArrayList<Item> quicksort(ArrayList<Item> items) {
        if (items.size() <= 1)
            return items;
        int pivot = items.size() / 2;
        ArrayList<Item> lesser = new ArrayList<Item>();
        ArrayList<Item> greater = new ArrayList<Item>();
        int sameAsPivot = 0;
        for (Item item : items) {
            if (item.getValue() > items.get(pivot).getValue())
                greater.add(item);
            else if (item.getValue() < items.get(pivot).getValue())
                lesser.add(item);
            else
                sameAsPivot++;
        }
        lesser = quicksort(lesser);
        for (int i = 0; i < sameAsPivot; i++)
            lesser.add(items.get(pivot));
        greater = quicksort(greater);
        ArrayList<Item> sorted = new ArrayList<Item>();
        for (Item item : lesser)
            sorted.add(item);
        for (Item item: greater)
            sorted.add(item);
        return sorted;
    }

    public static void main(String[] args){
        int[] s = {150,24,79,50,88,345,3};
        int value = 200;

        NumbersFinder finder = new NumbersFinder();
        ArrayList<Item> numbers = finder.find(s, value);

        if(numbers != null){
            System.out.println("First Number Found = " + numbers.get(0).getValue() + " ; Index = " + + numbers.get(0).getIndex());
            System.out.println("Second Number Found = " + numbers.get(1).getValue() + " ; Index = " + + numbers.get(1).getIndex());
        }
        else{
            System.out.println("No such two numbers found in the array!");
        }
    }
} 
```

输出：

```
First Number Found = 50 ; Index = 3
Second Number Found = 150 ; Index = 0 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-02T01:28:27.997

这是一个 O(n)：

```
public int[] findSumMatched(int[] numbers, int target) {
    Map<Integer, Integer> mapOfNumbers = new HashMap<Integer, Integer>();
    for (int i = 0; i<numbers.length; i++) {
        int secondNumber = target - numbers[i];
        if (mapOfNumbers.get(secondNumber) != null){
            return new int[] {mapOfNumbers.get(secondNumber), i};
        }
        mapOfNumbers.put(numbers[i], i);
    }
    throw new IllegalArgumentException();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-12-27T09:59:43.970

可以提供一个O(n)的时间解，但是他的记忆力不可能是O(1)

首先声明一个键值对，其中 key 是整数数组中的值，value 是整数数组中的索引。而且，您需要声明一个哈希表来保存键值对。然后你需要遍历整个整数数组，如果这个数组的值（=sum - array[i]）在哈希表中，恭喜你找到了，如果没有，则存储在哈希表中。

所以花费的全部时间就是插入和查询哈希表的时间。内存是哈希表的大小。

我的英文不是很好，希望能帮到你。

```

```
public static void main(String args[]) {
    int[] array = {150,24,79,50,88,345,3};
    int sum = 200;

    Map<Integer,Integer> table = new HashMap<>();
    StringBuilder builder = new StringBuilder();
    for(int i=0;i<array.length;i++){
        int key = sum - array[i];
        if(table.containsKey(key)){
            builder.append("index1=").append(table.get(key)).
                    append(" index2=").append(i);
        }else{
            table.put(array[i],i);
        }
    }
    System.out.println(builder);
} 
```

            回答 #6

赞同：1

时间：2020-01-25T05:07:34.130

二和问题的简单解决方案是`O(n^2)`， st`n`是提供的数字数组的长度。

但是，我们可以通过使用到目前为止看到的值的哈希映射（key=number，value=index）并在`O(1)`迭代数字时检查补码是否已经存在（）来做得更好。**这种方法对于未排序的数组**是最优的：

*   运行时复杂度：`O(n)`
*   空间复杂度：`O(n)`——虽然如果有一个解决方案，在实践中这将是`O(n/2)`

鉴于OP的问题：

*   没有指定输入数组**是否**已排序（因此，可以安全地假设输入数组可以是任何东西），并且
*   特别要求提供数组的**索引**，而不是实际数字，任何排序数组的解决方案都需要事先复制它，在排序数组和未排序数组之间保留索引映射，或者遍历原始数组，因此会根据所选择的方法消耗内存 ( `O(n)`) 或时间 ( )。因此，严格来说，[（当前）接受](https://stackoverflow.com/a/13042928/1328979)`O(n)`的解决方案的第一部分是*不正确*的。 *最佳解决方案：

*   在 Python 中：

```
class Solution:
    def twoSum(self, nums: List[int], target: int) -> List[int]:
        seen = {}
        for j, num in enumerate(nums):
            i = seen.get(target-num, -1)
            if i != -1:
                return [i+1, j+1]
            seen[num] = j
        return [-1, -1] 
```

*   在 Java 中：

```
import java.util.Map;
import java.util.HashMap;

public class Solution {
    public int[] twoSum(int[] nums, int target) {
        final Map<Integer, Integer> seen = new HashMap<>();
        for (int j = 0; j < nums.length; ++j) {
            final Integer i = seen.get(target - nums[j]); // One hash-map access v.s. two when using contains beforehand.
            if (i != null) {
                return new int[]{ i+1, j+1 };
            }
            numbers.put(nums[j], j);
        }
        return new int[]{-1, -1};
    }
} 
```

请注意，通过构造，如果补码存在于地图/字典中，则存储的索引将始终低于当前索引。因此以下命题得到验证：

> index1 必须小于 index2

另请注意，OP 的问题需要基于 1 的索引，这是我在上面提供的，但提到的 Leetcode 问题似乎从那时起已经更新，现在是基于 0：[https ://leetcode.com/问题/二和](https://leetcode.com/problems/two-sum)。

我希望这有帮助。

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2021-02-19T18:06:16.507

```
class Solution(object):
    def twoSum(self, nums, target):
        """
        :type nums: List[int]
        :type target: int
        :rtype: List[int]
        """
        out_list=[] 
        for i in range(len(nums)):
            for j in range(len(nums)):
                if(target-nums[i]) == nums[j] and i != j:
                    out_list.append(i)
        return out_list 
```

* * *

## 回答 #8

> 赞同：1
> 
>             
> 
> 时间：2019-07-24T04:07:06.543

正如上面提到的@Prayer，这是公认的答案。

```
class Solution {
    public int[] twoSum(int[] nums, int target) {
        int[] resultarray=new int[2];
        for (int i=0;i<nums.length-1;i++){
            for(int k=i+1;k<nums.length;k++)
            {
                 if(target==nums[i]+nums[k])
                 {
                     resultarray[0]=i;
                     resultarray[1]=k;
                 }
            }
        }
        return resultarray;
    }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
>             
> 
> 时间：2016-09-13T11:48:35.910

python中的一行解决方案：

```
class Solution(object):
    """
        :type nums: List[int]
        :type target: int
        :rtype: List[int]
    """
    def twoSum(self, nums, target):            
        x = [[i, nums.index(target-j)] for i,j in enumerate(nums) if nums.count(target-j) > 0 and nums.index(target-j)!=i]

        return x.pop() 
```

* * *

## 回答 #10

> 赞同：0
> 
>             
> 
> 时间：2012-10-24T04:10:33.060

我会这样处理：

1.  将您的数组从小到小排序

2.  以您拥有的方式循环您的数组，但只要提前退出循环

    目标<(数字[i]+数字[j])

3.  一旦获得了两个元素的值，例如 n[0] + n[1] = target，请回头查看原始数组以找到它们的索引。

* * *

## 回答 #11

> 赞同：0
> 
>             
> 
> 时间：2016-10-02T02:00:07.917

这是我的 O(nlog(n)) 的 cpp 解决方案：

```
vector<int> two_sum(vector<int> &numbers, int target) {
    vector<int> result;
    vector<int> numbers_dup = vector<int>(numbers);

    sort(numbers_dup.begin(), numbers_dup.end());

    int left = 0, right = numbers_dup.size() - 1;
    while(left <= right) {
        int sum = numbers_dup[left] + numbers_dup[right];

        if(sum == target) {
            //find the idex of numbers_dup[left] and numbers_dup[right]
            for(int i = 0; i < numbers.size(); i++) {
                if(numbers[i] == numbers_dup[left] || numbers[i] == numbers_dup[right]) {
                    result.push_back(i);
                }
                if(result.size() == 2) {
                    return result;
                }
            }
        }
        else if(sum > target) {
            right--;
        }
        else {
            left++;
        }
    }
} 
```

查看我的博客以获取详细说明。
[https://algorithm.pingzhang.io/Array/two_sum_problem.html](https://algorithm.pingzhang.io/Array/two_sum_problem.html)

* * *

## 回答 #12

> 赞同：0
> 
>             
> 
> 时间：2018-02-27T07:22:48.760

1.  以非降序对列表进行排序。这需要`O(nlogn)`时间复杂度。

2.  找到这两个数字，可以及时完成`O(n)`。

3.  找到两个数的两个索引，可以及时完成`O(n)`。

总体复杂度为`O(nlogn)`.

在python中的实现：

```
class Solution:
  def twoSum(self, nums, target):
    """
    :type nums: List[int]
    :type target: int
    :rtype: List[int]
    """
    p = nums[:]
    p.sort() #sorting in -> O(nlogn)
    r = len(nums)-1
    l =0 

    #find the indices -> O(n)
    for i in range(len(nums)):
      if(p[l] + p[r]<target): 
        l += 1
      elif (p[l] + p[r]>target): 
        r -=1
      else :
        first_num = p[l]
        second_num = p[r]

    #find the indices of the numbers -> O(n)
    for i in range(len(nums)):
      if(nums[i]==first_num):
        first_index = i
      elif (nums[i]==second_num):
        second_index = i
    return [first_index,second_index] 
```

* * *

## 回答 #13

> 赞同：0
> 
>             
> 
> 时间：2021-06-28T06:46:33.587

```
class Solution {
public int[] twoSum(int[] nums, int target) {
    int[] sortedNums = Arrays.copyOf(nums, nums.length);
    Arrays.sort(sortedNums);

    int leftSortedIndex = 0;
    int rightSortedIndex = sortedNums.length - 1;

    while(leftSortedIndex < rightSortedIndex) {
        int sum = sortedNums[leftSortedIndex] + sortedNums[rightSortedIndex];
        if(sum == target) {
            break;
        } else if(sum < target) {
            leftSortedIndex++;
        } else {
            rightSortedIndex--;
        }
    }

    int leftIndex = -1;
    int rightIndex = -1;
    for(int index=0; index < nums.length; index++) {
        if(leftIndex == -1 && nums[index] == sortedNums[leftSortedIndex]) {
            leftIndex = index;
            continue;
        }

        if(rightIndex == -1 && nums[index] == sortedNums[rightSortedIndex]) {
            rightIndex = index;
        } 
    }

    return (new int[] {leftIndex, rightIndex});
} 
```

}

* * *

## 回答 #14

> 赞同：0
> 
>             
> 
> 时间：2021-06-28T06:52:22.663

```
class Solution {
public int[] twoSum(int[] nums, int target) {
    int[] sortedNums = Arrays.copyOf(nums, nums.length);
    Arrays.sort(sortedNums);

    int leftSortedIndex = 0;
    int rightSortedIndex = sortedNums.length - 1;

    while(leftSortedIndex < rightSortedIndex) {
        int sum = sortedNums[leftSortedIndex] + sortedNums[rightSortedIndex];
        if(sum == target) {
            break;
        } else if(sum < target) {
            leftSortedIndex++;
        } else {
            rightSortedIndex--;
        }
    }

    int leftIndex = -1;
    int rightIndex = -1;
    for(int index=0; index < nums.length; index++) {
        if(leftIndex == -1 && nums[index] == sortedNums[leftSortedIndex]) {
            leftIndex = index;
        } else if(rightIndex == -1 && nums[index] == sortedNums[rightSortedIndex]) {
            rightIndex = index;
        }
    }

    return (new int[] {leftIndex, rightIndex});
} 
```

}

* * *

## 回答 #15

> 赞同：0
> 
>             
> 
> 时间：2020-07-30T23:16:58.430

只是好奇，但是这个 O(n) 解决方案有什么问题？

```
public int[] twoSum(int[] nums, int target) {
    for (int i = 0; i < nums.length - 1; i++){
        if (nums[i] + nums[i+1] == target)
            return new int[] {i, i+1};
    }
    return null;
} 
```

* * *

## 回答 #16

> 赞同：0
> 
>             
> 
> 时间：2020-05-17T18:46:45.460

我们可以用 HashMap 来做，时间复杂度是 O(n)

```
public class ReturnIndicesOfElementsAddToSum {

public static void main(String[] args) {
    int[] nums = {2, 7, 11, 15};
    int target = 18;

    if(!getIndices(nums,target)) {
        System.out.println("No such numbers found");
    }

}

static boolean getIndices(int[] nums, int target) {
    Map<Integer,Integer> indexMap = new HashMap<>();
    boolean numFound = false;
    for(int i=0;i<nums.length;i++) {
        int temp = target - nums[i];
        indexMap.put(nums[i], i);
        if(indexMap.containsKey(temp)) {
            System.out.printf("%d and %d adds upto the target value and indices are %d and %d"
                            , nums[i], temp, i, indexMap.get(temp));
            numFound = true;
        }
    }
    return numFound;
} 
```

}

* * *

## 回答 #17

> 赞同：0
> 
>             
> 
> 时间：2020-03-27T15:07:45.997

这是一个有效的解决方案。

**时间复杂度 - O(n)**和**空间复杂度 - O(1)**

Sol：将采用两个指针（start_pointer 和 end_pointer）。最初 start_pointer 指向第一个索引，end_pointer 指向最后一个。

添加两个元素（**sum = array[start_pointer] + array[last_pointer]**。之后检查，如果**sum > target**元素。如果是，则减少**end_pointer**否则增加**start_pointer**。如果**sum = target**，意味着你得到了索引。

```
public int[] twoSum(int[] numbers, int target) {

    int[] arr = new int[2]; // to store result
    int sum=0;

    int start_pointer=0;     
    int end_pointer = (numbers.length)-1;

    while(start_pointer<=end_pointer){

        sum=numbers[start_pointer]+numbers[end_pointer]; 

        if(sum>target)
            end_pointer-=1;
        else if(sum<target)
            start_pointer+=1;
        else{
            arr[0]=start_pointer;
            arr[1]=end_pointer;
            break;
        }       
    }       
    return arr;
} 
```

* * *

## 回答 #18

> 赞同：0
> 
>             
> 
> 时间：2018-12-27T08:53:00.837

c++ 中使用哈希映射的 O(n) 解决方案仅利用实数加法的**交换规则。**

```
class Solution {
public:
    vector<int> twoSum(vector<int>& nums, int target) {
        unordered_map<int, int> my_map;
          for ( int i = 0 ; i < nums.size(); i++ ){
                if(my_map.find(target - nums[i]) != my_map.end()){
                    return vector<int> {my_map[target - nums[i]], i};
                }  
                my_map[nums[i]] = i ;
          }
    }
}; 
```

* * *

## 回答 #19

> 赞同：0
> 
>             
> 
> 时间：2020-07-08T12:21:18.967

使用 HashMap 这也是一个解决方案，如果**在 HashMap 中搜索的复杂性**将按 O(logn) 的顺序排列，那么在最坏的情况下，复杂性将是**O(nlogn)**

```
 public int[] twoSum(int[] nums, int target) {

        int [] resultIndex = null;

        HashMap<Integer,Integer> map = new HashMap<Integer,Integer>();

        for(int i=0;i<nums.length;i++){
            int temp = target - nums[i];

            if(map.containsKey(temp)){
                resultIndex = new int[2];
                resultIndex[0]=map.get(temp);
                resultIndex[1]=i;
            }else{
                map.put(nums[i],i);
            }
        }
        return resultIndex;
    } 
```

* * *

## 回答 #20

> 赞同：0
> 
>             
> 
> 时间：2019-10-11T02:41:27.247

我尝试了大多数答案，但他们似乎没有正确处理边缘情况。因此，为处理边缘情况的 python3 解决方案投入了两分钱。我使用 Max 的算法来实现它：

```
 def twoSum(nums, target):
    output=[]
    arr=sorted(nums)
    x=0
    y=-1
    X=len(nums)-1
    while x<X:
        if (arr[X]+arr[x] >  target):
            X-=1 
        elif (arr[X]+arr[x] <  target):
            x+=1
        elif (arr[X]+arr[x] == target):
            #print("Found",arr[X],arr[x])
            num1=arr[x]
            num2=arr[X]
            x+=1
            X-=1 
    for i in range(len(nums)):
        if num1 == nums[i] and y==-1:
            index1=i
            y=i
        elif num2 == nums[i]:
            index2=i         
    return [index1, index2] 
```

注意重要的是要考虑边缘情况和输入，如下所示

```
print(twoSum([3,2,4],  6)) # [1,2]
print(twoSum([3,3],  6))  # [0,1] 
```

* * *

## 回答 #21

> 赞同：0
> 
>             
> 
> 时间：2017-08-14T10:48:12.427

```
 public static int[] twoSum(int[] nums, int target) {
        int []resultarray=new int[2];
        for (int i=0;i<nums.length-1;i++){
            for(int k=1;k<nums.length;k++)
            {
                 if(target==nums[i]+nums[k])
                 {
                     resultarray[0]=nums[i];
                     resultarray[1]=nums[k];
                 }
            }
        }
 return resultarray;
    } 
```

* * *

## 回答 #22

> 赞同：0
> 
>             
> 
> 时间：2020-12-14T21:51:08.850

我对这个问题的解决方案是，

```
public int[] twoSums(int[] unsortedNum, int target) {
        int[] nums = Arrays.copyOf(unsortedNum, unsortedNum.length);
        Arrays.sort(nums);
        boolean isResultFound = false;
        int start = 0;
        int end = nums.length-1;
        while(!(start > end)) {
            if(nums[start]+nums[end] > target){
                end--;
            } else if (nums[start]+nums[end] < target){
                start++;
            } else if(nums[start] + nums[end] == target){
                isResultFound = true;
                break;
            }
        }
        if(isResultFound){
            int s = -1;
            int e = -1;
            for(int i = 0; i< unsortedNum.length; i++){
                if(s != -1 && e != -1){
                    break;
                }
                if(s == -1 && unsortedNum[i] == nums[start]){
                    s = i;
                } else if(e == -1 && unsortedNum[i] == nums[end]) {
                    e = i;
                }
            }
            return new int[] {s,e};
        }
        // for element not found
        return new int[]{-1,-1};
    } 
```

最后，如果你得到 -1, -1 作为索引，那么你可以说没有找到的元素可以和目标元素相加。

* * *

## 回答 #23

> 赞同：0
> 
>             
> 
> 时间：2017-12-19T20:51:28.623

这是我的python解决方案

```
class Solution:
    def twoSum(self, nums, target):
        """
        :type nums: List[int]
        :type target: int
        :rtype: List[int]
        """

        copy_dict = {}
        for pos in range(0, len(nums)):
            if nums[pos] not in copy_dict.keys():
                copy_dict[nums[pos]] = [pos]
            else:
                copy_dict[nums[pos]].append(pos)

        def get_sum_indexes(sorted_array, target):
            right_pointer = len(sorted_array) - 1
            left_pointer = 0
            while left_pointer < len(sorted_array) or right_pointer > 0:
                if sorted_array[right_pointer] + sorted_array[left_pointer] == target:
                    return [sorted_array[left_pointer], sorted_array[right_pointer]]
                elif sorted_array[right_pointer] + sorted_array[left_pointer] > target:
                    right_pointer -= 1
                elif sorted_array[right_pointer] + sorted_array[left_pointer] < target:
                    left_pointer += 1
            return None
        sum_numbers = get_sum_indexes(sorted(nums), target)
        if len(copy_dict[sum_numbers[0]]) == 1:
            answer_1 = copy_dict[sum_numbers[0]][0]
        else:
            answer_1 = copy_dict[sum_numbers[0]][0]

        if len(copy_dict[sum_numbers[1]]) == 1:
            answer_2 = copy_dict[sum_numbers[1]][0]
        else:
            answer_2 = copy_dict[sum_numbers[1]][1]
        return sorted([answer_1, answer_2])

print(Solution().twoSum(nums=[-1, -2, -3, -4, -5], target=-8))
print(Solution().twoSum(nums=[-3, -3], target=-6)) 
```

* * *

## 回答 #24

> 赞同：0
> 
>             
> 
> 时间：2021-09-07T11:21:24.210

如果有人想要C，这可能会有所帮助......它是蛮力而不是哈希表！

```
#include <stdio.h>
int main(int argc, char const *argv[])
{
    int i,j,l,target,m,n;
    printf("Enter how many elements you want :\n");
    scanf("%d",&i);
    int array[i];

    printf("Input elements\n" );
    for (j=0;j<i;j++)
    scanf("%d",&array[j]);

    printf("[");
    for (l=0;l<i;l++)
    printf(" %d ",array[l] );
    printf("]\n");

    printf("Input the target :");
    scanf("%d",&target);

    for (m=0;m<i;m++)
    {
        for (n=m+1;n<i;n++)
        {
            if ((array[m]+array[n])==target)
            {
                printf("Their indices is \n[%d,%d]",m,n);
            }
        }
    }

    return 0;
} 
```

* * *

## 回答 #25

> 赞同：0
> 
>             
> 
> 时间：2018-10-25T05:51:44.987

时间复杂度 O(n) 和空间复杂度 O(n) 的 Swift 代码：

```
import UIKit

class Solution{
    func twoSum(_ nums: [Int], _ target: Int) -> [Int]{
        var finalArray = [Int]()
        var newDictionary = [Int:Int]()
        for i in 0..<nums.count{
            let complement = target - nums[i]
            if newDictionary[complement] != nil && newDictionary[complement] != i{

                finalArray.append(newDictionary[complement]!)
                finalArray.append(i)
                return finalArray
            }
            newDictionary[nums[i]] = i

        }
        return []
    }
}

func main(){

    let solution = Solution()
    print("All Good" ,solution.twoSum([1, 3, 4 , 5], 6))
}

main() 
```

* * *

## 回答 #26

> 赞同：0
> 
>             
> 
> 时间：2017-08-07T04:02:04.670

这是在 java 中使用 HashMap 并通过两次数组传递的答案。假设数组中没有重复的元素并且只存在一个解决方案。

```
import java.util.HashMap;

public class TwoSum {

    int[] index = new int[2];
    public int[] twoSum(int[] nums, int target)
    {
        int length = nums.length;
        //initialize return values assuming that pair for the given target
        //doesn't exist
        index[0]=-1;
        index[1]=-1;
        //sanity check
        if(length<1) return index;

        HashMap<Integer, Integer> numHash = new HashMap<>(length);
        //get the values from array into HashMap assuming that there aren't duplicate values
        for(int i=0; i<length;i++)
        {
            numHash.put(nums[i],i);
        }

        //check for the value in the array and the difference between target and it. Assume that only
        //one such pair exists
        for(int i=0;i<length;i++)
        {
            int val1 = nums[i];
            int val2=target-val1;
            //make sure that it doesn't return the index of the first number in the pait you are searching for
            if( numHash.containsKey(val2) && numHash.get(val2)!=i){
                index[0]=i;
                index[1] =numHash.get(target-nums[i]);
                break;
            }
        }
        return index;
    }
} 
```* 
```

# c# - 在给定 IFormatProvider 的情况下应用千位分隔符，就像十进制一

> ID：13042806
> 
> 赞同：0
> 
> 时间：2012-10-24T03:56:14.760
> 
> 标签：c#, .net

下面的代码适用于小数分隔符，这意味着，对于 pt-pt 它呈现“，”，而 en-us 它呈现“。”

如何使用千位分隔符完成相同的行为？

```
 decimal dec = Convert.ToDecimal(20000.01);

        IFormatProvider portuguese = new System.Globalization.CultureInfo("pt-pt");
        IFormatProvider english = new System.Globalization.CultureInfo("en-us");

        Console.WriteLine(dec.ToString(portuguese));
        Console.WriteLine(dec.ToString(english)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T08:15:58.457

您需要使用包含千位分隔符的格式字符串。

例如[标准格式字符串](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)：

```
dec.ToString("N2", portuguese); 
```

或[自定义格式字符串](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)：

```
dec.ToString("#,###.00", portuguese); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T04:04:58.090

这无疑是在黑暗中拍摄的。

```
decimal dec = Convert.ToDecimal(20000.01);

IFormatProvider portuguese = new System.Globalization.CultureInfo("pt-pt");
IFormatProvider english = new System.Globalization.CultureInfo("en-us");

Console.WriteLine(dec.ToString({0:C},portuguese)); //tell it that its currency
Console.WriteLine(dec.ToString(({0:C},english));   //tell it that its currency 
```

# android - 在eclipse中通过R类成员定位资源？

> ID：13042811
> 
> 赞同：0
> 
> 时间：2012-10-24T03:56:37.350
> 
> 标签：android, eclipse

如何通过 R 类成员定位资源（在 .xml 文件中）`R.id.some_text_view`？如果`F3`可以找到资源但在 R.java 中找到定义，则在 Eclipse 中会很方便。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T04:58:02.653

如果你有最新的 ADT，那么做起来很简单。

首先确保你已经编译了你的项目。

假设您有一个类似的代码

```
myCheckBox = (CheckBox) view.findViewById(R.id.my_check_box); 
```

只需按住 CTRL 键并按住它，将鼠标光标悬停在 my_check_box 上，它会显示一个弹出窗口，上面写着“在...中打开声明”并显示 XML 文件，您可以单击该文件直接去吧=)

# php - 为什么 ereg("^\d{11}$",18311111111) 是假的？

> ID：13042815
> 
> 赞同：5
> 
> 时间：2012-10-24T03:58:20.217
> 
> 标签：php, regex, ereg

我的代码是：

```
<?php
    $phone = 18311111111;
    if(ereg("^\d{11}$",$phone)){
        echo "true";
    } else {
        echo "false";
    }
?> 
```

我是假的？为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T04:02:29.540

因为`ereg`不支持`\d`，所以需要使用`[0-9]`代替。

并且`ereg`已**弃用**，`preg_match`请改用，然后您可以使用`\d`.

```
if(preg_match("/^\d{11}$/",$phone)){
    echo "true";
} else {
    echo "false";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T04:31:11.263

对于它的价值，您不应该使用`ereg`（不推荐使用）也不应该`preg_match`进行如此简单的测试；你可以使用`ctype_digit()`：

```
if (ctype_digit($phone)) {
    // $phone consists of only digits
} else {
    // non-digit characters were found in $phone
} 
```

# iphone - CFDataGetBytePtr 期间应用程序崩溃

> ID：13042816
> 
> 赞同：0
> 
> 时间：2012-10-24T03:58:28.923
> 
> 标签：iphone, crash

当我调用`CFDataGetBytePtr`. 基本上，当我可以进一步操作时，我想从图像中复制像素字节并存储在缓冲区中。是因为我不释放`m_PixelBuf`吗？还是复制数据的方式不对？

```
+ (int**) UIImage2GrayInt:(UIImage*)inImage
{
CGImageRef cgImage = inImage.CGImage;
CFDataRef m_DataRef = CGDataProviderCopyData(CGImageGetDataProvider(cgImage));  
UInt8 *m_PixelBuf = (UInt8 *) CFDataGetBytePtr(m_DataRef);  
int m_iH = CGImageGetHeight(cgImage);
int m_iW = CGImageGetWidth(cgImage);
//short* m_inDataGrey = malloc(sizeof(short)*(m_iW*m_iH));

int**piData = [self initVal:m_iH:m_iW];
//Convert GreyScale and copy data
int iStep,jStep;

for (int i = 0; i < m_iH; i++) 
{
    iStep = i*m_iW*4;
    //iStepGrey = i*m_iW;
    for (int j = 0; j < m_iW; j++) 
    {
        jStep = j*4;
        piData[i][j] =   ((double)m_PixelBuf[iStep + jStep] + (double)m_PixelBuf[iStep + jStep +1] + (double)m_PixelBuf[iStep + jStep +2])/3.0;
    }
}

m_PixelBuf = NULL;
CFRelease(m_DataRef);
return piData;
} 
```

这是崩溃日志

```
1\.  0 MyApp 0x000606ae testflight_backtrace + 238
    2\.  1 MyApp 0x00061398 TFSignalHandler + 264
    3\.  2 libsystem_c.dylib 0x328b87ec _sigtramp + 48
    4\.  3 MyApp 0x00046fa4 +[clsGlobalHelper UIImage2GrayInt:] (clsGlobalHelper.m:276)
    5\.  4 MyApp 0x00046fa4 +[clsGlobalHelper UIImage2GrayInt:] (clsGlobalHelper.m:276)
    6\.  5 MyApp 0x00046d40 +[clsGlobalHelper resizeImageAvg:::] (clsGlobalHelper.m:212)
    7\.  6 MyApp 0x00036fd2 -[clsNewPhoto ProcessSelectedFace] (clsFirstViewController.m:618)
    8\.  7 MyApp 0x000354ae -[clsNewPhoto btnSelectGender:] (clsFirstViewController.m:309)
    9\.  8 CoreFoundation 0x354063fc -[NSObject performSelector:withObject:withObject:] + 52 
```

这是代码`initval`

```
+(int**) initVal:(int) Nr:( int) Nc 
{
  int ** p;
  p = calloc(Nr,sizeof(int*));

  for(int i = 0; i < Nr; i++)
  {
    p[i] = calloc(Nc,sizeof(int));

  }
  return p;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T03:10:02.803

[这个](https://stackoverflow.com/questions/12311611/uint8-exc-bad-access)问题的答案帮助我解决了这个问题。仍然不知道 CFDataGetBytePtr 有什么问题，但至少我有前进的解决方案。

# draw - 绘制二叉搜索树或任何其他树结构的软件

> ID：13042817
> 
> 赞同：6
> 
> 时间：2012-10-24T03:58:31.950
> 
> 标签：draw, binary-search-tree

我需要在计算机上绘制 BST。

有什么软件可以做这个工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T04:02:48.193

这看起来像您正在寻找的东西吗：

[http://www.codeproject.com/Articles/334773/Graphical-BinaryTrees](http://www.codeproject.com/Articles/334773/Graphical-BinaryTrees)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T04:01:24.743

好吧..我刚找到一个，它似乎做得很好。

[TreeForm 语法树绘图软件](https://sourceforge.net/projects/treeform/)

# asp.net-mvc-3 - 如何获取操作的 MethodInfo、给定的操作、控制器和区域名称？

> ID：13042819
> 
> 赞同：7
> 
> 时间：2012-10-24T03:58:37.643
> 
> 标签：asp.net-mvc-3

我所拥有的是以下扩展方法：

```
public MyCustomAttribute[] GetActionAttributes(
    this Controller @this,
    string action,
    string controller,
    string area,
    string method)
{
} 
```

给定区域、控制器、动作名称和方法（GET、POST），ASP.NET MVC 3 如何找到动作方法？

到目前为止，我什么都没有……没有关于如何做到这一点的线索。

我目前正在寻找控制器操作中的堆栈跟踪，以了解 MVC 是如何发现它的。

**为什么我需要这些属性**

我的属性包含有关给定用户是否可以访问它的信息......但取决于他们是否可以访问它，我不想显示或隐藏一些可能调用该操作的 html 字段、链接和其他内容.

**其他用途**

我曾想过使用它在动作上放置一个属性，告诉将要渲染的链接的 css 类来调用它......以及其他一些 UI 提示......然后构建一个 HtmlHelper 来呈现该链接，查看这些属性。

**不是重复的**

是的，有些人会说这可能是这个问题的重复......没有我想要的答案：

[如何获取将在给定请求时调用的控制器操作的 MethodInfo？](https://stackoverflow.com/questions/10814147/how-can-i-get-the-methodinfo-of-the-controller-action-that-will-get-called-given)

这就是为什么我指定了我的问题的情况。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T07:44:49.763

我查看了 MVC 3 源代码，并使用 MVC 4 进行了测试，并发现了如何做到这一点。我错误地标记了这个问题......它不适用于 MVC 3，我使用的是 MVC 4。虽然，我可以找到一个查看 MVC 3 代码的解决方案，那么它也可能适用于 MVC 3。

*最后......我希望这值得 5 个小时的探索，有很多试验和错误。*

**适用于**

*   MVC 3（我认为）
*   MVC 4（已测试）

## 我的解决方案的缺点

不幸的是，这个解决方案非常复杂，并且依赖于我不太喜欢的东西：

*   **静态对象`ControllerBuilder.Current`**（对单元测试非常不利）
*   **来自 MVC 的很多类**（高耦合总是不好的）
*   **不通用**（它适用于 MVC 3 默认对象，但可能不适用于从 MVC 派生的其他实现......例如派生的 MvcHandler、自定义 IControllerFactory 等等......）
*   **内部依赖**（取决于 MVC 3 的特定方面，（MVC 4 的行为也是如此）可能是 MVC 5 不同...例如，我知道`RouteData`对象不用于查找控制器类型，所以我只是使用存根 RouteData 对象）
*   **模拟复杂对象以传递数据**（我需要模拟`HttpContextWrapper`并`HttpRequestWrapper`设置`http method`为`POST`或`GET`......这些非常简单的值来自复杂对象（哦上帝！=\））

## 编码

```
public static Attribute[] GetAttributes(
    this Controller @this,
    string action = null,
    string controller = null,
    string method = "GET")
{
    var actionName = action
        ?? @this.RouteData.GetRequiredString("action");

    var controllerName = controller
        ?? @this.RouteData.GetRequiredString("controller");

    var controllerFactory = ControllerBuilder.Current
        .GetControllerFactory();

    var controllerContext = @this.ControllerContext;

    var otherController = (ControllerBase)controllerFactory
        .CreateController(
            new RequestContext(controllerContext.HttpContext, new RouteData()),
            controllerName);

    var controllerDescriptor = new ReflectedControllerDescriptor(
        otherController.GetType());

    var controllerContext2 = new ControllerContext(
        new MockHttpContextWrapper(
            controllerContext.HttpContext.ApplicationInstance.Context,
            method),
        new RouteData(),
        otherController);

    var actionDescriptor = controllerDescriptor
        .FindAction(controllerContext2, actionName);

    var attributes = actionDescriptor.GetCustomAttributes(true)
        .Cast<Attribute>()
        .ToArray();

    return attributes;
} 
```

**编辑**

忘记了模拟类

```
class MockHttpContextWrapper : HttpContextWrapper
{
    public MockHttpContextWrapper(HttpContext httpContext, string method)
        : base(httpContext)
    {
        this.request = new MockHttpRequestWrapper(httpContext.Request, method);
    }

    private readonly HttpRequestBase request;
    public override HttpRequestBase Request
    {
        get { return request; }
    }

    class MockHttpRequestWrapper : HttpRequestWrapper
    {
        public MockHttpRequestWrapper(HttpRequest httpRequest, string httpMethod)
            : base(httpRequest)
        {
            this.httpMethod = httpMethod;
        }

        private readonly string httpMethod;
        public override string HttpMethod
        {
            get { return httpMethod; }
        }
    }
} 
```

*希望所有这些对某人有帮助...*

*祝大家编码愉快！*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T06:20:32.717

您可以通过使用**AuthorizeAttribute**来实现此功能。**您可以在OnAuthorization**方法中获取 Controller 和 Action 名称。请在下面找到示例代码。

```
 public sealed class AuthorizationFilterAttribute : AuthorizeAttribute
    {
        /// <summary>
        /// Use for validate user permission and  when it also validate user session is active.
        /// </summary>
        /// <param name="filterContext">Filter Context.</param>
        public override void OnAuthorization(AuthorizationContext filterContext)
        {
            string actionName = filterContext.ActionDescriptor.ActionName;
            string controller = filterContext.ActionDescriptor.ControllerDescriptor.ControllerName;
            if (!IsUserHasPermission(controller, actionName))
            {
               // Do your required opeation
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T17:02:39.867

这是一个简短的通知！一定要使用 filterContext.RouteData.DataTokens["area"]; 而不是 filterContext.RouteData.Values["area"];

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T05:04:59.313

如果您配置了默认路由，例如

```
routes.MapRoute(
        "Area",
        "",
        new { area = "MyArea", controller = "Home", action = "MyAction" }
    ); 
```

您可以在控制器操作中获取路由信息，例如

> htp://localhost/Admin

会给你

```
public ActionResult MyAction(string area, string controller, string action)
{
 //area=Admin
 //controller=Home
 //action=MyAction
 //also you can use RouteValues to get the route information
} 
```

这是 Phil Haack [**RouteDebugger 2.0的一篇很棒的博客文章和实用程序**](http://haacked.com/archive/2011/04/12/routedebugger-2.aspx)

# google-app-engine - 当我将域与 GAE 绑定时，我需要使用 Google Apps。这是否意味着我将在审判后被指控？

> ID：13042823
> 
> 赞同：2
> 
> 时间：2012-10-24T03:59:28.610
> 
> 标签：google-app-engine, google-apps

当我登录 Google Apps 时，它显示“Google Apps for Business 将在 31 天后过期”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T05:43:27.430

**编辑：** 截至 2012 年 12 月 6 日，谷歌不再提供“免费”版本。

[Google Apps for business 的变化](http://googleenterprise.blogspot.com/2012/12/changes-to-google-apps-for-businesses.html)

但是，您仍然可以通过 App Engine 管理控制台创建一个新的 Apps 帐户

> 如果您通过 App Engine 管理控制台创建一个新的应用程序帐户，您仍然可以免费创建一个标准应用程序帐户，但每个帐户只能获得 1 个用户，而不是现在获得的 10 个用户。

[Google App Engine 小组讨论](https://groups.google.com/d/msg/google-appengine/pVZfdeky-ow/TO1SmipM2Y0J)

* * *

**原始回复：**

有一个 Google Apps 免费版——它被称为**“标准版”**。不过，它们每天都让人们越来越难找到。

这是讨论从 Business 更改为 Standard 的帮助文章：

[http://support.google.com/a/bin/answer.py?hl=en&answer=60229](http://support.google.com/a/bin/answer.py?hl=en&answer=60229)

> ### 降级步骤
> 
> 在 30 天 Google Apps for Business 免费试用期间，您可以通过取消试用来[降级到 Google Apps。](http://support.google.com/a/bin/answer.py?hl=en&answer=60755)如果您想在免费试用期结束后降级您的 Google Apps for Business 订阅，时间和财务方面取决于您的结算方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T05:47:59.460

不，不是您想的那样，您甚至可以免费注册 Google Apps。这是一个免费版本。您可以使用以下链接注册。

[http://www.google.com/intl/en_in/enterprise/apps/business/pricing.html](http://www.google.com/intl/en_in/enterprise/apps/business/pricing.html)

即使您已经注册了 Google Apps for business，您也可以通过导航到管理面板并按照 URL 中的步骤将其降级为免费版本。

[http://support.google.com/a/bin/answer.py?hl=en&answer=60755](http://support.google.com/a/bin/answer.py?hl=en&answer=60755)

# debugging - 调试模式下的 libpng ndk-build 内部编译器错误

> ID：13042825
> 
> 赞同：0
> 
> 时间：2012-10-24T03:59:39.763
> 
> 标签：debugging, android-ndk, libpng

我使用 ndk-build 在调试模式下编译 libpng 源代码，然后它在 pngrtran.c 中显示“内部编译器错误”。但是当我在发布模式下编译时，它可以成功。这是libpng中的错误吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T02:13:27.790

这不是 libpng 中的错误；程序描述为“内部错误”的任何内容都是程序中的错误（libpng 会这样做，但随后会显示“libpng：内部错误”！）所以这是编译器中的错误。

你应该把它报告给 ndk 的人，或者你可以直接去找编译器供应商（可能是 GNU），因为他们可能会更敏感。

你无法解决这个问题——它需要一个编译器修复（也许只是为了输出一条不声称它是内部错误的消息，但至少是这样。）你可以通过简单地不在调试模式下编译 libpng 来避免这个问题。因为我认为这是针对 Android 的，所以你可以（我相信）混合和匹配调试，现在调试代码（这在至少有一个编译器的 Windows 上不起作用！*）*

您还可以尝试找出哪个编译器选项揭示了问题；比较在发布和调试中传递给编译器的选项，然后将差异一分为二，看看是否可以将问题缩小到一个设置。

约翰·鲍勒 jbowler 2 acm.org

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:20:12.937

android 团队应该知道这个错误。作为旧版本的重新出现： [http ://code.google.com/p/android/issues/detail?id=20862](http://code.google.com/p/android/issues/detail?id=20862)

# cakephp - 使用 CakePHP 重建查询

> ID：13042829
> 
> 赞同：0
> 
> 时间：2012-10-24T04:00:15.320
> 
> 标签：cakephp, cakephp-2.0

我目前有这个：

```
 $firstDay = new DateTime('first day of this month 00:00:00');
    $lastDay = new DateTime('first day of this month 00:00:00');

    return $this->Visitor->query(
        "SELECT
          (? + INTERVAL c.day - 1 DAY) unix_ts_day,
          COUNT(v.site_id) as visit_count
        FROM
          calendar c
        LEFT JOIN (
          SELECT * FROM visitors
            WHERE site_id = ? AND DATE(created) BETWEEN ? AND ?
          ) v
          ON DAYOFMONTH(v.created) = c.day
        GROUP BY
          unix_ts_day", array(
            $firstDay->format('Y-m-01' ),
            $this->id,
            $firstDay->format('Y-m-01' ),
            $lastDay->format('Y-m-t' )
        )
    ); 
```

我的表：

```
Calendar

id  | day
---------
1   | 1
2   | 2
3   | 3
...
31  | 31

Visitors

id  | site_id | created
-----------------------------------
1   | 16      | 2012-10-18 11:14:39
2   | 16      | 2012-10-18 11:15:17
3   | 11      | 2012-10-18 11:49:14
4   | 11      | 2012-10-18 11:49:43
5   | 16      | 2012-10-19 11:54:37
6   | 1       | 2012-10-19 05:56:31
7   | 2       | 2012-10-19 05:57:56 
```

现在，Calendar 表（没有 Calendar 模型）与 Visitor 表没有关联。

虽然上述查询正在工作。我在想这是否是 CakePHP 类可以做的事情，而不是我调用该`query`方法。如何更改它以使用它？

# redis - 导入 SignalR.Redis 包导致 SignalR 错误

> ID：13042832
> 
> 赞同：0
> 
> 时间：2012-10-24T04:01:11.030
> 
> 标签：redis, signalr

我有一个使用 SignalR 集线器和单个 Web 实例的工作应用程序。我需要将功能扩展到网络场。所以我正在尝试使用 SignalR.Redis 包。在 VS 2010 中使用包管理器导入该包后，我开始在网页/客户端中收到以下 500 错误：

```
[22:53:21.615] GET http://localhost:2936/signalr/hubs [HTTP/1.1 500 Internal Server Error 31ms] 
```

在导入 SignalR.Redis 包之前，调用工作正常。我还没有更改任何实际代码。刚导入包。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:53:53.837

划掉这个问题。我重新开始，更新了 VS 2010 中的所有 SignalR 包，一切正常。一定是一个过时的包什么的。谢谢。

# prolog - 元素索引

> ID：13042836
> 
> 赞同：3
> 
> 时间：2012-10-24T04:01:35.303
> 
> 标签：prolog

我是新手，也是我正在研究的 Prolog 的新手，特别是 SWI-Prolog。我正在尝试按照标题所述进行操作，并已使用 SWI 库中包含的一些方法使其在基于 1 的列表（从 1 而不是零开始）上工作。这是我的代码：

```
indexof(I,E,L):-
   nth1(I,L,E).
   indexof(-1,_,_). 
```

我的任务（是的，它是 hw - *_* -）是这样做的，但作为一个基于 0 的计数，我尝试在最后一行添加 I is I - 1 但我一直收到错误。有没有其他方法可以将其变为基于 0 的计数？

所以对于这个 indexof(A,a,[w,x,y,z,a])。我应该得到 4，但我得到 5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T14:24:22.143

SWI-Prolog 的[nth0/3](http://www.swi-prolog.org/pldoc/doc_for?object=nth0/3)与[nth1/3](http://www.swi-prolog.org/pldoc/doc_for?object=nth1/3)类似，但索引从 0 开始。

为了使您的原始方法有效，您需要以下内容：

```
indexof(I,E,L) :-
    nth1(I1,L,E),
    I is I1 - 1. 
```

Prolog 变量只能分配一次。如果你尝试过`I is I - 1`，你声称它`I`本身就是负 1。这永远不会是真的，所以谓词失败了。您需要使用中间变量，`I1`如上例所示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-19T11:19:38.587

[nth1/3](http://www.swi-prolog.org/pldoc/doc_for?object=nth1/3)的定义是`nth1(?Index, ?List, ?Elem)`。这`?`意味着不必实例化参数，因此 Prolog 将为您填充它，这意味着您甚至不必为此目的创建新的谓词！这是以这种方式使用内置`nth1/3`谓词的示例：

```
?- nth1(I, [1,2,3,1,3,4,5], 1).
I = 1 ;
I = 4 ;
false.

?- nth1(I, [1,2,3,1,3,4,5], 2).
I = 2 ;
false.

?- nth1(I, [1,2,3,1,3,4,5], 3).
I = 3 ;
I = 5 ;
false. 
```

# c# - 根据按钮点击次数填充文本框的值

> ID：13042837
> 
> 赞同：0
> 
> 时间：2012-10-24T04:01:38.483
> 
> 标签：c#, winforms

我是 C# 编码的新手。目前我遇到了根据点击`textBox`次数填充 a 的问题。`button1`我已经能够填充选项一，但我不确定如何在第二次点击后获得第二个选项，所以第四次。我怎么能做到这一点？另外，我需要在第四次点击后添加一个循环重新开始吗？

**代码**

```
protected void Button1_Click(object sender, EventArgs e)
{
     MyTextBox.Text = "Fruits"; //1st click
     MyTextBox.Text = "Vegtables"; //2nd click
     MyTextBox.Text = "Grains"; //3rd click
     MyTextBox.Text = "Poultry"; //4th click

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T04:07:50.493

```
private List<string> messages= new List<string>(){"Fruits", "Vegetables", "Grains", "Poultry"};
private int clickCount = 0;

protected void Button1_Click(object sender, EventArgs e)
{
   MyTextBox.Text = messages[clickCount];
   clickCount++;
   if (clickCount == messages.Count)
      clickCount = 0;

} 
```

# c++ - boost::chrono::time_point<> 和 boost::chrono::steady_clock::time_point 之间的区别

> ID：13042838
> 
> 赞同：1
> 
> 时间：2012-10-24T04:01:40.453
> 
> 标签：c++, boost, types, time

和之间有什么区别`boost::chrono::steady_clock::time_point`，`boost::chrono::time_point<boost::chrono::steady_clock,Duration>`为什么它们之间不能相互转换？

这似乎非常多余。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T05:02:16.920

如果它们的持续时间相同，它们可以相互转换。例如，以下内容会很好：

```
boost::chrono::steady_clock::time_point tp1 = boost::chrono::steady_clock::now();
boost::chrono::time_point<boost::chrono::steady_clock, 
                              boost::chrono::nanoseconds>
tp2 = tp1; 
```

如果它们的持续时间不同，您还可以使用[time_point_cast](http://www.boost.org/doc/libs/1_47_0/doc/html/chrono/reference.html#chrono.reference.cpp0x.time_point_hpp.time_point_cast)将一个 time_point 转换为另一个。

**例子**

```
boost::chrono::steady_clock::time_point tp1 = boost::chrono::steady_clock::now();
boost::chrono::time_point<boost::chrono::steady_clock,
                              boost::chrono::milliseconds> 
tp2 = boost::chrono::time_point_cast<boost::chrono::milliseconds>(tp1); 
```

另外，我不确定您为什么认为它们是多余的。如果您查看[文档](http://www.boost.org/doc/libs/1_51_0/doc/html/chrono/reference.html#chrono.reference.cpp0x.system_clocks_hpp.steady_clock)，`steady_clock`则具有以下成员：

```
typedef chrono::time_point<steady_clock> time_point; 
```

所以，`boost::chrono::steady_clock::time_point`只是`boost::chrono::time_point<steady_clock>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:46:37.990

`std::chrono::time_point`（基于 Boost）是一个**模板**，可用于定义一个类，而该类又可用于定义一个时间点。`std::chrono::steady_clock::time_point`是可用于定义时间点的模板（即类）的**实例化。**所以它们是同名的两个完全不同的东西。叹。

正如@JesseGood 指出的那样， can的各种**实例化**可以与.`std::chrono::time_point``time_point_cast`

# apache - Web服务器、应用程序服务器和数据库服务器之间的区别

> ID：13042840
> 
> 赞同：56
> 
> 时间：2012-10-24T04:02:01.870
> 
> 标签：apache, web-applications, webserver, web-hosting, htdocs

我在某处读到，Web 应用程序由 Web 服务器、应用程序服务器和数据库服务器组成。这三个有什么区别？

* * *

我问这个问题是因为我记得当我托管一个网站时，我所拥有的只是`https`登录到网站的控制面板，我将所有文件都放在`htdocs`文件夹中。没有像 Web 服务器、应用程序服务器和数据库服务器这样三个独立的东西。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2016-07-08T08:42:16.217

这常常让人感到困惑。

首先-“服务器”可以指物理事物（计算机）或逻辑事物（软件）。

Web、应用程序和数据库服务器软件都可以在同一台物理服务器机器上运行，或者分布在多台物理机器上。大多数大型网站都有多台机器；大多数“消费者”托管包在一个盒子上运行。

逻辑分离如下。

Web 服务器处理 HTTP(S) 请求，并将这些请求传递给“处理程序”。它们具有用于文件请求的内置处理程序 - HTML 页面、图像、CSS、JavaScript 等。您可以为它们无法管理的请求添加额外的处理程序 - 例如由应用程序服务器提供的动态页面。Web 服务器实现 HTTP 规范，并且知道如何管理请求和响应标头。

应用服务器处理创建动态页面的请求。因此，它们不是提供存储在硬盘驱动器上的 HTML 页面，而是动态生成发送给最终用户的 HTML。常用语言/框架有 Java/JSP、.Net (aspx)、PHP、Ruby（是否在 Rails 上）、Python 等。大多数情况下，此应用服务器软件与 Web 运行在同一台物理服务器机器上服务器。

数据库服务器软件是应用程序存储其结构化信息的地方。通常，这意味着定制软件允许应用程序服务器使用编程语言提出诸如“用户 x 在他们的篮子里有多少物品？”之类的问题。例如 MySQL、SQL Server、Oracle（所有“关系数据库”）和 MongoDB、Redis 和 CouchDB（“NoSQL”解决方案）。

数据库软件可以与 Web 服务器在同一台物理机器上运行，但当站点需要扩展时，它通常是托管在单独物理硬件上的第一件事。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-10-24T04:08:15.253

**网络服务器 -**

托管您的网站的服务器。该服务器将安装 Web 服务器，例如 IIS、apache 等。

**应用服务器 -**

您创建的应用程序正在使用您的数据库、Web 服务等的服务器。此应用程序服务器将托管业务层（使用 Web 服务包装）、计划作业、Windows 服务等。

**数据库服务器 -**

数据库服务器将托管您的一个或多个数据库，例如 Oracle、Sql Server、MySql 等。

* * *

如果您指的是`htdocs`那么它是一个 Web 服务器。您使用的数据库必须安装在不同的服务器上，即您的数据库服务器。应用程序服务器也可以安装在同一台 Web 服务器机器上。

![在此处输入图像描述](../Images/728517c2e686a316b078d8f5eb15e406.png)

参考 -[部署模式](http://apparchguide.codeplex.com/wikipage?title=Chapter%205%20-%20Deployment%20Patterns)

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2014-05-21T09:00:12.103

Web 服务器：处理所有 HTTP 请求的服务器称为 Web 服务器，其中应用程序服务器：包括 Web 服务器的服务，即响应 HTTP 请求，它也响应业务逻辑，因此不仅限于 HTTP协议例如。游戏服务器、聊天室等

# node.js - node.js http POST 不工作

> ID：13042841
> 
> 赞同：0
> 
> 时间：2012-10-24T04:02:12.230
> 
> 标签：node.js, http, post

我无法让我的 node.js 服务器向另一个 node.js 服务器发出 http POST 请求。我相当确定问题出在 http 库或我如何使用它，因为我可以编写一个小的 HTML 页面来完全按照我的意愿执行 POST。

以下是接收 POST 的服务器的设置方式

```
var server = restify.createServer({
   name: 'some server',
   version: "1.0.0"
});

server.use(restify.acceptParser(server.acceptable));
server.use(restify.bodyParser());    
server.post('/theurl/', handler.handlePost);

server.listen(config.port, function() {
   console.log("starting server on port %d", server.address().port);
}); 
```

在 handlePost 方法中，我正在这样做：

```
exports.handlePost = function(req, res, next) {
   console.log("body: %s", JSON.stringify(req.body));
   console.log("params: %s", JSON.stringify(req.params));
} 
```

这是发送 POST 的服务器的操作方式（直接取自[node.js http docs](http://nodejs.org/api/http.html#http_http_request_options_callback)）

```
var options = {
   host: '127.0.0.1',
   port: 8090,
   path: '/theurl/',
   method: 'POST'
};

var req = http.request(options, function(res) {
   ses.setEncoding('utf8');
   res.on('data', function (chunk) {
      console.log('BODY: ' + chunk);
   });
});

req.on('error', function(e) {
   console.log('problem with request: ' + e.message);
});

req.write("<some>xml</some>");
req.end(); 
```

当我运行 POST 时，在 handlePost 方法中 req.body 和 req.params 都是未定义的。

但是，如果我将以下 HTML 放在浏览器中，我可以发布到服务就好了。

```
<html>
   <head>
     <script>
       function doPost()
       {
         var xmlhttp = new XMLHttpRequest();
         xmlhttp.open("POST","http://localhost:8090/theurl/",false);
         xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
         xmlhttp.send("<some>xml</some>");
       }
     </script>
   </head>
   <body>
      <button type="button" onclick="doPost()">POST data</button>   
   </body>
</html> 
```

那么我对 node.js http 库做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T04:10:45.740

好吧，就在我发布这个之后，我意识到我在 HTML 版本中做的一件事我在 node.js 版本中没有做的是在请求中设置 Content-Type。如果我将选项更改为此，它会起作用：

```
var options = {
   host: '127.0.0.1',
   port: 8090,
   path: '/theurl/',
   method: 'POST',
   headers: { "Content-type": "application/x-www-form-urlencoded" }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T12:34:52.273

使用下面的代码

```
var querystring = require('querystring');

    var data = querystring.stringify({
          username: yourUsernameValue,
          password: yourPasswordValue
        });

    var options = {
        host: 'my.url',
        port: 80,
        path: '/login',
        method: 'POST',
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
            'Content-Length': data.length
        }
    };

    var req = http.request(options, function(res) {
        res.setEncoding('utf8');
        res.on('data', function (chunk) {
            console.log("body: " + chunk);
        });
    });

    req.write(data);
    req.end(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-10-20T19:12:13.003

确保您在`app.js`文件中添加了这些内容：

```
var bodyParser = require('body-parser'); // npm i body-parser

app.use(bodyParser.urlencoded({ extended: false }))
app.use(bodyParser.json()) 
```

# php - 需要帮助优化 wordpress 元查询

> ID：13042844
> 
> 赞同：1
> 
> 时间：2012-10-24T04:02:43.010
> 
> 标签：php, mysql, wordpress, optimization

我会在优化这个 wordpress 查询方面提供一些帮助，它目前需要 100% 的 cpu 使用率并且从来没有机会完成它：

```
SELECT wp_posts.* FROM wp_posts INNER JOIN wp_postmeta ON (wp_posts.ID = wp_postmeta.post_id)
INNER JOIN wp_postmeta AS mt1 ON (wp_posts.ID = mt1.post_id)
INNER JOIN wp_postmeta AS mt2 ON (wp_posts.ID = mt2.post_id)
INNER JOIN wp_postmeta AS mt3 ON (wp_posts.ID = mt3.post_id)
INNER JOIN wp_postmeta AS mt4 ON (wp_posts.ID = mt4.post_id)
INNER JOIN wp_postmeta AS mt5 ON (wp_posts.ID = mt5.post_id)
INNER JOIN wp_postmeta AS mt6 ON (wp_posts.ID = mt6.post_id)
INNER JOIN wp_postmeta AS mt7 ON (wp_posts.ID = mt7.post_id)
INNER JOIN wp_postmeta AS mt8 ON (wp_posts.ID = mt8.post_id)
INNER JOIN wp_postmeta AS mt9 ON (wp_posts.ID = mt9.post_id)
INNER JOIN wp_postmeta AS mt10 ON (wp_posts.ID = mt10.post_id) WHERE 1=1 AND wp_posts.post_type = 'produkter' AND (wp_posts.post_status = 'publish' OR wp_posts.post_status = 'private') AND (wp_postmeta.meta_key = 'csv_product_month_sub'
OR (mt1.meta_key = 'csv_product_type' AND CAST(mt1.meta_value AS CHAR) = 'Mobilt Bredbaand')
OR (mt2.meta_key = 'csv_product_consumption' AND CAST(mt2.meta_value AS SIGNED) BETWEEN '0' AND '2')
OR (mt3.meta_key = 'csv_product_consumption' AND CAST(mt3.meta_value AS SIGNED) BETWEEN '3' AND '9')
OR (mt4.meta_key = 'csv_product_consumption' AND CAST(mt4.meta_value AS SIGNED) BETWEEN '10' AND '19')
OR (mt5.meta_key = 'csv_product_download' AND CAST(mt5.meta_value AS SIGNED) BETWEEN '2' AND '9')
OR (mt6.meta_key = 'csv_product_download' AND CAST(mt6.meta_value AS SIGNED) BETWEEN '10' AND '19')
OR (mt7.meta_key = 'csv_product_download' AND CAST(mt7.meta_value AS SIGNED) BETWEEN '20' AND '29')
OR (mt8.meta_key = 'csv_product_month_sub' AND CAST(mt8.meta_value AS SIGNED) BETWEEN '0' AND '49')
OR (mt9.meta_key = 'csv_product_month_sub' AND CAST(mt9.meta_value AS SIGNED) BETWEEN '50' AND '99')
OR (mt10.meta_key = 'csv_product_month_sub' AND CAST(mt10.meta_value AS SIGNED) BETWEEN '100' AND '149') ) GROUP BY wp_posts.ID ORDER BY wp_postmeta.meta_value+0 ASC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:55:14.273

我遇到了这个问题，并意识到问题出在 WordPress 生成的所有 INNER JOINS 上。我从 WordPress 得到原始查询：

```
SELECT   wp_posts.* FROM wp_posts  
INNER JOIN wp_term_relationships ON (wp_posts.ID = wp_term_relationships.object_id) 
INNER JOIN wp_postmeta ON (wp_posts.ID = wp_postmeta.post_id)
INNER JOIN wp_postmeta AS mt1 ON (wp_posts.ID = mt1.post_id)
INNER JOIN wp_postmeta AS mt2 ON (wp_posts.ID = mt2.post_id)
INNER JOIN wp_postmeta AS mt3 ON (wp_posts.ID = mt3.post_id)
INNER JOIN wp_postmeta AS mt4 ON (wp_posts.ID = mt4.post_id)
INNER JOIN wp_postmeta AS mt5 ON (wp_posts.ID = mt5.post_id) WHERE 1=1  AND ( wp_term_relationships.term_taxonomy_id IN (7,11,12,13,14,15) AND wp_posts.ID NOT IN (
                    SELECT object_id
                    FROM wp_term_relationships
                    WHERE term_taxonomy_id IN (10)
                ) ) AND wp_posts.post_type IN ('post', 'page', 'attachment', 'product', 'store_page') AND (wp_posts.post_status = 'publish') AND ( (wp_postmeta.meta_key = 'product_type' AND CAST(wp_postmeta.meta_value AS CHAR) = 'type_pre_ground')
OR  (mt1.meta_key = 'product_type2' AND CAST(mt1.meta_value AS CHAR) = 'type_pre_ground')
OR  (mt2.meta_key = 'product_type3' AND CAST(mt2.meta_value AS CHAR) = 'type_pre_ground')
OR  (mt3.meta_key = 'product_type4' AND CAST(mt3.meta_value AS CHAR) = 'type_pre_ground')
OR  (mt4.meta_key = 'product_type5' AND CAST(mt4.meta_value AS CHAR) = 'type_pre_ground')
OR  (mt5.meta_key = 'product_type6' AND CAST(mt5.meta_value AS CHAR) = 'type_pre_ground') ) GROUP BY wp_posts.ID ORDER BY wp_posts.post_date DESC 
```

这从未完成并在非常高的负载下占用了 CPU。我删除了最后两个 INNER JOIN（和相应的 WHERE 子句）并在 2 秒内得到结果：

```
SELECT   wp_posts.* FROM wp_posts  
INNER JOIN wp_term_relationships ON (wp_posts.ID = wp_term_relationships.object_id) 
INNER JOIN wp_postmeta ON (wp_posts.ID = wp_postmeta.post_id)
INNER JOIN wp_postmeta AS mt1 ON (wp_posts.ID = mt1.post_id)
INNER JOIN wp_postmeta AS mt2 ON (wp_posts.ID = mt2.post_id)
INNER JOIN wp_postmeta AS mt3 ON (wp_posts.ID = mt3.post_id) WHERE 1=1  AND ( wp_term_relationships.term_taxonomy_id IN (7,11,12,13,14,15) AND wp_posts.ID NOT IN (
                    SELECT object_id
                    FROM wp_term_relationships
                    WHERE term_taxonomy_id IN (10)
                ) ) AND wp_posts.post_type IN ('post', 'page', 'attachment', 'product', 'store_page') AND (wp_posts.post_status = 'publish') AND ( (wp_postmeta.meta_key = 'product_type' AND CAST(wp_postmeta.meta_value AS CHAR) = 'type_pre_ground')
OR  (mt1.meta_key = 'product_type2' AND CAST(mt1.meta_value AS CHAR) = 'type_pre_ground')
OR  (mt2.meta_key = 'product_type3' AND CAST(mt2.meta_value AS CHAR) = 'type_pre_ground')
OR  (mt3.meta_key = 'product_type4' AND CAST(mt3.meta_value AS CHAR) = 'type_pre_ground') ) GROUP BY wp_posts.ID ORDER BY wp_posts.post_date DESC 
```

所以我意识到删除 INNER JOINS 是加快查询速度的关键。我只用一个 wp_postmeta INNER JOIN 重新编写了查询，并在几分之一秒内得到了结果：

```
SELECT   wp_posts.* FROM wp_posts  
INNER JOIN wp_term_relationships ON (wp_posts.ID = wp_term_relationships.object_id) 
INNER JOIN wp_postmeta ON (wp_posts.ID = wp_postmeta.post_id) WHERE 1=1  AND ( wp_term_relationships.term_taxonomy_id IN (7,11,12,13,14,15) AND wp_posts.ID NOT IN (
                    SELECT object_id
                    FROM wp_term_relationships
                    WHERE term_taxonomy_id IN (10)
                ) ) 
AND wp_posts.post_type IN ('post', 'page', 'attachment', 'product', 'store_page') 
AND (wp_posts.post_status = 'publish') 
AND ( (wp_postmeta.meta_key = 'product_type' AND CAST(wp_postmeta.meta_value AS CHAR) = 'type_pre_ground')
OR  (wp_postmeta.meta_key = 'product_type2' AND CAST(wp_postmeta.meta_value AS CHAR) = 'type_pre_ground')
OR  (wp_postmeta.meta_key = 'product_type3' AND CAST(wp_postmeta.meta_value AS CHAR) = 'type_pre_ground')
OR  (wp_postmeta.meta_key = 'product_type4' AND CAST(wp_postmeta.meta_value AS CHAR) = 'type_pre_ground')
OR  (wp_postmeta.meta_key = 'product_type5' AND CAST(wp_postmeta.meta_value AS CHAR) = 'type_pre_ground')
OR  (wp_postmeta.meta_key = 'product_type6' AND CAST(wp_postmeta.meta_value AS CHAR) = 'type_pre_ground') ) 
GROUP BY wp_posts.ID ORDER BY wp_posts.post_date DESC 
```

使用这个解决方案，我创建了一个 WordPress 过滤器来将 postmeta 查询转换为更快的格式：

```
function custom_get_meta_sql( $meta_sql )
{
    global $wpdb;

    $posts_table = $wpdb->prefix . 'posts';
    $postmeta_table = $wpdb->prefix . 'postmeta';

    //use single INNER JOIN
    $meta_sql['join'] = " INNER JOIN {$postmeta_table} AS pmta ON ({$posts_table}.ID = pmta.post_id) ";

    //replace the mtNN aliases with wp_postmeta
    $where_clause = $meta_sql['where'];
    $where_clause = str_replace("{$postmeta_table}.", 'pmta.', $where_clause);
    $where_clause = preg_replace('/mt\d+\.meta_/i', 'pmta.meta_', $where_clause);

    $meta_sql['where'] = $where_clause;
    return $meta_sql;
}

add_filter( 'get_meta_sql', 'custom_get_meta_sql' ); 
```

此过滤器应位于 WordPress 主题的 functions.php 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T06:04:22.810

到目前为止，我有：

```
SELECT wp_posts.* FROM wp_posts INNER JOIN wp_postmeta ON (wp_posts.ID = wp_postmeta.post_id)
WHERE ID IN (
            SELECT post_id from wp_postmeta 
            WHERE 
            (
                (meta_key = 'csv_product_consumption' AND CAST(meta_value AS SIGNED) BETWEEN 0 AND 2) 
                OR (meta_key = 'csv_product_consumption' AND CAST(meta_value AS SIGNED) BETWEEN 3 AND 9) 
                OR (meta_key = 'csv_product_consumption' AND CAST(meta_value AS SIGNED) BETWEEN 10 AND 19) 
                OR (meta_key = 'csv_product_download' AND CAST(meta_value AS SIGNED) BETWEEN 2 AND 9) 
                OR (meta_key = 'csv_product_download' AND CAST(meta_value AS SIGNED) BETWEEN 10 AND 19) 
                OR (meta_key = 'csv_product_download' AND CAST(meta_value AS SIGNED) BETWEEN 20 AND 29) 
                OR (meta_key = 'csv_product_month_sub' AND CAST(meta_value AS SIGNED) BETWEEN 0 AND 49) 
                OR (meta_key = 'csv_product_month_sub' AND CAST(meta_value AS SIGNED) BETWEEN 50 AND 99) 
                OR (meta_key = 'csv_product_month_sub' AND CAST(meta_value AS SIGNED) BETWEEN 100 AND 149) 
            )
            GROUP BY post_id
        )
AND wp_posts.post_type = 'produkter' 
AND (wp_posts.post_status = 'publish' OR wp_posts.post_status = 'private') 
AND ( (wp_postmeta.meta_key = 'csv_product_type') AND (wp_postmeta.meta_value = 'Mobilt Bredbaand'))
ORDER BY wp_postmeta.meta_value+0 ASC 
```

它不再使用过多的 cpu，查询需要 0.0331 秒。

任何其他想法将不胜感激。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-25T20:26:36.917

这是一篇旧文章，但您可以考虑尝试 Horizo​​ntal Meta。水平元监控帖子和用户元表中的特定键，并将它们提取为关系/水平格式。您仍然可以使用 WordPress 查询引擎来运行查询，但 Horizo​​ntal Meta 会重写查询以加快速度。可在此处获得：[http ://wordpress.org/plugins/horizo​​ntal-meta/](http://wordpress.org/plugins/horizontal-meta/)

# java - 为什么java regex模式错误出现在windows中但不在solaris环境中

> ID：13042851
> 
> 赞同：0
> 
> 时间：2012-10-24T04:03:29.977
> 
> 标签：java, regex, exception

为什么这个字符串问题只出现在windows中？

如何替换文件分隔符？以下两种方法都不适合我。

错误是：

> java.util.regex.PatternSyntaxException：索引 1 附近出现意外内部错误。

```
String s ="pathoffile";

if(File.separator.equals("\\"))
   s= s.replaceAll(File.separator,"/");

if(File.separator.equals("\\"))
   s= s.replaceAll("\\","/"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T04:05:58.033

您需要在正则表达式中转义反斜杠*两次*：

```
 s= s.replaceAll("\\\\","/"); 
```

一次，将反斜杠放入字符串中。

两次，因为正则表达式有特殊的字符类，比如`\d`, 并且以反斜杠开头，所以文字反斜杠是`\\`.

但是您可能真正应该做的是根本不使用正则表达式来[替换单个字符](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28char,%20char%29)：

```
s = s.replace('\\', '/'); 
```

# regex - 允许特定特殊字符的正则表达式

> ID：13042853
> 
> 赞同：0
> 
> 时间：2012-10-24T04:03:49.673
> 
> 标签：regex

我需要一个正则表达式来允许特殊字符列表（(_-.$@?,:'/!) 和支持 utf-8 语言的字母。

我试过了

```
/^[\_\-\.\$@\?\,\:\'\/\!]*$/ 
```

但是用英语和泰米尔语输入字母显示无效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T04:07:20.893

您需要转义连字符才能使其有效。您也不需要转义大多数其他字符 - 在括号内，几乎所有内容都是文字。

```
/[_\-.$@?,:'/!]*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T04:10:08.823

我不知道您的正则表达式引擎是否支持`\p{L}`. 你可以试试这个：

```
^[_\-.\$@\?\,\:\'/!\p{L}]*$ 
```

或者这个：

```
^[_\-.\$@\?\,\:\'/!\w]*$ 
```

最后一个也匹配数字。

# asp.net - 'Microsoft.ACE.OLEDB.12.0 未在本地机器上注册。'

> ID：13042855
> 
> 赞同：1
> 
> 时间：2012-10-24T04:04:13.613
> 
> 标签：asp.net, database, oledb, oledbconnection

我在 Windows 2008 服务器上安装了 Microsoft Access Database Engine 2010 Redistributable [http://www.microsoft.com/en-us/download/details.aspx?id=13255 。](http://www.microsoft.com/en-us/download/details.aspx?id=13255)但是，当我运行我的 Web 应用程序以将电子表格表导入数据库时​​。它抱怨错误消息 - **“Microsoft.ACE.OLEDB.12.0 未在本地计算机中注册。”**

我已经测试了我的代码并在我的 Windows 7 本地机器上工作。任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T13:17:57.620

**安装AccessDatabaseEngine** x86 或 x64 ***2010***时，**Microsoft.ACE.OLEDB.12**出现**问题**。

 *****我长期以来一直尝试使用 SSMS (2005-2008-2008R2-2012) 导出向导将大表导出到 Excel 中，我需要安装 AccessDatabaseEngine 才能做到这一点。

但是，无论 MS Office 版本是什么（2010、x86 或 x64，或其他任何版本），AccessDatabaseEngine 的 2010 版本都无法注册提供程序。

解决方案是下载并安装上一个，这正是**2007 x86**的。即使 Office 或 SQL Server 或 VS 是 x64，这个也可以工作。

从这里下载它[http://www.microsoft.com/en-us/download/confirmation.aspx?id=23734](http://www.microsoft.com/en-us/download/confirmation.aspx?id=23734)

现在，围绕臭名昭著的未能在本地计算机上为 Microsoft.ACE.OLEDB.12 注册“提供程序”的任何其他传播问题都应通过上述解决。

随意粘贴我在这件事上的经验。*****

# android - 如何从 Android 中的 onClick 事件刷新适配器

> ID：13042856
> 
> 赞同：0
> 
> 时间：2012-10-24T04:04:30.813
> 
> 标签：android

我有一个 ArrayAdapter，每行都有一个按钮，用于删除与该行关联的数据。那么 onClick 的“行删除按钮”如何从显示中删除行？我相信我需要刷新父视图？

```
public void onClick(View v) {
    deleteThisRowFromDB();
    //ok now how do I delete this row from the ArrayAdapter display?

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:10:49.793

您可以使用简单的游标适配器将数据绑定到列表视图或（父视图）......每当您从数据库中删除数据时，游标适配器将自动更新

仅供参考 [检查这个例子](http://thinkandroid.wordpress.com/2010/01/09/simplecursoradapters-and-listviews/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T04:13:42.497

您可以调用`notifyDataSetChanged()`刷新数据的方法。您可能需要覆盖以下方法，

```
@Override
public void notifyDataSetChanged() 
{
    super.notifyDataSetChanged();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T04:19:24.887

通过删除数据更新数据库，`notify`使用方法设置为适配器：

`adapter.notifyDataSetChanged();`

# ruby - 如何更新所有 Unicorn 实例？

> ID：13042857
> 
> 赞同：2
> 
> 时间：2012-10-24T04:04:39.830
> 
> 标签：ruby, unicorn

在通过 Nginx/Unicorn 部署时，我遇到的一个问题是如何与正在运行的实例取得联系。我需要这个来更新应用程序的内存缓存。

使用 Nginx/Thin，我在各种端口上运行多个实例并按端口调用应用程序实例，例如：

```
#!/bin/bash
curl :2000/update_cache/page_id
curl :2001/update_cache/page_id
etc. 
```

丑陋的方法，但它有效，因为我可以在所有正在运行的应用程序实例上更新单个页面（来自数千个）的缓存。

我想知道如何对 Unicorn 做同样的事情，但不是通过端口。Unicorn 是否提供了正在运行的实例列表或某种与它们交互的方式？

内存缓存的问题是，在某些实例上更新它时，它通常不会在其他实例上更新，所以我得到内容差异，因为有些用户看到更新的内容，而其他用户却仍然使用旧内容。

如何更新所有 Unicorn 实例的缓存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T11:33:56.987

好吧，你能得到工人 PID 的列表吗？

如果是这样，您可以通过发送信号来管理它们。

Ruby 可以很好地处理 Unix 信号，您只需要捕获它们并执行所需的内部操作。

一个简单的概念证明：

```
Signal.trap 'INFO' do
    puts "Updating %s" % Process.pid
    # clear cache ...
end 
```

现在，如果您有工人 PID，您只需执行以下操作：

```
#!/bin/bash
for pid in $pids; do
    kill -s INFO $pid
done 
```

您可以使用任何信号代替 INFO。

有关信号列表，请参阅 Ruby`Signal.list`

要获取工人 PID 列表，请参阅 Unicorn 的`after_fork`配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T05:03:35.470

这是不可能的。

独角兽主进程打开监听端口，工作人员不断竞争接受该端口上的请求。[除了向他们发送 Unix 信号](http://unicorn.bogomips.org/SIGNALS.html)之外，没有办法选择单个工人。

这是不应该这样进行缓存的众多原因之一:)

# c# - 将所有子对象链接到当前对象的适当方法是什么？

> ID：13042858
> 
> 赞同：0
> 
> 时间：2012-10-24T04:04:44.007
> 
> 标签：c#, parent-child

我正在创建一个包含子实例列表的类，我需要记住它们的父对象。

```
class Node
{
    List<Node> childNodes;
    Node ParentNode;
    public Node(List<Node> nodes)
    {
        childNodes = nodes;
        foreach (var node in childNodes)
        {
            node.ParentNode = this;
        }
    }
} 
```

这是一个好方法还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T04:15:35.220

```
I'm assuming this isn't a chicken egg problem. The Parent would be created first and therefore children would be added later. 

public class Node
{
    public List<Node> ChildNodes {get; private set;}
    public Node ParentNode {get; private set;}

    public Node():this(null)
    {
    }

    public Node(Node parentNode)
    {
        ParentNode = parentNode;
        ChildNodes = new List<Node>();
    }

    public void AddChildNode(Node childNode){
       childNode.ParentNode = this;
       ChildNodes.Add(childNode);
    }

} 
```

# haskell - 在一个 monad 中绑定一个函数 n 次

> ID：13042863
> 
> 赞同：4
> 
> 时间：2012-10-24T04:05:10.750
> 
> 标签：haskell

我已经看到使用`iterate`或`replicate`为了应用函数`n`时间的解决方案。但是，我没有设法在 State monad 中使用它。

此代码有效：

```
-- Stuff an empty game level with obstacles.
generateLevel :: Level -> State StdGen Level
generateLevel lvl =
    placeRandomWall lvl >>= placeRandomWall >>= placeRandomWall 
```

不出所料，这个也有效：

```
generateLevel :: Level -> State StdGen Level
generateLevel lvl =
    placeRandomWall =<< placeRandomWall =<< placeRandomWall lvl 
```

但是，这与以下内容不同：

```
generateLevel :: Level -> State StdGen Level
generateLevel lvl =
    (placeRandomWall =<< placeRandomWall =<< placeRandomWall) lvl 
```

最新的抱怨类型。因此，我不能`foldl (=<<) id (relicate 42 placeRandomWall)`，也不能`iterate`。

这是有道理的，因为 iterate 需要一个`a -> a`函数，而我所拥有的是`a -> m a`或类似的东西。所以，我真的不知道如何从那里去。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T04:09:49.967

我认为您正在寻找`<=<`和`>=>`来自`Control.Monad`. 它们可以折叠在您制作的列表中`replicate`以创建一个大动作。

试试`foldr (<=<) return (replicate 42 placeRandomWall)`。

# html - 如何用子元素完全填充父 div？

> ID：13042865
> 
> 赞同：1
> 
> 时间：2012-10-24T04:05:23.963
> 
> 标签：html, css, cross-browser

我有一个名为`#menu`800px 宽的 div。在其中，我有 8 个导航链接。其中的元素应该尽可能长，并且都应该具有相同的宽度，但它们应该一起在单行上填充父 div（即不换行）。

在每个元素之间，应该有一个 1px 的边框（或者可能是一个 1px 的边距）。所有链接，除了当前页面链接（无论`#current`应用到哪个链接）都应该有一个`1px solid #505050`底部边框。虽然当前页面链接不应该**有**可见的底部边框（以便导航选项卡与内容 div“合并”）。

我当前的代码几乎已经完成了我想要的，但是它缺少链接之间的边框/边距......如果我在两侧添加边框/边距，显然，当前`12.5%`宽度（参见下面的 CSS 代码）变得不准确，我可以'不要对其进行微调，以便它确实填充`#menu`div**跨浏览器**（元素将溢出`#menu`div，或者它们不会填充它 - 在至少一个浏览器中）。

CSS：

```
#menu {
  border:1px solid #505050;
  border-bottom:none;
  width:800px;
}

#menu a {
  display:inline-block;
  outline:none;
  text-align:center;
  width:12.5%;
  padding-top:12px;
  padding-bottom:10px;
  background-image:url(/img/menu.gif);
  border-bottom:1px solid #505050;
  color:#D9D9D9;
  font-weight:bold;
  font-size:13px;
  font-family:Verdana, sans-serif;
  text-shadow:1px 1px #505050;
}

#menu #current {
  background-image:url(/img/menu_current.gif);
  color:#505050 !important;
  border-bottom-color:#D9D9D9;
  text-shadow:none;
} 
```

HTML：

```
 <div id="menu">
    <a href="/page1.html" id="current">Link 1</a>
    <a href="/page2.html">Link 2</a>
    <a href="/page3.html">Link 3</a>
    <a href="/page4.html">Link 4</a>
    <a href="/page5.html">Link 5</a>
    <a href="/page6.html">Link 6</a>
    <a href="/page7.html">Link 7</a>
    <a href="/page8.html">Link 8</a>
  </div> 
```

两个要求：

*   该解决方案应该适用于 IE6 和更高版本的 IE，以及最新版本的 Firefox、Chrome、Safari 和 Opera
*   请不要使用JavaScript

如果：

*   该解决方案有效，因此可以添加链接而无需重新调整元素的宽度

您当然可以完全重写 CSS/HTML。无需重复使用上面的任何代码，我只是展示我自己的方法。另外，我知道 IE6 不支持 text-shadow 规则，但这不是必需的。

目前的样子 ![目前的样子](../Images/b0b50320c141622d98b116105b08a2cd.png)

预期结果 ![预期结果](../Images/6d9cb11d38731e8ab0f3d643a0a862c3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:05:38.933

另一种方法是使用 html 表格而不是 div。

> #menu {
>   宽度：800px;
>   边框折叠：折叠；
> }
> 
> #menu td.other {
>   边框：1px 纯黑色；
> }
> td {
>   显示：内联块；
>   大纲：无；
>   文本对齐：居中；
>   宽度：100%；
>   填充顶部：12px；
>   填充底部：10px；
>   背景图片：网址（/img/menu.gif）；
>   颜色：#D9D9D9;
>   字体粗细：粗体；
>   字体大小：13px；
>   字体系列：Verdana，无衬线；
>   文字阴影：1px 1px #505050;
> }
> #menu#current {
>   背景图像：url(/img/menu_current.gif);
>   颜色：#505050 ！重要；
>   边框底部颜色：#D9D9D9;
>   文字阴影：无；
>   左边框：1px 纯黑色；
>   右边框：1px 纯黑色；
>   边框顶部：1px 纯黑色；
>   边框底部：1px 实心#D9D9D9；
> }

```
<table id="menu" border="0">
<tr>
    <td id="current"><a href="/page1.html">Link 1</a></td>
    <td class="other"><a href="/page2.html">Link 2</a></td>
    <td class="other"><a href="/page3.html">Link 2</a></td>
    <td class="other"><a href="/page4.html">Link 2</a></td>
    <td class="other"><a href="/page5.html">Link 2</a></td>
    <td class="other"><a href="/page6.html">Link 2</a></td>
    <td class="other"><a href="/page7.html">Link 2</a></td>
    <td class="other"><a href="/page8.html">Link 2</a></td>
</tr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T04:11:14.057

嗨，我想你想要这个 ***[演示](http://tinkerbin.com/wyR4B8kr)***

像这样`css`在你的**样式表**中添加一些

```
#menu{
font-size:0;
}
#menu a {
  box-sizing:border-box;
  -moz-box-sizing:border-box;
  -webkit-box-sizing:border-box;
}
#menu a + a{
border-left:solid 2px black;  // depent your design .
} 
```

***[现场演示](http://tinkerbin.com/wyR4B8kr)***

**根据您的设计**更改颜色**或**边框。****

# javascript - Aurigma 7，如何隐藏文件夹窗格标题中的 checkAll 复选框

> ID：13042868
> 
> 赞同：0
> 
> 时间：2012-10-24T04:05:55.350
> 
> 标签：javascript, ruby-on-rails-3, aurigma

有没有办法隐藏 aurigma 上传器版本 7 中的 checkAll 复选框（文件夹窗格标题）

我试过这种方式，但它没有任何效果

> iu.addParam("ButtonCheckAllText", "");
> iu.addParam("ButtonUncheckAllText", "");

供参考

我使用 Ruby on Rails，并使用 javascript 调用 aurigma

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:07:50.823

不，不幸的是没有办法。

看起来您使用的是早期版本的脚本，在 Uploader 7 中，javascript 完全改变了。

# javascript - 如何在不使用 arguments 属性的情况下找到参数的数量？

> ID：13042874
> 
> 赞同：2
> 
> 时间：2012-10-24T04:07:14.473
> 
> 标签：javascript

鉴于此代码片段，我如何在不使用 myFunc 的 arguments 属性的情况下从函数中找到传递给函数的参数数量。

```
function myFunc() {
    "use strict";
    ...
    var j;
    for (j = 0; j < myFunc.arguments.length; ++j) { 
    ...
      }
}

myFunc("some", "arguments", "here"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T04:08:35.520

您不需要`.arguments`函数的属性。您也可以访问`arguments`引用 arguments 对象的变量。

```
arguments.length 
```

* * *

```
function myFunc() {
    var j; // -------v---- no function reference needed
    for (j = 0; j < arguments.length; ++j) { 
       // ...
    }
} 
```

# c# - 正则表达式人名比较

> ID：13042879
> 
> 赞同：0
> 
> 时间：2012-10-24T04:07:47.120
> 
> 标签：c#, javascript, .net, regex

我对正则表达式不是很好，我在网上寻找这个但找不到。在我的数据库中，我存储了 first_name、second_name 和 last_name，但在我的网站上，我只有两个 texbox（一个用于 first_name，另一个用于 last_name）。我想包括一个检查以允许在同一个文本框中包含 first_name 和 second_name。所以检查应该是：

*   只允许字母、撇号和空格
*   如果带有 first_name 的文本框不包含空格，则最大长度为 50 个字符
*   如果包含空格，则最大长度为 50 第一个单词 + 空格 +（其余 50 个，任意多个单词）

这可能使用正则表达式吗？谢谢，任何想法都会受到欢迎。

**更新**

我发现了另一种使用 JS 库[https://github.com/joshfraser/JavaScript-Name-Parser](https://github.com/joshfraser/JavaScript-Name-Parser)的方法。我会做一些修改：

*   检查解析名称的长度
*   本地化诸如“博士”、“先生”之类的文本

然后我将名称单独存储在数据库中，因为这是一个简短的注册表单，我希望尽可能少的文本框。然后，如果数据有误，用户将能够转到他的个人资料并单独编辑数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T04:11:56.517

像这样的东西：

```
/^[A-Z']{1,50}(\s[A-Z'\s]{1,50})?$/i 
```

（更新：请注意，虽然我相信上面的 JS 正则表达式符合您的要求，但我不确定您的要求是否与真实世界的名称匹配，因为您似乎假设第一个空格标志着名字的结尾。我有一些亚洲名字的朋友，他们的名字中有一个空格。我还有一个朋友用空格而不是连字符拼写她的名字“Ann Marie”；她还有一个中间名，在她的例子中是假设“玛丽”是中间名的一部分是不正确的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T04:18:23.337

虽然我认为这在正则表达式中是可能的，但我认为在使用正则表达式之前将任务拆分一点更容易和更清晰。我建议您对空格字符执行拆分，然后检查生成的字符串长度，然后使用正则表达式确保只有字母和撇号。

# c# - 找不到引用合同的默认端点元素

> ID：13042882
> 
> 赞同：1
> 
> 时间：2012-10-24T04:08:02.073
> 
> 标签：c#, wcf

我正在尝试添加网络服务。

这是我的配置文件

```
 <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="Service1Soap" closeTimeout="00:01:00" openTimeout="00:01:00"
          receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
          bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" 
          maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
          messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" 
          useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
              realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://localhost:51272/Service1.asmx" binding="basicHttpBinding"
        bindingConfiguration="Service1Soap" contract="ServiceReference1.Service1Soap" 
        name="Service1Soap"  />
    </client>
  </system.serviceModel> 
```

这是我调用 Web 服务的控制器。

```
 ServiceReference1.Service1Soap hs = new ServiceReference1.Service1SoapClient();
 int aa = hs.getStockQty(66); 
```

但是有错误..

![在此处输入图像描述](../Images/98168aeb0760701cb49745417fe38a50.png)

我该如何解决？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:32:46.383

我认为端点有多个引用，请您删除引用并用不同的名称重新添加它。

如果不是，解决方案很简单。将端点定义从类库的配置文件中复制到应用程序的配置文件中。

还要检查这个合同“Service1Soap”的命名空间

# c# - 在 gridview Visual Studio C# 中运行搜索

> ID：13042893
> 
> 赞同：-1
> 
> 时间：2012-10-24T04:09:13.587
> 
> 标签：c#, visual-studio-2010, datagridview

```
SELECT personID, name, phoneNumber, age 
FROM dbo.person
WHERE name = .... 
```

我在 Visual Studio 中创建了一个数据库并将其呈现在一个网格视图中。我目前正在创建一种方法，用户可以在其中搜索一个人的姓名并在 gridview 中显示匹配的行。

`userinputTextBox.Text`当我尝试在上面的 (....) 空间中输入字段时，Visual Studio 会引发错误。

有没有人这样做过并且知道解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T04:24:26.503

您需要包含`parameterName`SELECT 语句。

```
SELECT personID, name, phoneNumber, age 
FROM dbo.person
WHERE name=@name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T06:43:57.690

如果要过滤数据，最好创建一个视图并用数据填充网格，然后通过在文本框的 textchanged 事件中传递查询来过滤网格，否则使用 sqlreader。

# ruby-on-rails - 在 activeadmin 资源中需要范围

> ID：13042894
> 
> 赞同：3
> 
> 时间：2012-10-24T04:09:20.563
> 
> 标签：ruby-on-rails, activeadmin, scopes

我正在使用 activeadmin，需要弄清楚如何要求范围仅显示与当前用户有关的记录。

我还有其他用户可以选择的范围，但可以说这些范围需要“预先确定”，以便在任何给定时间只有属于该用户的记录可用。

我希望这是有道理的。我对这一切都很陌生，所以我不确定从哪里开始。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:30:46.673

您是否尝试过范围界定`scope_to :current_user`？

AA 有一些带有 docs 的示例。在这里他们是 [http://activeadmin.info/docs/2-resource-customization.html#scoping_the_queries](http://activeadmin.info/docs/2-resource-customization.html#scoping_the_queries)

current_user 是从 AA 初始化程序获取当前登录用户（我认为是默认值）代码的辅助方法

```
# This setting changes the method which Active Admin calls
# to return the currently logged in user.
config.current_user_method = :current_user 
```

如果您的模型中有某种使用登录用户的方法，您可以执行类似的操作

```
controller do
      def scoped_collection
        Post.some_method(current_user)
        #or for example Post.select(current_user.visible_posts_columns) ... etc
      end
    end 
```

# c++ - 使用指针遍历检查字符串是否重复

> ID：13042895
> 
> 赞同：2
> 
> 时间：2012-10-24T04:09:21.367
> 
> 标签：c++, pointers

```
bool repeat_char(char *s, int n);
//R: s is a C-string of at least n non-NUL characters and n > 0
//E: returns true if the first n characters are fully repeated throughout the string s, false
//   otherwise. 
```

我在使用指针遍历来实现这个函数时遇到了麻烦。我在想我可以从 s 中提取前 n 个字符，然后将其与 s 进行比较，但我不确定我该怎么做。如果我一次遍历一个字符，如何检查它是否匹配一个文本块，例如 s 的前 n 个字符？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T04:14:51.743

您实际上一次只能比较一个字符，因此您从`s`and开始`s+n`，然后比较一个字符。如果它们匹配，则将字符 比较`s+1`到`s+n+1`。如果它们匹配，则转到`s+2`，依此类推直到`n`。如果它们匹配到该点，则从 s+n*2 开始重复，然后是 s+n*3，依此类推，直到到达字符串的末尾。

如果你发现不匹配，或者在任何地方都到达了字符串的末尾，除了匹配子字符串的最后一个字符，那么你返回 false。否则，您返回 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:35:46.710

替代方法（不完全通过指针遍历）：

```
bool repeatOfFirstChars(int n, const char *s)
{
  len = strlen(s);

  if (len % n != 0) return false;

  for (int step = 1; step < len / n; step++) {
    if (0 != strncmp(s, s+n*step, n)) return false;
  }

  return true;
} 
```

# python - shutil.copyfile 的替代品

> ID：13042897
> 
> 赞同：4
> 
> 时间：2012-10-24T04:09:36.723
> 
> 标签：python, py2exe

我需要一个shutil模块的替代品，特别是shutil.copyfile。

这是一个鲜为人知的 py2exe 错误，它使整个 shutil 模块无用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T04:14:43.737

嗯

```
os.system("cp file1 file2") ? 
```

我不确定为什么 shutil 在 py2exe 中不起作用……您可能必须明确告诉 py2exe 包含该库……

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-15T17:08:04.997

使用 os.system() 会有很多问题；例如，当文件名中有空格或 Unicode 时。相对于异常/失败，它也将更加不透明。

如果这是在 Windows 上，使用 win32file.CopyFile() 可能是最好的方法，因为这将产生相对于原始文件的正确文件属性、日期、权限等（也就是说，它将更类似于结果您可以使用资源管理器复制文件）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T05:03:51.837

如果一个简单的呼叫`os.system()`对您有用，那么请使用该解决方案。这只是一行代码！

如果你真的想要 shutil.copyfile 之类的东西，你可以从 Python 源代码中获取你需要的东西。这是来自 Python-2.7.3/Lib/shutil.py 的相关代码：

```
def copyfileobj(fsrc, fdst, length=16*1024):
    """copy data from file-like object fsrc to file-like object fdst"""
    while 1:
        buf = fsrc.read(length)
        if not buf:
            break
        fdst.write(buf)

def _samefile(src, dst):
    # Macintosh, Unix.
    if hasattr(os.path, 'samefile'):
        try:
            return os.path.samefile(src, dst)
        except OSError:
            return False

    # All other platforms: check for same pathname.
    return (os.path.normcase(os.path.abspath(src)) ==
            os.path.normcase(os.path.abspath(dst)))

def copyfile(src, dst):
    """Copy data from src to dst"""
    if _samefile(src, dst):
        raise Error("`%s` and `%s` are the same file" % (src, dst))

    for fn in [src, dst]:
        try:
            st = os.stat(fn)
        except OSError:
            # File most likely does not exist
            pass
        else:
            # XXX What about other special files? (sockets, devices...)
            if stat.S_ISFIFO(st.st_mode):
                raise SpecialFileError("`%s` is a named pipe" % fn)

    with open(src, 'rb') as fsrc:
        with open(dst, 'wb') as fdst:
            copyfileobj(fsrc, fds 
```

如果您不介意忽略所有错误检查，您可以将其提炼为：

```
def copyfile(src, dst):
    length = 16 * 1024
    with open(src, 'rb') as fsrc:
        with open(dst, 'wb') as fdst:
            while True:
                buf = fsrc.read(length)
                if not buf:
                    break
                fdst.write(buf) 
```

# c - 计算剩余贷款余额

> ID：13042900
> 
> 赞同：1
> 
> 时间：2012-10-24T04:09:53.207
> 
> 标签：c

我正在尝试用 C 编写一个程序来计算给定月数后的剩余贷款余额，给定余额、每月付款金额和利率。（每个月，余额增加（余额*（利率/12）），并减少支付金额。）

我计算每个月余额的代码如下：

```
for (i = 1; i <= n; i++) {
    loanAmount += (loanAmount * (intRate/12));
    loanAmount -= monthlyPayment;
    printf("The balance after month %d is %.2f\n", i, loanAmount);
} 
```

我输入了一些值（`loanAmount = 1000`, `intRate = 12`, `monthlyPayment = 100`, `n = 3`），我预计第 1 个月后的结果为 910.00，第 2 个月后为 819.10，第 3 个月后为 727.29。但是，我得到了以下结果：

```
Enter the loan amount:
1000
Enter the interest rate:
12
Enter the monthly payment amount:
100
Enter the number of monthly payments:
3
The balance after month 1 is 1900.00
The balance after month 2 is 3700.00
The balance after month 1 is 7300.00 
```

我在我的代码中做错了什么？我认为我的算法是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T04:15:11.193

您的利率需要为 0.12，因为此时您只是乘以 1，因此将余额加 1000，然后减去付款。

# jquery - 需要帮助来检查使用 jquery 检查的单选按钮列表的值

> ID：13042914
> 
> 赞同：0
> 
> 时间：2012-10-24T04:11:13.677
> 
> 标签：jquery, html, dom, radiobuttonlist

`http://jsfiddle.net/EwKNW/2/`

我需要检查以下单选按钮列表是否选中。

我尝试过使用更简单的 HTML 结构，它工作正常（ `http://jsfiddle.net/pfZUt/6/` ）

我在使用 jquery 和通过 HTML 树结构传播时遇到了麻烦。

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T04:28:56.590

这实际上不是您的代码的问题。您发布的第一个小提琴中的问题是您没有在“选择框架”下加载 jQuery 库，所以下面的代码

```
$('#myform').submit(function() { ... 
```

无法解释。您可以通过（在 Chrome 中）右键单击 -> 检查元素来看到这种情况。您会看到一条错误消息，上面写着“未捕获的 TypeError：无法调用 null 的 'submit' 方法”。一旦你加载了 jQuery 库，这个问题就解决了，你的代码可以正常工作。

你可以在这里看到效果：http: [//jsfiddle.net/EwKNW/3/](http://jsfiddle.net/EwKNW/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T04:31:26.457

我不明白你的 if else 语句，但你可以得到这样的检查元素名称，

```
 $('#myform').submit(function() {
        $('input:radio:checked').each(function(){
          alert( $(this).attr('name'));
        });
     });​ 
```

[http://jsfiddle.net/pfZUt/7/](http://jsfiddle.net/pfZUt/7/)

您需要`this`从第二个选择器中删除，因为它指向`element_475`试图在其中选择的那个。

# xcode - setDownloadProgressBlock 中的 totalBytesExpectedToRead 保持 -1 直到下载完成

> ID：13042925
> 
> 赞同：6
> 
> 时间：2012-10-24T04:12:13.760
> 
> 标签：xcode, download, afnetworking

我一直在谷歌搜索无济于事，希望您对此有所帮助。

我尝试使用 AFHTTPRequestOperation 流（通过设置输出流）下载图像。它下载文件，没问题。但是进度条显示不正确，因为 totalBytesExpectedToRead 总是返回-1，并且只有在下载完成时才返回正确的值。

这是流媒体的本质吗？还是我做错了什么？

我的代码如下。

提前致谢！

(void)invokeAsynchronousSTREAMING:(NSString*)path locationToSave:(NSString*)locationToSave 参数:(NSDictionary*)paramDict callId:(NSString*)callId {

```
NSMutableURLRequest *request = [[AFServerAPIClient sharedClient] requestWithMethod:@"GET" 
                                                                              path:path 
                                                                        parameters:paramDict];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

if(locationToSave!=nil) {
    operation.outputStream = [NSOutputStream outputStreamToFileAtPath:locationToSave append:NO];
}

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject)  {

   //DO SOMETHING

} 
    failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        //DO SOMETHING
    }
 ];

[operation setDownloadProgressBlock:^(NSInteger bytesRead, long long totalBytesRead, long long totalBytesExpectedToRead) {

    NSLog(@"invokeAsyncronousSTREAMING - Received %lld of %lld bytes", totalBytesRead, totalBytesExpectedToRead);

    //DO SOMETHING
}];

[operation start]; 
```

}//结束调用AsyncStreaming

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T06:50:21.747

`-1`如果服务器未`Content-Length`在响应中设置 HTTP 标头，则可能会返回下载进度。

在这种情况下，建议您改用不确定的进度指示器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-14T22:37:41.703

此外，根据[这个问题](https://stackoverflow.com/questions/9550971/afnetworking-progress)，如果在传输过程中使用 gzip 压缩，即使标头确实包含 a （这两种情况都非常频繁） ，`totalBytesExpectedToRead`仍然会返回。这是因为内容只能在传输结束时解压缩，因此在传输完成之前不会知道其大小。`-1``Content-Length`

# c# - 删除列表中的重复项 使用 .NET 2.0

> ID：13042931
> 
> 赞同：4
> 
> 时间：2012-10-24T04:13:08.997
> 
> 标签：c#, asp.net, .net

当我尝试使用 .NET 2.0 从 List 中删除重复项时，我无法获得预期的结果。

```
 List<Student> list1 = new List<Student>();

    Student s = new Student();
    s.Age = "35";
    s.Name = "Nazmul";
    list1.Add(s);

    s = new Student();
    s.Age = "35";
    s.Name = "Nazmul";
    list1.Add(s);

    s = new Student();
    s.Age = "35";
    s.Name = "Nazmul";
    list1.Add(s);

    s = new Student();
    s.Age = "35";
    s.Name = "Nazmul";
    list1.Add(s);

    IComparer<Student> compare = new MyOrderingClass();

    list1.Sort(compare);
    Int32 index = 0;

    while (index < list1.Count - 1)
    {

        if (list1[index].Equals(list1[index + 1]))
        {
            list1.RemoveAt(index);
        }
        else
        {
            index++;
        }
    }

    foreach (Student st in list1)
    {

        Response.Write("Name:" + st.Name);
        Response.Write("Age:" + st.Age + "<br/>");
    } 
```

上面使用的类和方法如下：

```
public class Student
{
    private String name;
    private String age;
    public String Name
    {
        get { return name; }
        set { name = value; }
    }
    public String Age { 
        get { return age; } 
        set { age = value; } 
    }
}

public class MyOrderingClass : IComparer<Student>
{
    public int Compare(Student x, Student y)
    {
        int compareName = x.Name.CompareTo(y.Name);
        if (compareName == 0)
        {
            return x.Age.CompareTo(y.Age);
        }
        return compareName;
    }
} 
```

我将所有列表项作为输出。想知道我在哪里做错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T04:53:56.343

您正在查看的核心思想可以用操作 - 相等 - 和数据结构 - 集合来描述。

一是操作。

你的班级`MyOrderingClass`已经接近你想要的了。而不是`IComparer<Student>`，您可以使用`IEqualityComparer<Student>`which 提供一种方法来确定两个实例是否相等。确定这一点需要两种方法：`Equals`当然，`GetHashCode`这是某些数据结构用来查看实例是否*可能*相等的一种“快捷方式”方法。这里要注意的重要一点是， 的实现`GetHashCode`涉及用于确定相等性的相同值。

```
public class MyOrderingClass : IEqualityComparer<Student>, IComparer<Student>
{   
    public int Compare(Student x, Student y)   
    {   
        if (ReferenceEquals(x, y))
        {
            return 0;
        }

        if (ReferenceEquals(x, null))
        {
            throw new ArgumentException("x");
        }

        if (ReferenceEquals(y, null))
        {
            throw new ArgumentException("y");
        }

        // Optional: use StringComparer.CurrentCultureIgnoreCase.CompareTo or maybe others 
        // from http://msdn.microsoft.com/en-us/library/system.stringcomparer.aspx
        int compareName = x.Name.CompareTo(y.Name);

        if (compareName == 0)   
        {   
            return x.Age.CompareTo(y.Age);   
        }   

        return compareName;   
    }

    public int GetHashCode(Student student)
    {
        if(student == null)
        {
            throw new ArgumentNullException("student");
        }

        unchecked
        {
            return (student.Name ?? String.Empty).GetHashCode() ^ student.Age;
        }
    }

    public bool Equals(Student x, Student y)
    {
        return Compare(x, y) == 0;
    }
} 
```

第二，数据结构。

可以通过使用`Distinct`扩展方法来实现拥有不同对象集合的想法，但查看`ISet<T>`-的实现可能会有所帮助`HashSet<T>`。原因是“不同元素”的概念实际上是对集合概念的定义 - 属于一起的唯一元素。使用`HashSet<T>`一个实例`IEqualityComparer<T>`- 默认情况下它使用`EqualityComparer<T>.Default`执行引用相等。当然你可以提供你自己的，比如你新增强的`MyOrderingClass`. 事实证明，该`Distinct`方法使用基于散列的集合来跟踪它已经看到和产生的元素，为此它可以将一个实例`IEqualityComparer<T>`传递给这个内部集合。

现在我们已经检查了基本概念，让我们看看代码：

```
List<Student> list1 = new List<Student>();

// ... add instances with the same name and age

// option 1: use HashSet<T>
var set = new HashSet<Student>(list1, new MyOrderingClass());
Assert.Equal(1, set.Count);

// option 2: use Distinct
var distinct = list1.Distinct(new MyOrderingClass());
Assert.Equal(1, distinct.Count());

// option 3: when you don't have a proper set (e.g. .Net 2.0)
Dictionary<Student, Object> d = new Dictionary<Student, Object>(new MyOrderingClass());
list1.ForEach(delegate(Student e) { d[e] = null; });
Assert.Equal(1, d.Count); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T05:01:26.240

在 .NET 2.0 中，您可以使用`Dictionary<>`类来获取不同的值。使用开箱即用的功能可能是最有效的方法。显然在 .NET 3.5 及更高版本中使用`Distinct`扩展方法。在这里，我添加了 .NET 2.0 实现。

```
public class Student : IEquatable<Student>
{
    private String name;
    private String age;
    public String Name
    {
        get { return name; }
        set { name = value; }
    }
    public String Age
    {
        get { return age; }
        set { age = value; }
    }

    public override int GetHashCode()
    {
        unchecked
        {
            int hash = 17;

            hash = hash * 23 + ((Age == null) ? 0 : Age.GetHashCode());
            hash = hash * 23 + ((Name == null) ? 0 : Name.GetHashCode());

            return hash;
        }
    }

    public bool Equals(Student other)
    {
        if (other == null)
        {
            return false;
        }

        return Age == other.Age && Name == other.Name;
    }

    public override bool Equals(object obj)
    {
         if (obj == null) return false;
         if (obj.GetType() != typeof(Student)) return false;

         return Equals((Student)obj);
    }
} 
```

* * *

```
Dictionary<Student, bool> dict = new Dictionary<Student, bool>();

foreach (Student student in list1)
{
    if (!dict.ContainsKey(student))
    {
        dict.Add(student, false);
    }
}

ICollection<Student> distinctList = dict.Keys; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T04:27:12.927

pmtamal 提到：默认等于仅支持引用相等。这可能很有用[http://msdn.microsoft.com/en-US/library/bsc2ak47(v=vs.80).aspx](http://msdn.microsoft.com/en-US/library/bsc2ak47(v=vs.80).aspx)

```
 public class Student
            {
                private String name;
                private String age;
                public String Name
                {
                    get { return name; }
                    set { name = value; }
                }
                public String Age
                {
                    get { return age; }
                    set { age = value; }
                }

                public override bool Equals(object obj)
                {
                    Student st = obj as Student;
                    if(st != null ){
                        return (this.name.Trim().ToLower().Equals(st.name.Trim().ToLower()) && this.age == st.age);
                    }
                    return base.Equals(obj);
                }

                public override int GetHashCode()
                {
                   return base.GetHashCode();
                }

            } 
```

# objective-c - 将 TableViewCell 推送到另一个 ViewController 时出错

> ID：13042932
> 
> 赞同：0
> 
> 时间：2012-10-24T04:13:39.687
> 
> 标签：objective-c, ios, uitableview, ios5.1

我试图将数据从 TableViewCell 传递到另一个 ViewController。但是在另一个 ViewController 中没有显示数据。这是我的代码

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

   PeripheralManager *objSelected=[device objectAtIndex:indexPath.row];

   [self prepareForSegue:@"TableDetails" sender:objSelectedDevice];
 }

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{

   if ([segue.identifier isEqualToString:@"TableDetails"])
   {

   DetailViewController *detail=segue.destinationViewController;
   detail.dataArray=device;
   }

 } 
```

错误信息

```
nested push animation can result in corrupted navigation bar
2012-10-24 12:01:39.805 [3182:707] nested push animation can result in corrupted navigation bar
2012-10-24 12:01:40.164 [3182:707] Finishing up a navigation transition in an unexpected state. Navigation Bar subview tree might get corrupted.
2012-10-24 12:01:40.167 [3182:707] Finishing up a get navigation transition in an unexpected state. Navigation Bar subview tree might corrupted. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T04:19:22.470

你不需要这个：

```
[self.navigationController pushViewController:mdc animated:YES]; 
```

这就是`Segue`会自动执行的操作

此外，您有 3 行将加载视图控制器 - 请参阅下面的评论：

```
NSInteger row=[indexPath row];
NSString *value=[device objectAtIndex:row];
MeBleDetailViewController *mdc=[self.storyboard instantiateViewControllerWithIdentifier:@"MeBleDetailViewController"];  
mdc.deviceName=value;
[self presentModalViewController:mdc animated:YES];    // Load ViewController
[UIView commitAnimations];
[self performSegueWithIdentifier:@"TableDetails" sender:[device objectAtIndex:indexPath.row]];    // Load ViewController
[self.navigationController pushViewController:mdc animated:YES];   // Load ViewController 
```

这就是您收到该错误的原因：**嵌套推送**动画可能导致导航栏损坏

此外，如果您已经配置了从表格单元到另一个视图控制器的 segue，那么您不需要任何`didSelectRowAtIndexPath`方法。

* * *

编辑：

无论您希望推送视图控制器拥有什么数据 - 将其放入`prepareforSegue`方法而不是`didSelectRowAtIndexPath`

如果您创建从表格单元格到视图控制器的转场，则无需执行以下操作，因为此方法是以编程方式执行转场。

`[self performSegueWithIdentifier:@"TableDetails" sender:[device objectAtIndex:indexPath.row]];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T09:03:51.367

好的。假设您有两个视图控制器`FirstViewController`和`SecondViewController`. 在`FirstViewController`你有一个tableview，当然还有tableviewcell。在`SecondViewController`你需要显示数据。因此，`SecondViewController.h`您需要设置某个变量的属性，在这种情况下，它的`id`类型为`@property (strong, nonatomic) id secDetailItem;`. 合成它`SecondViewController.m`并添加一个像这样的setter方法

```
-(void)setDetdetailItem:(id)newSecdetailItem{
if (secDetailItem != newSecdetailItem) {
    secDetailItem = newSecdetailItem;

    // Update the view.
     [self configureView];//This method is needed to update view if there are some changes in that view.
}
} 
```

所以然后在`FirstViewController.h`导入 `SecondViewController.h`和添加属性`@property (strong, nonatomic) SecondViewController *secondViewController;`然后合成。在`FirstViewController.m`此委托方法的文件中执行以下操作：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
 self.secondViewController.secDetailItem=//set your data should be passed. 
```

//另外如果需要push viewcontroller add `pushviewcontroller:SecondViewController`，或者用IB将tableview cell和SecondViewController用push方法连接起来。}

在这种情况下，您不需要使用 perform segue。Setter 方法将在您设置`secDetailItem`某些内容后立即起作用。

此外，如果您需要更新您的视图，请`SecondViewController`添加此方法。

```
- (void)configureView 
```

{

```
if (self.secDetailItem) {
    self.textLabel.text=self.secDetailItem;//Data passed from FirstViewController
} 
```

}

这就是你需要做的。对不起，如果它很复杂。问任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T09:04:05.510

删除您的额外代码仅执行此操作-

在`DetailViewController.h`

```
@property(nonatomic, retain)NSMutableArray *dataArray; 
```

在`DetailViewController.m`

```
@synthesize dataArray = _dataArray; 
```

现在`TableViewController.m`就写这个-

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
   if([segue.identifier isEqualToString:@"TableDetails"])
   {
     DetailViewController *detailViewObject = segue.destinationViewController;
     detailViewObject.dataArray = anyArray;
   }
} 
```

我在这里路过`NSMutableArray`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-24T04:18:47.253

它可能与这一行有关：

```
[UIView commitAnimations]; 
```

如果你不需要它，你可以删除它。

# c# - Datagrid WPF：在 AutogeneratedColumns 中绑定日期选择器

> ID：13042934
> 
> 赞同：0
> 
> 时间：2012-10-24T04:13:43.380
> 
> 标签：c#, wpf, datagrid, datepicker, autogeneratecolumn

我有自动生成的列datagridgrid。这是我用于定义数据网格的 xml 代码：

```
<DataGrid AutoGenerateColumns="True"  HorizontalAlignment="Stretch"  Name="dataGrid1" VerticalAlignment="Stretch"  
              AutoGeneratingColumn="dataGrid1_AutoGeneratingColumn"> 
```

现在，我正在扫描每一列，如果列类型等于 System.DateTime，我想添加一个日期选择器，其选定值等于单元格中的值：

```
private void dataGrid1_AutoGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs e)
    {
        // Modify the header of the Name column.
        if (e.PropertyType.ToString() == "System.DateTime")
        {
    e.Column = new System.Windows.Controls.DatePicker();
     }

    } 
```

但是当我这样做时，我得到了这个错误： `Cannot implicitly convert type 'System.Windows.Controls.DatePicker' to 'System.Windows.Controls.DataGridColumn`'任何想法如何解决这个问题？先谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T05:02:00.683

您可以拥有 2 个 DataTemplates：

```
<DataTemplate x:Key="dueDateCellTemplate">
            <TextBlock
            Text="{Binding DueDate}"
            Margin="5,4,5,4" />
</DataTemplate>
<DataTemplate x:Key="dueDateCellEditingTemplate">
            <sdk:DatePicker 
            SelectedDate="{Binding DueDate, Mode=TwoWay}" />
</DataTemplate> 
```

然后您可以在检查时编辑您的列，如下所示：

```
private void dataGrid1_AutoGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs e)
  {                
           if (e.PropertyName == "System.DateTime")
            {
                // Create a new template column.
                DataGridTemplateColumn templateColumn = new DataGridTemplateColumn();
                templateColumn.CellTemplate = (DataTemplate)Resources["dueDateCellTemplate"];
                templateColumn.CellEditingTemplate = (DataTemplate)Resources["dueDateCellEditingTemplate"];
                e.Column = templateColumn;
            }            
  } 
```

# perl - Perl 哈希和正则表达式

> ID：13042935
> 
> 赞同：0
> 
> 时间：2012-10-24T04:13:45.350
> 
> 标签：perl

我正在研究将句子拆分为单个单词的代码，然后根据哈希键搜索这些单词是否存在。我的代码返回 100% 相同的术语，在匹配之后，我用与匹配键对应的值标记句子中的单词。问题是代码标签术语，但随机值与我期望的不符。此外，在某些情况下，术语和哈希键相似但不是 100% 相同，我如何编写正则表达式以将我的术语与键匹配。注意：我已经将散列键提取为它们的根形式。我可以提供一些示例：如果句子中的术语是 Synergistic 或 anti-synergistic，并且我的哈希键是 Synerg，我如何将上述术语与 Synerg 匹配。

我的代码如下：

```
 open IN, "C:\\Users\\Desktop\\TM\\clean_cells.txt" or die "import file absent";
    my %hash=();
    use Tie::IxHash;
    tie %hash => "Tie::IxHash";
    while(<IN>)
    {
    chomp $_;
    $line=lc $_;
    @Organs=split/\t/, $line;
    $hash{$Organs[0]}=$Organs[1];
    }

    $Sentence="Lymphoma is Lymph Heart and Lung";
     @list=split/ /,$Sentence;

     @array=();
 foreach $term(@list)
 {
 chomp $term;
    for $keys(keys %hash)
     {
    if($hash{$term})
     {
     $cell="<$hash{$keys}>$term<\/$hash{$keys}>";
     push(@array, $cell);
    }
    elsif($term=~m/\b\Q$keys(\w+)\E\b/)
    {
    $cell="<$hash{$keys}>$term<\/$hash{$keys}>";
     push(@array, $cell);        
    }
    elsif($term=~m/\b\Q(\w+)$keys\E\b/)
    {
    $cell="<$hash{$keys}>$term<\/$hash{$keys}>";
     push(@array, $cell);        
    }
    elsif($term=~m/\b\Q(\w+)$keys(\w+)\E\b/)
    {
    $cell="<$hash{$keys}>$term<\/$hash{$keys}>";
     push(@array, $cell);        
     }
}
}
print @array;

 for example: hash looks like this: %hash={
                                      TF1    => Lymph
                                Thoracic_duct =>    Lymph
                                    SK-MEL-1 => Lymph
                                       Brain => Brain
                                     Cerebellum =>  Brain
                                         };
   So if the term TF1 is found it should be substituted to Lymph TF1 /Lymph 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:46:30.300

我发现了两个阻碍您的代码工作的大问题：

*   您正在将哈希键设为小写，但您对`$Sentence`. 因此，大写单词 from `$Sentence`永远不会匹配。
*   修饰符禁用正`\Q...\E`则表达式元字符。虽然在对变量进行插值时这样做通常很好，但您不能使用`(\w+)`其中的表达式——这将查找文字字符`(\w+)`。这些正则表达式需要像这样重写：`m/\b\Q$keys\E(\w+)\b/`.

您的代码还存在其他设计问题：

1.  您到处都在使用未声明的全局变量。你应该用 . 声明所有变量`my`。始终打开`use strict; use warnings;`，这将迫使您正确执行此操作。
2.  似乎没有任何理由`Tie::IxHash`，这会导致您的哈希被排序。您不会在代码中以任何方式使用此排序。输出按 排序`@list`。我会取消这个不必要的模块。
3.  你的`if/elsif`陈述是多余的。 `if($term=~m/\b\Q(\w*)$keys(\w*)\E\b/)`将完成与所有这些组合相同的事情。请注意，我替换`\w+`为`\w*`. 这允许之前和之后的组匹配零个或多个字符而不是一个或多个字符。

*注意：*我没有费心测试`Tie::IxHash`，因为我没有那个模块，而且看起来没有必要。使用此模块可能还会在您的代码中引入其他问题。

# lua - 为什么 SciTE 的输出是反转的？

> ID：13042941
> 
> 赞同：2
> 
> 时间：2012-10-24T04:14:28.347
> 
> 标签：lua, scite

我正在用 SciTE 编写我的 lua 代码，我编写了一个可以由 lua 调用的**C 函数，如下所示：**

```
int hello(lua_State* L){
printf("----->> Hi! %s\n", lua_tostring(L, 1));
return 0;
} 
```

我的**lua代码**是这样的：

```
zcLua.hello('Kitty')
print'hello' 
```

（'zcLua' 是我注册的库名）。在 lua 控制台中，输出是

```
----->> Hi! Kitty
hello 
```

但在 SciTE 中，输出是相反的：

```
hello
----->> Hi! Kitty 
```

我该如何纠正？似乎是因为代码`print'hello'`的执行速度比调用 c 函数快

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T02:20:18.480

> 由于我不了解 SciTE，因此我无法确定。但我认为打印功能在编辑器中进行了改进，它将输出数据放在仅在脚本末尾显示的缓冲区中，或者在单独的线程中。

# objective-c - 当我将它添加到另一个子视图并替换 tableHeaderView 时，为什么 tableHeaderView 被删除了？

> ID：13042943
> 
> 赞同：1
> 
> 时间：2012-10-24T04:14:44.440
> 
> 标签：objective-c, xcode, uitableview

这是我想做的完整代码（只有 2 行）

```
[self.headerViewofWholeTable addSubview:self.delegate.tableView.tableHeaderView];
self.delegate.tableView.tableHeaderView= self.headerViewofWholeTable; 
```

事情不起作用，所以我开始添加打印信息

```
[self.headerViewofWholeTable addSubview:self.delegate.tableView.tableHeaderView];
PO(self.headerViewofWholeTable.subviews);
self.delegate.tableView.tableHeaderView= self.headerViewofWholeTable;
PO(self.headerViewofWholeTable.subviews); 
```

简单的 4 行代码：D

结果：

```
 self.headerViewofWholeTable.subviews: (
        "<UILabel: 0x8bf9770; frame = (50 15; 250 21); text = 'Pull Down to Refresh'; clipsToBounds = YES; opaque = NO; autoresize = RM+BM; userInteractionEnabled = NO; layer = <CALayer: 0x8bf97e0>>",
        "<UILabel: 0x8b63aa0; frame = (50 35; 257 20); text = 'last updated'; clipsToBounds = YES; opaque = NO; autoresize = RM+BM; userInteractionEnabled = NO; layer = <CALayer: 0x8b63b10>>",
        "<UIView: 0x8b63b80; frame = (20 11; 22 54); autoresize = RM+BM; layer = <CALayer: 0x8bf6c40>>",
        "<UIImageView: 0x8be9ca0; frame = (0 0; 320 10); autoresize = LM+RM+BM; userInteractionEnabled = NO; layer = <CALayer: 0x8be9ce0>> - shading-top-Table.png"
    )
 self.headerViewofWholeTable.subviews: (
        "<UILabel: 0x8bf9770; frame = (50 15; 250 21); text = 'Pull Down to Refresh'; clipsToBounds = YES; opaque = NO; autoresize = RM+BM; userInteractionEnabled = NO; layer = <CALayer: 0x8bf97e0>>",
        "<UILabel: 0x8b63aa0; frame = (50 35; 257 20); text = 'last updated'; clipsToBounds = YES; opaque = NO; autoresize = RM+BM; userInteractionEnabled = NO; layer = <CALayer: 0x8b63b10>>",
        "<UIView: 0x8b63b80; frame = (20 11; 22 54); autoresize = RM+BM; layer = <CALayer: 0x8bf6c40>>"
    ) 
```

所以你看，

那 `self.delegate.tableView.tableHeaderView= self.headerViewofWholeTable`; 删除 self.delegate.tableView.tableHeaderView 指向的视图。然而，观点

```
"<UIImageView: 0x8be9ca0; frame = (0 0; 320 10); autoresize = LM+RM+BM; userInteractionEnabled = NO; layer = <CALayer: 0x8be9ce0>> - shading-top-Table.png" 
```

不应该消失，因为它由 self.headerViewofWholeTable 保留

那么任何人都可以解释发生了什么吗？

我可以很容易地绕过这个问题，但我想知道更多实际发生的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T05:00:45.180

该`UITableView setTableHeaderView`方法的实现（您在第二行中调用）很可能假定当前标题视图仍然是表的子视图。因此，当您尝试分配新的标题视图时，表格视图首先从其父视图中删除当前标题（不知道它已被移动到您的其他视图）。表格视图并不期望其标题视图已移动到新视图。因此，它最终会从您的视图中删除标题`headerViewofWholeTable`视图。

# android - Android：按钮单击不起作用

> ID：13042944
> 
> 赞同：2
> 
> 时间：2012-10-24T04:14:48.347
> 
> 标签：android

我的应用程序是输入金额，计算金额并显示金额。

我正在使用 Android SDK 16。当我输入金额并单击计算按钮时，我得到了

SPAN_EXCLUSIVE_EXCLUSIVE 跨度不能有零长度。

我的活动课是

```
 public class ChapterTwo extends Activity {

public static final String tag = "Chapter 2";

static{
    StrictMode.ThreadPolicy policy = new     
        StrictMode.ThreadPolicy.Builder().permitAll().build();

    StrictMode.setThreadPolicy(policy);
}

@SuppressWarnings("unused")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_chapter_two);

    final EditText mealpricefield = (EditText) findViewById(R.id.mealprice);
    final TextView answerfield = (TextView) findViewById(R.id.answer);
    final Button button = (Button) findViewById(R.id.calculate);

            button.setOnClickListener(new Button.OnClickListener() {

            public void onClickView(View v) {
            try {
                Log.i(tag, "onClick Invoked");
                // grab the meal price from UI
                String mealprice = mealpricefield.getText().toString();
                Log.i(tag, "meal price is [" + mealprice + "]");
                String answer = "";
                // check to see if meal price contains $
                if (mealprice.indexOf("$") == -1) {
                    mealprice = "$" + mealprice;
                }

                float fmp = 0.0F;
                // get currency formatter;
                NumberFormat nf = java.text.NumberFormat
                        .getCurrencyInstance();
                // grab the input meal price
                fmp = nf.parse(mealprice).floatValue();
                // let's give a nice tip
                fmp *= 1.2;
                Log.i(tag, " Total meal price Unformatted is [" + fmp + "]");
                // format our result
                answer = " Full Price, Including the 20% Tip is "
                        + nf.format(fmp);
                answerfield.setText(answer);
                Log.i(tag, " On Click Complete");

            } catch (java.text.ParseException e) {

                Log.i(tag, "Parse Exception caught");
                answerfield.setText("Failed to Parse the Exception");
            }

            catch (Exception e) {
                Log.e(tag, "Failed To calculate the tip" + e.getMessage());
                e.printStackTrace();
                answerfield.setText(e.getMessage());

            }

        }

        public void onClick(View v) {
            // TODO Auto-generated method stub

        }
    });
}} 
```

我的布局是

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Chapter 2 Android Tip Calculator"
    tools:ignore="HardcodedText" />

<EditText
    android:id="@+id/mealprice"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10" 
    android:inputType="text">

    <requestFocus />
</EditText>

<Button
    android:id="@+id/calculate"

    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Calculate Tip" />

<EditText
    android:id="@+id/answer"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10" /> 
```

我在日志 cat 中收到以下错误

```
10-23 20:19:26.232: E/Trace(699): error opening trace file: No such file or directory (2)
10-23 20:19:27.092: D/gralloc_goldfish(699): Emulator without GPU emulation detected.
10-23 20:19:33.262: W/IInputConnectionWrapper(699): showStatusIcon on inactive InputConnection
10-23 20:24:22.106: I/Choreographer(699): Skipped 30 frames!  The application may be doing too much work on its main thread.
10-23 20:27:52.824: I/Choreographer(699): Skipped 37 frames!  The application may be doing too much work on its main thread.
10-23 20:31:13.323: E/SpannableStringBuilder(699): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
10-23 20:31:13.323: E/SpannableStringBuilder(699): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
10-23 20:31:32.552: I/Choreographer(699): Skipped 35 frames!  The application may be doing too much work on its main thread.
10-23 20:39:44.723: I/Choreographer(699): Skipped 63 frames!  The application may be doing too much work on its main thread. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T05:21:14.387

除了您发布的代码之外，还有更多代码吗？

以下是我注意到的几件事：

1.  当您按下按钮时，您的代码不会做任何事情，因为您没有在上面指出的 onClick(View v) 方法中做任何事情。你有一个没有人调用的 onClickView(View v) 函数。您应该将代码从 onClickView() 移动到 onClick() 并摆脱 onClickView() 方法（或者您可以只从 onClick 函数调用 onClickView）。

2.  如果您如上所述移动代码，您的代码将起作用，我什至刚才自己测试了它以再次检查。（您在上面的复制粘贴代码中缺少一个 </LinearLayout> 标记，但我假设您拥有它）。

3.  您发布的错误日志显示 SpannableStringBuilder 的错误。但是您在代码中的任何地方都没有使用 SpannableStringBuilder，所以要么 a）您有其他代码，要么 b）此错误与您的代码无关。

当你按下按钮时会发生什么？应用程序会崩溃吗？当您看到问题时，您使用什么值进行测试？日志中是否有任何其他具有您的标签或应用程序名称的日志？您发布的日志不显示任何强制关闭日志或与您的应用程序相关的任何错误。

再想一想，你是说你的问题是当你按下计算按钮时，什么都没有发生？所以你假设你有一个错误，只是认为你在日志中看到的错误是你的代码不起作用的原因？如果是这种情况，您只需将 onClickView() 中的代码块移动到 onClick() 中并去掉 onClickView()。错误日志来自与您的代码无关的其他程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T04:25:00.937

您应该在主类中声明所有视图并在 onCreate() 方法中对其进行初始化：

```
public class ChapterTwo extends Activity {

public static final String tag = "Chapter 2";
EditText mealpricefield;
TextView answerfield;
Button button;
.
.
.
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_chapter_two);

    mealpricefield = (EditText) findViewById(R.id.mealprice);
    answerfield = (TextView) findViewById(R.id.answer);
    button = (Button) findViewById(R.id.calculate);
.
.
.
} 
```

此外，您放置在 onClickView(View v) 中的代码应该位于代码下方的 onClick(View v) 中：

```
@Override
public void onClick(View v) {
        // TODO Auto-generated method stub

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T04:58:39.823

乍一看，这可能是您的问题。

Log.i(tag, "未格式化的总餐价为 [" + fmp + "]");

fmp 是一个浮点数......您正在将它添加到一个字符串中。

将此行注释掉，看看它是否有效。

# jquery - jQuery 与幻灯片放映和其他 CSS 相混淆

> ID：13042952
> 
> 赞同：0
> 
> 时间：2012-10-24T04:15:17.753
> 
> 标签：jquery, html, css

我正在使用 Cargo Collective 托管[http://cargocollective.com/amytdatta/biography](http://cargocollective.com/amytdatta/biography)

我有一些 jQuery 来在传记页面的底部实现一个简单的真/假游戏。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
$('document').ready(function(){
    $(".showtrue").click(function() { 
        $('.false').css('color','#f5f5f5');
        return false;        
    });

    $(".showfalse").click(function() { 
        $('.false').css('color', '#666666');
        return false;        
    });
});

    $("a").click(function (e) {
        e.preventDefault();
    }); 
```

问题是这段代码似乎阻止了幻灯片正确显示（也在生物页面上）。3 幅图像的缩略图显示不正确，单击上一个/下一个按钮的图像将我带回 Cargo 主页。

这是幻灯片放映的CSS：

```
/* 
* Slideshows
*/

.slideshow_nav {
color: #999999;
font-size: 11px;
padding-bottom: 10px;
}

.slideshow_nav a {
color: #666666;  
text-decoration: none;  
}

.slideshow_nav a:hover {
background: none !important;
color: #999999;
text-decoration: none;
}

.slideshow_nav a:active {
color: #ff3300;
}

.slideshow_count {
color: #999999;
font-size: 11px;
}

.slideshow_wrapper {
clear: both;
margin: 0 15px 15px 0;
}

#slideshow_container img {
margin: 0;
}

.slideshow_wrapper a, 
.slideshow_wrapper a:hover, 
.slideshow_wrapper a:active {
background: none !important;
}

.slideshow_thumbs {
margin: 7px 0 7px -3px;
}

ul.slideshow_thumbs {
margin: 0;
padding: 0;
}    

.slideshow_thumb {
float: left;
list-style: none;
margin: 0 0 0 -3px;
padding: 0 7px 10px 0;
}

.slideshow_thumb a {
background: none;
border: 1px solid transparent;
display: block;
padding: 2px;
}

.slideshow_thumb a:hover {
background:none;
border: 1px solid #cccccc;
}

a.activeSlide {
background:none;
border: 1px solid #cccccc;
}

.slideshow_thumb a:active, 
a.activeSlide:active {
background: transparent;
border: 1px solid #666666;
}

.slideshow_thumb img {
border: 0;
display: block;
margin: 0;
height: 60px;
}

.slideshow_caption {
clear: both;
display: block;
font-size: 11px;
padding: 5px 0 5px 0;
} 
```

jQuery 似乎也覆盖了一些 CSS。

例如，我的顶部导航栏不再像应有的那样固定在适当的位置。

```
#nav_wrapper {
background: #f5f5f5;
height: 50px;
position: fixed;
left: 0; right: 0; top: 0;
z-index: 999;
}

.feed_nav {
border-bottom: 2px solid #cccccc;
border-bottom: 2px solid rgba(0,0,0,0.20);
font-family: Helvetica, Arial, sans-serif;
font-size: 12px;
height: 50px;
line-height: 50px;
margin: 0 auto 0 auto;
padding: 0 35px 0 35px;
position: relative;
width: 905px;
z-index: 999;
}

.feed_nav br {
display: none !important;
}

.feed_nav div {
float: left;
}

.page_nav {
background: f5f5f5;
max-width: ;
overflow: hidden;
} 
```

此外，启用 jQuery 时，顶部导航栏和页面标题之间的间隙似乎会增加。

这是我的内容容器、单个内容条目和标题的 CSS

```
#content_container {
clear: both;
margin: 50px auto 25px auto;
position: relative;
width: 975px;
z-index: 10;
border-bottom: 1px dotted #cccccc;

}

.entry {
background: #f5f5f5;
border-bottom: 0 solid #cccccc;
clear: both;
padding: 35px 35px 50px 35px;
margin: 0 0 0 0;
width: 905px;
}

.project_title {
font-family: Helvetica, Arial, sans-serif;
font-size: 32px;
line-height: 50px;
padding: 0 0 36px 0;
text-rendering: optimizeLegibility;
width: 560px;
} 
```

任何有关解决此问题的建议将不胜感激。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T04:27:38.310

将您的 jquery 文件声明到其他文件的顶部

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script>
<script type='text/javascript' src='/_js/cargo.jquery.package.js?12.09.14'></script>
<script type='text/javascript' src='/_js/cargo.site.package.js?12.09.14'></script>
<script type='text/javascript' src='/_js/cargo.tools.package.js?12.09.14'></script>
............... 
```

# safari - Safari 页脚上的图标具有意外的垂直平铺，应显示在行中

> ID：13042957
> 
> 赞同：4
> 
> 时间：2012-10-24T04:16:00.530
> 
> 标签：safari, image, css

我试图将 twitter/facebook 图标添加到网站页脚，就像 side.cr 页脚一样。我让一切正常，除了 safari 有意想不到的 twitter 和 facebook 垂直瓷砖。我试图上传截图，但我是新用户，所以现在不能这样做。

所以我一直在寻找答案并在这里找到了这个问题，[<img> 元素是块级还是内联级？](https://stackoverflow.com/questions/2402761/img-elements-block-level-element-or-inline-element)

所以我又去 side.cr 看看它的 css 确实有用户代理样式表。

我将这行代码添加到我的 css 中：

```
.footer ul li img.t, li img.f {
    width: 40px;
    vertical-align: middle;
    display: inline-block;
} 
```

它解决了这个问题。

但我有几个问题：

1.  为什么 side.cr 的 css 显示为不可编辑的用户代理，而我必须将该 display-inline 添加到我的 css 中？
2.  “显示：内联块”如何解决问题？

注意：当鼠标移到灰色的twitter上时，它会触发swap.js，将图标图像更改为彩色的，但在safari中，突出显示的图标比灰色的要大。我想我几乎知道答案了。只需要一个知道这背后所有问题的人。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:00:58.967

解决方案：要解决此问题，请确保设置图像的高度和宽度，使其在加载过程中不会改变。

```
<img src="http://www.side.cr/images/contact/twitter_off.svg"
     class="twitter_bird img_swap" height="52px" width="52px" /> 
```

或者

```
.twitter_bird {
    height:50px;
    width:50px
} 
```

说明：当您切换图片名称时，safari 开始加载图片，但在下载完成之前它不知道高度或宽度。如果设置高度和宽度，它不会从 0px 增长到 52px。

# java - 使用静态变量节省数组空间

> ID：13042958
> 
> 赞同：2
> 
> 时间：2012-10-24T04:16:23.883
> 
> 标签：java, memory-management

我正在处理单个数据结构的一些相对较大的实例数组。每个实例由大约六个字段组成。数组占用了大量空间，我发现即使在使用 7 GB 堆空间的 vm 运行时，我的开发环境也会死机。虽然我可以搬到更大的机器上，但我也在探索如何在不影响性能的情况下节省空间。在检查数据时，我注意到数据中有大量冗余。对于大约 80% 的数据，六个字段中有四个具有相同的值。

这给了我一个想法，我可以分离这些具有冗余信息的实例，并将它们放在数据结构的特殊形式（原始数据结构的扩展）中，其中四个字段包含相同信息的静态字段。我的假设是静态字段只会在内存中实例化一次，因此即使这些信息由 100K 对象共享，这些字段也会占用与仅实例化一个数据结构时相同的内存。因此，我应该能够实现显着的内存节省。

这是一个正确的假设吗？

谢谢，

艾略特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T04:26:44.133

我不知道您的特定数据结构和可能的算法来构建享元，但我会建议一个： [http ://en.wikipedia.org/wiki/Flyweight_pattern](http://en.wikipedia.org/wiki/Flyweight_pattern)

该模式非常接近您正在考虑的解决方案，并为您提供了“如何获取数据”的良好分离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T04:24:29.187

如何维护地图中冗余的字段并且只引用数组中的这些值。可以通过减小单个数据结构的大小来节省空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T04:33:45.270

尝试使用 HashMap 进行存储。这就是快速找到相等对象的方法。您需要考虑如何定义对象的 hashCode 函数。

# html - HTML 表单字段在 chrome 中不可用，在 IE 中有效

> ID：13042962
> 
> 赞同：0
> 
> 时间：2012-10-24T04:16:58.753
> 
> 标签：html, css

我正在构建的网站的管理员登录表单无法在 chrome 中运行，但在 IE 中运行良好。这可能是什么原因造成的？我在这里发现了另一个关于类似问题的问题，但它的答案对我不起作用。

预览：[http ://a.emutek.net/site/admin/](http://a.emutek.net/site/admin/)

HTML：

```
<div id="body">
        <div class="divhead" id="adminhead">Login to website management:</div>
        <div id="adminlogin">
            <form name="adminlogon" action="login.do.php" method="post">
                <table border="0">
                    <tr>
                        <td>
                            Username: 
                        </td>
                        <td>
                            <input type="text" name="user">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Password: 
                        </td>
                        <td>
                            <input type="password" name="pwd">
                        </td>
                    </tr>
                    </table>
                <input type="submit" value="Submit">
            </form>
        </div>
</div> 
```

CSS：

```
 #body {
        z-index: -1;
        position: relative;
        top: -6px;
        padding: 7px;
        background-color: white;
        border-radius: 6px;
}

.divhead{
    background-color: #111;
    color: #CCC;
    text-transform: uppercase;
    font: bold 12px Arial, Helvetica;
    text-decoration: none;
    padding: 3px;
    margin-bottom: 5px;
    border-radius: 6px;
}
#head{
    border-radius: 6px;
    margin-bottom: -10px;
    padding: 5px;
    background-image:url('../img/bg_header.png');   
}
#adminlogin{
    margin-left: 40%;
    z-index: 10;

}
#adminhead{
    margin-top: 20px;
    margin-bottom: 10px;
    width: 700px;
    margin-right: auto;
    margin-left: auto;
    padding-left: 20px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T04:20:41.893

删除 它会`position: relative;`起作用`#body`

你可以看到它在 chrome 中的光标也在 firefox 和 safari 中测试过

![在此处输入图像描述](../Images/56be178dd4a7d26707b3fadc9613cd35.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T04:32:00.887

与其将`#body`其定位在下方`#nav`，不如将其定位`#nav`在上方`#body`。

#body{ ~~位置：相对；z 指数：-1；~~ ... }

```
#nav{
    position: relative;
    z-index: 1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T04:27:20.357

您需要将正文中的 z 索引 css 从 -1 更改为正数

```
body {
    z-index: 1111;
} 
```

# xcode - Xcode 4：如何在文件模板中引用项目变量/宏？

> ID：13042974
> 
> 赞同：9
> 
> 时间：2012-10-24T04:19:04.150
> 
> 标签：xcode, xcode4

好的，所以，我有一个相对复杂的项目模板层次结构，它定义了与代码样式相关的宏和变量（在同一行或新行上的卷曲、缩进等）。 [我的代码样式模板可能会提供更多上下文](https://github.com/nevir/xcode-templates/blob/xcode-4.5/Project%20Templates/Common/Code%20Style.xctemplate/TemplateInfo.plist)

生成项目时效果很好。

但是，在构建项目后生成新文件时，我没有看到重用这些宏/变量的明确路径。迄今为止的发现：

*   在文件模板中引用时，不会替换在项目级别定义的宏和变量

*   文件模板中的弹出选项定义似乎不支持复杂的定义（例如，当下拉菜单处于给定状态时定义宏）

*   项目变量*确实*似乎成为文件模板向导中同名选项的默认值

*   文件模板似乎无法将其他模板定义为祖先

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T18:22:37.303

输入以下行： defaults write com.apple.Xcode PBXCustomTemplateMacroDefinitions '{ "ORGANIZATIONNAME" = "Your Company Name" ; }' 进入终端窗口，用您选择的任何内容替换“您的公司名称”。您还可以在“属性列表编辑器”中打开位于 ~/Library/Preferences/com.apple.Xcode 的文件，并将您的公司名称作为字符串值插入字典“PBXCustomTemplateMacroDefinitions”下的键“ORGANIZATIONNAME”。如果它不存在，您可能需要在顶层创建“PBXCustomTemplateMacroDefinitions”。

# c# - 异常处理实践顶级与每个功能

> ID：13042975
> 
> 赞同：5
> 
> 时间：2012-10-24T04:19:10.163
> 
> 标签：c#, .net, exception

我见过几种异常处理方法。我见过的两种最常见的模式是：

*   尝试捕获每个函数，记录异常并重新抛出
*   尝试在最顶层捕获（如主函数），记录异常并重新抛出

如果有的话，哪个是更好的做法？或者在什么情况下你会选择一种方法而不是另一种方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T04:32:51.773

这取决于您的应用程序并且是一种设计选择，尽管选项 1 非常混乱。您应该只捕获您准备以某种方式处理的异常，而不是任意捕获每一个。在大多数语言中，异常都会有一个堆栈跟踪供您查看，因此不需要在每个级别进行日志记录。当我说以某种方式处理时，可能是记录并重新抛出，或者可能是记录，通知用户一些错误，然后继续运行

作为旁注，您不应该在代码中使用异常作为逻辑。如果您发现自己使用 try catch 块作为流控制，那么您应该考虑重新设计。例外就是这样，例外。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T04:32:14.530

选项 1 被认为是*不好的做法*，应该避免，而选项 2 是您应该遵循的最佳做法。

异常处理的原则是默认让异常自然抛出并在顶层捕获它们，就像选项 2 一样。只有一种情况你应该捕获异常是你想做一些基于异常的业务逻辑。如果您不处理业务逻辑，请不要抓住。

选项1的更多缺点：

1.  大量的*try-catch*和*re-throw*会降低你的代码的可读性，

2.  考虑在每个方法中捕获异常并记录它们将使日志文件记录相同的异常信息，这是不必要的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T04:25:34.210

我经常看到的做法是：

捕捉那些你准备好处理的异常。例如，插入重复的主键，捕获它，并向用户显示适当的消息，以便为记录输入唯一的内容。

对于应用程序的其余部分，库中不会有异常处理。因此，如果发生异常，它可能会弹出到上层，在那里可以进行适当的处​​理。

您可能会看到这篇文章：[.NET 中的异常处理最佳实践](http://www.codeproject.com/Articles/9538/Exception-Handling-Best-Practices-in-NET)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T04:23:55.383

我通常会完全避免选项 1，因为我看不到真正记录异常通过的每个函数的价值。你通常主要关心异常发生的地方。可能有一个案例可以知道它是如何到达那里的，但你可以从异常调用堆栈中得到它。

我用于处理异常的原则是仅在我对其进行处理时才捕获它们。如果 catch 的唯一目的是重新投掷，那么接住它就没有意义了。但是，如果我确实抓住了它，然后记录它/用自定义的特定异常包装它/处理它，这就是一个足够好的理由。我通常发现此类任务并非在每个功能中都完成，但最常见的是在层/层边界

# c# - 使用 xaml 显示项目层次结构

> ID：13042976
> 
> 赞同：1
> 
> 时间：2012-10-24T04:19:14.747
> 
> 标签：c#, wpf

我有一个从这样的类创建的对象层次结构：

```
public class MyTreeItem
{
    public MyTreeItem Parent{get;set}
    public IList<MyTreeItem> Children{get;set;}
    public string Description{get;set;}
    //Other properties.
} 
```

假设我有一个`MyTreeItem`s 的对象树，如下所示：

```
 A
   / \
  B   C
 /\    \
D  E    F 
```

在我的程序中，我将从数据库查询中获取上述层次结构中的一些对象。该项目将属于树的第二或第三级（`B, C, D, E or F`在这种情况下）。我想使用`Parent`属性显示获取对象的完整树路径（有点像 Windows 资源管理器中显示路径的方式。）。假设我选择了该项目`B`，那么路径应该显示为`A -> B`. 如果我选择`E`，路径应该是`A -> B -> E`。有没有办法在 XAML 中完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T04:34:19.373

因此，如果您想将其显示为字符串，那么您需要做的就是设计一个属性，该属性根据父级返回面包屑轨迹...

注意：这假设'A'和'B'是`Description`属性......

```
public string Breadcrumb
{
    get
    {
        string breadcrumb = Description;

        if(Parent === null)
            return breadcrumb;

        for(MyTreeItem currentItem = Parent; currentItem != null ; currentItem = currentItem.Parent)
        {
            breadcrumb = string.Format("{0) -> {1}", currentItem.Description, breadcrumb);
        }

        return breadcrumb;
    }
} 
```

基本上逻辑是继续`->`在当前面包屑的前面添加父级的描述（用 格式化），`for`然后循环将 currentItem 设置为`Parent`（在顶层应该为 null）

例如，对于节点 E，它将这样构建面包屑：

> 循环 0：E
> 循环 1：B -> E
> 循环 2：A -> B -> E

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T06:18:11.820

如何使用`IValueConverter`并将其绑定到`TextBlock`文本 DP。

```
public class MyConverter : IValueConverter
{
   public object Convert(object value, Type targetType, object parameter, 
                                      System.Globalization.CultureInfo culture)
   {
      string hierarchy = String.Empty;
      if(value != DependencyProperty.UnsetValue)
      {
         MyTreeItem item = value;
         hierarchy = value.Description;
         MyTreeItem parentItem = item.Parent;
         while(parentItem != null)
         {
            hierarchy = string.Format("{0) -> {1}", parentItem.Description, 
                                                       hierarchy);
            parentItem = parentItem.Parent;
         }
      }
      return hierarchy;
   }

   public object ConvertBack(object value, Type targetType, object parameter,
                                  System.Globalization.CultureInfo culture)
   {
      throw new NotImplementedException();
   }
} 
```

这是你的 XAML -

```
<TextBlock Text="{Binding SelectedItem,
                          Converter={StaticResource MyConverter}}"/> 
```

# java - 在 Java 中的两个日期之间的 Millis，忽略假期和周末

> ID：13042979
> 
> 赞同：1
> 
> 时间：2012-10-24T04:19:29.170
> 
> 标签：java, datediff, weekend

我需要的是减去两个日期并返回毫秒的持续时间，忽略节假日或工作日。

我检查了[http://objectlabkit.sourceforge.net/](http://objectlabkit.sourceforge.net/)但我似乎不支持以这种方式减去日期（虽然我可能错过了一些东西......）

Java 生态系统中的哪个库可以做到这一点？

# iphone - 在 NSDateComponents 中，你怎么知道它是 AM 还是 PM？

> ID：13042980
> 
> 赞同：8
> 
> 时间：2012-10-24T04:19:41.967
> 
> 标签：iphone, objective-c, time, nsdate, nsdatecomponents

当我使用 NSDateComponents 时，我如何知道我将时间设置为上午还是下午？还是 24 小时制？这是代码：

```
NSDate *morningEnd = [NSDate date];
NSDateComponents *components1 = [gregorian components:NSUIntegerMax fromDate:morningEnd];
[components1 setHour:11];
[components1 setMinute:59]; 
```

我如何知道我将其设置为上午 11:59 还是晚上 11:59？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-24T04:23:31.950

小时定义为 24 小时。0 - 11 将是上午，12 - 23 将是下午。

**编辑：**

根据以下评论将我的范围更正为 0 - 23。谢谢大家纠正我。

# javascript - 基于 KML 数据的中心地图

> ID：13042982
> 
> 赞同：-1
> 
> 时间：2012-10-24T04:19:49.273
> 
> 标签：javascript, google-maps-api-3, kml

我正在从后端生成的 kml 提要的地图上显示一些数据，我希望能够根据 KML 信息窗口中的数据控制地图（描述）

例如，我有一个来自 KML 中某个点的信息窗口，它汇总了所有数据，我想单击一个链接（例如一个名称），这将使地图居中到某个纬度、经度。

这可能吗，或者最好的方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:34:40.193

在使用 KML 信息创建链接时，我只需添加两个属性（了解您的 KML 数据中确实有 lat/lng 坐标）。

例如：

```
<a href='#' class='kml-link' data-lat='12.3456' data-lng='23.4567'>Click me to center on KML point</a> 
```

然后执行以下操作：

```
$('.kml-link').click(function () {

    var latLng = new google.maps.LatLng($(this).attr('data-lat'), $(this).attr('data-lng'));
    map.setCenter(latLng);
}); 
```

希望这可以帮助！

# spring-mvc - 想要在 JSP 中显示最后修改的文件列表

> ID：13042983
> 
> 赞同：2
> 
> 时间：2012-10-24T04:20:16.940
> 
> 标签：spring-mvc

我正在使用 spring mvc 3 并且我的控制器正在将一个列表从控制器传递到 JSP：

列出合适的匹配 = 新的 ArrayList(); ...//将文件添加到此列表中的一些代码 model.addAttribute("lists", suitMatches);

在我的jsp中：

```
<tr>
<td class="readOnly">${list.name}</td>
<td class="readOnly">${idiomSearch.testCaseID}</td>
<td class="readOnly">${list.lastModified}</td>
<td class="readOnly"><a href="downloadFile.htm?testID=${list.name}">Download</a></td>
</tr> 
```

但我收到错误：

错误 500：org.springframework.web.util.NestedServletException：请求处理失败；嵌套异常是 javax.el.PropertyNotFoundException：在类型 java.io.File 上找不到属性“lastModified”

谁能告诉我，list.lastModified 怎么不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:46:43.227

根据您的 Web 服务器使用的[JSP 表达式语言](http://en.wikipedia.org/wiki/Unified_Expression_Language)的版本，您可能无法使用此语法访问*非 getter方法。*

`${list.name}`因为*File*有一个名为[`getName()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#getName%28%29). 但是，*File*没有方法 called `getLastModified()`，该方法只是被调用，[`lastModified()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#lastModified%28%29)因此在调用不是 getter 的方法时必须添加括号。

所以代码应该被阅读`${list.lastModified()}`，并且您将需要使用至少 v2.2 的 EL jar，因此这将需要显式包含在 Web 应用程序中，或者使用已经包含该库的 servlet 容器。

el 语法的一个很好的来源可以在 stackoverflow 的[el 标签描述中找到](https://stackoverflow.com/tags/el/info)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-06T02:20:34.950

您可以为此使用 JSTL 和表达式语言的组合

```
<jsp:useBean id="dateValue" class="java.util.Date"/>
<jsp:setProperty name="dateValue" property="time" value="${file.lastModified()}"/>

<fmt:formatDate pattern="yyyy-MM-dd HH:mm:ss z" value="${dateValue}" /> 
```

# ruby-on-rails - 测试这个帖子模型的草稿属性（Rspec + Capybara）

> ID：13042984
> 
> 赞同：0
> 
> 时间：2012-10-24T04:20:18.303
> 
> 标签：ruby-on-rails, rspec, capybara

我想使用[Rspec](https://github.com/rspec/rspec)和[Capybara](https://github.com/jnicklas/capybara)编写测试。

我有一个`Post`模型，我想给`draft`它添加一个属性。如果用户选中该字段，则帖子将保存为草稿 ( `draft = true`)。只有具有 he 属性`draft = false`的帖子才会显示在帖子索引页面中。带有的帖子`draft = true`只会显示在创建该帖子的用户的页面中。

我这辈子从来没有做过**Rspec + Capybara**测试。所以我想知道是否有人可以告诉我如何开始或给我一个例子。提前致谢！

架构.rb：

```
 create_table "posts", :force => true do |t|
    t.string   "title"
    t.string   "content"
    t.integer  "user_id"
    t.datetime "created_at",                               :null => false
    t.datetime "updated_at",                               :null => false
    t.integer  "comments_count",        :default => 0,     :null => false
    t.datetime "published_at"
    t.boolean  "draft",                 :default => false
  end 
```

（顺便问一下，我需要发布模型、控制器或视图页面吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:42:50.190

要添加到 new2ruby 的答案，您还可以在集成测试中使用 capybara 提供的功能/场景别名。

我觉得它读起来很好：

```
require 'spec_helper'

feature 'Visitor views posts' do
    scenario 'shows completed posts' do 
        post = FactoryGirl.create(post)
        visit posts_path

        page.should have_content(post.title)
    end

    scenario 'does not show drafts' do
        draft = FactoryGirl.create(draft)
        visit posts_path

        page.should_not have_content(draft.title)
    end
end 
```

[我最近写了一篇关于使用RSpec 和 Capybara 进行集成测试](http://robots.thoughtbot.com/post/33771089985/rspec-integration-tests-with-capybara)的“入门”博客文章。如果您对设置代码库有任何疑问，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T05:33:51.157

我一直在遵循模型测试和集成测试的基本模式。我也一直在使用 FactoryGirl 以及 rspec 和 capybara。所以...首先是我的工厂的样子：

```
FactoryGirl.define do
  factory :user do
    sequence(:email) { |n| "person#{n}@example.com" }
    password "foobar"
    password_confirmation "foobar"
  end

  factory :post do
    sequence(:title) { |n| "Test Title #{n}"}
    string "Test content."
    published_at Time.now()
    comments_count 0
    draft false
    association :user

    factory (:draft) do
      draft true
    end
  end
end 
```

然后我会制作一个模型规格文件（spec/models/post_spec.rb）：

```
require 'spec_helper'

describe Post do
  let(:post) { FactoryGirl.create(:post) }

  subject { post }

  it { should respond_to(:title) }
  it { should respond_to(:content) }
  it { should respond_to(:user_id) }
  it { should respond_to(:user) }
  it { should respond_to(:published_at) }
  it { should respond_to(:draft) }
  it { should respond_to(:comments_count) }

  its(:draft) { should == false }
  its(:comments_count) { should == false }

  it { should be_valid }
end 
```

然后我会做一个集成测试（spec/requests/posts_spec.rb）：

```
require 'spec_helper'

describe "Posts pages" do

  subject { page }

  describe "index page when draft == false" do
    let(:post)  { FactoryGirl.create(:post) }

    before { visit posts_path }

    it { should have_content(post.title) }
  end

  describe "index page when draft == true" do
    let(:draft) { FactoryGirl.create(:draft) }

    before { visit posts_path }

    it { should_not have_content(draft.title) }
  end
end 
```

您可以尝试通过[http://ruby.railstutorial.org/](http://ruby.railstutorial.org/)上的 Rails 教程进行操作，它使用 rspec、capybara 和 FactoryGirl 进行测试。

# php - 登录后在codeigniter中重写URL重写下一页的URL

> ID：13042986
> 
> 赞同：1
> 
> 时间：2012-10-24T04:20:36.737
> 
> 标签：php, .htaccess, codeigniter

我在这方面很难。好吧，我使用 codeigniter 创建了一个登录页面，其中整个路径将`http://localhost/CodeIgniter_2.1.3/index.php`被重写为`http://localhost/login`使用 .htaccess。好吧，它工作得很好，但问题是在我成功登录并且页面使用 redirect('next_page'); 重定向到下一页之后；因为 URL 将`http://localhost/CodeIgniter_2.1.3/index.php/next_page`代替`http://localhost/next_page`. 我还为那部分创建了一个重写规则：

```
RewriteRule ^events$ /CodeIgniter_2.1.3/index.php/events [L,NC] 
```

并且每当我在`http://localhost/next_page`地址栏中键入时，页面就会显示得很好（因为我没有在登录和此页面上应用任何规则。）我还尝试使用 redirect('http://localhost/events'); 这也可以正常工作，但我仍然知道这不是真正的解决方案。哦，顺便说一句，我的 .htaccess 存在于 wampserver 的 www 文件夹中。有什么办法可以解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T04:41:55.767

首先，您的域 ROOT 文件夹应该是 codeigniter 文件夹

例如

```
c:/www/codeigniter_2.1.3/ 
```

只需将文件从 codeigniter_2.1.3 移动到您的根文件夹或将 codeigniter 文件夹设为 ROOT。

然后使用正常的 .htaccess 重写为：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !^(index\.php|images|robots\.txt|css)
RewriteRule ^(.*)$ index.php/$1 [L] 
```

并使用 Codeigniter ROUTER 制作您想要的页面

例子：

```
$route['login'] = 'welcome/login'; 
```

将设置`http://localhost/login`页面从欢迎控制器登录功能加载。您可以在 config 文件夹中的 routes.php 中设置 $routes。

PS> 如果您不想在每个页面上看到 index.php，请检查您的 Config/config.php 中的 index_page 并将其设为空白。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T04:42:25.377

您可能只想将虚拟主机添加到本地主机。这是[关于如何做到这一点的一步一步的解释](http://www.trailheadinteractive.com/creating_multiple_virtual_sites_a_single_apache_install_windows_xp)。

现在您所要做的就是`.htaccess`在您的`CodeIgniter_2.1.3`文件夹中创建一个文件，该文件将仅删除`index.php`url 中的 。

# json - 如何使用新键将数据添加到 nsmutable 数组中？

> ID：13042989
> 
> 赞同：1
> 
> 时间：2012-10-24T04:20:54.603
> 
> 标签：json, nsmutablearray, nsarray, nsmutabledictionary

我是 iphone 开发的新手。最近我开始了一个项目。在 JSON 解析之后我得到了一个

```
NSmutablearray
(
    {
    "contest_description" = "  ";
    "contest_id" = 245;
    "contest_name" = "teating1 ";
    "contest_status" = Running;
    "creator_id" = "1716091396 ";
    "end_time" = "2012-10-26 04:10:25";
    "full_name" = "Adit Hasan ";
    "no_of_contestants" = 3;
    "no_of_days" = 5;
    "start_time" = "2012-10-21 04:10:24";
    "time_stamp" = "2012-10-24 04:11:09";
    "winner_user_id" = "Not Yet";
    },
    {
    "contest_description" = "  ";
    "contest_id" = 248;
    "contest_name" = "hhhhhhk ";
    "contest_status" = Running;
    "creator_id" = "1716091396 ";
    "end_time" = "2012-10-25 13:33:35";
    "full_name" = "Adit Hasan ";
    "no_of_contestants" = 2;
    "no_of_days" = 4;
    "start_time" = "2012-10-21 13:33:34";
    "time_stamp" = "2012-10-23 13:35:09";
    "winner_user_id" = "Not Yet";
    },
) 
```

如何添加新键`updated_image`并为该键赋值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T04:58:53.833

基本上你所拥有的是`NSArray`of `NSDictionary`，我不知道这是否`Mutable`就是为什么我将它们称为普通的 NS 不可变类，如果它们不可变，则需要将它们转换为`Mutable`对象。如下

`NSMutableArray *mutableArray = [NSMutableArray arrayWithArray:yourPreviousArray];`

`NSMutableDictionary *mutableDictionary = [NSMutableDictionary dictionaryWithDictionary:previousDictionary];`

无论如何，这就是我认为您的问题的解决方案是，正在考虑已经存在的数组（如果它不存在并不重要，只要您不向其中添加新字典）和字典是可变的。

```
for (NSMutableDictionary *dictionary in previousArray) {
    [dictionary setValue:updated_image forKey:@"updated_image"];
} 
```

如果您想`updated_image`稍后设置新键的值，请将其初始化为`NULL`并稍后设置。

你为什么不好好阅读以下内容

[NSArray 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/cl/NSArray)

[NSMutableArray 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)

[NSDictionary 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/occ/cl/NSDictionary)

[NSMutableDictionary 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableDictionary_Class/Reference/Reference.html)

还有那里的示例程序。

# .net - Window.GetWindow 在设计时返回 null

> ID：13042993
> 
> 赞同：0
> 
> 时间：2012-10-24T04:21:54.073
> 
> 标签：.net, wpf, wpf-controls

我花了几个小时弄清楚为什么 Window.GetWindow(this) 在我的自定义控件中返回 null。而且，它只发生在设计时。运行时很好。以下是重现问题的步骤：

第 1 步：在 VS2010 中创建一个 WPF 应用程序项目，以 .NET 4 为目标，命名为“TestGetWindow”

第 2 步：添加一个名为 MyTextBox 的自定义控件。下面是代码。

```
public class MyTextBox : TextBox
{
    public MyTextBox()
    {
        this.Loaded += new RoutedEventHandler(MyTextBox_Loaded);
    }
    void MyTextBox_Loaded(object sender, RoutedEventArgs e)
    {
        MessageBox.Show(Window.GetWindow(this) == null? "Window is NULL!" : "OK");
        DoTrace(this);
    }
} 
```

DoTrace() 方法未在此处显示。用于输出可视化树和逻辑树的trace信息，复制自[本帖](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/43b03840-7168-46dd-8980-963d2156deb7)。它将跟踪消息输出到日志文件。

然后，在 MainWindow.xaml 中使用 MyTextBox 控件：

```
<Window x:Class="TestGetWindow.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:TestGetWindow"    
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <local:MyTextBox x:Name="textBox1" Height="23" HorizontalAlignment="Left" Margin="52,62,0,0" VerticalAlignment="Top" Width="120" />
    </Grid>
</Window> 
```

现在全部保存，关闭 Visual Studio 中的 MainWindow.xaml 设计器/编辑器，构建项目，然后重新打开 MainWindow.xaml。现在检查跟踪日志文件，它显示每个元素都没有父窗口：

```
========= VISUAL TREE FOR MyTextBox ============
MyTextBox has no window.
Grid has no window.
ContentPresenter has no window.
Grid has no window.
Border has no window.
WindowInstance has no window.
AdornerDecorator has no window.
Grid has no window.
Border has no window.
Border has no window.
DockPanel has no window.
Border has no window.
Grid has no window.
WindowInstance has no window.
Border has no window.
DesignerBackground has no window.
FormDesignerView has no window.
Viewport has no window.
ScrollContentPresenter has no window.
Grid has no window.
ScrollViewer has no window.
Grid has no window.
ContentPresenter has no window.
ContentRoot has no window.
========= LOGICAL TREE FOR MyTextBox ============
MyTextBox has no window.
Grid has no window.
WindowInstance has no window.
Border has no window.
DesignerBackground has no window.
FormDesignerView has no window.
Viewport has no window.
ScrollViewer has no window.
Grid has no window.
ContentRoot has no window. 
```

但是在运行时，日志显示每个元素都有一个窗口。我错过了什么？为什么 Window.GetWindow() 在设计时总是返回 null？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:01:01.700

好的！我得到了它。我不应该在我的自定义控件中在设计时调用 Window.GetWindow()。我使用以下代码来解决我的问题：

```
if (System.ComponentModel.DesignerProperties.GetIsInDesignMode(this)) 
{
   return;
} 
```

# ios - 如何创建钛视图代理方法并从钛项目访问它？

> ID：13042996
> 
> 赞同：1
> 
> 时间：2012-10-24T04:22:02.623
> 
> 标签：ios, module, proxy, titanium, appcelerator

这些天我正在学习钛iOS模块开发。我在 View Proxy 中创建公共方法并从 Titan 模块访问它时遇到问题。

我在 View 类中有一个方法。我需要在用户与之交互时访问该方法

例子 ：

```
gaugeview.addEventListener('touchmove', function (e) {

    var thetaValue = gauge.Theta; // Theta is method
    Ti.API.info('theta value touchmove'+thetaValue);

}); 
```

我应该在这里使用视图代理方法，但我不知道如何实现它。请帮助我学习这些东西。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T04:28:09.140

要使用视图代理，您应该创建 iOS 模块开发。您的所有公共功能都在那里定义。这是帮助您学习模块开发的链接。 [http://docs.appcelerator.com/titanium/latest/#!/guide/iOS_Module_Development_Guide](http://docs.appcelerator.com/titanium/latest/#!/guide/iOS_Module_Development_Guide)

和

这是一个创建简单iOS模块的教程

[http://iosmuncher.blogspot.in/2012/01/extending-titanium-project-with-ios.html](http://iosmuncher.blogspot.in/2012/01/extending-titanium-project-with-ios.html)

# sql - 如何在可能为空值的字段上创建唯一索引（Oracle 11g）？

> ID：13042997
> 
> 赞同：11
> 
> 时间：2012-10-24T04:22:12.837
> 
> 标签：sql, database, oracle, indexing

这是具有 3 列（ID、UNIQUE_VALUE、UNIQUE_GROUP_ID）的示例表

我希望可以允许以下记录：

```
(1, NULL, NULL)
(2, NULL, NULL) 
```

或者

```
(3, NULL, 7)
(4, 123, 7) 
```

或（注意：这种情况在**nor****中是不允许的`unique index``unique constraint`**）

```
(5, NULL, 7)
(6, NULL, 7) 
```

这些是不允许的：

```
(7, 123, 7)
(8, 123, 7) 
```

我在最后 2 列上创建了唯一索引，但只能允许前 2 个示例。

只有当两者都不为空时，是否可以让 db 检查这 2 列的唯一性？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-24T08:54:49.017

`UNIQUE_VALUE`您只想对两者`UNIQUE_GROUP_ID`都不为空的行强制执行唯一性。为此，您可以使用唯一的基于函数的索引：

```
CREATE UNIQUE INDEX func_based_index ON the_table
  (CASE WHEN unique_value IS NOT NULL
         AND unique_group_id IS NOT NULL
        THEN UNIQUE_VALUE || ',' || UNIQUE_GROUP_ID
   END); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-27T19:13:28.073

您可以使用 nvl 函数来避免空值并改为放置不同的值，

```
create unique index func_idx on TEST_TABLE (nvl(UNIQUE_VALUE,1), UNIQUE_GROUP_ID); 
```

缺点是您的索引会更大，如果您想搜索空值，则必须使用 nvl 函数以避免 table_access_full。

此外，所有空值都将位于 index 的一个分支下，因此请确保您的直方图已更新。

我希望这能帮到您 ：）