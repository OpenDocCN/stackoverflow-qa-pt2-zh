# StackOverflow 问答 15869000-15869999

# c# - EF5 代码优先派生类外键/引用问题

> ID：15869000
> 
> 赞同：1
> 
> 时间：2013-04-07T23:16:47.933
> 
> 标签：c#, .net, entity-framework, entity-framework-5, code-first

我有以下内容：

```
public abstract class InputBase
{
    public virtual ICollection<Data> Data { get; set; }
}

public class InputA: InputBase { }

public class InputB: InputBase { }

public abstract class Data
{
    public virtual InputA InputA { get; set; }
    public virtual InputB InputB { get; set; }
} 
```

InputA 和 InputB 都使用 InputBase 的数据集合。

数据将始终具有 InputA 和 InputB 的实例。

我尝试通过以下方式将其链接起来：

```
modelBuilder.Entity<Data>()
    .HasRequired(data => data.InputA)
    .WithMany(input => input.Data)
    .WillCascadeOnDelete(false);

modelBuilder.Entity<Data>()
    .HasRequired(data => data.InputB)
    .WithMany(input => input.Data)
    .WillCascadeOnDelete(false);

modelBuilder.Entity<InputA>()
    .HasRequired(input => input.Data)
    .WithRequired(data => data.InputA)
    .WillCascadeOnDelete(false);

modelBuilder.Entity<InputB>()
    .HasRequired(input => input.Data)
    .WithRequired(data => data.InputB)
    .WillCascadeOnDelete(false); 
```

但是，我收到 MetaDataException，错误 0040：类型 Data_InputA 未在命名空间中定义（...）

我怎样才能使这项工作？我不想在输入衍生品上创建单独的数据集合，因为这在逻辑上是不正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:35:14.560

这应该可以解决您的问题：

改变这个：

```
public abstract class Data
{
   public virtual InputA InputA { get; set; }
   public virtual InputB InputB { get; set; }
} 
```

致：如果你担心`foreign key`，没关系。`Key`of`InputA Object`与`InputBase Object`我们使用`Inheritance`. 因此，`Data Structure`指示我们执行以下操作。

```
public abstract class Data
{
   [ForeignKey("InputBase"), DatabaseGenerated(DatabaseGeneratedOption.None)]
   public int? InputBaseId { get; set; }

   public virtual InputBase InputBase { get; set; }       
} 
```

如果你`Inheritance`是`Table per Type (TPT)`，

对派生类执行此操作：

```
[Table("InputB")] //This is what your table will be named in your database for derived class
public class InputA: InputBase { }

[Table("InputB")]
public class InputB: InputBase { } 
```

你也不需要这个：

```
modelBuilder.Entity<Data>()
.HasRequired(data => data.InputA)
.WithMany(input => input.Data)
.WillCascadeOnDelete(false);

modelBuilder.Entity<Data>()
.HasRequired(data => data.InputB)
.WithMany(input => input.Data)
.WillCascadeOnDelete(false);

modelBuilder.Entity<InputA>()
.HasRequired(input => input.Data)
.WithRequired(data => data.InputA)
.WillCascadeOnDelete(false);

modelBuilder.Entity<InputB>()
.HasRequired(input => input.Data)
.WithRequired(data => data.InputB)
.WillCascadeOnDelete(false); 
```

您可以删除该部分，因为我们使用了`Property Mapping`.

# c++ - 尝试将 x、y、z 作为参数传递

> ID：15869006
> 
> 赞同：0
> 
> 时间：2013-04-07T23:17:28.483
> 
> 标签：c++

错误在我调用 foo 的 main 行上的 int 之前表示预期的主表达式。我不明白以及如何解决它。我究竟做错了什么？

```
#include <stdio.h>
#include <stdlib.h>

int foo(int *a, int *b, int c) {
    /* Set a to double its original value */
   *a = *a * *a;
    /* Set b to half its original value */
   *b = *b / 2;
    /* Assign a+b to c */
   c = *a + *b;
    /* Return c */
   return c;
}

int main() {
    /* Declare three integers x, y, z and initialize them to 5, 6, 7 respectively */
   int x = 5, y = 6, z = 7;
    /* Print the values of x, y, z */
   printf("X value: %d\t\n", x);
   printf("Y value: %d\t\n", y);
   printf("Z value: %d\t\n", z);
    /* Call foo() appropriately, passing x, y, z as parameters */
   foo(int *x, int *y, int z);
    /* Print the value returned by foo */
   printf("Value returned by foo: %d\t\n", foo(x, y, z));
    /* Print the values of x, y, z again */
   printf("X value: %d\t\n", x);
   printf("Y value: %d\t\n", y);
   printf("Z value: %d\t\n", z);
    /* Is the return value different than the value of z?  Why? */

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T23:19:29.170

您调用不正确，您需要将变量的地址作为参数传递：

```
foo(&x,&y,z); 
```

此外，由于您通过值而不是引用传递 z，因此您可能应该将其分配给函数的返回值（看起来这就是您想要做的事情？）：

```
z=foo(&x,&y,z); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T23:19:30.943

您正在声明要传递它们的变量..

```
foo(&x, &y, z); 
```

# java - 显示扫雷游戏中的所有空间

> ID：15869016
> 
> 赞同：1
> 
> 时间：2013-04-07T23:18:31.487
> 
> 标签：java, swing, jbutton, mouselistener, minesweeper

我用 jbuttons 做了一个扫雷游戏，但我不知道如何在你输掉之后再次访问所有按钮以显示最终游戏。我使用带有 jbuttons 的 setText 方法来设置文本，但我不知道如何再次访问它们。如果有帮助，这就是我创建所有按钮的方式：

```
 for(int x = 0; x < rows ;x++)
    {
        for(int j = 0; j < columns; j++)
        {
            MineButton button = new MineButton(x,j);
            // adds a mouselistener for every button
            button.addMouseListener(new MouseHandler());
            this.add(button);
        }
    } 
```

我可以将其更改为一组 jbuttons，但我认为我不能通过这些来揭示它们。欢迎任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T23:48:02.397

您应该创建一些数组，它将存储对所有按钮的引用。请看我的小例子，它应该可以帮助你理解它是如何工作的：

```
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class MineSweeper {

    public static void main(String[] args) {
        MainFrame window = new MainFrame();
        window.setVisible(true);
    }
}

/**
 * Main frame. Initialize window and adds panel with buttons and clear button on
 * the window.
 * */
class MainFrame extends JFrame {

    private static final long serialVersionUID = 1L;

    private final Board board = new Board(10, 11);

    public MainFrame() {
        setLocation(400, 400);
        setLayout(new GridLayout(2, 1));
        add(board);
        add(createClearButton());
        pack();
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    private JButton createClearButton() {
        JButton button = new JButton();
        button.setText("Clear");
        button.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                board.clear();
            }
        });
        return button;
    }
}

/***
 * This class contains all buttons on one panel. We initialize all buttons in
 * constructor. We can use {@link Board#clear()} method for reveal all buttons.
 * */
class Board extends JPanel {

    private static final long serialVersionUID = 1L;

    private JButton[][] plate;
    private int numberOfRows;
    private int numberOfColumns;

    public Board(int numberOfRows, int numberOfColumns) {
        this.numberOfRows = numberOfRows;
        this.numberOfColumns = numberOfColumns;
        this.plate = new JButton[numberOfColumns][numberOfRows];
        setLayout(new GridLayout(numberOfRows, numberOfColumns));
        init();
    }

    private void init() {
        for (int x = 0; x < numberOfColumns; x++) {
            for (int y = 0; y < numberOfRows; y++) {
                JButton button = createNewJButton(x, y);
                plate[x][y] = button;
                add(button);
            }
        }
    }

    private JButton createNewJButton(int x, int y) {
        JButton button = new JButton();
        button.setText(x + ", " + y);
        button.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                JButton button = (JButton) e.getSource();
                button.setText("X");
            }
        });
        return button;
    }

    public void clear() {
        for (int x = 0; x < numberOfColumns; x++) {
            for (int y = 0; y < numberOfRows; y++) {
                plate[x][y].setText(x + ", " + y);
            }
        }
    }
} 
```

# scheme - 方案：我不知道要实现给定的功能

> ID：15869018
> 
> 赞同：0
> 
> 时间：2013-04-07T23:18:36.217
> 
> 标签：scheme

这是“编程语言语用学，迈克尔·斯科特”的练习。

Q. 返回一个列表，其中包含给定列表中满足给定谓词的所有元素。例如， (filter (lambda (x) (< x 5) '(3 9 5 8 2 4 7)) 应该返回 (3 2 4)。

我认为这个问题不仅需要满足上述每个谓词的功能。但我没有任何想法来实现这样的功能。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T00:11:36.790

该[`filter`](http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket%2Fprivate%2Flist..rkt%29._filter%29%29)过程已经存在于大多数 Scheme 实现中，它的行为符合预期：

```
(filter (lambda (x) (< x 5)) '(3 9 5 8 2 4 7))
=> '(3 2 4) 
```

现在，如果问题是*如何*实现它，那就很简单了——我会给你一些提示，这样你就可以自己编写了。这里的技巧是注意到该过程正在接收另一个过程作为参数，一个*谓词*，它会返回`#t`或`#f`应用于输入列表中的每个元素。评估为`#t`的那些保留在输出列表中，评估为的那些`#f`被丢弃。这是解决方案的骨架，请填空：

```
(define (filter pred? lst)
  (cond (<???>       ; if the list is empty
         <???>)      ; return the empty list
        (<???>       ; apply pred? on the first element, if it's #t
         (cons <???> ; then cons the first element
               (filter pred? <???>))) ; and advance recursion
        (else (filter pred? <???>)))) ; else just advance recursion 
```

# javascript - 迭代 AJAX 响应

> ID：15869019
> 
> 赞同：0
> 
> 时间：2013-04-07T23:18:36.317
> 
> 标签：javascript, json, jquery

我正在尝试学习一些前端工程，但我正在关注应该是一件容易做的事情。我检查了其他问题，并尝试了嵌套`$each`推荐

我编写了一个简单的 REST API，它在页面加载时返回此 JSON：

```
{"book":    
[{"authorFirstName":"Clive","authorLastName":"Cussler","genre":"Fiction","title":"Inca    
Gold"},{"authorFirstName":"Og","authorLastName":"Mandino","genre":"Self
Improvement","title":"The Greatest Salesman in the World"}, 
{"authorFirstName":"Bill","authorLastName":"O'Reilly","genre":"History","title":"Killing 
Lincoln"}]} 
```

问题不在于从服务器获取此信息；当页面加载或转到 REST URL 时，我会收到此信息。我在渲染页面时遇到了麻烦。这是我的 AJAX 调用和成功函数：

```
function getAllBooks() {
    console.log("Getting all books");
        $.ajax({
            type: 'GET',
            url: rootURL, 
            dataType: "json",
            success: renderBookList
        });
}

function renderBookList(data) {
    $('#bookList li').remove();
    $.each(data, function(index, book) {
        $('#bookList').append('<li><a href="#">' + book.title + '</a></li>');
    });
} 
```

如果我将`$each`函数内的行更改为`book[0].title`，那么我会在 JSON 中获得第一本书的标题。

我错过了什么？JSON的问题是它是一个具有一个属性的对象（但该属性是一个对象数组）？

服务器是 JAX-RS 并返回一个`ArrayList<Book>`如果那是密切相关的。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T23:26:05.077

`book`JSON 响应中的属性引用了您的 book 数组。

```
function renderBookList(data) {
    $('#bookList li').remove();
    $.each(data.book, function(index, book) {
        $('#bookList').append('<li><a href="#">'+ book.title +'</a></li>');
    });
} 
```

*注意：您应该缓存`$('#bookList')`在一个变量中，而不是在每次迭代中检索它。*

# c - 使用外部结构或外部指针指向结构的最佳实践？

> ID：15869021
> 
> 赞同：3
> 
> 时间：2013-04-07T23:18:55.607
> 
> 标签：c, pointers, struct, extern

假设我有 3 个文件：file1.c、file2.c 和 globals.h。file1.c 和 file2.c 都包含 globals.h。file1.c 包含 file2.c 需要使用的结构。将结构本身设为外部或创建指向该结构的指针并在 globals.h 中将该指针设为外部是否更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T23:23:39.427

如果我理解正确并且您的“结构”应该是一个全局对象（这是一个有问题的设计选择），那么我会这样做：

**富.h：**

```
typedef struct foo_struct
{
    /* ... */
} foo;

extern foo the_foo; 
```

**foo.c：** [如果你喜欢并且有意义，你可以将它合并到 file1.c 中。]

```
#include "foo.h"

foo the_foo = { /* ... */ }; 
```

**file1.c**和**file2.c**：

```
#include "foo.h"
#include "global.h"

/* ... */ 
```

# ruby - 是否有理由拥有多个全球可访问的互斥锁？

> ID：15869025
> 
> 赞同：1
> 
> 时间：2013-04-07T23:19:37.783
> 
> 标签：ruby

刚开始尝试线程，我想知道：是否存在使用多个 Mutex 有意义的情况？

我知道 Mutex#synchronize 用于锁定值，防止竞争条件。我正在使用它有点像这样：

```
# class variable
@semaphore = Mutex.new

# in thread in method
self.class.semaphore.synchronize{ x += 1 } 
```

这是处理锁定的好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T00:13:02.757

# TL;博士

这是一条经验法则：始终为每组变量使用一个互斥锁。例如，对一个数组使用一个互斥锁，并为其元素的计数器使用总是一起使用的。如果两个不同的对象（或对象组）可以在逻辑上的不同时间由两个不同的线程使用并且不会破坏您的程序，请给它们不同的互斥锁。

# 例子

用一个互斥锁来处理这种情况：

```
$counter1 = 0
$counter2 = 0
$mutex = Mutex.new #Just one mutex
threads = []
threads << Thread.new do 
  $mutex.syncronize do
    3.times do |i|
      sleep(1) #some calculation
      $counter1 += i
    end
  end
end
threads << Thread.new do 
  $mutex.syncronize do
    3.times do |i|
      sleep(1) #some calculation
      $counter2 += i * 3
    end
  end
end
threads.each {|t| t.join} 
```

以下是时间值：

```
real    0m6.019s
user    0m0.012s
sys     0m0.004s 
```

（因为睡眠低用户和系统）

这是一个有两个互斥锁的版本：

```
$counter1 = 0
$counter2 = 0
$mutex1 = Mutex.new 
$mutex2 = Mutex.new
threads = []
threads << Thread.new do 
  $mutex1.syncronize do
    3.times do |i|
      sleep(1) #some calculation
      $counter1 += i
    end
  end
end
threads << Thread.new do 
  $mutex2.syncronize do
    3.times do |i|
      sleep(1) #some calculation
      $counter2 += i * 3
    end
  end
end
threads.each {|t| t.join} 
```

和时间值：

```
real    0m3.021s
user    0m0.020s
sys     0m0.004s 
```

速度提高了 2 倍，因为我们移除了强制两个线程相互等待的锁定条件，有效地消除了第一种情况下线程化的任何好处。显然，每个变量一个互斥锁是效率的一大提高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T00:12:48.550

**当然，如果你有两个对象A**和**B**是有意义的，每个对象都可以独立使用。如果 thread1 想要独占访问**A**，而 thread2 想要独占访问**B**，则 thread1 和 thread2 不需要相互等待。所以**A**有一个信号量，**B**有一个不同的信号量。不过要小心！**例如，当 thread1 具有A**并等待获取**B**而 thread2 具有**B**并等待获取**A**时，您可能会出现死锁。

有很多材料涵盖共享资源、死锁等。

# c# - 何时需要手动减少事件处理程序

> ID：15869026
> 
> 赞同：0
> 
> 时间：2013-04-07T23:19:42.390
> 
> 标签：c#, .net, event-handling

[msdn](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.entrywritten.aspx)上有一个小的事件处理程序示例

与行：

```
myNewLog.EntryWritten += new EntryWrittenEventHandler(MyOnEntryWritten); 
```

大概这会将触发事件添加到要处理的队列中。什么从队列中删除处理程序？我还需要考虑这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T23:46:02.370

"-=" 运算符从*发布者中删除**订阅者*。*当事件的发布者比**订阅者*的寿命更长时，不取消订阅是一个问题。

 ***更多信息[在这里](https://stackoverflow.com/questions/4172809/should-i-unsubscribe-from-events)和[这里](https://stackoverflow.com/questions/1061727/is-it-bad-to-not-unregister-event-handlers)。***

# emacs - 在 Emacs 中将命令绑定到 C-RET

> ID：15869029
> 
> 赞同：10
> 
> 时间：2013-04-07T23:20:23.557
> 
> 标签：emacs

假设我在 Emacs 中有一些交互功能`my-function`，如何将其绑定到 Ctrl + RET？

我尝试过：

```
(global-set-key (kbd "C-RET") 'my-function) 
```

和

```
(global-set-key (kbd "C-return") 'my-function) 
```

但它们似乎都不起作用。这是可能吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-08T01:20:44.597

永远记住，当你*询问*`kbd`一个键序列时，它非常方便地接受 Emacs 给你的完全相同的语法，所以你永远不必*猜测*。

 **`C-h``k``C-RET`告诉我：

```
<C-return> 
```

因此我会使用`(kbd "<C-return>")`

OTOH 在我的终端中运行 Emacs 时`C-h``k``C-RET`告诉我：

```
C-j 
```

because `C-RET` isn't a valid control character in a terminal, and therefore Emacs isn't receiving the same input that it gets in GUI mode (so I wouldn't be able to use that binding in my terminal).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T23:49:45.203

这应该有效：

```
(global-set-key [(control return)] 'my-function) 
```

它对我有用，但根据@phils 的回答可能不在终端中。**

# three.js - Three.js - 立方体和球体与平面奇怪地剪裁

> ID：15869032
> 
> 赞同：0
> 
> 时间：2013-04-07T23:20:59.647
> 
> 标签：three.js, clipping, culling

我遇到了一个问题，它看起来像立方体和球体与平面剪裁。当我将立方体（使用键盘）移向场景后面时，似乎会发生这种情况。当我使用轨迹球控件在场景中移动时也会发生这种情况。有时即使我转动相机也可以看到立方体和球体，所以我正在看飞机的底部。

一些可能有用的代码包含相机变量、平面、球体和立方体的创建。我也有图片：http: [//imgur.com/0VlZLmP](http://imgur.com/0VlZLmP)

```
//CAMERA
var SCREEN_WIDTH = window.innerWidth;
var SCREEN_HEIGHT = window.innerHeight;
var VIEW_ANGLE = 45;
var ASPECT = SCREEN_WIDTH / SCREEN_HEIGHT;
var NEAR = 0.1;
var FAR = 20000;

//Renderer
ShapeShifter.renderer = new THREE.CanvasRenderer();

//Sphere
var sphereGeometry = new THREE.SphereGeometry( 50, 32, 16 );
var sphereMaterial = new THREE.MeshLambertMaterial( { color: 0x8888FF, overdraw: true } );
ShapeShifter.sphere = new THREE.Mesh( sphereGeometry, sphereMaterial );
ShapeShifter.sphere.position.set( 100, 50, -10 );
ShapeShifter.scene.add( ShapeShifter.sphere );

//Cube
var cubeGeometry = new THREE.CubeGeometry( 50, 50, 50 );
var cubeMaterial = new THREE.MeshBasicMaterial( { color: 0xFF4422 } );
ShapeShifter.cube = new THREE.Mesh( cubeGeometry, cubeMaterial );
ShapeShifter.scene.add( ShapeShifter.cube );
ShapeShifter.cube.position.set( -40, 50, 200 );

//Floor
var floorGeometry = new THREE.PlaneGeometry( 1000, 1000 );
var floorMaterial = new THREE.MeshBasicMaterial( { color: 0x4DBD33, overdraw: true } );
ShapeShifter.floor = new THREE.Mesh( floorGeometry, floorMaterial );
ShapeShifter.floor.material.side = THREE.DoubleSide;
ShapeShifter.floor.position.y = 0;
ShapeShifter.floor.rotation.x = Math.PI / 2;
ShapeShifter.scene.add( ShapeShifter.floor ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:27:45.630

这是一个已知的限制`CanvasRenderer`。

您可以通过增加几何体的细分（尤其是平面）来减少这些伪影。

```
var floorGeometry = new THREE.PlaneGeometry( 1000, 1000, 10, 10 ); // will help
var cubeGeometry = new THREE.CubeGeometry( 50, 50, 50, 2, 2, 2 );  // may help 
```

# c - C - 在结构中动态分配结构的循环缓冲区

> ID：15869039
> 
> 赞同：0
> 
> 时间：2013-04-07T23:21:22.827
> 
> 标签：c, struct, dynamic-allocation, circular-buffer

我正在尝试使用两个结构在 C 中开发一个动态分配的循环缓冲区。一个保存详细信息，另一个基本上用作从 main 指向循环缓冲区结构的指针（因为在运行时将分配多个数组）。

因为它是一个循环缓冲区，所以我有一个指针“next”，它指向数组中的下一项（所以最后一个数组索引指向第一个，等等）

这些是我拥有的两个结构对象：

```
typedef struct {
    int a;
    int b;
    struct1 *next;   // pointer to next struct1 object in array
} struct1;

typedef struct {
    struct1 *curr;     
    struct1 *start = NULL;
    struct1 *end = NULL;
} struct2; 
```

然后我有我的初始化函数，该函数从 main 调用以启动一个新的循环缓冲区。

这是我不完全确定该怎么做的部分。

```
#define minSize 10
struct2 * initialize()
{   
    struct2 **newBuf = malloc(sizeof(*newBuf));
    newBuf->malloc(sizeof(*newBuf->quotes) * newBuf->minSize);

    // set the start pointer
    newBuf.curr[0] = newBuf->start;
    newBuf.curr[0]->next = NULL;

    for (int i = 1; i < minSize; i++)
    {
        struct1 *new = NULL;     
        newBuf.curr[i] = new;    // make index i = NULL
        // have the previous index point to the "next" current
        if (i > 0)
            newBuf.curr[i-1]->next = newBuf.curr[i];
    }

    // connect last index with first
    newBuf.curr[minSize - 1]->next = newBuf.curr[0];

    // set the end pointer  
    newBuf->end = newBuf->start;

    return newBuf;
} 
```

通过搜索，我找到了关于如何通过使用 malloc [来初始化结构中的结构数组来初始化空间的答案](https://stackoverflow.com/questions/12994701/mallocing-array-of-structs-within-a-struct-c)，但是我很困惑我的代码将如何排列，因为我有定义循环缓冲区的*开始*和*结束*的指针在 struct2 中，以及作为 struct1 一部分的*下一个*指针。

此外，我选择定义 ***newBuf* 而不是 **newBuf*，因为我认为它以某种方式指向指针（考虑单链表）。不过，如果我错了，请纠正我。

我已经在 J​​ava 中完成了动态分配的循环缓冲区，但不是 C 或 C++，所以我很难弄清楚如何初始化所有内容的差异。我基本上被困在这个烂摊子上，不知道下一步该去哪里。

任何可以提供的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T23:30:42.990

你遇到麻烦的原因是因为你试图让指针指向一个指针，而不是仅仅使用一个普通的指针。您想要访问包含在第一个指针指向的地址中的指针。就目前而言，您正在尝试访问原始指针地址（仅与地址一样大）的内存空间之外的成员。然后你遇到了麻烦，因为你也没有初始化你的数组'curr'。我做的另一件事并不重要，但可以帮助您理解指针是使您的数组成为指针 - 这就是数组在 C 中的工作方式。数组只是数组第一个成员的地址，当您索引到数组，它只是向该地址添加一个偏移量 = index * sizeof(yourstruct)。

你想要的是

```
typedef struct {
   struct1 *curr;     
   struct1 *start = NULL;
   struct1 *end = NULL;
} struct2;

#define minSize 10
struct2* initialize()
{   
 struct2 *newBuf = (struct2 *) malloc(sizeof(struct2));
 newBuf->curr = (struct1 *) malloc(sizeof(struct1) * minSize);

// set the start pointer
 newBuf.curr[0] = newBuf->start;
 newBuf.curr[0]->next = NULL;

 for (int i = 1; i < minSize; i++)
 {
    struct1 *new = (struct1 *) malloc(sizeof(struct1));
    newBuf.curr[i] = new;
    newBuf.curr[i-1]->next = newBuf.curr[i];
 }
  // connect last index with first
  newBuf.curr[minSize - 1]->next = newBuf.curr[0];
  // set the end pointer  
  newBuf->end = newBuf->start;
  return newBuf;
} 
```

# javascript - 在 html 元素上使用 jQuery replaceWith

> ID：15869044
> 
> 赞同：1
> 
> 时间：2013-04-07T23:22:12.657
> 
> 标签：javascript, jquery, asp.net-mvc, replacewith

我正在编写一个 MVC 应用程序，在一个页面上，我需要动态地为所有元素提供一个 ID，因为表格的呈现方式以及数据如何传递给表格。当我运行它时，所有元素都被替换为 ，但是它正在删除标签之间的内容。有没有办法让它只替换起始标签而不触及其余部分，或者另一个 jQuery 函数来做到这一点？我的代码如下：

```
<script type="text/javascript" charset="utf-8">
$(document).ready(function () {
var oTable1 = $('#example1').dataTable({
    sScrollX: "100%",
    sScrollY: "200px",
    bFilter: false,
    bScrollCollapse: true,
    bPaginate: false,
    bScrollInfinite: true,
    iScollLoadGap: 10,
    oLanguage: {
        sZeroRecords: "There are no records that match your search criterion",
    }
}).makeEditable({ sUpdateURL: "/Home/UpdateData" });

});

</script>
<script type="text/javascript" charset="utf-8">
   $(document).ready(function () { var editChange = $('td').replaceWith('<td id = "@Html.ValueFor(x => x.name)" >'); });
</script> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T23:31:40.457

我建议不要使用`replaceWith`may 我建议使用另一个函数，该[函数`.attr()`](http://api.jquery.com/attr/)旨在替换元素的属性。

```
$('td').attr('id','@Html.ValueFor(x => x.name)'); 
```

Also, be careful because the ASP values will not be available once in the client side. Your selector `$('td')` is pretty general, and IDS must be unique.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T23:25:29.863

尝试在 TD 元素上显式设置 id

```
$('td').each(function() { 
   this.id = @Html.ValueFor(x => x.name);
}); 
```

# vector - CUDA Thrust 库：如何创建整数的 host_vectors 的 host_vector？

> ID：15869049
> 
> 赞同：3
> 
> 时间：2013-04-07T23:22:40.887
> 
> 标签：vector, thrust

在 C++ 中，为了创建一个包含 10 个整数向量的向量，我将执行以下操作：

```
 std::vector< std::vector<int> > test(10); 
```

因为我认为 Thrust 使用与 STL 相同的逻辑，所以我尝试做同样的事情：

```
 thrust::host_vector< thrust::host_vector<int> > test(10); 
```

但是我得到了太多令人困惑的错误。我试着做：

```
 thrust::host_vector< thrust::host_vector<int> > test; 
```

它起作用了，但是我不能向这个向量添加任何东西。正在做

```
 thrust::host_vector<int> temp(3);
  test.push_back(temp); 
```

会给我同样的错误（太多了，无法在这里粘贴）。

一般来说，在使用 Thrust 时，使用`host_vector`和 STL之间是否有区别`vector`？

先感谢您

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T05:26:06.143

Thrust 的容器仅设计用于 POD（普通旧数据）类型。通过在推力中实例化“向量的向量”来创建多维向量是不可能的，主要是因为 GPU 方面的限制使得它无法在设备代码路径中传递和使用。

C++ 标准库类型和算法与这些 STL 派生模型的推力主机实现之间存在一定程度的兼容性，但是当您想要同时使用主机和设备库后端时，您应该真正坚持使用主机向量。

# c# - 在 C# 中创建 Perlin 噪声图像

> ID：15869054
> 
> 赞同：0
> 
> 时间：2013-04-07T23:23:22.067
> 
> 标签：c#, .net, image, picturebox, perlin-noise

我已经看到了很多关于柏林噪声的例子，但它们都略有不同。

我想知道如何使用 perlin 噪声算法在 c# 中创建图像。

我想要一个函数，每次我调用它时，都会生成一个新图像并将其放置在图片框中。

我看过柏林噪声伪代码，但我很困惑。我希望能够通过用户输入来操作一些属性。

但现在我的问题：

如何将 perlin 噪声集成到返回位图数据（2d）的 c# 函数中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T23:56:38.283

```
 Bitmap bmp = new Bitmap(200, 200);

        for (int x = 0; x < 200; x++)
        {
            for (int y = 0; y < 200; y++)
            {
                int calc = (int)(((SimplexNoise.Noise.Generate(x, y)+1)/2)*255);
                bmp.SetPixel(x, y, Color.FromArgb(calc, calc, calc));
            }
        } 
```

我使用的是[https://code.google.com/p/simplexnoise/](https://code.google.com/p/simplexnoise/)但您可以使用任何噪声发生器。

我希望这有帮助

# html - 表格对齐

> ID：15869062
> 
> 赞同：0
> 
> 时间：2013-04-07T23:24:18.557
> 
> 标签：html, html-table, valign

我有一个酒店列表和他们的标志在一张表中列出：

[http://ranchocordovaeventscenter.com/partner-hotels/](http://ranchocordovaeventscenter.com/partner-hotels/)

所有徽标都在左栏中，所有文字都在右栏中。

我的问题是文本未在徽标旁边的单元格顶部对齐。

任何提示都会有所帮助。

这是我的一些代码：

```
<table border="0">
<tbody>
<tr>
<td valign="top"><a title="Comfort Inn &amp; Suites" href="http://www.comfortinnandsuitesrc.com" target="_blank"><img class="wp-image-440 alignleft" title="Comfort Inn &amp; Suites" alt="Comfort Inn &amp; Suites" src="http://ranchocordovaeventscenter.com/wp-content/uploads/2013/01/BIGcomfort-inn-logo.jpg" width="175" height="207" /></a></td>
<td valign="top">
<h3><b>Comfort Inn &amp; Suites-Rancho Cordova</b></h3>
<span style="font-size: small;">12249 Folsom Blvd., Rancho Cordova, CA</span>
<span style="font-size: small;"> <span style="line-height: 1.714285714;">Phone: 916-351-1213
</span><a style="line-height: 1.714285714; font-size: inherit;" href="http://www.comfortinnandsuitesrc.com/">http://www.comfortinnandsuitesrc.com</a></span></td>
</tr>
<tr>
<td valign="top"><a href="http://marriott.com/sacrc" target="_blank"><img class=" wp-image-455 alignleft" alt="Courtyard Marriott" src="http://ranchocordovaeventscenter.com/wp-content/uploads/2013/01/cy_logo.png" width="175" height="175" /></a></td>
<td valign="top">
<h3><span style="font-size: medium;"><b>Courtyard by Marriott-Rancho Cordova</b></span></h3>
<span style="font-size: small;">10683 White Rock Rd., Rancho Cordova, CA</span>
<span style="font-size: small;"> <span style="line-height: 1.714285714;">Phone: 916-638-3800
</span><a style="line-height: 1.714285714; font-size: inherit;" href="http://marriott.com/sacrc">http://marriott.com/sacrc</a></span></td>
</tr>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T23:29:23.383

您应该为所有文本行设置以下 css 属性：

```
float:right; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T14:11:41.070

这是由于标题标签

### ...

```
try this code. i've used <div> tag applied styles for Font size instead of <h3>

 <table border="0">

                    <tr>
                        <td><a title="Comfort Inn &amp; Suites" href="http://www.comfortinnandsuitesrc.com" target="_blank">
                            <img class="wp-image-440 alignleft" title="Comfort Inn &amp; Suites" alt="Comfort Inn &amp; Suites" src="http://ranchocordovaeventscenter.com/wp-content/uploads/2013/01/BIGcomfort-inn-logo.jpg" width="175" height="207" /></a></td>
                        <td>
                            <div style="font-size:large"><b>Comfort Inn &amp; Suites-Rancho Cordova</b></div>
                            <span style="font-size: small;">12249 Folsom Blvd., Rancho Cordova, CA</span>
                            <span style="font-size: small;"><span style="line-height: 1.714285714;">Phone: 916-351-1213
                            </span><a style=" font-size: inherit;" href="http://www.comfortinnandsuitesrc.com/">http://www.comfortinnandsuitesrc.com</a></span></td>
                    </tr>
                    <tr>
                        <td><a href="http://marriott.com/sacrc" target="_blank">
                            <img class=" wp-image-455 alignleft" alt="Courtyard Marriott" src="http://ranchocordovaeventscenter.com/wp-content/uploads/2013/01/cy_logo.png" width="175" height="175" /></a></td>
                        <td>
                            <h3><span style="font-size: medium;"><b>Courtyard by Marriott-Rancho Cordova</b></span></h3>
                            <span style="font-size: small;">10683 White Rock Rd., Rancho Cordova, CA</span>
                            <span style="font-size: small;"><span style="line-height: 1.714285714;">Phone: 916-638-3800
                            </span><a style="line-height: 1.714285714; font-size: inherit;" href="http://marriott.com/sacrc">http://marriott.com/sacrc</a></span></td>
                    </tr>

            </table> 
```

# c# - linq to xml skipwhile() takewhile()

> ID：15869063
> 
> 赞同：0
> 
> 时间：2013-04-07T23:24:28.963
> 
> 标签：c#, linq

我有这个xml

```
<root>
<TR_ZAL IDZ="cOY9" O="0">
</TR_ZAL>
<TR_ZAL IDZ="FOXd" O="10">
</TR_ZAL>
<TR_ZAL IDZ="wAW5" O="1">
<TR_ZAL IDZ="AWak" O="1">
</TR_ZAL>
<TR_ZAL IDZ="XpPp" O="10">
</TR_ZAL>
<TR_ZAL IDZ="asTu" O="10">
</TR_ZAL>
<TR_ZAL IDZ="y9VV" O="1">
</TR_ZAL>
</root> 
```

而且我知道`IDZ` `"AWak"`我的任务是获取已知的元素，然后获取所有元素`IDZ`，直到下一个具有相同属性的元素，`O`如果没有其他元素，那么我应该获取所有剩余的元素。在这种情况下应该是

```
<TR_ZAL IDZ="AWak" O="1">
</TR_ZAL>
<TR_ZAL IDZ="XpPp" O="10">
</TR_ZAL>
<TR_ZAL IDZ="asTu" O="10">
</TR_ZAL> 
```

所以我尝试使用 linq，但我找不到我的错误，所以任何人都可以请阻止我吗？

```
IEnumerable<XElement> rozsah = xmlText.Root.Elements("TR_ZAL")
                  .SkipWhile(x => x.Attribute("IDZ").Value != "AWak")
                  .Take(1)
                  .TakeWhile(x =>Convert.ToInt32(x.Attribute("O").Value) != o); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:11:40.807

我猜你的 XML 应该对这个更改有效：

```
<root>
<TR_ZAL IDZ="cOY9" O="0">
</TR_ZAL>
<TR_ZAL IDZ="FOXd" O="10">
</TR_ZAL>
<TR_ZAL IDZ="wAW5" O="1">
</TR_ZAL>
<TR_ZAL IDZ="AWak" O="1">
</TR_ZAL>
<TR_ZAL IDZ="XpPp" O="10">
</TR_ZAL>
<TR_ZAL IDZ="asTu" O="10">
</TR_ZAL>
<TR_ZAL IDZ="y9VV" O="1">
</TR_ZAL>
</root> 
```

如果这是真的，请在下面回答您的问题：

```
int? o = null;
IEnumerable<XElement> rozsah = xmlText.Root
    // Getting all child 'TR_ZAL' from root object
    .Elements("TR_ZAL")
    // Ignoring until we will not meet TR_ZAL with IDZ == AWak
    .SkipWhile(x => x.Attribute("IDZ").Value != "AWak")
    // Cache the first value of elements in collection and compare each next item
    // we want to take only items which does not have the same value
    .TakeWhile(x =>
        {
            int oAttributeValue = XmlConvert.ToInt32(x.Attribute("O").Value);

            if (!o.HasValue)
            {
                o = oAttributeValue;
                return true;
            }
            else
            {
                return o != oAttributeValue;
            }
        }); 
```

您的 linq 有一个错误，当您找到第一个 IDZ = AWak - 下一步是获取 1 个元素`Take(1)`，因此在此之后`Take(1)`将只返回一个元素的集合，因此下一步您的步骤`TakeWhile(...)`使用这个元素对集合进行操作，而不是之后的其余元素。

# python - Python 的标准库测试在哪里？

> ID：15869064
> 
> 赞同：5
> 
> 时间：2013-04-07T23:24:37.147
> 
> 标签：python, testing

假设我写了一个`class`类似于`dict`. 我希望它通过标准`dict`通过的相同单元测试，可能还有一些修改。

我在哪里可以找到该代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T23:29:40.167

Python 测试包含在 Python 源代码中，位于`Lib/test`：

[http://hg.python.org/releasing/2.7.4/file/9290822f2280/Lib/test/test_dict.py](http://hg.python.org/releasing/2.7.4/file/9290822f2280/Lib/test/test_dict.py) [http://hg.python.org/releasing/3.3.1/file/8e5812b35480/Lib/test /test_dict.py](http://hg.python.org/releasing/3.3.1/file/8e5812b35480/Lib/test/test_dict.py)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T23:37:34.027

为了建立在 Pavel 的答案之上，看起来 python[现在正在使用 mercurial](http://www.python.org/dev/peps/pep-0385/)

[http://hg.python.org/releasing/2.7.3/file/7bb96963d067/Lib/test/test_dict.py](http://hg.python.org/releasing/2.7.3/file/7bb96963d067/Lib/test/test_dict.py)

对于其他测试，请访问

[http://hg.python.org/](http://hg.python.org/)

单击`releasing/<python version>`> `browse`（在左侧菜单上）> 导航到相应的测试。hg.python.org 的结构类似于 svn.python.org。

# c++ - 使用自定义散列函数插入 unordered_set

> ID：15869066
> 
> 赞同：29
> 
> 时间：2013-04-07T23:24:37.557
> 
> 标签：c++, c++11, unordered-set

我有以下代码来制作`unordered_set<Interval>`. 这编译得很好。

```
struct Interval {
  unsigned int begin;
  unsigned int end;
  bool updated;   //true if concat.  initially false
  int patternIndex;  //pattern index. valid for single pattern
  int proteinIndex;   //protein index.  for retrieving the pattern
};

struct Hash {
  size_t operator()(const Interval &interval);
};

size_t Hash::operator()(const Interval &interval){
  string temp = to_string(interval.begin) + to_string(interval.end) + to_string(interval.proteinIndex);
  return hash<string>()(temp);
}

unordered_set<Interval, string, Hash> test; 
```

但是，当我尝试使用此代码插入时，我无法编译：

```
for(list<Interval>::iterator i = concat.begin(); i != concat.end(); ++i){
  test.insert((*i));
} 
```

此外，我无法从错误消息中确定问题所在，例如：

```
note: candidate is:
note: size_t Hash::operator()(const Interval&)
note:   candidate expects 1 argument, 2 provided 
```

我以为我只提供了 1 个论点...

我的插入代码有什么问题？

* * *

这是新的实例化代码：`unordered_set<Interval, Hash> test;` 但是，我仍然收到大量错误消息，例如：

```
note: candidate is:
note: size_t Hash::operator()(const Interval&) <near match>
note:   no known conversion for implicit ‘this’ parameter from ‘const Hash*’ to ‘Hash*’ 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-07T23:30:30.513

**第一个问题：**

您将`string`作为第二个模板参数传递给`unordered_set<>`类模板的实例化。[第二个参数应该是你的 hasher functor 的类型](http://en.cppreference.com/w/cpp/container/unordered_set)，而`std::string`不是一个可调用的对象。

也许是要写：

```
unordered_set<Interval, /* string */ Hash> test;
//                      ^^^^^^^^^^^^
//                      Why this? 
```

另外，我建议您使用除您的（成员）变量之外`begin`的`end`名称，因为这些名称是 C++ 标准库的算法名称。

**第二个问题：**

你应该记住，[哈希函数应该被限定为`const`](http://en.cppreference.com/w/cpp/container/unordered_set/hash_function)，所以你的函子应该是：

```
struct Hash {
   size_t operator() (const Interval &interval) const {
   //                                           ^^^^^
   //                                           Don't forget this!
     string temp = to_string(interval.b) + 
                   to_string(interval.e) + 
                   to_string(interval.proteinIndex);
     return (temp.length());
   }
}; 
```

**第三个问题：**

最后，如果您希望`std::unordered_set`能够使用 类型的对象`Interval`，您需要定义一个与您的散列函数一致的相等运算符。默认情况下，如果你没有指定任何类型参数作为 `std::unordered_set`类模板的第三个参数，`operator ==`将被使用。

`operator ==`您目前的班级没有任何重载`Interval`，因此您应该提供一个。例如：

```
inline bool operator == (Interval const& lhs, Interval const& rhs)
{
    return (lhs.b == rhs.b) && 
           (lhs.e == rhs.e) && 
           (lhs.proteinIndex == rhs.proteinIndex); 
} 
```

**结论：**

[完成上述所有修改后，您可以在这个现场示例](http://liveworkspace.org/code/4yc7Hy%243799)中看到您的代码正在编译。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-02-08T13:44:06.140

我认为，Andy Prowl 完美地[解决](https://stackoverflow.com/a/15869103/2675154)了您的代码问题。但是，我会将以下成员函数添加到您的`Interval`中，它描述了使两个间隔相同的原因：

```
std::string getID() const { return std::to_string(b) + " " + std::to_string(e) + " " + std::to_string(proteinIndex); } 
```

请注意，我也听从了 Andy Prowl 的建议，将成员重命名`begin`为`b`和。接下来，您可以使用[lambda 表达式](https://en.cppreference.com/w/cpp/language/lambda)轻松定义散列和比较函数。因此，您可以定义如下：`end``e``unordered_set`

```
auto hash = [](const Interval& i){ return std::hash<std::string>()(i.getID()); };
auto equal = [](const Interval& i1, const Interval& i2){ return i1.getID() == i2.getID(); };
std::unordered_set<Interval, decltype(hash), decltype(equal)> test(8, hash, equal); 
```

最后，出于可读性的原因，我将您的`for`循环转换为基于范围的`for`循环：

```
std::list<Interval> concat {{1, 2, false, 3, 4}, {2, 3, false, 4, 5}, {1, 2, true, 7, 4}};

for (auto const &i : concat)
    test.insert(i);

for (auto const &i : test)
    std::cout << i.b << ", " << i.e << ", " << i.updated << std::endl; 
```

输出（我刚刚打印了每个的前三个成员`Interval`）：

> 2, 3, 0
> 1, 2, 0

如您所见，只打印了两个间隔。第三个 ( `{1, 2, true, 7, 4}`) 没有插入到`test`，因为它的`b`、`e`、 和`proteinIndex`等于第一个区间 ( `{1, 2, false, 3, 4}`) 的。

[Ideone 上的代码](https://ideone.com/RTaL7C)

# macros - iMacros 选择类中的链接

> ID：15869068
> 
> 赞同：0
> 
> 时间：2013-04-07T23:25:09.217
> 
> 标签：macros, imacros

这些是我要选择并在新选项卡中打开的链接。

```
<div class="text-right" style="border: 2px solid rgb(0, 0, 255);"><a href="http://thisisaurl.com/klw4azh.html">Fine</a></div> 
```

我要选择多个链接，并且网址都不同。我可以突出显示其中包含链接的 div，但我永远无法真正选择链接并在新选项卡中打开它。有人能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:32:50.367

尝试这个：

```
tag pos=1 type=a attr=href:http://thisisaurl.com/* extract=href
tab open
tab t=2
url goto={{!extract}} 
```

这将刮掉第一个链接并在新选项卡中打开它，如果您需要第二个链接，只需更改 pos 索引

# c - 将 char * 附加到 char ** 的 C realloc 分段错误

> ID：15869071
> 
> 赞同：1
> 
> 时间：2013-04-07T23:25:38.153
> 
> 标签：c, pointers, memory-management, segmentation-fault, realloc

我在使用以下代码时遇到问题，该代码通过分配更多空间将 char * 附加到 char** 上。

```
size_t appendToken(char *tokens[], char *token, size_t size, size_t cap)
{
    if(size>=cap)
    {
        cap+=512;
        tokens = realloc(tokens, cap*sizeof(char *));
    }
    tokens[size] = token;
    return cap;
} 
```

当此代码执行并且 size = cap 时出现分段错误（如果有剩余容量，它会按预期运行）。我已经跟踪了其他所有内容，并且一切都按预期进行。以下是令牌和令牌的启动方式：

```
size_t tokenCount=0, tokens_cap = 5;
char **tokens = malloc(tokens_cap*sizeof(char *));
size_t size = 0;
size_t capacity = 4;
char *token = malloc(capacity*sizeof(char)); 
```

这是函数的调用方式：

```
token_cap = appendToken(tokens, token, tokenCount++, token_cap); 
```

我非常感谢一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T23:32:11.770

您需要额外的`tokens`参数间接

```
size_t appendToken(char ***tokens, char *token, size_t size, size_t cap)
{
    if(size>=cap)
    {
        cap+=512;
        *tokens = realloc(*tokens, cap*sizeof(char *));
    }
    (*tokens)[size] = token;
    return cap;
} 
```

否则，外部代码将访问*先前*分配的、现在已释放的内存。

然后，您将其称为

```
token_cap = appendToken(&tokens, token, tokenCount++, token_cap); 
```

# ruby-on-rails - 使用 VPN 在 Heroku 上获取静态 IP

> ID：15869072
> 
> 赞同：5
> 
> 时间：2013-04-07T23:25:45.007
> 
> 标签：ruby-on-rails, ruby, heroku, proxy, socks

我需要用我的 Heroku/Rails 应用程序连接到一个 API，我需要一个静态 IP。

我知道附加 proximo - [https://devcenter.heroku.com/articles/proximo](https://devcenter.heroku.com/articles/proximo) - 但它的价格非常高，所以这是不可能的。

在我的情况下，大多数人最终会改为部署到 EC2 并使用弹性 IP 作为他们的静态 IP。我也试过这个并且它有效，但我发现使用 EC2 的整个流程真的很麻烦。

我在一些答案中读到，可以设置 EC2 服务器并将其用作您的 Heroku/Rails 应用程序的代理 - [Heroku Static IP for SFTP](https://stackoverflow.com/questions/13350188/heroku-static-ip-for-sftp) - 但对于不是很服务器的人来说，这听起来很神秘 -精明。

有人可以提供有关如何设置 Heroku/Rails 应用程序以使用 EC2 实例作为代理的分步教程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:37:57.270

简而言之：我只想切换到 AWS。有一点学习曲线，但并不难。这是我针对前端开发人员进行的演示： [https ://speakerdeck.com/krunkosaurus/intro-to-scaling-your-web-app-on-the-cloud-with-aws-for-frontend -developers-part-1](https://speakerdeck.com/krunkosaurus/intro-to-scaling-your-web-app-on-the-cloud-with-aws-for-frontend-developers-part-1)

亚马逊有 9 个区域，每个区域有 3-5 个“可用区”。我知道 Heroku 使用 AWS，但不确定您是否可以决定（或知道）您的实际服务器托管在哪个 AWS 区域和 AZ。

不管是什么，您都应该在同一个区域中托管您的代理服务器（更好的是，甚至是同一个可用区）。在那里设置 EC2 很容易，只需使用 Web 控制台并确保给它一个弹性 IP，这样地址就不会改变。然后将您的 DNS 从 Heroku 实例（dyno？）指向这个 EC2 实例。从那里你可以安装 Nginx 或 HAProxy。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-10T09:57:51.353

Hello you can use this answer to see how to use NGINX as a reverse proxy.

[https://stackoverflow.com/a/27874505/1345865](https://stackoverflow.com/a/27874505/1345865)

[http://blog.talenox.com/post/107675614745/how-to-setup-static-ip-on-heroku](http://blog.talenox.com/post/107675614745/how-to-setup-static-ip-on-heroku)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-11T13:05:59.330

我刚刚[将 QuotaGuard Static](https://www.quotaguard.com/static-ip)设置为更强大、更有价值的静态 IP 服务，可供 Heroku 应用程序使用。

它托管在 EC2 上，因此您无需开始管理服务器即可获得低延迟优势。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-18T04:46:48.867

[Fixie](http://usefixie.com/)是在 Heroku 上获取静态 IP 地址的非常实惠的选择。[文档部分](http://usefixie.com/documentation/)有很多针对不同语言和框架的示例，包括 Ruby 。

# xcode4.5 - 需要关于部署 ad-hoc 的好教程

> ID：15869073
> 
> 赞同：-1
> 
> 时间：2013-04-07T23:25:49.060
> 
> 标签：xcode4.5, ad-hoc-distribution

我正在编写一个发送电子邮件、短信和打电话的 iphone 应用程序。由于我无法从模拟器中测试我编写的任何代码是否真的有效，我想在没有开发人员许可的情况下将应用程序部署在我的 iphone 上。

在这里搜索网络和类似问题后，我仍在寻找傻瓜教程（第 1 步...第 2 步...），任何人都可以向我推荐一个

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T23:30:17.830

TestFlight 为测试应用程序提供了一个简单的临时分发系统。添加设备很容易，它们的文档非常有用。他们的网站是[https://testflightapp.com/dashboard/](https://testflightapp.com/dashboard/)。这是一个很棒的分步教程[http://mobile.tutsplus.com/tutorials/iphone/testing-with-testflight/](http://mobile.tutsplus.com/tutorials/iphone/testing-with-testflight/)。

# c++ - 远程读写结构

> ID：15869074
> 
> 赞同：4
> 
> 时间：2013-04-07T23:25:53.200
> 
> 标签：c++, struct, embedded, arm, protocol-buffers

我目前正在构建一个带有一些传感器的机器人。机器人上的控制单元是 ARM Cortex-M3，所有传感器都连接在上面，并通过以太网连接到“地面站”。

现在我想通过地面站读取和写入机器人上的设置。因此我考虑在机器人上实现一个可以被地面站操纵的“虚拟寄存器”。

它可以由结构组成，如下所示：

```
// accelerometer register
struct accel_reg {
  // accelerations
  int32_t accelX;
  int32_t accelY;
  int32_t accelZ;
};

// infrared distance sensor register 
struct ir_reg {
  uint16_t  dist; // distance
};

// robot's register table
struct {
  uint8_t     status;         // current state
  uint32_t    faultFlags;     // some fault flags
  accel_reg   accelerometer;  // accelerometer register
  ir_reg      ir_sensors[4];  // 4 IR sensors connected
} robot;

// usage example:

robot.accelerometer.accelX = -981;
robot.ir_sensors[1].dist = 1024; 
```

在机器人上，寄存器将不断填充新值，并且配置设置由地面站设置并由机器人应用。

地面站和机器人将用 C++ 编写，因此它们都可以使用相同的结构数据类型。

**我现在**的问题是如何在不写入大量元数据的情况下将读/写操作封装在协议中？****

 **假设我想读取寄存器`robot.ir_sensors[2].dist`。我将如何在我的协议中处理这个寄存器？

我已经考虑过以字节为单位传输相对偏移量（即结构内内存中的相对位置），但我认为内存对齐和填充可能会导致问题，特别是因为地面站运行在 x86_64 架构上，而机器人运行在 32-位 ARM 处理器。

感谢您的任何提示！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T01:24:17.160

~~我认为[Google 协议缓冲区](https://developers.google.com/protocol-buffers/)是一个出色的会话/表示层工具。~~ 实际上，谷歌协议缓冲区不支持我正在考虑的语法。因此，我将更改这部分答案以通过代码合成推荐[**XSD 。**](http://www.codesynthesis.com/products/xsd/)尽管它主要与 XML 一起使用，但它支持不同的表示层，例如[*XDR*](http://en.wikipedia.org/wiki/External_Data_Representation)，并且可能比具有大量可选数据的*协议缓冲区更有效。*生成代码也非常好用。 **XSD**可以免费与开源软件一起使用，甚至可以在消息结构有限的情况下用于商业用途。

我不相信你想随机读/写寄存器集。`enum`您可以在消息前加上表示消息的 an 前缀，例如`IR update`、`distance`、`accel`等。这些是寄存器组。然后机器人以寄存器组响应。到目前为止，您提供的所有寄存器都是传感器。那些`write`必须是电机控制？

您要考虑要执行的控制以及要接收的遥测类型。然后提出一个消息结构并将信息捆绑在一起。您可以使用[SOA/SOAP](http://en.wikipedia.org/wiki/Service-oriented_architecture)、[RPC](http://en.wikipedia.org/wiki/Remote_procedure_call)、[REST](http://en.wikipedia.org/wiki/REST)`sequence diagrams`等远程过程 API 。我不是直接指这些 RPC 框架，而是指诸如消息之类的概念，它们可能只是在没有特定请求的情况下定期（遥测）发送。因此，地面站会以某种间隔发出*遥测请求，然后机器人会定期用未经请求的数据做出响应。*您总是需要一个消息 ID (`request/response`*`enum`以上），除非您的协议将是有状态的，出于稳健性原因，我不鼓励这样做。*

 *您还没有描述控制系统如何工作，或者您是否希望远程执行此操作。描述这可能会导致对协议的更多想法。我相信我们正在谈论[OSI](http://en.wikipedia.org/wiki/OSI_model)的第 5、6、7 层。玩得开心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T07:43:51.957

我还将建议使用 Google Protocol Buffers。

在最简单的情况下，您可以像这样实现一条消息`RobotState`：

```
消息机器人状态 {
   可选 int32_t 状态 = 1；
   可选 int32_t 距离 = 2；
   可选 int32_t accelX = 3;
   ...
}

```

然后，当机器人收到消息时，它将从存在的任何可选字段中获取新值。然后它将回复一条包含所有字段当前值的消息。

这样，使用大多数 protobuf 实现的“合并消息”功能来实现字段更新非常容易。您也可以在开始时保持非常简单，因为您只有一种消息类型，但如果您以后需要扩展，您可以添加子消息。

确实 protobuf 不支持`int8_t`or `int16_t`。改用就好`int32_t`了。***

# ios - 如何使用默认数据初始化 iOS 应用程序？

> ID：15869078
> 
> 赞同：1
> 
> 时间：2013-04-07T23:27:48.830
> 
> 标签：ios, objective-c, sqlite, core-data, persistence

我正在编写一个应用程序，每次按下按钮时都需要访问大文件中的数据。我一直在阅读它，[苹果文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdFAQ.html#//apple_ref/doc/uid/TP40001802-CJBDBHCB)说：

“您可以创建一个包含默认数据的单独持久存储，并将该存储作为应用程序资源包含在内。当您要使用它时，您必须将整个存储复制到合适的位置，或者将默认存储中的对象复制到现有的商店。”

这听起来像是最好的方法吗？

我已经用我需要的表创建了数据库，并将其放在 Xcode 中的“支持文件”下 - 这是应用程序资源吗？此外，我不确定“您必须将整个商店复制到合适的位置”是什么意思——不是吗？

最后，我的主要问题 - 我如何访问我的 .m 文件中的数据库中的信息？感谢您对我的包容，对此仍然很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T23:50:30.873

**这听起来像是最好的方法吗？**

我相信这取决于您想要访问什么样的信息以及是否需要更新此信息（添加新信息、修改、删除等）。

如果您只想读取数据并对其进行处理，请查看[Property Lists](http://www.appcoda.com/enhance-your-simple-table-app-with-property-list/)和[XML](https://www.raywenderlich.com/725/xml-tutorial-for-ios-how-to-read-and-write-xml-documents-with-gdataxml)。如果数据的结构有点像关系数据库并且需要对其进行修改，请查看 Apple 的[Core Data](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/CoreData/index.html)框架。

**这是应用程序资源吗？**

是的，很好，不要太担心命名法，但要了解更多信息，请查看 Apple 自己的资源[指南](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/LoadingResources/Introduction/Introduction.html)。

**此外，我不确定“您必须将整个商店复制到合适的位置”是什么意思——不是吗？**

您可以从多个位置（文件夹、不同文件等）加载商店，这仅意味着您应该选择最适合您的应用程序的位置。

请注意，您导入项目的文件存储在应用程序的包中，您不能（据我所知）修改它们。因此，如果您选择包含 Core Data 存储文件，则需要将存储从捆绑包复制到您偏好的位置（例如：文档文件夹）。

**如何在我的 .m 文件中访问数据库中的信息？**

这取决于你的选择。由于您似乎对使用 Core Data 更感兴趣，因此请先查看我在上面提供的链接并搜索一些教程。

# android - Android 应用程序活动在从另一个应用程序活动启动时启动，但不会在其启动时启动。

> ID：15869084
> 
> 赞同：1
> 
> 时间：2013-04-07T23:28:41.183
> 
> 标签：android, android-intent

所以我制作了 2 个应用程序，我想从另一个应用程序的活动中运行一个应用程序的活动。我可以通过从第一个应用程序传递一个意图来启动第二个应用程序来做到这一点。我们需要在活动中有一个许可标签才能做到这一点，并且哪个有效。但它不起作用的唯一情况是当我尝试运行第二个应用程序活动（这是我正在谈论的活动）时。我知道它不会运行，因为我设置了权限，但我只是想知道是否有办法仍然在其上运行第二个应用程序的主要活动，而不是从另一个应用程序运行它。

第一个应用清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.lab08a_awahla"
android:versionCode="1"
android:versionName="1.0" >

<uses-permission android:name="com.example.DANGEROUS_ACTION" />

<permission
    android:name="com.example.DANGEROUS_ACTION"
    android:label="perimission"
    android:protectionLevel="dangerous" />

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.lab08a_awahla.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

第一个应用程序java代码：

```
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.View;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

public void clicking(View view){
    Intent i=new Intent();
    i.setAction("com.example.DANGEROUS_ACTION");
    startActivity(i);
}
} 
```

第二个应用清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.lab08b_awahla"
android:versionCode="1"
android:versionName="1.0" >

<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="com.example.DANGEROUS_ACTION" />

<permission
    android:name="com.example.DANGEROUS_ACTION"
    android:label="perimission"
    android:protectionLevel="dangerous" />

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.lab08b_awahla.MainActivity"
        android:label="@string/app_name"
        android:permission="com.example.DANGEROUS_ACTION" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <intent-filter>
            <action android:name="com.example.DANGEROUS_ACTION" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
</application> 
```

所以我可以从第一个应用程序活动启动该活动，但第二个应用程序活动不会启动。我认为是因为活动下的许可标签。当我将它安装在我的设备上时，它显示“未安装应用程序”。如果有人可以帮助我，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T19:07:34.780

除非您摆脱`android:permission="com.example.DANGEROUS_ACTION"`第二个应用程序的主要活动，否则您无法自行启动该应用程序。因为根据您的清单文件，主屏幕应用程序需要具有`android:permission="com.example.DANGEROUS_ACTION"`启动应用程序的权限，这在您的情况下是错误的。

# streaming - 是否可以从弹性搜索中流式传输文档？

> ID：15869086
> 
> 赞同：7
> 
> 时间：2013-04-07T23:28:59.397
> 
> 标签：streaming, elasticsearch

是否有可能与 elasticsearch 建立持久的 HTTP 连接，在该连接中它只是在索引新文档时输出它们？

例如，我添加了一个名为的理论论点`stream`：

```
curl -X GET 'http://localhost:9200/documents/_search?stream'

{"_index":"documents", "_type":"doc", "field": "value #1"}
{"_index":"documents", "_type":"doc", "field": "value #2"}
{"_index":"documents", "_type":"doc", "field": "value #3"} 
```

...这将保持连接运行，大概是 HTTP 分块模式，直到客户端断开连接。

我正在考虑的替代方法是每秒对集群执行一次 GET 请求，时间范围为一秒。我希望有一种流媒体模式来防止开销。

有 elasticsearch [Rivers](http://www.elasticsearch.org/guide/reference/river/)，似乎与此相反。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T05:03:30.013

它在 Elasticsearch 中[尚不](https://github.com/elasticsearch/elasticsearch/issues/1242)存在。

但是，你可以看看这个[插件](https://github.com/derryx/elasticsearch-changes-plugin)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T02:06:17.237

有一个 websocket 传输 ( [https://github.com/jprante/elasticsearch-transport-websocket](https://github.com/jprante/elasticsearch-transport-websocket) ) 可以为您提供流式传输。

# algorithm - 动态规划递推关系

> ID：15869087
> 
> 赞同：4
> 
> 时间：2013-04-07T23:29:14.163
> 
> 标签：algorithm, dynamic-programming, recurrence

我试图找到并解决[UVA #11450](http://uva.onlinejudge.org/index.php?option=onlinejudge&page=show_problem&problem=2445)的动态编程方法的递归关系。作为免责声明，这是我大部分完成但对分析感到困惑的家庭作业的一部分。

这是我的（工作）代码：

```
int shop(int m, int c, int items[][21], int sol[][20]) {
    if (m < 0) return NONE;                  // No money left
    if (c == 0) return 0;                    // No garments left
    if (sol[m][c] != NONE) return sol[m][c]; // We've been here before

    // For each model of the current garment
    for (int i = 1; i <= items[c-1][0]; i++) {
        // Save the result
        int result = shop(m-items[c-1][i], c-1, items, sol);

        // If there was a valid result, record it for next time
        if (result != NONE) sol[m][c] = max(sol[m][c], result+items[c-1][i]);
    }

    return sol[m][c];
} 
```

我在分析的几个方面遇到问题：

*   基本操作是什么？我最初的反应是减法，因为每次调用函数时，我们都会从 C 中减一。
*   由于递归调用在循环内，这是否仅意味着递归关系中的乘法？
*   我如何将它使用动态表的事实考虑到递归关系中？我知道使用表格时有些问题会分解成线性问题，但我不确定这个问题是如何分解的。

我知道复杂性（根据[Algorithmist](http://www.algorithmist.com/index.php/UVa_11450)）是 O(M*C*max(K)) ，其中 K 是每件衣服的模型数，但我正在努力向后工作以获得递归关系。这是我的猜测：

S(c) = k * S(c-1) + 1, S(0) = 0

但是，这没有考虑到 M。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T18:45:17.030

您可以将每个 DP 状态`(m,c)`视为图的一个顶点，其中对状态的递归调用`(m-item_i,c-1)`是从`(m,c)`到的边`(m-item_i,i)`。

递归的记忆意味着你只从一个顶点开始搜索一次，并且只处理一次它的传出边。因此，您的算法本质上是对该图的线性搜索，并且具有复杂性`O(|V|+|E|)`。有 M*C 个顶点`max(K)`，每个顶点最多有边，因此您可以将边数限制为`O(M*C*max(K))`.

# javascript - 测试定义为 angular.module('myApp').controller(

> ID：15869088
> 
> 赞同：2
> 
> 时间：2013-04-07T23:29:22.610
> 
> 标签：javascript, unit-testing, angularjs, karma-runner

我正在玩[https://github.com/angular/angular-seed](https://github.com/angular/angular-seed)

在 app/controllers.js 中定义了一个控制器，如下所示

```
'use strict';
function MyCtrl1() {}
MyCtrl1.$inject = []; 
```

这不会通过 jshint，因为在 app/app.js 中引用了 MyCtrl1 而不是在我的全局列表中。

根据[布赖恩福特](http://briantford.com/blog/huuuuuge-angular-apps.html)和其他人的说法，我读过的首选风格是

```
angular.module('myApp').controller('MyCtrl1', [], function () {}); 
```

我更喜欢这个，因为它不在全局范围内，但现在我的睾丸规格失败了，因为它不再起作用了：

```
var myCtrl1;
beforeEach(function(){
  myCtrl1 = new MyCtrl1();
}); 
```

为了测试目的，我如何获取以“首选”样式定义的此控制器的引用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:19:40.693

归功于 Javito 和 Xesued：

```
beforeEach(module('myApp'));
var scope, ctrl;
beforeEach(inject(function($controller, $rootScope) {
    scope = $rootScope.$new();
    ctrl = $controller('MyCtrl1', {$scope: scope});
})); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:50:39.500

尝试，

```
beforeEach(inject(function($controller) {
    scope = {};    
    MyCtrl1 = $controller('MyCtrl1', {
      $scope: scope
    });
  })); 
```

# jira - JIRA：如何“归档”古代积压

> ID：15869091
> 
> 赞同：0
> 
> 时间：2013-04-07T23:29:38.493
> 
> 标签：jira, project-planning, backlog

我们的 Jira 中有 1000 多张旧票，其中大部分是我们永远无法到达的。如果我们愿意，我们可以最容易地把它们从积压中隐藏起来的最好方法是什么？

想法：

*   给他们一个标签，然后完成他们不会修复
*   创建一个特殊的“存档”项目并将它们移到那里

这些优点和缺点？其他想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:46:42.290

这是与 GreenHopper 一起使用的，并且可能使用了 Scrum 板吗？在这种情况下，问题会根据您董事会的 JQL 过滤器出现。您可以更改过滤器以按日期添加约束，例如“更新 < -200d”以排除 200 天内未更新的问题。

我不会费心将它们移到存档项目中。标签可以用于其他事情。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-12-13T22:51:00.220

如果您从不打算重复使用它，我建议将其存档。

您可以使用此项目执行此操作：[https ://gitlab.com/kaszaq/jiratomkdocs/](https://gitlab.com/kaszaq/jiratomkdocs/)

# highstock - highstock Plotbands 在 X 轴上标记某些 Daytimes

> ID：15869093
> 
> 赞同：1
> 
> 时间：2013-04-07T23:29:44.903
> 
> 标签：highstock

我试图在我的图表上标记某些日间时间 - 即：15:00 - 21:00

日期信息以时间戳的形式出现 - 例如“1365362890000”。

有什么方便的方法可以说从 X 时间开始一直到 Y 时间？否则，我可能需要一直循环查找起点/终点。

时间范围可以是一天到一个月的任何时间。

（plotBands 本身正在为我工​​作——只是看看是否有更好的方法然后循环遍历所有数据）

编辑：我的意思是你在我的图片中看到的 - 它的工作方式是这样的，一切都很好。我只是想知道是否有一种简单的说法-“用颜色z标记时间x到时间y”而不是“手工”。

![图表](https://i.imgur.com/K6FLsq5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-17T06:25:47.510

是的，plotBands 有一个#from 和#to 属性。只需使用转换后的日期时间的#from和#to（即unix时间* 1000）

```
$('#container').highcharts('StockChart', {
  xAxis: {
    plotBands: [
      {
        from: 1374658200000,
        to: 1374681600000,
        color: "rgba(68, 170, 213, .2)"
      }
    ]
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:00:37.260

在 xAxis 中，您可以设置最小值和刻度间隔。

[http://api.highcharts.com/highcharts#xAxis.tickInterval](http://api.highcharts.com/highcharts#xAxis.tickInterval) [http://api.highcharts.com/highcharts#xAxis.min](http://api.highcharts.com/highcharts#xAxis.min)（也应该是时间戳）

您也可以为系列定义 pointStart：[http](http://api.highcharts.com/highcharts#plotOptions.series.pointStart) : //api.highcharts.com/highcharts#plotOptions.series.pointStart 和 pointInterval [http://api.highcharts.com/highcharts#plotOptions.series.pointInterval](http://api.highcharts.com/highcharts#plotOptions.series.pointInterval)

# hibernate - struts2+hibernate java.lang.reflect.InvocationTargetException

> ID：15869094
> 
> 赞同：0
> 
> 时间：2013-04-07T23:29:48.230
> 
> 标签：hibernate, tomcat, struts2, struts2-s2hibernate

当我尝试使用休眠列出表时遇到问题，当我向表中添加数据时我没有遇到问题。问题是当我检索时。

动作方法

```
@Action(value="list", results = { @Result(location="/index.jsp"), @Result(name="input", location="index.jsp")
    })
    public String list()
    {
        setStudList(studDAO.listStud());
        System.out.println(getStudList());
        return SUCCESS;
    } 
```

DAOImpl

```
@Override
    public List<Student> listStud() {
        List<Student> stud=null;
        try
        {
            session=HibernateUtil.getSessionFactory().getCurrentSession();
            stud=session.createQuery("from Students").list();
            System.out.println("***"+stud);
        }
        catch (Exception e) {
            System.out.println("###"+e);
        } 
        return stud;
    } 
```

休眠实用程序

```
public class HibernateUtil {
private static final SessionFactory sessionFactory;

static {
    try {
        AnnotationConfiguration config = new AnnotationConfiguration();
    config.addAnnotatedClass(app.domain.Student.class);

    config.configure("hibernate.cfg.xml");
  // new SchemaExport(config).create(true,true);

    sessionFactory = config.buildSessionFactory();

    } catch (Throwable ex) {
        // Log the exception. 
        System.err.println("Initial SessionFactory creation failed." + ex);
        throw new ExceptionInInitializerError(ex);
    }
}

public static SessionFactory getSessionFactory() {
    return sessionFactory;
} 
```

}

所以当我试图访问下面的列表是堆栈跟踪时，我会感到困惑，因为 HibernateUtil 类存在，它显示为 java.lang.ClassNotFoundException: app.dao.HibernateUtil。

```
Struts Problem Report 
```

Struts 检测到一个未处理的异常： 消息：

```
app.dao.HibernateUtil
app/dao/HibernateUtil 
```

文件：org/apache/catalina/loader/WebappClassLoader.java 行号：1,711 Stacktraces java.lang.reflect.InvocationTargetException

```
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
java.lang.reflect.Method.invoke(Method.java:601)
com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:453)
com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:292)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:255)
org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:510)
org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
java.lang.Thread.run(Thread.java:722) 
```

java.lang.NoClassDefFoundError: app/dao/HibernateUtil

```
app.dao.StudDAOImpl.listStud(StudDAOImpl.java:42)
app.action.StudentAction.list(StudentAction.java:42)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
java.lang.reflect.Method.invoke(Method.java:601)
com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:453)
com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:292)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:255)
org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:510)
org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
java.lang.Thread.run(Thread.java:722) 
```

java.lang.ClassNotFoundException：app.dao.HibernateUtil

```
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
app.dao.StudDAOImpl.listStud(StudDAOImpl.java:42)
app.action.StudentAction.list(StudentAction.java:42)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
java.lang.reflect.Method.invoke(Method.java:601)
com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:453)
com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:292)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:255)
org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:510)
org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:45:25.833

好的，伙计们，我发现了错误，我错过了 slf4j-log4j12.jar，我添加了它并且问题得到了解决，感谢您的回答和帮助。但是堆栈跟踪并没有指向那个，让我很头疼。

# select - Firebird 存储过程在运行时定义表并返回值

> ID：15869095
> 
> 赞同：1
> 
> 时间：2013-04-07T23:29:49.060
> 
> 标签：select, stored-procedures, firebird

我正在尝试在存储过程中执行一些 SQL，在运行时设置表，并返回选定的值：

```
create or alter procedure TEST3
returns (
    THE_VAR varchar(128))
as
declare variable TABLE_NAME varchar(64);
declare variable STMT varchar(128);
begin
  /* Procedure Text */
  Table_Name = 'users';

  stmt = 'select firstname from ' || :table_name || ' where userid = 2 into :the_var';

  execute statement stmt;

  suspend;
end 
```

结果是`Token unknown ...... into`.

谁能告诉我它有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T07:04:58.990

您不能以这种方式使用动态 SQL 为存储过程上下文中的变量赋值。这需要从`EXECUTE STATEMENT`. 您需要将代码更改为：

```
stmt = 'select firstname from ' || :table_name || ' where userid = 2';
execute statement stmt into :the_var; 
```

另请参阅[`EXECUTE STATEMENT`文档](https://www.firebirdsql.org/file/documentation/html/en/refdocs/fblangref25/firebird-25-language-reference.html#fblangref25-psql-execstmt)。

# jquery - 如何在查询中克隆列表的内部 html 并将其包装

> ID：15869096
> 
> 赞同：0
> 
> 时间：2013-04-07T23:29:54.700
> 
> 标签：jquery, html, clone, css-transitions

这就是我的 CMS 将生成的内容

```
<ul>
    <li>something 1<span>subline</span></li>
    <li>something 2<span>subline</span></li>
    <li>something 3<span>subline</span></li>
</ul> 
```

这是我以后想要的，我想克隆 each 的内容，`<li>`然后把它放在 a 里面`<span>`并放在它的前面。

```
<ul>
    <li><span class="slidein">something 1<span>subline</span></span>something <span>subline</span></li>
    <li><span class="slidein">something 2<span>subline</span></span>something <span>subline</span></li>
    <li><span class="slidein">something 3<span>subline</span></span>something <span>subline</span></li>
</ul> 
```

我的问题是我对 jQuery 知之甚少，我知道诸如 , 之类的函数`html(), appendTo(), clone()`，但我尝试将它们放在一起以使这项工作失败。

我的问题之一是我不知道如何`self`在一次尝试中处理我的自我只是没有工作。我需要使用`each()`功能吗？我相信会有很多方法可以做到这一点，但最容易理解的代码是什么？

我打算使用克隆的跨度，你猜对了，在悬停时以另一种颜色样式将其滑入。我想我必须克隆它，只有当我想在它之前移动完全相同的内容时，CSS才会起作用，对吗？

解决了：

```
(function($) {
    $('ul > li').each(function(){
        var html = $(this).html();
        $(this).html('<span class="slideIn">' + html + '</span>' + html);
    });
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T23:33:21.730

使用[.wrapInner()](http://api.jquery.com/wrapInner/)函数；)

```
$("ul > li").wrapInner("<span class='slidein' />") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T23:34:14.240

```
$(function(){
    $('ul li').each(function(){
        var text = $(this).html();
        $(this).html('<span class="slidein">' + text + '</span>')
    });
}); 
```

# rally - 通过 API 获取 Rally 工作区前缀

> ID：15869105
> 
> 赞同：1
> 
> 时间：2013-04-07T23:30:39.470
> 
> 标签：rally

有谁知道是否有办法通过 API 查询工作区前缀？我想知道用户故事（通常是美国）、测试用例（TC）等的前缀是什么，用于通过源代码签入进行搜索，然后将签入与适当的项目相关联。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:43:46.147

此信息可通过查询 TypeDefinition 类型并在您的 fetch 中包含 IDPrefix 来获得。

# scala - 在 Scala 2.10.1 中找不到隐式宏？

> ID：15869106
> 
> 赞同：2
> 
> 时间：2013-04-07T23:30:39.997
> 
> 标签：scala, scala-macros

似乎该`implicit`关键字在应用于宏时不起作用`def`。

例如，采用以下代码：

```
// Compilation unit A:
case class Foo[A]
// end A.

// Compilation unit B:
implicit def implicitFoo[A]: Foo[A] = macro implicitFoo_impl[A]

def implicitFoo_impl[A](c: Context): c.Expr[Foo[A]] =
  c.universe.reify(Foo[A])
// end B.

// Compilation unit C:
implicitly[Foo[Int]] // Fails with "could not find implicit value for parameter e: Foo[Int]
// end C. 
```

失败，但`implicitly[Foo[Int]]`不应该；如果我替换`implicit def implicitFoo[A]: Foo[A] = macro implicitFoo_impl[A]`为`implicit def implicitFoo[A]: Foo[A] = ???`，编译成功。

这是错误还是用户错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T05:44:37.853

这是由[https://issues.scala-lang.org/browse/SI-5923](https://issues.scala-lang.org/browse/SI-5923)引起的，它已在 master (2.11.0-SNAPSHOT) 中修复，我计划将其向后移植到 2.10.2。在上述 JIRA 页面上查看更多信息（包括可能阻止我及时完成 2.10.2 的潜在问题）。

# msbuild - MSBuild：忽略不存在的目标

> ID：15869111
> 
> 赞同：10
> 
> 时间：2013-04-07T23:31:16.063
> 
> 标签：msbuild

Solution1.sln 包含两个项目：

*   项目A.csproj
*   项目B.csproj

ProjectB 有一个名为“Foo”的自定义目标。我想跑：

msbuild Solution1.sln /t:Foo

这将失败，因为 ProjectA 没有定义“Foo”目标。

有没有办法让解决方案忽略缺失的目标？（例如，如果特定项目的目标不存在，则什么都不做）而不修改 SLN 或项目文件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T11:20:14.570

如果您不想编辑解决方案或项目文件，并且您很高兴它可以从 MSBuild 命令行而不是 Visual Studio 工作，那么有一个由两部分组成的解决方案。

首先，运行时出现的错误：

```
MSBuild Solution1.sln /t:Foo 
```

不是 ProjectA 不包含 Foo 目标，而是解决方案本身不包含 Foo 目标。正如@Jaykul 建议的那样，设置 MSBuildEmitSolution 环境变量将显示解决方案 metaproj 中包含的默认目标。

使用 metaproj 作为灵感，您可以在解决方案文件（文件名模式很重要）旁边引入一个新文件“before.Solution1.sln.targets”，其内容如下：

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Target Name="Foo">
    <MSBuild Projects="@(ProjectReference)" Targets="Foo" BuildInParallel="True" Properties="CurrentSolutionConfigurationContents=$(CurrentSolutionConfigurationContents); SolutionDir=$(SolutionDir); SolutionExt=$(SolutionExt); SolutionFileName=$(SolutionFileName); SolutionName=$(SolutionName); SolutionPath=$(SolutionPath)" SkipNonexistentProjects="%(ProjectReference.SkipNonexistentProjects)" />
  </Target>
</Project> 
```

MSBuild 元素大多只是从解决方案 metaproj 的 Publish 目标复制而来。调整目标名称和任何其他详细信息以适合您的方案。

有了这个文件，您现在将收到 ProjectA 不包含 Foo 目标的错误。ProjectB 可能会也可能不会构建，具体取决于项目间的依赖关系。

所以，其次，为了解决这个问题，我们需要给每个项目一个空的 Foo 目标，然后在实际上已经包含一个的项目中覆盖它。

我们通过引入另一个文件来做到这一点，例如“EmptyFoo.targets”（名称不重要），如下所示：

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Target Name="Foo" />
</Project> 
```

然后我们通过运行带有额外属性的 MSBuild 让每个项目自动导入此目标文件，例如：

```
MSBuild Solution1.sln /t:Foo /p:CustomBeforeMicrosoftCommonTargets=c:\full_path_to\EmptyFoo.targets 
```

或者在第一个目标文件的 MSBuild 元素的 Properties 属性中包含 CustomerBeforeMicrosoftCommonTargets 属性，您可以选择指定相对于 $(SolutionDir) 属性的完整路径。

但是，如果您愿意将 Foo 与任何默认解决方案目标（即 Build、Rebuild、Clean 或 Publish）一起运行，您可以从 MSBuild 中的 Web Publishing Pipeline 如何使用 DeployOnBuild 属性调用在包含不支持发布的其他项目类型的解决方案中的 Web 项目上发布目标。

* * *

有关 before.Solution1.sln.targets 文件的更多信息：http: [//sedodream.com/2010/10/22/MSBuildExtendingTheSolutionBuild.aspx](http://sedodream.com/2010/10/22/MSBuildExtendingTheSolutionBuild.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T00:28:30.907

您可以按项目名称定位它们，例如 /t:project:target （可能需要引号，我不记得了）。

您可以通过设置环境变量`MSBuildEmitSolution = 1`... 找到所有生成的目标，这会导致 msbuild 将它为您的解决方案生成的 temp .metaproj 文件保存到磁盘。该文件中定义了所有这些目标，只需打开它并查看；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T23:36:13.883

也许不是最好的答案，而是一个合理的破解。

```
msbuild ProjectA.csproj
msbuild ProjectB.csproj /t:Foo 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T14:32:12.513

当 msbuild 构建解决方案 - msbuild 仅将有限的一组目标发送到它的 .metaproj 文件中，并且 afaik - 您无法通过构建 sln 文件构建自定义目标，您必须使用原始 project1.csproj 或自定义构建脚本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-02T05:32:44.850

仅供参考：

`ContinueOnError`在使用 MSBuildTask 或使用`-p:ContinueOnError=ErrorAndContinue`时使用`(dotnet) msbuild`

它可能在有限的场景中有所帮助：例如，您有一个 .csproj 文件列表，并且只想将元数据附加到特定的项目文件项，那么您可以编写如下内容：

```
<Target Name="UniqueTargetName" Condition="'$(PackAsExecutable)' == 'Package' Or '$(PackAsExecutable)' == 'Publish'" Outputs="@(_Hello)">
  <ItemGroup>
    <_Hello Include="$(MSBuildProjectFullPath)" />
  </ItemGroup>
</Target>

<Target Name="BuildEachTargetFramework" DependsOnTargets="_GetTargetFrameworksOutput;AssignProjectConfiguration;_SplitProjectReferencesByFileExistence"
        Condition="$(ExecutableProjectFullPath) != ''">

  <Message Text="[$(MSBuildThisFilename)] Target BuildEachTargetFramework %(_MSBuildProjectReferenceExistent.Identity)" Importance="high" />

  <MSBuild
    Projects="%(ProjectReferenceWithConfiguration.Identity)"
    Targets="UniqueTargetName"
    ContinueOnError="true">
    <Output TaskParameter="TargetOutputs" ItemName="_Hallo2" />
  </MSBuild>

  <Message Text="[$(MSBuildThisFilename)] ########### HELLO %(_Hallo2.Identity)" Importance="high" />

</Target> 
```

# android - ScrollView 内的 Android ListView - 替代方案和建议

> ID：15869122
> 
> 赞同：0
> 
> 时间：2013-04-07T23:32:41.223
> 
> 标签：android, android-layout, android-listview, android-scrollview, android-screen-support

在我的 Android 应用程序中，我有一个活动布局，它由顶部的 TableLayout 和下面的一个自定义 ListView 组成。但是，在横向模式下，列表视图不会完全显示。所以我想我需要添加一个滚动视图才能看到完整的布局。但是，根据我的阅读，不可能将列表视图放在 Android 的滚动视图中。有什么办法可以解决我的问题？太感谢了

# makefile - 为子目录中的文件制定规则，并将工作目录设置为此子目录

> ID：15869124
> 
> 赞同：1
> 
> 时间：2013-04-07T23:32:47.657
> 
> 标签：makefile

我在子目录中有一些源文件：

```
$ ls subdir
foo.x bar.x other_file 
```

现在我想创建一个规则

```
subdir/%.y: subdir/%.x
        cmd $< -a option -o $@ 
```

只是`cmd`需要将工作目录设置为`subdir`.

我想要一些如果`subdir/bar.y`需要它会生成的东西

```
cd subdir && cmd bar.x -a option -o bar.y 
```

例如，有没有一种说法`$<`，`$@`但没有领导`subdir/`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T23:36:00.367

如果你使用 GNU make，你可以使用`$(notdir $<)`and`$(notdir $@)`来获取没有目录的文件名。您可以使用`$(dir $@)`获取目录部分：

```
subdir/%.y: subdir/%.x
        cd $(dir $@) && cmd $(notdir $<) -a option -o $(notdir $@) 
```

或者硬编码子目录，如果你愿意的话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T23:38:17.127

您可以分别对文件和目录部分使用`F`或`D`后缀。

```
subdir/%.y: subdir/%.x
    cd $(@D) && cmd $(<F) -a option -o $(@F) 
```

有关详细信息，请参阅[手册](http://www.gnu.org/software/make/manual/make.html#index-g_t_0024_0028_0040_0040D_0029-959)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T23:45:26.840

使用 $(patsubst) 怎么样？

```
subdir/%.y: subdir/%.x
        cd subdir && cmd $(patsubst subdir/%,%,$<) -a option -o $(patsubst subdir/%,%,$@) 
```

或者，等效但更简单：

```
subdir/%.y: subdir/%.x
        cd subdir && cmd $(<:subdir/%=%) -a option -o $(@:subdir/%=%) 
```

# wordpress - 同一页面上的镜像 Wordpress 随机查询

> ID：15869125
> 
> 赞同：0
> 
> 时间：2013-04-07T23:33:13.700
> 
> 标签：wordpress

我正在使用 wordpress 查询从自定义帖子类型中随机显示 3 个帖子。我正在使用以下代码，它工作正常：

```
<?php $my_query = new WP_Query('post_type=my_post_type&orderby=rand&showposts=3'); ?>
<?php while ($my_query->have_posts()) : $my_query->the_post(); ?>

Do Stuff

<?php endwhile; ?>
<?wp_reset_query(); ?> 
```

但是，我想镜像下面的相同查询以再次显示相同的项目。因此，一个页面上有两个 wordpress 查询，第一个查询选择 3 个随机帖子，第二个查询显示与第一个查询完全相同的结果。任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:07:42.620

试试这个:)

```
<?php $my_query = new WP_Query('post_type=post&orderby=rand&showposts=3'); ?>
<?php $i=0; ?>
<?php while ($my_query->have_posts()) : $my_query->the_post(); ?>

Do Stuff

<?php
    $myPostVar[$i] = array (
            'title'     => get_the_title(),
            'content'   => get_the_content()
    );
    $i++;
?>
<?php endwhile; ?>
<?php wp_reset_query(); ?>

<?php foreach ($myPostVar as $Postvar) : ?>
    <h2><?php echo $Postvar['title']; ?></h2>
    <p><?php echo $Postvar['content']; ?></p>
<?php endforeach; ?> 
```

# php - 关于如何将批处理 csv 处理为 Web 表单应用程序的建议

> ID：15869126
> 
> 赞同：0
> 
> 时间：2013-04-07T23:33:21.010
> 
> 标签：php, forms, csv, automation

我面临着获取我每周收到的大约 1 万个 ups 跟踪号码的 csv excel 文件的挑战。将这些数字一一批量处理成网络表单并提交。然后需要将每个以 xml 形式返回的结果插入到 mysql 数据库中进行存储。我想知道是否有任何关于我应该如何处理这个问题的建议。自动化是目标。正在考虑何时处理 csv 更新过程。使用 mysql 和 php。我愿意接近，特别是如果它是直接的。谢谢你的帮助。邮件解析是一种选择吗？触发器？我似乎在弄清楚批处理到 Web 表单的过程中遇到了最大的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T23:52:33.840

你通常先用基础数学来解决这个问题：

```
10 000 tracking numbers
25 tracking numbers per form submissing take 1 minute (just guessed) 
```

结果是：

```
400 minutes duration / 400 requests per week
Minutes per week: 70 560
Ca. one request per each 2,94 hours 
```

无需强调任何服务器，您应该能够在一周内处理这 10 000 个跟踪号码，并且有足够的增长空间。

首先将 CSV 文件导入数据库表，以便您可以轻松地从中获取 25 个条目，然后将状态存储到每一行中。

由于跟踪代码是唯一的（它们是吗？可能至少每年或十年或某事发现）您可以轻松跟踪尚未检查哪些号码。

对于 Web 表单，您需要自己编写一些函数来执行 HTML 请求，将数字发布到 UPS 并检索结果。如果他们提供一些 API，您也可以联系 UPS，这些 API 通常比使用 Web 表单和网站更容易操作，后者会随着下一次重新设计而改变。

# search - 搜索结果上的 Opencart 分页链接在单击时重新加载第一页，并在 URL 字符串中添加“#”

> ID：15869129
> 
> 赞同：0
> 
> 时间：2013-04-07T23:33:28.667
> 
> 标签：search, pagination, hyperlink, opencart, broken-links

当我在我的网站上提交搜索结果时，它会加载准确的结果并显示正确数量的产品...当我转到底部的分页链接时，它们会在将鼠标悬停在它们上方时显示正确的链接...但是当我点击它们只是重新加载我已经在的页面，并将 # 添加到 URL 字符串的末尾......代码似乎是正确的，我最初的感觉是这可能是因为我在 opencart 中启用了 SEO URL ，以及我所做的 HTACCESS 编辑....

这是一个例子：[http ://www.justicejewelers.com/index.php?route=product/search&filter_name=gold](http://www.justicejewelers.com/index.php?route=product/search&filter_name=gold)

访问：

```
RewriteBase /
RewriteRule ^sitemap.xml$ index.php?route=feed/google_sitemap [L]
RewriteRule ^googlebase.xml$ index.php?route=feed/google_base [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !.*\.(ico|gif|jpg|jpeg|png|js|css)
RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA] 
```

搜索.php：

```
$pagination = new Pagination();
$pagination->total = $product_total;
$pagination->page = $page;
$pagination->limit = $limit;
$pagination->text = $this->language->get('text_pagination');
$pagination->url = $this->url->link('product/search', $url . '&page={page}'); 
```

搜索.TPL：

```
 <?php echo $header; ?>

<?php echo $content_top; ?>

<div class="breadcrumb">
    <?php foreach ($breadcrumbs as $breadcrumb) { ?>
        <?php echo $breadcrumb['separator']; ?>
        <a href="<?php echo $breadcrumb['href']; ?>">
            <?php echo $breadcrumb['text']; ?>
        </a>
    <?php } ?>
</div>

<header class="heading">
    <h1><?php echo $heading_title; ?></h1>
    <div id="notification"></div>
</header>

<?php 

if ($column_left || $column_right) { $main = "span9"; } 
else {  $main = "span12"; } 

?>  

<div class="row-fluid">

    <?php echo $column_left; ?>

    <section id="maincontent" class="<?php echo $main; ?> search listing" role="main">

        <div class="mainborder">

            <?php if ($column_left) { ?>
                <div id="toggle_sidebar"></div>
            <?php } ?>

            <div class="search-criteria">

                <div class="contentset center">
                    <h4 class="inner">
                        <span><?php echo $text_critea; ?></span>
                    </h4>
                </div>

                <div class="controls">
                    <input type="search" name="filter_name" id="filter_name" value="<?php echo $filter_name; ?>" class="search-box span6" placeholder="Search" />
                </div>

                <select name="filter_category_id" class="filter-category span4">

                    <option value="0"><?php echo $text_category; ?></option>

                    <?php foreach ($categories as $category_1) { ?>

                        <?php if ($category_1['category_id'] == $filter_category_id) { ?>
                            <option value="<?php echo $category_1['category_id']; ?>" selected="selected"><?php echo $category_1['name']; ?></option>
                        <?php } else { ?>
                            <option value="<?php echo $category_1['category_id']; ?>"><?php echo $category_1['name']; ?></option>
                        <?php } ?>

                        <?php foreach ($category_1['children'] as $category_2) { ?>

                            <?php if ($category_2['category_id'] == $filter_category_id) { ?>
                                <option value="<?php echo $category_2['category_id']; ?>" selected="selected">&nbsp;-&nbsp;<?php echo $category_2['name']; ?></option>
                                <?php } else { ?>
                                <option value="<?php echo $category_2['category_id']; ?>">&nbsp;-&nbsp;<?php echo $category_2['name']; ?></option>
                            <?php } ?>

                            <?php foreach ($category_2['children'] as $category_3) { ?>
                                <?php if ($category_3['category_id'] == $filter_category_id) { ?>
                                    <option value="<?php echo $category_3['category_id']; ?>" selected="selected">&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<?php echo $category_3['name']; ?></option>
                                <?php } else { ?>
                                    <option value="<?php echo $category_3['category_id']; ?>">&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<?php echo $category_3['name']; ?></option>
                                <?php } ?>
                            <?php } ?>

                        <?php } ?>

                    <?php } ?>

                </select>

                <div class="controls">

                    <label class="checkbox inline">

                        <?php if ($filter_sub_category) { ?>
                            <input type="checkbox" name="filter_sub_category" value="1" id="sub_category" checked="checked" />
                        <?php } else { ?>
                            <input type="checkbox" name="filter_sub_category" value="1" id="sub_category" />
                        <?php } ?>
                        <?php echo $text_sub_category; ?>

                    </label>

                    <label class="checkbox inline">

                        <?php if ($filter_description) { ?>
                            <input type="checkbox" name="filter_description" value="1" id="description" checked="checked" />
                        <?php } else { ?>
                            <input type="checkbox" name="filter_description" value="1" id="description" />
                        <?php } ?>
                        <?php echo $entry_description; ?>

                    </label>

                </div>

                <div class="buttons">
                    <input type="button" value="<?php echo $button_search; ?>" id="button-search" class="btn btn-inverse" />
                </div>

            </div>

            <div class="contentset center">
                <h4 class="inner">
                    <span><?php echo $text_search; ?></span>
                </h4>
            </div>

            <!-- Products 
            ============================== -->

            <?php if ($products) { ?>

                <!-- Grid/Lis view, filters 
                ============================== -->

                <div class="product-filter">

                    <div class="btn-group display" data-toggle="buttons-radio">

                        <button id="grid" class="btn btn-mini" title="<?php echo $text_grid; ?>" onclick="display('grid');"><i class="icon-th"></i></button>

                        <button id="list" class="btn btn-mini" title="<?php echo $text_list; ?>" onclick="display('list');"><i class="icon-list"></i></button>

                    </div>

                    <span class="product-compare"><a href="<?php echo $compare; ?>" id="compare-total"><?php echo $text_compare; ?></a></span>

                    <div class="list-options"> 

                        <div class="sort">

                            <?php echo $text_sort; ?>

                            <select onchange="location = this.value;">
                                <?php foreach ($sorts as $sorts) { ?>
                                <?php if ($sorts['value'] == $sort . '-' . $order) { ?>
                                <option value="<?php echo $sorts['href']; ?>" selected="selected"><?php echo $sorts['text']; ?></option>
                                <?php } else { ?>
                                <option value="<?php echo $sorts['href']; ?>"><?php echo $sorts['text']; ?></option>
                                <?php } ?>
                                <?php } ?>
                            </select>

                        </div>

                        <div class="limit">

                            <?php echo $text_limit; ?>

                            <select onchange="location = this.value;">

                                <?php foreach ($limits as $limits) { ?>

                                    <?php if ($limits['value'] == $limit) { ?>

                                        <option value="<?php echo $limits['href']; ?>" selected="selected">
                                            <?php echo $limits['text']; ?>
                                        </option>

                                    <?php } else { ?>

                                        <option value="<?php echo $limits['href']; ?>">
                                            <?php echo $limits['text']; ?>
                                        </option>

                                    <?php } ?>

                                <?php } ?>

                            </select>

                        </div>

                    </div>

                </div>

                <!-- Product list (Default to Grid) 
                ============================== -->

                <div class="product-grid row-fluid">

                    <?php 

                    $counter=0;

                    foreach ($products as $product) { 

                        if ($counter == 0 ) $xclass = 'alpha';
                        else if (($counter+12) % 12 == 0 ) $xclass = 'alpha4 alpha3';
                        else if (($counter+4) % 4 == 0 ) $xclass = 'alpha4';
                        else if (($counter+3) % 3 == 0 ) $xclass = 'alpha3';
                        else $xclass = '';

                        if (($counter+2) % 2 == 0 ) $xclass .= ' odd';

                    ?>

                    <div class="grid-box <?php echo $xclass; ?>">

                        <div class="inner">

                            <?php if ($product['price'] && $product['special']) { ?>
                                <span class="onsale">
                                    <?php $this->language->load('module/sellegance');
                                    echo $this->language->get('text_onsale'); ?>
                                </span>
                            <?php } ?>

                            <?php if ($product['thumb']) { ?>
                                <div class="image">
                                    <a href="<?php echo $product['href']; ?>"><img src="<?php echo $product['thumb']; ?>" title="<?php echo $product['name']; ?>" alt="<?php echo $product['name']; ?>" /></a>
                                </div>
                            <?php } ?>

                            <div class="name">
                                <a href="<?php echo $product['href']; ?>"><?php echo $product['name']; ?></a>
                            </div>

                            <?php if ($product['rating']) { ?>
                                <div class="rating">
                                    <img src="catalog/view/theme/sellegance/images/stars-<?php echo $product['rating']; ?>.png" alt="<?php echo $product['reviews']; ?>" />
                                </div>
                            <?php } ?>

                            <div class="description"><?php echo $product['description']; ?></div>

                            <?php if ($product['price']) { ?>

                                <div class="price">

                                    <?php if (!$product['special']) { ?>
                                        <?php echo $product['price']; ?>
                                    <?php } else { ?>
                                        <span class="price-old"><?php echo $product['price']; ?></span>
                                        <span class="price-new"><?php echo $product['special']; ?></span>
                                    <?php } ?>

                                    <?php if ($product['tax']) { ?>
                                        <br />
                                        <span class="price-tax"><?php echo $text_tax; ?> <?php echo $product['tax']; ?></span>
                                    <?php } ?>

                                </div>

                            <?php } ?>

                            <div class="actions">

                                <div class="cart">
                                    <input type="button" value="<?php echo $button_cart; ?>" onclick="addToCart('<?php echo $product['product_id']; ?>');" class="btn btn-cart btn-small" />
                                </div>

                                <div class="wishlist"><a onclick="addToWishList('<?php echo $product['product_id']; ?>');"><?php echo $button_wishlist; ?></a></div>

                                <div class="compare"><a onclick="addToCompare('<?php echo $product['product_id']; ?>');"><?php echo $button_compare; ?></a></div>

                            </div>

                        </div>

                    </div>

                    <?php $counter++; } ?>

                </div> <!-- .produc-grid -->

                <div class="paginate"><?php echo $pagination; ?></div>

            <?php } else { ?>

                <div class="content empty white">

                    <div class="alert warning"><?php echo $text_empty; ?><a class="close" data-dismiss="alert" href="#">&times;</a></div>

                </div>

            <?php } ?>

        </div>

    </section><!-- #maincontent -->

    <?php echo $column_right; ?>

</div> <!-- .row -->

<?php echo $content_bottom; ?>

<script type="text/javascript"> 

    jQuery('#maincontent input[name=\'filter_name\']').keydown(function(e) {
        if (e.keyCode == 13) {
            jQuery('.button-search').trigger('click');
        }
    });

    jQuery('#button-search').bind('click', function() {
        url = 'index.php?route=product/search';

        var filter_name = jQuery('#maincontent input[name=\'filter_name\']').attr('value');

        if (filter_name) {
            url += '&filter_name=' + encodeURIComponent(filter_name);
        }

        var filter_category_id = jQuery('#maincontent select[name=\'filter_category_id\']').attr('value');

        if (filter_category_id > 0) {
            url += '&filter_category_id=' + encodeURIComponent(filter_category_id);
        }

        var filter_sub_category = jQuery('#maincontent input[name=\'filter_sub_category\']:checked').attr('value');

        if (filter_sub_category) {
            url += '&filter_sub_category=true';
        }

        var filter_description = jQuery('#maincontent input[name=\'filter_description\']:checked').attr('value');

        if (filter_description) {
            url += '&filter_description=true';
        }

        location = url;

    });

</script> 
```

真正的问题是为什么要搜索这个脚本：

```
<script type="text/javascript"> 

    jQuery('#maincontent input[name=\'filter_name\']').keydown(function(e) {
        if (e.keyCode == 13) {
            jQuery('.button-search').trigger('click');
        }
    });

    jQuery('#button-search').bind('click', function() {
        url = 'index.php?route=product/search';

        var filter_name = jQuery('#maincontent input[name=\'filter_name\']').attr('value');

        if (filter_name) {
            url += '&filter_name=' + encodeURIComponent(filter_name);
        }

        var filter_category_id = jQuery('#maincontent select[name=\'filter_category_id\']').attr('value');

        if (filter_category_id > 0) {
            url += '&filter_category_id=' + encodeURIComponent(filter_category_id);
        }

        var filter_sub_category = jQuery('#maincontent input[name=\'filter_sub_category\']:checked').attr('value');

        if (filter_sub_category) {
            url += '&filter_sub_category=true';
        }

        var filter_description = jQuery('#maincontent input[name=\'filter_description\']:checked').attr('value');

        if (filter_description) {
            url += '&filter_description=true';
        }

        location = url;

    });

</script> 
```

受bannerpack影响，没有它就不能工作？

这是横幅包的代码：

```
 (function($){var NivoSlider=function(element,options){var settings=$.extend({},$.fn.nivoSlider.defaults,options);var vars={currentSlide:0,currentImage:'',totalSlides:0,randAnim:'',running:false,paused:false,stop:false};var slider=$(element);slider.data('nivo:vars',vars);slider.css('position','relative');slider.addClass('nivoSlider');var kids=slider.children();kids.each(function(){var child=$(this);var link='';if(!child.is('img')){if(child.is('a')){child.addClass('nivo-imageLink');link=child;}
child=child.find('img:first');}
var childWidth=child.width();if(childWidth==0)childWidth=child.attr('width');var childHeight=child.height();if(childHeight==0)childHeight=child.attr('height');if(childWidth>slider.width()){slider.width(childWidth);}
if(childHeight>slider.height()){slider.height(childHeight);}
if(link!=''){link.css('display','none');}
child.css('display','none');vars.totalSlides++;});if(settings.startSlide>0){if(settings.startSlide>=vars.totalSlides)settings.startSlide=vars.totalSlides-1;vars.currentSlide=settings.startSlide;}
if($(kids[vars.currentSlide]).is('img')){vars.currentImage=$(kids[vars.currentSlide]);}else{vars.currentImage=$(kids[vars.currentSlide]).find('img:first');}
if($(kids[vars.currentSlide]).is('a')){$(kids[vars.currentSlide]).css('display','block');}
slider.css('background','url("'+vars.currentImage.attr('src')+'") no-repeat');slider.append($('<div class="nivo-caption"><p></p></div>').css({display:'none',opacity:settings.captionOpacity}));var processCaption=function(settings){var nivoCaption=$('.nivo-caption',slider);if(vars.currentImage.attr('title')!=''&&vars.currentImage.attr('title')!=undefined){var title=vars.currentImage.attr('title');if(title.substr(0,1)=='#')title=$(title).html();if(nivoCaption.css('display')=='block'){nivoCaption.find('p').fadeOut(settings.animSpeed,function(){$(this).html(title);$(this).fadeIn(settings.animSpeed);});}else{nivoCaption.find('p').html(title);}
nivoCaption.fadeIn(settings.animSpeed);}else{nivoCaption.fadeOut(settings.animSpeed);}}
processCaption(settings);var timer=0;if(!settings.manualAdvance&&kids.length>1){timer=setInterval(function(){nivoRun(slider,kids,settings,false);},settings.pauseTime);}
if(settings.directionNav){slider.append('<div class="ban_direction"><a class="nivo-prevNav">'+settings.prevText+'</a><a class="nivo-nextNav">'+settings.nextText+'</a></div>');if(settings.directionNavHide){$('.ban_direction',slider).hide();slider.hover(function(){$('.ban_direction',slider).show();},function(){$('.ban_direction',slider).hide();});}
$('a.nivo-prevNav',slider).live('click',function(){if(vars.running)return false;clearInterval(timer);timer='';vars.currentSlide-=2;nivoRun(slider,kids,settings,'prev');});$('a.nivo-nextNav',slider).live('click',function(){if(vars.running)return false;clearInterval(timer);timer='';nivoRun(slider,kids,settings,'next');});}
if(settings.controlNav){var nivoControl=$('<div class="banner_control"></div>');slider.append(nivoControl);for(var i=0;i<kids.length;i++){if(settings.controlNavThumbs){var child=kids.eq(i);if(!child.is('img')){child=child.find('img:first');}
if(settings.controlNavThumbsFromRel){nivoControl.append('<a class="ban_control" rel="'+i+'"><img src="'+child.attr('rel')+'" alt="" /></a>');}else{nivoControl.append('<a class="ban_control" rel="'+i+'"><img src="'+child.attr('src').replace(settings.controlNavThumbsSearch,settings.controlNavThumbsReplace)+'" alt="" /></a>');}}else{nivoControl.append('<a class="ban_control" rel="'+i+'">'+(i+1)+'</a>');}}
$('.banner_control a:eq('+vars.currentSlide+')',slider).addClass('active');$('.banner_control a',slider).live('click',function(){if(vars.running)return false;if($(this).hasClass('active'))return false;clearInterval(timer);timer='';slider.css('background','url("'+vars.currentImage.attr('src')+'") no-repeat');vars.currentSlide=$(this).attr('rel')-1;nivoRun(slider,kids,settings,'control');});}
if(settings.keyboardNav){$(window).keypress(function(event){if(event.keyCode=='37'){if(vars.running)return false;clearInterval(timer);timer='';vars.currentSlide-=2;nivoRun(slider,kids,settings,'prev');}
if(event.keyCode=='39'){if(vars.running)return false;clearInterval(timer);timer='';nivoRun(slider,kids,settings,'next');}});}
if(settings.pauseOnHover){slider.hover(function(){vars.paused=true;clearInterval(timer);timer='';},function(){vars.paused=false;if(timer==''&&!settings.manualAdvance){timer=setInterval(function(){nivoRun(slider,kids,settings,false);},settings.pauseTime);}});}
slider.bind('nivo:animFinished',function(){vars.running=false;$(kids).each(function(){if($(this).is('a')){$(this).css('display','none');}});if($(kids[vars.currentSlide]).is('a')){$(kids[vars.currentSlide]).css('display','block');}
if(timer==''&&!vars.paused&&!settings.manualAdvance){timer=setInterval(function(){nivoRun(slider,kids,settings,false);},settings.pauseTime);}
settings.afterChange.call(this);});var createSlices=function(slider,settings,vars){for(var i=0;i<settings.slices;i++){var sliceWidth=Math.round(slider.width()/settings.slices);if(i==settings.slices-1){slider.append($('<div class="banner-slice"></div>').css({left:(sliceWidth*i)+'px',width:(slider.width()-(sliceWidth*i))+'px',height:'0px',opacity:'0',background:'url("'+vars.currentImage.attr('src')+'") no-repeat -'+((sliceWidth+(i*sliceWidth))-sliceWidth)+'px 0%'}));}else{slider.append($('<div class="banner-slice"></div>').css({left:(sliceWidth*i)+'px',width:sliceWidth+'px',height:'0px',opacity:'0',background:'url("'+vars.currentImage.attr('src')+'") no-repeat -'+((sliceWidth+(i*sliceWidth))-sliceWidth)+'px 0%'}));}}}
var createBoxes=function(slider,settings,vars){var boxWidth=Math.round(slider.width()/settings.boxCols);var boxHeight=Math.round(slider.height()/settings.boxRows);for(var rows=0;rows<settings.boxRows;rows++){for(var cols=0;cols<settings.boxCols;cols++){if(cols==settings.boxCols-1){slider.append($('<div class="bannar-box"></div>').css({opacity:0,left:(boxWidth*cols)+'px',top:(boxHeight*rows)+'px',width:(slider.width()-(boxWidth*cols))+'px',height:boxHeight+'px',background:'url("'+vars.currentImage.attr('src')+'") no-repeat -'+((boxWidth+(cols*boxWidth))-boxWidth)+'px -'+((boxHeight+(rows*boxHeight))-boxHeight)+'px'}));}else{slider.append($('<div class="bannar-box"></div>').css({opacity:0,left:(boxWidth*cols)+'px',top:(boxHeight*rows)+'px',width:boxWidth+'px',height:boxHeight+'px',background:'url("'+vars.currentImage.attr('src')+'") no-repeat -'+((boxWidth+(cols*boxWidth))-boxWidth)+'px -'+((boxHeight+(rows*boxHeight))-boxHeight)+'px'}));}}}}
var nivoRun=function(slider,kids,settings,nudge){var vars=slider.data('nivo:vars');if(vars&&(vars.currentSlide==vars.totalSlides-1)){settings.lastSlide.call(this);}
if((!vars||vars.stop)&&!nudge)return false;settings.beforeChange.call(this);if(!nudge){slider.css('background','url("'+vars.currentImage.attr('src')+'") no-repeat');}else{if(nudge=='prev'){slider.css('background','url("'+vars.currentImage.attr('src')+'") no-repeat');}
if(nudge=='next'){slider.css('background','url("'+vars.currentImage.attr('src')+'") no-repeat');}}
vars.currentSlide++;if(vars.currentSlide==vars.totalSlides){vars.currentSlide=0;settings.slideshowEnd.call(this);}
if(vars.currentSlide<0)vars.currentSlide=(vars.totalSlides-1);if($(kids[vars.currentSlide]).is('img')){vars.currentImage=$(kids[vars.currentSlide]);}else{vars.currentImage=$(kids[vars.currentSlide]).find('img:first');}
if(settings.controlNav){$('.banner_control a',slider).removeClass('active');$('.banner_control a:eq('+vars.currentSlide+')',slider).addClass('active');}
processCaption(settings);$('.banner-slice',slider).remove();$('.bannar-box',slider).remove();if(settings.effect=='random'){var anims=new Array('fade');vars.randAnim=anims[Math.floor(Math.random()*(anims.length+1))];if(vars.randAnim==undefined)vars.randAnim='fade';}
if(settings.effect.indexOf(',')!=-1){var anims=settings.effect.split(',');vars.randAnim=anims[Math.floor(Math.random()*(anims.length))];if(vars.randAnim==undefined)vars.randAnim='fade';}
vars.running=true;if(settings.effect=='sliceDown'||settings.effect=='sliceDownRight'||vars.randAnim=='sliceDownRight'||settings.effect=='sliceDownLeft'||vars.randAnim=='sliceDownLeft'){createSlices(slider,settings,vars);var timeBuff=0;var i=0;var slices=$('.banner-slice',slider);if(settings.effect=='sliceDownLeft'||vars.randAnim=='sliceDownLeft')slices=$('.banner-slice',slider)._reverse();slices.each(function(){var slice=$(this);slice.css({'top':'0px'});if(i==settings.slices-1){setTimeout(function(){slice.animate({height:'100%',opacity:'1.0'},settings.animSpeed,'',function(){slider.trigger('nivo:animFinished');});},(100+timeBuff));}else{setTimeout(function(){slice.animate({height:'100%',opacity:'1.0'},settings.animSpeed);},(100+timeBuff));}
timeBuff+=50;i++;});}
else if(settings.effect=='sliceUp'||settings.effect=='sliceUpRight'||vars.randAnim=='sliceUpRight'||settings.effect=='sliceUpLeft'||vars.randAnim=='sliceUpLeft'){createSlices(slider,settings,vars);var timeBuff=0;var i=0;var slices=$('.banner-slice',slider);if(settings.effect=='sliceUpLeft'||vars.randAnim=='sliceUpLeft')slices=$('.banner-slice',slider)._reverse();slices.each(function(){var slice=$(this);slice.css({'bottom':'0px'});if(i==settings.slices-1){setTimeout(function(){slice.animate({height:'100%',opacity:'1.0'},settings.animSpeed,'',function(){slider.trigger('nivo:animFinished');});},(100+timeBuff));}else{setTimeout(function(){slice.animate({height:'100%',opacity:'1.0'},settings.animSpeed);},(100+timeBuff));}
timeBuff+=50;i++;});}
else if(settings.effect=='sliceUpDown'||settings.effect=='sliceUpDownRight'||vars.randAnim=='sliceUpDown'||settings.effect=='sliceUpDownLeft'||vars.randAnim=='sliceUpDownLeft'){createSlices(slider,settings,vars);var timeBuff=0;var i=0;var v=0;var slices=$('.banner-slice',slider);if(settings.effect=='sliceUpDownLeft'||vars.randAnim=='sliceUpDownLeft')slices=$('.banner-slice',slider)._reverse();slices.each(function(){var slice=$(this);if(i==0){slice.css('top','0px');i++;}else{slice.css('bottom','0px');i=0;}
if(v==settings.slices-1){setTimeout(function(){slice.animate({height:'100%',opacity:'1.0'},settings.animSpeed,'',function(){slider.trigger('nivo:animFinished');});},(100+timeBuff));}else{setTimeout(function(){slice.animate({height:'100%',opacity:'1.0'},settings.animSpeed);},(100+timeBuff));}
timeBuff+=50;v++;});}
else if(settings.effect=='fold'||vars.randAnim=='fold'){createSlices(slider,settings,vars);var timeBuff=0;var i=0;$('.banner-slice',slider).each(function(){var slice=$(this);var origWidth=slice.width();slice.css({top:'0px',height:'100%',width:'0px'});if(i==settings.slices-1){setTimeout(function(){slice.animate({width:origWidth,opacity:'1.0'},settings.animSpeed,'',function(){slider.trigger('nivo:animFinished');});},(100+timeBuff));}else{setTimeout(function(){slice.animate({width:origWidth,opacity:'1.0'},settings.animSpeed);},(100+timeBuff));}
timeBuff+=50;i++;});}
else if(settings.effect=='fade'||vars.randAnim=='fade'){createSlices(slider,settings,vars);var firstSlice=$('.banner-slice:first',slider);firstSlice.css({'height':'100%','width':slider.width()+'px'});firstSlice.animate({opacity:'1.0'},(settings.animSpeed*2),'',function(){slider.trigger('nivo:animFinished');});}
else if(settings.effect=='slideInRight'||vars.randAnim=='slideInRight'){createSlices(slider,settings,vars);var firstSlice=$('.banner-slice:first',slider);firstSlice.css({'height':'100%','width':'0px','opacity':'1'});firstSlice.animate({width:slider.width()+'px'},(settings.animSpeed*2),'',function(){slider.trigger('nivo:animFinished');});}
else if(settings.effect=='slideInLeft'||vars.randAnim=='slideInLeft'){createSlices(slider,settings,vars);var firstSlice=$('.banner-slice:first',slider);firstSlice.css({'height':'100%','width':'0px','opacity':'1','left':'','right':'0px'});firstSlice.animate({width:slider.width()+'px'},(settings.animSpeed*2),'',function(){firstSlice.css({'left':'0px','right':''});slider.trigger('nivo:animFinished');});}
else if(settings.effect=='boxRandom'||vars.randAnim=='boxRandom'){createBoxes(slider,settings,vars);var totalBoxes=settings.boxCols*settings.boxRows;var i=0;var timeBuff=0;var boxes=shuffle($('.bannar-box',slider));boxes.each(function(){var box=$(this);if(i==totalBoxes-1){setTimeout(function(){box.animate({opacity:'1'},settings.animSpeed,'',function(){slider.trigger('nivo:animFinished');});},(100+timeBuff));}else{setTimeout(function(){box.animate({opacity:'1'},settings.animSpeed);},(100+timeBuff));}
timeBuff+=20;i++;});}
else if(settings.effect=='boxRain'||vars.randAnim=='boxRain'||settings.effect=='boxRainReverse'||vars.randAnim=='boxRainReverse'||settings.effect=='boxRainGrow'||vars.randAnim=='boxRainGrow'||settings.effect=='boxRainGrowReverse'||vars.randAnim=='boxRainGrowReverse'){createBoxes(slider,settings,vars);var totalBoxes=settings.boxCols*settings.boxRows;var i=0;var timeBuff=0;var rowIndex=0;var colIndex=0;var box2Darr=new Array();box2Darr[rowIndex]=new Array();var boxes=$('.bannar-box',slider);if(settings.effect=='boxRainReverse'||vars.randAnim=='boxRainReverse'||settings.effect=='boxRainGrowReverse'||vars.randAnim=='boxRainGrowReverse'){boxes=$('.bannar-box',slider)._reverse();}
boxes.each(function(){box2Darr[rowIndex][colIndex]=$(this);colIndex++;if(colIndex==settings.boxCols){rowIndex++;colIndex=0;box2Darr[rowIndex]=new Array();}});for(var cols=0;cols<(settings.boxCols*2);cols++){var prevCol=cols;for(var rows=0;rows<settings.boxRows;rows++){if(prevCol>=0&&prevCol<settings.boxCols){(function(row,col,time,i,totalBoxes){var box=$(box2Darr[row][col]);var w=box.width();var h=box.height();if(settings.effect=='boxRainGrow'||vars.randAnim=='boxRainGrow'||settings.effect=='boxRainGrowReverse'||vars.randAnim=='boxRainGrowReverse'){box.width(0).height(0);}
if(i==totalBoxes-1){setTimeout(function(){box.animate({opacity:'1',width:w,height:h},settings.animSpeed/1.3,'',function(){slider.trigger('nivo:animFinished');});},(100+time));}else{setTimeout(function(){box.animate({opacity:'1',width:w,height:h},settings.animSpeed/1.3);},(100+time));}})(rows,prevCol,timeBuff,i,totalBoxes);i++;}
prevCol--;}
timeBuff+=100;}}}
var shuffle=function(arr){for(var j,x,i=arr.length;i;j=parseInt(Math.random()*i),x=arr[--i],arr[i]=arr[j],arr[j]=x);return arr;}
var trace=function(msg){if(this.console&&typeof console.log!="undefined")
console.log(msg);}
this.stop=function(){if(!$(element).data('nivo:vars').stop){$(element).data('nivo:vars').stop=true;trace('Stop Slider');}}
this.start=function(){if($(element).data('nivo:vars').stop){$(element).data('nivo:vars').stop=false;trace('Start Slider');}}
settings.afterLoad.call(this);return this;};$.fn.nivoSlider=function(options){return this.each(function(key,value){var element=$(this);if(element.data('nivoslider'))return element.data('nivoslider');var nivoslider=new NivoSlider(this,options);element.data('nivoslider',nivoslider);});};$.fn.nivoSlider.defaults={effect:'random',slices:15,boxCols:8,boxRows:4,animSpeed:500,pauseTime:5000,startSlide:0,directionNav:true,directionNavHide:true,controlNav:true,controlNavThumbs:false,controlNavThumbsFromRel:false,controlNavThumbsSearch:'.jpg',controlNavThumbsReplace:'_thumb.jpg',keyboardNav:true,pauseOnHover:true,manualAdvance:false,captionOpacity:0.8,prevText:'Prev',nextText:'Next',beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){},afterLoad:function(){}};$.fn._reverse = []._reverse||[].reverse;})(jQuery); jQuery.noConflict(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:53:14.957

这个问题肯定是 JavaScript 问题。URL 没问题，因此必须有一些 JavaScript 搞砸了。因为有大量 JavaScript 文件和库添加到您的站点/主题中，所以我无法确定真正的问题，但是如果您关闭浏览器中的 javascript 并尝试单击分页链接，您将看到分页工作正常.

我建议禁用一个又一个 JavaScript 包含并刷新页面（只需注释掉页脚、页眉或适当控制器中的行）并检查分页。最后，您应该能够确定导致问题的原因，然后我们可以带领您走向幸福的结局。

# python - Python CSV文件解析成日期时间，抛出时间格式错误

> ID：15869130
> 
> 赞同：2
> 
> 时间：2013-04-07T23:33:33.810
> 
> 标签：python, datetime, csv, pygtk, glade

我正在使用 pygtk 和 glade（python 2.7 32bit 解释器是它支持的最新版本）为研究部门制作应用程序，这需要从气象站的 csv 输出中获取一堆数据并尝试将这些数据搁置在用于永久本地存储的字典。但是，我似乎无法爬过将日期和时间信息存储到 datetime 对象的墙。无论我尝试以多少不同的方式获取日期和时间字段（表示为字符串 ex:"11/13/2012 17:43"）并将其放入 datetime 对象中，我都会遇到同样烦人的错误：

```
ValueError: time data '' does not match format '%m/%d/%Y %H:%M' 
```

现在对于有问题的代码，它是在 UI 上单击按钮时的事件：

```
def Bupload_clicked(self,widget):
  #Create a file chooser window, with default buttons
  chooser = gtk.FileChooserDialog("Open . .", None, gtk.FILE_CHOOSER_ACTION_OPEN,
     (gtk.STOCK_CANCEL, gtk.RESPONSE_CANCEL, gtk.STOCK_OPEN, gtk.RESPONSE_OK))
  response = chooser.run()

  if response == gtk.RESPONSE_OK: 
     with open(chooser.get_filename(), 'rb') as csvfile:
        reader = csv.reader(csvfile, delimiter='\t', quoting=csv.QUOTE_NONE)
        try:
           for row in reader: #loop through rows of data

              #here is the line of code in question:
              print repr(datetime.datetime(*time.strptime(row[1], "%m/%d/%Y %H:%M") [:5]))

              #rest of code doesn't work until this issue is fixed

        except csv.Error as e:
           sys.exit('file %s, line %d: %s' % (chooser.get_filename(), reader.line_num, e))
  chooser.destroy() 
```

我尝试以多种不同的方式完成这项任务，使用网络上提出的类似问题，包括将“/”切换为“-”，将一行代码分成几行等，但似乎没有解决问题。

另外，在你想太多之前的一个附带问题：strptime() 的 python 文档说它为 %m 寻找 [01,12]，为 %H 寻找 [00,24]，为 %d 寻找 [01,31]，等等. 但是气象站的 CSV 文件忽略了前导 0。（例如：“2/1/2013 0:43”）这会导致错误吗？

来自 CSV 文件的原始数据（前 5 行）：

```
1   11/13/2012 17:43    0   -0.2039 0   43.443  40.2    9.4 0   2.82    70.2    4.375
2   11/13/2012 18:43    0   -0.2039 0   36.651  61.1    0.6 0   0   74.4    4.363
3   11/13/2012 19:43    0   -0.1988 0   32.092  76.1    0.6 0   0.56    74.4    4.357
4   11/13/2012 20:43    0   -0.1988 0   31.591  74.5    0.6 0   1.12    92.7    4.357
5   11/13/2012 21:43    0   -0.1988 0   30.326  82.4    0.6 0   0   223.2   4.351 
```

这是列表的“内存中”表示：

```
#replace the problem line of code with: print row

['1', '11/13/2012 17:43', '0', '-0.2039', '0', '43.443', '40.2', '9.4', '0', '2.82', '70.2', '4.375']
['2', '11/13/2012 18:43', '0', '-0.2039', '0', '36.651', '61.1', '0.6', '0', '0', '74.4', '4.363']
['3', '11/13/2012 19:43', '0', '-0.1988', '0', '32.092', '76.1', '0.6', '0', '0.56', '74.4', '4.357']
['4', '11/13/2012 20:43', '0', '-0.1988', '0', '31.591', '74.5', '0.6', '0', '1.12', '92.7', '4.357']
['5', '11/13/2012 21:43', '0', '-0.1988', '0', '30.326', '82.4', '0.6', '0', '0', '223.2', '4.351'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T23:55:58.913

问题不在于您的格式字符串。错误信息

```
ValueError: time data '' does not match format '%m/%d/%Y %H:%M' 
```

表示您正在尝试将空字符串转换为时间。换句话说，对于文件的至少一行，您`row[1] == ''`实际上是在调用`time.strptime('', '%m/%d/%Y %H:%M')`.

# emacs - 缓冲区上的 Emacs shell 命令

> ID：15869131
> 
> 赞同：9
> 
> 时间：2013-04-07T23:33:46.433
> 
> 标签：emacs, elisp

我想设置一个功能，相当于标记整个缓冲区，并运行`C-u M-|`以提示输入命令，将缓冲区传递给命令并用输出替换缓冲区。然后可能将其设置为 shift-f5 或其他东西。

我只有这个：

```
(defun shell-command-on-buffer ()
  (interactive)
  (mark-whole-buffer)) 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T00:26:02.083

这对我有用：

```
(defun shell-command-on-buffer (command)
  (interactive "sShell command on buffer: ")
  (shell-command-on-region (point-min) (point-max) command t)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-03T13:49:54.090

这个的优点是使用“shell 命令”minibuffer 历史而不是一般的 minibuffer 历史。

```
(defun shell-command-on-buffer ()
  (interactive)
  (shell-command-on-region (point-min) (point-max) (read-shell-command "Shell command on buffer: ") t)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-07T16:43:52.713

@killdash9 的答案的增量改进，即：

1.  确实替换了缓冲区内容（并且不会将输出附加到缓冲区的头部）
2.  努力恢复光标位置。

用 emacs 27.1 测试

```
(defun shell-command-on-buffer ()
  (interactive)
  (let ((line (line-number-at-pos)))
    ;; replace buffer with output of shell command
    (shell-command-on-region (point-min) (point-max) (read-shell-command "Shell command on buffer: ") nil t)
    ;; restore cursor position
    (goto-line line)
    (recenter-top-bottom))) 
```

# java - Connection 对象可以与构造函数之外的 JDBC RowSet 实例一起使用吗？

> ID：15869137
> 
> 赞同：1
> 
> 时间：2013-04-07T23:34:37.440
> 
> 标签：java, database, jdbc, connection

我知道可以使用传递给其构造函数的 Connection 对象来创建 JDBC RowSet 实例，例如：

```
Connection con = MyDAO.getConnection();
JdbcRowSet jrs = new JdbcRowSetImpl(con); 
```

两个问题：

*   每次我构建包含任何使用 JdbcRowSetImpl 的项目时，我的 Java SE 7 都会抱怨。它说 JdbcRowSetImpl 是供应商特定的实现，它可能会从 JDK 的未来版本中删除。我觉得这很奇怪，因为 Java 教程继续在其 JDBC 部分中使用 JdbcRowSetImpl。Oracle 是否真的打算将工厂 RowSet 实现逐步淘汰 JDK？如果没有，有没有办法停止警告信息？

这是警告之一。当我尝试在代码中使用 JdbcRowSet 构造函数或尝试导入包时会发生这种情况

```
C:\Users\Ribose\Documents\NetBeansProjects\CensusAssistant\src\org\kls\md\censusassistant\db\DB.java:170:
 warning: JdbcRowSetImpl is internal proprietary API and may be removed in a future release
            jrs = new JdbcRowSetImpl(con); 
```

我正在使用 NetBeans IDE 7.3 进行构建。RDBMS 是 HSQLDB 2.2.9。我有最新的 JDK SE 7。

*   假设我已经有一个 JdbcRowSet 实例。虽然它没有连接，但我已经有一个 Connection 对象，但无法访问身份验证凭据，即我有该对象，但不需要 user_id 或密码来建立新的 Connection。

我可以将现有的 Connection 对象与现有的 JdbcRowSet 实例一起使用吗？我发现的唯一一件事是 JdbcRowSetImpl 的构造函数可以采用 Connection 对象，但我想使用 Connection 而不必构造新的 RowSet 对象。这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T00:16:35.540

该类`com.sun.rowset.JdbcRowSetImpl`是 JDBC 接口的 Sun 特定实现，在不存在其他提供程序实现的情况下用作默认值。该类实际上自 JDK 1.2 以来就已存在，因此您可以肯定地说它会继续存在，***但不能保证***。通常所有包都是这种情况`com.sun.*`——它们代表不应直接引用或实例化的内部实现。

[使用 Sun 的专有 Java 类是一种不好的做法吗？](https://stackoverflow.com/questions/1834826/it-is-a-bad-practice-to-use-suns-proprietary-java-classes)

话虽如此，与其他动态库 [SAX、DOM、JAXB 等] 不同，在不创建提供程序特定实例的情况下实例化 JDBC 行集没有真正好的方法，直到 Java 7，您现在可以使用工厂来创建提供程序特定实例，在您的代码中没有显式绑定：

```
final JDBCRowSet rowSet = RowSetProvider.newFactory().createJdbcRowSet(); 
```

此代码扫描适当的提供者的类路径，并首先实例化一个 RowSetFactory，然后是一个 JDBCRowSet，使用找到的提供者类（请注意，如果没有找到其他提供者，它将回退到默认的 Sun 实现）。从 Java 7 开始，这是创建 JDBC 行集的首选方式。

我可以将现有的 Connection 对象与现有的 JdbcRowSet 实例一起使用吗？

Not without avoiding the `internal proprietary API` message no. As I said, the JDBCRowSetImpl class in all likeliness will continue to remain around. Infact the Java 7 documentation pretty much alludes as much:

> The reference implementation of the JdbcRowSet interface, JdbcRowSetImpl, provides an implementation of the default constructor. A new instance is initialized with default values, which can be set with new values as needed

So if your willing to ignore the compiler warnings, you can use the default implementation to create a row set with an existing connection.

# java - 更改 Bundle savedInstanceState

> ID：15869138
> 
> 赞同：0
> 
> 时间：2013-04-07T23:34:52.270
> 
> 标签：java, android

我想创建一个作为前端的应用程序来启动带有预加载游戏的模拟器。

我有emu源代码，但我无法编辑它。在`onCreate(Bundle savedInstanceState)`模拟器的主要活动的方法中有这一行：

```
if (savedInstanceState != null)
    currentGame = savedInstanceState.getString("currentGame"); 
```

如果在（重新）创建活动时找到了一个，这似乎使模拟器运行最新的游戏。

有没有办法编辑 savedInstanceState 使其包含`currentGame`字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T23:40:01.823

首次创建活动时`savedInstanceState`为空，而在随后的调用中则不是。为了确保`savedInstanceState`不为空，有一个调用方法`onRestoreInstanceState()`，您应该重写它，并确保它具有您要查找的字符串。

但我认为您真正想要的是向该活动发送一个`Bundle`已经填充了该字符串的意图。如果这不是您想要的，请多解释一下您的问题是什么。

# c# - C# ClickOnce 应用程序无法加载 DLL

> ID：15869142
> 
> 赞同：0
> 
> 时间：2013-04-07T23:35:15.637
> 
> 标签：c#, .net, dll, pjsip

我有一个小应用程序，其中包括两个第三方 DLL，pjsipDll.dll 和 sipeksdk.dll。对于 Copy Local，这两个 DLL 都设置为 True。当我发布应用程序并将其安装在第二台运行 Windows 7 的计算机上时，它会很好地加载 sipeksdk dll，然后该 dll 会尝试使用 pjsipDll 中的某些内容，但它会出错说：

“无法加载 DLL 'pjsipDll.dll'：找不到指定的模块。”

如果我在我的开发计算机上安装这个 clickonce 部署，它工作正常。

我查看了两台计算机上的部署目录，两个 DLL 都存在，所有文件都相同。在这两个系统上，我都以管理员身份运行。

关于我可能遗漏的任何想法？

谢谢，
有状态的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T00:07:44.900

在 StackOverflow 上发布后如何解决问题很有趣。看来我使用的是不兼容的 DLL 版本。我发现了每个已知可以一起工作的旧版本，并且一切都开始工作了。

# bash - Bash：在提示中使用颜色

> ID：15869143
> 
> 赞同：0
> 
> 时间：2013-04-07T23:35:25.043
> 
> 标签：bash, colors

我试图在没有单独一行的答案的情况下要求用户发明颜色。

我目前有这个：

```
msg() {
    local mesg=$1; shift
    printf "${GREEN}==>${ALL_OFF}${BOLD} ${mesg}${ALL_OFF}\n"
}

ALL_OFF="$(tput sgr0)"
BOLD="$(tput bold)"
GREEN="${BOLD}$(tput setaf 2)"

[...]

until [[ $REPLY = [yY] ]]; do
    msg "Done (y/n)?" && read -p ""
done 
```

但如前所述，问题在于它将响应置于新行：

```
==> Done (y/n)?
y 
```

那我怎么能不这样做呢？

还有什么方法可以使颜色响应吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T23:41:26.260

```
printf "${GREEN}==>${ALL_OFF}${BOLD} ${mesg}${ALL_OFF}\n" 
```

如果您不想要换行符，请不要在格式字符串的末尾放置 \n。

您还可以使用读取：

```
read_msg() {
  read -p "${GREEN}==>${ALL_OFF}${BOLD} $1${ALL_OFF}"
}
until [[ $REPLY = [yY] ]]; do
    read_msg "Done (y/n)?"
done 
```

# java - 将自然语言转换为数学方程式

> ID：15869147
> 
> 赞同：4
> 
> 时间：2013-04-07T23:36:12.007
> 
> 标签：java, math, nlp

我有一个使用 Java 运行的家庭自动化系统，我想添加简单的数学功能，例如加法、减法、乘法、除法、根和幂。

在系统当前状态下，它可以将短语转换为标签，如下例所示：

例子：

```
Phrase: "what is one hundred twenty two to the power of seven"
Tagged: {QUESTION/math} {NUMBER/122} {MATH/pwr} {NUMBER/7} 
```

例子：

```
Phrase: "twenty seven plus pi 3 squared"
Tagged: {NUMBER/27} {MATH/add} {NUMBER/3.14159} {MATH/multiply} {MATH/pwr} {NUMBER/2} 
```

这个例子可以很容易地转换成这样的：

```
27 + 3.14159 * 3^2 
```

每个标签都是一个可以查询其值的对象。

**编辑：具体问题：**

所以现在我需要一种方法来读取这组标签作为一个方程，并返回一个数值结果。作为最后的手段，我可​​以使用 google 或 wolfram alpha，但这会更慢，而且我试图让自动化系统完全独立。

如果您想查看整个源代码，请[访问 github。](https://github.com/Sprakle/HomeAutomation/tree/master/HomeAutomation) 请注意，我没有提交最后几个更改，因此我给出的一些与数学相关的示例将不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T00:02:38.537

经过更多的谷歌搜索（我一开始不知道我在做什么），我发现有人已经做了类似的事情：

[http://www.objecthunter.net/exp4j/](http://www.objecthunter.net/exp4j/)

编辑：完成： [https ://github.com/Sprakle/HomeAutomation/blob/master/HomeAutomation/src/net/sprakle/homeAutomation/interpretation/module/modules/math/Math.java](https://github.com/Sprakle/HomeAutomation/blob/master/HomeAutomation/src/net/sprakle/homeAutomation/interpretation/module/modules/math/Math.java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T23:56:04.820

本，他是对的。采用自然语言的解析动作要困难得多。您需要做的是为表达式添加数学优先级。您这样做的方法是将表达式置于某种预期的形式中，例如 post/pre/in-fix 并提供评估算法（post-fix 最终`pop(), pop(), evaluate(), push();`为运算符和操作数的交集。这不是您可以快速或轻松完成的任何事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T00:05:49.213

您需要的是一种解析方法，它将建立一个方程式并从您的文本中返回一个答案。我将采取一条线并逐步完成这种方法，然后您需要自己解决。请注意，这只是一个一般性的想法，Java 以外的一些语言可能更适合这种操作。

{QUESTION/math} {NUMBER/122} {MATH/pwr} {NUMBER/7}

```
//let's assume that the preprocessor reduces the input to an array that is something like this:
// [122, pwr, 7] (this is a very common construction in a language like LISP).

public static int math(string[] question){

   while(i < question.length){
      if(question[i] == "pwr"){
           return pow(Integer.parseInt(question[i-1]), Integer.parseInt(question[i+1]);
       }
       i++;
   }
  return 0;
} 
```

基本上，您需要的是一种从中缀到前缀表示法的好方法，只需一点字符串即可进行任何转换。

这样做可能有比我上面制作的更好的结构，但是这样的东西应该能让你继续前进。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T00:47:38.953

我写的代码依赖于给定的标签顺序是 "NUMBER" "MATH" "NUMBER" "MATH" "NUMBER" 并且它***完全忽略了 math 中的操作规则***。它**只是您可以做的一个大纲**，因此您可能需要对其进行一些修复才能做您想做的事情。

**由于时间不够，我没有测试这个文件，所以如果有必要调试它！**

```
import net.sprakle.homeAutomation.interpretation.tagger.tags.*;
import java.util.List;
import java.util.Arrays;

public class Math {

    private Tag[] tags; //Stores the converted tags as a "MathTag"

    //Requires an array of tags
    public Math(Tag[] inputTags) {
        tags = new MathTag[inputTags.length]; //create a new MathTag array
        System.arraycopy(inputTags, 0, tags, 0, tags.length); //Convert Tag array to MathTag array
    }

    //returns a value based on the tags
    //TODO: ADD MATHEMATICAL ORDER OF OPERATIONS!!!
    public double performMath() {
        double value = 0;//initial value to return

        for (int i = 0; i < tags.length; i++) { //perform initial check of the phrase given
            if (tags[i].getType() = TagType.NUMBER && !tags[i].getWasChecked() && i + 1 < tags.length) {
                value = performOperation(i, value, Double.parseDouble(tags[i].getValue()), tags[i+1].getType());
            } else if (tags[i].getType() = TagType.MATH && !tags[i].getWasChecked() && i + 1 < tags.length) {
                value = performOperation(i, value, Double.parseDouble(tags[i + 1].getValue()), tag.getType()); //I'm not positive if this would not cause issues
            }
        }
    }

    //Perform individual operations given the index of the operation, value1, value2, and the operation type
    //The order of the array "operations" must match the order of the operations in the switch statement.
    public double peformOperation(int i, double value1, double value2, String operation) {
        String[] operations = {"add", "subtract", "multiply", "divide", "pwr", "root"}; //Array of operations
        List list = Arrays.asList(operations); //Not exactly effecient, used to check what operation to perform

        switch (list.indexOf(operation)) { //Perform a task based on the operation
            case 0: //Addition
                tags[i].setChecked(true); //Number
                tags[i + 1].setChecked(true); //Operation
                return value1 + value2;
            case 1: //Subtraction
                tags[i].setChecked(true); //Number
                tags[i + 1].setChecked(true); //Operation
                return value1 - value2;
            case 2: //Multiplication
                tags[i].setChecked(true); //Number
                tags[i + 1].setChecked(true); //Operation
                return value1 * value2;
            case 3: //Division
                tags[i].setChecked(true); //Number
                tags[i + 1].setChecked(true); //Operation
                return value1 / value2;
            case 4: //Power
                tags[i].setChecked(true); //Number
                tags[i + 1].setChecked(true); //Operation
                return value1 * value1;
            case 5: //Square Root
                tags[i].setChecked(true); //Number
                tags[i + 1].setChecked(true); //Operation
                return Math.sqrt(value1);
        }

        return error(); //Non-valid operation found
    }

    //Need some way to detect an error
    public double error() {
        return 0;
    }

    //Need some way to check if a tag was looked at before
    class MathTag extends Tag {

        protected static boolean wasChecked = false;

        public void setChecked(boolean checked) {
            wasChecked = true;
        }

        public boolean getWasChecked() {
            return wasChecked;
        }
    }
} 
```

# css - 查找div的高度

> ID：15869150
> 
> 赞同：-1
> 
> 时间：2013-04-07T23:36:24.063
> 
> 标签：css, html, height

我遇到了一个小问题，我找不到 div 的高度，我从 Mysql 数据库中获取数据，所以它只是一堆文本。但容器的高度不会改变，所以背景只在页面的第一部分。

我考虑过使用 jQuery 或其他东西来查找 div 的高度并将我的 css 更改为该高度。

这是我正在谈论的div

```
<div id="artistright">
<h2>Biografie</h2>
<br />
<?php echo $data['biografie']; ?>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T23:39:22.510

常规高度

```
$('#id').height(); 
```

高度包括边距

```
$('#id').outerHeight(true); 
```

只要容器有库存 ( `height:auto`)，它就应该根据需要扩展。您可能正在使用浮点数而不是清除它们 ( `clear:both`)。

**更新：** 看起来这确实是一个浮动问题。当您使用它们时，必须正确清除浮动。你可以添加这个：

`<div style="clear:both"></div>`就在该`<div>`部分结束之前。

或者（只要它不会弄乱你的布局）

只需添加`clear:both`为 `#artistsright`.

# html - HTML5 在混合应用程序中嵌入 YouTube 视频，无需连接

> ID：15869152
> 
> 赞同：0
> 
> 时间：2013-04-07T23:36:30.853
> 
> 标签：html, video, youtube, hybrid-mobile-app

我正在开发一个 html5 移动应用程序...我必须创建一个包含 YouTube 视频和其他一些元素的页面...我使用 iframe 代码加载视频...

```
<iframe width="100%" height="auto" src="http://www.youtube.com/embed/VIDEO-ID" frameborder="0" allowfullscreen></iframe> 
```

这行得通...问题是当用户没有互联网连接时...我想展示一张图片...这怎么可能？！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T23:51:04.797

假设您对 javascript 没问题：

```
<script type="text/javascript">
if(navigator.onLine!==true)
    document.getElementsByTagName('iframe')[0].outerHTML='<img src="blah.png">';
</script> 
```

`document.getElementsByTagName('iframe')[0]`如果页面中有多个 iframe，则可以使用其他内容。

# ios - prepareForSegue **总是** 创建一个新的destinationViewController？

> ID：15869155
> 
> 赞同：6
> 
> 时间：2013-04-07T23:37:08.153
> 
> 标签：ios, objective-c, uistoryboard, uistoryboardsegue

我刚刚意识到下面的代码总是会创建一个新的 TagsFeedViewController。这是 segues 的默认行为吗？有没有办法将 iOS 配置为不每次都创建新的destinationViewController？

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"showSearchResult"]) {
        TagsFeedViewController *destViewController = segue.destinationViewController;
        destViewController.query = query;
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-08T01:02:09.440

Segue 使用为其`– initWithIdentifier:source:destination:`方法提供的任何视图控制器。创建目标视图控制器的不是 segue，而是故事板。从[文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIStoryboard_Class/Reference/Reference.html)：

> 通常，故事板中的视图控制器会自动实例化和创建，以响应故事板本身中定义的操作。

所以你有一些选择：

*   **子类 UIStoryboard。**可能是个坏主意。UIStoryboard 的公共接口只有三个方法；“情节提要本身中定义的动作”不公开，我认为没有足够的信息可以让您正确完成工作。

*   **使您的目标视图控制器成为单例。**也是个坏主意。除了[单例带来的普遍不良影响](https://stackoverflow.com/q/137975/643383)之外，您不需要保留一个没有视图和子视图控制器的视图控制器。并且让您的视图控制器类成为单例只是为了欺骗 UIStoryboard 使用您的视图控制器类的特定实例似乎有点恶心。

*   **子类 UIStoryboardSegue。**如果你创建自己的 segue，你可以做你喜欢的事情`– initWithIdentifier:source:destination:`，包括忽略提供的目标视图控制器并使用你想要的。这似乎仍然违反框架，这通常是一个糟糕的计划，但如果您绝对必须使用目标视图控制器的特定实例，这似乎是一个更好的方法。

*   **顺其自然。**最佳选择。考虑一下您希望继续使用现有视图控制器的原因。考虑是否有更好的方法来完成你想要的，而不必颠覆框架。例如，您是否想使用现有的视图控制器，因为它已经具有某些特定状态？也许最好在模型中而不是在视图控制器中维护该状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T23:50:42.583

是的，这是 segues 的默认行为。有关更多信息，请参阅此[帖子](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/ManagingDataFlowBetweenViewControllers/ManagingDataFlowBetweenViewControllers.html#//apple_ref/doc/uid/TP40007457-CH8-SW4) 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T07:17:14.710

[您可以通过处理shouldPerformSegueWithIdentifier:sender:](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/shouldPerformSegueWithIdentifier%3asender%3a)消息来阻止创建控制器。

```
-(BOOL) shouldPerformSegueWithIdentifier:(NSString *)identifier sender:(id)sender 
{
    if ([identifier isEqualToString:@"showSearchResult"]) {
       return [self.results count] > 0;
    }
    return YES;
} 
```

# python - Python 套接字监听

> ID：15869158
> 
> 赞同：12
> 
> 时间：2013-04-07T23:37:29.390
> 
> 标签：python, sockets, python-2.7

**下面提到的所有内容都是在使用 python 2.7 的 Windows 机器上**

你好，

我目前正在尝试在套接字上侦听远程程序发送的数据。然后将该数据打印到屏幕上，并请求用户输入，然后将其返回到远程程序。在测试中，我能够让远程程序向我发送一个命令行程序菜单（cmd、ipconfig、whoami、ftp），然后我的程序返回一个数字作为菜单选项的选择。

远程程序接收我的响应并发送所选命令的输出。ipconfig 和 whoami 工作完美，但 cmd 和 ftp 只返回一次终端的输出。（即我可以在 FTP 程序中输入一个命令，然后在我再也没有回音之前将它发送到远程程序）

我的代码中失败的部分是 `if ready[0]:`在第一次对话后第二次没有准备好。

我知道远程程序运行正常，因为我可以使用 netcat 代替我的代码并无限期地操作 cmd 终端。

如何正确实现可以解释这种类型连接的 python 套接字侦听器？

我的整个“程序”：

```
import socket, sys, struct, time, select

host = ''
port = 50000
connectionSevered=0

try:
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
except socket.error:
    print 'Failed to create socket'
    sys.exit()
print '[+] Listening for connections on port '+str(port)+'.'

s.bind((host,port))
s.listen(5)         

def recvall(the_socket,timeout=2):
    global connectionSevered
    data='';          # Data found by recv
    total_data=[];    # Finally list of everything

    s.setblocking(0)  #make socket non blocking
    begin=time.time() #beginning time

    while 1:
        ready = select.select([client], [], [], .2)
        if time.time()-begin > timeout:
            print 'Timeout reached'
            #Leave loop, timer has reached its threshold
            break
        if ready[0]:
            print 'In ready loop!'
            try:
                data = client.recv(4096)    #attempt to fetch data
                if data:
                    begin=time.time()       #reset timeout timer
                    total_data.append(data) 
                    data='';
            except socket.error:
                print '[+] Lost connection to client. Printing buffer...'
                connectionSevered=1   # Let main loop know connection has errored
                pass
        time.sleep(1)
    #join all parts to make final string
    return ''.join(total_data)

client, address = s.accept()
print '[+] Client connected!'

while (connectionSevered==0): # While connection hasn't errored
    print "connectionSevered="+str(connectionSevered) # DEBUG
    recvall(s)
    response = raw_input()                  #take user input
    client.sendto(response)                   #send input
client.close(0) 
```

如果您需要更多信息，请告诉我，任何帮助将不胜感激，我对此很陌生并且渴望学习。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-12T21:10:23.997

玩了一段时间终于让它在本地使用 python 2.7 的 telnet 会话很好地工作。

它的作用是设置一个线程，该线程在客户端连接侦听客户端内容时运行。

当客户端发送返回时（如果您与 Linux 系统交互，“\r\n”可能需要更改？）消息被打印到服务器，而如果服务器端有原始输入，则会发生这种情况将被发送给客户端：

```
import socket
import threading
host = ''
port = 50000
connectionSevered=0

class client(threading.Thread):
    def __init__(self, conn):
        super(client, self).__init__()
        self.conn = conn
        self.data = ""
    def run(self):
        while True:
            self.data = self.data + self.conn.recv(1024)
            if self.data.endswith(u"\r\n"):
                print self.data
                self.data = ""

    def send_msg(self,msg):
        self.conn.send(msg)

    def close(self):
        self.conn.close()

try:
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.bind((host,port))
    s.listen(5)
except socket.error:
    print 'Failed to create socket'
    sys.exit()

print '[+] Listening for connections on port: {0}'.format(port)

conn, address = s.accept()
c = client(conn)
c.start()
print '[+] Client connected: {0}'.format(address[0])
c.send_msg(u"\r\n")
print "connectionSevered:{0}".format(connectionSevered) 
while (connectionSevered==0):
    try:
        response = raw_input()  
        c.send_msg(response + u"\r\n")
    except:
        c.close() 
```

上述答案不适用于多个连接。我已经通过添加另一个线程来进行连接来更新它。现在可以连接多个用户。

```
import socket
import threading
import sys
host = ''
port = 50000

class client(threading.Thread):
    def __init__(self, conn):
        super(client, self).__init__()
        self.conn = conn
        self.data = ""

    def run(self):
        while True:
            self.data = self.data + self.conn.recv(1024)
            if self.data.endswith(u"\r\n"):
                print self.data
                self.data = ""

    def send_msg(self,msg):
        self.conn.send(msg)

    def close(self):
        self.conn.close()

class connectionThread(threading.Thread):
    def __init__(self, host, port):
        super(connectionThread, self).__init__()
        try:
            self.s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
            self.s.bind((host,port))
            self.s.listen(5)
        except socket.error:
            print 'Failed to create socket'
            sys.exit()
        self.clients = []

    def run(self):
        while True:
            conn, address = self.s.accept()
            c = client(conn)
            c.start()
            c.send_msg(u"\r\n")
            self.clients.append(c)
            print '[+] Client connected: {0}'.format(address[0])

def main():
    get_conns = connectionThread(host, port)
    get_conns.start()
    while True:
        try:
            response = raw_input() 
            for c in get_conns.clients:
                c.send_msg(response + u"\r\n")
        except KeyboardInterrupt:
            sys.exit()

if __name__ == '__main__':
    main() 
```

客户端无法看到其他客户端说什么，来自服务器的消息将发送到所有客户端。我将把它作为练习留给读者。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-03-19T01:00:58.263

如果您现在使用 Python 3 并且仍然想知道套接字，这里是使用它们的基本方法：

**服务器.py**

```
import time
import socket

# creating a socket object
s = socket.socket(socket.AF_INET,
                  socket.SOCK_STREAM)

# get local Host machine name
host = socket.gethostname() # or just use (host == '')
port = 9999

# bind to pot
s.bind((host, port))

# Que up to 5 requests
s.listen(5)

while True:
    # establish connection
    clientSocket, addr = s.accept()
    print("got a connection from %s" % str(addr))
    currentTime = time.ctime(time.time()) + "\r\n"
    clientSocket.send(currentTime.encode('ascii'))
    clientSocket.close() 
```

**客户端.py**

```
import socket

# creates socket object
s = socket.socket(socket.AF_INET,
                  socket.SOCK_STREAM)

host = socket.gethostname() # or just use (host = '')
port = 9999

s.connect((host, port))

tm = s.recv(1024) # msg can only be 1024 bytes long

s.close()
print("the time we got from the server is %s" % tm.decode('ascii')) 
```

先运行 server.py，再运行 client.py。

这只是发送和接收当前时间。

**Python 3.4 套接字有什么新功能？**

python 2.7 套接字和 python 3.4 套接字之间的主要区别在于发送消息。你必须`.encode()`（通常使用'ascii'或空白作为参数/参数）然后使用`.decode()`

例如用于`.encode()`发送和用于`.decode()`接收。

额外信息：[客户端/服务器套接字教程](http://www.bogotobogo.com/python/python_network_programming_server_client.php)

# android - 安卓 + 谷歌 API v2

> ID：15869159
> 
> 赞同：0
> 
> 时间：2013-04-07T23:37:31.270
> 
> 标签：android, google-maps, error-handling

我正在使用真实设备上的 google map v2 创建一个应用程序，但是我遇到了一个问题，应用程序强制关闭了在我阅读了很多很多解决方案后如何解决这个问题，它们都没有与我一起使用它是关于**片段的**

# 清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="12"
        android:targetSdkVersion="17" />

    <permission 

        android:name="com.example.permission.MAPS_RECIEVE"
        android:protectionLevel="signature"/>

     <uses-permission android:name="com.example.permission.MAPS_RECIEVE" />
     <uses-permission android:name="android.permission.INTERNET"/>
     <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
     <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
     <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
     <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

     <uses-feature 
         android:glEsVersion="0x00020000"
         android:required="true" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <meta-data 
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="AIzaSyC6Sh22y4wF_tKlrE2MljwZ7Cd9-8V-Nks"/>
        <activity
            android:name="com.example.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

# 布局文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <TextView
        android:id="@+id/header"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world" />

    <fragment 
        android:id="@+id/map"
        android:name="com.google.android.gms.maps.MapFragment"
        android:layout_below="@+id/header"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        />

</RelativeLayout> 
```

# 文件

```
package com.example;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

# 记录猫文件

```
04-08 02:29:33.500: D/dalvikvm(25400): Late-enabling CheckJNI
04-08 02:29:33.535: D/dalvikvm(25400): Debugger has detached; object registry had 1 entries
04-08 02:29:33.730: D/AndroidRuntime(25400): Shutting down VM
04-08 02:29:33.730: W/dalvikvm(25400): threadid=1: thread exiting with uncaught exception (group=0x40d4b2a0)
04-08 02:29:33.750: E/AndroidRuntime(25400): FATAL EXCEPTION: main
04-08 02:29:33.750: E/AndroidRuntime(25400): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example/com.example.MainActivity}: android.view.InflateException: Binary XML file line #17: Error inflating class fragment
04-08 02:29:33.750: E/AndroidRuntime(25400):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
04-08 02:29:33.750: E/AndroidRuntime(25400):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
04-08 02:29:33.750: E/AndroidRuntime(25400):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
04-08 02:29:33.750: E/AndroidRuntime(25400):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
04-08 02:29:33.750: E/AndroidRuntime(25400):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-08 02:29:33.750: E/AndroidRuntime(25400):    at android.os.Looper.loop(Looper.java:137)
04-08 02:29:33.750: E/AndroidRuntime(25400):    at android.app.ActivityThread.main(ActivityThread.java:4898)
04-08 02:29:33.750: E/AndroidRuntime(25400):    at java.lang.reflect.Method.invokeNative(Native Method)
04-08 02:29:33.750: E/AndroidRuntime(25400):    at java.lang.reflect.Method.invoke(Method.java:511)
04-08 02:29:33.750: E/AndroidRuntime(25400):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
04-08 02:29:33.750: E/AndroidRuntime(25400):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
04-08 02:29:33.750: E/AndroidRuntime(25400):    at dalvik.system.NativeStart.main(Native Method)
04-08 02:29:33.750: E/AndroidRuntime(25400): Caused by: android.view.InflateException: Binary XML file line #17: Error inflating class fragment
04-08 02:29:33.750: E/AndroidRuntime(25400):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
04-08 02:29:33.750: E/AndroidRuntime(25400):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
04-08 02:29:33.750: E/AndroidRuntime(25400):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
04-08 02:29:33.750: E/AndroidRuntime(25400):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
04-08 02:29:33.750: E/AndroidRuntime(25400):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
04-08 02:29:33.750: E/AndroidRuntime(25400):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:308)
04-08 02:29:33.750: E/AndroidRuntime(25400):    at android.app.Activity.setContentView(Activity.java:1924)
04-08 02:29:33.750: E/AndroidRuntime(25400):    at com.example.MainActivity.onCreate(MainActivity.java:12)
04-08 02:29:33.750: E/AndroidRuntime(25400):    at android.app.Activity.performCreate(Activity.java:5206)
04-08 02:29:33.750: E/AndroidRuntime(25400):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
04-08 02:29:33.750: E/AndroidRuntime(25400):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
04-08 02:29:33.750: E/AndroidRuntime(25400):    ... 11 more
04-08 02:29:33.750: E/AndroidRuntime(25400): Caused by: android.app.Fragment$InstantiationException: Unable to instantiate fragment com.google.android.gms.maps.MapFragment: make sure class name exists, is public, and has an empty constructor that is public
04-08 02:29:33.750: E/AndroidRuntime(25400):    at android.app.Fragment.instantiate(Fragment.java:584)
04-08 02:29:33.750: E/AndroidRuntime(25400):    at android.app.Fragment.instantiate(Fragment.java:552)
04-08 02:29:33.750: E/AndroidRuntime(25400):    at android.app.Activity.onCreateView(Activity.java:4849)
04-08 02:29:33.750: E/AndroidRuntime(25400):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
04-08 02:29:33.750: E/AndroidRuntime(25400):    ... 21 more
04-08 02:29:33.750: E/AndroidRuntime(25400): Caused by: java.lang.ClassNotFoundException: com.google.android.gms.maps.MapFragment
04-08 02:29:33.750: E/AndroidRuntime(25400):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
04-08 02:29:33.750: E/AndroidRuntime(25400):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
04-08 02:29:33.750: E/AndroidRuntime(25400):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
04-08 02:29:33.750: E/AndroidRuntime(25400):    at android.app.Fragment.instantiate(Fragment.java:574)
04-08 02:29:33.750: E/AndroidRuntime(25400):    ... 24 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T06:49:39.193

您的错误是：

```
Caused by: android.app.Fragment$InstantiationException: Unable to instantiate fragment com.google.android.gms.maps.MapFragment: make sure class name exists, is public, and has an empty constructor that is public 
```

这意味着基本上`MapFragment`找不到类。`MapFragment`是`google-play-services`图书馆的一部分。要使用它，您需要将其导入`google-play-services`到您`workspace`的项目中，然后从您的项目中引用它，您可以在`first 3 steps`我写的这篇博客文章中了解它是如何完成的：

[谷歌地图 API V2](http://blog-emildesign.rhcloud.com/?p=435)

# css - 使渐变适应浏览器高度

> ID：15869162
> 
> 赞同：0
> 
> 时间：2013-04-07T23:37:49.157
> 
> 标签：css, html

如果您在非最大化窗口中打开我的页面[http://goo.gl/68s0t](http://goo.gl/68s0t)（请不要替换此处的链接，因为我不希望 google 将此页面链接到我的网站。）并在之后最大化它加载后，您会在下部看到渐变重新开始。在 opera 中它是一种渐变，但在其他浏览器中它是垂直重复的。

1.  如何使它不重复，即使渐变适应当前浏览器高度？

2.  有时，我在右下角和左下角看到蓝色方块，是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T23:54:24.290

要回答 (2)，蓝色方块是由同时应用于 body 和 html 元素的背景引起的。由于 body 有一个小的边距（默认情况下从浏览器），它向下延伸超出 html 几个像素。它们都具有相同的高度，body 只是垂直偏移了 8px。

左侧和右侧的边距导致这些小框。

要解决此问题，请从 html 中删除背景，仅将其应用于正文，并将边距更改为填充，如果您想要那里的空间。

# c++ - 创建和编写文件 C++

> ID：15869163
> 
> 赞同：0
> 
> 时间：2013-04-07T23:37:54.923
> 
> 标签：c++, compiler-construction, scripting, hex, writetofile

我已经制作了一种脚本语言，并且正在编写一个程序，该程序将 1：询问您读取脚本的路径和 2：将代码编译为自定义的十六进制，另一个程序可以读取该十六进制来为我完成艰苦的工作。我的问题是我无法创建新文件并将自定义十六进制代码写入该文件。

这是我的代码示例：

```
#include <iostream>
#include <string>
#include <Windows.h>
#include <wincon.h>
#include <fstream>;
using namespace std;

int main(){
string path;
string title;
cout << "Enter your path to compile your *.egSCRIPT file: ";
cin >> path;
cout << "Enter the title for the new file";
cin >> title;

ofstream myfile(path+"\\"+title+".myScriptLanguage");
myfile.open(path);
myfile << "IT WORKS!!!";
myfile.close();
return 0;
} 
```

我希望它创建一个新的 .whatevertheheckyouwanttocallit 文件并写入文件 IT WORKS ！！！只是作为一个样本。我最终将在其上写入一个自定义的十六进制代码系统，以供我的解释器读取。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T23:42:55.923

```
ofstream myfile;
myfile.open(path+"\\"+title+".myScriptLanguage");
myfile << "IT WORKS!!!";
myfile.close(); 
```

试试上面的；

# c# - wpf后台加载

> ID：15869166
> 
> 赞同：0
> 
> 时间：2013-04-07T23:38:10.860
> 
> 标签：c#, wpf, backgroundworker

我正在使用 WindowsFormsHost 加载到 3d 渲染对象中。

事实上，我把它拿走了。

我的问题是我希望创建一些加载屏幕或类似内容，但仅使用后台工作程序，当我访问我的 WindowsFormsHost 属性（读取、高度、宽度和句柄）时，线程引发异常..

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:39:53.050

您可以按照这篇文章中的说明更新 UI 线程：[Notify the UI Thread from Background Thread](https://stackoverflow.com/questions/6750145/notify-the-ui-thread-from-background-thread)

粗略地说：您只需要 UI 线程上的 dispatcher.BeginInvoke （用于异步调用）。

# c - GNU GDB：自定义观察点输出格式

> ID：15869168
> 
> 赞同：2
> 
> 时间：2013-04-07T23:38:23.397
> 
> 标签：c, debugging, gdb, breakpoints, watchpoint

每次修改观察点时，GDB 都会打印旧值和新值。但是，有时我不想以默认的十进制整数格式打印该值：例如，如果我正在观察`*(unsigned*)$ebp`调试可能的堆栈溢出（哇，SO...），除非以十六进制显示，否则该值是无意义的格式（例如`p/x`打印某些内容时）。

是否可以为特定观察点设置显示格式？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T02:27:11.687

> 是否可以为特定观察点设置显示格式？

如果您希望观察点以十六进制打印，请将其设置为指针的观察点，例如

```
watch *(char**)$ebp     or
watch *(void**)$ebp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-23T08:38:01.183

```
set output-radix 16 
```

请参考这个答案[How to make gdb print out all values in hexadecimal mode?](https://stackoverflow.com/a/6618686/5409274) 您可以设置由于 gdb 发生的所有类型的打印（可能是因为断点、观察点或您的自定义打印）将具有十六进制格式。

# html - 引导缩略图未正确堆叠

> ID：15869169
> 
> 赞同：3
> 
> 时间：2013-04-07T23:38:32.493
> 
> 标签：html, css, twitter-bootstrap

我的 bootstrap 缩略图与它们有不同的高度，我认为这个问题可能导致它们无法正确堆叠（参见屏幕截图和小提琴）。我想我需要为他们包括一个最小高度，但我就是无法让它工作..有人可以帮忙吗？

这是我拥有的代码：

```
<body>
    <div class="container-fluid">
      <div class="hidden-phone">
        <a href="newBook.php">
        <button class="btn btn-large btn-primary" style="float:right; margin-top:30px;" type="button">Add Book</button>
        </a>
      </div>
      <div class="row-fluid">
        <div class="span12 well">

        <div class="row-fluid">
          <ul class="thumbnails">

            <li class="span4">
              <div class="thumbnail">
                <img src="http://placehold.it/320x200" alt="ALT NAME">
                <div class="caption">
                  <h3>Title</h3>

                  <p>Seller: Me</p>
                  <p>Email: </p>
                  <p>Cost: </p>
                  <p>Condition: </p>
                  <p align="center">
                    <a href="#myModal" class="btn btn-primary btn-block" data-toggle="modal">View More information</a>
                  </p>
                </div>
              </div>
            </li> 
             <li class="span4">
              <div class="thumbnail">
                <img src="http://placehold.it/320x200" alt="ALT NAME">
                <div class="caption">
                  <h3>Title</h3>
                  <span class="label label-warning" style="margin-bottom: 10px;">Book has been sold!</span>
                  <p>Seller: Me</p>
                  <p>Email: </p>
                  <p>Cost: </p>
                  <p>Condition: </p>
                  <p align="center">
                    <a href="#myModal" class="btn btn-primary btn-block" data-toggle="modal">View More information</a>
                  </p>
                </div>
              </div>
            </li> 
             <li class="span4">
              <div class="thumbnail">
                <img src="http://placehold.it/320x200" alt="ALT NAME">
                <div class="caption">
                  <h3>Title</h3>

                  <p>Seller: Me</p>
                  <p>Email: </p>
                  <p>Cost: </p>
                  <p>Condition: </p>
                  <p align="center">
                    <a href="#myModal" class="btn btn-primary btn-block" data-toggle="modal">View More information</a>
                  </p>
                </div>
              </div>
            </li> 

             <li class="span4">
              <div class="thumbnail">
                <img src="http://placehold.it/320x200" alt="ALT NAME">
                <div class="caption">
                  <h3>Title</h3>

                  <p>Seller: Me</p>
                  <p>Email: </p>
                  <p>Cost: </p>
                  <p>Condition: </p>
                  <p align="center">
                    <a href="#myModal" class="btn btn-primary btn-block" data-toggle="modal">View More information</a>
                  </p>
                </div>
              </div>
            </li> 
                         <li class="span4">
              <div class="thumbnail">
                <img src="http://placehold.it/320x200" alt="ALT NAME">
                <div class="caption">
                  <h3>Title</h3>

                  <p>Seller: Me</p>
                  <p>Email: </p>
                  <p>Cost: </p>
                  <p>Condition: </p>
                  <p align="center">
                    <a href="#myModal" class="btn btn-primary btn-block" data-toggle="modal">View More information</a>
                  </p>
                </div>
              </div>
            </li> 

          </ul>
        </div>
    </div>
    </div>
    </div>

  </body> 
```

小提琴：`http://jsfiddle.net/Z3VwZ/`

屏幕： ![在此处输入图像描述](https://i.stack.imgur.com/9pTVh.png) ![在此处输入图像描述](https://i.stack.imgur.com/4t4Us.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T23:47:14.280

不，div 的高度不是问题。问题是您必须只将三个带`.span4`类的 div 放在一个带`.row-fluid`类的 div 中。如果你想要更多的 div，`.span4`你必须用`.row-fluid`类创建新的 div 并将这些新的`.span4`div 放入其中。[请参阅 Twitter 引导程序官方文档](http://twitter.github.io/bootstrap/scaffolding.html#fluidGridSystem)。

例如，这是有效的 Twitter Bootstrap 标记

```
<div class="row-fluid">
   <div class="span4"></div>
   <div class="span4"></div>
   <div class="span4"></div>
</div>

<div class="row-fluid">
   <div class="span4"></div>
   <div class="span4"></div>
   <div class="span4"></div>
</div>

<div class="row-fluid">
   <div class="span12"></div>
</div>

<div class="row-fluid">
   <div class="span8"></div>
   <div class="span1"></div>
   <div class="span3"></div>
</div> 
```

这是使用您的代码进行演示 >>> [http://jsfiddle.net/Z3VwZ/1/](http://jsfiddle.net/Z3VwZ/1/)

# c++ - 将 ruby 嵌入到带有 args 的 c++ 中并返回对象

> ID：15869170
> 
> 赞同：3
> 
> 时间：2013-04-07T23:38:45.330
> 
> 标签：c++, ruby, embed

我有一个希望能够嵌入 ruby​​ 的 c++ 应用程序。

**我想**：

1.  构造一个红宝石对象
2.  加载一个 ruby​​ 文件并使用该对象作为参数调用一个特定的函数
3.  在 C++ 代码中从该函数调用中获取返回值

**问题**：

1.  是否可以将对象传递到 ruby​​ 脚本中？如果是这样，你能举一个简单的例子或给我一个例子吗？
2.  是否可以将返回值作为对象从脚本中获取到 C++ 代码中？如果是这样，你能举一个简单的例子或给我一个例子吗？

**附加阅读**

参考[这个 SO question](https://stackoverflow.com/questions/626333/embedding-a-ruby-interpreter-in-a-c-app)，以防有人在这里阅读并想知道如何将 ruby​​ 解释器嵌入到他们的 c++ 应用程序中。

**[更新]**

1.  我发现[这个讨论](http://www.ruby-forum.com/topic/147365)是关于做我正在谈论的事情。所以，我会说答案是肯定的，我正在尝试做的事情是可能的。稍后我将发布一个使用[Rice](http://rice.rubyforge.org)的示例，或者在我的[博客上](http://bitcycle.blogspot.com)发布。

# msbuild - TFS2010 数据库大小

> ID：15869172
> 
> 赞同：1
> 
> 时间：2013-04-07T23:38:59.233
> 
> 标签：msbuild, tfsbuild

自 2009 年左右安装 TFS2008 以来，我们一直在使用 TFS。我们在某个时候升级到了 TFS2010，我们一直将它用于源代码控制、工作项管理、构建等。

我们的 TFSVersionControl.mdf 文件为 287,120,000 KB (273GB)。我们运行了一些查询，发现我们的 tbl_BuildInformationField 表非常庞大。它有 1,358,430,452 行，占用 150,988,624 KB (143GB)。我们在多个活动版本中拥有多个活动产品，每个版本有多个解决方案，并且这些解决方案并非没有警告消息。

我的问题：

1.  是否可以阻止 MSBuild 向 tbl_BuildInformationField 表发送大量垃圾邮件？即只写错误和一般构建信息，而不是每个项目的所有警告？
2.  有没有办法从这个表中清除或清理旧数据？
3.  4 年的 TFS 使用 273GB 是平均大小吗？
4.  tbl_BuildInformationField 的 143GB 是“正常”大小吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T10:26:31.483

该表包含构建过程的值和输出。请注意，构建保留策略实际上并不像 TFS 中的其他所有内容一样删除构建对象，该对象被标记为已删除，并且仅清除公共可见性和放置位置。

我建议如果您长时间保留相同的构建定义（删除构建定义时，相关对象也会被删除）您应该查询构建信息，包括使用 TFS api 删除的那些，相同的 api 也将允许您删除他们永远。删除构建定义可能不起作用，并且会因超时错误而失败。

您可以查阅以下内容：http: [//blogs.msdn.com/b/adamroot/archive/2009/06/12/working-with-deleted-build-data-in-team-foundation-server-2010-beta- 1.aspx](http://blogs.msdn.com/b/adamroot/archive/2009/06/12/working-with-deleted-build-data-in-team-foundation-server-2010-beta-1.aspx)

# libpcap - 使用 tcpdump 获取 wlan 的加密类型

> ID：15869177
> 
> 赞同：3
> 
> 时间：2013-04-07T23:39:53.547
> 
> 标签：libpcap, tcpdump, sniffing, wifi

如何从 tcpdump 获取信标中发送的实际加密类型？我在手册页条目、Google 和网站上搜索了 tcpdump 和 pcap 均无济于事。我将 snaplen 设置为最高值，type =`IEEE802_11_RADIO`并且可以从`tcpdump -i mon0 -vvv -le 'wlan type mgt subtype beacon'`甚至没有将帧类型指定为 mgmt 的情况下看到大量数据。我正在使用最新的稳定版本：4.3.0 和 libpcap 1.1.1

如果正在使用加密，则所有字符串都显示为“PRIVACY”。

# c++ - 我在这里做错了什么？我的编译中有几个“与运算符不匹配”错误

> ID：15869179
> 
> 赞同：1
> 
> 时间：2013-04-07T23:40:30.040
> 
> 标签：c++

这些似乎是我唯一的错误。据我了解，如果我将“sortedListClass”设置为等于另一个声明的“sortedListClass”，或者如果我询问它们是否小于、等于、不等于等，我只需要重载一个运算符。但这些是用户声明...没有声明“sortedListClasses”所以我很困惑..任何人都可以阐明这些编译错误吗？谢谢！

我将包括我拥有的所有代码，以防其中任何一个对错误有重要意义......

基本上我正在处理带有结构和指针的链表..

这是我的清单.h：

```
#ifndef LIST_H
#define LIST_H

struct cities
{
    string city;    
};
typedef cities listItemType;
typedef struct Node* nodePtr;
struct Node
{
    listItemType data;
    nodePtr next;
};

#endif 
```

这是我的 sortedListClass.h ：

```
#include <iostream>
#include <fstream>

using namespace std;

#include "list.h"

#ifndef sortedList_Class
#define sortedList_Class

class sortedListClass
{

    private:
        int size;
        nodePtr Head;

    public:
        //Constructors and Destructor
        sortedListClass();
        sortedListClass(const sortedListClass& L);
        ~sortedListClass();

        //List operations
        void ListInsert(listItemType NewItem);
        void ListDelete();
        void RetrieveCity();
        void PrintList();
        int ListLength() const;
        bool ListIsEmpty() const;
}; //End Class
#endif 
```

这是我的 sortedListClass.cpp ：

```
//Sorted List Class
//Contains function definitions for actions towards the cities Linked List

#include "sortedListClass.h"
#include <iostream>
#include <cstdlib>
#include <string>

sortedListClass::sortedListClass()
{
    size = 0;
    Head = NULL;
}

sortedListClass::sortedListClass(const sortedListClass& List)
{
    if(List.Head == NULL)
        Head = NULL;
    else
    {
        Head = new Node;
        Head->data = List.Head->data;

        nodePtr NewPtr = Head;

        for(nodePtr OrigPtr = List.Head -> next; OrigPtr != NULL; OrigPtr = OrigPtr-> next)
        {
            NewPtr-> next = new Node;
            NewPtr = NewPtr -> next;
            NewPtr -> data = OrigPtr -> data;
        }
            NewPtr -> next = NULL;
    }
}

sortedListClass::~sortedListClass()
{
    bool success;
    while(!ListIsEmpty())
        ListDelete();
}

bool sortedListClass::ListIsEmpty() const
{
    return bool( size == 0);
}

int sortedListClass::ListLength() const
{
    return size;
}

void sortedListClass::RetrieveCity()
{
    string city;
    bool success;
    cout <<"Input a city name: ";
    cin >> city;
    cout << endl;
    nodePtr cur = Head;
    while(cur != NULL)
    {
        if(cur->data == city)
        {
            cout <<"This city is found" << endl;
            success = true;
        }
        cur = cur->next;
    }
    if(!success)
        cout <<"This city is not served" << endl;

}

void sortedListClass::PrintList()
{
    nodePtr cur = Head;
    cout << "Number of cities: " << size << endl;
    while(cur!= NULL)
    {
        cout <<cur->data;
        cur = cur->next;
    }
}

void sortedListClass::ListInsert(listItemType Item)
{
    nodePtr newNode = new Node;
    newNode -> data = Item;
    newNode->next = NULL;
    if(Head = NULL)
        Head = newNode;
    else if (Item < Head->data)
    {
        newNode->next = Head;
        Head = newNode;
    }

    nodePtr curr = Head, prev = Head;
    while((newNode->data > curr->data) && (curr != NULL))
    {
        prev = curr;
        curr = curr -> next;
    }

    if(curr->next == NULL)
    {
        curr->next = newNode;
        newNode->next = NULL;
    }
    else if(curr->data > newNode->data)
    {
        newNode->next = curr;
        prev->next = newNode;
    }
}

void sortedListClass::ListDelete()
{
    bool success = false;
    string city;
    cout << "Enter a city name to delete from the list: " << endl;
    cin >> city;
    nodePtr p = new Node;
    nodePtr curr, prev;
    curr = Head;
    prev = Head;
    p -> data = city;
    p -> next = NULL;
    if(Head == NULL)
        cout <<"Unable to delete anything, list is empty." << endl;
    else
    {
        while(curr->next != NULL)
        {
            if(curr -> data == p -> data)
            {
                prev->next = curr->next;
                curr->next = NULL;
                delete curr;
                curr = NULL;
                success = true;
            }
            else
            prev = curr;
            curr = curr->next;
        }
    }
    if(!success)
        cout <<"This city does not exist. Deletion cannot be performed." << endl;

} 
```

这是我得到的错误......

```
sortedListClass.cpp: In member function ‘void sortedListClass::RetrieveCity()’:
sortedListClass.cpp:63: error: no match for ‘operator==’ in ‘cur->Node::data == city’
sortedListClass.cpp: In member function ‘void sortedListClass::PrintList()’:
sortedListClass.cpp:81: error: no match for ‘operator<<’ in ‘std::cout << cur->Node::data’
/usr/include/c++/4.4/ostream:108: note: candidates are: std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(std::basic_ostream<_CharT, _Traits>& (*)(std::basic_ostream<_CharT, _Traits>&)) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/include/c++/4.4/ostream:117: note:                 std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(std::basic_ios<_CharT, _Traits>& (*)(std::basic_ios<_CharT, _Traits>&)) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/include/c++/4.4/ostream:127: note:                 std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(std::ios_base& (*)(std::ios_base&)) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/include/c++/4.4/ostream:165: note:                 std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(long int) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/include/c++/4.4/ostream:169: note:                 std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(long unsigned int) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/include/c++/4.4/ostream:173: note:                 std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(bool) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/include/c++/4.4/bits/ostream.tcc:91: note:                 std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(short int) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/include/c++/4.4/ostream:180: note:                 std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(short unsigned int) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/include/c++/4.4/bits/ostream.tcc:105: note:                 std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(int) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/include/c++/4.4/ostream:191: note:                 std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(unsigned int) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/include/c++/4.4/ostream:200: note:                 std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(long long int) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/include/c++/4.4/ostream:204: note:                 std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(long long unsigned int) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/include/c++/4.4/ostream:209: note:                 std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(double) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/include/c++/4.4/ostream:213: note:                 std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(float) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/include/c++/4.4/ostream:221: note:                 std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(long double) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/include/c++/4.4/ostream:225: note:                 std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(const void*) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/include/c++/4.4/bits/ostream.tcc:119: note:                 std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(std::basic_streambuf<_CharT, _Traits>*) [with _CharT = char, _Traits = std::char_traits<char>]
sortedListClass.cpp: In member function ‘void sortedListClass::ListInsert(listItemType)’:
sortedListClass.cpp:93: error: no match for ‘operator<’ in ‘Item < ((sortedListClass*)this)->sortedListClass::Head->Node::data’
sortedListClass.cpp:100: error: no match for ‘operator>’ in ‘newNode->Node::data > curr->Node::data’
sortedListClass.cpp:111: error: no match for ‘operator>’ in ‘curr->Node::data > newNode->Node::data’
sortedListClass.cpp: In member function ‘void sortedListClass::ListDelete()’:
sortedListClass.cpp:128: error: no match for ‘operator=’ in ‘p->Node::data = city’
list.h:5: note: candidates are: cities& cities::operator=(const cities&)
sortedListClass.cpp:136: error: no match for ‘operator==’ in ‘curr->Node::data == p->Node::data’
[1]+  Done                    scite sortedListClass.cpp 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T23:44:32.097

# c# - 如何使用单元测试断言 Linq 集合

> ID：15869180
> 
> 赞同：2
> 
> 时间：2013-04-07T23:40:36.000
> 
> 标签：c#, linq, unit-testing

我用 LinQ 写了简单的 group by

```
public IList dividedNumbersto5(IEnumerable<int> NumberOfCollection)
{
    IList reminderNumber = NumberOfCollection.ToList().GroupBy(g => g%5).OrderBy(g=>g.Key)
        .Select(g => new { Numbers = g, Remindar = g.Key}).ToList();
    return reminderNumber;                              
} 
```

当我尝试对其进行测试时，它说第一个索引项与我的期望不符。

```
var groupingoperators = new GroupingOperators();
IEnumerable<int> numberOfCollection = new List<int>{ 5,14,9,8};
IList remindernumber = groupingoperators.dividedNumbersto5(numberOfCollection);
IList expectedNumberCollection = new List<int>{0,3,4};
CollectionAssert.AreEqual(expectedNumberCollection, remindernumber); 
```

> CollectionAssert.AreEqual 失败。（索引 0 处的元素不匹配。）

我想知道我应该如何为它写一个测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T00:00:47.443

您的测试失败的原因是因为：

```
   “如果两个集合具有相同的元素，则它们是相等的
   以相同的顺序和数量。”
```

[来源](http://msdn.microsoft.com/en-us/library/ms243763.aspx)

基本上你需要更好地模拟你的第二个集合。我认为这应该有效：

```
IList expectedNumberCollection = new List<object>{
 new {Numbers = new List<int>{5},Remindar=0},
 new {Numbers = new List<int>{8},Remindar=3}, 
 new {Numbers = new List<int>{14,9},Remindar=4}
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T06:08:34.543

首先 -**你真的不应该从方法返回匿名类型对象！**以后在任何地方都很难用这种返回值做任何事情。

我将创建名为**Devided**的新结构：

```
public struct Devided
{
    public int Reminder { get; set; }
    public List<int> Numbers { get; set; }

    public override bool Equals(object obj)
    {
        if(!(obj is Devided))
            return false;

        var d = (Devided)obj ;

        if(object.ReferenceEquals(this, d))
            return true;

        return this.Reminder == d.Reminder && this.Numbers.SequenceEqual(d.Numbers);
    }

    public override int GetHashCode()
    {
        return Reminder;
    }
} 
```

我已经超越 `Equals`并`GetHashCode`开始`CollectionAssert`工作。

使用`Devided`类，您可以将方法返回类型更改为泛型`IList<Devided>`：

```
public static IList<Devided> dividedNumbersto5(IEnumerable<int> NumberOfCollection)
{
    IList<Devided> reminderNumber = NumberOfCollection.ToList().GroupBy(g => g % 5).OrderBy(g => g.Key)
        .Select(g => new Devided { Numbers = g.ToList(), Reminder = g.Key }).ToList();
    return reminderNumber;
} 
```

并断言测试：

```
[TestMethod]
public void TestMethod1()
{
    IEnumerable<int> numberOfCollection = new List<int> { 5, 14, 9, 8 };
    IList remindernumber = dividedNumbersto5(numberOfCollection);
    IList expectedNumberCollection = new List<Devided>
    {
        new Devided { Numbers = new List<int>() { 5 }, Reminder = 0 },
        new Devided { Numbers = new List<int>() { 8 }, Reminder = 3 },
        new Devided { Numbers = new List<int>() { 14, 9 }, Reminder = 4 }
    };

    CollectionAssert.AreEqual(expectedNumberCollection, remindernumber);
} 
```

`Reminder`如果您愿意，您可以只检查s：

```
var expectedNumberCollection = new List<int> { 0, 3, 4 };

Assert.IsTrue(expectedNumberCollection.SequenceEqual(remindernumber.Select(x => x.Reminder))); 
```

# actionscript - 在as3中获得鼠标点击screenX和screenY

> ID：15869182
> 
> 赞同：1
> 
> 时间：2013-04-07T23:40:46.087
> 
> 标签：actionscript, actionscript-3

我想获取鼠标点击屏幕坐标（通过在 AIR 应用程序窗口外点击）

我尝试了以下操作，但没有得到任何结果，似乎 ScreenMouseEvent.CLICK 事件未调度。

```
public function Main():void 
{   
if (NativeApplication.supportsSystemTrayIcon)//testExpression return true 
    {            
         SystemTrayIcon(NativeApplication.nativeApplication.icon).
         addEventListener(ScreenMouseEvent.CLICK, click);
    }
}

private function click(e:ScreenMouseEvent):void 
{
      trace(e.screenX);//nothing displayed :(
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T23:57:58.783

由唯一（仅限 Windows/Linux）`ScreenMouseEvent`分派。`SystemTrayIcon`并且`SystemTrayIcon`实例（`DockIcon`对于 MacOs）是从`NativeApplication.nativeApplication.icon`.
因此，在指定托盘图标图形后，您应该在此处附加事件侦听器：

```
var sti:SystemTrayIcon = NativeApplication.nativeApplication.icon as SystemTrayIcon;
// Specifying an icon is obligatory on Windows - MacOs has a default icon
sti.bitmaps = [new IconAsset()]; // IconAsset = Embedded picture
sti.addEventListener(ScreenMouseEvent.CLICK, mouseClick); 
```

请注意，结果`screenX`和`screenY`属性`ScreenMouseEvent`仅限于托盘中的图标区域，而不是整个桌面屏幕（不足为奇，因为这是您首先添加事件的地方）。

# javascript - 关于注入脚本 + 本地存储的 Chrome 扩展

> ID：15869183
> 
> 赞同：1
> 
> 时间：2013-04-07T23:40:46.683
> 
> 标签：javascript, google-chrome-extension, content-script

我正在通过我的第一个“将所有内容放在一起”Chrome 扩展程序感到困惑，我将描述我正在尝试做的事情，然后用一些脚本摘录来描述我是如何进行的：

1.  我有一个options.html 页面和一个options.js 脚本，它允许用户在文本字段中设置一个url——这使用localStorage 存储。

> ```
> function load_options() {
>    var repl_adurl = localStorage["repl_adurl"];
>    default_img.src = repl_adurl;
>    tf_default_ad.value = repl_adurl;
> }
> 
> function save_options() {
>    var tf_ad = document.getElementById("tf_default_ad");
>    localStorage["repl_adurl"] = tf_ad.value;
> }
> 
> document.addEventListener('DOMContentLoaded', function () {
>    document.querySelector('button').addEventListener('click', save_options);
> });
> 
> document.addEventListener('DOMContentLoaded', load_options ); 
> ```

1.  我的 contentscript 将脚本“myscript”注入页面（因此它可以访问页面 html 中的 img 元素）

> ```
> var s = document.createElement('script');
> s.src = chrome.extension.getURL("myscript.js");
> console.log( s.src );
> (document.head||document.documentElement).appendChild(s);
> s.parentNode.removeChild(s); 
> ```

1.  myscript.js*应该*以某种方式获取本地存储数据并确定如何操作图像元素。

我从 html 源中获取图像没有任何问题，但我似乎无法访问 localStorage 数据。我意识到这必须与具有不同环境的两个脚本有关，但我不确定如何克服这个问题——据我所知，我需要从 contentscript.js 注入 myscript.js，因为 contentscript.js 没有可以访问 html 源代码。

希望这里有人可以建议我缺少的东西。

谢谢你，我很感激你能提供的任何帮助！

-安迪

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T09:34:06.563

首先：您不需要注入脚本来访问页面的 DOM（`<img>`元素）。DOM 已经可用于内容脚本。

内容脚本不能直接访问`localStorage`扩展程序的进程，需要在后台页面和内容脚本之间实现一个通信通道才能实现这一点。幸运的是，Chrome为此提供了一个简单的[消息传递 API 。](https://developer.chrome.com/docs/extensions/mv2/messaging)

我建议使用[`chrome.storage`](https://developer.chrome.com/extensions/storage.html)API 而不是`localStorage`. 的优点`chrome.storage`是它可用于内容脚本，它允许您在没有背景页面的情况下读取/设置值。目前，您的代码看起来非常易于管理，因此从同步 API 切换`localStorage`到异步`chrome.storage`API 是可行的。

无论您如何选择，内容脚本的代码都必须异步读取/写入首选项：

```
// Example of preference name, used in the following two content script examples
var key = 'adurl';

// Example using message passing:
chrome.extension.sendMessage({type:'getPref',key:key}, function(result) {
    // Do something with result
});
// Example using chrome.storage:
chrome.storage.local.get(key, function(items) {
    var result = items[key];
    // Do something with result
}); 
```

如您所见，两者之间几乎没有任何区别。但是，要让第一个工作，您还必须向后台页面添加更多逻辑：

```
// Background page
chrome.extension.onMessage.addListener(function(message, sender, sendResponse) {
    if (message.type === 'getPref') {
        var result = localStorage.getItem(message.key);
        sendResponse(result);
    }
}); 
```

另一方面，如果要切换到`chrome.storage`，选项页面中的逻辑必须稍微重写，因为当前代码（使用`localStorage`）是同步的，`chrome.storage`而是异步的：

```
// Options page
function load_options() {
   chrome.storage.local.get('repl_adurl', function(items) {
       var repl_adurl = items.repl_adurl;
       default_img.src = repl_adurl;
       tf_default_ad.value = repl_adurl;
   });
}
function save_options() {
   var tf_ad = document.getElementById('tf_default_ad');
   chrome.storage.local.set({
       repl_adurl: tf_ad.value
   });
} 
```

## 文档

*   [`chrome.storage`](https://developer.chrome.com/extensions/storage.html)（方法[获取](https://developer.chrome.com/docs/extensions/reference/storage/#type-StorageArea)，方法[设置](https://developer.chrome.com/docs/extensions/reference/storage/#type-StorageArea)）
*   [消息传递](https://developer.chrome.com/docs/extensions/mv2/messaging)（注意：此页面`chrome.runtime`改为使用`chrome.extension`。为了与 Chrome 25 向后兼容，请使用`chrome.extension`（[使用两者的示例](https://stackoverflow.com/questions/15718066/chrome-runtime-sendmessage-not-working-as-expected/15718294#15718294%20chrome.runtime.sendMessage%20not%20working%20as%20expected%22%22)））
*   [同步与异步 ft. Chrome 扩展的简单实用说明](https://stackoverflow.com/questions/11688171/after-calling-chrome-tabs-query-the-results-are-not-available/11689804#11689804)

# excel - 如何调用在另一个 UDF 中返回数组的 UDF？

> ID：15869186
> 
> 赞同：2
> 
> 时间：2013-04-07T23:41:19.900
> 
> 标签：excel, user-defined-functions, vba

我在弄清楚如何从另一个 UDF 返回 UDF 中的数组时遇到了一些麻烦。这里的一个是简单的指数移动平均 UDF，我试图将数组返回到另一个 UDF，但我收到 #value 错误。我觉得有一个我没有看到的简单解决方案。非常感谢所有帮助，谢谢。

```
Function ema(arg1 As Variant, ByVal lngth As Long) As Variant
    x = arg1
    dim avg As Double

    avg = 1

    Dim arrema As Variant
    arrema = Array()
    ReDim arrema(1 To UBound(x, 1), 1 To 1)

    For j = 1 To (UBound(x, 1) - lngth)
        For i = (1 + j - 1) To (lngth + j - 1)
            avg = (WorksheetFunction.Index(x, i, 1) + 1) * avg
        Next i
        arrema(j, 1) = avg ^ (1 / lngth)
        avg = 1
    Next j
    'ema = avg ^ (1 / lngth)
    ema = arrema
End Function

Function test(arg2 As Variant, xlength As Long)
    Dim arra As Variant
    'Call ema(arg2, xlength)
    Dim arr As Variant
    arr = Array()
    ReDim arr(1 To UBound(arg2, 1), 1 To 1)

    arra = ema(arg2, xlength)

    For i = 1 To UBound(arg2, 1) - xlength
        arr(i, 1) = arra(i, 1)
    Next i

    test = arr
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:38:29.347

如果您`test`从一个以范围为`arg1`参数的公式调用，那么您的问题是您将 a`Range`视为`Array`通过调用`UBound(arg2,1)`

将其更改为`UBound(arg2.Value,1)`，它将起作用。

**进一步说明：**

通过将`arg#`参数声明为`Variant`允许使用`Range`'s 或`Array`'s 调用 UDF。使用`As Range`或来具体化可能会更好`As Variant()`。

在`Function ema`此问题中，通过以下行避免了该问题`x = arg1`： If `arg1`is a `Range`then 这会将 Range 的默认属性复制为 的`Value`属性`x`，从而创建`x`一个数组。If `arg1`is an `Array`then 它只是将该数组复制到`x`.

最终结果是`Function ema`可以处理范围或数组。但是还有另一个问题：`WorksheetFunction.Index(x, i, 1)`一维数组会失败。将其更改为`WorksheetFunction.Index(x, i)`或更好`Application.Index(x, i)`地避免此问题。

# vba - Excel VBA - 如何在不造成混乱的情况下处理许多单元格引用

> ID：15869190
> 
> 赞同：0
> 
> 时间：2013-04-07T23:41:49.390
> 
> 标签：vba, excel

假设您有一个 Excel 工作簿，并且您需要编写一个宏，该宏从许多不同的单元格引用中获取输入，并在许多不同的单元格引用处更新值，您如何保持代码的整洁和可维护性？

了解以下内容会很有帮助：

*   最佳实践
*   有用的技巧
*   不可避免的困难
*   必要的权衡

如果有指向现有指南或讨论的链接也会有所帮助。我一直找不到。

编辑：我发现[http://www.eusprig.org/best-practice.htm](http://www.eusprig.org/best-practice.htm)非常有用 - 来自欧洲电子表格风险利益集团 (EuSPRIG)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T23:56:10.000

这稍微取决于宏要做什么，但我使用“计算”​​表，在那里我收集宏所需的数据，并在那里输出结果。

我倾向于在定义的范围内这样做。

然后可以从其他地方引用结果数据。

技巧：我做的一件事是在使用时为每条输入数据创建一个视觉“检查”。这只是使我能够确保我认为我将要使用的所有数据都已使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T06:56:53.870

遵循命名标准是更好的解决方案，与语言无关。

*   in_name_range，out_name_range
*   in_num_range, out_num_range

    *   检查点和添加手表，肯定会有所帮助。

    *   如果您要进行模块化，请注意更新的范围（因为您一次不能返回多个值，因此在某些工作表中以某种预定义的顺序更好地写入范围。这对我有用。）

# android - Android http post 适用于字符串但不适用于 xstream

> ID：15869193
> 
> 赞同：0
> 
> 时间：2013-04-07T23:42:20.843
> 
> 标签：android, http-post

我正在制作一个使用网络服务的机器人应用程序。当我传入一个字符串时它可以工作，但是当我尝试使用 Xstream 时它不起作用。我已经打印了 Xstream 和我自己的 xml 字符串，它们是相同的。没有 xstream 它看起来像这样并且可以工作

```
`HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://softeng.cs.uwosh.edu/students/cs342g6/login.php");
        Boolean response = false;
        try
        {

            String test = "<Login>" +
                    "<password>" + "lernrane" + "</password>" +
                    "<user_name>" + "jake@jake.com" + "</user_name>" +
                    "</Login>";

            StringEntity se = new StringEntity(test,
                    HTTP.UTF_8);
            se.setContentType("text/xml");
            httppost.setEntity(se);
            System.out.println("MADE IT TO RESPONSE");
            HttpResponse httpresponse = httpclient.execute(httppost);
            HttpEntity resEntity = httpresponse.getEntity();
            String resp = EntityUtils.toString(resEntity);
            System.out.println(resp);
            response = convertToBool(resp);` 
```

但是当我使用 xstream 时，它看起来像这样并且失败了

```
HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://softeng.cs.uwosh.edu/students/cs342g6/login.php");
        Boolean response = false;
        try
        {
            LoginObject login = new LoginObject();
            login.setUserName("jake@jake.com");
            login.setPassword("lernrane");
            XStream xstream = new XStream();
            xstream.alias("Login", LoginObject.class);
            String xml = xstream.toXML(login);
            System.out.println(xml);

            StringEntity se = new StringEntity(xml,
                    HTTP.UTF_8);
            se.setContentType("text/xml");
            httppost.setEntity(se);
            System.out.println("MADE IT TO RESPONSE");
            HttpResponse httpresponse = httpclient.execute(httppost);
            HttpEntity resEntity = httpresponse.getEntity();
            String resp = EntityUtils.toString(resEntity);
            System.out.println(resp);
            response = convertToBool(resp); 
```

我的网络服务看起来像这样

```
 $dom = new domDocument;
 $dom = simplexml_load_file('php://input');
 $xml = simplexml_import_dom($dom);
 $user = Users::find_by_user_name($xml->user_name);

 if($user)
 {
if($user->password == $xml->password)
{
    echo "TRUE";
}
 }
 else 
     echo "FALSE"; 
```

忽略看起来很奇怪的查询，我正在使用活动记录，我知道它可以正常工作......谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-08T01:38:23.057

我想通了......当我打印出我的 xml 用户名时，它看起来像这个用户名，尽管它被明确命名为用户名。一定存在某种类型的字符集冲突，所以我只是将其重命名为不带下划线。

# php - 为包含的内容网站进行引导导航栏调整

> ID：15869194
> 
> 赞同：0
> 
> 时间：2013-04-07T23:42:32.757
> 
> 标签：php, javascript, html, css, twitter-bootstrap

我正在尝试在 php 网站上使用引导程序。问题是，因为我只使用 index.php 并包含每个页面的特定内容，所以导航栏上的所有按钮都处于“当前页面”模式（换句话说，导航按钮似乎被按下），因为所有页面都是实际上是 index.php。下面的代码说明了页面是如何工作的：

```
<?php
                if (isset($_GET['page']))
                {
                    $page = $_GET['page'];
                    require ('Pages/' . $page . '.page.php');
                }
                else
                {
                    $_GET['page'] = "home";
                    include ('Pages/home.page.php');
                }
                ?> 
```

有没有办法更改此功能，以便只有当前页面（由 $_GET['page'] 的内容指示的内容显示为导航栏上的当前页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:39:37.910

将表示当前页面的链接的类设置为`class="active"`。这将使该链接显示为当前页面。

# windows - 使用 simpleopenni 和 kinect for windows sdk 1.6 - 无法获取数据

> ID：15869195
> 
> 赞同：0
> 
> 时间：2013-04-07T23:42:45.927
> 
> 标签：windows, kinect, processing, simple-openni

我正在尝试使用 simpleopenni 库从我的 Kinect 处理中访问数据。但是，当我尝试使用该库访问我的 Kinect 时，我收到诸如“无法打开深度图，也许相机未连接！”之类的错误。

我已按照所有安装说明进行操作，并通过成功运行安装中包含的 NI 查看器并与之交互来验证 openNI2 64 位功能是否正常。

我已经通过成功运行并与安装中包含的简单用户跟踪器交互来验证 NITE2 64 位的功能。

我的系统上安装了用于 Windows SDK 1.6 的官方 MS Kinect，并且我了解 open ni 和 simpleopenni 的 v2 能够使用官方 SDK 而不是 libfreenect。

我不确定如何从这里进一步调试...任何输入将不胜感激。谢谢。

# apache - 如何在 .htaccess 文件中使用 mod_rewrite 重写 URL

> ID：15869196
> 
> 赞同：0
> 
> 时间：2013-04-07T23:42:48.563
> 
> 标签：apache, .htaccess, mod-rewrite

**关于如何使用 mod_rewrite 更改 URL 是否有任何好的、清晰的参考？**

我正在尝试进行基本的 URL 重写，当我试图解决这个问题时，我发现有一百万个问题来自为此苦苦挣扎的人以及许多随机示例，但没有单一资源可以*解释它*的工作原理以及所有选项是，等等。有时我很幸运，发现了与我正在尝试做的事情相似的事情，但通常有很多不同的版本。有时他们都工作。有时他们都没有。所以这是一个猜谜游戏。

我找到了[apache mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)文档，但它读起来像廉价的立体声指令。（只是一堆细节和例子，没有明确的关系）所以我还在猜测很多事情。

我将包括我正在尝试做的事情，以防它是一个简单的答案，但我宁愿 RTFM，这样我下次可以自己弄清楚：

example.com/hideme/* --> example.com/*（隐藏特定子目录）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:40:07.343

```
# security requirement
Options +FollowSymlinks

# turn rewrite engine on
RewriteEngine on

# you only need to do those directives above once per .htaccess

# remap example.com/ w/ or w/o slash in the end into example.com/hideme/
RewriteRule ^/?$ /hideme/

# remap example.com/$group into example.com/hideme/$var
RewriteRule ^(.+)$ /hideme/$1

# redirect example.com/hideme w/ or w/o slash in the end into example.com/
RewriteRule ^hideme/?$ / [R]

# redirect example.com/hideme/$group into example.com/$var
RewriteRule ^hideme/(.+)$ /$1 [R] 
```

实际上，我不知道上面的代码是否有错误，这就是为什么程序员总是测试他们所做的事情，如果它有效，他们就完成了，不需要将他们的代码与其他代码进行比较什么更好。这是我最喜欢的指令之一，我认为最简单：[http ://corz.org/serv/tricks/htaccess2.php](http://corz.org/serv/tricks/htaccess2.php)

* * *

**附加链接：**

[http://semlabs.co.uk/journal/mod_rewrite-quick-reference-and-cheat-sheet](http://semlabs.co.uk/journal/mod_rewrite-quick-reference-and-cheat-sheet)是我在寻找这种`mod_rewrite`模式语法、`RewriteCond`运算符等时经常访问的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:51:38.613

在 dir 中使用这个 .htaccess`$DOCUMENT_ROOT`来隐藏 dir `_wp`：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+_wp/([^\s]+) [NC]
RewriteRule ^ /%1 [R=302,L]

# assuming your cake installation is in /tests
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (?!^tests/)^(.*)$ /_wp/$1 [L,NC] 
```

`/_wp`这将从URL中删除。

顺便说一句，除了那些有用的谷歌搜索结果之外，[**还有一本关于 mod_rewrite 的书。**](https://rads.stackoverflow.com/amzn/click/com/1590595610)

# c++ - OpenCV 帮助我处理 Sepia 内核

> ID：15869198
> 
> 赞同：5
> 
> 时间：2013-04-07T23:42:54.480
> 
> 标签：c++, opencv, image-processing, computer-vision

我正在尝试创建棕褐色效果。这是我正在尝试的代码：

```
 Mat image_copy;
    cvtColor(image, image_copy, CV_BGRA2BGR);

    Mat kern = (Mat_<char>(4,4) <<  0.272, 0.534, 0.131, 0,
                0.349, 0.686, 0.168, 0,
                0.393, 0.769, 0.189, 0,
                0, 0, 0, 1);
    cv::transform(image_copy, image, kern); 
```

但它不起作用。我得到一个黑色的图像。没有错误，没有例外，只是黑色图像。有任何想法吗？

我尝试过应用不同的内核并且它们确实有效。例如：

```
 Mat kern = (Mat_<char>(4,4) <<  10, 0, 0, 0,
                0, 10, 0, 0,
                0, 0, 10, 0,
                0, 0, 0, 10);
    cv::transform(image_copy, image, kern);
    image += cv::Scalar(10, 10, 10, 0); 
```

请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T01:32:33.620

似乎您正在创建一个`char`价值内核，但试图存储`float`价值。

确保**使用与要存储的值相同的数据类型声明内核**：

```
#include <cv.h>
#include <highgui.h>

#include <iostream>

int main()
{
    cv::Mat image = cv::imread("test.jpg");
    if (!image.data)
    {
        std::cout << "!!! Failed imread" << std::endl;
        return -1;
    }

    cv::Mat image_copy = image.clone();

    cv::Mat kern = (cv::Mat_<float>(4,4) <<  0.272, 0.534, 0.131, 0,
                                             0.349, 0.686, 0.168, 0,
                                             0.393, 0.769, 0.189, 0,
                                             0, 0, 0, 1);

    cv::transform(image_copy, image, kern);

    cv::imshow("sepia", image);
    cv::waitKey(0);

    return 0;
} 
```

# javascript - 如何在 Ember.js 模板中为 Twitter 引导轮播创建迭代器

> ID：15869200
> 
> 赞同：2
> 
> 时间：2013-04-07T23:43:10.473
> 
> 标签：javascript, html, twitter-bootstrap, ember.js

我正在使用 Ember.js 生成[Twitter Bootstrap Carousel](http://twitter.github.io/bootstrap/javascript.html#carousel)。我正在迭代一个`ArrayController`，但我遇到了一个问题：轮播需要一个`data-slide-to`从 0 向上迭代的每个项目（0、1、2 等）。如何使用 Ember 轻松创建它？

另一个后续问题：如何`active`使用 Ember 将仅第一项迭代的类设置为？

（我的控制器是默认格式，所以生成了）

**相关模板：**

```
<script type="text/x-handlebars" id="featured">
    <div class="span8">
      <div id="featured" class="carousel slide">
        <ol class="carousel-indicators">
          {{#each article in controller}}
            <li data-target="#featured" data-slide-to="0" class="active"></li>
          {{/each}}
        </ol>
        <div class="carousel-inner">
          {{#each controller}}
            <div class="active item">
              <div class="cover-photo">
              {{renderPhoto coverPhoto.url}}
              </div>
              <div class="carousel-caption">
                <h4>{{title}}</h4>
                <p>derp derp durr hurr durr</p>
              </div>
            </div>
          {{/each}}
        </div>
      </div>
    </div>
  </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T12:08:46.020

让您的控制器保持原样。如果您的车把模板中包含名为 items 的数组，那么您可以实现如下所示的轮播。

```车把

```
<p>There are {{items.length}} slides</p>
<ol class="carousel-indicators">
    {{#each items}}
    <li data-target="#urs" data-slide-to="{{@index}}" class="{{#unless @index}}active{{/unless}}"></li>
    {{/each}}
</ol>

<div class="carousel-inner">
{{#each items}}
    <div class="item {{#unless @index}}active{{/unless}}">
        <img src="{{this.image}}" alt="">
        <div class="container">
            <div class="carousel-caption">
                <h1>{{this.headline}}</h1>
                <p class="lead">{{this.body}}</p>
                <a class="btn btn-large btn-primary" href="#">{{this.button}}</a>
            </div>
        </div>
    </div>
{{/each}}
</div>

<a class="left carousel-control" href="#urs" data-slide="prev">&lsaquo;</a>
<a class="right carousel-control" href="#urs" data-slide="next">&rsaquo;</a>

<script>
    $('.slide').carousel({
        interval: 1000
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T07:41:36.947

在您的 ArticlesController（创建一个）中，定义`contentWithIndex`其中包括每篇文章的索引`content`和一个`isFirst`属性：

```
App.ArticlesController = Ember.ArrayController.extend({
  contentWithIndex: function() {
    var content = this.get('content') || [];

    return content.map(function(article, index) {
      return {
         article: article, 
         index: index,
         isFirst: (index === 0)
      } 
    });
  }.property('content.[]')
}); 
```

然后在您的模板中：

```
{{#each controller.contentWithIndex}}
   <div {{bindAttr class=":item isFirst:active"}} 
        {{bindAttr data-slide-to="index"}}>
      <div class="cover-photo">
         {{renderPhoto article.coverPhoto.url}}
      </div>
      <div class="carousel-caption">
         <h4>{{article.title}}</h4>
         <p>derp derp durr hurr durr</p>
      </div>
   </div>
{{/each}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-12T07:27:32.847

关于您的跟进，我通过在所有幻灯片上设置自定义视图类并因此检查它们是否是 didInsertElement 中的第一张来确保只有第一张幻灯片具有活动类：

```
 App.CarouselView = Ember.View.extend
        layout: require '../../../templates/components/carousel'
        classNames: ['carousel', 'slide']
        didInsertElement: ->
            element = $(@$()).carousel interval: false
            element.on 'slid', =>
                @set 'currentSlide', element.data('carousel').getActiveIndex() + 1
        currentSlide: 1
        controlHref: (->
                '#' + @get('elementId')
            ).property 'elementId'    

        slidesView: Ember.CollectionView.extend
            contentBinding: 'parentView.slides'
            classNames: ['carousel-inner']    

            itemViewClass: Ember.View.extend
                classNames: ['item']
                slidesBinding: 'parentView.content'
                didInsertElement: ->
                    # Bootstrap carousels require that the first slide has the 'active' class.
                    if @get('slides.firstObject') is @get('context')
                        @$().addClass 'active' 
```

# cordova - PhoneGap - Ripple - Google 地图：拖动问题

> ID：15869201
> 
> 赞同：3
> 
> 时间：2013-04-07T23:43:23.527
> 
> 标签：cordova, maps, typeerror, ripple

我在搞乱谷歌地图API，我试图让他们的交互式地图通过PhoneGap工作，然后我通过Ripple进行模拟。

我从字面上复制了本教程：

[http://www.christianengvall.se/phonegap-and-google-maps/](http://www.christianengvall.se/phonegap-and-google-maps/)

当我在 Ripple 中打开它时，一切正常，但每次单击并拖动地图时，都会出现错误：

```
Uncaught TypeError: Object [object Array] has no method 'item'
    Jq.(anonymous function).$a
    (anonymous function)
    _simulateTouchEvent
    _translateMouseEvent 
```

我的猜测是它来自涟漪模拟器。有解决办法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T00:23:08.173

我能够打开 Chrome 的开发者工具，右下角是一个“齿轮”图标。点击这个。设置窗口将出现，然后左侧的第二个选项是“覆盖”。点击这个。在底部，您会看到一个标有“模拟触摸事件”的复选框。检查这个并且拖动功能可以正常工作，但是您仍然会遇到您提到的偶尔出现的错误。

# actionscript-3 - 文本字段的一部分正在消失

> ID：15869209
> 
> 赞同：1
> 
> 时间：2013-04-07T23:44:44.087
> 
> 标签：actionscript-3, textfield

所以我在一个 AS3 程序中有两个文本字段。其中一个显示正常，另一个在中途被切断，知道是什么原因造成的吗？它们是用所有相同的参数创建的（除了它们有不同的文本）。

抱歉没有详细说明。

```
var tf1 = new TextField();
tf1.text = "You scored: " + score + " points";
tf1.x = miscellaneousObjects[0].x + 50;
tf1.y = miscellaneousObjects[0].y + 50;
tf1.textColor = 0xFFFFFF;
tf1.setTextFormat(myTextFormat);
uiTextLayer.addChild(tf1);
var tf2 = new TextField();
tf2.text = "Would you like to play again?";
tf2.x = miscellaneousObjects[0].x + 50;
tf2.y = miscellaneousObjects[0].y + 80;
tf2.textColor = 0xFFFFFF;
tf2.setTextFormat(myTextFormat);
uiTextLayer.addChild(tf2); 
```

miscelleanousObjects[0] 是指应该围绕文本的框的图像。如您所见，它们的创建方式完全相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T03:45:37.070

文本字段默认大小为 100 x 100 像素。尝试显式设置 TextField 的宽度：

```
tf1.width = 500;
tf2.width = 500; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T06:57:55.310

采用

```
tf1.autoSize = TextFieldAutoSize.LEFT;
tf2.autoSize = TextFieldAutoSize.LEFT; 
```

# objective-c - 通过按钮上的动画随机循环

> ID：15869211
> 
> 赞同：0
> 
> 时间：2013-04-07T23:45:00.820
> 
> 标签：objective-c, xcode, animation

我有一个应用程序，当前按下按钮（图像）两次。我想循环缩放按钮并摇动按钮。所以三个动画将是：缩放、平移、旋转。我怎样才能随机循环这些？这是我目前拥有的按钮：

```
- (IBAction)playAudioAction:(id)sender {
    UIButton *btn=(UIButton *)sender;

    CABasicAnimation *fullRotation = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
    fullRotation.fromValue = [NSNumber numberWithFloat:0];
    fullRotation.toValue = [NSNumber numberWithFloat:((360*M_PI)/180)];
    fullRotation.duration = 0.5;
    fullRotation.repeatCount = 2;
    [btn.layer addAnimation:fullRotation forKey:@"360"];

    [self playAudioOfType:btn.tag];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:05:19.363

如果您想对按钮应用随机动画，您可以拥有一个`CABasicAnimation`s 数组并随机选择其中一个。

在某处初始化和配置动画并将它们添加到数组中（我将其设为属性）。

```
CABasicAnimation * fullRotation = ...
CABasicAnimation * scale = ...
CABasicAnimation * translate = ...
self.animations = @[ fullRotation, scale, translate ]; 
```

然后当你随机选择一个时，删除所有以前的并添加新的。

```
- (IBAction)playAudioAction:(id)sender {
    UIButton *btn=(UIButton *)sender;

    NSInteger randomIndex = arc4random_uniform(self.animations.count);
    CABasicAnimation *randomAnimation = self.animations[randomIndex];
    [btn.layer removeAllAnimations];
    [btn.layer addAnimation:randomAnimation forKey:@"animation"];

    [self playAudioOfType:btn.tag];

} 
```

# c++ - dereferencing string array element c

> ID：15869212
> 
> 赞同：1
> 
> 时间：2013-04-07T23:45:05.087
> 
> 标签：c++, string, pointers, fstream

I have an array of strings and inside a loop, I want to do something like this:

```
fstream in(fileNames[i], ios::in); 
```

but that doesn't work. Although, when I try:

```
fstream in("some string",ios::in); 
```

it works.

How could I accomplish the same thing, but with an array element?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T23:56:19.737

在旧的 C++ 中，您必须将 a 传递`char const *`给 fstream 构造函数，所以说：

```
fstream in(fileNames[i].c_str(), ios::in);
//                     ^^^^^^^^ 
```

在 C++11 中，这不再是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T00:18:10.040

我不确定它的定义是什么，`filenames`因为它没有在问题中引用。从您的评论来看`string fileNames[NUMTABLES]; filenames = "some text goes here;`， 似乎`string`类似于 a `char`。为了创建一个`fstream`对象，我们需要`char *`从上述定义中传递一个 where ，将其`filenames[i]`转换为一个简单的对象`char`，这可能是问题的原因。

为了克服这个问题，请找到一个示例代码，其中定义了一个字符串数组，并且`fstream`成功创建了对象，没有任何问题。

```
char filenames[4][32] = {"Just for testing purposes", "This is for stackoverflow", "Just for enabling", "This is nice program"};
fstream in(filenames[2], ios::in); 
```

另一种方法是使用`strtok`将字符串分解`some text goes here`为较小的字符串，如`some`, `text`, `goes`,`here`如下所示

```
char *newstr = strtok(filenames, " ");
fstream in(newstr, ios::in); 
```

# sql - I am trying to list all IDs for all products that sold more than 20 units

> ID：15869213
> 
> 赞同：0
> 
> 时间：2013-04-07T23:45:14.840
> 
> 标签：sql, oracle, join, sqlplus

This is what I have so far:

```
SELECT 
  Product_T.PRODUCTID, 
  Product_T.PRODUCTLINEID, 
  Product_T.PRODUCTDESCRIPTION, 
  Product_T.PRODUCTFINISH, 
  Product_T.PRODUCTSTANDARDPRICE, 
  Product_T.PRODUCTIONHAND, 
  OrderLine_T.ORDERLINEID, 
  OrderLine_TORDERID, 
  OrderLine_TPRODUCTID, 
  OrderLine_T.ORDEREDQUANTITY 
FROM 
  Product_T,
  OrderLine_T
WHERE 
  Product_T.ProductID = OrderLine_T.ProductID
AND 
  SUM(OrderLine_T.ORDEREDQUANTITY) > 20; 
```

I get this message:

```
ORA-00934: group function is not allowed here 
```

Any ideas? any help is appreciated

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T02:40:20.513

改用 HAVING

```
SELECT 
Product_T.PRODUCTID, 
Product_T.PRODUCTLINEID, 
Product_T.PRODUCTDESCRIPTION, 
Product_T.PRODUCTFINISH, 
Product_T.PRODUCTSTANDARDPRICE, 
Product_T.PRODUCTIONHAND, 
OrderLine_T.ORDERLINEID, 
OrderLine_TORDERID, 
OrderLine_TPRODUCTID, 
SUM(OrderLine_T.ORDEREDQUANTITY) OrderQty
FROM 
Product_T,
OrderLine_T
WHERE 
Product_T.ProductID = OrderLine_T.ProductID
GROUP BY
Product_T.PRODUCTID, 
Product_T.PRODUCTLINEID, 
Product_T.PRODUCTDESCRIPTION, 
Product_T.PRODUCTFINISH, 
Product_T.PRODUCTSTANDARDPRICE, 
Product_T.PRODUCTIONHAND, 
OrderLine_T.ORDERLINEID, 
OrderLine_TORDERID, 
OrderLine_TPRODUCTID
HAVING
SUM(OrderLine_T.ORDEREDQUANTITY) > 20; 
```

# php - 将 pyrocms 添加到现有网站

> ID：15869214
> 
> 赞同：0
> 
> 时间：2013-04-07T23:45:17.957
> 
> 标签：php, codeigniter, routing, content-management-system, pyrocms

不幸的是，我已经进入一个项目几个月了，现在客户要求一个基于 cms 的选项来动态编辑几个页面。现在我完全了解 pyrocms，但从我一直在阅读的内容来看，这不是您的传统 cms。

当前站点已经使用 codeigniter，所以我不确定这将如何影响它。

由于该站点已经完成了很多工作，除了现在需要 cms 编辑功能的少数页面是 pyrocms，我可以添加一个用途来控制这些页面上的信息吗？我唯一需要的是页面编辑功能，不需要博客、模块、评论、添加/删除页面。

使用已经制作的页面是否可以让 pyrocms 来控制页面使用的文本？对于其他 cms，您通常只需将模板指向页面即可。

不确定这将如何与路由一起使用，考虑到[http://site.com/editpage和 pyro 将被安装为](http://site.com/editpage)[http://site.com/admin](http://site.com/admin)之类的东西。它是否具有退出其目录之外的向后兼容性，或者我必须手动定位数据库并将信息拉出并相应地显示它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T07:41:42.330

Cryodes 反应是正确的。我建议您通过使用 ION auth 创建自定义登录部分来创建自己的控制面板：[https ://github.com/benedmunds/CodeIgniter-Ion-Auth](https://github.com/benedmunds/CodeIgniter-Ion-Auth)

另一个更简单的选择是在您的站点根目录中创建一个管理文件夹，然后在其中安装 PyroCMS。将 Pyro 中的路由器设置为 PyroCMS 管理区域，然后使用后端登录创建文章。然后在您的 CI 应用程序中连接到 Pyro 的数据库并从中获取文章。

# mysql - Whats wrong with this vb.net code

> ID：15869222
> 
> 赞同：0
> 
> 时间：2013-04-07T23:46:20.047
> 
> 标签：mysql, vb.net

Ok so im trying to login to my MYSQL database and go to database 'vb' table 'login' and check weather the username and password they enter was correct or not.but i dont know how to do this in vb.

```
 Myconnection = "Host=LocalHost; user=root;password=tro63jans; username =" & username &
       "; password =" & password 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T23:48:38.090

Standard Connection String:

```
Server=myServerAddress;Database=myDataBase;Uid=myUsername;Pwd=myPassword; 
```

Using a port number:

```
Server=myServerAddress;Port=1234;Database=myDataBase;Uid=myUsername;Pwd=myPassword; 
```

uid and username...i think you have some kind of duplicates in your string, do not use both

# javascript - 标记用户何时开始输入表单

> ID：15869223
> 
> 赞同：4
> 
> 时间：2013-04-07T23:46:24.290
> 
> 标签：javascript, ruby-on-rails, ajax, jquery

`author`当用户开始输入表单时，我想将用户添加到帖子列表中。

例如，当用户在表单中键入任何字母（或按“输入”按钮）时，我会调用`@post.authors.create(user_id: current_user.id)`将用户添加到该特定帖子的作者列表中。我认为这不可能实现，但使用 javascript 提交 ajax 请求可能足以实现此方法。是否可以在 Rails 应用程序中实现这种方法？如果是这样，有人可以给我一些指示吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T18:27:17.930

您必须为按键创建事件处理程序并在第一次按下后删除。

```
function typeCatch(){
  $(this).off("keypress",typeCatch)//remove handler
  console.log("User start type");
}

$("$field_id").on("keypress",typeCatch) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T13:50:12.253

对于以下答案，我假设您正在使用 jQuery 作为 javascript 框架运行 Ruby on Rails，并且当前用户 (=author) 已登录（即会话中的当前用户 ID）。我在解释@Mischa 的想法：使用按键事件。

因此，正如您所解释的，您有一个表单来编辑帖子。我猜你里面有一个带有帖子文本的文本区域。例如`<textarea id="posting">This is a post</textarea>`.

您的下一个要求是，告诉服务器“当用户在表单中键入任何字母（或按“输入”按钮）时”。因此，我们为“keypress”事件定义了一个事件处理程序。在按下第一个键后，应删除此事件处理程序。感谢@user2257149 提供以下代码（我稍微调整了一下）：

```
 function typeCatch(){
      $(this).off("keypress",typeCatch) // remove handler
      console.log("User start type");
    }

    $("#post").on("keypress",typeCatch); // add handler 
```

此 javascript 代码片段**必须**低于`<textarea>`.

现在我们有一个只触发一次的事件处理程序。在这个处理程序中，我们触发一个 ajax 调用来让服务器知道当前用户正在编辑当前帖子。当我们更新 post 对象中的特定属性时，我们应该触发类似以下 URL 的内容：

```
PUT http://www.example.com/posts/123/add_current_author 
```

这意味着，我们应该使用 HTTP *PUT*方法来更新 ID 为*123*的帖子并触发方法*add_current_author* in `PostsController`。

所以我们将函数调整`typeCatch()`为：

```
function typeCatch(){
  $(this).off("keypress",typeCatch)//remove handler
  $.ajax({
    type: "POST",
    url: '/posts/123/add_current_author',
    data: JSON.stringify({_method: 'put'})
  });
} 
```

（由于大多数浏览器不支持 PUT 方法，Ruby on Rails 通过发送 POST 参数“_method”来欺骗，我从@Michael Koper 在他[对 Ruby on rails - PUT method on update ajax 的回答中](https://stackoverflow.com/a/11797425/1680187)得到了这个）

您可能必须将此特殊路线添加到 Ruby on Rails（不确定以下内容，我的 Rails 有点生锈）：

```
resources :posts do
  collection do
    put "add_current_author"
  end
end 
```

现在，在您的 中`PostsController`，您必须定义 method `add_current_author`。我假设您实例化为a`@post`中的实际帖子（由 given 标识`:id`）`before_filter`并将您当前的用户保存在`current_user`. 所以实际上它应该很简单：

```
def add_current_author
  @post.authors.create(user_id: current_user.id)
end 
```

虽然我必须承认，它看起来有点奇怪（这是你的建议）。我想，我会在“帖子”和称为“作者”的“用户”之间建立 1:n 连接，并执行以下操作：

```
@post.authors << current_user 
```

再次感谢@Micha、@user2257149 和@Michael Koper。我赞成你的答案。

**更新：** 如赏金评论中所述，OP 希望将当前功能从“显示时标记为已读”更改为“仅在用户按下评论表单中的键时标记为已读”。

所以目前`EssayController`有一个`show`动作

```
def show
  ...
  @essay.reader_links.create(reader_id: current_user.id)
  ...
end 
```

应该删除给定的行，因为在显示时不应添加当前用户`@essay`。此外，`<textarea>`我在上面定义的是评论表单中的那个，所以 HTML 可能看起来像

```
<html>
  ...
  <form action="essay/123/comment" method="post">
    ...
    <textarea name="comment_text" id="comment"></textarea>
    ...
  </form>
  <script type="text/javascript">
    function typeCatch() {
      ...
    }
    $("#post").on("keypress", typeCatch);
  </script>
</html> 
```

最后，正如我所假设的，action`add_current_author`不应该是 in`PostController`而是 in`EssayController`和 route 分别改变了。

**更新 2：**正如@Yarek T 所说，可以使用`$("#post").on("keypress", typeCatch);`jQuery 函数 代替：`one`

```
function typeCatch(){
  $.ajax({
    type: "POST",
    url: '/posts/123/add_current_author',
    data: JSON.stringify({_method: 'put'})
  });
}
$("#post").one("keypress", typeCatch); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T00:20:58.230

Has everyone forgot about jQuery's `$.one()` function? Its functionally the same as doing `$.on()` and then inside that `$.off()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T09:44:13.347

```
var flag = 0;
$(document).on('keypress', function(e) {
    if(flag == 0) {
         doSomething();
         flag = 1;
    }   
}); 
```

# eclipse-emf - Create File Browser

> ID：15869224
> 
> 赞同：-1
> 
> 时间：2013-04-07T23:46:45.513
> 
> 标签：eclipse-emf, eclipse-emf-ecore, emf

I am trying to create a file browser when the user clicks on a button at the property I have generated. The following code I use,it fetches the whole files at my workspace. However,I need to browse over all my PC.

```
IFile[] files = WorkspaceResourceDialog.openFileSelection(null, "File selection", "Please select any file", false, null, null); 
```

Any ideas!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:56:08.417

```
 ResourceDialog resourceDialog=
     new ResourceDialog(Display.getCurrent().getActiveShell(), 
"Select your image", SWT.OPEN);

        resourceDialog.create();
        resourceDialog.open();
        String path=resourceDialog.getURIText(); 
```

# python - How to get file names from Web directory - Python code

> ID：15869230
> 
> 赞同：1
> 
> 时间：2013-04-07T23:47:59.667
> 
> 标签：python, web, filenames

I would like to know how to get a list of filenames (.jpg image files) that are stored on a server.

I am looking for code which stores all the filenames (with their extension) in an Excel table or in the CSV format.

Any tips will be very helpful.

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-08T00:13:54.730

获取存储在某个文件夹中的所有文件的文件名非常容易，您可以轻松地将其写入文件（以您想要的任何格式）：

```
import os
filenames = os.listdir('path to directory')
logFile = open('filenames.txt')
for name in filenames:
    logFile.write(filename)
logFile.close() 
```

您必须在服务器上执行此代码，因此请确保您可以在其上执行 Python 代码。

完成后，您可以使用`urllib2`模块从服务器中检索它：[如何使用 Python 通过 HTTP 下载文件？](https://stackoverflow.com/questions/22676/how-do-i-download-a-file-over-http-using-python)

# javascript - 从两个数组创建 Google Chart 数据表数组

> ID：15869232
> 
> 赞同：10
> 
> 时间：2013-04-07T23:48:15.883
> 
> 标签：javascript, arrays, google-visualization

我正在尝试使用 Google 的图表 API：[https ://google-developers.appspot.com/chart/interactive/docs/gallery/columnchart](https://google-developers.appspot.com/chart/interactive/docs/gallery/columnchart)

我有两个数组，我想用它们来生成和标记可视化。但是，我找不到将这些数组组合并转换为正确对象结构的方法。

我的数组如下，它们的内容在它们旁边：

```
years;   // 2014,2015,2020,2021
sales;   // 100,100,200,100 
```

我需要动态使用这些数组来形成这个对象，它是谷歌 API 使用的格式：

```
 var data = google.visualization.arrayToDataTable([
          ['Year', 'Sales'],
          ['2014',  100],
          ['2015',  100],
          ['2020',  200],
          ['2021',  100]
        ]); 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-08T00:26:53.383

您应该在 for 循环中使用`addColumn`and`addRow`来遍历您的数组。

这是一个示例：

```
function drawVisualization() {
  // Create and populate the data table.
  var years = ['2001', '2002', '2003', '2004', '2005'];
  var sales = [1, 2, 3, 4, 5];

  var data = new google.visualization.DataTable();
  data.addColumn('string', 'years');
  data.addColumn('number', 'sales');

  for(i = 0; i < years.length; i++)
    data.addRow([years[i], sales[i]]);

  // Create and draw the visualization.
  new google.visualization.LineChart(document.getElementById('visualization')).
    draw(data, {});
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T02:41:42.543

下面是完整的代码，数据填充分开。

```
<?php

function testing($chartId, $chartFunc, $chartTitle, $xAxisTitle, $chartData, $chartType)
{
$pageMeat =<<<EOD
<html>
<head>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
google.load("visualization", "1", {packages:["corechart"]});
google.setOnLoadCallback($chartFunc);
function $chartFunc() {
var data = google.visualization.arrayToDataTable($chartData);

var options = {
title: '$chartTitle',
hAxis: {title: '$xAxisTitle', titleTextStyle: {color: 'red'}}
};
EOD;

if($chartType == "line") {
$pageMeat .=<<<EOD
var chart = new google.visualization.LineChart(document.getElementById('$chartId'));
EOD;
}
else if($chartType == "pie") {
$pageMeat .=<<<EOD
var chart = new google.visualization.PieChart(document.getElementById('$chartId'));
EOD;
}
else {
$pageMeat .=<<<EOD
var chart = new google.visualization.ColumnChart(document.getElementById('$chartId'));
EOD;
}
$pageMeat .=<<<EOD
chart.draw(data, options);
}
</script>
</head>
<body>
<div id="$chartId" style="width: 900px; height: 500px;"></div>
</body>
</html>
EOD;
echo $pageMeat;
}

$gChartId = "vertColumns";
$gChartFn = "columnChart";
$gChartTitle = "Company Performance";
$gXAxisTitle = "Year";

$gChartData[] = array('Year', 'Sales', 'Expenses');
$gChartData[] = array('2004', 1000, 400);
$gChartData[] = array('2005', 1170, 460);
$gChartData[] = array('2006', 660, 1120);
$gChartData[] = array('2007', 1030, 540);

testing($gChartId, $gChartFn, $gChartTitle, $gXAxisTitle, json_encode($gChartData), "column");
?> 
```

# java - 从十六进制转换为二进制，反之亦然。艰难的道路

> ID：15869235
> 
> 赞同：0
> 
> 时间：2013-04-07T23:48:56.787
> 
> 标签：java, binary, hex

我正在编写一个应该在二进制、十进制和十六进制之间转换的代码。我已经计算出了二进制和十进制，但是当我得到十六进制时，我感到很困惑。

如果不使用 Integer.toHexString，你将如何进行这种转换。

我知道在 java 中已经有一个代码可以为我做到这一点，我的困惑是如何告诉 java 使用手动转换来做到这一点。

我的想法是创建多个 if 语句，每个语句都解释 0 是 0000，或者 C 是 1100，以此类推。

它将遍历十六进制字符串中的每个字符并将二进制值加在一起。

我觉得这是我被要求做的很多代码的方式。

除非这是唯一的方法，否则我将开始这样做。

但是如果有一个伪代码可以解释如何更有效地做到这一点，那将不胜感激。

额外信息：

```
int hexDigit1A=(binaryDigit8%2)*8+(binaryDigit7%2)*4+(binaryDigit6%2)*2+(binaryDigit5%2)*1;
int hexDigit2A=(binaryDigit4%2)*8+(binaryDigit3%2)*4+(binaryDigit2%2)*2+(binaryDigit1%2)*1; 
```

我知道这会将 4 位二进制数转换为适当的十进制数，这甚至有用还是仅对十进制有用。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:00:39.213

> 我的想法是创建多个 if 语句，每个语句都解释 0 是 0000，或者 C 是 1100，以此类推。

天哪，这一定是有史以来最糟糕的主意。

解决这个问题的关键是理解数字的含义。

例如

十六进制的 A12C 可以表示为

A*16^3 + 1*16^2 + 2*16^1 + C 或 10*16^3 + 1*16^2 + 2*16^1 + 12

然后，您可以设置一个 while 循环并执行一些 div / mod kung fu 来进行转换。

这样，您的转换将适用于任何限制最大 int 限制的数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T02:35:57.983

现代计算机中的所有整数都以硬件和二进制形式表示。十六进制是二进制数的表示，其中每 4 位由一个字符 0-F 表示。所以一个整数是

0100 1100

也可以用十六进制表示为 4C（十进制为 76）。

有两个整数运算可以帮助你。第一个是'and'函数，在java中用一个与号（'&'）表示。如果你'和'两个整数，一个中的每个位位置都与下一个中的相应位位置相乘；因此，如果你用二进制数“和” `0000 1111`，结果将与原始数字的最低 4 位相同。在我们的示例中，结果将是`0000 1100`。（我们将 0000 1111 称为“掩码”，并表示我们正在掩码低 4 位或掩码高 4 位。）

第二个操作是移位；可以使用 >> 和 << 向右或向左移动。

因此，如果您有一个整数并且想要输出其十六进制等价物，请使用以下循环：

1.  最右边 4 位的掩码
2.  将结果转换为 0-F 并存储在某处（将结果用作 char 数组的索引！）
3.  将原始数据右移 4 位

并尽可能多地执行 4 位分组转换。你得到的结果将是相反的顺序，即你得到的第一个十六进制数字最终在你的十六进制数字的最右边。如果您想调整算法以向前顺序返回数字，请随意！

警告：负数会使这稍微复杂一些，因为移动负数往往会移动“符号位”。在尝试处理负数之前，我不会深入了解所有这些，而是​​先了解一下并理解所有概念。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T02:49:42.067

这是通过一个简单的映射函数来实现的。当您手动操作时，您将二进制值分成 4 位，对吗？然后为每个“4 位”分配它自己的特定十六进制值。您的算法应该检查您的二进制值，查看每个“4 位”并确定要应用的正确十六进制值。

这看起来像一个实验室，所以这里有一些超级基本的伪代码。

```
Binary Value
Look at last 4 bits
Map to appropriate Hexadecimal Number
Look at next 4 bits, etc etc. 
```

这应该让您对 Hexadecimal -> Binary 转换的内容有一个足够好的了解。一样的想法！

# c# - 处理 gui 事件 MVC

> ID：15869237
> 
> 赞同：0
> 
> 时间：2013-04-07T23:49:11.070
> 
> 标签：c#, asp.net-mvc, model-view-controller

这是一个奇怪的问题，但我需要的只是一些指导方针。我正在更认真地学习 c#，但遇到了一个困扰我的问题。例如，当您在 gui 按钮单击上触发事件时，您会在其中自动生成事件方法，您可以调用您需要做的事情。但是我认为，如果您想遵循良好的 MVC 实践，您应该将模型和逻辑与视图分开。那么这是如何以更专业的方式完成的呢？如何避免在按钮事件处理程序中运行逻辑或创建事件实例？（我可以在您可能认为的其他一些类中编写逻辑，但是我需要在事件处理程序中创建这个对象的实例，这对我来说很丑）有哪些设计模式可以解决这个问题？

# python - 为什么使用 /usr/bin/env 会破坏我的 Python 导入？

> ID：15869239
> 
> 赞同：5
> 
> 时间：2013-04-07T23:49:23.393
> 
> 标签：python, python-2.7, shebang

OSX 10.8.2 上的 Python 2.7.3

我目前正在编写一个导入降价模块的脚本。我使用`#!/usr/bin/env python`shebang是为了便携。当我直接在shell中运行脚本时，脚本运行良好`./myscript.py arg1`

当我从（登录）外壳外部运行脚本时，例如通过 AppleScript `do shell script "/path/to/myscript.py " & quoted form of arg1`，它失败了

```
myscript.py", line 8, in <module>
    import markdown
ImportError: No module named markdown 
```

我想这可能是 shebang 的问题，所以我将 shebang 更改为我的 python 位置`#!/usr/local/bin/python`，果然脚本运行良好。

所以我的问题是双重的：

1.  为什么使用会`/usr/bin/env python`破坏我的导入？
2.  我怎样才能避免这个问题而不必使用`/usr/local/bin/python`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T23:55:38.553

`#!/usr/bin/env python`意思是“继续查找`python`，`$PATH`就像 shell 正在寻找它一样，然后运行它。” 因此，由于您得到不同的结果，因此您可能使用了不同的 python。

要检查，看看是否运行`/usr/local/bin/python`并`/usr/bin/env python`给你相同的蟒蛇。您也可以使用来`type -a python`查找每一个`python`。`$PATH`在我的系统上，`type -a python`给出：

```
python is /opt/local/bin/python
python is /usr/bin/python
python is /usr/local/bin/python 
```

（第一个由 MacPorts 安装。）

无论如何，正如罗德里戈指出的那样，直接启动可能没有使用`$PATH`您期望的。这意味着使用`/usr/bin/env`是行不通的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T23:55:14.113

好吧，看起来登录 shell 中的 PATH 环境变量与 AppleScript 进程中的不同。

我的猜测是你有一个`.profile`文件或类似的行：

```
PATH=/usr/local/bin:$PATH 
```

但是该文件仅在您打开 shell 时才会执行，而不是从其他进程中执行。显然你有一个不同版本的 Python `/usr/bin/python`，它没有 markdown 模块。

# apache - 如何使子目录中的 cakePHP 2.x 出现在根目录中（在 htaccess 中使用 mod_rewrite）？

> ID：15869240
> 
> 赞同：3
> 
> 时间：2013-04-07T23:49:31.283
> 
> 标签：apache, .htaccess, cakephp, mod-rewrite, cakephp-2.0

我正在开发一个位于子目录中的蛋糕应用程序（因为我需要在同一域上的另一个应用程序旁边运行它）。我希望由 cake 提供支持的页面看起来好像它们是顶级的。

所以不是`example.com/cake_dir/page...`我想要`example.com/page...`

我认为完成这项工作的最佳方法是向 .htaccess 文件添加重写规则，所以这就是我想知道的：

1.  这是最好的方法吗？如果是这样的话：
2.  这种规则的正确语法是什么？
3.  那个文件应该去哪里？域根？在 cake_dir 中？还是在蛋糕的根目录中？
4.  如果 Cake 的 .htaccess 文件之一已经存在于该位置，那么新规则应该在之前还是之后进行，并且应该`[L]`删除 s 的 和 ？

**更新：更清楚地描述我正在尝试做的事情**

```
example.com/ <--root
    /_cake   <--CakePHP installed here
        /page3
        /page4 
```

目前，访问者必须通过 example.com/_cake/page3 访问第 3 页。这很糟糕。相反，我想要这个：example.com/page3，如果 cake 路由到 example.com/_cake/page4，我希望它在浏览器中显示为 example.com/page4。

我一直在尽可能多地填充 mod_rewrite 知识，我认为这样做的方法是在 _cake 不存在时进行内部重写以显示正确的内容，并在 _cake 存在时进行外部重写。

**更新** 这里是现有的 .htaccess 文件...

.htaccess 在 /_cake...

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteRule    ^$ app/webroot/    [L]
   RewriteRule    (.*) app/webroot/$1 [L]
</IfModule> 
```

.htaccess 在 /_cake/app...

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule    ^$    webroot/    [L]
    RewriteRule    (.*) webroot/$1    [L]
</IfModule> 
```

/_cake/app/webroot 中的.htaccess ...

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    #RewriteRule ^(.*)$ index.php #[QSA,L]
    RewriteRule ^(.*)$ index.php [QSA]
</IfModule> 
```

**更新 2** 我将 anubhava 的代码添加到根 .htaccess 文件中，然后还更新了 /_cake/ 处的 .htaccess 文件，如下所示（请注意，我必须删除 [L] 以使 CakePHP 的正常重写仍然工作）：

```
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

# external redirect from /_cake/page to /page
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+_cake/([^\s]+) [NC]
RewriteRule ^ /%1 [R=302]

# internal forward from /page to /_cake/page
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (?!^_cake/)^(.*)$ /_cake/$1 [NC]

<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteRule    ^$ app/webroot/    [L]
   RewriteRule    (.*) app/webroot/$1 [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:30:08.797

### $DOCUMENT_ROOT/.htaccess：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

# internal forward from /page to /_cake/page
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule (?!^_cake/)^(.*)$ /_cake/$1 [L,NC] 
```

### $DOCUMENT_ROOT/_cake/.htaccess：

```
RewriteEngine on
RewriteBase /_cake/
RewriteRule (.*) app/webroot/$1 [L] 
```

### $DOCUMENT_ROOT/_cake/app/.htaccess：

```
RewriteEngine on
RewriteBase /_cake/app/
RewriteRule (.*) webroot/$1 [L] 
```

### $DOCUMENT_ROOT/_cake/app/webroot/.htaccess：

```
RewriteEngine On
RewriteBase /_cake/app/webroot/

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+_cake/([^\s&]*) [NC]
RewriteRule ^ /%1 [R=302,L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^ index.php [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T00:28:01.203

如果您想这样做，当有人请求`http://example.com/page`他们实际获得由 提供的内容时`/cake_dir/page`，您应该将这些规则添加到文档根目录（或“域根目录”）中的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{DOCUMENT_ROOT}/cake_dir%{REQUEST_URI} -f
RewriteRule ^(.*)$ /cake_dir/$1 [L] 
```

浏览器地址栏中的 URL 将保持不变，因为没有外部重定向。这里的条件是它检查是否`%{DOCUMENT_ROOT}/cake_dir%{REQUEST_URI}`指向文件。该字符串本质上是将文档根目录、字符串“cake_dir”和实际请求的文件放在一起。如果这些请求都没有实际指向“cake_dir”中的物理文件，您可以尝试：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /cake_dir/$1 [L] 
```

这里，条件是请求的 URI（例如`/page`）不*指向*现有文件或目录。它会盲目地将所有内容路由到`/cake_dir`目录中。

* * *

要在有人单击其中包含**cake_dir的链接时***重定向*浏览器，您需要以下规则：

 **```
RewriteCond %{THE_REQUEST} ^(GET|HEAD)\ /cake_dir/
RewriteRule ^cake_dir/(.*)$ /$1 [L,R=301] 
```**

# java - 邻接矩阵中的寻路

> ID：15869241
> 
> 赞同：0
> 
> 时间：2013-04-07T23:49:36.477
> 
> 标签：java, algorithm, shortest-path, adjacency-matrix

给定一个邻接矩阵，你如何找到两个节点之间的最短路径，同时至少遍历每个点一次并返回它需要多少次移动？

**例子**

给定这个数组

```
int[][] points = { { 0, 1 },{ 0, 2 },{ 1, 2 },{ 1, 3 },{ 3, 4 } }; 
```

我像这样制作一个相邻的矩阵......

```
 0    1    2    3    4   
0   [0]  [1]  [1]  [0]  [0] 
1   [1]  [0]  [1]  [1]  [0]  
2   [1]  [1]  [0]  [0]  [0] 
3   [0]  [1]  [0]  [0]  [1]
4   [0]  [0]  [0]  [1]  [0] 
```

从 0 到 4 的最短路径是 (0-2)(2-1)(1-3)(3-4)，计为 4 步。

我真的不知道如何走得更远。可能是最小生成树解决方案？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T00:04:28.650

正如杜克林所建议的那样，通过简化为哈密顿路径问题，可以肯定这是 NP Hard。假设我们有一个多时间算法 X 来解决这个问题。那么这意味着我们可以问 X 寻找在任何 2 个顶点之间的最小长度路径的问题，该路径在到达终点的过程中访问所有其他顶点。

现在，由于我们需要至少访问所有顶点一次，这意味着这样一条路径的最小长度是 (|V| - 1)。因此，如果我们的算法给了我们一条大小为 (|V| - 1) 的路径，我们已经在多时间内回答了哈密顿路径的可判定性问题，因为我们可以在所有顶点对上运行我们的算法 X（其中有 O(n ^2)) 在多时间也是如此。

可能有一种使用动态编程/递归的方法，但我无法证明它是多时间。访问所有顶点的从 s 到 t 的最短路径可以通过查看图 G/{s} 来计算，并询问给定 i \in Neighbors(s)，从 i 到 t 的最短路径是什么。然后我们知道从 s 到 t 的最短路径必须等于 s 附加到它的邻居之一（特别是通向 t 的最短路径的那个）。

# asp.net - 如何动态绑定jqGrid colModel Formatter

> ID：15869243
> 
> 赞同：0
> 
> 时间：2013-04-07T23:49:42.527
> 
> 标签：asp.net, jqgrid

我正在尝试动态绑定 jqGrid 列模型的格式化程序。`colModel`我如下动态构建数组。

```
ColModel:[{name:Id,width:50,formatter:customerLinkFormatter}] 
```

我已将格式化程序扩展如下

```
$.extend($.fn.fmatter, {
customerLinkFormatter: function (cellvalue, options, rowdata) {
    return '<a href="CustomerEdit.aspx?id=' + rowdata[options.colModel.name] + '"> ' + cellvalue + '</a>';
} 
```

});

但没有显示 Id 列的链接。请帮我弄清楚。

这是部分代码

```
$(document).ready(function () {
        "use strict";
        $.ajax({
            type: "POST",
            url: "../Hdlr.ashx?",
            datatype: "json",
            success: function (msg) {
                jqcolNames = msg.ColNames,
                jqcolModel = msg.ColModel,

                PopulateGrid();
            },
            error: function (msg) {
                alert(' error  ' + msg.responseText);
            }
        });
    });

    function PopulateGrid() {
        $('#list').jqGrid({
            url: "../Hdlr.ashx?",
            colNames: jqcolNames,
            colModel: jqcolModel,
            jsonReader: {
                cell: "",
                id: "0",
                repeatitems: false
            },
            rowNum: 10,
            rowList: [10, 20, 30],
            pager: "#pager",
            rownumbers: true,
            viewrecords: true,
            search: false,
            caption: "Grid Information"
        }).jqGrid("navGrid", "#pager", { edit: false, add: false, del: false, search: false });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:31:26.360

尝试定义`formatter`就像定义一个函数：

```
 function customerLinkFormatter(cellvalue, options, rowdata) {
               return '<a href="CustomerEdit.aspx?id=' + rowdata.name + '"> ' + cellvalue + '</a>';
            }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:58:59.793

如果你扩展了`$.fn.fmatter`，那么你应该使用**字符串**“customerLinkFormatter”而不是直接使用函数`customerLinkFormatter`：

```
colModel:[{name: "Id", width: 50, formatter: "customerLinkFormatter"}] 
```

如果您之前没有使用相应的字符串值定义变量，那么使用的`name:Id`也是错误的。`Id`

您写了关于动态绑定 jqGrid 的格式化程序。您只需`formatter`更改`colModel`. 例如可以使用`setColProp`一种方法。请参阅[此处](https://stackoverflow.com/a/15110776/315935)的使用示例`setColProp`。

# html - 协助在 vb.net 网络浏览器中单击此内容 [不确定是否按钮]

> ID：15869250
> 
> 赞同：0
> 
> 时间：2013-04-07T23:51:00.770
> 
> 标签：html, vb.net, button, browser

好的，我已经尝试了很多次才能做到这一点，但总是失败......有人可以帮我点击这个按钮吗？代码是...

```
<a class="single_like_button btn3-wrap" onclick="openFbLWin_306925();">
<span>&nbsp;</span>
<div class="btn3">Like</div>
</a> 
```

感谢：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T14:35:16.950

首先，您需要获取元素，然后调用正确的成员，例如：

```
For Each elem As HtmlElement In webBrowser1.Document.GetElementsByTagName("a")
    If elem.GetAttribute("class") = "single_like_button btn3-wrap" Then
        elem.InvokeMember("onclick")
    End If
Next 
```

尝试更改`"class"`为`"classname"`有时需要第二个。

# jquery - 调整窗口大小时包装器溢出

> ID：15869253
> 
> 赞同：0
> 
> 时间：2013-04-07T23:51:26.853
> 
> 标签：jquery, html, css, resize

我的站点位于 jrctestsite.co.nf，当我缩小手风琴垂直溢出的窗口时，出现了尺寸问题。我想知道是否有人可以指出我正确的方向。我认为这很可能与包装器 div 的 css 属性有关，但我不是 100% 确定，希望第二双眼睛能帮上忙！

编辑 - 欢迎任何其他关于如何提高我的网站性能的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T00:01:58.573

穿上`white-space: nowrap;`你的包装元素似乎可以解决问题，如果诀窍是防止你的浮动元素包装;)。您可以[在此处](https://stackoverflow.com/questions/5616360/stop-floating-divs-from-wrapping)了解更多信息。

# mongodb - 带有图像字段的 MongoDB 架构

> ID：15869254
> 
> 赞同：1
> 
> 时间：2013-04-07T23:51:45.947
> 
> 标签：mongodb, gridfs

我想在 MongoDB 中使用图像字段创建如下模式，

```
{
    _id: {},
    camera_id: ObjectId(),
    image: {},
    hour: ts_of_hour,
    day: ts_of_day
} 
```

我想将 GridFs 用于图像字段。如何使用 Mongodb 中的 Gridfs 图像字段创建像这样的单个集合。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-08T03:01:15.020

您所需要的只是文档中 GridFS 对象的名称。您需要在应用程序逻辑中存储/检索：MongoDB 不会自动为您执行此操作。这是一个演示文稿，其中包含有关[如何使用 GridFS 管理图像的](http://www.slideshare.net/marksmalley1/serving-images-with-gridfs)示例代码。

# ruby - 捆绑安装在 ruby 2.0 升级时损坏

> ID：15869256
> 
> 赞同：12
> 
> 时间：2013-04-07T23:52:21.733
> 
> 标签：ruby, bundler, ruby-on-rails-4, ruby-2.0

刚刚升级到 ruby​​ 2.0/rails 4.0 并尝试在新的 rails 项目上运行 bundle install 。每当它碰到尚未安装的东西时，它就会吐出：

```
Installing coffee-rails (4.0.0.beta1) 
Errno::ENOENT: No such file or directory - /usr/lib/ruby/gems/2.0.0/build_info/coffee-rails-4.0.0.beta1.info
An error occurred while installing coffee-rails (4.0.0.beta1), and Bundler cannot continue.
Make sure that `gem install coffee-rails -v '4.0.0.beta1'` succeeds before bundling. 
```

所以然后我跑

```
gem install coffee-rails -v '4.0.0.beta1' 
```

它安装得很好，我重新运行 bundle install 并且每次运行到我尚未安装的 gem 版本时都必须重复此操作。这里有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-10T19:44:32.020

在我的情况下，原来 bundle 试图将 gems 安装到 /usr/lib/ruby/gems/2.0.0 的全局位置，但由于我没有通过 sudo 调用它，所以最终出现权限错误。无论如何，我想安装到我的主目录，所以事实证明我可以这样做：

```
GEM_HOME=~/.gem/ruby/2.0.0/ bundle 
```

并从此过上幸福的生活。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T02:04:46.800

可执行文件只是一个 shell 脚本，`bundle`它有一个 shebang 行，它将指向一个特定的 Ruby 可执行文件（或 to `/usr/bin/env ruby`）。听起来 shebang 行指向的是不同版本的 Ruby，而不是 2.0 版本，也不是`gem`可执行文件中的 shebang 行所指向的那个。

运行它以查看它指向的内容：`head -1 $(which bundle)`

无论显示什么行，去掉`#!`前缀并使用开关运行该行`-v`以查看它是哪个版本的 Ruby（如果不明显）。`#!/usr/bin/ruby`因此，如果随后运行shebang 行`/usr/bin/ruby -v` 如果我的理论是正确的，那么您将在那里获得非 2.0 版本号。

根据您所说的，您的`gem`可执行文件指向 2.0 Ruby，因此这里的解决方法是卸载然后重新安装捆绑器 gem。这*应该*将正确的 Ruby 2.0 shebang 行放入您的`bundle`可执行文件中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-22T02:02:48.250

这为我解决了它：

`sudo gem update --system --no-user-install`

来源：[https ://bbs.archlinux.org/viewtopic.php?id=138650](https://bbs.archlinux.org/viewtopic.php?id=138650)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T00:07:17.197

把它放在你的 Gemfile 中，然后运行 ​​bundle install。

```
group :assets do
  gem 'coffee-rails', github: 'rails/coffee-rails'
end 
```

# ruby-on-rails - rails 用来为新项目生成 gemfile 的配置存储在哪里？

> ID：15869260
> 
> 赞同：2
> 
> 时间：2013-04-07T23:53:01.897
> 
> 标签：ruby-on-rails, gemfile

当执行“rails new x”时，会为项目创建一个 gemfile，然后捆绑器使用它来自动安装所需的 gem。

我知道这个文件可以在创建后进行编辑，但我想更改 Rails 默认放入文件的 gem 版本。我在哪里可以找到 Rails 引用的 gem 信息？如何获取源代码以便每个新项目 gemfile 都以正确的版本开始？

安装的 gem 版本似乎不直接对应于 Rails 参考点（无论它在哪里），因为我可以更改已安装的 gem 版本，但 Rails 将继续使用以前的 gem 版本创建项目 gemfile（坏），然后捆绑器会尝试重新安装该版本（更糟）。

谢谢，丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T23:59:18.393

这是一个存在于 Rails 代码库中的模板文件：

[https://github.com/rails/rails/blob/master/railties/lib/rails/generators/rails/app/templates/Gemfile](https://github.com/rails/rails/blob/master/railties/lib/rails/generators/rails/app/templates/Gemfile)

# jquery - 从 iframe 中删除类并阻止默认操作

> ID：15869261
> 
> 赞同：0
> 
> 时间：2013-04-07T23:53:10.930
> 
> 标签：jquery

这是我的前奏...

我的 iframe 有一堆可点击的按钮，其中一类是`.action-item`

```
$(".action-item").bind("click", function() {
   // do something
}); 
```

在父页面上，我以 iframe 为目标并删除了`.action-item`该类。我已经确认使用 Chrome 开发人员工具，这些项目确实具有已删除的类。

```
$("#bottom-iframe").contents().find(".action-item:visible").each(function() {
     $(this).unbind('click');                   
     $(this).removeClass("action-item"); 
}); 
```

但不幸的是，即使我删除了课程，点击仍会注册并有效。有没有解决方案或我忽略的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T23:56:02.677

您需要删除绑定。您可能想要使用[`.on()`](http://api.jquery.com/on/)and [`.off()`](http://api.jquery.com/off/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T23:56:12.817

您可以像这样删除事件处理程序：

```
$("#bottom-iframe").contents().find(".action-item:visible").each(function() {                       
    $(this).unbind('click');
    $(this).removeClass("action-item"); 
}); 
```

# excel - 在表单上列出 Microsoft Excel 数据

> ID：15869264
> 
> 赞同：0
> 
> 时间：2013-04-07T23:53:49.893
> 
> 标签：excel, reference

我有一个布局良好的 excel 电子表格，看起来像这样：

```
| NAME | SERIAL | GUN1 | OPTIC1 | OPTIC 2 |
+-----------------------------------------+
| Jonn | W0465  | MK19 | 006000 |         | 
+-----------------------------------------+
| Jimm | W1465  | MD24 |        | 455212  | 
+-----------------------------------------+ 
```

我希望它能够将该数据生成到另一个包含表单的工作表中。在此表格中，每个项目（枪 1、光学设备等）有 1 行，但并非每个人都拥有完全相同的设备（乔恩拥有 OPTIC1，而吉姆拥有 OPTIC2，但有些人可能根本没有光学设备）。

表单将如下所示（使用上面的示例数据）。

```
|  TYPE  | SERIAL | NAME |
+------------------------+
|  GUN1  |  MK19  | Jonn |
+------------------------+
| OPTIC1 | 006000 | Jonn |
+------------------------+
|  GUN1  |  MD24  | Jimm |
+------------------------+
| OPTIC2 | 455212 | Jimm |
+------------------------+ 
```

关于如何有效地做到这一点的任何想法？需要有条件语句和引用，但我不确定如何有效地完成所有这些。

我能够使用`=SHEET1!$C2`etc 成功引用数据。然后我为“Jonn”制作了 2 行，并且所有内容都被完美地填写（使用绝对和相对引用）。但是，当我选择这两行并尝试复制它们时，它会生成行`=SHEET1!$C4`而不是`=SHEET1!$C3`（注意 C4 和 C3）。由于 Jonn 的数据在表单上是两行，因此相对引用将跳过原始 Excel 表中的第三行。有道理？请提问

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:56:11.423

所以忽略了表 1 中的*SERIAL*列（这让我有点困惑）。

如果您可以保证您将拥有 OPTIC1 或 OPTIC2（不是两者），那么使用工作表函数是可能的。

如果您有可能同时拥有这两者，那么您仍然可以这样做，但您最终可能会在列表中出现空白。

我假设您可以拥有一个光学器件，而不是两者，并且两张纸上的第 1 行都用作列标题。

您可以使用该`ROW()`函数和一些数学来生成您的列表。

Sheet2!A2 =`=IF((ABS(ROW()/2)+1-(INT(ROW()/2)+1))=0,"GUN1",IF(INDIRECT("Sheet1!D" & (INT(ROW()/2)+1))="","OPTIC2","OPTIC1"))`

Sheet2!B2 =`=IF((ABS(ROW()/2)+1-(INT(ROW()/2)+1))=0,INDIRECT("Sheet1!C" & (INT(ROW()/2)+1)),IF(INDIRECT("Sheet1!D" & (INT(ROW()/2)+1))="",INDIRECT("Sheet1!E" & (INT(ROW()/2)+1)),INDIRECT("Sheet1!D" & (INT(ROW()/2)+1))))`

Sheet2!C2 =`=INDIRECT("Sheet1!A" & INT(ROW()/2)+1)`

这些公式应该根据需要自动填充到工作表中（没有检查它正在查看的行是否已填充）

您可能想要研究 VBA 解决方案，因为如果您需要添加额外的列或者如果您可以同时拥有两个光学器件，它会更容易维护。

**更新**

重新阅读您的问题，并看到没有光学是一种选择，我的代码不会理解它并给您留下一些半填充的行。

您需要使用 VBA。

# ruby - 为什么 Nokogiri 只需要在超级用户模式下工作？

> ID：15869266
> 
> 赞同：3
> 
> 时间：2013-04-07T23:53:57.843
> 
> 标签：ruby, linux, rubygems, nokogiri

运行名为 wc.rb 的文件时，我不断收到错误消息。我输入：

```
ruby wc.rb 
```

但我不断收到此错误：

```
 /usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:45:in `require': cannot load such file -- nokogiri (LoadError)
from /usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:45:in `require'
from wc.rb:3:in `<main>' 
```

但是，当我使用以下命令运行相同的脚本时，它可以工作：

```
 sudo ruby wc.rb 
```

有什么办法可以让我不必以超级用户身份运行此脚本吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T23:55:36.240

当你运行时`sudo`，你运行的是相同版本的 Ruby 吗？如果`sudo ruby -v`返回不同于 的`ruby -v`内容，您可能只在 Ruby 2.0 gem 位置安装了 Nokogiri gem，而不是与系统默认版本的 Ruby 相关联的 gem 位置。

**更新：**如果您最初使用 安装了 Nokogiri gem `sudo`，您可能还需要先使用 sudo ( ) 将其卸载，然后在不使用( ) 的`sudo gem uninstall nokogiri`情况下重新安装，以确保权限正确。`sudo``gem install nokogiri`

# javascript - 创建新的输入类型

> ID：15869267
> 
> 赞同：1
> 
> 时间：2013-04-07T23:54:15.617
> 
> 标签：javascript, html, input

我想知道是否可以创建一种新的输入，而不是普通的数字、文本等。例如，我正在为我的实习制作一个森林火灾模型，我想添加的一件事是风. 我想知道我是否可以做类似的事情`<input type='wind'/>`并定义它的外观和行为方式。我可以通过其他方式做到这一点，但我也只是想知道是否可以做这样的事情。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T23:58:13.053

可用`input`类型的列表在这里：[http ://www.w3.org/community/webed/wiki/HTML/Elements/input](http://www.w3.org/community/webed/wiki/HTML/Elements/input)

使用`type`默认文本枚举属性（即您只能使用这些值）。

但是，没有什么能阻止您向`class="wind"`输入添加或类似内容并使用 JavaScript 来更改所有此类输入的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:02:05.717

在实践中，没有什么能真正阻止您编写`<input type='wind'/>`HTML 并对其进行样式设置和编写脚本，例如（使用 jQuery）`$('input[type=wind]').click(handler)`。它不是有效的 HTML，但这只是意味着它不符合规范；浏览器不关心这个。它们会将元素视为普通文本输入框，因为它们不识别属性值，因此将使用默认值`type='text'`。这意味着 DOM 节点具有`text`作为`type`属性的值，但它的`attributes`数组（嗯，类似数组的对象）仍然具有`wind`作为`type`

所以就像`<input class='wind'>`@ExplosionPills 所建议的那样使用，只是使用不同的属性名称，并且有额外的复杂性。无论哪种方式，后备（在禁用脚本的情况下）都是一个普通的文本输入框。

如果回退不相关（如果没有 JavaScript，页面根本无法工作），使用`span`or`div`元素`class`并按照您喜欢的方式实现它是最简单的。这样您就不必处理普通文本输入框的默认呈现和行为；清除它们以支持您自己的渲染和功能可能有点棘手。

# javascript - 按跨度类对 div 进行排序

> ID：15869270
> 
> 赞同：1
> 
> 时间：2013-04-07T23:54:29.967
> 
> 标签：javascript, jquery

*编辑* 我有这个在小提琴[http://jsfiddle.net/gandjyar/HM67V/](http://jsfiddle.net/gandjyar/HM67V/)工作，但不能让它在小提琴之外工作......想法？

我有以下代码：

```
<div id="sort">
  <p>Sort Communities By: <a href="#">North</a> | <a href="#">South</a> | <a href="#">East</a> | <a href="#">West</a> | <a href="#">ALL</a>
  </p>
</div>
<div class="fp-floorplans">
  <div id="fp-link">
    <a href="#">Community 1</a>
  </div>
  <div id="wpcf-field-location" class="wpcf-field-checkboxes wpcf-field-location">
    <span class="wpcf-field-name wpcf-field-checkboxes wpcf-field-location-name">Loation:</span>
    <span class="wpcf-field-value wpcf-field-checkboxes-value wpcf-field-location-value">South</span>
  </div>
  <div id="wpcf-field-schools" class="wpcf-field-textfield wpcf-field-schools">
    <span class="wpcf-field-name wpcf-field-textfield wpcf-field-schools-name">School(s):</span> 
    <span class="wpcf-field-value wpcf-field-textfield-value wpcf-field-schools-value">Southwest</span>
  </div>
  <div id="wpcf-field-price-starting-at" class="wpcf-field-textfield wpcf-field-price-starting-at">
    <span class="wpcf-field-name wpcf-field-textfield wpcf-field-price-starting-at-name">Price Starting At:</span>
    <span class="wpcf-field-value wpcf-field-textfield-value wpcf-field-price-starting-at-value">$100's</span>
  </div>
</div>
<div class="fp-floorplans">
  <div id="fp-link">
    <a href="#">Community 2</a>
  </div>
  <div id="wpcf-field-location" class="wpcf-field-checkboxes wpcf-field-location">
    <span class="wpcf-field-name wpcf-field-checkboxes wpcf-field-location-name">Loation:</span>
    <span class="wpcf-field-value wpcf-field-checkboxes-value wpcf-field-location-value">East</span>
  </div>
  <div id="wpcf-field-schools" class="wpcf-field-textfield wpcf-field-schools">
    <span class="wpcf-field-name wpcf-field-textfield wpcf-field-schools-name">School(s):</span>
    <span class="wpcf-field-value wpcf-field-textfield-value wpcf-field-schools-value">Southeast</span>
  </div>
  <div id="wpcf-field-price-starting-at" class="wpcf-field-textfield wpcf-field-price-starting-at">
    <span class="wpcf-field-name wpcf-field-textfield wpcf-field-price-starting-at-name">Price Starting At:</span>
    <span class="wpcf-field-value wpcf-field-textfield-value wpcf-field-price-starting-at-value">$100's</span>
  </div>
</div> 
```

我希望能够按“wpcf-field-location-value”的北、南、东、西进行排序，或者只对“wpcf-field-schools-value”进行升序排序。

我尝试实施一些我发现但没有奏效的建议。（[Jquery - 按子元素的 innerHTML 对 DIV 进行](https://stackoverflow.com/questions/7831712/jquery-sort-divs-by-innerhtml-of-children)排序，并按[div 标签和 jQuery 中的数字对 div 进行排序](https://stackoverflow.com/questions/8446615/sorting-divs-by-number-inside-div-tag-and-jquery)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:17:29.903

第一：你的 html 中不能有相同的 id 值。您可以通过给它 data-id 来添加用户属性。整个文档的 id 属性值必须是唯一的。

由于北、南、东、西不是按字母顺序排列的，因此您需要将它们替换为另一个值。

使用此处提供的代码（进行一些编辑）：[Jquery - sort DIV's by innerHTML of children](https://stackoverflow.com/questions/7831712/jquery-sort-divs-by-innerhtml-of-children)

```
var direction={north:0,south:1,east:2,west:3}
function sortOn(primary){
  primary=primary.toLowerCase();
  for(item in direction){
    if(direction[item]===0){
      break;
    }
  }
  var tmp=direction[primary];
  direction[primary]=0;
  direction[item]=tmp;
    var items = $(".fp-floorplans").sort(function(a, b) {
        var vA = $(a).find("wpcf-field-location-value").text().trim().toLowerCase();
        var vB = $(b).find("wpcf-field-location-value").text().trim().toLowerCase();
        if(directions[vA]===directions[vB]){
          //secondary search
          vA = $(a).find("wpcf-field-schools-value").text().trim().toLowerCase();
          vB = $(b).find("wpcf-field-schools-value").text().trim().toLowerCase();
          return (vA < vB) ? -1 : (vA > vB) ? 1 : 0;
        }
        // primary searh (a and b cannot be the same)
        return (vA < vB) ? -1 : 1;
    });
}

sortOn("west"); 
```

要更改顺序的优先级（如西优先），您可以在排序前更改方向变量：direction={north:3,south:1,east:2,west:0}

首先，您需要查看当前包含 0 的值，然后将其替换为新的 on。

# c - C 编程 - 使这个程序更短的任何方法

> ID：15869272
> 
> 赞同：0
> 
> 时间：2013-04-07T23:54:50.610
> 
> 标签：c

我的程序必须尝试所有可能的转变来解密密文这是在函数中完成的。如果您有任何想法可以缩短此时间，我们将不胜感激。

```
char decryptCiphertext(char data[], double data2[])
{
   int i, convert, shiftingLetter;
   char decrypted26[42], decrypted1[42], decrypted2[42], decrypted3[42], decrypted4[42], 
   decrypted5[42], decrypted6[42], decrypted7[42], decrypted8[42], decrypted9[42], decrypted10[42], 
   decrypted11[42], decrypted12[42], decrypted13[42], decrypted14[42], decrypted15[42], decrypted16[42], 
   decrypted17[42], decrypted18[42], decrypted19[42], decrypted20[42], decrypted21[42], decrypted22[42], 
   decrypted23[42], decrypted24[42], decrypted25[42];

   //Try all possible shifts from 1-25 and store each in an array
   for (i = 0; data[i] != '\0'; i++) 
   {
      convert = data[i] - 'A';  //convert letters to equal 0-26 ex:A=0,B=1,C=2,etc
      convert = (convert + 1);    //add shift
      shiftingLetter = convert % 26;    //cycle around
      decrypted1[i] = 'A' + shiftingLetter;  //store new letter in array
   }
   decrypted1[i] = '\0';
   likelyPlaintext(decrypted1, data2);
   //printf(" 1\. %s\n", decrypted1);

   for (i = 0; data[i] != '\0'; i++)
   {
      convert = data[i] - 'A';
      convert = (convert + 2);
      shiftingLetter = convert % 26;
      decrypted2[i] = 'A' + shiftingLetter;
   }
   decrypted2[i] = '\0';
   //printf(" 2\. %s\n", decrypted2);

   for (i = 0; data[i] != '\0'; i++)
   {
      convert = data[i] - 'A';
      convert = (convert + 3);
      shiftingLetter = convert % 26;
      decrypted3[i] = 'A' + shiftingLetter;
   }
   decrypted3[i] = '\0';
   //printf(" 3\. %s\n", decrypted3);

   for (i = 0; data[i] != '\0'; i++)
   {
      convert = data[i] - 'A';
      convert = (convert + 4);
      shiftingLetter = convert % 26;
      decrypted4[i] = 'A' + shiftingLetter;
   }
   decrypted4[i] = '\0';
   //printf(" 4\. %s\n", decrypted4);

   for (i = 0; data[i] != '\0'; i++)
   {
      convert = data[i] - 'A';
      convert = (convert + 5);
      shiftingLetter = convert % 26;
      decrypted5[i] = 'A' + shiftingLetter;
   }
   decrypted5[i] = '\0';
   //printf(" 5\. %s\n", decrypted5);

   for (i = 0; data[i] != '\0'; i++)
   {
      convert = data[i] - 'A';
      convert = (convert + 6);
      shiftingLetter = convert % 26;
      decrypted6[i] = 'A' + shiftingLetter;
   }
   decrypted6[i] = '\0';
   //printf(" 6\. %s\n", decrypted6);

   for (i = 0; data[i] != '\0'; i++)
   {
      convert = data[i] - 'A';
      convert = (convert + 7);
      shiftingLetter = convert % 26;
      decrypted7[i] = 'A' + shiftingLetter;
   }
   decrypted7[i] = '\0';
   //printf(" 7\. %s\n", decrypted7);

   for (i = 0; data[i] != '\0'; i++)
   {
      convert = data[i] - 'A';
      convert = (convert + 8);
      shiftingLetter = convert % 26;
      decrypted8[i] = 'A' + shiftingLetter;
   }
   decrypted8[i] = '\0';
   //printf(" 8\. %s\n", decrypted8);

   for (i = 0; data[i] != '\0'; i++)
   {
      convert = data[i] - 'A';
      convert = (convert + 9);
      shiftingLetter = convert % 26;
      decrypted9[i] = 'A' + shiftingLetter;
   }
   decrypted9[i] = '\0';
   //printf(" 9\. %s\n", decrypted9);

   for (i = 0; data[i] != '\0'; i++)
   {
      convert = data[i] - 'A';
      convert = (convert + 10);
      shiftingLetter = convert % 26;
      decrypted10[i] = 'A' + shiftingLetter;
   }
   decrypted10[i] = '\0';
   //printf(" 10\. %s\n", decrypted10);

   for (i = 0; data[i] != '\0'; i++)
   {
      convert = data[i] - 'A';
      convert = (convert + 11);
      shiftingLetter = convert % 26;
      decrypted11[i] = 'A' + shiftingLetter;
   }
   decrypted11[i] = '\0';
   //printf(" 11\. %s\n", decrypted11);

   for (i = 0; data[i] != '\0'; i++)
   {
      convert = data[i] - 'A';
      convert = (convert + 12);
      shiftingLetter = convert % 26;
      decrypted12[i] = 'A' + shiftingLetter;
   }
   decrypted12[i] = '\0';
   //printf(" 12\. %s\n", decrypted12);

   for (i = 0; data[i] != '\0'; i++)
   {
      convert = data[i] - 'A';
      convert = (convert + 13);
      shiftingLetter = convert % 26;
      decrypted13[i] = 'A' + shiftingLetter;
   }
   decrypted13[i] = '\0';
   //printf(" 13\. %s\n", decrypted13);

   for (i = 0; data[i] != '\0'; i++)
   {
      convert = data[i] - 'A';
      convert = (convert + 14);
      shiftingLetter = convert % 26;
      decrypted14[i] = 'A' + shiftingLetter;
   }
   decrypted14[i] = '\0';
   //printf(" 14\. %s\n", decrypted14);

   for (i = 0; data[i] != '\0'; i++)
   {
      convert = data[i] - 'A';
      convert = (convert + 15);
      shiftingLetter = convert % 26;
      decrypted15[i] = 'A' + shiftingLetter;
   }
   decrypted15[i] = '\0';
   //printf(" 15\. %s\n", decrypted15);

   for (i = 0; data[i] != '\0'; i++)
   {
      convert = data[i] - 'A';
      convert = (convert + 16);
      shiftingLetter = convert % 26;
      decrypted16[i] = 'A' + shiftingLetter;
   }
   decrypted16[i] = '\0';
   //printf(" 16\. %s\n", decrypted16);

   for (i = 0; data[i] != '\0'; i++)
   {
      convert = data[i] - 'A';
      convert = (convert + 17);
      shiftingLetter = convert % 26;
      decrypted17[i] = 'A' + shiftingLetter;
   }
   decrypted17[i] = '\0';
   //printf(" 17\. %s\n", decrypted17);

   for (i = 0; data[i] != '\0'; i++)
   {
      convert = data[i] - 'A';
      convert = (convert + 18);
      shiftingLetter = convert % 26;
      decrypted18[i] = 'A' + shiftingLetter;
   }
   decrypted18[i] = '\0';
   //printf(" 18\. %s\n", decrypted18);

   for (i = 0; data[i] != '\0'; i++)
   {
      convert = data[i] - 'A';
      convert = (convert + 19);
      shiftingLetter = convert % 26;
      decrypted19[i] = 'A' + shiftingLetter;
   }
   decrypted19[i] = '\0';
   //printf(" 19\. %s\n", decrypted19);

   for (i = 0; data[i] != '\0'; i++)
   {
      convert = data[i] - 'A';
      convert = (convert + 20);
      shiftingLetter = convert % 26;
      decrypted20[i] = 'A' + shiftingLetter;
   }
   decrypted20[i] = '\0';
   //printf(" 20\. %s\n", decrypted20);

   for (i = 0; data[i] != '\0'; i++)
   {
      convert = data[i] - 'A';
      convert = (convert + 21);
      shiftingLetter = convert % 26;
      decrypted21[i] = 'A' + shiftingLetter;
   }
   decrypted21[i] = '\0';
   //printf(" 21\. %s\n", decrypted21);

   for (i = 0; data[i] != '\0'; i++)
   {
      convert = data[i] - 'A';
      convert = (convert + 22);
      shiftingLetter = convert % 26;
      decrypted22[i] = 'A' + shiftingLetter;
   }
   decrypted22[i] = '\0';
   //printf(" 22\. %s\n", decrypted22);

   for (i = 0; data[i] != '\0'; i++)
   {
      convert = data[i] - 'A';
      convert = (convert + 23);
      shiftingLetter = convert % 26;
      decrypted23[i] = 'A' + shiftingLetter;
   }
   decrypted23[i] = '\0';
   //printf(" 23\. %s\n", decrypted23);

   for (i = 0; data[i] != '\0'; i++)
   {
      convert = data[i] - 'A';
      convert = (convert + 24);
      shiftingLetter = convert % 26;
      decrypted24[i] = 'A' + shiftingLetter;
   }
   decrypted24[i] = '\0';
   //printf(" 24\. %s\n", decrypted24);

   for (i = 0; data[i] != '\0'; i++)
   {
      convert = data[i] - 'A';
      convert = (convert + 25);
      shiftingLetter = convert % 26;
      decrypted25[i] = 'A' + shiftingLetter;
   }
   decrypted25[i] = '\0';
   //printf(" 25\. %s\n", decrypted25);

} 
```

我的程序必须尝试所有可能的转变来解密密文这是在函数中完成的。如果您有任何想法可以缩短此时间，我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T23:57:51.140

一方面，每个 for 循环都可以是您将变量传递给的函数。

记住干燥。不要重复自己。

我不知道 C 但下面应该在一个函数中，你传入 decrypted4 和 26 并返回结果。

```
 for (i = 0; data[i] != '\0'; i++)
   {
      convert = data[i] - 'A';
      convert = (convert + 4);
      shiftingLetter = convert % 26;
      decrypted4[i] = 'A' + shiftingLetter;
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T00:05:24.507

这里是：

```
 int i, j, convert, shiftingLetter;
   char decryptedArr[25][42];

   //Try all possible shifts from 1-25 and store each in an array
   for (j = 0; j < 25; j++)
   for (i = 0; data[i] != '\0'; i++) 
   {
      convert = data[i] - 'A';  //convert letters to equal 0-26 ex:A=0,B=1,C=2,etc
      convert = (convert + i + 1);    //add shift
      shiftingLetter = convert % 26;    //cycle around
      decryptedArr[j][i] = 'A' + shiftingLetter;  //store new letter in array
   }
   decryptedArr[j][i] = '\0'; 
```

# mysql - MySQL如何处理传入case语句的空值

> ID：15869273
> 
> 赞同：0
> 
> 时间：2013-04-07T23:54:58.277
> 
> 标签：mysql, case

我在 MySQL 中使用 case 语句。

当`f.winner`字段为 NULL 时，它返回 "Loss" 而不是`f.method`. 所以似乎 MySQL 的 case 语句不能像这样处理空白和空值。

```
(
    CASE f.winner
        WHEN :fighter_id THEN "Win"
        WHEN NULL OR "0" THEN f.method
        ELSE "Loss"
    END
) AS result, 
```

有时两者`f.winner`和`f.method`都是空白的，我只是希望结果在这些情况下返回为空白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T00:08:38.400

您可以使用`IFNULL`函数并`NULL`从您的`WHEN`子句中删除：

```
(
    CASE IFNULL(f.winner, "0")
        WHEN :fighter_id THEN "Win"
        WHEN "0" THEN f.method
        ELSE "Loss"
    END
) AS result, 
```

# json - JSON 未正确转换长数字

> ID：15869275
> 
> 赞同：15
> 
> 时间：2013-04-07T23:55:34.630
> 
> 标签：json, numbers, converter

我有一个简单的 JSON，其中没有正确解析数字。

```
[
  {
    "orderNumber": 1,
    "customerId": 228930314431312345,
    "shoppingCartId": 22893031443137109,
    "firstName": "jjj"
  }
] 
```

我试过@http [://www.utilities-online.info/xmltojson/](http://www.utilities-online.info/xmltojson/)结果是

```
<?xml version="1.0" encoding="UTF-8" ?>
<orderNumber>1</orderNumber>
<customerId>228930314431312350</customerId>
<shoppingCartId>22893031443137108</shoppingCartId>
<firstName>jjj</firstName> 
```

如您所见...... XML 与 JSON 不同。我是 JSON 新手。我错过了什么吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-08T00:05:32.383

这是一个 Javascript 精度问题。

根据 Mozilla 开发者网络：

> ECMA-262 只需要最多 21 位有效数字的精度。其他实现可能不支持高于标准要求的精度。

来源：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toPrecision](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toPrecision)

我将您的数组粘贴到 Google Chrome 的 Javascript 控制台中，然后返回： ![Javascript 精度错误](https://i.stack.imgur.com/RnqaB.png)

因此，看起来 Javascript 在将值转换为 XML 之前对其进行了四舍五入。由于您的转换是通过[http://www.utilities-online.info/xmltojson/](http://www.utilities-online.info/xmltojson/)浏览器中的 Javascript 完成的，因此更改数字是有道理的。

（注：我使用 Windows 7 Professional 在 Google Chrome 版本 26.0.1410.43 m 上进行了测试）

**编辑：**

有什么理由不能将这些值作为字符串传递给 Javascript？

试试这个：

```
[
  {
    "orderNumber": "1",
    "customerId": "228930314431312345",
    "shoppingCartId": "22893031443137109",
    "firstName": "jjj"
  }
] 
```

我能够做到这一点并成功保存值。但是，您将无法在 Javascript 中对它们进行数学计算而不会损失一些精度，当然，除非您正在执行诸如乘以 0 之类的操作。

![Javascript 精确字符串解决方法](https://i.stack.imgur.com/mW4VZ.png)

[这也使用您的参考http://www.utilities-online.info/xmltojson/](http://www.utilities-online.info/xmltojson/)正确转换为 XML 。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-13T11:46:15.617

Javascript 将其数字表示为双精度浮点数，这将可以表示的最大整数限制为 +-9007199254740992。这是[ECMA](https://www.ecma-international.org/ecma-262/10.0/index.html#sec-ecmascript-language-types-number-type)文档。

# java - Querydsl 不支持 rand() 吗？

> ID：15869279
> 
> 赞同：3
> 
> 时间：2013-04-07T23:55:39.523
> 
> 标签：java, querydsl

我想让 SQL 看起来像：

```
select b from Book b order by rand()
```

如何将该查询转换为 Querydsl 查询？

Querydsl 不支持吗？如果您知道支持此查询的方式，请回答..；

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T08:10:01.023

Querydsl SQL 通过

```
NumberExpression.random() 
```

所以你的查询可以这样表达

```
query.from(b)
    .orderBy(NumberExpression.random().asc())
    .list(b); 
```

我不确定它对 JPQL 的支持程度如何，它似乎不在标准中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-15T12:44:33.987

蒂莫回答的补充。

如果你使用 mysql 你会得到错误“ERROR: FUNCTION schema.random does not exist”，这是因为 mysql 有一个 RAND 函数而不是一个 RANDOM 函数。要解决此问题，您可以在 sql 中添加随机函数，如下所示：

```
DROP FUNCTION IF EXISTS RANDOM;

DELIMITER $$
CREATE FUNCTION RANDOM () 
RETURNS DECIMAL(15,15)
DETERMINISTIC
BEGIN 
  DECLARE dist DECIMAL(15,15);
  SET dist = RAND();
  RETURN dist;
END$$
DELIMITER ; 
```

或者修复随机函数以使用 rand ：

```
public class MySQLJPATemplates extends JPQLTemplates {

    public static final MySQLJPATemplates DEFAULT = new MySQLJPATemplates();

    public MySQLJPATemplates() {
        this(DEFAULT_ESCAPE);
        add(Ops.MathOps.RANDOM, "rand()");
        add(Ops.MathOps.RANDOM2, "rand({0})");
    }

    public MySQLJPATemplates(char escape) {
        super(escape);
    }
} 
```

并使用如下模板：

```
JPAQuery<Route> query = new JPAQuery<Route>(em, MySQLJPATemplates.DEFAULT);
query.from(b)
    .orderBy(NumberExpression.random().asc())
    .list(b); 
```

# c - 在 Mac OS X 上编译和链接 libev

> ID：15869291
> 
> 赞同：1
> 
> 时间：2013-04-07T23:56:54.293
> 
> 标签：c, macos

在 Mac OS X 中找不到另一个符号问题。我编写了一个使用 libev 事件循环库的 C 程序，该库在编译时会产生以下输出：

```
$ make
clang midnight.c midnight_logging.c -o midnight
Undefined symbols for architecture x86_64:
  "_ev_default_loop", referenced from:
      _main in midnight-Wlcawk.o
  "_ev_io_start", referenced from:
      _main in midnight-Wlcawk.o
  "_ev_run", referenced from:
      _main in midnight-Wlcawk.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [midnight] Error 1 
```

我使用自制软件安装 libev。共享库通常位于 /usr/local/lib 中，我使用了编译器参数的所有组合，包括“-I /usr/local/lib”、“-l libev”和“-L /usr/local/lib ”。

感谢您的帮助，我宁愿不必静态编译。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T23:59:23.303

但你***不***链接反对libev！编译器不是千里眼（链接器也不是），您必须告诉它要搜索这些符号的内容...

```
clang midnight.c midnight_logging.c -o midnight -lev 
```

# android - id_token 验证失败：无效的令牌签名：在谷歌云端点中

> ID：15869298
> 
> 赞同：3
> 
> 时间：2013-04-07T23:57:31.247
> 
> 标签：android, google-app-engine, google-oauth, google-cloud-endpoints

我让谷歌云端点与一个用python应用引擎编写的android应用和后端一起工作。当我在开发过程中卸载并重新安装我的应用程序时，我开始从后端遇到 401 错误。在我第一次工作后，后端没有任何变化。所以，

1.  我清理了 C:\Users\username\.android 中的 debug.keystore 文件以及同一目录中的其他文件。再次重新生成了 debug.keystore 文件并获得了新的 sha1 足迹

2.  删除了谷歌应用程序控制台中的 API 项目，并使用新的 sha1 足迹重新生成了 web client_id 和 android client_id

3.  在服务器端代码中使用了新的 web client_id 和 android client_id

4.  还更新了 android 代码中受众范围内的 android cliend_id

我现在安装应用程序后，仍然看到相同的 401 错误。我的应用引擎日志显示了这一点，

```
I 2013-04-07 16:45:27.297 Checking for id_token.
W 2013-04-07 16:45:27.299 id_token verification failed: Invalid token signature: eyJhbGciOiJSUzI1NiIsImtpZCI6IjMzMTJkNDc0ZWUzNWRjNWU4YzFhMDE4OTkzOGZkN2E3YmUzYmRlZjYifQ.eyJpc3Mi
I 2013-04-07 16:45:27.299 Checking for oauth token. 
```

我能够根据[云端点 oauth2 错误](https://stackoverflow.com/questions/15410013/cloud-endpoints-oauth2-error)和[http://android-developers.blogspot.com/2013/01/verifying-back-end-calls-from-android.html](http://android-developers.blogspot.com/2013/01/verifying-back-end-calls-from-android.html)收集更多信息，

我解码了发送到app_engine服务器的id_token，发现它有这些字段，

```
cid = Android app client_id that I registered in app console for 
azp = Android app client_id 
aud = web client_id for App engine 
iss = accounts.google.com
verified_email = true
email_verified = true
email = account i selected in account picker in android app
exp = a datetime having a value in the future 
first_segment = {u'alg': u'RS256', u'kid': u'3312d474ee35dc5e8c1a0189938fd7a7be3bdef6'} 
```

以上值似乎正确，但 id_verification 失败。不知道为什么。

* * *

又遇到了这个问题。发生，当我卸载后重新安装我的应用程序时。Cloudend Points 服务抛出无效令牌错误。使用令牌并使用 url 对其进行验证。得到如下所示的输出，这意味着令牌是有效的。

```
"issuer": "accounts.google.com",
"issued_to": "172895167251-1prp5r093hf2nro5bei2cmc1tqf4aasdu.apps.googleusercontent.com",
"audience": "172895167251.apps.googleusercontent.com",
"user_id": "myuserid",
"expires_in": 3086,
"issued_at": 1365644284,
"email": "emailIselectedinadroidapp",
"verified_email": true 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:55:18.980

有趣的。如果将 id_token 发送到 tokeninfo 端点会发生什么？：

[https://www.googleapis.com/oauth2/v1/tokeninfo?id_token=](https://www.googleapis.com/oauth2/v1/tokeninfo?id_token=) $id_token

# php - 从存储在网络服务器上的 PHP 文件运行 MongoDB 命令

> ID：15869299
> 
> 赞同：0
> 
> 时间：2013-04-07T23:57:40.230
> 
> 标签：php, mongodb, exec

我想知道从存储在网络服务器上的 PHP 文件运行 MongoDB 命令的方法。我要做的是从转储文件中导入数据库，然后在运行 MongoDB 服务的情况下调用外部 .jar 文件，该文件使用我刚刚导入的 MongoDB 文件，同时服务正在运行。我已经为 PHP 安装了 MongoDB 驱动程序（我正在 Windows 的 xampp 服务器上对此进行测试），但我找不到任何表明运行常用 MongoDB 命令的确切过程的示例（在我的例子中，'mongoexport'） . 据我所知，MongoDB服务由以下人员发起：

```
$m = new MongoClient(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:54:54.930

您可能会将[数据库命令](http://docs.mongodb.org/manual/reference/command/)与 MongoDB附带的[二进制工具混淆。](http://docs.mongodb.org/manual/reference/components/#binary-import-and-export-tools)诸如`mongoexport`和`mongodump`之类的工具不通过驱动程序执行。相反，它们是独立的 C++ 程序。

你当然可以通过 PHP 执行这些，但这样做需要通过诸如[popen()](http://php.net/manual/en/function.popen.php)之类的东西或诸如 Symfony 的[Process 组件](http://symfony.com/doc/current/components/process.html)之类的库来执行二进制文件。如果你在 Windows 上运行 PHP，我会推荐 Symfony 组件，因为它有一些围绕 PHP`popen()`界面的额外代码来提高 Windows 兼容性。

如果您想通过 PHP 执行数据库命令，则需要使用[MongoDB::command()](http://php.net/manual/en/mongodb.command.php)，除非该命令在 MongoDB 或 MongoCollection 对象上具有辅助方法（例如[MongoCollection::aggregate()](http://php.net/manual/en/mongocollection.aggregate.php)）。

# php - 客户端从服务器检索聊天消息的最佳方式？

> ID：15869300
> 
> 赞同：3
> 
> 时间：2013-04-07T23:57:49.767
> 
> 标签：php, javascript, jquery, websocket, server-sent-events

我正在使用 JavaScript、jQuery、MySQL 和 PHP 构建一个聊天应用程序，我只是想知道客户端从服务器检索聊天消息的最佳方式是什么？我目前的潜在候选人是轮询、长轮询、HTML5 服务器发送事件 ( `EventSource`) 和 WebSockets。其中哪一个是最快的（即时消息）和最有效的方法（如果可能，请解释为什么）？或者，如果有更好的方法可以做到这一点，请在答案中详细说明。

此外，我还查看了 Node.js + Socket.IO，但我为这些找到的文档和示例代码对我来说毫无意义。

最后，我使用 XAMPP 作为我的本地服务器，使用 MySQL 作为这个应用程序的数据库。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T00:11:07.373

巧合的是，您列出的选项是按效率从最低到最高的顺序列出的。

轮询效率最低。它将轮询是否有消息，并在其他客户端发送和接收消息之间引入延迟。

长轮询更好；然后您可以在发送消息时收到消息，但是重新连接可能会稍有延迟。在此延迟期间，消息将不会被传递，但除此之外，它实际上是即时的。

COMET（未提及）比长轮询好，但比服务器发送事件差。由于大多数 Web 服务器和浏览器的连接超时，它也必须偶尔重新连接，但是每当发送消息时都不需要重新建立连接。像长轮询一样，重新连接时可能会有延迟，但除此之外，它通常是瞬时的。

Server-Sent Events 类似于 COMET，但当不填充时，它具有浏览器的原生支持，因此它可以绕过超时限制，并且只需要在其生命周期内建立一个连接（只要连接没有中断） . 另一个优点是，如果连接中断而您不需要任何客户端代码，它会自动重新连接。这是瞬时的。

WebSockets 是迄今为止所有这些选项中最好的；它只需要一个连接，而且是双工的：你不仅可以通过它接收消息，还可以通过它发送消息，而不需要每次发送消息时都单独连接到服务器。与服务器发送事件不同，它确实需要更多代码：如果连接中断并且服务器端实现通常更复杂，它不会自动重新连接。我也不确定你是否可以将它与 Apache/XAMPP 一起使用。这是瞬时的。

Socket.io 是一个库，它支持（几乎？）所有这些以及更多（例如，Flash 套接字）并将其抽象为一个不错的 API，因此您不必处理每个浏览器支持的特性. 它与它选择使用的传输一样快，这取决于它运行的浏览器。它还可以减少您必须编写的代码量。但是，如果它对您来说太复杂并且您不关心旧浏览器，那肯定没有必要。此外，它真的很喜欢自己运行。您也许可以让 XAMPP 代理它，但我不知道 Apache 是否*可以*配置为将 WebSockets 转发给它。

# java - 用于 2 个不同字符串的正则表达式，用于说明可选元素

> ID：15869304
> 
> 赞同：1
> 
> 时间：2013-04-07T23:58:48.153
> 
> 标签：java, regex

我在第二个字符串中有两个字符串“2007 AL PLAIN TEXT 5567 (NS)”和“5567”，我只想从两个字符串中提取一组 5567。如何为此编写 java 正则表达式？格式将是 4 位数年份、2 位数管辖权、字符串纯文本，然后是我要提取的数字，最后是 (NS) 但问题都是除了数字可以是可选的，我该如何为此编写一个正则表达式只能在一个组中捕获数字 5567 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:13:24.913

您可以在一行中完成：

```
String num = input.replaceAll("(.*?)?(\\b\\w{4,}\\b)(\\s*\\(NS\\))?$", "$2"); 
```

假设您的目标是“一个至少有 4 个字母数字字符长的单词”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T00:56:27.013

你需要用吗？量词，这意味着匹配是可选的，'?:' 对匹配进行分组，但不会为该组创建反向引用。代码如下：

```
import java.util.regex.Pattern;
import java.util.regex.Matcher;

public class Regexp
{
    public static void main(String args[])
    {
    String x = "2007 AL PLAIN TEXT 5567 (NS)";
    String y = "5567";
    Pattern pattern = Pattern.compile( "(?:.*[^\\d])?(\\d{4,}){1}(?:.*)?");
    Matcher matcher = pattern.matcher(x);

    while (matcher.find()) 
        {
        System.out.format("Text found in x: => \"%s\"\n",
                  matcher.group(1));
        }

    matcher = pattern.matcher(y);

    while (matcher.find()) 
        {
        System.out.format("Text found in y: => \"%s\"\n",
                  matcher.group(1));
        }
    }
} 
```

输出：

```
$ java Regexp
Text found in x: => "5567"
Text found in y: => "5567" 
```

# django - heroku django 亚马逊 S3。视频录制和播放

> ID：15869305
> 
> 赞同：0
> 
> 时间：2013-04-07T23:59:11.193
> 
> 标签：django, heroku, amazon-s3, video-streaming, webcam

大家！

我在 heroku 服务器上运行 django 应用程序。我将亚马逊 S3 存储连接到它。我想让用户录制网络摄像头视频，然后将它们上传（最终到 S3），然后其他用户播放它们。

最简单的方法是什么？我已经花了 20 多个小时围绕这个主题进行研究，但我仍然不知道。人们通常使用一些流媒体服务器，如 RED5 + flash 播放器 + 一些东西 + 一些东西。但它似乎很复杂，不适合 heroku，据我所知......

我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:12:52.467

大多数人采用的解决方案是使用闪存小程序记录到内存中，然后在最后批量上传。[Nimbb](http://nimbb.com/Help/Api.aspx)似乎是大多数人的选择。

或者，Youtube 有一个非常简洁的 API，可以完全从您的站点内进行录制和上传到他们的服务器。

> YouTube 上传小工具可让您网站的访问者将网络摄像头和文件上传到 YouTube。对网络摄像头上传的支持将上传小部件与 YouTube API 支持的其他上传选项区分开来。该小部件使用 HTML5 的 postMessage 支持将有关通过该小部件上传的视频的消息发送回您的网站。

# javascript - 宽度自动的内联块元素不会更新

> ID：15869308
> 
> 赞同：0
> 
> 时间：2013-04-07T23:59:29.377
> 
> 标签：javascript, html, css, dom

我在使用 inline-block 元素时遇到问题

```
width: auto; 
```

并使用 javascript 以编程方式更改高度。

这是一个演示它的jsFiddle；

[http://jsfiddle.net/uJZjB/2/](http://jsfiddle.net/uJZjB/2/)

这个想法是，如果您调整窗口大小，javascript 会设置元素的高度，而 inline-block 元素的宽度会自动调整以适应内容。

但是，宽度不会自动更新，它会保持原始宽度，而不是调整大小以匹配内容的宽度。

如果您通过隐藏和显示元素或更改显示样式等来刷新 dom，则宽度会更新！

请看这个修改过的jsfiddle；

[http://jsfiddle.net/uJZjB/5/](http://jsfiddle.net/uJZjB/5/)

这个在 chrome 上，现在强制宽度：自动；开始工作，在 Firefox 上它似乎仍然没有更新。

以这种方式设置时宽度不会更新是否有原因？

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:37:45.570

您可以通过获取子元素的宽度将元素的宽度与高度一起设置为预期`width:auto`的值：

```
$('#myul li').css('width',$('#myul li').children().width() + 2); // compensate for border 
```

JSFiddle：http: [//jsfiddle.net/uJZjB/4/](http://jsfiddle.net/uJZjB/4/)

# java - 使用 fileReader 只读取前 5 行

> ID：15869309
> 
> 赞同：-1
> 
> 时间：2013-04-07T23:59:42.110
> 
> 标签：java

我正在尝试读取文件，但只想读取前 5 行，然后将它们打印在屏幕上。不知道如何用循环正确地迭代它。以下代码仅打印整个文件。我还需要检查文件在 loo 中是否少于 6 行。非常感谢任何提示。

```
import java.io.*;

public class File_Reader 
{
public static void main(String [] args) throws IOException
{
    // int counter=0;String str;
    String fileName = "MyFile.txt";

    String line = null;

      FileReader fileReader = 
            new FileReader(fileName);

        BufferedReader bufferedReader = 
            new BufferedReader(fileReader);

        while((line = bufferedReader.readLine()) != null) {
            System.out.println(line);
        }   

        bufferedReader.close();         

}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T00:03:43.943

这只是一个循环，直到它迭代 5 次。

```
 import java.io.*;

    public class File_Reader 
    {
    public static void main(String [] args) throws IOException
    {
        // int counter=0;String str;
        String fileName = "MyFile.txt";

        String line = null;

            BufferedReader bufferedReader = 
                new BufferedReader(new FileReader(fileName));

            int i = 0;
            try {
                //print first 5 lines or all if file has less than 5 lines
                while(((line = bufferedReader.readLine()) != null) && i < 5) {
                    System.out.println(line);
                    i++;
                }   
            }
            finally {   
                bufferedReader.close();         
            }

        }
    } 
```

# ios - 使用 UIScrollview 滚动 UITextview

> ID：15869310
> 
> 赞同：0
> 
> 时间：2013-04-07T23:59:55.720
> 
> 标签：ios, objective-c, ipad

所以我创建了一个 UITextView 并将它放在一个 UIScrollView 中。但是，我禁用了 UITextView 的滚动，所以我想知道在滚动 UIScrollView 时是否可以同时滚动 textview？

我不确定是否有人已经问过这样的问题，我试图通过该网站进行搜索，但找不到与我的问题相关的任何主题。如果有这样的现有帖子，如果有人将我链接到它，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:35:59.190

`UIScrollView`是滚动的`UIView`。因此，您只需将其`UITextView`作为子视图添加到滚动视图中，它就会随之滚动，基本上是这样的：

```
UIScrollView *scrollView = [UIScrollView alloc]initWithFrame:CGRectMake(0,0,320,460)];//adjust the frame to fit your needs
scrollView.contentSize = CGSizeMake(400, 600);//make sure the size in contentSize is bigger than the size of the scrollView frame: (400, 600) is bigger than (320, 460), otherwise the scroll effect won't be performed
UITextView *textView = [UITextView alloc]initWithFrame:CGRectMake(0,0,200,400)];//adjust the frame to fit your needs
[scrollView addSubview:textView];//need to add the text view as a subview 
[self.view addSubview:scrollView]; 
```

# c# - WCF 连接问题：配置设置

> ID：15869311
> 
> 赞同：1
> 
> 时间：2013-04-08T00:00:03.317
> 
> 标签：c#, wcf

无法连接到 https://service。TCP错误码10060：连接尝试失败，因为连接的一方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应10.30.82.99:443。

我有2个配置文件如下：

服务器：

```
<system.serviceModel>
        <services>
            <service name="Olap.Service.OlapService" behaviorConfiguration="sb">
                <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
                <endpoint address="" behaviorConfiguration="end" binding="basicHttpBinding" bindingConfiguration="webBind" contract="Olap.Service.IOlapService" />
            </service>
        </services>
        <behaviors>
            <serviceBehaviors>
                <behavior name="sb">
                    <serviceMetadata httpGetEnabled="true" />
                    <serviceDebug includeExceptionDetailInFaults="true" />
                </behavior>
            </serviceBehaviors>
            <endpointBehaviors>
                <behavior name="end">
                    <webHttp />
                </behavior>
            </endpointBehaviors>
        </behaviors>
        <bindings>
            <basicHttpBinding>
                <binding name="webBind">
                    <security mode="Transport">
                        <transport clientCredentialType="None" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
    </system.serviceModel> 
```

客户：

```
<system.serviceModel>
        <client>
            <endpoint address="https://service" binding="basicHttpBinding"
             bindingConfiguration="webBind" contract="Olap.Service.OlapService.IOlapService"
             name="ServiceWcf" />
        </client>
        <bindings>
            <basicHttpBinding>
                <binding name="webBind">
                    <security mode="Transport">
                        <transport clientCredentialType="None" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
    </system.serviceModel> 
```

我添加了一个服务引用，并在尝试调用我创建的 OlapServiceClient 对象上的方法时（new OlapServiceClient("ServiceWcf") 我得到了异常。我一直在查看其他类似的问题，但没有任何效果。我从其他人那里推测我在服务器上的绑定设置必须与客户端相同。如果我将链接更改为 http，它也不起作用，然后收到异常消息“提供的 URI 方案'http'无效；预期'https '。参数名称：通过“我在这里也看到了很多关于但无法修复自己的页面。内部异常说“无法连接到远程服务器”。干杯

# python - Python PyCrypto RSA 盲和非盲

> ID：15869317
> 
> 赞同：3
> 
> 时间：2013-04-08T00:00:50.787
> 
> 标签：python, cryptography, pycrypto

我正在尝试对哈希执行致盲和揭盲。

以下： [https ://gdata-python-client.googlecode.com/hg/pydocs/gdata.Crypto.PublicKey.RSA.html#RSAobj_c-unblind](https://gdata-python-client.googlecode.com/hg/pydocs/gdata.Crypto.PublicKey.RSA.html#RSAobj_c-unblind)

我有：

```
messageHashed = md5.new('MyMessage').digest()
print 'Message MD5:%s' % messageHashed
blindSigned = loadedPublic.blind(messageHashed,123)
print 'Blinded: %s' % blindSigned
blindSigned = loadedPrivate.sign(blindSigned,loadedPrivate.n)
print 'Blinded Signed: %s' % str(blindSigned)

unblind = loadedPrivate.unblind(blindSigned,123)
print '-------------'
print 'Unblinded: %s' % unblind
verify = loadedPrivate.verify(unblind,(loadedPrivate.n,loadedPrivate.d))
print 'Verify: %s' % verify 
```

（我之前已经加载了公钥和私钥，并且工作正常）

现在，我的问题是，当它运行时，我得到这个输出：

```
M<ssage MD5:?.Z?3??f2??
Blinded: ?YL⽥p??j+Z<I?vxV??{5??
??>[??? ??r?"l
??d?ڸYC????k?U?Q?????C?0?D??*T8?}?P?9~$??'?p??ZR:2? sh͓l??kXvU??d]???$?c聻?b??@?
Blinded Signed: (122872721681409041185513323026772702402844983846953530757782619983060590754290923453963299094289086410649560247540686534912830758097386690290305557644701999751846538319065094741731992734124277081554060855405114566548615303949954231396930615801829673187895538075706631646002356108979884582511973944741160960028L,)
Traceback (most recent call last):
  File "NewClient.py", line 103, in <module>
    unblind = loadedPrivate.unblind(blindSigned,123)
  File "build/bdist.macosx-10.8-intel/egg/Crypto/PublicKey/pubkey.py", line 165, in unblind
  File "build/bdist.macosx-10.8-intel/egg/Crypto/PublicKey/RSA.py", line 247, in _unblind
    object = RSAobj
  File "build/bdist.macosx-10.8-intel/egg/Crypto/PublicKey/_slowmath.py", line 47, in _unblind
OverflowError: cannot fit 'long' into an index-sized integer 
```

即使 unblind 函数记录如下：

```
unblind(self, M, B)
unblind(M : string|long, B : string|long) : string|long
Unblind message M using blinding factor B. 
```

它似乎不接受它。

谁能指出我正确的方向？我已经在这几个小时了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T01:13:17.417

当我试图复制您的问题时，有两件事很突出：

*   在我的 Crypto (2.4.1) 版本上，`_RSAobj.blind()`and`_RSAobj.unblind()`调用似乎强制类型（即，您*需要*提供`long`or `string`，`int`s 不起作用）。`long`常数通过在数值的末尾添加 a 来表示（`L`例如`9001L`）。
*   该`_RSAobj.sign()`函数返回一个元组。签名在返回值的元素 0 中结束。

所以你的代码看起来像这样：

```
messageHashed = md5.new('MyMessage').digest()
print 'Message MD5:%s' % messageHashed
blindSigned = loadedPublic.blind(messageHashed,123L)
print 'Blinded: %s' % blindSigned
blindSigned = loadedPrivate.sign(blindSigned,loadedPrivate.n)[0]
print 'Blinded Signed: %s' % str(blindSigned)

unblind = loadedPublic.unblind(blindSigned,123L)
print '-------------'
print 'Unblinded: %s' % unblind
verify = loadedPublic.verify(unblind,(loadedPrivate.n,loadedPrivate.d))
print 'Verify: %s' % verify 
```

这段代码运行，但可能没有做你真正想要做的事情；特别是`verify`总是会以`False`.

解盲后得到的是`messageHashed`使用 p 的有效 RSA 签名，并且`_RSAobj.verify(self, M, signature)`是正确的函数签名（`signature`需要是 2 元组，其中第 0 个元素是实际的 RSA 签名）。所以如果你有

```
verify = loadedPublic.verify(messageHashed, (unblind,)) 
```

这*将*像宣传的那样工作（即`verify`最终应该是`True`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T01:08:21.230

从我的头上看这个，你想提取签名中包含的摘要，以便取出非盲数据。

稍后当我使用机器测试代码时，我会对此进行更好的尝试。

# apache - 多个 .htaccess 文件中多个 mod_rewrite 规则的优先级是什么？

> ID：15869322
> 
> 赞同：8
> 
> 时间：2013-04-08T00:01:10.273
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我了解`[L]`以下重写规则意味着它是“最后一个”，但我不清楚范围是什么

例如，当有多个 .htaccess 文件时，其中一些带有`[L]`，哪些将适用？

例子：

```
root.com/subdirectory1/subdirectory2

  ^           ^            ^      
  |           |            |
  A           B            C 
```

如果每个目录中都有一个 .htaccess 文件...

1.  他们将按什么顺序申请？
2.  如果它们相互矛盾，哪个优先？
3.  他们是否连续申请？第一个的结果是否传递给下一个？
4.  是否会应用较早（或相同）文件中的匹配结果，该文件来自较晚的规则？
5.  如果`[L]`在较早的文件中有一个，是否会考虑其他文件？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-08T00:33:41.957

该`[L]`标志确实意味着“最后一个”，但它仅适用于当前范围内的规则。根据您的问题，它仅适用于 htaccess 文件中的规则。如果子目录中有规则，则父目录中的任何规则都将被抛出窗口。它们根本不应用，除非您使用`RewriteOptions Inherit`指令（它将附加到规则末尾的父 htaccess 文件中的任何规则）。

鉴于你的例子：

```
root.com/subdirectory1/subdirectory2
  ^           ^            ^      
  |           |            |
  A           B            C 
```

如果 A、B 和 C 中有 htaccess 文件，并在所有 3 个中重写规则，如果有一个请求`http://root.com`（您的“root.com”目录），则仅应用 A 中的规则。如果有人请求`http://root.com/subdirectory1`，则仅应用 B 中的规则，而忽略 A 中的任何规则（没有`Inherit`选项）。同样，如果有人去`http://root.com/subdirectory1/subdirectory2`，那么只有 C 中的规则被应用，如果没有继承选项。

该`[L]`标志在其中没有任何作用，因为这里的范围仅在 htaccess 文件的规则内。另请注意，`[L]`这并不一定意味着“在**此处**停止重写”，因为重写引擎将循环直到进入引擎的 URI 停止更改。just 意味着在`[L]`重写引擎循环的当前迭代中停止重写。

* * *

## 关于循环内容的更多细节：

在 URL 处理管道期间，apache 尝试将 URL 映射到文件或资源。许多不同的模块在处理管道中发挥作用，例如 mod_rewrite 或 mod_proxy 或 mod_alias。在任何时候，此 URI 都可以更改、被标记为重定向、被标记为被代理、被标记为抛出错误等。当 URI 到达 mod_rewrite 时，重写引擎从 vhost 配置中收集一堆规则并适当的 htaccess 文件；注意，这里有 2 个不同的范围。每个规则范围都应用于 URI，如果没有规则匹配，则 mod_rewrite 完成。如果其中一个规则匹配，则存在*内部重定向*，这意味着 URI 已更改，然后重定向回处理管道和 mod_rewrite。因此，相同范围的规则再次被应用，如果其中一个规则匹配并被应用，同样的事情再次发生在规则循环中。您可以在 vhost/server 配置中设置一个指令，该指令设置`LimitInternalRecursion`这些内部重定向的限制。如果重写引擎循环（即重定向回自身）的次数超过此限制（我认为默认为 10），那么您会收到 500 Internal Server 错误。

这可能听起来有点奇怪，但有很多想要这样做的实例。示例：`_`从 URI 中删除所有内容并替换为`-`：

```
RewriteRule ^(.*)_(.*)$ /$1-$2 [L] 
```

如果 URI 是`/a_b_c_d_foo`第一次，则 URI 将更改为`/a_b_c_d-foo`，然后循环并更改为``/a_b_c-d-foo`，然后再一次`/a_b-c-d-foo`，到您第五次得到`/a-b-c-d-foo`。它将再次循环，但由于`^(.*)_(.*)$`模式不匹配，URI 通过重写引擎并且循环停止。

当人们创建不考虑循环的规则时，就会出现问题，例如：重写`/<anything>`为`/foo/<anything>`：

```
RewriteRule ^(.*)$ /foo/$1 [L] 
```

如果 URI 是`/bar`第一次将 URI 重写为`/foo/bar`，这就是所需的结果。但是 URI 在内部被重定向回重写引擎，并且再次匹配相同的规则，结果是：`/foo/foo/bar`，然后是：，然后是`/foo/foo/foo/bar`：`/foo/foo/foo/foo/bar`，直到达到内部递归限制并且您收到 500 服务器错误。

# c# - 主要参数改变了我的默认位置

> ID：15869324
> 
> 赞同：0
> 
> 时间：2013-04-08T00:01:17.007
> 
> 标签：c#, command-line-arguments, main

当我将参数传递给`Main`函数`static void Main(string[] args)`时，我的应用程序的默认位置会更改为包含的任何`args[0]`内容。

例如，我有一个文件“test.txt”与应用程序 exe 位于同一文件夹中。如果我打电话`File.Open("test.txt", FileMode.Open);`，打开文件不会有任何问题。现在，如果我已将参数传递给`Main`调用，则会在 的位置而不是从 exe 位置`File.Open("test.txt", FileMode.Open);`查找文件“test.txt” 。`args[0]`

假设我的 exe 位于`C:\users\application.exe`且字符串`args[0]`为`D:\files\music`，该行将`File.Open("test.txt", FileMode.Open);`尝试打开文件`D:\files\music\test.txt`而不是`C:\users\test.txt`.

如何解决这个问题，以便我仍然可以访问文件“test.txt”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T00:06:32.433

您正在使用**相对路径**。
但是，相对路径是相对于当前目录的，而不是您的 EXE 文件的位置。

相反，您可以显式构建绝对路径：

```
Path.Combine(Path.GetDirectory(typeof(Program).Assembly.Location), "test.txt") 
```

# javascript - IE8 Javascript 语法错误

> ID：15869326
> 
> 赞同：0
> 
> 时间：2013-04-08T00:01:43.847
> 
> 标签：javascript, internet-explorer-8, browser-support

我创建了一个 Web 应用程序，它在 Chrome、Firefox、Safari 和 Internet Explorer 9 上运行良好，但当然 javascript 在 Internet Explorer 8 上失败。

有谁知道一个很好的资源来显示我们编码时 IE8 和其他浏览器之间的语法差异是什么？

例如，我在 IE8 中发现，这种类型的 javascript 会导致 web 应用程序崩溃，但在 chrome 等中可以正常工作。

```
var model = new Model({
    'FirstName':'Trevor',
    'LastName':'Evans',          <-- Extra , causes IE8 to break
}); 
```

像这样的事情...

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:09:13.730

在ES5 之前，JavaScript 对象中的尾随逗号*是非法的（*[更多信息](http://www.2ality.com/2011/06/object-literal-comma.html)）。

简而言之，除非您在支持 ES5 的浏览器中，否则不要使用尾随逗号，没有真正好的方法可以检测 ES5，您可以通过以下方式寻找对该`use strict`功能的支持：

```
var supportUseStrict = (function () { 'use strict'; return !this; })(); 
```

因为在支持`strict`模式的浏览器中，您将`undefined`返回，`this`但在不支持它的浏览器中，它将是`window`；

# javascript - 根据屏幕大小更改 href 的一个“属性”

> ID：15869329
> 
> 赞同：2
> 
> 时间：2013-04-08T00:02:15.853
> 
> 标签：javascript, jquery, attributes, resize, responsive-design

亲爱的stackoverflowers，

我正在尝试根据屏幕大小更改我的 href 中的“数据放置”属性。不知何故，我无法让它工作。期望的目标是将“数据放置”属性从“左”更改为“右”。

那是与属性的链接：

```
<a href="#" id="changedataplacement" data-placement="left"> 
```

这是似乎不起作用的javascript。

```
$(document).ready(function() {
var $window = $(window);

function checkWidth() {
    var windowsize = $window.width();
    if (windowsize < 979) {
        $('#changedataplacement').Attr('data-placement','right');
    }  
    else {  
        $('#changedataplacement').Attr('data-placement','left'); 
    } 
}
// Execute on load
checkWidth();
// Bind event listener
$(window).resize(checkWidth);
}); 
```

有人有好主意吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T00:09:14.723

`.attr()`函数名应该是小写的。JavaScript 区分大小写！您应该使用调试控制台来弹出这些错误！

# html - 页眉和页脚内的可滚动表格主体

> ID：15869333
> 
> 赞同：0
> 
> 时间：2013-04-08T00:02:53.773
> 
> 标签：html, css, html-table, scrollable

我正在尝试在一个页面上创建一个小部件，该页面是一个带有thead、tbody 和 tfoot 的表格。因为我不希望小部件变得太大，所以如果 tbody 的长度超过 200px 并且有很多行，我希望表格中的行可以滚动。

我正在使用 jQuery 1.9.1，但如果可能的话，我更喜欢纯 CSS/HTML 解决方案。

有没有人有一个非常简单的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T01:13:45.130

您将使用溢出 css 声明。

```
<!DOCTYPE html>
<html>
<head>

</head>
<body>
<div id="wrapper" style="height:100px;width:100px;overflow:auto;">
<div id="widget">

<table>
<tbody>
    <tr>
        <td>blah</td>
        <td>blah</td>
        <td>blah</td>
        <td>blah</td>
        <td>blah</td>
        <td>blah</td>   
    </tr>
    <tr>
        <td>more blah</td>
        <td>etc</td>
        <td>etc</td>
        <td>etc</td>
        <td>etc</td>
        <td>etc</td>    
    </tr>
    <tr>
        <td>blah</td>
        <td>blah</td>
        <td>blah</td>
        <td>blah</td>
        <td>blah</td>
        <td>blah</td>   
    </tr>
</tbody>
</table>

</div>

</div>

</body>
</html> 
```

# ruby - ActiveRecord 未知属性错误 (Sinatra)

> ID：15869334
> 
> 赞同：1
> 
> 时间：2013-04-08T00:03:03.843
> 
> 标签：ruby, activerecord, sinatra

我在哪里错了？我收到此错误：

```
unknown attribute: bar_id 
```

我有这两个类：

```
class Foo < ActiveRecord::Base
  belongs_to :bar
end

class Bar < ActiveRecord::Base
  has_many :bazs
  has_many :foos
end 
```

当我尝试使用以下方法创建新的 Foos 时出现此错误：

```
 @bar = Bar.find(1)
 @bar.foos.create(:attribute1 => "a",
                  :attribute2 => "b") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:09:33.343

根据您的示例，您不是在尝试创建`Bars`，而是在尝试创建与对象`Foo`关联的记录。`Bar`如果你有一个`belongs_to`关联 to `Bar`from `Foo`，那么`Foo`需要有一列调用来`bar_id`引用哪条记录。`Bar``Foo``belongs_to`

# ruby - Ruby 中的大写、交换大小写和反转

> ID：15869335
> 
> 赞同：0
> 
> 时间：2013-04-08T00:03:40.797
> 
> 标签：ruby

我有一个具有挑战性的 Ruby 问题：

我想将“你好”转换为“YDWOh”，将“你好吗”转换为“uoy era Woh”。

这本质上是大写、交换大小写和反向函数。大写和交换大小写仅适用于句子的第一个单词。当句子中有多个单词时，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T00:18:46.917

尝试以下步骤：

1.  `capitalize`你的字符串
2.  `split(' ')`你的字符串成一个带有单词的数组
3.  用于[`each_with_index.map`](https://stackoverflow.com/questions/4697557/how-to-map-with-index-in-ruby)遍历数组中的每个单词
4.  仅用于`swapcase`数组的第一个单词
5.  `join(' ')`数组变回字符串
6.  `reverse`字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T07:32:38.857

您可以尝试以下方法：

```
a = "how are you"
p a.gsub(a.split[0...1].join(' '),a.split[0...1].join(' ').capitalize.swapcase).reverse 
```

输出：

```
"uoy era WOh" 
```

# javascript - 处理来自多个 AJAX JQuery 查询的独立数据

> ID：15869339
> 
> 赞同：2
> 
> 时间：2013-04-08T00:03:51.303
> 
> 标签：javascript, jquery, ajax, callback

我有许多从 for 循环发送的 AJAX 请求，并且希望根据循环中的位置将一些数据发送到回调函数。

当我尝试为每个请求附加一个函数时，它们似乎都从上次调用中获取数据，例如，

```
for(var i=0; i < 4; i++){
    data = ... //some unique data
    req = $.post('/update/add', data, function(r_data, textStatus, jqxhr){
        console.log(data);
    }, "json")
} 
```

会给我来自 i = 3 条目的数据，而不是 4 个不同的条目。如何将这些数据传递给回调函数？

谢谢你们...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T00:15:19.933

问题是，当在`i`变量上创建闭包时，它引用同一个变量而不是创建一个新`i`变量。为避免这种不良影响，您可以执行以下操作。

```
for(var i=0; i < 4; i++){
    data = ... //some unique data
    req = $.post('/update/add', data, (function (i) {
        //return a new callback function
        return function (r_data, textStatus, jqxhr) { 
            //callback logic
            //i will be the right index now
        };
    })(i), "json");
} 
```

在上面的示例中，我们将回调函数包装在一个自执行函数中，该函数正在传递循环的`i`值。由于`i`变量是在自执行函数的范围内定义的，我们现在可以安全地返回一个新的回调函数，它将`i`在自执行函数的变量上创建一个闭包，而不是`i`在循环中使用的变量。

注意：为了优化您的代码，您可以避免每次都创建一个新的自执行函数。

```
function createCallback(i) {
     return function (r_data, textStatus, jqxhr) {
         console.log(i);
     };
}

/*
    loop
        post(..., createCallback(i));
 */ 
```

# regex - Perl 中的 GPA 正则表达式

> ID：15869343
> 
> 赞同：2
> 
> 时间：2013-04-08T00:05:02.937
> 
> 标签：regex, perl

我正在尝试在 Perl 中制作 GPA 验证正则表达式，但我的逻辑似乎有问题。您应该能够以数字 0-3 结尾，后跟 . 在 0-9 范围内再增加 1 个数字。或者如果第一个数字是 4 它必须跟一个 .0 这是我的代码：

```
$get_gpa_input =~ m/[0-3]\.\d[0-9]|[4].[0]/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T00:11:18.217

```
m/(?: [0-3] [.] [0-9] ) | 4[.]0 /x 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T00:11:41.940

删除`[0-9]`. 你还有一些额外的括号，你应该在“4.0”中转义小数点。

```
$get_gpa_input =~ m/[0-3]\.\d|4\.0/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T00:28:40.627

如果您正在进行验证，您不想在字符串中搜索，而是强制整个字符串与您的正则表达式匹配；您可以通过在开头和结尾添加锚点来做到这一点：

```
/\A (?: [0-3]\.[0-9] | 4\.0 ) \z/x 
```

`\A`仅在字符串的第一个字符之前匹配，仅在字符串`\z`的最后一个字符之后匹配。

避免`\d`在大多数代码中使用，因为它可以匹配 0 到 9 以外的任意数量的 Unicode“数字”（尽管在较新的 perls 中，/a 标志将其恢复为旧的 ASCII 含义）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T00:11:33.537

您`\d[0-9]`需要在 0-3 之后的两位数*。*您也不会在 4 替代项中转义小数点，这可能会有所不同。

```
[0-3]\.\d|4\.0 
```

# php - 禁用隐藏表单输入

> ID：15869346
> 
> 赞同：0
> 
> 时间：2013-04-08T00:05:25.230
> 
> 标签：php, html, forms

我有一个有点像这样的表格：

```
<form action="#" method="post">
 <select name="phase">
   <option>1</option>
   <option>2</option>
   <option>3</option>
 </select>
 <div data-phase="1">
  <input type="text" name="info" />
 </div>
 <div data-phase="2">
  <input type="text" name="info" />
 </div>
 <div data-phase="3">
  <input type="text" name="info" />
 </div>
</form> 
```

通过使用JQuery，在任何时候，只显示一个DIV，对应于选择框中的值。

问题是 POSTed 的值被最后一个文本输入覆盖，因为它们都具有相同的名称。在不重命名输入的情况下是否存在这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:10:19.613

是的——在提交之前，动态删除不需要的`div`部分。您可以通过使用 jQuery 的`submit()`函数回调来实现这一点。

例如，要删除元素，您可以使用 jQuery 的`remove()`函数。使用 id 会更容易`div`，但您也可以使用索引来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T00:11:01.827

您可以在提交表单之前使用 javascript 动态重命名输入。或者您甚至可以在提交之前从 DOM 中删除禁用的输入。

例如，这样的事情可能会起作用：

```
$(input[name="info"]).filter(function() {
    return $(this).css('display') == "none";
}).remove(); 
```

因此，选择所有具有 display: none 的名为“info”的输入并删除它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T00:18:22.483

我很抱歉这么说：您必须重命名每个 div 的名称。像这样的 name="info1" name="info2" name="info3" 在处理无线电输入类型时，您只对 name 属性使用相同的名称。

# php - PHP 的 password_hash() 的行为

> ID：15869348
> 
> 赞同：3
> 
> 时间：2013-04-08T00:05:31.690
> 
> 标签：php, passwords, salt, bcrypt

我一直在寻找加密密码以供我的面板使用的最佳方法，我决定继续使用 BCRYPT，这仅仅是因为每次加密的成本以及它通常被认为是目前最好的加密方法之一。当前时间。

我正在使用双向盐，所以每个用户都有一个独特的盐，然后显然是存储在我的应用程序中的盐，我注意到一些相当奇怪的行为..根据 PHP 文档，这种行为是正常的吗？

无论如何，这是我使用的代码：

```
$Crypto = new Crypto;
echo $Crypto->encrypt( "123456789abcdefghijklm", "StackOverflow_Is_Awesome!" ); // First parameter being the "User Salt", second being the password.

// Above outputs $2y$13$123456789abcdefghijkleepFY8JLvsf2YbnWolqQyO3DIzrCeNIu 
```

现在，加密类：

```
<?php
// ASSUMING $this->hashingSalt = HBSNi3y7ruhbVGkhdg83ijdbvghiojkgudL;JP
class Crypto {

private $hashingSalt, $database;

public function __construct( $salt )
{
    $this->hashingSalt = $salt;
    $this->database = new DatabaseFunctions();
}

public function encrypt( $salt, $password )
{
    $options = array(
        'cost' => 13,
        'salt' => $salt //22 chars
    );

    return password_hash( $password . $this->hashingSalt, PASSWORD_BCRYPT, $options);
}
} 
```

所以，我的兴趣是，为什么这个函数只是将选项中的盐集添加到输出字符串的开头？这真的令人费解......因为这并不完全是我所说的安全，而是击败了我的对象。

任何人都可以建议，尝试并解释我完全过去的事情吗？谢谢

PHP 文档： http: [//php.net/manual/en/function.password-hash.php](http://php.net/manual/en/function.password-hash.php)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T00:10:42.480

盐的存在是为了防止使用散列制作预先计算的表，一旦“坏人”掌握了散列，它并不意味着保持安全。

还有你在做什么：

> 然后显然是存储在我的应用程序中的盐

被称为辣椒（实际上并不那么明显）并且AFAIK尚未被证明更安全。有关更多信息，请阅读此博文（也是密码 API 的作者）：[http ://blog.ircmaxell.com/2012/04/properly-salting-passwords-case-against.html](http://blog.ircmaxell.com/2012/04/properly-salting-passwords-case-against.html)

另请注意，您调用的方法`encrypt`并未加密任何内容。加密有两种方式。你在做什么被称为散列：[https ://stackoverflow.com/a/4948393/508666](https://stackoverflow.com/a/4948393/508666)

# c# - 修改排序算法以使用列表框？

> ID：15869351
> 
> 赞同：0
> 
> 时间：2013-04-08T00:06:04.160
> 
> 标签：c#, sorting, names

所以我试图找出修改这个整数排序算法以在列表框中按字母顺序处理数据元素（文件名），但不知道如何？

我了解下面的排序算法是如何工作的，并且可以使用整数数组来实现它。但是，对于 listBoxes，我似乎在网上找不到任何相关示例。

```
public partial class MainWindow : Window
{

    Random rand = new Random();
    int numOfIntegers = 1000;
    int[] array;

    public MainWindow()
    {

        InitializeComponent();

        array = new int[numOfIntegers]; 

    }

    // sort a vector of type int using exchange sort
    public void ExchangeSort(int[] array)
    {
        int pass, i, n = array.Length;
        int temp;
        // make n-1 passes through the data 
        for (pass = 0; pass < n - 1; pass++)
        {
            // locate least of array[pass] ... array[n - 1]  
            // at array[pass] 
            for (i = pass + 1; i < n; i++)
            {
                if (array[i] < array[pass])
                {
                    temp = array[pass];
                    array[pass] = array[i];
                    array[i] = temp;
                }
            }
        }
    }

    private void Button_Click_2(object sender, RoutedEventArgs e)
    {
        ExchangeSort(array);
        listBox.Items.Clear();
        foreach (int i in array)
        {
            listBox.Items.Add(i);
        }
        MessageBox.Show("Done");

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T00:49:02.760

你可以试试 LINQ：

```
public void sort(int[] array)
{
    array = array.OrderByDescending (a => a).ToArray();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T00:44:42.187

如果我理解正确，您正在尝试对字符串进行排序。要比较字符串，您可以简单地使用该[`String.CompareTo()`](http://msdn.microsoft.com/en-us/library/35f0x18w.aspx)方法，或者如果您需要的不仅仅是简单比较，[`StringComparator`该类](http://msdn.microsoft.com/en-us/library/system.stringcomparer.aspx)应该适用于大多数用例。

如果您选择这样做，排序时的条件将是这样的：

```
if (array[i].CompareTo(array[pass]) < 0) 
```

其余代码可能保持不变，当然除了`int[]`将`String[]`.

现在，话虽如此，我建议使用 a[`List<String>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)并完全跳过手动完成这项工作。请参阅[`List.Sort()`](http://msdn.microsoft.com/en-us/library/b0zbh7b6.aspx)以供参考。

更具体地说，这是一个基于我的意思的代码的示例。

```
public partial class MainWindow : Window
{
    List<String> items;

    public MainWindow()
    {

        InitializeComponent();
        items = new List<String>(); 
        // Fill your list with whatever items you need
    }

    private void Button_Click_2(object sender, RoutedEventArgs e)
    {
        items.Sort();
        listBox.Items.Clear();
        foreach (String str in items)
        {
            listBox.Items.Add(str);
        }
        MessageBox.Show("Done");

    }
} 
```

# c# - 类型或命名空间定义错误

> ID：15869354
> 
> 赞同：0
> 
> 时间：2013-04-08T00:06:38.163
> 
> 标签：c#, namespaces

我是论坛和编码的新手，这是一个我还没有看到的错误，据我所知，我已经正确地包含了我的方法和类，但我仍然收到以下 2 个错误：

1.  } 预期的
2.  类型或命名空间定义，或预期的文件结尾。

    ```
    namespace Assignment15Start
    {
        public partial class GradebookForm : Form
        {
            private Student betty;

            public GradebookForm()
            {
                InitializeComponent();
            }

            private void addStudentButton_Click(object sender, EventArgs e)
            {
                betty = new Student() {Name = "Lisa", Id = 55555};
                //betty.SingleCourse.AssignmentCreate();

                private void Grade()
                {
                    double grade;
                    grade = betty.SingleCourse.CalcGrade()*100;
                    MessageBox.Show("Your grade is " + grade);
                }
             }
        }
    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:10:25.167

您正在`Grade()`方法中定义`addStudentButton_Click`方法。

你不能那样做；方法不能嵌套。（匿名方法除外）

# eclipse - Ant 和 Tomcat7：java.net.ConnectException

> ID：15869357
> 
> 赞同：2
> 
> 时间：2013-04-08T00:07:30.127
> 
> 标签：eclipse, spring-mvc, ant, web, tomcat7

我正在关注这个[Springsource.org 教程](http://static.springsource.org/docs/Spring-MVC-step-by-step/part1.html#step1.3)，但我使用的是 Tomcat7，并且每当我运行“ant list”或“ant reload”或“ant start”时都会遇到以下错误。

```
/home/patchouli/workspace/springapp/build.xml:110: java.net.ConnectException: Connection refused
at java.net.PlainSocketImpl.socketConnect(Native Method)
at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:327)
at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:193)
at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:180)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:384)
at java.net.Socket.connect(Socket.java:546)
at java.net.Socket.connect(Socket.java:495)
at sun.net.NetworkClient.doConnect(NetworkClient.java:178)
at sun.net.www.http.HttpClient.openServer(HttpClient.java:409)
at sun.net.www.http.HttpClient.openServer(HttpClient.java:530)
at sun.net.www.http.HttpClient.<init>(HttpClient.java:240)
at sun.net.www.http.HttpClient.New(HttpClient.java:321)
at sun.net.www.http.HttpClient.New(HttpClient.java:338)
at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:935)
at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:876)
at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:801)
at org.apache.catalina.ant.AbstractCatalinaTask.execute(AbstractCatalinaTask.java:210)
at org.apache.catalina.ant.AbstractCatalinaTask.execute(AbstractCatalinaTask.java:150)
at org.apache.catalina.ant.StartTask.execute(StartTask.java:44)
at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
at org.apache.tools.ant.Task.perform(Task.java:348)
at org.apache.tools.ant.Target.execute(Target.java:390)
at org.apache.tools.ant.Target.performTasks(Target.java:411)
at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
at org.apache.tools.ant.Main.runBuild(Main.java:809)
at org.apache.tools.ant.Main.startAnt(Main.java:217)
at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109) 
```

这是我的 build.xml 文件：

```
<property file="build.properties"/>

<property name="src.dir" value="src"/>
<property name="web.dir" value="war"/>
<property name="build.dir" value="${web.dir}/WEB-INF/classes"/>
<property name="name" value="springapp"/>

<path id="master-classpath">
    <fileset dir="${web.dir}/WEB-INF/lib">
        <include name="*.jar"/>
    </fileset>

    <fileset dir="${appserver.lib}">
        <include name="servlet*.jar"/>
    </fileset>
    <pathelement path="${build.dir}"/>
</path>

<target name="usage">
    <echo message=""/>
    <echo message="${name} build file"/>
    <echo message="-----------------------------------"/>
    <echo message=""/>
    <echo message="Available targets are:"/>
    <echo message=""/>
    <echo message="build     --> Build the application"/>
    <echo message="deploy    --> Deploy application as directory"/>
    <echo message="deploywar --> Deploy application as a WAR file"/>
    <echo message="install   --> Install application in Tomcat"/>
    <echo message="reload    --> Reload application in Tomcat"/>
    <echo message="start     --> Start Tomcat application"/>
    <echo message="stop      --> Stop Tomcat application"/>
    <echo message="list      --> List Tomcat applications"/>
    <echo message=""/>
</target>

<target name="build" description="Compile main source tree java files">
    <mkdir dir="${build.dir}"/>
    <javac destdir="${build.dir}" source="1.6" target="1.6" debug="true"
           deprecation="false" optimize="false" failonerror="true">
        <src path="${src.dir}"/>
        <classpath refid="master-classpath"/>
    </javac>
</target>

<target name="deploy" depends="build" description="Deploy application">
    <copy todir="${deploy.path}/${name}" preservelastmodified="true">
        <fileset dir="${web.dir}">
            <include name="**/*.*"/>
        </fileset>
    </copy>
</target>

<target name="deploywar" depends="build" description="Deploy application as a WAR file">
    <war destfile="${name}.war"
         webxml="${web.dir}/WEB-INF/web.xml">
        <fileset dir="${web.dir}">
            <include name="**/*.*"/>
        </fileset>
    </war>
    <copy todir="${deploy.path}" preservelastmodified="true">
        <fileset dir=".">
            <include name="*.war"/>
        </fileset>
    </copy>
</target>

<path id="catalina-ant-classpath">
    <fileset dir="${appserver.lib}">
           <include name="catalina-ant.jar"/>
           <include name="tomcat-coyote.jar"/>
           <include name="tomcat-util.jar"/>
        </fileset>
    <fileset dir="${appserver.home}/bin">
               <include name="tomcat-juli.jar"/>
    </fileset>
</path>  

<taskdef name="list" 
         classname="org.apache.catalina.ant.ListTask" 
         classpathref="catalina-ant-classpath"/>

<taskdef name="reload" 
         classname="org.apache.catalina.ant.ReloadTask" 
         classpathref="catalina-ant-classpath"/>

<taskdef name="start" 
         classname="org.apache.catalina.ant.StartTask" 
         classpathref="catalina-ant-classpath"/>

<taskdef name="stop" 
         classname="org.apache.catalina.ant.StopTask" 
         classpathref="catalina-ant-classpath"/>

<target name="reload">
    <reload url="${tomcat.manager.url}"
             username="${tomcat.username}"
             password="${tomcat.password}"
             path="/${name}"/>
</target>

<target name = "start">
    <start url="${tomcat.manager.url}"
                       username="${tomcat.username}"
                       password="${tomcat.password}"
                       path="/${webapp.name}"/>
</target>    

<target name = "stop">
       <stop url="${tomcat.manager.url}"
                         username="${tomcat.username}"
                         password="${tomcat.password}"
                         path="/${webapp.name}"
                         failonerror="false"/>
</target>

<target name="list">
    <list url="${tomcat.manager.url}"
             username="${tomcat.username}"
             password="${tomcat.password}"/>
</target>

<target name="install">
    <install url="${tomcat.manager.url}"
             username="${tomcat.username}"
             password="${tomcat.password}"
             path="/${name}"
             war="${name}"/>
</target> 
```

还有我的 build.properties 文件：

```
# Ant properties for building the springapp

appserver.home=/usr/share/tomcat7
appserver.lib=${appserver.home}/lib

deploy.path=/var/lib/tomcat7/webapps

tomcat.manager.url=http://localhost:8080/manager/html
tomcat.username=admin
tomcat.password=admin 
```

我很沮丧。目前，我可以手动启动 tomcat7 并转到 localhost:8080/springapp/index.jsp 没有任何问题。但我希望使用 Apache Ant 实现自动化。问题似乎是 Ant 无法连接到 Tomcat。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-16T17:52:34.597

您似乎遇到了我在 Tomcat 7 上遇到的类似问题，并在[ant target 上发布了将战争部署到 tomcat7/webapps](https://stackoverflow.com/a/18275811/432903)的问题。

**您需要进行两项更改：**

## 1) 更新 Tomcat 7 的 Tomcat 管理器 URL（在 build.properties 中）

```
# Ant properties for building the springapp

tomcat.manager.url=http://localhost:8080/manager/text 
```

## 2) 为用户添加额外的管理员角色（在 TOMCAT_DIRECTORY/conf/tomcat-users.xml 中）

```
 <role rolename="manager-script"/>

    <user username="admin" password="admin" roles="tomcat,manager-gui,manager-script"/> 
```

**在 ant 尝试部署 WAR 之前，请确保您的 TOMCAT 已经在运行。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T21:24:25.710

在 build.properties 中的任何这些行之后是否有空格或制表符？

```
tomcat.manager.url=http://localhost:8080/manager/html
tomcat.username=admin
tomcat.password=admin 
```

他们会得到字面上的对待。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-02T07:21:34.640

我有同样的问题。如果您在 Windows 上，则路径可能会导致此问题，因为本教程基于 linux 操作系统。您可以尝试使用反斜杠 (\) 而不是 (/)

```
appserver.home=\usr\share\tomcat7
appserver.lib=${appserver.home}\lib

deploy.path=\var\lib\tomcat7\webapps 
```

为了解决这个问题，我还用tomcat安装文件夹的绝对路径替换了变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-26T05:43:42.667

**在安装的地方手动启动 tomcat**。

*   bat/sh 路径：{tomcat--ver-}/bin/startup.

*   然后运行 ​​build.xml

# list - 维护清单 在像数据库一样的缓存中

> ID：15869361
> 
> 赞同：1
> 
> 时间：2013-04-08T00:08:17.183
> 
> 标签：list, c#-4.0, caching, persistent-storage, objectcache

我有一个要求，我需要在内存中维护一个列表。

例如 -

```
list<products> 
```

每个用户都将运行应用程序并从列表中添加新产品/更新产品/删除产品，所有更改都应反映在该列表中。

我正在尝试将列表存储在对象缓存中。

但是当我运行应用程序时，它会创建产品，但是当我第二次运行它时，列表不在缓存中。需要帮助。

以下是代码 -

```
public class ProductManagement
{

    List<Productlist> _productList;
    ObjectCache cache= MemoryCache.Default;

    public int Createproduct(int id,string productname)
    {
            if (cache.Contains("Productlist"))
            {
                _productList = (List<Productlist>)cache.Get("Productlist");
            }
            else
            {
                _productList = new List<Productlist>();
            }

            Product pro = new Product();
            pro.ID = id;
            pro.ProductName = productname;

            _productList.Add(pro);

            cache.AddOrGetExisting("Productlist", _productList, DateTime.MaxValue);

            return id;
    }

    public Product GetProductbyId(int id)
    {
            if (cache.Contains("Productlist"))
            {
                _productList = (List<Productlist>)cache.Get("Productlist");
            }
            else
            {
                _productList = new List<Productlist>();
            }

            var product = _productList.Single(i => i.ID == id);
            return product;
    }

} 
```

即使应用程序未运行，我如何确保列表是持久的，这可能吗？还如何保持缓存处于活动状态并在下次检索相同的缓存。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T00:25:08.700

内存可以不同[http://en.wikipedia.org/wiki/Computer_memory](http://en.wikipedia.org/wiki/Computer_memory)。MemoryCache 将信息存储在进程内存中，进程内存仅在进程存在时才存在。

如果您的要求是在进程内存中维护列表 - 您的任务已完成，并且您不需要使用`ObjectCache cache= MemoryCache.Default;`的更多内容可以将列表保留为`ProductManagement`.

如果您需要在应用程序启动之间保留列表 - 您需要做额外的工作以在关闭应用程序时将列表写入文件并在打开应用程序时读取它。

# ruby-on-rails - Rails 从数据库中检索

> ID：15869362
> 
> 赞同：0
> 
> 时间：2013-04-08T00:08:28.340
> 
> 标签：ruby-on-rails, ruby, postgresql

我正在使用 Rails，在控制器中，我有一个名为 log_cons 的数据库，它有一个全部填写的条目，第一列为“id”，值为“1”

```
@log_cons = LogCon.all
puts @log_cons[1].id 
```

这将输出到浏览器：

```
Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id 
```

并在终端打印一个空行。

这可能是什么潜在的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:11:26.890

`LogCon.find()`将返回一个`ActiveRecord`对象，而不是数组。

因此，您可以像这样获取 id：

```
@log_cons = LogCon.all
puts @log_cons[0].id 
```

或者

```
puts @log_cons.first.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T00:15:34.910

如果您想要所有记录，请执行

```
@log_cons = LogCon.all 
```

然后访问第一个做

```
puts @log_cons[0].id 
```

# javascript - 在 Cakephp 中保存到数据库之前使用 javascript 处理文件上传

> ID：15869363
> 
> 赞同：0
> 
> 时间：2013-04-08T00:08:35.343
> 
> 标签：javascript, ajax, cakephp, file-upload, cakephp-2.1

我有一个包含文件上传的表单。

在将表单的内容保存到我的数据库之前，我需要使用 javascript 从文件中提取一些元信息。

如果有的话，最好的方法是什么？

澄清一下：问题不在于提取文件元，而是如何访问 $_FILES 数组并使用此数据执行 js 文件，然后最终允许表单提交到服务器。

我目前如何实现这一目标：

1.  我将表单提交给控制器操作
2.  它保存数据，然后在成功提交表单后重新渲染初始视图之前，使用上传文件的位置设置一个视图变量
3.  视图检查是否设置了变量，如果是，则执行基本上提取元的 javascript，因为它可以访问文件所在的位置，并使用 ajax 调用更新数据库。

上述方法并不理想，因为元数据属于表单首次提交时保存的同一行数据，因此理想情况下，我想将其包含在初始表单提交中，而不是在表单提交后再次呈现页面时包含. 对我来说似乎有点肮脏，但我还没有看到另一种可以实现的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T02:33:15.070

什么样的元数据？要回答您的问题，是的，这是可能的，但前提是浏览器支持 File API。这不包括 IE9 和更早版本。有关更多信息，请参阅[有关 FileReader 的 MDN 文章](https://developer.mozilla.org/en-US/docs/DOM/FileReader)。有各种库可以从文件中提取特定类型的元数据。例如，如果您有兴趣从图像文件中解析 EXIF 元数据，您应该查看类似[jQuery-fileExif 的内容](https://github.com/sanisoft/jQuery-fileExif)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:50:16.097

我建议使用 ajax (SWFUpload/Uploadify) 上传，然后将数据与处理后的文件数据一起发送回视图。

您可以上传文件，发出许多回调，最后将渲染的文件数据返回给发出请求的等待 JavaScript 函数。

只是我的两分钱

# sql-server - TSQL 只获取最近的记录

> ID：15869365
> 
> 赞同：0
> 
> 时间：2013-04-08T00:08:43.960
> 
> 标签：sql-server, tsql, stored-procedures

我试图只获取资产的最新位置，我发现[了这个](https://stackoverflow.com/questions/6346483/t-sql-getting-most-recent-date-and-most-recent-future-date)，按照那个例子。我这样做了：

```
ALTER PROCEDURE [SISACT].[index_activo_ubicacion]
            @ubicado BIT = 1
AS
BEGIN
    IF @ubicado = 1
         SELECT activo,
               ubicacion
         FROM
         (SELECT activo,
          ubicacion,
          Fecha_Ubicacion,
          row_number() OVER (partition BY activo
                             ORDER BY abs(datediff(dd, Fecha_Ubicacion, getdate())))
          FROM [SISACT].ACTIVO_UBICACION)
    ELSE
     SELECT Activo FROM [SISACT].ACTIVOS_FIJOS a 
     WHERE NOT EXISTS (
                    SELECT Activo FROM [SISACT].ACTIVO_UBICACION u 
                    WHERE a.Activo = u.Activo
     )
END 
```

但是我在“ELSE”附近收到了一个错误sintax，这意味着错误在这里：

```
 SELECT activo,
           ubicacion
    FROM
    (SELECT activo,
          ubicacion,
          Fecha_Ubicacion,
          row_number() OVER (partition BY activo
                             ORDER BY abs(datediff(dd, Fecha_Ubicacion, getdate())))
     FROM [SISACT].ACTIVO_UBICACION) 
```

但我不知道我做错了什么，因为我对 TSQL 还很陌生。谁能帮我？

在 ACTIVO_UBICACION 表中将有许多具有相同 ACTIVO 但不同 Fecha_Ubicacion 的记录，我想选择所有 ACTIVO 但只选择日期最近的那些。意义

```
Activo | Ubicacion | Fecha_Ubicacion
------------------------------------
Activ  | 1244      | 2012-04-02 15:42:33
FixedA | 4556      | 2012-05-05 13:33:34
Activ  | 4553      | 2012-05-06 22:11:45
FixedA | 2S01      | 2012-07-10 12:44:20
Activ  | 1114      | 2013-03-14 14:33:45 
```

意味着它应该返回

```
Activo | Ubicacion | Fecha_Ubicacion
------------------------------------
FixedA | 2S01      | 2012-07-10 12:44:20
Activ  | 1114      | 2013-03-14 14:33:45 
```

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T06:34:51.473

语法错误与第一个 SELECT 的子选择的别名有关。

在 Transact-SQL 中，派生表*必须*有别名。您的显然不是，尽管 SQL Server“认为”后续`ELSE`可能是那个。并且由于`ELSE`是保留关键字，因此解析器会报告错误。因此，解决方案是添加别名。

但是，`row_number`表达式也没有名称，这将是解析器在修复派生表的别名后会抱怨的下一件事。以下是这两个固定的，以及作为评论提出的另外一个建议：

```
ALTER PROCEDURE [SISACT].[index_activo_ubicacion]
            @ubicado BIT = 1
AS
BEGIN
    IF @ubicado = 1
         SELECT activo,
               ubicacion
         FROM
         (SELECT activo,
          ubicacion,
          Fecha_Ubicacion,
          row_number() OVER (
            partition BY activo
            ORDER BY abs(datediff(dd, Fecha_Ubicacion, getdate()))
          ) **AS RowNum**
          FROM [SISACT].ACTIVO_UBICACION
         ) **someAlias**
         -- possibly you need this filter as well (uncomment it if so):
         -- WHERE RowNum = 1
    ELSE
     SELECT Activo FROM [SISACT].ACTIVOS_FIJOS a 
     WHERE NOT EXISTS (
                    SELECT Activo FROM [SISACT].ACTIVO_UBICACION u 
                    WHERE a.Activo = u.Activo
     )
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T01:56:25.883

怎么样？：

```
select a.Activo,
(select b.Ubicacion 
FROM ACTIVO_UBICACION b
WHERE b.Fecha_Ubicacion=max(a.Fecha_Ubicacion)) as Ubicacion, 
max(a.Fecha_Ubicacion) as Fecha_Ubicacion
from ACTIVO_UBICACION a
GROUP BY a.Activo 
```

# c++ - C++11 线程：构造函数中带有参数的对象

> ID：15869367
> 
> 赞同：0
> 
> 时间：2013-04-08T00:08:58.700
> 
> 标签：c++, multithreading, c++11

我最近一直在阅读很多关于 C++ 的内容，但没有出现一件事。我最终找到了自己的解决方案，但我不确定它是否正确。所以我问是否有比这更好的方法。从我在 C++11 中读到的内容来看，启动一个线程是一项简单的工作，实际上我并没有发现它那么难。然后我试图在黑暗中提高我的知识，所以我决定“把类变成线程”（如果这有意义的话）。基本上我会有一个类，它会做自己的事情，不受主程序的影响。这是一些指导您完成的代码

**套接字服务器.h**

```
#ifndef SOCKETSERVER_H
#define SOCKETSERVER_H

#include <string>
#include <boost\asio.hpp>

class SocketServer
{
public:
    SocketServer(std::string ip_address, unsigned short port);
    ~SocketServer();

    void Read();
    //bool isValidIP(const char* ip_address);

private:
    boost::asio::io_service io_service;

    std::string listenIP;
    unsigned short listenPort;
    void BeginListen();
};

#endif; 
```

现在在我的 main() 函数中，每当我尝试

```
std::thread socketServerThread(SocketServer, listenIP, listenPort); 
```

它总是在我的脸上爆炸。但是如果我有那个结构

```
void InitSocketServer(std::string listenIP, unsigned short listenPort)
{
    SocketServer* c = new SocketServer(listenIP, listenPort);
} 
```

我把它放在带有参数的线程构造函数中，它突然起作用了。对我个人而言，这是凌乱的代码，我想知道是否有更好的方法来实现同样的目标。先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T00:14:01.010

通常的解决方案是给对象一个`start`或`run`方法来完成真正的工作。然后，您可以创建一个新实例`new`并生成一个线程以在其上调用`start`or`run`方法。

但是，您必须牢记两个问题：

1.  你要么需要`detach`线程，要么有人需要`join`它。

2.  如果您使用 分配实例`new`，则完成后有人需要`delete`它。

如果需要，您可以使线程成为该类的成员。只是不要尝试在构造函数中实际创建线程，因为在构造函数返回之前对象尚未完全构造。如果您希望对象管理线程的生命周期，请在`start`or方法中执行此操作。`run`

# php - 在 session_destroy() 上插入 SQL

> ID：15869371
> 
> 赞同：1
> 
> 时间：2013-04-08T00:09:18.333
> 
> 标签：php, sql

如果执行 session_destroy()，我正在编写旨在将值插入 SQL 表的代码。这样做的原因是，如果浏览器关闭，我需要将当前会话 id 存储到 session_count 表中，而且还要销毁会话。我尝试了各种方法，其中一种是

```
if (session_destroy() == True) {
    mysql_query("INSERT INTO session_count (Session_ID) VALUES ($new_session_id)");
} 
```

但这没有帮助。

非常感谢您的帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T00:11:42.533

您可以使用[session_set_save_handler](http://www.php.net/manual/en/function.session-set-save-handler.php)来定义您的自定义处理程序。你可以编写你的自定义破坏函数。

此外，您可以将[SessionHandlerInterface](http://www.php.net/manual/en/class.sessionhandlerinterface.php)用于 php>=5.4

# python - Python：将表达式解释为文本而不是计算它

> ID：15869374
> 
> 赞同：1
> 
> 时间：2013-04-08T00:09:42.227
> 
> 标签：python, sympy

在使用 SyMpy 库后，我收到一个表达式（在**yprime**变量中）。

```
from sympy import *
x = Symbol('x')
y = 1 - (0.1 * coeff1) / (x + 2) - sin(x) * (2 * x + coeff1)
yprime = y.diff(x) 
```

然后我尝试在计算中使用**yprime**，但 Python 将其解释为文本：-( **2*x + 1.0)*cos(x) - 2*sin(x) + 0.1/(x + 2)**2**

我如何计算**-(2*x + 1.0)*cos(x) - 2*sin(x) + 0.1/(x + 2)**2**？

根据[mtadd](https://stackoverflow.com/users/755875/mtadd)进行一些操作后：

```
from sympy import *
x, coeff1 = symbols('x coeff1')
y = 1 - (0.1 * coeff1) / (x + 2) - sin(x) * (2 * x + coeff1)
yprime = y.diff(x).evalf(subs={x:0,coeff1:1}) 
```

我收到了一个数字结果，但它仍然无法使用进一步的逻辑进行操作。它说：

> TypeError：无法将表达式转换为浮点数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T00:49:38.943

调用`subs`符号表达式上的方法来计算解析表达式。您可以调用`evalf`解析表达式以获取 Python 浮点数中的数值解。下面是从上面输入输入后 isympy 的一些示例输出 (coeff1 = 1.0)。

```
In [18]: yprime
Out[18]:
                                   0.1
-(2⋅x + 1.0)⋅cos(x) - 2⋅sin(x) + ────────
                                        2
                                 (x + 2)

In [19]: yprime.subs(x,2*pi)
Out[19]:
                0.1
-4⋅π - 1.0 + ──────────
                      2
             (2 + 2⋅π)

In [20]: yprime.subs(x,2*pi).evalf()
Out[20]: -13.5649131254944 
```

以下程序：

```
from sympy import *
x, C1 = symbols('x C1')
y = 1-(0.1*C1)/(x+2)-sin(x)*(2*x+C1)
print y.diff(x).evalf(subs={x:pi/2,C1:1}) 
```

使用 sympy 版本 0.7.2 和 python 2.7.3 打印 -1.99215722345589。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T00:36:20.537

我认为这可能有助于[评估字符串中的数学表达式](https://stackoverflow.com/questions/2371436/evaluating-a-mathematical-expression-in-a-string)我认为 yprime 被解释为字符串，该帖子的第一个答案描述了如何将字符串评估为算术表达式。

# java - 在java中递归打印树中的所有节点

> ID：15869375
> 
> 赞同：1
> 
> 时间：2013-04-08T00:09:52.030
> 
> 标签：java, tree

我想从左到右打印出一棵树（不是二叉树）中的所有内容。我有以下树类及其方法：

```
public class Tree
{
    Node root;

    public Tree(String rootData) 
    {
        root = new Node();
        root.data = rootData;
        root.children = new ArrayList<Node>();
    }

    public static class Node
    {
        private String data;
        private Node parent;
        private List<Node> children;

        public Node(){}

        public Node(String newNodeData, Node newNodeParent)
        {
            data = newNodeData;
            parent = newNodeParent;
        }
    }

    public void print(Node curNode)
    {
        int index = 0;
        while(curNode.children.get(index) != null)
        {
            print(curNode.children.get(index));
            System.out.println(curNode.children.get(index).data);
        }
    } 
```

它在该行抛出一个空指针异常，`print(curNode.childred.get(index));`我不太明白为什么。当`print`第一次被调用时，树的根节点被传递给它。我是否过度简化了打印方法，还是有更好的方法来做到这一点？我在网上找到的所有东西都是针对二叉搜索树的，我不知道如何让它适用于此。

我也愿意以迭代的方式执行此操作，但我不知道从哪里开始，而且我知道它会比递归执行要复杂得多。或者，如果我说错了，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T00:12:43.800

your `Node(String newNodeData, Node newNodeParent)` constructor does not initialize children, hence its null. you only ever initialize the children array for the root node.

also, when iteratin over children, either compare index to children.getSize() or switch to the newer `for(Node n : children)` syntax

as a final sidenote - youre accessing Node filds from the Tree constructor. direct field access from a different class is generally frowned upon in java.

# haskell - Yesod申请表

> ID：15869376
> 
> 赞同：5
> 
> 时间：2013-04-08T00:10:06.033
> 
> 标签：haskell, yesod

我一直在玩 Yesod，然后出现了一个问题：表单如何用作应用程序？

拿：

```
 personForm :: Html -> MForm Synopsis Synopsis (FormResult Person, Widget)
personForm = renderDivs $ Person
    <$> areq textField "Name" Nothing
    <*> areq (jqueryDayField def
        { jdsChangeYear = True -- give a year dropdown
        , jdsYearRange = "1900:-5" -- 1900 till five years ago
        }) "Birthday" Nothing
    <*> aopt textField "Favorite color" Nothing
    <*> areq emailField "Email address" Nothing
    <*> aopt urlField "Website" Nothing 
```

我不明白如何将`<*>`运算符（据我理解）将某种类型`f (a -> b)`（即包含二进制函数的函子）作为其第一个参数应用于`AForm`值：

```
(AForm f) <*> (AForm g) = AForm $ \mr env ints -> do ... 
```

这里发生了什么？

[https://github.com/yesodweb/yesod/blob/bf293e6a1f6e691281520d254f72b9441cc64704/yesod-form/Yesod/Form/Types.hs#L95](https://github.com/yesodweb/yesod/blob/bf293e6a1f6e691281520d254f72b9441cc64704/yesod-form/Yesod/Form/Types.hs#L95)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-08T02:32:43.143

如果您尝试稍微忽略详细类型并查看全局，这会有所帮助。

将`<$>`其视为在不同级别上工作的`<*>`特殊版本。`$`

## 一般的应用函子

让我们先看一下一般情况 - 假设我有一个应用函子`AF`和对象

```
x :: AF a
y :: AF b
z :: AF c 
```

有点意思他们“做某事”然后返回类型的值`a`，`b`和`c`，还有一个纯函数

```
f :: a -> b -> c -> d 
```

我想用来将这些值组合在一起以获得`d`. 然后

```
f <$> x <*> y <*> z    :: AF d 
```

通过“做” `x`，然后`y`，`z`然后应用于`f`结果来工作。

请注意，这类似于`f $ a $ b $ c`.

如果您的应用函子与 monad 实例一致，这`f <$> x <*> y <*> z`是一种很好的写作方式

```
do
  a <- x
  b <- y
  c <- z
  return (f a b c) 
```

## 作为应用函子的形式

将表单视为产生数据（来自用户）的东西。`areq`并且`aopt`都返回一个`AForm sub master ??`. 您可以忽略`sub`and `master`- 它们用于使用类型系统跟踪站点/子站点。`??`是返回的数据类型。

所以
`areq textField "Name" Nothing`是一个产生的小表格`Text`，
`areq (jqueryDayField def) "Birthday" Nothing`一个产生a的小表格，`Day`另外
三个也产生`Text`。

现在我们有

```
data Person = Person Text Day Text Text Text 
```

所以这`Person`是一个函数`:: Text -> Day -> Text -> Text -> Text -> Person`，所以如果你有

```
Person
    <$> areq textField "Name" Nothing
    <*> areq (jqueryDayField def
        { jdsChangeYear = True -- give a year dropdown
        , jdsYearRange = "1900:-5" -- 1900 till five years ago
        }) "Birthday" Nothing
    <*> aopt textField "Favorite color" Nothing
    <*> areq emailField "Email address" Nothing
    <*> aopt urlField "Website" Nothing 
```

`Person`通过获取字段的所有单独值并将纯`Person`函数应用于它们，您已将所有这些表单组合成一个生成单个值的表单。

要以单子风格写，你会写

```
do
    name    <- areq textField "Name" Nothing
    day     <- areq (jqueryDayField def
              { jdsChangeYear = True -- give a year dropdown
              , jdsYearRange = "1900:-5" -- 1900 till five years ago
              }) "Birthday" Nothing
    color   <- aopt textField "Favorite color" Nothing
    email   <- areq emailField "Email address" Nothing
    website <- aopt urlField "Website" Nothing

    return $ Person name day color email website 
```

我非常喜欢 applicative functor 风格，因为它感觉就像将函数应用于某些数据，而不是执行一系列指令。

## 那么`<$>`vs有什么关系`<*>`呢？

你可能已经注意到我总是这样做

```
pureFunction <$> af1 <*> af2 <*> af3 <*> af4 .... 
```

首先`<$>`，`<*>`其余的。那是因为第一件事`pureFunction`是纯粹的，并且不适用于应用函子值。它举起它。（所有应用函子都是函子。）让我们比较一下类型：

```
<$> :: Functor f     =>    (a -> b) -> f a -> f b
<*> :: Applicative f =>  f (a -> b) -> f a -> f b 
```

这意味着这`<$>`是为了提升一个纯函数，但是当您使用`<*>`左侧时，必须已经在生成函数而不仅仅是数据，这最初看起来很奇怪，但如果您`<$>`先使用则不会。例如，如果你部分应用`(++)`到`"Hello"`你得到一个函数`:: String -> String`，那么

```
 getLine             :: IO String             -- produces a String
(++) <$> getLine             :: IO (String -> String) -- produces an appender
(++) <$> getLine <*> getLine ::            IO String  -- produces a combined String 
```

将其与

```
areq textField "Name" Nothing
   :: AForm sub master Text 
```

因为`Person :: Text -> Day -> Text -> Text -> Text -> Person`，如果我们给它一个值，我们得到一个类型`name::Text`的部分应用函数`Person name``Day -> Text -> Text -> Text -> Person`

```
Person <$> areq textField "Name" Nothing
   :: AForm sub master (Day -> Text -> Text -> Text -> Person) 
```

我们可以将 using`<*>`与产生 a 的东西结合起来`Day`，得到产生 a 的东西，`(Text -> Text -> Text -> Person)`依此类推，直到我们得到产生 a 的东西`Person`。（这一切都有效，因为`->`关联到右侧和`<$>`关联`<*>`到左侧，就像这样`$`做一样。）

# android - 如何计算三角形的高度

> ID：15869380
> 
> 赞同：0
> 
> 时间：2013-04-08T00:10:32.480
> 
> 标签：android

我正在尝试计算三角形的高度，其中用户输入三角形底边的长度和度数，我认为我的数学是正确的，但它给了我错误的答案。

我想做的是把底的一半变成直角三角形，然后将一半乘以 tan 度，我知道我错过了一些东西

```
 public void onClick(View v) {
            a = Double.parseDouble(input1.getText().toString());``
            b = Double.parseDouble(input2.getText().toString());
            c = (a / 2) * Math.tan(b);
            answer.setText(Double.toString(c)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:17:32.653

好的，我猜你只考虑等腰三角形。代码看起来不错我认为问题在于您以度为单位给出角度，并且您应该为 tan 函数提供弧度。所以只需将该行更改为：

```
c = (a/2) * Math.tan(b*Math.PI/180); 
```

# shell - 通过 ssh 将值传递给 shell 脚本

> ID：15869383
> 
> 赞同：0
> 
> 时间：2013-04-08T00:10:59.017
> 
> 标签：shell

我想通过 ssh 向 shell 脚本传递一个值：

1.  我有两台 Linux 机器：machine1 和 machine2

2.  我在这些机器上有两个脚本：machine1 上的“script1”和 machine2 上的“script2”。

3.  我已经完成了 ssh 设置，所以我可以在没有密码的情况下从 machine1 登录到 machine2

    ### /opt/script1

    ```
    #!/bin/sh
    echo "enter your name"
    read name
    ssh root@machine2 "/opt/script2 $name" 
    ```

    ### /选择/脚本2

    ```
    #!/bin/sh
    echo "$name" 
    ```

4.  但没有字符串正在打印

请让我知道执行此操作的程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:54:35.667

你能试试这样的脚本吗

脚本1.sh

```
echo "enter your name"
read name
ssh root@machine2 "/opt/script2.sh $name" 
```

脚本2.sh

```
echo $1 
```

将命令行参数传递给 shell 脚本

$0 是命令的名称

$1 第一个参数

$2 第二个参数

$3 第三个参数等

$# 参数总数

$@ 将列出所有参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:58:06.317

如果我输入我的名字作为 Rupert script1 会这样做

```
ssh root@machine2 "/opt/script2 Rupert" 
```

Script2 正在寻找 $name 但它尚未在 machine2 上设置，因此脚本不会打印任何内容。

您可以将 script2 编辑为以下内容

```
#!/bin/sh
name=$1
echo "$name" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T11:13:10.260

您应该将脚本 1 更改如下：

```
#!/bin/sh
echo "enter your name"
read name
ssh root@machine2 `/opt/script2 $name` 
```

# sql - SQL Server / Classic ASP：我可以在选择语句中对一行应用行锁，这样两个用户就不能同时抓住它吗？

> ID：15869387
> 
> 赞同：1
> 
> 时间：2013-04-08T00:11:19.747
> 
> 标签：sql, sql-server, asp-classic

我在 IIS7 上使用经典的 ASP 和 SQL Server 2005。我有一个流程，一个接一个地向客户发布序列化的产品项目。当我们真的很忙时，我会看到两个用户拉同一行的情况，例如 ID5，相隔一两秒。

似乎用户 2 选择了用户 1 之前一两秒选择的同一行，然后用户 2 也被分配了记录 ID5，在我的更新可以将其专门分配给用户 1 之前，因此，强制用户 2 采取下一个记录。

我可能有 10 件商品`MyTable`，4 件已售出，6 件有货。所以下一条可用的记录是 ID5

基本上，我的选择代码是两部分：

第1部分：

```
Select top 1 * 
from MyTable 
where ProdNumber = 'ProdNum' and Sold = 0  order by id 
```

那么，如果存在：

第2部分：

```
update MyTable 
set Sold = 1 
where id = 'record selected above' 
```

用户 1 将抓取记录 ID5，然后在 PART2 执行之前，用户 2 抓取相同的记录 ID5。结果是用户 1 的第 2 部分被用户 2 直接覆盖为记录 ID5 上的买方。

我已经阅读并阅读了这个论坛和其他关于锁定的内容，但没有看到任何似乎直接适用于我的情况和代码方法的内容。有没有人对我有什么建议。除了退出 SQL Server 和 Classic ASP 之外？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:05:41.490

SQL Server 通常的工作方式是在正在读取的行上设置*共享锁*，并在正在更新的行上请求*排他锁。*共享锁与另一个共享锁兼容——因此两个用户可以同时读取同一行。

您可以做的是向 SQL Server 发出信号，表明您不仅仅是在选择显示 - 而且您确实打算更新您稍后正在阅读的那一行。在这种情况下，在读取该行时会在该行上放置一个更新锁，并且该更新锁与同一行上的第二个更新锁不兼容 - 因此基本上防止第二个用户在用户 1 已经读取该行时读取该行。

因此，您基本上需要将“读取然后更新”步骤放入事务中，并在您的`SELECT`：

```
BEGIN TRANSACTION

SELECT TOP 1 * 
FROM MyTable WITH (UPDLOCK)
WHERE ProdNumber = 'ProdNum' AND Sold = 0  
ORDER BY id

UPDATE MyTable 
SET Sold = 1 
WHERE id = 'record selected above'

COMMIT TRANSACTION 
```

请参阅[有关表提示的相关 MSDN 文档，](http://msdn.microsoft.com/en-us/library/ms187373.aspx)并阅读有关`UPDLOCK`更多背景信息的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T02:37:19.337

您没有使用交易，因此您应该在更新之前检查已售状态并通知用户或提出异常是在读取之前记录已被修改。

```
IF EXISTS(SELECT * FROM MyTable WHERE id='record selected above' AND Sold=0)
update MyTable set Sold = 1 where id = 'record selected above'
ELSE 
RAISERROR(...) 
```

# python - PYTHON：交替读取 2 个文件的行并附加到第三个文件

> ID：15869388
> 
> 赞同：2
> 
> 时间：2013-04-08T00:11:20.770
> 
> 标签：python, io, append, readline

我需要编写一个函数 shuffleFiles(afile, bfile, cfile)，它从文件 afile 中读取一行，然后从文件 bfile 中读取一行并将这些行分别附加到文件 C。如果文件 afile 或 bfile 已被完全读取，则继续将其他文件中的行附加到文件 C 中。

这是我到目前为止的代码，这些行没有被写入文件，但是如果我将它们换成打印语句，则这些行以正确的顺序打印出来，其中大多数行之间有空白 \n。不知道从这里去哪里

```
def shuffleFiles(afile, bfile, cfile):
  fileA = open(afile, 'r')
  fileB = open(bfile, 'r')
  fileC = open(cfile, 'a')
  fileADone = False
  fileBDone = False
while not fileADone or not fileBDone:
    if not fileADone:
        line = fileA.readline()
        line.rstrip()
        line.strip()
        if line == "" or line == " " or line == "/n":
            fileADone = True
        else:
            fileC.write(str(line))
    if not fileBDone:
        line = fileB.readline()
        line.rstrip()
        line.strip()
        if line == "" or line == " " or line == "/n":
            fileBDOne = True
        else:
            fileC.write(str(line))

fileA.close()
fileB.close()
fileC.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:22:24.480

这是迭代两个交替可迭代对象（包括文件）的一种方法：

```
from itertools import chain, izip_longest

fileA = open('file_A.txt')
fileB = open('file_B.txt')

for line in filter(None, chain.from_iterable(izip_longest(fileA, fileB))):
    #Do stuff here. 
```

将`izip_longest`两个或多个可迭代对象“压缩”在一起：

```
>>> a = [1, 2, 3, 4]
>>> b = ['a', 'b', 'c', 'd', 'e', 'f']
>>> list(izip_longest(a, b))
[(1, 'a'), (2, 'b'), (3, 'c'), (4, 'd'), (None, 'e'), (None, 'f')] 
```

然后将`chain.from_iterable`它们链接到一个长期运行的迭代中：

```
>>> list(chain.from_iterable(izip_longest(a, b)))
[1, 'a', 2, 'b', 3, 'c', 4, 'd', None, 'e', None, 'f'] 
```

最后，`filter`with`None`作为第一个参数只返回具有非假值的值。在这种情况下，它用于过滤掉`None`上面列表中的 s（`Nones`当一个迭代比另一个长时会发生），以及过滤掉`''`文件中可能存在的空字符串。

```
>>> filter(None, chain.from_iterable(izip_longest(a, b)))
[1, 'a', 2, 'b', 3, 'c', 4, 'd', 'e', 'f'] 
```

**编辑 - 感谢 Tadeck**

将所有这些放在一起，以及`with`用于打开文件的更 Pythonic 运算符，我们得到如下内容：

```
with open('fileA.txt') as fileA, open('fileB.txt') as fileB, open('fileC.txt') as fileC:
    lines = chain.from_iterable(izip_longest(fileA, fileB, fillvalue=''))
    fileC.writelines(filter(None, (line.strip() for line in lines))) 
```

# linux - 帮助开始使用音频编程语言

> ID：15869397
> 
> 赞同：0
> 
> 时间：2013-04-08T00:11:57.387
> 
> 标签：linux, audio, alsa

我有一个小应用程序我已经研究了一段时间来帮助我儿子解决他的语言延迟问题。我`gstreamer`用来播放音素，大约 100 毫秒长的小音频片段。

一切都很好，但我发现将具有如此强大的视频功能的库用于纯音频应用程序有点令人反感。

我在想音频编程语言也可能能够即时播放短音频剪辑。

我一直在阅读有关这些 DSL 的信息，其中有不少。不过看起来[`csound`](http://www.csounds.com/)，[`Supercollider`](http://supercollider.sourceforge.net/)而且[`Chuck`](http://chuck.cs.princeton.edu/)都是*领跑者*。

我现在真正需要做的就是`C`近乎实时地播放小的音频剪辑，最好是来自绑定，我只需要在 Linux 上运行。

谁能帮我为此选择一种语言？有这么多我*“只见树木不见森林”的*特征。

一旦我选择了一个，我将拥有一个满足我当前需求的工具和一个随着我的需求变化而成长的平台。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T00:24:23.580

SuperCollider 具有强大的实时功能，通过它的 sclang 解释器可以很容易地播放声音文件。通过开放声音控制 (OSC) 消息与超级对撞机服务器（scsynth，超级对撞机中实际合成声音的部分）进行通信也不是那么难，因此您可以从另一个单独的应用程序控制合成器。

对Chuck了解不多，但我听说它也适用于即时的实时音频编程，因此它可能会起作用。

我不会推荐 CSound，因为它旨在用于组合，更像是“编译”语言与解释。你基本上是写一个乐谱文件并从中生成一个完整的声音文件，所以它可能不是你想要的。

# haskell - Dimension-tf：创建普通的 Int、Double 等值？

> ID：15869398
> 
> 赞同：4
> 
> 时间：2013-04-08T00:12:02.783
> 
> 标签：haskell

使用[`dimensional-tf`](http://hackage.haskell.org/package/dimensional-tf)包时，是否可以在不使用单元的情况下使用“普通”`Num`实例（即`Int`, `Double`, ） ？`Integer``one`

例如，此代码不输入检查（在 ghci 中）：

```
{-# LANGUAGE NoMonomorphismRestriction #-}
import Numeric.Units.Dimensional.TF.Prelude
import qualified Prelude as P

fourpi = 4 * pi 
```

但这段代码确实：

```
{-# LANGUAGE NoMonomorphismRestriction #-}
import Numeric.Units.Dimensional.TF.Prelude
import qualified Prelude as P

fourpi = (4 *~ one) * (pi *~ one) 
```

注意：让我知道我是否应该使用`dimensional`而不是`dimensional-tf`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T00:42:27.047

( `dimensional`and `dimensional-tf`) 包隐藏了 and 中的运算符，`Num`并`Fractional`定义了具有相同名称但类型不同的运算符。这些运算符不适用于朴素的数字类型。

所以随着

```
{-# LANGUAGE NoMonomorphismRestriction #-}
import Numeric.Units.Dimensional.TF.Prelude
import qualified Prelude as P 
```

你不能只写

```
fourpi = 4 * pi 
```

从那时`(*) :: Num a => Dimensional v d a -> Dimensional v d' a -> Dimensional v (Mul d d') a`起，没有类型的`Num`实例`Dimensional`（不可能，因为二维类型的乘积通常具有不同的维度），因此`4`不能`pi`解释为维度类型的值。

但是，您可以编写

```
fourpi = 4 P.* P.pi 
```

等等，`Num`仍然可以使用符合条件的操作符版本。

# android - 语法错误插入；和 } 来完成声明？

> ID：15869400
> 
> 赞同：0
> 
> 时间：2013-04-08T00:12:09.117
> 
> 标签：android, syntax-error

我刚刚开始学习如何编写 android 应用程序，而且我是一个完整的菜鸟。我不知道如何解决这个问题！请帮忙！格式可能看起来很糟糕......这是因为我不知道我在做什么！

```
 package com.smiggle.bmxhandbook;

     import android.os.Bundle;
     import android.app.Activity;
     import android.view.Menu;

    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.content.Intent;

      public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

        Button button;

    public void onCreate1(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        addListenerOnButton();
    }
    public void addListenerOnButton() {

        button = (Button) findViewById(R.id.button1);

        button.setOnClickListener(new OnClickListener() {

            public void onClick1(View arg0) { 

                Intent myIntent = new Intent(MainActivity.this, Trick.class           
                MainActivity.this.startActivity(myIntent);

            }

            public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub; }

    } 
```

它不断给我一个语法错误！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T01:37:32.847

试试这个代码：

```
public class MainActivity extends Activity {

    Button button;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        addListenerOnButton();
    }

    public void addListenerOnButton() {

        button = (Button) findViewById(R.id.button1);

        button.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) { 

                Intent myIntent = new Intent(MainActivity.this, Trick.class);      
                MainActivity.this.startActivity(myIntent);
            }
        });
    }       

    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
} 
```

你的班级有大量的语法和逻辑错误：

*   任意`onCreate1()`方法，我永远不会调用。
*   任意`onClick()`方法，即使您的 Activity 从未实现接口
*   你的匿名内部类的`onClick()`方法被命名为`onClick1()`
*   带有 的语句`Intent`最后缺少 a `);`。
*   内部类主体缺少结束`});`
*   该`addListenerOnButton()`方法缺少关闭`}`
*   你的整个班级都错过了结业`}`

我真诚地建议您在使用 Android 之前花几个月（甚至一年）学习 Java。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T00:53:39.363

你敞开心扉

```
Intent myIntent = new Intent(MainActivity.this, Trick.class 
```

您需要用右括号和分号将其关闭。

此外，onClick 中不应包含 1：

```
public void onClick1(View arg0) { 
```

# java - 将单维数组转换为多维数组

> ID：15869406
> 
> 赞同：0
> 
> 时间：2013-04-08T00:12:58.960
> 
> 标签：java, arrays

我正在尝试将我的一维数组转换为多维数组 [5][7]。我知道我必须将我的方法 sortBySimpleInterest 和 displayInterest 转换为接受单个多维数组而不是多个单维数组。将这两种方法制作成多维数组后，我是否也必须更改计算以接受多维数组？我也对如何使用选择排序设置 SortbySimpleInterest 方法感到困惑。感谢您的帮助，我是java新手

```
 import java.util.Scanner;
    public class InterestCalculatorBatchMDA {
public static void main(String[] args )
{
    int cnt = 0; 
    double[][] arrPrincipalAmt = new double[5][7];
    double[][] arrInterestRate = new double[5][7];
    double[][] arrTerm = new double[5][7];
    double[][] arrSimple = new double[5][7];
    double[][] arrCompoundMonthly = new double[5][7];
    double[][] arrCompoundDaily = new double[5][7];
    double[][] arrCompoundWeekly = new double[5][7];

    do{ 
        arrPrincipalAmt[cnt] = getPrincipalAmount(1);
        arrInterestRate[cnt] = getInterestRate(1);
        arrTerm[cnt] = getTerm(1);

        arrSimple[cnt] = round(calculateSimpleInterest(arrPrincipalAmt[cnt], arrInterestRate[cnt], arrTerm[cnt]),5);
        arrCompoundMonthly[cnt] = round(calculateCompoundInterest(arrPrincipalAmt[cnt], arrInterestRate[cnt],arrTerm[cnt] ,12.0 ),5); 
        arrCompoundWeekly[cnt] = round(calculateCompoundInterest(arrPrincipalAmt[cnt], arrInterestRate[cnt], arrTerm[cnt], 52.0 ),5);
        arrCompoundDaily[cnt] = round(calculateCompoundInterest(arrPrincipalAmt[cnt], arrInterestRate[cnt], arrTerm[cnt], 365.0 ),5);

        cnt++;
    }while (cnt < 5 && askYesNo("Enter another set of data (Yes/No):")); 

    displayInterest(arrPrincipalAmt,arrInterestRate,arrTerm,arrSimple,arrCompoundMonthly,arrCompoundWeekly,arrCompoundDaily,cnt);
    sortBySimple(arrPrincipalAmt,arrInterestRate,arrTerm,arrSimple,arrCompoundMonthly,arrCompoundWeekly,arrCompoundDaily,cnt);
    displayInterest(arrPrincipalAmt,arrInterestRate,arrTerm,arrSimple,arrCompoundMonthly,arrCompoundWeekly,arrCompoundDaily,cnt);

}

/** Round **/
  public static double round(double numb1, double numb2) {
    double round = ((double) Math.round(numb1*(Math.pow(10, numb2)))/(Math.pow(10, numb2)));;
    return round;
  }

  /** Calculate Simple **/
  public static double calculateSimpleInterest(double numb1, double numb2, double numb3) {
    double calculateSimpleInterest = ((numb1)*(numb2/100.0)*(numb3/12.0));
    return calculateSimpleInterest;
  }

  /** Calculate Compounded Daily **/
  public static double calculateCompoundInterest(double numb1, double numb2, double numb3, double numb4 ) {
     double calculateCompoundInterest = (numb1*Math.pow((1.0+((numb2/100.0)/numb4)),(numb4*(numb3/12.0))))-numb1;
    return calculateCompoundInterest;
  }

  /** Get principal amount **/
  public static double getPrincipalAmount(double numb1) {
      Scanner input = new Scanner(System.in);
      double numb2 = 1;
     do{System.out.print("Enter Loan Amount: ");
       numb2 = input.nextDouble();
       if(numb2 > 0);

            else{   
                    System.out.println("Data Error: Loan amount must be greater than zero. You entered " +numb2);
            }       
           }while (numb2 < 0);
    return numb2;
  }

  /** Get interest rate **/
  public static double getInterestRate(double numb1) {
      Scanner input = new Scanner(System.in);
      double numb2=1;
      do{System.out.print("Enter Yearly Interest Rate (1 to 100 percent): ");
        numb2 = input.nextDouble(); 
      double getInterestRate = 0;
     if (numb2 >= 0 && numb2 <= 100)
      getInterestRate = numb2;
            else{   
                    System.out.println("Data Error: Interest rate must be greater than or equal to zero and less than or equal to 100\. You entered " +numb2);
            }       
           }while (numb2 <= 0 || numb2 >= 100);
    return numb2;
  }

  /** Get term **/
  public static double getTerm(double numb1) {
      Scanner input = new Scanner(System.in);
      double numb2=1;
      do{System.out.print("Enter the Term (in months): ");
        numb2 = input.nextInt();
      double getTerm = 0;
      if (numb2 > 0)
      getTerm = numb2;
            else{   
                    System.out.println("Data Error: Loan amount must be greater than zero. You entered " +numb2);
            }       
           }while (numb2 <= 0);
    return numb2;
  }

  /** Sort by simple interest **/
  public static void sortBySimple(double[][] arrPrincipalAmt ,double[][]  arrInterestRate, double[][]  arrTerm, double[][]  arrSimple, double[][]  arrCompoundMonthly, double[][]  arrCompoundWeekly, double[][]  arrCompoundDaily, double count){
      for(int i = 0;i<count;i++)
      {
      for(int j=i+1; j<count;j++)
      {
      if(arrSimple[j]<arrSimple[i])
      {
      double temp = arrSimple[i];
      arrSimple[i] = arrSimple[j];
      arrSimple[j] = temp;

      double temp1 = arrPrincipalAmt[i];
      arrPrincipalAmt[i] = arrPrincipalAmt[j];
      arrPrincipalAmt[j] = temp1; 

      double temp2 = arrInterestRate[i];
      arrInterestRate[i] = arrInterestRate[j];
      arrInterestRate[j] = temp2; 

      double temp3 = arrTerm[i];
      arrTerm[i] = arrTerm[j];
      arrTerm[j] = temp3; 

      double temp4 = arrSimple[i];
      arrSimple[i] = arrSimple[j];
      arrSimple[j] = temp4;

      double temp5 = arrCompoundMonthly[i];
      arrCompoundMonthly[i] = arrCompoundMonthly[j];
      arrCompoundMonthly[j] = temp5; 

      double temp6 = arrCompoundDaily[i];
      arrCompoundDaily[i] = arrCompoundDaily[j];
      arrCompoundDaily[j] = temp6; 

      double temp7 = arrCompoundDaily[i];
      arrCompoundDaily[i] = arrCompoundDaily[j];
      arrCompoundDaily[j] = temp7; 
      }
      }
      } 
  }

  /** Display Interest **/
  public static void displayInterest(double[][] amt ,double[][] interest, double[][] term, double[][] simple, double[][] monthly, double[][] weekly, double[][] arrCompoundDaily, int count){
    int i=0;
    System.out.println("[Line #]   [Principal Amount]    [Interest Rate]    [Term]    [Simple Interest]    [Compound Monthly]    [Compound Weekly]    [Compound Daily]");
    do{
    System.out.print((i+1)+"                ");
    System.out.print(amt[i]+"                ");
    System.out.print(+interest[i]+"           ");
    System.out.print(+ term[i]+"           ");
    System.out.print(+simple[i]+"          ");
    System.out.print(+monthly[i]+"           ");
    System.out.print(+weekly[i]+"           ");
    System.out.println(+arrCompoundDaily[i]);
    i++;
  }while(i < count);
  }

  /**ask yes or no **/
  public static boolean askYesNo(String question) {
      Scanner input = new Scanner(System.in);
      String enteredText;
      boolean isAnswerValid;

      do{
          isAnswerValid = false;
          System.out.println(question);
          enteredText = input.nextLine();

          if (enteredText.length() > 0)
          {
              enteredText = enteredText.toUpperCase();

              if(enteredText.equals("YES") || enteredText.equals("Y") || enteredText.equals("NO") || enteredText.equals("N"))
              {
                  isAnswerValid = true;
              }
          }

          if(isAnswerValid == false)
          {
              System.out.println("Please enter 'Yes' or 'No'?");
          }

      } while(isAnswerValid == false);

      if(enteredText.equals("YES") || enteredText.equals("Y"))
      {
          return true;
      }

      return false;
  } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:19:53.427

如果您可以将某个计算场景映射到单个结构，那么简单的解决方案就是使用一个类。

```
class InterestRateSource {
    private Double firstFactor;
    private Double secondFactor;
    //etc

    public InterestRateSource(Double firstFactor, Double secondFactor) {
        this.firstFactor = firstFactor;
        this.secondFactor = secondFactor;
    };

    public Double getFirstFactor() {
        return this.firstFactor;
    };

    public Double getSecondFactor() {
        return this.secondFactor;
    };
};
// expand the above to account for all the variables of a single test case.
// Then simply use a List or whatever suitable collection.

    List<InterestRateSource> myList = new ArrayList<InterestRateSource>();
    myList.add(new InterestRateSource(5, 7));
    myList.add(new InterestRateSource(3,4));
    for (InterestRateSource currentRate: myList) {
       // now you are iterating through the list. Do whatever calculations you need to do.
    }; 
```

# sql - 列出用户 ID SQL 查询的所有朋友

> ID：15869407
> 
> 赞同：2
> 
> 时间：2013-04-08T00:13:00.230
> 
> 标签：sql, oracle

我有 2 个表，一个**用户**表（user_id、fname、lname、dob 等）和一个**are_friends**表（userA_id、userB_id）。我一直在尝试执行此查询一段时间，我需要它来列出 user_id 的所有朋友。

我到目前为止所得到的，

```
SELECT
  U.user_id,
  U.fname,
  U.lname 
FROM are_friends A, user U
WHERE
  A.user_id = U.user_id
  AND (
    A.user_id = 1
    OR A.user_id IN (SELECT userB_id FROM are_friends WHERE userA_id = 1)
  ); 
```

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T00:15:51.170

尝试使用[`INNER JOIN`](http://dev.mysql.com/doc/refman/5.0/en/join.html)这样的：

```
SELECT u2.user_id, u2.fname, u2.lname
FROM user u
INNER JOIN are_friends f ON f.userA_id = u.user_id
INNER JOIN user u2 ON u2.user_id = f.userB_id
WHERE u.user_id = 1 
```

您可以更改`WHERE`子句以专门获取另一个用户 id 的朋友。

# html - 当使用输入类型“图像”时，我试图让它当我将鼠标悬停在它上面时，它会变成另一张图片

> ID：15869409
> 
> 赞同：0
> 
> 时间：2013-04-08T00:13:03.190
> 
> 标签：html, css, image

```
<form action='./index.php' method='post' class='form'>
<table>
<tr>
<td>$error</td>
</tr>
<tr>
<td>Username:</td>
<td><input type='text' name='user' /></td>
</tr>
<tr>
<td>Password:</td>
<td><input type='password' name='password' /></td>
</tr>
<tr>
<td></td>
<td><input type='image' src='./images/loginbtn.jpg' name='loginbtn' value='Login' alt='Submit Form'/></td>
</tr>
</table>
</form> 
```

上面的代码是来自我（正在进行的工作）网站的代码。我正在使用“图像”输入类型，因为它允许我将图像用作按钮。我在这里遇到的问题是输入一些代码，当我将鼠标悬停在它上面时，我可以放入另一个图像。此代码包含在 PHP 标记中并设置为变量“$form”。这样我就可以用它来回显它并轻松地运行一些其他 PHP 代码。

当我将鼠标悬停在按钮上时，是否有任何 CSS 可以用来放入另一张图片？我可能会让这比看起来更复杂吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T00:41:16.383

对于本机 javascript，您可以`onmouseover`按照此示例使用：

[http://jsfiddle.net/42E99/](http://jsfiddle.net/42E99/)

为长的图片网址道歉，希望它不会混淆。

**编辑**

**CSS： http:** [//jsfiddle.net/dZ2qL/](http://jsfiddle.net/dZ2qL/)用于`hover`更改背景图像。

**第二次编辑**

[http://jsfiddle.net/dZ2qL/3/](http://jsfiddle.net/dZ2qL/3/)

使用 a`<div>`代替，`<input>`并在 css 中添加了一些行。

```
background-color:transparent;
border: 0px solid; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T00:21:29.573

看看这个[>>fiddle<<](http://jsfiddle.net/trajce/ccXSh/)
这是一个简短的 jquery 代码演示：

首先你需要包括jquery

```
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

然后你包括这段代码：

```
<script>
    $(document).ready(function() {
        $("#test").hover(
          function () {
            $(this).attr('src','http://www.seobook.com/images/smallfish.jpg');
          },
          function () {
            $(this).attr('src','http://www.google.com/images/srpr/logo4w.png');
          }
        );
    });
</script> 
```

在您的 html 中，您设置`id`或`class`设置您的元素（它必须与示例脚本中的元素相同，值`test`在我的示例中。

```
<input id="test" type='image' src='http://www.google.com/images/srpr/logo4w.png' name='loginbtn' value='Login' alt='Submit Form'/> 
```

# java - 如何检查 2 秒内发生了多少事件？（计时器）

> ID：15869412
> 
> 赞同：2
> 
> 时间：2013-04-08T00:13:14.723
> 
> 标签：java, android, multithreading, loops, timer

我需要检查在 2 秒内检测到多少事件。我的计时器在工作，其他一切都在工作......但我遇到了一个问题：循环每秒只检查一次，我似乎无法弄清楚如何解决这个问题。我需要它在这两秒钟内不断检查以查看总共有多少事件！

这是我所拥有的：

```
int seconds = 0;
System.out.println("Seconds: " + seconds);
while(seconds < 2)
{
    //Wait 1 second
    try {                                
        Thread.sleep(1000);
    }
    catch(Exception e) {}

    seconds++;
    System.out.println("Seconds: " + seconds);

    //This needs to be looping the whole time. 
    //But right now, it's being blocked and only checked once
    if(eventDetected() && seconds <= 2){
        events++;
    } 
} 
```

所以你可以看到我的问题。我不能把它们分开，因为第二个计时器会运行，然后会检查 eventDetected()。我需要它在两秒计时器期间不断检查......所以我基本上需要两件事同时发生。有什么办法可以做到这一点吗？

感谢您提前提供任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:25:21.590

我认为你的设计模式需要工作——我不知道你想要检测什么类型的事件，但无论你的睡眠时间有多短，你都有可能错过使用当前模式的事件。这是我的建议：

`eventDetected()`增加你的计数器`events`。这样，您就不会错过任何活动。

然后，您只需要一种打开和关闭监听的方法（也许还需要重置事件计数器）。如果您确定在当前模式中您确实处于不会阻止您的`eventDetected()`方法的不同线程中，则可以设置一个标志进行检查。例如：

当您想开始收听时：

`listenForEvents = true;`

在 eventDetected() 中：

`if (listenForEvents) { events++; }`

当您想停止收听时（例如，在您`Thread.sleep()`通话后）：

```
listenForEvents = false; 
```

当然，使用多线程时，请务必注意检查和设置变量的并发问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T00:34:50.657

我会告诉你我必须跟踪什么样的事件，但我不得不杀了你：D

回答了我自己的问题。希望这将帮助其他在某些时候遇到类似问题的人！我查了一下多线程...

我创建了一个实现 Runnable 的新类 EventTimer，它有一个公共字段几秒钟：

```
public class EventTimer implements Runnable{
int seconds;
static int timerThreadCount = 0;
Thread t;

public EventTimer() {
    timerThreadCount++;
    this.seconds = 0;
    t = new Thread(this, "Event Timer");
    t.start(); // Start the thread
}

@Override
public void run() {
    // TODO Auto-generated method stub
    while(seconds < 2)
    {
        //Wait 1 second
        try {                                
            Thread.sleep(1000);
        }
        catch(Exception e) {
            System.out.println("Waiting interupted.");
        }

        seconds++;
        System.out.println("Seconds: " + seconds);
    }
}

} 
```

然后我使用了 EventTimer 的一个实例，并使用了一个 while 循环和 if 语句来解决我的问题。

```
EventTimer t = new EventTimer();
    while(t.seconds < 2){
    if(eventDetected()) events++;
} 
```

其实很简单！我意识到我的操作循环的每次迭代（因为上面的整个代码段都在一个无限循环中）将创建一个新的 EventTimer 线程，但是我最终会遇到内存问题。计时器达到 2 秒后，我将如何关闭/结束线程？

# jquery - 对象不支持属性或方法“选择框”

> ID：15869414
> 
> 赞同：2
> 
> 时间：2013-04-08T00:13:19.707
> 
> 标签：jquery, internet-explorer, drop-down-menu

[我正在使用来自http://www.bulgaria-web-developers.com/projects/javascript/selectbox/](http://www.bulgaria-web-developers.com/projects/javascript/selectbox/)的选择框 jQuery 插件。

我在 js 文件中也有一个链接，其中包含以下代码：

```
function loadTeams() {
var responseArray, optionsOutput = '';

$.ajax({
    type: "GET",
    url: "/ajax/team",
    dataType: "json",
    success: function (response) {
        responseArray = response.array;

        for (var i = 0; i < responseArray.length; i++) {
            optionsOutput += '<option value="' + responseArray[i] + '">' + responseArray[i] + '</option>';
        }

        $("#teamSelect").find('option')
                        .remove()
                        .end()
                        .append(optionsOutput);
        $("#teamSelect").selectbox({ speed: 100 });  
    },
    error: function (xhr, ajaxOptions, thrownError) {
        $("#teamSelect").find('option')
        .remove()
        .end()
        .append('<option value=""></option>');
    }
}); 
```

}

这适用于除 IE 之外的所有浏览器。在那里，我得到：

> SCRIPT438：对象不支持属性或方法“选择框”globals.js，第 38 行字符 4

这相当于以下行：

```
$("#teamSelect").selectbox({ speed: 100 }); 
```

我甚至尝试过将整个 jQuery 插件 js 文件复制到`globals.js`.

是什么赋予了？

编辑-更新：我尝试将 a 分配`#teamSelect`给 a`var`和调用`var.selectbox`，但我遇到了同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T01:01:52.453

啊哈，问题是 jQuery 的选择框插件（可能是 jQuery 本身）和 Foundation 4 之间的冲突。当我集成 Foundation 4 时，我按照他们网站上的示例进行操作，该示例让我复制并粘贴到这个神秘的位：

```
<script>
    document.write('<script src=' +
    ('__proto__' in {} ? '/js/vendor/zepto' : '/js/vendor/jquery') +
    '.js><\/script>');
</script> 
```

这是加载 zepto 或 jquery，然后我从 Google CDN 加载 jquery。删除此行并首先放置我的 jQuery 的 Google CDN 解决了​​冲突。

# java - 在运行时获取泛型类型类

> ID：15869415
> 
> 赞同：0
> 
> 时间：2013-04-08T00:13:33.740
> 
> 标签：java

我一直在试图弄清楚如何在运行时确定泛型类型的类名，但也许我需要重新表述我对此的想法。

例如我有：

```
Map<String,Integer> map = new PersistentHashMap<String,Integer>(); 
```

我是否能够检索类名和`java.lang.String`例如？`java.lang.Integer``PersistentHashMap`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T00:14:11.103

由于[类型擦除](http://en.wikipedia.org/wiki/Generics_in_Java#Problems_with_type_erasure)，这是不可能的。

# javascript - javascript中的形状类？

> ID：15869422
> 
> 赞同：1
> 
> 时间：2013-04-08T00:14:14.293
> 
> 标签：javascript, prototype

我正在尝试制作一个小形状辅助对象来帮助我在 html 5 画布上绘制形状。到目前为止，我有；

```
var Shape = function (config) {

    this.initialize(config);
};

var proto = Shape.prototype;

proto.initialize = function (config) {

    this.x = config.x || 0;
    this.y = config.y || 0;
    this.width = config.width || 0;
    this.height = config.height || 0;
    this.color = config.color || false;
};

/*
    Circle
*/

var Circle = function (config) {

    this.initialize(config);
};

proto = Circle.prototype;

proto = new Shape(); 
```

但这似乎不起作用！当我打电话创建一个像这样的新圈子时；

```
var s1 = new Circle({x: 10, y: 10, width: 10, height: 10, color: "red"}); 
```

如何创建一个基类`Shape`来帮助设置其他形状并分配形状应具有的一些常见属性，例如，`Circle`等`Rect`？

我正在尝试学习 javascript，所以如果代码有问题，请解释为什么以及如何改进它，

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T00:15:32.590

`proto = new Shape();`

这将分配`proto`变量以引用新`Shape`实例。
它不影响`Circle.prototype`该变量之前碰巧引用的 。

* * *

请注意，您正在运行`Shape()`构造函数来初始化 Circle 原型，这可能不是一个好主意。
相反，你可以写

```
Circle.prototype = Object.create(Shape.prototype); 
```

此代码将创建一个继承的新对象`Shape.prototype`，而不运行其构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T00:17:49.293

更改此行：

```
proto = Circle.prototype;

proto = new Shape(); 
```

和：

```
Circle.prototype = new Shape(); 
```

# methods - 使用敲除并尝试将一些新数据推送到数组中，我得到了未定义的错误。为什么

> ID：15869431
> 
> 赞同：1
> 
> 时间：2013-04-08T00:15:43.097
> 
> 标签：methods, knockout.js, push, undefined

我正在使用数组**对象**和淘汰赛 js。下面的一些代码使该数据可用于绑定并且一切正常。但是当我试图在数组**行**中推送一些数据时，我收到了这个错误消息：

> 未捕获的类型错误：无法调用未定义 ADMIN_gym_demo3.html:217 的方法“推送”

现在我想不通为什么那个结构不起作用。

```
Objects = {days: [
        {day: 'Monday', row:[{
                col1: '100', col2: '200', col3: '300', col4: '400', col5: '500'
            },{
                col1: '100', col2: '200', col3: '300', col4: '400', col5: '500'
            },{
                col1: '100', col2: '200', col3: '300', col4: '400', col5: '500'
            }]},{//////////////////////////////////////////////////////////////
        day: 'Tuesday', row:[{
                col1: '100', col2: '200', col3: '300', col4: '400', col5: '500'
            },{
                col1: '100', col2: '200', col3: '300', col4: '400', col5: '500'
            },{
                col1: '100', col2: '200', col3: '300', col4: '400', col5: '500'
            }]},{//////////////////////////////////////////////////////////////
        day: 'Wednesday', row:[{
                col1: '100', col2: '200', col3: '300', col4: '400', col5: '500'
            },{
                col1: '100', col2: '200', col3: '300', col4: '400', col5: '500'
            },{
                col1: '100', col2: '200', col3: '300', col4: '400', col5: '500'
            }]}///////////////////////////////////////////////////////////////

    ]};

var ViewModel = function(){
    var self = this;

    cont = ko.mapping.fromJS(Objects);
    alld = cont.days;
    thisrow = self.row;
    crow = alld.thisrow;

    val1 = ko.observable('');
    val2 = ko.observable('');
    val3 = ko.observable('');
    val4 = ko.observable('');
    val5 = ko.observable('');

    add = function(){

            var vm1 = val1;
            var vm2 = val2;
            var vm3 = val3;
            var vm4 = val4;
            var vm5 = val5;

            crow.push({
                col1: vm1(), col2: vm2(), col3: vm3(), col4: vm4(), col5: vm5() });
            };
    }; 

    ko.applyBindings(new ViewModel); 
```

html 的样子：

```
<div data-bind="foreach: alld">
                    <p data-bind="text: day"></p>
                    <table class="table table-striped table-condensed" >        
                    <thead>
                    <tr>
                        <th>time</th>
                        <th>training time</th>
                        <th>difficulty</th>
                        <th>coach</th>
                        <th>gym</th>
                    </tr>
                    </thead>

                    <tbody data-bind="foreach: row">

                    <tr >
                        <td data-bind="text: col1">7.00-10.00</td>
                        <td data-bind="text: col2">bodypump</td>
                        <td data-bind="text: col3">I-III</td>
                        <td data-bind="text: col4">Michael Ivanov</td>
                        <td data-bind="text: col5">01</td>
                    </tr>

                    </tbody>

                </table>

                <div style="width: 100%" >
                        <div style="display: inline; float: left; width: 20%"  >
                            <input data-bind="value: val1" />             
                        </div>                                            
                        <div style="display: inline; float: left; width: 20%">
                            <input data-bind="value: val2" />            
                        </div>                                           
                        <div style="display: inline; float: left; width: 20%">
                            <input data-bind="value: val3" />             
                        </div>                                            
                        <div style="display: inline; float: left; width: 20%">
                            <input data-bind="value: val4" />             
                        </div>                                            
                        <div style="display: inline; float: left; width: 20%">
                            <input data-bind="value: val5" />
                        </div>
                        <a href="#" data-role="button" data-icon="star" data-iconpos="right" data-mini="true" data-bind="click: add" >Add row</a>    

                </div> 
```

有人可以告诉我我的错误在哪里吗？这是我的jsfiddle：http: [//jsfiddle.net/uhtshka/BWxm7/3/](http://jsfiddle.net/uhtshka/BWxm7/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T04:16:21.450

错误是“无法调用未定义的方法推送。” 这意味着你试图调用 push on 的东西是未定义的。让我们看看哪一行代码调用了 push：

```
alld.row.push(...); 
```

错误消息告诉您 alld.row 未定义。所以让我们看看 alld 是从哪里来的，看看我们是否能弄清楚为什么 alld 上的 row 属性是未定义的：

```
alld = ko.observableArray();
alld = Objects.days; 
```

它首先被制成一个 observableArray，但是当它被重新定义为 Object.days 时它就被清除了。让我们看看 Objects.days 是在哪里定义的，以及为什么它没有名为“row”的属性。

```
Objects = {days: [
  { day: 'Monday', row:[...] },
  { day: 'Tuesday', row:[...] },
  { day: 'Wednesday', row:[...] }
]}; 
```

Objects.days 是一个数组。数组中的每个项目都有一个名为 row 的属性，但数组本身没有名为 row 的属性。因此，如果您想将某些东西推入行数组，您首先必须弄清楚您想推入哪一个 - 您有 3 个 - 一个用于星期一，一个用于星期二，一个用于星期三。如果你想推入星期一的数组，你可以这样做：

```
alld[0].row.push(...); 
```

总的来说，我不太确定你想在这里做什么。你的标记和代码有几个问题，所以代码的目的对我来说有点神秘。但这里还有一些你应该调查的事情：

你有一个 div 作为一个 tbody 的孩子。您应该只将 tr 作为 tbody 的子级，而 td 在 tr 内部。然后 div 可以是 tr 的子级。

您有一个位于 div 内的原始数据绑定字符串，如下所示（不包括 #Monday 的其他子项）：

```
<div id="Monday">
  data-bind="template: { name: 'object', foreach: filterByDay('Monday') }""
</div> 
```

我猜你的意思是把 data-bind 作为属性放在某个东西上。但是，filterByDay 没有在任何地方定义。

我看到这行代码，你在其中使用 ko.mapping：

```
var cont = ko.mapping.fromJS(Objects);
alld = ko.observableArray();
alld = Objects.days; 
```

cont 从不在任何地方使用，并且 alld 最终成为一个数组（不是 observableArray）。我猜你打算做这样的事情：

```
var cont = ko.mapping.fromJS(Objects);
alld = cont.days; 
```

这将导致 alld 成为带有来自 Objects 的数据的 observableArray。

我之前提到过你有这两行代码：

```
alld = ko.observableArray();
alld = Objects.days; 
```

第一行完全没用，因为当您将不同的东西分配给 alld 时，您在第一行中创建的 observableArray 会被清除。这种相同的模式在您的代码中多次出现。

什么是卓尔？drow 是 alld.row - 这是未定义的，正如刚才讨论的那样，所以你不能用 new 关键字调用它，就好像它是一个构造函数一样。

什么是自我？你永远不会定义自我。通常在使用淘汰赛时，您会将其放在视图模型的顶部：

```
var self = this; 
```

# php - 使用 & 符号解码 URL

> ID：15869435
> 
> 赞同：0
> 
> 时间：2013-04-08T00:16:00.310
> 
> 标签：php

以下 URL 在 & 符号后被截断。

```
http://localhost:8888/teams/ncaa/Alabama%20A%26M%20Bulldogs 
```

最后一个参数 ($_GET['team']) 被截断，所以当我回显它时，它很简单

```
Alabama A 
```

该参数编码如下

```
echo "<a href='/teams/ncaa/".urlencode($team[$i])."'>".$team[$i]."</a>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T00:47:49.120

改变：

```
echo "<a href='/teams/ncaa/".urlencode($team[$i])."'>".$team[$i]."</a>"; 
```

到：

```
echo "<a href='/teams/ncaa/".rawurlencode($team[$i])."'>".$team[$i]."</a>"; 
```

# c - libaio：获取事件错误代码

> ID：15869448
> 
> 赞同：2
> 
> 时间：2013-04-08T00:18:03.437
> 
> 标签：c, linux

linux 中最新的 libaio API (/usr/include/libaio.h) 定义 io_event 如下：

```
struct io_event {
    PADDEDptr(void *data, __pad1);
    PADDEDptr(struct iocb *obj,  __pad2);
    PADDEDul(res,  __pad3);
    PADDEDul(res2, __pad4);
}; 
```

PADDEDul 解析为：

```
#define PADDEDul(x, y)  unsigned long x; unsigned y 
```

我读过的所有例子都说如果'res'是负数，那么系统调用期间会发生错误并且res包含负的'errno'变量。我的问题是，如果 'res' 被声明为 unsigned long long ，它如何包含负 errno ？如果“res”不再包含错误代码，我在哪里可以得到它来进行写入或读取系统调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T11:09:50.140

请将 libaio 中的定义与 /usr/include/linux/aio_abi.h 中的定义进行比较。你会发现 'res' 和 'res2' 实际上在那里被定义为有符号整数。

为了您的方便，这里是 aio_abi.h 的链接：http: [//kerneldox.com/kdox-linux/dd/db4/aio__abi_8h_source.html](http://kerneldox.com/kdox-linux/dd/db4/aio__abi_8h_source.html)

此外，使用 glibc 中的 syscall() 包装内核 AIO API 也是一个可接受的选项。学习这些内核 API 将是一次令人印象深刻且有利可图的体验。首先，了解 nginx 如何使用它们。

快乐黑客！

# regex - 正则表达式重新格式化

> ID：15869450
> 
> 赞同：-1
> 
> 时间：2013-04-08T00:18:21.377
> 
> 标签：regex, json

我正在尝试重新格式化 json 文件并消除文件的很大一部分。这是原始的json文件。

```
 "2597401":[{"jobID":"2597401",
                 "account":"TG-CCR120014",
                 "user":"charngda",
                 "pkgT":{"pgi/7.2-  5":{"libA":["libpgc.so"],
                 "flavor":["default"]}},          
                 "startEpoch":"1338497979",
                 "runTime":"1022",
                 "execType":"user:binary",              
                 "exec":"ft.D.64",
                 "numNodes":"4",
                 "sha1":"5a79879235aa31b6a46e73b43879428e2a175db5",
                 "execEpoch":1336766742,
                 "execModify":"Fri May 11 15:05:42 2012",
                 "startTime":"Thu May 31 15:59:39 2012",
                 "numCores":"64",
                 "sizeT":{"bss":"1881400168","text":"239574","data":"22504"}},  
                 {"jobID":"2597401",
                 "account":"TG-CCR120014",
                 "user":"charngda",
                 "pkgT":{"pgi/7.2-5":{"libA":["libpgc.so"],
                 "flavor":["default"]}},
                 "startEpoch":"1338497946",
                 "runTime":"33"  "execType":"user:binary",
                 "exec":"cg.C.64",
                 "numNodes":"4",
                 "sha1":"caf415e011e28b7e4e5b050fb61cbf71a62a9789",
                 "execEpoch":1336766735,
                "execModify":"Fri May 11 15:05:35 2012",
                "startTime":"Thu May 31 15:59:06 2012",
                "numCores":"64",
                "sizeT":{"bss":"29630984","text":"225749","data":"20360"}},
                {"jobID":"2597401",
                "account":"TG-CCR120014",
                "user":"charngda",
                "pkgT":{"pgi/7.2-5":  {"libA":["libpgc.so"],
                "flavor":["default"]}},
                "startEpoch":"1338500447",
                "runTime":"145",
                "execType":"user:binary",
                "exec":"mg.D.64",
                "numNodes":"4",
                "sha1":"173de32e1514ad097b1c051ec49c4eb240f2001f",
                "execEpoch":1336766756,
                "execModify":"Fri May 11 15:05:56 2012",
                "startTime":"Thu May 31 16:40:47 2012",
                "numCores":"64",
                "sizeT":{"bss":"456954120","text":"426186","data":"22184"}},{"jobID":"2597401",
                "account":"TG-CCR120014",
                "user":"charngda",
                "pkgT":{"pgi/7.2-5":{"libA":["libpgc.so"],
                "flavor":["default"]}},
                "startEpoch":"1338499002",
                "runTime":"1444",
                "execType":"user:binary",
                "exec":"lu.D.64",
                "numNodes":"4",
                "sha1":"c6dc16d25c2f23d2a3321d4feed16ab7e10c2cc1",
                "execEpoch":1336766748,
                "execModify":"Fri May 11 15:05:48 2012",
                "startTime":"Thu May 31 16:16:42 2012",
                "numCores":"64",
                "sizeT":{"bss":"199850984","text":"474218","data":"27064"}}], 
```

对于每个 JobId，我只想保留“exec”字段和 JobID。我如何构建一个正则表达式来使其余数据变笨？理想情况下，我想要以下内容： JobID exec1 exec2 exec3
有什么方法可以做到这一点吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-24T10:21:54.647

因为您没有指定您的 RegEx 引擎，所以我假设您使用[pcre](/questions/tagged/pcre "显示标记为“pcre”的问题")作为我的答案。

基于 JSON 格式，您可以使用此 RegEx 匹配不需要[的键值](/questions/tagged/key-value "显示标记为“键值”的问题")对以替换为空：

```
/(,\s*(*SKIP))?+("(?!jobID"|exec)[^"]+"\s*+:\s*+("[^"]*"|{(?2)?+(?>,\s*(?2))*}|\[(?3)?+(?>,\s*(?3))*\]))(?(1)|,?)/g 
```

这是您在应用 RegEx 替换后订购的内容：

```
 "2597401":[{"jobID":"2597401",
                 "execType":"user:binary",              
                 "exec":"ft.D.64",
                 "execEpoch":1336766742,
                 "execModify":"Fri May 11 15:05:42 2012"},  
                 {"jobID":"2597401"  "execType":"user:binary",
                 "exec":"cg.C.64",
                 "execEpoch":1336766735,
                "execModify":"Fri May 11 15:05:35 2012"},
                {"jobID":"2597401",
                "execType":"user:binary",
                "exec":"mg.D.64",
                "execEpoch":1336766756,
                "execModify":"Fri May 11 15:05:56 2012"},{"jobID":"2597401",
                "execType":"user:binary",
                "exec":"lu.D.64",
                "execEpoch":1336766748,
                "execModify":"Fri May 11 15:05:48 2012"}], 
```

如您所见，生成的字符串在“ `"jobID":"2597401" "execType":"user:binary"`”中具有无效语法，这是给定数据中的语法*错误*...

附说明：

```
/(,\s*(*SKIP))?+
# Attempts to match a comma and whitespace,
# without backtracking;
# And if the comma is matched, use (*SKIP) verb,
# which advances the pointer if we fail to match the comma.

# Key - Value pairs not worthy of keeping.
(
  "(?!jobID"|exec)[^"]+" # Check if we like this key.
  \s*+:\s*+ # The colon, advance whitespaces.
  ( # Check keys recursively.
    "[^"]*"
      # String literals, boring.
    | {(?2)?+(?>,\s*(?2))*}
      # Or: An object storing some key-value pairs
      # we don't care about.
    | \[(?3)?+(?>,\s*(?3))*\]
      # Or: An array storing some values
      # we don't care about.
  )
)
(?(1)|,?)
# Balance the comma (so the result string is still valid JSON)
/gx 
```

这是一个[正则表达式演示](http://regex101.com/r/lD6lU1/1)。

# fonts - AsciiDoc：如何指定 HTML 输出字体？

> ID：15869452
> 
> 赞同：1
> 
> 时间：2013-04-08T00:18:22.807
> 
> 标签：fonts, asciidoc

[在AsciiDoc](http://www.methods.co.nz/asciidoc/)输入 .txt 文件中寻求简单的方法来指定默认输出字体（即将字体系列更改为类似 Calibri 的字体；但也希望控制粗体、斜体和其他样式）以更改 HTML 输出.

可选：想要为文档的特定部分（比如内容中的一两行）进行自定义字体更改标注。

如果需要 css 控制，我可以处理，但需要在过程/设置中详细说明每个功能步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T23:17:30.537

我自己是 AsciiDoc 的新手，但这可能足以让你继续前进。不幸的是，似乎没有一种非常简单的方法可以在 AsciiDoc 输入文件中使用简单指令设置自定义样式。最终，AsciiDoc 只是`include`将样式表文件添加到您的输出中（经过一些相当复杂的逻辑，具体取决于后端）。

最简单的选择似乎是创建自己的主题。AsciiDoc 用户指南有关于如何执行此操作的说明（排序），但本质上是：

1.  找到`themes`安装 AsciiDoc 的目录
2.  复制现有主题（“flask”似乎是默认主题）。8.6.6 之前的版本，它只是一组 CSS 文件。对于 8.6.6 及更高版本，它是一组目录。
3.  根据自己的喜好编辑主题。
4.  `theme`使用文档属性或`--theme <name>`命令行选项（8.6.6\. 及更高版本）或（8.6.6 之前）指定样式表`--attribute theme=<name>`。

这种方法的缺点是您的主题必须与其他主题一起存在。似乎没有办法改变它，或者我只是不知道。如果您的情况可以选择，符号链接可能会起作用。

另一种可能性更极端一些，但如果您愿意，可以让您的风格与数据保持一致。一点免责声明：我通过查看 AsciiDoc 源代码发现了这一点，它没有记录在案，因此它可能会在以后的版本中更改。我对此表示怀疑，但值得注意的是。我也只对它进行了快速测试，但它似乎有效。

1.  如果您还没有配置文件，请创建一个配置文件。
2.  在其中创建一个`[header]`部分（这不是记录的配置文件部分，但我在`.conf`后端的文件中注意到它）。
3.  我不知道您使用的是哪个后端，但无论是哪个后端，找到它的`.conf`文件，查找该`[header]`部分，复制整个部分，然后将其粘贴到您的配置文件中。可能有多个，所以寻找任何“看起来正确”的东西。
4.  编辑`[header]`配置文件的部分。您的目标是提取任何类型的决策代码。例如，对于`html`只是 的别名的后端，`xhtml11`我将删除`ifdef`宏，并用宏替换它们`include1`以包含我的 CSS 文件。所以我最终得到的是这样的：

    ```
    [header]
    <DOCTYPE html ... yadda yadda
    <!-- snip: a bunch of meta elements and such -->
    <title>{title}</title>
    <style type="text/css">
    include1::style.css[]
    </style> 
    ```

5.  使用命令行选项或文档属性告诉 AsciiDoc 使用您的配置文件。

尝试后一种方法从我尝试过的示例中“删除”XHTML 标头，但我没有超越。如果第一种方法不符合您的喜好，希望第二种方法可以解决。

至于自定义字体更改标注，我可能会使用直通块：

```
++++++++++++++
<span id="foo">content goes here</span>
++++++++++++++ 
```

但请注意，它是特定于后端的，并且该示例是 HTML，如果我做得对的话（我有点生疏）。我对 AsciiDoc 不够熟悉，无法提出更好的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-26T23:21:39.790

我刚开始自己​​看 Asciidoc 并且很恼火没有找到记录在案的方式

1.  **链接**到自定义 CSS 样式表
2.  不包括输出文件标题中的 CSS 部分。

在没有采取[使用 SASS 为 HTML5 后端编写您自己的 AsciiDoc 主题](https://github.com/jmaupetit/AsciiDoc_SASS)中描述的所有步骤的情况下，我在命令行中至少找到了以下内容：

```
asciidoc -b html5 -a linkcss -a stylesdir=$PWD myfile.txt 
```

在这种情况下，样式表的名称必须是默认的，即 asciidoc.css 这满足了上面提到的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-16T19:59:56.923

[扩展我刚刚从https://stackoverflow.com/a/29456923/200509](https://stackoverflow.com/a/29456923/200509)学到的 passthrough 块（也提到过）技巧，将其放在`.adoc`文件中的某个位置应该可以覆盖任何主题样式（请参阅`/etc/asciidoc/themes/flask/flask.css`默认值），包括字体：

```
++++
<style>
body { font-family: Calibri,sans-serif; }
</style>
++++ 
```

# php - Jquery Ajax 和 PHP 动态生成不同的表单

> ID：15869454
> 
> 赞同：0
> 
> 时间：2013-04-08T00:18:59.643
> 
> 标签：php, jquery, ajax, post, submit

问题在于 PHP，假设我有 Jquery，我用一个表单询问 3 个输入字段。一旦我提交了该表格，我就会通过 PHP 并说我有：

```
$_POST['service1']
$_POST['service2']
$_POST['service3'] 
```

没关系。我会在 PHP 中对这些值进行硬编码，**但我说我要求 5 项服务或 9**项服务……我一直试图弄清楚这一点。

我想过一种方法是使用fopen 和 fclose 并根据我请求的字段数**将文件写入服务器端的磁盘。**

基本上，该应用程序假设要获取我需要多少服务，将每个内容的内容添加到其中，然后使用所有这些生成一个 SQL 查询......但是由于表单是动态的，我一直试图弄清楚我是如何会写它的PHP方面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:16:31.960

使用服务字段数组，例如

```
<input name="service[]" />
<input name="service[]" />
<input name="service[]" />
.... 
```

与服务器端相比，您将收到 $_POST['service'] 作为数组，而不是您可以轻松地遍历服务数组的每个元素并对其进行处理

# api - 一些通用的restful api设计问题

> ID：15869458
> 
> 赞同：0
> 
> 时间：2013-04-08T00:19:18.910
> 
> 标签：api, rest

几个通用的设计问题：

1.  在这里举个例子：

[https://developers.google.com/+/api/latest/activities/list#nextPageToken](https://developers.google.com/+/api/latest/activities/list#nextPageToken)

为什么服务器会返回一个令牌来检索下一个分页结果？这不是打破了无国籍的想法吗？

为什么不只传递一个像 LIMIT name=value 这样的 MySQL 作为参数呢？服务器现在必须返回我想的页数......我错过了什么？

2.  我读了很多，但这一篇很有趣：

[REST Web 服务 API 设计](https://stackoverflow.com/questions/2104450/rest-web-services-api-design)

第二个答复提供了以下示例。

```
GET http://api.domain.com/user/<id>
GET http://api.domain.com/users
PUT http://api.domain.com/user/<id>
POST http://api.domain.com/users
DELETE http://api.domain.com/user/<id> 
```

有道理，但为什么有两个复数资源？不能假设如果“用户”被查询并且是 NULL 或者没有提供“全部”是预期的吗？POST也一样？如果复数是为了提高可读性 - 为什么没有用于 DELETE 的“用户”资源？

归根结底，我理解 REST 的意思是......单个资源的表示 - 使用 HTTP 动词（GET、PUT、POST、DELETE）从本质上管理该资源 - 类似于 CRUD。

编辑 | 最后我还想问一下为什么 Google API 在 URI 中发送 API 版本而不是使用 HTTP 标头？有原因吗？为了向后兼容老客户？

注释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T02:21:20.543

> 为什么服务器会返回一个令牌来检索下一个分页结果？这不是打破了无国籍的想法吗？

对分页结果集使用这种机制是完全标准的，并且不会破坏无状态的想法。考虑以下示例。

假设`GET /users?after=<after>`（其中`after`可选）应该以分页方式返回所有用户的列表，例如每页 <= 4。

客户端发出的第一个请求`GET /users`带有如下所示的响应（格式为 JSON）。

```
{
    "users": [ "alex", "bob", "carter", "dan" ]
    "more_after": "dan"
} 
```

在此示例中，该`more_after`属性指定用户列表中可能还有更多用户。因此，客户端随后请求`GET /users?after=dan`并获得第二个响应，如下所示。

```
{
    "users": [ "edward", "frank" ]
} 
```

缺少该`more_after`属性表示这是用户的最后一页。

现在的问题是：`dan`用作页面分隔符的“”标记是否破坏了我们想要的“无状态”属性？显然答案是否定的。服务器不必记住两个`GET`请求之间的任何内容。没有会话的概念。任何需要在两个`GET`请求之间持续存在的状态都只存在于*客户端*——这是重要的区别。让客户端在对服务的调用之间保持状态是完全可以接受的——而且通常是必需的。

# android - 可扩展列表视图复选框正在选中多个框

> ID：15869459
> 
> 赞同：3
> 
> 时间：2013-04-08T00:19:28.257
> 
> 标签：android, expandablelistview, expandablelistadapter, android-checkbox

我有一个带有子复选框的可扩展列表视图。该复选框在 child_helper xml 中定义，ID 为“check1”。由于某种原因，似乎多个复选框链接在一起，而不是每个复选框都是独立的。例如，如果在第一个组下我选择第一个项目，它会选择该组中的每个第三个项目，并且它选择第二个项目的所有其余组，跳过两个并选择下一个项目。

如果我选择第 1 组中的前三个项目，那么它将选择所有组中的所有项目。不知何故，我创建了 3 组复选框，而不是为每个孩子创建一个单独的复选框。我一直在看很多教程，这些教程表明问题已通过自定义适配器解决。我正在使用自定义适配器，但是，我不确定如何使用它的所有功能。

也许更好，更短的问题是我应该如何区分每个子复选框？

谢谢

这是我的听众的代码：

```
expListView.setOnChildClickListener(new OnChildClickListener() {
@Override
public boolean onChildClick(ExpandableListView parent, View v,
    int groupPosition, int childPosition, long id) {
    Log.d( "Enter_Foods", "onChildClick: "+childPosition );
    CheckBox cb = (CheckBox)v.findViewById( R.id.check1 );
    if( cb != null )
        cb.toggle();
                return false;

            }
        });

    } 
```

我认为问题出在我的适配器中被覆盖的方法之一。

```
ExpandableListAdapter foodCategoryExpand = new ExpandableListAdapter() {

@Override
Allitemsenabled()

other override methods...

public Object getChild(int groupPosition, int childPosition) {
    switch (groupPosition) {
    case 0:
    return group1.get(childPosition);
    case 1:
    return group2.get(childPosition);
    case 2:
    return group3.get(childPosition);
    default:
    return null;
    }
}

public View getChildView(int groupPosition, int childPosition, boolean isLastChild,         View convertView, ViewGroup parent) {
        ChildHolder holder;
        if (convertView == null) {
        holder = new ChildHolder();
        LayoutInflater inflator = LayoutInflater.from(Enter_Foods.this);
        convertView = inflator.inflate(R.layout.enter_foods_child_helper,null);
        holder.tvChild = (TextView) convertView.findViewById(R.id.enter_foods_exp_lay_child);
        convertView.setTag(holder);
        } else {
        holder = (ChildHolder) convertView.getTag();
        }

        //switch based on which group (main heading) child is in
        switch (groupPosition) {
        case 0:
        holder.tvChild.setText(group1.get(childPosition));
        break;
        case 1:
        holder.tvChild.setText(group2.get(childPosition));
        break;
        case 2:
        holder.tvChild.setText(group3.get(childPosition));
        break;
        }
        return convertView;
}

//create Group (main heading) view
    public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {
        GroupHolder holder;

        if (convertView == null) {
        holder = new GroupHolder();
        LayoutInflater inflator = LayoutInflater.from(Enter_Foods.this);
        //inflate xml file and then get view from that file
        convertView = inflator.inflate(R.layout.enter_foods_group_helper,null);
        holder.tvGroup = (TextView) convertView.findViewById(R.id.enter_foods_exp_lay_group);
        convertView.setTag(holder);

        } else {
        holder = (GroupHolder) convertView.getTag();
        }
        //this actually gets the text we set in onCreate and sets it to the textView (holder)
        holder.tvGroup.setText(groupTitle.get(groupPosition));
        return convertView; 

}

other override methods 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-19T07:55:53.743

解决此复选框问题。

首先创建一个

```
ArrayList<String> isCheckedStatus = new ArrayList<String>();
CheckBox check_document; 
```

在填充列表视图时，用默认的“false”填充这个数组列表

```
for (int i = 0; i < YOUR LIST ITEM ARRAY.size(); i++) {
                        isCheckedStatus.add("false");
                    } 
```

现在在复选框时单击您的 getChildView 方法

```
@Override
    public View getChildView(final int groupPosition, final int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {if (isCheckedStatus.size() > 0) {
check_document = (CheckBox) convertView.findViewById(R.id.summary_chk);
                if (isCheckedStatus.get(childPosition).equalsIgnoreCase("false")) {
                    ((CheckBox) convertView.findViewById(R.id.summary_chk)).setChecked(false);
                } else if (isCheckedStatus.get(childPosition).equalsIgnoreCase("true")) {
                    ((CheckBox) convertView.findViewById(R.id.summary_chk)).setChecked(true);
                }

check_document.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {

                    System.out.println("AAAA  size" + isCheckedStatus.size());
                    if (((CheckBox) v).isChecked()) {
                        if (isCheckedStatus.size() > 0) {
                            isCheckedStatus.remove(childPosition);
                            isCheckedStatus.add(childPosition, "true");

                        }
                    } else {
                        if (isCheckedStatus.size() > 0) {
                            isCheckedStatus.remove(childPosition);
                            isCheckedStatus.add(childPosition, "false");
                        }

                    }
                }
            });
            } 
```

这将在每次调用 getchildview 方法时更改复选框状态。并解决您的多个复选框选择问题。

希望这项工作。它对我有用...

# ios - 通过应用程序使用的通用 UI 控件

> ID：15869462
> 
> 赞同：-3
> 
> 时间：2013-04-08T00:20:02.943
> 
> 标签：ios, objective-c

我想创建一些通过代码使用的控件，这样我就不会到处重复代码。我的意思是我需要创建自定义控件并在视图控制器中使用它

例子 ：

*   Uitextfield 在触摸时显示日期选择器弹出窗口
*   带有搜索按钮的 uitextfield

任何想法如何做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:48:49.577

如果您计划在您的应用程序中经常使用此类控件，您可以使用类和实例方法创建一个帮助类，这些方法绘制您需要的控件并在您调用该方法时返回它。

```
#import <Foundation/Foundation.h>

@interface CustomControls : NSObject
//declare your methods 

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T00:53:03.207

> 带有搜索按钮的 uitextfield

这是一个很好的例子。我会通过重复加载一个 nib 文件来解决这种问题。每次您这样做时，您都会获得其中内容的新副本。

创建一个包含视图的新接口文件 (.xib)。使视图不可见（背景颜色 = 清晰颜色）。将您的文本字段和搜索按钮放入其中。现在，每次加载 .xib 文件时，您都会得到一个没有人可以看到的视图（.xib 中的视图），其中包含他们*可以*看到的文本字段和搜索按钮。

当我说“加载 .xib 文件”时，我指的是这样的事情：

```
 NSArray* objs = [[NSBundle mainBundle] loadNibNamed:@"MyNib" owner:self options:nil]; 
```

现在`objs[0]`是 nib 中单个顶级 UIView 的副本！`addSubview:`现在您可以使用或其他方式将该 UIView 粘贴到您的界面中。

# java - 严重：WS00034：正在使用相同的端点 URL 部署两个 Web 服务

> ID：15869464
> 
> 赞同：6
> 
> 时间：2013-04-08T00:20:16.190
> 
> 标签：java, web-services, glassfish

当我尝试使用 GlassFish 在 Netbeans 中重新部署时出现此错误。

```
SEVERE: WS00034: Two web services are being deployed with the same endpoint URL 
```

我没有使用两个具有相同端点 URL 的 Web 服务，所以我不知道这个异常来自哪里。

更新：还收到以下错误：

```
SEVERE: Exception while shutting down application container : java.lang.NullPointerException 
```

我只收到此错误，没有任何其他错误或解释原因的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-13T13:04:11.193

我发现问题对我来说是什么。在两个不同的类中，两个方法名称相同。

在一节课上，我有：

```
@WebMethod(operationName = "deleteRoute")
public void deleteRoute(@WebParam(name = "routeId") int routeId) {
} 
```

在另一个我有：

```
@WebMethod(operationName = "deleteUser")
public void deleteRoute(@WebParam(name = "id") int id) {
} 
```

我刚刚将我的第二个**deleteRoute**重命名为**deleteUser**并且它起作用了。但它有点奇怪......我虽然 WS 会忽略实际方法，而只对 operationName 感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-15T23:42:38.880

显然，我从焊接导入中得到了一个模糊的空指针异常，因为我忘记序列化我的拦截器。

# python - 读取 xml 响应并在 python 中打印所需的数据

> ID：15869465
> 
> 赞同：0
> 
> 时间：2013-04-08T00:20:45.780
> 
> 标签：python, utf-8, xml-parsing

我有一个 xml 数据作为我的代码的输出。现在我想从获得的 xml 数据中获取一个元素值。我使用了以下命令

```
data1 = r1.read()
       dom = xml.dom.minidom.parseString(data1)
       conference=dom.getElementsByTagName('totalResults')
       print conference.node value 
```

但我无法获得价值。

我的 xml 代码将是

```
<first:totalresults>100</first:totalresults> 
```

等等

所以现在我想要打印值 100 所以任何人都可以帮助我解决这个问题。自昨晚以来，我一直在为此努力，请任何人帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:25:44.483

我建议您使用`etree`更简单的 XML 解析：

```
from lxml import etree

myFile = open("file.xml", 'r')
tree = etree.parse(myFile)
data = tree.xpath('//ns:totalresults', namespaces={'ns': 'http://api.com'})
print data 
```

# php - 从 PHP 执行 wkhtmltoimage 挂起

> ID：15869466
> 
> 赞同：2
> 
> 时间：2013-04-08T00:20:48.820
> 
> 标签：php, symfony, exec, wkhtmltoimage

从 PHP 执行 wkhtmltoimage 它只是挂起。

```
$command = 'wkhtmltoimage --format "png" "' . $url . '" "' . $output . '"';
exec($command); 
```

它挂起，直到 PHP 超时。

**我可以直接从 CLI 运行相同的命令，它工作正常。**

我也试过：

*   添加`2>&1`和`>nul 2>&1`。
*   使用`shell_exec`和反引号。
*   将 exec 包装在批处理文件中并调用`EXIT /B 0`

我尝试使用 Symfony Process 并得到这个错误：

```
Qt: Untested Windows version 6.2 detected!

This application has requested the Runtime to terminate it in an unusual way.
Please contact the application's support team for more information.
terminate called after throwing an instance of 'std::bad_alloc'
  what():  std::bad_alloc 
```

从 CLI 运行它会产生相同的`Qt: Untested Windows version 6.2 detected!`消息，但仍会生成图像。从 PHP 运行它不会生成图像。

知道如何通过 PHP 使 wkhtmltoimage 工作吗？

# php - [sql]wordpress 自定义 post_type 被覆盖

> ID：15869467
> 
> 赞同：0
> 
> 时间：2013-04-08T00:20:49.350
> 
> 标签：php, wordpress, custom-post-type

我的 wordpress 主题[WPF](https://github.com/MekZii/WPF/)的自定义帖子类型（引用）有问题。github 上的版本在functions.php 中有自定义帖子类型，但我已将其移至插件（wpf 引用）。我还添加了一个自定义小部件。

问题：我的主要查询不包括自定义帖子类型“报价”（希望很好，这是有意的）。可以通过以下方式访问引用帖子类型：[域]/quote/。这可以正常工作，并且在此页面上，小部件也可以正常工作。但是在非引用页面（如主页）上出错了。小部件显示“内容”和 2 个元值。2 个元值未显示在非报价页面上。

我查看了查询，所以我添加`echo '<pre>'; print_r($GLOBALS['wp_query']->request); echo '</pre>';`到我的插件中。

在报价页面上： `SELECT SQL_CALC_FOUND_ROWS wp_posts.ID FROM wp_posts WHERE 1=1 AND wp_posts.post_type = 'quote' AND (wp_posts.post_status = 'publish' OR wp_posts.post_status = 'private') ORDER BY wp_posts.post_date DESC LIMIT 0, 5`

在无报价页面上： `SELECT SQL_CALC_FOUND_ROWS wp_posts.ID FROM wp_posts WHERE 1=1 AND wp_posts.post_type = 'post' AND (wp_posts.post_status = 'publish' OR wp_posts.post_status = 'private') ORDER BY wp_posts.post_date DESC LIMIT 0, 5`

唯一的区别是`wp_posts.post_type = 'quote'`与`wp_posts.post_type = 'post'`.

所以第一个（引用）是正确的。我不明白为什么它会变回在非引用页面上发布。这是我的 WP_Widget-child 中的 widget() 函数：

```
<?php
public function widget($args, $instance) {
    extract($args, EXTR_SKIP);

    $title = empty($instance['title']) ? '' : apply_filters('widget_title', $instance['title']);
    $read_more = $instance['read_more'];

    echo $before_widget;

    if (!empty($title)) echo $before_title . $title . $after_title;;

    $quotes = get_posts(array('numberposts' => 1, 'orderby' => 'rand', 'post_type' => 'quote'));

    if (count($quotes) > 0) {

        foreach($quotes as $post) {
            echo '<pre>'; print_r($quotes); echo '</pre>';
            setup_postdata($post);
            // print the quote
            wpf_quote_print();
        }

        if (!empty($read_more)) {
            printf('<p><a href="%s">%s</a></p>', esc_url(home_url()) . '/quote/', __('Read more quotes', 'wpf_quote'));
        }

    } else {
        echo '<p>' . __('There are no quotes yet', 'wpf_quote') . '</p>';
    }
    echo $after_widget;
}
?> 
```

在 foreach 中调用的函数是：

```
<?php
function wpf_quote_print() {
    // get the meta value's
    $quote_meta = get_post_custom();

    // first check if 'source_is_url' and 'quote_source' are not empty and prints the source as url. Else print source within parentheses.
    if (!empty($quote_meta['source_is_url'][0]) and !empty($quote_meta['quote_source'][0])) {
        $cite = '<cite><a href="' . $quote_meta['quote_source'][0] . '">' . $quote_meta['person'][0] . '</a></cite>';
    } else {
        $cite = '<cite>' . $quote_meta['person'][0];
        if (!empty($quote_meta['quote_source'][0])) $cite .= ' (' . $quote_meta['quote_source'][0] . ')';
        $cite .= '</cite>';
    }
    // print the html
    echo '<blockquote>' . get_the_content() . $cite . '</blockquote>';
}

?> 
```

那么为什么 wp 在我明确告诉它检索带有引号类型的帖子时会更改我的查询？我想如果我解决了这个问题，那么它将解决我现在没有得到任何元值的问题。

如果它更容易，我可以在 github 上分叉我当前的工作（当它修复时，我无论如何都会将它分叉到 WPF）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:01:06.470

我通过使用新的 WP_Query 而不是 get_posts() 解决了这个问题。仍然不知道为什么它没有用 get_posts() 做我想要的。今天晚些时候，我将把洞的东西放在[github WPF](https://github.com/MekZii/WPF/)上。

# uiscrollview - UIScrollView 不显示第一个对象

> ID：15869471
> 
> 赞同：1
> 
> 时间：2013-04-08T00:21:35.837
> 
> 标签：uiscrollview, nsmutablearray

我目前有一个从数组加载图像的滚动视图，这是我的代码：

```
icons = [[NSMutableArray alloc]initWithObjects:[UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"one" ofType:@"png"]], [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"two" ofType:@"png"]], [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"three" ofType:@"png"]],nil];

int numberOfItems = [icons count];
NSLog(@"Number of objects: %i",numberOfItems);

for (int i = 0; i < numberOfItems; i++) {

    if (i <= 3) {

        finalFrame = CGRectMake( i*(80), 12, 80, 80);
    }

    UIButton *iconButton = [UIButton buttonWithType:UIButtonTypeCustom];
    iconButton = [UIButton buttonWithType:UIButtonTypeCustom];
    iconButton.frame = CGRectMake(0, 0, 57, 57);
    iconButton.center = CGPointMake(40, 29);
    iconButton.imageView.contentMode = UIViewContentModeScaleToFill;
    [iconButton addTarget:self action:@selector(selected:) forControlEvents:UIControlEventTouchUpInside];
    iconButton.tag = i;

    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);
    dispatch_async(queue, ^{
        UIImage *icon = [icons objectAtIndex:i];
          dispatch_sync(dispatch_get_main_queue(), ^{
            [iconButton setImage:icon forState:UIControlStateNormal];
        });
    });

    [sub addSubview:iconButton];

    sub = [[UIView alloc] initWithFrame:finalFrame];
    [scrollView addSubview:sub];
} 
```

NSLog 读取 3 个对象，但我的滚动视图只显示其中 2 个，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:54:09.503

我认为它在for循环中应该是这样的

```
(int i = 0; i <= numberOfItems; i++) 
```

# python - 打包 Python 项目时将 zip_safe 设置为 True 有什么好处？

> ID：15869473
> 
> 赞同：66
> 
> 时间：2013-04-08T00:21:51.207
> 
> 标签：python, packaging, setuptools

setuptools 文档仅说明：

> 为了获得最佳性能，最好将 Python 包安装为 zip 文件。然而，并不是所有的包都能够以压缩形式运行，因为它们可能期望能够像普通操作系统文件一样访问源代码或数据文件。因此，setuptools 可以将您的项目安装为 zip 文件或目录，其默认选择由项目的 zip_safe 标志（[参考](http://peak.telecommunity.com/DevCenter/setuptools#setting-the-zip-safe-flag "设置 zip-safe 标志")）确定。

实际上，获得的性能优势是什么？是否值得调查我的项目是否安全，或者收益通常很小？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-05-14T10:46:08.200

Zip 文件占用的磁盘空间更少，这也意味着从磁盘读取它们的速度更快。由于大多数东西都受 I/O 限制，解压缩包的开销可能小于从磁盘读取较大文件的开销。此外，一个单一的、小型的 zip 文件可能会按顺序存储在磁盘上，而一组较小的文件可能会更加分散。在旋转介质上，这还通过减少寻道次数来提高读取性能。因此，您通常会以一些 CPU 时间为代价来优化磁盘使用率，这可能会大大缩短您的`import`加载时间。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-09-19T16:08:55.470

除了已经提到的优点之外，还有几个优点。

读取*单个*大型 .egg 文件（并解压缩）可能比加载多个（可能很多）较小的 .py 文件要快得多，具体取决于它所在的存储介质/文件系统。

某些文件系统具有较大的块大小（例如，1MB），这意味着处理小文件可能会很昂贵。即使您的文件很小（例如 10KB），您在读取它时实际上可能正在从磁盘加载一个 1MB 的块。通常，文件系统将多个小文件组合在一个大块中以减轻这种情况。

在访问文件元数据很慢的文件系统上（有时会发生在共享文件系统，如 NFS）上，访问大量文件也可能非常昂贵。

当然，压缩整个数据包也有帮助，因为这意味着总共需要读取的数据更少。

长话短说：如果您的文件系统更适合少量大文件，这可能很重要。

# mysql - 错误代码：1146。但表确实存在

> ID：15869476
> 
> 赞同：1
> 
> 时间：2013-04-08T00:22:02.233
> 
> 标签：mysql, osx-mountain-lion

在 OSX 10.8.3 上使用 MySql 5.5.20

我正在使用相同的主要版本（5.5）从另一台服务器恢复 mysql 转储 有一堆表 CREATE 和 INSERT 语句，然后在最后定义了一些触发器。

执行该行时：

```
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`localhost`*/ 
/*!50003 `TRIGGER delete_po_items AFTER DELETE ON CRM_PURCHASEORDER   
FOR EACH ROW BEGIN  DELETE FROM CRM_PO_ITEM 
 where CRM_PO_ITEM.PURCHASEORDER_ID = OLD.PURCHASEORDER_ID; END */ 
```

我得到错误：

```
Error Code: 1146\. Table 'crm.CRM_PURCHASEORDER' doesn't exist` 
```

但是 CRM_PURCHASEORDER 表***确实***存在。它甚至有大约 2000 行数据。

由于 IP 问题，我无法发布原始转储，并且我没有任何运气来复制最小的测试用例。

任何提示可能导致这种情况？我在 SO 上看到了其他一些类似的帖子，但没有找到适合我的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-10T00:04:05.563

这个问题是关于 MySql 中表名和列名的大小写敏感问题，最值得注意的是`lower_case_table_names`可以为 MySql 服务器实例设置的具有三个可能值的变量！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-22T14:41:21.187

我们的团队在这个问题上几乎崩溃了。它最终从导致问题的应用程序中复制/粘贴查询。当我们重新输入查询时，它可以正常工作，但是通过信使应用程序共享查询会导致未确定的行为。

# c# - ASP.NET MVC 3 - 多个复选框列表

> ID：15869479
> 
> 赞同：2
> 
> 时间：2013-04-08T00:22:32.160
> 
> 标签：c#, asp.net-mvc, checkbox, checkboxlist

[我从http://www.asp.net/](http://www.asp.net/)阅读教程“为 ASP.NET MVC 应用程序创建实体框架数据模型”，并希望使用第 6 部分中的多个复选框列表 - [http://www.asp.net/ mvc/tutorials/getting-started-with-ef-using-mvc/update-related-data-with-the-entity-framework-in-an-asp-net-mvc-application](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/updating-related-data-with-the-entity-framework-in-an-asp-net-mvc-application)

在本教程中，只能从讲师的编辑页面访问这些复选框选项（将课程分配给每个讲师）。我想在创建页面上呈现这些复选框，但无法调整我在本教程中找到的代码。

这些是代码的一部分，用于显示和使用复选框来进行数据库的新输入。

HttpGet 编辑方法

```
public ActionResult Edit(int id)
{
    Instructor instructor = db.Instructors
        .Include(i => i.OfficeAssignment)
        .Include(i => i.Courses)
        .Where(i => i.InstructorID == id)
        .Single();
    PopulateAssignedCourseData(instructor);
    return View(instructor);
}

private void PopulateAssignedCourseData(Instructor instructor)
{
    var allCourses = db.Courses;
    var instructorCourses = new HashSet<int>(instructor.Courses.Select(c => c.CourseID));
    var viewModel = new List<AssignedCourseData>();
    foreach (var course in allCourses)
    {
        viewModel.Add(new AssignedCourseData
        {
            CourseID = course.CourseID,
            Title = course.Title,
            Assigned = instructorCourses.Contains(course.CourseID)
        });
    }
    ViewBag.Courses = viewModel;
} 
```

HttpPost 编辑方法

```
[HttpPost]
public ActionResult Edit(int id, FormCollection formCollection, string[] selectedCourses)
{
    var instructorToUpdate = db.Instructors
        .Include(i => i.OfficeAssignment)
        .Include(i => i.Courses)
        .Where(i => i.InstructorID == id)
        .Single();
    if (TryUpdateModel(instructorToUpdate, "", null, new string[] { "Courses" }))
    {
        try
        {
            if (String.IsNullOrWhiteSpace(instructorToUpdate.OfficeAssignment.Location))
            {
                instructorToUpdate.OfficeAssignment = null;
            }

            UpdateInstructorCourses(selectedCourses, instructorToUpdate);

            db.Entry(instructorToUpdate).State = EntityState.Modified;
            db.SaveChanges();

            return RedirectToAction("Index");
        }
        catch (DataException)
        {
            //Log the error (add a variable name after DataException)
            ModelState.AddModelError("", "Unable to save changes. Try again, and if the problem persists, see your system administrator.");
       }
    }
    PopulateAssignedCourseData(instructorToUpdate);
    return View(instructorToUpdate);
}

private void UpdateInstructorCourses(string[] selectedCourses, Instructor instructorToUpdate)
{
    if (selectedCourses == null)
    {
        instructorToUpdate.Courses = new List<Course>();
        return;
    }

    var selectedCoursesHS = new HashSet<string>(selectedCourses);
    var instructorCourses = new HashSet<int>
        (instructorToUpdate.Courses.Select(c => c.CourseID));
    foreach (var course in db.Courses)
    {
        if (selectedCoursesHS.Contains(course.CourseID.ToString()))
        {
            if (!instructorCourses.Contains(course.CourseID))
            {
                instructorToUpdate.Courses.Add(course);
            }
        }
        else
        {
            if (instructorCourses.Contains(course.CourseID))
            {
                instructorToUpdate.Courses.Remove(course);
            }
        }
    }
} 
```

和视图

```
<div class="editor-field">
    <table>
        <tr>
            @{
                int cnt = 0;
                List<ContosoUniversity.ViewModels.AssignedCourseData> courses = ViewBag.Courses;

                foreach (var course in courses) {
                    if (cnt++ % 3 == 0) {
                        @:  </tr> <tr> 
                    }
                    @: <td> 
                        <input type="checkbox" 
                               name="selectedCourses" 
                               value="@course.CourseID" 
                               @(Html.Raw(course.Assigned ? "checked=\"checked\"" : "")) /> 
                        @course.CourseID @:  @course.Title
                    @:</td>
                }
                @: </tr>
            }
    </table>
</div> 
```

所以，我想在数据库中插入多个选项（选择选项），但想立即在创建页面上显示这个复选框列表，而不是像教程中那样在编辑页面上显示。如果您有其他与本教程无关的解决方案，我也将不胜感激。我知道我不能使用这些方法，因为它们是用于编辑的方法，所以它们将“id”作为参数，但我希望我可以调整它们以用于我的实体的创建页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T01:36:06.720

考虑使用局部视图来隔离您尝试在两个页面上呈现的控件，您只需要确保您的模型与您的视图的模型一致。

[http://mvc4beginner.com/Tutorial/MVC-Partial-Views.html](http://mvc4beginner.com/Tutorial/MVC-Partial-Views.html)

# css - 具有正确定位弹出的列表不会留在容器内

> ID：15869480
> 
> 赞同：0
> 
> 时间：2013-04-08T00:23:01.983
> 
> 标签：css, css-float, css-position

我有一系列在视觉上形成列表的帖子标题。将鼠标悬停在列表中的一行上时，`<div>`包含帖子内容的 a 在该行的右边缘变得可见，其行为类似于弹出菜单。此弹出按钮`<div>`的高度大于行（在大多数情况下）。它的高度也是可变的，所以它是不可预测的。

[见这里](http://templesmc.staging.wpengine.com/tutv/schedule/?date=2012-02-01)。滚动到底部。

因为此弹出`<div>`按钮绝对位于其父项的右侧，所以它实现了所需的弹出按钮效果。

但是如果你滚动到列表的底部，你可以看到最后一项延伸到`#schedule-section-container`'s 边框的底部边缘以下。我想以最干净的方式纠正这个问题。

我知道这是因为定位。但是有没有一种方法可以在不猜测 a 的情况下实现相同的弹出效果`margin-bottom`？我想使用浮动，但我不知道如何让列表在弹出时保持其较短的高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T00:36:23.533

仅使用 CSS 这可能有点棘手，但我认为您正在寻找的是：

```
.hentry:last-child > .entry-content { bottom: 0; } 
```

这会将最后一个孩子定位到底部而不是顶部，从而在不超出容器边界的情况下提供所需的效果。由于最后几个实际上超出了界限，您还可以尝试 :nth-last-child 从末尾开始计数，如下所示：

```
.hentry:nth-last-child(1) > .entry-content { bottom: 0; } /* This is last child */
.hentry:nth-last-child(2) > .entry-content { bottom: 0; } /* Second to last */
.hentry:nth-last-child(3) > .entry-content { bottom: 0; } /* Third to last, etc */ 
```

由于 Wordpress 在一些地方使用 .hentry ，因此可能需要在开头添加一些更具体的内容以将其限制为仅此页面，但这应该会给您一个很好的起点。此外，如果需要旧版 IE 支持，您可能需要考虑使用[Selectivzr](http://selectivizr.com)

# httpresponse - HTTP 405 状态响应是否允许有正文？

> ID：15869481
> 
> 赞同：13
> 
> 时间：2013-04-08T00:23:09.377
> 
> 标签：httpresponse, http-status-codes

我正在构建一个 RESTful API。当客户端在不支持它的资源上使用不受支持的方法（例如 POST）时，我将返回一个`405`带有`Allow`列出允许方法的标头：

```
Status Code: 405 Method Not Allowed
Allow: GET, HEAD, OPTIONS
Connection: keep-alive
Date: Mon, 08 Apr 2013 00:19:26 GMT
Transfer-Encoding: chunked 
```

是否允许有正文（以提供错误消息）用于`405`响应？

从[w3c 的网站](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)上看，是否允许正文进行`405`响应尚不清楚。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-08T00:58:50.433

[HTTP/1.1 协议规范在“消息长度”部分中声明](https://www.rfc-editor.org/rfc/rfc2616#section-4.4)：

> 任何“不得”包含消息体的响应消息（1xx、204 和 304 响应以及对 HEAD 请求的任何响应）总是由头字段之后的第一个空行终止，无论实体头字段如何出现在消息中。

只要 HTTP 方法不是，消息体对于所有 4xx-5xx 代码都是可选的`HEAD`。

# c# - 来自文本框字符串问题的正则表达式

> ID：15869482
> 
> 赞同：0
> 
> 时间：2013-04-08T00:23:43.003
> 
> 标签：c#, regex

我有一个在 C# 中使用的正则表达式，如果我这样做，它就可以工作：

```
Regex prompt = new Regex((@"\[.*@.*\][\$|\#]")); 
```

但是，当我将正则表达式放入文本框中时，即我将以下内容`(@"\[.*@.*\][\$|\#]")` 放入文本框中，包括括号，然后我这样做：

```
Regex prompt = new Regex(textBox1.Text);  // <----- That is not working. 
```

我也试过：

```
Regex prompt = new Regex(@textBox1.Text); // <----- That is not working also 
```

所以想知道我是否可能有一些我需要逃避的角色，或者我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T00:26:22.807

不要包括括号。您应该`[.@.][\$|#]`在文本框中输入。然后在代码中执行：

```
Regex prompt = new Regex(textBox1.Text) 
```

# php - 将 XML_Query2XML 输出保存到文件？

> ID：15869491
> 
> 赞同：2
> 
> 时间：2013-04-08T00:25:25.683
> 
> 标签：php, sql, xml, pear

我有一个使用[XML_Query2XML](https://pear.php.net/package/XML_Query2XML/) PEAR 包的简短脚本。它从 SQL 数据库中提取数据并输出到浏览器。出现在浏览器中的 XML 正是我想要保存到文件中的内容，但是任何尝试使用`ob_get_contents`或我熟悉的任何其他方法都会导致空白输出文件。代码如下：

```
<?php

    set_include_path('/Library/WebServer/Documents/PEAR/');
    include 'XML/Query2XML.php';
    include 'MDB2.php';

    try {
        // initialize Query2XML object
        $q2x = XML_Query2XML::factory(MDB2::factory('mysql://root:pass@site.com/site'));

        $sql = "SELECT * FROM Products";
        $xml = $q2x->getFlatXML($sql);

        header('Content-Type: text/xml');
        $xml->formatOutput = true;
        echo $xml->saveXML();
    } catch (Exception $e) {
        echo $e->getMessage();
    }

    ?> 
```

我想知道使用此插件和输出类型（XML）保存文件的一般过程是什么。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T07:10:47.087

该`$xml`变量是一个[`DOMDocument`](http://php.net/DOMDocument)对象，这意味着您可以使用它的方法将其保存到文件中，例如[`save`](http://www.php.net/manual/en/domdocument.save.php)：

```
$xml->save('foo.xml'); 
```

# python - Python：如何获得一组元组的平均值？

> ID：15869492
> 
> 赞同：1
> 
> 时间：2013-04-08T00:25:34.130
> 
> 标签：python

我有一个问题，我试图解决这个问题。

我有一个产生元组的函数。我试图用这种方法将它们存储在一个数组中

```
while(loops til exhausted)
    count = 0
    set_of_tuples[count] = function(n,n,n)
    count = count + 1 
```

显然python不会以这种方式存储变量。我怎样才能将一组元组存储在一个变量中，然后将它们平均出来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:29:49.553

您可以通过几种方式存储它们。这是一个：

```
set_of_tuples = []
while `<loop-condition>`:
    set_of_tuples.append(function(n, n, n)) 
```

如果要按元素平均结果，可以：

```
average = tuple(sum(x[i] for x in set_of_tuples) / len(set_of_tuples)
                for i in range(len(set_of_tuples[0]))) 
```

如果这是数字数据，您可能想改用 Numpy。如果您使用的是 Numpy 数组，您只需：

```
average = numpy.average(arr, axis=0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T00:50:02.827

嗯，你的伪代码根本不是 Python。你可能想看看更像：

```
## count = 0
set_of_tuples = list()
while not exhausted():
    set_of_tuples.append(function(n,n,n))
    ## count += 1
count = len(set_of_tuples) 
```

然而，这里的计数是多余的，因为如果我们愿意，我们可以在循环之后*len(set_of_tuples)*。“set_of_tuples”这个名字也是一个很糟糕的选择。特别是考虑到它不是一个集合。

# java - isConnected 和 isClosed 之间的区别

> ID：15869495
> 
> 赞同：2
> 
> 时间：2013-04-08T00:26:04.793
> 
> 标签：java, sockets

我会假设调用`isConnected()`套接字会告诉我是否连接到另一端。

> 返回： 如果套接字成功连接到服务器，则为 true

但是在检查然后调用`flush()`套接字之后我得到了

> java.net.SocketException：管道损坏

与有什么`isConnected`不同`isClosed`，每个人的真实行为是什么？

如果没有向流中写入任何内容或创建新连接，我如何判断对方是否正式关闭？有没有办法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T00:45:06.253

> 我会假设调用`isConnected()`套接字会告诉我是否连接到另一端。

错误的。它告诉你是否*曾经*连接过这个 Socket。它不会告诉您连接的状态。

> 返回： 如果套接字成功连接到服务器，则为 true

请注意，它没有说*“当前已连接”*到服务器。

> 有什么`isConnected`不同`isClosed,`，每个人的真实行为是什么？

两者的真正行为是它们告诉您*您*对*套接字*做了什么，而不是连接的状态。

> 如果没有向流中写入任何内容或创建新连接，我如何判断对方是否正式关闭？有没有办法？

不，没有。如果对等点正常关闭，读取将返回 EOS 指示（`read()`返回 -1，`readLine()`返回 null，`readXXX()`对于任何其他 XXX 抛出`EOFException`）。根据您的平台，写入将引发`IOException`“连接重置”或“管道损坏”。TCP 不支持“拨号音”性质的任何内容，因此如果没有挂起的写入，则没有可查询的当前连接状态。

# ruby-on-rails - rails 3.2.11 的功能测试

> ID：15869500
> 
> 赞同：1
> 
> 时间：2013-04-08T00:26:23.660
> 
> 标签：ruby-on-rails, testing

我只是运行在 Rails 中创建脚手架时构建的功能测试。但是，当我尝试 rake 测试时，所有测试都会弹出以下错误（即使是像 get index 这样的错误）

**编辑：**似乎测试试图插入用户数据库而不是注释。知道为什么会这样吗？

```
test_should_update_note(NotesControllerTest):
ActiveRecord::StatementInvalid: SQLite3::ConstraintException: constraint failed: INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2013-04-08 00:16:46', '2013-04-08 00:16:46', 298486374)
/Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/sqlite3-1.3.7/lib/sqlite3/statement.rb:108:in `step'
/Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/sqlite3-1.3.7/lib/sqlite3/statement.rb:108:in `block in each'
/Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/sqlite3-1.3.7/lib/sqlite3/statement.rb:107:in `loop'
/Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/sqlite3-1.3.7/lib/sqlite3/statement.rb:107:in `each'
/Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/sqlite3-1.3.7/lib/sqlite3/database.rb:149:in `map'
/Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/sqlite3-1.3.7/lib/sqlite3/database.rb:149:in `block in execute'
/Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/sqlite3-1.3.7/lib/sqlite3/database.rb:95:in `prepare'
/Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/sqlite3-1.3.7/lib/sqlite3/database.rb:134:in `execute'
/Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/connection_adapters/sqlite_adapter.rb:278:in `block in execute'
/Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract_adapter.rb:280:in `block in log'
/Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.11/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract_adapter.rb:275:in `log'
/Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/connection_adapters/sqlite_adapter.rb:278:in `execute'
/Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/database_statements.rb:277:in `insert_fixture'
/Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/fixtures.rb:502:in `block (5 levels) in create_fixtures'
/Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/fixtures.rb:501:in `each'
/Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/fixtures.rb:501:in `block (4 levels) in create_fixtures'
/Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/fixtures.rb:500:in `each'
/Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/fixtures.rb:500:in `block (3 levels) in create_fixtures'
/Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/fixtures.rb:492:in `each'
/Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/fixtures.rb:492:in `block (2 levels) in create_fixtures'
/Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/fixtures.rb:491:in `block in create_fixtures'
/Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract_adapter.rb:168:in `disable_referential_integrity'
/Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/fixtures.rb:476:in `create_fixtures'
/Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/fixtures.rb:895:in `load_fixtures'
/Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/fixtures.rb:849:in `setup_fixtures'
/Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:429:in `_run__412855329189462788__setup__2162806003840848912__callbacks'
/Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:385:in `_run_setup_callbacks'
/Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/vicli/.rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.11/lib/active_support/testing/setup_and_teardown.rb:35:in `run' 
```

我不明白为什么约束会失败，因为当我手动测试一切正常时，这些值确实存储在数据库中

# operating-system - 操作系统如何知道将鼠标事件发送到哪个应用程序？

> ID：15869502
> 
> 赞同：-3
> 
> 时间：2013-04-08T00:26:56.910
> 
> 标签：operating-system, mouseevent

因为可能在不同的位置打开了很多窗户。有些窗口是活动的，有些则不是，操作系统如何根据应用程序窗口的位置委托鼠标事件？我有点失落。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T00:32:19.173

系统调用是由软件对操作系统进行的，因此操作系统返回对软件的响应而不是鼠标，如果窗口来自同一软件，它仍然适用。软件在后台以表格形式进行管理。

```
id, path, request
1, c:\word.exe, 2
2, c:\word.exe, 3 
```

所以基本上操作系统知道请求是从哪里发出的。“操作系统概念要点”涵盖了此类问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T00:49:57.957

操作系统（或作为其一部分的专用程序）跟踪窗口（它们的位置、大小、其他窗口的深度、“活动”状态）和光标位置，并可以确定哪个窗口位于窗口的正下方鼠标指针。这就是全部。

# css - CSS：悬停在一个元素上，影响另一个？

> ID：15869505
> 
> 赞同：3
> 
> 时间：2013-04-08T00:27:12.420
> 
> 标签：css, hover

请在此处查看页面：

```
http://176.32.230.17/printingcrazy.com/branding-services 
```

我正在尝试实现悬停效果，因此如果您将鼠标悬停在列出的任何服务上，则相关图像将具有例如边框。

如果您将鼠标悬停在图像上，相关文本将改变颜色。

左侧的元素与右侧的元素位于不同的父级中。

是的，我见过[CSS：悬停一个元素，影响多个元素？](https://stackoverflow.com/questions/1462360/css-hover-one-element-effect-for-multiple-elements) 并尝试了一切，但无法使其适用于我的情况。

任何帮助将不胜感激！

```
<div class="servicepage">

<div class="serviceleft">
<img src="/digitalprint.jpg">
<img src="/dyesub.jpg">
</div>

<div class="serviceright">
<ul>
<li>
<h3>Digital Print</h3>
</li>
<li>
<h3>Dye Sublimation</h3>
</li>
</ul>
</div>

</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T01:23:34.110

这是一个简化的例子。希望它可以帮助您入门。

基本上我们是在鼠标悬停在`div`foo 上时设置回调函数。在这些函数中，我们正在更改 的 css 属性`img`，在这种情况下，添加`border`和删除它。

[http://jsfiddle.net/btevfik/YC2tg/](http://jsfiddle.net/btevfik/YC2tg/)

查询

```
$(document).ready(function () {
    $(".foo").hover(function () {
        $(".bar").css("border", "5px red solid");
    });
    $(".foo").mouseleave(function () {
        $(".bar").css("border", "none");
    });
}); 
```

HTML

```
<div class="foo">HOVER HERE</div>
<img class="bar" src="http://placekitten.com/100/100" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T01:31:39.447

你可以这样做。

HTML：

```
<div class="servicepage">
    <div class="serviceleft">
        <img class="digitalprint" src="/digitalprint.jpg">
        <img class="dyesub" src="/dyesub.jpg">
    </div>
    <div class="serviceright">
        <ul>
            <li class="digitalprint">
                 <h3>Digital Print</h3>
            </li>
            <li class="dyesub">
                 <h3>Dye Sublimation</h3>
            </li>
        </ul>
    </div>
</div> 
```

查询：

```
$(".serviceleft > img").hover(

function () {
    var imgclass = $(this).attr("class");
    $("li." + imgclass).css("color", "red");
},

function () {
    var imgclass = $(this).attr("class");
    $("li." + imgclass).css("color", "black");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T02:07:29.327

我已经尝试在网站上为您的标记重现代码，并且这个 jQuery 代码应该可以工作，只需将其复制/粘贴到您的网站上即可。

```
<script type="text/javascript">
    $(document).ready(function(){
        $(".serviceright h3").mouseenter(function(){
            var indexH3 = $(this).parent().index();
            $(".serviceleft .spotlight").eq(indexH3).addClass("border");
        });
        $(".serviceright h3").mouseleave(function(){
            $(".serviceleft .spotlight").removeClass("border");
        });

        $(".serviceleft .spotlight").mouseenter(function(){
            var indexA = $(this).index();
            $(".serviceright h3").eq(indexA).addClass("redtext");
        });
        $(".serviceleft .spotlight").mouseleave(function(){
            $(".serviceright h3").removeClass("redtext");
        });
    });
</script> 
```

您必须为悬停效果添加一些 CSS 类，例如

```
.border {
    border: 1px solid red;
}

.redtext {
    color: red;
} 
```

设置悬停效果的属性，如果您需要重命名这些类，也可以在 jQuery 代码中更改这些名称。

这是**[演示](http://jsfiddle.net/RVDhC/)**

# angularjs - 可以在选项元素中包含 ng-include 吗？

> ID：15869506
> 
> 赞同：6
> 
> 时间：2013-04-08T00:27:18.450
> 
> 标签：angularjs

我正在尝试为选择元素动态更改选项模板。这是我想要做的，我有选择选项，这将允许用户在选择学生时选择他们想要查看的信息类型。如果用户选择“基本”，那么我只显示学生类的 Id 和 Name 属性。如果用户选择“详细信息”，那么我会显示 Id、Name 和 Grade。当前的实现是

```
<!DOCTYPE html>
<html ng-app>
<head>
    <title></title>
    <script type="text/ng-template" id="Basic">
        <select ng-model="selectedItem">
        <option ng-repeat="student in Students">
           {{student.Id}} - {{student.Name}}
        </option>
        </select>
    </script>
     <script type="text/ng-template" id="Detail">
        <select ng-model="selectedItem">
        <option ng-repeat="student in Students">
           {{student.Id}} - {{student.Name}} -- {{student.Grade}}
        </option>
        </select>
    </script>
</head>
    <body>
        <div ng-controller="TemplateCtrl">
            Details Level: <select ng-model="detailLevel" ng-options="c.Id for c in Details"></select>
            <div ng-include="detailLevel.Id"></div>
        </div>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.1/angular.min.js"></script>
        <script src="Scripts/TemplateCtrl.js"></script>
    </body>
</html> 
```

如您所见，我在 ng-template 'Basic' 和 'Detail' 中都复制了代码。最初我正在尝试类似以下的事情

```
<script type="text/ng-template" id="Basic">
           {{student.Id}} - {{student.Name}}
    </script>
<script type="text/ng-template" id="Detail">
           {{student.Id}} - {{student.Name}} -- {{student.Grade}}
    </script> 
```

但是当我尝试在侧标签中执行 ng-include 时，浏览器不喜欢。我可能在这里遗漏了一些简单的东西，在这里创建重复代码气味我做错了什么？谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T13:11:38.323

也许您可以尝试使用[ng-switch 指令](http://docs.angularjs.org/api/ng.directive%3angSwitch)，而不是模板。然后以下应该工作：

```
<!DOCTYPE html>
<html ng-app>
<head>
    <title></title>
</head>
    <body>
        <div ng-controller="TemplateCtrl">
            Details Level: <select ng-model="detailLevel" ng-options="c.Id for c in Details"></select>
            <div ng-switch="detailLevel">
                <div ng-switch-when="Basic">
                    <select ng-model="selectedItem">
                        <option ng-repeat="student in Students">{{student.Id}} - {{student.Name}}</option>
                    </select>
                </div>
                <div ng-switch-when="Detail">
                    <select ng-model="selectedItem">
                        <option ng-repeat="student in Students">{{student.Id}} - {{student.Name}} -- {{student.Grade}}</option>
                    </select>
                </div>
            </div>
        </div>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.1/angular.min.js"></script>
        <script src="Scripts/TemplateCtrl.js"></script>
    </body>
</html> 
```

# javascript - 效果完成后运行函数

> ID：15869507
> 
> 赞同：1
> 
> 时间：2013-04-08T00:27:19.470
> 
> 标签：javascript, jquery

效果完成后如何运行该功能，例如在一定时间后延迟运行指定的功能？我尝试设置超时，但它对我不起作用。

这是我的代码

```
<script>
    $("#findtext").keyup(function (e) {
        var code = (e.keyCode ? e.keyCode : e.which);
        if (code == 13)
        {
            explodeEffect();

        }

            $.ajax({
                url: 'resultFindFriend.php',
                type: 'post',
                async: false,
                data: { dataFriend: $(this).val() },
                success: function (data) {
                    $('.outputfindfriend').html(data);
                }
            },setTimeout(150));

    });

    function explodeEffect() {
        $("#explodesearchresult").toggle("explode");
        setTimeout(1000);
        window.location("http://localhost/index.html");
    };

    $("#buttonfriend").click(function () {
        explodeEffect();
        return false;

    });

</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T00:30:55.877

这对于 jQuery 是可行的[`.toggle()`](http://api.jquery.com/toggle/)，只需添加一个函数作为第二个参数。

试试这个：

```
function explodeEffect() {
  $("#explodesearchresult").toggle(400, function() {
    setTimeout(function() {
      window.location.href = "http://localhost/index.html";
    }, 1000);
  });
} 
```

这将在爆炸效果完成**后**1 秒重定向页面。

# context-free-grammar - CFG 示例：可以用 2 个不同的赋值替换双变量吗？

> ID：15869508
> 
> 赞同：0
> 
> 时间：2013-04-08T00:27:38.210
> 
> 标签：context-free-grammar

假设我有一个上下文无关语法，例如：S-> SaS | 乙 | Λ... S 可以同时被 2 个不同的 S“替换”...IE 我理解“bab”和“bababab”是这种语言中的字符串...“ba”是这种语言中可接受的字符串（ SaS -> baΛ -> ba)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:37:38.463

是的。上下文无关语法中的每个变量都独立于所有其他变量（即“上下文无关”部分），因此它们可以扩展为不同的字符串。`ba`在您的情况下，由于您指定的原因，它确实是语法语言。

希望这可以帮助！

# php - Wordpress - WPDB 查询

> ID：15869513
> 
> 赞同：2
> 
> 时间：2013-04-08T00:28:15.720
> 
> 标签：php, wordpress, pdo

在 wordpress 中，我正在查询我手动添加的自定义行和列的默认表。我正在全球化`$wpdb`（Wordpress 数据库功能），它适用于一半的代码。

例如脚本的第一部分是这样的（只显示代码的相关部分）：

```
 class Test {

    public function getP($param){

    global $wpdb;
    $q = $wpdb->get_results("SELECT * FROM tbl WHERE " . $param['1']." = '" . $param['2'] . "'");
    }
    } 
```

因此，该查询在运行`$wpdb`时有效，并且我能够打印返回的结果。

但是，再往下，我需要根据结果运行另一个查询，所以`$wpdb->get_results`我需要使用`$wpdb->query`.

示例（同样，仅相关）：

```
 global $wpdb;

    $stmt = $this->wpdb->query($q);

    if($param['type'] == 'x'){

    $data = $stmt->fetchAll();

    }else{

$data = $stmt->fetch();

    }

return $data; 
```

这不起作用，它似乎不在对象范围内并提供以下错误：

```
 Fatal error: Call to a member function query() on a non-object 
```

关于为什么初始查询有效但第二个查询导致错误的任何见解，即使数据库连接有效并且位于对象内部？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T07:03:58.393

从文档：

> 该函数返回一个与受影响/选择的行数相对应的整数。如果存在 MySQL 错误，该函数将返回 FALSE。

从[这里](http://codex.wordpress.org/Class_Reference/wpdb#Run_Any_Query_on_the_Database)

该`$wpdb->query()`方法不返回结果，它返回受影响的行数。例如，如果您想使用结果`$wpdb->get_results()`，但其他方法之一可能更适合您的需求。

这就是你得到 的`FatalError`原因，因为整数不是对象。

看看[这里](http://codex.wordpress.org/Class_Reference/wpdb)的`$wpdb`参考资料，每种方法都解释得很好。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T07:45:02.240

在您的示例中，您尝试`$wpdb->query`针对 a`stdClass array()`或结果运行 a，而不是 SQL 查询。

`$wpdb->get_results`将返回一个对象/行数组，而不是您希望的另一个可查询的 SQL 语句。您最终可以编写一个控制循环来生成新的 SQL 语句。

# google-apps-script - 自定义函数权限

> ID：15869516
> 
> 赞同：0
> 
> 时间：2013-04-08T00:29:04.250
> 
> 标签：google-apps-script, google-sheets, custom-function

我正在尝试为 Google 表格编写一个自定义函数，但我遇到了左右权限错误。只是为了让事情开始，我在左上角的单元格中输入了这个：`"=testFunction()"`. 在函数中，我尝试根据用户突出显示并选择一行，结果遇到了以下问题：

1.  我没有调用该`Session.getActiveUser()`方法的权限，所以我不能根据访问文档的用户做任何事情。此外，该`getUrl`函数不会返回实际的 URL，因此在末尾添加“#Jeff”之类的内容是行不通的。注意：我最终确实解决了这个问题，因为令我惊讶的是，该`Spreadsheet.getViewers`功能有效。
2.  我没有运行该`Spreadsheet.setActiveSelection()`功能的权限，所以我无法选择一行。
3.  如果我从单元格 A 运行该函数，我无权更改单元格 B 的背景。这意味着我需要将损坏的突出显示功能放在每个要更改颜色的单元格中。

查找如何做某事，对其进行测试，然后看到权限错误四分之三弹出，这令人沮丧。

考虑到我是此文档的所有者，有什么方法可以更改我有权执行的操作吗？

如果没有，是否有关于我可以运行哪些功能的文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-16T08:08:41.883

不允许自定义函数访问用户特定的服务

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-09T02:48:33.757

我注意到的是来自单元格的自定义函数不能执行需要身份验证的方法，但是如果您让脚本被触发，您可以让您的脚本运行。

示例：我编写了与我的工作表相关联的脚本函数。

```
function getTheUser() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = ss.getSheets()[0];
  sheet.getRange('a1').setValue(Session.getActiveUser());
} 
```

如果我把它放在一个牢房里

```
=getTheUser() 
```

单元格被标记为*“错误：您无权调用 getActiveUser（第 9 行，文件“代码”）”*

但是，如果我转到项目的脚本并为该函数创建触发器，则只要满足触发器条件，该函数就会运行正常。

我的计划是使用触发器来运行需要身份验证的功能。

# php - Comet 和 PHP 的实时数据更新？

> ID：15869519
> 
> 赞同：4
> 
> 时间：2013-04-08T00:29:13.080
> 
> 标签：php, push-notification, comet

我希望在我的社交网站上实现实时通知更新。我对彗星做了一些研究，我真的很着迷。

据我了解，这是彗星服务器上发生的基本流程。

```
Webpage: 
Sends an ajax request to server when the document is ready. 

Server:
Queries the database every x amount of seconds and returns a json string containing results if any are found.

Webpage:
Receives the result of the json string from the server and sends out another ajax request  to do the above process again. 
```

通过了解 Comet 的工作流程，我编写了一些 PHP 和 Javascript 代码。

JavaScript 代码使用 jQuery 库并将 ajax 请求发送到服务器，并将当前时间以 unix 时间戳格式作为 GET 参数。

```
 $(document).ready(function(){
       var timestamp = Math.round(new Date().getTime() / 1000);

        function comet2(){
            $.ajax({
                type : 'GET',
                url  : 'comet.activities.php?timestamp=' + timestamp,
                async : true,
                cache : false,

                success : function(data) {
                    alert("current timestamp "+timestamp)

                    var json = JSON.parse(data);
                    if(json !== null){
                        alert(data);
                    }

                    timestamp  = json[0].timestamp;
                    setTimeout('comet2()', 1000);

                },
                error : function(XMLHttpRequest, textstatus, error) { 
                    setTimeout('comet2()', 15000);
                }       
            });
        }

        //call the comet function because the page has loaded.
        comet2();

    }); 
```

PHP 代码将通过使用时间戳参数（在本例中为查询中的 unix 时间戳）在数据库中搜索新行来查询新活动。对于此示例，我将结果数量限制为 1。

```
<?php 
    set_time_limit(0);
    include("models/config.php");
    global $mysqli,$db_table_prefix;

    $last = isset($_GET['timestamp']) ? $_GET['timestamp'] : 0;
    $results = null;
    $flag=true;

    $stmt = $mysqli->prepare("SELECT id,timestamp FROM uc_user_activity WHERE timestamp > ? ORDER BY timestamp DESC LIMIT 0,1");
    $stmt->bind_param("i", $last);
    $stmt->bind_result($id,$timestamp);

    while($flag){
        $stmt -> execute();    

        while ($row = $stmt->fetch()){
            $flag = false;
            $results[] = array(
                "id" => $id,       
                "timestamp" => $timestamp  
            );
        }

        $stmt -> close();  

        usleep(100000);
        clearstatcache();
    }

    echo json_encode($results);    

?> 
```

上面的代码实际上并没有“工作”问题是，如果用户发布新评论，当彗星脚本运行时，它将无法添加到数据库中。这意味着彗星脚本将永远不会返回任何 json 结果，因为永远不会满足 sql 查询中的语句（没有使用更新的时间戳添加新活动）。我用于发布新评论的 ajax 代码 100% 正常工作，所以我知道这不是问题所在。简单地说“什么都没有发生”，即没有任何（没有错误）被警告或输出到浏览器控制台。

编辑号 3：我很难解释“什么都没有发生”的意思，所以我上传了一张图片，显示当从 jquery 调用彗星脚本时数据库插入失败（注意文本框是如何被禁用的，而评论是通过ajax发布的）。

![在此处输入图像描述](https://i.stack.imgur.com/NqGsS.png)

我能做些什么呢？我花了几个小时在互联网上搜索试图解决这个问题/找到一个类似的工作示例但无济于事。

如果我将 PHP 代码中的查询更改为：

```
$stmt = $mysqli->prepare("SELECT id,timestamp FROM uc_user_activity WHERE timestamp **<** ? ORDER BY timestamp DESC LIMIT 0,1"); 
```

代替：

```
 $stmt = $mysqli->prepare("SELECT id,timestamp FROM uc_user_activity WHERE timestamp > ? ORDER BY timestamp DESC LIMIT 0,1"); 
```

结果会立即通知浏览器窗口，可以再次发布评论并再次调用脚本并显示新帖子。这表明我的代码毕竟“工作正常”，而且看起来查询导致了问题......

![在此处输入图像描述](https://i.stack.imgur.com/FgD04.png)

谁能看到这里发生了什么？我现在已经编辑了这个问题 7 次，任何指导都会很棒，因为我一无所获。

只是为了避免关闭，这是我的问题，以总结我上面讨论的内容：

> 有没有更好的方法来实现彗星服务器？我不是最有经验的人，但我真的很想学习如何做到这一点。似乎 StackOverflow 具有此功能并且运行良好 - 他们是如何做到的？

我不可能写出比这更详细的帖子了，我真的很感谢你们这些很棒的人提供的一些指导。关于为什么我的代码“不起作用”的建议或任何解释如何实现它的教程的链接将是惊人的！提前感谢并为这个怪物的问题和所有的编辑道歉！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:57:15.120

我的预感是您传递的时间戳值不会返回任何结果。您可以通过 Javascript 获取当前时间。查询查询此时间戳之后的所有帖子。

您可以尝试打印查询并手动运行相同的查询以确保它从数据库中检索数据吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-17T07:09:07.483

因此，这里有关于 Comet 与 PHP 的最佳可用教程。 [http://www.zeitoun.net/articles/comet_and_php/start](http://www.zeitoun.net/articles/comet_and_php/start)

喜欢它，如果它有帮助:)

对于那些想要在上面与 jQuery 的链接中使用简单聊天解决方案的人来说，这里是解决方案。

```
<script type="text/javascript">
    var Comet = {};
    Comet.jquery = {
        timestamp: 0,
        url: './backend.php',
        noerror: true,
        initialize: function () {
        },
        connect: function ()
        {
            this.ajax = $.ajax({
                type: "get",
                url: this.url,
                data: {timestamp: this.timestamp},
                success: function (data) {
                    // handle the server response
                    var response = JSON.parse(data);
                    console.log(response);
                    //alert(response.timestamp);
                    Comet.jquery.timestamp = response.timestamp;
                    Comet.jquery.handleResponse(response);
                    Comet.jquery.noerror = true;
                },
                complete: function (data) {
                    // send a new ajax request when this request is finished
                    if (!Comet.jquery.noerror) {
                        // if a connection problem occurs, try to reconnect each 5 seconds
                        setTimeout(function () {
                            Comet.jquery.connect()
                        }, 5000);
                    }
                    else {
                        Comet.jquery.connect();
                    }
                    Comet.jquery.noerror = false;
                }
            });
        },
        disconnect: function ()
        {
        },
        handleResponse: function (response)
        {
            $('#content').append('<div>' + response.msg + '</div>');
        },
        doRequest: function (request)
        {
            $.ajax({
                type: "get",
                url: this.url,
                data: {'msg': request}
            });
        }
    }
</script> 
```

# javascript - Adobe LiveCycle 从文本字段值填充下拉列表

> ID：15869520
> 
> 赞同：0
> 
> 时间：2013-04-08T00:29:16.140
> 
> 标签：javascript, adobe, itext, livecycle

有谁知道如何使用逗号分隔的数据从文本字段中填充下拉列表？（使用 javascript 或 itext java） iText 声称他们的 apt 无法做到这一点。我见过人们谈论使用 javascript，但他们没有告诉你如何去做。

我知道这可以通过 Web 服务和外部 XML 文件来完成，但客户不希望允许这些选项

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:11:10.087

将此代码放在下拉列表初始化事件中。请记住用正确的名称替换 TextField1。

```
var arr = TextField1.rawValue.split(",");
for (var i=0;i<arr.length;i++){
    this.addItem(arr[i]);
} 
```

# android - Android ListView 乱码视图

> ID：15869521
> 
> 赞同：3
> 
> 时间：2013-04-08T00:29:17.183
> 
> 标签：android, android-listview

我创建了一个简单的 ListView 示例，当我滚动时，视图变得乱码。它保留项目的第一页，并简单地将其他项目显示在顶部。它在两个不同的设备和模拟器上做同样的事情。

这是我的布局：

```
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/listview"
android:layout_width="wrap_content"
android:layout_height="wrap_content" /> 
```

这是我的活动：

```
public class ListViewExampleActivity extends Activity
{
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    this.setContentView(layout.list_ex_view1);
    String[] values = new String[]{"Android", "iPhone", "WindowsMobile", "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X", "Linux", "OS/2", "Ubuntu", "Windows7", "Max OS X", "Linux", "OS/2", "Ubuntu", "Windows7", "Max OS X", "Linux", "OS/2", "Android", "iPhone", "WindowsMobile"};
    ListView listview = (ListView) this.findViewById(R.id.listview);
    listview.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, values));
} 
```

}

你可以在这里看到它的样子：

[http://i.imgur.com/KYzILGd.png](http://i.imgur.com/KYzILGd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:04:10.070

我发现了问题。我有一个共同的主题，我用 android:theme="@style/myTheme" 在清单中分配给我的所有应用程序。似乎问题是将@null 分配给 android:windowBackground 属性。

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<style name="myTheme">
    <item name="android:windowBackground">@null</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowFullscreen">true</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowActionBar">false</item>
</style> 
```

# msxml - 使用 msxml2.xmlhttp 从网页中读取表格

> ID：15869523
> 
> 赞同：1
> 
> 时间：2013-04-08T00:29:20.120
> 
> 标签：msxml

我尝试在我的 VB 程序中使用网络浏览器来加载网页和网页上的表格。它的工作原理非常缓慢，而且很多时候它会冻结。我发现一些示例代码可以在没有网络浏览器的情况下读取网页。它读取网页上的文本并将其放入名为 WebText 的富文本框中。此代码运行速度非常快，并且永远不会锁定，但它不会读取网页表格中的文本。

我正在使用的代码调用以下函数：

```
WebText.Text = GetHTMLCode("http://xfinitytv.comcast.net/tv-listings")

Function GetHTMLCode(ByVal strURL) As String
    Dim strReturn                   ' As String
    Dim objHTTP                     ' As MSXML.XMLHTTPRequest
    If Len(strURL) = 0 Then Exit Function
    objHTTP = CreateObject("MSXML2.XMLHTTP")
    objHTTP.open("GET", strURL, False)
    objHTTP.send()                    'Get it.
    strReturn = objHTTP.responseText
    objHTTP = Nothing
    GetHTMLCode = strReturn
End Function 
```

我是编程新手（希望随着时间的推移变得更好）。如果我写的东西听起来我不知道我在说什么，那可能是因为我不知道。任何帮助将不胜感激。

谢谢，克里斯

# perl - 为什么通过 ref 需要 shift 而不是 @_？

> ID：15869525
> 
> 赞同：0
> 
> 时间：2013-04-08T00:29:46.440
> 
> 标签：perl

我有一个关于通过引用 Perl 中的子例程传递的问题。对于值，如果我使用 @_ 它可以工作，但对于 ref 只有 shift 工作。不知道为什么。我在下面给出了示例代码：

这有效：

```
#! /usr/bin/perl

use strict;
use warnings;

my $name = 'John';
PassScalarByRef( \$name );

sub PassScalarByRef{
    my $got = shift;
    print "Hello $$got\n";
} 
```

但不是这个：

```
#! /usr/bin/perl

use strict;
use warnings;

my $name = 'John';
PassScalarByRef( \$name );

sub PassScalarByRef{
    my $got = @_;
    print "Hello $$got\n";
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-08T00:33:13.330

在第二种情况下，分配 to`$got`提供了一个标量上下文 to `@_`，这导致它评估它的大小（元素数）。你可以改为说：

```
my ($got) = @_; 
```

...分配 to 的第一个元素`@_`，`$got`正如您所期望的那样。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-08T00:33:24.520

您`@_`在标量上下文中使用数组。`$got`现在包含传递的参数数量。您应该尝试`my ($got) = @_`，它现在在列表上下文中使用数组，这就是您的意思。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-08T01:14:39.677

大多数运算符以一致的方式为其操作数提供特定的上下文；例如，`+`给出它的两个操作数标量上下文；`||`给出它的左操作数标量上下文和它的右操作数`||`本身具有的任何上下文。

赋值有点不同，因为有两种类型，列表赋值和标量赋值。

标量赋值如下所示：

```
$scalar = ...
lvaluesub() = ... 
```

（左值 subs 是 perl 的一个很少使用的特性；内置`pos`函数就是一个例子）。

只分配了一个值，这些值给出了`=`正确的操作数标量上下文。

列表分配如下所示：

```
@array = ...
@arraytoslice[...] = ...
%hash = ...
@hashtoslice{...} = ...
( ... ) = ... 
```

甚至

```
() = ... 
```

所有这些都期望分配一个值列表，因此请给出正确的操作数列表上下文。

当你说：

```
my $got = @_; 
```

这是一个标量赋值，因此`@_`获取标量上下文，这导致它返回其元素数，而不是第一个值。

相反，说：

```
my ($got) = @_; 
```

有些人始终如一地这样做，即使对于只有一个操作数的 subs 也是如此；其他人做

```
my $param1 = shift;
my $param2 = shift; 
```

对于具有少量操作数的 subs。

使用 shift 和来自 @_ 的列表分配来获取对象/类的方法很常见，用于其余参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T01:13:25.153

使用方式不同。

我的 $got = $_[0];

# c++ - 结构中的结构，动态内存分配

> ID：15869532
> 
> 赞同：1
> 
> 时间：2013-04-08T00:30:57.970
> 
> 标签：c++, struct, malloc

我正在制作一个 3D 应用程序，其中一艘船必须驶过浮标轨道。我还需要将曲目存储在组或“布局”中。浮标类基本上是“浮标布局”列表，其中包含“浮标轨道”列表，其中包含浮标列表。

我检查了局部变量观察器，构造函数中的所有内存分配似乎都有效。稍后当调用 calculateCoordinates 函数时，它会进入一个 for 循环。在 for 循环的第一次迭代中，函数指针被使用并且工作正常，但是在这一行

```
ctMain[j+1][1] = 0; 
```

函数指针设置为 NULL。我猜这与未正确分配或寻址的结构有关。我不知道从这里做什么。也许我不明白 malloc 是如何工作的。

**更新** 我用 double ** main_track 替换了 M3DVector3d main_track，认为 malloc 可能没有正确处理 typedef。但是稍后在 calculateCoordinates 中尝试访问 main_track 变量时，我遇到了同样的错误。

**更新** 它最终是由于访问行中的指针错误而导致的内存损坏

```
rotatePointD(&(cTrack->main_track[j]), rotation); 
```

后来当我尝试访问它时才导致错误。

```
// Buoys.h
////////////////////////////////////////////

struct buoy_layout_t;
struct buoy_track_t;
typedef double M3DVector3d[3];

class Buoys {
    public:
        Buoys();
        struct buoy_layout_t ** buoyLayouts;
        int nTrackLayouts;
        int currentLayoutID;
        void calculateCoordinates();
};

struct buoy_track_t {
    int nMain, nYellow, nDistract;
    M3DVector3d * main_track,
              yellow_buoys,
              distraction_buoys; 
    double (*f)(double x);
    double (*fp)(double x);
    double thickness;
    M3DVector3d start, end;
};

struct buoy_layout_t {
    int nTracks;
    buoy_track_t ** tracks;
};

// Buoys.cpp
/////////////////////////////

// polynomial and its derivative, for shape of track
double buoyfun1(double x) {return (1.0/292.0)*x*(x-12.0)*(x-24.0);}
double buoyfun1d(double x) {return (1.0/292.0)*((3.0*pow(x,2))-(72.0*x)+288.0);}
// ... rest of buoy shape functions go here ...

Buoys::Buoys() {
    struct buoy_layout_t * cLayout;
    struct buoy_track_t * cTrack;
    nTrackLayouts = 1;
    buoyLayouts = (buoy_layout_t **) malloc(nTrackLayouts*sizeof(*buoyLayouts));
    for (int i = 0; i < nTrackLayouts; i++) {
        buoyLayouts[i] = (buoy_layout_t *) malloc(sizeof(*(buoyLayouts[0])));
    }
    currentLayoutID = 0;    

    // ** Layout 1 **
    cLayout = buoyLayouts[0];
    cLayout->nTracks = 1;
    cLayout->tracks = (buoy_track_t **) malloc(sizeof(*(cLayout->tracks)));
    for (int i = 0; i < 1; i++) {
        cLayout->tracks[i] = (buoy_track_t *) malloc (sizeof(*(cLayout->tracks)));
    }
    cTrack = cLayout->tracks[0];
    cTrack->main_track = (M3DVector3d *) malloc(30*sizeof(*(cTrack->main_track)));
    cTrack->nMain = 30;  
    cTrack->f = buoyfun1;
    cTrack->fp = buoyfun1d;
    cTrack->thickness = 5.5; 
    cTrack->start[0] = 0; cTrack->start[1] = 0; cTrack->start[2] = 0;
    cTrack->end[0] = 30; cTrack->end[1] = 0; cTrack->end[2] = -19;

    // ... initialize rest of layouts here ...
    // ** Layout 2 **
    // ** Layout 3 **
    // ...
    // ** Layout N **

    calculateCoordinates(); 
}

void Buoys::calculateCoordinates()
{
    int i, j;
    buoy_layout_t * cLayout = buoyLayouts[0];
    for (i = 0; i < (cLayout->nTracks); i++) {
        buoy_track_t * cTrack = cLayout->tracks[i];
        M3DVector3d * ctMain = cTrack->main_track;
        double thickness = cTrack->thickness;
        double rotation = getAngleD(cTrack->start[0], cTrack->start[2], 
                             cTrack->end[0], cTrack->end[2]);
        double full_disp = sqrt(pow((cTrack->end[0] - cTrack->start[0]), 2)
                         + pow((cTrack->end[2] - cTrack->start[2]), 2));

        // nBuoys is nBuoys per side. So one side has nBuoys/2 buoys.
        for (j=0; j < cTrack->nMain; j+=2) {
            double id = j*((full_disp)/(cTrack->nMain));
            double y = (*(cTrack->f))(id);
            double yp = (*(cTrack->fp))(id);
            double normal, normal_a;
            if (yp!=0) {
                normal = -1.0/yp;
            }
            else {
                normal = 999999999;
            }

            if (normal > 0) {
                normal_a = atan(normal);
            }
            else {
                normal_a = atan(normal) + PI;
            }

            ctMain[j][0] = id + ((thickness/2.0)*cos(normal_a));
            ctMain[j][1] = 0;
            ctMain[j][2] = y + ((thickness/2.0)*sin(normal_a));
            ctMain[j+1][0] = id + ((thickness/2.0)*cos(normal_a+PI));
            ctMain[j+1][1] = 0; // function pointers get set to null here
            ctMain[j+1][2] = y + ((thickness/2.0)*sin(normal_a+PI));
        }
        for (j=0; j < cTrack->nMain; j++) {
            rotatePointD(&(cTrack->main_track[j]), rotation);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T00:51:07.047

除非有学习指针的要求或者您不能使用 STL，否则鉴于您使用的是 C++，我强烈建议您使用更多的 STL，它是您的朋友。但无论如何...

首先，ctMain 的类型是*M3DVector3D。所以你可以安全地访问ctMain[0]，但是你不能访问ctMain[1]，也许你的意思是ctMain的类型是**M3DVector3D，在这种情况下你写的初始化行是：

```
cTrack->main_track = (M3DVector3d *) malloc(30*sizeof(*(cTrack->main_track))); 
```

会有意义。

## 更多笔记

你为什么要在这里分配30个？

```
cTrack->main_track = (M3DVector3d *) malloc(30*sizeof(*(cTrack->main_track))); 
```

给定 main_track 的类型，您只需要：

```
cTrack->main_track = (M3DVector3d *) malloc(sizeof(M3DVector3d)); 
```

另外，为了组织的目的，在做sizeof的时候可能要给出实际的类型来检查sizeof，而不是变量（应该没有区别，只是组织），这两个变化：

```
buoyLayouts = (buoy_layout_t **) malloc(nTrackLayouts*sizeof(buoy_layout_t*));
for (int i = 0; i < nTrackLayouts; i++) {
buoyLayouts[i] = (buoy_layout_t *) malloc(sizeof(buoy_layout_t));
}

cLayout->tracks = (buoy_track_t **) malloc(clayout->nTracks * sizeof(buoy_track_t*));
for (int i = 0; i < 1; i++) {
cLayout->tracks[i] = (buoy_track_t *) malloc(sizeof(buoy_track_t));
} 
```

# php - 嵌套for循环困难

> ID：15869534
> 
> 赞同：2
> 
> 时间：2013-04-08T00:31:20.817
> 
> 标签：php, twitter-bootstrap, for-loop

当我在数据库中运行一个列表时，我需要打印出一个包含三个 li 的 div。当我使用引导程序时，我需要为 .span4 的第三列之后的每一行使用 .row-fluid 进行 div，但是我在让 for 循环工作时遇到了一些麻烦。这是未触及的代码：

```
<div class="row-fluid">'
          <ul class="thumbnails">
            <?php 
              for($i=0; $i<count($rows); $i+=1){ 
            ?>
            <!-- This is why sort by programme doesn't work - ID is not what I need -->
            <li class="span4" id="<?php echo $rows[$i]['Class']; ?>">
              <div class="thumbnail">
                <img src="http://placehold.it/320x200" alt="ALT NAME">
                <div class="caption">
                  <h3><?php echo $rows[$i]['Title']; ?></h3>
                  <?php if(!empty($rows[$i]["DateSold"])){ ?>
                    <span class="label label-warning" style="margin-bottom: 10px;">Book has been sold!</span>
                  <?php } ?>
                  <p>Seller: <?php echo $rows[$i]['FirstName'] . " " . $rows[$i]['LastName']; ?> </p>
                  <p>Email: <?php echo $rows[$i]['Email']; ?></p>
                  <p>Cost: <?php echo $rows[$i]['Cost']; ?></p>
                  <p>Condition: <?php echo $rows[$i]['BookCondition']; ?></p>
                  <p align="center">
                    <?php echo '<a href="#myModal' . $i . '" class="btn btn-primary btn-block" data-toggle="modal">View More information</a>' ?>
                  </p>
                </div>
              </div>
            </li> 
            <!-- Modal -->
              <?php echo'<div id="myModal' . $i . '" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">'; ?>
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                  <h3 id="myModalLabel">Book information</h3>
                </div>
                <div class="modal-body">
                  <p>Title: <?php echo $rows[$i]['Title']; ?> </p>
                  <p>Seller: <?php echo $rows[$i]['FirstName'] . " " . $rows[$i]['LastName']; ?> </p>
                  <p>Email: <?php echo $rows[$i]['Email']; ?></p>
                  <p>Phone: <?php echo $rows[$i]['PhoneNumber']; ?></p>
                  <p>Condition: <?php echo $rows[$i]['BookCondition']; ?></p>
                  <p>Date added: <?php echo $rows[$i]['DateAdded']; ?></p>
                  <p>Class: <?php echo $rows[$i]['Class']; ?></p>
                  <p>Cost: <?php echo $rows[$i]['Cost']; ?></p>
                </div>
                <div class="modal-footer">
                  <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
                </div>
              </div>
              <?php
            }
          ?>   
          </ul>
    </div> 
```

在从数据库中每三次打印后，我需要围绕列表项的行流体的顶级父 div ..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T00:38:35.700

在第二次通读时，您似乎更希望每三个 LI 在单独的 DIV 和 UL 中。在这种情况下，您可以使用`array_chunk`.

```
<?php $chunks = array_chunk($rows, 3);
for ($i = 0; $i<count($chunks); $i++)
{
    ?> <div class="row-fluid"><ul class="thumbnails"> <?php
    for ($j = 0; $j<count($chunks[$i]); $j++)
    {
        ?> do your LIs in here <?php
    }
    ?> </ul></div> <?php
} 
```

# mercurial - hg push abort：需要 http 授权。我正在推送到我的本地 bitbucket 存储库

> ID：15869537
> 
> 赞同：7
> 
> 时间：2013-04-08T00:32:47.330
> 
> 标签：mercurial, authorization, bitbucket, required

我正在尝试将更改推送到 bitbucket 中的本地远程存储库。我可以访问这个存储库。但是当我这样做时，它会像这样显示。它应该显示密码提示，但没有显示。

```
$ hg push
pushing to https://sat801@bitbucket.org/sat801/i4330-notification-sm
abort: http authorization required 
```

在我的 .hg 文件夹中，这是我的 hgrc 文件

```
[ui]
username = sat801 <*******@example.com>
editor = nano

[paths]
default = https://sat801@bitbucket.org/sat801/i4330-notification-sm 
```

我既不能在我的本地仓库中推送任何东西，也不能从中提取任何东西。它显示相同的错误

```
abort: http authorization required 
```

请让我知道如何解决这个问题

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T13:04:40.427

我认为您要么必须使用`sat801:mypassword@bitbucket.org`（即包括您的密码），要么放弃输入您的用户名。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-09-13T20:20:38.317

我不得不这样做：

## ~/.hgrc

```
[auth]
bb.prefix = bitbucket.org
bb.username = johndoe
bb.password = *********
bb.schemes = http https 
```

其中“bb”可以是任何东西，前缀对应于http服务器域

# python - 验证 ModelForm 的最佳方法

> ID：15869541
> 
> 赞同：2
> 
> 时间：2013-04-08T00:33:37.803
> 
> 标签：python, regex, django, validation, modelform

我在表单中有一个字段“电话”，使用 ModelForm 创建。我想验证这个字段。这是models.py中的代码：

```
class UserProfile(models.Model):
     user = models.ForeignKey(User, unique=True)
     phone = models.CharField(max_length=20, validators=[validate_phone]) 
```

表格.py：

```
class UserProfileResetForm(ModelForm):
     class Meta:
         model = UserProfile
         exclude = ('user') 
```

到目前为止，我发现有几种方法可以验证从 django 中的 ModelForm 创建的表单。我至少看到其中 3 个： 1\. 将 UserProfileResetForm 中的电话覆盖为 RegexField 2\. 使用验证器（就像我现在所做的那样） 3\. 在 UserProfileResetForm 中创建 clean_phone 方法

所以我有点困惑......最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:34:00.373

做你现在正在做的事情。如果您有一个可以放置在模型上的验证器，那么它不仅会验证您的所有模型表单，而且还会在管理界面中执行验证。如果仅在有特定验证的情况下覆盖模型表单中的 clean_phone，则您只需要在该表单中执行。您可以放置​​该验证器的级别越低，您的应用程序（和数据）将越一致。

# javascript - 2013 年人们如何验证他们的网站？

> ID：15869543
> 
> 赞同：10
> 
> 时间：2013-04-08T00:33:45.420
> 
> 标签：javascript, html, css, json, validation

有几个选项可用于验证网站：

*   将每个 URL 粘贴到在线验证器 ( [http://validator.w3.org](http://validator.w3.org) )
*   在您的网络服务器上运行一个模块（[mod_tidy](http://mod-tidy.sourceforge.net/)，“虽然 mod_tidy 给人的印象是一个验证器，但它不是一个”）
*   安装浏览器扩展（[Chrome HTML Validator](https://chrome.google.com/webstore/detail/html-validator/cgndfbhngibokieehnjhbjkkhbfmhojo?hl=en)）
*   将 HTML 源代码粘贴到验证器 ( [http://validator.w3.org](http://validator.w3.org) )
*   运行代理（[查尔斯代理](http://www.charlesproxy.com/)）

但是它们都没有最终的功能集：

*   拦截所有请求，甚至在页面加载之后（HTML、CSS、JS、AJAX、JSON、XML）
*   在不加载 validator.w3c.org 或类似文件的情况下在本地进行所有处理
*   自动处理，无需“提交”每个资源进行验证
*   积极开发（使用 HTML5）

是否有真实的人在使用任何好的工具来简化这一过程，或者在 IE 被根除之前验证是否有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T00:37:55.383

一般情况下，我只对IE使用一个小的条件语句，而对于旧版本的Internet Explorer没有样式表（如果他们还停留在ie5-7的石器时代，他们不需要CSS的新技术）。除此之外，我使用 w3c 验证器和 jstidy。也许我只是过时了，但总的来说，HTML 是一种非常灵活的语言，如果它符合“XHTML 或 HTML”，它真的没什么大不了的，只要它按照您的意愿工作即可。

# qt - 在 QFileSystemModel() 中列出文件的最佳方法？

> ID：15869548
> 
> 赞同：5
> 
> 时间：2013-04-08T00:35:15.930
> 
> 标签：qt, pyside, qlistview, qfilesystemmodel

我正在开始 Qt/pySide 编程，并试图以 QFileSystemModel 作为模型来实现一个简单的 QListView。我有这个工作，另外在模型上定义了一个名称过滤器。我想获取 QListView （或更确切地说是底层模型）中所有文件的列表。

以下代码*似乎*可以做到这一点，但非常难看，不可能是正确的方法。帮助！

```
model = myQListView.model()
idx = model.index(model.rootPath())
for i in range(0, model.rowCount(idx)):
    child = idx.child(i, idx.column())
    print model.fileName(child) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T09:40:20.583

这才是正确的工作方式。抽象的整个想法`QAbstractItemModel`是提供一个统一的 API，用于访问恰好适合列表、表格或树表示的任意和可能的动态数据。因为这个 API 必须容纳从几个字符串的简单虚拟列表到地址簿的内容（包括丰富的联系方式）的所有内容，所以它本质上是复杂的。根据您想要实现的目标，在您的特定情况下使用单一用途的工具可能会更好。

顺便说一句，它`QFileSystemModel`本质上是非常动态的（目录枚举发生在一个单独的线程上）。在发出信号之前，您不会获得有意义的数据`directoryLoaded`，您必须等待它。如果您只是在寻找要在代码中使用的文件列表，那么使用 Python 的本机工具可能会更容易。

# svn - 从 SVN 存储库下载文件

> ID：15869549
> 
> 赞同：5
> 
> 时间：2013-04-08T00:35:22.357
> 
> 标签：svn, download

我需要将[https://biosignalgroup.repositoryhosting.com/svn/biosignalgroup_wclust/](https://biosignalgroup.repositoryhosting.com/svn/biosignalgroup_wclust/)上的文件下载到我的 Windows 系统上。

我为 Windows 安装了 svn，并尝试了以下命令：

```
svn checkout https://biosignalgroup.repositoryhosting.com/svn/biosignalgroup_wclust/ 
```

它要求进行身份验证，日志列出了一些文件，但我在我的电脑上找不到它们。请帮忙。

在此之后我不需要使用 svn，我只需要将所有文件一次性下载到我的系统上，而不是右键单击并保存每个文件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T16:23:13.647

正如@bahrep 提到的，如果您将来不需要使用 svn，那么您需要一个`svn export`不会创建工作副本并且它是关联文件的文件

在进行导出之前，请检查 URL 是否正确……在标准 svn 存储库中，将在下面有三个文件夹`https://biosignalgroup.repositoryhosting.com/svn/biosignalgroup_wclust`

要检查它， `svn list https://biosignalgroup.repositoryhosting.com/svn/biosignalgroup_wclust` 如果您看到`branches` `tags`和`trunk`，您将需要更多信息，如果您想要主干、某个分支或标签，请询问给您 URL 的人。

从命令行对所需的分支、标签或主干进行排序后：

```
svn export https://biosignalgroup.repositoryhosting.com/svn/biosignalgroup_wclust biosignalgroup_wclust 
```

将文件导出到`biosignalgroup_wclust`您所在的任何目录中命名的目录。

# html - 让 nav 元素扩展到页面末尾，但不超过

> ID：15869560
> 
> 赞同：1
> 
> 时间：2013-04-08T00:36:09.627
> 
> 标签：html, css

我正在尝试使用仅 HTML5 和 CSS3 的垂直导航栏。希望菜单出现在左侧，页面的其余部分出现在右侧。当用户向下滚动时，我希望菜单与用户一起向下移动。到目前为止，我的垂直菜单看起来像我想要的那样，但我无法完成其余的。到目前为止，我尝试过的每个解决方案都意味着以奇怪的方式构建页面或使用 Javascript。这可能只使用 HTML5 和 CSS3 吗？

CSS

```
/* Menu Navigation Properties */
nav
{
    text-align: center;
    padding-right: 1.0em;
}

/* Menu container */
nav ul
{
    float: left;
    list-style-type: none;
    padding-top: 0;
    padding-left: 0;
    padding-right: 0.75em;
}

/* Menu item container */
nav ul li
{
    margin-top: 0em;
    margin-left: 0.15em;
    margin-right: 0.15em;
}

/* Menu item Appearance */
nav ul li a
{
    background-color: black;
    color: #D0E2F1; /* Light Blue */
    height: 2em;
    line-height: 2em;
    width: 9em;
    display: block;
    border-width: 0.1em;
    border-style: solid;
    border-color: #dcdce9;
    text-decoration: none;
    text-align: center;
}

/* Menu item hovered over by user */
nav ul li a:hover
{
    background-color: #D0E2F1; /* Light Blue */
    color: black;
}

/* Current Page on the Menu */
nav ul li a.current
{
    font-weight: bold;
} 
```

HTML 文件

```
<html>
   <body>
      <nav>
         <!-- Menu Item List -->
      </nav>
      <h1>Page Title</h1>
      <!-- rest of page -->
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T02:20:55.273

如果您不能将页面的其余部分包装在包装器中，则可以为菜单腾出空间

```
body {
    padding-left: 10em;
} 
```

然后固定menu的位置，拉回body上padding留下的空间

```
nav {
    position: fixed;
    width: 9em; // Probably a good idea to fix the width of the menu
    margin-left: -10em;
    ...
} 
```

如果您可以将页面的其余部分包装在包装器中，只需给它足够的左边距以使其远离菜单。

# c# - Gridview 重置为过滤器中的第一个 ID 值

> ID：15869562
> 
> 赞同：1
> 
> 时间：2013-04-08T00:36:17.177
> 
> 标签：c#, asp.net, gridview

我的 gridview 上有 5 个页面，每个页面显示 5 个项目

第一个项目的 ID 为 16，然后范围为 39。

我目前面临的问题是，当我过滤我的网格视图时，即假设我过滤了我的数据并且唯一的结果的 ID 为 30，那么当显示时，这将获得第一个结果 16 的 ID。

我相信这可能取决于我如何获得该项目的 ID。

这是我用来获取 ID 的代码：

```
GridViewRow row = ((Button)sender).Parent.Parent as GridViewRow;

object ID = GridView1.DataKeys[row.RowIndex].Value;

rowID = Convert.ToInt32(ID); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:48:37.227

这是一个回发问题。回发导致 gridview 重置，给它错误的行值 ID。这里的关键是将您不想在表单加载中重新加载的任何内容设置为 (!IsPostBack)

# vbscript - 将 VBscript 中的日期格式化为字母数字

> ID：15869564
> 
> 赞同：1
> 
> 时间：2013-04-08T00:36:23.397
> 
> 标签：vbscript, date-format

有没有办法将 vbscript 中的日期格式化为：2013 年 11 月 30 日甚至 2013 年 11 月 30 日？我已经用谷歌搜索了一整天，但我仍然一无所获。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T00:50:54.713

试试这个：

```
document.write("The current system date is: ")
document.write(DatePart("d", Date) & "-" & MonthName(DatePart("m", Date)) & "-" & DatePart("yyyy", Date) )
document.write(DatePart("d", Date) & "-" & MonthName(DatePart("m", Date), 1) & "-" & DatePart("yyyy", Date) ) 
```

使用[DatePart](http://msdn.microsoft.com/en-us/library/4kt42529%28v=vs.84%29.aspx)从日期中获取日、月和年。使用[MonthName](http://msdn.microsoft.com/en-us/library/58f13257%28v=vs.84%29.aspx)获取月份名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T08:57:54.207

使用的替代方法`DatePart`是`Day`,`Month`和`Year`函数：

```
Day(Date) & "-" & MonthName(Month(Date)) & "-" & Year(Date) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:27:20.527

或`FormatDateTime`与`vbLongDate`(=1) 一起使用。

```
d = Split(FormatDateTime(Now, 1))
ReDim Preserve d(2)
d = Join(d, "-")
WScript.Echo d 
```

# cordova - 如何告诉 Filepicker 从本地输入 type="file" 上传文件？

> ID：15869568
> 
> 赞同：0
> 
> 时间：2013-04-08T00:37:06.313
> 
> 标签：cordova, ios6, mobile-safari, filepicker.io

# 任务：PhoneGap 应用程序将照片上传到文件选择器。

*   我设法在应用程序中使用 Filepicker。
*   我设法使用带有本机输入的其他上传器：http: [//blueimp.github.io/jQuery-File-Upload/](http://blueimp.github.io/jQuery-File-Upload/)
*   但是没有管理的是使用本机（对于iOS6）**输入类型=“文件”上传到文件选择器**

* * *

```
<!DOCTYPE html>
<html>
    <head>
        <title>Filepicker PhoneGap iOS6</title>
    </head>

    <script type="text/javascript" src="cordova-2.2.0.js"></script>
    <script type="text/javascript" src="jquery.min.js"></script>
    <script type="text/javascript" src="ChildBrowser.js"></script>
    <script type="text/javascript" src="filepicker.js"></script>
    <script type="text/javascript">

    function useFilepicker() {
        /* snippet from: http://stackoverflow.com/questions/13369249/filepicker-io-with-phone-gap-on-ios/14525181#14525181 */      
        cb = window.plugins.childBrowser;
        if(cb!=null){
            cb.onLocationChange = function(loc){
                if (loc != "about:blank"){
                    console.log(loc);
                    if(loc.indexOf("fpurl") > -1) {
                        cb.close();
                    }
                    var n = loc.split("fpurl=");
                    fpurl = n[1];
                    alert(fpurl);
                }
            };
            cb.showWebPage("https://www.filepicker.io/dialog/open/?m=image/*&key=______YOUR_KEY_HERE______&referrer=&modal=false&redirect_url=https://www.filepicker.io/dialog/phonegap_done/");
        }
    }

    $(function(){
     $("input#file").on("change", function() {
        ("textarea#base64").val($(this).val());

        /* _____WHAT TO PUT HERE_____ */

     });
    });

    </script>

    <body>
    <h3>function calling Filepicker API</h3>
    <a href="#" onClick="useFilepicker(); return false">Use Filepicker</a> 
    <!-- this works, but user experience suffers - I don't want to open extra window, I would like to have take photo / choose existing -->

    <h3>input type=&quot;filepicker&quot;</h3>
    <input type="filepicker"/>
    <!-- Doesn't work, created issue here: https://github.com/Filepicker/filepicker-phonegap/issues/1 -->

    <h3>input type=&quot;file&quot;</h3>
    <form action="_____WHAT TO PUT HERE_____">
        <input id="file" type="file"/>
    </form>
    <textarea id="base64">Here c:/fakepath/image.jpg path with be</textarea>

    </body>
</html> 
```

**注意：**此代码使用 ChildBrowser 插件，您可能需要按照以下说明操作：[https ://github.com/alunny/ChildBrowser/issues/28#issuecomment-15941458](https://github.com/alunny/ChildBrowser/issues/28#issuecomment-15941458)

**加分项：**如何使用类似[https://gokercebeci.com/dev/canvasresize的库](https://gokercebeci.com/dev/canvasresize) *（用于客户端图像大小调整的插件）*在使用不稳定的 3G 连接传输数据之前减小文件大小？

提前感谢您的任何建议和支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T06:00:41.533

您可以使用该`filepicker.store`函数来存储本机输入类型，例如：

```
var input = document.getElementById("my-file-input");
filepicker.store(input, {location:'S3'}, function(fpfile){
    console.log(JSON.stringify(fpfile));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T22:40:15.603

这是一个有效的最小片段*（上传大照片需要时间，并且没有进度条，所以请耐心等待）*

```
<!DOCTYPE html>
<html>
    <head>
        <title>Filepicker PhoneGap iOS6</title>
    </head>

    <script type="text/javascript" src="cordova-2.2.0.js"></script>
    <script type="text/javascript" src="jquery.min.js"></script>
    <script type="text/javascript" src="filepicker.js"></script>
    <script type="text/javascript">

    filepicker.setKey('l5uQ3k7FQ5GoYCHyTdZV'); // No worries: used filepicker's

    $(function(){

     $("input#file").on("change", function() {

        filepicker.store(this, {location:'S3'}, function(fpfile){

            $("<a>", {
                href: fpfile.url,
                text: "See me!"
            }).appendTo("body");

        });
     });
    });
   </script>

    <body>
        <input id="file" type="file"/>
    </body>
</html> 
```

# php - 设置变量 $_GET 全局（添加好友）

> ID：15869569
> 
> 赞同：3
> 
> 时间：2013-04-08T00:37:10.923
> 
> 标签：php, mysql, sql, get

好吧，我正在尝试编写一个添加朋友脚本并且他正在工作，但是当我的脚本**（即在函数中）**尝试搜索`$_GET['id']`以查看配置文件的 id 以提出好友请求时，脚本不能find because 是 profile.php 中的一个函数，而**不是直接在文件中**。

因此，如果我设置`$_GET`会话，我可以进行，但是如果我输入用户配置文件然后进入另一个配置文件，并且如果我尝试向第一个配置文件发出好友请求，则请求将发送到最后一个（即已注册在会话中）

那么我怎样才能做一个`$_GET`“全球性的”呢？

那是我的代码：

**OTHER_PROFILE.PHP**

```
 <?php include_once("includes/head.php"); ?>
    <?php require_once("includes/connect/connect.php"); ?>
    <?php require_once("includes/functions.php"); ?>
    <?php get_directory() ?>
    <?php login_validation() ?>
    <?php first_login(); ?>
    <?php count_logins(); ?>
    <?php get_shortcuts_menu_by_user(); ?>
    <?php include_once("includes/body.php"); ?>
    <?php 
    global $userid; 
    global $userid_profilee;
    $_SESSION['userid'] = $userid;
    $_SESSION['id'] = $_GET['id'];
    ?>

    <script src="alert.js" ></script>

    <?php 
    other_profile_main_photo();
    echo "<br><br>";
    ?>

    <?php include_once("includes/body_begin.php"); ?>
    <?php echo "<br><br>";?>
    <?php include("includes/footer.php"); ?> 
```

**FUNCTIONS.PHP** *（只是函数部分）*

```
<?php require_once("/connect/connect.php"); ?>
<?php require_once("/jquery.php"); ?>
<?php
######### FRIEND REQUEST ########

function friend_request_send(){

global $db;

global $userid;
$userid = $_SESSION['userid'];
$userid_profilee = $_SESSION['id'];

$query_id_requester = "SELECT * FROM friend_requests";
$result_set1 = mysql_query($query_id_requester, $db)  or die(mysql_error()) ;

$query_id_requests = "SELECT friend_requests FROM members WHERE id=\"{$userid_profilee}\" ";
$result_set3 = mysql_query($query_id_requests, $db)  or die(mysql_error());

$query_id_requester_check = "SELECT * FROM friend_requests WHERE user_id=\"{$userid_profilee}\"";
$result_set4 = mysql_query($query_id_requester_check, $db);
$query_id_user_check = "SELECT * FROM friend_requests WHERE user_id_requester=\"{$userid}\"";
$result_set5 = mysql_query($query_id_user_check, $db);

## If already exists a friend request do this:
if ($id_requests = mysql_fetch_array($result_set3)){
if (($id_requester_check = mysql_fetch_array($result_set4)) && ($id_user_check = mysql_fetch_array($result_set5))){
echo "Ja fizeste pedido de Amizade!";
return ;
}
else
{
}
}

if ($id_requester = mysql_fetch_array($result_set1)){
$id_requests_1 = $id_requests['friend_requests'] + 1;
mysql_query("UPDATE members SET friend_requests=\"{$id_requests_1}\" WHERE id=\"{$userid_profilee}\"");
mysql_query("INSERT INTO friend_requests (user_id, user_id_requester) VALUES (\"{$userid_profilee}\", \"{$userid}\")");
echo "<div class=\"nNote nSuccess hideit\">
            <p><strong>SUCCESS: </strong>Pedido de Amizade enviado com sucesso!</p>
        </div>";
}

else
{
echo "Pedido de Amizade nao enviado!";
}
} 
```

如果我尝试更改`$userid_profilee = $_SESSION['id'];`为`$userid_profilee = $_GET['id'];`

> 注意：未定义的索引：第 13 行 C:\xampp\htdocs\includes\functions.php 中的 id

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-01T08:17:39.690

**让我们首先指出一些事情，只是为了全面了解上述变量的工作原理！**

> **根据定义**
> 
> > [$_GET](http://php.net/manual/it/reserved.variables.get.php)和[$_SESSION](http://www.php.net/manual/en/reserved.variables.session.php)是**超全局**或**自动全局**变量。这仅仅意味着它们在整个脚本的所有范围内都可用。没有必要做**全局 $variable;** 在函数或方法中访问它们。

**话虽如此，这些变量包含**

> [$_GET](http://php.net/manual/it/reserved.variables.get.php)通过 URL 参数传递给当前脚本的变量关联数组。
> 
> [$_SESSION](http://www.php.net/manual/en/reserved.variables.session.php)关联数组，包含当前脚本可用的会话变量。有关如何使用它的更多信息，请参阅[会话函数文档。](http://www.php.net/manual/en/ref.session.php)

在 Web 应用程序中，在用户之间共享信息的唯一方法是将这些信息存储在服务器上！在您的情况下，您决定使用 mysql 数据库。这是与 php 一起使用的最常见的选择！

**注意**：访问 mysql 数据库的新标准接口不再通过[mysql_* 函数](http://www.php.net/manual/en/function.mysql-connect.php)！此扩展已被弃用，并将在下一个版本的 php 中删除！最好使用[mysqli_* 函数](http://www.php.net/manual/en/function.mysqli-connect.php)，或者使用[mysqli](http://www.php.net/manual/en/mysqli.construct.php)和[pdo两种面向对象的替代方案之一](http://www.php.net/manual/en/pdo.construc)

**好的，现在让我们进入添加友谊的例子！**从概念上讲，您只需要三页来完成您的任务，我不会详细说明，因为最后代码很容易编写......但是您需要了解会话/获取变量以及它们的不同之处，并且仍然能够互相交流！

**`login.php`**这是我将检查数据库是否存在用户并设置登录用户的个人资料 ID 的地方

```
session_start(); // this must be on any page after the login

// if : the user exists and the password matches then

// grab the $profile_id from the database and push it to the session array

$_SESSION['logged_profile_id'] = $profile_id; 

// else : error wrong username or password 
```

**`other_profile.php`**此页面从数据库中获取人员的信息，并处理“添加朋友”按钮或链接

```
<?php session_start() ?>

<!-- includes + validation + loading person from the database and get info [id, name, status, etc] -->

<a href="addfriend.php?friend_profile_id=<?php echo $profile_id; ?>">Add Friend</a>

<!-- other includes and stuff --> 
```

**`addfriend.php`**这就是你的 $_GET 变量即将到来的地方......它存储了对朋友的当前引用！

```
session_start();

$_SESSION['logged_profile_id'] // this is the logged in user

$_GET['friend_profile_id'] // and this is the new friend that can be added to the database 
```

正如您所看到的，**全局**并不意味着您可以通过不同的用户传递变量！每个用户在自己的页面中都属于自己的会话，并且交叉信息的唯一方法是使用某种数据库！它可以是一个[dbms](http://it.wikipedia.org/wiki/Database_management_system)或其他文件！它只需要在服务器上，并且两个用户都必须能够在上面读写！

**请记住**：您必须在需要传输会话的每个页面上调用 session_start，此外，必须在将任何内容发送到浏览器之前调用 session_start，因此最好将其放在页面的开头！

# hibernate - Ejb3Configuration.buildEntityManagerFactory 性能

> ID：15869571
> 
> 赞同：1
> 
> 时间：2013-04-08T00:37:30.080
> 
> 标签：hibernate, configuration, entitymanager

我们有大约 150 个类映射到 150 个表，并构建 `EntityManagerFactory`如下：

代码：

```
Ejb3Configuration cfg = new Ejb3Configuration();

Class[] types = new Class[150] { ....};

for (int i=0; i<types.length; i++)
  cfg.addAnnotatedClass(types[i]);

EntityManagerFactory emf = cfg.buildEntityManagerFactory(); 
```

这需要很长时间，大约 20 秒。有没有加快速度的方法？还是懒惰地初始化？谢谢。戴夫

# javascript - 在带有按钮的函数中存储信息并在 javascript 中检索信息

> ID：15869573
> 
> 赞同：0
> 
> 时间：2013-04-08T00:37:38.073
> 
> 标签：javascript, arrays, local-storage

我已经制作了一个按钮，每次单击它时，它都会从我的输入框中获取一个值，然后将其减去并将其存储回输入框值。但我想要做的是，将我的值存储到一个数组或任何我的按钮被点击的东西中。

所以例如我想这样做，点击 balance = 100 按钮 balance 现在是 90，我希望 array[0] 有 100 array[1] 有 90 并且每次我希望它继续附加到数组但是当我输入我的按钮。

我尝试了很多事情，每次它总是将值存储到数组 [0] 中并重写它

```
var clicktotal=0;
var array = [];
function myfunc(){
var Bal = document.getElementById("Bank_Balance");
var Balance = Bal.value
array[clicktotal]=Balance;
console.log(clicktotal+"My array click total "+array[clicktotal]);
}
clicktotal++; 
```

看到我有这个并且函数中还有其他一些东西，但是console.log总是给我相同的数字而不增加我的变量，所以它仍然覆盖我的数组。

我的按钮看起来像这样

```
<input type="button" id="buy_things" value="Buy" style="width:55px; height:33px; color:#938CDD;" > 
```

我的初始化函数是

```
var Buy_button = document.getElementById("buy_things");
                Buy_button.addEventListener ('click', myfunc ,true); 
```

如果有任何想法，我对任何事情都持开放态度，我尝试过使用数组、本地存储和对象，但我似乎无法让它工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:39:04.673

您需要将`push`项目添加到数组中：

```
array.push(Bal.value); 
```

你的`myfunc`重写：

```
function myfunc(){
    var Bal = document.getElementById("Bank_Balance");
    array.push(Bal.value);
    console.log(array.length, "My array click total "+ Bal.value);
} 
```

我意识到我上面重写的例子没有使用`clicktotal`，但是你上面的例子没有正确使用它。`clicktotal`您用值 0声明了变量，并且只增加了一次。每次`myfunc`被调用，它不会递增`clicktotal`，所以它保持为 1，不管调用了多少次`myfunc`。

# assembly - x86 数据类型 (0x) 帮助

> ID：15869575
> 
> 赞同：-1
> 
> 时间：2013-04-08T00:37:44.893
> 
> 标签：assembly, x86, inline-assembly

当0x领先一个数字时是什么意思？它是某种特殊的数据类型或内存地址吗？

以这一行为例：

添加 eax,0x77

我不确定 77 前面的 0x 是什么，有人可以澄清一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T00:52:16.517

这是一种表达十六进制常量的 C/C++ 方式。在汇编程序中，您通常编写`12H`和用于与C 和 C++`0FH`相同的东西。一些汇编器也支持这种语法（例如）。`0x12``0xF``NASM`

# python - 在python中生成日期数组

> ID：15869577
> 
> 赞同：2
> 
> 时间：2013-04-08T00:38:20.107
> 
> 标签：python, datetime, matplotlib

我正在编写一个 python 脚本，该脚本在用户指定的两个日期之间生成数据条形图

例如，用户在此处输入 11 月 30 日和 12 月 4 日

将日期时间导入为 dt
dateBegin = dt.date(2012,11,30)
dateEnd = dt.date(2012,12,4)

有没有办法返回 dateBegin 和 dateEnd 之间的日期数组？我想要的是 [30, 1, 2, 3, 4] 之类的东西。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T00:44:56.320

当然！您正在寻找[matplotlib.dates.drange](http://matplotlib.org/api/dates_api.html#matplotlib.dates.drange)：

```
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.dates as mdates
import matplotlib.ticker as ticker
import datetime as DT

dates = mdates.num2date(mdates.drange(DT.datetime(2012, 11, 30),
                                      DT.datetime(2012, 12, 4),
                                      DT.timedelta(days=1)))
print(dates)
# [datetime.datetime(2012, 11, 30, 0, 0, tzinfo=<matplotlib.dates._UTC object at 0x8c8f8ec>), datetime.datetime(2012, 12, 1, 0, 0, tzinfo=<matplotlib.dates._UTC object at 0x8c8f8ec>), datetime.datetime(2012, 12, 2, 0, 0, tzinfo=<matplotlib.dates._UTC object at 0x8c8f8ec>), datetime.datetime(2012, 12, 3, 0, 0, tzinfo=<matplotlib.dates._UTC object at 0x8c8f8ec>)]

vals = np.random.randint(10, size=len(dates))
fig, ax = plt.subplots()
ax.bar(dates, vals, align='center')
ax.xaxis.set_major_formatter(mdates.DateFormatter('%Y-%m-%d'))
plt.xticks(rotation=25)
ax.set_xticks(dates)
plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/zhqGN.png)

# java - Java - Wifi API

> ID：15869578
> 
> 赞同：11
> 
> 时间：2013-04-08T00:38:20.957
> 
> 标签：java, networking, wifi

我正在尝试找出是否有用于 Java 的 Wifi API。可以连接到 Wifi 网络并扫描它们（以查找设备）的东西。我似乎找不到类似的东西。有什么建议么？谢谢！

PS 我知道适用于 Android 的 WifiManager，但我不是为 Android 开发的，我正在使用 JDK 6 进行开发。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T01:00:51.740

无线网卡因制造商甚至版本而有很大差异，并且大多数操作系统没有与它们交互的标准化方式。有些电脑甚至没有配备无线网卡。它与 Android 配合得如此出色的原因是，Google 可以保证每部安装了 Android 的手机都有适当的无线网络接口。

tl;博士不，对不起

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-23T11:21:09.060

您可以借助命令行工具获取可用网络列表，使用命令“netsh wlan show networks mode=Bssid”。试试下面的java方法。

```
public static ArrayList scanWiFi() {
        ArrayList<String> networkList = new ArrayList<>();
        try {
            // Execute command
            String command = "netsh wlan show networks mode=Bssid";
            Process p = Runtime.getRuntime().exec(command);
            try {
                p.waitFor();
            } catch (InterruptedException ex) {
                ex.printStackTrace();
            }
            BufferedReader reader = new BufferedReader(
                    new InputStreamReader(p.getInputStream())
            );
            String line;
            StringBuilder sb = new StringBuilder();
            String ssidArr[];

            while ((line = reader.readLine()) != null) {
                //System.out.println(line);
                if (line.contains("SSID ") && !line.contains("BSSID ")) {
                    sb.append(line);
                    networkList.add(line.split(":")[1]);
                    //System.out.println("data : " + ssidArr[1]);
                }
            }
            //System.out.println(networkList);            
        } catch (IOException e) {
        }
        return networkList;
    } 
```

# android - Android InputType 时间长

> ID：15869582
> 
> 赞同：2
> 
> 时间：2013-04-08T00:38:34.973
> 
> 标签：android

在我的布局中，我有一个带有 InputType 时间的 EditText。

```
android:inputType="time" 
```

如何将其转换为长？

我有一个函数可以使用 SimpleDateFormat 从 long 转换为 string，但我现在需要做相反的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T00:47:31.897

这样的事情应该这样做：

```
EditText editText = (EditText) findViewById(R.id.edit_text);
String value = editText.getText().toString();

try {
    DateFormat formatter = new SimpleDateFormat("hh:mm:ss");
    Date date = (Date) formatter.parse(value);
    long timeMilliSeconds = date.getTime();
}
catch (NumberFormatException e) {
    System.out.println("Error getting value: " + e);
} 
```

# javascript - Lightbox2 未在线显示

> ID：15869585
> 
> 赞同：1
> 
> 时间：2013-04-08T00:38:38.297
> 
> 标签：javascript, jquery, lightbox2

我正在尝试在页面中使用 Lightbox2 图片库 ( [http://lokeshdhakar.com/projects/lightbox2/](http://lokeshdhakar.com/projects/lightbox2/) )，但没有出现任何内容。我确定这与 javascript 排序或其他东西有关，我已经添加并链接了所有需要的文件，但仍然没有出现任何内容。您可以在[http://www.art-service.lv/zonglesanasskola_new/students_jug.php](http://www.art-service.lv/zonglesanasskola_new/students_jug.php)上看到这个地方，在第二个选项卡的辅助导航栏中，目前只有标题“第 2 页”。谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T01:18:29.260

实际上，这个问题是由您的“tabs_old.js”文件引起的。

在其第 17-21 行中，它具有：

```
//hide two tab contents we don't need
var pages = tabcon.getElementsByTagName("div");
  for (var i = 1; i < pages.length; i++) {
  pages.item(i).style.display="none";
}; 
```

这些代码将所有 DIV 隐藏在第二个选项卡中（第 2 页）。当在 Firebug 中移除此类样式时（在第 2 页的每个 DIV 中移除样式 =“display:none;”），您的 Lightbox 效果可以成功看到。

因此，您应该修改或删除以上行以使您的内容正确显示在页面上。换句话说，应该是只有第一级的 Tab DIV 才会有“display:none;”。但不是所有的 DIV。否则，即使您设置了“display:block”，它也只会显示具有指定类的 DIV，而不包括最初隐藏的子 DIV。

# jquery - jQuery 1.9.1 错误 - 出现在 IE 上但不是 Chrome

> ID：15869586
> 
> 赞同：1
> 
> 时间：2013-04-08T00:39:02.140
> 
> 标签：jquery, internet-explorer-9

我有一个 MVC 4 应用程序，其中包含一个带有多个字段集的表单的视图。当我在 Chrome 中发布此表单时，它会正确保存。在`IE 10.0.92`以下 jQuery 方法中出现错误。抛出错误的行有一个箭头。这大约是第 538 行。我确定在 Chrome 中执行时甚至没有调用此方法。

```
parseJSON: function (data) {
    // Attempt to parse using the native JSON parser first
    if (window.JSON && window.JSON.parse) {
-->        return window.JSON.parse(data);

    }

    if (data === null) {
        return data;
    }

    if (typeof data === "string") {

        // Make sure leading/trailing whitespace is removed (IE can't handle it)
        data = jQuery.trim(data);

        if (data) {
            // Make sure the incoming data is actual JSON
            // Logic borrowed from http://json.org/json2.js
            if (rvalidchars.test(data.replace(rvalidescape, "@")
                .replace(rvalidtokens, "]")
                .replace(rvalidbraces, ""))) {

                return (new Function("return " + data))();
            }
        }
    }

    jQuery.error("Invalid JSON: " + data);
}, 
```

我得到的错误如下：

![在此处输入图像描述](https://i.stack.imgur.com/16jqJ.png)

我对“数据”的值发出了警报，但得到了一个未定义的结果。我没有大量使用 jQuery 或 JavaScript 的经验。如果需要更多信息，我很乐意提供。

经过进一步测试，此更改似乎解决了问题，但我不确定这是正确的方法：

```
parseJSON: function (data) {
    if (data === undefined) {
        return data;
    }

    // Attempt to parse using the native JSON parser first
    if (window.JSON && window.JSON.parse) {
        return window.JSON.parse(data);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-26T09:48:46.690

用 Microsoft.jQuery.Unobtrusive.Validation nuget 包更新 jquery.validate.unobtrusive.js 文件，版本是 2.0.30506.0 然后这个错误已经解决。

# data-structures - 二叉搜索树（包装器）

> ID：15869591
> 
> 赞同：1
> 
> 时间：2013-04-08T00:39:34.173
> 
> 标签：data-structures, wrapper, binary-search-tree

我上周缺课，所以我正在看在线讲座（我的教授记录了他的讲座），他一直在提到“包装器”。

我不记得他解释过包装是什么。他这是什么意思？我用谷歌搜索但无济于事。我们学习数据结构的语言是 C。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:45:55.610

包装器通常是一些对象或函数，它将完整的实现隐藏在更易于使用的接口后面。通常，围绕二叉搜索树的包装器对象将是一个导出诸如“插入”、“删除”和“查找”之类的好函数的对象，而这些函数中的任何一个都没有显式的节点指针。这样，可以使用二叉搜索树，而不会将表示的详细信息泄露给客户端。

您有时还会看到术语“包装器”用于表示位于其他软件之上并简化它的任何软件。例如，一些用于网络的库可能是套接字 API 的包装器——它们使用套接字作为底层表示，但不将其暴露给客户端。这样，客户端可以使用更简单的库，而不用关心套接字 API 的所有低级细节。您有时还会看到使用 C++ 对象的 C 代码周围的 C++ 包装器，这些对象具有构造函数、析构函数、封装等，以简化 C 代码。

包装函数有时用于使递归函数更易于编写。在某些情况下，您可能有一个递归函数，它需要额外的参数才能正常运行。包装函数可能只是使用适当的参数调用递归函数。这样，您可以直接调用包装函数而不是调用递归函数，传入一堆其他参数。

希望这可以帮助！

# c# - 更改现有对象的依赖关系

> ID：15869592
> 
> 赞同：1
> 
> 时间：2013-04-08T00:39:49.490
> 
> 标签：c#, dependency-injection, structuremap

我正在开发 WPF 应用程序。
我使用[StructureMap](http://docs.structuremap.net/)来注入依赖项。
存在一些服务层类，它们从构造函数中提供参数。
我传递给构造函数的值将改变运行时间。
表示层的类使用服务为用户呈现数据。每当价值发生变化时，我都会再次注入新价值的服务。但是表示层的活动实例返回先前的值。
为了更好地理解，我准备了简单的示例。

```
// static class that keeps some value
public class ValueKeeper

{
    public static string Value { get; set; }
}

public interface IService
{
    string Value { get; set; }
}
// Service layer class
public class Service : IService
{
    // default constructor
    public Service(string value)
    {
        Value = value;
    }

    #region IService Members

    public string Value { get; set; }

    #endregion
}

public class Program
{
    private readonly IService _service;
    //injecting service class
    public Program(IService service)
    {
        _service = service;
    }
    // structuremap configuration
    private static void Config()
    {
        ObjectFactory.Initialize(x => x.Scan(scanner =>
                                                 {
                                                     scanner.TheCallingAssembly();

                                                     scanner.WithDefaultConventions();
                                                     x.For<IService>().CacheBy(InstanceScope.Hybrid).Use(() =>
                                                                                                             {
                                                                                                                 var service = new Service("value1");
                                                                                                                 return service;
                                                                                                             });
                                                 }));
    }
    // structuremap configuration after value changed.
    private static void ReConfig()
    {
        ObjectFactory.Configure(x => x.Scan(scanner =>
                                                 {
                                                     x.For<IService>().CacheBy(InstanceScope.Hybrid).Use(() =>
                                                                                                             {
                                                                                                                 var service =new Service(ValueKeeper.Value);
                                                                                                                 return service;
                                                                                                             });
                                                 }));
    }

    private string PresentationMethod()
    {
        return _service.Value;
    }

    private static void Main(string[] args)
    {
        Config();  // Firtst time injecting dependencies
        var prog = ObjectFactory.GetInstance<Program>(); 
        Console.WriteLine(prog.PresentationMethod()); // returns "value1"
        ValueKeeper.Value = "value 2"; //changing static property
        ReConfig(); // reconfig  service class with new property
         Console.WriteLine(prog.PresentationMethod()); // it returns value1 but I expect value2 .
        Console.ReadKey();
    }
} 
```

实际应用程序包含许多表示和服务类。
如何使用新对象和值更改实时服务实例？

* * *

更新：我看到了[这个](http://codebetter.com/jeremymiller/2009/01/16/quot-buildup-quot-existing-objects-with-structuremap/)链接。似乎通过使用 Setter Injection 可以更改现有对象。
二传手注射是我的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-29T13:23:52.847

您可以使用[策略模式](http://sourcemaking.com/design_patterns/strategy)在运行时轻松跟踪同一接口的实例并在它们之间切换。这是一个简单的例子：

```
var container = new Container(x => x.Scan(scan =>
{
    scan.TheCallingAssembly();
    scan.WithDefaultConventions();
    scan.AddAllTypesOf<IDiscountCalculator>();
}));
var strategy = container.GetInstance<IDiscountStrategy>();
Console.WriteLine(strategy.GetDiscount("Regular", 10)); // 0
Console.WriteLine(strategy.GetDiscount("Normal", 10)); // 1
Console.WriteLine(strategy.GetDiscount("Special", 10)); // 5 
```

这取决于以下类型：

```
public interface IDiscountStrategy 
{
    decimal GetDiscount(string userType, decimal orderTotal);
}

public class DiscountStrategy : IDiscountStrategy
{
    private readonly IDiscountCalculator[] _discountCalculators;

    public DiscountStrategy(IDiscountCalculator[] discountCalculators)
    {
        _discountCalculators = discountCalculators;
    }

    public decimal GetDiscount(string userType, decimal orderTotal)
    {
        var calculator = _discountCalculators.FirstOrDefault(x => x.AppliesTo(userType));
        if (calculator == null) return 0;
        return calculator.CalculateDiscount(orderTotal);
    }
}

public interface IDiscountCalculator
{
    bool AppliesTo(string userType);
    decimal CalculateDiscount(decimal orderTotal);
}

public class NormalUserDiscountCalculator : IDiscountCalculator
{
    public bool AppliesTo(string userType)
    {
        return userType == "Normal";
    }

    public decimal CalculateDiscount(decimal orderTotal)
    {
        return orderTotal * 0.1m;
    }
}

public class SpecialUserDiscountCalculator : IDiscountCalculator
{
    public bool AppliesTo(string userType)
    {
        return userType == "Special";
    }

    public decimal CalculateDiscount(decimal orderTotal)
    {
        return orderTotal * 0.5m;
    }
} 
```

或者，如果您想要立即处理短期依赖项，您应该注入一个[抽象工厂](http://sourcemaking.com/design_patterns/abstract_factory)来按需创建它们。

```
public ISomeObjectFactory
{
    ISomeObject Create();
    void Release(ISomeObject someObject);
}

public class SomeObjectFactory
    : ISomeObjectFactory
{
    //private readonly IAclModule aclModule;

    // Inject dependencies at application startup here
    //public SiteMapPluginProviderFactory(
    //    IAclModule aclModule
    //    )
    //{
    //    if (aclModule == null)
    //        throw new ArgumentNullException("aclModule");
    //
    //    this.aclModule = aclModule;
    //}

    public ISomeObject Create(IState state)
    {
        return new SomeObject(state);
        // return new SomeObject(state, this.aclModule);
    }

    pubic void Release(ISomeObject someObject)
    {
        var disposable = someObject as IDisposable;
        if (disposable != null)
        {
            disposable.Dispose();
        }
    }
} 
```

然后像这样使用：

```
public class Consumer : IConsumer
{
    private readonly ISomeObjectFactory someObjectFactory;

    public Consumer(ISomeObjectFactory someObjectFactory)
    {
        if (someObjectFactory == null)
            throw new ArgumentNullException("someObjectFactory");
        this.someObjectFactory = someObjectFactory; 
    }

    public void DoSomething(IState state)
    {
        var instance = this.someObjectFactory.Create(state);
        try
        {
            // Use the instance here.
        }
        finally
        {
            this.someObjectFactory.Release(instance);
        }
    }
} 
```

尽管此处未显示，但如果需要，工厂可以在不同的类之间切换，或者您可以在创建时将不同的依赖项（本示例中的 IState）传递给相同类型的类。

[服务定位器是反模式](http://blog.ploeh.dk/2010/02/03/ServiceLocatorisanAnti-Pattern/)的，除了最罕见的情况外，应该避免使用。

# ruby-on-rails - Heroku 不会让任何人退出应用程序

> ID：15869594
> 
> 赞同：1
> 
> 时间：2013-04-08T00:40:05.027
> 
> 标签：ruby-on-rails, heroku

我正在关注 Hartl 的 Ruby on Rails 教程，刚刚完成了有关登录和退出应用程序的章节。一切都在 localhost 上完美运行，但是当部署到 heroku 时，它会自动将您作为示例用户登录，并且退出按钮不再起作用。

就像我之前所说的，我可以在 localhost 上毫无问题地退出。它似乎只在heroku上被打破。

我还应该补充一点，如果我在以本地主机身份登录时创建一个新用户，它实际上会创建一个新用户并以该新用户身份登录。您甚至可以作为新用户注销。但是，一旦您以新用户身份注销，它就会重新以示例用户身份登录。

如果有帮助，这里是示例应用程序：[https ://serene-bayou-7583.herokuapp.com/](https://serene-bayou-7583.herokuapp.com/)

有谁知道这可能是什么原因造成的？我什至不知道我应该发布代码的哪一部分来帮助解决问题。

编辑：堆栈不会让我回答我自己的问题，所以这里是解决这个问题的其他人的方法

对于有此问题的其他人，这是我的问题的答案。从本质上讲，heroku 似乎将 NIL 与示例用户匹配。所以我们稍微修改一下代码来阻止这种行为。唯一的副作用是无法以示例用户身份保持登录状态，否则它可以正常工作！在您的会话助手中更改此设置：

```
 def current_user
        if cookies[:remember_token].present?
        @current_user ||= User.find_by_remember_token(cookies[:remember_token])
    end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T02:51:03.820

对于有此问题的其他人，这是我的问题的答案。从本质上讲，heroku 似乎将 NIL 与示例用户匹配。所以我们稍微修改一下代码来阻止这种行为。唯一的副作用是无法以示例用户身份保持登录状态，否则它可以正常工作！在您的会话助手中更改此设置：

```
 def current_user
    if cookies[:remember_token].present?
    @current_user ||= User.find_by_remember_token(cookies[:remember_token])
end 
```

结尾

# java - 字体文件不会删除

> ID：15869595
> 
> 赞同：2
> 
> 时间：2013-04-08T00:40:12.950
> 
> 标签：java, file, delete-file

我正在尝试安装 PhpStorm，经过长篇大论，看起来我有一些不好的字体妨碍了 Java。

我对 Java 完全陌生，但我发现这段代码可以遍历我的字体并找到坏的。我已经修改它以删除坏字体，但它不会删除。

```
import java.io.File;
import java.awt.Font;
import java.awt.GraphicsEnvironment;

public class myFontCheck {
  public static void main(String[] args) {
    Font[] fonts = GraphicsEnvironment.getLocalGraphicsEnvironment().getAllFonts();
    for (int i = 0; i < fonts.length; i++) {
      final Font font = fonts[i];
      final String name = font.getFontName();

      if (font.canDisplay('a') &&
        font.canDisplay('z') &&
        font.canDisplay('A') &&
        font.canDisplay('Z') &&
        font.canDisplay('0') &&
        font.canDisplay('1')) {
        //System.out.println(" OK.");
      } else {
        File file = new File("c:\\Windows\\Fonts\\" + name + ".ttf");
        if(file.exists()) {
          System.out.println("Bad Font: " + name);
          file.delete();
        }
      }
    }
  }
} 
```

我假设这是文件权限冲突，但我不知道如何更改权限。我需要以管理员身份运行它吗？

或者..你能告诉我如何将坏文件打开到资源管理器窗口中，以便我可以“全选”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:51:57.893

```
if (font.canDisplay('a') &&
    font.canDisplay('z') &&
    font.canDisplay('A') &&
    font.canDisplay('Z') &&
    font.canDisplay('0') &&
    font.canDisplay('1')) {
    //System.out.println(" OK.");
  } else {
    System.out.println("Bad Font: " + name);
    File file = new File("c:\\Windows\\Fonts\\" + name + ".ttf");
    file.delete();
  } 
```

取消注释“坏字体行”。运行应用程序时是否会打印出任何内容？我怀疑不是，因为尽管您可能不喜欢字体的显示方式，但 canDisplay 可能会返回 true。

或者，“新文件”的字符串构造可能会导致某些错误。我也会尝试将其打印出来，并检查该文件的文件系统。

有点像这样：

```
 } else {
    System.out.println("Bad Font: " + name);
    String fn = "c:\\Windows\\Fonts\\" + name + ".ttf";
    System.out.println("Trying to delete: " + fn);
    File file = new File(fn);
    file.delete();
  } 
```

# ruby-on-rails - 发送注册电子邮件的最佳方式（DEVISE）

> ID：15869597
> 
> 赞同：0
> 
> 时间：2013-04-08T00:40:45.150
> 
> 标签：ruby-on-rails, devise

Devise 允许您在此处自定义邮件。 [https://github.com/plataformatec/devise/wiki/How-To:-Use-custom-mailer](https://github.com/plataformatec/devise/wiki/How-To:-Use-custom-mailer)。

但是，我也可以像这里一样制作自己的 actionmailer。 [http://railscasts.com/episodes/206-action-mailer-in-rails-3](http://railscasts.com/episodes/206-action-mailer-in-rails-3)

当用户在我的网站上注册时，我想发送两封不同的电子邮件，一封包含注册信息给我自己，一封给用户以感谢他们的注册。

做这个的最好方式是什么？还是有一种方法可以让我做到这一点？我正在考虑在创建用户后在模型中创建一个钩子（回调）。但是，这意味着如果我手动创建记录，注册电子邮件也会被发送出去。如果我手动创建用户，我不希望发送电子邮件。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:50:15.287

你可以有一个回调，如`after_create :send_email_to_admin`

```
def send_email_to_admin
  # your implementation
end 
```

您还可以设置一个条件，以便在您自己手动创建记录时不会发送电子邮件。我不认为 Devise 提供了这样的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T00:54:04.163

如果您不想向手动创建的用户发送电子邮件，则有 3 种解决方法。

1.  首先创建用户，然后添加钩子。

2.  在您手动创建的用户的电子邮件上添加特殊模式。说`(.*)-very-weird-suffix@weired-email.com`。你在钩子里判断这个模式。

3.  在 users 表中添加一个字段以检查该帐户是否由您创建。我真的不建议这样做，除非创建帐户是您日常工作的一部分。

# javascript - 语法错误，无法识别的表达式：${languageLabel}

> ID：15869601
> 
> 赞同：-1
> 
> 时间：2013-04-08T00:41:26.453
> 
> 标签：javascript, jquery

尝试更改 javascript 模板表达式的 textnode 文本值时，控制台给了我一个错误，即`${foo}`

**JS**

```
 // this.textContent here gives ${languageLabel}
            var variable = UI.patternMatch(textNodes_elRef);
            $(variable).nodeValue ="language";
        });

patternMatch : function(textNode) {
    var templateRegex = /\${([\S\s]*?)\}/g;
    return $(textNode).contents().filter(function() {
        if($(this.textContent).match(templateRegex)){
          // ** How do i return the textnode with only matched pattern**
        } 
```

所以总结一下，基本上我想将 ${languagelabel} 的 textnode 的 textValue 更改为语言，但我得到错误为 ** Syntax error, unrecognized expression: ${languageLabel}**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T01:57:05.160

您可以只存储对`textNode`匹配实例的引用并在循环后返回它，您不必仅使用 jQuery 来修改 textNode 的`nodeValue`属性。这是一个示例[http://jsfiddle.net/LAud7/](http://jsfiddle.net/LAud7/)。

```
function patternMatch(el) {
    var templateRegex = /\${([\S\s]*?)\}/g,
        nodeFound;

    $(el).contents().each(function() {
        if (templateRegex.test(this.nodeValue)) {
            nodeFound = this;
            return false;
        }
    });

    return nodeFound;
}

patternMatch($('#test')).nodeValue = 'replaced content'; 
```

*请注意，使用这种方法，如果`textNode`包含`${...}`也包含其他文本，它不会给出预期的结果，因为所有文本都将被替换，因此您需要确保`${...}`包含在它自己的`textNode`.*

# c++ - 自定义 GtkFileChooserWidget

> ID：15869602
> 
> 赞同：0
> 
> 时间：2013-04-08T00:41:27.203
> 
> 标签：c++, gtk

我在构建自定义 GtkFileChooserDialog 时遇到了一些麻烦。如何将自定义图标设置为弹出对话框（例如，此对话框弹出，当我单击未插入 CD 的 CD-ROM 时）并将自定义名称设置为“名称”、“修改”、“大小”标签？谢谢！

PS拜托，对不起我的英语...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:28:47.810

我无法清楚地理解，你的问题是什么。这是我从您的问题中了解到的，您想更改文件选择器对话框中的按钮名称。

您可以在创建文件选择对话框时指定按钮的名称。

GtkWidget *对话框；

dialog = gtk_file_chooser_dialog_new ("Open File", parent_window, "Buttonname 1", "Buttonname 2", "Buttonname 3", NULL);

Buttonname 1, 2 ,3 是您的自定义按钮的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:04:13.397

文件名和修改日期显示在 GtkFileChooserDialog 内的树形视图中。

我认为没有办法从 GtkFileChooserDialog 获取树视图。如果您设法获得树视图。您可以更改树视图的列名。请参阅 andrew krauss 在 GTK+ 中的编程，构建您自己的自定义小部件模块。你可能会得到一些帮助。

这是GtkFileChooserDialog的结构，

```
struct GtkFileChooserDialog 
{
  GtkDialog parent_instance;
  GtkFileChooserDialogPrivate *priv;
};

/* GtkFileChooserDialog private */
struct _GtkFileChooserDialogPrivate
{
  GtkWidget *widget;
  char *file_system;
  /* for use with GtkFileChooserEmbed */
  gboolean response_requested;
}; 
```

GTK 中没有特定的 API 可以从 GtkFileChooserDialog 获取树视图。Treeview 不是此结构的一部分，它是内部的，程序员无法访问。

如果这不起作用，请尝试编写您自己的自定义小部件。或设计您自己的文件选择器对话框。

# client - 通过 ad-hoc 连接使用 WiFly 扩展板控制 Arduino 连接的伺服系统

> ID：15869603
> 
> 赞同：2
> 
> 时间：2013-04-08T00:41:33.620
> 
> 标签：client, arduino, telnet, adhoc

我正在尝试通过临时连接控制一些连接到 Arduino（面包板）的伺服系统。我已经建立了网络，可以远程登录到[WiFly](https://www.sparkfun.com/products/9954)，甚至可以进行一些简单的控制（例如，打开和关闭 LED）。但是，当我尝试根据在 telnet 会话中键入的字符启动和停止伺服时，伺服将运行半秒，然后停止 - 之后 WiFly 完全停止响应。我的 LED 代码有效：

```
void loop(){
    delay(100);
    index = 0;

    while(serialWiFly.available() > 0){
        if(index < 100){
            inputIn = serialWiFly.read();
            input[index] = inputIn;
            index++;
            input[index] = '\0';
        }
        if(inputIn == 'a')
            digitalWrite(13, HIGH);
        if(inputIn == 'z')
            digitalWrite(13, LOW);
    } //end while
    serialWiFly.flush();
    delay(10);
} //end loop 
```

这让我可以通过按“a”打开 LED，然后按“z”关闭 LED。凉爽的。但是当我添加一个`moveForward()`函数时：

```
void moveForward(){
    myservo.write(124);
} 
```

并从我的循环中调用它：

```
if(inputIn == 'a') moveForward(); 
```

正如我所描述的，伺服将旋转然后停止。我在这里不知所措 - 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T21:45:24.820

如果有人偶然发现这个问题，我仍然不知道是什么原因造成的，但我通过使用 Arduino MiniPro 而不是我的独立面包板单元来修复它。我相信这可能与将“重置”引脚拉高或拉低有关（在我的面包板版本中我忽略了这样做。）

# iphone - Foursquare API UIWebView

> ID：15869605
> 
> 赞同：2
> 
> 时间：2013-04-08T00:41:54.527
> 
> 标签：iphone, ios, objective-c, foursquare

正如这里所建议的“ [https://developer.foursquare.com/overview/auth](https://developer.foursquare.com/overview/auth) ”，我在 webview 中获取访问令牌，然后在获取访问令牌后关闭浏览器：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {
    NSString *URLString = [[self.webView.request URL] absoluteString];
    NSLog(@"--> %@", URLString);
    if ([URLString rangeOfString:@"access_token="].location != NSNotFound) {
        NSString *accessToken = [[URLString componentsSeparatedByString:@"="] lastObject];
        NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
        [defaults setObject:accessToken forKey:@"access_token"];
        [defaults synchronize];
        [self.webView removeFromSuperview];

    }

} 
```

一个类似的例子“ [https://github.com/anoopr/core-data-talk/blob/master/example/Classes/FoursquareAuthViewController.m](https://github.com/anoopr/core-data-talk/blob/master/example/Classes/FoursquareAuthViewController.m) ”

但是一旦我删除了 webview，我就会得到一个黑屏。这是有道理的，因为我不再有观点了。但我可能应该做一些类似 [self.view addSubview:self.Anotherview] 的事情，我不确定另一个视图应该是什么。我可以继续使用另一个 ViewController 吗？

我对IOS很新，所以任何帮助都会非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T00:56:18.893

从视图中删除 UIWebView 后，您可以放置​​任何您想要的东西。例如，如果你只想显示一张地图，你可以添加一个地图视图，或者更简单，如果你使用界面构建器，你可以在顶部有一个地图视图和一个 web 视图，删除 web 视图将离开你与地图视图。但是，如果您在 Web 视图的视图控制器（您放置 Web 视图的视图控制器）上拥有的内容与您在获得访问令牌后试图实现的目标无关，那么最干净的方法就是将访问令牌存储在某处否则（例如 App 委托类）执行到另一个视图控制器的 segue，并从那里使用令牌来满足您的需要。您甚至不需要处理从超级视图中删除 Web 视图，您已经离开该视图控制器并继续使用另一个视图控制器。尤其，

# java - 通过 USB 从 Java 程序读取时，Arduino 出现 Serial.readbytes() 问题

> ID：15869609
> 
> 赞同：3
> 
> 时间：2013-04-08T00:42:33.657
> 
> 标签：java, io, serial-port, usb, arduino

我正在使用[Arduino Uno](http://arduino.cc/en/Main/ArduinoBoardUno)。我正在经历奇怪的行为`Serial.readbytes()`。Arduino 通过 COM4 上的 USB 供电和通信。我在 64 位 Windows 7 上运行[Eclipse 。](http://en.wikipedia.org/wiki/Eclipse_%28software%29)

我当前的 Arduino 代码如下所示；延迟是这样我可以启动和停止我的 Java 服务并查看 Arduino IDE 中的串行窗口，inputBuffer 是一个字符数组。

```
char inputBuffer[10];   // For incoming serial data
void setup() {
    Serial.begin(9600); // Opens serial port, sets data rate to 9600 bit/s.
}

void GetTemp(){
    int temp = 123;
    Serial.print(temp);
}

void loop() {
    if (Serial.available() > 0) {
        Serial.readBytes(inputBuffer, Serial.available());
        delay(5000);
        Serial.print("I got this ->");
        Serial.print(inputBuffer);
        Serial.println("<-");
    }
    delay(5000);
    Serial.println("delay");
    Serial.println(inputBuffer[0], DEC);
} 
```

这是我的 Java 端的代码。我从*[Two way communcation with the serial port](http://rxtx.qbang.org/wiki/index.php/Two_way_communcation_with_the_serial_port)*修改它。这只是在开始时发送一个字节数组。

```
import gnu.io.CommPort;
import gnu.io.CommPortIdentifier;
import gnu.io.SerialPort;
import java.io.IOException;
import java.io.OutputStream;

public class TwoWaySerialComm
{
    public TwoWaySerialComm()
    {
        super();
    }

    void connect ( String portName ) throws Exception
    {
        CommPortIdentifier portIdentifier = CommPortIdentifier.getPortIdentifier(portName);
        if ( portIdentifier.isCurrentlyOwned() )
        {
            System.out.println("Error: Port is currently in use");
        }
        else
        {
            CommPort commPort = portIdentifier.open(this.getClass().getName(),2000);

            if ( commPort instanceof SerialPort )
            {
                SerialPort serialPort = (SerialPort) commPort;
                serialPort.setSerialPortParams(9600,SerialPort.DATABITS_8,SerialPort.STOPBITS_1,SerialPort.PARITY_NONE);

                OutputStream out = serialPort.getOutputStream();

                (new Thread(new SerialWriter(out))).start();
            }
            else
            {
                System.out.println("Error: Only serial ports are handled by this example.");
            }
        }
    }

    public static class SerialWriter implements Runnable
    {
        OutputStream out1;

        public SerialWriter ( OutputStream out )
        {
            this.out1 = out;
        }

        public void run ()
        {
            try
            {
                byte[] test = ("H567").getBytes();//testing string to send
                this.out1.write(test);
            }
            catch ( IOException e )
            {
                e.printStackTrace();
            }
        }
    }

    public static void main ( String[] args )
    {
        try
        {
            (new TwoWaySerialComm()).connect("COM4");
        }
        catch ( Exception e )
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

当我运行它时，我的 Arduino 只打印出一个空白行。如果我首先使用串行窗口准备带有“hiya”的 Arduino，那么当执行 java 时，它将返回到空白行。

由于每次我发送“H567\r\n”时字符数组都会被覆盖，然后在串行窗口中键入发送的“hiya”，额外的换行符仍在执行，所以我知道字符正在以某种方式存储。

另一项测试是将最后一个更改`Serial.prinln()`为`Serial.println(inputBuffer[0], DEC)`. 使用串行窗口，结果符合预期，但从 Java 中它只打印出“0”。来自 Arduino 与 Java 代码的串行通信非常棒，而不是从 Java 代码到 Arduino。我该如何解决这个问题？

根据建议，我尝试阅读`Serial.available()`而不是固定的最大值 10。没有经历任何变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T23:17:12.563

我找到了解决方案，但我不确定原因。启动串行写入线程时，我必须调用`thread.sleep(2000)`start 以使 Arduino 正确读取字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:03:33.250

尝试`out1.flush()`在`out1.write()`.

# javascript - 监控对象属性的变化

> ID：15869614
> 
> 赞同：2
> 
> 时间：2013-04-08T00:43:52.680
> 
> 标签：javascript, object, observer-pattern

假设我有一个类似于以下的对象：

```
Cars = {
    "car_one": {
        data: {
            make: "Ford",
            model: "Festiva"
        },
        img: "car_one.jpg"
    },
    "car_two": {
        data: {
            make: "Chevy",
            model: "Pinto",
            color: "Green"
        },
        img: "car_two.jpg"
    }
    ...and so on...
} 
```

我希望找到一种方法来监视`data`属性（和所有子属性）的更改，然后能够设置一个函数来触发。

我一直在查看[Object.watch()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/watch)但测试似乎表明我需要手动设置它来检查每个属性`Cars.{some_car}.data`（如我的示例所示）不是一个常量集。我想我希望有一种我不知道的不太复杂的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T01:16:43.717

根据您对其调用方式的控制程度，您可以创建一个访问器函数。该函数可以将一个对象作为参数，如果设置了参数，则将该对象设置为当前值。为了您的使用，您可以在此处添加某种类型的触发器。如果没有传递参数，它将返回当前值。

[这就是淘汰赛](http://knockoutjs.com/)使用效果很好的 API 类型。

在现代浏览器中，[getter 和 setter](http://kangax.github.io/es5-compat-table/#Getter%20in%20property%20initializer)使这很容易。对于较旧的值，您可以拥有一个访问属性，然后是另一个用作数据持有者的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T01:18:07.137

不幸的是，截至今天，最简单的方法可能是循环访问属性`data`并调用`Object.watch`它们中的每一个。但是，我们最终可能会[`Object.observe`](http://wiki.ecmascript.org/doku.php?id=harmony:observe)进行救援。如果您正在寻找跨浏览器的`Obect.watch`实现，请查看[此处](https://stackoverflow.com/questions/1029241/javascript-object-watch-for-all-browsers)。

其他替代方法是将您的数据包装在一个可观察的对象中，该对象允许通过通用`set`方法修改数据，该方法会在修改某些属性时触发事件，或者让某些属性监视任务以特定间隔执行或由特定操作触发这将检查对象的更改。然而，这些替代方案并不简单。

# php - pChart 2.0 图像映射和缓存同时进行？

> ID：15869615
> 
> 赞同：0
> 
> 时间：2013-04-08T00:43:56.767
> 
> 标签：php, caching, charts, imagemap, pchart

是否可以同时使用图像地图和缓存图表？当我启用缓存时，不再创建图像映射。我需要图像映射，以便在我将鼠标悬停在其上时显示该值，但我希望能够缓存图表以显着减少我的 cpu 负载。我无法在任何地方找到有关此的信息，而且 pChart 论坛一团糟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T12:45:11.153

我能够使用以下代码使其工作。对于论坛的格式和限制，我深表歉意。我还必须修改 pImage.class 以不删除 tmp 文件，因此将它们保存为缓存图像。

```
if ( $myCache->isInCache($ChartHash)) {
/* Retrieve the image map */
if (isset($_GET["ImageMap"]) || isset($_POST["ImageMap"])) {
$StorageFolder = PCHART_PATH . "/cache/imageMap";
$UniqueID = "AreaChart".$ChartHash;
if (file_exists($StorageFolder."/".$UniqueID.".map")) {
$Handle = @fopen($StorageFolder."/".$UniqueID.".map", "r");
if ($Handle) { while (($Buffer = fgets($Handle, 4096)) !== false) { echo $Buffer; } }
fclose($Handle);
}
}
/* Output cached image */
$myCache->strokeFromCache($ChartHash,"pictures/drawAreaChart.".$ChartHash.".png");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T15:39:34.633

对于当前版本（2.1.3），这是不可能的。图像映射仅在 pChart 实际绘制图像时创建，即稍后当您从缓存中获取图像时，图像映射不可用。

要绕过它，您可以自己缓存图像映射。[从http://wiki.pchart.net/doc.imagemaps.fundamentals.html](http://wiki.pchart.net/doc.imagemaps.fundamentals.html)上的示例开始，您可以按照这些方式做一些事情

```
//initialise the map
$myPicture->initialiseImageMap("ImageMapBarChart", IMAGE_MAP_STORAGE_FILE, "BarChart", "../tmp");
//draw the chart
$Settings = array("RecordImageMap" => TRUE);
$myPicture->drawBarChart($Settings);
//the image map is ready for you here
//so before you output the chart get the map with dumpImageMap() and copy it to YOUR OWN CACHE
$myPicture->dumpImageMap("ImageMapBarChart", IMAGE_MAP_STORAGE_FILE, "BarChart", "../tmp"); 
```

我知道这是一个老问题，但我希望这会有所帮助。

# animation - Haskell Gloss 没有动画

> ID：15869617
> 
> 赞同：3
> 
> 时间：2013-04-08T00:44:01.847
> 
> 标签：animation, haskell, graphics, gloss

我有一个程序可以模拟社区中许多代理的交互。我正在使用[Gloss 库](http://hackage.haskell.org/packages/archive/gloss/1.0.0.0/doc/html/Graphics-Gloss.html)为交互设置动画，代理的图片正确渲染，而不是动画。我通过生成一个模拟来对其进行动画处理，该模拟是一个交互列表，然后我选取与第二个动画相对应的一个，然后在其中渲染该交互。将其输出到终端时，用于模拟的代码可以正常工作。编码：

```
render ::  Int -> History -> Picture -- assume window to be square
render size (History int agents) =  Pictures $ map (drawAgent (step`div`2) colors step) agents
    where step = size*6 `div` (length agents)
          --agents = nub $ concat $ map (\(Interaction a1 a2 _ ) -> [a1,a2]) int
          nubNames = nub $ map (getName . name) agents --ignore the first two letters of name
          colors = Map.fromList $ zipWith (\name color-> (name, color)) nubNames (cycle colorlist)
          colorlist = [red,green,blue,yellow,cyan,magenta,rose,violet,azure,aquamarine,chartreuse,orange]

drawAgent :: Int -> Map.Map String Color -> Int -> Agent -> Picture
drawAgent size colors step agent =
    color aColor (Polygon [(posA,posB),(posA,negB),(negA,negB),(negA,posB)])
    where aColor = fromMaybe black $ Map.lookup (getName $ name agent ) colors
          a = (fst $ position agent) * step
          b = (snd $ position agent) * step
          posA = fromIntegral $ a+size
          negA = fromIntegral $ a-size
          posB = fromIntegral $ b+size
          negB = fromIntegral $ b-size

simulate :: Int -> [Agent] -> [History]
simulate  len  agents = trace ("simulation"
                        (playRound agents len) : 
                         simulate len (reproduce (playRound agents len))

main =  do
    a <- getStdGen
          G.animate (G.InWindow "My Window" (400, 400) (0,0)) G.white 
          (\time ->(render 400) $ ((simulate 5 (agent a))!!(floor time)))

    where agent a = generate a 9
          sim a = simulate 40 (agent a) 
```

当我执行这个时，它会说模拟正在运行，但只渲染第一个交互。

```
 $ ghc -O2 -threaded main.hs && ./main
  [6 of 8] Compiling Prisoners        ( Prisoners.hs, Prisoners.o )
  Linking main ...
  simulation
  simulation
  simulation 
```

它会继续这样，直到我停止它，每次都渲染相同的图片。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:03:06.537

（所以评论框不会让我粘贴代码）

你不为我编译。您使用的是什么版本的 Gloss，API 已从 v1.0 更改为 v1.7.x。什么版本的 GHC？什么操作系统？

这个简单的例子对你有用吗？

```
{- left click to create a circle;  escape to quit  -}
import Graphics.Gloss
import Graphics.Gloss.Interface.Pure.Game

initial _ = [(0.0,0.0) :: Point]

event (EventMotion (x,y)) world = world --(x,y)
event (EventKey (MouseButton LeftButton) Up mods (x,y)) world = (x,y):world
event _                   world = world

step time world = world 

draw pts = Pictures $ map f pts
  where f (x,y) = translate x y (circle 10)

m = play (InWindow "Hi" (600,600) (200,200)) white 1 (initial 0) draw event step 
```

# c - C 中与输入的字符比较

> ID：15869618
> 
> 赞同：1
> 
> 时间：2013-04-08T00:44:09.283
> 
> 标签：c

我是一名 C 爱好者，我的任务是编写一个接受命令行参数的程序，其中一个参数必须是字符“N”或字符“A”。这是我认为会有效的方法：

```
//check argv[2], valid should be 1 at this point if argv[1] is an integer
printf("Valid is currently: %d, valid);
printf("The second argument is: %s, argv[2]);
if(argv[2] != "N" && argv[2] != "A") { valid = 0; }
printf("Valid is currently: %d, valid"); 
```

给定 input ，并在给定 if 语句之前和之后`./a.out 4 A`using语句，我实现了以下输出：`printf`

```
Valid is currently: 1
The second argument is: A
Valid is currently: 0 
```

我认为只有当 argv[2] 不是“N”或“A”时，这才会有效地使有效 - 无效位无效，但它不起作用。然后我尝试`strcmp`在类似的代码片段中使用，以不成功的结果。

这是我在 C 中的第一个任务，所以请温柔一点，但是我尝试了从更改`"`为`'`、使用`strcmp`而不是`!=`甚至使用的所有方法`atoi`，尽管我不知道我是否正确使用它。我不理解 C 字符串输入或比较中是否存在固有的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T00:47:03.957

要将其作为字符串进行比较，请尝试：

```
if (strcmp(argv[2], "N") != 0 && strcmp(argv[2], "A") != 0)
// can be reduced to:
if (strcmp(argv[2], "N") && strcmp(argv[2], "A")) 
```

或者您也可以将其作为单个字符进行比较：

```
if (argv[2][0] != 'N' && argv[2][0] != 'A') 
```

但这可能不是通用的。

# java - android应用程序崩溃和列表视图未显示

> ID：15869621
> 
> 赞同：1
> 
> 时间：2013-04-08T00:44:58.230
> 
> 标签：java, android, eclipse

每次我尝试在崩溃的位置使用列表视图运行应用程序，或者当我让它工作时，列表视图不会显示 iv 尝试更改列表视图的位置，即在全屏内容下的第一帧布局之后和之后框架布局全屏内容控件，但仍然无法正常工作

这是活动视图 xml

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#0099cc"
tools:context=".ActiveCheatsView" >

<TextView
    android:id="@+id/fullscreen_content"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center"
    android:keepScreenOn="true"
    android:text="@string/ActiveCheats"
    android:textColor="#000000"
    android:textSize="50sp"
    android:textStyle="bold" />

<!--
     This FrameLayout insets its children based on system windows using
     android:fitsSystemWindows.
-->

<ListView
    android:id="@+id/Games"
    android:layout_width="fill_parent"
    android:layout_height="410dp" >
</ListView>

<FrameLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fitsSystemWindows="true" >

    <LinearLayout
        android:id="@+id/fullscreen_content_controls"
        style="?buttonBarStyle"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom|center_horizontal"
        android:background="@color/black_overlay"
        android:orientation="horizontal"
        tools:ignore="UselessParent" >

        <Button
            android:id="@+id/Button01"
            style="?buttonBarButtonStyle"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/Search" />

    </LinearLayout>

</FrameLayout> 
```

这是java视图

```
 package com.example.activecheats;

import com.example.activecheats.util.SystemUiHider;

import android.annotation.TargetApi;
import android.app.Activity;
import android.os.Build;
import android.os.Bundle;
import android.os.Handler;
import android.view.MotionEvent;
import android.view.View;
import android.widget.ListView;

import java.io.InputStream;
import java.util.ArrayList;
import java.util.List;

/**
 * An example full-screen activity that shows and hides the system UI (i.e.
 * status bar and navigation/system bar) with user interaction.
 * 
 * @see SystemUiHider
 */
public class ActiveCheatsView extends Activity {
    /**
     * Whether or not the system UI should be auto-hidden after
     * {@link #AUTO_HIDE_DELAY_MILLIS} milliseconds.
     */
    private static final boolean AUTO_HIDE = true;

    /**
     * If {@link #AUTO_HIDE} is set, the number of milliseconds to wait after
     * user interaction before hiding the system UI.
     */
    private static final int AUTO_HIDE_DELAY_MILLIS = 3000;

    /**
     * If set, will toggle the system UI visibility upon interaction. Otherwise,
     * will show the system UI visibility upon interaction.
     */
    private static final boolean TOGGLE_ON_CLICK = true;

    /**
     * The flags to pass to {@link SystemUiHider#getInstance}.
     */
    private static final int HIDER_FLAGS = SystemUiHider.FLAG_HIDE_NAVIGATION;

    /**
     * The instance of the {@link SystemUiHider} for this activity.
     */
    private SystemUiHider mSystemUiHider;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_active_cheats_view);

        final View controlsView = findViewById(R.id.fullscreen_content_controls);
        final View contentView = findViewById(R.id.fullscreen_content);

        // Set up an instance of SystemUiHider to control the system UI for
        // this activity.
        mSystemUiHider = SystemUiHider.getInstance(this, contentView,
                HIDER_FLAGS);
        mSystemUiHider.setup();
        mSystemUiHider
                .setOnVisibilityChangeListener(new SystemUiHider.OnVisibilityChangeListener() {
                    // Cached values.
                    int mControlsHeight;
                    int mShortAnimTime;

                    @Override
                    @TargetApi(Build.VERSION_CODES.HONEYCOMB_MR2)
                    public void onVisibilityChange(boolean visible) {
                        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB_MR2) {
                            // If the ViewPropertyAnimator API is available
                            // (Honeycomb MR2 and later), use it to animate the
                            // in-layout UI controls at the bottom of the
                            // screen.
                            if (mControlsHeight == 0) {
                                mControlsHeight = controlsView.getHeight();
                            }
                            if (mShortAnimTime == 0) {
                                mShortAnimTime = getResources().getInteger(
                                        android.R.integer.config_shortAnimTime);
                            }
                            controlsView
                                    .animate()
                                    .translationY(visible ? 0 : mControlsHeight)
                                    .setDuration(mShortAnimTime);
                        } else {
                            // If the ViewPropertyAnimator APIs aren't
                            // available, simply show or hide the in-layout UI
                            // controls.
                            controlsView.setVisibility(visible ? View.VISIBLE
                                    : View.GONE);
                        }

                        if (visible && AUTO_HIDE) {
                            // Schedule a hide().
                            delayedHide(AUTO_HIDE_DELAY_MILLIS);
                        }
                    }
                });

        // Set up the user interaction to manually show or hide the system UI.
        contentView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                if (TOGGLE_ON_CLICK) {
                    mSystemUiHider.toggle();
                } else {
                    mSystemUiHider.show();
                }
            }
        });

        // Upon interacting with UI controls, delay any scheduled hide()
        // operations to prevent the jarring behavior of controls going away
        // while interacting with the UI.
        findViewById(R.id.Button01).setOnTouchListener(
                mDelayHideTouchListener);
    }

    @Override
    protected void onPostCreate(Bundle savedInstanceState) {
        super.onPostCreate(savedInstanceState);

        // Trigger the initial hide() shortly after the activity has been
        // created, to briefly hint to the user that UI controls
        // are available.
        delayedHide(100);
    }

    /**
     * Touch listener to use for in-layout UI controls to delay hiding the
     * system UI. This is to prevent the jarring behavior of controls going away
     * while interacting with activity UI.
     */
    View.OnTouchListener mDelayHideTouchListener = new View.OnTouchListener() {
        @Override
        public boolean onTouch(View view, MotionEvent motionEvent) {
            if (AUTO_HIDE) {
                delayedHide(AUTO_HIDE_DELAY_MILLIS);
            }
            return false;
        }
    };

    Handler mHideHandler = new Handler();
    Runnable mHideRunnable = new Runnable() {
        @Override
        public void run() {
            mSystemUiHider.hide();
        }
    };

    /**
     * Schedules a call to hide() in [delay] milliseconds, canceling any
     * previously scheduled calls.
     */
    private void delayedHide(int delayMillis) {
        mHideHandler.removeCallbacks(mHideRunnable);
        mHideHandler.postDelayed(mHideRunnable, delayMillis);
    }

private List<Games> gamesList= new ArrayList<Games>();

private List<Games> gamesList;

/** Called when the activity is first created. */
public void onCreate1(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Set the View layer
    setContentView(R.layout.activity_active_cheats_view);
    setTitle("ActiveCheats");

    // Create Parser for games.xml
    GamesParser GamesParser = new GamesParser();
    InputStream inputStream = getResources().openRawResource(
            R.layout.games);

    // Parse the inputstream
    GamesParser.parse(inputStream);

    setGamesList(com.example.activecheats.GamesParser.getList());

    // Create a customized ArrayAdapter
    GamesArrayAdapter adapter = new GamesArrayAdapter(
            getApplicationContext(), R.layout.games_listitem, countryList);

    // Get reference to ListView holder
    ListView lv = (ListView) this.findViewById(R.id.Games);

    // Set the ListView adapter
    lv.setAdapter(adapter);
}

public List<Games> getGamesList() {
    return gamesList;
}

public void setGamesList(List<Games> gamesList) {
    this.gamesList = gamesList;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:34:31.510

```
 <ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/> 
```

在你的 xml 文件中试试这个，你的 Mianactivity 应该扩展 ListActivity

# script# - 脚本中的 Asm.js 支持#

> ID：15869625
> 
> 赞同：0
> 
> 时间：2013-04-08T00:45:18.653
> 
> 标签：script#, asm.js

将 asm.js 支持添加到 Script# 是否可行？

哪里需要努力？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T01:50:06.950

这将是非常有趣的——这个讨论的正确位置真的在 script# github 存储库本身 ( [https://github.com/nikhilk/scriptsharp](https://github.com/nikhilk/scriptsharp) ) 上。

我还没有查看约束到 asm.js 模型的所有细节，但我有兴趣帮助完成这项工作。我们可以插入不同的代码/脚本生成器——生成器的输入是代码的模型，并且生成器可以为 javascript 的子集生成脚本。我相信一旦对 asm.js 子集有很好的理解，这种努力将是合理的。

我们还想修改 ss.js（脚本运行时）以符合 asm.js 子集。

希望看到你在 github 上打开这个并进一步讨论，甚至可能做出贡献:)

# android - 文件浏览器android的主页和后退按钮

> ID：15869626
> 
> 赞同：1
> 
> 时间：2013-04-08T00:45:35.157
> 
> 标签：android, android-widget

我正在实现一个简单的文件浏览器，并且导航工作正常（感谢在线资源）现在我想制作一个主页和后退按钮来分别直接导航到设置的根目录和父目录。我制作了一个操作栏并添加了两个按钮，但我不知道如何让它们正常工作。最后一个功能是设置按钮功能。如果我没有正确发布代码，请提前抱歉以下是我拥有的代码（我正在扩展 ListActivity）：

```
 private List<String> item = null;
 private List<String> path = null;
 private String root;
 private TextView myPath;
 private File f;

@Override
public boolean onCreateOptionsMenu(Menu menu){
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    myPath = (TextView)findViewById(R.id.path);

    root = Environment.getExternalStorageDirectory().getPath();

    getDir(root);
}

private void getDir(String dirPath)
{
 myPath.setText("Location: " + dirPath);
 item = new ArrayList<String>();
 path = new ArrayList<String>();
 f = new File(dirPath);
 File[] files = f.listFiles();

 if(!dirPath.equals(root))
 {
  //item.add(root);
  //path.add(root);
  item.add("../");
  path.add(f.getParent()); 
 }

 for(int i=0; i < files.length; i++)
 {
  File file = files[i];

  if(!file.isHidden() && file.canRead()){
   path.add(file.getPath());
      if(file.isDirectory()){
       item.add(file.getName() + "/");
      }else{
       item.add(file.getName());
      }
  } 
 }

 ArrayAdapter<String> fileList =
   new ArrayAdapter<String>(this, R.layout.rows, item);
 setListAdapter(fileList); 
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    File file = new File(path.get(position));

    if (file.isDirectory())
    {
        if(file.canRead()){
            getDir(path.get(position));
        }else{
            new AlertDialog.Builder(this)
            .setIcon(R.drawable.ic_launcher)
            .setTitle("[" + file.getName() + "] folder can't be read!")
            .setPositiveButton("OK", null).show(); 
        } 
    }else {
        new AlertDialog.Builder(this)
        .setIcon(R.drawable.ic_launcher)
        .setTitle("[" + file.getName() + "]")
        .setPositiveButton("OK", null).show();

    }
}

@Override
public boolean onOptionsItemSelected(MenuItem item){
    switch(item.getItemId()){
    case R.id.home:
        path.add(root);
        return true;

    case R.id.back:
        path.add(f.getParent());
        return true;

    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

**代码结束谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:39:22.620

如果您使用的是 listview，请尝试执行 mListView.invalidateViews()。如果您使用 listActivity，只需调用 mList.invalidateViews()。

# php - 改进此正则表达式以包含匹配的内容，直到匹配某个字符

> ID：15869629
> 
> 赞同：1
> 
> 时间：2013-04-08T00:45:46.910
> 
> 标签：php, regex, html-parsing

有人可以帮我改进这个正则表达式，以便它捕获以 http://、https:// 或 www 开头的所有内容，然后继续直到到达 ' 或 "。它包括标点符号并且不区分大小写。

这是现在的正则表达式：

```
(wwww|https?://) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T01:01:29.203

```
/(?:https?:\/\/|www)[^'"]*/i 
```

我避开了斜线，因为如果您使用`/.../`符号，它们可能会发生冲突。`[^'"]`是一个倒置字符类，它允许除引号之外的所有内容。

编辑：我删除了插入符号以匹配任何出现的模式，`:?`以使组不被捕获。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T00:47:52.180

```
@(www|https?://).*?(?=['"])@i 
```

使`.*?`量词不情愿，因此它将停在第一个引号而不是最后一个引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:52:47.273

以下正则表达式将起作用：

```
(?:https?:\/\/|www)[^'"]* 
```

您可以在[www.debuggex.com 浏览](http://www.debuggex.com/?re=%28?%3ahttps?%3a%5C/%5C/%7Cwww%29%5B%5E%27%22%5D%2a&flags=i&str=http://www.google.com/search%22%20and%20another%20one%20hTtp://www.facebook.com)比赛的详细信息。

# javascript - AngularJS - 如何处理 ng-repeat 与预先存在的项目

> ID：15869632
> 
> 赞同：6
> 
> 时间：2013-04-08T00:46:09.220
> 
> 标签：javascript, django, angularjs

我正在尝试使用`ng-repeat`列表。但我想要使用 Django 呈现的预先存在的列表项。

注意：我已设置`{[{ }]}`为我的 AngularJS InterpolateProvider。

**HTML 示例**

```
<ul ng-controller="ListController">
    {% for item in existing_list %}
        <li>
            <span>{{item.firstName}}</span>
            <span>{{item.lastName}}</span>
        </li>
    {% endfor %}

    <li ng-repeat="item in items">
        <span>{[{item.firstName}]}</span>
        <span>{[{item.lastName}]}</span>
    </li>
</ul> 
```

现在，我想使用`ng-controller`

**应用程序.js**

```
function ListController($scope){
    $scope.items = [{firstName: "Bob", lastName: "Smith"}];
} 
```

我的问题是，如何添加 Django 生成的预先存在的列表项来加入`$scope.items`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T07:53:50.347

我现在的做法是使用`ngInit`将现有数据注入范围。所以你会有一种：

```
<ul ng-controller="ListController" ng-init='items = {% existing_list.toJSON() %}'> 
```

（对不起，我不知道如何将对象序列化为 JSON）

# php - 如何为此代码添加默认分页？

> ID：15869633
> 
> 赞同：0
> 
> 时间：2013-04-08T00:46:11.330
> 
> 标签：php, html, wordpress

我有这段代码可以从“小说”类别中获取最新的 3 篇文章，并在 html 标签中显示内容。

```
<? $novels = get_option('of_novels') ?>
<?php $paged = (get_query_var('paged')) ? get_query_var('paged') : 1; query_posts('category_name=$novels&posts_per_page=3'); ?>
<?php while (have_posts()) : the_post(); ?>
    <div class="sliderunit">
        <?php the_post_thumbnail(); ?>
        <div class="novelsslidertitle">
            <div class="arrow-left"></div>
            <a href="<?php the_permalink(); ?>"><img class="cross" src="<?php bloginfo('stylesheet_directory'); ?>/images/cross.png"/></a>
            <a href="<?php the_permalink(); ?>"><?php the_title(); ?></a>
            <h3>رواية</h3>
        </div>
    </div>                    
<?php endwhile;?> 
```

我需要知道的是如何将 wordpress 中的默认下一篇文章添加到此代码中？

# c++ - 循环遍历类型数

> ID：15869636
> 
> 赞同：3
> 
> 时间：2013-04-08T00:46:33.757
> 
> 标签：c++, loops

假设我想用`vector<int>`, `vector<bool>`,测试一些东西`vector<string>`。我想写这样的东西：

```
for(type T in {int, bool, string}){
   vector<T> v;
   for(int i = 0; i < 3; ++i){
       v.push_back(randomValue<T>());
   }
   assert(v.size() == 3);
} 
```

我知道语言中没有这样的功能，但有可能以某种方式模仿吗？例如，某些库中是否有此功能`boost`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T00:53:13.783

# Boost.MPL

**可以使用类型列表**来完成——它们在[Modern C++ Design: Generic Programming and Design Patterns Applied](https://rads.stackoverflow.com/amzn/click/com/0201704315) by **Andrei Alexandrescu中有详细讨论**

检查[Boost.MPL](http://www.boost.org/doc/libs/1_53_0/libs/mpl/doc/index.html)库。例如 - [boost::mpl::for_each](http://www.boost.org/doc/libs/1_53_0/libs/mpl/doc/refmanual/for-each.html)

[**现场演示**](http://coliru.stacked-crooked.com/a/d04811e4d202af51)

```
#include <boost/exception/detail/type_info.hpp>
#include <boost/mpl/for_each.hpp>
#include <boost/mpl/vector.hpp>
#include <iostream>
#include <cassert>
#include <vector>
#include <string>

using namespace boost;
using namespace std;

template<typename T>
T randomValue()
{
    return T();
}

struct Benchmark
{
    template<typename T>
    void operator()(T) const
    {
        cout << "Testing " << type_name<T>() << endl;
        vector<T> v;
        for(int i = 0; i < 3; ++i)
        {
           v.push_back(randomValue<T>());
        }
        assert(v.size() == 3);
    }
};

int main()
{
    mpl::for_each<mpl::vector<int, bool, string>>(Benchmark());
} 
```

输出是：

```
Testing int
Testing bool
Testing std::string 
```

* * *

# C++11 可变参数模板

另一种选择是使用 C++11 可变参数模板：

[**现场演示**](http://coliru.stacked-crooked.com/a/351cbd14ded56f5c)

```
#include <boost/exception/detail/type_info.hpp>
#include <iostream>
#include <cassert>
#include <vector>
#include <string>

using namespace boost;
using namespace std;

template<typename T>
T randomValue()
{
    return T();
}

struct Benchmark
{
    template<typename T>
    void operator()(T) const
    {
        cout << "Testing " << type_name<T>() << endl;
        vector<T> v;
        for(int i = 0; i < 3; ++i)
        {
           v.push_back(randomValue<T>());
        }
        assert(v.size() == 3);
    }
};

template<typename ...Ts,typename F>
void for_each(F f)
{
    auto &&t = {(f(Ts()),0)...};
    (void)t;
}

int main()
{
    for_each<int, bool, string>(Benchmark());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T01:01:56.573

这使用可变参数模板来实现：

```
template<typename T>
void do_test(){
   // do the actual testing here, for type T
}

template<typename T>
void test_vectors() {
    do_test<T>();
}

template<typename T, typename Head, typename... Tail>
void test_vectors() { 
    do_test<T>();
    test_vectors<Head, Tail...>();
} 
```

演示[在这里](http://liveworkspace.org/code/yOEFa%240)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T00:57:26.300

我已经设法做了一些可行的事情，但不是很漂亮，并且只适用于默认可构造类型：

```
void loop() {
}

template<typename T, typename... Args>
void loop(T t, Args... args) {
    cerr << "work with " << typeid(T).name() << endl;
    loop(args...);
}
int main() {
    loop(int(), char(), vector<int>(), string());
} 
```

# thread-safety - 线程安全的 HashMap 访问

> ID：15869639
> 
> 赞同：0
> 
> 时间：2013-04-08T00:47:13.697
> 
> 标签：thread-safety, hashmap, synchronized

我有一个包含地图的类。该地图由 Add() 和 isUpwardTrade() 方法读取/写入，如下所示。

通过同步整个方法，您是否看到任何线程安全问题？您将如何更改以下实现（即您会使用 concurrentHashMap 还是其他东西？）以提高多线程上下文中的性能？

```
private Map<String, List<Double>> priceTable = new HashMap<String, List<Double>>();
private AutoTrader autoTrader;

public PriceTable(AutoTrader autoTrader) {
    this.autoTrader = autoTrader;
}

public synchronized void add(Price price) {     
    if (!priceTable.containsKey(price.getProductName())){
        List<Double> prices = new ArrayList<Double>();
        Double pValue = price.getPrice();
        prices.add(pValue);
        priceTable.put(price.getProductName(), prices);
    }else{
        Double pValue = price.getPrice();
        priceTable.get(price.getProductName()).add(pValue);
    }

    if (isUpwardTrend(price, priceTable)) {
        notifyAutoTrader(price);
    }
}

private void notifyAutoTrader(Price price) {
     autoTrader.onUpwardTrendEvent(price);
}

private synchronized boolean  isUpwardTrend(Price price, Map<String, List<Double>>   pricesTable) {
    List<Double> prices = priceTable.get(price.getProductName());
    if ( prices.size() >= 4){
        if ( calcAvg(prices)  > prices.get(prices.size() - 4) ) 
           return true;
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T00:57:40.727

Hashmap 不是线程安全的。您应该使用 ConcurrentHashMap 或 Hashtable。

# jquery - jQuery Onselect？

> ID：15869640
> 
> 赞同：3
> 
> 时间：2013-04-08T00:47:16.443
> 
> 标签：jquery, input, keyup, onselect

当我输入 DPRtelephonenumber 时，我想在 DPRcallerhometelephonenumber 中重复它。

只要我在打字，这个脚本就可以工作。但是，如果 <INPUT id="DPRtelephonenumber"> 提供了以前使用的值的下拉列表，并且我选择了它，则 <INPUT id="DPRcallerhometelephonenumber"> 不会设置。

那么，除了键位之外，我还需要什么？如何在 onselect 中写入？

```
<input name="DPRtelephonenumber" id="DPRtelephonenumber" type="text">
<input name="DPRcallerhometelephonenumber" id="DPRcallerhometelephonenumber" type="text">
<script type="text/javascript">
  $(document).ready(function() {
    $('#DPRtelephonenumber').keyup(function() {
      $('#DPRcallerhometelephonenumber').val($(this).val());
    });
  });    
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T00:59:27.727

您可以将 onchange 事件用于下拉菜单。

```
$('#mySelect').change(function() {
  // do stuff here;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T01:04:09.357

由于您正在处理文本输入元素，我假设下拉列表只是浏览器提供的自动完成器。没有办法将“onselect”处理程序附加到它。您至少可以将 on-change 处理程序附加到输入元素。

尝试改变：

```
$('#DPRtelephonenumber').keyup(function() { 
```

至：

```
$('#DPRtelephonenumber').on('change keyup', function() { 
```

当然，在文本字段失去焦点之前，不会触发 change 事件。如果您希望您的事件处理程序在文本字段的值更改后立即执行，您可以查看[这个问题](https://stackoverflow.com/questions/1948332/detect-all-changes-to-a-input-type-text-immediately-using-jquery)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T01:00:23.050

这样的事情应该做你想做的事：

```
<script type="text/javascript">
    $(function(){
        var updateHomeNum = function(obj){
            $("#DPRcallerhometelephonenumber").val(obj.val());
        };
        $("#DPRtelephonenumber").on({
            keyup: function(){
                updateHomeNum($(this));
            }, change: function(){
                updateHomeNum($(this));
            }
        });
    });
</script> 
```

# c# - C# 重载构造函数

> ID：15869641
> 
> 赞同：-4
> 
> 时间：2013-04-08T00:47:17.430
> 
> 标签：c#, constructor

我在下面为此编写重载构造函数时遇到了麻烦。这是我被要求做的。为将三个点作为输入的平面类创建一个重载的构造函数。将这些输入命名为 pointU、pointV 和 pointW。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Geometry
{
    public class Plane
    {
        //---------------------------------------------------------------------
        //                                           PRIVATE INSTANCE VARIABLES
        private Point u;
        private Point v;
        private Point w;

        //---------------------------------------------------------------------
        //                                                         CONSTRUCTORS
        public Plane()
        {
            u = new Point();
            v = new Point();
            w = new Point();
        }

        //Overloaded Constructor with 3 Points as inputs 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T00:50:10.457

重载意味着更改构造函数的签名，默认 ctor 中没有三个实例。所以

```
 public Plane()
   {
     u=new Point(); v= new Point() ; w=new Point()
   } 
```

应该：

```
public Plane(Point p1, Point p2, Point p3)
{
  u= p1; v = p2; w=p3;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T00:52:42.533

这是一个重载的构造函数，它接受你的 3 点并将它们分配给你的类成员。

```
public Plane(Point u, Point v, Point w){

                this.u = u;
                this.v = v;
                this.w = w;            
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T00:51:08.707

要使用 3 个点覆盖构造函数，您只需将 3 个参数添加到构造函数签名

例子：

```
public Plane(Point pointU, Point pointV, Point pointW)
{
    u = pointU;
    v = pointV;
    w = pointW;
} 
```

# php - 尝试卷曲到苹果

> ID：15869646
> 
> 赞同：-3
> 
> 时间：2013-04-08T00:48:05.490
> 
> 标签：php, curl

我用这段代码用苹果登录卷曲

```
 <?php
$url = "https://appleid.apple.com/cgi-bin/WebObjects/MyAppleId.woa/wa/directToSignIn?localang=en_US";
$post_data['theAccountName'] = "Email@email.com";
$post_data['theAccountPW'] = "mypassword";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post_data);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_VERBOSE, 1);
$response = curl_exec($ch);

echo $response;
?> 
```

但这对我没有任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T01:48:27.477

请注意@Andrey 指出的服务条款。

但也许您必须将 HTTP 方法设置为 POST？

```
curl_setopt($ch, CURLOPT_POST, 1); 
```

# javascript - 下划线包含 (_.contains) 对象类型

> ID：15869648
> 
> 赞同：41
> 
> 时间：2013-04-08T00:48:23.167
> 
> 标签：javascript, underscore.js

我刚刚开始使用 Javascript 并使用 Underscore 库。我看到它们具有各种实用功能，例如 _.contains。有没有办法让它在物体上工作？

```
var indexes = [ {'id': 1, 'name': 'jake' }, {'id':4, 'name': 'jenny'},  {'id': 9, 'name': 'nick'}, {'id': 1, 'name': 'jake' }, {'id':4, 'name': 'jenny'} ];

if (_.contains(indexes, {'id':1, 'name': 'jake'})) {
    console.log("contains");
} 
```

他们展示的大多数示例都有简单的数组，其中包含字符串或数字。我想知道我能做些什么来使用他们的实用函数，比如 _.contains 对象。谢谢。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-04-08T01:00:40.893

`contains`要求这些值具有可比性，`===`这些值不适用于不同的对象实例。

例如，如果您传递要搜索的确切对象，它会起作用，这不是很有用。

```
if (_.contains(indexes, indexes[0])) { 
```

但是，您可以使用`where`或`findWhere`。

```
if (_.findWhere(indexes, {'id':1, 'name': 'jake'})) { 
```

`findWhere`下划线是新的，`1.4.4`所以如果你没有它，你可以使用`where`.

```
if (_.where(indexes, {'id':1, 'name': 'jake'}).length > 0) { 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-08T01:00:29.880

您实际上想为此使用[_.where](http://underscorejs.org/#where)。

```
var indexes = [ {'id': 1, 'name': 'jake' }, {'id':4, 'name': 'jenny'},  {'id': 9, 'name': 'nick'}, {'id': 1, 'name': 'jake' }, {'id':4, 'name': 'jenny'} ];

if (_.where(indexes, {'id':1, 'name': 'jake'}).length) {
    console.log("contains");
} 
```

# javascript - 单击选项卡时，如何使这些选项卡的内容淡入？

> ID：15869651
> 
> 赞同：1
> 
> 时间：2013-04-08T00:48:51.487
> 
> 标签：javascript, jquery, html

我一直试图让这些选项卡的内容在没有运气的情况下淡入

这是标签

```
<div id="homepagetabsdiv"><ul id="homepagetabs"><li id="tab0" onclick="javascript:show_tab('0');">Main</li>
<li id="tab1" title="Drag and drop this tab to re-arrange the order" onclick="javascript:show_tab('1');">managers</li>
<li id="tab2" title="Drag and drop this tab to re-arrange the order" onclick="javascript:show_tab('2');">Standings</li>
</ul></div>
<div id="tabcontent0" class="homepagetabcontent">CONTENT</div>
<div id="tabcontent1" class="homepagetabcontent">CONTENT</div>
<div id="tabcontent2" class="homepagetabcontent">CONTENT</div> 
```

编辑添加 showtab 功能

```
function show_tab (tab_id) {
   var done = false;
   var counter = 0;
   while (! done) {
      var this_tab_content = document.getElementById("tabcontent" + counter);
      var this_tab = document.getElementById("tab" + counter);
      if (! this_tab_content) {
         done = true;
      } else {
         if (counter == tab_id) {
            this_tab_content.style.display = '';
            this_tab.className = "currenttab";
         } else {
            this_tab_content.style.display = 'none';
            this_tab.className = "";
         }
      }
      counter++;
   }
   location.hash = tab_id;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T00:55:30.563

不确定您的`show_tab`功能是做什么的，但它可能需要如下所示：

```
function show_tab(tab_num) {
    $(".homepagetabcontent").fadeOut(400, function () {
        $("#tabcontent" + tab_num).fadeIn(400);
    });
} 
```

此外，不显眼地而不是在 HTML 中绑定事件可能更容易。`onclick="javascript:show_tab('1');"`因此，您可以使用以下 HTML 格式，而不是所有的东西：

```
<li id="tab1" title="Drag and drop this tab to re-arrange the order" data-tab-num="1">managers</li> 
```

并使用这个 Javascript：

```
$(document).ready(function () {
    $("#homepagetabs").on("click", "li", function () {
        var $this = $(this);
        var tab_num = $this.attr("data-tab-num");
        show_tab(tab_num);
    });
}); 
```

如果您决定保留内联`onclick="javascript:show_tab('1');"`内容，则不需要该`javascript:`部分。

**更新：**

我意识到我没有正确处理褪色。这是`show_tab`我要使用的函数和事件处理：

```
function show_tab(tab_num) {
    var tabcontents = $(".homepagetabcontent");
    var count = 0;
    tabcontents.fadeOut(400, function () {
        if (++count === tabcontents.length) {
            $("#tabcontent" + tab_num).fadeIn(400);
        }
    });
}

$(document).ready(function () {
    $("#homepagetabs").on("click", "li", function () {
        var $this = $(this);
        $("#homepagetabs").find("li").filter(".currenttab").removeClass("currenttab");
        $this.addClass("currenttab");
        var tab_num = $this.attr("data-tab-num");
        show_tab(tab_num);
    });
}); 
```

而且，我将使用的 HTML 结构：

```
<div id="homepagetabsdiv">
    <ul id="homepagetabs">
        <li id="tab0" title="Drag and drop this tab to re-arrange the order" data-tab-num="0">Main</li>
        <li id="tab1" title="Drag and drop this tab to re-arrange the order" data-tab-num="1">managers</li>
        <li id="tab2" title="Drag and drop this tab to re-arrange the order" data-tab-num="2">Standings</li>
    </ul>
</div>

<div id="tabcontents">
    <div id="tabcontent0" class="homepagetabcontent">CONTENT0</div>
    <div id="tabcontent1" class="homepagetabcontent">CONTENT1</div>
    <div id="tabcontent2" class="homepagetabcontent">CONTENT2</div>
</div> 
```

**演示：http:** [//jsfiddle.net/SLBjv/5/](http://jsfiddle.net/SLBjv/5/)

显然欢迎您向您的`show_tab`函数添加您需要的任何其他内容，但如果您使用的是 jQuery，那么您也可以在任何地方使用它。这意味着使用它来选择/查找元素、更改`class`es 和更改样式等等。

# objective-c - iPhone 5 上的 UIViewAnimationOptionCurveLinear 问题

> ID：15869656
> 
> 赞同：0
> 
> 时间：2013-04-08T00:49:47.273
> 
> 标签：objective-c, uiview, uiimageview, uiviewanimation, uiviewanimation-curve

好的，所以我有这个动画

```
[UIView animateWithDuration:1.5  delay:0.0 options:UIViewAnimationOptionCurveLinear animations:^(void){
    self.center = CGPointMake(velocity.x+self.frame.origin.x, velocity.y+self.frame.origin.y);
    }
                 completion:^(BOOL finished){
                     [self removeFromSuperview];
                     [self setDone:true];
                 }]; 
```

当我在高度为 480 的设备上运行它时，它运行良好，但当我使用 iPhone 5 时，动画几乎立即发生，你几乎看不到动画图像。

我的猜测是 iPhone 5 无法访问 UIViewAnimationOptionCurveLinear。这是真的吗？有没有其他人有这个问题？

# android - 加载和外部 URL 并保持 WebView 隐藏

> ID：15869659
> 
> 赞同：1
> 
> 时间：2013-04-08T00:49:59.917
> 
> 标签：android, webview

有一个带有垂直线性布局的 Android 活动。第一个屏幕组件是一个简单的 TextView，位于 WebView 的正下方，可见性消失了。

该网页具有与服务器通信的 javascript 代码，没有可视化组件。所以我需要在可见性消失的情况下保持它，即隐藏，活动屏幕中没有占用空间。

然后问题是当我执行 webView.loadUrl 时。它打开设备浏览器。在模拟器中，它切换到另一个活动，webview 占据了所有屏幕。

我怎样才能使它工作？如何加载和维护 webView 完全隐藏

提前致谢

我的布局是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:background="#ffe3d0">
    <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Demo: WebView"
            android:layout_gravity="center" style="@style/MainLabel" android:autoText="false" android:id="@id/mainLabel"
            android:textColor="#3c3f41"/>
    <WebView
            android:layout_width="fill_parent"
            android:layout_height="30dp"
            android:id="@id/webView" android:visibility="gone"/>
    <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/secondTextView"
            android:id="@+id/textView" android:textColor="#1635ff" android:layout_gravity="center"/>
</LinearLayout> 
```

我的活动代码是这样的：

```
@Override

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    WebView webview = (WebView) findViewById(R.id.webView);

    WebSettings webSettings = webview.getSettings();
    webSettings.setJavaScriptEnabled(true);

    webview.loadUrl("http://google.com/");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T01:04:13.710

编辑：通过 AsyncTask 函数尝试调用您的 url 并通过进度条隐藏所有屏幕...

# php - 如何将 PHP 循环中的 MySQL id 发送到 AJAX PHP 脚本

> ID：15869660
> 
> 赞同：0
> 
> 时间：2013-04-08T00:50:02.283
> 
> 标签：php, mysql, jquery, variables

当单击 AJAX 调用 PHP 计数器文件时，我正在与如何隔离特定的 MySQL id 作斗争。最初，我使用非 javascript HTLM 和回显 PHP 来创建一个块数组，每个块代表一个页面上的单个媒体文件。当用户单击块时，它会转到 PHP 计数器文件并播放媒体文件。它工作正常。尝试转换为 AJAX/javascript 运行 PHP 计数器文件时遇到问题。

问题似乎是：

1.  未使用 onclick 注册正确的 ID。
2.  ID 没有被传递给名为 php 的 Ajax 文件，并且计数器没有更新。

主要块构建文件头中的javascript是：

```
<script type="text/javascript" src="jquery.js"></script>'; 
```

数百个块，每个块都有单独的 MySQL ID 被构建并显示在主页上。

添加 040913：PHP 开头为：

```
WHILE ($varX <= $varY) {
mysql_select_db($database_cms_test, $cms_test);
$query = "SELECT * FROM reference WHERE rank=$varRank";
$result = mysql_query($query) or die();
$row = mysql_fetch_array($result); ... 
```

Ajax 部分从这里开始：

```
<script type="text/javascript">
function runCounter() {
    var currentID = 222; 
    $.get("counter5.php?id=222"); 
    alert("the current id is " + 222);
} 
</script>

<a title="Media File Name" href "#" onclick= "runCounter();" id="sprytrigger1"> 
```

回显之前的等效 Ajax 代码是：

```
echo '<script type="text/javascript">';
echo 'function runCounter() {';
echo ' var currentID = ';
printf ("%s", $row['id']);  
echo '; $.get("';
echo 'counter5.php?id=';
printf ("%s", $row['id']); 
echo '"); alert("the current id is " + ';
printf ("%s", $row['id']);  
echo ');} </script>';

echo '<a title="';
printf ("%s", $row['song_name']);
echo '" href "#';
echo '" onclick= "runCounter();';
echo '" id="sprytrigger';
echo $varRank;
echo '">'; 
```

在counter5.php文件中，主要的id请求代码为：

```
$id = mysql_real_escape_string($_GET['id']); 
```

非常感谢您的意见/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T01:24:02.550

你可以试试这个代码...

```
$scr = 'var currentID = ' . $row['id'] .
       '$.get("counter5.php?id='. $row['id'] .'")' .
       'alert("the current id is " + '. $row['id'] .')'; 
```

脚本

```
<script type="text/javascript">
  $(document).on('click', '#btn-id', function(){    
    runCounter();
  })

  function runCounter(){
    <?php echo $scr; ?>
  }
</script> 
```

完整代码

```
<html>
  <title>Your title</title>
  <head>
    <?php

      // get the value/content of $row variable here...

      $scr = 'var currentID = ' . $row['id'] .
             '$.get("counter5.php?id='. $row['id'] .'")' .
             'alert("the current id is " + '. $row['id'] .')';
    ?>

    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script type="text/javascript">
      $(document).on('click', '#sprytrigger1', function(){    
        runCounter();
      })

      function runCounter(){
        <?php echo $scr; ?>
      }
    </script>

  </head>
  <body>

    <! -- your body here -->
    <a href="#" id="sprytrigger1">Click me!</a>

  </body>
</html> 
```

我希望这会以某种方式帮助你。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-08T00:57:05.993

如果您可以退出 php 并再次进入，为什么还要使用 echo

```
?>your code here<?php 
```

# google-chrome-extension - 在从 Google Chrome Webstore 安装我的 google-chrome-extension 之前，如何让用户同意我的 EULA？

> ID：15869664
> 
> 赞同：2
> 
> 时间：2013-04-08T00:50:37.870
> 
> 标签：google-chrome-extension

我已经开发了一个 Google Chrome 扩展程序，并将把它放在 chrome 网上商店。我还有一个 EULA 供最终用户在安装扩展之前或 EULA 可能更改时接受。我已经搜索和搜索，但没有找到任何方法告诉 Chrome 在安装前显示 EULA 并且除非用户接受协议，否则不要继续安装。根据我的研究，我似乎必须自己实现该逻辑。但是，我想我可能会在这里问，以防我错过了什么。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T22:57:59.050

您的扩展程序代码在安装之前不会运行，并且 Chrome 网上应用店不提供任何钩子供开发人员在安装过程中添加条件逻辑（无论是服务器端还是客户端）。最好的办法是监听[onInstalled](https://developer.chrome.com/extensions/runtime.html#event-onInstalled)事件，设置适当的 UI，并禁用重要功能，直到用户同意您的条款。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-12T15:57:39.197

@sowbug 似乎是正确的。Chrome 网上应用店提供的 EULA 功能隐含在您的客户对网上应用店的使用中。这在[https://ssl.gstatic.com/chrome/webstore/intl/en/gallery_tos.html](https://ssl.gstatic.com/chrome/webstore/intl/en/gallery_tos.html)的用户服务条款中有说明：

> 1.3 您通过 (1) 单击以同意或接受这些选项提供给您的位置，或 (2) 实际使用网上商店应用程序或网络服务来接受这些条款。

此 EULA 可在开发者网站 ( [https://developer.chrome.com/webstore/terms#](https://developer.chrome.com/webstore/terms#) ) 上找到，并具有关键点：

> 5.2 您授予用户非排他性、全球性和永久许可，以执行、显示和使用产品以及与 Google Chrome 相关的产品中包含、访问或通过产品传输的任何内容。**如果您选择，您可以在您的产品中包含一个单独的最终用户许可协议 (EULA)，该协议将代替前一句管理用户对产品的权利。**

因此，您可以提供自己的 EULA，但必须“在您的产品中”（即您自己创建）。

# php - 根据登录用户修改 MySQL 条目

> ID：15869668
> 
> 赞同：0
> 
> 时间：2013-04-08T00:50:54.930
> 
> 标签：php, mysql

傍晚再一次老乡堆满鲜花，

@sman591 给了我这个代码：

```
$current_user_id = get_current_user_id(); // current user logged into WordPress

mysql_query("UPDATE `table` SET `user_id`='$current_user_id' WHERE `id`='$entry_id'") or die(mysql_error());

$query = mysql_query("SELECT * FROM `table` WHERE `id`='$entry_id' LIMIT 1") or die(mysql_error());
$data = mysql_fetch_array($query);

$allowed_user_edit_id = $data['id']; // user id who is allowed to edit

$current_user_id = get_current_user_id(); // current user logged into WordPress

if ($current_user_id == $allowed_user_edit_id) {
    // Your code for editing the entry
} 
```

这段代码是为了补充我的 modifyame.php（包装在 Wordpress 模板中）

```
<?php
/**
 * The template for displaying all pages.
 * Template Name: modifyame.php
 * This is the template that displays all pages by default.
 * Please note that this is the WordPress construct of pages
 * and that other 'pages' on your WordPress site will use a
 * different template.
 *
 * @package WordPress
 * @subpackage Twenty_Twelve
 * @since Twenty Twelve 1.0
 */

get_header(); ?>

    <div id="primary" class="site-content">
        <div id="content" role="main">

            <?php while ( have_posts() ) : the_post(); ?>
                <?php get_template_part( 'content', 'page' ); ?>
                <?php comments_template( '', true ); ?>

            <?php endwhile; // end of the loop. ?>

<?php

mysql_connect("localhost", "herp", "derp") or die (mysql_error());
echo "Connected to MYSQL ";
mysql_select_db("diddly") or die (mysql_error());
echo "Connected to Data Base";

if(!isset($_POST['submit'])) {
    $q = "SELECT * FROM addserverame WHERE ID = $_GET[id]";
    $result = mysql_query ($q);
    $person = mysql_fetch_array ($result);
    }

    ?>

        <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Add Your Server</title>
<link rel="stylesheet" type="text/css" href="view.css" media="all">
<script type="text/javascript" src="view.js"></script>

</head>
<body id="main_body" >

    <img id="top" src="top.png" alt="">
    <div id="form_container">

        <h1><a>Modify Server</a></h1>
        <form id="form_606591" class="appnitro"  method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
                    <div class="form_description">
            <h2>Add Your Server</h2>
            <p></p>
        </div>                      
            <ul >

                    <li id="li_1" >
        <label class="description" for="servername">Server Name </label>
        <div>
            <input id="element_1" name="Servername" class="element text medium" type="text" maxlength="255" value="<?php echo $person['servername']; ?>"/> 
        </div><p class="guidelines" id="guide_1"><small>Enter your server name here NOT your server address.</small></p> 
        </li>       <li id="li_2" >
        <label class="description" for="Serveraddress">Server Address </label>
        <div>
            <input id="element_2" name="Serveraddress" class="element text medium" type="text" maxlength="255" value="<?php echo $person['serveraddress']; ?>"/> 
        </div><p class="guidelines" id="guide_2"><small>This will the DNS name of your server</small></p> 
        </li>       <li id="li_3" >
        <label class="description" for="Portnumber">PortNumber </label>
        <div>
            <input id="element_3" name="Portnumber" class="element text medium" type="text" maxlength="255" value="<?php echo $person['portnumber']; ?>"/> 
        </div><p class="guidelines" id="guide_3"><small>This will be the port your server is using.</small></p> 
        </li>       <li id="li_4" >
        <label class="description" for="Description">Server Description </label>
        <div>
            <textarea id="element_4" name="Description" class="element textarea medium" value ="<?php echo $person['description']; ?>"></textarea> 
        </div><p class="guidelines" id="guide_4"><small>Enter server description/rules here.</small></p> 
        </li>

                    <li class="buttons">
                <input type="hidden" name="id" value="<?php echo $_GET['id']; ?>" />

                <input id="saveForm" class="button_text" type="submit" name="submit" value="Modify" />
        </li>
            </ul>
        </form> 
        <div id="footer">
        </div>
    </div>

    </body>-
</html>

<?

if(isset($_POST['submit'])) {
    $u = "UPDATE addserverame SET `servername`='$_POST[Servername]', `serveraddress`='$_POST[Serveraddress]', `portnumber`='$_POST[Portnumber]', `description`='$_POST[Description]' WHERE ID = $_POST[id]";
    mysql_query($u) or die (mysql_error());
    echo "Server Info Has Been Modified";
}
?>

    </div><!-- #primary -->
        </div><!-- Content -->

<?php get_footer(); ?> 
```

**问题**

我在合并两者时遇到问题，以便在之前检查 sman 的条件并在 modifyame.php 的条件之前进行验证，我的主要问题是我对 PHP 的语法规则不是很熟悉，我将登录验证代码放在上面另一个 if 语句并尝试将语句包装在另一个中。

**我在问什么**

有人可以正确合并它们吗？

**注意**我认为将它们分开显示会比我的尝试更容易（不那么混乱）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T01:28:44.713

我猜你想要这样的东西，只是从你现有的代码来看：

PS：您可能希望将业务与显示逻辑分开。

```
<?php
/**
 * The template for displaying all pages.
 * Template Name: modifyame.php
 * This is the template that displays all pages by default.
 * Please note that this is the WordPress construct of pages
 * and that other 'pages' on your WordPress site will use a
 * different template.
 *
 * @package WordPress
 * @subpackage Twenty_Twelve
 * @since Twenty Twelve 1.0
 */

get_header(); ?>

    <div id="primary" class="site-content">
        <div id="content" role="main">

            <?php while ( have_posts() ) : the_post(); ?>
                <?php get_template_part( 'content', 'page' ); ?>
                <?php comments_template( '', true ); ?>

            <?php endwhile; // end of the loop. ?>

<?php

mysql_connect("localhost", "herp", "derp") or die (mysql_error());
echo "Connected to MYSQL ";
mysql_select_db("diddly") or die (mysql_error());
echo "Connected to Data Base";

$current_user_id = get_current_user_id(); // current user logged into WordPress

mysql_query("UPDATE `table` SET `user_id`='$current_user_id' WHERE `id`='$entry_id'") or die(mysql_error());

$query = mysql_query("SELECT * FROM `table` WHERE `id`='$entry_id' LIMIT 1") or die(mysql_error());
$data = mysql_fetch_array($query);

$allowed_user_edit_id = $data['id']; // user id who is allowed to edit

$current_user_id = get_current_user_id(); // current user logged into WordPress

if ($current_user_id == $allowed_user_edit_id):

    if(!isset($_POST['submit'])) {
    $q = "SELECT * FROM addserverame WHERE ID = $_GET[id]";
    $result = mysql_query ($q);
    $person = mysql_fetch_array ($result);
    }

    ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Add Your Server</title>
<link rel="stylesheet" type="text/css" href="view.css" media="all">
<script type="text/javascript" src="view.js"></script>

</head>
<body id="main_body" >

    <img id="top" src="top.png" alt="">
    <div id="form_container">

        <h1><a>Modify Server</a></h1>
        <form id="form_606591" class="appnitro"  method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
                    <div class="form_description">
            <h2>Add Your Server</h2>
            <p></p>
        </div>                      
            <ul >

                    <li id="li_1" >
        <label class="description" for="servername">Server Name </label>
        <div>
            <input id="element_1" name="Servername" class="element text medium" type="text" maxlength="255" value="<?php echo $person['servername']; ?>"/> 
        </div><p class="guidelines" id="guide_1"><small>Enter your server name here NOT your server address.</small></p> 
        </li>       <li id="li_2" >
        <label class="description" for="Serveraddress">Server Address </label>
        <div>
            <input id="element_2" name="Serveraddress" class="element text medium" type="text" maxlength="255" value="<?php echo $person['serveraddress']; ?>"/> 
        </div><p class="guidelines" id="guide_2"><small>This will the DNS name of your server</small></p> 
        </li>       <li id="li_3" >
        <label class="description" for="Portnumber">PortNumber </label>
        <div>
            <input id="element_3" name="Portnumber" class="element text medium" type="text" maxlength="255" value="<?php echo $person['portnumber']; ?>"/> 
        </div><p class="guidelines" id="guide_3"><small>This will be the port your server is using.</small></p> 
        </li>       <li id="li_4" >
        <label class="description" for="Description">Server Description </label>
        <div>
            <textarea id="element_4" name="Description" class="element textarea medium" value ="<?php echo $person['description']; ?>"></textarea> 
        </div><p class="guidelines" id="guide_4"><small>Enter server description/rules here.</small></p> 
        </li>

                    <li class="buttons">
                <input type="hidden" name="id" value="<?php echo $_GET['id']; ?>" />

                <input id="saveForm" class="button_text" type="submit" name="submit" value="Modify" />
        </li>
            </ul>
        </form> 
        <div id="footer">
        </div>
    </div>

    </body>-
</html>

<?

if(isset($_POST['submit'])) {
    $u = "UPDATE addserverame SET `servername`='$_POST[Servername]', `serveraddress`='$_POST[Serveraddress]', `portnumber`='$_POST[Portnumber]', `description`='$_POST[Description]' WHERE ID = $_POST[id]";
    mysql_query($u) or die (mysql_error());
    echo "Server Info Has Been Modified";
}
?>

    </div><!-- #primary -->
        </div><!-- Content -->

<?php endif; ?>

<?php get_footer(); ?> 
```

# android - 如何在计划期间更新视图

> ID：15869677
> 
> 赞同：1
> 
> 时间：2013-04-08T00:52:02.933
> 
> 标签：android, multithreading, view, timer, android-windowmanager

有人可以告诉我如何在预定期间更新视图。例如每秒。

```
MyService.wm.updateViewLayout(mView, mLayoutParams); 
```

我遇到的问题是，当我使用在不同线程上运行的计时器时，它不允许我更新视图并给出以下错误。

> 04-08 01:19:35.910: W/dalvikvm(11040): threadid=13: 线程退出未捕获异常 (group=0x40a3e1f8) 04-08 01:19:35.910: E/AndroidRuntime(11040): 致命异常: 线程-1376 04-08 01:19:35.910: E/AndroidRuntime(11040): android.view.ViewRootImpl$CalledFromWrongThreadException: 只有创建视图层次结构的原始线程才能触摸其视图。04-08 01:19:35.910: E/AndroidRuntime(11040): 在 android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4039) 04-08 01:19:35.910: E/AndroidRuntime(11040): 在 android. view.ViewRootImpl.requestLayout(ViewRootImpl.java:709) 04-08 01:19:35.910: E/AndroidRuntime(11040): 在 android.view.View.requestLayout(View.java:12680) 04-08 01:19: 35.910: E/AndroidRuntime(11040): 在 android.view.View.setLayoutParams(View.java:8223) 04-08 01:19:35.910: E/AndroidRuntime(11040):

当我尝试从同一个 Activity 或服务更新它时，它会挂起而不做任何其他事情。只是在循环中运行。

```
while (true) {
    MyService.UpdateLayers();
    try {
        Thread.sleep(1000L);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
} 
```

那么，您能否告诉我正确的方法来执行此操作或解决更新图层的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T01:12:29.793

您可以尝试使用处理程序。您像这样在主线程上定义一个处理程序。-

```
protected Handler handler = new Handler()
{
    @Override
    public void handleMessage(Message msg) {
        switch(msg.what) {
            case DO_SOME_VIEW_CHANGES:
            {
                // Your logic
                break;
            }
        }
    }
}; 
```

然后，您需要创建一个接收处理程序实例的线程，并在其中调用。-

`handler.sendEmptyMessage(DO_SOME_VIEW_CHANGES);`

希望能帮助到你。

# javascript - jQuery动画口吃

> ID：15869683
> 
> 赞同：1
> 
> 时间：2013-04-08T00:53:14.300
> 
> 标签：javascript, jquery, jquery-animate

我再次访问您的丰富知识：P

我正在使用 jQuery 开发一个小而简单的游戏（就像 jQuery 的练习一样）。我试图阻止一个错误似乎使运动在第一步时结结巴巴。要复制它，只需按住一个方向。它口吃一次，然后平稳地移动。

我正在使用的代码是：

```
$(document).keydown(function(e) {
switch (e.which) { 
case 37:
    $('#move').animate({
        left: '-=2'
    },1); //left arrow key
    break;
case 38:
    $('#move').stop().animate({
        top: '-=20' 
    }).animate({
            top: '+=20'        
    }); //up arrow key (jump)
    break;
case 39:
    $('#move').animate({
        left: '+=2'
    },1); //right arrow key 
    break;

}
}); 
```

这可能是我缺少的一个非常愚蠢的属性，但我无法弄清楚。

编辑：我在各种浏览器中尝试过，但仍然遇到同样的问题。

编辑2：我把它放在jsfiddle上，虽然它和我自己的浏览器不一样，但它应该给你一个想法：P [http://jsfiddle.net/urAGB/4/](http://jsfiddle.net/urAGB/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T02:10:05.743

[这是我的解决方案](http://jsfiddle.net/thinkfast2008/urAGB/6/)。我只更改了javascript。

规避这样的问题实际上有点复杂，这解释了大规模代码。所以这里有一个演练：

*   在按键时间和检测到按键被“按住”之间自动移动对象的功能
*   我们在某些条件下激活和停用此功能

通过更改变量，我让您可以轻松地调整这个所谓**的延迟，直到检测到按键被按下。**`bufferTimeout`随意将所有代码放入函数中，甚至将其放入外部 javascript 文件中以方便使用。

如果它解决了您的问题，请享受:)

# sql-server - 将 XML 文件加载到 SQL Azure

> ID：15869688
> 
> 赞同：2
> 
> 时间：2013-04-08T00:54:03.603
> 
> 标签：sql-server, xml, tsql, azure-sql-database

我刚刚在本地测试了一个 TSQL 脚本，它将 XML 文件中的数据导入到我的 SQL 表中。我只是有一个“糟糕”的时刻，因为我不确定将我的 XML 文件放在哪里，以便我可以将这些数据放入我的 SQL Azure DB。我做了一些谷歌搜索，但找不到如何做到这一点。

有没有办法可以针对我的 Azure DB 运行此 SQL 并让它加载我的 XML 文件的内容？

注意：请注意下面的这一行：

> 批量'c:\Temp\abook.20130407.1912.xml',

它在我的本地电脑上。我不确定将这个文件放在哪里，以便我可以将这些数据传输到 Azure。

```
SET IDENTITY_INSERT Contact ON

INSERT INTO Contact (ContactId, EntityId, Type, Value, Notes)
SELECT X.row.query('field[@name="id"]').value('.', 'INT'),
       X.row.query('field[@name="recordid"]').value('.', 'INT'),
       X.row.query('field[@name="type"]').value('.', 'VARCHAR(25)'),
       X.row.query('field[@name="contact"]').value('.', 'VARCHAR(100)'),
       X.row.query('field[@name="notes"]').value('.', 'NVARCHAR(255)')
FROM ( 
SELECT CAST(x AS XML)
FROM OPENROWSET(
     BULK 'c:\Temp\abook.20130407.1912.xml',
     SINGLE_BLOB) AS T(x)
     ) AS T(x)
CROSS APPLY x.nodes('/mysqldump/database/table_data[@name="contact"]/row') AS X(row);

SET IDENTITY_INSERT Contact OFF 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T02:30:18.930

在研究了一些看似痛苦的方法后，我找到了一种相当快速和干净的方法。

由于我能够将 XML 文件导入本地数据库，因此我只生成了可用于在我的 SQL Azure 实例上执行的脚本。

本地数据库：

1.  导入上面问题中所示的 XML 文件
2.  右键单击 DB -> 任务 -> 生成脚本
3.  完成向导，指定我要编写脚本的表
4.  在“设置脚本选项”选项卡上，单击“高级”按钮并设置选项，如下所示。
5.  完成向导

在 SSMS 中，连接到 SQL Azure：
1\. 使用上述步骤中的输出/脚本导入数据

此[链接](http://msdn.microsoft.com/en-us/library/ee621790.aspx)显示了一些用于生成脚本的高级选项的设置。

> 在高级脚本选项
> 中，将“数据库引擎类型脚本”选项设置为“SQL Azure 数据库”<br>将“将 UDDT 转换为基本类型”选项设置为“True”<br>并将“数据类型脚本”选项设置为“仅数据”<br> 单击“确定”。

# html - CSS @font-face 不渲染

> ID：15869690
> 
> 赞同：0
> 
> 时间：2013-04-08T00:54:45.600
> 
> 标签：html, css, font-face

我在我的网站的样式表中使用以下代码，但是当我在浏览器中运行它时它不会呈现，字体也不会呈现。我究竟做错了什么？

```
@font-face {  
  font-family: 'Libel Suit';  
  src: url('my.ip.n.n/~/wordpress/fonts/libelsuit.woff') format('woff'),  
       url('my.ip.n.n/~/wordpress/fonts/libelsuit.ttf') format('truetype');  
       // These aren't the exact URLS I'm using, since I don't want the  
       // world to know my ip address
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T01:02:50.017

检查您的[网络面板](https://developers.google.com/chrome-developer-tools/docs/network)以确定是否实际加载了字体：

![在此处输入图像描述](https://i.stack.imgur.com/bJQAI.png)

如果是，请确保您在 css 中正确引用了它们，例如：

```
h1 {
  font-family: 'Libel Suit'; 
} 
```

# javascript - 意外事件侦听器结果返回

> ID：15869692
> 
> 赞同：3
> 
> 时间：2013-04-08T00:55:15.170
> 
> 标签：javascript, ios, database, titanium

我正在使用 Titanium 构建 iOS 应用程序。我正在尝试在 tableView 中显示按字母顺序排列的列表。选择特定行时，我想将行信息传递到新窗口。The code I have displays the list alphabetically in groups with headers and I have an alphabetical scrollbar that when a letter is selected the list moves to that letter. However, when ANY row is selected, they all send the information for the last row in the database. 我认为我需要在行中有一个带有文本属性的标题元素，然后我可以有一个 tableview.addEventListener 抓住该标题并将其传递，但​​它不起作用。这是我正在使用的代码，如果有人可以看看我哪里出错了，将不胜感激。

```
var db = (function() {
var api   = {};
    api.all_item_names = function() {
        var conn = Ti.Database.install('mydb.sqlite','clients');
        var results = [];
        var resultSet = conn.execute('select * from clients order by clientname asc');
        while ( resultSet.isValidRow()) {
            results.push({
            clientname:  resultSet.fieldByName('clientname'),
        });
        resultSet.next();
    }
    resultSet.close();
    return results;
};
return api;
}());

var tvrow;
var curheader   = 'A';
var list    = [];
var index   = [];
var data   = [];
var isAndroid   = (Titanium.Platform.name == 'android');

list = ( db.all_item_names() );

for ( var ipos=0; ipos<list.length;ipos++){
    if( list[ipos].clientname[0] != curheader){
        curheader = list[ipos].clientname[0];

        tvrow = Titanium.UI.createTableViewRow({
            height:    40,
            path:'clientdetail.js' ,
            client: list[ipos],
            header:    curheader 
            });
        index.push({title:curheader, index:ipos});
    } else {
        tvrow = Titanium.UI.createTableViewRow({
            height:40,
            path:'clientdetail.js' ,
            client: list[ipos]});
        }   

var title= Titanium.UI.createLabel({ 
    left:    5, 
    top:     2, 
    height:  40, 
    color:   '#000', 
    font: {fontSize: 16, fontWeight: 'bold', fontFamily: (isAndroid?'sans-serif':'Helvetica Neue')}, 
    text:    list[ipos].clientname });
    tvrow.add(title);
    data.push(tvrow);
}

var tableView = Titanium.UI.createTableView({
    data:            data,
    index:           index,
    backgroundColor:'transparent',
    separatorStyle:  Titanium.UI.iPhone.TableViewStyle.GROUPED,
    top:             1,
    width:           '99%'
});

tableView.addEventListener('click', function(e)
    {
        if (e.rowData.path)
        {
            var win = Ti.UI.createWindow({
                url:e.row.path,
                title:title.text
            });

        var clientlist = title.text;
        win.clientlist = clientlist;
        Ti.UI.currentTab.open(win);
    }
});

win.add(tableView); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T01:02:08.683

问题出在您使用的循环中。您将所有内容分配给 index 处的值，该值`ipos`最终是`list.length`（或最后一个值），这就是为什么您总是得到那个值。为了解决这个问题，通常使用闭包并传入值，如下所示：

```
for ( var ipos=0; ipos<list.length;ipos++){
 (function(i){
  if( list[i].clientname[0] != curheader){
   curheader = list[i].clientname[0];

   tvrow = Titanium.UI.createTableViewRow({
    height:    40,
    path:'clientdetail.js' ,
    client: list[i],
    header:    curheader 
   });
   index.push({title:curheader, index:i});
  } else {
   tvrow = Titanium.UI.createTableViewRow({
    height:40,
    path:'clientdetail.js' ,
    client: list[i]
   });
  }   

  var title= Titanium.UI.createLabel({ 
   left:    5, 
   top:     2, 
   height:  40, 
   color:   '#000', 
   font: {fontSize: 16, fontWeight: 'bold', fontFamily: (isAndroid?'sans-serif':'Helvetica Neue')}, 
   text:    list[i].clientname 
  });
  tvrow.add(title);
  data.push(tvrow);
 })(ipos);
} 
```

* * *

*编辑*

我相信您可能在新窗口中获得了错误的标题，并且它访问了最后一个可用的`title`. `title`但是，您的事件侦听器可以使用公开的。我相信它位于`e.row.client.clientname`（尽管它可能在它`e.rowData..`的外观上），这意味着您应该在点击时访问当前选择的标题

```
var tableView = Titanium.UI.createTableView({
 data:            data,
 index:           index,
 backgroundColor:'transparent',
 separatorStyle:  Titanium.UI.iPhone.TableViewStyle.GROUPED,
 top:             1,
 width:           '99%'
});

tableView.addEventListener('click', function(e)
{
 if (e.rowData.path)
 {
  var win = Ti.UI.createWindow({
   url:e.row.path,
   title:e.row.client.clientname
  });

  var clientlist = e.row.client.clientname ? e.row.client.clientname : "No client name";
  win.clientlist = clientlist;
  Ti.UI.currentTab.open(win);
 }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:25:05.743

错误的标题完全是由于引用了“title”变量。相反，您应该使用 e.rowData 或 e.index 来确定单击了哪一行。“title”将始终是您创建的最后一个标题。

考虑以下示例，以更简单的方式演示您的错误和解决方案。请注意，将创建 for 循环的行包装在函数调用中不会帮助您解决此问题。

```
var win = Ti.UI.createWindow({ backgroundColor: '#fff' });

var rows = [], titles = [];
for (var i = 0; i < 20; i++) {
    var row = Ti.UI.createTableViewRow({ height: 40 });
    titles.push('Title ' + i);
    var title = Ti.UI.createLabel({ text: titles[i], textAlign: 'center', color: '#000' });
    row.add(title);
    rows.push(row);
}

var table = Ti.UI.createTableView({
    data: rows
});
table.addEventListener('click', function(evt) {
    alert('WRONG: You clicked ' + title.text + '\n'
        + 'RIGHT: You clicked ' + titles[evt.index]);
});
win.add(table);

win.open(); 
```

# python - 将发电机管道连接在一起

> ID：15869700
> 
> 赞同：2
> 
> 时间：2013-04-08T00:56:51.303
> 
> 标签：python, python-2.7, iterator, generator, tornado-motor

`motor`我可以通过Mongo 适配器访问从数据库中生成属性哈希的生成器：

```
for attrs in (yield motor_generator):
  print attrs 
```

我正在尝试创建一个类方法，如果给定一个生成器，它可以实例化自身的实例，但不完全确定如何去做。我有：

```
class Model:
  @classmethod
  def instantiator(self, motor_generator):
    (self(attrs) for attrs in (yield motor_generator)) 
```

用例：

```
for instance in Model.instantiator(motor_generator):
  instance.attr = 'asdf' 
```

但这只是引发了“产生的未知对象”错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:07:32.443

我有可以启发你的代码片段：

片段1

```
class Model:
  @classmethod
  def instantiator(self, motor_generator):
    # you can not put the yield here. it will transform this function into a generator.
    return map(self, motor_generator) # map is lazy in python 3 
```

片段2

```
class Model:
  @classmethod
  def instantiator(self, motor_generator):
    attrss = motor_generator # I put this outside because i fear a syntax misunderstanding with generators
    return [self(attrs) for attrs in attrss] # with round brackets it would be evaluated on demand = in the for loop but not in this method 
```

片段3

```
for instance in Model.instantiator((yield motor_generator)):
  instance.attr = 'asdf' 
```

# debugging - ANTLRWorks 的经典示例不起作用（调试错误）

> ID：15869706
> 
> 赞同：1
> 
> 时间：2013-04-08T00:57:19.510
> 
> 标签：debugging, antlr, antlr3, antlrworks

我是 Antlr 的新手，在这一点上我真的很迷茫。[ANTLRWorks 的经典示例](http://www.antlr3.org/works/help/tutorial/calculator.html)（我的版本是 1.5）似乎不起作用。

在这里，我在 Expr.g 中的主要代码：

```
grammar Expr;

@header {
package test;
import java.util.HashMap;
}

@lexer::header {package test;}

@members {
/** Map variable name to Integer object holding value */
HashMap memory = new HashMap();
}

prog:   stat+ ;

stat:   expr NEWLINE {System.out.println($expr.value);}
    |   ID '=' expr NEWLINE
        {memory.put($ID.text, new Integer($expr.value));}
    |   NEWLINE
    ;

expr returns [int value]
    :   e=multExpr {$value = $e.value;}
        (   '+' e=multExpr {$value += $e.value;}
        |   '-' e=multExpr {$value -= $e.value;}
        )*
    ;

multExpr returns [int value]
    :   e=atom {$value = $e.value;} ('*' e=atom {$value *= $e.value;})*
    ; 

atom returns [int value]
    :   INT {$value = Integer.parseInt($INT.text);}
    |   ID
        {
        Integer v = (Integer)memory.get($ID.text);
        if ( v!=null ) $value = v.intValue();
        else System.err.println("undefined variable "+$ID.text);
        }
    |   '(' e=expr ')' {$value = $e.value;}
    ;

ID  :   ('a'..'z'|'A'..'Z')+ ;
INT :   '0'..'9'+ ;
NEWLINE:'\r'? '\n' ;
WS  :   (' '|'\t')+ {skip();} ; 
```

在尝试调试它时，我在控制台中遇到了这个错误：

```
[04:43:42] C:\Users\GreyZ0mbie\Documents\output\ExprParser.java:91: error: <identifier> expected
[04:43:42]  public final void prog() throws  {
[04:43:42]                                 ^
[04:43:42] C:\Users\GreyZ0mbie\Documents\output\ExprParser.java:171: error: <identifier> expected
[04:43:42]  public final void stat() throws  {
[04:43:42]                                 ^
[04:43:42] C:\Users\GreyZ0mbie\Documents\output\ExprParser.java:297: error: <identifier> expected
[04:43:42]  public final int expr() throws  {
[04:43:42]                                ^
[04:43:42] C:\Users\GreyZ0mbie\Documents\output\ExprParser.java:401: error: <identifier> expected
[04:43:42]  public final int multExpr() throws  {
[04:43:42]                                    ^
[04:43:42] C:\Users\GreyZ0mbie\Documents\output\ExprParser.java:488: error: <identifier> expected
[04:43:42]  public final int atom() throws  {
[04:43:42]                                ^
[04:43:42] 5 errors 
```

我认为，这个问题可能出在程序版本或 Java 版本中（来自站点的最后一个 Java）。最不幸的是，我刚刚开始使用该程序，根本无法解决这个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T02:24:34.380

请切换到 AntlrWorks 1.4.3，

[http://antlr3.org/download/](http://antlr3.org/download/)

我遇到了与 AntlrWorks 1.5 生成此类损坏的 Java 文件完全相同的错误。

（更新：上面的链接不再有效。您可以从 Google Code 下载）

1.  使用网络浏览器，例如 Google Chrome。
2.  转到[http://code.google.com/p/fast-el/source/browse/trunk/lib/antlrworks-1.4.3.jar?r=86](http://code.google.com/p/fast-el/source/browse/trunk/lib/antlrworks-1.4.3.jar?r=86)
3.  右键单击查看原始文件链接，然后选择将链接另存为...以将此文件保存为 antlrworks-1.4.3.jar。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T19:51:23.400

这是 ANTLRWorks 1.5 中的一个错误，它只影响 ANTLRWorks 的调试功能，并且已经在下一个版本中修复。
[#5：ANTLRworks 无法生成正确的 Java 代码](https://github.com/antlr/antlrworks/issues/5)

# google-apps-script - 电子表格脚本访问

> ID：15869708
> 
> 赞同：0
> 
> 时间：2013-04-08T00:57:26.370
> 
> 标签：google-apps-script

是否可以禁止共享电子表格的用户查看/编辑包含的脚本，同时仍允许他们将脚本用作函数或宏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T07:28:55.493

[我认为该文档](https://developers.google.com/apps-script/scripts_google_accounts)的摘录回答了您的问题-

> 对于容器绑定脚本，脚本的访问规则略有不同。绑定到容器（例如 Google 电子表格或 Google 站点）的脚本项目将继承容器的权限。例如，如果 user1@example.com 具有对 Google 电子表格的编辑权限，则 user1@example.com 也将能够查看和编辑绑定到该电子表格的任何脚本。
> 
> 注意：对于 2012 年 6 月 8 日之前创建的容器绑定脚本，如果选中“允许文档协作者编辑项目”或“允许站点协作者和所有者没有为该脚本选择编辑项目”。在这种情况下，如果您单击“共享”按钮，您将看到一个选项，用于升级到上述针对这些项目的简化共享模型。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T01:54:41.650

不是直接的，但您可以简单地将对专有或“秘密酱”的调用编码为库。这不会阻止电子表格用户能够编辑调用库代码的代码，但它会隐藏主要功能。

这取决于您隐藏脚本代码的动机是否有效。

# c# - ASP.NET 无法向页面动态添加新控件

> ID：15869710
> 
> 赞同：1
> 
> 时间：2013-04-08T00:57:45.323
> 
> 标签：c#, asp.net, file-upload, add, dynamic-controls

我想`FileUploads`动态添加一些到页面并控制它们回发，因为如果使用纯 html 标签而不是 asp.net 控件，它可能会导致文件上传问题。

我在`ASPX`页面面板中定义了：

```
<asp:Panel ID="panelViewer" BackColor="Azure" Width="400" Height="400" runat="server">
</asp:Panel> 
```

并在`<% %>`标签中尝试动态添加正确的文件上传表单计数。文件上传表格的数量取决于表中的 MySQL 记录，可能因用户而异。

我正在尝试动态添加，只是为了开始：

```
Button btn = new Button();
btn.Text = "click me!";
panelViewer.Controls.Add(btn);

FileUpload fileUpload = new FileUpload();
fileUpload.BorderColor = System.Drawing.Color.Red;
panelViewer.Controls.Add(fileUpload); 
```

但是没有成功，当我从服务器推送`Ctrl + U`HTML 响应时，我得到了：

```
<div id="panelViewer" style="background-color:Azure;height:400px;width:400px;">
</div> 
```

HTML 响应中没有控件，因此在来自服务器的呈现页面中。

我尝试不使用之前定义的面板并使其动态添加到`runat form`，但同样的结果。

我该如何解决这样的问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-03T11:52:07.763

你可以用这个

```
Style style = new Style();
style.BorderColor = System.Drawing.Color.Red;
fileUpload.ApplyStyle(style); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T01:09:42.643

尝试将其包含`btn.ID`为您的控件的属性。

# python - 使用日期列删除所有早于期间的表中的所有数据

> ID：15869716
> 
> 赞同：1
> 
> 时间：2013-04-08T00:58:37.623
> 
> 标签：python, postgresql, datetime, python-2.7, sqlalchemy

我有一组表，它们都有一个日期列（没有时区的时间戳）等于插入的时间。

我将如何使用日期列删除所有表中超过 24 小时的所有数据，最好不要使用模型显式删除每个表？

这是我现在从所有表中删除所有内容的方法，但是在为日期添加测试时感觉有些笨拙。

```
#!/usr/bin/env python

import sqlalchemy

engine = sqlalchemy.create_engine('postgresql+psycopg2://user:password@host:port/database')
meta = sqlalchemy.MetaData()
meta.reflect(bind=engine)

for table in reversed(meta.sorted_tables):
    engine.execute(table.delete()) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:03:14.897

以下应该这样做：

```
import datetime
too_old = datetime.datetime.today() - datetime.timedelta(days=1)
for table in reversed(meta.sorted_tables):
    engine.execute(table.delete().where(table.c.timestampinserted <= too_old)) 
```

请注意，如果您有`foreign key constraints`. 如果`truncate`表被`foreign key constraint`.

# php - 自动将 fancybox 类添加到图像链接

> ID：15869717
> 
> 赞同：1
> 
> 时间：2013-04-08T00:58:40.497
> 
> 标签：php, jquery, image, fancybox

我正在使用 Pulse CMS 设计一个需要可编辑的简单静态网站。我正在使用 FancyBox 进行图像突出显示和增强。

我想要的是让所有图像**自动**与 FancyBox 关联，而无需手动添加代码。

**基本上是这样的**

```
<img src="image.jpg"> 
```

**应该成为**

```
<a class="fancybox" href="image.jpg"><img src="image.jpg"></a> 
```

我希望很清楚我的目标是什么。我摆弄着使用 jQuery 和 PHP，但无法真正弄清楚。我什至不知道这是否可能，如果没有，也许还有其他选择。

**回应 JFK 的建议——请告诉我在这里做错了什么：**

```
<html>
    <head>
        <link rel="stylesheet" href="includes/jquery.fancybox.css" type="text/css" media="screen"/>     
        <script type="text/javascript" src="includes/jquery-1.9.1.min.js" type="text/javascript"></script>  
        <script type="text/javascript" src="includes/jquery.fancybox.js" type="text/javascript"></script>       
        <script type="text/javascript">
            $("img").on("click", function(){
                $.fancybox($(this).attr("src"),{
                    // API options
                    padding : 0 // example
                });
            });
        </script>
    </head>

    <body>

        <img src="http://placekitten.com.s3.amazonaws.com/homepage-samples/408/287.jpg" alt=""/>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T02:54:47.530

如果你想要的是`all the images to automatically be associated with FancyBox`，那么也许你甚至不需要`.wrap()`用锚包裹它们。另一种方法是将它们直接链接到fancybox，`click`如下所示：

```
$("img").on("click", function(){
    $.fancybox($(this).attr("src"),{
        // API options
        padding : 0 // example
    });
}); 
```

这样，在单击实际图像之前，您不会处理任何内容。这在性能方面会更好（考虑在每次页面加载时包装 100 多张图像）

见**[JSFIDDLE](http://jsfiddle.net/g5uzx/)**

**注意**：`.on()`需要 jQuery v1.7+

**编辑**：

[Umair Abid](https://stackoverflow.com/users/975932/umair-abid)关于特异性的评论值得考虑，因为您可能不喜欢在 fancybox 中打开您页面的所有图像（其中将包括您的徽标。）将这些图像定位在您的特定内容容器中会是一个更好的主意，所以这线

```
$("img").on("click", function(){ 
```

...会更好地工作

```
$("#contentContainer img").on("click", function(){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T01:02:57.253

使用 jQuery 的 .wrap() 函数将页面中的所有图像包装起来，并使用指向图像位置的锚标记

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T01:05:42.153

```
$("img").wrap(function() {
    return '<a class="fancybox" href="' + $(this).attr("src") + '"/>';
}); 
```

这应该有效。

**编辑**：哇，错别字了

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T01:08:35.583

我想通过jquery是可能的。首先，您需要在要转换为fancybox url的img标签上提供类，而不是使用以下jquery代码

```
$('img.attach_fancybox').each(function(){
    var src = $(this).attr('src');
    $(this).after('<a class="fancybox" href="'+src+'"><img src="'+src+'"></a>');
    $(this).hide();
}) 
```

我还没有测试过代码，所以如果它不起作用，请告诉我

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T01:09:41.357

采用

```
$("img").wrap(function() {
  return "<a class='fancybox' href='" + $(this).attr("src") + "' />";
}); 
```

# python - 你可以覆盖一个由函数结果定义的变量而不先在python中清除吗？

> ID：15869722
> 
> 赞同：2
> 
> 时间：2013-04-08T00:59:21.190
> 
> 标签：python, function, variables, python-2.7, overwrite

所以，我想知道是否有一种方法可以一步清除和覆盖/重写变量，而无需事先清除它。

例如，这就是我所拥有的：

```
def rate(t,w):
    return (t + cos(t))

sum = 0
for i in range(k):
    sum += rate(t+h*i,w)

print sum 
```

但是如果我想以不同的方式重用这个函数，我必须先清除“sum”变量。如果可能的话，我想摆脱这一步。

```
sum = 0                   # I want to combine this step
sum = rate(t,w)/2         # and this one.
for i in range(1,k):
    sum += rate(t+h*i,w)

print sum 
```

这可能吗？（顺便说一句，所有这些代码都在同一个文档中。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T01:03:36.283

您不需要清除第二个示例中的变量。删除该行，看看程序是否仍然有效。

在 Python 中，赋值 ( `=`) 运算符将名称绑定到对象：

```
a = 2 * 4 
```

在这一行中，计算`2 * 4`创建了一个`int`值为 8 的对象。`=`然后，运算符将其绑定到 name `a`。您可以根据需要多次重复使用该名称：

```
a = "hello" 
```

该名称`a`现在绑定到`str`值为“hello”的对象。`int`不再使用时，上一行代码中的 将自动删除。

这种“将名称绑定到对象”的概念导致 Python 和其他语言之间的行为存在细微差异，后者将变量视为可以填充值的小“桶”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T01:06:25.473

您不必将其设置为 0，因为通过使用“sum =”，它重新定义了变量，而没有保留上次分配的信息。

提示：使用 sum 以外的其他变量名，Python 已经使用它...

# java - 如何将请求 URL 从 HTTPS 更新为 HTTP

> ID：15869727
> 
> 赞同：0
> 
> 时间：2013-04-08T01:00:01.287
> 
> 标签：java, http, servlets, request

我正在尝试将 URL 请求从 HTTPS 协议更新为 http [反之亦然]。但是我不确定如何设置我刚刚创建的新请求 URL 并将其传递给下一个 servlet。

代码片段如下，但似乎没有按预期转发。仅当我知道如何更新请求时

```
 String url = null;
    if (request.getScheme().equals("http")) {
        url = "https://" + request.getServerName()+":8080"+ request.getContextPath() + request.getRequestURIWithQueryString();

    System.out.println ("***************************Handling request for ************************ Remote User " + request.getRemoteUser());
    System.out.println ("***************************Handling request for ************************ Scheme " + request.getScheme());
    System.out.println ("***************************Handling request for ************************ ServerName " + request.getServerName());
    System.out.println ("***************************Handling request for ************************ ContextPath " + request.getContextPath());
    System.out.println ("***************************Handling request for ************************ ServletPath " + request.getServletPath());
    System.out.println ("***************************Handling request for ************************ URI with QueryString " + request.getRequestURIWithQueryString());

    if (request.getPathInfo() != null) {

        System.out.println ("***************************Handling request for ************************ PathInfo " + request.getPathInfo());
        url += request.getPathInfo();
        System.out.println ("***************************Handling request for ************************ URL " + url);
    }

   System.out.println ("***************************Handling request for ************************ URL 2 " + url);

  dispatcher = request.getRequestDispatcher(url);

} 
```

# ruby - 安装 CocoaPods 的问题

> ID：15869733
> 
> 赞同：10
> 
> 时间：2013-04-08T01:00:52.633
> 
> 标签：ruby, macos, bash, rubygems, cocoapods

我正在尝试在 OSX 中设置 CocoaPods（我正在运行 10.8.2） - 所以我运行

`sudo gem install cocoapods`

它成功了，我得到 - '成功安装 cocoapods-0.17.2 1 gem installed'

然后......我尝试`pod setup` '-bash：pod：找不到命令'

如何让命令行识别此命令？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-28T02:43:14.020

退出并重新启动终端为我修复了它。实际上，我只是在终端中打开了一个新选项卡。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-04T18:42:17.263

我有这个问题。如果您使用 brew 安装 ruby​​ 并且没有其他方法适合您，请尝试

```
brew unlink ruby && brew link ruby 
```

编辑：

我在 OS X Mavericks 10.9.3

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-30T20:30:28.717

我遇到了同样的问题，在安装了 Ryby 2 的情况下运行 Mountain Lion，而不是使用标准系统 ruby​​。

以前，我将 PATH=/usr/local/bin:$PATH 添加到我的 .bash_profile 中，以确保由自制软件（包括 Ruby 2）安装的内容优先于某些系统内容。

无论如何，在这种情况下，我正在做 sudo gem install cocoapods

成功安装后，在尝试“pod setup”时，我会得到

-bash：吊舱：找不到命令'

所以我注意到 cocoapods 会安装他们的 'pod' 二进制文件而不是

/usr/local/bin

而是在

/usr/local/Cellar/ruby/2.0.0-p247/bin/

所以我添加到我的 .bash_profile

PATH=$PATH:/usr/local/Cellar/ruby/2.0.0-p247/bin/

现在 cocoapods 就像一个魅力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T01:08:31.797

bash 可能根本找不到新安装的`pod`命令。当您刚刚在 .bash 中的某个随机位置安装了一个新命令时`PATH`，您通常需要使用以下命令告诉 bash “重新散列”：

```
$ hash -r 
```

然后，您可以使用以下方法验证是否（或未）找到新命令：

```
$ which pod 
```

退出并重新启动**终端**也可以解决问题，尽管这是一个更重的锤子。

# html - 在 onlclick 上更改背景颜色

> ID：15869735
> 
> 赞同：-2
> 
> 时间：2013-04-08T01:01:22.743
> 
> 标签：html, css, button, background-color

我有这两个按钮。我想在选中时将背景颜色更改为`#3A1D13`，`#4C291A`然后在`#3A1D13`未选中时更改为。

帮助将不胜感激。

```
<input type='button' id='hideshow' class='background' value='About'>
<input type='button' id='hideshowcontact' class='background' value='Contact'> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T01:06:13.587

您的问题被标记为 Jquery，但您根本不需要 JavaScript。您可以使用 CSS `active`psuedo-class 来实现您的结果：

如果您的 CSS 定义如下：

```
.background {
    background-color: #3A1D13;
} 
```

然后，您所要做的就是：

```
.background:active {
    background-color: #4C291A;
} 
```

但是，这会将活动状态的颜色更改应用于所有具有`background`该类的元素。或者，您可以通过`active`在特定元素上应用伪类来做到这一点：

例如，**关于**按钮：

```
#hideshow:active {
    background-color: #4C291A;
} 
```

请注意，由于您的颜色在视觉上相似，因此有点难以注意到。看到这个工作版本：

[http://jsfiddle.net/eWNLq/1/](http://jsfiddle.net/eWNLq/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T01:05:00.430

你是说悬停？

```
.div button:hover {
background-color: your color here
} 
```

# android - android bufferedwriter - 找不到文本文件

> ID：15869738
> 
> 赞同：1
> 
> 时间：2013-04-08T01:01:46.260
> 
> 标签：android, bufferedwriter

我是编程新手（几个月前刚学过Java），通常通过搜索在这里找到很多在线帮助，但这次我很困惑。

我正在尝试将我的 Android 手机上的传感器数据保存到存储中的文本文件中，然后使用 USB 线将文本文件拉出。但是，在手机上运行该应用程序后，我似乎无法在内部存储的文件夹中找到它。

我确实在清单中包含了这一行以排除权限问题。

```
 <uses-permission 
    android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

当我按下屏幕上的按钮时会触发布尔值 save_data，并且我通过在按下按钮时在屏幕上显示开/关来验证该按钮是否正常工作。

```
public void onSensorChanged(SensorEvent event) {
synchronized (this) {
    switch (event.sensor.getType()) {
    case Sensor.TYPE_ACCELEROMETER: 
        A_x_value.setText(Float.toString(event.values[0]));
        A_y_value.setText(Float.toString(event.values[1]));
        A_z_value.setText(Float.toString(event.values[2]));

        if (save_data == true) {
            SaveButton_Label.setText("On");

            String datastring = "A: " + Float.toString(event.values[0]) + " " + Float.toString(event.values[1]) + " " + Float.toString(event.values[2]);
            try
            {
                File f = new File("sensordata.txt");
                FileWriter fr = new FileWriter(f);
                BufferedWriter out = new BufferedWriter(fr);
                out.write(datastring);
                out.close();
            }

            catch (IOException e)
            {
                System.out.println("Exception");
            }

        } else {
            SaveButton_Label.setText("Off");
        }
        break;
    }
} 
```

}

我很感激你们可以提供的任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T01:28:16.677

当您创建一个新的 File 实例时，您必须定义整个路径，包括外部存储路径。

```
File f = new File(Environment.getExternalStorageDirectory().getPath(), "sensordata.txt"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T02:49:03.183

```
you cant see your app folder unless you hav root permission,but u will be able to see the file.

 File f = new File(Environment.getExternalStorageDirectory().getPath()+"/"+"sensordata.txt");

copy this code in your java file and try 
```

# paypal - 沙盒上数字商品的快速结账问题..？

> ID：15869743
> 
> 赞同：0
> 
> 时间：2013-04-08T01:02:54.080
> 
> 标签：paypal

我正在使用 Express Checkout 处理数字商品。我过去做的一些旧项目运行良好，现在我也在沙盒中开发一个新项目。

在我的旧项目（最初构建它们时运行良好）和当前项目中，当我尝试重定向到数字商品服务器时，我在浏览器窗口中收到“错误请求”。

例如， SetExpressCheckout 调用工作得很好，但是当我尝试重定向到[https://www.sandbox.paypal.com/incontext?useraction=continue&token=EC-0XT42801HU928651A](https://www.sandbox.paypal.com/incontext?useraction=continue&token=EC-0XT42801HU928651A)时，我得到以下信息：

> 错误的请求
> 
> 您的浏览器发送了此服务器无法理解的请求。请求头字段的大小超过服务器限制。饼干/n

但是，如果我运行完全相同的东西，没有数字商品 Javascript 并使用常规重定向 URL，它就可以正常工作。

任何关于我做错了什么或这里发生了什么变化的信息将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:54:32.173

这在过去存在一些问题。过去，清除 cookie 和缓存会暂时解决问题并允许进行测试。清除 cookie 和缓存并重试结帐后，您是否仍然收到此错误？如果您在执行此操作后仍然遇到错误，请向[PayPal 商家技术支持](http://www.paypal.com/mts)开一张票，以便我们调查问题的原因。

# yesod - 在不退出进程的情况下干净地关闭 warp 服务器

> ID：15869745
> 
> 赞同：2
> 
> 时间：2013-04-08T01:03:20.847
> 
> 标签：yesod

我正在考虑使用 wai/warp 进行一些自定义的进程间通信。这将有一个不寻常的要求，即我需要在进程中动态启动/停止 warp 实例。主要问题似乎是完全停止翘曲。这个问题在这里解决：

[如何在 WAI 服务器中实现关闭命令？](https://stackoverflow.com/questions/7881327/how-do-i-implement-a-shutdown-command-in-a-wai-server)

但是建议的解决方案最终会通过从 main 返回来退出该过程。我可以向扭曲线程抛出一个 ThreadKill 异常吗？

这个线程：

[https://groups.google.com/forum/#!topic/yesodweb/VoenrabRUBQ](https://groups.google.com/forum/#!topic/yesodweb/VoenrabRUBQ)

建议可以在启动时传递 IORef，这可能会触发外部关闭。这听起来很理想，但不是当前 API 的一部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T08:11:12.750

您可以通过在单独的线程中运行 Warp，`forkIO`然后仅终止该线程。

# ios - UIView 似乎没有记住它的标签

> ID：15869749
> 
> 赞同：0
> 
> 时间：2013-04-08T01:04:08.907
> 
> 标签：ios, objective-c, ios5, ios6

我正在使用 CPPicker 在我的应用程序中实现水平选择器，并且我正在使用标签来确定我正在谈论的两个选择器中的哪一个。

```
 // Picker creation
     CPPickerView *pickerView = [[CPPickerView alloc] initWithFrame:CGRectMake(100, 5, 150, 40)];
     pickerView.dataSource = self;
     pickerView.delegate = self;
     pickerView.peekInset = UIEdgeInsetsMake(0, 40, 0, 40);
     [pickerView reloadData];
     pickerView.showGlass = YES;
     [cell addSubview:pickerView];

    if (indexPath.section == 0) {
        pickerView.tag = 0;
    }
    else if (indexPath.section == 1) {
        pickerView.tag = 1;
    }

    return cell; 
```

然后稍后，我检查标签以指定pickerView 的标题。但它只为标签读取 0，因此两个选择器具有相同的值。

```
- (NSString *)pickerView:(CPPickerView *)pickerView titleForItem:(NSInteger)item {
    NSString *title = nil;

    if (pickerView.tag == 0) {
        title = [NSString stringWithFormat:@"%d", (200 + (item * 20))];
    }
    else if (pickerView.tag == 1) {
        title = [NSString stringWithFormat:@"%d", item + 1];
    }

    return title;
} 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T01:38:12.707

*您是否在方法或函数中声明选择器视图。这意味着它在其他方法或函数中不可见。您可能需要将其设为属性或至少在类扩展中将其声明为实例变量。*

标签的默认值为零，最好将标签计数从 1 开始，*然后您将能够判断它是在其他地方设置还是未正确设置。*

```
if (indexPath.section == 0) {
    pickerView.tag = 1;
}
else if (indexPath.section == 1) {
    pickerView.tag = 2;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T01:58:55.443

在将标签添加到视图后，您将标签设置为 pickerView。视图上的 pickerView 现在是原始实例的副本。将标记代码移到 addSubView 调用上方

# jquery - 将 Jquery 添加到 Wordpress

> ID：15869752
> 
> 赞同：-1
> 
> 时间：2013-04-08T01:04:33.540
> 
> 标签：jquery, wordpress

我有以下代码需要添加到我正在 Wordpress 中处理的模板文件中。我用 php wp_enqueue_script("jquery"); 调用 jquery 这是版本 1.8.3。我已经在 header.php 文件中添加了脚本，虽然我可以使用 Dreamweaver 在本地运行它，但当我尝试在 wordpress 中运行时我不知道出了什么问题。

这是我正在使用的代码：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title> - jsFiddle demo</title>
<script type='text/javascript' src='http://code.jquery.com/jquery-1.8.3.js'></script>
<script type='text/javascript'>
$(window).load(function(){
function sortUsingNestedText(parent, childSelector, keySelector) {
var items = parent.children(childSelector).sort(function (a, b) {
    var vA = $(keySelector, a).text();
    var vB = $(keySelector, b).text();
    return (vA < vB) ? -1 : (vA > vB) ? 1 : 0;
});
parent.append(items);
}

/* setup sort attributes */
$('#sLocation').data("sortKey", "span.wpcf-field-location-value");
$('#sSchool').data("sortKey", "span.wpcf-field-schools-value");

/* sort on button click */
$("button.btnSort").click(function () {
sortUsingNestedText($('#sortThis'), "div", $(this).data("sortKey"));
});
});
</script>
</head>
<body>
<div id="sortThis">
<div class="fp-floorplans">
<div class="fp-link">
<a href="#">Community 1</a>
</div>
<div id="wpcf-field-location" class="wpcf-field-checkboxes wpcf-field-location"><span class="wpcf-field-name wpcf-field-checkboxes wpcf-field-location-name">Loation:</span>  <span class="wpcf-field-value wpcf-field-checkboxes-value wpcf-field-location-value">South</span>
</div>
<div id="wpcf-field-schools" class="wpcf-field-textfield wpcf-field-schools"><span class="wpcf-field-name wpcf-field-textfield wpcf-field-schools-name">School(s):</span>  <span class="wpcf-field-value wpcf-field-textfield-value wpcf-field-schools-value">Southwest</span>
</div>
<div id="wpcf-field-price-starting-at" class="wpcf-field-textfield wpcf-field-price-starting-at"><span class="wpcf-field-name wpcf-field-textfield wpcf-field-price-starting-at-name">Price Starting At:</span>  <span class="wpcf-field-value wpcf-field-textfield-value wpcf-field-price-starting-at-value">$100's</span>
    </div>
</div>
<div class="fp-floorplans">
    <div class="fp-link">
<a href="#">Community 3</a>
    </div>
    <div id="wpcf-field-location" class="wpcf-field-checkboxes wpcf-field-location"><span class="wpcf-field-name wpcf-field-checkboxes wpcf-field-location-name">Loation:</span>  <span class="wpcf-field-value wpcf-field-checkboxes-value wpcf-field-location-value">North</span>
    </div>
    <div id="wpcf-field-schools" class="wpcf-field-textfield wpcf-field-schools"><span class="wpcf-field-name wpcf-field-textfield wpcf-field-schools-name">School(s):</span>  <span class="wpcf-field-value wpcf-field-textfield-value wpcf-field-schools-value">Crowder</span>
    </div>
    <div id="wpcf-field-price-starting-at" class="wpcf-field-textfield wpcf-field-price-starting-at"><span class="wpcf-field-name wpcf-field-textfield wpcf-field-price-starting-at-name">Price Starting At:</span>  <span class="wpcf-field-value wpcf-field-textfield-value wpcf-field-price-starting-at-value">$100's</span>
    </div>
</div>
<div class="fp-floorplans">
    <div class="fp-link">
<a href="#">Community 2</a>
    </div>
    <div id="wpcf-field-location" class="wpcf-field-checkboxes wpcf-field-location"><span class="wpcf-field-name wpcf-field-checkboxes wpcf-field-location-name">Loation:</span>  <span class="wpcf-field-value wpcf-field-checkboxes-value wpcf-field-location-value">East</span>
    </div>
    <div id="wpcf-field-schools" class="wpcf-field-textfield wpcf-field-schools"><span class="wpcf-field-name wpcf-field-textfield wpcf-field-schools-name">School(s):</span>  <span class="wpcf-field-value wpcf-field-textfield-value wpcf-field-schools-value">Northeast</span>
    </div>
    <div id="wpcf-field-price-starting-at" class="wpcf-field-textfield wpcf-field-price-starting-at"><span class="wpcf-field-name wpcf-field-textfield wpcf-field-price-starting-at-name">Price Starting At:</span>  <span class="wpcf-field-value wpcf-field-textfield-value wpcf-field-price-starting-at-value">$100's</span>
    </div>
</div>
</div>
<button id="sLocation" class="btnSort">Sort By Location</button>
<br />
<button id="sSchool" class="btnSort">Sort By School</button>
<br />
</body>
</html> 
```

非常感谢任何想法或帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T01:11:05.187

只是在黑暗中刺伤，但包装所有使用的`$`代码

```
(function($){

    // your code here...

}(jQuery)); 
```

我认为 WordPress 默认情况下在 noConfilct 模式下有 jQuery 或类似的东西。

# c - 结构 C 的不兼容类型错误

> ID：15869755
> 
> 赞同：1
> 
> 时间：2013-04-08T01:05:07.697
> 
> 标签：c

我收到一个不兼容的类型错误，如下所示：

```
error: incompatible types when assigning to type ‘struct cache *’ from type ‘cache’ 
```

我有以下结构。

```
typedef struct __region {
int size;
void *addr;
struct __region *next;
} region;

typedef struct {
int size;
int remainingSpace;
void *addr;
char *bitmap;
struct cache *parent;
struct slab *next;
} slab;

typedef struct {
int alloc_unit;
int slab_counter;
slab *S;
} cache;

typedef struct {
region *R;
cache C[8];
} memory; 
```

我运行的收到错误的代码是：

```
memory M;
M.C[0].S->parent = M.C[0]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T01:07:21.850

`parent`是指向 a 的指针`struct cache`，`M.C[0]`而是 a `struct cache`。您可以使用`&`运算符来获取指向的指针`M.C[0]`：

```
M.C[0].S->parent = &(M.C[0]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T01:07:43.600

您传递的是变量本身而不是其地址。要传递其地址，您需要使用 ( `&`) 运算符的地址：

```
M.C[0].S->parent = &(M.C[0]); 
```

有关更多信息，请参阅[此](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=/com.ibm.xlcpp8l.doc/language/ref/addre.htm)。

# r - 错误：（列表）对象不能被强制输入“逻辑”添加图例

> ID：15869756
> 
> 赞同：1
> 
> 时间：2013-04-08T01:05:11.713
> 
> 标签：r, legend

我在使用`legend`in时遇到问题`R`。我正在处理生存数据，我有两条卡普兰梅尔曲线。我需要识别我的情节中的每一个。我正在使用图例，这就是我尝试过的：

```
plot(kmenfprimaria.dos.inicio, ylab="2B. Probabilidad de supervivencia", 
     family="Times Roman", xlab="Tiempo en días", 
     sub="Mediana: LLA 175 IC 95% (142-295); LMA: 159 IC 95% (59-NR). p(log-rank)=0.783",
     ps=3, cex.main=0.9, cex.sub=0.7, cex.lab=0.7, 
     main="Supervivencia por diagnóstico", cex.main=0.9, lty=c(1,2), lwd=2, 
     legend(450, 0.8,legend= c("LLA","LMA"), lty=c(1,2), lwd=2)) 
```

错误：（列表）对象不能被强制输入“逻辑”

我不知道该怎么做才能强迫对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T01:10:56.597

`legend`不是参数`plot`，您需要调用`plot()`then`legend()`例如

```
plot(kmenfprimaria.dos.inicio, ylab="2B. Probabilidad de supervivencia", 
 family="Times Roman", xlab="Tiempo en días", 
 sub="Mediana: LLA 175 IC 95% (142-295); LMA: 159 IC 95% (59-NR). p(log-rank)=0.783",
 ps=3, cex.main=0.9, cex.sub=0.7, cex.lab=0.7, 
 main="Supervivencia por diagnóstico", cex.main=0.9, lty=c(1,2), lwd=2)

 legend(450, 0.8,legend= c("LLA","LMA"), lty=c(1,2), lwd=2) 
```

# opencl - OpenCL 中 GPU 之间的数据传输

> ID：15869757
> 
> 赞同：4
> 
> 时间：2013-04-08T01:05:29.330
> 
> 标签：opencl, gpu

在不同的GPU设备之间传输数据很耗时，因为这个过程很可能是这样的：GPU1->CPU->GPU2。那么有没有更好的方法在GPU之间传输数据？另外，假设有N个线程，每个线程都要从全局内存中读取M个元素，如果要进行合并访问需要满足什么条件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T03:58:23.877

[clEnqueueMigrateMemObjects](https://www.khronos.org/registry/cl/sdk/1.2/docs/man/xhtml/clEnqueueMigrateMemObjects.html)函数是 OpenCL 1.2 的新功能。

此函数可用于在同一上下文中的设备之间传输内存缓冲区。

我自己从未尝试过使用它，所以我不知道它是否真的比进行设备->主机->设备复制更便宜（很可能很多实现都会这样做）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T13:27:37.610

使用固定缓冲区的概念为 CPU 中的日期创建缓冲区，然后访问您想要使用的 GPU 数量...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:51:00.720

关于执行合并内存访问的要求，如果没有看到您的代码，很难回答您。

但是这个想法是，如果线程正在加载内存中连续的数据，您将获得性能。执行它的一个通用想法是使用数组而不是结构。

# google-maps-api-3 - Gmaps4rails 多边形

> ID：15869765
> 
> 赞同：0
> 
> 时间：2013-04-08T01:07:21.463
> 
> 标签：google-maps-api-3, ruby-on-rails-3.2, gmaps4rails

我对 Rails 很陌生，不知道如何生成正确的 javascript 以在 gmaps4rails 中创建多边形。我能够显示带有标记的谷歌地图，但我迷失了如何生成匹配的 json 代码，如[https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Polygons](https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Polygons)中所示。我想通过 rails 生成所有内容，而不是对任何 javascript 进行硬编码。

这是我的测试代码，用于仅绘制 location_data 模型中的第一个多边形。纬度和经度属性是序列化的。

控制器

```
class HomeController < ApplicationController
skip_load_and_authorize_resource
 skip_before_filter :authenticate_user!
def index

LocationData.find_each do |location|

@polygons = Array.new(LocationData.count,Array.new)

location.latitude.each_index do |index|
@polygons[0] << { :lat => location.latitude[index], :lng =>location.longitude[index]}
end

    end
#@polygons.to_json

respond_to do |format|
format.html
format.json { render json: @polygons }   

end
end
end 
```

生成的 Javascript 看起来像

```
Gmaps.map = new Gmaps4RailsGoogle();
Gmaps.load_map = function() {
Gmaps.map.initialize();
Gmaps.map.polygons = [[{"lat"=>42.31276, "lng"=>-71.03645}, {"lat"=>42.35653, "lng"=>-71.06754}, {"lat"=>42.45453, "lng"=>-71.7856}]];
Gmaps.map.polygons_conf.fillColor = "#000";
Gmaps.map.create_polygons();
Gmaps.map.adjustMapToBounds();
Gmaps.map.callback();
};
Gmaps.oldOnload = window.onload;
 window.onload = function() { Gmaps.triggerOldOnload(); Gmaps.loadMaps(); }; 
```

看法

```
<%= gmaps({
       "polygons"    => { "data" => @polygons    , "options" => { "fillColor" => "#000" } }
     })
 %> 
```

将它与 wiki 上的代码进行比较，我注意到由于某些奇怪的原因，javascript 中有 =>。

更新

我的代码中缺少一行

```
@polygons = @polygons.to_json 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:02:33.540

我的控制器中缺少一行代码。

```
@polygons = @polygons.to_json 
```

# jquery - 如何使用 jQuery 创建 250 个 div？

> ID：15869769
> 
> 赞同：-3
> 
> 时间：2013-04-08T01:07:46.140
> 
> 标签：jquery, html, for-loop

我想制作一个包含 250 个 div 的网站，其中包含相应的数字。我可以键入所有这些，但我知道我可以在 jQuery 中使用 for 循环。不过，我不确定如何去做。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T01:15:57.770

```
var container = document.getElementById('foo');
for (var i = 0; i < 250; i++){
  var d = document.createElement('div'); // <div>
  d.id = 'div' + i;                      // id="div{i}"
  d.className = 'someclass';             // class="someclass"
  container.appendChild(d);
} 
```

或者，就 jQuery 而言：

```
for (var i = 0; i < 250; i++){
  $('<div>',{           // <div>
    'id':'div'+i        // id="div{i}"
    'class':'someclass' // class="someclass"
  }).appendTo('#foo');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T01:20:28.043

尝试这样的事情。您需要替换为包含 div 的名称，以及为它们提供通用样式的类的名称。

```
var c = $("#<container-name>");

for (var i = 1; i < 251; i++) {
  $("<div></div>").addClass("<class-name>").text(i).appendTo(c);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T01:25:35.033

这可能有点难看，但使用一次附加将优于多次使用它。

```
var html = '';

for (var i = 0; i < 250; i++) {
  html += '<div id="div' + i + '">' + i + '</div>';
}

$('#example').append(html); 
```

# sql - 通过 T-SQL 更改所有触发器

> ID：15869770
> 
> 赞同：0
> 
> 时间：2013-04-08T01:07:56.233
> 
> 标签：sql, sql-server, tsql, triggers

有没有办法使用循环 T-SQL 或 C# 代码更新/更改所有触发器？我也需要它更新数据库中的所有触发器，因为该`RAISERROR`命令在 sql server 2012 中已更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T01:42:29.103

您可以将所有触发器编写成文本文件。看：

[如何使用 Microsoft SQL Server Management Studio 为数据库中的所有触发器生成脚本](https://stackoverflow.com/questions/13200511/how-to-generate-scripts-for-all-triggers-in-database-using-microsoft-sql-server)

然后，您可以使用文本编辑器来替换您需要替换的代码。然后，您可以删除触发器并重新创建它们。我不知道您指的是生产数据库，还是您正在开发的数据库。我从您的问题中假设您已准备好对数据库进行这些重大更改。无论如何，请确保首先备份您的数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T03:23:42.700

您可以使用所有触发器

```
SELECT [name] FROM [sys].[triggers] 
```

并循环遍历每个触发器并执行

```
EXEC sp_helptext 'TriggerName' 
```

所以你将拥有它的create语句......

# ruby-on-rails - Rails，浏览器中的后退按钮注销

> ID：15869771
> 
> 赞同：0
> 
> 时间：2013-04-08T01:08:02.343
> 
> 标签：ruby-on-rails, ajax, devise

在这里快速提问。

我正在为用户创建一个 3 步表单 - 所有 AJAX（并使用设计）。用户在第一步创建，并在后两步更新。

现在的问题是，如果用户在浏览器中点击后退按钮返回到第一步，Devise 会自动将表单操作更改为`update`. 但是，我的`update`操作会渲染部分，而这些部分只能通过 Ajax 在步骤 2 和 3 中渲染。

我怎样才能使用户在点击后退按钮时注销，以便第一个表单始终是一个`new_user`表单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T01:44:17.023

一种解决方案是完全禁用浏览器中的后退按钮。

您可以使用模态来实现这三个步骤。如果您使用的是 Ajax，请完全使用它。

这样，浏览器上就没有“后退”按钮。但是您仍然可以在模态窗口上拥有“后退”按钮，在这种情况下，后退选项完全由您控制。

**添加**

为了可用性，您应该允许用户随时更新他们的信息，而不是在注册后强制他们完成。

我不知道你接下来的两个步骤是什么。但是你可以

1.  设置`update`方法以在用户尚未完成时呈现接下来的两个步骤，或者在完成时呈现其他信息。

2.  如果用户已登录但尚未完成这两个步骤，则显示通知。

通过这些，您应该能够确保用户在他们的浏览器上所做的任何事情，他都可以看到他接下来需要做什么。这些应该适用于 Ajax 或非 Ajax。

# javascript - 如何通过复选框将滚动条等内容添加到新窗口？

> ID：15869774
> 
> 赞同：1
> 
> 时间：2013-04-08T01:08:30.177
> 
> 标签：javascript, html

此脚本打开输入网站的新页面。我如何通过复选框操纵它出现的窗口？例如，如果选中滚动条的复选框，我如何将其添加到新窗口？

```
 <!DOCTYPE html>
<html>
  <head>
    <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
    <title></title>

    <script>

             function go(){

                var  myWindow;
                var urlValue = document.getElementById("urlValue").value;

                    //radio buttons
                    if(yes.checked){

                        myWindow = window.open(urlValue);
                    }

                    else if (no.checked ){
                        myWindow = window.open(urlValue, "_self"); 
                        }

                    //checkbox loop
                    /*
                    for (i=0; i<document.myForm.checkGroup.length; i++){
                        if (document.myForm.checkGroup[i].checked==true)
                        alert("Checkbox at index "+i+" is checked!")
                        }
                    */

              }

    </script>

  </head>
  <body>
    <form name="myForm">

      <p><label>Enter URL with http:// here: </label> <input id="urlValue" type="text"></p>
      <p><label>Would you like to open a new window?<br>
          <input name="yesNo" id="yes" type="radio">Yes<br>
          <input name="yesNo" id ="no" type="radio">No </label></p>
      <p><label>Other Options</label> <br>
        <input name = "checkGroup" id="fullScreen" type="checkbox">Full Screen<br>
        <input name = "checkGroup" id="scrollBar" type="checkbox">Scroll Bar<br>
        <input name = "checkGroup" id="statusBar" type="checkbox">Status Bar<br>
        <input name = "checkGroup" id="toolBar" type="checkbox">Tool Bar<br>
      </p>
      <p><input id="goButton" value="GO" type="button" onclick = "go()"></p>
    </form>

  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T02:26:20.993

这种方法在现代浏览器中已被弃用...

不再有**状态栏**可以隐藏，您也无法再隐藏已打开页面的**滚动条。****全屏**也不能像在旧浏览器中那样工作，现在有一个浏览器 API 可用于将浏览器切换到全屏模式，但你不能通过父窗口在`window.open()`.

以下是它如何在旧浏览器中工作的示例：http:
[//jsfiddle.net/MyajZ/](http://jsfiddle.net/MyajZ/)

在现代浏览器中，它仍然打开**没有工具栏**的新窗口，并切换到**全屏模式**，但立即恢复正常状态......

顺便说一句，我发现了管理复选框的这种更简单的方法：

```
var params = "";
params += scrollBar.checked ? "scrollbars=yes," : "scrollbars=no,";
params += statusBar.checked ? "status=yes," : "status=no,";
params += toolBar.checked   ? "toolbar=yes" : "toolbar=no";
params += fullScreen.checked? ",type=fullWindow,fullscreen" : "";

// ...
myWindow = window.open(urlValue, "Window Name", params); 
```

变量的示例结果`params`：

```
scrollbars=no,status=no,toolbar=no,type=fullWindow,fullscreen 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T02:23:06.720

```
<!DOCTYPE html>
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type" />
  <title>Window opener</title>
  <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script type="text/javascript">
    $(document).ready(function () {
      var windowOpenerForm;

      windowOpenerForm = $('#windowOpenerForm');

      windowOpenerForm.submit(function (e) {
        var url,
            isNewWindow,
            windowOptions,
            windowTarget,
            windowSpecs;

        e.preventDefault();

        url = 'http://' + $('#urlValue', windowOpenerForm).val();
        isNewWindow = $('input[name="openNewWindow"]:checked',
                        windowOpenerForm).val();
        windowOptions = extractWindowOption(
                          $('input[name="windowOptions"]',
                            windowOpenerForm));
        windowTarget = isNewWindow === 'yes' ? '_blank' : '_self';
        windowSpecs = [
            'fullscreen=' + windowOptions.fullScreen,
            'scrollbars=' + windowOptions.scrollBar,
            'status=' + windowOptions.statusBar,
            'toolbar=' + windowOptions.toolBar
          ].join(',');

        window.open(url, windowTarget, windowSpecs);
      });

      function extractWindowOption(winOptions) {
        var opt = {};

        winOptions.each(function (index, elem) {
            opt[$(elem).val()] = $(elem).is(':checked') ?'yes' : 'no';
          });

        return opt;
      }
    });
  </script>
</head>
<body>
  <form name="myForm" id="windowOpenerForm">
    <p>
      <label>Enter URL with http:// here: </label>
      <input id="urlValue" type="text">
    </p>
    <p>Would you like to open a new window?<br>
      <input name="openNewWindow" type="radio" value="yes" checked>Yes<br>
      <input name="openNewWindow" type="radio" value="no">No
    </p>
    <p>Other Options<br>
      <input name="windowOptions" value="fullScreen" type="checkbox">Full Screen<br>
      <input name="windowOptions" value="scrollBar" type="checkbox">Scroll Bar<br>
      <input name="windowOptions" value="statusBar" type="checkbox">Status Bar<br>
      <input name="windowOptions" value="toolBar" type="checkbox">Tool Bar<br>
    </p>
    <p><input value="GO" type="submit"></p>
  </form>
</body>
</html> 
```

# r - CummeRbund csHeatmap：调整基因 id 文本大小的方法？

> ID：15869775
> 
> 赞同：0
> 
> 时间：2013-04-08T01:08:30.243
> 
> 标签：r, ggplot2, bioconductor

我想知道是否有人知道一种方法来更改由`csHeatmap()`R 包 CummeRbund 中的函数生成的热图的基因 id 文本标签？我知道这是一个 ggplot 对象，但我找不到一种方法来 1）按照它们在图像中呈现的顺序提取基因 id 或 2）修改它们的相对大小。现在，文本太大而无法阅读。

有没有人遇到过这个问题？

任何想法，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-26T22:42:54.550

想想我在一堆谷歌之后想出了这个。您基本上将主题传递给对象，就像在 ggplot 中一样...

```
hmap <- csHeatmap(myGenes,cluster='both')
hmap <- hmap + theme(axis.text.x=element_text(size=14),axis.text.y=element_text(size=6)) 
```

其中 myGenes 是 CuffGeneSet 的名称。

祝你好运。

# java - 从数据表中请求未知参数“2”

> ID：15869776
> 
> 赞同：0
> 
> 时间：2013-04-08T01:08:34.197
> 
> 标签：java, jquery, json, datatable

我正在使用带有服务器端处理的 Jquery Datatable 来处理我的所有数据。我的参数“2”是一个日期，我作为字符串输入，转换为日期以添加到数据库，但是，再次使用字符串显示到网页。这适用于“GetData”过程。但是，当我使用“AddData”输入新数据集时，标题中出现错误。似乎只有处理 Date 的两列抛出这个错误，其余的行被写入。刷新页面后，一切都恢复正常。

这是我的数据表脚本：

```
var i = 0;
        $(document).ready(function(){
            oTable = $("#datatables").dataTable({
                        "aoColumns" : [
                            { "sName" : attendingPhysician" },
                            { "sName" : "physicianName" },
                            { "sName" : "dateStart" },
                            { "sName" : "dateEnd" },
                            { "sName" : "teamNumber" }
                         ],
                        "sAjaxSource" : 'teamassignmentdata',
                        "sServerMethod": "GET",
                        "fnDrawCallback" : function(oSettings) {
                            //The call to makeEditable is set here to make sure all the data are loaded
                            i++;
                            if(i == 1) {
                                this.makeEditable({
                                    sUpdateURL : 'UpdateTeamAssignmentData',
                                    sAddNewRowFormId: "formAddNewRow",
                                    sAddNewRowButtonId: "btnAddNewRow",
                                    sAddNewRowOkButtonId: "btnAddNewRowOk",
                                    sAddNewRowCancelButtonId: "btnAddNewRowCancel",
                                    sAddURL: "AddTeamAssignmentData",
                                    sAddHttpMethod: "POST",
                                    aoColumns : [
                                         {},    //physician number; default editing 
                                         {},    //physician name; default editing
                                         {      //date start; datepicker
                                            type : 'datepicker',
                                             datepicker : {
                                               dateFormat : 'yy-mm-dd'
                                             }
                                         },             
                                         {
                                            type : 'datepicker',
                                             datepicker : {
                                               dateFormat : 'yy-mm-dd'
                                             }
                                         },     //date end; datepicker
                                         {  //team number; no editing
                                            indicator: 'Saving...',
                                            tooltip: 'Click to edit team number',
                                            loadtext: 'loading...',
                                            type: 'select',
                                            onblur: 'submit',
                                            data: "{'5':'5','6':'6','7':'7','8':'8','9':'9'}"
                                         }  
                                     ],
                                    height : "20px"
                                });
                            }
                        }
                    });

        }); 
```

这就是实际将数据输入数据库，并将其输出到数据表的方法。

```
String physician = request.getParameter("physician");
    String physicianname = request.getParameter("physicianname");
    String datestart = request.getParameter("datestart");
    String dateend = request.getParameter("dateend");
    String team = request.getParameter("team");
    boolean addSuccess = true;

    PhysicianTeamData physicianTeamData = new PhysicianTeamData();

    String sql = "INSERT INTO " + TABLE_NAME + " " +
            "(team_attendingPhysician, team_physicianName, team_dateStart, " + 
            "team_dateEnd, team_teamNumber) VALUES (?,?,?,?,?);";
    int returnId = 0;
    try {

        dateStart = dateFormat.parse(datestart);
        dateEnd = dateFormat.parse(dateend);

        sqlDateStart = new java.sql.Date(dateStart.getTime());
        sqlDateEnd = new java.sql.Date(dateEnd.getTime());

        ps = con.prepareStatement(sql);

        ps.setInt(1, Integer.parseInt(physician));
        ps.setString(2, physicianname);
        ps.setDate(3, sqlDateStart);
        ps.setDate(4, sqlDateEnd);
        ps.setString(5, team);

        returnId = ps.executeUpdate();

    } catch (Exception e) {
        e.printStackTrace();
        addSuccess = false;
    }

    PrintWriter out = response.getWriter();

    if(addSuccess) {

        PhysicianTeam pt = new PhysicianTeam();
        pt.setRecordNumber(returnId);
        pt.setAttendingPhysician(Integer.parseInt(physician));
        pt.setPhysicianName(physicianname);
        pt.setDateStart(datestart.toString());
        pt.setdateEnd(dateend.toString());
        pt.setTeamNumber(Integer.parseInt(team));

        physicianTeamData.addPhysicianTeamData(pt);

        //out.print(returnId);
        out.print(pt);

    } else {
        out.write("Row Add Failed!");
    } 
```

PhysicianTeamData 只是一个数组列表，这些是 PhysicianTeam 类中的字段：

```
private int attendingPhysician;
private String physicianName;
private String dateStart;
private String dateEnd;
private int teamNumber; 
```

就像我提到的那样，JSON 对象将 dateStart 作为参数“2”，将 dateEnd 作为参数“3”，即使我将它们作为字符串输出，两者都抛出错误。

我哪里错了？

# asp.net - ASP.NET Web 窗体显示/保存的值不正确

> ID：15869779
> 
> 赞同：0
> 
> 时间：2013-04-08T01:08:59.607
> 
> 标签：asp.net, caching, ssl

[最近，我们将 SSL 添加到我支持的应用程序中，它破坏了一个“打印”按钮，出现与此处](http://www.developmentnow.com/g/8_2005_1_0_0_35695/Cacheability-issue-with-IE.htm)描述的问题类似的问题。

如果没有 SSL，该按钮将生成带有打开和保存提示的 PDF 报告。实施 SSL 并且我们对 MasterPage HTTP Cacheability 进行了更改后，“打印”按钮再次起作用。

我们的母版页在 Page_Load 中有以下代码：

```
Protected void Page_Load(object sender, EventArgs e) {
    Response.Buffer = true;
    Response.ExpiresAbsolute = DateTime.Now;
    Response.Expires = 0;
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
} 
```

并将其更改/实现为：

```
Protected void Page_Load(object sender, EventArgs e) {
    Response.Buffer = true;
    Response.Expires = -1;
    Response.Cache.SetNoStore();
} 
```

打印按钮 Click 事件的代码如下：

```
protected void btnPrint_Click(object sender, EventArgs e) {
    try {
        ClearMessage();

        BusinessObject _obj = GetBusinessObject();

        Id = _obj.BusinessObjectId;
        string strId = Id.ToString();
        Warning[] warnings;
        string[] streamIds;
        string encoding = string.Empty;
        string mimetype = string.Empty;
        string extension = string.Empty;

        ReportViewer viewer = new ReportViewer() {
            ProcessingMode = ProcessingMode.Remote
        };
        viewer.ServerReport.ReportPath = "/ReportPath/ReportFile";

        ReportParameterCollection objParams = new ReportParameterCollection();
        objParams.Add(new ReportParameter("ObjId", strId));

        viewer.ServerReport.SetParameters(objParams);

        byte[] bytes = viewer.ServerReport.Render("PDF", null, out mimetype, out encoding, out extension, out streamIds, out warnings);

        Response.Buffer = true;
        Response.Clear();
        Response.ContentType = mimetype;
        Response.AddHeader("content-disposition", "attachment; filename=" + GetBusinessObject().ObjNumber + " Object Summary." + extension);
        Response.BinaryWrite(bytes);
        Response.End();
    }
    catch (Exception ex) {
        ClearMessage();
        ErrorEmail("AppError", "btnPrint_Click", ex);
    }
} 
```

我认为一切都很好，但看起来它可能会导致更多问题，因为现在我有报告称页面之间显示了不正确的数据（来自一条记录的信息显示为另一条记录）。

可缓存性更改是实现 SSL 时代码中唯一发生的更改，我们之前没有任何关于这种情况的报告（该应用程序已经运行了一年多）。此外，我让我的后备程序员恢复生产分支代码中的更改，发布到我们的登台服务器，并尝试复制问题......他们做不到。

## 更新

我对站点范围的 web.config 进行了以下更改，问题似乎已经消失。谁能解释为什么这有效但代码没有？

```
<system.webServer>
    <staticContent>
        <clientCache cacheControlMode="DisableCache" />
    </staticContent>
<system.webServer> 
```

## 更新

设置 `<clientCache cacheControlMode="DisableCache" />`没有解决问题，我们仍然间歇性地遇到问题。将接受的答案视为有效的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:25:33.540

所以事实证明，问题实际上在于 SSL 证书安装不正确。基本设置是我们有一个负载平衡器和终止于 2 个 Web 服务器的 SSL 证书。

显示/保存了不正确的值，因为负载均衡器无法读取 cookie（因为它已加密）以确定要定向到哪个服务器，并且由于我们使用会话变量，它不会正确清除会话变量。

我们的权宜之计是将路由决策切换为基于 IP。正如您可以想象的那样，这会导致一个防火墙后面的所有用户都指向同一台服务器，从而破坏了负载平衡器的目的。

我们的永久解决方案是在负载均衡器上放置第三个 SSL 证书，解密 cookie 以确定要定向到哪个服务器，再次加密数据，然后将其发送到服务器。

希望这可以帮助遇到同样问题的其他人。

# php - 使用 onClick 函数更新数据库信息

> ID：15869780
> 
> 赞同：0
> 
> 时间：2013-04-08T01:09:06.383
> 
> 标签：php, javascript

我正在尝试使用带有按钮的 onClick 函数更新 mysql 中的表行**site_active 。**

我的按钮代码是：

```
<button onClick='site_active()' id='site_active'><?php echo $client->site_active; ?></button> 
```

然后当然我的脚本是：

```
<script> 
   function site_active() 
   {
      alert("Site Updated"); 
   } 
</script> 
```

我确信我需要使用 php 函数来实现这一点，并且我尝试使用表单来完成以下代码。

```
<?php 
$con=mysqli_connect("INFORMATION REMOVED"); 
//Check connnection 
if (mysqli_connect_errno()) 
{ 
echo "Failed to connect to MySQL: " . mysqli_connect_error(); 
} 

mysqli_query($con, "UPDATE mypanda_clients SET site_active='$_GET[site_active]' WHERE id='$_GET[id]'"); 

mysqli_close($con); 
?> 
```

由于网站中的一些冲突问题，表单选项不起作用。任何帮助都会很棒，因为我已经花了几个小时没有进展。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T01:11:30.517

我宁愿使用 jquery 并向服务器发出 ajax 请求

```
$('#buttonid').click(function(){
  //ajax request to the server goes here
}); 
```

这是 jquery 中 ajax 的链接 [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# java - 如何仅使用命令行运行 Maven 创建的 jar 文件

> ID：15869784
> 
> 赞同：71
> 
> 时间：2013-04-08T01:09:32.657
> 
> 标签：java, maven, jar

我需要一些帮助来尝试使用命令行运行以下 maven 项目： [https](https://github.com/sarxos/webcam-capture) ://github.com/sarxos/webcam-capture，webcam-capture-qrcode示例是我正在尝试运行的示例。我使用 Eciplse IDE 运行它，但需要将其移至仅使用命令行。我有 Maven 创建的罐子。

我正在努力

```
java -classpath ./webcam-capture/target/webcam-capture-0.3.10-SNAPSHOT.jar  com.github.sarxos.webcam.WebcamQRCodeExample 
```

但我不断得到

```
Exception in thread "main" java.lang.NoClassDefFoundError: com/github/sarxos/webcam/WebcamQRCodeExample
Caused by: java.lang.ClassNotFoundException: com.github.sarxos.webcam.WebcamQRCodeExample 
```

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2013-04-08T06:52:41.907

只需使用[`exec-maven-plugin`](http://www.mojohaus.org/exec-maven-plugin/usage.html).

```
<build>
    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <version>1.2.1</version>
            <configuration>
                <mainClass>com.example.Main</mainClass>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

然后你运行你的程序：

```
mvn exec:java 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-04-21T10:23:34.707

**第一步：**在 pom.xml 中添加此内容

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-shade-plugin</artifactId>
            <version>2.1</version>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>shade</goal>
                    </goals>
                    <configuration>
                        <transformers>
                            <transformer
                                implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
                            </transformer>
                        </transformers>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

**第二步：**逐行执行此命令行。

```
cd /go/to/myApp
mvn clean
mvn compile 
mvn package
java -cp target/myApp-0.0.1-SNAPSHOT.jar go.to.myApp.select.file.to.execute 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-07-25T01:41:13.903

使用此命令。

```
mvn package 
```

制作包jar文件。然后，运行此命令。

```
java -cp target/artifactId-version-SNAPSHOT.jar package.Java-Main-File-Name 
```

[在 mvn package 命令之后。将创建包含类、测试类、jar 文件和其他资源文件夹和文件的目标文件夹](https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference)。

输入您自己的 artifactId、版本和包以及 java 主文件。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-08T04:36:02.807

我不确定你的情况。但据我所知，要从 cmd 运行任何 jar 文件，我们可以使用以下命令：

转到保存 jar 文件的目录：

```
java -jar <jarfilename>.jar 
```

但是您可以查看以下链接。我希望它会帮助你：

[从命令行运行 Netbeans maven 项目？](https://stackoverflow.com/questions/3689020/run-netbeans-maven-project-from-command-line)

[http://www.sonatype.com/books/mvnref-book/reference/running-sect-options.html](http://www.sonatype.com/books/mvnref-book/reference/running-sect-options.html)

# android - libavcodec/opt.h：没有这样的文件或目录

> ID：15869794
> 
> 赞同：0
> 
> 时间：2013-04-08T01:11:27.080
> 
> 标签：android

我尝试使用 FFMpeg 编译一个项目，但它给出了 libavcodec/opt.h 缺失的错误。我看了一下源目录，我认为没有名为 opt.h 的文件。这个错误似乎有点奇怪。

Android 的 FFMpeg 项目。将 opt.h 放入 libavutil 文件夹。然而，当我尝试构建它时，它抱怨 libavcodec 中缺少 opt.h -</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T01:22:08.610

通过快速搜索，我看到很多对 libavcodec/opt.h 的引用，因此它似乎是您丢失的真实文件。我没有在 Android 中使用 FFMpeg 做过任何项目，所以我不知道，但它似乎确实是其他人正在使用的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T01:24:13.977

在 ffmpeg - 项目的 Github 镜像上，0.6 - 发布分支包含一个 libavcodec/opt.h 标头

[https://github.com/FFmpeg/FFmpeg/blob/release/0.6/libavcodec/opt.h](https://github.com/FFmpeg/FFmpeg/blob/release/0.6/libavcodec/opt.h)

# sublimetext - 备份 ST3 设置

> ID：15869796
> 
> 赞同：0
> 
> 时间：2013-04-08T01:11:30.477
> 
> 标签：sublimetext, sublimetext3

我发现新的 Sublime Text 首选项架构非常方便。

它基本上让我们将键盘映射、首选项和特定于包的首选项、语法文件类型映射、语法定义和颜色主题都放入`Sublime Text 3/Packages/User`目录中。

这使得将这个目录本身变成一个 git repo*非常诱人。*

这是预期的目的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T13:10:51.123

按操作系统有：

GNU/Linux：

```
$(HOME)/.config/sublime-text-3/Packages/User/Package Control.sublime-settings/Package Control.sublime-settings 
```

窗户：

```
 %APPDATA%\sublime-text-3\Packages\User\Package Control.sublime-settings\Package Control.sublime-settings 
```

Mac OS X：

```
~/Library/Application Support/sublime-text-3/Packages/User/Package Control.sublime-settings/Package Control.sublime-settings 
```

我想它允许通过升级命令恢复所有包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-30T22:28:06.140

我不知道这是否是预期的目的，但我肯定会。有一个名为[sublimall](http://sublimall.org/)的插件可以很容易地同步包，通过机器来回检查。我还使用[Dropbox](http://dropbox.com/)轻松同步，仅使用符号链接。我认为这是迄今为止我最喜欢的，但它没有 git 的备份和灵活性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-30T22:43:26.190

我在我的 Dropbox 帐户上备份 USER 目录，然后从我的 sublime 文本文件夹中设置符号链接。奇迹般有效。

# ruby - Jekyll 可以在 MagLev 上运行吗？

> ID：15869799
> 
> 赞同：1
> 
> 时间：2013-04-08T01:12:03.553
> 
> 标签：ruby, jekyll, maglev

[MagLev](http://maglev.github.io/ "磁悬浮")尝试与 ruby​​ 1.8.7 兼容

所以在我看来，[Jekyll](https://github.com/mojombo/jekyll)应该能够在它上面运行......

并且基于this [previous question](https://stackoverflow.com/questions/2276556/how-can-i-run-rails-on-maglev)，似乎甚至一些rails应用程序也可以在它上面运行......

*   但有没有人真正尝试过？
*   你有什么问题？
*   如果您还没有尝试过，您预计会出现任何重大问题吗？

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T03:02:51.707

我刚刚在 Maglev 的 1.9 分支上尝试了 Jekyll，但它不起作用。当使用任何带有 C 扩展的东西时，Maglev 会掉下来；在这种情况下，它是 Jekyll 对 posix-spawn 的依赖。

您可能想查看有关[Maglev 上 C 扩展状态](https://github.com/MagLev/maglev/blob/master/docs/Maglev_c_extensions.md)的文档。

AFAIK，Jekyll 并没有真正的持久性（除了静态文件），所以我不确定你会从使用 Maglev 中获得什么。您绝对可以从 Maglev 和 Sinatra 中获得很多乐趣，试一试。

# c# - linQ group by/select - 对象引用未设置为对象的实例

> ID：15869800
> 
> 赞同：0
> 
> 时间：2013-04-08T01:12:16.450
> 
> 标签：c#, linq, datatable

我正在尝试创建一个 linQ 查询，它将产生与此 SQL 相同的结果：

```
SELECT Priority.PriorityKey, Count(Priority.PriorityKey) AS NewPresentingUnits
FROM Priority INNER JOIN SupportPeriod ON Priority.PriorityCode = SupportPeriod.PriorityCode
WHERE (((SupportPeriod.NewClient)=True) AND ((SupportPeriod.DateAssistanceRequested) Between #1/1/2013# And #2/1/2013#) AND ((SupportPeriod.DateFinished) Between #1/1/9999# And #12/31/9999#))
GROUP BY Priority.PriorityKey; 
```

当我运行 SQL 查询时，我得到以下结果：

[https://docs.google.com/file/d/0B6b_N7sDgjmvRlBtT1lZWURERVU/edit?usp=sharing](https://docs.google.com/file/d/0B6b_N7sDgjmvRlBtT1lZWURERVU/edit?usp=sharing)

这是 linQ 语句：

```
 SupportPeriodTableAdapter spTa = new SupportPeriodTableAdapter();
    SupportPeriodDataTable dataTables = spTa.GetData();
        var test = (from sp in dataTables
                  where (sp.NewClient == true) &&
                      (sp.DateAssistanceRequested >= new DateTime(2013, 1, 1) &&
                      sp.DateAssistanceRequested <= new DateTime(2013, 2, 1)) &&
                      (sp.DateFinished > new DateTime(2013, 2, 1))
                  group sp by sp.PriorityRow.PriorityKey into groupz
                  select new { Key = groupz.Key, sount = groupz.Count() }); 
```

当我尝试调试时，`var test`我在结果视图中得到“对象引用未设置为对象的实例”。

[https://docs.google.com/file/d/0B6b_N7sDgjmvdGp0bjJCNkE3TTg/edit?usp=sharing](https://docs.google.com/file/d/0B6b_N7sDgjmvdGp0bjJCNkE3TTg/edit?usp=sharing)

我不熟悉使用 linQ 的“分组依据”和“选择新”功能，因此我很难弄清楚这一点....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T03:34:25.800

我认为您的数据加载有问题。

**我将检查 dataTables 中的所有行是否都有 PriorityRow**

如果有一些行上没有 PriorityRow，则 group by 失败。在这种情况下，您可以将 linq 更改为：

```
 var test = (from sp in dataTables
             where (sp.NewClient == true) &&
                   (sp.DateAssistanceRequested >= new DateTime(2013, 1, 1) &&
                    sp.DateAssistanceRequested <= new DateTime(2013, 2, 1)) &&
                   (sp.DateFinished > new DateTime(2013, 2, 1))
             group sp by sp.PriorityRow != null 
                               ? sp.PriorityRow.PriorityKey 
                               : "not key"
                      into groupz
             select new { Key = groupz.Key, sount = groupz.Count() }); 
```

使用： **按 sp.PriorityRow != null 对 sp 进行分组？sp.PriorityRow.PriorityKey ：“不是关键”进入 groupz**

# mongodb - 如何在 mongodb ODM 中删除不存在的引用文档

> ID：15869804
> 
> 赞同：3
> 
> 时间：2013-04-08T01:13:20.453
> 
> 标签：mongodb, mongodb-php

对mongodb有点新。我知道 mongodb 对引用没有限制。因此，如果我有一个不存在的参考文档，我该如何删除它？

例如：

```
{
    _id: ObjectId("51619a758ead0e6765000004"),
    createdAt: ISODate("2013-04-08T00:10:29+08:00"),
    works: [ { $ref: "products", $id: ObjectId("51619a758ead0e6765000007"), $db: "ihome", type: "product" } ]
} 
```

引用的产品已被删除。我不知道如何从作品中提取它？我在下面尝试但不工作：

```
$dm->createQueryBuilder('SupplierBundle:Supplier')
    ->update()
    ->field('id')->equals('51619a758ead0e6765000004')
    ->field('works.$id')->pull(new \MongoId('51619a758ead0e6765000007'))
    ->getQuery()
    ->execute(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T02:28:25.580

好的。我找到了如何做到这一点：

```
$dm->createQueryBuilder('SupplierBundle:Supplier')
    ->update()
    ->field('id')->equals('51619a758ead0e6765000004')
    ->field('works')->pull(array('$id' => new \MongoId('51619a758ead0e6765000007')))
    ->getQuery()
    ->execute(); 
```

# ruby-on-rails - Windows 环境下无法识别 postgres 'psql' 命令

> ID：15869808
> 
> 赞同：25
> 
> 时间：2013-04-08T01:13:59.207
> 
> 标签：ruby-on-rails, database, postgresql

好像我已经设置好了，我有我的 database.yml 使用 postgres，我可以用 pgadmin III 连接数据库，但是当我尝试使用 psql 命令测试什么版本时，它说是无法识别？知道我应该做什么吗？

我正在使用 Windows 并在 Ruby on Rails 中使用命令提示符。使用通过 EnterpriseDB 一键安装程序安装的 PostgreSQL 9.2。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-04-08T01:31:50.620

假设您使用 EnterpriseDB 打包的 PostgreSQL“一键式”安装程序在 Windows 上安装了 PostgreSQL，`psql`则不会自动添加到该安装程序中`PATH`。这部分是因为当人们安装了多个版本的 PostgreSQL 时，将其添加到路径中可能会导致混淆。

您需要指定完整的显式路径`psql`，例如：

```
"%PROGRAMFILES%\Postgresql\9.2\bin\psql.exe" 
```

或添加`psql`到用户`PATH`环境变量中，参见例如[本指南](http://www.computerhope.com/issues/ch000549.htm#0)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-01-27T15:09:56.140

打开命令行

```
psql --version 
```

如果上一行没有显示 psql 版本，请按照以下步骤操作

```
(For Windows 7 OS)

Mycomputer->Properties->Advanced System Settings->EnvironmentVariables->Path->Edit->
(Donot remove any existing Path) 
```

添加这个

```
;C:\Program Files\PostgreSQL\9.5\bin;C:\Program Files\PostgreSQL\9.5\lib 
```

然后保存

重新打开命令提示符并重复

```
psql --version

C:\Users\rumi>psql --version

psql (PostgreSQL) 9.5.0 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-12T00:41:36.787

这是因为你的 psql 路径和你的路径之间不应该有空格，`;`所以它应该像`*****;C:\Program Files\PostgreSQL\9.2\bin\`.

如果后面有空格`******`；那么它将无法正常工作。您实际上可以输入`%PATH%`您的 cmd 提示符并查看您的环境变量和空间的样子。我为您尝试了这两种情况，第一种带有空格的错误与您提到的相同，而第二种没有空格则有效。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-14T20:19:48.543

您需要在 PATH 环境变量中设置 bin 和 lib 路径，并用分号分隔：

%PROGRAMFILES%\Postgresql\9.2\bin;%PROGRAMFILES%\Postgresql\9.2\lib

# c# - LinkBut ton 控件生命周期，何时声明按钮？

> ID：15869809
> 
> 赞同：1
> 
> 时间：2013-04-08T01:14:04.747
> 
> 标签：c#, visual-studio-2012, .net-4.5, lifecycle

如果我在 GridView 的 ItemTemplate 中有一个 LinkBut​​ton，并且我希望该 LinkBut​​ton 触发它的事件（已放弃行事件），我应该何时声明该按钮？

```
<ItemTemplate>
<asp:LinkButton runat="server" Text="Edit" OnInit="EditLinkButton_Init" CommandName="Edit" OnCommand="EditLinkButton_Command" ID="EditLinkButton"></asp:LinkButton> 
```

下面唯一触发的事件是 EditLinkBut​​ton_Init。LinkBut​​ton 的文本更改为 ROCKON，所以我认为事件也应该触发？我仍然面临生命周期的挑战，所以如果你能提供一个简短的解释或链接，那就太好了。

下面是代码隐藏：

```
 protected void EditLinkButton_Init(object sender, EventArgs e)
    {
        LinkButton myLinkButton = new LinkButton();
        myLinkButton = (LinkButton)sender;
        myLinkButton.Text = "ROCKON";
        myLinkButton.Click += new EventHandler(EditLinkButton_Click);
        myLinkButton.CommandName = "Edit";
        myLinkButton.Command += myLinkButton_Command;
    }

    void myLinkButton_Command(object sender, CommandEventArgs e)
    {
        throw new NotImplementedException();
    }

    protected void EditLinkButton_Command(object sender, CommandEventArgs e)
    {

    }

    protected void EditLinkButton_Click(object sender, EventArgs e)
    {

    } 
```

我拼命地把我能想到的一切都扔给它......

# ios - iPad 视网膜上未加载@2x 图像

> ID：15869810
> 
> 赞同：4
> 
> 时间：2013-04-08T01:14:24.507
> 
> 标签：ios, ipad

我一直在为 iPad 编写应用程序。我使用了 2 个图像，menuBar.png 和 menuBar@2x.png，一个用于正常，另一个用于视网膜。当我在模拟器上运行时，它是完美的。但是当我在 iPad 3 上构建和运行时，它似乎没有加载视网膜图像。谁能给我一个解决方案或告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T02:22:57.173

该图像应称为：

*   iPhone 非视网膜：menuBar.png*   iPhone视网膜：menuBar@2x.png*   iPad 非视网膜：menuBar~ipad.png*   iPad视网膜：menuBar@2x~ipad.png

如果没有命名喜欢这个，它将回退到 iPhone 非视网膜图像

# javascript - async.series 和 javascript 变量

> ID：15869811
> 
> 赞同：0
> 
> 时间：2013-04-08T01:14:24.937
> 
> 标签：javascript, node.js, asynchronous, node-async

我认为我的理解存在根本性的脱节。我一直在阅读回调，并搜索了以下内容可能不起作用的原因，但我可能在错误的地方寻找。我有以下代码：

```
 users = []
  async.series [
    () ->
      userClient.smembers "users", (err, list) ->
        async.each list, (item, cb) ->
          userClient.hgetall item, (err, user) ->
            users.push user
        , (err) ->
          console.log err            
    , 
    () -> 
      console.log "test"
      console.log users
    ] 
```

console.log“测试”似乎没有打印，我已经尝试了很多不同的代码迭代，但是一旦它超出了最里面的循环（users.push 用户），我就不能检索用户的值。我最终得到一个空数组[]。任何人都有任何见解，或者可以指出我的想法哪里出错了？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T01:19:41.397

由于每个函数都是异步的，因此它无法自动知道何时进入该系列的下一步。每个系列函数都将回调作为您需要调用的参数。

```
(doneCallback) ->
  userClient.smembers "users", (err, list) ->
    async.each list, (item, cb) ->
      userClient.hgetall item, (err, user) ->
        users.push user

        // You also need to call 'cb' here.
        cb();
    , (err) ->
      console.log err

      // Add this to go to the next step after.
      doneCallback(err) 
```

同样取决于您的`users`用途，您可能希望使用[`async.map`](https://github.com/caolan/async#map)而不是[`async.each`](https://github.com/caolan/async#each)简化代码。

# php - iOS 应用安全

> ID：15869817
> 
> 赞同：1
> 
> 时间：2013-04-08T01:15:24.603
> 
> 标签：php, ios5, security

我正在制作一个允许某些用户将值插入数据库的应用程序。Atm 如果我转到 php 文件并将 ?year=235&name=ggg 添加到 URL 的末尾，它将被添加到数据库中。防止这种情况的最佳方法是什么，并且只允许将来自应用程序的信息输入数据库？还是浪费时间尝试？我真的知道人们获取 php 文件的 URL 的唯一方法是，如果他们使用了诸如 wireshark/packet tracer 之类的东西。 

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T01:23:04.453

至少，您应该使用 HTTPS。其次，明智的做法是使用某种形式的 OAuth。这样，为了访问您的页面，您需要一个用户自己不知道的特殊令牌，并且您可以将数据库访问限制为授权用户。

# java - Java - 在 for 循环中跳过值

> ID：15869821
> 
> 赞同：2
> 
> 时间：2013-04-08T01:16:14.183
> 
> 标签：java, for-loop

我正在尝试使用 for 循环跳过值。就像是

```
for(int i = 32; i <= 255 - but skip 128 to 159; i++) {

    char ascii = (char) i;
    System.out.println(ascii);

} 
```

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-08T01:18:25.377

在循环开始时使用它：

```
for(int i = 32; i < 256; i++) {
    if(i == 128) i = 160;
    //...
} 
```

这比简单地继续要好得多。您不想迭代 128 到 159；你会浪费时间的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T01:18:13.847

您可以跳过不需要的元素，如下所示：

```
for(int i = 32; i <= 255; i++) {
    if (i >= 128 && i <= 159) continue;
    char ascii = (char) i;
    System.out.println(ascii);
} 
```

或将循环一分为二，如下所示：

```
for(int i = 32; i <= 127; i++) {
    char ascii = (char) i;
    System.out.println(ascii);
}
for(int i = 160; i <= 256; i++) {
    char ascii = (char) i;
    System.out.println(ascii);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-18T22:19:32.133

只是为了完整性，这也是可能的

```
for (int i = 32; i <= 255; i = (i == 127 ? 160 : i + 1)) {
    char ascii = (char) i;
    System.out.println(ascii);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T01:18:46.370

```
for(int i = 32; i <= 255 - but skip 128 to 159; i++) {
    char ascii = (char) i;
    System.out.println(ascii);
    if(i == 127) {
        i = 160;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-08T01:47:33.523

或者像函数式语言一样将测试添加到循环中：

```
for(int i = 32; i <= 255; i++) if (i < 128 || i > 159) {
    char ascii = (char) i;
    System.out.println(ascii);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-03-02T22:44:22.590

这是一些代码：

```
public static void main(String[] args) {
    for(int i = 32; i <= 255; i++) {
        if (i < 128 || i > 159) {
            char ascii = (char) i;
            System.out.println(ascii);
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-08T01:18:46.183

您可以在循环中添加一个 if 语句。-

```
for(int i = 32; i <= 255; i++) {
    if (i < 128 || i > 159) {
        char ascii = (char) i;
        System.out.println(ascii);
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-08T01:20:22.330

我会做两个循环：

```
 int MIN = 128;
    int MAX = 159;

    for(int i = 32; i < MIN ; i++) {

    char ascii = (char) i;
    System.out.println(ascii);
}

    for(int i = MAX + 1; i < 255; i++){
     char ascii = (char) i;
    System.out.println(ascii); 
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-02-24T01:42:01.730

你可以试试这个：

```
for (int i=32; counter<=255; i++){
    if (counter>=128 && counter<=159) {
    continue;
    }
char ascii = (char) i;
System.out.println(ascii);
} 
```

# c# - 将 JSON 响应中的数据绑定到列表框

> ID：15869824
> 
> 赞同：0
> 
> 时间：2013-04-08T01:16:58.687
> 
> 标签：c#, json, data-binding

我目前正在研究一个地图功能，该功能需要我从提取的 JSON 响应中显示数据。这是我从 JSON 响应中获得的课程的一部分。我希望从 JSON 响应中提取“文本”以显示在列表框中。

```
 public class Attributes
    {
        public double length { get; set; }
        public double time { get; set; }
        public string text { get; set; } //Want to display in listbox
        public long ETA { get; set; }
        public string maneuverType { get; set; }
    }

    public class rootobject
    {
        public Attribute attributes { get; set; }
        public string compressedGeometry { get; set; }
    } 
```

我尝试在线学习，但示例中的数据都是硬编码的。我的意思是硬编码的例子：

![在此处输入图像描述](https://i.stack.imgur.com/BxKdJ.png)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T01:58:08.713

这是 WS Web 服务中的示例方法。

```
 [WebMethod]
    public rootobject GetData()
    {
        var rootObj = new rootobject()
        {
            attributes = new Attribute[2] { new Attribute() { text = "text 1" }, new Attribute() { text = "text 2" } },
            compressedGeometry = "geometry 1"
        };

        return rootObj;
    } 
```

从服务中提取数据的 JavaScript 代码

```
var webMethod = "WS.asmx/GetData";
var parameters = "";

$.ajax({
type: "POST",
url: webMethod,
data: parameters,
contentType: "application/json; charset=utf-8",
dataType: "json",
success: function (msg) {
    $("#sel").html(msg.d);
    var index = 0;
    for (; index < msg.d.attributes.length; index++)
    {
        $("#sel").append("<option>" + msg.d.attributes[index].text + "<option>");
    }
},
error: function (e) {
    alert(e);
}
}); 
```

下拉/选择的 HTML

 ****```
<select id="sel"></select> 
```****

# javascript - 如何在 Python 2.7 中将非 ascii 字符打印到文件中

> ID：15869825
> 
> 赞同：2
> 
> 时间：2013-04-08T01:16:59.970
> 
> 标签：javascript, python, character-encoding, special-characters

我试图通过更改它们的字符代码来混淆一些 javascript，但我发现我无法在 Python 2.7 中正确打印超出特定范围的字符。

例如，这就是我想要做的：

```
f = open('text.txt','w')
f.write(unichr(510).encode('utf-8'))
f.close() 
```

我不能写 unichr(510) 因为它说 ascii 编解码器超出范围。所以我用utf-8对其进行编码。这会将单个字符`u'\u01fe'`变成两个字符`'\xc7\xbe'`。

现在，在 javascript 中，很容易获得字符代码 510 的符号：

```
String.fromCharCode(510) 
```

给出单个字符：Ǿ

我用 Python 得到的是两个字符：Ç¾

如果我将这些字符传递给 javascript，我将无法检索原始的单个字符。

我知道可以在 python 中打印 Ǿ 字符，但我一直无法弄清楚。我已经使用 unichr() 而不是 chr()，并将其编码为“utf-8”，但我仍然不够用。我还读到 Python 3 在 chr() 函数中内置了这个功能。但这对我没有帮助。

有谁知道我怎样才能完成这项任务？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T01:25:49.887

您应该以二进制模式打开文件：

```
f = open('text.txt','wb') 
```

然后写入字节（在 Python 3 中）：

```
f.write(chr(510).encode('utf-8')) 
```

或者在 Python 2 中：

```
f.write(unichr(510).encode('utf-8')) 
```

最后，关闭文件

```
f.close() 
```

或者你可以像这样以更好的方式做到这一点：

```
>>> f = open('e:\\text.txt','wt',encoding="utf-8")
>>> f.write(chr(510))
>>> f.close() 
```

之后，您可以将文件读取为：

```
>>> f = open('e:\\text.txt','rb')
>>> content = f.read().decode('utf-8')
>>> content
'Ǿ' 
```

或者

```
>>> f = open('e:\\text.txt','rt',encoding='utf-8')
>>> f.read()
'Ǿ' 
```

在我的 Win7 和 Python3 上测试。它应该适用于 Python 2.X

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T01:49:22.417

这个怎么样？

```
import codecs
outfile = codecs.open(r"C:\temp\unichr.txt", mode='w', encoding="utf-8")
outfile.write(unichr(510))
outfile.close() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T01:25:41.213

Python 正在将字节写入`'\xc7\xbe'`文件：

```
In [45]: unichr(510).encode('utf-8')
Out[45]: '\xc7\xbe' 
```

JavaScript 显然正在形成 unicode `u'\xc7\xbe'`：

```
In [46]: 'Ç¾'.decode('utf-8')
Out[46]: u'\xc7\xbe'

In [47]: 'Ç¾'.decode('utf-8').encode('latin-1')
Out[47]: '\xc7\xbe' 
```

问题在于 JavaScript 如何将字节转换为 unicode，而不是 Python 如何写入字节。

# php - Wordpress 小部件不保存选项...缺少明显的东西？

> ID：15869826
> 
> 赞同：0
> 
> 时间：2013-04-08T01:17:03.190
> 
> 标签：php, wordpress, widget

新手 Wordpress 开发人员在这里，所以我真的可以使用一些帮助。我正在构建一个显示功能的小部件，但选项没有保存。当您点击“保存”时，所有框再次变为空白。我想我错过了一些明显的东西！

这是我的小部件代码的相关部分：

```
// First create the widget for the admin panel
class icon_features_widget extends WP_Widget {

  function icon_features_widget() {
    $widget_ops = array( 'description' => __( 'Displays icon features in a widget', 'icon-feature-widget' ) );
    $this->WP_Widget( 'icon_feature_widget', __( 'Icon Feature', 'icon-feature-widget' ), $widget_ops );
  }

  function form( $instance ) {

    $icon_feature_title = isset( $instance['icon_feature_title'] ) ? $instance['icon_feature_title'] : '';
    $icon_feature_text = isset( $instance['icon_feature_text'] ) ? $instance['icon_feature_text'] : '';
    $icon_feature_link_url = isset( $instance['icon_feature_link_url'] ) ? $instance['icon_feature_link_url'] : '';
    $icon_feature_link_text = isset( $instance['icon_feature_link_text'] ) ? $instance['icon_feature_link_text'] : '';
    $radioValue = isset( $instance['radioValue'] ) ? $instance['radioValue'] : '';
    $icon_feature_icon_class = isset( $instance['icon_feature_icon_class'] ) ? $instance['icon_feature_icon_class'] : '';
    $icon_feature_custom_icon_url = isset( $instance['icon_feature_custom_icon_url'] ) ? $instance['icon_feature_custom_icon_url'] : '';
    ?>

    <p>
      <label for="icon_feature_title">Title:</label><br />
      <input type="text" name="icon_feature_title" id="icon_feature_title" value="<?php echo $icon_feature_title ; ?>" />
    </p>

    <p>
      <label for="icon_feature_text">Text:</label><br />
      <textarea name="icon_feature_text" id="icon_feature_text" value="<?php echo $icon_feature_text ; ?>" rows="6" cols="21"/></textarea>
    </p>

    <p>
      <label for="icon_feature_link_url">Link URL:</label><br />
      <input type="text" name="icon_feature_link_url" id="icon_feature_link_url" value="<?php echo $icon_feature_link_url ; ?>" />
    </p>

    <p>
      <label for="icon_feature_link_text">Link Text (defaults to "Read More"):</label><br />
      <input type="text" name="icon_feature_link_text" id="icon_feature_link_text" value="<?php echo $icon_feature_link_text ; ?>" />
    </p>

    <p>Choose which icon source you'd like to use.</p>
    <p>
      <label>
        <input type="radio" id="iconRadio" name="whichToDisplay" value="icon" <?php echo ($radioValue == 'icon' || $radioValue == '') ? 'checked="checked"':''; ?>/>
        Choose from included icons
      </label><br />
      <label>
        <input type="radio" id="customIconRadio" name="whichToDisplay" value="customIcon" <?php echo ($radioValue == 'customIcon') ? 'checked="checked"':''; ?>/>
        Display custom icon
      </label><br />
      <label>
        <input type="radio" id="nothingRadio" name="whichToDisplay" value="nothing" <?php echo ($radioValue == 'nothing') ? 'checked="checked"':''; ?>/>
        Display neither
      </label><br /><br />
    </p>

    <p> <!-- REPLACE THIS WITH SOME KIND OF ICON CHOOSER DROPDOWN THING -->
      <label for="icon_feature_icon_class">Icon Class:</label><br />
      <input type="text" name="icon_feature_icon_class" id="icon_feature_icon_class" value="<?php echo $icon_feature_icon_class ; ?>" />
    </p>

    <p> <!-- REPLACE THIS WITH A WORDPRESS IMAGE CHOOSER / MEDIA LIBRARY CHOOSER -->
      <label for="icon_feature_custom_icon_url">Custom Icon URL:</label><br />
      <input type="text" name="icon_feature_custom_icon_url" id="icon_feature_custom_icon_url" value="<?php echo $icon_feature_custom_icon_url ; ?>" />
    </p>

    <?php 
  }

  function update( $new_instance, $old_instance ) {
    $instance = $old_instance;
    $instance['icon_feature_title'] = $new_instance['icon_feature_title'];
    $instance['icon_feature_text'] = $new_instance['icon_feature_text'];
    $instance['icon_feature_link_url'] = $new_instance['icon_feature_link_url'];
    $instance['icon_feature_link_text'] = $new_instance['icon_feature_link_text'];
    $instance['radioValue'] = $new_instance['radioValue'];
    $instance['icon_feature_icon_class'] = $new_instance['icon_feature_icon_class'];
    $instance['icon_feature_custom_icon_url'] = $new_instance['icon_feature_custom_icon_url'];
    return $instance;
  } 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:00:21.970

谢谢您的帮助！不过修复了我的问题，这是在表单代码中：我没有使用正确的 Wordpress 方法来处理输入元素的 id、名称和值：

我有这个：

```
<input type="text" name="icon_feature_link_text" id="icon_feature_link_text" value="<?php echo $icon_feature_link_text ; ?>" /> 
```

我把它改成这样：

```
<input type="text" name="<?php echo $this->get_field_name('icon_feature_link_text') ; ?>" id="<?php echo $this->get_field_id( 'icon_feature_link_text' ); ?>" value="<?php echo esc_attr( $icon_feature_link_text ) ; ?>" /> 
```

我对所有输入（以及标签）都这样做了，而不是在 id 和 name 中进行硬编码，现在它可以完美保存。

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T06:17:51.567

在您的函数更新中尝试使用 $instance 作为空白数组而不是 $old_instance 并检查一次类似..

```
function update( $new_instance, $old_instance ) {

        $instance = array();
.........
} 
```

# php - 如何为表单设置数据库代码

> ID：15869827
> 
> 赞同：0
> 
> 时间：2013-04-08T01:17:11.403
> 
> 标签：php, mysql, codeigniter

我有一个包含 39 个复选框的页面。我的示例中的复选框类似于表单名称。我的问题是，对于 39 个复选框，我需要一种方法来存储给学生的表格。目前我设置的是每个表格都用逗号和引号分隔，以便在运行报告时管理员可以使用 CSV 下载选项和学生收到的表格组。这可行，但非常初级，并且还会产生不好的副作用，即在每个表单名称之前都存在 / 因为 mysql 会转义引号。

这是我目前拥有的：

```
 if ($this->input->post('action') == 'additional') {
     $givenforms = "";

     foreach ($this->input->post('form') as $forms) {
      $givenforms .= ', "' . $forms . '"';
        }
        $comments = 'This student was given' . $givenforms . '';

        if (($this->input->post('action') == 'additional') && ($this->input->post('other') == 'OTHER')) {
            $comments .= ', '.$this->input->post('counselorcomments');
        }
 } 
```

再次在数据库中，结果将如下所示：这个学生被赋予了“xyz”、“eoe”、“wwo”、

几乎我只需要关于如何存储给学生的表格的想法，如果需要，如果所有 39 表格都给了学生，我需要存储给学生的所有表格以供以后报告。（即使不会给出 39 个表格）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:28:37.940

听起来您需要在学生和表格之间建立一个：多的关系。可能想对该主题进行一些研究。

我认为将逗号分隔的值存储在数据库的单个字段中通常是一种非常糟糕的形式，如果你这样做，它几乎总是表明你需要（至少）另一个表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T00:31:48.793

用 CSV 重构我所拥有的一两个小时得到了很好的回报。我对已知信息的报告/分析可能性以及我现在存储它的方式感到非常满意。

为其他想要做这样的事情的人提供几段代码！：

```
 if ($this->form_validation->run() == FALSE) { // This stuff is self explanatory RT(F)M if you will :) 
     $this->cont();
 } else {
     $this->load->model('queue_model'); // Load model

     $session = $this->uri->segment(3); // Gets the session id 
     $counselor = $this->session->userdata('username'); // I get counsellor names from the username they log in by joining between the two tables

      if ($this->input->post('action') == 'Additional') { // If additional forms is checked do the following 

      foreach ($this->input->post('form') as $form_id) { // for each form submitted take the session Id from above and insert it into the table forms with the foreach $form_id variable
          $this->queue_model->forms($session, $form_id);
      }

      if (($this->input->post('action') == 'Additional') && ($this->input->post('addother') == 'addotherinfo')) { // If forms were submitted and a addotherinfo was [checked] add comments 
          $comments = ''.$this->input->post('action'). ' - '.$this->input->post('counselorcomments').'';
      } else {
          $comments = $this->input->post('action');
      }
} 
```

还添加表单表（带有 ID 和表单名称）允许我动态地制作复选框，如下所示：

```
<?php 
        foreach ($elevennine as $form) { ?>
              <label id="form"><input type="checkbox" name="form[]" value="<?php echo $form['form_id'] ?>" <?php echo set_checkbox('form', $form['form_id']) ?>><?php echo $form['forms'] ?></label>
<?php   } 
?> 
```

感谢所有伟大的想法！

# vim - 在 vim 中设置 textwidth 而不覆盖特定的文件类型

> ID：15869839
> 
> 赞同：5
> 
> 时间：2013-04-08T01:18:26.927
> 
> 标签：vim, word-wrap

我希望 vim 中默认的 textwidth 为 80，但如果特定文件类型有自己的文本宽度（特别是 gitcommit，其中 tw=72），我希望 vim 尊重该宽度。

在我的 .vimrc 中，我有一行：

```
set tw=80 
```

我也试过

```
setlocal tw=80 
```

然而，这似乎覆盖了 72 的 gitcommit 宽度。

如果我删除该行，那么 git 提交工作正常（在 72 处换行）但文本文件（例如）不会自动换行。

如果没有指定其他内容，是否可以将 vim 换行到 80，否则请遵循特定的文件类型说明？

顺便说一句，我认为这直到最近才起作用。我尝试从我的 .virmrc 中删除所有其他内容，但设置 tw=80，但这没有任何区别。

**编辑**：如果我打开一个 git commit 消息编辑器，然后运行

`:verbose set tw?`

vim 显示：

```
 textwidth=80
        Last set from ~/.vimrc 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T06:55:24.887

Vim 已经涵盖了全局与缓冲区本地选项。正如你所描述的，你应该`:set`在你的全局默认值`~/.vimrc`，并且某些文件类型可能会覆盖全局默认值`:setlocal`。

要进行故障排除，请尝试

```
:verbose set tw? 
```

这应该告诉您最后修改选项值的位置。

### 编辑

对于`ft=gitcommit`，只有在（全局值）为空时才设置 textwidth 的特殊逻辑：

```
if &textwidth == 0
    " make sure that log messages play nice with git-log on standard terminals
    setlocal textwidth=72
    let b:undo_ftplugin .= "|setl tw<"
endif 
```

您的全局设置会阻止此设置生效。解决方案是自己无条件设置 textwidth： 在`~/.vim/after/ftplugin/gitcommit.vim`中，输入：

```
 setlocal textwidth=72
    let b:undo_ftplugin .= "|setl tw<" 
```

# apache - htaccess 没有给出正确的值

> ID：15869846
> 
> 赞同：-1
> 
> 时间：2013-04-08T01:19:04.537
> 
> 标签：apache, .htaccess, mod-rewrite

我试图让它工作，但我遇到了问题。当我去回显我得到`http://localhost/test/demo/`的值时。但是当我去的价值是为什么要这样做呢？该文件位于目录内。`p``demo``http://localhost/test/demo/moretext/``p``index.php/moretext``.htaccess``test`

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /test/

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+?)/(.+?)/$ index.php?p=$1&file=$2
RewriteRule ^(.+?)/$ index.php?p=$1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T01:30:14.213

您可以在目录中的一个 .htaccess 文件中尝试此操作`/test`：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteCond %{REQUEST_URI}  !index\.php       [NC]
RewriteCond %{REQUEST_URI}  ^/test/([^/]+)/([^/]+)/?$ [NC]
RewriteRule .*  /test/index.php?p=%1&file=%2  [L]

RewriteCond %{REQUEST_URI}  !index\.php       [NC]
RewriteCond %{REQUEST_URI}  ^/test/([^/]+)/?$ [NC]
RewriteRule .*    /test/index.php?p=%1  [L] 
```

# java - Java中的循环（初学者）

> ID：15869848
> 
> 赞同：0
> 
> 时间：2013-04-08T01:19:38.610
> 
> 标签：java, loops, if-statement, boolean

我必须在我的代码中使用一个循环，这样当有人输入是时，他们可以根据需要多次重新输入他们的名字，但我不知道该怎么做。任何帮助表示赞赏，这是我的代码：

```
public static void main(String [] args)
  {
    // Create a Scanner object to read input.
    Scanner keyboard = new Scanner(System.in);

    //Get the user's name.
    System.out.print("What is your name?");
    String name = keyboard.nextLine();
    System.out.println("Hello there," + name);

    System.out.println("Would you like to enter another name? Please enter Yes Or No.");
    String reply = keyboard.nextLine();

    if (reply == "yes")
    {

    }
  }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T01:23:30.237

这`reply == "yes"`不是您`String`在 Java 中比较 s 的方式。这比较了内存​​位置，而不是内容（内存位置不太可能相等）。

相反，您需要使用`reply.equals("yes")`，或者如果您不关心进行案例比较，则可以`reply.equalsIgnoreCase("yes")`使用

```
do {
    // The remainder of your code...
} while (reply.equalsIgnoreCase("yes")); 
```

**更新**

您可能还希望阅读[while 和 do-while 语句](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/while.html)以及[for 语句](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html)，其中涵盖了 Java 循环的基础知识

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T01:32:04.933

使用`do-while`循环：

```
public static void main(String[] args) {

        // Create a Scanner object to read input.
        Scanner keyboard = new Scanner(System.in);
        do {
            //Get the user's name.
            System.out.print("What is your name?");
            String name = keyboard.nextLine();
            System.out.println("Hello there," + name);
            System.out.println("Would you like to enter another name? Please enter Yes Or No.");

        } while (keyboard.nextLine().equalsIgnoreCase("yes"));

        System.out.println("Bye!");
        keyboard.close();
      }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T01:24:45.307

我认为这会起作用（未经测试）：

```
public static Scanner keyboard = new Scanner(System.in); // global

    public static void main(String [] args)
    {
        getName();
    }

    public static void getName()
    {
        System.out.print("What is your name?");
        String name = keyboard.nextLine();
        System.out.println("Hello there," + name);
        rerun();
    }

    public static void rerun()
    {
        System.out.println("Would you like to enter another name? Please enter \"yes\" or \"no\".");
        String reply = keyboard.nextLine();

        if (reply.equals("yes")) getName();
        else System.exit();
    }

} 
```

首先，我们调用该`getName()`方法并运行一次。然后我们调用该`rerun()`方法。此方法将测试我们是否要重新运行程序。如果用户输入“是”，那么我们重复整个过程。如果我们输入“yes”以外的任何内容，程序就会退出。

除了您的代码未完成这一事实之外，您的代码唯一真正的问题是您尝试将字符串与`==`运算符进行比较。请参阅 MadProgrammer 的回答，了解为什么这是错误的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T01:28:14.707

用这个

```
import java.util.*;
public class prob13 {
public static void main(String [] args)
  {
    // Create a Scanner object to read input.
    Scanner keyboard = new Scanner(System.in);

    //Get the user's name.
    while(true){
        System.out.print("What is your name?");
        String name = keyboard.nextLine();
        System.out.println("Hello there," + name);

        System.out.println("Would you like to enter another name? Please enter Yes Or No.");
        String reply = keyboard.nextLine();

        if(reply.equals("no"))
            break;
    }
 }
} 
```

这样做的原因是只要答案不是“否”就循环。

或者如果您希望答案始终是肯定的，您可以使用它

```
import java.util.*;
public class prob13 {
public static void main(String [] args)
  {
    // Create a Scanner object to read input.
    Scanner keyboard = new Scanner(System.in);
        String reply="yes";
    //Get the user's name.
    while(reply.equals("yes")){
        System.out.print("What is your name?");
        String name = keyboard.nextLine();
        System.out.println("Hello there," + name);

        System.out.println("Would you like to enter another name? Please enter Yes Or No.");
        reply = keyboard.nextLine();

    }
 }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T01:39:21.550

最简单（也可能是最清晰）的方法是将要重复的内容包装在 [do-while 语句中](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/while.html)：

```
public static void main(String [] args)
  {
    // Create a Scanner object to read input.
    Scanner keyboard = new Scanner(System.in);

    String reply;
    do {
        //Get the user's name.
        System.out.print("What is your name?");
        String name = keyboard.nextLine();
        System.out.println("Hello there," + name);

        System.out.println("Would you like to enter another name? Please enter Yes Or No.");
        reply = keyboard.nextLine();

    } while ("yes".equals(reply));
  }
} 
```

回复变量必须在块之前声明，因为它是在循环条件中访问的（一个变量只在它声明的块中可见，所以如果回复是在循环中声明的，那么循环条件将无法使用它）。

我更改了循环条件，因为 == 运算符通过引用比较字符串，即它将检查双方是否指向同一个字符串对象。相反，equals 方法检查字符串的内容是否相等（即它们以相同的顺序包含相同的字符）。

# intellij-idea - 带有黄瓜（java）和步骤定义位置的 IntelliJ

> ID：15869851
> 
> 赞同：11
> 
> 时间：2013-04-08T01:19:52.513
> 
> 标签：intellij-idea, cucumber

好的，所以我正在使用 IntelliJ 开发一个项目，并尝试利用它的黄瓜功能。我没有使用过 cucumber 的 java 风格，但 IntelliJ 似乎希望步骤定义文件位于特定位置，相对于功能文件。

我发现了这一点：[如何在 intelliJ 12](https://stackoverflow.com/questions/13993472/how-to-define-step-definitions-location-for-cucumber-in-intellij-12)和其他来源中定义黄瓜的步骤定义位置，这些来源指出我能够添加我的运行配置的“胶水”属性，它告诉 cuke 哪个包可以找到步骤文件。所以我现在可以通过 IDEA 运行我的测试。但是我每次运行新测试时都需要设置它，因为 Ctrl+Alt+F10 或右键单击+运行测试不会使用此标志启动测试。此外，IDE 支持被搞砸了，因为 IDEA 不知道步骤在哪里，它不会自动完成或 Ctrl+单击导航到步骤。

IDEA 项目有没有办法在运行测试和自动完成时始终在给定包中查找步骤？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-09T02:37:42.860

为可能有此问题的其他人创建自我答案。我的项目没有标记为测试源根的步骤，虽然我确实这样做了，但直到我关闭并重新打开我的项目，它们才被选中。所以一个简单的重启是我的答案。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-06T10:32:05.480

您可以通过打开“Edit Configurations -> Defaults -> Cucumber Java -> Glue”并添加包名称来全局设置粘合位置。

（智能 12.1.4）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-11-02T15:40:40.963

转到**文件->设置->插件**

安装**Cucumber for Java**插件

然后您可以管理黄瓜插件，如下所示当您单击测试时，这应该会将您重定向到步骤定义。

[![在此处输入图像描述](https://i.stack.imgur.com/AVlhD.png)](https://i.stack.imgur.com/AVlhD.png)

希望这可以帮助

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-12-08T21:43:24.473

IntelliJ 支持[Cucumber-Java](https://plugins.jetbrains.com/plugin/7212?pr=idea) / [Groovy](https://plugins.jetbrains.com/plugin/7213?pr=idea)的插件。安装此插件将启用从功能文件中提到的步骤到步骤定义的导航。

[![在此处输入图像描述](https://i.stack.imgur.com/s1NEi.png)](https://i.stack.imgur.com/s1NEi.png)

在创建步骤定义后，导航很容易

[![在此处输入图像描述](https://i.stack.imgur.com/fTrmG.png)](https://i.stack.imgur.com/fTrmG.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-22T11:37:20.617

我进入 EditConfiguration，Glue 部分，我将路径从上面的包和你的步骤类所在的包放在哪里，例如：CucumberFramework.stepsDefinitions

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-29T11:47:07.997

这真的是胡说八道:)但在我的情况下，当IDEA由于安装了一些插件而拒绝自动添加步骤定义时，例如Cucumber for Scala并建议删除它们，因为我在其他项目中需要它们，所以我无法删除它们。因此，长话短说，要添加（创建步骤定义），您需要在“胶水”目录和一些假 Cucumber 实现中创建类，再构建一次，它解决了我的问题。

```
 Background:
 When I use IDEA 2018.2
 And Java 8
 And Cucumber info.cukes:cucumber-java:1.2.4

 @When("^I created a Class and put there fake step implementation$")
 @And("^I run gradle build one more time :)$")
 @Then("^This Class will be able for me from the feature file by ALT+ENTER as usual$")
 @And("^It resolved my issue when I was not able to automatically generate step definition$") 
```

# powershell - powershell 逻辑运算符和 $Error 变量

> ID：15869854
> 
> 赞同：3
> 
> 时间：2013-04-08T01:20:15.773
> 
> 标签：powershell

最近我不得不检查我的脚本执行时是否发生了一些错误。首先，我尝试检查 $Error 是否为 $null。对我来说奇怪的是，我没有得到任何结果（既不是 True，也不是 False）。然后我写道：

```
if (($error -eq $null) -or ($error -ne $null)) {Write-Host "NULL"} 
```

输出中没有任何内容。这让我非常困惑。我发现所有 System.Collections.ArrayList 类型的变量都会发生这种情况。

也许有人知道为什么会发生这种情况的解释，因为对我来说这看起来像一个错误？

我发现它的 Powershell 版本是 3.0。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T04:16:42.610

`@mjolinor's`answer 试图解释它，但不完整。

当你这样做时`(1,2,3) -eq 1`，你会回来`1`。在这种情况下`-eq`，数组的作用是返回等于 RHS 的元素，如果没有匹配则什么都不发生。

另一方面，如果你这样做`1 -eq (1,2,3)`，你会得到`False`，因为只有当数组是 LHS 时才会发生上述情况。因此，`-eq`当涉及到数组时，运算符的行为总是与上述情况类似，这是不正确的。

现在，开始`-ne`使用。当你这样做时`(1,2,3) -ne 1`，你会得到数组`2,3`。也就是说，它返回不等于 RHS 的元素。类似于`-eq`, `1 -ne (1,2,3)`, 将返回`True`

来到你的条件 -`($error -eq $null) -or ($error -ne $null)`

当`$error`为空时，`$error -eq $null`将不返回任何内容（因此`False`在 bool 语句中）。这当然是因为 $error 中没有元素匹配`$null`。此外，`$error -ne $null`也不会返回任何内容（因此`False`在 bool 语句中），因为 $error 为空并且其中没有不是 $null 的元素。

因此，当`$error`为空时，您的语句将为 false，并且 if 中的块不会被执行。

如果`$error`不为空，则任何一个条件都会为真，并且您会看到`write-host`执行。

**那么你如何真正解决这个问题呢？**

直接的方法是检查`$error`数组的长度：

```
if($error.length -gt 0){
    write-host "error occured"
} 
```

另外，请阅读这篇讨论各种错误处理策略的文章 - [http://blogs.technet.com/b/heyscriptingguy/archive/2011/05/12/powershell-error-handling-and-why-you-should-care .aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2011/05/12/powershell-error-handling-and-why-you-should-care.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T02:22:50.133

当 -eq 运算符用于数组（或 arraylist）时，它返回满足条件的数组的所有成员。

($error -eq $null) 说“我想要 $error 数组列表的所有成员都是空值。” 它只能返回 $null 。

当您在 IF 中使用它时，结果将被转换为 [bool]。当转换为 [bool] 时，$Null 的计算结果为 $false。

($error -eq $null) 永远不可能为真。

```
$x = new-object collections.arraylist

[void]$x.Add('a') 
[void]$x.add('b')

($x -eq $null).count
[bool]($x -eq $null)

[void]$x.Add($Null)

($x -eq $null).count
[bool]($x -eq $null)

0
False
1
False 
```

# mysql - MySQL 数据库中 nvarchar 字段类型的选项

> ID：15869857
> 
> 赞同：0
> 
> 时间：2013-04-08T01:20:38.120
> 
> 标签：mysql, nvarchar

我想`Visha'l`在我的 MySQL 5.x 数据库中插入数据，但`nvarchar`接受此特殊字符所需的字段类型在 MySQL 数据字段类型中不可用。

`'`我可以在我的数据库中输入此特殊字符的任何其他字段类型？

# matlab - MATLAB 中用于定义序列向量的冒号运算符

> ID：15869861
> 
> 赞同：1
> 
> 时间：2013-04-08T01:21:53.367
> 
> 标签：matlab, sequence

我一直在 MATLAB 中使用冒号运算符通过以下方式创建向量：

```
j:i:k => [j, j + i, j + 2i, ..., j + m * i] 
```

但现在我需要创建一个这样的向量：

```
[i, 2i, 4i, 8i, 16i, ... etc] 
```

如何使用冒号运算符执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T01:26:03.747

你可以这样做：

```
(2.^[0:n]) * i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T01:27:50.770

您之前已经使用某个变量定义了一个*算术序列*`i`，即

```
n = (0:4); 
i = 2;
a = i*n; 

>> i*n

ans =

     0     2     4     6     8 
```

您现在要定义的是*几何序列*，或者

```
a = i*2.^n

>> i*2.^n

ans =

     2     4     8    16    32 
```

您也可以使用上面的方法来定义使用虚数单位的复杂`i`序列

```
a = 1i*2.^n 
```

# perl - 在 Perl 中删除分隔符之间的空格和换行符

> ID：15869863
> 
> 赞同：1
> 
> 时间：2013-04-08T01:22:30.267
> 
> 标签：perl

我是 Perl 的新手，并试图解决一个问题，但没有成功。我正在尝试从文本文件中读取数据。代码是：

```
open FH, 'D:\Learning\Test.txt' or die $!;
my @data_line;
while (<FH>)
{
@data_line = split (/\|\~/);
print @data_line;
} 
```

文件内容是这样的：

```
101|~约翰|~这条线是
破碎和显示
打印空间|~version123|~data|~|~|~
102|~Abrahim|~这是要打印的行|~version1.3|~|~|~|~
```

输出是：

```
101John 这行是    
破碎和显示
printversion123data 中的空间
102AbrahimThis is a line to be printversion1.3
```

我只想在分隔符之间的一行中显示数据，例如：

```
101John 此行已损坏并在 printversion123data 中显示空间
102AbrahimThis is a line to be printversion1.3
```

请建议我该怎么做。我也试过了`chomp(@data_line)`，但是没有用。我正在使用 Windows 操作系统。

我想在表的不同字段中插入这些“|~”分隔值。我已添加：$_ =~ s/\n//g; @data_line 之前 = 拆分 (/\|\~/); 它根据我的要求打印了详细信息，但没有在我的数据库表中正确插入数据。请建议我该怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:31:34.410

稍微改写：

```
use strict;
use warnings;
use feature qw(say);               #See note #1

use autodie;                       #See note #2

use constant FILE => 'D:/Learning/Test.txt';  #See note #3

open my $fh, "<", FILE;            #See note #4
my $desired_output;
while ( my $line = <DATA> ) {      #See note #5
    chomp $line;                   #See note #6
    $line =~ s/\|~//g;
    if ( $desired_output ) {
       if ( $line =~ /^\d+/ ) {
           $desired_output .= "\n$line";
       }
       else {
           $desired_output .= " $line";
       }
    }
    else {                         #See note #7
       $desired_output = $line;
    }
}
close $fh;                         #See note #8
say "$desired_output"; 
```

为什么不使用 split 完全删除字段分隔符，而不是使用*替换**命令*？另请注意，我将输出保存为一条连续的线。内部`if`结构比我喜欢的要复杂一些，但很容易理解。如果没有数据`$desired_output`，我只需设置`$desired_output`等于我的行。否则，我会检查是否`$line`以数字开头。如果是这样，我将追加 a `\n`，`$desired_output`然后追加`$line`。否则，我会附加一个空格，然后`$line`.

现在我的笔记。这或多或少是用现在所谓的标准 Perl 风格编写的。这包括一些好的建议（使用`strict`、`warnings`等）以及现代程序的布局方式。例如，使用下划线分隔变量名中的单词，而不是使用驼峰式大小写（`$desired_output`vs. `$desiredOutput`）。Damian Conway 的[Perl Best Practices](http://books.google.com/books/about/Perl_Best_Practices.html?id=gJf9tI2mytIC)中涵盖了很多内容。这些可能不是我想做的事情，但我这样做是因为其他人都在这样做。而且，遵循标准通常比抱怨更重要。这是关于维护和可读性。你跟着人群走。

1.  始终将这三行放在所有程序上。前两个将捕获 90% 的编程错误，并允许`use features qw(say);`您使用`say`. `print`它使您不必`\n`在最后添加 a，这可能比现在听起来更重要。相信我，你宁愿使用`say`而不是`print`尽可能。

2.  当您的程序不应该继续运行时，[使用 autodie 可以处理 Perl 中的许多情况。](http://perldoc.perl.org/autodie.html)例如，如果您无法读取文件，则最好不要继续您的程序。好处`autodie`是，当您忘记测试命令的返回值时，它会停止您的程序。

3.  当某些东西没有改变时，你应该让它成为一个[常量](http://perldoc.perl.org/constant.html)。这会将您所有*不变*的数据放在一个地方，并允许您定义神秘数字，例如`PI = 3.1416`. [不幸的是，除非您知道Perl deep dark secret](https://stackoverflow.com/a/15798642/368630)，否则无法轻松地将常量插入到输出中。

4.  打开文件时，使用 open 命令的[三参数形式](http://perldoc.perl.org/functions/open.html)，并使用标量文件句柄。与使用旧的全局句柄相比，您可以更轻松地将标量文件句柄传递给子例程。

5.  不要使用`$_`, 自动变量，除非你必须（比如 in`grep`或`map`）。它不会提高可读性或加快执行速度。而且，它有让你陷入困境的倾向。它是所有包中的全局变量，甚至可能在您不知道的情况下受到影响。

6.  `chomp`每次我读入可能在末尾有新行的数据时，我总是会这样做，即使以后可能会很方便。行尾的新行可能会导致正则表达式的各种惊愕。这可以在 while 本身内部完成：`while ( chomp ( my $line = <$fh> ) )`但这不会增加可读性或速度。

7.  注意我的缩进和我使用括号的方式。这是现在的首选标准。我花了几年的时间才忘记了在 Pascal 和 K&R 风格 C 中这样做的方式。不妨尽早以正确的方式学习它。

8.  完成后始终关闭文件句柄。这只是很好的形式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T01:56:43.407

您需要在拆分之前将“it”变量切碎。

```
while (<FH>)
{
chomp ($_);
@data_line = split (/\|\~/);
print @data_line;
} 
```

我通常使用显式变量来使其更具可读性。

```
while ( my $line= <FH> )
{
   chomp ($line);
   ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T02:01:29.253

```
open FH, 'D:\Learning\Test.txt' or die $!;
my @data_line;
while (<FH>)
{
chomp;
@data_line = split (/\|\~/);
print @data_line;
} 
```

您可以使用 chomp 删除文件中的“/n”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T05:41:15.840

这一个班轮会帮助你。但它会改变你的输入文件

```
perl -pi -e 's/\|\~//g;s/\n/ /g' test.txt 
```

# symfony - PHPStorm 6 和 Symfony 2 错误的代码完成

> ID：15869864
> 
> 赞同：3
> 
> 时间：2013-04-08T01:22:40.953
> 
> 标签：symfony, phpstorm

我在使用 Symfony 2.2 的 PHPStorm 时遇到问题

我将框架设置设置为 Symfony2。当我键入时在控制器中

```
use Request 
```

仅有的两个建议是：

```
Sensio\Bundle\FrameworkExtraBundle\Request
Sensio\Bundle\FrameworkExtraBundle\Tests\Request 
```

我怎样才能解决这个问题？

# java - 重定向到java中的另一个servlet

> ID：15869869
> 
> 赞同：0
> 
> 时间：2013-04-08T01:23:11.533
> 
> 标签：java, jsp, servlets

我无法定向到 servlet 文件中的另一个 servlet。我有一个名为 servlet 的文件`NewDreamServlet.java`，我想将它重定向到`MyDreamsServlet.java`.

这就是我目前在`NewDreamServlet.java`重定向中所拥有的。

```
request.getRequestDispatcher("/MyDreamsServlet").forward(request, response); 
```

当我调用它时，它最终会进入一个空白页面，

```
http://localhost:8080/ps10-austint/NewDreamServlet 
```

我将如何做到这一点？如果有任何误解，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T01:24:59.917

你试过了吗：`response.sendRedirect("/YourApp/MyDreamsServlet")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T01:27:33.940

请尝试`response.sendRedirect("/MyDreamsServlet")`。另外，请注意，您可能需要添加退货声明。以下帖子更详细地讨论了这一点[java.lang.IllegalStateException: Cannot (forward | sendRedirect | create session) after response has been commited](https://stackoverflow.com/questions/2123514/java-lang-illegalstateexception-cannot-forward-after-response-has-been-committe/2125045#2125045)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-15T22:11:46.423

您的问题的所有这些答案都是错误的。1\. 如果你喜欢使用 RD().forward，它在应用程序调用中更常用，你需要做的就是转到你的 web.xml 文件，并为你的第二个 servlet 的 url 部分给它你任何名字想例如。/fireServletTwo.... 现在回到你的第一个 servlet，在 getRqstDispatcher 大括号中，write("/fireServletTwo"); 这将告诉 xml 文件查找具有该名称的 servlet 映射并运行该 servlet。2\. 如果你想使用 send.Redirect(); 它接受一个 URL，主要用于将应用程序外部的控件传递到另一个域，它很简单.. 不要使用 SLASH /.... 只需将 servlet2 的名称写在 "" 内；

希望有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-21T00:03:03.437

这对我有用，但通常最好有上下文路径：

```
response.sendRedirect(request.getContextPath() + "/home.jsp");
```

# java - 发送大量 POST 请求

> ID：15869874
> 
> 赞同：5
> 
> 时间：2013-04-08T01:23:36.893
> 
> 标签：java, multithreading, performance, jakarta-ee, servlets

我的情况是，我将接收多个请求，处理来自请求的数据，然后使用 POST 将数据转发到另一台服务器。可能有数千个请求同时发送到服务器。我以前从来没有处理过这种卷，所以我不得不对如何继续进行一些（受过教育的）猜测。

我正在使用 Jave EE 应用程序服务器，并且正在使用 org.apache.client.HttpClient 作为 POST 请求转发数据。每包数据比较小（每包50-100kb）这是我目前的策略：

当一个请求进来时，我立即生成一个新线程来处理和发送数据（每个单独的请求一个线程）。我正在使用 java.util.concurrent.ThreadPoolExecutor 和 java.util.concurrent.ArrayBlockingQueue 来控制线程和排队。如果线程池中的所有线程都在使用，则传入数据排队。如果队列已满，则删除数据（我完全可以接受）。我正在关注有关使用 org.apache.client.HttpClient 进行线程化的文档，因此所有线程都共享 HttpClient 对象，并且在每个请求上只创建 HttpPost 对象。

我知道，在我自己进行基准测试之前，我不会完全了解我的实现的含义，但我想知道在走那么远之前是否有任何危险信号。为了弄清楚我的实际问题是什么：

*   我的方法中有任何危险信号吗？（我做错的任何明显的事情都可能导致严重的性能损失，因为我对此相对较新）

*   知道会有数千个数据包，给每个数据包自己的线程是不明智的吗？（但是线程数将被线程池限制）

*   将传入请求排队并在每个线程发送多个数据包而不是每个线程发送一个数据包会更聪明吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T01:52:27.963

您是否在 Web servlet 容器中运行？

一般来说，大多数开发人员对异步处理和线程的了解比构建当今最喜欢的 Web 服务器（tomcat、jetty 甚至 glassfish 都很好）的团队要少，所以对我来说，你的方法的唯一问题是你自己实现了线程。

如果您收到的请求是通过 HTTP 发生的，那么我会查看 Servlet 3.0 的异步功能，它允许在您等待 POST 响应时正确管理 HTTP 请求而不会阻塞。[在http://www.javaworld.com/javaworld/jw-02-2009/jw-02-servlet3.html](http://www.javaworld.com/javaworld/jw-02-2009/jw-02-servlet3.html)上有一篇很好的 java world 文章

如果您的请求来自 HTTP 以外的其他东西（即 JMS 或其他东西），那么队列和执行模式很好，前提是您确保使用线程安全和高性能对象（即 ConcurrentHashMap）

对于您所做的 POST，再次使用 HTTPClient 有一些有用的异步执行器 - [http://hc.apache.org/httpclient-3.x/apidocs/org/apache/commons/httpclient/MultiThreadedHttpConnectionManager.html](http://hc.apache.org/httpclient-3.x/apidocs/org/apache/commons/httpclient/MultiThreadedHttpConnectionManager.html) - 描述了如何做。

玩得开心！

# c# - 从 HTML 页面传递的字符串中删除字符

> ID：15869886
> 
> 赞同：-1
> 
> 时间：2013-04-08T01:25:32.600
> 
> 标签：c#, html, trim

我正在尝试修剪某个字符的字符串，以便将其放入 SQL 查询中。传递给我的方法的一个示例是“\n asdw_value\n”。我想要删除“\n”和空间，但我不能让“\n”消失。我的代码现在看起来像这样：

```
element = element.Replace("\\", "");
element = element.Replace("n", "");
element = element.Replace(" ", ""); 
```

并且输出是 "\nasdq_value\n" 任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T01:27:34.903

您看到的字符串值很可能是在调试器中生成的。这`\n`是一个[转义序列](http://msdn.microsoft.com/en-us/library/h21280bw.aspx)，意思是“换行符”。它是单个字符，而不是 a`\`后跟 a `n`，因此要将其从输入中删除，您将需要使用相同的转义序列，如下所示：

```
element = element.Replace("\n", "");
element = element.Replace(" ", ""); 
```

如果您只想从字符串的开头和结尾修剪这些字符，您可以这样做：

```
element = element.Trim(new char[] { '\n', ' ' }); 
```

# php - 老Mysql改成新Mysql？

> ID：15869892
> 
> 赞同：0
> 
> 时间：2013-04-08T01:26:11.017
> 
> 标签：php, mysql, web-applications, phpmyadmin

大约 18 个多月前，我正在学习一些网页设计，但后来被其他一些东西赶上了，不得不停下来一段时间。我又回到了网页设计。我当时使用 xampp，现在也使用 xampp。我找到了整个文件夹的旧 xampp zip。我提取它以为我可能会很幸运并从 mysql 中取回我的数据库。我进入 xampp\mysql\data 并复制了所有文件夹以及我想放入新 mysql 的数据库。我加载了 phpmyadmin 并且数据库在那里，但它们都是空的。

我要保存的主数据库里面有这些文件......

db.opt
pcms_categories.frm
pcms_meta.frm
pcms_posts.frm
pcms_users.frm

所以我在那里看到了表格文件，但 mysql 没有加载它们。我假设它可能是一个旧版本，它不会读取这些文件，因为它们已经过时了。我不确定。传输文件后，我停止了 mysql 并重新加载了它，所以只想提一下。

很久以前，我是否可以恢复这些数据并不重要。我正在写一个博客，不过如果能把它找回来并完成我开始的工作会很酷。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T02:58:30.590

首先，我会检查权限问题。MySQL 通常需要对其数据文件的特殊权限。检查 MySQL 是否创建了自己的用户/组。接下来，我将尝试找出您以前拥有的 MySQL 版本，创建该版本的安装，并使用它将数据文件转储到 SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T02:53:24.170

尝试将其转储到 .sql 也许？

换句话说，出口/进口。

# android - com.android.dx.util.DexException：多个 dex 文件定义

> ID：15869893
> 
> 赞同：12
> 
> 时间：2013-04-08T01:26:13.837
> 
> 标签：android, ant, dex

我使用 ant release 并收到此错误：

```
 [dx] UNEXPECTED TOP-LEVEL EXCEPTION:
   [dx] com.android.dx.util.DexException: Multiple dex files define Lcom/android/vending/billing/IMarketBillingService;
   [dx]     at com.android.dx.merge.DexMerger.readSortableTypes(DexMerger.java:580)
   [dx]     at com.android.dx.merge.DexMerger.getSortedTypes(DexMerger.java:538)
   [dx]     at com.android.dx.merge.DexMerger.mergeClassDefs(DexMerger.java:519)
   [dx]     at com.android.dx.merge.DexMerger.mergeDexBuffers(DexMerger.java:168)
   [dx]     at com.android.dx.merge.DexMerger.merge(DexMerger.java:186)
   [dx]     at com.android.dx.command.dexer.Main.mergeLibraryDexBuffers(Main.java:300)
   [dx]     at com.android.dx.command.dexer.Main.run(Main.java:232)
   [dx]     at com.android.dx.command.dexer.Main.main(Main.java:174)
   [dx]     at com.android.dx.command.Main.main(Main.java:91) 
```

我有[同样的错误](https://stackoverflow.com/questions/7853460/multiple-dex-files-error-when-compiling-with-ant-or-eclipse)，但答案对我没有帮助

我试过：

*   将android sdk重新安装到其他目​​录
*   删除 bin/gen 目录并清理项目
*   在 Eclipse 中删除和添加库
*   将 android API 从 17 更改为 10
*   [确保我的 bin 文件夹不包含在我的构建路径中](https://stackoverflow.com/questions/8059719/unable-to-execute-dex-multiple-dex-files-define/8071713#8071713)

我有 1 个主项目和 2 个 lib 项目（Facebook 和扩展文件下载器）

感谢您的回答！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T04:34:49.633

请检查包是否包含 com/android/vending/billing/IMarketBillingService 在您的项目设置中被引用两次或更多。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-26T13:03:13.637

当将两个相同的 jar 导入项目时会发生此异常。Android 尝试构建 dex 文件（这是所有 java jar 和类连接在一起的文件）它得到一个异常。

解决方案是检查您要导入项目的所有 jar 并删除重复项。在这种情况下，Lcom.android.vending.billing.IMarketBillingService 已被多次引用，如上所述。

# css - Susy：欧米茄和响应式网格

> ID：15869894
> 
> 赞同：6
> 
> 时间：2013-04-08T01:26:24.717
> 
> 标签：css, sass, compass-sass, susy-compass

使用 Susy 时，您在行的最后一项上放置一个“omega”标志以删除其`margin-right`. 例如，假设我们有一堆项目需要在 12 列的网格上布局：

```
<div class="item">...</div>
<div class="item">...</div>
<div class="item">I'm the last of the row</div>
<div class="item">...</div> 
```

和 SCSS：

```
.item{
  @include span-columns(4);
  @include nth-omega(3n);
} 
```

但我们的网格是响应式的，较小的显示器使用 8 列网格。问题是`omega`现在需要出现在`2n`，而不是`3n`：

```
<div class="item">...</div>
<div class="item">I'm the last of the row</div>
<div class="item">...</div>
<div class="item">...</div> 
```

所以我的问题是：对于 Susy，您是否需要为每个断点重新定义列，或者是否有某种方法可以一劳永逸地定义列宽并让其`omega`自然落在正确的位置？

如果没有，是否有任何其他网格系统提供该功能？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T06:57:00.697

## 用 Susy 解决您的问题

Susy 允许覆盖列数。许多 Susy mixin 允许这样做——每个接受`$context`参数的 mixin。

但是覆盖上下文的最好方法是使用`at-breakpoint`mixin：

```
// Defining the breakpoints
$mobile-to-medium: 400px;
$medium-to-large:  800px;

// Defining columns
$columns-small:    1;
$columns-medium:   8;
$columns-large:    12;

// Starting with a one-column mobile grid
$total-columns: $columns-small;

// Global styles go here

// Mobile-only styles
@include at-breakpoint($total-columns $mobile-to-medium) {
  // ...
}

// Medium-only styles go here
@include at-breakpoint($mobile-to-medium $columns-medium $medium-to-large) {

  .item{
    @include span-columns(3);
    @include nth-omega(2n); } }

// Large-only styles go here
@include at-breakpoint($medium-to-large $columns-large) {

  .item{
    @include span-columns(4);
    @include nth-omega(3n); } } 
```

Omega 假设分层响应：移动样式适用于所有宽度；中等样式适用于中等和大宽度，大样式适用于大宽度。

上面的方法不是分层的：移动样式只应用于移动宽度等。这样你就不必担心欧米茄应用到不应该去的地方。

`at-breakpoint`要使用 Omega 分层方法，只需删除调用中的第三个元素（最大宽度） 。但是你必须申请`@include remove-nth-omega()`：

```
// Defining the breakpoints
$mobile-to-medium: 400px;
$medium-to-large:  800px;

// Defining columns
$columns-small:    1;
$columns-medium:   8;
$columns-large:    12;

// Starting with a one-column mobile grid
$total-columns: $columns-small;

// Global styles go here

// Medium and large styles go here
@include at-breakpoint($mobile-to-medium $columns-medium) {

  .item{
    @include span-columns(3);
    @include nth-omega(2n); } }

// Large-only styles go here
@include at-breakpoint($medium-to-large $columns-large) {

  .item{
    @include span-columns(4);
    @include remove-nth-omega(2n);
    @include nth-omega(3n); } } 
```

## 无 omega 方法概述

有一些 SASS 网格系统不使用“omega”参数（不要与 Drupal 的 Omega 主题混淆），该参数必须应用于每行中的最后一项。相反，除了列宽之外，您还需要提供每个元素的位置（项目从哪一列开始）。

为了实现这一点，使用了另一种 CSS 定位[方法](http://www.palantir.net/blog/responsive-design-s-dirty-little-secret)，称为“隔离”。使用这种方法的第一个框架是[Zen Grids](http://zengrids.com/)。

`isolate`Susy 也通过它的和`isolate-grid` [mixins](http://susy.oddbird.net/guides/reference/#ref-isolate)支持这种方法。

如果不提及最新和最先进的 SASS 网格框架[Singularity](https://github.com/Team-Sass/Singularity/wiki) ，本概述将是不完整的。它支持两种定位方法，并且可以扩展以在未来支持更多（例如最近[添加](https://github.com/chriseppstein/compass/issues/921)到 Compass中的[flexbox ）。](http://www.w3.org/TR/css3-flexbox/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T01:47:47.223

在您的情况下，您将不得不重新定义新断点中的总列数（上下文）。至于`nth-omega`，您可以`@include remove-nth-omega(3n)`在显式调用第二个调用之前否定第一个调用，但我认为 CSS 代码有异味（必须中和属性），因此我建议使用媒体查询拆分来避免这种情况。

另外，我不知道有任何框架可以自动为您做到这一点。

# .htaccess - 将域下的所有请求重定向到建设中的文件夹

> ID：15869895
> 
> 赞同：3
> 
> 时间：2013-04-08T01:26:29.640
> 
> 标签：.htaccess

我一直在尝试使用以下内容将域下的所有请求重定向到正在建设的文件夹：

```
 RewriteEngine On
 RewriteCond %{REQUEST_URI} !=/underconstruction/
 RewriteRule ^ /underconstruction/ [R=301] 
```

但这似乎不起作用。

我试过这个（它有效）：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !=/underconstruction/underconstruction.html
RewriteRule ^ /underconstruction/underconstruction.html [R=301] 
```

但我没有看到它附带的图像和 CSS。

有谁有想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T01:53:09.450

也许一种解决方案是从规则中排除所有图像和 CSS 文件，如下所示：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
# Add or remove file types in the next line if necessary.
RewriteCond %{REQUEST_URI} !\.(css|jpg|png|gif|bmp|js)  [NC]
RewriteCond %{REQUEST_URI} !underconstruction\.html  [NC]
RewriteRule .*   /underconstruction/underconstruction.html [R=302,L] 
```

其他选项是将这些文件的链接中的相对路径替换为绝对路径，或者使用本[答案中描述的 BASE 元素](https://stackoverflow.com/questions/15446835/htaccess-to-redirect-images/15447517#15447517)

# javascript - 用于名称和值的表单中的 Javascript foreach 输入

> ID：15869897
> 
> 赞同：2
> 
> 时间：2013-04-08T01:26:39.430
> 
> 标签：javascript, html, forms, foreach

我只是在练习一些 javascript，而且我曾经经常使用 JQuery！我没有使用原始 javascript 的主要经验，我想像学习 JQuery 一样学习它。我有一个简单的表单和一个 javascript 函数可以在提交时使用，我想用我的函数获取表单中每个输入的名称和值，但它似乎不起作用有人可以帮我吗？

```
<!DOCTYPE html>
<html>
<head>
    <title>Foreach Practice</title>
    <script type="text/javascript">
        function Get() {
            var Form = document.getElementById('Form');
            for(I = 0; I < Form.length; I++) {
                var Value = this.attribute('name').value;
                alert(Value);
            }
        }
    </script>
</head>
<body>
<form id="Form" onsubmit="return false;">
    <input type="text" name="User" placeholder="Username" />
    <input type="password" name="User" placeholder="Password" />
    <input type="submit" name="Submit" onclick="javascript:Get();" />
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T01:50:48.860

这个问题可能更适合代码审查，但无论如何。

```
> function Get() { 
```

按照惯例，以大写字母开头的变量名是为构造函数保留的。此外，名称应该表明函数的作用，通用的“get”函数并没有给出太多提示。更好的名称可能是*getFormValues*。

```
>     var Form = document.getElementById('Form'); 
```

有一个可用的*document.forms*集合可用作调用方法的替代方法：

```
 var form = document.forms('Form');

>     for(I = 0; I < Form.length; I++) { 
```

您应该始终在适当的范围内声明变量（注意 ECMAScript 只有全局、函数和 eval 范围，没有块范围），尤其是计数器。此外，表单的*长度*属性是表单中控件的数量。由于它是实时集合，因此每次不需要时获取长度可能会影响性能，因此请缓存该值：

```
 for (var i = 0, iLen = form.length; i < iLen; i++) {

>         var Value = this.attribute('name').value; 
```

*this*的值由您调用函数的方式设置。如果函数由处理程序调用，则根据浏览器和方法附件，*这*将引用其侦听器调用该函数的元素。在这种情况下，由于该函数由内联侦听器调用，因此尚未设置 this，因此将默认为全局对象*。*

如果您这样做，您可以轻松地从侦听器传递对元素的引用：

```
<input ... onclick="getFormValues(this);" ... > 
```

现在您的函数将接收对元素的引用，并且可以方便地获取对表单的引用并遍历控件。最后，很少需要访问表单控件的属性值，您几乎总是希望访问属性。所以这是重写的函数：

```
function getFormValues(element) {
    var form = element.form;
    var controls = form.controls;

    for (var i=0, iLen=controls.length; i<iLen; i++) {
        alert(controls[i].name + ': ' + controls[i].value);
    }
    // Prevent form submission
    return false;
} 
```

最后，最好从表单而不是提交按钮调用侦听器，因为可以通过单击提交按钮以外的方式提交表单。哦，不要调用任何表单控件“提交”或使用任何与表单方法相同的名称，因为它会覆盖同名方法。由于大写，您在这里侥幸逃脱，但这并不是什么防御措施。

相关的 HTML 可以是（请注意，表单现在不需要名称或 id）：

```
<form onsubmit="return getFormValues();">
    <input type="text" name="userName" placeholder="Username">
    <input type="password" name="userPassword" placeholder="Password">
    <input type="submit" name="submitButton">
</form> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T01:37:05.523

您应该迭代表单的[子](https://developer.mozilla.org/en-US/docs/DOM/Element.children)项并使用[getAttribute](https://developer.mozilla.org/en-US/docs/DOM/element.getAttribute)函数来获取属性值。

试试这个：

```
function Get() {
    var Form = document.getElementById('Form');         
    var childs = Form.children;         
    for(I = 0; I < childs.length; I++) {                    
        var Value = childs[I].getAttribute('name');                             
        alert(Value);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T01:39:40.553

任何寻找这个答案的人我都认为它只是通过随机尝试重新排列我的代码，但就是这样。

```
<!DOCTYPE html>
<html>
<head>
    <title>Foreach Tutorial</title>
    <script type="text/javascript">
        function Get() {
            var Form = document.getElementById('Form');
            for(I = 0; I < Form.length; I++) {
                var Name = Form[I].getAttribute('name');
                var Value = Form[I].value;
                alert(Name + ' : ' + Value);
            }
        }
    </script>
</head>
<body>
<form id="Form" onsubmit="return false;">
    <input type="text" name="User" placeholder="Username" />
    <input type="password" name="Pass" placeholder="Password" />
    <input type="submit" name="Submit" onclick="Get();" />
</form>
</body>
</html> 
```

# jquery - jQuery AJAX 使用当前页面数据提前触发

> ID：15869900
> 
> 赞同：1
> 
> 时间：2013-04-08T01:27:11.550
> 
> 标签：jquery, ajax

我一直在阅读 jQuery 的延迟方法，并试图在 AJAX 调用上实现它们。

我正在尝试的是侦听对元素 ( `.slideLink`) 的单击，获取相应 href 值的内容，然后根据结果记录结果或记录错误。

问题是，一旦页面加载，*当前页面的内容就会被记录下来。*点击`.slideLink`什么都不做。

这是我到目前为止所拥有的：

```
function getDetails(val){
    return jQ.get(val);
};

// click handler
jQ('#slides').on('click', '.slideLink', function(e){
    e.preventDefault();
    var addy = jQ(this).attr("href");
    getDetails(addy);
});

jQ.when( getDetails() )
    .done(function(results) {
        console.log(results);
    })
    .fail(function() {
        console.log( 'It doesn\'t work... :(' );
    }); 
```

显然我误解了一个基本原则，但我正在通过谷歌绘制空白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T01:37:34.163

一旦页面加载，您就会触发 getDetails() 。此外，每次执行 getDetails() 时都会触发一个单独的请求并返回一个新的 deferred。试试这个：

```
function getDetails(val){
    return jQ.get(val);
}

// click handler
jQ('#slides').on('click', '.slideLink', function(e){
    e.preventDefault();
    var addy = jQ(this).attr("href");
    getDetails(addy).done(function(results) {
        console.log(results);
    })
    .fail(function() {
        console.log( 'It doesn\'t work... :(' );
    });;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T01:42:12.717

看起来[（从我在文档中读到的内容）](http://api.jquery.com/jQuery.when/)将从`jQ.when( getDetails() )`页面加载时立即运行您的功能。

使用和回调属性可能`ajax()`会更好。`get()``done``fail`

```
function getDetails( val ) {
    $.ajax({
        type: "GET",
        url: val,
        data: (yourdata),
        success : function(){},
        error : function(){}
    })
} 
```

此外，您可以根据需要直接调用该`click()`方法`.slideLink`。

```
jQ('.slideLink').click(function(e) {
    e.preventDefault();
    var addy = jQ(this).attr("href");
    getDetails(addy);
}); 
```

# c++ - 我的编译器会重新排序这个表达式吗？

> ID：15869902
> 
> 赞同：0
> 
> 时间：2013-04-08T01:27:22.987
> 
> 标签：c++

如果我写：

```
if(somePtr != NULL && somePtr->someFun() == SUCCESS )
{
    /**/
} 
```

会保证`somePtr != NULL`之前会被检查`somePtr->someFun() == SUCCESS`吗？

我的编译器是否有可能重新排序这两个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T01:28:42.843

> 我的编译器是否有可能重新排序这两个？

没有。保证`&&`只有当第一个表达式是时才计算第二个表达式`true`（顺便说一下，它还在整个表达式中引入了一个序列点）。

> && 运算符从左到右分组。操作数都根据上下文转换为 bool 类型（第 4 条）。如果两个操作数都为真，则结果为真，否则为假。**与 不同`&`，`&&`保证从左到右的评估：如果第一个操作数为假，则不评估第二个操作数。**
> 
> 结果是一个布尔值。如果计算第二个表达式，则与第一个表达式关联的每个值计算和副作用在与第二个表达式关联的每个值计算和副作用之前排序。

（C++11，[expr.log.and]；强调添加）

# jquery - 带有从 Rails 中提取的图像的 jQuery 幻灯片不起作用

> ID：15869907
> 
> 赞同：0
> 
> 时间：2013-04-08T01:27:49.790
> 
> 标签：jquery, html, ruby-on-rails-3, slideshow

我正在尝试在 Rails 3.2 中实现幻灯片，但没有运气。我尝试按照本教程[http://www.designchemical.com/lab/jquery/demo/jquery_demo_image_swap_gallery.htm](http://www.designchemical.com/lab/jquery/demo/jquery_demo_image_swap_gallery.htm/ "教程")进行操作，但是由于我是 Rails 和 jQuery 的新手，我完全不知道如何应用命令来调用图像数据库。

因此，如果你们能帮我解决这个问题，我真的很感激。

到目前为止，所有图像（顶部的一个主图像和 4 个小图像（主要的一个 + 3 个其他））都从数据库中调用并正确显示在网页上，但我想对其应用幻灯片来制作它看起来更好。通过将鼠标悬停在下面的较小图像上，它们应显示为顶部的主图片。

这就是我的代码：

**应用程序/views/homes/show.html.erb**

```
<div class="homepics"> 
    <div class="homemainpic">
    <%= image_tag "/"+@home.images[0].image_path, :size => "925x600" %>
    </div>
    <ul>
    <% @home.images.each {|image| %>
    <li><%= image_tag "/"+image.image_path, :size => "220x150" %></li>
    <% } %>
    </ul>
</div> 
```

**应用程序/资产/javascripts**

```
$(document).ready(function() {

    $(".homemainpic li image_tag").hover(function() {
        $('image_tag').attr('src', $(this).attr('src').replace('image_tag "/"+image.image_path'));
    });

    var imgSwap = [];
        $(".homemainpic li image_tag").each(function() {
            imgURL = this.src.replace('image_tag "/"+image.image_path');
            imgSwap.push(imgURL);
    });

    $(imgSwap).preload();
});

    $.fn.preload = function() {
        this.each(function() {
            $('image_tag "/"+@home.images[0].image_path') [0].src = this;
        });
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:41:15.563

试试这个：

```
$(".homepics ul img").on('mouseover', function () {
    $('.homemainpic img').attr('src', $(this).attr('src'));
}); 
```

[小提琴](http://jsfiddle.net/ethagnawl/fwFym/)

# c - C 编程总线错误/Seg 故障

> ID：15869913
> 
> 赞同：2
> 
> 时间：2013-04-08T01:28:18.977
> 
> 标签：c, segmentation-fault, bus

我试图制作一个在 bmp 文件上放置过滤器的程序。我在 mac gcc 上运行它并得到一个总线错误，我在 linux 机器上得到以下信息：

> 104:8：警告：变量“new_file”已设置但未使用 [-Wunused-but-set-variable]
> 159:56：警告：“像素”可能未在此函数中使用 [-Wuninitialized]
> 185:10：警告： 'bmpOut' 可能在此函数中使用未初始化 [-Wuninitialized]

当我运行它时，我得到一个设置错误核心转储。

大家觉得这有什么不妥吗？我认为这与指针有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T02:30:19.943

> 104:8：警告：变量 'new_file' 已设置但未使用 [-Wunused-but-set-variable]

这告诉您该变量`new_file`对您的逻辑没有任何影响。它不必要地使您的代码复杂化；您可能应该删除它。但是，这不会导致您的段错误。后两种可能性更大：

> 159:56：警告：“像素”可能未在此函数中使用 [-Wuninitialized]

这是一个更严重的问题。在`pixel[holdr*Height+holdc]`. 在你使用之前`pixel[...]`，你需要确保它指向某个东西！我建议类似的东西`pixel = malloc(count * sizeof *pixel);`。

> 185:10：警告：“bmpOut”可能未在此函数中使用 [-Wuninitialized]

再说一次，这很严重！我认为您希望在写入该文件之前使 tmpOut 指向该文件。我建议类似于`tmpOut = fopen("/path/to/filename", "wb");`or的东西`tmpOut = stdout;`。

你考虑过使用 valgrind 吗？

# python - 随机森林 - 使用更少的估计器进行预测

> ID：15869919
> 
> 赞同：0
> 
> 时间：2013-04-08T01:28:46.163
> 
> 标签：python, limit, scikit-learn, prediction, random-forest

我已经使用 scikit learn (python) 训练了一个随机森林（在这种情况下为回归器）模型，我想根据使用的估计器的数量在验证集上绘制错误率。换句话说，有一种方法可以仅使用 RandomForestRegressor 中的一部分估算器进行预测吗？

使用 predict(X) 将为您提供基于每棵树结果的平均值的预测。有没有办法限制树木的使用？或者最终，获得森林中每棵树的每一个输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T23:54:25.823

多亏了 cohoz，我才知道该怎么做。我写了几个 def，结果证明在测试集上绘制随机森林回归器的学习曲线时很方便。

```
## Error metric
import numpy as np
def rmse(train,test):
    return np.sqrt(np.mean(pow(test - train+,2)))

## Print test set error
## Input the RandomForestRegressor, test set feature and test set known values
def rfErrCurve(rf_model,test_X,test_y):
    p = []
    for i,tree in enumerate(rf_model.estimators_):
                p.insert(i,tree.predict(test_X))
                print rmse(np.mean(p,axis=0),test_y) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T02:44:05.140

训练后，您可以通过随机森林对象的“estimators_”属性访问这些。

# java - 在没有外部 SD 卡的情况下缓存位图

> ID：15869920
> 
> 赞同：3
> 
> 时间：2013-04-08T01:29:00.147
> 
> 标签：java, android, caching, nullpointerexception, runtimeexception

图像不会缓存在内部存储中，并且会在没有外部 SD 卡的设备上崩溃。我已经尝试了我所知道的，但没有任何效果。这是 ImageCache.java

```
 package com.minecraftpix.android.bitmapfun.util;

  import com.minecraftpix.BuildConfig;

import android.annotation.TargetApi;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Bitmap.CompressFormat;
import android.graphics.BitmapFactory;
import android.graphics.drawable.BitmapDrawable;
import android.os.Bundle;
import android.os.Environment;
import android.os.StatFs;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.util.LruCache;
import android.util.Log;

import java.io.File;
import java.io.FileDescriptor;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.lang.ref.SoftReference;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import java.util.HashSet;
import java.util.Iterator;

public class ImageCache {
private static final String TAG = "ImageCache";

// Default memory cache size in kilobytes
private static final int DEFAULT_MEM_CACHE_SIZE = 1024 * 5; // 5MB

// Default disk cache size in bytes
private static final int DEFAULT_DISK_CACHE_SIZE = 1024 * 1024 * 10; // 10MB

// Compression settings when writing images to disk cache
private static final CompressFormat DEFAULT_COMPRESS_FORMAT = CompressFormat.JPEG;
private static final int DEFAULT_COMPRESS_QUALITY = 70;
private static final int DISK_CACHE_INDEX = 0;

// Constants to easily toggle various caches
private static final boolean DEFAULT_MEM_CACHE_ENABLED = true;
private static final boolean DEFAULT_DISK_CACHE_ENABLED = true;
private static final boolean DEFAULT_INIT_DISK_CACHE_ON_CREATE = false;

private DiskLruCache mDiskLruCache;
private LruCache<String, BitmapDrawable> mMemoryCache;
private ImageCacheParams mCacheParams;
private final Object mDiskCacheLock = new Object();
private boolean mDiskCacheStarting = true;

private HashSet<SoftReference<Bitmap>> mReusableBitmaps;

/**
 * Create a new ImageCache object using the specified parameters. This should not be
 * called directly by other classes, instead use
 * {@link ImageCache#getInstance(FragmentManager, ImageCacheParams)} to fetch an ImageCache
 * instance.
 *
 * @param cacheParams The cache parameters to use to initialize the cache
 */
private ImageCache(ImageCacheParams cacheParams) {
    init(cacheParams);
}

/**
 * Return an {@link ImageCache} instance. A {@link RetainFragment} is used to retain the
 * ImageCache object across configuration changes such as a change in device orientation.
 *
 * @param fragmentManager The fragment manager to use when dealing with the retained fragment.
 * @param cacheParams The cache parameters to use if the ImageCache needs instantiation.
 * @return An existing retained ImageCache object or a new one if one did not exist
 */
public static ImageCache getInstance(
        FragmentManager fragmentManager, ImageCacheParams cacheParams) {

    // Search for, or create an instance of the non-UI RetainFragment
    final RetainFragment mRetainFragment = findOrCreateRetainFragment(fragmentManager);

    // See if we already have an ImageCache stored in RetainFragment
    ImageCache imageCache = (ImageCache) mRetainFragment.getObject();

    // No existing ImageCache, create one and store it in RetainFragment
    if (imageCache == null) {
        imageCache = new ImageCache(cacheParams);
        mRetainFragment.setObject(imageCache);
    }

    return imageCache;
}

/**
 * Initialize the cache, providing all parameters.
 *
 * @param cacheParams The cache parameters to initialize the cache
 */
private void init(ImageCacheParams cacheParams) {
    mCacheParams = cacheParams;

    // Set up memory cache
    if (mCacheParams.memoryCacheEnabled) {
        if (BuildConfig.DEBUG) {
            Log.d(TAG, "Memory cache created (size = " + mCacheParams.memCacheSize + ")");
        }

        // If we're running on Honeycomb or newer, then
        if (Utils.hasHoneycomb()) {
            mReusableBitmaps = new HashSet<SoftReference<Bitmap>>();
        }

        mMemoryCache = new LruCache<String, BitmapDrawable>(mCacheParams.memCacheSize) {

            /**
             * Notify the removed entry that is no longer being cached
             */
            @Override
            protected void entryRemoved(boolean evicted, String key,
                    BitmapDrawable oldValue, BitmapDrawable newValue) {
                if (RecyclingBitmapDrawable.class.isInstance(oldValue)) {
                    // The removed entry is a recycling drawable, so notify it 
                    // that it has been removed from the memory cache
                    ((RecyclingBitmapDrawable) oldValue).setIsCached(false);
                } else {
                    // The removed entry is a standard BitmapDrawable

                    if (Utils.hasHoneycomb()) {
                        // We're running on Honeycomb or later, so add the bitmap
                        // to a SoftRefrence set for possible use with inBitmap later
                        mReusableBitmaps.add(new SoftReference<Bitmap>(oldValue.getBitmap()));
                    }
                }
            }

            /**
             * Measure item size in kilobytes rather than units which is more practical
             * for a bitmap cache
             */
            @Override
            protected int sizeOf(String key, BitmapDrawable value) {
                final int bitmapSize = getBitmapSize(value) / 1024;
                return bitmapSize == 0 ? 1 : bitmapSize;
            }
        };
    }

    // By default the disk cache is not initialized here as it should be initialized
    // on a separate thread due to disk access.
    if (cacheParams.initDiskCacheOnCreate) {
        // Set up disk cache
        initDiskCache();
    }
}

/**
 * Initializes the disk cache.  Note that this includes disk access so this should not be
 * executed on the main/UI thread. By default an ImageCache does not initialize the disk
 * cache when it is created, instead you should call initDiskCache() to initialize it on a
 * background thread.
 */
public void initDiskCache() {
    // Set up disk cache
    synchronized (mDiskCacheLock) {
        if (mDiskLruCache == null || mDiskLruCache.isClosed()) {
            File diskCacheDir = mCacheParams.diskCacheDir;
            if (mCacheParams.diskCacheEnabled && diskCacheDir != null) {
                if (!diskCacheDir.exists()) {
                    diskCacheDir.mkdirs();
                }
                if (getUsableSpace(diskCacheDir) > mCacheParams.diskCacheSize) {
                    try {
                        mDiskLruCache = DiskLruCache.open(
                                diskCacheDir, 1, 1, mCacheParams.diskCacheSize);
                        if (BuildConfig.DEBUG) {
                            Log.d(TAG, "Disk cache initialized");
                        }
                    } catch (final IOException e) {
                        mCacheParams.diskCacheDir = null;
                        Log.e(TAG, "initDiskCache - " + e);
                    }
                }
            }
        }
        mDiskCacheStarting = false;
        mDiskCacheLock.notifyAll();
    }
}

/**
 * Adds a bitmap to both memory and disk cache.
 * @param data Unique identifier for the bitmap to store
 * @param value The bitmap drawable to store
 */
public void addBitmapToCache(String data, BitmapDrawable value) {
    if (data == null || value == null) {
        return;
    }

    // Add to memory cache
    if (mMemoryCache != null) {
        if (RecyclingBitmapDrawable.class.isInstance(value)) {
            // The removed entry is a recycling drawable, so notify it 
            // that it has been added into the memory cache
            ((RecyclingBitmapDrawable) value).setIsCached(true);
        }
        mMemoryCache.put(data, value);
    }

    synchronized (mDiskCacheLock) {
        // Add to disk cache
        if (mDiskLruCache != null) {
            final String key = hashKeyForDisk(data);
            OutputStream out = null;
            try {
                DiskLruCache.Snapshot snapshot = mDiskLruCache.get(key);
                if (snapshot == null) {
                    final DiskLruCache.Editor editor = mDiskLruCache.edit(key);
                    if (editor != null) {
                        out = editor.newOutputStream(DISK_CACHE_INDEX);
                        value.getBitmap().compress(
                                mCacheParams.compressFormat, mCacheParams.compressQuality, out);
                        editor.commit();
                        out.close();
                    }
                } else {
                    snapshot.getInputStream(DISK_CACHE_INDEX).close();
                }
            } catch (final IOException e) {
                Log.e(TAG, "addBitmapToCache - " + e);
            } catch (Exception e) {
                Log.e(TAG, "addBitmapToCache - " + e);
            } finally {
                try {
                    if (out != null) {
                        out.close();
                    }
                } catch (IOException e) {}
            }
        }
    }
}

/**
 * Get from memory cache.
 *
 * @param data Unique identifier for which item to get
 * @return The bitmap drawable if found in cache, null otherwise
 */
public BitmapDrawable getBitmapFromMemCache(String data) {
    BitmapDrawable memValue = null;

    if (mMemoryCache != null) {
        memValue = mMemoryCache.get(data);
    }

    if (BuildConfig.DEBUG && memValue != null) {
        Log.d(TAG, "Memory cache hit");
    }

    return memValue;
}

/**
 * Get from disk cache.
 *
 * @param data Unique identifier for which item to get
 * @return The bitmap if found in cache, null otherwise
 */
public Bitmap getBitmapFromDiskCache(String data) {
    final String key = hashKeyForDisk(data);
    Bitmap bitmap = null;

    synchronized (mDiskCacheLock) {
        while (mDiskCacheStarting) {
            try {
                mDiskCacheLock.wait();
            } catch (InterruptedException e) {}
        }
        if (mDiskLruCache != null) {
            InputStream inputStream = null;
            try {
                final DiskLruCache.Snapshot snapshot = mDiskLruCache.get(key);
                if (snapshot != null) {
                    if (BuildConfig.DEBUG) {
                        Log.d(TAG, "Disk cache hit");
                    }
                    inputStream = snapshot.getInputStream(DISK_CACHE_INDEX);
                    if (inputStream != null) {
                        FileDescriptor fd = ((FileInputStream) inputStream).getFD();

                        // Decode bitmap, but we don't want to sample so give
                        // MAX_VALUE as the target dimensions
                        bitmap = ImageResizer.decodeSampledBitmapFromDescriptor(
                                fd, Integer.MAX_VALUE, Integer.MAX_VALUE, this);
                    }
                }
            } catch (final IOException e) {
                Log.e(TAG, "getBitmapFromDiskCache - " + e);
            } finally {
                try {
                    if (inputStream != null) {
                        inputStream.close();
                    }
                } catch (IOException e) {}
            }
        }
        return bitmap;
    }
}

/**
 * @param options - BitmapFactory.Options with out* options populated
 * @return Bitmap that case be used for inBitmap
 */
protected Bitmap getBitmapFromReusableSet(BitmapFactory.Options options) {
    Bitmap bitmap = null;

    if (mReusableBitmaps != null && !mReusableBitmaps.isEmpty()) {
        final Iterator<SoftReference<Bitmap>> iterator = mReusableBitmaps.iterator();
        Bitmap item;

        while (iterator.hasNext()) {
            item = iterator.next().get();

            if (null != item && item.isMutable()) {
                // Check to see it the item can be used for inBitmap
                if (canUseForInBitmap(item, options)) {
                    bitmap = item;

                    // Remove from reusable set so it can't be used again
                    iterator.remove();
                    break;
                }
            } else {
                // Remove from the set if the reference has been cleared.
                iterator.remove();
            }
        }
    }

    return bitmap;
}

/**
 * Clears both the memory and disk cache associated with this ImageCache object. Note that
 * this includes disk access so this should not be executed on the main/UI thread.
 */
public void clearCache() {
    if (mMemoryCache != null) {
        mMemoryCache.evictAll();
        if (BuildConfig.DEBUG) {
            Log.d(TAG, "Memory cache cleared");
        }
    }

    synchronized (mDiskCacheLock) {
        mDiskCacheStarting = true;
        if (mDiskLruCache != null && !mDiskLruCache.isClosed()) {
            try {
                mDiskLruCache.delete();
                if (BuildConfig.DEBUG) {
                    Log.d(TAG, "Disk cache cleared");
                }
            } catch (IOException e) {
                Log.e(TAG, "clearCache - " + e);
            }
            mDiskLruCache = null;
            initDiskCache();
        }
    }
}

/**
 * Flushes the disk cache associated with this ImageCache object. Note that this includes
 * disk access so this should not be executed on the main/UI thread.
 */
public void flush() {
    synchronized (mDiskCacheLock) {
        if (mDiskLruCache != null) {
            try {
                mDiskLruCache.flush();
                if (BuildConfig.DEBUG) {
                    Log.d(TAG, "Disk cache flushed");
                }
            } catch (IOException e) {
                Log.e(TAG, "flush - " + e);
            }
        }
    }
}

/**
 * Closes the disk cache associated with this ImageCache object. Note that this includes
 * disk access so this should not be executed on the main/UI thread.
 */
public void close() {
    synchronized (mDiskCacheLock) {
        if (mDiskLruCache != null) {
            try {
                if (!mDiskLruCache.isClosed()) {
                    mDiskLruCache.close();
                    mDiskLruCache = null;
                    if (BuildConfig.DEBUG) {
                        Log.d(TAG, "Disk cache closed");
                    }
                }
            } catch (IOException e) {
                Log.e(TAG, "close - " + e);
            }
        }
    }
}

/**
 * A holder class that contains cache parameters.
 */
public static class ImageCacheParams {
    public int memCacheSize = DEFAULT_MEM_CACHE_SIZE;
    public int diskCacheSize = DEFAULT_DISK_CACHE_SIZE;
    public File diskCacheDir;
    public CompressFormat compressFormat = DEFAULT_COMPRESS_FORMAT;
    public int compressQuality = DEFAULT_COMPRESS_QUALITY;
    public boolean memoryCacheEnabled = DEFAULT_MEM_CACHE_ENABLED;
    public boolean diskCacheEnabled = DEFAULT_DISK_CACHE_ENABLED;
    public boolean initDiskCacheOnCreate = DEFAULT_INIT_DISK_CACHE_ON_CREATE;

    /**
     * Create a set of image cache parameters that can be provided to
     * {@link ImageCache#getInstance(FragmentManager, ImageCacheParams)} or
     * {@link ImageWorker#addImageCache(FragmentManager, ImageCacheParams)}.
     * @param context A context to use.
     * @param diskCacheDirectoryName A unique subdirectory name that will be appended to the
     *                               application cache directory. Usually "cache" or "images"
     *                               is sufficient.
     */
    public ImageCacheParams(Context context, String diskCacheDirectoryName) {
        diskCacheDir = getDiskCacheDir(context, diskCacheDirectoryName);
    }

    /**
     * Sets the memory cache size based on a percentage of the max available VM memory.
     * Eg. setting percent to 0.2 would set the memory cache to one fifth of the available
     * memory. Throws {@link IllegalArgumentException} if percent is < 0.05 or > .8.
     * memCacheSize is stored in kilobytes instead of bytes as this will eventually be passed
     * to construct a LruCache which takes an int in its constructor.
     *
     * This value should be chosen carefully based on a number of factors
     * Refer to the corresponding Android Training class for more discussion:
     * http://developer.android.com/training/displaying-bitmaps/
     *
     * @param percent Percent of available app memory to use to size memory cache
     */
    public void setMemCacheSizePercent(float percent) {
        if (percent < 0.05f || percent > 0.8f) {
            throw new IllegalArgumentException("setMemCacheSizePercent - percent must be "
                    + "between 0.05 and 0.8 (inclusive)");
        }
        memCacheSize = Math.round(percent * Runtime.getRuntime().maxMemory() / 1024);
    }
}

/**
 * @param candidate - Bitmap to check
 * @param targetOptions - Options that have the out* value populated
 * @return true if <code>candidate</code> can be used for inBitmap re-use with
 *      <code>targetOptions</code>
 */
private static boolean canUseForInBitmap(
        Bitmap candidate, BitmapFactory.Options targetOptions) {
    int width = targetOptions.outWidth / targetOptions.inSampleSize;
    int height = targetOptions.outHeight / targetOptions.inSampleSize;

    return candidate.getWidth() == width && candidate.getHeight() == height;
}

/**
 * Get a usable cache directory (external if available, internal otherwise).
 *
 * @param context The context to use
 * @param uniqueName A unique directory name to append to the cache dir
 * @return The cache dir
 */
public static File getDiskCacheDir(Context context, String uniqueName) {
    // Check if media is mounted or storage is built-in, if so, try and use external cache dir
    // otherwise use internal cache dir
    final String cachePath =
            Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState()) ||
                    !isExternalStorageRemovable() ? getExternalCacheDir(context).getPath() :
                            context.getCacheDir().getPath();

    return new File(cachePath + File.separator + uniqueName);
}

/**
 * A hashing method that changes a string (like a URL) into a hash suitable for using as a
 * disk filename.
 */
public static String hashKeyForDisk(String key) {
    String cacheKey;
    try {
        final MessageDigest mDigest = MessageDigest.getInstance("MD5");
        mDigest.update(key.getBytes());
        cacheKey = bytesToHexString(mDigest.digest());
    } catch (NoSuchAlgorithmException e) {
        cacheKey = String.valueOf(key.hashCode());
    }
    return cacheKey;
}

private static String bytesToHexString(byte[] bytes) {
    // http://stackoverflow.com/questions/332079
    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < bytes.length; i++) {
        String hex = Integer.toHexString(0xFF & bytes[i]);
        if (hex.length() == 1) {
            sb.append('0');
        }
        sb.append(hex);
    }
    return sb.toString();
}

/**
 * Get the size in bytes of a bitmap in a BitmapDrawable.
 * @param value
 * @return size in bytes
 */
@TargetApi(12)
public static int getBitmapSize(BitmapDrawable value) {
    Bitmap bitmap = value.getBitmap();

    if (Utils.hasHoneycombMR1()) {
        return bitmap.getByteCount();
    }
    // Pre HC-MR1
    return bitmap.getRowBytes() * bitmap.getHeight();
}

/**
 * Check if external storage is built-in or removable.
 *
 * @return True if external storage is removable (like an SD card), false
 *         otherwise.
 */
@TargetApi(9)
public static boolean isExternalStorageRemovable() {
    if (Utils.hasGingerbread()) {
        return Environment.isExternalStorageRemovable();
    }
    return true;
}

/**
 * Get the external app cache directory.
 *
 * @param context The context to use
 * @return The external cache dir
 */
@TargetApi(8)
public static File getExternalCacheDir(Context context) {
    if (Utils.hasFroyo()) {
        return context.getExternalCacheDir();
    }

    // Before Froyo we need to construct the external cache dir ourselves
    final String cacheDir = "/Android/data/" + context.getPackageName() + "/cache/";
    return new File(Environment.getExternalStorageDirectory().getPath() + cacheDir);
}

/**
 * Check how much usable space is available at a given path.
 *
 * @param path The path to check
 * @return The space available in bytes
 */
@TargetApi(9)
public static long getUsableSpace(File path) {
    if (Utils.hasGingerbread()) {
        return path.getUsableSpace();
    }
    final StatFs stats = new StatFs(path.getPath());
    return (long) stats.getBlockSize() * (long) stats.getAvailableBlocks();
}

/**
 * Locate an existing instance of this Fragment or if not found, create and
 * add it using FragmentManager.
 *
 * @param fm The FragmentManager manager to use.
 * @return The existing instance of the Fragment or the new instance if just
 *         created.
 */
private static RetainFragment findOrCreateRetainFragment(FragmentManager fm) {
    // Check to see if we have retained the worker fragment.
    RetainFragment mRetainFragment = (RetainFragment) fm.findFragmentByTag(TAG);

    // If not retained (or first time running), we need to create and add it.
    if (mRetainFragment == null) {
        mRetainFragment = new RetainFragment();
        fm.beginTransaction().add(mRetainFragment, TAG).commitAllowingStateLoss();
    }

    return mRetainFragment;
}

/**
 * A simple non-UI Fragment that stores a single Object and is retained over configuration
 * changes. It will be used to retain the ImageCache object.
 */
public static class RetainFragment extends Fragment {
    private Object mObject;

    /**
     * Empty constructor as per the Fragment documentation
     */
    public RetainFragment() {}

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Make sure this Fragment is retained over a configuration change
        setRetainInstance(true);
    }

    /**
     * Store a single object in this Fragment.
     *
     * @param object The object to store
     */
    public void setObject(Object object) {
        mObject = object;
    }

    /**
     * Get the stored object.
     *
     * @return The stored object
     */
    public Object getObject() {
        return mObject;
    }
}

} 
```

这是来自 Google Developer Console 的堆栈跟踪

```
 java.lang.RuntimeException: Unable to start activity     ComponentInfo{com.minecraftpix/com.minecraftpix.pics.ImageGridActivity}: java.lang.NullPointerException
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
at android.app.ActivityThread.access$2300(ActivityThread.java:125)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4627)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at com.minecraftpix.android.bitmapfun.util.ImageCache.getDiskCacheDir(ImageCache.java:514)
at com.minecraftpix.android.bitmapfun.util.ImageCache$ImageCacheParams.<init>(ImageCache.java:463)
at com.minecraftpix.pics.ImageGridFragment.onCreate(ImageGridFragment.java:80)
at android.support.v4.app.Fragment.performCreate(Fragment.java:1437)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:877)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:551)
at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1131)
at android.app.Activity.performStart(Activity.java:3781)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2636)
... 11 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T05:00:36.157

这：

```
Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState()) ||
                                 !isExternalStorageRemovable() ?
    getExternalCacheDir(context).getPath() : context.getCacheDir().getPath(); 
```

是可疑的，`!isExternalStorageRemovable()`检查覆盖`MEDIA_MOUNTED`检查。仅仅因为外部存储不可移动，并不意味着它不能被卸载。例如，在旧版本的 android 上，默认行为是将外部存储作为 USB 大容量存储安装在主机上。这将卸载它并使其对您的应用程序不可用，无论存储介质是否可以物理移除。

在外部存储不可移动但未安装的情况下，`getExternalCacheDir()`将返回 null。

这是假设它`context`也是非空的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T11:17:53.980

试试这个..

```
if(android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED)) {
    //some stuff
} 
```

# c# - Windows窗体应用程序中的多个计时器

> ID：15869928
> 
> 赞同：0
> 
> 时间：2013-04-08T01:30:18.517
> 
> 标签：c#, visual-studio-2010, timer

我试图在 c# Visual Studio 2010 中创建一个小游戏。我试图在 Windows 窗体应用程序中制作类似游戏 Bubble Trouble 的东西。

我从工具箱中创建了一个带有 3 个计时器的表单。一个用于玩家的移动（他通过更改标签的图像来移动它的腿） - 此计时器设置为在事件 OnKeyDown 时启用，并在事件 onKeyUp 时停止。

拍摄的第二个计时器 - 当按下空格键时，此计时器设置为在事件“onKeyPress”上启用。而这个计时器是用来逐条绘制射击线的。

第三个计时器是针对球员应该弹出的球——这个计时器一直在运行，它的目的是让球四处移动。

但是我发现的问题是，当我增加球计时器的间隔时，当其他计时器设置为启用时，它们都会变得非常慢。

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T01:41:26.217

我建议重新考虑您的代码，如下所示：

1.  而不是在 keydown 和 keyup 事件中启用和禁用计时器，而是更改模块级状态变量的值。

例如：

射击键的按键可能会：

```
_shootKeyDown = True 
```

拍摄键的键位可能会：

```
_shootKeyDown = False 
```

然后，您可以在一个计时器事件中处理所有需要更新的元素，该事件以您想要的任何时间间隔发生。

```
If _shootKeyDown Then
    ...
End If

If _playerDirection <> "" Then
    ...
End If

If _ballExists Then
    ...
End If 
```

# c - int 和 char 的实际区别

> ID：15869931
> 
> 赞同：8
> 
> 时间：2013-04-08T01:30:49.560
> 
> 标签：c

我必须分析这些代码片段的输出：

```
int x, y;
x = 200; y = 100;
x = x+y; y = x-y; x = x-y;
printf ("%d %d\n", x, y);

char x, y;
x = 200; y = 100;
x = x+y; y = x-y; x = x-y;
printf ("%d %d\n", x, y); 
```

所以，我现在知道它`int`代表整数和`char`字符；我已经阅读了有关差异的信息，如果我`printf`输入`%d`，它将以数字的形式返回，并且`%c`，以字符的形式返回。

例如， ASCII 字符代码`'A'`是 65，但为什么第二个函数打印`100 -56`，而不是`100 200`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T01:51:09.927

在问题中使用的平台上，该类型`char`似乎是 1 字节（8 位）大小，并且是具有 1 个符号位和 7 个值位的有符号类型（并使用 2 的补码算法）。它存储从 -128 到 127 的值。所以，这就是`x`和发生的事情`y`：

```
x = 200 => x takes value -56
y = 100 => y takes value 100
x = x+y => x takes value 44
y = x-y => y takes value -56
x = x-y => x takes value 100 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-08T01:40:25.083

C 有多种整数类型：（`char`至少 8 位）、`short`（至少 16 位）、`int`（至少 16 位）、`long`（至少 32 位）。有`unsigned`各种各样的。如果您为普通类型分配了太大的值，则结果是未定义的（您永远不应该这样做，编译器可能会假设您从不这样做，并且根本不检查）。在这种`unsigned`情况下，他们“环绕”。但请注意，尺寸**不能保证**，只是它们的最小尺寸。有些机器都是 32 位宽的。

# java - 修改后的二分搜索java

> ID：15869934
> 
> 赞同：0
> 
> 时间：2013-04-08T01:31:26.790
> 
> 标签：java, algorithm, binary-search

所以我遇到了一个巨大的障碍......也许只是因为我的逻辑不存在，但我似乎无法自己解决这个问题。

***我正在尝试修改`BinarySearch`，以便获得两个索引。***

***第一个索引是给定数字 x 的最左侧索引和最右侧。如果该数字不存在，则生成 [-1,-1]。***

无论如何。我一直在尝试修改 BinarySearch，但似乎无法使其正常工作。任何指针将不胜感激。

```
public static Pair BinarySearchDup(int[] A, int x, int low, int high){
    int mid = (low + high) / 2;
    int left = -1, right = -1;
    while(low <= high){
        mid = (low + high) / 2;
        if(A[mid] == x){
            int newMid = mid;
            //check left
            if(left == -1){
                left = mid;
                return BinarySearchDup(A, x, low, mid - 1);
            }
            else if(right == -1){
                right = mid;
                return BinarySearchDup(A, x, newMid + 1, high);
            }       
            return new Pair(left, right);
        }
        else if(A[mid] < x)
            return BinarySearchDup(A, x, mid + 1, high);
        else// (A[mid] > x)
            return BinarySearchDup(A, x, low, mid - 1);
    }
    //if there are no matches of the number then it returns -1
    return new Pair(-1, -1);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T01:51:12.717

我不确定我是否理解您的想法，但这就是它不起作用的原因：

您的代码相当于：

```
public static Pair BinarySearchDup(int[] A, int x, int low, int high){
    int mid = (low + high) / 2;
    if(low <= high){        
        if(A[mid] == x)
            return BinarySearchDup(A, x, low, mid - 1);
        else if(A[mid] < x)
            return BinarySearchDup(A, x, mid + 1, high);
        else// (A[mid] > x)
            return BinarySearchDup(A, x, low, mid - 1);
    }

    return new Pair(-1, -1);        
} 
```

事实上，如果你进入 while 循环，你总是会返回，所以永远不会超过一次迭代。此外，如果 mid 的值为 x，那么由于 left 为 -1，您始终输入此 if 子句。或者，如果您不进入 while 循环，则只需返回 (-1, -1)。希望这可以帮助。

编辑：你不能只使用普通的二进制搜索然后简单地从找到的索引来回走，直到你得到整个范围？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T03:25:23.163

要解决这个问题：

*我正在尝试修改 BinarySearch 以便它获得两个索引。第一个索引是给定数字 x 的最左侧索引和最右侧。如果该数字不存在，则生成 [-1,-1]。*

我会这样做：

1）进行二分搜索，除了不考虑目标匹配并立即结束，而是考虑它比你的目标大（例如你搜索它的左边）。当这个搜索结束时，它要么在目标的最左边，一个左边（取决于它的编码方式——在这种情况下只检查一个右边），或者它会被确认不存在。

2) 像 1) 一样进行二分搜索，但考虑目标小于目标。这将以类似的方式找到目标的最右侧实例。

这给了你 O(logN) 的复杂性。Petar Ivanov 的想法“你不能只使用普通的二分搜索，然后简单地从找到的索引来回走动，直到你得到整个范围吗？” 如果数组中有大量重复项，则可能与 O(N) 一样糟糕。但是，如果预期的重复计数（或预期的数组大小）很小，那么 Petar Ivanov 的想法在编码方面要简单得多，因为您不必使用更改的逻辑重新进行二进制搜索。

# mysql - 从小型 MySQL 数据库过渡到中型 MySQL 数据库的解决方案

> ID：15869941
> 
> 赞同：0
> 
> 时间：2013-04-08T01:32:35.963
> 
> 标签：mysql, database-design, scalability

我正在研究我维护的数据库的未来。现在我们有一台使用 InnoDB 和 MyISAM 表运行 MySQL 的数据库服务器。我正在密切关注指标，我可以看到这不会永远持续下去。下一站去哪里？我已经审查了像 Cassandra 这样的解决方案，但我想坚持使用 SQL 方法，所以我不确定。我还审查了 NDB 集群和联合数据库解决方案，但我注意到没有人对这些有什么好说的。基本上，我在寻找有关中间解决方案的建议。我们还不需要在数十台数据库服务器上运行的庞大多节点阵列，但一台服务器即将达到其极限。我不想在不确保手头的数据库架构从额外的功能中受益的情况下，就将另一台服务器扔在一堆。你们对何时超越单一服务器以及如何管理这种过渡有什么建议。感谢任何可以提供帮助的人。

编辑以更好地解释：目前，我们有大约一百张桌子。我们运行许多连接操作来收集最终用户需要查看的数据，这样我们的大多数查询都会连接至少两个表来完成任何操作。数据集还不算大，只有几百Meg，但是访问数据的方式是每张表每天写几笔，最重的一天写一千左右。我们每天也可能有大约几十万次读取，所以读取的次数超过写入的次数大约为 9 比 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:43:51.593

第一个解决方案：

*   指数走得很远
*   使用分析软件找到你的慢查询并优化它们
*   根据您的托管公司，您通常可以更新服务器的 RAM/CPU

第二种解决方案：

*   将您的读取和写入分成两个数据库。（我不知道您是否使用 PHP，但 PHP 有一个插件可以自动为您拆分它们，而无需更改任何代码[http://php.net/manual/en/mysqlnd-ms。 rwsplit.php](http://php.net/manual/en/mysqlnd-ms.rwsplit.php) )
*   使用memcache之类的软件来存储经常查询但不经常更新的数据库信息

# iphone - 如何在 UIView 中优先处理手势识别器和触摸

> ID：15869944
> 
> 赞同：6
> 
> 时间：2013-04-08T01:33:36.980
> 
> 标签：iphone, ios, objective-c, uiview, uigesturerecognizer

通过阅读[UIGestureRecognizer 类参考](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html)，暗示 API 将为您处理触摸和手势控制的优先级，确保`touchesBegan`除非手势识别器首先失败，否则不会在视图上调用您的方法和相关方法：

> 窗口先将触摸事件传递给手势识别器，然后再将它们传递给附加到手势识别器的命中测试视图。通常，如果手势识别器分析多点触摸序列中的触摸流并且无法识别其手势，则视图会接收到完整的触摸补充。**如果手势识别器识别出它的手势，则视图的剩余触摸将被取消。**

我在视图中添加了滑动手势，它正在工作。通过一些日志记录，当我进行单次滑动时，该方法会这样报告。但是，我的`touchesBegan`方法*也*通过其日志进行报告，尽管该`touchesCancelled`方法如预期的那样也收到了一条消息。

我想要并且期望手势识别以防止`touchesBegan`或被`touchesMoved`调用。

所以我的问题是：对于实际上基于其状态延迟触摸的手势识别器，是否需要额外的设置？文档不建议任何其他必要的内容。

我的设置很简单：

```
 swipeUpTwoFinger=[[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(doubleSwipeUp:)]autorelease];
swipeUpTwoFinger.direction=UISwipeGestureRecognizerDirectionUp;
swipeUpTwoFinger.numberOfTouchesRequired=2;
[self addGestureRecognizer:swipeUpTwoFinger]; 
```

我还尝试了此测试以确保识别器在处理之前失败`touchesBegan`（如果您相信上面的文档所说的话，则不需要此测试）但是*在*`touchesBegan`此测试之后仍在处理日志行：

`if (swipeUpTwoFinger.state==UIGestureRecognizerStateFailed)`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T01:55:50.193

听起来你需要： `swipeUpTwoFinger.delaysTouchesBegan = YES;`

# google-maps - 谷歌地图 api v3 的多个信息窗口中的不同内容

> ID：15869946
> 
> 赞同：0
> 
> 时间：2013-04-08T01:34:09.637
> 
> 标签：google-maps

我正在使用 google maps api v3 开发一个项目，并且正在尝试制作它，以便在单击标记时出现一个信息窗口。我已经完成了这一点，但现在我想要的是当点击不同的标记时显示不同的内容，我似乎无法弄清楚。任何帮助表示赞赏。谢谢！

```
 function initialize() {

var locations = [
      ['Phi Delta Theta', 39.511747,-84.735117],
      ['Pi Kappa Alpha', 39.511776, -84.735684],
      ['Sigma Nu', 39.513921, -84.735159],
      ['Sigma Alpha Epsilon', 39.514332, -84.734956],
      ['Beta Theta Pi', 39.5107519, -84.738549]
    ];

var myLatlng = new google.maps.LatLng(39.511747,-84.735117);
var mapOptions = {
  zoom: 15,
  center: myLatlng,
  mapTypeId: google.maps.MapTypeId.ROADMAP
}

var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

var contentString = '<div id="content">'+

    '</div>';

var infowindow = new google.maps.InfoWindow({
    content: contentString
});

var marker, i;

    for (i = 0; i < locations.length; i++) {  
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][1], locations[i][2]),
        map: map
      });

      google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
          infowindow.setContent(locations[i][0]);
          infowindow.open(map, marker);
        }
      })(marker, i));
      }

google.maps.event.addListener(marker, 'click', function() {
  infowindow.open(map,marker);
});

      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T14:11:27.693

[这是您想要的答案](https://stackoverflow.com/questions/5868903/marker-content-infowindow-google-maps)，但是它允许一次打开多个 infoWindow。它的重点是定义windowinfo的多个实例。代替：

```
var infowindow = new google.maps.InfoWindow({
    content: contentString
});
....
for (i = 0; i < locations.length; i++) {

} 
```

这样做：

```
for (i = 0; i < locations.length; i++) {
    var infowindow = new google.maps.InfoWindow({
        content: contentString
    });
} 
```

这样，您将定义多个标记，每个标记都有不同的内容。

# javascript - 节点的 CORS 问题

> ID：15869948
> 
> 赞同：0
> 
> 时间：2013-04-08T01:34:36.557
> 
> 标签：javascript, node.js, cors

所以我正在设置一个应用程序以允许跨域请求。一直在使用这篇文章中的各种方法[如何在 node.js 上的 express.js 框架中启用跨域资源共享 (CORS)](https://stackoverflow.com/questions/11181546/node-js-express-cross-domain-scripting)

但是我收到一个错误，我似乎无法解决。这是我正在使用的（不是我尝试了大约 3 种概述的方法——它们都给出了相同的错误）。

```
 app.use(function(req, res, next){
  res.header('Access-Control-Allow-Origin', '*');
  res.header('Access-Control-Allow-Headers', 'Content-Type');
  res.header('Access-Control-Allow-Methods', 'PUT, GET, POST, DELETE, OPTIONS');
  res.header('Access-Control-Allow-Headers', 'X-Requested-With');
  next();
})
.options('*', function(req, res, next){
    res.end();
}); 
```

这仍然给我一个错误：

```
XMLHttpRequest cannot load http://localhost:3000/blah. Request header field Content-Type is not allowed by Access-Control-Allow-Headers. 
```

如果我注释掉顶部代码，我会得到预期的不允许错误，这似乎表明该请求正在由该代码正确处理。我还重新输入了内容类型请求，以确保我没有粘贴奇数字符。有什么线索吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T01:37:01.460

你有两个`Access-Control-Allow-Headers`标题。最后一个会赢。

您可能需要一个`Access-Control-Allow-Headers`带有逗号分隔列表值的标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T01:53:11.067

使用 cors 插件，这样更容易，无需手动设置 res.header

在此处获取插件：[https ://github.com/troygoode/node-cors](https://github.com/troygoode/node-cors)

示例 REST API 代码：

```
'use strict';

var express = require('express'),
    cors = require('cors'),
    port = process.env.PORT || 3000,
    connect = require('connect'),
    app = express();

app.use(connect.bodyParser()); //For POST method JSON form data

//GET method
app.get('/books', cors(), function(req, res){
      //send JSON etc
      res.json({});
});

//POST method
app.post('/books/', cors(), function(req, res){                          
    var book = req.body;

    //insert book to DB etc

    //send result back to client
    res.send(book);
});

//start server on port 3000
if(!module.parent){
  app.listen(port, function(){
    console.log('Express server listening on port ' + port + '.');
  });
} 
```

现在您可以从任何位置、端口等访问 REST API，干杯

# assembly - 阐明 32 位寄存器 x86 的子部分

> ID：15869950
> 
> 赞同：2
> 
> 时间：2013-04-08T01:34:46.840
> 
> 标签：assembly, x86, stack, cpu-registers

我有一个关于 x86 汇编中 32 位寄存器的子部分的问题：寄存器的较低子部分（使用时）是否被视为相应 32 位寄存器的一部分？

```
r cl,2    
r cl,2
推送 ecx
流行音乐

```

以上面的代码部分为例 - 因为`CL`是`ECX`寄存器的一个小节，当我将寄存器的内容推送到堆栈时，该`CL`小节中的内容是否也被推送到堆栈中？还是分别对待？

并且假设如果我然后将堆栈弹出到`EAX`寄存器中，那么`CL`之前寄存器中的内容是否会进入`EAX`寄存器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T09:17:37.307

`ECX`寄存器在其`CX`下部包含`CH`，`CL`如下图所示。修改存储在 中的值时`CL`，您也会更改`CX`and `ECX`，但不会更改`CH`。

**要回答您的问题：**

**问：** *当我将寄存器 [ `ECX`] 的内容压入堆栈时，该`CL`小节中的内容是否也被压入堆栈？或者他们被单独对待？*
**答：**一枪搞定。`CL`是的一部分`ECX`。`CL`只是处理器提供的一种访问`ECX`.

**问：** *假设如果我随后将堆栈弹出到`EAX`寄存器中，那么`CL`之前寄存器中的内容是否会进入`EAX`寄存器？*
**答：**是的。更准确地说，里面的东西`CL`会进入`AL`.

![在此处输入图像描述](https://i.stack.imgur.com/Vo4dD.png)

***资料来源：****[Puzzle Solving 的寄存器分配教程](http://compilers.cs.ucla.edu/fernando/projects/puzzles/tutorial/)**（在 compilers.cs.ucla.edu 上）*

# c++ - openCV c++：使用 CvBoost（Adaboost 分类器）的问题

> ID：15869954
> 
> 赞同：2
> 
> 时间：2013-04-08T01:35:59.823
> 
> 标签：c++, opencv, adaboost

我正在创建一个应用程序，用于对城市环境图像中的人类进行分类。

我以以下方式训练分类器：

```
int main (int argc, char **argv)
{

/* STEP 2\. Opening the file */
//1\. Declare a structure to keep the data
  CvMLData cvml;
//2\. Read the file
  cvml.read_csv ("directory/train_rand.csv");
//3\. Indicate which column is the response
  cvml.set_response_idx (0);

/* STEP 3\. Splitting the samples */
//1\. Select 4000 for the training
  CvTrainTestSplit cvtts (4000, true);
//2\. Assign the division to the data
  cvml.set_train_test_split (&cvtts);

  printf ("Training ... ");
/* STEP 4\. The training */
//1\. Declare the classifier
  CvBoost boost;
//2\. Train it with 100 features
  boost.train (&cvml, CvBoostParams (CvBoost::REAL,100, 0, 1, false, 0),
           false);

/* STEP 5\. Calculating the testing and training error */
// 1\. Declare a couple of vectors to save the predictions of each sample
  std::vector<float> train_responses, test_responses;
// 2\. Calculate the training error
  float fl1 = boost.calc_error (&cvml, CV_TRAIN_ERROR, &train_responses);
// 3\. Calculate the test error
  float fl2 = boost.calc_error (&cvml, CV_TEST_ERROR, &test_responses);

  cout<<"Error train: "<<fl1<<endl;

  cout<<"Error test: "<<fl2<<endl;

/* STEP 6\. Save your classifier */
// Save the trained classifier
  boost.save ("./trained_boost_4000samples-100ftrs.xml", "boost");

  return 0;
} 
```

train_rand.csv 是一个文件，其中第一列是类别。其余列将成为问题的特征。例如，我可以使用三个功能。它们中的每一个代表图像中每个像素的红色、蓝色和绿色的平均值。所以我的 csv 文件应该是这样的。请注意，在第一列中我使用了一个字符，因此 OpenCV 将其识别为一个类别。

```
B,124.34,45.4,12.4
B,64.14,45.23,3.23
B,42.32,125.41,23.8
R,224.4,35.34,163.87
R,14.55,12.423,89.67
... 
```

对于我的实际问题，我使用了 100 个特征和 8000 个样本。我用一半的数据训练分类器，用剩下的数据测试。

训练后，我得到了大约 5% 的测试错误（这对于仅 100 个特征来说已经相当不错了）。

现在我想在新数据中使用分类器：

```
CvBoost boost

boost.load("directory/trained_boost_4000samples-100ftrs.xml");

float x = boost.predict(SampleData,Mat(),Range::all(),false,false);
cout<<x; 
```

**我在数千个样本上运行这段代码，它总是输出相同的值，即 2。**我真的不明白我在这里做错了什么，但即使我以错误的方式训练分类器，它也不会t 以相同的方式分类 100% 的时间，而且，我之前计算的测试误差表明分类器应该可以正常工作。

困扰我的一件事是 SampleData 必须具有与我用来训练的样本相同数量的列。问题是，用于训练的数据有 100 列 + 1 个响应，如果我尝试运行只有 100 个特征的分类器，它会抛出一个异常，说大小不匹配。如果我用 101 个特征（这绝对是任意的）运行分类器，它可以工作，但结果没有任何意义。

谁能帮我这个？提前致谢！

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-21T15:33:33.120

[我通过改编SVM 文档](http://docs.opencv.org/doc/tutorials/ml/introduction_to_svm/introduction_to_svm.html)中的代码设法让 adaBoost 工作。唯一的技巧是确保有足够的样本数据 (>= 11)。

从[复制代码的博客](http://robertour.com/2012/01/24/adaboost-on-opencv-2-3/)：

> 注意：由于一个非常奇怪的原因，OpenCV 实现不适用于少于 11 个样本。

```
// Training data
float labels[11] = { 1.0, 1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0};
Mat labelsMat(11, 1, CV_32FC1, labels);

float trainingData[11][2] = {
    {501, 10}, {508, 15},
    {255, 10}, {501, 255}, {10, 501}, {10, 501}, {11, 501}, {9, 501}, {10, 502}, {10, 511}, {10, 495} };
Mat trainingDataMat(11, 2, CV_32FC1, trainingData);

// Set up SVM's parameters
CvSVMParams params;
params.svm_type    = CvSVM::C_SVC;
params.kernel_type = CvSVM::LINEAR;
params.term_crit   = cvTermCriteria(CV_TERMCRIT_ITER, 100, 1e-6);

// Train a SVM classifier
CvSVM SVM;
SVM.train(trainingDataMat, labelsMat, Mat(), Mat(), params);

// Train a boost classifier
CvBoost boost;
boost.train(trainingDataMat,
            CV_ROW_SAMPLE,
            labelsMat);

// Test the classifiers
Mat testSample1 = (Mat_<float>(1,2) << 251, 5);
Mat testSample2 = (Mat_<float>(1,2) << 502, 11);

float svmResponse1 = SVM.predict(testSample1);
float svmResponse2 = SVM.predict(testSample2);

float boostResponse1 = boost.predict(testSample1);
float boostResponse2 = boost.predict(testSample2);

std::cout << "SVM:   " << svmResponse1 << " " << svmResponse2 << std::endl;
std::cout << "BOOST: " << boostResponse1 << " " << boostResponse2 << std::endl;

// Output:
//  > SVM:   -1 1
//  > BOOST: -1 1 
```

# c - C 中的预期标识符错误

> ID：15869957
> 
> 赞同：1
> 
> 时间：2013-04-08T01:36:37.763
> 
> 标签：c, identifier

出于某种原因，我收到了错误：

```
expected identifier or '(' before 'wordlist' 
```

在我的头文件（以及相应的函数定义）中返回`wordlist`指针的两个函数。

使用以下代码：

```
#ifndef FUNCTIONS_H
#define FUNCTIONS_H

typedef struct word{
   char *string;
   struct word* next;
}word;

typedef struct wordlist{
   word *head;
   word *tail;
}wordlist;

*wordlist populateList(FILE *file);

*wordlist encrypt(wordlist *wl, int rotation);

void toFile(wordlist *wl, char *outputFileName);

#endif 
```

谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T01:38:09.327

这是因为当你声明一个指针时，星号必须跟在类型名称后面，而不是在它前面：

```
wordlist * populateList(FILE *file);
//       ^
//       |
//      Here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T01:37:54.127

如果 in`populateList`并且`encrypt`您想返回指向 的指针`wordlist`，则正确的语法是`wordlist *`，而不是`*wordlist`（与其他任何地方完全相同）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T01:56:36.393

如果要定义或声明变量，请指定变量的类型，后跟变量名。因此，如果您想要一个类型的变量，`wordlist`您将使用：

```
wordlist myVariable; 
```

如果要将变量指定为指向变量类型的指针，请在变量名称前加上星号，因此，如果您想要一个指向类型变量的指针的变量，则`wordlist`可以使用：

```
wordlist *myVariable; 
```

大多数有经验的 C 程序员将星号与变量名放在一起的原因如下：

```
wordlist myVariable, *pVariable1, myVariable2, *pVariable2; 
```

以上将创建四个变量。 `myVariable`是类型`wordlist`。`myVariable2`是类型`wordlist`。 `pVariable1`并且`pVariable2`是指向 的类型指针`wordlist`。

因此，星号作为变量名声明的一种形容词或限定词或修饰符，表明该变量不是指定的类型，而是指向指定类型的指针。

组合变量定义与以下四行定义相同。

```
wordlist myVariable;  // declares a variable of type wordlist
wordlist *pVariable1; // declares a pointer to a variable of type wordlist
wordlist myVariable2; // declares a variable of type wordlist
wordlist *pVariable2;  // declares a pointer to a variable of type wordlist 
```

函数定义/声明的工作方式类似。

```
wordlist *myFunc (void) {
    wordlist *myNew = malloc (sizeof(wordlist));

    if (myNew) {
        // set up myNew stuff
    }

    return myNew;
} 
```

**编辑：函数指针**

您还可以指定一个包含函数指针的变量。例如，对于上面的 myFunc()，您可以指定如下内容。请注意，我使用括号来强制执行特定的评估顺序。这说明 pFunc 是一个指向不接受参数的函数的指针（void 参数列表），它返回一个指向 wordlist 变量的指针。C 中有关于运算符和修饰符优先级的规则，但是随着表达式变得越来越复杂，通常最好使用括号强制执行评估顺序。将[程序视为数据：函数指针](http://www.cprogramming.com/tutorial/function-pointers.html)

```
wordlist *((*pFunc) (void)) = myFunc;   // pointer to a function that returns a pointer to a wordlist 
```

# c++ - 子字符串的 out_of_range 错误背后的未知原因

> ID：15869959
> 
> 赞同：0
> 
> 时间：2013-04-08T01:36:49.237
> 
> 标签：c++

更新：是的，已回答并已解决。然后我还设法找到了我遇到的真正问题的输出问题。我曾以为子字符串错误是其背后的原因，但我错了，因为当它被修复后，输出问题仍然存在。我发现这是计算中的简单混淆。我一直在减去 726 而不是 762。我本可以在几个小时前完成这个...... Lulz。这就是我能说的……Lulz。

我正在自学 C++（使用他们网站上的教程）。当我需要做一些我目前所学无法做的事情时，我会时不时地跳起来。另外，我写得比较快。所以，如果我的代码在专业水平上看起来不优雅或不可接受，请暂时原谅。我目前唯一的目的是回答这个问题。

该程序采用我拥有的文本文件的每一行。请注意，文本文件的行如下所示：

.123.456.789

它有 366 行。我第一次编写来处理这个问题的程序让我手动输入每行的三个数字中的每一个。我相信你可以想象，那是非常低效的。该程序的目的是从文本文件中取出每个数字并执行功能并将结果输出到另一个文本文件。它每行执行此操作，直到到达文件末尾。

我已经阅读了更多关于可能导致此错误的原因，但在我的情况下我找不到它的原因。这是我认为包含问题原因的代码：

```
int main()
{
    double a;
    double b;
    double c;
    double d;
    double e;
    string search; //The string for lines fetched from the text file
    string conversion;
    string searcha; //Characters 1-3 of search are inserted to this string.
    string searchb; //Characters 5-7 of search are inserted to this string.
    string searchc; //Characters 9-11 of search are inserted to this string.
    string subsearch; //Used with the substring to fetch individual characters.
    string empty;

    fstream convfil;
    convfil.open("/home/user/Documents/MPrograms/filename.txt", ios::in);
    if (convfil.is_open())
    {
        while (convfil.good())
        {
            getline(convfil,search); //Fetch line from text file
            searcha = empty;
            searchb = empty;
            searchc = empty;

            /*From here to the end seems to be the problem.
              I provided code from the beginning of the program
              to make sure that if I were erring earlier in the code,
              someone would be able to catch that.*/

            for (int i=1; i<4; ++i)
            {
                subsearch = search.substr(i,1);
                searcha.insert(searcha.length(),subsearch);
                a = atof(searcha.c_str());
            }
            for (int i=5; i<8; ++i)
            {
                subsearch = search.substr(i,1);
                searchb.insert(searchb.length(),subsearch);
                b = atof(searchb.c_str());
            }
            for (int i=9; i<search.length(); ++i)
            {
                subsearch = search.substr(i,1);
                searchc.insert(searchc.length(),subsearch);
                c = atof(searchc.c_str());
            } 
```

我通常通过查看其他人可能遇到的参考资料和问题来教自己如何解决这些问题，但在这种情况下我找不到任何对我有帮助的东西。我对此尝试了许多变体，但是由于问题与子字符串有关，并且我无法摆脱任何这些变体中的子字符串，因此在输出文件中都返回了相同的错误和相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T01:40:37.587

这是个问题：

```
 while (convfil.good()) {
        getline(convfil,search); //Fetch line from text file 
```

在执行可能失败的操作之前测试失败。当`getline`确实失败时，您已经在循环中。

因此，您的代码会尝试在最后处理无效记录。

而是尝试

```
 while (getline(convfil,search)) {   //Fetch line from text file 
```

甚至

```
 while (getline(convfil,search) && search.length() > 9) { 
```

如果文件末尾有空行，它也会停止而不会出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T01:42:31.987

您可能正在读取文件末尾的空白行并尝试处理它。

在处理它之前测试一个空字符串。

# streaming - 使用命令行的 VLC 流式传输

> ID：15869960
> 
> 赞同：2
> 
> 时间：2013-04-08T01:36:55.833
> 
> 标签：streaming, mp3, vlc

我正在尝试使用 VLC 命令行流式传输 mp3 文件并在浏览器中播放/打开它。我正在寻找的是指南或详细的操作方法。我在这里查看了示例： [http](http://wiki.videolan.org/Documentation%3aStreaming_HowTo/Command_Line_Examples#HTTP_streaming) ://wiki.videolan.org/Documentation:Streaming_HowTo/Command_Line_Examples#HTTP_streaming 但是没有一个示例对我有用，并且页面上的信息/解释很少。

# r - 在 R 中为等高线图添加颜色键

> ID：15869969
> 
> 赞同：5
> 
> 时间：2013-04-08T01:37:55.917
> 
> 标签：r, colors, key

我想创建一个旁边有一个颜色键的等高线图。

我会像这样制作等高线图：

```
data(volcano)
image(volcano)
contour(volcano, add = TRUE) 
```

但是，`image()`据我所知，不支持传奇。我看到包中还有一个`contourplot()`功能`lattice`，但是，我无法弄清楚在使用时如何用等高线覆盖`levelplot(volcano)`地图`contourplot(volcano)`

理想情况下，我希望我的情节看起来像这样，但有一个颜色键：

![在此处输入图像描述](https://i.stack.imgur.com/C31CQ.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-08T01:55:07.413

您可以`image.plot`从`fields`包装中使用。默认情况下，这会创建一个图例。

```
library(fields)
image.plot(volcano)
contour(volcano, add = TRUE) 
```

![在此处输入图像描述](https://i.stack.imgur.com/Ux4Np.png)

# css - ie中的css下拉菜单问题

> ID：15869978
> 
> 赞同：0
> 
> 时间：2013-04-08T01:39:05.190
> 
> 标签：css, internet-explorer, drop-down-menu

我在页面顶部有一个下拉菜单，如下所示：

CSS：

```
 div#navwrapper {
    position: relative;
    clear: both;
    width: 100%;
    height: 35px;
    line-height: 35px;
    letter-spacing: 1px;
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 10px;
background: rgb(255,255,255); /* Old browsers */
background: -moz-linear-gradient(top,  rgba(255,255,255,1) 0%, rgba(241,241,241,1) 50%, rgba(225,225,225,1) 51%, rgba(246,246,246,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,255,255,1)), color-stop(50%,rgba(241,241,241,1)), color-stop(51%,rgba(225,225,225,1)), color-stop(100%,rgba(246,246,246,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  rgba(255,255,255,1) 0%,rgba(241,241,241,1) 50%,rgba(225,225,225,1) 51%,rgba(246,246,246,1) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  rgba(255,255,255,1) 0%,rgba(241,241,241,1) 50%,rgba(225,225,225,1) 51%,rgba(246,246,246,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  rgba(255,255,255,1) 0%,rgba(241,241,241,1) 50%,rgba(225,225,225,1) 51%,rgba(246,246,246,1) 100%); /* IE10+ */
background: linear-gradient(to bottom,  rgba(255,255,255,1) 0%,rgba(241,241,241,1) 50%,rgba(225,225,225,1) 51%,rgba(246,246,246,1) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#f6f6f6',GradientType=0 ); /* IE6-9 */
}
div#coachnavigation {
    width: 990px;
    margin: 0 auto;
    font-weight: bold;
}

#coachnavigation .firstli {
    background-image: url('../coach/images/logo_tsa.png');
    background-repeat: no-repeat;
    text-align: right !important;
    padding-left: 35px;
}

#coachnavigation .down {
    background-image: url('../images/button_down.png');
    background-repeat: no-repeat;
    background-position: 95% 50%;
    padding-right: 26px;
}

div#searchbar {
    clear: both;
    float: left;
    width: 975px;
    height: 28px;
    line-height: 28px;
    background-color: #164a98;
    padding-left: 15px;
    color: #fff;
}

#searchbar a {
    color: #fff;
}

#box
{
    line-height: 32px;
}
#box .field
{
    background: -webkit-gradient(
        linear,
        left bottom,
        left top,
        color-stop(0%, #FEFFFE),
        color-stop(100%, #BDBDBD)
    );
    height: 20px;
    margin: 0px;
    -webkit-border-radius: 25px;
}
#box .field input[type=text]
{
    padding: 2px 2px 2px 25px;
    border: 0;
    -webkit-border-top-left-radius: 25px;
    -webkit-border-bottom-left-radius: 25px;
    margin: 0;
    outline: 0;
    width: 144px;
    height: 20px;
    float: left;
    background: url('images/magnifier.png') 7px 5px no-repeat;
    border: 1px solid #333333;
    color: #333333;
}
#box .field input[type=submit]
{
    float: left;
    background: -webkit-gradient(
        linear,
        left bottom,
        left top,
        color-stop(100%, #C6C6C6),
        color-stop(0%, #8F8F8F)
    );
    border: 1px solid #606060;
    width: 60px;
    height: 26px;
    padding: 2px 0 2px 0;
    -webkit-border-top-right-radius: 25px;
    -webkit-border-bottom-right-radius: 25px;
    margin: 0 0 0 -1px;
    opacity: 0.9;
    cursor: pointer;
    text-shadow: 1px 1px 0 #DBDBDB;
}

.coachnavmenu>li>ul>li>ul>li { width: 400px;  }

.coachnavmenu, 
.coachnavmenu ul,
.coachnavmenu li
{
    padding: 0px;
    margin: 0px;
    z-index: 2;
    text-align: right;

}
.coachnavmenu > li
{
    float: left;
}
.coachnavmenu li
{
    list-style-type: none;
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 10px;
    line-height: 30px;
    letter-spacing: 0px;
    color: #333333;
    border-right: 1px inset #f6f6f6;
    padding: 5px 12px 0px 12px;
}

.coachnavmenu > li li
{
    list-style-type: none;
    text-align: left;
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 10px;
    border: 1px solid #f6f6f6;
    color: #333333;
    background-color: #f6f6f6;
    padding: 0 20px 0 4px;
}

.coachnavmenu ul
{
    display: none;
    position: absolute;
    margin-left: -15px;
    margin-top: -1px;
}

.coachnavmenu li:hover > ul
{
    display: block;
}
.coachnavmenu ul.parent_hover
{
    display: block;
}
.coachnavmenu a
{
    color: #333333;
    line-height: 100%;
    width: 100%;
    text-decoration: none;
}

.coachnavmenu li.greenhover:hover
{
    color: #333333;
    background-color: #7dc242;
}
.coachnavmenu li.hover,
.coachnavmenu a:hover
{
    color: #333333;
    background-color: #7dc242;
    text-decoration: underline;
}

.coachnavmenu ul ul
{
    margin-top: -30px;
    left: 99%;
}
.coachnavmenu span
{
    display: block;
}
.coachnavmenu
{
    float: left;
    width: 100%;
    color: #000;
}
.endmenu
{
    clear: left;
} 
```

Live html 可以在这里找到，但我认为问题出在 CSS 上。 [http://www.buffalolacrosse.com/test.cfm](http://www.buffalolacrosse.com/test.cfm)

我无法正确显示此菜单。它适用于 chrome 或 firefox，但不适用于 IE。菜单已折叠（li 填充不起作用）并且在垂直对齐时对齐完全不正常。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T01:49:49.753

我认为您需要`a`在菜单中指定元素的行高。我尝试通过设置

```
#coachnavigation a 
{ 
line-height:30px; 
} 
```

我觉得很好。也添加`z-index`到您的菜单中，因此下拉菜单不会出现在某些元素后面。

```
div#navwrapper {
    z-index:999;
} 
```

# asp.net-mvc-4 - 从 OpenId 获取 FirstName、LastName 和其他？

> ID：15869980
> 
> 赞同：0
> 
> 时间：2013-04-08T01:39:21.573
> 
> 标签：asp.net-mvc-4, login, oauth, openid, dotnetopenauth

[这里](http://pastebin.com/yQJT9Pia)的相关功能来自 ASP.NET MVC 模板。

如何获取用户的一些附加属性，例如 FirstName 等？我不介意使用`DotNetOpenAuth`，如果没有其他选择，我显然更喜欢内置版本。

我不确定我必须在那里改变什么才能让它工作，我不想把它搞砸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T17:53:01.473

我认为答案是你不能。ASP.MVC 模板使*登录*变得容易，但仅此而已。只是认证。它提供很少或根本没有关于用户的信息，除了它是以前在这里的同一个用户。

如果您想为用户获取更多信息，我建议您自己处理更多登录。OpenIdRelyingParty MVC 示例中提供了如何执行此操作的示例，您可以[在此处下载](http://sourceforge.net/projects/dnoa/files/releases/v4.2/v4.2.2/DotNetOpenAuth-4.2.2.13055.zip/download)。

# php - jquery .submit() 在 setTimeout 中不会将数据传递给 php

> ID：15869985
> 
> 赞同：0
> 
> 时间：2013-04-08T01:39:46.580
> 
> 标签：php, javascript, jquery

我正在尝试向登录表单添加效果，当效果完成后（如 1 秒），它会转到 php.ini。

我尝试使用 e.preventDefault() 在 .submit 中创建一个 setTimeout() 函数，这样我可以将它延迟一秒钟，但问题是它没有获取数据，而是它转到了一个空白网页中的 php正在检查输入的数据。

当 e.preventDefault() 被拿走 php 工作但它没有给我一秒钟先执行动画然后转到 php 文件检查所有数据

这是我的代码

```
<script> $("#effectsExplode").submit(function (e) {
        var form = this;
        e.preventDefault();
        $("#effectsExplode").toggle("explode");
        setTimeout(function () {
            form.submit();
        },1000);
    });
</script>

<form id="effectsExplode" class="form-1" method="post" action="checklogin.php">
    <p class="field">
        <input type="text" name="login" placeholder="Username or email">
        <i class="icon-user icon-large"></i>
    </p>
    <p class="field">
        <input type="password" name="password" placeholder="Password">
        <i class="icon-lock icon-large"></i>
    </p>
    <p class="submit">
        <button id="buttonexplode" type="submit" name="loginsubmit">
            <i class="icon-arrow-right icon-large"></i>
        </button>
    </p>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T01:56:17.867

您已经创建了一个无限循环。例如，如果我有一个按钮和这个 javascript：

```
$('button').click(function() {
    var b = this;
    $('#status').append('Clicked<br/>');
    setTimeout(function() {
        b.click();
    }, 1000);
}); 
```

[http://jsfiddle.net/b9chris/yaNdc/](http://jsfiddle.net/b9chris/yaNdc/)

单击该按钮后，我将每秒收到另一个附加到该状态标签的“已单击”消息……永远。这是因为 jquery 会为您手动触发的事件触发其所有事件处理程序；在这种情况下，您附加到“提交”然后触发“提交”并直接循环回到您自己的代码中，这一直阻止表单实际提交。

很可能在您的本地测试机器上，此表单提交几乎是立即发生的，但是一旦您将其放在网络服务器上，实时版本将需要更长的时间，并且您的动画将有时间播放。最简单的解决方案是摆脱`ev.preventDefault()`它并让它在提交需要时间时提交并播放。

# php - 当用户登陆页面时如何设置 URL 变量？

> ID：15869987
> 
> 赞同：0
> 
> 时间：2013-04-08T01:39:56.003
> 
> 标签：php, url, variables

在我的主页上，它有分页，但这种分页仅在 URL 中设置了页面变量时才有效，例如[http://www.example.com/index?page=1](http://www.example.com/index?page=1)

但是，如果用户只是登陆我的索引页面，它不会设置页面变量，并且我的页面上的结果不会显示，因为没有设置页码，所以我想知道是否有设置 URL 变量的方法当用户刚刚登陆页面并且未设置变量时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T01:41:58.810

定义一个变量

`$page`默认值并使用 isset

如果存在或不存在，您可以使用它来获取 $_GET[] 值

```
if(isset($_GET['page'])){
   $page = $_GET['page']
}
else{
   $_GET['page'] = //set default value for page..
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T01:42:11.403

我建议做类似的事情：

```
$page = 1;
if (isset($_GET['page'])) {
    $page = $_GET['page'];
} 
```

而不是使用`$_GET['page']`整个代码 - 使用`$page`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T01:43:08.967

您可能会考虑的几件事...

```
// php will evaluate to false for the empty string as well as zero, so this forces a set to zero
if (!$_REQUEST["page"])
  $_REQUEST["page"] = 0; 
```

或者...

```
// check if the variable is set first...
if (!isset($_REQUEST["page"]))
  $_REQUEST["page"] = 0; 
```

如果您使用的是阵列，您也可以对阵列执行相同的`$_GET`操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T01:49:43.697

像这样的东西应该工作

```
$options = array('options' => array(
    'default' => 1, // value to return if the filter fails
    'min_range' => 1
));
if(isset($_GET['page'])){
    $page = filter_var((int)$_GET['page'], FILTER_VALIDATE_INT, $options);
}else{
    $page = 1;
} 
```

# emacs - 如何为 gnus-group-topic emacs24 自定义人脸？

> ID：15869992
> 
> 赞同：1
> 
> 时间：2013-04-08T01:40:39.020
> 
> 标签：emacs, emacs24, emacs-faces, gnus

我正在尝试在 gnus-group-mode 中设置主题名称的颜色。我尝试查找人脸名称，以便设置颜色属性，但根据我正在查找的主题的字母，我将默认或 ascii 字符作为人脸名称。

查找 gnus 的源代码，我想出了这个函数。但是，在阅读文档的面部部分后，我不确定如何将面部分配给函数（如果这是正确的做事方式）。

```
(defun gnus-group-topic-name ()
 "The name of the topic on the current line."
 (let ((topic (get-text-property (point-at-bol) 'gnus-topic)))
    (and topic (symbol-name topic)))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:28:13.427

似乎没有为开箱即用的主题定义面孔。[来自http://www.emacswiki.org/emacs/GnusFormatting](http://www.emacswiki.org/emacs/GnusFormatting)的这个小片段试图解决这个问题，并且还为空主题和非空主题引入了单独的面孔：

```
(setq gnus-topic-line-format "%i[ %u&topic-line; ] %v\n")

;; this corresponds to a topic line format of "%n %A"
(defun gnus-user-format-function-topic-line (dummy)
  (let ((topic-face (if (zerop total-number-of-articles)
                        'my-gnus-topic-empty-face
                      'my-gnus-topic-face)))
    (propertize
     (format "%s %d" name total-number-of-articles)
     'face topic-face))) 
```

该页面还指出，您必须替换`my-gnus-topic-empty-face`并`my-gnus-topic-face`使用一些合适的面孔或创建自己的面孔。

# c# - 在将 C# 与 HTML Agility Pack 结合使用时，无法从 NBA.com 检索投篮位置数据

> ID：15869999
> 
> 赞同：0
> 
> 时间：2013-04-08T01:42:08.743
> 
> 标签：c#, web-scraping, html-agility-pack

我想从 NBA.com、CBSsports.com 和 espn.go.com 等网站的 HTML 网页中检索镜头位置数据集，然后进行一些数据分析。

我的问题是我无法检索我需要的数据，同时在 HTML Agility Pack 的帮助下使用 C# 进行 HTML 抓取。

第一的。例如，这是 2013 年 4 月 7 日 LAL 和 LAC 之间的 CBS 体育比赛跟踪器。链接地址为 [http://www.cbssports.com/nba/gametracker/live/NBA_20130407_LAL@LAC](http://www.cbssports.com/nba/gametracker/live/NBA_20130407_LAL@LAC)。

我尝试在球场图上捕获那些红色 X 点和绿色 O 点的 x 和 y 坐标值。

（抱歉，由于声誉有限，我无法在此处发布图片：（）

Safari 网络检查器用于随机获取这些点之一。表明，

```
<div class="homeShot made" playerid="555969" period="1" type="1" ypos="-17" xpos="-1" result="1" time="4:37" distance="25" style="right: 165.53191489361703px; top: 161.6px; "></div> 
```

注意到 HTML 中的“ypos”和“xpos”正是我想要的。

然后我使用 C# 和 HTML Agility Pack 来检索它们。

C#代码：

```
 string link = "http://www.cbssports.com/nba/gametracker/live/NBA_20130407_LAL@LAC";

    HtmlWeb hw = new HtmlWeb();
    HtmlDocument doc = hw.Load(link);

    HtmlNodeCollection items = doc.DocumentNode.SelectNodes("//div[@class= 'homeShot made']");

    foreach (HtmlNode item in items) 
    {
        // blablabla
    } 
```

但是 Visual Studio 中的错误消息弹出并告诉我“项目引用为空”。

我怎样才能以正确的方式解决这个问题？

第二。另一个问题是在 NBA.com 上。（对不起，由于声誉有限，我无法发布第二个链接）

同样，Safari 网络检查器用于随机获取这些红点和绿点之一。表明，

```
<image x="385.12" y="218.3404255319149" width="16" height="16" preserveAspectRatio="none" href="/media/shotchart_legend_o.png"></image> 
```

我注意到它被限定在一个 SVG 中，

```
<svg height="613" version="1.1" width="652" xmlns="http://www.w3.org/2000/svg" style="overflow: hidden; position: relative; ">...</svg> 
```

如何使用 C#（带或不带 HTML Agility Pack）获取所有 x 和 y 数据，例如“x="385.12" y="218.3404255319149"”？

感谢您的所有想法和帮助：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:04:54.757

您提供的链接返回的 HTML 没有任何包含 CLASS='homeShot made' 的 DIV。如果您使用浏览器检查 HTML，您正在查看 DOM 的内存表示，而不是文件的内容。Html Agility Pack 仅处理原始 HTML 输入，它不是浏览器。

如果您查看源代码，则可以确认。

因此，如果内容是由一些 javascript 代码构建的，则必须使用嵌入式浏览器控件，而不是 Html Agility Pack 之类的静态工具。