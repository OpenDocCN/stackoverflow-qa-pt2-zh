# StackOverflow 问答 16169000-16169999

# ios - iphone/ios - 核心数据关系概念

> ID：16169000
> 
> 赞同：0
> 
> 时间：2013-04-23T12:09:14.183
> 
> 标签：ios, xcode, cocoa-touch, core-data, relationship

我有一个概念问题，我希望你们能帮助我！在我的应用程序上，用户和他的联系人可以创建事件并分享它。

这是我的应用模型：

[应用模型 http://img407.imageshack.us/img407/7900/bildschirmfoto20130423ur.png](http://img407.imageshack.us/img407/7900/bildschirmfoto20130423ur.png)

在应用程序启动时，我创建我的个人资料（用户）并填写联系人实体。现在我或我的联系人可以创建一个事件。对于一个事件，我可以选择参与者。

我现在的问题是：当我添加参与者时，我必须**将**它们也添加到联系人列表中，对吗？所以他们会在里面**两次**。

在关系数据库中，我会做一个连接这两个实体并显示参与者的表。

如何在核心数据中实现它？任何改进我的模型的建议都会很棒！谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:23:01.953

![在此处输入图像描述](https://i.stack.imgur.com/Pq1gi.png)在任何可能的地方都有一个 id。这将非常有帮助。如果您有联系人 ID，则将联系人 ID 添加到参与者，您可以获得与参与相关的更多信息（如您提到的是否接受......等等）

# javascript - js在弹出窗口和主窗口之间进行通信

> ID：16169004
> 
> 赞同：2
> 
> 时间：2013-04-23T12:09:20.357
> 
> 标签：javascript, popup, window, communicate

我在同一个域上有两个浏览器窗口，

一个是主窗口，第二个是小弹出窗口。

我发现了这个：[如何在两个浏览器窗口之间进行通信？](https://stackoverflow.com/questions/1835549/how-to-communicate-between-two-browser-windows)

但是，问题是弹出窗口由**3rd 方软件**在本地计算机上作为事件打开......而且我不希望与服务器通信，并在主窗口中读取状态，以解决慢速问题......

我希望通过 JS 将弹出窗口中的一些数据直接传输到主窗口（然后立即关闭弹出窗口）。

该事件是由本地电话软拨号器带参数打开的VOIP新收入呼叫，主窗口是浏览器CRM，需要在同一页面上通过JS显示来电状态，类似AJAX [仅限本地]。

ps：

也许有一种方法可以在浏览器与 Windows 应用程序之间进行通信？因此，第 3 方软件将向其发送数据，并且应用程序将与窗口（或 Firefox 扩展 - 但我更喜欢无需安装更多插件）进行通信。 .

我应该采取什么方法？你认为解决方案是什么？

谢谢分配。;)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T12:17:33.977

如果一个浏览器没有打开另一个浏览器，那么两个浏览器就无法通过 window.opener 进行对话。

您可以尝试将数据存储到[本地](https://developer.mozilla.org/en-US/docs/DOM/Storage)存储中并让 Windows 轮询本地存储以进行更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T12:10:42.953

您是否尝试过使用[`window.opener`](https://developer.mozilla.org/fr/docs/DOM/window.opener)来引用父窗口？

# database - jquery 移动网络应用程序的最佳后端是什么？

> ID：16169007
> 
> 赞同：-3
> 
> 时间：2013-04-23T12:09:28.980
> 
> 标签：database, jquery-ui, jquery-mobile, backend

我想知道 jquery 移动网络应用程序的最佳后端（数据库）是什么，如果您有任何我可以使用的教程和技巧？支持 jquery 移动 Web 应用程序的最佳数据库是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:56:23.637

就市场环境而言，移动应用程序的后端是一个完全不同的概念。提供商有一场新的革命[`mBaaS`](http://en.wikipedia.org/wiki/Backend_as_a_service)——移动后端即服务。与其拥有自己的后端、编写自己的 Web 服务并将它们公开给您的应用程序，我建议尝试使用 mBaaS，除非情况要求采用传统方式。

# eclipse - 为什么方法 Base64.encodeBase64String(byte) 不可用

> ID：16169008
> 
> 赞同：2
> 
> 时间：2013-04-23T12:09:32.067
> 
> 标签：eclipse, apache-commons-codec

您好，我的项目构建路径中包含来自官方网页的 apache commond codec 1.7 .jar，但是 `Base64.encodeBase64String(byte`当我编写代码时该方法不可用。我已经使用旧版本的 jar（1.5、1.6）进行了测试，但没有任何效果。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T23:01:28.650

因为我在搜索类似问题时发现了这个，所以我想我会把它贴在这里，这样人们就可以找到它。maven 存储库有这个库的一个版本“20041127.091804”我认为这是一个故障，日期以某种方式被转储到版本号中，但它显示为最新版本并且不包含此功能。你可以点击它旁边的版本按钮，看看它是 2005 年的，最新版本（截至我写这篇文章的时候）是 1.8。希望这可以帮助。

# algorithm - 句子完成建议的数据结构

> ID：16169009
> 
> 赞同：-1
> 
> 时间：2013-04-23T12:09:31.587
> 
> 标签：algorithm, data-structures

如果在 Google 中输入了一个单词，它将在下拉列表中显示一个单词列表作为建议。

例如，如果您键入`what`，它将以 8 个单词显示`what is your name`、`what is your father's name`、`what is your college name`等。

什么是合适的数据结构，以及列出这些建议的最佳方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:39:10.403

我认为最好的方法是使用[trie](http://en.wikipedia.org/wiki/Trie)，其中每个边缘根据下一个字母对应于该边缘的概率进行加权，以便第一个建议具有更高的概率。

# python - Django 单元测试：文件下载异常

> ID：16169015
> 
> 赞同：0
> 
> 时间：2013-04-23T12:09:51.463
> 
> 标签：python, django, unit-testing, http, http-get

我正在使用 Django 单元测试来尝试测试文件下载。它作为一个 API 调用工作，需要一个令牌作为 GET 参数，但没什么特别的。代码是：

```
from django.test.client import Client

c = Client()

base_url = str(sample_download_resource_uri) + '?token=' + str(account_token)
response = c.get(base_url)

if response.status_code != 200:
    return False, "Status code for /download_attachment/XYZ/ is not 200" 
```

URL 类似于：`/download_attachment/1/`或`/download_attachment/2/`

取决于文件 ID。

当我尝试运行单元测试时，在该行中：

```
if response.status_code != 200: 
```

我得到错误：`I/O exception on closed file.`

我在浏览器中尝试调用中的 URL，它运行良好。

我没有通过 tests.py 文件和测试命令运行单元测试，而是使用 Django 视图远程对 Web 服务器进行单元测试。但这不应该有所作为，因为所有其他非下载单元测试都适用于 GET 和 POST 命令。

# java - 在java中创建一个字符串列表，其中每个字符串都是一个键，到一个元组列表（作为值）

> ID：16169016
> 
> 赞同：0
> 
> 时间：2013-04-23T12:09:54.293
> 
> 标签：java, list, data-structures, map, hashmap

如何创建一个字符串列表，其中每个字符串都指向一个元组列表；换句话说，每个字符串都是元组列表的键（作为值）？

每个元组应采用以下形式：

```
List<String> pref, where each element of the list pref (say pref_i):
pref1 --> {(T1:10),(T2:13), T3:3),...}
pref2 --> {(T1:7), (T4:3), (T5:1),...}
pref3 --> ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T12:12:04.470

在我看来你想要一个`Map`，这取决于你的元组的类型（假设这里是一个字符串）：

```
Map<String, List<String>> prefs = new HashMap<String, List<String>>; 
```

你可以让你的元组是任何类型的，为了方便起见，我使用了一个字符串。

如果您的元组通过 a`Set`或更好地表示`Map`，请相应地更改它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:11:56.703

多地图救援！

java中没有touples之类的东西，除非你模拟它们。多重映射就像拥有一个映射，其中键是字符串，值是元素数组

[多重地图](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T12:14:19.150

也许你可以使用 HashMap 的 HashMap ？第一个 HashMap 使用您的字符串键，第二个使用您的元组。

```
HashMap<String, HashMap<String, String>> myHashMap = new HashMap<String, HashMap<String, String>>(); 
```

希望这可以帮助 ！再见 ！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T12:20:56.790

您还可以使用列表。

```
import java.util.ArrayList;
    import java.util.List;
    public class TestArrayList {
        public static void main(String[] args) {

            List<String> tempList=new ArrayList<String>();
            List<String> temp1=new ArrayList<String>();
            temp1.add(0, "a");
            temp1.add(1, "b");
            List<String> temp2=new ArrayList<String>();
            temp2.add(0, "c");
            temp2.add(1, "d");
            List<String> temp3=new ArrayList<String>();
            temp3.add(0, "e");
            temp3.add(1, "f");
            tempList.addAll(0, temp1);
            tempList.addAll(1, temp2);
            tempList.addAll(1, temp3);

            for(int i=0;i<tempList.size();i++){
                System.out.println(">>"+tempList.get(i));
            }
        }
    } 
```

# authentication - 自动 AD 注销后 SignalR 断开连接

> ID：16169017
> 
> 赞同：0
> 
> 时间：2013-04-23T12:09:56.173
> 
> 标签：authentication, asp-classic, signalr

我的项目实现 SignalR 时遇到以下问题。我的用户通过 ASP 常规身份验证进行身份验证。（基于 AD 基础）

***达到身份验证超时时，javascript 和集线器之间的连接失败。我想知道处理这个问题的好方法是什么。***（事件（哪一个？）+重新连接？）

非常感谢您提前

****数据：* ***

***在 chrome 调试中：***

```
Failed to load resource: the server responded with a status of 500 (Internal Server Error) http://mySite:81/Project/signalr/send?transport=serverSentEvents&con... 
```

***IIS 日志：***

***当身份验证仍处于活动状态时：***

```
2013-04-23 10:27:07 IP POST /Project/signalr/send transport=serverSentEvents&connectionToken=RRBKQRnC_KsWBfxuGTXbfsvipbDWWFRVSodpXmW2-CS-GniKtxx69WbAJXURCLns_CfNJDmSZUI3v9LLslqWYy5pvzA1lzCcl9nWx1ufAOB69l8CFTPySNZWzJrVs-VKIb34vjHq5qi8qfms-LFg6j_zwO9WA4vguRu1LdPxY2I2p09v6X_PE7tfCXnIS4vS0 81 thomas.dupuis MYIP Mozilla/5.0+(Windows+NT+6.1;+WOW64)+AppleWebKit/537.22+(KHTML,+like+Gecko)+Chrome/25.0.1364.160+Safari/537.22 200 0 0 2252 
```

***当身份验证不再处于活动状态时：***

```
2013-04-23 10:28:39 IP POST /Project/signalr/send transport=serverSentEvents&connectionToken=RRBKQRnC_KsWBfxuGTXbfsvipbDWWFRVSodpXmW2-CS-GniKtxx69WbAJXURCLns_CfNJDmSZUI3v9LLslqWYy5pvzA1lzCcl9nWx1ufAOB69l8CFTPySNZWzJrVs-VKIb34vjHq5qi8qfms-LFg6j_zwO9WA4vguRu1LdPxY2I2p09v6X_PE7tfCXnIS4vS0 81 - MYIP Mozilla/5.0+(Windows+NT+6.1;+WOW64)+AppleWebKit/537.22+(KHTML,+like+Gecko)+Chrome/25.0.1364.160+Safari/537.22 500 0 0 209 
```

我们可以看到第一个日志包含我的用户 ID (thomas.dupuis)，而不是第二个。（第一个获得 200 http 而第二个获得 500 错误内部服务器）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:04:12.090

如果您正在超时验证，您需要让客户端重新启动，也就是调用 $.connection.hub.stop()，然后调用 $.connection.hub.start()。当 SignalR 连接处于活动状态时，无法修改身份验证凭据。

# java - Pl SQL 函数使 java 应用程序返回 0

> ID：16169018
> 
> 赞同：0
> 
> 时间：2013-04-23T12:09:56.617
> 
> 标签：java, plsql

我的 DBM 中有一个如下所示的视图：

```
SELECT CDN, DN_GRUPPE, AFSLUTTET_AF AS INITIALS, AGENTGRUPPE AS AGENTGROUP, STATUS, CREATED, LAST_UPD , TRUNC(LAST_UPD)- TRUNC(CREATED) AS SOLVED_SECONDS
FROM GENESYS.NYK_SIEBEL_CALLBACK_AGENT_HIST@CCON.NYKREDITNET.NET LEFT JOIN KS_DRIFT.SYS_DATE_KS AA ON TO_DATE(TRUNC(LAST_UPD),'YYYY-MM-DD') = AA.THIS_DATE
WHERE TIDSPUNKT > (SYSDATE - 427) 
```

当我的 Java 应用程序尝试获取所选列`SOLVED_SECONDS`时，它会返回应有的值。

但是，如果我将视图更改为以下内容：

```
 SELECT CDN, DN_GRUPPE, AFSLUTTET_AF AS INITIALS, AGENTGRUPPE AS AGENTGROUP, STATUS, CREATED, LAST_UPD , CASE WHEN CALCULATE_CALLBACK_DURATION(CREATED,LAST_UPD) is NULL THEN
 CALCULATE_CALLBACK_DURATION(AA.THIS_DATE_OPENING, LAST_UPD) ELSE
CALCULATE_CALLBACK_DURATION(CREATED, LAST_UPD) END AS SOLVED_SECONDS
FROM GENESYS.NYK_SIEBEL_CALLBACK_AGENT_HIST@CCON.NYKREDITNET.NET LEFT JOIN KS_DRIFT.SYS_DATE_KS AA ON TO_DATE(TRUNC(LAST_UPD),'YYYY-MM-DD') = AA.THIS_DATE
WHERE TIDSPUNKT > (SYSDATE - 427) 
```

即添加我自己的函数（`CALCULATE_CALLBACK_DURATION`）然后我的 Java 应用程序的结果是 = 0。不是 null 不是 NaN 只是 0。

例如，如果我在 Java 应用程序中使用以下代码：

```
 public ArrayList<CallQueue> getCallbacks(String startDate, String endDate,
        char c, ArrayList<CallQueue> data) {
    DateTime end = new DateTime(endDate);
    // this method is currently used for testing purposes
    String sql = "SELECT SOLVED_SECONDS FROM KS_DRIFT.NYK_SIEBEL_CALLBACK_AGENT_H_V ";
    System.out.println(sql);
    ResultSet rs = getTable(sql);
    try {
        while (rs.next()) {
            System.out.println(rs.getInt("SOLVED_SECONDS"));
        }
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return null; 
}

private ResultSet getTable(String sql){
    try {
        return Hent_tabel(sql);
    } catch (SQLException e) {e.printStackTrace();}
    return null;
}

public ResultSet Hent_tabel(String Execute) throws SQLException {
    return db.executeQuery(Execute);
} 
```

在上面的示例中，应用程序将为表中的每一行打印出“0”。但是，如果我通过 DBM 查看表格，则正确的数字会显示在列中`SOLVED_SECONDS`

我觉得我已经尝试了所有方法，但我似乎根本找不到问题所在。如果您需要更多信息，请告诉我！

*注意*-*在上面的示例中，我可以从表中获取具有正确结果的任何其他列* `SOLVED_SECONDS`

**更新**

如果我使用`Resultset.wasNull();`我得到一个异常，说没有数据被读取。

这是`SOLVED_SECONDS`我的 DBM中的屏幕截图

![在此处输入图像描述](https://i.stack.imgur.com/pS6nL.png)

这是Java的输出：

![在此处输入图像描述](https://i.stack.imgur.com/sRRUs.png)

请注意，以下输出只是数据库中每一行的 0 继续的一小部分。

**更新**创建的视图：

以下是视图的完整定义：

```
Create View KS_DRIFT.NYK_SIEBEL_CALLBACK_AGENT_H_V (CDN, DN_GRUPPE, INITIALS, AGENTGROUP, STATUS, CREATED, LAST_UPD, SOLVED_SECONDS)
As 
  SELECT 
      CDN, DN_GRUPPE, AFSLUTTET_AF AS INITIALS, 
      AGENTGRUPPE AS AGENTGROUP, STATUS, CREATED, LAST_UPD , 
      CASE WHEN CALCULATE_CALLBACK_DURATION(CREATED,LAST_UPD) is NULL 
           THEN  CALCULATE_CALLBACK_DURATION(AA.THIS_DATE_OPENING, LAST_UPD) 
           ELSE CALCULATE_CALLBACK_DURATION(CREATED, LAST_UPD) 
      END AS SOLVED_SECONDS 
  FROM 
      GENESYS.NYK_SIEBEL_CALLBACK_AGENT_HIST@CCON.NYKREDITNET.NET 
  LEFT JOIN 
      KS_DRIFT.SYS_DATE_KS AA ON TO_DATE(TRUNC(LAST_UPD),'YYYY-MM-DD') = AA.THIS_DATE 
  WHERE 
      TIDSPUNKT > (SYSDATE - 427) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:06:08.600

如果它是同一个数据库，我不明白为什么结果应该不同。您直接在数据库中查询表的值，并在 Java 中查询视图中的值。确保在两者中执行**相同**的查询并检查结果。

我所看到的是 Java 显示零而不是空值的结果。那是因为`getInt()`返回一个原始 int。

所以，我认为你应该做的测试是：

```
StringBuilder query = new StringBuilder();
query.append(" SELECT cdn, ");
query.append("       dn_gruppe, ");
query.append("       afsluttet_af AS INITIALS, ");
query.append("       agentgruppe  AS AGENTGROUP, ");
query.append("       status, ");
query.append("       created, ");
query.append("       last_upd, ");
query.append("       CASE ");
query.append("         WHEN Calculate_callback_duration(created, last_upd) IS NULL THEN ");
query.append("         Calculate_callback_duration(AA.this_date_opening, last_upd) ");
query.append("         ELSE Calculate_callback_duration(created, last_upd) ");
query.append("       END          AS SOLVED_SECONDS ");
query.append(" FROM   genesys.nyk_siebel_callback_agent_hist@ccon.nykreditnet.net ");
query.append("       left join ks_drift.sys_date_ks AA ");
query.append("              ON To_date(Trunc(last_upd), 'YYYY-MM-DD') = AA.this_date ");
query.append(" WHERE  tidspunkt > ( SYSDATE - 427 ) ");

ResultSet rs = db.executeQuery(query.toString());
while(rs.next()) {
  //check if the field have value or return null. It is needed when your field can return null values from the database
  Integer solvedSeconds = rs.getObject("SOLVED_SECONDS") != null ? rs.getInt("SOLVED_SECONDS") : null;

  System.out.println("Solved seconds: " + (solvedSeconds != null ? solvedSeconds.toString() : ""));

} 
```

并在数据库中执行相同的查询。此外，请确保您在两个测试中使用相同的用户。

# version-control - Veracity 忽略中的 * 和 ?* 有什么区别？

> ID：16169021
> 
> 赞同：2
> 
> 时间：2013-04-23T12:10:02.777
> 
> 标签：version-control, wildcard, veracity

示例显示`cache/?*`，但我想知道为什么这种奇怪的组合就`cache/*`足够了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T16:24:46.887

我想您是在谈论 Martin 对[忽略文件或文件夹](http://veracity-scm.com/qa/questions/92/ignore-a-file-or-folder/104)问题的评论。

他建议如果您想忽略文件夹的内容（所有文件、子文件夹），但仍要跟踪文件夹的存在（请记住，Veracity 实际上跟踪文件夹，而不是从文件夹下的文件推断它们的存在），您可以使用：

```
@/cache/?* 
```

在您的忽略列表中。不同的是，只是

```
@/cache/* 
```

将匹配`@/cache/`文件夹本身（`*`匹配 0 个或更多字符）。

`@/cache/?*`只会匹配 下的文件/文件夹`cache`，因为`?`匹配任何单个字符。 `@/cache/`不会匹配，而`@/cache/a`,`@/cache/README`等会。

# c - 使用 gdb 调试正在运行的守护进程

> ID：16169022
> 
> 赞同：8
> 
> 时间：2013-04-23T12:10:03.037
> 
> 标签：c, linux, gdb, daemon

我正在开发一个作为守护进程运行的高流量网络 C 服务器应用程序。在某些情况下，应用程序崩溃（总是没有核心）。如何使用 gdb 调试正在运行的守护程序以找到生成 SIGSEGV 的位置？

解释性说明：

1.  我知道如何使用附加命令使用 gdb 附加到正在运行的进程

2.  附加到进程后，它会停止。如果我运行然后“继续”，如果程序没有崩溃，gdb 将保持阻塞状态。如果我按 CTRL-C，进程将退出，我无法简单地分离 gdb。

所以问题是：有没有办法在不卡住gdb但如果进程没有崩溃时能够分离的情况下继续进程？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T14:20:27.243

尝试异步模式和“ **continue &** ”：

将下面保存到**non-stop.gdb**

```
set target-async on
set pagination off
set non-stop on 
```

然后运行：

```
$ gdb -x non-top.gdb
(gdb) !pgrep YOUR-DAEMON
1234
(gdb) attach 1234
(gdb) continue -a &
(gdb) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T12:18:27.787

此页面[附加/分离](http://www.delorie.com/gnu/docs/gdb/gdb_23.html)说该`detach`命令将在`gdb`.

如果要捕获应用程序中的分段错误，则必须从调试器运行应用程序。然后，当信号被捕获时，您可以使用`where`或`bt` 查看应用程序的堆栈跟踪。应用程序出现故障后当然不能继续使用了，应该如何恢复呢？如果您希望很快触发故障，您可以附加到正在运行的进程并再次在调试器中等待故障。

如果您想要在故障发生后进行堆栈跟踪，那么您确实需要一个核心文件，因为没有进程可以附加到。现在，如果您的守护程序作为系统的一部分启动，则可能很难获得转储核心的配置，而且您可能不希望其他应用程序在所有地方留下核心转储。因此，我建议停止系统守护程序并在您的用户空间中重新启动它，然后您可以允许它转储核心。如果它作为系统的一部分启动确实很重要，那么查看守护程序的启动是否仅限于单个子 shell 并`ulimit -c`在该子 shell 中使用为核心转储设置适当的最大大小.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-23T08:01:26.527

调试应用程序的另一种方法是使用核心文件进行 GDB 调试。

要在分段发生时生成核心文件，您可以按照以下步骤操作：

1) 将以下参数复制到运行守护程序的脚本中。

```
ulimit -c unlimited
mkdir -p <path_to_core_file>, eg : /etc/user/ankit/corefiles
chmod 777 /etc/user/ankit/corefiles
echo "/etc/user/ankit/corefiles/%e.%s.core" > /proc/sys/kernel/core_pattern 
```

2) 使用脚本运行您的应用程序并等待创建核心转储文件。获得核心转储后，您可以按照上述步骤使用 gdb 进行调试。

3) 使用 GDB 获取回溯

```
gdb -c <core_file>, where core_file is the file generated after segmentation fault 
```

4）回溯

接下来，我们想知道程序崩溃时堆栈是什么。在 gdb 提示符下运行 bt 会给你一个回溯。如果 gdb 没有为二进制加载符号，那么它会抛出一个带有问号的错误，类似于这个“??????”。要解决此问题，您必须加载符号。

这是加载调试符号的方法。

```
symbol-file /path/to/binary
sharedlibrary 
```

5) 获取所有线程的 backTrace

```
thread apply all bt full 
```

**注意：确保使用调试符号编译二进制文件。**

# c++ - C++ 函数参数，int 短

> ID：16169025
> 
> 赞同：3
> 
> 时间：2013-04-23T12:10:11.040
> 
> 标签：c++

当我在我的程序中只使用短整数时，最好使用：

```
void printVars(int x1, int x2, int x3) 
```

或者

```
void printVars(short int x1, short int x2, short int x3) 
```

作为我的功能的论据？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T12:12:44.260

如果您 100% 确定您永远不会使用比 short int 更大的整数，那么最好使用它，因为它可以节省 2 个字节（在大多数情况下，在大多数系统上，但不一定）。不使用比您需要的更多的资源确实总是一个好主意。不过，对于 mot 应用程序，差异可能可以忽略不计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:14:32.153

如果您想强调允许的值范围，我更喜欢`short int`. 这样可以节省空间，并且可以清楚/更好地阅读允许的值。

`int`在性能方面可能会更好，但我不会指望这一点。

我的建议：如果您确定这`short int`是具有最佳匹配范围的类型，请使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T12:15:04.040

我会使用`short`这样你的代码更加一致。另外最好做一个`typedef`，以防您将来想更改您的类型。只需`typedef short int Short`在您的程序中制作和使用它。稍后您将能够`Short`在一个地方更改类型

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T12:15:32.780

与参数有关的最重要的事情是传达您的函数需要什么作为输入以及将产生什么作为输出。如果您的函数仅适用于 short 范围内的数字，请使用`short`您的类型。你要问的是，如果你允许数字大于 short 的最大值会发生什么？这是一个错误吗？

传递空头或整数的性能影响可能可以忽略不计或不存在。除非它成为问题，否则不要担心性能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T12:12:42.383

如果你只使用`short`s 那么传递`short`函数参数是没有害处的，因为你不会丢失任何东西，但是使用 s 根本不会在内存占用或性能方面节省太多`short`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-06T15:40:44.470

这个问题只能通过在您要运行的计算机上运行测试来真正回答。

在我的现代 Intel Ubuntu (2017) 上，速度差异在噪音中有所下降。将短裤推入堆栈似乎比将整数推入堆栈快 1%，+/- 约 1%。

大部分加速将来自将你的内存减半，这将节省那些大数据/神经网络处理程序的页面交换。

# python - 强制转换为 Unicode：需要字符串或缓冲区，在 django admin 中渲染时发现 NoneType

> ID：16169035
> 
> 赞同：58
> 
> 时间：2013-04-23T12:10:54.573
> 
> 标签：python, django, django-admin

很长一段时间以来我都有这个错误，但无法弄清楚：

**渲染时捕获 TypeError：强制转换为 Unicode：需要字符串或缓冲区，找到 NoneType**

当我尝试在我的一个模型上添加或修改时，它会在管理员中发生（显示工作正常）

这是模型：

```
class PS(models.Model):
    id_ps = models.IntegerField(null=True)
    client = models.ForeignKey(Client, null=True, blank=True)
    nom_du_site = models.CharField(max_length=250)
    rue_livraison = models.TextField(null=True)
    complement_adresse = models.TextField(null=True)
    code_postal_livraison = models.CharField(max_length=50, null=True)
    ville_livraison = models.CharField(max_length=200, null=True)
    pays_livraison = models.CharField(max_length=200, null=True)
    distributeur = models.CharField(max_length=50, null=True)
    tarif = models.CharField(max_length=250, null=True)
    type_tarif = models.CharField(max_length=50, null=True)
    type_installation = models.CharField(max_length=50, null=True)

    def __unicode__(self):
        return self.nom_du_site

    @property
    def pce(self):        
        try:
            return PCE.objects.filter(ps=self)[0]
        except IndexError:
            return
    #    
    def get_pce(self):
        from pce.models import PCE
        return PCE.objects.filter(ps=self).exclude(frequence='6M')
    #
    def get_pce_6m(self):
        from pce.models import PCE
        return PCE.objects.filter(ps=self,frequence='6M') 
```

知道我在这里做错了什么吗？

**追溯：**

```
 Environment:

    Request Method: GET
    Request URL: http://127.0.0.1:8026/admin/ps/ps/add/
    Django Version: 1.2.5
    Python Version: 2.7.2
    Installed Applications:
    ['django.contrib.auth',
     'django.contrib.contenttypes',
     'django.contrib.sessions',
     'django.contrib.sites',
     'django.contrib.messages',
     'django.contrib.admin',
     'easy_thumbnails',
     'django_extensions',
     'contentadmin',
     'south',
     'sentry',
     'sentry.client',
     'indexer',
     'file_uploader',
     'paging',
     'pagination',
     'consommation',
     'ps',
     'pce',
     'profil',
     'analytics',
     'document']
    Installed Middleware:
    ('annoying.middlewares.StaticServe',
     'django.middleware.common.CommonMiddleware',
     'django.contrib.sessions.middleware.SessionMiddleware',
     'django.middleware.csrf.CsrfViewMiddleware',
     'django.contrib.auth.middleware.AuthenticationMiddleware',
     'django.contrib.messages.middleware.MessageMiddleware',
     'pagination.middleware.PaginationMiddleware')

    Template error:
    In template /usr/local/lib/python2.7/dist-packages/django/contrib/admin/templates/admin/includes/fieldset.html, error at line 19
       Caught TypeError while rendering: coercing to Unicode: need string or buffer, NoneType found
       9 :             {% for field in line %}

       10 :                 <div{% if not line.fields|length_is:'1' %} class="field-box{% if not field.is_readonly and field.errors %} errors{% endif %}"{% endif %}>

       11 :                     {% if not line.fields|length_is:'1' and not field.is_readonly %}{{ field.errors }}{% endif %}

       12 :                     {% if field.is_checkbox %}

       13 :                         {{ field.field }}{{ field.label_tag }}

       14 :                     {% else %}

       15 :                         {{ field.label_tag }}

       16 :                         {% if field.is_readonly %}

       17 :                             <p>{{ field.contents }}</p>

       18 :                         {% else %}

       19 :                              {{ field.field }} 

       20 :                         {% endif %}

       21 :                     {% endif %}

       22 :                     {% if field.field.field.help_text %}

       23 :                         <p class="help">{{ field.field.field.help_text|safe }}</p>

       24 :                     {% endif %}

       25 :                 </div>

       26 :             {% endfor %}

       27 :         </div>

       28 :     {% endfor %}

       29 : </fieldset>

    Traceback:
    File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response
      100\.                     response = callback(request, *callback_args, **callback_kwargs)
    File "/usr/local/lib/python2.7/dist-packages/django/contrib/admin/options.py" in wrapper
      288\.                 return self.admin_site.admin_view(view)(*args, **kwargs)
    File "/usr/local/lib/python2.7/dist-packages/django/utils/decorators.py" in _wrapped_view
      76\.                     response = view_func(request, *args, **kwargs)
    File "/usr/local/lib/python2.7/dist-packages/django/views/decorators/cache.py" in _wrapped_view_func
      78\.         response = view_func(request, *args, **kwargs)
    File "/usr/local/lib/python2.7/dist-packages/django/contrib/admin/sites.py" in inner
      190\.             return view(request, *args, **kwargs)
    File "/usr/local/lib/python2.7/dist-packages/django/utils/decorators.py" in _wrapper
      21\.             return decorator(bound_func)(*args, **kwargs)
    File "/usr/local/lib/python2.7/dist-packages/django/utils/decorators.py" in _wrapped_view
      76\.                     response = view_func(request, *args, **kwargs)
    File "/usr/local/lib/python2.7/dist-packages/django/utils/decorators.py" in bound_func
      17\.                 return func(self, *args2, **kwargs2)
    File "/usr/local/lib/python2.7/dist-packages/django/db/transaction.py" in _commit_on_success
      299\.                     res = func(*args, **kw)
    File "/usr/local/lib/python2.7/dist-packages/django/contrib/admin/options.py" in add_view
      909\.         return self.render_change_form(request, context, form_url=form_url, add=True)
    File "/usr/local/lib/python2.7/dist-packages/django/contrib/admin/options.py" in render_change_form
      692\.         ], context, context_instance=context_instance)
    File "/usr/local/lib/python2.7/dist-packages/django/shortcuts/__init__.py" in render_to_response
      20\.     return HttpResponse(loader.render_to_string(*args, **kwargs), **httpresponse_kwargs)
    File "/usr/local/lib/python2.7/dist-packages/django/template/loader.py" in render_to_string
      186\.     return t.render(context_instance)
    File "/usr/local/lib/python2.7/dist-packages/django/template/__init__.py" in render
      173\.             return self._render(context)
    File "/usr/local/lib/python2.7/dist-packages/django/template/__init__.py" in _render
      167\.         return self.nodelist.render(context)
    File "/usr/local/lib/python2.7/dist-packages/django/template/__init__.py" in render
      796\.                 bits.append(self.render_node(node, context))
    File "/usr/local/lib/python2.7/dist-packages/django/template/debug.py" in render_node
      72\.             result = node.render(context)
    File "/usr/local/lib/python2.7/dist-packages/django/template/loader_tags.py" in render
      125\.         return compiled_parent._render(context)
    File "/usr/local/lib/python2.7/dist-packages/django/template/__init__.py" in _render
      167\.         return self.nodelist.render(context)
    File "/usr/local/lib/python2.7/dist-packages/django/template/__init__.py" in render
      796\.                 bits.append(self.render_node(node, context))
    File "/usr/local/lib/python2.7/dist-packages/django/template/debug.py" in render_node
      72\.             result = node.render(context)
    File "/usr/local/lib/python2.7/dist-packages/django/template/loader_tags.py" in render
      125\.         return compiled_parent._render(context)
    File "/usr/local/lib/python2.7/dist-packages/django/template/__init__.py" in _render
      167\.         return self.nodelist.render(context)
    File "/usr/local/lib/python2.7/dist-packages/django/template/__init__.py" in render
      796\.                 bits.append(self.render_node(node, context))
    File "/usr/local/lib/python2.7/dist-packages/django/template/debug.py" in render_node
      72\.             result = node.render(context)
    File "/usr/local/lib/python2.7/dist-packages/django/template/loader_tags.py" in render
      62\.             result = block.nodelist.render(context)
    File "/usr/local/lib/python2.7/dist-packages/django/template/__init__.py" in render
      796\.                 bits.append(self.render_node(node, context))
    File "/usr/local/lib/python2.7/dist-packages/django/template/debug.py" in render_node
      72\.             result = node.render(context)
    File "/usr/local/lib/python2.7/dist-packages/django/template/defaulttags.py" in render
      174\.                 nodelist.append(node.render(context))
    File "/usr/local/lib/python2.7/dist-packages/django/template/loader_tags.py" in render
      139\.             return self.template.render(context)
    File "/usr/local/lib/python2.7/dist-packages/django/template/__init__.py" in render
      173\.             return self._render(context)
    File "/usr/local/lib/python2.7/dist-packages/django/template/__init__.py" in _render
      167\.         return self.nodelist.render(context)
    File "/usr/local/lib/python2.7/dist-packages/django/template/__init__.py" in render
      796\.                 bits.append(self.render_node(node, context))
    File "/usr/local/lib/python2.7/dist-packages/django/template/debug.py" in render_node
      72\.             result = node.render(context)
    File "/usr/local/lib/python2.7/dist-packages/django/template/defaulttags.py" in render
      174\.                 nodelist.append(node.render(context))
    File "/usr/local/lib/python2.7/dist-packages/django/template/defaulttags.py" in render
      174\.                 nodelist.append(node.render(context))
    File "/usr/local/lib/python2.7/dist-packages/django/template/defaulttags.py" in render
      260\.             return self.nodelist_false.render(context)
    File "/usr/local/lib/python2.7/dist-packages/django/template/__init__.py" in render
      796\.                 bits.append(self.render_node(node, context))
    File "/usr/local/lib/python2.7/dist-packages/django/template/debug.py" in render_node
      72\.             result = node.render(context)
    File "/usr/local/lib/python2.7/dist-packages/django/template/defaulttags.py" in render
      260\.             return self.nodelist_false.render(context)
    File "/usr/local/lib/python2.7/dist-packages/django/template/__init__.py" in render
      796\.                 bits.append(self.render_node(node, context))
    File "/usr/local/lib/python2.7/dist-packages/django/template/debug.py" in render_node
      72\.             result = node.render(context)
    File "/usr/local/lib/python2.7/dist-packages/django/template/debug.py" in render
      91\.             output = force_unicode(output)
    File "/usr/local/lib/python2.7/dist-packages/django/utils/encoding.py" in force_unicode
      66\.                 s = unicode(s)
    File "/usr/local/lib/python2.7/dist-packages/django/forms/forms.py" in __unicode__
      408\.         return self.as_widget()
    File "/usr/local/lib/python2.7/dist-packages/django/forms/forms.py" in as_widget
      450\.         return widget.render(name, data, attrs=attrs)
    File "/usr/local/lib/python2.7/dist-packages/django/contrib/admin/widgets.py" in render
      247\.         output = [self.widget.render(name, value, *args, **kwargs)]
    File "/usr/local/lib/python2.7/dist-packages/django/forms/widgets.py" in render
      447\.         options = self.render_options(choices, [value])
    File "/usr/local/lib/python2.7/dist-packages/django/forms/widgets.py" in render_options
      464\.         for option_value, option_label in chain(self.choices, choices):
    File "/usr/local/lib/python2.7/dist-packages/django/forms/models.py" in __iter__
      898\.                 yield self.choice(obj)
    File "/usr/local/lib/python2.7/dist-packages/django/forms/models.py" in choice
      904\.         return (self.field.prepare_value(obj), self.field.label_from_instance(obj))
    File "/usr/local/lib/python2.7/dist-packages/django/forms/models.py" in label_from_instance
      955\.         return smart_unicode(obj)
    File "/usr/local/lib/python2.7/dist-packages/django/utils/encoding.py" in smart_unicode
      39\.     return force_unicode(s, encoding, strings_only, errors)
    File "/usr/local/lib/python2.7/dist-packages/django/utils/encoding.py" in force_unicode
      66\.                 s = unicode(s)

    Exception Type: TemplateSyntaxError at /admin/ps/ps/add/
    Exception Value: Caught TypeError while rendering: coercing to Unicode: need string or buffer, NoneType found 
```

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-06-19T04:36:49.693

当您有`__unicode__`一个返回未输入字段的方法时，会发生此错误。任何空白字段都是`None`并且 Python 无法转换`None`，因此您会收到错误消息。

在您的情况下，问题很可能出在`PCE`模型的`__unicode__`方法上，特别是其返回的字段。

您可以通过返回默认值来防止这种情况：

```
def __unicode__(self):
   return self.some_field or u'None' 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-12-02T19:23:11.900

当您在`__unicode__`方法中返回对象而不是字符串时，可能会发生此错误。例如：

```
class Author(models.Model):
    . . . 
    name = models.CharField(...)

class Book(models.Model):
    . . .
    author = models.ForeignKey(Author, ...)
    . . .
    def __unicode__(self):
        return self.author  # <<<<<<<< this causes problems 
```

为避免此错误，您可以将作者实例转换为 unicode：

```
class Book(models.Model):
    . . . 
    def __unicode__(self):
        return unicode(self.author)  # <<<<<<<< this is OK 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-02T23:54:20.107

在我的情况下，它是另外一回事：我要保存的对象首先应该有一个 id（例如 save() 应该被调用），然后我才能与它设置任何类型的关系。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-20T04:47:25.637

返回值 def __unicode __ 应该与相关模型（表）的返回值相似，以便在 django 管理面板中正确查看“some_field”。您还可以使用：

```
def __str__(self):
    return self.some_field 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-28T17:34:41.263

用提供的函数替换较早的函数。最简单的解决方案是：

```
def __unicode__(self):

    return unicode(self.nom_du_site) 
```

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2013-06-19T04:14:41.443

首先，检查您通过**unicode**返回的内容是否为字符串。

如果它不是字符串，您可以将其更改为这样的字符串（其中 self.id 是整数）

```
def __unicode__(self):
    return '%s' % self.id 
```

之后，如果它仍然不起作用，请重新启动您的 ./manage.py shell 以使更改生效并重试。它应该工作。

最好的祝福

# android - 电话号码未显示

> ID：16169039
> 
> 赞同：0
> 
> 时间：2013-04-23T12:11:07.593
> 
> 标签：android, android-activity, telephonymanager

我已经编写了一个简单的 android 应用程序来获取电话号码......这个应用程序在 Android 模拟器中运行......但它不能在 Android 手机中运行（在三星 Galaxy s3 和三星 ace 中）。

这是源代码。

PhoneNumberActivity.java

```
public class PhoneNumberActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_phone_number);

        final TelephonyManager telephonyManager = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
        telephonyManager.getLine1Number();

        final Button button = (Button) findViewById(R.id.button1);
        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View view) {

                TextView  textView = (TextView) findViewById(R.id.phoneNumber);
                textView.setText("Phone Number is :- "+telephonyManager.getLine1Number());
                button.setVisibility(Button.INVISIBLE);
                textView.setVisibility(TextView.VISIBLE);
            }
        });
    }
} 
```

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.pervazive.phonenumber"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.phonenumber.PhoneNumberActivity"
            android:configChanges="orientation|keyboardHidden|screenSize"
            android:label="@string/app_name"
            android:theme="@style/FullscreenTheme" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
 </manifest> 
```

请让我知道有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:16:17.727

根据文档`.getLine1Number()`“返回第 1 行的电话号码字符串，例如，**GSM电话的****MSISDN**。如果不可用，则返回 null。”

 **显然`.getLine1Number()`是从 SIM 卡中读取此信息，因此如果运营商设置了 MSISDN 字段，它将返回其值，如果他们没有设置此字段，则返回 null。

在您的情况下，您的 SIM 卡可能没有由运营商填充此字段。

欲了解更多信息，您可以[访问此](https://stackoverflow.com/a/5134725/1218762)。

我从[这里](https://stackoverflow.com/a/5134725/1218762)得到这个。**

# c# - 使用 JSON.NET 反序列化长 JSON 字符串的问题

> ID：16169051
> 
> 赞同：0
> 
> 时间：2013-04-23T12:11:38.910
> 
> 标签：c#, .net, json, windows-phone, json.net

我正在为我的应用程序构建一个缓存系统，它将所有接收到的 JSON 数据保存在一个 `Dictionary<string, CacheWrapper>`对象中，其中键（字符串）是请求数据的 REST-url（即 www.dataapi.com/events/28127.json）

`CacheWrapper`班级：

```
class CacheWrapper {
  object cachedObject { get; set; }
  DateTime expires { get; set; }
  public isValid() { /*...*/ }
} 
```

当应用程序关闭时，这个（可能）非常大的数据结构会使用 JSON.net 序列化并写入文件。**这一切都很好。**问题出现在使用几天后，当用户积累了大量数据（比如 2-3 MB 的 JSON 数据）。当我尝试反序列化它时，JSON.net 抛出一个`JsonReaderException`- 我怀疑这是因为它的大小。对于较少量的数据，这工作得很好。

给定的 JSON 字符串的大小是否有任何限制`JsonConvert.DeserializeObject<T>(json)`？会不会有其他原因？据我所知，生成的 JSON 是有效的（我在大约 1.5 mb 的数据上对其进行了测试，并且通过了验证器）。

**更新：**

我试图尽可能多地滥用我的应用程序，最终得到了一个 600 万个字符串的 JSON (~12 mb)。出于某种原因，这很好用。所以尺寸似乎不是问题。我`JsonReaderException`之前提到过在 JSON 的反序列化过程中存在一个问题（可能是非法的 json ......），但这本身就很奇怪，因为我使用 JSON.net 来对这些数据进行序列化和反序列化。这越来越奇怪了。我将全天继续测试并在这里提及我的发现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:26:21.813

尝试使用[.NET DataContractJsonSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx)
它更加灵活和强大，并且允许您使用流（如果可用）。

# qt - 从 qwebview 生成 PDF 不包括图像

> ID：16169054
> 
> 赞同：4
> 
> 时间：2013-04-23T12:11:53.783
> 
> 标签：qt

我正在从 QWebView 创建 pdf 文件。

```
class myView: public QWebView
{
} 
```

成员函数之一具有：

```
 this->settings()->setAttribute(QWebSettings::PrintElementBackgrounds, true);
 QPrinter printer;
 printer.setOutputFormat(QPrinter::PdfFormat);
 printer.setResolution(QPrinter::HighResolution);
 printer.setOutputFileName("whoami.pdf");
 print(&printer); 
```

我看到生成了 pdf 文件，但是 html 文件中的图片很少，没有出现在 pdf 中，它是空白的。

上网并没有太大帮助，我还启用了 WebSetting，例如：

```
 this->settings()->setAttribute(QWebSettings::PrintElementBackgrounds, true); 
```

有人可以建议我缺少什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-12T09:38:54.383

你应该先告诉打印等待告诉页面完成加载所以你应该

1.  将此添加到您的代码中：

    ```
    connect(&document, SIGNAL(loadFinished(bool)), SLOT(printpdf())); 
    ```

其中 document 是您的 qwebview 变量；

2.  然后你创建你的私人插槽：

    ```
    printpdf(); 
    ```

在这个函数中，你应该调用打印机和 print(&printer);

**不要忘记**，在您的 html 中，您应该在 scr 中添加 file:///

例子

```
<img src="file:///c:/image.jpg" /> 
```

# php - 使用 Google 地图 api 查看空白页面

> ID：16169073
> 
> 赞同：-1
> 
> 时间：2013-04-23T12:12:53.097
> 
> 标签：php, javascript, google-maps-api-3

根据下面的链接，我试图让用户能够单击地图以指定位置的谷歌地图，但我只看到一个空白屏幕： [https ://developers.google.com/maps/articles/phpsqlinfo_v3](https://developers.google.com/maps/articles/phpsqlinfo_v3)

我根据此处的链接进行了一些更改，但没有更改： [google maps v3 的 webview 显示空白屏幕](https://stackoverflow.com/questions/15046734/webview-for-google-maps-v3-shows-blank-screen)

来自 Google Chrome 控制台的错误如下： Uncaught SyntaxError: Unexpected token < phpsqlinfo_add.html:33 Uncaught ReferenceError: initialize is not defined phpsqlinfo_add.html:123

代码中突出显示的适当行：

```
<!DOCTYPE html>
<!--
 Copyright 2008 Google Inc.
 Licensed under the Apache License, Version 2.0:
 http://www.apache.org/licenses/LICENSE-2.0
 -->
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>Saving User-Added Form Data Example</title>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">
    var marker;
    var infowindow;

    function initialize() {
      var latlng = new google.maps.LatLng(37.4419, -122.1419);
      var options = {
        zoom: 13,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      }

      google.maps.event.addDomListener(window, 'load', initialize);
      var map = new google.maps.Map(document.getElementById("map_canvas"), options);
      var html = "<table>" +
                 "<tr><td>Name:</td> <td><input type='text' id='name'/> </td> </tr>" +
                 "<tr><td>Email:</td> <td><input type='text' id='email'/></td> </tr>" +
                 "<tr><td>Phone:</td> <td><input type='text' id='phone'/></td> </tr>" +
                 "<tr><td>Town:</td> <td><input type='text' id='town'/></td> </tr>" +
                 "<tr><td>County:</td> <td><select id='county'>" +
                 **<option value='Outside Ireland' SELECTED>OutsideIreland</option> +**
                 <option value='Antrim' SELECTED>Antrim</option> +
                 <option value='Armagh' SELECTED>Armagh</option> +
                 <option value='Carlow' SELECTED>Carlow</option> +
                 <option value='Cavan' SELECTED>Cavan</option> +
                 <option value='Clare' SELECTED>Clare</option> +
                 <option value='Cork' SELECTED>Cork</option> +
                 <option value='Derry' SELECTED>Derry</option> +
                 <option value='Donegal' SELECTED>Donegal</option> +
                 <option value='Down' SELECTED>Down</option> +
                 <option value='Dublin' SELECTED>Dublin</option> +
                 <option value='Fermanagh' SELECTED>Fermanagh</option> +
                 <option value='Galway' SELECTED>Galway</option> +
                 <option value='Kerry' SELECTED>Kerry</option> +
                 <option value='Kildare' SELECTED>Kildare</option> +
                 <option value='Kilkenny' SELECTED>Kilkenny</option> +
                 <option value='Laois' SELECTED>Laois</option> +
                 <option value='Leitrim' SELECTED>Leitrim</option> +
                 <option value='Limerick' SELECTED>Limerick</option> +
                 <option value='Longford' SELECTED>Longford</option> +
                 <option value='Louth' SELECTED>Louth</option> +
                 <option value='Mayo' SELECTED>Mayo</option> +
                 <option value='Meath' SELECTED>Meath</option> +
                 <option value='Monaghan' SELECTED>Monaghan</option> +
                 <option value='Offaly' SELECTED>Offaly</option> +
                 <option value='Roscommon' SELECTED>Roscommon</option> +
                 <option value='Sligo' SELECTED>Sligo</option> +
                 <option value='Tipperary' SELECTED>Tipperary</option> +
                 <option value='Tyrone' SELECTED>Tyrone</option> +
                 <option value='Waterford' SELECTED>Waterford</option> +
                 <option value='Westmeath' SELECTED>Westmeath</option> +
                 <option value='Wexford' SELECTED>Wexford</option> +
                 <option value='Wicklow' SELECTED>Wicklow</option> +
                 "</select> </td></tr>" +
                 "<tr><td>Name of Location:</td> <td><input type='text' id='location'/></td> </tr>" +
                 "<tr><td></td><td><input type='button' value='Save & Close' onclick='saveData()'/></td></tr>";

    infowindow = new google.maps.InfoWindow({
     content: html
    });

    google.maps.event.addListener(map, "click", function(event) {
        marker = new google.maps.Marker({
          position: event.latLng,
          map: map
        });
        google.maps.event.addListener(marker, "click", function() {
          infowindow.open(map, marker);
        });
    });
    }

    function saveData() {
      var name = escape(document.getElementById("name").value);
      var address = escape(document.getElementById("address").value);
      var type = document.getElementById("type").value;
      var latlng = marker.getPosition();

      var url = "phpsqlinfo_addrow.php?name=" + name + "&address=" + address +
                "&type=" + type + "&lat=" + latlng.lat() + "&lng=" + latlng.lng();
      downloadUrl(url, function(data, responseCode) {
        if (responseCode == 200 && data.length <= 1) {
          infowindow.close();
          document.getElementById("message").innerHTML = "Location added.";
        }
      });
    }

    function downloadUrl(url, callback) {
      var request = window.ActiveXObject ?
          new ActiveXObject('Microsoft.XMLHTTP') :
          new XMLHttpRequest;

      request.onreadystatechange = function() {
        if (request.readyState == 4) {
          request.onreadystatechange = doNothing;
          callback(request.responseText, request.status);
        }
      };

      request.open('GET', url, true);
      request.send(null);
    }

    function doNothing() {}
    </script>
  </head>

  <body>
  <div id="map_canvas" style="height: 100px; width=100px;"></div>
  **<script type="text/javascript">initialize();</script>**
</body>
  <!-- Commenting out line to edit suggestion from stackoverflow
  <body style="margin:0px; padding:0px;" onload="initialize()">
    <div id="map_canvas" style="width: 500px; height: 300px"></div>
    <div id="message"></div>
  </body> -->
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:23:32.030

您从这里开始的语法无效：

`**<option value='Outside Ireland' SELECTED>OutsideIreland</option> +**`

看起来您正在尝试`options`使用 javascript concatenating syntax连接所有的`+`。如果你走这条路，那么你需要在所有`options`.

另一种方法是删除所有的，只在字符串`+`的开头和结尾使用双引号。`html var`

# ruby-on-rails-3 - 哪些用户登录了 rails3

> ID：16169075
> 
> 赞同：0
> 
> 时间：2013-04-23T12:12:59.177
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2

我有两种类型的用户：

1.  普通用户
2.  管理员

我的要求是管理员可以跟踪所有用户的活动，例如谁正在登录，如果他想注销用户个人资料，那么他可以轻松注销。但我不知道如何查找用户登录活动或他最后一次见面的时间。

我用这个“ [https://github.com/ctide/devise_lastseenable](https://github.com/ctide/devise_lastseenable) ”最后一次看到但没有得到任何结论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:02:59.160

或者从这些[https://www.ruby-toolbox.com/categories/rails_authorization](https://www.ruby-toolbox.com/categories/rails_authorization)中选择一个。我会推荐[https://github.com/ryanb/cancan](https://github.com/ryanb/cancan)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:31:01.763

我猜你在看什么，[https://github.com/sferik/rails_admin](https://github.com/sferik/rails_admin)

# yii - 在 Yii 框架中记录用户活动并回滚

> ID：16169076
> 
> 赞同：0
> 
> 时间：2013-04-23T12:13:00.353
> 
> 标签：yii, yii-extensions, yii-components

我将 Yii 框架用于其中一个内部应用程序。我有不同级别的用户，例如管理员、超级管理员。

在我的应用程序中，超级管理员需要跟踪所有管理员用户数据库活动（插入、更新和删除），并且他们还可以回滚特定活动（例如：更新客户的名字。在回滚时，应该保留旧名字）。

我做了一些研究，但我找不到解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:33:07.237

我创建了一个扩展，让您跟踪为活动记录模型创建的所有版本。这是一个小例子：

```
book = new Book;
$book->title = 'The correctio';
$book->author = 'Jonathan Franzen';
$book->save();
echo $book->version; //1
$book->title = 'The corrections';
$book->save();
echo $book->version; //2

$book->toVersion(1);
echo $book->title; //'The correctio'
// saving a previous version creates a new one
$book->save();
echo $book->version; // 3 
```

要知道谁保存了模型：

```
echo $book->versionCreatedBy; //"John Doe";
echo $book->versionComment; //"Creation of the book in the db";
echo $book->createdTime; // 11/10/2009 
```

*   [http://www.yiiframework.com/extension/model-versioning/](http://www.yiiframework.com/extension/model-versioning/)
*   [https://github.com/Darkheir/SAModelVersioning](https://github.com/Darkheir/SAModelVersioning)

# sql - 透视查询 SQL Server

> ID：16169077
> 
> 赞同：0
> 
> 时间：2013-04-23T12:13:04.730
> 
> 标签：sql, dynamic, pivot

如何创建动态数据透视表，动态参数是一个月中的日期（例如月份 = 一月，数据透视值日期是从 1 到 31）

我只能进行这样的非动态查询：

```
 SELECT
        *
    FROM
        (
            SELECT
                CollectorName,
                CountTask,
                dayTask,
                monthTask
            FROM
                #tempHistLoad
        ) DATA
        PIVOT
        (
            SUM(DATA.CountTask)
        FOR
            dayTask
            IN
            (
                [1],[2],[3],[4],[5]
            )
        ) PVT 
```

如何在数据透视表中创建动态列（日期从 1 到月底）？

# java - 如何在jsp页面中打印java字符串数组。？

> ID：16169086
> 
> 赞同：2
> 
> 时间：2013-04-23T12:13:25.520
> 
> 标签：java, arrays, jsp

您好，我是 jsp 的新手，我想将我的 Java 文件字符串数组打印到我的 jsp 页面如何在网页中打印告诉我.. 我不知道该怎么做。

```
while(rs.next()){
    count++;            
    anArray[i]=rs.getString("subject");         
    System.out.println(anArray[i]);
    i++;    
}
while(rs1.next()){   
    anArray[i]=rs1.getString("subject");            
    System.out.println(anArray[i]);         
    i++;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T12:23:34.697

假设您提供的内容是您想要在 JSP 中执行的操作的示例，那么执行您想要执行的操作的最简单方法是使用[JSTL forEach](http://www.tutorialspoint.com/jsp/jstl_core_foreach_tag.htm)。

```
<c:forEach items="${yourArray}" var="myItem" varStatus="myItemStat">
  yourArray[${myItemStat.index}] = ${myItem}
</c:forEach> 
```

这假定您已将“yourArray”传递给 JSP。网上有很多关于如何做这一切的教程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T12:20:59.050

在jsp页面中你可以使用这个：

```
<%  
while(rs.next()){
    count++;            
    anArray[i]=rs.getString("subject");         
    out.println(anArray[i]);
    i++;    
}
while(rs1.next()){   
    anArray[i]=rs1.getString("subject");            
    out.println(anArray[i]);         
    i++;
}
%> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T12:30:52.000

据我了解，您正在控制台中进行输出，并且您正在尝试在浏览器中打印它。

在浏览器中获取输出

只是页面`import`中的java类`JSP`

在标签（<%..%>）之间的JSP页面中，由java类对象在浏览器中打印，

```
<%@page import="pack.sample"%>
<%
//In scriplets
Sample obj=new Sample();
String str[]=obj.printMe();//Here printMe() is a fn from Sample class which will return string array

//Now here do all stuffs with str[]
//out.println(str[0]);//It will return zeroth value of str[] in your browser
 %> 
```

# c# - 实体框架生成不适当的查询

> ID：16169087
> 
> 赞同：1
> 
> 时间：2013-04-23T12:13:27.803
> 
> 标签：c#, .net, linq, entity-framework, entity-framework-4

我正在使用 EntityFramework 4。我遇到了实体框架的奇怪问题，代码如下：

```
public void UpdateLink(Link link)
{
     Link existing = ObjectContext
                    .Link
                    .FirstOrDefault(p => p.ItemLeft == link.ItemLeft 
                                      && p.ItemRight == link.ItemRight 
                                      && p.DeleteTime == null);

    if (existing != null)
    {
        existing.DeleteTime = link.DeleteTime;
    }

    ObjectContext.SaveChanges();
} 
```

假设找到现有项目并为此项目设置 DeleteTime。（如果声明通过）

然后，当调用 SaveChanges 时，我得到查询（使用 sql profiler），它更新了 ItemLeft 为 X 且 ItemRight 为 Y 的所有记录。实际上它忽略了 DeleteTime = null 条件......

看起来像这样：

```
exec sp_executesql N'update [Link] set [DeleteTime] = @0
where (([ItemLeft] = @1) and ([ItemRight] = @2))
',N'@0 datetime,@1 int,@2 int',@0='2013-04-23 14:58:21.853',@1=857,@2=872 
```

表结构：

```
ID [PK]
(index)LeftItem int
(index)RightItem int
(index)DeleteTime datetime? 
```

我错过了什么？请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:29:19.110

理论上，生成的更新基于实体的主键。

因此，您的上下文实际上必须触发两个查询：

1.  A`SELECT TOP 1`与`WHERE`您给出的子句
2.  更新查询`WHERE Id = entity.Id`

生成的查询看起来很奇怪，所以主要问题肯定是您的表上没有定义主键。
另一个解决方案是你的数据库和你的 ObjectContext 之间的映射完全搞砸了。检查 Link 类的实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:38:43.773

感谢 Scorpi0 和 Maarten。当表不包含主键或上下文实体和数据库表之间存在一些主键差异时，可能会出现此类问题

# jquery - 使用jquery选择最近的锚元素

> ID：16169089
> 
> 赞同：3
> 
> 时间：2013-04-23T12:13:30.200
> 
> 标签：jquery

我有一个带有一个链接的表格，如下所示

```
 <td>
      <a href="#" class="topiclink">@item.Topic</a>
   </td> 
```

我想选择@item.topic 的数据。我尝试使用

```
 $('.topiclink').click(function (e) {
  var val = $(this).closest('a');
        alert(val)
    }); 
```

和许多其他人，但在这种情况下似乎没有任何效果。感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T12:15:37.047

你点击的已经是一个锚点，所以：

```
$('.topiclink').on('click', function (e) {
    var val = $(this).text();
    alert(val);
} 
```

我也在[`.text()`](http://api.jquery.com/text/)这里使用，因为`.val()`应该只用于 HTML 输入元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T12:15:58.867

```
var val = $(this).text(); 
```

足以让你

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T12:17:24.313

如果您试图在单击锚点或任何锚点时获取值“@item.Topic”，也就是说，您可以使用以下代码：

```
$('a').click( function () {
   console.log($(this).text());
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T12:25:02.613

您的代码中有很多错误！您的元素已经是一个“.topiclink”类，那么为什么要最接近的元素呢？只需使用 $(this) 即可访问您的元素。val() 不返回元素的 html，你应该使用 $(this).html();

```
 $('.topiclink').click(function (e) {
    alert($(this).html()); 
 } 
```

# c++ - Code:Blocks 是我的 IDE 如何使我的 C++ 可执行

> ID：16169095
> 
> 赞同：-1
> 
> 时间：2013-04-23T12:14:16.917
> 
> 标签：c++, colors, exe

好的，我见过类似的问题，但似乎没有一个是我想要的。我刚刚设计了一个简单的数学程序。没什么特别的，就是为了学习。。

回到主题，我如何使它可以从桌面执行？所以它就像 Code:Blocks 一样，我可以双击桌面上的图标，它会自行打开，而不是在 Code:Blocks 中。

另一个问题，有点离题，但你如何在程序中添加颜色和东西，而我的只是打开无聊的黑色 cmd 提示符。？

第一个问题是最重要的，但如果有人想回答最后一个问题，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:18:04.410

当您可以从 IDE 运行程序时，您就可以在项目附近的某处获得其可执行二进制文件。只需找到该`.exe`文件并将其（或快捷方式）复制到您的桌面即可。

要为您的控制台程序着色，请阅读此[基于文本的便携式控制台操纵器](https://stackoverflow.com/questions/7876241/portable-text-based-console-manipulator/7881314#7881314)。

# facebook-graph-api - 使用 FQL 查询获取页面的每个帖子的评论

> ID：16169101
> 
> 赞同：-1
> 
> 时间：2013-04-23T12:14:36.803
> 
> 标签：facebook-graph-api, facebook-javascript-sdk, facebook-fql

我正在尝试按照以下方式获取 Facebook 页面/群组/个人资料的每个帖子的评论 -

```
SELECT fromid, username, text, time, post_id FROM comment WHERE post_id in (SELECT post_id  
FROM stream 
WHERE source_id IN (
    SELECT page_id 
    FROM page 
    WHERE name='joomla'
) limit 3) 
```

但我没有看到任何数据。如何为那个plz帮助编写fql查询。如果我尝试单独获取帖子ID -

```
SELECT post_id  
FROM stream 
WHERE source_id IN (
      SELECT page_id 
      FROM page 
      WHERE name='joomla'
) 
```

它不会返回任何指定为“joomla”的页面名称不正确，但如果我使用名称作为“可口可乐”，则一切正常。那么通过 fql 查询获取 page_id 的正确方法是什么？我认为没有以这种方式获取 page_id，我的第一个查询不起作用。帮助专家...我还没有在任何地方找到解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T15:11:46.303

对于您的情况，请不要那样做

```
WHERE source_id IN (
    SELECT page_id 
    FROM page 
    WHERE name='joomla'
) 
```

你应该这样做（[http://developers.facebook.com/tools/explorer/?fql=%20SELECT%20name%2Cpage_id%20FROM%20page%20WHERE%20name%3D%22joomla%22](http://developers.facebook.com/tools/explorer/?fql=%20SELECT%20name%2Cpage_id%20FROM%20page%20WHERE%20name%3D%22joomla%22)）

```
 SELECT name,page_id FROM page WHERE name='joomla' 
```

从这个结果中提取特定的页面id，假设page_id是139664469820，那么你可以这样做

```
SELECT fromid, username, text, time, post_id FROM comment WHERE post_id in (SELECT post_id FROM stream WHERE source_id='139664469820' LIMIT 25) 
```

# c# - 检查 Treeview 是否有更改？

> ID：16169102
> 
> 赞同：2
> 
> 时间：2013-04-23T12:14:42.953
> 
> 标签：c#, winforms, .net-3.5, treeview

我有一个 winform，显示一个 Treeview 控件，每当 winform 打开时，就会填充一大堆节点。我的代码允许用户选择一个节点，然后打开一个小对话框，输入一个值，然后编辑节点的文本。

**当用户关闭表单时，是否可以检查整个树视图的更改？**

我正在考虑将所有节点汇总为一个字符串，然后在关闭表单时，将其再次汇总为一个新字符串并将其与之前制作的字符串进行比较，但我认为有更好的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:59:02.757

这是一个相当常见的谬误，TreeView（如 ListBox 和 ListView）没有通知节点集合已更改的事件。有一个很好的理由，用户自己不能做任何事情来添加或删除节点。只有*您的*代码才能做到这一点。你不可能不知道这一点。或者换一种说法，你不需要被通知你已经知道的事情。

如果你想要一个事件，那么你可以添加你自己的。并在您的代码更改节点集合时触发它。请注意，这是一种代码异味，您几乎总是希望在模型而不是视图上看到这种通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:22:12.097

如果您预先缓存节点，您可以检查`TreeView`所有更改，但我认为正确的方法是在更改发生时对其进行管理。例如，当打开编辑节点的表单时，您来自的表单是这样的：

```
private Form1 _f;

...

public Form2(Form1 f)
{
    this._f = f;
} 
```

然后是这样`override`的`OnClosing`方法`Form2`：

```
protected override void OnClosing(CancelEventArgs e)
{
    this._f.SetChangedNode(...);
} 
```

并`SetChangedNode`在`Form1`. 我不知道这些参数是什么样的，但它们可能类似于`TreeNode node, string newLabel`，然后您可以轻松地将这些值存储在 a 中`Dictionary<TreeNode, string>`，然后`Dictionary`在关闭应用程序时利用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T12:27:46.437

简短的回答：是的，这是可能的。

如果您坚持等待保存或注册更改直到应用程序关闭，您可以编写一个简单的递归函数来遍历当前版本（可能更改的工作内存）和旧版本（从您保存它的任何地方加载）。我将把实施留给你。无论如何，这里有一些灵感：

[http://en.wikipedia.org/wiki/Tree_traversal](http://en.wikipedia.org/wiki/Tree_traversal)

个人 id 考虑在按确定或保存关闭编辑表单时保存用户所做的任何更改。

# visual-studio-2008 - 为 c# 应用程序在桌面上创建的快捷方式添加图标

> ID：16169105
> 
> 赞同：0
> 
> 时间：2013-04-23T12:14:44.013
> 
> 标签：visual-studio-2008, installation, icons

我有一个 Windows C# 应用程序，我正在为它创建一个安装文件。问题是我在用户桌面上给我的快捷方式文件的图标在安装应用程序时没有出现。

请帮忙。

# jquery - jquery遍历表，为每一行和td连接值

> ID：16169109
> 
> 赞同：4
> 
> 时间：2013-04-23T12:15:02.703
> 
> 标签：jquery

我有一个有几行的表。每行都有一个产品字段、一个等级字段和一个家庭字段。

每个可用尺寸都有几个复选框。

表中的一行如下所示：

```
<table class="authors-list" border=0 id="ordertable">
 <tr>
     <td style="font-size:10px;"><a class="deleteRow"> <img src="<?php echo base_url() ?>application/assets/images/delete2.png" /></a></td>
     <td ><input type="text" id="product1" name="product1" class="rounded"/></td>
     <td ><input type="text" size='5' id="qty1" name="qty1" class="rounded"/></td> 
     <td class="tdcheckbox">
      <input type="checkbox"  id="h09_1" name="h09_1" class="rounded"/>
      <input type="text"  id="line_1_09" name="line_1_09" value="">
      <input type="text"  id="size_1_09" name="size_1_09" value="09">

    </td> 
     <td class="tdcheckbox">
      <input type="checkbox"  id="h12_1" name="h12_1" class="rounded"/>
      <input type="text"  id="line_1_12" name="line_1_12" value="">
      <input type="text"  id="size_1_12" name="size_1_12" value="12">
    </td> 
     <td class="tdcheckbox">
      <input type="checkbox"  id="h15_1" name="h15_1" class="rounded"/>
      <input type="text"  id="line_1_15" name="line_1_15" value="">
      <input type="text"  id="size_1_15" name="size_1_15" value="15">
    </td> 
    <td><input type="text" name="cubespercheck_1" id="cubespercheck_1" value="0" size=5></td>
    <td><input type="text" name="skufamily_1" id="skufamily_1"></td>
    <td><input type="text" name="skugrade_1" id="skugrade_1"></td>
 </tr>
</table>
<input type="button" id="continue" value="continue"> 
```

除产品字段外，所有字段都将隐藏在最终结果中。

给你一个背景，我的产品代码是这样的： 3811460S5 38114 是宽度和高度 60 是长度 Cr 是等级。

我想要发生的是，当我单击按钮时，jquery 必须遍历所有表格单元格。如果有一个 CHECKED 复选框并且产品已被填充，jquery 必须加入以下字段：skufamily(for row[skufamily])+length(from cell[size])+grade(from row[skugrade])

这个结果必须填充当前的 td 输入`line`。所以现在每个单元格都将有一个准确的 sku（仅在选中并填充产品的情况下）

skufamily、size 和grade 已预先填充，因此只需要jquery 循环并加入字段。

这是一个可以玩的小提琴。[http://jsfiddle.net/QS56z/](http://jsfiddle.net/QS56z/)

我已经尝试了以下概念，但不能完全确定代码。

```
 function createcodes() {
$("table.authors-list").find('input[type="checkbox"][name^="h"]:checked').each(function () {
 if (<checkbox is checked>)
      document.getElementById(input[type="skufamily").value + 
      document.getElementById(input[type="size").value +
      document.getElementById(input[type="skugrade").value

        }); 
```

这远非正确，所以如果你能让我走上正确的道路，我将不胜感激。

一如既往地感谢一百万。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T14:44:07.967

更新了你的[小提琴](http://jsfiddle.net/QS56z/19/)。我认为这段代码应该这样做。

```
$("#continue").click(function(){
    $("table#ordertable > tbody > tr").each(function(){
        var productVal = $('td:eq(0) input', this).val();
        if(productVal.length > 0){
            //get the code portion
            var trimmedProductVal = productVal.substring(0, productVal.length - 2);
            var productCode = productVal.substring(productVal.length-2, productVal.length);
            //get the checked items
            $('td.tdcheckbox', this).each(function(){
                var currentCell = this;
                $("input[type='checkbox']:checked", this).each(function(){
                    //concatenate the value
                    var valueToSet = $('input[type="text"]:eq(1)', currentCell).val();
                    valueToSet = trimmedProductVal + valueToSet + productCode;
                    //set the text value
                    $('input[type="text"]:eq(0)', currentCell).val(valueToSet);
                });;
            });
        }
    });
}); 
```

# java - 对象内的休眠查询列表

> ID：16169113
> 
> 赞同：2
> 
> 时间：2013-04-23T12:15:06.670
> 
> 标签：java, hibernate, list, mapping, one-to-many

我有一堂课

```
public class Human{

  @OneToMany
  private List<Pets> myPets;
  //other fields here.
} 
```

是否可以查询人类类别并获得宠物数量最多的人类？Hibernate/HQL 可以做到这一点还是我必须手动获取所有人类并查询它们包含的宠物列表？如果是这样怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:24:12.233

HQL 允许您查询列表的大小，如下所示：

```
select max(h.myPets.size) from Human h 
```

因此，您可以将其用作内部语句来查找 pet.size 等于最大值的人类对象：

```
from Human h where h.myPets.size = (select max(h2.myPets.size) from Human h2) 
```

# ruby-on-rails - Rails3+设计+simple_form+nested_model

> ID：16169120
> 
> 赞同：0
> 
> 时间：2013-04-23T12:15:22.223
> 
> 标签：ruby-on-rails, model, devise, nested, simple-form

我正在使用设计对用户进行身份验证，当新用户注册时，我也想创建新帐户，并将此用户设置为帐户的所有者。我决定为此使用带有嵌套模型的表单。这是我的设置：

楷模：

```
class User < ActiveRecord::Base
  belongs_to :account
  has_one :owned_account, :class=> Account, :foreign_key => :owner_id
  accepts_nested_attributes_for :owned_account
end

class Account < ActiveRecord::Base
  has_many :users
  belongs_to :owner, :class => User, :foreign_key => :owner_id
end 
```

路线：

```
devise_for :users, :path_prefix => 'authentication', :controllers => {:registrations => "registrations"}
resources :accounts 
```

重写设计注册控制器：

```
class RegistrationsController < Devise::RegistrationsController
   def new
     super
     owned_account = resource.build_owned_account
   end

   def create
     super
   end
end 
```

形式：

```
<%= simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
  <%= f.error_notification %>

  <div class="form-inputs">
    <%= f.input :email, :required => true, :autofocus => true %>
    <%= f.input :password, :required => true %>
    <%= f.input :password_confirmation, :required => true %>

    <%= f.simple_fields_for :owned_account do |account| %>
      <%= account.input :name, :required => true %>
    <% end %>
  </div>

  <div class="form-actions">
    <%= f.button :submit, "Sign up" %>
  </div>
<% end %> 
```

访问 sign_up 路径时不会引发异常，但不会生成表单的嵌套部分。已经有几个类似的问题，但提供的解决方案似乎对我不起作用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:36:37.827

根据您的代码：

```
def new
  super
  owned_account = resource.build_owned_account 
end 
```

在您的视图中无法访问变量owned_account。如何将该行替换为：

```
resource.owned_account = resource.build_owned_account 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:54:33.233

问题在于`super`在覆盖控制器中使用。此代码有效：

```
class RegistrationsController < Devise::RegistrationsController
   def new
      resource = build_resource({})
      resource.build_owned_account
      respond_with resource
   end

   def create
     super
   end
end 
```

# sql - 如何在一个查询中使用内连接和交叉连接？

> ID：16169121
> 
> 赞同：-3
> 
> 时间：2013-04-23T12:15:24.217
> 
> 标签：sql, join, inner-join, cross-join

我的任务是编写一个使用单个内部联接和交叉联接的查询。我已经编写的应该返回相同结果的查询如下所示：

```
SELECT T.PRICE, S.ROW, S.NUMBER, M.TITLE  
FROM 
[cinema_no_keys].[dbo].[TICKET] T cross join 
[cinema_no_keys].[dbo].[MOVIE] M cross join 
[cinema_no_keys].[dbo].[SEAT] S cross join 
[cinema_no_keys].[dbo].[SHOW] SH
WHERE
T.ID_SEAT = S.ID_SEAT AND
M.ID_MOVIE = SH.ID_MOVIE AND
SH.DATE_HOUR = T.DATE_HOUR 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T12:20:53.197

`cross join`是 的一个特例`inner join`：它是一个没有任何条件的内连接。换句话说，它连接了表的每一行。它存在的唯一原因是您不必编写像`inner join TABLE on 1=1`.

当你想加入每一行时，你应该*只使用交叉连接。*使用它然后在`where`子句中有条件指定哪些行应该匹配（就像你正在做的那样）是没有意义的。

正确的做法是使用, 并在子句而不是子句`inner join`中指定连接条件。这为您的查询提供了更多的逻辑流程，并且在许多情况下它也会更有效（您越早从结果中排除行，您的查询运行得越快）。`on``where`

这是一个修改后的查询，它使用`inner join`：

```
select T.PRICE, S.ROW, S.NUMBER, M.TITLE  
    from [cinema_no_keys].[dbo].[TICKET] T 
    inner join [cinema_no_keys].[dbo].[SEAT] S on
        T.ID_SEAT = S.ID_SEAT
    inner join [cinema_no_keys].[dbo].[SHOW] SH on
        SH.DATE_HOUR = T.DATE_HOUR
    inner join [cinema_no_keys].[dbo].[MOVIE] M on
        M.ID_MOVIE = SH.ID_MOVIE 
```

我更改了连接的顺序：因为`movie`指向 , 中字段的链接`show`应该`show`在`movie`.

# ios - iOS 分享“发生错误，请稍后再试。”

> ID：16169133
> 
> 赞同：4
> 
> 时间：2013-04-23T12:15:46.233
> 
> 标签：ios, facebook, sharing

我正在通过 [FBWebDialogs presentFeedDialogModally...] 发布
它工作正常。
但是，如果我在 facebook 设置中删除应用程序并尝试再次发布，我会在网络发布视图中看到登录对话框。
登录后出现错误：“**发生错误。请稍后再试。** ”。没有调用回调。

如何修复？

![登录表单](https://i.stack.imgur.com/LbgEd.png) ![登录后出错](https://i.stack.imgur.com/wAA5B.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-20T13:24:01.813

似乎是 SDK 中的错误。

尝试`app_id`在传递给的参数字典中指定您的`[FBWebDialogs presentFeedDialogModallyWithSession:parameters:handler]`

[文档](https://developers.facebook.com/docs/reference/dialogs/feed/)说“必需，但大多数 SDK 自动指定”，但我发现它不是自动发生的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-05T21:06:29.033

当您的应用不向公众提供时，您可能会收到此错误（Facebook 开发者控制面板的“状态和评论”页面上的大滑块显示“否”），并且您尚未在应用中添加您登录时使用的帐户作为测试用户。

我遇到了这种情况，我还没有将我的测试用户（我使用与我的个人帐户不同的帐户进行测试）作为测试用户添加到应用程序中。

您可以在 Facebook 开发人员控制面板的“角色”页面中添加您的测试用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-13T02:30:47.640

正如 nick 建议的那样，您可以将 FacebookAppID 添加到传递的参数中。或者确保您的 FacebookAppID 在您的 plist 信息文件中。

添加一个字符串键：FacebookAppID 与您的 Facebook 应用 ID 的值。然后 SDK 可以自动添加您的应用程序 ID，以便在其他任何地方使用。

# prolog - Prolog中使用Stream读取文件的一些疑惑

> ID：16169139
> 
> 赞同：0
> 
> 时间：2013-04-23T12:16:12.973
> 
> 标签：prolog

我怀疑这个从文件中读取字符并将这些字符放入列表的简单 Prolog 程序的工作原理。

该代码运行良好，如下所示：

```
readFile(FileInput, TextList):- open(FileInput, read, Stream),
                                readCharacter(Stream, TextList),
                                close(Stream),
                                !.

readCharacter(Stream,[]):- at_end_of_stream(Stream).    % Exit condition

readCharacter(Stream,[Char|Tail]):- get0(Stream,Char),
                                    readCharacter(Stream,Tail). 
```

当调用**readFile/2**谓词时，会发生以下情况：输入传递的文件以读取模式打开，并且该文件与流相关联。

然后调用**readCharacter/2**谓词，它将 Stream 关​​联到我的输入文件（要读取的文件）和**TextList**，它是放置文件内容的列表。

**readCharacter/2**谓词分为两种情况：

1) 使用**at_end_of_stream(Stream)**谓词的退出条件，在读取 Stream 的最后一个字符（即文件中的最后一个字符）后成功。在这种情况下什么都不做，**readCharacter**谓词结束

2）第二种情况是添加读取字符并将其添加到我的**TextList**的规则：

```
readCharacter(Stream,[Char|Tail]):- get0(Stream,Char),
                                    readCharacter(Stream,Tail). 
```

在这里我有一个疑问：它使用**get0**从 Stream 中读取一个字符并将其放在列表的头部（作为列表的第一个元素）......所以......为什么列表不包含相反的文件内容？

IE

我有一个名为**myFile.txt**的文件，其中包含以下文本：**abc**

所以**readCharacter**首先从 Stream 中读取**一个**字符并将其放在列表的头部，所以我有：

**文本列表 = [一个]**

然后**readCharacter**从 Stream 中读取**b**字符并将其放在我拥有的列表的头部：

**文本列表 = [b,a]**

然后**readCharacter**从 Stream 中读取**c**字符并将其放在我拥有的列表的头部：

**文本列表 = [c,b,a]**

如果是这样，TextList 应该包含 myFile.txt 文件的相反内容，但在我看来，TextList 以相同的顺序包含 myFile.txt 文件的相同内容。

为什么？我错过了什么？我的推理有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T15:20:33.433

```
readCharacter(Stream,[Char|Tail]):-
    get0(Stream,Char),
    readCharacter(Stream,Tail). 
```

So you have your *Stream*, you get a character from it and unify it with *Char*. You have a yet-to-be initialized list in *Tail*. You then pass *Stream* (with one character now gone) and *Tail* to a recursive call of `readCharacter`. Rinse and repeat until *Stream* is at end of file.

The point is that this: `[Char|Tail]` means that *Char* is the head of the resulting list, or in other words, **before** everything else in the list.

If you trace this, you will see how *Char* gets unified with the codes of the characters you have in your file, in the order they are in the file, on calling `get0(Char)`, but disappear as you call `readCharacter` recursively.

Then, as you go out of the recursion, the character codes you got from `get0` magically reappear in the second argument of `readCharacter`, on the exit from the call in which they were read, each *Char* before everything in *Tail* (as should be, according to `[Char|Tail]`.

Basically, what is wrong with your reasoning (here and in other questions) is that you try too hard to impose your **expectations** on what you see instead of **accepting** and trying to **recognize the logic** in what you observe. Prolog, as all other man-made things, follows a certain logic, most of the time.

# actionscript-3 - 如何在 Flex、混合 MXML 和 Stage 3D AS3 代码中使用 Starling

> ID：16169143
> 
> 赞同：2
> 
> 时间：2013-04-23T12:16:19.567
> 
> 标签：actionscript-3, apache-flex, flash-builder, starling-framework

我需要通过创建 FlexMobileApplication 项目而不是 ActionScriptMobileApplication 项目来使用 starling 构建移动应用程序。

我可以在我的应用程序中同时拥有 MXML 控件和 Stage 3D（流线内容）吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T12:56:20.893

**是**的，您可以混合使用它们，但请注意以下几点：

*   Starling 是 stage3D 的框架，它在比普通 Flex（非 stage3D）内容更低的层上运行。
*   您需要将 Application backgroundAlpha 设置为 0 才能看到八哥的内容。
*   您将只能在 Starling 上显示 Flex 控件（不能混合它们或进行反向分层）
*   可能还有其他要讨论的点，比如性能等等，但既然你已经选择了 Starling，你现在应该知道基础知识了。

**更新**

如果您需要 Stage3D leyer 上的类似 flex 控件，请使用 Feathers Framework for Starling。

*   以下是一些示例： http: [//feathersui.com/examples/components-explorer/](http://feathersui.com/examples/components-explorer/)
*   这是框架维基：[http ://wiki.starling-framework.org/feathers/start](http://wiki.starling-framework.org/feathers/start)

# javascript - 客户端服务器计时器，显示在客户端（js）中，不能被欺骗

> ID：16169147
> 
> 赞同：0
> 
> 时间：2013-04-23T12:16:51.333
> 
> 标签：javascript, server-side

我在 js 中有客户端游戏，它具有以分钟为单位倒计时的阶段，现在我在服务器端也保存了游戏的几个步骤。
但我知道有时该浏览器速度很慢且响应速度较慢，因此我在服务器端计算的 4 分钟不是客户端中的 4 分钟。
我怎样才能做到这一点？
所以它不能被欺骗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:31:59.757

建立一个保活系统。每隔 30 秒左右，发送一个与时间相关的变量（时间戳或其加密变体），并让服务器接收它。服务器计算差异，将差异发送回客户端。这样，您每 30 秒就知道有什么区别，这使您可以进行相应的调整。

这不包括滞后 - 相反，它允许您适应。这也没有考虑到请求触发所需的时间，所以用少许盐来计算差异。

# c - 是否可以从打开的文件描述符重新创建文件？

> ID：16169149
> 
> 赞同：9
> 
> 时间：2013-04-23T12:16:56.190
> 
> 标签：c, linux, unix, system, inode

现在，这个问题可能看起来很奇怪，而且可能很奇怪，但为了提供一些背景信息，我一直在阅读[这篇](http://linuxgazette.net/105/pitcher.html)文章以了解 i 节点，其中作者给出了一个有趣的例子：

```
{
  FILE *fp;

  fp = fopen("some.hidden.file","w");
  unlink("some.hidden.file"); /* deletes the filename part */

  /* some.hidden.file no longer has a filename and is truly hidden */
  fprintf(fp,"This data won't be found\n"); /* access the data part */
  /*etc*/
  fclose(fp); /* finally release the data part */
} 
```

这允许创建一个“隐藏的”临时文件。

我的问题是：有没有办法重新创建一个指向在调用`fp` **后**`unlink()`打开的 inode 的文件名？

*免责声明：我不打算在实际代码中这样做；我只是（重新）学习 i 节点并想知道这是否可能。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:43:24.937

恐怕这是不可能的，因为`link`系统调用需要一个有效的文件名（这意味着一个现有的链接）而不是一个 UNIX 文件描述符。[Single UNIX Specification](http://pubs.opengroup.org/onlinepubs/007908799/xsh/unistd.h.html)中没有`flink`函数。

# jquery - 使用 jQuery 添加更多数据属性

> ID：16169150
> 
> 赞同：1
> 
> 时间：2013-04-23T12:17:03.423
> 
> 标签：jquery, custom-data-attribute

我正在尝试使用 jQuery 添加 HTML5 data-* 值，但似乎没有发生任何事情，我做错了什么吗？

这是我的 HTML：

```
<a href="#" data-js="click-chat"></a> 
```

jQuery：

```
$('[data-js=click-chat]').click(function(){
    $(this).data("role",'test')
}) 
```

由于某种原因，它没有设置任何数据或更新现有值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:19:32.780

using`.data()`不会创建属性，它只是将数据添加到元素。您应该可以使用它来使用它`.data('role')`，但您不会在 html 中看到属性。

因此，如果您调用`.data()`选择器，它将检查`data-`属性以及属性形式中不存在的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:20:00.073

`.attr()`如果要向元素添加属性，可以使用该方法。否则，所有其他答案都是正确的`data()`。

```
 $('a[data-js="click-chat"').attr('data-monkey', "lemur"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T12:20:25.373

当您使用该`.data()`函数时，jQuery 不会将值存储为元素的实际属性，因此您不会看到 DOM 有任何变化。第一次调用`.data()`它时，它会在内部存储元素上任何属性的当前值`data-*`，然后使用该存储来获取或设置任何后续调用的值。

这与 using 不一致，`.attr('data-*')`因为它*确实*适用于元素上定义的实际属性，因此您希望使用其中一个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T12:21:26.077

您可以像这样使用 .attr 属性

```
$(this).attr('id', 'your-id-value'); 
```

# javadoc - 将 JavaDoc @author 标签添加到我项目中的每个 java 文件

> ID：16169153
> 
> 赞同：1
> 
> 时间：2013-04-23T12:17:18.153
> 
> 标签：javadoc, author

我有一个包含很多文件的 Java 项目。在其中的一些中，我在类/接口声明之前插入了一个 JavaDoc @author 标记，但不是全部。我想要一个脚本（bash、perl 等）能够为所有没有的文件在正确的位置（就在类声明之前）添加@author 标签。何找到添加此 javadoc 的正确行？：

```
/*
 * @author alepac
 */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-27T23:01:30.733

不是脚本，但如果您的 Java 项目恰好是使用[Maven](https://maven.apache.org/)构建的，那么您可以使用[Javadoc 插件的](https://maven.apache.org/plugins/maven-javadoc-plugin/)[javadoc:fix](https://maven.apache.org/plugins/maven-javadoc-plugin/fix-mojo.html)目标，您可以对其进行配置，以便它在缺少的地方插入标签，包括根本没有 javadoc 的情况：`@author`

```
<plugin>
    <artifactId>maven-javadoc-plugin</artifactId>
    <groupId>org.apache.maven.plugins</groupId>
    <version>2.10.3</version>
    <configuration>
        <fixTags>author</fixTags>
        <force>true</force>
        <fixFieldComment>false</fixFieldComment>
        <fixMethodComment>false</fixMethodComment>
    </configuration>
</plugin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:26:49.530

您可以尝试使用以下脚本，

```
#!/bin/bash

function proccess_all_files {
FILES="./*"
cd "$1"
for i in $FILES
do
if [[ -d "$i" ]]; then
echo "Directory $i found...no action taken"
else
echo "Processing $i file..."
sed '/*
 * @author alepac
 */' $i > $i.bak
mv "$i.bak" "$i"
fi
done
for j in * .[!.]* ..?*; do
cd "$1"
test -d "$1/$j" && proccess_all_files "$1/$j"
done
}

proccess_all_files "`DIRECTORY NAME`" 
```

让我知道它是否对您有帮助，或者这是否正是您正在寻找的。

希望能帮助到你。

# c# - 如何调试 WebBrowser mshtml.dll c0000005

> ID：16169155
> 
> 赞同：1
> 
> 时间：2013-04-23T12:17:24.330
> 
> 标签：c#, .net, winapi, browser, unmanaged

我正在使用带有 .NET 4.0 的 WebBrowser 控件并出现随机崩溃。应用程序崩溃的时间各不相同，尽管应用程序的使用完全相同。

下面是windows提供的问题描述：

```
 <EventType>APPCRASH</EventType>
   <Parameter0>MyApp.vshost.exe</Parameter0>
   <Parameter1>11.0.50727.1</Parameter1>
   <Parameter2>5011d445</Parameter2>
   <Parameter3>mshtml.dll</Parameter3>
   <Parameter4>9.0.8112.16476</Parameter4>
   <Parameter5>5126ee6c</Parameter5>
   <Parameter6>c0000005</Parameter6>   
   <Parameter7>00262cd4</Parameter7> 
```

我该如何调试这个问题？我尝试打开转储文件，但我得到的堆栈跟踪并没有什么用处（是吗？）：

```
 ntdll.dll!_NtRaiseException@12()  + 0x12 bytes  
ntdll.dll!_NtRaiseException@12()  + 0x12 bytes  
wininet.dll!_ResizeBuffer@12()  + 0x40 bytes    
mshtml.dll!RaiseFailFastExceptionFilter()  + 0x24 bytes 
mshtml.dll!GlobalWndProc()  + 0x4562d bytes 
msvcrt.dll!@_EH4_CallFilterFunc@8()  + 0x12 bytes   
ntdll.dll!ExecuteHandler2@20()  + 0x26 bytes    
ntdll.dll!ExecuteHandler@20()  + 0x24 bytes 
ntdll.dll!_RtlDispatchException@8()  + 0xd3 bytes   
ntdll.dll!_KiUserExceptionDispatcher@8()  + 0xf bytes   
mshtml.dll!CHtmParse::Prepare()  + 0x2f bytes   
mshtml.dll!CHtmPost::Broadcast()  + 0xf bytes   
mshtml.dll!CHtmPost::Exec()  + 0xbd bytes   
mshtml.dll!CHtmPost::RunNested()  + 0x6e bytes  
mshtml.dll!CHtmLoad::Write()  + 0x165 bytes 
mshtml.dll!CHtmCtx::Write()  + 0x2a bytes   
mshtml.dll!CDocument::write()  + 0x185 bytes    
mshtml.dll!Method_void_SAFEARRAYPVARIANTP()  + 0x30 bytes   
mshtml.dll!CBase::ContextInvokeEx()  + 0x1e5 bytes  
mshtml.dll!CBase::InvokeEx()  + 0x2b bytes  
mshtml.dll!DispatchInvokeCollection()  - 0x166e80 bytes 
mshtml.dll!CDocument::InvokeEx()  + 0xcb bytes  
mshtml.dll!CBase::VersionedInvokeEx()  + 0x37 bytes 
mshtml.dll!CBase::PrivateInvokeEx()  + 0x4d bytes   
mshtml.dll!CBase::varInvokeEx()  + 0x44 bytes   
jscript9.dll!HostDispatch::CallInvokeEx()  + 0xca bytes 
jscript9.dll!HostDispatch::InvokeMarshaled()  + 0x3d bytes  
jscript9.dll!HostDispatch::InvokeByDispId()  + 0x1dc bytes  
jscript9.dll!DispMemberProxy::DefaultInvoke()  + 0x22 bytes 
jscript9.dll!DispMemberProxy::DefaultInvoke()  + 0x20 bytes 
jscript9.dll!Js::JavascriptFunction::CallFunction()  + 0x87 bytes   
jscript9.dll!Js::InterpreterStackFrame::OP_CallFld()  + 0x4d bytes  
jscript9.dll!Js::InterpreterStackFrame::Process()  - 0x190f7 bytes  
jscript9.dll!Js::InterpreterStackFrame::ProcessThunk()  + 0x65 bytes    
jscript9.dll!Js::InterpreterStackFrame::InterpreterThunk()  + 0x15c bytes   
jscript9.dll!Js::JavascriptFunction::CallFunction()  + 0x87 bytes   
jscript9.dll!Js::JavascriptFunction::CallRootFunction()  + 0xa9 bytes   
jscript9.dll!ScriptSite::CallRootFunction()  + 0x4f bytes   
jscript9.dll!ScriptSite::Execute()  + 0x5f bytes    
jscript9.dll!ScriptEngine::ExecutePendingScripts()  + 0xf328 bytes  
jscript9.dll!ScriptEngine::ParseScriptTextCore()  + 0x2d6 bytes 
jscript9.dll!ScriptEngine::ParseScriptText()  + 0x7a bytes  
mshtml.dll!CActiveScriptHolder::ParseScriptText()  + 0x3384 bytes   
mshtml.dll!CScriptCollection::ParseScriptText()  + 0x1fa bytes  
mshtml.dll!CScriptData::CommitCode()  - 0xfc bytes  
mshtml.dll!CMarkup::CommitQueuedScripts()  - 0x1c7625 bytes 
mshtml.dll!CMarkup::CommitQueuedScriptsInline()  - 0x18e954 bytes   
mshtml.dll!CMarkup::UnblockScriptExecutionHelper()  + 0x8d bytes    
mshtml.dll!CMarkup::UnblockScriptExecution()  + 0x63 bytes  
mshtml.dll!CScriptData::EnsureScriptDownloadLeft()  + 0x54 bytes    
mshtml.dll!CScriptData::OnDwnChan()  + 0x5a4 bytes  
mshtml.dll!CScriptData::OnDwnChanCallback()  + 0xe bytes    
mshtml.dll!CDwnChan::OnMethodCall()  + 0x1f bytes   
mshtml.dll!GlobalWndOnMethodCall()  + 0xf8 bytes    
mshtml.dll!GlobalWndProc()  + 0x451fa bytes 
user32.dll!_InternalCallWinProc@20()  + 0x23 bytes  
user32.dll!_UserCallWinProcCheckWow@32()  + 0xb7 bytes  
user32.dll!_DispatchMessageWorker@8()  + 0xed bytes 
user32.dll!_DispatchMessageW@4()  + 0xf bytes   
[Managed to Native Transition]  
WindowsBase.dll!System.Windows.Threading.Dispatcher.TranslateAndDispatchMessage(ref System.Windows.Interop.MSG msg) + 0x20 bytes    
WindowsBase.dll!System.Windows.Threading.Dispatcher.PushFrameImpl(System.Windows.Threading.DispatcherFrame frame = {System.Windows.Threading.DispatcherFrame}) + 0x94 bytes 
WindowsBase.dll!System.Windows.Threading.Dispatcher.PushFrame(System.Windows.Threading.DispatcherFrame frame) + 0x37 bytes  
WindowsBase.dll!System.Windows.Threading.Dispatcher.Run() + 0x20 bytes  
PresentationFramework.dll!System.Windows.Application.RunDispatcher(object ignore) + 0x14 bytes  
PresentationFramework.dll!System.Windows.Application.RunInternal(System.Windows.Window window) + 0x105 bytes    
PresentationFramework.dll!System.Windows.Application.Run(System.Windows.Window window) + 0x24 bytes 
PresentationFramework.dll!System.Windows.Application.Run() + 0x1c bytes 
MyApp.exe!My.Namespace.App.Main() + 0x9c bytes
[Native to Managed Transition]  
[Managed to Native Transition]  
mscorlib.dll!System.AppDomain.nExecuteAssembly(System.Reflection.RuntimeAssembly assembly, string[] args) + 0x9 bytes   
mscorlib.dll!System.AppDomain.ExecuteAssembly(string assemblyFile, System.Security.Policy.Evidence assemblySecurity, string[] args) + 0x61 bytes    
Microsoft.VisualStudio.HostingProcess.Utilities.dll!Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly() + 0x27 bytes  
mscorlib.dll!System.Threading.ThreadHelper.ThreadStart_Context(object state) + 0x6f bytes   
mscorlib.dll!System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state, bool preserveSyncCtx 
```

# java - 有没有办法从当前插件访问其他插件的资源文件夹？

> ID：16169156
> 
> 赞同：0
> 
> 时间：2013-04-23T12:17:29.367
> 
> 标签：java, eclipse-rcp, rcp

我正在使用以下代码将插件“A”的资源文件夹中可用的图标复制到本地文件夹。这绝对没问题。现在我想知道是否有办法从其他插件（插件B）的资源文件夹中复制图标。我只需要在插件 A 中保留复制逻辑。有没有办法从当前插件访问其他插件的资源文件夹？

```
File objectDir = new File(directory + "/icons/");

    if (!objectDir.exists()) {
        objectDir.mkdirs();
    }

    InputStream inStream = null;
    OutputStream outStream = null;

    try {

        File bfile = new File(directory + "/icons/validation.png");
        inStream = this.getClass().getClassLoader().getResourceAsStream("/icons/viewAsHTML.png");   
        outStream = new FileOutputStream(bfile);

        byte[] buffer = new byte[1024];

        int length;
        // copy the file content in bytes
        while ((length = inStream.read(buffer)) > 0) {

            outStream.write(buffer, 0, length);

        }

        inStream.close();
        outStream.close();

        System.out.println("File is copied successful!");

    } catch (IOException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:54:53.800

您应该能够使用以下`platform:/plugin/`机制获取另一个插件中的资源：

```
url = new URL("platform:/plugin/your.plugin.package.pluginB/icons/validation.png");
InputStream inputStream = url.openConnection().getInputStream();
BufferedReader in = new BufferedReader(new InputStreamReader(inputStream)); 
```

# c++ - 为什么我可以使用 operator= 而不是 operator== 与 C++11 大括号初始化器？

> ID：16169161
> 
> 赞同：32
> 
> 时间：2013-04-23T12:17:47.990
> 
> 标签：c++, c++11

看这个例子：

```
struct Foo
{
    int a;
    int b;

    bool operator == (const Foo & x)
    {
        return a == x.a && b == x.b;
    }
};

int main ()
{
    Foo a;

    a = {1, 2};

    if (a == {1, 2}) // error: expected primary-expression before ‘{’ token
    {
    }
} 
```

线路`a={1,2}`很好。大括号被转换为 a`Foo`以匹配隐式`operator=`方法的参数类型。如果`operator=`是用户定义的，它仍然有效。

如图所示的线路`if (a=={1,2}})`错误。

为什么表达式`{1,2}`不转换为 a`Foo`以匹配用户定义的`operator==`方法？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-23T12:21:35.560

*在一般情况下，*列表初始化不能用作运算符的参数。根据 C++11 标准的第 8.5.4/1 段：

> [...] 可以使用列表初始化
> 
> — 作为变量定义中的初始化器 (8.5)
> 
> — 作为新表达式中的初始值设定项 (5.3.4)
> 
> — 在返回语句中 (6.6.3)
> 
> — 作为 for-range-initializer (6.5)
> 
> —**作为函数参数**(5.2.2)
> 
> — 作为下标 (5.2.1)
> 
> — 作为构造函数调用的参数 (8.5, 5.2.3)
> 
> — 作为非静态数据成员的初始化器 (9.2)
> 
> — 在 mem-initializer (12.6.2) 中
> 
> —**在作业的右侧**（5.17）

最后一项解释了为什么在 的右侧允许列表初始化`operator =`，尽管对于任意运算符通常不允许这样做。

但是，由于上面的第五项，它可以用作常规函数调用的参数，这样：

```
if (a.operator == ({1, 2})) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-23T12:22:23.710

只是根本不支持。

初始化器列表被明确定义为在*初始化*( `[C++11: 8.5.4]`) 和*赋值*中有效：

> `[C++11: 5.17/9]:`*括号初始化列表*可能出现在右侧
> 
> *   对标量的赋值，在这种情况下，初始化列表最多只能有一个元素。的含义`x={v}`，其中`T`是表达式的标量类型，`x`除了`x=T(v)`不允许窄化转换（8.5.4）之外，其他的含义。的意思`x={}`是`x=T()`。
> *   由用户定义的赋值运算符定义的赋值，在这种情况下，初始化列表作为参数传递给运算符函数。

没有允许其他任意情况的标准措辞。

如果允许，在本例中，类型`{1,2}`将相当模糊。这将是一个复杂的语言特性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-23T12:22:49.127

需要显式转换。

```
if (a == (Foo){1, 2})
{
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T13:03:09.917

没有真正的原因。

C++ 是委员会努力的结果，因此有时会因为复杂的政治/社会学动态而出现奇怪但经过深思熟虑的决定。

C++ 语法很难。很难。几乎难以置信的艰难。甚至有一些规则类似于“如果你可以将这个任意长的标记序列解析为这个或那个，那么就是这个”。

编译器花了很多年才简单地同意什么是 C++，什么不是。

在这种情况下，我的疯狂猜测是他们不喜欢看起来非常相似的案例的想法：

```
MyClass x = {...};
MyClass y; y = {...}; 
```

将被不同地处理，因此有一个特殊的分配规定以允许语法。

从技术的角度来看，我看不出允许其他运算符也有什么问题，另一方面，如果有问题（例如重载、模板实例化等），我看不出赋值如何希望能逃脱他们。

# 编辑

g++ 不仅允许使用 strict `operator=`，还允许使用`operator+=`,`operator-=`和类似的“增强赋值”。只有当您允许非成员重载（禁止赋值和扩充赋值运算符）时，才会出现逻辑问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T12:23:25.037

当您使用包含用户定义类型 a 和 == 运算符的表达式时，将调用重载的运算符函数，根据您给出的定义，该函数需要 Foo 类对象的引用参数

所以你的表达应该像 a==b

其中 b 是类 Foo 的对象

使用此表达式，您将能够比较 b 和 a 的数据成员，从而知道它们是否相等

# cocoa-touch - 在 layout/layoutSubviews 方法中布局子视图更好吗？

> ID：16169163
> 
> 赞同：0
> 
> 时间：2013-04-23T12:17:55.560
> 
> 标签：cocoa-touch, cocoa

这个问题适用于`cocoa`和`cocoa touch`。但我会为`cocoa`.

据我了解，我可以在一个循环`setNeedsLayout`中`YES`多次，并且`-layout`只会被调用一次。`-layout`但是在方法中布置子视图还有其他好处吗？

说明/示例：目前，每次调用自定义方法时，我都在自定义`viewController`（具有默认值）中布置我的子视图。而且我只在用户更改某些属性时才调用方法，所以我真的想重新布局子视图。`NSView``redraw``redraw`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:06:18.273

有很多外部环境不受您的直接控制，可能会导致系统想要展示您的视图。例如，iOS 上的设备旋转或来电，或 OS X 上的窗口大小调整。如果您的布局逻辑位于标准位置，那么您的代码无需任何额外努力即可适应这些，并且在您的内部状态发生变化的地方，您可以明确要求这样的布局。

扭转您的问题：*不*以标准方式进行布局有显着的好处吗？你认为这将是一个性能问题吗？您是否对其进行了测量以查看它是否*实际上*是性能问题？

# zend-framework - zend 应用程序返回未找到图像/css/js

> ID：16169165
> 
> 赞同：1
> 
> 时间：2013-04-23T12:18:02.373
> 
> 标签：zend-framework

我在本地 zend 服务器 6 上运行的 zend 应用程序返回未找到所有图像、css 和 javascript 文件。

我的 .htaccess 在公共场合包含：

```
 RewriteEngine On
   RewriteCond %{REQUEST_FILENAME} -s [OR]
   RewriteCond %{REQUEST_FILENAME} -l 
   RewriteRule ^.*$ - [NC,L]
   RewriteRule ^.*$ index.php [NC,L] 
```

routes.ini 包含

```
 [production]
    routes.default.type = "Zend_Controller_Router_Route_Hostname"
    routes.default.route = "dev.localhost.com"
    routes.default.defaults.module = "default"
    routes.default.defaults.media = "media"

    ;-------------------------------------------------------------------------------
    ; Default Route - Default Behaviour 
    ;-------------------------------------------------------------------------------
    routes.default.chains.index.route = ":controller/:action/*"
    routes.default.chains.index.type = "Zend_Controller_Router_Route"
    routes.default.chains.index.defaults.controller = "index"
    routes.default.chains.index.defaults.action = "index" 
```

我称之为

```
 <img src="<?= $this->baseUrl('images/logo.png'); ?>"/>
    <link rel="stylesheet" type="text/css" href="<?php echo$this->baseUrl('css/grid.css')?>"/>
    <link rel="stylesheet" type="text/css" href="<?php echo $this->baseUrl('css/styles.css')?>" />
    <?php $this->headScript()->prependFile($this->baseUrl('js/jquery-ui-1.8.17.custom.js')); 
```

?>

所有这些都返回未找到的错误，基本 url 设置为“/”
或“ [http://dev.localhost.com](http://dev.localhost.com) ”

非常感谢任何帮助

# html - Chrome/IE 和 FireFox 中不同的 100% 高度表

> ID：16169171
> 
> 赞同：1
> 
> 时间：2013-04-23T12:18:17.313
> 
> 标签：html, css, html-table

问题是，所有元素（主容器、表格容器和表格本身）都必须有 100% 的高度。与 Firefox 相比，Chrome 和 IE 中的表格本身的尺寸略小，这会导致 .table-container 和表格边框之间存在小间隙。

有人知道如何解决这个问题吗？我为此花了几乎一整天的时间，不能简单地找到解决方案。将不胜感激任何帮助。

这是我当前问题的小提琴链接：[小提琴链接](http://jsfiddle.net/ZEeNH/6/)

```
<div class="container">
    <div class="buttons">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
    </div>
    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <td>1</td>
                    <td>2</td>
                    <td>3</td>
                    <td>4</td>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>a</td>
                    <td>b</td>
                    <td>c</td>
                    <td>d</td>
                </tr>
                <tr>
                    <td>aa</td>
                    <td>bb</td>
                    <td>cc</td>
                    <td>dd</td>
                </tr>
                <tr>
                    <td>aaa</td>
                    <td>bbb</td>
                    <td>ccc</td>
                    <td>ddd</td>
                </tr>
            </tbody>
        </table>
    </div>
</div> 
```

和 CSS：

```
html, body, .container, .table-container, table
{
    height: 100%;
}

.container
{
    display: block;
    width: 500px;
    margin: 0 auto;
    text-align: center;
}

.table-container
{
    width: 100%;
    border: 1px solid red;
    padding-top: 30px;
    margin-top: -30px;
}

.buttons
{
    height: 30px;
}

.buttons div
{
    box-sizing: border-box;
    -moz-box-sizing: border-box;
    width: 25%;
    float: left;
    height: 30px;
    border: 1px solid black;
}

table
{
    border: 1px solid black;
    width: 100%;
    border-spacing: 0;
}

thead td, tbody td
{
    width: 25%;
    height: 25%;
} 
```

**更新**：为 .table-container 添加了填充和负边距
**Update2**：为示例添加了边框间距和边框折叠。仍然无法正常工作。
**更新3**：现在它在这里工作，这意味着我无法完全重现我的错误以向您展示:(但总的来说，问题是Chrome中5x5表格的高度比22px上的FF少，这是表格容器和表格本身之间的 22px 间隙。在 Firefox 中，每个单元格大约有 4px + 到表格高度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:34:26.670

它似乎是桌子上的边框间距。

将此 CSS 应用于表格元素：

```
border-spacing: 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-16T19:22:18.670

意识到

```
width: 100%; 
```

工作方式不完全相同

```
height: 100%; 
```

做。

虽然 width: 100% 抓取父级宽度的 100%，即使没有明确设置该宽度，但 height: 100% 仅适用于父级具有固定高度的元素。

简单来说，%-width 是动态应用的，而 %-height 是静态父容器的高度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-06T17:49:17.283

我来到这里是因为我在 Chrome 和 Firefox 的不同 100% 高度的桌子上遇到了同样的问题。解决方法是为表格添加边框。您也可以添加border-bottom，它实际上不会显示在Chrome中，但会解决高度问题。

```
table
{
    **border-bottom: 1px solid black;**
    width: 100%;
    border-spacing: 0;
} 
```

# android - 我应该在创建通知之前调用 WakeLock 吗？

> ID：16169175
> 
> 赞同：6
> 
> 时间：2013-04-23T12:18:38.023
> 
> 标签：android, notifications, push-notification, google-cloud-messaging, wakelock

我正在向 Android 应用程序添加通知，目前只有模拟器可供测试。当收到通知时，我的 GCMBaseIntentService 子类 (GCMIntentService) 中的 onMessage() 方法将被调用。从这里我创建一个要出现的通知。如果我将模拟器置于待机状态，则看不到任何通知（我不知道它是否会在设备上听到？）。那么我应该在创建通知之前调用 WakeLock 来唤醒设备吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T15:50:08.237

我不确定处于待机状态的模拟器是否等同于锁定设备。如果是，您绝对应该调用 WakeLock，以便即使在设备锁定时也能显示通知。

这是示例代码：

```
@Override
protected void onMessage(Context context, Intent intent) {
    // Extract the payload from the message
    Bundle extras = intent.getExtras();
    if (extras != null) {
        String message = (String) extras.get("payload");
        String title = (String) extras.get("title");

        // add a notification to status bar
        NotificationManager mManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
        Intent myIntent = new Intent(this,MyActivity.class);
        Notification notification = new Notification(R.drawable.coupon_notification, title, System.currentTimeMillis());
        notification.flags |= Notification.FLAG_AUTO_CANCEL;
        RemoteViews contentView = new RemoteViews(getPackageName(), R.layout.notification);
        contentView.setImageViewResource(R.id.image, R.drawable.gcm_notification);
        contentView.setTextViewText(R.id.title, title);
        contentView.setTextViewText(R.id.text, message);
        notification.contentView = contentView;
        notification.contentIntent = PendingIntent.getActivity(this.getBaseContext(), 0, myIntent, PendingIntent.FLAG_CANCEL_CURRENT);
        mManager.notify(0, notification);
        PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
        WakeLock wl = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK | PowerManager.ACQUIRE_CAUSES_WAKEUP, "TAG");
        wl.acquire(15000);
    }
} 
```

当然，您需要将此权限添加到清单中：

```
<uses-permission android:name="android.permission.WAKE_LOCK" /> 
```

# javascript - 展开/折叠将页面置于顶部

> ID：16169181
> 
> 赞同：1
> 
> 时间：2013-04-23T12:19:05.003
> 
> 标签：javascript, jquery, html

如果在向下滚动页面时元素展开或折叠，则页面会突然重置并且焦点会移动到页面顶部。

有什么方法可以防止页面移动或减少它的突然性？

```
 $(document).ready(function () {
        $(".flip").click(function () {
        var panel = $(this).next('.panel');
        $('.panel').not(panel).slideUp('slow');
        $(this).next('.panel').slideToggle("slow");
       });
    }); 
```

[http://jsfiddle.net/chaddly/5FNTX/](http://jsfiddle.net/chaddly/5FNTX/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T12:21:06.340

试试这个添加`"e.preventDefault();"`

```
$(document).ready(function () {
    $(".flip").click(function (e) {
        e.preventDefault();
        var panel = $(this).next('.panel');
        $('.panel').not(panel).slideUp('slow');
        $(this).next('.panel').slideToggle("slow");
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:22:25.437

因为您单击的元素包含一个带有 # 的链接，所以它正在导航到导致它移动到页面顶部的链接。

添加调用`preventDefault()`将停止此操作：

```
$(".flip").click(function (e) {
     e.preventDefault();
     var panel = $(this).next('.panel');
     $('.panel').not(panel).slideUp('slow');
     $(this).next('.panel').slideToggle("slow");
}); 
```

[http://jsfiddle.net/5FNTX/1/](http://jsfiddle.net/5FNTX/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T12:22:36.900

你可以放在`return false`最后一个切换之后。

```
$(document).ready(function () {
 $(".flip").click(function () {
  var panel = $(this).next('.panel');
  $('.panel').not(panel).slideUp('slow');
  $(this).next('.panel').slideToggle("slow");
  return false;
 });
}); 
```

# python - 验证逗号分隔的十进制值读取 char by char

> ID：16169189
> 
> 赞同：2
> 
> 时间：2013-04-23T12:19:43.397
> 
> 标签：python, char, python-2.5

我有一个包含货币值的字符串。
我必须从字符串中逐个字符地读取，并且函数必须返回`result = 0`所有`val`.

例如：`string = "You Score is MX var."`
哪里`var` 可以有这些值中的任何一个

```
[14 , 14.98 , 114 , 114.98 , 1116 , 1,116 , 1116.78 , 1,116.18 , 11,12,123 , 1,12,123.89 ... and so on...] 
```

**我的代码**

```
def evaluate():
    result , count = 0 , 0
    dot , comma = False , False
    while (index_of_String < Len_of_string):
        ch = string[index_of_String]        
        if (ch == '.'):
            if (dot == True):
                break ;                
            dot = True            
        elif (ch == ','):
            if (dot == True):
                break            
            comma = True             
        elif not (ch >= '0' and ch <= '9'):
            if not (ch == ' ' or ch == ','):                
                result = -1            
            break
        else:
            if (dot == False):
                count += 1
        print ("Char %c" % ch)
        index_of_String += 1        

    print ("count of numeric digits %d" % count)
    if (result == 0):
        if dot == False:
            result = -1
        if comma == False:
            if (count > 3):
                result = -1

    return (result, index_of_String) 
```

> **所需输出**

```
string = "You Score is MX 14."
result = 0

string = "You Score is MX 14.89."
result = 0

string = "You Score is MX 1114.89."
result = 0

string = "You Score is MX 1,114.89."
result = 0  

string = "You Score is MX 11,,,14.89."
result = -1 (fail)

string = "You Score is MX 11.14.89."
result = -1 (fail)

string = "You Score is MX 1,114.89."
result = 0  

string = "You Score is MX 1,14.89."
result = -1 (fail)

string = "You Score is MX 1,11,114.89."
result = 0 
```

我需要进行哪些修改才能使我的代码适用于所有这些情况。
有帮助修改吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T21:33:14.820

如果你真的需要逐个字符地去，那么：

```
def evaluate(string, values):
    value = []
    for char in string:
        if char.isdigit() or char in ',.':
            value.append(char)
    value = ''.join(value).strip('.,')
    return int(value in values) 
```

测试

```
>>> values = ['14', '14.98', '114', '114.98', '1,116.5']
>>> string = 'You Score is MX 14.98.'
>>> evaluate(string, values)
1
string = 'You Score is MX 115.' # 115 is not in values
>>> evaluate(string, values)
0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:55:03.587

如果 char by char 不是必需的，则：

```
def evaluate(string, values):
    for word in string.rstrip('.').split():
        if word in values:
            return False
    return True 
```

测试：

```
>>> values = map(str, [14 , 14.98 , 114 , 114.98 , 1116])
['14', '14.98', '114', '114.98', '1116']
>>> string = 'You Score is MX 14.98.'
>>> evaluate(string, values)
False
string = 'You Score is MX 115.' # 115 is not in values
>>> evaluate(string, values)
True 
```

# ruby-on-rails-3 - `method_missing': 未定义的方法 `user_class=' for #

> ID：16169191
> 
> 赞同：0
> 
> 时间：2013-04-23T12:19:46.500
> 
> 标签：ruby-on-rails-3, method-missing, forem

当我运行 rails server 时，我遇到了这个错误。'bundle install' 已经成功。我的 RVM 使用 ruby​​ 1.9.3 和 rails 3.2，但项目需要 rails 3.1。我认为 bundle 已经解决了因为 bundle。rails 和 ruby​​ 可能不是原因。任何事情都会有帮助。谢谢您的捆绑包已完成！它被安装到 ./vendor/bundle

```
magic@magic-ThinkPad-T430u:~/Documents/rails/ticketee-book$ rails server
=> Booting WEBrick
=> Rails 3.1.0.rc2 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
/home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/bundler/gems/rails-623c16f4f8b7/railties/lib/rails/railtie/configurable.rb:30:in `method_missing': undefined method `user_class=' for #<Forem::Engine:0x9de6bc0> (NoMethodError)
    from /home/magic/Documents/rails/ticketee-book/config/initializers/forem.rb:1:in `<top (required)>'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/bundler/gems/rails-623c16f4f8b7/activesupport/lib/active_support/dependencies.rb:235:in `load'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/bundler/gems/rails-623c16f4f8b7/activesupport/lib/active_support/dependencies.rb:235:in `block in load'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/bundler/gems/rails-623c16f4f8b7/activesupport/lib/active_support/dependencies.rb:225:in `block in load_dependency'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/bundler/gems/rails-623c16f4f8b7/activesupport/lib/active_support/dependencies.rb:641:in `new_constants_in'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/bundler/gems/rails-623c16f4f8b7/activesupport/lib/active_support/dependencies.rb:225:in `load_dependency'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/bundler/gems/rails-623c16f4f8b7/activesupport/lib/active_support/dependencies.rb:235:in `load'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/bundler/gems/rails-623c16f4f8b7/railties/lib/rails/engine.rb:544:in `block (2 levels) in <class:Engine>'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/bundler/gems/rails-623c16f4f8b7/railties/lib/rails/engine.rb:543:in `each'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/bundler/gems/rails-623c16f4f8b7/railties/lib/rails/engine.rb:543:in `block in <class:Engine>'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/bundler/gems/rails-623c16f4f8b7/railties/lib/rails/initializable.rb:25:in `instance_exec'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/bundler/gems/rails-623c16f4f8b7/railties/lib/rails/initializable.rb:25:in `run'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/bundler/gems/rails-623c16f4f8b7/railties/lib/rails/initializable.rb:50:in `block in run_initializers'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/bundler/gems/rails-623c16f4f8b7/railties/lib/rails/initializable.rb:49:in `each'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/bundler/gems/rails-623c16f4f8b7/railties/lib/rails/initializable.rb:49:in `run_initializers'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/bundler/gems/rails-623c16f4f8b7/railties/lib/rails/application.rb:96:in `initialize!'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/bundler/gems/rails-623c16f4f8b7/railties/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /home/magic/Documents/rails/ticketee-book/config/environment.rb:5:in `<top (required)>'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/bundler/gems/rails-623c16f4f8b7/activesupport/lib/active_support/dependencies.rb:239:in `require'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/bundler/gems/rails-623c16f4f8b7/activesupport/lib/active_support/dependencies.rb:239:in `block in require'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/bundler/gems/rails-623c16f4f8b7/activesupport/lib/active_support/dependencies.rb:225:in `block in load_dependency'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/bundler/gems/rails-623c16f4f8b7/activesupport/lib/active_support/dependencies.rb:641:in `new_constants_in'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/bundler/gems/rails-623c16f4f8b7/activesupport/lib/active_support/dependencies.rb:225:in `load_dependency'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/bundler/gems/rails-623c16f4f8b7/activesupport/lib/active_support/dependencies.rb:239:in `require'
    from /home/magic/Documents/rails/ticketee-book/config.ru:4:in `block in <main>'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/gems/rack-1.3.0/lib/rack/builder.rb:51:in `instance_eval'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/gems/rack-1.3.0/lib/rack/builder.rb:51:in `initialize'
    from /home/magic/Documents/rails/ticketee-book/config.ru:1:in `new'
    from /home/magic/Documents/rails/ticketee-book/config.ru:1:in `<main>'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/gems/rack-1.3.0/lib/rack/builder.rb:40:in `eval'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/gems/rack-1.3.0/lib/rack/builder.rb:40:in `parse_file'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/gems/rack-1.3.0/lib/rack/server.rb:200:in `app'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/bundler/gems/rails-623c16f4f8b7/railties/lib/rails/commands/server.rb:46:in `app'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/gems/rack-1.3.0/lib/rack/server.rb:301:in `wrapped_app'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/gems/rack-1.3.0/lib/rack/server.rb:252:in `start'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/bundler/gems/rails-623c16f4f8b7/railties/lib/rails/commands/server.rb:70:in `start'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/bundler/gems/rails-623c16f4f8b7/railties/lib/rails/commands.rb:54:in `block in <top (required)>'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/bundler/gems/rails-623c16f4f8b7/railties/lib/rails/commands.rb:49:in `tap'
    from /home/magic/Documents/rails/ticketee-book/vendor/bundle/ruby/1.9.1/bundler/gems/rails-623c16f4f8b7/railties/lib/rails/commands.rb:49:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:32:15.227

尝试使用`bundle`命令运行服务器。它将使用您`Gemfile`then 中定义的所有 gem：

```
bundle exec rails server 
```

# php - 使用服务器端 sdk 注销 facebook 而不撤销权限

> ID：16169192
> 
> 赞同：0
> 
> 时间：2013-04-23T12:19:48.477
> 
> 标签：php, facebook, sdk, logout

我正在用 php 构建一个站点，它使用 facebook 登录来授予访问权限。当用户注销时，我想将他们从 facebook 和我的应用程序中注销。我到处寻找如何做到这一点，但除了 facebook 开发者页面的教程外，没有任何内容，该页面解释了如何注销用户，同时还撤销他们在登录时授予您的权限。我不想这样做，我只想在不撤销权限的情况下将用户从我的应用程序和 Facebook 中注销。服务器端sdk可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:27:49.170

如果您使用的是 PHP SDK，则可以按照以下链接中的说明使用它：

[http://developers.facebook.com/docs/reference/php/facebook-getLogoutUrl/](http://developers.facebook.com/docs/reference/php/facebook-getLogoutUrl/)

# ios - 延迟 UITableView 隐藏 UITableViewCells

> ID：16169194
> 
> 赞同：1
> 
> 时间：2013-04-23T12:19:55.663
> 
> 标签：ios, xcode, uitableview, uiviewanimation

我的问题是我有一个 UIContainerView，它有一个 UITableView 的子视图。当用户按下按钮时，此 UIContainerView 通过为其帧大小设置动画来切换打开/关闭。我遇到的问题是，因为帧大小是立即设置的，并且动画会随着时间的推移而发生，所以在动画完成之前，TableView 单元格会“出列”并消失。我猜是因为 tableView 认为它不再显示。

无论如何要延迟这个，直到动画完成。也许在 +(void)animateWithDuration:... 的完成部分

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:57:09.353

一个快速而肮脏的解决方案是在框架底部添加一个不透明的 UIView，并向上设置动画以产生折叠效果。在 animateWithDuration 方法的完成块中，您可以更改容器视图的框架。

如果不知道您想要达到的视觉效果，很难给出一个非常好的答案。更合适的方法是删除表格视图单元格以提供动画效果，但它可能看起来并不完全正确......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:28:03.830

```
[UIView animateWithDuration:(NSTimeInterval) animations:^{
        //Animation code
    } completion:^(BOOL finished) {
        //after animation completion
    }] 
```

我认为您可以使用它。无论你在动画之后做什么，你都可以在完成块中编写它。

# android - 谷歌地图V1截图

> ID：16169198
> 
> 赞同：0
> 
> 时间：2013-04-23T12:20:07.850
> 
> 标签：android, screenshot

当我截屏地图时。我无法成功拍摄所有屏幕。它只显示路径。我想知道我的代码有什么问题。我希望有一个人可以帮助我。谢谢你

这是我的结果：
![在此处输入图像描述](https://i.stack.imgur.com/dUbUc.jpg)

```
// Screen shot
      private static Bitmap takeScreenShot(Activity activity) {
        // View to shot View
       View view = activity.getWindow().getDecorView();
        //View view = getPopupViews(getDecorViews())[0];
        Log.i("ABC", view.getClass().getName());
        view.setDrawingCacheEnabled(true);
        view.buildDrawingCache();
        Bitmap b1 = view.getDrawingCache();

        // the height

        Rect frame = new Rect();

        view.getWindowVisibleDisplayFrame(frame);

        int statusBarHeight = frame.top;

        System.out.println(statusBarHeight);

        // width and height

        int width = activity.getWindowManager().getDefaultDisplay().getWidth();

        int height = activity.getWindowManager().getDefaultDisplay().getHeight();

        // del the state bar

        // Bitmap b = Bitmap.createBitmap(b1, 0, 25, 320, 455);

        Bitmap b = Bitmap.createBitmap(b1, 0, statusBarHeight, width, height - statusBarHeight);

        view.destroyDrawingCache();

        return b;

}

// save image to sdcard

private static void savePic(Bitmap b, String strFileName) {
        FileOutputStream fos = null;
        try {
                fos = new FileOutputStream(strFileName);
                if (null != fos) {
                        b.compress(Bitmap.CompressFormat.JPEG, 90, fos);
                        fos.flush();
                        fos.close();
                }

        } catch (FileNotFoundException e) {

                e.printStackTrace();

        } catch (IOException e) {

                e.printStackTrace();

         }
      }

     private void shoot() {
    shoot(this);

      }

   // call function
     public static void shoot(Activity a) {
             savePic(takeScreenShot(a), "data/data/com.example.map/"+number+".png");
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:51:08.387

试试这段代码，并在其中传递 mapView

```
public final static Bitmap takeScreenShot(View view) {
    Bitmap bitmap = Bitmap.createBitmap(view.getWidth(), view.getHeight(), Config.ARGB_8888);
    Canvas canvas = new Canvas(bitmap);
    view.draw(canvas);
    return bitmap;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:54:56.610

```
 private Bitmap getMapImage() {  

        MapController mc = mapView.getController();  
        mc.setCenter(GEO_POINT);  
        mc.setZoom(ZOOM_LEVEL);  

        /* Capture drawing cache as bitmap */  
        mapView.setDrawingCacheEnabled(true);  
        Bitmap bmp = Bitmap.createBitmap(mapView.getDrawingCache());  
        mapView.setDrawingCacheEnabled(false);  

        return bmp;  
    }  

    private void saveMapImage() {  
        String filename = "SCREEN_SHOT.png";  
        File f = new File(getExternalFilesDir(null), filename);  
        FileOutputStream out = new FileOutputStream(f);  

        Bitmap bmp = getMapImage();  

        bmp.compress(Bitmap.CompressFormat.PNG, 100, out);  

        out.close();  
    } 
```

# ios - UIControlEventTouchUpInside 延迟

> ID：16169199
> 
> 赞同：1
> 
> 时间：2013-04-23T12:20:12.123
> 
> 标签：ios, objective-c, uibutton, uicontrolevents

我有一个按钮和一个控制事件，例如：

```
[_flashBackButton addTarget:self
                     action:@selector(flashBackButtonCallback:)
           forControlEvents:UIControlEventTouchUpInside]; 
```

如果我使用`UIControlEventTouchUpInside`，在我的选择器被调用之前会有一个非常小的延迟（1 秒）（在我停止触摸屏幕之后的延迟）。

我试过了

```
[_flashBackButton addTarget:self
                     action:@selector(flashBackButtonCallback:)
           forControlEvents:UIControlEventTouchDown]; 
```

我的选择器立即被调用。

=> 问题是这个按钮是用来显示另一个视图控制器的，这种长时间的延迟让我们的应用程序感觉没有响应。当我与其他知名应用程序（如 facebook、twitter 等）进行比较时，它们的视图控制器几乎在按下按钮后立即弹出。

有人知道解决方法吗？我不想使用`UIControlEventTouchDown`.

在此先感谢您的帮助

看视频：[https ://www.dropbox.com/s/kl1sr5jnpzo1i7s/IMG_2865.MOV](https://www.dropbox.com/s/kl1sr5jnpzo1i7s/IMG_2865.MOV)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:43:43.333

听起来你在下一个 viewController 的 viewWillAppear 方法中有一些东西阻塞了主 UI 线程。将一个 NSLog 放在源 viewController;s 动作上，看看它是否立即触发，然后将另一个放在目标 viewWillAppear 方法上。那应该缩小问题的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T07:54:49.027

好的，我已经弄清楚了问题所在：
我的按钮是一个 uiBarButtonItem，我的导航栏上有一个手势识别器（双击）。
这就是导致延迟的手势。我已经解决了我的问题：
[UINavigationBar 中的单击事件被手势识别器覆盖](https://stackoverflow.com/questions/7773189/click-events-in-uinavigationbar-overridden-by-the-gesture-recognizer)

# java - Java 泛型函数：定义一组泛型对象必须是的类

> ID：16169205
> 
> 赞同：2
> 
> 时间：2013-04-23T12:20:29.043
> 
> 标签：java, generics, parameters

我正在用java编写一个通用函数，但是，我似乎无法判断是否有任何方法可以设置一个通用对象必须包含的类列表。

像这样的东西：

```
public static <T in {String.class, Integer.class, Long.class}> Collection<T> test(Collection<T> val); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T12:27:01.557

你可以有像这样的有[界类型参数](http://docs.oracle.com/javase/tutorial/java/generics/bounded.html)，例如：

```
public static <T extends String & Runnable> Collection<T> test(Collection<T> val); 
```

但是您的示例将不起作用，因为您有多个类并且 Java 不支持多重继承。

此外，您的示例`String`，`Integer`因此无论如何它们`Long`都`final`无法扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T12:39:53.233

不，你不能在 java 中这样做。

你想要的是一个“或”界限。Java 允许“与”边界，例如：

```
List<T extends Runnable & Comparable<T>> 
```

但不支持类似的“OR”：

```
List<T extends Integer | String> // doesn't compile 
```

当你考虑它时，它没有任何意义。为每种绑定的类型使用单独的类/方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T12:28:24.900

不幸的是，你不能在 Java 中做你想做的事情——如果它允许你从一个列表中指定一个泛型，你就可以编写一个在 Integers 或 ArrayLists 上操作的函数，这没有任何意义它们不共享通用功能。如果您想将您的方法限制为某些类型，要么找到一个它们都继承自支持您需要的功能的基类/接口（`public static <T extends BaseClass> Collection<T> test(Collection<T> val);`），要么编写一组重载方法，一个用于您想要支持的每种类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T12:29:12.927

那么你可以同时不能。

在您的具体示例中，这是不可能的。

但是这样的例子会起作用：

```
 public <T extends CharSequence & Comparable & Closeable> void go(){ 
```

对于您的情况，我会选择：

```
 public <T extends Number & CharSequence> void go() // same rule applies as extend a class and implement as many interfaces as you want 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T19:31:02.060

你不能这样做。泛型仅用于强制类型安全（保证类型可以执行特定方法等）。没有与这种“或”绑定相对应的类型安全要求。类型安全的要求只需要一个“AND”绑定。

# html - 如何使用 CSS 定位当前菜单项？

> ID：16169212
> 
> 赞同：2
> 
> 时间：2013-04-23T12:20:43.263
> 
> 标签：html, css

我有一个简单的菜单：

```
<ul id="menu">
    <li><a href="a.html">A</a></li>
    <li><a href="b.html">B</a></li>
    <li><a href="c.html">C</a></li>
</ul> 
```

此菜单被插入三个文件 ( `{a-c}.html`)。现在我想使用 CSS 来突出显示当前菜单项（A in `a.html`、 B in`b.html`等）。简单的方法是插入一个额外的类：

```
<ul id="menu">
    <li><a href="a.html">A</a></li>
    <li class="current"><a href="b.html">B</a></li>
    <li><a href="c.html">C</a></li>
</ul> 
```

但是没有简单的方法告诉生成器代码`current`在适当的地方添加类。我可以很容易地告诉生成器将一个类添加到`body`：

```
<body class="a">…&lt;/body> <!-- in a.html -->
<body class="b">…&lt;/body> <!-- in b.html -->
<body class="c">…&lt;/body> <!-- in c.html --> 
```

然后我可以像这样定位当前菜单项：

```
body.a li.a, body.b li.b, body.c li.c { /* highlight */ } 
```

这行得通，但感觉就像一个黑客。你有更好的主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:48:02.107

为了进一步扩展 Alien 先生的答案，我使用了一个基于 PHP 的解决方案......

如果您使用 php 生成导航，我会在每个单独的页面上设置一个等于页面标题的变量。然后我有一个if语句，用伪代码说......

如果 home 的变量 title 等于 home 的变量 nav-label，则应用 active 类。

所以基本上在我每个页面的最顶部，我首先设置了这样的标题变量：

```
<?php $title = "Home"; ?> 
```

然后生成我的导航，并使用以下结构生成每个 LI：

```
echo "<li class=\"$active\"><a href=\"$navPath\">$navLabel</a></li>"; 
```

然后我的 if 语句：

```
if ($title == $navLabel) {
    $active = 'active';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:06:06.767

您可以将当前类添加到每个 html 页面的相应菜单中。因此它将针对相应的菜单，您在哪个页面上。

这是示例：

//CSS

```
ul li{
    list-style-type:none;
    display:inline-block;
    vertical-align:top;       
}
li a{
    padding: 5px 10px;
}
.current{
    background: yellow;
} 
```

//页面a.html的HTML

```
<ul id="menu">
    <li><a href=a.html" class="current">A</a></li>
    <li><a href="b.html">B</a></li>
    <li><a href="c.html">C</a></li>
</ul> 
```

//页面b.html的HTML

```
<ul id="menu">
    <li><a href=a.html">A</a></li>
    <li><a href="b.html" class="current">B</a></li>
    <li><a href="c.html">C</a></li>
</ul> 
```

//页面c.html的HTML

```
<ul id="menu">
    <li><a href=a.html">A</a></li>
    <li><a href="b.html">B</a></li>
    <li><a href="c.html" class="current">C</a></li>
</ul> 
```

# scroll - 我可以在溢出时删除底部滚动条：滚动吗？

> ID：16169213
> 
> 赞同：0
> 
> 时间：2013-04-23T12:20:43.553
> 
> 标签：scroll

所以我有一个带有滚动条的弹出窗口。对于滚动条，我使用了基本的 CSS 元素溢出：滚动。但问题是滚动条出现在侧面和底部。现在我想知道是否有任何方法可以删除底部滚动条，因为即使它锁定它对我来说也没用，没有它看起来会更好。我用谷歌搜索它并没有找到任何东西，所以如果你有解决方案，请分享它。如果您需要任何代码，请告诉我，我会发布它。

这是弹出窗口的“我的”css（我从[http://www.zurb.com/playground/reveal-modal-plugin](http://www.zurb.com/playground/reveal-modal-plugin)获得代码）：

```
.reveal-modal-bg { 
    position: fixed; 
    height: 100%;
    width: 100%;
    background: #000;
    background: rgba(0,0,0,.8);
    z-index: 100;
    display: none;
    top: 0;
    left: 0; 
    }

.reveal-modal {
    visibility: hidden;
    top: 100px; 
    left: 50%;
    margin-left: -300px;
    width: 520px;
    height: 400px;
    background: #eee url(modal-gloss.png) no-repeat -200px -80px;
    position: absolute;
    z-index: 101;
    padding: 30px 40px 34px;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    border-radius: 5px;
    -moz-box-shadow: 0 0 10px rgba(0,0,0,.4);
    -webkit-box-shadow: 0 0 10px rgba(0,0,0,.4);
    -box-shadow: 0 0 10px rgba(0,0,0,.4);
    overflow:scroll;
    }

    .reveal-modal h1{
        color: green;
        font-size: 40px;
    }

    .reveal-modal strong{
        font-style: inherit;
    }

.reveal-modal.small         { width: 200px; margin-left: -140px;}
.reveal-modal.medium        { width: 400px; margin-left: -240px;}
.reveal-modal.large         { width: 600px; margin-left: -340px;}
.reveal-modal.xlarge        { width: 800px; margin-left: -440px;}

.reveal-modal .close-reveal-modal {
    font-size: 22px;
    line-height: .5;
    position: absolute;
    top: 8px;
    right: 11px;
    color: #aaa;
    text-shadow: 0 -1px 1px rbga(0,0,0,.6);
    font-weight: bold;
    cursor: pointer;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T16:10:30.573

更好的方法是

```
overflow-x:hidden;
overflow-y:auto; 
```

这样，这意味着如果页面使用 jquery 变大，然后您需要滚动视图，则视图不会变小并影响您的测量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:49:58.063

这应该有效：

```
overflow-x:hidden;
overflow-y:auto; 
```

# scala - Scala 使用统计

> ID：16169216
> 
> 赞同：3
> 
> 时间：2013-04-23T12:20:49.493
> 
> 标签：scala, usage-statistics

我们是一个小型开发团队，目前正在起草一个将 Scala 开发人员作为潜在客户的商业理念。为了说服投资者，我们显然需要一些使用数据，其中一些我们无法找到：

*   [虽然typesafe.com](http://www.typesafe.com)上列出了公司列表，但我们无法找到他们对 Scala 的实际用途以及 Scala 的总市场份额是多少。
*   TIOBE[索引](http://www.tiobe.com/index.php/content/paperinfo/tpci/index.html)将 scala 列为第 29 位最流行的 (?) 语言，但这些方法似乎有问题，而且似乎很难找出这对现实世界意味着什么。是否有任何调查实际上询问了开发人员他们使用了什么，这涉及到较少的猜测？（甚至可能在商业环境中）
*   对我们来说，能够打印一些（最好是指数）关于过去几年 Scala 使用发展的曲线会很棒。虽然这就是我们认为 scala 正在传播的方式，但我们没有任何证据可以证明这一点。
*   是否有任何证据表明 scalabee 在金融部门或其他特定领域很受欢迎？例如，伦敦金融区似乎有某种“Scala 热点”，如果能证明这一点，那就太好了。

任何关于可引用调查和研究的提示都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T13:41:51.940

this won't tell you how many people are using it, but is a good indicator of trending technologies, as oposed to TIOBE, which rates any tech invented since the wheel

RedMonk uses [github + stackoverflow](http://redmonk.com/sogrady/2013/02/28/language-rankings-1-13/)

Scala is indeed popular in Finance in London. We are using it for our projects in a Front Office department in a major investment bank.

# python - Riak 为单个键设置超时

> ID：16169219
> 
> 赞同：0
> 
> 时间：2013-04-23T12:20:53.327
> 
> 标签：python, riak

我想做的是为riak中的各个键设置超时我知道你可以设置使用bitcask的超时但如果我没记错那只是对桶我有一种方法我可以手动实现超时功能但是这将涉及更改该密钥的元数据

```
import riak

client = riak.RiakClient() 
bucket = client.bucket('somebucket')
key = bucket.get('somekey')
old_meta = key.get_metadata()
old_meta['new_key'] = 'new_value'
key.set_metadata(old_meta).store() 
```

元数据没有更新，或者没有立即显示，或者我在这里遗漏了什么..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T10:11:19.013

该字典包含每种元数据类型的一个条目（可以在[此处](https://github.com/basho/riak-python-client/blob/1.5.2/riak/metadata.py)找到键）。因此，可以通过以下方式设置用户元数据：

```
client = riak.RiakClient(port=10018)
bucket = client.bucket('somebucket')
key = bucket.get('somekey')
old_meta = key.get_metadata()
old_meta['usermeta'] = {'new_key': 'new_value'}
key.set_metadata(old_meta).store() 
```

# php - php打印单id问题

> ID：16169223
> 
> 赞同：0
> 
> 时间：2013-04-23T12:20:57.510
> 
> 标签：php, mysql

所以这就是我想要的.. 当用户点击某个链接时，例如[http://www.keevik.com/vicevi.php?id=24](http://www.keevik.com/vicevi.php?id=24)该脚本只打印出那个单一的 id。

这是我的代码

```
 /* Get data. */
$sql = "SELECT * FROM $tbl_name ORDER BY id DESC LIMIT $start, $limit";
$result = mysql_query($sql);
while($row = mysql_fetch_array($result))
    {
    echo "<a href ='vicevi.php?id=".$row['id']."'>".$row['id']."</a>";
    echo "<br>";
    echo nl2br($row["VicText"]);
    echo "<hr>";
    } 
```

所以，当我点击某个链接时，它并没有做我真正想要的：S

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T12:24:18.477

```
$sql = "SELECT * FROM $tbl_name ORDER BY id DESC LIMIT $start, $limit";
if(isset($_GET['id']))
{
    $id=intval($_GET['id']);
    $sql = "SELECT * FROM $tbl_name WHERE id=$id";
}
$result = mysql_query($sql);
if(!$result)
{
    echo 'no data found!';
}
else
{
    // etc..
} 
```

# amazon-web-services - Amazon SES getSendStatistics

> ID：16169225
> 
> 赞同：0
> 
> 时间：2013-04-23T12:20:59.940
> 
> 标签：amazon-web-services

我在 Amazon SES Api 中遇到了一些与 getSendStatistics 相关的问题，问题是当我第一次调用 getSendStatistics 时返回数据与第二次调用 getSendStatistics 不同（刷新页面时）。

例子

第一次返回数据

```
[GetSendStatisticsResult] => CFSimpleXML Object
                (
                    [SendDataPoints] => CFSimpleXML Object
                        (
                            [member] => Array
                                (
                                    [0] => CFSimpleXML Object
                                        (
                                            [DeliveryAttempts] => 3
                                            [Timestamp] => 2013-04-23T04:47:00Z
                                            [Rejects] => 0
                                            [Bounces] => 0
                                            [Complaints] => 0
                                        )

                                    [1] => CFSimpleXML Object
                                        (
                                            [DeliveryAttempts] => 1
                                            [Timestamp] => 2013-04-23T10:17:00Z
                                            [Rejects] => 0
                                            [Bounces] => 0
                                            [Complaints] => 0
                                        )
                                  )
                               )
                              ) 
```

第二次返回数据

```
[GetSendStatisticsResult] => CFSimpleXML Object
                (
                    [SendDataPoints] => CFSimpleXML Object
                        (
                            [member] => Array
                                (
                                    [0] => CFSimpleXML Object
                                        (
                                            [DeliveryAttempts] => 1
                                            [Timestamp] => 2013-04-23T10:17:00Z
                                            [Rejects] => 0
                                            [Bounces] => 0
                                            [Complaints] => 0
                                        )

                                    [1] => CFSimpleXML Object
                                        (
                                           [DeliveryAttempts] => 3
                                            [Timestamp] => 2013-04-23T04:47:00Z
                                            [Rejects] => 0
                                            [Bounces] => 0
                                            [Complaints] => 0
                                        )
                                  )
                               )
                              ) 
```

一些它如何改变它的位置不知道发生了什么任何人都可以指导我解决这个问题。我是亚马逊 SES 的新手

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:45:47.003

根据 AWS 的说法，不能保证在任何特定时刻统计数据都是 100% 最新的——即使您在两次通话之间没有发送任何内容，也可能存在报告滞后。

> 为了更好地汇总数据，我们可能会延迟 GetSendStatistics 返回的数据，并且不保证精确到分钟。

[https://forums.aws.amazon.com/thread.jspa?messageID=278174](https://forums.aws.amazon.com/thread.jspa?messageID=278174)

这可以解释你所看到的吗？

# html - 无法使用 Firefox 在 Canvas 上画线

> ID：16169226
> 
> 赞同：2
> 
> 时间：2013-04-23T12:21:03.640
> 
> 标签：html, html5-canvas

我有一个简单的画布测试，但似乎无法在 Firefox 上运行。我在 JS 控制台上真的没有错误。版本是 17.0.4，稍后会尝试更新的版本。这是代码：

```
<!DOCTYPE HTML>
<HTML>
<HEAD>
<SCRIPT>
var paint = false;
var canvas;
var cntxt;
var top;
var left;

function initialise() {
    canvas = document.getElementById("canvas_1");
    canvas.addEventListener("mousedown", doMouseDown, false);
    canvas.addEventListener("mouseup", doMouseUp, false);
    canvas.addEventListener("mousemove", doMouseMove, false);
    cntxt = canvas.getContext("2d");
    cntxt.strokeStyle = '#ff0000';
    cntxt.lineWidth = 5;
    cntxt.lineCap = 'round';    
    rect = canvas.getBoundingClientRect();
    top = rect.top;
    left = rect.left;
}
function doMouseDown(event) {
    paint = true;  
    x = event.layerX;
    y = event.layerY;
    document.getElementById("value_x").innerHTML = x;
    document.getElementById("value_y").innerHTML = y;
    cntxt.moveTo(x-left, y-top);
    cntxt.beginPath();  
    cntxt.stroke();
}
function doMouseUp(event) {
    paint = false; 
    x = event.layerX;
    y = event.layerY;
    document.getElementById("value_x").innerHTML = x;
    document.getElementById("value_y").innerHTML = y;
    cntxt.lineTo(x-left+1, y-top+1);
    cntxt.stroke();
    cntxt.closePath();
}
function doMouseMove(event) {
  if(paint) {
    x = event.layerX;
    y = event.layerY;
    document.getElementById("value_x").innerHTML = x;
    document.getElementById("value_y").innerHTML = y;
    cntxt.lineTo(x-left, y-top);
    cntxt.stroke();     
  }
}
</SCRIPT>
</HEAD>
<BODY onLoad="initialise()">
<canvas width="400" height="400" id="canvas_1">
Canvas Tag not supported
</canvas>
<br>
Value x: <span id="value_x"></span>
<br>
Value y: <span id="value_y"></span>
</BODY>
</HTML> 
```

在 MSIE 中它工作正常（版本 9），但 Firefox 在 span 元素中正确显示坐标，但没有画线......我认为使用 layerX 和 layerY 应该可以解决问题，但他们没有......

谢谢和问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:12:27.630

奇怪，但 Mozilla 和 Chrome 都不喜欢你使用名为`top`.

它似乎是与`window`.

更改`top`为`canvasTop`，你应该没问题。

**[编辑：轻笑——正如你已经发现的那样！下次我更好地阅读评论！]**

您可能还想使用 clientX/clientY 而不是 layerX/layerY。

这是适用于 IE、FF 和 Chrome 的代码：

```
<!DOCTYPE HTML>
<HTML>
<HEAD>
<SCRIPT>
var paint = false;
var canvas;
var cntxt;
var canvastop;
var left;

function initialise() {
    canvas = document.getElementById("canvas_1");
    canvas.addEventListener("mousedown", doMouseDown, false);
    canvas.addEventListener("mouseup", doMouseUp, false);
    canvas.addEventListener("mousemove", doMouseMove, false);
    cntxt = canvas.getContext("2d");
    cntxt.strokeStyle = '#ff0000';
    cntxt.lineWidth = 5;
    cntxt.lineCap = 'round';    
    rect = canvas.getBoundingClientRect();
    canvastop = rect.top;
    left = rect.left;
}
function doMouseDown(event) {
    paint = true;  
    x = event.clientX;
    y = event.layerY;
    document.getElementById("value_x").innerHTML = x;
    document.getElementById("value_y").innerHTML = y;
    cntxt.moveTo(x-left, y-canvastop);
    cntxt.beginPath();  
    cntxt.stroke();
}
function doMouseUp(event) {
    paint = false; 
    x = event.clientX;
    y = event.clientY;
    document.getElementById("value_x").innerHTML = x+"/"+left;
    document.getElementById("value_y").innerHTML = y+"/"+canvastop;
    cntxt.lineTo(x-left+1, y-canvastop+1);
    cntxt.stroke();
    cntxt.closePath();
}
function doMouseMove(event) {
  if(paint) {
    x = event.clientX;
    y = event.clientY;
    document.getElementById("value_x").innerHTML =  x+"/"+left;
    document.getElementById("value_y").innerHTML = y+"/"+canvastop;
    cntxt.lineTo(x-left, y-canvastop);
    cntxt.stroke();     
  }
}
</SCRIPT>
</HEAD>
<BODY onLoad="initialise()">
<canvas width="400" height="400" id="canvas_1">
Canvas Tag not supported
</canvas>
<br>
Value x: <span id="value_x"></span>
<br>
Value y: <span id="value_y"></span>
</BODY>
</HTML> 
```

# android - 不使用 Lastknownlocation 使用 gps 获取当前位置

> ID：16169231
> 
> 赞同：0
> 
> 时间：2013-04-23T12:21:11.573
> 
> 标签：android, android-location

我有一个应用程序，我需要在其中获取我正在使用的当前位置

```
setNlocation(locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER)); 
```

因此，我得到了最后一个位置，我也尝试使用

```
@Override
    public void onLocationChanged(Location loc)
    {
        glat = loc.getLatitude();
        glng = loc.getLongitude();

        Toast.makeText( getApplicationContext(),"GPS Lat:" + glat + "GPS Lng" + glng,Toast.LENGTH_LONG).show();
    } 
```

但是那个 GPS 图标正在闪烁，闪烁和闪烁。（没有得到当前位置的 GPS Lat Lng）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:33:57.897

[这](http://www.rdcworld-android.blogspot.in/2012/01/get-current-location-coordinates-city.html)是一步一步描述获取当前位置 GPS 坐标的小应用程序

```
locationMangaer.requestLocationUpdates(LocationManager.GPS_PROVIDER, 5000, 10,locationListener); 
```

# haskell - 了解 Prime 测试

> ID：16169234
> 
> 赞同：1
> 
> 时间：2013-04-23T12:21:23.623
> 
> 标签：haskell, functional-programming, primes

我有这个 Haskell 脚本：

```
prime :: Integer -> Bool    
prime 1 = False
prime n = [ x | x <- [2..n-1], n `mod` x == 0 ] == [] 
```

`x`最后一行的第一个代表什么？为什么我可以用“String”替换它，整个功能仍然有效？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T12:53:27.570

列表推导中的前面部分`|`是一个表达式，将用于生成结果列表的每个元素。

在这种情况下，该函数只关心列表推导是否导致空列表，因此列表的元素无关紧要。您可以将`()`,`x`或`1`任何类型的值放在那里实现`Eq`。如果您使用`null`而不是`== []`检查空虚，它可能是任何东西，甚至是`undefined`.

# image - Qt 是否只加载适合窗口的小部件？

> ID：16169239
> 
> 赞同：0
> 
> 时间：2013-04-23T12:21:32.057
> 
> 标签：image, qt, loading

我想知道为什么 Qt 中的图像加载似乎比我正在开发的游戏中快得多。

我创建了一个简单的测试应用程序，它使用加载 70 个 500x500 PNG 图像`QPixmap`，然后在 70`QLabel`秒内以`QVBoxLayout`. 它几乎是瞬间打开的，而我的游戏使用 libpng 加载这些文件需要一两秒钟。

并非所有标签都在窗口中可见 - 实际上只有两个 - 所以我想知道：Qt 是否可能只加载实际使用并在屏幕上可见的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:51:17.330

不，它们会在调用适当的 QPixmap 构造函数时立即加载。70 500x500 png 在加载上花费几秒钟并不多，尝试分析您的算法

# system-verilog - System verilog中结构和联合的区别

> ID：16169241
> 
> 赞同：0
> 
> 时间：2013-04-23T12:21:33.617
> 
> 标签：system-verilog

我很难理解 System Verilog 中联合和结构的使用。我知道它们以不同的方式分配内存，但是，我想深入了解结构和联合。对于像我这样的人来说，LRM 很难理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:12:13.713

SystemVerilog 中的结构和联合与 C 中的结构和联合非常相似。因此，如果您正在寻找用例，阅读如何在 C 中使用它们可能会有所帮助。

这是一个解决这个问题的问题：[C 中的结构和联合之间的区别](https://stackoverflow.com/questions/346536/difference-between-a-structure-and-a-union-in-c)

SystemVerilog 为结构和联合添加了打包与解包的区别。压缩联合必须包含大小相同（# of bits）的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-18T18:10:17.467

您的问题的答案很大程度上取决于您是否尝试编写可综合的 RTL 代码。对于 RTL，结构和联合提供了不同的访问位的方式。请参阅[如何在硬件中实现系统 verilog 结构？成员被声明为电线吗？](https://stackoverflow.com/questions/21809877/how-does-a-system-verilog-structure-be-realized-in-hardware-are-the-members-dec/21813626#21813626)

对于测试台或其他代码，这些类型通常在跨越语言边界进入 C 时使用。

# joomla - 合并js文件后window.addEvent不是函数

> ID：16169242
> 
> 赞同：3
> 
> 时间：2013-04-23T12:21:42.453
> 
> 标签：joomla, mootools

好吧，我使用 joomla 的 ScriptMerge 将所有 js 文件合并为一个，但现在我得到 window.addEvent 不是挤压框初始化的函数，除此之外一切正常...我注意到挤压框代码是唯一的 javascript块在头部标记中，所有其他脚本都被合并并移动到正文...当我单击打开挤压框的按钮时它当然不会打开，但是当我再次单击它时它会正常打开...有人有吗一个如何解决这个错误的想法？可能是因为现在在合并的 js 文件中调用了 mootools 核心，而不是在头部，所以挤压框代码返回错误，因为它没有 mootools 核心？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T18:39:29.523

有您的问题：您在脚本上使用**async**属性 - **async**意味着脚本将加载并且不会像默认行为那样保持 dom 执行（没有**async**或**defer**）。`window.addEvent`因此，当您没有将**mootools**加载到页面时尝试调用，这就是您收到`undefined`.

2 解决问题的方法：

1.  删除**async**属性以强制脚本保持直到加载，然后继续执行 dom。
2.  将事件添加到脚本标记`onload`并在那里执行脚本的其余部分：

`<script src="http://tereni.me/cache/plg_scriptmerge/975e10ecd911c8ca09713d1120c51a6d.js" async type="text/javascript" onload="onLoadScript();"></script>`

然后在另一个脚本标签中：

```
function onLoadScript(){
        window.addEvent('domready',function(){
            alert('dom is ready');
        });
    } 
```

# spring - Spring JDBC store SchedulerFactoryBean 无法手动触发存储的触发器

> ID：16169246
> 
> 赞同：0
> 
> 时间：2013-04-23T12:21:48.550
> 
> 标签：spring, quartz-scheduler

我有一个集群 Quartz（2.1.6 版）调度程序，它在部署到 websphere 集群时似乎工作正常。调度程序由 Sp​​ring（版本 3.1.3_RELEASE）创建。

```
<bean id="scheduler-JDBC" class="org.springframework.scheduling.quartz.SchedulerFactoryBean" abstract="true">
    <property name="dataSource" ref="myDataSource" />
    <property name="transactionManager" ref="transactionManager" />
    <property name="jobFactory">
        <bean class="org.springframework.scheduling.quartz.SpringBeanJobFactory" />
    </property>
    <property name="overwriteExistingJobs" value="true" />
    <property name="quartzProperties">
        <props>
            <prop key="org.quartz.jobStore.isClustered">true</prop>            
            <prop key="org.quartz.jobStore.driverDelegateClass">${org.quartz.jobStore.driverDelegateClass}</prop>
            <prop key="org.quartz.scheduler.instanceId">AUTO</prop>
            <prop key="org.quartz.scheduler.skipUpdateCheck">true</prop>
        </props>
    </property>
</bean>

<bean id="cronScheduler" class="org.springframework.scheduling.quartz.SchedulerFactoryBean" parent="scheduler-${scheduler:RAM}" depends-on="quartzDatabaseInitializer">
    <property name="startupDelay" value="10" />
    <property name="autoStartup" value="true" />
    <property name="applicationContextSchedulerContextKey" value="applicationContext"/>
    <property name="triggers">
        <list>
            <ref bean="cronTriggerStats" />             
        </list>
    </property>
</bean> 
```

触发器和作业存储在数据库中。作业是使用 job_name="serverStatsJob" 和 job_group="DEFAULT" 创建的。触发器每 20 分钟执行一次。如何手动触发作业？

我努力了

```
StdScheduler cronScheduler = (StdScheduler)springContext.getBean("cronScheduler");
cronScheduler.triggerJob(new JobKey("serverStatsJob", "DEFAULT")); 
```

如果我使用 RAM 存储而不是 JDBC，它会起作用

我还尝试使用存储的作业创建一个新触发器

```
Trigger trigger1 = newTrigger()
.withIdentity("serverStatsJobTrigger", "userRequested")
.withSchedule(simpleSchedule()
.withRepeatCount(0))
.startNow()
.forJob(new JobKey("serverStatsJob", "DEFAULT"))
.build();
cronScheduler.scheduleJob(trigger1); 
```

但它也不起作用。有人可以帮我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:17:47.093

我自己发现了问题。调度程序未在事务中正确执行。

我`<tx:advice>`为调度程序添加了一个，现在它可以工作了。

```
<aop:config>
    <aop:pointcut id="quartzSchedulerPointcut" expression="execution(* org.quartz.Scheduler.*(..))" />
    <aop:advisor advice-ref="quartzSchedulerAdvice" pointcut-ref="quartzSchedulerPointcut" />
</aop:config>

<tx:advice id="quartzSchedulerAdvice" transaction-manager="transactionManager">
    <tx:attributes>
        <tx:method name="*"/>
    </tx:attributes>
</tx:advice> 
```

# sql - lsof 如果文件描述符被打开

> ID：16169248
> 
> 赞同：0
> 
> 时间：2013-04-23T12:21:54.460
> 
> 标签：sql, linux, oracle, lsof

我使用以下命令来确定是否打开了文件描述符：

```
/usr/sbin/lsof -a -c sqlplus -u ${USER} | grep -l "${FILE_NAME}” 
```

如果不是，我执行一些操作。该文件是一个假脱机的日志`sqlplus`。

有时`lsof`告诉文件描述符没有打开，但后来我在这个文件中找到了一些新数据。它很少发生，所以我无法重现它。

1.  可能是什么原因？
2.  sql spool 是如何工作的？它是从 SPOOL 文件命令保持打开文件描述符直到 SPOOL OFF 命令，还是多次打开和关闭文件描述符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:00:18.393

你可能有一个“[竞争条件](http://en.wikipedia.org/wiki/Race_condition)”。Sqlplus 打开文件，将一些新数据放入其中，并在 lsof 检查文件和使用 lsof 的结果处理文件之间将其关闭。

通常，在文件系统中避免竞争条件的最佳方法是在处理相关文件之前对其进行重命名。重命名是一种相对便宜的操作，这会阻止其他进程在您的进程处理文件时打开/修改文件。您需要确保如果文件在重命名时在另一个进程中打开，则在您的进程处理它之前，您需要等到不再通过打开的文件句柄访问它。

大多数程序员编写的代码都充斥着竞争条件。这些会导致各种无法重现的错误。如果您记住几乎所有程序都有多个共享资源的进程并且必须*始终*管理共享，那么您将成为一个更好的程序员。

# c - C指针如何处理36位地址总线？

> ID：16169254
> 
> 赞同：4
> 
> 时间：2013-04-23T12:22:16.810
> 
> 标签：c, pointers

我有以下代码片段，

```
 char *chptr;
  int *numptr;

  printf("\nSize of char is %d\n",sizeof(chptr));
  printf("\nSize of int is %d\n",sizeof(numptr)); 
```

为此，我得到了以下输出，

```
Size of char is 4
Size of int is 4 
```

显然，指针最多可以存储**2 ^(32) - 1**的地址。

我正在使用带有和的`Windows 7 32-bit`操作系统。`Code::Blocks 10.05``MingW`

但是我的系统有一个`Pentium Dual-Core`带有`36 Bit Address Bus`. 目前我有 4 GB RAM。但是假设如果我增加 RAM 的大小来表示`8 GB`， **C 指针如何处理如此扩展的地址空间？**C 指针的大小只有 32 位，但地址空间远远超过 2 ^(32)。

有什么建议么？先感谢您。

**PS**：我已经检查了 [此处](https://stackoverflow.com/questions/11304824/how-is-a-pointer-stored-in-memory)给出的解决指针中地址存储的答案，但我相信它们并没有涵盖我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T12:25:51.667

您的指针将使用的地址位于虚拟地址空间中，而不是物理地址空间中（假设您使用的是现代操作系统；您没有在问题中说）。

O/S 内核将在必要时将虚拟内存页面映射到物理地址页面，并在用户进程不知道的情况下管理整个内存系统。

如果您使用的是 32 位操作系统，那么您可能需要 2GB 的用户地址空间来寻址，当您迁移到 64 位操作系统时，这将显着增加。

查看这篇关于[虚拟内存](http://en.wikipedia.org/wiki/Virtual_memory)的维基百科文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:32:57.047

一些提示：

1.  检查您的操作系统是 32 位还是 64 位。
2.  检查您的编译器是否能够生成 64 位指针。
3.  检查您的编译器是否有 64 位指针的其他数据类型。
4.  检查您的编译器是否具有对 C 语言的扩展，例如关键字`far`等`__far`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T12:50:07.100

C 指针处理 8 GB 的最简单解决方案是再次分离代码和数据。然后，您将能够拥有 4 GB 的代码和 4 GB 的数据，因此总共 8 GB。无论如何，您不能合法地比较代码指针`0x00010000`和数据指针。`0x00010000`

但实际上，解决方案是迁移到 64 位。36 位 hack 没用；今天，128 GB 的 RAM 是完全可能的。

# iphone - 从 iPhone 中的单个图像中分割多个部分？

> ID：16169256
> 
> 赞同：1
> 
> 时间：2013-04-23T12:22:22.833
> 
> 标签：iphone, uiimageview, uiimage, crop, slice

我在 iPhone 应用程序中工作，我试图从单个图像中分割多个部分，但我无法获得确切的解决方案。我想要单个图像切片多个部分，如 3x3、4x4、5x5、6x6 等......怎么做？是否有可能做到这一点？请帮我。

提前致谢

我试过这个：

```
UIImage* whole = [UIImage imageNamed:@"1.png"];
    int partId = 0;
    for (int x=0; x<=300; x+=100)
    {
        for(int y=0; y<=300; y+=100)
        {

            CGImageRef cgImg = CGImageCreateWithImageInRect(whole.CGImage, CGRectMake(x, y, 100, 100));
            UIImage* part = [UIImage imageWithCGImage:cgImg];
            UIImageView* iv = [[UIImageView alloc] initWithImage:part];

            switch (partId)
            {
                case 0:
                    img.image=iv.image;
                    break;
                case 1:
                    img2.image=iv.image;
                    break;
                case 2:
                    img3.image=iv.image;
                    break;
                case 3:
                    img4.image=iv.image;
                    break;
                case 4:
                    img5.image=iv.image;
                    break;
                case 5:
                    img6.image=iv.image;
                    break;
                case 6:
                    img7.image=iv.image;
                    break;
                case 7:
                    img8.image=iv.image;
                    break;
                case 8:
                    img9.image=iv.image;
                    break;
                default:
                    break;
            }

            partId++;
            NSLog(@"part id = %d",partId);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:45:07.260

尝试这个：

```
- (NSArray*)splitImageIntoRects:(CGImageRef)anImage
{
    CGSize imageSize = CGSizeMake(CGImageGetWidth(anImage), CGImageGetHeight(anImage));

    NSMutableArray *splitLayers = [NSMutableArray array];

    kXSlices = 3;
    kYSlices = 3;        

    for(int x = 0;x < kXSlices;x++) {
        for(int y = 0;y < kYSlices;y++) {
            CGRect frame = CGRectMake((imageSize.width / kXSlices) * x,
                                 (imageSize.height / kYSlices) * y,
                                 (imageSize.width / kXSlices),
                                 (imageSize.height / kYSlices));

            CALayer *layer = [CALayer layer];
            layer.frame = frame;                                                    
            CGImageRef subimage = CGImageCreateWithImageInRect(drawnImage, frame);
            layer.contents = (id)subimage;
            CFRelease(subimage);
            [splitLayers addObject:layer];
        }
    }
    return splitLayers; 
} 
```

注意：要获得 CGImageRef：

```
CGImageRef anImage = [myUIImage CGImage]; 
```

将 CGImageRef 转换为 UIImage

```
CALayer *layer = [splitLayers objectAtIndex:0];
CGImageRef imgRef = layer.contents;
UIImage *img = [[UIImage alloc] initWithCGImage:imgRef];
ImageView1.image = img; 
```

# jakarta-ee - 在 TomEE 中使用 Weld CDI 而不是 OpenWebBeans

> ID：16169264
> 
> 赞同：2
> 
> 时间：2013-04-23T12:22:34.497
> 
> 标签：jakarta-ee, cdi, jboss-weld, apache-tomee, weld

我想使用 Mojarra 和 Weld 在 Apache TomEE 上运行 WebApp。

我将“javax.faces-2.1.21.jar”和“weld-servlet.jar”放在我的/WEB-INF/lib 目录中。我还在我的 WEB-INF 文件夹中添加了一个空的“beans.xml”。我的“web.xml”看起来像这样：

**/WEB-INF/web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">

  <display-name>TestWeldOnTomEE</display-name>

  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>

  <servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
  </servlet-mapping>
  <context-param>
    <param-name>javax.faces.PROJECT_STATE</param-name>
    <param-value>Development</param-value>
  </context-param>

  <listener> 
    <listener-class>org.jboss.weld.environment.servlet.Listener</listener-class>
  </listener>

</web-app> 
```

在 Tomcat 上部署应用程序可以正常工作，但使用 TomEE 我在服务器启动时收到以下错误：

```
SEVERE: Error configuring application listener of class org.jboss.weld.environment.servlet.Listener
java.lang.ClassNotFoundException: org.jboss.weld.environment.servlet.Listener
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1713)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1558)
    at org.apache.tomee.catalina.LazyStopWebappClassLoader._loadClass(LazyStopWebappClassLoader.java:103)
    at org.apache.tomee.catalina.LazyStopWebappClassLoader.loadClass(LazyStopWebappClassLoader.java:98)
    at org.apache.tomee.catalina.JavaeeInstanceManager.newInstance(JavaeeInstanceManager.java:54)
    at org.apache.tomee.catalina.JavaeeInstanceManager.newInstance(JavaeeInstanceManager.java:48)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4733)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5291)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722) 
```

是否因为 TomEE 已经使用了另一个 CDI 框架 (OpenWebB) 而存在问题？是否有可能让 TomEE 与 Weld 一起运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T15:55:56.130

您绝对可以让 TomEE 使用 Mojarra 而不是 MyFaces。但是，由于 CDI 实现的集成方式很复杂，因此无法使用 Weld 代替 OpenWebBeans。

要改用 Mojarra，只需物理删除`<tomee-home>/lib/myfaces-*.jar`文件并将 Mojarra impl 和 api jar 放在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-22T15:28:52.310

您发布的代码中的基本问题是 org.jboss.weld.environment.servlet.Listener 只是普通 ServletContainers 所需要的。例如，如果您没有完整的 Java EE 服务器，则将 Weld 集成到 jetty 或 Tomcat 中。（Apache OpenWebBeans中的挂件是WebBeansConfigurationListener）

但是 TomEE 是一个完整的 JavaEE6 服务器！因此，它默认启用了 CDI。您不需要自己添加任何内容。

# jquery - Colorbox 打开两次/乘法

> ID：16169265
> 
> 赞同：2
> 
> 时间：2013-04-23T12:22:35.350
> 
> 标签：jquery, wordpress, colorbox, multiplication

我在使用彩盒时遇到问题。我想通过颜色框在 WP 中打开附件页面。页面有几个不同大小的图像（横向和纵向），因此颜色框的宽度和高度必须灵活。使用默认数据类型是有效的，但是当我第二次单击图像时，似乎最后一个颜色框没有正确关闭。结果，它运行了两个颜色框。每次单击图像时，颜色框都会进行乘法运算。知道如何解决这个问题吗？谢谢你。

```
<script>
  $(document).ready(function(){
    $('.lightbox').colorbox();
  });
</script>

<div class='image-wrap'>
  <dl class='gallery-item'>
    <dt class='gallery-icon'>
      <a class="lightbox" href='http://localhost/Maize/?attachment_id=122' title='8'>
        <img width="250" height="190" src="http://localhost/Maize/wp-content/uploads/2013/04/8-250x190.jpg" class="attachment-thumbnail" alt="8" />
      </a>
    </dt>
  </dl>
  <dl class='gallery-item'>
    <dt class='gallery-icon'>
       <a class="lightbox" href='http://localhost/Maize/home/home-page/attachment/7/' title='7'>
         <img width="250" height="190" src="http://localhost/Maize/wp-content/uploads/2013/04/7-250x190.jpg" class="attachment-thumbnail" alt="7" />
       </a>
    </dt>
  </dl>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T09:09:13.753

在打开新颜色框之前，您是否关闭了前一个颜色框？如果没有，您可以尝试调用 $.colorbox.close(); 当您希望第一个灯箱关闭时。

# asp.net - 通过服务器asp.net中的ajax获取数据表单

> ID：16169267
> 
> 赞同：0
> 
> 时间：2013-04-23T12:22:42.650
> 
> 标签：asp.net, jquery

我尝试通过 Ajax 将表单发送到另一个页面的服务器端，保存它并留在同一页面中。

阿贾克斯代码：

```
function SaveJS() {
    $.ajax({
        type: "POST",
        url: 'http://' + $('#ip').val() + 'EditSochen.aspx?id=3',
        data: $('#form1').serialize(),
        success: function () {
            $('#div2').css("display", "none")
        }
    });
} 
```

'http://' + $('#ip').val() + 'EditSochen.aspx?id=3' 页面中的服务器代码：

```
if (Page.IsPostBack)
        {
            Response.Clear();            //clears the existing HTML
            Response.ContentType = "text/plain";  //change content type
            Response.Write("fgf");    //writes out the new name
            Response.End();             //end
        } 
```

它到达另一个页面的服务器端但返回另一个页面而不是留在同一页面，为什么？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:04:44.693

我发现了问题 - 我需要`return false`从`SaveJS()`func.

**代码：**

```
function SaveJS() {
    $.ajax({
        type: "POST",
        url: 'http://' + $('#ip').val() + 'EditSochen.aspx?id=3',
        data: $('#form1').serialize(),
        success: function () {
            $('#div2').css("display", "none")
        }
    });
return false;
} 
```

# windows-phone-8 - 下载大文件时出现异常

> ID：16169270
> 
> 赞同：0
> 
> 时间：2013-04-23T12:22:50.820
> 
> 标签：windows-phone-8, out-of-memory

我正在开发一个音频/视频相关的应用程序，用户需要下载视频才能在本地播放，为此我正在使用此代码-

```
private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        WebClient wb = new WebClient();

        wb.OpenReadAsync(new Uri("Video url", UriKind.Absolute)); 
        wb.DownloadProgressChanged += wbchange;
    }
    private void wbchange(object sender, DownloadProgressChangedEventArgs e)
    {
          progressBar2.Value = e.BytesReceived;
          progressBar2.Maximum = e.TotalBytesToReceive;   
    } 
```

它适用于小视频，但显示大视频错误错误是 -`System.OutOfMemoryException: Insufficient memory to continue the execution of the program. at MS.Internal.FrameworkCallbacks.NotifyManagedDebuggerOnNativeOOM()`

请建议我一些方法来摆脱这个或任何其他方式来下载视频以获得更好的性能？

谢谢关心：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:16:01.837

对于这种情况，您可以使用后台传输服务。已经成功下载大文件（大约 50/60mo）。

仅适用于 3g 或更多。

msdn： http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/hh286419](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh286419(v=vs.105).aspx) (v=vs.105).aspx 示例： http: [//www.jeffblankenburg.com/2011/11/26/ 31-days-of-mango-day-26-background-file-transfer/](http://www.jeffblankenburg.com/2011/11/26/31-days-of-mango-day-26-background-file-transfer/)

# ios - 具有自定义排序顺序的 UISearchDisplayController/NSFetchedResultsController

> ID：16169271
> 
> 赞同：1
> 
> 时间：2013-04-23T12:22:54.327
> 
> 标签：ios, cocoa-touch, nsfetchedresultscontroller, uisearchdisplaycontroller, nssortdescriptor

我正在我的应用程序中实现搜索功能。我希望用户在给定实体的多个属性中同时查找一个单词。

以下是具有 3 个字符串属性的实体的示例：**Person** (firstName, lastName, notes)

让我们使用 3 个人的模拟数据集：

*   “Emily”、“Bridges”、“她很快就会到镇上。”
*   “约翰尼”、“威廉姆斯”、“这家伙真的很酷。”
*   “Will”、“Smith”、“他什么都不记得了”。

现在，让我们假设用户正在查找出现**“will”**并且我们运行不区分大小写的搜索。由于使用了**orPredicateWithSubpredicates ，前面描述的所有三个人都将匹配单词“will”**

理想情况下，出于相关目的，我希望按此顺序显示结果：

*   “Will”、“Smith”、“他什么都不记得了”。
*   “约翰尼”、“威廉姆斯”、“这家伙真的很酷。”
*   “Emily”、“Bridges”、“她很快就会到镇上。”

对于此搜索功能，“firstName”比“lastName”更相关，后者都比“notes”属性更相关。

由于我使用的是 UISearchDisplayController，因此我还使用了需要**NSSortDescriptor的****NSFetchedResultsController**。我现在的问题是我将使用什么属性/键来初始化 NSSortDescriptor？

我已经看过很多帖子，并认为瞬态属性可以帮助我解决这个问题，但我无法弄清楚如何/何时设置这个瞬态属性，它可以命名为“sortKey”并设置为这些价值观：

*   1：对于“firstName”的匹配
*   2：匹配“lastName”
*   3：对于“笔记”的匹配

最终我想我可以尝试运行三个不同的请求，但后来我不得不放弃使用 NSFetchedResultsController 及其所有魔力......

我不知道我是否达到了 NSFetchedResultsController 的限制或其他东西，但任何指针都会很棒，谢谢！

乔斯。

# c# - 在 asp.net 中动态添加表不清除样式

> ID：16169274
> 
> 赞同：0
> 
> 时间：2013-04-23T12:23:11.143
> 
> 标签：c#, asp.net

我有一个表，它的行是在后面的代码中动态添加的。该表位于更新面板内：

```
 <asp:UpdatePanel runat="server" ID="upnlPR">
        <ContentTemplate>
            <asp:Table ID="tblPR" runat="server">
            </asp:Table>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

当我在后面的代码中执行 tblPR.Rows.Clear() 时，表格再次正确绘制，但似乎在重绘之前应用于该位置的行的格式仍然应用于不正确的单元格. 知道为什么会这样吗？

我曾尝试使 UpdatePanel updatemode 有条件并在清除行后执行 upnlPR.Update() 但此问题仍然存在。特别的问题是：应用于该行号/单元格位置中的单元格的样式仍然适用，该行号/单元格位置中的单元格的列跨度仍然适用。

谢谢！

(asp.Net, C#)

设置单元格样式`cell.CssClass = competencyAchievementView.ManagerScore > competencyAchievementView.UserScore ? "manWorseScore" : "manBetterScore";`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:54:44.223

我认为您应该简单地删除行或整个表格控件并将其添加回页面。clear() 函数旨在删除内容，而不是样式。但也许你也可以，在你的绑定中（也许它也有助于向我们展示这一点），简单地初始化它？我的意思是，如果我理解得很好，除了类 manWorseScore 和 manBetterScore 之外，您还有第三种可能性（没有风格），对吧？

# javascript - Gradient Colors OnMouseOver（禁用样式颜色）？？？

> ID：16169282
> 
> 赞同：0
> 
> 时间：2013-04-23T12:23:24.287
> 
> 标签：javascript, html, css, gradient, onmouseover

所以我创建了一个表格，并尝试为其添加鼠标悬停效果，这样我就可以更改单元格的背景颜色。显然，当背景（在样式中）没有设置颜色时，一切都像魅力一样。但是当它出现时，我想不出它是我们的......有什么帮助吗？这是我的代码：

```
<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
 </head>
<script type="text/javascript">
    var link = true;
</script>
<body>
<style type="text/css">
    .tableX td
    {
        width: 33.33%;
        padding: 5px;
        font-family: 'Sans Serif',segoe UI light, Century Gothic;
        color: #FFFFFF;

    }
        .tableX td.largeLightBlue
        {
            height: 150px;
            -moz-border-radius: 7px;
            -webkit-border-radius: 7px;
            border-radius: 7px;
            width: 33.33%;
            font-size: 18px;
            background: linear-gradient(#1ba3c7, #13738C);
            text-align: left;
            font-family: 'Segoe UI','Century Gothic', sans-serif;
            vertical-align: text-top;
            padding-left: 10px;
            cursor: pointer;
        }
        .tableX td.largeGreen
        {
            height: 150px;
            -moz-border-radius: 7px;
            -webkit-border-radius: 7px;
            border-radius: 7px;
            width: 33.33%;
            font-size: 18px;
            background: linear-gradient(#35a44f, #297E3D);
            text-align: left;
            font-family: 'Segoe UI','Century Gothic', sans-serif;
            vertical-align: text-top;
            padding-left: 10px;
            cursor: pointer;
        }
        .tableX td.largeBlue
        {
            height: 150px;
            -moz-border-radius: 7px;
            -webkit-border-radius: 7px;
            border-radius: 7px;
            width: 33.33%;
            font-size: 18px;
            background: linear-gradient(#0C63CD, #07366F);
            text-align: left;
            font-family: 'Segoe UI','Century Gothic', sans-serif;
            vertical-align: text-top;
            padding-left: 10px;
            cursor: pointer;
        }

    .tableX
    {
        width: 740px;
        border-collapse: separate;
        border-spacing: 10px;
    }
</style>
<table class="tableX">
    <tr>
        <td onmouseover="style.backgroundColor='#E01B6A';" onmouseout="style.backgroundColor='#FAD957';" onclick="if (link) window.location ='http://www.yahoo.com'" class="largeLightBlue"  >
            <b>Some sample text</b><br />
            <ul>
                <li style="font-size: 12px; color: #ffffff; vertical-align: text-top;">Bullet one</li>
                <li style="font-size: 12px; color: #ffffff; vertical-align: text-top;">Bullet two</li>
                <li style="font-size: 12px; color: #ffffff; vertical-align: text-top;">Bullet three</li>
            </ul>
        </td>
        <td onclick="if (link) window.location ='http://www.google.com'" class="largeGreen">
            <b>Second Sample text</b>
            <ul>
                <li style="font-size: 12px; color: #ffffff; vertical-align: text-top;">Bullet one</li>
                <li style="font-size: 12px; color: #ffffff; vertical-align: text-top;">Bullet two</li>
                <li style="font-size: 12px; color: #ffffff; vertical-align: text-top;">Bullet three</li>
                <li style="font-size: 12px; color: #ffffff; vertical-align: text-top;">Bullet four</li>
            </ul>
        </td>
        <td onclick="if (link) window.location ='http://www.bing.com'" class="largeBlue" >
            <b>Third Sample Box</b>
            <ul>
                <li style="font-size: 12px; color: #ffffff; vertical-align: text-top;">Bullet one</li>
                <li style="font-size: 12px; color: #ffffff; vertical-align: text-top;">Bullet two</li>
            </ul>
        </td>
    </tr>

</table>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:49:14.503

`onmouseover`您只针对您在 CSS 中使用的一个`background-color`，而不是`background`属性。设置`style.background`而不是`style.backgroundColor`解决问题。[JSFiddle 示例](http://jsfiddle.net/JWv63/)

# vaadin - Vaadin 7 验证（BeanValidator 和 setrequired）

> ID：16169286
> 
> 赞同：2
> 
> 时间：2013-04-23T12:23:32.373
> 
> 标签：vaadin, validation, bean-validation

嗨，我刚刚启动 Vaadin 7 并开始`BeanValidator`工作。但是，我有一些问题。我正在使用的代码如下：

```
BeanItem<RegisterBean> item = new BeanItem<RegisterBean>(new RegisterBean());
final FieldGroup binder = new FieldGroup(item);
final TextField email = new TextField("email");
email.addValidator(new BeanValidator(RegisterBean.class, "email")); 
```

使用 BeanValidator 可以很好地验证。使用`@NotNull`标签，我也可以验证 Null 值。但是，我想给用户视觉提示，表单中的字段不能留空。为此，我使用了：

```
email.setRequired(true); 
```

但是，`setRequired`为表单添加 BeanValidation 后不再起作用？

这是一个限制吗？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:47:14.373

您可能应该依赖 bean 验证本身并使用字段组。

我的模型如下所示：

```
@NotNull(message="Please enter a valid email address.")
@Email(message="Please enter a valid email address.")
@Size(min = 3, max = 255, message="Please enter a valid email address.")
@Column(name="P_EMAIL", nullable=true, length=255)
private String email; 
```

在您看来，要么 buildAndBind

```
Field<?> email = binder.buildAndBind("email"); 
```

`@PropertyId("email")`或者在您的字段声明中使用注释。剩下的就是魔法。

而不是`FieldGroup`使用`BeanFieldGroup`.

一个问题是验证是初步的。所以点击安装验证器。可以在此处找到有关该主题的更多信息：http: [//morevaadin.com/content/bean-validation-and-vaadin-comprehensive-example/](http://morevaadin.com/content/bean-validation-and-vaadin-comprehensive-example/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-12T01:34:08.723

要完成上面的示例，使用 BeanFieldGroup，因为它有验证器，您可以使用 AbstractField 的 setValidationVisible 方法关闭初步验证，然后在 blurListener 和按钮中打开 clickListeners。

```
AbstractTextField cName = binder.buildAndBind("Name","name", AbstractTextField.class); 
cName.setNullRepresentation("");
cName.setValidationVisible(false);
cName.addBlurListener(new MyBlurListener(cName)); //<-- turn on setValidationVisible there

myButton.addClickListener(event -> {
   try {
       cName.setValidationVisible(true);
       binder.commit();
   } catch (CommitException e){
       Notification.show("Sending error");
   }
}); 
```

# asp.net - 将 html5 添加到具有 IE 兼容性的现有项目中

> ID：16169287
> 
> 赞同：1
> 
> 时间：2013-04-23T12:23:33.520
> 
> 标签：asp.net, html

我有一个在 IIS 上定义的与 IE8 兼容的网站，因为控件在 IE9 上无法正常工作。我们通过在 IIS 上定义来做到这一点：

```
X-UA-Compatible: IE=EmulateIE8 
```

我想将 HTML5 代码添加到少数页面。在不丢失兼容模式的情况下执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:29:57.810

您正在寻找的可能是[Modernizr](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)

# php - 如何使用 php 检查 smtp 服务器是否正常工作

> ID：16169295
> 
> 赞同：3
> 
> 时间：2013-04-23T12:24:16.140
> 
> 标签：php, ftp, smtp

我想使用 php 检查我的网站 smtp 是关闭还是打开。我尝试使用 fsockopen 连接到服务器上的 25 端口，然后在 smtp 服务运行时返回 true。哪个是测试是否使用 php 脚本运行 smtp 或 ftp 的最佳方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:35:32.273

您说的是 smtp 服务器，因此您必须启用 pear 框架。我有一个链接[http://www.authsmtp.com/php-pear-mail/](http://www.authsmtp.com/php-pear-mail/)可以提供帮助。或者你可以这样做：

```
$f = fsockopen('smtp host', 25) ;
if ($f !== false) {
    $res = fread($f, 1024) ;
    if (strlen($res) > 0 && strpos($res, '220') === 0) {
        echo "Success!" ;
    }
    else {
        echo "Error: " . $res ;
    }
}
fclose($f) ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:34:34.247

对于 smtp，您可以这样使用[stream_socket_client()](http://php.net/manual/en/function.stream-socket-client.php)：

```
<?php
$timeout = 30; // your own timeout value
$connection_type = 'tcp'; // may be ssl, sslv2, sslv3 or tls
$host = 'myserver';
$port = 25;

$fp = stream_socket_client("{$connection_type}://{$host}:{$port}", $errno, $errstr, $timeout);

if (!$fp) {
    echo "$errstr ($errno)";
} 
```

但对于 FTP，我不确定。

这肯定不是最好的解决方案，但如果它可能有帮助......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T12:27:58.353

我会使用 PHP 邮件功能：

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

将电子邮件实际发送到另一个稳定的帐户（可能是 gmail？）。该脚本必须监视此帐户并验证是否收到了预期的消息。供参考阅读：

[通过 php 代码访问我的 gmail 收件箱](https://stackoverflow.com/questions/1385797/accessing-my-gmail-inbox-via-php-code)

# python - pyodbc sqlserver 游标十进制舍入

> ID：16169298
> 
> 赞同：1
> 
> 时间：2013-04-23T12:24:32.033
> 
> 标签：python, sql-server, django, pyodbc, freetds

我遇到了这个问题，我使用（在本例中为 fetchall）pyodbc API 中的任何 fetch 方法获取结果，十进制值被四舍五入到两个位置。在 MSSQL 数据库中，尤其是在 SQL 管理 Studio 中，当我执行存储过程时，余额、借方和贷方的值正确显示到 4 个位置。

我在 fetchall 之后尝试格式化结果集，它确实显示了四位小数，但它仍然四舍五入。例如 14.5272 => 14.5300。

在模板中，我也尝试使用 floatformat 过滤器无济于事，它仍然保持舍入：

```
<td >{{ Accounts.debits|floatformat:4 }}</td> 
```

# 模型.py

```
from django.core.cache import cache
from django.conf import settings  

class Account(models.Model):                                                                                               
    account = models.IntegerField(primary_key=True, db_column='Account')
    description = models.TextField(db_column='Description')                      
    balance = models.DecimalField(decimal_places=4, max_digits=19, db_column='Balance') 
    debits = models.DecimalField(decimal_places=4, max_digits=19, db_column='Debits')
    credits = models.DecimalField(decimal_places=4, max_digits=19, db_column='Credits')                                                           

class Meta:                                                                                                                       
    db_table = 'Account'                                                                                               
    permissions = (("view_accounts", "Can view accounts"),                                                  
    )                                                                                                                             

    @staticmethod                                                                                                                     
   def resultSet(startDate, endDate):                                                                                                
       try:                                                                                                 
           cur = connection.cursor()                                                                                                                                                                                                                                      
           cacheKey = 'Account_%s_%s' %(startDate, endDate)                                                                        
           cachedSp = cache.get(cacheKey)                                                                                            
           print cacheKey                                                                                                            
           if not cachedSp:                                                                                                          
               print 'not cached'                                                                                                    
               cur.execute('database.dbo.AccountsSelect %s, %s', (str(startDate), str(endDate)))               
               cachedSp = cur.fetchall()                                                                                             
               #for row in cachedSp:                                                                                                  
                   #if row[5]!= -1:                                                                                                   
                       #print format(row['debit'],'%4f')                                                                              
               cachedSp = cur.fetchall()                                                                                             
               cur.close()                          

               cache.set(cacheKey,cachedSp,settings.CACHE_CUSTOM_APP_SECONDS)                                                        
       except Exception, e:                                                                                                          
           print e.args                                                                                                              

       return [Account(*row) for row in cachedSp] 
```

以下是 odbc/freetds 配置文件。我使用 SQL Server 2008。Freetds v1.12、django-pyodbc v0.9 和 pyodbc v3.0.6。

# freetds.conf

```
[global]
    # TDS protocol version
    ; tds version = 8.0
    # Whether to write a TDSDUMP file for diagnostic purposes
    # (setting this to /tmp is insecure on a multi-user system)
    ;   dump file = /tmp/freetds.log
    ;   debug flags = 0xffff

    # Command and connection timeouts
    ;   timeout = 10
    ;   connect timeout = 10

    # If you get out-of-memory errors, it may mean that your client
    # is trying to allocate a huge buffer for a TEXT field.
    # Try setting 'text size' to a more reasonable limit
    text size = 64512

[tes-db-1]
    host = tes-db-1.doamin.test.com
    port = 1433
    tds version = 8.0 
```

# odbc.ini

```
[default]
Driver = FreeTDS
Description = ODBC connection via FreeTDS
Trace = No
Servername = SERVER
Database = DATABASE 
```

# odbcinist.ini

```
[FreeTDS]
Description      = TDS Driver (Sybase / MS-SQL)
Driver           = /usr/lib/x86_64-linux-gnu/odbc/libtdsodbc.so
Setup            = /usr/lib/x86_64-linux-gnu/odbc/libtdsS.so
CPTimeout        =
CPReuse          =
FileUsage        = 1
client charset   = utf-8 
```

此外，我的设置文件 (INSTALLED_APPS) 中有应用程序，并且项目已正确同步，并且我在所有应用程序中都使用缓存，我认为这不是问题的根源，如果这很重要的话。

除了这个四舍五入的问题外，一切正常，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T17:21:44.073

我想通了。所以我调用的存储过程，浮点字段的类型是**MONEY**并且被四舍五入到 2 个位置。我将其更改为**Decimal(7,4)**，现在一切正常。我没有对 odbc/freetds 配置进行任何更改，也不必使用过滤器浮点格式。再次感谢，小熊

# .net - Quartz.NET 在触发恢复触发器时获取原始触发器计划时间

> ID：16169300
> 
> 赞同：4
> 
> 时间：2013-04-23T12:24:35.617
> 
> 标签：.net, triggers, jobs, quartz.net, recovery

我在我的项目中使用 Quartz.NET 2.1.2。在大多数情况下`ICronTrigger`正在使用（例如，其中一个触发器设置为每天凌晨 4 点触发）。因为不跳过作业执行至关重要，所以创建每个作业时将 RequestRecovery 设置为 true。

```
IJobDetail jobDetail = JobBuilder.Create<ReportCreationJob>()
.RequestRecovery(true)
.Build(); 
```

如果电源关闭，或者系统忙于处理请求，触发器可能会稍微偏离计划，但最终每项工作是否成功完成至关重要。每一次失火都在处理中！

将作业的业务逻辑`ScheduledFireTimeUtc`（在本例中为凌晨 4 点）传递给作业很重要。一切正常，因为`IJobExecutionContext`除了在一种情况下会传递此信息，那就是在执行恢复作业时（电源关闭、Quartz 调度程序崩溃等情况）。

与原始触发器相比，恢复作业在上下文中设置了不同的时间戳。有没有办法检索`ScheduledFireTimeUtc`与原始触发器相同的方法。

有一种解决方法可以从中检索此信息，`context.Trigger.FinalFireTimeUtc`但仅限于创建原始作业的恢复时。但是，如果调度程序在此恢复作业期间再次崩溃，则正在创建“恢复作业的恢复”并且原始*文件*`ScheduledFireTimeUtc`丢失。

我将在下面添加来自测试客户端的其他信息。

代码打印行`IJobExecutionContext`：

```
string.Format("****{0}Job {1} with {0}Scheduled time={4} {0}Fired at={2} {0}Next scheduled time={3} {0}Recovering={5} {0}FinalFireTimeUtc={6} {0}***",
    Environment.NewLine,
    context.JobDetail.Key,
    context.FireTimeUtc.HasValue ? context.FireTimeUtc.Value.ToString("r") : "NULL",
    context.NextFireTimeUtc.HasValue ? context.NextFireTimeUtc.Value.ToString("r") : "NULL",
    context.ScheduledFireTimeUtc.HasValue ? context.ScheduledFireTimeUtc.Value.ToString("r") : "NULL",
    context.Recovering,
    context.Trigger.FinalFireTimeUtc.HasValue ? context.Trigger.FinalFireTimeUtc.Value.ToString("r") : "NULL"); 
```

执行恢复原始触发器时的测试结果（**2013 年 4 月 23 日星期二 09:45:30 GMT**是原始预定时间）：

```
***
Job TestGroup.Test10 with 
Scheduled time=Tue, 23 Apr 2013 09:51:05 GMT 
Fired at=Tue, 23 Apr 2013 09:51:45 GMT 
Next scheduled time=NULL 
Recovering=True 
FinalFireTimeUtc=Tue, 23 Apr 2013 09:45:30 GMT 
*** 
```

执行恢复触发器恢复时的测试结果（*2013*年**4 月 23 日星期二 09:45:30 GMT**是原计划时间，但在恢复级联中丢失）：

```
***
Job TestGroup.Test10 with 
Scheduled time=Tue, 23 Apr 2013 10:52:07 GMT 
Fired at=Tue, 23 Apr 2013 10:52:17 GMT 
Next scheduled time=NULL 
Recovering=True 
FinalFireTimeUtc=Tue, 23 Apr 2013 09:51:05 GMT
*** 
```

# actionscript-3 - ActionScript 3 - 从舞台上删除视频

> ID：16169303
> 
> 赞同：0
> 
> 时间：2013-04-23T12:24:49.973
> 
> 标签：actionscript-3, flash

我有一个正在舞台上播放的视频，一旦视频停止播放，我要么希望删除该视频，要么转到一个新帧。

我曾尝试使用 playheadTime 来执行此操作，但它不起作用。

这是我尝试过的代码

```
if(badVideo.playheadTime == 115)
    {
    stage.removeChild(badVideo  );
    } 
```

视频长1:55

如果有人知道我应该如何去做这将是appriciated。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:40:46.393

我想你使用 FLVPlayback ......

您需要使用 COMPLETE 事件：

```
import fl.video.VideoEvent;

badVideo.addEventListener( VideoEvent.COMPLETE , onVideoComplete);

function onVideoComplete(e:VideoEvent):void {
  badVideo.removeEventListener(VideoEvent.COMPLETE , onVideoComplete);
 // do what you want
} 
```

[文档](http://livedocs.adobe.com/flash/9.0_fr/ActionScriptLangRefV3/fl/video/FLVPlayback.html#event%3acomplete)

# bash - 如何使用 shell 脚本操作文件名

> ID：16169304
> 
> 赞同：-1
> 
> 时间：2013-04-23T12:24:50.233
> 
> 标签：bash, ubuntu

我的源文件位于 `/user/public/test.txt`

该文件`test.txt`应修改`user_test.txt`并复制到`/home/home/user_test.txt`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:25:51.913

```
mv /user/public/test.txt /home/home/user_test.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:27:43.177

`cp`可以用新名称复制文件：

```
cp /user/public/test.txt /home/home/user_test.txt 
```

如果您还想将原始文件重命名为新名称，可以使用`mv`：

```
mv /user/public/test.txt /user/public/user_test.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T12:28:20.453

问题的另一种解释：

```
file=/usr/public/test.txt
base=user_$(basename $file)
dirn=$(dirname $file)

mv $file $dirn/$base
cp $dirn/$base /home/home/$base 
```

由于您规定`bash`，上面的可移植代码可以使用：

```
file=/usr/public/test.txt
base=user_${file##*/}
dirn=${file%/*}

mv $file $dirn/$base
cp $dirn/$base /home/home/$base 
```

该代码具有自由性，因为它指出文件名中没有空格、换行符或其他特殊字符。如果你必须处理这些，你必须更加小心（自由）使用双引号。

# c++ - 使用 C 进行 Windows 注销捕获

> ID：16169305
> 
> 赞同：3
> 
> 时间：2013-04-23T12:24:58.397
> 
> 标签：c++, c, windows, winapi, event-handling

我正在尝试使用 C 在 Windows Server 2008 64 位系统上捕获注销事件。目前我正在使用此处说明的控制台注销事件代码：[http](http://www.cplusplus.com/forum/beginner/1501/) ://www.cplusplus.com/forum/beginner/1501/ （Gray Wolf 的第 6 条评论，他的第二个编码示例）将附在本文的末尾.

这段代码有几个问题。它可以独立运行，并且在用户启动程序时运行良好。当我开始向我们的一些专有代码添加调用时，它会停止捕获注销事件。没有 GUI 代码，这都是控制台。任何人都知道会阻止这个工作吗？似乎比较挑剔。

此外，如果该程序在登录期间由另一个程序自动启动（在用户级别和相同的会话 ID 启动，就好像您要双击 .exe 并自己激活它一样）它也无法捕获注销事件。任何想法都会很棒。

示例：如果由用户手动启动，这可以独立运行。

```
#include <windows.h>
#include <tchar.h>
#include <signal.h>

BOOL WINAPI ConsoleHandler(
    DWORD dwCtrlType   //  control signal type
);

static int startup;

int main(int argc, char *argv[])
{
    if (SetConsoleCtrlHandler( (PHANDLER_ROUTINE)ConsoleHandler,TRUE)==FALSE)
    {
        // unable to install handler...
        // display message to the user
        printf("Unable to install handler!\n");
        return -1;
    }

    startup=1;

    while(1)
    {

    }
}

BOOL WINAPI ConsoleHandler(DWORD CEvent)
{
    char mesg[128];
    static   FILE * pFile;

    char FileName[32] = "ControlHandle.txt";
    if(startup) {
        /* create the filename */

     pFile = fopen(FileName, "at");
     printf("creating a file\n");

    fprintf(pFile, "This file contains the message when a control character is received.\n\n\n");
    fclose(pFile);
    startup=0;
    }

    switch(CEvent)
    {
    case CTRL_C_EVENT:
        pFile = fopen(FileName, "at");
        if(pFile > 0){
            printf("Got File Handle");
        }
fprintf( pFile,"in handler got an CTRL_C_EVENTevent\n" );
fclose(pFile);
        break;
    case CTRL_BREAK_EVENT:
pFile = fopen(FileName, "at");
fprintf( pFile,"in handler got an CTRL_BREAK_EVENTevent\n" );
fclose(pFile);
        break;
    case CTRL_CLOSE_EVENT:
       pFile = fopen(FileName, "at");
fprintf( pFile,"in handler got an CTRL_CLOSE_EVENTevent\n" );
fclose(pFile);
        break;
    case CTRL_LOGOFF_EVENT:
        pFile = fopen(FileName, "at");
fprintf( pFile,"in handler got an CTRL_LOGOFF_EVENTevent\n" );
fclose(pFile);
        break;
    case CTRL_SHUTDOWN_EVENT:
        pFile = fopen(FileName, "at");
fprintf( pFile,"in handler got an CTRL_SHUTDOWN_EVENTevent\n" );
fclose(pFile);
        break;

    }
    return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T18:20:06.250

您可以收听[WM_QUERYENDSESSION](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376890)或[WM_ENDSESSION](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376889)消息。只要您有一个带有消息循环的窗口（不必可见），这在 GUI 和控制台应用程序中都有效。

**编辑**：检查[这个线程](http://social.msdn.microsoft.com/Forums/en-US/windowscompatibility/thread/abf09824-4e4c-4f2c-ae1e-5981f06c9c6e)，尤其是上一篇文章中的代码。

额外信息：

*   [Windows Vista 中的应用程序关闭更改](http://msdn.microsoft.com/en-us/library/ms700677)
*   [注销](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376876)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-10T06:36:53.717

有两种方法

*   如果您使用的是控制台应用程序，那么您可以使用

    ```
    main()
    {
    ...
    SetConsoleCtrlHandler( (PHANDLER_ROUTINE) CtrlEventHandler, TRUE );
    ...
    }
    BOOL CtrlEventHandler(DWORD eventType)
    {
    if(eventType == CTRL_C_EVENT)
    {
    printf(""Sample text");
    return FALSE
    }
    else if(eventType == CTRL_LOGOFF_EVENT)
    {
    printf(""Sample text");
    return FALSE
    }
    } 
    ```

*   如果您使用的是基于 Windows UI 的应用程序，那么您可以使用虚拟函数 WindowProc 并使用以下代码

    ```
    LRESULT CMainDlg::WindowProc(UINT message, WPARAM wParam, LPARAM lParam)    
    {
    if(message == WM_ENDSESSION)
    {
    if(lParam == ENDSESSION_LOGOFF)
    {
    /*Handle event*/
    }
    }
    return CDialogEx::WindowProc(message, wParam, lParam);
    } 
    ```

    对于第一个选项，您可以使用[此 MSDN 链接](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685049%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T13:37:58.473

您可能必须将代码实现为服务，因为您希望程序运行到最后并在登录的最开始时开始。这样，程序在系统模式下运行，并且在开始强制相当用户级别（包括管理程序）时不会关闭 yoru 程序。

# jquery - 使用数据表进行 Jquery 序列化会产生重复

> ID：16169315
> 
> 赞同：0
> 
> 时间：2013-04-23T12:25:43.497
> 
> 标签：jquery, forms, serialization

我有一个 jquery 数据表，我用服务器端数据填充它。数据表列被分配了事件，如（编辑、删除）。比我选择要编辑的行之一，例如单击编辑按钮并在 modal-box 中显示表单。我编辑元素并保存数据。接下来，我打开另一行并执行相同操作，但这次之前编辑的数据将被缓存并与新数据一起序列化。Firebug 在发送时显示

```
Parameters

action  edit
action  edit
amt 
amt test
au_nr   
au_nr 
```

使用以下 jquery 触发保存事件

```
$(document).on('click', '#save', function ( e )  {
    $.ajax({
           type: "POST",
           url: 'action.php',
           data: $("#edit_form_person").serialize(), // serializes the form's elements.               
           success: function(data)
           {
               alert('Data Saved!'); // show response from the php script.           
           },
            error:function(){             
               alert('Error!');                
            }
         });
}); 
```

**固定的**

对话框必须在关闭时销毁

```
$(document).on('click', '#form', function(e) {
    e.preventDefault();         

    $('<div></div>').load($(this).attr('href')).dialog({
        title: $(this).attr('title'),
        //autoOpen: false,
        modal: true,            
        draggable: true,
        width:900,
        position: ['top',50], 
        close: function(event, ui) 
        { 
            $(this).dialog('destroy').remove()
        } 
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:30:12.113

为什么不在模式打开时清除表单字段....我认为这应该可以解决问题

```
 $('#formID').find('input[type=text], textarea').val(''); 
```

# java - 使用 java，浏览器在 Windows 7 中工作，而不是 Windows XP 从 GUI 打开组件？

> ID：16169317
> 
> 赞同：0
> 
> 时间：2013-04-23T12:25:51.217
> 
> 标签：java, swing

我正在尝试从我的 GUI 中打开一个组件的详细信息。它在 Windows 7 中可以正常打开。但是当我从 Windows XP 中打开它时抛出错误，并显示警告对话框“未找到默认浏览器”。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:44:39.293

错误消息对我来说似乎很不言自明。您尚未在您的平台中定义任何默认浏览器，因此系统无法执行您请求的操作。在 WindowsXP 上可以通过以下步骤设置默认浏览器：

1.  打开控制面板
2.  选择添加/删除程序
3.  在左侧，按“设置程序访问和默认值”
4.  选择您的程序并按“确定”

![在此处输入图像描述](https://i.stack.imgur.com/BSPOg.gif)

# java - 单击按钮时没有敲击声 - android

> ID：16169323
> 
> 赞同：2
> 
> 时间：2013-04-23T12:26:10.917
> 
> 标签：java, android, button, android-xml

`Button`当用户点击Android 中的任何 ui 元素时，我没有听到通常听到的声音。

这是我的按钮 xml

```
<Button
    android:id="@+id/continue_btn"
    android:layout_width="280dp"
    android:layout_height="45dp"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="82dp"
    android:background="@drawable/continue_btn_bg"
    android:shadowColor="#000000"
    android:shadowDx="-1"
    android:shadowDy="-1"
    android:shadowRadius="2"
    android:text="CONTINUE"
    android:textSize="20sp" /> 
```

当我按下这个按钮时，声音就没有了。触摸声音在 Android 设置中启用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T12:28:06.627

利用 `button.playSoundEffect(SoundEffectConstants.CLICK);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-13T23:02:52.330

我体验过，一旦你附加了任何动作，系统就会自动播放声音。例如 xml 中的“onClick”。

# c# - 如何在C#中显示元素子节点的属性值？

> ID：16169324
> 
> 赞同：0
> 
> 时间：2013-04-23T12:26:11.890
> 
> 标签：c#, asp.net, .net

我应该如何显示元素的子节点属性中包含的值？请考虑以下示例：

```
 <?xml version="1.0" encoding="utf-8"?>
    <Segments>
        <Segment ID="AAA">
            <Elements>

                <Element ID ="11" />

                <Element ID ="22" El/>

                <Element ID ="33" />
            </Elements>
         </Segment>
    </Segments> 
```

C# 代码

```
XmlDocument xmlDocument = new XmlDocument();
xmlDocument.Load(MyXMLFileLocation);

XmlNodeList xnList = xmlDocument.SelectNodes(/Segments/Segment[@ID='AAA']/Elements);
foreach (XmlNode xn in xnList)
{
    if (xn.HasChildNodes)
    {
        foreach (XmlNode childNode in xn.ChildNodes)
        {

            // How should I fetch the attributes of childnodes here. I have to show the value contained in ID attributes
         }
    }  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T12:29:17.180

尝试`childNode.Attributes["ID"].Value;`这样你就可以获得它的价值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:33:26.100

尝试这个：

```
XmlDocument xmlDocument = new XmlDocument();
    xmlDocument.LoadXml(xml);

    XmlNodeList xnList = xmlDocument.SelectNodes("/Segments/Segment[@ID='AAA']/Elements");
    foreach (XmlNode xn in xnList)
    {
        if (xn.HasChildNodes)
        {
            foreach (XmlNode childNode in xn.ChildNodes)
            {
                string id = childNode.Attributes["ID"].Value;
            }
        }
    } 
```

# jquery - 将类动态分配到列表

> ID：16169326
> 
> 赞同：0
> 
> 时间：2013-04-23T12:26:17.047
> 
> 标签：jquery, menuitem, submenu

我正在写作是因为我有一个将动态类分配给列表的问题。这是因为您可能没有很好地运行子项。我的代码是：

```
<nav id="menu">
     <div class="container">
        <div class="fourteen columns" style="width: 765px">

        <ul>
            <li class="current">
                <a href="#storia" >ABOUT US</a>
                                    <ul>
                                        <li><a href="#storia">STORIA</a></li>
                                        <li ><a href="#team" >TEAM</a></li>
                                    </ul>
            </li>
            <li>
                <a href="#fianco">SERVICES</a>
                        <ul>
                            <li><a href="#fianco" >COMPETENZA</a></li>
                            <li><a href="#referenze">REFERENZE</a></li>

                        </ul>
            </li>
    </ul> 
```

和 Javascript：

```
//build dropdown
$("<select />").appendTo("#menu");

// Create default option "Go to..."
$("<option />", {
    "selected": "selected",
    "value"   : "",
    "text"    : "Go to..."
}).appendTo("nav select");  

// Populate dropdowns with the first menu items
$("#menu li a").each(function() {
    var el = $(this);
    $("<option />", {
        "value"   : el.attr("href"),
        "text"    : el.text()
    }).appendTo("nav select");
});

//make responsive dropdown menu actually work           
$("nav select").change(function() {
    window.location = $(this).find("option:selected").val();
}); 
```

感谢大家帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:37:34.573

问题是您只是在更改窗口的位置，而不是实际单击元素。这就是为什么没有分配班级的原因。将最后一部分更改为以下内容：

```
$("nav select").change(function () {
    var link = $(this).val();
    if( link != "") //don't do anything for "Go To"
        $('#menu li a[href=' + link + ']')[0].click(); //simulate click
}); 
```

编辑：查看完整的 jsfiddle：http: [//jsfiddle.net/6gfpv/1/](http://jsfiddle.net/6gfpv/1/)

# javascript - 下拉列表错误（JS）

> ID：16169330
> 
> 赞同：0
> 
> 时间：2013-04-23T12:26:25.317
> 
> 标签：javascript, html

如果选择了该值，我想为该值添加 +10%，但在我可以实现它之前，我需要使其正常工作，页面的第一个不应该刷新，当我添加一个值然后我想改变它到另一个我希望从另一个文本框中减去旧值......我尝试了一个简单的 if/else if / else 语句，但由于第一个错误它不起作用，我什至不确定它是工作正常。这是代码：

```
<!doctype html>

<html>
<head>
    <title>lol</title>
    <meta charset="utf-8">

</head>
<body>
    <form action="">
        <input type="text" id="hp">
        <input type="text" id="ea">
        <input type="text" id="ed">
        <input type="text" id="pa">
        <input type="text" id="pd">
        <input type="text" id="sp">

        <select>
            <option value="hp">HP</option>
            <option value="ea">EA</option>
            <option value="ed">ED</option>
            <option value="pa">PA</option>
            <option value="pd">PD</option>
            <option value="sp">SP</option>
        </select>
        <input type="submit" id="sub" onClick = "return at()">
    </form>

    <script type="text/javascript">
        function at () {
            var a = document.form.select.options,
                i = document.form.select.selectedIndex,
                ea = Number(document.form.ea.value),
                ed = Number(document.form.ed.value),
                hp = Number(document.form.hp.value),
                pd = Number(document.form.pd.value),
                pa = Number(document.form.pa.value),
                sp = Number(document.form.sp.value),
                eaS,edS,pdS,paS,spS,hpS = 0;

            if(a[i].text === "hp"){
                hpS = hp*0.1;
            }else if(a[i].text === "ea"){
                eaS = ea*0.1
            }else if(a[i].text === "ed"){
                edS = ed*0.1
            }else if(a[i].text === "pa"){
                paS = pa*0.1
            }else if(a[i].text === "pd"){
                pdS = pd*0.1
            }else if(a[i].text === "sa"){
                spS = sp*0.1
            }

            document.form.ea.value = eaS;
            document.form.ed.value = edS;
            document.form.hp.value = hpS;
            document.form.pd.value = pdS;
            document.form.pa.value = paS;
            document.form.sp.value = spS;

            return false;
        }
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:41:20.770

查看 JavaScript 控制台

我愿意打赌它有类似的错误。如果您没有看到错误，请设置您的控制台，使其在页面导航中持续存在错误。

> 未捕获的类型错误：无法读取未定义的属性“选择”

您正在寻找一个名为 form 的元素和一个名为 select 的元素，但您的 form/select 没有名称。

```
<form action="">
<select> 
```

应该

```
<form name="form" action="">
<select name="select"> 
```

理想情况下，您会删除 document.name.name 语法并使用 getElementById。在 select 和 form 上放置一个 id 并以这种方式引用输入。switch 语句也是你的朋友。

您的代码可以在没有 if 语句的情况下编写，只需使用基于选择值的查找。

```
function at() {
    var sel = document.getElementById("mySelect");
    var val = sel.options[sel.options.selectedIndex].value;
    var input = document.getElementById(val);
    if (input) {
         var val = input.value;
         resetValues();
         input.value = parseFloat(val) * .1;   
    }
}

function resetValues() {
    var inputs = document.getElementById("myForm").getElementsByTagName("input");
    for (var i=0;i<inputs.length;i++) {
        var inp = inputs[i];
        if (inp.type==="text") inp.value = 0;
    }
} 
```

[JSFiddle - 运行示例](http://jsfiddle.net/3TAUA/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:44:52.360

需要很多改变：

```
<!doctype html>

<html>
<head>
    <title>lol</title>
    <meta charset="utf-8">

</head>
<body>
    <form action="">
        <input type="text" name="hp" id="hp">
        <input type="text" name="ea" id="ea">
        <input type="text" name="ed" id="ed">
        <input type="text" name="pa" id="pa">
        <input type="text" name="pd" id="pd">
        <input type="text" name="sp" id="sp">

        <select id="mySelect">
            <option value="hp">HP</option>
            <option value="ea">EA</option>
            <option value="ed">ED</option>
            <option value="pa">PA</option>
            <option value="pd">PD</option>
            <option value="sp">SP</option>
        </select>
        <input type="button" id="sub" value="Submit" onClick = "return at()">
    </form>

    <script type="text/javascript">
        function at () {
            var a = document.getElementById('mySelect').options,
                i = document.getElementById('mySelect').selectedIndex,
                ea = Number(document.forms[0].ea.value),
                ed = Number(document.forms[0].ed.value),
                hp = Number(document.forms[0].hp.value),
                pd = Number(document.forms[0].pd.value),
                pa = Number(document.forms[0].pa.value),
                sp = Number(document.forms[0].sp.value),
                eaS,edS,pdS,paS,spS,hpS = 0;

            if(a[i].text === "HP"){
                hpS = hp*0.1;
            }
            if(a[i].text === "EA"){
                eaS = ea*0.1
            }
            if(a[i].text === "ED"){
                edS = ed*0.1
            }
            if(a[i].text === "PA"){
                paS = pa*0.1
            }
            if(a[i].text === "PD"){
                pdS = pd*0.1
            }
            if(a[i].text === "SA"){
                spS = sp*0.1
            }

            document.forms[0].ea.value = eaS;
            document.forms[0].ed.value = edS;
            document.forms[0].hp.value = hpS;
            document.forms[0].pd.value = pdS;
            document.forms[0].pa.value = paS;
            document.forms[0].sp.value = spS;

            return false;
        }
    </script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T12:45:45.743

像这样的东西

```
<form action="">
    <input type="text" id="hp">
    <input type="text" id="ea">
    <input type="text" id="ed">
    <input type="text" id="pa">
    <input type="text" id="pd">
    <input type="text" id="sp">
    <select name="select">
        <option value="hp">HP</option>
        <option value="ea">EA</option>
        <option value="ed">ED</option>
        <option value="pa">PA</option>
        <option value="pd">PD</option>
        <option value="sp">SP</option>
    </select>
    <input type="button" id="sub" value="Submit">
</form>

var sub = document.getElementById("sub");

function at() {
    var a = document.forms[0].select.options,
        i = document.forms[0].select.selectedIndex,
        ea = Number(document.forms[0].ea.value),
        ed = Number(document.forms[0].ed.value),
        hp = Number(document.forms[0].hp.value),
        pd = Number(document.forms[0].pd.value),
        pa = Number(document.forms[0].pa.value),
        sp = Number(document.forms[0].sp.value),
        eaS, edS, pdS, paS, spS, hpS;

    eaS = edS = pdS = paS = spS = hpS = 0;

    if (a[i].text === "HP") {
        hpS = hp * 0.1;
    } else if (a[i].text === "EA") {
        eaS = ea * 0.1
    } else if (a[i].text === "ED") {
        edS = ed * 0.1
    } else if (a[i].text === "PA") {
        paS = pa * 0.1
    } else if (a[i].text === "PD") {
        pdS = pd * 0.1
    } else if (a[i].text === "SA") {
        spS = sp * 0.1
    }

    document.forms[0].ea.value = eaS;
    document.forms[0].ed.value = edS;
    document.forms[0].hp.value = hpS;
    document.forms[0].pd.value = pdS;
    document.forms[0].pa.value = paS;
    document.forms[0].sp.value = spS;

    return false;
}

sub.addEventListener("click", at, false); 
```

ob [jsfiddle](http://jsfiddle.net/Xotic750/gDV7E/)

我没有解决您的代码可能遇到的所有问题，只是主要部分。您可以使用这个小提琴来解决您的其他问题。

# vba - VBA 单元格引用的 Web 查询

> ID：16169331
> 
> 赞同：1
> 
> 时间：2013-04-23T12:26:27.610
> 
> 标签：vba, web, excel-web-query

我有这段代码，它应该引用公司名称的“D”列，并在 yahoo Finance 上查询股票代码。它在某些时候效果很好，其他时候我得到“选择”而不是股票代码。我不确定我做错了什么，任何帮助都将不胜感激。这是代码：

```
Sub Company2Ticker()

'Reference Microsoft internet internet controls and microsoft html library

For i = 2 To 3000
On Error Resume Next
If Len(Cells(i, 1).Value) = 0 Then Exit For

Dim IE As Object
Set IE = CreateObject("InternetExplorer.Application")
IE.Visible = False

IE.navigate "http://finance.yahoo.com/lookup?s=" & Cells(i, 4).Value

Do
DoEvents
Loop Until IE.readystate = readystate_complete
Dim Doc As HTMLDocument
Set Doc = IE.document
Dim sDD As String
sDD = Trim(Doc.getElementsbyTagName("td")(2).innertext)
Cells(i, 6) = sDD
Next i
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:01:40.197

您正在查询的网页显示广告。我的猜测是，其中一些广告（或任何其他随机出现的广告`<table>`）在您要查找的广告之前使用`<td>`了元素。该`getElementsbyTagName()`方法返回它找到的第一个结果，所以在这种情况下你不会得到你期望的结果。

我建议用`sDD = Trim(Doc.getElementsbyTagName("td")(2).innertext)`类似的东西代替：

```
Dim j As Integer
j = 2
Do
    sDD = Trim(Doc.getElementsbyTagName("td")(j).innertext)
    j = j + 1
Loop While sDD = "adchoices" 
```

编辑`Loop While`条件，直到您可以过滤任何与广告相关的结果。

希望能帮助到你。

# java - JSF 应用程序：websphere 在 ServletContextListener 之前加载 PhaseListener

> ID：16169332
> 
> 赞同：0
> 
> 时间：2013-04-23T12:26:38.627
> 
> 标签：java, servlets, jsf-2

我发现在 WAS8 中， a 上的静态初始化程序在`PhaseListener`之前执行，这`ServletContextListener`给我们带来了问题，因为 phaselistener 依赖于上下文侦听器已经完成的一些初始化。

我认为这是因为在加载类时调用了静态初始化程序，但为什么在 servlet 上下文侦听器之前加载它？我认为上下文侦听器是关于在启动 Web 应用程序时加载和运行的第一件事。

有谁知道为什么会这样？

# php - 使用 simplexml_load_string 显示数组值

> ID：16169333
> 
> 赞同：0
> 
> 时间：2013-04-23T12:26:38.970
> 
> 标签：php, xml, api

我需要从 xml 输出中获取一些数据：

```
[current_condition] => SimpleXMLElement Object
    (
        [observation_time] => 12:22 PM
        [temp_C] => 18
        [temp_F] => 64
        [weatherCode] => 116
        [weatherIconUrl] => SimpleXMLElement Object
            (
            )

        [weatherDesc] => SimpleXMLElement Object
            (
            )

        [windspeedMiles] => 4
        [windspeedKmph] => 7
        [winddirDegree] => 180
        [winddir16Point] => S
        [precipMM] => 0.1
        [humidity] => 52
        [visibility] => 10
        [pressure] => 1023
        [cloudcover] => 50
    )

[weather] => Array
    (
        [0] => SimpleXMLElement Object
            (
                [date] => 2013-04-23
                [tempMaxC] => 20
                [tempMaxF] => 69
                [tempMinC] => 7
                [tempMinF] => 44
                [windspeedMiles] => 5
                [windspeedKmph] => 8
                [winddirection] => SSW
                [winddir16Point] => SSW
                [winddirDegree] => 210
                [weatherCode] => 113
                [weatherIconUrl] => SimpleXMLElement Object
                    (
                    )

                [weatherDesc] => SimpleXMLElement Object
                    (
                    )

                [precipMM] => 0.7
            )

        [1] => SimpleXMLElement Object
            (
                [date] => 2013-04-24
                [tempMaxC] => 25
                [tempMaxF] => 76
                [tempMinC] => 8
                [tempMinF] => 46
                [windspeedMiles] => 3
                [windspeedKmph] => 5
                [winddirection] => NNE
                [winddir16Point] => NNE
                [winddirDegree] => 24
                [weatherCode] => 113
                [weatherIconUrl] => SimpleXMLElement Object
                    (
                    )

                [weatherDesc] => SimpleXMLElement Object
                    (
                    )

                [precipMM] => 0.3
            )

    ) 
```

我在用着

```
printf("<p>Current temperature %s and code %s</p>", 
    $xml->current_condition->temp_C, $xml->current_condition->weatherCode); 
```

输出温度和天气代码，并且工作正常，正在输出：

```
Current temperature 18 and code 116 
```

现在我如何从天气数组 [0] 和数组 [1] 获取 TempMaxC 和 TempMinC

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:41:21.193

您可以使用`foreach`：

```
foreach($xml->weather as $weatherObj) {
   echo "<h2>Weather on {$weatherObj->date}</h2>";
   echo "<ul>";
   echo "<li>Max temp: {$weatherObj->tempMaxC}</li>";
   echo "<li>Min temp: {$weatherObj->tempMinC}</li>";
   echo "</ul>";
} 
```

# ruby-on-rails - 无法设置 Heroku 时区

> ID：16169334
> 
> 赞同：4
> 
> 时间：2013-04-23T12:26:40.403
> 
> 标签：ruby-on-rails, heroku, timezone

我需要在本地时区显示我的应用程序显示时间。在本地，我在 application.rb 中使用 Time.zone = "Athens" ，它工作正常。

对于 Heroku，我使用了“heroku config:add TZ=Europe/Athens”。这适用于我从命令行执行的每个操作，但不适用于我的应用程序。

例如

**heroku 运行日期**：运行`date`附加到终端... up, run.4786 Tue Apr 23 15:13:51 EEST 2013

**heroku 运行控制台**：

**Order.last.created_at** => 2013 年 4 月 23 日星期二 13:15:53 EEST +03:00

**Time.zone** => (GMT+02:00) 雅典

但我把它放在我的 Rails 视图中： <%= Time.zone %> 我得到了这个： (GMT+00:00) UTC 我的时间出现在实际应用程序中的 UTC 时间。

那么，如何设置时区以应用于 heroku 上的实际 rails 应用程序（而不仅仅是控制台）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T21:05:49.430

尝试在 application.rb 中设置时区，如下所示：

```
config.time_zone = 'Athens'
config.active_record.default_timezone = :local 
```

config.active_record.default_timezone 确定在从数据库中提取日期和时间时是使用 Time.local（如果设置为 :local）还是 Time.utc（如果设置为 :utc）。Rails 的默认值为 :utc，尽管 Active Record 在 Rails 外部使用时默认为 :local。

来自： http: [//guides.rubyonrails.org/configuring.html#configuring-active-record](http://guides.rubyonrails.org/configuring.html#configuring-active-record)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:16:33.877

您是否尝试过`application.rb`按照[此处](https://stackoverflow.com/a/6118837/2942)所述设置时区？

```
 config.time_zone = 'Eastern Time (US & Canada)'
 config.active_record.default_timezone = 'Eastern Time (US & Canada)' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-23T06:26:48.257

要在 heroku 中设置时区，您可以从终端设置它

```
$ heroku config:add TZ="Asia/Jerusalem" 
```

来源 [https://coderwall.com/p/j9_e8a/set-timezone-for-your-heroku-app](https://coderwall.com/p/j9_e8a/set-timezone-for-your-heroku-app)

# javascript - jQuery从HTML表单发布数组数据

> ID：16169337
> 
> 赞同：2
> 
> 时间：2013-04-23T12:26:43.700
> 
> 标签：javascript, jquery

在我的一个 HTML 页面中，有一些具有相同名称属性的输入字段，因为我想将它们作为数组发送到另一个 PHP 以进行后端事务。

假设输入字段如下：

```
<input type="text" name="language_names[]" value="english">
<input type="text" name="language_names[]" value="french">
<input type="text" name="language_names[]" value="spanish"> 
```

现在我想用 Jquery 来发送这个数组？我为此使用**.post()**方法，我知道对于单个值，它可以作为**{key1: value1, key2:value2...}**发送，但是对于数组我该怎么做呢？我想应该接近

```
{'language_names[]' : $('#input[name="language_names[]"]').val()} 
```

但它不起作用（我检查了请求正文）。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T12:27:54.830

像这样使用jquery的序列化功能

```
// This returns a json representation of your form values
$('#formid').serialize(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:31:29.307

或者你也可以这样做：

```
{'language_names[]' : $('input[name=language_names\\[\\]]').serialize()} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T18:25:02.333

由于您需要一个包含这些特定输入元素值的简单数组，因此您可以使用以下内容：

```
function getLanguageValues() {
    var language_names = [];
    $.each($("input[name=language_names\\[\\]]"), function (indexInArray, valueOfElement) {
        language_names.push($(valueOfElement).val());
    });
    return language_names;
} 
```

这是[jsfiddle](http://jsfiddle.net/excentris/f9QBM/)。

# sql - HAVING子句后的SQL除法

> ID：16169338
> 
> 赞同：0
> 
> 时间：2013-04-23T12:26:44.990
> 
> 标签：sql, division, having

我有一个 sql 问题。我有两张桌子：

```
album (asin(pk), title, artist, price, release, label, rank)
track (album(pk), dsk, posn, song) 
```

我需要找到每首歌曲价格低于 0.5 美元的廉价专辑。如何使用 divion 过滤？到目前为止我的尝试：

```
SELECT a.title,a.price,COUNT(b.song) 
FROM album a 
JOIN track b 
ON (asin=album) 
GROUP BY album 
HAVING COUNT(a.price / b.song) 
```

我知道那是错误的。我对 SQL 很陌生，这很令人困惑。我希望你能帮助我。

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:29:05.433

您需要分组`a.asin`（我想这是一个唯一的专辑 ID，标题可能相同），因为您想要将所有曲目分组到代表专辑的一行中。`COUNT(*)`将计算分组到此记录中的行数（与专辑中的歌曲数相同）。`HAVING`计算平均歌曲价格并告诉只留下低于 0.5 的专辑：

```
SELECT a.title, a.price, COUNT(*)
FROM album a 
JOIN track b ON b.asin=b.album 
GROUP BY a.asin
HAVING a.price / COUNT(*) < 0.5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:30:08.837

```
 SELECT a.title, a.price, COUNT(b.song) 
    FROM album a
    JOIN track b ON asin=album 
GROUP BY a.title, a.price
  HAVING 1.0 * a.price / COUNT(b.song) < 0.5 
```

JOIN 条件`asin=album`看起来很可疑。通过为列添加表别名来修复它。

# html - SVG将矩形对齐到父元素的右下角

> ID：16169342
> 
> 赞同：3
> 
> 时间：2013-04-23T12:26:56.830
> 
> 标签：html, svg, alignment, rect

我正在尝试在 SVG（300x300 像素）中绘制一个矩形，并在父矩形（10x10 像素）的每个角对齐 4 个较小的矩形，但每个小的子矩形都具有父矩形的完整大小。

```
<svg width="300" height="300">
    <svg height="10" width="10" />
    <svg height="10" width="10" />
    <svg height="10" width="10" />
    <svg height="10" width="10" />
</svg> 
```

你可以在这里查看我的结果：http: [//jsfiddle.net/8tY3b/](http://jsfiddle.net/8tY3b/)

如果我将内部 SVG 元素的宽度或高度设置为 10px，它将适用于除右下角之外的所有边缘。

有没有办法将子元素对齐到其父元素的右下角？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:59:50.467

您想嵌入 svg 元素还是绘制矩形？如果您对后者感到满意，请执行以下操作：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- SO: http://stackoverflow.com/questions/15495978/svg-circled-text-on-textpath-center-align  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg"
   xmlns:xhtml="http://www.w3.org/1999/xhtml"
   xmlns:xlink="http://www.w3.org/1999/xlink"
   version="1.1"
   width="15cm" height="15cm"
   viewBox="0 0 300 300"
   preserveAspectRatio="none"
   style="background-color:white; border: solid 1px black;"
>
    <rect fill="green" stroke="blue" stroke-width="2" height="10" width="10" x="0" y="0"/>
    <rect fill="green" stroke="blue" stroke-width="2" height="10" width="10" x="290" y="0"/>
    <rect fill="green" stroke="blue" stroke-width="2" height="10" width="10" x="0" y="290"/>
    <rect fill="green" stroke="blue" stroke-width="2" height="10" width="10" x="290" y="290"/>
</svg> 
```

`none`该属性的值`preserveAspectRatio`允许任意缩放。

# c# - c#中的空解引用控制

> ID：16169347
> 
> 赞同：0
> 
> 时间：2013-04-23T12:27:04.920
> 
> 标签：c#, fortify

经过一些关于“空取消引用”的测试后，下面的代码可以“取消引用空指针，从而引发 NullException”。

```
if((validateControl as WebControl) != null)
    (validateControl as WebControl).CssClass (IsValid) ? "stack" : "overflow"; 
```

(validateControl as WebControl).CssClass 可以在上面使用时为空吗？

结果可在 Fortify 生成的文档中看到。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T12:33:46.097

`false`当它不是 a 时得到`WebControl`，`true`否则：

```
bool isWebControl = validateControl is WebControl; 
```

`null`当它不是 a 时得到`WebControl`，`WebControl`否则得到：

```
WebControl webControl = validateControl as WebControl; 
```

* * *

### 可以`(validateControl as WebControl)`为空吗？

是的，每次使用时`as`，理论上结果*可能为*空。代码分析工具看不到您刚刚检查它是否不为空，并且仍会假设下一次使用的`as`可能为空。所以你应该把它放在一个变量中并使用它来代替：

```
WebControl webControl = validateControl as WebControl;
if (webControl != null)
{
    // Here 'webControl' is surely _not_ null.
    webControl.CssClass = Page.IsValid ? "stack" : "overflow";
} 
```

* * *

### 可以`(validateControl as WebControl).CssClass`为空吗？

您从中获得的值`CssClass`可能为空。但是既然`CssClass`是一个属性，那么只要是一个属性，这个属性就会一直`validateControl`存在`WebControl`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T12:32:12.047

如何重新格式化您的代码以更明确。

```
var webControl = validateControl as WebControl;
if(webControl != null)
{
    var cssClass = IsValid ? "stack" : "overflow";
    webControl.CssClass = cssClass;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T12:33:13.140

是的，它可以。如果它很重要，一旦您知道 validateControl 不为 null 并且是 WebControl，那么您可以测试 CssClass 的可空性和可能为空或只是空格，具体取决于“有效”的含义

# c++ - 如何在 C++ 中重载运算符&

> ID：16169349
> 
> 赞同：2
> 
> 时间：2013-04-23T12:27:14.827
> 
> 标签：c++

如何在 C++ 中重载运算符&？我试过这个：

```
#ifndef OBJECT_H
#define OBJECT_H
#include<cstdlib>
#include<iostream>

namespace TestNS{

    class Object{
    private:
        int ptrCount;
    public: 
        Object(): ptrCount(1){           
            std::cout << "Object created." << std::endl;
        }
        void *operator new(size_t size);
        void operator delete(void *p);
        Object *operator& (Object obj);
    };

    void *Object::operator new(size_t size){            
            std::cout << "Pointer created through the 'new' operator." << std::endl; 
            return malloc(size);
        }

    void Object::operator delete(void *p){
            Object * x = (Object *) p;
            if (!x->ptrCount){
                free(x);
                std::cout << "Object erased." << std::endl;
            }
            else{
                std::cout << "Object NOT erased. The " << x->ptrCount << "references are exist." 
                    << std::endl;
            }
        }

    Object *Object::operator& (Object obj){
            ++(obj.ptrCount);
            std::cout << "Counter is increased." << std::endl;
            return &obj;
        }
}
#endif 
```

主要功能：

```
#include<iostream>
#include"Object.h"

namespace AB = TestNS;

int main(int argc, char **argv){
    AB::Object obj1;
    AB::Object *ptrObj3 = &obj1; // the operator& wasn't called.
    AB::Object *ptrObj4 = &obj1; // the operator& wasn't called.

    AB::Object *obj2ptr = new AB::Object();
} 
```

输出结果：

> 创建的对象。
> 
> 通过“新”运算符创建的指针。
> 
> 创建的对象。

我的 operator& 没有被叫到。为什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-23T12:30:03.900

您当前正在重载二元`&`运算符（即按位与）。要重载一元运算`&`符，您的函数不应接受任何参数。它适用的对象是 所指向的对象`this`。

```
Object *Object::operator& (){
    ++(this->ptrCount);
    std::cout << "Counter is increased." << std::endl;
    return this;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T12:53:00.977

[sftrabbit 的答案](https://stackoverflow.com/a/16169409/924727)关于语法是正确的，但要注意你正在做的事情`new`并且不一致`delete`。

new 和 delete 运算符在原始内存上工作，而不是在构造对象上工作。

当你这样做`A* p = new A`...

*   `operator new`被称为...
*   `A`然后在返回的内存地址上调用对象构造函数，然后......
*   最后将地址转换`A*`为`p`.

同样，当你这样做`delete p`...

*   `A`析构函数被调用并且...
*   给定内存地址以`operator delete`返回给系统。

在这两种情况下，`A`对象实例的状态（其成员的值）都是未定义的：

*   在`operator new`你所做的任何事情中，都会被后续的构造函数调用覆盖。如果构造函数没有初始化某些东西，标准会说它的值是未定义的（并且不被授予与您可以在 中设置的相同`new`）。
*   在`operator delete`你做的任何事情都是在一个已经死的对象上完成的（你在它里面找到的东西并不被授予“最后的存活状态”。

无论如何，当您调用 delete 时，对象就会消失。`operator delete`在（破坏后调用）期间，您无法“将其从死亡中拯救出来” 。它的目的是放置墓碑，而不是复活尸体。

# ruby-on-rails - 发生了致命错误。请参阅 http://bit.ly/bundler-issues 上的 Bundler 故障排除文档

> ID：16169350
> 
> 赞同：4
> 
> 时间：2013-04-23T12:27:18.890
> 
> 标签：ruby-on-rails, ruby, rubygems, gem, gemset

当我进行捆绑安装时，出现以下异常。这是什么？

```
rajesh@rajesh:~/workspace/Cybermedia_Test$ bundle install
Fetching gem metadata from http://rubygems.org/.Unfortunately, a fatal error has occurred. Please see the Bundler 
troubleshooting documentation at http://bit.ly/bundler-issues. Thanks! 
/home/rajesh/.rvm/gems/ruby-1.9.3-p385@global/gems/bundler-1.2.4/lib/bundler/fetcher.rb:174:in `load': marshal data too short (ArgumentError)
    from /home/rajesh/.rvm/gems/ruby-1.9.3-p385@global/gems/bundler-1.2.4/lib/bundler/fetcher.rb:174:in `fetch_dependency_remote_specs'
    from /home/rajesh/.rvm/gems/ruby-1.9.3-p385@global/gems/bundler-1.2.4/lib/bundler/fetcher.rb:128:in `fetch_remote_specs'
    from /home/rajesh/.rvm/gems/ruby-1.9.3-p385@global/gems/bundler-1.2.4/lib/bundler/fetcher.rb:76:in `specs'
    from /home/rajesh/.rvm/gems/ruby-1.9.3-p385@global/gems/bundler-1.2.4/lib/bundler/source.rb:234:in `block in remote_specs'
    from /home/rajesh/.rvm/gems/ruby-1.9.3-p385@global/gems/bundler-1.2.4/lib/bundler/source.rb:232:in `each'
    from /home/rajesh/.rvm/gems/ruby-1.9.3-p385@global/gems/bundler-1.2.4/lib/bundler/source.rb:232:in `remote_specs'
    from /home/rajesh/.rvm/gems/ruby-1.9.3-p385@global/gems/bundler-1.2.4/lib/bundler/source.rb:165:in `fetch_specs'
    from /home/rajesh/.rvm/gems/ruby-1.9.3-p385@global/gems/bundler-1.2.4/lib/bundler/source.rb:70:in `specs'
    from /home/rajesh/.rvm/gems/ruby-1.9.3-p385@global/gems/bundler-1.2.4/lib/bundler/lazy_specification.rb:53:in `__materialize__'
    from /home/rajesh/.rvm/gems/ruby-1.9.3-p385@global/gems/bundler-1.2.4/lib/bundler/spec_set.rb:86:in `block in materialize'
    from /home/rajesh/.rvm/gems/ruby-1.9.3-p385@global/gems/bundler-1.2.4/lib/bundler/spec_set.rb:83:in `map!'
    from /home/rajesh/.rvm/gems/ruby-1.9.3-p385@global/gems/bundler-1.2.4/lib/bundler/spec_set.rb:83:in `materialize'
    from /home/rajesh/.rvm/gems/ruby-1.9.3-p385@global/gems/bundler-1.2.4/lib/bundler/definition.rb:113:in `specs'
    from /home/rajesh/.rvm/gems/ruby-1.9.3-p385@global/gems/bundler-1.2.4/lib/bundler/definition.rb:108:in `resolve_remotely!'
    from /home/rajesh/.rvm/gems/ruby-1.9.3-p385@global/gems/bundler-1.2.4/lib/bundler/installer.rb:83:in `run'
    from /home/rajesh/.rvm/gems/ruby-1.9.3-p385@global/gems/bundler-1.2.4/lib/bundler/installer.rb:14:in `install'
    from /home/rajesh/.rvm/gems/ruby-1.9.3-p385@global/gems/bundler-1.2.4/lib/bundler/cli.rb:231:in `install'
    from /home/rajesh/.rvm/gems/ruby-1.9.3-p385@global/gems/bundler-1.2.4/lib/bundler/vendor/thor/task.rb:27:in `run'
    from /home/rajesh/.rvm/gems/ruby-1.9.3-p385@global/gems/bundler-1.2.4/lib/bundler/vendor/thor/invocation.rb:120:in `invoke_task'
    from /home/rajesh/.rvm/gems/ruby-1.9.3-p385@global/gems/bundler-1.2.4/lib/bundler/vendor/thor.rb:275:in `dispatch'
    from /home/rajesh/.rvm/gems/ruby-1.9.3-p385@global/gems/bundler-1.2.4/lib/bundler/vendor/thor/base.rb:408:in `start'
    from /home/rajesh/.rvm/gems/ruby-1.9.3-p385@global/gems/bundler-1.2.4/bin/bundle:14:in `block in <top (required)>'
    from /home/rajesh/.rvm/gems/ruby-1.9.3-p385@global/gems/bundler-1.2.4/lib/bundler/friendly_errors.rb:4:in `with_friendly_errors'
    from /home/rajesh/.rvm/gems/ruby-1.9.3-p385@global/gems/bundler-1.2.4/bin/bundle:14:in `<top (required)>'
    from /home/rajesh/.rvm/gems/ruby-1.9.3-p385@global/bin/bundle:19:in `load'
    from /home/rajesh/.rvm/gems/ruby-1.9.3-p385@global/bin/bundle:19:in `<main>'
    from /home/rajesh/.rvm/gems/ruby-1.9.3-p385/bin/ruby_noexec_wrapper:14:in `eval'
    from /home/rajesh/.rvm/gems/ruby-1.9.3-p385/bin/ruby_noexec_wrapper:14:in `<main>' 
```

* * *

***当地宝石***

```
actionmailer (3.1.3)
actionpack (3.1.3)
activemodel (3.1.3)
activerecord (3.1.3)
activeresource (3.1.3)
activesupport (3.1.3)
ansi (1.4.3)
arel (2.2.3)
bigdecimal (1.1.0)
builder (3.0.4)
bundler (1.2.4)
coffee-rails (3.1.1)
coffee-script (2.2.0)
coffee-script-source (1.4.0)
erubis (2.7.0)
execjs (1.4.0)
hike (1.2.1)
i18n (0.6.1)
io-console (0.3)
jquery-rails (2.2.1)
json (1.7.7, 1.5.4)
mail (2.3.3)
mime-types (1.21)
minitest (2.5.1)
multi_json (1.6.1)
polyglot (0.3.3)
rack (1.3.10)
rack-cache (1.2)
rack-mount (0.8.3)
rack-ssl (1.3.3)
rack-test (0.6.2)
rails (3.1.3)
railties (3.1.3)
rake (10.0.3, 0.9.2.2)
rdoc (3.12.1, 3.9.5)
rubygems-bundler (1.1.0)
rvm (1.11.3.6)
sass (3.2.5)
sass-rails (3.1.7)
sprockets (2.0.4)
sqlite3 (1.3.7)
thor (0.14.6)
tilt (1.3.3)
treetop (1.4.12)
turn (0.8.3)
tzinfo (0.3.35)
uglifier (1.3.0) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-23T15:48:08.490

一些建议：

1.  更新捆绑器：`gem update bundler`
2.  更新红宝石：`gem update --system`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-26T11:04:17.777

我最近遇到了类似的问题，我意识到问题出在`.bundle`目录中的配置文件中（我从其生产文件夹中下载了项目）。我修复了删除整个`.bundle`文件夹的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-19T21:05:50.893

这对我有用

```
gem uninstall atomic tzinfo
#select 'All versions' for both
gem install atomic tzinfo 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-13T16:15:46.923

这是一个明显的（事后看来）问题，但对我来说，我收到这个错误是因为我被拴在手机上，所以我运行了一个名为 TripMode 的程序，它默认阻止大多数网络流量。授予对 Ruby 的网络访问权限允许捆绑程序正确连接。

# java - Java在printf中打印双值零

> ID：16169361
> 
> 赞同：1
> 
> 时间：2013-04-23T12:27:53.917
> 
> 标签：java, double, printf, string-formatting

我在我的函数中有以下语句`System.out.printf("The balance is %0.1f", acct.getBalance());`，有时余额会为 0，在这种情况下，我得到了，我`MissingFormatWidthException`怎样才能让它工作`0.0`呢？它适用于大于 0.0 的双精度数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T12:33:19.967

```
System.out.printf("The balance is %.1f",(double)acct.getBalance()); 
```

或者

```
System.out.printf("The balance is %1.1f",(double)acct.getBalance()); 
```

`%0.1f`将 print 解释为宽度至少为 0 且精度为 2 的浮点数。理想情况下，它应该会给出错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:31:33.643

尝试这个 ：

```
 NumberFormat f = NumberFormat.getCurrencyInstance();
 f.setMinimumFractionDigits(2);
 double d = 0.0;
 System.out.println(f.format(d)); 
```

输出：

```
 $0.00 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T12:35:12.583

尝试这个：

System.out.printf("余额为 %0.1f", acct.getBalance() !=0 ? acct.getBalance() : 0.0);

# android - onItemClick - 使用 CustomAdapter 从 GridView 获取项目位置

> ID：16169376
> 
> 赞同：0
> 
> 时间：2013-04-23T12:28:21.237
> 
> 标签：android, android-custom-view, android-gridview

我有一个 gridview，它使用自定义适配器填充联系人的信息（图像、姓名和电话号码）。单击特定项目时，我想检索联系人的信息（图像信息、姓名和电话号码）。我知道我必须使用 setTag() 和 getTag() 但我不知道该怎么做。这是我的代码..

自定义适配器的getView方法

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ContactViewHolder contactViewHolder;
    if (convertView == null) {
        LayoutInflater li = getLayoutInflater();
        convertView = li.inflate(R.layout.activity_grid_one_item, null);
        contactViewHolder = new ContactViewHolder();
        contactViewHolder.imgContact = (ImageView) convertView
                .findViewById(R.id.imgViewContactImage);
        contactViewHolder.txtViewContactName = (TextView) convertView
                .findViewById(R.id.txtViewContactName);
        contactViewHolder.txtViewPhoneNumber = (TextView) convertView
                .findViewById(R.id.txtViewPhoneNumber);
        convertView.setTag(contactViewHolder);
    } else {
        contactViewHolder = (ContactViewHolder) convertView.getTag();
    }
    curObj.moveToPosition(position);
    String name = curObj.getString(curObj.getColumnIndex("name"));
    if (name != null) 
        contactViewHolder.txtViewContactName.setText(name);
    else 
        contactViewHolder.txtViewContactName.setText("Unknown");
    String phoneNumber = curObj.getString(curObj.getColumnIndex("number"));

    if (phoneNumber != null)
        contactViewHolder.txtViewPhoneNumber.setText(phoneNumber);
    else 
        contactViewHolder.txtViewPhoneNumber.setText("Unknown");

            String image = curObj.getString(curObj.getColumnIndex("image"));

    if(image.equalsIgnoreCase("R.drawable.addcontactsmall2"))
            contactViewHolder.imgContact.setImageResource(R.drawable.addcontactsmall2);
    else
    {
        Uri uri = Uri.parse(image);
        contactViewHolder.imgContact.setImageURI(uri);
    }
    return convertView;
}

public class ContactViewHolder {
    ImageView imgContact;
    TextView txtViewContactName;
    TextView txtViewPhoneNumber;
} 
```

`onItemClick`方法

```
@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    View view = (View) arg1.getTag(arg2);
    TextView txtPhoneNumber = (TextView) view.findViewById(R.id.txtview_addcontact_phonenumber);
    System.out.println(txtPhoneNumber.getText().toString());
} 
```

我知道上面的代码不起作用，（它也不起作用，正如预期的那样，我得到一个空指针异常），所以如果有人能指导我如何做到这一点，那将会有很大帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:31:06.220

在 onItemClick 中更改它

```
ContactViewHolder view = (ContactViewHolder ) arg1.getTag();
String number = view.getPhNumber(); 
```

并将其添加到 ViewHolder

```
public class ContactViewHolder {
   ImageView imgContact;
   TextView txtViewContactName;
   TextView txtViewPhoneNumber;

   String phNumber;
   public String getPhNumber() {
       return phNumber;
   }
} 
```

在 getView() 中添加这个

```
String phoneNumber = curObj.getString(curObj.getColumnIndex("number"));
phNumber = phoneNumber ; 
```

为剩余的参数添加相同的代码。它会起作用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:33:35.630

您可以获得自定义网格项目`setOnItemClickListener`以及`setOnClickListener`.

```
public ImageView img;

your_grid.setOnItemClickListener(new OnItemClickListener()
  {
       public void onItemClick(AdapterView<?> parent, View v, final int position, long id)
          {
               img = (ImageView)v.findViewById(R.id.grid_item_image);
           }
  }); 
```

# xml - 使用 Perl XMLSimple 解析 XML 文件

> ID：16169381
> 
> 赞同：0
> 
> 时间：2013-04-23T12:28:34.480
> 
> 标签：xml, perl, hash, xml-simple

我正在尝试解析*`XML`*具有以下结构的类似文件：

编辑：我试图省略大部分巨大的 xml 文件以简化所有内容，但 c/p-ed 错误。这是实际存在此问题的完整文件（900kb！）：[https ://docs.google.com/file/d/0B3ustNI1qZh1UURrYWZJQk0wVlU/edit?usp=sharing](https://docs.google.com/file/d/0B3ustNI1qZh1UURrYWZJQk0wVlU/edit?usp=sharing)

```
<CIM CIMVERSION="2.0" DTDVERSION="2.0">

  <DECLARATION>
    <DECLGROUP>
      <LOCALNAMESPACEPATH>
        <NAMESPACE NAME="signalingsystem"/>
      </LOCALNAMESPACEPATH>

      <VALUE.OBJECT>
        <INSTANCE CLASSNAME="SharedGtTranslator">
          <PROPERTY NAME="Name" TYPE="string">
            <VALUE>AUC$4,1,6,4,26202*-->AUC RemoteSPC: 300 SSN: 10</VALUE>
          </PROPERTY>
          <PROPERTY NAME="NatureOfAddress" TYPE="sint32">
            <VALUE>4</VALUE>
          </PROPERTY>
        </INSTANCE>
      </VALUE.OBJECT>

      <VALUE.OBJECT>
        <INSTANCE CLASSNAME="SharedGtTranslator">
          <PROPERTY NAME="Name" TYPE="string">
            <VALUE>AUC$4,2,6,4,26202*-->AUC AUC LocalSPC: 410 SSN: 10</VALUE>
          </PROPERTY>
          <PROPERTY NAME="NatureOfAddress" TYPE="sint32">
            <VALUE>4</VALUE>
          </PROPERTY>
            <VALUE>2</VALUE>
          </PROPERTY>
        </INSTANCE>
      </VALUE.OBJECT>
    </DECLGROUP>

  </DECLARATION>
</CIM> 
```

我正在使用 XMLSimple 来解析该结构。`NAME="Name"`如果`CLASSNAME="SharedGtTranslator"`. _

这就是我想要做的：

```
#!/usr/bin/perl
use strict;
use warnings;
# use module
use XML::Simple;
use Data::Dumper;

my $file1 = $ARGV[0];
# create object
my $xml = new XML::Simple;

# read XML file
my $data = $xml->XMLin($file1);
foreach my $object (@{$data->{DECLARATION}->{DECLGROUP}->{'VALUE.OBJECT'}}) {
        if ($object->{INSTANCE}->{CLASSNAME} eq 'SharedGtTranslator') {
                foreach my $property (@{$object->{INSTANCE}->{PROPERTY}}) {
                        if ($property->{NAME} eq 'Name') {
                                print $property->{VALUE} . "\n";
                        }
                }

        }
} 
```

得到

> “伪散列已弃用”

什么也没有发生。

高度赞赏帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:13:38.487

你的代码对我来说很好用。那是完整的程序吗？该代码中没有使用伪散列。

我能看到的唯一问题是您的 XML 数据格式不正确。有一个假的

```
 <VALUE>2</VALUE>
</PROPERTY> 
```

在最后一个`INSTANCE`元素的末尾。解决此问题后，您的程序运行良好。

`XML::Simple`似乎对你有用，所以坚持下去可能是合适的。但我一般不建议人们使用这个模块。开始工作可能远非简单，而且它构建的结​​构并不能完全反映 XML 数据，因此类似 [`XML::Twig`](https://metacpan.org/module/XML%3a%3aTwig) or [`XML::LibXML`](https://metacpan.org/module/XML%3a%3aLibXML) 的东西通常要好得多。

* * *

**更新**

使用您的真实数据，生成的结构`XML::Simple`看起来与为简短示例生成的结构完全不同。有一些数组与以前不存在的散列混合在一起。

该程序似乎可以生成您需要的内容。它产生 170 行输出。

```
use strict;
use warnings;

use XML::Simple;

my $file1 = 'active_7v19.om.cim';

my $xml  = new XML::Simple;
my $data = $xml->XMLin($file1);

for my $declgroup (@{ $data->{DECLARATION}{DECLGROUP} }) {

    foreach my $object (@{ $declgroup->{'VALUE.OBJECT'} }) {

        my $instance   = $object->{INSTANCE};
        my $classname  = $instance->{CLASSNAME};
        my $properties = $instance->{PROPERTY};

        next unless $classname eq 'SharedGtTranslator';

        for my $property (@$properties) {

            my $name  = $property->{NAME};
            my $value = $property->{VALUE};

            print $value, "\n" if $name eq 'Name';
        }
    }
} 
```

但是，我现在更加确定使用“真正的”XML 库会更好。此代码用于`XML::LibXML`产生相同的输出。

```
use strict;
use warnings;

use XML::LibXML;

my $doc = XML::LibXML->load_xml(location => $file1, no_blanks => 1);

my @properties = $doc->findnodes('//INSTANCE[@CLASSNAME = "SharedGtTranslator"]/PROPERTY[@NAME = "Name"]');

for my $property (@properties) {
    print $property->textContent('VALUE'), "\n";
} 
```

所有工作都由 XPath 表达式完成，该表达式选择所有`PROPERTY`具有 属性的元素`NAME`，这些元素是文档中任何具有属性`Name`的元素的子级。随后的循环打印每个 中元素的值。它显然更加简洁，运行起来也更快，如果您需要提取不同的信息，它也更加灵活。`INSTANCE``CLASSNAME``SharedGtTranslator``for``VALUE``PROPERTY`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:13:41.940

您的 XML 格式不正确。我得到解析错误。您的最后一个属性，您关闭，但不打开（或名称，结果）。之后，在 Perl 5.16 中，它打印：

```
AUC$4,1,6,4,26202*-->AUC RemoteSPC: 300 SSN: 10
AUC$4,2,6,4,26202*-->AUC AUC LocalSPC: 410 SSN: 10 
```

当然，这适用于 XML::Simple 2.20。

# java - 更改 Java 临时 Internet 文件存储位置

> ID：16169384
> 
> 赞同：1
> 
> 时间：2013-04-23T12:28:47.117
> 
> 标签：java, caching, java-web-start

我正在尝试更改 Java Web Start 的存储位置。我读到该位置可以通过 java 控制面板更改。我到了那里，可以看到“临时 Internet 文件”的路径，但“更改”按钮是灰色的。为什么我不能改变这条路？我需要将其更改为另一个硬盘驱动器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:44:08.540

我为你[搜索](http://www.google.com/)了它。

这是我的搜索词组：

> java控制台更改临时位置

这是最合适的结果：

[如何在 Windows 7 上更改 Java 的缓存位置](http://iambiased.wordpress.com/2011/02/05/how-to-change-cache-location-for-java-on-windows-7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T15:17:43.957

**步骤 1** 在 C:\Program Files (x86)\Java\jre1.8.0_31("newest version")\bin*javacpl* 中找到 javacpl.exe

**步骤 2** 右键单击​​ javacpl 而不是 Properties---Compatibility---选择以“Windows XP SP3”的兼容模式运行此程序</p>

**步骤 3** 转到控制面板--Java--常规--设置--位置并更改它。

**PS**如果打开，请在步骤 1 之前关闭 Java 控制面板。

# plugins - 如何强制操作后插件提交？

> ID：16169386
> 
> 赞同：0
> 
> 时间：2013-04-23T12:28:53.453
> 
> 标签：plugins, dynamics-crm-2011

我在手术后有一个插件，需要通过 web 服务在 sharepoint 上创建一个文件夹，为此，我的插件调用 web 服务来执行 FechXML 以从实体获取信息，但问题是该实体仍然不存在，它给了我Null。

如何强制插件将数据提交/保存到我的 FechXml 才能工作？

插件代码：

```
try
    {
        Entity entity;
        if (context.InputParameters.Contains("Target") && context.InputParameters["Target"] is Entity)
        {
            entity = (Entity)context.InputParameters["Target"];
            if (entity.LogicalName != "fcg_processos")
            {

                throw new InvalidPluginExecutionException("Ocorreu um erro no PlugIn Create Folder.");
            }
        }
        else
        {

            throw new InvalidPluginExecutionException("Ocorreu um erro no PlugIn Create Folder.");
        }

        processosid = (Guid)((Entity)context.InputParameters["Target"])["fcg_processosid"];
        string processoid2 = processosid.ToString();

        PluginSharepointProcessos.ServiceReference.PrxActivityResult result = log.CreateFolderSP("Processo", processoid2);

        string resultado = result.xmlContent;

        if (result.retCode > 0)
        {
            throw new InvalidPluginExecutionException("Ocorreu um erro na criação do Folder do Processo.");

        } 
```

网络服务代码：

```
 {          
            //WEBSERVICE TO CALL XML FROM ENTITY
            PrxActivityResult Processo = ProcessoFetch2("", "", guid);
            string stxml;
            stxml = Processo.XmlContent;
            XmlDocument xmlDoc = new XmlDocument();
            xmlDoc.LoadXml(stxml);
            XmlNodeList nodeList = xmlDoc.SelectNodes("resultset/result");
            List<string[]> lista = new List<string[]>();
            string[] strs = new string[7];
            if (nodeList.Count != 0)//verificar o numero de registos
            {

                foreach (XmlNode xmlnode in nodeList)
                {
                    if (xmlnode.SelectSingleNode("//fcg_numero") != null)
                        strs[2] = xmlnode.SelectSingleNode("//fcg_numero").InnerText;
                    else
                        strs[2] = "";

                    if (xmlnode.SelectSingleNode("//Concurso.fcg_numero") != null)
                        strs[3] = xmlnode.SelectSingleNode("//Concurso.fcg_numero").InnerText;
                    else
                        strs[3] = "";
                }

            }

        IwsspClient FmwSharepoint = new IwsspClient();
        PrxActivityResult folderresult = new PrxActivityResult();

        List<ws.fcg.sipp.svc.ServiceReferenceSharePoint.PareChave> arrayfields = new List<ws.fcg.sipp.svc.ServiceReferenceSharePoint.PareChave>();

        ws.fcg.sipp.svc.ServiceReferenceSharePoint.PareChave nprocesso = new ws.fcg.sipp.svc.ServiceReferenceSharePoint.PareChave();
        nprocesso.Key = "FCG_Numero_Processo";
        nprocesso.value = strs[2];
        arrayfields.Add(nprocesso);

        ws.fcg.sipp.svc.ServiceReferenceSharePoint.PareChave npconcurso = new ws.fcg.sipp.svc.ServiceReferenceSharePoint.PareChave();
        npconcurso.Key = "FCG_Numero_Concurso";
        npconcurso.value = strs[3];
        arrayfields.Add(npconcurso);

        ws.fcg.sipp.svc.ServiceReferenceSharePoint.PareChave npguid = new ws.fcg.sipp.svc.ServiceReferenceSharePoint.PareChave();
        npguid.Key = "FCG_Guid_CRM";
        npguid.value = guid;
        arrayfields.Add(npguid);

        folderresult = FmwSharepoint.CreateFolder("http://localhost/folder", "Processos", strs[2], arrayfields.ToArray());

        res = folderresult;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:06:53.423

当插件在 Post-Operation 上运行时，它仍然在数据库事务中，实际上并没有提交到数据库。使用作为插件上下文的一部分传入的服务引用完成的任何调用都将在数据库事务的上下文中执行，您将能够检索新创建/更新的值。如果您创建一个全新的 OrganizationServiceProxy （我猜这就是您正在做的事情），它将在数据库事务之外执行，并且不会看到新创建/更新的值。

正如@AndyMeyers 在他的评论中建议的那样（这真的应该是一个答案恕我直言），通过前/后图像或目标从插件上下文中获取数据是理想的，因为它消除了另一个数据库调用。如果您必须查找可能由之前触发的另一个插件创建的记录，则需要使用插件上下文中包含的 IOrganizationService。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T22:00:26.853

我别无选择，我使用此代码基于图像运行 web 服务并忘记了 FecthXml，如前所述，我在后期操作中从图像中获取所有信息并发送回 Web 服务。谢谢，代码如下：

```
 entity = (Entity)context.InputParameters["Target"];

            concursid = (Guid)entity.Attributes["fcg_concursid"];
            guid = concursid.ToString();

            string npconcurs = (string)entity.Attributes["fcg_numer"];
            nconcurs= npconcurs;

            EntityReference nprograma = (EntityReference)entity.Attributes["fcg_unidadeorganica"];

            program = nprogram.Name;

            if (entity.LogicalName != "fcg_concurs") 
```

# javascript - 获取选定滑块的对象 - JQUERY UI

> ID：16169388
> 
> 赞同：1
> 
> 时间：2013-04-23T12:29:04.350
> 
> 标签：javascript, jquery, jquery-ui

我正在使用具有多个句柄的 JqueryUI 范围滑块。开始滑动时如何获取手柄的jQuery对象？

示例：http: [//jqueryui.com/slider/#range](http://jqueryui.com/slider/#range)

我试过 ..

```
$('#slider-range').slider({
    range: true,
    min: 10,
    max: 180,
    values: [ this.startDefaultVal, this.endDefaultVal ],
    slide: function( event, ui ) { }
});

$('#slider-range').on( "slidestart", function( event, ui ) {
    console.log(ui);   // get the slide object which is being dragged
});
$('#slider-range').on( "slidestop", function( event, ui ) {
    console.log(ui); // get the slide object which is being dragged
}); 
```

UI 是一个完整的滑块对象，但在开始和停止时我想知道我实际拖动的两个滑块中的哪一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:35:38.150

从[文档](http://api.jqueryui.com/slider/#event-slide)中引用。

```
ui
Type: Object

   handle
   Type: jQuery
   The jQuery object representing the handle being moved. 
```

所以你应该能够使用 ui.handle 来获取一个常规的 jQuery 对象并读取它的 id/class/...

```
$('#slider-range').on( "slidestop", function( event, ui ) {
    ui.handle // the slide jQuery object
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T12:40:33.790

`ui.handle`应该给你拖动的手柄

```
$('#slider-range').on( "slidestart", function( event, ui ) {
         console.log('s',ui.handle);   // get the slide object which is being dragged
}); 
```

演示：[Plunker](http://plnkr.co/edit/ZpupJfgKGBdfUUyGrto2?p=preview)

# html - 缩放后表格单元格显示 div 之间出现间隙

> ID：16169396
> 
> 赞同：0
> 
> 时间：2013-04-23T12:29:25.427
> 
> 标签：html, css

我遇到了一个非常不寻常的 chrome 错误。基本上，我有 2 个带有表格单元格显示的 div。一个有文本，另一个是输入。当页面放大然后再次缩小时会发生什么。输入的顶部和顶部边框之间会出现一个间隙，并且每次放大和缩小页面时，间隙都会变得越来越大。如果两个 div 都只有文本或都有输入，那么没关系。设置 div 高度没有区别。FF没有这样的问题。这是一个小图来说明。

开始是这样的：

```
 .--------.--------.                
                .  text  . |input|. 
                .--------.--------. 
```

放大和缩小连续时间后，它看起来像这样：

```
 . -------.--------.                
                .        .        .
                .        .        . 
                .  text  . |input|. 
                .--------.--------. 
```

这是代码：

```
.border{
         border:1px solid grey; 
         display:table-cell;
       }

      <div class = "border">text</div>
      <div class = "border"><input /></div> 
```

有谁知道为什么会发生这种情况，以及可以做些什么来防止它？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:36:16.527

试试这样，它会帮助你...

```
 .border
   {
     border:1px solid grey;
     display:table-cell;
     text-align: center;
     vertical-align: middle
   } 
```

# iphone - 哪个更好地获取文件 - iOS 代码中的 FTP 或 HTTP？

> ID：16169398
> 
> 赞同：1
> 
> 时间：2013-04-23T12:29:34.297
> 
> 标签：iphone, ios, ipad, tomcat, ftp

我必须从 FTP 中提取一组图像。

我通过只提供图像的服务器 url 尝试了与 tomcat 服务器相同的事情，它看起来又快又好。为了研究从 FTP 服务器拉取 FTP 文件，从苹果[SimpleFTPSample 获取了一个样本](http://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/Listings/Read_Me_About_SimpleFTPSample_txt.html)

在示例中，有一个从 FTP 拉取图像的代码，但是拉取图像太慢了。

为什么要花这么多时间拍一张照片？如果我必须得到一些图像，我无法想象时间延迟？

谢谢，伊斯瓦尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T12:37:29.630

正如[丹尼尔在这里所说](http://daniel.haxx.se/docs/ftp-vs-http.html)：

> 是什么让 FTP 更快：
> 
> 发送的文件中没有添加元数据，只有原始二进制文件
> 
> 从不分块编码“开销”
> 
> 是什么让 HTTP 更快：
> 
> 重用现有的持久连接可以提高 TCP 性能
> 
> 流水线可以更快地从同一服务器请求多个文件
> 
> （自动）压缩使发送的数据更少
> 
> 没有命令/响应流可最大限度地减少额外的往返行程
> 
> 最终最终结果当然会根据具体细节而有所不同，但我会说对于单次静态文件，您将无法衡量差异。对于单次拍摄的小文件，您可能会使用 FTP 更快地获得它（除非服务器的往返距离很长）。当获取多个文件时，HTTP 应该是更快的一个。

使用以下委托方法来跟踪上传进度：

```
- (void)connection:(NSURLConnection *)connection didSendBodyData:(NSInteger)bytesWritten totalBytesWritten:(NSInteger)totalBytesWritten totalBytesExpectedToWrite:(NSInteger)totalBytesExpectedToWrite

totalBytesWritten / totalBytesExpectedToWrite gives me the upload percentage. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:42:24.100

是什么让 FTP 变慢：

您必须每次为每个文件建立连接。

在这我不确定：握手是在端口 X（也许是 22）上完成，数据传输是在端口 Y（也许是 21）上完成

是什么让 HTTP 变慢：https 标头。

对于一个大文件 IO 将使用 FTP，对于一堆小文件 HTTP，对于一个或几个小文件：我可以在 10 秒内复制粘贴的代码 :)

FTP需要一个FTP服务器，并且设置权限和HTTP服务器通常已经存在，如果你关心服务器端的要求。

防火墙：通常授予 http，拒绝 ftp

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-05T00:49:52.287

FTP 比 HTTP 复杂得多： 1 必须执行几个命令来请求文件 2 应该创建另一个 TCP 连接来传输文件数据

因此，如果您的应用程序对延迟敏感，那么 HTTP 是最佳选择。

# python - Pyparsing 令牌源范围

> ID：16169400
> 
> 赞同：2
> 
> 时间：2013-04-23T12:29:46.433
> 
> 标签：python, grammar, pyparsing, rule

如何在 Pyparsing 中以编程方式提取语法规则匹配的源范围（开始和结束位置）？我不能使用`setParseAction`这个（子）规则，因为我正在检查另一个回调中的解析树内容，而另一个回调又指定为`ParseAction`. 我还缺少一个以类似于返回的内容的*人道*方式打印的功能。我知道，但我不确定有趣的信息，例如上下文，是否被这个成员剥夺了。`pprint``parseString()``toList()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T06:02:48.817

下面是一些示例代码，展示了如何捕获已解析表达式的位置，并`dump()`用于列出已解析的数据和命名结果：

```
from pyparsing import *

# use an Empty to define a null token that just records its
# own location in the input string
locnMarker = Empty().leaveWhitespace().setParseAction(lambda s,l,t: l)

# define a example expression and save the start and end locations
markedInteger = locnMarker + Word(nums)('value') + locnMarker

# assign named results for the start and end values,
# and pop them out of the actual list of tokens
def markStartAndEnd(s,l,t):
    t['start'],t['end'] = t.pop(0),t.pop(-1)
markedInteger.setParseAction(markStartAndEnd)

# find all integers in the source string, and print
# their value, start, and end locations; use dump()
# to show the parsed tokens and any named results
source = "ljsdlj2342 sadlsfj132 sldfj12321 sldkjfsldj 1232"
for integer in markedInteger.searchString(source):
    print integer.dump() 
```

印刷：

```
['2342']
- end: 11
- start: 6
- value: 2342
['132']
- end: 22
- start: 18
- value: 132
['12321']
- end: 33
- start: 27
- value: 12321
['1232']
- end: 48
- start: 44
- value: 1232 
```

# python - Django 用计数过滤不同的内容

> ID：16169406
> 
> 赞同：0
> 
> 时间：2013-04-23T12:30:01.937
> 
> 标签：python, django

在 Django 中，我需要过滤数据并显示结果。例如

```
Alabama(20)
Iowa(12) 
```

这里“*阿拉巴马州，爱荷华州*”是州名，括号内的“20,12”是否。特定州提供的工作机会。

模型.py

```
class User(models.Model):
     first_name= forms.CharField(max_length=30,widget=forms.TextInput())
     last_name = forms.CharField(max_length=30,widget=forms.TextInput())
     username = forms.CharField(max_length=30,widget=forms.TextInput())
     email = forms.EmailField(widget=forms.TextInput())
     password = forms.CharField(widget=forms.PasswordInput())
     companyname = forms.CharField(max_length=30,widget=forms.TextInput())

class jobs(models.Model):
     emp = models.ForeignKey(User, unique=False)
     title = models.CharField(max_length=30)
     referencecode = models.CharField(max_length=30)
     jobsummary = models.TextField()
     jobdetails = models.TextField()
     key_skills = models.CharField(max_length=30)
     states = models.CharField(max_length=30) 
```

我试图给views.py就像

```
def search_result(request):

     details = jobs.objects.annotate().order_by('state')
     return render_to_response('searchresult.html', {'details': details})

templates
<ul>
{% for d1 in details %}
<li>{{ d1.state }}({{ d1.count }})</li>
{% endfor %}
</ul> 
```

它只显示州名而不是计数。澄清一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:57:35.147

你可以这样做：

```
from django.db.models import Count
jobs.objects.values('states').annotate(count=Count('states')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:36:38.047

这似乎很棘手，但你可以通过参考“ [https://docs.djangoproject.com/en/dev/ref/models/querysets/](https://docs.djangoproject.com/en/dev/ref/models/querysets/) ”来做到这一点

# php - PHP form sendeail.php 无法识别新的表单项

> ID：16169411
> 
> 赞同：0
> 
> 时间：2013-04-23T12:30:10.307
> 
> 标签：php, html, forms

我正在尝试将新项目添加到旧的 sendeail.php 表单中。但是，当我将新项目添加到 php 列表和邮件传递时，它们根本不会显示在发送的电子邮件中。至少电子邮件正在通过......我知道我需要改进收音机和复选框项目，但没有显示任何新项目。新项目是紧接下方代码列表中 $attn 之后的所有项目。感谢您的任何帮助，非常感谢！

我的 PHP 代码是：

```
<?php

$ip = $_POST['ip']; 
$httpref = $_POST['httpref']; 
$httpagent = $_POST['httpagent']; 
$visitor = $_POST['visitor']; 
$visitormail = $_POST['visitormail']; 
$notes = $_POST['notes'];
$attn = $_POST['attn'];
$phone = $_POST['phone'];
$interest = $_POST['interest'];
$budget = $_POST['budget'];
$budget = $_POST['day'];
$timeslot = $_POST['timeslot'];

if (eregi('http:', $notes)) {
die ("Do NOT try that! ! ");
}
if(!$visitormail == "" && (!strstr($visitormail,"@") || !strstr($visitormail,"."))) 
{
echo "<h2>Use Back - Enter valid e-mail</h2>\n"; 
$badinput = "<h2>Please complete all the fields.</h2>\n";
echo $badinput;
die ("Use the Back button on your browser...");
}

if(empty($visitor) || empty($visitormail) || empty($notes )  || empty($attn )  || empty($phone )) {
echo "<h2>Please click Back and fill in all fields.</h2>\n";
die ("Use the Back button on your browser... "); 
}

$todayis = date("l, F j, Y, g:i a") ;

$attn = $attn ; 
$subject = $attn; 

$notes = stripcslashes($notes); 

$message = " $todayis [EST] \n
Web Site Request About: $attn \n
From: $visitor ($visitormail)\n
Phone: $phone \n
Message: $notes \n 
Interested In: $interest \n
Heating Budget: $budget \n
Time Availability: Days - $day \n
Time Availability: Morning or Afternoon - $timeslot \n

Additional Info : IP = $ip \n
Browser Info: $httpagent \n
Referral : $httpref \n
";

$from = "From: $visitormail\r\n";

mail("XXXXX", $subject, $message, $from);

?> 
```

我的 HTML 代码是：

```
<?php
$ipi = getenv("REMOTE_ADDR");
$httprefi = getenv ("HTTP_REFERER");
$httpagenti = getenv ("HTTP_USER_AGENT");
?>
        <input type="hidden" name="ip" value="<?php echo $ipi ?>" />
        <input type="hidden" name="httpref" value="<?php echo $httprefi ?>" />
        <input type="hidden" name="httpagent" value="<?php echo $httpagenti ?>" />
        All fields are required.</p>
      <p align="left">Your Name:
        <input type="text" name="visitor" size="35" />
        </p>
      <p align="left">
        Your Email:  
          <input type="text" name="visitormail" size="35" />
        </p>
      <p align="left">
        <label for="Phone">Your Phone: </label>
        <input type="text" name="Phone" id="Phone" size="35"/>
      </span></p>
      <p align="left">
        About:
        <select name="attn" size="1">

select name="interest" id="interest">
          <option value="General Query">General question</option>
          <option value="Plumbing Query">Plumbing</option>
          <option value="Gasfitting Query">Gasfitting</option>
          <option value="Central Heating Query">Central Heating</option>
          <option value="Custom Work Query">Several options</option>
          </select>
        <br />

  <p align="left">Your Home Heating Budget:

    <select name="attn2" size="1">

select name="budget" id="budget">
      <option value="Under 10000">$8000 to $10,0000</option>
      <option value="10 to 12 Thousand">$10,000 to $12,000</option>
      <option value="12 to 15 Thousand">$12,000 to $15,000</option>
      <option value="+15000 Plus">$15,000 +</option>
      </select>
    <br />
    <p align="left">Are you considering other forms of heating? 
    <input type="checkbox" name="Yes-OtherFormsHeating" id="Yes-OtherFormsHeating" />
    <label for="Yes">Yes</label>
     <input type="checkbox" name="No-OtherFormsHeating" id="No-OtherFormsHeating" />
    <label for="No">No</label>
    <br />
    </p>
    <p align="left">Please give us a few details about your home and requirements: <br />
      <textarea name="notes" rows="6" cols="70"></textarea>
    </p>

    <p align="left">To give you a quote for gas central heating, we need to visit your home. What is a good day and time for us to come to you? Choose one option.</p>
    <p align="left">
      <input type="radio" name="day" id="day_M" value="M" />
      <label for="M">M</label>
      <input type="radio" name="day" id="day_T" value="T" />
      <label for="T">T</label>
      <input type="radio" name="day" id="day-W" value="W" />
      <label for="W">W</label>
      <input type="radio" name="day" id="day_Th" value="Th" />
      <label for="Th">Th</label>
      <input type="radio" name="day" id="day_F" value="F" />
      <label for="F">F</label>
    </p>
    <p align="left">When is a good time on this day for us to come to you? Choose one or both.</p>
    <p align="left">
      <input type="checkbox" name="timeslot" id="8:30-12:30AM" />
      <label for="8:30-12:30AM">8:30 - 12:30</label>
      <input type="checkbox" name="timeslot" id="12:30-4" />
      <label for="12:30-4">12:30 - 4:00</label>
    </p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:49:33.287

首先：**始终验证输入**( `POST`)。您已经进行了一些基本验证，但还阅读了有关`POST`数据的安全含义。

php 中的数组键区分大小写。`$_POST['phone']`不一样`$_POST['Phone']`。

您的`select`标签已损坏，请查看您发布的`html`.

您已经声明`$budget`了两次，覆盖了预期的数据：

```
$budget = $_POST['budget'];
$budget = $_POST['day']; 
```

`checkboxes`发布时应该是数组，将`name`属性更改为`thename[]`而不是`thename`. 当然，您的 php 脚本必须在此更改后处理生成的数组。

# java - 编写一个程序 Find 搜索命令行指定的所有文件并打印出所有包含指定单词的行

> ID：16169418
> 
> 赞同：0
> 
> 时间：2013-04-23T12:30:35.353
> 
> 标签：java

编写一个程序 Find 搜索命令行中指定的所有文件并打印出所有包含指定单词的行。例如，如果您调用

`java Find ring report.txt addres.txt Homework.java`

那么程序可能会打印

```
report.txt: has broken up an international ring of DVD bootleggers that
address.txt: Kris Kringle, North Pole
address.txt: Homer Simpson, Springfiled
Homework.java: String filename 
```

* * *

首先，我不知道如何存储命令行中给出的所有字符串。*此外，我的代码仅在找到的单词之后*打印该行的一部分（因此对于实例，它仅打印出： of DVD bootleggers for the first file。我该如何解决这些问题？有人可以帮我吗？

这是我的尝试：

```
import java.io.File;
import java.io.FileNotFoundException;
import java.util.Scanner;

public class P6 {

    /**
     * @param args
     * @throws FileNotFoundException 
     */
    public static void main(String[] args) throws FileNotFoundException {
        // TODO Auto-generated method stub

        for (int i = 0; i<args.length; i++)
        {
            String arg = args[i];
        }

        String input = "ring";

        File one = new File("report.txt");
        Scanner in = new Scanner(one);
        while (in.hasNext())
        {
            String een = in.next();

            if(een.matches(input))
            {
                System.out.println(in.nextLine());
            }
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:38:55.057

```
public static void main(String[] args) throws FileNotFoundException {
    String input = args[0];
    for (int i = 1; i < args.length; i++) {
        System.out.println(" File  " + args[i]);
        File one = new File(args[i]);
        Scanner in = new Scanner(one);
        while (in.hasNext()) {
            String line = in.nextLine();
            if (line.contains(input)) {
                System.out.println(line);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:43:28.187

尝试这个：

```
File one = new File("try.txt");
    Scanner in = new Scanner(one);
    String input = "jha";
    while (in.hasNextLine()) {
        String een = in.nextLine();

        if (een.contains(input)) {
            System.out.println(een);
        }
    } 
```

# jsp - 其中哪一个更好 和 在性能方面？

> ID：16169419
> 
> 赞同：26
> 
> 时间：2013-04-23T12:30:41.610
> 
> 标签：jsp, jstl

我正在使用 import jstl 标签，使用 jsp:include 代替 import 会更好吗？

```
<c:choose>      
    <c:when test="${item.id=='masters'}">    
        <c:import url="/newclickmenu/mastermenuitems.jsp"></c:import>    
    </c:when>

    <c:when test="${item.id=='sales'}">   
        <c:import url="/newclickmenu/salesmenuitems.jsp"></c:import>   
    </c:when>
</c:choose> 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-23T12:39:03.260

`<c:import>`除了`<jsp:include>`.

*   `<c:import>`将允许您指定来自其他 Web 应用程序、上下文以及 Web 服务器的内容；这为您提供了更大的灵活性。

*   但请记住，静态包含总是比动态包含更快；意思`<%@ include file="" %>`是 比`<jsp:include>`和都快`<c:import>`。

*   从技术上讲，`<c:import>`只有在您需要它的功能或灵活性时才应使用它，性能的改进是微乎其微的。

*   有些人可能会说，`<c:import>`如果你不需要它，因为它比`<jsp:include>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-06T09:29:34.060

c:import 的一个重要优点是它可以像当前上下文中的其他 Web 应用程序一样包含外部资源。

# javascript - 无法选择我用 jQuery 加载的 id

> ID：16169423
> 
> 赞同：2
> 
> 时间：2013-04-23T12:30:57.033
> 
> 标签：javascript, jquery

我了解您需要使用“.on”来使用页面加载后通过 jquery 加载的代码。（至少我认为它是这样工作的）

所以我尝试了，但不知何故它根本没有做任何事情。控制台中也没有错误。

```
$("#forgot_password").click(function(){
  var forgot_password = '<div id="toLogin" style="cursor:pointer;">Prijava</div>'
  $("#loginPopupForm").html(forgot_password);                                       
});

$("#toLogin").on("click", function(){
    alert("Hello");
}); 
```

因此，当我单击 #forgot_password 时，它会执行第一次单击功能。但是当我点击 #toLogin 它什么也没做，我认为这是因为当我点击 #forgot_password 时它加载了 jquery

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T12:32:36.490

尝试这个

```
$("#loginPopupForm").on("click", "#toLogin", function(){
    alert("Hello");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:33:12.863

您需要绑定到页面加载时存在**的**`body`元素，例如。只需将您的代码更改为如下所示

```
$("body").on("click", "#forgot_password", function(){
  var forgot_password = '<div id="toLogin" style="cursor:pointer;">Prijava</div>'
  $("#loginPopupForm").html(forgot_password);                                       
});

$("body").on("click", "#toLogin", function(){
    alert("Hello");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T12:33:15.340

您将其设置`on`为错误的东西。你希望它是：

```
$(document).on('click', '#toLogin', function() {alert('hello') }); 
```

在您执行其他单击事件之前，该 ID 不存在，因此 jQuery 没有找到任何元素来设置单击事件。您需要有一个已在 DOM 中呈现的元素来设置事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T12:35:40.893

您对这个问题完全正确： on() 仅针对运行时已经存在的元素。您在 jQuery 中需要的称为 Delegated 事件，并且在[Jquery 文档页面](http://api.jquery.com/on/)上有很好的解释。代码的区别很小，但这是你应该做的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-23T12:36:51.437

您必须指定父元素

```
$("#toLogin").on("click","#loginPopupForm", function(){
    alert("Hello");
}); 
```

在 on 的第二个参数中

# java - MAP Keyset 不起作用 - 无法识别关键字 KeyType？

> ID：16169424
> 
> 赞同：1
> 
> 时间：2013-04-23T12:30:57.160
> 
> 标签：java, map

我正在尝试从地图中对 Keyset 进行迭代，但我的程序无法识别关键字**KeyType**：

我正在使用 Oracle Java Docs [Here中提到的以下代码](http://docs.oracle.com/javase/tutorial/collections/interfaces/map.html)

```
for (KeyType key : outputMap.keySet())
    System.out.println(key); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:32:24.453

文档中的代码是伪代码。替换`KeyType`为您存储在您`Map`的密钥中的类型。

例如：

```
Map<Integer, String> map = new HashMap<>();

for (Integer key : map.keySet()) {
  //..
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:51:40.847

java中没有引用类型**KeyType**。试试这个例子：

```
 Map<Integer, String> person = new HashMap<Integer, String>();
    person.put(1, "Sohail");
    person.put(2, "Ahmad");
    person.put(3, "Wills");
    for(Integer serialNo : person.keySet()) 
        System.out.println("Key: "+serialNo+", Value: "+person.get(serialNo)); 
```

Map 是将键映射到值的对象。这里我的键类型是整数，我的值类型是字符串，因为这个例子映射了序列号。到人名。

您还可以像这样在 Map 上进行迭代：

```
 Map<Integer, String> person = new HashMap<Integer, String>();
    person.put(1, "Sohail");
    person.put(2, "Ahmad");
    person.put(3, "Wills");

    for (Map.Entry<Integer, String> entry : person.entrySet()) 
        System.out.println("Key: "+entry.getKey()+", Value: "+entry.getValue()); 
```

# vb.net - `TextChanged` 事件的另一种选择是什么

> ID：16169429
> 
> 赞同：0
> 
> 时间：2013-04-23T12:31:17.360
> 
> 标签：vb.net, winforms, event-handling

我在 Windows 窗体中工作，并且在窗体`textboxes`上有一些。

这些文本框从上到下是相连的，所以如果文本在 中发生变化，`textbox1`则必须遵守，如果发生变化，则 3 必须遵守；......等等......不会让你感到厌烦。`txtbox2``txtbox3``textbox2`

现在我正在寻找一种替代，更有效的方式来调用`textchanged event`文本框，这样它就不会每次都做所有事情，即使一个字符已经改变......

诸如将焦点从文本框事件中移开……或其他替代方法。

这将采用 vb.net 和 windows 形式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:52:31.533

您可以使用[`TextBox.LostFocus`](http://msdn.microsoft.com/en-gb/library/system.windows.forms.control.lostfocus.aspx)从[`Control.LostFocus`](http://msdn.microsoft.com/en-gb/library/system.windows.forms.control.lostfocus.aspx).

当控件失去焦点时触发此事件，例如`Tab`或单击另一个控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:45:52.057

TextBox1.LostFocus 也许？或者在控件上启用验证。

控制焦点事件顺序：http: [//msdn.microsoft.com/en-gb/library/system.windows.forms.control.lostfocus.aspx](http://msdn.microsoft.com/en-gb/library/system.windows.forms.control.lostfocus.aspx)

原因验证：

[http://msdn.microsoft.com/en-gb/library/system.windows.forms.control.causesvalidation.aspx](http://msdn.microsoft.com/en-gb/library/system.windows.forms.control.causesvalidation.aspx)

# javascript - Javascript - 找出哪些资源无法从数组加载

> ID：16169432
> 
> 赞同：0
> 
> 时间：2013-04-23T12:31:23.157
> 
> 标签：javascript, preload

我言简意赅，情况如下：

```
for (var _im = 0; _im < slideshow._preloadbulks[slideshow._preloadCurrentbulk].length; _im++) {
    var tmpSlideIndex = (slideshow._preloadCurrentbulk*slideshow._preloadMaxbulkSize)+_im;
    slideshow._preloadSlides[tmpSlideIndex] = document.createElement('video');
    slideshow._preloadSlides[tmpSlideIndex].autoplay = false;
    slideshow._preloadSlides[tmpSlideIndex].loop = false;
    slideshow._preloadSlides[tmpSlideIndex].addEventListener('canplaythrough', slideshow.slideLoaded, false);
    slideshow._preloadSlides[tmpSlideIndex].src = slideshow._slides[tmpSlideIndex][slideshow.image_size+"_video_url"];
    slideshow._preloadSlides[tmpSlideIndex].addEventListener('error', function(){
        console.log(tmpSlideIndex);
        slideshow._preloadSlides.splice(tmpSlideIndex,1);
        slideshow._slides.splice(tmpSlideIndex,1);
        slideshow.slideLoaded();
    }, true);
} 
```

如您所见，我有一个视频数组，我将每个元素 src 加载到 DOM 以预加载它。它工作得很好，但我必须处理一个资源不适用的情况，然后我需要从现有数组中删除它。**addEventListener('error',**工作得很好，它检测到不可用的资源，但是当我将 tmpSlideIndex 记录到**控制台**时，我得到一个不同的值而不是原始幻灯片索引（因为循环继续）。

我已经尝试设置 useCapture 标志，正如您在错误处理程序中看到的那样，我认为这可以解决问题，但它不会。

有什么技巧吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:40:22.960

问题是，当您在变量上创建闭包时`tmpSlideIndex`，它允许您在子函数中**引用**该变量，但它不会创建全新的变量，并且由于循环继续并且您的错误处理函数异步执行，因此值of`tmpSlideIndex`将始终是循环的最后一个索引。为了保持原始值，我们可以创建一个自执行函数来传递`tmpSlideIndex`. 该自执行函数将有效地创建一个新作用域，我们最终将返回一个函数，该函数将为`slideIndex`位于其父函数作用域中的变量创建一个闭包。

```
slideshow._preloadSlides[tmpSlideIndex].addEventListener('error', (function(slideIndex) {
    return function () {
        console.log(slideIndex);
        slideshow._preloadSlides.splice(slideIndex,1);
        slideshow._slides.splice(slideIndex,1);
        slideshow.slideLoaded();
    };
})(slideIndex), true); 
```

# web-services - WebSphere 7 上的 CXF JAX-WS 未出现在管理控制台中

> ID：16169443
> 
> 赞同：0
> 
> 时间：2013-04-23T12:32:01.887
> 
> 标签：web-services, websphere, jax-ws, cxf, java-ee-5

我正在使用 CXF 的 wsdl2java（通过 maven codegen 插件）从 jax-ws Web 服务的 wsdl（自上而下）生成源代码。
一切都很好，直到我必须在 WebSphere Application Server 7 上进行部署。
所以，我根据互联网上的各种文档进行了一些调整。
现在我部署的 jax-ws（前端强制为 2.1）工作正常。

现在的问题是，我没有从 WAS 管理控制台看到任何包含在我的 Web 模块中的 Web 服务的痕迹（也没有客户端，也没有提供者……什么都没有）。

这种情况使我无法从管理控制台应用策略集和配置 WS-Security。

我的问题是：

*   什么会阻止在管理控制台中显示有效的 Web 服务？
*   如果我在管理控制台中看不到它：如何在没有控制台的情况下配置策略集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:36:53.447

遗憾的是，如果您在 WebSphere 上使用第 3 方 JAX-WS 库，则客户端和提供者都不会出现在管理控制台中，并且您将无法将其配置为使用 WS-Security 和其他东西WAS 附带的。

[在此处](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/twbs_thirdparty.html)阅读官方文档。

# javascript - C# 中的浏览器关闭事件

> ID：16169444
> 
> 赞同：-4
> 
> 时间：2013-04-23T12:32:02.917
> 
> 标签：javascript, asp.net, c#-4.0

告诉我在asp.net c#中捕获浏览器关闭事件的步骤。我开发了一个网络应用程序，该用户输入他的用户名和密码，我将状态列更新为“活动”。如果我注销，我将状态列更新为“非活动”。假设我关闭浏览器，而不单击注销按钮，我需要将列更新为“非活动”。请告诉我关闭浏览器窗口时如何将列更新为“非活动”的步骤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:33:57.150

您不能可靠地执行此操作 - 您必须有一些服务器端逻辑来管理由于不活动而超时的“陈旧”登录，并使用某些网站事件或服务或类似的方式重置相应的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:52:36.020

你可以使用 javascript

```
window.onbeforeunload 
```

看看这个[http://www.4guysfromrolla.com/webtech/100604-1.shtml](http://www.4guysfromrolla.com/webtech/100604-1.shtml)

除此之外，我必须同意格兰特托马斯的回答。

# php - SQL-根据列表顺序对项目进行排序

> ID：16169445
> 
> 赞同：0
> 
> 时间：2013-04-23T12:32:02.840
> 
> 标签：php, mysql, sql, sql-order-by

我有这个查询：

```
SELECT Name FROM Table WHERE Id IN (414208,479516,4129769,414211,221171,3226290) 
```

这将返回所有在该列表中具有 Id 的名称，以首先找到它们。例如：如果 ID 为 221171 的 Jax 是找到的第一个元素，那么它将是该结果表的第一个元素。

有没有办法按照元素在该列表中的显示方式对元素进行排序。IE 将在结果中列出的第一个名称的 ID 应为 414208，第二个元素的 ID 应为 479516...最后一个元素的 ID 应为 3226290。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:33:58.413

尝试这个：

```
SELECT 
   Id
FROM 
   Table
WHERE 
   Id IN (414208,479516,4129769,414211,221171,3226290)
ORDER BY 
   FIELD(Id, 414208,479516,4129769,414211,221171,3226290) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:38:07.967

你可以使用mysql函数find_in_set

```
SELECT Name FROM Table WHERE Id IN (414208,479516,4129769,414211,221171,3226290) order by FIND_IN_SET(ID,'414208,479516,4129769,414211,221171,3226290') 
```

# java - 用户离开应用程序时无法完成执行

> ID：16169454
> 
> 赞同：1
> 
> 时间：2013-04-23T12:32:35.653
> 
> 标签：java, android, quit

用户退出应用程序后，我需要停止我的应用程序正在执行的所有操作（例如振动），我该怎么做？我的应用程序会在用户选择的一定时间内振动手机，但如果用户启动并退出应用程序..手机会继续振动所选的时间..我该如何处理这个错误？

```
public class MainActivity extends Activity {
    EditText tempo;
    Button bt;
    Thread t;
    int estado = 1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        tempo = (EditText) findViewById(R.id.tempo);
        //long delay = Long.parseLong(tempo.getText().toString());

        bt = (Button) findViewById(R.id.btvibrar);

        bt.setOnClickListener(new View.OnClickListener() {
            public void onClick(View arg0) {

                if (!tempo.getText().toString().equals("")) {

                    if (estado == 1) {

                        Vibrar();
                        estado *= -1;

                        bt.setText("Parar !");
                        bt.setBackgroundColor(Color.RED);

                        //Handler handler = new Handler();
                        //handler.postDelayed(new Runnable() {

                        //@Override
                        //public void run() {
                        //estado*=-1;
                        //bt.setText("Vibrar !");
                        //bt.setBackgroundColor(Color.GREEN);
                        //}
                        //  },  );
                    } else {
                        Parar();
                        estado *= -1;
                        bt.setText("Vibrar !");
                        bt.setBackgroundColor(Color.GREEN);
                   }
                } else {
                    AlertDialog.Builder dialogo = new AlertDialog.Builder(MainActivity.this);
                    dialogo.setTitle("Erro !");
                    dialogo.setMessage("Escolha um tempo.");
                    dialogo.setNeutralButton("OK", null);
                    dialogo.show();

                }
            }

            private void Vibrar() {    // É necessario lançar excessao no ANDROIDMANIFEST.XML
                Vibrator rr = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
                long treal = Long.parseLong(tempo.getText().toString());
                long milliseconds = treal * 1000;
                rr.vibrate(milliseconds);
            }

            private void Parar() {
                Vibrator rr = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
                rr.cancel();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:43:20.390

首先，您需要区分退出和暂停应用程序（如果另一个应用程序进入前台，则会发生暂停）。其次，您需要重写适当的方法来处理应用程序暂停或销毁时发生的情况。

例如，覆盖

```
protected void onPause() {} 
```

将允许您定义应用程序暂停时应该发生的情况，因此，您可以优雅地停止应用程序正在执行的任何操作。

同样，如果需要，您可以实施`onStop`和。`onDestroy`但在你的情况下，我相信`onStop`并且`onPause`足够了:)

另外，试着看看这个页面，它给出了活动生命周期的详细描述 [http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:45:03.753

您需要停止`onStop()`活动中的振动服务。

```
@Override
protected void onStop() {
            Vibrator rr = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
            rr.cancel();
     } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T12:45:25.580

添加`onPause`到您的活动中并从那里取消振动器：

```
@Override
public void onPause() {
    Parar();
} 
```

当您的活动进入前台并且出现另一个活动（例如，当您的活动处于前台时来电）时，这将停止振动器。与仅在应用程序完成时取消振动器相比，这可能是更理想的行为。

# android - Android：Facebook 3.0 使用 FQL 请求响应在朋友墙上发帖（截至 2013 年 4 月 23 日）

> ID：16169456
> 
> 赞同：4
> 
> 时间：2013-04-23T12:32:39.307
> 
> 标签：android, facebook, facebook-fql, facebook-android-sdk

我的应用程序会生成按生日排列的朋友的自定义列表视图。所以我用过`SELECT name, uid, pic_square, birthday_date FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) order by birthday_date`。

现在，当用户点击一个朋友（从列表视图）时，它会提示用户她/他是否想向该朋友墙发帖。[我知道如何以旧方式做到这一点，但由于How to send a post to Facebook friend's wall android SDK 3.0](https://stackoverflow.com/questions/15277381/how-to-send-a-post-to-facebook-friends-wall-android-sdk-3-0)让我感到困惑。

在那个问题中：

> 适用于 Android 的 Facebook SDK 提供了一种方法，可让您将应用中的故事发布到用户的时间线。您还可以使用此方法代表您的用户发布状态更新。此方法使用 Graph API，是使用 Feed Dialog 的替代方法
> 
> [http://developers.facebook.com/docs/howtos/androidsdk/3.0/publish-to-feed/](http://developers.facebook.com/docs/howtos/androidsdk/3.0/publish-to-feed/)

还：

> 永远不要使用 Graph-API 在朋友的墙上发帖。因为它在 2013 年 2 月 6 日之后被禁用。FB 建议您使用 Feed Dialog 在朋友或您自己的墙上发帖。这是如何使用提要对话框的链接：http: [//developers.facebook.com/docs/howtos/androidsdk/3.0/feed-dialog](http://developers.facebook.com/docs/howtos/androidsdk/3.0/feed-dialog)

我看过这两个链接，但都只显示如何在你自己的墙上发帖。谁能给我一个很好的最新示例，或者至少，为我指出如何使用 FQL 请求响应通过 Facebook Android SDK 3.x 发布到您的朋友墙上的正确方向（目前版本为 3.0.2b） ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T09:19:53.347

我找到了解决方案。您只需要添加“to”和“from”参数。以下是我的示例：

**对于向单个朋友发布的墙：**

```
 private void publishFeedDialog(String friend_uid) {
        Session session = Session.getActiveSession();
        if (!hasPublishPermission()) {
            // We don't have the permission to post yet.
            session.requestNewPublishPermissions(new Session.NewPermissionsRequest(this, WRITE_PERMISSION));
        }
        if (user != null && friend_uid != null && hasPublishPermission()) {

            final Activity activity = this;
            Bundle params = new Bundle();
            //This is what you need to post to a friend's wall
            params.putString("from", "" + user.getId());
            params.putString("to", friend_uid);
            //up to this
            params.putString("name", "Facebook SDK for Android");
            params.putString("caption", "Build great social apps and get more installs.");
            params.putString("description", "The Facebook SDK for Android makes it easier and faster to develop Facebook integrated Android apps.");
            params.putString("link", "https://developers.facebook.com/android");
            params.putString("picture", "https://raw.github.com/fbsamples/ios-3.x-howtos/master/Images/iossdk_logo.png");
            WebDialog feedDialog = (new WebDialog.FeedDialogBuilder(this, Session.getActiveSession(), params))
                    .setOnCompleteListener(new OnCompleteListener() {

                    @Override
                    public void onComplete(Bundle values, FacebookException error) {
                        if (error == null) {
                            // When the story is posted, echo the success
                            // and the post Id.
                            final String postId = values.getString("post_id");
                            if (postId != null) {
                                Toast.makeText(activity,
                                    "Posted story, id: "+postId,
                                    Toast.LENGTH_SHORT).show();
                            } else {
                                // User clicked the Cancel button
                                Toast.makeText(activity, 
                                    "Publish cancelled", 
                                    Toast.LENGTH_SHORT).show();
                            }
                        } else if (error instanceof FacebookOperationCanceledException) {
                            // User clicked the "x" button
                            Toast.makeText(activity, 
                                "Publish cancelled", 
                                Toast.LENGTH_SHORT).show();
                        } else {
                            // Generic, ex: network error
                            Toast.makeText(activity, 
                                "Error posting story", 
                                Toast.LENGTH_SHORT).show();
                        }
                    }

                }).build();
            feedDialog.show();
        }
    } 
```

**对于许多朋友的墙贴：**

> RequestsDialogBu​​ilder 而不是 FeedDialogBu​​ilder 因为第二个只允许参数“to”上有多个 id，而第一个可以接收很多（虽然不确定限制，但我认为大约是 50）

学分：gian1200

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:51:34.333

可能重复...我认为您应该检查 Demo FB 提供的 [Facebook - 从 Android 应用程序发布到墙上](https://stackoverflow.com/questions/6536455/facebook-post-to-wall-from-android-application?rq=1)

**更新：**

嗯，有这个。 [http://developers.facebook.com/docs/howtos/androidsdk/3.0/publish-to-feed/](http://developers.facebook.com/docs/howtos/androidsdk/3.0/publish-to-feed/)

Facebook 实际上建议使用 Feed。一探究竟

# php - Laravel 3 闪现的变量并不总是在 Session 中

> ID：16169458
> 
> 赞同：1
> 
> 时间：2013-04-23T12:32:45.637
> 
> 标签：php, session, session-variables, laravel

我正在使用以下行重定向到捆绑包中的基本索引操作：

```
return Redirect::to_action('mybundle::base@index')->with("prevCommands", $prevCommands)->with("result", $result)->with_input(); 
```

重定向有效，但是当我从 Session 中获取信息时，我随机获得空值，以下代码在我的索引操作中：

```
$view['prevCommands']  = (array)Session::get('prevCommands');
$view['result']        = (string)Session::get('result'); 
```

上面的组合似乎只是随机工作，如果服务器需要更长的响应时间，它往往会更好地工作。在重定向之前，我检查了变量是否始终正确填充。

当它发生时，两个值都会立即返回为 null。从来没有只设置其中一个的情况。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T15:34:35.423

听起来您正在使用 cookie 会话驱动程序，并且空间不足。我建议更改为任何其他驱动程序（“内存”除外）。

Laravel 3 提供了[许多会话驱动程序](http://laravel.com/docs/session/config#the-basics)。'cookie' 是默认驱动程序，因为它需要零设置，但它的大小限制为 4K。对于更严重的事情，您应该考虑使用不同的驱动程序。为了便于设置...

*   [file](http://laravel.com/docs/session/config#file)将每个会话保存为 storage/sessions 中的文件，因此您需要确保此位置是可写的，并且如果您在共享服务器上，则它具有适当的权限。
*   [数据库](http://laravel.com/docs/session/config#database)在您的默认数据库连接中使用表，文档描述了必要的模式。
*   [memcached](http://laravel.com/docs/session/config#memcached)和[redis](http://laravel.com/docs/session/config#redis)使用各自的服务，一旦您安装并运行服务，它们不需要太多设置。

值得一提的是[内存](http://laravel.com/docs/session/config#memory)驱动程序，这仅对测试有用，因为数据不是持久的（在请求结束时丢失）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:40:54.207

没关系，我想通了，当我注意到 Laravel 3 中 Sessions 的 cookie 驱动程序实际上并没有使用 PHP 内置的 Cookie Session 机制时，它开始变得有意义，它实际上将整个有效负载存储在一个 cookie 中。

由于 cookie 的大小允许有限，如果存储的总数据超过 4K，则此机制会中断，请记住用于在会话中存储实际数组的所有“填充”字符。

这也让我意识到我的应用程序的设计是错误的，我不应该将如此大量的数据闪存到会话中。

# mysql - MySQL：您不能在 FROM 子句中指定目标表“列表”进行更新

> ID：16169463
> 
> 赞同：0
> 
> 时间：2013-04-23T12:32:58.373
> 
> 标签：mysql

我正在尝试运行以下查询：

```
update list
set li = '6'
where li = '5'
and dn in ( SELECT dn FROM list GROUP BY dn HAVING COUNT(*) < 2000 ) 
```

此查询导致上述错误：

```
You can't specify target table 'list' for update in FROM clause 
```

因此，我从建议我运行以下命令的人那里得到了建议：

```
START TRANSACTION;
UPDATE  list a
    INNER JOIN
    (
        SELECT  dn 
        FROM    list 
        GROUP   BY dn 
        HAVING  COUNT(*) < 2000 
    ) b ON a.dn = b.dn
SET     a.li = '6'
WHERE   a.li = '5'; 
```

此代码运行 - 问题是它永远不会完成。我不确定这是声明本身的问题，还是因为它试图自己处理 400 万条记录，但我昨晚睡觉时让它继续存在，今天早上还没有完成。另外，只是事后的想法：我确实尝试将其放入事务中，以防万一事情变得糟糕，因此投入了“开始事务；” 在这开始。

我的印象是这是一个相当普遍的问题——但不幸的是，我对 SQL 的了解不足以接受别人的查询并对其进行调整以适应我自己的需求。:p

谁能指导我找到允许我更新这些记录的解决方案？非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:02:02.393

这可能有效，因此，继续我上面的评论，这是一个答案：

是的，删除 '6' 和 '5' 周围的引号，您不希望 MySQL`li`在每次比较时将列转换为字符串......并创建索引。

```
CREATE idx_dn_li ON list(dn, li);

UPDATE  list a
    INNER JOIN
    (
        SELECT  dn 
        FROM    list 
        GROUP   BY dn 
        HAVING  COUNT(*) < 2000 
    ) b ON a.dn = b.dn
SET     a.li = 6
WHERE   a.li = 5; 
```

索引将使您`GROUP BY`更快，我认为在其中`li`放置列也可以提供帮助（如我所见，在没有记录受到影响的情况下，您的查询应该只读取索引，但不要相信我的话它 ;） ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:47:07.793

当我们尝试更新表并且我们在另一个查询中也有同一个表来更新列时会生成此错误。

我们无法从您同时更新的表中进行选择。但是，我们可以进行多表更新，例如

```
UPDATE tbl AS a
  INNER JOIN tbl AS b ON ....
  SET a.col = b.col 
```

或尝试您的查询的简化版本

```
update list l1, ( SELECT dn FROM list GROUP BY dn HAVING COUNT(*) < 2000 ) AS l2
set li = '6'
where li = '5'
and dn = l2.dn 
```

希望对您有所帮助.. 这是您的参考... [http://7php.com/mysql-update-select-statement-1093/](http://7php.com/mysql-update-select-statement-1093/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T12:50:45.353

询问：

```
update list
set li = '6'
where li = '5'
and dn in ( SELECT a.dn 
            FROM (SELECT * FROM list) a 
            GROUP BY a.dn 
            HAVING COUNT(*) < 2000 ) 
```

此查询可能会更快：

```
UPDATE list t
SET t.li = '6'
WHERE t.li = '5'
AND (SELECT COUNT(*)
     FROM (SELECT * FROM tik) a 
     WHERE a.dn = t.dn) < 2000 
```

# python - 在 numpy (python) 中定义和乘法矩阵

> ID：16169473
> 
> 赞同：2
> 
> 时间：2013-04-23T12:33:32.633
> 
> 标签：python, numpy

我正在尝试使用 numpy，但我不知道如何`n by n`在 numpy 中正确定义矩阵。我用过`numpy.zeros(n,n)`......但我不确定它是否可以。

像这样使用numpy是否正确？我想得到`(matrix^T * vector) - vector`。

```
matrix = np.zeros((n,n))
start =  [(1/float(n)) for _ in range(n)]
vector = np.array(start)
newvector = np.dot(np.transpose(matrix) , vector)
ans=  np.subtract(newvector , vector) 
```

我问这个是因为我得到了错误的结果而且我不确定我的问题在哪里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:20:12.547

要在 中定义矩阵`numpy`，您有多种选择：

*   `numpy.zeros`定义一个用零填充的矩阵。
*   `numpy.ones`定义一个用 1 填充的矩阵。
*   `numpy.array`定义基于其他东西的矩阵（例如列表）
*   `numpy.empty`定义一个矩阵而不为其分配值（因此它包含内存中当前分配的位置）。

所有这些函数都使用矩阵维度的元组作为第一个参数。这就是括号加倍的原因。

使用`numpy`，您可以使用按元素执行的任何常用运算符（+、-、* /、**）。

要执行矩阵乘法，您需要使用`numpy.dot`函数。

然后，您可以将您的功能写成：

```
n = 10
matrix = numpy.zeros((n,n))
vector =  numpy.ones(n) / n
newvector = numpy.dot(matrix.T, vector)
ans = newvector - vector 
```

但我认为这`matrix`应该不是零矩阵，或者不需要转置操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:00:53.267

基本上你是正确的，你如何使用 numpy。为了方便使用，我会以不同的方式编写起始向量，并使用对象方法来计算所需的值。

```
n = 10

matrix = np.zeros((n, n))
vector = np.ones((n,)) * 1.0/n
new_vector = matrix.T.dot(vector)
ans = new_vector - vector

print ans

>>> [-0.1 -0.1 -0.1 -0.1 -0.1 -0.1 -0.1 -0.1 -0.1 -0.1] 
```

输出应该是正确的（矩阵时间向量应该是一个充满零的向量减去一除以十，瞧）。我不太确定 NxM 矩阵的一般形式和转置的使用（这需要再考虑一分钟;-)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T15:18:01.957

除了@CharlesBrunet 的答案之外，还有一个专门的数学矩阵类，其中`A*B`是标准矩阵乘法（而不是元素乘法）。

# [numpy.matrix](http://docs.scipy.org/doc/numpy/reference/generated/numpy.matrix.html)

> 从类似数组的对象或数据字符串中返回矩阵。矩阵是一种特殊的二维数组，它通过运算保持其二维性质。它具有某些特殊的运算符，例如*（矩阵乘法）和**（矩阵幂）。

来自文档的创建示例：

```
>>> a = numpy.matrix('1 2; 3 4')
>>> print a
[[1 2]
 [3 4]]
>>> numpy.matrix([[1, 2], [3, 4]])
matrix([[1, 2],
        [3, 4]]) 
```

# c# - 在 MediaElement 中显示多个视频

> ID：16169475
> 
> 赞同：0
> 
> 时间：2013-04-23T12:33:33.360
> 
> 标签：c#, xml, windows-phone-7, xaml

通过 XML 文件，我必须获得标题、视频链接和日期，以便在 WindowsPhone 8 上显示。我使用以下代码浏览文件：

```
 foreach (var item in xElement.Elements("channel").Elements("item"))
            {
                var feed = new Feed
                    {
                        Link = item.Element("description").Value,
                        PubDate = DateTime.Now,
                        Title = item.Element("title").Value
                    };
                Results.Items.Add(feed);
            } 
```

此代码正确检索值。我使用绑定来链接两者：

```
 <ScrollViewer Grid.Row="1" BorderThickness="0">
            <ItemsControl Name="Results"  >
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <StackPanel>
                            <TextBlock TextWrapping="Wrap"
                                       Text="{Binding Path=Title}" />

                            <MediaElement Name="Media"
                                          Source="{Binding Path=Link}" 
                                          Stretch="Fill"
                                          AutoPlay="True" />

                            <TextBlock Text="{Binding Path=PubDate}" />
                        </StackPanel>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer> 
```

问题是只显示了两个视频（并不总是相同）。我不知道错误在哪里，因为所有数据都已检索，包括指向我的视频的链接。我还会向 MediaElement 添加控件，例如：播放、停止、...但我不知道在哪里放置代码。

对不起我的英语！我是法国人。谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:27:37.883

不久前，我记得在 MSDN 上读到，Windows Phone 完全支持的活动 MediaElement 数量是 1（请注意，这是 7.0 或 7.1）。我在 MSDN 上找不到此参考资料，但如果您在网上搜索，您会发现类似的断言（尽管没有 MSDN 引号或其他）。

尝试只拥有一个，看看它是否按预期工作，然后尝试增加两个。

# javascript - 使用 firebug 调试 javascript

> ID：16169478
> 
> 赞同：-4
> 
> 时间：2013-04-23T12:33:36.797
> 
> 标签：javascript, html

我正在尝试在 firefox 中使用 firebug 调试以下 javascript 程序

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Debug: Times Table 2</title>

    <script type="text/javascript">
        function writeTimesTable(timesTable) 
        {
            var counter;
            var writeString;
            for (counter = 1; counter < 12; counter++) 
            {
                writeString = counter + " * " + timesTable + " = ";
                writeString = writeString + (timesTable * counter);
                writeString = writeString + "<br />";
                document.write(writeString);
            }
        }
    </script>

</head>
<body>
    <script type="text/javascript">
        var timesTable;
        for (timesTable = 1; timesTable <= 12; timesTable++) 
        {
            document.write("<p>")
            writeTimesTable(timesTable)
            document.write("</p>")
        }
    </script>
</body>
</html> 
```

当我在第二个for循环设置断点并重新加载浏览器重新加载页面而不停止执行时。但是在使用 web 检查器的 chrome 中它工作得非常好

怎么了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:49:04.077

**1）**打开firefox并启用firebug

**2)**在 Firefox 中打开您的 HTML 页面。

**3)**转到firebug 控制台的***脚本选项卡***

**4）**如果有消息***“重新加载”***然后单击重新加载并加载所有javascript代码

**5）**单击要设置***断点***的行号，任意数量

**6)**在同一个选项卡中，在标题的右侧，单击***播放***图标以遍历您的**断点**

**注意：**我刚刚在 firebug 中成功调试了您的代码。

# php - 无法在 if 语句中访问 PHP 变量

> ID：16169481
> 
> 赞同：0
> 
> 时间：2013-04-23T12:33:50.800
> 
> 标签：php, variables

我对以下代码有问题。变量 $houseid 在第二个 if 语句中显示为空，但可以在第一个中调用。我需要在第二个 if 语句中访问 $houseid 变量。我已经在 if 和第一个之外对其进行了测试，它似乎在两者中都可以正常工作。

```
$landlordid = $_SESSION['landlordid'];

$con = mysqli_connect("mysql1616int.cp.blacknight.com","***","***","***"); // Connect to the MySQL server

$mysql = mysqli_query($con, "SELECT * FROM houseInfo WHERE landlordID = '{$landlordid}'");

    echo '<form method="POST" action=""><select name="pickhouseid">';

    while($row = mysqli_fetch_array($mysql)){
      echo '<option value="' . $row['houseID'] . '">'. $row['housename'] . '</option>';
      }

    echo '</select> 
    <input type="submit" name="houseselect"  value="Select">
    </form>';
    echo "<br>";

    $houseid = $_POST['pickhouseid']; ///where house is set.

    if(isset($_POST['houseselect'])){
    echo "<form method='POST' action=''><select name='services'><option value='gas1'>Gas Reading</option>
            <option value='water1'>Water Reading</option><option value='elec1'>Electricity Reading</option>
            </select><input type='submit' value='Select'></form>";

    echo "<br>";
    echo $houseid; /// returns correct value
    }
    if (($_POST['services']) == 'gas1') { 
    echo "something";
    echo $houseid; ///doesn't work, appears as empty.
    } 
```

任何人都可以帮助解决这个问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T12:39:12.143

表单仅提交此表单中的内容，而不提交页面上另一个表单中的内容。

`$houseid`（在你的最后一个 if 中）现在应该`NULL`如此回显它应该什么也不输出。

因此，将有关的信息添加`$houseid`到其他表单中。`$_POST`数据不会通过多个请求传递。

```
echo "<form method='POST' action=''><select name='services'><option value='gas1'>Gas Reading</option>
        <option value='water1'>Water Reading</option><option value='elec1'>Electricity Reading</option>
        </select><input type='submit' value='Select' />
        <input type='hidden' value='$houseid' name='houseid' /> <!-- here was added -->
       </form>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:39:57.453

哇，这可能吗？我看不出为什么 $houseid 应该返回空，除非条件返回 false，尝试在 if 语句块中回显其他内容（字符串）并查看它是否出现，我真的认为 if 语句无论如何都返回 false。

# twitter-bootstrap - 在引导程序中移动幻灯片

> ID：16169482
> 
> 赞同：0
> 
> 时间：2013-04-23T12:33:53.750
> 
> 标签：twitter-bootstrap

我正在使用引导程序的轮播，为此我在我的 js 文件夹中拥有所有这些文件。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="js/bootstrap.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/bootstrap-carousel.js"></script>
<script src="js/bootstrap-transition.js"></script>
<script src="js/bootstrap-alert.js"></script>
<script src="js/bootstrap-modal.js"></script>
<script src="js/bootstrap-dropdown.js"></script>
<script src="js/bootstrap-scrollspy.js"></script>
<script src="js/bootstrap-tab.js"></script>
<script src="js/bootstrap-tooltip.js"></script>
<script src="js/bootstrap-popover.js"></script>
<script src="js/bootstrap-button.js"></script>
<script src="js/bootstrap-collapse.js"></script>
<script src="js/bootstrap-typeahead.js"></script> 
```

我的旋转木马就是这个。

```
 <div id="myCarousel" class="carousel slide">
        <!-- Carousel items -->
        <div class="carousel-inner">
            <div class="active item"><img src="img/cabecera/slide1.jpg"></div>
            <div class="item"><img src="img/cabecera/slide3.jpg"></div>
            ...
        </div>
        <!-- Carousel nav -->
        <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
        <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
    </div> 
```

问题是第一次旋转木马不通过幻灯片，我必须按向左或向右箭头才能通过幻灯片，当我按下第一次时，幻灯片单独移动。

怎么了？我想念一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:44:23.947

据我了解，这与此处的问题相同。[如何使 Bootstrap js 轮播在页面加载后自动循环？](https://stackoverflow.com/questions/9750816/how-can-i-make-the-boostrap-js-carousel-automatically-cycle-as-soon-as-the-page)

据此，您的问题的解决方案是一些 js 代码：

```
$(document).ready(function () {
    $('.carousel').carousel({
        interval: 3000
    });

    $('.carousel').carousel('cycle');
}); 
```

# c# - 如果我们从输入中删除所有脚本和 java 单词，我们可以说我们免受 XSS 攻击吗

> ID：16169483
> 
> 赞同：1
> 
> 时间：2013-04-23T12:33:56.323
> 
> 标签：c#, asp.net, xss, sanitization

我正在使用 asp.net htmleditorextender，不幸的是，现在没有有效的 XSS sanitizer。因此，作为快速解决方案，我将替换用户输入中的所有脚本和 java 单词，如下所示

```
 var regex = new Regex("script", RegexOptions.IgnoreCase);
    srSendText = regex.Replace(srSendText, "");

    regex = new Regex("java", RegexOptions.IgnoreCase);
    srSendText = regex.Replace(srSendText, ""); 
```

我可以假设我免受 XSS 攻击吗？

实际上我正在使用 htmlagilitypack 反 xss 消毒剂，但它甚至没有删除脚本标签，所以完全没用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T12:38:26.663

不，你不能。

攻击者可以通过例如编码`script`为`s&#99;ript`.

确保代码免受 XSS 攻击是通过确保任何可能来自用户的内容在没有适当编码的情况下永远不会放入页面中来完成的，以确保文本中的任何代码都不会被执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:37:53.173

在我看来，自定义 XSS 预防通常是不可以的，因为您应该始终使用库。然而剥离`script`并`java`不够，任何传递给服务器的东西都应该使用`HttpUtility.HtmlEncode`它来编码来自用户的任何输入。

还要确保`validateRequest="true"`在配置文件中设置。

其他危险标签可能包括：

*   小程序
*   身体
*   嵌入
*   框架
*   脚本
*   框架集
*   html
*   框架
*   图像
*   风格
*   层
*   关联
*   层
*   元
*   目的

[http://msdn.microsoft.com/en-us/library/ff649310.aspx](http://msdn.microsoft.com/en-us/library/ff649310.aspx)

# java - 如何让 Android “绑定”服务在配置重启后仍然存在

> ID：16169488
> 
> 赞同：17
> 
> 时间：2013-04-23T12:33:59.677
> 
> 标签：java, android

我有一个需要清理的具有一些全局状态（包括一些大`SoundPool`的 s）的 android 应用程序，因此在回答我之前的问题后，我尝试使用`Service`.

我目前正在使用一个*绑定*服务，每个活动都绑定/取消绑定到 in `onStart`/ `onStop`，当所有活动停止时，服务变得未绑定并`onDestroy`调用服务，让我释放`SoundPools`.

由于活动生命周期故意重叠（新活动`onStart`在旧活动触发之前触发`onStop`），当在活动之间导航时，始终至少绑定一个活动，并且服务保持活动状态。

但是，如果我旋转屏幕以导致配置重新启动，则当活动活动经历配置重新启动生命周期时，该服务未绑定并终止。

我怎样才能解决这个问题并在重新启动时保持服务处于活动状态，同时在应用程序停止时仍然允许服务死亡？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-29T13:36:47.993

好的，因为这已被证明是一个特别困难的问题，我想我会在这里发布我的解决方案，以防有人遇到类似的问题。

显然有几种方法可以解决这个问题，但我使用过的最简单的方法是拥有一个“启动”服务来决定何时自行关闭。我的活动每次都绑定/取消绑定到服务，并且在设定的时间延迟（我用了 1 分钟）后，如果没有进一步的活动绑定，服务将自行关闭 - 这包括用户是否停止使用应用程序以及是否有任何致命的活动错误。

关闭计时器计划在, ,内`onUnbind()`取消。如果它触发，它会干净地关闭服务，这反过来会触发对服务中托管状态的清理。`onStartCommand()``onBind()``onRebind()``onDestroy()`

我的`Service`代码如下：

```
public class LocalStateService extends Service {

    /** The binder to give to clients. */
    private final IBinder binder = new LocalStateBinder();

    /** Used for time-delayed shutdown. */
    private final Handler handler = new Handler();

    /**
     * Called before starting or the first binding.
     */
    @Override
    public void onCreate() {
        // initialise state...
    }

    /**
     * Called when this service is explicitly started.
     * @param intent    The intent passed on starting, unused
     * @param flags     Startup flags, unused
     * @param startId   Identifies each start request 
     * @return Desired restart behaviour
     */
    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        cancelShutdown();

        // if killed, we would like Android to restart this service, but don't bother re-delivering
        // the original intent used to start the service
        return START_STICKY;
    }

    /**
     * Called when the first client binds.
     * @param intent        The intent passed on binding
     * @return The binding to use
     */
    @Override
    public IBinder onBind(Intent intent) {
        cancelShutdown();
        return binder;
    }

    /**
     * Called when the first of previous clients re-binds.
     * @param intent        The intent passed on binding
     */
    @Override
    public void onRebind(Intent intent) {
        cancelShutdown();
    }

    /**
     * Called when all clients have unbound.
     * @param intent        The first intent originally passed on binding
     * @return Whether this service should be notified of rebinding
     */
    @Override
    public boolean onUnbind(Intent intent) {

        // post a callback to be run in 1 minute
        handler.postDelayed(delayedShutdown, 1000L * 60);

        // we do want onRebind called when clients return
        return true;
    }

    @Override
    public void onDestroy() {
        // state cleanup...
    }

    private Runnable delayedShutdown = new Runnable() {

        @Override
        public void run() {
            LocalStateService.this.stopSelf();
        }

    };

    /**
     * Cancel any shutdown timer that may have been set.
     */
    private void cancelShutdown() {
        // remove any shutdown callbacks registered
        handler.removeCallbacks(delayedShutdown);
    }
} 
```

我的主要活动不是从我的`Application`，而是调用`startService(..)`的，`onCreate()`因为这将适用于初始启动和当用户返回使用暂停的应用程序时（服务可能会或可能不会决定自行关闭）。

然后每个活动按正常方式绑定和解除绑定。

我找到：

*   在活动之间导航时，不会触发任何服务回调。由于活动生命周期重叠，这些是辅助绑定/取消绑定

*   当一个活动重新启动（例如屏幕旋转）时，服务会收到`onUnbind()`一个`onRebind()`调用

*   当暂停应用程序（例如，从主活动按下主页）或完成时（例如，从主活动按下），服务将`onUnbind()`触发计时器。

# paypal - Paypal 通知网址无法显示 1985 年的最新交货日期？

> ID：16169490
> 
> 赞同：1
> 
> 时间：2013-04-23T12:34:04.680
> 
> 标签：paypal, paypal-sandbox, paypal-ipn

我们在使用贝宝时遇到了一些问题：

1.  通知 url 和状态在消息详细信息页面中显示为空。
2.  ipn 消息上的重试日期出现在 1985 年：

![在此处输入图像描述](https://i.stack.imgur.com/UbWm6.png)

除了及时赶上重试之外，我们还能做些什么来解决这个问题？

概述：

*   我们使用基本付款
*   我们使用来自 php 重定向的 notify_url 参数
*   它在沙盒和直播中完美运行，直到您更新
*   paypal ipn 交易显示正确的自定义参数

服务器端：

PHP + 自定义框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:48:46.720

IPN 目前存在一些问题，这些问题正在得到解决，一旦解决，这些问题应该会解决。如果您希望在问题得到解决后收到通知，您可以向[PayPal 商家技术支持](http://www.paypal.com/mts)开具工单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T20:17:58.130

user1214454：我有同样的问题，我在这里描述过：

[https://stackoverflow.com/questions/16174275/why-paypal-does-not-call-my-notify-url-but-on-sandbox-everything-works](https://stackoverflow.com/questions/16174275/why-paypal-does-not-call-my-notify-url-but-on-sandbox-everything-works)

我已与 PayPal 联系，但他们说 paypal 正在向我的 IPN 发送 IPN 消息，但我的 IPN 不接受它们，我认为这不是真的，因为当请求命中我的服务器时，我的脚本会生成电子邮件我知道是否有什么东西击中了我的服务器。此外，正如我在沙盒中的帖子中所说，一切都按预期工作。我也很沮丧，因为我的生意取决于此。

# php - 如何使用php从同一页面上的sql select函数获取显示的数据

> ID：16169493
> 
> 赞同：0
> 
> 时间：2013-04-23T12:34:17.460
> 
> 标签：php, sql, forms, select

我正在创建一个页面，该页面需要能够在数据库中搜索特定信息，如果找到，我需要在您点击搜索后将其显示在同一页面上。我将使用邮政编码来运行搜索，所以如果有人在我输入他们的邮政编码之前留下了详细信息并选择他们（如果他们在那里）。我主要使用php并且不了解其他内容，这可能吗？我设置了数据库并添加了函数/表单。

现在我只是在搜索功能之后这可能在 php 中吗？最好在同一页上？

我相信我可能需要它像

```
 // Connect to server and select databse.
  mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
  mysql_select_db("$db_name")or die("cannot select DB");

  $sql="SELECT * FROM customer
  WHERE postcode=''" 
```

这应该显示它们没有？在它显示后我需要一个选项来突出显示我想要的选项，然后在按下选择时突出显示它会将我带到包含此信息的新页面。

好的，所以我认为它是这样的

```
 // Connect to server and select databse.
  mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
  mysql_select_db("$db_name")or die("cannot select DB");

  $sql="SELECT * FROM customer
   WHERE postcode = VALUES
  ('$_POST[postcode]'";

 if (!mysqli_query($con,$sql))
    {
     die('Error: ' . mysqli_error());
    }

     mysqli_close($con);
   ?> 
```

我希望这将显示它，但我不知道如果我需要什么其他部分，或者我什至应该有那个 if 语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:41:10.003

我会推荐 AJAX 来完成这项工作。您可以在此处找到示例代码：http:
[//www.w3schools.com/php/php_ajax_php.asp](http://www.w3schools.com/php/php_ajax_php.asp)
“showHint()”函数当然可以是您应用程序中的任何内容。

# ios - 将渐变应用于 UIImage - 如何消除颜色反转？

> ID：16169499
> 
> 赞同：2
> 
> 时间：2013-04-23T12:34:39.727
> 
> 标签：ios, objective-c, ios5, ios6

我正在应用渐变`UIImage`，我希望它在底部变暗，然后在中间慢慢变成透明或浅灰色。大部分都可以，但我有一个问题，就是我的图像颜色在这个渐变下的某些地方会反转。这看起来很烦人。我该如何解决？

为了您的方便，这是我的方法。

我尝试过选择不同的混合模式，但没有帮助。另一个问题是，如何让底部的黑色更加密集？

此方法无需任何额外代码即可工作。开始颜色是`[UIColor blackColor]`，结束颜色是`[UIColor clearColor]`：

```
- (UIImage *)imageWithGradient:(UIImage *)img startColor:(UIColor *)color1 endColor:(UIColor *)color2 {
    UIGraphicsBeginImageContextWithOptions(img.size, NO, img.scale);
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextTranslateCTM(context, 0, img.size.height);
    CGContextScaleCTM(context, 1.0, -1.0);

    CGContextSetBlendMode(context, kCGBlendModeDarken); // tried normal here, same results

    CGRect rect = CGRectMake(0, 0, img.size.width, img.size.height);
    CGContextDrawImage(context, rect, img.CGImage);

    // Create gradient
    NSArray *colors = [NSArray arrayWithObjects:(id)color1.CGColor, (id)color2.CGColor, nil];
    CGColorSpaceRef space = CGColorSpaceCreateDeviceRGB();
    CGGradientRef gradient = CGGradientCreateWithColors(space, (__bridge CFArrayRef)colors, NULL);

    // Apply gradient
    CGContextClipToMask(context, rect, img.CGImage);
    CGContextDrawLinearGradient(context, gradient, CGPointMake(0,0), CGPointMake(0, img.size.height / 2.0), 0);
    UIImage *gradientImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    CGGradientRelease(gradient);
    CGColorSpaceRelease(space);

    return gradientImage;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-23T13:11:28.333

试试这个

```
// Set image over layer
CAGradientLayer *gradient = [CAGradientLayer layer];
gradient.frame = imageView.frame;

// Add colors to layer
UIColor *centerColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:0.25];
UIColor *endColor = [UIColor grayColor];
gradient.colors = [NSArray arrayWithObjects:
                               (id)[endColor CGColor],
                               (id)[centerColor CGColor],
                               (id)[endColor CGColor],
                               nil];

[imageView.layer insertSublayer:gradient atIndex:0]; 
```

只需根据您的要求更改 gradient.colors 数组。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-31T14:24:30.663

Navnath 用 Swift 回答

```
var gradient = CAGradientLayer()
gradient.frame = imageView.frame
gradient.colors = [
    UIColor(white: 0, alpha: 0.25).CGColor,
    UIColor.grayColor().CGColor, 
    UIColor(white: 0, alpha: 0.25).CGColor
]
imageView.layer.insertSublayer(gradient, atIndex: 0) 
```

Hope you find it useful

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-03T03:09:57.383

Slight correction to Navnath's and Francis's answers... gradient.frame needs to be set to imageView.bounds:

```
gradient.frame = imageView.bounds 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T12:40:11.453

尝试仅更改 alpha 以获得所需的结果。将图层放在现有图像的顶部。

# ruby-on-rails - ruby on rails 中多个资源和一个数据库表的最佳实践？

> ID：16169500
> 
> 赞同：0
> 
> 时间：2013-04-23T12:34:41.053
> 
> 标签：ruby-on-rails, database, model-view-controller

我正在开发一个 Ruby on Rails 项目。该项目有一个名为“Post”的主数据库表。

此表用于将问题、答案、评论和公告存储为不同的帖子类型。目前我们只使用一种模型来访问数据。但是在系统上工作时感觉很混乱。因为每种帖子类型都有一些差异。

**什么是最佳实践：**

1.  将 post 资源拆分为不同的资源，但只使用一个 Post 表进行数据访问？
2.  将数据库表拆分为评论、问题、答案和公告表；并为每个表使用资源（模型+控制器+视图）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:41:08.967

我认为选择应该基于每一个特定的情况。只需为您列举每个选项的优缺点。调查和决策的要点可能是：每种类型实体之间的差异数量、访问实体的方式、每种类型实体的使用频率、代码的可维护性、对未来变化的预测等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:42:50.680

简短的回答：这取决于。

您现在所做的非常接近单表继承 (STI)，尽管听起来您正在使用`Post`包含所有不同行为的单个类。STI 是一种有效的存储模型数据的方法，但与所有事物一样，它也有优点和缺点。

我的建议是使用单独的类来封装单独的域模型的行为。这是 OOP 的基本范式，所以我想说这*可能*是最佳实践。

假设您将您的行为跨类分开，您是使用单个表还是多个表来存储它们的问题实际上取决于查询的复杂性以及模型中有多少公共字段。如果他们有很多共同的领域，STI 可能会很好地工作。如果没有，您可能不会享受您将支付的所有额外读取/写入的开销。但所有这些都是次要的，可以随着您的应用程序的增长以及您对使用模式的了解更多而弄清楚。

使用 STI 尝试一下，看看效果如何。将事物拆分为多个表比相反更容易，因此迁移路径不一定太难。

# java - 无法在 Oracle 中对匹配的地图列 (MapKeyColumn) 进行条件搜索

> ID：16169502
> 
> 赞同：1
> 
> 时间：2013-04-23T12:34:56.243
> 
> 标签：java, oracle, hibernate, jpa

我有这个实体，想找到任何具有相同属性集的实体。

```
@Entity
public class PropertyResource {

    @ElementCollection
    @MapKeyColumn(name = "property_key")
    @Column(name = "property_value")
    @CollectionTable(name = "resource_properties")
    private Map<String, String> properties = Maps.newHashMap();

    ...
} 
```

这是我使用标准构建器的实现：

```
public List<PropertyResource> findDuplicateProperties(PropertyResource resource) {
    CriteriaBuilder builder = em.getCriteriaBuilder();
    CriteriaQuery<PropertyResource> query = builder.createQuery(PropertyResource.class);
    Root<PropertyResource> resourceRoot = query.from(PropertyResource.class);
    List<Predicate> clauses = Lists.newArrayList();
    for (Entry<String, String> entry : resource.getProperties().entrySet()) {
        MapJoin<PropertyResource, String, String> properties = resourceRoot.joinMap("properties", JoinType.INNER);
        clauses.add(builder.and(builder.equal(properties.key(), entry.getKey()), builder.equal(properties.value(), entry.getValue())));
    }
    if (!resource.isNew()) {
        clauses.add(builder.notEqual(resourceRoot.get("id"), resource.getID()));
    }
    clauses.add(builder.equal(resourceRoot.get("type"), resource.getType()));
    return em.createQuery(query.where(clauses.toArray(new Predicate[clauses.size()]))).getResultList();
} 
```

我正在为每个属性做一个额外的加入。相同类型的属性和资源具有相同的属性键的数量并不多。这在 h2 中效果很好，它产生了这个：

```
select ...
from resource_table propertyre0_ 
inner join resource_properties properties1_ on propertyre0_.entid=properties1_.PropertyResource_entid 
inner join resource_properties properties2_ on propertyre0_.entid=properties2_.PropertyResource_entid 
where properties1_.property_key=? and properties1_.property_value=? 
and properties2_.property_key=? and properties2_.property_value=? 
and propertyre0_.entid<>4 and propertyre0_.resource_type=? 
```

但是对于 Oracle，我得到了这个：

```
select ...
from resource_table propertyre0_ 
where propertyre0_.entid<>230 and propertyre0_.resource_type=? 
```

我的查询有什么问题吗？

OBS：差点忘了。Hibernate 版本是 4.1.9.Final。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:26:26.590

这是用户错误的情况（请更换用户）。我的问题是发送到 Oracle 案例的属性映射确实是空的。代码做了唯一正确的事；它没有创建任何连接。

# java - 如何禁用另一个活动的按钮？

> ID：16169504
> 
> 赞同：0
> 
> 时间：2013-04-23T12:35:03.287
> 
> 标签：java, android

所以，我有一个菜单活动，用户可以在那里选择要玩的游戏。当他这样做时，在游戏中他可以选择返回菜单（在 backPress 或游戏中的退出按钮上）。发生这种情况时，我需要禁用该游戏按钮，这样用户就不能再玩了。我怎样才能做到这一点？

我试图从 Menu 类中创建一个对象，然后禁用该按钮但出现错误。也试过：

```
public void disableButton(){
        button.setEnabled(false);
    } 
```

然后调用它：

```
obj.disableButton 
```

但是，一旦我的菜单活动开始，我就在创建我的 obj 的地方收到 stactOverflow 错误。这个怎么做？

编辑：

在菜单类中：

```
public void disableButton(){
        button.setEnabled(false);
    } 
```

在游戏类中：

```
Menu objMenu = new Menu(); 
```

然后在退出 onClickListener：

```
objMenu.disableButton(); 
```

编辑2：

以下是我如何称呼我的游戏活动：

```
Intent i = new Intent(this, Game.class);
            startActivityForResult(i, GAME); 
```

然后在游戏活动中：

```
Intent resp = new Intent();
                resp.putExtra("score", numberOfPoints);
                setResult(1, resp);
                finish(); 
```

再次在 Menu 类中：

```
final private static int AS = 1;

@Override
    protected void onActivityResult(int reqCode, int respCode, Intent i) {
        if(respCode == 1) {
            switch(reqCode) {
                case AS: receivedA = i.getIntExtra("score", receivedA);
                button.setEnabled(false);
                            break;
} 
```

所以，这就是我在游戏结束时所做的，我成功地禁用了那个按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:51:43.130

我认为问题不仅在`button.setEnabled(false);`. 由于没有看到代码的详细信息就很难说是什么问题，我建议另一种解决方案

1.  使用 startActivityForResult 从菜单活动开始游戏活动
2.  游戏结束时，在返回意图中放一个特定的数据
3.  在菜单活动中，在 onActivityResult 检查结果意图是否具有特定数据
4.  根据第 3 步，您可以启用或禁用按钮

# node.js - 更新记录推送数组Node.js + MongoDB中的唯一值

> ID：16169507
> 
> 赞同：3
> 
> 时间：2013-04-23T12:35:15.713
> 
> 标签：node.js, mongodb

我有用户记录，每个用户都有一个朋友列表。

如何仅推送用户记录中朋友数组中的唯一值？

```
accounts.update({user:nickNameField}, {$push:{"friends":friendsName}}, { upsert:true },
    function (e, res) {
    ... 
```

还是我需要手动检查该值是否在朋友数组中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T13:02:03.610

啊，可以用 $addToSet 来完成

```
AM.accounts.update({user:nickNameField}, {$addToSet:{friends:friendsName}},
    function (e, res) { 
```

# bash - bash，获取自午夜以来的当前时间（以毫秒为单位）

> ID：16169515
> 
> 赞同：3
> 
> 时间：2013-04-23T12:35:35.967
> 
> 标签：bash, time, milliseconds

有没有办法在 bash 中获取午夜过后的当前毫秒数？如果有办法完全在 bash 中完成，那么该时间戳的精度有多好或多差？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-23T12:44:51.250

您可以通过以下方式获得今天的午夜：

```
date -d 'today 00:00:00' 
```

在 UNIX 邮票中：

```
date -d 'today 00:00:00' "+%s" 
```

因此，如果您想获得差异，请执行以下操作：

```
midnight=$(date -d 'today 00:00:00' "+%s")
now=$(date "+%s")
diff_mills=$(( ($now - $midnight) * 1000 )) 
```

表示`%s`秒，我们必须`*1000`得到毫秒。

* * *

使用`%N`（纳秒）：

```
midnight=$(date -d 'today 00:00:00' "+%s.%N")
now=$(date "+%s.%N")
diff_mills=$(echo "( $now - $midnight ) * 1000" | bc) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-23T18:44:48.917

您也可以使用 mod 而不是明确的日期差异。例如，分辨率为 1 秒：

```
millis_since_midnight=$[1000 * ( ( `date "+%s"` - 28800 ) % 86400 )] 
```

请注意，28800 是与 UTC 的 PST 偏移量（以秒为单位）。在像 OSX 这样具有 BSD 时间并因此缺乏指定`--date 'today 00:00:00'`.

# c# - 具有服务帐户身份验证的 GA Api V3

> ID：16169518
> 
> 赞同：1
> 
> 时间：2013-04-23T12:35:48.387
> 
> 标签：c#, .net, google-analytics

上周我创建了两个完全没有问题的报告项目，现在我总共得到了 3 个。我想为客户制作第四个，但我突然得到了 403 错误代码。我按照与上一个项目相同的程序没有成功。

```
Google.Apis.Requests.RequestError 
```

用户没有任何 Google Analytics 帐户。[403]

**错误**

> 消息[用户没有任何 Google Analytics 帐户。] 位置[-] 原因[insufficientPermissions] 域[全局]

我什至在 Google Console api 中删除了该项目 3 次获取我在 Google 中添加的提供的服务帐户电子邮件，我以管理员身份完成它作为用户什么都没有，我在互联网上搜索，我发现很多人都有这个问题。

所有解决方案都与将服务电子邮件帐户设置为用户而不是管理员有关，奇怪的是其他项目我在 Google Analytics 中以管理员身份收到这封电子邮件，在控制台中作为所有者（团队选项卡）收到这封电子邮件，它的工作完美没有问题。这个目前还没有。我还能做什么？

# prolog - YAP prolog cpu 秒数

> ID：16169519
> 
> 赞同：1
> 
> 时间：2013-04-23T12:35:54.253
> 
> 标签：prolog, yap

我正在使用 time/1 来测量 YAP prolog 中的 cpu 时间，例如

514.000 CPU 在 0.022 秒内 (2336363% CPU) 是

我想问的是这些数字的解释是什么？514.000 是否代表 CPU 秒数？什么是“0.022 秒”以及随后的 CPU 百分比？

谢谢

# php - php wp_query 从变量中的多个值中获取一个值 - 以逗号分隔的值

> ID：16169521
> 
> 赞同：0
> 
> 时间：2013-04-23T12:36:04.027
> 
> 标签：php, wordpress

作为一种方法，这可能看起来有点奇怪。

我的 wordpress 网站上有帖子，其中有一个名为“ `login_email`”的自定义字段

在我的主题文件中，我有这个查询......

```
$press = new WP_Query(array(
    'posts_per_page' => -1,
    'post_type'     => 'download',
    'post_status'   => 'private',
    'meta_query'    => array(
        array(
            'key' => 'login_email',
            'value' => $current_user->user_login,
            'compare' => '='
        )
    )      
)); 
```

这只是检索具有`login_email`匹配的自定义字段值的私人帖子`$current_user->user_login`

目前在我的`login_email`自定义字段中，我有这个值......

```
josh@samplemail.uk.com 
```

不，我想做的是向这个自定义字段添加更多电子邮件，并用这样的逗号分隔......

```
josh@samplemail.uk.com, colin@samplemail.uk.com, jimbo@samplemail.uk.com 
```

...并且我上面的查询能够识别此列表中的一封电子邮件。

例如，如果用户`colin@samplemail.uk.com`已登录，那么由于 colins 电子邮件存在于此自定义字段中（以及 josh 和 jimbo 的电子邮件），则该帖子将在查询中返回。

我希望这有点道理。让我知道是否需要详细说明。

就像我需要修改查询中的比较 - 但这些是我能找到的唯一选项......

**compare (string) - 要测试的运算符。可能的值是 '='、'!='、'>'、'>='、'<'、'<='、'LIKE'、'NOT LIKE'、'IN'、'NOT IN'、'BETWEEN '、'NOT BETWEEN'、'EXISTS'（仅在 WP >= 3.5 中）和 'NOT EXISTS'（也仅在 WP >= 3.5 中）。默认值为“=”。** [资源](https://codex.wordpress.org/Class_Reference/WP_Query)

...我已经测试了 EXISTS 但没有返回任何帖子。

有没有人有一个聪明的解决方案或想法？

谢谢乔什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:16:12.010

请尝试运营商`IN`。这将允许您搜索多封电子邮件。

按照`IN`这里写的条款：http: [//core.trac.wordpress.org/ticket/14997](http://core.trac.wordpress.org/ticket/14997)

# c++ - C2059 语法错误“字符串”？

> ID：16169522
> 
> 赞同：9
> 
> 时间：2013-04-23T12:36:07.027
> 
> 标签：c++, c

```
extern "C" 
{
#endif
#include <stdint.h>
#include <limits.h>
#include "attributes.h"
}
#endif 
```

我添加了`extern "C" { }` 然后我得到了`C2059 string`错误所以我尝试使用`#endif`，现在我还有另外 4 个错误。

```
Error   1   error C2059: syntax error : 'string'    d:\c-sharp\c++ 
compiling\consoleapplication7\consoleapplication7\libavutil\rational.h 31 1
ConsoleApplication7 
```

我该如何解决这个字符串错误？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-23T12:42:01.193

猜测一下，您是否包含来自 C 源文件的代码？

`extern "C" {`只有 C++ 需要（或理解）守卫。您可以从 C 文件中省略它们，应将它们包含在 C++ 文件中，并应 `__cplusplus`在头文件中使用 ifdef 保护它们。

```
#ifdef __cplusplus
extern "C" {
#endif
#include <stdint.h>
#include <limits.h>
#include "attributes.h"
#ifdef __cplusplus
}
#endif 
```

# android - MediaPlayer：在状态 0 错误中开始调用

> ID：16169524
> 
> 赞同：0
> 
> 时间：2013-04-23T12:36:12.403
> 
> 标签：android, android-mediaplayer

这就是代码的样子，logcat 一直说“在状态 0 中开始调用”我尝试了不同的方式来启动视频。我错过了什么？我也尝试了 OnPreparedListener 但它一直给我同样的错误。

```
package com.example.videoplaybacktests;

import java.io.IOException;

import android.app.Activity;
import android.content.Context;
import android.graphics.PixelFormat;
import android.media.AudioManager;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnPreparedListener;
import android.net.Uri;
import android.os.Bundle;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.widget.Button;

public class MainActivity extends Activity implements SurfaceHolder.Callback{

MediaPlayer mediaPlayer;
SurfaceView surfaceView;
SurfaceHolder surfaceHolder;
boolean pausing = false;;

String stringPath = "/drawable/visource.mp4";
public String RTSP = "rtsp://v2.cache7.c.youtube.com/CjYLENy73wIaLQkFPOlBtC4qExMYDSANFEIJbXYtZ29vZ2xlSARSBXdhdGNoYJeOw_HjwJ6bUQw=/0/0/0/video.3gp"; 
public Uri vidURI = Uri.parse(RTSP);
 /** Called when the activity is first created. */
 @Override
 public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.activity_main);

     Button buttonPlayVideo = (Button)findViewById(R.id.playvideoplayer);
     Button buttonPauseVideo = (Button)findViewById(R.id.pausevideoplayer);

     getWindow().setFormat(PixelFormat.UNKNOWN);
     surfaceView = (SurfaceView)findViewById(R.id.surfaceview);
     surfaceHolder = surfaceView.getHolder();
     surfaceHolder.addCallback(this);
     surfaceHolder.setFixedSize(176, 144);
     surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
     mediaPlayer = new MediaPlayer();

     buttonPlayVideo.setOnClickListener(new Button.OnClickListener(){

@Override
public void onClick(View v) {
 // TODO Auto-generated method stub
 pausing = false;

 if(mediaPlayer.isPlaying()){
  mediaPlayer.reset();
 }

 mediaPlayer.setDisplay(surfaceHolder);

 try {
     mediaPlayer.setDataSource(RTSP);
     mediaPlayer.prepare();

 } catch (IllegalArgumentException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
 } catch (IllegalStateException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
 } catch (IOException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
 }
mediaPlayer.start();

}});

     buttonPauseVideo.setOnClickListener(new Button.OnClickListener(){

@Override
public void onClick(View v) {
 // TODO Auto-generated method stub
 if(pausing){
  pausing = false;
  mediaPlayer.start();
 }
 else{
  pausing = true;
  mediaPlayer.pause();
 }
}});

 }

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
int height) {
// TODO Auto-generated method stub

}

@Override
public void surfaceCreated(SurfaceHolder holder) {
// TODO Auto-generated method stub

}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
// TODO Auto-generated method stub

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:50:52.263

如果没有准备好 mediaPlayer，你就不能调用 start ！这就是您收到错误的原因
Use prepareAsync instead

```
 try {
         mediaPlayer.setDataSource(RTSP);
         mediaPlayer.prepareAsync();

     } catch (IllegalArgumentException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
     } catch (IllegalStateException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
     } catch (IOException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
     } 
```

并在 onPrepared() 上开始播放：

```
public void onPrepared(MediaPlayer mp) {
     mediaPlayer.start();  
} 
```

如果它仍然没有启动 onVideoSizeChanged

```
public void onVideoSizeChanged(MediaPlayer mp, int width, int height) {
  mediaPlayer.start();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:29:03.763

```
package com.example.videoplaybacktests;

import java.io.IOException;

import android.app.Activity;
import android.content.Context;
import android.graphics.PixelFormat;
import android.media.AudioManager;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnPreparedListener;
import android.net.Uri;
import android.os.Bundle;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.widget.Button;

public class MainActivity extends Activity implements SurfaceHolder.Callback{

MediaPlayer mediaPlayer;
SurfaceView surfaceView;
SurfaceHolder surfaceHolder;
boolean pausing = false;;

String stringPath = "/drawable/visource.mp4";
public String RTSP = "rtsp://v2.cache7.c.youtube.com/CjYLENy73wIaLQkFPOlBtC4qExMYDSANFEIJbXYtZ29vZ2xlSARSBXdhdGNoYJeOw_HjwJ6bUQw=/0/0/0/video.3gp"; 
public Uri vidURI = Uri.parse(RTSP);
 /** Called when the activity is first created. */
 @Override
 public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.activity_main);

     Button buttonPlayVideo = (Button)findViewById(R.id.playvideoplayer);
     Button buttonPauseVideo = (Button)findViewById(R.id.pausevideoplayer);

     getWindow().setFormat(PixelFormat.UNKNOWN);
     surfaceView = (SurfaceView)findViewById(R.id.surfaceview);
     surfaceHolder = surfaceView.getHolder();
     surfaceHolder.addCallback(this);
     surfaceHolder.setFixedSize(176, 144);
     surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
     mediaPlayer = new MediaPlayer();

     buttonPlayVideo.setOnClickListener(new Button.OnClickListener(){

@Override
public void onClick(View v) {
 // TODO Auto-generated method stub

 if(mediaPlayer.isPlaying()){
  mediaPlayer.stop();
 }

 mediaPlayer.setDisplay(surfaceHolder);

 try {
     mediaPlayer.setDataSource(RTSP);
     mediaPlayer.prepare();

 } catch (IllegalArgumentException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
 } catch (IllegalStateException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
 } catch (IOException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
 }

}});

     buttonPauseVideo.setOnClickListener(new Button.OnClickListener(){

@Override
public void onClick(View v) {
 // TODO Auto-generated method stub
 if(mediaPlayer==null)
return;
else if(mediaPlayer.isPlaying()){
mediaPlayer.stop();
}else{
mediaPlayer.start();
}
}});

 }

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
int height) {
// TODO Auto-generated method stub

}

@Override
public void surfaceCreated(SurfaceHolder holder) {
// TODO Auto-generated method stub
mediaPlayer.start();

}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
// TODO Auto-generated method stub

}
} 
```

# android - android多次调用runnable对象

> ID：16169527
> 
> 赞同：0
> 
> 时间：2013-04-23T12:36:26.257
> 
> 标签：android, media-player, runnable

我试图多次调用我的函数，其中包含可运行对象。谁能告诉我我做错了什么？

```
 handler = new Handler();

        sButton.setOnClickListener(new View.OnClickListener() 
        {

            @Override
            public void onClick(View v) 
            {
                rounds = new Integer(et.getText().toString());
            //  handler.removeCallbacksAndMessages(null);
                for (int j = 0; j <= rounds; j ++)
                {
                    f();
                }
            }
        });
    }

    public void f()
    {
        r = new Runnable() 
        {
            @Override
            public void run() 
            {
                 mp = MediaPlayer.create(Box.this, R.drawable.sound1);
                 mp.setLooping(false);
                 mp.setVolume(1.0f, 1.0f);
                 mp.start();
                 handler.postDelayed(this, 3000);
            }
        };
        handler.postDelayed(r, 4000);
        mp.stop(); 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:54:39.460

看看这个-

```
 Handler handler;
    sButton.setOnClickListener(new View.OnClickListener() 
            {

                @Override
                public void onClick(View v) 
                {
                    rounds = new Integer(et.getText().toString());
                    for (int j = 0; j <= rounds; j ++)
                    {
                        f();
                    }
                }
            });

    public void f()
    {
          r = new Runnable() 
            {
                @Override
                public void run() 
                {

                   handler = new Handler() {
                   public void handleMessage(Message msg) {
                   mp = MediaPlayer.create(Box.this, R.drawable.sound1);
                   mp.setLooping(false);
                   mp.setVolume(1.0f, 1.0f);
                   mp.start(); 
                   handler.sendEmptyMessageDelayed(1,3000);//3 sec
                   msg.what = 2;//removing first executed handler this is u missing.
                    };
                 };
                handler.sendEmptyMessageDelayed(1,4000);//4sec
                }
           }
    } 
```

# java - SWIG C++ -> Java - 类型映射自己的字符串类，就像 std::string

> ID：16169531
> 
> 赞同：1
> 
> 时间：2013-04-23T12:36:55.347
> 
> 标签：java, string, swig

我正在努力调整内置的 SWIG`std_string.i`以适用于我自己的字符串类。

我做了什么：

*   假设我自己的字符串类被称为 my::space::String
*   复制粘贴`std_string.i`到我自己的`.i`文件中并替换
    *   `namespace std {`经过`namespace my { namespace space {`
    *   小写`string`_`String`
    *   `#include <string>`经过`#include <myownheader.h>`

问题是我遇到了一个我不理解且没有帮助的语法错误：

```
wrapmystring.i:90: Error: Syntax error in input(1). 
```

`const String &`这是typemap 部分中的这一行：

```
%typemap(directorout,warning=SWIGWARN_TYPEMAP_THREAD_UNSAFE_MSG) const String &
%{ if(!$input) {
     SWIG_JavaThrowException(jenv, SWIG_JavaNullPointerException, "null string");
     return $null;
   }
   const char *$1_pstr = (const char *)jenv->GetStringUTFChars($input, 0);
   if (!$1_pstr) return $null;
   /* possible thread/reentrant code problem */
   static $*1_ltype $1_str;
   $1_str = $1_pstr; <=================== syntax error points here
   $result = &$1_str;
   jenv->ReleaseStringUTFChars($input, $1_pstr); %} 
```

知道为什么它适用于`std_string.i`我自己的班级而不是我自己的班级吗？

# c++ - 无法在 Xcode 中使用 C++ 文件 - 无法解析库

> ID：16169533
> 
> 赞同：1
> 
> 时间：2013-04-23T12:37:00.370
> 
> 标签：c++, xcode, xcode4, objective-c++

我试图弄清楚为什么 XCode 无法解析我导入的 C++ 文件。

*   我已将文件扩展名更改为 .mm
*   我已将 .h 文件内容添加到文件顶部
*   我安装了命令行工具

代码完成检测算法库：

![代码全集](https://i.stack.imgur.com/0s6m9.png)

但是当我尝试编译时，我得到了这个：

![不工作](https://i.stack.imgur.com/4MvNq.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T08:31:01.213

好的，我发现了问题。

事实证明，您不仅需要使用 .mm 扩展名来调用 Objective-c++ 编译器，还需要使用任何引用 .mm 的东西。所以我有一个引用 c++ 标头的视图控制器。

# php - 如何用php提取部分文本

> ID：16169536
> 
> 赞同：-1
> 
> 时间：2013-04-23T12:37:21.983
> 
> 标签：php, regex

我有以下文字，想得到 src= 之后的“canacad.ac.jp_dqrg6k9pg1s879somecodekj88c8%40group.calendar.google.com”。

是REGEX的方式吗？

```
$text ='<iframe src="http://www.google.com/calendar/embed?src=canacad.ac.jp_dqrg6k9pg1s879somecodekj88c8%40group.calendar.google.com&ctz=Asia/Tokyo" style="border: 0" width="800" height="600" frameborder="0" scrolling="no"></iframe>'; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:38:50.510

使用正则表达式。

```
preg_match("/\\?src=([^&\"]+)/i", $text, $results)
var_dump($results) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:27:17.133

正则表达式可能是*一种*方式：

```
$src = preg_replace('(.*?(?<==)([^&"]+).*)i', '\\1', $text); 
```

但是，我会给出以下提示：分*治*。把一个问题分解成更小的问题，然后逐步解决整体问题。这适用于许多问题。举个例子：

*   第一：从字符串中获取SRC属性值

有上千种方法可以做到这一点，包括。常用表达。由于正则表达式会假设字符串总是以这种方式格式化并且提取 URL 属性值实际上是微不足道的，所以我使用了一个支持正则表达式的不同函数[`sscanf`](http://php.net/sscanf)：

```
$url = sscanf($text, '<iframe src="%[^"]')[0];

# string(126) "http://www.google.com/calendar/embed?src=canaca.../Tokyo" 
```

所以现在 URL 已经被提取了。由于这是一个 URL，因此可以使用标准 URL 函数对其进行处理。让我们来看看：

*   二：从URL解析查询

要从 URL 中获取 SRC 值，您可以再次使用正则表达式。但是，由于 PHP 具有特定于 URL 处理的函数，所以我使用它们来代替。我可以准确地说出我需要什么[`parse_url`](http://php.net/parse_url)。而这一次我首先需要 URL 的*查询*部分。那是问号后面有查询变量的部分：

```
$query = parse_url($url, PHP_URL_QUERY);

# string(89) "src=canacad.ac.jp_dqrg6k9pg1s879somecodekj88.../Tokyo" 
```

这已经离我们正在寻找的价值又进了一步。所以还有一步要做：

*   第三：从查询中解析SRC值

在这里，PHP 再次内置了一个函数来执行此操作。[`parse_str`](http://php.net/parse_str)我们可以使用该函数从 URL 中提取查询中的所有变量。由于它通过函数参数返回结果，因此现在需要两行代码：

```
parse_str($query, $vars);
$src = $vars['src'];

# string(68) "canacad.ac.jp_dqrg6k9pg1s879somecodekj88c8@group.calendar.google.com" 
```

现在`$src`变量中是您要查找的值。

上面的整个代码一目了然：

```
$text = '<iframe src="http://www.google.com/calendar/embed?src=canacad.ac.jp_dqrg6k9pg1s879somecodekj88c8%40group.calendar.google.com&ctz=Asia/Tokyo" style="border: 0" width="800" height="600" frameborder="0" scrolling="no"></iframe>';

$url   = sscanf($text, '<iframe src="%[^"]')[0];
$query = parse_url($url, PHP_URL_QUERY);

parse_str($query, $vars);
$src  = $vars['src'];

var_dump($url, $query, $src); 
```

输出如下，显示了所有三个步骤：

```
string(126) "http://www.google.com/calendar/embed?src=canacad.ac.jp_dqrg6k9pg1s879somecodekj88c8%40group.calendar.google.com&ctz=Asia/Tokyo"
string(89) "src=canacad.ac.jp_dqrg6k9pg1s879somecodekj88c8%40group.calendar.google.com&ctz=Asia/Tokyo"
string(68) "canacad.ac.jp_dqrg6k9pg1s879somecodekj88c8@group.calendar.google.com" 
```

因此，无论您在每个步骤中使用哪些功能：如果您将问题分成更小的部分，您几乎总是能够解决更大的问题。而且，如果其中一个子步骤出现问题，您只需修复一个步骤 - 而不是整个操作。如果您使用单个正则表达式来完成所有这些工作，那么您将遇到单点故障（并且在 HTML 和 URL 的世界中制作一个好的正则表达式并非易事，因此它很可能会中断）。

例如，一个完美的解决方案是在第一步中使用 HTML 解析器。例如使用[*Tidy 扩展*](http://php.net/book.tidy)或流行的*DOMDocument 扩展*：

```
// Tidy (non error-checked):
$url = tidy_parse_string($text)->body()->child[0]->attribute['src'];

// DOMDocument (non error-checked):
$url = @DOMDocument::loadHTML($text)->getElementsByTagname('iframe')
             ->item(0)->getAttribute('src'); 
```

HTML 解析器的好处是它可以理解 HTML 元素。即使位置发生变化，您也可以查找特定元素和属性。

# asp.net - 避免 ctrl+F5 获取网页最新更改的方法

> ID：16169540
> 
> 赞同：0
> 
> 时间：2013-04-23T12:37:29.070
> 
> 标签：asp.net, visual-studio, knockout.js

我已经使用 Knockout 开发了 SPA。我使用 Visual Studio 2012 进行开发。我的应用程序连接到 WCF 服务并显示数据。我对我的应用程序进行更改并部署在测试服务器上。当我输入 url 并加载应用程序时，它会在网页上显示旧内容。我必须按 ctrl+ F5 才能获得最新的更改。为什么会这样，有什么方法可以避免呢？我们不能按 F5 并获取最新更改吗？请让我知道您还需要什么其他信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:39:49.763

禁用浏览器中的缓存以停止缓存旧页面。

# javascript - 3个大写字母的正则表达式，不多也不少

> ID：16169544
> 
> 赞同：1
> 
> 时间：2013-04-23T12:37:39.747
> 
> 标签：javascript, regex

我正在尝试使用Javascript找到一个正则表达式，当匹配3个大写字母时将返回true，但它必须恰好是3，而不是或多或少

```
正确的：

自闭症谱系障碍
WER
ERT

错误的：

量子力学
Q3W
量子力学
QWER

```

这是我的代码，但它也匹配 4 个字母的字符串

```
变量 r = /[AZ]{3}/;
r.test("WEE"); //应该返回“真”
r.test("WEER"); //应该返回“假”

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T12:38:56.803

你只需要锚定你的正则表达式：

```
var r = /^[A-Z]{3}$/; 
```

`^`匹配字符串的开头并`$`匹配字符串的结尾。这将强制整个字符串与正则表达式匹配以通过。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T12:40:03.547

您应该在正则表达式模式中指定字符串的开头`^`和结尾：`$`

```
var r = /^[A-Z]{3}$/; 
```

# c++ - 使用 QFuture 调用本地类函数

> ID：16169545
> 
> 赞同：0
> 
> 时间：2013-04-23T12:37:39.780
> 
> 标签：c++, multithreading, qt

我有一个 UI 程序，在该程序中，我曾经`QFuture`在另一个类中运行一个函数，该函数对处理器等很重，并导致我的 UI 崩溃，在使用 QFuture 将其线程化后它工作正常，但是我有另一个需要的函数之后立即被调用，但是这个与我调用它的位置在同一类中。

我已经使用相同的代码来执行第二个代码，但它只显示了`Timers`我什至没有使用的错误，我也不知道我`this`在参数中使用它是否正确：

```
future = new QFuture<void>;

*future = QtConcurrent::run(this, &GUI::test); 
```

test 是一个本地函数，这是否与我不能有两个并发 ::run 调用或其他东西有关，我尝试查看文档，但不幸的是没有帮助

基本上当这被称为 UI 锁定并且我收到一些奇怪的警告时，我认为线程化的重点是 UI 不会崩溃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T15:43:56.953

这是我对此的最佳猜测。

我猜你有以下情况。（注意：在尝试提出问题的解决方案时，了解您所处的情况非常有用。通常情况下，OP 正在以一种根本错误的方式处理某事，应该做一些完全不同的事情。）

你有一个图形用户界面。您有一个需要很长时间的操作，您想在工作线程中运行该操作。并且在长操作结束时，您需要在 GUI 线程上调用一个函数，可能是为了更新 GUI 或类似的东西。

因此，您使用 QtConcurrent::run(&someObject, &SomeObject::task) 启动后台任务。然后，您需要某种方式在任务完成时在 GUI 线程上得到通知。

正确的方法是将 QtFutureWatcher 附加到从 run() 返回的未来，并将 GUI 类上的插槽连接到其完成的信号。Qt 的信号机制将确保插槽在正确的线程上被调用。

# wordpress - 在 wordpress 主题上设置主页选项卡

> ID：16169548
> 
> 赞同：0
> 
> 时间：2013-04-23T12:37:48.663
> 
> 标签：wordpress

我有一个不使用自定义主页的 wordpress 主题，因此在安装主题时，页面中没有“主页”页面。但是现在主页没有导航菜单，只有徽标可以带到主页，当在网站上的任何位置单击它时。

但是当我创建一个名为“主页”的页面以将其添加到我的菜单时，它会链接到以下链接

```
http://myurl/home/ ‎ 
```

我无法将永久链接更改为：

```
http://myurl/ 
```

那么如何添加一个实际链接到主页的主页菜单

PS - 我不想使用 jquery ......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:29:33.703

只需使用自定义菜单并包含一个名为“home”的“自定义链接”项和指向站点 URL 的链接。

# python - 使用 Python 编写控制台输出（空格分隔的文本）以分隔 Excel 工作表的列

> ID：16169551
> 
> 赞同：2
> 
> 时间：2013-04-23T12:37:58.440
> 
> 标签：python, xlwt

我有一个控制台输出，它有多行空格分隔的字符串。例如

> 大家好
> 
> 大家好
> 
> 欢迎来到蟒蛇

我想将它们写入单独的 excel 文件行中，并将每个字符串写入单独的列中，用于 ex-

```
 A1      A2         A3
B1   Hi      everyone
B2   Hello   to         all
B3   Welcome to         python 
```

我们在 python 的 xlwt 包中有任何（文本到列）实用程序吗？

**更新** 我有一个 exe，它有这些打印语句，一次输出。我只是执行那个 exe 并在控制台上打印。我想从控制台读取并写入 excel 表，就像我上面解释的那样。这里是代码：

```
#!/usr/bin/env python
import subprocess
import xlwt
process=subprocess.Popen('Test_Project.exe',stdout=subprocess.PIPE)
wb=xlwt.Workbook()
sheet=wb.add_sheet('python')
for rows in range(10):    #let say 10 rows and columns we have
    for cols in range(10):
        out = process.stdout.readline()
        sheet.write(rows,cols,out)
        print out
wb.save('stdoutput.xls') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T12:41:15.763

只需将其写为 .csv。

假设你有`row`哪个是空格分隔的字符串：

```
outfile.write(','.join(row.split()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T05:14:15.320

假设您希望在开始处理输出之前完成该过程

```
#!/usr/bin/env python
import subprocess
import xlwt
process=subprocess.Popen('Test_Project.exe',stdout=subprocess.PIPE)
out,err = process.communicate()
wb=xlwt.Workbook()
sheet=wb.add_sheet('python')
row = 0
for line in out.split('\n'): 
    for i,wrd in enumerate(line.split()):    
        sheet.write(row,i,wrd)
    row=row+1 
wb.save('stdoutput.xls') 
```

# sharepoint - 以 Infopath 形式显示所有 Sharepoint 列表项

> ID：16169552
> 
> 赞同：1
> 
> 时间：2013-04-23T12:38:00.787
> 
> 标签：sharepoint, infopath

我想知道如何提取共享点列表项数据并将其显示在 Infopath 表单中。我有一种感觉，我将不得不使用重复表，但似乎无法弄清楚/找到教程。我想显示列，例如。“书名”、“作者”、“注释”，让它自动提取数据并自动生成行。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:26:11.430

想通了，一旦您与共享点列表库建立数据连接，您只需将其设置为重复表属性。

1.  双击“重复表”
2.  更改绑定
3.  选择数据源，然后选择包含列数据的文件夹，然后下一步
4.  添加要显示的列并完成。
5.  预览以仔细检查

# c# - 无法访问 UserControl 中的子元素

> ID：16169554
> 
> 赞同：-1
> 
> 时间：2013-04-23T12:38:17.630
> 
> 标签：c#, xaml, microsoft-metro

我创建了一个带有 TextBlock 的 UserControl，问题是我无法从使用此 UserControl 的 MainPage 更改此 UserControl 的文本。

请帮助我是 Metro 风格应用程序的新手，基本上是 Windows 手机开发人员。检查下面的用户控件的来源。

```
<UserControl
x:Class="Version1forMainMenu.MyUserControl1"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:Version1forMainMenu"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
d:DesignHeight="300"
d:DesignWidth="400" x:Name="MyUserControl1">

<Grid x:Name="grid_amorti"  PointerEntered="gride_quickestimate_PointerEntered" PointerExited="gride_quickestimate_PointerExited" PointerPressed="gride_quickestimate_PointerPressed" PointerReleased="gride_quickestimate_PointerReleased" Tapped="gride_quickestimate_Tapped">
    <Grid.Background>
        <ImageBrush ImageSource="Image/inside_menu_normal.png"/>            
    </Grid.Background>

    <TextBlock Grid.Row="1" Grid.Column="2" Grid.ColumnSpan="3"  x:Name="edit"   Text="" FontSize="30" FontWeight="Bold" VerticalAlignment="Center" FontFamily="Global User Interface" Margin="10,112,29,111" ></TextBlock>
    <Image Grid.Row="1" x:Name="img" Grid.Column="5" Source="Image/small_arrow.png"  />

</Grid> 
```

我无法从使用此 UserControl 的页面访问名为“edit”的文本块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:44:21.900

看起来你缺少你`Grid.ColumnDefinition`的 s 和`Grid.RowDefinition`s

```
<Grid x:Name="grid_amorti" ...>  
    <Grid.Background>
         <ImageBrush ImageSource="Image/inside_menu_normal.png"/>            
    </Grid.Background>
    <Grid.ColumnDefintion>

    </Grid.ColumnDefinition>
    <Grid.RowDefiniton>

    </Grid.RowDefinition>
</Grid> 
```

所以你实际上放错了它们......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:44:34.387

这很正常，TextBlock 是 UserControl 内部的私有字段。您需要重新公开您希望能够修改的属性，例如使用此技术：[http ://www.geekchamp.com/tips/how-to-expose-properties-of-a-user-control-在 Windows 电话](http://www.geekchamp.com/tips/how-to-expose-properties-of-a-user-control-in-windows-phone)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T12:43:07.880

这是完全正常的，因为您在用户控件中的控件不可公开访问。您应该在用户控件中定义一个公共属性以使这些控件可用...

# android - 在 MacOS X 和“未安装应用程序”下使用 ant 构建 android apk

> ID：16169557
> 
> 赞同：1
> 
> 时间：2013-04-23T12:38:24.927
> 
> 标签：android, macos, bash, ant

我有一个 bash 脚本，它基本上调用 ant 来编译 Android 应用程序源代码树，然后使用 adb 在连接的 android 设备上安装和启动应用程序。

bash 脚本有很多选项，但它基本上是编辑 AndroidManifest.xml 和 strings.xml 以更改包和应用程序名称，然后发出“android update project”。最后是“蚂蚁释放”。这是相关的片段：

```
if [ "$NEWPACKAGENAME" != "" ] ; then
  echo >> AndroidManifest.xml # the loop below looses the last line, 
                              # so we ensure that's a useless line
  cat AndroidManifest.xml | 
    ( while read ROW ; do
        IS_PACKAGE_ROW=`echo $ROW | grep 'package=' | wc -l` ;
        if [ $IS_PACKAGE_ROW -gt 0 ] ; then
          echo "  package=\"$NEWPACKAGENAME\"" >> AndroidManifest-np.xml
        else
          echo "$ROW" >> AndroidManifest-np.xml
        fi ;
      done
    )
  mv AndroidManifest-np.xml AndroidManifest.xml
fi

if [ "$APPNAME" != "" ] ; then
  echo >> res/values/strings.xml # the loop below looses the last line, 
                                 # so we ensure that's a useless line
  cat res/values/strings.xml |
    ( while read ROW ; do
        IS_NAME_ROW=`echo $ROW | grep '<string name="app_name">' | wc -l` ;
        if [ $IS_NAME_ROW -gt 0 ] ; then
          echo "<string name=\"app_name\">$APPNAME</string>" >> res/values/strings-nn.xml
        else
          echo "$ROW" >> res/values/strings-nn.xml
        fi ;
      done
    )
  mv res/values/strings-nn.xml res/values/strings.xml
fi

rm -f bin/*.ap_* bin/*.apk*

$ANDROID update project -p .

$ANT release 
```

该脚本在 GNU/Linux 下运行良好，它创建 apk 文件，它通过 adb 安装文件，并且可以通过将相同的 apk 文件复制或下载到设备来手动安装相同的 apk 文件（开发人员选项中的未知来源显然已经积极的）。

但是在 MacOS X 下它有一个问题：生成的 apk 文件只有在通过“adb install”（由脚本本身或手动运行）安装时才有效。如果我尝试手动将 apk 文件复制或下载到 Android 设备，我的意思是脚本在 MacOSX 下运行时生成的 apk 文件，设备会要求通常的确认，但随后会显示“未安装应用程序”。

我已经阅读了一些关于“未安装应用程序”问题的问题，回复似乎指向 AndroidManifest.xml 方向（重复活动等），但我不明白这可能是我的问题，因为该脚本与在 Linux 下工作的脚本相同，并且在发出“adb install”命令本身时它也可以在 MacOS X 下工作（因此 apk 必须有效）。

其他已经尝试/验证的事情：

*   在尝试安装新版本之前从设备中删除应用程序
*   签名密钥始终相同，而不是调试密钥（但是，如果我使用不同的签名，设备会更早地抱怨）
*   从 http 或作为邮件附件下载 apk
*   在尝试安装时，随着祖先的动作在平板电脑周围跳舞……

第四次工作一次（令我惊讶）。但只有一次，以后再也不会了。我不知道那次我做了什么不同，祖先的舞蹈分开了。啊，是的，在安装之前我已经删除了完全不相关的应用程序......删除了其中的一些。不用说，删除不相关的应用程序在其他时候也无济于事。此外，我再也没有重新安装它们......

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T12:29:17.103

我发现了问题。我的脚本正在创建三个 APK 文件：myapp.apk、signed-myapp.apk 和 signed-aligned-myapp.apk，最后一个是要安装的正确文件。

由于多种原因，仅在 MacOS X 下运行时使用的文件是 myapp.apk（但不是通过 adb 复制时）。

这为我们提供了一个新的理由，即您可以在没有更多详细信息的情况下收到“未安装应用程序”消息：当 apk 根本没有签名时也会发生这种情况。

# c++ - 带有 OpenMP 的 Makefile：无法将 -o 与 -c、-S 或 -E 指定为多个文件

> ID：16169560
> 
> 赞同：0
> 
> 时间：2013-04-23T12:38:28.343
> 
> 标签：c++, c, openmp

我有一个问题，包括在我的 makefile 中使用 OpenMP 进行并行计算。我得到的错误是

**不能将 -o 与 -c、-S 或 -E 与多个文件一起指定**

这是我的生成文件：

```
GSLFLAGS := pkg-config --cflags gsl
LIBGSL := pkg-config --libs gsl

CFLAGS = -c -C -O3 -openmp=parallel

lateral.o:lateral.cxx

    g++ -c lateral.cxx 

main.o:main.cxx 

    g++ -c main.cxx  $< ${GSLFLAGS} ${CFLAGS}

alg:main.o lateral.o

    g++ -o  $@ $^ ${LIBGSL} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:46:07.723

线

```
g++ -c main.cxx $< ${GSLFLAGS} ${CFLAGS} 
```

应该读

```
g++ -c main.cxx ${GSLFLAGS} ${CFLAGS} 
```

因为，`$<`扩展到第一个先决条件`main.cxx`，，给予`g++ -c main.cxx main.cxx`。为避免这种情况，您甚至可以编写通用规则，例如：

```
%.o: %.cxx
    g++ -c -o $@ ${GSLFLAGS} ${CFLAGS} $^ 
```

而且您不需要特殊规则`main.o`and `lateral.o`，完整的生成文件将是：

```
GSLFLAGS := pkg-config --cflags gsl
LIBGSL := pkg-config --libs gsl

all: alg

%.o: %.cxx
    g++ -c -o $@ ${GSLFLAGS} ${CFLAGS} $^

alg: main.o lateral.o
    g++ -o  $@ $^ ${LIBGSL} 
```

[您可以在此处](http://www.cs.colby.edu/maxwell/courses/tutorials/maketutor/)找到上述语法的详细说明或在[此处](http://www.gnu.org/software/make/manual/make.html#Makefiles)找到更详细的文档。

**编辑**：

对不起，我错过了 C 标志，那里也有一个错误：

```
CFLAGS = -c -C -O3 -openmp=parallel 
```

您应该删除，`-c`因为您已经在规则中使用它，这`gcc`就是抱怨的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:11:02.773

IMO（但现在无法测试）这条线有问题：

```
CFLAGS = -c -C -O3 -openmp=parallel 
```

我认为`-openmp=parallel`应该只是`-fopenmp`。首先是因为这是 OpenMP 的正确编译标志，其次是因为后面的`-o`内容将被解释为输出文件的名称。正如您的错误消息所述，您不能一起使用`-c`and `-o`。

# php - Youtube API PHP 删除没有 Zend 类的视频

> ID：16169561
> 
> 赞同：0
> 
> 时间：2013-04-23T12:38:38.383
> 
> 标签：php, youtube-api

正如标题所示，我确实想通过 PHP 中的 Youtube API (V2) 删除视频，但我在 youtube API 页面上除了 Zend 之外找不到任何东西，但我不想使用 Zend。

我从哪里开始寻找或有人为我提供了一个简单的例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:02:15.633

据我所知，PHP 的 YouTube 框架，即使您使用独立版本，也使用 Zend 函数。

您不必使用整个 Zend 框架，因为 gdata 所需的部分已内置在独立框架中。

[http://framework.zend.com/download/gdata](http://framework.zend.com/download/gdata)

# liveconnect - Microsoft Live Connect，REST 访问问题

> ID：16169570
> 
> 赞同：2
> 
> 时间：2013-04-23T12:39:07.323
> 
> 标签：liveconnect

我正在尝试从 Java webapp 访问 Microsoft LiveConnect。而且我在获取令牌时遇到了问题。

问题如下：我遵循了[http://msdn.microsoft.com/en-us/library/live/hh243647.aspx#authcodegrant](http://msdn.microsoft.com/en-us/library/live/hh243647.aspx#authcodegrant)中所示的**授权代码授予流程**

LiveConnect 使用以下格式的 URL 将用户代理（浏览器）重定向到我的服务器

```
http://contoso.com/Callback.htm?code=AUTHORIZATION_CODE 
```

然后我的网络应用程序使用以下格式向 LiveConnect 发出 REST（POST 请求）

```
POST https://login.live.com/oauth20_token.srf

Content-type: application/x-www-form-urlencoded

client_id=CLIENT_ID&redirect_uri=REDIRECT_URI&client_secret=CLIENT_SECRET&code=AUTHORIZATION_CODE&grant_type=authorization_code 
```

LiveConnect 没有返回一些有意义的数据，而是返回一个包含一些不相关信息的 html 页面，像这样

```
<html>
...
<body class="modern" onLoad="BodyLoad()">
<div class="header" id="i0272"><span>Microsoft account</span></div>
<div class="content">
<div style="padding:15px 0 0 0;font-size:1px;">&nbsp;</div>
<h1 class="css0046">We're unable to complete your request</h1>

<p class="css0005">Microsoft account is experiencing technical problems. Please try again later.</p></div> 
```

我还在这里发布了涉及 REST api 的 Java 代码

```
 URL urlConnection = new URL(this.url);
    HttpURLConnection connection = (HttpURLConnection) urlConnection.openConnection();
    OutputStream outputStream = null;
    try {
        connection.setDoOutput(true);
        connection.setDoInput(true);
        connection.setRequestMethod("POST");
        connection.setReadTimeout(DEFAULT_READ_TIMEOUT_IN_MS);
        connection.setUseCaches(false);
        connection.setRequestProperty("charset", "utf-8");
        connection.setRequestProperty("Content-Length", "" + data.getBytes("UTF-8").length);

        for(String key : params.keySet()){
            connection.setRequestProperty(key, params.get(key));
        }

        executed.set(true);

        connection.connect();

        outputStream = connection.getOutputStream();

        //outputStream.write("\r\n".getBytes("UTF-8"));

        outputStream.write(data.getBytes("UTF-8"));
        outputStream.flush();

        httpInputStream = connection.getResponseCode() != HTTP_OK ?
                connection.getErrorStream() :
                connection.getInputStream();

        return new Response(connection.getResponseCode(),    Utils.fromInputStream(httpInputStream)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-06T15:35:22.283

包含您的 duff 内容的页面的 Url 可能更有意义。我的有这个：

```
https://login.live.com/err.srf?lc=2057#error=invalid_request&error_description=The%20provided%20value%20for%20the%20input%20parameter%20%27redirect_uri%27%20is%20not%20valid.%20The%20expected%20value%20is%20%27https://login.live.com/oauth20_desktop.srf%27%20or%20a%20URL%20which%20matches%20the%20redirect%20URI%20registered%20for%20this%20client%20application.&state=redirect_type%3dauth%26display%3dpage%26request_ts%3d1412608929255%26response_method%3dcookie%26secure_cookie%3dfalse 
```

确保您的应用程序和 OneDrive 开发中心重定向 URL 都具有完全相同的 url，即：

> `http://contoso.com/Callback.htm`

其中包括页面。

当我在 OneDrive 开发中心的 URL 不包含该页面时，我得到了相同的乏味错误页面，上面的 URL。将重定向 URL 设置为：

```
https://account.live.com/developers/applications 
```

登录并进入仪表板 > 我的应用程序 > YourAppName > API 设置

开发时，您还需要将域 (contoso.com) 重定向到本地 IIS IP 地址 (127.0.0.1)，如下所述：“ [http://msdn.microsoft.com/en-us/library/live/hh826547\. aspx](http://msdn.microsoft.com/en-us/library/live/hh826547.aspx) "

希望这可以帮助某人（我知道现在已经很晚了）

# ruby - 重新定位数组中的元素

> ID：16169572
> 
> 赞同：2
> 
> 时间：2013-04-23T12:39:09.190
> 
> 标签：ruby, arrays, ruby-1.8.7

说我有...

```
arr = ["a", "b", "c"] 
```

...我想在“b”和“c”之间移动“a”。我目前做

```
arr.delete("a")
arr.insert(2, "a") 
```

我可以在一次操作中做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T14:20:46.090

您可以使用并行分配：

```
arr[0], arr[1] = arr[1], arr[0]
=> ["b", "a"]
arr
=> ["b", "a", "c"] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T12:46:46.460

你不需要重复`"a"`。将它们合二为一：

```
arr.insert(2, arr.delete("a")) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T12:55:05.693

如果你想在“b”和“c”**之间移动“a”，那么你应该这样做：**

```
arr.insert(1, arr.delete_at(0)) 
```

※使用`.delete_at`代替，`.delete`因为您`'a'`的阵列中可能有多个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T13:04:53.613

采用[`Array#shuffle!`](http://www.ruby-doc.org/core-1.8.7/Array.html#method-i-shuffle-21)

```
arr = [ "a","b","c" ] 
arr.shuffle! until arr[1] == 'a' && arr[0]=='b'
p arr #=> ["b", "a", "c"] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T13:18:05.840

在 b 之后插入 a，无论它们在数组中的哪个位置：

```
arr.insert(arr.index("b"), arr.delete_at(arr.index("a")))
=> ["b", "a", "c"] 
```

你也可以这样做：

```
 arr[arr.index("a")], arr[arr.index("b")] = "b","a" 
```

# sql-server - 合并临时表中的记录

> ID：16169579
> 
> 赞同：-2
> 
> 时间：2013-04-23T12:39:26.587
> 
> 标签：sql-server, sql-server-2008

您好我正在使用 SQLServer2008。

下面是我的存储过程

```
DECLARE @tmp TABLE
(
  Id INT IDENTITY(1, 1) ,
  BrokerId INT ,
  RankId INT ,
  BrokerName VARCHAR(50) ,
  RankName VARCHAR(50) ,
  BrokerCode VARCHAR(50) ,
  IntroducerCode VARCHAR(50) ,
  CscName VARCHAR(50) ,
  SIP DECIMAL(18, 2) ,
  Fresh DECIMAL(18, 2) ,
  FY DECIMAL(18, 2) ,
  SY DECIMAL(18, 2) ,
  TY DECIMAL(18, 2)
)
DECLARE @brokerTable TABLE
(
  BrokerCode VARCHAR(50) ,
  BrokerId INT
)

INSERT  INTO @brokerTable
    ( BrokerCode, BrokerId )
    EXEC GetBrokerIdByCode @BrokerCode

DECLARE @Business TABLE ( BusinessId INT )

DECLARE @BrokerId1 INT
DECLARE @BrokerCode1 VARCHAR(50)
DECLARE c1 CURSOR READ_ONLY
FOR

SELECT  BrokerId ,BrokerCode
FROM    @brokerTable
OPEN c1

FETCH NEXT FROM c1
INTO  @BrokerId1,@BrokerCode1

WHILE @@FETCH_STATUS = 0 
BEGIN

    INSERT  INTO @Business
            ( BusinessId 
            )
            ( SELECT    mb.BusinessId
              FROM      dbo.MemberBusiness AS mb
              WHERE     mb.BrokerId = @BrokerId1
            )           

    DECLARE @BusinessID2 INT
    DECLARE c3 CURSOR READ_ONLY
    FOR

    SELECT  BusinessId
    FROM    @Business
    OPEN c3

    FETCH NEXT FROM c3
    INTO  @BusinessID2

    WHILE @@FETCH_STATUS = 0 
        BEGIN

            INSERT  INTO @tmp
                    ( BrokerId ,
                      RankId ,
                      BrokerName ,
                      RankName ,
                      BrokerCode ,
                      IntroducerCode ,
                      CscName ,
                      SIP ,
                      Fresh ,
                      FY ,
                      SY ,
                      TY   
                      --ProBusiness ,          
                      --CscId
                    )
                    ( SELECT    @BrokerId1 ,
                                ( SELECT    RankId
                                  FROM      dbo.BrokerMaster AS bm
                                  WHERE     bm.BrokerId = @BrokerId1
                                ) ,
                                ( SELECT    bm.Name
                                  FROM      dbo.BrokerMaster AS bm
                                  WHERE     bm.BrokerId = @BrokerId1
                                ) ,
                                ( SELECT    rm.RankName
                                  FROM      dbo.RankMaster AS rm
                                  WHERE     RankId = ( SELECT
                                                          RankId
                                                       FROM
                                                          dbo.BrokerMaster
                                                          AS bm
                                                       WHERE
                                                          bm.BrokerId = @BrokerId1
                                                     )
                                ) ,
                                @BrokerCode1 ,
                                ( SELECT    bm2.BrokerCode
                                  FROM      dbo.BrokerMaster AS bm2
                                  WHERE     bm2.BrokerId = ( SELECT
                                                          bm3.IntroducerId
                                                          FROM
                                                          dbo.BrokerMaster
                                                          AS bm3
                                                          WHERE
                                                          bm3.BrokerId = @BrokerId1
                                                          )
                                ) ,
                                'All CSC' ,
                                ISNULL(( SELECT SUM(mb.SelfAmount)
                                                + SUM(mb.UnitAmount)
                                         FROM   dbo.MemberBusiness AS mb
                                                INNER JOIN dbo.PlanMaster
                                                AS pm ON mb.PlanId = pm.PlanId
                                                INNER JOIN dbo.PlanTypeMaster
                                                AS ptm ON pm.PlanTypeId = ptm.PlanTypeId
                                                INNER JOIN dbo.Installment
                                                AS i2 ON mb.InstallmentId = i2.InstallmentId
                                         WHERE  ptm.IsSingleInstallment = 'true'
                                                AND mb.BrokerId = @BrokerId1
                                                AND i2.CscId = i.CscId
                                                AND ( i2.PaymentDate >= @StartDate
                                                      AND i2.PaymentDate <= @EndDate
                                                    )
                                       ), 0) ,
                                ISNULL(( SELECT SUM(mb.SelfAmount)
                                                + SUM(mb.UnitAmount)
                                         FROM   dbo.MemberBusiness AS mb
                                                INNER JOIN dbo.PlanMaster
                                                AS pm ON mb.PlanId = pm.PlanId
                                                INNER JOIN dbo.PlanTypeMaster
                                                AS ptm ON pm.PlanTypeId = ptm.PlanTypeId
                                                INNER JOIN dbo.Installment
                                                AS i2 ON mb.InstallmentId = i2.InstallmentId
                                         WHERE  ptm.IsSingleInstallment = 'false'
                                                AND mb.BrokerId = @BrokerId1
                                                AND i2.InstallmentNo = 1
                                                AND i2.CscId = i.CscId
                                                AND ( i2.PaymentDate >= @StartDate
                                                      AND i2.PaymentDate <= @EndDate
                                                    )
                                       ), 0) ,
                                ( CASE WHEN ( m.Mode = 'MLY'
                                              AND ( i.InstallmentNo >= 2
                                                    AND i.InstallmentNo <= 12
                                                  )
                                            )
                                       THEN ( SELECT    SUM(mb.SelfAmount)
                                                        + SUM(mb.UnitAmount)
                                              FROM      dbo.MemberBusiness
                                                        AS mb
                                                        INNER JOIN dbo.PlanMaster
                                                        AS pm ON mb.PlanId = pm.PlanId
                                                        INNER JOIN dbo.PlanTypeMaster
                                                        AS ptm ON pm.PlanTypeId = ptm.PlanTypeId
                                                        INNER JOIN dbo.Installment
                                                        AS i2 ON mb.InstallmentId = i2.InstallmentId
                                              WHERE     ptm.IsSingleInstallment = 'false'
                                                        AND mb.BrokerId = @BrokerId1
                                                        AND i2.InstallmentNo >= 2
                                                        AND i2.InstallmentNo <= 12
                                                        AND i2.CscId = i.CscId
                                                        AND ( i2.PaymentDate >= @StartDate
                                                          AND i2.PaymentDate <= @EndDate
                                                          )
                                            )
                                       WHEN ( m.Mode = 'QLY'
                                              AND ( i.InstallmentNo >= 2
                                                    AND i.InstallmentNo <= 4
                                                  )
                                            )
                                       THEN ( SELECT    SUM(mb.SelfAmount)
                                                        + SUM(mb.UnitAmount)
                                              FROM      dbo.MemberBusiness
                                                        AS mb
                                                        INNER JOIN dbo.PlanMaster
                                                        AS pm ON mb.PlanId = pm.PlanId
                                                        INNER JOIN dbo.PlanTypeMaster
                                                        AS ptm ON pm.PlanTypeId = ptm.PlanTypeId
                                                        INNER JOIN dbo.Installment
                                                        AS i2 ON mb.InstallmentId = i2.InstallmentId
                                              WHERE     ptm.IsSingleInstallment = 'false'
                                                        AND mb.BrokerId = @BrokerId1
                                                        AND i2.InstallmentNo >= 2
                                                        AND i2.InstallmentNo <= 4
                                                        AND i2.CscId = i.CscId
                                                        AND ( i2.PaymentDate >= @StartDate
                                                          AND i2.PaymentDate <= @EndDate
                                                          )
                                            )
                                       WHEN ( m.Mode = 'HLY'
                                              AND ( i.InstallmentNo = 2 )
                                            )
                                       THEN ( SELECT    SUM(mb.SelfAmount)
                                                        + SUM(mb.UnitAmount)
                                              FROM      dbo.MemberBusiness
                                                        AS mb
                                                        INNER JOIN dbo.PlanMaster
                                                        AS pm ON mb.PlanId = pm.PlanId
                                                        INNER JOIN dbo.PlanTypeMaster
                                                        AS ptm ON pm.PlanTypeId = ptm.PlanTypeId
                                                        INNER JOIN dbo.Installment
                                                        AS i2 ON mb.InstallmentId = i2.InstallmentId
                                              WHERE     ptm.IsSingleInstallment = 'false'
                                                        AND mb.BrokerId = @BrokerId1
                                                        AND i2.InstallmentNo = 2
                                                        AND i2.IsReceived = 'true'
                                                        AND i2.CscId = i.CscId
                                                        AND ( i2.PaymentDate >= @StartDate
                                                          AND i2.PaymentDate <= @EndDate
                                                          )
                                            )
                                  END ) ,
                                ( CASE WHEN ( m.Mode = 'MLY'
                                              AND ( i.InstallmentNo >= 13
                                                    AND i.InstallmentNo <= 24
                                                  )
                                            )
                                       THEN ( SELECT    SUM(mb.SelfAmount)
                                                        + SUM(mb.UnitAmount)
                                              FROM      dbo.MemberBusiness
                                                        AS mb
                                                        INNER JOIN dbo.PlanMaster
                                                        AS pm ON mb.PlanId = pm.PlanId
                                                        INNER JOIN dbo.PlanTypeMaster
                                                        AS ptm ON pm.PlanTypeId = ptm.PlanTypeId
                                                        INNER JOIN dbo.Installment
                                                        AS i2 ON mb.InstallmentId = i2.InstallmentId
                                              WHERE     ptm.IsSingleInstallment = 'false'
                                                        AND mb.BrokerId = @BrokerId1
                                                        AND i2.InstallmentNo >= 13
                                                        AND i2.InstallmentNo <= 24
                                                        AND i2.CscId = i.CscId
                                                        AND ( i2.PaymentDate >= @StartDate
                                                          AND i2.PaymentDate <= @EndDate
                                                          )
                                            )
                                       WHEN ( m.Mode = 'QLY'
                                              AND ( i.InstallmentNo >= 5
                                                    AND i.InstallmentNo <= 8
                                                  )
                                            )
                                       THEN ( SELECT    SUM(mb.SelfAmount)
                                                        + SUM(mb.UnitAmount)
                                              FROM      dbo.MemberBusiness
                                                        AS mb
                                                        INNER JOIN dbo.PlanMaster
                                                        AS pm ON mb.PlanId = pm.PlanId
                                                        INNER JOIN dbo.PlanTypeMaster
                                                        AS ptm ON pm.PlanTypeId = ptm.PlanTypeId
                                                        INNER JOIN dbo.Installment
                                                        AS i2 ON mb.InstallmentId = i2.InstallmentId
                                              WHERE     ptm.IsSingleInstallment = 'false'
                                                        AND mb.BrokerId = @BrokerId1
                                                        AND i2.InstallmentNo >= 5
                                                        AND i2.InstallmentNo <= 8
                                                        AND i2.CscId = i.CscId
                                                        AND ( i2.PaymentDate >= @StartDate
                                                          AND i2.PaymentDate <= @EndDate
                                                          )
                                            )
                                       WHEN ( m.Mode = 'HLY'
                                              AND ( i.InstallmentNo >= 3
                                                    AND i.InstallmentNo <= 4
                                                  )
                                            )
                                       THEN ( SELECT    SUM(mb.SelfAmount)
                                                        + SUM(mb.UnitAmount)
                                              FROM      dbo.MemberBusiness
                                                        AS mb
                                                        INNER JOIN dbo.PlanMaster
                                                        AS pm ON mb.PlanId = pm.PlanId
                                                        INNER JOIN dbo.PlanTypeMaster
                                                        AS ptm ON pm.PlanTypeId = ptm.PlanTypeId
                                                        INNER JOIN dbo.Installment
                                                        AS i2 ON mb.InstallmentId = i2.InstallmentId
                                              WHERE     ptm.IsSingleInstallment = 'false'
                                                        AND mb.BrokerId = @BrokerId1
                                                        AND i2.InstallmentNo >= 3
                                                        AND i2.InstallmentNo <= 4
                                                        AND i2.CscId = i.CscId
                                                        AND i2.IsReceived = 1
                                                        AND ( i2.PaymentDate >= @StartDate
                                                          AND i2.PaymentDate <= @EndDate
                                                          )
                                            )
                                       WHEN ( m.Mode = 'YLY'
                                              AND ( i.InstallmentNo = 2 )
                                            )
                                       THEN ( SELECT    SUM(mb.SelfAmount)
                                                        + SUM(mb.UnitAmount)
                                              FROM      dbo.MemberBusiness
                                                        AS mb
                                                        INNER JOIN dbo.PlanMaster
                                                        AS pm ON mb.PlanId = pm.PlanId
                                                        INNER JOIN dbo.PlanTypeMaster
                                                        AS ptm ON pm.PlanTypeId = ptm.PlanTypeId
                                                        INNER JOIN dbo.Installment
                                                        AS i2 ON mb.InstallmentId = i2.InstallmentId
                                              WHERE     ptm.IsSingleInstallment = 'false'
                                                        AND mb.BrokerId = @BrokerId1
                                                        AND i2.InstallmentNo = 2
                                                        AND i2.CscId = i.CscId
                                                        AND ( i2.PaymentDate >= @StartDate
                                                          AND i2.PaymentDate <= @EndDate
                                                          )
                                            )
                                  END ) ,
                                ( CASE WHEN ( m.Mode = 'MLY'
                                              AND ( i.InstallmentNo >= 25 )
                                            )
                                       THEN ( SELECT    SUM(mb.SelfAmount)
                                                        + SUM(mb.UnitAmount)
                                              FROM      dbo.MemberBusiness
                                                        AS mb
                                                        INNER JOIN dbo.PlanMaster
                                                        AS pm ON mb.PlanId = pm.PlanId
                                                        INNER JOIN dbo.PlanTypeMaster
                                                        AS ptm ON pm.PlanTypeId = ptm.PlanTypeId
                                                        INNER JOIN dbo.Installment
                                                        AS i2 ON mb.InstallmentId = i2.InstallmentId
                                              WHERE     ptm.IsSingleInstallment = 'false'
                                                        AND mb.BrokerId = @BrokerId1
                                                        AND i2.InstallmentNo >= 25
                                                        AND i2.CscId = i.CscId
                                                        AND ( i2.PaymentDate >= @StartDate
                                                          AND i2.PaymentDate <= @EndDate
                                                          )
                                            )
                                       WHEN ( m.Mode = 'QLY'
                                              AND ( i.InstallmentNo >= 9 )
                                            )
                                       THEN ( SELECT    SUM(mb.SelfAmount)
                                                        + SUM(mb.UnitAmount)
                                              FROM      dbo.MemberBusiness
                                                        AS mb
                                                        INNER JOIN dbo.PlanMaster
                                                        AS pm ON mb.PlanId = pm.PlanId
                                                        INNER JOIN dbo.PlanTypeMaster
                                                        AS ptm ON pm.PlanTypeId = ptm.PlanTypeId
                                                        INNER JOIN dbo.Installment
                                                        AS i2 ON mb.InstallmentId = i2.InstallmentId
                                              WHERE     ptm.IsSingleInstallment = 'false'
                                                        AND mb.BrokerId = @BrokerId1
                                                        AND i2.InstallmentNo >= 9
                                                        AND i2.CscId = i.CscId
                                                        AND ( i2.PaymentDate >= @StartDate
                                                          AND i2.PaymentDate <= @EndDate
                                                          )
                                            )
                                       WHEN ( m.Mode = 'HLY'
                                              AND ( i.InstallmentNo >= 5 )
                                            )
                                       THEN ( SELECT    SUM(mb.SelfAmount)
                                                        + SUM(mb.UnitAmount)
                                              FROM      dbo.MemberBusiness
                                                        AS mb
                                                        INNER JOIN dbo.PlanMaster
                                                        AS pm ON mb.PlanId = pm.PlanId
                                                        INNER JOIN dbo.PlanTypeMaster
                                                        AS ptm ON pm.PlanTypeId = ptm.PlanTypeId
                                                        INNER JOIN dbo.Installment
                                                        AS i2 ON mb.InstallmentId = i2.InstallmentId
                                              WHERE     ptm.IsSingleInstallment = 'false'
                                                        AND mb.BrokerId = @BrokerId1
                                                        AND i2.InstallmentNo >= 5
                                                        AND i2.CscId = i.CscId
                                                        AND ( i2.PaymentDate >= @StartDate
                                                          AND i2.PaymentDate <= @EndDate
                                                          )
                                            )
                                       WHEN ( m.Mode = 'YLY'
                                              AND ( i.InstallmentNo >= 3 )
                                            )
                                       THEN ( SELECT    SUM(mb.SelfAmount)
                                                        + SUM(mb.UnitAmount)
                                              FROM      dbo.MemberBusiness
                                                        AS mb
                                                        INNER JOIN dbo.PlanMaster
                                                        AS pm ON mb.PlanId = pm.PlanId
                                                        INNER JOIN dbo.PlanTypeMaster
                                                        AS ptm ON pm.PlanTypeId = ptm.PlanTypeId
                                                        INNER JOIN dbo.Installment
                                                        AS i2 ON mb.InstallmentId = i2.InstallmentId
                                              WHERE     ptm.IsSingleInstallment = 'false'
                                                        AND mb.BrokerId = @BrokerId1
                                                        AND i2.InstallmentNo >= 3
                                                        AND i2.CscId = i.CscId
                                                        AND ( i2.PaymentDate >= @StartDate
                                                          AND i2.PaymentDate <= @EndDate
                                                          )
                                            )
                                  END )
                      FROM      dbo.MemberBusiness AS mb
                                INNER JOIN dbo.Member AS m ON mb.MemberId = m.MemberId
                                INNER JOIN dbo.Installment AS i ON mb.InstallmentId = i.InstallmentId
                                INNER JOIN dbo.PlanMaster AS pm ON mb.PlanId = pm.PlanId
                                INNER JOIN dbo.PlanTypeMaster AS ptm ON pm.PlanTypeId = ptm.PlanTypeId
                      WHERE     mb.BusinessId = @BusinessID2
                      GROUP BY  i.InstallmentNo ,
                                m.Mode ,
                                i.CscId
                    )

            FETCH NEXT FROM c3
            INTO  @BusinessID2

        END
    CLOSE c3
    DEALLOCATE c3

    DELETE  FROM @Business

    FETCH NEXT FROM c1
INTO  @BrokerId1,@BrokerCode1

END
CLOSE c1
DEALLOCATE c1

SELECT  t.BrokerId ,
    t.FY ,
    t.SY ,
    t.TY
FROM    @tmp AS t 
```

输出是：

```
--------------------------------------------
 BrokerId |    FY    |    SY    |    TY    |
--------------------------------------------
    27    |   500    |    NULL  |   NULL   |
--------------------------------------------
    27    |   500    |    200   |   NULL   |
--------------------------------------------
    27    |   500    |    NULL  |   100    |
-------------------------------------------- 
```

但我想输出 1 条记录，例如：

```
--------------------------------------------
 BrokerId |    FY    |    SY    |    TY    |
--------------------------------------------
    27    |   500    |    200   |   100    |
-------------------------------------------- 
```

我该怎么做，请帮助我..谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:50:28.493

也许您可以将此 CTE 集成到您的 SP 中：

```
WITH CTE AS ( 
  SELECT BrokerId,
         RN=ROW_NUMBER()OVER(PARTITION BY BrokerId ORDER BY BrokerID),
         FY=MIN(FY)OVER(PARTITION BY BrokerId),
         SY=MIN(SY)OVER(PARTITION BY BrokerId),
         TY=MIN(TY)OVER(PARTITION BY BrokerId)
         FROM   dbo.Broker )
SELECT BrokerId, FY, SY, TY  FROM  CTE  WHERE  RN = 1 
```

[**演示**](http://sqlfiddle.com/#!3/0b711/7/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:50:40.807

将最后一个 select 语句更改为：

```
SELECT  t.BrokerId ,
    t.FY ,
    t.SY ,
    SUM(t.TY) as TY
FROM    @tmp AS t
GROUP BY t.FY, t.SY 
```

# json - 轻松处理json的浏览器文件夹缓存

> ID：16169580
> 
> 赞同：0
> 
> 时间：2013-04-23T12:39:27.980
> 
> 标签：json, caching, odata, breeze, datajs

我正在使用带有 datajs 的微风来获取 odata json 结果。

微风.config.initializeAdapterInstances({ dataService: "OData" });

我想确保返回的 json 结果仅驻留在客户端内存中，并且不会写入浏览器的客户端文件夹缓存。

微风目前如何公开关于结果是否写入文件夹缓存中的文件的 json 结果处理？这是敏感数据，只应驻留在调用设备的内存中。什么是微风默认值，我将如何检查或更改它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:20:32.513

从浏览器缓存的角度来看，Breeze 不会对任何查询的结果做任何特别的事情。它只是执行一个 ajax 查询并处理结果。

关于浏览器缓存任何 ajax 结果的规则通常是通过让服务器告诉客户端不要缓存结果来处理的。这如何完成取决于服务的编写方式。

如果您为此 OData 端点使用 WCF DataService，您的代码可能如下所示：

*注意：我还没有测试过这段代码，所以对它持保留态度。应该有更多关于如何在 Microsoft OData 或 Microsoft WCF 数据服务站点上为 OData 服务设置缓存标头的信息。*

```
public class ODataService : DataService<Foo> {

   protected override void OnStartProcessingRequest(ProcessRequestArgs args) {
       HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.NoCache);
       // or possibly
       // HttpContext.Current.Response.AddHeader("Cache-control", "no-cache");
   }

   ... other code here ...
} 
```

# ruby-on-rails - 如何使用正则表达式将确切的字符串与多个 URL 匹配？

> ID：16169583
> 
> 赞同：1
> 
> 时间：2013-04-23T12:39:32.780
> 
> 标签：ruby-on-rails, ruby, regex

我正在使用缓存，并且我将 user_id 与缓存的页面一起存储，当用户注销时，我需要使用 user_id 清除特定用户的缓存页面的缓存。我使用以下正则表达式删除匹配的 user_id

```
cache_store.delete_matched("*id=#{current_user.id}*") 
```

当它与第一个数字匹配时，它会删除所有 URL，例如，如果我想删除 id=12，它会删除所有 URL。

```
"localhost:3000/foo?id=123"
"localhost:3000/foo?id=12"
"localhost:3000/foo?id=129" 
```

我想删除 id=12 的 URL。帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:41:20.967

在这种情况下，用户 ID 后面不能跟任何数字。

```
cache_store.delete_matched("id=#{current_user.id}([\D]|$)") 
```

这匹配以`URL`userid 结尾，或包含 userid 后跟除数字以外的任何内容。

**编辑**

在 Regexpal 上找不到`Share`-button，所以我发布了我的结果。请注意，我已经复制了我的`regex`字符串并替换`#{current_user.id}`为`94`. 蓝色和黄色都是匹配的。似乎只有您示例中的正确行是匹配的，不是吗？

![在此处输入图像描述](https://i.stack.imgur.com/9ZrPn.png)

**编辑 2**

由于OP仍然无法成功删除多个`URL`s，再次更新。我怀疑周围的代码有问题。此示例正在工作：

```
id = 94
array = [ "id=94", "id=94a", "id=945" ]
clean = Array.new
regex = Regexp.new('id=' + id.to_s + '([\D]|$)')

for url in array
    if url =~ regex
        clean << url
    end
end

puts clean 
```

如果这仍然不能解决您的问题，请考虑发布负责删除`URL`s. 还请提供这些容器`URL`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:39:16.507

尝试`cache_store.delete_matched("id=#{current_user.id}")`

# c# - AvalonEdit 在代码中更改语法突出显示

> ID：16169584
> 
> 赞同：11
> 
> 时间：2013-04-23T12:39:33.497
> 
> 标签：c#, wpf, syntax-highlighting, text-editor, avalonedit

我想在我的代码中更改 AvalonEdit 的语法突出显示。

XAML：

```
 <avalonEdit:TextEditor Name="textEditor" SyntaxHighlighting="{Binding syntaxHighlighting}" /> 
```

C＃：

```
public string syntaxHighlighting { get; set; }

public MainWindow()
{
     InitializeComponent();
     syntaxHighlighting = "C#";
     DataContext = this;
} 
```

但是语法高亮没有改变。我究竟做错了什么？我的问题有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-06-13T15:20:20.533

```
ICSharpCode.AvalonEdit.Highlighting.HighlightingManager.Instance.GetDefinition("C#"); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-06T05:17:46.643

干得好：

```
ICSharpCode.AvalonEdit.TextEditor textEditor = new ICSharpCode.AvalonEdit.TextEditor();
textEditor.ShowLineNumbers = true;
string dir = @"C:\Program Files\MyFolder\";
#if DEBUG
dir = @"C:\Dev\Sandbox\SharpDevelop-master\src\Libraries\AvalonEdit\ICSharpCode.AvalonEdit\Highlighting\Resources\";
#endif

Stream xshd_stream = File.OpenRead(dir + "CSharp-Mode.xshd");
XmlTextReader xshd_reader = new XmlTextReader(xshd_stream);
textEditor.SyntaxHighlighting = ICSharpCode.AvalonEdit.Highlighting.Xshd.HighlightingLoader.Load(xshd_reader, ICSharpCode.AvalonEdit.Highlighting.HighlightingManager.Instance);
xshd_reader.Close();
xshd_stream.Close(); 
```

**编辑：**

由于 ICSharp.TextEditor 在 WinForms 中抛出 AccessViolations，我在 WinForms 中使用 AvalonEdit：

```
ElementHost host = new ElementHost();
host.Size = new Size(200, 100);
host.Location = new Point(100, 100);
host.Child = textEditor;
this.Controls.Add(host); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-24T16:01:38.797

如果要绑定到字符串，可以定义一个 IValueConverter 来包装内置的 HighlightingDefinitionTypeConverter：

```
using System;
using System.Globalization;
using System.Windows.Data;
using ICSharpCode.AvalonEdit.Highlighting;

public class HighlightingDefinitionConverter : IValueConverter
{
    private static readonly HighlightingDefinitionTypeConverter Converter = new HighlightingDefinitionTypeConverter();

    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return Converter.ConvertFrom(value);
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return Converter.ConvertToString(value);
    }
} 
```

然后，只需将转换器添加到您的绑定中：

```
<avalonEdit:TextEditor Name="textEditor" SyntaxHighlighting="{Binding syntaxHighlighting, Converter={StaticResource HighlightingDefinitionConverter}}" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-26T10:28:05.393

只需使用 TypeConverter

```
var typeConverter = new HighlightingDefinitionTypeConverter();
var xmlSyntaxHighlighter = (IHighlightingDefinition)typeConverter.ConvertFrom("XML");
var csSyntaxHighlighter = (IHighlightingDefinition)typeConverter.ConvertFrom("C#");
CSharpEditor.SyntaxHighlighting = csSyntaxHighlighter;
XmlEditor.SyntaxHighlighting = xmlSyntaxHighlighter; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T12:48:06.137

syntaxHighlighting 不是字符串！您的代码可能无法编译！请注意，此处 XAML 中的 SyntaxHighlighting 使用[标记扩展](http://msdn.microsoft.com/en-us/library/ms753322.aspx)，它实例化 SyntaxHighlighting 的实例，而不是字符串。

```
private void OnTabLoaded(object sender, RoutedEventArgs e)
{
   textEditor.SyntaxHighlighting = HighlightingLoader.Load(..., HighlightingManager.Instance);
   textEditor.SyntaxHighlighting.MainRuleSet=...
} 
```

去[sharpdevelop](http://www.icsharpcode.net/opensource/sd/)下载源代码。

# javascript - 手动设置 html/css 时钟时间

> ID：16169586
> 
> 赞同：1
> 
> 时间：2013-04-23T12:39:48.323
> 
> 标签：javascript, jquery

我是 jquery 和 javascript 的新手。[我已经按照http://css-tricks.com/css3-clock/](http://css-tricks.com/css3-clock/)中的描述创建了 css 旋转时钟。正常情况下，此时钟使用 JScript Date().getSecond() 方法获取本地机器时间。有什么方法可以仅使用 javascript 或 jquery 使用小时/分钟下拉菜单手动设置时间。这是旋转时钟指针的代码。

```
<script type="text/javascript">

    $(document).ready(function() {

          setInterval( function() {
          var seconds = new Date().getSeconds();
          var sdegree = seconds * 6;
          var srotate = "rotate(" + sdegree + "deg)";

          $("#sec").css({"-moz-transform" : srotate, "-webkit-transform" : srotate});

          }, 1000 );

          setInterval( function() {
          var hours = new Date().getHours();
          var mins = new Date().getMinutes();
          var hdegree = hours * 30 + (mins / 2);
          var hrotate = "rotate(" + hdegree + "deg)";

          $("#hour").css({"-moz-transform" : hrotate, "-webkit-transform" : hrotate});

          }, 1000 );

          setInterval( function() {
          var mins = new Date().getMinutes();
          var mdegree = mins * 6;
          var mrotate = "rotate(" + mdegree + "deg)";

          $("#min").css({"-moz-transform" : mrotate, "-webkit-transform" : mrotate});

          }, 1000 );

    }); 

</script> 
```

我想使用下拉菜单更改 Hour/Min 变量。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:16:16.757

```
function setTime(hours, minutes, seconds) {
    $("#hour").css({"-moz-transform" : "rotate(" + (hours * 30 + (minutess / 2)) + "deg)", "-webkit-transform" : "rotate(" + (hours * 30 + (minutes / 2)) + "deg)"});
    $("#min").css({"-moz-transform" : "rotate(" + (minutes * 6) + "deg)", "-webkit-transform" : "rotate(" + (minutes * 6) + "deg)"});
    $("#sec").css({"-moz-transform" : "rotate(" + (seconds * 6) + "deg)", "-webkit-transform" : "rotate(" + (seconds * 6) + "deg)"});
} 
```

应该可以工作但没有测试过。自己实现这个下拉菜单。

# css - CSS中的菜单栏不出现

> ID：16169589
> 
> 赞同：0
> 
> 时间：2013-04-23T12:39:54.510
> 
> 标签：css, menubar

我使用了以下代码：

```
#menu {
  background: #333;
  height: 30px;
}
#menu ul {
  margin:0;padding:0;
}
#menu ul a {
  text-decoration: none;
}
#menu ul li {
  list-style: none;
  float: left;
  position: relative;
}
#menu ul li a {
  background: #333;
  color: #fff;
  border: 1px solid #333;
  display: block;
  padding: 4px;
  width: 154px;
}
#menu ul ul {
  padding:0;
  overflow: hidden;
}
#menu ul ul li {
  float: none;
  display: none;
  border-bottom: 1px solid #ccc;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;  
}
#menu ul ul li a {
  background: #f0f0f0;
  color: #333;
  border:none;
}
#menu ul ul li a:hover {
  background: #ccc;
}
#menu ul li a:hover, 
#menu ul li:hover ul li {
  display:block !important;
}

<div id="menu">
  <ul>
    <li><a href="#">Cars</a>
      <ul>
        <li><a href="#">Volvo</a></li>
        <li><a href="#">bmw</a></li>
        <li><a href="#">Subaru</a></li>
      </ul>
    </li>
    <li><a href="#">Boats</a>
      <ul>
        <li><a href="#">Sea Ray</a></li>
        <li><a href="#">Whaler</a></li>
        <li><a href="#">Fairline</a></li>
      </ul>
    </li>
    <li><a href="#">Bikes</a>
      <ul>
        <li><a href="#">Yamaha</a></li>
        <li><a href="#">Suzuki</a></li>
        <li><a href="#">Rider</a></li>
      </ul>    
    </li>
  </ul>
</div> 
```

它应该给出[这个输出](http://help4dev.com/html/horizontal-drop-down-menu.html)，但它只是给出了垂直链接而不是水平菜单栏。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:52:16.593

对我来说工作得很好。你确定你在外部样式表中使用这些代码吗？

# python - 金字塔：多个资源工厂——如何

> ID：16169590
> 
> 赞同：5
> 
> 时间：2013-04-23T12:39:55.167
> 
> 标签：python, pyramid

我有一个简单的根资源工厂：

```
class Root:
    __acl__ = [
        (Allow, Authenticated, 'edit')
    ] 
```

现在对于一些“特殊”路线，我需要创建另一个资源工厂

```
config.add_route('special', '/special/test', factory=SpecialFactory)

class SpecialFactory:
    __acl__ = [
        (Allow, Authenticated, 'special_edit')
    ] 
```

现在，我想让`Root`--`SpecialFactory`我应该怎么做？

这是正确的方法吗...

```
class SpecialFactory:
    def __init__(self, request):
        self.request = request
        self.__parent__ = Root(request)
        self.__name__ = 'special'

    __acl__ = [
        (Allow, Authenticated, 'special_edit')
    ] 
```

我也不完全理解它的目的`__name__`以及应该设置什么。

此外，Pyramid 什么时候会遍历`__parent__`链条，什么时候不会？对于这样的视图配置：

```
@view_config(route_name='special', permission='special_edit')
def something(req):
    pass 
```

Pyramid 会“收集”两个权限（`special_edit`和`edit`）还是只收集一个（`special_edit`）？

请详细解释计算权限的“流程”。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-23T16:08:20.037

`__name__`只有在通过遍历生成 url 时才会考虑，所以不用担心。

首先，工厂参数是工厂。意思是，它是“某个对象”，它接受一个`request`对象，并期望接收一个实际上是树根的对象。

```
class Root:
    def __init__(self, request):
        self.request = request

def resource_factory(request):
    return Root(request)

add_route(..., factory=resource_factory) 
```

请注意，在这里，工厂是显而易见的。一种常用的捷径是利用构造对象实例实际上返回自身这一事实。所以`Root(request)`从外面看完全一样，并返回与 . 相同的对象`resource_factory(request)`。

太好了，所以现在我们有了一个“根”对象，我们可以从中开始遍历。当然这不一定是树的实际根，它只是遍历应该开始的地方。

您还没有在 中添加`traverse`参数`add_route`，因此遍历不会去任何地方，它只会返回根对象作为上下文。找到上下文对象是遍历练习的全部目标。

所以，现在我们有了一个上下文。耶。

Pyramid 的授权通过将用户的“有效主体”与“上下文”和“权限”相结合来工作。这 3 件事是您的授权策略将用于确定允许或拒绝操作的内容。

“有效主体”来自身份验证策略，代表请求背后的用户。

“上下文”和“权限”是你想要的。在大多数情况下，它们是`request.context`视图的权限，但`pyramid.security.has_permission()`可以接受任何上下文对象和任何权限，并向您返回允许或拒绝结果。

所以，我们已经获得了授权所需的 3 件东西。现在，如何授权？好吧，这取决于授权策略。默认情况下，`ACLAuthorizationPolicy`. 那么它是怎样工作的？

从`ACLAuthorizationPolicy`开始`context`并向后通过该对象的“血统”。“血统”被定义为通过跟踪每个对象的`__parent__`最后创建的列表，没有更多`__parent__`可以遵循的。因此，在您的示例中，上下文将是 的实例`SpecialFactory`，而上下文的“沿袭”是 list `[ SpecialFactory(request), Root(request) ]`。

ACL 匹配的工作方式（在 中`ACLAuthorizationPolicy`）是它遍历沿袭中的每个对象，从上下文回到根，`__acl__`按顺序搜索每个对象。它找到的第一场比赛就是获胜者。ACL 中的条目由“(`Allow`或`Deny`, `principal`, `permission`)”定义，并且 match 是 ACL 中的条目，它包含我们正在寻找的相同权限，因为主体与我们的有效主体列表中的一个主体匹配当前用户。一旦找到匹配项，搜索就会停止并返回结果。

如果此算法对您不起作用，请更换授权策略。它是高度可插拔的，默认实现很容易理解（总共只有几行代码）。您甚至可以制定自己的策略，根本不关心上下文，此时您可以忽略所有这些遍历废话。由你决定。

# python - 在 Django 1.5 的 ForeignKey 中创建新对象或选择对象

> ID：16169592
> 
> 赞同：1
> 
> 时间：2013-04-23T12:39:59.047
> 
> 标签：python, django, forms, django-models, foreign-keys

我有两个模型，模型 A 和模型 B。

在模型 BI 中有两个引用模型 A 的 ForeignKey 字段。它可以工作，但它需要模型 A 有记录，然后我才能在模型 B 中选择值。创建我可以选择的表单的最佳方法是什么在模型 A 中创建一个新记录并选择它还是选择一个预先存在的记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:41:21.260

查看 django（模型）表单集（[https://docs.djangoproject.com/en/dev/topics/forms/formsets/](https://docs.djangoproject.com/en/dev/topics/forms/formsets/)）。

这些都是出于这个原因。使用内联或模型表单集，您可以轻松创建页面，您可以在其中编辑模型 A 和 B，甚至将它们保存在一起。

如果您查看表单集问题@stackoverflow 和 django 文档-我相信您会弄清楚的。

艾伦

# c# - 使用 xpathnavigator 通过连接一个常量来选择 xpathexpression 响应

> ID：16169593
> 
> 赞同：0
> 
> 时间：2013-04-23T12:40:02.523
> 
> 标签：c#, xpath, xpathnavigator

我有一个库函数，如下所示

```
private static string Parse(XPathNavigator xNav, XPathExpression xPathExpression)
    {
        string result = string.Empty;
        XPathNodeIterator xpathIterator = xNav.Select(xPathExpression.Clone());

        while (xpathIterator.MoveNext())
        {
            result = result + xpathIterator.Current.TypedValue + "#";
        }

        return result;
    } 
```

还有一个 XML 文件，如下所示

```
<Account account_no ="100">
<Name>Hello</Name>
</Account> 
```

现在我需要编写一个 xpath 来返回 account_no 并连接一些常量

我写了类似下面的代码

```
 XPathDocument doc = new XPathDocument(@"..\..\test.xml", XmlSpace.Default);
        XPathNavigator xNav = doc.CreateNavigator();
        string xpath = "concat('Account No', /Account/@account_no)";
        XPathExpression xPathExpression = XPathExpression.Compile(xpath);
        string result = Parse(xNav, xPathExpression); 
```

我所期待的结果是 account_no 在它前面加上一些文本常量。所以我将 xpath 写为 concat('Account No', /Account/@account_no)。但这不起作用，在 xNav.Select() 处失败。请帮助我如何编写正确的 xpath 以获得所需的结果。我无权更改解析函数，无论我能做什么，我都应该只使用 xpath 字符串。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:49:17.493

如果您将`Parse()`方法修改为如下所示，它应该可以工作：

```
private static string Parse(XPathNavigator xNav, XPathExpression xPathExpression)
{
    string result = string.Empty;
    object selected = xNav.Evaluate(xPathExpression.Clone());

    XPathNodeIterator iterator = selected as XPathNodeIterator;
    if (iterator != null)
    {
        result = string.Concat(iterator.OfType<XPathNavigator>()
                                       .Select(n => n.TypedValue + "#"));
    }
    else
    {
        result = selected.ToString();
    }

    return result;
} 
```

# php - 返回命令的特定行 unix php

> ID：16169596
> 
> 赞同：0
> 
> 时间：2013-04-23T12:40:04.327
> 
> 标签：php, unix, command-line

我想检索多于一行的文本文件和处理行。

例子 ：

```
$user = system('getent passwd') ."\n"; 
```

结果示例：

```
tcpdump:x:72:72::/:/sbin/nologin
guest:x:500:500:Guest User:/home/guest:/bin/bash
dovecot:x:97:97:Dovecot IMAP server:/usr/libexec/dovecot:/sbin/nologin
dovenull:x:495:488:Dovecots unauthorized user:/usr/libexec/dovecot:/sbin/nologin
sa-milt:x:494:487:SpamAssassin Milter:/var/lib/spamass-milter:/bin/bash
demo1:*:2417:100:albert DemoUn:/home/gir_net/demo1:/bin/bash
demo2:*:2418:100:alfred DemoDeux:/home/gir_net/demo2:/bin/bash
demo3:*:2419:100:alphonse DemoTrois:/home/gir_net/demo3:/bin/bash
demo4:*:2420:100:alcide DemoQuatre:/home/gir_net/demo4:/bin/bash 
```

我想检索命令结果中包含“/home/”的完整行。我尝试了很多解决方案，但它不起作用。

检索后，我想提取包含“/home/”的行的一些信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:44:47.517

这是使用正则表达式的可能解决方案：

```
$user = shell_exec('getent passwd');
preg_match_all('/\/home\/[^:]+/', $user, $matches);

foreach ($matches[0] as $dir) {
    print $dir;
}

/* will print:
/home/guest
/home/gir_net/demo1
/home/gir_net/demo2
/home/gir_net/demo3
/home/gir_net/demo4
*/ 
```

**更新：**

如果要显示整行，使用字符串函数而不是正则表达式会更容易。

```
$user = shell_exec('getent passwd');
$user = explode("\n", trim($user));
foreach ($user as $line) {
    if (strpos($line, '/home/') !== FALSE) {
        echo $line."\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:44:44.563

变成[一个数组](https://stackoverflow.com/questions/1483497/how-to-put-string-in-array-split-by-new-line)`$user`并[grep](http://php.net/manual/en/function.preg-grep.php)它。关于提取，如果您需要一些帮助，您应该提供详细信息。无论如何，在尝试了用explode 和grep 获得的东西**之后**回来。

# python - xpath：如何编写条件 xpath？

> ID：16169603
> 
> 赞同：0
> 
> 时间：2013-04-23T12:40:32.150
> 
> 标签：python, xpath, lxml

我正在尝试从以下两个页面中提取价格信息：

[http://jujumarts.com/mobiles-accessories-smartphones-wildfire-sdarkgrey-p-551.html](http://jujumarts.com/mobiles-accessories-smartphones-wildfire-sdarkgrey-p-551.html) [http://jujumarts.com/computers-accessories-transcend-500gb-portable-storejet-25d2-p-2616.html](http://jujumarts.com/computers-accessories-transcend-500gb-portable-storejet-25d2-p-2616.html)

```
xpath1 = //span[@class='productSpecialPrice']//text()
xpath2 = //div[@class='proDetPrice']//text() 
```

到目前为止，我已经编写了 python 代码，如果成功则返回 xpath1 的结果，否则执行第二个。我有一种感觉，可以单独在 xpath 中实现这个逻辑，有人可以告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T12:49:52.133

用于`|`表示`union`：

```
xpath3 = "//span[@class='productSpecialPrice']//text()|//div[@class='proDetPrice']//text()" 
```

这不完全是您所要求的，但我认为它可以合并到一个可行的解决方案中。

* * *

来自[XPath（1.0 版）规范](http://www.w3.org/TR/xpath/#node-sets)：

> 该| 运算符计算其操作数的并集，它必须是节点集。

* * *

例如，

```
import lxml.html as LH

urls = [
    'http://jujumarts.com/mobiles-accessories-smartphones-wildfire-sdarkgrey-p-551.html',
    'http://jujumarts.com/computers-accessories-transcend-500gb-portable-storejet-25d2-p-2616.html'
    ]

xpaths = [
    "//span[@class='productSpecialPrice']//text()",
    "//div[@class='proDetPrice']//text()",
    "//span[@class='productSpecialPrice']//text()|//div[@class='proDetPrice']//text()"
    ]
for url in urls:
    doc = LH.parse(url)
    for xpath in xpaths:
        print(doc.xpath(xpath))
    print 
```

产量

```
['Rs.11,800.00']
['Rs.13,299.00', 'Rs.11,800.00']
['Rs.13,299.00', 'Rs.11,800.00']

[]
['Rs.7,000.00']
['Rs.7,000.00'] 
```

* * *

获取所需信息的另一种方法是

```
"//*[@class='productSpecialPrice' or @class='proDetPrice']//text()" 
```

# extjs - 重新配置 Ext.tree.Panel

> ID：16169606
> 
> 赞同：2
> 
> 时间：2013-04-23T12:40:37.940
> 
> 标签：extjs, extjs4

我想重新配置现有的树。列已更新，但存储/数据没有。

```
handler: function() {        
    var newStore = Ext.create('Ext.data.TreeStore', {
        fields: [ 'C4', 'C5', 'C6' ],
        root: {
            text: '.',
            children: [
                { 'C4': 4, 'C5': 5, 'C6': 6 },
                { 'C4': 4, 'C5': 5, 'C6': 6 },
                { 'C4': 4, 'C5': 5, 'C6': 6 },
                { 'C4': 4, 'C5': 5, 'C6': 6 }
            ]
        }
    });

    var newCols = [
        { text: 'C4', dataIndex: 'C4' },
        { text: 'C5', dataIndex: 'C4' },
        { text: 'C6', dataIndex: 'C4' }
    ];

    tree.reconfigure(newStore, newCols);
} 
```

[http://jsfiddle.net/fR3z3/2/](http://jsfiddle.net/fR3z3/2/)

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:11:35.543

树不会更新它的根节点。打电话后`tree.reconfigure`我必须打电话

```
newStore.setRootNode(newStore.getRootNode()); 
```

现在它可以工作了。

下一个问题，如果我添加新的列，这些列的数据将不会绑定到树形网格。我必须定义一个新模型。

这是完整的工作示例

[http://jsfiddle.net/kleines0eichhoernchen/fR3z3/3/](http://jsfiddle.net/kleines0eichhoernchen/fR3z3/3/)

# biztalk - 是否可以计算 biztalk 发送端口上的记录数

> ID：16169607
> 
> 赞同：0
> 
> 时间：2013-04-23T12:40:42.080
> 
> 标签：biztalk, biztalk-2010

我有一个场景，我收到一个包含 3 个节点（页眉、正文和页脚）的 XML 文件，第二个节点（正文）本身可能有记录。我确实将正文中的这些记录映射到平面文件并将其输出到特定文件夹。但是在某些情况下可能会发生body节点包含0条记录。

只有在有记录的情况下才需要制作发送端口输出文件，并且不要输出大小为 0 kb 的文件。

有什么建议我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:55:49.213

我可以看到两种可能的方法：

1.  优雅的方法 - 创建一个自定义接收管道组件，它使用 XPath 来确定主体节点是否包含记录。如果是，则传递消息；如果不是，则返回一个空流，因此没有消息发布到消息框。
2.  不太优雅的方法 - 在编排中接收消息（页眉、正文和页脚）并使用与 (1) 中相同的 XPath 语句，确定正文节点是否包含记录。如果是，请使用发送形状发送消息；如果没有，让编排终止而不发送消息。

在任何一种情况下，我都会在发送端口上执行您的映射（也将使用平面文件汇编器进行配置）。如果您选择仅消息传递解决方案（上述 1），则需要过滤接收端口名称或消息类型（或其他一些提升的属性）。

我已将第一个选项标记为“优雅”，因为可以在接收管道解析消息时完成处理，并且不需要额外的处理（即启动编排）来实现所需的结果。

# android - Galaxy S I9000 发送获取响应表 AT 命令

> ID：16169608
> 
> 赞同：3
> 
> 时间：2013-04-23T12:40:43.503
> 
> 标签：android, at-command

我正在尝试在 Galaxy S (I9000) 上发送 AT 命令。问题是我不确定哪个设备是调制解调器。搜索文件/system/build.prop，我知道rild使用的设备是/dev/ttyS0（rild.libargs=-d /dev/ttyS0）。但是 /dev 目录中没有 ttyS0 文件，因此在尝试向其发送命令时出现错误。

执行命令 cat /proc/tty/drivers 我得到以下结果：

```
/dev/tty /dev/tty 5 0 system:/dev/tty

/dev/console /dev/console 5 1 system:console

/dev/ptmx /dev/ptmx 5 2 system

/dev/vc/0 /dev/vc/0 4 0 system:vtmaster

rfcomm /dev/rfcomm 216 0-255 serial

g_serial /dev/ttyGS 250 0 serial

ttySAC /dev/s3c2410_serial 204 64-67 serial

pty_slave /dev/pts 136 0-1048575 pty:slave

pty_master /dev/ptm 128 0-1048575 pty:master

unknown /dev/tty 4 1-63 console 
```

从这些我猜调制解调器是/dev/ttyGS0。所以我继续并通过 adb 或终端 IDE 应用程序执行：

停止 ril 守护进程

猫 /dev/ttyGS0 &

回声 -e 'AT+CGSN\r' > /dev/ttyGS0.

但我没有得到任何回应。我还安装了busybox并执行

回显 "AT+CGSN\r" | busybox microcom -t 500 /dev/ttyGS0

但我也没有得到任何回应。

[在这个http://forum.xda-developers.com/showthread.php?t=1471241](http://forum.xda-developers.com/showthread.php?t=1471241)中搜索，这是每个人都建议阅读的线程，并没有真正帮助。

有谁知道如何与调制解调器通信并获得响应？

PS：使用超级终端我可以发送 AT 命令，但我想从本地终端发送它们。

谢谢你。

# javascript - CSS 位置元素相对于特定元素

> ID：16169613
> 
> 赞同：-1
> 
> 时间：2013-04-23T12:40:51.423
> 
> 标签：javascript, jquery, css, position

我有一个包含在 DIV 类中的现有字段表：

```
 1  2  3  4
 5  6  7  8 
```

想象一个包含两行四列的表格，这些表格包含在与其位置相匹配的 div 类中。我需要像这样在当前表下方移动 3、4、7、8：

```
 1  2 
 5  6  
 3  4  7  8 
```

实现这一点的最佳方法是什么（CSS、Javascript 等）？

**编辑**：这里有一些代码供大家查看...

```
<table>

  <tbody>
          <tr class="row-1 row-first">
                  <td class="col-1 col-first 1-classed">

  <div>        <span class="field-content"><a href="/test1">Test 1</a></span>  </div>  
  <div>        <span class="field-content"><img src="image1.jpg" width="50" height="50"></span>  </div>          </td>
                  <td class="col-2 2-classed">

  <div>        <span class="field-content"><a href="/test2">Test 2</a></span>  </div>  
  <div>        <span class="field-content"><img src="image2.jpg" width="50" height="50"></span>  </div>          </td>
                  <td class="col-3 3-classed">

  <div>        <span class="field-content"><a href="/test3">Test 3</a></span>  </div>  
  <div>        <span class="field-content"><img src="image3.jpg" width="50" height="50"></span>  </div>          </td>
                  <td class="col-4 col-last 4-classed">

  <div>        <span class="field-content"><a href="/test4">Test 4</a></span>  </div>  
  <div>        <span class="field-content"><img src="image4.jpg" width="50" height="50"></span>  </div>          </td>
              </tr>
          <tr class="row-2">
                  <td class="col-1 col-first 5-classed">

  <div>        <span class="field-content"><a href="/test5">Test 5</a></span>  </div>  
  <div>        <span class="field-content"><img src="image5.jpg" width="50" height="50"></span>  </div>          </td>
                  <td class="col-2 6-classed">

  <div>        <span class="field-content"><a href="/test6">Test 6</a></span>  </div>  
  <div>        <span class="field-content"><img src="image6.jpg" width="50" height="50"></span>  </div>          </td>
                  <td class="col-3 7-classed">

  <div>        <span class="field-content"><a href="/test7">Test 7</a></span>  </div>  
  <div>        <span class="field-content"><img src="image7.jpg" width="50" height="50"></span>  </div>          </td>
                  <td class="col-4 col-last 8-classed">

  <div>        <span class="field-content"><a href="/test8">Test 8</a></span>  </div>  
  <div>        <span class="field-content"><img src="image8.jpg" width="50" height="50"></span>  </div>          </td>
              </tr>
          <tr class="row-3 row-last">
                  <td class="col-1 col-first 9-classed">

  <div>        <span class="field-content"><a href="/test9">Test 9</a></span>  </div>  
  <div>        <span class="field-content"><img src="image9.jpg" width="50" height="50"></span>  </div>          </td>
                  <td class="col-2 10-classed">

  <div>        <span class="field-content"><a href="/test10">Test 10</a></span>  </div>  
  <div>        <span class="field-content"><img src="image10.jpg" width="50" height="50"></span>  </div>          </td>
                  <td class="col-3 11-classed">

  <div>        <span class="field-content"><a href="/test11">Test 11</a></span>  </div>  
  <div>        <span class="field-content"><img src="image11.jpg" width="50" height="50"></span>  </div>          </td>
                  <td class="col-4 col-last 12-classed">

  <div>        <span class="field-content"><a href="/test12">Test 12</a></span>  </div>  
  <div>        <span class="field-content"><img src="image12.jpg" width="50" height="50"></span>  </div>          </td>
              </tr>
      </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T21:21:45.987

所以......我最终使用表格来完成这个。我被 DIV 编码困住了，在阅读了几个论坛后我得到了一个警钟。这是表格数据，应在表格中表示。

```
<table width="100%" style="border:1px solid red">
<tr><td>
    <h3>Title</h3>
</td>
</tr>

<tr>
 <td align=center>1</td>
 <td align=center>2</td>
 <td align=center>3</td>
 <td rowspan=2 align=center>4</td>
</tr>

<tr>
 <td align=center>5</td>
 <td align=center>6</td>
 <td align=center>7</td>
</tr>

<tr>
 <td align=center>8</td>
 <td align=center>9</td>
 <td align=center>10</td>
 <td align=center>11</td>
</tr>

</table> 
```

# spring-batch - Spring Batch：带有可滚动结果集的 ItemReader

> ID：16169615
> 
> 赞同：1
> 
> 时间：2013-04-23T12:40:58.473
> 
> 标签：spring-batch

我有批处理作业，我从数据库中读取了超过 100 万条记录，并且正在使用 Scrollable Resultset 访问这些记录。现在我正在将该工作转换为春季批次。可滚动的结果集在这种情况下不起作用。我已经尝试过，但是在读取第一个块结果集中的记录后关闭，并且当批处理尝试在下一步中访问它时，它会抛出异常：“无法对关闭结果集进行操作”。

我是春季批次的新手。任何人都可以帮助我如何在阅读器中实现可滚动结果集逻辑。由于内存中的 1M 记录并不是一个好主意。

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:37:26.690

一种可能的解决方案是查看`Continuable`Tasklet。Tasklet 可以像 Spring Batch 管理的那样“循环”，允许您使用`ResultSet.next()`单次访问检索记录并进行处理，而无需框架关闭流。

```
package de.incompleteco.spring.batch.step.tasklet;

import java.sql.ResultSet;
import java.sql.SQLException;

import javax.annotation.Resource;
import javax.sql.DataSource;

import org.springframework.batch.core.StepContribution;
import org.springframework.batch.core.scope.context.ChunkContext;
import org.springframework.batch.core.step.tasklet.Tasklet;
import org.springframework.batch.repeat.RepeatStatus;

public class ScrollableResultsetTasklet implements Tasklet {

    private boolean open = false;

    @Resource
    private DataSource dataSource;

    private String sql = "select * from test_table";

    private ResultSet rs;

    @Override
    public RepeatStatus execute(StepContribution contribution, ChunkContext chunkContext) throws Exception {
        if (!open) {
            //open the resultset
            rs = open();
            open = true;//set to open
        }//end if
        //move
        rs.next();
        if (!rs.isAfterLast()) {
            //show
            System.out.println(rs.getInt(1));
            return RepeatStatus.CONTINUABLE;
        }//end if
        //done
        return RepeatStatus.FINISHED;
    }

    protected ResultSet open() throws SQLException {
        return dataSource.getConnection().createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE,ResultSet.CONCUR_READ_ONLY).executeQuery(sql);
    }

} 
```

当然，这不是“可重新启动”，但也不是可滚动的结果集（无需一些额外的工作）。

在从块读取的情况下，您可以查看将结果集管理器“外部化”到一个单独的 pogo，它将在批处理块之间保持自己的“状态”。这可能看起来像这样；

```
package de.incompleteco.spring.batch.service;

import java.sql.ResultSet;
import java.sql.SQLException;

import javax.annotation.Resource;
import javax.sql.DataSource;

public class ScrollableResultSetService {

    private boolean open = false;

    @Resource
    private DataSource dataSource;

    private String sql = "select * from test_table";

    private ResultSet rs;

    /**
     * retrieve the result set in a 'next' state
     * @return
     * @throws SQLException
     */
    public ResultSet getNext() throws SQLException {
        if (rs == null || !open) {
            //open the resulset
            rs =  dataSource.getConnection().createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE,ResultSet.CONCUR_READ_ONLY).executeQuery(sql);
        }//end if
        //move
        rs.next();
        //test
        if (rs.isAfterLast()) {
            return null;
        }//end if
        return rs;
    }

} 
```

然后 itemreader 看起来有点像这样；

```
package de.incompleteco.spring.batch.step.item;

import java.sql.ResultSet;

import javax.annotation.Resource;

import org.springframework.batch.item.ItemReader;
import org.springframework.batch.item.NonTransientResourceException;
import org.springframework.batch.item.ParseException;
import org.springframework.batch.item.UnexpectedInputException;

import de.incompleteco.spring.batch.service.ScrollableResultSetService;

public class ScrollableResultSetItemReader implements ItemReader<T> {

    @Resource
    private ScrollableResultSetService service;

    @Override
    public T read() throws Exception, UnexpectedInputException, ParseException,NonTransientResourceException {
        ResultSet rs = service.getNext();
        if (rs == null) {
            return null;//don't continue
        }//end if
        //process the result set into your object
        //...
        //return object 
        return T;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T21:03:03.670

您可以使用开箱即用的 JdbcPagingItemReader 或 JdbcCursorItemReader。两种都试一下，看看哪一种最适合你。

您的实现将与两者相同..仅更改配置！！！;-)

它们都可以让您读取大量记录，而无需将它们全部放入内存中。

1M 记录与 Spring Batch 无关……如果您使用正确的阅读器；-)

编辑：根据您的评论：

您能否提供现有接口/Impl 的代码示例？

通常，当您想使用现有的服务/Dao 时，可以使用 ItemReaderAdapter。这将让您定义委托 read() 的对象和方法。但是开箱即用的实现非常基础，会在启动时调用您的自定义 service.find() (InitializingBean)。所以你最终会在内存中的 List 中得到 1M 个对象！

因为您的 find 方法可能会运行查询并将结果集映射到 List

我建议您将 SQL 从您的实现类移动到 JdbcCursorItemreader 并使用 stepListener 来验证 jobParameters 并在 JdbcCursorItemreader 中设置正确的 Sql。

问候

# apache-pig - 使用 HDInsight 将参数传递给 Pig 脚本

> ID：16169616
> 
> 赞同：0
> 
> 时间：2013-04-23T12:41:02.317
> 
> 标签：apache-pig, azure-hdinsight

我在 Windows 上使用 Hadoop 的 HDInsight 安装，并尝试将参数传递给猪脚本。我在不同的机器上使用了几个脚本，所以我认为这可能是 Windows 的事情。我已经输入了默认值来检查脚本中的参数是否有效

示例脚本：

```
%default myParam 'foo'
load('$myParam'); 
```

从命令行以空运行方式运行以进行测试： pig -r testSub.pig

结果是：

```
load('foo'); 
```

但试图从命令行提供值：

```
pig -p myParam=bar -r testSub.pig 
```

抛出错误：

```
2013-04-23 13:37:27,531 [main] ERROR org.apache.pig.Main - ERROR 2999: Unexpected internal error. Encountered unexpected arguments on command line - please check the command line.
Details at logfile: C:\Hadoop\hadoop-1.1.0-SNAPSHOT\logs\pig_1366720647495.log 
```

和日志文件说的一样：

```
Error before Pig is launched
----------------------------
ERROR 2999: Unexpected internal error. Encountered unexpected arguments on command line - please check the command line.

java.lang.RuntimeException: Encountered unexpected arguments on command line - please check the command line.
    at org.apache.pig.Main.run(Main.java:500)
    at org.apache.pig.Main.main(Main.java:111)
================================================================================ 
```

我试过使用“-param”，把东西放在单引号和双引号中，移动顺序，但没有运气。任何想法接下来要尝试什么 - 我需要在 Windows 命令提示符下添加一些奇怪的转义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T12:17:43.237

自 HDInsight 0.4 版（3 月 25 日）以来，我遇到了同样的问题。我还通过将参数值直接放入脚本中来验证脚本（工作正常）。因此，它可能是一个“windows”的东西。一种解决方法是将您的参数放在参数文件 (myparamfile.txt) 中并使用以下命令引用它：

```
 > pig -f testsub.pig -m myparamfile.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:58:26.090

您的 -p 参数很好。您需要指定`-x local -r -f <file>`，例如：

`> pig -p myParam=bar -x local -r -f testSub.pig`

该`-x local`标志指示 pig 在没有 mapreduce 集群的情况下在本地运行。

# antlr4 - 基准跳过注释“#;” 在使用 ANTLR4 为 R6RS 制作解析器时

> ID：16169619
> 
> 赞同：0
> 
> 时间：2013-04-23T12:41:07.700
> 
> 标签：antlr4, r6rs

我正在尝试为 R6RS 编写词法分析器/解析器，但我遇到了数据跳过评论

这是我的词法分析器/解析器规则的一部分：

```
BOOLEAN: '#t' | '#f' | '#T' | '#F';
NUMBER: DIGIT+; // TODO: incomplete
CHAR: '#\\' CHARNAME | '#\\x' HEXDIGIT+ | '#\\' . ;
STRING: '"' STRELEMENT* '"';
IDENTIFIER: INITIAL SUBSEQUENT* | PERCULIAR_ID;

COMMENT: (';' .*? LINE_ENDING | '#!r6rs' ) -> skip;
NESTED_COMMENT: '#|' (NESTED_COMMENT | ~[#|] | ('|' ~'#') | ('#' ~'|') )* '|#' -> skip;

datum: lexemeDatum
     | compoundDatum;
compoundDatum: list
             | vector
             | bytevector;

// (rest omitted...) 
```

现在，我想像这样写`skipDatum: '#;' datum -> skip`。不幸的是，解析器规则不允许`->skip`. 两者都`SKIPDATUM: '#;' datum -> skip`不起作用，因为词法分析器规则不能引用解析器规则。

在我看来，虽然“注释掉”是词法分析器的责任，而“构造数据”是解析器的责任，但`#;`两者都需要规则。

这是我目前的解决方案：

```
skipDatum: '#;' datum;

list: '(' (datum|skipDatum)* ')' #ProperListDatum
    | '[' (datum|skipDatum)* ']' #ProperListDatum
    | '(' skipDatum* datum (datum|skipDatum)* '.' skipDatum* datum skipDatum* ')' #ImproperListDatum
    | '[' skipDatum* datum (datum|skipDatum)* '.' skipDatum* datum skipDatum* ']' #ImproperListDatum 
```

虽然它正在工作，但它看起来很丑陋；在我真的想用 写规则的地方`datum`，我总是必须这样写`skipDatum* datum skipDatum*`

有没有更好的解决方案？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:16:00.837

你可以使用这样的东西。

```
datum
    :   SKIP_DATUM? ...
    ;

SKIP_DATUM : '#;'; 
```

这将要求您每次`DatumContext`在生成的代码中使用 a 时执行以下检查，同时简化语法。

```
if (ctx.SKIP_DATUM() != null) {
    // handle skipped datum here (return?)
} 
```

# java - Android 许可应用程序不起作用？

> ID：16169622
> 
> 赞同：8
> 
> 时间：2013-04-23T12:41:10.757
> 
> 标签：java, android, android-lvl

[我通过阅读官方说明](http://developer.android.com/google/play/licensing/index.html)实现了 Google 许可证检查器。

```
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.os.IBinder;
import android.provider.Settings.Secure;
import android.widget.Toast;

import com.google.android.vending.licensing.AESObfuscator;
import com.google.android.vending.licensing.LicenseChecker;
import com.google.android.vending.licensing.LicenseCheckerCallback;
import com.google.android.vending.licensing.ServerManagedPolicy;

public class Splash extends Activity {
    MyLicenseCheckerCallback mLicenseCheckerCallback;
    LicenseChecker mChecker;
    byte[] SALT = new byte[] { -73, 95, 70, -126, -103, -57, 14, -46, 51, 88, -5,
        -60, 77, -88, -63, -13, -1, 82, -4, 9 };
    //Handler mHandler;
    String BASE64_PUBLIC_KEY="My base key";
    Context mContext;
    IBinder serviceBinder;
    String deviceId;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);

        mLicenseCheckerCallback = new MyLicenseCheckerCallback();
        deviceId = Secure.getString(getContentResolver(), Secure.ANDROID_ID);
        // Construct the LicenseChecker with a policy.
        mChecker = new LicenseChecker(this,
            new ServerManagedPolicy(Splash.this, new AESObfuscator(SALT,
                getPackageName(), deviceId)), BASE64_PUBLIC_KEY);
        doCheck();
    }

    private class MyLicenseCheckerCallback implements LicenseCheckerCallback {
        @Override
        public void allow(int reason) {
            // TODO Auto-generated method stub
            if (isFinishing())
                return; // Don't update UI if Activity is finishing.
            // Toast.makeText(Splash.this, "Success", Toast.LENGTH_LONG).show();
            Intent intent=new Intent(Splash.this,Main.class);
            startActivity(intent);
            finish();

            // Should allow user access.
            // so do nothing
        }

        @Override
        public void dontAllow(int reason) {
            // TODO Auto-generated method stub
            if (isFinishing())
                return; // Don't update UI if Activity is finishing.
            // Toast.makeText(Splash.this, "Fail", Toast.LENGTH_LONG).show();
            createDialog();
        }

        @Override
        public void applicationError(int errorCode) {
            // TODO Auto-generated method stub
        }
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        mChecker.onDestroy();
    }

    private void doCheck() {
        // mCheckLicenseButton.setEnabled(false);
        setProgressBarIndeterminateVisibility(true);
        ///  mStatusText.setText(R.string.checking_license);
        mChecker.checkAccess(mLicenseCheckerCallback);
    }

    public void createDialog(){
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("PIRACY WARNING");
        builder.setMessage("A valid purchase for My App has not been detected.  Your IP"
            + " has been logged and all offenders will be reported to the authorities."
            + " If you received this message in error, please contact Support.");
        builder.setPositiveButton("Buy Now", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                Intent marketIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(
                    "http://market.android.com/details?id=" + getPackageName()));
                startActivity(marketIntent);
            }
        });
        builder.setNegativeButton("Quit", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                finish();
            }
        });
        AlertDialog dialog = builder.create();
        dialog.show();
    }
} 
```

这是我给予的明确许可

```
<supports-screens android:normalScreens="true" android:largeScreens="true" android:smallScreens="true" android:anyDensity="true" android:xlargeScreens="true" android:resizeable="true"/>
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="com.android.vending.CHECK_LICENSE" />
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.CHANGE_NETWORK_STATE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

实施此操作后，我运行应用程序并使用发布密钥对其进行签名，并将 apk 作为草稿上传到**Google Play 开发者控制台**中 ，并且我还在开发者控制台的设置中添加了 3 个测试帐户。

根据我的阅读和理解，必须在设备中运行测试帐户作为设备中的主帐户，而设备的其余部分则必须显示对话框。

但是在我的情况下，在所有设备上它都可以正常工作，并且如果互联网断开连接，它会显示有关盗版的对话框，并且如果它已连接，那么它会在所有设备中工作，尽管有测试帐户设备。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:47:50.490

最后我找到了测试谷歌许可证检查器的正确方法。

当我将 apk 作为草稿上传到 google play 开发者控制台时，如果我在任何设备中安装该 apk，如果设备中没有使用测试帐户登录，它将以响应**LICENSED运行。**

最后，我以这种方式进行测试，我添加了测试帐户，并在开发人员控制台中选择**许可证测试响应作为****LICENSED**，然后应用程序将运行，并且在我还使用**NOT_LICENSED**更改开发人员控制台中的设置之后，它显示有关具有测试帐户的设备中的盗版的对话框作为主账户。

**重要说明**：除了测试帐户设备之外，它运行响应**LICENSED**因为我将 APK 作为草稿上传到 Play 商店。因此，对于测试 google 许可，我们必须考虑仅在 Google Play Developer Console 中添加测试帐户

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:41:28.420

您已经完成了所有这些步骤，但再次清楚地检查它：

1.  将您的公钥与草稿存储公钥进行比较后检查。
2.  给自己的盐 20 个数字。
3.  在 google play 中提供正确的测试帐户，并在设备中使用相同的帐户。
4.  在 google play 中，您必须为应用程序草稿设置许可模式。
5.  一段时间后检查，因为需要一些时间才能给出有效的结果。
6.  最后验证应用程序中的警报对话框条件。
7.  清除手机中的谷歌播放缓存可能会存储结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T12:50:39.620

LVL 正在使用您添加的帐户的所有设备上工作，而不仅仅是主帐户。它不适用于具有您未添加到开发者控制台的帐户的手机。甚至，LVL 尝试使用 google LVL -Server 验证您的应用程序，因此您需要互联网连接，这没关系。如果您只想检查一次许可证，您必须保存一些数据，例如在共享首选项中，检查已经完成。因此，下次启动应用程序时，您可以检查这些保存的共享首选项，如果应用程序刚刚通过验证。如果是，不要再检查，如果不是，再试一次。

您可以在开发者控制台中设置检查许可证的行为，您可以模拟正常响应，或者例如“未验证”响应等等......

# magento - 带有色板的 Magento 可配置产品

> ID：16169626
> 
> 赞同：0
> 
> 时间：2013-04-23T12:41:19.907
> 
> 标签：magento, colors, product

另一个 Magento 问题在这里。

假设我有一个产品，称之为跳线，有 3 种不同颜色可供选择。我需要确保每种颜色在产品列表视图中都是可见的 - 所以这是 3 个单独的可配置产品。

当我查看这些可配置产品中的任何一个时，我希望有一个色板可用于切换图像，并在添加到购物篮时替换“选择您的颜色”下拉菜单。

有这个：[http](http://www.extensionsmall.com/magento-color-swatch.html) ://www.extensionsmall.com/magento-color-swatch.html - 这很好，但与我的版本不兼容 - 并且不会生成 3 个单独的可配置产品。

有没有其他人遇到过这个问题，如果有，你是如何解决的？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:48:41.773

我在将可配置产品显示为每种颜色的单独产品时遇到了同样的问题。而且我必须说很难开发自定义扩展。在分层导航、产品集合和其他方面有许多重写和肮脏的黑客攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T11:44:37.087

问题解决了。

最后，我利用 Cross Sell 属性来选择具有替代颜色的产品，在创建一个新的产品属性 - 十六进制 - 可以从 crosssell.phtml 文档中调用以显示样本缩略图之后。

这样，其他颜色也可以独立显示在产品列表中。

# plugins - ExtJS viewConfig 插件 treeviewdragdrop 抛出错误：未捕获的 TypeError：无法读取 null 的属性“init”

> ID：16169630
> 
> 赞同：3
> 
> 时间：2013-04-23T12:41:23.203
> 
> 标签：plugins, extjs, drag-and-drop, tree

这是我的扩展`Ext.tree.Panel`：

```
Ext.define('WP.view.portlet.Tree', {
    extend: 'Ext.tree.Panel',
    alias: 'widget.portlettree',

    store: 'Portlets',
    rootVisible: false,
    viewConfig: {
        plugins: {
            ptype: 'treeviewdragdrop'
        }
    }
}); 
```

加载页面时，文件中会引发错误`PluginManager.js`，第 58 行：

`Uncaught TypeError: Cannot read property 'init' of null`

Sencha 中的示例使用相同的配置，因此我不确定导致此错误的原因是什么。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-28T16:36:49.200

解决此问题的正确方法是在您的项目中要求该插件。

在这种情况下，Ext.tree.plugin.TreeViewDragDrop。

例如：

```
Ext.application({

requires: [
    'Ext.chart.Chart',
    'Ext.chart.series.Line',
    'Ext.chart.series.Column',
    'Ext.chart.axis.Numeric',
    'Ext.chart.axis.Category',
    'Ext.layout.container.Border',
    'Ext.tree.plugin.TreeViewDragDrop'
], 
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T12:30:06.827

该错误是由我仅引用核心 ext-debug.js 引起的。我更新了我的 HTML 文件以包含 ext-all-debug.js 并解决了错误。

# javascript - Coffeescript：在switch语句中出现意外

> ID：16169632
> 
> 赞同：19
> 
> 时间：2013-04-23T12:41:24.030
> 
> 标签：javascript, compiler-construction, coffeescript, switch-statement

我正在尝试使用一个简单的 switch 语句，但它无法编译。这是代码：

```
tag = 0 
switch tag
    when 0 then
        alert "0"
    when 1 then 
        alert "1" 
```

coffeescript 编译器在 switch 语句之后的行中抱怨“unexpected then”。我将代码更改为：

```
switch tag
    when 0 then alert "0"
    when 1 then alert "1" 
```

它工作正常。

但是我需要在 switch 语句的 then 部分中的多行上使用多个语句。那不可能吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-23T12:43:38.603

干脆放弃`then`吧。仅当您不想拥有新的缩进块时才需要它。

```
tag = 0 
switch tag
    when 0
        alert "0"
    when 1
        alert "1" 
```

（`if`也可以这样工作）

# c# - 对工厂方法设计模式的反思

> ID：16169633
> 
> 赞同：2
> 
> 时间：2013-04-23T12:41:28.663
> 
> 标签：c#, design-patterns

我发现的所有工厂方法模式的例子也是抽象工厂模式的例子。

看到这个：

```
static void Main(string[] args) {
    IFactory factory = new ConcreteFactory();
    IProduct product = factory.CreateProduct(); // <== factory method pattern??
    ProcessProduct(product);

    Console.ReadKey();
} 
```

**我可以说这行代码：**

```
IProduct product = factory.CreateProduct(); 
```

**完全体现了工厂方法模式的“精神”？**

在这里，工厂在不知道特定对象类型的代码的情况下创建 Product 对象。

如果是这样，那么难怪它们为什么会重叠，因为作者需要一种构建工作示例的方法。

我正在为我工​​作的公司制作定义词典。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T15:34:49.620

虽然您提供的示例在技术上是一种工厂方法，但它并不是很有用。设计模式只有在它们可以简化目标应用程序/功能的开发时才有用。

通常，工厂方法实现的好处来自：

1.  标准化对象的创建逻辑
2.  为对象构造提供语义上有意义的接口

目前尚不清楚不带参数的实例方法如何可能比默认构造函数增加好处。

查看[Wikipedia Factory Method 文章中的 C# 示例](http://en.wikipedia.org/wiki/Factory_method_pattern#C.23)。（复制+粘贴在下面）

```
public class Complex
{
    public double real;
    public double imaginary;

    public static Complex FromCartesianFactory(double real, double imaginary)
    {
        return new Complex(real, imaginary);
    }

    public static Complex FromPolarFactory(double modulus, double angle)
    {
        return new Complex(modulus * Math.Cos(angle), modulus * Math.Sin(angle));
    }

    private Complex(double real, double imaginary)
    {
        this.real = real;
        this.imaginary = imaginary;
    }
}

Complex product = Complex.FromPolarFactory(1, Math.PI); 
```

它很有用，因为它指定了两个工厂方法，每个方法都有明确定义的参数，以及对如何使用这些参数来构造定义明确的对象的有效实例的明确解释。此外，构造函数 is`private`和工厂方法 is `static`，这确保构造该对象的实例的唯一方法是使用工厂方法。虽然它并不特别适用于这个例子（因为所有可能的`double`参数值都是有效的），但将验证逻辑也放在工厂方法或构造函数中是有意义的。

一般来说，**工厂方法的目的是通过封装对象构造来降低代码复杂性，**目前尚不清楚您提供的示例将如何实现该目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T13:55:35.513

在我的理解中，工厂方法也可以是类实现的一部分，而不仅仅是工厂。当您想要隐藏构造函数并使用方法时，这通常是有意义的：

```
class Foo{
private Foo(){
   //do something   
}

public static Foo createFoo(){
    //do something
    return new Foo();
}
} 
```

# dart - 未能扫描文本文件的内容

> ID：16169635
> 
> 赞同：1
> 
> 时间：2013-04-23T12:41:30.253
> 
> 标签：dart

我正在尝试将一些 java 文件 io 代码移植到 dart 但无法读取任何输入。

我的 listen、onDone 或 onError 方法似乎都没有被调用！

```
 static void dumpFile(String filename) {
    print("Dumping: $filename Exists: ${new File(filename).existsSync()} Length: ${new File(filename).lengthSync()}");
    Stream stream = new File(filename).openRead();
    stream
      .listen(
        (List<int> codes) {
         print("CODES: $codes");
        },
        onDone: () {print("Done with file");},
        onError: (e) {print(e.toString());}
      );
    print("Dumping done!");
  } 
```

控制台输出：

```
Dumping: /Users/gunnar/git/chessbuddy/src/test/resources/pgn/testgame13.pgn
Exists: true Length: 565
Dumping done! 
```

€ dart --version Dart VM 版本：**0.4.7.1_r21537（2013 年 4 月 16 日星期二 01:34:53）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:37:43.777

使用*Dart Editor 版本 0.5.0-r21823*，您的代码可以正常工作，并显示以下输出：

```
Dumping: test/test.dart Exists: true Length: 519
Dumping done!
CODES: [...]
Done with file 
```

注意*倾倒完成！*显示在*CODES: [...]*之前，因为[File.openRead](http://api.dartlang.org/docs/releases/latest/dart_io/File.html#openRead)是异步操作。如果需要同步等效项，可以使用[File.readAsBytesSync 。](http://api.dartlang.org/docs/releases/latest/dart_io/File.html#readAsBytesSync)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:28:02.367

您缺少解码器，如果需要，还缺少变压器。查看 Dart 库之旅（[文件和目录](http://www.dartlang.org/docs/dart-up-and-running/contents/ch03.html#ch03-files-and-directories)）了解更多信息。我想这只是在您需要可读内容以供进一步使用时。

也许这会有所帮助：

```
static void dumpFile(String filename) {
    print("Dumping: $filename Exists: ${new File(filename).existsSync()} Length: ${new File(filename).lengthSync()}");
    Stream stream = new File(filename).openRead();
    stream
      .transform(new StringDecoder())
      .transform(new LineTransformer())
      .listen(
        (String codes) { //cast to String
         print("CODES: $codes");
        },
        onDone: () {print("Done with file");},
        onError: (e) {print(e.toString());}
      );
    print("Dumping done!");
  } 
```

# spring - 无法使用 Spring MVC 3.0 在 UI 中显示图像

> ID：16169637
> 
> 赞同：0
> 
> 时间：2013-04-23T12:41:41.890
> 
> 标签：spring, model-view-controller

嗨，我无法在 UI 中显示图像。在控制器中，我将图像作为字节 [] 存储为我的 MySQL 表中的 BLOB。但在 jsp iam 中无法显示相同的内容。

我的代码看起来像模型对象：

类电影 { 私人字节 [] newMovieImage; …… }

在我的控制器中，我将图像作为电影对象在 DAO 中获取为字节 []

```
Movie movieInformation = movieService.getMovieInformationForUserSelection(selectedMovie,locationName);
    movieForm.setMovie(movieInformation); 
```

在movieInformation 对象中，我拥有与电影相关的所有详细信息（包括图像）

在 Jsp 中：

```
<form:form modelAttribute="movieForm" id="movieForm" name="movieForm">  
   <div class="ticket_mov_review_rev">
   <a href="booking.html">  <img src="<c:url value="${movieForm.newImage}"></c:url>" /></a>
   <div class="ticket_mov_review_rev_one">
   <br /><br />
  <p><b>Censor certificate </b>  
   </p>
    <p><b>Movie Name</b><span style="color:#00F;">
    <c:out value="${movieForm.movie.movieName}"></c:out>
     <p><b>Casting</b>
  <c:out value="${movieForm.movie.casting}"></c:out>
     <p><b>Direction</b> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:02:56.557

试试这个（基于[这篇文章](https://stackoverflow.com/questions/12041851/converting-bytes-to-an-image-for-drawing-on-a-html5-canvas)）：（虽然它必须是正确的格式）

```
<form:form modelAttribute="movieForm" id="movieForm" name="movieForm">  
   <div class="ticket_mov_review_rev">
   <a href="booking.html">  <img src="data:image/jpeg;base64,${movieForm.newImage}" /></a>
   <div class="ticket_mov_review_rev_one">
   <br /><br />
  <p><b>Censor certificate </b>  
   </p>
    <p><b>Movie Name</b><span style="color:#00F;">
    <c:out value="${movieForm.movie.movieName}"></c:out>
     <p><b>Casting</b>
  <c:out value="${movieForm.movie.casting}"></c:out>
     <p><b>Direction</b> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:46:45.840

您可以尝试将图像 byte[] 值作为 a 返回`@ResponseBody`，

```
@RequestMapping(method = RequestMethod.GET, value = "/image/{id}")
@ResponseBody
public byte[] getImage(@PathVariable("id") int imageId) {
    // Get the image based on the id 
    // return the image byte[] value.
} 
```

这里的`@RequestMapping`值是图像路径。所以这就是你在jsp中的方法。

```
<img src="yourControllerPath/image/1"/> 
```

# jenkins - 我应该把 gradle.properties 放在詹金斯的哪里

> ID：16169638
> 
> 赞同：15
> 
> 时间：2013-04-23T12:42:00.600
> 
> 标签：jenkins, gradle

我应该把 gradle.properties 文件放在詹金斯的哪里？

我正在使用 1.21 版的 Gradle 插件，但是当我将它放在用户主目录 .gradle 目录中时，它没有找到属性文件。

任何指针将不胜感激。

谢谢

**更新**

Gradle 插件默认在每个项目的工作区中查找 gradle.properties 文件。为了在所有作业中使用一个文件，您需要在您的作业配置中设置您的 gradle home，如下所示，通过在“开关”下添加以下内容：

```
-Dgradle.user.home=$HOME/.gradle 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-05-02T14:43:14.107

Gradle 插件默认在每个项目的工作区中查找 gradle.properties 文件。为了在所有作业中使用一个文件，您需要在作业配置中设置您的 gradle home，如下所示，在“开关”下添加以下内容：

```
-Dgradle.user.home=$HOME/.gradle 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-29T04:55:05.507

在您的 Jenkins 网页中，您可以在“系统信息”页面中看到“user.home”属性。（对于 slve，请检查从属的“系统信息”页面）您将 gradle.properties 放在“user.home”/.gradle/ 文件夹下，每个 gradle 作业都可以看到该属性。如果您的作业在其他从属环境（即 Windows 系统）上运行，则添加开关不起作用

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-22T19:01:01.337

除了@devmojopum 的答案之外，请确保在您的作业配置中未选中“强制 GRADLE_USER_HOME 使用工作空间”。

[![摇篮配置](https://i.stack.imgur.com/w4yW2.png)](https://i.stack.imgur.com/w4yW2.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-07T17:18:02.647

我不同意赞成的答案。这仅适用于单工作区环境。如果您使用多个项目，有多个要发布到的 nexus 环境，并且还希望 jenkins 不要搞砸，那么您应该阅读

[https://docs.gradle.org/current/userguide/build_environment.html](https://docs.gradle.org/current/userguide/build_environment.html)

如何链接 gradle 属性。

Gradle 项目属性可以存储在单独的文件夹中并复制到工作场所根目录，后者添加到 .gitignore，因此每个人都可以配置自己的密码和设置。

这也鼓励在 Jenkins 中使用 FORCE 标志。

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2013-04-24T13:09:35.507

只需将 gradle.properties 放在 build.gradle 旁边即可。

问候， Olle

# c# - 在 LINQ 中使用 ExecuteCommand

> ID：16169641
> 
> 赞同：3
> 
> 时间：2013-04-23T12:42:04.143
> 
> 标签：c#, asp.net, linq-to-sql

我想在我的数据库上执行语句：

```
/*Disable Constraints & Triggers*/
exec sp_MSforeachtable 'ALTER TABLE ? NOCHECK CONSTRAINT ALL'
exec sp_MSforeachtable 'ALTER TABLE ? DISABLE TRIGGER ALL'

/*Perform delete operation on all table for cleanup*/
exec sp_MSforeachtable 'SET QUOTED_IDENTIFIER ON; DELETE ?'

/*Enable Constraints & Triggers again*/
exec sp_MSforeachtable 'ALTER TABLE ? CHECK CONSTRAINT ALL'
exec sp_MSforeachtable 'ALTER TABLE ? ENABLE TRIGGER ALL'

/*Reset Identity on tables with identity column*/
exec sp_MSforeachtable 'IF OBJECTPROPERTY(OBJECT_ID(''?''), ''TableHasIdentity'') = 1 BEGIN DBCC CHECKIDENT (''?'',RESEED,0) END' 
```

我有我的 LINQ 数据上下文：

```
 public static bool ClearDatabase()
      {
          GetContext().ExecuteCommand("");
      } 
```

MSDN 文档中不清楚的部分是......我应该将每个语句作为单独的命令运行还是制作一个很大的长字符串来执行？

我还应该保留 exec 语句吗？

另外，如果有人知道使用 LINQ 清除数据库的更好方法，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T12:48:54.690

`Execute`简单地执行它；内部是完全不透明的（除了`{0}`用于表示参数的 etc 之外 - 即`{0}`变成类似`@_p0`, 具有从`params`数组提供的值）。因此，只要您的 TSQL 有效（并且不包括`GO`等），它就应该可以正常工作。它当然不在乎 TSQL 很长。但是：试试看。

但是，我个人会说从数据上下文运行它是有风险的，因为数据上下文可能具有缓存状态，这可能会使事情变得混乱。就我个人而言，我会直接从 ADO.NET 运行它（或通过像“dapper”这样的助手）。但是我想如果您在执行此操作后立即处理+丢弃（并可能重新创建）数据上下文，它会正常工作。

# java - Eclipse m2e 插件似乎需要 org.eclipse.jem.util 0.0.0

> ID：16169642
> 
> 赞同：4
> 
> 时间：2013-04-23T12:42:04.603
> 
> 标签：java, eclipse, maven

我尝试使用 Help > Install New Software 和更新站点为 Eclipse Juno 安装 M2E 插件`http://download.eclipse.org/technology/m2e/releases`。当我尝试安装“Eclipse 的 Maven 集成”时，我收到以下消息：

```
Cannot complete the install because one or more required items could not be found.
  Software being installed: m2e - Maven Integration for Eclipse 1.3.1.20130219-1424 (org.eclipse.m2e.feature.feature.group 1.3.1.20130219-1424)
  Missing requirement: m2e - Maven Integration for Eclipse 1.3.1.20130219-1424
  (org.eclipse.m2e.feature.feature.group 1.3.1.20130219-1424) requires
  'org.eclipse.jem.util 0.0.0' but it could not be found 
```

如何避免此错误并安装 M2E 插件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T12:42:04.603

这个问题是由于我的 Eclipse 安装目录不可写造成的。这是一个全新的未配置的开箱即用安装，我已经`/opt/eclipse`在 Linux 上安装了它。但是，除非另有配置，否则 Eclipse 期望写入 安装目录的子目录`configuration`和`p2`子目录，并且如果这些不可写入，它不会给出任何明显的错误。

您可以通过确保您的用户可以写入 Eclipse 的安装目录来避免此错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-17T22:14:55.277

即使在具有完全权限的情况下运行 Eclipse 实例时，我也遇到了同样的问题。真正解决我的问题的是提供 Eclipse 更新站点（即在我的情况下......）

```
http://download.eclipse.org/releases/helios/ 
```

...除了 Maven 更新站点本身：

```
http://download.eclipse.org/technology/m2e/releases 
```

# javascript - 在特定元素上使用捕鼠器？

> ID：16169645
> 
> 赞同：14
> 
> 时间：2013-04-23T12:42:12.060
> 
> 标签：javascript, keyboard-shortcuts, mousetrap

我正在使用 Mousetrap javascript 库，并且想要捕获特定元素的输入。

场景是我有一个用于用户名和密码的文本框，KnockoutJS 绑定到该文本框，然后当按下按钮时，发出 ajax 请求以登录用户。现在由于没有表单并且它不是*真正的*按钮，它是 Jquery UI 变成按钮的锚点，我想知道是否有一些简单的方法可以让捕鼠器绑定到元素而不是文档级别。

因此，例如一个普通的捕鼠器绑定将是：

```
Mousetrap.bind('enter', function(event) { CallSomeAjaxMethod(); }); 
```

现在它将检查页面上的任何输入键（文本框元素之外），然后根据它做一些事情。现在的问题是，在这种情况下，我希望仅在特定元素范围内执行此事件时才能捕获该事件。

因此，例如，我想做这样的事情：

```
var element = document.getElementById("some-element");
Mousetrap.bind('enter', element, function(event) { CallSomeAjaxMethod(); }); 
```

或者可能更流利，例如：

```
Mousetrap.bind('enter', function(event) { CallSomeAjaxMethod(); }).on(element); 
```

有没有办法做到这一点？目前我能看到的唯一方法（使用 Mousetrap）是拥有此文档范围绑定，并在可能的情况下尝试获取引发事件的元素。

我知道你可以用 Jquery 或 vanilla js 做这种事情，但是因为我已经加载了 Mousetrap，如果可能的话，我想在这里重新使用它。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-03-28T19:14:22.963

我想跟进这件事。从版本 1.5.0（今天发布）开始，这现在可以在 Mousetrap 中本地实现。

对于您的具体示例，您所要做的就是

```
var element = document.getElementById("some-element");
Mousetrap(element).bind('enter', function(event) { CallSomeAjaxMethod(); }); 
```

您还可以创建一个新的捕鼠器实例来绑定多个事物。

```
var mousetrap = new Mousetrap(element);
mousetrap.bind('space', _handleSpace);
mousetrap.bind('enter', _handleEnter); 
```

最重要的是它应该是向后兼容的，所以你所有现有的代码仍然可以工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-25T18:05:49.543

截至目前，对您的问题的简短回答是在 Mousetrap 中无法本地执行此操作。话虽这么说，有几种方法可以解决这个问题。

1.  我不熟悉 KnockoutJS，但是浏览器的构建是为了让`enter`键触发表单提交，所以最优雅的解决方案可能是让您的输入成为表单的一部分，在这种情况下，您根本不需要捕鼠器来触发表单提交。您可以调用`e.preventDefault()`表单提交以确保它实际上不会发回服务器。

2.  如果您将类添加`mousetrap`到文本输入，那么它将允许它接收键盘快捷键。然后，您可以检查`e.target`您的回调以查看它是否来自该文本区域。这看起来像这样：

    **html**

    ```
    <input type="text" name="email" class="mousetrap"> 
    ```

    **js**

    ```
    var input = $('input[name=email]');
    Mousetrap.bind('enter', function(e) {
        if (e.target === input[0]) {
            console.log('triggered from input');
        }
    }); 
    ```

3.  您可以覆盖该`Mousetrap.stopCallback`功能来实现这一点。这不是最漂亮的解决方案，但应该可以。

    **html**

    ```
    <input type="text" name="email"> 
    ```

    **js**

    ```
    var input = $('input[name=email]');
    var _oldStopCallback = Mousetrap.stopCallback;
    Mousetrap.stopCallback = function(e, element, combo) {
        if (combo === 'enter') {
            return element !== input[0];
        }
        return _oldStopCallback(e, element, combo);
    }

    Mousetrap.bind('enter', function(e) {
        console.log('triggered from input');
    }); 
    ```

我正在研究支持 Mousetrap 中不同范围/上下文的不同方法，因此希望将来会有更简单的方法。

# php - Mysql 或条件

> ID：16169646
> 
> 赞同：0
> 
> 时间：2013-04-23T12:42:17.553
> 
> 标签：php, mysql

如何正确使用or in mysql查询？

通过以下查询，我尝试在 playlist_name 和 name 中搜索字符串，但它忽略了“playlist_name”

```
$search_results = mysql_query("SELECT * FROM show where playlist_name or name LIKE '%$search_string%'"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:44:34.433

您也需要`LIKE`用于第一个条件

```
$search_results = mysql_query("SELECT * FROM show WHERE
playlist_name LIKE '%$search_string%' 
OR
name LIKE '%$search_string%'"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:43:23.310

```
where playlist_name LIKE '%$search_string%' or name LIKE '%$search_string%' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T12:45:56.303

检查两个字段的条件。

```
where playlist_name LIKE '%$search_string%'" OR name LIKE '%$search_string%'" 
```

# php - PHP 高级自定义字段中继器字段

> ID：16169650
> 
> 赞同：1
> 
> 时间：2013-04-23T12:42:32.083
> 
> 标签：php, wordpress, custom-fields

我有一个变量，我想将 doc- 添加到它，因此它会像这样为 wordpress 中的高级自定义字段读出 doc-$user_role。

我知道如何通过回声来做到这一点，发现这种格式很困难，请帮助:)

```
 <?php

    $user_roles = $current_user->roles;
    $user_role = array_shift($user_roles);

        if(get_field('doc-$user_role')): ?>

        <ul>
          <?php while(has_sub_field('doc-$user_role')): ?>

        <li>
         <h3><?php the_sub_field('doc_name'); ?></h3>
           <p><?php the_sub_field('doc_description'); ?></p>
            <a href="<?php the_sub_field('download_doc'); ?>" target="_blank"><img src="<?php bloginfo('template_directory'); ?>/images/download.png" alt="download_button"></a>

        </li>
    <?php endwhile; ?>
        </ul>

    <?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:08:06.140

"" 和 '' 文字之间存在差异。当您将变量放入“”时，它将被php解析，因为它是字符串。当您将其放入 '' 时，它被视为 char 数组并且不会解析变量，这就是您需要使用 "" 文字或 sprintf() 的原因，或者您可以使用点运算符连接两个字符串。

所以你的选择是：

```
 if(get_field("doc-$user_role"))
  if(get_field('doc-'.$user_role))
  if(get_field("doc-".$user_role))
  if(get_field(sprintf("doc-%s", $user_role))) 
```

sprintf 当您有长字符串并且不想乱码时很有用。

[http://php.net/manual/en/function.sprintf.php](http://php.net/manual/en/function.sprintf.php)

在这里你有完整的解释字符串是如何在 PHP 中工作的

[http://php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:46:47.070

使用[连接运算符](http://www.w3schools.com/php/php_string.asp)：

```
if(get_field('doc-' . $user_role)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T12:49:30.577

```
 if(get_field("doc-$user_role")): ?> 
```

将是正确的，因为在由单引号包围的字符串中，变量*不会*被解析。仅在带有双引号的字符串中。

# mysql - GWT 项目和 MySQL 数据库上的 JBPM

> ID：16169651
> 
> 赞同：0
> 
> 时间：2013-04-23T12:42:34.217
> 
> 标签：mysql, gwt, jbpm

我想在我的带有 MySQL 数据库的 GWT 项目上使用 JBPM，但是当我想创建`EntityManagerFactory`. 我究竟做错了什么？

```
javax.persistence.PersistenceException: [PersistenceUnit: org.jbpm.persistence.jpa] Unable to build EntityManagerFactory
at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:677)
at org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:126)
at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:51)
at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:33)
at com.ayriksoft.desktopapp.server.TaskServiceManager.getInstance(TaskServiceManager.java:319)
at com.ayriksoft.desktopapp.server.JBPMServiceImpl.setup(JBPMServiceImpl.java:116)
at com.ayriksoft.desktopapp.server.JBPMServiceImpl.initializeJbpmSession(JBPMServiceImpl.java:51)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:561)
at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:619)

Caused by: org.hibernate.HibernateException: Could not obtain BTM transaction manager instance
at org.hibernate.transaction.BTMTransactionManagerLookup.getTransactionManager(BTMTransactionManagerLookup.java:50)
at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:367)
at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1341)
at org.hibernate.cfg.AnnotationConfiguration.buildSessionFactory(AnnotationConfiguration.java:867)
at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:669)
... 35 more

Caused by: java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.hibernate.transaction.BTMTransactionManagerLookup.getTransactionManager(BTMTransactionManagerLookup.java:47)
... 39 more

Caused by: bitronix.tm.utils.InitializationException: initialization failed, cannot safely start the transaction manager
at bitronix.tm.BitronixTransactionManager.<init>(BitronixTransactionManager.java:79)
at bitronix.tm.TransactionManagerServices.getTransactionManager(TransactionManagerServices.java:62)
... 44 more

Caused by: java.nio.channels.OverlappingFileLockException
at sun.nio.ch.FileChannelImpl$SharedFileLockTable.checkList(FileChannelImpl.java:1176)
at sun.nio.ch.FileChannelImpl$SharedFileLockTable.add(FileChannelImpl.java:1078)
at sun.nio.ch.FileChannelImpl.tryLock(FileChannelImpl.java:878)
at bitronix.tm.journal.TransactionLogAppender.<init>(TransactionLogAppender.java:70)
at bitronix.tm.journal.DiskJournal.open(DiskJournal.java:151)
at bitronix.tm.BitronixTransactionManager.<init>(BitronixTransactionManager.java:62)
... 45 more 
```

我的persistence.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
    <persistence xmlns="http://java.sun.com/xml/ns/persistence"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
        http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd" version="1.0">
    <!--     
    <persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
         -->    

    <persistence-unit name="org.jbpm.persistence.jpa" transaction-type="JTA">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <!-- non-jta-data-source>jdbc/jbpm-ds</non-jta-data-source-->

        <jta-data-source>java:comp/env/jdbc/jbpm-ds</jta-data-source>

        <mapping-file>META-INF/Taskorm.xml</mapping-file>

        <class>org.drools.persistence.info.SessionInfo</class>
        <class>org.jbpm.persistence.processinstance.ProcessInstanceEventInfo</class>
        <class>org.jbpm.persistence.processinstance.ProcessInstanceInfo</class>
        <class>org.drools.persistence.info.WorkItemInfo</class>

        <class>org.jbpm.process.audit.ProcessInstanceLog</class>
        <class>org.jbpm.process.audit.NodeInstanceLog</class>
        <class>org.jbpm.process.audit.VariableInstanceLog</class>       

        <class>org.jbpm.task.Task</class>
        <class>org.jbpm.task.Comment</class>
        <class>org.jbpm.task.Attachment</class>
        <class>org.jbpm.task.I18NText</class>
        <class>org.jbpm.task.SubTasksStrategy</class>
        <class>org.jbpm.task.Deadline</class>
        <class>org.jbpm.task.Escalation</class>
        <class>org.jbpm.task.Reassignment</class>
        <class>org.jbpm.task.Notification</class>
        <class>org.jbpm.task.BooleanExpression</class>
        <class>org.jbpm.task.User</class>
        <class>org.jbpm.task.PeopleAssignments</class>

        <properties>

             <!-- H2 dialect -->
               <!--   <property name="hibernate.dialect"              value="org.hibernate.dialect.H2Dialect"/>   -->

           <!-- Oracle dialect --> 
               <!--   <property name="hibernate.dialect" value="org.hibernate.dialect.OracleDialect"/> -->

             <!-- mysql dialect --> 

            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>

            <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
            <property name="hibernate.connection.url" value="jdbc:mysql://localhost:3306/jbpm" />
            <property name="hibernate.connection.username" value="root"/>
            <property name="hibernate.connection.password" value="admin2000"/>     

              <property name="hibernate.hbm2ddl.auto" value="update" />
            <property name="hibernate.connection.autocommit" value="false"/>
            <property name="hibernate.max_fetch_depth" value="3"/>
            <property name="hibernate.show_sql" value="true" />
           <property name="hibernate.jndi.class" value="bitronix.tm.jndi.BitronixInitialContextFactory"/> 
      <property name="hibernate.transaction.manager_lookup_class" value="org.hibernate.transaction.BTMTransactionManagerLookup" />

        </properties>
    </persistence-unit>

    <persistence-unit name="org.jbpm.task">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>

        <mapping-file>META-INF/Taskorm.xml</mapping-file>

        <class>org.jbpm.task.Attachment</class>
        <class>org.jbpm.task.Content</class>
        <class>org.jbpm.task.BooleanExpression</class>
        <class>org.jbpm.task.Comment</class>
        <class>org.jbpm.task.Deadline</class>
        <class>org.jbpm.task.Comment</class>
        <class>org.jbpm.task.Deadline</class>
        <class>org.jbpm.task.Delegation</class>
        <class>org.jbpm.task.Escalation</class>
        <class>org.jbpm.task.Group</class>
        <class>org.jbpm.task.I18NText</class>
        <class>org.jbpm.task.Notification</class>
        <class>org.jbpm.task.EmailNotification</class>
        <class>org.jbpm.task.EmailNotificationHeader</class>
        <class>org.jbpm.task.PeopleAssignments</class>
        <class>org.jbpm.task.Reassignment</class>
        <class>org.jbpm.task.Status</class>
        <class>org.jbpm.task.Task</class>
        <class>org.jbpm.task.TaskData</class>
        <class>org.jbpm.task.SubTasksStrategy</class>
        <class>org.jbpm.task.OnParentAbortAllSubTasksEndStrategy</class>
        <class>org.jbpm.task.OnAllSubTasksEndParentEndStrategy</class>
        <class>org.jbpm.task.OnAllSubTasksEndParentEndStrategy</class>

        <class>org.jbpm.task.User</class>

        <class>org.drools.persistence.info.SessionInfo</class>
        <class>org.jbpm.persistence.processinstance.ProcessInstanceInfo</class>
        <class>org.jbpm.persistence.processinstance.ProcessInstanceEventInfo</class>
        <class>org.drools.persistence.info.WorkItemInfo</class>

        <properties>
             <!-- sample H2 configuration  

            <property name="hibernate.dialect" value="org.hibernate.dialect.H2Dialect"/>
            <property name="hibernate.connection.driver_class" value="org.h2.Driver"/>
            <property name="hibernate.connection.url" value="jdbc:h2:mem:droolsflow" />
            <property name="hibernate.connection.username" value="sa"/>
            <property name="hibernate.connection.password" value="sasa"/>
          -->

            <!-- Sample Oracle Configuration  

             <property name="hibernate.dialect" value="org.hibernate.dialect.Oracle10gDialect"/>
            <property name="hibernate.connection.driver_class" value="oracle.jdbc.OracleDriver"/>
            <property name="hibernate.connection.url" value="jdbc:oracle:thin:oracleserver:1521:db" />
            <property name="hibernate.connection.username" value="nagios"/>
            <property name="hibernate.connection.password" value="nagios"/>
            -->

             <!-- Sample mysql Configuration  -->

            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>
            <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
            <property name="hibernate.connection.url" value="jdbc:mysql://localhost:3306/task" />
            <property name="hibernate.connection.username" value="jbpm"/>
            <property name="hibernate.connection.password" value="jbpm"/>
             <property name="hibernate.hbm2ddl.auto" value="update" />

            <property name="hibernate.connection.autocommit" value="true" />
            <property name="hibernate.max_fetch_depth" value="3"/>
            <property name="hibernate.hbm2ddl.auto" value="create" />
            <property name="hibernate.show_sql" value="false" />
         <property name="hibernate.jndi.class" value="bitronix.tm.jndi.BitronixInitialContextFactory"/> 
      <property name="hibernate.transaction.manager_lookup_class" value="org.hibernate.transaction.BTMTransactionManagerLookup" />

        </properties>
    </persistence-unit>

</persistence> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:07:21.433

此异常意味着您已经有一个仍在运行的 bitronix 实例（它正在使用文件来获得锁定）。这可能是先前执行未正确关闭的结果。例如，如果我在 Eclipse 中多次运行相同的示例，并且它们都尝试实例化 bitronix 事务管理器。简单地在 Eclipse 中关闭其他正在运行的 Java 进程通常可以解决此问题。

# android - 输入类型=“文件”接受=“图像/*”在电话间隙中不起作用？

> ID：16169652
> 
> 赞同：2
> 
> 时间：2013-04-23T12:42:47.367
> 
> 标签：android, file, cordova, browser, user-input

我尝试使用支持的 HTML + phonegap 2.6.0 制作一个 android 应用程序：

```
<input type="file" /> 
```

默认情况下，如果 HTML 是通过 android 浏览器本身打开的，则在单击 @browse 按钮​​时会显示 "camera" 、 "gallery" 、 "dropbox" 等。但是，如果我在应用程序 webview 上运行 HTML，文件选择器即将出现，我们可以从图库、保管箱、音乐曲目等中进行选择，但相机除外。

我尝试使用：`<input type="file" accept="image/*" />`也许当我运行该应用程序时，它会显示可供选择的相机图标。抱歉不行。

我的目标是当我按下浏览按钮时，相机图标与画廊等一起出现。可以用 phonegap 做到这一点吗？:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:57:51.770

出于同样的需要，我制作了一个带有 2 个按钮的自定义菜单！取自相机/取自照片。之后只需使用手机间隙函数camera.getPicture，即打开设备的默认相机应用程序，以便用户拍照（如果Camera.sourceType = Camera.PictureSourceType.CAMERA，这是默认值）。拍摄照片后，相机应用程序将关闭并恢复您的应用程序。

如果 Camera.sourceType = Camera.PictureSourceType.PHOTOLIBRARY 或 Camera.PictureSourceType.SAVEDPHOTOALBUM，则会显示照片选择器对话框，从中可以选择相册中的照片。

[http://docs.phonegap.com/en/2.6.0/cordova_camera_camera.md.html#Camera](http://docs.phonegap.com/en/2.6.0/cordova_camera_camera.md.html#Camera)

# javascript - 与同一页面上的两个 jquery 日期选择器冲突

> ID：16169654
> 
> 赞同：23
> 
> 时间：2013-04-23T12:42:56.093
> 
> 标签：javascript, jquery, html, jquery-ui, datepicker

所以这里是设置：我有两个 jquery datepickers，在一个 jquery 选项卡内，在一个 jquery 模态对话框窗口内：

```
\---/\---/\---/_______________
/                            /
\                            \
/  DATEPICKER1               /
\                            \
/  DATEPICKER2               /
\                            \
/                            /
\                            \
/____________________________/ 
```

第一个日期选择器正常运行，但是当我尝试单击第二个日期选择器中的日期时，它只会激活第一个日期选择器。你遵循了吗？:)

综上所述，单击 datepicker2 中的日期会激活 datepicker1。

我不知道为什么会发生这种情况——它们有不同的 ID 和名称，如下所述。

要创建我正在使用的日期选择器：

```
$(function() {
    $("#datepicker1").datepicker();
    $("#datepicker2").datepicker();
}); 
```

这些字段很简单：

```
<input type="text" id="datepicker1" name="datepicker1" value="" />
<input type="text" id="datepicker2" name="datepicker2" value="" /> 
```

我正在使用 jQuery v1.9.0 和 jQueryui v1.10.0。

对此有什么想法吗？需要注意的是，由于雇主的限制，我无法发布实际代码，但如果您需要任何澄清，我可以回答大多数问题。任何和所有的帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-02T12:12:54.623

**更新：** 看起来下面描述的行为在这里的另一个stackoverflow问题中得到了解决：
[防止jQuery UI对话框将焦点设置到第一个文本框](https://stackoverflow.com/questions/1202079/prevent-jquery-ui-dialog-from-setting-focus-to-first-textbox)

为“重复”问题道歉 - 如果我知道这是我会很快解决的问题！

################################################# ##############################

好吧，解决方案非常简单，也许有人可以告诉我为什么它会这样工作，因为我现在有点无能为力。

这是我所做的：
我在表单中添加了另外两个文本输入字段（它们是必需的）并重新排序布局，以便这些新输入字段中的一个是“第一个”元素（在左上角），如下所示：

```
\---/\---/\---/_______________
/                            /
\                            \
/  TEXTFIELD1   DATEPICKER1  /
\                            \
/  TEXTFIELD2   DATEPICKER2  /
\                            \
/                            /
\                            \
/____________________________/ 
```

问题突然消失了！但是，我注意到一个有趣的行为：
当我在任一日期选择器中选择一个日期时，光标会立即跳回第一个文本字段。因此，如果当我有没有文本字段的日期选择器时发生这种情况，则该行为将意味着光标会立即跳回第一个日期选择器，这可能会导致我遇到的问题。

现在，至于为什么它以这种方式工作，我不知道。我尝试为各种文本字段/日期选择器设置 tabindex 参数，但这并没有改变行为。

无论如何，我感谢每个插话的人的意见 - 这是一个奇怪的问题，但我永远不会忘记现在如何解决它。谢谢大家的帮助！！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-31T07:30:09.477

试试这个朋友：在你的 JS

```
 $(function() {   
       $( "#from" ).datepicker({   
      defaultDate: "+1w",  
      changeMonth: true,   
      numberOfMonths: 1,  
      onClose: function( selectedDate ) {  
        $( "#to" ).datepicker( "option", "minDate", selectedDate );  
      }  
    });  
    $( "#to" ).datepicker({
      defaultDate: "+1w",
      changeMonth: true,
      numberOfMonths: 1,
      onClose: function( selectedDate ) {
        $( "#from" ).datepicker( "option", "maxDate", selectedDate );
      }
    });  
  }); 
```

```
 <link rel="stylesheet" href="//code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css"/>
```

```
 <script src="//code.jquery.com/jquery-1.10.2.js"></script>
  <script src="//code.jquery.com/ui/1.11.1/jquery-ui.js"></script>
Start date: <input type="text" id="from" name="from"> 
End date: <input type="text" id="to" name = "to">
```

在您的输入中

开始日期：输入 type="text" id="from" name="from"

结束日期：输入 type="text" id="to" name="to"

这对我有用:)

由 MacElie M.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T14:20:03.013

这完全是在黑暗中拍摄，但您是否尝试过分别初始化每个？类似于以下内容

```
$(function() {
    $('.datepicker').each(function(){
        $(this).datepicker();
    });
}); 
```

这可能是其他人提到的，您的代码遇到了某种形式的干扰，但值得一试。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-23T12:54:58.777

我认为您还有另一个代码会干扰 javascript，因为：http: [//jsfiddle.net/fMD62/](http://jsfiddle.net/fMD62/)

完美运行（使用 jquery 1.9.1 和 jqueryui 1.9.2

也许试试

```
$(function() {
    $("#datepicker1,#datepicker2").datepicker();
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-29T16:00:52.267

在您的示例中，两个日期选择器都有不同的 ID 和名称，但是，您描述的问题正是如果您对两者使用相同的名称会发生​​什么。

您的实际代码是否对两个日期选择器使用不同的 ID 和名称？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-05-09T05:03:46.263

案例 1：
@antony 的评论（包括问题下方的 jsfiddle 链接）适用于
版本`jquery-1.9.1`和`1.9.2/jquery-ui.js`

案例 2：
OP 的情况，其中 datepicker1 运行良好但选择 datepicker2 将打开 datepicker1
版本：`jQuery v1.9.0`和`jQueryui v1.10.0`

案例 3：
我的案例选择 datepicker1 效果很好，但选择 datepicker2 没有任何效果。
版本：`jquery-3.1.1.min.js` 和`jQueryui v1.12.1`

案例 3 解决方案：
先初始化 date1，先初始化`$('date1').datepicker()`date1 才能生效
对于 date2，先销毁 date1，然后初始化 date2

```
$('date1').datepicker('destroy');
$('date2').datepicker(); 
```

现在对于 date1，销毁 date2 并初始化 date1。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-24T01:53:36.600

尝试将 JQuery UI Dialog 的内容放入 IFrame。这可能会帮助您解决一些问题。

```
\---/\---/\---/_______________
/                            /
\  ####IFRAME######          \
\  #              #          \
/  #DATEPICKER1   #          /
\  #              #          \
/  #DATEPICKER2   #          /
\  #              #          \
/  ################          /
\                            \
/____________________________/ 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-05T23:24:36.410

顺便说一句，我是一名后端数据库程序员，所以对 JavaScript 知之甚少，所以希望找到这篇带有完全相同问题的帖子。从我上面阅读的内容中收集并与我现有的代码进行比较，我修改了我的 JavaScript 以便它可以工作，并认为我会分享它。

唯一需要注意的是，我现有的带有单个日期选择器的表单不再起作用，所以我不得不添加一些来处理这些，现在一切看起来都很好。在这种情况下，数据库字段实际上是一个 Unix 时间戳，因此在提交表单时会根据需要转换两个字段，但为了清楚起见，我没有在此处包含该代码。

```
$(document).ready(function(){ 
       $( "#StartDate" ).datepicker({   
                                altField: '#datepicker',
                                altFormat: 'yy-mm-dd',
                                dateFormat: 'D M d, yy', 
                                firstDay: 1,
      onClose: function( selectedDate ) {  
        $( "#StartDate" ).datepicker( "option", "minDate", selectedDate );  
      }  
    });  
    $( "#EndDate" ).datepicker({
                                altField: '#datepicker',
                                altFormat: 'yy-mm-dd',
                                dateFormat: 'D M d, yy', 
                                firstDay: 1,
      onClose: function( selectedDate ) {
        $( "#EndDate" ).datepicker( "option", "maxDate", selectedDate );
      }
    }); 
        $( "#datepicker" ).datepicker({
                                altField: '#datepicker',
                                altFormat: 'yy-mm-dd',
                                dateFormat: 'D M d, yy', 
                                firstDay: 1,
      onClose: function( selectedDate ) {
        $( "#datepicker" ).datepicker( "option", "maxDate", selectedDate );
      }
    });     
  }); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-03-31T08:40:45.800

**问题说明**

我有同样的问题，非常令人失望。我搜索了jquery的源代码，发现了这个：

```
if ( $.ui.dialog.overlayInstances ) {
    this._on( this.document, {
        focusin: function( event ) {
            if ( !$( event.target ).closest(".ui-dialog").length ) {
                event.preventDefault();
                $(".ui-dialog:visible:last .ui-dialog-content")
                    .data("ui-dialog")._focusTabbable();
            }
        }
    });
} 
```

因此，当您在不在内部的元素中设置焦点时`.ui-dialog`，它将触发`_focusTabbable()`将焦点设置为对话框中第一个输入的功能。

问题是，这`$.datepicker`会在 body 的末尾创建 div - 所以它在`.ui-dialog`

如果有另一个输入`_focusTabbable()`可以使焦点正常，因为 datepicker 可以处理。但是如果这个输入绑定了日期选择器，它将关闭前一个日期选择器，在第一个输入上打开另一个，并且不会触发前一个日期选择器上的选择。

**可能的解决方案之一**

在这种情况下，解决方案是有输入，它将首先关注对话框并且没有日期选择器。

我只是将此 HTML 代码用作对话框内容开始时的第一个输入，否则 datepicker 输入将位于首位：

```
<span class="ui-helper-hidden-accessible"><input type="text" /></span> 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-04-29T15:47:41.817

在 js 档案中：

```
$("#fecha_1").datepicker({
    dateFormat: "dd/mm/yy",
    dayNames: "Domingo Lunes Martes Miercoles Jueves Viernes Sabado".split(" "),
    dayNamesMin: "Do Lu Ma Mi Ju Vi Sa".split(" "),
    dayNamesShort: "Do Lu Ma Mi Ju Vi Sa".split(" "),
    monthNames: "Enero Febrero Marzo Abril Mayo Junio Julio Agosto Septiembre Octubre Noviembre Diciembre".split(" "),
    monthNamesShort: "Ene Feb Mar Abr May Jun Jul Ago Sep Oct Nov Dic".split(" "),
    prevText: "Ant",
    nextText: "Sig",
    currentText: "Hoy",
    changeMonth: !0,
    changeYear: !0,
    showAnim: "slideDown",
    yearRange: "1900:2100"
});

$("#fecha_2").datepicker({
    dateFormat: "dd/mm/yy",
    dayNames: "Domingo Lunes Martes Miercoles Jueves Viernes Sabado".split(" "),
    dayNamesMin: "Do Lu Ma Mi Ju Vi Sa".split(" "),
    dayNamesShort: "Do Lu Ma Mi Ju Vi Sa".split(" "),
    monthNames: "Enero Febrero Marzo Abril Mayo Junio Julio Agosto Septiembre Octubre Noviembre Diciembre".split(" "),
    monthNamesShort: "Ene Feb Mar Abr May Jun Jul Ago Sep Oct Nov Dic".split(" "),
    prevText: "Ant",
    nextText: "Sig",
    currentText: "Hoy",
    changeMonth: !0,
    changeYear: !0,
    showAnim: "slideDown",
    yearRange: "1900:2100"
}); 
```

在您的页面中：`<input type="text" id="fecha_1"><input type="text" id="fecha_2">`

# objective-c - 将 NSMutableArray 保存到 NSUserDefaults

> ID：16169659
> 
> 赞同：3
> 
> 时间：2013-04-23T12:43:13.890
> 
> 标签：objective-c, nsuserdefaults, encoder, decoder

我正在尝试将数组保存到`NSUserDefaults`. 我读到我必须使用编码器和解码器，但我仍然得到同样的错误

```
*** -[NSUserDefaults setObject:forKey:]: Attempt to insert non-property value '(
    "<Item: 0x1e86e380>",
    "<Item: 0x1e86fd60>",
    "<Item: 0x1e86fda0>",
    "<Item: 0x1e86fde0>",
    "<Item: 0x1e86fe10>"
)' of class '__NSArrayM'.  Note that dictionaries and arrays in property lists must also contain only property values.
[unknown][unknown][unknown][unknown][unknown](gdb) 
```

为什么？？

这是我的代码：

这是我的模型。它有`NSStrings`,`NSNumbers`和`NSMutableArrays`:

```
- (void)encodeWithCoder:(NSCoder *)encoder
{
    [encoder encodeObject: self.title forKey:@"title"];
    [encoder encodeObject: self.desc forKey:@"desc"];
    [encoder encodeObject: (NSNumber*) self.day forKey:@"day"];
    [encoder encodeObject: self.images forKey:@"images"];
}

- (id)initWithCoder:(NSCoder *)decoder
{
    self = [super init];
    if( self != nil )
    {
        self.title = [decoder decodeObjectForKey: @"title"];
        self.desc = [decoder decodeObjectForKey: @"desc"];
        self.day = [decoder decodeObjectForKey: @"day"];
        self.images = [decoder decodeObjectForKey: @"images"];

    }
    return self;
} 
```

这是在 AppDelegate 的`DidFinishLaunching`方法中：

```
if([[NSUserDefaults standardUserDefaults] objectForKey:@"savedData"] == nil)
{
    items = [[NSMutableArray alloc] init];

    NSString *filePath = [[NSBundle mainBundle] pathForResource:@"items" ofType:@"json"];
    NSString *contents = [NSString stringWithContentsOfFile: filePath  encoding: NSUTF8StringEncoding error: nil];
    SBJsonParser *jsonParser = [[SBJsonParser alloc] init];
    NSMutableDictionary *json = [jsonParser objectWithString: contents];
    jsonParser = nil;
    items = json[@"item"];

    for(NSDictionary *itemDict in items)
    {

        Item *item = [[Item alloc] init];

        item.title = [itemDict valueForKey:@"title"];
        item.desc = [itemDict valueForKey:@"description"];
        item.day = [itemDict valueForKey:@"day"];
        item.images = [itemDict valueForKey: @"images"];

        [items addObject: item];

    }    
}
else
{

    NSData *decodedObject = [userDefault objectForKey: [NSString stringWithFormat:@"savedData"]];
    NSArray *decodedArray =[NSKeyedUnarchiver unarchiveObjectWithData: decodedObject];

    items = [decodedArray mutableCopy];

} 
```

我有这个`AppWillTerminate`：

```
 userDefault = [NSUserDefaults standardUserDefaults];
   NSData *encodedObject = [NSKeyedArchiver archivedDataWithRootObject: items];
   [userDefault setObject: encodedObject forKey:[NSString stringWithFormat:@"savedData"]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:24:02.927

前言：了解用户默认值不是通用数据库。除非您建议存储的数据非常小，否则我强烈建议您不要这样做。另一种方法是将数据存储在明确定义的位置，例如应用程序支持目录。

编辑

在上一段中，我已经说过应用程序支持目录不应该用于将更改的数据。我找不到任何支持这一点的东西。苹果自己的文档指出，它是“您的应用程序存储任何类型的文件的地方，该文件支持该应用程序但不是应用程序运行所必需的”，用户数据不应该存储在那里，并且每个应用程序都应该创建和维护自己的目录里面，而不是写到它的顶层。完全不确定我是在哪里捡到这本小说的，很抱歉让它长期存在。

结束编辑

话虽如此，当编译器抱怨“非属性值”时，这意味着您正在尝试编写不是`NSArray,` `NSDictionary,` `NSString,` `NSData,` `NSDate`或的东西`NSNumber.`

您是正确的，您自己的对象需要使用 NSKeyedArchiver 和 NSKeyedUnarchiver。但仅仅因为您`NSCoding`在模型对象中实现方法并不会改变它不是属性列表值的事实。

您需要做的是在尝试存储每个对象`NSKeyedArchiver` *之前使用。*这会产生一个`NSData`可以存储为属性列表对象的实例。

# ios - 尚未调用 setNeedsDisplay

> ID：16169661
> 
> 赞同：0
> 
> 时间：2013-04-23T12:43:14.493
> 
> 标签：ios, objective-c, xcode, drawrect, setneedsdisplay

`UIView`我通过使用在 an 上绘制正弦波，`drawrect`并将其链接到`UIViewController`. 当我第一次加载视图控制器时，它可以绘制一次。我希望当我改变 a`UISlider`中的值时`ViewController`，它会改变正弦波的频率。我在中使用该`setNeedsDisplay`功能，`IBAction`但它不起作用。这是我的代码

```
//CROO.m
#import "CROO.h"

@implementation CROO
@synthesize frequency;
CGFloat fffff;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        self.frequency = fffff;
        [self setNeedsDisplay];
        // Initialization code
    }
    return self;

}

-(void)drawRect:(CGRect)rect
{

    CGContextRef context = UIGraphicsGetCurrentContext();

    CGContextSetLineWidth(context, 1);
    CGContextSetLineJoin(context, kCGLineJoinRound);
    NSLog(@"hi i am here %f",fffff);
    const CGFloat amplitude = 200/2;
    for(CGFloat x = 0; x < 600; x += 0.5)
    {
        CGFloat y = amplitude * cosf(2 * M_PI * (x / 600) * fffff) + 200;
        if(x == 0)
            CGContextMoveToPoint(context, x, y);
        else
            CGContextAddLineToPoint(context, x, y);
    }
    CGContextSetStrokeColorWithColor(context, [[UIColor greenColor] CGColor]);
    self.clearsContextBeforeDrawing = NO;

    CGContextStrokePath(context);
}

-(void)setFrequency:(CGFloat)f
{
    frequency = f;
    [self hello];
    NSLog(@"fre = %f",fffff);
}
-(void)hello
{
    fffff = frequency;
    [self setNeedsDisplay];
}
@end
//CosViewController.m
#import "CosViewController.h"
@interface CosViewController ()
@end

@implementation CosViewController
@synthesize frequency,currfrelab;
@synthesize cro;
float tempfreq;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    //cro = [[CROO alloc]initWithFrame:cro.frame];
    cro = [[CROO alloc]initWithFrame:cro.frame];

    //[self.view addSubview:cro];
    [cro setFrequency:frequency.value];
    //[self performSelectorOnMainThread:@selector(setNeedsDisplay) withObject:nil waitUntilDone:YES];
    NSLog(@"freq = %f",cro.frequency);
    currfrelab.text = [NSString stringWithFormat:@"Frequency = %f",frequency.value];
    //[self.view setNeedsDisplayInRect:cro.frame];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
-(IBAction)updatefreq:(id)sender
{
   // cro = [[CROO alloc]init];
    CGFloat freq = [(UISlider *)sender value];
   // [self.view addSubview:cro];
    [cro setNeedsDisplay];
    //[[NSRunLoop currentRunLoop] runMode: NSDefaultRunLoopMode beforeDate: [NSDate date]];
    currfrelab.text = [NSString stringWithFormat:@"Frequency = %f",freq];
    //[self.view performSelectorOnMainThread:@selector(setNeedsDisplay) withObject:nil waitUntilDone:YES];

}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:46:35.553

Init 只被调用一次，init。从另一个控制器调用 setNeedsDisplay 以再次弹出 drawRect。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:49:26.733

```
-(IBAction)updatefreq:(id)sender
{
   // cro = [[CROO alloc]init];
    CGFloat freq = [(UISlider *)sender value];
    **[cro setFrequency:freq];**
   // [self.view addSubview:cro];
    [cro setNeedsDisplay];
    //[[NSRunLoop currentRunLoop] runMode: NSDefaultRunLoopMode beforeDate: [NSDate date]];
    currfrelab.text = [NSString stringWithFormat:@"Frequency = %f",freq];
    //[self.view performSelectorOnMainThread:@selector(setNeedsDisplay) withObject:nil waitUntilDone:YES];

} 
```

# winforms - 需要有一个 ProgressBar（不是 Marqee 样式）来回移动

> ID：16169664
> 
> 赞同：0
> 
> 时间：2013-04-23T12:43:18.870
> 
> 标签：winforms, progress-bar

我使用的 ProgressBar 可以是 Continuous 或 Blocks 样式（我无法在我的应用程序中启用视觉样式）。

我一步一步地推进使它工作

代码是这样的（在*msdn*上查看）：

```
private Timer timer = new Timer();
void progressbar1_visibleChanged(object sender, EventArgs e)
{
    var progressb = sender as ProgressBar;
    if (progressb != null && progressb.Visible == true)
    {
        InitializeProgress();
    }
}    

private void InitializeProgress()
{
    progressBar1.Value = 0;
    timer.Interval = 50;
    timer.Tick += new EventHandler(IncreaseProgressBar);
    timer.Start();
}

private void IncreaseProgressBar(object sender, EventArgs e)
{
    if (progressBar1.Value >= progressBar1.Maximum)
    {
        progressBar1.Value = 0;    
    }

    progressBar1.Increment(1);

 } 
```

（并且进度条对执行不同操作的不同*工作人员*显示\隐藏）

但是，它对我来说看起来很丑，我希望它从左到右\从右到左移动。

我怎样才能做到这一点？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:03:10.743

您需要将 [WinForms 控件的 CurrentCulture 覆盖为](https://stackoverflow.com/questions/925145/override-currentculture-for-winforms-control)从右到左的语言（例如希伯来语 - “he”或“he-IL”），这有点棘手，因为这仅适用于线程（而不是例如表单或控制）。

然后将进度条控件属性“RightToLeft”设置为“Yes”，将“RightToLeftLayout”属性设置为“True”。
现在你的进度条应该是 RTL。如果它没有或更改为 RTL 文化带来的伤害大于它所带来的伤害，那么我能看到的唯一选择就是为这项工作创建一个自定义控件。

希望这可以帮助！

# regex - Powershell：拆分多个字符

> ID：16169665
> 
> 赞同：1
> 
> 时间：2013-04-23T12:43:19.703
> 
> 标签：regex, powershell

在Powershell（如果重要的话，v2）中，是否可以拆分分隔符的可变长度字符串？我的输入文件由行组成，其中每个字段由一个或多个制表符分隔，以保持整齐的列。没有前导标签。我认为您可以在分隔符规范中使用正则表达式，所以我尝试了：

```
get-content $INFILE | foreach-object {
    $LINE = $_.split("`t*");
    $F1 = $LINE[0]
    $F2 = $LINE[1]
    $F3 = $LINE[2]
        . . .
} 
```

如果每个字段之间只有一个选项卡，则它按要求工作。如果有两个或更多，则每个都被视为单独的分隔符，并且 $LINE 的某些成员留空。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T12:57:47.917

试试这个重载。split 方法不采用正则表达式模式，仅采用 char(s) 或 string(s)。您还可以使用多重赋值并保存一些代码行：

```
$f1,$f2,$f3 = $_.Split("`t",[System.StringSplitOptions]::RemoveEmptyEntries) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T13:04:19.763

首先清理重复项，你应该没问题。

```
$DedupedLine  = $_ -replace '[\t]+',"`t" # Replace multi tabs with a single tab
$LINE  = $DedupedLine.split('`t') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T23:13:07.547

除了使用 .NET[`string.Split`](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)方法的选项之外，PowerShell[`-split`](http://go.microsoft.com/fwlink/?LinkID=113270)运算符*还*支持正则表达式，例如``t*`：

```
PS> 'comma,separated,,values' -split ',+'
comma
separated
values 
```

要访问每行的前三个字段，您可以使用：

```
$F1,$F2,$F3,$rest = $_ -split "`t+" 
```

# twitter-bootstrap - 更高的导航栏打破了引导程序中 scrollspy 的停靠位置

> ID：16169679
> 
> 赞同：0
> 
> 时间：2013-04-23T12:43:45.903
> 
> 标签：twitter-bootstrap, scrollspy

我想在不破坏 twitter bootstrap 中的固定停靠行为的情况下更改导航栏的高度。我在哪里可以调整这个设置？更改 nav 元素的 offset 属性似乎并不能解决问题。

这是在导航栏高度更改之前正确对接子导航的示例，如果向下滚动，您将看到导航栏对接：

[http://www.pictorious.com/about](http://www.pictorious.com/about)

但是，一旦我使导航栏更高，子导航就会完全隐藏在下面，认为它的导航与以前的高度相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:57:19.497

从 main.css 的第 174 行开始，您有：

```
.subnav-fixed {
  position: fixed;
  top: 40px;
  ....
} 
```

您是否尝试过将 top: 40px 更改为主导航栏的新高度？

您可能还想调整 data-offset 的值

```
<body data-spy="scroll" data-target=".subnav" data-offset="50"> 
```

# objective-c - awakeFromNib、applicationWillFinishLaunching 和 applicationDidFinishLaunching 的顺序？

> ID：16169681
> 
> 赞同：3
> 
> 时间：2013-04-23T12:43:48.060
> 
> 标签：objective-c, cocoa

假设 App Delegate 位于主 XIB 文件中的默认 Xcode Cocoa 应用程序模板。

当然`applicationWillFinishLaunching:`是之前调用的`applicationDidFinishLaunching:`。

为什么**之前**`awakeFromNib`被调用？ **`applicationWillFinishLaunching:`**

 **文档是[`applicationWillFinishLaunching:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSApplicationDelegate/applicationWillFinishLaunching%3a)这样说的：

> 由默认通知中心在应用程序对象初始化之前立即发送。

为什么这与**之前**`awakeFromNib`被调用不矛盾？ **`applicationWillFinishLaunching:`**

 **我可以依赖这个命令吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T15:37:27.673

顺序是 awakeFromNib、applicationWillFinishLaunching 和 applicationDidFinishLaunching，这是有道理的，因为您首先需要加载 UI，然后才能实际运行应用程序。该通知不是 applicationDidStartLaunching，人们可以将其视为必须在 awakeFromNib 之前执行的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-20T09:20:30.307

> **1\.** *awakeFromNib*
> **2\.** *applicationWillFinishLaunching*
> **3\.** *applicationDidFinishLaunching*

*   awakeFromNib 将首先被调用。
*   当 nib 文件初始化后，nib 中引用的每个对象都将被循环遍历，如果它们响应消息，它们都会收到 awakeFromNib 调用。
*   完成所有这些之后，应用程序的委托将收到 applicationDidFinishLaunching: 调用。这是所有内容都已加载并且应用程序已准备好开始接收用户输入的通知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T12:46:39.347

根据[这个答案](https://stackoverflow.com/questions/377202/which-should-i-use-awakefromnib-or-viewdidload)，`awakeFromNib`当从 nib 存档中提取控制器时调用。我想这是在应用程序完成启动后发生的。****

# networking - 当服务器和客户端都在同一台机器上时，如何捕获 pcap 跟踪？

> ID：16169684
> 
> 赞同：0
> 
> 时间：2013-04-23T12:44:04.177
> 
> 标签：networking, network-protocols, wireshark, tshark

我有一个 SMPP 服务器和客户端在同一台机器的不同端口上运行，我想捕获 pcap 以查看 smpp 消息。由于是同一台机器，在tshark命令中没有捕获到。

如果客户端和服务器都在同一台机器上，是否有任何选项可以捕获消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T21:48:12.817

某些版本的 UN*X 支持在“环回”接口上捕获，该接口是服务器和客户端之间的流量将出现的接口。（Alpesh Gediya 在这里弄错了；流量可能没有为实际的网络接口控制器排队，但它*为*环回接口排队。）其他人没有。

尝试`tshark -D`以与尝试捕获流量时运行 tshark 相同的方式运行；如果它报告一个名称为`lo`(Linux) 或`lo0`(*BSD, OS X, some other UN*Xes) 的接口，请尝试在该接口上捕获。如果它没有报告这样的接口，那么您正在运行的 UN*X 不支持在环回接口上捕获，例如 Solaris 10 或更早版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:53:11.900

当您在同一台机器上拥有服务器和 Clinet 时，由于这个原因，您无法在同一台机器上捕获数据包，因此操作系统不会将数据包放入 NIC 队列中。

您可以使用 TCPMON 实用程序通过路由来捕获包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T06:32:15.170

`-i`请注意，通过多次使用该选项，您可以使用 tshark 同时捕获多个接口。所以解决这个问题的一种方法是从输出中获取所有接口，`tshark -D`并将所有这些接口放在你的 tshark 命令行中，如下所示：

```
tshark -i <iface0> -i <iface1> -i <iface2> ... <other options> 
```

如果您列出了所有接口并且没有找到您想要的流量，那么 tshark 可能无法捕获它。

# jquery - 如何区分初始页面访问和 jquery 中的后退导航？

> ID：16169685
> 
> 赞同：0
> 
> 时间：2013-04-23T12:44:07.350
> 
> 标签：jquery, dom

我有一个网页`page1.html`，上面有 jQuery 脚本，包括一个`$(document)`处理程序，它在第一次访问页面时连接页面上的事件处理程序。页面加载后，用户单击一个`<a>`元素并导航到另一个页面。然后用户返回到初始的`page1.html`.

我看到的是`$(document)`当用户向后导航时事件处理程序正在触发，这不是我所期望的。我天真地假设一旦页面被浏览器“构建”，并且用户浏览回来，页面的构建状态仍然存在。

我希望能够区分“我正在重新访问该页面”和“我在访问其他页面后返回该页面”的状态。这是如何在 jQuery 中惯用的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:50:49.977

据我所知，没有真正干净的方法可以做到这一点。我见过的大多数解决方案都涉及使用 Javascript 或隐藏的表单元素设置 cookie。

Stackoverflow 上有很多类似的问题，您可能想看看这个，例如：[https ://stackoverflow.com/a/5642600/677985](https://stackoverflow.com/a/5642600/677985)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:13:41.173

如果您使用 HTML5，您可能会对此感兴趣： http: [//html5doctor.com/history-api/](http://html5doctor.com/history-api/)

由于基本上您要做的就是检查站点的地址是否在浏览器的历史记录中，因此使用该`window.history`对象（保存浏览器历史记录）可能值得一试。

# c# - 如何从以特定方式格式化的字符串之间访问特定值c#

> ID：16169691
> 
> 赞同：1
> 
> 时间：2013-04-23T12:44:28.420
> 
> 标签：c#, deserialization

```
 <string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">m48333189002</string> 
```

我如何从这个字符串之间访问值 m48333189002 ？

请帮忙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T12:50:35.320

您可以尝试解析 XML：

```
XElement.Parse(str).Value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:46:45.447

可能最简单的方法是使用 string.Split 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T13:05:32.383

我想你期待如下，

**进口：**

```
using System.Xml;
using System.Xml.Linq; 
```

**代码 ：**

```
string xmlResult = "<string xmlns=\"http://schemas.microsoft.com/2003/10/Serialization/\">m48333189002</string>";    
// place the sample result into a stream
ASCIIEncoding encoding = new ASCIIEncoding();
byte[] xmlBytes = encoding.GetBytes(xmlResult);
// create a stream from the byte array
MemoryStream ms = new MemoryStream(xmlBytes);
// read and deserialize the xml
XmlTextReader respXmlRdr = new XmlTextReader(ms);
// Linq to XML to extract return value from namespace decorated
// return XML string
XDocument xDoc = XDocument.Load(respXmlRdr);
string Result = xDoc.Root.Value;
Console.WriteLine(Result); 
```

# sitecore - SiteCore 6.3+：发布后内容更改可见之前的漫长等待时间

> ID：16169705
> 
> 赞同：1
> 
> 时间：2013-04-23T12:44:56.547
> 
> 标签：sitecore, publishing

在进行内容更改并发布时，通常需要 5 到 10 分钟才能看到更改。

我尝试在 web.config 中更改一些调度代理时间，但这并没有改变任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:25:12.373

您需要将站点名称添加到 web.config 或 /App_Config/Include/ 文件夹中的 SiteDefinition.config 中的 HtmlCacheClearer publish:end 事件。

```
<event name="publish:end">
        <handler type="Sitecore.Publishing.HtmlCacheClearer, Sitecore.Kernel" method="ClearCache">
          <sites hint="list">
            <site>website1</site>
            <site>website1</site>
          </sites>
        </handler>
      </event> 
```

此事件在发布后触发，它会清除 Sitecore HTML 缓存。如果未清除此缓存，则在 app_pool 被回收或手动或通过调度程序清除缓存之前，您不会看到您的更改。

如果您使用分离的 CMS 和 ContentDelivery 服务器，您还需要`publish:end:remote`具有相同站点的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:41:34.600

我设法通过降低以下内容来缩短发布和可见性之间的时间：

```
<!-- Time between checking for scheduled tasks waiting to execute -->
<frequency>00:00:10</frequency> <!-- 00:05:00 --> 
```

和

```
<agent type="Sitecore.Tasks.DatabaseAgent" method="Run" interval="00:00:30"> <!-- 00:10:00 -->
            <param desc="database">core</param>
            <param desc="schedule root">/sitecore/system/tasks/schedules</param>
            <LogActivity>true</LogActivity>
        </agent> 
```

# java - JAVA - 程序重新启动时静态变量重置

> ID：16169711
> 
> 赞同：3
> 
> 时间：2013-04-23T12:45:18.240
> 
> 标签：java, static, counter, restart

我有一个静态计数器变量的问题。在一个超级类（“卡片”）中，我有一个变量来计算注册的卡片数量（这是一个票务系统）。它是这样写的：

```
public class Card implements Serializable    {
    private int id;
    public static int nextNr= 000;
    Card next;

    public Card(int t)   {
        id= ++nextNr;
        next= null;
    }
} 
```

该类实现了 Serializable，我使用 ObjectStream 将卡片写入文件。

但是如果我关闭程序并重新启动它，它可以从文件中读取并确认并将文件再次添加到我的卡片注册表中。但是，超级类中的卡计数器变量被重置，我尝试注册的每张新卡都再次从 001 开始。我究竟做错了什么？似乎无法在网上找到有关此特定问题的任何信息。

**解决方案：** 我使用 DataOutputStream 在退出时保存它，并在启动时使用 DataInputStream 读取它。我不知道这是否是最有效的方法，但它确实有效。非常感谢您的评论，它帮助了我很多！！！！

```
abstract public class Card implements Serializable  {

private int type;
private int cardNr;
private static int nextNr = readCardNr();
Card next;   //COllections or not.. hmmmm

public Card(int t)   {
    cardNr= ++nextNr;
    next= null;
    type = t;
    writeCardNr();
}

public int getType(){
    return type;
}

public void setCardNr(int i) {
    cardNr= i;
}
public int getCardNr()  {
    return cardNr;
}

public static int readCardNr() {        
    try(DataInputStream inn= new DataInputStream(new FileInputStream("KortNummer")))   {
        nextNr= inn.readInt();
        inn.close();
        return nextNr;
    }
    catch(FileNotFoundException fnfe)   {
        skrivMld("Fant ingen tidligere registrerte kort. Starter nytt kortregister.");
        nextNr= 000;
        return nextNr;
    }
    catch(EOFException eofe)    {
        System.out.println("End of file");
    }
    catch(IOException ioe)  {
        skrivMld("Feilmelding: IO Exception");
    }
    return nextNr;
}

public void writeCardNr()    {
    try(DataOutputStream ut= new DataOutputStream(new FileOutputStream("KortNummer"))){
        ut.writeInt(cardNr);
    }
    catch(IOException ioe)  {
        skrivMld("Problem med skriving til fil.");
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T12:48:40.220

序列化不会持久化静态变量的值。因此，当再次加载该类时，将设置默认值（静态整数为零）。要保留该值，请将变量设为对象级别。

如果您仍想保留静态变量的值，则需要使用`private void readObject(ObjectInputStream)`和提供自定义序列化`private void writeObject(ObjectOutputStream)`

**注意：**用对象序列化静态变量（通过提供自定义序列化）可能会导致问题。

想一想这样的场景：您创建一个 Card 对象并将其序列化。静态计数器将是`1`。您创建另一个卡片对象并将其序列化。静态计数器将是`2`。因此，您创建了 10 个对象并序列化了每个对象。静态计数器将是`10`。因此，除非您反序列化最后一个对象，否则您将无法获得正确的计数器值。

为了避免这个问题并仍然存储卡片的数量，您可以创建一个包装类`Cards`

```
public class Cards implements Serializable    {
    private List<Card> cardList = new ArrayList<Card>();
    // getter and setter

} 
```

在开始时首先加载（反序列化）`Cards`对象。每当您创建`Card`对象时，将其添加到`Cards`( `cardList`) 并序列化该`Cards`对象。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-23T12:49:32.527

计数器是*静态*的。因此它不是任何 Card*实例*状态的一部分，并且序列化所有卡片不会保存计数器的值。

要么保存这个计数器值，重新加载它并明确重置它，要么在启动时从所有反序列化卡中获取最大的 ID，然后将计数器重置为这个最大值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T12:50:05.880

静态成员没有被序列化。它们属于类，而不是正在序列化的类的实例。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-23T12:58:24.453

`static fields`仅`static`在 ie 范围内，`one JVM`如果您停止执行，他们将失去其`scope and data.`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T12:54:13.023

当程序关闭并重新启动时，静态不会保存/保留该值。static 修饰符用作类级别变量，其值在任何新对象创建过程中都保持不变，并且这些对象也可以通过类级别访问该静态值。例如

```
public class A{
public static int val = 0;
public int verify = 0;
public A(){
val++;
}
}

A a = new A();      // val = 1
A b = new A();      // val = 2
A c = new A();      // val = 3

a.verify = A.val;   // val = 3
b.verify = A.val;   // val = 3
c.verify = A.val;   // val = 3 
```

现在要保留该静态值，您应该将其保存到某个文件或数据库中，并在应用程序重新启动时，根据需要从那里初始化该静态值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T12:58:49.473

根据 Java 规范，静态变量不是实例的一部分，而是类级别的一部分。当你序列化数据时，你只为 Object 而不是 Class，所以静态不会被持久化。

重新启动后重新加载类时，它会加载变量的默认值。

# python - 在 python 中使用 Timer 时出错？

> ID：16169713
> 
> 赞同：2
> 
> 时间：2013-04-23T12:45:39.673
> 
> 标签：python, python-3.x

我想为我正在创建的游戏创建一个假的加载栏，我尝试使用这样的 timer 命令：

```
def loading(time):
    print("loading "+str(time)+"%..")
t = Timer(1.0, loading(0))
t.start()
a = Timer(3.0, loading(10))
a.start() 
```

但它不起作用（它应该在 1 秒后打印加载 0% 并在三秒后加载 10% 但它会立即打印它们）并且它给出了这个错误：

```
Exception in thread Thread-1:
Traceback (most recent call last):
File "H:\Python\python\App\lib\threading.py", line 736, in _bootstrap_inner
self.run()
File "H:\Python\python\App\lib\threading.py", line 942, in run
self.function(*self.args, **self.kwargs)
TypeError: 'NoneType' object is not callable 
```

你能给我建议一些解决这个问题的方法或其他方法吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T12:46:30.863

`loading(0)`立即调用加载。

```
t = Timer(1.0, lambda: loading(0)) 
```

应该解决您的问题。这只是创建一个`lambda`（匿名函数）被调用，而不是调用你的函数。

# java - 流口水java更新

> ID：16169715
> 
> 赞同：0
> 
> 时间：2013-04-23T12:45:44.467
> 
> 标签：java, drools

我是流口水的新手，请帮助我理解如果我在调用触发所有规则后更新对象，它会像在流口水文件中那样触发规则吗？

喜欢

```
rule "Hello World"
no-loop true
when
    message:Message (type=='Hello')
then
    modify(message){
        setType("Hi")//Fires other rule below
    }
    message.setMsgtext("Msg: Hello World, Drools");
    System.out.println("Hello World, Drools!");
end

rule "Hi World"
when
    message:Message (type=='Hi')
then
    modify(message){
        setType("Hello")
    }
    System.out.println("Hi World, Drools!");
end 
```

而在 JAVA 代码中，

```
Message msg = new Message();
msg.setType("Hello");
//sessionObject = rbase.newStatefulSession();
sessionObject.insert(msg);
sessionobject.fireAllrules();
msg.setType("Hi"); //Here can it fire the rule? for me its not doing it 
```

如果它没有触发，Drool 引擎是否将 msg 保留为与 Java 运行时对象完全不同的会话对象，因此它不受影响。如果不是背后的概念，请帮助我理解

谢谢查克里

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T13:54:35.540

规则不会对您的更改做出反应。Drools 不会保留对象的不同“副本”，它只是不会评估规则。如果你想让口水知道你的修改，你必须使用 sessionObject.update()。然后不要忘记再次触发AllRules()。您的代码应类似于以下内容：

```
Message msg = new Message();
msg.setType("Hello");
//sessionObject = rbase.newStatefulSession();
FactHandle handle = sessionObject.insert(msg);
sessionobject.fireAllrules();
msg.setType("Hi");
sessionObject.update(handle, msg) // rules are re-evaluated here
session.fireAllRules(); // fire any pre-activated rule 
```

希望能帮助到你，

# php - 登录后Joomla更改链接

> ID：16169721
> 
> 赞同：0
> 
> 时间：2013-04-23T12:45:58.787
> 
> 标签：php, joomla, joomla2.5

我正在使用 joomla 2.5，我试图在 joomla 登录后重定向我的组件。

*   登录后在个人资料页面上的 joomla 默认重定向，我需要更改此设置以在我的组件上重定向。

joomla admin 中是否有任何可用设置？

可以直接在该链接上重定向。

如果有任何想法，请提供帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:02:43.817

假设您有登录模块 [mod_login]？只需进入模块管理器下的登录模块。

在右侧，您有“登录重定向页面”。您可以在那里选择任何页面。如果您的组件不在列表中，只需在菜单管理器中为其创建一个菜单。

# apache-flex - Adobe Flex Style Explorer 示例应用程序在哪里

> ID：16169722
> 
> 赞同：1
> 
> 时间：2013-04-23T12:46:00.677
> 
> 标签：apache-flex, styles, explorer

我已经有一段时间没有检查它了，但现在我需要维护一些旧的 flex 2/3 代码（我需要更新一些颜色和样式）。

问题是我确实将 Adob​​e 的 Flex 2 Style Explorer 展示应用程序添加了书签，但我再也无法访问它了。

请有人帮忙并提供有效的链接。

旧链接是[http://examples.adobe.com/flex2/consulting/styleexplorer/Flex2StyleExplorer.html#/](http://examples.adobe.com/flex2/consulting/styleexplorer/Flex2StyleExplorer.html#/)

非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T21:25:21.800

我有 Flex 2 风格资源管理器的源代码，我曾在它处于活动状态时下载过一次。看一下这个。

[Flex2StyleExplorer 源 Zip](https://dl.dropboxusercontent.com/u/48296625/FlexExplorer/Flex2StyleExplorer.zip)

还在网络档案中找到了 Flex 3 风格的资源管理器。

[Flex 3 Style Explorer 的 Web 档案](http://web.archive.org/web/20120516031743/http://examples.adobe.com/flex3/consulting/styleexplorer/Flex3StyleExplorer.html)

[Flex 3 组件资源管理器](http://web.archive.org/web/20120918204503/http://examples.adobe.com/flex3/componentexplorer/explorer.html)

[Flex 2 PrimitiveExplorer](http://www.flexibleexperiments.com/Flex/PrimitiveExplorer/Flex2PrimitiveExplorer.html)

希望对你有帮助

# python - 在 2.6 上合并 n 字典和添加值的最快方法

> ID：16169723
> 
> 赞同：9
> 
> 时间：2013-04-23T12:46:05.913
> 
> 标签：python, python-2.6

我有一个字典列表，我想将它们合并到一个字典中，并将每个字典中的值添加到列表中。例如：

```
ds = [{1: 1, 2: 0, 3: 0}, {1: 2, 2: 1, 3: 0}, {1: 3, 2: 2, 3: 1, 4: 5}] 
```

最终结果应该是一个字典：

```
merged = {1: 6, 2: 3, 3: 1, 4: 5} 
```

我对性能很感兴趣，并且正在寻找可以将 n 字典列表合并到一个字典中并对值求和的最快实现。一个明显的实现是：

```
from collections import defaultdict

merged = defaultdict(int)

for d in ds:
    for k, v in d.items():
        merged[k] += v 
```

在 Python 2.6 中有没有更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T12:48:36.123

`defaultdict`仍然是最快的，我找到了一些通过缓存函数名称来加速它的方法，现在刚刚找到了另一种显着加快速度的方法，只需迭代`for k in d`而不是使用`d.items()`or`d.iteritems()`

到目前为止的一些时间安排：

```
from random import randrange
ds = [dict((randrange(1, 1000), randrange(1, 1000)) for i in xrange(500))
      for i in xrange(10000)]

# 10000 dictionaries of approx. length 500

from collections import defaultdict

def merge1(dicts, defaultdict=defaultdict, int=int):
    merged = defaultdict(int)
    for d in dicts:
        for k in d:
            merged[k] += d[k]
    return merged

def merge2(dicts):
    merged = {}
    merged_get = merged.get
    for d in dicts:
        for k in d:
            merged[k] = merged_get(k, 0) + d[k]
    return merged

def merge3(dicts):
    merged = {}
    for d in dicts:
        for k in d:
            merged[k] = merged[k] + d[k] if k in merged else 0
    return merged

from timeit import timeit
for func in ('merge1', 'merge2', 'merge3'):
    print func, timeit(stmt='{0}(ds)'.format(func),
                       setup='from __main__ import merge1, merge2, merge3, ds',
                       number=1) 
```

* * *

```
merge1 0.992541510164
merge2 1.40478747997
merge3 1.23502204889 
```

# javascript - Rapahel js在某些区域隐藏元素

> ID：16169727
> 
> 赞同：0
> 
> 时间：2013-04-23T12:46:14.617
> 
> 标签：javascript, jquery, html, svg, raphael

伙计们请看这个链接，[http://www.logolenses.com/](http://www.logolenses.com/) 我正在做一些与此非常相似的事情，使用 raphael js 而不是 html5 画布。如果我们检查站点，我们可以看到，在左侧框架添加一个项目后，当我们拖动到框架的右侧时，它不会通过其他可自定义的区域显示。我无法用 raphael 达到同样的效果，尝试了 toBack() 和 toFront() 方法但没有用。谁能帮我？谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T23:39:13.040

所以你似乎在说的是：

*   你有两个区域作为框架，彼此相邻。
*   形状可以拖到这些框架中，并位于框架后面
*   当您将一个对象拖向中间时，它位于两个框架的后面，它同时显示在两个框架中，因为它们都是同一个纸对象的一部分。
*   您希望两个帧彼此独立，因此一个图像不能“溢出”并显示在另一个帧中。

那么你为什么不把每一帧都放在它自己独立的纸上呢？如果你想让每个都作为一个独立的区域，为什么不把它们变成独立的区域呢？

在 Raphael 中定义为纸张的区域按宽度和高度在其定义的边界上裁剪，隐藏边界外的任何内容。此剪辑似乎正是您想要的。

你如何重构来做到这一点取决于你。一种非常简单的方法是这样的：

```
function makeLens( id, width, height ){
   var paper = Raphael(id, width, height);
   var buttons = // find or place the buttons for this lens based on the id

   // the rest of your code

}
makeLens( 'left-lens', 500, 500 );
makeLens( 'right-lens', 500, 500 ); 
```

... 使用 HTML / CSS，例如：

```
<style>
   .lens { width: 500px; height: 500px; float: left; }
</style>
<div id="left-lens" class="lens"> </div>
<div id="right-lens" class="lens"> </div> 
```

# c# - 不能在 C# 中使用引用的 DLL

> ID：16169729
> 
> 赞同：5
> 
> 时间：2013-04-23T12:46:21.290
> 
> 标签：c#, dll

`.dll`我已经添加了对我的项目和解决方案文件的外部的引用，我可以`References`在解决方案资源管理器窗口的节点下看到它，但是我在语句中尝试使用它时找不到它`using dllfilename`，所以我基本上可以' t 使用图书馆。当我转到对象浏览器时 - 我找到了项目的命名空间和它的类/方法，但我看不到引用的库或至少它的命名空间或其他任何东西......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T13:15:34.457

VS2010 有一个错误。解决方案很简单：项目 -> 属性 -> 应用程序选项卡 -> 将目标框架更改为“.NET Framework 4”，而不是默认选择的客户端配置文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-23T12:50:31.197

你不需要使用`using dllfilename`. 正确的用法是`using NamespaceThatIsAccessibleFromDll;`。一旦你这样做了，你就可以使用出现在这个命名空间中的公共类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T12:57:11.597

尝试项目，属性；如果您有 .NET Framework 4（客户端配置文件）（或 4.5 客户端配置文件），则在目标框架下的应用程序选项卡中将其更改为没有*客户端配置文件*的适当版本。这让我好几次了——而且我并不孤单——

[看不到命名空间](https://stackoverflow.com/questions/4880685/visual-studio-2010-suddenly-cant-see-namespace)

# c# - 移动到接口的（DataSource）实现方法的热键

> ID：16169731
> 
> 赞同：1
> 
> 时间：2013-04-23T12:46:29.413
> 
> 标签：c#, windows-phone-7, resharper, mvvm-light

我正在使用`MVVMLight`和`IOC datasource approach`。问题是当我需要跳转到方法实现时（比如`dataService.GetData()`）时，我正在按下`F12`，然后跳转到接口本身。

问题是：是否有任何技巧或热键来选择实现类（设计时或实时）并快速跳转到方法？也许在Resharper？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:52:43.583

将光标放在 上`GetData`，执行`Alt`+ `End`。这是 VS 方案中的默认键绑定`ReSharper | Navigate | Derived Symbols`。它也可以在`Navigate To`上下文菜单中找到，使用`Alt`+访问```。

# html - 如何将我的 div 垂直对齐另一个 div 并将它们并排放置？

> ID：16169732
> 
> 赞同：0
> 
> 时间：2013-04-23T12:46:30.490
> 
> 标签：html

我在另一个 div 中有三个 div。

```
<div id="parentDiv" style="float:right;">
   <div id="childDiv1" style="float:left;">
       <b>Text1</b>
   </div>
   <div id="childDiv2" style="float:left;">
       <img src="smiley.gif" alt="Smiley face" height="42" width="42">
   </div>
   <div id="childDiv3" style="float:left;">
       <input type='checkbox' />
   </div>
<div> 
```

我需要它们并排出现，所以我将它们设置为`float:left`.

问题是它们看起来像这样......

![布局图像不正确](https://i.stack.imgur.com/iQw6r.png)

...文本在顶部垂直对齐。我需要它在中间。

**注意**我发现了一篇关于一个[非常相似的问题](https://stackoverflow.com/questions/7446077/how-to-vertically-align-div-inside-another-div-without-displaytable-cell)的帖子，但似乎浮动会导致它失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:01:52.453

使用以下代码：（我建议您尽可能避免使用表格）

```
<div id="parentDiv" style="float:right;">
   <div id="childDiv1" style="float:left; line-height: 42px;">
       <b>Text1</b>
   </div>
   <div id="childDiv2" style="float:left;">
       <img src="smiley.gif" alt="Smiley face" height="42" width="42">
   </div>
   <div id="childDiv3" style="float:left; line-height: 42px;">
       <input type='checkbox' />
   </div>
<div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:59:32.410

您可以使用表格轻松实现这一目标

```
 <table>
            <tr>
                <td> <b>Text1</b></td>
                <td><img src="smiley.gif" alt="Smiley face" height="42" width="42"></td>
                <td><input type='checkbox' /></td>
            </tr>
        </table> 
```

或者你真的需要坚持使用 div 吗？希望这可以帮助。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T13:04:33.593

如果你真的需要 DIV，你可以使用“ ***display: inline;*** ”来代替***float***。然后***垂直对齐：中间；***使元素居中。

```
 <div id="parentDiv" style=" ">
       <div id="childDiv1" style="display: inline-block; vertical-align: middle;">
           <b>Text1</b>
       </div>
       <div id="childDiv2" style="display: inline-block; vertical-align: middle;">
           <img src="smiley.gif" alt="Smiley face" height="42" width="42">
       </div>
       <div id="childDiv3" style="display: inline-block; vertical-align: middle;">
           <input type='checkbox' />
       </div>
    </div> 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T12:48:41.503

为了让它们并排出现，您不需要它们浮动，只需将它们设置为原样即可。至于图像，只需为其添加一个 CSS 属性：`vertical-align:middle`它应该将它与文本的中间对齐。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-23T12:55:22.873

所有 'div' 内所有元素的 'line-height' 必须相等

# r - 从时间序列中选择日期范围

> ID：16169736
> 
> 赞同：2
> 
> 时间：2013-04-23T12:46:41.457
> 
> 标签：r

我有一个从 10 月到 2 月的时间序列对象。下面我向您展示它的一些价值。

```
1995-10-13 04:00:00 460.5
1995-10-13 05:00:00 549.9
1995-10-13 06:00:00 648.8
1995-10-13 07:00:00 684.4
1995-10-13 08:00:00 652.3
1995-10-13 09:00:00 629.8
1995-10-13 10:00:00 582.6
1995-10-13 11:00:00 565.5
1995-10-13 12:00:00 543.5
1995-10-13 13:00:00 542.8 
```

在这个范围内，我想选择每天 10:00 到 15:00 的时间间隔，并将其存储到一个名为“中午”值的变量中。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:55:55.080

您可以`xts`用于时间序列分析。`xts`提供了对时间序列数据进行子集化的便捷方法。为了。例如。

```
txt <- '1995-10-13 04:00:00 460.5
1995-10-13 05:00:00 549.9
1995-10-13 06:00:00 648.8
1995-10-13 07:00:00 684.4
1995-10-13 08:00:00 652.3
1995-10-13 09:00:00 629.8
1995-10-13 10:00:00 582.6
1995-10-13 11:00:00 565.5
1995-10-13 12:00:00 543.5
1995-10-13 13:00:00 542.8'

DF <- read.table(text = txt, stringsAsFactors = FALSE)

xts(DF$V3, as.POSIXct(paste(DF$V1, " ", DF$V2)))
##                      [,1]
## 1995-10-13 04:00:00 460.5
## 1995-10-13 05:00:00 549.9
## 1995-10-13 06:00:00 648.8
## 1995-10-13 07:00:00 684.4
## 1995-10-13 08:00:00 652.3
## 1995-10-13 09:00:00 629.8
## 1995-10-13 10:00:00 582.6
## 1995-10-13 11:00:00 565.5
## 1995-10-13 12:00:00 543.5
## 1995-10-13 13:00:00 542.8

XTS <- xts(DF$V3, as.POSIXct(paste(DF$V1, " ", DF$V2)))
XTS
##                      [,1]
## 1995-10-13 04:00:00 460.5
## 1995-10-13 05:00:00 549.9
## 1995-10-13 06:00:00 648.8
## 1995-10-13 07:00:00 684.4
## 1995-10-13 08:00:00 652.3
## 1995-10-13 09:00:00 629.8
## 1995-10-13 10:00:00 582.6
## 1995-10-13 11:00:00 565.5
## 1995-10-13 12:00:00 543.5
## 1995-10-13 13:00:00 542.8

XTS["T10:00:00/T15:00:00"]
##                      [,1]
## 1995-10-13 10:00:00 582.6
## 1995-10-13 11:00:00 565.5
## 1995-10-13 12:00:00 543.5
## 1995-10-13 13:00:00 542.8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:02:29.897

你有一个 xts 对象。此解决方案是，如果您首先将数据放在数据框中，我会这样做，使用`strptime`从小时字符向量中提取小时数，然后进行一些逻辑子集

```
df <- read.table( text = "1995-10-13 04:00:00 460.5
1995-10-13 05:00:00 549.9
1995-10-13 06:00:00 648.8
1995-10-13 07:00:00 684.4
1995-10-13 08:00:00 652.3
1995-10-13 09:00:00 629.8
1995-10-13 10:00:00 582.6
1995-10-13 11:00:00 565.5
1995-10-13 12:00:00 543.5
1995-10-13 13:00:00 542.8
")
colnames(df) <- c( "Day" , "Hour" , "Value" )

hours <- strptime( df$Hour , format = "%H:%M:%S")$hour
df$Midday <- hours >= 10 & hours <= 15
df

          Day     Hour Value Midday
1  1995-10-13 04:00:00 460.5  FALSE
2  1995-10-13 05:00:00 549.9  FALSE
3  1995-10-13 06:00:00 648.8  FALSE
4  1995-10-13 07:00:00 684.4  FALSE
5  1995-10-13 08:00:00 652.3  FALSE
6  1995-10-13 09:00:00 629.8  FALSE
7  1995-10-13 10:00:00 582.6   TRUE
8  1995-10-13 11:00:00 565.5   TRUE
9  1995-10-13 12:00:00 543.5   TRUE
10 1995-10-13 13:00:00 542.8   TRUE 
```

正如@geektrader 所建议的那样使用 xts 可能更适合您的需求，因为它是为时间序列分析而构建的。

# java - 我需要 Java 和 Javascript 的特定正则表达式模式

> ID：16169737
> 
> 赞同：3
> 
> 时间：2013-04-23T12:46:42.927
> 
> 标签：java, javascript, regex

我需要一个具有以下条件的正则表达式：

*   最少 5 个字符，没有最多字符（只有字母和数字）
*   必须包含至少 4 个字母
*   必须包含至少 1 个数字

例如正确结果：root1 1root ro1ot Roo11t 等...

目前我有模式`^(?=.*\d{1,})(?=.*[a-zA-Z]{4,}).{5,}$`

但这似乎也接受特殊字符......？

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T12:51:46.273

`.{5,}`这就是为什么它允许特殊字符（点 = 一切（实际上除了换行符等））。将其更改为`[a-z0-9]{5,}`或任何您想要的。

注意：`(?=.*\d{1,})(?=.*[a-zA-Z]{4,})`只检查第 2 和第 3 个要求，但不要说任何关于角色的通缉性质。

**编辑：**
其他问题：您的规范说“至少 4 个字母”，但您的正则表达式说“4 个连续字母”。另外，使用[惰性](http://www.regular-expressions.info/repeat.html)量词。

```
/^(?=.*?\d)(?=(?:.*?[a-z]){4})[a-z0-9]{5,}$/i 
```

`(?=.*?\d)`=>你不需要检查超过1个数字，一旦你找到它，停止。
`(?=(?:.*?[a-z]){4})`=> 改为查找 4 个字母，但不连续。此外，在末尾添加了一个不区分大小写的修饰符`i`（在 JS 中，在 Java 中您不会以相同的方式声明它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:05:11.977

我知道这很丑陋，但这似乎有效：

```
^[a-zA-Z0-9]*(([a-zA-Z]{4,}\d)|([a-zA-Z]{3,}\d[a-zA-Z]+)|([a-zA-Z]{2,}\d[a-zA-Z]{2,})|([a-zA-Z]+\d[a-zA-Z]{3,})|(\d[a-zA-Z]{4,}))[a-zA-Z0-9]*$ 
```

# ruby - 在 Windows 8 上安装 Watir 时出错

> ID：16169742
> 
> 赞同：2
> 
> 时间：2013-04-23T12:46:46.350
> 
> 标签：ruby, windows-8, watir

嗨，我正在尝试安装 Watir。我已经安装了 Ruby 并更新了 RubyGem 管理器。当我尝试安装 watir (Windows 8 64bit) 时，我得到以下信息：

```
C:\devkit>gem install watir
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
ERROR:  Error installing watir:
        ERROR: Failed to build gem native extension.

    C:/Ruby200-x64/bin/ruby.exe extconf.rb
checking for ffi.h... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of necessary
libraries and/or headers.  Check the mkmf.log file for more details.  You may
need configuration options.

Provided configuration options:
        --with-opt-dir
        --without-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=C:/Ruby200-x64/bin/ruby
        --with-ffi_c-dir
        --without-ffi_c-dir
        --with-ffi_c-include
        --without-ffi_c-include=${ffi_c-dir}/include
        --with-ffi_c-lib
        --without-ffi_c-lib=${ffi_c-dir}/
        --with-libffi-config
        --without-libffi-config
        --with-pkg-config
        --without-pkg-config
C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:431:in `try_do': The compiler failed to generate an executable
 file. (RuntimeError)
You have to install development tools first.
        from C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:562:in `try_cpp'
        from C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:1041:in `block in have_header'
        from C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:892:in `block in checking_for'
        from C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:337:in `block (2 levels) in postpone'
        from C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:307:in `open'
        from C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:337:in `block in postpone'
        from C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:307:in `open'
        from C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:333:in `postpone'
        from C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:891:in `checking_for'
        from C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:1040:in `have_header'
        from extconf.rb:16:in `<main>'

Gem files will remain installed in C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/ffi-1.8.1 for inspection.

Results logged to C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/ffi-1.8.1/ext/ffi_c/gem_make.out 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T13:55:37.110

你有正确版本的 devkit 吗？看起来你需要`Ruby 2.0.0 x64 (64bits): mingw64-64-4.7.2`来自[http://rubyinstaller.org/downloads/](http://rubyinstaller.org/downloads/)

# html - 如何将 HTML 页面保存为一个文件？

> ID：16169744
> 
> 赞同：28
> 
> 时间：2013-04-23T12:46:48.173
> 
> 标签：html, save, archive, webarchive

我希望能够将 HTML 页面保存/存档为一个文件（没有那些讨厌的外部文件夹）。

我希望生成的文件包含所有样式、图像和链接（视频和 Flash 也不错，但不是那么重要）。

我希望生成的文件是可搜索和可编辑的。

微软的 MHT 就是这样的工具之一，但不幸的是，它在 Linux 下是不可搜索的。MHT很好，但我不想被锁定在一个操作系统或一个公司下。什么是一个好的选择——或者也许有一些我没有考虑过的完全不同的解决方案？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-12-15T14:52:27.387

SingleFile [chrome 扩展](https://chrome.google.com/webstore/detail/singlefile/mpiodijhokgodhhofbcjdecpffjipkle?hl=en)是一个很好的解决方案。

我还编写了自己的 python 工具来解决这个问题，我建议尝试一下： [https ://github.com/zTrix/webpage2html](https://github.com/zTrix/webpage2html)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-10-10T22:18:20.617

通过切换 chrome://flags 页面上的“将页面另存为 MHTML”选项，支持在当前版本的 Google Chrome 中查看和创建 MHTML 文件。

在你的 url 框中输入 chrome://flags

但是，启用此实验性选项会禁用将页面保存为纯 HTML 或 HTML 完整文件。从 chrome://flags 页面：

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-09-22T14:34:52.180

扩展 zTrix 的答案，我建议避免使用 Chrome 扩展（这对我根本不起作用），而是使用以下选项之一：

*   Node.js：[remy 的内联](https://github.com/remy/inliner)
    *   易于安装使用`npm`
    *   许多选项，包括用于禁用缩小/压缩、维护外部图像、跳过视频等的标志。
    *   [警告：（2017 年 9 月 22 日）在编译Slate 构建](https://github.com/lord/slate)时未能保持样式和 JavaScript 功能。这不会直接影响大多数人，但这意味着内联可能会与其他页面有问题。看到[这个问题](https://github.com/remy/inliner/issues/158)
    *   警告：没有“不理会”的选项：将缩小/丑化 CSS/JS 或美化，但不会简单地将原始源代码嵌入 HTML。
*   Python 2：[zTrix 的webpage2html](https://github.com/zTrix/webpage2html)
    *   比内联更保守；适用于大多数情况。
    *   zTrix 修复了一个错误（内联器似乎也有），它在编译[Slate 构建](https://github.com/lord/slate)时确保 JavaScript/CSS 功能。看到[这个问题](https://github.com/zTrix/webpage2html/issues/33)。*（2017 年 9 月 29 日更新）*
    *   可以相对轻松地[转换为 Python 3](https://github.com/afeique/compyler)
    *   警告：无法处理 CSS`@import`

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-05-02T10:07:12.663

通常，可以创建一个包含他所有常见子文件（css、jpg、js、svg...）
的 HTML 文件，您必须通过替换“ `src`”属性值、“ `url()`”函数和插入 HTML 标记来重写 HTML 文件比如 " `<script></script>`" 用于 JavaScript 文件，" `<style></style>`" 用于 CSS 文件， " `<svg></svg>`" 用于 SVG 图像。

例如，由“ `url()`”函数调用的 CSS 中的 GIF 图像文件。

1.  从他的 URL 下载图像。
2.  将此图像编码为 Base64。
3.  用 Base64 编码的 GIF 图像替换 " `url('https://en.wikipedia.org/wiki/File:TPB_Magnet_Icon.gif')`" 为 " `url('data:image/gif;base64,R0lGODlhDAAMALMPAOXl5ewvErW1tebm5oocDkVFRePj47a2ts0WAOTk5MwVAIkcDesuEs0VAEZGRv///yH5BAEAAA8ALAAAAAAMAAwAAARB8MnnqpuzroZYzQvSNMroUeFIjornbK1mVkRzUgQSyPfbFi/dBRdzCAyJoTFhcBQOiYHyAABUDsiCxAFNWj6UbwQAOw')`"，前缀为 " `data:image/gif;base64,`"

你可以对“ `src`”属性的值做同样的事情。此解决方案可用于其他二进制文件。您必须调整正确的“ `data`”前缀以对应于编码对象。

# android - ListViewAdaper，项目不重绘取决于处理 getView(XXX)

> ID：16169746
> 
> 赞同：0
> 
> 时间：2013-04-23T12:46:55.370
> 
> 标签：android, listview

我正在构建几个自定义 ListViews，其中包含在单击时展开的 listViewItems。我做了我的第一个没有大麻烦，并且 listViewItems 在点击时正确展开。

现在我正在构建另一个 ListView，不同之处在于它包含不止一种项目，因此我发现让 adaper 包含视图列表而不是数据列表并在提示时创建视图很方便getView(XX) 为他们服务。

一切正常，除了新列表中的项目在我来回交换活动以重绘之前不会扩展。我已经测试模仿第一个列表视图中的实现（有几个缺点），这样可以让它们正确重绘。

主要区别是这两条线，第一条有效，第二条不重绘。

```
return new TransactionChild(context, attrs, transactions.get(position)); 
```

.

```
return (View) children.get(position); 
```

解决此问题的最佳方法是什么？尝试在整个列表上强制重绘（在展开视图时将其余部分向下移动......）？还是我可以用 ListView 或适配器做一些更整洁的事情？

帮助会很棒：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:14:50.173

您可以使用 ExpandableListView ，其中组没有任何子级并且在组打开和关闭时具有不同的布局。

如果使用普通的 ListView，我建议您使用 Adapter 的 getItemViewType() 方法，因此您可以保持正常的项目列表并单击，然后在 getView 上检查类型并更改布局。在单击侦听器上，您可以更改单击的项目的类型并通知更改的数据。

# android - android - 检测流音量变化

> ID：16169747
> 
> 赞同：1
> 
> 时间：2013-04-23T12:47:04.927
> 
> 标签：android, android-audiomanager

在我的应用程序中，我有一个`VerticalSeekBar`（一些自定义实现`SeekBar`）当用户使用硬件按钮更改媒体音量时，谁的进度应该改变。以下是使用 的半工作解决方案`ContentObserver`：

```
 public class SettingsContentObserver extends ContentObserver {

     private VerticalSeekBar sb;
     private AudioManager am;

public SettingsContentObserver(Handler handler, VerticalSeekBar sb, AudioManager am) {
    super(handler);
    this.sb = sb;
    this.am = am;

}

@Override
public boolean deliverSelfNotifications() {
    return super.deliverSelfNotifications();
}

@Override
public void onChange(boolean selfChange) {
    super.onChange(selfChange);
    sb.setProgress(am.getStreamVolume(AudioManager.STREAM_MUSIC));

}
    } 
```

活动：

```
 @Override
protected void onResume() {
    super.onResume();
    mSettingsContentObserver = new SettingsContentObserver( new Handler(), vBar, audioMan ); 
    this.getApplicationContext().getContentResolver().registerContentObserver( 
        android.provider.Settings.System.CONTENT_URI, true, 
        mSettingsContentObserver );

} 
```

问题：检测到音量变化但有几秒钟的延迟，直到它们被检测到并且`SeekBar`进度发生变化。

问题：是否有更可靠的方法来监听特定音量流的音量变化？请分享你的解决方案，以防你有一些

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-28T18:06:37.887

我已经制定了一个在通话时监控音量的解决方案，所以这应该是相似的。

您可以在活动中监听按键（onKey）并检查相应的键码（VOLUME_UP 或 VOLUME_DOWN）。

或者，如果您由于某种原因（某些远程视图）无法监听关键事件，只需以足够快的频率轮询音量级别：

1.  用于`am.getStreamVolume(AudioManager.STREAM_MUSIC)`轮询音量级别。

2.  以您想要的频率运行它。例如：

    ```
     private Runnable mVolumeUpdateRunnable = new Runnable() {
        public void run() {
            if (shouldUpdate)
            {
                    updateCurrentVolume();
                    new Handler().postDelayed(mVolumeUpdateRunnable, VOLUME_SAMPLING_DELAY);
            }
        }
    }; 
    ```

这些调用并不昂贵，因此高频更新应该不是什么大问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T06:23:41.467

高频轮询流卷增加 cpu 使用率，在我的情况下是 14%

# html - 在 Bootstrap 导航栏中创建登录表单

> ID：16169750
> 
> 赞同：1
> 
> 时间：2013-04-23T12:47:09.617
> 
> 标签：html, css, twitter-bootstrap

我想在 Bootstrap 导航栏中添加两件事：

“记住我”复选框和忘记密码链接。我设法做了复选框，但链接没有正确放置：

[http://jsfiddle.net/wusMf/1/](http://jsfiddle.net/wusMf/1/)

```
<label class="checkbox">
<input type="checkbox" value="remember-me"> Remember me
</label>
<a class="help-block" href="#">Forgot password?</a> 
```

我可以修复它，但我想使用 Bootstrap 功能来完成它，也许使用复选框 CSS？除了填充和边距，我什么也没看到......

谢谢你的帮助

TL;DR 我需要将链接放在密码字段下，比如复选框！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T13:11:40.883

您的标签和链接都采用块样式。

要解决这个问题：

(1) 将您的复选框标签和链接包装在一个字段集中。

(2) 对于链接，更改`class="help-block"`为`class="help-inline"`。

(3) 对于标签，添加类“内联”（例如，`class="checkbox inline"`.

代码：

```
<fieldset>
    <label class="checkbox inline">
        <input type="checkbox" value="remember-me"> Remember me
    </label>
    <a class="help-inline" href="#">Forgot password?</a>
</fieldset> 
```

# javascript - jQuery没有将类应用于列表项

> ID：16169751
> 
> 赞同：-1
> 
> 时间：2013-04-23T12:47:14.240
> 
> 标签：javascript, jquery, list, class

[这是我的页面。](http://cookware.lecreuset.com/cookware/content_cast-iron-guide-sizes_10151_-1_20002)

它是由第 3 方开发的，我将它插入到我们的 CMS 中。每当我尝试以任何方式更新页面时——即使是像更改 URL 这样简单的操作，当您单击加号时，模式中的列表项也会停止填充。

应该发生的是，每个模态窗口都有小图标出现在（当前为空的）橙色条上，当您将鼠标悬停在图标上时，下面的内容会发生变化。它看起来像这样![](https://i.stack.imgur.com/jm6fl.jpg)，代码看起来像这样：

```
 <ul class="size_banner">                                
            <li><a class="size_1 selected" title=""></a></li> 
            <li><a class="size_2" title=""></a></li> 
            <li><a class="size_3" title=""></a></li>
            <li><a class="size_4" title=""></a></li>
            <li><a class="size_5" title=""></a></li>
            <li><a class="size_6" title=""></a></li>
            <li><a class="size_7" title=""></a></li>
            <li><a class="size_8" title=""></a></li>
            </ul> 
```

有一次，我发现如果我在文本编辑器中编辑页面，而不是直接在 CMS 中编辑，然后复制新代码，它会起作用。但是，它再次不起作用！Firebug 控制台或 Chrome 中没有错误。[我把 jQuery 放在了一个小提琴](http://jsfiddle.net/VDsDe/)中，尽管当我尝试触发模式时出现错误。

[这是不同服务器上页面的工作版本](http://lizlantz.com/site/cast-iron-guide-sizes.html)。

我必须在明天上午之前修复页面，所以损坏的页面只会在今天生效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:42:56.813

好的，在将工作版本与非工作版本进行比较后，结果是 CMS 更改了正在呈现的实际 html。

跟剧本没关系。。

见[http://www.diffnow.com/?report=vknwc](http://www.diffnow.com/?report=vknwc)

左边是非工作代码，右边是工作代码（*仅适用于第一个尺寸*）。

您会注意到，在工作版本（*右侧*）中，每个`li`元素内部都有一个带有一些属性的空`a`标签。

您的 CMS 显然认为这些元素是无用的，因为它们是空的并将它们删除。

您将需要重新添加它们（*也许给它们一个`&nbsp`内部，这样它们就不会被视为空的*）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:24:25.117

我的假设，

```
<ul class="size_banner">
  <li> </li>
  <li> </li>
  <li> </li>
  <li> </li>
  <li> </li>
  <li> </li>
  <li> </li>
  <li> </li>
</ul> 
```

据我所知，这些 **“li”**标签假设那些小图像出现在模态中，所以你可以检查jquery的模态插件代码，图像src是否配置正确。

快乐编码:)

# java - Spring中通过Ajax调用获取Node对象

> ID：16169754
> 
> 赞同：0
> 
> 时间：2013-04-23T12:47:23.837
> 
> 标签：java, ajax, spring, jquery, xml-parsing

我正在使用带有 Ajax 的 Spring。通过 Ajax，我正在调用一个控制器方法，在该方法中我正在加载一个 xml 文件并对其进行解析。我想将解析的节点（对象）传递给 html 页面作为对 Ajax 调用的响应。

这是我的 Ajax 调用

```
$.ajax({
        url: "query1",
        type: "POST",
        //dataType: "xml",
        success: function(data) {
            alert("in jax response");
            alert("DATA" + data);
          // parseXml(data);
        }
    }); 
```

这是我的控制器方法

```
@RequestMapping(value = "/query1", method = RequestMethod.POST)
public @ResponseBody Node executeQuery1(ModelMap model) throws ParserConfigurationException, SAXException,IOException, XPathExpressionException {
        // Standard of reading a XML file
          DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
          factory.setNamespaceAware(true);
          DocumentBuilder builder;
          Document doc = null;
          XPathExpression expr = null;
          builder = factory.newDocumentBuilder();
          String filepath = "C:\\test.xml";
          System.out.println("PATH: " + filepath);
          doc = builder.parse(filepath);

          // Create a XPathFactory
          XPathFactory xFactory = XPathFactory.newInstance();

          // Create a XPath object
          XPath xpath = xFactory.newXPath();

        // Compile the XPath expression
          expr = xpath.compile("//person[@id=1]");
          // Run the query and get a nodeset
          Object result = expr.evaluate(doc, XPathConstants.NODE);

          // Cast the result to a DOM NodeList
          Node personNode = (Node) result;
          model.addAttribute("xmlnode", personNode);
          System.out.println("model set. going to return");
         return personNode;

    } 
```

如果我返回一个字符串而不是节点，我会收到警报弹出窗口。但是在返回节点对象时它失败了。

另外我想在 Javascript 中进一步解析这个节点。所以请让我知道最好的方法。我应该将节点转换为 XML 字符串并返回 XML 字符串吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:00:08.057

您可以为返回的对象使用 JSON 格式。例如，使用[Jackson JSON API](http://jackson.codehaus.org/)，您可以将对象转换为 JSON 格式并以字符串形式返回。或者，如果您想使用 XML，请将 Node 对象转换为 XML 表示形式并以字符串形式返回。使用 XML 作为字符串，您需要相应地在 AJAX 代码中对其进行解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:05:04.890

（我以前的版本假设您将 XML 从客户端传递到服务器）。

您不能按原样传递 DOM 节点。它不会使用该`toString`方法进行序列化。

要传递 DOM 子树，您需要将其解解析回 XML。[“Writing Out a DOM as an XML File”](http://docs.oracle.com/javase/tutorial/jaxp/xslt/writingDom.html)的 Java 教程页面有一个示例，它几乎可以完成您正在尝试做的事情。查找标题“写出 DOM 的子树”。（唯一的区别是您的代码使用 XPath 而不是 DOM API 来定位您想要的节点。）

或者，您可以通过遍历 DOM 树，将内容提取到新的（非 DOM）对象中，然后以某种方式序列化这些对象来“手动序列化”您的节点。例如，您可以构造 JSONObject/JSONArray 实例，然后序列化为 JSON。您在客户端得到的不是 XML。（这可能是件好事。）

# python - Python urllib2 未完成的下载文件

> ID：16169763
> 
> 赞同：0
> 
> 时间：2013-04-23T12:48:12.230
> 
> 标签：python, download, urllib2

此脚本从网站下载文件，并且在大文件中存在问题，因为丢失的数据包导致停止下载......这是代码：

```
def download(self):

    adres = r"http://example.com/100_MbFile.zip"
    local = adres.split('/')[-1].split('#')[0].split('?')[0]

    try:
        print "Przygotowanie do zapisania pliku " + local
        u = urllib2.urlopen(adres)
        f = open(local, 'wb')
        meta = u.info()
        file_size = int(meta.getheaders("Content-Length")[0])
        print("Downloading: {0} Bytes: {1}".format(adres, file_size))

        file_size_dl = 0
        block_sz = 8192
        while True:
            buffer = u.read(block_sz)
            if not buffer:
                break

            file_size_dl += len(buffer)
            f.write(buffer)
            p = float(file_size_dl) / file_size
            status = r"{0}  [{1:.2%}]".format(file_size_dl, p)
            status = status + chr(8)*(len(status)+1)
            sys.stdout.write(status)

        if file_size_dl == file_size:
            f.close() 
```

任何想法如何下载大文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:19:38.330

要在 Python 2 中下载和保存文件，您有几个选择...

你可以使用`urllib`： [http ://docs.python.org/2/library/urllib.html#urllib.urlretrieve](http://docs.python.org/2/library/urllib.html#urllib.urlretrieve)

这基本上做了你正在尝试的事情：

```
import urllib

filename = '100_MbFile.zip'
url = 'http://example.com/' + filename

urllib.urlretrieve(url, filename) 
```

...或者您可以使用`urllib2`, 并指定要读取的块大小（例如在您的示例代码中）。

```
import urllib2

filename = '100_MbFile.zip'
url = 'http://example.com/' + filename

req = urllib2.urlopen(url)
block_sz = 8192
with open(filename, 'wb') as f:
    while True:
        chunk = req.read(block_sz)
        if not chunk:
            break
        f.write(chunk) 
```

*   注意：在 Python 3 中，标准库已经过重新组织，这两个都可以在`urllib.request`： [http ://docs.python.org/3.0/library/urllib.request.html](http://docs.python.org/3.0/library/urllib.request.html)

# javascript - 缩放 D3 平行坐标图

> ID：16169772
> 
> 赞同：1
> 
> 时间：2013-04-23T12:48:54.060
> 
> 标签：javascript, d3.js, zooming, parallel-coordinates

我正在使用平行坐标来显示来自 csv 文件的数据。

我的应用程序需要修改在轴上显示数据的方法。对于轴上的每个值，我需要绘制一个点（例如：r=3 的圆）。当我在同一个轴上有重复的值时，我需要画一个相邻的圆圈，如下图所示：

![在此处输入图像描述](https://i.stack.imgur.com/U3kFm.png)

我的应用程序的另一个要求是在轴上提供缩放功能，以便我可以近距离查看特定点。

我在想的是，通过使用鼠标滚轮事件来改变轴的高度来放大和缩小，同时增加点之间的距离。

是否知道如何通过鼠标事件轮更改 ax 的高度来执行缩放，而无需在每次需要更改其高度时刷新页面？

# google-maps-api-3 - Google Maps JS API v3 - 简单的多标记+折线

> ID：16169775
> 
> 赞同：1
> 
> 时间：2013-04-23T12:49:01.847
> 
> 标签：google-maps-api-3, google-polyline

我一直在尝试扩展[此](https://stackoverflow.com/questions/3059044/google-maps-js-api-v3-simple-multiple-marker-example)示例以包含折线。到目前为止，我根本无法让它工作。我的代码目前如下所示：

```
function initialize() {
  var locations = [
      [12.239107980270559, 109.1947902572488, 'Nha Trang', 'Vietnam', '27/03/13', 1],                            
      [11.938864949999937, 108.43334708999994, 'Dalat', 'Vietnam', '28/03/13', 2],                            
      [10.76674113559709, 106.69295712387172, 'Ho Chi Minh', 'Vietnam', '02/04/13', 3],                            
      [10.035511715481054, 105.78650841255843, 'Can Tho', 'Vietnam', '06/04/13', 4],                            
      [10.379392700137583, 104.48601004588143, 'Ha Tien', 'Vietnam', '07/04/13', 5],                            
      [10.607085236979454, 104.18364549108138, 'Kampot', 'Cambodia', '09/04/13', 6],                            
      [10.615441163514843, 103.5214887207791, 'Sihanoukville', 'Cambodia', '12/04/13', 7],                           
      [10.575040390060632, 103.54923875808034, 'Otres Beach', 'Cambodia', '15/04/13', 8] 
  ];
  var mapOptions = {
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    zoom: 9,
    center: new google.maps.LatLng(10.575040390060632, 103.54923875808034),
    panControl: false,
    scaleControl: false,
    mapTypeControl: false,
    streetViewControl: false,
    overviewMapControl: false,
    zoomControl: true,
    zoomControlOptions: {
      style: google.maps.ZoomControlStyle.SMALL,
      position: google.maps.ControlPosition.RIGHT_TOP
    }
  };
  var map = new google.maps.Map(document.getElementById("map"), mapOptions);
  var infowindow = new google.maps.InfoWindow();
  var marker, poly, i;
  for (i = 0; i < locations.length; i++) {  
    marker = new google.maps.Marker({
      position: new google.maps.LatLng(locations[i][0], locations[i][1]),
      map: map
    });
    poly = new google.maps.Polyline({
      path: new google.maps.LatLng(locations[i][0], locations[i][1]),
      strokeColor: '#000000',
      strokeOpacity: 1.0,
      strokeWeight: 3
    });
    google.maps.event.addListener(marker, 'click', (function(marker, i) {
      return function() {
        infowindow.setContent(locations[i][2]);
        infowindow.open(map, marker);
      }
    })(marker, i));
  }
}
function loadScript() {
  var script = document.createElement("script");
  script.type = "text/javascript";
  script.src = "http://maps.googleapis.com/maps/api/js?key=AIzaSyAhnheFVYaMG44DfbXYCuNmKHuf15Ar1_I&sensor=true&callback=initialize";
  document.body.appendChild(script);
}
window.onload = loadScript; 
```

我想问题出在数组上，因为它不是标准的做法（根据谷歌文档），我只是不知道如何正确调用它。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:15:43.627

您需要将多段线的创建移出循环，并为其提供一组 LatLng 对象。

```
var arr = [];
for (var i = 0; i < locations.length; i++) {  
    var marker = new google.maps.Marker({
      position: new google.maps.LatLng(locations[i][0], locations[i][1]),
      map: map
    });
    arr.push(marker.getPosition());

  // <-- snipped -->
}

Edit:

  var poly = new google.maps.Polyline({
      path: arr,
      strokeColor: '#000000',
      strokeOpacity: 1.0,
      strokeWeight: 3,
      map: map    
    }); 
```

# wix - 使用 Wixstdba 引导程序对按钮单击事件做出反应

> ID：16169784
> 
> 赞同：1
> 
> 时间：2013-04-23T12:49:20.457
> 
> 标签：wix

我们正在使用 wixstdba 引导程序进行设置。我们现在想做一些安装跟踪：我们想知道用户在安装的哪个步骤取消。我们想向我们的服务器发送一个带有一些信息的 http 请求。是否可以对按钮单击事件做出反应——在这种特殊情况下是取消按钮？或者您知道在取消期间发送 http 请求的更好解决方案吗？正如我所提到的，我们正在使用 wixstdba 引导程序，因为它很容易创建和自定义设置。我们现在正处于事情变得更加复杂的地步，因此正在考虑创建我们自己的引导程序应用程序——但我们想避免这种情况。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:26:14.310

您将需要创建自己的`BootstrapperApplication`来支持该场景。幸运的是，由于您可以完全控制`BootstrapperApplication`添加上述功能的用户体验，只需编写代码即可。不幸的是，这确实意味着编写更多代码来拥有整体体验。

# objective-c - 将所有视频（来自照片库和视频应用程序）列出到 uitableviewcell

> ID：16169785
> 
> 赞同：0
> 
> 时间：2013-04-23T12:49:24.127
> 
> 标签：objective-c, uitableview, alassetslibrary, alasset, mpmediaquery

我想列出所有视频。不仅是照片库中的视频，还包括视频应用程序中的视频，包括电影、电视节目、音乐视频等进入我的应用程序。

当我像这样使用 ALAsset 时：

```
ALAsset *asset = [videoLibrary objectAtIndex:indexPath.row];
videoURL = [[asset defaultRepresentation] url];
[videoURLs addObject:videoURL];
[cell.textLabel setText:[NSString stringWithFormat:@"Video %d", indexPath.row+1]];
[cell.imageView setImage:[UIImage imageWithCGImage:[asset thumbnail]]]; 
```

在 (UITableViewCell *)tableView:cellForRowAtIndexPath: 方法中，只会显示照片库中的视频。有没有办法获得所有类型？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-28T10:22:01.947

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

```
 NSMutableArray *assetGroups = [[NSMutableArray alloc] init];
    NSMutableArray *assetURLDictionaries = [[NSMutableArray alloc] init];

    // Process assets
    void (^assetEnumerator)(ALAsset *, NSUInteger, BOOL *) = ^(ALAsset *result, NSUInteger index, BOOL *stop) {
        if (result != nil) {   
           if([[result valueForProperty:ALAssetPropertyType] isEqualToString:ALAssetTypeVideo]){
                [assetURLDictionaries addObject:[result valueForProperty:ALAssetPropertyURLs]];
                NSURL *url = result.defaultRepresentation.url;
                [assetLibrary assetForURL:url
                              resultBlock:^(ALAsset *asset) {
                                  if (asset) {
                                      @synchronized(assets) {
                                          [systemVideoArray addObject:asset];
                                          [self.mTableView performSelectorOnMainThread:@selector(reloadData) withObject:nil waitUntilDone:NO];
                                      }
                                  }
                              }
                             failureBlock:^(NSError *error){
                                 NSLog(@"operation was not successfull!");
                             }];
            }
        }
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:57:40.160

我想您需要检索 IOS 设备上的所有视频，您可以 [在这篇文章中找到相同的代码](https://stackoverflow.com/questions/10748673/how-to-get-the-list-of-all-video-files-in-iphone)

# android - 如何在 AlertDialog 框中添加两个编辑文本字段或视图？

> ID：16169787
> 
> 赞同：13
> 
> 时间：2013-04-23T12:49:28.277
> 
> 标签：android, views, android-edittext, android-alertdialog

我想在警报对话框中添加两个编辑文本字段。就像解决方案听起来一样简单，我还没有能够收集到一个有效的解决方案。我无法同时设置两个（编辑文本）视图。

如果您想查看更多代码，请发表评论。

```
 alertDialog.setTitle("Values");
                final EditText quantity = new EditText(SecondScan.this);
                final EditText lot = new EditText(SecondScan.this);

                quantity.setInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_DECIMAL);
                lot.setInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_DECIMAL);

                Project=arr[0].toString();
                Item=arr[1].toString();

                alertDialog.setMessage( "Employee No. : " + (Login.user).trim()+
                        "\nWarehouse      : " + (FirstScan.Warehouse).trim()+ 
                        "\nLocation           : " + (FirstScan.Location).trim()+ 
                        "\nProject              : " + Project.trim() + 
                        "\nItem                   : " + Item.trim() + 
                        "\nLot                      : " + Lot.trim()+  
                        "\n\nQuantity   :" );
                alertDialog.setView(quantity);
                    alertDialog.setView(lot);
 // the bit of code that doesn't seem to be working.

                alertDialog.setCancelable(false);
                alertDialog.setPositiveButton("Update",  new DialogInterface.OnClickListener() { 

                    public void onClick(DialogInterface dialog, int id) {
                        //ACTION
                    }
                });

                AlertDialog alert = alertDialog.create();
                alert.show(); 
```

我希望第一个编辑文本出现在**批次**之后，第二个编辑文本出现在**数量**之后，而当我尝试推送两个视图时，似乎只有一个在工作。

**更新**：*事实证明，实际上没有任何方法可以将多个视图单独添加到警报对话框而无需为其创建布局。*

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-23T12:55:23.610

请参阅在 android 中[创建自定义布局。](http://developer.android.com/guide/topics/ui/dialogs.html#CustomLayout)

![在此处输入图像描述](https://i.stack.imgur.com/bB4WZ.png)

**编辑**

```
alertDialog.setTitle("Values");
final EditText quantity = new EditText(SecondScan.this);
final EditText lot = new EditText(SecondScan.this);

quantity.setInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_DECIMAL);
lot.setInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_DECIMAL);

Project=arr[0].toString();
Item=arr[1].toString();

LinearLayout ll=new LinearLayout(this);
ll.setOrientation(LinearLayout.VERTICAL);
ll.addView(quantity);
ll.addView(lot);
alertDialog.setView(ll);

alertDialog.setCancelable(false);
alertDialog.setPositiveButton("Update",  new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int id) {
        //ACTION
    }
});

AlertDialog alert = alertDialog.create();
alert.show(); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-08-11T21:32:46.860

我使用 LinearLayout 作为登录弹出窗口：

```
public final String POPUP_LOGIN_TITLE="Sign In";
public final String POPUP_LOGIN_TEXT="Please fill in your credentials";
public final String EMAIL_HINT="--Email--";
public final String PASSWORD_HINT="--Password--";

AlertDialog.Builder alert = new AlertDialog.Builder(this);

        alert.setTitle(POPUP_LOGIN_TITLE);
        alert.setMessage(POPUP_LOGIN_TEXT);

        // Set an EditText view to get user input 
        final EditText email = new EditText(this);
        email.setHint(EMAIL_HINT);
        final EditText password = new EditText(this);
        password.setHint(PASSWORD_HINT);
        LinearLayout layout = new LinearLayout(getApplicationContext());
        layout.setOrientation(LinearLayout.VERTICAL);
        layout.addView(email);
        layout.addView(password);
        alert.setView(layout);

        alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {

          // Do something with value!
          }
        });

        alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
          public void onClick(DialogInterface dialog, int whichButton) {
            // Canceled.
          }
        });

        alert.show(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T12:53:37.940

您应该创建一个可以添加 EditTexts 的垂直 LinearLayout。然后将 alertDialog.setView() 与 LinearLayout 一起使用。

在此处查找更多信息：[如何实现自定义 AlertDialog 视图](https://stackoverflow.com/questions/2795300/how-to-implement-a-custom-alertdialog-view) 或此处[如何在警报对话框中添加两个编辑文本字段](https://stackoverflow.com/questions/3426917/how-to-add-two-edit-text-fields-in-an-alert-dialog?rq=1)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T12:54:48.213

为什么不为它制作一个完全自定义的布局？

这是一个自定义弹出窗口，用于显示类别列表并让用户选择一个。

```
public class CategoryPickerFragment extends DialogFragment implements OnItemClickListener{
private CategoryReceiver receiver;
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    // Get the layout inflater
    LayoutInflater inflater = getActivity().getLayoutInflater();

    // Inflate and set the layout for the dialog
    // Pass null as the parent view because its going in the dialog layout
    View view = inflater.inflate(R.layout.category_picker_fragment, null);

    builder.setView(view);
    AlertDialog ad = builder.create();

    CategoryList categoryList = (CategoryList) view.findViewById(R.id.clCategories);
    categoryList.setOnItemClickListener(this);

    return ad;
}
public void setCategoryReceiver(CategoryReceiver receiver){
    this.receiver = receiver;
}

@Override
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    Category category = ((CategoryListChild)view).getCategory();
    receiver.setCategory(category);
    this.dismiss();
} 
```

请注意，我扩展了一个 DialogFragment，使用自定义布局覆盖 OnCreateDialog 一个 alertDialog，然后将其显示给用户。

# php - 在 mongoDB 中查找文档

> ID：16169792
> 
> 赞同：0
> 
> 时间：2013-04-23T12:49:42.960
> 
> 标签：php, mongodb

我有一个像这样的 mongo 文档结构：

```
{
    "competition_id" : 421,
    "matches" :
        [
            "m_id" : 1234,
            "players":
                [
                    {
                        "id" : 52165267,
                        "name" : "...",
                        "surname" : "...",
                        ..
                    }
                ],
            "date" : 2012-10-12,
            ...
        ]
} 
```

我希望能够找到（返回）所有文档（对于给定的 $player_id），播放器不存在于“matches.players.id”的数组中。我尝试了 '$nin' 运算符，但没有成功。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:22:40.550

首先在'matches'中用'{'替换你的'['

我尝试了您的示例文档，以下查询对我来说很好：

```
db.collection_name.find( {"matches.players.id":{'$nin':[5]}} ) 
```

# list - 用于查找两个排序列表之间的共现的算法优化

> ID：16169803
> 
> 赞同：2
> 
> 时间：2013-04-23T12:50:22.447
> 
> 标签：list, loops, optimization, language-agnostic, combinations

目前，我的算法需要（估计）十多个小时才能完成。它现在仍在运行，这样我就可以更好地估计它有多*糟糕*。

假设我有一组人***P***，每个人都有一个不同长度的*排序列表，其中****i***是一个索引变量。我想创建一个图***G***使得***G [P [i] ,P [j]] = n***，其中***n是******P [i]***和***P [j]***之间的边权重，表示它们在某个静态范围***r***内共同出现的次数。

我当前的算法是无意识的，并在 Python 中实现（既可读又明确），如下所示：（为简洁起见，从[GitHub 上的存储库中](https://github.com/vermiculus/snael/blob/95446fb8978d49165a588a1c3e732a0241e7b399/snael.py#L295-317)更改）

```
print '>Generating combinations...',
pairs = combinations(people, 2)
print 'Done'

print 'Finding co-occurences'
radius = 5
for A, B in pairs:
    for oA in A.occurances:
        for oB in B.occurances:
            if oB in range(oA - radius, oA + radius):
                try:
                    network.edge[A.common_name][B.common_name]['weight'] += 1
                except:
                    network.add_edge(A.common_name, B.common_name, weight=1) 
```

我考虑过改变这个算法，这样当`oB`超过 current 的范围时`oA`，循环就会继续到下一个`oA`。

考虑到列表已排序，有没有*更好的方法来实现这一点？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:47:14.827

`oA`越过上限就继续下一个的想法是个好主意。此外，如果 和 的范围`A.occurances`与“半径”相比较大，那么每次`B.occurances`都不从头开始会更有效：`B.occurances`

```
print '>Generating combinations...',
pairs = combinations(people, 2)
print 'Done'

print 'Finding co-occurences'
radius = 5
for A, B in pairs:
    i = 0
    b = B.occurances
    maxi = len(B.occurances) - 1
    for oA in A.occurances:
        lo = oA - radius
        hi = oA + radius
        while (b[i] > lo) and (i > 0):     # while we're above the low end of the range
            i = i - 1                      #   go towards the low end of the range
        while (b[i] < lo) and (i < maxi):  # while we're below the low end of the range
            i = i + 1                      #   go towards the low end of the range
        if b[i] >= lo:
            while (b[i] <= hi):            # while we're below the high end of the range
                try:                       #   increase edge weight
                    network.edge[A.common_name][B.common_name]['weight'] += 1
                except:
                    network.add_edge(A.common_name, B.common_name, weight=1)

                if i < maxi:               #   and go towards the high end of the range
                    i = i + 1
                else:
                    break 
```

请注意，我尚未对此进行调试，因此其中可能存在错误，但希望您能大致了解我正在尝试做什么。当然，您可以对这个想法进行进一步的优化，但这应该比蛮力方法更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:40:00.540

一种选择是将 B.occurances 放在[区间树](http://en.wikipedia.org/wiki/Interval_tree)中，以便您可以快速查询范围内的所有 oB（oA - 半径，oA + 半径）。

另一种选择是对桶中的 B.occurances 进行索引，例如 [0, 1), [1, 2) 等。然后您可以通过选择具有索引的桶来快速找到范围内的所有 oB (oA - 半径, oA + 半径) (oA - 半径) 到 (oA + 半径)。桶是近似的，因此您仍需要迭代地验证第一个和最后一个选定桶中的所有 oB。

# spring-security - 使用 Spring Security 在 ZUL 文件中隐藏/显示组件

> ID：16169804
> 
> 赞同：1
> 
> 时间：2013-04-23T12:50:24.867
> 
> 标签：spring-security, zk

我正在用 ZK 开发一个 Web 应用程序。我已经实现了 Spring Security 设施，以便根据登录用户的性质，页面应该显示或不显示某些组件。我一直在到处寻找，似乎没有这样的例子。有谁知道这是否可行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T18:01:48.923

你可以在 zk docs中找到一个[示例，但我会稍微解释一下。](http://books.zkoss.org/wiki/ZK%20Spring%20Essentials/Working%20with%20ZK%20Spring/Working%20with%20ZK%20Spring%20Security/Add%20Security%20in%20the%20View%20Layer)

许多ZK标签，也许我不确定，都可以有`if` [属性](http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/UI_Composing/ZUML/Conditional_Evaluation)。
这使得在定义的条件下显示组件成为可能。

现在，您可以将其与 zk 安全标签库结合使用。

```
<?taglib uri="http://www.zkoss.org/zkspring/security" prefix="sec"?> 
```

因此，您可以使用定义的前缀进行 Spring-Role 检查。

```
if="${sec:isAllGranted('ROLE_SUPERVISOR')}" 
```

当然，您也可以将其用于可见属性。
但我认为由于安全方面的原因，这通常不是一个好主意。

请记住，您也可以使用[Spring 注释](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/ns-config.html#ns-global-method)。

```
@PreAuthorize("checkWhatYouLike")
public void myEventHandler(Event ev){
   ...
} 
```

并看一下[`SecurityUtil`](http://www.zkoss.org/javadoc/latest/zkspring-security/org/zkoss/spring/security/SecurityUtil.html)zks Spring包的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:44:37.210

You can use **visible** attribute to hide and show the component according to user logged in . I am not that much time to create a demo example right now but what i can suggest you WHat you can do here you can put all components id in DB with username something like we can say if we have 5 components in page let us suppose

# c++ - 将特征 Affine3d 转换为 Affine2d

> ID：16169811
> 
> 赞同：2
> 
> 时间：2013-04-23T12:50:43.780
> 
> 标签：c++, eigen, eigen3

我有一个3D[仿射变换](http://eigen.tuxfamily.org/dox/TutorialGeometry.html#TutorialGeoTransform)，我希望从中丢弃任何 z 轴信息。有没有一种方便的方法可以从 a 转换`Affine3d`为 and `Affine2d`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T14:34:54.407

尝试以下操作：

```
Affine2d S2d = Translation2d(S3d.translation().topRows<2>()) *
               S3d.linear().topLeftCorner<2,2>(); 
```

演示：

```
#include <Eigen/Dense>
#include <iostream>
#include <string>

int main()
{
    using namespace Eigen;
    using namespace std;

    Vector3d p3d(1.,2.,3.);
    cout << p3d << endl << endl;
    Affine3d S3d = Translation3d(2.,2.,2.)*Scaling(3.,2.,5.);
    Vector3d scalled = S3d*p3d;
    cout << S3d.matrix() << endl << endl;
    cout << scalled << endl << endl;

    cout << string(16,'_') << endl;

    Vector2d p2d = p3d.topRows<2>();
    cout << p2d << endl << endl;
    Affine2d S2d = Translation2d(S3d.translation().topRows<2>()) *
                   S3d.linear().topLeftCorner<2,2>();
    Vector2d scalled2d = S2d*p2d;
    cout << S2d.matrix() << endl << endl;
    cout << scalled2d << endl << endl;
} 
```

输出：

```
1
2
3

3 0 0 2
0 2 0 2
0 0 5 2
0 0 0 1

5
6
17

________________
1
2

3 0 2
0 2 2
0 0 1

5
6 
```

# python - Python regex find all single alphabetical characters

> ID：16169815
> 
> 赞同：2
> 
> 时间：2013-04-23T12:50:52.157
> 
> 标签：python, regex, character, alphabetical

I want to find all indexes for each occurrence of single alphabetical characters in a string. I don't want to catch single char html codes.

Here is my code:

```
import re
s = "fish oil B stack peanut c <b>"
words = re.finditer('\S+', s)
has_alpha = re.compile(??????).search
for word in words:
    if has_alpha(word.group()):
        print (word.start()) 
```

Desired output:

```
9
24 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T12:54:38.077

这样做：

```
r'(?i)\b[a-z]\b' 
```

分解它：

*   不区分大小写的匹配
*   一个词的边界
*   一封信
*   一个词的边界

您的代码可以简化为：

```
for match in re.finditer(r'(?i)\b[a-z]\b', s):
   print match.start() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T13:25:11.277

使用您的格式（[如您所愿](https://stackoverflow.com/questions/16169815/python-regex-find-all-single-alphabetical-characters/16170564#comment23110496_16169898)），但仅添加一个简单的检查。

```
import re
s = "fish oil B stack peanut c <b>"
words = re.finditer('\S+', s)
has_alpha = re.compile(r'[a-zA-Z]').search
for word in words:
    if len(word.group()) == 1 and has_alpha(word.group()):
        print (word.start())
>>> 
9
24 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T13:34:51.500

在最一般的情况下，我会说：

```
re.compile(r'(?i)(?<![a-z])[a-z](?![a-z])').search 
```

使用[环视](http://www.regular-expressions.info/lookaround.html)来表示“一个字母前面没有另一个字母，也没有后面跟着另一个字母”。

# winapi - Win32 App (Aero)：防止对话框移动

> ID：16169818
> 
> 赞同：0
> 
> 时间：2013-04-23T12:50:56.450
> 
> 标签：winapi, user-interface, win32gui

我在 Win7-Aero 上有一个基于对话框的 Win32-app，它只显示一个对话框。对话框应该有一个标题栏。我不希望用户可以在屏幕上移动对话框。

到目前为止我没有运气......处理`WM_NCHITTEST`，`WM_SYSCOMMAND`......设置`SWP_NOMOVE`。

实现的最佳方法是`NoMove`什么？我认为 DWM 在 Win7 上有所改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:41:34.603

您可以通过处理来做到这一点`WM_WINDOWPOSCHANGING`，当您看到尝试移动时，将坐标更改回它们应该在的位置。例如

```
switch (uMsg)
{
    case WM_WINDOWPOSCHANGING:
        if (!(reinterpret_cast<LPWINDOWPOS>(lParam)->flags & SWP_NOMOVE))
        {
            reinterpret_cast<LPWINDOWPOS>(lParam)->x = g_iMyXCoord;
            reinterpret_cast<LPWINDOWPOS>(lParam)->y = g_iMyYCoord;
        }
        return 0;
} 
```

您可能需要为此添加一些智能，以区分用户尝试的移动和您自己的程序进行的移动（或系统在必要时进行的移动 - 例如，如果监视器消失）。

即使你说它不起作用，我也会认为你也可以通过捕获`WM_NCHITTEST`并返回`HTBORDER`任何时候`HTCAPTION`返回来做到这一点 - 但是你必须通过子类化窗口而不是`DialogProc`（因为你会需要先调用默认处理程序，然后处理/更改返回值）。相同`WM_SYSCOMMAND`（通过系统菜单捕捉用户尝试的移动）。

# regex - What is the difference between sed and awk regular expression

> ID：16169819
> 
> 赞同：3
> 
> 时间：2013-04-23T12:50:56.980
> 
> 标签：regex, bash, sed, awk

I have one awk and one sed example. Both seems to be using the same regular expression, but the output differs. So the pattern expansion must be getting different. But i can not get the difference. Can anyone explain?

```
 $ echo "THE BEAR ATE THE FISH" |sed -e 's/[^ ]*(H|F)[^ ]*/<red>&/g'
THE BEAR ATE THE FISH
 $ echo "THE BEAR ATE THE FISH" | awk 'gsub(/[^ ]*(H|F)[^ ]*/,"<red>&")'
<red>THE BEAR ATE <red>THE <red>FISH
 $ sed --version
GNU sed version 4.1.5
 $ awk --version
GNU Awk 3.1.5 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T12:56:00.953

您在您的正则表达式中使用交替`|`，这是扩展正则表达式类的一部分。不同之处在于`sed` *(and `grep`)*当你想使用扩展的正则表达式时，你需要通过给出`-r`标志 with`GNU sed`和`-E`with来明确`GNU grep`：

```
$ echo "THE BEAR ATE THE FISH" | sed -re 's/[^ ]*(H|F)[^ ]*/<red>&/g'
<red>THE BEAR ATE <red>THE <red>FISH 
```

或者，您可以转义扩展的正则表达式功能：

```
$ echo "THE BEAR ATE THE FISH" |sed -e 's/[^ ]*\(H\|F\)[^ ]*/<red>&/g'
<red>THE BEAR ATE <red>THE <red>FISH 
```

更好的是，您可以在这里使用字符类：

```
$ echo "THE BEAR ATE THE FISH" |sed 's/[^ ]*[HF][^ ]*/<red>&/g'
<red>THE BEAR ATE <red>THE <red>FISH 
```

所有这三个工具的手册页都有解释正则表达式使用的部分。

# objective-c - NSPredicateEditor 是不可见的

> ID：16169823
> 
> 赞同：2
> 
> 时间：2013-04-23T12:51:09.960
> 
> 标签：objective-c, macos, nspredicate, nspredicateeditor

我尝试了很多方法来实现 NSPredicateEditor 但得到空白的编辑器视图。也尝试了一个新项目，但我仍然得到编辑器的空白视图。我想知道是什么问题。这个谓词是否适用于任何特定的观点。代码是
![在此处输入图像描述](https://i.stack.imgur.com/aNDhX.png)

```
AppDelegate.h  
@interface AppDelegate : NSObject  {  
NSPredicate *predicate;  
}  
@end  

AppDelegate.m  
#define DEFAULT_PREDICATE @"firstname = 'John' AND lastname = 'Doe'"  
-(id)init  
{  
self = [super init];  
if (self != nil)  
{  
predicate = [[NSPredicate predicateWithFormat:DEFAULT_PREDICATE] retain];  
}  
return self;  
}  
@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-18T07:58:11.580

隐藏在 NSPredicateEditorRowTemplate 的文档中，说明“设置谓词编辑器后，您通常会向其发送 setObjectValue: 消息以恢复已保存的谓词”

因此，假设您在界面构建器中有一个模板，其键路径为“名称”，您只需要在代码中使用这样的一行来显示模板：

```
[predicateEditor setObjectValue:[NSPredicate predicateWithFormat:@"Name CONTAINS \"\""]]; 
```

您也可以这样做来加载行：

```
[predicateEditor addRow:self]; 
```

# sorting - 黑莓 - 用重音排序

> ID：16169825
> 
> 赞同：1
> 
> 时间：2013-04-23T12:51:12.293
> 
> 标签：sorting, blackberry, vector

我正在尝试对包含法语口音的 BlackBerry 中的 SimpleSortingVector 进行排序。排序将带有重音符号的项目放在列表的最后。如何在黑莓中排序，将重音字符与非重音字符放在一起。Collat​​or 似乎不起作用，因为我相信我正在构建太低的 JRE 版本。我正在为最低 JRE 4.5.0 构建。

IE

É = E

这是我对向量进行排序的方式：

```
ssv.setSortComparator(new Comparator()
{
     public int compare(Object obj1, Object obj2)
     {
          String value = ((Item) obj1).getText();
          String otherValue = ((Item) obj2).getText();

          return value.compareTo(otherValue);
     }
});

ssv.reSort(); 
```

谢谢， 曼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T21:27:21.967

OS 4.5 是一个挑战。对于 OS 7，RIM 向[StringUtilities](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/api/util/StringUtilities.html)添加了一个字符串比较器，可以按照您想要的方式进行配置：

```
StringUtilities.compare(String aString1, int aOffset1, int aLength1,
                        String aString2, int aOffset2, int aLength2,
                        int aLevel, int aLocale, int aFlags, int aFlagsMask) 
```

不幸的是，我不知道早期版本的 BBOS 有任何内置解决方案。您可以为法语字符构建自己的排序表，如果您只需要支持法语，则可以编写自定义比较器。如果您正在寻找全局兼容性，那将变得乏味。

# jquery - If page loads with anchor, then

> ID：16169828
> 
> 赞同：0
> 
> 时间：2013-04-23T12:51:24.250
> 
> 标签：jquery, anchor

I'm using jmpress.js for my site where you can get to specific content / slides with anchors like follows: index.htm#/slide1, index.htm#/slide2, etc

I'm also using code like

```
$('.click').click(function () {
    $(".menu").animate({ top: '+=100' });
    $("#logo").fadeToggle();
}); 
```

to show and hide different stuff when getting to another slide (if the user clicks on ".click" another slide is coming in from the bottom, replacing the home page). This obviously only works as far as you always start on the "start" page (without any anchors).

But when you visit the page directly with the url index.htm#/slide1 the two items obviously won't show or hide anymore - they should automatically as soon as the user is on any site except the start page though. Is there an easy way (I have no idea of coding) to do this?

So basically something like this:

```
IF anchor #slide1, #slide2 {
    $(".menu").animate({ top: '+=100' });
    $("#logo").fadeToggle();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:54:52.630

```
if (window.location.hash){
      var hash = window.location.hash.substring(1);
      if (hash == "slide1" || hash == "slide2"){
         $(".menu").animate({ top: '+=100' });
         $("#logo").fadeToggle();
      }
} 
```

[http://curtisimson.co.uk/js/reading-url-hashtag-values/](http://curtistimson.co.uk/js/reading-url-hashtag-values/)

# javascript - letting users import an excel document and then populating a page with it

> ID：16169832
> 
> 赞同：1
> 
> 时间：2013-04-23T12:51:33.897
> 
> 标签：javascript, html, excel

for my website, I need to create a button where a user is prompted to import an excel file, and then be able to use that data in an html file, for example, to put in a div tag.

I've searched stack overflow, but the closest I could find was [Javascript pulling from excel](https://stackoverflow.com/questions/11768503/javascript-pulling-from-excel)

Which only works for internet explorer and doesn't explain how to import or export the excel file.

Can this sort of thing even be done?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T13:20:06.160

您可能必须`excel`在服务器上处理该文件。或者让用户提供可以使用 javascript 处理的 CSV 文件（从 excel 导出）。

该站点可以上传excel格式的数据，然后在服务器上使用-：

*   PHP - [http://phpexcel.codeplex.com](http://phpexcel.codeplex.com)

或者

*   在服务器上将 excel 文件导出为 CSV 并使用 javascript 库进行处理（例如此`Node.js`库 [https://github.com/koles/ya-csv](https://github.com/koles/ya-csv)）。

客户端有一个 javascript 库[http://code.google.com/p/jquery-csv/](http://code.google.com/p/jquery-csv/)这将有助于使用 js 输出 CSV 数据。但这需要 CSV 格式。

# ruby - 从字符串中提取的最大和最小单词

> ID：16169838
> 
> 赞同：0
> 
> 时间：2013-04-23T12:51:47.547
> 
> 标签：ruby

我确实有一个字符串，因为*`"Frederik will not come office tomorrow.So please you have to do his tasks".`*我想要最小和最大长度的单词作为哈希，如下所示：

```
{2=>["So", "to", "do"], 8=>["Frederik", "tomorrow"]} 
```

那么什么是最短的方法呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T12:54:02.043

试试下面的：

```
w = "Frederik will not come office tomorrow.So please you have to do his tasks" 
p Hash[w.scan(/\w+/).group_by(&:length).minmax]

#=>{2=>["So", "to", "do"], 8=>["Frederik", "tomorrow"]} 
```

# yii - 将计数变量附加到对象

> ID：16169841
> 
> 赞同：0
> 
> 时间：2013-04-23T12:51:50.013
> 
> 标签：yii, counting, cgridview

我需要一些帮助来显示 CGridView 中每个用户的帖子数。

例如：我有一个 User 和 Post 模型。我可以通过 $user->posts 访问用户的帖子有什么我可以添加到 $user->num_posts

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:30:44.010

您应该简单地使用统计关系，例如在您的用户模型中：

```
public function relations()
{
  return array(

    // ...
    'posts' => array(self::HAS_MANY, 'Post', 'user_id'),
    'num_posts' => array(self::STAT, 'Post', 'user_id'),
    // ...

  );
} 
```

[http://www.yiiframework.com/doc/guide/1.1/fr/database.arr#statistical-query](http://www.yiiframework.com/doc/guide/1.1/fr/database.arr#statistical-query)

**编辑**：您还应该使用急切加载来构建您的数据提供者，例如：

```
$criteria=new CDbCriteria;
$criteria->with('num_posts'); 
```

关于 SQL 查询，这应该只使用 3 个查询：

*   一次查询gridview页数，
*   一个查询来获取用户模型，
*   一项获取用户 num_posts 的查询。

只需查看 Yii 日志即可确定。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-23T13:10:24.547

您可以在 Post 模型中使用 getter。像这样的东西：

```
public static function getpostscount($id)
    {
        $total=0;
        $provider=Post::model()->findall('user_id=:user_id',array(':user_id'=>$id));
        foreach ($provider as $data)
        {
                if ($data->userid==$id)//userid name of column with user id in post model
                {$total++;
                }

        }
        return $total;
    } 
```

然后在您的视图中，只需将 user->id 传递给 getter，它就会返回该用户的帖子数。像这样的东西：

```
echo "User have".Post::model()->getpostscount($user->id);//$user->id is id of user for wich we will look count of posts 
```

问候。

# opengl - OpenGL blending; what exactly do Source Color and Destination Color refer to, with examples

> ID：16169844
> 
> 赞同：10
> 
> 时间：2013-04-23T12:51:56.453
> 
> 标签：opengl

I'm confused by exactly what this means:

> When doing blending for a particular buffer, the color from the fragment output is called the source color. The color currently in the buffer is called the destination color.

([from the OpenGL wiki](http://www.opengl.org/wiki/Blending))

I understand what the blending equation itself is, but I do not understand quite the distinction between *source color* and *destination color*.

Can anyone provide an example or more specific definition?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T13:40:42.763

为了保持简短和简单：

*   源颜色：这是您当前使用的颜色。例如，当您使用时，`glColor4f(...)`您设置操作的源颜色。
*   目标颜色：这是视频缓冲区中某个坐标中片段的颜色（如果您更喜欢这样认为，像素，尽管不一定相同）。

通常，使用的原因：

```
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

是因为您想使用刚刚提供的 alpha 值。您使用它来乘以您当前的颜色，然后使用 (1 - alpha) 并使用它来乘以该坐标中缓冲区的当前颜色。

因此，如果您使用 glColor4f(1.0f, 1.0f, 1.0f, 0.6f) 绘制一个四边形，并且使用 glColor4f(1.0f, 0.0f, 0.0f, 1.0f) 填充缓冲区，则最终操作将是：

```
(1.0f, 1.0f, 1.0f) * ALPHA + (1.0f, 0.0f, 0.0f) * (1 - ALPHA)
(0.6f, 0.6f, 0.6f) + (0.4f, 0.0f, 0.0f) 
```

所以最终的颜色是 (1.0f, 0.6f, 0.6f)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:25:58.607

在桌面 OpenGL 中，片段着色器可以[输出多种颜色](http://www.opengl.org/wiki/Fragment_Shader#Output_buffers)，而不仅仅是一种。每种颜色都有编号，每个这样的编号都映射到[framebuffer 中的输出缓冲区](http://www.opengl.org/wiki/Framebuffer#Draw_color_buffers)，基于[`glDrawBuffers`](http://www.opengl.org/wiki/GLAPI/glDrawBuffers).

混合在每个片段着色器输出颜色和当前存储在目标图像中的颜色之间独立进行。所以如果你写两种颜色，混合会在第一种颜色和它的图像之间发生，然后在第二种颜色和它的图像之间发生。

对于每个混合操作，源颜色是片段着色器写入输出变量的颜色。目标颜色是帧缓冲区图像中与特定片段着色器输出相对应的颜色（基于`glDrawBuffers`映射）。所以源颜色来自片段着色器，目标颜色来自帧缓冲区图像。

# php - 使用php上传FTP文件

> ID：16169845
> 
> 赞同：2
> 
> 时间：2013-04-23T12:51:56.230
> 
> 标签：php, ftp

我需要将文件从本地计算机自动上传到远程服务器。我在这里找到了以下代码：

```
<?php
require_once('ftp.php');

// set up basic connection
$conn_id = ftp_connect($ftp_server);

// login with username and password
$login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);

// upload a file
if (ftp_put($conn_id, $remote_file, $file, FTP_ASCII)) {
    echo "successfully uploaded $file\n";
    exit;
} else {
    echo "There was a problem while uploading $file\n";
    exit;
}
// close the connection
ftp_close($conn_id);
?> 
```

`ftp.php`是我的带有 ftp 身份验证信息的文件。连接有效，但我收到以下错误：

```
There was a problem while uploading C:/xampp/htdocs/testbcos/accounting/checkslastmonth.csv 
```

编辑：我不确定这是否有所不同，但这里是我的 $remote_file 和我的 $file：

```
$file = "C:/xampp/htdocs/testbcos/accounting/checkslastmonth.csv";//tobe uploaded
$remote_file = "/home/bookcell/public_html/testbcos/accounting/checkslastmonth3.csv"; 
```

我在这里做错了什么？此外，如果文件位于本地服务器上的映射驱动器上，是否可以执行此操作？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:39:04.927

第一件事：尝试设置被动模式。如果您坐在防火墙后面，则需要它。（大概是什么情况）

```
ftp_pasv($conn_id, true); // after ftp_login 
```

其次，您必须先更改为 dir ：

```
ftp_chdir($conn_id, '/home/bookcell/public_html/testbcos/accounting/');
ftp_put($conn_id, 'checkslastmonth3.csv', $file, FTP_ASCII); 
```

如果您想知道到底发生了什么，请尝试使用[error_get_last()](http://php.net/manual/en/function.error-get-last.php)或 [$php_errormsg获取错误消息](http://php.net/manual/en/reserved.variables.phperrormsg.php)

# tfs - 部署后安排任务

> ID：16169855
> 
> 赞同：3
> 
> 时间：2013-04-23T12:52:32.293
> 
> 标签：tfs, msbuild, scheduled-tasks, msdeploy

我需要在我的网站部署后立即在 Windows 任务计划程序（Windows Server 2008 R2 上的 v2.0）中设置计划任务。

我正在使用 TFS 2010 来构建我的应用程序，显然我的 MSBuild Arguments 包含 arguments `/P:DeployOnBuild=True /P:DeployTarget=MSDeployPublish /P:CreatePackageOnPublish=true /P:MSDeployPublishMethod=WMSvc`。

我知道我可以用来`Schtasks.exe`通过命令行设置计划任务，我也知道有一个`runCommand`MsDeploy 提供程序。所以我想我可以`runCommand`用来运行`Schtasks.exe`所需的参数。

我的问题是我如何在 TFS 和 MsBuild 中做到这一点。我以为我可以将一些参数传递给 MsBuild，它们会“按原样”传递给 MsDeploy，但我找不到我是如何做到的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T03:35:11.820

如果*必须*在构建之后，则需要使用[`postSync`msdeploy 参数](http://technet.microsoft.com/en-us/library/dd569089%28v=ws.10%29.aspx)来执行`runCommand`. 由于`postSync`Visual Studio 的 MSBuild 任务不可用，因此您需要生成一个包，然后运行生成的`cmd`文件，并将`postSync`参数附加到末尾。

```
Package.cmd -postSync:runCommand="c:\windows\system32\schtasks.exe arguments" 
```

如果它*应该*`pubxml`在构建之后，您可以通过将以下内容添加到您的发布配置文件 ( )、`.wpp.targets`文件或项目文件中来包含附加提供：

```
<ItemGroup>
  <MsDeploySourceManifest Include="runCommand">
    <Path>&quot;c:\Windows\system32\schtasks.exe&quot; &quot;Arguments here&quot;</Path>
  </MsDeploySourceManifest>
</ItemGroup> 
```

官方并没有保证提供程序按顺序运行，但实际上它们确实如此。不过，您可能需要将目标挂接到正确的事件中，这样您就可以在其他提供者`runCommand` *之后注册您的目标。*

# xcode - 搜索栏不返回任何结果

> ID：16169858
> 
> 赞同：0
> 
> 时间：2013-04-23T12:52:39.140
> 
> 标签：xcode, ios6, nspredicate, uisearchbardisplaycontrol

我正在尝试使用在我的应用程序中添加搜索功能`NSpredicate`。我试图让它发挥作用，但似乎看不出问题出在哪里。我重新创建了一个演示应用程序来展示我所做的事情。一切都显示在模拟器上，没有任何警告，但是在搜索栏中输入文本时，没有结果。搜索栏表格视图中没有显示任何内容。我正在使用搜索栏和搜索显示控制器对象，而且我的原始数据源是一个简单的 plist，其中包含字典，每个字典都有 3 个字符串。除了搜索，一切都很好。有人可以看看我的代码，看看我哪里出错了吗？

这是我的 .h 文件：

```
#import <UIKit/UIKit.h>

@interface TableViewController : UITableViewController <UISearchBarDelegate>

@property (strong, nonatomic) NSArray *content;
@property (strong, nonatomic) NSMutableArray *searchResults;

@end 
```

这是 .m 文件：

```
#import "TableViewController.h"
#import "DetailViewController.h"

@interface TableViewController ()

@end

@implementation TableViewController

@synthesize content = _content;
@synthesize searchResults = _searchResults;

-(NSArray *)content
{
if (!_content) {
    _content = [[NSArray alloc] initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"Data" ofType:@"plist"]];
}
return _content;
}

- (id)initWithStyle:(UITableViewStyle)style
{
self = [super initWithStyle:style];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];

_searchResults = [[NSMutableArray alloc] init];

}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

if (tableView == self.searchDisplayController.searchResultsTableView) {
    return [self.searchResults count];

} else {
    return [self.content count];

}
}

- (void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope
{

[_searchResults removeAllObjects];

NSPredicate *resultPredicate = [NSPredicate predicateWithFormat:@"SELF contains[cd] '%@'",searchText];

[_searchResults addObjectsFromArray:[_content filteredArrayUsingPredicate:resultPredicate]];
}

-(BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString
{
[self filterContentForSearchText:searchString
                           scope:[[self.searchDisplayController.searchBar scopeButtonTitles]
                                  objectAtIndex:[self.searchDisplayController.searchBar
                                                 selectedScopeButtonIndex]]];

return YES;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

if (tableView == self.searchDisplayController.searchResultsTableView) {
    cell.textLabel.text = [_searchResults objectAtIndex:indexPath.row];
    cell.detailTextLabel.text = [_searchResults objectAtIndex:indexPath.row];
} else {
cell.textLabel.text = [[self.content objectAtIndex:indexPath.row] valueForKey:@"city"];
cell.detailTextLabel.text = [[self.content objectAtIndex:indexPath.row] valueForKey:@"state"];
}

return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
if (tableView == self.searchDisplayController.searchResultsTableView) {
    [self performSegueWithIdentifier: @"showDetails" sender: self];
}
}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender

{

if ([segue.identifier isEqualToString:@"showDetails"]) {

    NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
    DetailViewController *DVC = [segue destinationViewController];

    if ([self.searchDisplayController isActive]) {

    DVC.cityImageString = [_searchResults objectAtIndex:indexPath.row];
    DVC.cityTextString = [_searchResults objectAtIndex:indexPath.row];
    } else {

        DVC.cityImageString = [[self.content objectAtIndex:indexPath.row] valueForKey:@"cityImage"];
        DVC.cityTextString = [[self.content objectAtIndex:indexPath.row] valueForKey:@"cityText"];
    }

}
}

@end 
```

ps我使用的是xcode 4.6 ios 6，我认为这无关紧要，可能与我的问题无关，而且我已经通过IB添加了搜索栏，它的委托和数据源自动连接到tableview。

感谢一堆提前帮助。

编辑：

这是我的 plist 的结构，这是一个非常简单的结构，我认为它可能会帮助有人为我提供答案。

```
 <?xml version="1.0" encoding="UTF-8"?>
     <!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN"   "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
       <plist version="1.0">
         <array>
      <dict>
    <key>city</key>
    <string>New York</string>
    <key>state</key>
    <string>NY</string>
    <key>cityText</key>
    <string>This is the description of the city that goes in the tex view just testing.</string>
    <key>cityImage</key>
    <string>acolon.png</string>
       </dict>
       <dict>
    <key>city</key>
    <string>Los Angeles</string>
    <key>state</key>
    <string>CA</string>
    <key>cityText</key>
    <string>This the second item&apos;s textview</string>
    <key>cityImage</key>
    <string>Piedirosso.jpg</string>
     </dict>
      <dict>
    <key>city</key>
    <string>Chicago</string>
    <key>state</key>
    <string>IL</string>
    <key>cityText</key>
    <string>here is the text view description for the third item.</string>
    <key>cityImage</key>
    <string>acolon.png</string>
</dict>
    </array>
    </plist> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T19:17:41.403

干得好！但是检查最终代码，我发现如果您从 searchResults 中选择一个单元格，则始终显示第一个单元格，例如，对于搜索“s”结果：“Sandiago”和“Sprienfield”，如果选择“Sprienfield”，则详细视图将去圣地亚哥。我找不到错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T08:23:25.410

你的问题是这一行的谓词

```
NSPredicate *resultPredicate = [NSPredicate predicateWithFormat:@"SELF contains[cd] '%@'",searchText]; 
```

您的 _content 数组包含不支持包含运算符的 NSDictionaries。此外，单引号/双引号会导致 %@ 按字面意思使用。（来自文档：）`Single or double quoting variables (or substitution variable strings) cause %@, %K, or $variable to be interpreted as a literal in the format string and so prevent any substitution`。将其更改为：

```
NSPredicate *pred = [NSPredicate predicateWithFormat: @"SELF['city'] contains[cd] %@ OR SELF['state'] contains[cd] %@ OR SELF['cityText'] contains[cd] %@", searchText, searchText, searchText]; 
```

（假设您要搜索所有三个值：city、state、cityText）

# debugging - 检查编译单元的 DWARF 版本

> ID：16169864
> 
> 赞同：15
> 
> 时间：2013-04-23T12:52:54.860
> 
> 标签：debugging, dwarf

所有，有没有工具可以检查文件的 DWARF 版本？像这样的东西：

```
$ dwarf_tool binary_name
4 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-29T06:44:57.843

在Linux环境下？如果你安装了 GCC，你应该有`readelf`可执行文件。所以你可以试试这个

`readelf --debug-dump=info binary_name | grep -A 2 'Compilation Unit @'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-29T15:35:57.987

您还可以使用“llvm-dwarfdump”工具，如下所示

```
llvm-dwarfdump --debug-dump=info hello | grep 'Compile Unit:'
0x00000000: Compile Unit: length = 0x00000075 version = 0x0004 abbr_offset = 0x0000 addr_size = 0x08 (next unit at 0x00000079) 
```

# mysql - detecting each day given in database

> ID：16169867
> 
> 赞同：-3
> 
> 时间：2013-04-23T12:53:00.670
> 
> 标签：mysql, sql, database

For one of my php projects I have a database `db_attendance` where I have a table like this:

```
lid empname  username nod  sdate        edate     reason   action   empID
==  =======  ======== === ==========  ========== ======== ======== =======            
01  will     william   1  23/01/2010  27/01/2010 for exam accepted   4
01  will     james     1  23/01/2010  29/01/2010 for exam accepted   2 
```

is there any way to detect each day of `sdate` to `edate`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:17:54.263

因为我没有足够的分数来评论，所以我说“ALL IN！” 猜你的意思是要从表格的日期字段中提取工作日信息，例如'Sunday'(0)、'Monday'(1)、Tuesday(2) 等。
如果我是对的，答案是这个：
`SELECT DAYOFWEEK(sdate) AS myDay FROM db_attendance`

或者如果你想将日期作为文本而不是它的 ID，你需要像这样格式化它：
`SELECT date_format(sdate, "%W") AS myDay2 FROM db_attendance`

# python - 将元组元素与列表元素匹配

> ID：16169873
> 
> 赞同：4
> 
> 时间：2013-04-23T12:53:16.950
> 
> 标签：python

我有一个像这样命名为 eagles 的元组列表

```
eagles= [("NCMS000","NCMS000"),("NCFP000","NCFP000"),("NCMS00D","NCMS00D"),("NCCS000","NCCS000"),("NCCP000","NCCP000"),("NCMN000","NCMN000"),("NCFN000","NCFN000"),("NP000G0","NP000G0"),("NP000G0","NP000G0"),... 
```

和一个名为 Result 的列表，如下所示：

```
['"', '"', 'Fe', '1']
['Hola', 'hola', 'I', '1']
['como', 'como', 'CS', '0.999289']
['estas', 'este', 'DD0FP0', '0.97043']
['Bien', 'bien', 'NP00000', '1']
['gracias', 'gracia', 'NCFP000', '1']
['y', 'y', 'CC', '0.999962']
['tu', 'tu', 'DP2CSS', '1']
['yo', 'yo', 'PP1CSN00', '1']
['estoy', 'estar', 'VAIP1S0', '1']
['bien', 'bien', 'RG', '0.902728']
['huevo', 'huevo', 'NCMS000', '0.916667']
['calcio', 'calcio', 'NCMS000', '1']
['leche', 'leche', 'NCFS000', '1']
['proteina', 'proteina', 'NCFS000', '1']
['Francisco', 'francisco', 'NP00000', '1']
['1999', '1999', 'Z', '1']
['"', '"', 'Fe', '1'] 
```

我需要创建一个函数来在一种连续循环中将结果列表的第 3 项与老鹰第 1 项进行比较。如果它们匹配，我需要返回一个包含 4 个元素的列表列表，例如：

```
 r = [['leche', 'leche', 'NCFS000', '1'],['proteina', 'proteina', 'NCFS000', '1'],['Francisco', 'francisco', 'NP00000', '1']] 
```

到目前为止我做了什么：

```
def check(lst):
    return [x[2] for x in lst if (x[2] in y[0] for y in eagles)]

IndexError: list index out of range. 
```

我什至无法从列表中提取第三个元素并将其放在一个空元素上

```
e = [x[0] for x in eagles]
r = [item for item in e if item in Result]
rg =[]
for i in Result:
    rg = i[2] 
```

同样的错误

我能做些什么？任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T13:03:57.247

首先，将`eagles`列表转换为字典可能会更好......

```
>>> eagles = [("NCMS000","NCMS000"), ("NCFP000","NCFP000"), ...]
>>> eagles_dict = dict(eagles)
>>> print eagles_dict
{'NCFP000': 'NCFP000', 'NCMS000': 'NCMS000', ...} 
```

...使查找更简单、更高效。然后你可以使用一个简单的列表理解，比如......

```
>>> result = [['"', '"', 'Fe', '1'], ['Hola', 'hola', 'I', '1'], ...]
>>> print [item for item in result if item[2] in eagles_dict]
[['leche', 'leche', 'NCFS000', '1'], ...] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:58:39.450

可能有一种更有效的算法涉及排序，但如果你只是这样做一两次：

更新考虑到您的物品并不总是有 4 个元素的事实。

```
eagles_first_parts = [eagle[0] for eagle in eagles]
r = [item for item in Result if len(item) > 2 and item[2] in eagles_first_parts] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T13:09:13.320

注意：不是编写最有效的代码，而是从您的尝试中得出的。我假设 Result 是一个**列表列表****，**例如：

```
Result=[['"', '"', 'Fe', '1'],['Hola', 'hola', 'I', '1'],
['como', 'como', 'CS', '0.999289'],
['estas', 'este', 'DD0FP0', '0.97043'],
['Bien', 'bien', 'NP00000', '1'],
['gracias', 'gracia', 'NCFP000', '1'],
['y', 'y', 'CC', '0.999962'],
['tu', 'tu', 'DP2CSS', '1'],
['yo', 'yo', 'PP1CSN00', '1'],
['estoy', 'estar', 'VAIP1S0', '1'],
['bien', 'bien', 'RG', '0.902728'],
['huevo', 'huevo', 'NCMS000', '0.916667'],
['calcio', 'calcio', 'NCMS000', '1'],
['leche', 'leche', 'NCFS000', '1'],
['proteina', 'proteina', 'NCFS000', '1'],
['Francisco', 'francisco', 'NP00000', '1'],
['1999', '1999', 'Z', '1'],
['"', '"', 'Fe', '1']] 
```

现在从你离开的地方开始。

```
e=[x[0] for x in eagles] 
```

现在，初始化一个空列表 r

```
r=[]

for item in Result:
    for eagle in e:
       if item[2]==eagle:
            r.append(item)
print r 
```

这给出了输出：

```
[['gracias', 'gracia', 'NCFP000', '1'],
['huevo', 'huevo', 'NCMS000', '0.916667'],
['calcio', 'calcio', 'NCMS000', '1']] 
```

# vba - 如何使用 VBA 关闭自由路径

> ID：16169877
> 
> 赞同：2
> 
> 时间：2013-04-23T12:53:38.880
> 
> 标签：vba, powerpoint

我有一系列从第三方应用程序复制的自由形状。

这些自由形状由开放路径组成，不能在 PowerPoint 中“组合”（只有用封闭路径制成的自由形状可以组合）。

下面的宏会遍历每个选定的形状，如果是自由形状，它将创建一个封闭路径的副本，然后删除原始形状。

```
 Sub close_poly()

        Dim myshp As Shape
        Dim mycol As String
        Dim mynode As ShapeNode

        Dim myxvals As Variant
        Dim myyvals As Variant

        Dim myxcol As String
        Dim myycol As String

        Dim myffb As FreeformBuilder
        Dim mynewshp As Shape
        Dim myname As String

        For Each myshp In ActiveWindow.Selection.ShapeRange

            With myshp
                If .Type = msoFreeform Then

                    '################ set all line segments to straight
                    '(makes things easier in my specific case but will not work in many)
                    nodecount = 1
                    While nodecount <= .Nodes.Count
                        .Nodes.SetSegmentType nodecount, msoSegmentLine
                        nodecount = nodecount + 1
                    Wend

                    '############## collect coordinates
                     myxcol = ""
                     myycol = ""
                    For Each mynode In myshp.Nodes
                       myxcol = myxcol & mynode.Points(1, 1) & ","
                       myycol = myycol & mynode.Points(1, 2) & ","
                    Next
                    myxcol = Left(myxcol, Len(myxcol) - 1)
                    myycol = Left(myycol, Len(myycol) - 1)

                    myxvals = Split(myxcol, ",")
                    myyvals = Split(myycol, ",")

                    '##############create new freeform

                    Set myffb = ActiveWindow.View.Slide.Shapes.BuildFreeform(msoEditingAuto, myxvals(0), myyvals(0))
                        For i = 1 To UBound(myxvals)
                            myffb.AddNodes msoSegmentLine, msoEditingAuto, myxvals(i), myyvals(i)
                        Next i
                        myffb.AddNodes msoSegmentLine, msoEditingAuto, myxvals(0), myyvals(0)
                    Set mynewshp = myffb.ConvertToShape

                    myshp.PickUp
                    mynewshp.Apply

                    myname = myshp.Name
                    myshp.Delete

                    mynewshp.Name = myname

                End If
            End With

        Next myshp
End Sub 
```

问题：有没有更简单的方法来模仿 VBA 中程序的“关闭路径”功能？

干杯

# android - 在使用动画的活动转换期间处理后退按钮按下

> ID：16169878
> 
> 赞同：0
> 
> 时间：2013-04-23T12:53:39.863
> 
> 标签：android, performance

Back Button Navigation 问题：当在 Activity 动画时按下 Back 按钮时，如果按下 Back 按钮，它将导航到上一个 Activity 两次。如何解决？

这是我们的准则

```
 final Intent intent = new Intent(getApplicationContext(), DrugHelp.class);
    ActivitySwitcher.animationOut(findViewById(R.id.container),getWindowManager(),
                new AnimationFinishedListener() {
                @Override
                public void onAnimationFinished() {
                startActivity(intent);
                finish();
                }}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:58:27.407

尝试这个：

```
public void onBackPressed() {
   this.finish();
} 
```

如果它仍然返回两次，请在开始动画时将布尔值设置为 true，并在上面的函数中添加

```
if(!yourBoolean){
   this.finish();
} 
```

希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:58:45.897

我认为`DrugHelp`是`Activity`前一个。它可能从未完成，所以它仍然在堆栈上。如果是这种情况，只需完成此操作即可`Activivty`将您带到上一个尚未完成的操作。如果它已经存在，您也可以使用`Intent Flags`将它带到堆栈的前面。

```
final Intent intent = new Intent(getApplicationContext(), DrugHelp.class);
intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT); 
```

`Intent.FLAG_ACTIVITY_CLEAR_TOP`如果您想确保`Activities`堆栈上的所有其他内容都被删除，您也可以使用。

[重新排序到前面](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_REORDER_TO_FRONT)

[其他意图标志](http://developer.android.com/reference/android/content/Intent.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T13:08:15.630

如果它只是您在 side 中启动的上一个活动`onAnimationFinished`，则不要调用 startActivity，只需完成当前活动

# json - Can I get more explanations for BSON?

> ID：16169879
> 
> 赞同：2
> 
> 时间：2013-04-23T12:53:40.540
> 
> 标签：json, bson

I am trying to understand `BSON` via [http://bsonspec.org/#/specification](http://bsonspec.org/#/specification), but still some questions remain.

* * *

let's take an example from the web site above:

```
{"hello": "world"} → "\x16\x00\x00\x00\x02hello\x00\x06\x00\x00\x00world\x00\x00" 
```

**Question 1**

in the above example, for the encoded bytes results, the double quotes actually are not part of the results, right?

**Question 2**

I understand that `the first 4 bytes` `\x16\x00\x00\x00` is the size of the whole BSON doc.

And it is `little endian` format. But why? Why not take `big endian`?

**Question 3**

How comes the size of the example doc being `\x16`, i.e. `22`?

**Question 4**

Normally, if I want to encode the doc by myself, how do I calculate the size of the doc? I think my trouble majorly is how to decide the size of `UTF-8` string?

* * *

Let's take another example:

```
{"BSON": ["awesome", 5.05, 1986]}   

→   

"\x31\x00\x00\x00\x04BSON\x00\x26\x00\x00\x00\x020\x00\x08\x00\x00 
 \x00awesome\x00\x011\x00\x33\x33\x33\x33\x33\x33\x14\x40\x102\x00\xc2\x07\x00\x00 
 \x00\x00" 
```

**Question 5**

In this example, there is an array. according to the specification, for array, it is actually a list of `{key, value}` pairs, whereas the key is `0`, `1`, etc. My question is so the `0`, `1` here are strings too, right?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:10:40.937

> 问题 1
> 
> 在上面的例子中，对于编码的字节结果，双引号实际上不是结果的一部分，对吧？

引号不是字符串的一部分。它们用于标记 JSON 字符串

> 问题2
> 
> 它是小端格式。但为什么？为什么不采用大端序？

字节序的选择很大程度上是一个偏好问题。little endian 的一个优点是常用的平台是 little endian，因此不需要反转字节。

> 问题 3
> 
> 示例文档的大小如何为 \x16，即 22？

有22个字节（包括长度前缀）

> 问题 4
> 
> 通常，如果我想自己编码文档，我如何计算文档的大小？我认为我的问题主要是如何确定 UTF-8 字符串的大小？

先把文件写出来，再回去填长度。

> 问题 5
> 
> 在这个例子中，有一个数组。根据规范，对于数组，它实际上是一个 {key, value} 对的列表，而键是 0、1 等。我的问题是这里的 0、1 也是字符串，对吧？

是的。准确地说，没有长度前缀的零终止字符串。`cstring`（在列表中调用）。就像嵌入的文档一样。

# c# - 实体框架代码优先迁移：使用模型更改更新数据库的最佳方法

> ID：16169882
> 
> 赞同：0
> 
> 时间：2013-04-23T12:53:50.023
> 
> 标签：c#, entity-framework, ef-code-first, code-first

我正在使用基于代码的代码优先迁移，我想知道使用模型中的更改来更新我的数据库模式的最佳方法是什么。在我们的应用程序中，我们计划为每个域模型使用多个 dataContext，并且还有一个 legacyDataContext，它现在包含数据库中的所有表（是的，我们正在使用遗留数据库，将来会在架构中发生变化） . 因此，如果我对属于多个数据上下文的实体进行更改，我应该怎么做？为该实体所在的每个上下文运行“更新数据库”/执行数据库。初始化？

也许更好的主意是拥有一个包含数据库所有表的数据上下文，然后如果模型中的某些实体（cs 类）发生更改，则只需更新具有所有实体/表的 dataContext。

你有什么建议？

# c++ - Efficiency of std::get with std::tuple

> ID：16169883
> 
> 赞同：14
> 
> 时间：2013-04-23T12:53:50.237
> 
> 标签：c++, c++11

I'm curious as to the lookup time that a call to `std::get<>` on a `std::tuple<>` takes. Some brief googling (including the reference pages which usually have this information) turned up no results.

My initial intuition (and fear) is that the recursive structure of tuple (if it is implemented as a variadic template) would lead to get requiring an order of N lookups (A call to `get<3>(t)` looking like `t.rest().rest().first()`. I'm hoping I'm way off here...

Then again, I would hope the compiler would be able to optimize this to directly return the correct offset without the overhead of N of calls.

Basically what I want: is there a specced guarantee on runtime? does this restrict how `std::tuple` is implemented?

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-23T12:55:12.113

效率将与访问结构的成员相当。`get<>`是在编译时解决的。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-23T14:00:49.767

C++ 规范不保证*任何*函数的运行时性能。即使它声明了渐近要求，也只能保证操作的相对数量，而不是这些操作的性能。O(1) 并不意味着快，O(n) 也不意味着慢。

您可以信任您的编译器/优化器/标准库实现，也可以自己重写它以获得您想要的任何性能。`std::get`，在最合理的编译器（优化）下，应该或多或少地等同于直接访问结构中的值。但是规范在任何时候都没有要求。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-23T18:40:15.520

第一个问题（需要多长时间`std::get`）的答案取决于您的库选择如何实现`std::tuple`和`std::get`. 但通常，库会选择使用非递归方法，类似于此处概述的方法：http: [//mitchnull.blogspot.com/2012/06/c11-tuple-implementation-details-part-1.html](http://mitchnull.blogspot.com/2012/06/c11-tuple-implementation-details-part-1.html)。使用这种方法，访问时间`std::get`将是恒定的，大致相当于访问结构成员所需的时间。

回答标准是否提供任何保证：正如其他人所说，不，标准在这里不做任何保证。一个邪恶的库作者可以选择`std::get`在 N 中创建指数，并且它们仍然符合标准。

# gwt - 在 gwt 中将 html 内容扔给浏览器

> ID：16169884
> 
> 赞同：0
> 
> 时间：2013-04-23T12:53:57.357
> 
> 标签：gwt, servlets

我正在使用 GWT，我想从 servlet 中抛出 html 内容。但是当我调用 servlet 并将内容扔给浏览器时，它会显示一些异常：

```
GET http://127.0.0.1:8888/com.opt.opt/opt.css 404 (Not Found) 5C1C7AB6A2CE69634F1821FF011F5710.cache.html:1
GET http://127.0.0.1:8888/com.opt.opt/AppOpsClient.css 404 (Not Found) 5C1C7AB6A2CE69634F1821FF011F5710.cache.html:1
GET http://127.0.0.1:8888/com.opt.opt/MessageComponent.css 404 (Not Found) 5C1C7AB6A2CE69634F1821FF011F5710.cache.html:1
GET http://127.0.0.1:8888/com.opt.opt/com.opt.opt/com.opt.opt.nocache.js 404 (Not Found) 5C1C7AB6A2CE69634F1821FF011F5710.cache.html:1 
```

我的 servlet 正在抛出以下内容：

```
String html = "<!doctype html>"+
             "<html>"+
              "<head>"+
                "<meta http-equiv=\"content-type\" content=\"text/html; charset=UTF-8\">" +
                "<link type=\"text/css\" rel=\"stylesheet\" href=\"opt.css\">"+
                "<link type=\"text/css\" rel=\"stylesheet\" href=\"AppOpsClient.css\">"+
                "<link type=\"text/css\" rel=\"stylesheet\" href=\"MessageComponent.css\">"+
                "<title>demoopt</title>"+
                "<script type=\"text/javascript\" language=\"javascript\" src=\"com.opt.opt/com.opt.opt.nocache.js\"></script>"+
                 "</head>"+
              "<body>"+
                /*"<iframe src=\"javascript:''\" id=\"__gwt_historyFrame\" tabIndex='-1' style=\"position:absolute;width:0;height:0;border:0\"></iframe>"+
                "<noscript>"+
                  "<div style=\"width: 22em; position: absolute; left: 50%; margin-left: -11em; color: red; background-color: white; border: 1px solid red; padding: 4px; font-family: sans-serif\">"+
                    "Your web browser must have JavaScript enabled"+
                    "in order for this application to display correctly."+
                  "</div>"+
                "</noscript>"+*/
              "</body>"+
            "</html>";

response.setContentType("text/html");
            PrintWriter out = response.getWriter();
            out.println(html);
            out.close(); 
```

它显示了这个异常，因为它附加了模块名，即 com.opt.opt 到 css 文件和缓存文件。我不明白为什么在将内容扔到浏览器时将模块名称附加到缓存文件。在部署模式以及托管 ode 中，它会抛出相同的异常。

任何人都可以建议我任何解决方案。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:57:12.810

将链接设为绝对路径（以 开头[`HttpServletRequest#getContextPath()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getContextPath%28%29)）

# java - 使用 DataOutputStream 将带有数组的字符串作为字节写入文件

> ID：16169888
> 
> 赞同：0
> 
> 时间：2013-04-23T12:54:03.113
> 
> 标签：java, dataoutputstream

我希望将用户输入的所有纬度和经度数据写入WriteGPSData.txt。但是这段代码只写了纬度和经度的最后一个输入。帮我解决这个问题。

```
import java.io.DataOutputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import javax.swing.JOptionPane;

public class GPS_main {

    public static void main(String[] args) {
        String strFilePath = "WriteGPSData.txt";
        try {
            System.out.println("+++=====GPS POINTS=======+++");
            // GPS p1 = new GPS ();
            GPS[] p2;
            p2 = new GPS[3];
            p2[0] = new GPS();
            // GPS p2 = new GPS();
            for (int i = 0; i < p2.length; i++) {
                p2[i] = new GPS();
                String aa = JOptionPane.showInputDialog("Enter latitude: ");
                double a = Double.parseDouble(aa);
                p2[i].setLat(a);
                String bb = JOptionPane.showInputDialog("Enter longitude: ");
                double b = Double.parseDouble(bb);
                p2[i].setLon(b);
                // System.out.println(p2[i].toGPSString());
                FileOutputStream fos = new FileOutputStream(strFilePath);
                DataOutputStream dos = new DataOutputStream(fos);
                String a2 = Double.toString(a);
                String b2 = Double.toString(b);
                // System.out.println("hello"+a2+b2);
                dos.writeBytes(a2 + "  " + b2);
                dos.close();
            }
        } catch (IOException e) {
            System.out.println("IOException : " + e);
            // System.out.println("   ");
        }
    }
} 
```

**在 BlueJ 中运行**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T12:59:49.700

将这些行放在开头的 for 循环之外：

```
 FileOutputStream fos = new FileOutputStream(strFilePath);     
  DataOutputStream dos = new DataOutputStream(fos); 
```

并在写入完成后关闭 OutputStream。您可以在其中使用`finally()`和写入`dos.close();`。

在您的代码中，每次迭代都会创建一个新文件，因此会覆盖旧数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T13:00:00.697

线条

```
FileOutputStream fos = new FileOutputStream(strFilePath);
DataOutputStream dos = new DataOutputStream(fos); 
```

应该在进入`for`循环之前出现。否则，输出文件本身的内容在每次迭代中都会被截断。此外，您还需要`DataOutputStream`在循环完成后推迟关闭

```
dos.close(); 
```

# entity-framework - Lightswitch is slow, ADO.NET Entity Framework/Domain Service/WCF RIA Service

> ID：16169891
> 
> 赞同：2
> 
> 时间：2013-04-23T12:54:17.613
> 
> 标签：entity-framework, ado.net, wcf-ria-services, visual-studio-lightswitch, domainservices

I'm developing an Lighswitch application in VS2012 with an external SQL Server 2008\. I'm using a WCF RIA Service to fetch my data, using these techniques: [http://www.c-sharpcorner.com/UploadFile/raj1979/how-to-use-wcf-ria-service-in-lightswitch-2012/](http://www.c-sharpcorner.com/UploadFile/raj1979/how-to-use-wcf-ria-service-in-lightswitch-2012/).

My main table contains some columns with static data and about 5 columns with foreign keys. The static data columns loads instant but all the foreign properties takes 3-5 secs to load on a screen with ~100 rows. This is not acceptable..

![enter image description here](https://i.stack.imgur.com/rrZHV.png)

The problem for me is that I don't know where the bottleneck might be. Any ideas where I could start looking? The only thing I could think of so far is that my ADO.NET model uses Lazy Loading, and it does.

All the foreign key properties only has two columns with a PK and some text, so they're not data heavy.

Any help appreciated, thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:25:44.520

我不知道这是否是您的速度问题的确切答案，但您引用的那篇文章建议您将**新的** *ADO.NET 数据模型添加到包含**RIA Service*的类库中。

绝对没有理由生成**第二个**数据模型，因为当您附加外部数据源（您的 SQL Server 数据库）时，LightSwitch**已经生成了一个。**你也可以重复使用它。构建一个 EF 数据模型需要时间，所以我想使用两个 EF 数据模型可以解释您遇到的缓慢，但它也可能完全是另外一回事。

看看这篇文章（最初的 RIA 服务/LightSwitch 文章，仍然是最好的），在其他几种技术中，Eric 将向您展示如何重用 LightSwitch 为您的数据源创建的数据模型。

[我如何：显示基于聚合数据的图表](http://blogs.msdn.com/b/lightswitch/archive/2011/04/08/how-do-i-display-a-chart-built-on-aggregated-data-eric-erhardt.aspx)

在本文中，创建 RIA 服务是为了专门*聚合*数据以显示在图表中，但您可以在其中做任何您需要做的事情。它不必汇总数据。我广泛使用带有附加数据源（SQL 数据库）的 RIA 服务，为列表、报告以及组合框的查找数据提供数据。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-06-30T10:28:37.510

我几乎是这门新艺术的初学者，但正如严在他的书中所说，灯开关是直接指向屏幕的，而不是一个非常好的艺术。我敢问你是否需要在屏幕上显示 100 行。你甚至都看不到它们。如果你把这个数字减少到 20，你的等待时间就会减少到 1/5。我遇到了同样的问题，现在我在屏幕中使用了尽可能少的行数。为了在不影响业务性能的情况下实现这一点，我选择打开具有最大参数数量的屏幕，而不是必需的，当我打开它们时我会发送这些参数。如果其中一个参数不是我提到的“无”的情况下的选项。这样，我可以在网格中有最少的行数，满足屏幕、程序性能和业务性能的目的。

# android - Facebook android sdk如何获取给定页面的喜欢数

> ID：16169893
> 
> 赞同：3
> 
> 时间：2013-04-23T12:54:22.230
> 
> 标签：android, facebook, facebook-graph-api, facebook-android-sdk

我想用它的 id 获取给定页面的点赞数。

这是我想用 facebook-android-sdk 翻译的[图形 api 请求。](https://graph.facebook.com/104249301622?fields=likes)

我不知道怎么做。如果我尝试，我会收到错误：

```
Bundle params = new Bundle();
params.putString("fields", "likes");
Request request = new Request(session,"104249301622", params, HttpMethod.GET, new Request.Callback() {  
    @Override
    public void onCompleted(Response response) {
        JSONObject res = response.getGraphObject().getInnerJSONObject();
        System.out.println(res);
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T08:45:36.863

这是调用的方法：

```
Session session = Session.getActiveSession();
Bundle params = new Bundle();
params.putString("id", "104249301622");
params.putString("fields", "likes");
Request request = new Request(session, "search", params, HttpMethod.GET, new Request.Callback() {

    @Override
    public void onCompleted(Response response) {
        try {
            JSONObject res = response.getGraphObject().getInnerJSONObject().getJSONArray("data").getJSONObject(0);
            numberOfLikes = res.getInt("likes");
        } catch (Exception e) {
        }
    }
});
RequestAsyncTask task = new RequestAsyncTask(request);
task.execute(); 
```

该请求将在下面的[图形 api request](https://graph.facebook.com/search?id=104249301622&fields=likes)中进行翻译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-16T13:21:42.033

在 facebook sdk 3.8

```
Bundle b = new Bundle();
    b.putBoolean("summary", true);

    new Request(
            session,
            id + "/likes",
            b,
            HttpMethod.GET,
            new Request.Callback() {
                public void onCompleted(Response response) {
                                    String s=response.toString();                   
                                 }
            }
    ).executeAsync(); 
```

您将在 Json 响应中填写“total_count”字段。

# javascript - jquery mobile显示html内容

> ID：16169900
> 
> 赞同：0
> 
> 时间：2013-04-23T12:54:40.937
> 
> 标签：javascript, jquery, json, html, jquery-mobile

我正在使用 jquery mobile 和 JavaScript。我在一个变量中有一些响应是一个 html 内容。现在我必须在 jquery mobile 的 UI 中显示这个 html 内容。该内容应该显示为文本而不是 html。

```
jquery("#content").html(wiJson);

<div data-role="content" id="content">
</div> 
```

这是我在我的代码 `jquery("#content").html(wiJson);`中使用的，这在 javascript 和

```
<div data-role="content" id="content">
        </div> 
```

用于jquery mobile ui

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:58:14.653

> 该内容应该显示为文本而不是 html。

尝试使用 .text()

```
jquery("#content").text(wiJson); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:20:10.777

您可以将**pre & code**标签添加到您的 html 并使用 .append() jQuery 方法附加它。它会看起来像这样。

```
jQuery('#content").append('<pre><code>wiJson</pre></code>'); 
```

希望这可以帮助。

# javascript - 数据表：fnRowCallback 内部的自定义函数

> ID：16169901
> 
> 赞同：2
> 
> 时间：2013-04-23T12:54:43.107
> 
> 标签：javascript, jquery, datatables

试图在 fnRowCallback 中运行函数。jQuery 报告此错误：

```
too much recursion
/js/jquery.js
Line: 4 
```

找不到这个永无止境的循环。 `alert(aData.toSource());`显示我试图循环遍历的数组。

```
 var clientId = 1234;
    var reportData = $('#report-data').dataTable({
        "bProcessing": true,
        "bServerSide": true,
        "sAjaxSource": "?go=report&do=process&action=get-report",
        "fnServerData": function ( sSource, aoData, fnCallback ) {
            aoData.push({ "name": "client_id", "value": clientId });
            $.getJSON( sSource, aoData, function (json) { 
                fnCallback(json);
            });
        },
        "fnRowCallback": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
            formatDates(nRow,aData);
        },
    });

    function formatDates(nRow,aData) {
//      alert(aData.toSource());
        for(i=0; i!=aData.length; i++) {
            if (aData[i].match(/^([0-9]{4}-[0-9]{2}-[0-9]{2})T([0-9]{2}:[0-9]{2}):[0-9]{2}\.[0-9]{3}$/gi)) {
                reportData.fnUpdate('New Date Format', nRow['_DT_RowIndex'], i);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T12:57:12.217

对于每一行，`fnRowCallback`调用，调用`fomatDates`，调用`fnUpdate`，重绘表格，调用`fnRowCallback`...

**编辑：**多考虑这一点，强制重绘可能会再次导致递归问题。相反，将 fnRowCallback 中对 fnUpdate 的调用替换为：

```
$(nRow).find('td:eq(' + i + ')').text('New Date Format'); 
```

这会将第 i 个 TD 元素的文本更新为“新日期格式”，这就是您想要做的。

# node.js - 参考和填充问题

> ID：16169902
> 
> 赞同：0
> 
> 时间：2013-04-23T12:54:43.493
> 
> 标签：node.js, mongodb, express, mongoose

[已解决 - 模型中的愚蠢错误]

我一直在尝试在 mongoose 和 expressjs 中引用和填充，但它根本不起作用。我遵循了这些：1\. [Mongoose 示例](https://github.com/LearnBoost/mongoose/blob/master/examples/population/population-basic.js) 2\. [Mongoose 填充](http://mongoosejs.com/docs/populate.html)

我创建了**三个**文件：

1) 模型/profile.js

```
var mongoose = require('mongoose'), Schema = mongoose.Schema, ObjectId = Schema.ObjectId;
var profileSchema = new Schema({
    name: String
});
module.exports = mongoose.model('Profile', profileSchema); 
```

2) 模型/work.js

```
var mongoose = require('mongoose'), Schema = mongoose.Schema, ObjectId = Schema.ObjectId;

var workSchema = new Schema({
    title: String,
    creditsFor: [{type: Schema.Types.ObjectId, ref: 'profile'}],
});
module.exports = mongoose.model('Work', workSchema); 
```

3) 控制器/work.js

```
var Work = require('../models/work.js'), fs = require('fs'), mongoose = require('mongoose');
......
exports.create = function(req, res) {
    credits = [];
    credits.push(mongoose.Types.ObjectId('5174a9ec993af25b01000003')); // I already created a 'Profile' and copy-pasted the _id

    var work = {
    title: req.body.title,
            creditsFor: credits
    }   

    var workObj = new Work(work);

    workObj.save(function(err, data) {
    if(err) {
        throw err;
    } else {
        req.flash('info', 'Work item saved.');
        res.redirect('/work/' + data._id);
    }
    });
}
.......
exports.show = function(req, res) {
var work = req.params.work;
Work.findOne({_id: work})
    .populate('creditsFor')
    .exec(function(err, data) {
    if(err) {
        throw err;
    } else {
        console.log(data);
        res.render('site/work/show', {work: data, message: req.flash('info')});
    }
});
} 
```

使用 populate() 时，返回的 creditsFor 为空。当我评论 populate() 时，它是一个字符串 (?)，像这样：{ title: 'My Title', creditsFor: '5174a9ec993af25b01000003' }

无法弄清楚出了什么问题。我试图将两个模型放在一个文件中，但仍然没有。

# c# - WPF - Restore Previous SelectedItem when ComboBox ItemSource Changes

> ID：16169906
> 
> 赞同：3
> 
> 时间：2013-04-23T12:54:51.867
> 
> 标签：c#, wpf, xaml, data-binding, mvvm

I'm implementing a ComboBox that can be refreshed by users using a button. I'm trying to make it so that the previously selected item is automatically reselected if still present inside the ComboBox after a refresh.

MainWindow.xaml:

```
<ComboBox Canvas.Left="10" Canvas.Top="10" DisplayMemberPath="Name" IsEnabled="{Binding Path=Enabled}" ItemsSource="{Binding Path=Items}" SelectedItem="{Binding Mode=TwoWay, Path=SelectedItem}" Width="379"/>
<Button Content="{x:Static p:Resources.TextRefresh}" Canvas.Right="10" Canvas.Top="10" Click="OnClickButtonRefresh" Width="75"/> 
```

MainWindow.xaml.cs:

```
public MainWindow()
{
    InitializeComponent();
    DataContext = m_BrowserInstances = new BrowserInstancesViewModel();
}

private void OnClickButtonRefresh(Object sender, RoutedEventArgs e)
{
    m_BrowserInstances.Populate();
} 
```

**[EDITED TO CURRENT VERSION]** BrowserInstancesViewModel.cs:

```
public sealed class BrowserInstancesViewModel : ViewModel
{
    private Boolean m_Enabled;
    public Boolean Enabled
    {
        get { return m_Enabled; }
    }

    private BrowserInstance m_SelectedItem;
    public BrowserInstance SelectedItem
    {
        get { return m_SelectedItem; }
        set
        {
            if (m_SelectedItem != value)
            {
                m_SelectedItem = value;
                NotifyPropertyChanged("SelectedItem");
            }
        }
    }

    private ObservableCollection<BrowserInstance> m_Items;
    public ObservableCollection<BrowserInstance> Items
    {
        get { return m_Items; }
    }

    public BrowserInstancesViewModel()
    {
        Populate();
    }

    private static Func<BrowserInstance, Boolean> Recover(BrowserInstance selectedItem)
    {
        return x =>
        {
            Process currentProcess = x.Process;
            Process selectedProcess = selectedItem.Process;

            if (currentProcess.Id != selectedProcess.Id)
                return false;

            if (currentProcess.MainModule.BaseAddress != selectedProcess.MainModule.BaseAddress)
                return false;

            if (currentProcess.MainWindowTitle != selectedProcess.MainWindowTitle)
                return false;

            return true;
        };
    }

    public void Populate()
    {
        BrowserInstance item = m_SelectedItem;
        List<BrowserInstance> items = new List<BrowserInstance>();

        foreach (Process process in Process.GetProcessesByName("chrome"))
            items.Add(new BrowserInstance(process));

        if (items.Count > 0)
        {
            m_Enabled = true;

            m_Items = new ObservableCollection<BrowserInstance>(items.OrderBy(x => x.Process.Id));

            if (item != null)
                m_SelectedItem = m_Items.SingleOrDefault(Recover(item));

            if (m_SelectedItem == null)
                m_SelectedItem = m_Items[0];
        }
        else
        {
            m_Enabled = false;

            m_Items = new ObservableCollection<BrowserInstance>();
            m_Items.Add(new BrowserInstance());

            m_SelectedItem = m_Items[0];
        }

        NotifyPropertyChanged("Enabled");
        NotifyPropertyChanged("Items");
        NotifyPropertyChanged("SelectedItem");
    }
} 
```

I can get back the previously selected item, but only sometimes. Looks like the code is not working properly when I need to select a default value (Index 0) if the previous selected item cannot be recovered.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T12:58:29.487

您需要设置`m_SelectedItem`为找到的项目`SingleOrDefault(Recover(...))`。

目前，您将其设置为旧实例。该实例不再存在于列表中，显然您的`BrowserInstance`类没有实现任何相等成员。

根据您当前的代码正确代码：

```
if(selectedItem != null)
    m_SelectedItem = m_Items.SingleOrDefault(Recover(selectedItem));
if(m_SelectedItem == null)
    m_SelectedItem = m_Items[0]; 
```

更新：

您上传的代码有两个问题。

1.  如果没有进程，您添加`Process`的默认对象的属性值为. 这导致. 通过将前面更改为来修复它`BrowserInstance``null``NullReferenceException``SingleOrDefault`
    `if`

    ```
    if(selectedItem != null && selectedItem.Process != null) 
    ```

2.  在`Populate`方法结束时，您引发`PropertyChanged`事件`Items`- 更新组合框中的值 - 以及`SelectedItem`- 将所选项目设置为用户先前选择的项目。
    这里的问题是 WPF 将在引发时更新`SelectedItem`，因为它在新项目列表中找不到先前选择的项目。这有效地覆盖了您在方法中计算的新选定项。 通过不将新选定的项目分配给但在引发事件后将该 值分配给来修复它：`null``PropertyChanged``Items``Populate`
    `m_SelectedItem``selectedItem``SelectedItem``PropertyChanged``Items`

    ```
    public void Populate()
    {
        BrowserInstance selectedItem = m_SelectedItem;
        List<BrowserInstance> items = new List<BrowserInstance>();

        foreach (Process process in Process.GetProcessesByName("chrome"))
            items.Add(new BrowserInstance(process));

        if (items.Count > 0)
        {
            m_Enabled = true;

            m_Items = new ObservableCollection<BrowserInstance>(items.OrderBy(x => x.Process.Id));

            if (selectedItem != null && selectedItem.Process != null)
                selectedItem = m_Items.SingleOrDefault(x => (x.Process.Id == selectedItem.Process.Id) && (x.Process.MainModule.BaseAddress == selectedItem.Process.MainModule.BaseAddress));

            if (selectedItem == null)
                selectedItem = m_Items[0];
        }
        else
        {
            m_Enabled = false;

            m_Items = new ObservableCollection<BrowserInstance>();
            m_Items.Add(new BrowserInstance());

            selectedItem = m_Items[0];
        }

        NotifyPropertyChanged("Enabled");
        NotifyPropertyChanged("Items");
        SelectedItem = selectedItem;
    } 
    ```

* * *

如果您能正确实现相等，`BrowserInstance`则可以使用 WPF 功能来保留当前选定的项目。
的代码`Populate`可以简化如下：

```
public void Populate()
{
    BrowserInstance selectedItem = m_SelectedItem;
    List<BrowserInstance> items = new List<BrowserInstance>();

    foreach (Process process in Process.GetProcessesByName("chrome"))
        items.Add(new BrowserInstance(process));

    m_Enabled = items.Any();
    m_Items = new ObservableCollection<BrowserInstance>(items.OrderBy(x => x.Process.Id));
    if(!m_Enabled)
        m_Items.Add(new BrowserInstance());

    NotifyPropertyChanged("Enabled");
    NotifyPropertyChanged("Items");
    if (SelectedItem == null)
        SelectedItem = m_Items[0];
} 
```

的相等实现`BrowserInstance`如下所示：

```
public sealed class BrowserInstance : IEquatable<BrowserInstance>
{

    // ...

    public bool Equals(BrowserInstance other)
    {
        if (ReferenceEquals(null, other))
            return false;
        if (ReferenceEquals(this, other))
            return true;
        if (m_Process == null)
        {
            if (other.m_Process == null)
                return true;
            return false;
        }

        if (other.m_Process == null)
            return false;

        return m_Process.Id == other.m_Process.Id && m_Process.MainModule.BaseAddress == other.m_Process.MainModule.BaseAddress;
    }

    public override bool Equals(object obj)
    {
        return Equals(obj as BrowserInstance);
    }

    public override int GetHashCode()
    {
        unchecked
        {
            return m_Process != null ? ((m_Process.Id.GetHashCode() * 397) ^ m_Process.MainModule.BaseAddress.GetHashCode()) : 0;
        }
    }
} 
```

# javascript - NodeJS does not respond to CURL Request

> ID：16169913
> 
> 赞同：1
> 
> 时间：2013-04-23T12:55:15.700
> 
> 标签：javascript, node.js, curl, mongojs

Im using NodeJS to perform som Queries to a MongoDB. I've set up the routing so when

```
 http://127.0.0.1:8888/GetAllCities 
```

is called, a function name GetAllCities will run on the server and perform a MongoDB query and return the result. This works just fine when I try to visit the page directly in my browser. But when I try to make a CURL request the response is empty.

This is my jquery Ajaxcall

```
 function makeCall(urlToCall, method)
    {
        var params = "url=" + urlToCall + method;
        if(app === "PHP")
        {
            params += "&PHP=PHP";
        }

        $.ajax({
            type: "POST",
            url: "phpProxy.php",
            data: params,
            beforeSend: function()
            {
                document.write(app + ' -- Starting round ' + (i+1) + "<br />");
                document.write('URL: ' + params + "<br />");
                startTime = new Date().getTime();
            },
            success: function(data) {
                endTime = new Date().getTime();
                totalTime = endTime - startTime;
                if(totalTime > highest)
                {
                    highest = totalTime;
                }
                if(totalTime < lowest)
                {
                    lowest = totalTime;
                }
                var row = {};
                row.app = app;
                row.operation = method;
                row.totalTime = totalTime;
                row.run = i+1;
                row.date = new Date();
                document.write('\tTotal time: <strong>' + totalTime + 'ms</strong>' + "<br />");
                times.push(row);
                document.write(data + "<br />");
                document.write('Round done\n' + "<br />" + "<br />");
            },
            error: function(err) {
                console.log('Error');
                console.log(err);
            },
            complete: function()
            {
                i++;
                if(i < 50)
                {
                    makeCall(urlToCall, method);
                }
                else
                {
                    var sum = 0;
                    for(var j = 0; j < times.length; j++)
                    {
                        sum += parseInt(times[j].totalTime);
                    }
                    var avg = sum/times.length;
                    $('body').prepend('<h3>Slowest: ' + highest + 'ms</h3>');
                    $('body').prepend('<h3>Fastest: ' + lowest + 'ms</h3>');
                    $('body').prepend('<h3>Average: ' + avg + 'ms</h3>');

                    myApp.saveToDb(times);
                }
            }
        });
    } 
```

And this is my PHPPROXY FILE:

```
$method = $_SERVER['REQUEST_METHOD'];

$url = $_POST['url'];

$curl=curl_init();
curl_setopt($curl,CURLOPT_URL, $url);
curl_setopt($curl,CURLOPT_POST, TRUE);

if(isset($_POST['PHP']))
{
    $params = array('a' => 'php');
    curl_setopt($curl, CURLOPT_POSTFIELDS, $params);
}
curl_setopt($curl, CURLOPT_RETURNTRANSFER, TRUE);

$result = curl_exec($curl);
curl_close($curl);

echo $result; 
```

And this is my NODEJS requesthandlerfile.

```
var Db = require('mongodb').Db;
var Server = require('mongodb').Server;
var querystring = require("querystring");

function GetAllCities(response)
{
  console.log('Request recieved');
  var databaseUrl = "exjobb";
  var collections = ["cities"]
  var db = require("mongojs").connect(databaseUrl, collections);
  db.cities.find(function(err, cities) {
    response.writeHead(200, {"Content-Type": "application/json"});
    response.write(cities.length + " rows selected from the Database");
    response.end();
    db.close();
  });
}

function GetAllCitiesWhere(response)
{

  var databaseUrl = "exjobb";
  var collections = ["cities"]
  var db = require("mongojs").connect(databaseUrl, collections);
  db.cities.find({state: "AL"}, function(err, cities) {
  response.writeHead(200, {"Content-Type": "application/json"});
  response.write(cities.length + " rows selected from the Database");
  response.end();
  }); 
}

exports.start = start;
exports.GetAllCities = GetAllCities;
exports.GetAllCitiesWhere = GetAllCitiesWhere; 
```

TLDR; My code works on a direct GET when visiting the page in a browser, but not when making ajax request, why? You can find all code [here](https://github.com/josefottosson/exjobb/tree/master/nodeJS)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-17T19:07:43.057

如评论中所述，此问题已解决。

问题是我的 curl 请求中的这一行。

```
curl_setopt($curl,CURLOPT_POST, TRUE); 
```

我将我的 PHP 代理更改为以下设置：

```
$method = $_SERVER['REQUEST_METHOD'];   
$url = $_POST['url'];   
$curl=curl_init();      
curl_setopt_array($curl, array(CURLOPT_RETURNTRANSFER => 1,
CURLOPT_URL => $url,CURLOPT_USERAGENT => 'Josefs PHPPROXY'));
$result = curl_exec($curl);
curl_close($curl);
echo $result; 
```

# r - TraMineR: extract events between equal states from SPELL-based sequence data

> ID：16169914
> 
> 赞同：3
> 
> 时间：2013-04-23T12:55:16.940
> 
> 标签：r, traminer

**Context**

This question concerns sequence analysis using `TraMineR` package. The package offers automatic transformation of temporal sequences (statuses in time) to event sequences (changes between statuses in time). One of the recurrent issues in my analyses concerns the options to distinguish events of change *between equal statuses*.

**Question-specific example**

Suppose we have sequences of employment statuses, e.g. work, unemployment, inactivity, retirement. The analysis is focused on career transitions, distinguishing between *stable* and *transitional* careers. All kinds of transitions are relevant, from work to unemployment, inactivity to work, but also (and most importantly) from *work to work*!

**Question**

For `TraMineR` an event takes place when a status in a sequence is changed. For instance, the respondent had 3 years of work and then 1 in unemployment: Work-Work-Work-Unemployment (assuming annual interval). This is the STS format, representing statuses in time. However, in SPELL format we have additional information, e.g:

```
Status         Time1 Time2

Work           1     2
Work           2     3
Work           3     3
Unemployment   3     4 
```

From the table above we can clearly see that two work-to-work transition events have occurred (otherwise there would be just one line: Work from 1 to 3). The question is whether there is any convenient way to extract an event object from the sequence object based on these data.

**Data**

My data contains work-related respondent statuses in the SPELL format (status, begin & end time), like this:

```
to.SO <- structure(list(ID = c(10, 11, 11, 12, 13, 13, 13, 13, 14, 14,     
         14, 14, 14, 14, 14, 14, 14, 15, 15, 15, 15, 15, 15, 15), status = c(1, 
         1, 1, 1, 1, 1, 1, 1, 2, 3, 1, 2, 3, 2, 3, 1, 1, 1, 3, 1, 3, 3,         
         1, 3), time1 = c(1, 1, 104, 1, 1, 60, 109, 121, 1, 42, 47, 54,         
         64, 72, 78, 85, 116, 1, 29, 39, 69, 74, 78, 88), time2 = c(125,        
         104, 125, 125, 60, 109, 121, 125, 42, 47, 54, 64, 72, 78, 85,          
         116, 125, 29, 39, 69, 74, 78, 88, 125)), .Names = c("ID", "status",    
         "time1", "time2"), row.names = 10:33, class = "data.frame") 
```

**What I have tried**

As per [this post](https://stackoverflow.com/questions/16110508/creating-a-sequence-object-from-spell-data) I must convert SPELL to STS first, then define sequences:

```
sts.data <- seqformat(data=to.SO,from="SPELL",to="STS",
                 id="ID",begin="time1",end="time2",status="status",
                 limit=125,process=FALSE)

sts.seq <- seqdef(sts.data,right="DEL")
alphabed <- c("Work","Study","Unemployed")
alphabet(sts.seq) <- alphabed 
```

The information I require is already lost at this step, but until the bug (see link) is resolved there is no other way. It still shows what I want to achieve:

```
sts.seqe <- seqecreate(sts.seq) # creating events
sts.seqe 
```

**My results**

Here, the first four event sequences are identical. If you look at the SPELL data (to.SO), it is apparent that there are multiple work-to-work transitions involved for respondents with id 11 and 13\. In my other article I solve this by ascribing different statuses to job-1, job-2 and so forth. It is a less desirable strategy however, since it (1) explodes the number of statuses making subsequent dissimilarity analysis difficult and (2) is not theoretically important which job in career it is, the status of employment alone should cover it.

**Thanks**

I imagine this goes beyond the existing package capabilities, but perhaps I am missing something. Thanks in advance for reading this long post (at least) and for having any suggestions.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T15:01:04.480

'seqecreate' 接受不同类型的输入。其中之一是状态序列对象（由 seqdef 生成）。但是您也可以通过提供 TSE 格式的数据来构建事件序列对象。为此，您应该指定三个向量：id、timestamp 和 event。

拼写格式可以被视为 TSE 格式的数据（如果忽略句号的结尾）。开始列给出状态列中的事件发生的时间。

因此，我们可以使用以下代码：

```
## Start by giving some labels to the status vector
to.SO$event <- factor(to.SO$status, levels=1:3, labels=c("Work","Study","Unemployed"))
## Now, we can build the event sequences using seqecreate
## You may want to use timestamp=(to.SO$time1-1) instead. Events sequences start at time=0
seqe <- seqecreate(id=to.SO$ID, timestamp=to.SO$time1, event=to.SO$event)
seqe 
```

现在第四个人有正确的事件序列

如果要分析“工作>工作”转换，则需要重新编码数据。

```
## New vector holding our recoded events
event2 <- as.character(to.SO$event)
## For each row in the TSE data
for(i in 2:nrow(to.SO)){
    if(to.SO[i-1, "ID"]==to.SO[i, "ID"]) {## If we have the same ID (individual)
        if(to.SO[i-1, "event"]=="Work"&& to.SO[i, "event"]=="Work"){ ##Check 
           event2[i] <- "Work>Work"
        }
    }
}
## More general case
event3 <- as.character(to.SO$event)
## For each row in the TSE data
for(i in 2:nrow(to.SO)){
    if(to.SO[i-1, "ID"]==to.SO[i, "ID"]) {## If we have the same ID (individual)
        event3[i] <- paste(to.SO[i-1, "event"], to.SO[i, "event"], sep=">")
    }
} 
```

通过修改此代码，您可以指定您感兴趣的转换。

```
seqe2 <- seqecreate(id=to.SO$ID, timestamp=to.SO$time1-1, event=event2)
seqe2 
```

或者

```
seqe3 <- seqecreate(id=to.SO$ID, timestamp=to.SO$time1-1, event=event3)
seqe3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:57:41.217

我们确实可以想象一个解决方案，按照您的建议从拼写数据创建事件序列。`TraMineR`目前不提供此功能（但请参阅 Matthias 的解决方案）。

您已经在问题中给出的解决方法是将连续的工作区分为`job1`, `job2`, ...

我知道这是不太可取的，但是您可以使用此策略来定义分配相同事件的事件序列，例如`"start new job"`从作业*i*到作业*i* +1 的每个转换。为此，您需要指定一个大小*为 a* x *a*`tmat`的矩阵 ( )，其中*a*是您的状态字母表的大小，它在每个单元格 ( *i* , *j ) 中列出从状态**i*转换到状态*j*时发生的事件。例如，在行和列的交叉处，你会给出，并且因为从切换到*******`job1``job2``"start new job"``job2``job1`应该不可能，您只需将相应的单元格留空。对角线上的单元格 tmat( *i,i* ) 定义状态序列在相应状态*i*开始时的开始事件。一旦定义了矩阵 ( `tmat`)，将事件分配给每个可能的转换，就可以将事件序列对象创建为*******

 **```
seqe <- seqecreate(sts2.seq, tevent=tmat) 
```

并且您仍然可以使用您的原始`sts.seq`状态序列分析与单一的工作状态。

希望这可以帮助。**

# symfony - Doctrine one-to-many situation: how to easily fetch related entities

> ID：16169918
> 
> 赞同：0
> 
> 时间：2013-04-23T12:55:31.437
> 
> 标签：symfony, doctrine, relationship, findby

To simplify, two entities are defined: User and Comment. User can post many comments and every comment has only one user assigned, thus Comment entity has:

```
/**
 * @var \Frontuser
 *
 * @ORM\ManyToOne(targetEntity="Frontuser")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="ownerUserID", referencedColumnName="id")
 * })
 */
private $owneruserid; 
```

However, when in action:

```
$orm = $this->getDoctrine()->getManager();
$repo = $orm->getRepository('CompDBBundle:Comment');
$repo->findBy(array('owneruserid' => $uid); 
```

Error occured, that there's no such field like `owneruserid`.

How can I fetch all the user's comments then? The same happens to similar relations in my DB - looks likes you cannot run `find()` with foreign keys as parameters. I believe a function `$user->getComments()` should be automatically generated/recognised by Doctrine to allow efficient, quick access to related entities.

The example's simple but, what if there are more entities related to my User in the same way? Do I have to declare repositories for each and try to fetch them by it's `owneruserid` foreign keys?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:24:40.167

使用原则，当您定义相关实体时，它的类型是实体类（在本例中为 FrontUser）。因此，首先您的相关实体变量名称具有误导性。它应该是例如

```
private $ownerUser; 
```

然后，为了在相关实体字段上执行 findBy，您必须提供一个实体实例，例如

```
$orm = $this->getDoctrine()->getManager();
$userRepo = $orm->getRepository('CompDBBundle:FrontUser');
$user = $userRepo->findById($uid);
$commentRepo = $orm->getRepository('CompDBBundle:Comment');
$userComments = $commentRepo->findByOwnerUser($user); 
```

如果您没有或想要检索用户实体，您可以使用带有“uid”作为参数的 DQL 查询。

# c# - LINQ : The query results cannot be enumerated more than once

> ID：16169920
> 
> 赞同：6
> 
> 时间：2013-04-23T12:55:41.020
> 
> 标签：c#, linq

This is my code

```
 searchDataContext db = new searchDataContext();

    var query = (from p in db.SearchFirst(city, area)
                select new
                {
                    ID = p.Id,
                    Address = p.address,
                    Level = p.agahilevel

                });
    int count =query.Count();

    // records
    var q = query.Skip(Convert.ToInt32(start)).Take(Convert.ToInt32(width));

    if (q.Count() > 0)
    {
        int index = 0;
        str += "[";
        foreach (var row in q)
        {
            if (index == 0) 
```

I have an error in this code

```
The query results cannot be enumerated more than once. 
```

please check that and answer me.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-23T12:59:16.273

您不能使用缓存查询并对其进行多次迭代...
制作`List<T>`它并再试一次

```
var q = query.ToList(); // work on this 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-23T13:00:41.410

实现您的查询：

```
var addresses = (from p in db.SearchFirst(city, area)
                select new
                {
                    ID = p.Id,
                    Address = p.address,
                    Level = p.agahilevel

                })
                .Skip(Convert.ToInt32(start))
                .Take(Convert.ToInt32(width))
                .ToList(); 
```

然后用于`Enumerable.Any`检查它是否包含元素：

```
if(addresses.Any())
{
    int index = 0; // ...
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-23T13:00:08.363

如果您添加`.ToList()`到查询中，您的问题将得到解决

# jquery - 将鼠标悬停在购物车和打开它的选项卡上时隐藏购物车

> ID：16169921
> 
> 赞同：1
> 
> 时间：2013-04-23T12:55:41.123
> 
> 标签：jquery

我使用两个 div 实现了一个购物车。一个包含购物车图像的“cart”div 和包含购物车项目的“cart_items”div。单击购物车图像时，我可以让 cart_items 向下滑动。我可以在将cart_items 悬停然后离开时隐藏它，我遇到的问题是：

1.  单击购物车然后鼠标离开它而不输入购物车项目时，我无法隐藏购物车项目。
2.  我不能将鼠标悬停在购物车和购物车项目上而不阻止购物车项目隐藏。

cart 和 cart_items 在两个相邻的 div 中。

HTML

```
<div id='header'>
    <div id='cart'><img src='cart.png'></div>
</div>

<div id='container'>
    <div id='cart_items'> contain items that will be pulled from database </div>
</div> 
```

jQuery

```
 $('#cart').click(function(){
    $('#cart_items').slideDown("300");
 });

 $('#cart_items').mouseleave(function(){
    $('#cart_items').hide();
 }); 
```

我做了很多在线搜索，并在两个 div 中添加了许多 jQuery mouseenter 和 mouseleave，但不知何故，这些事件相互取消了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:05:27.840

试试这个。检查你搬到哪里。还要将选择器更改为 #container 以使鼠标离开：

```
$('#container').mouseleave(function (e) {
            if (e.toElement.id != 'cart')
                $('#cart_items').hide();
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:09:40.603

如果您将 cart_item div 放在购物车 div 中，然后在购物车 div 上定义 mouseleave 函数，它应该可以满足您的需求。

[http://jsfiddle.net/uedyW/3/](http://jsfiddle.net/uedyW/3/)

```
<div id='header'>
    <div id='cart'>
        <img src='cart.png'>
        <div id='cart_items'>contain items that will be pulled from database</div>
    </div>
</div>

 $('#cart').click(function () {
     $('#cart_items').slideDown("300");
 });

 $('#cart').mouseleave(function(){
        $('#cart_items').hide();
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T13:20:31.980

您可以将它们都包装起来，然后使用该外部容器：

```
<div id="outerContainer">
    <div id='header'>
        <div id='cart'>
            <img src='cart.png'>
        </div>
    </div>
    <div id='container'>
        <div id='cart_items'>contain items that will be pulled from database</div>
    </div>
</div> 
```

代码

```
 $('#cart').click(function () {
     $('#cart_items').slideDown("300");
 });

 $('#outerContainer').mouseleave(function (e) {
      $('#cart_items').hide();
 }); 
```

示例：http: [//jsfiddle.net/uedyW/6/](http://jsfiddle.net/uedyW/6/)

# android - Google Play 上传失败

> ID：16169923
> 
> 赞同：1
> 
> 时间：2013-04-23T12:55:52.953
> 
> 标签：android, google-play

我最近受雇重写一个现有的 Android 项目。旧项目已发布到 Google Play，但我无权访问源文件或用于签名的证书。

我完成了我的项目，但我无法将其发布为旧版本的替代品，因为我使用不同的证书签署了我的项目。Google Play 也在抱怨，因为我使用了与原始项目不同的包名。

有没有办法绕过这些障碍？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T12:57:03.467

从`GooglePlay`角度来看，这是一个新的应用程序。所以您只能将其发布为新应用程序

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T13:15:56.357

当您更改了它的包名称时......您必须将其作为新应用发布到 google play 上的唯一选择

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T23:24:12.090

*   如果它具有不同的包名称，则它是一个不同的应用程序；这是Android的基础。包名称是您在代码中引用特定应用程序的方式以及搜索特定应用程序的方式等。如果您希望它是同一个应用程序，请保持相同的包名称！

*   如果它使用不同的证书签名，则不能作为升级安装。这大概是因为您无法安装与另一个应用程序具有相同包名的应用程序并读取其私有数据 - 您必须首先删除该应用程序（及其数据）（当然好处是有限的：您可以卸载真正的应用程序并安装一个相似的恶意应用程序并以这种方式窃取用户的数据）。这在 Android 中是一个限制（它不处理证书到期），并且可能会在某个时候修复，但我不希望它很快发生。

我以前也遇到过同样的情况——最初的开发者丢失了一个应用程序的签名密钥，但没有丢失另一个应用程序。我们更改了包名称并将其作为新应用程序发布。

# xpath - Selenium click() 或 isSelected() 不会在 RadioButton 的输入元素上执行

> ID：16169930
> 
> 赞同：0
> 
> 时间：2013-04-23T12:56:27.140
> 
> 标签：xpath, selenium, click

我有位于表格内的单选按钮，例如：

```
<tr id="radiofield-1080-inputRow">
  <td class="x-form-item-body" id="radiofield-1080-bodyEl" colspan="3">
    <input type="button" id="radiofield-1080-inputEl" class="x-form-field" autocomplete="off">
    <label id="radiofield-1080-boxLabelEl" class="x-form-cb-label">My Label</label>
  </td>
</tr> 
```

我确实通过以下代码找到了输入元素：

```
xPath = String.format("//tr/td[contains(@id,'%s')][contains(label,'%s')]/label", xType,      text);
webElement = webDriver.findElement(By.xpath(xPath)); 
```

但`isSelected()`或`click()`似乎不起作用。你有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:14:27.077

在您的定位器代码片段问题中。

使用以下任何定位器

```
By.cssSelector("input[id*='radiofield-']");

By.id("radiofield-1080-inputEl")

By.xpath("//tr/td[contains(@id,'radiofield-')]/input") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:51:23.223

尝试单击“输入”而不是“标签”。输入的xpath：

```
"//input[@id='radiofield-1080-inputEl']" 
```

如果输入的 id 不总是相同的，你可以试试这个，输入的位置将基于标签：

```
//label[text()='My Label']/preceding-sibling::input 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T15:35:47.927

感谢您的所有回答。我的发现得出以下结论：ExtJS 将单选按钮和复选框实现为按钮，因此 selenium isSelected() 不起作用。需要实现 isSelected()，如建议： [How to check if extjs checkbox is selected in selenium?](https://stackoverflow.com/questions/14042121/how-to-check-if-extjs-checkbox-is-selected-in-selenium)

click() 完成工作，因为它是一个按钮。

再次感谢，迈克尔

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T13:07:20.300

有一段时间没有使用 selenium，但从快速谷歌上看，您应该尝试使用 isChecked 和检查/取消检查方法。

这是 Javadoc，但由于某种原因无法获得像样的链接，显然检查 Selenium 对象。如果您使用的是其他版本，或者我误解了某些内容，请见谅。

[http://selenium.googlecode.com/git/docs/api/java/index.html](http://selenium.googlecode.com/git/docs/api/java/index.html)

# java - 使特定用户的会话无效导致自己的 JSF 页面的导航中断

> ID：16169932
> 
> 赞同：4
> 
> 时间：2013-04-23T12:56:31.100
> 
> 标签：java, jsf, session, invalidation

我目前正在维护一个`@ApplicationScoped`bean 中所有当前活动的 HTTPSession 的 Map。（根据这里的建议，以及其他各种主题：[Invalidate Session of a specific user](https://stackoverflow.com/questions/9219393/invalidate-session-of-a-specific-user)）

我正在使用`@WebListener`implementation`HttpSessionListener`的`sessionCreated`方法添加到当前会话列表中，并在`sessionDestroyed`.

管理员用户可以从 JSF (Richfaces 4.3.1) 页面访问此列表，并有选择地使特定会话无效。

**问题是**，当登录的管理员（会话 A）`session.invalidate()`从列表（例如会话 B）中选择并调用使用户的会话无效时，管理员的页面（或会话？）本身就会损坏，其中*当前*的链接/操作页面仍在处理中（我看到从控制台输出中命中操作方法），但没有重定向或导航工作（除了注销链接，它在会话 A 上调用无效，然后成功重定向到登录页面）。控制台中没有显示错误或警告，即使在关闭浏览器窗口并将其重新打开到同一会话 (A) 后，这种破坏行为仍然存在。

通过查看 Chrome 的网络选项卡，我看到每次重定向尝试都会创建一个单独的 POST，但没有别的。

我们的大部分导航都是在 faces-config.xml 中设置的，如下所示：

```
<navigation-case>
        <from-action>#{logoutAction.doLogout}</from-action>
        <to-view-id>/login.xhtml</to-view-id>
        <redirect/>
</navigation-case> 
```

我完全没有想法，特别是因为所有在线建议似乎都指向我目前正在做的事情......有人可以解释为什么会发生这种情况，或者推测我可能做错了什么或如何解决它？

谢谢，如果需要任何更好的信息，请告诉我。

**使用：**

*   Java EE 6
*   JSF 2.1
*   Jboss AS 7.1.1
*   Richfaces 4.3.1

**编辑：**

缩减代码示例...

保存会话映射的 Bean（每个都在自定义包装对象中`SessionUserFacade`，以保存其他用户信息）：

```
@Named
@ApplicationScoped
public class AppSessionsStateBean implements Serializable {

    private final Map<String, SessionUserFacade> currentSessions = Collections.synchronizedMap(new HashMap<String, SessionUserFacade>());

    public void addSession(HttpSession session) {
        currentSessions.put(session.getId(), new SessionUserFacade(null, session));
    }

    public void removeSession(HttpSession session) {
        currentSessions.get(session.getId()).setSession(null);
        currentSessions.remove(session.getId());
    }

    public Map<String, SessionUserFacade> getCurrentSessions() {
        return currentSessions;
    }
} 
```

简单的 @WebListener 来调用应用范围的 bean：

```
@WebListener
public class SessionListener implements HttpSessionListener{

    @Inject
    private AppSessionsStateBean appStateBean;

    @Override
    public void sessionCreated(HttpSessionEvent httpSessionEvent) {
        appStateBean.addSession(httpSessionEvent.getSession());
    }

    @Override
    public void sessionDestroyed(HttpSessionEvent httpSessionEvent) {
        appStateBean.removeSession(httpSessionEvent.getSession());
    }
} 
```

在 bean 中从前端访问的操作方法`@Named` `@ViewAccessScoped`（invalidateSession 只是 的直接包装器`HttpSession.invalidate();`）：

```
public void invalidateSelected() {

    for (SessionUserFacade session : selectionItems) {

        if (session.isLoggedIn()) {
            session.invalidateSession();
        }
    }
    clearSelection();
} 
```

调用自：

```
<a4j:commandButton id="btnConfirmLogout" action="#{sessionManagementAction.invalidateSelected}"
        value="Logout Selected" oncomplete="#{rich:component('forceLogoutPopup')}.hide()"/> 
```

# node.js - How does the 'reverse path' in Node.js Connect work?

> ID：16169937
> 
> 赞同：0
> 
> 时间：2013-04-23T12:56:50.303
> 
> 标签：node.js, connect, middleware

So I understand that Node.js Connect works like a stack through which it runs, starting from the top and going to the bottom. From the Connect introduction by its author at [http://howtonode.org/connect-it](http://howtonode.org/connect-it) it shows an example like

```
var Connect = require('connect');

module.exports = Connect.createServer(
  require('./log-it')(),
  require('./serve-js')()
); 
```

The article reads

> Every request enters the onion at the outside and traverses layer by layer till it hits something that handles it and generates a response. In Connect terms, these are called filters and providers. Once a layer provides a response, the path happens in reverse.

I'm particulary curious about "Once a layer provides a response, **the path happens in reverse**". How does that happen? Every middleware gets called again, but in reverse order?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:24:17.173

不，它们不会再次被反向调用，但是每个中间件都有机会对请求方法进行猴子修补并劫持它们。这并不理想。

```
// basic logger example
module.exports = function () {
  return function logger(req, res, next) {
    var writeHead = res.writeHead;
    res.writeHead = function (code, headers) {
      console.log(req.method, req.url, code);
      res.writeHead = writeHead;
      return res.writeHead(code, headers);
    };
    next();
  };
}; 
```

现在，此代码存在问题，因为 writeHead 不是设置状态代码的唯一方法，因此它不会捕获所有请求。但这是中间件可以在出路时捕获事件的基本方式。

# c - Using realloc inside a function

> ID：16169939
> 
> 赞同：3
> 
> 时间：2013-04-23T12:57:08.863
> 
> 标签：c, function, dynamic-memory-allocation

My apologies, I know many related questions have already been asked, so I will keep it very simple.

Despite some years of programming I cannot find the correct syntax for resizing and modifying an array (or several) inside a function. For example, say I want a function to fill an array with a set of "n" numbers, where "n" is defined within the array:

```
int main(int argc, char *argv[]) {
    float *data = NULL
    int n = myfunction(data);
    for(i=0;i<n;i++) printf("%f\n",data[i]);
    free(data);
}

int myfunction(float *input) {
    int i,n=10;
    input = (float *) realloc( input, n*sizeof(float) );
    if(input!=NULL) {
        for(i=0;i<n;i++) input[i] = (float)i;
        return(n);
    else return(-1)
} 
```

I know this will not work, as I probably need to use a pointer to a pointer, but I cannot resolve which combination of pointers, pointers-to-pointers, and address notation to use inside and outside the function to use.

Any simple suggestions appreciated!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T12:58:50.773

您需要将指针传递给指向`myFunction`

```
#include <stdio.h>
#include <stdlib.h>

int myfunction(float **input) {
    int i,n=10;
    *input = realloc( *input, n*sizeof(float) );
    if(*input!=NULL) {
        for(i=0;i<n;i++) (*input)[i] = (float)i;
        return(n);
    }
    else return(-1);
}

int main(int argc, char *argv[]) {
    float *data = NULL;
    int n = myfunction(&data);
    int i;
    for(i=0;i<n;i++) printf("%f\n",data[i]);
    free(data);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:05:41.587

将旧指针传递给 是最简单的，让它返回新指针（如果设法就地扩大区域，`myfunction()`它可能与旧指针相同）。`realloc()`

请注意，这`realloc()`可能会失败，在这种情况下，您不想丢失仍然分配的旧内存，因此在不检查的情况下覆盖相同的指针是一个坏主意。

# python - check if something is an attribute or decorator in python

> ID：16169948
> 
> 赞同：0
> 
> 时间：2013-04-23T12:57:27.513
> 
> 标签：python, decorator, magic-methods

I want to wrap a model class of a legacy codebase. The model class has a dictionary with meta-information and properties that access that dictionary as well as attributes. I want to unify the access to meta information, properties, and attributes with the `an_object[some_key]` syntax using `__getitem__`. The problem is, that some of the properties have getters but not setters. So trying to check if an attribute exists (via hasattr) returns True, but then setting that attribute fails because there is no property defined.

How can I decide if I can set an attribute safely or if it is an property that I need to set in the meta-dictionary?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T13:20:34.437

您可以通过查看类上的相同属性来检测某物是否是属性：

```
class_attribute = getattr(type(instance), some_key, None)
if isinstance(class_attribute, property):
    # this is a property
    if class_attribute.fset is None:
        print "Read-only" 
```

您还可以分别测试`.fget`和`.fdel`测试属性是否具有 getter 和 deleter。

但是，您始终可以捕获`AttributeError`异常来处理缺少的 setter：

```
>>> class Foo(object):
...     @property
...     def bar(self):
...         return 'spam'
... 
>>> f = Foo()
>>> class_attribute = getattr(type(f), 'bar', None)
>>> isinstance(class_attribute, property)
True
>>> class_attribute.fget
<function bar at 0x10aa8c668>
>>> class_attribute.fset is None
True
>>> try:
...     f.bar = 'baz'
... except AttributeError:
...     print 'Read-only'
... 
Read-only 
```

# java - Android：在小部件中使用 Chronometer

> ID：16169955
> 
> 赞同：1
> 
> 时间：2013-04-23T12:57:37.743
> 
> 标签：java, android, widget, chronometer

你能帮我在小部件中初始化组件 Chronometer 吗？我不知道该怎么做以及如何运行它。

PS对不起英语不好。

# posix - 获取跳数或接收 ttl

> ID：16169957
> 
> 赞同：1
> 
> 时间：2013-04-23T12:57:41.827
> 
> 标签：posix, ttl

我如何（以编程方式）检索（以编程方式）在 Linux（或任何其他 posix 系统，尽管也欢迎仅限 linux 的解决方案）系统上接收到的 TCP 流的数据/数据包的 TTL/跃点计数值？

我知道我不会知道初始 TTL，但我仍然可以看到该值的变化。然后我会知道 tcp-stream 的路由是否会改变，帮助我解释延迟的变化。

我将在 httping 中使用这些知识：我试图给用户句柄来解释某些延迟的原因可能是什么。

# jquery - Lightbox2 未在 IE7/8 中生成

> ID：16169961
> 
> 赞同：0
> 
> 时间：2013-04-23T12:57:54.707
> 
> 标签：jquery, internet-explorer, lightbox2

在 ie7/8 中生成灯箱对象时出现问题。

覆盖显示，但不显示图像加载器或图像本身。

例子：

在 Chrome 中： ![铬合金](https://i.stack.imgur.com/WLaDg.png)

在 IE8 中 ![IE8](https://i.stack.imgur.com/FcULk.png)

这是我的 Lightbox.js：

```
(function () {
    var $, Lightbox, LightboxOptions;

    $ = jQuery;

    LightboxOptions = (function () {

        function LightboxOptions() {
            this.fileLoadingImage = '../bundles/lightbox/images/loading.gif';
            this.fileCloseImage = '../bundles/lightbox/images/close.png';
            this.resizeDuration = 700;
            this.fadeDuration = 500;
            this.labelImage = "Image";
            this.labelOf = "of";
        }

        return LightboxOptions;

    })();

    Lightbox = (function () {

        function Lightbox(options) {
            this.options = options;
            this.album = [];
            this.currentImageIndex = void 0;
            this.init();
        }

        Lightbox.prototype.init = function () {
            this.enable();
            return this.build();
        };

        Lightbox.prototype.enable = function () {
            var _this = this;
            return $('body').on('click', 'a[class^=lightbox], area[class^=lightbox]', function (e) {
                _this.start($(e.currentTarget));
                return false;
            });
        };

        Lightbox.prototype.build = function () {
            var $lightbox,
            _this = this;
            $("<div>", {
                id: 'lightboxOverlay'
            }).after($('<div/>', {
                id: 'lightbox'
            }).append($('<div/>', {
                "class": 'lb-outerContainer'
            }).append($('<div/>', {
                "class": 'lb-container'
            }).append($('<img/>', {
                "class": 'lb-image'
            }), $('<div/>', {
                "class": 'lb-nav'
            }).append($('<a/>', {
                "class": 'lb-prev'
            }), $('<a/>', {
                "class": 'lb-next'
            })), $('<div/>', {
                "class": 'lb-loader'
            }).append($('<a/>', {
                "class": 'lb-cancel'
            }).append($('<img/>', {
                src: this.options.fileLoadingImage
            }))))), $('<div/>', {
                "class": 'lb-dataContainer'
            }).append($('<div/>', {
                "class": 'lb-data'
            }).append($('<div/>', {
                "class": 'lb-details'
            }).append($('<span/>', {
                "class": 'lb-caption'
            }), $('<span/>', {
                "class": 'lb-number'
            })), $('<div/>', {
                "class": 'lb-closeContainer'
            }).append($('<a/>', {
                "class": 'lb-close'
            }).append($('<img/>', {
                src: this.options.fileCloseImage
            }))))))).appendTo($('body'));
            $('#lightboxOverlay').hide().on('click', function (e) {
                _this.end();
                return false;
            });
            $lightbox = $('#lightbox');
            $lightbox.hide().on('click', function (e) {
                if ($(e.target).attr('id') === 'lightbox') _this.end();
                return false;
            });
            $lightbox.find('.lb-outerContainer').on('click', function (e) {
                if ($(e.target).attr('id') === 'lightbox') _this.end();
                return false;
            });
            $lightbox.find('.lb-prev').on('click', function (e) {
                _this.changeImage(_this.currentImageIndex - 1);
                return false;
            });
            $lightbox.find('.lb-next').on('click', function (e) {
                _this.changeImage(_this.currentImageIndex + 1);
                return false;
            });
            $lightbox.find('.lb-loader, .lb-close').on('click', function (e) {
                _this.end();
                return false;
            });
        };

        Lightbox.prototype.start = function ($link) {
            var $lightbox, $window, a, i, imageNumber, left, top, _len, _ref;
            $(window).on("resize", this.sizeOverlay);
            $('select, object, embed').css({
                visibility: "hidden"
            });
            $('#lightboxOverlay').width($(document).width()).height($(document).height()).fadeIn(this.options.fadeDuration);
            this.album = [];
            imageNumber = 0;
            if ($link.attr('class') === 'lightbox') {
                this.album.push({
                    link: $link.attr('href'),
                    title: $link.attr('title')
                });
            } else {
                _ref = $($link.prop("tagName") + '[class="' + $link.attr('class') + '"]');
                for (i = 0, _len = _ref.length; i < _len; i++) {
                    a = _ref[i];
                    this.album.push({
                        link: $(a).attr('href'),
                        title: $(a).attr('title')
                    });
                    if ($(a).attr('href') === $link.attr('href')) imageNumber = i;
                }
            }
            $window = $(window);
            top = $window.scrollTop() + $window.height() / 10;
            left = $window.scrollLeft();
            $lightbox = $('#lightbox');
            $lightbox.css({
                top: top + 'px',
                left: left + 'px'
            }).fadeIn(this.options.fadeDuration);
            this.changeImage(imageNumber);
        };

        Lightbox.prototype.changeImage = function (imageNumber) {
            var $image, $lightbox, preloader,
            _this = this;
            this.disableKeyboardNav();
            $lightbox = $('#lightbox');
            $image = $lightbox.find('.lb-image');
            this.sizeOverlay();
            $('#lightboxOverlay').fadeIn(this.options.fadeDuration);
            $('.loader').fadeIn('slow');
            $lightbox.find('.lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption').hide();
            $lightbox.find('.lb-outerContainer').addClass('animating');
            $lightbox.find('.lb-loader').show();
            preloader = new Image();
            preloader.onload = function () {
                $image.attr('src', _this.album[imageNumber].link);
                $image.width = preloader.width;
                $image.height = preloader.height;
                return _this.sizeContainer(preloader.width, preloader.height);
            };
            preloader.src = this.album[imageNumber].link;
            this.currentImageIndex = imageNumber;
        };

        Lightbox.prototype.sizeOverlay = function () {
            return $('#lightboxOverlay').width($(document).width()).height($(document).height());
        };

        Lightbox.prototype.sizeContainer = function (imageWidth, imageHeight) {
            var $container, $lightbox, $outerContainer, containerBottomPadding, containerLeftPadding, containerRightPadding, containerTopPadding, newHeight, newWidth, oldHeight, oldWidth,
            _this = this;
            $lightbox = $('#lightbox');
            $outerContainer = $lightbox.find('.lb-outerContainer');
            oldWidth = $outerContainer.outerWidth();
            oldHeight = $outerContainer.outerHeight();
            $container = $lightbox.find('.lb-container');
            containerTopPadding = parseInt($container.css('padding-top'), 10);
            containerRightPadding = parseInt($container.css('padding-right'), 10);
            containerBottomPadding = parseInt($container.css('padding-bottom'), 10);
            containerLeftPadding = parseInt($container.css('padding-left'), 10);
            newWidth = imageWidth + containerLeftPadding + containerRightPadding;
            newHeight = imageHeight + containerTopPadding + containerBottomPadding;
            if (newWidth !== oldWidth && newHeight !== oldHeight) {
                $outerContainer.animate({
                    width: newWidth,
                    height: newHeight
                }, this.options.resizeDuration, 'swing');
            } else if (newWidth !== oldWidth) {
                $outerContainer.animate({
                    width: newWidth
                }, this.options.resizeDuration, 'swing');
            } else if (newHeight !== oldHeight) {
                $outerContainer.animate({
                    height: newHeight
                }, this.options.resizeDuration, 'swing');
            }
            setTimeout(function () {
                $lightbox.find('.lb-dataContainer').width(newWidth);
                $lightbox.find('.lb-prevLink').height(newHeight);
                $lightbox.find('.lb-nextLink').height(newHeight);
                _this.showImage();
            }, this.options.resizeDuration);
        };

        Lightbox.prototype.showImage = function () {
            var $lightbox;
            $lightbox = $('#lightbox');
            $lightbox.find('.lb-loader').hide();
            $lightbox.find('.lb-image').fadeIn('slow');
            this.updateNav();
            this.updateDetails();
            this.preloadNeighboringImages();
            this.enableKeyboardNav();
        };

        Lightbox.prototype.updateNav = function () {
            var $lightbox;
            $lightbox = $('#lightbox');
            $lightbox.find('.lb-nav').show();
            if (this.currentImageIndex > 0) $lightbox.find('.lb-prev').show();
            if (this.currentImageIndex < this.album.length - 1) {
                $lightbox.find('.lb-next').show();
            }
        };

        Lightbox.prototype.updateDetails = function () {
            var $lightbox,
            _this = this;
            $lightbox = $('#lightbox');
            if (typeof this.album[this.currentImageIndex].title !== 'undefined' && this.album[this.currentImageIndex].title !== "") {
                $lightbox.find('.lb-caption').html(this.album[this.currentImageIndex].title).fadeIn('fast');
            }
            if (this.album.length > 1) {
                $lightbox.find('.lb-number').html(this.options.labelImage + ' ' + (this.currentImageIndex + 1) + ' ' + this.options.labelOf + '  ' + this.album.length).fadeIn('fast');
            } else {
                $lightbox.find('.lb-number').hide();
            }
            $lightbox.find('.lb-outerContainer').removeClass('animating');
            $lightbox.find('.lb-dataContainer').fadeIn(this.resizeDuration, function () {
                return _this.sizeOverlay();
            });
        };

        Lightbox.prototype.preloadNeighboringImages = function () {
            var preloadNext, preloadPrev;
            if (this.album.length > this.currentImageIndex + 1) {
                preloadNext = new Image();
                preloadNext.src = this.album[this.currentImageIndex + 1].link;
            }
            if (this.currentImageIndex > 0) {
                preloadPrev = new Image();
                preloadPrev.src = this.album[this.currentImageIndex - 1].link;
            }
        };

        Lightbox.prototype.enableKeyboardNav = function () {
            $(document).on('keyup.keyboard', $.proxy(this.keyboardAction, this));
        };

        Lightbox.prototype.disableKeyboardNav = function () {
            $(document).off('.keyboard');
        };

        Lightbox.prototype.keyboardAction = function (event) {
            var KEYCODE_ESC, KEYCODE_LEFTARROW, KEYCODE_RIGHTARROW, key, keycode;
            KEYCODE_ESC = 27;
            KEYCODE_LEFTARROW = 37;
            KEYCODE_RIGHTARROW = 39;
            keycode = event.keyCode;
            key = String.fromCharCode(keycode).toLowerCase();
            if (keycode === KEYCODE_ESC || key.match(/x|o|c/)) {
                this.end();
            } else if (key === 'p' || keycode === KEYCODE_LEFTARROW) {
                if (this.currentImageIndex !== 0) {
                    this.changeImage(this.currentImageIndex - 1);
                }
            } else if (key === 'n' || keycode === KEYCODE_RIGHTARROW) {
                if (this.currentImageIndex !== this.album.length - 1) {
                    this.changeImage(this.currentImageIndex + 1);
                }
            }
        };

        Lightbox.prototype.end = function () {
            this.disableKeyboardNav();
            $(window).off("resize", this.sizeOverlay);
            $('#lightbox').fadeOut(this.options.fadeDuration);
            $('#lightboxOverlay').fadeOut(this.options.fadeDuration);
            return $('select, object, embed').css({
                visibility: "visible"
            });
        };

        return Lightbox;

    })();

    $(function () {
        var lightbox, options;
        options = new LightboxOptions();
        lightbox = new Lightbox(options);
        return lightbox;
    });

}).call(this); 
```

此代码适用于 Chrome、Firefox 和 Safari。

我不确定是什么导致了这个问题，我已经通过控制台并且没有产生错误。

任何帮助都将不胜感激。

这是测试页面的[链接](http://ge.verscreative.co.uk/portfolio/images.php?cid=2&subid=7)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:45:57.957

大家看这里：

[https://github.com/sibprogrammer/lightbox2/commit/002a6396d07ee0aea0a87e7cc3e86b5ce5f395cd](https://github.com/sibprogrammer/lightbox2/commit/002a6396d07ee0aea0a87e7cc3e86b5ce5f395cd)

html5shiv 的兼容性修复。

完整的 lightbox.js

```
(function() {
  var $, Lightbox, LightboxOptions;

  $ = jQuery;

  LightboxOptions = (function() {

    function LightboxOptions() {
      this.fileLoadingImage = '../bundles/lightbox/images/loading.gif';
      this.fileCloseImage = '../bundles/lightbox/images/close.png';
      this.resizeDuration = 700;
      this.fadeDuration = 500;
      this.labelImage = "Image";
      this.labelOf = "of";
    }

    return LightboxOptions;

  })();

  Lightbox = (function() {

    function Lightbox(options) {
      this.options = options;
      this.album = [];
      this.currentImageIndex = void 0;
      this.init();
    }

    Lightbox.prototype.init = function() {
      this.enable();
      return this.build();
    };

    Lightbox.prototype.enable = function() {
      var _this = this;
      return $('body').on('click', 'a[class^=lightbox], area[class^=lightbox]', function(e) {
        _this.start($(e.currentTarget));
        return false;
      });
    };

    Lightbox.prototype.build = function() {
      var $lightbox,
        _this = this;
      $("<div>", {
        id: 'lightboxOverlay'
      }).appendTo($('body'));
      $('<div/>', {
        id: 'lightbox'
      }).append($('<div/>', {
        "class": 'lb-outerContainer'
      }).append($('<div/>', {
        "class": 'lb-container'
      }).append($('<img/>', {
        "class": 'lb-image'
      }), $('<div/>', {
        "class": 'lb-nav'
      }).append($('<a/>', {
        "class": 'lb-prev'
      }), $('<a/>', {
        "class": 'lb-next'
      })), $('<div/>', {
        "class": 'lb-loader'
      }).append($('<a/>', {
        "class": 'lb-cancel'
      }).append($('<img/>', {
        src: this.options.fileLoadingImage
      }))))), $('<div/>', {
        "class": 'lb-dataContainer'
      }).append($('<div/>', {
        "class": 'lb-data'
      }).append($('<div/>', {
        "class": 'lb-details'
      }).append($('<span/>', {
        "class": 'lb-caption'
      }), $('<span/>', {
        "class": 'lb-number'
      })), $('<div/>', {
        "class": 'lb-closeContainer'
      }).append($('<a/>', {
        "class": 'lb-close'
      }).append($('<img/>', {
        src: this.options.fileCloseImage
      })))))).appendTo($('body'));
      $('#lightboxOverlay').hide().on('click', function(e) {
        _this.end();
        return false;
      });
      $lightbox = $('#lightbox');
      $lightbox.hide().on('click', function(e) {
        if ($(e.target).attr('id') === 'lightbox') _this.end();
        return false;
      });
      $lightbox.find('.lb-outerContainer').on('click', function(e) {
        if ($(e.target).attr('id') === 'lightbox') _this.end();
        return false;
      });
      $lightbox.find('.lb-prev').on('click', function(e) {
        _this.changeImage(_this.currentImageIndex - 1);
        return false;
      });
      $lightbox.find('.lb-next').on('click', function(e) {
        _this.changeImage(_this.currentImageIndex + 1);
        return false;
      });
      $lightbox.find('.lb-loader, .lb-close').on('click', function(e) {
        _this.end();
        return false;
      });
    };

    Lightbox.prototype.start = function($link) {
      var $lightbox, $window, a, i, imageNumber, left, top, _len, _ref;
      $(window).on("resize", this.sizeOverlay);
      $('select, object, embed').css({
        visibility: "hidden"
      });
      $('#lightboxOverlay').width($(document).width()).height($(document).height()).fadeIn(this.options.fadeDuration);
      this.album = [];
      imageNumber = 0;
      if ($link.attr('rel') === 'lightbox') {
        this.album.push({
          link: $link.attr('href'),
          title: $link.attr('title')
        });
      } else {
        _ref = $($link.prop("tagName") + '[class="' + $link.attr('class') + '"]');
        for (i = 0, _len = _ref.length; i < _len; i++) {
          a = _ref[i];
          this.album.push({
            link: $(a).attr('href'),
            title: $(a).attr('title')
          });
          if ($(a).attr('href') === $link.attr('href')) imageNumber = i;
        }
      }
      $window = $(window);
      top = $window.scrollTop() + $window.height() / 10;
      left = $window.scrollLeft();
      $lightbox = $('#lightbox');
      $lightbox.css({
        top: top + 'px',
        left: left + 'px'
      }).fadeIn(this.options.fadeDuration);
      this.changeImage(imageNumber);
    };

    Lightbox.prototype.changeImage = function(imageNumber) {
      var $image, $lightbox, preloader,
        _this = this;
      this.disableKeyboardNav();
      $lightbox = $('#lightbox');
      $image = $lightbox.find('.lb-image');
      this.sizeOverlay();
      $('#lightboxOverlay').fadeIn(this.options.fadeDuration);
      $('.loader').fadeIn('slow');
      $lightbox.find('.lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption').hide();
      $lightbox.find('.lb-outerContainer').addClass('animating');
      preloader = new Image;
      preloader.onload = function() {
        $image.attr('src', _this.album[imageNumber].link);
        $image.width = preloader.width;
        $image.height = preloader.height;
        return _this.sizeContainer(preloader.width, preloader.height);
      };
      preloader.src = this.album[imageNumber].link;
      this.currentImageIndex = imageNumber;
    };

    Lightbox.prototype.sizeOverlay = function() {
      return $('#lightboxOverlay').width($(document).width()).height($(document).height());
    };

    Lightbox.prototype.sizeContainer = function(imageWidth, imageHeight) {
      var $container, $lightbox, $outerContainer, containerBottomPadding, containerLeftPadding, containerRightPadding, containerTopPadding, newHeight, newWidth, oldHeight, oldWidth,
        _this = this;
      $lightbox = $('#lightbox');
      $outerContainer = $lightbox.find('.lb-outerContainer');
      oldWidth = $outerContainer.outerWidth();
      oldHeight = $outerContainer.outerHeight();
      $container = $lightbox.find('.lb-container');
      containerTopPadding = parseInt($container.css('padding-top'), 10);
      containerRightPadding = parseInt($container.css('padding-right'), 10);
      containerBottomPadding = parseInt($container.css('padding-bottom'), 10);
      containerLeftPadding = parseInt($container.css('padding-left'), 10);
      newWidth = imageWidth + containerLeftPadding + containerRightPadding;
      newHeight = imageHeight + containerTopPadding + containerBottomPadding;
      if (newWidth !== oldWidth && newHeight !== oldHeight) {
        $outerContainer.animate({
          width: newWidth,
          height: newHeight
        }, this.options.resizeDuration, 'swing');
      } else if (newWidth !== oldWidth) {
        $outerContainer.animate({
          width: newWidth
        }, this.options.resizeDuration, 'swing');
      } else if (newHeight !== oldHeight) {
        $outerContainer.animate({
          height: newHeight
        }, this.options.resizeDuration, 'swing');
      }
      setTimeout(function() {
        $lightbox.find('.lb-dataContainer').width(newWidth);
        $lightbox.find('.lb-prevLink').height(newHeight);
        $lightbox.find('.lb-nextLink').height(newHeight);
        _this.showImage();
      }, this.options.resizeDuration);
    };

    Lightbox.prototype.showImage = function() {
      var $lightbox;
      $lightbox = $('#lightbox');
      $lightbox.find('.lb-loader').hide();
      $lightbox.find('.lb-image').fadeIn('slow');
      this.updateNav();
      this.updateDetails();
      this.preloadNeighboringImages();
      this.enableKeyboardNav();
    };

    Lightbox.prototype.updateNav = function() {
      var $lightbox;
      $lightbox = $('#lightbox');
      $lightbox.find('.lb-nav').show();
      if (this.currentImageIndex > 0) $lightbox.find('.lb-prev').show();
      if (this.currentImageIndex < this.album.length - 1) {
        $lightbox.find('.lb-next').show();
      }
    };

    Lightbox.prototype.updateDetails = function() {
      var $lightbox,
        _this = this;
      $lightbox = $('#lightbox');
      if (typeof this.album[this.currentImageIndex].title !== 'undefined' && this.album[this.currentImageIndex].title !== "") {
        $lightbox.find('.lb-caption').html(this.album[this.currentImageIndex].title).fadeIn('fast');
      }
      if (this.album.length > 1) {
        $lightbox.find('.lb-number').html(this.options.labelImage + ' ' + (this.currentImageIndex + 1) + ' ' + this.options.labelOf + '  ' + this.album.length).fadeIn('fast');
      } else {
        $lightbox.find('.lb-number').hide();
      }
      $lightbox.find('.lb-outerContainer').removeClass('animating');
      $lightbox.find('.lb-dataContainer').fadeIn(this.resizeDuration, function() {
        return _this.sizeOverlay();
      });
    };

    Lightbox.prototype.preloadNeighboringImages = function() {
      var preloadNext, preloadPrev;
      if (this.album.length > this.currentImageIndex + 1) {
        preloadNext = new Image;
        preloadNext.src = this.album[this.currentImageIndex + 1].link;
      }
      if (this.currentImageIndex > 0) {
        preloadPrev = new Image;
        preloadPrev.src = this.album[this.currentImageIndex - 1].link;
      }
    };

    Lightbox.prototype.enableKeyboardNav = function() {
      $(document).on('keyup.keyboard', $.proxy(this.keyboardAction, this));
    };

    Lightbox.prototype.disableKeyboardNav = function() {
      $(document).off('.keyboard');
    };

    Lightbox.prototype.keyboardAction = function(event) {
      var KEYCODE_ESC, KEYCODE_LEFTARROW, KEYCODE_RIGHTARROW, key, keycode;
      KEYCODE_ESC = 27;
      KEYCODE_LEFTARROW = 37;
      KEYCODE_RIGHTARROW = 39;
      keycode = event.keyCode;
      key = String.fromCharCode(keycode).toLowerCase();
      if (keycode === KEYCODE_ESC || key.match(/x|o|c/)) {
        this.end();
      } else if (key === 'p' || keycode === KEYCODE_LEFTARROW) {
        if (this.currentImageIndex !== 0) {
          this.changeImage(this.currentImageIndex - 1);
        }
      } else if (key === 'n' || keycode === KEYCODE_RIGHTARROW) {
        if (this.currentImageIndex !== this.album.length - 1) {
          this.changeImage(this.currentImageIndex + 1);
        }
      }
    };

    Lightbox.prototype.end = function() {
      this.disableKeyboardNav();
      $(window).off("resize", this.sizeOverlay);
      $('#lightbox').fadeOut(this.options.fadeDuration);
      $('#lightboxOverlay').fadeOut(this.options.fadeDuration);
      return $('select, object, embed').css({
        visibility: "visible"
      });
    };

    return Lightbox;

  })();

  $(function() {
    var lightbox, options;
    options = new LightboxOptions;
    return lightbox = new Lightbox(options);
  });

}).call(this); 
```

# git - 基于 SSH 选择性访问 Git 存储库

> ID：16169962
> 
> 赞同：1
> 
> 时间：2013-04-23T12:57:55.720
> 
> 标签：git, ssh, permissions, repository

我有一个带有六个 Git 存储库的服务器，我可以通过一个 SSH 帐户对其进行读写访问，所有这些都在 /opt/git/ 中，所有这些都归 SSH 帐户所有。

我想给其他人一些存储库的读写访问权限，但不是全部。

*   如何创建一个只能访问少数选定存储库的新 SSH 用户？
*   我可以使用文件权限（当前为 0755）来控制这种类型的访问吗？
*   有没有最佳实践？

在很长一段时间内我们不太可能有第三个开发人员，至少在我们得到一个合适的系统管理员之前不会，所以如果它“现在足够好”就可以了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:17:41.890

这最好由**[gitolite](https://stackoverflow.com/questions/13318715/how-do-programs-like-gitolite-work/13320256#13320256)**（[授权层](http://gitolite.com/gitolite/auth.html)）管理，它允许您配置以下列表：

*   ssh 用户密钥
*   存储库

并将您想要的用户关联到正确的存储库。

所有用户仍将使用帐户 git 通过 ssh 访问这些存储库，但使用他们自己的公共/私有 ssh 密钥（在 gitolite 配置文件中注册），使用类似于以下命令生成：

```
ssh-keygen -t rsa -f "${H}/.ssh/myLogin" -C "My Gitolite access (not interactive)" -q -P "" 
```

每个用户都将设置一个[`%HOME%/.ssh/config`文件](https://stackoverflow.com/questions/10906633/users-are-asked-for-password-while-using-gitolite/10909791#10909791)以引用`myLogin/myLogin.pub`密钥。

# c++ - 以编程方式检测 VPN 连接 (c++)

> ID：16169963
> 
> 赞同：0
> 
> 时间：2013-04-23T12:57:56.257
> 
> 标签：c++, network-programming, vpn

好的，这是交易。我正在开发一个程序，需要确定用户是通过 VPN 连接还是直接连接到特定 LAN。如果它连接到局域网，它需要做一些事情。如果它是“离线”的（意味着它没有连接到局域网，但可以连接到互联网），它需要做其他事情。关于如何在 C++ 中执行此操作的任何想法？是否有 API 调用来检查网络连接是否为 VPN 连接？我正在寻找类似“IsVPNConnection(...)”的东西。

**编辑**

我使用的操作系统是 Windows 7。我正在寻找一种独立于 VPN 类型的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:37:12.410

VPN 试图透明，所以这会很棘手。

大多数机器只有一条通往其他机器的路线。使用 VPN 可能有两条路线。所以你可能会检查路由表。一些 VPN 客户端禁用本地网络，因此您将只返回一个路由。

如果您可以告诉您的程序本地子网上的 IP 地址，那么这很容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:07:42.857

根据您连接的位置（LAN / VPN），您将可以访问不同的网络资源（服务器）。我最好的选择是 ping ( *ICMP echo* ) 这些服务器或尝试访问它们托管的服务，并根据成功/失败猜测您连接到哪个网络。正如@PaulR 提到的，如何做到这一点完全取决于您的操作系统。

涉及枚举网络连接、路由表等的任何其他解决方案很可能要复杂得多且容易出错，所以我会完全避免这种情况，并使用我提到的简单服务检测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-25T14:51:03.340

我试图确定同样的事情，这是我得到的最接近的。

我们使用瞻博网络网络连接，我发现当我直接插入网络时它会自行关闭。因此，如果它在那里运行，则很有可能您没有直接连接。如果它没有运行，那么您要么是直接连接的，要么没有使用您的内部服务器。因此，使用这种方法来获取进程列表并检查您的 VPN 进程，结合上述仅在公司网络内可用的 ping 服务器的方法可能会给您带来可靠的结果。我使用此代码来测试我的 VPN 进程。它是 CLR，不确定您是否会使用 .Net 资源...

```
#include "stdafx.h"

#using <mscorlib.dll>
#using <System.dll>

using namespace System;
using namespace System::Diagnostics;
using namespace System::ComponentModel;

int main() {
    System::String ^procName = "dsNetworkConnect";

    array<System::Diagnostics::Process^>^matches =
        System::Diagnostics::Process::GetProcessesByName(procName);

    if (matches->Length > 0)
        System::Console::WriteLine("Process " + matches[0]->ProcessName + 
           " found - do something");
    else
        System::Console::WriteLine("Process not found, do something else.");
    System::Console::ReadKey();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-12T08:42:15.507

如果您想要做的主要是关心速度，您可以对 ping 计时。LAN 通常会在很少的几毫秒内做出响应，而 VPN 可能至少需要几十毫秒。

# php - Change all URLS when Moving from Development to Live

> ID：16169964
> 
> 赞同：0
> 
> 时间：2013-04-23T12:57:58.513
> 
> 标签：php, html

I am sure that this is a repost but I cannot find a question the same as what I want to find out. Essentially, whenever I am working offline, all URIs that I use across the site refer to offline locations eg 127.0.0.1/home.html however, when I go to upload the site, these URIs need to be changed to their equivalents eg example.com/home.html and I either need to go through all of the pages and update these references or use some php to insert the correct address at every point where an address is used. At the minute I am using something like this:

Top of every page:

```
<?php $offline = false; ?> 
```

Link:

```
<a href="<?php echo ($offline ? '127.0.0.1' : 'example.com'); ?>/home.html">Home</a> 
```

But this seems like a poor way to achieve something which should be relatively simple. What is the standard way of keeping these references up to date. I considered using relative links everywhere but that proved to have problems (for example view includes don't work correctly) and I tried setting the `base` `href` to the homepage but that threw up other problems.

Any suggestions would be very much appreciated. Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:10:50.750

```
$server=$_SERVER['SERVER_ADDR'];
// Local
if(strstr($server,'127.0.0'))
{
    define('ROOT_PATH','http://127.0.0.1/');
}
// Server
else
{
    define('ROOT_PATH','http://www.yoursite.com/');
} 
```

将此代码放在 php 文件中并**包含在每个页面**中。

接着：

```
<a href="<?php echo ROOT_PATH?>/home.html">Home</a> 
```

在这种情况下，您也可以将文件放在文件夹中，例如：

```
define('ROOT_PATH','http://www.yoursite.com/mysite/'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T11:34:18.227

我发现解决此问题的一种巧妙方法是修改您的 HOSTS 文件，使其将 example.com 指向 127.0.0.1，以便您可以在任何地方引用 example.com，但在您的开发完成之前被重定向到 127.0.0.1 .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T13:07:20.080

正如 Waygood 所建议的，听起来您需要将路径从绝对路径更改为站点根相对路径或相对路径。示例：如果使用站点根目录，则 127.0.0.1/home.html 将变为 /home.html。或者，如果有必须包含绝对路径的原因，您可以在服务器上设置环境变量或指示环境类型的 PHP 常量，并根据此值切换链接。使用环境变量的额外好处是能够在您的开发和生产机器上保持完全相同的代码库，而不必求助于主机或 IP 检测。这是我使用的 zend 框架文档指南中的一个示例：

```
defined('APPLICATION_ENV') || define('APPLICATION_ENV',
    (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') : 'production')); 
```

来自： http: [//framework.zend.com/manual/1.12/en/zend.application.quick-start.html](http://framework.zend.com/manual/1.12/en/zend.application.quick-start.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T13:44:08.920

Another way you could do it is using relative paths.

For files in the same directory you'd use ./ and for files above that directory use ../ This works for anchors in HTML and requires and includes in PHP.

# objective-c - NSWindow 在单击标题栏时阻止窗口排序

> ID：16169965
> 
> 赞同：2
> 
> 时间：2013-04-23T12:58:01.670
> 
> 标签：objective-c, macos, nswindow, titlebar

`[NSApp preventWindowOrdering]`适合`NSView`with`shouldDelayWindowOrderingForEvent`和`acceptsFirstMouse`。有没有人为`NSWindow's`标题栏实现了相同的功能？

# wordpress - 阻止 WordPress fetch_feed 剥离锚标签

> ID：16169971
> 
> 赞同：0
> 
> 时间：2013-04-23T12:58:15.553
> 
> 标签：wordpress, twitter, rss, simplepie

我正在使用 WordPress`fetch_feed`功能来获取一些推文。一切都很好，但所有 html 标记都从内容中删除。我想阻止锚标签被剥离，但不能完全确定它。

```
<?php
include_once(ABSPATH . WPINC . '/feed.php');
$rss = fetch_feed('https://api.twitter.com/1/statuses/user_timeline.rss?screen_name=Your_LEAP_Lewes&rpp=3');
if( ! is_wp_error( $rss ) ) {
    //max items is actually set in the twitter url un this case.
    $maxitems = $rss->get_item_quantity(3);
    $rss_items = $rss->get_items(0, $maxitems);
}
?>

<div class="twitter-feed">
    <div class="twitter-header clearfix">
        <h2>Our latest Tweets</h2>
        <a href="https://twitter.com/Your_LEAP_Lewes" class="twitter-follow-button" data-show-count="false">Follow @Your_LEAP_Lewes</a>
        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
    </div>
    <ul class="twitter-ul clearfix">
        <?php if ($maxitems == 0) echo '<li>No items.</li>';
        else

        // Loop through each feed item and display each item as a hyperlink.
        foreach ( $rss_items as $item ) : ?>
        <?php 
        //print_r($item); 

        ?>

        <li>
        <?php echo $item->get_description(); ?>
        <span class="tweet-date"><?php echo $item->get_date('j M'); ?></span>
        </li>
        <?php endforeach; ?>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T23:32:16.907

一方面，我认为你的 if/else 代码中的语法可能是错误的，而且它真的很难阅读。

```
<?php
   if ($maxitems == 0) {
      echo '<li>No items.</li>';
   } else {
        // Loop through each feed item and display each item as a hyperlink.
        foreach ( $rss_items as $item )
        {
           echo '
        <li>'.$item->get_description().'
           <span class="tweet-date">'.$item->get_date('j M').'</span>
        </li>';
        }
   }
?> 
```

我认为因为您的 else 语句没有正确括起来，所以它只执行了下一行，即注释。我可能错了，但这仍然更容易阅读。

至于剥离 HTML 标签，请查看[strip_htmltags()](http://simplepie.org/wiki/reference/simplepie/strip_htmltags)函数。如果 WordPress 实现设置了这个，你可以在你的代码中覆盖它。

# android - 在 GoogleMaps Android API 中实现搜索，带缩放

> ID：16169974
> 
> 赞同：0
> 
> 时间：2013-04-23T12:58:24.937
> 
> 标签：android, google-maps, android-mapview

我正在尝试在 Android 应用程序中实现搜索 GoogleMaps，并在以下位置找到解决方案：

```
geoCoder.getFromLocationName("New York", 5); 
```

它返回一个`List<Address>`.

我遇到的问题是 Address 对象包含有关经度和纬度的信息，这很好，但不是在搜索 Google 地图时获得的缩放级别信息。例如：如果搜索一个国家，谷歌地图设置缩放级别以显示整个国家，不像搜索带有街道号码的地址会显示更高的缩放级别。JS 有。安卓呢？

在 Android 中搜索 GoogleMap API (v1) 时如何获取缩放信息？天呐！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:37:25.850

使用谷歌地图地理编码 API。

示例请求：[http ://maps.google.com/maps/api/geocode/json?address=New%20York&sensor=false](http://maps.google.com/maps/api/geocode/json?address=New%20York&sensor=false)

# android - Nan在使用纬度和经度计算距离

> ID：16169975
> 
> 赞同：0
> 
> 时间：2013-04-23T12:58:25.987
> 
> 标签：android, gps, latitude-longitude

我正在计算两个纬度和经度之间的距离。我得到了一些距离的结果，但有时，我得到的结果是 NAN。

这是我在 2 个地方得到的纬度和经度。

例如：38.655553,-121.091611

38.654875,-121.091324

我正在使用以下代码参考以下链接计算距离

[计算两个地理位置之间的距离](https://stackoverflow.com/questions/8049612/calculating-distance-between-two-geographic-locations)

```
public static double distanceBetween (double currentLat2, double currentLong2, double mallLat2, double mallLong2)
{
     float pk = (float) (180/3.14169);

        double a1 = currentLat2 / pk;
        double a2 = currentLong2 / pk;
        double b1 = mallLat2 / pk;
        double b2 = mallLong2 / pk;

        double t1 = FloatMath.cos((float) a1)*FloatMath.cos((float) a2)*FloatMath.cos((float) b1)*FloatMath.cos((float) b2);
        double t2 = FloatMath.cos((float) a1)*FloatMath.sin((float) a2)*FloatMath.cos((float) b1)*FloatMath.sin((float) b2);
        double t3 = FloatMath.sin((float) a1)*FloatMath.sin((float) b1);
        double tt = Math.acos(t1 + t2 + t3);

       return 6366000*tt;               
} 
```

有什么帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:16:43.773

的文档`Location.distanceTo(LOcation)`说：

> 返回此位置与给定位置之间的近似距离（以米为单位）。距离是使用 WGS84 椭球定义的。

所以你可以试试这样：

```
public static float distanceBetween (double currentLat2, double currentLong2, double mallLat2, double mallLong2) {
        Location loc1 = new Location("");
        loc1.setLatitude(currentLat2);
        loc1.setLongitude(currentLong2);

        Location loc2 = new Location("");
        loc2.setLatitude(mallLat2);
        loc2.setLongitude(mallLong2);

        return loc1.distanceTo(loc2);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T15:52:44.293

`MathFloat`与`float`演员一起是你的问题的原因。

我重写了，现在可以了，它给了 79.34m

但是主要的问题是你在这个任务中使用了错误的公式，你在这里使用了具有余弦定律的更大圆距离公式，众所周知，它对于浮点运算是“病态的”。然后更糟糕的是，您只使用单精度而不是双精度。

更稳健的公式是`haversine`公式。它旨在克服大圆公式的缺点。

在这里您的原始代码已修复，（但我仍然建议使用 hasrsine 公式代替）

```
public void test1() {

    // 79.34253285803419
    double lat1 = 38.655553;
    double lon1 = -121.091611;

    double lat2 = 38.654875;
    double lon2 = -121.091324;

    System.out.println(distanceBetween(lat1,  lon1,  lat2,  lon2));
}

public static double distanceBetween (double currentLat2, double currentLong2, double mallLat2, double mallLong2)
{
        double pk = 180 / Math.PI;
        double a1 = currentLat2 / pk;
        double a2 = currentLong2 / pk;
        double b1 = mallLat2 / pk;
        double b2 = mallLong2 / pk;

        double t1 = Math.cos( a1) * Math.cos(a2) * Math.cos(b1) * Math.cos(b2);
        double t2 = Math.cos( a1) * Math.sin(a2) * Math.cos(b1) * Math.sin(b2);
        double t3 = Math.sin( a1) * Math.sin(b1);
        double tt = Math.acos(t1 + t2 + t3);

       return 6366000*tt;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T13:04:10.937

您可以记录 t1、t2、t3 的输出吗？我感觉 for 的论点`Math.acos()`超出了范围。也不确定为什么当您可以使用`Math.sin`and时不必要地强制转换为 float 并返回 double `Math.cos`。

*编辑*

`Math.PI`代替 3.14169使用。这种近似导致您的错误。

# c# - 执行 LDAP 调用时出现 COMException 错误

> ID：16169979
> 
> 赞同：0
> 
> 时间：2013-04-23T12:58:37.550
> 
> 标签：c#, .net, ldap

以下是相关代码：

```
 string ldapPath = Settings.Default.LDAPServer + Settings.Default.StartPath;
entry = new DirectoryEntry(ldapPath, username, password, AuthenticationTypes.None);
     `entry.Properties[propertyName]` // The exception is throwed at this line inside of 
```

`GetAllOccurencesOfProperty`- 方法：

这是错误消息：

```
2013-04-23 13:55:44,895 ERROR [12] EPiServer.DataAbstraction.ScheduledJob.ExecuteStaticMethod - 3.1.2 Failed to execute job 94d9b172-591b-4893-8d29-1204b99cf8bd
System.Exception: CurrentPrincipal: eivind. LDAP: ldap://DC.opent_dom.local:389/. Error:System.Runtime.InteropServices.COMException (0x80005000): Unknown error (0x80005000)
at System.DirectoryServices.DirectoryEntry.Bind(Boolean throwIfFail)
at System.DirectoryServices.DirectoryEntry.Bind()
at System.DirectoryServices.DirectoryEntry.get_AdsObject()
at System.DirectoryServices.PropertyValueCollection.PopulateList()
at System.DirectoryServices.PropertyValueCollection..ctor(DirectoryEntry entry, String propertyName)
at System.DirectoryServices.PropertyCollection.get_Item(String propertyName)
at SSP.ADPhonebook.Job.LDAP.GetAllOccurencesOfProperty(DirectoryEntry entry, String propertyName) in C:\repo\products\EPiServer\src\trunk\SSP.ADPhonebook\Job\LDAP.cs:line 80
at SSP.ADPhonebook.Job.ADOUAndUserImport.Import.GetDirectoryEntryPage(DirectoryEntry entry) in C:\repo\products\EPiServer\src\trunk\SSP.ADPhonebook\Job\ADOUAndUserImport.cs:line 117
at SSP.ADPhonebook.Job.ADOUAndUserImport.Import.Execute() in C:\repo\products\EPiServer\src\trunk\SSP.ADPhonebook\Job\ADOUAndUserImport.cs:line 61
at SSP.ADPhonebook.Job.ADOUAndUserImport.Execute() in C:\repo\products\EPiServer\src\trunk\SSP.ADPhonebook\Job\ADOUAndUserImport.cs:line 31
at SSP.ADPhonebook.Job.ADOUAndUserImport.Execute() in C:\repo\products\EPiServer\src\trunk\SSP.ADPhonebook\Job\ADOUAndUserImport.cs:line 39 
```

`ldapPath:` `ldap://DC.opent_dom.local:389/OU=Rådmann,OU=Jevnaker Kommune,OU=brukere,DC=opent_dom,DC=local`

我可以在 LDAP 浏览器中浏览该地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:03:38.397

解决方案： `ldap`必须大写。我`ldap://DC.opent_dom.local:389/OU=Rådmann,OU=Jevnaker Kommune,OU=brukere,DC=opent_dom,DC=local`改为

```
LDAP://DC.opent_dom.local:389/OU=Rådmann,OU=Jevnaker Kommune,OU=brukere,DC=opent_dom,DC=local 
```

# ubuntu - cron 作业找不到 wmctrl

> ID：16169982
> 
> 赞同：3
> 
> 时间：2013-04-23T12:58:40.050
> 
> 标签：ubuntu, cron, crontab

我添加了一个 cron 作业来执行依赖于 wmctrl 的 python 脚本。该作业将无法正确执行，我已将此追溯到 cron 作业似乎无法使用/查找 wmctrl 的事实。

我在选项卡中添加了一项 cron 任务，如下所示：

```
* * * * * /home/tim/wmctrl -h > /home/tim/log.txt 
```

但结果 log.txt 文件为空。此命令在命令行中运行良好。

我的 cron 环境如下：

```
HOME=/home/tim
LOGNAME=tim
PATH=/usr/bin:/bin
SHELL=/bin/sh
PWD=/home/tim 
```

并且`wmctrl`在`/usr/bin/`

我已经尝试过其他普通的 python 脚本和应用程序，它们似乎都运行良好。

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-10T06:36:42.597

你可能想试试这个：

```
* * * * * export DISPLAY=:0 && /home/tim/wmctrl -h > /home/tim/log.txt 
```

# model-view-controller - CanJS - 控制通信

> ID：16169983
> 
> 赞同：4
> 
> 时间：2013-04-23T12:58:40.023
> 
> 标签：model-view-controller, canjs, canjs-control

我现在正在学习CanJS，所以想尝试一个非常基础的小demo。该演示是您将拥有不同类型的移动充值计划，显示在顶部（单选按钮），通过选择每个计划，相应的价格选项将显示在底部的表格中。

对于这个演示，我创建了两个 Model 、 2 Control 和 2 Template 文件，我的问题是两个控件如何相互通信？标准方法是什么？

现在我直接通过它的实例调用控制方法，但我不确定这是否是正确的做法。另外请解释一下Can.Route。

**输出** [http://jsfiddle.net/sabhab1/2mxfT/10/](http://jsfiddle.net/sabhab1/2mxfT/10/)

**数据**

```
var CATEGORIES = [{id: 1 , name: "2G Internet Recharge"},
                  {id: 2 , name: "3G Internet Recharge"},
                  {id: 3 , name: "full talktime Recharge"},
                  {id: 4 , name: "Validity and talktime Recharge"},
                  {id: 5 , name: "National and international roaming"}];
var RECHARGEAMOUNTS =[{
                       id: 1 , 
                       values : [{amount: "Rs. 100" , benefit:"300 MB" ,validity:"30"},
                                 {amount: "Rs. 200" , benefit:"1 GB" ,validity:"30"}]
                       },
                       {
                       id: 2 , 
                       values : [{amount: "Rs. 10" , benefit:"300 MB" ,validity:"30"},
                                 {amount: "Rs. 99" , benefit:"100 GB" ,validity:"90"}]
                       },
                       {
                       id: 3 , 
                       values : [{amount: "Rs. 80" , benefit:"1 GB" ,validity:"50"},
                                 {amount: "Rs. 99" , benefit:"100 GB" ,validity:"50"}]
                       },
                       {
                       id: 4 , 
                       values : [{amount: "Rs. 55" , benefit:"30 MB" ,validity:"10"},
                                 {amount: "Rs. 200" , benefit:"1 GB" ,validity:"30"},
                                 {amount: "Rs. 99" , benefit:"100 GB" ,validity:"90"}]
                       },
                       {
                       id: 5 , 
                       values : [{amount: "Rs. 880" , benefit:"100 MB" ,validity:"90"},
                                 {amount: "Rs. 550" , benefit:"2 GB" ,validity:"30"},
                                 {amount: "Rs. 1000" , benefit:"4 GB" ,validity:"90"},
                                 {amount: "Rs. 1550" , benefit:"10 GB" ,validity:"90"}]
                       }
                     ]; 
```

**模型**

```
//Model Category
CategoryModel = can.Model({
  findAll : function(){
      return $.Deferred().resolve(CATEGORIES);
    }
},{});

//Model Category
ReachargeAmountModel = can.Model({
    findAll : function(){
      return $.Deferred().resolve(RECHARGEAMOUNTS);
    },
    findOne : function(params){
      return $.Deferred().resolve(RECHARGEAMOUNTS[(+params.id)-1]);
    }
},{}); 
```

**控制**

```
**// Can Control 
var CategoryControl = can.Control({
    // called when a new Todos() is created
    init: function (element, options) {
        // get all todos and render them with
        // a template in the element's html
        var el = this.element;
        CategoryModel.findAll({}, function (values) {
            el.html(can.view('categoriesEJS', values))
        });
        this.options.rchAmtCtrl = new RechargeAmountControl("#rechnageAmountView"); 
    },
    'input click' : function( el, ev ) {
        var id = el.data('category').attr('id');
        console.log(id);
        this.options.rchAmtCtrl.update(id);
    }

});
// Can Control 
var RechargeAmountControl = can.Control({
    // called when a new Todos() is created
    init: function (element, options) {
        // get all todos and render them with
        // a template in the element's html
        this.update(1);//this.update(id,this.element);
    },
    update : function(id){
        var el = this.element;
        ReachargeAmountModel.findOne({id: id}, function( rechargeAmount ){
            // print out the todo name
            //console.log(rechargeAmount.values[id].attr('benefit'));
            el.html(can.view('RechnageAmountEJS', rechargeAmount.values));
        });
    }
});** 
```

**看法**

```
<form id='categoriesView'></form>
</p>
<table id='rechnageAmountView'></table>
<script type='text/ejs' id='RechnageAmountEJS'>
    <tr>
        <th>Recharge Amount</th>
        <th>Benefits</th>
        <th>Validity(Days)</th>
    </tr>
    <% this.each(function( rechargeAmount ) { %>
        <tr>
            <td>
                <%= rechargeAmount.attr( 'amount' ) %>
            </td>   
            <td>
                <%= rechargeAmount.attr( 'benefit' ) %>
            </td>   
            <td>
                <%= rechargeAmount.attr( 'validity' ) %>
            </td> 
        </tr>   
    <% }) %>

 </script>

<script type='text/ejs' id='categoriesEJS'>
    <% this.each(function( category ) { %>
        <input type="radio" 
            name="category" 
            <%= category.attr('id') == 1 ? 'checked' : '' %>
            value=<%= category.attr( 'name' ) %> 
            <%= (el) -> el.data('category',category) %>>
                <%= category.attr( 'name' ) %>
        </input>    
    <% }) %>
</script> 
```

**主要通话**

```
new CategoryControl("#categoriesView"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T14:07:51.363

有几种方法可以做到这一点。

## 1.直接调用方法

这就是你正在做的，不一定是错的。为了使事情更加灵活，您可以`RechargeAmountControl`在初始化时传递类或实例，`CategoryControl`而不是直接使用它。

## 2.DOM事件

在这里，它更多地涉及面向事件的架构。如果您通常想通知其他控件，您可以触发任何类型的事件并让他们监听它。像这样的东西：http: [//jsfiddle.net/2mxfT/11/](http://jsfiddle.net/2mxfT/11/)

```
' rechargeAmountUpdated': function(element, event, id){
    var el = this.element;
    console.log(arguments);
    ReachargeAmountModel.findOne({id: id}, function( rechargeAmount ){
        // print out the todo name
        //console.log(rechargeAmount.values[id].attr('benefit'));
        el.html(can.view('RechnageAmountEJS', rechargeAmount.values));
    });
} 
```

## 3\. 可观察的

另一种选择是使用 Observables 来维护共享状态。这是专注于数据并让实时绑定完成所有其他工作的好方法。为了使事情更灵活，应在 Control 初始化期间传递状态对象（请参阅[http://jsfiddle.net/2mxfT/12/](http://jsfiddle.net/2mxfT/12/)）：

```
var state = new can.Observe();

new RechargeAmountControl("#rechnageAmountView", {
    state: state
}); 
new CategoryControl("#categoriesView", {
    state: state
});

state.attr('rechargeId', 1); 
```

然后你可以像这样监听 RechargeAmountControl 中的属性变化：

```
'{state} rechargeId': function(Construct, event, id){} 
```

每当您更新状态观察时，都会调用此处理程序。

这也是`can.route`进来的地方。基本上 can.route 是一个 Observe ，它将其状态保存在位置哈希中。在上面的例子中`#!&rechargeId=1`（除非你像初始化一个特定的路由`can.route(':rechargeId')`）。如果位置哈希更改，则 Observe 将被更新，反之亦然。

# spring - Java 邮件 - 获取异常 java.net.UnknownHostException: SMTP.gmail.com

> ID：16169985
> 
> 赞同：0
> 
> 时间：2013-04-23T12:58:48.170
> 
> 标签：spring, jakarta-mail

尝试使用 Java 邮件发送电子邮件时出现以下错误。

```
 org.springframework.mail.MailSendException: Mail server connection failed; nested exception is javax.mail.MessagingException: Unknown SMTP host: smtp.gmail.com;
  nested exception is:
    java.net.UnknownHostException: smtp.gmail.com. Failed messages: javax.mail.MessagingException: Unknown SMTP host: smtp.gmail.com;
  nested exception is:
    java.net.UnknownHostException: smtp.gmail.com; message exception details (1) are:
Failed message 1:
javax.mail.MessagingException: Unknown SMTP host: smtp.gmail.com;
  nested exception is:
    java.net.UnknownHostException: smtp.gmail.com
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1704)
    at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:525)
    at javax.mail.Service.connect(Service.java:291)
    at org.springframework.mail.javamail.JavaMailSenderImpl.doSend(JavaMailSenderImpl.java:389)
    at org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:306)
    at org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:296)
    at com.covisint.validationAdmin.validationAdminBackend.smtpMail.EmailClient.send(EmailClient.java:48)
    at com.covisint.validationAdmin.validationAdminBackend.smtpMail.EmailClientTest.testSend(EmailClientTest.java:33)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:88)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at 
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.net.UnknownHostException: smtp.gmail.com
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:178)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at sun.security.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:618)
    at sun.security.ssl.BaseSSLSocketImpl.connect(BaseSSLSocketImpl.java:160)
    at com.sun.mail.util.SocketFetcher.createSocket(SocketFetcher.java:284)
    at com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:201)
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1672) 
```

我的 Java 邮件配置文件是

```
<bean id="mailSender" class="org.springframework.mail.javamail.JavaMailSenderImpl"
        p:host="${mail.sender.host}" p:port="${mail.sender.port}" p:username="${mail.sender.username}"
        p:password="${mail.sender.password}" p:protocol="${mail.sender.protocol}"
        p:javaMailProperties-ref="mailProperties" />
    <bean id="emailClient"
        class="com.covisint.validationAdmin.validationAdminBackend.smtpMail.EmailClient"
        p:mailSender-ref="mailSender" p:emailSubject="${email.subject}" />
    <util:properties id="mailProperties">
        <prop key="mail.smtp.auth">${mail.smtp.auth}</prop>
        <prop key="mail.smtp.starttls.enable">${mail.smtp.starttls.enable}</prop>
        <prop key="mail.smtp.quitwait">${mail.smtp.quitwait}</prop>
        <prop key="mail.smtp.debug">${mail.smtp.debug}</prop>
        <prop key="mail.smtp.socketFactory.port">${mail.smtp.socketFactory.port}</prop>
        <prop key="mail.smtp.socketFactory.class">${mail.smtp.socketFactory.class}</prop>
        <prop key="mail.smtp.socketFactory.fallback">${mail.smtp.socketFactory.fallback}</prop>

    </util:properties> 
```

我的属性文件是

```
email.subject = my email subject
mail.sender.host =smtp.gmail.com
mail.sender.port =465 //465 or 587 (both dint work)
mail.sender.username =****@gmail.com
mail.sender.password =******
mail.sender.protocol =smtp
mail.smtp.auth =true
mail.smtp.starttls.enable =true
mail.smtp.quitwait =false
mail.smtp.debug=true
mail.smtp.socketFactory.port=465
mail.smtp.socketFactory.class=javax.net.ssl.SSLSocketFactory
mail.smtp.socketFactory.fallback=false 
```

如何解决此错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T13:38:45.397

我刚刚解决了我的问题。

我在安全的办公网络上，当我更改它开始工作的网络时。

# android - 如何根据平板电脑的方向定位布局

> ID：16169987
> 
> 赞同：2
> 
> 时间：2013-04-23T12:58:50.027
> 
> 标签：android, android-layout, orientation-changes

我正在为平板电脑和移动设备创建演示应用程序。
现在有一个活动有两个`tabs`，所以里面有标签`ListView`。
我的问题是我想`ListView`从左右两边显示出一些边距。因此，随着方向的变化，边距值也会发生变化，
我已经根据以下是列表视图的代码片段从[开发人员端阅读了文档。](http://developer.android.com/guide/practices/screens_support.html)文件夹
内`res/layout-xlarge-land`

```
<ListView
    android:id="@+id/android:list"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="250dp"
    android:layout_marginRight="250dp" >
</ListView> 
```

`res/layout-xlarge-port`文件夹 内

```
 <ListView
    android:id="@+id/android:list"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="100dp"
    android:layout_marginRight="100dp" >
</ListView> 
```

现在的问题是，当我改变平板电脑的方向时，它只需要纵向模式 xml 文件，而不需要横向 xml 文件。那么如何解决这个问题。
也包含在清单文件中
`<uses-sdk android:minSdkVersion="14" android:targetSdkVersion="17" />`
`<supports-screens android:anyDensity="true" android:resizeable="true"/>`
并包含在活动中
`android:configChanges="orientation|screenSize"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:04:33.160

尝试

layout-sw600dp-land 用于 7" 平板电脑的横向模式

layout-sw600dp-port 用于 7" 平板电脑中的纵向模式

layout-sw720dp-land 用于 10" 平板电脑的横向模式

layout-sw720dp-port 用于 10" 平板电脑的纵向模式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:10:14.210

您需要`android:configChanges="orientation|screenSize"`从清单中删除该行。这会阻止活动被销毁和重新创建。

没有它，操作系统将自动销毁活动并使用新方向的布局重新创建它。

如果您不想自动销毁它，您可以捕获该`onConfigurationChanged()`事件并在那里再次手动设置布局。

# wpf - WPF数据网格检测是否访问了最后一行？

> ID：16169993
> 
> 赞同：0
> 
> 时间：2013-04-23T12:59:14.363
> 
> 标签：wpf, wpfdatagrid

我的应用程序中有一个 WPF Datagrid，由于应该加载超过 25000 行，我创建了一个使用快捷键的自定义分页。

现在我想知道是否有任何方法可以检测是否访问了当前页面的最后一行，以便我可以加载下一页并将其附加到我的 Datagrid 而不需要任何快捷键或单击？

更新：我已经为数据网格的垂直滚动条添加了一个事件，但仍然找不到确定最后一行是否已显示的方法？

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:06:02.837

好的，我找到了诀窍：

以下事件帮助了我：

```
> void dgScrollbar_ScrollChanged(object sender, ScrollChangedEventArgs
> e)
>         {
>             if (((System.Windows.Controls.ScrollViewer)(sender)).ContentVerticalOffset
> + e.ViewportHeight == e.ExtentHeight)
>             {
>                 LoadNextPageBinding_Executed(null, null);
>             }
>         } 
```

# highcharts - Highcharts：通过单击显示多个工具提示，反之亦然

> ID：16169997
> 
> 赞同：1
> 
> 时间：2013-04-23T12:59:17.313
> 
> 标签：highcharts, tooltip

我寻找一种永久显示工具提示的方法：

*   单击该点 --> 工具提示被克隆并永久显示
*   如果再次单击同一点，克隆将被删除
*   允许同时显示多个工具提示

我要做的大部分事情，但有一些小问题需要解决：

[http://jsfiddle.net/jtnDz/1/](http://jsfiddle.net/jtnDz/1/)

```
$(function () {
cloneToolTip = null;
checkx = [];
checky = [];
clone = [];
del = [];
chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container'
    },
    xAxis: {
        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
    },

    plotOptions: {
        series: {
            cursor: 'pointer',
            point: {
                events: {
                    click: function () {
                        //check if point was already clicked
                        if (checkx.indexOf(event.point.x) >= 1 & checky.indexOf(event.point.y) >= 1) {
                            //remove tooltip
                            chart.container.firstChild.removeChild(clone[checkx.indexOf(event.point.x)]);

                            //remove xy coordinate and clone from array --> tooltip can be displayed again
                            /*del=checkx.indexOf(event.point.x);
                            clone.splice(del, 1);
                            checky.splice(del, 1);
                            checkx.splice(del, 1);*/
                        }
                        //cloneToolTip=null;
                        if (checkx.indexOf(event.point.x) == -1 & checky.indexOf(event.point.y) == -1) {
                            cloneToolTip = this.series.chart.tooltip.label.element.cloneNode(true);
                            chart.container.firstChild.appendChild(cloneToolTip);
                            //save coordinates and tooltip object
                            checkx.push(event.point.x);
                            checky.push(event.point.y);
                            clone.push(cloneToolTip);
                        }
                    }
                }
            }
        }
    },

    series: [{
        data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
    }]
}); 
```

});

我的问题是：

*   第一个选择的工具提示，即它的克隆，不能被删除
*   删除克隆后，您将无法再次永久显示工具提示。我试图删除所有三个数组中的相应条目（注释代码块），但在此更正后没有删除任何克隆

我真的是一个初学者，用谷歌搜索了很多例子，但这个问题我无法自己解决。有人可以给我一个提示吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T15:25:17.033

问题在于从返回的值`inArray()`。它将返回数组的索引，因此它从 开始`0`，而您的`if`语句与`1`.

此外，我还做了一些其他更改（否则在 Chrome 中我会遇到一些错误）。示例：http: [//jsfiddle.net/7vkZV/](http://jsfiddle.net/7vkZV/)