# StackOverflow 问答 15424000-15424999

# javascript - 安装 Nodejitsu

> ID：15424000
> 
> 赞同：1
> 
> 时间：2013-03-15T03:08:50.877
> 
> 标签：javascript, node.js, sockets

我已经使用 NPM 成功安装了 NodeJits。但是，每当我尝试运行它时，都会出现以下错误：

```
TypeError:  Arguments to path.join must be strings. 
```

它发生在 path.js 的第 204 行

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T04:59:39.940

我们正在努力发布支持节点 0.10.0 的工具集，您可以将它与最后一个 0.8.x 分支 (0.8.22) 一起使用。我们将尽快发布新版本。

此问题已在内部修复，但我们正在处理节点 0.10.0 中所有可能的故障点。

敬请期待更新！

如果您需要支持，您可以在 Freenode 上加入 #nodejitsu ;)

# objective-c - 从 url 设置的 NSString 不读取？

> ID：15424010
> 
> 赞同：0
> 
> 时间：2013-03-15T03:09:43.333
> 
> 标签：objective-c, nsstring

我无法让我的 NSString 读取我设置的字符串。如果重要，播放操作将连接到 UIButton OnTouchDown。

```
- (IBAction)play {
 if (audioPlayer.playing == NO) {
    urlSong = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/k.mp3", [[NSBundle mainBundle] resourcePath]]];
     [audioPlayer release];
     audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:urlSong error:&error];
    audioPlayer.numberOfLoops = 0;
     //if i set this line to stringSong = @"k"; then comment out the next line everything works fine 
     stringSong = [[urlSong lastPathComponent] stringByDeletingPathExtension];
     label.text = stringSong;
    AVAudioSession *audiosession = [AVAudioSession sharedInstance];
    [audiosession setCategory:AVAudioSessionCategoryAmbient error:nil];

    [audioPlayer play];
    [start setTitle:@"Stop" forState:UIControlStateNormal];
}
     else
         if ([stringSong isEqualToString:@"k"]){

         label.text = @"audio stopped";
         [audioPlayer stop];
            }

} 
```

当我在我的 iPhone Xcode 上运行代码时返回

```
EXC_BAD_ACCESS 
```

在这条线上

```
 if ([stringSong isEqualToString:@"k"]){ 
```

我知道这是因为我试图从 url 设置字符串，因为当我明确地将我的字符串设置为 'k' 时，代码执行得很好。

如果有人想知道这一点的总体意义，我正在尝试将我的音频按钮设置为在按下此按钮时停止所有其他音频并启动分配给此按钮的音频，在本例中为“k.mp3”。但是如果这个音频已经在播放只是为了停止播放所有的音频。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:29:18.977

你没有保留`stringSong`.

这一行：

```
stringSong = [[urlSong lastPathComponent] stringByDeletingPathExtension]; 
```

应该：

```
stringSong = [[[urlSong lastPathComponent] stringByDeletingPathExtension] retain]; 
```

在某些时候，这需要被释放。

# java - 如何缩放 .JPEG 以适合位于 GridView 中的按钮？

> ID：15424013
> 
> 赞同：1
> 
> 时间：2013-03-15T03:09:51.127
> 
> 标签：java, android, image, button, gridview

我有许多`Button`s`GridView`使用`Adapter`. 这些当前正确地适合 GridView，但是...

我想在每个按钮内添加一个图像。我已`banana.jpg`存储在我的`drawable`文件夹中，并使用以下代码将其设置在按钮内：

```
button.setBackgroundDrawable(context.getResources().getDrawable(R.drawable.banana)); 
```

但是，我有两个问题：

1.  按钮似乎拉伸到图像的大小。
2.  图像实际上并没有出现。

是否有某种方法可以将图像添加到按钮，以便按钮的当前大小会缩小图像以使其适合？（或者，是否可以计算我需要图像的大小，以便我可以手动调整它的大小？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:22:49.583

你必须使用，`ImageButton`而不是`Button`

如果你想使用`Button`可能是[这个答案](https://stackoverflow.com/a/4502650/1773155)可以帮助你。

# ruby-on-rails - Rails 新手：需要帮助解决阻止我在终端中输入任何内容的错误

> ID：15424016
> 
> 赞同：0
> 
> 时间：2013-03-15T03:10:07.780
> 
> 标签：ruby-on-rails, ruby, message

我尝试进入终端的几乎所有内容都会返回以下请求。任何人都可以帮助我吗？

IE：

Davids-MacBook-Pro:omrails Lobo$`gem install bundler`

```
/Users/Lobo/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/psych.rb:203:in `parse': (<unknown>): mapping values are not allowed in this context at line 2 column 7 (Psych::SyntaxError)
    from /Users/Lobo/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/psych.rb:203:in `parse_stream'
    from /Users/Lobo/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/psych.rb:151:in `parse'
    from /Users/Lobo/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/psych.rb:127:in `load'
    from /Users/Lobo/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/site_ruby/1.9.1/rubygems/config_file.rb:253:in `load_file'
    from /Users/Lobo/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/site_ruby/1.9.1/rubygems/config_file.rb:191:in `initialize'
    from /Users/Lobo/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/site_ruby/1.9.1/rubygems/gem_runner.rb:78:in `new'
    from /Users/Lobo/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/site_ruby/1.9.1/rubygems/gem_runner.rb:78:in `do_configuration'
    from /Users/Lobo/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/site_ruby/1.9.1/rubygems/gem_runner.rb:51:in `run'
    from /Users/Lobo/.rvm/rubies/ruby-1.9.3-p392/bin/gem:30:in `<main>'
Davids-MacBook-Pro:omrails Lobo$ grm
-bash: grm: command not found
Davids-MacBook-Pro:omrails Lobo$ gem
/Users/Lobo/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/psych.rb:203:in `parse': (<unknown>): mapping values are not allowed in this context at line 2 column 7 (Psych::SyntaxError)
    from /Users/Lobo/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/psych.rb:203:in `parse_stream'
    from /Users/Lobo/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/psych.rb:151:in `parse'
    from /Users/Lobo/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/psych.rb:127:in `load'
    from /Users/Lobo/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/site_ruby/1.9.1/rubygems/config_file.rb:253:in `load_file'
    from /Users/Lobo/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/site_ruby/1.9.1/rubygems/config_file.rb:191:in `initialize'
    from /Users/Lobo/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/site_ruby/1.9.1/rubygems/gem_runner.rb:78:in `new'
    from /Users/Lobo/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/site_ruby/1.9.1/rubygems/gem_runner.rb:78:in `do_configuration'
    from /Users/Lobo/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/site_ruby/1.9.1/rubygems/gem_runner.rb:51:in `run'
    from /Users/Lobo/.rvm/rubies/ruby-1.9.3-p392/bin/gem:30:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:05:27.180

这可能是您的 .gemrc 的问题

请参阅此帖子：[由于 psych YAML 解析错误，在 mac osx 上安装任何 ruby​​ 1.9.x (with rbenv) 时遇到问题](https://stackoverflow.com/questions/10553887/having-trouble-installing-any-ruby-1-9-x-with-rbenv-on-mac-osx-due-to-psych-ya)

# ruby - 在 Rails 中重命名 URL 的简单方法？

> ID：15424017
> 
> 赞同：1
> 
> 时间：2013-03-15T03:10:10.767
> 
> 标签：ruby, ruby-on-rails-3, rails-routing

我只想更改 URL 而不会出现未定义的方法错误。我可以尝试手动操作，但有没有简单的方法可以做到这一点？

例如，在我的本地服务器上，如果 URL 是：/users/username/XYZ

有没有一种简单的方法可以轻松地将“XYZ”更改为其他内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T03:24:30.517

如果 XYZ 是资源丰富的路线的一部分，您可以像这样修改它

```
resources :users, :path_names => { :new => 'make', :edit => 'change' } 
```

或者

如果您只想更改资源的名称，您可以像这样更改它：

```
resources :person, :controller => 'users', :as => 'users' 
```

这会将 url 更改为“person”并维护所有类和方法名称。

这是`rake routes`输出：

```
 users GET    /person(.:format)          users#index
          POST   /person(.:format)          users#create
 new_user GET    /person/new(.:format)      users#new
edit_user GET    /person/:id/edit(.:format) users#edit
     user GET    /person/:id(.:format)      users#show
          PUT    /person/:id(.:format)      users#update
          DELETE /person/:id(.:format)      users#destroy 
```

您可以在此处找到有关如何自定义资源丰富的路线的更多信息：http:
[//guides.rubyonrails.org/routing.html#customizing-resourceful-routes](http://guides.rubyonrails.org/routing.html#customizing-resourceful-routes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:43:37.030

我认为这正是你正在寻找的:) ...

> [http://railscasts.com/episodes/314-pretty-urls-with-friendlyid](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid)
> 
> [http://railscasts.com/episodes/63-model-name-in-url-revised](http://railscasts.com/episodes/63-model-name-in-url-revised)

问候

# java - 未执行 IF 语句的主体 (HttpURLConnection)

> ID：15424019
> 
> 赞同：-2
> 
> 时间：2013-03-15T03:10:14.703
> 
> 标签：java, android, if-statement, httpurlconnection, http-status-codes

IF 语句的主体永远不会被执行。为什么是这样？

认为

```
String urlRequest = "http://stackoverflow.com/"; 
```

这是我的代码：

```
try {
        URL url= new URL(urlRequest);
        HttpURLConnection foo = (HttpURLConnection) url.openConnection();

        if(foo.getResponseCode() == HttpURLConnection.HTTP_OK) {
            // SOME CODE HERE
        }

} catch(Exception e) {
        e.printStackTrace();
} 
```

我需要`==`用`.equals()`等效的 HttpURLConnection 替换吗？还是我需要使用 HttpURLConnection 的状态码而不是响应码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:15:48.720

如果你改变：

```
if(foo.getResponseCode() == HttpURLConnection.HTTP_OK) { 
```

变成类似的东西：

```
int xyzzy = foo.getResponseCode();
System.out.println ("xyzzy = " + xyzzy);
System.out.println ("   OK = " + HttpURLConnection.HTTP_OK);
if(xyzzy == HttpURLConnection.HTTP_OK) { 
```

你应该能够说出它为什么不开火。

机会是，他们是*不平等*的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T20:09:54.130

正文永远不会被执行，因为您的代码可能在 HTTP 调用上崩溃了。确保此调用位于单独的线程中。请参阅[此处](http://developer.android.com/training/basics/network-ops/index.html)了解更多信息。

至于实际的 if 语句，似乎很好，所以它可能是一个异常问题。

Tbh，将来请确保您提供更多信息，例如日志，并确保您通过将代码抽象为@paxdiablo 所述的片段进行了充分的测试。

祝你好运！

# php - 解析 AJAX GET 请求的 JSON 字符串

> ID：15424021
> 
> 赞同：0
> 
> 时间：2013-03-15T03:10:30.460
> 
> 标签：php, jquery, ajax, json, jquery-select2

我正在使用[Select2 3.3.1](http://ivaynberg.github.com/select2/#events)，并且在某个事件中，我可以访问多个文本输入中更改的元素，该文本输入用作创建和删除在我的网站上使用的标签的地方。我在迭代事件处理程序中返回的对象时遇到问题。具体来说，我想这样做是因为我想访问各个标签，并且事件处理程序返回参数包含这些对象，这些对象按添加或删除标签进行组织。所以，这是极好的。但是我尝试过的一切都失败了。

```
.on("change", function(e) { 
    alert(JSON.stringify({val:e.val, added:e.added, removed:e.removed}));
    var added = JSON.stringify({added:e.added});
    $.each(added, function(){
        $.ajax({
            url: '/db-interaction/tags.php',
            data: {
                'action': 'addtag',
                'q': this
            },
            type: 'get',
            success: function(output) {

            }
        });             
    }); 
```

上面第二行的命令

`alert(JSON.stringify({val:e.val, added:e.added, removed:e.removed}));`

显示此字符串

`{"val":["newtag"],"added":{"id":"newtag","count":"0"}}`在警报中。

在这种情况下，我刚刚添加了单词“newtag”作为标签。我希望能够遍历这个内部列表中的这些项目。

我也尝试过双重嵌套循环，如下所示，但我得到了同样的错误。我不确定 JSON 字符串需要什么结构。

```
$.each(added, function(){
      $.each(this, function(){ 
```

ajax 请求似乎没有执行，但我找不到错误。成功函数不执行，firebug 控制台出现错误。它说`TypeError: invalid 'in' operand e`，指向 jquery 脚本。这是我的错误，我敢肯定。可能与我处理事件处理程序参数'e'的方式有关，但我不知道我做错了什么。

这是标签脚本。FWIW，addNewTag() 方法适用于其他用例。

```
<?php

session_start();

include_once "../inc/constants.inc.php";
include_once "../inc/class.tags.inc.php";
$tags = new Tags();

if (isset($_SESSION['LoggedIn']) && $_SESSION['LoggedIn']==1)
{
    if(!empty($_POST['action']) )
    {
        switch($_POST['action'])
        {
            case 'addtag':
                echo $tags->addNewTag();
                break;
            case 'removetag':
                echo $tags->removeTag();
                break;
            case 'getalltags':
                echo $tags->getAllTags();
            default:
                break;
        }
    }
    else if(!empty($_GET['action']))
    {
        switch($_GET['action'])
        {
            case 'addtag':
                echo $tags->addNewTag();
                break;
            case 'removetag':
                echo $tags->removeTag();
                break;
            case 'getalltags':
                echo $tags->getAllTags();
            default:
                break;
        }
    }
}
else
{
    header("Location: /");
    exit;
}

?> 
```

还有 addNewTag() 方法，在其他情况下效果很好：

```
/**
 * Adds a new tag, increment uses_count if it already exists
 * 
 * 
 */
public function addNewTag($name=NULL)
{
    if ($name === NULL){
        if (isset($_POST['q']) )
            $u = $_POST['q'];
        else if (isset($_GET['q']))
            $u = $_GET['q'];
    }
    else{
        $u = $name;
    }

    $sql = "INSERT INTO tags(name,uses_count) VALUES (:term,1) 
            ON DUPLICATE KEY UPDATE uses_count=uses_count+1;";
    if($stmt = $this->_db->prepare($sql)) 
    {
        $stmt->bindParam(":term", $u, PDO::PARAM_STR);
        $stmt->execute();
        $stmt->closeCursor();
    } 
```

谁能帮我吗？如果有用的话，我可以描述我尝试过的其他事情以及为什么它们没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:40:16.617

尝试类似的东西

```
$.each(e.added, function(key, value){
    alert(key + ' - ' + value )
    $.ajax({
        url: '/db-interaction/tags.php',
        data: {
            'action': 'addtag',
            'q': this
        },
        type: 'get',
        success: function(output) {

        }
    });             
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/XsgMc/)

# asp.net-mvc - 如何测试索引？

> ID：15424023
> 
> 赞同：1
> 
> 时间：2013-03-15T03:10:38.880
> 
> 标签：asp.net-mvc, testing, ninject

在 MVC4 中，我使用 Ninject 注入控制器，我想测试“索引”。笔迹的注入（注入的控制器）：

```
public class NinjectDependencyResolver : IDependencyResolver
{ 
    private IKernel kernel;

    public NinjectDependencyResolver()
    {
        kernel = new StandardKernel();
        AddBindings();
    }

    private void AddBindings()
    { 
        kernel.Bind<IDB>().To<DB>();
    }

    public object GetService(Type serviceType)
    {
        return kernel.TryGet(serviceType);
    }

    public IEnumerable<object> GetServices(Type serviceType)
    {
        return kernel.GetAll(serviceType);
    } 
} 
```

美洲开发银行：

```
public interface IDB
{
    IBugTrackRepository iBugTrackRepository { get; }
    ICategoryRepository iCategoryRepository { get; } 
    ...
    ...
    IUserRepository iUserRepository { get; }
} 
```

达到：

```
public class DB : IDB
{    
    public IBugTrackRepository iBugTrackRepository
    {
        get { return new BugTrackRepository(); }
    }
    public ICategoryRepository iCategoryRepository
    {
        get { return new CategoryRepository(); }
    }
    ...
    ...
    public IUserRepository iUserRepository
    {
        get { return new UserRepository(); }
    }
} 
```

达到：

```
public class BugTrackRepository : IBugTrackRepository
{
    private DBEntities context = new DBEntities ();

    public IQueryable<BugTrack> bugtrack
    {
        get { return context.BugTrack; }
    }
    ...
    //Other database operations...
} 
```

控制器：

```
public class HomeController : Controller
{     
    private IDB repository; 
    public HomeController(IDB repo)
    {
        repository = repo;
    }

    public ActionResult Index()
    {
        ViewBag.mytitle = "Home Page";
        return View();
    }
} 
```

测试代码：

```
 [TestMethod]
    public void TestIndex()
    {
        HomeController controller = new HomeController(??);

        ViewResult result = controller.Index() as ViewResult;

        Assert.AreEqual("Home Page", result.ViewBag.mytitle);
    } 
```

但是这个测试是错误的，我不知道如何实例化这个控制器。请帮助我！有任何问题请留言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:09:20.913

您的 Home 的构造函数包含 IDB 接口，因此您需要将它传递到那里。

由于您有接口，您可以使用模拟对象（[https://stackoverflow.com/questions/37359/what-c](https://stackoverflow.com/questions/37359/what-c-sharp-mocking-framework-to-use) ​​-sharp-mocking-framework-to-use ）来模仿您的 IDB。

# java - 获取两次之间的时间列表

> ID：15424032
> 
> 赞同：2
> 
> 时间：2013-03-15T03:11:22.143
> 
> 标签：java

我有一个开始和结束的时间范围，这两个都是`java.sql.Time`对象。我想用它们之间的时间列表填充一个 JComboBox，间隔为 15 分钟。例如，如果开始是 11:00，结束是 12:00，我希望 JComboBox 中的选项是 11:00、11:15、11:30、11:45 和 12:00。

最有效的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T03:28:26.323

`java.sql.Time`extends from `java.util.Date`，因此您可以在其他接受`Date`.

在这里，我使用 a`Calendar`以 15 分钟的间隔简单地修改 miniute 字段，直到达到所需的结束时间......

```
List<java.sql.Time> intervals = new ArrayList<>(25);
// These constructors are deprecated and are used only for example
java.sql.Time startTime = new java.sql.Time(11, 0, 0);
java.sql.Time endTime = new java.sql.Time(12, 0, 0);

intervals.add(startTime);

Calendar cal = Calendar.getInstance();
cal.setTime(startTime);
while (cal.getTime().before(endTime)) {
    cal.add(Calendar.MINUTE, 15);
    intervals.add(new java.sql.Time(cal.getTimeInMillis()));
}

SimpleDateFormat sdf = new SimpleDateFormat("HH:mm");
for (java.sql.Time time : intervals) {
    System.out.println(sdf.format(time));
} 
```

这将输出

```
11:00
11:15
11:30
11:45
12:00 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T03:21:14.210

对你的问题有点扭曲：制作一个包含 5 间隔内所有整数的列表，介于 2 个整数之间：

首先，我们可以知道会有多少个数字，并相应地分配列表：（全部在伪代码中）

```
// assume begin and end is at the boundary of interval. 
int noOfElement = (begin - end)/5 + 1;
List<Integer> resultList = new ArrayList<>(noOfElement); 
```

然后填充列表中的值：

```
for (int i = begin; i <= end ; i += 5) {
  resultList.add(i);
} 
```

resultList 然后将包含您想要的所有值。

如果你能理解这个例子，那么处理 Date 的类似逻辑并没有什么特别之处

给您的更多提示：查看`Date#toTime()`, 和`Date(long Date)`

# windows-7 - 在 Excel 2010 和 Windows 7 中使用旧工具栏

> ID：15424036
> 
> 赞同：0
> 
> 时间：2013-03-15T03:11:46.167
> 
> 标签：windows-7, excel-2010, toolbars

我有一个工具栏，其中包含一些与 Personal.xls 中的宏链接的操作。我想在 Win7 下使用 Excel 2010 中的工具栏，但它坚持 C:\Documents and Settings\user\App...\PERSONAL.XLS 不存在。非常正确，他们已将 %AppData% 位置更改为 C:\Users\user... 而且我不能将 PERSONAL.XLS 的副本放在旧位置，因为 C:\Documents and Settings\ 是特殊情况在 Windows 7 中，它是所有人的禁地。

我的问题：如何重置链接到工具栏按钮的宏？

你以前可以访问

*   Commandbars 集合以获取命令栏

*   命令栏的 Controls 集合获取一个控件（本例中为按钮）

*   用于标识链接宏的控件的 OnAction 属性。

但 OnAction 似乎不是 Excel 2010 支持的属性。

有什么建议么？

我宁愿重新链接工具栏，也不愿创建新​​的自定义功能区选项卡。工具栏按钮不会浪费自定义功能区项目占用的大量空间，而且我工具栏上的自定义图标很有意义。附属问题：是否有简单的方法来为自定义功能区项目创建自定义设计？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:48:33.710

看来我调查的不够仔细。“OnAction”可能不会出现在对象浏览器中，但它是可用的，并且可用于重置关联的工具栏。使用“立即”窗口似乎无法正常工作，但可以在模块中的代码中使用。

各位干杯...

# ios - 在表 IOS 中选择单元格

> ID：15424043
> 
> 赞同：0
> 
> 时间：2013-03-15T03:12:54.027
> 
> 标签：ios, objective-c, nsstring, tableview, didselectrowatindexpath

我正在尝试创建一个将字符串对象“tableColorName”更改为所选单元格的方法。tableData`NSArray`由对象组成：“red”、“blue”、“green”。`redColor`如果选择红色，`blueColor`如果选择蓝色，如果选择绿色，我想将字符串“tableColorName”保存到`greenColor`。选择单元格后，我希望 viewController 返回根目录。我提前感谢您的帮助：

```
 -(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath     *)indexPath
{
    int theRow = indexPath.row;
    NSString *tableColorName;
    tableColorName = [[NSString alloc] initWithString:([_tableData [theRow]     stringValue],@"Color")]; 
    [self.navigationController popToRootViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:33:56.070

```
//first of all take one NSArray and 

- (void)viewDidLoad
{
    [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
    self.colorNames = [[NSArray alloc] initWithObjects:@"Red", @"Green",
                   @"Blue", @"Indigo", @"Violet", nil];

}

//  Implement Table method

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section     {
    return [self.colorNames count];
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:  (NSIndexPath *)indexPath 
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) 
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle    reuseIdentifier:CellIdentifier] autorelease];
    }

    // Configure the cell.
    self.navigationItem.title=@"Colors";

    UIImage *cellImage = [UIImage imageNamed:@"a.png"];
    cell.imageView.image = cellImage;

    NSString *colorString = [self.colorNames objectAtIndex: [indexPath row]];

    cell.textLabel.text = colorString;

    NSString *subtitle = [NSString stringWithString: @"All about the color "];
    subtitle = [subtitle stringByAppendingFormat:colorString];

    cell.detailTextLabel.text = subtitle;

    return cell;
}

- (void)tableView: (UITableView *)tableView didSelectRowAtIndexPath: (NSIndexPath       *)indexPath
{
    int idx = indexPath.row;
    obj.lbl.text=[@"You select "stringByAppendingString:[colorNames objectAtIndex:idx]];

    [self popToViewController animated:YES]; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T09:36:52.010

试试这个 ：：

```
NSArray *arr;
NSString *tableColorName; // Use in AppDelegate

- (void)viewDidLoad
{
  arr = [[NSArray alloc] initWithObjects:@"Red", @"Green", @"Blue", nil];
} 
```

表视图方法::

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    cell.title.text = [NSString stringWithFormat:@"%@", [arr objectAtIndex:indexPath.row]];   
    return cell;
}

-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    app.tableColorName = [NSString StringWithFormat:@"%@ Color", [arr objectAtIndex:indexPath.row]];
    [self.navigationController popToRootViewControllerAnimated:YES];
} 
```

然后，`app.tableColorName`在您想显示时访问。

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T03:18:29.090

```
-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath*)indexPath
{
     UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

    //do whatever with the selected cell.
    //go back to the root
} 
```

# c# - 在 NHibernate 中为两个不同的存储库使用相同的模型

> ID：15424045
> 
> 赞同：0
> 
> 时间：2013-03-15T03:12:57.147
> 
> 标签：c#, sql, nhibernate

我有一个这样的模型课，

```
 Class Student
{
    private virtual int StudentId;  --> id column
    private virtual int StudentName;
} 
```

我有两个存储库，分别是**LabRepository**和**LibraryRepository**，它们都有一个学生表。

**问题：** 当我尝试从 LabRepository 检索 Student 对象并使用相同的模型插入 LibraryRepository 时，它会失败，因为从 LabRepository 检索时 StudentId 值为 1，并且 NHibernate 在看到 Id 时将执行更新查询而不是插入查询列为 1。更新查询失败，因为库中没有 ID 为 1 的学生记录

我刚刚在这里给出了一个示例，但是我的实际模型类甚至很复杂，其中包含许多 id 列。有什么方法可以从一个存储库中获取模型对象并将其插入到另一个存储库中而不用担心 id列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T07:46:58.413

可以在使用除类名之外的明确声明的 EntityName 两次映射 Student 时完成

将 idgeneration 更改为分配并映射参考

```
public LibraryStudentMap()
{
    EntityName("LibraryStudent");
    Table("LibraryStudents");

    Id(x => x.StudentId).GeneratedBy.Assigned();
}
public LabStudentMap()
{
    EntityName("LabStudent");
    Table("LabStudents");

    Id(x => x.StudentId).GeneratedBy.Assigned();
}

public LibraryMap()
{
    References(x => x.Student).EntityName("LibraryStudent");
}

public LabMap()
{
    References(x => x.Student).EntityName("LabStudent");
} 
```

那么应该可以

```
lab.Student = library.Student;
session.SaveOrUpdate(lab); 
```

# cmd - 在 CMD 中显示不同的语言

> ID：15424047
> 
> 赞同：1
> 
> 时间：2013-03-15T03:13:13.610
> 
> 标签：cmd

我不确定这是否可能，但请听我说。

我想在命令提示符窗口中显示另一种语言（俄语）。可能吗？

我把它全部输入一个 .txt，保存，然后将它变成一个 .bat

例子：

```
@echo off
echo Привет <-- (Russian for "Hello")
pause 
```

但有了这个，我得到了奇怪的字符。我可以在其中包含西里尔文字，还是仅限于英文字符？

编辑：

尝试使用 chcp。在 cmd 窗口中直接使用时，进入 chcp 866 和 chcp 1251 会使提示符显示字符并且它可以工作。但是当只使用 .bat 文件时，我会得到奇怪的字符。但不像 O's 和 n's 顶部有摆动线，等号和 90 度角等字符。我使用了上面的代码并尝试在顶部添加 chcp 866/1251。还是不行。会不会是制作文件的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-07-12T23:18:26.800

您必须将其设置为 utf-8：chcp 65001

# cloud - 混合云的云代理应用程序

> ID：15424048
> 
> 赞同：0
> 
> 时间：2013-03-15T03:13:19.327
> 
> 标签：cloud, virtualization

目前，我支持 Amazon EC2/AWS 实例以及 Microsoft Azure、VMWare vCloud Director 和 ESX VM 实例。我使用 puppet 和 chef 来配置各种类型的服务器（Linux/JBoss、MS 2008、2012、BizTalk）。我正在寻找一个开源云代理应用程序，开发人员可以在其中选择平台、大小、操作系统和应用程序堆栈，类似于 Cloud66 的功能。

我研究了 Deltacloud 项目（[http://deltacloud.apache.org](http://deltacloud.apache.org)），但想知道这个空间中是否还有其他项目 - CompatibleOne 或 openQRM（[http://www.openqrm-enterprise.com/community /](http://www.openqrm-enterprise.com/community/) ) ?!?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T07:48:03.287

如果您正在寻找跨不同平台/提供商部署的库 - 但您自己管理与不同提供商的互动 - deltacloud 或[jClouds](http://jclouds.org)将适合您。

根据您对 Cloud66 的描述和参考，您似乎正在寻找一种服务，使您能够配置 VM 并将应用程序部署到不同的云提供商。您可以使用[ComputeNext](http://www.computenext.com)云服务市场根据提供商、平台、规模、操作系统等进行搜索和选择，采购和配置 VM/服务器。使用单个帐户，您可以使用通用 API 来配置来自多个云提供商的云服务。

CompatibleOne 让您能够定义服务器要求并在不同平台（AWS、OpenStack、Azure 等）中代理配置和部署。CompatibleOne 中包含用于 ComputeNext 的连接器或 PROCCI。这将使您能够在混合云设置中获得代理 - 例如，您可以使用 OSPROCCI 配置/部署到您的私有 OpenStack 云，并使用 CNPROCCI 配置和部署到 ComputeNext Marketplace 中的云提供商。

免责声明：我是 ComputeNext 的 CTO。

# android - 在android中使用比较数字和字符串

> ID：15424050
> 
> 赞同：2
> 
> 时间：2013-03-15T03:13:29.430
> 
> 标签：android

嗨，所有的安卓开发者，

你能帮我在android中使用比较通配符吗？

*示例：*
**数字**

```
if( 6.7890666 = 6.789* ){
     "Match"
}else{
     "Not Macth"
} 
```

**细绳**

```
if( "compare" = "com????" ){
     "Match"
}else{
     "Not Macth"
} 
```

你能帮忙在android程序中如何编码吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T07:11:22.087

你也可以使用

```
String a = "compare";
if( a.equalsIgnoreCase("com???"))
{
     "Match"
}else
{
     "Not Macth"
} 
```

equalsIgnoreCase 函数不区分大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T07:04:43.000

如果它是一个数字，这样做，

```
 if(123 == 123) 
```

如果它是一个字符串这样做，

```
 if(abc.equals(abc)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T04:43:47.520

要比较字符串，您必须使用 equals。

例如

```
String a = "abcd";
if(a.equals("com"))
{
} 
```

# php - 如何使用 Observer 设置 Grandtotal / BaseGrandTotal？

> ID：15424054
> 
> 赞同：2
> 
> 时间：2013-03-15T03:13:51.900
> 
> 标签：php, magento, discount, vcs-checkout

**配置文件**

```
 <sales_quote_collect_totals_before>
            <observers>
                <discount>
                    <class>discount/observer</class>
                    <method>discountMethod</method>
                </discount>
            </observers>
        </sales_quote_collect_totals_before> 
```

* * *

**观察者.php**

```
public function discountMethod($observer)
{
   $quote = $observer->getEvent()->getQuote();
   $quote->setGrandTotal(1);
   $quote->setBaseGrandTotal(1);
   $quote->save();
} 
```

* * *

我已经创建了 config.xml 和 Observer.php 并且该代码根本不起作用。$quote->getData() 显示：

```
[grand_total] => 1
[base_grand_total] => 1 
```

但是页面上的 GrandTotal 仍然显示真实价格 ![累计](../Images/86de58739ade9184dfdc7e93f9ab06e3.png)

我使用的是**默认 Magento 1.6.2**，在**结帐/单页/索引**上，每次单击“**继续**”都会触发该功能，但我不知道如何在报价上设置 grandTotal / BaseGrandTotal。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-03T21:47:04.000

您正在收听，`sales_quote_collect_totals_before`因此`grandTotal`在此事件之后收集包括 在内的总数，并且在`grandTotal`运行时总收集器将重置为 0。

如果您使用`sales_quote_collect_totals_after`的是总数应该是正确的，但税收计算会被搞砸，因为它将基于旧的总数。

我能想到的唯一干净的方法是创建自己的总收藏家`<before>tax</before>`

这是有关如何创建新的总收藏家的链接：http: [//magento.ikantam.com/qa/how-add-discount-total-magento](http://magento.ikantam.com/qa/how-add-discount-total-magento)

希望有帮助

# java - 解析从 Arduino 上的多个传感器读取的数据

> ID：15424056
> 
> 赞同：1
> 
> 时间：2013-03-15T03:14:10.703
> 
> 标签：java, parsing, user-interface, serial-port, arduino

这是我们为 Java GUI 实现的代码。问题是，由于串行数据是以位读取的，我们似乎无法想出一种方法来分离来自三个不同传感器（三个[LM35](http://www.ti.com/lit/ds/symlink/lm35.pdf)温度传感器作为占位符）的数据。问题在于 serialevent 类。

```
import gnu.io.*;
import java.awt.Color;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.Enumeration;
import java.util.HashMap;
import java.util.Scanner;
import java.util.TooManyListenersException;

public class Communicator implements SerialPortEventListener
{
    //Passed from main GUI.
    GUI window = null;

    //For containing the ports that will be found.
    private Enumeration ports = null;
    //map the port names to CommPortIdentifiers
    private HashMap portMap = new HashMap();

    //This is the object that contains the opened port.
    private CommPortIdentifier selectedPortIdentifier = null;
    private SerialPort serialPort = null;

    //Input and output streams for sending and receiving data.
    private InputStream input = null;
    private OutputStream output = null;

    //Just a boolean flag that I use for enabling
    //and disabling buttons depending on whether the program
    //is connected to a serial port or not.
    private boolean bConnected = false;

    //The timeout value for connecting with the port.
    final static int TIMEOUT = 2000;

    //Some ASCII values for for certain things.
    final static int SPACE_ASCII = 32;
    final static int DASH_ASCII = 45;
    final static int NEW_LINE_ASCII = 10;

    //A string for recording what goes on in the program;
    //this string is written to the GUI.
    String logText = "";

    public Communicator(GUI window)
    {
        this.window = window;
    }

    //Search for all the serial ports
    //  Pre: none
    //  Post: adds all the found ports to a combo box on the GUI
    public void searchForPorts()
    {
        ports = CommPortIdentifier.getPortIdentifiers();

        while (ports.hasMoreElements())
        {
            CommPortIdentifier curPort = (CommPortIdentifier)ports.nextElement();

            //Get only serial ports
            if (curPort.getPortType() == CommPortIdentifier.PORT_SERIAL)
            {
                window.cboxPorts.addItem(curPort.getName());
                portMap.put(curPort.getName(), curPort);
            }
        }
    }

    //Connect to the selected port in the combo box
    //  Pre : ports are already found by using the searchForPorts method
    //  Post: the connected communications port is stored in commPort, otherwise,
    //        an exception is generated
    public void connect()
    {
        String selectedPort = (String)window.cboxPorts.getSelectedItem();
        selectedPortIdentifier = (CommPortIdentifier)portMap.get(selectedPort);

        CommPort commPort = null;

        try
        {
            //The method below returns an object of type CommPort
            commPort = selectedPortIdentifier.open("TigerControlPanel", TIMEOUT);
            //The CommPort object can be casted to a SerialPort object
            serialPort = (SerialPort)commPort;

            //For controlling GUI elements
            setConnected(true);

            //Logging
            logText = selectedPort + " opened successfully.";
            window.txtLog.setForeground(Color.black);
            window.txtLog.append(logText + "\n");
            window.txtLog1.setForeground(Color.black);
            window.txtLog1.append(logText + "\n");
            window.txtLog2.setForeground(Color.black);
            window.txtLog2.append(logText + "\n");

            //CODE ON SETTING BAUD RATE, ETC. OMITTED
            //XBEE PAIR IS ASSUMED TO HAVE THE SAME SETTINGS ALREADY

            //Enables the controls on the GUI if a successful connection is made
            window.keybindingController.toggleControls();
        }
        catch (PortInUseException e)
        {
            logText = selectedPort + " is in use. (" + e.toString() + ")";

            window.txtLog.setForeground(Color.RED);
            window.txtLog.append(logText + "\n");
            window.txtLog1.setForeground(Color.RED);
            window.txtLog1.append(logText + "\n");
            window.txtLog2.setForeground(Color.RED);
            window.txtLog2.append(logText + "\n");
        }
        catch (Exception e)
        {
            logText = "Failed to open " + selectedPort + "(" + e.toString() + ")";
            window.txtLog.append(logText + "\n");
            window.txtLog.setForeground(Color.RED);
            window.txtLog1.append(logText + "\n");
            window.txtLog1.setForeground(Color.RED);
            window.txtLog2.append(logText + "\n");
            window.txtLog2.setForeground(Color.RED);
        }
    }

    //Open the input and output streams
    //  pre: an open port
    //  post: initialized intput and output streams for use to communicate data
    public boolean initIOStream()
    {
        //Return value for whather opening the streams is successful or not
        boolean successful = false;

        try {
            input = serialPort.getInputStream();
            output = serialPort.getOutputStream();
            successful = true;
            return successful;
        }
        catch (IOException e) {
            logText = "I/O Streams failed to open. (" + e.toString() + ")";
            window.txtLog.setForeground(Color.red);
            window.txtLog.append(logText + "\n");
            window.txtLog1.setForeground(Color.red);
            window.txtLog1.append(logText + "\n");
            window.txtLog2.setForeground(Color.red);
            window.txtLog2.append(logText + "\n");
            return successful;
        }
    }

    //Starts the event listener that knows whenever data is available to be read
    //  pre: an open serial port
    //  post: an event listener for the serial port that knows when data is recieved
    public void initListener()
    {
        try
        {
            serialPort.addEventListener(this);
            serialPort.notifyOnDataAvailable(true);
        }
        catch (TooManyListenersException e)
        {
            logText = "Too many listeners. (" + e.toString() + ")";
            window.txtLog.setForeground(Color.red);
            window.txtLog.append(logText + "\n");
            window.txtLog1.setForeground(Color.red);
            window.txtLog1.append(logText + "\n");
            window.txtLog2.setForeground(Color.red);
            window.txtLog2.append(logText + "\n");
        }
    }

    //Disconnect the serial port
    //  pre : an open serial port
    //  post: clsoed serial port
    public void disconnect()
    {
        //Close the serial port
        try
        {
            serialPort.removeEventListener();
            serialPort.close();
            input.close();
            output.close();
            setConnected(false);
            window.keybindingController.toggleControls();

            logText = "Disconnected.";
            window.txtLog.setForeground(Color.red);
            window.txtLog.append(logText + "\n");
            window.txtLog1.setForeground(Color.red);
            window.txtLog1.append(logText + "\n");
            window.txtLog2.setForeground(Color.red);
            window.txtLog2.append(logText + "\n");
        }
        catch (Exception e)
        {
            logText = "Failed to close " + serialPort.getName() + "(" + e.toString() + ")";
            window.txtLog.setForeground(Color.red);
            window.txtLog.append(logText + "\n");
            window.txtLog1.setForeground(Color.red);
            window.txtLog1.append(logText + "\n");
            window.txtLog2.setForeground(Color.red);
            window.txtLog2.append(logText + "\n");
        }
    }

    final public boolean getConnected()
    {
        return bConnected;
    }

    public void setConnected(boolean bConnected)
    {
        this.bConnected = bConnected;
    }

    //What happens when data is received
    //  pre : serial event is triggered
    //  post: processing on the data it reads
    public void serialEvent(SerialPortEvent evt) {
        if (evt.getEventType() == SerialPortEvent.DATA_AVAILABLE)
        {
            try
            {
                byte singleData = (byte)input.read();
                //byte[] buffer = new byte[128];

                if (singleData != NEW_LINE_ASCII)
                {
                    logText = new String(new byte[] {singleData});
                    window.txtLog.append(logText);
                }
                else
                {
                    window.txtLog.append("\n");
                }
            }
            catch (Exception e)
            {
                logText = "Failed to read data. (" + e.toString() + ")";
                window.txtLog.setForeground(Color.red);
                window.txtLog.append(logText + "\n");
            }
        }
    }

    //Method that can be called to send data
    //  pre : open serial port
    //  post: data sent to the other device
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T10:47:05.973

如果 Arduino 只是按顺序从每个传感器将温度作为字符串发送回（我假设它是，但您根本没有指定它发送的内容，所以我可能是错的）然后假设您没有禁用串行重置连接，你可以简单地记下温度的顺序——比如第一个温度读数来自传感器 1，第二个来自传感器 2，第三个来自传感器 3，第四个来自传感器 1，依此类推。

但是，为了更清晰、更可靠的方式，我建议修改 Arduino 代码以发回每个读数来自哪个传感器的详细信息，而不仅仅是发回原始位 - 以这种方式更改代码对于 Arduino 来说应该是相对微不足道的端，然后使解析数据 PC 端更容易。

# javascript - 通过名单 从 Javascript 到 ASP.Net 页面中启用 AJAX 的 WCF

> ID：15424058
> 
> 赞同：2
> 
> 时间：2013-03-15T03:14:18.067
> 
> 标签：javascript, asp.net-mvc, wcf

我正在从 ASP.Net 页面调用 WCF 方法，但是当 WCF 尝试反序列化从 JavaScript 接收的 recordIds 参数时，我收到格式异常。

传递给 WCF 方法的第一个参数需要是 List 类型。我在使用 JSON.stringify 时做错了什么吗？

**调用 WCF 的 Javascript 代码**

```
 function Update() {
        var myarray1 = new Array();
        myarray1[0] = 1;
        myarray1[1] = 11;
        myarray1[2] = 14;
        WCFService1.AJAXEnabledService.BatchUpdateRecords(
          JSON.stringify({recordIDs: myarray1}) , "ddsd", "gggg", 
          updateGrid, OnError);
    } 
```

**上面的 JavaScript 调用的 WCF 方法**

```
 [OperationContract]
    public bool BatchUpdateRecords(List<int> recordIds, string columnNameToUpdate, string columnValue)
    {

        DataTable tierIDsTable = new DataTable("RecordIds");
        tierIDsTable.Columns.Add(new DataColumn("Integer", typeof(Int32)));
        tierIDsTable.PrimaryKey = new DataColumn[] { tierIDsTable.Columns["TierId"] };

        foreach (int recordId in recordIds)
        {
            tierIDsTable.Rows.Add(recordId);
        }
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:17:56.910

不是 100% 确定，但你试过吗？

```
WCFService1.AJAXEnabledService.BatchUpdateRecords(
    myarray1,
    "ddsd",
    "gggg",
    updateGrid, OnError); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T03:20:13.597

问题（不知道您收到的错误）很可能是您尝试传入多个参数类型。WCF 通常不支持，而是需要一个对象。使用您的参数创建一个响应类并改用它。

```
public class ResponseObject 
{
    public List<int> recordIds { get; set; } 
    public string columnNameToUpdate { get; set; }
    public string columnValue { get; set; }
} 
```

使用这个对象作为你的参数

```
public bool BatchUpdateRecords(ResponseObject responseObject) 
{... 
```

# java - 将片段中的 ListView 链接到不同的 Activity

> ID：15424062
> 
> 赞同：2
> 
> 时间：2013-03-15T03:14:56.043
> 
> 标签：java, android, listview, fragment

我在片段内创建了一个 ListView，但似乎无法将 ListView 的选择链接到不同的活动。希望有人可以帮助我解决这个问题，当它不在片段内时，我能够执行相同的操作。

下面的代码显示了与其他活动链接的常规 ListView：

```
public class Main extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_Main);

    ListView listView2 = (ListView) findViewById(R.id.listView2);
    String[] values = new String[] { "Apple", "Orange", "Banana", "Pineapple", "Kiwi"};

    ArrayAdapter <String> adapter2 = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1, values);
    listView2.setAdapter(adapter2);

            listView2.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

                switch( position )
                {
                   case 0:  Intent newActivity = new Intent(Main.this, FirstChoice.class);     
                            startActivityForResult(newActivity, 0);
                            break;
                   case 1:  Intent newActivity1 = new Intent(Main.this, Second Choice.class);     
                            startActivityForResult(newActivity1, 1);
                            break;

                            .
                            .
                            . 
```

以下是我当前的片段代码：

```
public class Tab1 extends ListFragment{

ListView list;
ArrayAdapter <String> adapter;
Context context;

public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

        context = getActivity();
        View view;
        view = inflater.inflate(R.layout.activity_firstchoice, null);

        String [] elements = context.getResources().getStringArray(R.array.thelist);

        list = (ListView) view.findViewById(R.id.listView1);
        adapter = new ArrayAdapter <String> (context, R.layout.activity_ecfs, R.id.section_label, elements);

        list.setAdapter(adapter);

        return view;
}

public void onListItemClick(ListView l, View v, int position, long id) {
    // Do something with the data
    switch( position )
    {
       case 0:  Intent newActivity = new Intent();     
                startActivityForResult(newActivity, 0);
                break;
       case 1:  Intent newActivity1 = new Intent();     
                startActivityForResult(newActivity1, 1);
                break;
       case 2:  Context context2 = getApplication();
                CharSequence text2 = "Not Available";
                int duration2 = Toast.LENGTH_SHORT;

                Toast toast2 = Toast.makeText(context2, text2, duration2);
                toast2.show();
                break;
    }

  }
} 
```

我希望做一些类似于顶部 ListView 的事情，但在片段内。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T03:42:32.467

您可以只获取对`Fragment`父级的引用`Activity`。

```
 case 0:  
        Intent newActivity = new Intent(getActivity(), FirstChoice.class);     
        startActivityForResult(newActivity, 0);
        break; 
```

或使用传入`ListView`或从他们`View`那里获取`Context`。

```
 case 0:  
        Intent newActivity = new Intent(l.getContext(), FirstChoice.class);     
        startActivityForResult(newActivity, 0);
        break; 
```

# c - (C) 来自文本文件的基数排序数组

> ID：15424063
> 
> 赞同：0
> 
> 时间：2013-03-15T03:15:00.493
> 
> 标签：c, algorithm, sorting, radix

我试图让这种基于队列的基数排序工作，但我似乎无法弄清楚它有什么问题。它使用文本文件作为输入介质，当我尝试编译它并使用文本文件运行它时会引发大量错误。

在这一点上，任何建议都会有所帮助。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#define MAX 10
#define SHOWPASS

//Compiled Using GNU GCC Compiler

void radixsort(int *a[], int n)
{
  int i, b[MAX], m = *a[0], exp = 1;
  for (i = 0; i < n; i++)
  {
    if (*a[i] > m)
      m = a[i];
  }

  while (m / exp > 0)
  {
    int queue[10] =
    { 0 };
    for (i = 0; i < n; i++)
      queue[*a[i] / exp % 10]++;
    for (i = 1; i < 10; i++)
      queue[i] += queue[i - 1];
    for (i = n - 1; i >= 0; i--)
      b[--queue[*a[i] / exp % 10]] = *a[i];
    for (i = 0; i < n; i++)
      *a[i] = b[i];
    exp *= 10;

    #ifdef SHOWPASS
      printf("\nPASS   : ");
      radixsort(a, n);
    #endif
  }
}

int main( int argc, char *argv[] )
{
    if ( argc != 3 )
    {
  printf("Need two input parameters in the following order: \n 1\. Input file path \n 2\. Number of elements in file\n");
  return 0;
}
 int num_elements = atoi(argv[2]);
 int *input_arr = (int*) calloc (num_elements, sizeof(int));
 int i;

    FILE *fin; //File pointer to read input file
    fin = fopen(argv[1], "r"); //Initialize file pointer

for(i=0; i<num_elements; i++)
{
fscanf(fin, "%d", &(input_arr[0]));
}

radixsort(input_arr[0], i);

printf ( "\nArray before sorting: \n") ;

for ( i = 0 ; i < num_elements ; i++ )
printf ( "%d\t", input_arr[0] ) ;
printf ( "\n\n");
return 0;enter code here
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:39:59.533

您的代码中有很多错误。首先，您输入的方式不正确。

```
fscanf(fin, "%d", &(input_arr[0])); 
```

在接受输入时，数组 input_arr 在 input_arr[0] 处填充了单个输入值。输入的其余部分在 input_arr[0] 处被覆盖。

将其替换为，`fscanf(fin, "%d", &(input_arr[i]));`。

即使您以错误的方式显示输出。排序后，由于以下错误语句，相同的输出将显示 num_elements 次：

`printf ( "%d\t", input_arr[0] ) ;`

再次将上述语句替换为`printf ( "%d\t", input_arr[i] )`.

由于以下错误陈述的影响，

`fscanf(fin, "%d", &(input_arr[i]));`,

您的程序遇到 a `Segmentation fault`，因为在 function 中`radixsort`，您正在从 0 迭代到 n-1（元素数）。

```
 for (i = 0; i < n; i++)
 {
   if (*a[i] > m)
   m = a[i];
 } 
```

由于只有 a[0] 填充了输入值，而数组的其余部分（从 a[1] 到 a[n-1]）包含垃圾值，因此在执行代码时会出现运行时错误。

还有很多其他的错误，我已经修复了。这是完美的运行代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#define MAX 10
// #define SHOWPASS

// Compiled Using GNU GCC Compiler

void radixsort(int a[], int n)
{
    int i, b[MAX], m = a[0], exp = 1;
    for (i = 0; i < n; i++)
    {

        if (a[i] > m)
            m = a[i];
    }

    while (m / exp > 0)
    {
        int queue[10] = { 0 };
        for (i = 0; i < n; i++)
            queue[a[i] / exp % 10]++;
        for (i = 1; i < 10; i++)
            queue[i] += queue[i - 1];
        for (i = n - 1; i >= 0; i--)
            b[--queue[a[i] / exp % 10]] = a[i];
        for (i = 0; i < n; i++)
            a[i] = b[i];
        exp *= 10;

#ifdef SHOWPASS
        printf("\nPASS   : ");
        radixsort(a, n);
#endif
    }
}

int main(int argc, char *argv[])
{
    if (argc != 3)
    {
        printf
            ("Need two input parameters in the following order: \n 1\. Input file path \n 2\. Number of elements in file\n");
        return 0;
    }
    int num_elements = atoi(argv[2]);
    int *input_arr = (int *)calloc(num_elements, sizeof(int));
    int i;

    FILE *fin;                  // File pointer to read input file
    fin = fopen(argv[1], "r");  // Initialize file pointer

    for (i = 0; i < num_elements; i++)
    {
        fscanf(fin, "%d", &(input_arr[i]));
    }

    radixsort(input_arr, i);

    printf("\nArray before sorting: \n");

    for (i = 0; i < num_elements; i++)
        printf("%d\t", input_arr[i]);
    printf("\n\n");
    return 0;
} 
```

# java - 文本未保存到字符串变量

> ID：15424065
> 
> 赞同：1
> 
> 时间：2013-03-15T03:15:09.033
> 
> 标签：java, android, string, http, url

我一直在尝试让一个应用程序工作，它允许我从 URL 读取，然后将我从 URL 获得的文本用于应用程序中的其他目的。

我遇到的问题是文本没有被“保存”。

我知道我的#getText 方法有效，因为我在 IntelliJ 中运行了一个基本的命令行应用程序：

```
String textFromUrl;

public static void main(String[] args) {
textFromUrl = Vars.getEngUrlText();
System.out.println(textFromUrl);
} 
```

结果是它打印了它应该打印的确切文本。这是在我的 Android 项目的主要活动类中编写的，我只是将主要方法作为普通的 Java 应用程序运行，而不是从我的 USB 设备运行实际的 apk。

现在，我尝试通过 In Vars 类在 Android 设备中做同样的事情：

```
String textFromUrl; 
```

在第一个活动的#onCreate 中：

```
Vars.textFromUrl = Vars.getEngUrlText();

TextView tx = (TextView) findViewById(R.id.titletext);
tx.setText(Vars.textFromUrl); 
```

它只是显示空白，没有文字，什么都没有。其余的布局很好，其他一切都显示并且没有错误。我假设 textFromUrl 的值为空，我不知道为什么。

是的，我确实拥有在我的 AndroidManifest 中访问网络的适当权限，因为我使用的是 WebView 并且它工作正常。我什至尝试过运行线程，让它在更改文本之前等待一段时间（大约 5 秒），但它仍然无法工作。

这是怎么回事？

# getText 和 #getEngUrlText 下面。

getEngUrlText 调用 getText：

```
public static String getText(String url) throws Exception {

        URL website = new URL(url);
        URLConnection connection = website.openConnection();
        BufferedReader in = new BufferedReader(
                new InputStreamReader(
                        connection.getInputStream()));

        StringBuilder response = new StringBuilder();
        String inputLine;

        while ((inputLine = in.readLine()) != null)
            response.append(inputLine);

        in.close();

        return response.toString();
    }

public static String getEngUrlText() {
        try {
            textFromUrl = getText("url that is supposed to be here removed");
        } catch (Exception e) {
            e.printStackTrace();
        }

        return textFromUrl;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:19:32.780

通过针对较低的 SDK 修复此问题。显然我没有看到 logcat 显示的 NetworkOnMainThreadException，因为我只是在寻找错误，而不是所有警告等。

# java - 本地和云端MySQL数据库... 2路同步

> ID：15424066
> 
> 赞同：1
> 
> 时间：2013-03-15T03:15:17.673
> 
> 标签：java, mysql, database, synchronization, local

它用于在 JAVA 中完成的项目。我必须将我的本地数据库与另一个存储在云上的数据库同步。

我的应用程序通常连接到 xampp 并使用数据库 mysql（数据库名称：项目）。我在 dropBox 中复制了同一数据库（项目）的另一个实例。但我不认为这是这样做的正确方法。

任何人都可以建议一种正确的方法来进行这种同步。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T03:18:21.270

您需要设置的是 MySQL 的复制服务。

[这](http://dev.mysql.com/doc/refman/5.0/en/replication.html)会有所帮助。

谢谢！，

@leo

# regex - python中的正则表达式语法

> ID：15424067
> 
> 赞同：0
> 
> 时间：2013-03-15T03:15:21.653
> 
> 标签：regex, python-2.7

我尝试编写一个python脚本来分析数据txt。我希望脚本做这样的事情：在一行中查找所有时间数据，并比较它们。但这是我第一次编写RE语法。所以我写了一个第一个小脚本。

我的脚本是：

```
import sys
txt = open('1.txt','r')
a = []
for eachLine in txt:
    a.append(eachLine)
import re
pattern = re.compile('\d{2}:\d{2}:\d{2}')
for i in xrange(len(a)):
    print pattern.match(a[i])
#print a 
```

并且输出始终为**None**。

我的txt就像图片一样： ![在此处输入图像描述](../Images/1e8c73f7af98dc2493c29cc7b5174a48.png)

有什么问题？请帮助我。多谢。

我的python是python 2.7.2。我的操作系统是windows xp sp3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T03:23:57.617

您没有错过正则表达式中的“：”之一吗？我想你的意思是

```
re.compile('\d{2}:\d{2}:\d{2}') 
```

其他问题是：

首先，如果要在孔文本中搜索，请使用`search`而不是`match`. 其次，要访问您的结果，您需要在搜索返回的匹配对象中调用 group()。

尝试一下：

```
import sys
txt = open('1.txt','r')
a = []
for eachLine in txt:
    a.append(eachLine)
import re
pattern = re.compile('\d{2}:\d{2}:\d{2}')
for i in xrange(len(a)):
    match = pattern.search(a[i])
    print match.group()
#print a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T03:47:00.250

我认为您缺少正则表达式中的冒号和点。也可以尝试在整个文本上使用 re.search 或 re.findall。像这样：

```
import re, sys

text = open("./1.txt", "r").read() # or readlines() to make a list of lines
pattern = re.compile('\d{2}:\d{2}:\d{2}')

matches = pattern.findall(text)

for i in matches:
     print(i); 
```

# java - 需要帮助在排序的 LinkedList 中添加节点

> ID：15424068
> 
> 赞同：1
> 
> 时间：2013-03-15T03:15:24.413
> 
> 标签：java, data-structures, linked-list

我正在尝试按客户对象名称的字母顺序按顺序添加一个新的客户对象（应该是 node.data，而不是节点）。但它不起作用。它以未排序的顺序打印出列表（与原始顺序保持不变）。

```
public void  add(Customer newNode, int dummy){
   if (head == null){ // The first node
      head = tail = this;
      head.setData(newNode);
      size=1;
      return;

   }else{
       CustomerList last = null;
       for(CustomerList node = head; 
               node != null && node.getData().toString().compareTo(newNode.name) < 0; 
                    node = node.next){
          last = node; 

       }
       CustomerList newList = new CustomerList(newNode);
       newList.setNext(last.next);
       last.next = newList;
   }

} // add 
```

从 txt 文件输入客户对象。应按字母顺序（客户名称）再次打印出来。

```
10121,Airgo Fresh ods,OH,870023
10125,Bird Out fittered ,MI,870023
10134,Kit river ,IL,870023
10167,Mouin Gontaods,OR,870021
10178,Theiasu El senter,CA,870022 
```

从 txt 文件读取数据并创建对象并添加到列表的代码：

```
public void byCustomerName()
 {
 records = null;
 System.gc();
 CustomerList.setHead(null);
 records = new CustomerList();
 try
  {
  String line;
  StringTokenizer st;
  String id, name, state, salesrep;
  BufferedReader infile = new BufferedReader(new FileReader("Customer.txt"));
  while ((line = infile.readLine()) != null)
      {
      st = new StringTokenizer(line, ",");
      id = st.nextToken(",");
      name = st.nextToken(",");
      state = st.nextToken(",");
      salesrep = st.nextToken(",");
      records.add(new Customer(id, name, state, salesrep), 99);
      }
  infile.close();
  } catch (IOException x) { System.err.println(x); } 
 } // byCustomerName 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:23:45.050

我认为你的代码有各种各样的问题。一方面，我从来没有看到你更新`head`，或者`tail`你是否替换了第一个或最后一个元素。此外，没有检查`last`可能是`null`. `CustomerList`如果不知道您的一些基础项目是如何工作的，就很难说更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T03:43:43.240

实际上，我在两个学期前做了同样的作业，但我决定再次上课，因为我无法参加期末考试。但是由于两个学期没有编程，我现在非常生疏。我现在打算放弃并使用我第一次上课时提出的旧解决方案。

解决方案：

```
public void add(Customer newNode, int dummy) {  
    CustomerList before = null;
    boolean inserted = false;
    if (head == null) {  //first node   
        head = tail = this;
        head.setData(newNode);
        return;
    } else {
        CustomerList curr = head;
        while(curr != null) {
            String currentName = curr.getData().getName();
            String newNodeName = newNode.name;
            if (currentName.compareToIgnoreCase(newNodeName) > 0) {

                CustomerList cList = new CustomerList(newNode);
                cList.setNext(curr);//curr is greater than clist, therefore cList's next element is curr
                if(before!=null)
                    before.setNext(cList);
                else {  //this tests the case when 
                    //the newNode goes at the BEGINNING of the list
                    head = cList;
                }
                curr = cList;
                inserted = true;
                return;
            }
            before = curr;
            curr = curr.next;               
        }
    }
    if(!inserted) {
        add(newNode);
    }

} // add 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T05:38:48.010

正如 Sudhanshu 已经告诉你的那样，你可以`Collections.sort(-)`在你的对象上使用方法，`List`或者作为备用方法`TreeSet`，以防万一你想要独特的对象。最好使用内置方法，`java API`因为这些方法不易出错且更可靠，同时您可以减少代码和时间。

# bonjour - Bonjour：无法通过 Windows 上的 serviceName ping

> ID：15424070
> 
> 赞同：2
> 
> 时间：2013-03-15T03:15:56.100
> 
> 标签：bonjour

我开发了我们的应用程序，可以通过func成功获取hotsname：ServiceFound(DNSSDService sref, DNSSDFlags flags, uint ifIndex, String serviceName, String regType, String domain)

我检查了wireshark和Log，serviceName是对的。

我的问题：为什么我不能通过“serviceName.domain”ping 它，例如：ping serviceName.local。（我想在运行我的应用程序之前使用 ping 测试可用的网络。现在它被阻止了失败的 ping）但是我可以通过真实 IP ping 它，例如：ping 1.2.3.4（这意味着网络正常）

ServiceFound 和 ServiceResolved 只提供 serviceName。

那么如何解决这个问题：1）获取IP的一种简单方法或2）如何解决“ping serviceName.local”的问题

非常感谢您的提前支持！

****** *** ** *** ** *** ** *** ** *** ** *** ** *** ******更新****** ** *** ** ***** 我在其他 PC 上重新测试：**

 **我使用 dns-sd.exe 调试网络

使用以下命令可以获得服务名

$ dns-sd.exe -B _http._tcp

如果域服务类型实例名称 4:33:52.663 添加 3 3 本地，则浏览 _http._tcp 时间戳 A/R 标志。_http._tcp。测试

使用以下命令可以获得区域文件

$ dns-sd.exe -Z _http._tcp

正在浏览 _http._tcp _http._tcp PTR Officejet\032Pro\032L7500\032[FEDCE8]._http._tcp Officejet\032Pro\032L7500\032[FEDCE8]._http._tcp SRV 0 0 80 HPFEDCE8.local。; 替换为目标主机 Officejet\032Pro\032L7500\032[FEDCE8]._http._tcp TXT "" 的单播 FQDN

使用以下命令可以获得IP（基于HPFEDCE8.local。在上面的反馈中）

$ dns-sd.exe -G v4 HPFEDCE8.local。

如果主机名地址 TTL 4:43:38.965 添加 2 3 bej1301Dell2360.local，则时间戳 A/R 标志。10.61.20.99 240

所以我可以通过 HPFEDCE8.local ping 通它。

但是在我的测试电脑中：“$ dns-sd.exe -B _http._tcp”是可以的，但是其他命令都失败了。

所以我认为这是根本原因。所以我的问题是：据我所知，我们可以使用“实例名称”来生成主机名：test.local。为什么它们与“HPFEDCE8.local”不同。在区域文件中
为什么“ping HPFEDCE8.local”。好的，“ping test.local”。失败的

您对我的测试 PC 有其他想法吗？

非常感谢！！**

# android - 大位图的平铺和缩放技术

> ID：15424073
> 
> 赞同：2
> 
> 时间：2013-03-15T03:16:10.647
> 
> 标签：android, maps, xamarin.android, tiles

我一直在开发一个 android 应用程序，它试图完成以下任务： - 从服务下载大图像（大约 4000 像素 x 4000 像素） - 显示这些图像并让用户缩放/平移 - 绘制叠加层以显示其他信息

到目前为止，我通过[加载图像的缩小版本](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)并将其用于平移和缩放，在平移/缩放停止后使用[BitMapRegionDecoder](http://developer.android.com/reference/android/graphics/BitmapRegionDecoder.html#decodeRegion%28android.graphics.Rect,%20android.graphics.BitmapFactory.Options%29)加载当前可视区域的高分辨率表示，取得了一定的成功。

虽然这似乎可行，但我意识到我需要投入大量时间才能使一切顺利和稳定，而且我有一种预感，即基于图块的方法将产生更好的性能。所以我的问题是，谁能给我指出一些库或资源，让我以站在巨人肩膀上的方式卸载一些工作:)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-05T14:10:39.557

我在这里有点晚了，但我遇到了这个问题，这个答案可能对其他人有所帮助。我最近开发了一个开源库，可以将大图像分割成小图块，只显示可见的图块。它还处理缩放/平移/双击手势。源代码和示例可在[https://github.com/diegocarloslima/ByakuGallery获得](https://github.com/diegocarloslima/ByakuGallery)

# c - 从 C 中的函数返回带有参数的字符串

> ID：15424074
> 
> 赞同：0
> 
> 时间：2013-03-15T03:16:12.897
> 
> 标签：c

我试图从我的 sCopy() 函数返回一个字符串，所以我可以在我的代码的 main() 函数中打印它。请帮忙。

```
const char *sCopy(char buffer[256], int i);

int main() {
    int i;
    int x;
    char buffer[256];
    char newBuffer;//[256];
    printf("Please enter a number: ");
    fgets(buffer, 256, stdin);
    i = atoi(buffer);

printf("The value you entered is %d.  Its double is %d.\n", i, i*2);
newBuffer = sCopy(buffer, i);  
printf(newBuffer);    
return 0;
}   

const char *sCopy(char buffer[256], int i){
    char nBuffer[256];
    char *t;        
    int x;
    for(x = 0; x < i; x++){
        strcat(t, buffer);
    }
    //t = nBuffer;
    return t;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:51:21.033

下面我的分析。从我在这里看到的内容来看，您应该了解指向 char (char*) 的指针和 char 数组之间的区别。我非常感谢您在询问之前尝试自己解决它。

```
const char *sCopy(char buffer[256], int i); 
/* let's start from here, what i represents? Keep in mind that the most of the   */
/* time an external developer will see just your declaration of a method, always */
/* try to give significant names to variables.                                   */

int main() {
    int i = 0;
    /* always initialize variables to default values, especially if they are     */
    /* going to be indexes in a buffer.                                          */  

    int x = 0;
    char buffer[256] = "";
    /* you can even initialize this to "" in order to mimic an empty string,     */
    /* that is a char array cointining just \0 (string null-terminator).         */

    char newBuffer[256] = "";
    /* same here, you always need to declare the size of a char array unless     */ 
    /* you initialize it like this -char newBuffer[] = "hello"-, in which case   */
    /* the size will automatically be 6 (I'll let you discover/understand */
    /* why 6 and not 5).                                                         */

    printf("Please enter a number: ");
    fgets(buffer, 256, stdin); // nice link at the bottom on input reading
    i = atoi(buffer);

    printf("The value you entered is %d.  Its double is %d.\n", i, i*2);
    newBuffer = sCopy(buffer, i);  
    printf(newBuffer);    
    return 0;
}   

/* I am not going to debate the idea of returning a char pointer here :)           */
/* Remember that in this case you are returning a pointer to some memory that has  */
/* been allocated somewhere inside your function and needs to be released (freed)  */
/* by someone outside your control. Are they going to remember it? Are they        */
/* going to do it? In this case "they" is "you" of course.                         */
/* I'll let you explore alternative approaches.                                    */

const char *sCopy(char buffer[256], int i){
    char nBuffer[256] = ""; // see above
    char *t = NULL;
    /* you always init a pointer to NULL. As you can see, initializing here will */
    /* make you think that there might be problem with the strcat below.           */

    int x; // ok here you can omit the init, but be aware of it.
    for(x = 0; x < i; x++){
        strcat(t, buffer);

    /* what are you missing here? this piece of code is supposed to concatenate the */
    /* input buffer to a brand new buffer, pointed by your variable t. In your implementation */
    /* t is just a pointer, which is nothing more than a number to a memory location */
    /* With the initialization, the memory location you are pointing to is NULL, which */
    /* if de-referenced, will cause massive problems.                                */
    /* What you are missing is the blank slate where to write your data, to which your */ 
    /* pointer will read from.                                                        */
    }
    //t = nBuffer;
   return t;
} 
```

我真的希望这会对你有所帮助。我很抱歉，但我不能写出解决方案，因为我认为如果你努力学习它会更好。你可以找到很多关于 char 指针的教程，我相信你会解决这个问题。

（输入读数）[C scanf() 和 fgets() 问题](https://stackoverflow.com/questions/7060573/c-scanf-and-fgets-problem)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T05:18:18.770

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

const char *sCopy(char buffer[256], int i);

int main() {
    int i;
    int x;
    char buffer[256];
    const char* newBuffer;//[256];
    printf("Please enter a number: ");
    fgets(buffer, 256, stdin);
    i = atoi(buffer);

printf("The value you entered is %d.  Its double is %d.\n", i, i*2);
newBuffer = sCopy(buffer, i);  //buffer tail '\n' need cut?
printf(newBuffer);

    free(newBuffer);
    return 0;
}   

const char *sCopy(char buffer[256], int i){
    char *t;        
    int x;

    t=(char*)malloc(strlen(buffer)*i + 1);
    *t='\0';
    for(x = 0; x < i; x++){
        strcat(t, buffer);
    }
    //t = nBuffer;
    return (const char*)t;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T03:17:51.887

`char *t`未分配内存。您可以使用直接实现字符串复制`strdup`。

```
char *newBuffer = NULL;
...
...
newBuffer = strdup(buffer); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T03:18:07.523

尝试

```
char* newBuffer; // point to a c-string // here the return value of sCopy 
```

和

```
static char nBuffer[256]; // make nBuffer survive beyond function call 
```

并且只使用 n return `nBuffer`，而不是`t`.

这是您可以做到的一种方式，无需分配。或者分配内存并返回它而不是`static char`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T03:27:35.753

试试下面：

```
#include <string.h>
#include <stdio.h>
#include <stdlib.h>

void sCopy(char buffer[256], int i, char newBuffer[], int size)
{
    char *t;        
    for(int x = 0; x < i; x++){
      strcat(newBuffer, buffer);
     }
 }

int _tmain(int argc, _TCHAR* argv[])
{
   int i;
   char buffer[256] = {0};
   char newBuffer[256] = {0};
   printf("Please enter a number: ");
   fgets(buffer, 256, stdin);
   i = atoi(buffer);

   printf("The value you entered is %d.  Its double is %d.\n", i, i*2); 
   sCopy(buffer, i, newBuffer, 256);
   printf("%s", newBuffer);   
   return 0;
} 
```

请注意，在输入字符串的末尾`fgets`附加 a ，因此如果您输入，则字符串是ASCII 代码的位置，并且是 的 ASCII 代码，要删除这个换行符，请参阅[此链接](https://stackoverflow.com/questions/2693776/removing-trailing-newline-character-from-fgets-input)`new line character``6``0x36 0x0a``0x36``6``0x0a``new line character`

# ios - 带有Json文件的UITableView，将图像加载到单元格消失

> ID：15424076
> 
> 赞同：0
> 
> 时间：2013-03-15T03:16:16.147
> 
> 标签：ios, json, image, uitableview

我正在使用由以下网站提供的 asyncimageview 类：http: [//www.markj.net/iphone-asynchronous-table-image/](http://www.markj.net/iphone-asynchronous-table-image/)

我从 json 文件中获取图像 url 并将每个图像加载到一个单元格中。

问题：

当我向上滚动并向下滚动到同一个单元格时，图像会重新加载（消失并再次出现）。我无法弄清楚为什么图像不断重新加载？有没有人对我如何让它停止有建议或解决方案？提前致谢！

```
 // Asks the data source to return a cell to insert in a particular table view location

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    //Gets the current news article
    NewsArticle *theCurrentArticle = [self.listofNewsArticles objectAtIndex:[indexPath row]];

    //Gets the title from the current article
    NSString *theTitle = theCurrentArticle.title;

    //Gets the image url 
    NSString *imageUrl = theCurrentArticle.imageURL;

    //Gets the description of the current news article
    NSString *theDescription = theCurrentArticle.description;

    NewsCustomCell *cell = (NewsCustomCell *)[tableView dequeueReusableCellWithIdentifier:@"NewsContent"];

    __block NewsCustomCell *aCell;

     dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    if (cell == nil) {
        aCell = (NewsCustomCell *)[tableView dequeueReusableCellWithIdentifier:@"NewsContent"];
    } else {
        AsyncImageView* oldImage = (AsyncImageView*)
        [cell.contentView viewWithTag:999];
        [oldImage removeFromSuperview];
    }

    AsyncImageView *imageView = [[AsyncImageView alloc] initWithFrame:CGRectMake(5, 5, 100, 100)];
    imageView.tag = 999;

          dispatch_async(dispatch_get_main_queue(), ^{
    [imageView loadImageFromURL:[NSURL URLWithString:imageUrl]];
    [cell.contentView addSubview:imageView];

              cell.titleLabel.text = theTitle;
              cell.descriptionLabel.text = theDescription;
              cell.imageLabel.contentMode = UIViewContentModeScaleAspectFill;

});

         });

    return cell;

} 
```

以下是当前应用程序的外观：

![在此处输入图像描述](../Images/ba09e1b17fc071949612bf306f626cfb.png)

解决方案：

刚刚与我终于找到的这门课一起工作。 [https://github.com/rs/SDWebImage](https://github.com/rs/SDWebImage) 这处理缓存、异步下载。希望我早点找到这个..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T06:43:24.100

我希望你有写 AsyncImageView 和 ImageCache 和 ImageCacheObject 类。在 cellForRowAtIndexPath 中写下这段代码：

```
 static NSString *CellIdentifier = @"CellIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) 
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    Quest_Forum *Quest_ForumObj=[queArr objectAtIndex:i+indexPath.row];
  //  NSLog(@"cell for row at... i val.. %d",i+indexPath.row);

    for(UIView * view in cell.contentView.subviews){
        if([view isKindOfClass:[AsyncImageView class]])
        {
           // NSLog(@"remove old images");
            [view removeFromSuperview];
            view = nil;
        }
    }

    AsyncImageView *asyncImageView = nil;

    UIImageView *cellImage = (UIImageView *)[cell viewWithTag:1]; // Inside tableview i have taken tableviewcell and given tag 1 to that imageview

    asyncImageView = [[AsyncImageView alloc] initWithFrame:cellImage.frame] ;
    [asyncImageView loadImageFromURL:Quest_ForumObj.Quest_Image];
    asyncImageView.backgroundColor=[UIColor clearColor]; 
    [cell.contentView addSubview:asyncImageView];

    UILabel *lblQuest = (UILabel *)[cell viewWithTag:2]; // Given tag 2 to the label inside tableViewCell
    lblQuest.text=Quest_ForumObj.Question; 
```

在 ImageCacheObject.h

```
@class ImageCacheObject;

@interface ImageCache : NSObject 
{
    NSUInteger totalSize;  // total number of bytes
    NSUInteger maxSize;    // maximum capacity
    NSMutableDictionary *myDictionary;
}

@property (nonatomic, readonly) NSUInteger totalSize;

-(id)initWithMaxSize:(NSUInteger) max;
-(void)insertImage:(UIImage*)image withSize:(NSUInteger)sz forKey:(NSString*)key;
-(UIImage*)imageForKey:(NSString*)key; 
```

在 ImageCacheObject.m

```
#import "ImageCacheObject.h"

@synthesize totalSize;

-(id)initWithMaxSize:(NSUInteger) max  
{
    if (self = [super init]) 
    {
        totalSize = 0;
        maxSize = max;
        myDictionary = [[NSMutableDictionary alloc] init];
    }
    return self;
}

-(void)dealloc // Don't write this method if you are using ARC 
{
    [myDictionary release];
    [super dealloc];
}

-(void)insertImage:(UIImage*)image withSize:(NSUInteger)sz forKey:(NSString*)key
{
   // NSLog(@"count of insert image%d",sz);
    ImageCacheObject *object = [[ImageCacheObject alloc] initWithSize:sz Image:image];
    while (totalSize + sz > maxSize) 
    {
        NSDate *oldestTime;
        NSString *oldestKey;
        for (NSString *key in [myDictionary allKeys]) 
        {
            ImageCacheObject *obj = [myDictionary objectForKey:key];
            if (oldestTime == nil || [obj.timeStamp compare:oldestTime] == NSOrderedAscending) 
            {
                oldestTime = obj.timeStamp;
                oldestKey = key;
            }
        }
        if (oldestKey == nil) 
            break; // shoudn't happen
        ImageCacheObject *obj = [myDictionary objectForKey:oldestKey];
        totalSize -= obj.size;
        [myDictionary removeObjectForKey:oldestKey];
    }
    [myDictionary setObject:object forKey:key];
    [object release];
}

-(UIImage*)imageForKey:(NSString*)key 
{
    ImageCacheObject *object = [myDictionary objectForKey:key];
    if (object == nil)
        return nil;
    [object resetTimeStamp];
    return object.image;
} 
```

在 ImageCacheObject.h

```
@interface ImageCacheObject : NSObject 
{
    NSUInteger size;    // size in bytes of image data
    NSDate *timeStamp;  // time of last access
    UIImage *image;     // cached image
}

@property (nonatomic, readonly) NSUInteger size;
@property (nonatomic, retain, readonly) NSDate *timeStamp;
@property (nonatomic, retain, readonly) UIImage *image;

-(id)initWithSize:(NSUInteger)sz Image:(UIImage*)anImage;
-(void)resetTimeStamp; 
```

在 ImageCacheObject.m

```
@synthesize size;
@synthesize timeStamp;
@synthesize image;

-(id)initWithSize:(NSUInteger)sz Image:(UIImage*)anImage
{
    if (self = [super init]) 
    {
        size = sz;
        timeStamp = [[NSDate date] retain];
        image = [anImage retain];
    }
    return self;
}

-(void)resetTimeStamp 
{
    [timeStamp release];
    timeStamp = [[NSDate date] retain];
}

-(void) dealloc 
{
    [timeStamp release];
    [image release];
    [super dealloc];
} 
```

# ios - 在最新的 SDK 中使用自动释放池，是否有必要，甚至有益，删除通知？

> ID：15424078
> 
> 赞同：1
> 
> 时间：2013-03-15T03:16:20.780
> 
> 标签：ios, objective-c

我正在使用一些 Objective-C 代码，我想知道..我注意到，在学习 NSNotificationCenter 时，在 dealloc 上删除 NSNotificationCenter 观察者通常是一种好习惯。但是，在使用自动释放池的情况下 - 是否已处理好，还是我仍然需要一个 dealloc 方法？

```
- (void) dealloc {
    [[NSNotificationCenter defaultCenter] removeObserver:self name:XBPageCurlViewDidSnapToPointNotification object:nil];
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T03:20:08.603

无论如何，您都需要注意删除在该类实例的生命周期内添加的观察者。

如果该通知确实被触发，它将尝试调用您的实例。如果该实例变得无效（例如由于解除分配），您的应用程序将崩溃。

根据经验，UIKit 本身不使用 ARC（通常有例外），因此不会坚持弱引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T03:23:08.183

我不相信 NSNotificationCenter 支持弱引用。相反，它使用 unsafe_unretained 引用，因此如果您不在`dealloc`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T03:23:18.043

在每种情况下，您仍然需要注意删除观察者。
您的自动释放池只保留您的对象，直到池未释放，一旦池被释放，它就会向每个对象发送释放消息，如果该对象的保留计数变为零，则它被释放。在释放之前`dealloc`调用它的方法。
**PS** Auto 释放池并不关心您的`dealloc`方法中发生了什么。

# r - 嵌套 for 循环的向量化

> ID：15424084
> 
> 赞同：1
> 
> 时间：2013-03-15T03:17:24.033
> 
> 标签：r, vectorization, apply, sapply

我正在尝试使用`apply`/ `mapply`/ `lapply`/`sapply`或任何其他方式对我的嵌套 for 循环代码进行矢量化以减少运行时间。我的代码如下：

```
for (i in 1:dim){
 for (j in i:dim){ 
  if(mydist.fake[i,j] != d.hat.fake[i,j]){
    if((mydist.fake[i,j]/d.hat.fake[i,j] > 1.5)|(d.hat.fake[i,j]/mydist.fake[i,j]>1.5)){
        data1 = cbind(rowNames[i],rowNames[j], mydist.fake[i,j], d.hat.fake[i,j], 1)
        colnames(data1) = NULL
        row.names(data1) = NULL
        data = rbind(data, data1)
    }else{
        data1 = cbind(rowNames[i],rowNames[j], mydist.fake[i,j], d.hat.fake[i,j], 0)
        colnames(data1) = NULL
        row.names(data1) = NULL
        data = rbind(data, data1)
        }
      }
    }  
  }
write.table(data, file = "fakeTest.txt", sep ="\t", col.names = FALSE, row.names = FALSE) 
```

*   rowNames 是所有数据点的行名向量
*   `data`是一个数据框
*   `mydist.fake`和`d.hat.fake`是距离矩阵（对角线为零，上下三角形的值相同），因此对下三角形的横向感兴趣（也保留对角线的值）。
*   两个矩阵的维度相同。

我面临的主要问题`j`是`j`初始化为`i`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T03:54:44.797

您的代码的矢量化版本是：

```
dist1 <- mydist.fake
dist2 <- d.hat.fake

data <- data.frame(i  = rowNames[row(dist1)[lower.tri(dist1)]],
                   j  = rowNames[col(dist1)[lower.tri(dist1)]],
                   d1 = dist1[lower.tri(dist1)],
                   d2 = dist2[lower.tri(dist2)])

data <- transform(data, outcome = d1/d2 > 1.5 | d2/d1 > 1.5) 
```

* * *

我使用以下示例数据成功测试了它：

```
X           <- matrix(runif(200), 20, 10)
Y           <- matrix(runif(200), 20, 10)
rowNames    <- paste0("var", seq_len(nrow(X)))
mydist.fake <- as.matrix(dist(X))
d.hat.fake  <- as.matrix(dist(Y)) 
```

# javascript - 尝试通过 crunchbase API 提取 JSON 数据。我究竟做错了什么？

> ID：15424087
> 
> 赞同：1
> 
> 时间：2013-03-15T03:17:55.033
> 
> 标签：javascript, jquery, json

```
<html>
    <head>
        <title>Result</title>
        <link rel='stylesheet' type='text/css' href='stylesheet.css'/>

    </head>
    <body>
        <div></div>   
    <script>

     $(document).ready(function() {
     $.getJSON("http://api.crunchbase.com/v/1/company/facebook.js?api_key=mgxpds8ja7f6cncwd39caed7")
      });

    </script>
    </body>
</html> 
```

* * *

我觉得我错过了一些非常容易的事情，但我似乎无法提取任何数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T03:21:52.193

代码中存在同源策略违规，您需要传递一个附加参数`callback=?`，以便它使用[JSONP](http://en.wikipedia.org/wiki/JSONP)发出请求。

```
$.getJSON("http://api.crunchbase.com/v/1/company/facebook.js?api_key=mgxpds8ja7f6cncwd39caed7&callback=?", function(data){
    console.log(data);
    //Do something with the data
}) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/UqkGu/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T03:23:30.273

获取 JSON 后，下一步您需要添加回调并对 JSON 数据执行一些操作，

```
$.getJSON("http://api.crunchbase.com/v/1/company/facebook.js?api_key=mgxpds8ja7f6cncwd39caed7", function(data){
       //CALLBACK
       console.log(data); //LIST DATAs
       //Do Something over here
}) 
```

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T03:49:57.557

好。我看到几件事..

1.  包括 Jquery 脚本标记。
2.  在要放置结果的地方添加一个 id。
3.  像下面提到的那样更改脚本..
4.  使用 API 密钥检查设置，或者只需使用您的 php 后端来检索 JSON，然后将其放在您的页面上。像这样使用 JSON 将返回跨域错误。

检查下面的 HTML，就像一个魅力，但对于 x 域错误......

```
<html>
    <head>
        <title>Result</title>
        <link rel='stylesheet' type='text/css' href='stylesheet.css'/>

    </head>
    <body>
        <div id="results"></div>   
    <script>

     $(document).ready(function() {
     $("#results").html( function () {
     return $getJSON("http://api.crunchbase.com/v/1/company/facebook.js?api_key=mgxpds8ja7f6cncwd39caed7")
});      
});

    </script>
    </body>
</html> 
```

谢谢！

@leo。

# c - 将 char 指针分配给 char 和 char 数组变量

> ID：15424096
> 
> 赞同：3
> 
> 时间：2013-03-15T03:19:18.927
> 
> 标签：c, pointers, char

为什么以下没问题？

```
 char *a;
    char b[]="asdf";
    a=b; 
```

但下面不是吗？

```
 char a[10];
    char b[]="asdf";
    a=b; 
```

以上给出了错误：分配中的类型不兼容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:20:46.887

两个都不行。

也许你在尝试，

```
char *a;
char b[]="asdf";
a=b; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T03:26:37.323

```
char a;
char b[]="asdf";
a=b; 
```

在这里，您正在分配类型的数组`b`的地址。地址大小将为 4 个字节（64 位 m/c 中的 8 个字节），您将其分配给 1 个字节变量，因此值将被截断。这是合法的，但没有用。`a``char``char``a`

我认为您实际上是在尝试将`b`数组的第一个字符分配给`a`. 在那种情况下做`a = b[0]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-29T05:30:11.033

数组的值计算为数组中第一个元素的地址。所以基本上，它是一个常数值。这就是为什么当您尝试在第二个示例中执行 a=b 时，您正在尝试执行类似于 2=7 的操作，只是您有两个地址而不是 2 个整数。

现在第一个示例可以工作是有道理的，因为将地址分配给指针是有效的操作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-05-09T20:04:25.120

您需要为字符串库包含以下标头。

`#include <string.h>`

`strcpy(strX, strY);`如果有足够的空间，使用会将字符串 Y 复制到字符串 X 中。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2015-08-17T05:17:25.097

请使用 c++ 的 strcpy_s 函数，它的语法为 &dest,*source 它可能会有所帮助。

# google-street-view - 街景静态图日期

> ID：15424097
> 
> 赞同：4
> 
> 时间：2013-03-15T03:19:30.787
> 
> 标签：google-street-view

我正在使用谷歌的街景静态图像 API。它工作得很好，但我想知道是否可以获取我正在保存的图像的元数据，特别是日期。反正有知道静态图像的日期吗？

谢谢，李

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-10T19:18:44.850

是的，您可以使用JavaScript 中的[Google Maps Street View Service](https://developers.google.com/maps/documentation/javascript/streetview)获取图像日期。

简而言之，您需要[完成通常的设置步骤](https://developers.google.com/maps/documentation/javascript/tutorial)才能让 Google 地图在您的页面上运行，然后您将执行类似于：

```
var sv = new google.maps.StreetViewService();
var berkeley = new google.maps.LatLng(37.869085,-122.254775);
sv.getPanoramaByLocation(berkeley, 50, function(data) {
    console.log(data.imageDate);
}); 
```

**data.imageDate**将包含*YYYY-MM*格式的日期。

您可以使用 StreetViewService 的*getPanoramaById*和*getPanoramaByLocation*方法来获取此数据。请看[这里](https://developers.google.com/maps/documentation/javascript/reference#StreetViewService)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-13T15:14:42.690

varpanoramaOptions = {位置：streetViewLocation，pov：{标题：0，间距：5，缩放：1}，可见：true，addressControl：false， **imageDateControl：true** }；

# php - mysqli 比 fopen 快多少？

> ID：15424098
> 
> 赞同：-1
> 
> 时间：2013-03-15T03:20:04.563
> 
> 标签：php, mysqli, fopen

我只是在制作一个非常基本的 cms 来制作一个单页网站。一般用户无法访问 php。相反，它仅用于生成 html 站点。但是，如果可能的话，我可能会将代码用于一般用户。

由于某些原因，使用数据库会导致一些问题，所以我正在考虑使用 fopen。fopen 与 mysqli 相比如何？我只是想知道在什么阶段使用 fopen 变得更加负担。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T03:25:11.053

用来`fopen`做什么？MySQL有什么问题？

反正两者是没法比的：

`fopen`是一个打开磁盘文件的函数，`mysqli`是一组用于处理 MySQL 数据库的函数。

`fopen`在同时请求中使用是不安全的 - 如果同一脚本同时运行两次（例如，两个人在彼此相隔几毫秒内发出相同的 GET 请求），那么如果其中一个脚本写入文件，则会发生损坏，所以你会必须使用锁定文件，这会降低性能。

使用 MySQL（版本 5+）可为您提供符合 ACID 的数据存储解决方案。

如果它是您所说的“单页网站”，那么您可能会侥幸使用`fopen`，只要确保使用适当的锁定文件（以及良好的安全性！）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:05:25.437

与将其放在文件系统上相比，研究诸如 WordPress、Drupal 或 Joomla 之类的 CMS 将是一个更好的选择，尽管我想指出这些 CMS 不仅仅能够提供静态页面。我不确定您希望在文件中存储什么样的数据，但您至少会遇到两个主要问题，`integrity`以及`locking`. 还是`it's very hard for me to imagine how that might not create an unpleasant experience for a user especially with concurrency and locking ?`

我不知道任何“ `reasons using databases would cause a few problems`”。Mysqli 是一个面向对象的 Mysql 驱动程序，它还允许 mysql 驱动程序为 php 不做的事情。

但是，是的，拥有数据库确实会带来一定的安全责任，但是通过良好的编程实践并遵循公认的范式，排除问题并不难。IMO 这是一种由我们对数据库的控制引起的问题。很多没有经验的开发人员已经公开了这一点。

如果您正在考虑从事 Web 开发之外的职业，那么研究 MVC 框架可能也是一个好主意。这些框架中包含大部分样板代码，其中一些迫使您遵循良好的实践，使您的应用程序可扩展、健壮和安全。

但对我来说，将它放在平面文件系统上是不，不，不......;）

# android - Leadbolt - Uncaught TypeError: Object [object Object] has no method 'processHTML' at null:1

> ID：15424101
> 
> 赞同：2
> 
> 时间：2013-03-15T03:20:15.193
> 
> 标签：android, leadbolt

早在 2012 年 9 月至 11 月 SDK 仍为 3.06b 时，我就能够运行非常简单的演示广告。从那时起，直到现在我从未尝试过使用leadbolt 的android 应用程序。目前我使用最新的 SDK (4.00a) 但我似乎无法让它工作。

现在，我试图运行一个演示**`Capture Form`**，但是当我试图在我的模拟器中以调试模式运行它时，我的 LogCat 中有这个：**`03-15 02:48:06.657: E/Web Console(1121): Uncaught TypeError: Object [object Object] has no method 'processHTML' at null:1`**并且演示添加没有显示。

这些是我的代码：

**MainActivity.java**

```
package com.example.leadbolt4test1;

import com.pad.android.iappad.AdController;

import android.app.Activity;
import android.os.Bundle;

public class MainActivity extends Activity {
    private AdController myController;

    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            myController = new AdController(this, "816849151");
            myController.loadAd();
    }

    public void onDestroy() {
            myController.destroyAd();
            super.onDestroy();
    }
} 
```

**AndroidManifest.xml**

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="17" />
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.leadbolt4test1.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

PS：我也尝试过插页式和警报，但似乎没有任何效果。我确定我有正确的部分 ID。

任何帮助都将是非常可观的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T08:47:17.617

请换

目标dkversion =“17”到目标dkversion =“ **16** ”

在您的清单文件中，似乎对我有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-22T21:49:23.137

实际上，这是由于 SDK 17 中的新安全要求而发生的，即所有 javascript 方法都必须使用`@JavascriptInterface`. **不要使用旧的简单愚蠢的方法来通过降低 targetSdkVersion 来快速修复明显的错误：您似乎只修复了问题的症状，同时留下了安全漏洞！**

[http://android-developers.blogspot.gr/2013/02/security-enhancements-in-jelly-bean.html#javascript-access](http://android-developers.blogspot.gr/2013/02/security-enhancements-in-jelly-bean.html#javascript-access)

# php - 在 mysql 查询 LIKE 中使用 # % _ + 搜索

> ID：15424102
> 
> 赞同：0
> 
> 时间：2013-03-15T03:20:25.530
> 
> 标签：php, mysql

我有这段代码（只是其中的一部分）：

```
<?php
if(isset($_GET['act']) && $_GET['act']== 'do')  {
$key= $_POST['key'];
}
else {
$key= '';
}
?>

<input class='inputField' type='text' name='key' size=45 value='<?php echo $key;?>' > 

<script>$(document).ready(function(){
key= $("#mainTop input").val();
if(key!= null || key== '%') {
    showPage(1,key);
}
else    {
    showPage(1);
}
});
</script> 
```

showpage() 将获取参数并传递给 php 文件：

```
if(isset($_GET['key'])) {
$key= addslashes($_GET['key']);
}
else {
$key= null;
}
$result= $db->query("SELECT * FROM information WHERE stuId LIKE '%$key%' OR stuName LIKE '%$key%' LIMIT  $start,10"); 
```

php 文件将获得搜索的密钥。我通过添加斜杠转义密钥，执行 mysql 查询进行搜索。但是如果我用 key = % # _ + 搜索，它仍然会打印我们所有的表，而不是没有匹配的结果。我想我没有以正确的方式转义密钥，那么如何转义 % # _ + 等字符以使用 LIKE 进行 mysql 查询？请帮帮我？我看了另一个问题，但我还是不明白

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T03:23:24.863

据我所知，`#`并且`+`不是 LIKE 匹配字符串中的特殊字符，但您只需要[转义其他字符](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like)

```
$key = str_replace(array('%', '_'), array('\%', '\_'), $key); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T03:56:52.083

解决这个问题的方法很简单，就是使用参数化查询。

你不必担心逃跑。
您可以保护自己免受 SQL 注入。
你的代码会被你的同事和想要雇佣你的人更认真地对待。

请记住，您正在处理需要转义的三个级别。EG 在 PHP 中您必须转义`'`，除非您希望它被解释为引号，mysql 查询本身必须转义相同的`'`，手动 ( `\'`) 使用 addlashes 或使用准备好的语句，并且 mysql 查询中的正则表达式必须在以下情况下转义它是一个保留字符，例如`%`or `_`are 在`LIKE`语句中。

# svn - SVN上的“/branches/x”文件夹修复后是否应该删除？

> ID：15424105
> 
> 赞同：1
> 
> 时间：2013-03-15T03:20:45.923
> 
> 标签：svn, tortoisesvn

在默认的 SVN 上，有三个目录：

**Trunk：**这东西有效，但尚未发布

**分支：** Buggy，可能不包括所有更改

**标签：**已发布版本，从未直接编辑

## **我的问题：**

现在，在分支被“固定”并根据需要合并到主干之后，它们是被删除了，还是任其腐烂？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T06:21:37.860

删除它。svn 中的删除不会将其从历史记录中删除 - 如果您想要它回来，您可以随时恢复删除它的提交。

最大的原因是重新集成合并后分支无法使用。来自[红皮书](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.basicmerging.html)

> 一旦从分支到主干完成了 --reintegrate 合并，该分支就不再可用于进一步的工作。它无法正确吸收新的主干更改，也无法再次正确重新集成到主干。出于这个原因，如果您想继续处理您的功能分支，我们建议您将其销毁，然后从主干重新创建它

[进一步有趣的阅读](http://blogs.collab.net/subversion/subversion-merg)

最好保持清洁，即使您不使用`--reintegrate`它，当您必须滚动浏览分支列表时它总是很糟糕。

很可能您不需要恢复它，因为您可以在不恢复它的情况下检查所有文件和历史记录。

# objective-c - NSTableView tableView 在调用时更改所有行

> ID：15424108
> 
> 赞同：0
> 
> 时间：2013-03-15T03:20:54.500
> 
> 标签：objective-c, xcode, cocoa, nstableview, nsdatepicker

在另一位成员的建议下，我重写了我最近项目的一部分。我现在已经解决了我之前遇到的问题，只是花了几个小时来解决这个问题。非常感谢任何/所有帮助。

当我尝试使用 NSMutableArray 向我的 NSTableView 添加多个项目时，它会将 dateList 中的所有条目替换为最新条目。这是我的 .m 文件。我在“将 d 对象日期设置为 %@”中设置的 NSLog 将在我继续添加日期时第 n 次调用。

```
 @implementation TableViewController
 @synthesize myDatePicker;
 NSString *myRenamed = @"CHANGED";
 int test = 0;

 - (id) init{

self = [super init];
if (self) {
    dateList = [[NSMutableArray alloc] init];
}   
return self;
 }

 -(void) awakeFromNib{
 [myDatePicker setDateValue: [NSDate date]];
 [self.myDatePicker sendActionOn:NSLeftMouseDown];
 NSLog(@"Hello from TableView at time: %@", myDatePicker.dateValue);
 }

- (IBAction)datePickerAction:(id)sender{
 test = 0;
[self getSetDate];
NSLog(@"getSetDate Finished with date %@", myRenamed);
[self myTableAdd];
NSLog(@"datePickerAction Finished");

 }

 - (void)getSetDate{

NSLog(@"Entering getSetDate%@", (myDatePicker.dateValue));

//set date to local & set format set on xib start
NSDate *myNewDate = [myDatePicker dateValue];
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"YYYYMMdd"];
myRenamed = [dateFormat stringFromDate:myNewDate];
NSLog(@"Ending getSetDate with %@",myRenamed);

  }

 - (NSInteger) numberOfRowsInTableView:(NSTableView *)tableView{

return [dateList count];
 }

 -(id) tableView:(NSTableView *)tableView objectValueForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row{

Date *d = [dateList objectAtIndex:row];
NSString *identifier = [tableColumn identifier];

d.date=myRenamed;
[d setDate:d.date];
NSLog(@"setting d object date to %@", d.date);
test ++;
return [d valueForKey:identifier];

 }

 - (void) myTableAdd{
NSLog(@"Called myTableAdd");

[dateList addObject:[[Date alloc] init]];
[tableview reloadData];

 } 
```

图片：[http](http://cl.ly/NaEu) ://cl.ly/NaEu 这就是发生的情况，所有以前的日期条目都更改为最后单击的条目。感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T03:26:04.380

在 objectValueForTableColumn 中，您将用刚刚添加的值覆盖每个值

d.date=myRenamed;

# process - 如何获取在 Win7 中运行的 VB3 进程的 PID？

> ID：15424109
> 
> 赞同：0
> 
> 时间：2013-03-15T03:20:56.187
> 
> 标签：process, cmd, pid

我尝试在 cmd 中使用 tasklist 命令，但未在其中列出。我还注意到该进程与另一个名为 wowexec.exe 的进程一起在任务管理器中有点缩进。有什么方法可以获取进程的PID？由于十六进制编辑的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:17:51.820

`wmic`非常适合运行类似 sql 的查询来获取您需要的信息。将`wowexec`以下示例中的内容替换为类似于 VB3 进程的任务名称的名称。

```
for /f "tokens=2 delims==" %%I in ('wmic process where "name like '%%wowexec%%'" get processid /format:list') do set "PID=%%I" 
```

类似的东西就是你要放在批处理脚本中的东西。

如果您只是从`cmd`控制台运行它，请使用`%I`而不是`%%I`，而`do @echo %I`不是`do set`等。

```
for /f "tokens=2 delims==" %I in ('wmic process where "name like '%%wowexec%%'" get processid /format:list') do @echo %I 
```

**注意：**周围的双`wowexec`百分号表示文字百分号，一个 SQL 语法通配符。 `wowexec`不是变量，而是文字字符串。

# javascript - 我正在使用 jquery mobile 为我的第一个应用程序创建 phonegap

> ID：15424112
> 
> 赞同：1
> 
> 时间：2013-03-15T03:21:12.653
> 
> 标签：javascript, css, jquery-mobile

我为我的应用创建了五个索引。第一个索引是欢迎屏幕。第二个索引用于捕捉、拍照、可拖动裁剪工具、放大和缩小。我想知道它仅适用于某些脚本，但是当我刷新第二个索引时，它适用于所有功能。

谁能告诉我这个问题？

我的 Html 代码在这里：jQuery Moblie 测试

```
<script type="text/javascript" charset="utf-8" src="cordova-2.2.0.js"></script>
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="jquery.mobile/jquery-1.7.2.min"></script>
<script type="text/javascript" src="jquery.mobile/jquery.mobile-1.1.0.js"></script>
<script type="text/javascript" src="js/TakePhoto.js"></script>
<script type="text/javascript" src="js/drag.js"></script>

<script type="text/javascript" src="http://code.jquery.com/jquery-1.5.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/mobile/1.0a3/jquery.mobile-    1.0a3.min.js"></script>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0a3/jquery.mobile-    1.0a3.min.css" />

<link rel="stylesheet" href="css/style.css" />
<link rel="stylesheet" href="jquery.mobile/jquery.mobile-1.1.0.min.css" />
<link rel="stylesheet"  href="jquery.mobile/jquery.mobile-1.1.0.css" />
<link rel="stylesheet" href="docs/assets/css/jqm-docs.css" />
<link rel="stylesheet" href="docsdemos-style-override.css" />

<script type='text/javascript' src="js/jquery-ui-1.9.2.custom.js"></script>
<link rel="stylesheet" type="text/css" href="css/ui-lightness/jquery-ui-    1.9.2.custom.min.css"/>
<script type='text/javascript' src="js/jQuery.ui.touch-punch.js"></script>
</head>
    <body>
        <div data-role="page" id="takephoto" >
        <div data-role="header" class="ui-bar ui-bar-b" data-theme="b">
            <h1>Choose a photo for left Person !</h1>
            <a href="index.html" data-role="button" data-mini="true" data-theme="b"     id="backtochoose">Back</a>
        </div>

        <div data-role="content">
            <h2>Choose a photo for <strong>Left</strong> Person!</h2>
            <a href="#" id="capture" data-role="button" data-ajax="false"     rel="external" data-theme="b">Take a photo</a>
            <a href="#" id="getImg" data-role="button" data-ajax="false" rel="external"     data-theme="b">Choose from library</a>
        </div>
         <div id="image_container" style="display:block;">
            <img style="display:none" id="image" width="300" height="350" src="" />
            <center><canvas id="mystore1" width="200" height="200" style="background-    color:#03F"></canvas></center>
            <div class="frame"  opacity:0.3><img id="face" width="80" height="80"     class="frames" src="img/face.jpg" /></div>
        </div>
        <div data-role="content">
            <a href="#" data-role="button" id="large" data-ajax="false" rel="external"     data-inline="true">Larger</a>
            <a href="#" data-role="button" id="small" data-ajax="false" rel="external"     data-inline="true">Smaller</a>
            <a href="#" data-role="button" id="rotate-left" data-    inline="true">Left</a>
            <a href="#" data-role="button" id="rotate-right" data-    inline="true">Right</a>
        </div>
        <div data-role="content">
            <a href="index2.html" data-role="button" data-iconpos="right" data-    icon="arrow-r" data-theme="b" >Next</a>
        </div> 
    </div>
    </body> 
```

我的脚本在这里：

```
var pictureSource;   // picture source
    var destinationType; // sets the format of returned value
    // Wait for PhoneGap to connect with the device
    document.addEventListener("deviceready",onDeviceReady,false);
     // Cordova is ready to be used!
    //

    function onDeviceReady() {
        pictureSource=navigator.camera.PictureSourceType;
        destinationType=navigator.camera.DestinationType;
    }
     // Called when a photo is successfully retrieved
    function onPhotoDataSuccess(imageData) {
      // Uncomment to view the base64 encoded image data
      var im=document.getElementById('image');
      im.style.display = 'block';
      im.src="data:img/jpeg;base64," +imageData;

      // console.log(imageData);   
    }
    // Called when a photo is successfully retrieved
    function onPhotoURISuccess(imageURI) {
      // Uncomment to view the image file URI 
      // console.log(imageURI);
        var largeImage = document.getElementById('largeImage');

      // Unhide image elements
      //
        largeImage.style.display = 'block';

      // Show the captured photo
      // The inline CSS rules are used to resize the image
      //
      largeImage.src = imageURI;
      // Get image handle
      var image = document.getElementById('image');
      var imgCnt = document.getElementById('image_container');

      // Unhide image container
      imgCnt.style.display = 'block';
      // Unhide image elements
      image.style.display = 'block';
      // Show the captured photo
      // The inline CSS rules are used to resize the image
      image.src = imageURI;
    }

    // A button will call this function
    function capturePhoto() {
      // Take picture using device camera and retrieve image as base64-encoded string
      navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality:     50,destinationType: destinationType.DATA_URL,
      correctOrientation: true, targetWidth:200, targetHeigth:200 });
    }

    // A button will call this function
    function getImage(source) {
      // Retrieve image file location from specified source
      navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 50, 
        destinationType: destinationType.FILE_URI,
        sourceType: source,correctOrientation: true });
    }

    // Called if something bad happens.
    function onFail(message) {
      alert('Failed because: ' + message);
    }

     // Called when capture operation is finished
    function captureSuccess(mediaFiles) {

    }

    // Called if something bad happens.
    function captureError(error) {
        var msg = 'An error occurred during capture: ' + error.code;
        navigator.notification.alert(msg, null, 'Uh oh!');
    }
         $("#capture").live('click',function(event){
            capturePhoto();
        });
         $("#getImg").live('click',function(event){
            getImage(pictureSource.SAVEDPHOTOALBUM);
        }); 
        $(document).live(function(e) {
            $(".frame").draggable();        
            });
        $("#large").live('click',function(event){
                var wsize=$('img.frames').width();
                var hsize=$('img.frames').height();
                $('img.frames').width(wsize * 1.2);
                $('img.frames').height(hsize * 1.2);
            });

        $("#small").live('click',function(event){
                var wsize=$('img.frames').width();
                var hsize=$('img.frames').height();
                $('img.frames').width(wsize * 0.8);
                $('img.frames').height(hsize * 0.8);
            }); 
```

# java - 迷宫不工作？

> ID：15424114
> 
> 赞同：-1
> 
> 时间：2013-03-15T03:21:14.240
> 
> 标签：java, maze

代码：
Array 是我做的一个预定义的布尔数组，val 是数组的长度（它是一个正方形）。我用它作为起点，而不是使用随机值

```
 import java.util.*;
     import javax.swing.*;
     public class Main 
```

{

```
public void main()
{

String Val = JOptionPane.showInputDialog("Enter the number of rows/columns");
int x = Integer.parseInt(Val);

boolean mazeArch[][] = new boolean [x][x]; 
BoundariesDeclared(mazeArch, x);

generateMaze(mazeArch, x);
convertArray(mazeArch, x); 
```

}

```
 public void printArray(String Array[][]) // Prints out the array 
```

{

```
 for (int i =0; i < Array.length; i++) {
          for (int j = 0; j < Array.length; j++) {
        System.out.print(" " + Array[i][j]);
    }
    System.out.println(""); 
} 
```

}

```
 public void convertArray(boolean Array[][], int z) 
```

{

```
 String RealArray[][] = new String [z][z];
for(int x = 0; x < Array.length; x++)
{
    for(int y = 0; y < Array.length; y++)
    {
        if(Array[x][y] == true)
        {
            RealArray[x][y] = "*";
        }
        if(Array[x][y] == false)
        {
            RealArray[x][y] = " ";
        }
    }
}
printArray(RealArray); 
```

}

```
 public void BoundariesDeclared(boolean Array[][], int y) 
```

{

```
for(int x = 0; x < Array.length; x++)
    Array[0][x] = true;
for (int x = 0; x < Array.length; x++)
    Array[x][0] = true;    
for (int x = 0; x < Array.length; x++)
    Array[x][Array.length-1] = true;   
for (int x = 0; x < Array.length; x++)
    Array[Array.length-1][x] = true; 
```

}

```
 public void generateMaze(boolean Array[][], int val) 
```

{

```
Stack<Integer> StackX = new Stack<Integer>();
Stack<Integer> StackY = new Stack<Integer>();
int x = val / 2; // Start in the middle
int y = val / 2; // Start in the middle
StackX.push(x);
StackY.push(y);

while(!StackX.isEmpty())
{
    Array[x][y] = true; // is Visited
    x = StackX.peek();
    y = StackY.peek();

    if(Array[x][y+1] == false)
    {
        StackX.push(x);
        StackY.push(y+1);
        y = y + 1;
    }
    else if(Array[x][y-1] == false)
    {
        StackX.push(x);
        StackY.push(y-1);
        y = y - 1;
    } 
    else if(Array[x+1][y] == false)
    {
        StackX.push(x+1);
        StackY.push(y);
        x = x+1;
    } 
    else if(Array[x-1][y] == false)
    {
        StackX.push(x-1);
        StackY.push(y);
        x = x-1;
    } 
    else
    {
        StackX.pop();
        StackY.pop();
    }
} 
```

} }

每当我打印结果时，我只会得到星星，这意味着每个布尔值都设置为 true。我理解我的错误，因为我正在访问每个地点，结果将是它们都设置为 true。但我能做些什么来解决这个问题？我认为我的概念是正确的，而不是应用程序。我之前问过这个问题，并被告知我需要制作两个阵列（一个用于墙壁，另一个用于访问）但我该如何应用它呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:57:53.330

你**没有提到你想做什么**。所以我们能帮助的不多。

*   这个迷宫在做什么？
*   你的输入是什么？
*   你的预期结果是什么？

添加这一行并自己调试。

```
public void generateMaze(boolean Array[][], int val) {
        Stack<Integer> StackX = new Stack<Integer>();
        Stack<Integer> StackY = new Stack<Integer>();
        int x = val / 2; // Start in the middle
        int y = val / 2; // Start in the middle
        StackX.push(x);
        StackY.push(y);

        while (!StackX.isEmpty()) {
            Array[x][y] = true; // is Visited
            x = StackX.peek();
            y = StackY.peek();

            if (Array[x][y + 1] == false) {
                StackX.push(x);
                StackY.push(y + 1);
                y = y + 1;
            } else if (Array[x][y - 1] == false) {
                StackX.push(x);
                StackY.push(y - 1);
                y = y - 1;
            } else if (Array[x + 1][y] == false) {
                StackX.push(x + 1);
                StackY.push(y);
                x = x + 1;
            } else if (Array[x - 1][y] == false) {
                StackX.push(x - 1);
                StackY.push(y);
                x = x - 1;
            } else {
                StackX.pop();
                StackY.pop();
            }
            convertArray(Array, val); // add this line
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:27:12.007

我不清楚您对输出的期望是什么，但我可以看到问题出在哪里。在您的`generateMaze()`方法中，您就像在螺旋模式中一样旅行，最终会触及每个节点。就像假设您有 5x5 阵列，您旅行并使其成为真的（边界已经是真的）[2,2]->[2,3]->[3,3]->[3,2]->[3, 1]->[2,1]->[1,1]->[1,2]->[1,3]

![在此处输入图像描述](../Images/74eeec215da93664c553ab04782b492e.png)

你从中间开始，在你发现已经为真（边界或已访问）之前开始访问并轮流，它涵盖了所有节点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T04:03:22.407

解决方案仍然与您上次发布此问题时相同 - 您需要有两个数组

-对于迷宫中的每个地方都是正确的，这是一个墙壁 - 迷宫的瓷砖

- 一开始都是假的 - 求解器的瓷砖

只有当两个数组都为假时，求解器才能移动到一个图块上，并将第二个数组（求解器的图块）设置为真，同时不理会第一个数组（迷宫的图块）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T04:04:15.490

据说，这不是一个“编码”错误。你根本不知道你想要什么行为。尝试注释掉生成迷宫的行。以 6 作为参数运行您的程序。你得到：

```
 * * * * * *
 *         *
 *         *
 *         *
 *         *
 * * * * * * 
```

这是什么迷宫？出口在哪里？同样，这不是编码问题，这是设计缺陷。当然，如果您从这个迷宫的范围内开始，您将参观所有的广场！

# c# - XML 反序列化：不同的 xml 模式映射到同一个 C# 类

> ID：15424121
> 
> 赞同：4
> 
> 时间：2013-03-15T03:21:56.607
> 
> 标签：c#, xml, xml-serialization

我的程序的一项工作是从 xml 文件中读取客户列表并将它们反序列化为 C# 类，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<customers>
    <customer>
        <name>john</name>
        <id>1</id>
    </customer>
    <customer>
        <name>mike</name>
        <id>2</id>
    </customer>
</customers> 
```

C#类：

```
[XmlRoot("customers")]
public class CustomerList {
        [XmlElement("customer")]
        public Customer[] Customers { get; set; }
}

public class Customer {
    [XmlElement("name")]
    public String Name {get; set;}

    [XmlElement("id")]
    public String Id {get; set;}
} 
```

但最近客户想要将标签名称从更改为`<id>`如下`<code>`所示：

```
<?xml version="1.0" encoding="utf-8"?>
<customers>
    <customer>
        <name>john</name>
        <code>1</code>
    </customer>
    <customer>
        <name>mike</name>
        <code>2</code>
    </customer>
</customers> 
```

'code' 的值将与之前的标签 'id' 具有相同的含义。他们希望在过渡期间应该修改程序，以便在一段时间内识别两个标签。

有什么简单的方法可以实现吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T05:25:08.573

为什么不使用一个私有字段并使用两个不同的 getter/setter？只要这两个标签都没有出现在 XML 中，这将起作用。

```
[XmlRoot("customers")]
public class CustomerList {
    [XmlElement("customer")]
    public Customer[] Customers { get; set; }
}

public class Customer {
    private String _id;

    [XmlElement("name")]
    public String Name {get; set;}

    [XmlElement("id")]
    public String Id {get{return _id;} set{_id = value;}}

    [XmlElement("code")]
    public String Code {get{return _id;} set{_id = value;}}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T05:20:19.120

据我所知，你不能用 XML 属性做到这一点。您必须自己实施`IXmlSerializable`和控制反序列化过程。这里有几个链接可以帮助您入门：

[http://www.codeproject.com/Articles/43237/How-to-Implement-IXmlSerializable-Correctly](http://www.codeproject.com/Articles/43237/How-to-Implement-IXmlSerializable-Correctly)

[实现 IXmlSerializable 的正确方法？](https://stackoverflow.com/questions/279534/proper-way-to-implement-ixmlserializable)

我还没有尝试过，但似乎你需要做这样的事情：

```
public void ReadXml(XmlReader reader)
{
    var nodeType = reader.MoveToContent();
    if (nodeType == XmlNodeType.Element)
    {
        switch (reader.LocalName)
        {
            case "id":
            case "code": ID = int.Parse(reader.Value); break;
            default: break;
        }
    }
} 
```

上面可能有一些错别字，但我认为这是一般的想法。

# javascript - 将 HTML 表格数据发送到表单

> ID：15424122
> 
> 赞同：1
> 
> 时间：2013-03-15T03:21:58.633
> 
> 标签：javascript, jquery, html

我有以下格式的表格。

```
FirstName Last Name 
Jill      Smith 
Eve       Jackson 
```

我还有用于更新名字和姓氏的表格。这是表格代码。

```
 <!DOCTYPE html>
<html>
<body>

<form border="1">
  <tr>
     <td><label >FirtsName</label></td>
     <td><input type="text" id="firstname" class="medium"></td>
    </tr>
  <tr>
   <td><label >LastName</label></td>
   <td><input type="text" id="lastname" class="medium"></td>
   </tr>

</form>

</body>
</html> 
```

如何使用 jquery 或 javascript 将表数据发送到表单。任何帮助都感激不尽！

感谢和问候卡西克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:44:45.270

我的英语不是很好，所以也许我理解得不够好，但是要做你想做的，我会这样做：

首先，您应该改进您的 HTML 代码，这将使工作变得更容易：

在您的用户表中：

*   `<table> </table>`：添加一个`id`以使用 jQuery 更轻松地处理它：`$('#id')`方法

前任：`<table id="users"></table>`

*   `<thead><tr><th> </th></tr></thead><tbody> </tbody>`: 使用这个标记可以让你区分表头和表内容

*   `<tr> </tr>`：在服务器端添加一个`id`以知道谁是谁（即：如果您有两个 John Smith）

前任：`<tr id="name_01"><td>...</td></tr>`

*   `<td> </td>`：添加一个`class`属性以知道名字和姓氏在哪里

前任：`<td class="firstname">...</td><td class="lastname"></td>`

在您的表格中：

*   `<form> </form>`：添加一个`id`也更容易抓住它

前任：`<form id="usersform"></form>`

*   `<table> </table>`: 不要忘记`<table>`标记！

*   `<label> </label>`: 添加`for`匹配输入id的属性

前任：`<label for="firstname" >FirtsName</label>`

现在，您的表格应如下所示：

```
 <table id="users">
      <thead>
           <tr>
                <th>Firstname</th><th>Last Name</th>
           </tr>
      </thead>
      <tbody>
           <tr id="name_01">
                <td class="firstname">Jill</td><td class="lastname">Smith</td>
           </tr>
           <tr id="name_02">
                <td class="firstname">Eve</td><td class="lastname">Jackson</td>
           </tr>
      </tbody>
 </table> 
```

有几种方法可以制作您想要的东西，但基本上有两种主要方法：

1.  一次只有一个表格条目
2.  拥有所有表格条目

### I - 一次只有一个表条目

HTML

```
 <form id="usersform" name="usersedit" >
      <table id="users">
          <tr>
              <td><label for="firstname" >FirtsName</label></td>
              <td><input type="text" id="firstname" class="medium"></td>
          </tr>
          <tr>
              <td><label for="lastname" >LastName</label></td>
              <td><input type="text" id="lastname" class="medium"></td>
          </tr>
      </table>
 </form> 
```

jQuery :

```
//When there is a click on a line of the table
$('#users tbody tr').click(function(e) {
    //Get the <tr> id
    userid = $(this).attr('id');
    //Put the value of the firstname cell in the firstname input
    $('#usersform input#firstname').val($(this).find('td.firstname').html());

    //You can add a name attribute or an id for later works
    $('#usersform input#firstname').attr('name','first'+userid);

    //Now for the lastname input
    $('#usersform input#lastname').val($(this).find('td.lastname').html()).attr('name','first'+userid);
} 
```

### II - 所有表格条目

HTML

```
 <form id="usersform" name="usersedit" >
      <table id="users">
           <thead>
                <tr>
                     <th>Firstname</th><th>Last Name</th>
                </tr>
           </thead>
           <tbody>
           </tbody>
      </table>
 </form> 
```

jQuery :

```
//When there is a click on the table (#users) :
$.('#users').click(function(e){
    //handle the part of the form where we want to add input field
    myformtable = $('#userform table tbody');

    //For each row in the table
    $.('#users tbody tr').each(function(e) {
        //Create and append a new line
        userline = $(document.createElement('tr'));
        userline.appendTo(myformtable);

        //Create and append a firstname cell
        tdfirstname = $(document.createElement('td')).addClass('firstname');
        tdfirstname.appendTo(userline);

        //Create and append a firstname input
        firstname = $(document.createElement('input')).addClass('medium');
        firstname.appendTo(tdfirstname);

        //Add attribute
        firstname.attr({type: 'text', name: 'first'+$(this).attr('id')});

        //Set value
        firstname.val($(this).find('.firstname').html());

        //Same things with the lastname
        tdlastname = $(document.createElement('td')).addClass('lastname');
        tdfirstname.after(tdlastname);

        lastname = $(document.createElement('input')).addClass('medium');
        lastname.appendTo(tdlastname);

        lastname.attr({type: 'text', name: 'last'+$(this).attr('id')});

        lastname.val($(this).find('.lastname').html());
    }
} 
```

您可以通过循环改进它，或者使用 css 伪类来处理表格单元格或表单输入，但我认为这种方式更容易理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T03:43:19.490

我不是js专家，但是每次输入失去焦点时您都可以提交表单

利用`<form name="myform" border="1">`

和 ：

`<input type="text" id="firstname" class="medium" onBlur="document.forms["myform"].submit()">`

可能有更好的方法来做到这一点，但这只是一个想法......

**- 编辑 ： -**

对不起，我忘记了一些重要的事情：你必须像这样命名你的表格：

```
<form name="myform" action="file.php"> 
```

# python - 使用 Python 3 的十进制模块计算第 n 个根

> ID：15424123
> 
> 赞同：1
> 
> 时间：2013-03-15T03:21:58.553
> 
> 标签：python, decimal, nth-root

是否有内置方法来计算 Python 3 十进制对象的正确舍入的第 n 根？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T03:40:03.387

根据[文档](http://docs.python.org/2/library/decimal.html)，有一个功能`power(x,y)`：

> 使用两个参数，计算 x**y。如果 x 为负数，则 y 必须是整数。结果将是不精确的，除非 y 是整数并且结果是有限的并且可以精确地用“精度”数字表示。结果应始终正确舍入，使用当前线程上下文的舍入模式

这意味着 power(x, 1.0/n) 应该给你你想要的。

您也可以使用第 n 个根

```
nthRoot = Decimal(x) ** (Decimal(1.0) / Decimal(n) ) 
```

不确定您是否考虑这些“内置”中的任何一个，因为您必须明确计算 n 的倒数才能获得第 n 个根。

# python - 如何在 Python 中以有效的方式封装处理程序？

> ID：15424126
> 
> 赞同：0
> 
> 时间：2013-03-15T03:22:27.243
> 
> 标签：python

我正在编写一个处理程序来处理不同类型的数据。这是我目前的解决方案：

```
def get_handler_by_type(type):
    def handler_for_type_A:
        ...
        #code for processing data type A

    def handler_for_type_B:
        ...
        #code for processing data type B

    def handler_for_type_C:
        ...
        #code for processing data type C

    handler_map = {type_A: handler_for_type_A,
               type_B: handler_for_type_B,
               type_C: handler_for_type_C,
              }
    return handler_map(type) 
```

但是，这似乎非常低效，因为我会经常调用 get_handler_by_type 并且每次调用它时，都会再次构造字典。

我知道我可以这样做：

```
def handler_for_type_A:
    ...
    #code for processing data type A

def handler_for_type_B:
    ...
    #code for processing data type B

def handler_for_type_C:
    ...
    #code for processing data type C

handler_map = {type_A: handler_for_type_A,
                type_B: handler_for_type_B,
                type_C: handler_for_type_C,
            }

def get_handler_by_type(type, handler_map = handler_map):
    return handler_map(type) 
```

但在我看来，这很丑陋。因为我有 handler_for_type_Xs 和 handler_map 正在污染全局空间。有没有办法既高效又优雅地做到这一点？

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T03:39:54.807

一种方法是动态查找处理程序（如果您有一致的命名约定）

```
return vars()['handler_for_'+type] 
```

另一种方法是将地图存储为函数的属性

```
def get_handler_by_type(type):
    def handler_for_type_A:
        ...
        #code for processing data type A

    def handler_for_type_B:
        ...
        #code for processing data type B

    def handler_for_type_C:
        ...
        #code for processing data type C

    if not hasattr(get_handler_by_type, 'handler_map'):
        get_handler_by_type.handler_map = {'type_A': handler_for_type_A,
               'type_B': handler_for_type_B,
               'type_C': handler_for_type_C,
              }

    return get_handler_by_type.handler_map[type] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T03:36:57.263

这种方式将封装它：

```
def _handler_helper():
   def fna():
      print "a" 
      pass

   def fnb():
      print "b" 
      pass

   m = {"a":fna,"b":fnb}
   return lambda x:m[x]

get_handler_by_type = _handler_helper() 
```

如果您想要一个文档字符串，您可能想要使用`def`，但这有效。

另一种选择可能是采用更多的 OOP 方法：

```
class _HandlerHelper:
   def fna(self):
       print 'a'

   def fnb(self):
       print 'b'

   # __call__ is a magic method which lets you treat the object as a function
   def __call__(self, fn):
       return getattr(self, 'fn' + fn)

get_handler_by_type = _HandlerHelper() 
```

# node.js - Express.io、socket.io.js 未找到

> ID：15424129
> 
> 赞同：3
> 
> 时间：2013-03-15T03:22:59.947
> 
> 标签：node.js, express, socket.io

我遇到了 Express.io 的问题，我尝试创建一个简单的 tchat。但我无法包含 socket.io.js，我遇到了一个错误......

我刚刚在我的新 Express 项目中安装了 Express.io。

我的错误：

1.  获取 http:// ***** **** /socket.io/socket.io.js 404（未找到）
2.  localhost:1 Uncaught ReferenceError: io is not defined

**索引.jade**

```
doctype 5
html
  head
    title= title
    link(rel='stylesheet', href='/stylesheets/style.css')
  body
    block content
    script(src="http://localhost:3000/socket.io/socket.io.js")
    script(src="/javascripts/user.js") 
```

**应用程序.js**

```
/**
 * Module dependencies.
 */

var express = require('express.io')
    , index = require('./routes/index.js')
    , http = require('http')
    , path = require('path');

var app = express();

app.http().io();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
  app.use(express.errorHandler());
});

app.get('/', index.index);

app.io.route('ready', function(req) {
    req.io.emit('talk', {
        message: 'io event from an io route on the server'
    });
});

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

**index.js（路由）**

```
exports.index = function(req, res){
    res.render('index', {
        title: 'TCHAT'
    });
}; 
```

**用户.js**

```
io = io.connect();

// Emit ready event.
io.emit('ready');

// Listen for the talk event.
io.on('talk', function(data) {
    alert(data.message);
}); 
```

**新错误**

加载资源失败：服务器响应状态为 404 (Not Found) http:// ***** :3000/socket.io.js Uncaught ReferenceError: io is not defined

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T06:07:40.790

伙计，您在`http`服务器而不是`express.io`服务器上收听。改变这个

```
http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

对此：

```
app.listen(app.get('port'), function(){
   console.log("Express server listening on port " + app.get('port'));
}); 
```

那么您将能够访问`socket.io.js`

# java - 尝试使用在其他方法中初始化的变量调用主方法中的方法

> ID：15424132
> 
> 赞同：0
> 
> 时间：2013-03-15T03:23:11.240
> 
> 标签：java, arrays, methods, split, static-methods

我很确定我已经弄清楚了这一切，但是我有 3 个未在主方法中初始化的数组，但显然我在主方法中调用方法时无法调用这些数组，所以我的问题是，使用我的代码下面有什么方法可以让我获得识别它们的方法吗？或者我该怎么做才能初始化 main 方法中的所有内容？我需要读入方法、等级方法、平均方法和输出方法。

```
import java.util.*;
import java.io.*;

public class Proj5 {
public static void main(String[] args)throws IOException{
    int lines=0;
    int [] quizKey = {1,1,2,2,1,1,3,2,4,1,3,5,4,1,2};
    String [] userAnswers = new String[100];
    int [][] userIndividualAnswers = new int[quizKey.length][userAnswers.length];
    int [] numCorrect = new int[quizKey.length];

        readInText(lines, userAnswers, quizKey);
        displayOutput(lines, percentCorrect, quizKey, userAnswers, userAnswersInt, numCorrect, grade);

}//end main

public static void readInText(int lines, String userAnswers[], int quizKey[])throws IOException{
    Scanner inFile = new Scanner(new File("QuizScores.txt"));
        while(inFile.hasNext()){
            String line = inFile.nextLine();
            String[] tokens = line.split(",");
            userAnswers[lines] = tokens[1];
            lines ++;

        }// end while loop
    int[][] userAnswersInt = new int[quizKey.length][lines];
    char[] grade = new char[lines];
    double[] percentCorrect = new double[lines];
}// end readInText

public static void gradeSingleQuiz(String tokens[], int lines, int quizKey[], String userAnswers[], int numCorrect[], int userAnswersInt[][], char grade[], double percentCorrect[]){
    for (int j=0; j<=lines; j++){
    numCorrect[j]=0;    
        for (int n=0; n<=quizKey.length; n++){
            userAnswersInt[n][j] = Integer.parseInt(userAnswers[n]);
                if(userAnswersInt[n][j]==(quizKey[n])){
                    numCorrect[j]++;    
            }
                if(numCorrect[j]>=14)

grade[j]='A';
                else if((numCorrect[j]>=12)&&(numCorrect[j]<14))
                    grade[j]='B';
                else if((numCorrect[j]>=11)&&(numCorrect[j]<12))
                    grade[j]='C';
                else if ((numCorrect[j]>=9)&&(numCorrect[j]<11))
                    grade[j]='D';
                else
                    grade[j]='F';

            percentCorrect[j] = numCorrect[j]/quizKey.length;

        }//end for loop
    }//end for loop
    for(int i=0; i<lines; i++){
        System.out.println(tokens[0] + "    " + numCorrect[i] + "    " +
                (percentCorrect[i]) + "    " + grade[i]);   

}
}// end gradeSingleQuiz

public static void averageScore(int lines, double percentCorrect[]){
    for(int d=0; d<=lines; d++){    
        System.out.println("Average: " + percentCorrect[d]);
    }//end for loop
}// end averageScore

public static void displayOutput(String tokens[], int lines, int quizKey[], String userAnswers[], int numCorrect[], int userAnswersInt[][], char grade[], double percentCorrect[]){
    System.out.println("Student ID    # Correct    %Correct    Grade");
        gradeSingleQuiz(tokens, lines, quizKey, userAnswers, numCorrect, userAnswersInt, grade, percentCorrect);
}// end display output

}//end class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T03:28:51.893

一种解决方案是将数组变成程序中的全局变量......这可能是移植到您的解决方案中的最简单的想法

另一种解决方案是从创建它们的各个函数中返回数组，然后从主函数中调用这些函数。

这些事情中的任何一个都应该或多或少地做你想要的。

# xsd - XSD 问题：摘要和多态文档

> ID：15424138
> 
> 赞同：1
> 
> 时间：2013-03-15T03:23:47.767
> 
> 标签：xsd, polymorphism, abstract

我正在做一个项目（*由一个“尖头发的经理”分配给我*），我遇到了两件让我难过的事情。我已经在这里和 w3schools 上阅读了许多文章 - 仍然感到困惑。我想我需要一个实际的例子。

我包括一个显着缩减和混淆的 XSD 版本，我拼命想要“验证”它。

**问题＃1**（我认为）与使用'abstract/substitutionGroup'有关-对我来说不是很清楚。我需要的是 3 个变体组具有相同的节点名称（在本例中为“zzzResult”）。

**问题 #2**与多态性有关。我需要添加特殊的“标记”来指示某些外部操作（使用 XPath 和 JS）的开始/结束以及基于名为“hash”的主文档属性（或者更确切地说是其枚举的值）的特殊数据节点。

有人可以提供一个“更正”的版本吗？

* * *

```
<?xml version="1.0" encoding="utf-8"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">

<!-- payload containers -->

  <xsd:element name="thePayload" type="xsd:string"/>

  <xsd:element name="md5">
    <xsd:simpleType>
      <xsd:restriction base="xsd:hexBinary">
        <xsd:pattern value="[0-9A-Fa-f]{32}"/>
      </xsd:restriction>
    </xsd:simpleType>
  </xsd:element>

  <xsd:element name="sha1">
    <xsd:simpleType>
      <xsd:restriction base="xsd:hexBinary">
        <xsd:pattern value="[0-9A-Fa-f]{40}"/>
      </xsd:restriction>
    </xsd:simpleType>
  </xsd:element>

<!-- markers -->

  <xsd:element name="zzzBegin"><xsd:complexType/></xsd:element>
  <xsd:element name="zzzEnd"><xsd:complexType/></xsd:element>

<!-- constructs -->

  <xsd:element name="theHeading">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element ref="thePayload" maxOccurs="8"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>

  <xsd:element name="theDetails">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element ref="thePayload" maxOccurs="64"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>

<!-- groups -->

  <xsd:group name="_none">
    <xsd:sequence>
      <xsd:element ref="theHeading"/>
      <xsd:element ref="theDetails"/>
    </xsd:sequence>
  </xsd:group>

  <xsd:group name="_md5">
    <xsd:sequence>
      <xsd:element ref="zzzBegin"/>
      <xsd:element ref="theHeading"/>
      <xsd:element ref="theDetails"/>
      <xsd:element ref="zzzEnd"/>
    <!-- problem #1) [abstract?] ambiguous name -->
      <xsd:element name="zzzResult">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element ref="md5"/>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
    </xsd:sequence>
  </xsd:group>

  <xsd:group name="_sha1">
    <xsd:sequence>
      <xsd:element ref="zzzBegin"/>
      <xsd:element ref="theHeading"/>
      <xsd:element ref="theDetails"/>
      <xsd:element ref="zzzEnd"/>
    <!-- problem #1) [abstract?] ambiguous name -->
      <xsd:element name="zzzResult">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element ref="sha1"/>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
    </xsd:sequence>
  </xsd:group>

  <xsd:group name="_both">
    <xsd:sequence>
      <xsd:element ref="zzzBegin"/>
      <xsd:element ref="theHeading"/>
      <xsd:element ref="theDetails"/>
      <xsd:element ref="zzzEnd"/>
    <!-- problem #1) [abstract?] ambiguous name -->
      <xsd:element name="zzzResult">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element ref="md5"/>
            <xsd:element ref="sha1"/>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
    </xsd:sequence>
  </xsd:group>

<!-- XML DOCUMENT -->

  <xsd:element name="theDocument">
    <xsd:complexType>

 <!-- problem #2) [polymorphic?] choose based on enum-value of attrib "hash" -->
      <xsd:choice>
        <xsd:group ref="_none"/>
        <xsd:group ref="_md5"/>
        <xsd:group ref="_sha1"/>
        <xsd:group ref="_both"/>
      </xsd:choice>

      <xsd:attribute name="hash" default="none">
        <xsd:simpleType>
          <xsd:restriction base="xsd:NMTOKEN">
            <xsd:enumeration value="none"/>
            <xsd:enumeration value="md5"/>
            <xsd:enumeration value="sha1"/>
            <xsd:enumeration value="both"/>
          </xsd:restriction>
        </xsd:simpleType>
      </xsd:attribute>

    </xsd:complexType>
  </xsd:element> 
```

这是我需要的变体形式：

* * *

```
<theDocument hash="none">
  <theHeading>
    <thePayload>some data here (occurs 1:8)</thePayload>
  </theHeading>
  <theDetails>
    <thePayload>more data here (occurs 1:64)</thePayload>
  </theDetails>
</theDocument> 
```

* * *

```
<theDocument hash="md5">
 <zzzBegin/>
  <theHeading>
    <thePayload>some data here (occurs 1:8)</thePayload>
  </theHeading>
  <theDetails>
    <thePayload>more data here (occurs 1:64)</thePayload>
  </theDetails>
 <zzzEnd/>
  <zzzResult>
    <md5>0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a</md5>
  </zzzResult>
</theDocument> 
```

* * *

```
<theDocument hash="sha1">
 <zzzBegin/>
  <theHeading>
    <thePayload>some data here (occurs 1:8)</thePayload>
  </theHeading>
  <theDetails>
    <thePayload>more data here (occurs 1:64)</thePayload>
  </theDetails>
 <zzzEnd/>
  <zzzResult>
    <sha1>3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e</sha1>
  </zzzResult>
</theDocument> 
```

* * *

```
<theDocument hash="both">
 <zzzBegin/>
  <theHeading>
    <thePayload>some data here (occurs 1:8)</thePayload>
  </theHeading>
  <theDetails>
    <thePayload>more data here (occurs 1:64)</thePayload>
  </theDetails>
 <zzzEnd/>
  <zzzResult>
    <md5>0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a</md5>
    <sha1>3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e3e</sha1>
  </zzzResult>
</theDocument> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:11:16.180

由于唯一粒子归属限制，无法在保持给定标签和约束集的同时更正您的 XSD 1.0。

XSD 1.1 - XSD 规范的最新版本 - 提供了您需要的所有机制，以按照您想要的方式强制执行模型的约束。

如果 XSD 1.1 不是一个选项，那么在 XSD 1.0 之上的 Schematron 标记将允许您放宽当前 XSD 中的一些约束，这将允许重新配置您的内容模型以避免 UPA 问题，同时保持约束。具体来说，您可以从**一个** zzzResult 开始，其中 md5 和 sha1 都存在且可选；那么你最终只会得到两个组（根据你当前的方法），_none 和其他东西。

本着 SO 的精神，我恳请您将上述内容作为线索，考虑您的选择，回去尝试新事物；如果您仍然遇到问题，请返回此处提供新的详细信息。

# linux - 为什么linux进程地址空间中栈的权限是执行的？

> ID：15424140
> 
> 赞同：3
> 
> 时间：2013-03-15T03:24:01.280
> 
> 标签：linux, kernel

linux内核设置进程的statck权限为执行。众所周知，堆栈通常包含数据而不是指令，所以我想知道 kenel 这样做的原因。特别是缓冲区溢出攻击一般将恶意代码存储到堆栈中，并在成功利用系统后执行。如果堆栈的权限不是执行的，应该避免攻击，是这样吗？因此，在我看来，将堆栈的权限设置为执行是有害的，即使存在缓冲区溢出攻击的风险，linux 这样做的真正目的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T03:28:44.747

Linux 内核*确实*支持`NX`具有它的 CPU 上的位。自 2004 年以来，这种支持一直存在。

一些*发行版*附带的内核不启用所需使用的选项，`NX`但这更多是因为设置这些选项（特别是使用 PAE 模式）将导致操作系统无法在某些硬件上启动。

这就是为什么我倾向于重新编译我的内核而不是使用发行版中提供的默认值。这样，我确信它针对*我的*硬件进行了优化，而不仅仅是一般情况。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-15T04:09:12.290

Linux 是一个 *nix。所有 *nix 都基于用汇编程序/机器代码编写的早期操作系统，其中不存在安全性概念，也没有必要。随着越来越多的人开始使用计算机，操作系统演变成某种东西，得到了全世界无数人的贡献，更重要的是，计算机从外部世界获得了更多的输入。

机器代码仅作为一种在不修改硬件的情况下改变机器行为的方式而存在，仅此而已。如今，人们使用 C，其目的是使将汇编/机器代码移植到其他处理器架构更容易。

栈只是实现递归的一种手段。

机器代码和 C 中根本没有安全概念。由用户选择映射到机器代码的抽象。C 不是其中之一。没有多少人和时间将拥有或永远不会验证一个大小合理且有用的代码库（例如 Linux 内核 + libc），因为它需要验证分散在数百万行代码中的算术方程，而且这正在改变所有时间和编译器也是如此，甚至语言本身都没有很好的定义。C 程序中任何地方的单个算术错误都足以危及该程序的整个地址空间。再多的 SELinux、堆栈粉碎保护、ASLR、App Armor、NX-bit、保护页面等都无法解决这个问题。

你的问题就像问一个野蛮的原始男性为什么不做瑜伽。

如果您禁用堆栈上的代码执行（现在大多数操作系统都支持），仍然有无限的其他方法来拥有 C 代码 - 例如，替换返回地址和它下面的单词以设置对带有恶意参数的任意函数的调用. 现在有人会说“哦，可以修复，你只需要一个金丝雀”，但是不，这并不能解决所使用的语言是 C 的事实，并且只会分散人们对这里真正问题的注意力，即如果你想要安全，你就不能拥有 C. PERIOD。

# android - 如何重叠线性布局

> ID：15424145
> 
> 赞同：1
> 
> 时间：2013-03-15T03:24:58.467
> 
> 标签：android, android-layout

我正在使用两个线性布局，其中一个布局中包含编辑文本，另一个布局中包含列表视图。我想显示布局包含列表视图重叠布局包含编辑文本。如何在 XML 中组织布局

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T04:02:35.903

您必须按如下方式组织布局：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:layout_gravity="center"
  android:gravity="center">

    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <!-- Your EditText is here -->
    </LinearLayout>
    <LinearLayout 
         android:layout_width="fill_parent"
         android:layout_height="fill_parent">
        <!-- Your ListView is here -->
    </LinearLayout>
</RelativeLayout> 
```

通过这种方式，您的 ListView 与您的 EditText 重叠。

# cakephp-2.1 - 防止在 CakePHP 烘焙期间文件被覆盖

> ID：15424147
> 
> 赞同：1
> 
> 时间：2013-03-15T03:25:16.607
> 
> 标签：cakephp-2.1

我正在研究一个特别复杂（阅读：有趣）的 CakePHP 项目，其中包含大量外键、连接表等。绝对是使用**cake bake**的一个案例。

然而，当我构建应用程序时，我会逐渐向我的模型添加自定义项，例如虚拟字段。开发引发了对其他模型/表进行更改的需求，因此我经常需要重新烘焙。

有没有办法在仍然使用**all**标志的同时保护某些模型（或控制器、视图）不被覆盖？我宁愿不从命令行重新烘焙每个依赖模型以避免覆盖。

欢迎提出建议。

（**编辑：**为清楚起见，我指的是输入诸如**cake bake model all**之类的命令，但以某种方式标记要忽略的少量模型）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T23:27:24.597

我没有经常使用“烘焙”，所以这不是你问题的直接答案。

我通常从头开始手工编码我的代码。但是，您可以考虑将您的项目置于版本控制之下（例如 SVN 或 GIT）。成功“烘焙”后，您可以“提交”一个版本并在下一次烘焙后检查更改。然后可以“还原”由“烘焙”过程进行的不需要的更改，或者可以将以前的更改与需要的*更改*合并

# java - 配置 web.xml 以执行特定页面

> ID：15424149
> 
> 赞同：0
> 
> 时间：2013-03-15T03:25:39.103
> 
> 标签：java, jsp, web.xml

我在管理文件夹中有一个 Login.jsp 页面。现在，当用户访问 Admin 文件夹时，登录页面应该是第一个执行的。

下面是我的项目目录结构。

![在此处输入图像描述](../Images/68b6a2e21c15c2b25d0868fae278098b.png)

如何在 web.xml 中进行配置，以便当我访问 Admin 文件夹时将执行 Login.jsp 而不是 index.jsp

web.xml 的内容如下所示

```
<display-name>RealCMS</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:15:03.890

首先，我认为您不应该为您的管理文件夹提供对用户的直接访问权限。您可以为 admin 文件夹中的所有 jsp 页面进行映射，而不是这样做。如果这是一个没有任何框架的简单应用程序，您可以简单地配置 web.xml 中的所有 jsp 页面以映射到适当的 url。如果使用像 struts 这样的框架，您可以使用模块配置。

根据你的问题试试这个。

```
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>login.jsp</welcome-file>
</welcome-file-list> 
```

# jquery - 如何在单击链接时关闭 JQuery 对话框？

> ID：15424151
> 
> 赞同：0
> 
> 时间：2013-03-15T03:25:46.180
> 
> 标签：jquery, jquery-ui

我在父页面上有一个链接，它打开一个加载文件的对话框。asp 具有带有超链接的表单和数据库结果集。当单击一个超链接（单独的 .js 文件中的 JavaScript 函数）时，它会将一些信息更新到父页面并尝试关闭对话框。

我有两个问题。
1.`$("#myDiv").dialog("close");`从 .js 内部使用时

```
function UpdateProdInfo() {
    // some code here to update parent and it works
$("#myDiv").dialog("close"); } 
```

它在使用关闭函数时出现初始化错误。
2.打开第二次对话框的问题，仍然初始化错误。

请让我知道我该怎么做？谢谢QF

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:32:11.200

使用上下文参数：

```
$("#myDiv",parent.document).dialog("close"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T03:20:54.327

问题是由于`default2.asp`作为动态内容加载到现有页面，它不应该包含所有 html 元素，如`html`,`body`等`head`。

如果你删除它们并且脚本和 css 包括 jquery.js 和 jqueryui.css 和 js 它工作正常

演示：[问题](http://plnkr.co/edit/byJbF1u9bNrVnEoRkjQh?p=preview)
演示：[解决方案](http://plnkr.co/edit/dhXgCxId2hzH46KRQEen?p=preview)

Defaut2.asp 应该类似于

```
This is Default3.asp file
<br><br>

Something
<a href="Javascript:CloseMe();">Close Me</a>

<br><br>
<form ID=Form2 >
  Name: <input type="text" name="Name"><br>
    Address: <input type="text" name="address"><br><br>
    <input type="submit" value="Submit">
</form>    

<script type="text/javascript">
  $(function() {
    $('#Form2').submit(function(evt) {
            evt.preventDefault();
            $.ajax({
                url: "Default2.asp", 
                type: 'POST',
                data: $(this).serialize(),
                success: function(result) {
                    $('#mydiv').html(result);
                }
            });
        });

        var MyDlg = $( "#mydiv" );

        $(".ui-widget-overlay").click (function () {
            MyDlg.dialog( "close" );
        });
    });

    function CloseMe() {
        $( "#mydiv" ).dialog("close");
    }

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T03:28:32.713

试着打电话

```
parent.$("#myDiv").dialog("close"); 
```

因为您的对话框是在父页面中定义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T03:38:35.140

`Uncaught Error: cannot call methods on dialog prior to initialization; attempted to call method 'close'`当您尝试关闭尚未打开的对话框时，会发生初始化错误。

这可能是

1.  **`dialog('close')`在打开之前触发，**如果您可以看到对话框，您可以排除）或
2.  **选择器`$('#myDiv')`没有以某种方式获得正确的元素。**

我猜它可能是#2。我会尝试通过这样做来调试它...

```
function UpdateProdInfo() {
    // some code here to update parent and it works
    console.dir($('#myDiv'));  //Does it return the correct element?
    //$("#myDiv").dialog("close"); 
} 
```

...看看它是否选择了正确的元素。

# javascript - 添加动态字段的值

> ID：15424154
> 
> 赞同：0
> 
> 时间：2013-03-15T03:26:03.387
> 
> 标签：javascript

我一直在寻找一种方法来将两个动态创建的文本字段的值相乘。我发现使用以下作为客户端JS函数。total_inv_items_field 是一个隐藏字段，随着动态元素的创建而增加，我使用该值来控制 for 循环：

```
 function calcTotals()
    {
       var totalinvcitems = document.getElementById('total_inv_items_field').value;
       var currinvcitem = 0;
       var invoice_total_value = 0;

       for (var invcitemcounter=0; invcitemcounter<totalinvcitems; invcitemcounter++)
       {
          currinvcitem = currinvcitem + 1;

          var quantity = document.getElementById('qty' + currinvcitem).value;
          var price = document.getElementById('cost' + currinvcitem).value;
          var totallineitem = quantity * price;
          document.getElementById('totallinefee' + currinvcitem).value = totallineitem;
          invoice_total_value = invoice_total_value + totallineitem;
       }
       document.getElementById('invoice_total').value = invoice_total_value;
    } 
```

直到 for 循环的倒数第二行的每一件事都有效。动态创建的乘法正在工作。我无法弄清楚的障碍是如何让变量“invoice_total_value”成为 invoice_total 表单组件的值。它永远不会更新。我尝试 parseFloat 正在添加的数字并尝试 parseFloating invoice_total_value sum 变量。我还认为这可能是类型转换问题，所以我尝试向其添加一个 null ('') 字符串以将其转换为字符串然后分配它。没有任何效果。我只是无法将其重新分配给静态文本字段。有任何想法吗？我得了偏头痛……；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T03:58:23.263

如果您的 id 元素`invoice_total`不是输入字段，则执行以下操作：

```
document.getElementById('invoice_total').innerHTML = invoice_total_value; 
```

# android - 如何从 ImageView 将图像设置为墙纸？

> ID：15424157
> 
> 赞同：2
> 
> 时间：2013-03-15T03:26:39.693
> 
> 标签：android, imageview, wallpaper

我有一个活动，其中有两个按钮和一个 ImageView。一个按钮是从手机的相机应用程序中获取图像并将其设置为 ImageView，另一个按钮是将该图像设置为主屏幕壁纸，所以我想要代码如何将此图像从 ImageView 设置为壁纸？ ？？？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-15T03:48:50.617

**第 1 步：**获取附加到 ImageView 的图像。

**Setp 2：**将该图像设置为墙纸。

**第 3 步：**`AndroidManifest.xml`在设置壁纸中添加权限！

对于第 1 步，请检查[此](https://stackoverflow.com/a/8306648/1773155)答案！

```
imageView.buildDrawingCache();
Bitmap bmap = imageView.getDrawingCache(); 
```

对于第 2 步：

```
WallpaperManager m=WallpaperManager.getInstance(this);

try {
    m.setBitmap(bmap);
} catch (IOException e) {
    e.printStackTrace();
} 
```

对于第 3 步：也包括此权限。

```
<uses-permission android:name="android.permission.SET_WALLPAPER" /> 
```

告诉我这是否不适合你！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-15T03:42:54.103

这可以分两部分来回答。

第一个是设置`WallPaper`：

```
WallpaperManager wallManager = WallpaperManager.getInstance(getApplicationContext());
try {
    wallManager.setBitmap(bmpImg);
    Toast.makeText(MainActivity.this, "Wallpaper Set Successfully!!", Toast.LENGTH_SHORT).show();
} catch (IOException e) {
    Toast.makeText(MainActivity.this, "Setting WallPaper Failed!!", Toast.LENGTH_SHORT).show();
} 
```

第二部分是可选的，只有在你没有为你的`ImageView`. *在这种情况下，您需要在设置之前执行此步骤`WallPaper`*：

```
Bitmap bmpImg = ((BitmapDrawable)yourImageView.getDrawable()).getBitmap(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-22T13:27:02.413

设置壁纸：

```
 Bitmap bitmapImg = ((BitmapDrawable) YourImageView.getDrawable()).getBitmap();

            WallpaperManager wallManager = WallpaperManager.getInstance(getApplicationContext());
            try {
                wallManager.clear();
                wallManager.setBitmap(bitmapImg);

            } catch (IOException ex) {

            } 
```

您必须在清单文件中添加两个权限

```
1\. <uses-permission android:name="android.permission.SET_WALLPAPER" />
2\. <uses-permission android:name="android.permission.WRITE_SETTINGS" /> 
```

# ios - iOS In App 购买状态 21002，java.lang.NumberFormatException

> ID：15424158
> 
> 赞同：8
> 
> 时间：2013-03-15T03:26:41.627
> 
> 标签：ios, in-app-purchase

在Apple服务器验证Apple IOS应用内购买收据时，我们的一些交易返回为：

```
{"status":21002,"exception":"java.lang.NumberFormatException"} 
```

我可以知道问题的原因是什么吗？我们已遵循 Apple 应用内购买指南，即我们将使用来自 iOS 客户端的 Base 64 对应用商店退货收据进行编码，然后发送收据以进行验证

注意：我们的大部分交易都通过了，大约有 10% 的交易出现上述错误

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T03:39:19.063

几个可能的原因：

*   有人试图破解您的 IAP 收据验证。有一些技术会插入伪造的收据，希望开发人员无法正确验证它们。urus hack 有这种行为。

*   测试期间的错误导致测试收据发送给生产验证者。

我经常看到这些错误，但我只是不记得这两个中的哪一个导致了这个确切的消息。我认为他们都这样做。看到他们后，我还没有收到客户投诉。

如果您的音量足够低（不幸的是，我的音量足够低），请进入 iTunes Connect 并查看是否有任何与错误匹配的销售。您还可以查看收据数据，看看它是否可疑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-11T17:30:51.840

还有另一种可能性，您只发送 pucharse_info 而不是整个解密的 JSON（带有签名等）

```
var receipt = Ti.Utils.base64encode(evt.receipt).text; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-02-02T02:39:46.890

当你验证收据时，也许你可以试试下面的代码：</p>

```
 NSData *receipt; // Sent to the server by the device

// Create the JSON object that describes the request
NSError *error;
NSDictionary *requestContents = @{
    @"receipt-data": [receipt base64EncodedStringWithOptions:0]
};
NSData *requestData = [NSJSONSerialization dataWithJSONObject:requestContents
                                                      options:0
                                                        error:&error];

if (!requestData) { /* ... Handle error ... */ }

// Create a POST request with the receipt data.
NSURL *storeURL = [NSURL URLWithString:@"https://buy.itunes.apple.com/verifyReceipt"];
NSMutableURLRequest *storeRequest = [NSMutableURLRequest requestWithURL:storeURL];
[storeRequest setHTTPMethod:@"POST"];
[storeRequest setHTTPBody:requestData];

// Make a connection to the iTunes Store on a background queue.
NSOperationQueue *queue = [[NSOperationQueue alloc] init];
[NSURLConnection sendAsynchronousRequest:storeRequest queue:queue
        completionHandler:^(NSURLResponse *response, NSData *data, NSError *connectionError) {
    if (connectionError) {
        /* ... Handle error ... */
    } else {
        NSError *error;
        NSDictionary *jsonResponse = [NSJSONSerialization JSONObjectWithData:data options:0 error:&error];
        if (!jsonResponse) { /* ... Handle error ...*/ }
        /* ... Send a response back to the device ... */
    }
}]; 
```

参考：<a href="https://developer.apple.com/library/content/releasenotes/General/ValidateAppStoreReceipt/Chapters/ValidateRemotely.html#//apple_ref/doc/uid/TP40010573-CH104-SW1" rel=" nofollow noreferrer">https://developer.apple.com/library/content/releasenotes/General/ValidateAppStoreReceipt/Chapters/ValidateRemotely.html#//apple_ref/doc/uid/TP40010573-CH104-SW1

# ember.js - 在视图助手中传递 mixin(s)

> ID：15424159
> 
> 赞同：0
> 
> 时间：2013-03-15T03:26:45.427
> 
> 标签：ember.js, handlebars.js

在 Ember 中，我们在模板中使用了很多视图助手。我想知道，当助手正在执行时（正在创建视图），是否有一种简单的方法可以将 mixin 传递给 Ember.View 类。

类似[http://jsbin.com/ekuxal/2/edit](http://jsbin.com/ekuxal/2/edit)

模板示例：

```
{{view Ember.TextField mixins="App.Console"}} 
```

Mixin 示例：

```
App.Console = Ember.Mixin.create({
   didInsertElement: function(){
     this._super();
     console.log('from the mixin');
   }
}); 
```

*从 mixin*将登录到控制台。

有这样的东西有意义吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:01:19.940

从我的角度来看，这个要求对我来说毫无意义。为什么？**Mixin 在扩展类时使用，因为它们是实现多重继承的一种方式。**因此它们在数据和逻辑建模期间使用。**视图助手用于实例化视图类的对象。**我认为，可以通过编写自定义帮助程序并在其中使用**createWithMixins()**来实现。但是在模板中做这样的事情似乎很混乱。

你能再澄清一下你的要求吗？真的只是关于记录吗？

**更新：实施提案**

我通读[了视图助手的源代码，](https://github.com/emberjs/ember.js/blob/v1.0.0-rc.1/packages/ember-handlebars/lib/helpers/view.js#L150)以评估这是否可能。这不是 Ember 的开箱即用功能，但可以通过覆盖 Ember View 帮助程序中的一些逻辑来实现。

假设你有这个模板：

```
{{view App.YourView mixin="App.YourMixin"}} 
```

Helper 最重要的是实例 Ember.ViewHelper，其中包含要修改的逻辑。可以尝试重新打开它并像这样修改相关部分：

```
var EmberHandlebars = Ember.Handlebars;
EmberHandlebars.ViewHelper.reopen({
  helper: function(thisContext, path, options) {
    var inverse = options.inverse,
        data = options.data,
        view = data.view,
        fn = options.fn,
        hash = options.hash,
        newView;

    if ('string' === typeof path) {
      newView = EmberHandlebars.get(thisContext, path, options);
      Ember.assert("Unable to find view at path '" + path + "'", !!newView);
    } else {
      newView = path;
    }

    // NEW CODE FOR MIXIN LOGIC
    if(hash.mixin){
      var newViewClass = newView; // newView should be the class App.YourView here
      var yourMixin = Ember.get(hash.mixin); //get the Mixin by name
      var newViewInstance = newView.createWithMixins(yourMixin); //create the view with mixin
      newView = newViewInstance; // assign the view to the variable where the rest of the logic is expecting it
    }

    Ember.assert(Ember.String.fmt('You must pass a view to the #view helper, not %@ (%@)', [path, newView]), Ember.View.detect(newView) || Ember.View.detectInstance(newView));

    var viewOptions = this.propertiesFromHTMLOptions(options, thisContext);
    var currentView = data.view;
    viewOptions.templateData = options.data;
    var newViewProto = newView.proto ? newView.proto() : newView;

    if (fn) {
      Ember.assert("You cannot provide a template block if you also specified a templateName", !get(viewOptions, 'templateName') && !get(newViewProto, 'templateName'));
      viewOptions.template = fn;
    }

    // We only want to override the `_context` computed property if there is
    // no specified controller. See View#_context for more information.
    if (!newViewProto.controller && !newViewProto.controllerBinding && !viewOptions.controller && !viewOptions.controllerBinding) {
      viewOptions._context = thisContext;
    }

    currentView.appendChild(newView, viewOptions);
  } 
}); 
```

**注意：**我自己还不能测试这个逻辑。 **更新：测试成功！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-24T02:11:45.830

在这种情况下，我将扩展 Ember 的 TextField 视图以创建您自己的自定义视图，并将 mixin 添加到您在 javascript 中扩展视图的位置。例如：

模板：

```
{{view 'MyTextField'}} // Custom view that extends Ember.textField 
```

看法：

```
App.MyTextFieldView = Em.TextField.extend(App.MyMixin, { // Add your mixin to Ember's TextField view here
    // Any further view code here (optional because this view already has all the functions of Ember's text field view and you've mixed in your other functionality in the line above).
}); 
```

混心：

```
App.MyMixin = Em.Mixin.create({
    // Your mixin code here
}); 
```

# java - 代理未运行

> ID：15424160
> 
> 赞同：0
> 
> 时间：2013-03-15T03:26:53.423
> 
> 标签：java, containers, function-calls, agents-jade, agents

我想我在我的项目中遗漏了一些东西。我需要代理来执行我分配的特定任务。我正在使用玉。在里面`action()`我写了一个for循环来显示数字1到10。运行时没有显示错误，并且循环也没有被执行。当我使用*`java -cp jade.jar jade.Boot -gui agent:TestAgent`*时，我得到一个`classNotFound`异常并且还显示无法创建代理。当我使用*`java -cp jade.jar jade.Boot -gui -agent agent:TestAgent`*时，我正在准备好代理信息，但没有调用操作方法。

如果我做错了，请指导我。

*例外如下*

```
2013 年 3 月 15 日下午 4:42:59 jam.core.AgentContainerImpl startBootstrapAgents
严重：无法创建代理测试：找不到代理的类 TestAgent（代理标识符：名称 test@192.168.0.242:1099/JADE）[嵌套 java.lang.ClassNotFoundException：TestAgent]
2013 年 3 月 15 日下午 4:42:59 jade.core.AgentContainerImpl joinPlatform
信息： --------------------------------------
代理容器 Main-Container@192.168.0.242 准备就绪。
------------------------------------------

```

# c# - EF Code First 迁移 - 未检测到更改

> ID：15424164
> 
> 赞同：0
> 
> 时间：2013-03-15T03:27:02.440
> 
> 标签：c#, entity-framework, migration

前言：在我的数据库表中，我有两个字段： (string)`(FK)UserPayoffData_UserName`和 (int) `UserPayoffDataUserName`。我犯了一个错误，实际上，我希望它只是单个属性 (string) `(FK)UserPayoffData_UserName`，但称为 (string) `(FK)UserPayoffDataUserName`，而我的第二个字段 ((int) `UserPayoffDataUserName`) 将消失。

现在，在我的模型中，我有这个无效的属性：

`public int UserPayoffDataUserName { get; set; }`

所以我把它改成了一个字符串（现在如果我删除我的数据库并重新创建它，它将是一个外键）：

`public string UserPayoffDataUserName { get; set; }`

现在我做到了`Add-migration mymigration`，而且我所期望的是，迁移会以某种方式在外键之上重命名为正确命名的一个。但它什么也没做。我能做些什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T07:25:23.700

如果我清楚地理解这一点，您需要`mymigration`从您的项目中删除或任何其他旧迁移。它们应该在您的`Migration folder`. 如果您需要迁移，您将不得不创建新的迁移。然后根据需要更改您的类，例如属性命名和所有属性映射。然后构建您的解决方案，然后运行`Update-Database -Force`​​.

请记住，由于您正在使用`EF Code First`，您可以从您`Server Explorer`和您的`App_Data`文件夹中删除您的数据库（不要错过这一点，如果您不在这里执行，从服务器资源管理器中删除就没有任何意义），这没什么大不了的，因为它可以瞬间被创造出来``Update-Database -Verbose`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-20T10:23:19.163

通过这样做，`Add-Migration mymigration`您只是创建了将在执行迁移时使用的脚手架代码文件。

所以你的数据库不会自动改变。你必须发起它！

通过使用`update-database -TargetMigration mymigration`，这将执行您所做的所有更改并保存到 mymigration 文件中

# c# - c#如何将字母数字主键分配给返回变量

> ID：15424168
> 
> 赞同：1
> 
> 时间：2013-03-15T03:27:25.107
> 
> 标签：c#

我是面向对象编程和 C# 的菜鸟。我正在上夜校学习C#，但我的知识水平处于monkey-see-monkey-do 水平。我这里有一些代码和一些基本问题：

* * *

```
public static String InsertProduct(SqlConnection cnSQL, String strProductDesc, String strProductHS, String strManufacturer)
    {
        SqlCommand cmdSQL;
        Int32 intRetCode = 0;
        String strProductKey;

        if (cnSQL != null)
        {
            cmdSQL = new SqlCommand();
            cmdSQL.Connection = cnSQL;
            cmdSQL.CommandText = "uspInsertProduct";
            cmdSQL.CommandType = CommandType.StoredProcedure;

            cmdSQL.Parameters.Add(new SqlParameter("@ProductDesc", SqlDbType.NVarChar, 250));
            cmdSQL.Parameters["@ProductDesc"].Direction = ParameterDirection.Input;
            cmdSQL.Parameters["@ProductDesc"].Value = strProductDesc;

            ********************************
             Code removed for brevity
            *********************************

            cmdSQL.Parameters.Add(new SqlParameter("@ProductID", SqlDbType.NVarChar, 10));
            cmdSQL.Parameters["@ProductID"].Direction = ParameterDirection.Output;

            try
            {
                cmdSQL.ExecuteNonQuery();
            }
            catch (Exception ex)
            {
                intRetCode = -1;
            }
           ************Offending Code Start
           strProductKey = cmdSQL.Parameters["@ProductID"].ToString;
           ************Offend Code End
            cmdSQL.Parameters.Clear();
            cmdSQL.Dispose();
      }
            return strProductKey; 

    } 
```

当我有这个语句“cmdSQL.Parameters[“@ProductID”].Direction = ParameterDirection.Output;”时会返回什么？记录号还是实际密钥？

假设答案是实际的关键，我如何构造变量赋值以便我可以将它返回给调用例程？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:37:39.757

对于您问题的第一部分：

实际返回值由存储过程决定`uspInsertProduct`。您必须查看 SQL 以查看该存储过程的定义才能找到答案。

对于第二部分：

调用存储过程后，您必须获取输出参数的值。

```
try
{
    cmdSQL.ExecuteNonQuery();
    strProductKey = cmdSQL.Parameters["@ProductID"].Value;
}

...

return strProductKey; 
```

# sdk - typedef INT_PTR 和 LONG_PTR 问题

> ID：15424172
> 
> 赞同：3
> 
> 时间：2013-03-15T03:28:08.350
> 
> 标签：sdk, typedef

我读了一些代码并跳转到 windows sdk 文件：c:\program files\microsoft visual studio 8\vc\platformsdk\include\basetsd.h

```
typedef _W64 int INT_PTR, *PINT_PTR;
typedef _W64 unsigned int UINT_PTR, *PUINT_PTR;

typedef _W64 long LONG_PTR, *PLONG_PTR;
typedef _W64 unsigned long ULONG_PTR, *PULONG_PTR;

#define __int3264   __int32 
```

我用谷歌搜索，发现 INT_PTR 的意思是一个 int，它的大小等于一个指针。但是 LONG_PTR 是什么意思？一个长度等于指针的长度。但是long和int大小不一样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-10T17:05:42.307

这些宏对于使 Win32 代码可移植非常有用，因此它可以在 32 位和 64 位模式下构建。在某些情况下，它们还表明变量可能包含数字或指针。

`INT_PTR`and的目的`LONG_PTR`是替换实际用于保存指针的`int`and的声明`long`（通常是一件坏事，但我遇到的旧代码有时会重载此类字段并使用它们来包含标记整数，例如 0 和 -1，或者一个真正的指针）。例如，在 Win32 代码中，、、`int`和`long`都是`char *`4 个字节。在 Win64 代码中，`int`仍然`long`是 4 个字节，但是`char *`是 8 个字节；如果 a`char *`使用 C 风格转换存储在 int 中，它将被静默截断。

`INT_PTR`and `LONG_PTR`（以及它们的无符号变体）是不同的，并且按原样命名，以便更容易修复此类用法，因为它们保证适合`int`or`long`或指针。如果您有`int`，请将其替换为`INT_PTR`; `unsigned int`应该替换为`UINT_PTR`，`long`应该替换为`LONG_PTR`，等等。这种保留原始语义的同时为任一类型（int、long、pointer...）分配足够的存储空间。

例子：

```
int iptr = (int) pData;   // bad 
```

可能

```
INT_PTR iptr = (INT_PTR) pData;     // better 
```

这适用于 x86 和 x64 编译。

请注意，您**必须更改**指针的强制转换以避免潜在的截断。幸运的是，如果您不这样做，Visual Studio 2015 会警告您。

由于 Windows`HANDLE`类型现在被定义为指针，因此同样适用于它们。但是请注意，即使在 64 位模式下，句柄仍可能被安全地截断以适应 4 个字节。这不适用于实际的指针。

# java - Tomcat 池与 Hibernate 的问题。MySQL 超时

> ID：15424174
> 
> 赞同：0
> 
> 时间：2013-03-15T03:28:20.393
> 
> 标签：java, mysql, hibernate, tomcat, struts

我一直**在使用 MySQL 在 tomcat7 上开发一个带有 hibernate3 的 struts Web 应用程序**。起初我一直在使用 c3p0 pooling ......然后我已经切换到**tomcat pooling**。但是一天后我得到了同样的错误。每天早上我们都必须重新启动服务器。

日志显示`java.lang.NullPointerException`是这样的

```
sm.Login.execute(Login.java:24)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
java.lang.reflect.Method.invoke(Unknown Source)
com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:452) 
com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:291)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:254)
com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:263)
org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:133)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:94)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:270)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:190)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
interceptors.SessionCheck.intercept(SessionCheck.java:47)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
interceptors.LoginInterceptor.intercept(LoginInterceptor.java:43)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:498)
org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91) 
```

* * *

我的 META-INF/context.xml 在这里，

```
<?xml version="1.0" encoding="UTF-8"?> <Context antiJARLocking="true" path="/sealmanagement"> 
```

```
 RemoveAbandoned="true" 

        maxAllowed="150" 
        maxIdle="15" 

        name="jdbc/stockdb" 

        type="javax.sql.DataSource" 
        factory="org.apache.tomcat.jdbc.pool.DataSourceFactory" 

    url="jdbc:mysql://localhost:3306/stockdb?autoReconnect=true"
    driverClassName="com.mysql.jdbc.Driver"
    username="root"
    password="1234"
    jmxEnabled="true"
    testWhileIdle="true"
    testOnBorrow="true"
    validationQuery="SELECT 1"
    testOnReturn="true"
    validationInterval="3000"
    timeBetweenEvictionRunsMillis="30000"
    maxActive="100"
    initialSize="10"
    maxWait="1000"
    minEvictableIdleTimeMillis="30000"
    minIdle="10"
    logAbandoned="true" 
```

jdbcInterceptors="org.apache.tomcat.jdbc.pool.interceptor.ConnectionState;org.apache.tomcat.jdbc.pool.interceptor.StatementFinalizer"

```
 /> 
```

* * *

hibernate.cfg.xml 紧随其后，

```
 <?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory>

   <!-- using container-managed JNDI -->
<property name="hibernate.connection.datasource">
java:comp/env/jdbc/stockdb
</property>
<property name="hibernate.dialect">
org.hibernate.dialect.MySQLDialect
</property>       

<property name="hibernate.current_session_context_class">org.hibernate.context.ThreadLocalSessionContext</property> 
```

* * *

```
 package dbcon;

import org.hibernate.cfg.AnnotationConfiguration;

import org.hibernate.SessionFactory;

/**
 * Hibernate Utility class with a convenient method to get Session Factory object.
 *
 * 
 */
public class HibernateUtil {
    private static final SessionFactory sessionFactory;

    static {
        try {
            // Create the SessionFactory from standard (hibernate.cfg.xml) 
            // config file.
            sessionFactory = new AnnotationConfiguration().configure().buildSessionFactory();
        } catch (Throwable ex) {
            // Log the exception. 
            System.err.println("Initial SessionFactory creation failed." + ex);
            throw new ExceptionInInitializerError(ex);
        }
    }

    public static SessionFactory getSessionFactory() {
        return sessionFactory;
    }
} 
```

* * *

虽然它不影响事件，但我也将 PoolProperties 类放入 java 代码中。可能是问题...

这是Getdbcon.java

```
package dbcon;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

import org.apache.tomcat.jdbc.pool.DataSource;
import org.apache.tomcat.jdbc.pool.PoolProperties;

public class Getdbcon {
    //get mysql connection // -- shehan
    public Connection getmysqlConnection() throws SQLException {

        PoolProperties p = new PoolProperties();
        p.setUrl("jdbc:mysql://localhost:3306/stockdb?auto_reconnect=true");
        p.setDriverClassName("com.mysql.jdbc.Driver");
        p.setUsername("root");
        p.setPassword("1234");
        p.setJmxEnabled(true);
        p.setTestWhileIdle(true);
        p.setTestOnBorrow(true);
        p.setValidationQuery("SELECT * from userlogin where 1 limit 1");
        p.setTestOnReturn(true);
        p.setValidationInterval(30000);
        p.setTimeBetweenEvictionRunsMillis(30000);
        p.setMaxActive(100);
        p.setInitialSize(2);
        p.setMaxWait(10000);
        p.setMinEvictableIdleTimeMillis(30000);
        p.setMinIdle(10);
        p.setLogAbandoned(true);
        p.setRemoveAbandoned(false);

 p.setJdbcInterceptors("org.apache.tomcat.jdbc.pool.interceptor.ConnectionState;org.apache.tomcat.jdbc.pool.interceptor.StatementFinalizer");
        DataSource datasource = new DataSource();
        datasource.setPoolProperties(p); 

        Connection con = null;
        try{
        con = datasource.getConnection();
        }
        catch(Exception e){

            e.printStackTrace();

        }
        return con;

    } 
```

* * *

这里有一些来自tomcat启动日志控制台的行......认为它们很有用

```
INFO: JDBC driver: MySQL-AB JDBC Driver, version: mysql-connector-java-5.1.6 ( Revision: ${svn.Revision} )
Mar 15, 2013 9:00:08 AM org.hibernate.dialect.Dialect <init>
INFO: Using dialect: org.hibernate.dialect.MySQLDialect
Mar 15, 2013 9:00:08 AM org.hibernate.transaction.TransactionFactoryFactory buildTransactionFactory
INFO: Using default transaction strategy (direct JDBC transactions)
Mar 15, 2013 9:00:08 AM org.hibernate.transaction.TransactionManagerLookupFactory getTransactionManagerLookup
INFO: No TransactionManagerLookup configured (in JTA environment, use of read-write or transactional second-level cache is not recommended)
Mar 15, 2013 9:00:08 AM org.hibernate.cfg.SettingsFactory buildSettings
INFO: Automatic flush during beforeCompletion(): disabled
Mar 15, 2013 9:00:08 AM org.hibernate.cfg.SettingsFactory buildSettings
INFO: Automatic session close at end of transaction: disabled 
```

* * *

请注意这一点。你很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T04:23:39.210

`autoReconnect=true`不推荐，[理由就在这里](http://mysqlpreacher.com/wordpress/2010/06/mysql-jdbc-connector-autoreconnecttrue/)。

通常，您不应该在 hibernate 中自己建立 JDBC 连接。[Hibernate Session 对象](http://docs.jboss.org/hibernate/orm/3.5/javadoc/org/hibernate/Session.html)有一个 createQuery 和 createSQLQuery 方法，这使得大多数 JDBC 代码变得多余。我说的*最多*是因为我还没有想出从 Hibernate 中进行[VACUUM ANALYZE](http://www.postgresql.org/docs/9.2/static/sql-vacuum.html)的方法，所以我必须建立一个单独的 JDBC 连接才能这样做，但是除非出现这样的边缘情况，你真的不应该混合使用 JDBC 和 Hibernate .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T04:43:41.510

然后我在***my.ini***的末尾添加了***wait_timeout***变量。并赋予它最大值。 [根据这个](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_wait_timeout)

 *然后一切都解决了。不再是那个问题困扰我了。

谢谢[hd1](https://stackoverflow.com/users/783412/hd1)的帮助。*

# php - MongoDB更新后更改文档位置

> ID：15424183
> 
> 赞同：0
> 
> 时间：2013-03-15T03:29:05.777
> 
> 标签：php, mongodb

实际上我正在使用 mongodb 做项目。在我更新记录并找到所有记录后，它会更改文档位置。所以我如何避免这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T04:00:07.760

随着更新的进行，集合中文档的“自然”（即未排序）顺序可能会发生变化，因此如果您希望查询返回的文档具有特定顺序，则需要在查询中包含排序对象。

# javascript - 简单的 javascript 翻转在 jquery 幻灯片中表现得很奇怪

> ID：15424184
> 
> 赞同：0
> 
> 时间：2013-03-15T03:29:06.070
> 
> 标签：javascript, jquery, slideshow

我正在使用一个简单的 jquery 幻灯片，并想添加一个简单的 jscript 翻转，因为我不想弄乱 CSS。它可以正确翻转，但是当您单击它时，假设要拉起的图像会出现在缩略图图像的后面。但是当您刷新屏幕时，它的行为正确。这是没有翻转的页面，但您可以看到缩略图如何正确拉出图像：

[http://olbrichdesigns.com/cg_test](http://olbrichdesigns.com/cg_test)

这是当我在图像中添加简单的 jscript 行以进行翻转时：

[http://olbrichdesigns.com/cg_test/index3.html](http://olbrichdesigns.com/cg_test/index3.html)

这是简单的 javascript 行。

```
<a href="#2" class="link"><img src="images/spg_puzzle1.jpg" width="221" height="205" alt="" name="puzzle1" onmouseover="this.src='images/spg_puzzle1_hov.jpg'" onmouseout="this.src='images/spg_puzzle1.jpg'"></a> 
```

不知道还要添加什么，这样您就可以在不发布大量代码的情况下看到。我想如果你有知识，你可以看看页面的页面来源。

谢谢大家！

# html - 在 HTML 页面上实现保存/加载功能

> ID：15424185
> 
> 赞同：0
> 
> 时间：2013-03-15T03:29:12.087
> 
> 标签：html, upload, save

我有一个 HTML 页面，它是一个时间表，因此员工可以记录他们当天所做的事情并提交。时间表在当前状态下运行良好，可与 Access DB 一起使用以保存信息。现在，我希望有人在中途填写时间表，保存它，在当天晚些时候加载它，完成填写，然后最后提交。

有什么好的做法/方法可以做到这一点？我想知道是否有什么比将数据保存到数据表中然后根据用户的请求将其加载回站点更好的方法。这似乎是最明显的解决方案，但我想知道是否有更聪明的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:51:06.123

如果您确定该人将使用同一台计算机，则可以将数据存储在 localStorage 中，而不必将其写入服务器，这可能更容易，因为数据将存储在浏览器中。我不知道这是否是最好的选择，但它是一个选择。

# php - 为分布式模块填充 $beanList、$beanFiles 和 $moduleList

> ID：15424186
> 
> 赞同：1
> 
> 时间：2013-03-15T03:29:12.857
> 
> 标签：php, module, javabeans, sugarcrm

我想创建一个用于重新分发的 SugarCRM 模块。我应该在哪里填充`$beanList`、`$beanFiles`和`$moduleList`？

也就是说，如果我使用模块生成器创建一个 SugarCRM 模块，系统会自动生成如下文件

```
custom/application/Ext/Include/modules.ext.php 
```

它填充三个全局变量`$beanList`,`$beanFiles`和`$moduleList`类似这样的东西（假设模块名称为`pshw_Helloworld`.

```
$beanList['pshw_Helloworld'] = 'pshw_Helloworld';
$beanFiles['pshw_Helloworld'] = 'modules/pshw_Helloworld/pshw_Helloworld.php';
$moduleList[] = 'pshw_Helloworld'; 
```

这对本地系统非常有用——但如果我想重新分发一个模块（提供在线下载、部署到多个办公室等），我应该指导人们自己填充`modules.ext.php`还是`modules_override.php`归档？或者有没有更优雅的方式来重新分配使用 bean 的 SugarCRM 模块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:37:18.890

这一切都是通过在您的模块 zip 中包含 manifest.php 自动完成的。模块加载器将读取清单并为您创建这些条目。键是 $installdefs 数组中的 'beans' 键。更多信息可以在这里找到：[清单文件简介](http://support.sugarcrm.com/04_Find_Answers/03_Developers/Module_Loader/Introduction_to_the_Manifest_File#beans)

# ruby-on-rails - Rails Geocoder Gem 乘客无法启动

> ID：15424187
> 
> 赞同：0
> 
> 时间：2013-03-15T03:29:17.447
> 
> 标签：ruby-on-rails

我有一个奇怪的问题。我创建了一个 geocoder.rb 初始化文件来使用 yahoo boss 作为我的地理编码服务。反过来，在我的开发服务器上，一切似乎都运行良好。但是，当我将 geocoder.rb 上传到生产环境中的初始化程序时，由于 geocoder.rb 文件，乘客无法正常启动。地理编码器的宝石列表显示：地理编码器（1.1.6、1.1.5）

这是我的 geocoder.rb 文件的样子：

```
 Geocoder.configure(
:lookup => :yahoo,
:api_key => ['test', 'test']
 ) 
```

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:06:51.237

弄清楚了。卸载所有版本的地理编码器并将其添加到 gem 文件中：

```
 gem "geocoder", "~> 1.1.6" 
```

# php - 清理从表单注入到 mysql 的数据

> ID：15424190
> 
> 赞同：0
> 
> 时间：2013-03-15T03:29:25.180
> 
> 标签：php, mysql

我的函数库中有一个名为 sanitse 的函数。它接受一个字符串的一个参数并返回经过清理的字符串。

```
function sanitise($data){
    return htmlentities(mysql_real_escape_string($data));
} 
```

我正在开发一个论坛，我需要清理以文本形式提交的数据。（它存储在数据库中）。不过也有问题出现。存储数据时，新行表示为 \r\n 并在检索后出现在线程上。应该有一个新行。nl2br 没有解决它，我在另一篇文章中读到，这应该从问题的根源（函数）解决，而不是“破解”解决方案来纠正它。

如果我不清理数据，评论会正确显示。但这当然不安全。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T03:36:14.717

无论如何，您正在做的事情并不安全。你真的应该明白你在做什么。

**mysql_real_escape_string()：**此函数接受一个字符串并将其转义，以便可以在 SQL 语句中使用。所有这些都是为了让查询解析器清楚什么是数据，什么是查询。了解这一点很重要。

**htmlentities()/htmlspecialchars()：** 这些函数对字符串进行转义，以便它们可以在 HTML 中使用，而无需 HTML 解析器认为诸如`<`或之类的字符`"`是 HTML。这些实体变成`&lt;`和`&quot;`。

您必须在正确的上下文中使用这些函数。通过在查询上下文中使用字符串之前*不*使用`mysql_real_escape_string()`它作为最后接触字符串的东西，您否定了它的大部分值。您应该仅在将数据插入数据库时​​使用此函数，并且仅在字符串完全形成时使用。最好的办法是根本不使用查询中的数据。将 PDO 与准备好的/参数化查询一起使用。这有效地从查询中删除了数据，消除了任何 SQL 注入的机会。

在您准备好将任意字符串插入 HTML 之前，您*不*应该使用它。`htmlentities()`也就是说，在将内容放入数据库之前不要使用此功能。否则，您会使您的数据在任何其他情况下都很难使用。处理人们这样做的烂摊子真的很麻烦。不要这样做。

现在，如果您看到文字`\r`或`\n`文本，那么该数据来自其他东西。不是来自您正在使用的两个功能。这些函数都不会插入这样的字符串。

另请参阅： [https ://stackoverflow.com/a/7810880/362536](https://stackoverflow.com/a/7810880/362536)

# java - 如何使来自 JSP 的 Servlet 调用更安全？

> ID：15424191
> 
> 赞同：0
> 
> 时间：2013-03-15T03:29:57.713
> 
> 标签：java, javascript, jquery, jsp, kendo-grid

我有一个带有几个组合框、一个网格和一个用于刷新网格的按钮的 JSP 页面。每当用户按下刷新按钮时，JSP 页面都会调用 servlet，执行查询并根据组合框中的值使用新检索到的数据刷新网格。

所以在Javascript中，这或多或少是我正在做的事情：

```
<script>
    function getSRCHGTData() {
        $.get('api/ServletTest', function(data) {
            alert(data);
        });

        var comboBox = $("#cb_cus_cd").data("kendoComboBox");

        var grid = $("#grid_SRCHGT").data("kendoGrid");
        grid.dataSource.transport.options.read.url = "api/srchgt_read?cus_cd=" + comboBox.value();

        grid.dataSource.read();
        grid.refresh();
    }
</script> 
```

像这样传递参数对我来说似乎并不安全，因为人们可以轻松查看 servlet 的 url 并执行 SQL 注入。

如何让通话更安全？

编辑：详细说明：servlet 在查询数据库之前已经完成了验证输入的工作（清理输入、准备语句等）。我更担心的是我在通过 URL 调用 servlet 时暴露了参数（例如，他们可以从下面查看 cus_cd 参数）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:32:37.813

SQL 注入在这里不应该是一个问题。这可以在数据库层避免。我的意思是你可以利用`PreparedStatement`它来避免 SQL 注入攻击。

看看这里，[防止 Java 中的 SQL 注入](https://www.owasp.org/index.php/Preventing_SQL_Injection_in_Java#Defense_Strategy)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T03:35:20.953

您不应该尝试使调用更安全，因为用户总是可以嗅探它们，而坚定的攻击者可能会突破混淆。您需要确保服务本身是安全的。（即具有适当的身份验证、授权并适当地清理输入。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T06:14:52.523

简单地告诉[Do-Not-Rely 和 Trust-on-Client-Side-Validation](http://web.securityinnovation.com/appsec-weekly/blog/bid/67936/Do-Not-Rely-on-Client-Side-Validation)。

通过过滤器传递所有 servlet 并检查是否存在正确的身份验证总是更好。

# vim - 如何在 VIM 中进行这种窗口移动？

> ID：15424194
> 
> 赞同：3
> 
> 时间：2013-03-15T03:30:14.810
> 
> 标签：vim

首先，我将三个窗口分割成这样：

```
|    |    |    |
|    |    |    |
| A  | B  | C  |
|    |    |    |
|    |    |    | 
```

那么，我怎样才能将它们更改为这种方式？

```
 |      |
   A     |      |
_________|  C   |
   B     |      |
         |      | 
```

当我想同时使用 TagList 和 NERDTree 时会发生这种情况。他们俩都在左侧打开一个新窗口。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T03:39:19.113

1.  去 A 和`Ctrl-w K`

    现在你的窗口应该看起来像

    ```
    |    A    |
    |---------|
    |  B |  C | 
    ```

2.  然后去 C 和`Ctrl-w L`

# c# - 如何防止对文本框的 SQL 注入攻击？

> ID：15424195
> 
> 赞同：2
> 
> 时间：2013-03-15T03:30:28.700
> 
> 标签：c#, sql, sql-server, database, vb.net

我的 VB.net 页面有一个文本框，它接受 SQL 语句并使用 SQL Helper 的 ExecuteDataSet 命令返回一个数据集。您认为防止执行 Delete、Truncate、Drop、Insert 等语句的最佳方法是什么？文本框应该只接受 Select 语句。我正在考虑通过 Javascript 或通过服务器验证来捕获输入字符串，但我确信有更有效的想法可以做到这一点。提前致谢。

编辑：我的文本框就像一个查询分析器，因此它接受一行 SQL 语句，然后根据输入的字符串返回一个数据集

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T03:40:38.290

首先，让我郑重声明，你的设计是一个非常糟糕的主意；您正在使您的数据库面临巨大的风险。

更好的设计是让您的用户从他们可以选择的字段列表中进行选择。这避免了允许用户键入 SQL 语句。

但是，如果您绝对决心这样做，那么请构建一个您要阻止的关键字数组。然后，在用户输入之后，循环遍历数组，检查是否有任何被阻塞的单词。如果找到任何被阻止的词，则不执行 SQL。

不过，这是个坏主意。你不应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T03:40:22.490

有很多方法可以做到这一点，但我通常只是使用带参数的 sp_executesql 编写动态 sql。这是来自 BOL 的示例。

```
DECLARE @IntVariable int;
DECLARE @SQLString nvarchar(500);
DECLARE @ParmDefinition nvarchar(500);

/* Build the SQL string one time.*/
SET @SQLString =
     N'SELECT BusinessEntityID, NationalIDNumber, JobTitle, LoginID
       FROM AdventureWorks2008R2.HumanResources.Employee 
       WHERE BusinessEntityID = @BusinessEntityID';
SET @ParmDefinition = N'@BusinessEntityID tinyint';
/* Execute the string with the first parameter value. */
SET @IntVariable = 197;
EXECUTE sp_executesql @SQLString, @ParmDefinition,
                      @BusinessEntityID = @IntVariable;
/* Execute the same string with the second parameter value. */
SET @IntVariable = 109;
EXECUTE sp_executesql @SQLString, @ParmDefinition,
                  @BusinessEntityID = @IntVariable; 
```

Sp_executesql 允许您将参数放入动态代码中，并且它们被视为变量。这样，如果有人试图将代码注入到字段中，他们“注入”的代码只会存储在列中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T04:23:43.690

防止 SQL 注入的一种方法是避免在代码中使用动态生成的 SQL。通过使用参数化查询和存储过程，您就不可能针对您的应用程序进行 SQL 注入。

通过传递参数，您可以避免许多类型的 SQL 注入攻击，保护数据库访问的更好方法是使用存储过程。存储过程可以通过将数据库中的对象限制为特定帐户并允许帐户仅执行存储过程来保护您的数据库。然后，您的代码使用仅有权执行存储过程的这一帐户进行所有数据库访问。您没有为该帐户提供任何其他权限，例如写入，这将允许攻击者输入 SQL 语句以对您的数据库执行

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T04:51:54.967

根据 DWRoeland 的回答，如果您坚持使用用户文本输入构建查询，则需要对输入进行大量筛选。

但是，与建议相反，我建议使用白名单方法：预先确定允许的关键字集合。筛选可接受的内容比尝试阻止所有不可接受的内容要容易得多。

只是一个额外的说明：
如果您选择下拉列表方法来构建查询，您仍然需要验证这些值，因为用户仍然可以在回发之前篡改这些值并对数据库造成严重破坏。

# android - 如何防止Android上的颜色混合

> ID：15424196
> 
> 赞同：1
> 
> 时间：2013-03-15T03:30:34.847
> 
> 标签：android, canvas, paint

我有两个油漆对象。第一个（1）我用来画半透明的背景，第二个（2） - 用手指绘画。一切都很好，除了一件事 - 当我完成绘图时（2）的颜色变得更暗。我希望（1）不要影响（2）。我尝试了所有 xfermode，但没有帮助。我必须做些什么来解决这个问题？

# linux - 删除文件名中两次出现的字符串之间的字符串

> ID：15424197
> 
> 赞同：0
> 
> 时间：2013-03-15T03:30:35.467
> 
> 标签：linux, bash

我是 Linux 新手，我必须删除文件名中的特定数字字符串。

这是我的文件名：

```
AB.TEXT.OMN.BUFFER.INSERT.123.20130315.CSV 
AB.TEXT.OMN.BUFFER.APPEND.5345667.20130315.CSV 
```

我需要输出为：

```
AB.TEXT.OMN.BUFFER.INSERT.20130315.CSV   
AB.TEXT.OMN.BUFFER.APPEND.20130315.CSV 
```

我想删除该位置的`123`and which may`5345667`或其他数字，所以我想删除 . （第 5 次出现）和 . （第 6 次出现）在文件名中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:35:49.263

`cut`可以这样做：

```
pax> echo 'AB.TEXT.OMN.BUFFER.INSERT.123.20130315.CSV' | cut -d. -f1-5,7-
AB.TEXT.OMN.BUFFER.INSERT.20130315.CSV

pax> echo 'AB.TEXT.OMN.BUFFER.APPEND.5345667.20130315.CSV' | cut -d. -f1-5,7-
AB.TEXT.OMN.BUFFER.APPEND.20130315.CSV 
```

`-d.`只需将分隔符设置为，并`.`为`-f1-5,7-`您提供除第六个以外的所有字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T06:36:49.887

**输入.txt**

```
AB.TEXT.OMN.BUFFER.INSERT.123.20130315.CSV 
AB.TEXT.OMN.BUFFER.APPEND.5345667.20130315.CSV 
```

**命令**

```
awk -F "." '{ $6=""; print $0 }' Input.txt | sed -e 's/ /\./g' -e 's/\.\./\./g' 
```

**输出**

```
AB.TEXT.OMN.BUFFER.INSERT.20130315.CSV   
AB.TEXT.OMN.BUFFER.APPEND.20130315.CSV 
```

# python - 如何？时区 'UTC' 的 CURRENT_TIMESTAMP

> ID：15424199
> 
> 赞同：24
> 
> 时间：2013-03-15T03:30:54.617
> 
> 标签：python, sqlalchemy

我将如何修改我的电话

```
sqlalchemy.func.current_timestamp() 
```

与产生的东西

```
CURRENT_TIMESTAMP AT TIME ZONE 'UTC' 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-15T07:22:57.017

一个快速的解决方法是执行以下操作：

```
func.current_timestamp().op('AT TIME ZONE')('UTC') 
```

更合适的方法是使用[编译器](http://docs.sqlalchemy.org/en/rel_0_8/core/compiler.html)扩展并定义`CURRENT_TIMESTAMP`. 实际上，它的文档中已经有一个[示例](http://docs.sqlalchemy.org/en/rel_0_8/core/compiler.html#utc-timestamp-function)，它使用了不同的方法（`TIMEZONE`函数）。由于您只需要 Postgres （我从您以前在 SA 邮件列表中的电子邮件中假设您正在使用 Postgres），这里是另一个（更好的）快速修复：

```
func.timezone('UTC', func.current_timestamp()) 
```

# ios - 是否可以检查音频缓冲区的填充量？

> ID：15424204
> 
> 赞同：0
> 
> 时间：2013-03-15T03:31:16.693
> 
> 标签：ios, core-audio, audiobuffer

是否可以检查填充了多少音频缓冲区？我有一个正在运行的应用程序，它可以在屏幕上绘制音频缓冲区，例如振荡器，但是当我触摸屏幕时，我想停止捕获并绘制当前缓冲区。所以我需要找出缓冲区填充了多少并绘制它。我当前的缓冲区大小是 256。

是否可以使用 iOS 中的音频缓冲区来实现这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:50:04.267

当您调用 时`AudioUnitRender`，它会传递给您一个完整的缓冲区。

缓冲区大小为 256 帧，假设您以 44100 帧/秒（甚至 11025 帧）的速度运行，那么在完整缓冲区中似乎不太可能存在实际差异，因为我们正在谈论如此令人难以置信的一小部分一秒。

我不确定您的应用程序是什么，但您可能需要考虑存储更多数据并渲染多个缓冲区长度，以获取可用数据。例如，220Hz 的音符 A 在 256 帧缓冲区内仅具有略多于一个周期的 44.1K 波形。

# c# - 从同一应用程序读取和写入 x86 和 x64 注册表项

> ID：15424205
> 
> 赞同：15
> 
> 时间：2013-03-15T03:31:36.093
> 
> 标签：c#, .net, registry, x86-64

我正在运行编译为 x86 的应用程序，它在 64 位 Windows 上运行。

为了解决 ClickOnce 文件关联的问题，我想从注册表的 x86 视图中读取一些 CLSID 值，然后将它们写入 x64 视图。

需要明确的是，这意味着我想从 x86 应用程序中*同时*读取 x86 注册表视图，然后写入 x64 注册表视图。我想将我在下面找到的值`HKEY_CURRENT_USER\Software\Classes\CLSID\{my clsid}`写入`HKEY_CURRENT_USER\Software\Classes\Wow6432Node\CLSID\{my clsid}`.

我该怎么做？使用 a`RegistryView`会产生意想不到的结果。例如，此`OpenSubKey`调用返回 null：

```
keyPath = @"Software\Classes\CLSID\" + clsid;
var regularx86View = RegistryKey.OpenBaseKey(RegistryHive.CurrentUser, RegistryView.Registry32);
var regularClassKey = regularx86View.OpenSubKey(keyPath, RegistryKeyPermissionCheck.ReadSubTree); 
```

如果我使用`RegistryView.RegistryDefault`或`RegistryView.Registry64`改为返回密钥 - 但我希望它在使用时返回 null，`Registry64`因为 x64 视图中不存在该密钥，并且不应该发生重定向。

是在使用`RegistryView`适当的方法，还是应该直接使用 WinAPI？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-15T04:24:52.257

我可能误解了您的要求，但是如果您在 32 位进程中运行，那么您的所有密钥都将在`Wow6432Node\xxxxx`节点中。因此，如果您尝试将它们从`HKEY_CURRENT_USER\Software\Classes\CLSID\{my clsid}`（并且没有手动指定 64 位视图）复制到`HKEY_CURRENT_USER\Software\Classes\Wow6432Node\CLSID\{my clsid}`您将复制相同的值。此代码应该可以工作：

```
keyPath = @"Software\Classes\CLSID\" + clsid;
var regularx86View = RegistryKey.OpenBaseKey(RegistryHive.CurrentUser, RegistryView.Registry32);
// Note this calls HKEY_CURRENT_USER\Software\Classes\Wow6432Node\CLSID\{my clsid}:
var regularClassKey = regularx86View.OpenSubKey(keyPath, RegistryKeyPermissionCheck.ReadSubTree); 

var regularx64View = RegistryKey.OpenBaseKey(RegistryHive.CurrentUser, RegistryView.Registry64);
// Note this calls HKEY_CURRENT_USER\Software\Classes\CLSID\{my clsid}:
var regularClassKey = regularx64View.OpenSubKey(keyPath, RegistryKeyPermissionCheck.ReadSubTree); 
```

# c#-4.0 - 使用 dropnet 或方法 REQUEST.GetResponse() 的进度条的 Dropbox 上传进度条

> ID：15424206
> 
> 赞同：1
> 
> 时间：2013-03-15T03:31:37.477
> 
> 标签：c#-4.0, dropnet

我正在使用 dropnet (dropbox c# API) 将文件上传到 dropbox。问题是我需要分块进行以监控进度。只需在一个地方阅读 Dropbox 支持块上传（[https://www.dropbox.com/developers/blog/21](https://www.dropbox.com/developers/blog/21)）并且它有 Java 库等。我需要在 C# 中做，对此有任何帮助。

Dropnet 使用restsharp，有人说restsharp 必须实现它。以下是实际上传发生的部分

```
private static HttpWebResponse GetRawResponse(HttpWebRequest request)
{
 try
{
    return (HttpWebResponse)request.GetResponse();  // UPLOAD OCCURS HERE
}
catch (WebException ex)
{
if (ex.Response is HttpWebResponse)
{
return ex.Response as HttpWebResponse;
}
throw;
    }
} 
```

有没有办法通过修改代码来获得进度条？还有什么方法可以让我们获得任何 REQUEST.GetResponse() 的进度条，离开 Dropbox 的上下文（因为这将解决我们的问题）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T21:03:31.130

我最近更新了 NuGet 中的 DropNet 库，支持分块上传，因此您可以尝试一下，但这意味着将您的文件分成块并每次增加进度条，这对于小文件来说并不理想。

或者，您可以查看我的新库 DropNetRT，它基于 Microsoft 的 HttpClient 实现，并且应该能够通过一些调整提供一些进度反馈。[https://github.com/dkarzon/DropNetRT](https://github.com/dkarzon/DropNetRT)

# asp.net - Tweetsharp OAuth 示例代码

> ID：15424207
> 
> 赞同：2
> 
> 时间：2013-03-15T03:31:48.310
> 
> 标签：asp.net, web-applications, twitter, web, tweetsharp

我正在向我正在开发的 Web 应用程序介绍我的 tweetsharp。有没有人有任何示例代码或知道在哪里？我不确定这是这个问题的正确论坛，但我一直在搜索一整夜，我找不到任何最新的东西。他们中的大多数使用旧版本的 TweetSharp 并且不再适用。

如果没有，也许我可以得到一些指导。

我正在尝试启动 OAuth，到目前为止，我发现的唯一好的指南是通过 TweetSharp getHub 项目的自述文件。以下代码让我失望：

```
 ViewModel.Message = string.Format("Your username is {0}", user.ScreenName);
    return View(); 
```

我需要使用 MVC 应用程序吗？我不熟悉视图模型。

如果有人可以帮助我，最好有一个完整的演练或授权示例。如果它是用于网络的，那就太好了，但此时任何事情都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T09:01:49.417

这是一个非常广泛的问题，答案将取决于您用于 Web 应用程序的技术。我今天刚开始研究 TweetSharp + OAuth 的客户端应用程序，帮助我的是将 TweetSharp github 页面上的示例与 dev.twitter.com 上的 API 文档进行比较。

这个链接对我特别有用：[https](https://dev.twitter.com/docs/auth/obtaining-access-tokens) ://dev.twitter.com/docs/auth/obtaining-access-tokens 。从那里，选择您要提供的登录体验类型，然后按照所需的步骤操作。

从原始 API 到 TweetSharp 调用的转换是微不足道的 - 从原始 API 名称到 TweetSharp 方法名称存在 1:1 映射。例如，当 Twitter 文档说要调用时：

```
POST /oauth/request_token HTTP/1.1 
```

对应的 TweetSharp 调用是：

```
OAuthRequestToken requestToken = service.GetRequestToken(); 
```

*   events=Object { mouseover=[1]}handle=function() [**Thu 3/14/2013** : //<- - - this is what we are trying to remove - - - - **#62 It's Little Things**](http://www.iluvtrees.org/) 于 2013-03-15T03:44:01.303 回答 Related 2 jquery - IE7 转换后透明度丢失 5 glsl - 这个 GLSL rand() 单线的起源是什么？ 1 c# - 通过 .NET 的 Campaign Monitor API 2 java - 从关键字获取推文 1 silverlight-4.0 - 将数据网格绑定到 Silverlight 4 中的自定义对象集合 1 ruby-on-rails - Ruby on Rails：如何实现这个特定模型（使用继承、N-to-M 关系等） 1 objective-c - ios中如何填充数组的区别？ 1 javascript - 在保存期间检测http方法 0 osmf - 是否有用于预定现场活动的 osmf 概念？ 2 python - 在哪里可以找到每个 python 关键字如何实现的官方列表？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641 <link href="../Styles/Style.css" type="text/css" rel="stylesheet">

    # php - 为什么这个 jQuery replace() 在 问问题 问问题 2013-03-15T03:31:53.430 132 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 该代码位于@ http://www.iluvtrees.org/，我们正在尝试删除冒号（:）... jQuery('#events-calendar-list li a').text(this.text().replace(':', '')); 我正在远程执行此操作，并且能够使用此脚本获得一个更简单的字符串来工作。选择器中的难点，我们的html看起来是这样的…… ...

    *   events=Object { mouseover=[1]}handle=function() [**Thu 3/14/2013** : //<- - - this is what we are trying to remove - - - - **#62 It's Little Things**](http://www.iluvtrees.org/) ... 我目前无权访问 PHP 文件以从那里删除。 还有第三个选项使用cookie. 参考 -动态生成内容的 GWT 国际化 在用户选择他的语言环境之前，请确保您为 cookie 设置了语言环境值或为您的 cookie 设置了默认值。在我们的例子中，用户在登录前选择一种语言（我在其中为用户设置 cookie 区域设置值）并在加载时将其读入 gwt 应用程序。 phpjavascriptjqueryhtml 4 4 回答 4 This answer is useful 3 您可以简单地删除锚内的文本节点： $('a').contents().filter(function(node) { return this.nodeType === 3; // filter text nodes }).remove(); 演示 于 2013-03-15T03:49:48.920 回答 This answer is useful 1 工作演示 好的，从您提供的链接中，我假设所有元素都遵循相同的格式。 所以使用这个： // .replace(': **','**'); fiddle with the HTML, you can't use .text() here jQuery('#events-calendar-list li a').html(jQuery('#events-calendar-list li a').html().replace(': **','**')); 于 2013-03-15T03:50:51.393 回答 This answer is useful 1 如下所示。 jQuery('#events-calendar-list li a').text(jQuery('#events-calendar-list li a').text().replace(':', '')); 在许多编程语言中，this （或 self）是一个关键字，可以在实例方法中使用，以引用当前正在执行的方法已被调用的对象。 于 2013-03-15T03:33:50.470 回答 This answer is useful 0 <title>Test Website</title> 

        *   events=Object { mouseover=[1]}handle=function() [**Thu 3/14/2013** : //<- - - this is what we are trying to remove - - - - **#62 It's Little Things**](http://www.iluvtrees.org/) 于 2013-03-15T03:44:01.303 回答 Related 2 jquery - IE7 转换后透明度丢失 5 glsl - 这个 GLSL rand() 单线的起源是什么？ 1 c# - 通过 .NET 的 Campaign Monitor API 2 java - 从关键字获取推文 1 silverlight-4.0 - 将数据网格绑定到 Silverlight 4 中的自定义对象集合 1 ruby-on-rails - Ruby on Rails：如何实现这个特定模型（使用继承、N-to-M 关系等） 1 objective-c - ios中如何填充数组的区别？ 1 javascript - 在保存期间检测http方法 0 osmf - 是否有用于预定现场活动的 osmf 概念？ 2 python - 在哪里可以找到每个 python 关键字如何实现的官方列表？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641******** 

     ****> ID：15424208
    > 
    > 赞同：2
    > 
    > 时间：
    > 
    > 标签：php, javascript, jquery, html

    该代码位于@ [http://www.iluvtrees.org/](http://www.iluvtrees.org/)，我们正在尝试删除冒号（:）...

    ```
    jQuery('#events-calendar-list li a').text(this.text().replace(':', '')); 
    ```

    我正在远程执行此操作，并且能够使用此脚本获得一个更简单的字符串来工作。选择器中的难点，我们的html看起来是这样的……

    ```
    ...
    <ul id="events-calendar-list">
    <li id="events-calendar-list-630" title="
    <strong>Title: </strong><b>#62 It's Little Things
    </b><br />Check your fuel consumption and tire pressure to make sure your car is running as efficiently as possible.
    <br /><strong>Start Time: </strong>12:00 am<br /><strong>End Time: </strong>12:00 am<br />">events=Object { mouseover=[1]}handle=function()
    <a href="http://www.iluvtrees.org/">
    <strong style="display: none;">Thu 3/14/2013</strong>
    : //<- - - this is what we are trying to remove - - - -
    <b>#62 It's Little Things</b>
    <br>
    </a>
    ... 
    ```

    我目前无权访问 PHP 文件以从那里删除。

    * * *

    ## 回答 #1

    > 赞同：3
    > 
    > 时间：2013-03-15T03:49:48.920

    您可以简单地删除锚内的文本节点：

    ```
    $('a').contents().filter(function(node) {
      return this.nodeType === 3; // filter text nodes
    }).remove(); 
    ```

    [**演示**](http://jsbin.com/epumaj/1/)

    * * *

    ## 回答 #2

    > 赞同：1
    > 
    > 时间：2013-03-15T03:50:51.393

    [**工作演示**](http://jsfiddle.net/popnoodles/WhGUM/)

    好的，从您提供的链接中，我假设所有元素都遵循相同的格式。

    所以使用这个：

    ```
    // .replace('</strong>: <b>','</strong><b>'); fiddle with the HTML, you can't use .text() here

    jQuery('#events-calendar-list li a').html(jQuery('#events-calendar-list li a').html().replace('</strong>: <b>','</strong><b>')); 
    ```

    * * *

    ## 回答 #3

    > 赞同：1
    > 
    > 时间：2013-03-15T03:33:50.470

    如下所示。

    ```
    jQuery('#events-calendar-list li a').text(jQuery('#events-calendar-list li a').text().replace(':', '')); 
    ```

    在许多**编程语言中**，`this` **（或 self）**是一个关键字，可以在**实例方法中使用，以引用当前正在执行的方法已被调用的对象。**

    * * *

    ## 回答 #4

    > 赞同：0
    > 
    > 时间：2013-03-15T03:44:01.303

    ```
    <html>
            <head>
                    <title>Test Website</title>
                    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
                    <script>
                            $(document).ready(function() {
                                    var x = $('a#test').text();
                                    alert(x.replace(':', ''));
                            });
                    </script>
            </head>
    <body>

    <ul id="events-calendar-list">
    <li id="events-calendar-list-630" title="
    <strong>Title: </strong><b>#62 It's Little Things
    </b><br />Check your fuel consumption and tire pressure to make sure your car is running as efficiently as possible.
    <br /><strong>Start Time: </strong>12:00 am<br /><strong>End Time: </strong>12:00 am<br />">events=Object { mouseover=[1]}handle=function()
    <a id="test" href="http://www.iluvtrees.org/">
    <strong style="display: none;">Thu 3/14/2013</strong>
    : //<- - - this is what we are trying to remove - - - -
    <b>#62 It's Little Things</b>
    <br>
    </a>

    </body>
    </html> 
    ```****

# python - 转移 numpy 数据的所有权

> ID：15424211
> 
> 赞同：10
> 
> 时间：2013-03-15T03:32:27.737
> 
> 标签：python, numpy

在我[之前的问题](https://stackoverflow.com/questions/15422895/numpy-transform-non-contiguous-data-to-contiguous-data-in-place)中，我学会了调整子类`ndarray`的大小。整洁的。不幸的是，当我试图调整大小的数组是计算的结果时，这不再有效：

```
import numpy as np

class Foo(np.ndarray):
    def __new__(cls,shape,dtype=np.float32,buffer=None,offset=0,
                strides=None,order=None):
        return np.ndarray.__new__(cls,shape,dtype,buffer,offset,strides,order)

    def __array_prepare__(self,output,context):
        print output.flags['OWNDATA'],"PREPARE",type(output)
        return np.ndarray.__array_prepare__(self,output,context)

    def __array_wrap__(self,output,context=None):
        print output.flags['OWNDATA'],"WRAP",type(output)

        return np.ndarray.__array_wrap__(self,output,context)

a = Foo((32,))
#resizing a is no problem
a.resize((24,),refcheck=False)

b = Foo((32,))
c = Foo((32,))

d = b+c
#Cannot resize `d`
d.resize((24,),refcheck=False) 
```

确切的输出（包括回溯）是：

```
True PREPARE <type 'numpy.ndarray'>
False WRAP <class '__main__.Foo'>
Traceback (most recent call last):
  File "test.py", line 26, in <module>
    d.resize((24,),refcheck=False)
ValueError: cannot resize this array: it does not own its data 
```

我认为这是因为`numpy`创建了一个新的`ndarray`并将其传递给`__array_prepare__`. 尽管在此过程中的某个时刻，似乎 " `output`" 数组被[视图投射到我的`Foo`type](http://docs.scipy.org/doc/numpy/reference/arrays.classes.html#numpy.__array_wrap__)，尽管在这一点上文档似乎不是 100% 清晰/准确。无论如何，在视图转换之后，输出不再拥有数据，因此无法就地重塑（据我所知）。

有没有办法通过某种 numpy voodoo ( `__array_prepare__`, `__array__`) 等将数据的所有权转移到我的子类的实例？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T20:45:52.497

这几乎不是一个令人满意的答案，但它也不适合评论......您可以通过使用 ufunc 的`out`参数来解决数据的所有权问题。一个愚蠢的例子：

```
>>> a = Foo((5,))
>>> b = Foo((5,))
>>> c = a + b # BAD
True PREPARE <type 'numpy.ndarray'>
False WRAP <class '__main__.Foo'>
>>> c.flags.owndata
False

>>> c = Foo((5,))
>>> c[:] = a + b # BETTER
True PREPARE <type 'numpy.ndarray'>
False WRAP <class '__main__.Foo'>
>>> c.flags.owndata
True

>>> np.add(a, b, out=c) # BEST
True PREPARE <class '__main__.Foo'>
True WRAP <class '__main__.Foo'>
Foo([  1.37754085e-38,   1.68450356e-20,   6.91042737e-37,
         1.74735556e-04,   1.48018885e+29], dtype=float32)
>>> c.flags.owndata
True 
```

我认为上面的输出与以从临时数组`c[:] = a + b`中复制数据为代价来拥有数据是一致的。但是，当您使用该参数`c`时，不应该发生这种情况。`out`

由于您已经担心数学表达式中的中间存储，因此微观管理它的处理方式可能不是一件坏事。也就是说，替换

```
g = a + b + np.sqrt(d*d + e*e + f*f) 
```

和

```
g = foo_like(d) # you'll need to write this function!
np.multiply(d, d, out=g)
g += e * e
g += f * f
np.sqrt(g, out=g)
g += b
g += a 
```

可能会为您节省一些中间内存，并让您拥有自己的数据。它确实抛出了“可读性计数”的口头禅，但是......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T09:01:24.340

> 不过，在此过程中的某个时刻，“输出”数组似乎被转换为我的 Foo 类型

是的，`ndarray.__array_prepare__`调用`output.view`，它返回一个不拥有其数据的数组。

我做了一些实验，但找不到一个简单的方法。

虽然我同意这种行为并不理想，但至少在您的用例中，我认为`d`不拥有其数据是可以接受的。Numpy 广泛使用视图，如果您坚持避免在使用 numpy 数组时创建任何视图，那么您的生活将变得非常艰难。

我还声称，根据我的经验，`resize`通常应该避免。如果您避免使用创建的视图，您应该不会有任何问题`resize`。它有一种 hacky 的感觉，并且很难使用（正如您可能开始理解的那样，在使用它时遇到了两个经典错误之一：`it does not own its data`. 另一个是`cannot resize an array that has been referenced`）。[（this question](https://stackoverflow.com/questions/15225006/ndarray-resize-passing-the-correct-value-for-the-refcheck-argument)中描述了另一个问题。）

由于您的使用决定`resize`来自对您其他问题的回答，因此我将在[此处](https://stackoverflow.com/questions/15422895/numpy-transform-non-contiguous-data-to-contiguous-data-in-place)发布我的其余答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:44:18.763

怎么样：

```
def resize(arr, shape):
    np.require(arr, requirements=['OWNDATA'])
    arr.resize(shape, refcheck=False) 
```

* * *

它似乎成功地调整了大小（并减少了内存消耗）：

```
import array
import numpy as np
import time

class Foo(np.ndarray):
    def __new__(cls, shape, dtype=np.float32, buffer=None, offset=0,
                strides=None, order=None):
        return np.ndarray.__new__(cls, shape, dtype, buffer, offset, strides, order)

    def __array_prepare__(self, output, context):
        print(output.flags['OWNDATA'], "PREPARE", type(output))
        return np.ndarray.__array_prepare__(self, output, context)

    def __array_wrap__(self, output, context=None):
        print(output.flags['OWNDATA'], "WRAP", type(output))
        output = np.ndarray.__array_wrap__(self, output, context)
        return output

def free_memory():
    """
    Return free memory available, including buffer and cached memory
    """
    total = 0
    with open('/proc/meminfo', 'r') as f:
        for line in f:
            line = line.strip()
            if any(line.startswith(field) for field in ('MemFree', 'Buffers', 'Cached')):
                field, amount, unit = line.split()
                amount = int(amount)
                if unit != 'kB':
                    raise ValueError(
                        'Unknown unit {u!r} in /proc/meminfo'.format(u=unit))
                total += amount
    return total

def gen_change_in_memory():
    """
    http://stackoverflow.com/a/14446011/190597 (unutbu)
    """
    f = free_memory()
    diff = 0
    while True:
        yield diff
        f2 = free_memory()
        diff = f - f2
        f = f2
change_in_memory = gen_change_in_memory().next

def resize(arr, shape):
    print(change_in_memory())
    # 0
    np.require(arr, requirements=['OWNDATA'])

    time.sleep(1)
    print(change_in_memory())
    # 200

    arr.resize(shape, refcheck=False)

N = 10000000
b = Foo((N,), buffer = array.array('f',range(N)))
c = Foo((N,), buffer = array.array('f',range(N))) 
```

产量

```
print(change_in_memory())
# 0

d = b+c
d = np.require(d, requirements=['OWNDATA'])

print(change_in_memory())
# 39136

resize(d, (24,))   # Increases memory by 200 KiB
time.sleep(1)
print(change_in_memory())
# -39116 
```

# c++ - C++ 类工厂宏

> ID：15424218
> 
> 赞同：1
> 
> 时间：2013-03-15T03:33:06.970
> 
> 标签：c++, macros, c-preprocessor, factory

我想制作一个宏来轻松创建新类，这些新类派生自同一个基类，具有不同的名称和略有不同的行为。

我已经有了

```
class FactoryBonusModifier
{
public:
   /// Function to overload
   virtual BonusModifierAbstract* createBonus() const = 0;
protected:
};

#define DEFAULT_BONUS_FACTORY_DECLARATION(FactoryName)      \
class Factory## FactoryName : public FactoryBonusModifier   \
{                                                           \
public:                                                     \
    virtual BonusModifierAbstract* createBonus() const;     \
};

#define DEFAULT_BONUS_FACTORY_IMPLEMENTATION(FactoryName)                 \
    BonusModifierAbstract* Factory## FactoryName::createBonus() const    \
    {  return new FactoryName();  }

DEFAULT_BONUS_FACTORY_DECLARATION(BonusModifierGoThroughWall); 
```

以及写在 cpp 中的实现部分。

我想知道我是否可以有一个宏来构建一个枚举和一个由这些新类组成的数组，并且尽可能少地复制/粘贴。

最后我想要类似的东西

```
enum BonusType{
Bonus1,
Bonus2,
...,
Nb_Bonus
};

FactoryBonusModifier* factories[Nb_Bonus] = 
{
    new FactoryBonus1(),
    new FactoryBonus2(),
    ...,
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T01:45:39.007

这是对@MichaelAnderson 解决方案的补充。

做同样的`FactoryBonusModifier`事情，但不要`enum`在 python 中生成 and 数组。在模板元编程中进行。

首先，一些样板。这些东西只是模板元编程的工具包：

```
template<typename...>
struct type_list {};

// get the nth type from a list:
template<int n, typename list>
struct nth_type;

// the 0th type is the first type:
template<0, typename t0, typename... types>
struct nth_type<0, type_list<t0,types...>> {
  typedef t0 type;
};
// the nth type is the n-1th type of the tail of the list:
template<int n, typename t0, typename... types>
struct nth_type<n, type_list<t0,types...>>:nth_type<n-1,type_list<types...>>
{};

// Get the index of T in the list.  3rd parameter is for metaprogramming.
template<typename T, typename list, typename=void>
struct index_in;

// If T is the first type in the list, the index is 0
template<typename T, typename t0, typename... list>
struct index_in<T, type_list<t0, list...>, typename std::enable_if<std::is_same<T,t0>::value>::type> {
  enum {value = 0};
};
// If T is not the first type in the list, the index is 1 plus the index of T
// in the tail of the list:
template<typename T, typename t0, typename... list>
struct index_in<T, type_list<t0, list...>, typename std::enable_if<!std::is_same<T,t0>::value>::type> {
  enum {value = index_in<T, type_list<list...>>::value+1};
};

// calls () on the arguments passed to it in order:
inline void do_in_order() {}
template<typename L0, typename... Lambdas>
void do_in_order( L0&& l0, Lambdas&&... lambdas ) {
  std::forward<L0>(l0)(); // std::forward is for insane corner cases, not usually needed
  do_in_order( std::forward<Lambdas>(lambdas)... );
} 
```

我们有`type_list`，它打包了一个类型列表以传递或操作。我们对 有两个操作`type_list`，`nth_type`它们从列表中的索引中提取一个类型，并`index_in`获取一个类型并返回它的索引。

最后，我们有一个名为 的辅助函数`do_in_order`，我们可以将其与参数包扩展一起使用来迭代参数包并对参数包中的每个元素执行操作。与其他 hack 相比，我更喜欢它，因为它很容易编写并且带来的惊喜更少。

一旦我们有了这套基本的工具，我们就可以很容易地编写一个工厂工厂：

```
// bad name for this template.  It takes the type list list and applies
// the producer template on each, then stores pointers to instances of those
// in an array of base pointers (well unique_ptrs).  It also provides
// a type-to-index mapping, an index-to-instance mapping, and a type-to
// instance mapping:
template<typename list, template<typename>class producer, typename base>
struct mapping;

template<typename... Ts, template<typename>class producer, typename base>
struct mapping<type_list<Ts...>, producer, base>
{
  enum Enum {
    min_value = 0,
    max_value = sizeof...(list)
  };
  template<typename T>
  static Enum GetIndex() constexpr { return (Enum)index_in<T, type_list<Ts...>>::value; }
  std::unique_ptr<base> Array[max_value];
  mapping() {
    do_in_order( [&Array](){
      Array[ GetIndex<Ts>() ].reset( new producer<Ts>() );
    }... );
  }
  // typed get:
  template<typename T>
  producer<T>* GetItem() const {
    return static_cast<producer<T>*>( Array[GetIndex<T>].get() );
  }
  // index get:
  base* GetItem(std::size_t n) const {
    if (n >= max_value)
      return nullptr;
    return Array[n].get();
}; 
```

它什么都不做。添加迈克尔斯的答案：

```
class FactoryBonusModifier
{
public:
  /// Function to overload
  virtual BonusModifierAbstract* createBonus() const = 0;
protected:
};

template<typename Bonus> 
class Factory : public FactoryBonusModifier
{
public:
  virtual Bonus* createBonus() const
  {
    return new Bonus();
  }
}; 
```

然后提供`Factory`和支持的类型列表`mapping`：

```
type_list< ItemBonus, InheritBonus, TaxBonus, PerformanceBonus > BonusList;

typedef mapping< BonusList, Factory, FactoryBonusModifier > MetaFactory_t;
MetaFactory_t MetaFactory; 
```

我们完成了。

`MetaFactory_t::Enum`是一种表示单个工厂的类型，以及它们在数组中的偏移量。要获得`Enum`给定奖金类型的价值，`MetaFactory_t::GetIndex<BonusType>()`给你。

如果您希望工厂为给定的奖励类型，`MetaFactory.GetItem<BonusType>()`将返回一个正确键入的指向`Factory<BonusType>`. 如果你有`Enum`value `n`，则`MetaFactory.GetItem(n)`返回一个指向`FactoryBonusModifier`基类的指针（`nullptr`如果`n`超出范围）。

工厂生命周期由`MetaFactory`对象的生命周期管理。

简而言之，代码生成通常在模板之前用于此类事情。但是可变参数模板使整数`<->`类型映射变得非常容易，并且可以生成令人印象深刻的代码。

作为附带的好处，这个版本包括许多 python 生成的版本没有的类型安全。我什至可以编写一个函数`n`，并调用传入的函子，并使用指向相关工厂的正确类型的指针，从而产生更多的类型安全性。

现在，如果您有超过 100 种奖励类型，则此技术会变得更加困难，因为已达到编译器递归限制。即使这样，也有一些技术允许以这种方式处理 1000 种类型的列表（但是，它们更尴尬）。

上面的代码还没有编译，所以几乎可以肯定包含错误，但基本设计是可靠的——我以前做过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T04:03:34.127

如果可以避免，我会避免为此使用宏。我会改用模板。

```
class FactoryBonusModifier
{
public:
   /// Function to overload
   virtual BonusModifierAbstract* createBonus() const = 0;
protected:
};

template<typename Bonus> 
class Factory : public FactoryBonusModifier
{
public:
    virtual Bonus* createBonus() const
    {
       return new Bonus();
    }
} 
```

所以棘手的一点是创建枚举和工厂列表。为此，我将生成代码，而不是尝试使用模板。您可以非常轻松地将代码生成集成到大多数构建过程中......但您需要阅读它。

我个人会使用一个非常简单的python脚本，比如

```
bonuses = ["BonusModifierGoThroughWall", "SomeOtherBonus" ];
print "enum BonusType {"
for x in bonuses:
  print "t"+x+","
print "nBonusTypes"
print "};"

print "FactoryBonusModifier* factories["+len(bonuses)+"] = {"
for x in bonuses:
  print "new Factory<"+bonus+">(),"
print "};" 
```

哪个应该输出：

```
enum BonusType {
  tBonusModifierGoThroughWall,
  tSomeOtherBonus,
  nBonusTypes
};

FactoryBonusModifier* factories[2] = {
  new Factory<BonusModifierGoThroughWall>(),
  new Factory<SomeOtherBonus>(),
}; 
```

# dynamic - 将具有固定位置和动态高度的容器垂直对齐到视口的中间？

> ID：15424219
> 
> 赞同：2
> 
> 时间：2013-03-15T03:33:09.410
> 
> 标签：dynamic, height, alignment, center, fixed

如何将容器（例如社交媒体插件）与**固定位置**和**动态高度**对齐，以便容器本身垂直位于视口中间？容器本身是可见的，因为我有背景图像和一些边框效果。容器内的内容也应该垂直对齐。

这就是我所拥有的，但它不起作用，容器由于某种原因甚至没有出现：

```
#socialpluginscontainer {
position:fixed;
width:100px;
height:70%;
padding-left:5px;
right:10px;
background: transparent url(../pictures/pagecontentoverlay.png);
-moz-box-shadow:0px 0px 4px #000 inset;
-webkit-box-shadow:0px 0px 4px #000 inset;
box-shadow:0px 0px 4px #000 inset;
}
#socialplugins {
text-align:center;
} 
```

HTML：

```
<div id="socialpluginscontainer">

      <div id="socialplugins">

           //code for social plugins

      </div>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-21T09:27:22.357

要在中心垂直对齐容器，您可以这样做。

```
#socialpluginscontainer {
    position:fixed;
    width:100px;
    height:70%;
    padding-left:5px;
    right:10px;

    top: 0;
    bottom: 0;
    margin: auto;

    background: tomato;
    -moz-box-shadow:0px 0px 4px #000 inset;
    -webkit-box-shadow:0px 0px 4px #000 inset;
    box-shadow:0px 0px 4px #000 inset;
} 
```

内容看 [小提琴](http://jsfiddle.net/dmrv3jym/)

# ruby-on-rails - Rails：我想在浏览器中显示一个值，但不想显示 application.htm.erb

> ID：15424220
> 
> 赞同：0
> 
> 时间：2013-03-15T03:33:15.380
> 
> 标签：ruby-on-rails

我正在使用 Sorcery Gem 进行登录操作。有一次，如果数据库中存在用户电子邮件和密码，我只想点击一个方法并返回 1 或 0。我可以用这段代码做到这一点，但 Rails 也会返回我不想要的 application.html.erb 文件。我所需要的只是出现的 0 或 1。没有其他的。想知道如何仅针对这一方法禁用 application.html.erb 模板。我试过了：

```
render :layout => false 
```

但这也阻止了我的@status 值出现在我的单行视图文件中。

```
def index
if @user = login(params[:email], params[:password])    
    @status = '1'
  else
    @status = '0'
  end 
end 
```

而我的 index.html.erb 文件只有一行： <%= @status %>

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T03:38:26.517

在控制器的顶部，您可以添加

`layout false, :only => [:index]`

而不是在行动层面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T05:53:46.257

另一种选择是渲染文本，这样您就不需要视图，也不必担心布局和实例变量。您的代码可以重写为

```
def index
  render text: login(params[:email], params[:password]) ? 1 : 0
end 
```

# java - 写入和复制文本文件

> ID：15424223
> 
> 赞同：1
> 
> 时间：2013-03-15T03:33:20.253
> 
> 标签：java, file-io, ioexception, filewriter, printwriter

我有一个任务：编写一个程序，该程序读取一个文件并将文件的副本写入另一个插入了行号的文件。我不确定在“for(int i =0; i < lines.length; i++)”部分的代码末尾要做什么。我需要为“行”部分做什么以及如何添加行号？谢谢

```
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.Scanner;

public class Question43 
{
public static void main(String[] args) throws IOException
{
    Scanner fileIn = new Scanner(new File("Chapter 11Assign43.txt") );

    FileWriter fileOut = new FileWriter("FileOut.txt");
    PrintWriter output = new PrintWriter(fileOut);

    String []array = new String[10];

    int indx = 0;
    while(fileIn.hasNext( ) )
    {
        array[indx] = fileIn.nextLine( );
    }

    fileIn.close();

    int num = 1;
    for(int i =0; i < lines.length; i++)
    {
        output.println(num+"\t"+array[i]);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:00:24.640

您可以使用 java.io.LineNumberReader 来计算行数

```
 LineNumberReader lr = new LineNumberReader(new FileReader("file1"));
    BufferedWriter bw = new BufferedWriter(new FileWriter("file2"));
    String line;
    while((line = lr.readLine()) != null) {
        bw.write(lr.getLineNumber() + " " + line);
        bw.newLine();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T03:35:38.587

为什么你不能做类似的事情，

```
for(int i =0; i < array.length; i++)
{
    output.println(i+"\t"+array[i]);
} 
```

只需使用变量`i`，因为无论如何它都会随着每个循环而增加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T03:36:35.780

想试试这个...

```
 BufferedReader reader = new BufferedReader(new FileReader("infile"));
    BufferedWriter writer = new BufferedWriter(new FileWriter("outfile"));
    String line;
    int lineNumber = 0;
    while((line = reader.readLine()) != null) {
        writer.write(++lineNumber + " " + line);
        writer.newLine();
    }
    writer.close();
    reader.close(); 
```

# c++ - 为什么我从这个合并排序中得到一个堆栈溢出错误？(C++)

> ID：15424228
> 
> 赞同：0
> 
> 时间：2013-03-15T03:34:00.277
> 
> 标签：c++, sorting, merge, stack-overflow

我正在尝试使用合并排序对已转换为无符号长整数的 IP 地址列表进行排序。该向量包含 18647 个数字，无论是否有区别。我之前使用 C# 进行过合并排序，但这是我第一次在 C++ 中尝试它，所以我不知道是否缺少一些简单的东西。这是我目前拥有的代码：

```
vector<unsigned long> Sorter::mergeSort( vector<unsigned long> v){
    if( v.size() <= 1 ){
        return v;
    }
    vector<unsigned long> left, right;
    int mid = v.size() / 2;
    for( int i = 0; i < mid; i++ ){
        left.push_back( v[i] );
    }
    for( unsigned int j = mid; j <= v.size(); j++ ){
        right.push_back( v[j] );
    }
    left = Sorter::mergeSort( left );
    right = Sorter::mergeSort( right );
    return Sorter::merge( left, right );
}

vector<unsigned long> Sorter::merge( vector<unsigned long> left, vector<unsigned long> right){
    vector<unsigned long> result;
    while( left.size() > 0 || right.size() > 0 ){
        if( left.size() > 0 && right.size() > 0 ){
            if( left[0] <= right[0] ){
                result.push_back( left[0] );
                left.erase( left.begin() );
            }else{
                result.push_back( right[0] );
                right.erase( right.begin() );
            }
        }else if( left.size() > 0 ){
            result.push_back( left[0] );
            left.erase( left.begin() );
        }else if( right.size() > 0 ){
            result.push_back( right[0] );
            right.erase( right.begin() );
        }
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T03:36:27.427

```
for( unsigned int j = mid; j <= v.size(); j++ )
                             ^^ 
```

您应该使用 j < v.size() 或 j <= v.size() -1 （数组索引从 0 开始），否则，您的索引超出范围错误。

同时，最好通过引用传递向量以节省一些成本。

还有一点，因为你使用了向量，所以有 18647 个数字是可以的，因为向量头的内存空间是在堆栈上分配的，但向量的元素是在自由存储上分配的。请参阅本主题以获取更多信息：

[分配向量时，它们使用堆上的内存还是栈上的内存？](https://stackoverflow.com/questions/8036474/allocating-vectors-memory-on-heap-or-stack)

# web2py - web2py 如何在新线程中使用 db.current？

> ID：15424231
> 
> 赞同：1
> 
> 时间：2013-03-15T03:35:13.953
> 
> 标签：web2py

```
 from gluon import current
import multiprocessing
def ip():
p = multiprocessing.Process(target=t,args=("hello",current.db))
p.start()
p.join()
print "start"
def t(arg1,arg2):
print "sub start %s"%arg1
print arg2.account.count() 
```

它报告错误线程.__local

如何在新线程中使用当前？（我想使用数据库来保存日期和会话）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-24T19:48:06.200

你问题的原因是因为`current`对象不是线程安全的，不应该那样使用。

> 由于这个原因，它们被放置在一个名为 current 的容器中，它是一个线程本地对象。[检查文档](http://www.web2py.com/books/default/chapter/29/04/the-core#Sharing-the-global-scope-with-modules-using-the-current-object)

如果你想从另一个线程访问你的数据库，你应该直接传递你的数据库对象。我以前做过，从另一个线程访问它从来没有任何问题。

# c++ - Boost 1.52.0 找不到 lexical_cast.hpp

> ID：15424234
> 
> 赞同：2
> 
> 时间：2013-03-15T03:35:24.640
> 
> 标签：c++, visual-studio-2010, boost

我正在使用 Visual Studio 2010。我尝试使用“ [C++ String Toolkit Library](http://www.partow.net/programming/strtk/index.html) ”。它在 boost 文件夹中找不到“lexical_cast”文件夹或“lexical_cast.hpp”。任何解决方案？它仅适用于Linux吗？

# php - 插入 LAST_INSERT_ID 问题

> ID：15424238
> 
> 赞同：1
> 
> 时间：2013-03-15T03:35:49.647
> 
> 标签：php, mysql

所以我有 2 个要在 php 中执行的查询。但是我得到一个错误。第一个查询中的第一个 id 是 auto inc，第二个查询中的第二个 id 不是 auto inc，但它通过外键连接到第一个。我想在查询执行时为它们两者捕获相同的 id。但是会弹出此错误。

> #1452 - 无法添加或更新子行：外键约束失败（`eangele`. `relationships`, CONSTRAINT `relationships_ibfk_3` FOREIGN KEY ( `id`) REFERENCES `nodes`( `id`) ON DELETE NO ACTION ON UPDATE NO ACTION）

```
$query = "insert into nodes(id,name,color,type,thumb)".
"values('','$nodename','#EBB056','star','$thumbFile')";
$result = $db -> Execute($query);
$querytwo = "insert into relationships(id,goingto,data)".
"values(LAST_INSERT_ID(),'$category','')";
$resulttwo = $db -> Execute($querytwo); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T03:37:33.650

`'LAST_INSERT_ID()'`是一个文字字符串。您想在没有撇号的情况下使用它，就像`values(LAST_INSERT_ID(),`.

如果这不起作用，您可以使用与您正在使用的 MySQL API 对应的 php 函数来获取最后一个插入 ID。我也只看到它与`SELECT`. 我认为它会`VALUES`像那样工作，但如果不是，你总是可以做一个插入/选择：

```
INSERT INTO relationships(id, goingto, data)
SELECT LAST_INSERT_ID(), ?, '' 
```

* * *

您的查询很容易被注入。你应该参数化它们。

# sql - T-SQL 中的用户定义聚合函数而不是 .net 程序集？

> ID：15424248
> 
> 赞同：2
> 
> 时间：2013-03-15T03:37:11.523
> 
> 标签：sql, sql-server, aggregate-functions, user-defined-functions

聚合函数很有用，例如：

```
select FinancialYear, PLFolder, Sum(PLDelta) SumDelta 
from PL group by FinancialYear, PLFolder 
```

但是，有时我需要进行更复杂的计算，例如计算波动率。

这可以通过用户定义的聚合函数来完成，用 C# 编程，编译为 CLR 程序集，然后导入 MSSQL。

是否可以在纯 T-SQL 中做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T08:50:09.513

**不。**

编写自定义聚合的唯一方法是通过 SQLCLR。这种限制背后有技术原因，主要与聚合需要有*状态*有关。

# jquery - 如何在 jquery 中禁用和启用锚点

> ID：15424250
> 
> 赞同：-1
> 
> 时间：2013-03-15T03:37:21.273
> 
> 标签：jquery, html, event-handling

我正在使用以下代码：

```
$(".ui-combobox-toggle").unbind("click"); 
```

Tt 正在禁用该按钮。

我遵循了许多其他选项，如下所示它不起作用。据我所知，使用 bind 应该可以工作，但事实并非如此。

我无法再次撤消它，我的意思是让它启用。

我使用了 bind、removeData、data 等。

我现在的主要要求是我有一个锚按钮，我必须在单击切换按钮时禁用它，并且必须再次在单击切换按钮时启用它。

但他们没有工作。有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T03:40:58.557

你可以试试这个：

**要禁用锚点：**

```
$("a").off('click').on('click', function(e) {
    e.preventDefault();
    return false;
}); 
```

**然后当您需要再次启用它时：**

```
$("a").off('click').on('click', function(e) {
    return true;
}); 
```

**样品在这里：**

[http://jsfiddle.net/38YPU/](http://jsfiddle.net/38YPU/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T03:42:07.380

来自 jQuery 的[`.bind()`](http://api.jquery.com/bind/).

> 从 jQuery 1.7 开始，该`.on()`方法是将事件处理程序附加到文档的首选方法。对于早期版本，该`.bind()`方法用于将事件处理程序直接附加到元素。

例子：

```
$('.ui-combobox-toggle').on('click', handler);
$('.ui-combobox-toggle').off('click', handler); 
```

# javascript - 在模态（菜鸟）中从 javascript 访问变量

> ID：15424255
> 
> 赞同：0
> 
> 时间：2013-03-15T03:38:03.810
> 
> 标签：javascript, jquery

如何让模型名称显示在模态中。换句话说，我如何正确地将变量从 javascript 传递给我的模态？

我有以下 javascript：

```
<script type="text/javascript">
$(document).on("click", ".cadlib", function () {
     var modelname = $('#modelname').text();
     $('#myModal').modal('show');
}); 
```

还有一个模态对话框：

```
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
<h3 id="myModalLabel">My Modal</h3>
</div>
<div class="modal-body">
Here's all the info you would want to know about {{modelname}} 
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T04:10:45.583

使用可以定位的占位符元素 - 替换`{{modelname}}`为`<span id="modelnameplaceholder"></span>`. 然后，您可以执行以下操作：

```
$('#modelnameplaceholder').replaceWith(modelname); 
```

**参考**：[http ://api.jquery.com/replaceWith/](http://api.jquery.com/replaceWith/)

**示例 jsFiddle**：http: [//jsfiddle.net/G82mk/](http://jsfiddle.net/G82mk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T03:44:16.257

在这一行之后：

```
var modelname = $('#modelname').text(); 
```

添加这个：

```
$('#myModal .modal-body').html($('#myModal .modal-body').html().replace('{{modelname}}', modelname)); 
```

# c# - 如何在数据库中加入登录用户和用户记录？

> ID：15424259
> 
> 赞同：1
> 
> 时间：2013-03-15T03:38:34.937
> 
> 标签：c#, sql, asp.net-mvc, asp.net-membership, authentication

我第一次使用带有 SQL 后端的 ASP.NET Membership Provider，我遇到了一些有异味的东西，这告诉我我要么做错了，要么一直没有想到。 ..

Membership 提供者创建了几个表，包括默认的，`webpages_Membership`它跟踪用户属性，如用户名。在我的应用程序数据库中，我有一个`employees`表来跟踪我的员工的所有用户数据。该`employees`表有一个唯一标识符`id`，用作多个其他表的外键列，以跟踪诸如谁更新了记录、创建了记录、分配给谁、谁留下了评论等。

我所做的第一个假设是我不想将业务逻辑和字段放在`webpages_Membership`表中，也不想`UserId`在外键关系中使用列。

我所做的第二个假设是我完全控制了注册过程，我可以根据电子邮件地址字段简单地将`webpages_Membership`表格和我的`employees`表格连接在一起，因为用户的登录名将被迫成为他们的电子邮件。

### 现在在我的脑海里闻起来很可怕......

取这个值`User.Identity.Name`并在我的数据库中查询`employees`表只是为了`Employee`填充一个对象，以便我可以`Id`在记录上设置一个字段，这似乎是错误的。

*   我应该为此做些什么？
*   将会员数据和业务对象数据连接在一起的最佳方式是什么？
*   我应该这样做吗？
*   我是否应该将 Employee 对象存储在用户会话中，以免每次事务都返回数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:18:24.370

您使用的是哪个版本的 ASP.NET？

因为如果您使用一些最新版本，您可以使用 SimpleMembershipProvider，它允许您使用不同的模型和数据库结构。

[有关更多详细信息，请查看 Jon Galloway 的这篇博文。](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3a%20jongalloway%20%28Jon%20Galloway%29&utm_content=Google%20Reader)

# php - 页面跳转到页面中间

> ID：15424263
> 
> 赞同：0
> 
> 时间：2013-03-15T03:39:10.897
> 
> 标签：php, javascript, html, anchor

我试图弄清楚为什么我会在我们的[推荐页面上跳转页面](http://mountainfoodstorage.com/index.php/testimonials)。如果一开始没有发生，请单击主导航中的链接，然后再次单击推荐链接。它位于联系页面的正上方。

我一直在寻找页面锚点，但找不到。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T03:42:59.377

这可能是因为焦点位于页面中的第一个输入，即页面末尾。

注意：您有一个关于`$("#year")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T03:57:41.553

我刚刚在 Magento 中发现了这个问题...解决方法是更改​​ contacts/form.phtml 中的以下代码（或从任何地方调用您的表单）。

前：

```
<script type="text/javascript">
//<![CDATA[
    var contactForm = new VarienForm('contactForm', true);
//]]>
</script> 
```

后：

```
<script type="text/javascript">
//<![CDATA[
    var contactForm = new VarienForm('contactForm', false);
//]]>
</script> 
```

谢谢！

# html-lists - 如果我调用一个 div 另一个 div 想要隐藏，我有五个 div？

> ID：15424269
> 
> 赞同：-1
> 
> 时间：2013-03-15T03:39:52.020
> 
> 标签：html-lists

这里我使用了任何菜单弹出窗口。虽然它会显示默认窗口。当我 hoover 子菜单 1 窗口发生变化。它会经常发生。我研究了我的程度。我无法得到解决方案。请给我一个更好的解决方案。我的编码是Follows

```
<div class="csn-navigation" style="background-color:Fuchsia;">
<div class="wrapper">
    <ul class="navigation">
        <li id="cars-for-sale" >
            <a href="submenu1.aspx">Main Menu
                <i class="icon-caret">&nbsp;</i>
            </a>
                <div id="dd" class="menu-panel">
                    <span class="arrow">&nbsp;</span>
                        <div class="menu-links">
                            <ul class="menu-links" ">
                                <li id="" class="vip first" onmouseover='fnSubhover("er");'>
                                    <a href="submenu1.aspx">Sub Menu1</a>
                                </li>
                                <li id="" class="vip">
                                    <a href="submenu1.aspx">Sub Menu2</a>
                                </li>
                                <li id="" class="vip">
                                    <a href="submenu1.aspx">Sub Menu3</a>
                                </li>
                                <li id="" class="vip">
                                    <a href="submenu1.aspx">Sub Menu4</a>
                                </li>
                            </ul>
                        </div>
                        <div id="" class="menu-content" > <%-- Content of Default Menu --%>
                            <div class="category browse-body-types">
                                <ul>
                                    <li>
                                        <a href="submenu1.aspx">
                                            <img src="forward.png"/>
                                        </a>Window1
                                     </li>
                                 </ul>
                              </div>

                    </div>
                    <div id="Div1" class="menu-content" > <%-- Content of Sub Menu1 --%>
                            <div class="category browse-body-types">
                                <ul>
                                    <li>
                                        <a href="submenu1.aspx">
                                            <img src="forward.png"/>
                                        </a>Window1
                                     </li>
                                 </ul>
                              </div>

                    </div>
                 </div>

          </li>
     </ul>
 </div> 
```

```
 function fnSubhover(id) {
                document.getElementById("d1").style.display = "block";
                document.getElementById("dd").style.display = "none";

            }

        </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T03:45:15.670

如果我理解正确，你想让除那个之外的所有 div 都隐藏吗？您可以通过简单的查询来做到这一点：

```
function fnSubhover(id) {
    $('div').css('display','none');
    $('#d1').css('display','block');
} 
```

# perl - HTML::FormHandler 只有 1 个选项无法正确呈现

> ID：15424272
> 
> 赞同：0
> 
> 时间：2013-03-15T03:40:06.037
> 
> 标签：perl, render, forms, catalyst

我正在使用[HTML::FormHandler](https://metacpan.org/module/HTML::FormHandler)并动态构建表单，如下所示：

```
my $form = HTML::FormHandler->new(
          name => 'types',
          field_list => [
              parent_id => {
                  type => 'Select',
                  label => 'Parent',
                  required => 1,
                  options => [{value=>'test',label=>'test'}],
              },
          ],
); 
```

每当我像上面那样只传递一个选项时，这就是为表单呈现的输出：

```
<select name="parent_id" id="parent_id">  
    <option id="parent_id.0" value="test">  </option>  
    <option id="parent_id.1" value="test">  </option>
</select> 
```

但是，结果输出应该是：

```
<select name="parent_id" id="parent_id">  
    <option id="parent_id.0" value="test">test</option>  
</select> 
```

但是一旦我添加了一个选项，例如：

```
options => [{value=>'test',label=>'test'},{value=>'test2',label=>'test2'}], 
```

然后输出正确呈现并变为：

```
<select name="parent_id" id="parent_id">  
    <option id="parent_id.0" value="test">test</option>  
    <option id="parent_id.1" value="test2">test2</option>
</select> 
```

这是`HTML::FormHandler`' 部分的错误，还是我在这里遗漏了什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:06:10.853

可能选择类型至少需要两个选项。如果您必须使用 select 来选择一个选项，并且不能使用复选框或单选按钮（例如，如果选择列表是动态生成的），您是否可以将第一个选项设置为默认的非值，并带有“请选择”。 ..' 标签。

# java - C/C++ 中的跨平台兼容性（从 Java 移植项目）？

> ID：15424273
> 
> 赞同：9
> 
> 时间：2013-03-15T03:40:15.250
> 
> 标签：java, c++, c, networking, cross-platform

我用 Java/JavaFX 编写了一个程序，因为我需要跨平台支持。随着我的进步，我需要做一些在 Java 中无法实现的低级操作系统网络操作。我从 Runtime.exec() 开始，转移到 JNA/JNI，现在我担心维护 Java 的操作系统兼容性最终会比仅仅移植到本机应用程序更多的工作。

做这个的最好方式是什么？

我知道 *nix 和 windows 支持 GTK+，所以我想我会在我的 UI 中使用它。为每个操作系统维护不同版本的应用程序有多困难？您能否推荐一个起点来编写需要跨平台但仍具有低级别操作系统访问权限的东西？我有很多 Java 经验（以及大量使用 OpenGL 的 C++），但我以前从来不用关心 Linux 以外的任何东西。

*或者，有没有一种好方法可以从 Java 构建原始数据包、发送 ICMP ping 以及执行其他低级网络任务？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T04:38:18.923

由于您对本机代码的要求似乎与网络数据包有关，因此您可以查看[JPCAP](https://github.com/mgodave/Jpcap)。注意：JPCAP 有两个分支：一个托管在 SourceForge（包`net.sourceforge.jpcap.net`）上，不支持发送，另一个我在这里链接（包`jpcap`，最初托管在`http://netresearch.ics.uci.edu/kfujii`）。我认为这对于大多数“低级”网络操作（包括侦听混杂模式、发送非 IP 数据报、ICMP 等）来说已经足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T04:31:42.727

你的问题很笼统，所以我将在这里列出一些最佳实践。如果您相应地编辑您的问题，我可以缩小范围。

**1-**最重要的是编译器和构建环境。这可能很容易选择，所有主要平台都支持**Clang**和**GCC 。**但是，构建环境有点棘手。仅仅一个 Makefile 并不适用于所有平台。相反，请选择[**CMake**](http://www.cmake.org/)或[**SCons 之**](http://www.scons.org/)类的东西。这将帮助您更轻松地管理源代码并在所有系统上生成适当的 makefile。

**2-**您可能希望在所有平台上构建相同的 GUI。在这种情况下，您可以使用您提到的[**Qt**](http://qt-project.org/)或[**GTK+ 。**](http://www.gtk.org/)

**3-**文件 I/O。如果你有很多文件 I/O，你可能想看看[**Boost File System**](http://www.boost.org/doc/libs/1_43_0/libs/filesystem/doc/index.htm)。

**4-**对于您使用的所有其他库，请确保它们在所有平台上都受支持。一般来说，我建议使用历史上维护良好的库，比如**Boost**。

**5-最后，使用**[PIMPL Idiom](http://en.wikipedia.org/wiki/Opaque_pointer)隐藏特定于平台的代码。

如果您想深入了解跨平台 C++ 编程，这里有一本好书：[C++ 中的跨平台开发：构建 Mac OS X、Linux 和 Windows 应用程序](https://rads.stackoverflow.com/amzn/click/com/032124642X)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T22:40:52.787

Qt 可能是跨平台 GUI 的最佳选择。如果您想针对 Windows（或 Mac），我不认为 GTK+ 是一个很好的选择。然而，也许这已经改变了。自从我上次检查以来已经有一段时间了。另见[这篇文章](https://stackoverflow.com/questions/199604/gtk-or-qt-under-windows)。

Boost 和 Poco 都是很好的跨平台 C++ 库。它们还提供网络库（boost asio 和 Poco Net）。

[boost](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/examples.html#boost_asio.examples.icmp)和[Poco](http://www.appinf.com/docs/poco/Poco.Net.ICMPClient.html)都支持发送 ICMP ping 请求。

我不确定这些库是否允许您构建自己的以太网帧和 IP 数据包。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T07:33:52.050

它更多的是设计的东西，

1.  尽可能使用跨平台库（例如：boost）
2.  编写特定于平台的代码并在其之上编写良好的抽象层。

例如：Windows/Signaling、Linux/Signaling、Signaling Here、

*   **Windows/Signaling**是 Windows 平台特定的信令代码
*   **Linux/Signaling**是 Linux 平台特定的信令代码
*   **信令**是平台抽象层，编译时我们可以决定平台

# postgresql - 将 postgres 与 sequelize.js 方言连接时出现问题

> ID：15424278
> 
> 赞同：1
> 
> 时间：2013-03-15T03:40:26.600
> 
> 标签：postgresql, sequelize.js

我有一个 postgres 数据库，想将 sequelize 上的方言设置为 postgres。我主要遵循了 sequelize.js 网站上的所有说明：

```
var Sequelize = require("sequelize");
var sequelize = new Sequelize('database', 'postgres', 'pword', {
host: "localhost", //your server
port: 5432 //server port
dialect: 'postgres' 
}); 
```

我还在 package.json 文件中做了这些修改：

```
"name": "hello-world",
"description": "hello world test app",
"version": "0.0.1",
"private": true,
"dependencies": {
  "express": "3.1",
  "pg": "0.8.8",
  "sequelize": "1.6.x"
} 
```

但是，当我尝试运行 node app.js 时，出现此错误： dialect: 'postgres' ^^^^^^^ SyntaxError: Unexpected identifier at Module._compile (module.js:437:25)

我真的很困惑发生了什么，以及为什么我仍然收到此错误。有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:33:02.470

尝试删除主机和端口之后的注释行。

# ios - 关键窗口方向

> ID：15424280
> 
> 赞同：2
> 
> 时间：2013-03-15T03:40:41.107
> 
> 标签：ios, ios6

我想在关键窗口上方添加一个视图，以便它可以显示在每个页面上。但是当改变方向时，视图不会相应地旋转。我认为这是在 ios6 之后导致的，其中苹果更改了旋转方法。所以我的问题是如何解决旋转问题，或者是否有其他简单的方法可以在每个页面上方显示视图。谢谢。

为尼克 C 更新：

我通过创建两个 UIWindow 对象来遵循您的解决方案。但是当旋转设备时，它会显示黑色背景和半透明的顶部窗口。旋转动画完成后，会显示原始窗口。我认为这对用户体验不利。您对如何解决这个问题有任何想法吗？这是我的代码：

```
 self.topWindow = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.watermarkViewController = [[WatermarkViewController alloc] init];
    self.topWindow.rootViewController = self.watermarkViewController;
    self.topWindow.windowLevel = UIWindowLevelAlert;
    [self.topWindow makeKeyAndVisible];
    self.topWindow.userInteractionEnabled = NO;

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[ContentViewController alloc] initWithNibName:@"ContentViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T04:56:18.923

我认为您的问题出在 iPad 上，您可以像这样将子视图添加到窗口中。

```
 [[[[[UIApplication sharedApplication].windows objectAtIndex:0] subviews] objectAtIndex:0] addSubview:self.myView]; 
```

您可以从[这里获得更多信息](https://stackoverflow.com/questions/2508630/orientation-in-a-uiview-added-to-a-uiwindow)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T06:52:51.250

初始化一个 UIWindow 并将 windowLevel 设置为 UIWindowLevelAlert 创建一个 UIViewController 子类来保存您的视图，使其成为窗口的 rootViewController，并覆盖 -[UIViewController supportedInterfaceOrientations] 方法

# apache-flex - 从日期 Flex 获取毫秒数

> ID：15424281
> 
> 赞同：0
> 
> 时间：2013-03-15T03:40:45.977
> 
> 标签：apache-flex, date-format, milliseconds

嗨，我有一个 csharp 应用程序和一个 flex 应用程序，在这两个应用程序中我都得到了 currentdatetime 并格式化它。与使用 csharp 应用程序时获得的毫秒数相比，我在 flex 应用程序中获得的毫秒数似乎落后了。我不确定我是否做错了什么，但这是我格式化日期的 flex 函数。请让我知道这是否是在 flex 中获取以下日期格式 yyyy/MM/dd hh:mm:ss.fff 的正确方法。

```
 private function GetCurrentDateTime():void
{
            var dateFormatter:DateFormatter = new DateFormatter();
            dateFormatter.formatString = 'YYYY/MM/DD HH:NN:SS'; 

            var dtCurrent:Date = new Date();                
            currDateTime = String(dateFormatter.format(dtCurrent) + '.' + dtCurrent.getMilliseconds());                             
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:50:12.277

查看 DateFormatter 类的文档[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/formatters/DateFormatter.html#formatString](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/formatters/DateFormatter.html#formatString)

我相信您需要的格式字符串是`YYYY/MM/DD HH:NN:SS.QQQ`

注意：HH 返回 1-24 的小时数。JJ 可用于返回 0-23 的小时数

# meteor - 将包添加到已部署的流星应用程序后该怎么办？

> ID：15424283
> 
> 赞同：0
> 
> 时间：2013-03-15T03:40:59.103
> 
> 标签：meteor

我在已经部署的流星应用程序中添加了一些包，例如带有流星的 account-ui……但是更改没有出现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:24:09.060

你必须停止你的应用程序，然后运行

> 流星添加**some_package**

并运行

> 流星

再次启动您的应用程序包应自动部署。

# javascript - 从 iframe 内的父窗口调用 javascript 函数，但 iframe src 来自远程机器

> ID：15424286
> 
> 赞同：0
> 
> 时间：2013-03-15T03:41:02.137
> 
> 标签：javascript, html, iframe

首先，我的页面中有这个 iframe。

```
<iframe src="https://192.168.100.87/index.html">
   <p>Browser does not support iframe</p>
</iframe> 
```

我的页头标签中有以下脚本。

```
<head>
   <script type="text/javascript">
       function callMe(){
        alert('called');
       }
   </script>
</head> 
```

我有来自远程机器的 index.html 的以下代码。

```
<body>
   <input type="button" value="Click" onClick="window.parent.callMe()" />
</body> 
```

如您所见，我正在调用包含 iframe 的主页的函数。但不幸的是我无法调用该函数。

这可能吗，我在这里错过了什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T03:55:17.597

您不能访问另一个域的窗口的属性或调用方法。但是，您可以使用`postMessage`将消息发送到其他域的框架（请参阅[https://developer.mozilla.org/en-US/docs/DOM/window.postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)）。

试试`parent.postMessage('testing', '*');`。第一个参数是要发送的数据；第二个是您要将其发送到的窗口的域。使用`'*'`让您将其发送到任何主机，但为了更好的安全性，您应该使用父级的实际域。

然后在您的父页面中：

```
window.addEventListener('message', function(event) {
    if (event.data == 'testing') {
        callMe();
    }
}); 
```

这仅适用于现代浏览器。如果您需要支持较旧的浏览器（例如 IE 7 或更早版本），请寻找 postMessage polyfill。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T03:43:55.003

除非运行代码的机器也位于 192.168.100.87，否则这是不可能的。您无法从不同来源的页面访问任何内容。请参阅[https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript](https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript)

# iphone - MapKit 和 MapView 选择实现基于地图的应用程序

> ID：15424288
> 
> 赞同：0
> 
> 时间：2013-03-15T03:41:28.550
> 
> 标签：iphone, google-maps, integration

我是 ios developemt 的新手，我有一个困惑，请清除它，如果我在 iOS6 中使用 MKMapView 它的显示谷歌或苹果地图，并且在苹果文档中有一个名为 Map App 的术语，据我说它的内置应用程序我们可以使用它请直接告诉我。我说对了吗。

请提前谢谢你。

# sql - 在 postgresql 中生成系列时获得部分周

> ID：15424292
> 
> 赞同：1
> 
> 时间：2013-03-15T03:42:10.120
> 
> 标签：sql, postgresql, postgresql-9.1, generate-series

我正在尝试按周生成一系列日期，从 2013 年 3 月 1 日 00:00:00 到 2013 年 3 月 14 日 23:59:59。我到目前为止的查询看起来像这样

```
SELECT GREATEST(date_trunc('week', dates.d), 
                date_trunc('month',dates.d)) as start
FROM generate_series(to_timestamp(1362096000),
                     to_timestamp(1363305599), '1 week') as dates(d) 
```

**输出：**

```
 start
------------------------
 2013-03-01 00:00:00+00
 2013-03-04 00:00:00+00 
```

该查询部分有效，因为它返回如您所见的前两周，但它缺少从 2013 年 3 月 11 日到 2013 年 3 月 14 日的那一周。有没有办法获得最后一周，即使它还没有结束？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T18:47:26.993

快点：

```
SELECT generate_series(date_trunc('week', '2013-03-01'::date + 6)
                      ,date_trunc('week', '2013-03-14'::date)
                     ,'1 week')::date AS day
UNION  SELECT '2013-03-01'::date
ORDER  BY 1; 
```

详细解释见相关答案：
[Generate series of a month by week interval in Postgresql](https://stackoverflow.com/questions/15437940/generate-series-of-a-month-by-week-interval-in-postgresql/15438508#15438508)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T06:29:04.790

您要求`generate_series()`从 3 月 1 日午夜开始，并在 2 周减去 1 秒后结束。

但是，在请求的时间间隔内，只能生成 2 个相隔 1 周的值。如果您将间隔仅延长**1 秒**，`generate_series()`则将生成第三行，并且您的查询将按预期开始工作 - [**SQLFiddle 演示**](http://www.sqlfiddle.com/#!12/d41d8/585)：

```
SELECT GREATEST(
    date_trunc('week', dates.d), 
    date_trunc('month',dates.d)) as start
FROM generate_series(
    to_timestamp(1362096000),
    to_timestamp(1363305599+1), '1 week') as dates(d) 
```

# delphi - 如何通过多字符分隔符拆分字符串？

> ID：15424293
> 
> 赞同：18
> 
> 时间：2013-03-15T03:42:24.310
> 
> 标签：delphi, delphi-2010

是否有 Delphi 函数通过多字符分隔符而不是单个字符来分割字符串？

例如，当我以这种方式使用该功能时：

```
SplitString('Whale<->Mammal<->Ocean', '<->') 
```

我会得到这三个字符串的结果：

```
'Whale', 'Mammal', 'Ocean' 
```

Delphi中有这样的功能吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-15T08:17:21.260

There is another quite simple solution using TStringList. Change the LineBreak:

```
procedure TForm208.Button1Click(Sender: TObject);
var
  lst: TStringList;
begin
  lst := TStringList.Create;
  try
    lst.LineBreak := '<->';
    lst.Text := 'Whale<->Mammal<->Ocean';
    Memo1.Lines := lst;
  finally
    lst.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-15T07:51:55.967

您可以查看我的 StringUtils.pas 单元，它是[Cromis 库的一部分](http://www.cromis.net/blog/downloads/)

那里有一个简单的文本标记器。但可能正是您所需要的。界面是这样的

```
TTextTokenizer = class
  private
    FTokens: TTokens;
    FDelimiters: array of ustring;
  public
    constructor Create;
    procedure Tokenize(const Text: ustring);
    procedure AddDelimiters(const Delimiters: array of ustring);
    property Tokens: TTokens read FTokens;
  end; 
```

支持字符串作为分隔符，也支持多个分隔符。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-15T08:38:43.827

如果您安装了[JCL](http://wiki.delphi-jedi.org/index.php?title=JEDI_Code_Library)，那么在`jclStrings`单元中会有`StrToStrings`以下程序：

```
var sl: TStringList;
begin
  sl := TStringList.Create;
  StrToStrings('Whale<->Mammal<->Ocean' , '<->' , sl); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-15T04:13:55.833

我不知道 Delphi 是否有一个使用字符串作为分隔符的标准拆分过程。但是您可以自己编写它有或没有：

```
procedure SplitStr(const Source, Delimiter: String; var DelimitedList: TStringList);
var
  s: PChar;

  DelimiterIndex: Integer;
  Item: String;
begin
  s:=PChar(Source);

  repeat
    DelimiterIndex:=Pos(Delimiter, s);
    if DelimiterIndex=0 then Break;

    Item:=Copy(s, 1, DelimiterIndex-1);

    DelimitedList.Add(Item);

    inc(s, DelimiterIndex + Length(Delimiter)-1);
  until DelimiterIndex = 0;
  DelimitedList.Add(s);
end;

procedure TForm1.Button1Click(Sender: TObject);
var
  sl: TStringList;
begin
  sl:=TStringList.Create;
  SplitStr('delphi++split++string++','++',sl);
  //do something with the list
  sl.Free;
end; 
```

希望能帮助到你..

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-15T04:21:15.323

'from box' 没有这样的功能。如果您的字符串包含常规的“好”文本，那么您可以使用带有奇异符号的 StringReplace，否则使用 Pos 或 IdStrings.SplitString 编写自己的拆分函数并不难（如果它在 D2010 中可用）

```
function SplitStringByStr(const S, StrDelimiter: string): TStringDynArray;
var
  tmp: string;
begin
  tmp := StringReplace(S, StrDelimiter, '`', [rfReplaceAll]);
  Result := SplitString(tmp, '`');
end; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-22T10:54:00.540

较新版本的 Delphi 有一个 stringhelper 可以做到这一点：

```
var
  lStr: string;
  lSplitStr: TArray<string>;
begin
  lStr := 'Whale<->Mammal<->Ocean';
  lSplitStr := lStr.Split('<->');
end; 
```

现在 lSplitStr 是一个包含 3 个元素的数组：“鲸鱼”、“哺乳动物”、“海洋”。

# android - 设备被阻止时的 Android 屏幕方向

> ID：15424294
> 
> 赞同：1
> 
> 时间：2013-03-15T03:42:31.370
> 
> 标签：android, screen-orientation

当设备被阻止并且屏幕关闭时，是否有任何方法可以获取屏幕方向？我试过了

```
getResources().getConfiguration().orientation 
```

和

```
Display display = ((WindowManager) mContext
    .getSystemService(Context.WINDOW_SERVICE))
    .getDefaultDisplay();
int rotation = display.getRotation(); 
```

但是当屏幕关闭时，无论实际方向是什么，它们都分别返回“纵向”和“0”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T04:07:06.520

我不明白“*被阻止*”是什么意思，但是如果屏幕关闭，**操作系统**似乎将方向设置为**Portrait**。您可以通过将应用设置为**横向**模式、将其平放并关闭屏幕来测试这一点。当您再次打开屏幕时，该应用程序现在处于**纵向**模式。如果设备不是平的，您可以明显地看到方向从**纵向**变为**横向**。

# android - 如何在每个微调器项目上创建具有不同字体的微调器？

> ID：15424296
> 
> 赞同：1
> 
> 时间：2013-03-15T03:42:41.707
> 
> 标签：android, android-spinner

基本上我想让用户选择文本的字体。如果我扩展课程，Spinner 看起来可以解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T03:48:43.163

嗯...您必须制作自定义 Spinner 才能实现此目标。

使用 ListView 为您的列表视图制作自定义微调器或布局，在每个索引中使用不同的字体并将其集成到您的项目中。

希望你有想法。随意发表评论。

# training-data - 何时对数据进行中心化/规范化以增加泛化？

> ID：15424316
> 
> 赞同：1
> 
> 时间：2013-03-15T03:44:42.923
> 
> 标签：training-data

给定一个高维数据集并对数据应用 PCA 或其他一些降维技术，通常需要居中，有时需要标准化。当给定数据集以分解为训练/测试/验证集时，似乎只应在训练集上进行居中和归一化，并且应保存每个变量的这些值（均值/标准差）。然后，当计算验证/测试错误率时，验证/测试数据集应该集中并归一化，对应于为训练数据计算的值，而不是它们自己的这些参数的内在值。这通常正确吗？

# excel - 在 Excel VBA 中列出打开的窗口的最简单方法是什么？

> ID：15424320
> 
> 赞同：0
> 
> 时间：2013-03-15T03:45:16.480
> 
> 标签：excel, vba

我知道我本可以在 Google 上搜索，但我对此已经生疏了，以至于我不确定我应该搜索哪些术语。在这里听到您的建议会有所帮助。

例子：

```
Sub Macro1()
'
' Macro1 Macro
'

'
    Windows("FL_bounces.csv").Activate
    Windows("auto_dealers_FL.csv").Activate
    Windows("FL_bounces.csv").Activate
    Windows("auto_dealers_FL.csv").Activate
End Sub 
```

除非我不知道打开的窗口的名称。

编辑#2：

```
Sub Macro1()
'
' Macro1 Macro
'

'
    Dim wn, contacts, report As Excel.Window
    Dim windows(1 To 100) As Excel.Window
    Dim i As Integer

    i = 1
    For Each wn In Application.windows
        windows(i) = wn
        i = i + 1
    Next wn

    If IsEmailValid(windows(1).Cells(1, 1)) = True Then
        report = windows(1)
        contacts = windows(2)
    Else
        contacts = windows(1)
        report = windows(2)
    End If

End Sub 
```

你觉得这个修改有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T04:54:02.833

这将列出立即窗格中所有当前打开的窗口：

```
Sub ListWindows()
Dim wn As Excel.Window
For Each wn In Application.Windows
    Debug.Print wn.Caption
Next wn
End Sub 
```

或者，如果您想激活它们，如您的示例代码中所示

```
Sub ActivateWindows()
Dim wn As Excel.Window
For Each wn In Application.Windows
    wn.Activate
    MsgBox wn.Caption & " Window Activated"
Next wn
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T05:58:33.063

试试 AutoIT。您需要参考 AutoIT dll。这是您可以下载 autoit dll [http://www.autoitscript.com/site/autoit/的链接](http://www.autoitscript.com/site/autoit/)

AutoIt 中的变体数据类型本身支持窗口句柄 (HWND)。窗口句柄是窗口每次创建时分配给窗口的特殊值。当您有句柄时，您可以在任何使用标题/文本约定的函数调用中使用它来代替标题参数。使用窗口句柄的好处是，如果您打开了应用程序的多个副本 - 它们具有相同的标题/文本 - 您可以在使用句柄时唯一地识别它们。当您为标题参数使用窗口句柄时，文本参数将被完全忽略。

WinGetHandle、WinList 和 GUICreate 等各种函数都会返回这些句柄。重要的是要注意窗口句柄不属于数字或字符串——它是它自己的特殊类型。

```
Public Sub TestingAutoIT()
    Dim autoItObj As AutoItX3
    Set autoItObj = New AutoItX3

    With autoItObj    
        .WinActivate ("A Window Name")        
    End With

    Set autoItObj = Nothing
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-27T14:37:13.077

今天我找到了[VBA Express 发布](http://www.vbaexpress.com/kb/getarticle.php?kb_id=52)的解决方案。它将列出活动表上所有打开的窗口。

请注意，“窗口”不一定是用户通常所想的……有些窗口是许多窗口的集合，就像 Windows 看到的那样。

# ruby-on-rails - find_or_create_by_field1_and_field2 没有按预期工作

> ID：15424322
> 
> 赞同：0
> 
> 时间：2013-03-15T03:46:01.363
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个包含一些现有类别的应用程序，并希望向其添加更多类别。由于引用了一些其他类别，我想我会将其添加到种子文件中。

我不想覆盖任何现有的类别，所以我使用 find_or_create 方法添加一个`:name`和`:category_parent_id`基于这个问题。

[Rails find_or_create 通过多个属性？](https://stackoverflow.com/questions/3046607/rails-find-or-create-by-more-than-one-attribute)

所以我将以下内容添加到我的种子文件中

```
categories = Category.find_or_create_by_name_and_category_parent_id(
  {name: "TV", category_parent_id: 2},
  {name: "Oven", category_parent_id: 2},
  {name: "Fridge", category_parent_id: 2},
  {name: "Microwave", category_parent_id: 2},
  {name: "Toaster", category_parent_id: 2}
) 
```

如果在类别表中没有匹配条目时在控制台中运行它，我得到的输出如下

```
Category Load (0.5ms)  SELECT "categories".* FROM "categories" WHERE "categories"."name" = 'Microwave' AND "categories"."category_parent_id" = 2 LIMIT 1
   (0.3ms)  BEGIN
  Category Exists (0.6ms)  SELECT 1 AS one FROM "categories" WHERE "categories"."name" = 'Microwave' LIMIT 1
  SQL (18.8ms)  INSERT INTO "categories" ("category_parent_id", "category_type", "created_at", "name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["category_parent_id", 2], ["category_type", nil], ["created_at", Fri, 15 Mar 2013 14:41:53 EST +11:00], ["name", "Microwave"], ["updated_at", Fri, 15 Mar 2013 14:41:53 EST +11:00]]
   (0.8ms)  COMMIT
 => #<Category id: 31, name: "Microwave", created_at: "2013-03-15 03:41:53", updated_at: "2013-03-15 03:41:53", category_type: nil, category_parent_id: 2> 
```

所以这只从种子文件中添加了 1 个条目。如果这些都不存在，为什么不全部输入？

谢谢你的帮助。:)

* * *

**感谢 JIM 和 JOHN 的回答**

感谢 Jim 和 John，我能够更改我的代码以使用以下解决方案。

```
category_options = [
  {name: "TV", category_parent_id: 2},
  {name: "Oven", category_parent_id: 2},
  {name: "Fridge", category_parent_id: 2},
  {name: "Microwave", category_parent_id: 2},
  {name: "Toaster", category_parent_id: 2}
]

categories = category_options.each do |c|
Category.find_or_create_by_name_and_category_parent_id(c)
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:50:46.107

您不能使用 . 创建多条记录`find_or_create_by_*`。它只会创建一条记录。你看到的有点奇怪，但我怀疑它与非确定性哈希排序和一些幸运的参数解释有关。

查看[activerecord-import](https://github.com/zdennis/activerecord-import)以一次插入多条记录。它不会像 find-or-create-by 那样容易。您必须单独查找并弄清楚要创建什么，理想情况下是在事务或其他东西中，但它会表现得相当好。

# ruby - 使用 RegExp 格式化字符串以设置分隔符

> ID：15424323
> 
> 赞同：3
> 
> 时间：2013-03-15T03:46:06.567
> 
> 标签：ruby, regex, delimiter, gsub

我正在尝试按如下方式格式化字符串

确保所有数字都使用破折号作为分隔符。示例：480.01.4430 和 480014430 都将是 480-01-4430。

这是我到目前为止想出的，但我不明白为什么它不起作用

```
def format_ssns(string)
  ssn = string[/\d{9}/]
  ssn.gsub(/\d{9}/, /\d{3}-\d{2}-\d{4}/)
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T03:56:44.810

奇怪的是，您没有收到异常：[gsub](http://www.ruby-doc.org/core-2.0/String.html#method-i-gsub)的第二个参数必须是字符串（或可以转换为字符串的东西），而不是正则表达式。

这是一个工作示例：

```
ssn = '123456789'
ssn.gsub(/(\d{3})(\d{2})(\d{3})/, '\1-\2-\3')
# => "123-45-6789" 
```

原始字符串中有三组数字。我们将每个组括在括号中。每对括号创建一个*匹配组*。在替换字符串中，我们使用`\1`包含第一个匹配组、`\2`包含第二个匹配组和`\3`包含第三个匹配组，它们之间使用破折号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T03:56:45.627

如果您不关心字符串中的任何内容，而不是数字，则可以删除其他所有内容并根据需要进行格式化：

```
string.gsub(/\D/, '').gsub(/(\d{3})(\d{2})(\d{4})/, "\\1-\\2-\\3") 
```

# javascript - 声明具有多个字段的 javascript 数组

> ID：15424326
> 
> 赞同：4
> 
> 时间：2013-03-15T03:46:27.333
> 
> 标签：javascript, arrays, variables, initialization

所以我想声明一个包含多个字段的 javascript 数组。

例如，我知道你可以做类似的事情

```
var data = [
{
    "field one": "a",
    "field two": "b",
},
{  
    "field one": "c",
    "field two": "d",
}
] 
```

但是，我不知道动态创建这样的数组，这样我就不必在声明时初始化字段。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T03:49:19.637

您可以使用该方法将值动态添加到数组中`push()`。

```
var data  = [];
....
....
data.push({
    "field one": "a",
    "field two": "b",
}) 
```

此外，如果您想动态地将键添加到现有对象，您可以使用`[]`语法

```
var obj = {};
...
obj['field one'] = 'a';
obj['field two'] = 'b';
data.push(obj) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T03:50:37.390

每个单独的数组元素都是一个[JavaScript Object](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)。您可以使用点或括号语法创建新字段：

```
var obj = {};
obj.fieldone = "one";
obj["field two"] = "two"; 
```

在您的情况下，由于空格，您必须使用括号表示法。

您可以使用以下方法将新创建的对象插入到数组中`.push`：

```
data.push(obj); 
```

然后，您可以访问各个字段：

```
data[0]["field one"] == "a"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T04:02:28.773

尝试这个：

```
var data = [];

var fields = ["one", "two"];
var length = fields.length;

var char = 97; // a

for (var i = 0; i < 2; i++) {
    var object = {};

    for (var j = 0; j < length; j++) {
        object["field " + fields[j]] = String.fromCharCode(char++);
    }

    data.push(object);
} 
```

在此处查看演示：http: [//jsfiddle.net/yqg3D/](http://jsfiddle.net/yqg3D/)

# c - 循环程序问题

> ID：15424340
> 
> 赞同：1
> 
> 时间：2013-03-15T03:48:31.867
> 
> 标签：c, while-loop, sentinel

对于我正在尝试编写的程序，我必须创建一个程序，要求用户输入一个数字并计算输入的所有数字的总和，直到用户输入 -1 以停止循环。但是，我无法打印 -1 或将其添加到总数中，但我正在努力解决这个问题。

```
#include <stdio.h>

int main ()
{
    int x, total;

    total = 0;
    x = 0;

    while (x <= -2 || x >= 0)
    {

        printf("Please enter a number: ");
        scanf("%d", &x);

        printf("You entered %d \n", x);

        totalSum = total + x;
        printf("total is %d \n", total);

    }

    printf("Have a nice day :) \n");
    printf("total is %d \n", total);

    return 0;
} 
```

关于如何在不打印或添加到总数的情况下将循环停止在 -1 的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T03:53:59.110

您可以在循环开始时检查输入是否等于`-1`，如果是则退出而不是计算：

```
while(1) {
    printf("Please enter a number: ");
    scanf("%d", &x);      

    if (-1 == x)
      break;

     ...
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:59:09.873

对不起，当我看到一个完全由条件中断驱动的循环时，我会*感到畏缩。*`while(1)`怎么样的东西：

```
printf("Please enter a number: ");
while(scanf("%d", &x) == 1 && x != -1)
{
    // do work

    printf("Please enter a number: ");
} 
```

One con to this method is the print is duplicated, but I believe that the pro of having the while conditional actually drive the loop more than makes up for it. An additional benefit is that scanf is also being checked here to make sure that it read in the next value correctly.

# php - 如何在函数中访问查询字符串？

> ID：15424341
> 
> 赞同：0
> 
> 时间：2013-03-15T03:48:34.910
> 
> 标签：php, wordpress

我在 Wordpress 中使用以下简码：

```
function customquery() {
  query_posts('cat=18&tag=mytag');
}
add_shortcode('query', 'customquery'); 
```

以上工作正常。我需要“标签”来接受来自 URL 查询字符串的参数。我试过这个：

```
query_posts('cat=18&tag='.$_GET["tag"].''''); 
```

这打破了页面。由于这是简码，我不确定是否需要将某些内容作为函数参数传递。但是，我看不到 .$_GET["tag"] 可以作为参数执行。我还能怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T03:53:39.240

试试这个

```
$my_tag = '';

if(isset($_GET['tag'])) {
  $my_tag = urlencode($_GET["tag"]);
}

$query_str = "cat=18&tag=" . $my_tag;

query_posts($query_str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T04:09:39.797

试试这个：

```
query_posts('cat=18&tag='.urlencode($_GET["tag"])); 
```

# c - 为什么buf的大小从4变成了1

> ID：15424342
> 
> 赞同：0
> 
> 时间：2013-03-15T03:48:42.860
> 
> 标签：c, types, ipc

我正在用 C 语言开发一个应用程序。我使用管道将数据从一个进程写入另一个进程。进程是远程的，process-1 每次都写入可变大小的数据。`char buf[4]`进程 1 写入长度为 4 的buf ( )。在进程 2 中，我读取了该数据。敌人确定我使用 ioctl() 函数调用的大小。

```
while(read(to_child[0], &byte, 1) == 1)               // Read first byte as ioctl is not
        {                                             //blocking and then allocate the                                        
                fprintf(fp,"\n Inside teh if block"); // buffer size = count+1;                                       
                ioctl(to_child[0], FIONREAD, &count);                                        
                buf = malloc(count+1);                // count is 3 here                                       
                buf[0] = byte;                                                               
                read(to_child[0], buf+1, count);      // total length read is 4\.                                       
        }                                          
  printf("count :%d, buf size: %d", count+1, strlen(buf)); 
```

ioctl() 函数在 process-2() 处将 4 个字节读入另一个 buf（如预期的那样）。但是在此之后，当我使用 strlen() 打印缓冲区的长度时，它给出的长度为 1。

```
OUTPUT:
count:4 buf size: 1 
```

这里出了什么问题？我对变量的数据类型做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T03:51:37.950

`strlen`返回 c 风格字符串的长度，即一个以空字符结尾的字符数组（它们最后只有一个空字节）。如果您正在发送/接收二进制数据，它将返回第一个“0”字节的位置。如果您已经知道不需要查询的二进制数据的大小，也许您需要一个包含数据和长度字段的结构。

在您的情况下，您可以`read(to_child[0], buf, 4) == 4`确保每次读取接收 4 个字节。一个毫无意义的例子：

```
typedef struct { char data[4]; int cnt; }  Buffer;
Buffer buf;
while( (buf.cnt = read(to_child[0], buf.data, 4)) == 4) {
  fprintf(fp,"\n Inside teh if block");
    printf("buf size: %d", buf.cnt);
} 
```

# arrays - 数组到矩阵

> ID：15424346
> 
> 赞同：2
> 
> 时间：2013-03-15T03:49:09.527
> 
> 标签：arrays, matrix, maxima

我正在尝试找到一种将 41x41 数组转换为最大值矩阵的方法。我试过`aa1:matrix([aa]);` 如果我尝试`matrixp(aa1)`它会产生 true 但矩阵只包含第一个值。

有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:41:25.427

IIUC Maxima 数组是[hashes](https://en.wikipedia.org/wiki/Associative_array)，因此顺序不像矩阵那样牢固。除此之外，它似乎应该有一些关于如何生成数组的知识`genmatrix`，请参阅第五个[常见问题解答条目](http://cadadr.org/maxima/faq.html#Matrices_and_Linear_Algebra)。

所以如果数组是这样生成的：

```
(%i1) for i thru 4 do for j thru 4 do A[i,j]: i+j$ 
```

我们有：

```
(%i2) listarray(A);
(%o2)   [2, 3, 4, 5, 3, 4, 5, 6, 4, 5, 6, 7, 5, 6, 7, 8]
(%i3) arrayinfo(A);
(%o3)   [hashed, 2, [1, 1], [1, 2], [1, 3], [1, 4], [2, 1], [2, 2], [2, 3], [2, 4], [3, 1], [3, 2], [3, 3], [3, 4], [4, 1], [4, 2], [4, 3], [4, 4]] 
```

`A`可以像这样转换为 4x4 矩阵：

```
(%i4) genmatrix(A,4,4);
        [ 2  3  4  5 ]
        [            ]
        [ 3  4  5  6 ]
(%o4)   [            ]
        [ 4  5  6  7 ]
        [            ]
        [ 5  6  7  8 ] 
```

# c# - 使用完整域名创建 cookie

> ID：15424348
> 
> 赞同：2
> 
> 时间：2013-03-15T03:49:23.613
> 
> 标签：c#, cookies, dns

我正在尝试使用域创建 cookie：ausserver.company.com 并且它没有被创建。
我尝试使用 company.com 并且它有效。

```
var cookie = new HttpCookie("cookie name");
 cookie.Domain = "auscc.company.com";
 Response.Cookies.Add(cookie); 
```

我也确实看到有几个像 JSESSIONID 这样的 cookie 有 cookie host = "auscc.company.com"。我不知道它们是如何创建的？

有谁知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T06:46:11.110

我认为问题是这样的：

出于安全原因，您只能将域设置为您自己（当前站点）和您自己的子域。您不能为任意网站设置 cookie。

例如 ：

abc.com 可以向 abc.com、foo.abc.com 和 *.abc.com 写入 cookie；它根本无法为 xyz.com 编写 cookie。

# vb.net - 为什么不能将 IView(Of SpecificViewModel) 转换为 IView(Of ViewModelBase)？

> ID：15424349
> 
> 赞同：1
> 
> 时间：2013-03-15T03:49:27.133
> 
> 标签：vb.net, generics, mvvm, interface, casting

这是 MVVM + WPF，但实际上与这些工具没有太大关系。问题比较笼统，属于OO设计。

昨天 MarcinJuraszek 帮助我提出了一个解决[原始问题](https://stackoverflow.com/questions/15379057/implementing-an-interface-with-child-classes/15379126#15379126)的好方法。该解决方案解决了手头的问题，但现在我陷入了下一个层次。事情是这样的：

**视图模型**

我的 ViewModel 类继承自一个通用的抽象父 ViewModel 类：

```
Public MustInherit Class ViewModelBase
    Implements INotifyPropertyChanged, IDisposable

    ...

End Class 
```

具体的 ViewModel 如下所示：

```
Class SalesOrderEntryViewModel
    Inherits ViewModelBase
    Implements IEditorViewModel, IChildViewModel

    ...

End Class 
```

`IEditorViewModel`并且`IChildViewModel`是我的一些具体 ViewModel 实现的接口。

**意见**

我所有的 View 类都实现了以下接口：

```
Interface IView(Of T As ViewModelBase)
    WriteOnly Property MyVM As T
    ReadOnly Property HeaderText As String
End Interface 
```

基于上述`SalesOrderEntryViewModel`I 的具体视图定义为：

```
Class SalesOrderEntryPage
    Implements IView(Of SalesOrderEntryViewModel)

End Class 
```

到现在为止还挺好。我现在面临的实际问题是我想在应用程序级别创建所有打开的视图的强类型集合。这个集合的类型应该是什么？我尝试了类似以下的方法：

```
Dim Views As List(Of IView(Of ViewModelBase)) 
```

当我尝试将`SalesOrderEntryPage`类的对象添加到此列表时，它会引发运行时异常，告诉我它无法从 转换`SalesOrderEntryPage`为`IView(Of ViewModelBase)`，尽管查看定义，`SalesOrderEntryPage`确实是`IView(Of ViewModelBase)`.

目前，VB.NET 正在帮助我进行后期绑定，但我想知道为什么会这样说，在这方面什么是优雅的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T08:21:01.733

您面临的问题与泛型的使用有关，并且与称为泛型类型参数*变化的概念有关。*泛型接口的类型参数可以是*不变*的、*协变*的或*逆变*的。

默认情况下，泛型接口的类型 T 是不变的。这意味着，您可以使用 T 作为方法参数的类型以及方法的返回类型。不利的一面是，这意味着以下任何一项都不可能：

> 将 IView（ViewModelBase）转换为 IView（SalesOrderEntryViewModel）
> 
> 将 IView（SalesOrderEntryViewModel）转换为 IView（ViewModelBase）

这是有道理的，当您考虑：

* * *

1.  假设`IView(Of T)`有一个需要**type 参数的** `T`方法：这意味着，它`IView(Of SalesOrderEntryViewModel)`有一个需要 type 参数的方法`SalesOrderEntryViewModel`。但是，如果您可以强制`IView(Of SalesOrderEntryViewModel)`转换为`IView(Of ViewModelBase)`，您会期望它有一个带有 type 参数的方法`ViewModelBase`，但事实并非如此，因为该方法仅适用于 type 参数，`SalesOrderEntryViewModel`而不是其通用版本或其他派生自`ViewModelBase`. 结果：**您不能将 IView(Of SalesOrderEntryViewModel) 转换为 IView(Of ViewModelBase)。**

* * *

1.  假设`IView(Of T)`有一个**返回类型 T 的值的**方法，并假设实现的类上的方法`IView(Of ViewModelBase)`将返回 a `SalesOrderEntryViewModel`，这没关系，因为`SalesOrderEntryViewModel`它是 的实例`ViewModelBase`。到目前为止，一切都很好。但是，如果您现在尝试将此类强制转换为`IView(Of SomeOtherViewModel`，它就不再起作用了，因为您的方法想要返回的类型`SalesOrderEntryViewModel`不是`SomeOtherViewModel`. 结果：**您不能将 IView(Of ViewModelBase) 转换为 IView(Of SalesOrderEntryViewModel)。**

* * *

但：

有一种方法可以绕过这些限制，但您必须选择：

你可以使你的接口*在*:`T`这意味着你不能使用 T 作为你的方法的返回类型，但你可以`Interface(Of Base)`转换为`Interface(Of Derived)`。

```
Interface IContravariant(Of In A)
    Sub SetSomething(ByVal sampleArg As A)
    Sub DoSomething(Of T As A)()
    ' The following statement generates a compiler error. 
    ' Function GetSomething() As A 
End Interface 
```

或者你让你的接口协*变*`T`：然后你不能有接受类型参数的方法`T`，但你可以强制`Interface(Of Derived)`转换为`Interface(Of Base)`。

```
Interface ICovariant(Of Out R)
    ' The following statement generates a compiler error 
    ' because you can use only contravariant or invariant types 
    ' in generic contstraints. 
    ' Sub DoSomething(Of T As R)() 
End Interface 
```

这就是理论。

* * *

**对于您的特殊情况：**

> 当我尝试将 SalesOrderEntryPage 类的对象添加到此列表时，它会引发运行时异常，告诉我它无法从 SalesOrderEntryPage 转换为 IView(Of ViewModelBase)

所以，你想从接口（派生）转换为接口（基础）。这意味着，您需要`IView`在其 ViewModelType 中使您的界面协变。`IView`因此，您失去了通过界面设置 ViewModel 的能力。

所以，它并没有真正解决问题，但我希望它能让你清楚，为什么它不起作用，你想要做什么。

我建议为您的所有视图定义一个逆变或非泛型基本接口。我做了后者，虽然它包含的内容不多（非泛型 IView(Model) 接口），但它让生活变得更轻松。然后派生一个允许设置 View 的 ViewModel 的接口。这样你就可以用`readonly`你的视图版本来填充你的集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:20:56.607

对于陷入这种情况并愿意进行反射的其他任何人，这里有一个使用反射信息来实现此目的的辅助方法：

```
 Private Function ImplementsGenericInterface(type As Type, interfaceName As String, genericArgTypeName As String) As Boolean
    Dim myFilter As New Reflection.TypeFilter(Function(typeObj As Type, criteriaObj As [Object])
                                                  Return typeObj.ToString().StartsWith(interfaceName)
                                              End Function)

    Dim MyIViewInterfaces() As System.[Type] = type.FindInterfaces(myFilter, "")

    If MyIViewInterfaces.Length > 0 Then
        Return MyIViewInterfaces.Any(Function(x) x.GetGenericArguments().Any(Function(y) y.BaseType.Name = genericArgTypeName))
    End If

    Return False
End Function 
```

对于我在问题中发布的示例，请像这样使用它：

```
ImplementsGenericInterface(objSalesOrderEntryPage.GetType(), "ProjectNamespace. Name", GetType(ViewModelBase).Name) 
```

# javascript - 使用 gmap3 自定义 InfoWindow 和 Marker

> ID：15424351
> 
> 赞同：0
> 
> 时间：2013-03-15T03:49:36.143
> 
> 标签：javascript, jquery, google-maps, jquery-gmap3

我正在使用[gmap3](http://gmap3.net/)创建一个带有我指定信息的 InfoWindow 的谷歌地图。它可以工作，但我想将 InfoWindow 自定义为圆角矩形，并且没有箭头指向该位置*，并且*我希望在实际位置上有一个自定义标记。

我该怎么做呢？

（我发现 gmap3 的文档有点令人困惑。）

这是我目前正在使用的 JS：

```
$("#map").gmap3({
map:{
   options:{
   zoom:18,
   mapTypeControl: true,
   mapTypeControlOptions: {
      style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
   },
   navigationControl: true,
   scrollwheel: true,
   streetViewControl: true
  }
},
infowindow:{
   address:"Boulder, Colorado",
   options:{
   content: "Text"
  }
 }
}); 
```

如何将 InfoWindow 更改为没有箭头和自定义标记的圆角矩形？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:23:24.630

我会使用`infobox`描述为：

> 此类的行为类似于 google.maps.InfoWindow，但它支持用于高级样式的多个附加属性。InfoBox 也可以用作地图标签。

但是它不是基于 gmap3 的库，从这个意义上说，我相信您需要使用“正常方式[aka.google maps api v3 #infowindows](https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows) ”开始初始化 infowindow(s)。但我会推荐 infobox，因为我已经让我的 infowindows 可以正常工作并按照我想要的方式设置样式。

此外，更重要的是 - 它带有打包和非打包版本，因此您将完全控制其使用的代码。

查看这些链接：

*   [信息框文档](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/examples.html)
*   [信息框 API](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/reference.html)
*   [发布版本](http://google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/)

**编辑：**

由于问题还有自定义标记问题，我注意到 gmap3 支持（但是）为标记选项传递值，因此您可以轻松自定义它们。（当然根据您的需要。）要简单地更改标记的图标，您可以执行以下操作：

```
... somewhere within initialization ...
    marker:{
        options:{
          draggable: false,
          icon: "urlToYourImage.png",
          optimized: false // needed to be false when using images
        },
... 
```

但是，如果您在这里询问真正的提示；）我建议您根本不要使用 gmap3 - 我已经尝试过并最终换成使用普通的谷歌地图 api v3，因为 gmap3 只会混淆和隐藏代码到谷歌地图 api 的顶部。但它当然是你的选择。

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-27T09:43:55.827

我知道这是一个相当老的问题，但我想我可以根据我最近使用`gmap3`Google Maps API 的经验添加一些输入。

而不是沿着使用`infobox`库的路线（我发现使用 gmap3 库有点麻烦）我决定通过绑定标记单击事件来生成一个覆盖层，我可以根据需要设置它的样式。

所以，我会有我的 JSON 和我的所有地址，就像这样

```
// JSON
var data = JSON.parse('[
{
    "address":"New Street, Salisbury, UK",
    "content":"hello world from salisbury"
},
{
    "address":"86000 Poitiers, France"    ,
    "content":"hello world from poitiers"
},
{
    "address":"66000 Perpignam, France",
    "content":"hello world from perpignam"
}

]'); 
```

我设置了我的 gmap 默认值

```
// Gmap Defaults
$map.gmap3({
    map:{
        options:{
            center:[46.578498,2.457275],
            zoom: 5
        }
    }
}); 
```

我遍历我的 JSON 并构建地图

```
// Json Loop
$.each(data, function(key, val) {
    $map.gmap3({
        marker:{
            values:[{
                address:val.address,
                events: {
                    click: function() {

                        gmap_clear_markers();

                        $(this).gmap3({
                            overlay:{
                                address:val.address,
                                options:{
                                    content:  '<div class="infobox">'+val.content+'</div>',
                                    offset:{
                                        y:-32,
                                        x:12
                                    }
                                }
                            }
                        });
                    }
                }
            }]
        }
    });
}); 
```

该`gmap_clear_markers()`函数触发所有其他信息框（覆盖）实例被删除。

```
// Function Clear Markers
function gmap_clear_markers() {
    $('.infobox').each(function() {
        $(this).remove();
    });
} 
```

现在我可以向我的 JSON 添加任意数量的地址，它将有一个信息框，其中只有一个带有类信息框的普通 div 包装器，我可以相应地设置它的样式。

我不确定这是否是最好的方法——我只是说这对我有用。

这是[JSFIDDLE 示例](http://jsfiddle.net/bambattajb/Uwpp6/10/)

# jquery - JQuery - 单击两次时如何让此功能运行一次

> ID：15424353
> 
> 赞同：0
> 
> 时间：2013-03-15T03:49:45.397
> 
> 标签：jquery, html

当我在按钮元素上单击两次（不是双击，只是在任何时间点单击两次）时，我试图让这个函数运行一次，然后初始化它，然后将其重置。

```
<a href="#" onclick="popHover()">

$('.challenge_popover').popover()

var clicked = false

function popHover() {

        // I NEED THIS PART TO RUN ON THE FIRST CLICK
        if (clicked == false)
        {
        $('.challenge_popover').popover('destroy')
        }

         // AND THIS PART TO RUN ON THE SECOND CLICK
        $(document).live('mousedown', function(e) { 

            if (e.which == 1)  

            {
            $('.challenge_popover').popover()
            clicked = true
            }

        });

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T04:05:08.073

首先，您不应该使用这样的内联事件处理；让锚裸露：

```
<a href="#"> 
```

然后，使用 jQuery 附加点击处理程序：

```
$('.challenge_popover')
    .popover()
    .on('click', popHover) 
```

接下来，您的点击事件处理程序：

```
function popHover()
{
    // we keep the clicked state on the element itself
    var clicked = $(this).data('clicked');

    if (!clicked) {
        // action #1
        $(this).popover('destroy')
    } else {
         // AND THIS PART TO RUN ON THE SECOND CLICK
         $(this).popover();
    }
    // toggle clicked state
    $(this).data('clicked', !clicked);
} 
```

我不确定第三次点击会发生什么；我认为它应该再次执行第 1 项操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T03:52:30.587

看看 jQuery`.dblclick()`会有很大帮助。

> 描述：将事件处理程序绑定到“dblclick”JavaScript 事件，或在元素上触发该事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T04:02:31.830

你在寻找类似的东西

```
$('.challenge_popover').popover();

var clicked = false;

function popHover() {
        if (clicked) {
            $('.challenge_popover').popover('destroy')
        } else {
            $('.challenge_popover').popover()
        }

        clicked = !clicked;
} 
```

# python - Cygwin+MinGW下配置libdnet

> ID：15424354
> 
> 赞同：0
> 
> 时间：2013-03-15T03:49:48.630
> 
> 标签：python, scapy

我正在尝试在 win python2.7 上使用 scapy。当我在 Cygwin+MinGW 下配置 libdnet 时，出现检查 Python 的问题... configure: error: need MingW32 package to build under Cygwin。有人可以帮我吗？

PS：我刚刚解决了我的问题，但是我有一个新问题。运行 setup.py 后，它警告我 ../include\dnet/os.h(26) : error C2371: "ssize_t": ? ??;??????

# blackberry - 黑莓通知栏：如何替换消息预览窗口

> ID：15424356
> 
> 赞同：0
> 
> 时间：2013-03-15T03:49:55.213
> 
> 标签：blackberry, replace, message, preview

嗨，我正在尝试使用 eclipse 制作我的第一个黑莓应用程序，该应用程序的主要思想只是根据内部 GPS LatLong 显示当前位置 << 跳过这部分。

现在的问题是我一直在寻找关于如何替换单击自定义消息时出现的“消息预览”窗口的近两个星期这是我的代码

类 DemoMessage

```
public final class DemoMessage implements ApplicationMessage
{
static final int DEMO_MESSAGE_TYPE = 0x01;

private String _sender;
private String _subject;
private String _message;
private long _receivedTime;
private boolean _isNew;
private boolean _deleted;
private String _replyMessage;
private long _replyTime;
private EncodedImage _previewPicture;

public DemoMessage()
{
    _isNew = true;
}

DemoMessage(String sender, String subject, String message, long receivedTime)
{
    _sender = sender;
    _subject = subject;
    _message = message;
    _receivedTime = receivedTime;
    _isNew = true;
}

void reply(String message)
{
    markRead();
    _replyMessage = message;
    _replyTime = System.currentTimeMillis();
}

void messageDeleted()
{
    _isNew = false;
    _deleted = true;
}

void markAsNew()
{
    _isNew = true;
    _replyMessage = null;
}

void markRead()
{
    _isNew = false;
}

boolean isNew()
{
    return _isNew;
}

boolean hasReplied()
{
    return _replyMessage != null;
}

void setSender(String sender)
{
    _sender = sender;
}

void setSubject(String subject)
{
    _subject = subject;
}

void setReceivedTime(long receivedTime)
{
    _receivedTime = receivedTime;
}

void setMessage(String message)
{
    _message = message;
}

String getMessage()
{
    return _message;
}

void setPreviewPicture(EncodedImage image)
{
_previewPicture = image;
}

public String getContact()
{
return _sender;
}

public int getStatus()
{
    if(_isNew)
    {
        return MyApp.STATUS_NEW;
    }

    if(_deleted)
    {
        return MyApp.STATUS_DELETED;
    }

    if(_replyMessage != null)
    {
        return MyApp.STATUS_REPLIED;
    }

    return MyApp.STATUS_OPENED;
}

public String getSubject()
{
    if(_replyMessage != null)
    {
        return "Re: " + _subject;
    }
    else
    {
        return _subject;
    }
}

public long getTimestamp()
{
    return _receivedTime;
}

public int getType()
{
    return DEMO_MESSAGE_TYPE;
}

public String getPreviewText()
{
    if(_message == null)
    {
        return null;
    }

    StringBuffer buffer = new StringBuffer(_message);

    if(_replyMessage != null)
    {
        buffer.append(". You replied on ").append(new Date(_replyTime)).append(": ").append(_replyMessage);
    }

    return buffer.length() > 100 ? buffer.toString().substring(0, 100) + " ..." : buffer.toString();
}

public Object getCookie(int cookieId)
{
    return null;
}

public Object getPreviewPicture()
{
    return _previewPicture;
}
} 
```

类 DemoMessageScreen

```
public final class DemoMessageScreen extends MainScreen
{
public DemoMessageScreen()
{       
    setTitle("Title");

    ReadableListImpl mylist= new ReadableListImpl();
    ApplicationMessageFolder folder = null;
    ApplicationFolderIntegrationConfig config = new ApplicationFolderIntegrationConfig(true, true, ApplicationDescriptor.currentApplicationDescriptor());

    if(ApplicationMessageFolderRegistry.getInstance().getApplicationFolder(0x33c7ce29883abe5fL)==null)
    {
         folder = ApplicationMessageFolderRegistry.getInstance().registerFolder(0x33c7ce29883abe5fL, "Test Folder", new ReadableListImpl(),config );
    }
    else
    {
         folder = ApplicationMessageFolderRegistry.getInstance().getApplicationFolder(0x33c7ce29883abe5fL);
    }

    DemoMessage msg = new DemoMessage("me@here.com", "Pizza Toppings","What would you like on your pizza?", System.currentTimeMillis());

    mylist.addMessage(msg);

    folder.fireElementAdded(msg,true);

    System.out.println("nr of messages"+folder.hasNewMessages());

    ApplicationIndicatorRegistry reg = ApplicationIndicatorRegistry.getInstance();

    EncodedImage image = EncodedImage.getEncodedImageResource("indicatorOn.png" );

    ApplicationIcon icon = new ApplicationIcon( image );

    ApplicationIndicator indicator = reg.register( icon, false, true);

    indicator.setNotificationState(true);

    ApplicationIndicator appIndicator = reg.getApplicationIndicator();

    appIndicator.setIcon(icon);

    appIndicator.setValue(appIndicator.getValue() + 1);

    //appIndicator.setNotificationState(true);

    appIndicator.setVisible(true);
}

public boolean onClose()
{
    close();
    return true;
}

static class ReadableListImpl implements ReadableList
{
    private Vector messages;

    ReadableListImpl()
    {
        messages = new Vector();
    }

    public Object getAt(int index)
    {
        return messages.elementAt(index);
    }

    public int getAt(int index, int count, Object[] elements, int destIndex)
    {
        return 0;
    }

    public int getIndex(Object element)
    {
        return messages.indexOf(element);
    }

    public int size()
    {
        return messages.size();
    }

   void addMessage(DemoMessage message)
    {
        messages.addElement(message);
    }

    void removeMessage(DemoMessage message)
    {
        messages.removeElement(message);
    }
}
} 
```

和 MyApp 类

```
public class MyApp extends UiApplication
{
static final int FLAG_REPLIED = 1 << 16;
static final int FLAG_DELETED = 1 << 17;
static final int BASE_STATUS = ApplicationMessage.Status.INCOMING;
static final int STATUS_NEW = BASE_STATUS | ApplicationMessage.Status.UNOPENED;
static final int STATUS_OPENED = BASE_STATUS | ApplicationMessage.Status.OPENED;
static final int STATUS_REPLIED = BASE_STATUS | ApplicationMessage.Status.OPENED | FLAG_REPLIED;
static final int STATUS_DELETED = BASE_STATUS | FLAG_DELETED;

public static void main(String[] args)
{
    MyApp theApp = new MyApp();      
    theApp.enterEventDispatcher();
}

public MyApp()
{   
        pushScreen(new DemoMessageScreen());
}
} 
```

代码很好，我可以在主屏幕和消息文件夹中看到通知，但是如果单击它会调用“消息预览”窗口，我不知道如何注册单击处理程序以从通知消息栏和消息文件夹启动我的应用程序，怎么做？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:25:31.023

问题解决了，我必须在类的主体中声明 ApplicationDescriptor。

# macos - 在 Mac OS X 10.8.2 中编译 OpenCV 示例

> ID：15424357
> 
> 赞同：4
> 
> 时间：2013-03-15T03:49:56.927
> 
> 标签：macos, opencv

我花了很多时间在运行 10.8.2 的 Macbook 上安装 OpenCV，并且成功使用了最新版本的 CMake 和 OpenCV 2.4.4。

但是，我找不到任何直接的方法来编译 opencv 目录内 /samples 文件夹中包含的 FaceTracker.cpp 文件。我不太确定如何链接必要的库来编译和运行它。还尝试打开同一文件夹中包含的 XCode proj 来构建它，但它失败了，因为它找不到任何 OpenCV.frameworks。你们能指出我如何编译和运行的正确方向吗？也许如何在 XCode 中使用 opencv 框架？

我在论坛和谷歌上搜索过，找不到任何与我的问题相似的东西，而且我发现的所有信息要么过时，要么过于混乱。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T21:21:17.960

下载 OpenCV 2.4.4 源代码并在根目录中执行以下命令：

```
mkdir build
cd build
cmake -DBUILD_EXAMPLES=ON ../
make
sudo make install 
```

如果这不起作用，并假设您的系统上安装了 OpenCV，请**跳转到该目录`samples/MacOSX/FaceTracker`并执行**：

```
g++ FaceTracker.cpp -o FaceTracker `pkg-config --cflags --libs opencv` -framework Cocoa 
```

上述命令将在您**编辑文件`FaceTracker.cpp`**后编译应用程序并将其所有`#include`指令替换为以下内容：

```
#include <CoreFoundation/CoreFoundation.h>
#include <cv.h>
#include <highgui.h>
#include <cassert>
#include <iostream> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T22:05:58.827

FaceTracker 示例已过时：OpenCV 2.xx 系列不再存在 OpenCV.framework。此示例是在 OpenCV 1.1 时提出的。

打开 Xcode 项目时，转到构建设置并搜索**其他链接器标志**选项。您可以在此处添加所需的动态库（`-lopencv_legacy`等等，没有 dylib 扩展名）。您可能还必须修改**链接器搜索路径**选项以包含安装 OpenCV 的目标（通常是`/usr/local/bin`）。

# jquery - 将溢出添加到 div 会阻止其内容正确拖动

> ID：15424359
> 
> 赞同：2
> 
> 时间：2013-03-15T03:50:19.550
> 
> 标签：jquery, css, jquery-ui

我正在使用 jquery FullCalendar 插件，并将外部事件添加到日历中。

[从这个例子](http://arshaw.com/js/fullcalendar-1.5.4/demos/external-dragging.html)一切都很好。但是，我有很多外部事件需要拖到日历上，所以我的事件列表需要滚动。

我补充说：

```
overflow-y: auto; 
```

到父 div，它确实允许它滚动。但是，当它们被拖到父 div 之外时，这些事件会消失。

[这是发生的事情的 JSfiddle](http://jsfiddle.net/9TmPE/)

我已经尝试了尽可能多的 z-index 和溢出组合的组合，当它们离开父级时它们会不断消失。

如何允许父 div 滚动并防止事件项在拖动时消失？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T04:25:34.167

如果这是您的[Draggable](http://jsfiddle.net/AaronBlenkush/9TmPE/2/)的初始化：

```
$(this).draggable({
    zIndex: 999,
    revert: true, // will cause the event to go back to its
    revertDuration: 0, //  original position after the drag
    scroll: false,
    //INSERT HERE
}); 
```

`//INSERT HERE`然后在该行插入以下选项之一：

## 选项1

```
 helper: 'clone',
    appendTo: 'body' 
```

这将按需要工作，但拖动的元素将在拖动时被克隆。

为避免这种情况，请使用下一个选项：

## 选项 2

```
 helper: function(event, ui) {
        var clone = $(this).clone();
        $(this).css({opacity:0}); //or $(this).hide()
        return clone;
    },
    stop: function(event, ui) {
        $(this).css({opacity:1}); //or $(this).show()
    },
    appendTo: 'body' 
```

[有关示例，请参见此 Fiddle](http://jqueryui.com/draggable/)。

* * *

如果您需要实际“移动”元素（即它在放置后不会重新出现），`remove()`则一旦将元素放置在适当的位置，您就需要该元素。您可以在删除原始元素的[Droppable](http://jqueryui.com/droppable/)`receive`的回调中添加一些内容。

# java - 如何跨具有不同依赖项的模块重复一组测试？

> ID：15424360
> 
> 赞同：0
> 
> 时间：2013-03-15T03:50:26.043
> 
> 标签：java, testing, gradle

我正在启动一个项目，其中“核心”模块将定义一组通用接口，其他模块在后端使用不同的库来实现这些接口。它与 SLF4J 非常相似，其中 API 模块描述了您可以使用的所有操作，并且绑定模块在各种日志框架（如 Log4j、java.util 日志记录和 Logback）中实现这些操作。要使用它，您依赖于 API 模块和绑定模块之一，并且您只与 API 交互。

我的问题在于测试。由于 API 表达了所有可能的操作并且每个绑定模块都应该以相同的方式运行，因此我想编写一组描述预期行为的测试并对每个绑定模块运行相同的测试。我应该如何组织事情以使其在没有大量重复努力的情况下发挥作用？

这是一个包含大量 Groovy 的 Java 项目，我计划使用 Gradle 构建它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T04:06:05.130

我以前用 JUnit 做过这种事情。我所做的是定义一组具有所有逻辑的抽象测试类：

```
public abstract AbstractTestBase {
    protected abstract CommonInterface getInstance(); //for subclasses to implement

    @Test
    public void testSomething() {
       CommonInterface instance = getInstance();
       //test instance
    }
} 
```

然后具体的子类通常只是返回要测试的具体实现的小类：

```
public class TestSomeImplementation extends AbstractTestBase {
    protected CommonInterface getInstance() {
        return new SomeImplementation();
    }
} 
```

在一些我已经为特定实现添加了特定测试，但在你的情况下，我知道你不需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T12:13:21.377

这取决于绑定机制。如果多个绑定可以共存，您可以通过编写一个数据驱动的测试来解决测试级别的问题，该测试为每个绑定运行相同的测试类/方法。（如何实现这一点的细节取决于使用的测试框架。）如果绑定不能共存，您可以在构建级别解决问题。例如，您可以创建十个`Test`任务，这些任务的配置相同，但其类路径上的实现 Jar 除外。

# ios - 与预填充 sqlite 的核心数据关系

> ID：15424362
> 
> 赞同：0
> 
> 时间：2013-03-15T03:50:28.393
> 
> 标签：ios, sqlite, core-data

首先，对不起。我英语说的不好。你好。我是iOS的初学者。

目前我是这样开发的：

1.  删除自动生成的核心数据 sqlite 文件
2.  使用 firefox sqlite manager 将我创建的 sqlite 文件复制到已删除的 sqlite 文件路径
    （使用 Z_PK、Z_ENT、Z_OPT 的 sqlite）

两个问题：

1.  如何使用 firefox sqlite manager 创建实体关系。
2.  如何预先创建详细的核心数据选项，如关系删除规则、sqlite 管理器上的属性属性或其他任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:10:03.260

好吧，基本上您需要获取一个由项目使用您的模式创建的空数据库，然后对其进行操作以保存您想要的数据。更多信息[在这里](http://www.raywenderlich.com/980/core-data-tutorial-how-to-preloadimport-existing-data)

链接中未描述的替代方法是使用 Core Data 本身（以及用于读取其他数据库的 SQLite 库）将数据从数据库复制到 Core Data 数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T02:09:07.710

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator {
if (_persistentStoreCoordinator != nil) {
    return _persistentStoreCoordinator;
}

NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"CoreDataBooks.CDBStore"];

/*
 Set up the store.
 For the sake of illustration, provide a pre-populated default store.
 */
NSFileManager *fileManager = [NSFileManager defaultManager];
// If the expected store doesn’t exist, copy the default store.
if (![fileManager fileExistsAtPath:[storeURL path]]) {
    NSURL *defaultStoreURL = [[NSBundle mainBundle] URLForResource:@"CoreDataBooks" withExtension:@"CDBStore"];
    if (defaultStoreURL) {
        [fileManager copyItemAtURL:defaultStoreURL toURL:storeURL error:NULL];
    }
}

NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption, [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];
_persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel: [self managedObjectModel]];

NSError *error;
if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:options error:&error]) {
    /*
     Replace this implementation with code to handle the error appropriately.

     abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 

     Typical reasons for an error here include:
     * The persistent store is not accessible;
     * The schema for the persistent store is incompatible with current managed object model.
     Check the error message to determine what the actual problem was.

     If the persistent store is not accessible, there is typically something wrong with the file path. Often, a file URL is pointing into the application's resources directory instead of a writeable directory.

     If you encounter schema incompatibility errors during development, you can reduce their frequency by:
     * Simply deleting the existing store:
     [[NSFileManager defaultManager] removeItemAtURL:storeURL error:nil]

     * Performing automatic lightweight migration by passing the following dictionary as the options parameter:
     @{NSMigratePersistentStoresAutomaticallyOption:@YES, NSInferMappingModelAutomaticallyOption:@YES}

     Lightweight migration will only work for a limited set of schema changes; consult "Core Data Model Versioning and Data Migration Programming Guide" for details.

     */
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
}

return _persistentStoreCoordinator; 
```

代码取自 Apple 文档 Core Data Books [Link](https://developer.apple.com/library/ios/#samplecode/CoreDataBooks/Listings/Classes_CoreDataBooksAppDelegate_m.html#//apple_ref/doc/uid/DTS40008405-Classes_CoreDataBooksAppDelegate_m-DontLinkElementID_8) 您需要有一个预先填充的数据数据库，该数据库已通过 Core Data 填充。此函数在应用首次启动时将预填充的数据库复制到主数据库存储位置。

* * *

# java - 如何在不使用意图的情况下在 Google+ 上分享或上传图片？

> ID：15424366
> 
> 赞同：3
> 
> 时间：2013-03-15T03:50:47.333
> 
> 标签：java, android, google-plus

我想在我的（墙）Streams 中与 Google+ 分享“状态”或“图像状态”。当我使用意图时它工作正常。但我不想使用它。我想使用与 Facebook 相同的 API。可以任何一个帮助我给出任何想法。有可能吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:16:28.467

您不能使用 Google+ API 直接发布到用户的信息流。启动共享对话框的意图方法是首选方法。

您可以使用[moment.insert](https://developers.google.com/+/api/latest/moments/insert)将应用活动写入用户的帐户，他们可以在其中选择是否共享它们。

# extjs - 拖动时ExtJS在网格中滚动

> ID：15424370
> 
> 赞同：1
> 
> 时间：2013-03-15T03:51:04.570
> 
> 标签：extjs, extjs4.1

我有一个带有“gridviewdragdrop”插件的 Ext.Grid.Panel。使用“containerScroll”属性时，我能够打开自动滚动。

```
viewConfig: {
    plugins: {
     ptype: 'gridviewdragdrop',
     containerScroll: true
    }
} 
```

但是，ScrollManager 触发事件滚动的区域太小（它本质上只是垂直滚动条上箭头块的长度）。有没有办法增加这个面积？当我的指针在拖动时越过网格的顶部或底部边界时，我是否可以执行类似触发 ScrollManager 事件的操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T22:38:25.033

您可以使用配置对象告诉插件您要使用的阈值，如下所示：

```
viewConfig: {
    plugins: {
        ptype: 'gridviewdragdrop',
        containerScroll: {
                vthresh: 100 // this will use threshold of 100 pixels, 
                }            // so it will start scrolling at 100 pixels
                             // from the border
    }
} 
```

# ember.js - Ember-data 查找带有父级的嵌套模型

> ID：15424374
> 
> 赞同：3
> 
> 时间：2013-03-15T03:51:28.030
> 
> 标签：ember.js, ember-data

***我如何告诉 Ember 不仅要检索匹配列表，还要获取每个关联玩家的对象？***

在我的路由器中，我有：

```
App.MatchesRoute = Ember.Route.extend
  model: ->
    App.Match.find() 
```

这是我的 JSON 数据的用途`localhost:3000/matches.json`

```
{"matches":[{"id":1,"player_one":{"id":1,"name":"Lex"},"player_two":{"id":20,"name":"Superman"}}]} 
```

**更新以提供更多信息 03/15/13**

这是`matches.emblem`（标志是haml-slim-like-handlebars）

```
#matches
  each match in controller
    linkTo "match" match class="panel six columns"
      p Match between {{match.player_one.name}} and {{match.player_two.name}} 
```

我们成功获取了`Match`对象，我可以调用`id`它（未显示），但我们需要获取 and 的名称`match.player_one`，`match.player_two`它们返回未定义。

**匹配**

```
App.Match = DS.Model.extend
  player_one: DS.belongsTo('App.Player')
  player_two: DS.belongsTo('App.Player') 
```

**播放器**

```
App.Player = DS.Model.extend
  name: DS.attr('string') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T17:00:23.880

如果您总是返回带有匹配的玩家，您可能希望将玩家声明为嵌入的。

你会写这样的东西：

```
Adapter.map(App.Match, {
  player_one: {embedded: load},
  player_two: {embedded: load},
}); 
```

# ipad - 制作一个短期/到期的应用程序

> ID：15424378
> 
> 赞同：-1
> 
> 时间：2013-03-15T03:51:42.230
> 
> 标签：ipad

我已经搜索了包括该站点在内的所有地方，但找不到答案。我想为一家包含机密信息的公司设计一个为期两天的商务会议应用程序。一个简单的界面，允许他们查看信息并做一些简单的事情。我希望它在会议后的第二天在他们的 iPad 上过期。（他们会在会议的第一天下载它。）我不收费。我不需要应用商店。我可以自己为他们开发一些东西，一个具有某些功能的应用程序，而不需要成为开发人员的所有繁琐工作吗？将演示/信息亭类型的程序放在 iPad 上怎么样？如果我能在会议开始时弄清楚他们如何下载它（作为应用程序？），我会很高兴的。

谢谢， N

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T03:58:16.233

您需要拥有 Apple 开发者帐户才能将应用程序部署到设备。您可以在没有开发人员 ID 的情况下使用模拟器，但您需要将配置文件安装在真实设备上，而获得该配置文件的唯一方法是使用您的 Apple 帐户。一个账户每年 99 美元，如果你在做任何 iOS 开发，不要试图绕过这个账户；只是处理它。

你提前认识人吗？如果是这样，可以使用诸如[TestFlight](http://www.testflightapp.com)之类的系统将应用程序分发为“测试版”。但是您需要他们的电子邮件地址才能通过 TestFlight 将他们添加为用户。TestFlight 不通过 App Store。

我忽略了任何越狱方法，主要是因为您的所有用户也需要越狱。

# asp.net-mvc - 具有多个路由值的 Url.Action 助手的问题

> ID：15424380
> 
> 赞同：13
> 
> 时间：2013-03-15T03:52:09.827
> 
> 标签：asp.net-mvc, asp.net-mvc-3, url, razor, query-string

我目前正在 VS2010 中开发一个 ASP.NET MVC3 应用程序，但我在使用`@Url.Action`助手时遇到了一些麻烦。我有一个使用这个助手的 ajax 请求：

```
var url = '@Url.Action("Action", "Controler", new { a = "a", b = "b" })';
$.post(url).success(function(data) { 
    ... 
}); 
```

问题是`url`after this 的值是`/Controller/Action?a=a&amp;b=b`，注意`&amp;`路由值之间的值。这不起作用，但如果我这样做：

```
var url = '@Url.Action("Action", "Controler", new { a = "a", b = "b" })'.replace('amp;', ''); 
```

它完美地工作！

我的动作是这样的：

```
public JsonResult Action(string a, string b) 
{
    ...
} 
```

我已经调试了我的应用程序，并且该操作被调用，甚至`a`是`"a"`，但是`b`是`null`。

这是期望的行为`Url.Action`吗？我不这么认为。请帮助我，我做错了什么？我应该在`Url.Action`调用中添加另一个参数吗？提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-10-28T20:11:07.177

这里的问题是，当您使用 razor 语法时：`@...`razor 引擎将 Url.Action（它是一个字符串）的结果编码为 MvcHtmlString。这导致 & 符号被编码为`&amp;`. 要解决此问题，请使用`Html.Raw`（返回非 HTML 编码的标记。）

`var url = '@Html.Raw(Url.Action("Action", "Controller", new { a = "a", b = "b" }))';`

导致：'/Controller/Action?a=a&b=b'

感谢@GSerg（请参阅 Dave Alperovich 的回答中的评论）......但所需的结果不是 javascript 编码。使用`HttpUtility.JavaScriptStringEncode("&")`“\u0026”中的结果

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T04:21:32.983

不是你。**Javascript将****&**标识为受保护字符并“*对其进行编码*”

你找到了一种绕过它的方法，我见过其他人。因为这个问题不是问最好的方法，但不管是不是你，我可以向你保证**它不是你**。你没有做错任何事情。这是 Javascript 的自然行为。

如果我们正在讨论最好的方法，我更喜欢`@Url.Action`只使用来获取我的 URL，并将参数作为参数传递给我的 JQuery 方法（我最喜欢 .Ajax 方法）。

**从 e.camper 借来的例子**

```
$.post(url, { a: "a", b: "b"}).success(...) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-15T04:40:13.710

上面答案中所说的每一件事都很棒，我想在你发送 ajax 请求的方式中添加一些东西，当你想发送额外的数据时，发送它就像

```
var url = '@Url.Action("Action", "Controler")';
$.post(url,{a:'a',b:'b'}).success(function(data) { 
    ... 
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-15T04:25:20.040

就像我在评论中提到的那样，这是一个 JavaScript 编码问题。避免进行任何 UrlDecoding 或字符替换的最佳方法是定义与您尝试传递的参数匹配的路由

```
routes.MapRoute(
            "MyCustomRoute",
            "{Controller}/{Action}/{a}/{b}",
            new {controller = "Controller", action = "Action"} 
```

将其放在默认路由上方的 global.asax 文件中。现在，当你打电话

`var url = '@Url.Action("Action", "Controler", new { a = "a", b = "b" })';`

输出将是`/Controller/Action/a/b`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-08T01:36:14.323

我知道这是一个老问题，但我有一个类似的问题，所以我结束了这样做：

```
$.ajax({
        type: "Post",
        url: "@Url.Action("Action", "Controller")",
        data:{ param1 : "@Model.param1", param2 : "@Model.param2", param3:"@Model.param3",......,param20 : "something" },
        success: function (response) {
            $("#yourDiv").html(response);
       }
    }); 
```

我希望这对其他人有用。

# asp.net-mvc - 来自 MVC 控制器的 JSONResult 返回 HTTP 403 错误

> ID：15424381
> 
> 赞同：1
> 
> 时间：2013-03-15T03:52:10.257
> 
> 标签：asp.net-mvc, json

我正在执行从 mvc 视图到控制器的 post 函数，它工作正常并将数据插入数据库，但是当我尝试将 jsonresult 从控制器返回到视图时，它返回一个 http 403 禁止错误。我也尝试过直接访问该特定操作，它返回相同的 403 禁止错误。请问我哪里出错了？

**控制器**

```
 <HttpPost()> _
    Function Create(ByVal collection As ExternalMail) As JsonResult
        Try
            If ModelState.IsValid Then
                _repositoryForExternalMail.Save(collection, "")
            End If

            Return Json(New ExternalMail With {.CostCentreCode = collection.CostCentreCode, .Day = collection.Day, .Quantity = collection.Quantity, .ExternalMailItemID = collection.ExternalMailItemID, .ExternalMailLocationID = collection.ExternalMailLocationID}, JsonRequestBehavior.AllowGet)

        Catch
            Return Json("An Error Occurred")
        End Try
    End Function 
```

**JSON**

```
$(document).ready(function () {

    var exturl = '@Url.Action("Create", "ExternalMail")';
    $("#ExtMailCreate").click(function () {

        var dataJSON = JSON.stringify(SaveExternalMail());

                    $.ajax({
                        type: "POST",
                        url: exturl,
                        data: dataJSON,
                        contentType: 'application/json; charset=utf-8',
                        success: function (data) {
                            showMessage("test", "information");
                        },
                        error: function (xhr, textStatus, errorThrown) {
                            $("#result").append(xhr.responseText);
                            $("#result").append(textStatus);
                            $("#result").append(errorThrown);
                        }

                    });

    });

}); 
```

# android - SQLite 数据库 android 创建表

> ID：15424382
> 
> 赞同：3
> 
> 时间：2013-03-15T03:52:11.390
> 
> 标签：android, sqlite

“我收到错误“没有这样的表”并导致我尽一切可能让它消失，现在它消失了，但我很困惑。这是我的情况

我有 2 个表需要在应用程序中创建。我每张桌子放一个班级，它看起来像下面的代码。如果我遵循这个，当我从“Table2”中提取数据时，它会用“No Such Table”打击我，所以我需要将 DATABASE_NAME 更改为其他值 =“DB2”；那么“Table2”将成功创建并能够提取数据。

所以我的问题是这是确保成功创建 2 个表的正确方法吗？或者我不应该将表分成 2 个类？请给个建议

```
public class DB1 extends SQLiteOpenHelper {
// Database Version
private static final int DATABASE_VERSION = 1;

// Database Name
private static final String DATABASE_NAME = "DB";

// Labels table name
private static final String TABLE_STORE = "Table1";

// Labels Table Columns names
public static final String KEY_1 = "col1"; 

public RC_StoreTbl(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

// Creating Tables
@Override
public void onCreate(SQLiteDatabase db) {
    // Category table create query
    String CREATE_TABLE = "CREATE TABLE " + TABLE_STORE + "("
            +KEY_1 + " INTEGER PRIMARY KEY)";
    db.execSQL(CREATE_TABLE);
}
} 
```

另一个班级

```
public class DB2 extends SQLiteOpenHelper {
// Database Version
private static final int DATABASE_VERSION = 1;

// Database Name
private static final String DATABASE_NAME = "DB";

// Labels table name
private static final String TABLE_STORE = "Table2";

// Labels Table Columns names
public static final String KEY_1 = "col1"; 

public RC_StoreTbl(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

// Creating Tables
@Override
public void onCreate(SQLiteDatabase db) {
    // Category table create query
    String CREATE_TABLE = "CREATE TABLE " + TABLE_STORE + "("
            +KEY_1 + " INTEGER PRIMARY KEY)";
    db.execSQL(CREATE_TABLE);
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T03:57:00.513

不，您应该将表放在一个数据库类中。只需确保每当您更改代码以修改表格或添加/删除表格时，您都会清除数据或卸载应用程序并再次运行。您很可能会收到“**没有这样的表**”错误，因为您添加或修改了一个表，在这种情况下，在您清除数据或卸载您的应用程序之前不会再次调用**onCreate 。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T05:09:46.650

不，您应该有一个`DBopenHelper`扩展类（通常我们命名为）`SQLiteOpenHelper`，在该类中，您必须操作表的创建。

因此您的代码将如下所示：

```
 public class DBOpenHelper extends SQLiteOpenHelper {

        public static final String DATABASE_NAME = "DB";

            // Update the DATABASE_VERSION so that onUpgrade can be executed! 
        public static final int DATABASE_VERSION = 2;               

        // Labels table name
        private static final String TABLE_STORE1 = "Table1";

        // Labels Table Columns names
        public static final String TABLE1_KEY_1 = "Tcol1"; 

            // Labels table name
            private static final String TABLE_STORE2 = "Table2";

            // Labels Table Columns names
            public static final String TABLE2_KEY_1 = "Tcol1";              

        public RC_StoreTbl(Context context) {
                super(context, DATABASE_NAME, null, DATABASE_VERSION);
            }

        @Override
        public void onCreate(SQLiteDatabase db) {
            if (!db.isReadOnly()) {
                // Enable foreign key constraints
                db.execSQL("PRAGMA foreign_keys = ON;");
                Log.i("TAG", "FOREIGN KEY constraint enabled!");
            }       

            // table create query
                String CREATE_TABLE = "CREATE TABLE " + TABLE_STORE1 + "("
                        +TABLE1_KEY_1 + " INTEGER PRIMARY KEY)";

            // table create query
                String CREATE_TABLE = "CREATE TABLE " + TABLE_STORE2 + "("
                        +TABLE2_KEY_1 + " INTEGER PRIMARY KEY AUTOINCREMENT)";

// table create query
                String CREATE_TABLE = "CREATE TABLE " + TABLE_STORE + "("
                        +KEY_1 + " INTEGER PRIMARY KEY AUTOINCREMENT)";

    // ITS ALWAYS GOOD TO PUT execSQL in the try catch block for tracking // PROBLEMS/ERRORS/EXCEPTIONS
        try {
                    db.execSQL(CREATE_TABLE);
                } catch (Exception e) {
                    e.printStackTrace();
                }

            } // end onCrate

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            Log.i(LOG_TAG, "Upgrading database from " + oldVersion + " to "
                    + newVersion);
            // kill previous tables
            db.execSQL("DROP TABLE IF EXISTS " + TABLE_STORE1);
            db.execSQL("DROP TABLE IF EXISTS " + TABLE_STORE2);
            onCreate(db);
        } // end onUpgrage

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-18T16:04:50.543

你不能创建第二个表，因为数据库存在，只有先创建才能创建表尝试这样的事情

```
 public class DB1 extends SQLiteOpenHelper {
// Database Version
        private static final int DATABASE_VERSION = 1;

// Database Name
        private static final String DATABASE_NAME = "DB";

// Labels table name
        private static final String TABLE_STORE1 = "Table1";
        private static final String TABLE_STORE2 = "Table2";

// Labels Table Columns names
        public static final String KEY_1 = "col1"; 

//first query 
    String firstTable="CREATE TABLE " + TABLE_STORE1 + "("
        +KEY_1 + " INTEGER PRIMARY KEY)";
//second query

    String secondTable="CREATE TABLE " + TABLE_STORE2 + "("
        +KEY_1 + " INTEGER PRIMARY KEY)";

   public RC_StoreTbl(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
   }

// Creating Tables
@Override
public void onCreate(SQLiteDatabase db) {

db.execSQL(firstTable);
db.execSQL(secondTable);
}
} 
```

对不起我的英语XD

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-23T07:03:39.593

您应该考虑更改表格的模型。这将帮助您更好地组织事情并尽早发现错误。[你可以在这里](http://www.singhajit.com/android-with-sqlite-database/)找到一个例子。

下面是一个表格模型的例子。

```
public class ProductTable implements BaseColumns {
  public static final String NAME = "name";
  public static final String PRICE = "price";
  public static final String TABLE_NAME = "products";

  public static final String CREATE_QUERY = "create table " + TABLE_NAME + " (" +
      _ID + " INTEGER, " +
      NAME + " TEXT, " +
      PRICE + " INTEGER)";

  public static final String DROP_QUERY = "drop table " + TABLE_NAME;
  public static final String SElECT_QUERY = "select * from " + TABLE_NAME;
} 
```

现在使用 DatabaseHelper 中的以下代码创建表。

```
 @Override
  public void onCreate(SQLiteDatabase sqLiteDatabase) {
    sqLiteDatabase.execSQL(ProductTable.CREATE_QUERY);
    seedProducts(sqLiteDatabase);
  } 
```

# javascript - 骨干js从服务器自动刷新/重新加载集合并使用集合更新视图

> ID：15424387
> 
> 赞同：7
> 
> 时间：2013-03-15T03:52:36.213
> 
> 标签：javascript, jquery, model-view-controller, backbone.js

Backbone 新手，请承受我不太漂亮的主干 javascript 代码。

这是我的代码

```
var Schedule = Backbone.Model.extend({
    initialize: function () {
        console.log("initializing model");
    }
});

var ScheduleCollection = Backbone.Collection.extend({
    model: Schedule,
    url: "<%=students_swimming_classschedules_path%>",
    parse: function (resp) {
        return resp;
    },
});

var Schedules = Backbone.View.extend({
    initialize: function () {
        console.log("initializing view");
        collection.on('add', this.render, this);
        this.render();
    },

    render: function () {
        for (var i = 0; i < collection.length; i++) {
            s += "<tr><td>" + collection.models[i].get('account') + "</td><td>" + collection.models[i].get('status') + "</td></tr>";
        }
        this.$el.html(s);
    },
})

var schedules = new Schedules({
    el: $("#students")
});

window.setInterval(function () {
    collection.fetch();

}, 2000); 
```

此代码有效。我可以将所有学生加载到 $('#students') 容器中。

但我想每隔几秒钟从服务器和视图中自动重新加载集合。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T04:21:38.113

您现在还需要两件事：

第一：告诉你的视图在集合发生变化时更新。在您看来，这可能是您的初始化函数的修订版本。

```
initialize : function(){
  console.log("initializing view");
  collection.on('add', this.render, this);
  collection.on('reset', this.render, this);
  this.render();
}, 
```

当新项目添加到您的收藏时，这将刷新您的视图。注意：这将重新渲染整个`#students`部分。最好编写一个单独的方法，将新项目注入 DOM。

第二：您需要某种方式从服务器获取新数据。一旦您收到它，您只需将它们添加到您的收藏中。您可以使用集合的[fetch()方法，例如：](http://backbonejs.org/#Collection-fetch)

```
collection.fetch(); 
```

或者，如果您使用非骨干 ajax 调用收到它们，则可以手动注入：

```
collection.add(newData); 
```

由于您想在显示每个负载和显示之间延迟几秒钟，您可以使用下划线库中的[debounce](http://underscorejs.org/#debounce)方法，该方法已经是您的骨干网的依赖项。

# windows - 在 Haskell 中，如何在 Windows 上安装编码包？

> ID：15424390
> 
> 赞同：3
> 
> 时间：2013-03-15T03:52:45.620
> 
> 标签：windows, haskell, cygwin, cabal, cabal-install

我是 haskell 的新手，我正在做一个微不足道的项目，但我需要运行`cabal install encoding`. 但是，当我这样做时，它给了我这个错误：

```
Configuring encoding-0.6.7.2...
setup.exe: Missing dependency on a foreign library:
* Missing (or bad) header file: system_encoding.h
This problem can usually be solved by installing the system package that
provides this library (you may need the "-dev" version). If the library is
already installed but in a non-standard location then you can use the flags
--extra-include-dirs= and --extra-lib-dirs= to specify where it is.
If the header file does exist, it may contain errors that are caught by the C
compiler at the preprocessing stage. In this case you can re-run configure
with the verbosity flag -v3 to see the error messages.
cabal.exe: Error: some packages failed to install:
encoding-0.6.7.2 failed during the configure step. The exception was:
ExitFailure 1 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:52:45.620

**TL;博士：** `cabal install encoding -f-systemencoding`

* * *

[我发现了一些关于这个主题的论坛帖子](http://comments.gmane.org/gmane.comp.lang.haskell.cafe/72429)。说的最重要的是

> 缺少的标头是 langinfo.h - 我不知道它的来源，因为我在 Msys/MinGW 或 Cygwin 中都没有它，而且这些天我的 Cygwin 相当大。

从那里，我在 Cygwin 网站上查看了 langinfo.h 的位置。 [原来它带有 Cygwin 的默认安装。](http://cygwin.com/cgi-bin2/package-cat.cgi?file=cygwin/cygwin-1.7.17-1&grep=langinfo.h)这是它的路径：

```
usr/include/langinfo.h 
```

[所以我安装了 Cygwin](http://cygwin.com/setup.exe)，（实际上我已经安装了它）然后我像这样运行 cabal install ：

```
cabal install encoding --extra-include-dirs='C:\cygwin\usr\include' 
```

那注册包没有问题。

* * *

# 更新

尽管这确实允许您注册包，但您不能使用它。当我尝试 GHCi 时给了我这个错误：

```
Loading package encoding-0.6.7.2 ... linking ... ghc: unable to load package `encoding-0.6.7.2' 
```

我现在又被困住了。

# 更新 2

我从一位名叫fryguybob 的绅士那里得到了一些关于IRC 的帮助。这是您可以安装它的另一种方式：`cabal install encoding -f-systemencoding`. 这对我有用

# html - 为什么我的链接不起作用？

> ID：15424399
> 
> 赞同：0
> 
> 时间：2013-03-15T03:53:28.790
> 
> 标签：html, css, hyperlink, navigation

我有一些非常简单的代码。该链接在一秒钟前有效，但现在不行！（已检查并清空缓存）。

这是我的网站：[http](http://claireisabelwebb.com/index.html) ://claireisabelwebb.com/index.html 侧面的导航栏应该转到[http://claireisabelwebb.com/experiments.html](http://claireisabelwebb.com/experiments.html)等。链接应该在悬停时变为斜体，并且颜色不同在他们访问之后。

这是CSS：

```
/* Link Styles***********************************************************************/

#home_link a:link{
        font-family: 'Lato', sans-serif;
        color: #330066;  
        text-decoration: none;
        font-size: 115px;
        font-weight: 100;
        text-align: left;
        letter-spacing: -28px;
}

#home_link a:visited{
        font-family: 'Lato', sans-serif;
        color: #330066;  
        text-decoration: none;
        font-size: 150px;
        font-weight: 100; 
        text-align: left;
        letter-spacing: -28px;
}

#main_menu a:link{
        font-family:'Lato', sans-serif;
        font-size: 30px;
        font-weight: 100; 
        color:#336699;
        text-decoration: none; 
        text-align: left;
        letter-spacing:0.2em;
}

#main_menu a:visited{
        font-family: 'Lato', sans-serif;
        font-size: 30px;
        font-weight: 100;
        color:#005522;
        text-decoration: none; 
        text-align: left;
        letter-spacing:0.2em;
}

#main_menu a:hover{
        font-family:'Lato', sans-serif;
        font-style: italic;
        font-size: 30px;
        font-weight: 100; 
        color:#CC0066;
        text-decoration: none; 
        text-align: left;
        letter-spacing:0.2em;
} 

#sec_menu a:link{
    font-family:'Lato', sans-serif;
        font-weight: 100; 
        color:#CC0066;
        text-decoration: none;
        font-size: 16px; 
        text-align: left;
        letter-spacing:0.2em;
}

#sec_menu a:visited{
        font-family:'Lato', sans-serif;
        font-weight: 100; 
        color:#005522;
        text-decoration: none;
        font-size: 16px; 
        text-align: left;
        letter-spacing:0.2em;
}

#sec_menu a:hover{
        font-family:'Lato', sans-serif;
        font-style: italic;
        font-size: 16px;
        font-weight: 100; 
        color:#CC0066;
        text-decoration: none; 
        text-align: left;
        letter-spacing:0.2em;
} 
```

和html：

```
<!-- Main Navigation Menu ______________________________________________-->

    <div id="main_menu" class="main_wrapper_nav_box">
        <div id="sec_menu">
            <div class="main_page_nav_box">
                <a href="Experiments.html">EXPERIMENTS</a>
            </div>
            <div class="main_page_nav_box">
                <a href="writing.html">WRITING</a> 
            </div>
            <div class="main_page_nav_box">
                <a href="photography.html">PHOTOGRAPHY</a>
            </div>
            <div class="main_page_nav_box">
                <a href="graphics.html">GRAPHICS</a>
            </div>
            <div class="main_page_nav_box">
                <a href="artwork.html">ART WORK</a>
            </div>
            <div class="box_sec_nav_ms">
                <a href="artwork.html">Modernist Summer</a>
            </div>
            <div class="box_sec_nav_r">
                <a href="resume/Claire-Webb.pdf">R&#233;sum&#233;</a>
            </div>
        </div>
    </div> 
```

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T04:11:41.307

`float:left`如果没问题，您可以解决您的问题，而不是`.main_wrapper_nav_box`更改它`relative:position`并添加`z-index:1;`

```
.main_page_nav_box{
        display:block;
        position:relative;
    z-index:1;
        background: rgba(255,255,255,.85);
        width:200px;
        text-align: center;
        height: 25px;
        padding:10px 10px 10px 10px;
        border:0px ;
        margin-top:10px;
        margin-left:10px;
} 
```

工作[演示](http://jsfiddle.net/jhunlio/c7VA4/7/)

希望这有助于...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T03:56:33.280

您的`#wrapper_text_photo`div 位于导航的顶部。如果您重新工作，您的导航将起作用。

顺便说一句，您可以使用浏览器工具自己找到此类问题。我建议使用 Google Chrome 的开发者工具，或 Firefox 中的 Firebug，然后将鼠标悬停在页面中的不同元素上以查看它们占用的空间。然后，您可以删除元素以实时查看效果。（见下图蓝色区域）

![调试示例](../Images/bfced719b11cb5e1dc996805435ea7fb.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T04:00:44.540

您的带类的 div`wrapper_text_photo`覆盖了图像.. 使用 css 属性：`z-index=-1`对于该类

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T03:56:28.743

您必须`width:1000px;`将`wrapper_text_photo`其删除，然后查看链接是否有效。

```
In style.css line number 132 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T03:56:41.113

这个 DIV 是和阻止点击..

```
<div class="wrapper_text_photo">....</div> 
```

您可以尝试将其放在带有 CSS 的链接下。

```
.wrapper_text_photo { z-index: -100;} 
```

# javascript - 使用新的 REST API，用户是否必须离开您的网站才能确认付款？

> ID：15424402
> 
> 赞同：-1
> 
> 时间：2013-03-15T03:53:51.090
> 
> 标签：javascript, paypal

**更新：**好的，这是漫长的一天，而且已经是深夜了。似乎正常的信用卡收费不需要任何重定向到贝宝。这是链接：[https ://developer.paypal.com/webapps/developer/docs/api/#redirecturls-object](https://developer.paypal.com/webapps/developer/docs/api/#redirecturls-object)

从这个页面：[https ://developer.paypal.com/webapps/developer/docs/integration/web/accept-paypal-payment/](https://developer.paypal.com/webapps/developer/docs/integration/web/accept-paypal-payment/)

> 获得付款批准
> 
> 请注意上面示例中的 HATEOAS 链接。将用户定向到 PayPal 上的approval_url，以便用户可以批准付款。用户必须先批准付款，然后您才能执行和完成销售。

我读到必须将用户定向到 PayPal。我想使用 REST API 的全部原因是永远不要将我的用户重定向到 PayPal。这种达不到目的。我读对了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T04:58:46.710

你的观察是正确的。我们正在研究解决方案，以支持您正在寻找的体验。正如 Jobert 所说，在那之前我会推荐使用经典的 Adaptive Payments API。当我们向 REST api 添加新体验时，我们会及时通知您。

# c++ - 自定义 rand() 函数返回相同的值

> ID：15424406
> 
> 赞同：0
> 
> 时间：2013-03-15T03:54:07.590
> 
> 标签：c++, c, random

作为参考，我关注了这个[线程](https://stackoverflow.com/questions/2509679/how-to-generate-a-random-number-from-within-a-range-c)。

`main()`我从返回范围内的随机值的函数中调用此函数`[0, N]`：

```
int randr(int min, int max) { int r = (rand() % (max+1-min)+min); return r; } 
```

例如：

```
int main()
{
unsigned int r=128;
while(r--)
{
    int a = randr(0, 63);
    int b = randr(64, 127);
    printf("%d   %d\n", a, b);
}
return 0;
} 
```

问题是，每次执行程序时，变量`a`总是`b`包含相同的生成值，为什么*（我的意思是它在终端上总是打印相同的数据）*？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T03:59:08.867

从手册页`rand`：

> 该`rand()`函数返回一个伪随机整数，范围从 0 到`RAND_MAX` 包括（即数学范围`[0, RAND_MAX]`）。
> 
> 该 `srand()`函数将其参数设置为要返回的新伪随机整数序列的种子`rand()`。`srand()`通过使用相同的种子值调用这些序列是可重复的。
> 
> 如果未提供种子值，则该`rand()`函数将自动以值 1 为种子。

最后一句话特别相关。使用相同的种子，您将始终获得相同的伪随机数序列。而且由于您没有`srand()`明确使用，因此您的种子始终为 1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T03:55:58.353

尝试看一下 C++ 的[srand](http://www.cplusplus.com/reference/cstdlib/srand/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T04:00:34.407

你必须每次都用不同的东西为随机序列播种。

最常见的是`srand((unsigned)time(NULL));`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T03:58:40.437

只要种子是相同的rand，就会产生相同的序列。

# azure - 将 WinRT BackgroundUploader 与 Windows Azure Blob 存储结合使用

> ID：15424407
> 
> 赞同：0
> 
> 时间：2013-03-15T03:54:08.713
> 
> 标签：azure, windows-8, windows-store-apps, azure-storage, winjs

在使用 JavaScript 的 Windows 8 应用程序中，我尝试使用[此技术中](http://www.nickharris.net/2012/11/how-to-upload-an-image-to-windows-azure-storage-using-mobile-services/)定义的共享访问签名将文件上传到 Windows Azure Blob 存储，但我想使用 WinRT BackgroundUploader 而不是标准存储客户端上传器。当我调用此代码时，没有任何反应，并且 Windows Azure 管理控制台中的存储容器为空。

有没有人这样做过？

有人对我应该如何将 SAS 放入 BackgroundUploader 的 serverCredential 属性有建议吗？

```
 table.insert(upload)
        .then(function (e) {

            var backgroundTransfer = Windows.Networking.BackgroundTransfer,
                uploader = new backgroundTransfer.BackgroundUploader(),
                uri = new Windows.Foundation.Uri(upload.sas),
                operation,
                sasToken = uri.query.substr(1);

            uploader.setRequestHeader("Content-Type", file.contentType);
            uploader.setRequestHeader("x-ms-blob-type", "BlockBlob");

            operation = uploader.createUpload(uri, file);

            operation.startAsync().then(function (uploadComplete) {
                console.info(uploadComplete);
                complete("https://" + uri.host + "/" + upload.containerName + "/" + file.name);
            },
            function (uploadError) {
                console.error(uploadError);
            },
            function (uploadProgress) {
                console.info(uploadProgress);
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:21:16.983

首先，请将[BackgroundUploader.Method](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.backgroundtransfer.backgrounduploader.method.aspx)设置为“PUT”，因为默认的“POST”方法不能用于上传 blob。除此之外，请检查以下内容：

*   SAS 令牌应具有写入权限。
*   上传的文件必须小于 64MB，因为这是[Put Blob API](http://msdn.microsoft.com/en-us/library/windowsazure/dd179451.aspx)允许的最大限制。

# linux - 创建日志文件计数器

> ID：15424408
> 
> 赞同：0
> 
> 时间：2013-03-15T03:54:11.213
> 
> 标签：linux, perl

perl 语法的新手，尝试设置一个计数器来计算日志文件中出现密码失败的次数，然后将总数打印到控制台。我在屏幕上打印了很多数字，而不是最后一个总数。任何想法或方向都会有所帮助。

```
#!/usr/bin/perl
$count = 0;

open (MYFILE, 'auth.log');
while (my $line = <MYFILE>){
if ($line =~ /Failed password/){
$count++;
}
print $count;
#print "$line\n" if $line =~ /Failed password/;
#this was a print test to see if it would only print the failed password strings in the file.    
}
close (MYFILE); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T03:58:46.107

您需要移动循环的`print $count`外部。`while`

您还应该检查`open`我们的返回码，否则您将不知道文件是否丢失或无法打开。

```
#!/usr/bin/perl

use warnings;
use strict;

my $count = 0;

open (my $fh, '<', 'auth.log') or die $!;
while (my $line = <$fh>){
    if ($line =~ /Failed password/){
        $count++;
    }
}
close $fh;
print $count; 
```

最后，这是从命令行执行此操作的另一种方法：

```
grep -c 'Failed password' auth.log 
```

# c++ - 试图写一个c++栈程序

> ID：15424409
> 
> 赞同：0
> 
> 时间：2013-03-15T03:54:37.340
> 
> 标签：c++, visual-c++, stack

```
#include "cstack.h"
#include <iostream>
#include <cstring>
using namespace std;

bool isValidExpression (CStack&, char*);

int main (void)
{
   char expression[21];
   expression[0-21]=0;
   cout<< "Enter an expression: ";
   cin >>expression;
   CStack stack1;

   if (isValidExpression (stack1, expression)==true)
   {
      cout << "\nIt's a valid expression";
   }
   else
   {
      cout << "\nIt's NOT a valid expression";
   }
   return 0;
}

bool isValidExpression (CStack& stackA, char* strExp)
{

   for(int a=0;a<21 && strExp[a]!=0;a++)
   {
      cout<<"Action A" <<endl;
      stackA.push(strExp[a]);
   }
   /*if(strExp[a]=='}'||strExp[a]==']'||strExp[a]==')')
     {

     }
     else*/

   if(strExp[stackA.Top()]=='['||strExp[stackA.Top()]=='{'||strExp[stackA.Top()]=='(')
   {
      return false;
   }

   for(int a=stackA.Top();a>0;a--)
   {
      if(strExp[a]=='['||strExp[a]=='{'||strExp[a]=='(')
      {
         stackA.pop();
      }
      else if(strExp[a]==']')
      {
         for(int g=stackA.Top();g>0;g--)
         {
            if(strExp[a-1]=='[' && strExp[a-1]!=0)
            {
               stackA.pop();
               g--;
               break;
            }
            else if(strExp[a-1]==0)
            {
               return false;
            }
         }
      }
      else if(strExp[a]=='}')
      {
         for(int g=stackA.Top();g>0;g--)
         {
            if(strExp[a-1]=='{' && strExp[a-1]!=0)
            {
               stackA.pop();
               break;
            }
            else if(strExp[a-1]==0)
            {
               return false;
            }
         }
      }
      else if(strExp[a]==')')
      {
         for(int g=stackA.Top();g>0;g--)
         {
            if(strExp[a-1]=='(' && strExp[a-1]!=0)
            {
               stackA.pop();
               break;
            }
            else if(strExp[a-1]==0)
            {
               return false;
            }
         }
      }
   }
   return true;
} 
```

我在这个程序中要做的是输入一个由以下字符组成的语句：]、}、)、[、{、(。所有字符都像这样相互靠近的语句 ([])会是真的。(][) 不会是真的。[] 会是真的。[(]){{ 不会是真的。

这个程序是用 C++ 编写的，我必须使用 C 字符串而不是字符串。我必须使用诸如 push、pop、top 之类的堆栈函数。现在的代码将认为 [] 正确和 ][ 不正确，但除此之外它只认为所有输入都是正确的。这段代码是我到目前为止所拥有的，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T04:02:26.083

```
expression[0-21]=0; 
```

该语句的字面意思是访问数组的位置 -21 并将其设置为 0。这是未定义的行为，因为 21 个元素的数组的位置范围从 0 到 20（注意，21 与 -21 一样错误）。`0-21`不是*范围*，而是产生单个值的算术运算。如果您想要的是数组的初始化，可以在定义中完成：

```
char expression[21] = {}; 
```

或通过其他方式，如循环或`memset`（在这种情况下，存储在数组中的类型是 POD）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T04:12:05.667

我认为您使问题变得比需要的更复杂，有关实施的提示：

```
1\. You shouldn't use `stack` as an input for the testing function, 
    that makes no sense, just use it locally.
2\. You can scan over the whole expression and push some characters,
   if meet another characters, just check if the stack content meets the requirements,
   if not, invalid expression, say `1+(2*3)`, when `)` is met, we should just found
   a corresponding `(`. 
```

我意识到给你完整的代码来复制是没有帮助的，所以自己更彻底地考虑一下，祝你好运！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T04:22:08.730

这是一个简单的问题，您应该能够自己解决。这里有一个算法来指导你（当然我不会为你写代码，因为那是完全错误的）：

1.  从中点到结束遍历输入，在每一步将一个元素压入堆栈。
2.  从开始到中点遍历输入，在每一步中，从堆栈中弹出一个元素以与输入元素进行比较。
3.  如果堆栈元素是“]”并且输入元素是“[”，则继续。检查每个接受的分隔符类型，如果它们在正确的方向上匹配，则继续。如果它们不正确匹配，则失败。忽略不属于可接受的分隔符类型的元素。

您需要在这里弄清楚一点来处理中点（如何计算它，以及如何处理偶数/奇数个元素等）。我建议编一个好答案和一个坏答案，然后先在纸上测试算法。祝你好运！

# php - 如何在 PHP 中使用 MySQL 获取单个单元格？

> ID：15424414
> 
> 赞同：0
> 
> 时间：2013-03-15T03:55:27.933
> 
> 标签：php, mysql, sql

每当我尝试运行一些代码来获取特定单元格时，都会出现错误。这是代码：

```
 <?php
            $query = mysql_query("SELECT about_me FROM users WHERE username = '" . $mcu . "'");
            if($query === FALSE) {
        die(mysql_error()); // TODO: better error handling
    }

    while($row = mysql_fetch_array($query))
    {
        $abme = mysql_num_rows($query);
    }
        ?>
        About Me:<p> <?php echo "$abme" ?></p> 
```

这是错误：

```
Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in location/to/file.php on line 96 
```

第 96 行是`$row = mysql_fetch_array($query);`.

我做了一个模具检查，它在“where子句”中显示未知列“user_name_here”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:58:21.597

试试这个：

```
$query = mysql_query("SELECT about_me FROM users WHERE username = '" . $mcu . "'"); 
```

这是因为您没有引用参数。

此外，您应该将参数包装`mysql_real_escape_string()`或切换到 mysqli 或 PDO 以保护您的应用程序免受 SQL 注入攻击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T04:00:01.847

听起来你的`$query`is `false`，意思是`mysql_query()`失败了。您可能有一个错误的 SQL 查询。

```
$query = mysql_query("SELECT about_me FROM users WHERE username = ".$mcu.""); 
if (!$query) {
    die(mysql_error());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T05:05:03.103

```
$query = mysql_query("SELECT about_me FROM users WHERE username = ".$mcu.""); 
if (!mysql_num_rows($query)) {
    die(mysql_error());
} 
```

# php - 无法读取 PDF 文件

> ID：15424415
> 
> 赞同：-1
> 
> 时间：2013-03-15T03:55:31.383
> 
> 标签：php, pdf

我想在 php 中读取 pdf 文件并将内容存储在变量中而不安装任何东西。

我能够阅读 doc 文件和 .txt 文件，但是当我阅读 pdf 文件时我得到了一些特殊字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T04:02:07.437

您可以在以下链接中阅读有关在 PHP 中阅读 PDF 的有用信息 -

**1：** [http ://webcheatsheet.com/php/reading_clean_text_from_pdf.php](http://webcheatsheet.com/php/reading_clean_text_from_pdf.php)

**2：** [用php读取pdf文件](https://stackoverflow.com/questions/1004478/read-pdf-files-with-php)

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:10:17.410

您可以为此目的使用[fpdf](http://www.fpdf.org/)和[FPDI](http://www.setasign.de/products/pdf-php-solutions/fpdi/)
这是 FPDI 的示例代码，您可以在他们的网站上找到它以及进一步的支持

```
<?php
require_once('fpdf.php');
require_once('fpdi.php');

$pdf = new FPDI();

$pagecount = $pdf->setSourceFile('TestDoc.pdf');
$tplidx = $pdf->importPage(1, '/MediaBox');

$pdf->addPage();
$pdf->useTemplate($tplidx, 10, 10, 90);

$pdf->Output('newpdf.pdf', 'D');>
//further user code 
```

你也可以从[这个博客获得一些帮助](http://davidwalsh.name/read-pdf-doc-file-php)

# jquery - jQuery UI datepicker 值没有被提交

> ID：15424416
> 
> 赞同：0
> 
> 时间：2013-03-15T03:55:35.297
> 
> 标签：jquery, html, jquery-ui, datepicker

我有一个 JQuery UI 日期选择器的问题。我在表单中添加了两个日期选择器，但是当我提交表单时，两个日期选择器的值都没有提交。我尝试使用 POST 和 GET 但都没有成功，甚至没有提交字段的名称。我错过了什么？

这是初始化日期选择器的代码：

```
$(function() {
  $("#datepicker_Inicio,#datepicker_Fin").datepicker({
    showOn: "button",
    buttonImage: "./Images/date.gif",
    buttonImageOnly: true,
    dateFormat: "yy-mm-dd"
  });
}); 
```

这是表单的代码：

```
<form class="agregarForm" action="saveClient.php" name="agregarClienteForm" method="get">
   <label class="formTitle">Agregar Cliente</label>
   <br><br>
   <label>Nombre:</label><br>
   <input type="text" name="nombre_cliente_nuevo" style="width:200px;margin-top:7px;">
   <br><br>
   <label>Duración del Contrato:</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
   <label>Fecha de Inicio:</label>&nbsp;
   <input id="datepicker_Inicio" type="text"  style="width:100px;" name="fecha_inicio_contrato" onchange="dateFrom()" disabled><br>
   <input id="duracion" style="width:50px;" type="number" min="1" name="duracion_contrato" onchange="dateFrom()">&nbsp;      <label>meses</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
   <label>Fecha de Fin:</label>&nbsp;
   <input id="datepicker_Fin" type="text" style="width:100px;" name="fecha_fin_contrato" disabled><br><br>
   <label>Presupuesto del Contrato: $</label><br>
   <input type="text" name="presupuesto_contrato"><br><br>
   <label>Porcentaje de ingreso: </label><br>
   <label>BTW:&nbsp;</label>
   <input type="text" style="width:50px;" name="ingreso_btw"><label style="margin-right:4%;">%</label>
   <label>Herramientas:&nbsp;</label>
   <input type="text" style="width:50px;" name="inversion_herramientas"><label>%</label><br><br>
   <label>Categor&iacute;a:</label><br>
   <select id="categoriasList" name="categoria"><option>Pol&iacute;tica</option><option>IP</option></select><br><br>
   <label>Subcategor&iacute;a</label><br>
   <select id="subCat" name="subcategoria"><option id="sub1">Campa&ntilde;as</option><option id="sub2">Gobierno</option></select><br><br>
    <input type="button" value="Agregar Cliente" onClick="this.form.submit()">
 </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:59:32.610

您的日期文本字段被禁用。他们不会随表格一起发送。去除那个

```
禁用
```

部分。

# java - 检查 | 或 || 正则表达式

> ID：15424418
> 
> 赞同：1
> 
> 时间：2013-03-15T03:55:42.753
> 
> 标签：java, regex

这是我要拆分的示例字符串。我正在使用`string.split("\\|")`. 但是由于字符串本身具有双派克字符，因此我得到了 "" 。

我想检查是否用 pike`|`或 double pike拆分字符串`||`。

```
aaa|bbb|ccc|ddd||eee|iii|| 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T03:56:53.443

您可以使用

```
string.split("\\|\\|?") 
```

这`?`使得第二个管道是可选的。

您可能还想使用：

```
string.split("\\|+") 
```

如果您连续有两个以上，则为“一个或多个`|`”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T03:57:47.860

您可以指定一个出现范围：

```
"aaa|bbb|ccc|ddd||eee|iii||".split("\\|{1,2}") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T03:58:10.343

您可以改用此正则表达式：-

```
String regex = "\\|\\|?";
str.split(regex); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T03:59:29.300

试试这个：

```
string.split("\\|{1,2}");
// A pipe ------^ ^ ^
// once           | |
//      or twice    | 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T04:25:15.820

你可以试试这个正则表达式：`String[] splits = yourString.split("[|||]+");`+ 之后将连续的分隔符视为一个。如果您不想要这个，您可以删除加号。示例如下所示：

```
public class RegexTest {

    public static void main(String[] args) {
        String yourString = "aaa|bbb|ccc|ddd||eee|iii||";
        String[] splits = yourString.split("[|||]+");
        for (String split : splits) {
            System.out.println(split);
        }

    }
} 
```

# c# - 不兼容的双重转换 - 编译器未检测到

> ID：15424422
> 
> 赞同：3
> 
> 时间：2013-03-15T03:56:07.390
> 
> 标签：c#, casting

在今晚测试一些代码时，我天真地尝试了双重转换以将 a 转换`List`为`IQueryable`（注意：我知道`.AsQueryable()`，请阅读整个问题）：

```
var data = (IQueryable<MyType>)(List<MyType>)Application["MyData"]; 
```

我没有考虑这是否有效，但我注意到 Visual Studio 中没有错误，并且我能够毫无错误地编译代码，所以我认为它会工作。但是在我发布 Web 应用程序并查看页面后，我收到以下错误（如预期的那样）：

> 无法将“System.Collections.Generic.List`1[MyType]”类型的对象转换为“System.Linq.IQueryable`1[MyType]”类型。

即使`Application["MyData"]`在编译时不知道 of 的类型，难道不知道我正在尝试从 to 强制`List<MyType>`转换`IQueryable<MyType>`，这是无效的吗？在这种情况下，为什么我不会收到编译器错误？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T03:58:15.217

该类[`List<T>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)不是密封的，因此编译器无法*确定*从`List<T>`to的转换`IQueryable<T>`是无效的。

假设你定义一个像这样的子类

```
class QueryableList<T> : List<T>, IQueryable<T>
{
    ...
} 
```

那么演员表*将*是有效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T05:13:31.957

只是因为`IQueryable<T>`是一个接口。

```
var anywayListOfMyType=
    (IWhatsoever)(IFormatProvider)(IIntellisenseBuilder)new List<MyType>(); 
```

会编译。

ps

`IWhatsoever`并不存在。

# powershell - 在powershell的多行文本框中设置行限制

> ID：15424425
> 
> 赞同：0
> 
> 时间：2013-03-15T03:56:21.767
> 
> 标签：powershell

我一直在努力弄清楚如何使用从文本框到 .txt 的“Out-File”并限制该文件的行数。在从 TextFile 排序到 Textbox 时，我已经能够使用 Get-content 并使用 -totalcount 5 来​​执行此操作。

我现在有这个。我只是不知道如何限制从盒子 $objOutputBox.Text 拉到文件 chines.txt 的行数。如果我说 20 行是 $objOutputBox.Text 中降序的名称，而我只希望 10 行结束，这就是我想要完成的。

```
$objOutputBox.Text | Out-File C:\temp\PROD\chines.txt 
```

在 Poweshell 中使用 Out-File 时，是否有一种简单的方法来设置行限制？我遇到的另一个问题是，当我在文本框中逐行键入并单击按钮以输出文件时，它们按降序放置到 chines.txt 中。当我使用 Get-Content 从另一个文件（在 .txt 中降序）获取一些行以填充文本框（降序）时，然后我使用 Out-File 将这些相同的行推送到 chines.txt 它们被放置为下面这样。

kvmlcops0263cdc kvmlcops0264bdc kvmlcops0264cdc kvmlcops0265bdc kvmlcops0265cdc

代替

kvmlcops0263cdc

kvmlcops0264bdc

kvmlcops0264cdc

kvmlcops0265bdc

kvmlcops0265cdc

当我直接在框中输入名称并使用 Out-File 时，它​​们会按上面的降序排列到 txt 中。即使在文本框中它们正在下降，这是否有原因？

非常需要您的帮助并非常感谢。

谢谢，

迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:19:46.213

对于第一个问题，Andy 举了一个很好的例子，对于第二个问题，我认为这是因为您将 get-content 的输出直接分配给 $text_box.Text 之类的

```
$lines = Get-Content "temp.txt"
$text_box.Text = $lines 
```

为了让 PowerShell 自动将字符串数组`$lines`连接成字符串，您需要

```
$text_box.Text = $lines -join "`n" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T04:30:58.513

尝试这个：

```
[void] [System.Reflection.Assembly]::LoadWithPartialName("System.Windows.Forms")    
$text_box = New-Object System.Windows.Forms.TextBox     
$text_box.Multiline = $true 
$text_box.Text = "cat`nhat" 
$text_box.Text.Split("`n") | Select -First 1 | Out-File output.txt 
```

拆分换行符上的文本``n`并用于`Select-Object`过滤您想要的数量。

# php - 如何在 mySQL 中构建更好的评级表？这样合适吗？

> ID：15424428
> 
> 赞同：2
> 
> 时间：2013-03-15T03:56:41.057
> 
> 标签：php, android, mysql

我是 mySQL 的新手，在构建表方面需要帮助。以下是条件：

1.  每个用户只能在每家餐厅评分一次（第二次评分将更新之前的记录）。

2.  平均值 = (AverageQuality + AverageService + AverageClealiness)/NumofRates

3.  AverageQuality = 所有用户的 (userRateQuality) / 用户数率..

4.  AverageService = 所有用户的 (userRateService) / 用户数率..

以下是我的表：

```
CREATE TABLE IF NOT EXISTS `ratings` (
    `Average` int(5) NOT NULL,
    `AverageQuality` int(5) NOT NULL,
    `AverageClealiness` int(5) NOT NULL,
    `AverageService` int(5) NOT NULL,
    `NumofTotalRates` int(11) NOT NULL,
    `userID` varchar(20) NOT NULL,
    `restaurantID` int(11) NOT NULL,
    `userRateQuality` int(5) NOT NULL,
    `userRateService` int(5) NOT NULL,
    `userRateClealiness` int(5) NOT NULL
) 
```

我知道这很奇怪，但我被这个问题困扰了几天，我不知道如何修复这个架构或构建一个更好的架构。我需要一些建议/指导。请回复或提出任何问题，因为这可能有助于改善我的餐桌。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T04:05:18.907

您的表结构实际上没有意义。您应该存储每个用户对质量、清洁度和服务的评分。所以你可以做类似的事情

```
CREATE TABLE IF NOT EXISTS ratings (
   userID varchar(20) NOT NULL, 
   restaurantID int(11) NOT NULL, 
   userRateQuality int(5) NOT NULL, 
   userRateService int(5) NOT NULL, 
   userRateClealiness int(5) NOT NULL )
) 
```

获得此数据后，您可以运行查询以获取平均评分。您不希望在存储用户评分的同一个表中存储平均评分，因为每次有人添加新评分时平均值都会发生变化。要获得平均值，可以使用 MySQL AVG 函数。 [http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)

# javascript - 谷歌云端硬盘 API OAuth 2.0；错误：origin_mismatch

> ID：15424441
> 
> 赞同：13
> 
> 时间：2013-03-15T03:57:49.243
> 
> 标签：javascript, google-drive-api, google-drive-realtime-api

我在为我的网站创建有效的 google drive API 时遇到问题。我可能听起来像一个完整的菜鸟，但我在我的主 ftp 目录中创建了一个名为 quickstart.html 的文件，并从[https://developers.google.com/drive/quickstart-js#step_1_enable_the_drive_api](https://developers.google.com/drive/quickstart-js#step_1_enable_the_drive_api)复制并粘贴了代码并替换了客户端id 和我的客户 id，在我的设置中，我将 Javascript Origins URL 设置为我的主 url (www.domainname.com)，我为该域有一个单独的索引页面，所以要访问谷歌驱动器，我只需转到[http： //域名.com/ quickstart.html](http://domainname.com/quickstart.html) ? 因为当我这样做并单击“授权”时，我会收到 google Origin Mismatch 错误。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-01-11T12:22:18.290

在 Api 控制台中，将您的重定向网址替换为 http 并删除 https，您还可以使用“范围”：“ [https://www.googleapis.com/auth/plus.login](https://www.googleapis.com/auth/plus.login) [https://www.googleapis.com/auth/userinfo .email](https://www.googleapis.com/auth/userinfo.email) ' . 这个解决方案对我有用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-05-13T17:39:30.443

验证“Web 应用程序的客户端 ID”部分下的“JavaScript origins:”属性和您应用登录代码的页面的 URL 必须相同。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-18T16:04:46.227

确保您实际访问的是 www.domainname.com 而不仅仅是 domainname.com。某些浏览器会隐藏实际的 url，直到您将 url 复制粘贴到另一个程序中。确保键入完整的 URL，包括 http 和 www。绝对确定。

# python - 在 Python 中计算第 n 个 Unity 根

> ID：15424449
> 
> 赞同：3
> 
> 时间：2013-03-15T03:58:16.073
> 
> 标签：python, fft, complex-numbers, dft

因此，我正在尝试编写一个算法 croot(k, n)，它返回 n == n 的第 k 个统一根。我得到的答案大多是正确的，但它给了我非常奇怪的表示，对于某些数字来说似乎是错误的。这是一个例子。

```
import cmath

def croot(k, n):
    if n<=0:
        return None
    return cmath.exp((2 * cmath.pi * 1j * k) / n)

for k in range(8):
    print croot(k, 8) 
```

输出是：

```
(1+0j)
(0.70710...+0.70710...j)
(6.12323399574e-17+1j) 
```

哇哇哇。所以当 k = 2 和 n = 8 时的根是错误的，因为它应该只是 i，它可以表示为 1j、j 或 1.00000j 等。有人可以帮我吗？我这样做是因为我正在尝试编写 FFT 算法。我对复数和 Python 不是很有经验，所以我很可能犯了一个简单的错误。

谢谢，

如果你们需要任何其他信息，请询问。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T04:07:38.567

这是一个单位的立方根和第四个根的用法示例。输入数组应被解释为多项式系数。

```
>>> import numpy as np
>>> np.roots([1, 0, 0, -1])
array([-0.5+0.8660254j, -0.5-0.8660254j,  1.0+0.j       ])
>>> np.roots([1, 0, 0, 0, -1])
array([ -1.00000000e+00+0.j,   5.55111512e-17+1.j,   5.55111512e-17-1.j,
         1.00000000e+00+0.j]) 
```

* * *

***编辑：*** 多项式系数在输入数组`p`中`np.roots(p)`按以下顺序给出：

`p[0] * x**n + p[1] * x**(n-1) + ... + p[n-1]*x + p[n]`

因此，例如，要返回`n`方程 的解的 th 单位根`1 * x**n - 1 == 0`，您可以使用类似 的输入`p = [1] + [0] * (n - 1) + [-1]`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-15T04:01:39.637

看看这个数字

```
(6.12303176911e-17+1j) 
```

`6.12303176911e-17`=`0.0000000000000000612303176911`非常小（接近于零）。您看到的是由于浮点数的有限表示而导致的舍入错误

误差相当于测量到太阳的距离在10微米左右。如果您对来自现实世界的数据运行 FFT，则测量误差通常远大于此。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-09T23:49:08.890

使用 Python 3.5.2，`numpy.roots`当我尝试确定第 1,200 个统一根时，内存不足并导致我的 Chromebook 崩溃。当他们构造多项式的伴随矩阵时发生了崩溃，所以我认为他们没有使用稀疏表示。从文档：

> 该算法依赖于计算伴随矩阵的特征值

如果您只需要计算单位的根，那么三角方法在时间和空间复杂度上都渐近更好：

```
def nthRootsOfUnity1(n): # linear space, parallelizable
    from numpy import arange, pi, exp
    return exp(2j * pi / n * arange(n)) 
```

如果您愿意放弃并行化，您可以使用生成器为每个附加根实现恒定空间和恒定时间，而第一种方法必须在返回之前计算所有 n 个根：

```
def nthRootsOfUnity2(n): # constant space, serial
    from cmath import exp, pi
    c = 2j * pi / n
    return (exp(k * c) for k in range(n)) 
```

在我的机器上并且不使用并行化，这些方法在计算第 1,000 个根所需的时间内计算第 10,000,000`numpy.roots`个根：

```
In [3]: n = 1000

In [4]: %time _ = sum(numpy.roots([1] + [0]*(n - 1) + [-1]))
CPU times: user 40.7 s, sys: 811 ms, total: 41.5 s
Wall time: 10.8 s

In [5]: n = 10000000

In [6]: %time _ = sum(nthRootsOfUnity1(n))
CPU times: user 4.98 s, sys: 256 ms, total: 5.23 s
Wall time: 5.23 s

In [7]: %time _ = sum(nthRootsOfUnity2(n))
CPU times: user 11.6 s, sys: 2 ms, total: 11.6 s
Wall time: 11.6 s 
```

# ios - 为什么我的 UITableViewCell 没有以任何样式显示 detailTextLabel？

> ID：15424453
> 
> 赞同：6
> 
> 时间：2013-03-15T03:58:23.730
> 
> 标签：ios, uitableview, detailtextlabel

这个让我把头发拉出来。我只是想用 UITableViewCellStyleSubtitle 样式创建一个带有文本和细节的表格。但细节并没有显示出来。通常这是因为有人忘记用正确的样式初始化单元格，但在这种情况下不是这样。我已经尝试了所有四种单元格样式，但细节没有显示在其中任何一个中，尽管当我使用 UITableViewCellStyleValue2 时文本标签确实移到了右侧。

我之前已经成功创建过很多次表格。在这种情况下，我能想到的唯一显着区别是我没有使用 UITableViewController。相反，我像任何其他视图一样嵌入 UITableView，并连接我自己的数据源和委托。

我已经将关键方法归结为：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    // Get the UITableViewCell (out of the recycling pool, or de novo)
    NSString *reuseID = @"CELL";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:reuseID];
    if (not cell) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue2 reuseIdentifier:reuseID] autorelease];
    }

    cell.textLabel.text = @"Foo";
    cell.detailTextLabel.text = @"Bar";
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    cell.detailTextLabel.frame = CGRectMake(10, 20, 200,22);        // required
    cell.detailTextLabel.font = [UIFont boldSystemFontOfSize:12];   // also required
    //[cell setNeedsLayout];  (makes no difference)
    return cell;
} 
```

仅当我包含上面的“必需”行（并使用除默认值以外的任何单元格样式）时，我才能看到详细信息文本，即使我这样做，文本标签的位置也会与详细信息标签的位置完全重叠.

所以看起来好像初始化程序正在创建 detailTextLabel UILabel，但将其字体大小设置为零，并将其框架设置为空的或屏幕外的东西。（我试过在调试器中检查这些，但它不是很有用——字体大小为零，textLabel 和 detailTextLabel 的框架都是空的，但 textLabel 总是显示得很好。）

显然，如果必须，我可以通过手动调整标签大小和字体来解决它。但在这种情况下，我不得不这样做，这让我非常不安，通常你只需设置样式和文本，布局是自动的。我搜索了谷歌和堆栈溢出，但找不到任何对类似问题的引用。有人知道这里发生了什么吗？

（在 iOS 6.1 下测试。）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-09-16T17:23:44.330

在尝试了所有这些事情之后，当我在 Storyboard 中将表格视图单元格样式设置为“字幕”时，字幕出现在我面前![IB 故事板单元格设置](../Images/52e6e5ea016927f8e42e4ff33b182ce9.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-12-08T16:05:43.350

注册标准`UITableViewCell`类可能会阻止您使用 styled `UITableViewCell`s，因为此代码将永远不会被执行：

```
if (cell == nil) { 
    // Cell will never be nil if a class/nib is registered
} 
```

**解决方案**：您是注册一个笔尖还是`Class`您的`UITableView`？如果您有如下一行，请尝试**删除**它：

```
[self.tableView registerClass:[UITableViewCell class] 
       forCellReuseIdentifier:"cellReuseID"]; 
```

并更新您的 dequeue 语句，如下所示：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:"cellReuseID"];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 
                                  reuseIdentifier:"cellReuseID"];
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-15T18:22:08.837

好的，事实证明我们在这个应用程序上有一个非常不寻常的构建过程，它没有正确识别应用程序针对 Cocoa 框架构建的 SDK。

结果，Cocoa 认为这是一个非常古老的应用程序——从 iOS4 之前的日子开始，在添加 detailTextLabel 之前。因此，该框架试图通过模拟 iOS4 之前的行为来提供帮助（通过以多种方式隐藏 detailTextLabel）。在 _UIApplicationLinkedOnOrAfter 上设置断点并强制它返回 1，让我可以绕过这个功能并证明这是原因。（现在我们只需要修复我们的构建过程来报告正确的 SDK 版本。）

不用说，这不是大多数人会遇到的事情。但我想我还是为了后人的缘故在这里发布答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T04:31:57.943

我希望这对你有帮助，一旦检查

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
    } 
    cell.textLabel.text = @"Foo";
    cell.detailTextLabel.text = @"Bar";
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    cell.textLabel.frame = CGRectMake(10, 20, 100,22);        
        return cell;
} 
```

诸如字体大小，cell.labels 的背景颜色更改之类的操作是您在以下方法中必须执行的所有功能。

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath{
    cell.detailTextLabel.font = [UIFont boldSystemFontOfSize:10];  
    cell.textLabel.backgroundColor=[UIColor redColor];
    cell.textLabel.frame = CGRectMake(10, 20, 100,22); 
    cell.detailTextLabel.frame = CGRectMake(10, 20, 200,22); 

} 
```

如果您在 cellForRowAtIndexPath 此方法中更改这些类型的属性，那么您将丢失这些属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-21T19:34:22.417

问题是您很可能使用

```
[self.tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:@"CELL"]; 
```

意义

```
if (not cell) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue2 reuseIdentifier:reuseID] autorelease];
} 
```

永远不会被调用，因为单元格永远不会为空。因此，表格将始终将单元格初始化为 UITableViewCellStyleNone。

解决此问题的唯一方法是从情节提要中注册单元格或子类化 UITableViewCell 并覆盖

```
(id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier 
```

方法。

这对我有用：

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier {
    if (self = [super initWithStyle:UITableViewCellStyleValue2 reuseIdentifier:reuseIdentifier]) {

    }
    return self;
} 
```

# c# - C# 编程使用对象、数据字段和数组

> ID：15424455
> 
> 赞同：-5
> 
> 时间：2013-03-15T03:58:34.800
> 
> 标签：c#, arrays

如何创建包含对象的数组，提示用户输入每个对象的数据？我有一些代码，但出现了一些不存在“名称”的错误

```
//Main 
public class TaxPayerDemo
{
    public static void Main()
    {
        Taxpayer[] t = new Taxpayer[10];
        int x;
        for (x = 0; x < t.Length; ++x)
        {
            t[x] = new Taxpayer(SSN, Gross);
            Console.WriteLine("Type your SSN");
            t.SSN = Console.ReadLine();
            Console.WriteLine("Please enter your income");
            t.Gross = Convert.ToString(Console.ReadLine());

        }
    }
    class Taxpayer
    {

        private string ssn;
        private double gross; 
        private double tax;

        public string SSN
        {
            get
            {
                return ssn;

            }
            set
            {
                CalcTax();
            }
        }
        public double Gross
        {
            get
            {
                return gross;

            }
            set
            {
                CalcTax();
            }
        }

        private void CalcTax()
        {
            if (tax < 30000)
            {
                tax = .15 * Gross;
            }
            else
                if (tax > 30000)
                {
                    tax = .28 * Gross;
                }
            }
        }
    }
} 
```

错误：

> 错误 4“System.Array”不包含“Gross”的定义，并且找不到接受“System.Array”类型的第一个参数的扩展方法“Gross”（您是否缺少 using 指令或程序集引用？） C:\homework\300\ConsoleApplication11\ConsoleApplication1\Class1.cs 20 19 ConsoleApplication1
> 
> 错误 3“System.Array”不包含“SSN”的定义，并且找不到接受“System.Array”类型的第一个参数的扩展方法“SSN”（您是否缺少 using 指令或程序集引用？） C:\homework\300\ConsoleApplication11\ConsoleApplication1\Class1.cs 18 19 ConsoleApplication1
> 
> 错误 2 当前上下文中不存在名称“Gross” C:\homework\300\ConsoleApplication11\ConsoleApplication1\Class1.cs 16 42 ConsoleApplication1
> 
> 错误 1 ​​当前上下文中不存在名称“SSN”C:\homework\300\ConsoleApplication11\ConsoleApplication1\Class1.cs 16 37 ConsoleApplication1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T04:08:01.327

错误1和2就是这行代码引起的

```
t[x] = new Taxpayer(SSN, Gross); 
```

在这里，`SSN`and`Gross`不是函数内的变量或`TaxPayerDemo`类的成员。

错误 3 和 4 来自这部分代码：

```
t.SSN = Console.ReadLine();
Console.WriteLine("Please enter your income");
t.Gross = Convert.ToString(Console.ReadLine()); 
```

您正在尝试访问`SSN`，并且`Gross`好像它们是数组本身的属性，但它们实际上是其元素的属性。

接下来你有一个问题，因为`Gross`它是 type `double`，但`Convert.ToString`返回一个`string`. 您必须将控制台输入解析为 a`double`以将其分配给您的属性。

它应该是：

```
t[x] = new Taxpayer();
...
t[x].SSN = Console.ReadLine();
Console.WriteLine("Please enter your income");
t[x].Gross = double.Parse(Console.ReadLine()); 
```

正如**Paul Sasik 的**回答所指出的那样，`CalcTax`方法中还有另一个。您的实施有

```
if (tax < 30000)
...
else if (tax > 30000) 
```

`tax == 30000`这意味着存在`tax`根本不会计算的情况。其次，我想知道您为什么要尝试`tax`使用`tax`. 第一次调用后，该值可能会发生变化。我认为你的意思是测试`Gross`。我会推荐这样的东西：

```
var rate = (this.Gross < 30000) ? 0.15 : 0.28;
this.tax = rate * this.Gross 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T04:11:52.260

有很多问题。试试这个：（请注意，我将数组大小减少到 2 以便于测试。）

```
using System;

public class TaxPayerDemo
{
    public static void Main()
    {
        Taxpayer[] t = new Taxpayer[2];
        int x;
        for (x = 0; x < t.Length; ++x)
        {
            t[x] = new Taxpayer();//SSN, Gross);
            Console.WriteLine("Type your SSN");
            t[x].SSN = Console.ReadLine();
            Console.WriteLine("Please enter your income");
            t[x].Gross = double.Parse(Console.ReadLine());
        }

        for (x = 0; x < t.Length; ++x)
        {
                            t[x].CalcTax();
            Console.WriteLine(t[x].SSN + " " + t[x].Gross + " " + t[x].Tax);
        }

        Console.ReadKey();
    }
}

class Taxpayer
{
    public double Tax { get; set; }
    public string SSN { get; set; }
    public double Gross { get; set; }

    public void CalcTax()
    {
        if (Gross < 30000)
        {
            Tax = .15 * Gross;
        }
        else if (Gross >= 30000)
        {
            Tax = .28 * Gross;
        }
    }
} 
```

# jquery - 未显示选项时如何使用jquery选择选项

> ID：15424456
> 
> 赞同：0
> 
> 时间：2013-03-15T03:58:35.043
> 
> 标签：jquery

我有这个选择语句：

```
 <select id = "selectLanguage" name="language"
     <option value="any" lang="English">All</option><option value="any" lang="French">Tous</option>
     <option value="french" lang="English">French</option><option value="any" lang="French">Français</option>
     <option value="english" lang="English">English</option><option value="any" lang="French">Englais</option>
     </select> 
```

在 CSS 中：

```
*:lang(English), *:lang(French) {
display: none;
} 
```

稍后用户将选择他需要的语言，届时我将使用 show() 显示适当的元素。

在 jquery 中是否可以根据显示的语言选择每个选择的第一个选项？

现在，例如，语言选择总是显示 ALL 会发生什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:07:35.110

看到这个

```
$("#selectLanguage option[lang=French]:visible").first().prop("selected","selected");
$("#selectLanguage option[lang=English]:visible").first().prop("selected","selected"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:02:01.230

要在选择列表中选择第一个选项，请尝试查看 jQuery 的[.first()](http://api.jquery.com/first/)

```
var first = $('select option').first(); 
```

要在选择列表中选择选定的选项，请尝试查看 jQuery 的[:selected Selector](http://api.jquery.com/selected-selector/)

```
var selected = $('select option:selected'); 
```

要选择具有特定属性的选项，请尝试查看 jQuery 的[Attribute Equals Selector](http://api.jquery.com/attribute-equals-selector/)

```
var english = $('select option[lang="English]'); 
```

结合这些得到第一个英文选定元素，我们得到：

```
var engSelected = $('select option[lang="English]:selected') 
```

**编辑：** 看起来您的 HTML 属性设置不正确，试试这个：

```
<select id = "selectLanguage" name="language">
  <option value="any" lang="English">All</option>
  <option value="any" lang="French">Tous</option>
  <option value="french" lang="English">French</option>
  <option value="french" lang="French">Français</option>
  <option value="english" lang="English">English</option>
  <option value="english" lang="French">Englais</option>
</select> 
```

**笔记：**

您还可以按属性细化您的选择，如下所示：

```
var engEnglish = $('select option[value="english"][lang="English"]'); 
```

# amazon-web-services - 在亚马逊 ec2 上安装 octave

> ID：15424463
> 
> 赞同：2
> 
> 时间：2013-03-15T03:59:29.343
> 
> 标签：amazon-web-services, installation, octave

我的实例在 64 位 Amazon Linux(Red Hat) 上运行。

按照此处的说明： [http](http://wiki.octave.org/Octave_for_GNU/Linux) ://wiki.octave.org/Octave_for_GNU/Linux ，我运行

> $sudo yum 安装八度

产生以下结果：

> 没有可用的软件包 octave3.2。

当我尝试

> $sudo rpm -Uvh [http://dowload.fedoraproject.org/pub/epel/5/i386/epel-release-5-4.noarch.rpm](http://dowload.fedoraproject.org/pub/epel/5/i386/epel-release-5-4.noarch.rpm)

我明白了

> 软件包 epel-release-6-7.8.amzn1.noarch（比 epel-release-5-4.norach 更新）已经安装。

有人在 Amazon EC2 上成功安装了 octave 吗？我应该如何进行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:18:05.293

您需要启用扩展包。尝试`yum search octave --enablerepo=epel`（我测试过，它可以工作:)，或者只是全局启用 epel，如下所示：http: [//aws.amazon.com/amazon-linux-ami/faqs/#epel](http://aws.amazon.com/amazon-linux-ami/faqs/#epel)。

# printing - ASP VB 直接打印

> ID：15424466
> 
> 赞同：0
> 
> 时间：2013-03-15T03:59:35.153
> 
> 标签：printing, asp-classic, vbscript

我有一个包含 14 个不同模块的 Web 程序，每个模块生成 1 到 5 页范围内的报告。我现在有一个页面，用户可以在其中选择他/她希望打印出的报告。我可以轻松地在屏幕上生成正确的多模块报告，然后要求用户使用他们的浏览器打印命令。这行得通，但在屏幕上滚动 30-50 页并不是最佳解决方案。有谁知道直接打印到打印机或PDF文件的方法。了解这是一个网站，所以我不会知道浏览器，操作系统设备等。谢谢。瑞克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:53:36.470

如果您在客户端 javascript 或 vbscript 中执行 window.print，则应打印文档的所有页面。不过，您将首先获得默认的打印对话框。这里举个例子。

```
<html>
 <head>
 <script>
 function printpage()
   {
   window.print()
   }
 </script>
 </head>
 <body>
<input type="button" value="Print this page" onclick="printpage()">

</body>
</html> 
```

在某些情况下，例如从 javascriptframework （如 ExtJs）生成的网格，您只会得到网格的可见部分。在这种情况下，如果数据更像文本，我通常还会给用户一个按钮来将数据导出到 Excel 或 Word。他可以在那里调整布局和打印设置。如果您有兴趣，我可以为 ExtJs 网格发布这样的例程。

# java - Enunciate 能否为处理泛型类型的 API 生成文档？

> ID：15424467
> 
> 赞同：5
> 
> 时间：2013-03-15T03:59:46.873
> 
> 标签：java, rest, jax-rs, enunciate

给定一个抽象的通用 Resource 类和一个具体的实现：

```
public abstract class AbstractResource<T> {

    @Autowired
    private SomeService<T> service;

    @Path("/{id}")
    @GET
    public T get(@PathParam("id") String id) {
        return service.get(id);
    }
}

@Path("/people")
public class PersonResource extends AbstractResource<Person> { } 
```

似乎在为 生成文档时`PersonResource`，Enunciate 并没有发现`get()`返回 a的事实`Person`。

1.  人员未在数据模型 > 数据类型部分中列出。

2.  在 GET 部分下，响应正文将元素类型显示为“（自定义）”。

这些问题是因为使用泛型作为实体类型吗？有没有办法提示 Enunciate 真正的类型是什么，以便正确生成文档？

![在此处输入图像描述](../Images/41cbc431f54f6a5a931504ade7b594be.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T20:21:21.607

被`Person`注释为`@XmlRootElement`? 如果是这样，它是否包含在同一个项目中`PersonResource`？如果不是，您是否按照[Enunciate: Multi-Module Projects](http://docs.codehaus.org/display/ENUNCIATE/Multi-Module+Projects)`Person`中的描述导入类？

# javascript - Firefox 没有注册事件处理程序？

> ID：15424473
> 
> 赞同：0
> 
> 时间：2013-03-15T04:00:21.333
> 
> 标签：javascript, firefox, drag-and-drop, dom-events

我已经尝试了一切，但这段 Javascript 代码不起作用：

```
document.addEventListener('DOMContentLoaded',function(e){
console.log('kk');
var box=document.getElementById('box');
var body=document.getElementsByTagName('body')[0];

setTimeout(document.getElementById('msgline').style.opacity=1,1000);

body.addEventListener('dragenter',function(e){

    console.log('kkkkkkk!');
    box.style.transform=box.style.webkitTransform='rotateX(-20deg) rotateY(180deg)';
    enters++;
    e.preventDefault();
    return false;

});

body.addEventListener('dragover',function(e){e.preventDefault(); return false;});

body.addEventListener('dragleave',function(e){

    if(--enters===0)
        box.style.transform=box.style.webkitTransform='rotateX(-20deg)';

});

body.addEventListener('drop',function(e){
    var files=e.dataTransfer.files;
    [].forEach.call(files,function(file){
            convertToMOSTEM(file);
        }
    );
    e.preventDefault();
    return false;
}); 
```

});

至少在 Firefox 中没有。它旨在`body`为 html5 拖动注册事件处理程序。它应该`box`在您拖动身体时应用一些样式，并在拖动离开时将其删除。`convertToMOSTEM`每当删除文件时，它也应该调用。它将 kk 记录到控制台，这意味着其中的代码`DOMContentLoaded`已执行。但是，它永远不会为盒子或日志设置动画 kkkkkkkk！当我拖到控制台或离开时，当我放下它时尝试打开文件。我很确定永远不会定义事件处理程序。它适用于 Safari 和 Chrome。问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T04:13:53.243

我发现了错误。这似乎是随机的（甚至可能是一个错误？），但它是 setTimeout 调用。把它注释掉，它工作正常！

# javascript - Javascript 打开新窗口

> ID：15424477
> 
> 赞同：0
> 
> 时间：2013-03-15T04:00:32.973
> 
> 标签：javascript, html

如果之前有人问过这个问题，我很抱歉，

我只是对我的代码感到好奇：

```
function showPopup(file,wdth,hght) {
//height = 768 width = 1024
var w = wdth;
var h = hght;

var winWidth = w+'px';
var winHeight = h+'px';
var winTop = (screen.height/2)-(h/2);
var winLeft = (screen.width/2)-(w/2);

window.open(file,'Upload','top='+winTop+',left='+winLeft+',width='+winWidth+',height='+winHeight+',toolbar=1,resizeable=1,statusbar=1,scrollbar=1,location=1, fullscreen=1'); 
```

}

然后我用 HTML 运行它：

```
<input type="button" onClick="showPopup('preview.php', '1000', '1000')" value="Priview"> 
```

正如我在函数中设置的那样，打开的窗口仍然没有工具栏、状态栏、滚动条等。

有人帮我看看我的代码有什么问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T04:05:32.220

```
<html>
        <head>
                <title>Test Website</title>
                <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
                <script>
                        function showPopup(file,wdth,hght) {
                        //height = 768 width = 1024
                        var w = wdth;
                        var h = hght;

                        var winWidth = w;
                        var winHeight = h;
                        var winTop = (screen.height/2)-(h/2);
                        var winLeft = (screen.width/2)-(w/2);
                        window.open(file,'Upload','top='+winTop+',left='+winLeft+',width='+winWidth+',height='+winHeight+',toolbar=1,resizeable=1,statusbar=1,scrollbar=1,location=1, fullscreen=1');
                        }
                </script>
        </head>
<body>

        <input type="button" onClick="showPopup('preview.php', '500', '500')" value="Priview">

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:31:25.130

第二个参数 ('name') 是 'Upload' - 它应该是 '_blank'

或此处提到的其他受支持的值之一：http: [//www.w3schools.com/jsref/met_win_open.asp](http://www.w3schools.com/jsref/met_win_open.asp)

Paul Calabro 也是对的，您不需要“px”单位。

# extjs - 如何在 extjs 中动态更改文本字段的 fieldCls？

> ID：15424484
> 
> 赞同：2
> 
> 时间：2013-03-15T04:01:33.840
> 
> 标签：extjs, textfield

在我们的应用程序中，我们有一个文本字段和一个复选框。默认情况下，文本字段应该是只读的。Whenever check box is checked, textfield should be editable.

我们能够做到上述要求。但是我们还必须以这样一种方式显示文本字段，当它是只读的时，用户应该觉得他们不能编辑它。

我们为此使用了以下代码：

```
{
   xtype:'textfield',
   id:'textfieldid',
   readOnly:true,
   fieldCls:'x-item-disabled'
    ...
}

{
    xtype:'checkbox',
    listeners:{
        change:function(thisCmp,newValue,oldValue){
                if(newValue==true){
                    Ext.getCmp('textfieldid').addCls('x-item-disabled');
                } else {
                    Ext.getCmp('textfieldid').removeCls('x-item-disabled');
                }
            }
    }
} 
```

但是有些我无法让它工作。

有人可以建议解决它的方法吗？

实际上我需要提交该字段。如果禁用，则不会提交该字段。所以我尝试动态设置 fieldCls。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T20:08:02.267

你不能使用`setDisabled`方法`Ext.form.field.Text`吗？

```
{
    xtype:'checkbox',
    listeners:{
        change:function(thisCmp,newValue,oldValue){
             Ext.getCmp('textfieldid').setDisabled(newValue);
        }
    }
} 
```

并且也不要指定`fieldCls:'x-item-disabled'`为 TextField 的配置，它将由`setDisabled`方法自动管理，如果您想最初将文本字段呈现为禁用，那么您可以`disabled : true`像这样在配置中使用

```
{
   xtype:'textfield',
   id:'textfieldid',
   disabled: true
    ...
} 
```

**另外一个选项：**

你最初使用 fieldCls 属性来指定禁用类，这可能是错误的，而不是你可以做这样的事情

```
{
   xtype:'textfield',
   id:'textfieldid',
   readOnly:true,
   listeners : {
       afterrender : function() {
            this.addCls('x-item-disabled');
       },
       scope : this
   }
    ...
} 
```

# jquery - 为什么这个 jquery 事件没有被触发？

> ID：15424495
> 
> 赞同：0
> 
> 时间：2013-03-15T04:02:31.987
> 
> 标签：jquery

为什么jquery动画不起作用，而更简单的内联样式却触发了onmouseout？

[http://jsfiddle.net/FZLnE/1/](http://jsfiddle.net/FZLnE/1/)

```
function bigImg(x){

  jQuery(x).stop().animate({
      color: "#fff"
  }, 200);

}

function normalImg(x)
{
    x.style.color="green";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:06:46.247

> 所有动画属性都应动画为单个**数值**
> 
> 来自[jQuery 动画文档](http://api.jquery.com/animate/)

您根本无法为颜色设置动画，因为它们是非数字的。有一个名为 jQuery Color 的插件看起来可能会有所帮助，它链接到 jQuery animate API 页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:07:49.713

事实上，Thomas Lai 是对的。它适用于 UI 检查。

在任何情况下`.hover()`都需要两个功能 - 一个用于鼠标悬停，一个用于鼠标悬停。你也可以使用`.on('mouseover')`and `.on('mouseout')`。

[http://jsfiddle.net/popnoodles/FZLnE/8/](http://jsfiddle.net/popnoodles/FZLnE/8/)

```
<div class="one">This is a link</div> 
```

jq

```
$('.one').hover(function(){
  jQuery(this).stop().animate({
      color: "#fff",
      marginLeft:50
  }, 200);  
}, function(){
    this.style.color="green";
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T04:30:25.230

你不能`color`简单地使用 jQuery 来制作动画。您需要使用 jquery UI 来执行此操作。

请看一下这个[链接](https://stackoverflow.com/a/7918949/1577396)

并查看 jQuery 团队开发的[新插件](https://github.com/jquery/plugins.jquery.com)，以支持彩色动画和许多其他好东西。

# android - Phonegap 离线缓存网站

> ID：15424499
> 
> 赞同：2
> 
> 时间：2013-03-15T04:02:45.827
> 
> 标签：android, html, caching, cordova, cache-manifest

我有一个配置了缓存清单的网站，我将通过 phonegap 将其加载到 android 中。这是我正在使用的以下代码

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    super.loadUrl("http://(192.168.14.46):8080/CacheTest/index.html");

    this.appView.getSettings().setDomStorageEnabled(true);
    this.appView.getSettings().setAppCacheMaxSize(1024 * 1024 * 15);  

 this.appView.getSettings().setAppCacheEnabled(true); 

    String appCachePath = getApplicationContext().getCacheDir().getAbsolutePath();
    this.appView.getSettings().setAppCachePath(appCachePath);
    this.appView.getSettings().setAllowFileAccess(true);
    //this.appView.getSettings().setAppCacheEnabled(true);      

} 
```

当我运行它时，页面正在正确加载。然后我关闭服务器并再次运行应用程序。但是这次我收到一个错误，说无法加载 url。

但是，当我在使用 chrome 浏览器的 PC 上尝试相同的操作时，它工作正常，所有项目都在第一次被缓存，尽管服务器关闭，我可以无数次查看网站。

这是否意味着 Web 视图不支持缓存？还是我错过了什么？

我在三星 Galaxy 选项卡的 Android 3.0 中检查了此代码。

# rdf - 在 java 中使用 jena API 显示 RDF

> ID：15424500
> 
> 赞同：0
> 
> 时间：2013-03-15T04:02:56.040
> 
> 标签：rdf, jena

我在 StoryModel 中创建了一些方法。如果代码中有任何错误，我真的很感激更正。

```
public class StoryModel {

    String dbName = "DB3";
    String sns =  "http://somebook/SemBook#";
    String ns;
    Dataset ds;
    OntModel om;

    // create model and connect to database
    public StoryModel(String storyName){

        ns = sns + storyName;
        ds = TDBFactory.createDataset(dbName);
        om = ModelFactory.createOntologyModel();

    }

    // create classes in model
    public void initModel() {

        om.createClass(ns + "Person");
        om.createClass(ns + "Event");
        om.createClass(ns + "Place");
        om.createClass(ns + "Time");
        om.createClass(ns + "Object");
        saveModel();
    }   

    //Read & write in database
    //Display it
    public void saveModel() {

        ds.begin(ReadWrite.WRITE);
        om.write(System.out, "RDF/XML-ABBREV");

    }

    // Create resource to class in model
    public Resource createResource(String resourceName, String clsName) {

        OntResource resource = om.createOntResource(ns + resourceName);
        String ruri = ns + resource;
        OntClass clsuri = om.getOntClass(ns + clsName);

        Individual i = om.createIndividual(ruri, clsuri);

        return i;

    }

    /*
     * Return an RDF resource object given the URI of the resource as a string. The
     * URI can be represented in full, or as a "prefix:localName".
     * @param resourceName The full URI of the resource
     * @return An RDF resource object
     */

    public Resource stringToResource( String resourceName ) {

        String resourceURI = om.expandPrefix( resourceName );

        return om.getResource( resourceURI );

    }

    // Delete the resource
    public void deleteResource(String resourceName) {

        try {
            OntResource resource = om.getOntResource(ns + resourceName);

            if (resource != null) 
            {
               resource.remove();
            }
            else {
                System.out.println("Resource not present");
            }   
        }
        catch (Exception e) { }         
    }
} 
```

在 SemBookMain 中，我创建了一个模型并使用在 StoryModel 中创建的方法将类初始化为资源并显示它

```
public class SemBookMain {

    public static void main(String[] args) {

        // create and initialize a model
        StoryModel sm = new StoryModel("alice");
        //sm.saveModel();
        sm.initModel();

        // add resources
        String clsName = "Person";
        String[] ar = {"Alice", "Peter", "Ben", "Robin"};

        for (String r : ar) {

            Resource res = sm.createResource(r, clsName);

        }
        sm.saveModel();

    }

} 
```

我真的很抱歉我在下面添加了输出作为评论，所以请参阅我的评论。

我不明白错误 1 ​​和 2 以及为什么不显示资源。我缺少一些东西，但无法弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:35:38.877

`ds.begin(ReadWrite.WRITE);`但不是`ds.commit`

`initModel`打电话`saveModel`，然后你再打电话`saveModel`。

遵循以下代码模式：

[http://jena.apache.org/documentation/tdb/tdb_transactions.html#write-transactions](http://jena.apache.org/documentation/tdb/tdb_transactions.html#write-transactions)

# flexbox - css3“flex box”布局可以在两个方向上吸收额外的空间吗？

> ID：15424501
> 
> 赞同：2
> 
> 时间：2013-03-15T04:03:10.723
> 
> 标签：flexbox

我知道“flex”属性可以使 flex 项目在一个方向上吸收额外的空间（如果“flex-direction”值为“行”，则将吸收行中的额外空间。）

但是，如果我包装这些物品怎么办？第二行中的项目只是吸收了第二行中的额外空间。但是，如果有的话，它们不会吸收垂直方向的空间。

也许[演示](http://jsfiddle.net/stg609/farpK/3/)可以让你更清楚地理解我。

```
.container {
    display:-webkit-flex;
    -webkit-flex-flow:row wrap;
    width: 350px; /*just for demo, it should be the same width as the browser*/
}
.item {
    width:100px; /*All these items have the same width*/
    height:200px;
    border:1px solid;
    margin:5px;
}
.item:nth-child(even) {
    height:100px;
}

<div class="container">
    <div class="item">Item 1</div>
    <div class="item">Item 2</div>
    <div class="item">Item 3</div>
    <div class="item">Item 4</div>
    <div class="item">Item 5</div>
</div> 
```

我希望item5可以紧跟在item2之后。除了边距之一，没有多余的空格。

有人可以帮我弄清楚吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:26:37.120

默认情况下，由于on flex 容器的默认值，flex 项目希望沿*交叉轴*（*行方向垂直）拉伸。*`align-items: stretch`但是，如果弹性项目有明确的高度，它会覆盖弹性。

[http://jsfiddle.net/farpK/5/](http://jsfiddle.net/farpK/5/)

如果我将两个`height`属性都更改为`min-height`，它们会开始按应有的方式拉伸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-18T10:55:01.050

试试这个，我完全在 flexbox 中制作布局（仅限桌面屏幕）

```
 * {
    margin:0;
    padding:0;
    font-family: arial;
    color: #333;
}
html {
    height: 100%;
    background-color: #111;
}
body {
    height: 100%;
    background-color: #dedede;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}
body > header, footer {
    min-height: 32px;
    line-height: 32px;
    flex: 0 0 auto;
}
body > #body {
    flex: 1 1 auto;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
}
body > #body > nav, aside {
    flex: 1 1 15%;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}
body > #body > #content {
    flex: 1 1 70%;
}
body > #body > nav {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}
body > #body > nav > #userLinks {
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
}
body > #body > nav > #userLinks a {
    flex: 1 1 auto;
    color: blue;
    margin-left: 18px;
    margin-bottom: 3px;
    margin-right: 9px;
    height: 32px;
    line-height: 32px;
    vertical-align: top;
    text-decoration: none;
}
body > #body > nav > #userLinks a:hover {
    background-color: #c0c0c0;
    color: #e2e2e2;
}
body > #body > nav > #userLinks a img {
    background-color: #333;
    color: #eee;
    height: 32px;
    width: 32px;
    border: 0;
    margin-right: 9px;
}
body > #body > nav > #todoAppContainer {
    background-color: #c0c0c0;
    position: relative;
    width: 100%;
}
body > #body > nav > #todoAppContainer:before {
    content:"";
    display: block;
    padding-top: 100%;
    /* initial ratio of 1:1*/
}
body > #body > nav > #todoAppContainer >#todoApp {
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
}
#notifications {
    background-color: #cbcbcb;
    height: 64px;
}
#communications {
    background-color: #cacaca;
    height: 128px;
}
#messageBox {
    flex: 1 1 auto;
    background-color: #c0c0c0;
} 
```

[http://jsfiddle.net/max1979/6T226/2/](http://jsfiddle.net/max1979/6T226/2/)

让我知道

# javascript - 将行动态追加到 HTML 表

> ID：15424502
> 
> 赞同：0
> 
> 时间：2013-03-15T04:03:17.273
> 
> 标签：javascript, jquery, html, jinja2

我能够动态追加表行，但在嵌入值时遇到问题。

我正在使用jinja2。

例子：

我的文本框输入是这样的：

日期从：20130201 * id 是**“txtStartDate”**

收件人：20130205 * id 是**“txtEndDate”**

编号：10 * id 为**“txtAllotNumber”**

输出应该是这样的：

□ 20130201 10 个空白
□ 20130202 10 个空白
□ 20130203 10 个空白
□ 20130204 10 个空白
□ 20130205 10 个空白

*   □ 是一个复选框

*   空白部分也应进行编辑。

这是不正确的输出：

20130210 20130205 10 空白

这就是我附加表格的方式：

```
 var chkflg = "";
            var newtrtag = '<tr class="centertext getData">';
            newtrtag += '<td class="checkGet" style="padding-left: 20px;"><input class="chkGetData" type="checkbox" name="del_param" value="{{stay_ymd}},{{allot_number}},{{delete_flag}},{{re_release_ymd}}"></td>';
            newtrtag += '<input type="hidden" id="quantity{{stock_count}}" name="quantity{{stock_count}}" value="{{allot_number}}">';
            newtrtag += '<input type="hidden" name="save[{{stock_count}}]" value="{{stay_ymd}},{{allot_number}},{{delete_flag}},{{re_release_ymd}}">';
            newtrtag += '{% set delete_flag_val = '0'%}';
            newtrtag += '{% if delete_flag %}';
            newtrtag += '{% set delete_flag_val = '1' %}';
            newtrtag += '{% else%}';
            newtrtag += '{% endif %}';
            newtrtag += '<input type="hidden" id="delflag{{stock_count}}" name="delflag{{stock_count}}" value="{{delete_flag_val}}">';
            newtrtag += '<input type="hidden" id="rerel{{stock_count}}" name="rerel{{stock_count}}" value="{{re_release_ymd}}">';
            newtrtag += '<td style="width:70%;">'+ $("#txtStartDate").val() +' </td>';
            newtrtag += '<td style="width:70%;">'+ $("#txtEndDate").val() +' </td>';
            newtrtag += '<td style="width:70%;">'+ $("#txtAllotNumber").val() +' </td>';
            newtrtag += '{% set delete_flag_chk = "" %}';
            newtrtag += '{% if delete_flag == True %}';
            newtrtag += '{% set delete_flag_chk = "Released" %}';
            newtrtag += '{% else%}';
            newtrtag += '{% set delete_flag_chk = "Unreleased" %}';
            newtrtag += '{% endif %}';
            newtrtag += '<td class="colStatus">{{delete_flag_chk}}</td>';
            newtrtag += '<td class="releaseDate">{{re_release_ymd}}</td>';
            newtrtag += '</tr>';
            $("#list_body").append(newtrtag); 
```

整个 tbody 代码是这样的，我在其中添加它：

```
<tbody id="list_body">
{% set stock_count = 0 %}
{% for row in release_stock_list %}
    <tr class="centertext getData">
        <td class="checkGet" style="padding-left: 20px;"><input class="chkGetData" type="checkbox" name="del_param" value="{{row.stay_ymd}},{{row.allot_number}},{{row.delete_flag}},{{row.re_release_ymd}}"></td>
        <input type="hidden" id="quantity{{stock_count}}" name="quantity{{stock_count}}" value="{{row.allot_number}}">
        <input type="hidden" name="save[{{stock_count}}]" value="{{row.stay_ymd}},{{row.allot_number}},{{row.delete_flag}},{{row.re_release_ymd}}">
        {% set delete_flag_val = '0'%}
        {% if row.delete_flag %}
            {% set delete_flag_val = '1' %}
        {% else%}
        {% endif %}
        <input type="hidden" id="delflag{{stock_count}}" name="delflag{{stock_count}}" value="{{delete_flag_val}}">
        <input type="hidden" id="rerel{{stock_count}}" name="rerel{{stock_count}}" value="{{row.re_release_ymd}}">
        <td class="colDate">{{row.stay_ymd}}</td>
        <td class="colAmount">{{row.allot_number}}</td>
        {% set delete_flag_chk = "" %}
        {% if row.delete_flag == True %}
            {% set delete_flag_chk = "Released" %}
        {% else%}
            {% set delete_flag_chk = "Unreleased" %}
        {% endif %}
        <td class="colStatus">{{delete_flag_chk}}</td>
        <td class="releaseDate">{{row.re_release_ymd}}</td>
        {% set stock_count = stock_count + 1 %}
    </tr>
{% endfor %}
</tbody> 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:09:24.370

通常，这种事情是通过克隆现有的行来完成的；您可能有一个要克隆的隐藏模板行。这样可以避免各种问题，例如您的问题。看看[这个问题](https://stackoverflow.com/questions/7961900/jquery-clone-table-row)。

# java - 是否有必要在 java UDP 服务器实现中存储传入消息？

> ID：15424507
> 
> 赞同：1
> 
> 时间：2013-03-15T04:03:30.270
> 
> 标签：java, nio

大家好！

我正在开发基于 java NIO 的简单 java UDP 服务器。[在这里](https://stackoverflow.com/questions/15348035/from-classic-multithreaded-to-java-nio-asynchronous-non-blocking-server)，我读到我必须将所有传入消息存储在某个缓冲区中，并以某种方式识别换行符。但是，如果传入的消息大小总是 <= 缓冲区大小，我是否有必要存储以前的状态？我的意思是我的 ByteBuffer 足够大，可以存储任何传入的消息。在某些情况下，最好确保自己不处理诸如 monolit 之类的消息，而它们只是某些大消息的一部分？我只是不想做开销工作，想要精确分配足够大的缓冲区危险策略与否。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T04:31:05.597

您引用的问题是关于 TCP 通道的，它与您使用的 UDP 通道不同。

TCP 是*面向字节的*（也就是说，TCP 层中没有“消息”；TCP 是单个字节流，将流拆分为“消息”是应用程序的关注点）。应用程序必须处理字节流并提取消息。主机可能会将一些字节写入 TCP 通道，然后它会写入更多字节；另一台主机无法判断它们是用两个（或多个）不同的操作编写的，还是单个操作编写的。另一台主机只读取字节，其顺序与发送它们的顺序相同。

另一方面，UDP 是*面向数据报的*：您从一个主机发送一些字节（一个数据报），而另一台主机将接收该数据报。数据报既不合并也不拆分（但它们可能会丢失）。[DatagramChannel.read](http://docs.oracle.com/javase/1.5.0/docs/api/java/nio/channels/DatagramChannel.html#read%28java.nio.ByteBuffer%29)将只返回一个数据报。如果每条消息都适合 UDP 数据报，那么您不需要保留缓冲区。

但是，如果您有在多个 UDP 数据报中发送的消息，您将需要一个缓冲区来重建原始消息。您还需要注意消息顺序（因为 UDP 数据报可能会被网络重新排序）和丢失数据报（因为 UDP[不可靠](http://en.wikipedia.org/wiki/Reliability_%28computer_networking%29)）

# javascript - 如何判断哪些事件绑定到 DOM 元素？

> ID：15424512
> 
> 赞同：5
> 
> 时间：2013-03-15T04:03:58.067
> 
> 标签：javascript, jquery, google-chrome, event-listener, web-inspector

使用 Wordpress 可视化编辑器时，如果您有`[gallery]`简码，则在可视模式下会显示一个占位符。

单击占位符将覆盖两个图标 - 编辑图库和删除图库。

我试图弄清楚单击“编辑画廊”时会触发什么功能。

该按钮是一个带有 dom id 的图像，`wp_editgallery`它的外观是这样的：

[![截图-with-shadow.png](../Images/71d39297cde6297fa56404025b3663ba.png)](https://i.stack.imgur.com/gSE2F.png)

我的直觉是使用 Chrome 的网络检查器检查元素：

[![](../Images/6df6ec875b87e35703ad5b6431da7894.png)](https://i.stack.imgur.com/Nzmwl.png)

找到元素后，我查看属性面板并查找事件，但结果有些神秘：

[![截图-with-shadow.png](../Images/ff1eae542e98b435953a18813386c3e7.png)](https://i.stack.imgur.com/VnJSP.png)

到目前为止，我已经尝试了上述方法，并且还：

```
var events = jQuery._data('#wp_editgallery', 'events'); 
```

正如在[如何查看绑定到 DOM 元素的确切事件中所建议的那样？](https://stackoverflow.com/questions/10182993/how-to-see-what-exact-events-are-bound-to-dom-elements)我也尝试使用`Visual Event`该帖子中提到的 - 均未成功。

有没有更简单的方法来找出与 DOM 元素的事件侦听器相关联的 javascript 函数？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-15T04:06:08.973

查看[视觉事件](http://www.sprymedia.co.uk/article/Visual+Event)。与 Chrome 一起使用很棒！允许您查看和运行附加到 DOM 元素的事件。一直是救命稻草！

# python - 程序从哪里得到这个程序中的 json_myobj

> ID：15424513
> 
> 赞同：2
> 
> 时间：2013-03-15T04:04:05.517
> 
> 标签：python, json

我正在关注本教程

[http://pymotw.com/2/json/index.html#working-with-your-own-types](http://pymotw.com/2/json/index.html#working-with-your-own-types)

他有这个代码

```
import json
import json_myobj

obj = json_myobj.MyObj('instance value goes here') 
```

我无法找到他从哪里得到的`json_myobj`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T04:05:39.767

```
MODULE: <module 'json_myobj' from '/Users/dhellmann/Documents/PyMOTW/src/PyMOTW/json/json_myobj.pyc'> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:17:33.400

模块： 类别：

他使用 json_myobj 作为定制的 json 对象。并将其转换为他自己的其他对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-04T13:41:14.197

他走捷径，错过了对象的创建。在下面的示例中，我包含了我自己的类“Car”，以及一个实例“my_car”

```
import json

class Car(object):
    def __init__(self, make="", model=""):
        self.make = make
        self.model = model

class MyObj(object):
    def __init__(self, s):
        self.s = s
    def __repr__(self):
        return '<MyObj(%s)>' % self.s

my_car = Car("BMW", "320d")
obj = MyObj(my_car)

print 'First attempt'
try:
    print json.dumps(obj)
except TypeError, err:
    print 'ERROR:', err

def convert_to_builtin_type(obj):
    print 'default(', repr(obj), ')'
    # Convert objects to a dictionary of their representation
    d = { '__class__':obj.__class__.__name__,
          '__module__':obj.__module__,
          }
    d.update(obj.__dict__)
    return d

print
print 'With default'
print json.dumps(obj, default=convert_to_builtin_type) 
```

# actionscript-3 - 我有一个包含动态 XML 内容的 AS3 Flash 文件，我需要在完成后重新启动它

> ID：15424515
> 
> 赞同：0
> 
> 时间：2013-03-15T04:04:10.483
> 
> 标签：actionscript-3, loops, actionscript, flash

我的代码在 3 个随机图像中加载，我没有使用时间线。我需要在一定时间后重新启动 swf，以便电影可以重新加载新图像并重播电影。就目前而言，它不会循环。

```
import com.greensock.*;
import com.greensock.easing.*

box1.back.rotationY = -90;
box1.back.alpha=0;

var flipSpeed:Number = .25; 

var tl:TimelineMax = new TimelineMax({delay:2});

tl.append(TweenMax.to(box1.front, flipSpeed, {rotationY:90, visible:false, ease:Linear.easeNone}))
tl.append(TweenMax.to(box1.back, 0, {alpha:1, immediateRender:false}))
tl.append(TweenMax.to(box1.back, flipSpeed, {rotationY:0, ease:Linear.easeNone}))

var tb:TimelineMax = new TimelineMax({delay:4});

box2.back2.rotationY = -90;
box2.back2.alpha=0;

tb.append(TweenMax.to(box2.front2, flipSpeed, {rotationY:90, visible:false, ease:Linear.easeNone}))
tb.append(TweenMax.to(box2.back2, 0, {alpha:1, immediateRender:false}))
tb.append(TweenMax.to(box2.back2, flipSpeed, {rotationY:0, ease:Linear.easeNone}))

var ins:TimelineMax = new TimelineMax({delay:6});

box3.back3.rotationY = -90;
box3.back3.alpha=0;

ins.append(TweenMax.to(box3.front3, flipSpeed, {rotationY:90, visible:false, ease:Linear.easeNone}))
ins.append(TweenMax.to(box3.back3, 0, {alpha:1, immediateRender:false}))
ins.append(TweenMax.to(box3.back3, flipSpeed, {rotationY:0, ease:Linear.easeNone}))

var per:TimelineMax = new TimelineMax({delay:7});

person.back_person.rotationY = -90;
person.back_person.alpha=0;

per.append(TweenMax.to(person.front_person, flipSpeed, {rotationY:90, visible:false, ease:Linear.easeNone}))
per.append(TweenMax.to(person.back_person, 0, {alpha:1, immediateRender:false}))
per.append(TweenMax.to(person.back_person, flipSpeed, {rotationY:0, ease:Linear.easeNone})); 
```

-- 我在movieclips 中也有内容，这些内容从XML 文档中加载图像，但这是我在主要动作层上的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:29:46.417

例如，您可以尝试这种方法：

1.  将您的代码包装成一个函数
2.  一定时间后回忆自己
3.  不要忘记在启动时调用该函数

例子：

```
import flash.utils.*;    // required for setTimeout

function doStuff() {
    …
    setTimeout(doStuff, 8000);
}

doStuff(); 
```

# php - 简单的 html dom 无法正常工作，显示错误

> ID：15424518
> 
> 赞同：1
> 
> 时间：2013-03-15T04:04:19.410
> 
> 标签：php, html, cakephp, dom, simple-html-dom

我正在使用简单的 html dom 来解析 html 页面.....这是我的代码..

```
include('simple_html_dom.php');

$html = file_get_html($my_url);

foreach($html->find('div') as $ul) {
     echo $ul;
   } 
```

而且我还尝试了许多其他方法。我仍然收到此错误。错误：

```
 Call to a member function find() on a non-object 
```

我也尝试过其他标签...

```
 $html->find('a');
  $html->find('h3');
  //But still same above error 
```

谁能帮我解决这个错误..提前谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T04:48:37.520

好吧，我找到了解决方案，解决方案是：-

> 最新版本的 simple_html_dom 有错误......所以不要使用 sourceforge 的 simplehtmldom_1_5 文件......最好使用 sourceforge 的 simplehtmldom_1_10 它工作正常。

simplehtmldom_1_5 中的错误：-

> 任何网站的网址在这里都不起作用。您可以提供 html 文件的 url，但站点 url 不起作用读取 url 后无法识别您的对象 $html....

希望它可以帮助面临类似问题的人....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:18:08.703

您正在使用 cakephp，因此您不能像这样使用它。

您需要创建`vendor( for controller )`或`create helper( for view )`.

并且`$html`已经为`$html helper`.

供供应商加载

```
App::import('Vendor', 'HTMLDOM', array('file' => 'HtmlDom' . DS . 'simple_html_dom.php')); 
```

为帮手。

```
App::import('Helper', 'HtmlDom');
$NewHtmlDom = new SimpleHtmlDom; 

$fileContent = $NewHtmlDom->file_get_html($my_url); 
```

# mysql - 通过 puppet 安装 mysql

> ID：15424520
> 
> 赞同：0
> 
> 时间：2013-03-15T04:04:32.127
> 
> 标签：mysql, puppet

我正在尝试通过 puppet 安装 mysql，使用以下代码：

```
class mysql::install {
  package {
    'mysql-client': ensure => present,
                    require => Package["mysql-client-core-5.5"];
  }

  service {
    'mysql': ensure => running;
  }
}

node default {
  include mysql::install
} 
```

但我收到以下错误消息：

```
Failed to fetch http://security.ubuntu.com/ubuntu/pool/main/m/mysql-dfsg-5.1/mysql-common_5.1.63-0ubuntu0.10.04.1_all.deb  404  Not Found [IP: 91.189.91.13 80]
Failed to fetch http://security.ubuntu.com/ubuntu/pool/main/m/mysql-dfsg-5.1/libmysqlclient16_5.1.63-0ubuntu0.10.04.1_i386.deb  404  Not Found [IP: 91.189.91.13 80]
Failed to fetch http://security.ubuntu.com/ubuntu/pool/main/m/mysql-dfsg-5.1/mysql-client-core-5.1_5.1.63-0ubuntu0.10.04.1_i386.deb  404  Not Found [IP: 91.189.91.13 80]
Failed to fetch http://security.ubuntu.com/ubuntu/pool/main/m/mysql-dfsg-5.1/mysql-client-5.1_5.1.63-0ubuntu0.10.04.1_i386.deb  404  Not Found [IP: 91.189.91.13 80]
Failed to fetch http://security.ubuntu.com/ubuntu/pool/main/m/mysql-dfsg-5.1/mysql-server-core-5.1_5.1.63-0ubuntu0.10.04.1_i386.deb  404  Not Found [IP: 91.189.91.13 80]
Failed to fetch http://security.ubuntu.com/ubuntu/pool/main/m/mysql-dfsg-5.1/mysql-server-5.1_5.1.63-0ubuntu0.10.04.1_i386.deb  404  Not Found [IP: 91.189.91.13 80]
Failed to fetch http://security.ubuntu.com/ubuntu/pool/main/m/mysql-dfsg-5.1/mysql-server_5.1.63-0ubuntu0.10.04.1_all.deb  404  Not Found [IP: 91.189.91.13 80] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:18:28.270

我不知道这是否与您粘贴的特定问题有关，但如果这是您的完整 puppet 代码，我认为您没有正确使用 require 参数。如果您已经为“mysql-client-core-5.5”定义了一个包资源，那么请忽略这个答案的其余部分。

require 参数引用另一个已定义的资源。它说在应用所需资源之前不要应用当前资源。

因此，在您的情况下，puppet 会期望存在如下资源：

```
  包裹 {
    'mysql-client-core-5.5'：确保 => 存在
  }

```

如果你想强制执行特定版本的包，require 参数不是办法。

# json - 无法初始化代理 - 没有会话

> ID：15424521
> 
> 赞同：4
> 
> 时间：2013-03-15T04:04:53.063
> 
> 标签：json, spring, hibernate, jackson

大家好，我花了相当多的时间谷歌搜索并从 JSON 1 升级到 JSON 2，但是当我尝试返回实体列表时，我得到了异常：

“收到的异常无法写入 JSON：无法初始化代理 - 没有会话（通过引用链：”

我知道这与 Hibernate 惰性初始化有关，但我还没有弄清楚如何解决它。我认为 jackson-module-hibernate 项目是解决方案。但是我无法让它工作。

这是我的技术：

*   春季：3.2.1发布
*   休眠 4.1.7.Final
*   杰克逊 2
*   杰克逊核心 2.0.4
*   杰克逊数据绑定：2.0.4
*   杰克逊数据类型休眠4：2.1.2

我正在使用 Java 配置：...

```
@Bean
public com.mycompany.config.MappingJackson2HttpMessageConverter mappingJackson2HttpMessageConverter() {
    MappingJackson2HttpMessageConverter mappingJackson2HttpMessageConverter = new MappingJackson2HttpMessageConverter();
    mappingJackson2HttpMessageConverter.setObjectMapper(new HibernateAwareObjectMapper());
    return mappingJackson2HttpMessageConverter;
}

@Bean 
public OpenEntityManagerInViewFilter springOpenEntityManagerInViewFilter() {
return new org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter();
}

@Bean
public ContentNegotiatingViewResolver contentNegotiatingViewResolver() {
final ContentNegotiatingViewResolver contentNegotiatingViewResolver = new ContentNegotiatingViewResolver();
contentNegotiatingViewResolver.setDefaultContentType(MediaType.APPLICATION_JSON);
final ArrayList defaultViews = new ArrayList();
defaultViews.add(converter());
contentNegotiatingViewResolver.setDefaultViews(defaultViews);
   return contentNegotiatingViewResolver;
} 
```

我也有：

```
public class HibernateAwareObjectMapper extends ObjectMapper {

public HibernateAwareObjectMapper() {
    Hibernate4Module hm = new Hibernate4Module();
    registerModule(hm);
}
} 
```

流程从控制器开始，控制器调用多个服务，每个服务都返回一个实体或列表。然后我将返回的对象放入一个对象中并返回它，认为@ResponseBody 会起作用。但是，我一定不能正确连接，因为我仍然会遇到异常。

任何人都可以在这里看到任何错误吗？

谢天谢地...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-05T10:14:57.577

这在 jackson-datatype-hibernate 的 2.5.0 版本中得到解决。只需在 Hibernate(3,4)Module 中传递 Hibernate SessionFactory 如下：

```
public class HibernateAwareObjectMapper extends ObjectMapper {

private static final long serialVersionUID = 1L;

@Autowired
private EntityManagerFactory emf;

@PostConstruct
public void init() {
    Hibernate4Module module = new Hibernate4Module(emf.unwrap(SessionFactory.class));

    module.enable(Hibernate4Module.Feature.FORCE_LAZY_LOADING);
    module.disable(Hibernate4Module.Feature.USE_TRANSIENT_ANNOTATION);
}} 
```

如果 JPA 正在使用，上面的代码片段很好，所以 EntityManagerFactory bean 可用。否则，只需注入 Hibernate SessionFactory 并传递给构造函数。

无需使用 OpenSessionInView 模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:07:05.120

这是因为您尝试序列化的对象具有延迟加载的组件，您可以将[OpenSessionInViewFilter](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/orm/hibernate3/support/OpenSessionInViewFilter.html)添加到您的 Web 配置中以解决此问题。

当执行存在事务时，用于加载对象的休眠会话将关闭，因此当视图层（杰克逊）尝试序列化对象并尝试加载延迟加载的对象时，它会失败并出现此错误。

在你的 web.xml 中添加这个

```
<filter>
    <filter-name>hibernateFilter</filter-name>
    <filter-class>org.springframework.orm.hibernate3.support.OpenSessionInViewFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>hibernateFilter</filter-name>
    <url-pattern>/app/*</url-pattern>
</filter-mapping> 
```

# mysql - 用两个条件查询mysql

> ID：15424526
> 
> 赞同：0
> 
> 时间：2013-03-15T04:05:32.163
> 
> 标签：mysql

我正在尝试查询我的数据库以仅显示已收到至少 60% 的订购电话的记录。

这是我的表的精简版：

```
dealID | Ordered | Received | precreditEL    | cancelled  | precredit
1      | 5       | 4        |                |            |
2      | 2       | 2        |                |            |
3      | 10      | 2        |                |            |
4      | 8       | 8        | Non-applicable |            |
5      | 6       | 5        | Non-applicable | Cancelled  | Ready 
```

这是我当前的查询

```
select deals.dealID,customer_info.accName,account_info.accessid,account_info.access_password,customer_info.contactNumber,deals.est_bill,deals.precreditAssigned,deals.precreditEL,deals.precredit
from customer_info join deals
left join account_info  on account_info.custID = customer_info.custID
left join phone_details on phone_details.dealID = deals.dealID 
where customer_info.custID = deals.custID
and deals.precreditEL <> 'Non-applicable'
and deals.precredit <> 'Complete'
and deals.cancelled IS NULL
GROUP BY deals.dealID
having ((100 - (((sum(phone_details.ordered) - sum(phone_details.received)) / sum(phone_details.ordered)) * 100)) >= 60) 
```

这完美地工作。只要`precreditEL`不是不适用且未标记为已取消，该查询将为我提供已收到订单的 60% 的记录。所以我的结果将是`dealID 1 and 2`。

但现在我需要添加另一个绕过此条件的条件。如果`precredit`被标记为`Ready`结果，无论上述条件如何，都会显示记录。所以我的结果会显示`dealID 1, 2 and 5`

任何帮助，将不胜感激。非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:17:11.413

没关系，我通过改变得到它

```
having ((100 - (((sum(phone_details.ordered) - sum(phone_details.received)) / sum(phone_details.ordered)) * 100)) >= 60) 
```

到

```
having (((100 - (((sum(phone_details.ordered) - sum(phone_details.received)) / sum(phone_details.ordered)) * 100)) >= 60) OR deals.precredit ='Ready') 
```

# bash - 了解 shell 脚本中的 cp

> ID：15424531
> 
> 赞同：1
> 
> 时间：2013-03-15T04:05:59.773
> 
> 标签：bash, shell, sh

```
 cp ${skeleton_dir}/*.cfg ${skeleton_dir}/*.org ./ 
```

我不明白这意味着什么，但我根据程序行为进行了猜测。它将 .cfg 文件复制到当前目录，但它是`*.org ./`做什么的？

我也想修改这一行以复制 *.spop 文件。这种改变会奏效吗？（由于我的机器上的周转时间是一天，因此很难轻松验证这一点）

```
 cp ${skeleton_dir}/*.cfg ${skeleton_dir}/*.org ./
 cp ${skeleton_dir}/*.spop ${skeleton_dir}/*.org ./ 
```

很抱歉这些愚蠢的问题，但我对此知之甚少，而且很难用谷歌搜索“./”。

将来，我将如何搜索与 cp 命令（此“./”）一起使用的不同变体。我现在知道“man xxx”，我读过“man cp”，但里面没有关于“./”的内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T04:10:29.513

如果您阅读 的手册页`cp`，您将看到可以指定多个源以复制到目标目录。 `./`是当前目录。所以这样做是将所有文件复制`.cfg`到当前目录中。只需添加：`.org``${skeleton_dir}``*.spop`

```
cp ${skeleton_dir}/*.cfg ${skeleton_dir}/*.org ${skeleton_dir}/*.spop ./ 
```

您还可以使用大括号扩展：

```
cp ${skeleton_dir}/*.{cfg,org,spop} ./ 
```

# heroku - 在陨石 heroku buildpack 中需要 npm

> ID：15424534
> 
> 赞同：0
> 
> 时间：2013-03-15T04:06:08.177
> 
> 标签：heroku, meteor, meteorite

有没有办法修改这个构建包

[https://github.com/oortcloud/heroku-buildpack-meteorite](https://github.com/oortcloud/heroku-buildpack-meteorite)

安装这个 npm

[https://github.com/abh/node-stripe](https://github.com/abh/node-stripe)

它在开发中运行良好，但我不知道如何在 Heroku 上安装和要求它

我要求它使用

```
__meteor_bootstrap__.require('stripe')(api_key) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-13T16:25:59.923

使用您的 npm 依赖项（适合您的节点条带）在您的流星项目中创建一个 package.json。

看看这个项目[https://github.com/matb33/heroku-meteor-npm](https://github.com/matb33/heroku-meteor-npm)也许它会帮助你..

# android - Android 输入流为 jpeg 文件的位图返回 null

> ID：15424539
> 
> 赞同：1
> 
> 时间：2013-03-15T04:06:18.643
> 
> 标签：android, bitmap, httpconnection

当我从获取 jpeg 文件 url 的 openhttpconnection 获取输入流时，我总是得到 null 的位图返回。例如，我的 url 字符串是

```
 http://10.0.2.2:8000/mydirectory/myfile.jpg 
```

其中 8000 是使用模拟器运行的本地服务器的端口。我可以使用这种相同类型的 url 从 web 服务获取，但不能用于获取图像文件。要将 jpgeg 文件制作成位图，我需要做些什么不同的事情，还是我的 url 格式有问题？下面是我的代码。任何帮助表示赞赏。

```
 private Bitmap downloadImage(String url) {

        Bitmap bmap = null;
        InputStream inStream = null;

        try {
            inStream = openHttpConnection(url);
            Log.d("inStream", String.valueOf(inStream));
            bmap = BitmapFactory.decodeStream(inStream);
            if(inStream != null)
                inStream.close();

        }
        catch (IOException el) {
            el.printStackTrace();
        }
        return bmap;
    }

    private InputStream openHttpConnection(String urlString) throws IOException {

        InputStream inStream = null;
        int checkConn = -1;
        URL url = new URL(urlString);
        URLConnection conn = url.openConnection();
        try {

            HttpURLConnection httpConn = (HttpURLConnection) conn;
            httpConn.setAllowUserInteraction(false);
            httpConn.setInstanceFollowRedirects(true);
            httpConn.setRequestMethod("GET");
            httpConn.connect();
            checkConn = httpConn.getResponseCode();
            if (checkConn == HttpURLConnection.HTTP_OK) {
                inStream = httpConn.getInputStream();

            }

        }
        catch (Exception ex) {
            throw new IOException("Error connecting");
        }
        return inStream;
    } 
```

# javascript - 新手尝试从 OREILLY 的“Head First HTML5 Programming”的第 3 章重新创建简单的播放列表管理器

> ID：15424540
> 
> 赞同：0
> 
> 时间：2013-03-15T04:06:21.953
> 
> 标签：javascript, html

标题基本概括了所有内容。我是一个真正喜欢电脑、视频游戏和机器人的新手......任何数字化的东西。任何人，我最近才开始编程，因为我正在考虑制作自己的网站并且我希望它尽可能棒。更不用说，这是一个很好的技能。我肯定会做更多的设计网站，而不是从事我现在的糟糕工作。但我离题了，我从 OREILLY 的“Head First HTML5 Programming”的第 3 章中获取了这段代码。我做了“一些”调整，但没什么大不了的。如您所见，它只是一个简单的小播放列表管理器，具有一些功能和警报。乍一看，页面看起来应该如此。但是当你输入一首歌曲并点击“添加歌曲”按钮时......什么也没有发生！！此外，“警报”不起作用！为什么？！我做错了什么？！减去我对其进行的一些不相关和“有意”的定制，它与书中使用的公式相同，它应该可以工作。“每次”有人输入一首歌曲时，“ul.appendChild(li)”应该将它添加到播放列表中......对吗？！？！无论如何，这里是 html/javascript：

```
<!doctype html>
<html lang="en">
<head>
<title>RTH</title>
<meta charset="utf-8">
<script>

window.onload = init;

function init() {

Var button = document.getElementById("addButton");

button.onclick = handleButtonClick;

}

function handleButtonClick() {

var textInput = document.getElementById("songTextInput");

var songName = textInput.value;

} if (songName == "") {

alert("Enter a track!");

} else {

alert("Congrats...track is now being added!");

}

var li = document.createElement("li");

li.innerHTML = songName;

var ul = document.getElementById("playlist");

ul.appendChild(li);

}

</script>
<body>
<form>

<Input type = "text" Id = "songTextInput" size = "40" placeholder = "Insert track here...">

<Input type = "button" id = "addButton" value = "Add Song">

</form>
<strong>

<ul id="playlist">

</ul>
</strong>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T04:20:46.503

嗨修改后的代码是，

```
<!doctype html>
<html lang="en">
<head>
<title>RTH</title>
<meta charset="utf-8">
<script>

function handleButtonClick() {

var textInput = document.getElementById("songTextInput");

var songName = textInput.value;

 if (songName == "") {

alert("Enter a track!");

} else {

alert("Congrats...track is now being added!");

}

var li = document.createElement("li");

li.innerHTML = songName;

var ul = document.getElementById("playlist");

ul.appendChild(li);

}

</script>
<body>
<form>

<Input type = "text" Id = "songTextInput" size = "40" placeholder = "Insert track here..."/>

<Input type = "button" id = "addButton" onclick="handleButtonClick();" value = "Add Song"/>

</form>
<strong>

<ul id="playlist">

</ul>
</strong>
</body>
</html> 
```

它工作正常。

问题是，

不需要 window.onload ，因为该功能在按钮单击时触发。那是我在代码中更改的唯一内容。抱歉耽搁了

# c# - 当多个线程调用相同的函数时Java/C#如何分配内存

> ID：15424542
> 
> 赞同：-2
> 
> 时间：2013-03-15T04:06:24.577
> 
> 标签：c#, java, multithreading

假设下面的代码：

```
Class test
{
   void foo()
   {
      int i=0;
   }
} 
```

* * *

```
Test t=new Test();
// if many threads call t.foo(); 
```

每个线程都有自己的内存来调用 foo 吗？这意味着每个线程都有自己的`i`？

Java/C#在调用函数时如何分配内存？我记得，在 C# 中，每个线程将分配 1M 内存。爪哇呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:13:16.410

单线程和多线程应用程序之间的内存分配基本上没有区别（至少在 .Net/Windows 世界中）。

在堆（普通对象）或堆栈（用于局部变量/局部结构/函数参数）中分配的内存。C# 应用程序（和大多数 Windows 应用程序）的默认堆栈大小是每个线程 1Mb，但堆在所有线程之间共享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:34:27.657

在您为 C# 描述的场景中会发生什么（不确定 Java，但我相信它的行为会相似）是值 i 将存储在短期存储中（堆栈或寄存器取决于 JIT 想要做什么） . 这是因为它是一个值类型。如果它是一个引用类型，那么它很可能会在堆上。

每次调用函数时（不管线程如何），函数都会获得变量 i 的新实例。因此，哪个线程或多少个线程并不重要，只需要对该函数进行多少次调用。

需要注意的一件事是，您不能总是保证某些东西将被分配到哪里，而且在大多数情况下您不应该关心。只要不影响事件的单线程视图和程序的功能，JIT/CLR 就可以做它想做的任何事情（存在边缘情况，但对于 99% 的代码，此语句是正确的）。

您还可以阅读 Eric Lippert 对这个问题的回答（[类字段，它们是存储在堆栈还是堆中？](https://stackoverflow.com/questions/2565331/fields-of-class-are-they-stored-in-the-stack-or-heap)）以及他的博客（[http://blogs.msdn.com/b/ericlippert/](http://blogs.msdn.com/b/ericlippert/)）以更好地理解并且（[http://ericlippert.com/](http://ericlippert.com/)）他已经多次详细讨论过这个问题。

# actionscript-3 - CopyPixels/MergeAlpha 改变颜色 AS3

> ID：15424543
> 
> 赞同：1
> 
> 时间：2013-03-15T04:06:34.840
> 
> 标签：actionscript-3, colors, bitmapdata

我正在制作一种涂抹工具。我使用以下方法 -

1）在brushAlpha（bitmapData）上画圆。

2)`_orignalData.copyPixels(_orignalData, new Rectangle(oldMouseX, oldMouseY, diameter, diameter), new Point(mouseX,mouseY), brushAlpha, new Point(0,0), true);`

这会创建所需的涂抹效果，但它也会将像素的颜色更改为原色 (RGB)，例如，如果像素的颜色为 0xFF8800，它将使其变为 0xFF0000（红色），或者如果像素颜色为 0x0088FF，它将使其变为 0x0000FF

orignalData 是一个透明的位图数据，初始颜色设置为 0x000000；

这个效果是由mergealpha引起的吗？请帮忙

编辑-我做了一些测试，得到了这些结果-

backgroundColor = 0x00000000，foregroundColor = 0xffdaff00 结果 = 0x00ff00（绿色）

背景颜色 = 0xFFFFFFFF ，前景颜色 = 0xffdaff00 结果 = 0xFFFF00（黄色）

backgroundColor = 0xFF0000FF , foregroundColor = 0xffdaff00 结果 = 0x00ff00 (Green) + 过度时它变黑

backgroundColor = 0xFF11FF88，foregroundColor = 0xffdaff00 结果 = 0x00ff00（绿色）+ 过度涂抹时无黑色

我尝试了一些其他颜色也喜欢

背景颜色 = 0xFFFFFFFF ，前景颜色 = 0xFF888800 结果 = 0x808000

背景颜色 = 0x0000000，前景颜色 = 0xFF888800 结果 = 0x000000

有人可以告诉这里发生了什么吗？

# c# - 在文档文本中最初未定义时检索元素属性值

> ID：15424550
> 
> 赞同：0
> 
> 时间：2013-03-15T04:07:07.197
> 
> 标签：c#, webkit, open-webkit-sharp

假设我们有一个 WebKitBrowser 控件，并且我们将 DocumentText 设置为...

```
wkb.DocumentText = @"
<!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01//EN' 'http://www.w3.org/TR/html4/strict.dtd'>
<html>
<head></head>
<body>
<form>
<input type='text' id='test' name='smith'><br>
</form>
</body>
</html>
"; 
```

如果我要通过 C# 在该输入字段中获取用户输入，那么正确的方法是什么？

如果我在 HTML 中预定义 value 属性，例如...

```
<input type='text' id='test' name='smith' value='freedom'> 
```

然后`MessageBox.Show(wkb.Document.GetElementById("test").getAttribute("value"));`准确地显示“自由”。但是，如果未定义 value，则结果始终为空（我假设它为 null 而不仅仅是空）。

这对我来说很有意义，但我会获取用户输入，而不是预定义的值。*我想可以将整个文档保存到一个字符串并解析它，但在标准 IE 浏览器控件中使用element.value*路由要简单得多。我的*美味*选择是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:11:49.047

您无法在 C# 客户端读取表单值。您必须发回（AJAX 或完整回发）表单以读取 C# 中的值。如果您想查看某个值是否已更改，可以使用 jQuery`.on('blur' ...`捕获更改的值并将 AJAX 发送回服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:01:54.983

我还想补充一点，这种方法有效，有点偏离 viperguynaz 的正确答案。

本质上，您为 webkit 浏览器控件创建导航方法，然后将 webkit 浏览器控件指向事件部分。你在 HTML 端执行一个功能上无用的表单提交，然后解析用户输入的参数，然后你就可以去，任何等待你的幻想。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Web;
using WebKit;

namespace test_run
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            wkb.DocumentText = @"
                <!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01//EN' 'http://www.w3.org/TR/html4/strict.dtd'>
                <html>
                <head></head>
                <body>
                <form method='get'>
                <input type='text' name='pike'><br>
                <input type='submit' value='Submit'>
                </form>
                </body>
                </html>";
        }

        private void Form1_Load(object sender, EventArgs e)
        {
        }

        private void button1_Click(object sender, EventArgs e)
        {

        }

        private void wkb_navigating(object sender, WebKitBrowserNavigatingEventArgs e)
        {
            string param1 = HttpUtility.ParseQueryString(e.Url.ToString()).Get(0);
            MessageBox.Show(param1.ToString());

        }
    }
} 
```

# xcode4.6 - iPad 6.1.2 支持 Xcode 版本

> ID：15424552
> 
> 赞同：0
> 
> 时间：2013-03-15T04:07:21.093
> 
> 标签：xcode4.6

嗨朋友们，我使用的是 Xcode 6.1 版，而我的 iPad iOS 版本是 6.1.2 我的问题是我无法直接在 iPad 上运行该应用程序。我无法使用设备调试应用程序请告诉我哪个 Xcode 版本匹配 iOS 6.1.2 请告诉我。还有一个问题是我正在使用 Ad_Hoc 证书部署应用程序，但未安装应用程序。我没有问题，如果你认识任何人，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:10:06.277

您在这里有两个单独的问题，因此您不太可能得到任何一个的答案。首先，没有 Xcode 版本 6.1，确保你有最新的 Xcode 版本（目前是 4.6.1 。其次，有很多很多可能的原因导致应用程序无法安装。一旦你有了最新版本的 Xcode，说确切地说你收到了什么错误信息。试着问一个问题，得到一个答案并在你问另一个问题之前接受它。这样你会从别人那里得到更多的帮助

# android - 从非 FragmentActivity 中检索 FragmentManager

> ID：15424559
> 
> 赞同：2
> 
> 时间：2013-03-15T04:07:52.797
> 
> 标签：android, android-fragments, android-fragmentactivity

我正在尝试检索`FragmentManager`以显示我`Fragment`的如下：

```
def fragmentManager = competitionSetupDialogFragment.getFragmentManager() 
```

然后我尝试使用以下内容显示它：

```
competitionSetupDialogFragment.show(fragmentManager, HomeScreenActivity.CompetitionDialog) 
```

我`competitionSetupDialogFragment`的定义如下：

```
class CompetitionSetupDialogFragment() extends DialogFragment { 
```

但是，当上面尝试显示时，我的`fragmentManager`变量为空。

我无法扩展 a `FragmentActivity`，因为我已经`RoboActivity`为 RoboGuice 依赖注入扩展了 a。我的 Android 目标 API 版本是 15，所以我认为我的方法应该可行。有谁知道我的问题是什么？

（我正在尝试使用 Scala 进行开发）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:34:47.040

这个问题的简单解决方案是从 RoboFragmentActivity 扩展并且一切正常。

# c - fgets() 的跨平台使用？

> ID：15424563
> 
> 赞同：0
> 
> 时间：2013-03-15T04:08:16.193
> 
> 标签：c

我想用来`fgets()`简单地读取一行并去除换行符。这适用于 Windows 和 UN*X 上的所有情况吗？

```
fgets(buf, sizeof buf, stdin);
strtok(buf, "\r\n"); 
```

请不要推荐非标准的东西，比如 GNU 的 getline()。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T04:10:34.117

不，如果您想要跨平台，请正确执行：

```
fgets (buf, sizeof (buf), stdin);
if (strlen (buf) > 0)
    if (buf[strlen (buf) - 1] == '\n')
        buf[strlen (buf) - 1] = '\0'; 
```

在 UNIX（例如）上读取 Windows 创建的*文件*时，您可能会遇到问题，但这将达到其预期目的，即修改标准输入。

如果您担心多次调用`strlen`：

```
fgets (buf, sizeof (buf), stdin);
{
    size_t len = strlen (buf);
    if (len > 0)
        if (buf[len - 1] == '\n')
            buf[len - 1] = '\0';
} 
```

* * *

顺便说一句，如果您正在寻找一个强大的行输入解决方案，它可以执行换行删除、缓冲区溢出检测、多余的行清理并且只使用标准 C，您应该看看[这个答案](https://stackoverflow.com/questions/4023895/how-to-read-string-entered-by-user-in-c/4023921#4023921)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T04:21:31.687

不，换行符的内部（解释）表示总是'\n'。所以：

```
 strtok(buf, "\n"); 
```

通常，需要以文本模式打开文件才能自动进行换行转换：

```
 text = fopen("text", "r"); // Conversion works
 binary = fopen("binary", "rb"); // Won't work 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T06:41:53.297

多谢你们。最终编写了这个包装器：

```
void
getstr(char *s, size_t n)
{
    int c;

    if (fgets(s, n, stdin) != NULL) {
        if (s[strlen(s) - 1] == '\n')
            s[strlen(s) - 1] = '\0';
        else
            while ((c = getchar()) != EOF && c != '\n')
               ;
    }
} 
```

# javascript - 如何在单个按钮单击事件上运行两个函数

> ID：15424566
> 
> 赞同：1
> 
> 时间：2013-03-15T04:08:33.393
> 
> 标签：javascript, extjs, extjs4

我正在使用 MVC Extjs，我希望在按钮的单击事件上运行两个不同的函数。到目前为止，这是我的控制器代码：

```
Ext.define('MyApp.controller.myController', {
    extend: 'Ext.app.Controller',

    runFirst: function(button, e, options) {
        console.log('first function is running');
    },

    runSecond: function(button, e, options) {
        console.log('second function is running');
    },

    init: function(application) {
        this.control({
            "#myButton": {
                click: this.runFirst, runSecond //THIS PART DOESN'T WORK :(
            }
        });
    }

}); 
```

当我单击 myButton 时，我无法同时`runFirst`运行。`runSecond`

您可以在此处下载所有代码：[https ://github.com/nitzaalfinas/Extjs-run-2-function-with-one-click/tree/one](https://github.com/nitzaalfinas/Extjs-run-2-function-with-one-click/tree/one)

您能告诉我如何在单击一次按钮时运行两个功能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T04:18:19.197

你在做什么不是有效的Javascript。您不能将两个不同的值分配给单个变量（就是这样`click:`）

因此，您可以通过以下方式实现它：

```
init: function(application) {
    this.control({
        "#myButton": {
            click: this.runBoth
        }
    });
}

runBoth: function(button, e, options) {
    this.runFirst(button, e, options);
    this.runSecond(button, e, options);
} 
```

或者，使用匿名函数：

```
init: function(application) {
    this.control({
        "#myButton": {
            click: function(button, e, options) {
                this.runFirst(button, e, options);
                this.runSecond(button, e, options);
            }
        }
    });
} 
```

# string - 如何使用 VBScript 查找和替换多个文件中的文本字符串

> ID：15424568
> 
> 赞同：0
> 
> 时间：2013-03-15T04:08:54.850
> 
> 标签：string, vbscript, replace

我有一个关于简单 VBScript 的基本问题。我的目标是在多个文件中找到替换多个文本字符串。（要替换的 21 个文本字符串在文件中是相同的。）文件名有大约 12 个前缀，然后在末尾有数字 1 到 200。我仅用于其中一个文件中的一个字符串的代码如下。

```
Const ForReading = 1
Const ForWriting = 2

Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objFile = objFSO.OpenTextFile("C:\filename_XX.txt", ForReading)

strText = objFile.ReadAll
objFile.Close
strNewText = Replace(strText, "Test 1", "Test 2")

Set objFile = objFSO.OpenTextFile("C:\filename_XX.txt", ForWriting)
objFile.Write strNewText
objFile.Close 
```

我只想遍历文件名并可能遍历搜索字符串。For...Next 循环可以完成这个吗？我可以参考文件名对象中的 for 循环数吗？

我看到了关于搜索子文件夹的回复，但我认为它比我需要做的更复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:25:09.447

如果文件在同一个目录中并且都有一个像你这样的文件名，`prefix_##.txt`你可以这样做：

```
Set fso = CreateObject("Scripting.FileSystemObject")

Set prefixes = CreateObject("Scripting.Dictionary")
prefixes.CompareMode = vbTextCompare 'make dictionary lookups case-insensitive
prefixes.Add "prefix1", True
prefixes.Add "prefix2", True
'...

For Each f In fso.GetFolder("C:\basefolder").Files
  If InStr(f.Name, "_") > 0 Then
    If prefixes.Exists(Split(f.Name, "_")(0)) Then
      text = fso.OpenTextFile(f.FullName).ReadAll
      text = Replace(text, "Test 1", "Test 2")
      fso.OpenTextFile(f.FullName, 2).Write text
    End If
  End If
Next 
```

如果要使用文件名的数字部分，则必须从文件名中提取它，例如：

```
num = Split(fso.GetBaseName(f.Name), "_")(1) 
```

如果您的文件不在同一个目录中，则需要递归到子文件夹中。此外，如果您有类似`prefix_##somethingelse.txt`or的文件名，则`prefix_##.otherextension`必须添加进一步检查以将它们排除在处理之外。

# c# - C#如何像对待数组一样对待整数？

> ID：15424570
> 
> 赞同：-1
> 
> 时间：2013-03-15T04:09:20.050
> 
> 标签：c#

假设我有 5 个**不是数组的 int！**我想在 1 个循环中全部更改。有没有办法制作一个数组来获取这 5 个数字的值并可以直接更改它们？

就像是：

```
int a = 10;
int b = 20;

int[] rihanna = // .... ? 

for(int a=0; a<rihanna.length;a++)
    rihanna[a]++;

Console.WriteLine("{0} {1} ",a,b) // what I want to see here is 11 and 21 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T04:16:27.153

一般来说，这里的答案是**否定**的。这将要求 C# 允许引用整数（或其他值类型），[但它](https://stackoverflow.com/questions/2985646/how-to-store-a-reference-to-an-integer-in-c)不允许引用（并且有充分的理由。）

我能为您提供的最佳解决方案是使用带[`ref`参数](http://msdn.microsoft.com/en-us/library/14akc2c7.aspx)的函数。由于无论如何您都在尝试对一堆任意整数变量进行操作，因此您仍然必须将它们全部列出。如何通过函数调用来做到这一点，如下所示：

```
void Increase(ref int x) {
    x++;
}

int a = 10;
int b = 20;

Increase(ref a);
Increase(ref b); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T04:17:34.567

我想以以下声明作为开头。尽管这可以满足您的要求..它很丑陋。这更符合您假设您可以使用 C#“只是做”的事情。实际上它更难。

```
unsafe {
    int* a = stackalloc int[1];
    int* b = stackalloc int[1];

    *a = 10;
    *b = 20;

    int*[] rihanna = { a, b };

    for (int i = 0; i < rihanna.Length; i++) {
        (*rihanna[i])++;
    }

    Console.WriteLine("{0} {1} ", *a, *b); // "11 21"
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-15T04:19:04.457

我认为如果您放宽要求，有一种方法可以解决它 - 拥有实体数组，允许`int`通过对数组的操作来修改局部变量集。

为此，可以在每个委托的委托数组中捕获对变量的引用`ref int val`。

```
void Increase(ref int x) 
{
    x++;
}
void Set(ref int x, int amount) 
{
    x = amount;
}

void Sample()
{
  int a = 10;
  int b = 20;

  // Array of "increase variable" delegates
  var increaseElements = new Action[] { 
    () =>  Increase(ref a), 
    () =>  Increase(ref b) 
  };
  increaseElements[0](); // call delegate, unfortunately () instead of ++ 
  Console.WriteLine(a); // writes 11

  // And now with array of "set the variable" delegates:
  var setElements = new Action<int>[] { 
    v =>  Set(ref a,v), 
    v =>  Set(ref b,v) 
  };
  setElements[0](3); 
  Console.WriteLine(a); // writes 3 
} 
```

笔记

*   直接使用委托，您必须使用 () 调用它们。
*   可以通过将委托包装到将调用增加作为其实现的对象中来修复`()`而不是问题。`++``++`
*   `Set`需要调用`(3)`而不是`= 3`需要更多技巧的版本的问题- 使用索引实现自定义类以重定向`set [index]`到调用保存的 setter 函数。

警告：这确实是出于娱乐目的 - 请不要在实际代码中尝试。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-15T04:19:22.367

您实际上不能在 .NET 中执行此操作。`int`s 是值类型，因此您不能直接引用它们。

然而，有很多方法可以解决这个问题。这里只有一个：

```
class IntReference
{
    int Value { get; set; }
}

IntReference a = new IntReference() { Value = 10 };
IntReference b = new IntReference() { Value = 20 };

IntReference[] rihanna = { a, b };

for (int i = 0; i < rihanna.Length; i++)
    rihanna[i].Value = rihanna[i].Value + 1;

Console.WriteLine("{0} {1} ", a.Value, b.Value); // "11 21" 
```

虽然你真的不应该这样做，永远。它与 .NET 中值类型的设计背道而驰。

# python - 来自给定文件的 Python Anagram Finder

> ID：15424577
> 
> 赞同：0
> 
> 时间：2013-03-15T04:10:07.197
> 
> 标签：python, anagram

我已经在阳光下尝试了一切来解决这个问题，但一无所获。我什至不确定如何解决这个问题。说明如下...

您的程序将询问用户包含单词列表的文件的名称。单词列表被格式化为每行一个单词。• 对于每个单词，找出该单词的所有字谜（有些不止一个）。• 输出：报告有多少单词有 0、1、2 等字谜。输出形成最多字谜的单词列表（如果有多个具有相同最大长度的集合，则输出所有单词）。• 您应该使用适当的功能分解。

请记住，我已经编写了不到一个月的程序，所以尽可能地把所有东西都简化了。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T06:38:43.963

我认为这是家庭作业。你知道字谜只是一个词的排列。慢慢来：学习如何计算一个单词的字谜，然后再学习如何计算多个单词。以下交互式会话展示了如何计算单词的字谜。你可以从那里继续。

```
>>> # Learn how to calculate anagrams of a word
>>> 
>>> import itertools
>>> 
>>> word = 'fun'
>>> 
>>> # First attempt: anagrams are just permutations of all the characters in a word
>>> for permutation in itertools.permutations(word):
...     print permutation
... 
('f', 'u', 'n')
('f', 'n', 'u')
('u', 'f', 'n')
('u', 'n', 'f')
('n', 'f', 'u')
('n', 'u', 'f')
>>> 
>>> # Now, refine the above block to print actual words, instead of tuple
>>> for permutation in itertools.permutations(word):
...     print ''.join(permutation)
... 
fun
fnu
ufn
unf
nfu
nuf
>>> # Note that some words with repeated characters such as 'all'
>>> # has less anagrams count:
>>> word = 'all'
>>> for permutation in itertools.permutations(word):
...     print ''.join(permutation)
... 
all
all
lal
lla
lal
lla
>>> # Note the word 'all' and 'lla' each repeated twice. We need to
>>> # eliminate redundancy. One way is to use set:
>>> word = 'all'
>>> anagrams = set()
>>> for permutation in itertools.permutations(word):
...     anagrams.add(''.join(permutation))
... 
>>> anagrams
set(['lal', 'all', 'lla'])
>>> for anagram in anagrams:
...     print anagram
... 
lal
all
lla
>>> # How many anagrams does the word 'all' have?
>>> # Just count using the len() function:
>>> len(anagrams)
3
>>> 
```

为了您的方便，我将上面的会话粘贴在[这里。](http://bpaste.net/show/83862/)

### 更新

现在有亚伦的澄清。最低级别的问题是：*如何确定两个单词是否是字谜？*答案是：*“当它们有相同数量的字母时。”* （对我来说）最简单的方法是对所有字母进行排序并进行比较。

```
def normalize(word):
    word = word.strip().lower() # sanitize it
    word = ''.join(sorted(word))
    return word

# sort_letter('top') ==> 'opt'
# Are 'top' and 'pot' anagrams? They are if their sorted letters are the same:
if normalize('top') == normalize('pot'):
    print 'they are the same'
    # Do something 
```

现在您已经知道如何比较两个单词，让我们处理一个单词列表：

```
>>> import collections
>>> anagrams = collections.defaultdict(list)
>>> words = ['top', 'fun', 'dog', 'opt', 'god', 'pot']
>>> for word in words:
...     anagrams[normalize(word)].append(word)
... 
>>> anagrams
defaultdict(<type 'list'>, {'opt': ['top', 'opt', 'pot'], 'fnu': ['fun'], 'dgo': ['dog', 'god']})
>>> for k, v in anagrams.iteritems():
...     print k, '-', v
... 
opt - ['top', 'opt', 'pot']
fnu - ['fun']
dgo - ['dog', 'god'] 
```

在上面的会话中，我们使用 anagrams（一个 defaultdict，与具有默认值的 dict 相同）来存储单词列表。键是排序后的字母。这意味着，`anagrams['opt'] ==> ['top', 'opt', 'pot']`。从那里，您可以分辨出哪个字谜最多。其余的应该很容易。

# objective-c - 我们如何在ios的前台处理耳机播放/暂停按钮事件

> ID：15424578
> 
> 赞同：9
> 
> 时间：2013-03-15T04:10:12.480
> 
> 标签：objective-c, iphone-5, ios6.1, uievent

我需要在前台处理耳机播放/暂停按钮事件。我如何能够使用下面的代码在后台处理相同的场景

```
if ([[UIApplication sharedApplication] respondsToSelector:@selector(beginReceivingRemoteControlEvents)]){
    [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
    [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:NULL];
    [self becomeFirstResponder];
    NSLog(@"Responds!");
} 
```

如果可能，请提供解释或示例代码。我做了很多研究，但没有任何帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-07-27T09:37:31.870

还有另一种方法可以通过耳机实现播放器控制。使用`MPRemoteCommandCenter`工具播放暂停命令。 [苹果文档](https://developer.apple.com/library/ios/documentation/MediaPlayer/Reference/MPRemoteCommandCenter_Ref/)

```
[[MPRemoteCommandCenter sharedCommandCenter].togglePlayPauseCommand addTarget:self action:@selector(onTooglePlayPause)]; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-15T05:22:22.967

您必须检查以下标准：

1.  编辑您的 info.plist 以规定您在后台和前台执行音频 (UIBackgroundModes)。
2.  实现这个功能：

    ```
    - (void)remoteControlReceivedWithEvent:(UIEvent *)theEvent 
    {
      if (theEvent.type == UIEventTypeRemoteControl)
      {
        switch(theEvent.subtype) {
        case UIEventSubtypeRemoteControlTogglePlayPause:
                //Insert code
                break;
            case UIEventSubtypeRemoteControlPlay:
                //Insert code
                break;
            case UIEventSubtypeRemoteControlPause:
                // Insert code
                break;
            case UIEventSubtypeRemoteControlStop:
                //Insert code.
                break;
            default:
                return;
        }
      }
    } 
    ```

...显然，用您的应用程序中相关的任何功能替换“//插入代码”。

3>最后，为了调用上述函数，将其插入到您的 viewDidAppear 事件中：

```
[[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
    if ([self canBecomeFirstResponder]) {
        [self becomeFirstResponder];
    } 
```

另请参阅此链接： http: [//www.sagorin.org/2011/11/29/ios-playing-audio-in-background-audio/](http://www.sagorin.org/2011/11/29/ios-playing-audio-in-background-audio/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-17T07:04:20.927

slobodans 解决方案的 swift 2 版本：

```
MPRemoteCommandCenter.sharedCommandCenter().togglePlayPauseCommand.addTarget(self, action: #selector(togglePlayStop(_:))); 
```

# vbscript - 使用 VBScript 打开控制面板

> ID：15424589
> 
> 赞同：0
> 
> 时间：2013-03-15T04:10:56.997
> 
> 标签：vbscript

我对 VBScript 很陌生，我需要使用 VBScript 打开控制面板，我尝试像这样打开资源管理器

```
Dim txtFolderToOpen  
txtFolderToOpen = "C:\Windows" 
App.Run txtFolderToOpen 
Set App = Nothing 
```

这很好用，但如果我把路径设置为`Control Panel`它不起作用，

有没有办法做到这一点？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T07:08:47.067

要打开控制面板，您可以[`Run`](http://msdn.microsoft.com/en-us/library/d5fk67ky(v=vs.84).aspx)使用*%windir%\system32\control.exe*文件：

```
CreateObject("WScript.Shell").Run "control.exe" 
```

要打开特定的控制面板小程序 (.cpl)，请将 .cpl 文件名指定为 control.exe 的参数：

```
CreateObject("WScript.Shell").Run "control.exe TimeDate.cpl" ' Open Date/Time properties 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-12-17T08:57:25.017

要使用 vbscript 打开程序和功能，请使用以下命令 -

```
CreateObject("WScript.Shell").Run "control.exe Appwiz.cpl" 
```

# javascript - 在通过 jquery.ajax 重新加载后从 div 中恢复输入/选择元素

> ID：15424590
> 
> 赞同：1
> 
> 时间：2013-03-15T04:11:14.757
> 
> 标签：javascript, jquery, html, dom

我有一个 div，其中包含可变数量的输入（文本、隐藏）和下拉列表（每个都可能有一个 ID、一个名称和/或一个或多个类。

此 div 会不时重新加载，并且可能会添加一些新输入或删除旧输入。

我要做的是在每次重新加载之前保持输入或选择的值，而不将当前值传递给服务器。

除了选择字段之外，这里的代码几乎可以满足我的需要 - 没有获取它们的值；一旦这工作，我可以序列化该数组并将其存储在某处，然后解码，迭代并将值写回。

```
function getAllValues() {
    var inputValues = [];
    $jq('#slip input').each(function() {
        var type = $jq(this).attr("type");
        if ((type == "checkbox" || type == "radio") && $jq(this).is(":checked")) {

            inputValues.push([ getIdentifier($jq(this)), $jq(this).val()]);
        }
        else if (type != "button" || type != "submit") {
            inputValues.push([ getIdentifier($jq(this)), $jq(this).val()]);
        }
    })
    $jq('#slip select').each(function() {
        var type = $jq(this).attr("type");
        if (type != "button" || type != "submit") {
            inputValues.push([ getIdentifier($jq(this)), $jq(this).val()]); // problem!
        }
    })
    return inputValues;
} 
```

是否会感谢任何输入或对此类问题的更优雅的解决方案？

后来编辑：本杰明很友好地发布了一个指向 jquery serialize() 的链接，它很好地解决了这个问题。如果其他人需要一些代码来恢复保存的值：

```
function restoreSlipValues(){
    var tickets_data = decodeURIComponent($jq("#temporary-values").val()).split("&");
    console.log(tickets_data);//.split("&");
    $jq(tickets_data).each(function(){
        if (this.split("=")[0] !="authenticity_token"  && this.split("=")[0].indexOf("_win") < 0  && this.split("=")[0].indexOf("winning") < 0) {
            $jq("form#ticks input[name=\"" + this.split("=")[0] + "\"]").val(this.split("=")[1]);
            $jq("form#ticks select[name=\"" + this.split("=")[0] + "\"]").val(this.split("=")[1]);
        }

    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:25:25.940

表单有一个[`.serialize`](http://api.jquery.com/serialize)方法。在您的情况下，这可能是最容易存储在 localStorage 中的。

> 该`.serialize()`方法以标准 URL 编码表示法创建文本字符串。它对表示一组表单元素的 jQuery 对象进行操作。表单元素可以有多种类型。

（很高兴它有帮助）

# database - Visual Basic 中的筛选和参数化

> ID：15424593
> 
> 赞同：1
> 
> 时间：2013-03-15T04:11:25.650
> 
> 标签：database, sql-server-2005, parameters, textbox, reportviewer

我遇到一个错误，提示“无法执行 tablix 'blah' 的 FilterExpression 处理。无法比较 System.Decimal 和 System.Double 类型的数据。请检查 FilterExpression 返回的数据类型。”

在我放 TotalDue 之前它正在工作，但在那之后它向我展示了一个错误。

我已经为其他 tablix 做了一些参数，这就是我所做的：

在我的 RDLC 中，我有`pIDNo, pDocID, pLname, pFname, pMI`, 等等...

我有一个参数是：

`@pIDno, @DocID, @Lname, @Fname, @MI, blah and blah.`

在我的报告查看器上，我为所有列放置了一些文本框，这就是我所做的：

```
Imports Microsoft.Reporting.WinForms

Public Class printall

 Private Sub parID()
        Me.PatientsTableAdapter.Fill(Me.OJTDataSet.Patients)
        Dim ID As New ReportParameter("pIDno", txtID.Text)
        ReportViewer1.LocalReport.SetParameters(New ReportParameter() {ID})
        ReportViewer1.RefreshReport()
    End Sub

Private Sub txtID_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs)    
 Handles txtID.TextChanged
        parID()
    End Sub

 Private Sub partotalDUe()
        Me.PatientsTableAdapter.Fill(Me.OJTDataSet.Patients)
        Dim TotalDue As New ReportParameter("TotalDue", txtTotalDue.Text)
        ReportViewer1.LocalReport.SetParameters(New ReportParameter() {TotalDue})
        ReportViewer1.RefreshReport()
    End Sub

  Private Sub txtTotalDue_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles txtTotalDue.TextChanged
            partotalDUe()
        End Sub 
```

我在这里所做的是`TextChanged`为`Parameter`每个`TextBox`.

我现在的问题是如何修复 TotalDue 部分？因为在我的数据库中它的价值是金钱，就像这样：

1234.0000

所有的 tablix 都运行良好并显示在我的`ReportViewer`但唯一的错误是 TotalDue，如何修复它？

提前致谢！

请在这里指导我。

# android - Android源错误从sdcard读取文件

> ID：15424603
> 
> 赞同：4
> 
> 时间：2013-03-15T04:12:06.353
> 
> 标签：android, android-sdcard, android-source

我正在修改 Android 源 (AOSP) 以创建一个文件`/sdcard/myfile`。该文件已正确创建，并且在我执行`cat /sdcard/myfile`from时可见`adb shell`。（该文件是从中创建的，`PackageManagerService`它是应用程序框架层的一部分）

但是，当我尝试通过使用`new FileReader(myfile)`相同包管理器服务代码的代码访问文件时，出现以下异常：

```
java.io.FileNotFoundException: /sdcard/myfile (Permission denied) 
```

我的文件的权限是这样的：

```
----rwxr-x system   sdcard_rw      344 2013-03-15 08:39 myfile 
```

我可能做错了什么？我通过记录我尝试访问的文件名并对其进行检查来检查文件名是否正确`cat`。

**更新**：

这是完整的堆栈跟踪：

```
W/System.err(   67): java.io.FileNotFoundException: /sdcard/myfile (Permission denied)
W/System.err(   67):    at org.apache.harmony.luni.platform.OSFileSystem.open(Native Method)
W/System.err(   67):    at dalvik.system.BlockGuard$WrappedFileSystem.open(BlockGuard.java:232)
W/System.err(   67):    at java.io.FileInputStream.<init>(FileInputStream.java:80)
W/System.err(   67):    at java.io.FileInputStream.<init>(FileInputStream.java:132)
W/System.err(   67):    at java.io.FileReader.<init>(FileReader.java:66)
W/System.err(   67):    at org.csrdu.apex.policy.ApexPackagePolicy.getPolicyReader(ApexPackagePolicy.java:224)
W/System.err(   67):    at org.csrdu.apex.policy.ApexPackagePolicy.loadPoliciesForPackage(ApexPackagePolicy.java:82)
W/System.err(   67):    at org.csrdu.apex.AccessManager.checkExtendedPermissionByPackage(AccessManager.java:56)
W/System.err(   67):    at com.android.server.PackageManagerService.checkUidPermission(PackageManagerService.java:1703)
W/System.err(   67):    at com.android.server.am.ActivityManagerService.checkComponentPermission(ActivityManagerService.java:4096)
W/System.err(   67):    at com.android.server.am.ActivityStack.startActivityLocked(ActivityStack.java:1960)
W/System.err(   67):    at com.android.server.am.ActivityStack.startActivityMayWait(ActivityStack.java:2516)
W/System.err(   67):    at com.android.server.am.ActivityManagerService.startActivity(ActivityManagerService.java:2081)
W/System.err(   67):    at android.app.ActivityManagerNative.onTransact(ActivityManagerNative.java:142)
W/System.err(   67):    at com.android.server.am.ActivityManagerService.onTransact(ActivityManagerService.java:1467)
W/System.err(   67):    at android.os.Binder.execTransact(Binder.java:320)
W/System.err(   67):    at dalvik.system.NativeStart.run(Native Method) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T04:20:09.103

**为什么 adb shell 可以访问它而 PackageManagerService 不能？**

PackageManagerService 与用户一起运行`system`。它不在组 sdcard_rw 中运行。因此，根据您提供的权限，遇到权限拒绝。但是，adb shell 可以访问它，因为 adb shell 使用的用户`shell`已被授予访问 sdcard 的权限（在 sdcard_rw 组内）。

```
<permission name="android.permission.WRITE_EXTERNAL_STORAGE" >
    <group gid="sdcard_rw" />
</permission>
<assign-permission name="android.permission.WRITE_EXTERNAL_STORAGE" uid="shell" /> 
```

**为什么 PackageManagerService 与用户系统一起运行？**

PackageManagerService 在 SystemServer.java 的 init2 方法中启动。

```
pm = PackageManagerService.main(context,
                factoryTest != SystemServer.FACTORY_TEST_OFF); 
```

SystemServer 由 ZygoteInit.java 启动。

```
 String args[] = {
        "--setuid=1000",
        "--setgid=1000",
        "--setgroups=1001,1002,1003,1004,1005,1006,1007,1008,1009,1010,3001,3002,3003",
        "--capabilities=130104352,130104352",
        "--runtime-init",
        "--nice-name=system_server",
        "com.android.server.SystemServer",
    };
    ....
    /* Request to fork the system server process */
    pid = Zygote.forkSystemServer(
                parsedArgs.uid, parsedArgs.gid,
                parsedArgs.gids, debugFlags, null,
                parsedArgs.permittedCapabilities,
                parsedArgs.effectiveCapabilities); 
```

并检查这些 uid 值在 android_filesystem_config.h 中的含义：

```
#define AID_ROOT             0  /* traditional unix root user */

#define AID_SYSTEM        1000  /* system server */

#define AID_RADIO         1001  /* telephony subsystem, RIL */
#define AID_BLUETOOTH     1002  /* bluetooth subsystem */
#define AID_GRAPHICS      1003  /* graphics devices */
#define AID_INPUT         1004  /* input devices */
#define AID_AUDIO         1005  /* audio devices */
#define AID_CAMERA        1006  /* camera devices */
#define AID_LOG           1007  /* log devices */
#define AID_COMPASS       1008  /* compass device */
#define AID_MOUNT         1009  /* mountd socket */
#define AID_WIFI          1010  /* wifi subsystem */
#define AID_ADB           1011  /* android debug bridge (adbd) */
#define AID_INSTALL       1012  /* group for installing packages */
#define AID_MEDIA         1013  /* mediaserver process */
#define AID_DHCP          1014  /* dhcp client */
#define AID_SDCARD_RW     1015  /* external storage write access */ 
```

因此系统服务器使用 user 运行`system`，没有 sdcard_rw 组，PackageManagerService 也是如此。

**为什么将系统添加到 sdcard_rw 组后仍然拒绝权限？**

我在 Linux 上创建一个文件：

```
----rw---- 1 jermaine developers 0 Mar 12 23:01 a 
```

因此开发人员组中的用户可以 rw 它。

我通过以下方式将 jermaine 添加到开发人员组中：

```
usermod -a -G develoeprs jermaine 
```

但是，用户`jermaine`仍然无法访问该文件。在这种情况下，Linux 将拒绝所有者的访问，而不检查组。

**怎么修？**

chmod 创建该文件后。

# android - Android：在模拟器中使用网络摄像头时出错

> ID：15424606
> 
> 赞同：4
> 
> 时间：2013-03-15T04:12:19.107
> 
> 标签：android, android-emulator, webcam

在[上一篇文章](https://stackoverflow.com/questions/14012924/android-how-to-use-webcam-in-emulator)中，我在连接了网络摄像头的模拟器中启动摄像头应用程序时收到此错误：

```
CameraService::connect X (pid 702) rejected (invalid cameraId 0). 
```

更新开发工具后，我得到了另一个错误（然后，在制作新的模拟器后，我又得到了第一个错误）：

```
03-15 03:44:04.272: E/EmulatedCamera_QemuClient(40): queryStart: Query failed: Cannot start the camera
03-15 03:44:04.272: E/EmulatedCamera_QemuDevice(40): startDevice: Unable to start device 'AndroidEmulatorVC0' for NV21[640x480] frames 
```

[...]

```
03-15 03:31:15.922: E/AndroidRuntime(785): FATAL EXCEPTION: Thread-76
03-15 03:31:15.922: E/AndroidRuntime(785): java.lang.RuntimeException: startPreview failed
03-15 03:31:15.922: E/AndroidRuntime(785):  at com.android.camera.Camera.startPreview(Camera.java:1867)
03-15 03:31:15.922: E/AndroidRuntime(785):  at com.android.camera.Camera.access$3100(Camera.java:87)
03-15 03:31:15.922: E/AndroidRuntime(785):  at com.android.camera.Camera$5.run(Camera.java:1112)
03-15 03:31:15.922: E/AndroidRuntime(785):  at java.lang.Thread.run(Thread.java:856)
03-15 03:31:15.922: E/AndroidRuntime(785): Caused by: java.lang.RuntimeException: startPreview failed
03-15 03:31:15.922: E/AndroidRuntime(785):  at android.hardware.Camera.startPreview(Native Method)
03-15 03:31:15.922: E/AndroidRuntime(785):  at com.android.camera.Camera.startPreview(Camera.java:1864)
03-15 03:31:15.922: E/AndroidRuntime(785):  ... 3 more 
```

是什么导致了这个错误？我怎样才能最好地解决这个问题？

# c# - Sharepoint 应用程序恢复 webpart 错误

> ID：15424607
> 
> 赞同：1
> 
> 时间：2013-03-15T04:12:51.497
> 
> 标签：c#, sharepoint, sharepoint-2010, web-parts

我试图恢复我的 sharepoint 应用程序。我有一些webparts也被恢复了。在浏览这些步骤后，我使用 sharepoint powershell 命令“Restore”进行了恢复，但出现错误“Unknown server tag 'WarningWebpart:WarningWebpart'”。如果有人可以帮助我，那将是 gr8。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:59:01.623

Web应用程序恢复后，你浏览到哪里？？？？？？

如果您转到部署 Web 部件的特定页面，则会出现此错误。我认为问题在于，在将 Web 应用程序从一个站点恢复到另一个站点时，所有列表、库、站点、Web 部件也会恢复，但它没有获得该 Web 部件的 .wsp 文件的引用。因此，您需要再次将 wsp 解决方案部署到该恢复的 Web 应用程序并检查。希望这有帮助....

# paypal - Paypal Express Checkout - 不同的收款人取决于邮政编码/邮政编码

> ID：15424611
> 
> 赞同：0
> 
> 时间：2013-03-15T04:13:05.813
> 
> 标签：paypal

是否可以让 PayPal 根据他们在 PayPal 本身中提供的邮政编码/邮政编码选择快速付款（或任何其他付款）的收款人/收款人？特别是如果某人已经是 PayPal 的注册会员，并且在 PayPal 返回控制权进行确认之前，他们的邮政编码不会透露给网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:02:27.740

唯一*接近*这一点的就是自适应支付。使用 Adaptive Payments，您可以拥有将收件人和邮政编码联系在一起的自己的逻辑，并且您可以根据自己的逻辑调整收件人。

您可以在此处查看 Adaptive Payments 的文档： [https ://www.x.com/developers/paypal/products/adaptive-payments](https://www.x.com/developers/paypal/products/adaptive-payments)

# cuda - Cuda 5.0 printf 不工作

> ID：15424615
> 
> 赞同：1
> 
> 时间：2013-03-15T04:13:27.830
> 
> 标签：cuda, printf

我正在尝试运行我在[此](https://stackoverflow.com/questions/8003166/usage-of-printf-in-cuda-4-0-compilation-error)线程中找到的 cuda 的 printf 示例：

```
#include <stdio.h>

__global__ void helloCUDA(float f)
{
  printf("Hello thread %d, f=%f\n", threadIdx.x, f);
}

int main()
{
  helloCUDA<<<1, 5>>>(1.2345f);
  cudaDeviceReset();
  return 0;
} 
```

它正在编译：

```
nvcc -arch=sm_20 test.cu -run 
```

我也没有输出：

```
$ nvcc -arch=sm_20 test.cu -run
$ 
```

这是我的 cuda 版本：

```
$ nvcc --version
nvcc: NVIDIA (R) Cuda compiler driver
Copyright (c) 2005-2012 NVIDIA Corporation
Built on Fri_Sep_21_17:28:58_PDT_2012
Cuda compilation tools, release 5.0, V0.2.1221 
```

我正在使用大黄蜂版本 3：

```
$ optirun --version
optirun (Bumblebee) 3.1
Copyright (C) 2011 The Bumblebee Project

$ uname -a
Linux zeus 3.5.0-25-generic #39-Ubuntu SMP Mon Feb 25 18:26:58 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T04:41:32.513

将该`cudaDeviceReset()`呼叫更改为`cudaDeviceSynchronize()`呼叫。还要对通话进行[cuda 错误检查。](https://stackoverflow.com/questions/14038589/what-is-the-canonical-way-to-check-for-errors-using-the-cuda-runtime-api)`cudaDeviceSynchronize()`您的 GPU 或设置可能存在问题。

# facebook - Facebook Like 按钮不显示我的网站，而是显示托管公司

> ID：15424620
> 
> 赞同：1
> 
> 时间：2013-03-15T04:14:02.583
> 
> 标签：facebook, button, facebook-like

我在我的网站nichesbc.com 上添加了一个Facebook 的like 按钮，该按钮位于我的联系页面上，该按钮工作正常，但是当您单击like 按钮时，它不是我的网站将显示在某人的时间轴中，而是主机在这种情况下托管我的网站的公司 bluehost。我不知道出了什么问题或如何解决它，有什么建议吗？

# javascript - 将 Javascript 对象动态存储在另一个对象中

> ID：15424622
> 
> 赞同：1
> 
> 时间：2013-03-15T04:14:34.960
> 
> 标签：javascript, object, methods

这就是我想要完成的事情。我正在动态创建对象，并且想将它们添加到“主容器”对象中。我目前正在将数组用于容器，但有时我想按名称而不是按索引访问这些对象。如：

```
function Scene() {
     this.properties;
}

Scene.prototype.addEntity = function(entity) {
    this.push(entity);
}

var coolNameForObject = { Params };
var Scene1 = new Scene();

Scene1.addEntity(coolNameForObject); 
```

我知道 .push 不可用，仅适用于数组，但我厌倦了整天使用索引。我想通过名称来引用每个实体。例如：

```
Scene1.coolNameForObject.property 
```

但是想不出好办法。

也许有类似的东西：

```
coolNameForObject.name = 'coolNameForObject';
Scene1.(coolNameForObject.name) = coolNameForObject; 
```

但这种语法在 Dreamweaver 上很糟糕。我已经用谷歌搜索过了，但是任何出现的问题都可以通过数组更容易地解决，而且我对我需要这些对象的用途很有信心，能够通过容器对象上的属性引用调用对象是一种方式去。

我可以完全跳过“addEntity()”，然后去

```
Scene1.coolNameForObject = coolNameForObject; 
```

但这似乎与封装的想法背道而驰。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T04:21:55.830

Javascript 对象的属性可以直接或从变量中动态添加并使用方括号语法命名：

```
var propName = "foo";
coolNameForObject[propName] = 'coolNameForObject';

coolNameForObject["bar"] = 'coolNameForObject';

Scene.prototype.addEntity = function(name, entity) {
    this[name] = entity;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:27:38.417

添加这样的属性并使 enumerable: true，这不会产生问题。您可以轻松访问密钥。

```
 Object.defineProperty(obj, "key", {
  enumerable: true,
  configurable: true,
  writable: true,
 }); 
```

# cuda - cuda中的比较

> ID：15424623
> 
> 赞同：-3
> 
> 时间：2013-03-15T04:14:55.693
> 
> 标签：cuda, compare

我必须比较 CUDA 中的两个浮点数组（a，b），这样
`if a > b then a = a/a ; else a = 0`.

请告诉正确的方法和调用它的语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T05:45:50.590

像这样的东西应该工作。为了简洁起见，我正在简化我通常的 cuda 错误检查。

```
#include <stdio.h>
#define DSIZE 10000
#define nTPB 512

__global__ void cmp(float *a, float *b, int size){
  int idx = threadIdx.x + blockDim.x*blockIdx.x;
  if (idx < size)
    a[idx]=(a[idx] > b[idx])?1.0f:0.0f;  // could also be: ?(a[idx]/a[idx]):0;
}

int main() {
  cudaError_t err;
  float *h_a, *h_b, *d_a, *d_b;
  h_a = (float *)malloc(DSIZE*sizeof(float));
  if (h_a == 0) {printf("malloc fail\n"); return 1;}
  h_b = (float *)malloc(DSIZE*sizeof(float));
  if (h_b == 0) {printf("malloc fail\n"); return 1;}
  for (int i=0; i< DSIZE; i++){
    h_a[i] = 10.0f;
    h_b[i] = (float)i;}
  err = cudaMalloc((void **)&d_a, DSIZE*sizeof(float));
  if (err != cudaSuccess) {printf("cuda fail\n"); return 1;}
  err = cudaMalloc((void **)&d_b, DSIZE*sizeof(float));
  if (err != cudaSuccess) {printf("cuda fail\n"); return 1;}
  err = cudaMemcpy(d_a, h_a, DSIZE*sizeof(float), cudaMemcpyHostToDevice);
  if (err != cudaSuccess) {printf("cuda fail\n"); return 1;}
  err = cudaMemcpy(d_b, h_b, DSIZE*sizeof(float), cudaMemcpyHostToDevice);
  if (err != cudaSuccess) {printf("cuda fail\n"); return 1;}

  cmp<<<(DSIZE+nTPB-1)/nTPB, nTPB>>>(d_a, d_b, DSIZE);
  err=cudaMemcpy(h_a, d_a, DSIZE*sizeof(float), cudaMemcpyDeviceToHost);
  if (err != cudaSuccess) {printf("cuda fail\n"); return 1;}
  for (int i=0; i< 20; i++)
    printf("h_a[%d] = %f\n", i, h_a[i]);
  return 0;
} 
```

# oracle - 休眠分页或批处理

> ID：15424625
> 
> 赞同：3
> 
> 时间：2013-03-15T04:14:59.217
> 
> 标签：oracle, hibernate

**问题：**如何一次处理（读入）1000 条记录的批次，并确保只有当前批次的 1000 条记录在内存中？假设我的主键被称为 ' `ID`' 并且我的表被称为`Customer`。

**背景：**这不是用于用户分页，而是用于编译有关我的表的统计信息。我的可用内存有限，因此我想一次读取 1000 条记录的记录。我只是在阅读记录，它们不会被修改。我读过这`StatelessSession`对这种事情有好处，而且我听说过人们使用`ScrollableResults`.

**我尝试过的：**目前我正在开发一个定制的解决方案，在该解决方案中我实现了 Iterable 并且基本上使用`setFirstResult`and进行了分页`setMaxResults`。这对我来说似乎很慢，但它允许我一次获得 1000 条记录。我想知道如何更有效地做到这一点，也许使用类似`ScrollableResults`. 我还不确定为什么我目前的方法这么慢；我按 ID 排序，但 ID 是主键，所以表应该已经被索引了。

正如您可能会说的，我一直在阅读有关如何执行此操作的点点滴滴。如果有人可以为我提供一个完整的方法来做到这一点，将不胜感激。我确实知道您必须设置并且调用会将实体从内存`FORWARD_ONLY`中取出（除非您正在执行二级缓存，我还不知道如何检查我是否存在）。但是，我在 JavaDoc 中看不到任何方法可以一次读取 1000 条记录。我希望在可用内存不足和网络性能缓慢之间取得平衡，因此一次通过网络发送一条记录真的不是这里的选择。我尽可能使用 Criteria API。感谢任何详细的答复。`ScrollableResults``evict(entity)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:25:53.410

May useing of **ROWNUM** feature of oracle will hepl you.
Lets say we need to fetch 1000 rows(*pagesize*) of table CUSTOMERS and we need to fetch second page(*pageNumber*)

Creating and Calling some query like this may be the answer

```
select * from 
  (select rownum row_number,customers.* from Customer 
   where rownum <= pagesize*pageNumber order by ID)
where row_number >= (pagesize -1)*pageNumber 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:24:35.067

1.  以只读方式加载实体。

    对于 HQL

    ```
    Query.setReadOnly( true ); 
    ```

    对于标准

    ```
    Criteria.setReadOnly( true ); 
    ```

    [http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/readonly.html#readonly-api-querycriteria](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/readonly.html#readonly-api-querycriteria)

    Stateless session 与 State-Session 完全不同。

    > 使用无状态会话执行的操作永远不会级联到关联的实例。无状态会话忽略集合

    [http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/batch.html#batch-statelesssession](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/batch.html#batch-statelesssession)

2.  使用 flash() 和 clear() 清理会话缓存。

    session.flush();

    session.clear();

    [关于 Hibernate session.flush() 的问题](https://stackoverflow.com/questions/3274958/question-about-hibernate-session-flush)

3.  ScrollableResults 应该如您所愿。

    不要忘记您加载的每个项目都会占用内存空间，除非您驱逐或清除并需要检查它是否真的运行良好。

    Mysql J/Connecotr 中的 ScrollableResults 是假的，它会加载整行，但我认为 oracle 连接器工作正常。

    [Using Hibernate's ScrollableResults to slowly read 90 million records](https://stackoverflow.com/questions/2826319/using-hibernates-scrollableresults-to-slowly-read-90-million-records)

    If you find alternatives, you may consider to use this way

    ```
    1\. Select PrimaryKey of every rows that you will process 
    2\. Chopping them into PK chunk
    3\. iterate -
       select rows by PK chunk (using in-query) 
       process them what you want 
    ```

# android - Android Mapv2 问题

> ID：15424632
> 
> 赞同：1
> 
> 时间：2013-03-15T04:15:36.953
> 
> 标签：android, google-maps, maps

全部，尝试在我的 android 应用程序中使用 google v2 map api 并且无法使其工作，它一直显示空白页！我什至尝试从[https://github.com/commonsguy/cw-omnibus/tree/master/MapsV2](https://github.com/commonsguy/cw-omnibus/tree/master/MapsV2)运行示例，并在我的设备上编译并安装了 BasicMap 应用程序，但问题完全相同！由于这发生在我的代码和我所听到的所有代码都是有效来源的代码中，我认为这不是关键问题，因为这两个使用两个不同的密钥。我已尽我所能，这是示例中的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.commonsware.android.mapsv2.basic"
    android:versionCode="1"
    android:versionName="1.0">

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16"/>

    <permission
        android:name="com.commonsware.android.mapsv2.basic.permission.MAPS_RECEIVE"
        android:protectionLevel="signature"/>

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />
    <uses-permission android:name="android.permission.SET_DEBUG_APP" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/Theme.Sherlock.Light.DarkActionBar">

        <uses-library android:name="com.google.android.maps" />

        <activity
            android:name="MainActivity"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>

                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="AIzaSyC4iyT46cB00IdKGcy5EmAxK5uCOQX2Oy8"/>

        <activity android:name="LegalNoticesActivity">
        </activity>
    </application>

</manifest> 
```

知道这可能是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:20:35.737

尝试遵循我为添加 Google Map Api V2 编写的以下指南：

[谷歌地图 API V2](https://blog-emildesign.rhcloud.com/?p=435)

请与我们分享您的 logcat 堆栈跟踪，以便我们更清楚地了解您的问题是什么。

# python - CSV 模块 - 'for row in reader' - 在 Mac 和 Windows 之间

> ID：15424635
> 
> 赞同：3
> 
> 时间：2013-03-15T04:16:22.777
> 
> 标签：python, windows, macos, csv, indexing

我使用 Wing IDE 在我的 Mac 上开发了一些代码。我开发的使用 csv 模块的代码正在运行，并且可以在我的 Mac 上执行我想要的操作。但是，问题是我为其编写它的人需要在 Windows 上使用它。我不关心代码，因为我没有使用任何转义字符。

代码如下所示：

```
csvfile = open('file.csv', 'r')
csvreader = csv.reader(csvfile, delimiter = ',')
for row in csvreader:
   thisVariable = row[0]  # <<<-------- 
```

我在上面输入的“箭头”是在 Windows 机器上返回错误的位置。就像我说的，代码在 Mac 上运行良好，实际上，这与我编写的代码相差甚远。在此语句上方还有其他 CSV 文件读取和写入，它们使用类似的索引。

我真的很感激任何人可能对这个问题有任何想法！谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T04:46:13.337

**在 Python 2 中**

您需要将文件作为二进制文件打开：

```
csvfile = open('file.csv', 'rb')
csvreader = csv.reader(csvfile, delimiter = ',')
for row in csvreader:
    thisVariable = row[0] 
```

[http://docs.python.org/2/library/csv.html#csv.reader](http://docs.python.org/2/library/csv.html#csv.reader)

* * *

**在 Python 3 中**

您需要在 open 语句中设置 newline='' ：

```
csvfile = open('file.csv', 'r', newline='')
csvreader = csv.reader(csvfile, delimiter = ',')
for row in csvreader:
    thisVariable = row[0] 
```

[http://docs.python.org/3.3/library/csv.html#csv.reader](http://docs.python.org/3.3/library/csv.html#csv.reader)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:25:31.883

从[文档](http://docs.python.org/2/library/csv.html#csv.reader) `csv.reader`中应该传递一个以二进制模式打开的文件。
IE：

```
csvfile = open('file.csv', 'rb') 
```

如果没有看到导致问题的输入文件，我不能确定这会解决问题，但它可能会导致其他错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T04:44:49.887

我可以看到两个潜在的问题。首先，您应该以二进制模式打开文件：

```
csvfile = open('file.csv', 'rb') 
```

其次，您可能正在为两个不同的操作系统处理两个不同的行尾。您可以通过在模式之后添加来避免这种情况`U`：

```
csvfile = open('file.csv', 'rbU') 
```

我还建议通过测试行来保护您的用户免受不良数据的影响。这使得最终结果：

```
csvfile = open('file.csv', 'rbU')
csvreader = csv.reader(csvfile, delimiter = ',')
for row in csvreader:
   if not row:
      continue
   thisVariable = row[0] 
```

# jquery - 使用 jquery 更改不透明度的数据过滤器

> ID：15424638
> 
> 赞同：0
> 
> 时间：2013-03-15T04:16:27.660
> 
> 标签：jquery, css, filtering

我正在建立一个带有可过滤项目的网站。我基本上想改变过滤类中元素的不透明度。因此，具有“活动”类的 100% 不透明度元素，以及没有“活动”类的所有其他元素的 50% 不透明度。单击时，每个元素应向上或向下淡出。这是代码。我正在为这个挠头...

```
$(document).ready(function() {
  $('#filters li a').click(function() {
    // fetch the class of the clicked item
    var ourClass = $(this).attr('class');

    // reset the active class on all the buttons
    $('#filters li').removeClass('active');
    // update the active state on our clicked button
    $(this).parent().addClass('active');

    if(ourClass == 'all') {
      // show all our items
      $('#projects').children('li.two').show();
    }
    else {
      // 50% Opacity of all elements that don't share ourClass
      $('#projects').children('li:not(.' + ourClass + ')').fadeTo('slow', 0.5, function();
      // !00% Opacity of all elements that do share ourClass
      $('#projects').children('li.' + ourClass).fadeTo('slow', 1, function();
    }
    return false;
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T00:49:08.627

```
 $('#filters li a').click(function() {
// fetch the class of the clicked item
var ourClass = $(this).attr('class');

// reset the active class on all the buttons
$('#filters li').removeClass('active');
// update the active state on our clicked button
$(this).parent().addClass('active');

if(ourClass == 'all') {
  // show all our items
  $('#projects').children('li.two').animate({opacity:1}, 400);
}
else {
  // hide all elements that don't share ourClass
  $('#projects').children('li:not(.' + ourClass + ')').animate({opacity:0.15}, 400);
  // show all elements that do share ourClass
  $('#projects').children('li.' + ourClass).animate({opacity:1}, 400);
}
return false;
});` 
```

# eclipse - Linux中的OpenCV Eclipse配置

> ID：15424641
> 
> 赞同：1
> 
> 时间：2013-03-15T04:17:03.647
> 
> 标签：eclipse, ubuntu, opencv

我想在 ubuntu 中为 opencv 配置 eclipse-cdt。我遵循了[Using OpenCV with Eclipse (plugin CDT)](http://docs.opencv.org/doc/tutorials/introduction/linux_eclipse/linux_eclipse.html)教程。但是，我最终收到了错误消息

> 致命错误：cv.h: No such file or directory DisplayImage.cpp /opencvtest line 1 C/C++ 问题

我按照教程中的说明检查了我的配置。一切都很好，除了 8.b 中的信息。

正如教程所说`pkg-config --libs opencv`，输出应该是，

> -L/usr/local/lib -lopencv_core -lopencv_imgproc -lopencv_highgui -lopencv_ml -lopencv_video -lopencv_features2d -lopencv_calib3d -lopencv_objdetect -lopencv_contrib -lopencv_legacy -lopencv_flann

但就我而言，输出是，

> /usr/local/lib/libopencv_calib3d.so /usr/local/lib/libopencv_contrib.so /usr/local/lib/libopencv_core.so /usr/local/lib/libopencv_features2d.so /usr/local/lib/libopencv_flann.so /usr/local/lib/libopencv_gpu.so /usr/local/lib/libopencv_highgui.so /usr/local/lib/libopencv_imgproc.so /usr/local/lib/libopencv_legacy.so /usr/local/lib/libopencv_ml.so /usr/local/lib/libopencv_nonfree.so /usr/local/lib/libopencv_objdetect.so /usr/local/lib/libopencv_photo.so /usr/local/lib/libopencv_softcascade.so /usr/local/lib/libopencv_stitching.so /usr/local/lib/libopencv_ts.so /usr/local/lib/libopencv_video.so /usr/local/lib/libopencv_videostab.so

谁能帮我解决这个问题。

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T06:42:36.010

尝试从以下位置更改标题：

```
#include <cv.h>
#include <highgui.h> 
```

至：

```
#include <opencv2/opencv.hpp>
#include <opencv2/highgui/highgui.hpp> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T02:26:17.143

谢谢你的所有答案。但是这个问题的收获有点奇怪。就这个。

我正在使用 ubuntu 12.1。我在文档中使用“git”安装了opencv。安装完成没有错误，但我收到了上述错误。

由于任何答案（@Alexander 和@Ann）都没有产生任何效果，我使用从“sourceforge”下载的文件重新安装了 opencv。然后它完美地工作了。我认为问题出在我通过 git 下载的文件上。

有人有这个问题的理由吗？

# php - jquery ajax POST 但 PHP 看到 GET？

> ID：15424644
> 
> 赞同：0
> 
> 时间：2013-03-15T04:17:15.750
> 
> 标签：php, jquery, ajax

我正在使用 jQuery/Ajax 发送一些数据。我的代码被标记为 POST，但 PHP 实际上将其视为 GET。是什么赋予了？

```
$.ajax({
         url: url,
         type: "POST",
         contentType: "application/json; charset=utf-8",
         dataType: "json",
         success: function (results) {
               callback(results);
         },
         error: function (req, msg, obj) {
               console.log('An error occured while executing a request for: ' + url);
               console.log('Error: ' + msg);
         }
}); 
```

我可以通过执行 print_r($_GET) 和 print_r($_POST) 来确认它作为 GET 进入 PHP 端

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T04:22:13.513

您没有在帖子中发送任何数据。尝试添加一些数据并检查服务器端。

JS

```
<script>
  $.ajax({
    url: url,
    type: "POST",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    data    : {
      'sample' : 'sample_data' 
    },
    success: function (results) {
      callback(results);
    },
    error: function (req, msg, obj) {
      console.log('An error occured while executing a request for: ' + url);
      console.log('Error: ' + msg);
    }
  });
</script> 
```

PHP

```
<?php

$sample = '';

if (isset($_POST['sample'])) {
  $sample = $_POST['sample'];
}

echo $sample;

?> 
```

// 输出

```
sample_data 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:20:03.927

我认为通过 url 你传递值而不是 get 如果你想发布尝试像

```
$.ajax({
     url: url,
     type: "POST",
     data:{'my_var':'gautam'},
     ------------- 
```

在 php 中你可以使用 like

```
<?php
    print_r($_POST);    //or you can print_r($_POST['my_var']);
?> 
```

给你'gautam'......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T04:20:27.237

用于`$_SERVER['REQUEST_METHOD']`检查其`GET`或`POST`

```
echo $_SERVER['REQUEST_METHOD']; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-15T04:55:03.040

使用 $_REQUEST[] 获取 POST 和 GET 方法值

```
<?php
  print_r($_REQUEST);
  extract($_REQUEST);
  echo "sample : ".$sample;

?> 
```

输出：样本：样本数据

# mongodb - Mongo DB 集合字段索引中的值 1 表示什么？

> ID：15424650
> 
> 赞同：0
> 
> 时间：2013-03-15T04:17:50.353
> 
> 标签：mongodb

我正在为我们的 Application 使用 Mongo DB。

为了首先优化应用程序，我们首先开始对 Mongo DB COllections 进行索引。

我在下面的网络中看到了一个示例，说明如何对集合进行索引

```
db.products.ensureIndex( { "category": 1, "item": 1 } ) 
```

请让我知道值 1 在这里表示什么？这是标准吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T04:55:24.987

它表示索引中键的顺序。1 表示升序，-1 表示降序。[http://docs.mongodb.org/manual/core/indexes/](http://docs.mongodb.org/manual/core/indexes/)中的更多详细信息

# python - 如何限制某些用户对 UpdateView 的访问？

> ID：15424658
> 
> 赞同：5
> 
> 时间：2013-03-15T04:19:15.490
> 
> 标签：python, django, django-class-based-views

我有这样的架构：

模型.py：

```
class Evento(models.Model):
    [...]
    user = ForeignKey(model=User) 
```

表格.py：

```
class EventoForm(forms.ModelForm):
    class Meta:
        model = Evento 
```

和通用视图 UpdateView 的子类。我想将对该视图的访问限制为该 Evento 实例中指定的用户。最好的方法在哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T07:08:48.737

调用 dispatch 后，无论用户是否有权限，你的所有数据都会被保存。您必须在调用调度之前检查权限。看看这个片段[http://djangosnippets.org/snippets/2426/](http://djangosnippets.org/snippets/2426/)。但更好的方法是重新定义 get_object 方法：

```
def get_object(self, *args, **kwargs):
    obj = super(EditarEvento, self).get_object(*args, **kwargs)
    if obj.user != self.request.user:
        raise PermissionDenied() #or Http404
    return obj 
```

# jquery - 为什么 ajax 设置在这种情况下不起作用？

> ID：15424659
> 
> 赞同：0
> 
> 时间：2013-03-15T04:19:18.393
> 
> 标签：jquery

从请求到服务器，我返回 401 错误。

我想处理这个并适当地重定向用户。

起初我尝试使用 ajaxSetup 来捕获错误并处理它，但这并没有受到影响。

然后我将其更改为使用 ajaxError 方法，这有效。

为什么我使用 ajaxSetup 时没有命中错误方法？

这有效：

```
$("body").ajaxError(
                function (e, request) {
                    if (request.status == 401) {
                        alert("Your session has expired. Please login again to continue.");
                        window.location = "/admin/account/logon";
                    }
                }
            ); 
```

但这不起作用：

```
$.ajaxSetup({
        cache: false,
        error: function (jqXHR, textStatus, errorThrow) {
            if (jqXHR.status == 401) {
                alert("Your session has expired. Please login again to continue.");
                window.location = "/admin/account/logon";
            }
        }
    }); 
```

它是使用 Jquery Unobtrusive Ajax 触发的，链接如下所示：

```
<a title="Delete this comment" class="close " data-ajax="true" data-ajax-confirm="Are you sure you want to delete this comment?" data-ajax-method="POST" data-ajax-mode="replace" data-ajax-update="#Comments" href="/myurl">×</a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T04:35:29.927

[从文档中](http://api.jquery.com/jQuery.ajaxSetup/)：

```
Note: 
Global callback functions should be set with their respective global Ajax event handler methods—
.ajaxStart(),
 .ajaxStop(),
 .ajaxComplete(),
 .ajaxError(),
 .ajaxSuccess(),
 .ajaxSend()

—rather than within the options object for $.ajaxSetup(). 
```

# c - 将 char* 转换为 unsigned short* 并取消引用时字节序列发生变化？

> ID：15424670
> 
> 赞同：0
> 
> 时间：2013-03-15T04:20:51.550
> 
> 标签：c

```
unsigned short* pname = (unsigned short*)(buf + buf_offset);/*sequence problem?*/
unsigned short pointer_offset = ntohs(*pname) & COMPRESSION_MASK; 
```

这里，buf_offset == 0。buf的内容是[c0] [0c]。但是，*pname是[0x0cc0]。问题是什么？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:26:04.497

这取决于您的平台，大端/小端，您应该更改字节顺序。

```
#ifdef _BIG_ENDIAN_ 
    // revers bytes order
#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:26:21.000

ntohs() 将字节顺序交换为大端

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T04:40:49.190

正如其他人指出的那样，您发布的代码不可移植。这不仅仅是因为字节序的原因。由于无效对齐，从`char *`to 转换`unsigned short *`也可能导致[总线错误。](http://en.wikipedia.org/wiki/Segmentation_fault#Bus_error_example)此外，an 中可能有填充位`unsigned short`会导致您的程序行为不端，或者 an`unsigned short`可能小于或大于“2 个字节”，具体取决于`CHAR_BIT`实现的选择。总体问题是类型的内部表示，您可以通过使用行为相同的运算符来避免这个问题，而不管内部表示如何。也许你的意思是：

```
unsigned short offset = (unsigned char) buf[0];
offset *= (UCHAR_MAX + 1);
offset += (unsigned char) buf[1];
offset &= COMPRESSION_MASK; 
```

如果你想要大端，你必须明确声明你想要它。通过相乘`buf[0]`和相加`buf[1]`，我指定它`buf[0]`比 更重要`buf[1]`，因此我明确指定我想要大端序。乘法和加法在每个 C 实现中的工作方式都是一样的，并且不存在对齐问题。

反转转换：

```
unsigned char buf[2] = { offset / (UCHAR_MAX + 1), offset % (UCHAR_MAX + 1) }; 
```

很高兴看到在不关心内部表示的情况下编写更多代码！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T06:04:51.790

正如加布里埃尔所说，

ntohs() 将 u_short 从 TCP/IP 网络字节顺序转换为主机字节顺序（在 Intel 处理器上是 little-endian）。

ntohs 函数以主机字节顺序返回值。如果传递的参数已经是主机字节顺序，那么这个函数会反转它。由应用程序决定是否必须颠倒字节顺序。

# javascript - 从元素中获取 CSS 值

> ID：15424671
> 
> 赞同：1
> 
> 时间：2013-03-15T04:20:58.437
> 
> 标签：javascript, css, html, local-storage, web-storage

我需要使用 web storage api 将元素的样式更改存储在一页上。我实际上不知道如何做到这一点，但我想我会先获取 *已更改*的 CSS 属性并将其存储在数组中。我试图跟随[这里](http://paperkilledrock.com/2010/05/html5-localstorage-part-two/)发生的事情并根据我的问题对其进行调整。

这是我为获取值而尝试的方法，但我不确定它是否正确：

```
function newItem(){
    var bgImg = document.getElementsByTagName('body').bgImg[0].style.getPropertyValue('background');
    var wideScreen = getElementById('sidebar').style.getPropertyValue('display');
    var playerColor = getElementById('video_container').style.getPropertyValue('background-color');     
    } 
```

我不确定我上面编写的代码是否获取了我需要的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T04:29:51.537

您可以使用`getComputedStyle().`

`getComputedStyle()`给出一个元素的所有 CSS 属性的最终使用值。

```
var element = document.getElementById('sidebar'),
    style = window.getComputedStyle(element),
    display = style.getPropertyValue('display');

var element = document.getElementById('video_container'),
    style = window.getComputedStyle(element),
    bg = style.getPropertyValue('background-color'); 
```

# php - Jquery Timeago 在标题中添加 AM/PM

> ID：15424684
> 
> 赞同：0
> 
> 时间：2013-03-15T04:22:19.220
> 
> 标签：php, javascript, jquery, timeago

我使用[Timeago](http://timeago.yarp.com/)插件将日期和时间替换为*2 分钟前*。在我用我的 php 代码实现之后：

```
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-timeago/0.9.3/jquery.timeago.js" type="text/javascript"></script>
<script>
  jQuery(document).ready(function() {
    jQuery("abbr.timeago").timeago();
  });
</script>

<abbr class="timeago ticket_date" title="<?= date("Y-m-d  h:i:s A", strtotime($ticket_row_message['date_added'])); ?>"><?= date("Y-m-d  h:i:s", strtotime($ticket_row_message['date_added'])); ?></abbr> 
```

我发现的问题是当我将鼠标悬停`abbr`在标题上时，只显示`2013-03-14 11:06:44`没有 AM PM。那么如何添加 AM PM，有什么技巧吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:29:16.580

这确实是一个 PHP 问题。您的第一个正在使用：

```
<?= date("Y-m-d  h:i:s A", strtotime($ticket_row_message['date_added'])); ?> 
```

您的第二个正在使用：

```
<?= date("Y-m-d  h:i:s", strtotime($ticket_row_message['date_added'])); ?> 
```

只需将“A”添加到第二个。

# sql-server - 单一条件大幅减慢 SQL 查询速度

> ID：15424685
> 
> 赞同：1
> 
> 时间：2013-03-15T04:22:23.980
> 
> 标签：sql-server, sql-server-2008, join, indexing, execution

我有一个看起来像这样的 SQL 查询：

```
WITH RES_CTE AS
  (SELECT
  COLUMN1,
  COLUMN2,
  [MORE COLUMNS...]
  ROW_NUMBER() OVER (ORDER BY R.RANKING DESC) AS RowNum 
  FROM TABLE1 As R, TABLE2 As A, TABLE3 As U, TABLE4 As S, TABLE5 As T 
  WHERE R.RID = A.LID 
  AND S.QRYID = R.QRYID
  AND A.AID = U.AID
  AND CONDITION1 = 'VALUE'
  AND CONDITION2 = 'VALUE'
  AND [MORE CONDITIONS...]
),
Results_Cnt AS 
  (SELECT COUNT(*) CNT FROM Results_CTE)
SELECT * FROM Results_CTE, Results_Cnt WHERE RowNum >= 1 AND RowNum <= 25 
```

现在，此查询通常在 1 秒内运行，并返回 5000 条记录中的 25 条记录`CONDITION1`。

不过最近，我向 a 添加了一个新列`TABLE1`，然后`CONDITION2`在上面的查询中将其值用作 a。该列将继续填充，但过去的所有值都是`NULL`.

我在加入表上方阅读了一些内容，这些`NULL`内容是执行缓慢的原因。该表有大约 1,300,000 条记录。其中 90% 都`NULL`在有问题的列中。但是该列没有被加入。（正在加入的那个*有*一个`INDEX`）

但是，无论如何，我想通过创建一个新列并简单地复制数据来尝试，如下所示：

```
ALTER TABLE TABLE1 ADD COL_NEW
UPDATE TABLE1 SET COL_NEW = COL_OLD 
```

我的下一步是用实际值替换 NULL，但首先，只是为了好玩，我将查询更改为使用新字段 COL_NEW 作为条件，问题就消失了。

虽然我很高兴问题消失了，但我无法向自己解释。如果它与 NULL 无关，为什么首先执行缓慢？

**更新**：看来问题可能是由缓存的查询计划引起的。所以问题本质上变成了，如何强制刷新查询计划？

**更新**：虽然doing`ALTER TABLE`可能已经刷新了执行计划，但问题又回来了。我怎样才能知道发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T05:40:11.560

听起来您的查询计划已被缓存，而新列的统计信息显示它完全充满了空值，从而强制进行表扫描。在 ALTER TABLE 之后，查询计划被刷新，再次用索引 lookujp 替换表扫描，性能恢复正常。

确定是否发生了这种情况的唯一方法是检查两个查询的查询计划，但现在这些计划早已不复存在。

# java - 方法的返回值

> ID：15424687
> 
> 赞同：0
> 
> 时间：2013-03-15T04:23:00.737
> 
> 标签：java, class, constants, accessor, mutators

我正在为我的作业编写一个程序，但是对于我的 defaultFan 和 toString 方法，我收到一条错误消息，指出“方法声明无效；需要返回类型。但是我不确定如何解决这个问题。我尝试将 void 放在两者前面方法并且它有效，但随后我收到错误消息，指出我无法将变量分配给最终变量慢速、中等和快速。我不确定这是否正确。我将如何解决这个问题？

我也很难使用测试程序。我的教授希望我们使用一个创建 2 个粉丝对象的测试程序；第一个指定最大速度，半径 10，颜色黄色和状态。第二个分配中等速度，半径5颜色蓝色和关闭状态，并通过调用它们的toString方法来显示风扇对象。有人可以解释测试程序是如何工作的，以及我将如何为这个程序创建一个。这是我的代码：

```
public class fan {

  private final int slow = 1;
  private final int medium = 2;
  private final int fast = 3;
  private int speed;
  private boolean fanOn;
  private double radius;
  private String color;

  public void defaultFan( )
  {
  int speed = 1;
  boolean fanOn = false;
  double radius = 5;
  String color = "blue";
  }

  public fan(final int slow, final int medium, final int fast, int
speed, boolean fanOn, double radius, String color) {

  this.slow = slow;
  this.medium = medium;
  this.fast = fast;
  this.speed = speed;
  this.fanOn = fanOn;
  this.radius = radius;
  this.color = color;
  }

  public final int getSlow(){
    return slow;
  }

  public final int getMedium() {
    return medium;
  }

  public final int getFast() {
    return fast;
  }

  public int getSpeed() {
    return speed;
  }

  public boolean getfanOn() {
    return fanOn;
  }

  public double getradius() {
    return radius;
  }

  public String getcolor() {
    return color;
  }

  public void setSlow(final int slow) {
    this.slow = slow;
  }

  public void setMedium(final int medium) {
    this.medium = medium;
  }

  public void setFast(final int fast) {
    this.fast = fast;
  }

  public void setSpeed(int speed) {
    this.speed = speed;
  }

  public void setFanOn(boolean fanOn) {
    this.fanOn = fanOn;
  }

  public void setRadius(double radius) {
    this.radius = radius;
  }

  public void setColor(String color) {
    this.color = color;
  }

  public void toString() {
    if(fanOn = true ) {
  System.out.println("The speed of the fan is " + speed + ", the color
of the the fan is " + color + ", and the radius of the fan is " +
radius + ".");
}
  else {
    System.out.println("The fan is off but the color is " + color +"
and the radius is " + radius + ".");
  } 
```

} }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T05:09:05.003

1.  变量`slow`、`medium`和`fast`是最终的；您在他们的声明中设置了它们中的每一个，并且您不需要也不能重新初始化它们。您需要从构造函数中删除它们：

    ```
    public fan(int speed, boolean fanOn, double radius, String color) {
        this.speed = speed;
        this.fanOn = fanOn;
        this.radius = radius;
        this.color = color;
    } 
    ```

2.  现在，摆脱`setSlow`and`getSlow`方法*等*。保留其他人。

3.  您可能希望使用如下代码调用构造函数：

    ```
    fan myFan = new fan(/* medium */ 2, true, 10.0, "blue");
    // But see 4 and 5 below. 
    ```

4.  变量`slow`,`medium`和`fast`不绑定到 的任何特定实例`fan`。所以，你想像这样声明这些：

    ```
    public static final int SLOW = 1;
    public static final int MEDIUM = 2;
    public static final int FAST = 3;
    // The constructor call becomes:
    fan myFan = new fan(fan.MEDIUM, true, 10.0, "blue"); 
    ```

5.  通常，Java 中的类具有大写的名称。打电话给班级`Fan`。`fan`用替换所有实例`Fan`。

6.  该`toString`方法不应该那么健谈。通常，人们编写这些方法是为了帮助他们调试代码，而不是为用户提供友好的访问。只需报告不包括 、 或 的实例变量`SLOW`的`MEDIUM`值`FAST`。不要使用条件逻辑。

7.  您的 toString 方法实际上覆盖了`Object`. Java 会唠叨你，直到你添加`@Override`注解。为了好玩，编写`toString`代码，使用它，然后将代码注释掉。看看输出会发生什么。你会明白为什么你需要重写`Object`.

    ```
    @Override
    public String toString() {
         return "Fan" + "[speed: " + speed +
                        ",on: " + fanOn +
                        ",radius: " + radius +
                        ",color: " + color + "]";
    } 
    ```

8.  对于未来的工作，考虑使用 Java 自己的`Color`类而不是 String。另外，考虑编写一个您自己命名的 Java 枚举，`Speed`而不是使用这三个常量。

9.  问问自己，使用代码的人希望代码做什么，如果一切正常，如果出现问题或类使用不正确。例如，也许这个`Fan`类应该遵守这些规则：

    *   如果我构造 a `Fan`，并询问它的速度，我会得到我输入的速度。
    *   同上，它是否打开、它的半径和它的颜色。
    *   如果我使用`Fan`, 并在其中一个实例变量上调用 set 方法，然后使用 get 方法查询该变量，我将获得我输入的值。
    *   如果我`Fan`用负半径或`null`颜色构造 a ，构造函数会失败，抛出`IllegalArgumentException`. 您的课程可能还没有涵盖这一点。
    *   同样，如果我调用`myFan.setRadius(-10.0)`， set 方法会抛出相同的异常并且`myFan`保持不变。
    *   如果我尝试将 a 的速度设置为, , or`Fan`以外的值，这也应该失败。还记得关于枚举的建议吗？这是一个很好的理由。`SLOW``MEDIUM``FAST`

有许多框架可以帮助进行软件测试；可悲的是，人们在实践中做得不够。但是查找 JUnit；您的 IDE 几乎肯定有办法帮助您创建 JUnit 测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:27:12.100

`public void toString()`

这导致了错误。有意或无意地，您正在尝试`override`该`Object.toString()`方法，这就是它显示该错误的原因。您需要将方法的返回类型更改`toString()`为`String`或将方法名称更改为其他名称，以避免与`Object.toString()`.

除了上面提到的主要问题之外，您的代码中还有一些其他错误，这些错误可以通过一个好的 IDE 来解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T04:30:35.447

对于您的最后一个问题：有许多关于 Java 测试的教程。搜索 JUnit。这是[一个示例教程](http://www.vogella.com/articles/JUnit/article.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T04:31:00.913

像这样编写你的 toString 方法

```
public String toString() {
    String description = "";
    if (fanOn = true) {
        description += "The speed of the fan is " + speed
                + ", the color  of the the fan is " + color
                + ", and the radius of the fan is " + radius + ".";
    } else {
        description += "The fan is off but the color is " + color
                + " and the radius is " + radius + ".";
    }
    return description;
} 
```

我不确定你想用慢/中/快做什么（似乎速度冗余）。但是如果你想修改它，不要将它声明为final。

```
private int slow = 1;
private int medium = 2;
private int fast = 3; 
```

您的测试程序需要一个构造函数。（顺便说一句，你应该命名你的班级**Fan**）

```
public fan(int speed, double radius, String color, boolean fanOn ) {
    this.speed = speed;
    this.radius = radius;
    this.color = color;
    this.fanOn = fanOn;     
} 
```

您的测试程序应如下所示。

```
public static void main(String args[]) {
    fan fan1 = new fan(100, 100, "red", true);
    fan fan2 = new fan(200, 200, "green", false);
} 
```

# javascript - 将 Javascript 保持在范围内

> ID：15424695
> 
> 赞同：1
> 
> 时间：2013-03-15T04:24:41.303
> 
> 标签：javascript, jquery, ajax, fancybox

我有一个使用 ajax 加载一组数据的 Web 应用程序，该数据启动一个灯箱，当灯箱关闭时，我需要通过调用初始 ajax 来刷新原始数据。我遇到了一些将 javascript 保持在范围内的问题。

**index.php**中有一些 ajax 来绘制子页面列表：

```
<!-- Container for the content  -->
<div id="pageListContainer" data-category-id="1"></div>

<script>

// Re-usable function to draw the pages
function drawPageList() {
    var container = '#pageListContainer';
    var categoryId = $(container).data('categoryId');
    $.post('webservice.php', {action: 'drawPageList', categoryId: categoryId}, function(data) {
        $(container).removeClass('loading').html(data);
    });
}

// Now draw the pages
drawPageList();

// Function to open the page links as an iFrame in a lightbox
$('#pageList a').click(function(event) {
    event.preventDefault();
    $.fancybox({
        type : 'iframe',
        padding : 0,
        autoSize: false,
        width: 440,
        height: 440,
        href: this.href + "&lightbox=true",
    });
});

</script> 
```

**webservice.php**将返回如下内容：

```
<ul id="pageList">
    <li><a href="page.php?pageId=1">Page One</a></li>
    <li><a href="page.php?pageId=2">Page Two</a></li>
<ul> 
```

上述失败是因为灯箱打开函数的目标是“#pageList a”，并且 DOM 的那部分是通过 ajax 加载的。为了解决这个问题，我可以将 $('#pageList a').click() 函数添加到来自 webservice.php 的 ajax 结果中，但随后我将我的 JS 分割到多个地方并且我遇到了其他范围问题。像这样的 JS 函数的全局范围是否有最佳实践？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T04:32:36.507

使用事件委托。这使您可以将事件处理程序附加到保留在 DOM 中而不是动态加载的父元素。例如：

```
$('#pageListContainer').on( 'click', '#pageList a', function( event ) {
    // ...
}); 
```

这不是尝试将事件处理程序附加到`'#pagelist a'`元素，而是将其附加到`'#pageListContainer'`父元素。

# prolog - 将爱因斯坦谜题表示为一阶逻辑中的一组封闭公式

> ID：15424698
> 
> 赞同：2
> 
> 时间：2013-03-15T04:25:01.180
> 
> 标签：prolog, first-order-logic, zebra-puzzle

我得到了这种形式的经典爱因斯坦/斑马谜题：

让我们假设在同一条路上有五个不同颜色的房子相邻。每个房子里住着一个不同国籍的人。每个男人都有他最喜欢的饮料，他最喜欢的香烟品牌，并养着一种特定的宠物。

```
The Englishman lives in the red house. 
The Swede keeps dogs. 
The Dane drinks tea. 
The green house is just to the left of the white one. 
The owner of the green house drinks coffee. 
The Pall Mall smoker keeps birds. 
The owner of the yellow house smokes Dunhills. 
The man in the center house drinks milk. 
The Norwegian lives in the first house. 
The Blend smoker has a neighbor who keeps cats. 
The man who smokes Blue Masters drinks bier. 
The man who keeps horses lives next to the Dunhill smoker. 
The German smokes Prince. 
The Norwegian lives next to the blue house. 
The Blend smoker has a neighbor who drinks water. 
The question to be answered is: Who keeps fish? 
```

任务是将这些陈述表达为一阶逻辑中的一组封闭公式，每个陈述一个，假设拼图中的五个人由英国人、瑞典人、丹麦人、挪威人、德国人和保持(X,Y) 表示人 X 养宠物 Y。这些稍后将转换为序言。

我的问题是我是否要以正确的方式转换语句。现在，我有类似的东西：

```
color(X, red) → lives(englishman, X)
keep(swede, dog)
drinks(dane, tea)
color(X, red) ∧ color(Y, green) → leftof(X, Y)
color(X, green) ∧ lives(Y, X) → drinks(Y, coffee)
smokes(X, pallmall) → keep(X, birds)
color(X, yellow) ∧ lives(Y, X) → smokes(Y, dunhills) 
```

这是正确的，还是应该更像我尝试的另一种方式：

```
house(X) ∧ color(X, red) → lives(englishman, X)
dog(X) → keep(swede, X)
tea(X) → drinks(dane, X)
house(X) ∧ house(Y) ∧ color(X, green) ∧ color(Y, white) → leftof(X, Y)
house(X) ∧ color(X, green) ∧ lives(Y, X) ∧ coffee(Z) → drinks(Y, Z)
pallmalls(X) ∧ smokes(Y, X) ∧ birds(Z) → keep(Y, Z)
house(X) ∧ color(X, yellow) ∧ lives(Y, X) ∧ dunhills(Z) → smokes(Y, Z) 
```

我也尝试过类似的事情：

```
lives(englishman, redhouse)
keep(swede, dogs)
drinks(dane, tea)
leftof(greenhouse, whitehouse)
lives(X, greenhouse) → drinks(X, coffee)
smokes(X, pallmall) → keep(X, birds)
lives(X, yellowhouse) → smokes(X, dunhills) 
```

我认为第一个是最正确的，但我不确定。我也不确定如何在一阶逻辑中表示中心或邻居之类的东西。这些是否接近正确？

编辑：我想出了一个我认为可能是正确的解决方案。我注意到它说的是 CLOSED 公式，所以我这样做了：

```
lives(englishman, red)
keep(swede, dogs)
drinks(dane, tea)
leftof(green, white)
∃X lives(X, green) ∧ drinks(X, coffee)
∃X smokes(X, pallmalls) ∧ keep(X, birds)
∃X lives(X, yellow) ∧ smokes(X, dunhills)
∃X position(X, 3) ∧ drinks(X, milk)
position(norwegian, 1)
∃X,Y smokes(X, blend) ∧ neighbor(X, Y) ∧ smokes(Y, dunhill)
∃X smokes(X, bluemasters) ∧ drinks(X, bier)
∃X,Y keep(X, horses) ∧ neighbor(X, Y) ∧ smoke(Y, dunhill)
smokes(german, prince)
∃X neighbor(norwegian, X) ∧ lives(X, blue)
∃X,Y smokes(X, blends) ∧ neighbor(X,Y) ∧ drinks(Y, water) 
```

这是正确的方法吗？任何帮助，将不胜感激。

# android - 如何查找用户是否在Android中单击了微调器？

> ID：15424702
> 
> 赞同：5
> 
> 时间：2013-03-15T04:25:21.360
> 
> 标签：android, spinner

在我的应用程序中，我在代码中动态创建微调器。我想强制用户单击微调器并更改其值/内容。否则，用户将无法通过单击“下一步”按钮进入下一个屏幕。

如何在 Android 中做到这一点？有人有什么想法吗？

提前致谢。

罗汉

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-01-08T07:50:57.817

你可以使用这个：

```
 if (spin.getSelectedItemPosition() < 0) {//Do something} 
```

这意味着用户没有选择任何东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T04:42:27.830

让 Spinner 的第一个值类似于“-please select-”。

当用户单击下一个按钮时，执行验证并检查微调器中 selectedItem 的值是否为“-please select-”，如果是，则显示吐司并要求用户从微调器中选择一些东西。

你需要代码，让我知道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T05:00:02.103

使用此代码*检查***微调器项目**是否被*选中*。

两个标志都在类级别（全局）。

```
Boolean temp = false;
Boolean check = false;

spinner1.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
            // TODO Auto-generated method stub
            if(temp){
                check = true;
            }
            temp = true;
        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub
            check = false;
        }
});

button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            if(check){

                //perform when user select spinner item             
            }else{

                //put Dialog for alert please select spinner item 

            }
        }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T04:27:10.470

创建一个布尔全局变量，如..

```
 boolean isSelect = false; 
```

现在，当用户从微调器中选择值时，然后将其设为`isSelect = false`。当用户单击 NEXT 按钮时，检查条件`isSelect`是真还是假。

而已。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T04:26:51.593

在那个微调器中调用你`Intent`的下一个`Activity``Click Listener`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T04:43:49.360

您可以使用以下方法获取所选项目的值。

```
 spinner.setOnItemSelectedListener(new OnItemSelectedListener() {    
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
                if (spinner.getSelectedItem().toString().equals("YourValue")) {
                    Intent yourIntent = new Intent(this,YourClassName.class);
                    startActivity(yourIntent);
                }
            }    
            public void onNothingSelected(AdapterView<?> arg0) {

            }
        }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-15T04:51:43.037

就我而言，我在列表的第一个位置添加了一个额外的项目

1.“选择一些东西” 2.“下一个” 3.“上一个” 5.... 6..

然后在使用

```
String item=spinnerObject.getSelectedItem ();
    now check if("Select Something".equels(item)){
show some dialog to select anything from spinner
    }else{
send it to next screen
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-01-06T19:16:46.907

我制作了一个新的 Spinner 类，封装了上述原则。但即使那样你也必须确保调用正确的方法而不是`setSelection`

[要点](https://gist.github.com/vedant1811/d66fb759464bbe5c30e6)相同

```
import android.content.Context;
import android.util.AttributeSet;
import android.view.View;
import android.widget.AdapterView;

/**
 * Used this to differentiate between user selected and prorammatically selected
 * Call {@link Spinner#programmaticallySetPosition} to use this feature.
 * Created by vedant on 6/1/15.
 */
public class Spinner extends android.widget.Spinner implements AdapterView.OnItemSelectedListener {

    OnItemSelectedListener mListener;

    /**
     * used to ascertain whether the user selected an item on spinner (and not programmatically)
     */
    private boolean mUserActionOnSpinner = true;

    @Override
    public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {

        if (mListener != null) {

            mListener.onItemSelected(parent, view, position, id, mUserActionOnSpinner);
        }
        // reset variable, so that it will always be true unless tampered with
        mUserActionOnSpinner = true;
    }

    @Override
    public void onNothingSelected(AdapterView<?> parent) {
        if (mListener != null)
            mListener.onNothingSelected(parent);
    }

    public interface OnItemSelectedListener {
        /**
         * <p>Callback method to be invoked when an item in this view has been
         * selected. This callback is invoked only when the newly selected
         * position is different from the previously selected position or if
         * there was no selected item.</p>
         *
         * Impelmenters can call getItemAtPosition(position) if they need to access the
         * data associated with the selected item.
         *
         * @param parent The AdapterView where the selection happened
         * @param view The view within the AdapterView that was clicked
         * @param position The position of the view in the adapter
         * @param id The row id of the item that is selected
         */
        void onItemSelected(AdapterView<?> parent, View view, int position, long id, boolean userSelected);

        /**
         * Callback method to be invoked when the selection disappears from this
         * view. The selection can disappear for instance when touch is activated
         * or when the adapter becomes empty.
         *
         * @param parent The AdapterView that now contains no selected item.
         */
        void onNothingSelected(AdapterView<?> parent);
    }

    public void programmaticallySetPosition(int pos, boolean animate) {
        mUserActionOnSpinner = false;
        setSelection(pos, animate);
    }

    public void setOnItemSelectedListener (OnItemSelectedListener listener) {
        mListener = listener;
    }

    public Spinner(Context context) {
        super(context);
        super.setOnItemSelectedListener(this);
    }

    public Spinner(Context context, int mode) {
        super(context, mode);
        super.setOnItemSelectedListener(this);
    }

    public Spinner(Context context, AttributeSet attrs) {
        super(context, attrs);
        super.setOnItemSelectedListener(this);
    }

    public Spinner(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        super.setOnItemSelectedListener(this);
    }

    public Spinner(Context context, AttributeSet attrs, int defStyle, int mode) {
        super(context, attrs, defStyle, mode);
        super.setOnItemSelectedListener(this);
    }
} 
```

# ruby-on-rails - 在 Rails 中为继承模型初始化实例方法值

> ID：15424704
> 
> 赞同：0
> 
> 时间：2013-03-15T04:25:28.347
> 
> 标签：ruby-on-rails

我需要有关单表继承 (STI) 和初始化继承模型的默认值的帮助。

例如，我有 Omnivore、Herbivore 和 Herbivore 模型，它们继承自 Player，而 Player 继承自 User。

通过 STI，所有模型都有 lvl、xp、hp、ap 和 max_xp、max_hp 和 max_ap。

通过数据库，所有值默认为 0 或 1。 (:users, :xp, :integer, default: 0)

但我想做的是为每个类的实例初始化不同的值。例如，每个新的 Carnivore 对象将具有 LVL：1 XP：0/50，HP：5/5，AP：3/3 的设置值，而 Herbivore 将具有 LVL：1 XP：0/50，HP：3/3 ，AP：5/5，草食动物 LVL：1 XP：0/50，AP/HP：4/4。

此外，当 xp 值超过 max_xp 时，lvl 将增加。就像是

```
when xp > max_hp 
 lvl += 1
end 
```

或者

```
xp = 70

lvl = case xp
  when 0..40 then 1
  when 41..60 then 2
  when 61..70 then 3
  when 71..100 then 4
  else "Overpowered"
end

where do I put this? 
```

你会如何处理这两个问题？

我认为这样的事情可能适用于初始化值

```
def initialize
  @xp = 100
end 
```

但这不起作用，而是将@xp 设置为nil。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T05:13:23.013

您可以在模型的 before_save 回调中设置值。

# ember.js - Ember 数据实体 ID 生成

> ID：15424707
> 
> 赞同：0
> 
> 时间：2013-03-15T04:25:53.513
> 
> 标签：ember.js, ember-data

当使用 RESTAdapter 创建和保存新模型时，它的 Id 属性是未定义的，因为我的后端负责 id 生成。因此，当我返回网格时，有两个相同的实体：第一个 - 具有空 ID（我认为来自 RESTAdapter 缓存），第二个 - 具有从后端返回的正确 ID。

有任何想法吗？也许可以禁用 RESTAdapter 缓存？

**更新**

我的实体创建代码。

```
 submit:function () {
        var manager = App.store.createRecord(App.Manager, {
            firstName:this.get('firstName'),
            lastName:this.get('lastName'),
            speciality:this.get('speciality')
        });

        App.store.commit();

        this.get('controller').transitionTo('managers');
        return false;
    } 
```

**新更新**

感谢 Mike Grassotti 的提示。这里有一些关于我的问题的细节。

1.  一个对立有身份，另一个没有身份。
2.  如果我删除 App.store.commit() 代码，则不会向服务器发送 POST，只会显示没有 ID 的实体。
3.  此实体具有 isLoaded=false 和 isError=true。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T07:00:33.377

> 当使用 RESTAdapter 创建和保存新模型时，它的 Id 属性是未定义的，因为我的后端负责 id 生成。

没错，但这并没有什么不寻常的地方——ember 期望 id 生成由后端完成。

> 因此，当我返回网格时，有两个相同的实体：第一个 - 具有空 ID（我认为来自 RESTAdapter 缓存），第二个 - 具有从后端返回的正确 ID。

好的。*相同的 2 个实体*是什么意思- 它们肯定是不同的 js 对象。尝试将它们中的每一个记录到控制台，如下所示：

```
console.log(entityOne.toString());
console.log(entityTwo.toString()); 
```

> 有任何想法吗？

有很多事情可能导致这种情况发生。听起来您以某种方式创建了两条新记录并仅保存其中一条。或者可能是 API 响应与 ember 期望的不匹配，导致创建了额外的记录。

*   尝试启用记录您的记录，然后观察控制台，以便您可以看到保存模型时发生的情况。希望这能让您深入了解何时/如何创建额外记录。

    record.set("stateManager.enableLogging", true)

*   检查浏览器与您的 api 的通信并比较 JSON 以查看它是否与[ember rest 适配器](http://emberjs.com/guides/models/the-rest-adapter/)所期望的匹配。

*   将 JSON 和其余的源代码（模型定义等）发布到 Stack Overflow，也许第二双眼睛会有所帮助。

*   查看这篇文章了解其他一些调试技巧：[http ://www.akshay.cc/blog/2013-02-22-debugging-ember-js-and-ember-data.html](http://www.akshay.cc/blog/2013-02-22-debugging-ember-js-and-ember-data.html)

> 也许可以禁用 RESTAdapter 缓存？

RESTAdapter 不维护模型对象的单独缓存。而且由于您没有尝试做任何特别的事情，因此没有必要采取那样的步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T04:39:39.870

非常感谢 Mike Grassotti，我找到了问题的答案。

好问题是

> 使用 App.store.commit() 后，来自服务器的 JSON 响应是什么样的？

对该评论 +1。

我在 ember-data 文档中找不到任何信息，所以一些链接仍然对我有帮助。我更改了从后端返回的结果，现在一切正常。

```
{
  "manager": {
    "firstName": "test",
    "lastName": "test",
    "speciality": "test",
    "id": "acd325ac-03eb-419e-be8a-d4ac42e8c235"
  }
} 
```

# mysql - 如何处理产品变化的库存？

> ID：15424714
> 
> 赞同：0
> 
> 时间：2013-03-15T04:26:25.900
> 
> 标签：mysql, inventory-management

我已经在 SO 上多次看到这个问题，但我还没有找到适合我的答案。

我正在设计一个电子商务系统，我们有一个简单的库存管理系统。基本上，每个产品可以有很多属性，每个属性变体集可以有不同的数量。产品和属性之间的关系是many2many，并在其他地方进行管理，库存表只负责“数量”管理。

因此，我目前的方法是将属性值 id 的组合作为字符串存储在数据库中（并将 md5 存储在另一列中以便更快地搜索）。这种方法可以让我快速搜索给定属性列表的库存数量，还可以让我通过管理员轻松编辑。

该表有以下列（我缩短了一点，只关注主要结构）

```
 `id` INT UNSIGNED NOT NULL ,
  `product_id` INT UNSIGNED NOT NULL ,
  `container_id` INT UNSIGNED NULL ,
  `lot_id` INT UNSIGNED NULL DEFAULT NULL ,
  `facility_id` INT UNSIGNED NULL DEFAULT NULL ,
  `inventory_item_status_type_id` INT UNSIGNED NOT NULL ,
  `feature_value_ids` TEXT NULL DEFAULT NULL ,
  `key` VARCHAR(255) NULL DEFAULT NULL ,
  `serial` VARCHAR(255) NULL ,
  `quantity_onhand` INT UNSIGNED NOT NULL DEFAULT 0 
```

这种方法的缺点是

1.  如果产品有这些属性：1,2,3,4,5
2.  库存被定义为 1,3,4 和 1,2,3,4 但不是 1,2,3,4,5
3.  当用户选择 1、2、3、4、5 时，1 个可能的期​​望行为是系统应该使用 1、2、3、4 的数量（这是它可以获得的最接近的组合）。在这种情况下，我们可能不得不使用全文匹配来进行最接近的组合

对于这个问题，你觉得如果上面的做法有什么问题，你会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:32:48.713

如果您可以腾出时间更新包含以下内容的表：attribute id tuple => list of product_id 每次在产品表中有更新时，可以使用动态编程快速搜索属性的子集。

我不确定为什么您需要 md5 属性值 ids 字符串才能搜索完全匹配。MySQL 应该能够索引任意列。

# objective-c - 如何在 Mac 应用程序中打开文件

> ID：15424715
> 
> 赞同：0
> 
> 时间：2013-03-15T04:26:34.970
> 
> 标签：objective-c, macos, file-handling

我想通过单击按钮打开捆绑包中的文件，使用默认的 Mac Os 应用程序打开选定的文件。例如，它可以是与应用程序捆绑在一起的 PDF 文件，可以在 Preview 中打开，也可以是 MP3，可以在 iTunes 中打开。

实际上我必须在 Preference Pane 中安装屏幕保护程序，但我认为方法是相同的。

NSWorkspace 方法确实有效（即使对于实际上是包而不是文件的屏幕保护程序）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T04:37:57.323

使用 AppKit 的`NSWorkspace`：

```
[[NSWorkspace sharedWorkspace] openFile:@"/path/to/your/file"]; 
```

# php - 在php中发送邮件失败

> ID：15424717
> 
> 赞同：0
> 
> 时间：2013-03-15T04:26:44.993
> 
> 标签：php

我正在尝试使用 php 中的邮件功能发送电子邮件：

```
$subject = 'testing';
$email = 'test@gmail.com';
$message = 'test message';          
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= "From: The test site" . "\r\n";

if (mail($email, $subject, $message, $headers)) {
  $data['msg']="Message send successfully";
} 
else {
  $data['msg']="Please try again, Message could not be sent!";
} 
```

我遇到以下错误：

```
A PHP Error was encountered

Severity: Warning

Message: mail() [function.mail]: SMTP server response: 501 Syntax error in parameters or arguments

Filename: sendemail.php

Line Number: 40 
```

我可能猜测该错误是由于未设置在 php 中发送电子邮件所需的配置。我应该做什么，或者我必须更改 php.ini 文件，但它无法访问。请问有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T04:52:18.360

```
$subject = 'testing';
$email = 'test@gmail.com';
$message = 'test message';          
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= "From: The test site" . "\r\n";

$to=$toEmail;
$subject=$sub;
$from="info@mypropick.com"; 
$headers = "MIME-Version: 1.0\n";
$headers .= "Content-type: text/html; charset=iso-8859-1\n";
$headers .= "From: <".$from.">\n";
$headers .= "X-Priority: 1\n";
$message='<div style=" width:700px; margin:0 auto; border:1px solid #e2e2e2; padding:20px;">
<h3>MYPROPICK Services:</h3>'.$msg.'</div>';
$message .= "<br/>Regards <br />MYPROPICK.COM";

if (mail($to, $subject, $message, $headers )) {
  $data['msg']="Message send successfully";
} 
else {
  $data['msg']="Please try again, Message could not be sent!";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:28:32.123

第 3 行中缺少引号“'”

```
$message = 'test message' ;   
                        ^ 
```

尝试 ：

```
$headers = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= "From: valid@email.com" . "\r\n"; 
```

`'From'`必须是一个有效的E-mail地址

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T04:28:55.187

您忘记了代码中的结束撇号

```
$message = 'test message; 
```

应该

```
$message = 'test message'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T04:42:58.130

### SMTP 错误 501：参数或参数中的语法错误（例如无效的电子邮件地址）

> 该命令正确且可识别，但参数（参数，例如电子邮件地址）无效。例如，您尝试使用无效的电子邮件地址作为电子邮件地址中`sender\@domain.com`不允许`"\"`的。

[http://info.webtoolhub.com/kb-a15-smtp-status-codes-smtp-error-codes-smtp-reply-codes.aspx](http://info.webtoolhub.com/kb-a15-smtp-status-codes-smtp-error-codes-smtp-reply-codes.aspx)

# vba - 如何将 Word 功能区选项卡从 2007/2010 迁移到 2013

> ID：15424720
> 
> 赞同：1
> 
> 时间：2013-03-15T04:26:55.763
> 
> 标签：vba, ms-word, ribbon

我分发了一个带有大型 VBA 代码库的 Word 模板。该模板包括一个菜单，对于 Word 2007/2010 用户，还有一个功能区选项卡。在 Word 2013 中，通过菜单一切正常，但功能区未显示。我仍然在不使用 Visual Studio 的情况下使用 VBA 进行编码（并且不想购买 VSTO）。所以我想弄清楚如何更新我的功能区代码/xml，或者我需要做什么才能让我的功能区选项卡在 2013 年出现。

当用户基于模板创建新文档时，功能区会从模板复制到新文档中。但是 Word 2013 中的该过程出现了问题。有趣的是，如果我打开以前从我的模板创建的文档（在 Word 2010 中），功能区会显示并正常工作。但是，如果我从模板创建一个新的 Word 2013 文档，功能区就不存在。

我必须在我的代码中做一些事情来告诉 Word 根据我的模板在新文档中显示功能区，但我无法找到该信息。

我一直使用“Office 自定义 UI 编辑器”生成功能区，这不适用于 Word 2013；该工具将xml“插入”到模板中。我的功能区 XML 以此开头：

```
<customUI xmlns="http://schemas.microsoft.com/office/2006/01/customui" onLoad="SERibbon_Load">
    <ribbon startFromScratch="false">
        <tabs> 
```

有人知道如何让我的功能区选项卡与 Word 2013 一起使用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T00:06:22.847

好吧，事实证明我的功能区或代码确实没有问题。安装模板的安装程序代码为使用 Word 2003 或更早版本的用户安装“.dot”模板（不带功能区），并为较新版本的 Word 安装“.dotm”模板（带功能区）。然后它会在用户的开始菜单上设置模板的快捷方式。

安装程序代码无法识别 Word 2013 已安装，并断定用户正在使用 Word 2003，因此创建了模板的无功能区版本的快捷方式。我将快捷方式更改为指向“.dotm”版本，一切都很好。所以事实证明，我的自定义功能区选项卡在 Word 2007/2010/2013 中运行良好。我只需要修复我的安装程序以检测是否安装了 Word 2013（注册表中的版本“15”）。

命名空间在 2010 年显然发生了变化，但向后兼容 2007。2010 向命名空间添加了东西，2013 增加了新东西，但我的理解是它是相同的架构，因此也向后兼容 Word 2007 功能区定义。

G

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:35:19.967

我自己还没有这样做，但是从 msdn 中查看这个线程：http: [//social.msdn.microsoft.com/Forums/en-US/officegeneral/thread/6575cee8-796a-40da-9520-24c5161f7600](http://social.msdn.microsoft.com/Forums/en-US/officegeneral/thread/6575cee8-796a-40da-9520-24c5161f7600)。

看起来命名空间是一样的，但是一些属性值可能已经改变了。您可能需要检查文档以查看您的ribbonXML 是否符合要求： http: [//www.microsoft.com/en-us/download/details.aspx](http://www.microsoft.com/en-us/download/details.aspx?id=727) ?id=727 。

# python - Python不打印换行符

> ID：15424721
> 
> 赞同：0
> 
> 时间：2013-03-15T04:26:56.830
> 
> 标签：python

我的脚本在最新升级后似乎停止工作。为了找到问题，我写了一个小脚本：

```
import subprocess

hdparm = subprocess.Popen(["xargs","echo"],
                stdin=subprocess.PIPE)

hdparm.stdin.write("Hello\n")
hdparm.stdin.write("\n")
hdparm.stdin.close()
hdparm.wait()
quit() 
```

这只是打印“Hello”和一个新行，但我希望有两个换行符。这是什么原因造成的？（我目前使用的是 2.7.3）

编辑：这是有问题的脚本（为清楚起见进行了编辑）：

```
hdparm = subprocess.Popen(["hdparm", "--please-destroy-my-drive", "--trim-sector-ranges-stdin", "/dev/sda"],
               stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
hdparm_counter = 0
for rng in ranges_to_trim:
    hdparm.stdin.write("%d:%d\n" % (rng["begin"],rng["length"]))
    hdparm_counter += 1
    if hdparm_counter > 63:
         hdparm.stdin.write("\n")
         hdparm_counter = 0
if hdparm_counter != 0:
    hdparm.stdin.write("\n")
hdparm.stdin.close()
hdparm.wait() 
```

编辑：我相信问题出在我的脚本本身。我需要将 EOF 发送到 hdparm 以使其执行应有的操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T04:30:43.940

从`xargs`手册页：

> 本手册页记录了 xargs 的 GNU 版本。xargs 从标准输入中读取项目，由空格（可以用双引号或单引号或反斜杠保护）或换行符分隔，并执行命令（默认为 /bin/echo）一次或多次，后面跟着任何初始参数通过从标准输入中读取的项目。 **标准输入上的空行被忽略。**

（强调补充）。

另外，要添加 - 您看到的换行符来自`echo`它本身。 `xargs`无论如何都不会传递它。

# session - Liferay portlet 在用户之间共享会话

> ID：15424723
> 
> 赞同：-1
> 
> 时间：2013-03-15T04:27:02.670
> 
> 标签：session, liferay, session-state, portlet, liferay-6

我为 Liferay 开发了一个 portlet，之后我

*   添加新站点
*   添加页面
*   设置 portlet 到页面

我创建了一个新用户组并将该组添加到站点成员中，添加到该组的所有用户都可以看到我的站点，但是当他们更新页面时，会加载当前用户的最新会话状态。我建议在所有用户之间共享会话。我试着用

```
<private-session-attributes>true</private-session-attributes> 
```

但没有帮助。怎么办，每个用户都有自己的会话实例？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-15T10:38:48.570

我在 portlet 中使用了成员变量，而不是局部变量。答案位于[liferay论坛](http://www.liferay.com/community/forums/-/message_boards/message/12981953)

# html - 如何在IE6中获得阴影效果

> ID：15424730
> 
> 赞同：-1
> 
> 时间：2013-03-15T04:27:23.693
> 
> 标签：html, css

我正在开发一个 HTML 模板。使用 IE6 测试不会像所有其他浏览器一样出现阴影。IE6 不支持 Box-shadow 属性。那么，如何在 IE6 上获得阴影效果。

请帮忙...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T04:29:31.810

例如，您可以使用 IE6 DXImageTransform 模拟 CSS 阴影

```
 filter:
          progid:DXImageTransform.Microsoft.Shadow(color=#dddddd,direction=0,strength=1),
          progid:DXImageTransform.Microsoft.Shadow(color=#dddddd,direction=45,strength=1),
          progid:DXImageTransform.Microsoft.Shadow(color=#dddddd,direction=90,strength=2),
          progid:DXImageTransform.Microsoft.Shadow(color=#dddddd,direction=135,strength=3),
          progid:DXImageTransform.Microsoft.Shadow(color=#cccccc,direction=180,strength=10),
          progid:DXImageTransform.Microsoft.Shadow(color=#dddddd,direction=225,strength=3),
          progid:DXImageTransform.Microsoft.Shadow(color=#dddddd,direction=270,strength=2),
          progid:DXImageTransform.Microsoft.Shadow(color=#dddddd,direction=315,strength=1); 
```

该片段来自[此页面](http://hedgerwow.appspot.com/demo/shadow)，请阅读它以获取有关如何操作的更多信息。

另外[cbp](https://stackoverflow.com/users/21966/cbp)在评论中推荐了[这个指南](http://www.useragentman.com/blog/2011/08/24/how-to-simulate-css3-box-shadow-in-ie7-8-without-javascript/)，看了之后觉得也是不错的资源，建议：

```
#box {
   zoom: 1;
   filter: progid:DXImageTransform.Microsoft.DropShadow(OffX=5, OffY=5, Color=#ff0000);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T04:35:16.827

你可以使用这个：

```
zoom: 1;
filter: progid:DXImageTransform.Microsoft.DropShadow(OffX=5, OffY=5, Color=#ff0000); 
```

参考这个网站：

[http://www.useragentman.com/blog/2011/08/24/how-to-simulate-css3-box-shadow-in-ie7-8-without-javascript/](http://www.useragentman.com/blog/2011/08/24/how-to-simulate-css3-box-shadow-in-ie7-8-without-javascript/)

# html - 如何在一个垂直列中制作带有标题的 HTML 表格？

> ID：15424733
> 
> 赞同：1
> 
> 时间：2013-03-15T04:28:07.323
> 
> 标签：html, html-table

我想制作一个 HTML 文件，其标题位于一个垂直列中，数据位于右侧列中。总共只有 2 列。我查看了 html 文档并查看了有关范围的内容，但我不完全确定如何在这种情况下使用它。例子：

![在此处输入图像描述](../Images/9ee8a735150d14940b9e6be907304919.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T04:35:15.120

HTML 非常简单，只需确保使用该[`[scope]`属性](http://www.w3.org/TR/2011/WD-html5-20110525/tabular-data.html#attr-th-scope)来指定表格的正确方向。

```
<table>
    <tbody>
        <tr>
            <th scope="row">City</th>
            <td>$city</td>
        </tr>
        <tr>
            <th scope="row">Latitude</th>
            <td>$latitude</td>
        </tr>
        <tr>
            <th scope="row">Longitude</th>
            <td>$longitude</td>
        </tr>
        <tr>
            <th scope="row">Country</th>
            <td>$country</td>
        </tr>
    </tbody>
</table> 
```

从`[scope]`属性的文档：

> 行状态意味着标题单元格适用于同一行中的一些后续单元格*。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T04:35:31.943

您可以使用以下元素创建表格：

```
<table> 
<tr>
    <th scope="row">Category 1</th><td>data1</td>        
</tr>   
<tr>
    <th scope="row">Category 2</th><td>data2</td>        
</tr>  
<tr>
   <th scope="row">Category 3</th><td>data3</td>         
</tr> 
```

这是它的一个例子：

[垂直标题](http://jsfiddle.net/PrwH6/)

# php - 是什么将奖励历史延长了 11 小时

> ID：15424735
> 
> 赞同：0
> 
> 时间：2013-03-15T04:28:41.273
> 
> 标签：php, magento, checkout

当我提交一个奖励积分为负数的编辑订单时（因为新处理的订单少于原始订单），在奖励历史记录中，其中一个条目会比最近的条目提前 12 小时

这不会对总奖励积分造成任何不良影响，因为该值被正确计算

我的编辑订单模块真的没有什么可以做到这一点，编辑订单模块只是做与重新订购完全相同的事情，但它也会创建一个新的会话来存储前一个订单的项目，他们的数量，日期订单已下达，它是增量 id，如何计算点数是，当它们正常计算时，会检查此会话，如果存在，它会获取基本总计，但将其放入`$this->getReward()->getRateToPoints()->calculateToPoints()`并从点 delta 中减去

当我们在结账时处理订单时，它只是创建了一个新订单，但交易 ID 与之前的订单相同，因为互联网销售查看此交易 ID，他们会知道要编辑哪个订单，旧订单将被取消在下次运行同步脚本期间

考虑到所有这一切，我从来没有对奖励历史做任何事情，而且我推送的奖励历史条目并不总是你的编辑顺序，我去编辑了订单 100000040 但 100000042 被推送了

注意：我还应该指出，此时订单没有存储相同的交易 ID，因为我正在等待示例 xml 与来自支付网关的请求/响应 xml 进行比较，因此无法处理一次订单以任何方式与另一个订单相关联

* * *

以下代码取自`Enterprise_Reward_Model_Action_OrderExtra::getPoints`，它位于`$pointsDelta = $this->getReward()->getRateToPoints()->calculateToPoints((float)$monetaryAmount);`和之间`return $pointsDelta;`

```
$editOrder = Mage::getModel('core/session')->getData('editorder');

    if(!is_null($editOrder))
    {
        $readConnection = Mage::getSingleton('core/resource')->getConnection('core_read');
        $result = $readConnection->fetchAll("
                SELECT sfo.entity_id FROM sales_flat_order AS sfo
                    WHERE sfo.increment_id = ?
                LIMIT 1
            ",$editOrder['original_order']);
        $order = Mage::getModel('sales/order')->load($result[0]['entity_id']);
        $orderData = $order->getData();
        $previousOrderMonetaryAmount = (($orderData['base_grand_total'] - $orderData['base_shipping_amount']) - $orderData['base_tax_amount']);

        $pointsDelta = $pointsDelta - $this->getReward()->getRateToPoints()->calculateToPoints((float)$previousOrderMonetaryAmount);
    } 
```

* * *

![在此处输入图像描述](../Images/acb26cecb75a930af3cf69fcfd8ac8a2.png)

上面是正在发生的事情的快照，顶部显示了在编辑和处理订单之前的奖励历史记录，底部是之后发生的情况（对于 #100000049 没有发生任何事情，所以我不得不再做一次，你会出现故障）

#100000044 中的项目与订单 #100000048 完全不同，订单 #100000046 丢失，因为当点增量为 0 时（意味着不会添加/减去点）它不显示（这很好）

所有具有负值的订单都被处理了那些具有正值但在编辑过程中删除了一些项目的编辑订单，从而减少了购物车总数（在网关中，这将退还客户，因此不应该允许它们是有道理的获得他们被退还的积分）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:47:30.750

问题与magento本身有关，通过强制一个干净的magento构建总是在顺序中具有负数，使用`$pointsDelta = $pointsDelta - 100000`结果完全相同的问题，不知道Magento是否会认为它是一个错误，因为这是发现的唯一方法这是通过 Magento 的定制，但我会报告它的修女少

# php - 在分解多个数组时需要帮助，然后使用 foreach 返回数据

> ID：15424736
> 
> 赞同：1
> 
> 时间：2013-03-15T04:28:42.043
> 
> 标签：php

这是我的`variables`

```
<?php
    $submenu = array( array("submenu1", "submenu2", "submenu3", "submenu4"),
           array("submenuA", "submenuB", "submenuC", "submenuD"),
           array("submenuI", "submenuII", "submenuIII", "submenuIV")
    );

    $mainmenu="Main1, Main2, Main3";
?> 
```

期望的`output`应该是：

```
Main1
 submenu1
 submenu2
 submenu3
 submenu4

Main2
 submenuA
 submenuB
 submenuC
 submenuD

Main3
 submenuI
 submenuII
 submenuIII
 submenuIV 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T04:34:32.630

尝试这个：

```
<?php
    $submenu = array( array("submenu1", "submenu2", "submenu3", "submenu4"),
        array("submenuA", "submenuB", "submenuC", "submenuD"),
        array("submenuI", "submenuII", "submenuIII", "submenuIV")
    );
    $mainmenu="Main1, Main2, Main3";
    $mainArr=explode(',',$mainmenu);
    $newArr=array_combine($mainArr,$submenu);
    print_r($newArr);   
?> 
```

您可以在[http://writecodeonline.com/php/上对其进行测试](http://writecodeonline.com/php/)

**输出：**

```
Array ( [Main1] => Array ( [0] => submenu1 [1] => submenu2 [2] => submenu3 [3] => submenu4 ) 
[ Main2] => Array ( [0] => submenuA [1] => submenuB [2] => submenuC [3] => submenuD ) 
[ Main3] => Array ( [0] => submenuI [1] => submenuII [2] => submenuIII [3] => submenuIV ) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:49:12.533

尝试这个：

```
<?php
    $submenu = array( array("submenu1", "submenu2", "submenu3", "submenu4"),
           array("submenuA", "submenuB", "submenuC", "submenuD"),
           array("submenuI", "submenuII", "submenuIII", "submenuIV")
         );

    $mainmenu="Main1, Main2, Main3";
    $mainmenu=explode(", ",$mainmenu);
    $tree=array_combine($mainmenu,$submenu);
    echo '<pre>';
    foreach($tree as $menuname=>$childArray)
    {
        echo "$menuname\n";
        foreach($childArray as $submenuname)
        {
            echo " $submenuname\n";
        }
    }
    echo '</pre>';
?> 
```

输出：

```
<pre>Main1
 submenu1
 submenu2
 submenu3
 submenu4
Main2
 submenuA
 submenuB
 submenuC
 submenuD
Main3
 submenuI
 submenuII
 submenuIII
 submenuIV
</pre> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T04:35:17.603

您可以尝试以下方法：

```
// Make your main menu an array
$mainMenuArray = preg_split("/, /", $mainmenu);

// Loop on the main menu
for($i = 0 ; $i < count($mainMenuArray) ; $i++)
{
    // print main menu entry
    echo $mainMenyArray[$i];

    // Print all sub menu linked to the current main menu entry
    foreach($submenu[$i] as $subMenuEntry)
        echo $subMenuEntry;

    echo "\n";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T04:43:04.137

```
$submenu = array( array("submenu1", "submenu2", "submenu3", "submenu4"),
       array("submenuA", "submenuB", "submenuC", "submenuD"),
       array("submenuI", "submenuII", "submenuIII", "submenuIV")
     );

$mainmenu="Main1, Main2, Main3";

$main = explode(',', $mainmenu);

for($i=0; $i<count($main); $i++){
    for($j=0; $j<count($submenu); $j++){
        $array[$main[$i]][$j] = $submenu[$i][$j];
    }
} 
```

`$array`现在包含您需要的内容。

# backbone.js - 主干视图中的范围界定问题

> ID：15424737
> 
> 赞同：0
> 
> 时间：2013-03-15T04:28:46.783
> 
> 标签：backbone.js, easeljs

我正在获取一个在 Backbonejs 视图中使用 Easeljs 创建的简单绘图视图。我在侦听器事件中遇到范围问题，例如：

```
this.stage.addEventListener("stagemousedown", this.handleMouseDown); 
```

我开始这样做是为了解决我的范围问题

```
var self = this;
this.stage.addEventListener("stagemousedown", function(){
    var foo = self.bar;
}); 
```

但是，这似乎很草率，特别是因为我正在移植的示例代码 ( [http://www.createjs.com/#!/EaselJS/demos/drawing](http://www.createjs.com/#!/EaselJS/demos/drawing) ) 具有嵌套级别的 eventListener。

```
SketchView = Backbone.View.extend({

initialize: function(){
   this.canvas;
   this.stage;
   this.drawingCanvas;
   this.oldPt;
   this.oldMidPt;
   this.title;
   this.color;
   this.stroke;
   this.colors;
   this.index;
},

beforeRender : function (){
    this.template = _.template( tpl.get(this.templateFile) );
},

render: function(eventName) {
   $(this.el).html(this.template(this.model));
   return this;
},

//add in UI
afterRender : function (){
    this.createUI();
},

createUI: function() {
    this.canvas = document.getElementById("demoCanvas");
    this.index = 0;
    this.colors = ["#828b20", "#b0ac31", "#cbc53d", "#fad779", "#f9e4ad", "#faf2db", "#563512", "#9b4a0b", "#d36600", "#fe8a00", "#f9a71f"];

    //Create a stage by getting a reference to the canvas
    this.stage = new createjs.Stage(this.canvas);
    this.stage.autoClear = false;
    this.stage.enableDOMEvents(true);

    createjs.Touch.enable(this.stage);
    createjs.Ticker.setFPS(24);

    this.stage.addEventListener("stagemousedown", this.handleMouseDown);
    this.stage.addEventListener("stagemouseup", this.handleMouseUp);

    this.title = new createjs.Text("Click and Drag to draw", "36px Arial", "#777777");
    this.title.x = 300;
    this.title.y = 200;
    this.stage.addChild(this.title);

    this.stage.addChild(this.drawingCanvas);
    this.stage.update();
 },

handleMouseDown: function (event) {
        if (this.stage.contains(this.title)) { this.stage.clear(); this.stage.removeChild(this.title); }
        this.color = this.colors[(this.index++)%this.colors.length];
        this.stroke = Math.random()*30 + 10 | 0;
        this.oldPt = new createjs.Point(this.stage.mouseX, this.stage.mouseY);
        this.oldMidPt = this.oldPt;
        this.stage.addEventListener("stagemousemove" , this.handleMouseMove);
    },

   handleMouseMove: function (event) {
        var midPt = new createjs.Point(this.oldPt.x + this.stage.mouseX>>1, this.oldPt.y+this.stage.mouseY>>1);

        this.drawingCanvas.graphics.clear().setStrokeStyle(this.stroke, 'round', 'round').beginStroke(this.color).moveTo(midPt.x, midPt.y).curveTo(this.oldPt.x, this.oldPt.y, this.oldMidPt.x, this.oldMidPt.y);

        this.oldPt.x = this.stage.mouseX;
        this.oldPt.y = this.stage.mouseY;

        this.oldMidPt.x = midPt.x;
        this.oldMidPt.y = midPt.y;

        this.stage.update();
    },

    handleMouseUp: function (event) {
        this.stage.removeEventListener("stagemousemove" , this.handleMouseMove);
    }

}); 
```

一个不相关的问题，我应该在初始化函数中实例化我的变量吗？我仍然是 Backbone 的新手，并试图找出最佳实践。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T05:33:45.097

Backbone 需要 Underscore 库，我强烈建议您熟悉它：它有很多很棒的东西。特别是它有一个`_.bind`你可以像这样使用的方法：

```
this.stage.addEventListener("stagemousedown", _(function(){
    var foo = this.bar; // "this" will be correct now thanks to bind
}).bind(this); 
```

它还有一个相关的`_.bindAll`方法，可用于（通常在`initialize`函数内部）将对象的方法绑定到它，如下所示：

```
initialize: function() {
    _(this).bindAll('handleMouseDown'); // handleMouseDown's this will be correct
    this.stage.addEventListener("stagemousedown", this.handleMouseDown);
} 
```

但是，如果您只是利用它的事件处理，您可以避免所有这些并让 Backbone 为您完成绑定：

```
Backbone.View.extend({
    events: {mousedown: 'handleMouseDown'}
    handleMouseDown: function() {
        // this will be bound correctly 
```

至于您关于在内部实例化变量的问题`initialize`，答案是......可能，但如果不知道您的具体上下文就很难说。一般来说，`initialize`应该在创建集合/模型/视图时做任何需要发生的事情，所以如果初始化变量属于这个范围，那么可以确定。

# c++ - CUDA - cudaMallocPitch 和 cudaMemcpy2D 使用，错误：InvalidValue，InvalidPitchValue

> ID：15424738
> 
> 赞同：0
> 
> 时间：2013-03-15T04:28:51.717
> 
> 标签：c++, cuda

好的，所以我正在尝试为 cuda 制作一个 2D 数组，但这变得很痛苦。错误在标题中并且发生在 cudaMemcpy2D。我认为这个问题对于训练有素的眼睛来说是显而易见的。提前感谢您的帮助，我已经领先于目前正在学习指针的班级。

```
#include <cuda_runtime.h>
#include <iostream>
#pragma comment (lib, "cudart")

/* Program purpose: pass a 10 x 10 matrix and multiply it by another 10x10 matrix */

float matrix1_host[100][100];
float matrix2_host[100][100];

float* matrix1_device;
float* matrix2_device;  
size_t pitch;
cudaError_t err;

__global__ void addMatrix(float* matrix1_device,float* matrix2_device, size_t pitch){
    // How this works
    // first we start to cycle through the rows by using the thread's ID
    // then we calculate an address from the address of a point in the row, by adding the pitch (size of each row) and  * it by
    // the amount of rows we've already completed, then we can use that address of somewhere at a start of a row to get the colums 
    // in the row with a normal array grab. 

    int r = threadIdx.x;

        float* rowofMat1 = (float*)((char*)matrix1_device + r * pitch);
        float* rowofMat2 = (float*)((char*)matrix2_device + r * pitch);
        for (int c = 0; c < 100; ++c) {
             rowofMat1[c] += rowofMat2[c];
        }

}

void initCuda(){
    err = cudaMallocPitch((void**)matrix1_device, &pitch, 100 * sizeof(float), 100);
    err = cudaMallocPitch((void**)matrix2_device, &pitch, 100 * sizeof(float), 100); 
    //err = cudaMemcpy(matrix1_device, matrix1_host, 100*100*sizeof(float), cudaMemcpyHostToDevice);
    //err = cudaMemcpy(matrix2_device, matrix2_host, 100*100*sizeof(float), cudaMemcpyHostToDevice);
    err = cudaMemcpy2D(matrix1_device, 100*sizeof(float), matrix1_host, pitch, 100*sizeof(float), 100, cudaMemcpyHostToDevice);
    err = cudaMemcpy2D(matrix2_device, 100*sizeof(float), matrix2_host, pitch, 100*sizeof(float), 100, cudaMemcpyHostToDevice);
}

void populateArrays(){
    for(int x = 0; x < 100; x++){
        for(int y = 0; y < 100; y++){
            matrix1_host[x][y] = (float) x + y;
            matrix2_host[y][x] = (float) x + y;
        }
    }
}

void runCuda(){
    dim3 dimBlock ( 100 );
    dim3 dimGrid ( 1 );
    addMatrix<<<dimGrid, dimBlock>>>(matrix1_device, matrix2_device, 100*sizeof(float)); 
    //err = cudaMemcpy(matrix1_host, matrix1_device, 100*100*sizeof(float), cudaMemcpyDeviceToHost);
    err = cudaMemcpy2D(matrix1_host, 100*sizeof(float), matrix1_device, pitch, 100*sizeof(float),100, cudaMemcpyDeviceToHost);
    //cudaMemcpy(matrix1_host, matrix1_device, 100*100*sizeof(float), cudaMemcpyDeviceToHost);
}

void cleanCuda(){
    err = cudaFree(matrix1_device);
    err = cudaFree(matrix2_device);

    err = cudaDeviceReset();
}

int main(){
    populateArrays();
    initCuda();
    runCuda();
    cleanCuda();
    std::cout << cudaGetErrorString(cudaGetLastError());
    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T04:53:42.253

首先，通常你应该为 matrix1 和 matrix2 设置一个单独的音高变量。在这种情况下，它们将是从 API 调用返回的相同值[`cudaMallocPitch`](http://docs.nvidia.com/cuda/cuda-runtime-api/group__CUDART__MEMORY.html#group__CUDART__MEMORY_1g80d689bc903792f906e49be4a0b6d8db)，但在一般情况下，它们可能不是。

在您的`cudaMemcpy2D`行中，[调用的第二个参数](http://docs.nvidia.com/cuda/cuda-runtime-api/group__CUDART__MEMORY.html#group__CUDART__MEMORY_1g17f3a55e8c9aef5f90b67cdf22851375)是目标音高。这只是`cudaMallocPitch`调用此特定目标矩阵（即第一个参数）时返回的音高值。

第四个参数是音源音高。由于这是通过普通主机分配分配的，因此除了以字节为单位的宽度外，它没有间距。

因此，您交换了第二个和第四个参数。

所以而不是这个：

```
err = cudaMemcpy2D(matrix1_device, 100*sizeof(float), matrix1_host, pitch, 100*sizeof(float), 100, cudaMemcpyHostToDevice); 
```

试试这个：

```
err = cudaMemcpy2D(matrix1_device, pitch, matrix1_host, 100*sizeof(float), 100*sizeof(float), 100, cudaMemcpyHostToDevice); 
```

同样对于第二次调用`cudaMemcpy2D`. 第三个调用实际上是可以的，因为它的方向相反，源矩阵和目标矩阵交换了，所以它们与你的音高参数正确对齐。

# ios - 具有两个视图的 iOS 应用程序。它崩溃但没有给我一个错误

> ID：15424740
> 
> 赞同：0
> 
> 时间：2013-03-15T04:29:12.820
> 
> 标签：ios, objective-c, xcode

该程序基本上只是应该在两个视图之间切换。我正在尝试学习如何制作多视图应用程序。

```
{

self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.
self.window.backgroundColor = [UIColor whiteColor];
[self.window makeKeyAndVisible];

FirstViewController *aView = [[FirstViewController alloc]initWithNibName:@"FirstViewController" bundle:nil];
self.firstView = aView;
[window addSubview:firstView.view];

self.window.rootViewController = aView;

return YES;

} 
```

我收到一条错误消息，提示“应用程序在应用程序启动结束时应该有一个根视图控制器”。我添加了行“self.window.rootViewController = aView;” 那个错误就消失了。现在，我的应用程序将从视图 1 切换到视图 2（它总是能够做到这一点）但是当尝试切换回来时它会崩溃。我得到的唯一输出是“（11db）”。它带我进入一个带有一堆内存地址的屏幕，并以绿色突出显示以下内容：

```
0x10dc09b:  movl   8(%edx), %edi 
```

它说“线程1：EXC_BAD_ACCESS（代码= 2，地址）”

我不知道如何解释这个输出。我按照 youtube 上的一系列视频指南来创建这个程序。我做了两次以确保我做的一切都是正确的（我做了）。如果您喜欢我所做的一切，这些指南称为“xcode 教程#3 第 1/3 部分：多视图应用程序”。

我非常困惑。其他人似乎没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:33:40.297

在您的窗口可见之前，您应该设置它的根视图控制器。

尝试这个 ：

```
{

self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.
self.window.backgroundColor = [UIColor whiteColor];

FirstViewController *aView = [[FirstViewController alloc]initWithNibName:@"FirstViewController" bundle:nil];
self.firstView = aView;

self.window.rootViewController = aView;

[self.window makeKeyAndVisible];

return YES; 
```

}

如果您想查看多个视图，请在**RootViewController 的*** *viewDidLoad* * 中写入条件，然后您可以重定向到另一个视图。

仍然有任何疑问，请告诉我。

一切顺利 ！！！

# python - Pyside 只执行一次动作

> ID：15424744
> 
> 赞同：0
> 
> 时间：2013-03-15T04:29:37.813
> 
> 标签：python, qt, pyside

我有两个通过信号槽连接的按钮，像这样

```
self.button_1.clicked.connect(self.someFunc)
self.button_2.clicked.connect(self.someFunc2) 
```

不是每次我点击button_1，button_2他们的功能都会执行。这些按钮位于一个按钮组中，因此一次只能检查一个，我遇到的问题是每次按下按钮时该功能都会运行，但我希望该功能只运行一次。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T05:19:36.480

在函数的顶部，放置一个 if 语句来检查它是否已经运行。

```
firstRun = true
def someFunc:
    if not(self.firstRun):
       return
    # doSomeFunc
    self.firstRun = false 
```

或者在功能的顶部，您可以断开连接。

[http://qt-project.org/doc/qt-4.8/qobject.html#disconnect-4](http://qt-project.org/doc/qt-4.8/qobject.html#disconnect-4)

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T17:18:28.500

我知道这个问题已经很晚了，但是如果其他人有这个问题，另一种建议是在按钮运行后通过 setDisabled(True) 方法禁用按钮。这可以防止它被激活并给用户反馈他们不能再次运行它。

即`self.button_1.setDisabled(True)`在函数体的某个地方。

# python-2.7 - 将变量从 python 脚本传递到 wix 项目

> ID：15424750
> 
> 赞同：0
> 
> 时间：2013-03-15T04:29:54.737
> 
> 标签：python-2.7, wix

我有一个 python 脚本，它有一个设置窗口，用户可以在其中选择安装软件的安装路径，我的应用程序有一个 wix 项目，可以使用 msbuild 构建。我的问题是，如何将所选路径从脚本的设置窗口传递到我的 wix 组件的源路径？所选路径存储在变量“x”中并写入注册表。要么我必须将变量“x”从脚本传递给 wix 或从注册表传递给 wix。请帮帮我。我的 wix 代码如下所示，

```
<Directory Id="TARGETDIR" Name="SourceDir">
        <Directory Id="ProgramFilesFolder">
            <Directory Id="INSTALLDIR" Name="Companyname" >
                <Directory Id="INSTALLFOLDER" Name="myapp">
                    <Component Id='MainExecutable' Guid='*'>
                    <File Id='ExecutableFile' Name='mv.exe' DiskId='1' Source='c:\myfolder\...\qv.exe' KeyPath='yes'/>
                    </Component> 
```

“源”中的路径应该来自 python 脚本（来自变量或注册表）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T05:50:21.423

因为那是一个文件路径，所以您有几个选择。

1.  （我最喜欢的）使用`bind paths`- 如果您在属性中使用相对路径，`File/@Source`或者您可以使用显式命名的绑定路径语法，`!(bindpath.VarName)`那么您可以通过命令行提供一个或多个绑定路径来`light.exe`使用`-bp`开关（多次，如果您希望）。

2.  使用`preprocessor variable`- 您可以`File Source='$(var.VarName)'`通过`$(var.VarName)`将`-d`命令行开关传递给`candle.exe`. 例如，您的 python 脚本可以提示用户输入 qv.exe 文件的源位置，然后将结果传递给构建执行`candle -dVarName="python_variable_value_goes_here"`. 它最终只是一个预处理器变量。

我更喜欢#1，因为它允许我在多个可能在链接时更改的有序路径上搜索可执行文件。使用预处理器变量会在编译期间锁定路径。

# javascript - javascript继承混淆

> ID：15424752
> 
> 赞同：0
> 
> 时间：2013-03-15T04:29:59.417
> 
> 标签：javascript, inheritance

这是一些代码

```
var Animal = function (name,color,sound){
    this.name = name;
    this.color = color;
    this.sound = sound;
}

Animal.prototype.doSomething = function (){
                              alert(this.sound);
}

var cate = new Animal('cate','black','meow');

cat.doSomething(); \\alerts 'meow' 

now i create another constructor function 

var Person = function (name){
    this.name = name;
} 
```

下面我用 Animal.prototype 初始化了一个 Person.prototype

```
Person.prototype = Animal.prototype; 
```

所以现在我们知道对象被分配为引用`Person.prototype = Animal.prototype` 将分配`Animal.prototype`给`Person.prototype`所以如果我们添加到`Person.prototype`像这样的方法

```
Person.prototype.doSomethingElse = function (){
                                   alert("some text to test");
} 
```

Animal.Prototype 是否也得到`doSomethingElse`了`Person.prototype`.

```
cate.doSomethingElse(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:36:37.093

在您当前的代码中，两个原型引用都是完全相同的对象。当你说

```
Person.prototype = Animal.prototype; 
```

然后

```
Person.prototype === Animal.prototype; // true 
```

因此，您添加的任何方法`Person.prototype`也将在`Animal.prototype`其中（实际上，不是“也”；只有一个对象作为两个构造函数的原型）。

为避免这种情况，您可以使用这样的[函数](http://javascript.crockford.com/prototypal.html)：

```
function object(o) {
    function F() {}
    F.prototype = o;
    return new F();
}
Person.prototype = object(Animal.prototype); 
```

在现代浏览器中，您可以[`Object.create`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)改用：

```
Person.prototype = Object.create(Animal.prototype); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T05:20:51.070

只是为了澄清事情，如果你这样做：

```
function Animal(){}
function Person(){}

Person.prototype = Animal.prototype; 
```

然后`Animal`和`Person`共享相同的对象，并且分配后构造的`prototype`所有实例都具有相同的.`Animal``Person``[[Prototype]]`

如果你这样做：

```
Person.prototype = new Animal(); 
```

这将创建`Person.prototype`的实例`Animal`，因此虽然 的实例`Person`将共享 的所有方法`Animal.prototype`，但 的实例`Animal`不会共享 的任何**自己的**属性`Person.prototype`。

例如，如果您将方法添加到`Person.prototype`，它不会被以下实例继承`Animal`：

```
Person.prototype.foo = function(){};
var p = new Person();
var a = new Animal();

typeof p.foo; // function
typeof a.foo; // undefined 
```

# actionscript-3 - 一定秒数后启动影片剪辑

> ID：15424753
> 
> 赞同：0
> 
> 时间：2013-03-15T04:30:09.067
> 
> 标签：actionscript-3, flash, actionscript, movieclip

我试图在 X 秒后开始一个影片剪辑，有什么建议吗？我非常感谢我能得到的任何帮助。我正在使用 Actionscript 3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T05:14:27.820

将 EnterFrame 监听器添加到 MC 的父级，计算所需的秒数，然后开始播放 MC 并删除监听器。或者，使用`flash.utils.setTimeout`函数调用包装器到`yourMC.play()`.

```
var framesLeft:int=100; // choose
addEventListener(Event.ENTER_FRAME,countdown); // here we add the listener
function countdown(e:Event):void { // the listener itself
    framesLeft--; // count down from 100
    if (framesLeft<0) { // wow, there was 0
        e.target.removeEventListener(Event.ENTER_FRAME,countdown); // "drop" listener
        yourMC.play(); // MC's the delayed start
    }
} 
```

# c# - 为什么我需要两次实例化对象数组？

> ID：15424754
> 
> 赞同：6
> 
> 时间：2013-03-15T04:30:15.960
> 
> 标签：c#

我已经创建了一个像这样的对象数组。但是要为对象赋值，我必须在数组的每个位置实例化每个对象吗？为什么我需要这个？

这是我的方法

```
 StageObject[] StageSplitDate = new StageObject[Stages.Rows.Count];
            for (int i = 0; i < Stages.Rows.Count; i++)
            {
                StageSplitDate[i] = new StageObject();
                StageSplitDate[i].StageId = "String Value";
                StageSplitDate[i].FromTime = StartTime;
                StartTime =StartTime.AddMinutes(Convert.ToDouble(10));
                StageSplitDate[i].ToTime = StartTime;
            }
            return StageSplitDate; 
```

和对象等级

```
 public class StageObject
    {
        public string StageId { get; set; }
        public DateTime FromTime { get; set; }
        public DateTime ToTime { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T04:32:46.067

> 我必须在数组的每个位置实例化每个对象？

您没有两次实例化数组元素。在第一行中，您实例化了一个数组`StageSplitDate` ，其中每个元素都设置为 null。**默认情况下，每个数组*（引用类型）*元素都初始化为 null。**要进一步使用它，您还需要实例化数组中的每个对象，否则您将获得空引用异常。

**对于 C#**

[数组（C# 编程指南）- MSDN](http://msdn.microsoft.com/en-us/library/9b9dty7d.aspx)

数值数组元素的默认值设置为零，**参考元素设置为 null**。

*（因为这个问题最初是为java标记的）*

**对于 JAVA**

[4.12.5。变量的初始值](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html)

> *   每个类变量、实例变量或数组组件在创建时都使用默认值进行初始化（第 15.9 节、第 15.10 节）：
> *   对于**所有引用类型（第 4.3 节），默认值为 null**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T04:32:16.157

您的数组是一个`StageObject` *引用*数组。`StageObject`s 本身还不存在。本质上，数组中的每个条目只是“指向”或“引用”一个`StageObject`.

在调用 之前`new StageObject()`，每个数组元素都是`null`，这意味着它没有引用任何内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T04:38:20.827

想想一个数组是一个书架的类比。想要书架，买书架只是第一步；然后，您需要购买每本书并将其放在书架上。这里的想法相同：分配数组会为您提供一个空容器，然后您需要创建每个对象并将其放入容器中。

为什么会这样？因为最初为空的数组通常是您想要的——即使不是，除非您的对象只有一个无参数的构造函数，否则 Java 甚至不知道如何构造每个对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T04:31:32.903

> StageObject[] StageSplitDate = new StageObject[Stages.Rows.Count];

上面的语句只使引用数组`StageObject`初始化为null，但实际上并没有初始化对象`StageObject`

> StageSplitDate[i] = new StageObject();

上面的语句正在创建类型的对象`StageObject`并将引用分配给`StageSplitDate`元素

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-15T04:35:52.003

`new StageObject[Stages.Rows.Count]`创建一个`StageObject`包含`Stages.Rows.Count`空引用的新引用数组。您希望每个元素都指向一个`StageObject`. 为此，您需要创建一些`StageObject`实例。

# ruby-on-rails - 在 Ruby on Rails 项目中链接两个视图

> ID：15424760
> 
> 赞同：0
> 
> 时间：2013-03-15T04:30:32.307
> 
> 标签：ruby-on-rails, ruby-on-rails-3, html, ruby-on-rails-3.2

嗨，我是 ruby​​ on rails 的新手。

我有两张桌子是`Lov_names`和`lov_values`。

我的爱人姓名表如下：-

```
 id serial NOT NULL,
  name character varying(255) NOT NULL,
  description character varying(255),
  deleted integer NOT NULL DEFAULT 0,
  CONSTRAINT lov_names_pkey PRIMARY KEY (id) 
```

我的爱值表如下：-

```
 id serial NOT NULL,
  lov_name_id integer,
  lov_value character varying(255) NOT NULL,
  sequence integer,
  deleted integer NOT NULL DEFAULT 0,
  CONSTRAINT lov_values_pkey PRIMARY KEY (id) 
```

从上面可以看出，lov 值引用了 lov 名称

我使用脚手架为他们创建了视图。

lov name 的视图是：-

```
<% @lov_names.each do |c| %>
  <tr>
    <td><%= link_to c.id, {:action => 'show', :id => c.id} %> &nbsp;</td>
    <td><%= c.name %>&nbsp;</td>
    <td><%= c.description %>&nbsp;</td>
    <td><%= link_to 'Edit', {:action => 'edit', :id => c.id} %> &nbsp;</td>
    <td><%= link_to 'Delete', {:action => 'delete', :id => c.id},
    :data => { :confirm => "Are you sure you want to delete this value?" } %></td>
    </tr>
<% end %>
</table> 
```

lov值的观点如下：-

```
<% @lov_values.each do |c| %>
  <tr>
    <td><%= link_to c.id, {:action => 'show', :id => c.id} %> &nbsp;</td>
    <td><%= c.lov_name_id %>&nbsp;</td>
    <td><%= c.lov_value %>&nbsp;</td>
    <td><%= c.sequence %>&nbsp;</td>
    <td><%= link_to 'Edit', {:action => 'edit', :id => c.id} %> &nbsp;</td>
    <td><%= link_to 'Delete', {:action => 'delete', :id => c.id},
    :data => { :confirm => "Are you sure you want to delete this value?" } %></td>
    </tr>
<% end %>
</table> 
```

现在我面临的问题是我想链接两个视图，即当我点击 id 时，`Lov names`我应该能够生成相应的`lov value for that id`. 此外，我应该能够`Lov values`从我创建的视图中添加、编辑和删除该页面中的内容。

有人可以指导我这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T04:58:32.247

您可以在两个表之间创建关联，这样您就可以轻松访问另一个表的记录并进行所需的任何修改。

例如，如果lov_value belongs_to lov_name 表的意思，你应该在lov_value 表中有lov_name 的foreign_key。

查看有关如何创建关联的文档。

[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

另外，看看这个线程。

[ruby on rails 协会新手](https://stackoverflow.com/questions/9249685/ruby-on-rails-associations-newbie)

一旦你明白了，你就可以通过点击 lov_name_id 轻松访问 lov_value。

将另一个视图设为局部视图，以便您可以重用视图

希望能帮助到你。

# ios - 从一些 URL 向 ScrollView 添加一些图像

> ID：15424763
> 
> 赞同：0
> 
> 时间：2013-03-15T04:30:38.590
> 
> 标签：ios, uiscrollview, imageview

我想在 ScrollView 中从 3 个 URL 添加 3 个图像，我该怎么办？请给我一个好的教程或一些解释！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T04:35:34.607

您可以使用“AsyncImageView”类文件，它将同步加载图像。

请参考

[https://stackoverflow.com/a/15377082/1713478](https://stackoverflow.com/a/15377082/1713478)

在这个答案中，此方法调用 tableview 您可以在 for 循环中使用并将 imageview 放在滚动视图中以垂直放置图像

```
int y = 10; 
for (int i = 0; i < (number of images); i++)
{
   UIImageView *imageView = [[UIImageView alloc]initWithFrame:CGRectMake(X, y, width, height)];

   NSString *imageURL = [NSString stringWithFormat: (image link for i number)];
   AsyncImageView *async = [[AsyncImageView alloc]initWithFrame:CGRectMake(0, 0, width, height)];
   [async loadImageFromURL:[NSURL URLWithString:imageURL]];
  [imageView addSubview:async];
  [scrollView addSubview:imageView];
  y = y+height+10;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T06:54:06.163

您是在问如何加载远程图像或如何在滚动视图上布局它们？

1.
`UIImage * image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"..."]]];`
把它全部包起来`dispatch_async`或者放进去，`NSOperation`确保不阻塞主线程。

2.
你可以尝试使用`UIPageViewController`代替a`UIScrollView`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T04:40:22.840

您可以使用[PSTCollectionView](https://github.com/steipete/PSTCollectionView)进行 gridView 类型的显示，[使用 SDWebImage](https://github.com/rs/SDWebImage)进行延迟加载。

# javascript - 在 div 中找到 img 属性并更改 src 值

> ID：15424765
> 
> 赞同：0
> 
> 时间：2013-03-15T04:30:50.367
> 
> 标签：javascript, jquery, html, image

我有一个像这样的结构：

```
<div id="so1" class="card over"  data-direction="right" gal="gal1" >        
      <div class="front" >
    <img src="img1.jpg" width ="100%;" height ="100%;" alt="">
      </div>         
      <div class="back" style="background-color:#99ca3c;">
      </div>         
</div> 
```

认识到这部分我做

```
change_it = function (id,effect, img ) {
   $('#' + id).toggleClass(effect);
   $('#' + id).attr('img', img);
} 
```

我称之为

```
change_it ("so1", "flipping-right" ,"imgs/img1/2.jpg"); 
```

但是它并没有改变它的值，如果我只有父 div 的 id，我如何访问这个 img 属性？我的意思是，结构是`div->div->img`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T04:34:45.903

您需要找到*图像*并更改其*src*属性：

```
change_it = function (id,effect, img ) {
   $('#' + id).toggleClass(effect);
   $('#' + id).find('img').attr('src', img);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T04:33:08.667

这`so1`是 div id，但您正在使用

```
$('#' + id).find('img').attr('src', img); 
```

对于一个 div。

这里需要先找到该div中存在的图片标签，然后修改该图片的src。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T04:33:38.517

如果要将 img 分配给 div ，则可以设置其背景图像。

```
$('#' + id).css('background-img', 'url(' + imageUrl + ')' 
```

# c# - Windows 窗体中的 datagridview 单元格编辑和保存功能？

> ID：15424768
> 
> 赞同：4
> 
> 时间：2013-03-15T04:31:01.103
> 
> 标签：c#, winforms, datagridview

我正在 c# windows 窗体应用程序中处理 datagridview 并且我正在从数据库中加载数据，现在我希望用户能够编辑单元格值并将值保存到数据库中，如何编辑单元格值以及如何将值保存到数据库中？

```
 SqlConnection con = new SqlConnection("user id=sa;password=123;database=employee");
  SqlDataAdapter da = new SqlDataAdapter("select * from UserReg", con);
  DataSet ds = new DataSet();
  da.Fill(ds, "p");
  dataGridView1.DataSource = ds.Tables["p"]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T08:26:59.813

更新数据库的一种方法`DataGridView`是使用 DataGridView 的事件：

```
DataGridView.CellBeginEdit

DataGridView.CellValidating

DataGridView.CellEndEdit 
```

假设：`private DataGridView dgv;` 添加事件处理程序

```
dgv.CellBeginEdit += dgv_CellBeginEdit;
dgv.CellValidating += dgv_CellValidating;
dgv.CellEndEdit += dgv_CellEndEdit;

private void dgv_CellBeginEdit(Object sender, DataGridViewCellCancelEventArgs e)
{
     //Here we save a current value of cell to some variable, that later we can compare with a new value
    //For example using of dgv.Tag property
    if(e.RowIndex >= 0 && e.ColumnIndex >= 0)
    {
        this.dgv.Tag = this.dgv.CurrentCell.Value;
        //Or cast sender to DataGridView variable-> than this handler can be used in another datagridview
    }
}

private void dgv_CellValidating(Object sender, DataGridViewCellValidatingEventArgs e)
{
    //Here you can add all kind of checks for new value
    //For exapmle simple compare with old value and check for be more than 0
    if(this.dgv.Tag = this.dgv.CurrentCell.Value)
        e.Cancel = true;    //Cancel changes of current cell
    //For example used Integer check
    int32 iTemp;
    if (Int32.TryParse(this.dgv.CurrentCell.Value, iTemp) = True && iTemp > 0)
    {
        //value is ok
    }
    else
    {
        e.Cancel = True;
    }
}

Private Sub dgvtest1_CellEndEdit(Object sender, DataGridViewCellEventArgs e)
{
    //Because CellEndEdit event occurs after CellValidating event(if not cancelled)
    //Here you can update new value to database
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T10:20:21.067

尝试这样做：

```
 private void dataGridView1_CellEndEdit(object sender, DataGridViewCellEventArgs e)
            {
                //after you've filled your ds, on event above try something like this
                try
                {

                    da.Update(ds);
                }
                catch (Exception ex)
                {
                    MessageBox.Show(ex.Message);
                }
            } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T18:09:08.723

我使用了 OleDb，但您可以使用 SQL。这是我通常用于相同的代码。

```
OleDbCommand sCommand;
    OleDbDataAdapter sAdapter;
    OleDbCommandBuilder sBuilder;
    OleDbConnection connection;
    DataSet sDs;
    DataTable sTable;
    string myMode = "";
    private void BtnLoad_Click(object sender, EventArgs e)
    {
        string query = "SELECT * FROM [Table]";
        connection = new OleDbConnection(connectionString);
        connection.Open();
        sCommand = new OleDbCommand(query, connection);
        sAdapter = new OleDbDataAdapter(sCommand);
        sBuilder = new OleDbCommandBuilder(sAdapter);
        sDs = new DataSet();
        sAdapter.Fill(sDs, "Table");
        sTable = sDs.Tables["Table"];
        connection.Close();
        DataGrid.DataSource = sTable;
        DataGrid.ReadOnly = true;
        DataGrid.SelectionMode = DataGridViewSelectionMode.FullRowSelect;
    }
    private void BtnAdd_Click(object sender, EventArgs e)
    {
        DataGrid.ReadOnly = false;
        myMode = "add";
    }
    private void BtnEdit_Click(object sender, EventArgs e)
    {
        DataGrid.ReadOnly = false;
        myMode = "edit";
    }
    private void BtnDelete_Click(object sender, EventArgs e)
    {
        myMode = "";
        if (MessageBox.Show("Do you want to delete this row ?", "Delete",      MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
        {
            DataGrid.Rows.RemoveAt(DataGrid.SelectedRows[0].Index);
            sAdapter.Update(sTable);
        }
    }
    private void BtnSave_Click(object sender, EventArgs e)
    {
        if (myMode == "add")
        {
            sAdapter.Update(sTable);
            MessageBox.Show("Prices Are Successfully Added.", "Saved.", MessageBoxButtons.OKCancel, MessageBoxIcon.Information);
        }
        else if (myMode == "edit")
        {
            string query = "UPDATE Table_Name SET " +
                "Column1 = '" + DataGrid.SelectedRows[0].Cells[0].Value.ToString() + "' ," +
                "Column2 = " + DataGrid.SelecteddRows[0].Cells[1].Value.ToString() + ", " +
                "WHERE CONDITION";
            connection = new OleDbConnection(connectionString);
            connection.Open();
            sCommand = new OleDbCommand(query, connection);
            sAdapter = new OleDbDataAdapter(sCommand);
            sBuilder = new OleDbCommandBuilder(sAdapter);
            sDs = new DataSet();
            sAdapter.Fill(sDs, "Table");
            sTable = sDs.Tables["Table"];
            connection.Close();
            DataGrid.DataSource = sTable;
            DataGrid.ReadOnly = true;
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T04:36:45.513

查看[`DataGridView`事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview_events.aspx)列表。您需要订阅相应的事件，并相应地处理它。即，您对[`DataGridView.CellValueChanged`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellvaluechanged.aspx).

```
dataGridView1.CellValueChanged += ValueChangedHandler;

private void ValueChangedHandler(object sender, DataGridViewCellEventArgs e) {
    // do what is appropriate here.
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-04T02:20:31.670

添加这行代码以启用对 datagridview 的编辑

```
dtg.EditMode = DataGridViewEditMode.EditOnKeystroke; 
```

然后使用下面的事件

```
private void dtg_CellMouseClick(object sender, DataGridViewCellMouseEventArgs e)
{
    if (e.ColumnIndex > -1 && e.RowIndex > -1)
        {
            dtg.ReadOnly = false;
        }
} 
```

以上两个事件将启用 datagridview 中的编辑。

然后使用以下事件将更新的数据保存回数据库。

```
private void dtg_CellEndEdit(object sender, DataGridViewCellEventArgs e)
{
    DataGridView dgv = (DataGridView)sender;
} 
```

# c# - 如何使用 Linq “不在”

> ID：15424770
> 
> 赞同：4
> 
> 时间：2013-03-15T04:31:06.850
> 
> 标签：c#, .net, linq

我正在使用实体框架
所以我想使用两个表 - tblContractor 和 tbSiteByCont 表编写一个 sql 命令。在 SQL 中看起来像这样

```
SELECT     PKConID, Fname, Lname
FROM         tblContractor
WHERE     (PKConID NOT IN
                          (SELECT     FKConID
                            FROM          tbSiteByCont
                            WHERE      (FKSiteID = 13))) 
```

但我不知道如何用 Linq 编写。

我试过这样

```
 var query1 = from s in db.tblSiteByConts   
                        where  s.FKSiteID == id
                        select s.FKConID;

            var query = from c in db.tblContractors   
                        where c.PKConID != query1.Any()
                        select Contractor; 
```

但这不起作用。那我该怎么写呢？程序是什么？我是Linq的新手。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-15T04:34:21.050

```
var _result = from a in tblContractor
              where !(from b in tbSiteByCont
                        where FKSiteID  == 13
                        select b.FKConID)
                        .Contains(a.PKConID)
              select a; 
```

或者

```
var siteLst = tbSiteByCont.Where(y => y.FKSiteID == 13)
                          .Select(x => x.FKConID);
var _result = tblContractor.Where(x => !siteLst.Contains(x.PKConID)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-19T01:04:43.200

我会使用 HashSet，它可以确保您只评估一次序列。

```
var result = from p in tblContractor
                      let hasht = new HashSet<int>((from b in tbSiteByCont
                                                    where b.FKSiteID == 13
                                                    select b.PKConID).Distinct())
                      where !hasht.Contains(p.PKConID)
                      select p; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-07T14:58:24.143

这也可以吗

```
var _result = from a in tblContractor
                       .Where(c => tbSiteByCont
                       .Count(sbc => sbc.FKSiteID == 13 && c.PKConID == sbc.FKConID) == 0) 
```

# java - 获取所有即将到来的 Facebook 好友生日，不仅限于当年

> ID：15424776
> 
> 赞同：5
> 
> 时间：2013-03-15T04:32:01.447
> 
> 标签：java, android, facebook, facebook-graph-api, facebook-fql

我正在编写一个**Android Facebook 应用程序**，我正在尝试获取*所有即将到来的 Facebook 朋友生日的列表*，并且我能够获取它。

但我面临一个问题，我只获取今年**12 月底之前的朋友列表，****并不是** *像今天这样的所有即将到来的都是 3 月 15 日，所以我想获取今天到 3 月 14 日生日的 Facebook 朋友列表，但是我从今天到 12 月 31 日*

请参阅下面的**代码**并帮助我解决这个小问题：

```
 Calendar cal = Calendar.getInstance();
    Date today = cal.getTime();
    SimpleDateFormat formatter = new SimpleDateFormat("MM/dd");
    String today_formatted = formatter.format(today);
    String query = "select name, birthday, uid, pic_square FROM user " +
    "WHERE uid in (SELECT uid2 FROM friend WHERE uid1 = me()) AND birthday_date != 'null' " +
    "AND birthday_date >= '" + today_formatted + "'ORDER BY birthday_date ASC"; 
```

# python - python拆分文本文件的字符串

> ID：15424777
> 
> 赞同：0
> 
> 时间：2013-03-15T04:32:01.727
> 
> 标签：python, split

对不起，如果我的问题太基本了。我的结果从 FORTRAN 保存为文本文件，我必须使用 Python 对其进行后期处理。我尝试使用`split`函数来分隔不同的列，但是，不同列之间的空间并不总是相等的。那么有没有办法解决我的问题？下面是数据：

```
 2/ 1/1961  0.0000  0.0019   ---------   0.749E+04   0.353E-02   0.374E-03
 2/ 2/1961  0.0000  0.0021   ---------   0.748E+04   0.353E-02   0.374E-03
 2/ 3/1961  0.0000  0.0000   ---------   0.743E+04   0.350E-02   0.371E-03
 2/ 4/1961  0.0000  0.0000   ---------   0.732E+04   0.345E-02   0.366E-03
 2/ 5/1961 24.0000 24.0000   0.416E-01   0.719E+04   0.339E-02   0.360E-03
 2/ 6/1961 24.0000  0.0000   0.509E-01   0.706E+04   0.333E-02   0.353E-03 
```

我需要将每一列保存为 Python 中的单独变量。如果我使用两个空格作为分隔符，我会将我`2/ 5/1961 24.0000`作为一个变量。如果我使用单个空格，我会得到`, `2`, `/`,... 那么有没有办法处理我的文本文件？谢谢！`

 ````
x_date=[]
fp = open("results_file.txt")
for i, line in enumerate(fp):
    if (i >= line_start) and (i <= line_end):
        line = line.split(' ')
        x_date_temp = line[0]
        x_date.append(x_date_temp) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T04:56:49.367

如果这是来自 Fortran，它几乎可以肯定是固定宽度的字段，而不是空格分隔，因此以这种方式阅读它是个好主意。甚至有可能如果第二个字段可以是“124.0000”，那么这两个字段之间就不会有空格。

Python 并没有一个很好的内置方式来读取固定宽度的字段（就像它对 csv 所做的那样）。使用正则表达式虽然还不错

```
import re
x_date = []
fp = open("results_file.txt")
for i, line in enumerate(fp):
    if (i >= line_start) and (i <= line_end):
        line = re.match("(.{10})(.{8})(.{8})(.{12})(.{12})(.{12})(.{12})", line).groups()
        x_date_temp = line[0]
        x_date.append(x_date_temp) 
```

您也可以重新使您成为这样的字段的字典

```
line_dict = re.match("(?P<date>.{10})"
                     "(?P<field1>.{8})"
                     "(?P<field2>.{8})"
                     "(?P<field3>.{12})"
                     "(?P<field4>.{12})"
                     "(?P<field5>.{12})"
                     "(?P<field6>.{12})", line).groupdict() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T04:42:30.073

您可以使用替换功能从您的字符串中删除“/”，然后应用不带参数的拆分，这将给出您想要的我猜。试试这个：

```
with open("results_file.txt") as f:
    x_date  = [line.replace('/ ', '/').split() for line in f] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T04:35:45.697

你可以做这样的事情

```
In [2]: l = " 2/ 1/1961  0.0000  0.0019   ---------   0.749E+04   0.353E-02   0.374E-03"

# this will eliminate the blank elements in the list
In [3]: [x for x in l.split() if x]
Out[3]:
['2/',
 '1/1961',
 '0.0000',
 '0.0019',
 '---------',
 '0.749E+04',
 '0.353E-02',
 '0.374E-03'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T04:34:23.280

```
line = line.split() 
```

可能会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T05:19:56.787

简单的

```
L = "2/ 1/1961  0.0000    0.0019    ---------   0.749E+04   0.353E-02   0.3" 
N = [x for x in L.split()]
print (N[3]) 
```

例如，N[3] 的输出为 0.0019 :)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T09:18:46.220

```
import re
f = open('results_file.txt', 'r')

data = [ re.split(r'\s+', line, maxsplit=7) for line in f]
for line in data:
    print line 
```

# 然后你会得到如下输出：

```
>>> 
['2/', '1/1961', '0.0000', '0.0019', '---------', '0.749E+04', '0.353E-02', '0.374E-03\n']
['2/', '2/1961', '0.0000', '0.0021', '---------', '0.748E+04', '0.353E-02', '0.374E-03\n']
['2/', '3/1961', '0.0000', '0.0000', '---------', '0.743E+04', '0.350E-02', '0.371E-03\n']
['2/', '4/1961', '0.0000', '0.0000', '---------', '0.732E+04', '0.345E-02', '0.366E-03\n']
['2/', '5/1961', '24.0000', '24.0000', '0.416E-01', '0.719E+04', '0.339E-02', '0.360E-03\n']
['2/', '6/1961', '24.0000', '0.0000', '0.509E-01', '0.706E+04', '0.333E-02', '0.353E-03'] 
````

# couchdb - 不同的语言 = couchDB 列表中的不同性能吗？

> ID：15424780
> 
> 赞同：1
> 
> 时间：2013-03-15T04:32:18.683
> 
> 标签：couchdb, couchdb-python

我正在 couchDB 中编写一个列表函数。我想知道使用比 javascript 更快的语言是否会提高性能（我在想 python，只是因为我知道）。

有谁知道这是否属实，有没有人测试过这是否属实？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:39:06.400

一般来说，不同的视图引擎会给你相同的速度。

除了 erlang，它要快得多。

原因是 erlang 是用 CouchDB 编写的，对于所有其他语言，数据需要转换为标准 JSON，然后发送到视图服务器，然后再转换回本机 erlang 格式以进行编写。

**但是**，这种性能“提升”仅发生在视图生成上，这通常发生在请求的外线或仅发生在更改的文档上。

就像在现实世界中，视图服务器之间的使用性能差异在大多数情况下是无关紧要的。

以下是所有视图服务器实现的列表：[http ://wiki.apache.org/couchdb/View_server](http://wiki.apache.org/couchdb/View_server "CouchDB 查看服务器")

我从来没有使用过蟒蛇，但如果那是你舒服的地方，那就去吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T03:41:29.630

如果您想要 Couch，您可以使用 V8 引擎。一个来自 IrisCouch 的人写了 couchjs 来做到这一点（我在 Stack Overflow 上也见过他很多次）。

[https://github.com/iriscouch/couchjs](https://github.com/iriscouch/couchjs)

同样对于视图、过滤复制等，您可以用 Erlang 而不是 javascript 编写函数。我已经这样做了，并且看到了大约 50% 的性能提升。

似乎您可以在 Erlang 中编写列表函数：http: [//tisba.de/2010/11/25/native-list-functions-with-couchdb/](http://tisba.de/2010/11/25/native-list-functions-with-couchdb/)

# excel - 如何使用自定义 UI 编辑器删除电子表格的工作簿选项卡和列、行标题？

> ID：15424781
> 
> 赞同：0
> 
> 时间：2013-03-15T04:32:29.960
> 
> 标签：excel, vba

* * *

我是vba的新手。我想在 Excel 中删除功能区、工作簿选项卡和 ColumnRow 标题。我可以使用这行代码删除功能区。

* * *

`<customUI xmlns="http://schemas.microsoft.com/office/2006/01/customui"> <ribbon startFromScratch="true"> </ribbon> </customUI>`

* * *

同样，我想删除 Excel 的电子表格和工作簿选项卡的 RowColumn 标题。希望有人可以帮助我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:43:51.103

这可能无法满足您的要求，但这是一个起点。使用 CustomUI xml 代码中的 onLoad 回调来运行隐藏标题的宏：
XML 文件：

```
<customUI onLoad="uiLoad" xmlns="..."> 
```

VBA宏：

```
Sub uiLoad()
    ActiveWindow.DisplayHeadings = False
End Sub 
```

# java - 如何在等待另一个类中按下按钮时使用等待通知停止暂停方法

> ID：15424784
> 
> 赞同：0
> 
> 时间：2013-03-15T04:32:39.213
> 
> 标签：java, multithreading, user-interface, wait, notify

因此，在 java 中使用 GUI，我试图让用户按下将启动方法的传输按钮。此方法将打开一个单独的 GUI，它会要求用户输入信息，然后在用户按下保存按钮时将其保存。我想要做的是在打开单独的 GUI 后暂停该方法，并在用户点击第二个 GUI 中的保存按钮后继续。除非有更好的方法，否则我认为实现等待通知方法是解决此问题的最佳方法，但到目前为止我还没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T04:35:14.857

首先，不要（使用`wait`/ `notify`）在事件调度线程中出于任何原因。这将导致 UI 停止响应输入事件并重新绘制请求，从而有效地“挂起”您的程序。

在您的情况下，这将是使用模态对话框的简单案例。

查看[如何在 Swing 中创建对话框](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)和[并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

# iphone - 在显示 GLkit 视图之前添加一些视图 - 从 UIview 导航到 GLkit 视图

> ID：15424785
> 
> 赞同：0
> 
> 时间：2013-03-15T04:32:40.820
> 
> 标签：iphone, ios, objective-c, opengl-es, glkit

我在 opengles 中制作一个基本应用程序，我从“ [raywenderlich](http://www.raywenderlich.com/5223/beginning-opengl-es-2-0-with-glkit-part-1) ”Glkit 教程开始。这将在应用程序的起始屏幕中显示一个立方体。他在他的教程中提到了以下几行来做到这一点。

> 要让这个 Storyboard 在启动时运行，打开 HelloGLKit-Info.plist，在空白区域按住 control 单击，然后选择 Add Row。从下拉列表中选择 Main Storyboard 文件基本名称，然后输入 MainStoryboard。

**我的问题：**

1）我需要在启动 GLKIT 视图之前添加一个视图。我怎样才能做到这一点？从那个 UIview 我需要切换到 GLkit 视图？这该怎么做？

2) 我需要访问我在以前的 UIviews 中使用的值，例如 GLkit 视图中的“x=10,y=20”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:45:15.247

这是典型的 iOS 初学者教程材料，[看看这个](http://www.appcoda.com/storyboards-ios-tutorial-pass-data-between-view-controller-with-segue/)，如果它不适合你的需要，他们还有很多其他的教程。这项任务很难解释，但很简单，所以不用担心。

# objective-c - 不使用“self”一词设置按钮名称

> ID：15424788
> 
> 赞同：-2
> 
> 时间：2013-03-15T04:32:58.820
> 
> 标签：objective-c

UIButton * button = [self valueForKey: [NSString stringWithFormat: @"buttonA"];

有没有办法做同样的事情而不必使用“自我”这个词？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:36:12.077

`self`是类的当前实例。

这是最好的方法。

除了 self 之外，您还需要创建该对象的另一个实例并使用该对象。

```
MyClass *classObject=[MyClass new];
UIButton * button = [classObject valueForKey: [NSString stringWithFormat: @"buttonA"]; 
```

### 你不应该这样做。

# node.js - 是否可以在 Express 中具有白名单的路由上应用基本身份验证/中间件？

> ID：15424793
> 
> 赞同：6
> 
> 时间：2013-03-15T04:33:29.367
> 
> 标签：node.js, express, basic-authentication

我正在用 Node 中的 Express 实现一个 RESTful API，而且我对这两者都是新手。我想使用基本身份验证来控制访问。

我想使用像白名单这样的东西来应用它，但我不知道该怎么做。

黑名单很容易，我可以在我的`#VERB`电话中加入第二个参数：

```
app.get('/', asyncAuth, requestHandler); 
```

我可以更进一步，将所有内容列入黑名单：

```
app.all('*', asyncAuth, requestHandler); 
```

但我想将我的 basicAuth 应用于每条路线，**除了**. `POST /users`有没有一种优雅的方式来做到这一点？我可以使用“黑名单”方法，然后有选择地将其从我想要的路线中删除吗？我不知道怎么做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T08:24:15.503

`POST /users`在列入黑名单的路线之前 定义您的路线：

```
app.post('/users', function(req, res) {
  ...
});

app.all('*', asyncAuth, requestHandler); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T04:39:46.627

您可以维护列入白名单的正则表达式列表，并将 url 与列表中的每个 url 进行匹配，如果匹配则继续，否则需要 auth

```
app.all('*', asyncAuth);

function asyncAuth(req, res, next) {
    var done = false;
    whitelist.forEach(function(regexp) {
        if (req.url.match(regexp)) {
            done = true;
            next();
        }
    });
    if (!done) requireAuth(next);
} 
```

类似的东西

# python - 在 Heroku 中使用 IronMQ 作为 celery 代理时出错

> ID：15424794
> 
> 赞同：1
> 
> 时间：2013-03-15T04:33:29.853
> 
> 标签：python, django, heroku, celery, ironmq

目前我们有一个 Python Django 应用程序托管在 Heroku 云中，它使用 Celery 工作人员进行后台处理。

Celery 工人使用 django DB 作为代理。最近我们决定使用 IronMq 作为代理，因为它是一个企业解决方案。

我们使用的包是

```
Python 2.7
Django 1.3
Celery 3.0.16
Django-celery 3.0.11
Iron-celery 0.3.1 
```

我们正在使用两个工人。一个工作人员用于队列“正常优先级”，另一个工作人员用于队列 HighPriority'。但是，当应用程序疲于启动“HighPriority”队列的工作人员时，会触发一个错误，结果两个工作人员都崩溃了。

以下是我们用于配置 IronMQ 和 celery 队列的其他设置。

```
BROKER_URL='ironmq://xxxxx:xxxxx@'
CELERY_RESULT_BACKEND='ironcache://xxxxx:xxxxx@'

import os
import djcelery
import iron_celery
from kombu import Exchange, Queue
djcelery.setup_loader()

CELERY_DEFAULT_QUEUE = 'NormalPriority'
CELERY_QUEUES = {
                CELERY_DEFAULT_QUEUE: {
                                      'exchange': CELERY_DEFAULT_QUEUE,
                                      'binding_key': CELERY_DEFAULT_QUEUE,
                                      }
                }

CELERY_CREATE_MISSING_QUEUES=True
CELERY_ROUTES = {'tasks.retrieveDocketUsingWorker': {'queue': 'HighPriority'},
                'tasks.retrieveDocketFromDdUsingWorker': {'queue': 'HighPriority'}
                } 
```

我在下面添加了一小部分错误日志。有人请看看这个。

```
 2013-03-14T09:21:17+00:00 app[celeryd1.1]:     self.queue_declare(nowait, passiv
   e=False)
 2013-03-14T09:21:17+00:00 app[celeryd1.1]:   File "/app/.heroku/python/lib/pytho
 n2.7/site-packages/kombu/entity.py", line 497, in queue_declare
 2013-03-14T09:21:17+00:00 app[celeryd1.1]:     nowait=nowait)
 2013-03-14T09:21:17+00:00 app[celeryd1.1]:   File "/app/.heroku/python/lib/pytho
 n2.7/site-packages/kombu/transport/virtual/__init__.py", line 401, in queue_decl
 are
  2013-03-14T09:21:17+00:00 app[celeryd1.1]:     return queue, self._size(queue),
   0
    2013-03-14T09:21:17+00:00 app[celeryd1.1]:   File "/app/.heroku/python/lib/pytho
     n2.7/site-packages/iron_celery/iron_mq_transport.py", line 78, in _size
    2013-03-14T09:21:17+00:00 app[celeryd1.1]:     return details["size"]
 2013-03-14T09:21:17+00:00 app[celeryd1.1]: **TypeError: string indices must be int
      egers**
2013-03-14T09:21:17+00:00 app[celeryd1.1]: [2013-03-14 05:21:17,631: INFO/MainPr
ocess] Celerybeat: Shutting down...
2013-03-14T09:21:18+00:00 heroku[celeryd1.1]: Process exited with status 0
2013-03-14T09:21:18+00:00 heroku[celeryd1.1]: State changed from up to crashed
2013-03-14T09:21:23+00:00 heroku[router]: at=info method=POST path=/getDocketDow
nloaderWorkerStatus/ host=www.irelanddev.com fwd="115.119.213.182" dyno=web.1 qu
eue=0 wait=0ms connect=1ms service=2447ms status=200 bytes=60
2013-03-14T09:21:26+00:00 heroku[router]: at=info method=POST path=/getDocketDow
 nloaderWorkerStatus/ host=www.irelanddev.com fwd="115.119.213.182" dyno=web.1 qu
eue=0 wait=0ms connect=1ms service=23ms status=200 bytes=60
2013-03-14T09:21:31+00:00 heroku[router]: at=info method=POST path=/getDocketDow
nloaderWorkerStatus/ host=www.irelanddev.com fwd="115.119.213.182" dyno=web.1 qu
eue=0 wait=0ms connect=1ms service=196ms status=200 bytes=60
2013-03-14T09:21:36+00:00 heroku[router]: at=info method=POST path=/getDocketDow 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:55:41.903

我相信这与我以前见过的问题类似。请升级 iron_core ( `pip install iron-core -U`)。它应该是 1.0.2 版本。

# javascript - Javascript 文件未到达检查点。可能加载不出来。

> ID：15424795
> 
> 赞同：0
> 
> 时间：2013-03-15T04:33:34.580
> 
> 标签：javascript, json

我有以下代码：

```
var serverRequest = function(){
var request = new XMLHttpRequest();
request.open('GET', 'http://localhost:8080/6ZHYW8/messages', true);
request.addEventListener('load', function(e){
document.write('2');
}, false);
request.send(null);
}

/******************Functions *************************/
serverRequest();

/********************* Runtime Code ********************************/
window.addEventListener('load', function(){
    start();
}, false); 
```

在使用谷歌浏览器时，

```
http://localhost:8080/6ZHYW8/messages 
```

回应：

```
[
  {
    "nickname": "\"Administrator\"",
    "message": "\"KEEP IT CLEAN. You crazy kids\""
  },
  {
    "nickname": "vanilla",
    "message": "THUNDA"
  }

] 
```

有人会碰巧知道为什么我的代码永远不会到达“document.write('2')”吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:35:36.937

因为`request.addEventListener('load')`无效。您需要使用该`request.onreadstatechange`方法

[https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/readystatechange](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/readystatechange)

# ios - iOS - 如何从 KVO 的单例 NSObject 中删除观察者？

> ID：15424796
> 
> 赞同：0
> 
> 时间：2013-03-15T04:33:37.060
> 
> 标签：ios, singleton, key-value-observing, nsobject, observers

我有一个共享的 NSObject 单例类，其中运行了一些操作队列。我对此崩溃了：

```
[super observeValueForKeyPath:keyPath ofObject:object change:change context:context]; 
```

看来我需要使用“removeObserver：”来防止这种情况发生，但是如何在共享对象上正确执行此操作？

**代码：**

```
-(void)synchronizeToDevice{
    queue = [NSOperationQueue new];
    queue.name = @"SynchronizeToDeviceQueue";
    //Sync Active User
    NSInvocationOperation *operationUser = [[NSInvocationOperation alloc] initWithTarget:self
                                                                                selector:@selector(downloadUserData:)
                                                                              object:[self activeUserID]];

    [queue addOperation:operationUser];

    //Sync Video Data
    NSInvocationOperation *operationVideos = [[NSInvocationOperation alloc] initWithTarget:self
                                                                            selector:@selector(downloadVideoData)
                                                                              object:nil];
    [queue addOperation:operationVideos];

    [queue addObserver:self forKeyPath:@"operations" options:0 context:NULL];
}
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    if (object == queue && [keyPath isEqualToString:@"operations"]) {
        //Synchronization Queue
        if ([queue.name isEqualToString:@"SynchronizeToDeviceQueue"] && [queue.operations count] == 0) {
            //Queue Completed
            //Notify View Synchronization Completed
            [self performSelectorOnMainThread:@selector(postNotificationDidFinishSynchronizationToDevice) withObject:nil waitUntilDone:NO];
        }
        //Video Download Queue
        if ([queue.name isEqualToString:@"VideoFileDownloadQueue"] && [queue.operations count] == 0) {
            //Notify View Video File Download Completed
            [self performSelectorOnMainThread:@selector(postNotificationDidFinishDownloadingVideo) withObject:nil waitUntilDone:NO];
        }
        //Active User Sync Queue
        if ([queue.name isEqualToString:@"SynchronizeActiveUserToDeviceQueue"] && [queue.operations count] == 0) {
            //Queue Completed
            //Notify View Synchronization Completed
            [self performSelectorOnMainThread:@selector(postNotificationDidFinishActiveUserSynchronizationToDevice) withObject:nil waitUntilDone:NO];
        }
    }
    else {
        [super observeValueForKeyPath:keyPath ofObject:object change:change context:context];
    }
} 
```

**崩溃日志：**

```
2013-03-14 21:48:42.167 COMPANY[1946:1103] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '<DataManager: 0x1c54a420>: An -observeValueForKeyPath:ofObject:change:context: message was received but not handled.
Key path: operations
Observed object: <NSOperationQueue: 0x1c5d3360>{name = 'SynchronizeActiveUserToDeviceQueue'}
Change: {
    kind = 1;
}
Context: 0x0'
*** First throw call stack:
(0x336262a3 0x3b4b197f 0x336261c5 0x33f1a56d 0x21bd1 0x33eb46b9 0x33eb4313 0x33eb3a25 0x33eb3817 0x33f2b689 0x3b8ccb97 0x3b8cf139 0x3b8cd91d 0x3b8cdac1 0x3b8fda11 0x3b8fd8a4)
libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T21:47:30.643

在[接收“Key-Value Observing Programming Guide”变更通知中，](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueObserving/Articles/KVOBasics.html#//apple_ref/doc/uid/20002252-179866)给出了一个示例实现`observeValueForKeyPath`，并附有注释：

> *如果它实现了它，*请务必调用超类的实现。NSObject 没有实现该方法。

你说你的类是的子类`NSObject`，所以你不应该调用`[super observeValueForKeyPath:...]`。

如果您`synchronizeToDevice`在同一个共享实例上多次调用，则会出现另一个问题。在这种情况下，您创建一个新`queue`的并为此注册一个观察者。但是旧队列的观察者并没有被删除。

因此，`observeValueForKeyPath`可能会调用“旧队列”并且检查 `if (object == queue)`失败，从而导致对 super 的不必要调用。

所以如果 `synchronizeToDevice`可以被多次调用，你应该先移除旧的观察者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T22:06:21.877

我怀疑您的电话`synchronizeToDevice`被多次拨打。如果是这样，您将继续观察旧队列以及一些新队列。触发时`observeValueForKeyPath:...`，它可能会将旧队列传递给您，然后您会忽略它， call`super`会引发异常，因为您没有处理您要求的观察。

您真正的问题是您没有使用访问器。这会让事情变得更清楚。例如，这就是你将如何实现`setQueue:`

```
-(void)setQueue:(NSOperationQueue *)queue {
  if (_queue) {
    [_queue removeObserver:self forKeyPath:@"operations"];
  }

  _queue = queue;

  if (_queue) {
    [_queue addObserver:self forKeyPath:@"operations" options:0 context:NULL];
  }
} 
```

现在，当您致电时`self.queue = [NSOperationQueue new];`，一切都会自动运行。您停止观察旧队列并开始观察新队列。如果您调用`self.queue = nil`它会自动为您取消注册。

您仍然需要确保取消注册`dealloc`：

```
- (void)dealloc {
  if (_queue) {
    [_queue removeObserver:self forKeyPath:@"operations"];
  }
} 
```

# talend - talend 集成套件中的导入项目选项禁用

> ID：15424799
> 
> 赞同：-1
> 
> 时间：2013-03-15T04:33:40.260
> 
> 标签：talend

我必须将 talend 从 Windows 迁移到 linux。当我在 linux gui 中打开 talend 以导入项目时，我看到导入选项本身在 talend 集成套件中被禁用。谁能给我建议，为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T22:25:48.330

很可能您没有尝试将内容导入的项目的写入权限。需要在 Talend 管理中心为该项目授予写入权限；请参阅“项目授权”项。

# javascript - 创建一个仅来自 JS 且不会随每个请求发送的 cookie/

> ID：15424801
> 
> 赞同：0
> 
> 时间：2013-03-15T04:33:50.740
> 
> 标签：javascript, session, cookies, salt

是否可以创建一个对客户端浏览器可用但不会随每个请求的标头一起发送的 cookie？

我想通过 HTTPS 发送会话 salt，然后让用户使用它进行加密，并通过 HTTP 随每个请求发送加密数据，

有没有办法不发送带有加密数据的盐？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T04:37:40.520

查看[localStorage](https://developer.mozilla.org/en-US/docs/DOM/Storage)或 sessionStorage。请注意，此功能的 polyfills 通常遵循基于 cookie 的方法，但使用纯 localStorage 或 sessionStorage 解决方案将导致在每次页面加载时都不会发送带有标题的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:55:24.237

每个请求都会发送一个 cookie，因为这就是它们的用途。localStorage 是您需要的，但不适用于旧版浏览器。如果您需要它在较旧的浏览器中工作，您可以尝试一些事情。

1：将代码存储在服务器上的会话中

2：将查询字符串中的代码传递给其他页面

3：制作一个完整的ajax页面，这样你就不必切换站点

4：创建一个隐藏的框架来存储数据（最坏的选择）

# ios - 无法识别的选择器发送到类单例弧

> ID：15424802
> 
> 赞同：-6
> 
> 时间：2013-03-15T04:34:05.840
> 
> 标签：ios, objective-c, singleton, automatic-ref-counting, unrecognized-selector

我通过以下方式设置了单例类

我的 .h 有以下代码

```
 + (Singleton *)sharedInstance; 
```

.m 如下所示

```
+ (Singleton *)sharedInstance
{
        if (nil == sharedInstance) {
           sharedInstance = [[Singleton alloc] init];
    }
    return sharedInstance;
} 
```

当我尝试从另一个类访问 Singleton 类中的方法时，出现以下错误

```
 reason: '+[Singeleton myMethod:]: unrecognized selector sent to class 
```

myMethod 存在于我的 Singleton 类中。

Single Class 使用 ARC，而调用类是 Non-ARC。

我不确定这是否与此有关。

myMethod 是一个 NSNotification ，我通过向它发送一个字典对象并使用通知名称来调用该方法。

编辑：我确实尝试在其他似乎没有帮助的线程上阅读和实施建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T04:37:06.047

您似乎调用了类方法而不是实例方法。

所以你很可能做了：

```
[Singleton myMethod:...]; 
```

更正您的电话：

```
[[Singleton sharedInstance] myMethod:...]; 
```

编辑：

哦，我现在意识到一个更糟糕的问题；你的单身工厂坏了。没有您要返回的实例。试试这个变种。它不是线程安全的，但可能对您来说已经足够了。

```
+ (Singleton*)sharedInstance 
{
    static Singleton *instance = nil;
    if (nil == instance) 
    {
        instance = [[Singleton alloc] init];
    }
    return instance;
} 
```

# ruby-on-rails - 如何在开发模式下使用 REE

> ID：15424812
> 
> 赞同：-1
> 
> 时间：2013-03-15T04:34:41.113
> 
> 标签：ruby-on-rails, rvm, ruby-enterprise-edition

我们想看看我们是否遇到了 REE 问题，使用 RVM 在社区 Rails 和 REE 之间切换的过程是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T05:33:44.810

这些是 rvm 的基础知识，记录在[rvm 站点上](https://rvm.io)：

```
rvm install ree
rvm use ree 
```

# c - 尝试动态选择的菜单..卡在某个部分

> ID：15424818
> 
> 赞同：0
> 
> 时间：2013-03-15T04:35:13.303
> 
> 标签：c

这个想法是有一个包含 10 个字符串的数组。

尝试使用所选选项动态打印菜单。在这里，我试图将字符串从数组中提取到结构中……但我没有得到它……如果我将字符串直接分配给结构变量，我可以读取它。

请有人解释一下这里出了什么问题？

```
#include <stdio.h>
#include <stdlib.h>

    typedef struct some_numbers{
       int id;
       char *somestring[10];
       }numb;

    int main()
    {
    int i = 0;         
    numb *new_numb;

    char *arr[10]= {0};

    for(i; i<2; i++)
    {
           printf("Please enter %dth name:\n",i);
           scanf("%s",arr+i);
          //i am printing it agian to confirm that it is stored in said locations
           printf("%s\n",arr+i);
    }

    new_numb = (struct numb *)malloc(sizeof(numb)*4);

    //If i assign the string dirctly then i can print it as follow

    new_numb->somestring[0] = "MY_number";

    printf("%s\n",new_numb->somestring[0]);
       //I am trying to copy string from an arry and print it again....but not working 

    for(i=0; i<2; i++)
    {
             strcpy(new_numb->somestring[i], arr+i);
             printf("%s\n",new_numb->somestring[i]);
    }

    system("PAUSE");
    return 0;    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T04:44:07.020

您需要为每个`char *`in`arr`和`new_num->somestring`.

随着您创建了一个 10 s`char * arr[10]`的数组，但它们中的每一个 ( ) 都需要内存来保存字符串。`char *``arr[0], arr[1]`

`new_numb->somestring`数组类似。

您可以修改代码，例如

```
for(i; i<2; i++)
{
       printf("Please enter %dth name:\n",i);

       //allocate memory to hold string of max 100 chars, you may want to change that.
       arr[i] = malloc(sizeof(char) * 100);

       scanf("%s",arr+i);
      //i am printing it agian to confirm that it is stored in said locations
       printf("%s\n",arr+i);

} 
```

# php - IntelliJ IDEA 12 找不到 CodeIgniter 类，抛出错误

> ID：15424828
> 
> 赞同：8
> 
> 时间：2013-03-15T04:35:45.297
> 
> 标签：php, codeigniter, ide, intellij-idea

我正在使用 IntelliJ IDEA 12 使用 CodeIgniter 框架开发 PHP Web 应用程序。由于 CI 实例化对象和方法的方式，IDEA 认为它们在被调用时不存在：

![在此处输入图像描述](../Images/8277619ffa065de4b45590084989bf4b.png)

如您所见，在我尝试使用的每个 CodeIgniter 类/方法下，我都会得到那些烦人的橙色波浪线。

这是`CI_Controller`该类的代码，可以深入了解它们是如何创建对象的：

```
class CI_Controller {

    private static $instance;

    /**
     * Constructor
     */
    public function __construct()
    {
        self::$instance =& $this;

        // Assign all the class objects that were instantiated by the
        // bootstrap file (CodeIgniter.php) to local class variables
        // so that CI can run as one big super object.
        foreach (is_loaded() as $var => $class)
        {
            $this->$var =& load_class($class);
        }

        $this->load =& load_class('Loader', 'core');

        $this->load->initialize();

        log_message('debug', "Controller Class Initialized");
    }

    public static function &get_instance()
    {
        return self::$instance;
    }
} 
```

有什么方法可以让 IntelliJ IDEA 忽略这些错误（但不是其他错误），或者让它自己找到对象？

注意：我曾经使用 PHPStorm，这是一个在 IntelliJ IDEA 平台上构建的 PHP IDE，它在 CodeIgniter 上做了同样的事情。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-15T04:53:10.397

[我按照本指南](http://validwebs.com/346/code-completion-for-codeigniter-in-phpstorm/)解决了这个问题。它适用于 PHPStorm，但也适用于 IntelliJ IDEA（可能也是 WebStorm！）。其实很简单。基本回顾：

1.  在我的项目根目录中保存了以下 PHP 代码。它基本上只是一个 PHPDoc 注释：

```
    <?php die('这个文件不是真的在这里！');

    /**
     * ------------- 不要将此文件上传到实时服务器 ---------
     *
     * 在 phpStorm 中实现 CodeIgniter 的代码完成
     * phpStorm 索引所有类结构，因此如果此文件在项目中，它将被加载。
     * ------------------------------------------------- ------------------
     * 将以下文件拖放到 phpStorm 中的 CI 项目中
     * 你可以把它放在项目根目录下，phpStorm 会加载它。
     * （如果phpStorm没有加载它，请尝试关闭项目并重新打开它）
     *
     * 在系统/核心/下
     * 右键单击​​ Controller.php 并将标记设置为纯文本
     * 对 Model.php 做同样的事情
     * ------------------------------------------------- ------------------
     * 这样一来，这个简单的代码完成层就无需编辑 CI 核心文件。
     *
     * PHP 版本 5
     *
     * 许可证：GPL http://www.gnu.org/copyleft/gpl.html
     *
     * 创建于 2012 年 1 月 28 日晚上 11:06
     *
     * @类别
     * @package CodeIgniter CI_phpStorm.php
     * @作者杰夫·贝恩克
     * @copyright 2009-11 Valid-Webs.com
     * @license GPL http://www.gnu.org/copyleft/gpl.html
     * @版本 2012.01.28
     */

    /**
     * @property CI_DB_active_record $db 这是独立于平台的基础 Active Record 实现类。
     * @property CI_DB_forge $dbforge 数据库实用程序类
     * @property CI_Benchmark $benchmark 此类使您可以标记点并计算它们之间的时间差。
  还可以显示内存消耗。
     * @property CI_Calendar $calendar 这个类可以创建日历
     * @property CI_Cart $cart 购物车类
     * @property CI_Config $config 此类包含使配置文件能够被管理的函数
     * @property CI_Controller $controller 这个类对象是每个库所在的超类。CodeIgniter
将被分配给。
     * @property CI_Email $email 允许使用 Mail、Sendmail 或 SMTP 发送电子邮件。
     * @property CI_Encrypt $encrypt 使用 XOR Hashing 和 Mcrypt 提供双向密钥编码
     * @property CI_Exceptions $exceptions 异常类
     * @property CI_Form_validation $form_validation 表单验证类
     * @property CI_Ftp $ftp FTP 类
     * @property CI_Hooks $hooks 提供一种机制来扩展基本系统而无需黑客攻击。
     * @property CI_Image_lib $image_lib 图像处理类
     * @property CI_Input $input 预处理全局输入数据以确保安全
     * @property CI_Lang $lang 语言类
     * @property CI_Loader $load 加载视图和文件
     * @property CI_Log $log 日志记录类
     * @property CI_Model $model CodeIgniter 模型类
     * @property CI_Output $output 负责将最终输出发送到浏览器
     * @property CI_Pagination $pagination 分页类
     * @property CI_Parser $parser 解析指定模板视图中包含的伪变量，
用第二个参数中的数据替换它们
     * @property CI_Profiler $profiler 此类使您能够显示基准、查询和其他数据
，以帮助调试和优化。
     * @property CI_Router $router 解析 URI 并确定路由
     * @property CI_Session $session 会话类
     * @property CI_Sha1 $sha1 使用安全散列算法提供 160 位散列
     * @property CI_Table $table HTML 表生成
让您可以手动或从数据库结果对象或数组创建表。
     * @property CI_Trackback $trackback Trackback 发送/接收类
     * @property CI_Typography $typography 排版类
     * @property CI_Unit_test $unit_test 简单测试类
     * @property CI_Upload $upload 文件上传类
     * @property CI_URI $uri 解析 URI 并确定路由
     * @property CI_User_agent $user_agent 标识浏览代理的平台、浏览器、机器人或移动设备
     * @property CI_Validation $validation //死
     * @property CI_Xmlrpc $xmlrpc XML-RPC 请求处理程序类
     * @property CI_Xmlrpcs $xmlrpcs XML-RPC 服务器类
     * @property CI_Zip $zip Zip 压缩类
     * @property CI_Javascript $javascript Javascript 类
     * @property CI_Jquery $jquery Jquery 类
     * @property CI_Utf8 $utf8 提供对 UTF-8 环境的支持
     * @property CI_Security $security 安全类、xss、csrf 等...
     */
    类 CI_Controller{}

    /**
     * @property CI_DB_active_record $db 这是独立于平台的基础 Active Record 实现类。
     * @property CI_DB_forge $dbforge 数据库实用程序类
     * @property CI_Benchmark $benchmark 此类使您可以标记点并计算它们之间的时间差。
  还可以显示内存消耗。
     * @property CI_Calendar $calendar 这个类可以创建日历
     * @property CI_Cart $cart 购物车类
     * @property CI_Config $config 此类包含使配置文件能够被管理的函数
     * @property CI_Controller $controller 这个类对象是每个库所在的超类。CodeIgniter
将被分配给。
     * @property CI_Email $email 允许使用 Mail、Sendmail 或 SMTP 发送电子邮件。
     * @property CI_Encrypt $encrypt 使用 XOR Hashing 和 Mcrypt 提供双向密钥编码
     * @property CI_Exceptions $exceptions 异常类
     * @property CI_Form_validation $form_validation 表单验证类
     * @property CI_Ftp $ftp FTP 类
     * @property CI_Hooks $hooks 提供一种机制来扩展基本系统而无需黑客攻击。
     * @property CI_Image_lib $image_lib 图像处理类
     * @property CI_Input $input 预处理全局输入数据以确保安全
     * @property CI_Lang $lang 语言类
     * @property CI_Loader $load 加载视图和文件
     * @property CI_Log $log 日志记录类
     * @property CI_Model $model CodeIgniter 模型类
     * @property CI_Output $output 负责将最终输出发送到浏览器
     * @property CI_Pagination $pagination 分页类
     * @property CI_Parser $parser 解析指定模板视图中包含的伪变量，
用第二个参数中的数据替换它们
     * @property CI_Profiler $profiler 此类使您能够显示基准、查询和其他数据
，以帮助调试和优化。
     * @property CI_Router $router 解析 URI 并确定路由
     * @property CI_Session $session 会话类
     * @property CI_Sha1 $sha1 使用安全散列算法提供 160 位散列
     * @property CI_Table $table HTML 表生成
让您可以手动或从数据库结果对象或数组创建表。
     * @property CI_Trackback $trackback Trackback 发送/接收类
     * @property CI_Typography $typography 排版类
     * @property CI_Unit_test $unit_test 简单测试类
     * @property CI_Upload $upload 文件上传类
     * @property CI_URI $uri 解析 URI 并确定路由
     * @property CI_User_agent $user_agent 标识浏览代理的平台、浏览器、机器人或移动设备
     * @property CI_Validation $validation //死
     * @property CI_Xmlrpc $xmlrpc XML-RPC 请求处理程序类
     * @property CI_Xmlrpcs $xmlrpcs XML-RPC 服务器类
     * @property CI_Zip $zip Zip 压缩类
     * @property CI_Javascript $javascript Javascript 类
     * @property CI_Jquery $jquery Jquery 类
     * @property CI_Utf8 $utf8 提供对 UTF-8 环境的支持
     * @property CI_Security $security 安全类、xss、csrf 等...
     */
    类 CI_Model{}

```

2.在IntelliJ IDEA中找到并右键单击->标记为纯文本`/system/core/controller.php`。`/system/core/model.php`

3\. 完成！它工作得很好，没有更多的错误错误和代码完成！

![在此处输入图像描述](../Images/98efbff41f4edfdddc2762af91042f97.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-17T23:59:32.813

这是对我有用的解决方案：[https ://github.com/Stunt/Codeigniter-autocomplete/](https://github.com/Stunt/Codeigniter-autocomplete/)

我正在使用 phpStorm，但我想它可以与 IDEA 一起使用。

无需将文件标记为纯文本。只需将 autocomplete.php 文件放入 application/config 文件夹即可。我怀疑 github 上的链接会变坏，但以防万一这里是文件的内容。

```
<?php
// help IDE(s) support Codeigniter 2.0
/**
 * @property CI_DB_active_record $db
 * @property CI_DB_forge $dbforge
 * @property CI_Benchmark $benchmark
 * @property CI_Calendar $calendar
 * @property CI_Cart $cart
 * @property CI_Config $config
 * @property CI_Controller $controller
 * @property CI_Email $email
 * @property CI_Encrypt $encrypt
 * @property CI_Exceptions $exceptions
 * @property CI_Form_validation $form_validation
 * @property CI_Ftp $ftp
 * @property CI_Hooks $hooks
 * @property CI_Image_lib $image_lib
 * @property CI_Input $input
 * @property CI_Language $language
 * @property CI_Loader $load
 * @property CI_Log $log
 * @property CI_Model $model
 * @property CI_Output $output
 * @property CI_Pagination $pagination
 * @property CI_Parser $parser
 * @property CI_Profiler $profiler
 * @property CI_Router $router
 * @property CI_Session $session
 * @property CI_Sha1 $sha1
 * @property CI_Table $table
 * @property CI_Trackback $trackback
 * @property CI_Typography $typography
 * @property CI_Unit_test $unit_test
 * @property CI_Upload $upload
 * @property CI_URI $uri
 * @property CI_User_agent $user_agent
 * @property CI_Validation $validation
 * @property CI_Xmlrpc $xmlrpc
 * @property CI_Xmlrpcs $xmlrpcs
 * @property CI_Zip $zip
 *
 *
 *
 * These are samples entries to make my own functions work. 
 * Remove these and add you custom ones.
 * @property Tank_auth $tank_auth
 * @property Users_model $users_model
 * @property Firms_model $firms_model
 * @property Firms_model_master $firms_model_master
 *
 *
 */
class CI_Controller {};
class MY_Controller extends CI_Controller {};
/**
 * @property CI_DB_active_record $db
 * @property CI_DB_forge $dbforge
 * @property CI_Config $config
 * @property CI_Loader $load
 * @property CI_Session $session
 */
class CI_Model {};
/* End of file autocomplete.php */
/* Location: ./application/config/autocomplete.php */
?> 
```

CIv3 更新：如果您使用的是 CodeIgniter V 3.x，请改用它。

```
<?php
/**
 * @property CI_DB_query_builder|CI_DB_postgre_driver $db              This is the platform-independent base Active Record implementation class.
 * @property CI_DB_forge $dbforge                 Database Utility Class
 * @property CI_Benchmark $benchmark              This class enables you to mark points and calculate the time difference between them.<br />  Memory consumption can also be displayed.
 * @property CI_Calendar $calendar                This class enables the creation of calendars
 * @property CI_Cart $cart                        Shopping Cart Class
 * @property CI_Config $config                    This class contains functions that enable config files to be managed
 * @property CI_Controller $controller            This class object is the super class that every library in.<br />CodeIgniter will be assigned to.
 * @property CI_Email $email                      Permits email to be sent using Mail, Sendmail, or SMTP.
 * @property CI_Encrypt $encrypt                  Provides two-way keyed encoding using XOR Hashing and Mcrypt
 * @property CI_Exceptions $exceptions            Exceptions Class
 * @property CI_Form_validation $form_validation  Form Validation Class
 * @property CI_Ftp $ftp                          FTP Class
 * @property CI_Hooks $hooks                      Provides a mechanism to extend the base system without hacking.
 * @property CI_Image_lib $image_lib              Image Manipulation class
 * @property CI_Input $input                      Pre-processes global input data for security
 * @property CI_Lang $lang                        Language Class
 * @property CI_Loader $load                      Loads views and files
 * @property CI_Log $log                          Logging Class
 * @property CI_Model $model                      CodeIgniter Model Class
 * @property CI_Output $output                    Responsible for sending final output to browser
 * @property CI_Pagination $pagination            Pagination Class
 * @property CI_Parser $parser                    Parses pseudo-variables contained in the specified template view,<br />replacing them with the data in the second param
 * @property CI_Profiler $profiler                This class enables you to display benchmark, query, and other data<br />in order to help with debugging and optimization.
 * @property CI_Router $router                    Parses URIs and determines routing
 * @property CI_Session $session                  Session Class
 * @property CI_Encryption $encryption            The Encryption Library provides two-way data encryption
 * @property CI_Table $table                      HTML table generation<br />Lets you create tables manually or from database result objects, or arrays.
 * @property CI_Trackback $trackback              Trackback Sending/Receiving Class
 * @property CI_Typography $typography            Typography Class
 * @property CI_Unit_test $unit_test              Simple testing class
 * @property CI_Upload $upload                    File Uploading Class
 * @property CI_URI $uri                          Parses URIs and determines routing
 * @property CI_User_agent $user_agent            Identifies the platform, browser, robot, or mobile devise of the browsing agent
 * @property CI_Form_validation $validation
 * @property CI_Xmlrpc $xmlrpc                    XML-RPC request handler class
 * @property CI_Xmlrpcs $xmlrpcs                  XML-RPC server class
 * @property CI_Zip $zip                          Zip Compression Class
 * @property CI_Javascript $javascript            Javascript Class
 * @property CI_Jquery $jquery                    Jquery Class
 * @property CI_Utf8 $utf8                        Provides support for UTF-8 environments
 * @property CI_Security $security                Security Class, xss, csrf, etc...
 * @property Tank_auth $tank_auth
 *
 */
class CI_Controller{}
class MY_Controller extends CI_Controller {};
/**
 * @property CI_DB_query_builder|CI_DB_postgre_driver $db              This is the platform-independent base Active Record implementation class.
 * @property CI_DB_forge $dbforge                 Database Utility Class
 * @property CI_Benchmark $benchmark              This class enables you to mark points and calculate the time difference between them.<br />  Memory consumption can also be displayed.
 * @property CI_Calendar $calendar                This class enables the creation of calendars
 * @property CI_Cart $cart                        Shopping Cart Class
 * @property CI_Config $config                    This class contains functions that enable config files to be managed
 * @property CI_Controller $controller            This class object is the super class that every library in.<br />CodeIgniter will be assigned to.
 * @property CI_Email $email                      Permits email to be sent using Mail, Sendmail, or SMTP.
 * @property CI_Encrypt $encrypt                  Provides two-way keyed encoding using XOR Hashing and Mcrypt
 * @property CI_Exceptions $exceptions            Exceptions Class
 * @property CI_Form_validation $form_validation  Form Validation Class
 * @property CI_Ftp $ftp                          FTP Class
 * @property CI_Hooks $hooks                      Provides a mechanism to extend the base system without hacking.
 * @property CI_Image_lib $image_lib              Image Manipulation class
 * @property CI_Input $input                      Pre-processes global input data for security
 * @property CI_Lang $lang                        Language Class
 * @property CI_Loader $load                      Loads views and files
 * @property CI_Log $log                          Logging Class
 * @property CI_Model $model                      CodeIgniter Model Class
 * @property CI_Output $output                    Responsible for sending final output to browser
 * @property CI_Pagination $pagination            Pagination Class
 * @property CI_Parser $parser                    Parses pseudo-variables contained in the specified template view,<br />replacing them with the data in the second param
 * @property CI_Profiler $profiler                This class enables you to display benchmark, query, and other data<br />in order to help with debugging and optimization.
 * @property CI_Router $router                    Parses URIs and determines routing
 * @property CI_Session $session                  Session Class
 * @property CI_Encryption $encryption            The Encryption Library provides two-way data encryption
 * @property CI_Table $table                      HTML table generation<br />Lets you create tables manually or from database result objects, or arrays.
 * @property CI_Trackback $trackback              Trackback Sending/Receiving Class
 * @property CI_Typography $typography            Typography Class
 * @property CI_Unit_test $unit_test              Simple testing class
 * @property CI_Upload $upload                    File Uploading Class
 * @property CI_URI $uri                          Parses URIs and determines routing
 * @property CI_User_agent $user_agent            Identifies the platform, browser, robot, or mobile devise of the browsing agent
 * @property CI_Form_validation $validation
 * @property CI_Xmlrpc $xmlrpc                    XML-RPC request handler class
 * @property CI_Xmlrpcs $xmlrpcs                  XML-RPC server class
 * @property CI_Zip $zip                          Zip Compression Class
 * @property CI_Javascript $javascript            Javascript Class
 * @property CI_Jquery $jquery                    Jquery Class
 * @property CI_Utf8 $utf8                        Provides support for UTF-8 environments
 * @property CI_Security $security                Security Class, xss, csrf, etc...
 * @property Tank_auth $tank_auth
 */
class CI_Model {}; 
```

我不能把这一切归功于我。我找到了很多，但不记得在哪里。我确实需要添加一些以使其完整。

# c++ - Clang vs. GCC：通过限定/非限定名称与全局函数建立友谊

> ID：15424831
> 
> 赞同：15
> 
> 时间：2013-03-15T04:36:00.650
> 
> 标签：c++, gcc, clang, language-lawyer

我正在尝试确定是否针对 Clang、GCC 或两者提交错误报告（我已经针对 Clang 主干和 GCC 4.7.2 进行了测试：如果有人可以针对 GCC 主干验证这一点会有所帮助）：

基本上，以下代码三行文件`-fsyntax-only`在默认和 C++11 模式下可以正常编译：

```
class A {
    friend void f();
}; 
```

请注意，没有事先声明`f()`，但这显然是可以的。

但是，Clang（但不是 GCC）拒绝以下内容：

```
class A {
    friend void ::f();
}; 
```

Clang 的错误是“在指定范围内没有找到类型为 'void ()' 的名为 'f' 的函数”，但我在标准中找不到任何理由来区别对待这种情况，所以我认为这是一个错误；不过我可能是错的（但是，我正在阅读 N3242，AFAIK 是 C++11 之前的最后一个公开草案）。

然而，下一个示例被 GCC 而不是 Clang 拒绝：

```
void f() { }

void g()
{
    class A {
        friend void ::f();
    };
} 
```

来自 GCC 的错误是“本地类中没有事先声明的朋友声明 'void f()'”，这似乎没有意义，因为`void ::f()`应该引用`f()`已声明的全局命名空间中的 。（不要介意`friend`- 从本地类中调用全局函数是荒谬的，它似乎并不违法......）

最后，最后一个示例被 Clang 和 GCC 拒绝：

```
void g()
{
    class A {
        friend void ::f();
    };
} 
```

错误分别是“在本地类中没有事先声明的朋友声明'void f()'”和“在指定范围内找不到名为'f'且类型为'void ()'的函数”。现在，从 11.4p11 开始，似乎有一些理由拒绝本地类中先前未声明的函数的朋友声明，但该段实际上是：

> 如果友元声明出现在本地类 (9.8)**中并且指定的名称是非限定名称**，则在不考虑最内层非类范围之外的范围的情况下查找先前的声明。对于友元函数声明，如果没有事先声明，则程序是非良构...

该声明的非法性显然是基于本段中的第二句话，但我不清楚该句子是否也应适用于限定名称的情况，正如在本案中使用的那样。（可以说，无论是否使用“非限定名称”，整个段落都可能适用于“本地类”情况，并且“并且指定的名称是非限定名称”子句仅适用于所描述的查找在第一句话中，但这似乎有点牵强……我认为这是一种可能性的唯一原因是因为两个编译器都拒绝它。）

无论如何，据我所知，所有这四个案例（无论它们是否合理）都应该是合法的；即使不是，在第二种和第三种情况下，Clang 和 GCC 中至少有一个是错误的。谁能在我的逻辑中找到错误？

第三种和第四种情况无疑是荒谬的。但我可以看到第二种情况破坏了某人的有效和有用的代码，所以我有点惊讶它从未被抓住，如果它确实是一个错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T05:25:59.533

我认为 8.3/1 中的这句话是相关的：

> 当*declarator-id*被限定时，声明应引用限定符所指的类或命名空间的先前声明的成员（或者，在命名空间的情况下，该命名空间的内联命名空间集合的元素（7.3 .1)) 或其专业化；该成员不应仅由声明符*id的**嵌套名称说明符指定*的类或命名空间范围内的*using 声明*引入。

 **该段在任何类型的声明中都在谈论一般的声明符。所以我认为示例 2 和 4 格式不正确，clang 是正确的，而 gcc 是错误的。

（如果全局声明是模板函数，示例 3 可能会变得更加现实。将全局函数模板或本地类的特化作为朋友可能会很有用。如果允许，您编写的示例 3 也可能是合法的一致性。）**

# c# - 如何将 Choice 文件与多个值进行比较并从 sharepointList 中获取结果？

> ID：15424832
> 
> 赞同：0
> 
> 时间：2013-03-15T04:36:11.443
> 
> 标签：c#, asp.net, sharepoint-2010

我是sharepoint的新手。我有两个 Sharepoint 列表`CustomerList`和`AnnouncementList`

```
CustomerList with columns(custid,name,region)
AnnoucementList with columns(Annid,AnnouncementText,region) 
```

现在我想向拥有 CustomerList.region=AnnouncementList.region 的客户显示公告

问题是区域是具有多个值的选择字段

例如。

```
Custid     name     region
     1     Shekhar  mumbai,pune

Annid  AnnouncementText  region
  1    Today is holiday  pune,gujrat 
```

**现在，如何将 CustomerList 中的每个 Choice 区域与 AnnouncementList 的每个 Choice 进行比较？** `using CAMEL QUERY`

感谢帮助！即使找到一个匹配项，它也必须显示数据。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:51:44.460

要比较共享点列表中的多选值，请使用 SPMultiChoice 类来获取结果，而不是 CAML 查询。

# java - java.lang.IllegalArgumentException：输入 == 空！使用 ImageIO.read 将图像加载为 bufferedImage 时

> ID：15424834
> 
> 赞同：15
> 
> 时间：2013-03-15T04:36:35.713
> 
> 标签：java, bufferedimage, javax.imageio

这个问题在这个网站上已经被问了 100 次，但我已经查看了所有这些问题，即使它们都已解决，但没有一个解决方案对我有用。

这是我的代码的样子：

```
public Button1(Client client, String imgName) {
    this.client = client;   

    try {
        this.icon = ImageIO.read(this.getClass().getResourceAsStream("/resources/" + imgName));
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

当代码运行时，它会导致以下错误：

```
Exception in thread "main" java.lang.IllegalArgumentException: input == null!
at javax.imageio.ImageIO.read(Unknown Source) 
```

字符串 imgName 从子类传递给构造函数，是图像的名称（例如 image.png）。我还确保我的资源文件夹位于项目文件夹的根目录中，并作为源文件夹包含在 eclipse 项目中。我还确保`System.getProperty("user.dir")`指向正确的位置。我也尝试过使用 getResource() 而不是 getResourceAsStream()，但它仍然不起作用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-15T04:47:34.740

尝试使用这个： -

```
this.icon = ImageIO.read(new FileInputStream("res/test.txt")); 
```

其中`res`文件夹与您的文件夹位于同一级别`src`。此外，如果您注意到，文件夹名称`/`之前的斜杠已被删除。`res`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-05-10T15:01:43.553

我知道这已经很老了，但我也遇到了同样的问题。

检查以确保您的图片扩展不是大写。

在我的图像资源文件夹中，我有“enemy.PNG”，但我试图加载“enemy.png”，你认为它可以工作但没有。

所以，只是让你的扩展名不大写。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-17T01:37:11.320

我通过更改我的代码解决了我的问题

```
 image = ImageIO.read(SpriteSheet.class.getResourceAsStream("res/image.png")); 
```

对此

```
 image = ImageIO.read(SpriteSheet.class.getResourceAsStream("/image.png")); 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T04:52:00.153

作为参数传递给 getResourceAsStream() 的路径应该相对于类路径集。所以尝试改变这个

```
this.icon = ImageIO.read(this.getClass().getResourceAsStream("/resources/" + imgName)); 
```

至

```
this.icon = ImageIO.read(this.getClass().getResourceAsStream("resources/" + imgName)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-04T04:18:20.923

这可能是“不，Duh！” 对这个网站上的许多人来说，但指出 Java 的字面意义总是很重要的。区分大小写是关键，尤其是当您 .jar 文件时。

如果您的程序在编译然后运行时工作正常，但是当您 .jar 文件时突然出现此问题。确保检查您的文件夹/文件和代码中的引用的案例。（以及确保它们在您的 .jar 中）

希望这可以帮助任何最终在这里看到相同问题的人。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T06:16:06.483

尝试使用以下

```
this.icon = ImageIO.read(this.getClass().getResourceAsStream("../resources/" + imgName)); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-15T04:38:46.993

尝试这个：

```
this.icon = ImageIO.read(this.getClass().getResource("/resources/" + imgName)); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-20T16:59:58.633

由于我的代码中的错误，我遇到了这个错误。我试图从与应有的连接对象不同的连接对象中提取 (conn.getInputStream())。我修复了连接对象变量，它开始工作。

```
BufferedImage image;
 try (InputStream in = new BufferedInputStream(conn.getInputStream())) {
   image = ImageIO.read(in);
   File file = new File(fullImageFilePath);
   synchronized (file.getCanonicalPath().intern()) {
     if (!file.exists()) {
         ImageIO.write(image, "png", file);
     }
   }
 } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-26T03:16:34.093

资源文件夹是eclipse中的类文件夹吗？右键单击项目 -> 属性 -> Java 构建路径 -> 库 -> 添加类文件夹... -> （选择 res 文件夹）并将其添加为类文件夹。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-03-15T05:00:10.080

你可以试试这个：

```
image = ImageIO.read(getClass().getResource("/resources/" + imgName)); 
```

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2013-09-20T18:25:59.430

尝试这个

```
private BufferedImage get(String path) throws IOException{    
    URL url = this.getClass().getClassLoader().getResource(path);     
    String thing = url.getFile();       
    return ImageIO.read(new File(thing));      
} 
```

# iphone - 我想在我的自定义地图引脚上发出警报，就像屏幕截图一样

> ID：15424839
> 
> 赞同：0
> 
> 时间：2013-03-15T04:36:54.683
> 
> 标签：iphone, objective-c, mkmapview

![在此处输入图像描述](../Images/8e8ee6b6f352054907e6321930c59852.png)如何使用自定义代码（如默认 MKMapview）使这些类型警报。您可以在屏幕截图中看到它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T04:40:32.700

将[TapKu 警报与 iOS 图像一起使用](http://www.cocoacontrols.com/controls/tapku-alerts-with-images)

您还可以[在此处找到不同类型的自定义 UIAlertViews](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=alert)

# oauth-2.0 - 使用 Google OAuth 更改权限

> ID：15424840
> 
> 赞同：1
> 
> 时间：2013-03-15T04:36:57.957
> 
> 标签：oauth-2.0, google-oauth

我正在升级帐户以使用新`plus.login`范围，因此我测试了添加仅具有`userinfo`范围的用户，然后重新登录并`plus.login`添加。结果是在授权访问面板中引入了一个新条目，而后面调用返回的访问令牌只有`userinfo`权限。我通过进行经过验证的令牌调用以及尝试列出人员来测试这一点。

这是预期的行为吗？如果是这样，我应该事先撤销旧令牌吗？我认为通过`/revoke`行动是可能的。[服务器端移除 Oauth 令牌](https://stackoverflow.com/questions/11087240/server-side-removal-of-oauth-token)

更新：[相关要点](https://gist.github.com/mahemoff/5169541)。这是使用 Ruby 的 Omniauth gem。我实际上不确定用户如何在授权访问面板中看到超过 1 个条目，但在这种情况下我可以看到 2 个。昨天测试了各种场景后，我有大约 6 个条目都属于同一个应用程序*！*请注意，我在任何时候都没有更改客户端 ID，实际上只有一个客户端 ID。

我希望我描述的情况可以被其他人复制；只需破解 Google 端 URL 以删除 plus.login 范围，然后在保留 URL 原样的同时再次登录。

更新（2）：我还发现了[这个问题](https://developers.google.com/+/api/oauth)：“您不应该请求 userinfo.profile 或 plus.me 与此范围相结合，因为它们被隐式包含在内，并且会为您的用户创建一个令人困惑的权限对话框。” 事实上，这不仅仅是一个 UX 权限问题。Google 似乎实际上不会针对用户存储“plus.me”范围，因此这意味着即使用户已经授予权限，它也会始终显示 OAuth 权限对话框（我认为因为它会进行简单的相等性检查和通知 plus .me 被请求，但不针对用户存储）。

更新（3）：关于使用错误登录的错误是由我的代码执行 user.login || 之类的操作引起的 user.signup 不更新登录时的令牌数据。所以现在它在每次登录后更新访问令牌和刷新令牌。（我仍然不明白为什么每个客户端-用户组合需要多个令牌。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:11:45.680

也许您在发布一个新的之前没有为您以前经过身份验证的客户端撤销令牌？

您可以使用以下 JavaScript 演示测试升级范围后撤销是否有效：

1.  授权使用[此页面](http://wheresgus.com/appactivitiesdemo)。（请勿断开授权客户端）
2.  使用此页面升级您的授权[，该页面以日历](http://wheresgus.com/appactivitiesdemoplus)范围为例，并且具有相同的客户端。
3.  现在，如果您查看[您发布的授权子令牌页面](https://accounts.google.com/b/0/IssuedAuthSubTokens)，您会注意到每个客户端对应两个条目。
4.  通过刷新并单击断开按钮从第二页撤消。
5.  返回[您颁发的授权子令牌页面](https://accounts.google.com/b/0/IssuedAuthSubTokens)。两套已发行的授权子代币现在都消失了。

我对此进行了进一步测试并对项目进行了更改，添加了驱动范围。将范围添加到 API 客户端项目并授权其他客户端后，撤销任何令牌将撤销该项目中的所有授权客户端。

如果您要从另一个客户端升级现有的授权凭据，则应在升级现有令牌时撤销旧令牌，以避免出现无法按预期工作的凭据实例。

但是，正如您从演示中看到的那样，从同一个 API 客户端撤销令牌将撤销额外发布的身份验证令牌，因此您无需担心撤销以前发布的令牌。

撤销旧令牌（例如，您的带有 userinfo.email 范围的刷新令牌）的最佳理由是，您以后可能会尝试使用该令牌对新范围进行 API 调用，即使该令牌尚未升级为包含额外的范围，并可能引入奇怪的错误。

最后一点：希望用户会更习惯于从[Google+ 上的“管理应用”页面](https://plus.google.com/apps)查看他们颁发的授权令牌，这可以更好地对连接的应用程序实例进行重复数据删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T08:24:51.700

这听起来不像是正确的行为。您能否从稍后的调用中获取访问令牌并将其插入[https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=TOKEN_GOES_HERE](https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=TOKEN_GOES_HERE) - 这将显示它被授权的范围。

你也在哪个平台上实施？如果你有一个片段可能会有所帮助！

更新：在之前的身份验证之后尝试添加 plus.login，我得到了一个新的同意对话，所以那里看起来很顺利。可能是客户特定的问题？

# java - 需要有关在 java 中制作名称生成器的建议

> ID：15424845
> 
> 赞同：-1
> 
> 时间：2013-03-15T04:37:23.733
> 
> 标签：java

嗨，我正在尝试制作一个星球大战名称生成器，但我被卡住了。我想使程序遵循以下准则：

我应该创建一个名为`promptstring`.

用户的 Star Wars 名称由名字和姓氏组成：对于名字，使用用户真实名字的前 3 个字符，与用户真实姓氏的前 2 个字符连接。对于姓氏，使用用户母亲娘家姓的前 2 个字符，并与用户出生城市的前 3 个字符连接。对于用户的星球大战星球，使用用户姓氏的最后 2 个字符，与用户的汽车连接。

例子：

*   输入您的名字：汤姆
*   输入您的姓氏：约克
*   请输入您母亲的娘家姓：塞尔威
*   输入您出生的城市：威灵堡
*   输入您驾驶的第一辆车：奥迪
*   你是 KEAUDI 的 THOYO SEWEL

现在我只是遇到编译器错误

> 发现 8 个错误：文件：J:\CS Projects\NameGenerator.java [行：15] 错误：无法解析输入
> 
> 文件：J:\CS Projects\NameGenerator.java [line: 18] 错误：java.util.Scanner 类型中的方法 nextLine() 不适用于参数 (int, int)
> 
> 文件：J:\CS Projects\NameGenerator.java [行：19] 错误：last1 无法解析为变量
> 
> 文件：J:\CS Projects\NameGenerator.java [行：19] 错误：end 无法解析为变量
> 
> 文件：J:\CS Projects\NameGenerator.java [行：22] 错误：java.util.Scanner 类型中的方法 nextLine() 不适用于参数 (int, int)
> 
> 文件：J:\CS Projects\NameGenerator.java [行：25] 错误：java.util.Scanner 类型中的方法 nextLine() 不适用于参数 (int, int)
> 
> 文件：J:\CS Projects\NameGenerator.java [行：31] 错误：Starwarsname 无法解析为变量
> 
> 文件：J:\CS Projects\NameGenerator.java [行：34] 错误：Starwarsname 无法解析为变量

我一遍又一遍地修改了这个程序，我被卡住了。谁能指出我正确的方向或告诉我我做错了什么。先感谢您。

```
import java.util.*;

 public class NameGenerator {
     static Scanner wars = new Scanner(System.in);

     public static void main(String[] args) {
         //Prompt for User's Name
         String first,last,mother,city,car;

         System.out.printf("Please state your First Name");
         first= wars.Line(0,2);

         System.out.printf("Please state your Last name");
         last=wars.nextLine(0,1);
         last1=wars.nextLine(-1,end);

         System.out.printf("Please state your mothers maiden name");
         mother=wars.nextLine(0,1);

         System.out.printf("Please state the city you were born in ");
         city=wars.nextLine(0,2);

         System.out.printf("Please state your first car");
         car=wars.nextLine();

         Starwarsname=first+last + mother + city  + "of" + last + car ;

         System.out.println("In a galaxy far, far away you are known as " + Starwarsname + "        MAY THE FORCE be with you!");
     }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T04:46:29.070

您错误地使用了扫描仪。它应该是这样的：

```
first = wars.nextLine(); 
```

如果您只想要 first 的前两个字符，则：

```
first = first.substring(0,2); 
```

与您的其余字符串相同。您无法从使用扫描仪类中获取子字符串。Scanner 类仅扫描您的输入。使用 String.substring 方法（如上所示）获取子字符串。

编辑：另外，您正在尝试使用一些未声明的变量。确保先将变量“Starwarsname”声明为字符串，然后再将其分配给某个对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T04:48:01.157

更改语句具有

```
wars.nextLine(0,1); 
```

至

```
wars.nextLine(); 
```

以后使用

```
str.substring(beginIndex, endIndex) 
```

String 的方法来获取您想要的输入字符串的任何部分，连接并打印它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T04:54:17.883

```
Error: end cannot be resolved to a variable 
```

表示您从未声明过该变量`end`。`String end;`在使用每个变量之前，请确保有一条类似的行。

```
Error: The method nextLine() in the type java.util.Scanner is not applicable for the arguments (int, int) 
```

表示`nextLine()`不能接受任何参数（参见[javadocs](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextLine%28%29)）。如果您想从输入中获取子字符串，请执行类似`wars.nextLine().substring(0,2)`. 此外，这两个数字都必须是正数（代码中的 -1 将导致`ArrayOutOfBoundsException`）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T04:55:39.853

使用下面的代码并测试它......我也做了测试。

关注点：

*   你没有声明一些变量

*   您没有在 Scanner API 中检查方法名称。请检查java doc。

请检查并告诉

```
import java.util.*;

public class NameGenerator {
    static Scanner wars = new Scanner(System.in);

    public static void main(String[] args) {

        //Prompt for User's Name
        String first, last, mother, city, car,Starwarsname,last1;
        int end=0;

        System.out.printf("Please state your First Name");
        first = wars.nextLine();//wars.Line(0, 2);

        System.out.printf("Please state your Last name");
        last = wars.nextLine();
//        last1 = wars.nextLine();

        System.out.printf("Please state your mothers maiden name");
        mother = wars.nextLine();

        System.out.printf("Please state the city you were born in ");
        city = wars.nextLine();

        System.out.printf("Please state your first car");
        car = wars.nextLine();

        Starwarsname = first +" "+ last +" "+ mother +" "+ city + " of " + last +" "+ car;
        System.out.println("In a galaxy far, far away you are known as " + Starwarsname +
                           "        MAY THE FORCE be with you!");
    }
} 
```

# jquery - jQuery在聚光灯后重置CSS

> ID：15424847
> 
> 赞同：0
> 
> 时间：2013-03-15T04:37:29.023
> 
> 标签：jquery, css, function

我对 jQuery 有点陌生，所以我会尽力解释

所以我有一个聚光灯脚本，里面是一个按钮。我设法改变了字体大小，但是当用户关闭聚光灯时，按钮的字体大小仍然是相同的大小“500%”。如何将其更改回默认字体大小？

谢谢你

```
jQuery(document).ready(function(){
    jQuery('#community-wrap .community-status').click(function(){
        jQuery("#community-wrap .community-status .button").css({"font-size":"500%"});
        jQuery(this).spotlight();

    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:43:15.540

您需要自己处理退出事件并重置它：

```
jQuery(document).ready(function(){
    jQuery('#community-wrap .community-status').click(function(){
        jQuery("#community-wrap .community-status .button").css({"font-size":"500%"});
        jQuery(this).spotlight({
             onHide: function(){
                 jQuery("#community-wrap .community-status .button").css({"font-size":"100%"});
             }
        });

    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:50:40.403

你的代码也有答案，你是如何关闭聚光灯的？如果您使用 jquery 关闭以下代码将用于重置您的按钮字体大小

```
$.('.close').click(function(){
$("#community-wrap .community-status .button").css({"font-size":"put-your default size"});
} 
```

# python - 感兴趣的区域 opencv python

> ID：15424852
> 
> 赞同：18
> 
> 时间：2013-03-15T04:38:11.793
> 
> 标签：python, image, opencv, image-processing, roi

我正在尝试使用 opencv python 获取图像区域（ROI）。使用的opencv版本是2.4.3。但是，当我尝试调用 API

```
cv2.SetImageROI 
```

它返回此错误

```
AttributeError: 'module' object has no attribute 'SetImageROI' 
```

同样在检查文档时，它似乎暗示这个 api 是一个遗留的 python 函数。 [http://docs.opencv.org/2.4.3/search.html?q=setimageroi](http://docs.opencv.org/2.4.3/search.html?q=setimageroi)

我不确定如何在 python 中使用当前版本的 opencv 来获得 ROI。有人可以建议如何去做吗？

谢谢

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-15T06:32:34.770

好吧，进一步分析发现，cv2既然已经支持numpy数组结构，就不再需要任何API，整个图像都可以在数组本身中进行操作。例如：

```
img = cv2.imread('image.png')
img = img[c1:c1+25,r1:r1+25] 
```

这里c1是左侧列像素位置，r1是对应的行位置。img 现在将像素内的图像指定为 ROI。

编辑：这里解释得很好，[如何在 python 中使用 opencv 复制图像区域？](https://stackoverflow.com/questions/9084609/how-to-copy-a-image-region-using-opencv-in-python)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2019-10-03T03:01:48.750

这是从图像中选择 ROI 的可视化

```
-------------------------------------------
|                                         | 
|    (x1, y1)      w                      |
|      ------------------------           |
|      |                      |           |
|      |                      |           | 
|      |         ROI          | h         |  
|      |                      |           |   
|      |                      |           |   
|      |                      |           |       
|      ------------------------           |   
|                           (x2, y2)      |    
|                                         |             
|                                         |             
|                                         |             
------------------------------------------- 
```

考虑`(0,0)`图像的左上角，从左到右为 x 方向，从上到下为 y 方向。如果我们有一个 ROI`(x1,y1)`的左上角和`(x2,y2)`右下角顶点，我们可以使用 Numpy 切片来裁剪图像：

```
ROI = image[y1:y2, x1:x2] 
```

但通常我们不会有右下角的顶点。在典型情况下，我们很可能会在迭代轮廓时`(x,y,w,h)`获得 ROI 的边界框坐标[`cv2.boundingRect()`](https://docs.opencv.org/2.4/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=boundingrect#boundingrect)

```
cnts = cv2.findContours(grayscale_image, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)
cnts = cnts[0] if len(cnts) == 2 else cnts[1]

for c in cnts:
    x,y,w,h = cv2.boundingRect(c)
    ROI = image[y:y+h, x:x+w] 
```

从 OpenCV v2.2 开始，Numpy 数组被天真地用于显示图像。这种用于提取 ROI 的 Numpy 切片方法可能不适用于旧版本

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-03-05T16:37:52.037

如[文档](http://docs.opencv.org/2.4.3/modules/core/doc/old_basic_structures.html?highlight=setimageroi#cv.SetImageROI)中所述，关于您收到的错误消息，您需要导入适当的模块，然后调用`SetImageROI()`方法：

```
import cv
cv.SetImageROI(imag, rect) 
```

# php - 无法在服务器上下载 XML 文件，在其他服务器上工作正常

> ID：15424856
> 
> 赞同：0
> 
> 时间：2013-03-15T04:38:22.373
> 
> 标签：php

我有一个应用程序成功运行了几个月，它依赖 cron 作业来获取空气污染统计数据的 xml 提要。自一月份以来它一直运行没有错误，但今天早上从 7:00 开始它还没有读取数据。相关代码如下：

```
<?php
define('FEED_URL', 'http://www.beijingaqifeed.com/BeijingAQI/BeijingAir.xml');
$contents = file_get_contents(FEED_URL);
if ($contents === false) echo "READ FAILED";
echo "FILE_GET_CONTENTS SIZE IS " . strlen($contents) . "<br>\n"; 
```

如果我在家里的机器上运行它，它可以工作：

```
FILE_GET_CONTENTS SIZE IS 21538 
```

如果它在我的服务器上运行，它不会：

```
FILE_GET_CONTENTS SIZE IS 0 
```

我已经在服务器站点获得支持确认，他们可以浏览 url 并查看 xml 数据，因此没有防火墙或任何阻止它的东西。而且，正如我所说，直到今天早上，它已经成功运行了 1000 多次（根据我的数据库中的条目来衡量），现在它总是失败。我与数据供应商没有任何联系，因此我无法从他们的角度进行调查。

谁能建议为什么这开始失败，以及我可以尝试做什么？我试过 fread() 和 file()，结果相同。

谢谢...

（我已经检查了 allow_url_fopen 是否打开）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T07:19:50.310

很可能有 500 错误，所以 - 他们这边。取决于他们使用什么，但许多管理员（如我）避免指出服务器错误，用无用的评论替换它们，或者干脆删除它们。这样做是为了防止入侵者，因为错误代码可能会将攻击者粘在我管理下的服务器上，如果它出现故障 - 我的错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:42:06.457

首先，我认为这将是权限，但事实并非如此。

换个服务器试试，是不是你的IP被封了？

```
<?php
function download($website){
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,$path);
    curl_setopt($ch, CURLOPT_FAILONERROR,1);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION,1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
    curl_setopt($ch, CURLOPT_TIMEOUT, 15);
    $retValue = curl_exec($ch);          
    curl_close($ch);
    return $retValue;
}

$XML = download('http://www.beijingaqifeed.com/BeijingAQI/BeijingAir.xml');
var_dump($XML); 
```

履行：

`wget http://www.beijingaqifeed.com/BeijingAQI/BeijingAir.xml`通过 SSH（如果可能）并查看响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T04:51:41.233

在这种情况下，可能是服务器上的某些东西阻止了 Your PHP ，可能是 OS update ，或者类似的东西。过去我也遇到过类似的问题，但是 mines 是关于无法杀死的守护进程，与 cron 作业相关联，所以，我和支持团队非常头疼要关闭它。在这种情况下，这对于进一步调查至关重要，这一行： FILE_GET_CONTENTS SIZE IS 21538 ，如果有人可以获得并阅读它，那就有问题了。这个答案可能根本没有帮助，但是，正如我所说，错误行是关键。

奇怪的是，我刚刚检查了 XML URL，它正常工作，应该是这样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T05:04:53.043

可能是权限问题。尝试添加以下内容`file_get_contents`以查看他们的回复

```
if (!empty($http_response_header))
{
  var_dump($http_response_header); 
  //to see what tou get back
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T00:37:20.607

这不是最终答案，但它在一定程度上澄清了一些事情。我尝试将文件上传到服务器并以相同的方式从那里读取它（http:/young-0/testfile.xml），它成功了。然后我尝试从服务器获取“ [http://www.beijingaqifeed.com](http://www.beijingaqifeed.com) ”——但失败了。因此，bom 是一条红鲱鱼，连接被我的提供商（谁说不是他们）阻止或该站点拒绝来自我的服务器的连接 - 感谢所有提供帮助的人。

现在我已经恢复使用 twitter 提要，它的可靠性要低得多，但确实具有我能够阅读它的优势。

# image - 及时切片视频帧

> ID：15424858
> 
> 赞同：0
> 
> 时间：2013-03-15T04:38:39.303
> 
> 标签：image, matlab, video, video-processing, volume

考虑到一个视频的所有视频帧在`t`时间`I(x,t)`（`I(y,t)`如何在 matlab 中实现这一点？我无法弄清楚如何进行切片？

编辑：到目前为止的代码

```
vid='Orca vs Great White Shark.avi';
vidobj=mmreader(vid);
numofframes=get(vidobj,'numberOfFrames');
disp(numofframes);
for i=1:25:numofframes
  vidframe=read(vidobj,i);
end
for k=1:numofframes
  mov(k).cdata = read(vidobj,k);
end 
```

到目前为止，我已经阅读了视频并将帧保存在 vidframes 中。我该如何进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T05:08:40.757

这是一个例子：

```
A = rand(3,3,3) 
```

终端：

```
A(:,:,1) =

    0.8147    0.9134    0.2785
    0.9058    0.6324    0.5469
    0.1270    0.0975    0.9575

A(:,:,2) =

    0.9649    0.9572    0.1419
    0.1576    0.4854    0.4218
    0.9706    0.8003    0.9157

A(:,:,3) =

    0.7922    0.0357    0.6787
    0.9595    0.8491    0.7577
    0.6557    0.9340    0.7431 
```

现在我假设第三维是时间。要获得切片，您需要使用挤压功能：

```
squeeze(A(1,:,:))' 
```

终端：

```
ans =

    0.8147    0.9134    0.2785
    0.9649    0.9572    0.1419
    0.7922    0.0357    0.6787 
```

挤压(A(:,1,:)) 将及时给出第一列。

# regex - 在flex中使用RegEx删除/替换文件名中的多个特殊字符

> ID：15424859
> 
> 赞同：0
> 
> 时间：2013-03-15T04:38:43.983
> 
> 标签：regex, apache-flex

我想删除或替换文件名中的特殊字符。

这是我的代码，它可以替换单个特殊字符。

```
// Remove special characters from the name.
var excludeChars:RegExp = /&/gi;
var revisedname:String=new String();

revisedname=newname.replace(excludeChars,"");
newname=new String();
newname=revisedname;

//sample Output: &filename --> filename 
```

但是如何在使用 RegExp 替换多个特殊字符时做到这一点。如何声明多个 RegEx。

例如：

```
// &file%name# --> filename 
```

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T05:07:02.880

如果您只想替换`&%#^`，您可以为这些创建一个字符类：

```
var excludeChars:RegExp = /[&%#^]/g; 
```

该`[]`符号创建了一个字符类，意思是“匹配这些字符中的任何一个”。这`g`使它成为全球性的。

# c - 运行进程的堆内存

> ID：15424865
> 
> 赞同：1
> 
> 时间：2013-03-15T04:39:28.263
> 
> 标签：c, command, heap-memory, ubuntu-10.04

其实我的代码有malloc。我正在使用 ubuntu 操作系统，我想知道使用了多少堆内存？

是否有任何命令可以让我找到正在运行的进程在 ubuntu OS 中使用了多少堆？

现在说 malloc 处于无限循环中，它在一个终端中运行并使用另一个终端我想知道该正在运行的进程占用了多少堆内存

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:45:18.417

你可以使用 /proc 文件系统

> /proc/pid/shmam

它会准确地告诉你它当时使用了多少内存。

有关详细输入，请参阅

> [https://serverfault.com/questions/48582/how-is-memory-usage-reported-in-linux](https://serverfault.com/questions/48582/how-is-memory-usage-reported-in-linux)
> [如何测量应用程序或进程的实际内存使用情况？](https://stackoverflow.com/questions/131303/linux-how-to-measure-actual-memory-usage-of-an-application-or-process)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T05:43:32.293

如果您真的想知道您的应用程序实际使用了多少内存，您需要在分析器中运行它。例如，**`valgrind`**可以让您了解使用的内存量，更重要的是，可以了解您的程序中可能存在的内存泄漏。

看看， http: [//valgrind.org/docs/manual/mc-manual.html](http://valgrind.org/docs/manual/mc-manual.html)

Valgrind 基本上是一个 x86 模拟器，它检查所有的内存读取和写入，拦截所有分配和释放内存的调用。valgrind 的 memcheck 工具可以检测到以下内容：

1）使用未初始化的内存，

2) 在内存被释放后读/写内存

3) 读/写 malloc'd 块的结尾

4) 读取/写入堆栈下方的不适当区域。

5) 内存泄漏

6) malloc/new/new[] 与 free/delete/delete[] 的不匹配使用

7) memcpy() 和相关函数中重叠src和dst指针

8) 双重释放内存

9) 将不可寻址字节传递给系统调用

# sublimetext2 - 如何将 Sublime 文本 GotToAnything 与选定文本一起使用

> ID：15424866
> 
> 赞同：0
> 
> 时间：2013-03-15T04:39:30.707
> 
> 标签：sublimetext2, sublimetext

Sublime text 2 GotToAnything 非常棒，我想在我的源代码中突出显示一个文件名，然后按 CTRL + P 它将自动选择该文件。我可以复制和粘贴。但有时它并不安静。

是否有任何插件可以快捷地做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:35:55.727

[GotoSelection](https://github.com/FordAldrich/GotoSelection)我没用过这个，但它似乎正是你想要的。

描述：*Sublime Text 的小插件，用选定的文本或当前单词预先填充 Goto Anything 覆盖*。

# jquery - 停止运行函数 jQuery

> ID：15424869
> 
> 赞同：0
> 
> 时间：2013-03-15T04:39:59.860
> 
> 标签：jquery, html, function

我需要在 jQuery 中停止一个函数，我试过`preventStop()`但我认为语法错误，这是代码：

```
function changeColor(curNumber){
        curNumber++;

        if(curNumber > 3){
            curNumber = 1;
        }

        $('body').removeClass().addClass('bgColor' + curNumber);
        setTimeout(function(){changeColor(curNumber)}, 600);
}
    changeColor(0); 
```

如您所见，我正在更改课程，现在，如果用户单击文档，我想停止该操作

```
$('body').click(function(event){
        event.stopPropagation();
    }) 
```

类似的东西对我不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T04:42:50.700

`setTimeout`返回一个计时器 ID：

```
var timer = null;

function changeColor(curNumber) {
    ...

    timer = setTimeout(function() {
        changeColor(curNumber)
    }, 600);
} 
```

您可以使用以下命令清除它`clearTimeout`：

```
$('body').click(function(event){
    if (timer !== null) {
        clearTimeout(timer);
    }
}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T04:43:37.970

如果您试图停止颜色的变化，那么您可以通过记住变量中的当前计时器然后停止它来做到这一点：

```
var timer;
function changeColor(curNumber){
    curNumber++;

    if(curNumber > 3){
        curNumber = 1;
    }

    $('body').removeClass().addClass('bgColor' + curNumber);
    timer = setTimeout(function(){changeColor(curNumber)}, 600);
}
changeColor(0);

$('body').click(function(event){
    clearTimeout(timer);
}) 
```

然后，您可以通过再次调用来`changeColor()`重新启动它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T04:41:28.473

你可以用它`return false;`来实现。

每当我们使用 return false 时，控件就会返回。其他语句不会执行。也就是说事件不会归档。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T04:45:31.593

两件事情：

1.  您应该使用`setInterval`代替`setTimeout`重复事件。

2.  这两个函数都返回一个可以分别传递给`clearTimeout`或传递的值`clearInterval`。

如果您`setInterval`在外部范围内调用并将其返回值存储在可访问的某个位置，则可以绑定 click 事件以`clearInterval`使用该值调用以停止重复回调。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-31T08:41:48.947

您可以使用`.finish();`-- [http://api.jquery.com/finish/](http://api.jquery.com/finish/) -- 来停止函数的运行。不确定这是否是最佳实践，因为它基本上是为了控制`Effects`，但它对我来说效果很好：

**你的代码会变成这样**

```
$('body').click(function(event){
        event.finish();
    }) 
```

这是一个模拟`.finish()`在比较输入值后如何停止函数运行的示例。

**[小提琴](http://jsfiddle.net/xa3sn/1/)**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T04:40:58.597

试试喜欢

```
$('body').click(function(event){
    event.preventDefault();
}) 
```

或者你可以试试

```
$('body').click(function(event){
    return false;
}) 
```

# ruby-on-rails - 如何使这项工作成为 has_many ：通过

> ID：15424875
> 
> 赞同：0
> 
> 时间：2013-03-15T04:40:28.377
> 
> 标签：ruby-on-rails

我想知道在我花费大量时间重写我的代码可能无济于事之前，您是否可以给我一些关于如何使用 has_many :through 关联的建议。

我有一个用户模型，每个用户可以玩很多测验（因此会产生很多测验分数）。现在，玩家通过单击用户名开始游戏，这会触发对该用户（用户 has_many :questions）所做的所有测验问题的查询

```
 def startGame 

     user = User.find_by_name(params[:user])
     questions = user.questions

  end 
```

由于显而易见的原因，一个玩家不能两次玩同一个测验。尽管我想出了一种方法来防止这种情况发生，但我并没有采取有效的方法。有人建议我尝试关联表。`has_many :through`我用这个计划开始了那个关联表

User.rb（此用户是用户作为玩家，而不是用户作为测验制作者）

```
has_many :scores
has_many :quizzes, :through => :scores 
```

测验.rb

```
 has_many :scores
   has_many :users    :through => :scores 
```

分数

```
 belongs_to :user
   belongs_to :quiz 
```

问题是，目前没有测验模型或测验任何东西。测验实际上只是由问题 (Question.rb) 和答案 (Answer.rb) 组成。例如，每个用户`has_many :questions`和每个问题都`has_many :answers`像这样

用户.rb

```
has_many :questions 
```

问题.rb

```
has_many :answers 
```

那么我可以用什么来制作 Quiz 模型（或任何我称之为的模型）？

我想到的一个想法是制作一个 Quiz.rb 模型并做

```
has_many :questions 
```

这意味着 Question.rb 属于 User.rb 和 Quiz.rb。

然后我可以对`has_many :through`用户、测验和分数进行上述操作吗？如果是这样，Score 将有一个 user_id（用于玩家）和一个 quiz_id（用于测验），但由于整个关联的目的是防止用户两次玩同一个测验，我想知道如何才能做到使用以下代码。

```
 def startGame

   user = User.find_by_name(params[:user])  #this user is the quiz creator
   questions = user.questions
     .....
    #I want to check right here if they've already played the quiz. how to do it with the has_many :through of Quiz, Score, User (as player)

  end 
```

设置了 user.rb（玩家）、score.rb、quiz.rb 后，我将如何检查他们在这种情况下是否玩过这个特定的测验。

另外，如果我制作测验模型并做 has_many :questions，我是否必须使用多态性，因为 user.rb 也有 has_many :questions？

更新：我想检查他们是否已经在该`def startGame`方法中玩过，如果有的话，不要让他们继续游戏。即，我不想等到保存分数的时候才查看该测验的分数是否已经保存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T04:47:16.153

你的代码看起来已经很好了。如果您想阻止任何玩家多次进行测验，您可以将用户和测验的任意组合设为唯一。您可以将此添加到您的分数迁移中：

```
add_index :scores, [:user_id, :quiz_id], unique: true 
```

并将其添加到您的分数模型中：

```
validates_uniqueness_of :user_id, scope: quiz_id 
```

# powershell - 格式表的标记字符串

> ID：15424885
> 
> 赞同：1
> 
> 时间：2013-03-15T04:41:07.593
> 
> 标签：powershell, string-parsing

我正在尝试在 Powershell 中做一些应该很简单的事情，但我一生都无法弄清楚。我有一个看起来像这样的日志文件：

```
item1:some text 1:more junk I don't care about.
item2:some text 2:more junk I don't care about.
item3:some text 3:more junk I don't care about.
... 
```

我想使用 Powershell 拆分“：”，获取前两项，然后以某种方式将结果转换为我可以通过管道传输到 Format-Table 的内容。最终结果将像这样输出：

```
Column A           Column B
--------           --------
item1              some text 1
item2              some text 2
item3              some text 3
... 
```

我绝不是 Powershell 专家，所以请随时清理我的代码。这是我目前拥有的（我尝试了几种变体）：

```
Get-Content C:\Temp\test.log | %{
    $data = $_.split(":"); 
    $hashString = 'a = ' + $data[0] + " `n b = " + $data[1]; 
    ConvertFrom-StringData -StringData $hashString
} | ft @{Label="Column A"; Expression={$_.a}},  @{Label="Column B"; Expression={$_.b}} -auto 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T07:57:15.077

我会为此使用 Import-Csv ... :)

```
Import-Csv -Path your.log -Delimiter : -Header ColumnA, ColumnB 
```

您可以使用任何字符作为分隔符，包括冒号。

# ruby-on-rails - 如何在rails中创建一个ajax回调函数

> ID：15424890
> 
> 赞同：0
> 
> 时间：2013-03-15T04:41:53.013
> 
> 标签：ruby-on-rails, ajax-on-rails

我是 Rails 和 Rails 上的 ajaxification 的新手：我在编写 ajax 回调函数时遇到了问题。例如，如果我正在为 delete 方法编写回调函数并在 applicaton.js 中为 ajax 编写回调代码，那么当我将 format.js 写入此方法时它可以正常工作

```
format.js { render :nothing => true } 
```

但我想要的是：这个**format.js**有效，回调函数也应该有效。这该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T05:44:16.377

你能简单地试试吗

> format.js { 渲染 :json => {} }

代替

> format.js { 渲染 :nothing => true }

这样你的回调函数就会被调用。

# python - 在 Python 中创建词典和扫描仪

> ID：15424895
> 
> 赞同：5
> 
> 时间：2013-03-15T04:42:22.413
> 
> 标签：python, lexicon

我是编码领域的新手，我没有受到非常热烈的欢迎。我一直在尝试通过在线教程[http://learnpythonthehardway.org/book/](http://learnpythonthehardway.org/book/)学习 python 。在练习 48 和 49 之前，我一直在努力读完这本书。这就是他让学生放松并说“你想办法”的地方。但我根本做不到。我知道我需要创建一个可能单词的词典，并且我需要扫描用户输入以查看它是否与词典中的任何内容匹配，但仅此而已！据我所知，我需要创建一个名为 lexicon 的列表：

```
lexicon = [
    ('directions', 'north'),
    ('directions', 'south'),
    ('directions', 'east'),
    ('directions', 'west'),
    ('verbs', 'go'),
    ('verbs', 'stop'),
    ('verbs', 'look'),
    ('verbs', 'give'),
    ('stops', 'the'),
    ('stops', 'in'),
    ('stops', 'of'),
    ('stops', 'from'),
    ('stops', 'at')
] 
```

那正确吗？我不知道下一步该怎么办？我知道列表中的每个项目都称为元组，但这对我来说并没有任何意义。如何获取原始输入并将其分配给元组？你知道我的意思？因此，在练习 49 中，他导入了词典并在 python 内部打印 lexicon.scan("input") 并返回元组列表，例如：

```
from ex48 import lexicon
>>> print lexicon.scan("go north")
[('verb', 'go'), ('direction', 'north')] 
```

'scan()' 是预定义函数还是他在词典模块中创建了该函数？我知道如果你使用'split()'，它会创建一个包含输入中所有单词的列表，但是它如何将'go'分配给元组（'verb'，'go'）？

我是不是差远了？我知道我问了很多，但我到处搜索了几个小时，但我无法自己解决这个问题。请帮忙！我会永远爱你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-08T02:35:29.110

根据 ex48 指令，您可以为每种单词创建几个列表。这是第一个测试用例的示例。返回的值是一个元组列表，因此您可以为给定的每个单词附加到该列表。

```
direction = ['north', 'south', 'east', 'west', 'down', 'up', 'left', 'right', 'back']

class Lexicon:
    def scan(self, sentence):
        self.sentence = sentence
        self.words = sentence.split()
        stuff = []
        for word in self.words:
            if word in direction:
                stuff.append(('direction', word))
        return stuff

lexicon = Lexicon() 
```

他指出，数字和异常的处理方式不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T04:49:21.507

我不会使用列表来制作词典。你正在将单词映射到它们的类型，所以制作一个字典。

这是我可以给出的最大提示，而无需编写整个内容：

```
lexicon = {
    'north': 'directions',
    'south': 'directions',
    'east': 'directions',
    'west': 'directions',
    'go': 'verbs',
    'stop': 'verbs',
    'look': 'verbs',
    'give': 'verbs',
    'the': 'stops',
    'in': 'stops',
    'of': 'stops',
    'from': 'stops',
    'at': 'stops'
}

def scan(sentence):
    words = sentence.lower().split()
    pairs = []

    # Iterate over `words`,
    # pull each word and its corresponding type
    # out of the `lexicon` dictionary and append the tuple
    # to the `pairs` list

    return pairs 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T02:04:39.460

最后我做到了！

```
lexicon = {
    ('directions', 'north'),
    ('directions', 'south'),
    ('directions', 'east'),
    ('directions', 'west'),
    ('verbs', 'go'),
    ('verbs', 'stop'),
    ('verbs', 'look'),
    ('verbs', 'give'),
    ('stops', 'the'),
    ('stops', 'in'),
    ('stops', 'of'),
    ('stops', 'from'),
    ('stops', 'at')
    }

def scan(sentence):

    words = sentence.lower().split()
    pairs = []

    for word in words:
        word_type = lexicon[word]
        tupes = (word, word_type) 
        pairs.append(tupes)

    return pairs 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-03T22:56:13.540

这是一个非常酷的练习。我不得不研究了几天，终于让它工作了。这里的其他答案没有显示如何实际使用内部包含元组的列表，就像电子书所暗示的那样，所以它会这样做。所有者的回答不太有效，lexicon[word] 要求整数而不是 str。

```
lexicon = [('direction', 'north', 'south', 'east', 'west'),
           ('verb', 'go', 'kill', 'eat'),
           ('nouns', 'princess', 'bear')]
def scan():
    stuff = raw_input('> ')
    words = stuff.split()
    pairs = []

    for word in words:

        if word in lexicon[0]:
            pairs.append(('direction', word))
        elif word in lexicon[1]:
            pairs.append(('verb', word))
        elif word in lexicon[2]:
            pairs.append(('nouns', word))
        else: 
            pairs.append(('error', word))

    print pairs 
```

干杯!

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-06-02T19:56:40.893

像这里的大多数人一样，我是编码世界的新手，尽管我在下面附上了我的解决方案，因为它可能会帮助其他学生。

我已经看到了一些我可以实施的更有效的方法。但是，该代码处理了练习的每个用例，并且由于我是根据初学者的想法自己编写的，因此它不需要复杂的快捷方式，并且对于其他初学者来说应该很容易理解。

因此，我认为这可能对其他人的学习有益。让我知道你的想法。干杯!

```
class Lexicon(object): 

def __init__(self):
    self.sentence = []
    self.dictionary = {
        'north' : ('direction','north'),
        'south' : ('direction','south'),
        'east' : ('direction','east'),
        'west' : ('direction','west'),
        'down' : ('direction','down'),
        'up' : ('direction','up'),
        'left' : ('direction','left'),
        'right' : ('direction','right'),
        'back' : ('direction','back'),
        'go' : ('verb','go'),
        'stop' : ('verb','stop'),
        'kill' : ('verb','kill'),
        'eat' : ('verb', 'eat'),
        'the' : ('stop','the'),
        'in' : ('stop','in'),
        'of' : ('stop','of'),
        'from' : ('stop','from'),
        'at' : ('stop','at'),
        'it' : ('stop','it'),
        'door' : ('noun','door'),
        'bear' : ('noun','bear'),
        'princess' : ('noun','princess'),
        'cabinet' : ('noun','cabinet'),
    }

def scan(self, input):
    loaded_imput = input.split()
    self.sentence.clear()

    for item in loaded_imput:
        try:
            int(item)
            number = ('number', int(item))
            self.sentence.append(number)
        except ValueError:
            word = self.dictionary.get(item.lower(), ('error', item))
            self.sentence.append(word)

    return self.sentence
lexicon = Lexicon() 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-10-27T16:30:55.920

显然 Lexicon 是 ex48 文件夹中的另一个 python 文件。

> ```
> like: ex48
>       ----lexicon.py 
> ```

所以你正在从 ex 48 文件夹中导入 lexicon.py。

scan 是 lexicon.py 中的一个函数

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-12-24T02:45:00.357

这是我的 ex48 扫描词典版本。我也是编程初学者，python是我的第一语言。因此，该程序可能无法达到其目的，但经过多次测试，结果还是不错的。请随时改进代码。

# **警告**

如果你还没有尝试自己做这个练习，我鼓励你尝试而不用看任何例子。

# **警告**

我喜欢编程的一件事是，每次遇到问题时，我都会花很多时间尝试不同的方法来解决问题。我花了几个星期来尝试创建结构，作为一个初学者，我真的学到了很多东西，而不是从别人那里复制，这真的很有意义。

以下是我的词典并在一个文件中搜索。

```
direction = [('direction', 'north'),
            ('direction', 'south'),
            ('direction', 'east'),
            ('direction', 'west'),
            ('direction', 'up'),
            ('direction', 'down'),
            ('direction', 'left'),
            ('direction', 'right'),
            ('direction', 'back')
]

verbs = [('verb', 'go'),
        ('verb', 'stop'),
        ('verb', 'kill'),
        ('verb', 'eat')
]

stop_words = [('stop', 'the'),
            ('stop', 'in'),
            ('stop', 'of'),
            ('stop', 'from'),
            ('stop', 'at'),
            ('stop', 'it')
]

nouns = [('noun', 'door'),
        ('noun', 'bear'),
        ('noun', 'princess'),
        ('noun', 'cabinet')
]   

library = tuple(nouns + stop_words + verbs + direction)

#below is the search method with explanation.

def convert_number(x):
try:
    return int(x)
except ValueError:
    return None

def scan(input):
#include uppercase input for searching. (Study Drills no.3)
lowercase = input.lower()
#element is what i want to search.
element = lowercase.split()
#orielement is the original input which have uppercase, for 'error' type
orielement = input.split()
#library is tuple of the word types from above. You can replace with your data source.
data = library
#i is used to evaluate the position of element
i = 0
#z is used to indicate the position of output, which is the data that match what i search, equals to "i".
z = 0
#create a place to store my output.
output = []
#temp is just a on/off switch. Turn off the switch when i get any match for that particular input.
temp = True
#creating a condition which evaluates the total search needed to be done and follows the sequence by +1.
while not(i == len(element)):
    try:
        #j is used to position the word in the library, eg 'door', 'bear', 'go', etc which exclude the word type.
        j = 0
        while not (j == len(data)):
            #data[j][1] all the single word in library
            matching = data[j][1]
            #when the word match, it will save the match into the output.
            if (matching == element[i]):
                output.append(data[j])
                #print output[z]
                j += 1
                z += 1
                #to switch off the search for else: below and go to next input search. Otherwise they would be considerd 'error'
                temp = False
            #else is everything that is not in the library.
            else:
                while (data[j][1] == data [-1][1]) and (temp == True):
                    #refer to convert_number, to test if the input is a number, here i use orielement which includes uppercase
                    convert = convert_number(orielement[i])
                    #a is used to save number only.
                    a = tuple(['number', convert])
                    #b is to save everything
                    b = tuple(['error', orielement[i]])
                    #conver is number a[1] is the access the number inside, if it returns None from number then it wont append. 
                    if convert == a[1] and not(convert == None):    
                        output.append(a)
                        temp = False
                    else:
                        output.append(b)
                        #keep the switch off to escape the while loop!
                        temp = False
                #searching in next data
                j += 1
        #next word of input
        i += 1
        temp = True
    except ValueError:
        return output
else:
    pass
return output 
```

# winapi - 在 Windows 中启动的所有用户模式进程都通过 CreateProcess 吗？

> ID：15424900
> 
> 赞同：1
> 
> 时间：2013-03-15T04:42:41.950
> 
> 标签：winapi

物理cpu和HAL之上是否有任何瓶颈？或者是否有多种方式可以在 Windows XP、Vista 或 7 下启动进程，但在某些时候不涉及 CreateProcess？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T05:04:33.563

鉴于对您的问题的评论：

> 构建一个反可执行驱动程序，只是计划，想知道控制 createprocess 是否足够。

不，如果您关心安全性，那还不够。例如，下面有`NtCreateProcess`一个。而这些并不是唯一的。

系统提供的最佳方式是[文件系统过滤驱动程序](http://msdn.microsoft.com/en-us/library/windows/hardware/gg462968.aspx)。事实上，WDK 附带的示例只需要进行适度的更改即可完成您所要求的操作。由于您询问了 XP，如果您可以摆脱对 XP SP1 及更高版本的支持，则可以使用微过滤器。

[`PsSetLoadImageNotifyRoutine`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff559957.aspx)不幸的[`PsSetCreateProcessNotifyRoutine`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff559951.aspx)是只有通知。所以他们不允许对他们通知的事件做任何事情。你*真的*不应该试图解决这个问题。

在过去，我见过一些使用 SSDT 挂钩的巧妙实现，`ZwCreateSection`它们会将返回的句柄与一个显示错误消息的可执行文件交换。由于可执行文件本身会看到原始命令行，因此它可以显示一个很好的错误消息，通知用户该命令已被禁止，原因是 xyz。但是，对于 Vista 及更高版本，甚至在 XP 和 2003 64 位 (x64) 上，编写 SSDT 挂钩将变得更加困难。更不用说每个人都会对此皱眉头，它需要相当丰富的经验才能使它正确（即使那样它也经常有可能造成严重破坏的缺陷），并且您可能会忘记在 Windows 徽标过程中您可能渴望的任何认证.

结论：使用文件系统过滤驱动程序来拒绝访问不需要的可执行文件。使用微过滤器，学习曲线会适中，使用旧式过滤器，我建议您先学习几门课程，然后开始您的第一次尝试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T05:03:12.450

通过快速反汇编`CreateProcess`，它似乎做了两件*主要*的事情：

*   调用`NtCreateUserProcess`（这是系统调用 0xAA）在内核中实际创建进程结构（[PEB](http://en.wikipedia.org/wiki/Process_Environment_Block)等）
*   `NtResumeThread`通过调用(syscall 0x4F)启动新进程。

[Windows Internals 书籍](http://technet.microsoft.com/en-us/sysinternals/bb963901.aspx)当然很好地详细说明了这个过程。

我不确定内核中是否有指定的钩子可以让您创建反可执行驱动程序。过去，您可以挂钩[“系统服务调度表”](http://en.wikipedia.org/wiki/System_Service_Dispatch_Table)来更改这些系统调用的行为方式。但是现在，像[PatchGuard](http://en.wikipedia.org/wiki/Kernel_Patch_Protection)这样的技术会阻止驱动程序执行此操作（并允许系统运行）。

# apache-flex - 如何在 extjs 中自动适应网格中的列？

> ID：15424906
> 
> 赞同：3
> 
> 时间：2013-03-15T04:43:27.800
> 
> 标签：apache-flex, extjs

我们有一个 6 列的网格。一列需要比其他列更多的宽度。我们必须在没有任何水平滚动条的情况下查看该网格中的所有列。

我们为此尝试的代码是：

```
{
    xtype: 'grid',

    viewConfig: {    
        forceFit: true,    
    }

    columns: [{    
        header: 'column1'    
    }, {    
        header: 'column2'    
    },
    //...
    {    
        header: 'column6',    
        flex: 2    
    }]
} 
```

上面的代码在 IE8 中运行良好。但是在 IE9 和谷歌浏览器中，第 6 列的内容是不显示的。

谁能建议如何解决它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T08:32:15.343

去掉 forceFit，你可以只弯曲多个列，你可以在你想要更宽的列上使用 flex 2 vs 1。

```
{
    xtype: 'grid',

    columns: [{    
        header: 'column1',
        flex: 1   
    }, {    
        header: 'column2',
        flex: 1   
    },
    //...
    {    
        header: 'column6',    
        flex: 2    
    }]
} 
```

# angularjs - 来自外部 js 函数的 AngularJS 访问范围

> ID：15424910
> 
> 赞同：136
> 
> 时间：2013-03-15T04:43:39.017
> 
> 标签：angularjs, angularjs-scope

我正在尝试查看是否有一种简单的方法可以通过外部 javascript 函数访问控制器的内部范围（与目标控制器完全无关）

我在这里看到了其他几个问题

`angular.element("#scope").scope();`

将从 DOM 元素中检索范围，但我的尝试目前没有产生正确的结果。

这是jsfiddle：http: [//jsfiddle.net/sXkjc/5/](http://jsfiddle.net/sXkjc/5/)

我目前正在经历从普通 JS 到 Angular 的过渡。我试图实现这一目标的主要原因是尽可能保持我的原始库代码完整；节省了我将每个功能添加到控制器的需要。

关于如何实现这一目标的任何想法？也欢迎对上述小提琴发表评论。

* * *

## 回答 #1

> 赞同：230
> 
> 时间：2013-03-15T04:54:24.063

如果要从 angularjs 的控制之外（如 jquery/javascript 事件处理程序）对范围值进行任何更改，则需要使用[$scope.$apply() 。](http://docs.angularjs.org/api/ng.$rootScope.Scope#$apply)

```
function change() {
    alert("a");
    var scope = angular.element($("#outer")).scope();
    scope.$apply(function(){
        scope.msg = 'Superhero';
    })
} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/sXkjc/8/)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-08-16T03:19:09.173

自从我发布这个问题以来已经有一段时间了，但考虑到这似乎仍然得到的观点，这是我在过去几个月中遇到的另一个解决方案：

```
$scope.safeApply = function( fn ) {
    var phase = this.$root.$$phase;
    if(phase == '$apply' || phase == '$digest') {
        if(fn) {
            fn();
        }
    } else {
        this.$apply(fn);
    }
}; 
```

上面的代码基本上创建了一个`safeApply`调用该函数的`$apply`函数（如 Arun 的回答中所述），如果且只有 Angular 当前**没有通过**该`$digest`阶段。另一方面，如果 Angular**当前正在消化**东西，它会按原样执行函数，因为这足以向 Angular 发出信号以进行更改。

`$apply`在 AngularJs 当前处于其`$digest`阶段时尝试使用该功能时会发生许多错误。上面的`safeApply`代码是防止此类错误的安全包装器。

（注意：为了方便起见`safeApply`，我个人喜欢加入）`$rootScope`

例子：

```
function change() {
    alert("a");
    var scope = angular.element($("#outer")).scope();
    scope.safeApply(function(){
        scope.msg = 'Superhero';
    })
} 
```

演示：http: [//jsfiddle.net/sXkjc/227/](http://jsfiddle.net/sXkjc/227/)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-06-23T01:06:21.680

**另一种方法是：**

```
var extScope;
var app = angular.module('myApp', []);
app.controller('myController',function($scope, $http){
    extScope = $scope;
})
//below you do what you want to do with $scope as extScope
extScope.$apply(function(){
    extScope.test = 'Hello world';
}) 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-09-12T07:52:00.600

我们可以在加载后调用它

[http://jsfiddle.net/gentletech/s3qtv/3/](http://jsfiddle.net/gentletech/s3qtv/3/)

```
<div id="wrap" ng-controller="Ctrl">
    {{message}}<br>
    {{info}}
    </div>
    <a  onClick="hi()">click me </a>

    function Ctrl($scope) {
        $scope.message = "hi robi";
        $scope.updateMessage = function(_s){
            $scope.message = _s;    
        };
    }

function hi(){
    var scope = angular.element(document.getElementById("wrap")).scope();
        scope.$apply(function() {
        scope.info = "nami";
        scope.updateMessage("i am new fans like nami");
    });
} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-07-28T07:10:27.590

我已经很久没有问这个问题了，但这里有一个不需要 jquery 的答案：

```
function change() {
    var scope = angular.element(document.querySelector('#outside')).scope();
    scope.$apply(function(){
        scope.msg = 'Superhero';
    })
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-09-08T11:37:25.023

这是一个可重复使用的解决方案：http: [//jsfiddle.net/flobar/r28b0gmq/](http://jsfiddle.net/flobar/r28b0gmq/)

```
function accessScope(node, func) {
    var scope = angular.element(document.querySelector(node)).scope();
    scope.$apply(func);
}

window.onload = function () {

    accessScope('#outer', function (scope) {
        // change any property inside the scope
        scope.name = 'John';
        scope.sname = 'Doe';
        scope.msg = 'Superhero';
    });

}; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-09-06T10:19:52.593

你也可以试试：

```
function change() {
    var scope = angular.element( document.getElementById('outer') ).scope();
    scope.$apply(function(){
        scope.msg = 'Superhero';
    })
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-05-07T14:45:37.373

接受的答案很棒。我想看看 Angular 范围在`ng-repeat`. 问题是，Angular 将为每个重复的项目创建一个子范围。当调用在 original 上定义的方法时`$scope`，它会保留其原始值（由于 javascript 闭包）。但是，`this`指的是调用范围/对象。这很有效，只要你清楚什么时候`$scope`和`this`什么时候是一样的，什么时候是不同的。hth

这是一个说明差异的小提琴：[https ://jsfiddle.net/creitzel/oxsxjcyc/](https://jsfiddle.net/creitzel/oxsxjcyc/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-08-02T05:07:39.023

我是新手，如果是不好的做法，很抱歉。根据选择的答案，我做了这个功能：

```
function x_apply(selector, variable, value) {
    var scope = angular.element( $(selector) ).scope();
    scope.$apply(function(){
        scope[variable] = value;
    });
} 
```

我这样使用它：

```
x_apply('#fileuploader', 'thereisfiles', true); 
```

顺便说一句，对不起我的英语

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-06-30T05:16:23.843

```
<input type="text" class="form-control timepicker2" ng-model='programRow.StationAuxiliaryTime.ST88' /> 
```

访问范围值

假设 programRow.StationAuxiliaryTime 是一个对象数组

```
 $('.timepicker2').on('click', function () 
    {
            var currentElement = $(this);

            var scopeValues = angular.element(currentElement).scope();
            var model = currentElement.attr('ng-model');
            var stationNumber = model.split('.')[2];
            var val = '';
            if (model.indexOf("StationWaterTime") > 0) {
                val = scopeValues.programRow.StationWaterTime[stationNumber];
            }
            else {
                val = scopeValues.programRow.StationAuxiliaryTime[stationNumber];
            }
            currentElement.timepicker('setTime', val);
        }); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-03-23T18:25:02.820

我们需要使用 Angular Js 内置函数**$apply**来访问控制器函数之外的范围变量或函数。

这可以通过两种方式完成：

|*| 方法 1：使用 Id：

```
<div id="nameNgsDivUid" ng-app="">
    <a onclick="actNgsFnc()"> Activate Angular Scope</a><br><br>
    {{ nameNgsVar }}
</div>

<script type="text/javascript">

    var nameNgsDivVar = document.getElementById('nameNgsDivUid')

    function actNgsFnc()
    {
        var scopeNgsVar = angular.element(nameNgsDivVar).scope();
        scopeNgsVar.$apply(function()
        {
            scopeNgsVar.nameNgsVar = "Tst Txt";
        })
    }

</script> 
```

|*| 方法 2：使用 ng-controller 的 init ：

```
<div ng-app="nameNgsApp" ng-controller="nameNgsCtl">
    <a onclick="actNgsFnc()"> Activate Angular Scope</a><br><br>
    {{ nameNgsVar }}
</div>

<script type="text/javascript">

    var scopeNgsVar;
    var nameNgsAppVar=angular.module("nameNgsApp",[])
    nameNgsAppVar.controller("nameNgsCtl",function($scope)
    {
        scopeNgsVar=$scope;
    })

    function actNgsFnc()
    {
        scopeNgsVar.$apply(function()
        {
            scopeNgsVar.nameNgsVar = "Tst Txt";
        })
    }

</script> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-08-19T08:22:34.637

这就是我`CRUDManager class`在 Angular 控制器中初始化时所做的，后来传递给**控制器​​外部**定义的 jQuery 按钮单击事件：

**在角度控制器中：**

```
 // Note that I can even pass over the $scope to my CRUDManager's constructor.
        var crudManager = new CRUDManager($scope, contextData, opMode);

        crudManager.initialize()
            .then(() => {
                crudManager.dataBind();
                $scope.crudManager = crudManager;
                $scope.$apply();
            })
            .catch(error => {
                alert(error);
            }); 
```

**在控制器外部的 jQuery Save 按钮单击事件中：**

```
 $(document).on("click", "#ElementWithNgControllerDefined #btnSave", function () {
        var ngScope = angular.element($("#ElementWithNgControllerDefined")).scope();
        var crudManager = ngScope.crudManager;
        crudManager.saveData()
            .then(finalData => {
               alert("Successfully saved!");
            })
            .catch(error => {
               alert("Failed to save.");
            });
    }); 
```

当您的 jQuery 事件需要放置在**控制器之外**以防止它**触发两次**时，这尤其重要和有用。

# mysql - 获取 mysqldump：出现错误：1045：从 capistrano 任务部署时，用户 'dev'@'localhost' 的访问被拒绝（使用密码：YES）

> ID：15424911
> 
> 赞同：1
> 
> 时间：2013-03-15T04:13:58.040
> 
> 标签：mysql

仅出于上下文：

我正在使用 Capistrano 部署我的 WordPress 网站。特别是这个：[https ://github.com/markjquith/WP-Stack](https://github.com/markjquith/WP-Stack)

你基本上把它安装在你的开发机器上，在你的本地和远程机器上设置 SSH，这样它就可以通过 Capistrano 访问它需要访问的任何东西，给它登台和生产站点使用的数据库凭据，你很好去。

部署运行良好。同步数据库是我的问题所在。特别是当 Capistrano 运行以下代码时：

`mysqldump -u livesiteuser --result-file=/tmp/wpstack-26754.sql -h localhost -plivesiteuserpass livesitedbname`

这导致：

`mysqldump: Got error: 1045: Access denied for user 'livesiteuser'@'localhost' (using password: YES) when trying to connect`

但是，当我自己在远程服务器（生产所在的位置）上运行相同的代码时，它可以工作。

我真的不确定我做错了什么。我已经`livesiteuser`授予对所有内容的访问权限。哦，是的，使用 mysql`root`做同样的事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-28T20:18:12.270

解决方案：

如果您的密码是`mypa$$wor&`<-- 包含特殊字符

您需要将其键入为`mypa\$\$wor\&`

特殊字符需要用反斜杠转义，因为终端将特殊字符解释为命令的参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-26T07:51:32.280

我遇到过同样的问题。*使用--port=3316*包含端口号解决了这个问题。

# html - 子填充位于父元素之外

> ID：15424915
> 
> 赞同：32
> 
> 时间：2013-03-15T04:44:01.390
> 
> 标签：html, css

对子元素应用填充是使子元素在其包含父元素的边界上绘制。你能解释一下边距、内边距和内容宽度的大小考虑吗？

如果我们增加填充，为什么父母不考虑孩子的填充也调整到所有孩子的累积大小？

[http://jsfiddle.net/NkXUW/4/](http://jsfiddle.net/NkXUW/4/)

```
 <div>
       <ul>
          <li><a>srikanth</a>
           </li>
           <li><a>sunkist</a>
        </li>
        <li><a>sunday</a>
        </li>
    </ul>
    </div>

div {
     margin-top:90px;
    margin-left:90px;
    background-color:#676896;
   }
   ul {
     list-style-type:none;
   }
    ul li {
    display:inline-block;
   }
   a {
    background-color:#c34567;
    padding:10px 10px 10px 10px;
   } 
```

为了克服这个问题，我们需要考虑哪些编码实践。

好吧，伙计们，我得到了很多有效的答案。谁能解释基于子元素的父大小计算。在计算包含父母的大小时，考虑了孩子的哪些特征。什么时候考虑整个填充，什么时候不考虑？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-15T05:01:49.517

孩子过度绘制父母边界的原因是因为孩子是一个类型的标签，`<a>`默认情况下是`display:inline`（你可以看看你是否进入chrome开发者工具并查看计算样式）。内联元素显示为一行文本。所以它处理宽度和高度的方式以及所有这些都与块非常不同（例如，div 默认情况下是块）。

话虽如此，如果您将 a 的显示设置更改为`display:inline-block`您可以保留的内联属性，`<a>`但同时也可以获得块属性，即具有其父节点识别的填充和宽度和高度，这将然后[扩展](http://jsfiddle.net/NkXUW/11/)以适应它。

因此，没有任何关于此的最佳实践。唯一的最佳实践是了解每个显示属性的含义（即`inline`vs `block`vs `inline-block`）并正确使用它。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-15T04:57:47.267

采用`display:inline-block;`

```
a {
    background-color: #C34567;
    display: inline-block;
    padding: 10px;
} 
```

### [看演示](http://jsfiddle.net/NkXUW/8/)

> *   内联元素之前或之后没有换行符，并且它可以容忍它旁边的 HTML 元素。
> *   块元素的上下都有一些空格，并且不允许在其旁边有任何 HTML 元素。
> *   inline-block 元素作为 inline 元素放置（与相邻内容在同一行），但它的行为类似于块元素。

[http://www.w3schools.com/cssref/pr_class_display.asp](http://www.w3schools.com/cssref/pr_class_display.asp)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-18T05:33:04.570

无需更改`a`标签即可解决。只需将`overflow: hidden;`属性添加到`div`元素。

```
div {
  margin-top:90px;
  margin-left:90px;
  background-color:#676896;
  overflow: hidden; /*expends its height if not fixed*/
} 
```

在这里更新小提琴：http: [//jsfiddle.net/NkXUW/52/](http://jsfiddle.net/NkXUW/52/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-15T08:47:35.870

您必须根据需要添加`display: block;`到`<a>`元素以扩展父级。看到这个**[小提琴](http://jsfiddle.net/NkXUW/12/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T04:58:08.787

关于边距和填充之间的差异，请阅读[此](http://www.impressivewebs.com/difference-between-margins-padding-css/)内容也许对您有所帮助

我不认为这是正确`float`的`div wrapper`

工作[演示](http://jsfiddle.net/jhunlio/NkXUW/6/)

```
div {
    float:left;
    margin-top:90px;
    margin-left:90px;
    background-color:#676896;
} 
```

希望这对你有帮助..

# lotus-notes - Lotusscript 在 windows 目录中搜索子目录和文件。递归？

> ID：15424919
> 
> 赞同：2
> 
> 时间：2013-03-15T04:44:11.823
> 
> 标签：lotus-notes, lotus-domino, lotusscript

我正在尝试编写一个 LS 代理来扫描 Windows 中的目录，例如：'C:\' 中的任何文件和子目录。对于每个子目录，它将进入内部并搜索更多文件和子目录，并继续直到没有更多可查找。我习惯于编写递归代码来替换或删除长字符串中的字符，但对于这个我完全迷失了。下面是我的代码（它是来自 domino 帮助文件和我在 IBM 站点中找到的代码的混合）：

```
Sub Initialize
    Dim pathname As String, filename As String
    pathname = "C:\*.*"
    filename = Dir(pathname, 16)
    Print "Begin scan"
    Do While filename<>""
        If IsDir(pathname+filename)=True Then
            Print pathname+filename+" is a directory"
            'look for more directories and files in here
        Else
            Print filename+" is a file"
        End If
        filename=Dir()
    Loop
    Print "Finish scan"
End Sub

Function IsDir(Path As String) As Integer 
    Dim Void&
    Dim Result As Boolean
    On Error GoTo ErrorHandler
    Void=FileLen(Path)
    Result=False
    GoTo Over
ErrorHandler:
    Result=True
    Resume Over
Over:
    IsDir=Result
End Function 
```

我需要更改什么才能使代码在注释部分递归？（'在此处查找更多目录和文件）。我不只是想找到一个特定的文件或目录。我想要所有可用的东西。如果我能够做到这一点，那么我可以检索它们并保存到 NotesDocument 中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T10:33:12.280

我已经使用过[这个解决方案](http://www-01.ibm.com/support/docview.wss?uid=swg21317698)几次了，效果很好：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:47:46.673

首先，您不想递归地调用 Initialize。您需要一个将路径名传递到其中的函数。

其次，由于 DIR 函数的工作方式是有状态的，我认为您必须使用两个循环来执行此操作。在第一个循环中，您处理常规文件*并将*文件夹名称放入列表中。然后在第二个循环中，您浏览文件夹列表并调用递归函数，将路径传递给每个文件夹。

# jquery - 从 Javascript 函数手动关闭 JQuery 对话框 - Err

> ID：15424921
> 
> 赞同：0
> 
> 时间：2013-03-15T04:44:18.463
> 
> 标签：jquery, jquery-ui-dialog

我想从 JavaScript 函数中关闭一个 JQuery 对话框（包括在相同的 clasic asp 或 .js 文件中），但出现错误错误：在初始化之前无法调用对话框上的方法；试图调用方法“关闭”

这是由对话框加载并显示的文件的代码，如何使用外部或内部函数调用关闭打开的对话框，如果想再次打开它，如何不出现初始化错误？

```
<!DOCTYPE html>
<html>
<head>
    <title>Default2.asp</title>
<script src="/JQuery/jquery-1.9.1.js"></script>
<script src="/JQuery/jquery-ui.js"></script>    
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />

<script type="text/javascript">
$(function() {
    $('#Form2').submit(function(evt) {
        evt.preventDefault();
        $.ajax({
            url: "Default2.asp", 
            type: 'POST',
            data: $(this).serialize(),
            success: function(result) {
                $('#mydiv').html(result);
            }
        });
    });
});

function closeThis()
{
 // $("#mydiv").hide();
  $("#mydiv").dialog("close");
}
</script>

</head>
<body>
This is Default2.asp file
<a href="JavaScript:closeThis();">Close This Dialog</a>
<br><br>

<% 
Dim Name, Address
Name = Request.form("Name")
Address = Request.form("address")

Response.write("The Name was " & Name & " and Address was " & Address )
%>

<br><br>
<form ID=Form2 >
Name: <input type="text" name="Name"><br>
Address: <input type="text" name="address"><br><br>
<input type="submit" value="Submit">
This is just a test
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:46:33.227

尝试这个：

```
$(function() {
    $('#Form2').submit(function(evt) {
        evt.preventDefault();
        $.ajax({
            url: "Default2.asp", 
            type: 'POST',
            data: $(this).serialize(),
            success: function(result) {
                $('#mydiv').dialog("open").html(result);//<-- First open it here
            }
        });
    });
});

function closeThis()
{
    if($("#mydiv").dialog('isOpen'))
        $("#mydiv").dialog("close");
} 
```

阅读文档[http://api.jqueryui.com/dialog/#method-isOpen](http://api.jqueryui.com/dialog/#method-isOpen)

# sharepoint - Sharepoint 应用程序备份不起作用

> ID：15424924
> 
> 赞同：1
> 
> 时间：2013-03-15T04:44:26.840
> 
> 标签：sharepoint, sharepoint-2010

当我尝试备份共享点应用程序时。第一次很好。后来，它显示“正在备份”，但很久没有结果。我删除了备份/恢复过程，我检查了当前正在运行的作业，没有作业。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:43:00.917

请使用 Powershell 命令备份和还原 SharePoint 应用程序非常有用且有效。

这是采取这种行动的好方法。

# php - 使用 javascript 从表单中删除 onsubmit 值

> ID：15424926
> 
> 赞同：1
> 
> 时间：2013-03-15T04:44:42.170
> 
> 标签：php, javascript, jquery

我有一些带有 onsubmit="return false;" 的表单，例如：

```
<form id="form-nr-56" action="" method="post" onsubmit="return false;">
formstuff
</form> 
```

如果满足某些条件，我将通过javascript提交表单

```
$('#form-id').submit(); 
```

但我需要删除 onsubmit="return false;" 首先从有问题的表格。

怎么做？

编辑：我没有在 onsubmit 中使用 javascript 检查，因为表单验证使用了很多 ajax 请求和 setTimeout，所以它总是返回 false。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T04:46:58.713

在 jquery.com 文档上查看这里：http: [//api.jquery.com/removeAttr/](http://api.jquery.com/removeAttr/)

这个答案是你的技术问题。这里的其他一些回复以更合乎逻辑的方法回答它，其他方式可能更好地实现你想要做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T04:50:50.727

```
<script>
    if(//your codition here)
    {
       $('#form-id').submit();
       return false;
    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T04:46:38.127

```
 <script>

    //write your conditions and return false if not valid other wise otherwise 

   function example()
   {
       if your condition false 
        return false;

       $('#form-id').submit();

   }  

    </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T04:49:13.927

```
$('#form').on('submit', function(e) 
{
    e.preventDefault();
    // Do what you want before the form submits
} 
```

试试这个并检查。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T04:49:40.593

您可以使用 jQuery 停止提交，然后添加您的逻辑。

```
$('#form-id').on('submit', function(event) {
    event.preventDefault();
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T04:49:40.210

您不需要添加`onSubmit = "return false;"`

你可以这样做，如下所示，

```
$('#form-id').submit(function(e)
{
    e.preventDefault();
    var isTrue = false;

    //conditions.
    //set isTrue = true on all conditions validation.
    //and then return isTrue.
    return isTrue;

}); 
```

# css - 推特引导折叠导航栏不起作用

> ID：15424931
> 
> 赞同：0
> 
> 时间：2013-03-15T04:45:43.400
> 
> 标签：css, twitter-bootstrap

我是引导程序的新手，我正在使用最后一个版本。我想做一个简单的站点，以了解引导程序，但已经有一个我无法解决的问题。导航栏和图标似乎没问题，但是当我单击时，什么也没发生。我已经把我的完整代码放在下面。

```
<!-- <!DOCTYPE html>
 <html>
 <head>
         <meta charset="utf-8">
         <title>Getting started with Bootstrap</title>
         <link rel="stylesheet" href="css/bootstrap.css">
         <link rel="stylesheet" href="css/bootstrap-responsive.css">

 <script src="js/bootstrap.js"></script>
 </head>
 <body>-->

<div class="navbar">
   <div class="navbar-inner">
     <div class="container">

      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </a>

        <!-- Be sure to leave the brand out there if you want it shown -->
        <a class="brand" href="#">Site name</a>

        <!-- Everything you want hidden at 940px or less, place within here -->
        <nav class="nav-collapse collapse">
          <!-- .nav, .navbar-search, .navbar-form, etc -->
            <ul class="nav">
                  <li class="active"><a href="#">Home</a></li>
                  <li><a href="#">Link</a></li>
                  <li><a href="#">Link</a></li>
            </ul>

        </nav>

    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-06-17T16:56:37.103

我对使用 Bootstrap 也有些陌生，我想我可能已经找到了解决您问题的方法。看起来您下载了所有库，但您可能没有在脑海中包含所有 jquery、JS 和 Popper.js 链接。

```
 <!-- CSS only -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">

<!-- JS, Popper.js, and jQuery -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script> 
```

它也发生在我身上，因为我没有链接所有的库。因此，请检查是否有任何您没有在脑海中引用的库。

PS：对不起，我不使用下载版本的库，所以我不能具体告诉你选择哪些文件和库。

希望它仍然有帮助；）

# algorithm - 乐高积木 - 动态规划

> ID：15424945
> 
> 赞同：17
> 
> 时间：2013-03-15T04:47:04.060
> 
> 标签：algorithm, dynamic-programming

我正在尝试解决以下 DP 问题：

> 您有 4 种类型的乐高积木，尺寸分别为 1 * 1 * 1、1 * 1 * 2、1 * 1 * 3 和 1 * 1 * 4。假设您有无限数量的每种类型的积木。
> 
> 你想用这些块做一堵高 H 宽 M 的墙。墙上不应该有任何洞。你建造的墙应该是一个坚固的结构。坚固的结构意味着在不切割用于建造墙壁的任何乐高积木的情况下，不可能沿着任何垂直线将墙壁分开。块只能水平放置。有多少种方法可以建造墙？

这是我尝试的方法：用 abcd 表示 1 * 1 * 1, 1 * 1 * 2, 1 * 1 * 3 和 1 * 1 * 4 块。有效模式以粗体表示。无效的模式是可以被垂直线打破的。

> H=1 & W=3 #有效模式=1
> aa ab ba **c**
> 
> H=2 & W=3 #有效模式=9
> ![在此处输入图像描述](../Images/a4549b80687174e0bda2719d88b83ba4.png)

我试图找到重复模式以通过高度或宽度扩展它。即找到 H=3 & W=3 或 H=2&W=4 的值。

关于如何通过身高或体重来计算增长的任何输入？
PS 墙总是 H*W*1。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T06:33:07.707

**首先，让我们看看如果我们忽略保持它们连接的需要，我们可以建造多少 M*N 墙：**

我们可以分别处理每一行，然后将计数相乘，因为它们是独立的。

只有一种方法可以平铺 a`0*1`或`1*1`墙壁，并且平铺 an 的方式的数量是平铺...大小墙壁`n*1`的方式的总数，原因是这些墙可以通过移除最后一个瓷砖来获得的墙。`{n-1}*1``{n-4}*1``n*1`

这产生了一个四边形序列，[OEIS A000078](http://oeis.org/A000078)。所有`W*H`墙的数量是`a(w,h)=T(w)^h`。

**现在，计算实心墙的数量。**MBo 的回答已经包含了基本前提：

在最左边没有连接墙壁的地方分支。`A`ll W*H 墙的数量是原始`S`X*H 墙的数量乘以`A`ll`{W-X}*H`墙的数量，将 的所有可能值相加`X`，再加上`S`olid W*H 墙的数量：

```
A(W,H) = sum{X=1..{W-1}}(S(X,H)*A(W-X,H)) + S(W,H) 
```

作为最后一步，我们将`S(M,H)`要计算的值分开，并重复前面的公式：

```
S(W,H) = A(W,H) - sum_x( S(X,H)*A(W-X,H) ) //implicitly, S(1,H)=1

A(W,H) = T(W)^H

T(X)   = X > 0: T(X-1)+T(X-2)+T(X-3)+T(X-4)
         X = 0: 1
         X < 0: 0 
```

（证明 MBo 的公式是正确的）。

这也提供了`O(W^2)`一种计算算法`S`（假设适当的记忆和恒定时间算术运算）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-15T05:20:40.437

不难找到多个 1xW 的条纹（假设为 N(1,W)）。然后你可以找到所有（包括非实心）HxW 墙的数量 - 它是 A(H,W) = N(1,W)^H 任何非实心墙由左 H*L 墙和右 H* 组成(WL) 墙。似乎实心墙的数量是

`S(H,W) = A(H,W) - Sum(S(H, L) * A(H, W-L)) [L=1..W-1]`

S(H, L) * A(H, WL) 是在 L 垂直位置最左边的非实心墙的数量。第一个因素是实体墙的数量 - 消除重复变体的计数。

# iphone - Fecebook 访问令牌存储 用于 ouath 实施

> ID：15424947
> 
> 赞同：1
> 
> 时间：2013-03-15T04:47:05.047
> 
> 标签：iphone, ios, objective-c

我在我的 iphone 应用程序中使用 facebook 登录，并且可以从 Facebook API 访问一些基本详细信息，例如姓名、出生日期、电子邮件、用于创建用户的用户名。我想为每个用户存储访问令牌。在这方面需要你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:53:00.180

您可以延长访问令牌的持续时间

[https://developers.facebook.com/docs/howtos/login/extending-tokens/](https://developers.facebook.com/docs/howtos/login/extending-tokens/)

# java - 我应该在哪里跟踪我的 Java EE Web 应用程序版本

> ID：15424948
> 
> 赞同：3
> 
> 时间：2013-03-15T04:47:07.033
> 
> 标签：java, jakarta-ee, maven

在 Web 应用程序中，我应该在哪里提及和跟踪`version numbe`r？

我正在使用`maven`，它在`pom.xml`. 但是，我无法在打包为`war`. 但是，该版本号存储在文件名中为`applicationname-1.0.1.war`. 我想知道它是否存储在包装内的某个地方或任何方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T05:18:23.227

使用[maven 存档插件](http://maven.apache.org/shared/maven-archiver/examples/manifest.html)将其存储在 WARs Manifest 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T05:37:56.417

如果在 MANIFEST 中标记版本足以满足您的需求，那么您将需要像这样配置 maven-war-plugin：

```
 <build>
    <pluginManagement>
      <plugins>
        ...
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-war-plugin</artifactId>
          <version>2.3</version>
          <configuration>
            <archive>
              <manifest>
                <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
              </manifest>
              <manifestEntries>
                <Build-Repository-Rev>${SVN_REVISION}</Build-Repository-Rev>
                <Build-Time>${maven.build.timestamp}</Build-Time>
              </manifestEntries>
            </archive>
          </configuration>
        </plugin>
        ... 
```

manifestEntries 元素的子元素可以是任何东西，并将创建具有给定名称的条目。在此示例中，除了由“addDefaultImplementationEntries”创建的条目之外，还有使用“SVN_REVISION”环境变量和“maven.build.timestamp”属性创建的“Build-Repository-Rev”和“Build-Time”条目这将包括来自 ${project.version} 的“实施版本”条目集。

# mysql - 查询以选择开始和停止时间

> ID：15424950
> 
> 赞同：1
> 
> 时间：2013-03-15T04:47:20.973
> 
> 标签：mysql

我有一些这样的数据

```
[On]  [Time]
  1    157
  1    158
  0    159*
  1    170*
  1    171
  0    192*
  0    231
  1    294*
  1    295
 ...   ... 
```

我想选择有 * 所以从第一个 0 到下一个 1 的时间

输出应该看起来像

```
[Time1]  [Time2]
  159      170
  192      294
  ...      ... 
```

任何建议都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T05:32:15.720

这个相当棘手的自连接做到了 - [**SQLFiddle Demo**](http://www.sqlfiddle.com/#!2/0a026/1)：

```
SELECT min(t1) t1, t2
FROM (
    SELECT s1.time t1, min(s2.time) t2
    FROM mytable s1
    JOIN mytable s2
      ON s1.on   < s2.on
     AND s1.time < s2.time
    GROUP BY s1.time
) x
GROUP BY t2 
```

# xml - com.adwhirl.AdWhirlLayout 无法实例化

> ID：15424952
> 
> 赞同：0
> 
> 时间：2013-03-15T04:47:36.907
> 
> 标签：xml, admob, instantiation, adwhirl

我有一个使用 AdWhirl 的应用程序。由于 Admob 以更先进的方式执行相同的任务，我想从 AdWhirl 切换到 Admob。我已经更改了 layout/main.xml，现在图形布局崩溃了。当我在手机上运行应用程序时，它会被安装，但在启动过程中它会进入 ANR 并关闭。

在我的 manifest.xml 我有这个：

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    android:versionName="1.0" android:versionCode="1" package="com.recetas.two">
    <uses-sdk android:minSdkVersion="4"/>

    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.READ_PHONE_STATE"></uses-permission>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"></uses-permission>

    <supports-screens android:largeScreens="true" android:anyDensity="true" 
        android:smallScreens="true" android:resizeable="true" 
        android:normalScreens="true"></supports-screens>

   <application android:label="@string/app_name" android:icon="@drawable/cauldron">
        <activity android:label="@string/app_name" android:name=".RecetasTwo">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="com.mobfox.sdk.InAppWebView"></activity> 
        <meta-data android:name="ADWHIRL_KEY" android:value="*********************"/> 

        <activity android:name="com.google.ads.AdActivity"
               android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/>

        <activity android:name=".primerareceta"
                  android:label="@string/app_name"/>
        <activity android:name=".segundareceta" 
```

我的 main.xml 文件包含所有这些内容

```
 <?xml version="1.0" encoding="utf-8"?>
<!-- This file is /res/layout/main.xml -->

<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<!-- 
<com.adwhirl.AdWhirlLayout 
    android:id="@+id/adwhirl_layout" 
    android:layout_width="fill_parent"
    android:layout_alignParentBottom="true"
    android:layout_height="53dp">
</com.adwhirl.AdWhirlLayout> 
-->

<com.google.ads.AdView android:id="@+id/adView"
                         xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
                         android:layout_width="wrap_content"
                         android:layout_height="wrap_content"
                         android:layout_gravity="bottom" 
                         ads:adUnitId="a14ea442d20988d"
                         ads:adSize="BANNER"
                         ads:testing="false"
                         ads:loadAdOnCreate="true"/>

<!-- 
<com.mobfox.sdk.MobFoxView
            android:id="@+id/mobFoxView"
            android:layout_width="fill_parent"
            android:layout_height="50dp"
            publisheID="f9205cd278ce092837a01cc4ca4af6a"/>
 -->            

<ScrollView 
android:id="@+id/scroll" 
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_above="@+id/adView">

<LinearLayout 
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<Button android:id="@+id/primerarecetaPlayerBtn"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/custom_button_blue"
android:text="@string/primerareceta"
android:textColor="#ffffff"/>

<Button android:id="@+id/segundarecetaPlayerBtn"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/custom_button_yellow"
android:text="@string/segundareceta"
android:textColor="#ff0000"/>

<Button android:background="@drawable/custom_button_blue" 
android:id="@+id/tercerarecetaPlayerBtn"
android:textColor="#ffffff"
android:layout_height="wrap_content"
android:layout_width="fill_parent" 
android:text="@string/tercerareceta"/>

<Button android:id="@+id/cuartarecetaPlayerBtn"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/custom_button_yellow"
android:text="@string/cuartareceta"
android:textColor="#ff0000"/>

<Button android:id="@+id/quintarecetaPlayerBtn"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/custom_button_blue"
android:text="@string/quintareceta"
android:textColor="#ffffff"/>

<Button android:id="@+id/sextarecetaPlayerBtn"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/custom_button_yellow"
android:text="@string/sextareceta"
android:textColor="#ff0000"/>

<Button android:id="@+id/septimarecetaPlayerBtn"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/custom_button_blue"
android:text="@string/septimareceta"
android:textColor="#ffffff"/>

<Button android:id="@+id/octavarecetaPlayerBtn"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/custom_button_yellow"
android:text="@string/octavareceta"
android:textColor="#ff0000"/>

<Button android:id="@+id/novenarecetaPlayerBtn"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/custom_button_blue"
android:text="@string/novenareceta"
android:textColor="#ffffff"/>

<Button android:id="@+id/decimarecetaPlayerBtn"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/custom_button_yellow"
android:text="@string/decimareceta"
android:textColor="#ff0000"/>

<Button android:id="@+id/undecimarecetaPlayerBtn"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/custom_button_blue"
android:text="@string/undecimareceta"
android:textColor="#ffffff"/>

<Button android:id="@+id/duodecimarecetaPlayerBtn"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/custom_button_yellow"
android:text="@string/duodecimareceta"
android:textColor="#ff0000"/>

<Button android:id="@+id/decimotercerarecetaPlayerBtn"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/custom_button_blue"
android:text="@string/decimotercerareceta"
android:textColor="#ffffff"/>

<Button android:id="@+id/decimocuartarecetaPlayerBtn"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/custom_button_yellow"
android:text="@string/decimocuartareceta"
android:textColor="#ff0000"/>

<Button android:id="@+id/decimoquintarecetaPlayerBtn"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/custom_button_blue"
android:text="@string/decimoquintareceta"
android:textColor="#ffffff"/>

<Button android:id="@+id/decimosextarecetaPlayerBtn"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/custom_button_yellow"
android:text="@string/decimosextareceta"
android:textColor="#ff0000"/>

<Button android:id="@+id/decimoseptimarecetaPlayerBtn"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/custom_button_blue"
android:text="@string/decimoseptimareceta"
android:textColor="#ffffff"/>

<Button android:id="@+id/decimoctavarecetaPlayerBtn"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/custom_button_yellow"
android:text="@string/decimoctavareceta"
android:textColor="#ff0000"/>

<Button android:id="@+id/decimonovenarecetaPlayerBtn"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/custom_button_blue"
android:text="@string/decimonovenareceta"
android:textColor="#ffffff"/>

<Button android:id="@+id/vigesimarecetaPlayerBtn"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/custom_button_yellow"
android:text="@string/vigesimareceta"
android:textColor="#ff0000"/>

</LinearLayout>
</ScrollView>
</RelativeLayout> 
```

所有这些都以这种方式在我的主 java 文件中使用：

```
 package com.recetas.two;

//import android.R.layout;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.Intent;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import android.content.pm.PackageManager.NameNotFoundException;
import android.speech.tts.TextToSpeech.OnInitListener;
//import android.text.Layout;
import android.text.SpannableString;
import android.text.util.Linkify;
import android.net.Uri;
import android.os.Bundle;
//import android.view.Gravity;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
//import android.view.ViewGroup;
//import android.view.ViewGroup;
//import android.view.ViewGroup.LayoutParams;
import android.widget.Button;
import android.widget.LinearLayout;
//import android.widget.LinearLayout;
//import android.widget.RelativeLayout;
import android.widget.TextView;
//import com.adwhirl.AdWhirlLayout;
//import com.adwhirl.AdWhirlLayout.AdWhirlInterface;
//import com.adwhirl.AdWhirlManager;
//import com.adwhirl.AdWhirlTargeting;
import com.flurry.android.FlurryAgent;
import com.google.ads.*;

public class RecetasTwo extends Activity implements OnInitListener {

private AdView adView;  
//DefiniciÛn del men˙ en menu.xml
@Override
public boolean onCreateOptionsMenu(Menu menu){

    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.menu, menu);
    return true;
    }

//Lo que hace cada opciÛn del menu
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {
    case R.id.Otras_apps:
        startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("https://play.google.com/store/apps/developer?id=Pedro+Santangelo")));
        return true;
    case R.id.Salir:
        FlurryAgent.onEndSession(this);
        this.finish();
        return true;
    case R.id.Acerca:
        AlertDialog builder;
            try {
                builder = AboutDialogBuilder.create(this);
                builder.show();
            } catch (NameNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
    default:
        return super.onOptionsItemSelected(item);
    }
}

//para cerrar la sesiÛn de Flurry
public void onStop()
{
   super.onStop();
   FlurryAgent.onEndSession(this);
}

@Override
public void onDestroy() {
  if (adView != null) {
    adView.destroy();
  }
  super.onDestroy();
}

//Definicion de la interfaz de usuario
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

adView = new AdView(this, AdSize.BANNER, "a150b14b7d531ff");    

// Lookup your LinearLayout assuming it's been given
// the attribute android:id="@+id/mainLayout"
LinearLayout layout = (LinearLayout)findViewById(R.id.scroll);

// Add the adView to it
layout.addView(adView);

// Initiate a generic request to load it with an ad
adView.loadAd(new AdRequest());

/* La manera de invocar AdWhirl ha cambiado
// Hay que quitar los dos comentarios para habilitar AdWhirl    
AdWhirlLayout mAdWhirlLayout = (AdWhirlLayout) findViewById(R.id.adwhirl_layout); 
//This is an important step in order to use the custom event created. 
mAdWhirlLayout.adWhirlInterface=(new CustomEvents(mAdWhirlLayout, this, getApplicationContext())); 
*/
/*
AdWhirlLayout adWhirlLayout = new AdWhirlLayout(this, "01dffd1ea64f44dca764f38c3ead174c");
RelativeLayout.LayoutParams adWhirlLayoutParams = new RelativeLayout.LayoutParams(320, 52);
Layout.addView(adWhirlLayout, adWhirlLayoutParams);
*/  
/*
    //-- 
    AdWhirlManager.setConfigExpireTimeout(1000 * 60 * 5);

       AdWhirlTargeting.setAge(23);
       AdWhirlTargeting.setGender(AdWhirlTargeting.Gender.MALE);
       AdWhirlTargeting.setKeywords("online games gaming");
       AdWhirlTargeting.setPostalCode("94123");
       AdWhirlTargeting.setTestMode(false);

       AdWhirlLayout adWhirlLayout = (AdWhirlLayout)findViewById(R.id.adwhirl_layout);

       TextView textView = new TextView(this);
       RelativeLayout.LayoutParams layoutParams = new
         RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,
                                     LayoutParams.WRAP_CONTENT);
       int diWidth = 320;
       int diHeight = 52;
       int density = (int) getResources().getDisplayMetrics().density;

       adWhirlLayout.setAdWhirlInterface((AdWhirlInterface) this);
       adWhirlLayout.setMaxWidth((int)(diWidth * density));
       adWhirlLayout.setMaxHeight((int)(diHeight * density));

       layoutParams.addRule(RelativeLayout.CENTER_HORIZONTAL);
       textView.setText("Below AdWhirlLayout");

       LinearLayout layout = (LinearLayout)findViewById(R.id.adwhirl_layout);

       layout.setGravity(Gravity.CENTER_HORIZONTAL);
       layout.addView(adWhirlLayout, layoutParams);
       layout.addView(textView, layoutParams);
       layout.invalidate();

    class HelloAdWhirl extends Activity implements AdWhirlInterface {
         public void onCreate(Bundle savedInstanceState) {
           super.onCreate(savedInstanceState);
           setContentView(R.layout.main);

           AdWhirlManager.setConfigExpireTimeout(1000 * 60 * 5);

           AdWhirlTargeting.setAge(23);
           AdWhirlTargeting.setGender(AdWhirlTargeting.Gender.MALE);
           AdWhirlTargeting.setKeywords("online games gaming");
           AdWhirlTargeting.setPostalCode("94123");
           AdWhirlTargeting.setTestMode(false);

           AdWhirlLayout adWhirlLayout = (AdWhirlLayout)findViewById(R.id.adwhirl_layout);

           TextView textView = new TextView(this);
           RelativeLayout.LayoutParams layoutParams = new
             RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,
                                         LayoutParams.WRAP_CONTENT);
           int diWidth = 320;
           int diHeight = 52;
           int density = (int) getResources().getDisplayMetrics().density;

           adWhirlLayout.setAdWhirlInterface(this);
           adWhirlLayout.setMaxWidth((int)(diWidth * density));
           adWhirlLayout.setMaxHeight((int)(diHeight * density));

           layoutParams.addRule(RelativeLayout.CENTER_HORIZONTAL);
           textView.setText("Below AdWhirlLayout");

       LinearLayout layout = (LinearLayout)findViewById(R.id.adwhirl_layout);

           layout.setGravity(Gravity.CENTER_HORIZONTAL);
           layout.addView(adWhirlLayout, layoutParams);
           layout.addView(textView, layoutParams);
           layout.invalidate();
         }

        public void adWhirlGeneric() {
            // TODO Auto-generated method stub

        }
        }   
*/      
// -- empiezan las recetas  
Button primerarecetaPlayerBtn = (Button)findViewById(R.id.primerarecetaPlayerBtn);
Button segundarecetaPlayerBtn = (Button)findViewById(R.id.segundarecetaPlayerBtn); 
```

错误后的堆栈转储是这样的：

```
java.lang.NullPointerException: package name is null
at android.content.ComponentName.<init>(ComponentName.java:46)
at com.adwhirl.AdWhirlLayout.getAdWhirlKey(AdWhirlLayout.java:119)
at com.adwhirl.AdWhirlLayout.<init>(AdWhirlLayout.java:107)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.instantiateClass(ProjectCallback.java:413)
at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.loadView(ProjectCallback.java:170)
at android.view.BridgeInflater.loadCustomView(BridgeInflater.java:207)
at android.view.BridgeInflater.createViewFromTag(BridgeInflater.java:135)
at android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:746)
at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:64)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:718)
at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
at android.view.LayoutInflater.inflate(LayoutInflater.java:372)
at com.android.layoutlib.bridge.impl.RenderSessionImpl.inflate(RenderSessionImpl.java:385)
at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:332)
at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:440)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1545)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1302)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.changed(GraphicalEditorPart.java:718)
at com.android.ide.eclipse.adt.internal.editors.layout.configuration.ConfigurationChooser.syncRenderState(ConfigurationChooser.java:1721)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.activated(GraphicalEditorPart.java:1052)
at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.delegatePageChange(LayoutEditorDelegate.java:683)
at com.android.ide.eclipse.adt.internal.editors.common.CommonXmlEditor.pageChange(CommonXmlEditor.java:360)
at org.eclipse.ui.part.MultiPageEditorPart$2.widgetSelected(MultiPageEditorPart.java:292)
at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:248)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Display.sendEvent(Display.java:4134)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1458)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1481)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1466)
at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:1271)
at org.eclipse.swt.custom.CTabFolder.setSelection(CTabFolder.java:3023)
at org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:1730)
at org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:270)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Display.sendEvent(Display.java:4134)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1458)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1481)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1466)
at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:1271)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3980)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3619)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1029)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:923)
at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:588)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
at org.eclipse.equinox.launcher.Main.run(Main.java:1438) 
```

问题发生在：

03-17 17:00:24.263: E/AndroidRuntime(10705): at com.recetas.two.RecetasTwo.onCreate(RecetasTwo.java:101)

DDMS 的转储说：

```
 03-17 16:40:07.674: W/ICU(26150): Missing ICU latn symbols system value: U_MISSING_RESOURCE_ERROR
03-17 16:40:07.956: D/(26150): bjarch:Create hashTable
03-17 16:40:07.988: I/dalvikvm(26150): threadid=3: reacting to signal 3
03-17 16:40:08.280: I/dalvikvm(26150): Wrote stack traces to '/data/anr/traces.txt'
03-17 16:40:08.560: I/dalvikvm(26150): threadid=3: reacting to signal 3
03-17 16:40:08.710: I/dalvikvm(26150): Wrote stack traces to '/data/anr/traces.txt'
03-17 16:40:08.729: I/Ads(26150): To get test ads on this device, call adRequest.addTestDevice("79DA5934F2C7B69BE58A3F8A1D6FA419");
03-17 16:40:08.974: I/dalvikvm(26150): threadid=3: reacting to signal 3
03-17 16:40:09.037: I/dalvikvm(26150): Wrote stack traces to '/data/anr/traces.txt'
03-17 16:40:09.076: D/AndroidRuntime(26150): Shutting down VM
03-17 16:40:09.076: W/dalvikvm(26150): threadid=1: thread exiting with uncaught exception (group=0x41a0e6f0)
03-17 16:40:09.078: E/AndroidRuntime(26150): FATAL EXCEPTION: main
03-17 16:40:09.078: E/AndroidRuntime(26150): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.recetas.two/com.recetas.two.RecetasTwo}: java.lang.ClassCastException: android.widget.ScrollView cannot be cast to android.widget.LinearLayout
03-17 16:40:09.078: E/AndroidRuntime(26150):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2049)
03-17 16:40:09.078: E/AndroidRuntime(26150):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2083)
03-17 16:40:09.078: E/AndroidRuntime(26150):    at android.app.ActivityThread.access$600(ActivityThread.java:134)
03-17 16:40:09.078: E/AndroidRuntime(26150):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1233)
03-17 16:40:09.078: E/AndroidRuntime(26150):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-17 16:40:09.078: E/AndroidRuntime(26150):    at android.os.Looper.loop(Looper.java:137)
03-17 16:40:09.078: E/AndroidRuntime(26150):    at android.app.ActivityThread.main(ActivityThread.java:4697)
03-17 16:40:09.078: E/AndroidRuntime(26150):    at java.lang.reflect.Method.invokeNative(Native Method)
03-17 16:40:09.078: E/AndroidRuntime(26150):    at java.lang.reflect.Method.invoke(Method.java:511)
03-17 16:40:09.078: E/AndroidRuntime(26150):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
03-17 16:40:09.078: E/AndroidRuntime(26150):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
03-17 16:40:09.078: E/AndroidRuntime(26150):    at dalvik.system.NativeStart.main(Native Method)
03-17 16:40:09.078: E/AndroidRuntime(26150): Caused by: java.lang.ClassCastException: android.widget.ScrollView cannot be cast to android.widget.LinearLayout
03-17 16:40:09.078: E/AndroidRuntime(26150):    at com.recetas.two.RecetasTwo.onCreate(RecetasTwo.java:101)
03-17 16:40:09.078: E/AndroidRuntime(26150):    at android.app.Activity.performCreate(Activity.java:4542)
03-17 16:40:09.078: E/AndroidRuntime(26150):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
03-17 16:40:09.078: E/AndroidRuntime(26150):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2013)
03-17 16:40:09.078: E/AndroidRuntime(26150):    ... 11 more
03-17 16:40:09.171: I/Ads(26150): adRequestUrlHtml: <html><head><script src="http://media.admob.com/sdk-core-v40.js"></script><script>AFMA_getSdkConstants();AFMA_buildAdURL({"kw":[],"preqs":0,"session_id":"8406145823976734783","u_sd":1.5,"seq_num":"1","slotname":"a14ea442d20988d","u_w":360,"msid":"com.recetas.two","js":"afma-sdk-a-v6.2.1","mv":"15.android","isu":"79DA5934F2C7B69BE58A3F8A1D6FA419","cipa":0,"bas_off":0,"format":"320x50_mb","oar":0,"net":"ed","app_name":"1.android.com.recetas.two","hl":"en","ad_pos":{"height":0,"visible":0,"y":0,"x":0,"width":0},"gnt":15,"u_h":592,"carrier":"21401","bas_on":0,"ptime":0,"u_audio":3});</script></head><body></body></html>
03-17 16:40:09.560: I/dalvikvm(26150): threadid=3: reacting to signal 3
03-17 16:40:09.706: I/dalvikvm(26150): Wrote stack traces to '/data/anr/traces.txt'
03-17 16:40:09.989: I/dalvikvm(26150): threadid=3: reacting to signal 3
03-17 16:40:10.062: I/dalvikvm(26150): Wrote stack traces to '/data/anr/traces.txt'
03-17 16:40:10.083: D/CallStack(26150): #00  pc 002d637a  /system/lib/libwebcore.so
03-17 16:40:10.083: D/CallStack(26150): #01  pc 00557e76  /system/lib/libwebcore.so
03-17 16:40:10.083: D/CallStack(26150): #02  pc 0002d200  /system/lib/libdvm.so
03-17 16:40:10.474: I/dalvikvm(26150): threadid=3: reacting to signal 3
03-17 16:40:10.537: I/dalvikvm(26150): Wrote stack traces to '/data/anr/traces.txt'
03-17 16:40:10.976: I/dalvikvm(26150): threadid=3: reacting to signal 3
03-17 16:40:11.023: I/dalvikvm(26150): Wrote stack traces to '/data/anr/traces.txt'
03-17 16:40:11.232: V/webcore(26150): SET_BACKGROUND_COLOR arg1=0 arg2=0 obj=null
03-17 16:40:11.232: V/webcore(26150): SET_BACKGROUND_COLOR arg1=0 arg2=0 obj=null
03-17 16:40:11.232: V/webcore(26150): SET_BACKGROUND_COLOR arg1=0 arg2=0 obj=null
03-17 16:40:11.476: I/dalvikvm(26150): threadid=3: reacting to signal 3
03-17 16:40:11.489: I/dalvikvm(26150): Wrote stack traces to '/data/anr/traces.txt'
03-17 16:40:11.976: I/dalvikvm(26150): threadid=3: reacting to signal 3
03-17 16:40:11.981: I/dalvikvm(26150): Wrote stack traces to '/data/anr/traces.txt'
03-17 16:40:12.477: I/dalvikvm(26150): threadid=3: reacting to signal 3
03-17 16:40:12.506: I/dalvikvm(26150): Wrote stack traces to '/data/anr/traces.txt'
03-17 16:40:12.985: I/dalvikvm(26150): threadid=3: reacting to signal 3 
```

我无法访问 /data/anr/traces.txt，因为我的设备没有植根……至少今天没有。

屏幕上出现一条消息，上面写着“不幸的是 com.recetas.two 已停止工作”

我已经尝试了我在谷歌上搜索的所有内容，但没有办法:-(你能帮我解决这个问题吗？

提前感谢您的帮助佩德罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:18:00.427

你有两个问题：

1.  根据 logcat，您正在尝试将 ScrollView 转换为 LinearLayout。`LinearLayout layout = (LinearLayout)findViewById(R.id.scroll);`你会想要修复`ScrollView layout = (ScrollView)findViewById(R.id.scroll);`
2.  如果您的 XML 文件中不再有 AdWhirlLayout，请确保您的代码中根本没有引用 AdWhirl。很难说你是否真的把所有东西都注释掉了。

# objective-c - 在Objective C中将单词中的所有首字母大写？

> ID：15424953
> 
> 赞同：1
> 
> 时间：2013-03-15T04:47:39.997
> 
> 标签：objective-c, cocoa

有谁知道该怎么做？

所以我们根据空间分割它，然后将每个大写，然后将它们移回正确的位置？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T04:51:54.023

您可以使用以下任一方法来实现：

[`-[NSString capitalizedString]`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/capitalizedString)

或者：

[`-[NSString capitalizedStringWithLocale:]`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/capitalizedStringWithLocale%3a)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T04:52:14.570

只需使用[`capitalizedString`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-capitalizedString)方法。

> **返回值**
> 
> 接收器中每个单词的第一个字符的字符串更改为其相应的大写值，所有剩余字符设置为其相应的小写值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T04:51:39.653

大写使用：

```
string=[string capitalizedString]; 
```

用大写字母给出句子的每个单词。

* * *

> 所以我们根据空间分割它，然后将每个大写，然后将它们移回正确的位置？

这不是必需的。无需中断单词并单独将每个单词大写。

# jsonp - 谷歌阅读器供稿导入

> ID：15424957
> 
> 赞同：1
> 
> 时间：2013-03-15T04:48:11.030
> 
> 标签：jsonp, google-reader

我正在开发一个社交 RSS 阅读器网站，随着 Google Reader 即将关闭的消息，我们想利用这一点，为用户提供一项功能，以与他们可能的方式相同的方式自动导入他们的 Google Reader 提要导入联系人。我似乎无法为此找到一个好的 API。

[我发现的一个解决方案是向http://www.google.com/reader/api/0/subscription/list](http://www.google.com/reader/api/0/subscription/list)发送请求，但它不起作用，因为我们必须经过身份验证才能接收结果。这意味着要么用户将他们的谷歌帐户密码发送给我们，显然是不可接受的，要么我们在客户端进行请求。但是，该 API 似乎不支持 jsonp，因此我们无法进行跨站点查询。

有没有人有我忽略的任何建议或链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T19:44:06.923

我正在为我的应用程序开发类似的功能，并且我得到了所有订阅的列表（使用以下 URL），使用通过使用 OAuth 2.0 for google reader API 验证用户获得的 access_token 进行 GET 调用。

[https://www.google.com/reader/api/0/subscription/list?output=json&access_token=USER_ACCESS_TOKEN](https://www.google.com/reader/api/0/subscription/list?output=json&access_token=USER_ACCESS_TOKEN)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T21:25:11.850

您可以使用 OAuth，以便用户授予您代表他们执行该服务器端请求的权限。

如果您使用 Java 进行开发，您可以使用[readr](https://github.com/shakiba/readr)（我开发的一个 Google Reader 客户端）。

# c# - unity 3d 中的简单 int 数组

> ID：15424962
> 
> 赞同：0
> 
> 时间：2013-03-15T04:48:56.573
> 
> 标签：c#, unity3d

如何在类中创建一个 int 数组。

我必须向该数组添加值。

不是特定的键。

我将数组声明为

```
public int[] iArray; 
```

从函数我必须将 i 的值插入到数组中。我的 i 价值观发生了变化。所以我必须将它们保存在一个数组中。

```
iArray[] = i; 
```

但它显示错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T04:51:00.470

处理数组非常简单，只需像这样声明它们：

```
int[] values = new int[10];
values[i] = 123; 
```

但是，C# 中的数组具有固定大小。如果您希望能够拥有可调整大小的集合，则应使用 a`List<T>`而不是数组。

```
var values = new List<int>();
values.Add(123); 
```

或作为类属性：

```
class SomeClass
{
    private List<int> values = new List<int>();

    public List<int> Values { get { return this.values; } }
}

var someInstance = new SomeClass();
someInstance.Values.Add(123); 
```

# java - 在 for 循环中找不到符号编译错误

> ID：15424964
> 
> 赞同：-1
> 
> 时间：2013-03-15T04:49:05.103
> 
> 标签：java, loops, for-loop

我在这里的代码有问题。我试图找到 3 和 5 的所有倍数到 1000 并将它们全部加起来，最后当我尝试输出总和时，java 给了我一个“找不到符号”错误。任何人都可以弄清楚这里有什么问题吗？

```
public class Problem1
    {
        public static void main(String []args)
        {
            //int sum1;
            //int sum2;
            int finalSum;

            for(int i = 0; i < 1000; i++)
            {
                if(i % 3 == 0)
                {
                    int sum;
                    sum += i;
                }
                else if(i % 5 == 0)
                {
                    int sum;
                    sum += i;
                }
            }
            System.out.println(sum);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T04:50:36.747

Java 具有[*块作用域，*](http://en.wikipedia.org/wiki/Scope_%28computer_science%29#Block_scope_within_a_function)这意味着在 s（大括号）`sum`之间声明的在`{}`外部不可见。在循环外声明`sum` **一次。**`for`

```
public class Problem1
{
    public static void main(String []args)
    {
        int sum = 0;

        for(int i = 0; i < 1000; i++)
        {
            if(i % 3 == 0)
            {
                sum += i;
            }
            else if(i % 5 == 0)
            {
                sum += i;
            }
        }
        System.out.println(sum);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:54:28.377

您已经在 if/else 中定义了变量 sum，这限制了变量的范围。`System.out.print()`声明超出了范围，`sum`因此您会收到错误消息。

```
public class Problem1
{
    public static void main(String []args)
    {
        int sum=0;
        for(int i = 0; i < 1000; i++)
        {
            if(i % 3 == 0)
            {
                sum += i;
            }
            else if(i % 5 == 0)
            {
                sum += i;
            }
        }
        System.out.println(sum);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T04:50:57.297

你不能在循环中声明`sum`。那么它是该方法的本地。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T04:51:08.573

这是因为您在限制其范围`sum`的`if`语句内“创建” - 它们在`if`块内创建并在下一个右括号中销毁。

去掉块`int sum;`内的这两行`if`并将其放在函数的顶部（相当无用`finalSum`的地方）。或者只是在任何地方*使用* `finalSum`。

您还可以组合`if`更短代码的条件：

```
public class Problem1
{
    public static void main(String []args)
    {
        int finalSum = 0;

        for(int i = 0; i < 1000; i++)
            if((i % 3 == 0) || (i % 5 == 0))
                finalSum += i;

        System.out.println(finalSum);
    }
} 
```

# android - android - 子菜单点击没有选择正确的项目

> ID：15424969
> 
> 赞同：0
> 
> 时间：2013-03-15T04:49:40.253
> 
> 标签：android, android-actionbar

我有一个带有子菜单的菜单。父项是“选项”，其子项是“呼叫”、“导航”和“编辑”。这是我处理菜单点击的活动代码。问题是第一个子菜单总是被事件选中。使用此代码，如果我单击“调用”（第一个子项），onOptionsItemSelected() 方法将注册被选中的 R.id.record_edit 项。我不知道为什么会发生这种情况，因为“呼叫”菜单项的 ID 为“record_call”。我尝试在 xml 中切换子菜单项，但第一个子菜单项是唯一注册的，它始终注册为 R.id.record_edit。不确定我的代码有什么问题。

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {
    case R.id.record_edit:

        Intent intent = new Intent(this, EditRecordActivity.class);
        myApp.setRecord(record);
        Bundle b = new Bundle();
        b.putBoolean("new", false);
        b.putString("pageTitle", pageTitle);
        b.putString("meta_universalid", meta_universalid);
        intent.putExtras(b);
        startActivity(intent);
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

xml菜单

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

   <item
        android:id="@+id/record_options"
        android:showAsAction="ifRoom|withText"
        android:title="..."
        android:titleCondensed="Options"
        android:enabled="true">
        <menu>

            <item
                android:id="@+id/record_call"
                android:showAsAction="ifRoom|withText"
                android:title="@string/record_call"/>
            <item
                android:id="@+id/record_navigate"
                android:showAsAction="ifRoom|withText"
                android:title="@string/record_navigate"/>

            <item
                android:id="@+id/record_edit"
                android:showAsAction="ifRoom|withText"
                android:title="@string/record_edit"/>           
        </menu>
   </item>
</menu> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T05:26:02.083

刚刚检查了你的菜单以确定。它对我很好。检查你的整体格式是否像下面的代码

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.record_call:
        Toast.makeText(this, "call", 1000).show();
        return true;
    case R.id.record_edit:
        Toast.makeText(this, "edit", 1000).show();

        return true;
    case R.id.record_navigate:
        Toast.makeText(this, "navigate", 1000).show();

        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

# hibernate - 是否可以防止 Hibernate Envers 将实体存储在审计表中，除非它被修改

> ID：15424972
> 
> 赞同：1
> 
> 时间：2013-03-15T04:49:48.313
> 
> 标签：hibernate, hibernate-envers

我需要维护数据库中数据的修改历史。修改不会很常见，因此似乎可以存储整行而不是仅存储差异，这在空间方面会更有效。Hibernate envers 似乎是一个不错的解决方案。

现在我注意到 Audit 表更像是一个影子表，它将在第一次插入时存储数据。是否可以防止 envers 在第一次更新之前存储审计信息。我只是想减少数据库的磁盘占用，因为我可能不是在非常高性能的服务器上运行。我希望实际表包含最新数据，而审计表只包含历史数据而不是当前行。我没有在我的 persistence.xml 中使用任何特定配置。Hibernate 4.1 似乎找到了带有注释的审计类。我认为我应该处理插入后的侦听器，但不确定我应该如何处理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-09T01:41:36.370

这之前已经被请求过，虽然这可能是一个不错的功能，但它绝对没有自己的问题来源。

了解 Envers 附带 2 种审计策略：`Default`和`Validity`.

这`DefaultAuditStrategy`是一个非常基本的策略，它不期望审计表中存在任何先前的修订行。这种特殊策略可能很容易适用于仅存储*更改*的行的情况。

但不幸的是，其他策略不会。

`ValidityAuditStrategy`期望在检测到*更改*时存在先前的审计行来操纵有效性策略列。如果审计表不存储插入，那么第一次*更改*将失败，因为策略将确定它无法正确操作策略字段。

这可能会在未来的某个时候改变，但目前我们不支持这种情况。

# javascript - 提交后重置表单

> ID：15424975
> 
> 赞同：1
> 
> 时间：2013-03-15T04:50:36.770
> 
> 标签：javascript, jquery, ajax

我是 ajax 和 jquery 的新手。我已使用以下代码提交表单数据，它工作正常。

但我需要在提交表单后重置（清除表单字段），所有验证都为真。在哪里编写代码以清除表单。

**html表单：**

```
<form action="#" name="formdata" id="replyform" method="post">
    <div class="pass-form">
        <div class="input-row">
            <div class="row_label">
                Old Password
            </div>
            <span><input type="text" id="User_pass1" name="User_pass1"/></span>
        </div>
        <div class="input-row">
            <div class="row_label">
                New Password:
            </div>
            <span><input id="User_pass2" name="User_pass2" type="password"/></span>
        </div>
        <div class="input-row">
            <div class="row_label">
                Re-Enter New Password:
            </div>
            <span><input id="User_pass3" name="User_pass3" type="password"/></span>
        </div>
        <div class="input-row">
            <div class="row_label">
                &nbsp;
            </div>
            <span>&nbsp;<button name="chpass" onclick="submitform();" class="button" type="button" value="Save">Save</button>
            <button name="chpr" type="reset" class="button" value="Reset">Reset</button></span>
        </div>
    </div>
</form> 
```

**Javascript函数：**

```
 function submitform() {
        var User_pass1 = document.getElementById("User_pass1").value.match("^\\S[0-9a-zA-Z.-]*$");
        var User_pass2 = document.getElementById("User_pass2").value.match("^\\S[0-9a-zA-Z.-]*$");
        var User_pass3 = document.getElementById("User_pass3").value.match("^\\S[0-9a-zA-Z.-]*$");
        //document.getElementById("User_pass1").value="";
        //document.getElementById("User_pass2").value="";
        //document.getElementById("User_pass3").value="";
        if (User_pass1 == null) {
            alert("password field Required.....!");
            return;
        } else if (User_pass2 == null) {
            alert(" New password  field Required.....!");
            return;
        } else if (User_pass3 == null) {
            alert("New password conformation field Required.....!");
            return;
        } else if (String(User_pass2) != String(User_pass3)) {
            alert("New password and  conformation not match....!");
            return;
        } else {
            var str = "User_pass1=" + User_pass1 + "&User_pass2=" + User_pass2;
            $.ajax({
                type: "POST",
                url: _baseurl + "/setting/",
                data: str,
                success: function (output) 
                {alert(output);}
            });
            return;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T04:54:23.823

尝试这个：

```
 $.ajax({
      type: "POST",
      url: _baseurl + "/setting/",
      data: str,
      success: function (output)  {
         alert(output);
         $('#replyform').find("input[type=text], input[type=password]").val("");
      }
 }); 
```

此外，如果您正在使用，则`jQuery`应该使用`$('#User_pass1').val()`代替`document.getElementById("User_pass1").value`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T04:52:52.873

`success`您需要在内部回调中写入。

```
success: function (output) 
{
  alert(output);
  $('#replyform').reset();
} 
```

# java - 使用 Apache Poi 生成批量 excel 文件时出现套接字异常

> ID：15424978
> 
> 赞同：2
> 
> 时间：2013-03-15T04:50:49.673
> 
> 标签：java, web, apache-poi

我正在`SocketConnectionException`为批量数据（超过 50 万条记录）生成 Excel 文件。

我的 Web 应用程序的代码写入 `outputstream. 这是一段代码：

```
while (sr.next()) {
      counter++;  //advance counter
      view = (DataClass) sr.get(0);
      try {
          //writing fields values for Activity Report file
          reportService.writeExcelFieldsValue(rowCounter,sheet,view,user,exportedFields);
          rowCounter++;
      } catch (Exception e) {
          throw new RuntimeException(e);
      }

      if (counter == chunkSize || sr.isLast()) {
          counter = 0;  //reset counter
          //Clear the session after a chunk and before next chunk
          getSession().clear();
      }
}
wb.write(bos);
bos.flush(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T07:46:10.310

POI 提供建立在 XSSF 之上的低内存占用 SXSSF API。

SXSSF 是 XSSF 的 API 兼容的流式扩展，可在必须生成非常大的电子表格且堆空间有限时使用。SXSSF 通过限制对滑动窗口内行的访问来实现其低内存占用，而 XSSF 允许访问文档中的所有行。不再在窗口中的旧行变得不可访问，因为它们被写入磁盘。

在自动刷新模式下，可以指定访问窗口的大小，以在内存中保存一定数量的行。当达到该值时，创建附加行会导致索引最低的行从访问窗口中删除并写入磁盘。或者，可以将窗口大小设置为动态增长；它可以根据需要通过显式调用 flushRows(int keepRows) 定期修剪。

由于实现的流性质，与 XSSF 相比存在以下限制：

*   在某个时间点只能访问有限数量的行。
*   不支持 Sheet.clone()。不支持公式评估
*   我认为此链接可能对您有所帮助

我想你会想要使用 XSSF EventModel 代码。请参阅[POI 文档](http://poi.apache.org/spreadsheet/how-to.html#xssf_sax_api)以开始使用。或欲了解更多详情，请单击[此处](http://poi.apache.org/spreadsheet/index.html)

此链接也可能对您有所帮助。 [使用 POI 将大型结果集写入 Excel 文件](https://stackoverflow.com/questions/7274076/writing-a-large-resultset-to-an-excel-file-using-poi)[](https://stackoverflow.com/questions/7274076/writing-a-large-resultset-to-an-excel-file-using-poi)

# c# - 按 LINQ 中的第一个字母按单词列表分组

> ID：15424985
> 
> 赞同：4
> 
> 时间：2013-03-15T04:51:28.130
> 
> 标签：c#, .net, linq

我必须在 LINQ 中按单词的首字母分组。因为我是 LINQ 的新手，所以我不知道调试它。

//代码

```
var words4 = testDS.Tables["Words4"].AsEnumerable();

var wordGroups =
    from w in words4
    group w by w.Field<string>("word")[0] into g
    select new {FirstLetter = g.Key, Words = g };

foreach (var g in wordGroups)
{
    Console.WriteLine("Words that start with the letter '{0}':", g.FirstLetter);  
    Console.WriteLine(g.Field<string>("word"));

} 
```

它在最后一个 Console.WriteLine 中抛出“无效参数”执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T06:43:35.807

尝试在内部添加一个循环，以便更准确地获得结果。

代替：

```
Console.WriteLine(g.Field<string>("word")); 
```

和：

```
foreach (var w in g.Words)
{
    Console.WriteLine(w.Field<string>("word"));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T04:53:47.107

由于在您的 中`select`，您创建了一个字段指定为的匿名对象，`Words`后来您通过 访问它`word`，`Field`也不需要扩展方法。

您需要更换：

```
Console.WriteLine(g.Field<string>("word")); 
```

和

```
Console.WriteLine(g.Words); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T06:27:46.120

首先，不是由 DataRows 组成的组，因为您只想显示单词，所以我会从数据行中选择您想要的单词。其次，记住单词在列表中。如果您想将它们打印出来，您需要循环或执行类似 string.Join 的操作（如下所示）。例如：

```
var wordGroups =
    from w in words4.Select(w => w.Field<string>("word"))
    group w by w[0] into g
    select new { FirstLetter = g.Key, Words = g };

foreach (var g in wordGroups) {
    Console.WriteLine("Words that start with the letter '{0}':", g.FirstLetter);
    Console.WriteLine(string.Join(", ", g.Words));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T07:52:57.677

`wordGroups`这应该使用**Linq 语法**从内部获取您想要的内容：

 **代替：

```
Console.WriteLine(g.Field<string>("word")); 
```

和：

```
g.Words.ForEach(w => Console.WriteLine(W.Field<string>("word")); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-05T13:33:06.803

另一种选择是这样的？

```
Dictionary<string, List<Product>> groupedDictionary = _db.Products.GroupBy(g => g.Name.Substring(0,1)).ToDictionary(g => g.Key, g => g.ToList()); 
```**

# android - 强制停止应用程序后使用警报管理器重置警报

> ID：15424996
> 
> 赞同：0
> 
> 时间：2013-03-15T04:52:15.407
> 
> 标签：android, service, notifications, alarmmanager, forceclose

我按照这篇文章[http://it-ride.blogspot.com/2010/10/android-implementing-notification.html](http://it-ride.blogspot.com/2010/10/android-implementing-notification.html)来实现通知服务。它使用 AlarmManager 和 Wakelock 来启动服务。当您重新启动设备时，警报设置正确，或者当您打开应用程序时，警报已设置，但如果您强制关闭应用程序，警报就会消失。我想在应用程序被强制停止后重置警报。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T04:55:48.053

根据 Google 的 Android 工程师的说法，一个被强制停止的应用程序在用户调用它之前不会重新启动。

查看[此处](https://groups.google.com/forum/?fromgroups#!topic/android-developers/Zi0Qq2G2ikg)找到的以下回复。

# ruby - 将人类可读的字符串转换为要使用 data-uris 显示的图像

> ID：15424998
> 
> 赞同：0
> 
> 时间：2013-03-15T04:52:18.680
> 
> 标签：ruby, image, hash, data-uri, identicon

是否有任何传统方法可以将任意字符串转换为图像？

在我的用例中，假设我想为每个用户创建一个直接映射到该用户名的图像。

这个概念类似于 QR 码，只是输出图像不是为了可读、简单漂亮和一致而设计的。

最终我想要类似的东西：

```
def to_image(a_string)
    ... #magic
    return a_data_uri
end 
```

这样

```
# is always true
to_image("specific string") == to_image("specific string") 
```

理想情况下，您最终会得到一些漂亮的分形艺术之类的图像。

如果我所描述的内容是荒谬的，那么可以将字符串转换为包含二维码的 data-uri 的函数就可以了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T05:11:14.557

一种可能性是对字符串进行散列 - 这为您提供唯一的数字作为输出。然后您可以将这些数字作为输入参数传递给分形生成函数。

对于散列，可以使用真正的散列函数，或者（在用户数量有限的情况下）您可以使用 CRC 函数（CRC16、CRC32）。这两种方法都会给你唯一的数字作为输出。对于 CRC，您必须更加小心 - 例如，有 60K 输入字符串并使用 CRC16 可能最终会出现一些冲突（不同的字符串 - 相同的 CRC16 编号）。